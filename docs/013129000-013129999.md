# StackOverflow 问答 13129000-13129999

# c++ - 使用 C++ 将 QML 元素动态添加/插入到 QML 视图中

> ID：13129000
> 
> 赞同：2
> 
> 时间：2012-10-29T20:18:29.083
> 
> 标签：c++, qt, qml, blackberry-10, blackberry-qnx

我没有尝试将我创建的自定义 QML 元素添加到已经从 C++ 加载的另一个 QML 视图中。

上下文如下：我正在从 C++ 加载 QML 视图，并且我需要将另一个 QML 自定义组件注入到此 QML 视图中。全部在 C++ 中。

我一直在寻找 4 个小时，但我还没有找到一种方法来完成这个。

这里有一些代码可以让你有一个更好的视角：

```
QmlDocument *qml = QmlDocument::create("asset:///PosicionConsolidad.qml").parent(this);
qml->setContextProperty("pos", this);

Page *page = qml->createRootObject<Page>();
myST = GlobalST::getInstance();
LoadInfo();

_mRoot->push(page);
_app->setScene(_mRoot);

void Project::LoadInfo() {
    QmlDocument *qml = QmlDocument::create("asset:///customComponents/TableRow.qml").parent(this);
    //Here's where I need to append this new QML custom element to the 
    //page previously loaded.
    //I don't know if I can just inject it or I need to make a find child to 
    //maybe a parent container in the QML view and then add it there. But I 
    //also tried that and didn't work out.
} 
```

请帮忙。问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T05:48:26.050

您可以在 C++ 中创建 Page 和根容器，然后从两个 QML 文件中添加其他所有内容。但实际上，它用`findChild()`用于创建页面和容器的代码替换了调用。可能不值得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T22:27:45.273

好吧，我终于找到了一种方法，它并不完全是最清洁或最美丽的。我使用 Find Child 函数来获取属于 QML 加载视图的容器，然后根据需要多次添加我的 QML 自定义组件。

下面的一些代码：

```
Class::Constuctor(bb::cascades::Application *app,
        NavigationPane* mRoot) :
        QObject(app) {

    _app = app;
    _mRoot = mRoot;

    QmlDocument *qml =
            QmlDocument::create("asset:///PosicionConsolidad.qml").parent(this);
    qml->setContextProperty("pos", this);

    posicionConsolidadaPage = qml->createRootObject<Page>();
    _mRootContainer = posicionConsolidadaPage->findChild<Container*>("posicion_consolidadad");

    LoadInfo();

    _mRoot->push(posicionConsolidadaPage);
    _app->setScene(_mRoot);
}

void Class::LoadInfo() {

        QmlDocument *qml = QmlDocument::create(
                "asset:///customComponents/TableRow.qml").parent(this);
        Container *activesHeader = qml->createRootObject<Container>();

        AbsoluteLayout *pAbsoluteLayout = new AbsoluteLayout();
        activesHeader->setLayout(pAbsoluteLayout);

        AbsoluteLayoutProperties* pProperties = AbsoluteLayoutProperties::create();
        pProperties->setPositionX(0);
        pProperties->setPositionY(155);
        activesHeader->setLayoutProperties(pProperties);

        _mRootContainer->add(activesHeader);
} 
```

希望能帮助到你。如果有人知道如何将新组件直接添加到 Page 对象或类似的东西，请发布:)

# python - 列出并计算重复字母

> ID：13129001
> 
> 赞同：2
> 
> 时间：2012-10-29T20:18:32.303
> 
> 标签：python

我需要从用户那里接收一个字符串，将其显示在列表中，以便列表中的每个器官都包含[字母，它连续重复的数字]。

我认为我的代码很好，但它不起作用。

这是我的代码：

```
my_str = raw_input( "Enter a string:" )

j=0
while j<=len(my_str):
    for i in my_str:
        counter=0
        if i==i+1:
            counter +=1
            continue
            print i, counter

        else:
            print i,1
            j+=1 
```

输出：

```
输入一个字符串：baaaaab
作为列表：[['b', 1], ['a', 5], ['b', 1]]
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T20:21:04.253

这与您的代码截然不同，但更有效的方法是使用[`itertools.groupby`](http://docs.python.org/2/library/itertools.html#itertools.groupby)：

```
import itertools
my_str = raw_input("Enter a string:")
print [[g[0], sum(1 for _ in g[1])] for g in itertools.groupby(my_str)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T20:21:28.487

提示：这里，i+1 不是你的意思。python解释器告诉你问题出在哪里。

提示：在这里，在您的代码中，该`print i,counter`行永远不会执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T23:06:52.510

正如[Amber所建议的，您需要的内容已由](https://stackoverflow.com/users/148870/amber)[集合](http://docs.python.org/2/library/collections.html)模块中的 Counter 字典提供。

```
from collections import Counter
my_str = raw_input( "Enter a string:" )
count = Counter(my_str)
print count.items() 
```

唯一的限制是它甚至会计算特殊字符。如果您只想计算标准字母，可以参考[字符串](http://docs.python.org/2/library/string.html)模块来获取字母列表，广告只保留您感兴趣的字母：

```
from collections import Counter
from string import ascii_letters
my_str = raw_input( "Enter a string:" )
count = Counter(s for s in my_str if s in ascii_letters)
print count.items() 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-29T20:36:08.110

下面的代码与您的实现类似，但使用了 set。

```
s = 'abcdeff'
set((i, s.count(i)) for i in s ) 
```

输出：

```
set([('a', 1), ('b', 1), ('c', 1), ('d', 1), ('e', 1), ('f', 2)]) 
```

# asp.net - 地址的正则表达式

> ID：13129004
> 
> 赞同：0
> 
> 时间：2012-10-29T20:19:10.667
> 
> 标签：asp.net

我想为邮政地址写一个正则表达式，即

> 20 玫瑰街或 130 Qeens 路

我试过`[0-9]{1,2,3,4}[A-Za-z]`但它不起作用

有什么建议么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:25:13.073

根据您的要求，这应该有效：

`[0-9]{1,} [a-zA-Z]{1,}( [a-zA-Z]{1,}){1,}`

此外，如果你想在最后允许公寓号码，你可以添加这个

`([0-9]{1,} [a-zA-Z]{1,}( [a-zA-Z]{1,}){1,})( [0-9]{1,})?`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-29T20:23:41.407

如果是 MySQL 试试这个[http://dev.mysql.com/doc/refman/5.1/en/regexp.html](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)

前任。所有电子邮件@gmail.com 和@yahoo.com

SELECT * FROM customer where email REGEXP 'gmail.com|yahoo.com' group by email;

# html - c中的空格分隔

> ID：13129009
> 
> 赞同：1
> 
> 时间：2012-10-29T20:19:44.700
> 
> 标签：html, c, post, cgi

我正在做一个cgi。我在 html 中使用 POST 方法，我从 C 中的标准输入接收到一个字符串。我想获取我使用 post 方法上传的文件的内容。所以我必须在 Content-Type:(something) (content) 之后到达 STDIN 的部分。问题是我找不到如何分割空白的方法。

有什么想法吗？

```
 //---post functions---
    lenstr=getenv("CONTENT_LENGTH");
     if(lenstr == NULL || sscanf(lenstr,"%ld",&len)!=1 || len > 1048576)
    {
          printf("<P>Error in invocation - wrong FORM probably.");
        }    
     else{
     fread(input, len+1,1, stdin);
     strtok(input,":");
     strtok(NULL,":");
     strtok(NULL,"/");
     //strtok(NULL," ");
    input_p3=strtok(NULL,"");   
     len_p=strlen(input)-strlen("Content-Disposition");
     len_p3=strlen(input_p3);
     strcpy(paper->paper_file_name,input_p3);
             for(u=0;u<len_p3-len_p-2;u++){
                printf("%c",paper->paper_file_name[u]);
            } 
```

如果我取消注释我拥有的 strtok //，它不起作用。但是这种方式例如打印一个txt文件“plain（content）”并且plain来自text/plain

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T20:20:38.917

使用`strtok`函数并`" "`用作您的分隔符。对该函数的连续调用将返回一个指向字符串中下一个标记的指针，因此第一次调用会给出“Content-type：”，然后接下来的 2 次调用会给你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T20:27:36.993

[http://www.cplusplus.com/reference/clibrary/cstring/strtok/](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)

但要小心，因为 strtok 有一个全局变量来指示当前标记索引，因此请考虑将其包装在关键部分中。

# python - 使用reportlab和django框架在一个pdf文件中生成多个二维码

> ID：13129015
> 
> 赞同：5
> 
> 时间：2012-10-29T20:20:05.347
> 
> 标签：python, django, reportlab

使用reportlab，我如何生成一系列二维码并将它们放在一个pdf中，然后在用户浏览器上打开它。这是我的尝试。提前致谢。对于下面的这段代码，没有任何反应。我期望系统会提示我保存 pdf 文件。

```
from reportlab.pdfgen import canvas
from django.http import HttpResponse
from reportlab.graphics.shapes import Drawing 
from reportlab.graphics.barcode.qr import QrCodeWidget 
from reportlab.graphics import renderPDF
# Create the HttpResponse object with the appropriate PDF headers.
response = HttpResponse(mimetype='application/pdf')
response['Content-Disposition'] = 'attachment; filename="somefilename.pdf"'

p = canvas.Canvas(response)

qrw = QrCodeWidget('Helo World!') 
b = qrw.getBounds()

w=b[2]-b[0] 
h=b[3]-b[1] 

d = Drawing(45,45,transform=[45./w,0,0,45./h,0,0]) 
d.add(qrw)

renderPDF.draw(d, p, 1, 1)

p.showPage()
p.save()
return response 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T03:37:27.570

您的代码对我有用，尽管我怀疑这是因为您没有将其封装在视图中？

例如，myapp/views.py

```
from reportlab.pdfgen import canvas
from django.http import HttpResponse
from reportlab.graphics.shapes import Drawing 
from reportlab.graphics.barcode.qr import QrCodeWidget 
from reportlab.graphics import renderPDF

# Create your views here.
def test_qr(request):
    # Create the HttpResponse object with the appropriate PDF headers.
    response = HttpResponse(mimetype='application/pdf')
    response['Content-Disposition'] = 'attachment; filename="somefilename.pdf"'

    p = canvas.Canvas(response)

    qrw = QrCodeWidget('Helo World!') 
    b = qrw.getBounds()

    w=b[2]-b[0] 
    h=b[3]-b[1] 

    d = Drawing(45,45,transform=[45./w,0,0,45./h,0,0]) 
    d.add(qrw)

    renderPDF.draw(d, p, 1, 1)

    p.showPage()
    p.save()
    return response 
```

我的项目/urls.py

```
from django.conf.urls.defaults import patterns, include, url

urlpatterns = patterns('',
    url(r'^$', 'myapp.views.test_qr'),
) 
```

打开我的浏览器说，http:127.0.0.1:8000 提示我下载左下角带有二维码的 pdf。如果你不确定如何使用 Django，我建议阅读[Django Book Online](http://www.djangobook.com/en/2.0/index.html)

# matlab - 是否可以将倍频程类型 BoolMatrix 转换为 Matrix？调用 norm(BoolMatrix) 失败

> ID：13129021
> 
> 赞同：0
> 
> 时间：2012-10-29T20:20:28.537
> 
> 标签：matlab, octave, norm

我正在尝试通过执行 P = P/norm(P) 来规范化大小为 nxm 的布尔矩阵 P。

对 norm() 的调用失败并显示：

xnorm：错误类型参数“布尔矩阵”。octave 似乎有一个特定的类型 BoolMatrix ，其中 P 是一个实例；是否可以将其转换为矩阵，或者以其他方式解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T21:22:17.107

您可以通过将矩阵乘以标识来“转换”矩阵：

```
P = eye(size(P))*P
P = P/norm(P) 
```

我找不到将布尔矩阵转换为另一种类型的任何方法，而且看起来[转换矩阵通常很棘手](http://www.mathworks.com/matlabcentral/answers/16394)。

# iphone - RestKit 一对多逆向关系（无CoreData）

> ID：13129027
> 
> 赞同：9
> 
> 时间：2012-10-29T20:20:53.890
> 
> 标签：iphone, ios, restkit, one-to-many

### 设置

想象一下 Author 和 Book 之间的以下关系：

```
[Author] -- has many --> [Book] 
```

使用 restkit，我有一个 Author 模型和一个 Book 模型，我创建了 Author 和 Book 之间的关系，如下所示：

```
[authorMapping hasMany:@"books" withMapping:booksMapping]; 
```

我现在可以通过作者的属性访问作者的书籍：

```
@property (strong, nonatomic) NSSet *books; 
```

到现在为止还挺好。同样，我想通过它的属性访问一本书的作者：

```
@property (weak, nonatomic) Author *author; 
```

* * *

### 问题

这就是问题开始的地方。为了实现这种反比关系，我添加了以下内容：

```
[booksMapping hasOne:@"author" withMapping:authorMapping]; 
```

这导致每个映射递归地相互调用，直到程序终止。一点都不好。检查文档我发现 hasOne/Many:withMapping: 方法只是调用 mapKeyPath:toRelationShip:withMapping: 所以那里没有真正的替代方案。此外，添加如下映射：

```
[bookMapping mapKeyPath:@"author" toAttribute:@"author"]; 
```

显然，只会创建映射，但不会实际将 Author 对象映射到 Book 的 author 属性。

* * *

### 问题

如何使用 RestKit 而不是 CoreData 在两个或多个模型之间创建反向一对多关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T21:41:47.457

注意：较新版本的 restkit 使用[不同的映射方案](https://github.com/RestKit/RestKit/wiki/Object-mapping)。

注2：我认为在你的例子中你的意思是：

`[booksMapping hasOne:@"author" withMapping: authorMapping];`（不是书籍映射）

这里的问题不是映射，您不应该将相同的映射定义为多对一，这个映射已经完成（在 authorMapping 中定义）。您只需要一个指向父项的指针，而不是重复整个映射过程。
真正的问题是您需要将父对象定义为子对象的属性，就 NSDictionaries 而言，这可能使用[自定义类别](http://funwithobjc.tumblr.com/post/1527111790/defining-custom-key-path-operators)，但 RestKit 不支持将其用于转换对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T20:19:54.820

我的解决方案特定于我的项目，但也可能适用于其他人。我向我的 Author 模型添加了一个`loadBooks`方法，该方法从 api 中获取所有书籍。这里的技巧是遍历所有加载的 Book 对象并将其 Author 属性设置为 self。像这样的东西：

### 作者.m

```
- (void)loadBooksWithCompletionBlock..... {
    ...
    for (Book *book in result) {
        book.author = self;
    }
    ...
} 
```

我不确定我是否对这种方法完全满意，但它适合这种特殊情况的需要。

在写我的问题时我不知道的另一件事是来自 API 的确切响应（哇哦）。事实证明，API 响应中的 Author 对象对其书籍一无所知。另一方面，API 响应中的 Book 对象总是知道其作者。获取作者的所有书籍需要调用类似于，这是我在方法`/api/books/<author_id>`中使用的端点。`loadBooks...`因此，创建我寻求答案的反向一对多关系稍微复杂一些。

### RestKit 更新

应该注意的是，在上述应用程序中，我没有使用最新版本的 RestKit。在应用程序的开发过程中，RestKit 发布了一个重大更新，改变了几件事的完成方式。这个问题指的是 RestKit < 0.2 的版本。

# jsf-2 - 如何从列表创建 Primefaces 单选按钮？

> ID：13129028
> 
> 赞同：1
> 
> 时间：2012-10-29T20:21:01.223
> 
> 标签：jsf-2, primefaces, radio-button

我想从对象列表中创建一组单选按钮`#{item.items3}`并将所选对象存储到`#{cartBean.selectedChoice}`. `<f:selectItems>`现在我并没有真正得到和所需值之间的区别`<ui:repeat>`。我的代码看起来如何。到目前为止有什么明显的错误吗？

```
<p:selectOneRadio id="myRadio" value="#{cartBean.selectedChoice}" layout="custom">
    <f:selectItems value="#{item.items3}"/>
</p:selectOneRadio>

<h:panelGrid columns="1">
    <ui:repeat var="choice" value="#{item.items3}" varStatus="choiceIndex">
        <p:radioButton id="choiceRadio" for=":iterateCategories:iterateItems:lightForm:myRadio" itemIndex="#{choiceIndex.index}" />#{choice.name}
    </ui:repeat>
</h:panelGrid> 
```

目前我收到以下错误：

> 20:58:52,397 INFO [javax.enterprise.resource.webcontainer.jsf.renderkit] (http-localhost-127.0.0.1-8080-1) 警告：FacesMessage(s) 已入队，但可能尚未显示。sourceId=iterateCategories:0:iterateItems:2:lightForm:myRadio[severity=(ERROR 2), summary=(转换错误设置值 'huhu.model.generated.Item@3ae5e1dc' for 'null Converter'.), detail=( 'null Converter'的转换错误设置值'huhu.model.generated.Item@3ae5e1dc'。）]

我不明白，哪里可能存在转换问题，因为只处理同一类的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:07:46.677

JSF 生成 HTML。HTML 基本上是一个大字符串。因此，非字符串类型的 Java 对象需要转换为字符串。如果遇到的类型既没有找到内置转换器（`Number`和`Boolean`）`Enum`也没有`Converter`找到自定义转换器（实现的类），则将使用对象的默认`toString()`实现将复杂的 Java 对象打印到 HTML 输出中。如果您的对象没有覆盖此方法，那么它将是[javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#toString%28%29)`Object#toString()`中描述的默认实现：

> class 的 toString 方法`Object`返回一个字符串，该字符串由对象作为其实例的类的名称、at 符号字符`@`和对象哈希码的无符号十六进制表示形式组成。换句话说，此方法返回一个等于以下值的字符串：
> 
> ```
> getClass().getName() + '@' + Integer.toHexString(hashCode()) 
> ```

在您的特定情况下，生成的 HTML 单选按钮元素变为以下内容：

```
<input type="radio" ... value="huhu.model.generated.Item@3ae5e1dc" /> 
```

*（在浏览器中右键单击页面并选择查看源代码自己查看）*

现在，当提交此表单时，由（返回！）`huhu.model.generated.Item@3ae5e1dc`收集的输入值必须转换回您的自定义类型的具体实例。但是，由于显然没有为自定义类型注册转换器（错误消息已经暗示了这一点：“空转换器”），JSF 无法将其转换回并将抛出此转换器异常。`request.getParameter()``String``Item``Item`

您确实应该提供一个自定义转换器，该转换器可以在`Item`其唯一`String`表示之间正确转换。技术 ID（例如从数据库中自动生成的 PK）经常被用作唯一`String`表示。转换器将如下所示：

```
@FacesConverter(forClass=Item.class)
public class ItemConverter implements Converter {

    @Override
    public void getAsString(FacesContext context, UIComponent component, Object modelValue) throws ConverterException {
        // Write code to convert Item to its unique String representation. E.g.
        return String.valueOf(((Item) modelValue).getId());
    }

    @Override 
    public void getAsObject(FacesContext context, UIComponent component, Object submittedValue) throws ConverterException {
        // Write code to convert unique String representation of Item to concrete Item. E.g.
        return someItemService.find(Long.valueOf(submittedValue));
    }

} 
```

或者，您可以使用[`SelectItemsConverter`](http://omnifaces.org/docs/javadoc/current/org/omnifaces/converter/SelectItemsConverter.html)JSF 实用程序库[OmniFaces](http://omnifaces.org)，以便转换器将改为使用`<f:selectItem(s)>`作为转换基础。这样您就不需要为您想在`<f:selectItem(s)>`. [另请`SelectItemsConverter`](http://showcase.omnifaces.org/converters/SelectItemsConverter)参阅[展示页面](http://showcase.omnifaces.org/converters/SelectItemsConverter)：

```
<p:selectOneRadio ... converter="omnifaces.SelectItemsConverter"> 
```

# java - 是什么导致 Java 7 中的 G1 垃圾收集器中止其并发标记阶段？

> ID：13129030
> 
> 赞同：14
> 
> 时间：2012-10-29T20:21:20.850
> 
> 标签：java, garbage-collection, g1gc

我注意到在我的应用程序中使用 G1 垃圾收集器偶尔会出现完整的 GC，并试图找出它们发生的原因。

从一个区域扫描开始到下一个区域的循环摘录如下。在 61807.406，记录了一个完整的 GC，然后是一个并发标记中止的条目。我想知道的是为什么 GC 觉得有必要进行一次完整的、停止世界的垃圾收集以及如何避免它。

请注意，[这个问题](http://mail.openjdk.java.net/pipermail/hotspot-gc-use/2011-September/000917.html)之前似乎已经在 OpenJDK 邮件列表中提出过，但没有任何回复。

为简洁起见，我已经修剪了年轻 GC 的细节，但如果需要，我可以在某处发布完整的块。

```
61805.878: [GC concurrent-root-region-scan-start]
61805.882: [GC concurrent-root-region-scan-end, 0.0033586]
61805.882: [GC concurrent-mark-start]
61806.133: [GC pause (young), 0.02836202 secs]
   [Eden: 498M(498M)->0B(478M) Survivors: 14M->34M Heap: 3025M(4096M)->2548M(4096M)]
 [Times: user=0.19 sys=0.00, real=0.03 secs] 
61806.426: [GC pause (young), 0.02766222 secs]
   [Eden: 478M(478M)->0B(480M) Survivors: 34M->32M Heap: 3050M(4096M)->2576M(4096M)]
 [Times: user=0.19 sys=0.00, real=0.03 secs] 
61806.717: [GC pause (young), 0.02214895 secs]
   [Eden: 480M(480M)->0B(502M) Survivors: 32M->10M Heap: 3056M(4096M)->2571M(4096M)]
 [Times: user=0.09 sys=0.00, real=0.02 secs] 
61807.000: [GC pause (young), 0.01899188 secs]
   [Eden: 502M(502M)->0B(502M) Survivors: 10M->10M Heap: 3074M(4096M)->2573M(4096M)]
 [Times: user=0.09 sys=0.00, real=0.02 secs] 
61807.201: [GC pause (young), 0.02619259 secs]
   [Eden: 162M(502M)->0B(500M) Survivors: 10M->12M Heap: 3036M(4096M)->2876M(4096M)]
 [Times: user=0.11 sys=0.00, real=0.03 secs] 
61807.283: [GC pause (young), 0.02068515 secs]
   [Eden: 102M(500M)->0B(500M) Survivors: 12M->12M Heap: 3058M(4096M)->2957M(4096M)]
 [Times: user=0.09 sys=0.00, real=0.02 secs] 
61807.350: [GC pause (young), 0.01606520 secs]
   [Eden: 52M(500M)->0B(498M) Survivors: 12M->14M Heap: 3020M(4096M)->2969M(4096M)]
 [Times: user=0.11 sys=0.00, real=0.02 secs] 
61807.389: [GC pause (young), 0.01573865 secs]
   [Eden: 42M(498M)->0B(500M) Survivors: 14M->12M Heap: 3021M(4096M)->2978M(4096M)]
 [Times: user=0.09 sys=0.00, real=0.02 secs] 
61807.406: [Full GC 2978M->2498M(4096M), 4.8896638 secs]
 [Times: user=6.37 sys=0.08, real=4.89 secs] 
61812.296: [GC concurrent-mark-abort]
61812.542: [GC pause (young), 0.01526403 secs]
   [Eden: 512M(500M)->0B(510M) Survivors: 0B->2048K Heap: 3018M(4096M)->2506M(4096M)]
 [Times: user=0.09 sys=0.00, real=0.02 secs] 
61812.793: [GC pause (young) (initial-mark), 0.01391544 secs]
   [Eden: 510M(510M)->0B(508M) Survivors: 2048K->4096K Heap: 3016M(4096M)->2508M(4096M)]
 [Times: user=0.09 sys=0.00, real=0.01 secs] 
61812.807: [GC concurrent-root-region-scan-start] 
```

这是使用 Java Hotspot 1.7.0_7 版本，具有以下有趣的设置：

```
-XX:PermSize=128m
-XX:MaxPermSize=128m
-XX:NewSize=512m
-XX:MaxNewSize=512m
-Xms4096m
-Xmx4096m
-XX:+UnlockDiagnosticVMOptions
-XX:+UnsyncloadClass
-XX:+UseTLAB
-XX:+UseG1GC
-XX:SurvivorRatio=10
-Xloggc:./workspace/gc.log
-verbose:gc
-XX:+PrintGC
-XX:+PrintGCTimeStamps
-XX:+PrintGCDetails 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T03:06:52.293

我想你知道[这个参考](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)。[这个页面](http://www.javabeat.net/2010/08/g1-garbage-collector-in-java-7-0/)也很有用。

当老对象——那些在短暂（年轻）代中幸存下来的对象——填满为它们分配的空间时，就会发生完全 GC。当发生完整的 GC 时，必须中止正在进行的任何临时标记。

降低年老代填满的速度需要增加更多的堆/RAM，或者摆弄年老空间和年轻空间之间的可用内存划分。参数`NewSize`,`MaxNewSize`和`NewRatio`用于后者。实验是找到可行方法的唯一方法。

普遍的看法是，改变比例以使终身代更大会减少完整收集的数量。在许多情况下，这是真的，但并非总是如此。有一种情况是，许多终身对象在他们获得终身职位后不久就会死亡。也就是说，他们本应该被收集在年轻区，但他们的生命结束得有点晚了。在这种情况下，使年轻代更大允许这些对象被收集在那里而不是被永久保存。这种情况的一个症状是完全收集导致分配的空间大幅减少。

这似乎不是你的情况：`2978M->2498M`。您唯一的出路可能是使堆更大，根据需要购买更多内存。尽管如此，几乎所有长时间运行的系统都会偶尔收集完整的数据。

# c++ - 关于根据移动分配和移动构造函数实现 std::swap

> ID：13129031
> 
> 赞同：13
> 
> 时间：2012-10-29T20:21:28.013
> 
> 标签：c++, stl, c++11, move-semantics

这是一个可能的定义`std::swap`：

```
template<class T>
void swap(T& a, T& b) {
  T tmp(std::move(a));
  a = std::move(b);
  b = std::move(tmp);
} 
```

我相信

1.  `std::swap(v,v)`保证没有任何影响，并且
2.  `std::swap`可以如上实现。

在我看来，以下引用似乎暗示这些信念是矛盾的。

**17.6.4.9 函数参数 [res.on.arguments]**

> 1 除非另有明确说明，否则以下各项均适用于 C++ 标准库中定义的函数的所有参数。
> 
> ...
> 
> *   如果函数参数绑定到右值引用参数，则实现可能假定此参数是对该参数的唯一引用。[ 注意：如果参数是 T&& 形式的泛型参数并且绑定了类型 A 的左值，则参数绑定到左值引用 (14.8.2.1)，因此上一句未涵盖。— end note ] [ 注意：如果程序将左值转换为 xvalue，同时将该左值传递给库函数（例如，通过使用参数 move(x) 调用函数），则程序实际上是在要求该函数处理该左值作为临时。如果参数是左值，则该实现可以免费优化别名检查，这可能需要。——尾注]

（感谢[Howard Hinnant](https://stackoverflow.com/users/576911/howard-hinnant)提供[报价](https://stackoverflow.com/questions/13127455/what-does-the-standard-library-guarantee-about-self-move-assignment)）

让`v`成为从标准模板库中获取的某种可移动类型的对象并考虑调用`std::swap(v, v)`。在上面的行中， that`a = std::move(b);`内部就是这种情况，因此参数**不是**唯一的引用。这违反了上述要求，因此该行在调用时调用未定义的行为 from 。`T::operator=(T&& t)``this == &b`**`a = std::move(b)``std::swap(v, v)`**

 **这里的解释是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T20:50:54.910

[res.on.arguments] 是关于客户端应该如何使用 std::lib 的声明。当客户端向 std::lib 函数发送一个 xvalue 时，客户端必须愿意假装 xvalue 真的是一个纯右值，并期望 std::lib 能够利用这一点。

但是，当客户端调用 std::swap(x, x) 时，客户端不会将 xvalue 发送到 std::lib 函数。它是这样做的实现。因此，责任在于实现 std::swap(x, x) 工作。

话虽如此，std 已经给了实现者一个保证： X 应该满足`MoveAssignable`. 即使处于移出状态，客户端也必须确保 X 是 MoveAssignable。此外， 的实现`std::swap`并不真正关心自移动赋值的作用，只要它不是 XIe 的未定义行为，只要它不崩溃。

```
a = std::move(b); 
```

当 &a == &b 时，这个赋值的源和目标都有一个未指定（移出）的值。这可以是空操作，也可以做其他事情。只要它不崩溃，std::swap 就会正常工作。这是因为在下一行：

```
b = std::move(tmp); 
```

从上一行输入的任何值都`a`将被赋予一个新值 from `tmp`。并且`tmp`具有 的原值`a`。所以除了烧掉很多cpu周期之外，`swap(a, a)`是一个空操作。

**更新**

最新的[工作草案 N4618](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/n4618.pdf)已被修改为在要求中明确说明`MoveAssignable`：

```
t = rv 
```

（其中`rv`是一个右值），如果并且不引用同一个对象，则只需是赋值之前`t`的等效值。无论如何，分配后的状态是未指定的。有一个附加说明需要进一步说明：`rv``t``rv``rv`

> `rv`必须仍然满足使用它的库组件的要求，无论是否引用同一个对象`t`。`rv`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T20:39:10.540

Then the expression `a = std::move(b);` gets executed, the object is already empty, in a state where only destruction is well defined. That will effectively be a no-op, as the object on the left and right hand sides is already empty. The state of the object after the move is still unknown but destructible. The next statement moves the contents back from `tmp` and that sets the object back to a known state.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-16T00:37:10.850

我同意你的分析，事实上 libstdc++ 调试模式有一个断言会在标准容器的自交换时触发：

```
#include <vector>
#include <utility>

struct S {
  std::vector<int> v;
};

int main()
{
  S s;
  std::swap(s, s);
} 
```

需要包装器类型`S`，因为交换向量直接使用调用的特化`vector::swap()`，因此不使用泛型`std::swap`，而是`S`使用泛型，并且当编译为 C++11 时，这将导致向量成员，它将中止：

```
/home/toor/gcc/4.8.2/include/c++/4.8.2/debug/vector:159:error: PST.

Objects involved in the operation:
sequence "this" @ 0x0x7fffe8fecc00 {
  type = NSt7__debug6vectorIiSaIiEEE;
}
Aborted (core dumped) 
```

（我不知道“PST”应该是什么意思！我认为我测试它的安装有问题。）

我相信 GCC 的行为是符合标准的，因为标准说实现可以假设自移动分配永远不会发生，因此断言在有效程序中永远不会失败。

但是，我同意霍华德的观点，即这需要工作（并且可以在没有太多麻烦的情况下工作 - 对于 libstdc++，我们只需要删除调试模式断言！），因此我们需要修复标准以对自移动，或至少自交换。一段时间以来，我一直承诺写一篇关于这个问题的论文，但还没有这样做。

我相信，自从在这里写下他的答案后，霍华德现在同意标准中的当前措辞存在问题，我们需要修复它以禁止 libstdc++ 做出失败的断言。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T20:35:10.373

我认为这不是一个有效的定义，`std::swap`因为`std::swap`被定义为采用左值引用，而不是右值引用（20.2.2 [utility.swap]）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-05T11:54:34.643

我的理解是直到最近才考虑到这个问题，因此 C++20 标准中的现有措辞并没有真正解决这个问题。

C++23 工作草案 N4885 包括[图书馆工作组第 2839 期决议](https://wg21.link/lwg2839)，位于`[lib.types.movedfrom]/2`：

> C++ 标准库中定义的类型的对象可以移动分配（11.4.6 [class.copy.assign]）给它自己。除非另有说明，否则此类分配会将对象置于有效但未指定的状态。

这使得`std::swap`标准库类型完全有效。**

# ios - 导入大型数据集时的核心数据内存使用情况

> ID：13129035
> 
> 赞同：8
> 
> 时间：2012-10-29T20:21:34.570
> 
> 标签：ios, core-data, memory

我现在被一个令人讨厌的核心数据问题困住了大约两个星期。我阅读了很多博文、文章和 SO 问题/答案，但我仍然无法解决我的问题。

我进行了很多测试，并且能够将较大的问题减少到较小的问题。这将是一个很大的解释，所以请继续关注我！

## 问题 - 数据模型

我必须得到以下**数据模型**：

对象 A 与对象 B 具有一对多关系，而对象 B 与对象 C 具有另一个一对多关系。由于 Core Data 的建议，我必须创建反向关系，因此 B 的每个实例都指向其父 A 并且对于C 指向它的父 B。

```
A <->> B <->> C 
```

## 问题 - MOC 设置

为了保持响应顺畅，我创建了一个三级 managedObjectContext 结构。

1.  Parent MOC - 在它自己的私有线程上运行，使用`NSPrivateQueueConcurrencyType`紧`persistentStoreCoordinator`
2.  MainQueue MOC - 使用`NSMainQueueConcurrencyType`并具有父 MOC 1在 mainThread 上运行
3.  对于每个解析操作，我创建了第三个 MOC，它也有它的私有队列和父 mainQueue MOC

我的主数据控制器作为观察者添加到 MOC 2 的`NSManagedObjectContextDidSave`通知中，因此每次 MOC 2`performBlock:`在 MOC1 上保存时都会触发执行保存操作（因为异步`performBlock:`）。

## 问题 - 解析

为了将大型 JSON 文件解析为我的核心数据结构，我编写了一个循环解析器。这个解析器首先创建一个新的 MOC (3)。然后它获取对象 A 的数据并解析其属性。然后解析器读取 B 的 JSON 关系并创建相应的填充数据的对象。这些新对象通过调用 A 添加到`addBObject:`A。因为解析器是循环的，解析 B 意味着解析 C，并且这里也创建了新对象并将其附加到 B。这一切都发生在`performBlock:`MOC 3 中。

*   解析（创建“A”对象并开始解析 B）
    *   解析 A（创建“B”对象，将它们附加到 A 并开始解析 C）
        *   解析 B（创建“C”对象，将它们附加到 B）
            *   解析 C（仅将数据存储在 C 对象中）

在每次解析操作之后，我保存 MOC 3 并在 mainThread 上调度主 MOC (2) 的保存操作。由于`NSManagedObjectContextDidSave`通知 MOC 1 将异步自动保存。

```
 if (parsed){
            NSError *error = nil;
            if (![managedObjectContext save:&error])
                NSLog(@"Error while saving parsed data: %@", error);
        }else{
            // something went wrong, discard changes
            [managedObjectContext reset];
        }

        dispatch_async(dispatch_get_main_queue(), ^{                
            // save mainQueueManagedObjectContext
            [[HWOverallDataController sharedOverallDataController] saveMainThreadManagedObjectContext];
        }); 
```

为了释放我的内存占用，并且因为我现在不需要解析数据，我正在执行：

```
[a.managedObjectContext refreshObject:a mergeChanges:NO]; 
```

对于刚刚解析的每个 AI。

因为我需要解析大约 10 个 A，它们都有大约 10 个 B，它们大约有 10 个 C，所以会生成很多 managedObject。

## 问题 - 仪器

一切正常。唯一的事情是：当我打开分配工具时，我看到未发布的 A、B 和 C。我没有从他们的 retainCounts 或任何其他信息中获得任何有用的信息。而且由于我的实际问题涉及更复杂的数据模型，因此活动对象成为严重的内存问题。有人能弄清楚我做错了什么吗？使用正确的 managedObject 在其他 managedObjectContexts 上调用 refreshObjects 也不起作用。似乎只有一个困难`reset`的工作，但后来我失去了指向 UI 使用的活对象的指针。

## 我尝试过的其他解决方案

*   我尝试创建单向关系而不是双向关系。这会产生许多其他问题，导致 Core Data 不一致和奇怪的行为（例如悬空对象和 Core Data 生成 1-n 关系而不是 nn 关系（因为反向关系未知）。

*   当我检索`NSManagedObjectContextDidSave`任何对象的通知时，我尝试刷新每个更改或插入的对象

这两种“解决方案”（顺便说一句都行不通）似乎也有点老套。这不应该是要走的路。但是，应该有一种方法可以在不增加内存占用并保持 UI 流畅的情况下使其工作？

## - 代码演示

[http://cl.ly/133p073h2I0j](http://cl.ly/133p073h2I0j)

## - 进一步的调查

在 mainContext 中（在 mainSave 之后）刷新每个曾经使用过的对象（这是一项繁琐的工作）后，对象的大小会减少到 48 个字节。这表明对象全部出错，但内存中仍有一个指针。当我们有大约 40.000 个对象都出现故障时，内存中仍然有 1.920 MB 的内存在persistentManagedObjectContext 重置之前永远不会释放。这是我们不想做的事情，因为我们失去了对任何 managedObject 的每个引用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T13:10:44.690

罗宾，

我有一个类似的问题，我解决的方式与你不同。在您的情况下，您有第三个，IMO，冗余 MOC，父 MOC。在我的例子中，我让两个 MOC 以老式的方式通过 DidSave 通知通过持久存储协调器进行通信。新的面向块的 API 使这更加简单和健壮。这让我可以重置子 MOC。虽然您从第三个 MOC 获得了性能优势，但与我利用的 SQLite 行缓存相比，它的优势并不大。您的路径会消耗更多内存。最后，通过跟踪 DidSave 通知，我可以在创建项目时对其进行修剪。

顺便说一句，您也可能会遭受您`MALLOC_TINY`和`MALLOC_SMALL`VM 区域大小的大幅增加。我的尾随修剪算法让分配器更快地重用空间，从而延缓这些问题区域的增长。根据我的经验，这些区域由于它们的大量驻留内存占用，是我的应用程序 Retweever 被杀死的主要原因。我怀疑您的应用程序也遭受了同样的命运。

当内存警告出现时，我调用以下代码段：

```
[self.backgroundMOC performBlock: ^{ [self.backgroundMOC reset]; }];

[self.moc save];

[self.moc.registeredObjects trimObjects]; 
```

`-[NSArray(DDGArray) trimObjects]`只是通过一个数组并刷新对象，从而修剪它们。

总之，Core Data 似乎为许多 MOC 中出现的项目实现了写入时复制算法。因此，您以意想不到的方式保留了一些东西。我专注于在导入后断开这些连接以最小化我的内存占用。由于 SQLite 行缓存，我的系统似乎表现得可以接受。

安德鲁

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T08:41:11.513

对于`NSManagedObjectContext`您为特定目的而保留的每一个，您都将积累`NSManagedObject`

A`NSManagedObjectContext`只是一张便条纸，您可以随意实例化并保存，如果您希望保留更改，`NSPersistentStore`然后再丢弃。

对于解析操作（第 3 层），尝试为 op 创建一个 MOC，进行解析，保存 MOC，然后将其丢弃。

感觉就像你至少有一层 MOC 被太多的强引用所持有。

基本上问每个 MOC 的问题。“为什么要保持这个对象及其相关的孩子活着”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T10:31:27.150

我有一个非常相似的导入助手。

看看下面的代码，看看它是否对你有帮助

```
__block NSUInteger i = 0;
NSArray *jsonArray = ...
for (NSDictionary *dataStucture in jsonArray)
{
    [managedObjectContext performBlock:^{
        @autoreleasepool {
            i++;
            A *a = (A*)[self newManagedObjectOfType:@"A" inManagedObjectContext:managedObjectContext];
            [self parseData:[dataStucture objectForKey:@"a"]
                 intoObject:a
     inManagedObjectContext:managedObjectContext];

            [managedObjectContext refreshObject:a
                                   mergeChanges:YES];
            if (i > 20) // Arbitrary number here
            {
                NSError *error = nil;
                [managedObjectContext save:&error];
                [managedObjectContext reset];
            }

            [managedObjectContext refreshObject:a
                                   mergeChanges:YES];

        }
        dispatch_async(dispatch_get_main_queue(), ^{
            [self saveMainThreadManagedObjectContext];

            NSLog(@"DONE");
            // parsing is done, now you see that there are still
            // A's, B's and C's left in memory.
            // Every managedObjectContext is saved and no references are kept
            // to any A, B and C so they should be released. This is not true,
            // so a managedObjectContext is keeping a strong reference to these
            // objects.
        });
    }];
} 
```

# datetime - Mobiscroll jQuery Plugin 的方法 setDate() 丢失格式

> ID：13129038
> 
> 赞同：0
> 
> 时间：2012-10-29T20:21:44.997
> 
> 标签：datetime, mobiscroll, preset

setDate() 有效，但丢失了先前设置的格式。

```
var initialDate = new Date(1984,11,19);
$('#mydate').scroller({
    preset: 'date',
    dateFormat:'dd/mm/yy'        
});
$('#mydate').scroller('setDate', initialDate, true); 
```

这是为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:56:39.193

不需要像这样调用 setdate 。如果您只是直接在输入值上传递日期，它会很好地工作

# android - 使用本机库时的Android UnsatisfiedLinkError

> ID：13129041
> 
> 赞同：1
> 
> 时间：2012-10-29T20:21:54.110
> 
> 标签：android, java-native-interface, unsatisfiedlinkerror

我已经坚持了好几个星期了。

我一直在 Android Torrent 客户端中使用 libtorrent。最近，我想添加新功能，例如磁力链接。

所有本机函数都在 中声明`PROJECT_FOLDER/jni/libtorrent.h`和实现`PROJECT_FOLDER/jni/libtorrent.cpp`。

到目前为止，没有任何问题，但最近，我在以下位置添加了这个新功能`libtorrent.h`：

```
JNIEXPORT jstring JNICALL Java_com_my_package_LibTorrent_MagnetToTorrent
(JNIEnv *env, jobject obj, jstring MagnetLink, jstring TorrentFolder); 
```

我添加了它的实现`libtorrent.cpp`

```
JNIEXPORT jstring JNICALL Java_com_my_package_LibTorrent_MagnetToTorrent
(JNIEnv *env, jobject obj, jstring MagnetLink, jstring TorrentFolder) {
        //function code here
} 
```

我运行`ndk-build`了代码，它编译了。

在`com.my.package.LibTorrent`课堂上，我添加了以下声明，就像我之前声明其他本地方法一样，效果很好：

```
public native String MagnetToTorrent(String MagnetLink, String TorrentFolder); 
```

但是每当我调用它时，我都会得到`UnsatisfiedLinkError: MagnetToTorrent`. 这真的很奇怪，因为我之前添加了原生函数，而且它们运行良好。

很感谢任何形式的帮助。谢谢你。

**编辑：**所有声明的函数`libtorrent.h`都被这样包围`extern "C" {}`：

```
#ifdef __cplusplus
extern "C" {
#endif
/*Function declarations*/
#ifdef __cplusplus
}
#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:13:17.500

我看到的唯一原因是您的本机库没有该符号。自上次库更改（您声称对您有用）以来，您是否偶然更改了构建路径和/或构建的其他方面？“较新”的库不是在您的 Java 构建不知道的其他地方构建的吗？找到您的库文件 (.so?) 并检查它是否有导出的符号（dumpbin、objdump、nm，因平台而异）。确保它确实是您的 Java 构建正在加载的一个库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T20:49:46.433

你有什么机会忘记了`extern "C"`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:55:35.010

我终于弄清楚出了什么问题。我不得不将此行添加到`jni/Application.mk`：

```
APP_ABI := armeabi armeabi-v7a 
```

这导致也为 ARMv7 处理器构建本机代码，这就是我在新手机上拥有的。

所有其他答案也应该对其他有类似问题的开发人员有用。我为他们每个人都标记了+1。对于可能导致应用程序抛出的其他问题`UnsatisfiedLinkError`，此链接可能会有所帮助：http: [//developer.android.com/guide/practices/jni.html#faq_ULE](http://developer.android.com/guide/practices/jni.html#faq_ULE)

# java - 向右移动数组 - 作业

> ID：13129043
> 
> 赞同：5
> 
> 时间：2012-10-29T20:22:02.497
> 
> 标签：java, arrays

这是我到目前为止所拥有的，但是当我运行它时，我得到一个 Java 不匹配错误。这是我的数组：

```
char[] letters = {'A', 'B' , 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J'};

/********************************************************************************
    shiftRight() will move the contents of the array one slot to the right
********************************************************************************/
public static void shiftRight( char [] letters )
{
    char last = letters[letters.length-1];          // save off first element

    // shift right
    for( int index =letters.length-1; index >= 0 ; index-- )
        letters[index+1] = letters [index];

    // wrap last element into first slot
    letters[0] = last;
    System.out.print("\nshifted Array: " );
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-29T20:27:32.400

您可以执行以下操作：

```
 public static void shiftRight( char [] letters )
    {

        char last = letters[letters.length-1];          // save off first element

        // shift right
        for( int index =letters.length-2; index >= 0 ; index-- )
            letters[index+1] = letters [index];

        // wrap last element into first slot
        letters[0] = last;
        System.out.print("\nshifted Array: " + Arrays.toString(letters) );

    } 
```

我只修改了你的：`letters.length-1`并`letters.length-2`打印了数组。

另一种更简单的方法是使用，`System.arraycopy`例如：

```
last = letters[letters.length-1];
System.arraycopy(letters, 0, letters, 1, letters.length-1 );
letters[0] = last; 
```

要打印数组，您还可以使用：

```
System.out.print("{");
for (int i=0;i<letters.length-1;i++)
    System.out.print("'"+letters[i]+",");
System.out.println("'"+letters[letters.length-1]+"'}"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T20:24:57.740

当`letters[index+1]`在 for 循环中第一次执行时（when `index = letters.length-1`），它指向`letters[letters.length]`的不是一个有效的索引，因为索引从`0`到`length-1`。

更新您的 for 循环以开始`index`并`letters.length-2`确保您的`array.length>1`. 也就是说：

```
 if(letters.length > 1){ //make sure array has minimum two elements
      // shift right
      for( int index = letters.length-2; index >= 0 ; index-- ){
          letters[index+1] = letters [index];
      }
   } 
```

最后，您可以将数组打印为：

```
 System.out.println("Shifted Array: " +letters); 
```

**编辑：**示例工作代码。

如果您将数组设置为`Character`数组，例如下面的数组`main`（仅用于帮助打印）

```
 Character[] letters = {'A', 'B' , 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J'}; 
```

然后将其传递给`shiftRight`具有更新代码的方法，如下所示：

```
 public static void shiftRight( Character [] letters )
  {
    Character last = letters[letters.length-1];  
    if(letters.length >1){ //make sure array has minimum two elements
        // shift right
        for( int index =letters.length-2; index >= 0 ; index-- ){
            letters[index+1] = letters [index];
        }
     }
    letters[0] = last;
    System.out.println(Arrays.toString(letters));
    //^ prints: Shifted Array: [J, A, B, C, D, E, F, G, H, I]
  } 
```

你应该准备好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T20:24:52.183

添加

```
 if(index<letters.length-1)  condition 
```

在你的 for 循环之前

```
 letters[index+1] = letters [index] 
```

如果您不检查`if(index<letters.length-1)`条件，您将在此处的最后一个索引处获得 ArrayIndexOutOfBounds 异常`letters[index+1] = letters [index]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T20:50:44.377

`ArrayIndexOutOfBoundsException`实际上，只要您想阅读（在循环内），您就会获得：

```
letters[index+1] 
```

原因是您的`index`变量初始化：`index = letters.length-1`

所以`letters[index+1] == letters[letters.length]` 但逻辑上`letters.length`导致 `ArrayIndexOutOfBoundsException`.

在不更改逻辑的情况下更正代码的简单方法：

```
for(int index = letters.length-1; index > 0 ; index--)
   letters[index] = letters [index-1]; 
```

注意操作符符号`>`而不是`>=`。否则，这也会导致相同的`Exception`.

此外，为了显示最终数组，请使用：`Arrays.toString(letters)`

我什至写了我的解决方案来保持你的逻辑：

```
public static void main(String[] args) {
    char[] letters = {'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J'};
    printShiftedLetters(shiftElementsToRight(letters));
}

public static char[] shiftElementsToRight(char[] array) {
    if (array == null) {
        throw new NullPointerException("array must not be null");
    }
    if(array.length <= 1){
        return array;
    }
    char[] shiftedArray = new char[array.length];
    char lastElement = array[array.length - 1];
    for (int i = array.length - 1; i > 0; i--) {
        shiftedArray[i] = array[i - 1];
    }
    shiftedArray[0] = lastElement;
    return shiftedArray;
}

private static void printShiftedLetters(char[] shiftedLetters) {
    System.out.println(Arrays.toString(shiftedLetters));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-05T14:44:38.827

以下解决方案对我有用。

```
 public void rightShiftArray(int[] arr, int n){
        int[] output=new int[arr.length];
        for (int i = 0; i < arr.length; i++) {
            int newLocation = (i+(arr.length+n))%arr.length;
            output[newLocation] = arr[i];
        }
        for (int i = 0; i < output.length; i++) {
            System.out.print(output[i]+",");
        }
    } 
```

arr -> 要移动的数组 n -> 将元素移动多少位置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-08T09:05:29.297

## 对于整数值

您可以对整数值执行类似的操作：

```
public static void main(String[] args) {
    int arr[] = {1,2,3,4,5};
    arrayReorder(arr,25);
}

private static void arrayReorder(int[] arr, int repeat) {
    int count = 0;
    int length = arr.length;
    int end = 0;
    int traversedArray[] = new int[length];

    while (count < repeat) {
        end = arr[length-1];
        for (int i = 1; i < length; i++) {
            traversedArray[i] = arr[i-1];
            traversedArray[0] = end;
        }
        System.out.println();
        for (int a : traversedArray) {
            System.out.print(a + " -> ");
        }
        arr = traversedArray.clone();
        count++;
    }
} 
```

# php - 在 kohana 3.3 中将默认组设置为缓存

> ID：13129045
> 
> 赞同：2
> 
> 时间：2012-10-29T20:22:04.447
> 
> 标签：php, caching, kohana

将 Kohana 框架从 3.2 升级到 3.3 后，缓存要求我为其添加一个默认组。

**配置/缓存.php**

```
return array(
     'default' => array(                    // Driver group
         'driver'         => 'apc',         // using APC driver
         'default_expire' => 3600,          // life time
      ),
); 
```

以前，我曾经在没有组名的情况下这样做：

```
Cache::instance()->set('key', 'val'); 
```

现在，这会发送一个异常：无法加载 Kohana 缓存组：文件。

但是，当我设置名称组时，一切都完美了。

```
Cache::instance('default')->set('key', 'val'); 
```

我现在如何在 3.3 中设置一个默认组，而不总是输入我想使用的任何内容？也许是一个新的升级，但是，我检查了 kohana 3.3 的新功能，我没有看到任何这些。

希望您能够帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T20:33:40.437

好吧，这就是交易。如果没有提供缓存组，则默认为文件。所以，如果你 - 敢 - 改变这一点，请做我的客人。但只需将静态实例设置为`bootstrap.php`，在底部回答。

-- 这是来自基本缓存类。--

```
public static $default = 'file';

public static function instance($group = NULL)
{
    // If there is no group supplied
    if ($group === NULL)
    {
        // Use the default setting
        $group = Cache::$default;
    } 
```

因此，在您的`bootstrap.php`设置中，尽管我会在您的配置中将其命名为 APC：

```
Cache::$default = 'default'; 
```

# java - Soundcloud JAVA api 包装器：SSLPeerUnverifiedException

> ID：13129046
> 
> 赞同：0
> 
> 时间：2012-10-29T20:22:17.087
> 
> 标签：java, ssl, soundcloud

为 API 使用 soundcloud JAVA 包装器时，

```
ApiWrapper wrapper = new ApiWrapper("id","secret", null, null, Env.SANDBOX);
try {
    wrapper.login("user", "pw"); // fail here
} catch (IOException e) {
    e.printStackTrace();
} 
```

我收到以下 SSL 异常错误：

```
SSLPeerUnverifiedException 
```

完整的异常详细信息：

```
javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated
at com.sun.net.ssl.internal.ssl.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:352)
at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:128)
at org.apache.http.conn.ssl.SSLSocketFactory.createSocket(SSLSocketFactory.java:399)
at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:143)
at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:149)
at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:108)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:415)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:641)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:597)
at com.soundcloud.api.ApiWrapper.safeExecute(ApiWrapper.java:550)
at com.soundcloud.api.ApiWrapper.requestToken(ApiWrapper.java:266)
at com.soundcloud.api.ApiWrapper.login(ApiWrapper.java:143)
at de.voidplus.soundcloud.Sketch.setup(Sketch.java:23)
at processing.core.PApplet.handleDraw(PApplet.java:2103)
at processing.core.PGraphicsJava2D.requestDraw(PGraphicsJava2D.java:190)
at processing.core.PApplet.run(PApplet.java:2006)
at java.lang.Thread.run(Thread.java:680) 
```

我使用了`java-api-wrapper-1.1.2-all.jar`所有依赖项。我用 Java 1.6 编译它。我也在使用[处理](http://www.processing.org)核心库，但这应该不是问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T11:19:22.840

Have you tried using Env.LIVE?

Env.Live is using [http://sandbox-soundcloud.com](http://sandbox-soundcloud.com) instead of the main-site.

just one thought.

Have you already looked at this one: [Soundcloud JAVA api wrapper : SSLException](https://stackoverflow.com/questions/13093412/soundcloud-java-api-wrapper-sslexception)?

# c# - 时间：2019-04-01 标签：c#linqXdocument

> ID：13129048
> 
> 赞同：-1
> 
> 时间：2012-10-29T20:22:31.923
> 
> 标签：c#, xml, linq

我这样调用 wcf 服务：

```
XDocument xdoc = null;
xdoc = XDocument.Load("http:\\www.mydomain.com\service\helloservice"); 
```

我从 WCF 收到一个 xml 片段，如下所示：

```
<ArrayOfstring><string>hello</string><string>world</string><string>!</string></ArrayOfstring> 
```

我正在尝试获取元素中的内容

我的代码是这样的，但我从来没有得到任何回报：

```
 var i = (from n in xdoc.Descendants("string")
                 select new { text =  n.Value}); 
```

当我做 xdoc.DescendantNodes() 我得到：

```
[0] "<ArrayOfstring xmlns="http://schemas.microsoft.com/2003/10/Serialization/Arrays" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
  <string>HELLO</string>
</ArrayOfstring>"

[1] "<string xmlns="http://schemas.microsoft.com/2003/10/Serialization/Arrays">HELLO</string>"

[2] "Hello" 
```

我对此很陌生，我不知道为什么 linq 不会返回结果...我应该使用哪个 Xdocument 功能？一些指针将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:33:24.807

**更新**

```
using System;
using System.Linq;
using System.Xml.Linq;

namespace ConsoleApplication1
{
    class Porgram
    {
        static void Main(string[] args)
        {
            string xml = "<ArrayOfstring  xmlns=\"http://schemas.microsoft.com/2003/10/Serialization/Arrays\" xmlns:i=\"http://www.w3.org/2001/XMLSchema-instance\"><string>hello</string><string>world</string><string>!</string></ArrayOfstring>";
            XDocument doc = XDocument.Parse(xml);

            XNamespace ns = "http://schemas.microsoft.com/2003/10/Serialization/Arrays";

            var text = from str in doc.Root.Elements(ns + "string")
                    select str.Value;
            foreach (string str in text)
            {
                Console.WriteLine(str);
            }
            Console.ReadKey();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T20:40:58.323

try this, you need to cast it to expected type to get value

```
 var i = from n in xdoc.Descendants("ArrayOfstring")
                select new { text = (string)n.Element("string")}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T20:27:34.963

我确实编译了代码，一切似乎都很好。您刚刚错过的一件小事是 Xml 文档中的斜杠字符。最后一个字符串标签没有关闭，它会导致异常。

```
<ArrayOfstring><string>hello</string><string>world</string><string>!</string></ArrayOfstring> 
```

干杯

# java - 如何使用 IZPack 进行简单操作

> ID：13129051
> 
> 赞同：2
> 
> 时间：2012-10-29T20:22:46.373
> 
> 标签：java, izpack

我使用 izpack-maven-plugin 进行安装。由于我们在新版本中更改了很多东西，我希望添加这些简单的任务。

- 复制文件（不是从临时目录到安装目录，而是从安装目录到客户的备份文件夹） - 删除文件（删除安装目录中不再需要的文件，以保持客户安装干净）

我搜索并尝试了几件事，似乎没有任何效果。看起来我无法在 install.xml 中“开箱即用”执行这些操作所以我尝试使用 processPanel 执行 .sh (Unix) 或 .bat(Windows) 来完成这些任务。不幸的是，当 IzPack 复制这些文件时，它们没有可执行权限，因此安装崩溃并出现“Permission Denied”错误。

我没有办法解决我的问题。非常感谢您的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T17:20:20.853

您需要在包定义中使用可执行标签将文件标记为可执行文件：

```
<packs>
  <pack ...>
    <executable targetfile="$INSTALL_PATH/bin/startup.sh"
      keep="true" stage="never" />
    ... 
```

`The Packs Element <packs>`请参阅章节下的 izpack 文档`<executable> - mark file executable or execute it.`

# php - Jquery/Ajax 发布更新数据库

> ID：13129052
> 
> 赞同：0
> 
> 时间：2012-10-29T20:22:56.067
> 
> 标签：php, jquery, ajax, database, post

新手在这里...我有一个小投票，并希望在提交投票时避免刷新页面，所以我查找了一些使用 Ajax/jQuery 来处理此问题的示例。我正在尝试“调试”通过 Ajax 调用的 Post.php 文件，如下所示：

```
$.ajax(
{
  type: "POST",
  url: "Post.php",
  data: datastring,
  success: function()
  {
    alert ("Success");
  }
}); 
```

用于调试目的的 Post.php 如下所示：

```
<?php
echo "Hello World";
?> 
```

我看到“成功”消息表明 Post.php 文件被成功调用，但是我没有看到“Hello World”消息显示。是否无法在通过 Ajax 调用的 Post.php 文件中将文本回显到屏幕？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T20:25:04.460

响应正文作为第一个参数传递给成功函数。

来自[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

success(data, textStatus, jqXHR) ：请求成功时调用的函数。该函数传递三个参数：**从服务器返回的数据，根据 dataType 参数格式化**；描述状态的字符串；和 jqXHR（在 jQuery 1.4.x 中，XMLHttpRequest）对象。从 jQuery 1.5 开始，success 设置可以接受一个函数数组。每个函数都会被依次调用。这是一个 Ajax 事件。

您的代码应如下所示

```
$.ajax({
  type: "POST",
  url: "Post.php",
  data: datastring,
  success: function(data){
    alert (data);
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T20:32:32.200

jQuery 会将结果作为参数传递给您的成功函数，因为返回的解析数据`function(data, textStatus, jqXHR)`在哪里，只是文本状态，并且是原始请求。`data``textStatus``jqXHR`

您可能想要对`data`对象做一些事情。另外，请确保将 设置`dataType`为适当的值（我在下面使用 HTML）。尝试这个：

```
$.ajax(
{
  type: "POST",
  url: "Post.php",
  data: datastring,
  dataType: "html',
  success: function(data, textStatus, jqXHR)
  {
    alert (data);
  }
}); 
```

这应该提醒 PHP 返回的内容。

# html - 为什么和元素之间有空格

> ID：13129056
> 
> 赞同：12
> 
> 时间：2012-10-29T20:23:21.397
> 
> 标签：html, css

为什么绿色框的顶部和浏览器窗口（在 Chrome 和 Firefox 中）之间有一个空格？

在 html 和 body 元素之间有一个明显的空间，我似乎无法用下面的 CSS（以及它的几十个变体）来消除它。在整个文档高度上似乎还有一些额外的填充，好像填充的某些方面或边距未重置为 0。

**有用的提示**：[http ://reference.sitepoint.com/css/collapsingmargins](http://reference.sitepoint.com/css/collapsingmargins)

我通过使用以下代码解决了这个问题：

```
div#aiport > *:first-child { margin-top: 0px } 
```

在添加时

```
overflow: hidden; 
```

`div#airport`定义本身正确地解决了问题*。*:-)

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>bug</title>
        <link rel="icon" type="image/png" href="bookmarkIcon.png" />
        <style type="text/css">
            html {
                height: 100%;
                min-height: 100%;
                padding: 0px;
                margin: 0px;
            }
            body {
                margin: 0px;
                padding: 0px;
                margin-top: 0px;
                padding-top: 0px;
                width: 100%;
                height: 100%;
                font-size: 16px;
                background: #fff;
            }
            div#airport {
                position: relative;
                z-index: 1;
                top: 0px;
                padding: 0px;
                padding-top: 0px;
                margin: 0px;
                margin-top: 0px;
                margin-left: auto;
                margin-right: auto;
                width: 900px;
                min-width: 900px;
                max-width: 900px;
                background-color: #0f0;
            }
        </style>
    </head>
    <body lang="en">
        <div id="airport">
            <p>Platform</p>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-29T20:27:56.803

因为您的`<p>Platform</p>`元素有一个从其父元素伸出的边距`<div id="airport">`并将其从`<body>`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T20:31:16.143

因为`p`标签里面`#airport`有上边距。

如果您删除该`p`标签上的浏览器默认上边距，您将不再获得空间。例如：

```
<div id="airport">
    <p style="margin:0;">Platform</p>
</div> 
```

[看到这个 jsFiddle](http://jsfiddle.net/UNwV8/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T20:29:14.577

正在发生偏移。如果您将#airport 更改为顶部：-20px；它会正确排列，瞧，它不见了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T20:29:26.563

使 div 位置：绝对，您可以使用 margin-left 再次居中：-（div.width px 的一半）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-29T20:30:19.843

我改变你的CSS：

```
body {
                margin: 0px;
                padding: 0px;
                width: 100%;
                height: 100%;
                font-size: 16px;
                background: #fff;
            }
            div#airport {
                position: relative;
                z-index: 1;
                top: 0px;
                padding: 0px;
                padding-top: 0px;
                margin: 0px;
                margin-top: 0px;
                margin-left: auto;
                margin-right: auto;
                width: 900px;
                min-width: 900px;
                max-width: 900px;
                background-color: #0f0;
            }​ 
```

在这里查看您的代码[http://jsfiddle.net/xfhyq/](http://jsfiddle.net/xfhyq/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-29T20:32:50.217

因为 P 标签是文档中第一个带有文本的标签，这是一个常见的 CSS 问题。尝试添加`body > div:first-child > p:first-child { margin-top: 0; }`到您的 CSS 中，它会修复它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-16T16:32:06.040

正文中有默认边距

将此添加到CSS：

```
body{
    margin:0;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-07T16:36:52.877

在父 div 上设置一些填充也可以解决它。

```
 div#airport {
    ...
    padding: 1px;
} 
```

# php - 使用变量和文本在 PHP 中创建 SQL 表

> ID：13129059
> 
> 赞同：1
> 
> 时间：2012-10-29T20:23:39.110
> 
> 标签：php, mysql, database, variables, database-table

我正在尝试使用以下代码在 PHP 中创建一个 SQL 表：

```
$sql = "CREATE TABLE `$DBName`.`$login`_clients  (
  ClientID int NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`ClientID`),
  AgentClients varchar(15),
  ClientTotal int
)"; 
```

botton 脚本运行良好并将数据库保存为我的`$login`查询。但是，我想保存表格`$login_clients`。前任。`$login="Fred"`，则该表将命名为 Fred_clients。我尝试了几种将变量与文本组合的不同方法，但无法降低格式。有什么建议么？

```
$sql = "CREATE TABLE `$DBName`.`$login`_clients  (
  ClientID int NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`ClientID`),
  AgentClients varchar(15),
  ClientTotal int
)"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T20:25:45.097

你只是在错误的地方打勾，它应该在后面`_clients`。您可能遇到的问题是 PHP 解释器认为您的变量被调用`$login_clients`而不是`$login`，这可以通过将变量包装在花括号中来解决`{}`。

```
$sql = "CREATE TABLE `{$DBName}`.`{$login}_clients`  (
  ClientID int NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`ClientID`),
  AgentClients varchar(15),
  ClientTotal int
)"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T20:28:44.540

这应该工作

```
$sql = "CREATE TABLE `$DBName`.`" . $login . "_clients`  (
  ClientID int NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`ClientID`),
  AgentClients varchar(15),
  ClientTotal int
)"; 
```

# powershell - 用powershell打开一个端口

> ID：13129060
> 
> 赞同：21
> 
> 时间：2012-10-29T20:23:41.057
> 
> 标签：powershell, port

我`Machine A`正在运行端口扫描程序。On`Machine B`我想以有组织的方式打开和关闭端口。我希望通过 powershell 完成所有这些工作。

我发现[这个](http://social.technet.microsoft.com/Forums/en-US/ITCG/thread/1173b550-9f19-495f-bf70-ea12e3a73866/)脚本可以运行`Machine B`但是当从它扫描相同的端口`Machine A`时仍然说它是关闭的。

你们有谁知道我如何成功打开一个端口`Machine B`

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-29T20:30:24.403

尽可能避免使用 COM。您可以使用[TcpListener](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.aspx)打开一个端口：

```
$Listener = [System.Net.Sockets.TcpListener]9999;
$Listener.Start();
#wait, try connect from another PC etc.
$Listener.Stop(); 
```

如果您在调试期间碰巧错过了一个`Stop`命令 - 只需关闭并重新打开您打开套接字的应用程序 - 应该清除挂起的端口。就我而言，它是`PowerGUI script editor`。

然后使用[TcpClient](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.aspx)进行检查。

```
(new-object Net.Sockets.TcpClient).Connect($host, $port) 
```

如果无法连接，则表示防火墙正在阻止它。

**编辑：**要在收到连接时打印一条消息，您应该能够使用此代码（基于[MSDN 的这篇文章](https://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener%28v=vs.110%29.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-2)）：

```
#put this code in between Start and Stop calls.
while($true) 
{
    $client = $Listener.AcceptTcpClient();
    Write-Host "Connected!";
    $client.Close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-04T17:07:48.453

我需要的东西不仅能承认端口是开放的，而且还能做出响应。所以，这是我的超级基本的不完全远程登录服务器。

```
Clear-Host; $VerbosePreference="Continue"; $Port=23
$EndPoint=[System.Net.IPEndPoint]::new([System.Net.IPAddress]::Parse("<ip address>"),$Port)
$Listener=[System.Net.Sockets.TcpListener]::new($EndPoint)

$KeepListening=$true
while ($KeepListening) {
  $Listener.Start()
  while (!$Listener.Pending) { Start-Sleep -Milliseconds 100 }

  $Client=$Listener.AcceptTcpClient()
  Write-Output "Incoming connection logged from $($Client.Client.RemoteEndPoint.Address):$($Client.Client.RemoteEndPoint.Port)"

  $Stream=$Client.GetStream()
  $Timer=10; $Ticks=0; $Continue=$true
  $Response=[System.Text.Encoding]::UTF8.GetBytes("I see you.  I will die in $($Timer.ToString()) seconds.`r`nHit <space> to add another 10 seconds.`r`nType q to quit now.`r`nType x to terminate listener.`r`n`r`n")
  $Stream.Write($Response,0,$Response.Length)

  $StartTimer=(Get-Date).Ticks
  while (($Timer -gt 0)  -and $Continue) {
    if ($Stream.DataAvailable) {
      $Buffer=$Stream.ReadByte()
      Write-Output "Received Data: $($Buffer.ToString())"
      if ($Buffer -eq 113) {
        $Continue=$false
        $Response=[System.Text.Encoding]::UTF8.GetBytes("`r`nI am terminating this session.  Bye!`r`n")
      }
      elseif ($Buffer -eq 32) {
        $Timer+=10
        $Response=[System.Text.Encoding]::UTF8.GetBytes("`r`nAdding another 10 seconds.`r`nI will die in $($Timer.ToString()) seconds.`r`n")
      }
      elseif ($Buffer -eq 120) {
        $Continue=$false
        $KeepListening=$false
        $Response=[System.Text.Encoding]::UTF8.GetBytes("`r`nI am terminating the listener.  :-(`r`n")
      }
      else { $Response=[System.Text.Encoding]::UTF8.GetBytes("`r`nI see you.  I will die in $($Timer.ToString()) seconds.`r`nHit <space> to add another 10 seconds.`r`nType q to quit this session.`r`nType x to terminate listener.`r`n`r`n") }

      $Stream.Write($Response,0,$Response.Length)
    }
    $EndTimer=(Get-Date).Ticks
    $Ticks=$EndTimer-$StartTimer
    if ($Ticks -gt 10000000) { $Timer--; $StartTimer=(Get-Date).Ticks }
  }

  $Client.Close()
}
$Listener.Stop() 
```

# jquery - 音频结束事件不起作用

> ID：13129065
> 
> 赞同：0
> 
> 时间：2012-10-29T20:23:50.417
> 
> 标签：jquery, html, audio

赶上这个事件有一些麻烦。有：

```
<div id="click_me"></div>    
<audio class="fo_audio">
       <source src="track1.mp3" type="audio/mpeg; codecs='mp3'">
    </audio>
    <audio class="fo_audio">
       <source src="track2.mp3" type="audio/mpeg; codecs='mp3'">
    </audio>
    <audio class="fo_audio">
       <source src="track3t.mp3" type="audio/mpeg; codecs='mp3'">
    </audio> 
```

并尝试做某事：

```
song_number = 0;
$("#click_me").click(function(){
$("audio").get(song_number).play()
    });     
$("audio").get(song_number).ended(function(){
    song_number++;
    $("audio").get(song_number).play();
    }); 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:09:36.930

Your code is only assigning an `ended()` handler to the first audio clip. Try this:

```
var count = $("audio").size();
$("audio").each(function (song_number) {
  if (song_number < count-1) {
    this.ended(function () {
      $("audio")[song_number+1].play();
    });
  }
}); 
```

This is untested. It loops over each audio clip, and attaches an `ended()` event that will start playing the next clip. The last clip does not get an event handler.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T07:52:26.867

答案是：

```
var count = $("audio").length;
$("audio").each(function (song_number) {
  if (song_number < count-1) {
    this.addEventListener("ended", function () {
      $("audio")[song_number+1].play();
    });
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T23:47:19.057

在玩了一会儿之后，我最终得到了这个：

HTML：

```
<audio class="fo_audio" controls="controls">
   <source src="http://cache.gizmodo.com/assets/resources/mp3/Woman64.mp3" type="audio/mpeg" />
   <source src="http://cache.gizmodo.com/assets/resources/mp3/WomanWAV.wav" type="audio/wav" />
</audio>
<audio class="fo_audio" controls="controls">
   <source src="http://cache.gizmodo.com/assets/resources/mp3/FeelGood64.mp3" type="audio/mpeg" />
   <source src="http://cache.gizmodo.com/assets/resources/mp3/FeelGoodWAV.wav" type="audio/wav" />
</audio>
<audio class="fo_audio" controls="controls">
   <source src="http://cache.gizmodo.com/assets/resources/mp3/Carmen64.mp3" type="audio/mpeg" />
   <source src="http://cache.gizmodo.com/assets/resources/mp3/CarmenWAV.wav" type="audio/wav" />
</audio>
<div>
<button class="play" data-which="0">Play 0</button>
<button class="play" data-which="1">Play 1</button>
<button class="play" data-which="2">Play 2</button>
<button class="play" data-which="all">Play all</button>
</div> 
```

Javascript：

```
var playing = false;
function playCascade(e) {
    if(playing) { return; }
    var song_number = e.song_number || 0;
    var $a = $("audio").eq(song_number);
    if($a.length) {
        $a.get(0).play();
        $a.off('ended').on('ended', function(){
            playing = false;
            if(e.continu) {
                playCascade($.extend(e, {
                    'song_number': song_number + 1
                }));
            }
        });
        playing = true;
    }
    else {
        playing = false;
    }
}
$(".play").on('click', function(e) {
    var which = $(this).data('which');
    playCascade($.extend(e, {
        'song_number': Number($(this).data('which')) || 0,
        'continu': which == 'all'
    }));
}); 
```

**[演示](http://jsfiddle.net/bbPCk/2/)**

笔记：

*   播放序列是通过递归实现的。
*   扩展事件对象`e`以传递自定义数据。
*   每次播放时都会将一个新的“结束”处理程序附加到音频对象。
*   'continue' 是 javascript 保留字，因此最好避免使用。因此“继续”。
*   该演示有一个额外的行，它只播放每个剪辑的最后 5 秒。
*   要隐藏音频元素，`controls="controls"`请从`<audio>`标签中删除。
*   在 Opera 12.02 中测试。

这是代码的变体：http: [//jsfiddle.net/bbPCk/3/](http://jsfiddle.net/bbPCk/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-23T17:46:04.307

我还认为“结束”的事件效果不佳。这是不使用 removeEventListener 的边缘效应（考虑到我的上下文）。因此，请注意：如果您删除了 AudioElement，请不要忘记删除相关的已安装事件处理程序。

# cuda - 如何在应用程序结束时获取 CUDA 运行时错误的摘要

> ID：13129069
> 
> 赞同：0
> 
> 时间：2012-10-29T20:24:12.017
> 
> 标签：cuda

我发现为每段代码（cudaMalloc、cudaMemCpy、内核代码......）获取 cuda 状态报告很有用但很无聊。有没有办法在代码末尾做一次（如果我不在乎错误来自哪里）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T00:31:34.153

您可以使用宏来检查错误，因此几乎不需要编写额外的代码。我在下面包含了几个函数，它们允许您编写 CUDA 调用，例如：

```
cudaCheck(cudaMalloc(&my_array, 10)); 
```

并且，在调用内核之后：

```
cudaCheckLastError("MyKernel failed"); 
```

这种方法的优点是您可以获得有关失败的确切信息，并且您的程序不会尝试继续运行。我建议您使用这种方法，因为从长远来看，它将为您节省大量工作。

在更多的学术笔记中，您可能会使用异步 CUDA 调用，然后在最后检查错误。因此，例如：

```
cudaMemcpyAsync(...); 
```

然后，您可以`cudaDeviceSynchronize();`在最后运行，这将返回发生的最新错误（如果发生任何错误）。

不过这真的不推荐。有关详细信息，请参阅 CUDA C 编程指南 4.2 中的第 3.2.8 章，错误检查。

用于检查错误的宏。如果发生错误，这些将打印错误并退出程序：

。H：

```
void __cudaCheck(cudaError err, const char* file, const int line);
#define cudaCheck(err) __cudaCheck (err, __FILE__, __LINE__)

void __cudaCheckLastError(const char* errorMessage, const char* file, const int line);
#define cudaCheckLastError(msg) __cudaCheckLastError (msg, __FILE__, __LINE__) 
```

.cpp：

```
void __cudaCheck(cudaError err, const char *file, const int line)
{
  if( cudaSuccess != err) {
    fprintf(stderr, "%s(%i) : CUDA Runtime API error %d: %s.\n",
      file, line, (int)err, cudaGetErrorString( err ) );
    exit(-1);
  }
}

void __cudaCheckLastError(const char *errorMessage, const char *file, const int line)
{
  cudaError_t err = cudaGetLastError();
  if( cudaSuccess != err) {
    fprintf(stderr, "%s(%i) : getLastCudaError() CUDA error : %s : (%d) %s.\n",
      file, line, errorMessage, (int)err, cudaGetErrorString( err ) );
    exit(-1);
  }
} 
```

# java - WebApp（Tomcat-jdbc）池化数据库连接抛出放弃异常

> ID：13129070
> 
> 赞同：23
> 
> 时间：2012-10-29T20:24:16.533
> 
> 标签：java, mysql, tomcat, connection-pooling

我已经浏览了一段时间，并在此过程中咬牙切齿，但找不到与我的问题完全匹配的问题。
简而言之，在 60 秒不活动后，我得到了极好的堆栈跟踪（org.apache.tomcat.jdbc.pool.ConnectionPool 放弃），这是几个服务器端线程的正常行为。
我正在使用 Tomcat JDBC 连接池（org.apache.tomcat.jdbc.pool.DataSource）直接
堆栈跟踪：

```
    2012 年 10 月 29 日 8:55:50 PM org.apache.tomcat.jdbc.pool.ConnectionPool 放弃
    警告：连接已被放弃 PooledConnection[com.mysql.jdbc.JDBC4Connection@1ad2916]:java.lang.Exception
        在 org.apache.tomcat.jdbc.pool.ConnectionPool.getThreadDump(ConnectionPool.java:967)
        在 org.apache.tomcat.jdbc.pool.ConnectionPool.borrowConnection(ConnectionPool.java:721)
        在 org.apache.tomcat.jdbc.pool.ConnectionPool.borrowConnection(ConnectionPool.java:579)
        在 org.apache.tomcat.jdbc.pool.ConnectionPool.getConnection(ConnectionPool.java:174)
        在 org.apache.tomcat.jdbc.pool.DataSourceProxy.getConnection(DataSourceProxy.java:111)
        在 com.getsom.getConnection(DAO.java:1444)
        在 com.getsom.PreparedConnection.(PreparedConnection.java:48)
        在 com.getsom.Alarms.run(Alarms.java:492)

```

我的 PoolProperties 配置如下：

```
 PoolProperties pp = new PoolProperties();

    pp.setUrl( someValidUrl);
    pp.setDriverClassName("com.mysql.jdbc.Driver");
    pp.setUsername( someUser);
    pp.setPassword( somePassword);
    pp.setJmxEnabled( true);
    pp.setTestWhileIdle( true);
    pp.setTestOnBorrow( true);
    pp.setValidationQuery( "SELECT 1");
    pp.setTestOnReturn( false);
    pp.setValidationInterval(30000);
    pp.setTimeBetweenEvictionRunsMillis(30000);
    pp.setMaxActive(100);
    pp.setInitialSize(10);
    pp.setMaxWait(10000);
    pp.setMinEvictableIdleTimeMillis(30000);
    pp.setMinIdle(10);

    pp.setLogAbandoned(true);
    pp.setRemoveAbandoned(true);
    pp.setRemoveAbandonedTimeout(60);
    pp.setJdbcInterceptors("org.apache.tomcat.jdbc.pool.interceptor.ConnectionState;"+
      "org.apache.tomcat.jdbc.pool.interceptor.StatementFinalizer");    

    setPoolProperties(pp); 
```

我希望 setValidationInterval(30000) 能救我，因为 30 秒在连接生命周期中并不多。无论如何，问题是：
**我缺少什么来保持这种联系永远存在？**
很高兴知道：为什么我在声明连接的函数中超时，尽管它在 30 秒前被调用。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-12-15T22:15:49.087

即使我迟到了 1 年多才访问此页面，但我偶然发现了这里，因为我遇到了类似的问题并且也需要解决方案。所以我想我会分享最终对我有用的东西。

就我而言，在找到并阅读了这篇文章后 >>>[配置-jdbc-pool-high-concurrency](https://my.oschina.net/shipley/blog/519449) - 我只是在我的池配置中添加了一个这样的拦截器；

```
"org.apache.tomcat.jdbc.pool.interceptor.ResetAbandonedTimer" 
```

这样您所做的行（来自您上面发布的代码）`setJdbcInterceptors(...)`现在应该如下所示；

```
p.setJdbcInterceptors(
            "org.apache.tomcat.jdbc.pool.interceptor.ConnectionState;"
            + "org.apache.tomcat.jdbc.pool.interceptor.StatementFinalizer;"
            + "org.apache.tomcat.jdbc.pool.interceptor.ResetAbandonedTimer"); 
```

***解释***- 从文章中引用，它说；

> *我们要确保当我们检测到连接仍在使用时，我们重置超时计时器，这样连接就不会被视为放弃。我们通过插入一个拦截器来做到这一点。*
> 
> *每次准备语句或执行查询时，计时器都会重置连接池上的放弃计时器。这样......做大量的查询和更新，不会超时。*

记住你很可能很久以前就已经解决了这个问题，我仍然希望这可以帮助其他遇到类似问题的人，就像我一样。

干杯!

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T07:27:04.437

您是否看过 Tomcat 网站上与[PoolConnection](http://people.apache.org/~fhanik/jdbc-pool/jdbc-pool.html)相关的信息。也许您需要的是查看属性`minEvictableIdleTimeMillis`

要回答您的问题，您将超时，因为您每 30 秒检查一次空闲和放弃连接（请参阅`TimeBetweenEvictionRunsMillis`参考资料），并且由于您在 30 秒设置了可撤销的空闲超时时间（请参阅参考资料`minEvictableIdleTimeMillis`），因此您最终得到了您所拥有的。您说过您在空闲时收到此异常，我怀疑该异常是关闭空闲连接而不是放弃连接的结果。据我了解，放弃连接用于超时时间超过预期的查询（而不是空闲连接）。

就我个人而言，我不希望连接永远存在，因为它们会不必要地消耗资源（即与数据库的连接）。我会玩弄我的最大连接数、驱逐运行和空闲时间来优化我自己的需求。我想你可以将这些值设置得足够大，几乎永远存在！这确实取决于你在做什么......

抱歉，我不能在这里提供更多帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-01T15:38:18.550

只需在 tomcat7 conf/server.xml 或 context.xml 中添加以下条目即可，只要您的资源标签存在即可。

```
jdbcInterceptors="org.apache.tomcat.jdbc.pool.interceptor.ConnectionState;
org.apache.tomcat.jdbc.pool.interceptor.StatementFinalizer;
org.apache.tomcat.jdbc.pool.interceptor.ResetAbandonedTimer" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-08T08:35:48.577

在配置文件中跟踪“removeAbandonedTimeout”。这应该是应用程序中的最大运行查询。否则它将在执行过程中关闭连接

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-20T04:40:19.787

如果您在 tomcat 的 context.xml 中定义数据源，则应添加 ResetAbandonedTimer，如下所示：

```
jdbcInterceptors="ConnectionState;StatementFinalizer;ResetAbandonedTimer" 
```

设置 ResetAbandonedTimer 后，问题在我的应用程序中得到解决，请求您让我知道 ResetAbandonedTimer 拦截器和 removeAbandoned="true" removeAbandonedTimeout="60" 之间是否有任何关系

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-02T11:58:40.753

有一个类似的问题，即 tomcat 正在关闭 JDBC 连接，因为它被放弃了，因为事务需要很长时间。

通过意识到`abandoned`and`idle`是不同的并通过设置来解决它：`spring.datasource.tomcat.removeAbandonedTimeout: 86400 #seconds`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-16T21:03:05.960

这个问题的答案对我很有帮助。

虽然就我而言，我已经配置了“ResetAbandonedTimer”JDBC 拦截器。

但是，我的查询运行时间比我还配置的“removeAbandonedTimeout”更长。一旦我增加了“removeAbandonedTimeout”，问题就消失了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-10T09:03:50.157

我可以看到这个线程很旧，但我遇到了类似的问题，我最终找到了导致它的原因，所以如果它可以帮助某人，我想分享一下：

我使用了来自一个安静的网络服务的连接。在服务器端处理来自客户端的请求的界面中，我不小心在方法签名中放入了“抛出 IOException”：

```
@GET
@Path("/databases")
@Produces(MediaType.APPLICATION_JSON)
public String getAllDatabases() throws IOException { 
```

# javascript - javascript和html表单复选框？

> ID：13129076
> 
> 赞同：0
> 
> 时间：2012-10-29T20:24:58.947
> 
> 标签：javascript, forms

我想在我的表单中使用 javascript 来制作它，以便在选中一个复选框后，该组中的其他复选框被禁用，因此用户最多只能选择一个选项。

这是我的html表单：

```
<label>
    <input type="checkbox" name="subscription[]" value="Sweets" id="subscription_1" />
    Sweets
</label>
&nbsp;
<label>
    <input type="checkbox" name="subscription[]" value="Chocolate" id="subscription_2" />
    Chocolate
</label>
&nbsp;
<label>
    <input type="checkbox" name="subscription[]" value="Fruit & Veg" id="subscription_3" />
    Fruit & Veg
</label> 
```

这是我正在尝试使用的 javascript：

```
//Check check box
//Script for questions where you check one option or the other (locks other options out)
$(':checkbox').click(function(){ 
    var $checkbox = $(this);
    var isChecked = $checkbox.is(':checked')

    //If no option is checked, the make all the options available to be selected
    //Otherwise, one option must be checked so lock out all other options
    if(isChecked)
        $checkbox.subscription(":checkbox").attr("disabled", "disabled");
    else
        $checkbox.subscription(":checkbox").removeAttr("disabled"); 

});​ 
```

有人可以解释我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:27:14.243

你几乎可以做你所做的：

```
$(':checkbox').click(function(){
    $(':checkbox').attr("disabled", "disabled");
    $(this).removeAttr("disabled");
}); 
```

无需测试：禁用所有，然后启用单击的。

[示范](http://jsfiddle.net/5DPrA/)

请注意，此 UI 可能会令用户感到不安：这不是正确提出的复选框的行为方式。例如，用户会惊讶于他们的选择在第一次点击时被锁定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T20:57:24.387

这将起作用：

```
var $checkboxes = $(':checkbox').click(function(){
    $checkboxes.filter('[name="' +
                        this.name.replace(/\[/g,'\\[').replace(/\]/g,'\\]') +
                        '"]')
               .not(this).prop('disabled',this.checked);
}); 
```

也就是说，保留对变量（我称之为`$checkboxes`）中所有复选框的引用，以节省每次都必须创建一个新的 jQuery 对象，然后在单击一个时，您可以禁用或重新启用所有其他复选框通过使用`.filter()`方法和[`.not`方法](http://api.jquery.com/not/)排除当前的同名。

另请注意（除非您使用的是旧版本的 jQuery）该[`.prop()`方法](http://api.jquery.com/prop/)是设置 disabled 属性的适当方法。

演示：http: [//jsfiddle.net/rnbMB/2/](http://jsfiddle.net/rnbMB/2/)

我是否可以建议，如果您只是取消选中其他复选框而不是禁用其他复选框，这对用户会更好吗？这样，一次最多只能检查一个，但用户不必先取消选中当前一个，然后再选择另一个：

```
var $checkboxes = $(':checkbox').click(function(){
    if (this.checked)
        $checkboxes.filter('[name="' +
                    this.name.replace(/\[/g,'\\[').replace(/\]/g,'\\]') +
                    '"]')
                   .not(this).prop('checked',false);
}); 
```

演示：http: [//jsfiddle.net/rnbMB/3/](http://jsfiddle.net/rnbMB/3/)

当然，无论哪种方式，您都需要将该代码放入文档就绪处理程序和/或出现在所有复选框之后的脚本块中。（文档就绪处理程序可能是最好的，因为它将`$checkboxes`变量保持在全局范围之外。）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-29T20:29:39.443

尝试使用`prop`而不是`attr`

```
 if(isChecked)
    $checkbox.subscription(":checkbox").prop("disabled", true);
else
    $checkbox.subscription(":checkbox").prop("disabled",false); 
```

# c# - 使用 Linq 方法返回时间

> ID：13129081
> 
> 赞同：1
> 
> 时间：2012-10-29T20:25:28.907
> 
> 标签：c#, linq-to-entities

一个朋友给我看了这个 Linq 语句：

```
records.Where( r => r.Name == "Henry Clay" ).FirstOrDefault(); 
```

撇开 FirstOrDefault() 可以采用 lambda 的事实不谈，是否所有 Henry Clay 记录都在全部转到 FirstOrDefault() 之前检查“Henry Clay”，还是 Where 方法只返回第一个？

换句话说，Henry Clay 的某些记录可能永远不会传递给 FirstOrDefault 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T20:29:24.787

假设您在最后找到一个项目，您将不会迭代整个源序列。您将在返回第一个项目后立即停止。

这是一个有用的类比。想象一群人坐在一张桌子旁。“迈克”坐在最左边。每当他旁边的人向他要一件东西时，他都会从一摞纸中拿出一张纸递给下一个人。他将成为基础数据的“枚举者” `records`。

坐在他旁边的是“弗雷德”。弗雷德在被问到一件物品时，会向迈克要一件物品。如果迈克给他的物品上写着“亨利克莱”，那么他会把它给下一个人，如果没有，他会向迈克要另一个物品。这将一直持续到 Fred 最终得到符合他条件的物品，或者 Mike 用完物品。他代表`Where`普查员。

弗雷德的右边是“亚伦”。亚伦在被问到一件物品时，会向弗雷德要一件物品。当他从 Fred 那里得到一件物品时，他会将它传递给下一个人，然后当下次有人要一件物品时，他会立即说“不，我已经完成了”，而不会向 Fred 询问其他任何东西。他代表`FirstOrDefault`.

每个人，当被要求从他们旁边的人那里获得一个项目时，只有在被要求时，才会从他们的“来源”获取一个项目，处理它，或者做他们需要的任何事情，为下一个人生成一个项目。使用此示例，您可以想象，一旦 Aaron 拿到他的第一个物品，很可能会在堆栈上留下几张纸。他们会留在那里，不经*任何人*处理，因为 Aaron 永远不会向 Fred 要他的第二件物品。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T20:30:08.967

不，所有元素都是惰性执行的。当您按如下方式重写查询时，您可以看到这一点：

```
records.Where(r =>
{
    Console.WriteLine(r.Name);
    return r.Name == "Henry Clay";
})
.FirstOrDefault(); 
```

当您强制执行时，结果会非常不同，`ToArray()`例如：

```
records.Where(r =>
{
    Console.WriteLine(r.Name);
    return r.Name == "Henry Clay";
})
.ToArray()
.FirstOrDefault(); 
```

在最后一种情况下，`ToArray()`将强制迭代`records`集合中的所有元素，否则，`FirstOrDefault()`将确保集合在 where 谓词第一次返回 true 后停止迭代。

# php - 使用外部表单登录的 PHP 表单数据

> ID：13129083
> 
> 赞同：0
> 
> 时间：2012-10-29T20:25:29.587
> 
> 标签：php, forms, login

我想创建一个门户，让我的用户可以登录到多个外部服务。我在自己的网站上有 PHP 表单，当我的用户在此表单中输入数据时，我希望将其传输到外部网站（我不拥有或控制），使用数据在那里填写登录表单，然后然后将用户重定向到外部网站的成员区域（我不拥有或控制）。当我用谷歌搜索时，我得到的结果好坏参半，而且 StackOverflow 上关于这个主题的答案也有点令人困惑。这是，还是不可能？

我让我想起了网络钓鱼的原理，我的一个帐户曾经被黑客入侵。我什么都没注意到，在假网站上输入了我的凭据，然后被转移到了真网站的会员区，这意味着它实际上是可能的对吧？

谢谢！桑德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:32:30.173

您可以`$_POST`将其发送到您想要的任何站点。但是，一旦收到数据，就无法控制。

关于您问题的最后一段，您所描述的是一个网络钓鱼网站。攻击者拥有该站点并完全控制它。它看起来像一个普通的站点，欺骗用户输入用户凭据。

# c - 找不到标识符？

> ID：13129085
> 
> 赞同：5
> 
> 时间：2012-10-29T20:25:33.587
> 
> 标签：c, function-prototypes

经过两年的 C#，我尝试了 C，但我遇到了一些“菜鸟”错误。

我试图用递归来反转一个数组，我有这个错误：

> **错误 C3861：未找到“Rekurzija”标识符**

这是我的代码：

```
#include "stdafx.h"
#include "stdio.h"

int main()
{
    int niz[] = {1,2,3,4,5,6};
    int duzina = sizeof(niz)/sizeof(int);
    printf("%s",niz[Rekurzija(duzina)]);
    getchar();
}

int Rekurzija(int niz)
{
    int i = sizeof(niz)/sizeof(int);
    while(i!=0)
        return Rekurzija(i-1);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T20:27:25.887

在 C 中，所有东西都必须在使用前声明。所以你必须在 main 之前为 Rekurzija 添加一个声明：

```
int Rekurzija(int); 
```

这只是告诉编译器，当它稍后看到 Rekurzija 调用时，这是一个接受 int 并返回 int 的函数调用。这就是处理调用所需的全部内容，定义可以在其他地方，例如在您的情况下位于 main 下方，甚至在另一个文件中，这很常见（.h 文件中的 decaration 和 .c 文件中的定义） .

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T20:26:45.297

在 C 中，您应该在调用它的函数之前列出函数原型。

因此，您应该在包含后添加以下内容：

`int Rekurzija(int niz);`

请注意，没有原型，事情仍然可以工作；编译器将对原型进行猜测，但如果猜测与您的函数实际不同，则会出现问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T20:28:15.803

在 C 中，您必须在引用实体之前声明它们。

您需要添加：

```
int Rekurzija(int niz); 
```

告诉编译器 Rekurzija 存在，以及它具有什么样的属性（例如，它是一个带有 int 参数和结果的函数）作为主函数之前的“前向”声明。

# jquery - onclick 使多个 div 的可选（并在表单提交上提交来自这些 div 的值）

> ID：13129088
> 
> 赞同：-1
> 
> 时间：2012-10-29T20:25:45.470
> 
> 标签：jquery, forms, onclick, submit

什么是使一组方形 div 可点击的好方法，在它们上切换一个类以指示它们被（addClass）选中。然后在表单提交上只提交那些 div 的值？也许为每个具有值的 div 使用隐藏字段。只应提交所选方形 div 的隐藏值。

我已经搜索了一个解决方案，除了 addClass 指示一个 div 被点击我不知道如何解决这个问题，有什么好的方法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:35:16.283

最好的办法是为此使用 ajax 并在成功回调时重新加载页面。但是你可以在没有 ajax 的情况下做到这一点（理论上我以前从未测试过）

```
$('form input[type=submit]').click(function(e){
        $('div:not(.mySelectedClass) input').removeAttr('name');
        $('form').submit();
        e.preventDefault();
    }); 
```

# c# - PaintEvent 不会重绘

> ID：13129089
> 
> 赞同：2
> 
> 时间：2012-10-29T20:25:46.050
> 
> 标签：c#, winforms, panel

我有一个 C# 中的 Windows 窗体应用程序，带有绘图面板和一个按钮 - 用于绘制一条线。

单击按钮时，您可以为 2 个随机点绘制一条线。

```
Pen p = new Pen(Color.Black, 5);
//point for start 
Point ps = new Point();
//point for end 
Point pe = new Point();

private void drawPanel_MouseDown(object sender, MouseEventArgs e)
{
  ps.X = e.X;
  ps.Y = e.Y;
  pe = ps;
}

private void drawPanel_MouseMove(object sender, MouseEventArgs e)
{
  // when button is clicked for drawing draw = true;
  if (draw)
  {
    if (e.Button == MouseButtons.Left)
    { 
      pe = new Point(e.X, e.Y);
    }
  }
}

private void drawPanel_MouseUp(object sender, MouseEventArgs e)
{
  onMouseUpFlag = true;
}

private void drawPanel_Paint(object sender, PaintEventArgs e)
{
  Graphics g = drawPanel.CreateGraphics();
  if (onMouseUpFlag)
  {
    g.DrawLine(p, ps, pe); 
    g.Dispose(); 
  }
} 
```

该程序有一些缺陷：

*   当你画一条线时，它会显示它，只有当主窗口移动到某个地方时（通常是当我隐藏它时）
*   它只能绘制 1 条线。

任何建议如何解决这些错误？

**编辑**

我已经阅读了您的答案并进行了一些更改：

```
Pen p = new Pen(Color.Black, 5); 
Point ps = new Point();
Point pe = new Point();

List<Point> linesStart= new List<Point>();
List<Point> linesEnd= new List<Point>();

private void drawPanel_MouseDown(object sender, MouseEventArgs e)
{
  ps.X = e.X;
  ps.Y = e.Y;

  linesStart.Add(ps);

  pe = ps;
}

private void drawPanel_MouseMove(object sender, MouseEventArgs e)
{
  if (e.Button == MouseButtons.Left)
  {
    pe = new Point(e.X, e.Y);

    //adding end point .. actually adds a lot of points 
    linesEnd.Add(pe);
  }
}

bool onMouseUpFlag = false;

private void drawPanel_MouseUp(object sender, MouseEventArgs e)
{
  onMouseUpFlag = true;
  drawPanel.Invalidate();
}

private void drawPanel_Paint(object sender, PaintEventArgs e)
{ 
  if (onMouseUpFlag)
  {
    for (int i = 0; i < linesStart.Count; i++)
    {
      e.Graphics.DrawLine(p, linesStart[i], linesEnd[i]);
    } 
  }
} 
```

现在我正在尝试为多条线修复 DrawLine。Paint 事件可以做多行，但只有起点是好的。不知何故，终点不是很正确。在哪里可以准确设置 MouseMove 事件的最后一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T20:28:36.677

您必须调用面板上的 Invalidate 方法：

```
private void drawPanel_MouseUp(object sender, MouseEventArgs e)
{
  onMouseUpFlag = true;
  drawPanel.Invalidate();
} 
```

此外，使用 PaintEvent 中的 Graphic 对象：

```
private void drawPanel_Paint(object sender, PaintEventArgs e)
{
  if (onMouseUpFlag)
  {
    e.Graphics.DrawLine(p, ps, pe); 
  }
} 
```

对于多行，您必须将点保存在集合对象中。

根据您更新的代码，这是一个我认为您正在尝试做的工作示例：

```
private class Line {
  public Point Starting { get; set; }
  public Point Ending { get; set; }

  public Line(Point starting, Point ending) {
    this.Starting = starting;
    this.Ending = ending;
  }
}
List<Line> lines = new List<Line>();

private Point downPoint = Point.Empty;
private Point movePoint = Point.Empty;
private bool movingLine = false;

public Form1() {
  InitializeComponent();

  panel1.Paint += panel1_Paint;
  panel1.MouseDown += panel1_MouseDown;
  panel1.MouseMove += panel1_MouseMove;
  panel1.MouseUp += panel1_MouseUp;
}

void panel1_MouseDown(object sender, MouseEventArgs e) {
  if (e.Button == MouseButtons.Left) {
    downPoint = e.Location;
  }
}

void panel1_MouseMove(object sender, MouseEventArgs e) {
  if (e.Button == MouseButtons.Left) {
    movingLine = true;
    movePoint = e.Location;
    panel1.Invalidate();
  }
}

void panel1_MouseUp(object sender, MouseEventArgs e) {
  if (e.Button == MouseButtons.Left) {
    movingLine = false;
    lines.Add(new Line(downPoint, e.Location));
    panel1.Invalidate();
  }
}

void panel1_Paint(object sender, PaintEventArgs e) {
  e.Graphics.Clear(Color.White);
  foreach (Line l in lines) {
    e.Graphics.DrawLine(Pens.Black, l.Starting, l.Ending);
  }

  if (movingLine) {
    e.Graphics.DrawLine(Pens.Black, downPoint, movePoint);
  }

} 
```

使用[继承的面板](https://stackoverflow.com/a/7569645/719186)打开 DoubleBuffer 属性以避免闪烁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T20:29:25.727

每当你想重绘（在你的代码中）你应该调用 panelinvalidate `drawPanel.Invalidate()`。

当您完成鼠标移动并释放按钮时

```
private void drawPanel_MouseUp(object sender, MouseEventArgs e)
{
            onMouseUpFlag = true;
            drawPanel.Invalidate();
} 
```

最后，我建议在您的 drawPanel_Paint 中使用此代码而不是您的代码。您应该使用 EventArgs 提供的图形，而不是创建新图形。

```
private void drawPanel_Paint(object sender, PaintEventArgs e)
{
            if (onMouseUpFlag)
            {
                  e.Graphics.DrawLine(p, ps, pe); 
            }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T20:32:00.423

1.  放开鼠标后需要触发重绘事件。只需调用`drawPanel.Invalidate()`即可重新绘制表单。

2.  要绘制多条线，您必须将每条线的信息存储在列表或其他内容中，并在重绘中绘制每条线。Paint 方法基本上每次都以空格开头，因此它只会按照您当前设置的方式绘制最新的。

# sql-server - Excel 自动化错误将数据库导入工作表

> ID：13129090
> 
> 赞同：1
> 
> 时间：2012-10-29T20:25:51.277
> 
> 标签：sql-server, excel, adodb, vba

我有一个包含 192 个工作表的工作簿，这些工作表对应于我们的 mssql 数据库中的 192 个表。如果我在数据连接向导中设置了一个给定的表，所有数据都会正确地转储到工作表中。但是，当我在下面运行我的代码时，我得到：

运行时错误“214767259 (80004005)”自动化错误未指定错误

大约一半的表格填充得很好。我注意到，一旦到达具有大量数据（rtf 文本）的字段，我就会收到错误消息。具有该文本的字段对我来说并不重要，因此如果 excel 可以将这些字段留空并继续，我会很高兴。该大字段位于不同的列（有时是多个列）中，具体取决于每个表，因此必须遍历所有 192 个表以清除单个列而不导入是很耗时的。

为什么我在vba中运行时出现这个错误，但是数据连接向导没有问题？

```
Sub GetData()

Dim cnDump As ADODB.Connection
Set cnDump = New ADODB.Connection

' Provide the connection string.
Dim strConn As String

'Use the SQL Server OLE DB Provider.
strConn = "Provider=SQLOLEDB.1;Integrated Security=SSPI;Persist Security Info=True;Initial Catalog=XXXX;Data Source=XXXX\XXXX;Use Procedure for Prepare=1;Auto Translate=True;Packet Size=4096;Workstation ID=XXXX;Use Encryption for Data=False;Tag with column collation when possible=False;"

'Now open the connection.
cnDump.Open strConn

' GET DATA
Dim ws As Worksheet
Dim tbl_name As String

Dim rsDump As ADODB.Recordset
Set rsDump = New ADODB.Recordset

For Each ws In Worksheets

tbl_name = ws.Name
ws.Rows.ClearContents

With rsDump

    .ActiveConnection = cnDump
    .Open "SELECT * FROM " & tbl_name

    For i = 1 To .Fields.Count
     ws.Cells(1, i) = .Fields(i - 1).Name
    Next i

    ws.Range("A2").CopyFromRecordset rsDump

End With

ws.Rows(1).Font.Bold = True

Next ws

cnDump.Close
Set rsDump = Nothing
Set cnDump = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T20:54:40.550

如果这些触发错误的字段对您来说并不重要，为什么不使用

```
On Error Resume Next 
```

方法 ？

或者，如果您想避免另一个错误在不应该被忽略时被忽略，则可以通过添加更精确地处理错误：

```
Sub GetData()

On Error GoTo GetData_Error

[your code here]

On Error GoTo 0
Exit Sub

GetData_Error:

If Err.Number=214767259 Then''assuming this is the correct code, you might need to track it     before using Debug.Print Err.Number

Err.Clear
Resume Next

End If

End Sub 
```

编辑：

当您提到 Resume Next 方法将停止给定表的整个副本时，请重新发表评论，这是因为您一次复制整个记录集。如果您遍历字段，则错误将出现在字段本身，然后将恢复到下一个字段而不是下一个表。我应该有一个在工作中执行此操作的代码示例，如果您有兴趣，将在明天发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:54:29.747

我使用以下过程将多维记录集导入电子表格，也许尝试看看并适应您的情况？这将允许您一次处理一个字段，并且只跳过导致错误的字段，或者使用

```
Resume Next 
```

通过在复制之前检查字段的内容

```
If Len(Rs.Fields(a,b))<500 Then MySheet.MyCell.Value=Rs.Fields(a,b) 
```

这是程序：

```
j = -1

Dim MyArray As Variant
ReDim MyArray(RS.RecordCount, RS.Fields.Count)

If RS.RecordCount = 0 Then

    ReDim MyArray(0, 0)
    MyArray(0, 0) = "No Data"

Else

    Do While Not (RS.EOF)

    j = j + 1

        For i = 0 To RS.Fields.Count - 1

            MyArray(j, i) = Trim(RS.Fields(i))

        Next i

        RS.MoveNext

    Loop

End If 
```

希望这可以帮助

# python - 如何使用 python-libtorrent 获取 torrent 的对等列表？

> ID：13129091
> 
> 赞同：4
> 
> 时间：2012-10-29T20:25:53.280
> 
> 标签：python, bittorrent, libtorrent

我试过这段代码：

```
import libtorrent as lt
import time
ses = lt.session()
ses.listen_on(6881, 6891)
info = lt.torrent_info('test.torrent')
h = ses.add_torrent({'ti': info, 'save_path': './'})
print 'starting', h.name()
while (not h.is_seed()):
   s = h.status()
   p = h.get_peer_info()

   print lt.peer_info().ip

   sys.stdout.flush()

   time.sleep(15)

print h.name(), 'complete' 
```

它打印这个：

```
starting test.avi
('0.0.0.0', 0)

('0.0.0.0', 0)
. 
.
. 
```

所以不是给我一个同行列表，而是给我零。我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T23:30:53.920

看起来您的 python 代码中存在错误。

> 打印 lt.peer_info().ip

该行将构造一个新的 peer_info 对象，然后打印 IP（此时将默认初始化，并包含 0.0.0.0）。

我相信你想做的是：

```
for i in p:
   print i.ip() 
```

即，对于洪流中的每个对等方，打印其 IP。

# xcode - 使用 Xcode 将当前分支合并到 Master

> ID：13129092
> 
> 赞同：9
> 
> 时间：2012-10-29T20:25:55.897
> 
> 标签：xcode, git, version-control

有没有一种使用 Xcode 将当前工作分支合并到主分支的快速方法？我不清楚“合并”菜单选项到底在做什么（它没有完全清楚地标记），但它似乎正在将您选择的任何分支合并到当前分支中 - 我想这在您想要测试时很有用您使用其他人的最新代码库所做的更改。

当我完成一个功能时，我想将它合并到主控中，然后继续处理另一个功能。似乎我必须切换到主分支，从那里合并，然后从主分支创建另一个分支并处理该分支中的功能 #2。

我说的对吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T20:29:53.030

对，那是正确的。Git 中的“合并”操作采用另一个分支并将其合并到您当前的分支中。

您所描述的（为每个功能创建一个分支，并随时将它们合并到 master 中）通常被称为“功能分支”工作流程，这是一个非常常见的工作流程。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-01-05T23:10:50.950

要使用 Xcode 将当前分支合并到另一个分支（例如，将**develop**分支合并到**master**分支），请转到**Source Control > *Your project name and branch* > Merge into Branch** ...。

[![在此处输入图像描述](../Images/1c01bc3dadb339b600bdd5cb647b6536.png)](https://i.stack.imgur.com/y9OTc.png)

然后只需选择要将其合并到的分支。

[![在此处输入图像描述](../Images/2f24a30036357f077beb5ebe24e2b126.png)](https://i.stack.imgur.com/94MKo.png)

您可以查看更改，然后进行合并。这是本地存储库更改。您可以转到**Source Control > Push**将合并推送到您的远程存储库。

# jquery - 单击外部任意位置时隐藏元素

> ID：13129094
> 
> 赞同：1
> 
> 时间：2012-10-29T20:26:13.983
> 
> 标签：jquery

是的，以前有人问过这个问题，但它并没有解决我的问题。

所以考虑这种情况，假设我有一个 div 让我们称之为它`container`，现在这个 div 包含**许多**其他各种对象，就像`<a>, <img />, <div>, <ul>`你明白了......

现在，用户可以在那个 div 中做一些事情，写消息等等......但是当他点击该`container`元素之外的任何地方时，它应该消失，所以这很简单吧？

```
$(document).on("click", document, function(event){
    if($(event.target).is(".container")) return;
    $(".container").hide();
}); 
```

好吧，这确实可行，但同时不行，因为它只会检查目标是否不是`container`，如果您单击某个按钮上的说它也会消失，我可以只在该`if`语句中包含每个元素，哦但就我而言，这将是一个非常长的列表......所以必须有更好的方法

是的，我确实尝试过使用`event.stopPropagation()`，但它没有用，我想这是因为我正在使用`on`而不是简单的`click`事件，请帮我解决这个问题......

我也为你设置了这个小提琴：http: [//jsfiddle.net/nVfJ5/](http://jsfiddle.net/nVfJ5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:29:31.150

始终可用，因此`document`不需要委托事件处理程序？

只需检查某处是否`event.target`有一个`.container`元素作为父元素，如果没有隐藏该`.container`元素：

```
$(document).on("click", function(e){
    if(!$(e.target).closest(".container").length)
        $(".container").hide();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T20:29:50.840

使用`closest()`方法。根据定义，它从目标开始并向上查找匹配树。因此，如果元素是选择器，它将停止。

```
if($(event.target).closest(".container").length) return; 
```

参考：[http ://api.jquery.com/closest/](http://api.jquery.com/closest/)

# java - 在未知的 java.util.Map 类型上强制 Java 到 Scala 显式类型转换

> ID：13129095
> 
> 赞同：3
> 
> 时间：2012-10-29T20:26:16.727
> 
> 标签：java, scala, casting, type-conversion, scala-collections

我最近使用了一些 Java 集合（众所周知的 JavaFX），但我最近遇到了一个问题（[这里](https://stackoverflow.com/questions/13100594/javafx2-and-setcellvaluefactory-with-mapvaluefactory-filling-method-in-scala)发布的另一个问题的结果）。我需要的 JavaFX 接口之一只接受`java.util.Map`，等于`Map[_,_]`在 Scala 中。

我使用 进行转换`asInstanceOf`，但是在计算之后，如果我想将我`java.util.Map[_,_]`的转换强制转换为`Map[String,Double]`我在所有程序中使用的真正的 Scala 类型安全，我该怎么做？

我尝试了各种`java.conversions._`方法`asInstanceOf`都没有成功。

```
//return a java.util.Map 
val row: java.util.Map[_,_] = c.getTableView().getItems().get(0)
//I need a Map[String,Double] in my program
val parameters = row.toMap[String,Double] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T20:51:35.887

这对我有用

```
val javaMap : java.util.Map[_, _] = null
val scalaMap = javaMap.asScala.toMap.asInstanceOf[Map[String, Double]] 
```

记得包括

```
import scala.collection.JavaConverters._ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T21:18:50.517

@monkjack's code compiles, but it gives me a runtime exception:

> java.lang.ClassCastException: scala.collection.JavaConversions$JMapWrapper cannot be cast to scala.collection.immutable.Map

My fix was to use [toMap](http://www.scala-lang.org/api/current/scala/collection/JavaConversions%24.html):

```
import collection.JavaConversions._

...

val scalaMap = javaMap.toMap.asInstanceOf[String, Double] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-22T07:18:42.510

此功能将解决您的问题：

```
import collection.JavaConversions._

import scala.collection.immutable.Map

class Utility {

 def toScalaMap(javaMap: java.util.Map[String, Object]): Map[String, String] = {
   return javaMap.toMap.asInstanceOf[Map[String, String]]
 }
} 
```

# jquery - jQuery .load() 触发时重定向页面

> ID：13129096
> 
> 赞同：1
> 
> 时间：2012-10-29T20:26:21.243
> 
> 标签：jquery, redirect

我已经为此苦苦挣扎了太多小时，希望你们能指出我是否做错了什么。

我有一个 wordpress 页面，它使用 php 从 JSON 提要加载视频，但它加载速度太慢，我不喜欢，我想在使用 jquery 加载页面后运行 php 脚本。

我对其进行了多次测试，当我在空白页面上进行测试时，它按预期工作，但是当我尝试将它直接加载到 wordpress 模板中时，它奇怪地重定向了。

所以，这是我用来加载的基本 jquery：

```
<script type="text/javascript">                                   
        $(document).ready( function() { 
            setTimeout( function() { 
                $('#main-video-list').html('').load('../test.php'); 
            }, 4000); 
        }); 
    </script> 
```

超时只是为了给它一些等待时间，所以我可以很容易地看到它在其他一些东西加载后运行。我似乎找不到解决方法的问题是，每次触发此函数时，它实际上会将整个窗口重定向到正在加载的 url，在本例中为 test.php。

它似乎与发送的脚本无关，因为如果我将 test.php 更改为仅包含一段简单的文本，它的行为方式相同。

（更新：它保留了上一页的 url，但所有元素都消失了。它导致一个空白页面，只有从 test.php 加载的东西）

有没有人经历过这个？我在网上找不到任何人们遇到同样问题的东西，但我也无法确定是什么原因造成的。

任何帮助或见解将不胜感激！

（编辑以根据@nnnnn 的评论更新代码）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-05T00:57:46.020

我有同样的问题。原来，从 .load() 调用返回的 HTML 里面有一个 <script> 标记，它正在执行 document.write(...)。我删除了这个 <script> 并且问题消失了。也许这也是你的问题。

# java - 如何从 servlet 验证连接是使用双向 SSL 建立的？

> ID：13129097
> 
> 赞同：0
> 
> 时间：2012-10-29T20:26:20.793
> 
> 标签：java, servlets, ssl, weblogic, x509

我编写了一个 servlet 过滤器来为 Web 应用程序添加安全性。在某些情况下，我想验证与应用程序服务器的连接是通过双向 SSL (TLS 1.0) 建立的。通常这是通过`HttpServletRequest.getAttribute("javax.servlet.request.X509Certificate")`; 但是，在我的情况下，应用程序服务器前面有一个反向代理，该代理通过`WL-Proxy-Client-Cert`标题。因此，当我检索上述属性时，我得到了最初出现在标头中的客户端证书。我要做的不仅是验证客户端证书，还要确保反向代理和应用程序服务器之间的连接受到双向 SSL 的保护。有没有办法让我从 servlet 进行此验证？我正在使用 WebLogic 10.3.4、Java EE 5。将 WebLogic SSL 端口配置为需要双向 SSL 不是一种选择，因为同一服务器上的某些其他服务只需要单向 SSL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T21:45:03.720

无论客户端是 Web 浏览器还是您的反向代理，检查客户端证书都是相同的。只需获取该`"javax.servlet.request.X509Certificate"`属性并检查它是否与您的反向代理匹配（基于 DN 或颁发者）。

`WL-Proxy-Client-Cert`只有在验证提交给应用服务器的证书是代理的证书后，应用服务器想知道提交给代理的客户端证书是什么时才会发挥作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:37:34.163

您将在过滤器的原始请求中使用`HttpServletRequest.getAttribute("javax.servlet.request.X509Certificate")`的是应用程序服务器看到的证书：这将是反向代理自己的客户端证书，如果它正在使用的话。

根据您的要求，您可以根据需要根据此属性做出与授权相关的决策。您不需要验证您是否信任证书本身，因为身份验证应该由应用程序服务器的 SSL 连接器完成（配置了适当的信任库）。

很可能容器中的大多数应用程序都希望`getAttribute("javax.servlet.request.X509Certificate")`引用用户的证书，而不是代理的证书。

目前尚不清楚您以哪种格式获取`WL-Proxy-Client-Cert`附加标头的值，但我将假设一些 PEM 格式。您应该能够转换此内容并将其放入过滤器中的`javax.servlet.request.X509Certificate`属性中，然后才能到达您的过滤器/逻辑的其余部分。这应该是`java.security.cert.X509Certificate`代表证书链的数组（首先是客户端证书，然后是颁发者）。您可以使用 a [`CertificateFactory`](http://docs.oracle.com/javase/7/docs/api/java/security/cert/CertificateFactory.html)（参见示例）或 BouncyCastle进行转换`PEMReader`。

您可以在那里验证这些证书，但我想说这样做没有什么意义。当用户和代理之间的连接完成时，这应该在反向代理中完成。如果您不信任代理，它仍然可以向您发送它想要的任何证书：您将无法从工作节点检查用户是否拥有该证书的私钥，只有反向代理可以做到这一点。

话虽如此，您当然可以使用以这种方式获得的客户端证书做出授权决策（同样，前提是您信任反向代理：因此，您*必须*验证以一种或另一种方式向您发送该信息的反向代理）。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-29T21:38:05.257

除非有双向 SSL 身份验证，否则不会*有客户端证书。*证书的存在就足以证明。

# java - 敲敲服务器

> ID：13129105
> 
> 赞同：7
> 
> 时间：2012-10-29T20:27:16.317
> 
> 标签：java, sockets, client, port

根据这个网站，[http](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html) ://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html 它说：

服务员：“敲敲！”

客户：“谁在那儿？”

服务器：“德克斯特。”

客户：“德克斯特是谁？”

服务器：“有冬青树枝的德克斯特大厅。”

客户：“呻吟。”

我认为如果服务器正在侦听它正在等待敲门的端口，那么客户端会敲门并且服务器会说谁在那里。我也检查了其他网站，并看到了相同的客户端/服务器响应。

有人可以解释为什么不是这样吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-29T20:33:03.677

该[教程](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html)说：

> 当您成功获得客户端和服务器之间的连接后，您将在屏幕上看到以下文本：
> 
> ```
> Server: Knock! Knock! 
> ```

所以实际上是客户端发起了协议（在网络方面），但服务器发起了笑话（在会话方面）。我同意这相当令人困惑。

如果您将其视为一个笑话服务器，这可能会有所帮助 - 为了得到一个笑话，您必须要求一个！如果反过来，您将拥有一个只听笑话的服务器，这没有那么有用（除非您绝对没有朋友）。

# email - 如何通过 API 获取有关使用 Mandrill 发送的电子邮件的统计信息？

> ID：13129106
> 
> 赞同：8
> 
> 时间：2012-10-29T20:17:04.693
> 
> 标签：email, mandrill

我找不到一种方法来获取与通过 Mandrill 应用程序发送的一封电子邮件相关的所有统计信息？您是否使用 Mandrill api 来获取统计信息？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-10T03:51:22.380

我认为在 1 年多之后的这个时候，现在可以通过 Mandrill“消息调用”基于单个消息进行查询，例如[https://mandrillapp.com/api/docs/messages.JSON.html#method-info](https://mandrillapp.com/api/docs/messages.JSON.html#method-info)

**JSON 请求**

```
{
"key": "example key",
"id": "abc123abc123abc123abc123"
} 
```

**JSON 响应**

```
{
"ts": 1365190000,
"_id": "abc123abc123abc123abc123",
"sender": "sender@example.com",
"template": "example-template",
"subject": "example subject",
"email": "recipient.email@example.com",
"tags": [
    "password-reset"
],
"opens": 42,
"opens_detail": [
    {
        "ts": 1365190001,
        "ip": "55.55.55.55",
        "location": "Georgia, US",
        "ua": "Linux/Ubuntu/Chrome/Chrome 28.0.1500.53"
    }
],
"clicks": 42,
"clicks_detail": [
    {
        "ts": 1365190001,
        "url": "http://www.example.com",
        "ip": "55.55.55.55",
        "location": "Georgia, US",
        "ua": "Linux/Ubuntu/Chrome/Chrome 28.0.1500.53"
    }
],
"state": "sent",
"metadata": {
    "user_id": "123",
    "website": "www.example.com"
},
"smtp_events": [
    {
        "ts": 1365190001,
        "type": "sent",
        "diag": "250 OK"
    }
]
} 
```

某人:)...

# cocoa - NSTableview和属性的计算

> ID：13129107
> 
> 赞同：-1
> 
> 时间：2012-10-29T20:27:24.123
> 
> 标签：cocoa, core-data, nstableview

谁能帮我解决以下问题？

我正在创建一个包含实体的应用程序，称为盐。该实体具有一些属性，例如毫克和毫摩尔（浓度）。

它们可以通过以下公式计算：毫克/摩尔质量（常数）= 毫摩尔。我有一个表格视图，其中包含这些属性的列，如果另一个已填写或更改，我希望应用程序计算一个。

我正在尝试使用`- (void)tableViewSelectionDidChange:(NSNotification *)aNotification`，但似乎无法使其正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T04:35:05.753

我在 GitHub 上放[了一个演示项目](https://github.com/natechan/ConversionTableViewDemo)，可以满足您的描述。该项目利用[绑定](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/cocoabindings/cocoabindings.html)、[`NSArrayController`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSArrayController_Class/Reference/Reference.html)类和注册[依赖键](http://developer.apple.com/library/mac/documentation/cocoa/conceptual/KeyValueObserving/Articles/KVODependentKeys.html#//apple_ref/doc/uid/20002179-SW2)通过[键值观察](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)。`keyPathsForValuesAffecting<Key>`

在演示中，在您编辑表格一列中的值后，另一列中的值也会通过转换因子进行更改。将此演示项目的相关部分调整到您的盐转换表视图场景应该不会太糟糕。

# java - 如何在 JAX-WS 中使用 SSL .cert 文件？

> ID：13129112
> 
> 赞同：0
> 
> 时间：2012-10-29T20:27:31.203
> 
> 标签：java, web-services, jax-ws

我的开发服务器需要连接到另一个开发服务器的 SOAP API，它使用 https，我得到了一个 .cert 文件来使用它。如何设置它以使用 JAX-WS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:21:40.963

最简单的导入方法是将（自签名）证书添加到本地 CA（证书颁发机构）文件中：

```
keytool -import -alias devserver -file certfile.cert -keystore $JAVA_HOME/jre/lib/security/cacerts 
```

替代方法是创建一个新的密钥库文件，并指定系统属性 javax.net.ssl.trustStore

顺便说一句，在大多数 JDK 上，“cacerts”信任文件的默认密码是“changeit”。

要检查证书是否已添加，您可以使用以下命令：keytool -list -v -keystore cacerts -alias devserver

您还需要确保 Web 服务中使用的 URL 与证书的“CN”（通用名称）匹配。

# css - 在其他 css 类中仅使用 css 类的属性之一

> ID：13129114
> 
> 赞同：0
> 
> 时间：2012-10-29T20:27:34.277
> 
> 标签：css

我有一个问题，我需要在其他 css 类中使用 css 类的一个属性。

> .class_a {边距：10px; 宽度：360px；向左飘浮; 颜色：#ffffff；...ETC...}
> 
> .class_b { .class_a 的边距 }

在 class_b 中仅使用 class_a 的边距

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:51:27.267

您在这里最快的选择可能是使用 firebug 或 chrome 开发人员工具找到您想要的样式并将它们添加到您的样式表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T20:28:54.263

您不能使用传统的 CSS 来做到这一点，您需要使用动态方法，例如`LESS`或`SASS`

[少参考](http://lesscss.org/)

[SASS 参考](http://sass-lang.com/)

# javascript - JQuery UI 打破 Flexslider 2 幻灯片动画

> ID：13129116
> 
> 赞同：1
> 
> 时间：2012-10-29T20:27:42.347
> 
> 标签：javascript, jquery, css, user-interface, flexslider

我的 flexslider 和 jquery UI 有一个大问题：

[http://jsfiddle.net/YsvS3/](http://jsfiddle.net/YsvS3/)

当我删除 jquery UI 的包含时，一切正常。

有人能帮我吗 ？

我包括我的滑块如下：

```
var rsjqfs = jQuery.noConflict();
        rsjqfs(window).load(function() {
          rsjqfs('#featuredslider').flexslider({
            animation: "slide",
            controlsContainer: ".headernewsnav",
            slideshow: true,
            controlNav: false,
            nextText: "",
            prevText: "",
            smoothHeight: true,
            animationLoop: true,
            animationSpeed: 500,
            easing: "swing",
            slideshowSpeed: 7000,
            start: function(slider) {
                // resize problem fix
                slider.resize();
            }
          });
        }); 
```

# vbscript - 使用 VBScript 在快捷方式中更改目标

> ID：13129117
> 
> 赞同：3
> 
> 时间：2012-10-29T20:27:46.793
> 
> 标签：vbscript, target, shortcut

我正在尝试创建一个 VBScript 来更改链接中的目标

目前的目标是

```
"C:\Program Files\Hyland\Application Enabler\AEClient.exe" 
```

我希望新的目标是

```
"C:\Program Files\Hyland\Application Enabler\AEClient.exe" \\rrscwpappimg02\Workflow\CWF\AppEnabler\CombinedCWF.xml 
```

这是我到目前为止的脚本。我在第 4 char 78 行不断收到错误消息：

```
Set wsc = WScript.CreateObject("WScript.Shell")
Set lnk = wsc.CreateShortcut(wsc.SpecialFolders("desktop") & "\AE Client.LNK")

lnk.targetpath = "C:\Program Files\Hyland\Application Enabler\AEClient.exe"      \\rrscwpappimg02\Workflow\CWF\AppEnabler\CombinedCWF.xml
lnk.description = "AE Client"
lnk.workingdirectory = "C:\Program Files (x86)\Hyland\Application Enabler\"
lnk.save` 
```

任何帮助将不胜感激。

即使只是创建在桌面上工作的快捷方式的脚本也可以工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-04T18:53:48.033

这是您问题的完整解决方案：

```
Set wsc = WScript.CreateObject("WScript.Shell")
Set lnk = wsc.CreateShortcut(wsc.SpecialFolders("desktop") & "\AE Client.LNK")

lnk.targetpath = "C:\Program Files\Hyland\Application Enabler\AEClient.exe"
lnk.Arguments = "\\rrscwpappimg02\Workflow\CWF\AppEnabler\CombinedCWF.xml"
lnk.save 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T20:40:07.797

The target path must be a string, so you need to change this:

```
lnk.targetpath = "C:\path\to\your.exe" \\server\share\path\to\file.xml 
```

into this:

```
lnk.targetpath = """C:\path\to\your.exe"" \\server\share\path\to\file.xml" 
```

Strings in VBScript must be in double quotes. Nested double quotes inside a string can be escaped by doubling them.

# c++ - 释放一个 > 作为班级成员

> ID：13129120
> 
> 赞同：0
> 
> 时间：2012-10-29T20:27:58.730
> 
> 标签：c++, vector, destructor

我有一个类，我们称它为 Builder。它有一个私有成员声明为

```
vector< vector< Node >> buffers; // Node is a pure data class. 
```

在这个 Builder 类构造函数中，我这样做：

```
buffers = vector< vector< Node >>(amount); 
```

其中“数量”仅在运行时已知。

在构建器类的生命周期中，会在缓冲区成员上调用几个操作。我正在使用的唯一操作是：

```
buffers[i].push_back(Node());
buffers[i].clear(); 
```

我只是在这里添加算法的内容以供参考：

```
// REFINE BUFFERS
// check all levels (bottom up) and group 8 nodes on a higher level
for(int d = maxdepth; d >= 0; d--){
    if(buffers[d].size() == 8){ // if we have 8 nodes
        if(isBufferEmpty(buffers[d])){ 
            buffers[d-1].push_back(Node()); // push back NULL to represent 8 empty nodes
        } else { 
            buffers[d-1].push_back(groupNodes(octree, buffers[d])); // push back parent node
        }
        buffers[d].clear(); // clear the 8 nodes on this level
    } else {
        break; // break the for loop: no upper levels will need changing
    }
} 
```

当 Builder 类对象超出范围时，它会被销毁，它的类成员也会被销毁。当我在VS2010调试模式下，没有问题。在发布模式下，我收到以下错误：“Windows 已触发断点”。

问题在于 STL:vector 规范的这一部分，在 _Destroy 调用中。

```
void _Tidy()
    {   // free all storage
    if (this->_Myfirst != 0)
        {   // something to free, destroy and deallocate it
        this->_Orphan_all();
        _Destroy(this->_Myfirst, this->_Mylast);
        this->_Alval.deallocate(this->_Myfirst,
            this->_Myend - this->_Myfirst);
        }
    this->_Myfirst = 0;
    this->_Mylast = 0;
    this->_Myend = 0;
    } 
```

查看调试器，我可以看到 _Mylast 的值不正确（0x000000000000），这可能是导致此取消分配失败的原因。当我尝试在最后执行 buffers.clear() 时，我得到了相同的结果。（buffers[i].clear() 工作正常）。此外，当我点击“继续”时，我的程序也可以正常工作。

我的算法运行后有一些输出。您看到的是各个向量中的元素数量，以及 buffers[i].begin() 和 buffers[i].end() 指向的地址。“主缓冲区”是指调用 buffers.begin() 和 buffers.end() 时得到的值。

```
 Main Buffer begin: 0000000002068050
  Main Buffer end  : 0000000002068130
  buffers[0] : 0 elements, 0000000002068160 - 0000000002068160
  buffers[1] : 0 elements, 0000000002070080 - 0000000002070080
  buffers[2] : 0 elements, 0000000002068E70 - 0000000002068E70
  buffers[3] : 0 elements, 0000000001F71810 - 0000000001F71810
  buffers[4] : 0 elements, 0000000002068BB0 - 0000000002068BB0
  buffers[5] : 0 elements, 00000000020688F0 - 00000000020688F0
  buffers[6] : 0 elements, 0000000002068370 - 0000000002068370 
```

现在我的问题是，我怎么会损坏_Mylast？（无论如何，我已经破坏了堆）

当我将一个以前只是在全局范围内定义的函数的算法移动到一个类中时，这个问题才开始出现。我怀疑这与 C++ 如何将向量作为类成员处理有关。

我的构建器类应该能够设置一定数量的缓冲区（向量内容），并且只要节点还活着，就可以将节点弹出并推送到这些缓冲区中。这就是我想要达到的目标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T20:35:08.873

`buffers[d-1]`即使`d`为零，您也可以写入。这可能是你的问题吗？有时直到稍后才会检测到越界错误（例如当向量被释放时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T20:44:33.997

确保您的`Node`对象可以被复制并随后正确销毁；一个非常常见的错误是让您包含的对象（在这种情况下`Node`）在其析构函数中执行某些操作，这取决于它拥有其所有底层数据的唯一副本。您可能希望让缓冲区存储 a`shared_ptr<Node>`以防止复制开销，或者至少确保您已经实现`Node::Node(const Node &)`并`Node::operator=(const Node &)`确保您的复制语义是正确的（以及将内部的任何原始指针更改`Node`为`shared_ptr`也是）。

您可能还想阅读[RAII 原则](https://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)，因为这将有助于防止这些错误发生。

# r - R 相当于绘制地图的“等待”

> ID：13129134
> 
> 赞同：0
> 
> 时间：2012-10-29T20:29:10.077
> 
> 标签：r, maps

我想为美国的不同州添加不同的颜色。但是，当我`map("state",."insert coloring condition"...)`按顺序运行所有命令时，我没有得到叠加图，它只是更新地图但不保持着色（如预期的那样）。绘制图时，您可以访问`lines()`，`points()`但它不适用于地图.. 那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:24:17.863

If you read the documentation for `?map` you'll see that there is an `add` argument:

```
logical flag that specifies whether to add to the current plot. 
If FALSE, a new plot is begun, and a new coordinate system is set up. 
```

that should do what you describe.

# c# - LINQ to SQL 查询将两列相乘并计算 SUM

> ID：13129135
> 
> 赞同：2
> 
> 时间：2012-10-29T20:29:11.427
> 
> 标签：c#, .net, linq, linq-to-sql

这是 SQL 查询

```
Select sum(f.Acres*m.credit1), sum(f.Acres*m.credit2), sum(f.Acres*m.credit3)
from first f join model m on f.Id = m.fID
where m.year == 2012 
```

如何在 LINQ 中编写上述 SQL？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:52:24.443

这在 Linq 中有点棘手，因为您需要一个组才能进行聚合。通过对如下所示的虚拟值进行分组，它将起作用：

```
var q = from f in first
        join m in model on f.Id equals m.fID
        where m.year == 2012
        group new { f, m } by 1 into g
        select new 
        { 
           credit1 = g.Sum(x => x.f.Acres * x.m.credit1),
           credit2 = g.Sum(x => x.f.Acres * x.m.credit2),
           credit3 = g.Sum(x => x.f.Acres * x.m.credit3)
        }; 
```

**编辑**
通过阅读您的评论。如果您希望它每年分组，您可以这样做：

```
var q = from f in first
        join m in model on f.Id equals m.fID
        where m.year >= 2014 && m.year <= 2020
        group new { f, m } by m.year into g
        select new 
        { 
           year    = g.Key,
           credit1 = g.Sum(x => x.f.Acres * x.m.credit1),
           credit2 = g.Sum(x => x.f.Acres * x.m.credit2),
           credit3 = g.Sum(x => x.f.Acres * x.m.credit3)
        }; 
```

# c# - 使用 Ionic Zip 库将文件夹添加到 Zip 的根目录

> ID：13129141
> 
> 赞同：6
> 
> 时间：2012-10-29T20:29:18.227
> 
> 标签：c#, zip, dotnetzip

我要做的是使用 Ionic Zip 库（c#）将文件夹和文件的列表全部添加到我的 Zip 文件的根目录中。

这是我到目前为止所拥有的

```
string k = "B:/My Documents/Workspace";
private void button1_Click(object sender, EventArgs e)
{
   using (ZipFile zip = new ZipFile())
   {   
       //add directory, give it a name
       zip.AddDirectory(k);
       zip.Save("t.zip");
   }
} 
```

现在，我希望我的拉链看起来像这样。

*   压缩包
    *   随机文件和文件夹

但它看起来像这样。

*   压缩包
    *   t（文件夹）
        *   随机文件和文件夹

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-29T20:36:06.080

AddDirectory 的默认行为应该将目录的内容添加到 zip 文件的根路径中，而不创建子目录。

AddDirectory 有第二个重载，它添加了一个参数来指定添加文件的路径应该在 zipfile 中。但是由于您希望文件进入根目录，所以这只是一个空字符串。

```
zip.AddDirectory(k, ""); 
```

有关更多信息，请参阅[此文档](http://dotnetzip.herobo.com/DNZHelp/html/ff003409-f713-7b75-e11e-08a92403a6c2.htm)。

这些都不能解释您的子文件夹来自哪里。我怀疑问题出在代码中的其他地方。在调试中运行它并在调用 AddDirectory 时查看“k”等于什么，或者打印出 zip.Entries 集合中的所有“条目”可能很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-19T11:13:13.090

尝试这个

```
using (ZipFile zip = new ZipFile())
    {
        zip.AddFiles(sourcefiles, ""); //For saving things at root of your zip
        foreach (DirectoryInfo objFile in objDir.GetDirectories())
        {
            zip.AddDirectory(objFile.FullName, objFile.Name); ///For saving subdirectories within zip
        }
        zip.Save(pathzipfile + ".zip");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T11:42:49.550

为什么不尝试这样的事情：

```
foreach (var file in System.IO.Directory.GetFiles(k))
{
    zip.AddFile(file);
} 
```

要使目录和文件达到无限深度，请将其与基于`System.IO.Directory.GetDirectories("path")`- 的递归方法相结合，这应该是非常简单的方法。

# ios - 是否可以在自己的应用程序中将实时视频从 iOS 设备流式传输到 iOS 设备？

> ID：13129142
> 
> 赞同：0
> 
> 时间：2012-10-29T20:29:18.710
> 
> 标签：ios, cocoa-touch, http-live-streaming

与面对面时间或 Skype 类似，我希望在我的应用程序中拥有该功能。我找到了 HTTP 实时流，但似乎无法从设备传输到设备。这可能吗？他们有任何类型的 API 吗？这将适用于 iOS 设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T20:29:54.550

HLS 不是一个好主意。使用 HLS 将意味着极高的延迟（至少 2 秒）。我建议使用 SIP+RTP，这是 FaceTime 和其他视频通话系统使用的。

# mpi - 如何找出 InfiniBand 安装路径

> ID：13129156
> 
> 赞同：1
> 
> 时间：2012-10-29T20:29:59.527
> 
> 标签：mpi, infiniband, mvapich2

我想自己编译 MVAPICH2，但不知道在哪里可以找到`psm.h`文件，在默认位置找不到。

任何人都知道我可以使用哪个命令来查找 InfiniBand？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:29:56.453

psm.h 用于 QLogic InfiniPath。在 RHEL 衍生产品上，它应该在 infinipath-psm-devel 包中。不过，您可能没有使用 QLogic。

尝试明确指定 MVAPICH2 通道。对于传统的 mrail 通道，运行 configure as

```
./configure --with-device=ch3:mrail --with-rdma=gen2 
```

或者，对于带有 IB netmod 的 Nemesis 频道

```
./configure --with-device=ch3:nemesis:ib 
```

当然，您需要安装 devel OFED 软件包。

# asp.net - asp.net mvc3 Global.asax 可以接受无控制器和无操作参数吗？

> ID：13129165
> 
> 赞同：1
> 
> 时间：2012-10-29T20:30:54.927
> 
> 标签：asp.net, asp.net-mvc-3, global-asax

我想为 URL 设置一个默认参数，以便当用户自己发送参数时，例如：

[http://mysite.com/argument](http://mysite.com/argument)

该参数首先（不可见地）路由到 SomeController/SomeAction/ID=argument，然后，如果没有找到 404 或 301。

我希望 global.asax RegisterRoutes 将具有此功能。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T20:35:25.100

您可以设置一个路由来执行此操作，但它会干扰 MVC 设置的“通用”方式：

```
routes.MapRoute(
    name: "ControllerlessRoute",
    url: "{id}",
    defaults: new { controller = "SomeController", action = "SomeAction" }
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T20:42:46.583

将“/argument”路由到您的操作并根据您的需要返回有趣的视图或 404/301/302 结果：

```
routes.MapRoute(
    name: "ControllerlessRoute",
    url: "{id}",
    defaults: new { controller = "SomeController", action = "SomeAction" }
);

class SomeController{
  ActionResult SomeAction(id)
  {
     if (NotFound)
     {
        return Custom404View();
     }
     else if (NeedRedirect)
     {
        return new Custom301View{Url:RedrectUrl}; 
     }

     return View();
  }
} 
```

自定义 301 视图的示例可以在[http://forums.asp.net/p/1337938/2700733.aspx](http://forums.asp.net/p/1337938/2700733.aspx)找到。

```
public string Url { get; set; }
public override void ExecuteResult(ControllerContext context)
{
   context.HttpContext.Response.StatusCode = 301;
   context.HttpContext.Response.RedirectLocation = Url;
   context.HttpContext.Response.End();
} 
```

# python - 如何将以下内容与python中的正则表达式匹配？

> ID：13129167
> 
> 赞同：0
> 
> 时间：2012-10-29T20:31:02.200
> 
> 标签：python, regex

假设我有以下字符串：

```
string = "** Hunger is the physical sensation of desiring food.                                      

<br>         Your Hunger Level: Very Hungery<br> Food You Crave: Tomato<br/><br/>" 
```

我希望能够提取出“你的饥饿”和“番茄”。假设无论插入什么特殊字符，我都知道“你的饥饿程度：”和“你渴望的食物”将始终保持不变。

```
"Your Hunger Level:" could be: "Very Hungry", "Hungry", "Not So Hungry"
"Food You Crave:" could be: "Tomato", "Rice and Beans", "Corn Soup" 
```

如何使用正则表达式来匹配它？我尝试了以下方法，但没有任何运气......

```
m = re.match('(.*)([ \t]+)?Your Hunger Level:([ \t]+)?(?P<hungerlevel>.*)(.*)Food You Crave:([ \t]+)?(?P<foodcraving>.*).*', string) 
```

注意：该字符串似乎有很多转义字符，如下所示：

```
string = "** Hunger is the physical sensation of desiring food. <br>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tYour Hunger Level:
Very Hungry \n\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\tFood You Crave: Tomato \n\t\t\t\t\t\t</br>" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T20:46:12.180

我会去：

```
print [map(str.strip, line.split(':')) for line in re.split('<.*?>', string) if ':' in line]
# [['Your Hunger Level', 'Very Hungery'], ['Food You Crave', 'Tomato']] 
```

或者，您可以将其设为`dict`：

```
lookup = dict(map(str.strip, line.split(':')) for line in re.split('<.*?>', text) if ':' in line)
print lookup['Your Hunger Level']
# 'Very Hungry' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T20:38:54.317

我绝对同意使用任何类型的解析器，但以下似乎可行。它只是在你的目标词之后开始，直到它到达 a `<`（我不支持它作为记录，但希望它有效:)）：

```
In [28]: import re

In [29]: s = """** Hunger is the physical sensation of desiring food.
<br>         Your Hunger Level: Very Hungery<br> Food You Crave: Tomato<br/><br/>"""

In [31]: m = re.search(r'Your Hunger Level:([^<]*)<br>.*Food You Crave:([^<]*)', s)

In [32]: m.group(1).strip()
Out[32]: 'Very Hungery'

In [33]: m.group(2).strip()
Out[33]: 'Tomato' 
```

是`strip()`修剪空格 - 不确定字符串的设置是什么，但这是保守的，因此它可以处理冒号和文本之间没有空格的情况。另外，我建议不要使用 Python 关键字作为变量名（`string`在这种情况下是 ）——从长远来看，这会让你的事情变得更容易:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T20:33:44.677

1.  首先，使用解析器解析 HTML。有很多可供您使用，例如美丽的汤、lxml。
2.  其次，在文档中搜索`<br>`标签。
3.  第三，在标签文本中搜索您想要的文本，然后返回该标签。

# firefox - Cufon 不能在 Firefox 或 Chrome 中运行，只能在 IE 中运行

> ID：13129168
> 
> 赞同：1
> 
> 时间：2012-10-29T20:31:05.193
> 
> 标签：firefox, google-chrome, cufon

这个页面包装器是去年创建的，它在 IE/Firefox/Chrome 中运行良好。但是，顶部导航在 IE 中看起来是正确的，但在 Firefox 和 Chrome 中没有提取正确的代码。它应该寻找字体 Effra，而是显示 Arial，它位于 css 中。

导航字体在这里看起来不正确：http: //trips.eastwest.org/site/TR?fr_id=1170& [pg=pfind](http://trips.eastwest.org/site/TR?fr_id=1170&pg=pfind)

它应该看起来像这里的导航：www.eastwest.org

任何见解都会很棒！谢谢！切尔西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:02:26.253

我的 WordPress 网站也有同样的问题。问题可能是空的样式表文件...搜索看起来像在您的 html 源代码中的标签，或者只搜索 href="" 直到找到有罪的样式表。另请查看[https://github.com/sorccu/cufon/wiki/FAQ](https://github.com/sorccu/cufon/wiki/FAQ)上的最后一个问题。

# google-cloud-messaging - 我可以将 GCM 用于基于 Android 2.2 FroYo 的新应用程序吗？

> ID：13129169
> 
> 赞同：0
> 
> 时间：2012-10-29T20:31:04.847
> 
> 标签：google-cloud-messaging

可以的话举个例子。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T07:33:48.640

是的你可以。GCM 从 Android 2.2 开始工作。

示例和文档：http: [//developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html)

# php - 来自存储在 mysql 中的字符串的复选框

> ID：13129170
> 
> 赞同：0
> 
> 时间：2012-10-29T20:31:10.137
> 
> 标签：php

我正在开发一个系统，用户可以选择 7 个复选框 - 每个复选框代表一周中的一天。

如果他们勾选 M,T,W,T,F 然后我将 12345 作为字符串插入数据库 - 如果他们选择 W,T,F,S,SI 将 34567 插入数据库等等。插件一切正常。

然后，当我从数据库中检索数据时，我正在努力向他们展示他们当前选择的日期。我已经从数据库中获取数据并将其分解为单个项目，然后有一个 foreach 循环，但我不知道下一步该怎么做：

```
$wdays_array = str_split($wdays);

foreach($wdays_array as $day) {
 // do something here
} 
```

再往下，我首先使用 HTML 代码插入，我需要更改以检查当他们回来修改他们的选择时是否设置了值：

```
<ul>
 <li><input type="checkbox" name="wdays[]" value="1"/> <label>Monday</label></li>
 <li><input type="checkbox" name="wdays[]" value="2"/> <label>Tuesday</label></li>
 <li><input type="checkbox" name="wdays[]" value="3"/> <label>Wednesday</label></li>
 <li><input type="checkbox" name="wdays[]" value="4"/> <label>Thursday</label></li>
 <li><input type="checkbox" name="wdays[]" value="5"/> <label>Friday</label></li>
 <li><input type="checkbox" name="wdays[]" value="6"/> <label>Saturday</label></li>
 <li><input type="checkbox" name="wdays[]" value="7"/> <label>Sunday</label></li>
</ul> 
```

当用户根据 MySQL 中当前字段中的内容重新加载表单时，如何确保选中正确的复选框？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:41:46.260

有很多方法可以做到这一点，我会尝试

```
<ul>
 <li><input type="checkbox" name="wdays[]" value="1"<?php if(in_array(1, $wdays_array)){echo "checked='checked'";}?>/> <label>Monday</label></li>
 <li><input type="checkbox" name="wdays[]" value="2"<?php if(in_array(2, $wdays_array)){echo "checked='checked'";}?>/> <label>Tuesday</label></li>
 <li><input type="checkbox" name="wdays[]" value="3"<?php if(in_array(3, $wdays_array)){echo "checked='checked'";}?>/> <label>Wednesday</label></li>
....
</ul> 
```

签出[in_array](http://php.net/manual/en/function.in-array.php)

# jquery - 悬停时 mouseenter mouseleave 的 jquery 问题

> ID：13129177
> 
> 赞同：0
> 
> 时间：2012-10-29T20:31:21.793
> 
> 标签：jquery, mouseover, mouseenter

我在元素悬停时遇到 jquery mouseenter / mouseleave 问题，其中的东西不断闪烁。所以它有点工作，但它闪烁。

这是我的代码（准备就绪）：

```
myLinkElement.bind({
    mouseenter: function (e) {
        $(this).parent().removeClass("empty");
        $(this).parent().addClass("waiting");
        $(this).parent().find("#waitingText").html("hello");
        myContainerOverlay.stop(true, true).fadeIn();
    },
    mouseleave: function (e) {
        $(this).parent().addClass("empty");
        $(this).parent().removeClass("waiting");
        $(this).parent().find("#waitingText").html("");
        myContainerOverlay.stop(true, true).fadeOut();
    }
}); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:35:47.327

这是一个建议，但是没有小提琴或任何 html 很难说它是否会起作用，这取决于最初设置元素的类和可见性等：

```
myLinkElement.on('mouseenter mouseleave', function() {
        $(this).parent().toggleClass('empty waiting').find("#waitingText").html("hello");
        myContainerOverlay.fadeToggle();        
});​ 
```

或另一种方法：

```
myLinkElement.on('mouseenter mouseleave', function(e) {
    var state = e.type=='mouseenter';
    $(this).parent().toggleClass('empty waiting')
           .find("#waitingText").html(state?"hello":"");
    myContainerOverlay[state?'fadeIn':'fadeOut']();
});​ 
```

# java - Jquery Datepicker 默认时间 00:00:00 GMT

> ID：13129179
> 
> 赞同：1
> 
> 时间：2012-10-29T20:31:28.520
> 
> 标签：java, javascript, jquery, datepicker, jquery-ui-datepicker

现在，当我使用 jquery 日期选择器时，我选择的任何一天的默认时间都是格林威治标准时间 00:00:00（美国东部标准时间前一天晚上 7 点）。有没有办法可以更改默认时间，这样当我选择任何特定日期时，默认时间将为格林威治标准时间 12:00:00（美国东部标准时间同一天上午 7 点）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:58:44.627

我会试一试，这似乎对我有用，因为我猜这个问题只有在获取日期并尝试将其用于某些事情时才很明显，因为 jQuery datepicker 不显示时间：

```
//prototype a new function on the date object to add hours
Date.prototype.addHours= function(h){
    this.setHours(this.getHours()+h);
    return this;
}
//start a datepicker
$("#dateP​​").datepicker();

//get the date and add 12 hours
var date = $("#dateP").datepicker('getDate').addHours(12);
​ 
```

[**小提琴**](http://jsfiddle.net/cuuns/)

# wordpress - 无限的wordpress循环

> ID：13129180
> 
> 赞同：0
> 
> 时间：2012-10-29T20:31:36.630
> 
> 标签：wordpress

我对 Wordpress 开发很陌生。我有一个单页的代码，它只在无限循环中输出最新的帖子。随着同一篇文章被一次又一次地调用，页面变得越来越长。如何让它按顺序显示所有帖子？

```
<?php
/*
 * Template Name: Portfolio
 */
?>
   <?php include 'header.php'; ?>

    <div id="content">
        <div id="content_inner">
            <!--start the loop -->
            <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
                <!--get posts-->
                <?php query_posts('cat=uncategorized') ?>
                <!--display the content-->
                <?php the_content(); ?>
            <!--end the loop-->
            <?php endwhile; else: ?>
            <p><?php _e('Sorry, no posts matched your criteria.'); ?></p>
            <?php endif; ?>
        </div>
    </div>

    <?php include 'footer.php'; ?>

    </div> <!--end allwrap--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T20:33:08.640

当您调用`query_posts`它时，它会重新对数据库执行查询。在你的循环中有这个是你无限循环的原因。

您需要将以下行移到循环之外。

`<?php query_posts('cat=uncategorized') ?>`

这会给你这样的东西：

```
<!--get posts-->
<?php query_posts('cat=uncategorized') ?>
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>

             <!--display the content-->
            <?php the_content(); ?>
            <!--end the loop-->
<?php endwhile; else: ?>
            <p><?php _e('Sorry, no posts matched your criteria.'); ?></p>
<?php endif; ?>
<?php wp_reset_query(); ?> 
```

添加也很重要`wp_reset_query()`

# xaml - 将窗口的属性绑定到 XAML 中它自己的资源之一？

> ID：13129185
> 
> 赞同：3
> 
> 时间：2012-10-29T20:32:09.550
> 
> 标签：xaml, binding

当我有一个用户控件具有我想绑定到 XAML 中的资源的属性时，我通常在包含该控件的控件或窗口中设置该绑定。例如：

```
<local:MyNeatControl MyProperty="{StaticResource ...}" /> 
```

这会将 MyNeatControl 对象的该实例的 MyProperty 属性设置为父控件中的资源。

但是，当我有一个窗口时，我想将它的属性之一绑定到它自己的资源之一时该怎么办？在代码中很容易做到：

```
public MainWindow()
{
    this.Loaded += new RoutedEventHandler(this.MainWindow_Loaded);
    ...
}

void MainWindow_Loaded(object sender, RoutedEventArgs e)
{
    this.MyProperty = this.Resources["MyProperty"] as MyProperty;
    ...
} 
```

但这让我很困扰。我宁愿在 XAML 中绑定属性，也不愿在代码中设置它。

我该怎么做？我尝试将 MyProperty 声明添加为元素的属性。但我收到一个错误：

```
The property 'MyProperty' was not found in type 'Window'. 
```

我缺少一些简单的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:10:53.923

尝试使用`DynamicResource`而不是`StaticResource`.

例子：

```
<Window x:Class="BindingToOwnResources.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:System="clr-namespace:System;assembly=mscorlib"
        Title="MainWindow" Height="350" Width="{DynamicResource WindowWidth}">
    <Window.Resources>
        <System:Double x:Key="WindowWidth">300</System:Double>
    </Window.Resources>
    <Grid>

    </Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:11:53.680

基本问题是数据类型。

当我在 XAML 文件中声明子元素时，该子元素的声明具有该子元素的类型。这声明了一个 MyNeatControl 类型的对象，在它的声明中，我可以访问该类型的属性：

```
<local:MyNeatControl MyProperty="{StaticResource ...}" /> 
```

但是，当我声明一个类型时，无论是窗口还是控件，XAML 文件中对象的类型都是它的父对象的类型。这定义了一个继承自 MyWindowBase 的 MyWindow 类，但在 XAML 中，范围内的类型是 MyWindowBase，**而不是**MyWindow：

```
<local:MyWindowBase
        x:Class="MyProject.MyWindow"
        ....
        >
    <local:MyWindowBase.Resources>
        ...
    </local:MyWindowBase.Resources>
    ...
</local:MyWindowBase> 
```

那么该怎么办？回避问题。使用样式：

```
<local:MyWindowBase>
    <Style TargetType="local:MyWindow">
        <Setter Property="MyProperty" Value="{StaticResource ..}" />
    </Style>
</local:MyWindowBase> 
```

这会将 MyWindow 的“MyProperty”属性设置为指定的资源。

# objective-c - 如何通过 Interface Builder 在 Objective-C 中实现搜索栏

> ID：13129187
> 
> 赞同：0
> 
> 时间：2012-10-29T20:32:27.693
> 
> 标签：objective-c, xcode, plist, tableview, uisearchbar

我有这个列表：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>City 1</key>
    <array>
        <dict>
            <key>area</key>
            <string>City 1</string>
            <key>shop</key>
            <string>Shop 1</string>
            <key>location</key>
            <string>Location 1</string>
            <key>coordinates</key>
            <string>14.66592, 121.03139</string>
        </dict>
        <dict>
            <key>area</key>
            <string>City 1</string>
            <key>shop</key>
            <string>Shop 2</string>
            <key>location</key>
            <string>Location 2</string>
            <key>coordinates</key>
            <string>14.67097, 121.03766</string>
        </dict>
    </array>
    <key>City 2</key>
    <array>
        <dict>
            <key>area</key>
            <string>City 2</string>
            <key>shop</key>
            <string>Shop 1</string>
            <key>location</key>
            <string>Location 1</string>
            <key>coordinates</key>
            <string>14.65549, 120.98280</string>
        </dict>
        <dict>
            <key>area</key>
            <string>City 2</string>
            <key>shop</key>
            <string>Shop 2</string>
            <key>location</key>
            <string>Location 2</string>
            <key>coordinates</key>
            <string>14.65549, 120.98280</string>
        </dict><dict>
            <key>area</key>
            <string>City 2</string>
            <key>shop</key>
            <string>Shop 3</string>
            <key>location</key>
            <string>Location 3</string>
            <key>coordinates</key>
            <string>14.65549, 120.98280</string>
        </dict>
    </array>
</dict>
</plist> 
```

如何在我的表格视图中实现一个搜索栏，其中填充了标题为键“商店”的行？这是我的搜索栏上的一些代码片段。

```
#pragma mark - Custom methods

- (void)filterContentForSearchText:(NSString *)searchText scope:(NSString *)scope
{
    NSPredicate *resultPredicate = [NSPredicate predicateWithFormat:@"SELF contains[cd] %@", searchText];
    self.searchResultsArray = [self.theArray filteredArrayUsingPredicate:resultPredicate];
}

#pragma mark - SearchDisplayController methods
- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
{
    [self filterContentForSearchText:searchString
                               scope:[[self.searchDisplayController.searchBar scopeButtonTitles]
                                      objectAtIndex:[self.searchDisplayController.searchBar selectedScopeButtonIndex]]];

    return YES;
}

- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchScope:(NSInteger)searchOption
{
    [self filterContentForSearchText:[self.searchDisplayController.searchBar text]
                               scope:[[self.searchDisplayController.searchBar scopeButtonTitles]
                                      objectAtIndex:searchOption]];

    return YES;
} 
```

我对如何定义搜索栏用于查找商店名称的“theArray”数组感到困惑。我什至尝试创建另一个包含所有商店名称的 plist 文件，但它给了我一个错误：

> NSRangeException'，原因：'-[__NSCFArray objectAtIndex:]：索引（1）超出范围（1）

所以我选择不使用这种方法并坚持我现有的 plist。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-01T18:18:09.087

SELF搜索所有数组，将其更改为shop。

NSPredicate *resultPredicate = [NSPredicate predicateWithFormat:@"shop contains [cd] %@", searchText];

# sql - 包含来自链接服务器的插入的 WHILE 循环变得越来越慢

> ID：13129191
> 
> 赞同：1
> 
> 时间：2012-10-29T20:32:33.217
> 
> 标签：sql, while-loop, linked-server

这真让我抓狂。我有一个 WHILE 循环，它从链接服务器中获取 1 行并将其放入本地表中。逻辑工作正常，但循环会减慢处理的行数。

```
SELECT @max_id = MAX(id), @min_id = MIN(id)
FROM #ids
    WHILE @min_id <= @max_id
    BEGIN
        SET @sql = 'SELECT row1, row2, row3 FROM [Linked Server Table]'

        INSERT INTO [Local Table]
        (row1 ,row2, row3)
        EXEC(@sql)

        SELECT @min_id = MIN(id)
        FROM #id
        WHERE id > @min_id
    END 
```

感觉好像有什么东西在记忆中堆积并减慢它的速度，但我不知道是什么。

到目前为止，我已经尝试过：-

将 INSERT 变成 SP

每 100 行添加一个 CHECKPOINT

将恢复模式更改为简单

将链接服务器行插入临时表或表变量

本地表上除了 PK 之外没有索引。链接服务器是一个 Atomix 数据库。

任何人都可以提出任何理由为什么这会变得越来越慢？

小号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T20:53:15.950

在我看来，这可能是在数据库引擎和远程链接服务器之间传输网络流量的质量问题。我强烈建议您限制链接服务器 using`"TOP"`子句中的 select 子句，这意味着从网络中检索较小的包，这样质量差的包对速度的影响会降低。

就我的经验而言，`"WHILE"`它本身也很慢。一会儿做数据修改，就是让引擎在插入之前启动一个事务，然后进行插入和传输数据，最后关闭事务并释放所有分配的资源。您强制引擎不要在关闭和操作开始之间等待。我应该建议你`"WAIT FOR DELAY"`在 while 结束前使用几毫秒的值，插入完成后，它不会让引擎喘不过气来！

干杯

# c# - 3 个可能的结尾应该使用什么正则表达式模式

> ID：13129192
> 
> 赞同：-1
> 
> 时间：2012-10-29T20:32:33.617
> 
> 标签：c#, regex

这是一个令人烦恼的问题。我有一段来自 Beyond Compare 脚本报告的文本。

```
Picture Compare
Produced: 10/17/2012 9:42:25 AM
Ignoring Unimportant
Left file: K:\HDA_FIN\user\JMan\All\A-0001.jpg     Right file: K:\HDA_FIN\user\JMan\All\B-0001.jpg
3454945 same pixel(s)
2154 ignored unimportant difference pixel(s)
2741 important difference pixel(s) 
```

当脚本比较文件夹中匹配的 jpeg 时，这会一遍又一遍地重复。但是有些 jpeg 是 100% 相同的，因此它们没有忽略不重要或重要的差异。有些会有相同的差异和重要的差异，但没有不重要的，等等。所以我试图在下一个“图片比较”开始之前捕获以“图片比较”开头并以最后一个“像素”结尾的匹配项再次。

**我尝试过的**：

我正在做的不是一个丑陋的方法：我使用流阅读器，而 !EndOfStream，我执行 sr.ReadLine() 并将每一行添加到列表中。然后，我使用 for 循环遍历列表并应用一系列 if 语句来确定循环中的当前字符串和接下来的几个字符串是否与我要查找的内容匹配，如果是，我将它们绑定到一个对象。但肯定正则表达式要简单得多。

```
 var lineByLine = new List<string>();
    while (!sr.EndOfStream)
    {
        string line = sr.ReadLine();
        sb.AppendLine(line);
        if (line.Trim().Length > 0)  // && !line.Contains("picture-report layout"))
        {
            lineByLine.Add(line);
        }
    }

    Contents = sb.ToString();

    //get the report blocks

    for (int i = 0; i < lineByLine.Count; i++)
    {
        Block block;
        string[] lines = { "", "", "", "", "", "", "" };

        //does line contain pic compare? if so, this is the start of an object
        if (lineByLine[i].Contains("Picture Compare"))
        {
            lines[0] = lineByLine[i]; //start line
            block = new Block();
            lines[1] = lineByLine[i + 1]; //produces
            lines[2] = lineByLine[i + 2]; //subheading
            if (lineByLine[i + 3].Contains("Left"))
            {
                lines[3] = lineByLine[i + 3]; //file
                if (lineByLine[i + 4].Contains("same pixel(s)"))
                {
                    lines[4] = lineByLine[i + 4]; //same
                    if (lineByLine[i + 5].Contains("ignored unimportant"))
                    {
                        lines[5] = lineByLine[i + 5];
                        if (lineByLine[i + 6].Contains(" important difference"))
                        {
                            lines[6] = lineByLine[i + 6];
                        }
                    }
                }
                else if (lineByLine[i + 4].Contains("ignored unimportant"))
                {
                    lines[5] = lineByLine[i + 4];
                    if (lineByLine[i + 5].Contains(" important difference"))
                    {
                        lines[6] = lineByLine[i + 5];
                    }
                }
                else if (lineByLine[i + 4].Contains(" important difference"))
                {
                    lines[6] = lineByLine[i + 4];
                }
            }
            Blocks.Add(new Block(lines[0], lines[1], lines[2], lines[3], lines[4], lines[5], lines[6]));
        }
    }

}
finally
{
    sr.Close();
} 
```

这可行，但我正在尝试重构并使其更清洁。我试过这个：

```
 var matches = Regex.Matches(cr.Contents, "(Picture Compare)(.*?)(pixel)", RegexOptions.IgnoreCase | RegexOptions.Singleline | RegexOptions.ExplicitCapture); 
```

- 但它在所有情况下都停在相同的像素上。我需要更贪婪的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T20:43:34.373

您可以尝试找到下一个开始，而不是找到结束：

```
@"Picture Compare(?:(?!Picture Compare).)*" 
```

这匹配`Picture Compare`然后尽可能多的字符，只要它们不开始一个新的`Picture Compare`（这就是负前瞻的目的）。这应该只是给你所有这些块。

然后在每个块上，您可以进行更简单的扫描以获取您感兴趣的值（不幸的是，我不知道哪些是，否则我可能还有另一个正则表达式`:P`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T20:51:31.707

尝试使用正则表达式模式

```
Picture Compare\n?(?:(?!Picture Compare)[^\n]*\n?)* 
```

所以你阅读了行`Picture Compare`和所有以下不以开头的行`Picture Compare`

# ruby-on-rails - Ruby 包括检查和迭代

> ID：13129194
> 
> 赞同：1
> 
> 时间：2012-10-29T20:32:47.117
> 
> 标签：ruby-on-rails, ruby, arrays, loops

我有一个数组：

```
art_groups_arr = [] 
```

我从中得到它：

```
art_groups_arr << a.art_name (in loop) 
```

当我尝试检查是否包含时，我得到`can't convert Array into String`

我试过：

```
n2.art_group.include?(art_groups_arr.map { |e| e}) 
```

在我看来，我的数组看起来像：

```
["Амортизатор", "Защитный колпак / пыльник, амортизатор"] 
```

如何正确循环和检查`include?`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T20:55:18.623

如果要检查一个数组的每个元素以查看它是否在另一个数组中：

```
art_groups_arr.each do |group|
  n2.art_group.include? group
end 
```

如果您想查看数组是否包含完全相同的元素，您可以这样做：

```
art_groups_arr.sort == n2.art_group.sort 
```

# java - 如何使用 java.util.ListIterator 输出包含对象的链接列表？

> ID：13129202
> 
> 赞同：0
> 
> 时间：2012-10-29T20:33:04.960
> 
> 标签：java

嗨，我遇到了这个问题，我不知道如何处理...我有一个链接列表，它存储了可以正常工作的对象。但是现在我正在尝试使用迭代器显示链表的内容，我知道这不会像

```
ListIterator<String> iterator = LibraryUser.listIterator();  

iterator = LibraryUser.listIterator();
while (iterator.hasNext())
 System.out.println(iterator.next()); 
```

因为类型......有没有办法做到这一点？

啊对！我需要覆盖 toString 不是...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:35:24.240

如果您只知道 LibraryUser 包含的实例`Object`（也就是说，您不知道它们是`String`实例），您可以使用：

```
ListIterator<Object> iterator = LibraryUser.listIterator();
while (iterator.hasNext()) {
    System.out.println(String.valueOf(iterator.next()));
} 
```

或者，更简单地说：

```
for (Object item : theList) {
    System.out.println(String.valueOf(item));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T20:36:03.727

您的代码应该可以正常工作：

```
LinkedList<String> l = new LinkedList<>();
        l.add("aaa");
        l.add("sdjs");
        ListIterator<String> itr = l.listIterator();
        while(itr.hasNext()){
            System.out.println(itr.next());
        } 
```

上面的代码打印：

> aaa
> sdjs

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T20:39:01.680

另一种方法是考虑使用增强的 for 循环。就像是：

```
LinkedList<Object> list = new LinkedList<Object>();
list.add("abc");
list.add("def");
for(Object element: list){
    System.out.println(element);
} 
```

# jquery - jquery xml解析问题

> ID：13129205
> 
> 赞同：0
> 
> 时间：2012-10-29T20:33:17.210
> 
> 标签：jquery, xml, parsing

我的 XML 无法正确解析的问题。我无法从我的 xml 中看到我的数据。我的 xml 也是正确的。有没有人看到任何可能是问题的地方。

```
 $(document).ready(function() {       
          $.get('http://www.mytasteofitaly.com/menu/menu-1a.xml', function(data) {
                $(data).find('menu').each(function() {
                var $main = $(this);
                $main.find('menu').each(function() {
                   var $menu = $(this);
                   var id = $menu.attr('id');
                   var head = $menu.find('menuhead').text();

                   var html = '<div class="mainmen" id="main_' + id + '">';
                   html += '<table class="menus"><th><h1>' + head + '</h1></th>';
                   $menu.find('menuitem').each(function() {

                   var name = $menuitem.find('menuname').text();
                   var desc = $menuitem.find('menudesc').text();
                   var price = $menuitem.find('price').text();
                   var desprice = $menuitem.find('price2des').text();
                   var price2 = $menuitem.find('price2').text();

                    html += '<tr class="menu_item">';
                    html += '<td class="h-menu">' + name + '</td>';
                    html += '<td class="d-menu">' + desc + '</td>';
                    html += '<td class="price">' + price + '</td>';
                    html += '<td class="desprice">' + desprice + '</td>';
                    html += '<td class="price2">' + price2 + '</td>' + '</tr>';

                    $('#menuitem').append($(html));
                });
           });
        });
    });
}); 
```

# php - 在 Shopify 中修改 404.Liquid

> ID：13129212
> 
> 赞同：1
> 
> 时间：2012-10-29T20:34:01.543
> 
> 标签：php, shopify

我在 404.liquid 中修改 HTML 时遇到问题。

这是我要发送的 JSON： http: [//cl.ly/image/3r0l3w2q2E0S](http://cl.ly/image/3r0l3w2q2E0S)

这是我的回应：

```
array(1) { ["error"]=> string(157) "lexical error: invalid string in json text. ODE: START -->n 
```

我认为它失败了，因为 HTML 破坏了 JSON。Shopify 是否需要某种编码来防止 JSON 出现此类错误？

请指教。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:14:34.083

这个问题已被解决。这是由于 PHP 适配器中的 stripslashes() 函数造成的。以下是修复细节：

[https://github.com/nyalex/shopify_api/commit/029d5025b2d5acfa376d2160cbd9845189d9a06d](https://github.com/nyalex/shopify_api/commit/029d5025b2d5acfa376d2160cbd9845189d9a06d)

# c++ - 将项目添加到列表问题

> ID：13129218
> 
> 赞同：2
> 
> 时间：2012-10-29T20:34:43.103
> 
> 标签：c++

我正在创建一个简单的问题。我尝试将学生添加到一个列表中，然后将其拆分为两个列表。我创建了一个将节点添加到列表的通用方法，但它似乎不能正常工作。这是我尝试过的。我做错了什么？

```
int main()
{
   for(int i=0;i<NR_STUDENTS;i++)
   {
      Student *studToAdd=new Student; 
      cout<<"Student #"<<i<<endl;
      cout<<"Name:";
      cin>>studToAdd->name;
      cout<<"Grade:";
      cin>>studToAdd->grade;
      Add(studToAdd); 
  }
  Split();
  Print();
 }

#include "students.h"

Node *allFirstNode;
Node *admitedFirstNode;
Node * rejectedFirstNode;

void AddNodeToList(Node *firstNode, Student *studToAdd)
{
    Node *nodeToAdd=new Node;
    nodeToAdd->student=studToAdd;
    nodeToAdd->next=NULL;

    if(firstNode==NULL)
    {
        firstNode=nodeToAdd;
    }
    else
    {
        Node *temp;
        temp=firstNode;
        while(temp->next != NULL)
        {
            temp=temp->next;
        }
        temp->next=nodeToAdd;
    }
}
void addStudent(Student *studentToAdd)
{
    AddNodeToList(allFirstNode,studentToAdd);
}

void split()
{
    Node *temp=allFirstNode;
    while(temp->next != NULL)
    {
        Student *currentStud=temp->student;
        if(currentStud->grade < GR)
        {
            AddNodeToList(rejectedFirstNode,currentStud);
        }
        else    
        {
            AddNodeToList(admitedFirstNode,currentStud);
        }
    }
}

void PrintList(Node *first)
{
    Node *temp=first;
    while(temp!=0)
    {
        cout<<temp->student->name<<":"<<temp->student->grade<<endl;
        temp=temp->next;
    }
}
void Print()
{
   PrintList(admitedFirstNode);
   PrintList(rejectedFirstNode);
}
    #include <iostream>
#include <string>

using namespace std;

const int NR_STUDENTS=2;
const double GR=5.0;

struct Student
{
    string name;
    double grade;
};

struct Node
{
    Student *student;
    Node *next;
};

extern Node *allFirstNode;
extern Node *admitedFirstNode;
extern Node * rejectedFirstNode;

void addStudent(Student *studentToAdd);
void split();
void sort();
void print(Node *firsNode); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T20:46:47.470

您需要通过引用调用（您不需要更改任何其他内容）：

```
void AddNodeToList(Node* &firstNode, Student *studToAdd) 
```

# c++ - 移动 std::vector 时是否需要保留容量？

> ID：13129219
> 
> 赞同：20
> 
> 时间：2012-10-29T20:34:46.257
> 
> 标签：c++, c++11, stdvector, language-lawyer, move-semantics

考虑以下代码：

```
std::vector vec;
vec.reserve(500);
size_t cap = vec.capacity();

std::vector newVec = std::move(vec);
assert(cap == newVec.capacity()); 
```

在您遇到的几乎任何实现中，这都会起作用。我不在乎实现是做什么的。我想知道标准*要求*什么。搬家的`vector`容量和原来的一样吗？还是断言会触发？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-29T20:49:30.197

查看标准，移动构造函数似乎不需要任何东西，但是正如@amaurea 所说，如果移动构造函数尝试分配或释放内存，它将完全违背移动语义的目的，所以我希望容量在所有实现中保持不变。

* * *

**23.2.1 一般容器要求**

*表达*

```
X u(a);
X u = a; 
```

*断言/注释前置/后置条件*

要求：`T`是否可 CopyInsertable 到 X 中（见下文）。
邮政：`u == a`

* * *

该标准仅要求`newVec == vec`. 由于不考虑容量`std::vector::operator==`，`newVec`所以不一定要具有相同的容量`vec`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-29T21:11:44.453

移动构造函数的 C++11 标准要求`std::vector`是（表 99 - 分配器感知容器要求）：

```
X(rv)
X u(rv) 
```

*   分配器的移动构造不应通过异常退出
*   `rv`帖子：你应该有与此构造之前相同的元素；的值`get_allocator()`应与`rv.get_allocator()`本次施工前的值相同。
*   复杂性：常数

这里对容量没有要求/保证。但是我们可以得出结论，恒定的复杂性隐含地否认了任何重新分配。除了重新分配之外，我看不到任何其他改变容量的*合乎逻辑的理由。*所以应该是一样的。

从另一个角度来看，如果移动的向量是空的，那么忽略它并默认构造本身是完全合法的。这仍然是 O(1)，因为它不需要任何每个元素的构造。（感谢[Nicol Bolas](https://stackoverflow.com/users/734069/nicol-bolas)的这个问题）。

实现也可能使用函数`hint`参数将容量缩小到大小`std::allocator::allocate`：

```
pointer allocate(size_type, allocator<void>::const_pointer hint = 0); 
```

未指定使用`hint`，但如果实现需要，则旨在帮助本地化。所以一些复杂的解决方案可能会传递向量存储指针`hint`并使用`realloc`它来缩小容量。

**结论：**看起来标准并不能保证移动时保持容量`std::vector`，存储可能会缩小。

# iphone - 获取 Null（在 ViewController 之间传递数据）

> ID：13129222
> 
> 赞同：0
> 
> 时间：2012-10-29T20:34:55.727
> 
> 标签：iphone, ios, string

我刚刚在 SBSettingsViewController 中创建了一个 NSString 变量，我想在我的 SBViewController 中获取它。

我知道..对此有很多回应，但我真的不知道我做错了什么。我只是使用它获得一个（空）值。

谢谢！

SBViewController.h：

```
#import <UIKit/UIKit.h>

@interface SBViewController : UIViewController {
    NSString *gameMode;
}

@property (retain, nonatomic) NSString *gameMode;

- (IBAction)geraManobra; 
```

SBViewController.m

```
#import "AppDelegate.h"
#import "SBViewController.h"
#import "SBSettingsViewController.h"

@interface SBViewController ()

@end

@implementation SBViewController

@synthesize gameMode;

- (IBAction)geraManobra {
    NSLog(@" %@",gameMode);
} 
```

SBSettingsViewController.h

```
#import <UIKit/UIKit.h>
#import <FacebookSDK/FacebookSDK.h>

@interface SBSettingsViewController : UITableViewController

- (IBAction)selectModeFlat; 
```

SBSettingsViewController.m

```
#import "AppDelegate.h"
#import "SBSettingsViewController.h"
#import "SBViewController.h"

@interface SBSettingsViewController ()

@end

@implementation SBSettingsViewController

- (IBAction)selectModeFlat {
    SBViewController *sbView = [[SBViewController alloc] init];
    sbView.gameMode = @"Flat Ground";
    NSLog(@" %@",sbView.gameMode);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T22:39:16.853

我想最简单的方法是创建一个属性

```
@property (assign, nonatomic) SBViewController *sbViewController; 
```

在中`SBSettingsViewController`，使用 TabBarController 内某处的现有 SBViewController 对象对其进行初始化，然后在您的中，`selectModeFlat`您将能够`gameMode`使用类似的东西设置其属性

```
self.sbViewController.gameMode = @"Something" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T03:01:11.230

以下方法没有效果（除了浪费时间）：

```
- (IBAction)selectModeFlat {
    SBViewController *sbView = [[SBViewController alloc] init];
    sbView.gameMode = @"Flat Ground";
    NSLog(@" %@",sbView.gameMode);
} 
```

原因是它`sbView`是一个局部变量——它的作用域只到方法结束。ARC 将在关闭时删除创建的 SBViewController `}`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T04:37:52.550

```
- (IBAction)selectModeFlat {
    SBViewController *sbView = [[SBViewController alloc] init];
    sbView.gameMode = @"Flat Ground";
    NSLog(@" %@",sbView.gameMode);
} 
```

它新创建 SBViewController，SBViewController 在 SBSettingsViewController 之前运行，您在创建“sbView”后调用操作

```
- (IBAction)selectModeFlat {
    SBViewController *sbView = [[SBViewController alloc] init];
    sbView.gameMode = @"Flat Ground";
   [self sbView.geraManobra];
} 
```

它让人想起“geraManobra”动作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T11:35:18.617

据我了解，您的 SBSettingsViewController 可以在 SBViewController 之前创建，因此，将您的属性移动到应用程序委托并使用类似的东西访问可能是个好主意

```
MyApplicationDelegate *appDelegate = (MyApplicationDelegate *)[[UIApplication sharedApplication] delegate]; 
appDelegate.gameMode = @"Something"; 
```

无论如何，我认为你需要一些更可靠的东西才能让它工作，比如一个可以从你的控制器访问你的游戏设置的对象。但我想第一次尝试应用程序委托属性就足够了。

# unit-testing - Grails 项目设置和约定 - 测试不是真正服务的 spring 组件

> ID：13129227
> 
> 赞同：2
> 
> 时间：2012-10-29T20:35:11.527
> 
> 标签：unit-testing, grails, conventions

起初我不得不说我对 Spring 的背景比 grails 更多，当你没有卡片时，后来的约定优于配置有点令人不安。

考虑一个 grails 项目。

如果我有一个不是真正的服务，而是另一个对象的一部分的“组件”（将在 spring 上下文中的 POJO 的 Spring 术语），我应该把它放在哪里？在 src/groovy 或 grails/services 中？看起来第二个选项为我编写测试提供了更多权力，因为 Grails 将服务视为：

> Grails 中的服务是将大部分逻辑放入应用程序的地方

我觉得 grails/services 目录是所有 Springified bean 的一种包......

下一个问题，如果我需要在 Spring 上下文中为该服务提供一些伴生 bean，我如何对我的组件/服务进行**单元测试。**这个伙伴不是服务，而是其他在运行时必需的组件，但我可以使用默认实现。

使用 spring 我可以简单地使用这种注释为我的测试创建一个小的上下文：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "/simple-job-launcher-context.xml", 
                                    "/jobs/skipSampleJob.xml" }) 
```

如何对 Grails 做同样的事情？我想知道是否有一种首选的方法来创建一个可以重用和组合的小型 Spring 上下文，用于测试，就像我可以使用**@ContextConfiguration**注释一样。

由于 grails 的所有隐藏约定，我害怕不使用正确的方式（如果存在的话），但是对它们的清晰解释促使我直接使用 Spring。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:29:01.240

将它放在 src/groovy 或 src/java 中（取决于实现语言）是一种常见的方法，并且在我的经验中效果很好。

就单元测试而言，如果您需要一个“伴侣 bean”来进行测试，那么它就不是真正的单元测试。模拟对象怎么样？有几个可以与 grails 一起使用的模拟/测试库——Spock 是我个人的最爱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:35:24.887

我有 RTFM，答案就在那里，有点淹没在页面中间：http: [//grails.org/doc/2.0.x/guide/testing.html](http://grails.org/doc/2.0.x/guide/testing.html)

**测试 Spring Bean**

> 使用 TestFor 时，只有一部分可用于正在运行的 Grails 应用程序的 Spring bean 可用。如果您希望提供额外的 bean，您可以使用 GrailsUnitTestMixin 的 defineBeans 方法：

```
class SimpleController {
    SimpleService simpleService
    def hello() {
        render simpleService.sayHello()
    }
}
void testBeanWiring() {
    defineBeans {
        simpleService(SimpleService)
    }
controller.hello()
assert response.text == "Hello World"
} 
```

* * *

> 控制器由 Spring 自动连接，就像在运行的 Grails 应用程序中一样。如果您实例化控制器的后续实例，甚至会发生自动装配：

```
void testAutowiringViaNew() {
    defineBeans {
        simpleService(SimpleService)
    }
def controller1 = new SimpleController()
    def controller2 = new SimpleController()
assert controller1.simpleService != null
    assert controller2.simpleService != null
} 
```

# objective-c - Objective C - 手动数组 FIFO 队列

> ID：13129233
> 
> 赞同：3
> 
> 时间：2012-10-29T20:35:42.430
> 
> 标签：objective-c, ios, arrays

只是想知道在不使用 NSMutalbleArray 的情况下创建手动数组的最佳方法，我一直在研究可能的最佳解决方案，但没有一个优雅的答案，您认为，在 Objective C 中，从头开始创建 NSMutableArray 样式对象的最佳方法是什么？使用 FIFO 队列作为最终解决方案，即使是基本的数组结构也会是一个很好的提示！谢谢，约翰

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-29T20:41:19.720

NSMutableArray 上的类别是 IMO 最简单的方法。我有一个用于堆栈 (LIFO) 和队列 (FIFO) 的类别

标题

```
#import <Foundation/Foundation.h>

@interface NSMutableArray (QueueStack)
-(id)queuePop;
-(void)queuePush:(id)obj;
-(id)stackPop;
-(void)stackPush:(id)obj;
@end 
```

执行

```
#import "NSMutableArray+QueueStack.h"

@implementation NSMutableArray (QueueStack)
// Queues are first-in-first-out, so we remove objects from the head
-(id)queuePop {
  @synchronized(self)
  {
    if ([self count] == 0) {
        return nil;
    }

    id queueObject = [[[self objectAtIndex:0] retain] autorelease];

    [self removeObjectAtIndex:0];

    return queueObject;
  }
}

// Add to the tail of the queue
-(void)queuePush:(id)anObject {
  @synchronized(self)
  {
    [self addObject:anObject];
  }
}

//Stacks are last-in-first-out.
-(id)stackPop {
  @synchronized(self)
  {
    id lastObject = [[[self lastObject] retain] autorelease];

    if (lastObject)
        [self removeLastObject];

    return lastObject;
  }
}

-(void)stackPush:(id)obj {
  @synchronized(self)
  {
    [self addObject: obj];
  }
}
@end 
```

制作和使用队列：

```
NSMutableArray *queue = [NSMutableArray array];

//Put an item in the queue
[queue queuePush:myObj];

//Retrieve an item, (this will be the first one)
MyCoolObject *myObject = [queue queuePop]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-18T13:21:20.903

采用FIFO方式的数组：

```
if (mutArr.count == 5) {
        for (int j = 0; j < 4; j++) {
            [mutArr exchangeObjectAtIndex:j withObjectAtIndex:j+1];
        }
        [mutArr removeObjectAtIndex:4];
        [mutArr addObject:mutDict];
    }else{
        [mutArr addObject:mutDict];
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T22:06:12.837

即使我不理解 NSMutableArray 的问题，这里有一种方法可以使用双向链表实现队列（希望我做对了，我有点累了；））：

注意：我假设使用 ARC。

```
//Node.h
@interface Node : NSObject

@property (strong)id value;
@property (strong)Node *previous;
@property (strong)Node *next;

//Node.m
@implementation
@end

/Queue.h
@interface Queue : NSObject

- (void)enqueue:(id)objectToEnqueue;
- (id)dequeue;

@end

//Queue.m
@interface Queue ()
{
    Node *start;
}

@implementation

- (void)enqueue:(id)objectToEnqueue
{
    Node *node = [Node new];
    node.value = objectToEnqueue;

    if (nil == start)
    {
        node.previous = node;
        node.next = node;
        start = node;
    }
    else
    {
        node.previous = start.previous;
        node.next = start;
        start.previous = node;
        start = node;
    }
}

- (id)dequeue
{
    if (nil == start)
        return nil;

    Node *node = start.previous;

    start.previous = start.previous.previous;
    start.previous.next = start;

    id objectToDequeue = node.value;

    return objectToDequeue;

}
@end 
```

如果您正在寻找一种在纯 C 中执行此操作的方法，也许这会对您有所帮助：

[实现队列的 C 程序](http://sourcecode4u.com/categories/data-structures/98-queue-using-linked-list)

# ssh - dotcloud push 失败（rsync 错误：无法解释的错误（代码 255））

> ID：13129235
> 
> 赞同：2
> 
> 时间：2012-10-29T20:35:55.927
> 
> 标签：ssh, dotcloud

我对“dotcloud push”命令有疑问。我遵循了[快速入门指南](http://docs.dotcloud.com/0.4/firststeps/quickstart/)，但最后，该命令`dotcloud push helloworldapp`给了我以下错误：

> rsync：连接意外关闭（到目前为止已收到 0 个字节）[sender]
> rsync 错误：io.c(605) [sender=3.0.9] 处出现无法解释的错误（代码 255）[sender=3.0.9]
> 警告：SSH 连接失败
> 请重试。如果问题仍然存在，请发送电子邮件至 support@dotcloud.com。
> 另请检查您是否被允许与自定义端口建立 SSH 连接。
> 中止。

我尝试通过 ssh 连接到 dotcloud@uploader.dotcloud.com:443，我得到：

> ssh：无法解析主机名 uploader.dotcloud.com:443：名称或服务未知

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:32:52.053

这很可能是 dotCloud API 的临时问题。一旦问题得到解决，您的推送应该能够完成。如果没有，请联系 dotCloud 支持以获得更多帮助。

有关获取 dotCloud 帮助的完整列表，请参阅[http://help.dotcloud.com 。](http://help.dotcloud.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:49:20.170

我不知道这是否会为每个人解决这个问题，但我遇到了同样的问题。我在#dotcloud IRC 频道寻求帮助，15 分钟后问题得到解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T06:26:46.650

我遇到过同样的问题。我在应用程序的根目录中丢失了**dotcloud.yml**文件。在我添加它之后，**dotcloud push**命令起作用了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-02T20:28:08.767

如果您经常遇到关于*连接意外关闭*的错误，请尝试在您的 SSH 配置 ( `~/.ssh/config`) 中增加服务器活动间隔值，例如

```
Host *
  ServerAliveInterval 30
  ServerAliveCountMax 6 
```

请参阅：[选项`ServerAliveInterval`和`ClientAliveInterval`含义是什么？](https://unix.stackexchange.com/q/3026/21471)

# vb.net - Linq to SQL to ObservableCollection 用于 VB.Net 中的树视图

> ID：13129242
> 
> 赞同：0
> 
> 时间：2012-10-29T20:36:13.553
> 
> 标签：vb.net, linq-to-sql, bindable-linq

我有一些连接在一起的 Linq to SQL 表类。我目前仅使用 LINQ to SQL 查询将其绑定到树视图。它可以工作，但它不显示何时从数据库中添加或删除内容。

我实现了 INotifyPropertyChanged 但它没有更新树视图。

我也尝试过使用 Bindable Linq，但似乎没有什么不同。

我找到了一个无需创建更多类即可轻松创建 ObservableCollections 的示例：[jimlynn.wordpress.com/2008/12/09/using-observablecollection-with-linq/](http://jimlynn.wordpress.com/2008/12/09/using-observablecollection-with-linq/)，（这很重要，因为我有未来项目迫在眉睫，需要与大量表（30 个左右）进行交互，并且仅创建 Linq to SQL 类将是一件痛苦的事情）。

```
 Property ModelQuery As ObservableCollection(Of dbModels) = New ObservableCollection(Of dbModels)().PopulateFrom(From mm In tblModels.AsBindable Order By mm.ModelName) 
```

这是一个好方法，还是我必须创建一个单独的 ObservableCollection 并在代码中维护它们。如果我要使用这种绑定的东西，我真的在寻找一种将东西链接在一起的方法，这样我就不必在进行更改时更新多个结构。

主表：

```
<Table(Name:="Models")> Public Class dbModels
    Implements INotifyPropertyChanged
    Private _changed As Boolean
    Public Event PropertyChanged(ByVal sender As Object, ByVal e As PropertyChangedEventArgs) Implements INotifyPropertyChanged.PropertyChanged
    Protected Overridable Sub OnPropertyChanged(ByVal Propertyname As String)
        If Not Propertyname.Contains("Changed") Then
            Changed = True
        End If
        RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(Propertyname))
    End Sub
    Public Property Changed() As Boolean
        Get
            Return _changed
        End Get
        Set(ByVal value As Boolean)
            If _changed <> value Then
                _changed = value
                OnPropertyChanged("Changed")
            End If
        End Set
    End Property

    Private _ModelID As Integer
    <Column(Storage:="_ModelID", DbType:="int IDENTITY NOT NULL", IsPrimaryKey:=True, IsDbGenerated:=True, Name:="ModelID")> _
    Public Property ModelID() As Integer
        Get
            Return Me._ModelID
        End Get
        Set(value As Integer)
            Me._ModelID = value
        End Set
    End Property

    Private _ModelName As String
    <Column(Storage:="_ModelName", DbType:="Varchar(200)", Name:="ModelName")> _
    Public Property ModelName() As String
        Get
            Return Me._ModelName
        End Get
        Set(value As String)
            Me._ModelName = value
        End Set
    End Property

    Private _ModelYears As EntitySet(Of dbModelYears) = New EntitySet(Of dbModelYears)
    <Association(Storage:="_ModelYears", DeleteRule:="CASCADE", OtherKey:="ModelID")> _
    Public Property ModelYears As EntitySet(Of dbModelYears)
        Get
            Return _ModelYears
        End Get
        Set(value As EntitySet(Of dbModelYears))
            _ModelYears.Assign(value)
        End Set
    End Property

End Class 
```

联表：

```
<Table(Name:="ModelYears")> Public Class dbModelYears
    Implements INotifyPropertyChanged
    Private _changed As Boolean
    Public Event PropertyChanged(ByVal sender As Object, ByVal e As PropertyChangedEventArgs) Implements INotifyPropertyChanged.PropertyChanged
    Protected Overridable Sub OnPropertyChanged(ByVal Propertyname As String)
        If Not Propertyname.Contains("Changed") Then
            Changed = True
        End If
        RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(Propertyname))
    End Sub
    Public Property Changed() As Boolean
        Get
            Return _changed
        End Get
        Set(ByVal value As Boolean)
            If _changed <> value Then
                _changed = value
                OnPropertyChanged("Changed")
            End If
        End Set
    End Property

    Private _ModelYearID As Integer
    <Column(Storage:="_ModelYearID", DbType:="int IDENTITY NOT NULL", IsPrimaryKey:=True, IsDbGenerated:=True, Name:="ModelYearID")> _
    Public Property ModelYearID() As Integer
        Get
            Return Me._ModelYearID
        End Get
        Set(value As Integer)
            Me._ModelYearID = value
        End Set
    End Property

    Private _ModelID As Integer
    <Column(Storage:="_ModelID", DbType:="int", Name:="ModelID")> _
    Public Property ModelID() As Integer
        Get
            Return Me._ModelID
        End Get
        Set(value As Integer)
            Me._ModelID = value
        End Set
    End Property

 Private _ModelYear As String
    <Column(Storage:="_ModelYear", DbType:="Varchar(50)", Name:="ModelYear")> _
    Public Property ModelYear() As String
        Get
            Return Me._ModelYear
        End Get
        Set(value As String)
            Me._ModelYear = value
        End Set
    End Property

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T20:47:21.070

实施`INotifyPropertyChanged`或使用`ObservableCollection`不会通知您数据库中的更改。每次要从数据库中检索新数据时，都必须执行查询。
或者，您可以使用[`SqlDependency`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx)在您的应用程序和 SQL Server 实例之间设置查询通知依赖关系。

**编辑：**
来自评论。
连接`PropertyChanged`集合中项目的事件。

```
For Each item As var In itemsCollection
    Dim notifyItem = TryCast(item, INotifyPropertyChanged)
    If item IsNot Nothing Then
        AddHandler notifyItem.PropertyChanged, AddressOf ItemChanged
    End If
Next

Public Sub ItemChanged(sender As Object, e As PropertyChangedEventArgs)
  'Handle event
End Sub 
```

# r - 大数的 intToBin

> ID：13129243
> 
> 赞同：0
> 
> 时间：2012-10-29T20:36:14.883
> 
> 标签：r

我正在使用“R.utils”包中的 intToBin() 函数，并且无法使用它将大十进制数转换为二进制数。

我收到此错误：强制引入的 NAs。

是否有另一个功能可以处理大数字/是否有算法/代码来实现这样的功能？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T20:50:29.413

如果您阅读 的帮助页面`intToBin`，它会非常明确地说它需要“整数”输入。这些不是数学“整数”，而是计算机语言定义的整数，限制为 16 位（或类似的东西）。

您需要找到（或编写 :-() 一个将浮点数转换为二进制浮点数的函数，或者如果你幸运的话，也许`Rmpfr`或者`gmp`执行任意精度“大数”数学的包可能有一个浮点数-to-binary 工具。

到发布此内容时，有人会通过发布现有功能来暴露我的无知，这与我的运气有关。

编辑——也许像包`pack`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-24T08:06:57.277

我需要一个双精度数和十六进制数之间的转换器。所以我写了这些，可能对其他人有帮助

```
doubleToHex <- function(x) {
  if(x < 16)
    return(sprintf("%X", x))

  remainders <- c()
  while(x > 15) {
    remainders <- append(remainders, x%%16)
    x <- floor(x/16)
  }
  remainders <- paste(sprintf("%X", rev(remainders)), collapse="")
  return(paste(x, remainders, sep=""))
}

hexToDouble <- function(x) {
  x <- strsplit(x,"")[[1]]
  output <- as.double(0)
  for(i in rev(seq_along(x))) {
    output <- output + (as.numeric(as.hexmode(x[i]) * (16**(length(x)-i))))
  }
  return(output)
}

doubleToHex(x = 8356723)
hexToDouble(x = "7F8373") 
```

尚未经过广泛测试，如果您发现问题，请告诉我。

# java - 在 Java 中加载音乐

> ID：13129250
> 
> 赞同：0
> 
> 时间：2012-10-29T20:36:57.517
> 
> 标签：java

我正在尝试用 Java 创建一个媒体播放器。我已经创建了 GUI，现在我需要加载一首歌曲。我使用了 AudioPlayer，但它不起作用。这是代码：

```
AudioPlayer audioP = AudioPlayer.player;
AudioStream audioS;
AudioData audioD;
ContinuousAudioDataStream loop = null;
audioS = new AudioStream(new FileInputStream("file:TheDragonBornComes.wav"));
audioD = audioS.getData();
loop = new ContinuousAudioDataStream(audioD);
audioP.start(loop); 
```

错误是：

```
Exception in thread "main" java.io.FileNotFoundException: file:TheDragonBornComes.wav
at java.io.FileInputStream.open(Native Method)
at java.io.FileInputStream.<init>(FileInputStream.java:138)
at java.io.FileInputStream.<init>(FileInputStream.java:97)
at medalmedia.MedalMedia.main(MedalMedia.java:26) 
```

**编辑：**我已经更改了文件的位置，最后一个错误已经解决。但是，有一个新的：

```
Exception in thread "main" java.io.IOException: could not create AudioData object 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T20:39:31.730

you have to give the absolute path name. something like . `c://music//yourfilename.wav`

OR try this:

```
 audioS = new AudioStream(new FileInputStream("./TheDragonBornComes.wav")); 
```

# javascript - 如何在没有 runtimeLoader.js 的情况下部署 WaveMaker 项目

> ID：13129253
> 
> 赞同：2
> 
> 时间：2012-10-29T20:37:09.653
> 
> 标签：javascript, html, wavemaker

WaveMaker 是一个强大的基于 ajax 的 UI 构建器，但它的 JSON-RPC API 标准与我们只有一个 RESTful API 的 Web 服务不兼容。因此，我们希望在不使用任何服务的情况下使用 WaveMaker 设计一个 UI，并且只提取其在浏览器端运行的部分源代码（丢弃所有服务）

不幸的是，我们无法查看或测试提取的代码（所有 .html 文件都显示一个空页面），index.html 中的 javascript 引用指向 runtimeLoader.js，我们在任何地方都找不到。那么，是否可以在没有 runtimeLoader.js 的 Web 容器（而不是像 Tomcat 这样的应用程序容器）上部署浏览器端代码？如果这是不可能的，我如何更改源代码以便可以在不使用 WaveMaker 的情况下对其进行测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:12:48.510

如果您不介意混合使用 java 服务器，您可以将 API 的 REST 调用“导入”到应用程序中。XHR 服务（6.5 中的新功能）以 JSON 返回服务为目标。“Build-a-Service”最适合 XML 返回服务。然后，浏览器会调用 WM java 服务器，而后者又会调用您的 REST 服务。

开始使用仅限 WaveMaker 客户端的应用程序的一种简单方法是使用 phonegap 构建选项。这将构建一个独立应用程序的 zip 文件。如果您将其解压缩到 apache 服务文件夹中，您将呈现页面等。请注意，此构建通过 phonegap 针对移动设备，因此如果您针对桌面浏览器，您将需要进行调整。

此外，runtimeLoader.js 可以在客户端运行时 lib 文件夹中找到。例如 /studio/lib/runtimeLoader.js 的安装。

# ruby-on-rails - 使用 Devise 和 Rails 登录后如何将用户定向到特定页面

> ID：13129254
> 
> 赞同：3
> 
> 时间：2012-10-29T20:37:11.057
> 
> 标签：ruby-on-rails, ruby-on-rails-3, login, devise, ruby-on-rails-3.2

当用户登录我使用 Devise 创建的特定表单时，如何将用户重定向到特定页面？有这个关于[如何在登录后重定向到特定页面](https://github.com/plataformatec/devise/wiki/How-to%3a-redirect-to-a-specific-page-on-successful-sign-in-out)的指导页面。但是，我希望不同的表单登录到不同的目标页面。理想情况下，我可以像这样添加另一个 HTML 表单参数：

```
<input type="hidden" name="target" value="/dashboard"/> 
```

***更新***：维护登录页面的 Devise 正常功能很重要。也就是说，如果我单击`before_filter :authenticate_user!`控制器中包含 的链接，那么我将被重定向到登录页面。登录后，我被重定向到原始目标页面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T20:42:48.980

实际上，您可以`after_sign_in_path_for`像这样简单地在控制器中定义方法：

```
class ApplicationController < ActionController::Base

  def after_sign_in_path_for
    params[:target] || some_default_url
  end

end 
```

然后，如果您的不同登录表单具有不同的目标，则应正确重定向用户

添加

```
<input type="hidden" name="target" value="/dashboard"/> 
```

对于将重定向到特定页面的每个特定表单就足够了:)

编辑：我想我终于明白了你到底想要什么。所以在这里我会做什么（基于[这篇博文](http://eureka.ykyuen.info/2011/03/10/rails-redirect-previous-page-after-devise-sign-in/)）

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  def after_sign_in_path_for(user)
    origin_path = session[:origin_path]
    clear_origin_path
    if origin_path.present?
      origin_path
    else
      params[:target].presence || default_redirect_path
    end
  end

  private

  def authenticate_user!
    store_origin_path
    super
  end

  def store_origin_path
    session[:origin_path] = request.fullpath
  end

  def clear_origin_path
    session[:origin_path] = nil
  end

end 
```

所以基本上，如果您尝试访问受保护的路径（比如说`/protected_resource`），该路径将存储在会话中，然后一旦用户登录，会话将被清除并正确重定向用户

然后，如果用户使用您的不同`sign_in`表单之一并且该表单包含`target`输入，则用户将被重定向到该目标。

最后，如果用户在没有任何目标的情况下进入表单，他将被重定向到`default_redirect_path`您可能想要自定义的表单。

最后一件事：我假设重定向到原始请求比目标更重要，所以假设用户继续`/protected_resource`并因此被重定向到 sign_in 表单，即使此 sign_in 表单有`target`输入，用户也会被重定向`/protected_resource`到成功登录。

您可以通过反转`after_sign_in_path_for`方法中的条件轻松更改它

可能有更好的方法来做到这一点，但这对你来说是一个起点，你可能想要改进它；）

如果我的回答不够详细，请告诉我。

# c# - dotnetopenauth OAuth2AuthorizationServer 示例修改 ResourceServerEncryptionPublicKey

> ID：13129257
> 
> 赞同：2
> 
> 时间：2012-10-29T20:37:23.460
> 
> 标签：c#, asp.net-mvc-4, dotnetopenauth

我正在研究 OAuthAuthorizationServer 示例（由[sourceforge](http://sourceforge.net/projects/dnoa/files/latest/)提供），我注意到 RSAParameters ResourceServerEncryptionPublicKey 有评论说这不需要硬编码，并且对这意味着什么有模糊的描述。但是，关于实际实施，我无法遵循。

具体来说：“在一个真实的应用程序中，授权服务器需要根据授权请求确定访问令牌需要为哪个资源服务器进行编码。然后它需要查找该资源服务器的公钥并将其用于为客户端准备访问令牌以针对该资源服务器使用。”

此评论中描述的资源服务器是 Google/Facebook 等吗？我们将如何查找这些公钥？我离那里很远吗？目标是遵循[此处](https://stackoverflow.com/questions/12249818/how-do-i-integrate-openid-into-mvc4-web-api/12254142#12254142)列出的问题。该问题的回答是可靠的，但遗漏了一些更丰富的细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:18:54.133

谷歌和 Facebook*不会*接受你发行的令牌，所以不，你的资源服务器不是那些网站。资源服务器是向客户端提供用户数据的服务器。通常，这也是您的网站。事实上，它通常与授权服务器本身是同一个站点。问问自己“在我将授权服务器创建的访问令牌发送给客户端后，它将在哪里使用？” 答案是您的资源服务器。

如果你只有一个资源服务器，你应该为它创建一个公钥/私钥对，并将公钥复制到授权服务器中。同样，您应该为您的授权服务器创建另一个密钥对并将其公钥复制到您的资源服务器中。

# php - 使用 Jquery/javascript 添加大量 HTML

> ID：13129267
> 
> 赞同：1
> 
> 时间：2012-10-29T20:38:10.243
> 
> 标签：php, javascript, html, indentation, insertion

我正在开发一种在用户指定时自动生成大量添加的表单，包括可编辑的画布、可选择的输入、文本区域等。我想知道是否有一个工具可以更轻松地以更好的样式附加大块 HTML：例如，在我的 codeigniter PHP 视图中，只需关闭 PHP 标记并使用`<?=var?>`.

```
<?php if (condition) {?>
    <h1>List a variable <?=$var?></h1>
<?php }?> 
```

上面的风格很糟糕吗？是否有可用于 javascript 的类似工具，以便我可以包含具有适当缩进的 html？

编辑：为了更清楚，我不是在寻找大量的 php 输入 - 我的目标是编辑我使用 javascript 更清洁插入的 HTML。问题与此类似：

```
 <?php
if (condition) {
echo "<div>";
echo "<p> a line of html code<p>";
echo "<h1> more stuff and a ".$variable;
echo "<div>";
}
?>

//vs

<?php 
if (condition) { ?>
<div>
    <p> A line of html code, but easier to edit</p>
    <h1> a <?=$var?>
</div>

<? } ?> 
```

第二个更干净，更容易为开发人员编辑。所以我想对 javascript 做同样的事情并采取这个：

```
$(this).append('<p>a whole bunch of stuff'+var+'more stuff<p>');
$(this).append('<p>more stuff<p>');
$(this).append('<h1>more stuff<h1>'); 
```

并使其更易于管理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:41:25.623

缩进是给开发者的，使源代码可维护和可读。它与使“查看源代码”看起来不错无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T20:48:56.280

当然，它看起来确实有点不愉快。

如果我使用这种特定的方法来生成页面，我可能会这样写。

```
<?php 
      if (condition)
         echo "<h1>List a variable $var</h1>";
?> 
```

您可能还想查看 php 的 DOM 方法。它们可以使创建可重用的模块化代码变得更加容易。它们不像简单的字符串操作那么快，但更简洁、更强大。当日常流量意味着这种速度差异是一个问题时，您可能已经有钱投入一些 ode Monkey 以进行所需的更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T20:58:02.143

试试[CoffeeScript](http://coffeescript.org/#strings)。它为普通的 javascript 添加了一些功能，如字符串插值、块字符串和使编写大量 HTML 字符串文字变得轻而易举的东西。

# c++ - Vim code completion doesn't work after including a standard header

> ID：13129272
> 
> 赞同：7
> 
> 时间：2012-10-29T20:38:34.693
> 
> 标签：c++, vim, autocomplete

I have to develop my project in text-mode debian linux. I'm using Vim and I installed the clang_completion plugin on it. I made `.clang_completion` file in root of my project :

```
-I.
-I/usr/include
-I/usr/include/c++/4.6 
```

When I write a program like below, the completion works fine.

```
//#include <stdio.h>
int main()
{
  struct A
  {
    int x, y;
  };

  A a;
  a. // After putting dot, the suggestion popup appears

  return 0;
} 
```

However, after removing the comment of first line, it doesn't work! How can I overcome this issue?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T06:09:49.187

我发现让 clang_complete 工作的最简单方法是使用提供的 cc_args.py 文件。

编译项目时使用 clang_complete/bin/cc_args.py 而不是 gcc/g++

这将生成包含所有库和依赖项的正确 .clang_complete 文件。在您的主文件夹中提供了 clang_complete 源目录。

示例生成文件：

```
CXX=$(HOME)/clang_complete/bin/cc_args.py g++

all:
    $(CXX) main.cpp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T18:58:28.880

我过去曾成功使用过该`clang_complete`插件（现在我只使用 cscope 和 ctags，我认为这已经足够了）。

在我的配置中包含外部标头工作正常，但是，正如[clang 完整插件页面](http://www.vim.org/scripts/script.php?script_id=3302)所指定的，放置包含路径（或您可能想要传递给 clang 编译器的任何其他标志）的文件必须命名为`.clang_complete`not `.clang_completion`。

此外，我曾经将选项放在一行上，就像我将`.clang_complete`文件的纯内容作为命令行选项传递一样（不知道分隔行是否`\`会起作用）。

希望这可以帮助。

# mysql - Complex Join of two MySQL tables

> ID：13129280
> 
> 赞同：0
> 
> 时间：2012-10-29T20:38:55.877
> 
> 标签：mysql, sql, database, join

**edit:** The join that I want:

![enter image description here](../Images/a6928b0f51517e481d530180c61ad914.png)

This is my current MySQL tables

table 'primary'

```
+----------+--------+---------+-----------+----------+
| id       | sample | mineral | formula   | link     |
+----------+--------+---------+-----------+----------+
| 1        | 5742   | calcite | CaCO3     | link..   |
| 2        | 3411   | siderite| Fe^2+^CO3 | link..   |
| .        | ....   | ........| ......... | ......   |
+----------+--------+---------+-----------+----------+ 
```

and table 'secondary'

```
+----------+------------+---------+-----------+
| id       | wavenumber | calcite | siderite  |
+----------+------------+---------+-----------+
| 1        | 1          | 256     | 434       |
| 2        | 3          | 254     | 312       |
| 3        | 5          | 251     | 424       |
| 4        | 7          | 257     | 544       |
| 5        | 9          | 258     | 345       |
| 6        | 11         | 257     | 386       |
| 7        | 13         | 326     | 314       |
| 8        | 15         | 456     | 337       |
| 9        | 17         | 236     | 243       |
| 10       | 19         | 246     | 514       |
| 11       | 21         | 254     | 662       |
| 12       | 23         | 258     | 248       |
| 13       | 25         | 230     | 374       |
| 14       | 27         | 224     | 359       |
| 15       | 29         | 216     | 442       |
| 16       | 31         | 236     | 344       |
| 17       | 33         | 247     | 343       |
| ..       | ..         | ...     | ...       |
+----------+------------+---------+-----------+ 
```

It is possible to combine in one query: - a select all from row click of primary table with select all from weavenumber + specific column from secondary table:

**e.g.** if is clicked on row 2 of primary table, select all and also I want to select all from weavenumber and column 'siderite'.

Weavenumber column it is common for all selections, the only difference is column 3, 4, 5, and so on, which corresponds to the id of primary table. It's possible to make a join like this?

I want to make a xy plot for every entry primary table, and in the secondary table, the weavenumber is the x-axe (horizontal) and calcite, siderite, etc. is the variable y-axe (vertical).

For now I have this:

```
private void primaryMouseClicked(java.awt.event.MouseEvent evt) {  

int row = primary.getSelectedRow();
int realIndex = primary.convertRowIndexToModel(row);
String Table_click = (primary.getModel().getValueAt(realIndex, 0).toString());

    try {
            String sql = "select * from primary where id='" + Table_click + "' ";
            pst = conn.prepareStatement(sql);
            rs = pst.executeQuery();
            if (rs.next()) {

                String add1 = rs.getString("mineral");
                txt_mineral.setText(add1);
                String add2 = rs.getString("formula");
                txt_formula.setText(add2);
                String add3 = rs.getString("link");
                txt_link.setText(add3);

            }

        } catch (Exception e) {

            JOptionPane.showMessageDialog(null, e);
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:07:18.367

这是我提出的查询：

```
SELECT     Prime.*, wavenumber, 
           CASE 
             WHEN Prime.mineral = 'calcite' 
             THEN calcite 
             ELSE siderite 
           END AS mineralval 
FROM       Second 
RIGHT JOIN (SELECT * FROM Prime) AS Prime ON 1 = 1 
```

[http://sqlfiddle.com/#!2/ee3cf/8](http://sqlfiddle.com/#!2/ee3cf/8)

# python - 在列表中查找邻居

> ID：13129281
> 
> 赞同：4
> 
> 时间：2012-10-29T20:38:58.033
> 
> 标签：python, list

我有一个清单：

```
l=['a','>>','b','>>','d','e','f','g','>>','i','>>','>>','j','k','l','>>','>>'] 
```

我需要提取 的所有邻居`'>>'`并将它们分成组，其中它们之间的元素既不是 也不`'>>'`是`'>>'`.

对于示例列表，预期结果将是：

```
[['a', 'b', 'd'], ['g', 'i', 'j'], ['l']] 
```

我已经尝试了很多事情，但是所有简单的事情都以某种方式失败了。目前唯一可行的代码是：

```
def func(L,N):
    outer=[]
    inner=[]
    for i,e in enumerate(L):
        if e!=N:
            try:
                if L[i-1]==N or L[i+1]==N:
                    inner.append(e)
                elif len(inner)>0:
                    outer.append(inner)
                    inner=[] 
            except IndexError:
                pass
    if len(inner):
        outer.append(inner)
    return outer

func(l,'>>')

Out[196]:
[['a', 'b', 'd'], ['g', 'i', 'j'], ['l']] 
```

虽然它似乎有效，但我想知道是否有更好、更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T20:54:47.890

这是另一种选择：

```
import itertools

def func(L, N):
    def key(i_e):
        i, e = i_e
        return e == N or (i > 0 and L[i-1] == N) or (i < len(L) and L[i+1] == N)
    outer = []
    for k, g in itertools.groupby(enumerate(L), key):
        if k:
            outer.append([e for i, e in g if e != N])
    return outer 
```

或具有嵌套列表理解的等效版本：

```
def func(L, N):
    def key(i_e):
        i, e = i_e
        return e == N or (i > 0 and L[i-1] == N) or (i < len(L) and L[i+1] == N)
    return [[e for i, e in g if e != N] 
                for k, g in itertools.groupby(enumerate(L), key) if k] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T21:01:23.117

你可以像这样简化它

```
l = ['']+l+['']
stack = []
connected = last_connected = False
for i, item in enumerate(l):
    if item in ['','>>']: continue
    connected = l[i-1] == '>>' or  l[i+1] == '>>'
    if connected:
        if not last_connected:
            stack.append([])
        stack[-1].append(item)
    last_connected = connected 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T21:01:22.930

我认为最 Pythonic 和易于阅读的解决方案是这样的：

```
import itertools

def neighbours(items, fill=None):
    """Yeild the elements with their neighbours as (before, element, after).

    neighbours([1, 2, 3]) --> (None, 1, 2), (1, 2, 3), (2, 3, None)

    """
    before = itertools.chain([fill], items)
    after = itertools.chain(items, [fill]) #You could use itertools.zip_longest() later instead.
    next(after)
    return zip(before, items, after)

def split_not_neighbour(seq, mark):
    """Split the sequence on each item where the item is not the mark, or next
    to the mark.

    split_not_neighbour([1, 0, 2, 3, 4, 5, 0], 0) --> (1, 2), (5)

    """
    output = []
    for items in neighbours(seq):
        if mark in items:
            _, item, _ = items
            if item != mark:
                output.append(item)
        else:
            if output:
                yield output
                output = []
    if output:
        yield output 
```

我们可以这样使用：

```
>>> l = ['a', '>>', 'b', '>>', 'd', 'e', 'f', 'g', '>>', 'i', '>>', '>>',
...      'j', 'k', 'l', '>>', '>>']
>>> print(list(split_not_neighbour(l, ">>")))
[['a', 'b', 'd'], ['g', 'i', 'j'], ['l']] 
```

请注意避免任何直接索引。

编辑：更优雅的版本。

```
def split_not_neighbour(seq, mark):
    """Split the sequence on each item where the item is not the mark, or next
    to the mark.

    split_not_neighbour([1, 0, 2, 3, 4, 5, 0], 0) --> (1, 2), (5)

    """
    neighboured = neighbours(seq)
    for _, items in itertools.groupby(neighboured, key=lambda x: mark not in x):
        yield [item for _, item, _ in items if item != mark] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T21:08:04.773

我天真的尝试

```
things = (''.join(l)).split('>>')

output = []
inner = []

for i in things:
    if not i:
        continue
    i_len = len(i)
    if i_len == 1:
        inner.append(i)
    elif i_len > 1:
        inner.append(i[0])
        output.append(inner)
        inner = [i[-1]]

output.append(inner)
print output # [['a', 'b', 'd'], ['g', 'i', 'j'], ['l']] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T23:58:00.073

像这样的东西：

```
l=['a','>>','b','>>','d','e','f','g','>>','i','>>','>>','j','k','l','>>','>>']
l= filter(None,"".join(l).split(">>"))
lis=[]
for i,x in enumerate(l):
    if len(x)==1:
        if len(lis)!=0:
            lis[-1].append(x[0])
        else:
            lis.append([])
            lis[-1].append(x[0])
    else:
        if len(lis)!=0:
            lis[-1].append(x[0])
            lis.append([])
            lis[-1].append(x[-1])
        else:
            lis.append([])    
            lis[-1].append(x[0])
            lis.append([])
            lis[-1].append(x[-1])

print lis 
```

**输出：**

```
[['a', 'b', 'd'], ['g', 'i', 'j'], ['l']] 
```

**或者：**

```
l=['a','>>','b','>>','d','e','f','g','>>','i','>>','>>','j','k','l','>>','>>']
l= filter(None,"".join(l).split(">>"))
lis=[[] for _ in range(len([1 for x in l if len(x)>1])+1)]
for i,x in enumerate(l):
    if len(x)==1:
        for y in reversed(lis):
            if len(y)!=0:
                y.append(x)
                break
        else:
            lis[0].append(x)
    else:
        if not all(len(x)==0 for x in lis):
            for y in reversed(lis):
                if len(y)!=0:
                    y.append(x[0])
                    break
            for y in lis:
                if len(y)==0:
                    y.append(x[-1])
                    break    
        else:
            lis[0].append(x[0])
            lis[1].append(x[-1])

print lis 
```

**输出：**

```
[['a', 'b', 'd'], ['g', 'i', 'j'], ['l']] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T11:50:40.603

使用原始列表叠加的另一种方法

```
import copy

lis_dup = copy.deepcopy(lis)

lis_dup.insert(0,'')
prev_in = 0
tmp=[]
res = []

for (x,y) in zip(lis,lis_dup):
    if '>>' in (x,y):
        if y!='>>' :
            if y not in tmp:
                tmp.append(y)
        elif x!='>>':
            if x not in tmp:
                print 'x is ' ,x
                tmp.append(x)
        else:
            if prev_in ==1:
                res.append(tmp)
                prev_in =0
                tmp = []
        prev_in  = 1
    else:
        if prev_in == 1:
            res.append(tmp)
            prev_in =0
            tmp = []
res.append(tmp)

print res 
```

# cakephp - 从一个控制器 cakephp 中的动作调用动作，例如控制器/动作/动作

> ID：13129285
> 
> 赞同：0
> 
> 时间：2012-10-29T20:39:11.617
> 
> 标签：cakephp, controller, action

我有一个名为“Movies”的控制器，所以链接是“localhost/Movies”，并且在这个控制器中有一些操作，例如“localhost/Movies/view/[id]”、“localhost/Movies/view/category/[id]”如果我想通过类别名称和子类别名称创建路径，例如“localhost/Movies/English/new”。

我怎么能在 cakephp 中做这样的事情 2\. 我的项目现在像“localhost/English/new”但我想把电影放在这个路径中，以使其更容易修复，如果我想创建一个新类别只需添加一个列在我的数据库中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T21:08:46.747

如果我理解，也许通过为您的操作创建自定义路线：

在 app/config/routes.php 中：

> Router::connect('/movies/:category/:subcategory', array('controller'=>'movies','action' => 'index'));

您可以通过以下方式检索控制器中的值：

> echo $this->params['category'];
> 
> echo $this->params['subcategory'];

[您也可以在食谱http://book.cakephp.org/1.3/view/945/Routes-Configuration](http://book.cakephp.org/1.3/view/945/Routes-Configuration)中了解它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T22:11:55.503

CakePHP 中的默认路由如下：

```
mydomain/controller/action/param1/param2/param3/param4/... 
```

如果要向操作添加过滤器选项，只需向操作添加可选参数。

```
function index($category = null, $subcategory = null) {
   if(isset($subcategory)){
       //will execute if you pass both arguments
   }else if(isset($category)){
       //will execute if you pass one argument
   }else{
       //will execute if you pass no arguments
   }
} 
```

**编辑**

在这种情况下，$category 是 param1，$subcategory 是 param2。重载函数可以接收 1、2 或不接收参数。例如，如果这是在 ObjectsController 中，那么所有这些都是有效的 URL：

```
localhost/objects/index/              //$category==null, $subcategory==null
localhost/objects/index/foods/        //$category=='foods', $subcategory==null
localhost/objects/index/foods/green/  //$category=='foods', $subcategory=='green' 
```

这使您可以在同一操作中控制许多选项。

# c# - 对于 C# 中的匹配，Regex 实例线程是否安全

> ID：13129287
> 
> 赞同：38
> 
> 时间：2012-10-29T20:39:14.040
> 
> 标签：c#, regex, .net-4.0

我有这个正则表达式，我在`Parallel.ForEach<string>`. 安全吗？

```
Regex reg = new Regex(SomeRegexStringWith2Groups);
Parallel.ForEach<string>(MyStrings.ToArray(), (str) =>
{
    foreach (Match match in reg.Matches(str)) //is this safe?
        lock (dict) if (!dict.ContainsKey(match.Groups[1].Value))
            dict.Add(match.Groups[1].Value, match.Groups[2].Value);
}); 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-29T20:46:07.147

`Regex`对象是只读的，因此是线程安全的。这是他们的回报，`Match`可能会导致问题的对象。 [MSDN 证实了这一点](http://msdn.microsoft.com/en-us/library/6h453d2h.aspx)：

> Regex 类本身是线程安全且不可变的（只读）。即Regex对象可以在任意线程上创建，线程间共享；*可以从任何线程调用匹配方法，并且永远不会改变任何全局状态。*
> 
> 但是，*Regex 返回的结果对象（Match 和 MatchCollection）应该在单个线程上使用。*

我会担心您的 Match 集合是如何以可能并发的方式生成的，这可能会导致集合的行为有点奇怪。一些 Match 实现使用延迟评估，这可能会导致该`foreach`循环中出现一些疯狂的行为。我可能会收集所有的比赛，然后再评估它们，既安全又获得一致的性能。

# c++ - 将变量推回向量

> ID：13129292
> 
> 赞同：1
> 
> 时间：2012-10-29T20:39:43.027
> 
> 标签：c++, vector, push-back

刚开始学习STL，这是第一个问题：

```
 vector<int> vec1;

for(int i = 1; i <= 100; i++)
{
    vec1.push_back(i);
    cout << vec1[i] << endl;
} 
```

如您所见，我想将变量**i**推回向量**vec1**但输出为：

```
5832900
-319008141
0 
```

ETC...

```
Process returned 0 (0x0)   execution time : 0.210 s
Press any key to continue. 
```

感谢一切。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T20:41:57.750

您向后推，但打印出 item[i]，它是结束后的一个（i 从循环中的一个开始）。

```
vector<int> vec1;

for(int i = 0; i < 100; i++)
{
    vec1.push_back(i+1);
    cout << vec1[i] << endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T20:42:41.603

您每次都在矢量末尾打印一个。这将是您的代码的正确版本：

```
for(int i = 0; i < 100; i++)
{
    vec1.push_back(i+1);
    cout << vec1[i] << endl;
} 
```

# php - Codeigniter：当 `$query->num_rows()` 对我不起作用时，如何选择计数？

> ID：13129294
> 
> 赞同：2
> 
> 时间：2012-10-29T20:39:55.173
> 
> 标签：php, codeigniter, activerecord, count

我有一个返回总和的查询，所以它自然会返回***一行***。
我需要计算数据库中产生该总和的记录数。

这是我正在谈论的查询类型的示例（MySQL）：

```
SELECT 
    i.id, 
    i.vendor_quote_id, 
    i.product_id_requested, 
    SUM(i.quantity_on_hand) AS qty, 
    COUNT(i.quantity_on_hand) AS count
FROM vendor_quote_item AS i
JOIN vendor_quote_container AS c 
    ON i.vendor_quote_id = c.id
LEFT JOIN company_types ON company_types.company_id = c.company_id
WHERE company_types.company_type =  'f'
AND i.product_id_requested =  12345678 
```

我已经找到并且现在正在使用 select_min()、select_max() 和 select_sum() 函数，但我的*COUNT()*仍然是硬编码的。

主要问题是我必须以紧密耦合的方式指定表名，***这****会*扼杀`$this->$db->select( 'COUNT(myDbPrefix_vendor_quote_item.quantity_on_hand) AS count' )`可移植性并使切换环境成为 PIA。

我如何/应该如何以非耦合的方式获得我所追求的 CI 计数值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:13:56.327

如果您想要一种完全解耦的方式来处理这个问题，只需运行查询以获取您要添加的所有行`SUM()`，然后在 PHP 中将它们添加到一起。

```
$sum = 0;
foreach($query->result() as $row)
{
    $sum += $row->quantity_on_hand;
} 
```

或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T20:47:39.703

如何在 var 或 const 中定义表，然后像这样进行查询：

```
define('VENDOR_QUOTE_ITEM', 'vendor_quote_item');
$this->$db->select( 'COUNT(' . VENDOR_QUOTE_ITEM . '.quantity_on_hand) AS count' ); 
```

这应该比 $query->num_rows() 更快，因为它会检索结果并让 PHP 计算它们。上面的代码切入正题，只向数据库询问计数而不返回任何其他内容（因为它使用了 mysql 的 COUNT()）

至于为什么 $query->num_rows(); 不起作用..确保您在 CI 查询结果对象上调用 num_rows 的 var。你应该有这样的东西：

```
$your_query = $this->db->query("YOUR QUERY");
$your_query->num_rows() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T04:57:49.453

如果您想在 $this->db->select() 函数中使用任何 MySQL 函数，请将第二个参数作为 FALSE。

所以应该是`$this->$db->select( 'COUNT(myDbPrefix_vendor_quote_item.quantity_on_hand) AS count' , FALSE)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T14:49:53.900

嗯......虽然它与我最初设想的方向不同，但我最终[**只是通过 HERE 找到的方向来扩展 CI**](http://www.simonemms.com/2011/03/18/extending-the-codeigniter-database-class/)。

我添加了一个`select_count()`方法来匹配现有的`select_min()`、`select_max()`和`select_sum()`方法。
此添加目前仅适用于 MySQL，但它是一个可靠的解决方案。

如果将来有人遇到类似的问题，这就是我所做的：

1.  我将 Simons "MY_Loader" 直接放到了我的 "application/core" 目录中（不需要改变任何东西）。
2.  然后我按照他的指示在“application/core”目录中创建了一个“MY_DB_mysql_driver”……并使它看起来像这样：（为了简洁起见，没有评论）

.

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');
class My_DB_mysql_driver extends CI_DB_mysql_driver {

    final public function __construct($params) {
        parent::__construct($params);
        log_message('debug', 'Extended DB driver class instantiated!');

    }  /* method: __CONSTRUCT */

    final public function select_count($select = '', $alias = ''){

        if ( !is_string($select) OR $select == ''){
            $this->display_error('db_invalid_query');
        }
        if ($alias == ''){
            $alias = $this->_create_alias_from_table(trim($select));
        }
        $sql = 'COUNT('.$this->_protect_identifiers(trim($select)).') AS '.$alias;
        $this->ar_select[] = $sql;
        if ($this->ar_caching === TRUE){
            $this->ar_cache_select[] = $sql;
            $this->ar_cache_exists[] = 'select';
        }

        return $this;

    }  /* method: SELECT_COUNT */

} 
```

希望能帮助到你。

# visual-studio-2010 - Using VS2003 and VS2010 Crystal Reports versions (9.1 and 13) on the same server

> ID：13129298
> 
> 赞同：1
> 
> 时间：2012-10-29T20:40:10.990
> 
> 标签：visual-studio-2010, visual-studio-2008, crystal-reports, crystal-reports-2010

We have a long-running environment with Crystal 9.1 from VS2003 (or was it VS.Net - can't remember any more). We've added new framework versions and used new versions of VS as time goes on, but we've never upgraded the Crystal version. With the simplicity of installing the Crystal 13 that comes with VS2010, however, I persuaded my boss to take a chance on upgrading our apps as we roll out fixes/updates to them. I converted an app from VS2005 and its reports to Crystal 13, installed framework 4.0 and Crystal 13 on our dev server, and all looked good. Then installed same on UAT, and all still looked good. Before I rolled it out to production, however, I had to make some changes to another very large app in a short enough timeframe that I could not upgrade it to VS2010/Crystal 13\. Now I can't run the 9.1 Crystal reports on the large app in dev, and I'm afraid to move it to UAT if I can't even run them in dev. The most annoying part is that I'm not even getting an error message - it just doesn't work. I don't *know* that the addition of Crystal 13 caused the issue, but I made no changes to the report generation in this release and have no other explanation.

The details: VS 2008 app with a 9.1 Crystal Report created in the application and exported to a pdf file on local server. I get no errors, but no pdf file ever gets exported or saved. I have confirmed that the user id running the application pool has access to the folder where it should be saved. I have confirmed that creating the report in preview mode in VS2008 and then exporting it from the preview window to that same folder does work. I found several references to running 10.5 with 13, but nothing about 9.1 with 13, and what they mentioned for 10.5 does not seem to apply to 9.1\. The servers are running Windows Server 2003 SP2.

Has anyone successfully used Crystal 9.1 and Crystal 13 on the same server? I'm running out of time, year-end freeze is almost upon us, so I have to get these fixes out before (including running them through QA and UAT) early November or they get delayed to late January and that will NOT make my boss happy.

Any and all help greatly appreciated! Thanks, Bonnie

# ruby-on-rails-3.2 - 如果其他条件无法正常工作？

> ID：13129300
> 
> 赞同：1
> 
> 时间：2012-10-29T20:40:26.897
> 
> 标签：ruby-on-rails-3.2

这是我的代码，我想在其中显示从书表中获取的书籍详细信息。

```
<div class="tab-pane" id="computer">  <!-- Branch Computer -->
        <legend> Computer Science</legend>
            <table class ="table table-hover">
                <thead>
                    <tr>
                        <th> S.No </th>
                        <th> Book Name </th>
                        <th> Year </th>
                        <th> User ID</th>
                        <th> Owner Address</th>
                    </tr>
                </thead>
                <tbody>
                    <% @books.each do |b| %>                                       
                    <tr>
                    <% if b.branch == "Computer Science"%>
                        <td><%= b.id%></td>
                        <td><%= b.book_name%></td>
                        <td><%= b.year%></td>
                        <td><%= b.user_id%></td>
                                                    <!-- For displaying user details -->                             
                        <% @susers.each do |s|%>
                           <% if s.user_id == b.user_id %>
                                <td><%= s.address %></td>
                           <%else%>
                                <td><%"Not found"%></td>
                            <%end%>
                          <%end%>                           

                        <%else%>
                                <td><%"No any book of this branch"%></td>   
                        <%end%>   
                      </tr>                                     
                    <%end%>
                </tbody>    
            </table>    
        </div><!-- End of Computer Branch--> 
```

但我不知道这里的输出出了什么问题？

它是这样显示的。注意每一行的长线。编辑后我得到了这么多。 ![](../Images/728bde7e8309949e8a8acf8af550933a.png)

好的，这是终端中发生的异常情况

[http://pastie.org/5134510](http://pastie.org/5134510) ![注意第二行。](../Images/3747c2b73cc0107d630e78ff490cd305.png) 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:21:10.973

我对其进行了修改以解决表格格式的一些问题。

```
<div class="tab-pane" id="computer">  <!-- Branch Computer -->
            <legend> Computer Science</legend>
                <table class ="table table-hover">
                    <thead>
                        <tr>
                            <th> S.No </th>
                            <th> Book Name </th>
                            <th> Year </th>
                            <th> User ID</th>
                            <th> Owner Address</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% @books.each do |b| %>
                        <% if b.branch == "Computer Science"%>                                       
                        <tr>
                            <td><%= b.id%></td>
                            <td><%= b.book_name%></td>
                            <td><%= b.year%></td>
                            <td><%= b.user_id%></td>
                                                        <!-- For displaying user details -->                             
                            <% @susers.each do |s|%>
                               <% if s.user_id == b.user_id %>
                                    <td><%= s.address %></td>
                               <%else%>
                                    <td><%"Not found"%></td>
                                <%end%>
                              <%end%>
                            <%end%>   
                          </tr>                                     
                        <%end%>
                    </tbody>    
                </table>    
            </div><!-- End of Computer Branch--> 
```

至于细节的问题，我不确定为什么底部结果与右侧对齐。我会说通常是 CSS 问题，但为什么我不知道每个条目都会发生变化。

# android - Android: obtaining the all available intent extras of a Google Drive activity

> ID：13129303
> 
> 赞同：1
> 
> 时间：2012-10-29T20:40:40.397
> 
> 标签：android, android-intent, google-drive-api

We want to know if is possible obtain all the available intent extras in an activity of an application. We are doing an Android application that make an explicit intent to the Google Drive activity that upload a file, selecting the gmail account and a Google Drive folder.

We need the our application select the folder and the account, not the user (the user would can select it easyly picking in the available folders and accounts, but we not want it).

We were seeing which extras can add in the intent in order to do that, but the unique extra that "interact" whit the Google Drive activity is the extra EXTRA_STREAM, which provides the stream of the file that we want to upload: [http://developer.android.com/reference/android/content/Intent.html#EXTRA_STREAM](http://developer.android.com/reference/android/content/Intent.html#EXTRA_STREAM)

We see also that exists a metod intent.getExtras(), which return a map (Bundle) whit all the extras of an intent, but there are all the extras previously added, not the availables.

We not find more standard extras that interact whit the Google Drive activity, but probably the source code of the application have defined extras in order to make this (unfortunately the Google Drive application is not open source).

This is the code we have for now:

```
public class MainActivity extends Activity {

public final static String EXTRA_MESSAGE = "MESSAGE";

  private void error(String message){
    Intent intent = new Intent(this, DisplayMessageActivity.class);
    intent.putExtra(EXTRA_MESSAGE, message);
    startActivity(intent);
  }

public void sendMessage(View view){
    PackageManager pm = this.getPackageManager();
    Intent intent = new Intent(Intent.ACTION_SEND);

   intent.setType("text/plain");
   String rootPath = Environment.getExternalStorageDirectory().getPath();
   intent.putExtra(Intent.EXTRA_STREAM, Uri.parse(rootPath.concat("/rev.txt")));
   intent.putExtra(Intent.EXTRA_SUBJECT, "asunto");
   intent.putExtra(Intent.EXTRA_TEXT, "text");
   String[] emails = new String[4];
   emails[0] = "aa@gmail.com";
   intent.putExtra(Intent.EXTRA_EMAIL, emails);

    List<ResolveInfo> apps = pm.queryIntentActivities(intent, 0);

    System.out.println(apps.size());

    if (apps.size()>0) {

        ResolveInfo ri;
        for (Iterator<ResolveInfo> it = apps.iterator(); it.hasNext(); ) {
            ri = it.next();
            System.out.println(ri.toString());
        }
        ComponentName component = new ComponentName("com.google.android.apps.docs",
                "com.google.android.apps.docs.shareitem.UploadSharedItemActivity");

        intent.setComponent(component);

        try {
            startActivity(intent);
        }
        catch (ActivityNotFoundException e) {
            System.out.println("NON ATOPO O DRIVE");
            error("NON ATOPO O DRIVE");
        }
    }
    else {
        System.out.println("non hai aplicacions");
        error("non hai aplicacions");
    }

  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T20:50:07.033

> 我们想知道是否有可能在应用程序的活动中获得所有可用的意图附加信息。

阅读相关活动作者提供的文档。如果没有此类文档，请不要开始活动。

如果您希望能够以编程方式收集有关支持的附加功能的信息，那是不可能的。

# erlang - Erlang - io:format 的结果 / （使用 io_lib:format/2 格式化）

> ID：13129304
> 
> 赞同：4
> 
> 时间：2012-10-29T20:40:48.580
> 
> 标签：erlang

我正在尝试获取 io:format/1 的输出结果。

我知道io_lib中也有类似的函数，io_lib:format/2，但是输出不一样。事实上，它根本没有做任何事情。如果我尝试绑定 io:format，则 ok 是有界的，并且格式化的字符串会被写入控制台。

所以我的问题是，如何使用 io_lib:format/2 获得相同的输出？或者如何将格式化字符串绑定到变量？

```
1> A = io:get_line('> ').
> "test".
"\"test\".\n"
2> io:format(A).
"test".
ok
3> B = io_lib:format(A, []).
"\"test\".\n"
4> B.
"\"test\".\n"
5> C = io:format(A).
"test".
ok
6> C.
ok 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T20:50:56.457

`io_lib:format`不是这样的输出函数`io:format`。而是`io_lib:format`只返回值，而不输出它。

`io:format`您将其视为“测试”的结果。是发送到终端的渲染版本（包括换行符），然后返回`ok`。`io_lib:format`相反，您看到的返回值`"\"test\".\n"`只是 erlang shell 对同一字符串的表示，引号和换行符被转义，并被自己的引号包围。

`io_lib:format`更常用于将值插入字符串（类似于 C 的`printf`函数）。例如，做类似的事情

```
NewString = io_lib:format("The string entered was ~s I hope you like it",[A]) 
```

的值`NewString`是

```
The string entered was "test".
I hope you like it 
```

Erlang Shell 的表示将是：

```
"The string entered was \"test\".\n I hope you like it" 
```

如果您只想输出刚刚输入的值，则`io:format`足以满足您的需求。

# sdl - 当前版本的 SDL 是否允许全窗口透明？

> ID：13129306
> 
> 赞同：0
> 
> 时间：2012-10-29T20:40:53.257
> 
> 标签：sdl

是否可以使用 SDL 创建一个带有透明“孔”的窗口，即 SDL 驱动的应用程序下方的任何应用程序都可以显示出来？我的理解是，以前版本的 SDL 不支持这一点，所以我希望最新版本支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:24:07.087

如果您在谈论 SDL 1.2 那么不，sdl 1.3 可能有类似 SDL_SetWindowShape 的东西，但我会说您会喜欢

# windows-phone-7 - WP7 LongListSelector : Color of the semi-transparent background

> ID：13129307
> 
> 赞同：1
> 
> 时间：2012-10-29T20:40:56.067
> 
> 标签：windows-phone-7, longlistselector

There is any way to change the background color of the mask semi-transparent shown when you tap on header made by a LongListSelector?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T17:20:52.617

您可以添加自定义 GropItemsPanel 模板。它覆盖了屏幕。

```
<toolkit:LongListSelector  ItemsSource="{Binding Shows}" GroupItemsPanel="{StaticResource LongListItemsPanelTemplateCustom}" ></toolkit:LongListSelector>

<ItemsPanelTemplate x:Key="LongListItemsPanelTemplateCustom"><StackPanel Background="Red"/></ItemsPanelTemplate> 
```

# delphi - 运行PE转储进程

> ID：13129312
> 
> 赞同：0
> 
> 时间：2012-10-29T20:41:15.450
> 
> 标签：delphi, winapi, process, dump

从runpe启动时是否可以转储自己的进程？

进程的起始地址等在哪里？

编辑：

我有这个单元从内存中运行一个可执行文件：

```
unit uExecFromMem;

interface

uses Windows;

function ExecuteFromMem(szFilePath:string; pFile:Pointer):DWORD;

type
  PImageBaseRelocation = ^TImageBaseRelocation;
  TImageBaseRelocation = packed record
     VirtualAddress: DWORD;
     SizeOfBlock: DWORD;
  end;

function NtUnmapViewOfSection(ProcessHandle:DWORD; BaseAddress:Pointer):DWORD; stdcall; external 'ntdll';

implementation

procedure PerformBaseRelocation(f_module: Pointer; INH:PImageNtHeaders; f_delta: Cardinal); stdcall;
var
  l_i: Cardinal;
  l_codebase: Pointer;
  l_relocation: PImageBaseRelocation;
  l_dest: Pointer;
  l_relInfo: ^Word;
  l_patchAddrHL: ^DWord;
  l_type, l_offset: integer;
begin
  l_codebase := f_module;
  if INH^.OptionalHeader.DataDirectory[5].Size > 0 then
  begin
    l_relocation := PImageBaseRelocation(Cardinal(l_codebase) + INH^.OptionalHeader.DataDirectory[5].VirtualAddress);
    while l_relocation.VirtualAddress > 0 do
    begin
      l_dest := Pointer((Cardinal(l_codebase) + l_relocation.VirtualAddress));
      l_relInfo := Pointer(Cardinal(l_relocation) + 8);
      for l_i := 0 to (trunc(((l_relocation.SizeOfBlock - 8) / 2)) - 1) do
      begin
        l_type := (l_relInfo^ shr 12);
        l_offset := l_relInfo^ and $FFF;
        if l_type = 3 then
        begin
          l_patchAddrHL := Pointer(Cardinal(l_dest) + Cardinal(l_offset));
          l_patchAddrHL^ := l_patchAddrHL^ + f_delta;
        end;
        inc(l_relInfo);
      end;
      l_relocation := Pointer(cardinal(l_relocation) + l_relocation.SizeOfBlock);
    end;
  end;
end;

function AlignImage(pImage:Pointer):Pointer;
var
  IDH:          PImageDosHeader;
  INH:          PImageNtHeaders;
  ISH:          PImageSectionHeader;
  i:            WORD;
begin
  IDH := pImage;
  INH := Pointer(DWORD(pImage) + IDH^._lfanew);
  GetMem(Result, INH^.OptionalHeader.SizeOfImage);
  ZeroMemory(Result, INH^.OptionalHeader.SizeOfImage);
  CopyMemory(Result, pImage, INH^.OptionalHeader.SizeOfHeaders);
  for i := 0 to INH^.FileHeader.NumberOfSections - 1 do
  begin
    ISH := Pointer(DWORD(pImage) + IDH^._lfanew + 248 + i * 40);
    CopyMemory(Pointer(DWORD(Result) + ISH^.VirtualAddress), Pointer(DWORD(pImage) + ISH^.PointerToRawData), ISH^.SizeOfRawData);
  end;
end;

function ExecuteFromMem(szFilePath:string; pFile:Pointer):DWORD;
var
  PI:           TProcessInformation;
  SI:           TStartupInfo;
  CT:           TContext;
  IDH:          PImageDosHeader;
  INH:          PImageNtHeaders;
  dwImageBase:  DWORD;
  pModule:      Pointer;
  dwNull:       DWORD;
begin
  Result := 0;
  IDH := pFile;
  if IDH^.e_magic = IMAGE_DOS_SIGNATURE then
  begin
    INH := Pointer(DWORD(pFile) + IDH^._lfanew);
    if INH^.Signature = IMAGE_NT_SIGNATURE then
    begin
      FillChar(SI, SizeOf(TStartupInfo), #0);
      FillChar(PI, SizeOf(TProcessInformation), #0);
      SI.cb := SizeOf(TStartupInfo);
      if CreateProcess(nil, PChar(szFilePath), nil, nil, FALSE, CREATE_SUSPENDED, nil, nil, SI, PI) then
      begin
        CT.ContextFlags := CONTEXT_FULL;
        if GetThreadContext(PI.hThread, CT) then
        begin
          ReadProcessMemory(PI.hProcess, Pointer(CT.Ebx + 8), @dwImageBase, 4, dwNull);
          if dwImageBase = INH^.OptionalHeader.ImageBase then
          begin
            if NtUnmapViewOfSection(PI.hProcess, Pointer(INH^.OptionalHeader.ImageBase)) = 0 then
              pModule := VirtualAllocEx(PI.hProcess, Pointer(INH^.OptionalHeader.ImageBase), INH^.OptionalHeader.SizeOfImage, MEM_COMMIT or MEM_RESERVE, PAGE_EXECUTE_READWRITE)
            else
              pModule := VirtualAllocEx(PI.hProcess, nil, INH^.OptionalHeader.SizeOfImage, MEM_COMMIT or MEM_RESERVE, PAGE_EXECUTE_READWRITE);
          end
          else
            pModule := VirtualAllocEx(PI.hProcess, Pointer(INH^.OptionalHeader.ImageBase), INH^.OptionalHeader.SizeOfImage, MEM_COMMIT or MEM_RESERVE, PAGE_EXECUTE_READWRITE);
          if pModule <> nil then
          begin
            pFile := AlignImage(pFile);
            if DWORD(pModule) <> INH^.OptionalHeader.ImageBase then
            begin
              PerformBaseRelocation(pFile, INH, (DWORD(pModule) - INH^.OptionalHeader.ImageBase));
              INH^.OptionalHeader.ImageBase := DWORD(pModule);
              CopyMemory(Pointer(DWORD(pFile) + IDH^._lfanew), INH, 248);
            end;
            WriteProcessMemory(PI.hProcess, pModule, pFile, INH.OptionalHeader.SizeOfImage, dwNull);
            WriteProcessMemory(PI.hProcess, Pointer(CT.Ebx + 8), @pModule, 4, dwNull);
            CT.Eax := DWORD(pModule) + INH^.OptionalHeader.AddressOfEntryPoint;
            SetThreadContext(PI.hThread, CT);
            ResumeThread(PI.hThread);
            FreeMem(pFile, INH^.OptionalHeader.SizeOfImage);
            Result := PI.hThread;
          end;
        end;
      end;
    end;
  end;
end;

end. 
```

然后我有Application1和Application2。

Application1 将 Application2（完整的可执行文件）存储在内存中。然后 Application1 从内存中启动 Application2，如下所示：

```
ExecuteFromMem(paramstr(0), @Application2InMemory) // uses Application1 as Host 
```

现在 Application2 已加载到内存中并启动！Application2 如何将它的数据（Application2.exe）返回到磁盘（或返回到 var）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:37:07.363

您正在从 Application1 再次启动 Application1 但已暂停。在恢复 Application1 之前，您正在从磁盘加载 Application2 并将其复制到 Application1（的第二个实例）的内存中的地址。附加的代码负责复制 PE 标头、DOS 标头、NT 标头、可选标头等，并在需要时调整重定位。

实际上，您在内存中*有*Application2，它只是在任务管理器中被称为 Application1。因此，如果您将 Application2 从 Application2 转储到磁盘，您将获得 Application2，试试吧！

# xcode - Xcode：白名单拒绝 Phonegap 2.1（添加了外部主机！）

> ID：13129317
> 
> 赞同：0
> 
> 时间：2012-10-29T20:41:26.060
> 
> 标签：xcode, cordova, whitelist

我正在围绕最新的 phonegap 平台 (2.1) 重建我的 phonegap/cordova 应用程序，并立即遇到错误。

启动应用程序后，输出控制台中会显示一些经典的***“错误白名单拒绝” 。****实际上，我已将 ExternalHosts 数组添加*到我的**信息 plist**中，如下所示，我确信它已正确完成。我已经尝试了我的域的大约 2323434 种不同的变体，例如 *.quickcore.se 、 quickcore.se/app www.quickcore.se 、[http://quickcore.se](http://quickcore.se)等名称，但没有进一步的成功。

![信息 plist 设置](../Images/b32108ee863374fd0ea36d79e3d33b8d.png)

那么这里发生了什么？知道如何解决它吗？我正在使用 Xcode 4.5.1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T22:51:11.043

看起来您已将`ExternalHosts`密钥添加到错误的文件中。该条目需要`Cordova.plist`位于 Resources 文件夹中。

# jquery - JQuery date picker does not set hidden field value in asp.net webform

> ID：13129322
> 
> 赞同：0
> 
> 时间：2012-10-29T20:41:45.693
> 
> 标签：jquery, asp.net, jquery-ui, hidden-field

Within a webform I have a jquery datepicker that is bound to text field in the ui which in turn is bound to a hidden field (asp hidden field not html)

```
<div class="dateContainer">
     <span class="fbSmallLabel">Start Date</span>
        <input id="txtStartDate" class="datequeryterm" type="text" value="<%= ((HiddenField)Parent.FindControl("hdnStartDate")).Value %>" />
 </div> 
```

When a date is selected the hndfield is updated which then updates the value in the textbox

```
$("#btnApplyFilter").click(function () {
        setFilterFields();
        $.modal.close();
    }); 

function setFilterFields() {       
        var startDate = $("#txtStartDate").val();
        var endDate = $("#txtEndDate").val();

        $("#hdnStartDate").val(startDate);
        $("#hdnEndDate").val(endDate);
    } 
```

Using firebug or IE dev tools I can see that the hidden field is updated in the DOM however when I reference the hidden field from the webform I get a null "" value.

```
protected void SetSearchFilterData()
{
   DateTime dt;
   string StartDate = hdnStartDate.Value;
   string EndDate = hdnEndDate.Value;

   if (DateTime.TryParse(StartDate, out dt))
   {           
     srchRequest.DateRangeStart = DateTime.Parse(StartDate);
   }

   if (DateTime.TryParse(EndDate, out dt))
   {   
     srchRequest.DateRangeEnd = DateTime.Parse(EndDate);
   }
} 
```

The method is a bit basic as I was trying to explicitly see what was happening with the variable assignment. Previously I was declaring the start date and end date in the following manner

```
public string StartDate
{
  get { return hdnStartDate.Value; }
  set { hdnStartDate.Value = value; }
} 
```

While this did detect the field the value continues to be null.

Any suggestions would be appreciated

-cheers

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T21:01:02.427

您发布的一个`input`标签没有`name`所以它不会提交任何表单数据

# clojure - Can't get VimClojure to talk to NGServer

> ID：13129326
> 
> 赞同：1
> 
> 时间：2012-10-29T20:42:01.707
> 
> 标签：clojure, leiningen, nailgun, vimclojure

I'm trying to setup Vim as a Clojure programming environment, using these instructions:

[http://naleid.com/blog/2011/12/19/getting-a-clojure-repl-in-vim-with-vimclojure-nailgun-and-leiningen/](http://naleid.com/blog/2011/12/19/getting-a-clojure-repl-in-vim-with-vimclojure-nailgun-and-leiningen/)

I'm able to start `ng-server` from the root of a Leiningen project. But whenever I try to start a repl in vim, I get:

```
; Use \p to close this buffer!

VimClojure could not initialise the server connection.
That means you will not be able to use the interactive features.
Reasons might be that the server is not running or that there is
some trouble with the classpath.

VimClojure will *not* start the server for you or handle the classpath.
There is a plethora of tools like ivy, maven, gradle and leiningen,
which do this better than VimClojure could ever do it. 
```

I have `VimClojure` plugin installed and added these lines to my `.vimrc` file:

```
let vimclojure#NailgunClient = "~/bin/ng"
let vimclojure#WantNailgun = 1

let g:clj_highlight_builtins=1      " Highlight Clojure's builtins
let g:clj_paren_rainbow=1           " Rainbow parentheses'! 
```

`RainbowParens` is working and I can get a response from `ng` on the command line.

I also tried `slime.vim`. While it works, it takes a full 5 seconds to respond to a simple `(+ 2 3)` typed in `vim`, which is rather annoying.

Help?

# mysql - 使用另一个查询的结果插入/更新到表中

> ID：13129327
> 
> 赞同：1
> 
> 时间：2012-10-29T20:42:23.647
> 
> 标签：mysql

在我的应用程序中，我有两个表：一个用于跟踪记录，另一个用于跟踪某些页面上的单个页面浏览量。每个页面查看事件都会触发一条记录写入我的 Views 表。

为了计算统计数据，我有一个 cron 作业，我试图聚合这些视图的计数，按 record_id 分组并将它们保存到单独的表中。

如果我运行以下插入查询，效果很好。

```
insert into Details (record_id, views)
(select record_id, count(id) from Views where 1 group by record_id) 
```

不幸的是，这仅适用于插入，而且我很难提出正确的插入/更新查询。我试过使用`On Duplicate Key Update`，但我似乎无法弄清楚如何让它与我现有的查询一起工作。我希望避免替代方案，如果可能的话，我会在 PHP 中编写脚本并运行一堆单独的查询。

这是我的表定义：

```
Views
id (int) PK
record_id (int)
created_at (date)

Details
record_id (int) PK
views (int) 
```

**注意：**另外，在未来，我计划在 Details 表中添加更多列来表示其他统计信息，因此运行 Truncate 并重新运行上面的原始插入查询并不是真正可行的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:30:11.287

只需将其添加到末尾：

```
insert into Details (record_id, views)
(select record_id, count(id) from Views group by record_id)
on duplicate key update views = values(views); 
```

但是，要使它起作用，它`record_id`必须是唯一的。

# assembly - 定义十六进制常数 (68000)？

> ID：13129329
> 
> 赞同：0
> 
> 时间：2012-10-29T20:42:34.920
> 
> 标签：assembly, 68000

如何在 68000 程序集中定义十六进制常量？我需要计算逻辑表达式 X'Y + X'Z + YZ，其中 X、Y 和 Z 是十六进制常量，结果以二进制显示。我编写了代码来计算表达式，我只是不确定如何以十六进制定义常量..然后以二进制显示它们。

作为参考，X 为 000F，Y 为 0033，Z 为 0055。

X：直流？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:54:39.287

取决于您使用的汇编程序。例如，使用气体语法，您只需编写`0xF`,`0x33`和`0x55`, 类似

```
.int 0xF*0x33+0xF*0x55+0x33*0x55 
```

# c# - 在 Html.ActionLink 中包含所有查询字符串参数

> ID：13129334
> 
> 赞同：4
> 
> 时间：2012-10-29T20:43:00.137
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, query-string

在我的页面中，我有

```
 @using (Html.BeginForm("list", "menu", FormMethod.Get))
    {
        <div>
           Show categories:
            @Html.DropDownList("groupName", (SelectList)ViewBag.groups)
            <input id="Submit1" type="submit" value="Show" />
        </div>
    } 
```

关于用户选择的选项，我生成一个列表，我的地址中的查询字符串将如下所示：

```
localhost/menu/list?groupName=controlpanel 
```

我的问题是当我使用 HtmlActionLink 例如：

```
@Html.ActionLink("Title", "List", new { foo = item.foo}) 
```

我得到的结果是：

```
localhost/menu/List?foo=123 
```

代替 ：

```
 localhost/menu/List?foo=123&groupName=controlpanel 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T20:54:20.363

它不是一个内置的解决方案，即使它似乎完全可以解决您正在寻找的内容：

[ASP.NET MVC 基于当前 Url 构建 Url](http://www.zvolkov.com/clog/2012/04/01/asp-net-mvc-build-url-based-on-current-url/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T21:36:13.387

要使用 ActionLink，您需要包含所有要出现在查询字符串中的参数。我认为最简单的方法是在您的模型上添加一个 GroupName 属性（或在 ViewBag 中像您的其他示例一样）。然后你可以这样做：

```
@Html.ActionLink("Title", "List", new { foo = item.foo, groupName = Model.GroupName }) 
```

# php - 将时间范围按其他时间范围拆分

> ID：13129336
> 
> 赞同：5
> 
> 时间：2012-10-29T20:43:25.253
> 
> 标签：php, arrays, datetime, time

我有一个复杂的任务，我已经把头撞到墙上好几天了。我尝试了大约 4 种不同的方法，但是每种方法似乎都停滞不前，而且变得非常令人沮丧。

我有一个时间范围。例如，14:30:00 到 18:30:00。考虑这个时间范围某人的工作班次。在此时间范围内，他们声明他们不能从 15:30:00 到 16:30:00 以及从 17:30:00 到 18:30:00 工作。我需要修改原始班次的开始和结束时间以删除冲突的班次。

原始移位数组如下所示：

```
$original_shift[0]['start'] = '14:30:00';
$original_shift[0]['end']   = '18:30:00'; 
```

从原始班次中删除的时间范围如下所示：

```
$subshift[0]['start'] = '15:30:00';
$subshift[0]['end']   = '16:30:00';
$subshift[1]['start'] = '17:30:00';
$subshift[1]['end']   = '18:30:00'; 
```

这是一个可视化：

![在此处输入图像描述](../Images/f0f76b55e8843855c032dcb62bf3d054.png)

所以，当我完成后，我基本上需要我原来的班次看起来像这样：

```
$original_shift[0]['start'] = '14:30:00';
$original_shift[0]['end']   = '15:30:00';
$original_shift[1]['start'] = '16:30:00';
$original_shift[1]['end']   = '17:30:00'; 
```

我还需要考虑的一些并发症是：

1.  这些时间范围可以是任何时间（不限于我在示例中使用的半小时），但是我会 100% 确定不可用的时间范围将始终在原始班次的开始和之间开始和结束结束时间。

2.  不可用时间可能会增加和/或占用整个原始班次的时间。

我不是在寻找一个“编写我的代码”的人，而是在寻找过去处理过类似事情并且可能对他们如何完成它有一些见解的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T21:20:28.790

当您特别要求“一些见解”而不是完整的工作答案时，我个人会选择填充“分钟”的数组。

```
$shift = array(
    'start' => '15:30:00',
    'end' => '18:30:00',

    'original' => array(),
    'unavailable' => array(),
    'modified' => array()
); 
```

然后你会做一些棘手的扑克来转换`15:30:00`成 930 和`18:30:00`1110（分钟数），这会给你开始时间和结束时间之间的差异。

用于`range()`快速填充`original`数组，以类似的格式加载您的数组，`unavailable`然后使用`array_intersect()`和`array_diff()`计算原始班次中的哪些分钟不可用。

从那里，建立`modified`数组，并直接从那里读取到您的输出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T00:57:50.970

您需要计算时间范围。如图所示，这似乎是一个简单的减法。拥有执行这些操作的对象会很好。

我没有为此准备好的代码，因此以下概念有点粗糙，尽管可能还不错。

`Range`表示时间从到到的类型。这些都是为了`DateTime`可以利用这些现有类型的好处。到目前为止，我并没有使用太多的好处，但是对于应用程序的其余部分，这可能是有意义的。

该`Range`类型已经包含一些我认为对进行部分计算有用的基本比较方法。

然而，由于一个对象不能将自己一分为二，我还创建了一个`Ranges`可以表示一个或多个`Range`s 的类型。这对于有一些可以“划分”的东西是必要的。

我在这里作弊了一点，因为我将差异计算实现为 的成员，返回一个包含一个或多个对象`Range`的数组。`Range`然后，最终的计算只是进行一次移位并从中减去不可用的范围：

```
$shift = new Ranges(new DateTime('14:30:00'), new DateTime('18:30:00'));

$unavailables = new Ranges([
    new Range(new DateTime('15:30:00'), new DateTime('16:30:00')),
    new Range(new DateTime('17:30:00'), new DateTime('18:30:00')),
]);

$shift->subtract($unavailables); 
```

然后转变跨越：

```
14:30:00 - 15:30:00
16:30:00 - 17:30:00 
```

[演示](https://eval.in/43205)；[要旨](https://gist.github.com/hakre/6859a19fa9108ba0173d)

我不能说它是否值得抽象，`DateTime`对象的好处在于您可以将它们与`>`,`<`和`=`. 当您需要在 Range 和 Ranges 之间进行更多计算时，这些类的真正好处可能会显现出来。也许界面还不够甜美，但是代码中已经概述了背后的基本计算。

`14:00-15:00`一个警告：我的代码中和之间的差异`14:00-15:00`将导致`14:00-14:00`. 我保持开始时间不会空着，但你也可以空着。Ranges 对象应该可以很好地处理它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T21:34:56.100

代码应该不言自明：

```
$original_shift[0]['start'] = '14:30:00';
$original_shift[0]['end'] = '18:30:00';

$breaks[0]['start'] = '14:30:00';
$breaks[0]['end'] = '15:30:00';
$breaks[1]['start'] = '16:30:00';
$breaks[1]['end'] = '17:30:00';

$modified_shift = array(
    array('start' => $original_shift[0]['start'])
);

for($x = 0, $y = count($breaks), $z = 0; $x < $y; $x++){
    $modified_shift[$z]['end'] = $breaks[$x]['start'];
    if($modified_shift[$z]['end'] != $modified_shift[$z]['start']){
        $z++;       
    }
    $modified_shift[$z]['start'] = $breaks[$x]['end'];
}

$modified_shift[$z]['end'] = $original_shift[0]['end'];

if($modified_shift[$z]['end'] == $modified_shift[$z]['start']){
    unset($modified_shift[$z]);
} 
```

# java - 浏览器中的 Java Applet 错误 - java.lang.ExceptionInInitializerError

> ID：13129338
> 
> 赞同：0
> 
> 时间：2012-10-29T20:43:39.927
> 
> 标签：java, applet

我试图在我的浏览器中运行我的第一个 java 小程序，但是当我打开嵌入了小程序类的 HTML 文件时，会发生以下错误：

```
java.lang.RuntimeException: java.lang.ExceptionInInitializerError
at sun.plugin2.applet.Plugin2Manager.createApplet(Unknown Source)
at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
    Caused by: java.lang.ExceptionInInitializerError
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at java.lang.Class.newInstance0(Unknown Source)
at java.lang.Class.newInstance(Unknown Source)
at sun.plugin2.applet.Plugin2Manager$12.run(Unknown Source)
at java.awt.event.InvocationEvent.dispatch(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source)
    Caused by: java.security.AccessControlException: access denied (java.util.PropertyPermission user.dir read)
at java.security.AccessControlContext.checkPermission(Unknown Source)
at java.security.AccessController.checkPermission(Unknown Source)
at java.lang.SecurityManager.checkPermission(Unknown Source)
at java.lang.SecurityManager.checkPropertyAccess(Unknown Source)
at java.lang.System.getProperty(Unknown Source)
at Applet.MAIN.<clinit>(MAIN.java:39)
... 21 more 
```

我应该怎么做才能解决这个问题？

这是：[整个错误块](http://www.dltube.ir/jup/applet.txt)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:47:25.067

Applet 的权限有限。未签名的小程序无法访问文件系统和部分系统属性。在您的情况下，您尝试访问`user.dir`.

您有以下解决方案。

1.  尽量避免使用 user.dir
2.  签署你的小程序
3.  根本不使用小程序。请改用 java web start。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T20:47:28.797

您正在尝试访问您无权访问的内容

```
 Caused by: java.security.AccessControlException: access denied (java.util.PropertyPermission user.dir read) 
```

你可以签署你的小程序

和/或在用户主目录中设置权限

[http://docs.oracle.com/javase/1.4.2/docs/guide/security/permissions.html](http://docs.oracle.com/javase/1.4.2/docs/guide/security/permissions.html)

# .net - .Net Attribute.Match 与 .Equals？

> ID：13129339
> 
> 赞同：1
> 
> 时间：2012-10-29T20:43:40.690
> 
> 标签：.net

当我注意到虚函数时，我今天正在实现自己的属性`Match`。正常的实现`Match`是调用`Equals`，那么为什么它首先存在呢？

该文档说明了以下内容`Match`

> 在派生类中重写时，返回一个值，该值指示此实例是否等于指定对象。

该文档说明了以下内容`Equals`

> 返回一个值，该值指示此实例是否等于指定对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:46:28.577

该方法[在 MSDN 中的备注部分](http://msdn.microsoft.com/en-us/library/system.attribute.match.aspx)解释了它们的区别：

> 此方法确定一个属性是否等于另一个。它的默认实现与 Equals 相同，后者执行值和引用比较。重写此方法以实现对属性值的支持，例如标志或位字段，这些属性值由本身有意义的组件组成。
> 
> 例如，考虑一个属性，它的值是一个二进制字段，分为标志位字段。此属性的两个实例具有一个共同设置的标志，而所有其他标志不同。Equals 方法无法确定两个实例是否具有相同的标志集，但 Match 方法可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T20:46:36.677

从[匹配](http://msdn.microsoft.com/en-us/library/system.attribute.match.aspx)文档中：

> 考虑一个属性，它的值是一个二进制字段，分为标志位字段。此属性的两个实例具有一个共同设置的标志，而所有其他标志不同。Equals 方法无法确定两个实例是否具有相同的标志集，但 Match 方法可以。

# c++ - 列出子目录中所有文件的递归函数

> ID：13129340
> 
> 赞同：10
> 
> 时间：2012-10-29T20:43:52.983
> 
> 标签：c++

我正在尝试编写一个函数，该函数返回当前文件夹及其所有子文件夹中所有文件的列表。我写了这段代码：

```
#include <iostream>
#include <dirent.h>
#include <cstring>

using namespace std;

int main() {
   DIR* dir; dirent* pdir;
   //From my workspace
   dir=opendir(".");     
   while (pdir=readdir(dir)) {
       if(/**********This pdir is a directory**********/) {
           /**********RECURSIVE CALL SHOULD BE HERE**********/
           cout<<pdir->d_name<<endl;
       }
   }
   closedir(dir);
   return 0;
} 
```

我在谷歌搜索它，但我不知道如何：

*   检查当前`pdir`是否是目录
*   进入目录并对其执行递归调用

**同时，我在 main 上有一切，因为我仍然不知道递归函数应该有什么参数。**

有什么提示吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-05-14T15:17:09.693

这是使用建议的标准文件系统库的版本：

```
#include <iostream>
#include <filesystem>

using namespace std;
using namespace std::tr2::sys;

void main()
{   
  for (recursive_directory_iterator i("."), end; i != end; ++i) 
    if (!is_directory(i->path()))
      cout << i->path().filename() << "\n";
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-29T21:44:11.893

除非您的目标是学习如何编写递归函数，否则您可能更喜欢这个基于[Boost.Filesystem](http://www.boost.org/doc/libs/release/libs/filesystem/doc/index.htm)的简单循环：

```
#include "boost/filesystem.hpp"
#include <iostream>

int main () {
  for ( boost::filesystem::recursive_directory_iterator end, dir("./");
    dir != end; ++dir ) {
    // std::cout << *dir << "\n";  // full path
    std::cout << dir->path().filename() << "\n"; // just last bit
  }
} 
```

甚至是单个函数调用：

```
std::copy(
  boost::filesystem::recursive_directory_iterator("./"),
  boost::filesystem::recursive_directory_iterator(),
  std::ostream_iterator<boost::filesystem::directory_entry>(std::cout, "\n")); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-10-31T22:09:47.723

我在 C++11 中的方法：

```
#include <string>
#include <functional>
#include <dirent.h>

void listFiles(const std::string &path, std::function<void(const std::string &)> cb) {
    if (auto dir = opendir(path.c_str())) {
        while (auto f = readdir(dir)) {
            if (!f->d_name || f->d_name[0] == '.') continue;
            if (f->d_type == DT_DIR) 
                listFiles(path + f->d_name + "/", cb);

            if (f->d_type == DT_REG)
                cb(path + f->d_name);
        }
        closedir(dir);
    }
} 
```

用法：

```
listFiles("my_directory/", [](const std::string &path) {
    std::cout << path << std::endl;
}); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-29T20:50:49.727

在将基目录路径作为参数的过程中隔离该代码，以便您可以实际执行递归调用。它应该是这样的

```
void recursive_file_list(const char * directory)
{
    // ...
} 
```

然后，要检查`pdir`您获得的是否是目录，您有两条路线：

*   你可以检查一下`pdir->d_type==DT_DIR`；这会立即为您提供此信息，但它不可移植（POSIX 不要求`d_type`成员的存在）；此外，并非所有文件系统都支持它，因此您可能会得到`DT_UNKNOWN`. 如果你想遵循符号链接，你还必须执行额外的检查，如果你得到`DT_LNK`. 在这些情况下，您必须退回到`lstat`（请参阅下面的点）；
*   您可以改为便携使用`lstat`来获取有关每个文件的信息，特别是`st_mode`检查`struct stat`.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-01-26T20:01:49.353

使用 C++17 [recursive_directory_iterator](https://en.cppreference.com/w/cpp/filesystem/recursive_directory_iterator)它变得简洁：

```
void ls_recursive(const std::filesystem::path& path) {
    for(const auto& p: std::filesystem::recursive_directory_iterator(path)) {
        if (!std::filesystem::is_directory(p)) {
            std::cout << p.path() << '\n';
        }
    }
} 
```

使用示例输出：

```
"/home/user/prj/rust/stack/Cargo.toml"
"/home/user/prj/rust/stack/.gitignore"
"/home/user/prj/rust/stack/src/main.rs"
"/home/user/prj/rust/stack/.git/config" 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-10-13T11:09:42.190

它使用标准的 c++ 功能。无需在代码中包含任何第三方库。

仅发送目录路径作为参数。它将还原该文件夹及其子文件夹中存在的每个文件路径。

此外，如果您需要对任何特定类型的文件（即 .txt 或 .jpg）进行排序，传递扩展名，它将打印所有具有相应扩展名的文件路径。

```
#include <Windows.h>
#include<iostream>
#include<vector>
#include<string>
using namespace std;

vector<string> files;

std::string Recursive(std::string folder) {
    std::string search_path = folder + "/*.*";
    WIN32_FIND_DATA fd;
    HANDLE hFind = ::FindFirstFile(search_path.c_str(), &fd);
    std::string tmp;
    if (hFind != INVALID_HANDLE_VALUE) {
        do {
            if (fd.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY) {
                if (!(!strcmp(fd.cFileName, ".") || !strcmp(fd.cFileName, ".."))) {
                    tmp = folder + "\\";
                    tmp = tmp + fd.cFileName;
                    Recursive(tmp);
                }
            }
            else {
                std::string FinalFilePath = folder + "\\" + fd.cFileName;
                files.push_back(FinalFilePath);
            }

        } while (::FindNextFile(hFind, &fd));
        ::FindClose(hFind);
    }
    return folder;
}

bool has_suffix(const std::string& str, const std::string& suffix) {
    return str.size() >= suffix.size() &&
        str.compare(str.size() - suffix.size(), suffix.size(), suffix) == 0;
}

int main(){
std::string folder = "C:\\Users\\Omkar\\Desktop\\Test";
    Recursive(folder);
    std::string t;
    const auto needle = std::string(".txt");
    while (!files.empty()) {
        t = files.back();
        if (has_suffix(t, ".mmt")) {
            cout << "FINAL PATH : " << t << endl;
            t.clear();
        }
        files.pop_back();
    }
return 0;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-11-24T15:24:58.087

路径应该看起来像 `/your_path/`. 要在隐藏文件夹中搜索，您应该添加第三个参数`true`。

```
#include <dirent.h>
#include <vector>
#include <cstring>    

void GetReqDirs(const std::string& path, std::vector<string>& files,const bool showHiddenDirs = false){
    DIR *dpdf;
    struct dirent *epdf;
    dpdf = opendir(path.c_str());
    if (dpdf != NULL){
        while ((epdf = readdir(dpdf)) != NULL){
            if(showHiddenDirs ? (epdf->d_type==DT_DIR && string(epdf->d_name) != ".." && string(epdf->d_name) != "." ) : (epdf->d_type==DT_DIR && strstr(epdf->d_name,"..") == NULL && strstr(epdf->d_name,".") == NULL ) ){
                GetReqDirs(path+epdf->d_name+"/",files, showHiddenDirs);
            }
            if(epdf->d_type==DT_REG){
                files.push_back(path+epdf->d_name);
            }
        }
    }
    closedir(dpdf);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-01T14:41:59.643

您可以检查是否没有“。” 在字符串中。

```
if(strstr(pdir->d_name,".") != NULL) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-31T16:57:46.893

这是我如何使用它

```
std::vector<std::string> get_all_files_recursive(const fs::path& path)
    {
        std::vector<std::string> result;

        for (const auto& p : fs::recursive_directory_iterator(path))
        {
            if (!fs::is_directory(p))
            {
                fs::path path = p.path();
                result.push_back(path.u8string());
            }
        }

        return result;
    } 
```

# actionscript-3 - (AS3) 错误 #1009

> ID：13129341
> 
> 赞同：0
> 
> 时间：2012-10-29T20:43:54.397
> 
> 标签：actionscript-3

好的，所以我有这个基本上充当敌人经理的课程。出于某种原因，每当我尝试在类中创建项目符号实例并使用 addChild() 时，都会收到错误 #1009。这是代码：

```
var bullet:EnemyBullet = new EnemyBullet();

stage.addChild(bullet);   //Error comes up here

bullet.x = enemy.x;
bullet.y = enemy.y;

bManager.bulletVector.push(bullet); 
```

我一直在将此方法用于其他两个类而没有问题，所以我被卡住了。感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:54:48.730

我猜是因为班级不知道舞台在哪里

处理这个问题的方法是使用一个AddedToStage 事件处理程序，并将`stage.addChild`代码放入

# javascript - jQuery - 使用 parent().before() + parent.after() 添加 2 个按钮，稍后使用 .toggle()

> ID：13129343
> 
> 赞同：0
> 
> 时间：2012-10-29T20:44:01.907
> 
> 标签：javascript, jquery

这是我的做法

```
//wrap a div arround the table
$(this).wrap('<div class="table_space"><div class="table_wrapper_div">
</div></div>').parent().before('<button class="my_button" >
EXPANDIR</button>').after('<button class="my_button">EXPANDIR</button>'); 
```

这 = 一张很大的桌子

```
$('.my_button').toggle(
        function(){ 
            ... blablabla ...
    },
    function(){ 
        ... blabllaba ...
    }
); 
```

但是永远不会触发切换事件......现在如果我直接在 html 页面中添加按钮，那么在这种情况下会触发切换事件。任何帮助都会很棒，我一直在寻找其他问题，但没有找到任何线索。非常感谢

编辑：注意 - 包装给出了我需要的东西，并将按钮放在 table_space 和 table_wrapper_div 之间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T20:47:52.603

在元素被动态添加到 HTML 的这种情况下，您需要**委托...**

在内部，事件使用点击事件关联。

试试这个方法

```
$('body').on('click', '.my_button', function() {
    $('.my_button').toggle(
          function(){ 
              ... blablabla ...
          },
          function(){ 
              ... blabllaba ...
          }
    );
}); 
```

# php - 在第三级对多维数组进行排序

> ID：13129346
> 
> 赞同：0
> 
> 时间：2012-10-29T20:44:10.393
> 
> 标签：php, arrays, sorting, multidimensional-array, associative-array

在下面的数组中，您可以看到“listElemId”的顺序与数组中的前三个元素不同。我想要的是它们按顺序排列（listElem 1,2,3）。'listElemPoints' 当然应该跟随。

如何实现？

提前致谢！

```
$listArray {
  [0] {
      [0] {
          ["listElemId"] = 2    // <- should be 1
          ["listElemPoints"] = 1 }
      [1] {
          ["listElemId"] = 3    // <- should be 2
          ["listElemPoints"] = 2 }
      [2] {
        ["listElemId"] = 1      // <- should be 3
        ["listElemPoints"] = 3 }
      }
  [1] {
      [0] {
          ["listElemId"] = 3    // <- should be 1
          ["listElemPoints"] = 1 }
      [1] {
          ["listElemId"] = 2    // <- correct
          ["listElemPoints"] = 2 }
      [2] {
          ["listElemId"] = 1    // <- should be 3
          ["listElemPoints"] = 3 }
      }
  [2] {
      [0] {
          ["listElemId"] = 3    // <- should be 1
          ["listElemPoints"] = 1 }
      [1] {
          ["listElemId"] = 1    // <- should be 2
          ["listElemPoints"] = 2 }
      [2] {
          ["listElemId"] = 2    // <- should be 3
          ["listElemPoints"] = 3 }
      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:00:48.173

像这样的东西应该可以工作（未经测试）：

```
foreach ($listArray as &$arr) {
  uasort($arr, function($a, $b) {
    return $a['listElemId'] > $b['listElemId'];
  });
} 
```

# android - 当我的应用从后台恢复时执行任务

> ID：13129347
> 
> 赞同：0
> 
> 时间：2012-10-29T20:44:10.700
> 
> 标签：android

当用户从后台恢复我的应用程序时，我需要做一些网络请求（例如：使用应用程序 - 按下主页按钮 - 主屏幕 - 通过任务管理器或单击应用程序图标再次切换到我的应用程序）。我不希望这由屏幕旋转或 startActivity() 对当前活动的简单更改触发。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:45:57.937

覆盖[onResume()](http://developer.android.com/reference/android/app/Activity.html#onResume%28%29)方法。

```
@Override
public void onResume() {
    super.onResume();
    //Your work goes here
} 
```

`onResume()`将在用户返回 Activity 时调用。

# php - 检测 AOL 浏览器

> ID：13129348
> 
> 赞同：-1
> 
> 时间：2012-10-29T20:44:14.293
> 
> 标签：php, browser

我想知道是否有人可以告诉我 AOL 和 AOL 浏览器的用户代理是什么？我需要向我的网站访问者显示 AOL 不兼容的消息。

我使用 PHP 的计划是做类似的事情：

```
if (strpos($_SERVER['HTTP_USER_AGENT'], 'AOL') == false)
 return false;
else
 return true; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:48:16.330

AOL 并没有自己的浏览器，它会生成一个 Internet Explorer 窗口，但是可以在此处找到包含 AOL 的用户代理字符串[http://www.useragentstring.com/pages/AOL/](http://www.useragentstring.com/pages/AOL/)

# perl - “perl -e”字符串中 Net::SSLeay 变量赋值的 Perl 语法（它本身在脚本中）

> ID：13129350
> 
> 赞同：2
> 
> 时间：2012-10-29T20:44:41.070
> 
> 标签：perl, syntax, openssl

以下摘录来自免费软件`mon`监控程序的 https.monitor。

```
$result = `$perl -e'use Net::SSLeay ; Net::SSLeay::SSLeay_add_ssl_algorithms() ; print join("$field_delim",Net::SSLeay::get_https("$site", "$port", "$path"))'`; 
```

一些被监控的 HTTPS 服务器与具有自动检测和/或 TLS 的 OpenSSL (Net::SSLeay) 不兼容，因此需要将 Net::SSLeay::ssl_version 变量显式更改为 v3。

以下从命令行按预期工作，并将 ssl_version 显式更改为 3：

```
perl -e 'use Net::SSLeay; Net::SSLeay::SSLeay_add_ssl_algorithms() ; $Net::SSLeay::ssl_version = 3 ; print join("<>",Net::SSLeay::get_https("server.domain.internal", "443", "/"))' 
```

我无法让它在 https.monitor perl 文件的原始行中工作。如上所述，perl 将提示以下错误：

`Can't modify constant item in scalar assignment at -e line 1, near "3 ;"`

我已经尝试了各种语法来编译这一行并采用 ssl_version 设置，但我似乎无法同时实现这两者。对 Net::SSLeay::ssl_version 变量赋值使用“=>”语法我可以编译它，但设置似乎没有“接受”。我使用了 $Net::SSLeay::ssl_version 和“$Net::SSLeay::ssl_version”、变量周围的花括号等，但我无法让它正常工作。

perl 脚本中“perl -e”行中“Net::SSLeay::ssl_version = 3”的语法应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:31:36.977

```
my $result = `perl -e'... \$Net::SSLeay::ssl_version = 3; ...'`; 
```

不过这太容易出错了。您可以使用[String::ShellQuote](http://search.cpan.org/perldoc?String%3a%3aShellQuote)正确引用 unix shell 。`shell_quote`

```
use String::ShellQuote qw( shell_quote );

my $cmd = shell_quote(
    $perl,
    -e => <<'__EOI__',
        use Net::SSLeay;
        my ($field_delim, $site, $port, $path) = @ARGV;
        Net::SSLeay::SSLeay_add_ssl_algorithms();
        $Net::SSLeay::ssl_version = 3;
        print join($field_delim, Net::SSLeay::get_https($site, $port, $path));
__EOI__
    '--',
    $field_delim, $site, $port, $path,
);

my $result = `$cmd`; 
```

您可以完全避免使用[IPC::System::Simple](http://search.cpan.org/perldoc?IPC%3a%3aSystem%3a%3aSimple)的shell `capturex`。

```
use IPC::System::Simple qw( capturex );

my @cmd = (
    $perl,
    -e => <<'__EOI__',
        use Net::SSLeay;
        my ($field_delim, $site, $port, $path) = @ARGV;
        Net::SSLeay::SSLeay_add_ssl_algorithms();
        $Net::SSLeay::ssl_version = 3;
        print join($field_delim, Net::SSLeay::get_https($site, $port, $path));
__EOI__
    '--',
    $field_delim, $site, $port, $path,
);

my $result = capturex(@cmd); 
```

奖励：`capturex`为您检查错误！使用前两种方法，您至少需要以下内容：

```
die $! if $? == -1;
die "Killed by signal ".($? & 127) if $? & 127;
die "Exited with error ".($? >> 8) if $? >> 8; 
```

# node.js - 在 heroku 上运行的 Node.js 应用程序 - 找不到模块 ./http

> ID：13129354
> 
> 赞同：2
> 
> 时间：2012-10-29T20:44:57.490
> 
> 标签：node.js, heroku, express

我要疯了，想弄清楚这一点。我有一个使用 Express 和 MongoDB（猫鼬）的 node.js 应用程序。它在本地运行得很好。我将它部署到 heroku 似乎没有问题，但是当我尝试实际启动应用程序时它崩溃了。heroku 日志是这样说的：

```
macbook-pro-4:FF_Courtney cmitchell$ heroku logs
2012-10-29T19:31:27+00:00 heroku[web.1]: State changed from crashed to starting
2012-10-29T19:31:30+00:00 heroku[web.1]: Starting process with command `node web.js`
2012-10-29T19:31:31+00:00 app[web.1]: 
2012-10-29T19:31:31+00:00 app[web.1]: module.js:340
2012-10-29T19:31:31+00:00 app[web.1]:     throw err;
2012-10-29T19:31:31+00:00 app[web.1]: Error: Cannot find module './http'
2012-10-29T19:31:31+00:00 app[web.1]:           ^
2012-10-29T19:31:31+00:00 app[web.1]:     at Function.Module._resolveFilename     (module.js:338:15)
2012-10-29T19:31:31+00:00 app[web.1]:     at Function.Module._load (module.js:280:25)
2012-10-29T19:31:31+00:00 app[web.1]:     at Module.require (module.js:362:17)
2012-10-29T19:31:31+00:00 app[web.1]:     at require (module.js:378:17)
2012-10-29T19:31:31+00:00 app[web.1]:     at Object.<anonymous>  (/app/node_modules/express/node_modules/connect/lib/connect.js:13:18)
2012-10-29T19:31:31+00:00 app[web.1]:     at Module._compile (module.js:449:26)
2012-10-29T19:31:31+00:00 app[web.1]:     at Object.Module._extensions..js (module.js:467:10)
2012-10-29T19:31:31+00:00 app[web.1]:     at Module.load (module.js:356:32)
2012-10-29T19:31:31+00:00 app[web.1]:     at Function.Module._load (module.js:312:12)
2012-10-29T19:31:31+00:00 app[web.1]:     at Module.require (module.js:362:17)
2012-10-29T19:31:32+00:00 heroku[web.1]: Process exited with status 1 
```

我有一个包含我的依赖项的 package.json 文件：

```
{
  "name": "favorite-failure",
  "version": "0.0.1",
  "dependencies": {
    "express": "2.5.6",
    "ejs" : "latest",
    "mongoose" : "3.3.1",
    "request" : "2.11.4",
    "moment" : "1.7.2",
    "mongodb" : "0.9.6-7",
    "connect-mongodb": ">= 1.1.3"
  },
  "engines": {
      "node": ">= 0.8.12",
      "npm": ">= 1.1.49"
  }
} 
```

我对此有点陌生，所以任何帮助将不胜感激。谢谢！

# android-layout - 如何以编程方式将布局放置在屏幕中心？

> ID：13129355
> 
> 赞同：0
> 
> 时间：2012-10-29T20:45:00.263
> 
> 标签：android-layout

layout1 由屏幕顶部的状态栏和底部的工具栏组成。它是在xml中定义的。我想以编程方式将 layout2 放置在 layout1 的状态栏和工具栏之间。

```
setContentView(R.layout.layout1);
layout2 = new MyLayout(this);
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
    LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
params.leftMargin = 0;
params.addRule(RelativeLayout.BELOW, R.id.statusbar); // this does not work.
addContentView(layout2, params); 
```

此代码将 layout2 放在屏幕顶部，因此它隐藏了 layout1 的状态栏。如何将 layout2 放置在我想要的位置？还有其他不使用 addContentView 的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:37:59.933

```
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
    LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

params.gravity = Gravity.CENTER; 
```

我尝试了这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T04:44:08.273

以编程方式在线性布局中设置重力。

```
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
        LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

    params.gravity = Gravity.CENTER; 
```

# java - PHP 套接字消息为空

> ID：13129357
> 
> 赞同：0
> 
> 时间：2012-10-29T20:45:12.077
> 
> 标签：java, php, sockets

我在 php 中打开一个套接字并发送一条消息。当我尝试在此套接字中读取 Java 中的消息时，连接已建立但消息为空？

有什么帮助吗？[无法使用 PHP 客户端从 Java 套接字服务器读取响应](https://stackoverflow.com/questions/10667823/cannot-read-response-from-java-socket-server-using-php-client)这是我遇到的相同问题，但我确实将 \n 放入消息中。

```
 // variables
        $host = gethostbyname('localhost');
        $port = 4444;   
        $message = $host." list\n\0";

        // create socket
        if (!($sock = socket_create(AF_INET, SOCK_STREAM, SOL_TCP))) {
            $errorcode = socket_last_error();
            $errormsg = socket_strerror($errorcode);
            die("Couldn't create socket: [$errorcode] $errormsg \n");
        }
        echo "Socket created!\n";

        // connect
        if (!socket_connect($sock, $host, $port)) {
            $errorcode = socket_last_error();
            $errormsg = socket_strerror($errorcode);
            die("Couldn't connect: [$errorcode] $errormsg \n");
        }
        echo "Connection established!\n";
        echo $message;
        $length = strlen($message);
        // get room info - send message
        while(true){
            $sent=sock_write($sock, $message, 1024);
            if ($sent===false) {
                $errorcode = socket_last_error();
                $errormsg = socket_strerror($errorcode);
                die("Couldn't send data: [$errorcode] $errormsg \n");
            }
            // Check if the entire message has been sented
                if ($sent < $length) {

                // If not sent the entire message.
                // Get the part of the message that has not yet been sented as message
               $st = substr($msg, $sent);
               $message= $st;

                // Get the length of the not sented part
                $length -= $sent;

            } else {

                break;
            }

        }           

        echo "Message sent!\n"; 
```

和java端

```
 while (true) { 

        try {

            socket = new ServerSocket(4444);

        } catch (UnknownHostException e) {
            System.err.println("Dont know about host: localhost.");
            System.exit(1);
        } catch (IOException e) {
            System.err.println("Couldn't get I/O for the connection to localhost");
            System.exit(1);
        }

        try {

            clientSocket = socket.accept();
            System.out.printf("Connected!\n");

        } catch (IOException e) {
            e.printStackTrace();
        }

        try {

            PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);    //object to send data
            BufferedReader in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream())); //object to read data
            String inputLine, outputLine;
            inputLine = in.readLine();  //read data

            System.out.println(inputLine); 
```

Java 代码的运行类似于服务器的网关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T22:09:58.007

```
$sent=sock_write($sock, $message, 1024); 
```

这应该是

```
$sent=sock_write($sock, $message, $length); 
```

甚至 $length-1 因为 Java 对尾随的 null 不感兴趣。

# scala - Scala：枚举如何不是类型安全的？

> ID：13129358
> 
> 赞同：23
> 
> 时间：2012-10-29T20:45:20.133
> 
> 标签：scala, enums

我已经看到许多断言 Scala Enumeration 不是类型安全的。它怎么不是类型安全的？显然，类型安全似乎是因为您不能将一个 Enumeration 的值传递给另一个 Enumeration。

枚举有哪些陷阱或要避免的事情？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-29T21:26:59.633

这是半安全的。它是类型安全的是编译器虚构的，因此很容易破解。例如，

```
trait Parent
class Boy extends Parent { override def toString = "boy" }
class Girl extends Parent { override def toString = "girl" }
def f(g: Girl) = g.toString

scala> f((new Boy).asInstanceOf[Girl])
java.lang.ClassCastException: Boy cannot be cast to Girl
    at .<init>(<console>:15)
    ... 
```

好吧，男孩不是女孩。

现在让我们尝试枚举：

```
object Test extends Enumeration { val One, Two = Value }
object Probar extends Enumeration { val Uno, Dos = Value }
def h(tv: Test.Value) = tv.toString

scala> h((Probar.Uno).asInstanceOf[Test.Value])
res0: java.lang.String = Uno 
```

等等，什么？

这种虚构导致了其他奇怪的行为：

```
def h(pv: Probar.Value) = pv.toString  // Add this to the other h in a :paste

method h:(pv: Probar.Value)java.lang.String and
method h:(tv: Test.Value)java.lang.String at line 9
have same type after erasure: (pv: Enumeration#Value)java.lang.String
           def h(pv: Probar.Value) = pv.toString 
```

嗯，好的，谢谢？

然后由于编译器并没有真正理解`Enumeration`为它自己的构造，它无法以您可能期望的方式帮助您：

```
scala> def oops(tv: Test.Value) = tv match { case Test.One => "okay" }
oops: (tv: Test.Value)java.lang.String
// No incomplete match warning?  Okay....

scala> oops(Test.Two)
scala.MatchError: Two (of class scala.Enumeration$Val)
    at .oops(<console>:8)
    ... 
```

因此，如果您完全按照预期以相对有限的方式使用它，它会提供类型安全。但它没有其他模式的强大和稳健性，比如这个：

```
// In REPL, :paste the next three lines
sealed trait Foo
object Bar extends Foo
object Baz extends Foo

scala> def safe(f: Foo) = f match { case Bar => "okay" }
<console>:9: warning: match is not exhaustive!
missing combination            Baz

        def safe(f: Foo) = f match { case Bar => "okay" }
                           ^ 
```

谢谢，编译器！

# mysql - 带有 3 个子查询连接的 SQL SELECT 语句过滤

> ID：13129360
> 
> 赞同：0
> 
> 时间：2012-10-29T20:45:23.450
> 
> 标签：mysql

我意识到这可能不是一个有效的选择，但它现在可以工作......主要是。我遇到的问题是，如果没有为“iminutes”和“dminutes”提交值......我没有得到任何数据。我认为如果他们都返回“0”的值，它会解决这个问题，但不知道如何让他们这样做。建议？

```
SELECT user,total.tuser_id, total.tminutes, 
    total.tminutes-indirect.iminutes AS itminutes, total.tminutes-direct.dminutes AS dtminutes

FROM

(SELECT U.user_name AS user,U.user_id AS tuser_id, SUM(M.minutes) AS tminutes
    From summary S
    JOIN users U ON U.user_id = S.user_id
    JOIN tasks TA ON TA.task_id = S.task_id
    JOIN tcompleted TC ON TC.tcompleted_id = S.tcompleted_id
    JOIN minutes M ON M.minutes_id = S.minutes_id
    JOIN hour_interval H ON H.hourinterval_id = S.hourinterval_id
    WHERE DATE(submit_date) = curdate()
    AND TIME(submit_date) BETWEEN '00:00:01' and '23:59:59'
    GROUP BY U.user_id) total
JOIN
    (SELECT U.user_id AS iuser_id, SUM(M.minutes) AS iminutes
    FROM summary S
    JOIN users U 
    ON U.user_id = S.user_id
    JOIN minutes M 
    ON M.minutes_id = S.minutes_id
    JOIN tasks TA 
    ON TA.task_id = S.task_id
    WHERE TA.task_type='indirect'
    AND DATE(submit_date) = curdate()
    AND TIME(submit_date) BETWEEN '00:00:01' and '23:59:59'
    GROUP BY U.user_id) AS indirect

ON  total.tuser_id = indirect.iuser_id
JOIN  
    (SELECT U.user_id AS duser_id, SUM(M.minutes) AS dminutes
    FROM summary S
    JOIN users U 
    ON U.user_id = S.user_id
    JOIN minutes M 
    ON M.minutes_id = S.minutes_id
    JOIN tasks TA 
    ON TA.task_id = S.task_id
    WHERE TA.task_type='direct'
    AND DATE(submit_date) = curdate()
    AND TIME(submit_date) BETWEEN '00:00:01' and '23:59:59'
    GROUP BY U.user_id) AS direct

ON  total.tuser_id = direct.duser_id

ORDER BY total.tuser_id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T20:51:00.930

`COALESCE`将返回提供的第一个非空值。

```
total.tminutes-COALESCE(indirect.iminutes, 0) 
```

`COALESCE`当 iminutes 为 NULL 时，此处将返回 0。您可以对 dminutes 执行相同的操作。

您可以查看 MySQL 参考手册[http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)

# c++ - 剪切和粘贴后监视文件（Windows Shell 扩展？）

> ID：13129362
> 
> 赞同：2
> 
> 时间：2012-10-29T20:45:32.260
> 
> 标签：c++, windows, file, copy, shell-extensions

我目前正处于一个小型应用程序的构思阶段，该应用程序需要跟踪特定的用户选择的文件。

我希望系统直观，这样用户可以更改文件名、目录名或将文件移动到新位置，并且应用程序仍然能够跟踪文件。

现在，我知道对于大多数此类更改，我已经可以使用 Windows 系统调用来监视目录了。

我遇到的问题是查找文件是否/何时被剪切、复制或粘贴到某处。我读过一些关于 shell 扩展的文章，但它们实际上让我很困惑（因为我还没有时间真正读到关于它们的好文章）。有没有办法可以监视文件是否被剪切/粘贴/复制，以便我的应用程序可以继续在新位置跟踪文件？我必须通过外壳扩展来做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:43:53.187

即使文件被重命名或移动，您也可以[使用快捷方式对象来跟踪文件。](http://blogs.msdn.com/b/oldnewthing/archive/2011/02/24/10133280.aspx)

# python - Google 电子表格 api 不使用 OAuth2？

> ID：13129363
> 
> 赞同：1
> 
> 时间：2012-10-29T20:45:42.930
> 
> 标签：python, google-sheets, google-spreadsheet-api

我正在尝试向 google 电子表格 API 发出授权请求，并且我发现的所有示例都向用户请求电子邮件和密码。

*   [http://www.payne.org/index.php/Reading_Google_Spreadsheets_in_Python](http://www.payne.org/index.php/Reading_Google_Spreadsheets_in_Python)
*   [http://www.mattcutts.com/blog/write-google-spreadsheet-from-python/](http://www.mattcutts.com/blog/write-google-spreadsheet-from-python/)
*   [http://mrwoof.tumblr.com/post/1004514567/using-google-python-api-to-get-rows-from-a-google](http://mrwoof.tumblr.com/post/1004514567/using-google-python-api-to-get-rows-from-a-google)

好吧，这个问题通过 Google 实现的 OAuth2 协议得到了解决。我已经完成了 OAuth2 流程，并且我有一个有效的 access_token，我用它来顺利地与 Google Drive 交互：

```
access_token = get_access_token() # external function
user_agent = request.META['HTTP_USER_AGENT']
credentials = AccessTokenCredentials(access_token, user_agent)
http = httplib2.Http()
http = credentials.authorize(http)
service = build('drive', 'v2', http)
service.files().copy(fileId=k, body=dict(title="Copia")).execute() # this works! 
```

但我想不出一种使用 access_token 与电子表格 API 交互的方法。它仍然使用电子邮件和密码登录吗？

谢谢！

PS：顺便说一句，我使用的是python gdata包，如果你有好的参考请告诉我！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:18:54.693

因此，如果您已经拥有访问令牌（也许您像我一样通过 Oauth2 协议自己获得它）。您可以与将 AuthSubToken 实例传递给 SpreadsheetsClient 方法的 google 电子表格 api 进行交互。

```
from gdata.gauth import AuthSubToken
from gdata.spreadsheets.client import SpreadsheetsClient

atok = AuthSubToken(token_string=get_access_token())  # acess token via protocol
data = SpreadsheetsClient().get_worksheets(key, auth_token=atok) 
```

# android - android facebook 集成 获取电子邮件

> ID：13129365
> 
> 赞同：1
> 
> 时间：2012-10-29T20:45:43.553
> 
> 标签：android, facebook

根据教程，我已将 facebook 登录集成到我的应用程序中，但我找不到任何关于如何检索用户电子邮件地址的好信息。电子邮件真的是我唯一需要的东西。我能够获得其他基本信息。我的活动扩展了 FaceBookActivity。当用户点击登录我的应用程序时，我调用：

```
this.openSession(); 
```

然后我有：

```
@Override
    protected void onSessionStateChange(SessionState state, Exception exception) 
    {
          // user has either logged in or not ...
          if (state.isOpened()) 
          {
                // make request to the /me API
                Request request = Request.newMeRequest(
                  this.getSession(),
                  new Request.GraphUserCallback() 
                  {
                        // callback after Graph API response with user object
                        @Override
                        public void onCompleted(GraphUser user, Response response) 
                        {
                          if (user != null) 
                          {  
                            TextView welcome = (TextView) findViewById(R.id.welcome);
                            welcome.setText("Hello " + user.getName() + "!");
                            Log.d("user fname",user.getFirstName());
                            Log.d("user lname",user.getLastName());
                            Log.d("user username",user.getUsername());
                            Log.d("user email",(String)user.getProperty("email"));

                      }
                    }
              }
            );

                Request.executeBatchAsync(request);
          }
    } 
```

GraphUser 不公开电子邮件。有任何想法吗？

我在我的 facebook 开发面板中设置了“电子邮件”权限。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T13:29:43.050

对于新的 Facebook sdk 3.0

```
String email = (String) response.getGraphObject().getProperty("email"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T15:24:39.257

好的，我想通了。GraphUser 对象将包含电子邮件地址，但我发现了一个与基本教程完全不同的登录方法。

这是基本教程： [https ://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

除了基本教程之外，这是您必须实施的教程才能使其正常工作： [https ://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/#step3](https://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/#step3)

您要做的是实现第一个登录示例，然后将其更改为第二个示例，然后在最终产品中使用第一个示例的部分内容。如果您从我发布的第一个教程开始仔细阅读每个教程，您将使其工作并学习如何通过实现额外的权限请求来从用户那里捕获您想要的任何数据。

希望这对其他人有帮助。我在“SO”上搜索的所有问题都是指具有过时方法的旧 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T17:35:18.803

如需更多权限，您可以将 .openSession() 函数更改为 .openSessionForRead(String appId, List < String > Permissions) 如果您在 strings.xml 上有 app_id 运行 .openSessionForRead(null, List Permissions)

# java - 替换数组列表

> ID：13129366
> 
> 赞同：0
> 
> 时间：2012-10-29T20:45:45.130
> 
> 标签：java

我有一个哈希映射，它将整数映射到 ArrayLists 数组。例如，我的数据结构如下：

```
7->((7,5,**4,3,1**),(7,6,4,3,1))
4->((4,2,1),(4,3,1)) 
```

这里，7是key，arraylist eg是(7,5,4,3,1)，arraylist的数组依次是((7,5,4,3,1),(7,6,4,3 ,1))

4是key，arraylist eg是(4,2,1)，arraylist的数组依次是((4,2,1),(4,3,1))

我希望替换键值（在任何给定的数组列表中）及其后面的值来创建其他数组列表，下面给出了一个示例：

```
7->((7,5,**4,2,1**),(7,6,4,2,1),(7,5,4,3,1),(7,6,4,3,1)) 
```

**我没有得到的是如何获得这种替换....创建更大的数组列表**

我没有得到的是如何获得这种替换..创建更大的数组列表..我知道数据结构..但是想通过替换来创建数组列表，如后续示例中所示

java编程中是否有某种方法可以实现这一点？我是Java编程的新手...我想了很久但无法移动它...有人可以帮忙吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T20:47:13.740

```
HashMap<Integer,ArrayList<ArrayList<Integer>>> map;
map = new HashMap<Integer,ArrayList<ArrayList<Integer>>>(); 
```

**编辑**：我使用了 2 行，以便我的答案更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T21:27:50.837

你到底想要什么？

下面的代码有用吗？

```
Map<Integer, List<List<Integer>>> mapData = new HashMap<Integer, List<List<Integer>>>();

public void fillData(List<List<Integer>> lists)
{
    // provide any kind of list of list
    // e.g lists = {2,3,5,3}, {4,5,3,2}, {2,4,3}, {6,3,4}
    for(List<Integer> list : lists)
    {
        int mapKey = list.get(0);
        if(mapData.get(mapKey) == null)
        {
            // list of list will be null in first occurence of key(first element of list).
            // create list of list and put tat in map.
            List<List<Integer>> tempListOfList = new ArrayList<List<Integer>>();
            tempListOfList.add(list);
            mapData.put(mapKey, tempListOfList);
        }
        else
        {
            // from second occurence of same key.
            // put list in the list of list of that key.
            List<List<Integer>> listOfListInMap = mapData.get(mapKey);
            listOfListInMap.add(list);
        }
    }
}

public List<List<Integer>> getListsByKey(int key)
{
    // get list of list by mapKey
    return mapData.get(key);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T20:48:16.470

下面应该这样做：

```
 Map<Integer, ArrayList <ArrayList<Integer>>> map = new hashMap<>(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T20:48:30.200

`HashMap<Integer, ArrayList<ArrayList<Integer>>>`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T20:48:31.770

您想将整数映射到整数列表列表。这可以声明为：

```
Map<Integer, List<List<Integer>>> map = new HashMap<List<List<Integer>>>(); 
```

然后，您可以放置`ArrayList<List<Integer>>`​​（或任何其他实现的类`List`）的实例，并且对于每个这样的列表列表，您可以添加`ArrayList<Integer>`.

然后，您可以使用该`List.subList()`方法将选定的子列表放入地图中的其他条目中。

假设您有一个包含两个列表`(7,5,4,3,1)`并`(7,6,4,3,1)`存储在下面`7`的列表，并且您想要构建应该存储在 key 下的列表列表`4`。你可以这样做：

```
List<List<Integer>> sevens = map.get(7);
List<List<Integer>> fours = new ArrayList<List<Integer>>();
for (List<Integer> aSevenList : sevens) {
    int index = aSevenList.indexOf(4);
    if (index >= 0) {
        fours.add(aSevenList.subList(index, aSevenList.size()));
    }
}
map.put(4, fours); 
```

如果您想将一个列表替换为另一个列表的一部分，以下代码片段显示了如何完成：

```
int[] vals = { 7, 6, 5, 4, 3, 2, 1 };
List<Integer> list = new ArrayList<Integer>();
for (int val : vals) list.add(val);
List<Integer> sub = new ArrayList<Integer>();
sub.add(40);
sub.add(30);
sub.add(20);
System.out.println("Original list: " + list);
List<Integer> slice = list.subList(3, vals.length - 1);
slice.clear();
slice.addAll(sub);
System.out.println("Modified list: " + list); 
```

这将生成以下输出：

> 原始列表：[7, 6, 5, 4, 3, 2, 1]
> 修改列表：[7, 6, 5, 40, 30, 20, 1]

请注意，对子列表的更改会传播到原始列表。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-29T20:54:19.433

考虑使用 List of Lists 并将其存储为 Map 数据结构的一部分。一种可能的方法如下：

```
Map<Integer,List<List<Integer>>> map = new HashMap<Integer, List<List<Integer>>>();

//How to add
List<List<Integer>> list = map.get(your_key);
if(list == null){ //This should be for the first time you're accessing the map with the key
 list = new ArrayList<List<Integer>>();
}
//Create a inner list which will store the list of numbers
ArrayList<Integer> innerList = new ArrayList<Integer>();
innerList.add(integer_values);

//Add inner list to the list of lists
list.add(innerList);

//Finally put the list of list into the map with the key
map.put(your_key, list); 
```

**编辑：**假设您知道要添加新元素的列表的索引：

```
//Adding numbers to the inner list - assume you know the index 
List<List<Integer>> list = map.get(key);
if(list == null || list.size() >= index){ //There's no list against the key or the size of the list is less then the index requested
 return;
}

//Add new elements to the inner list
List<Integer> innerList = list.get(index);
innerList.add(your_new_int_values);

//Add inner list to the list of lists
list.add(innerList);

//Finally put the list of list into the map with the key
map.put(key, list); 
```

# html - iOS 6 破坏了 GeoLocation 网络应用

> ID：13129369
> 
> 赞同：1
> 
> 时间：2012-10-29T20:46:03.977
> 
> 标签：html, ios6, w3c-geolocation

我们有一个 HTML5 应用程序，它使用 web sql、离线功能和地理定位 API，并且 enableHighAccuracy 选项设置为 true。

由于 iOS6 position.coords.accuracy 即使在户外热身几分钟后也经常报告高值（100m+），而 iOS5 在 iPhone 4S、iPad 3 上很快达到并保持在 5m 精度。

一种解决方法是杀死所有应用程序，然后运行 ​​Apple 地图应用程序，按下当前位置按钮，然后启动 HTML5 Web 应用程序，在这种情况下一切正常。

多亏了[SO12503815](https://stackoverflow.com/questions/12503815/ios-6-breaks-geolocation-in-webapps-apple-mobile-web-app-capable)，我们无法运行移动网络应用程序。

除了编写本机应用程序之外，还有什么解决方法吗？

# c++ - 非成员函数指针作为 API 中对成员函数的回调

> ID：13129372
> 
> 赞同：3
> 
> 时间：2012-10-29T20:46:16.377
> 
> 标签：c++, api, callback, function-pointers

我正在使用一个 API，它要求我将函数指针作为回调传递。我正在尝试从我的 C++ 类中使用此 API，但出现编译错误。

API 定义为：

```
typedef void (__stdcall *STREAM_CALLBACK)(void *userdata);

__declspec(dllimport) int __stdcall set_stream_callback(
    STREAM_CALLBACK streamCB, void *userdata); 
```

第三方提供的一个示例文件是：

```
void __stdcall streamCB(void *userdata)
{
  // callback implementation
}

int main(int argc, const char argv[])
{
  int mid = 0;
  set_stream_callback(streamCB, &mid);
} 
```

这很好用。但是，当我尝试在课堂上使用它时，出现错误：

> 错误 C3867：“MyClass::streamCB”：函数调用缺少参数列表；使用 '&MyClass::streamCB' 创建指向成员的指针

使用建议

> &MyClass::streamCB

不起作用。我知道 set_stream_callback 只接受非成员函数。

问题非常类似于 [如何将类成员函数作为回调传递？](https://stackoverflow.com/questions/400257/how-can-i-pass-a-class-member-function-as-a-callback) 约翰内斯在其中提出了一个简洁的建议，但是我不太理解。如果我正确地认为它与这个问题有关，任何人都可以扩展一下吗？

我试过了：

```
void __stdcall MyClass::streamCB(void *userdata)
{
  // callback implementation
}

static void MyClass::Callback( void * other_arg, void * this_pointer ) {
    MyClass * self = static_cast<ri::IsiDevice*>(this_pointer);
    self->streamCB( other_arg );
}

//and in the constructor
int mid = 0;
set_stream_callback(&MyClass::Callback, &mid); 
```

但

> 错误 C2664：“set_stream_callback”：无法将参数 1 从“void (__cdecl *)(void *,void *)”转换为“STREAM_CALLBACK”

我该如何解决这个问题？

* * *

Edit1：另外，我想`userdata`在`streamCB`回调中使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T21:09:28.947

从仅采用非成员函数的回调中调用成员函数的想法是为您的成员函数创建一个包装器。包装器从某个地方获取一个对象，然后调用成员函数。如果回调设计得相当好，它将允许您传递一些用于识别对象的“用户数据”。不幸的是，您遗漏了有关您的课程的任何详细信息，因此我假设它看起来像这样：

```
class MyClass {
public:
    void streamCB() {
         // whatever
    }
    // other members, constructors, private data, etc.
}; 
```

有了这个，你可以像这样设置你的回调：

```
void streamCBWrapper(void* userData) {
    static_cast<MyClass*>(userData)->streamCB()
}

int main() {
    MyClass object;
   set_stream_callback(&streamCBWrapper, &object);
   // ...
} 
```

你可以玩各种游戏来创建`streamCBWrapper`函数（例如，你可以让它成为`static`你的类的成员），但归根结底都是一样的：你需要从用户数据中恢复你的对象并调用成员函数这个对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T21:04:38.210

您可以通过将 userdata 转换为 MyClass 的属性来实现您想要做的事情。然后你不必将它传递给 MyClass::Callback，这是不可能的，因为你只能传递一个参数，它就是对象实例。这是一个例子。

```
void __stdcall MyClass::streamCB()
{
  // callback implementation
}

static void MyClass::Callback(void * this_pointer ) {
    MyClass * self = static_cast<MyClass>(this_pointer);
    self->streamCB();
}

MyClass::MyClass(void *userdata) {
    // do whatever you need to do with userdata
    // (...)
    // and setup the callback at C level
    set_stream_callback(&MyClass::Callback, (void *)this);
} 
```

在您的示例中，该`int mid`变量将成为该类的属性，因此可以从回调 implementation 访问`streamCB`。

# google-drive-api - Google Drive - Changes:list API - 检测文件夹级别的更改

> ID：13129374
> 
> 赞同：8
> 
> 时间：2012-10-29T20:46:25.383
> 
> 标签：google-drive-api

我正在测试 Google Drive 'Changes' API 并有一些问题。

期望：我在“我的驱动器”下有文件夹树结构，其中包含文件。我想调用 Changes:list API 来检测是否在该特定文件夹 ID 中添加/编辑/删除了项目。

API Explorer 尝试过：[https ://developers.google.com/drive/v2/reference/changes/list](https://developers.google.com/drive/v2/reference/changes/list)

问题：

1.  我看不到任何将特定文件夹 ID 传递给此 API 以获取“最大更改 ID”的选项。看起来这个 api 不支持 parm 'q'？可能吗？

2.  作为替代解决方案，考虑存储该文件夹的“modifiedDate”属性并在下次比较时使用它。但是，当该文件夹中的项目更新时，它不会更新。它不应该像在文件夹修改日期在其内容更新时更新的窗口中那样工作吗？

想知道是否可以在文件夹级别检测更改。

谢谢

**[编辑]**

有效的解决方案：

1.  使用 Files:list 列出所有。选定的字段：items/id,items/modifiedDate,items/parents/id,items/title

2.  获取起始文件夹 ID（例如，使用标题搜索获取“MyRootFolder”）

3.  使用递归数组搜索遍历子树结构（链接父母：id 和文件 ID）并获取最大修改日期和文件总数。
4.  在应用存储中存储最大修改日期和文件计数。
5.  对于后续调用，将新的最大修改日期与存储的进行比较，并将文件总数与存储的进行比较。如果任一不匹配，则“MyRootFolder”中的内容已更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T20:56:01.347

目前无法直接使用 API 实现 - 抱歉！

我认为当前最好的解决方案是使用常规更改提要并将代码中的结果过滤为具有正确父项设置的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-08T07:07:34.697

drive.changes.list google drive API 现在允许用户传递“startChangeId”参数。

我使用从以前的 API 结果中获得的“largestChangeId”值，因此我可以逐步构建用户所做的更改，避免重建整个树的需要。

我很惊讶为什么他们不支持“includeDeleted”参数和“startChangeId”参数。

# azure - 使用芥末的 AutoscalerDatapoints 表限制

> ID：13129379
> 
> 赞同：1
> 
> 时间：2012-10-29T20:46:49.700
> 
> 标签：azure, autoscaling, wasabi

我在我的 Azure 项目中使用 WASABI。我的自动缩放器设置正确并且工作正常。我遇到的问题是，几天后，自动缩放器卡在旧值上。例如，当队列为空时，它会说我的观察队列中的项目数为 3。

我意识到通过删除**AutoscalerDatapoints**表（使用[Neudesic Azure Storage Explorer](http://azurestorageexplorer.codeplex.com/)）并重新创建它，自动缩放器再次开始工作。这可能只是另一个问题的有效解决方案......

所以，我的问题是：Azure Table 可以保留的条目数量是否有限制？如果是这样，我怎样才能以自动化的方式解决这个问题？

感谢您的帮助，如果您需要更多信息，请不要犹豫。

# c++ - 在 Qt 中关闭程序之前显示一个对话框

> ID：13129380
> 
> 赞同：10
> 
> 时间：2012-10-29T20:46:56.927
> 
> 标签：c++, qt

我想在关闭程序之前在 Qt 中显示对话框，无论用户是要取消还是保存程序，即通过单击取消，用户有机会返回到未清理状态的程序，如 Windows 绘图或记事本，其中有意识关闭前的对话框出现警告用户？顺便说一句，我使用 Qt

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-29T20:53:17.123

如果您的应用程序使用***QMainWindow***，请重载`closeEvent()`以显示对话框，并且仅`QMainWindow::closeEvent`在用户在对话框中单击“**确定**”时才调用。

如果您的应用程序使用***QDialog***，请重载`accept()`插槽，并且仅在用户在对话框中`QDialog::accept`单击“**确定”时才调用。**

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-08-11T10:53:57.793

您可以使用此处描述的解决方案：[https ://web.archive.org/web/20170716164107/http://www.codeprogress.com/cpp/libraries/qt/HandlingQCloseEvent.php](http://www.codeprogress.com/cpp/libraries/qt/HandlingQCloseEvent.php)

您可以通过以下方式简单地覆盖 closeEvent 函数：

```
#include <QCloseEvent>
#include <QMessageBox>
void MainWindow::closeEvent(QCloseEvent *event)  // show prompt when user wants to close app
{
    event->ignore();
    if (QMessageBox::Yes == QMessageBox::question(this, "Close Confirmation", "Exit?", QMessageBox::Yes | QMessageBox::No))
    {
        event->accept();
    }

} 
```

# ubuntu - 在 Ubuntu 上存储 Sublime Text 2 配置文件的位置

> ID：13129381
> 
> 赞同：2
> 
> 时间：2012-10-29T20:46:58.420
> 
> 标签：ubuntu, config, sublimetext

我开始使用 Sublime Text 2。我使用了这个页面[http://www.technoreply.com/how-to-install-sublime-text-2-on-ubuntu-12-04-unity/](http://www.technoreply.com/how-to-install-sublime-text-2-on-ubuntu-12-04-unity/)。作为补充，我正在阅读本指南：

[http://www.nerdi.net/blog/2012/02/05/customize-your-sublime-text-2-configuration-for-awesome-coding/](http://www.nerdi.net/blog/2012/02/05/customize-your-sublime-text-2-configuration-for-awesome-coding/)

[https://docs.sublimetext.io/guide/usage/search-and-replace.html](https://docs.sublimetext.io/guide/usage/search-and-replace.html)

但无法在其中找到一个简单问题的答案 - 在哪里存储配置文件（顺便说一下很好的例子[http://www.thenerdary.net/post/29338253893/my-sublime-text-2-config](http://www.thenerdary.net/post/29338253893/my-sublime-text-2-config)）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T10:34:16.253

```
~/.config/sublime-text-2/Packages/User/Preferences.sublime-settings 
```

或者

```
Preferences -> Settings-User. 
```

我还被建议使用此选项

```
"save_on_focus_lost": true 
```

# windows - Windows adhoc 网状网络

> ID：13129382
> 
> 赞同：2
> 
> 时间：2012-10-29T20:47:07.363
> 
> 标签：windows, wifi, adhoc, mesh-network

我已经用谷歌搜索了这个话题，但我仍然需要帮助。stackoverflow 上有类似的问题，但没有一个完全匹配（也没有很好的答案）。

我想编写一个程序（如果它不存在并且可能的话），它允许 Windows 7+ 用户使用单个 WiFi 适配器配置一个 ad-hoc 网状网络，然后以某种方式允许类似于普通互联网连接的连接每个节点。额外的好处是，如果手机等设备不需要额外的软件，但可以连接到一个或多个网状节点，就好像它是标准接入点一样。

我不知道该怎么做，但我认为：

1.  可以使用 Windows Wireless-ADHOC API 以编程方式将单个无线网卡配置为在 adhoc 模式下运行
2.  Ad hoc 模式通常不包括基础设施模式，除非适配器的驱动程序支持它，因此从节点到真实互联网的连接需要第二个适配器。
3.  我们的程序将拥有/需要对 WiFi 适配器的独占控制。
4.  Mesh 方面是通过诸如 Babel 之类的路由协议独立于 adhoc 连接来实现的。
5.  必须通过我们的程序创建的一些新的虚拟适配器来提供 Internet。（这个新适配器扮演什么角色，使它成为任何网络感知程序应该选择咨询互联网访问的适配器？）
6.  如果一个节点上有一个真正的互联网连接可用，则该节点将通过 Babel 实现将其共享给网格上的其他节点
7.  无论是否可以从任何节点访问互联网，都不确定网格本身可以托管哪些服务。如何提供资源/域名解析？
8.  如果当前节点有互联网，任何对互联网资源的请求都将直接通过它，而网格内的任何资源都将通过 Babel。如果该节点丢失了直接互联网，则所有流量都将通过 Babel。假设我们的程序编写正确，是否需要对此进行编程，或者 Windows 网络堆栈是否知道如何处理？
9.  由于这是 Windows 7+，IPv6 是在网格中寻址节点的合法选择，但是，并非所有 Internet 连接都支持 IPv6。有些可能。我们如何从网状段定义互联网段？
10.  网格可以任意大，Babel 和其他组件将能够以良好的带宽、低内存使用和最佳路径收敛来处理它。

很明显，我没有实际完成这个项目的背景，但我想了解解决方案的概要。您能否评论大纲的正确之处，缺失/错误之处？由于新技术的出现，哪些概念是不必要或过时的？

一个节点操作起来有多简单？每个节点对攻击它们的其他节点的安全性如何？毒化网络流量和路由？

我读过一些尝试在 Linux 上实现类似目标的项目，但在 Windows 上却没有。对车辆和应急响应人员进行了一些讨论，但这是不同的。飓风桑迪激起了我的兴趣，即在城市连接广泛中断的情况下，流行住宅操作系统的连接性。当许多人的电力和通信系统不可用时，网状网络可以提供帮助。

几乎所有网格参与者都不会提前配置他们的节点。相反，他们可能会在他们的无线网络出现故障时寻找其他人的无线网络，并找到 SSID“免费紧急 Mesh WiFi”并进行连接。与热点一样，他们将看到一个代理登录页面，该页面解释了该项目并提供了一个安装链接，如果他们想参与的话。如果没有，他们仍然可以作为客户端连接到网格“接入点”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T23:55:11.017

问题是您基本上要求将单个 WiFi 无线电同时置于三种不同的模式。为了让节点与其他节点通信，它需要处于 Ad-Hoc 模式。为了与接入点 (AP) 通话以进行 Internet 访问，它需要处于基础架构模式。为了让手机连接，它们中的大多数不支持 Ad-Hoc 网络，因此您还需要将节点置于主模式（使它们显示为普通接入点）。因此，在一张 WiFi 卡上，您正试图兼顾三种不同的操作模式。理论上，如果您拥有的卡和驱动程序支持原始帧注入，那么您可能能够在您的应用程序中模拟 WiFi 和网络堆栈，并在一张卡上兼顾所有三种模式，但我有一种感觉会导致非常高碰撞率，

可能吗？当然。这是一个实用的想法吗？并不真地。您最好使用华硕 USB-N10 等小型/廉价 WiFi 适配器扩展笔记本电脑。额外的适配器可以处理额外的模式，在固件和内核空间中进行更快、更高效的处理，并允许您在单独的通道上运行网络的每一层以获得更高的吞吐量。

# php - 打开 cookie 的 https 标志

> ID：13129383
> 
> 赞同：0
> 
> 时间：2012-10-29T20:47:08.063
> 
> 标签：php, html, cookies, setcookie, cookie-httponly

所以我正在使用 php 4 中的这个遗留应用程序。我正在尝试设置 httponly 标志和安全标志。

这是我的代码：

```
header( "Set-Cookie:". $cookieName."=".$sessId."; expires=".$expireSeconds."; sessionID=".$sessId.";path=".$path."; domain=".$domain."; httponly; secure"); 
```

安全标志已设置，但 httponly 未设置。

会不会是因为 URL 使用了 https 协议？

编辑：另外，过期字段是否需要几秒钟。现在，$expireSeconds=14400; 如果它不期望秒作为参数，我该如何修改代码来纠正这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T20:49:24.753

`header()`当有[setcookie()](http://php.net/setcookie)可用时，你为什么要这样做？该功能在 PHP4 中可用。

```
setcookie($cookieName, $sessID, $expireSeconds, $path, $domain, true, true);
                                                                ^--secure
                                                                      ^--http 
```

# php - 登录表单验证代码点火器

> ID：13129385
> 
> 赞同：0
> 
> 时间：2012-10-29T20:47:20.387
> 
> 标签：php, codeigniter, validation, authentication

**我的表格：**

```
<?php
          echo validation_errors(); 
                        $clientLoginFormAttr = array('id'=>'clientLogin');
                        echo form_open('clientLogin',$clientLoginFormAttr);

                        ## generate field attributes
                        $userNameInput=array(
                            'type' =>'text',
                            'id' => 'clientLogin',
                            'name' => 'clientUsername',
                            'maxlength' => '10',
                            'size' => '20'
                        );
                       $passwordInput=array(
                           'type'=>'password',
                           'id'=>'clientLogin',
                           'name'=>'clientPass',
                           'maxlength'=>'10',
                           'size'=>'20'
                       );
                       $submitBtn=array(
                           'type'=>'submit',
                           'id'=>'submit',
                           'value'=>'',
                           'name'=>'sendLogon'
                       );
                       ## generate actual <input> fields
                       echo '<label>Username:</label>';
                       echo form_input($userNameInput);
                       echo '<label>Password:</label>';
                       echo form_input($passwordInput);
                       echo form_submit($submitBtn);  
                    ?> 
```

我想使用位于 (controllers/pages/hndl/clientLogin.php) 中的*clientLogin控制器*

*clientLogin*控制器包含：

```
<?php
class Clientlogin extends CI_Controller{

    function index(){

        $this->load->helper(array('url','form'));
        $this->load->library('form_validation');

        $loginValidation = array(
          array(
              'field'=>'clientUsername',
              'rules'=>'required|min_length[1]|max_length[10]'
          ),  
          array(
              'field'=>'clientPass',
              'rules'=>'required|min_length[1]|max_length[10]'  
          )  
        );

        $this->form_validation->set_rules($loginValidation);

    }
}

?> 
```

当我访问设置为默认加载视图的主页（称为 homepage.php）并按下提交按钮时，它给了我 ERROR-404 OBJECT NOT FOUND。它进入路径：

```
http://localhost/Applications/XAMPP/htdocs/website/homepage.php/clientLogin 
```

我在这里做错了什么？我只是想使用 clientLogin 控制器来控制从 homepage.php 视图提交的表单。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T23:57:01.963

我相信这与您的根目录和 base_url 有关。

您的网站应位于：

```
C:\xampp\htdocs\website 
```

那么你的 DocumentRoot 应该设置为：

```
C:/xampp/htdocs 
```

并且您的 codeigniter 的 config/config.php 下的 base_url 应设置为：

```
http://localhost/website/ 
```

那么您的表单应设置为：

```
echo form_open('pages/hndl/clientLogin',$clientLoginFormAttr); 
```

这就是我能想到/假设你的情况是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T22:42:01.837

尝试改变

```
echo form_open('clientLogin',$clientLoginFormAttr); 
```

至

```
echo form_open('pages/hndl/clientLogin',$clientLoginFormAttr); 
```

# java - 告诉 HashSet 如何对数据进行排序

> ID：13129390
> 
> 赞同：6
> 
> 时间：2012-10-29T20:47:42.083
> 
> 标签：java, hashset

我正在尝试创建一个 HashSet（或任何集合类型 - 但我认为 HashSet 最适合我），无论插入什么，它都会保持有序。这是我正在处理的一个联系人管理器项目。我一直在试验，下面的例子。

```
import java.util.*;

public class TestDriver{

    public static void main(String[] args)
    {
        FullName person1 = new FullName("Stephen", "Harper");
        FullName person2 = new FullName("Jason", "Kenney");
        FullName person3 = new FullName("Peter", "MacKay");
        FullName person4 = new FullName("Rona", "Ambrose");
        FullName person5 = new FullName("Rona", "Aabrose");

        HashSet<FullName> names = new HashSet<FullName>();

        names.add(person3);
        names.add(person1);
        names.add(person4);
        names.add(person2);

        System.out.println(names);      
   } 
} 
```

我希望输出按字母顺序排列名称 - 至少根据他们的名字或姓氏。但是，我什至无法辨别 HashSet 用来得出此排序的方法；

```
[Jason Kenney, Rona Ambrose, Stephen Harper, Peter MacKay] 
```

我的问题是，我如何告诉我的程序如何根据我的规范对名称进行排序？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-29T20:49:05.330

HashSet 不为条目提供任何有意义的顺序。[文档](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)说：

> 它不保证集合的迭代顺序；特别是，它不保证订单会随着时间的推移保持不变。

要获得合理的排序，您需要使用不同的 Set 实现，例如[TreeSet](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)或[ConcurrentSkipListSet](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentSkipListSet.html)。[SortedSet](http://docs.oracle.com/javase/7/docs/api/java/util/SortedSet.html)接口的这些实现允许您提供一个[Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)来指定如何对条目进行排序；就像是：

```
public class SortByLastName implements Comparator<FullName>{
    public int compare(FullName n1, FullName n2) {
        return n1.getLastName().compareTo(n2.getLastName());
    }
}

TreeSet<FullName> names = new TreeSet<FullName>(new SortByLastName()); 
```

您可以改为让 FullName 类实现[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)接口，但如果您想有时按姓氏、有时按名字或其他条件排序，这可能没有帮助。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-29T20:50:01.837

用于`Treeset`自然排序。

```
HashSet--- not ordered/sorted
LinkedhashSet--- maintains insertion order
TreeSet--- sorts in natural order 
```

对于您的情况，请改用 TreeSet。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-29T20:48:50.933

`HashSet`不保持秩序，去`TreeSet`实现你自己`Comparator`的指导`TreeSet`如何比较

```
new TreeSet<FullName>(new Comparator<FullName>(){
        public int compare(Fullname one, FullName two{/*logic*/}
}); 
```

* * *

**看**

*   [API文档](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html#TreeSet%28java.util.Comparator%29)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-29T20:49:16.137

似乎您需要[`TreeSet`](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html)实现字母顺序或[`LinkedHashSet`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html)保留插入顺序。

请注意，您`FullName`必须实现`Comparable<FullName>`才能使用`TreeSet`（或者您必须提供外部 Comparator`）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-01T20:30:50.407

尝试这个：

```
 System.out.println(names.toList.sorted) 
```

# java - Eclipse 不会从 OSX Mountain Lion 上的全新安装启动

> ID：13129394
> 
> 赞同：6
> 
> 时间：2012-10-29T20:48:01.040
> 
> 标签：java, eclipse, macos

我正在使用运行 OSX 10.8.2 的 27" iMac 和从[http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/)下载的最新 Eclipse 包 (4.2.0) （Java EE 开发人员的 Eclipse IDE，Mac OS X 64 位） .我解压下载的文件，它创建了一个名为“eclipse”的目录。

在该目录中，我双击 Eclipse 应用程序。它运行 2 秒左右，显示启动屏幕，然后死机并显示消息“发生错误。有关详细信息，请参阅日志文件配置 1351540676859.log。”

打开该日志会显示以下堆栈跟踪：

```
!SESSION 2012-10-29 15:57:56.642 -----------------------------------------------
eclipse.buildId=M20120914-1800
java.version=1.6.0_37
java.vendor=Apple Inc.
BootLoader constants: OS=macosx, ARCH=x86_64, WS=cocoa, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.jee.product -keyring /Users/joshua/.eclipse_keyring -showlocation
Command-line arguments:  -os macosx -ws cocoa -arch x86_64 -product org.eclipse.epp.package.jee.product -keyring /Users/joshua/.eclipse_keyring -showlocation

!ENTRY org.eclipse.osgi 4 0 2012-10-29 15:58:02.633
!MESSAGE Application error
!STACK 1
java.lang.NullPointerException
    at org.eclipse.swt.widgets.Display.applicationWillFinishLaunching(Display.java:5053)
    at org.eclipse.swt.widgets.Display.applicationProc(Display.java:5153)
    at org.eclipse.swt.internal.cocoa.OS.objc_msgSendSuper(Native Method)
    at org.eclipse.swt.widgets.Display.finishLaunching(Display.java:4849)
    at org.eclipse.swt.widgets.Display.applicationProc(Display.java:5130)
    at org.eclipse.swt.internal.cocoa.OS.objc_msgSend(Native Method)
    at org.eclipse.swt.internal.cocoa.NSApplication.finishLaunching(NSApplication.java:59)
    at org.eclipse.swt.widgets.Display.init(Display.java:2163)
    at org.eclipse.swt.graphics.Device.<init>(Device.java:131)
    at org.eclipse.swt.widgets.Display.<init>(Display.java:699)
    at org.eclipse.swt.widgets.Display.<init>(Display.java:690)
    at org.eclipse.ui.internal.Workbench.createDisplay(Workbench.java:669)
    at org.eclipse.ui.PlatformUI.createDisplay(PlatformUI.java:161)
    at org.eclipse.ui.internal.ide.application.IDEApplication.createDisplay(IDEApplication.java:154)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:96)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438) 
```

这是我的java版本：

```
Joshuas-iMac:Versions joshua$ java -version
java version "1.6.0_37"
Java(TM) SE Runtime Environment (build 1.6.0_37-b06-434-11M3909)
Java HotSpot(TM) 64-Bit Server VM (build 20.12-b01-434, mixed mode 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T20:57:13.410

尝试面向 Java 开发人员的 Eclipse IDE，而不是 EE 开发人员（下载页面上的第三个选项）。

# wolfram-mathematica - 有没有一种方法可以将表达式放入 Mathematica 中的变量中，而不用关心局部变量？

> ID：13129395
> 
> 赞同：1
> 
> 时间：2012-10-29T20:48:13.167
> 
> 标签：wolfram-mathematica, variable-assignment, differential-equations

我在 Mathematica 中使用 NDSolve 来求解一组方程。我正在寻找某种方法将方程组放入一个变量中，然后在 NDSolve 中引用它，以使代码更易于阅读。

这是我正在做的一个更简单的版本：

```
In[1]:= equs = {a x + b y == 0, x - y == 1};
In[2]:= f[a_, b_] := Module[{x, y}, {x, y} /. Solve[equs, {x, y}]] 
```

评估时它没有给出正确的答案：

```
In[3]:=   f[1, 1]
Out[3]:=  {x$627, y$627} 
```

这是因为 x,y,a,b 是局部变量，它们的内部名称与 x,y,a,b 不同。如果我将 equs 的定义更改为函数，它可以给出正确的结果：

```
In[4]:= Clear[equs, f]

In[5]:= equs[x_, y_, a_, b_] := {a x + b y == 0, x - y == 1};

In[6]:= f[a_, b_] := 
 Module[{x, y}, {x, y} /. Solve[equs[x, y, a, b], {x, y}]]

In[7]:= f[1, 1]

Out[7]= {{1/2, -(1/2)}} 
```

但是我的问题是我的真实代码中有 20 多个 equs 变量，并且明确地写出它们会使代码不易阅读。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:36:38.227

这种变化似乎对我有用：

```
equs = {a x + b y == 0, x - y == 1};
sols = Block[{x, y}, {x, y} /. (Solve[equs, {x, y}])];
f[a_, b_] := Evaluate[sols];
f[1,1] 
```

我不确定你的真实系统是什么样的，但也许这样的东西会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T04:02:42.917

一种方法是使用[正式符号](http://reference.wolfram.com/mathematica/tutorial/LettersAndLetterLikeForms.html#173509264)。这些是安全的`Protected`，因此无需本地化（例如 Module）即可安全使用。它们进入速度较慢（例如`Esc``$a``Esc`），但一旦使用，恕我直言非常干净。

![数学图形](../Images/3fb6de59fc6f4bca97faf92c0f97f0b4.png)

# entity-framework - Entity Framework 5 关闭 RTM 中的自动编译？

> ID：13129405
> 
> 赞同：0
> 
> 时间：2012-10-29T20:48:32.743
> 
> 标签：entity-framework, entity-framework-5

我在互联网上看到了很多关于如何关闭自动编译的示例：

```
using (var db = new SampleEntities())
{
    db.ContextOptions.DefaultQueryPlanCaching = false;
} 
```

但是，我在 db 上下文的任何地方都看不到这个属性。它甚至没有 ContextOptions。

互联网上的某个地方提到将其转换为 IObjectContextAdapter，在那里我得到了 ContextOptions，但仍然没有那个属性

```
((IObjectContextAdapter)db).ObjectContext.ContextOptions.? 
```

请注意，我在使用 DbContext 和 DbSets 的 EF5 中使用默认生成。

我该如何关闭它？另请注意，这是 RTM，而不是 .NET 4.5 的测试版或 RC

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:17:04.127

我不建议这样做，因为这很可能会产生比更好的性能更差的性能。此选项仅在[ObjectQuery](http://msdn.microsoft.com/en-us/library/bb345303.aspx)级别而不是[ObjectContext](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.aspx)级别可用。

```
var objectContext = ((IObjectContextAdapter)db).ObjectContext;
var objectSet = objectContext.CreateObjectSet<AccountsOnMonth>();
objectSet.EnablePlanCaching = false; 
```

[摘录](http://msdn.microsoft.com/en-us/data/hh949853.aspx)

> 查询计划缓存在同一 AppDomain 内的 ObjectContext 实例之间共享。您无需持有 ObjectContext 实例即可从查询计划缓存中受益。

# php - 从mysql为googles图表api生成数据？

> ID：13129419
> 
> 赞同：0
> 
> 时间：2012-10-29T20:49:20.430
> 
> 标签：php, javascript, mysql, charts

我正在尝试集成一个图表，显示过去 30 天每天的用户注册数。我有一个用户表，其中存储用户加入时的时间戳。有没有办法让我按那个时间戳分组，同时仍然检查它是否在同一天。我对如何准确地生成这种类型的数据有点迷茫，这可能基于我的表结构吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T20:56:13.747

你的意思是按日期分组（`timestamp_column`）？

但我认为拥有一个额外的单独日期列和 GROUP 会更快。

过去 30 天。

```
SELECT ....
FROM ....
WHERE `timestamp_column` 
       BETWEEN DATE_SUB(CURDATE(), INTERVAL 30 DAY) AND CURDATE()
GROUP BY DATE(`timestamp_column`) 
```

# c - 我们如何分配一个我们确定不会被分页的缓冲区？

> ID：13129426
> 
> 赞同：3
> 
> 时间：2012-10-29T20:49:34.363
> 
> 标签：c, linux

也许这件事与内核中的缓冲区分配有关。
假设我们要编写一个音乐播放器，如果发生分页，这可能会导致播放低质量的音乐时断断续续。
Video Player，我们想写一个实时软件，什么的。
我们希望将其中一个 CPU 分配给一个进程，或者我们将一个进程设置为非常高的优先级，然后我们希望确保我们的缓冲区不会被分页到 HDD。它是如何在 C 和 Linux 中完成的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T20:56:36.743

通过调用：

```
int mlock(const void *addr, size_t len);//included in header #include <sys/mman.h> 
```

使用该区域的起始地址及其长度，系统将保证指定的内存将驻留在 RAM 中，直到您调用

```
int munlock(const void *addr, size_t len); 
```

您还可以调用该函数，该函数`mlockall(MCL_FUTURE);`将使您的所有后续内存分配成为 RAM 居民，但这会带来分配超出物理可用内存的风险，并且结果取决于实现。

**编辑：** 有关更多详细信息，请查看以下链接： http: [//pubs.opengroup.org/onlinepubs/007908799/xsh/mlock.html](http://pubs.opengroup.org/onlinepubs/007908799/xsh/mlock.html)
[http://pubs.opengroup.org/onlinepubs/007908799/xsh/mlockall.html](http://pubs.opengroup.org/onlinepubs/007908799/xsh/mlockall.html)

**EDIT2：Zan Lynx 的评论**
另请注意，使用它来锁定超过 64KB（在大多数 Linux 系统上）将需要 root 权限。在我看来，最好的方法是拥有一个以 root 身份启动的包装器，设置宽松的实时和内存锁定要求，切换用户 ID，然后运行实际程序。

**PS**通常，当出现 RT 需求时，不仅您将程序锁定在 RAM 中，而且您还将调度程序设置为实时模式，因为您可以检查`sched_setscheduler(..)`

# android - 从自定义按钮访问活动

> ID：13129428
> 
> 赞同：4
> 
> 时间：2012-10-29T20:49:38.750
> 
> 标签：android

也许我在这里错过了某事，但在这里。假设我扩展了 Button

```
 public class MyButton extends Button {
        ...
        public MyButton(Context context, AttributeSet attrs) {
            super(context, attrs);
            ...
        }
    } 
```

1.  如果 MyButton 在例如 MyActivity 中，我可以简单地将上下文转换为活动。
2.  现在，如果 MyButton 是 MyDialog 的一部分（扩展 Dialog）， context.getClass() 将指向 ContextThemeWrapper 并且我无法获得活动。

那么在第二种情况下如何获取对话框或活动的实例呢？

**编辑** 确定更多代码以更好地说明我想要做的事情：

```
public class MyDialog extends Dialog {
    private MyButton myButton;

    public MyDialog(Context context) {
        super(context)  

        this.setContentView(R.layout.my_dialog);
        this.setTitle("My Dialog");

        myButton = (MyButton) findViewById(R.id.my_button);
    }
}

public class MyButton extends Button implements Command {
    private MyActivity myActivity;

    public MyButton(Context context, AttributeSet attrs) {
        super(context, attrs);

        System.out.println(context instanceof ContextThemeWrapper); // TRUE
        System.out.println(context instanceof Activity); // FALSE

        myActivity = ??? // or myDialog = ???
    }

    @Override
    public void execute() {
        MyDialog myDialog = myActivity.getMyDialog();
        myDialog.cancel();
    }

} 
```

连接监听器后在其他类的某个地方：

```
@Override
public void onClick(View v) {
    Command command = (Command) v;
    command.execute();
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-12-12T00:00:21.007

我有类似的情况，我用这个片段解决了我的问题：

```
private static Activity scanForActivity(Context cont) {
    if (cont == null)
        return null;
    else if (cont instanceof Activity)
        return (Activity)cont;
    else if (cont instanceof ContextWrapper)
        return scanForActivity(((ContextWrapper)cont).getBaseContext());

    return null;
} 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T20:55:44.823

我不完全理解你在做什么，但你应该能够从你的 Dialog 中获得对 Activity 的引用[`getOwnerActivity()`](http://developer.android.com/reference/android/app/Dialog.html#getOwnerActivity%28%29)。

也许：

```
public MyButton(Context context, AttributeSet attrs) {
    super(context, attrs);

    Activity activity = getOwnerActivity();
    ...
} 
```

# sharepoint - 获取 Web 部件内的当前共享点用户 ID

> ID：13129430
> 
> 赞同：2
> 
> 时间：2012-10-29T20:49:48.810
> 
> 标签：sharepoint, sharepoint-2010

我正在尝试在 Web 部件中触发事件时访问当前登录的用户。我通常会考虑这样做：

```
SPContext.Current.Web.CurrentUser 
```

具体来说，要获取 ID（我需要什么）：

```
SPContext.Current.Web.CurrentUser.ID 
```

这在事件接收器中按预期工作。但是，在我的示例 Web 部件中，这是返回有关计算机用户帐户的信息。我如何最好地访问已登录的 SharePount 用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:49:16.803

我想到了。调试时，我以系统帐户登录，这搞砸了。使用常规用户帐户使用上述方法呈现预期结果。

# javascript - struts 2 中的 s:url 标签仅显示 url

> ID：13129432
> 
> 赞同：1
> 
> 时间：2012-10-29T20:49:59.760
> 
> 标签：javascript, jsp, struts2, tags

我需要在 javascript 函数中给出 swf 文件的路径。我知道 s:url 标签适用于样式表和脚本源。然而我只需要

`https://blah.blah.com/portal/blah/blah/MyWebApp/js/myscript.swf`

如果我只使用`<s:url value="/js/myscript.swf" />`

我明白了

/myWebApp/js/myscript.swf

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:30:30.867

Struts2 标签文档是你的朋友：[http](http://struts.apache.org/2.3.4.1/docs/url.html) : *//struts.apache.org/2.3.4.1/docs/url.html forceAddSchemeHostAndPort*和*includeContext*会让你感兴趣。

# image - 为matlab循环保存不同的矩阵

> ID：13129436
> 
> 赞同：0
> 
> 时间：2012-10-29T20:50:11.663
> 
> 标签：image, signal-processing, matlab

我有一个循环，它迭代 20 次并产生矩阵“A”。我想使用命令生成结果为 A_1、A_2、...、A_20。我该怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:12:09.473

如果您不想使用元胞数组，您可以考虑以下事项：

`A = zeros(nrow,ncols,20)`

这将创建一个`A`维度矩阵`nrow*ncol*20`。始终提前为大型矩阵分配空间，不要在循环内逐层构建它。并用你想要的任何东西替换`nrow`和。`ncol`然后

```
for i = 1:20
    A(:,:,i) = ... stuff ...
end 
```

现在你有一个名为`A`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T20:56:24.813

有很多方法可以满足您的需要。更不费力的可能是

```
 save([MyOutput,int2str(i)], 'A'); %where i is your iteration index, 
                                    %thus you will have 20 different files. 
```

或者

```
 save(MyOutput, 'A','-append'); %which generates one file in which 
                                 %all your matrices are stored consequently. 
```

但真的有百万种方法。尝试更具体地了解您的需求。

* * *

如果您只需要在工作区中使用矩阵，您可以考虑使用单元格。

```
N = 20;
A_t = cell(N,1);

%in cycle
for ...
A_t(i) = {A};

Now your `A_t{i}` (note different parenthesis) is a cell containing your `A_i`. 
```

# c# - 有没有一种方法可以检查背景图像是否完全以 C# 形式加载？

> ID：13129441
> 
> 赞同：0
> 
> 时间：2012-10-29T20:50:34.613
> 
> 标签：c#, .net, image, events, background

> **可能重复：**
> [如何修复用户控件中的闪烁](https://stackoverflow.com/questions/2612487/how-to-fix-the-flickering-in-user-controls)

我目前正在开发一个程序，该程序可以为表单的背景图像动态加载图像。一旦图像完全应用于背景，我希望表单可见。

我已经尝试过表单事件`BackgroundImageChanged`，但这没有用。

如果图像是高分辨率的，我可以看到表格出现并且图像仍在自行构建。

代码片段：

```
this.backgroundImage = loadedImage;
// Thread.Sleep(5000);
this.Show(); 
```

正如您所看到的，我正在使用`Thread.Sleep()`一些时间来在显示表单之前完全加载图像。但是有没有这样的方法：

```
this.backgroundImage = loadedImage;
while( imageIsNotFullyLoaded() ) { }
this.Show(); 
```

或者有没有其他方法或事件我还没有见过？

**编辑：**

我的代码：

forn1.cs ：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Threading;

namespace GameClient {
    public partial class FormMain:Form {
        getImage _getImage;
        public FormMain() {
            InitializeComponent();
        }

        private void FormMain_Load( object sender, EventArgs e ) {
            _getImage = new getImage();
            Image  splashLogo = _getImage.fromURL( "http://ace-acid.no-ip.org/GameClient/splash.png" );
            this.BackgroundImage = splashLogo;
            Thread.Sleep(3000);
            this.Show();
        }

        private void btnLogin_Click( object sender, EventArgs e ) {

            this.Hide();
        }
    }
} 
```

获取图像.cs：

```
using System;
using System.Drawing;
using System.IO;
using System.Net;

namespace GameClient {
    class getImage {
        public Image fromURL( string URL ) {
            Image tmpImg = null;
            try {
                HttpWebRequest request = (System.Net.HttpWebRequest)System.Net.HttpWebRequest.Create( URL );
                request.AllowWriteStreamBuffering = true;
                request.Timeout = 20000;
                WebResponse response = request.GetResponse();
                Stream stream = response.GetResponseStream();
                tmpImg = Image.FromStream( stream );
                response.Close();
            } catch( Exception ex) {
                return null;
            }
            return tmpImg;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T21:45:57.027

没有办法做到这一点。表单的实际失效/绘制是通过对非托管代码的互操作调用执行的，完成时没有回调或挂钩。您将不得不接受当前的程序。

如果您希望它至少是非阻塞的，那么根据您的 .NET 目标，您可以使用`await Task.Delay(5000)`（或等效的东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:55:24.617

你可以做一个简单的事情，比如调用委托，如果委托调用的方法有返回值，线程会等待它完成，所以你可以试试这个代码：

```
 delegate Image getImageDelegate(string url);
        private void Form1_Load(object sender, EventArgs e)
        {
            _getImage = new getImage();
Image splashLogo = (Image)this.Invoke(new getImageDelegate(_getImage.fromURL), new object[] { "http://ace-acid.no-ip.org/GameClient/splash.png" });
            this.BackgroundImage = splashLogo;
            this.Show();

        } 
```

# c# - 如何将新查询添加到 gridview？

> ID：13129444
> 
> 赞同：2
> 
> 时间：2012-10-29T20:50:46.690
> 
> 标签：c#

我有一个数据列表，我想使用该数据在表中搜索。查询工作正常，但它不保留以前的数据。有什么解决方案吗？

这是代码：

```
foreach (string Id in LstID)
{
    GdEmp.DataSource = employee.ShowData(Id);
    GdEmp.DataBind();

} 
```

这是查询：

```
public class Employee
{
    public string family { get; set; }
    public string name { get; set; }
    ....

public List<Employee> ShowData(string Id)
    {
        try
        {
            var Query = from P in Bank.employee
                where P.Id == Id
                select new Employee
                {
                    family = P.Family,
                    name= P.Name,
                    ...
                };
            return Query.ToList();

        }
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:01:36.030

您需要一个函数来接收您要显示的 ID 列表并返回一个包含相应信息的列表，而不是一个一个地获取它们。

```
GdEmp.DataSource = employee.ShowAllData(LstID);
GdEmp.DataBind(); 
```

使用这个功能：

```
public List<Employee> ShowAllData(List<string> LstID)
{
        var q = from P in Bank.employee
                where LstID.Contains(P.Id)
                select new Employee
                {
                       family = P.Family,
                       name   = P.Name,
                       ...
               };
        return q.ToList();
} 
```

# perl - 是否有 Perl 子程序存在和定义？

> ID：13129450
> 
> 赞同：0
> 
> 时间：2012-10-29T20:51:01.893
> 
> 标签：perl, operators, subroutine

我一直在 if 语句中使用存在和定义

```
if (exists($a->{b}) and defined($a->{b}) 
```

有没有同时做这两个的子程序？

**更新：**
似乎我没有给出很好的示例代码。要获得更好的问题和匹配的答案，请查看[checks-for-existence-of-hash-key-creates-key](https://stackoverflow.com/questions/9789333/checking-for-existence-of-hash-key-creates-key)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T20:56:41.017

这和

```
if (defined($a->{b})) 
```

* * *

关于评论中的回复，`defined`不实例化密钥。

```
>perl -E"if (exists($a->{b}) and defined($a->{b})) { }  say 0+keys(%$a);"
0

>perl -E"if (defined($a->{b})) { }  say 0+keys(%$a);"
0 
```

`->`，另一方面，自动激活正常。

```
>perl -E"if (defined($a->{b})) { }  say $a || 0;"
HASH(0x3fbd8c) 
```

但情况也是`exists`如此。

```
>perl -E"if (exists($a->{b}) and defined($a->{b})) { }  say $a || 0;"
HASH(0x81bd7c) 
```

如果你想避免自动复活，你会使用

```
>perl -E"if ($a && defined($a->{b})) { }  say $a || 0;"
0 
```

或者

```
>perl -E"no autovivification; if (defined($a->{b})) { }  say $a || 0;"
0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T20:56:51.757

`defined(...)`只有当为真时才能`exists(...)`为真，所以你的问题的答案是调用子例程`defined`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T21:06:48.307

*   **exists()**检查键是否存在（即使 undef 值）
*   **defined()**检查是否定义了一个值

如果您只想检查密钥是否存在（即使 undef），那么只需使用**exists()**

这是一个相关的问题，可以很好地解释它：[存在和定义之间有什么区别？](https://stackoverflow.com/questions/6534573/whats-the-difference-between-exists-and-defined)

# ios - 更改图像的突出显示颜色

> ID：13129451
> 
> 赞同：0
> 
> 时间：2012-10-29T20:51:08.493
> 
> 标签：ios, image, colors, uibutton, storyboard

我有一个带有图像的 UIButton。当它按下时图像被突出显示，这很好。但它以**灰色**突出显示。我想要例如红色或绿色。我应该在 StoryBoard 或代码中进行哪些更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T21:07:13.603

高光色调怎么样？![在此处输入图像描述](../Images/caa4b45f491d6829a7ef040e66fd77a9.png)

它在按钮的属性检查器中

# python - 打印完整的异常

> ID：13129453
> 
> 赞同：3
> 
> 时间：2012-10-29T20:51:09.497
> 
> 标签：python, exception

我不知道它叫什么，但是当我在 python 实时解释器中时，我会以“文件、行”等形式获得一系列语句，显示所有出错的地方，以便我可以查明起源. 此信息是我可以访问的异常的属性吗？我正在寻找一些解决方案，例如：

```
try:
     do_something_wrong()
except Exception as e: 
     print e.really_useful_information 
```

我应该使用什么作为“真正有用的信息”？如果不可能，我还能在继续运行程序的同时访问这些信息吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T21:00:41.130

您可以使用[traceback.print_exc()](http://docs.python.org/2/library/traceback.html#traceback.print_exc)：

```
import traceback
try:
    ...
except Exception as e:
    traceback.print_exc() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T21:02:39.590

如果我理解正确，您正在寻找的东西称为*堆栈跟踪。*看一下*traceback*模块：[http](http://docs.python.org/2/library/traceback.html) ://docs.python.org/2/library/traceback.html特别是 traceback.print_exception() 和 traceback.print_exc()。

# python - Python组合生成

> ID：13129454
> 
> 赞同：6
> 
> 时间：2012-10-29T20:51:10.807
> 
> 标签：python, python-2.7, python-2.x

*我是编程和 Python 的新手。不知道如何继续解决这个问题（如下所述），因此是这个问题。*

我有 n 个列表，每个列表包含 1 个或多个项目。我想要一个包含所有可能组合的新列表，它使用每个列表中的一个项目一次，并且总是。

例子：

```
list_1 = ['1','2','3']
list_2 = ['2','5','7']
list_3 = ['9','9','8'] 
```

结果将是：`['129', '129', '128', '159', '159', '158', '179', '179', '178', '229', '229', '228', '259', '259', '258', '329', '329', '328', '359', '359','358', '379', '379', '378']`

这里的示例有 3 个列表，每个列表包含 3 个项目，但可以有任意 n 个列表，每个列表包含任意 m 个元素（因此并非所有列表都需要具有相同数量的元素）。

列表的所有元素都是字符串，输出列表也包含字符串。

我该怎么办？

我查看了 itertools.combinations 但我不知道如何将它用于此任务。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-29T20:56:28.223

在这里使用[`itertools.product()`](http://docs.python.org/2/library/itertools.html#itertools.product)：

```
>>> list_1 = ['1','2','3']
>>> list_2 = ['2','5','7']
>>> list_3 = ['9','9','8']
>>> from itertools import product
>>> ["".join(x) for x in product(list_1,list_2,list_3)]
['129', '129', '128', '159', '159', '158', '179', '179', '178', '229', '229', '228', '259', '259', '258', '279', '279', '278', '329', '329', '328', '359', '359', '358', '379', '379', '378'] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-29T20:54:37.883

使用列表理解：

```
result = ["%s%s%s" % (i,j,k) for i in list_1 for j in list_2 for k in list_3] 
```

或使用`itertools`：

```
product = itertools.product(list_1, list_2, list_3)
result = [''.join(p) for p in product] 
```

# ruby-on-rails - Rails：从哪里开始？

> ID：13129455
> 
> 赞同：1
> 
> 时间：2012-10-29T20:51:16.873
> 
> 标签：ruby-on-rails

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:26:31.267

我一直在谷歌搜索，发现了一个很好的开始 Rails（Ruby on Rails）旅程的方法。

从完成[本网站上的教程](http://tryruby.org/levels/1/challenges/0)开始，以获得对 Ruby 的基本掌握。如果您想要一种全新的方法或者您不熟悉编码，您也可以查看[这本书。](https://rads.stackoverflow.com/amzn/click/com/1430223634)

在你完成这些之后，你应该查看免费的[Rails 教程](http://www.codeschool.com/courses/rails-for-zombies-redux)来稍微了解一下 Rails。

这两个教程（我不能对这本书说同样的话）都非常出色，并且可能会让你在整个过程中大笑。

完成这两个步骤后，继续[阅读这本 Rails 教程电子书](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)将使您走上正轨。

从那里开始，您应该会感觉更舒服，并且您将拥有必要的资源来继续我们自己学习 Rails！

我真的希望这可以帮助与我在同一条船上的任何人（关于任何事情的零线索！）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T22:04:44.157

Rails 确实适用于 web-apps/sites/apis。话虽如此，看看[RailsCasts](http://railscasts.com/)和[ApiDock](http://apidock.com/rails)

# haskell - 让 GHC 拒绝使用未在参数列表中定义的变量的函数

> ID：13129458
> 
> 赞同：-1
> 
> 时间：2012-10-29T20:51:27.420
> 
> 标签：haskell, functional-programming, global-variables, ghc

让我们考虑以下haskell程序：

```
g::Int
g = 300

func::Int->Int
func arg = arg + g

main = do
  print (func 4) 
```

我不是特别喜欢这个程序，因为“func”在其计算中使用全局变量 g，我希望***我的程序中编写的所有函数都将执行必要计算所需的所有元素指定为参数（即没有函数外使用）***。

我的问题是：有没有办法让 ghc 拒绝使用未在参数列表中定义的变量的函数？（而不必依赖纯粹的纪律）......

[编辑]：还要考虑以下几点：

主.hs：

```
import MyMod

func::Int->Int
func arg = arg + g

main = do
  print (func 4) 
```

MyMod.hs

```
module MyMod where

g::Int
g = 300 
```

[EDIT2]：我猜如果函数只能使用在参数列表中定义的变量，那么人们将不得不为以下事情做出例外（？）：

```
g::Int
g = 300

h::Int
h = 400

i::Int
i = g + h 
```

[EDIT3]：对于 nm 以响应“尝试编写具有这些限制的完整程序，该程序具有多个函数”（限制是函数只能使用在其参数列表中声明的变量）。当然必须有例外，在这种情况下，主要是例外。这个例子改编自[比较 Haskell 和 C 计算素数的速度](https://stackoverflow.com/questions/12026668/comparing-speed-of-haskell-and-c-for-the-computation-of-primes)

```
divisibleRec :: Int -> Int -> Bool
divisibleRec i j 
  | j == 1         = False 
  | i `rem` j == 0 = True 
  | otherwise      = divisibleRec i (j-1)

divisible::Int->(Int -> Int -> Bool)-> Bool
divisible i fn= (fn i (i-1))

main :: IO()
main = print(length([ x | x <- [2..1000], (divisible x divisibleRec) == False])) 
```

[编辑 4]：关于 EDIT3 中的程序，在 divisibleRec 中的递归使用也必须是一个例外，因为内部的“divisibleRec”不作为函数的参数提供。

当我们将许多功能链接在一起时，此规则也变得无法维护。在上面的程序中它并不算太糟糕，我们只有“divisible x divisibleRec”，但是随着我们有更大的程序，上面的方案变得无法维护，因为我们实际上必须将所有函数链接在一个地方......

[编辑 5]：当我最初发布这个问题时，我正在查看不同级别的函数和变量。但是，当您将函数视为变量时，因此限制“在我的程序中编写的所有函数都将执行必要计算所需的所有元素指定为参数（即不使用函数之外的任何内容）”意味着使用其他函数必须将这些其他函数作为参数传递，然后由于 Edit4 中提到的原因，整个方法变得不可维护。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:29:42.623

从理论上讲，您可以使用没有自由变量（从函数外部捕获的 lambda 项）的[组合逻辑](http://en.wikipedia.org/wiki/Combinatory_logic)（这就是您的请求用 lambda 演算表达的方式），但它必须非常不切实际和繁琐，就像深奥的编程语言.

正如评论中所指出的，任何“值”都是一个函数（即使没有参数）。我看到不使用自由变量的主要障碍是任何输入/输出函数都在你的函数之外，所以纯组合程序不能做任何 IO，甚至比 Haskell 本身更无用（根据 SPJ 说 Haskell 是没用的：））。此外，您没有任何库函数，这些函数可能只对一些数学练习有用，而不是编程。

另一个问题是它是否可能在本地，在某些功能子集中，但我怀疑 GHC 或任何其他 Haskell 实现是否允许这样做。

有[一些组合逻辑解释器的实现](http://www.haskell.org/haskellwiki/Combinatory_logic#Implementing_CL)，但我没有看到让 Haskell 成为纯组合的努力。

结论：这个问题属于语言设计和基础数学形式选择的领域。Haskell（基于带有自由变量的 lambda 演算）绝对不同于您想要的。将这样的约束引入 Haskell 将使它成为另一种语言，尽管您可以观察代码中的纪律以使其部分具有组合性。对自由“值”（无参数函数）引入限制在数学上毫无意义，因此不太可能有内置的 Haskell 机制来执行此操作。

# ruby-on-rails - 红宝石怪异：x == y && [x, y].uniq == [x, y]

> ID：13129461
> 
> 赞同：7
> 
> 时间：2012-10-29T20:51:32.127
> 
> 标签：ruby-on-rails, ruby, datetime, activesupport

我有一个 ActiveRecord 对象的二元素数组，`slots_to_import`. 这些对象有`begin_at`列，因此也有属性。我试图获取具有唯一`begin_at`值的对象。唉，`slots_to_import.uniq_by(&:begin_at)`没有工作。但是这`begin_at`两个对象的值是相等的：

```
(rdb:1) p slots_to_import.first.begin_at == slots_to_import.last.begin_at
true
(rdb:1) p slots_to_import.uniq_by(&:begin_at).map(&:begin_at)
[Mon, 26 Nov 2012 19:00:00 UTC +00:00, Mon, 26 Nov 2012 19:00:00 UTC +00:00]
(rdb:1) p [slots_to_import.first.begin_at, slots_to_import.last.begin_at].uniq
[Mon, 26 Nov 2012 19:00:00 UTC +00:00, Mon, 26 Nov 2012 19:00:00 UTC +00:00] 
```

更多检查：

```
(rdb:1) p [slots_to_import.first.begin_at.to_datetime, slots_to_import.last.begin_at.to_datetime].uniq
[Mon, 26 Nov 2012 19:00:00 +0000]
(rdb:1) p [slots_to_import.first.begin_at.usec, slots_to_import.last.begin_at.usec].uniq
[0]
(rdb:1) p [slots_to_import.first.begin_at.to_f, slots_to_import.last.begin_at.to_f].uniq
[1353956400.0]
(rdb:1) p [slots_to_import.first.begin_at.utc, slots_to_import.last.begin_at.utc].uniq
[Mon, 26 Nov 2012 19:00:00 +0000]
(rdb:1) p [slots_to_import.first.begin_at, slots_to_import.last.begin_at].uniq
[Mon, 26 Nov 2012 19:00:00 UTC +00:00, Mon, 26 Nov 2012 19:00:00 UTC +00:00] 
```

我想也许 uniq 正在检查它们是否是同一个对象（因为它们不是）。但是不，我的 rails 控制台中的一些闲逛表明它不使用对象 id 检查：

```
1.8.7 :111 > x = Time.zone.parse("Mon, 29 Oct 2012 19:29:17 UTC +00:00")
 => Mon, 29 Oct 2012 19:29:17 UTC +00:00 
1.8.7 :112 > y = Time.zone.parse("Mon, 29 Oct 2012 19:29:17 UTC +00:00")
 => Mon, 29 Oct 2012 19:29:17 UTC +00:00 
1.8.7 :113 > x == y
 => true 
1.8.7 :114 > [x, y].uniq
 => [Mon, 29 Oct 2012 19:29:17 UTC +00:00] 
```

我正在使用 Ruby 1.8.7p358 和 ActiveSupport 3.2.0。顺便说一句，我可以通过简单地添加来解决我自己的问题 a `to_datetime`，但我真的很好奇为什么这在没有转换的情况下不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T04:23:27.720

我以为您使用的是普通`Time`对象，所以我`time.c`从 Ruby 平台源代码 (1.9.3) 开始。如果它们是 Ruby 1.9.3`Time`对象，您可以尝试：

```
[x.to_r, y.to_r] 
```

现在我知道您正在处理`ActiveSupport::TimeWithZone`对象。（作为建议，下次您发布问题时最好提及此类关键信息。）以下是正文`ActiveSupport::TimeWithZone#eql?`：

```
def eql?(other)
  utc == other
end 
```

这是哈希函数：

```
alias :hash, :to_i 
```

所以下一步是让你展示你从中得到了什么`[x.utc, y.utc, x.to_i, y.to_i, x.utc.class, y.utc.class]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T01:05:51.323

不同的微秒是我的猜测。2 个对象可以显示相同的检查字符串但不相等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T03:45:40.540

```
irb(main):017:0> x = 'a'
=> "a"
irb(main):018:0> y = 'a'
=> "a"
irb(main):019:0> x == y
=> true
irb(main):020:0> [x,y].uniq
=> ["a"]
irb(main):021:0> x.object_id == y.object_id
=> false
irb(main):024:0> x.hash == y.hash
=> true 
```

Ruby 相等性测试基于值，而不是参考。如果你想比较它们是否引用同一个对象，你应该比较`o.object_id`

# php - 致命错误：在非对象上调用成员函数 getValueEncoded()

> ID：13129463
> 
> 赞同：-1
> 
> 时间：2012-10-29T20:51:51.667
> 
> 标签：php, class, pdo, traversal

我有一个遍历目录层次结构的文件。子目录由员工的 ID 命名。我已经实例化了员工类以获取员工的姓名，以便我可以输出姓名而不是 ID。

我不断收到错误“致命错误：调用非对象上的成员函数，我不明白为什么。

我可以使用 var_dump() 转储对象并查看所有内容。只有 3 个子目录，每个子目录包含 4 个文件。

下面是我的代码：

```
 <div id="empDir1" style="padding-left:20px; padding-bottom:25px;">
              <?php
                  $dirPath = "emp_files";
                  function fileManager( $dir ) {

                  $dirParts = explode("/", $dir);
                  $dirId = $dirParts[1];

                  if ( !isset( $dirId ) ){
                      echo "<div></div>";
                  } else {

                  $employeeId = $dirId;
                  $employee = Employee::getEmployee( $employeeId );

                  $emp_lastname = $employee->getValueEncoded('emp_lastname');
                  $emp_firstname = $employee->getValueEncoded('emp_firstname');

                  $dirListing = $emp_lastname . ', ' . $emp_firstname;
                  }

                    echo "<h2>File Listing for $dirListing ...</h2>";
                      if ( !( $handle = opendir( $dir ) ) ) die( "Cannot open $dir." );

                    $fileImage = array(
                        'doc' => '../../images/folder-doc.png',
                        'txt' => '../../images/folder-txt.png',
                        'msg' => '../../images/folder-msg.png',
                        'pdf' => '../../images/folder-pdf.png',
                        'png' => '../../images/folder-png.png',
                        'jpg' => '../../images/folder-jpg.png',
                        'bmp' => '../../images/folder-bmp.png',
                        'gif' => '../../images/folder-gif.png',
                        'xls' => '../../images/folder-xls.png',

                        );

                    $files = array();

                    while ( $file = readdir( $handle ) ) {
                      if ( $file != "." && $file != ".." ) {
                        if ( is_dir( $dir . "/" . $file ) ) $file .= "/";
                        $files[] = $file;
                      }
                    }

                    sort( $files );
                      echo '<table>';
                      foreach ( $files as $file ) {
                        $fileParts = explode('.', $file);
                        $fileExt = strtolower($fileParts[count($fileParts) -1]);
                        echo '<tr>';
                        echo '<td width="650px" class="row2">';
                        echo ("<a class='ptext' href=" . $dir . "/" . $file . ">" . ( isset($fileImage[$fileExt] ) ? "<img src='". $fileImage[$fileExt] . "' />" : "<img src='../../images/folder-unknown.png' />" ) . " $file</a><a style='float:right;padding-right:10px;' href='empUnlink.php?filePath=" . $dir . $file ."' id='" . $dir . $file ."' class='deleteFile'>x</a></p>"); 
                        echo '</td>';
                        echo '</tr>';
                      }
                      echo '</table>';

                    foreach ( $files as $file ) {
                      if ( substr( $file, -1 )  == "/" ) fileManager( "$dir/" . substr( $file, 0, -1 ) );
                    }

                    closedir( $handle );
                  }

                  fileManager( $dirPath );
              ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:56:27.880

好吧，在不知道 class 的代码是什么的情况下`Employee`，我的猜测是静态函数`Employee::getEmployee()`没有找到与 匹配的员工`$employeeid`，并返回 null。`$employee`在尝试使用它之前做一个不为空的检查。

# node.js - 如何找出哪个 Node.js pid 在哪个端口上运行

> ID：13129464
> 
> 赞同：13
> 
> 时间：2012-10-29T20:51:51.910
> 
> 标签：node.js, port, kill, pid

我想重新启动我在服务器上运行的许多 Node.js 进程之一。如果我运行，`ps ax | grep node`我会得到所有节点进程的列表，但它不会告诉我它们在哪个端口上。如何杀死在端口 3000 上运行的那个（例如）。管理多个 Node 进程的好方法是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-29T21:35:17.930

如果你运行：

```
$ netstat -anp 2> /dev/null | grep :3000 
```

您应该会看到如下内容：

```
tcp        0      0 0.0.0.0:3000            0.0.0.0:*               LISTEN      5902/node 
```

在这种情况下，`5902`是 pid。你可以使用这样的东西来杀死它：

```
netstat -anp 2> /dev/null | grep :3000 | awk '{ print $7 }' | cut -d'/' -f1 | xargs kill 
```

这是一个替代版本，`egrep`它可能会更好一些，因为它专门搜索字符串“节点”：

```
netstat -anp 2> /dev/null | grep :3000 | egrep -o "[0-9]+/node" | cut -d'/' -f1 | xargs kill 
```

您可以将上述内容转换为脚本或将以下内容放入您的`~/.bashrc`：

```
function smackdown () {
  netstat -anp 2> /dev/null |
  grep :$@ |
  egrep -o "[0-9]+/node" |
  cut -d'/' -f1 |
  xargs kill;
} 
```

现在你可以运行：

```
$ smackdown 3000 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-05-30T08:59:04.393

这为我节省了很多时间：

`pkill node`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-09-13T15:36:36.240

单线是

```
lsof -n -i:5000 | grep LISTEN | awk '{ print $2 }' | uniq | xargs -r kill -9 
```

如果您要终止用户未启动的进程，则仅需要 sudo。如果您的用户启动了节点进程，您可能可以在不使用 sudo 的情况下将其终止。

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-07T10:43:46.200

为什么不是基于简单`fuser`的解决方案？

如果你不关心使用端口 3000 的进程是否是节点，它可以很简单

```
fuser -k -n tcp 3000 
```

如果你不能确定你不会杀死其他进程，你可以使用类似的东西

```
PID="$(fuser -n tcp 3000 2>/dev/null)" \
  test "node"="$(ps -p $PID -o comm=)" && kill $PID 
```

# php - 无法选择二进制字段whit php

> ID：13129470
> 
> 赞同：0
> 
> 时间：2012-10-29T20:52:05.033
> 
> 标签：php, mysql, binary, bittorrent

我的问题：我无法使用 mysql 选择字段“二进制”

![结构数据库](../Images/57b815d6f190da37a8843009ebb3d286.png)

这是查询（注意“不等于”）：

```
SELECT *
FROM `pt_peers`
WHERE `info_hash` != '7f398565868f7f08f71d236b88e4e433d2311de8' 
```

这是结构：

```
CREATE TABLE IF NOT EXISTS `pt_peers` (
  `info_hash` binary(20) NOT NULL,
  `peer_id` binary(20) NOT NULL,
  `compact` binary(6) NOT NULL,
  `ip` char(15) NOT NULL,
  `port` smallint(5) unsigned NOT NULL,
  `state` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `updated` int(10) unsigned NOT NULL,
  PRIMARY KEY (`info_hash`,`peer_id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

当我直接选择哈希时，答案为空。：/

脚本是：[PeerTracker](http://code.google.com/p/peertracker/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:08:19.873

您似乎正在传递一个 40 字节的十六进制数字 ASCII 表示字符串，其中该表被定义为包含 20 个字节的二进制文件。

试试这个，对二进制字符串使用十六进制文字表示法：

```
SELECT *
FROM `pt_peers`
WHERE `info_hash` = x'7f398565868f7f08f71d236b88e4e433d2311de8' 
```

有关更多信息，请参阅[此](http://dev.mysql.com/doc/refman/5.0/en/hexadecimal-literals.html)。

# regex - 如何仅使用正则表达式提取单词的中间字母

> ID：13129471
> 
> 赞同：0
> 
> 时间：2012-10-29T20:52:12.757
> 
> 标签：regex

如何仅使用正则表达式提取单词的中间字母，例如：

```
"someWord" -> "e" or "W" no sense
"Hello" -> "l"
"Music" -> "s"
"four" -> "o" or "u" no sense 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T20:59:19.660

### Id 对这种任务使用正则表达式没有意义！

由于我不知道你使用什么环境和语言，我可以给你一个大概的方案：

```
pattern = '^.{' + Int(Length(str)/2) + '}(.)' 
```

或者

```
pattern = '(?<=^.{' + Int(Length(str)/2) + '}).' 
```

# javascript - 冲突的Javascript下拉和幻灯片

> ID：13129473
> 
> 赞同：0
> 
> 时间：2012-10-29T20:52:37.237
> 
> 标签：javascript, jquery, menu, slideshow

我在一个网站上工作，在涉及一些 Javascript 时遇到了一些问题。我有一个菜单和一个幻灯片。它们在各自的页面上独立工作，但当我把它们放在一起时——一切都乱了套。我已经上传了到目前为止的内容，但无法弄清楚幻灯片播放中断的原因。任何帮助，将不胜感激。我研究了 noconflict，甚至一些不使用 jquery 的替代幻灯片，但这也是一个失败。下方链接：

[测试页面](http://lmiah.site11.com/_site-dev-about/slidetestweb.html)

您可以看到，如果您将鼠标悬停在菜单上，则会出现预期效果，但是幻灯片放映（我将它们用黑色边框，因此您可以看到所有 4 张幻灯片，不再起作用。）

编辑：这是我得到的错误：

**$("div.slides > ul", $slideshow.context).cycle 不是函数**

**[中断此错误]**
**暂停：真**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T20:57:56.187

可能是你有 jQuery.noConflict(); 但是您随后继续使用 $ 来引用 jQuery 对象。

此外，如果您查看链接到[http://lmiah.site11.com/_site-dev-about/js/jquery.hoverIntent.js](http://lmiah.site11.com/_site-dev-about/js/jquery.hoverIntent.js)的源代码，它会转到 404 页面 - 这可能会导致一些问题。

# image - 我如何打印一个非常大的图像，或者至少以合理的方式保存一个非常大的图像？

> ID：13129474
> 
> 赞同：0
> 
> 时间：2012-10-29T20:52:37.967
> 
> 标签：image, image-processing, printing

我不太确定如何标记这个问题，所以如果您认为它们适用，我想添加标签。

我有一个*相当大*的矩阵，我被要求绘制并打印出来作为海报。它的尺寸是70K。即，我有一个 70,000 平方的数组，我必须绘制它，将每个元素的值映射到某种颜色。这不是困难的部分，我可以做到。

问题是，如何以合理的方式保存这样的图像？

我意识到这在很大程度上取决于图像的特定属性。我认为这张图片在这方面可能存在问题。它之所以看起来很有趣，是因为它本质上是分形的。很多图像只是白色的，如果这会有所帮助......

然后，如果我确实打印出来，那么即使是 2400dpi，它也会是一平方米，每个矩阵元素只有 1 个*像素。*它看起来有什么好处吗？还是会看起来像一团可怕的烂摊子？（询问的一个原因是我不能直接去打印看看，因为这可能会浪费 50 英镑！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:57:48.680

我不知道您的数据看起来如何，但我可以想到一些好的方法来做到这一点：

1.  运行长度编码 - 逐行列出交替模式中有多少黑色，多少白色，黑色，白色。
2.  坐标列表 - 如果您的人口非常稀少，您可以简单地列出填写的坐标。
3.  白盒 - 这就像一次列出一个位（在您的 70k x 70k 中大约是 4.9b 位），除了它首先列出只有白色的大矩形区域。当这些位被列出时，它会跳过初始框列表中的任何内容。当它们被读入时，它也知道跳过框中的内容。这里有 12 个字节（每个坐标 3 个），可能会表示 20 x 20 的框（400 位）或更大。那将是大约 10% 的压缩。如果你能得到一个 200x200 的盒子，你就会看到 1% 的压缩率。

对于 RLE，假设您使用 16 位作为样本大小。因此，如果您的某一行开始是这样的：`1245 white, 2 black, 100 white, 1 black, 834 white`您可以对其进行编码（以十六进制表示）`04dd0002006400010342`（请注意，004d 是十六进制的 1245，等等...）。现在使用 80 位并表示 2182 位，或大约 3.6% 的压缩率。

但不要自己动手......我建议，如果可以的话，只使用...... PNG！

我制作了一个 7k x 7k 的随机文件（或总面积的 1/100）。每 100 个白色随机分布 1 个黑色。结果为 677k，或大约 11.3% 的压缩率。

我将它提高到 20k x 20k（大约是你总面积的 1/12）并且它再次具有 100:1 的随机分布。它的大小为 5.4Mb，或大约 11.1% 的压缩率。

因此，如果您的黑白比例为 1:100，我敢打赌您将能够以大约 11% 的所需位或 600Mb 以下来表示您的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:50:21.797

人眼开始失去看到大约 300 DPI 的单个像素的能力，因此拥有比这更高的分辨率的图像是没有意义的。因此，这成为如何降低图像分辨率的练习。在每个像素 3 个字节的情况下，您的原始文件将占用 14.7GB，因此大多数现成的解决方案不太可能实用。

我假设您可以按顺序读取数据，这样就无需同时将所有数据都保存在内存中。

一种简单的缩减方法是一次读取 8 行，然后平均每个 8x8 区域以产生一个输出像素。这会产生一个 8750 x 8750 的图像，它仍然很大，但在合理的范围内。

有一些调整大小的方法产生的结果比您可以针对原始滑动窗口运行的平均结果稍好。重叠窗口最好能产生无缝的结果。

# c# - 使用 linq 查询从数据库中提取时日期格式不正确

> ID：13129475
> 
> 赞同：0
> 
> 时间：2012-10-29T20:52:49.383
> 
> 标签：c#, javascript, asp.net-mvc, linq, jquery

我想从数据库中提取日期并将其显示在 Telerik ddl 中。我可以提取日期并显示它，但无法使格式正常工作。日期显示如下：

```
/Date(13496724000000)/ 
```

这是我从数据库中提取日期的控制器操作：

```
 [HttpPost]
    public ActionResult Date(int id)
    {
        var dates = (from p in db.vwdb.Where(u => u.Id == id)
                           group p by p.Date into g
                    select g.Key).ToList();

        return Json(new { data = Convert.ToDateTime(weeks.Min())});
    } 
```

这是我在 ddl 中显示的 jquery：

```
function populateDate() {
    var link = '/Users/Date';
    var dataSource = [];
    $.ajax({
        type: 'POST',
        url: link,
        data: { id: id },
        dataType: 'json',
        success: function (result) {
                var dateOf = result.data;
                dataSource.push({ Text: dateOf , Value: dateOf });
            $("#Date").data("tDropDownList").dataBind(dataSource);
        },
        error: function (result) {
            alert(result.message);
        }
    });
}; 
```

我想以这种格式显示日期：“MM/DD/YYYY”而不是“/Date(13496724000000)/”

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:17:24.077

您可以解析此**json 日期** 格式并将其转换为`"MM/DD/YYYY"`格式。

尝试：

```
// jsonDate = "/Date(13496724000000)/"

function parseJsonDateTime(jsonDate) {

    var dateString = jsonDate.substr(6);
    var currentTime = new Date(parseInt(dateString));
    var month = currentTime.getMonth();
    var day = currentTime.getDate();
    var year = currentTime.getFullYear();

   var date = month + "/" + day + "/" + year;
    return date;

}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T07:07:13.487

试试这样：

```
success: function (result) {
    var date = new Date(parseInt(result.data.replace("/Date(", "").replace(")/",""), 10));
    var dateOf = date.getDate() + "/" + (date.getMonth() + 1) + "/" + date.getFullYear();
    dataSource.push({ Text: dateOf , Value: dateOf });
    $("#Date").data("tDropDownList").dataBind(dataSource);
} 
```

​</p>

# hadoop - 影响长途网络最终一致性的因素有哪些？

> ID：13129478
> 
> 赞同：0
> 
> 时间：2012-10-29T20:53:02.363
> 
> 标签：hadoop, nosql, amazon-dynamodb, eventual-consistency

我查阅了很多关于最终一致性的资源，他们都谈到了为什么它很重要，以及关于 Paxos 和拜占庭一般问题之类的东西。我更感兴趣的是了解在**长途网络上实际实施或确保最终一致性**- 需要做什么，挑战是什么，规避和预防和防范任何可能阻碍最终一致性的可能方法。从您的个人经历到您可能知道的链接的任何内容都会非常有用。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:52:08.413

最大的挑战：记住你想要达到的目标。以我的经验，ec 系统面临三个挑战：

1.  每个密钥在任何时间点的未知复制级别。为了解决这个问题，采用了各种技术：读取修复、默克尔树。在长途网络的情况下，这一点可能具有挑战性。

2.  如果有强烈的仲裁要求，您将写入远程数据中心，因此您的写入性能将受到远程数据中心的链接吞吐量的限制。并且在长时间延迟的情况下，它很可能会“丢失写入”：当客户端认为时，该写入未执行，但实际上它已执行。因此很容易出现这种情况，当您无法写入仲裁时，但其他客户端会看到您认为“未写入”的数据

3.  如果您将使用 quorum=1 读取数据，则数据稳定性（以获得更好的读取性能）。但是这里有一些聪明的解决方案，比如[Probabilistically Bounded Staleness for Practical Partial](http://www.eecs.berkeley.edu/Pubs/TechRpts/2012/EECS-2012-4.pdf) Quorums

# javascript - 随机图像在画布上像雨一样落下（Javascript）

> ID：13129479
> 
> 赞同：3
> 
> 时间：2012-10-29T20:53:05.903
> 
> 标签：javascript, canvas

所以我一直在玩画布。尝试模拟随机下落的物体，绘制背景图像没有问题，而不是应该模拟雨滴的第二张图片。

我可以让下降以随机 x 下降，但现在我不确定如何循环下降图像 x 次由变量 noOfDrops 设置。

我把我的循环注释掉了，只有一滴随机落下的工作代码是：

```
<!DOCTYPE html>
<html lang="en">
<head>
<title>Canvas Regn</title>
<script type="text/javascript">
var ctx;
var imgBg;
var imgDrops;
var x = 0;
var y = 0;
var noOfDrops = 50;
var fallingDrops = [];

    function setup() {
        var canvas = document.getElementById('canvasRegn');

        if (canvas.getContext) {
                ctx = canvas.getContext('2d');
        setInterval('draw();', 36);
        imgBg = new Image();
        imgBg.src = 'dimma.jpg';

        imgDrops = new Image();
        imgDrops.src = 'drop.png';

        /*for (var i = 0; i < noOfDrops; i++) {
            var fallingDr = imgDrops[i];
            fallingDr.x = Math.random() * 600;
            fallingDrops.push(fallingDr);
            }*/

        }
    }

    function draw() {
        drawBackground();
        ctx.drawImage (imgDrops, x, y); //The rain drop

        y += 3; //Set the falling speed
        if (y > 450) {  //Repeat the raindrop when it falls out of view
        y = -25 //Account for the image size
        x = Math.random() * 600;    //Make it appear randomly along the width
        }
    }

    function drawBackground(){  
        ctx.drawImage(imgBg, 0, 0); //Background
    }
</script>
</head>
<body onload="setup();">
<canvas id="canvasRegn" width="600" height="450"style="margin:100px;"></canvas>
</body>
</html> 
```

如果有人对如何实现它有一些好的想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T21:22:12.660

您的循环实际上非常接近。您将遇到的最大问题是您不能只保持 1 x 和 1 y 值，您必须保持每个图像的值。所以我稍微修改了你的循环，将一个对象推送到具有 x、y 和速度值的数组上。速度值使您可以很好地随机化运动，因此一切都不会以相同的速度下降：

```
var ctx;
var imgBg;
var imgDrops;
var x = 0;
var y = 0;
var noOfDrops = 50;
var fallingDrops = [];

    function drawBackground(){  
        ctx.drawImage(imgBg, 0, 0); //Background
    }

    function draw() {
        drawBackground();

        for (var i=0; i< noOfDrops; i++)
        {
        ctx.drawImage (fallingDrops[i].image, fallingDrops[i].x, fallingDrops[i].y); //The rain drop

        fallingDrops[i].y += fallingDrops[i].speed; //Set the falling speed
        if (fallingDrops[i].y > 450) {  //Repeat the raindrop when it falls out of view
        fallingDrops[i].y = -25 //Account for the image size
        fallingDrops[i].x = Math.random() * 600;    //Make it appear randomly along the width    
        }

        }
    }

    function setup() {
        var canvas = document.getElementById('canvasRegn');

        if (canvas.getContext) {
                ctx = canvas.getContext('2d');

                    imgBg = new Image();
            imgBg.src = "http://lorempixel.com/600/600/sports/";
        setInterval(draw, 36);
        for (var i = 0; i < noOfDrops; i++) {
            var fallingDr = new Object();
            fallingDr["image"] =  new Image();
        fallingDr.image.src = 'http://lorempixel.com/10/10/sports/';

            fallingDr["x"] = Math.random() * 600;
            fallingDr["y"] = Math.random() * 5;
            fallingDr["speed"] = 3 + Math.random() * 5;
            fallingDrops.push(fallingDr);
            }

        }
    }

setup(); 
```

这是一个小提琴演示：http: [//jsfiddle.net/L4Qfb/21/](http://jsfiddle.net/L4Qfb/21/)

# asp.net - 为什么从 ASP.NET Web API 中的请求中剥离内容范围标头？

> ID：13129481
> 
> 赞同：13
> 
> 时间：2012-10-29T20:53:12.970
> 
> 标签：asp.net, .net, asp.net-mvc-4, asp.net-web-api

我正在创建一个 API，可以在其中以分块方式上传文件。

通过这个[Stackoverflow question and answer](https://stackoverflow.com/questions/7464176/is-using-the-http-content-range-header-appropriate-when-sending-a-file-in-chunks/7464204#comment17850031_7464204)，内容范围标题似乎最适合这个。

但是，在控制器操作中，标题已被剥离，因此我无法访问它。当我使用“范围”标头时，它在请求标头集合中可用。

有人知道为什么从请求中删除 Content-Range 吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T23:40:36.987

它没有被剥离。在 Request.Content.Headers 中查找它。看起来他们将标头与 HTTP/1.1 规范对齐——将实体标头移动到 Request.Content.Headers。
我在一个示例请求中进行了尝试，并在那里找到了它。

[在阅读了RFC 2616](http://www.ietf.org/rfc/rfc2616.txt)的相关部分后，我发现了这个变化。我最近一直在讨论它，因为主要作者 Fielding 也是 REST 架构风格的发明者，我正在尝试使用 ASP.NET Web API 来遵循这种风格。

我意识到“请求”、“响应”、“一般”（用于请求和响应但与实体无关）和“实体”标头之间存在区别。

看起来 ASP.NET 团队修改了类模型以更好地反映 RFC，创建了 HttpHeaders 的三个子类：

*   “5.3 请求头字段”和“4.5 通用头字段”的 HttpRequestHeaders
*   “6.2 响应头字段”和“4.5 通用头字段”的 HttpResponsHeaders
*   “7.1 实体标头字段”的 HttpContentHeaders

这些是 MSDN 中三个类的逐字描述（链接是我的）：

*   [HttpRequestHeaders](http://msdn.microsoft.com/en-us/library/system.net.http.headers.httprequestheaders.aspx)：表示[RFC 2616 中定义的请求标头](https://www.rfc-editor.org/rfc/rfc2616#section-5.3)的集合。
*   [HttpResponseHeaders](http://msdn.microsoft.com/en-us/library/system.net.http.headers.httpresponseheaders.aspx)：表示[RFC 2616 中定义的响应标头](https://www.rfc-editor.org/rfc/rfc2616#section-6.2)的集合。
*   [HttpContentHeaders](http://msdn.microsoft.com/en-us/library/system.net.http.headers.httpcontentheaders.aspx)：表示[RFC 2616 中定义的内容标头](https://www.rfc-editor.org/rfc/rfc2616#section-7.1)的集合。Content-Range 是一个Entity Header，所以ContentRange 在HttpContentHeaders 中。

请注意，虽然 MSDN 类描述有点错误 - RFC 中没有 Content Headers 定义，但很明显它们的意思是 Entity Headers。

# php - 如何在下拉列表中围绕 php 数组值包装 optgroup 标签

> ID：13129486
> 
> 赞同：0
> 
> 时间：2012-10-29T20:53:31.970
> 
> 标签：php, arrays, foreach

我有一个名为 $selection 的数组，其中包含从 09:00 到 18:00 以 15 分钟为间隔的递增时间值。

例如：$selection = array(09:00, 09:15, 09:30, 09:45, 10:00, 10:15, 10:30);

某些间隔可能会丢失，因为该数组是从某些先前的代码生成的，该代码确定哪些时间可从谷歌日历中获得（除其他外）。09:00 并不总是开始时间，有时整个上午都可能被预订一空。

我正在使用这个数组来创建一个下拉列表。

```
foreach($selection as $slot) {
  if ( $slot == $selection[0] ) {
    print '<option value="'.$slot.'" selected="selected">'.date('H:i',  strtotime($slot)).'</option>';
  } else {
    print '<option value="'.$slot.'">'.date('H:i', strtotime($slot)).'</option>';
  } // end else
} 
```

**问题**

我正在尝试添加

```
<optgroup label="Morning"> .. </optgroup> 
```

和

```
<optgroup label="Afternoon"> .. </optgroup> 
```

不知道该怎么做。我得出的结论是我需要一个while循环。甚至可能在运行 foreach 循环之前将额外的信息添加到数组中......不确定！

将不胜感激任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:17:42.883

```
$interval = '';
$prev_interval = '';

foreach($selection as $slot) {
// Check if selected option

if ( $slot == $selection[0] ) {

  $sel = "selected = \"selected\"";
}

else { $sel = '';}

//$sel = ( $slot == $selection[0] ) ? ' selected = "selected" : '';

// Set optgroup interval; 
// for HH:MM we can use basic string alphabet comaparsion

if (date('H:i', strtotime($slot)) > '18:30') {
   $interval = 'Evening';
}

else if (date('H:i', strtotime($slot)) > '15:30') {
   $interval = 'Late Afternoon';
}

else if (date('H:i', strtotime($slot)) > '12:00') {
   $interval = 'Early Afternoon';
}

else if (date('H:i', strtotime($slot)) > '10:30') {
   $interval = 'Late Morning';
}  

else if (date('H:i', strtotime($slot)) > '09:00') {
   $interval = 'Early Morning';
}

// check if interval has changed
if ($prev_interval != $interval) {  
   // check if previous intrval was set

   if ($prev_interval!='') {
    echo "</optgroup>";
  }

   printf('<optgroup label="%s">',$interval); 
} 

printf('<option value="%s"%s>%s</option>',$slot,$sel,date('H:i',  strtotime($slot)))  ;

$prev_interval = $interval;
}

// last close element

if ($interval!='') { echo '</optgroup>'; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:45:18.123

对于**排序数组**：

```
$interval = '';
$prev_interval = '';

foreach($selection as $slot) 
{
    // Check if selected option

    $sel = ( $slot == $selection[0] ) ? ' selected = "selected" ' : '';

    // Set optgroup interval; 
    // for HH:MM we can use basic string alphabet comaparsion

    if ($slot > '22:00')
    {
       $interval = 'Night';
    } 
    else if ($slot > '18:00')
    {
       $interval = 'Evening';
    }
   ...

    // check if interval has changed

    if ($prev_interval != $interval)
    {  
       // check if previous intrval was set

       if ($prev_interval!='') {  echo "</optgroup>" };

       printf('<optgroup label="%s">',$interval); 
    } 

    printf('<option value="%s"%s>%s</option>',$slot,$sel,date('H:i',  strtotime($slot)))  ;

    $prev_interval = $interval;
}

// last close element

if ($interval!='') { echo '</optgroup>'; } 
```

**如果数组之前无法排序，只需在循环中存储到二维数组并在之后打印。**

# regex - 使用正则表达式解析 HTML 卡在某处

> ID：13129487
> 
> 赞同：0
> 
> 时间：2012-10-29T20:53:33.420
> 
> 标签：regex, vb.net

这是我的正则表达式

```
Dim TableHeaderExpression As String = "<th[^>]*>(.*?)</th>" 
```

这是我的 HTML

```
<th class="seller-col">
 <b>Relevanz</b>
 <span class="ps-sprite ps-sprite-sortdw" title=""></span>
 </th> 
```

这个表达式给了我 th 标签内的所有东西，所以它输出

```
<b>Relevanz</b>
     <span class="ps-sprite ps-sprite-sortdw" title=""></span> 
```

但我如何让它只输出

```
Relevanz 
```

意思是忽略里面的所有文字，`<th>`除了里面的东西`<b>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:56:08.380

不要使用 Regex 来解析 HTML（[不是最佳选择](https://stackoverflow.com/a/1732454/1583)），而是使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)来解析和查询 HTML。

> 这是一个敏捷的 HTML 解析器，它构建一个读/写 DOM 并支持普通的 XPATH 或 XSLT（实际上你不必了解 XPATH 或 XSLT 就可以使用它，不用担心......）。它是一个 .NET 代码库，允许您解析“网络之外”的 HTML 文件。解析器对“真实世界”格式错误的 HTML 非常宽容。对象模型与 System.Xml 的提议非常相似，但用于 HTML 文档（或流）。

# jquery - 处理来自 json 自动完成响应的数据

> ID：13129488
> 
> 赞同：1
> 
> 时间：2012-10-29T20:53:33.873
> 
> 标签：jquery, json, jquery-ui, append

我从 jquery 自动完成插件得到这种类型的响应：

```
 {"data":{
                "events":{"id":"96","value":"Nr 1 Offline","abbrev":"image.jpg"},
                "users":{"id":"9346","value":"John":"avatar.jpg"}
              }
} 
```

现在，我该如何处理这些数据？例如：

1.  提醒一些用户名；或者

2.  将他的头像图像附加到 am`<img>`标签；

    我是 jquery-ui 的新手，所以一个小例子对我很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:00:06.017

> 例如提醒某些用户的姓名或将他的头像图像附加到 am 标签？我是 jquery ui 的新手，所以一个小例子对我很有帮助

提醒用户名：

```
$data = {"data":{
            "events":{"id":"96","value":"Nr 1 Offline","abbrev":"image.jpg"},
            "users":{"id":"9346","value":"John", "avatar":"avatar.jpg"}
          }
    }//Note please I've added an "avatar" key to your $data

 alert($data.data.users.value); 
```

将他的头像图像附加到 img 标签：

```
$data = {"data":{
            "events":{"id":"96","value":"Nr 1 Offline","abbrev":"image.jpg"},
            "users":{"id":"9346","value":"John", "avatar":"avatar.jpg"}
          }
    }; //Note please I've added an "avatar" key to your $data

 $("#your-image-id").attr("src", $data.data.users.avatar); 
```

我希望它有所帮助。干杯

# c++ - wxWidgets 链接程序中的 Microsoft SDK 编译器错误 C2332 和 C2011

> ID：13129489
> 
> 赞同：2
> 
> 时间：2012-10-29T20:53:34.907
> 
> 标签：c++, windows, wxwidgets, wxmathplot

我在 Windows 7 计算机上编译 Visual Studio 2010 中的程序时遇到问题。在发布模式下编译时出现以下错误，但在调试模式下没有。我仔细检查了两种模式的所有属性设置，它们是相同的，除了它们必须不同的地方；代码生成设置是/MD for Runtime，/MDd for Debug，和我编译wxWidgets（2.8.12）库的设置相同，wxWidgets库的名称略有不同。正如我所说，我在调试模式下编译和运行我的程序，或者在任一模式下运行 wxWidgets 示例都没有问题。我还链接到 wxMathPlot，这是一个 wxWidgets 插件，我不知道这是否相关。我可以运行 wxMathPlot 示例的调试或发布版本。

现在微软有一些关于这些编译器错误的信息，但没有什么对我有太大帮助：

[http://msdn.microsoft.com/en-us/library/3ys51zwc(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/3ys51zwc(v=vs.71).aspx) http://msdn.microsoft.com/en-us/library/sksadsda.aspx

此声明似乎相关：“如果您将类型库多次导入同一个文件，您也可能会获得 C2011”

除了我不知道这意味着什么，或者我可能会怎么做。我会为一种模式而不是另一种模式做这件事似乎很奇怪。有没有人看到这个问题并知道如何克服它？

谢谢菲尔

```
1>C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\include\unknwn.h(124): error C2332: 'class' : missing tag name
1>C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\include\unknwn.h(124): error C2011: '<unnamed-tag>' : 'enum' type redefinition
1>          C:\WXWIDGETS\wxWidgets-2.8.12\include\wx/app.h(48) : see declaration of '<unnamed-tag>'
1>C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\include\unknwn.h(124): error C2059: syntax error : 'constant'
1>C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\include\unknwn.h(125): error C2143: syntax error : missing ')' before '>'
1>C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\include\unknwn.h(131): error C2065: 'pp' : undeclared identifier
1>C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\include\unknwn.h(134): warning C4229: anachronism used : modifiers on data are ignored
1>C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\include\unknwn.h(134): error C2365: 'IUnknown::QueryInterface' : redefinition; previous definition was 'member function'
1>          C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\include\unknwn.h(116) : see declaration of 'IUnknown::QueryInterface'
1>C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\include\unknwn.h(134): error C2998: 'HRESULT QueryInterface' : cannot be a template definition
1>C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\include\unknwn.h(316): error C2989: 'AsyncIUnknown' : class template has already been declared as a non-class template
1>          C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\include\unknwn.h(59) : see declaration of 'AsyncIUnknown'
1>C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\include\unknwn.h(434): error C2989: 'IClassFactory' : class template has already been declared as a non-class template
1>          C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\include\unknwn.h(65) : see declaration of 'IClassFactory'
1>C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\include\objidl.h(269): error C2989: 'IRpcChannelBuffer' : class template has already been declared as a non-class template
1>          c:\program files (x86)\microsoft sdks\windows\v7.0a\include\rpcndr.h(708) : see declaration of 'IRpcChannelBuffer'
1>C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\include\objidl.h(305): error C2989: 'IRpcStubBuffer' : class template has already been declared as a non-class template
1>          c:\program files (x86)\microsoft sdks\windows\v7.0a\include\rpcndr.h(2489) : see declaration of 'IRpcStubBuffer'
1>C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\include\objidl.h(653): error C2143: syntax error : missing ';' before 'identifier'
1>C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\include\objidl.h(653): warning C4091: 'typedef ' : ignored on left of '_COSERVERINFO' when no variable is declared
1>C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\include\objidl.h(653): fatal error C1075: end of file found before the left brace '{' at 'C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\include\objidl.h(595)' was matched 
```

这是从 unknwn.h 文件中抱怨的一段代码，从第 124 行开始：

```
template<class Q>
  HRESULT
#ifdef _M_CEE_PURE
  __clrcall
#else
  STDMETHODCALLTYPE
#endif
QueryInterface(Q** pp)
{
  return QueryInterface(__uuidof(Q), (void **)pp);
} 
```

# c - 致命错误：linux/kthread.h：没有此类文件或目录编译终止

> ID：13129492
> 
> 赞同：2
> 
> 时间：2012-10-29T20:53:50.320
> 
> 标签：c, gcc, ubuntu, kernel

我正在尝试熟悉 kthreads 并编写了一个非常简单的程序来在 C 中对其进行测试，指导来自：[http](http://tuxthink.blogspot.com/2011/02/kernel-thread-creation-1.html) ://tuxthink.blogspot.com/2011/02/kernel-thread-creation-1.html 。我在 MacOSX 上的 VMware 中运行 Ubuntu。

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include "cycle.h"
#include <linux/kthread.h>
#include <linux/sched.h>

int main(){
    static struct task_struct *kthread;

    thread1 = kthread_create(thread_fn, NULL, "thread1");
    wake_up_process(thread1);
    kthread_stop(thread1);

    return 0;
} 
```

当我尝试使用 gcc (gcc test5.c -o test5.out) 编译它时，我得到“致命错误：linux/kthread.h：没有这样的文件或目录编译终止。”

当我去查看 /usr/include/linux/ 时，没有 kthread.h 文件，所以这似乎是合理的。当我搜索 kthread.hi 时，在 /usr/src/linux-headers-3.2.0-31/include/linux 中找到一个，在 /usr/src/linux-headers-3.2.0-29/include/linux 中找到一个，但是在我尝试将其中一个复制到 /usr/include/linux/ 后，我不断收到错误消息：

```
In file included from /usr/include/linux/kthread.h:4:0,
             from test5.c:5:
/usr/include/linux/err.h:22:35: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’     before ‘ERR_PTR’
/usr/include/linux/err.h:27:33: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘PTR_ERR’
/usr/include/linux/err.h:32:33: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’     before ‘IS_ERR’
/usr/include/linux/err.h:37:33: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘IS_ERR_OR_NULL’
/usr/include/linux/err.h:49:35: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘ERR_CAST’
/usr/include/linux/err.h:55:32: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘PTR_RET’
In file included from test5.c:5:0:
/usr/include/linux/kthread.h:7:10: error: expected declaration specifiers or ‘...’ before numeric constant
/usr/include/linux/kthread.h:7:13: error: expected declaration specifiers or ‘...’ before numeric constant
/usr/include/linux/kthread.h:58:2: error: unknown type name ‘spinlock_t’
/usr/include/linux/kthread.h:59:19: error: field ‘work_list’ has incomplete type
/usr/include/linux/kthread.h:64:19: error: field ‘node’ has incomplete type
/usr/include/linux/kthread.h:66:2: error: unknown type name ‘wait_queue_head_t’
/usr/include/linux/kthread.h:67:2: error: unknown type name ‘atomic_t’
/usr/include/linux/kthread.h:128:1: error: unknown type name ‘bool’
test5.c: In function ‘main’:
test5.c:11:2: error: ‘thread1’ undeclared (first use in this function)
test5.c:11:2: note: each undeclared identifier is reported only once for each function it appears in
test5.c:11:12: error: ‘thread_fn’ undeclared (first use in this function) 
```

任何有关如何解决此问题的想法将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T20:58:47.880

这些是用于**内核空间**而不是**用户空间线程的内核***线程*！您应该将代码更改为具有适当 Makefile 的内核模块，或者将[pthreads](https://computing.llnl.gov/tutorials/pthreads/)用于用户空间线程。也许你应该从[HelloWorld](http://www.tldp.org/LDP/lkmpg/2.4/html/c147.htm)内核模块开始

# python - 在python中调用fortran代码时如何处理全局变量（例如使用f2py）？

> ID：13129493
> 
> 赞同：4
> 
> 时间：2012-10-29T20:53:55.747
> 
> 标签：python, global-variables, fortran, f2py

我想用 python 运行一些 fortran 代码，并为此使用**f2py -c -m**。但是，似乎只有**FUNCTION**被打包到**.so**文件中，而不是**PROGRAM**。那我该如何处理全局变量呢？例如，将变量**c**放入模块中

```
MODULE nfw
  double precision :: c
END MODULE nfw 
```

, 在 PROGRAM 中修改，并由同一文件中的 FUNCTION 隐式使用

```
PROGRAM Compute_Profile
  USE nfw
  c = 5.0
END PROGRAM Compute_Profile

DOUBLE PRECISION FUNCTION y(x)
  USE nfw
  double precision :: x
  y = c * x
  return
END FUNCTION y 
```

如何调用让函数**y(x)**知道python中**c的值？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T21:31:27.307

在您的 f2py 模块下应该是另一个模块，名为 nfw 的 Fortran 模块。它应该在那里。

```
$ f2py -c -m mod nfw.f90

$ python
import mod
mod.nfw.c

array(0.0) 
```

确保您使用 f2py 模块编译源文件。

# css - 如何裁剪具有动态宽度、流畅布局的文本？

> ID：13129494
> 
> 赞同：2
> 
> 时间：2012-10-29T20:53:57.220
> 
> 标签：css, crop

当元素的宽度是动态的时如何裁剪文本？

当元素的宽度固定时，可以裁剪文本：

```
.my-class {
  width: 100px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
} 
```

但是当宽度是动态的时候怎么办呢？

真实示例 - 标题浮动在左侧，工具栏浮动在右侧的应用程序标题：

![在此处输入图像描述](../Images/ebaf35ca6109ae1b377147effe2f49d2.png)

标题应该占据所有空闲位置，但不能更多：

![在此处输入图像描述](../Images/6e5e1370e645c78c50be95927a1c7db8.png)

如何在这样的动态标题中裁剪文本？

实时播放代码[http://cssdeck.com/labs/fbe2t2qo/0](http://cssdeck.com/labs/fbe2t2qo/0)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T20:55:42.437

您可以使用 CSS`min-width`和`max-width`属性，这将为您完成工作

```
.my-class {
  min-width: 100px;   <----Here
  max-width: 500px;   <----Here
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T15:19:29.200

事实证明它实际上是可以做到的，变化是：

*   首先在html中设置工具栏并使其向右浮动。
*   在标题上设置文本溢出。

HTML

```
<div class='header'>
    <div class='header-toolbar'>
        <button>Create</button>
    </div>
    <div class='header-title'>
        Very very very very very long very very very long title
    </div>

    <div class='clearfix'></div>
</div> 
```

CSS

```
.header, .header-title, .header-toolbar {
    border: 1px solid black;
    margin: 3px;
    padding: 3px;
}

.header-title {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.header-toolbar {
    float: right;
}

.clearfix {
    clear: both;
} 
```

代码[http://cssdeck.com/labs/na24g9nf/0](http://cssdeck.com/labs/na24g9nf/0)

附言

这不是我的回答，这个人回答了这个问题[http://www.sql.ru/forum/memberinfo.aspx?mid=114453](http://www.sql.ru/forum/memberinfo.aspx?mid=114453)在这个线程[http://www.sql.ru/forum/actualthread.aspx?tid =979934](http://www.sql.ru/forum/actualthread.aspx?tid=979934)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-06T07:57:22.827

如果您不想使用浮点数，请查看以下带有表格单元的解决方案。

此解决方案使用 CSS 中的“显示：表格”来实现 100% 流畅的文本溢出省略号。不需要浮动！

HTML：

```
<div class='header'>
  <div class='header-title'>
     <div class="fluid-ellipsis-container">
        <div class="fluid-ellipsis-content">
          This solution uses 'display: table' in CSS for 100% fluid text-overflow ellipsis. <strong>NO FLOATS needed!</strong> It's important to note that this works because of the browser's process of calculating the 'table-cell' width within a fixed layout scheme of the parent 'table' div, in effect creating a "fixed" table-cell width on each browser reflow/paint, hence applying the ellipsis property without dynamic width issues.
        </div>                    
     </div>      
  </div>
  <div class='header-toolbar'>
    <button>Create</button>
  </div>
</div> 
```

CSS：

```
.header, .header-title, .header-toolbar {
    box-sizing: border-box;
    border: 1px solid rgba(150,150,150,0.5);
    padding: 5px;
}
.header{
    display: table;
}
.header-title {
    display: table-cell;
    vertical-align:middle;
    width: 85%;
}
.header-toolbar {
    display: table-cell;
    width: 15%;
    text-align: center;
    vertical-align: middle;
}
.fluid-ellipsis-container{
    display:table;
    table-layout: fixed;
    width: 100%;
}
.fluid-ellipsis-content{
    display: table-cell;
    vertical-align: middle;
    white-space:nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
} 
```

重要的是要注意，这是因为浏览器在父 'table' div 的固定布局方案中计算 'table-cell' 宽度的过程，实际上在每个浏览器 reflow 上的单元格上创建一个“固定”宽度/油漆调整大小，因此应用省略号属性而没有动态宽度问题。

[http://cssdeck.com/labs/j5zk46la](http://cssdeck.com/labs/j5zk46la)

# java - 将类的字符串表示解析为实际类型

> ID：13129496
> 
> 赞同：1
> 
> 时间：2012-10-29T20:54:08.543
> 
> 标签：java

我正在使用第三方系统，该系统在内部将对象类型记录为原始字符串，例如“com.example.MyClass”。

我需要找到一种方法来将这样的字符串解析为*实际*的相应类型。例如，在此处的示例中，我想获得与编写 MyClass.class 相同的内容。

这可以做到吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T20:56:28.100

除非您在选择正确的类加载器时遇到问题，否则这就足够了：

```
Class.forName(string); 
```

# ruby-on-rails - 包装 minitest 测试块

> ID：13129507
> 
> 赞同：1
> 
> 时间：2012-10-29T20:54:42.177
> 
> 标签：ruby-on-rails, ruby

我正在使用带有 rails 3.2 的 minitest。我想定义我自己的“测试”函数来做一些特殊的事情，然后正常进行。

通常，您可以这样定义测试：

```
class MyControllertest < ActionController::TestCase                        
  test "should note have defined x" do
    assert(!(defined? x))
    get :index
    assert_response :success
  end
end 
```

我希望能够做到以下几点

```
class MyControllerTest < ActionController::TestCase                        
  special_test "should define X" do
    assert(defined? x)
    get :index
    assert_response :success
  end
end 
```

因此，我在包含的测试助手中尝试了以下内容

```
class ActiveSupport::TestCase    
  def self.special_test(name)                                                                                                                                                    
    self.test(name) do                                                                                                                                                           
      x=1
      yield                                                                                                                                                                     
    end                                                                                                                                                                            
  end    
end 
```

但是，我得到

```
undefined method `get' for MyControllerTest:Class 
```

有人可以教我一些关于元编程的知识/如何去做吗？

[https://github.com/seattlerb/minitest](https://github.com/seattlerb/minitest)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:56:12.270

这在测试示例中很奇怪，您正在显示 test which sublcas`ActionController::TestCase`但您正在定义您的方法`ActiveSupport::TestCase`，`ActionController::TestCase`如果这是您想要的，请定义您的自定义方法。

# linq-to-entities - 对 Linq-to-Entities 查询结果进行操作的 Linq-to-Objects 查询存在一些混淆

> ID：13129508
> 
> 赞同：1
> 
> 时间：2012-10-29T20:54:46.280
> 
> 标签：linq-to-entities, linq-to-objects

Linq to objects 表达式返回一个对象，在枚举时从序列中产生元素。通常，延迟的 LINQ-to-Object 方法充当管道，因此序列的每个元素在处理下一个元素之前都流过处理管道。

a) 但是如果 Linq-to-Objects 查询对 Linq-to-Entities 查询的结果进行操作，那么当 `foreach`尝试迭代时`search`，在处理下一个元素之前，每个元素是否再次流过整个处理序列（换句话说，是第一个元素从从数据库中检索到的序列中`Enumerable.Where`，然后由处理，`Enumerable.SelectMany`然后是从数据库中检索的下一个元素）或者是一次从数据库中检索到的整个元素集（当`foreach`尝试从序列中读取第一个元素时） ，然后这些元素才开始流经 Linq-to-Objects 运算符的处理管道？

```
 var search = context.Contacts.AsEnumerable().
            Where(s => s.ContactID > 10).SelectMany(s => s.Address); 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:48:03.450

首先`context.Contacts`由 EF 查询提供程序处理，它将表达式 (from `IQueryable`) 转换为 SQL。

然后，通过`AsEnumerable`，与 EF 查询提供程序的链接被破坏，之后的任何内容都是 linq 到对象，处理来自前面语句的结果集。

但是，由于`Contact.Address`是延迟加载的集合，因此对于`Contact`通过管道的每个集合，都会发出一个新查询来填充它。这是可能的，因为 EF 使用通过 EF 查询提供程序运行查询的 getter`Contact`覆盖的代理类型。`Address`

您可能知道，当您擦除`AsEnumerable`整个语句时`Expression`，EF 会将其转换为一个 SQL 语句。

# c# - 我可以排除实体框架中对象的更新吗？

> ID：13129512
> 
> 赞同：1
> 
> 时间：2012-10-29T20:54:51.150
> 
> 标签：c#, entity-framework

我的实体模型中有一个对象（它是数据库中的一个视图，通过链接服务器获取数据）。无论如何，当我调用 contex.savechanges() 时，它会更新对象模型中更改的所有内容。我不想更新那个特定的对象。有没有办法将该对象排除在更新之外？我还没有找到任何可行的属性或方法。

感谢您的任何建议。布赖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:12:04.000

Set the object's state to `Unchanged`:

```
_context.Entry(myObject).State = EntityState.Unchanged; 
```

MSDN docs for:

[DbContext.Entry](http://msdn.microsoft.com/en-us/library/gg696578.aspx) method

[EntityState](http://msdn.microsoft.com/en-us/library/system.data.objects.dataclasses.entityobject.entitystate.aspx) property

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:47:10.507

我最终创建了一个要使用的类。我没有更改实体对象中的内容，而是填充了要在方法中使用的对象。像冠军一样工作。

# ruby-on-rails - 克隆续集模型

> ID：13129513
> 
> 赞同：4
> 
> 时间：2012-10-29T20:54:55.187
> 
> 标签：ruby-on-rails, ruby, clone, sequel

我有一个模型，代表一个包含很多条目的定价表，我想提供使用现有条目中的值创建新定价的可能性。

有谁知道如何做到这一点，然后续集正在使用中？

我尝试了 dup 和 clone 但在这两种情况下，现有模型中的 id 仍然存在，因此将更新现有条目。

如果我尝试手动设置 id，我会收到以下错误：

```
Sequel::InvalidValue: nil/NULL is not allowed for the id column 
```

所以我需要找到一种方法来创建一个新的但具有预填充值的模型，而无需手动在代码中设置它们。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T21:29:50.413

找到了：

```
new_pricing = Pricing.new(oldprice.attributes.tap{|attr| attr.delete("id")}) 
```

我从旧模型中获取属性作为哈希，然后删除 id 并通过传递除 id 之外的属性来创建新模型。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-02-16T15:50:55.660

该`model.attributes`解决方案对我不起作用。续集模型`to_hash`大致等效，但`to_hash`不返回反序列化值。如果您正在使用序列化程序（用于`jsonb`字段等），只需将 a 传递`to_hash`给`new`将失败，因为这些值尚未反序列化。

这是对我有用的解决方案：

```
user = User.find(id: 123)

# freeze to avoid accidentally modifying the original user
user.freeze

# duplicate the record, deserialize values, and delete the primary key
# deserialization is useful if your model is using jsonb fields
record_copy = user.to_hash.merge(user.deserialized_values)
record_copy.delete(:id)

duplicate_user = User.new

# pass the has via `set_all` to avoid initialization callbacks
duplicate_user.set_all(record_copy)

# ... other important callbacks

duplicate_user.save 
```

# java - 自定义 ArrayAdapter 中的 setImageResource 导致 java.lang.NullPointerException

> ID：13129516
> 
> 赞同：1
> 
> 时间：2012-10-29T20:55:02.057
> 
> 标签：java, android

所有代码工作正常：

```
public View getView(int position, View convertView, ViewGroup parent) {

    LayoutInflater inflater = (LayoutInflater) this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View row = inflater.inflate(R.layout.activity_contacts_detail_row_layout, parent, false);
    ImageView smsLogo = (ImageView) row.findViewById(R.id.sms_logo);
    smsLogo.setClickable(true);
    smsLogo.setTag(position);
    if (contactsRow.isSMSApproved == true) smsLogo.setImageResource(R.drawable.messages_green);
    else smsLogo.setImageResource(R.drawable.messages_red); 
```

直到那一行：

```
smsLogo.setImageResource(....) 
```

日志猫：

> 10-29 22:46:34.006: E/AndroidRuntime(935): java.lang.NullPointerException 10-29 22:46:34.006: E/AndroidRuntime(935): at com.callsfreecalls.android.ContactsDetailArrayAdapter.getView(ContactsDetailArrayAdapter. java:107) 10-29 22:46:34.006: E/AndroidRuntime(935): 在 android.widget.AbsListView.obtainView(AbsListView.java:1409) 10-29 22:46:34.006: E/AndroidRuntime(935) : 在 android.widget.ListView.measureHeightOfChildren(ListView.java:1216) 10-29 22:46:34.006: E/AndroidRuntime(935): 在 android.widget.ListView.onMeasure(ListView.java:1127) 10-29 22:46:34.006: E/AndroidRuntime(935): 在 android.view.View.measure(View.java:8313) 10-29 22:46:34.006: E/AndroidRuntime(935): 在 android.widget.RelativeLayout .measureChild(RelativeLayout.java:566) 10-29 22:46:34.006: E/AndroidRuntime(935): 在 android.widget。RelativeLayout.onMeasure(RelativeLayout.java:381) 10-29 22:46:34.006: E/AndroidRuntime(935): 在 android.view.View.measure(View.java:8313) 10-29 22:46:34.006: E/AndroidRuntime(935): 在 android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138) 10-29 22:46:34.006: E/AndroidRuntime(935): 在 android.widget.FrameLayout.onMeasure(FrameLayout.java :250) 10-29 22:46:34.006: E/AndroidRuntime(935): 在 android.view.View.measure(View.java:8313) 10-29 22:46:34.006: E/AndroidRuntime(935):在 android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138) 10-29 22:46:34.006: E/AndroidRuntime(935): 在 android.widget.FrameLayout.onMeasure(FrameLayout.java:250) 10-29 22 ：46：34.006：E / AndroidRuntime（935）：在android.view.View.measure（View.java：8313）10-29 22：46：34.006：E / AndroidRuntime（935）：在android。view.ViewRoot.performTraversals(ViewRoot.java:839) 10-29 22:46:34.006: E/AndroidRuntime(935): 在 android.view.ViewRoot.handleMessage(ViewRoot.java:1859) 10-29 22:46: 34.006: E/AndroidRuntime(935): 在 android.os.Handler.dispatchMessage(Handler.java:99) 10-29 22:46:34.006: E/AndroidRuntime(935): 在 android.os.Looper.loop(Looper .java:130) 10-29 22:46:34.006: E/AndroidRuntime(935): 在 android.app.ActivityThread.main(ActivityThread.java:3683) 10-29 22:46:34.006: E/AndroidRuntime(935 ): 在 java.lang.reflect.Method.invokeNative(Native Method) 10-29 22:46:34.006: E/AndroidRuntime(935): 在 java.lang.reflect.Method.invoke(Method.java:507) 10 -29 22:46:34.006: E/AndroidRuntime(935): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 10-29 22:46:34.006: E/AndroidRuntime(935 ): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)

行布局：

```
<ImageView
    android:id="@+id/sms_logo"
    android:layout_width="60dp"
    android:layout_height="60dp"
    android:layout_marginRight="6dip"
    android:src="@drawable/messages_green" />

<ImageView
    android:id="@+id/callLogo"
    android:layout_width="60dp"
    android:layout_height="60dp"
    android:layout_marginLeft="60dp"
    android:layout_marginTop="-60dp"
    android:src="@drawable/callbuttonred" />

<TextView
    android:id="@+id/contactsDetailData"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="120dp"
    android:layout_marginTop="-43dp"
    android:gravity="center"
    android:shadowColor="#FFFFFFFF"
    android:shadowDx="1"
    android:shadowDy="1"
    android:shadowRadius="1"
    android:text="+380674878717"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="#FF64396F" /> 
```

这是代码创建：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_contacts_detail);
    bar = ((ProgressBar) findViewById(R.id.progressContactDetailsUpdate));
    bar.setVisibility(View.VISIBLE);

    contactsDetailsForUsing = this;
    adapterDetails = new ContactsDetailArrayAdapter(getApplicationContext(), R.layout.activity_contacts_detail_row_layout);
    lvContactDetails = (ListView) findViewById(R.id.listContactsDetailView);
    lvContactDetails.setAdapter(adapterDetails); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:06:38.697

我怀疑问题在于布局膨胀：

```
View row = inflater.inflate(R.layout.activity_contacts_detail_row_layout, parent, false); 
```

我不确定，但`parent`可能为空。尝试使用这个：

```
View row = inflater.inflate(R.layout.activity_contacts_detail_row_layout, null); 
```

更新：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
    <!-- your three views: -->
    <ImageView  .... />
    <ImageView  .... />
    <TextView   .... />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:35:15.953

contactsRow.isSMSApproved - isSMSApproved 为空。令我惊讶的是，原语必须在 java 中初始化......

# c# - 使用自动滚动 c# windows 窗体修复了自定义绘制的用户控件中的部分

> ID：13129517
> 
> 赞同：2
> 
> 时间：2012-10-29T20:55:11.877
> 
> 标签：c#, winforms, scroll, custom-controls, autoscroll

我想创建一个类似控件的表格，其中滚动时一些顶行保持在原位。我在 OnPaint 方法的覆盖中绘制控件。

滚动时会自动发生一些部分重绘，但这会产生伪影并且看起来很奇怪。为了解决这个问题，我调用 Invalidate(); 或刷新（）；在附加到滚动事件的事件处理程序中，并在绘制应该滚动进/出视图的部分时考虑滚动位置。但是，当我这样做时，应该保持原位的部分会被滚动出去并一次又一次地发回。（所以它有点闪烁）我正在努力使这项工作顺利进行而没有闪烁。

为了简化问题，我编写了以下代码，在其中绘制了一条应该在滚动时保持原位的线。如您所见，它在滚动时开始闪烁。

我已经想到了双缓冲，就像你在代码中看到的那样。

有谁知道如何使线路保持在原位？提前致谢。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Drawing;
using System.Data;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Diagnostics;

namespace ColumnReaderUITryOut
{
    public partial class CustomPaintScrollTest : UserControl
    {
        public CustomPaintScrollTest()
        {
            InitializeComponent();
            AutoScrollMinSize = new Size(500, 600);
            SetStyle(ControlStyles.OptimizedDoubleBuffer, true);
            SetStyle(ControlStyles.AllPaintingInWmPaint, true);
            SetStyle(ControlStyles.UserPaint, true);
            ResizeRedraw = true;
        }

        protected override void OnPaint(PaintEventArgs e)
        {
            base.OnPaint(e);
            e.Graphics.DrawLine(Pens.Black, 0, 0, Width, Height);
        }

        private void CustomPaintScrollTest_Scroll(object sender, ScrollEventArgs e)
        {
            Invalidate();
        }
    }
} 
```

# ember.js - 带有 viewClass 的 connectOutlet/disconnectOutlet 不能正常工作？

> ID：13129522
> 
> 赞同：0
> 
> 时间：2012-10-29T20:55:33.287
> 
> 标签：ember.js

我通过方法 connectOutlet 将视图连接到控制器，但我传递的是散列而不是常规参数：

```
outletName: 'shaa',
viewClass: MyApp.ViewAView 
```

它被正确添加，但之后如果我通过调用更改该视图：

```
MyApp.router.get('applicationController').connectOutlet({
    outletName: 'shaa',
    viewClass: MyApp.ViewBView
}); 
```

Ember 不会用新视图替换旧视图。我有这个小提琴来说明我的观点 [http://jsfiddle.net/6p6XJ/48/](http://jsfiddle.net/6p6XJ/48/)

我想，也许通过调用手动断开它`disconnectOutlet`会起作用，但没有[http://jsfiddle.net/6p6XJ/50/](http://jsfiddle.net/6p6XJ/50/)。顺便说一句，在这个小提琴中，我检查了插座是否可以通过外部`Route`方法连接`connectOutlets`。可以以某种方式断开通过属性哈希连接的视图吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T21:27:40.380

我认为它工作正常，但在您的示例中，连接/断开连接的东西必须在运行循环中执行，使用 Ember.run。这里我使用 Ember.run.later 来推迟。

```
Ember.run.later(function(){
  MyApp.router.get('applicationController').connectOutlet({
    outletName: 'shaa',
    viewClass: MyApp.ViewBView
  });
  Ember.run.later(function(){ 
    MyApp.router.get('applicationController').disconnectOutlet('shaa');
  },1000);

 },1000);​ 
```

见：http: [//jsfiddle.net/Sly7/6p6XJ/53/](http://jsfiddle.net/Sly7/6p6XJ/53/)

# javascript - 在纯 Javascript 中，如何获取 body 标签内的所有元素，不包括某个 div 及其子元素？

> ID：13129524
> 
> 赞同：2
> 
> 时间：2012-10-29T20:55:40.050
> 
> 标签：javascript, dom

我正在尝试查找 body 标记内的所有元素，但是有一个元素 (div) 具有某种“隐藏”类类型，我想将它及其子元素从我的元素数组中排除。

这是我的 var，其中包含正文中的所有元素：

```
allTagsInBody = document.body.getElementsByTagName('*'); 
```

这是我想从此列表中排除的 div：

```
<div class="myHiddenElement"> 
    <button>Click here</button>
    <div> <button>Click here</button> </div>
    <button>Click here</button>
</div> 
```

问题是我不知道该 div 中有多少元素以及它们的嵌套程度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:58:11.140

```
document.querySelectorAll( '*:not(.myHiddenElement)' ); 
```

`.querySelectorAll`with `css2` *:not()*选择器会做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T00:32:22.203

当你遍历每个元素时，你不仅需要检查它是否有你的隐藏类，而且它的任何父元素是否有这个类。因此，您需要递归地检查每个元素的父元素。这可能会非常昂贵，具体取决于页面上元素的数量以及它们的嵌套深度，但这是它的完成方式：

```
var arr = [];
var len;
var i;
var nodes = document.querySelectorAll('body *');

function checkNode(node) {
    if (node.classList.contains('myHiddenElement')) {
        return true;        
    } else if (node.parentNode.nodeType === 1) {
        return checkNode(node.parentNode);
    }

    return false;
};

for (i = 0, len = nodes.length; i < len; i++) {
    if (checkNode(nodes[i])) {
        continue;
    } else {
        arr.push(nodes[i]);
    }
} 
```

这是一个 JSFiddle 示例：http: [//jsfiddle.net/xzCfs/5/](http://jsfiddle.net/xzCfs/5/)

不幸的是，我认为没有办法使用 CSS 选择器来做到这一点，因为 :not() 选择器只接受简单的选择器，而不接受复合的选择器（例如， :not(.myHiddenClass *) <-- 如果可行的话会很棒）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T21:03:49.177

试试这个

```
​​var elems = document.body.childNodes;
var filtered = Array();  //holds elements that doesn't have 'myHiddenElement' class

​for(var i=0; i<elems.length; i++)
{
    if(elems[i].className != 'myHiddenElement')
      filtered.push(elems[i]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T23:19:01.747

如果一切都失败了，你总是可以递归地遍历 DOM（这是所有库所做的）：

这是一个通用的 DOM 遍历函数：

```
# Note: Even though this function accepts a callback it is synchronous:

function traverse (node, callback) {
    // The callback function must return true to continue processing
    // otherwise stop processing down this branch:
    if (callback(node)) {
        for (var i=0;i < node.childNodes.length; i++) {
            traverse(node.childNodes[i],callback);
        }
    }
} 
```

因此，要建立您的收藏：

```
var elements = [];
traverse(document,function(node){
    // We only care about element nodes, ignore comments, attributes etc:
    if (node.nodeType == 1 && node.className != "myHiddenElement") {
        elements.push(node);
        return true; // continue parsing this branch
    }
    return false; // ignore this branch and its children
}); 
```

# cordova - 上传 iOS 二进制文件时出错 - 图像文件 icon_ipad.png 损坏

> ID：13129528
> 
> 赞同：1
> 
> 时间：2012-10-29T20:55:53.403
> 
> 标签：cordova, appmobi

我正在尝试在 Apple App Store 中更新 iPad/iOS 应用程序并收到一封电子邮件，其中包括：

“损坏的图像文件 - 图像文件 icon_ipad.png 似乎已损坏。您的图标不能是隔行扫描的 PNG 文件。”

该应用程序是使用使用 PhoneGap 的 AppMobi 构建的，我不知道 icon_ipad.png 是什么，因为 AFAIC 我们不包含这样的文件。我用谷歌搜索无济于事。

内维尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:59:38.617

icon_ipad.png 是您在步骤 2 中上传到构建系统的图像。听起来您的图像已损坏。你能把你的 appName 发给我，让我看看云中的图像吗？appMobi.com 的支持

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:08:25.350

我在 Photoshop 中打开了您上传到构建系统的图像（Large Launch Icon (72w x 72h : PNG)），然后尝试重新保存它。它默认为隔行扫描。简单的解决方案是重新保存您的 png，这次选择“无”，而不是“隔行扫描”。然后上传新图像并重建您的应用程序。

# javascript - 简单但长的页面在 IE 中非常慢，而在其他地方很快（长 DOM 会导致问题？）

> ID：13129530
> 
> 赞同：0
> 
> 时间：2012-10-29T20:55:59.180
> 
> 标签：javascript, html, internet-explorer, browser

我的应用程序提供的页面之一很长（大约 8Mb 的源 HTML，主要是表格）。我知道这本身就是错误架构的标志，但有些情况不允许快速改变:(

在除了 IE 之外的几乎所有浏览器中，页面仍然很好 - 当然它比普通浏览器慢，但看起来显示所需的时间主要由代码下载速度决定，我对此没有任何问题。

但在 IE（7、8 和 9）中却有很大不同 - 下载后页面非常慢约 10-15 秒，并出现冻结屏幕效果，然后出现明显的滚动滞后和“脚本运行缓慢”消息，而没有在页面上运行的 javascript。IE9 在显示该页面时也需要大约 800Mb 的 RAM。

当我提供这种大小的纯文本内容时，它会好得多，但格式化的 HTML 表格似乎会引起问题。看起来长 DOM 是任何版本的 IE 的阻止程序。

我不知道我希望得到什么答案 - 显然，一个合适的解决方案是通过在服务器端分解页面架构并通过 ajax 逐个提供服务来改变页面架构，但是 - 是否有任何说魔术 pragma 或js 让 IE 停止做它与 DOM 树加速它所做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:20:05.513

这将是客户端取消页面下载的最佳解决方案。但是你必须被告知`"table"`标签是 IE 中最慢的渲染标签（正如我的经验所说）。因此，在第一步中，我认为您应该对 HTML 文档进行一些修改。以下是一些建议：

1.  尽可能清除内联样式表并使用 css 类。它将帮助您的 HTML 文档更小。
2.  使用其他一些表达式而不是使用 TABLE。使用 DIV 将是我的第一个建议。简化您的文档，解析器可以尽可能轻松地读取代码。所以让它们易于阅读。它会导致写得更少，它有助于文档变得更小。
3.  从 HTML 文档中删除所有空格、制表符、换行符和许多其他额外内容。
4.  使您呈现的内容对客户更有用。就像我们现在一样，我们最多只能看到两条线。所以一页上的所有数据都不是一个好主意，实际上没用。因为当用户下载文档时，服务器上的某些数据可能会更新，您的用户拥有的数据不再有效。

毕竟，永远记住每个字符在内存中存储 8 个字节（不管它是不是虚拟的），包括所有解析变量和 xml 解析器使用的内存，以及一些很难加载 HTML 字符串并从中生成 DOM 的代码. 阅读和解析文档的速度与大小一样重要。

希望它可以帮助你..干杯

# ruby-on-rails - mac无法安装rails

> ID：13129536
> 
> 赞同：0
> 
> 时间：2012-10-29T20:56:13.873
> 
> 标签：ruby-on-rails, ruby-on-rails-3, macos

我一直在尝试在我的 macbook 上安装 rails，并且遇到了很多困难！我安装了 RVM，当我运行“gem install rails”时，我收到以下消息：

```
gem install rails
Building native extensions.  This could take a while...
ERROR:  Error installing rails:
    ERROR: Failed to build gem native extension.

    /Users/stephanie/.rvm/rubies/ruby-1.9.2-p320/bin/ruby extconf.rb
creating Makefile

make
/usr/bin/gcc-4.2 -I. -I/Users/stephanie/.rvm/rubies/ruby-1.9.2-p320/include/ruby-1.9.1/x86_64-darwin11.4.0 -I/Users/stephanie/.rvm/rubies/ruby-1.9.2-p320/include/ruby-1.9.1/ruby/backward -I/Users/stephanie/.rvm/rubies/ruby-1.9.2-p320/include/ruby-1.9.1 -I. -DJSON_GENERATOR -I/Users/mpapis/.rvm/usr/include -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -fno-common -I/opt/sm/pkg/active/include -fno-common -pipe -O3 -Wall -O0 -ggdb  -o generator.o -c generator.c
/usr/bin/gcc-4.2 -dynamic -bundle -o generator.bundle generator.o -L. -L/Users/mpapis/.rvm/rubies/ruby-1.9.2-p320/lib -L/Users/mpapis/.rvm/usr/lib -L. -L/opt/sm/pkg/active/lib -L/usr/local/lib -Wl,-undefined,dynamic_lookup -Wl,-multiply_defined,suppress -Wl,-flat_namespace  -lruby.1.9.1  -lpthread -ldl -lobjc 
ld: warning: directory not found for option '-L/Users/mpapis/.rvm/rubies/ruby-1.9.2-p320/lib'
ld: warning: directory not found for option '-L/Users/mpapis/.rvm/usr/lib'
ld: warning: directory not found for option '-L/opt/sm/pkg/active/lib'
ld: library not found for -lruby.1.9.1
collect2: ld returned 1 exit status
make: *** [generator.bundle] Error 1 
```

我试过谷歌搜索解决方案，但没有找到任何东西。有人有想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T22:19:42.127

你得到的错误有一个有趣的行：

```
ld: library not found for -lruby.1.9.1 
```

这让我觉得你的 ruby​​ 安装有问题。

在 Mac 计算机上安装 Xcode 和 ruby​​ 似乎存在问题（请参阅[此处的问题，以及](https://stackoverflow.com/questions/9552292/failed-to-build-gem-native-extension)[此处](http://rocksolidwebdesign.com/notes-and-fixes/ruby-xcode/)的文章）。

重新安装 ruby​​ 应该会让 thinks 起作用。

# java - java中的高分辨率计时器

> ID：13129538
> 
> 赞同：5
> 
> 时间：2012-10-29T20:56:21.943
> 
> 标签：java, multithreading, networking, concurrency

我想用Java模拟TCP。

为此，我有多个线程，例如每个 TCP 连接的发送者和接收者线程。

我的问题是，我想暂停（如 Thread.sleep()）线程微秒时间间隔。这样我就可以模拟流控制，发送者线程在发送下一个数据包之前会阻塞几微秒，同时CPU可以被接收和数据处理线程使用。但我找不到任何执行 sleep() 或 wait() 以实现微秒或纳秒分辨率的方法。如何以微秒或纳秒的分辨率阻止（暂停）Java 中的线程？

我找到了 System.nanoTime() 方法，但是没有在指定的微秒或纳秒内阻塞线程的方法。如果有这样的方法，请告诉我。System.nanoTime() 仅给出以纳秒为单位的相对时间间隔。

我可以使用 System.nanoTime() 在使用忙循环的线程中执行纳秒延迟，但这会浪费 CPU，这本来可以用于接收数据线程或处理线程。

另一个令人困惑的问题：

通过上网，我发现 Thread.sleep() 或 wait() 方法在 Windows 系统中阻塞至少指定的毫秒或 10 毫秒的倍数，以较小者为准，没有线程中断。但是当我运行示例示例时，我发现了非常不同的结果。就像线程的睡眠时间少于指定的毫秒数。有些线程给了我 100 微秒的睡眠时间。测量的时间是否有误？System.nanoTime() 不是那么准确吗？请参见下面的示例，其中我得到了非常不同的结果。线程优先级也没有给出预测的结果。

```
public class MyClass {
    public static void main(String args []){
        Runnable r = new Runnable() {
            public void run() {
                long s = System.nanoTime();
                //Thread.yield();  // Try for yield, need to check - in how much time high priority thread will be scheduled back after yielding
                try{
                    Thread.sleep(1);
                }catch(Exception e){

                }
                long e = System.nanoTime() - s;
                System.out.println(Thread.currentThread().getName()+e);
            }
        };

        Thread t1 = new Thread(r, "Thread T1: ");
        t1.setPriority(Thread.MAX_PRIORITY);
        t1.start();

        Thread t2 = new Thread(r, "Thread T2: ");
        t2.setPriority(Thread.MIN_PRIORITY);
        t2.start();

        Thread t3 = new Thread(r, "Thread T3: ");
        t3.setPriority(Thread.NORM_PRIORITY);
        t3.start();

        Thread t4 = new Thread(r, "Thread T4: ");
        t4.setPriority(Thread.MAX_PRIORITY);
        t4.start();

        long s = System.nanoTime();
        try{
            Thread.sleep(1);
        }catch(Exception e){

        }
        long e = System.nanoTime() - s;
        System.out.println("Main: "+e);
    }
} 
```

在我的带有 Intel Core i5、2.53 GHz 的系统中，我在多次运行中得到类似下面的输出。*这篇文章中没有打印下面输出中的换行符，我已经从控制台复制了输出，但是它在我的控制台中给了我换行符，这没问题。

线程 T1：736682 线程 T3：700212 线程 T2：478559 主线程：548257 线程 T4：458299

第二轮——

线程 T3：27555 线程 T2：139799 线程 T1：152361 主线程：93199 线程 T4：29986

第三轮——

线程 T4：724525 线程 T2：1050319 主线程：752486 线程 T1：941316 线程 T3：1000883

第四轮——

线程 T1：174243 线程 T2：166543 线程 T3：1005745 主线程：1023170 线程 T4：915787

在上面的运行中，我得到了微秒阻塞。:O

请指导我。

为长文道歉。感谢您阅读整篇文章。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T20:58:53.007

请注意，[`Thread.sleep(timeout)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#sleep%28long%29)保证将*至少*`Thread`休眠超时 ms（取决于底层系统的精度），但它可能会休眠更长时间。

 *有[`Thread.sleep(millis, nanos)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#sleep%28long,%20int%29)，但精度也不是很好。正如@TimBender 在下面指出的那样，在 OpenJDK 6-b14 中，它甚至通过舍入和调用来实现这一点`Thread.sleep(millis)`。因此，可以相当肯定地说，在任何 Java 实现中，您都不能依赖它在确切的时间间隔内休眠。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T21:01:28.017

您受操作系统线程调度程序的支配，对此您无能为力。仅仅因为你睡了很短的时间并不意味着调度程序会在它完成睡眠后立即唤醒你的线程。而线程优先级只是一个提示，没有任何保证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T21:02:42.210

试试这个：

```
Thread.sleep(0, 250); // sleep 250 nanoseconds 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T21:10:57.310

我相信您要使用的是[Condition.awaitNanos](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Condition.html#awaitNanos%28long%29)，但是我找不到任何确凿的证据来证明这将在接近请求的时间时以高精度返回。

或者，您可以传递一个略小于所需总时间的“awaitNanos”时间，然后在循环中“实时等待”，直到总时间过去。*

# mysql - 在 Rails 中计算日期列

> ID：13129548
> 
> 赞同：1
> 
> 时间：2012-10-29T20:56:49.690
> 
> 标签：mysql, ruby-on-rails, ruby

我被困在如何计算日期上。我有 3 个不同的列：demodate1、demodate2、demodate3

如果 demodate1 存在我想将其计为 1，如果 demodate 2 存在，我想将其计为 1，如果 demodate3 存在我想将其计为 1。如果存在超过 1 个，我想将它们加在一起。

我怎样才能做到这一点？

这是我对代码的尝试：

```
 def demosheld
        if demodate1.present? or demodate2.present? or demodate3.present?
          demodate1.count + demodate2.count + demodate3.count
        end   
      end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T21:04:45.470

```
def demosheld
  count = 0
  count = count + (demodate1.present? ? 1 : 0)
  count = count + (demodate2.present? ? 1 : 0)
  count = count + (demodate3.present? ? 1 : 0)
end 
```

**编辑：**

其他选项是

```
[demodate1, demodate2, demodate3].inject{|sum,date| sum + date.present? ? 1 : 0 } 
```

* * *

```
sum = 0
[demodate1, demodate2, demodate3].each { |date| sum += date.present? ? 1 : 0 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T21:08:43.910

注入魔法怎么样？

```
def demosheld
  [demodate1, demodate2, demodate3].inject(0) do |sum, date|
    sum + (date.present? ? 1 : 0)
  end
end 
```

# asp.net-mvc - ASP.Net MVC 4 的多种布局

> ID：13129552
> 
> 赞同：0
> 
> 时间：2012-10-29T20:56:57.530
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-areas, razor-2

我的主视图文件夹中有一个 _ViewStart.cshtml，代码如下。

```
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
} 
```

在我的管理区域的 View 文件夹中，我有一个带有此代码的 _ViewStart.cshtml

```
@{
    Layout = Request.IsAjaxRequest() ? null : "~/Areas/Admin/Views/Shared/_Layout.cshtml";
} 
```

我在两行代码上都放了一个断点，当我进入管理区域时，我可以看到它点击了该文件夹中的 viewstart，而不是主文件夹中的那个。即使它命中了该代码，它仍然只使用主布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:46:53.013

起初我没有看到它，但我正在测试的特定视图指定了错误的布局，所以无论我在其他任何地方放什么它都会覆盖它。

# php - HTML 表单提交默认文本而不是使字段为空

> ID：13129553
> 
> 赞同：1
> 
> 时间：2012-10-29T20:56:57.293
> 
> 标签：php, html

如果有人将其留空，我想让我的网络提交不向我发送字段中的默认 txt。我不是一个超级程序员，我花了好几个小时试图让它今天工作，并且需要处理其他代码部分。

```
<form action="{SUBMIT_FORM}" method="post">

<input type="text" class="input-field"  onblur="if (this.value == '') {this.value = '*First Name : (Required Field)';}" onfocus="if (this.value == '*First Name : (Required Field)') {this.value = '';}" name="{lead_first_name}" id="{lead_first_name}" value="*First Name : (Required Field)"/>

<input type="text" class="input-field"  onblur="if (this.value == '') {this.value = 'Last Name :';}" onfocus="if (this.value == 'Last Name :') {this.value = '';}" name="{lead_last_name}" id="{lead_last_name}" value="Last Name :"/>

<input type="text" class="input-field"  onblur="if (this.value == '') {this.value = '*Email : (Required Field)';}" onfocus="if (this.value == '*Email : (Required Field)') {this.value = '';}" name="{lead_email}" id="{lead_email}" value="*Email : (Required Field)"/>

<input type="text" class="input-field" onblur="if (this.value == '') {this.value = 'Phone :';}" onfocus="if (this.value == 'Phone :') {this.value = '';}" name="{lead_home_phone}" id="{lead_home_phone}" value="Phone :"/>

<input type="submit" class="sbt-btn" value="Submit"  onclick="{SUBMIT_SCRIPT}" />

{VALIDATE_SCRIPT}
 </form>
<small>*We promise to never share, rent or sale your personal information.</small> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T21:03:32.397

尝试将默认值放在“占位符”属性而不是“值”中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T21:07:17.727

首先，尽可能避免使用内联 HTML 事件处理程序。

其次，您可能希望使用输入占位符 (HTML5) 而不是设置值：

```
<input type="text" name="{lead_first_name}" placeholder="First name" /> 
```

对于那些不支持的浏览器如 IE（9 及更早版本）`placeholder`，你可以这样[做](http://viget.com/inspire/a-better-jquery-in-field-label-plugin)。

# cassandra - 复合列的原因是什么，必须至少有一列不是主键的一部分

> ID：13129556
> 
> 赞同：1
> 
> 时间：2012-10-29T20:57:14.740
> 
> 标签：cassandra, cql

来自在线文档：CQL 3 表的主键可以有任意数量（1 个或更多）的组件列，但必须至少有一个不属于主键的列。

这是什么原因？

我试图在 CQL 中仅使用复合键中的列插入一行。当我执行 SELECT 时我看不到它

```
cqlsh:demo> CREATE TABLE DEMO ( 
user_id bigint,
    dep_id bigint,
    created timestamp,
    lastupdated timestamp,
    PRIMARY KEY (user_id, dep_id)
     );

cqlsh:demo> INSERT INTO DEMO (user_id, dep_id)
     ...   VALUES (100, 1);

cqlsh:demo> select * from demo;

 cqlsh:demo> 
```

但是当我使用 cli 时，它会显示一些内容：

```
default@demo] list demo;
Using default limit of 100
Using default column limit of 100
-------------------
RowKey: 100

1 Row Returned.
Elapsed time: 27 msec(s). 
```

但看不到列的值。

添加不在主键中的列后，该值显示在 CQL 中

```
 cqlsh:demo> INSERT INTO DEMO (user_id, dep_id, created)
         ...   VALUES (100, 1, '7943-07-23');
  cqlsh:demo> select * from demo;
  user_id | dep_id | created                  | lastupdated
  ---------+--------+--------------------------+-------------
   100 |      1 | 7943-07-23 00:00:00+0000 |        null 
```

CLI 的结果：

```
 [default@demo] list demo;
 Using default limit of 100
 Using default column limit of 100
  -------------------
 RowKey: 100
 invalid UTF8 bytes 0000ab7240ab7580
 [default@demo] 
```

任何想法？
更新：我找到了 CLI 返回无效 UTF8 字节 0000ab7240ab7580 的原因，它与从 CQL3 创建的表不兼容，如果我使用紧凑存储选项，则 CLI 的值正确显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T21:49:39.477

幕后真正发生的是，非键值是使用构成行键和列名的主键值保存的。如果您不插入任何非键值，那么您实际上并没有创建任何新的列族列。行键来自第一个主键，这就是 Cassandra 能够为您创建新行的原因，即使没有使用它创建列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:34:19.413

这个限制在 Cassandra 1.2 中得到修复，现在是 beta 版本。

# javascript - 如何将 1 个函数中给出的参数与 Javascript 中另一个函数的参数进行比较

> ID：13129559
> 
> 赞同：0
> 
> 时间：2012-10-29T20:57:32.407
> 
> 标签：javascript

这就是我要解决的问题

```
 var name;
    var totalScore;
    var gamesPlayed;
    var player;
    var score;

    //First, the object creator
    function makeGamePlayer(name,totalScore,gamesPlayed) {
        //should return an object with three keys:
        // name
        // totalScore
        // gamesPlayed
        o = {
            'name' : name,
            'totalScore' : totalScore,
            'gamesPlayed' : gamesPlayed
        };
        return o;
    }

    //Now the object modifier
    function addGameToPlayer(player,score) {
        //should increment gamesPlayed by one
        //and add score to totalScore
        //of the gamePlayer object passed in as player
        if(player == name) {
            gamesPlayed += 1;
            totalScore += score;    
        }

    } 
```

但是如果现在我使用的第二个函数应该是别的东西......我该如何比较这两个？（它来自学习 JS 的练习）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:10:02.040

I have attached a jsFiddle example of how this probably should work based on your sample.

```
//First, the object creator
function makeGamePlayer(name, totalScore, gamesPlayed) {
//should return an object with three keys:
// name
// totalScore
// gamesPlayed
o = {
    'name' : name,
    'totalScore' : totalScore,
    'gamesPlayed' : gamesPlayed
};
return o;
}

//Now the object modifier
function addGameToPlayer(player,score) {
    //should increment gamesPlayed by one
    //and add score to totalScore
//of the gamePlayer object passed in as player
player.gamesPlayed += 1;
player.totalScore += score;
}

var player = makeGamePlayer("Player 1", 0, 0);
addGameToPlayer(player, 10);

alert(player.name + " Played " + player.gamesPlayed + " Total Score Of: " + player.totalScore) 
```

[http://jsfiddle.net/brBx9/](http://jsfiddle.net/brBx9/)

I also think you have some out of scope variables (var name; var totalScore; var gamesPlayed; var score;) Keep in mind that you are wanting to manipulate the variables on the object in this case, not a set of global variables. The variables indicated in parenthesis will make maintaining your scope difficult as they are all named the same as the variables on your object and in your method calls.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T21:02:55.163

带点的对象的引用属性：

```
function addGameToPlayer(player,score) {

    // this will compare player's name to global var name
    if(player.name === name) {
         player.gamesPlayed += 1;
         player.totalScore += score;    
    }
} 
```

# java - Eclipse Java 堆空间

> ID：13129564
> 
> 赞同：1
> 
> 时间：2012-10-29T20:57:44.127
> 
> 标签：java, android, eclipse

我正在尝试将 qoppa pdf 阅读器集成到我的 android 应用程序中

我确实喜欢这里的描述： [http](http://www.qoppa.com/android/pdfsdk/guide/index.html) ://www.qoppa.com/android/pdfsdk/guide/index.html - 将 jar 文件添加到我的项目的类路径中。- 添加资产文件夹。- 添加库文件夹。

当我启动 Eclipse 时，一切正常，我可以在我的工作区中打开项目并继续实施。但是当将 pdf 项目作为新的 Eclipse 实例运行时，我得到了这个错误

```
 [2012-10-29 22:23:25 - com.test] Dx warning: Ignoring InnerClasses attribute for an anonymous inner class
(c.b.b.c.b.b.b.b.b.i$1) that doesn't come with an
associated EnclosingMethod attribute. This class was probably produced by a
compiler that did not target the modern .class file format. The recommended
solution is to recompile the class from source, using an up-to-date compiler
and without specifying any "-target" type options. The consequence of ignoring
this warning is that reflective operations on this class will incorrectly
indicate that it is *not* an inner class.
[2012-10-29 22:26:21 - Dex Loader] Unable to execute dex: Java heap space
[2012-10-29 22:26:23 - com.test] Conversion to Dalvik format failed: Unable to execute dex: Java heap space 
```

我尝试清理我的项目，但仍然出现错误。

我在网上搜索，所以我发现我必须在 eclipse.ini 文件和运行配置中增加 PermGen 的大小。这是我的 evlipse.ini 经过一些更改后：

```
-startup
plugins/org.eclipse.equinox.launcher_1.1.0.v20100507.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.1.R36x_v20100810
-product
org.eclipse.epp.package.jee.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
1024M
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
1024m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Xms256m
-Xmx1024m 
```

没有用，我仍然得到错误。

可能是什么问题呢？

我认为是因为 qoppapdf.jar，jar 的大小很大，超过 4000000 字节。但它应该可以工作，因为有使用这个 jar 的示例，我不知道为什么我的 eclipse 不能这样做

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-18T10:14:06.050

尝试以下操作：

```
-> Right click your project. 
-> Go to Properties 
-> Java Build Path 
-> Order and Export.
-> Uncheck the check box against your included library. 
-> Press OK and run the project. 
```

这样做时，Eclipse 将只从 jar 中获取代码中需要的类，而不是存储 jar 中的所有类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T21:05:33.893

您需要为运行配置增加分配的内存，而不是为 eclipse。在 VM 参数字段下添加 -Xms256m 和 -Xms1024m。

![在此处输入图像描述](../Images/b6b4051a99fd311e78cc3bb5278f5587.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T21:06:08.027

也将 -Xms256m 更改为 -Xms1024m，它只给它 256 兆，java 应用程序是内存密集型的，需要很多。

# .net - .NET 构建过程 - Github/Git 和依赖项目

> ID：13129565
> 
> 赞同：0
> 
> 时间：2012-10-29T20:57:45.780
> 
> 标签：.net, git, msbuild, build-process, nant

我目前正在将 Github/Git 用于两个 .NET 解决方案。第一个解决方案是我公司所有项目的通用 .NET 代码库，第二个解决方案是 ASP.NET MVC Web 应用程序。

对于克隆第一个 repo、构建它、克隆第二个 repo、将程序集从第一个解决方案添加到第二个解决方案，正确的 Nant 或 MSBuild 文件是什么样的？我计划使用 Jenkins 作为我的构建服务器。我不清楚哪些部分由构建服务器处理，哪些由构建文件处理。我不想重新发明轮子。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:57:43.593

您可以为公司库设置构建过程，将编译后的二进制文件放入共享位置。例如，共享网络驱动器或（最好）私有 NuGet 存储库（如果您使用的是 Visual Studio）。

然后在其他项目中添加对程序集/NuGet 包的引用。就个人而言，我是 NuGet 路线的忠实粉丝。

使用 NuGet 的好处是您不必在新版本一发布*就*使用它（尽管它很容易升级）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T21:20:09.070

使用子模块将两者联系起来。您将能够递归地克隆并拥有构建工作所需的一切。

# css - 使用 JavaScript 检测慢速硬件/慢速浏览器

> ID：13129568
> 
> 赞同：16
> 
> 时间：2012-10-29T20:57:48.447
> 
> 标签：css, browser, javascript

我的网站有几个 CSS 动画和过渡，在某些浏览器（谢天谢地，不是大多数）和某些较旧的硬件中，所有这些都非常非常缓慢地呈现。我试图避免 UA 嗅探；有什么方法可以使用 JavaScript 或 JS 库检测浏览器或硬件配置，然后为我知道对这些功能没有很好支持的浏览器加载非动画版本？

只是为了澄清任何歧义，我不是在寻找像 Modernizr 这样的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T21:55:28.013

这绝对不足以*检测*慢速系统，但可以最大限度地减少对此类系统用户的影响：

[使用 CSS 过渡](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_transitions)并使用 jQuery 触发它们（通过根据需要切换类），将元素动画卸载到渲染引擎，这样页面的功能响应能力至少不会受到影响。

使用*正确*的CSS 属性。例如，不要使用动画`top:10px;left:10px;`属性，而是使用更有效的[CSS 变换。](https://developer.mozilla.org/en-US/docs/CSS/transform) `transform: translateX(10px) translateY(10px)`

`transform: translate3d(0,0,0);`通过向目标元素添加或类似的解决方法来触发硬件 (GPU) 加速。

如果您完全依赖动画，或者出于某种原因需要在没有 CSS 的情况下触发后备功能（隐藏/显示/重新定位元素），[您可以尝试 Modernizr 解决方法](https://stackoverflow.com/a/6114103/1081234)：

```
if(!Modernizr.csstransitions) {
  /*fallback logic*/
} 
```

# ios - 维护 iOS 应用内购买记录

> ID：13129571
> 
> 赞同：5
> 
> 时间：2012-10-29T20:57:59.023
> 
> 标签：ios, in-app-purchase

我已经实施了 IAP，其中一次性购买可以解锁应用程序中的某些功能。由于每个用户只进行一次购买，因此我可以询问 Apple 的 IAP 服务是否该用户进行了购买。如果是这样，则解锁该功能。如果没有，则显示 IAP 提示。我可能还在用户默认值中保留了一些“userDidMakePurchase”标志，作为使用带网络连接的应用程序的不完美解决方案。

现在我想实现一个 IAP，用户可以在其中一遍又一遍地进行。每次给用户十个代币以使用应用内货币。**如何确定特定用户在启动应用程序时拥有的令牌数量？**

到目前为止，我已经考虑在用户默认值中保留令牌计数。这有一些主要缺点，例如删除和重新安装应用程序会清除用户的代币余额。令牌也不会转移到其他设备。

当然，我可以将令牌计数保存在我自己的服务器上或使用 AWS。但是，如果可能的话，我想避免这种情况。我只熟悉 IAP 基础知识，所以也许 Apple 会跟踪所有购买，我可以从那里弄清楚。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T18:57:28.143

从“一次购买，永远使用”切换到“多次购买，持续使用”使您的购买成为 Apple 术语中的*消耗品*。由于 Apple 不会为您存储消耗品购买的状态，因此跟踪资源消耗的任务完全取决于您的应用程序。

通常，您可以使用四个位置来存储剩余计数：

```
------------------------------------------------------------------
|      Storage     | Offline? | Reinstall? | Encrypted? | Large? |
------------------------------------------------------------------
| Documents Folder |    YES   |     NO     |     NO     |   YES  |
| iCloud           |     NO   |     YES    |     NO     |   YES  |
| User Defaults    |    YES   |     NO     |     NO     |   NO   |
| Keychain         |    YES   |     YES    |     YES    |   NO   |
------------------------------------------------------------------ 
```

由于您需要存储少量数据，因此您的理想候选者是[Keychain](https://developer.apple.com/library/ios/#documentation/security/Conceptual/keychainServConcepts/02concepts/concepts.html#//apple_ref/doc/uid/TP30000897-CH204-TP9)：它可以离线工作，可以重新安装，并且作为额外的奖励，它也是加密的。

`NS`尽管没有围绕钥匙串API 的内置包装器`CF`，Apple 还是为它[发布](https://developer.apple.com/library/ios/#documentation/security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html)了一个不错的包装器（滚动到页面底部以查看代码）。将安全框架添加到您的解决方案中，将包装代码复制粘贴到您的项目中（它只有两个文件）。现在您可以像使用`NSDictionary`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T21:21:39.773

我有理由确定 iCloud 键值存储在应用程序删除/重新安装过程中仍然存在。这可能是要走的路。

否则，是的，您将需要自己的服务器来存储令牌计数，以及某种方式来验证用户（设备 ID 不好，如果他们更换设备并从备份中恢复怎么办？）以及所有随之而来的麻烦 - 注册，忘记了密码画面等

# c - ANSI C - 数字矩阵的输入

> ID：13129577
> 
> 赞同：0
> 
> 时间：2012-10-29T20:58:12.630
> 
> 标签：c, input, matrix

我必须实现一个执行两个矩阵相乘的 C 程序（是的，家庭作业 :)，并且我正在尝试设计一个函数来接收来自用户的输入并对其进行验证。

我最初的想法是：让我们只要求用户输入矩阵（用空格分隔的数字，用换行符分隔的行，并且可能在换行符之后单独使用“e”来表示矩阵的结束），这样程序就会自动计算列和行的数量并将它们存储在二维数组中。但是，如果我事先不知道它们的大小，如何为它们动态分配足够的内存？如果可能，我会避免要求用户手动输入每个矩阵的行数和列数。

此外，针对错误和/或缺失数据（例如字母、垃圾、数字少于其他行等）验证输入的最佳方法是什么？我正在考虑对每一行进行strtok，使用空格作为分隔符将它们拆分，并检查每个标记是否是严格的数字。这是确定每行是否仅包含有效数值的最佳方法吗？有没有更干净和理智的方法？

这是我的伪代码：

```
function getMatrix () {
   while(true) {
   Receive a matrix as input, until the user enters 'e' in a new line by itself;
   Split the matrix in rows delimited by newlines;
   Split the rows in strings delimited by whitespaces;
   For each string {
     If the string is numeric, save it as matrix[rowNumber][colNumber];
     Else print a warning and discard the entire input;
   }
   If each row of the matrix has an equal number of elements {
      return the matrix as an array of integers;
   } else {
      print a warning and let the user re-enter the data.
  }
 }
}

main () {
    matrix1 = getMatrix;
    matrix2 = getMatrix;

    matrix1x2 = multiply the two matrices (this is the easy part :)
    print matrix1x2.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:13:35.303

This is a bit cumbersome in C. But if you don't want the user to specify the dimensions of the matrix, you will need a growing buffer to put the numbers in. You can implement this using realloc. It would go something like this (not tested):

```
int n = 0, nmax = 100;
size_t len = 0;
int nrow = 0, ncol = 0;
double * mat = malloc(nmax);
char * line = NULL, *tok;
while(getline(&line, &len, stdin) > 0)
{
    nrow++;
    ncol = 0;
    for(tok = strtok(line, " \t"); tok; tok = strtok(NULL, " \t"))
    {
        ncol++; n++;
        if(n > nmax) mat = realloc(mat, (nmax *= 2)*sizeof(double));
        mat[n-1] = atof(tok);
    }
}
mat = realloc(mat, nrol*nrow*sizeof(double));
free(line); 
```

What this is doing is to read input linewise, loop over space or tab-separated tokens, converts each to a double, and assigns it to a one-dimensional buffer, which is expanded as needed. I multiply its capacity by two each time, in order to minimize the time spent on reallocating memory (this is what the C++ vector class does too). It also keeps track of the number of rows and columns seen, but does not do any error checking so a practical version would need a bit more work.

To get the value at index (i,j) of the resulting matrix, you have to calculate a linear index: `val = mat[i*ncol+j]`.

# r - 减少条形图中 x 轴刻度（标签）的数量

> ID：13129580
> 
> 赞同：6
> 
> 时间：2012-10-29T20:58:17.333
> 
> 标签：r, bar-chart, lattice

我正在使用 lattice 包中的条形图。我有 10 年前的时间序列数据，我希望 x 轴以 %b-%Y 格式显示，间隔为六个月。这在 xyplot（给定日期向量 DateVector）中很容易实现，语法如下：

```
scales=list(x=list(format = "%b-%Y",tick.number = length(DateVector)/2)) 
```

但是，条形图在设计上忽略了因子的 tick.number 选项，因此对于大量数据标签，x 轴变得不可读。如何减少刻度和/或刻度标签的数量？

这是一个重现我的问题的简单示例，数据如下（将数据保存为 Testrr.csv 以运行，如果格式错误，请道歉，这是我的第一次；）

```
library(lattice)

inptTrans <- read.csv("Testrr.csv")
inptTrans$NotherTime <- as.Date(as.character(inptTrans$TransDateS),"%m/%d/%Y")
xyp2 <- barchart (NumE+NumF~ NotherTime, data=inptTrans, main = sprintf("Total")
                  ,type='r',xlab = '',ylab='',col=c('red','black')
                  ,horizontal=FALSE
                  ,scales=list(x=list( rot=45,cex=1.0 ,
                                 labels=format(inptTrans$NotherTime,"%b-%Y"),tick.number=2)
                     )
                  ,key=list(text = list(c("Num F","Num E"))
                     ,rectangle=list(col=c('black','red') ),columns = 2
                     ,corner = c(0.05,-0.11),lty = c(1),lwd=3)
                  ,stack=TRUE
                  )

png(sprintf('Testrr.png'),width = 900, height = 750)
print(xyp2) 
dev.off() 
```

Testrr.csv：

```
TransDateS,NumTot,NumF,NumE
01/15/2003,339486,18478,293879
02/15/2003,343761,16430,295272
03/15/2003,413700,17924,356004
04/15/2003,432741,18260,377046
05/15/2003,465439,18721,406632
06/15/2003,490699,18276,424773
07/15/2003,507818,18354,440237
08/15/2003,506530,17391,437386
09/15/2003,481039,17809,411568
10/15/2003,483364,19507,412902
11/15/2003,392189,16308,329675
12/15/2003,444249,18342,367489
01/15/2004,364662,20009,308456
02/15/2004,389718,16894,329946
03/15/2004,511386,20207,434052
04/15/2004,525563,19867,452646
05/15/2004,538570,17557,463289
06/15/2004,620868,20386,535523
07/15/2004,581368,20844,500511
08/15/2004,580773,19687,495930
09/15/2004,523992,21322,442304
10/15/2004,507288,18907,427265
11/15/2004,489571,19135,409818
12/15/2004,510904,21213,419328
01/15/2005,419417,21930,351257
02/15/2005,446402,19600,374778
03/15/2005,581109,22655,486727
04/15/2005,574275,21263,487661
05/15/2005,617399,21033,524466
06/15/2005,688876,26999,584782
07/15/2005,610606,20712,516127
08/15/2005,670746,23171,562919
09/15/2005,601594,23769,499257
10/15/2005,537107,21057,446620
11/15/2005,517340,22378,421351
12/15/2005,507610,22002,403392
01/15/2006,409802,25032,334607
02/15/2006,429196,23383,350498
03/15/2006,567056,27528,461193
04/15/2006,502403,24994,415797
05/15/2006,578793,27765,480468
06/15/2006,603134,31641,501012
07/15/2006,507408,25796,423143
08/15/2006,557500,31435,460225
09/15/2006,475884,30448,386443
10/15/2006,469092,31648,385751
11/15/2006,432720,36363,349832
12/15/2006,422369,30619,335706
01/15/2007,365297,38993,302488
02/15/2007,372276,34855,308599
03/15/2007,455525,39038,377113
04/15/2007,431043,36892,363764
05/15/2007,473539,42371,401959
06/15/2007,483341,44540,408415
07/15/2007,441046,43735,373058
08/15/2007,446111,48509,375242
09/15/2007,341554,45252,283456
10/15/2007,365869,55746,304820
11/15/2007,333946,57399,274292
12/15/2007,309551,51137,252391
01/15/2008,270806,70554,229161
02/15/2008,289606,66395,245970
03/15/2008,328369,65904,279960
04/15/2008,353531,78510,308293
05/15/2008,375080,81284,328119
06/15/2008,390034,80175,342170
07/15/2008,378648,85689,334255
08/15/2008,363756,83357,321556
09/15/2008,350942,79301,309385
10/15/2008,330164,75568,293867
11/15/2008,252408,67388,222510
12/15/2008,296037,65057,261619
01/15/2009,222048,69380,201462
02/15/2009,247591,77532,224236
03/15/2009,305516,57897,277544
04/15/2009,322308,65778,295160
05/15/2009,335134,78854,305599
06/15/2009,386702,93204,353285
07/15/2009,391393,91153,358731
08/15/2009,361150,77043,329656
09/15/2009,360568,79893,327923
10/15/2009,374886,90766,339969
11/15/2009,342502,77895,305321
12/15/2009,330770,81255,300899
01/15/2010,238132,94309,220064
02/15/2010,261558,81167,241123
03/15/2010,363432,103052,335172
04/15/2010,385535,100984,355852
05/15/2010,381303,95408,350883
06/15/2010,416893,94812,376190
07/15/2010,297810,94574,278054
08/15/2010,313494,98536,291501
09/15/2010,301782,110154,280312
10/15/2010,279117,80204,260114
11/15/2010,270178,67700,250713
12/15/2010,301323,67770,279877
01/15/2011,232283,78998,219762
02/15/2011,236917,64257,223213
03/15/2011,312669,80275,295648
04/15/2011,317720,77881,301463
05/15/2011,332220,76017,315955
06/15/2011,364962,79413,347253
07/15/2011,320199,67812,305785
08/15/2011,352555,74725,337283
09/15/2011,316858,82664,303357
10/15/2011,293425,69684,281407
11/15/2011,279320,73735,267671
12/15/2011,295369,70498,282722
01/15/2012,238417,73051,229405
02/15/2012,267105,65015,256719
03/15/2012,328104,63709,315019
04/15/2012,330508,58175,318258
05/15/2012,369418,65886,356174
06/15/2012,361304,59515,348708
07/15/2012,305613,49700,295448
08/15/2012,227541,35801,219883 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T21:12:18.577

该论点`tick.number`实际上只是关于放置刻度线的建议。在这种情况下，使用`at`参数可能会产生更一致的结果。

如果你想绘制每六个标签，首先创建一个向量来索引这个序列：

```
okLabs <- seq(1, nrow(inptTrans), by = 6)
okLabs
[1]   1   7  13  19  25  31  37  43  49  55  61  67  73  79  85  91  97 103 109 115 
```

然后您可以传递`okLabs`给`at`参数并使用它来子集您的`labels`（这里`scales`列表分配给您可以传递给`scales`参数的对象）：

```
scalesList <- list(x = list(rot = 45, cex = 1.0,
    labels = format(inptTrans$NotherTime, "%b-%Y")[okLabs], at = okLabs))

barchart (NumE+NumF~ NotherTime, data=inptTrans, main = sprintf("Total")
              ,type='r',xlab = '',ylab='',col=c('red','black')
              ,horizontal=FALSE
              ,scales= scalesList
              ,key=list(text = list(c("Num F","Num E"))
                 ,rectangle=list(col=c('black','red') ),columns = 2
                 ,corner = c(0.05,-0.11),lty = c(1),lwd=3)
              ,stack=TRUE
              ) 
```

![在此处输入图像描述](../Images/c7fc96e59985f21a349280509da89458.png)

请注意，当`NA`您尝试绘制的数据中缺少 ( ) 值时，此代码将无法正常工作。为此，您可以尝试省略缺少数据的行并`data.frame`从该子集中创建一个新行。

# ruby-on-rails - Rspec 通过用户创建测试实例变量

> ID：13129583
> 
> 赞同：1
> 
> 时间：2012-10-29T20:58:31.250
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, rspec, factory-bot

我正在测试以确保将创建的用户分配给我的实例变量`@user`。我明白 get 是什么意思，但我不确定要为测试写什么。我返回错误 URI 或 URL 的参数错误。我的测试出了什么问题，我该如何解决？

```
it "checks @user variable assignment for creation" do

    p = FactoryGirl.create(:user)
    get :users
    # I'm confused on what this line above means/does. What does the hash :users refer 
    #to
    assigns[:user].should == [p]

end 
```

`expected URI object or string error`引用和`get :users`错误如下

```
Failure/Error get :users
ArgumentError:
  bad argument: (expected URI object or URI string) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:02:50.057

我想你想要的是

```
it "checks @user variable assignment for creation" do
    p = FactoryGirl.create(:user)
    get :show, id: p.id
    assigns(:user).should == p
end 
```

您不确定的行检查`@user`用户 p 的显示视图中分配的变量 ( ) 的内容是否等于您刚刚在 [此处创建更多信息的 p 用户](http://guides.rubyonrails.org/testing.html#the-four-hashes-of-the-apocalypse)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:58:12.847

你想测试什么动作？通常，对于创建，您需要测试控制器的“创建”操作是否创建了一个用户并分配了一个 @user 变量

我会这样测试它：

```
describe 'POST create' do
  it 'creates a user' do
    params = {:user => {:name => 'xxx', :lastname => 'yyy'}}
    User.should_receive(:create).with(params)
    post :create
  end

  it 'assigns the user to an @user instance variable' do
    user = mock(:user)
    User.stub!(:create => user)
    post :create
    assigns(:user).should == user
  end
end 
```

请注意，我存根/模拟所有用户方法，因为您正在测试一个控制器，您不必真正创建用户，您只需测试控制器调用所需的方法，用户创建在用户模型规范中进行测试

另外，我做了 2 次测试（如果可能的话，你应该在每个 it 块上只测试 1 件事，首先它测试控制器是否创建了一个用户，然后我测试控制器是否分配了变量

我假设你的控制器是这样的：

```
controller...
  def create
    @user = User.create(params[:user])
  end 
```

这太简单了，我猜您有更多代码，您也应该测试该代码（验证、重定向、闪存消息等）

# android - 入门：Android开发在线数据库

> ID：13129590
> 
> 赞同：2
> 
> 时间：2012-10-29T20:58:53.817
> 
> 标签：android

我正在开发一个 android 应用程序，并希望将数据库存储在在线某处。我的应用程序是本机应用程序。我检查了 android 开发页面，它只显示了如何存储到 SQLite 数据库。

是否有任何资源可以帮助解决这个问题？是否有任何框架，如 ADO.net 实体框架，可以与做数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T21:46:23.233

我所知道的最安全和最简单的方法是使用与在线数据库交互的网络服务（PHP 和 MySQL 可以很好地协同工作，而且许多免费的网络主机也提供了它们。

然后，您可以从您的应用程序向 Web 服务执行`POST`或`GET`请求，该服务将查询数据库（更新、读取等）

[https://www.google.com/search?q=php+mysql+webservice](https://www.google.com/search?q=php+mysql+webservice)

[http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient](http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient)

帮助您入门的链接...

# android - 使用opengles拥有透明背景

> ID：13129592
> 
> 赞同：3
> 
> 时间：2012-10-29T20:59:05.490
> 
> 标签：android, opengl-es

我正在使用适用于 android 的 Opengl-es 开发视频游戏。我使用的图像的背景存在问题，因为它绘制了背景的颜色。

这是我的渲染器：

```
@Override
public void onSurfaceCreated(GL10 gl, EGLConfig config) {

    //Initialize GL:                
    gl.glDisable(GL10.GL_DITHER);
    gl.glEnable(GL10.GL_TEXTURE_2D);            //Enable Texture Mapping ( NEW )
    gl.glShadeModel(GL10.GL_SMOOTH);            //Enable Smooth Shading
    gl.glClearColor(0.0f, 0.0f, 0.0f, 0.5f);    //Black Background
    gl.glClearDepthf(1.0f);                     //Depth Buffer Setup
    gl.glEnable(GL10.GL_DEPTH_TEST);            //Enables Depth Testing
    gl.glEnable(GL10.GL_CULL_FACE);
    gl.glDepthFunc(GL10.GL_LEQUAL);             //The Type Of Depth Testing To Do
    gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST); //Really Nice Perspective Calculations //<---- SI LAG, probar GL_FASTEST

    LoadTextures(gl);
} 
```

这里绘制方法：

```
@Override
public void onDrawFrame(GL10 gl) {

    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
    gl.glEnable(GL10.GL_BLEND);
    gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
    gl.glLoadIdentity();

    for(Entity e : entities)
    {
        if(e.IsActive())
        {
            gl.glPushMatrix();
                e.Draw(gl);
            gl.glPopMatrix();
        }
    }

    gl.glDisable(GL10.GL_BLEND);        
    isDrawing = false;
} 
```

以及每个实体的draw方法：

```
gl.glColor4f(red, green, blue, alpha);

    // bind the previously generated texture
    gl.glBindTexture(GL10.GL_TEXTURE_2D, textureId);

    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

    // Point to our vertex buffer
    gl.glVertexPointer(2, GL10.GL_FLOAT, 0, screenBuffer); //2 dimensiones
    gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, textureBuffer);

    // Draw the vertices as triangle strip
    gl.glDrawArrays(GL10.GL_TRIANGLE_FAN, 0, 4); //12 /3 -> 12 es el tamano del vector de vertices del cuadrado

    //Disable the client state before leaving
    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY); 
```

我的 GLSurfaceView 中也有这个：

```
setEGLConfigChooser(8,8,8,8,16,0);
    renderer = new GRenderer(c);
    setRenderer(renderer);        
    setRenderMode(RENDERMODE_WHEN_DIRTY);
    getHolder().setFormat(PixelFormat.TRANSLUCENT);
    setZOrderOnTop(true); 
```

但它不起作用。我应该使用哪种颜色来实现半透明背景？代码中有错误吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:06:52.610

为了实现 alpha，您的代码在 OpenGL 调用方面似乎没问题。

但是，对于图像：

1) 你的图像需要有一个 Alpha 通道。RGB 不会削减它 - 你需要 RGBA。这可以很容易地在 Photoshop、Gimp 或其他图像编辑器中修复。

2）如果你想要半透明，你最好将 alpha 通道设置为某个中间值，并将你的 RGB 设置为你想要成为“半透明”混合颜色的任何颜色。或者，您可以在片段着色器中创建自定义混合功能，以对 Alpha 通道进行特殊处理。

# java - 多线程休眠中的未知实体

> ID：13129593
> 
> 赞同：0
> 
> 时间：2012-10-29T20:59:10.157
> 
> 标签：java, multithreading, hibernate

我们正在将一个大型数据库从一个 DBMS 转换为另一个。为此，我们主要使用 JDBC，但也混入了一些 Hibernate 调用。到目前为止，数据库的一小部分需要 7 个小时才能迁移。为了缓解这种情况，我们决定可以同时迁移数据库的不同部分。我们重写了迁移例程以使用线程。在解决了 Java 堆空间问题并确保我们在每个线程中都有单独的 JDBC 和 Hibernate 会话之后，我们发现自己遇到了最后一个问题：我们得到了 Unknown entity: exceptions 无处不在。我们正在创建一个 SchemaExport 并在任何迁移线程开始之前执行它。我们缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:23:51.603

Apparently, Unknown entity is an exception which happens when hibernate doesn't know about the class which is referenced in the exception. e.g., for the `Myclass` class:

```
Exception in thread "main" org.hibernate.MappingException: Unknown entity: data.Myclass 
```

You need to have a `<classname>.hbm.xml` file, which corresponds to a hibernate mapping, in order for each class that must be known by hibernate, and also have these files referenced as resources in the main configuration file of hibernate. in `hibernate.cfg.xml`, this is the line to let hibernate know about the class `Myclass`:

```
<mapping resource="Myclass.hbm.xml" /> 
```

# visual-studio-2010 - VWD 2010 Express 的 ODATA EF 在哪里？

> ID：13129598
> 
> 赞同：0
> 
> 时间：2012-10-29T20:59:23.157
> 
> 标签：visual-studio-2010, entity-framework-4, ado.net, wcf-data-services, vwdexpress

我目前正在使用 VWD 2010 Express，并且有兴趣更详细地探索 WCF REST，但我找不到“ADO.NET 实体数据模型”模板或有关如何安装它的任何信息。这也被称为 ODATA 实体框架是否正确？我想使用 SQL Express 数据库和后来的 MySQL 数据库创建 WCF REST 服务。

我搜索了在线模板站点，但也没有看到它。

顺便说一句，我现在最感兴趣的是 VB 模板。

此外，假设 ODATA EF 将与 MySQL 数据库一起使用是否准确？是否有专门用于 MySQL 的替代模板？

****更新**** 根据 Ian Michael William 的建议，我尝试安装 WcfDataServices.exe。安装失败并在日志文件中显示：

```
[0A34:08FC][2012-10-29T19:02:14]: Caching bundle from: 'C:\DOCUME~1\Bob\LOCALS~1\Temp\{e0328255-3f36-4c55-b959-379ddaeee93f}\.be\WcfDataServices.exe' to: 'C:\Documents and Settings\All Users.WINDOWS\Application Data\Package Cache\{e0328255-3f36-4c55-b959-379ddaeee93f}\WcfDataServices.exe'
[0A34:08FC][2012-10-29T19:02:15]: Registering bundle dependency provider: {e0328255-3f36-4c55-b959-379ddaeee93f}, version: 5.0.50831.0
[0A34:0BF8][2012-10-29T19:02:16]: Error 0x80092009: Failed to get authenticode certificate embedded in: C:\Documents and Settings\All Users.WINDOWS\Application Data\Package Cache\.unverified\wcf_dataservices
[0A34:0BF8][2012-10-29T19:02:16]: Error 0x80092009: Failed to verify signature of payload: wcf_dataservices
[0A34:0BF8][2012-10-29T19:02:16]: Failed to verify payload: wcf_dataservices at path: C:\Documents and Settings\All Users.WINDOWS\Application Data\Package Cache\.unverified\wcf_dataservices, error: 0x80092009\. Deleting file.
[0A34:0BF8][2012-10-29T19:02:16]: Error 0x80092009: Failed to cache payload: wcf_dataservices
[03AC:043C][2012-10-29T19:02:16]: Failed to cache payload: wcf_dataservices from working path: C:\DOCUME~1\Bob\LOCALS~1\Temp\{e0328255-3f36-4c55-b959-379ddaeee93f}\wcf_dataservices, error: 0x80092009.
[03AC:043C][2012-10-29T19:02:16]: Application requested retry of payload: wcf_dataservices, encountered error: 0x80092009\. Retrying...
[0A34:0BF8][2012-10-29T19:02:17]: Error 0x80092009: Failed to get authenticode certificate embedded in: C:\Documents and Settings\All Users.WINDOWS\Application Data\Package Cache\.unverified\wcf_dataservices
[0A34:0BF8][2012-10-29T19:02:17]: Error 0x80092009: Failed to verify signature of payload: wcf_dataservices
[0A34:0BF8][2012-10-29T19:02:17]: Failed to verify payload: wcf_dataservices at path: C:\Documents and Settings\All Users.WINDOWS\Application Data\Package Cache\.unverified\wcf_dataservices, error: 0x80092009\. Deleting file.
[0A34:0BF8][2012-10-29T19:02:17]: Error 0x80092009: Failed to cache payload: wcf_dataservices
[03AC:043C][2012-10-29T19:02:17]: Failed to cache payload: wcf_dataservices from working path: C:\DOCUME~1\Bob\LOCALS~1\Temp\{e0328255-3f36-4c55-b959-379ddaeee93f}\wcf_dataservices, error: 0x80092009.
[03AC:043C][2012-10-29T19:02:17]: Application requested retry of payload: wcf_dataservices, encountered error: 0x80092009\. Retrying...
[0A34:0BF8][2012-10-29T19:02:18]: Error 0x80092009: Failed to get authenticode certificate embedded in: C:\Documents and Settings\All Users.WINDOWS\Application Data\Package Cache\.unverified\wcf_dataservices
[0A34:0BF8][2012-10-29T19:02:18]: Error 0x80092009: Failed to verify signature of payload: wcf_dataservices
[0A34:0BF8][2012-10-29T19:02:18]: Failed to verify payload: wcf_dataservices at path: C:\Documents and Settings\All Users.WINDOWS\Application Data\Package Cache\.unverified\wcf_dataservices, error: 0x80092009\. Deleting file.
[0A34:0BF8][2012-10-29T19:02:18]: Error 0x80092009: Failed to cache payload: wcf_dataservices
[03AC:043C][2012-10-29T19:02:18]: Failed to cache payload: wcf_dataservices from working path: C:\DOCUME~1\Bob\LOCALS~1\Temp\{e0328255-3f36-4c55-b959-379ddaeee93f}\wcf_dataservices, error: 0x80092009.
[03AC:043C][2012-10-29T19:02:18]: Error 0x80092009: Failed to cache packages.
[03AC:0E64][2012-10-29T19:02:18]: Error 0x80092009: Failed while waiting for cache thread to complete before executing.
[0A34:08FC][2012-10-29T19:02:18]: Removing bundle dependency provider: {e0328255-3f36-4c55-b959-379ddaeee93f}
[0A34:08FC][2012-10-29T19:02:18]: Removing cached bundle: {e0328255-3f36-4c55-b959-379ddaeee93f}, from path: C:\Documents and Settings\All Users.WINDOWS\Application Data\Package Cache\{e0328255-3f36-4c55-b959-379ddaeee93f}\
[03AC:0E64][2012-10-29T19:02:18]: Apply complete, result: 0x80092009 restart: No 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T23:25:12.237

如果您在此处运行 WCF 数据服务 5.0 安装程序：

[http://www.microsoft.com/en-us/download/details.aspx?id=29306](http://www.microsoft.com/en-us/download/details.aspx?id=29306)

...您应该会看到 VWD 2010 Express 的 VB 和 C# 项目模板出现在“网络”项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T21:49:28.837

用于创建 OData 服务的 Microsoft 堆栈称为“WCF 数据服务”，不要与“WCF 服务”或“WCF RIA 服务”混淆。我相信 VWD 2010 Express 确实有一个用于创建新的“WCF 数据服务”的模板。

我们强烈建议开发人员依赖我们的 NuGet 包，我同样建议您使用 EF Code First 来让您的生活更轻松，而不是处理“ADO.NET 实体数据模型”。

我最近一直打算写博客。如果你能等那么久，我会试着写博客文章并在今晚之前发布。（示例将在 C# 中，但其中不会有任何复杂的内容，因此应该很容易转换为 VB.NET。）

我相信有一些供应商可以帮助 EF 与 MySQL 一起工作。我听说它们的质量参差不齐，但我自己没有尝试过。DevArt 在这个领域一直备受赞誉。

当我发布博客文章时，我会更新这个答案。

# hadoop - hdfs如何选择一个datanode来存储

> ID：13129599
> 
> 赞同：9
> 
> 时间：2012-10-29T20:59:27.090
> 
> 标签：hadoop, hdfs

如题所示，当客户端请求将文件写入hdfs时，HDFS或name node如何选择存储文件的datanode？如果文件太大，hdfs 是否会尝试将此文件的所有块存储在同一节点或同一机架中的某个节点中？hdfs 是否为应用程序提供任何 API 以根据需要将文件存储在某个数据节点中？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-30T01:02:15.797

> HDFS 或名称节点如何选择存储文件的数据节点？

HDFS 有一个[BlockPlacementPolicyDefault](http://hadoop.apache.org/docs/hdfs/current/api/org/apache/hadoop/hdfs/server/namenode/BlockPlacementPolicyDefault.html)，请查看 API 文档了解更多详细信息。应该可以为自定义行为扩展[BlockPlacementPolicy](http://hadoop.apache.org/docs/hdfs/current/api/org/apache/hadoop/hdfs/server/namenode/BlockPlacementPolicy.html)。

> hdfs 是否为应用程序提供任何 API 以根据需要将文件存储在某个数据节点中？

放置行为不应特定于特定的数据节点。这就是使 HDFS 能够适应故障并具有可扩展性的原因。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-30T04:43:31.103

选择datanode的代码在function中`ReplicationTargetChooser.chooseTarget()`。

评论说：

> 副本放置策略是，如果写入器在数据节点上，则将第一个副本放置在本地机器上，否则放置随机数据节点。第二个副本放置在不同机架上的数据节点上。第三个副本放置在与第一个副本位于同一机架上的数据节点上。

它没有为应用程序提供任何 API 来将文件存储在他们想要的数据节点中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-01T23:35:27.403

如果有人更喜欢图表，这里有一张图片（[来源](http://www.sciencedirect.com/science/article/pii/S0167739X1100135X "来源")）：
![在此处输入图像描述](../Images/a4410ab74a184c2b89b02ba461562a45.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-01T21:24:54.247

现在有了[Hadoop-385](https://issues.apache.org/jira/browse/HDFS-385)补丁，我们可以选择块放置策略，以便将文件的所有块放置在同一个节点中（对于复制节点也是如此）。阅读有关此主题的[博客](http://hadoopblog.blogspot.com/2009/09/hdfs-block-replica-placement-in-your.html)- 查看评论部分。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2017-03-10T19:44:24.470

![此图显示了复制过程是如何完成的[][1]](../Images/8746b6d01d94ee47066b012bcfb783a6.png)

可以看到，namenode 指示datanode 存储数据的时候。第一个副本存储在本地机器中，其他两个副本存储在其他机架上，依此类推。

如果任何副本失败，则从其他副本存储数据。每个副本失败的机会就像你睡觉时头上掉下来的风扇一样：p ie 发生这种情况的机会非常少。

# api - Google maps API v3 - 沿路径的高程图

> ID：13129609
> 
> 赞同：1
> 
> 时间：2012-10-29T21:00:10.507
> 
> 标签：api, google-maps-api-3, kml, elevation

我正在尝试获取 KML 文件的高度图，该 KML 文件是唯一的输入。[理想情况下，最终结果与http://gmaps-samples-v3.googlecode.com/svn/trunk/elevation/elevation-profile.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/elevation/elevation-profile.html)非常相似，您可以在其中沿着图表移动鼠标，它会沿着KML 路径。这也可以通过在[http://www.geocontext.org/publ/2010/04/profiler/en/?import=kml](http://www.geocontext.org/publ/2010/04/profiler/en/?import=kml)上传您自己的文件来实现，但是我需要在我的网站上使用它！

我只是在学习 JS 并且看到大部分代码都在那里，任何人都可以给我任何关于如何修改它的线索

1) 接受 KML 文件作为源数据 2) 仅删除路径数据的“驾驶”、“步行”等方向

我将开始弄乱代码，但任何线索将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T21:31:43.000

我的建议是使用第三方 KML 解析器（如[geoxml3](http://code.google.com/p/geoxml3/)或[geoxml-v3](http://code.google.com/p/geoxml-v3/)）将您的 KML 呈现为原生 Google Maps API v3 折线，然后在该折线上使用高程服务，如[文档中的示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/elevation-paths)

[工作示例（使用geoxml3）](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_elevation_linkto.html?filename=FlightAware_JBU670_KLAX_KJFK_20120229_kml.xml)

# imap - Redmine IMAP 连接在 Server 2003 上很慢

> ID：13129614
> 
> 赞同：0
> 
> 时间：2012-10-29T21:00:47.107
> 
> 标签：imap, exchange-server, redmine

Redmine 2.1.2 在 Windows Server 2003 上使用瘦服务

很棒的产品，经过几天的修修补补，终于可以使用了。最后一个绊脚石是“receive_imap”。我从命令行手动运行，它似乎工作（正在接收电子邮件并添加到票证），但命令永远不会结束。

ruby.exe 进程仍在任务管理器中，但无论我等待多长时间都不会结束。如果我杀死 ruby​​.exe，那么命令行会返回到“终止批处理作业 Y/n”。

命令是：

```
rake -f D:\Redmine\Rakefile --silent redmine:email:receive_imap RAILS_ENV="production" host=mail username=user@server.com.au password=password 
```

在末尾添加“--trace”没有什么有趣的，只是得到“**执行 redmine:email:receive_imap”。

奇怪的是，它确实成功地将电子邮件带入！

我让这个过程在周末运行，它似乎在某个时候结束了。我在命令行按回车键，它又回到了提示符。

如果我放手，似乎该过程将在大约 30 分钟后结束。

当我运行 rake 命令时，大约 15 秒内会检查邮箱并记录问题的更新，但之后该进程只是坐在那里无所事事。

我可以启用任何其他日志记录以查看问题所在吗？production.log 没有显示太多，邮件服务器只看到连接等。

在 Exchange 系统管理器中观察 IMAP 连接，实际的 IMAP 连接在整个过程进行期间仍处于连接状态。

更新：

我刚刚在 VM 中设置了一个 Bitnami 堆栈并运行了相同的命令，它在几秒钟内运行，并且电子邮件被立即导入......所以这不是 Exchange 问题。我正在努力看看有什么不同！

我可以通过 143 端口远程登录到邮件服务器，所以它不是防火墙。我还安装了 Ruby 的 1.8.7 版本，并在运行 rake 命令之前使用 'pik' 切换到它，但仍然是同样的问题。

我在这里真的很挣扎，因为这是阻止我们现在上线的唯一功能！

有人有想法么？提前致谢！

细节：

红宝石-v：

```
ruby 1.9.3p286 (2012-10-12) [i386-mingw32] 
```

导轨-v：

```
Rails 3.2.8

gem list:
actionmailer (3.2.8)
actionpack (3.2.8)
activemodel (3.2.8)
activerecord (3.2.8)
activeresource (3.2.8)
activesupport (3.2.8)
acts-as-taggable-on (2.3.3)
arel (3.0.2)
bigdecimal (1.1.0)
builder (3.0.4, 3.0.0)
bundler (1.2.1)
coderay (1.0.8)
daemons (1.1.9)
erubis (2.7.0)
eventmachine (1.0.0.rc.4 x86-mingw32)
hike (1.2.1)
i18n (0.6.1)
io-console (0.3)
journey (1.0.4)
jquery-rails (2.0.3)
json (1.7.5, 1.5.4)
mail (2.4.4)
mime-types (1.19)
minitest (2.5.1)
multi_json (1.3.6)
mysql2 (0.3.11 x86-mingw32)
net-ldap (0.3.1)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2)
rack-openid (1.3.1)
rack-ssl (1.3.2)
rack-test (0.6.2)
rails (3.2.8)
railties (3.2.8)
rake (0.9.2.2)
rdoc (3.12, 3.9.4)
ruby-openid (2.1.8)
sprockets (2.1.3)
thin (1.5.0)
thor (0.16.0)
tilt (1.3.3)
treetop (1.4.11)
tzinfo (0.3.34, 0.3.33)
ya2yaml (0.31) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:29:21.727

我和你有同样的问题。我的解决方案不是理想的，但有效。我在文件 apps\redmine\htdocs\lib\redmine\imap.rb 的方法检查末尾添加了上面的命令：

```
Process.exit！（真）
```

我有帮助。

# javascript - HTML5 Canvas & javascript 奖轮

> ID：13129616
> 
> 赞同：0
> 
> 时间：2012-10-29T21:00:47.813
> 
> 标签：javascript, css, html, animation, canvas

我在尝试使用画布实现“奖品轮”时遇到了麻烦。我正在使用类似于 在 StackOverflow 周围浮动的画布“轮盘赌” [http://jsfiddle.net/wYhvB/4/的东西。](http://jsfiddle.net/wYhvB/4/)我的困境是，当您单击旋转时，我在后台进行了一个 API 调用，该调用返回一个实际应该选择哪个奖品的 id，界面不过是养眼。我将所有奖品描述推送到第一个数组中，如何在每个弧中添加一个 id 并在特定的弧上停止而不是在特定的随机时间停止？IE 如果 API 返回“汽车”，我希望这个轮子旋转几次并停在汽车上。

```
 var colors = ["##eaeaea", "##cccccc", "##eaeaea", "##cccccc",
                  "##eaeaea", "##cccccc", "##eaeaea", "##cccccc"];
    // NEED to pre load this data prior
    var prize_descriptions = ["car","house","etc..."]; // These are injected on an init call from an api
    var current_user_status = {};

    var startAngle = 0;
    var arc = Math.PI / 4;
    var spinTimeout = null;

    var spinArcStart = 10;
    var spinTime = 0;
    var spinTimeTotal = 0;

    var current_user_status = null;
    var spin_results = null;

    var ctx;

    function drawSpinnerWheel() {
      var canvas = document.getElementById("canvas");
      if (canvas.getContext) {
        var outsideRadius = 200;
        var textRadius = 160;
        var insideRadius = 125;

        ctx = canvas.getContext("2d");
        ctx.clearRect(0,0,500,500);

        ctx.strokeStyle = "black";
        ctx.lineWidth = 2;

        ctx.font = 'bold 12px Helvetica, Arial';

        for(var i = 0; i < 8; i++) {
          var angle = startAngle + i * arc;
          ctx.fillStyle = colors[i];

          ctx.beginPath();
          ctx.arc(250, 250, outsideRadius, angle, angle + arc, false);
          ctx.arc(250, 250, insideRadius, angle + arc, angle, true);
          ctx.stroke();
          ctx.fill();

          ctx.save();
          ctx.shadowOffsetX = -1;
          ctx.shadowOffsetY = -1;
          ctx.shadowBlur    = 0;
          ctx.shadowColor   = "rgb(220,220,220)";
          ctx.fillStyle = "black";
          ctx.translate(250 + Math.cos(angle + arc / 2) * textRadius, 
                        250 + Math.sin(angle + arc / 2) * textRadius);
          ctx.rotate(angle + arc / 2 + Math.PI / 2);
          var text = prize_descriptions[i];
          if (text == undefined)
            text = "Not this time! "+i;
          ctx.fillText(text, -ctx.measureText(text).width / 2, 0);
          ctx.restore();
        } 

        //Arrow
        ctx.fillStyle = "black";
        ctx.beginPath();
        ctx.moveTo(250 - 4, 250 - (outsideRadius + 5));
        ctx.lineTo(250 + 4, 250 - (outsideRadius + 5));
        ctx.lineTo(250 + 4, 250 - (outsideRadius - 5));
        ctx.lineTo(250 + 9, 250 - (outsideRadius - 5));
        ctx.lineTo(250 + 0, 250 - (outsideRadius - 13));
        ctx.lineTo(250 - 9, 250 - (outsideRadius - 5));
        ctx.lineTo(250 - 4, 250 - (outsideRadius - 5));
        ctx.lineTo(250 - 4, 250 - (outsideRadius + 5));
        ctx.fill();
      }
    }

    function spin() {   
      spinAngleStart = Math.random() * 10 + 10;
      spinTime = 0;
      spinTimeTotal = Math.random() * 3 + 4 * 1000;
      rotateWheel();
    }

    function rotateWheel() {
      spinTime += 30;
      if(spinTime >= spinTimeTotal) {
        stopRotateWheel();
        return;
      }
      var spinAngle = spinAngleStart - easeOut(spinTime, 0, spinAngleStart, spinTimeTotal);
      startAngle += (spinAngle * Math.PI / 180);
      drawSpinnerWheel();
      spinTimeout = setTimeout('rotateWheel()', 30);
    }

    function stopRotateWheel() {
      clearTimeout(spinTimeout);
      var degrees = startAngle * 180 / Math.PI + 90;
      var arcd = arc * 180 / Math.PI;
      var index = Math.floor((360 - degrees % 360) / arcd);
      ctx.save();
      ctx.font = 'bold 30px Helvetica, Arial';
      var text = prize_descriptions[index];
      ctx.fillText(text, 250 - ctx.measureText(text).width / 2, 250 + 10);
      ctx.restore();
    }

    function easeOut(t, b, c, d) {
      var ts = (t/=d)*t;
      var tc = ts*t;
      return b+c*(tc + -3*ts + 3*t);
    }

drawSpinnerWheel();

$("#spin").bind('click', function(e) {
  e.preventDefault();
  spin();
});​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-18T10:14:59.990

I have some experience in creating HTML5 canvas winning wheels, the way that I solved the problem of getting the wheel to stop at at a particular prize determined by a server-side process was to define an array of prizes that correspond to what is shown on the wheel, specifying the start and end angle of each prize in degrees, and then before the wheel is rotated setting a targetAngle to a random value between the start and end angle of the prize in question plus adding a multiple of 360 degrees so that the wheel spins a few times before slowing to a stop at the predetermined prize.

For example if the wheel has 4 prizes then the prizes array is...

```
var prizes = new Array();
prizes[0] = {"name" : "Prize 1", "startAngle" : 0,   "endAngle" : 89};
prizes[1] = {"name" : "Prize 2", "startAngle" : 90,  "endAngle" : 179};
prizes[2] = {"name" : "Prize 3", "startAngle" : 180, "endAngle" : 269};
prizes[3] = {"name" : "Prize 4", "startAngle" : 270, "endAngle" : 359}; 
```

And the code to set the targetAngle is something like...

```
targetAngle = Math.floor(prizes[determinedPrize]['startAngle'] + (Math.random() * (prizes[determinedPrize]['endAngle'] - prizes[determinedPrize]['startAngle'])));
targetAngle += (360 * 18); 
```

The spinning function of the wheel then loops until the current angle of the wheel equals the targetAngle.

A working example of my prize wheel and the fully commented source code is available at [http://www.dougtesting.net](http://www.dougtesting.net). The pre-determined feature is not enabled in the online example, but can easily be turned on in the source code (winwheel.js) once downloaded.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T23:47:32.453

我能想到的最简单的方法是取轮子的当前位置，然后计算从这个点到奖品的距离。~~添加轮径~~周长的随机倍数，然后你就有一个距离。轮子的边缘必须经过这个距离才能获得奖品。

就像您可以使用线性或三次插值以指定的步数将元素从 1 个位置移动到另一个位置一样，您可以使用相同的方法将轮子从点 0（起点）旋转到点 1（终点）时间=0 到时间=1

本页[数学：缓入，缓出使用带有时间约束的 Hermite 曲线的位移](https://stackoverflow.com/questions/3367308/math-ease-in-ease-out-a-displacement-using-hermite-curve-with-time-constraint)是一本不错的读物。这是我设法绕着头做基本相同的事情的地方——只是上/下/左/右，而不是旋转。

我刚才看 iot 时有点波涛汹涌。不知道是 jsfiddle、丢失的图像还是我正在运行的 25 个浏览器选项卡和程序。无论如何，关键是使用非线性插值以指定的步数到达指定的距离。它应该在指定的时间到达那里，但不是在打开 25 个窗口的情况下.. :laughs:

查看上面的 SO 链接。它有一些很棒的图片，可以很好地解释。

这是当时的三次样条插值。 [http://jsfiddle.net/enhzflep/XKzGF/](http://jsfiddle.net/enhzflep/XKzGF/)

这是完整的代码：

```
<!DOCTYPE html>
<html>
<head>
<script>
var continuePlaying = true, isPlaying=false;

function byId(a){return document.getElementById(a)}
function myInit()
{
}
window.addEventListener("load",myInit,!1);

function cubicHermite(a,b,d,e,c){var g=a*a,f=g*a;return(2*f-3*g+1)*b+(f-2*g+a)*e+(-2*f+3*g)*d+(f-g)*c}
function interp(a,b,d,e,c){var g,f;f=e/(a/2+b+d/2);g=f*a/2;f*=b;return result=c<=a?cubicHermite(c/a,0,g,0,f/b*a):c<=a+b?g+f*(c-a)/b:cubicHermite((c-a-b)/d,g+f,e,f/b*d,0)}
function linear(a){return a}
function cubic(a){return interp(0.35,0.3,0.35,1,a)}
function getSize(a){return{left:a.offsetLeft,top:a.offsetTop,width:a.clientWidth,height:a.clientHeight}}
function doAnim2(a,b,d,e){var c=a/b;setTimeout(function(){doAnimStep(0,b,c,d,e)},c)}
function doAnimStep(a,b,d,e,c){a<=b?(setTimeout(function(){doAnimStep(a,b,d,e,c)},d),e(a/b),a++):void 0!=c&&null!=c&&c()}

//scroll with cubic interpolation of the current scroll position
function cubicScrollDown(b,callback)
{
    var a=byId(b),c=a.scrollHeight-a.clientHeight;
    doAnim2(500,c,function(b){a.scrollTop=c*cubic(b)},callback);
}
function cubicScrollUp(b,callback)
{
    var a=byId(b),c=a.scrollHeight-a.clientHeight;
    doAnim2(500,c,function(b){ a.scrollTop=c*(1-cubic(b)) },callback );
}

//scroll with cubic interpolation of the current scroll position
function linearScrollDown(b, callback)
{
    var a=byId(b),c=a.scrollHeight-a.clientHeight;
    doAnim2(500,c,function(b){a.scrollTop=c*linear(b)}, callback);
}
function linearScrollUp(b, callback)
{
    var a=byId(b),c=a.scrollHeight-a.clientHeight;
    doAnim2(1000,c,function(b){ a.scrollTop=c*(1-linear(b)) }, callback );
}

function animFadeOut(elem, callback)
{
    doAnim2(500,50,function(raw){elem.style.opacity=1-cubic(raw)},callback);
}

function animFadeIn(elem, callback)
{
    doAnim2(500,50,function(raw){elem.style.opacity=cubic(raw)},callback);
}

function cubicBounce(b)
{
    cubicScrollDown(b, downCallback);

    function downCallback()
    {
        cubicScrollUp(b, upCallback);
    }

    function upCallback()
    {
        if (continuePlaying===true)
            setTimeout( function(){cubicBounce(b);}, 0);
        else
            continuePlaying = true;
    }
}

function linearBounce(b)
{
    linearScrollDown(b, downCallback);

    function downCallback()
    {
        linearScrollUp(b, upCallback);
    }

    function upCallback()
    {
        if (continuePlaying===true)
            setTimeout( function(){linearBounce(b);}, 0);
        else
            continuePlaying = true;
    }
}

function fadeOutIn(tgtListIdStr)
{
    var tgt = byId(tgtListIdStr);

    animFadeOut(tgt,fadedOutCallback);

    function fadedOutCallback()
    {
        animFadeIn(tgt);
    }
}

function prependChild(parent, element)
{
    if (parent.childNodes)
        parent.insertBefore(element, parent.childNodes[0]);
    else
        parent.appendChild(element)
}

function slideUpRemove(tgtListIdStr)
{
    var tgt = byId(tgtListIdStr);
    var listItems = tgt.getElementsByTagName('li');
    mHeight = listItems[0].clientHeight;

    animFadeOut(listItems[0], slideUp);

    function slideUp()
    {
        doAnim2(500, 50, slideUpStep, slideUpDone);

        function slideUpStep(raw)
        {
            listItems[0].style.height = (cubic(1-raw) * mHeight) + 'px';
        }

        function slideUpDone()
        {
            dummy = listItems[0];
            tgt.appendChild(dummy);
            //dummy.removeAttribute('style');
            dummy.style.height = null;
            dummy.style.opacity = null;
        }
    }
}

function slideDownInsert(tgtListIdStr)
{
    // get the container, it's items and the height of the last LI item.
    var tgt = byId(tgtListIdStr);
    var listItems = tgt.getElementsByTagName('li');
    mHeight = listItems[listItems.length-1].clientHeight;

    // create a dummy to take the place of the last item, set it's size and height. make it the first child of the containing list
    var dummy = document.createElement('li');
    dummy.style.opacity = 0;
    dummy.style.height = 0 + 'px';
    prependChild(tgt, dummy);

    // animate it!
    doAnim2(500, 50, slideDownStep,slideDownDone);

    function slideDownStep(raw)
    {
        dummy.style.height = (cubic(raw) * mHeight)+'px';
    }

    function slideDownDone()
    {
        // remove the dummy
        var newItem = listItems[listItems.length-1];
        newItem.style.opacity = 0;
        prependChild(tgt, newItem);
        tgt.removeChild(dummy);
        animFadeIn(newItem, function(){newItem.removeAttribute('style')});
    }
}
</script>
<style>
#myListDiv
{
    width: 256px;
    padding: 6px;
    height: 128px;
    overflow-y: hidden; /*scroll;*/
    border-radius: 6px;
    border: solid 1px transparent;
    border-color: rgba(0,0,0,0.2) rgba(255,255,255,0.4) rgba(255,255,255,0.4) rgba(0,0,0,0.2);
/*  background-image: url(img/rss128.png);  */
    background-color: rgba(0,0,0,0.1);
}
h4, p
{
    margin: 6px 0;
}

ul 
{
    padding: 0;
    list-style: none;
    margin: 0;
}

ul#mList li
{
    padding: 0 8px;
    margin: 0 6px;
    display: block;
    border: solid 1px #cccccc;
    border-bottom-color: #000;
    border-color: #ccc transparent #000 transparent;
    vertical-align: middle;
    background-color: rgba(150,150,150,0.95);
    overflow: hidden;
}
.thumb
{
    width: 48px;
    height: 48px;
    float: left; 
}
.thumb img
{
    height: 48px;
}
#mPanel
{
    display: inline-block;
    float: left;
    padding: 32px;
    background-color: hsl(80,50%,20%);
}
</style>
</head>
<body>
    <div id='mPanel'>
        <div id='myListDiv'>
            <ul id='mList'>
                <li><div class='thumb'><img src='img/opera.svg'></div><div class='itemData'><h4><a>Item #1</a></h4><p>some assorted text</p></div></li>
                <li><div class='thumb'><img src='img/chromeEyes.svg'></div><h4><a>Item #2</a></h4><p>some assorted text</p></li>
                <li><div class='thumb'><img src='img/girl.png'></div><h4><a>Item #3</a></h4><p>some assorted text</p></li>          
                <li><div class='thumb'><img src='img/chuck-norris.jpg'></div><h4><a>Item #1</a></h4><p>some assorted text</p></li>          
                <li><div class='thumb'><img src='img/redBaron.jpg'></div><h4><a>Item #2</a></h4><p>some assorted text</p></li>
                <li><div class='thumb'><img src='img/default.png'></div><h4><a>Item #3</a></h4><p>some assorted text</p></li>
            </ul>
        </div>
    </div>

    <button onclick='cubicScrollDown("myListDiv")'>Cubic down</button>
    <button onclick='cubicScrollUp("myListDiv")'>Cubic up</button><br>
    <button onclick='cubicBounce("myListDiv")'>cubic bounce</button>
    <button onclick='linearBounce("myListDiv")'>linear bounce</button><br>

    <input type='button' onclick='slideUpRemove("mList")' value='newest'/>
    <input type='button' onclick='slideDownInsert("mList")' value='Slide Down'/><br>
    <button onclick='continuePlaying=false'>Stop Anim cycle</button>
    <input type='button' onclick='fadeOutIn("mList");' value='fadeOutIn'/><br>
</body>
</html> 
```

# .net - 使用 msbuild 为带有项目参考的项目自动单击一次发布

> ID：13129617
> 
> 赞同：2
> 
> 时间：2012-10-29T21:00:53.973
> 
> 标签：.net, msbuild, tfsbuild

我正在尝试为单击一次的 .net c# 应用程序自动化 tfs 构建。我根据以下帖子编辑了默认xaml：[http](http://blog.dontpaniclabs.com/post/2011/04/29/ClickOnce-Publish-and-Deploy-from-Team-Foundation-Server-2010.aspx) ://blog.dontpaniclabs.com/post/2011/04/29/ClickOnce-Publish-and-Deploy-from-Team-Foundation-Server-2010.aspx 它适用于没有引用项目的简单项目，但是对于引用库项目的单击一次项目，它不能正常工作。构建成功，但实际上我收到以下 2 个警告：

1.  无法为项目“library.dll”应用发布属性。
2.  两个或多个程序集具有相同的标识“clickonceprojectname.Client，Version=1.0.1.17，Culture=neutral，PublicKeyToken=4F6F13E2414E9925，ProcessorArchitecture=msil”。

并且 library.dll 不包含在应用程序文件夹中，因此一旦安装失败单击。在我看来，由于某种原因，msbuild 正在尝试发布依赖项目以及单击一次项目。有什么办法可以解决这个问题吗？

我已经阅读了很多帖子并且已经尝试了很多解决方案，包括确保在项目文件中复制 local = true，并在项目属性的发布选项卡中重置所有应用程序文件。有人可以帮我吗？我为此苦苦挣扎了好几天

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T19:50:49.627

经过大量研究，我们发现这个问题的原因是在 msbuild 参数中单击后发布了 assemblyName 参数。如果您删除该参数，则构建也适用于相关的 dll。因为对于每个项目，我们都有 qa、beta 和生产版本，并且我们需要能够在同一台计算机上并排运行它们，所以对于不同的构建，我们必须有不同的程序集名称。如果您没有在 msbuild 参数中提供程序集名称，它将从项目文件中获取它。我为此做的解决方法是创建一个自定义活动，根据发布类型使用 assemblyName 更新项目文件。如果有人愿意，我可以分享自定义活动的代码。所以我在发布之前更改了项目文件中的程序集名称，效果很好！！！

# python - Pandas 系列的直方图值

> ID：13129618
> 
> 赞同：77
> 
> 时间：2012-10-29T21:01:02.027
> 
> 标签：python, pandas, numpy, matplotlib

我在 Python Pandas 系列中有一些值（类型`pandas.core.series.Series`：）

```
In [1]: series = pd.Series([0.0,950.0,-70.0,812.0,0.0,-90.0,0.0,0.0,-90.0,0.0,-64.0,208.0,0.0,-90.0,0.0,-80.0,0.0,0.0,-80.0,-48.0,840.0,-100.0,190.0,130.0,-100.0,-100.0,0.0,-50.0,0.0,-100.0,-100.0,0.0,-90.0,0.0,-90.0,-90.0,63.0,-90.0,0.0,0.0,-90.0,-80.0,0.0,])

In [2]: series.min()
Out[2]: -100.0

In [3]: series.max()
Out[3]: 950.0 
```

我想获取直方图的值（不需要绘制直方图）...我只需要获取每个间隔的频率。

假设我的间隔从 [-200; -150] 至 [950；1000]

所以下界是

```
lwb = range(-200,1000,50) 
```

和上限是

```
upb = range(-150,1050,50) 
```

我现在不知道如何获取频率（每个间隔内的值的数量）......我确信定义 lwb 和 upb 是没有必要的......但我不知道我应该使用什么函数执行此操作！（在 Pandas doc 中潜水后，我认为`cut`函数可以帮助我，因为它是一个离散化问题......但我不明白如何使用它）

在能够做到这一点之后，我将看看显示直方图的方式（但这是另一个问题）

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-10-29T22:07:25.197

您只需要使用的[直方图](https://docs.scipy.org/doc/numpy/reference/generated/numpy.histogram.html)函数`NumPy`：

```
import numpy as np
count, division = np.histogram(series) 
```

其中除法是自动计算的垃圾箱边界，计数是每个垃圾箱内的人口。

如果需要固定一定数量的 bins，可以使用参数 bins 并指定 bins 的数量，或者直接给它每个 bin 之间的边界。

```
count, division = np.histogram(series, bins = [-201,-149,949,1001]) 
```

要绘制结果，您可以使用 matplotlib 函数 hist，但如果您在 pandas 中工作，每个系列都有自己的 hist 函数句柄，您可以给它选择的分箱：

```
series.hist(bins=division) 
```

* * *

**编辑**：正如另一张海报所提到的，`Pandas`它是建立在`NumPy`. 由于 OP 明确使用`Pandas`，我们可以通过访问来取消额外的`NumPy`导入`Pandas`：

```
count, division = pd.np.histogram(series) 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-12-18T16:35:04.333

为了获得给定区间分箱范围内的值的频率计数，我们可以利用[`pd.cut`](http://pandas.pydata.org/pandas-docs/version/0.19.0/generated/pandas.cut.html)which 返回每个元素的半开箱的索引以及[`value_counts`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.value_counts.html)计算它们各自的计数。

为了绘制它们的计数，可以制作条形图。

```
step = 50
bin_range = np.arange(-200, 1000+step, step)
out, bins  = pd.cut(s, bins=bin_range, include_lowest=True, right=False, retbins=True)
out.value_counts().plot.bar() 
```

[![在此处输入图像描述](../Images/61d5dc39729cb8f161da1370b382bf02.png)](https://i.stack.imgur.com/sZBWd.png)

每个间隔的频率按其计数的降序排序：

```
out.value_counts().head()
[-100, -50)    18
[0, 50)        16
[800, 850)      2
[-50, 0)        2
[950, 1000)     1
dtype: int64 
```

* * *

要修改绘图以仅包含范围的较低闭合区间以达到审美目的，您可以执行以下操作：

```
out.cat.categories = bins[:-1]
out.value_counts().plot.bar() 
```

[![在此处输入图像描述](../Images/4b8e239bf07afd6a8a9010ea2829d705.png)](https://i.stack.imgur.com/Wu0XU.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-25T04:48:23.500

如果您说要获取直方图的值，那么您只是在寻找系列中每个唯一值的频率，如果我没记错的话。在这种情况下，你可以简单地做`serie.value_counts()`，这会给你：

```
 0.0      16
-90.0      8
-100.0     5
-80.0      3
 63.0      1
-50.0      1
 130.0     1
 190.0     1
 840.0     1
-48.0      1
 208.0     1
-64.0      1
 812.0     1
-70.0      1
 950.0     1 
```

# business-logic - 使用子域识别客户的利弊

> ID：13129621
> 
> 赞同：1
> 
> 时间：2012-10-29T21:01:03.850
> 
> 标签：business-logic, subdomain

我看到像 Wufoo 这样的网站让每个新客户都可以在他们的网站上[注册自己的子域](https://secure.wufoo.com/signup/1/)（例如[https://mystuff.wufoo.com](https://mystuff.wufoo.com)）这样做有什么好处？我特别好奇这种方法的技术优缺点。

为什么不做[https://wufoo.com/mystuff](https://wufoo.com/mystuff)？仅仅是美学吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:10:37.650

An obvious drawback that I should have spotted. If you do `https://hostname.com/mystuff` that means that `mystuff` cannot be used for internal use. This is going to be causing issues with your page names like `https://hostname.com/pricing` <- `pricing` is taken and users will not be able to register this name...So it is inconvenient to both users and developers.

# django - Django 在上下文中检查错误消息

> ID：13129624
> 
> 赞同：0
> 
> 时间：2012-10-29T21:01:19.200
> 
> 标签：django, django-testing

我有一个简单的测试：

```
def test_project_info_form_post_submission(self):
    """
    Test if project info form can be submitted via post.
    """
    # set up our POST data
    post_data = {
        'zipcode': '90210',
        'module': self.module1.pk,
        'model': self.model1.pk,
        'orientation': 1,
        'tilt': 1,
        'rails_direction': 1,
    }
    ...
    response = self.client.post(reverse(url), post_data)
    self.assertEqual(response.status_code, 302)

    # test empty form
    response = self.client.post(reverse(url))
    self.assertEqual(response.status_code, 200)
    #! test for general form error message 

    # now test invalid responses
    post_data['zipcode'] = 'abcdefg'
    response = self.client.post(reverse(url), post_data)
    self.assertEqual(response.status_code, 200)
    #! test for specific error message associated with zipcode 
```

因此，我遇到问题的行标有shebangs。我知道我应该在上下文变量中包含消息，但似乎无法找出要使用的正确消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:04:29.230

您可以测试模板是否在您的 TestCase 中包含您的消息[`assertContains`](https://docs.djangoproject.com/en/dev/topics/testing/#django.test.TestCase.assertContains)。

# android - Proguard 如何在 Intellij Idea 中工作？

> ID：13129633
> 
> 赞同：5
> 
> 时间：2012-10-29T21:02:17.893
> 
> 标签：android, intellij-idea, proguard

我正在使用 IntelliJ IDea 11.1.3 进行 Android 开发，我必须承认它是一个很棒的工具。我对如何在 IDE 中使用 Proguard 没有任何疑问。

我在 Open Module Settings -> Facets 下找到了 Run Progaurd 选项，如下图所示

![在此处输入图像描述](../Images/8fd98ab6faf9ab494f65794dbbaa4c04.png)

*运行 Proguard*需要*配置文件*的位置，默认为 proguard-project.txt。接下来是一个复选框，上面写着*Include system proguard file*。

此复选框选项中引用了哪些*System Proguard文件？*

鉴于 Proguard 的所有配置都在 Android SDK 的 proguard-android.txt 中。proguard 配置如何在 IntelliJ Idea 中工作？

PS 任何帮助将不胜感激，我几乎一天都在尝试用 IntelliJ 理解 proguard，并且在[另一个问题中遇到了未解决的问题](https://stackoverflow.com/questions/13122476/org-apache-commons-collections-beanmap-cant-find-referenced-class-java-beans-i)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T15:29:28.137

在花了两天时间尝试使用 IntelliJ Idea 使用 Proguard 4.7 之后，我有以下几点可以得出结论

1.  `proguard.config=${sdk.dir}\tools\proguard\proguard-android.txt:proguard-project.txt`如果您取消注释file中的行，这没有任何区别`project.properties`。
2.  我不确定 IntelliJ 是否读取`proguard-android.txt`位于`android-sdk/tools/proguard`
3.  IntelliJ idea 读取`proguard-project.txt`位于项目中的文件文件，因此建议编辑并将所有 proguard 配置放在此文件中。
4.  我仍然不清楚`Include system proguard file`复选框选项的作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-24T18:43:02.067

根据这个谷歌文档[http://developer.android.com/tools/help/proguard.html#enabling-gradle](http://developer.android.com/tools/help/proguard.html#enabling-gradle)您需要在项目 build.gradle 文件中`minifyEnabled false`更改。`minifyEnabled true`

`...\app\proguard-rules.pro`如果需要，可以编辑以添加新规则。默认规则可能会满足您的所有需求，例如保护看起来可能由于布局 xml onClick 属性而被调用的方法的名称。上面引用的文档还包含更复杂更改的说明。

您需要保留 mapping.txt 文件，该文件位于`...\app\build\outputs\mapping\release`

# php - PDO MySQL UTF-8：从数据库读取的数据未正确显示

> ID：13129634
> 
> 赞同：4
> 
> 时间：2012-10-29T21:02:21.653
> 
> 标签：php, mysql, utf-8, pdo

`show variables`：

```
character_set_client        utf8
character_set_connection    utf8
character_set_database      utf8
character_set_filesystem    binary
character_set_results       utf8
character_set_server        latin1
character_set_system        utf8
collation_connection        utf8_general_ci
collation_database          utf8_unicode_ci
collation_server            latin1_swedish_ci 
```

插入的数据是 UTF-8 并在数据库中正确显示，html 标头设置为 utf-8，元标记设置为 utf-8。网站上的所有内容（不是来自数据库）都正确显示），而不是来自数据库的内容。

连接（PDO）：

```
$pdo = new PDO("mysql:host=$hostname;dbname=$database;charset=utf8",$username,$password,array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8")); 
```

所以，我认为它与输出有关，`show variables`因为它表明服务器的字符集和排序规则不是 utf-8？但是，我在同一本地服务器上运行其他站点没有任何问题。知道我在哪里可以找到正确的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T21:41:35.133

在您的 PDO 连接中：

```
new PDO(
    "mysql:host=$hostname;dbname=$database;charset=utf8",
                                           ############
    $username, $password, array(
        PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8"
                                         ##############
    )
); 
```

您正在使用`SET NAMES utf8`已弃用的 SQL。你*不应该*再使用它了。实际上，您已经在使用 PDO DSN 字符串中的 charset 参数，这是推荐的方式：`charset=utf8`.

只需删除`SET NAMES utf8`init 命令就可以了。

```
new PDO(
    "mysql:host=$hostname;dbname=$database;charset=utf8",
    $username, $password
); 
```

# python - 方法不工作后的tkinter（Python）

> ID：13129636
> 
> 赞同：0
> 
> 时间：2012-10-29T21:02:26.453
> 
> 标签：python, tkinter

我试图每 1 秒更改一次矩形的颜色，由于某种原因，只使用最后一种颜色。中间的那些根本不用。我在哪里做错了？这是我的代码 -

```
class app():
    def __init__(self):
        self.root = Tk()

        self.root.minsize(500, 500)
        self.root.maxsize(500, 500)
        self.counter = 4
        self.color = ["red","green","yellow","grey"]

        self.mainframe = Canvas(self.root, width=400, height=200)

        self.blue = self.mainframe.create_rectangle(20,20,120,60,fill='blue',width=0)

        self.mainframe.pack()

        Button(self.root,text="press",command=self.click).pack()

       self.root.mainloop() 

def click(self):
    self.root.after(1000,self.__timer)

def __timer(self):
    if self.counter > 0:
        for i in range(self.counter):
            self.mainframe.itemconfigure(self.blue_button,fill=self.color[i])
            self.root.after(1000,self.__timer)    
            self.counter -= 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T23:33:12.980

您的计时器功能正在尝试设置的颜色，`self.blue_button`但没有这样的对象。你打算改变颜色`self.blue`吗？

另外，你有一个逻辑问题。看看这段代码：

```
if self.counter > 0:
    for i in range(self.counter):
        self.mainframe.itemconfigure(self.blue_button,fill=self.color[i])
        self.root.after(1000,self.__timer)    
        self.counter -= 1 
```

注意你是如何`self.counter`在循环内递减的。因此，第一次被调用，一旦完成`__timer`，它将设置为零。一秒后调用`self.counter`的第二次为零，因此永远不会进入循环。`__timer``self.counter`

# c++ - 单例类 - 哪种方法

> ID：13129637
> 
> 赞同：1
> 
> 时间：2012-10-29T21:02:27.597
> 
> 标签：c++, design-patterns

我已经实现了两种我认为应该如何实现单例类的方法，我只是想要程序员的意见，哪种方法是最好的方法。

每个方法都使用这些类：

```
class Animal {
public:
    virtual void speak() const = 0;
};

class Dog {
    virtual void speak() { cout << "Woof!!"; }
}; 
```

第一种方法：

```
class AnimalFactory {
public:
    static Animal* CreateInstance(int theTypeOfAnimal);

private:
    AnimalFactory() { };
    static int count; // this will be used to count the number of objects created
    static int maxCount; // this is the max count allowed.
};

int AnimalFactory::count = 0;
int AnimalFactory::maxCount = 1;

Animal* AnimalFactory::CreateInstance(int theTypeOfAnimal)
{
    Animal* pAnimal = NULL;

    if(pAnimal != NULL)
    {
        return pAnimal;
    }

    switch(theTypeOfAnimal)
    {
        case 0:
            pAnimal = new Dog();
            count++;
            break;

        case 1:
            pAnimal = new Cat();
            count++;
            break;

        case 2:
            pAnimal = new Spider();
            count++;
            break;

            default:
            cout << "Not known option";
    }

    return pAnimal;
} 
```

第二种方法：

```
template<typename classType>
class Singleton {
public:
    classType& instance()
    {
        static classType object;
        return object;
    }
}; 
```

任何意见将不胜感激，谢谢:)！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T21:18:56.090

在大多数情况下，Singleton 被滥用。一般建议是：不要使用它！如果你认为你真的有一个单例是正确解决方案的情况：概率仍然对你不利。如果您真的非常确定需要使用 Singleton，您可能仍希望将其用作某种美化数据：不要。它会伤害你。

好的，您已被警告。

第二种方法在 C++ 2011 中具有明显的优势，即它是线程安全的。它也恰好更简单。

如果您还没有实现 C++ 2011 逻辑的编译器，并且您在多线程应用程序中使用 Singleton，那么您需要确保它只被初始化一次，即使从同时调用访问函数两个线程。当然，这会导致其他一些不起作用的情况：不要使用双重检查锁定模式。它[也]不起作用。如果您实现了它的工作原理，那么有人会出现并“修复”您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:01:52.877

无论如何，在嵌入式环境中，您不需要单例模式，甚至不需要 new 或 malloc。

很难解释，但我试试。

嵌入式系统**必须工作**。没有配备手册和常见问题解答和互联网论坛的 IT 部门，没有人会调整你的 Linux 系统，没有人会修复你的配置，没有人会根据任务需要安装更大的硬盘或内存。您的程序无法使用有意义的错误代码向 stderr 和 exit() 写入详细消息，如果可以，则仅表示您的嵌入式系统无法工作。如果您可以在错误时闪烁红色指示灯，总比没有好，但它仍然意味着：设备失败。

我认为，**不使用 malloc/free 和 new/delete**是一个好习惯。您应该通过将对象定义为静态数组来“预分配”可能的最大对象数。或者，如果最大项目数取决于用户可以更改的配置，您应该在程序启动时分配固定数量的对象，因此启动时会出现内存不足的问题，而不是半小时后。

是的，会浪费很多内存，但不会出现神秘错误。而且您不必处理程序中的内存问题（仅在启动时）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T21:12:44.157

第一个解决方案有一些奇怪的编码（参见 Luchian Grigore 的回答）。忽略这一点：这是工厂和单例之间的一些概念混合。工厂通常是单例，但它通常发出的不是。

第二个确实确保您只能创建一个类的一个对象，但前提是您将其包装在 Singleton 模板中。如果该类具有公共构造函数，则可以在方案之外创建它，从而违反规则。

在我的书中，这些都不是做单例的好方法。

扩展一下：单例的想法是因为您需要管理一些特定的事情，并且您需要一个组件来完全负责。

在您的第一个版本中，您可以拥有多个工厂，每个工厂都创建一个动物。在现实世界中没有意义，在代码中也没有意义。

您的第二个示例尝试允许对（可选）的每个调用都是单例 - 但并非所有类都需要，并且许多类在“单例化”时不一定会表现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T21:12:48.720

看起来你可以通过创建一个**函数**来省去一大堆头痛：

```
Animal * CreateAnimal(int theTypeOfAnimal)
{
    static int count = 0;
    static int maxCount = 1;

    switch(theTypeOfAnimal)
    {
        // ...
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T21:12:49.983

好吧，第一个不起作用：

```
Animal* pAnimal = NULL;
if(pAnimal != NULL)
{
    return pAnimal;
} 
```

你期望这个条件**永远**成立吗？

我之前看过第二个，所以我会继续说它更惯用，至少对于这种类型的单例来说，这并不是一个真正的单例，因为你有多个实例，尽管每个 -实际型。好吧，一般的想法是好的（对于单身人士），但我会选择类似的东西：

```
template<typename classType>
class AnimalManager {
public:
   static Animal& instance()
   {
       static classType object;
       return object;
   }
}; 
```

你可以打电话给

```
Animal& animal = AnimalManager<Dog>::instance();
//assuming you derive Dog from Animal, which you're currently not 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-29T21:31:53.717

我会被大量的 Java 程序员贬低，但我不介意：如果您知道，您的程序只需要一个对象实例，请随意创建一个全局对象并编写一个静态 get() 方法，该方法返回（引用）它（并且不要从其他地方引用全局对象）。

我认为，Java 中的单例模式是一种*实现*全局对象的技术，在 C++ 中是一种*隐藏*全局对象的技术。但是为什么，隐藏起来也一样丑，不隐藏也一样丑。

你也应该小心地包裹它，让它像其他普通物体一样出现在场景中，并把它当作普通物体处理。也许，稍后，随着程序的发展，它们的实例会越来越多，你会很高兴它已经充当了一个普通的对象。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-29T21:33:31.580

在回顾中，John Vlisides 说如果一个“模式”不应该出现在他的 GOF 书中，那就是单例。但是，另请参阅他对[在 C++ 中实现它](http://www.google.co.uk/search?q=to+kill+a+singleton+by+john+vlissides)的讨论。

另请参阅 Andrei Alexandrescu，他使用 3 种不同的创建模型、4 种不同的生命周期模型和 2 种线程模型[探索单例](http://books.google.co.uk/books?id=aJ1av7UFBPwC&pg=PA129&lpg=PA129&dq=singleton+%2B+andrei+alexandrescu&source=bl&ots=YRfE-rUc6Z&sig=-m8pfa2IRU01ga60USbUY8DMVH8&hl=en&sa=X&ei=xvSOUOSdMKb-4QSoiYFw&ved=0CDQQ6AEwAw#v=onepage&q=singleton%20%2B%20andrei%20alexandrescu&f=false)，这是实现单例的 24 种方式。

就个人而言，我通过只传递需要的对象来竭尽全力避免它们。它使测试更容易，使接口更明确，等等。你已经被警告过，当然你已经被警告过，但是你会听吗？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-30T05:00:13.523

第一个代码片段未能实现单例，因为`AnimalFactory::CreateInstance`未能检查它维护的实例计数。

第二个代码片段，

```
template<typename classType>
class Singleton {
public:
    classType& instance()
    {
        static classType object;
        return object;
    }
}; 
```

如果做得好，在 Scott Meyers 之后被称为**Meyers's singleton 。**

给定的代码可以工作，但会产生笨拙的用法。为避免必须实例化，应声明`Singleton`该方法。此外，对类只能通过, 实例化的要求应记录在案，例如作为带有示例的注释。`instance``static``classType``Singleton`

其他人已经警告过你不要使用单例，但让我也这样做。

单例有其用途，例如确保仅创建一次 Windows API“窗口类”，但主要是它们被滥用为伪装的全局变量。全局变量的一个问题，即您不知道全局变量何时被初始化（在 C++ 编程中称为**静态初始化顺序惨败**），可以通过单例来避免。然而，主要问题仍然存在，即它们充当**意大利面条式通信**系统，在您永远不会怀疑的地方之间以无法追踪的方式路由引发混乱的信息。

所以，不要。

但是如果你发现你绝对需要单例，例如用于日志工具，那么请阅读 Andrei Alexandrescu 的**“现代 C++ 设计”**中关于单例的讨论，然后获取**Loki 库**并让它去做适合你的工作。

# r - 在data.frame中唯一/排序

> ID：13129642
> 
> 赞同：11
> 
> 时间：2012-10-29T21:02:42.460
> 
> 标签：r, unique, dataframe

我有一个这样的数据框：

```
x=c("01","01","01","22","22","03","03","03","35","35")
y=c("f","f","f","m","m","m","m","m","f","f")
df=data.frame(spn=x, sex=y) 
```

看起来像：

```
 spn sex
1   01   f
2   01   f
3   01   f
4   22   m
5   22   m
6   03   m
7   03   m
8   03   m
9   35   f
10  35   f 
```

我想做的是对 df$spn 进行排序并让它只出现一次。适当的 df$sex 也是如此，例如：

```
 spn sex
1  01   f
2  03   m
3  22   m
4  35   f 
```

我怎么能那样做？非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T21:08:15.247

```
df <- df[order(df$spn), ]
> df[!duplicated(df), ]
  spn sex
1  01   f
6  03   m
4  22   m
9  35   f 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-29T21:09:02.307

```
df2 = df[!duplicated(df), ] # Remove duplicated rows.
df3 = df2[order(df2$spn), ] # Sort by the spn column.

df3
#  spn sex
#1  01   f
#6  03   m
#4  22   m
#9  35   f 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-08T12:04:46.360

使用唯一的然后订购：

```
df <- unique(df)
df[order(df$spn), ] 
```

使用*dplyr*，*data.table*：

```
library(dplyr)
unique(df) %>% arrange(spn)
#   spn sex
# 1  01   f
# 2  03   m
# 3  22   m
# 4  35   f

library(data.table)
unique(setDT(df))[ order(spn), ]
#    spn sex
# 1:  01   f
# 2:  03   m
# 3:  22   m
# 4:  35   f 
```

# php - 如果在 stringB 中找到它们，如何使用标签将 stringA 中的字符包装起来？

> ID：13129647
> 
> 赞同：-1
> 
> 时间：2012-10-29T21:02:58.543
> 
> 标签：php, regex, string, replace, preg-replace

例如：

```
$stringA = 'Whatcha talkin bout Willis?';
$stringB = 'aeiou'; 
```

我需要将 stringB 中的所有字符与 stringA 中的任何匹配的字符都用`<span>`.

我怎样才能做到这一点？

```
echo tagVowels($stringA);

function tagVowels($string) {
    // ????
    // So far I've been using a manual loop through each character.
    // I'm hoping for a simpler/cleaner way.
    for ($i = 0; $i <= strlen($string) -1; $i++) {
        if (strpos()) {
            $string = str_replace();
        }
    }
} 
```

结果：

```
Wh<span>a</span>tch<span>a</span> t<span>a</span>lk<span>i</span>n bout W<span>i</span>ll<span>i</span>s 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:07:27.447

生成一个字符类`$stringB`：

```
$stringA = preg_replace('/['.$stringB.']/', '<span>$0</span>', $stringA); 
```

这会将这些字符中的每一个都包含在`span`标签中。如果您希望连续匹配的字符出现在同一个跨度标记中，请使用以下命令：

```
$stringA = preg_replace('/['.$stringB.']+/', '<span>$0</span>', $stringA); 
```

`^]-\`请注意，如果您在正则表达式字符类 ( )中包含作为元字符的字符，这种方法会变得很丑陋。`preg_quote($stringB)`但是，正如 Brad Christie 所提到的，如果您打电话而不是立即插入，您可以解决这个问题`$stringB`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T21:08:59.130

使用非正则表达式变体，利用`str_replace`' 接受数组的能力：

```
$find = str_split($stringB);
$replace = array();
foreach ($find as $ltr)
{
    $replace[] = sprintf('<span>%s</span>', $ltr);
}
$stringA = str_replace($find, $replace, $stringA); 
```

简单示例：http: [//ideone.com/3CKctq](http://ideone.com/3CKctq)

# php - 我得到了 md5 哈希的相同输出，但 base64_encode 结果不一样

> ID：13129657
> 
> 赞同：0
> 
> 时间：2012-10-29T21:04:20.150
> 
> 标签：php, encryption, base64, md5, encode

我正在尝试将我的网站连接到需要某个验证密钥的支付网站，该验证密钥首先是 md5 散列，然后是 base64 编码。所以指令pdf给出了一个给定输入字符串的例子：

```
input EX123123456100.00
md5(input) => 231cd7f8e0151f6e0c4a60b33752a1e7
base64_encode(md5(input)) => IxzX+0AVH24MSmCzN1Kh5w== 
```

所以当我尝试这个示例输入时，我得到了**相同**`md5`的哈希输出。但`base64_encode`结果不一样。说明说`base64_encode`需要以十六进制格式对值进行编码才能使其正常工作。而且我猜我`base64_encode`在我的 php 脚本中正在编码一个字符串，这就是为什么我从 pdf 文件中得到不同结果的原因。那么如何使`base64_encode`编码成为十六进制值？还是有其他原因我得到不同的价值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T21:09:18.293

对已经是非常好的 ASCII 字符串的内容进行 base64 编码没有多大意义。如果将 a`true`作为第二个参数传递给`md5`，它将返回原始二进制数据而不是十六进制字符串。Base64 编码*为*您提供正确的示例值：

```
base64_encode(md5($key, true)) 
```

要么您误解了说明，要么说明具有误导性。

# java - 在java中接收POST HTTP请求

> ID：13129669
> 
> 赞同：0
> 
> 时间：2012-10-29T21:05:04.797
> 
> 标签：java, html, sockets

我正在用 Java 创建一个多线程 Web 服务器（例如本地主机：http://127.0.0.1）。我的问题是，如何从 Web 服务器上的客户端读取 POST 请求 HTTP/1.1？

以下代码适用于 GET 请求，但我想知道如何获取 POST 请求中的属性：

```
void get(Socket socket) throws IOException {
    byte[] buffer = new byte[BUFFER_SIZE];
    if (buffer[0] == (byte)'G' &&
        buffer[1] == (byte)'E' &&
        buffer[2] == (byte)'T' &&
        buffer[3] == (byte)' ') {
    //READ FOLLOWING OF ? in header EX: Get /?ABC=XYZ 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:09:19.547

Where is the `buffer` coming from? Consider using (buffered) `socket.getInputStream()` and reading byte-by-byte (actually character by character). Then once you read `GET`/`POST` you can continue reading the rest of the header.

BTW any reason to implement HTTP where so many HTTP servers and servlet containers are available, ready to be embedded? Remember that HTTP is surprisingly complex protocol...

# jquery - jQuery - 如果链接具有特定 ID，则运行函数的 if 子句

> ID：13129670
> 
> 赞同：1
> 
> 时间：2012-10-29T21:05:06.310
> 
> 标签：jquery

如果单击的链接是`artist_link`. 我需要这样做的原因是因为我有一个历史 API 脚本，如果单击此链接，则该脚本需要运行。它在页面加载时运行，但由于内容中的历史 api ajax 没有页面加载。

这就是我所拥有的；

```
if ($('a').attr('id') == 'artist_link'){ alert ('hello'); } 
```

好吧，我应该解释一下。**它必须是if**子句，因为只有在单击的链接具有该特定 ID时才会运行脚本。该子句在 AJAX 请求中，该请求是我的历史 API 脚本的一部分。

```
$.ajax({
    url: url,
    type: 'GET',
    dataType: "html",
    success: function (responseData) {

        $("#main").hide().html($("#load", responseData)).fadeIn(500); //fadeIn new page
        if (url =='Home'){
         $.ajax({
         type: "GET",
         url: "AJAX/request_feed.js",
         dataType: "script"
         });
        }
        if (url =='Discover'){

         $.ajax({
         type: "GET",
         url: "AJAX/get_artists.js",
         dataType: "script"
         });

         }

         if ($('a').attr('id') === 'artist_link'){ alert ('hello'); }   
    },
    error: function (jqXHR, textStatus, errorThrown) {
        window.location.replace("404");
    }
}); 
```

**更新：**

此外，点击功能就在历史脚本的开头，所以我只需要确定`a`点击的是否有那个特定的 ID

```
$(document).on("click", "a", function (event) { 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T21:06:33.783

> 如果单击的链接是 Artist_link，我需要运行脚本

那么仅仅定位ID并设置点击功能有什么问题呢？

```
$("#artist_link").on('click', function() {
    alert('hello');
}); 
```

**编辑：**

```
$(document).on("click", "a", function (event) {
   //do ajax stuff here
   if (event.target.id=='artist_link') {
       //do some stuff if the right link was clicked ...
       //make sure you don't redefine the event, and it will be available in
       //the ajax functions scope as well (as long as it's inside the click function)
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T21:08:23.207

如果您在页面加载后动态添加 HTML 元素，请使用此

```
$(document).on('click', '#artist_link', function() {
    alert('hello');
}); 
```

# linux - 基于 linux 的嵌入式系统上的 root 用户

> ID：13129671
> 
> 赞同：0
> 
> 时间：2012-10-29T21:05:11.693
> 
> 标签：linux, filesystems, embedded, root

我参与了为运行 Linux 的 Beagleebone 创建根文件系统的任务。通常，文件系统是使用单个 root 用户（例如 buildroot）生成和配置的，它是系统的唯一用户。这是否意味着所有命令和应用程序都以 root 权限（作为系统的唯一用户）执行？这不是安全问题吗？创建一个非root用户会更好吗？通常的做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:16:23.953

在 linux 系统中，除了 root 之外还有许多系统用户，这些用户可以用于特定目的。如果您的嵌入式系统是某种自治系统（例如机器人），并且不会在网络上公开任何服务或对用户进行某种直接物理访问，那么不必担心太多。如果是这样，那么您应该检查有问题的软件是否真的需要 root 访问权限。如果没有考虑到所有安全隐患，您始终可以创建权限较低的用户来代表您运行它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T21:19:34.737

Raspbery Pi Debian 带有 root + 一个“预安装”的 pi 用户，该用户具有 sudo 权限。现代 Unix 系统不启用“本地 root 登录”，因此需要额外的用户。

如果您的设备以某种方式连接到互联网，我的意思是，有机会从互联网或更广泛的 LAN 访问它，您应该遵循一些安全指南（例如，没有 root 登录）。但如果没有，比如说，您的设备根本没有 LAN 访问权限，请不要担心这些事情。

# asp.net - FormsAuthenticationTicket.Version 属性有什么用？

> ID：13129674
> 
> 赞同：13
> 
> 时间：2012-10-29T21:05:33.353
> 
> 标签：asp.net, forms-authentication, formsauthenticationticket

当我在应用程序中创建身份验证机制时，我偶然发现了[FormsAuthenticationTicket.Version](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthenticationticket.version.aspx)属性。这些文档没有举例说明任何用例，而且我没有发现它在其他任何地方使用的参考。

有人已经用了吗？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-29T21:11:17.957

这是为将来使用而创建的，因此它可以将以前版本的票证转换为当前版本。在 .NET 1.1 中，默认值为 1。从 .NET 2.0 开始，默认值为 2。当然，除非您在手动构造票证时覆盖此值。

该框架目前并没有对这个值做任何事情。您可以自己使用它（并指定您自己的“版本”）来理解票证中包含的数据，因为您的应用程序发展并处理持久性 cookie，但大多数情况下，您可能会忽略它。

# python - 非数字 Python 对象的顺序比较背后的逻辑是什么

> ID：13129676
> 
> 赞同：3
> 
> 时间：2012-10-29T21:05:42.483
> 
> 标签：python, implementation

为什么`123 < list`评价为`True`？还是`list < 123`去`False`？还是`list < dict`去`True`？

更一般地说，当将数字与函数、列表或类似事物进行比较时，为什么会引发`<`或不引发错误？`>`这种设计选择背后的逻辑是什么？

（请注意，这是在 Python 2.7 中，在 Python 3 中可能不是这样，我还没有尝试过）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T21:11:58.737

在 Python2 中，[文档说](http://docs.python.org/2/library/stdtypes.html#comparisons)：

> CPython 实现细节：除数字外的不同类型的对象按其类型名称排序；不支持正确比较的相同类型的对象按其地址排序。

在 Python3 中，[这个疣是固定的](http://docs.python.org/3.0/whatsnew/3.0.html#ordering-comparisons)：

> 当操作数没有有意义的自然排序时，排序比较运算符（<、<=、>=、>）会引发 TypeError 异常。因此，像 1 < '', 0 > None 或 len <= len 这样的表达式不再有效，例如 None < None 会引发 TypeError 而不是返回 False。一个推论是对异构列表进行排序不再有意义——所有元素必须相互可比。请注意，这不适用于 == 和 != 运算符：不同类型的对象总是比较不相等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T21:09:06.103

这种情况下的比较是基于`type()`对象的：

例如：`type(123)`is`'int'`和`type(list)`is `'list'`，所以字符串比较`'int'<'list'`返回为`True`

```
>>> 123<list
True
>>> type(123)<type(list)
True 
```

# delphi - 保存组合框项目 3,4 delphi

> ID：13129677
> 
> 赞同：-1
> 
> 时间：2012-10-29T21:05:43.117
> 
> 标签：delphi, combobox

我有一个默认包含 3 个项目的组合框，我想保存这样的项目：

```
Item1 //don't save
Item2 //Don't save
Items3 //save
//save all futur items added 
```

为什么我的代码不起作用？

```
if Combobox1.ItemIndex > 2 then // i used 2 for test and it's no work
   Combobox1.Items.SaveToFile('util.conf');
end; 
```

如果我删除*如果 Combobox1.ItemIndex > 2 那么*所有项目都被保存......

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T21:24:00.080

将项目复制到临时列表，然后从该临时列表中删除您要删除的任何项目。然后保存它。例如，此代码将从列表中删除前两个元素。

```
TempList := TStringList.Create;
try
  TempList.Assign(ComboBox1.Items);
  if TempList.Count>0 then
    TempList.Delete(0);
  if TempList.Count>0 then
    TempList.Delete(0);
  TempList.SaveToFile('util.conf');
finally
  TempList.Free;
end; 
```

我不确定我是否完全理解需要删除列表中的哪些元素。无论如何，复制到不同列表并保存它的基本想法几乎肯定是您需要的。您一定能够确定需要删除哪些元素。

# sql - 在 SQL Server 中构建数据库更改查询的快速方法

> ID：13129678
> 
> 赞同：0
> 
> 时间：2012-10-29T21:05:43.920
> 
> 标签：sql, sql-server-2008-r2, ssms

（抱歉 - 问题最初并不清楚。我不是在寻找构建插入、删除语句等的最快方法，而是构建查询以更改例如数据库中的表的最快方法，例如添加或删除柱子）

那么，在 SQL Server 中构建数据库更改查询的最快和最好的方法是什么？我将采用手动编写 SQL 的方式，因为它在过去使用 IBM Informix 数据库时给了我最好的结果。注意事项：

*   我发现在管理工作室中使用表设计器是一种糟糕的方法（根据我的经验，这太简单了，而且 GUI 驱动无法使用，并且通常需要完全重建表才能正常工作）
*   查询设计器只允许构建简单的选择、更新删除等查询
*   有什么推荐的工具可以让这更容易吗？
*   我是否遗漏了一些我应该知道的关于 SQL 管理工作室的信息？似乎为建表创建了过于复杂的 SQL，难以理解和编辑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T21:10:07.110

Do you write Java, .Net, Python or code by hand? What's the difference with SQL?

If there are patterns and code generation can be automated, (write and) use a code generator (but that goes for the other languages I listed too).

SQL is a lot more than just SELECT ... WHERE ... or UPDATE ... SET ... WHERE id = value.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:11:18.250

for most kinds of scripts, I ask SMS to generate the initial script (create, drop, alter, select, insert, delete, execute, etc), and then tweak to taste. not sure if this is sufficient to your needs, but I find it useful

to generate scripts, Right click an object (table/view/sproc/fn/etc) and expand "Script ".

hope that helps.

# ruby-on-rails - 使用 gzip 压缩将图像数据编码为 UTF-8 字符串

> ID：13129683
> 
> 赞同：4
> 
> 时间：2012-10-29T21:05:56.120
> 
> 标签：ruby-on-rails, postgresql

我正在尝试将文件中的图像数据作为 base64 字符串存储到 PostgreSQL 数据库中，该字符串由 gzip 压缩以节省空间。我正在使用以下代码对图像进行编码：

```
@file = File.open("#{Rails.root.to_s}/public/" << @ad_object.image_url).read
@base64 = Base64.encode64(@file)
@compressed = ActiveSupport::Gzip.compress(@base64)
@compressed.force_encoding('UTF-8')
@ad_object.imageData = @compressed 
```

当我尝试保存对象时，出现以下错误：

```
ActiveRecord::StatementInvalid (PG::Error: ERROR:  invalid byte sequence for encoding "UTF8": 0x8b 
```

在 rails 控制台中，任何 gzip 压缩都会将数据输出为 ASCII 8 位编码。我尝试将我的内部和外部编码设置为 UTF-8，但结果没有改变。如何将此压缩数据转换为 UTF-8 字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T00:14:42.517

由于多种原因，这没有多大意义。

1.  gzip 是二进制编码。绝对没有必要对某些东西进行 base64 编码然后对其进行 gzip 压缩，因为输出是二进制的，而 base64 仅用于通过非 8bit-clean 协议进行传输。直接gzip文件就行了。

2.  大多数图像数据已经使用 PNG 或 JPEG 等编解码器进行压缩，在图像数据压缩方面比 gzip 更有效。压缩它通常会使图像稍微大一点。对于图像数据，Gzip 永远不会像 loss-les PNG 格式那样高效，因此如果您的图像数据未压缩，PNG 会压缩它而不是 gzip 压缩它。

3.  当表示二进制数据时，实际上并没有文本编码问题，因为它不是文本。它不是有效的 utf-8，试图告诉系统它是有效的只会导致进一步的问题。

完全取消 base64 编码和 gzip 步骤。正如 mu 太短所说，只需使用 Rails`binary`字段，让 Rails 处理二进制数据的编码和发送。

只需使用`bytea`数据库中的字段并直接存储 PNG 或 JPEG 图像。这些在传输线上进行了十六进制编码，占用了二进制空间的 2 倍，但它们以二进制形式存储在磁盘上。如果从压缩中受益， PostgreSQL 会自动压缩`bytea`磁盘上的字段，但大多数图像数据不会。

要最小化图像的大小，请选择适当的压缩格式，例如`PNG`无损压缩或`JPEG`照片。在压缩之前尽可能多地对图像进行下采样，并使用产生可接受质量的最强压缩（对于 JPEG 等有损编解码器）。不要尝试使用 gzip/LZMA/etc 进一步压缩图像，它会一事无成。

当十六进制转义通过网络传输时，您的数据仍然会增加一倍。解决这个问题需要使用 PostgreSQL 二进制协议（困难且复杂）或二进制干净的边带来传输图像数据。如果 Pg gem 支持 SSL 压缩，您可以使用它来压缩协议流量，这将大大降低`hex`转义的成本。

如果需要将大小保持在绝对最小值，我不会使用 PotsgreSQL 有线协议将图像发送到设备。它专为性能和可靠性而设计，而不是绝对最小尺寸。

# html - 如何在 HTML 电子邮件中浮动图像

> ID：13129684
> 
> 赞同：1
> 
> 时间：2012-10-29T21:06:00.607
> 
> 标签：html, email

我有以下 HTML，我在电子邮件中发送并用于创建网页。

```
<div>
   <a name="id-23"></a>
   <h2>Free Legal Defense Services for Lester et al</h2>
   <div class="ExternalClass43FFE3E27D8B457FBF45BD9E20AC7FE3">
      <p><img src="http://www.mynevadacounty.com/NC/CEO/Resources/FridayMemo/FM-20121026-State Capitol.jpg" alt="" style="margin:5px;float:left;vertical-align:auto" />
         Blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
      </p>
   </div>
   </span>
</div> 
```

网页按照我的意愿包装文本，但电子邮件没有：

![在此处输入图像描述](../Images/72e0261562a170a8e187412351ff9bdd.png)

如何让文本正确换行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-04-12T12:39:32.510

将图像放置在单独的表格单元格中，因为您的内容只是创建列 - 它不会将您的文本包裹在图像周围。使用过时的属性**align="left"**，您可以让您的电子邮件的行为类似于图像向左浮动并且文本环绕它的站点。

但是，Outlook 也会忽略您的 margin 属性，并且您的文本将与图像对接。要解决这个问题，请使用过时的属性**hspace="5"**（向左和向右添加 5px 的间距）和**vspace="5"**（向顶部和底部添加 5px 的间距）。

不幸的是，没有办法使用这些属性来定位右侧和底部，因此您最终会在图像周围留有间距。如果您对此不满意并且*只**需要*在右侧和底部留出间距，那么我建议将该空白添加到图像本身。否则，请继续阅读更复杂的方法。

 *如果您使用 hspace 和 vspace，或者在图像中添加空白，那么我建议从内联样式属性中省略 margin 属性（或将其设置为 0）以避免电子邮件客户端中的双倍*间距不要*忽视它。

```
<div>
   <a name="id-23"></a>
   <h2>Free Legal Defense Services for Lester et al</h2>
   <div class="ExternalClass43FFE3E27D8B457FBF45BD9E20AC7FE3">
      <p><img src="http://www.mynevadacounty.com/NC/CEO/Resources/FridayMemo/FM-20121026-State Capitol.jpg" alt="" align="left" hspace="5" vspace="5" style="float:left;" />
         Blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
      </p>
   </div>
   </span>
</div> 
```

**更复杂的方法：**

因为过时的属性“align”适用于图像和表格，我们将把您的单个图像放入表格中并浮动*它*。然后，将填充应用于保存图像的单个表格单元格元素。

```
<div>
   <a name="id-23"></a>
   <h2>Free Legal Defense Services for Lester et al</h2>
   <div class="ExternalClass43FFE3E27D8B457FBF45BD9E20AC7FE3">
      <!--[if mso]>
      <table align="left" border="0" cellpadding="0" cellspacing="0" width="130" height="60">
         <tr>
            <td style="padding: 0 5px 5px 0;">
            <![endif]-->
               <img align="left" width="125" height="53" style="float: left; width: 125px; height: 53px; margin: 0 5px 5px 0;" src="http://www.mynevadacounty.com/NC/CEO/Resources/FridayMemo/FM-20121026-State Capitol.jpg" alt="" />
            <!--[if mso]>
            </td>
         </tr>
      </table>
      <![endif]-->
      <p>
         Blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
      </p>
   </div>
   </span>
</div> 
```

资料来源：

*   [Outlook 中的浮动图像和表格](https://litmus.com/community/discussions/1543-responsive-allowing-text-to-flow-around-images#comment-4930)
*   [Outlook 中图像周围的边距和填充](https://knowledge.hubspot.com/articles/kcs_article/email/why-are-margins-and-padding-around-my-image-not-rendering-in-outlook#method-1-use-hspace-or-vspace)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:45:14.790

根据[**这篇关于 HTML 电子邮件的精彩文章**](http://kb.mailchimp.com/article/how-to-code-html-emails)...

**你的 99% 的 CSS 都不起作用**

因此，如果您想使用自定义 html 电子邮件变得非常沮丧和肮脏，那么您将无法使用表格。Mail Chimp 有一堆免费的 html 电子邮件模板，我建议您从这些模板开始...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-20T10:03:15.310

您可以使用 tds 的表格行宽 2！

而不是“float：right”试试这个

```
 <table cellpadding="0" cellspacing="0" width="100%">
                        <tr>
                            <td >
                               your text Here                  
                            </td>
                            <td>
                                <div class="text">
                                    <img src="###" alt="" border="0" />
                                </div>
                            </td>
                        </tr>
                    </table> 
```*

# mysql - 在没有结果的情况下加速 MySQL SELECT 查询

> ID：13129689
> 
> 赞同：1
> 
> 时间：2012-10-29T21:06:35.483
> 
> 标签：mysql, optimization

我有一个 MySQL 餐厅表，描述如下：

```
 CREATE TABLE `restaurants` (
    `id` int(11) NOT NULL AUTO_INCREMENT,
    `name` varchar(32) NOT NULL,
    `description` varchar(512) NOT NULL,
    `tags` varchar(512) DEFAULT NULL,
    `type` enum('A','D','E','L','Q','R','P','T','Z') NOT NULL,
    `popularity` int(11) DEFAULT '0',
    PRIMARY KEY (`id`),
    UNIQUE KEY `uc_type_name` (`type`,`name`),
    KEY `name_idx` (`name`),
    KEY `type_popularity_idx` (`type`,`popularity`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

以下是有关该表的一些状态信息：

```
Name: restaurants
    Engine: MyISAM
    Version: 10
    Row_format: Dynamic
    Rows: 72999
    Avg_row_length: 84
    Data_length: 6204488
    Max_data_length: 281474976710655
    Index_length: 5280768
    Data_free: 0
    Auto_increment: 75634
    Collation: utf8_general_ci
    Checksum: NULL
    Create_options:
    Comment: 
```

我正在尝试构建一个查询，该查询返回与给定餐厅类型的给定术语匹配的 6 家最受欢迎的餐厅：

```
SELECT `id`, `name`, `type`, `description` FROM `restaurants` 
WHERE `type` = 'A'
      AND (`name` LIKE '%some restaurant%'
           OR `description` LIKE '%some restaurant%' 
           OR `tags` LIKE '%some restaurant%')
ORDER BY `popularity` DESC
LIMIT 6 
```

其中一种餐厅类型 A 包含 61,500 家餐厅。此外，这些A类餐厅的描述和名称往往比较长。因此，当类型 A 的查找没有结果时，查询需要 0.8-0.9 秒。但是，当有结果时，它们的运行速度可以快至 0.1 秒。

如何加快此查询的性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:20:38.827

您可以尝试使用[全文索引](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)：

```
ALTER TABLE `restaurants` ADD FULLTEXT (`name`, `description`, `tags`); 
```

使用`MATCH`：

```
SELECT `id`, `name`, `type`, `description` FROM `restaurants` 
    WHERE `type` = 'A'
        AND MATCH (`name`, `description`, `tags`) AGAINST ('some restaurant')
    ORDER BY `popularity` DESC LIMIT 6 
```

另外，运行

```
EXPLAIN SELECT `id`, `name`, `type`, `description` FROM `restaurants` 
    WHERE `type` = 'A'
        AND MATCH (`name`, `description`, `tags`) AGAINST ('some restaurant')
    ORDER BY `popularity` DESC LIMIT 6 
```

检查是否使用了索引。

您只能通过测试来确定它是否有帮助。LIKE 和全文搜索的性能可能会因环境和表结构而有很大差异......至少它不会搜索整个表。

# salesforce - 提取在过去 x 小时内更新的数据的 SOQL 查询

> ID：13129691
> 
> 赞同：2
> 
> 时间：2012-10-29T21:06:41.440
> 
> 标签：salesforce, soql

我正在使用[CLIq](http://code.google.com/p/dataloadercliq/)并安排了一个应该每 x 小时运行一次的任务。我的问题是我的 SOQL 查询从数据库中获取所有项目，我只需要提取在过去 x 小时内更新的内容。我怎样才能将我的查询限制在这个范围内？

这是我的 process-config.xml 文件。

```
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>
    <bean id="AMP_AIMS" class="com.salesforce.dataloader.process.ProcessRunner" singleton="false">
        <description>Created by Dataloader Cliq.</description>
        <property name="name" value="AMP_AIMS"/>
        <property name="configOverrideMap">

            <map>
                <entry key="dataAccess.name" value="...\AMP_AIMS\write\AMP_AIMS.csv"/>
                <entry key="dataAccess.readUTF8" value="true"/>
                <entry key="dataAccess.type" value="csvWrite"/>
                <entry key="dataAccess.writeUTF8" value="true"/>
                <entry key="process.enableExtractStatusOutput" value="true"/>
                <entry key="process.enableLastRunOutput" value="true"/>
                <entry key="process.lastRunOutputDirectory" value="...\AMP_AIMS\log"/>
                <entry key="process.operation" value="extract"/>
                <entry key="process.statusOutputDirectory" value="...\AMP_AIMS\log"/>
                <entry key="sfdc.bulkApiCheckStatusInterval" value="5000"/>
                <entry key="sfdc.bulkApiSerialMode" value="5000"/>
                <entry key="sfdc.debugMessages" value="false"/>
                <entry key="sfdc.enableRetries" value="true"/>
                <entry key="sfdc.endpoint" value="https://test.salesforce.com/services/Soap/u/24.0"/>
                <entry key="sfdc.entity" value="Agency_Profile__c"/>
                <entry key="sfdc.extractionRequestSize" value="500"/>
                <entry key="sfdc.extractionSOQL" value="Select a.Total_Annual_Sales__c, a.Market_Specialties__c, a.Market_Focus__c,  a.Destination_Specialties__c, a.CreatedDate, a.Agency_Website__c, a.Agency_Business_Email__c From Agency_Profile__c a"/>
                <entry key="sfdc.insertNulls" value="false"/>
                <entry key="sfdc.loadBatchSize" value="100"/>
                <entry key="sfdc.maxRetries" value="3"/>
                <entry key="sfdc.minRetrySleepSecs" value="2"/>
                <entry key="sfdc.noCompression" value="false"/>
                <entry key="sfdc.password" value="blabla"/>
                <entry key="sfdc.proxyHost" value=""/>
                <entry key="sfdc.proxyNtlmDomain" value=""/>
                <entry key="sfdc.proxyPassword" value=""/>
                <entry key="sfdc.proxyPort" value=""/>
                <entry key="sfdc.proxyUsername" value=""/>
                <entry key="sfdc.timeoutSecs" value="60"/>
                <entry key="sfdc.useBulkApi" value="false"/>
                <entry key="sfdc.username" value="bla"/>
            </map>
        </property>
    </bean>
</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:21:12.587

过去我对类似的事情很好：

```
SELECT Total_Annual_Sales__c, Market_Specialties__c, Market_Focus__c,  Destination_Specialties__c, CreatedDate, Agency_Website__c, Agency_Business_Email__c
FROM Agency_Profile__c
WHERE LastModifiedDate = TODAY AND HOUR_IN_DAY(LastModifiedDate) > 9 
```

你会安排它在 12 点运行，然后在下午 3 点运行类似的...

仍然不理想，因为如果您想要赶上其中一次运行失败...所以围绕加载程序编写一些脚本以节省最后一次成功运行的时间对于故障安全解决方案是必要的。

# jquery - 当 AJAX 请求获得“302 Moved”响应时会发生什么？

> ID：13129694
> 
> 赞同：17
> 
> 时间：2012-10-29T21:07:03.707
> 
> 标签：jquery, ajax, google-chrome, http-status-code-302

我正在尝试在不修改后端的情况下对旧网站表单进行 AJAX 化。最初，后端在收到表单后会响应“302 Moved”重定向到“thank you”页面。

现在，当我尝试使用 jQuery $.ajax 调用提交表单时，表单数据已成功提交，但“302 Moved”重定向似乎被浏览器取消，并且 jQuery 不知道发生了什么。

我的问题是，无论发生什么，$.ajax 调用都会返回错误并且 status = 0，所以我无法区分成功提交和错误。

有没有办法阻止浏览器尝试跟随重定向，或者至少取回正确的响应代码？（我正在使用 Chrome。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-11T21:27:34.923

我认为不，如果不更改后端，您将无法做到这一点。您必须更改响应标头，以便 Ajax 知道/理解要做什么。如果您进行了重定向，则必须更改标头，因为 Ajax呼叫响应不会这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T20:12:29.813

这能让你朝着正确的方向前进吗？

```
$.ajax({
    type: "GET",
    url: url,
    data: data,
    complete: function(e, xhr, settings){
       if(e.status === 200){
            console.log(e.responseText);
       }else{
            console.log("error");
       }
   }
   }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-11T22:13:34.543

您的后端应用程序可能具有相对重定向，jquery ajax 可能无法处理该重定向。在这种情况下，位置标头将不包含域名，仅包含相对路径。由于某些（我不清楚；））原因，它可能会导致同源政策问题。有趣的是，将重定向更改为绝对路径应该可以解决问题。在 jQuery 1.11.1 上测试。

## 用代码来描述：

理论上的ajax调用：

```
$.ajax({
    'url': '/your-url',
    'method': 'post',
    'data': form.serialize()
}).done(function(data) {
    // something
}).fail(function(jqXHR, textStatus, errorThrown) {
    // another something
}); 
```

所以在 /your-url 控制器中，你可能有类似的东西：

```
return $this->response->redirect('//same.domain/path'); 
```

或者

```
return $this->response->redirect('/path'); 
```

第一个会工作。第二个没有。

## 所以？

关键是您可能需要更改后端，但只需要一点点。如果您真的不想和/或以不同的方式处理它，则无需检查请求是否为 XmlHttpRequest。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-13T17:45:59.647

Ajax 代码如下所示：

```
$.ajax({
'url': '/your-url',
'method': 'post',
'data': form.serialize()
}).done(function(data) {
    // something
  }).fail(function(jqXHR, textStatus, errorThrown) {
if (jqXHR.getResponseHeader('Location') != null)
{ 
 window.Location= jqXHR.getResponseHeader('Location');
 }
 // other conditions in failure situation.
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-03T07:50:10.597

检查表单并添加 {{csrf_field()}}。这是在没有令牌的情况下提交表单时引起的。

# ios - 如何消除 UISplitViewController 应用程序中的后退栏按钮动画？

> ID：13129696
> 
> 赞同：1
> 
> 时间：2012-10-29T21:07:15.207
> 
> 标签：ios, uinavigationcontroller, uinavigationbar, uisplitviewcontroller, uiviewanimation

在非 IUSplitViewController 应用程序中，我可以通过将其添加到我的 UIApplicationDelegate 类头来抑制默认的后栏动画：

```
@interface MyNavigationBar : UINavigationBar { } @end
@interface MyNavigationController : UINavigationController { } @end 
```

连同相应的.m中的这个：

```
@implementation MyNavigationController
- (UIViewController *)popViewControllerAnimated:(BOOL)animated
{
    return( [super popViewControllerAnimated:NO] );
}
@end

@implementation MyNavigationBar
- (UINavigationItem *)popNavigationItemAnimated:(BOOL)animated
{
    return( [super popNavigationItemAnimated:NO] );
}
@end 
```

当然我也在Interface Builder中分别将MainWindow.xib中的Navigation Controller和Navigation Bar对象分配给了MyNavigationController和MyNavigationBar。

这就像标准应用程序中的魅力一样。

我的问题是在 UISplitViewController 应用程序中实现同样的事情。

具体来说，我无法弄清楚在这种情况下如何覆盖 UINavigationBar 的默认行为，以便在通过后退栏按钮弹出视图控制器时抑制导航栏的动画。

每当我将 UIViewController 实例化为 UISplitViewController 右窗格的根时，我都可以通过这样做来覆盖 UINavigationController 的行为*：*

```
[split is a pointer to my UISplitViewController]

MyNavigationController *nc = (MyNavigationController *) [split.viewControllers objectAtIndex:1];
nc = [[[MyNavigationController alloc] initWithRootViewController:someController] autorelease];
split.viewControllers = [NSArray arrayWithObjects: [split.viewControllers objectAtIndex:0], nc, nil];
split.delegate = someController; 
```

回顾一下，当我在 UISplitViewController 应用程序中点击后退栏按钮时，活动视图控制器的内容区域在通过后退栏按钮弹出时不会动画，但导航栏会动画，看起来很笨拙。

我在这个论坛中找到了标准应用案例的解决方案，但没有看到 UISplitViewController 解决方案的提及。

我尝试在 MyNavigationController 中覆盖 initWithCoder 以将 MyNavigationBar 的实例分配给 navigationBar 属性，但它不允许我这样做，因为它是只读的。

难住了。

# clojure - try and catch 可以在不同的（但嵌套的）宏中吗？

> ID：13129699
> 
> 赞同：6
> 
> 时间：2012-10-29T21:07:23.363
> 
> 标签：clojure, macros, try-catch

`try`位于一个宏中，位于第一个宏`catch`调用的第二个宏中。如何让以下工作？

```
(defmacro catch-me []
  `(catch ~'Exception ~'ex
     true))

(defmacro try-me []
  `(try (+ 4 3)
        (catch-me))) 
```

扩展`try-me`看起来不错：

```
(clojure.walk/macroexpand-all '(try-me)) 
```

产量

```
(try (clojure.core/+ 4 3) (catch Exception ex true)) 
```

但调用 (try-me) 会产生：

```
"Unable to resolve symbol: catch in this context", 
```

顺便说一句，这也是您在未尝试使用 catch 时会在 REPL 中收到的消息。

更新：

这就是我如何让它工作（感谢@Barmar），在这里你可以看到我的代码的实际上下文：

```
(defmacro try-me [& body]
  `(try
     ~@body
     ~@(for [[e msg] [[com.mongodb.MongoException$Network "Database unreachable."]
                      [com.mongodb.MongoException "Database problem."]
                      [Exception "Unknown error."]]]
         `(catch ~e ~'ex
            (common/site-layout
             [:div {:id "errormessage"}
              [:p ~msg]
              [:p "Error is: " ~e]
              [:p "Message is " ~'ex]]))))) 
```

但这就是我所希望的（使用单独的宏`catch-me`）：

```
(defmacro try-me [& body]
  `(try
     ~@body
     (catch-me com.mongodb.MongoException$Network "Database unreachable.")
     (catch-me com.mongodb.MongoException "Database problem.")
     (catch-me Exception "Unknown error."))) 
```

我认为这会更容易编写/维护。

有任何想法吗？我需要语法引用，因为我正在传递参数，这就是为什么不幸的是 Arthur 的答案无法应用（或者可以以某种方式应用？），但我直到现在才发布我的实际上下文。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T22:35:05.053

您收到该错误的原因是因为 for 的语法`try`是：

```
(try expr* catch-clause* finally-clause?) 
```

这意味着在*catch*和*finally*子句之前可以有任意数量的*expr*形式。扫描s 直到找到以or开头的。它*在*扩展任何宏之前执行此操作，因为它只是试图找出 expr 和 catch/finally 子句从哪里开始。它收集所有的and子句并为它们建立适当的错误处理环境。**`try``expr``catch``finally`*`catch``finally`***

 ***一旦这样做，它就会`expr`正常执行所有表单。所以它扩展了它们的宏，然后执行它们。但`catch`不是函数或特殊形式，它只是`try`在前面的步骤中寻找的东西。所以当它正常执行时，你会得到与在 REPL 中键入它时相同的错误。

您可能应该做的是编写一个宏，将其包裹在整个代码中，该代码扩展为您想要的`try`/`catch`表达式。如果没有您要完成的工作的示例，很难给出具体的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T22:38:55.157

简短的回答是肯定的，尽管嵌套具有特殊形式的宏可能会导致一些像这样的双引号问题。必须防止符号在两个扩展级别上被评估：

```
user> (defmacro catch-me []                                   
          '(list 'catch 'Exception 'ex  
                       'true))

user> (defmacro try-me []
    `(try (+ 4 3)              
                  ~(catch-me)))
#'user/try-me

user> (try-me)
7 
```

并查看它是否也捕获了异常：

```
user> (defmacro try-me []
    `(try (/ 4 0)
              ~(catch-me)))
#'user/try-me
user> (try-me)
true 
```***

# vbscript - VBScript 创建快捷方式：当前登录用户的网络文件夹

> ID：13129702
> 
> 赞同：0
> 
> 时间：2012-10-29T21:07:34.063
> 
> 标签：vbscript, shortcut

我正在尝试使用 VBScript 创建用户桌面的快捷方式。但是，似乎我的代码中缺少某些内容，因为它试图将快捷方式放在错误的目录中，C:\desktop\My Scans 而不是 C:\Users\username\Desktop\My Scans.lnk

```
Set oWS = WScript.CreateObject("WScript.Shell")
sLinkFile = (desktopPath & "\My Scans.LNK")
Set oLink = oWS.CreateShortcut(sLinkFile)
oLink.Save 
```

知道我错过了什么吗？非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:02:02.643

这似乎对我有用：

```
Set oWS = WScript.CreateObject("WScript.Shell")
' Get the %userprofile% in a variable, or else it won't be recognized
userProfile = oWS.ExpandEnvironmentStrings( "%userprofile%" )
sLinkFile = userProfile & "\desktop\My Scans.LNK"
Set oLink = oWS.CreateShortcut(sLinkFile)
oLink.Save 
```

# php - 如何从数据库中获取数据？

> ID：13129705
> 
> 赞同：0
> 
> 时间：2012-10-29T21:07:41.907
> 
> 标签：php, mysql, database

不久前，一个人为我做了一些 php/database 工作。他将页面链接到菜单（具有单独的功能/表格）。我对将所有内容链接到这样的菜单有什么好处有点迷茫。

这是我试图弄清楚的代码：

```
function writeContent($page){
$parentQ = "select * from cdi_content where page=\"$page\"";//query to obtain content for this page
$parentResult = mysql_query($parentQ);//run query
$link = mysql_fetch_assoc($parentResult);//result
echo $link['content'];//write content`
} 
```

在`<?php writeContent("DDesign/index.php");?>`他创建的 index.php 页面上。

据我了解，它通过菜单功能运行，但我只是想让它打印数据库中“内容”字段中的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:18:34.237

首先检查查询中有多少行。如果代码用这个替换那部分。

```
function writeContent($page){
    $parentQ = "select * from cdi_content where page=\"$page\"";//query to obtain content for this page
    $parentResult = mysql_query($parentQ);//run query
    $total = mysql_num_rows($parentResult);

    if($total > 1) {

        while($rows = mysql_fetch_array($parentResult) {

            echo "Content: ".$row['content'] . "<br/>";
        }

    }else{

            $rows = mysql_fetch_assoc($parentResult);//result
            echo $rows['content'];//write content`

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:10:41.133

代替

```
select * from cdi_content where page=\"$page\" 
```

为了

```
select content from cdi_content where page=\"$page\" 
```

或者任何字段名称

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-29T21:29:01.867

要获取变量`$link` 使用的内容：

```
print_r($link); 
```

# web-services - Best method accessing statistics from a server continously

> ID：13129707
> 
> 赞同：0
> 
> 时间：2012-10-29T21:07:52.580
> 
> 标签：web-services, node.js

I am trying to create a time series application, where the client application continuously connects to the server to get the recent statistics and plot the graph from it. Like say for say for every 30 seconds it requests for the statistics for something and then gets the data and plot the results in a nice graph.

I don't want the graph to be discontinuous. I mean I want the graph to be constantly updating showing the time series statistics. Something like shifting to the left and displaying the new one from the right in the graph. What is the right approach for this.

I am not sure but should I fetch the data from the web server. I mean I was planning to use a web server which can provide the recent stats. I am not sure should I use http or use sockets to make a constant connection from the client and access stats. I was thinking to create a web server using node.js and the clients requesting for stats every 30 sec or so.

Can you guys suggest what could be the best architecture for this? Are there any library for plotting this time series data. I mean I can use some to plot a static graph. But I want this graph to be constantly updated showing the recent stats.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:24:13.983

我建议查看网络套接字，服务器可以按您想要的任何时间间隔推送新的/更新的数据。像[socket.io](http://socket.io)甚至更低的 engine.io 这样的东西将是进行实时更新的好选择。

至于绘制数据，我个人使用[d3.js](http://d3js.org/)来绘制数据，需要几分钟才能进入，但非常适合这种用例。

Square 有很多关于构建分析和统计仪表板和技术的重要信息。[http://corner.squareup.com/2012/04/building-analytics.html](http://corner.squareup.com/2012/04/building-analytics.html)

# tridion-2011 - How do I make UGC DCPs work with REL?

> ID：13129709
> 
> 赞同：1
> 
> 时间：2012-10-29T21:08:01.300
> 
> 标签：tridion-2011, tridion-content-delivery, ugc

I am building a primarily dynamic website in .NET and am trying to get UGC to work in conjunction with my Dynamic Component Presentations. My DCPs are being published using the REL output format (to the broker db), and are being consumed using the ComponentPresentationAssembler class.

The DCPs contain both a dynamic link and UGC PostRating. At runtime the dynamic link is successfully resolved, however the UGC code is not.

Example of DCP content in database:

```
<div>
<h2><tcdl:Link type="Component" origin="tcm:0-0-0" destination="tcm:33-10793" templateURI="tcm:0-0-0" linkAttributes="" textOnFail="true" addAnchor="false" variantId="">Basic Business Checking</tcdl:Link></h2>
    <tcdl:PostRating itemURI="tcm:33-10793" postParameter="ratingValuetcm:33-10793">
        <tcdl:ItemStats itemURI="tcm:33-10793">
            Rating:<tcdl:ContextVariable var="ugcItemStats.averageRating"/> (<tc    dl:ContextVariable var="ugcItemStats.numberOfRatings"/> ratings)<br/>
        </tcdl:ItemStats>
        <form method="post" id="ratingForm">Rate:
            <select name="ratingValuetcm:33-10793" size="1">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5" selected="true">5</option>
            </select>
            <input type="submit" value="Rate!"/>
        </form>
    </tcdl:PostRating>
</div> 
```

.NET page code:

```
Query myQuery = new Query();
myQuery.Criteria = andCriteria;
string[] componentPresentationURIs = myQuery.ExecuteQuery();

ComponentPresentationAssembler componentPresentationAssembler = new ComponentPresentationAssembler("tcm:33-10796-64");

foreach (string componentPresentationURI in componentPresentationURIs) {
    Response.Write(componentPresentationAssembler.GetContent(componentPresentationURI, strComponentTemplateURI));
} 
```

UGC is working successfully when deployed embedded on a page.
cd_dynamic_conf.xml is configured with ugc_renderer_bundle.xml tag bundle.

In the rendered html the dynamic link is resolved to

```
<a href="/prodigy/business-rewards-checking.aspx" >Business Rewards Checking</a> 
```

However the code remains as is.

And ideas would be welcome.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:05:28.837

首先，一个小评论：“REL 标签无法发布评论/评级”（检查使用 Tridion 记录的增强请求 76605）。这基本上意味着您的“tcdl:PostRating”将从结果输出中删除。就“tcdl:ItemStats”和“tcdl:ContextVariable”而言，如果您在“cd_storage_conf.xml”中有“ugc_dao_bundle.xml”设置，它们应该可以正常工作。结果，您将使用所有评论呈现整个页面，但评论/评级的发布或编辑将不起作用。如果您的渲染有问题，那么您应该会在日志中看到一些错误。希望这可以帮助。

干杯，丹尼尔。

# android - 适用于所有版本的android？

> ID：13129723
> 
> 赞同：0
> 
> 时间：2012-10-29T21:08:51.367
> 
> 标签：android

我可以创建适用于所有 Android 版本的 Android 应用吗？

如果答案是否定的，那么我想解决方案是创建我的应用程序的不同版本，以特定版本为目标，例如 2.2

指导我，因为我是 Android 世界的新手。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:10:01.193

> > 我可以创建适用于所有 Android 版本的 Android 应用吗？

是的你可以

然而，有些人可能会让他们的应用程序支持早期版本（如 2.2+），只是因为他们想使用早期版本中引入的一些功能。

其他人可能会开发两种不同的应用程序，一种用于早期版本，另一种用于其他版本。甚至您也可以根据其他特征来区分您的应用版本（例如一种仅用于平板电脑，一种用于手机）。

您可以阅读此[多 APK 支持](http://developer.android.com/guide/google/play/publishing/multiple-apks.html)指南以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T21:10:50.570

`android:minSdkVersion`是的，通过设置和的适当值`android:targetSdkVersion`。[阅读文档](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T21:14:19.273

是的。存在可让您使用最常用的类的兼容性库。只是避免添加旧版本的android不支持的东西

# javascript - How to automatically set the height of DIV elements

> ID：13129725
> 
> 赞同：0
> 
> 时间：2012-10-29T21:09:00.057
> 
> 标签：javascript, jquery, html, css

I'm having a problem with positioning multiple div elements. I have three div elements in a row with different heights. But in "div 1" is slide-down menu, so the height of "div 1" changes. I want to know, how can I automaticly set the height of all three div elements to be the same.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:13:06.050

This jQuery plugin will set the height of each element in a set to the height of the tallest one:

```
// Sets the height of a set to the height of the tallest member.
$.fn.sizeToTallest = function () {
    var tallest = 0;
    this.each(function () {
        var h = $(this).height();
        if (h > tallest) tallest = h;
    });
    this.height(tallest);
    return this;
}; 
```

Use it like this:

```
$("myDivs").sizeToTallest(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:12:35.850

Sounds like on the callback function for the slide-down of the one div, you just need to:

```
// grab the new hight
var newHeight = $(this).outerHeight();

// set it to the other two divs
$('.otherDivs').height(newHeight); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T21:13:48.137

```
$height = "50px"; // or whatever height you wish

 $("div").each(function(e)
 {
    $(this).css("height",$height);
 }); 
```

The each function will iterate your divs and then set their heights to `50px`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T21:21:16.980

```
$('#div1').slideDown(400, function() {
    $('#div2, #div3').height($(this).height());
}); 
```

# vb.net - Accessing a "My.Resources" item via a variable?

> ID：13129731
> 
> 赞同：1
> 
> 时间：2012-10-29T21:09:15.860
> 
> 标签：vb.net

[VB.NET 2010]

Let's say I have several My.Resources items (each of which are plain text files that contain several paragraphs of text).

And let's say the resource item names correspond to different types of music, like My.Resources.Rock, My.Resources.Blues, My.Resources.Jazz, etc etc.

And based on what the user types into a text box, the program should access the correct My.Resources item, and display the text contents of that item in a rich text box.

For example, if the user types "Blues" into the text box, then I need to access the contents of My.Resources.Blues, and display it in the rich text box.

Something like this (doesn't work, of course)...

```
 Dim ResourceName As String = TextBox1.Text
    Dim ResourceContents As String = My.Resources.ResourceName
    RichTextBox1.Text = ResourceContents 
```

Is there an easy way to accomplish this task?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T22:53:04.553

刚想出来，万一有人想知道...

```
Dim ResourceName As String = TextBox1.Text
Dim ResourceContents As String = My.Resources.ResourceManager.GetObject(ResourceName)
RichTextBox1.Text = ResourceContents 
```

# android - Manipulate Android Resources at runtime

> ID：13129734
> 
> 赞同：0
> 
> 时间：2012-10-29T21:09:31.683
> 
> 标签：android, resources

(Unimportant background) I'm retrieving information of a notification and sending it to another Android Device where the Notification is exactly cloned and displayed.

```
Notification.Builder nb = new Builder(mContext); 
nb.set...;
nb.setSmallIcon(R.drawable.ic_launcher); 
Notification notification = nb.build(); 
```

This creates a notification with an Icon "R.drawable.ic_launcher" which is displayed in the Status bar and also in the android.R.id.icon ImageView of Notification contentview. I need to change both based on a bitmap. The image in contentview can be changed like this:

```
notification.contentView.setImageViewBitmap(RemoteViewsData.iconID, nd.contentView.icon); 
```

I need a way how to change the Icon in the statusbar.(i.imgur.com/2Yu56.png)

Ideas:

1.  Assign an ID at runtime. Is this possible?
2.  Don't change the ID but change the resource file (in storage) it is linked to. Where the resources are stored, are they writable.

# python - 无法通过赋值访问 Python 对象属性

> ID：13129736
> 
> 赞同：0
> 
> 时间：2012-10-29T21:09:34.723
> 
> 标签：python, class, object, methods

我的班级中有以下方法定义：

```
def show_values(self):
        for node in self.Nodes:
            nod = self.Nodes[node]
            print self.M.nod.value 
```

我收到以下错误

```
File "nfg.py", line 30, in show_values
    print self.M.nod.value
AttributeError: 'Model' object has no attribute 'nod' 
```

我当然想到达`self.M.(self.Nodes[node]).value`，但不知道如何。你能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T21:16:01.087

假设`self.Nodes[node]`是您要用于属性查找的字符串，请尝试以下操作：

```
def show_values(self):
    for node in self.Nodes:
        nod = self.Nodes[node]
        print getattr(self.M, nod).value 
```

注意`getattr(foo, 'bar')`相当于`foo.bar`。

如果`self.M`是字典或其他映射类型，并且您想要进行键查找，请使用以下命令：

```
def show_values(self):
    for node in self.Nodes:
        nod = self.Nodes[node]
        print self.M[nod].value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T21:13:13.053

是什么`M`？如果`nod`(ie, `self.nodes[node]`) 是一个包含 的属性名称的字符串`self.M`，您可以通过`M`的命名空间字典访问该属性`self.M.__dict__`。因此，要访问其`value`字段，请使用`self.M.__dict__[nod].value`.

如果这不是你想要做的，我建议你提供更多关于你的班级的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T21:12:35.757

你是说：

```
print self.M.nod.value 
```

改用这个：

```
print self.M.node.value 
```

# c# - Load Operation failed for query 'Login'. The remote server returned an error: NotFound

> ID：13129738
> 
> 赞同：0
> 
> 时间：2012-10-29T21:09:40.307
> 
> 标签：c#, silverlight, wcf-ria-services, silverlight-5.0, entity-framework-5

I'm working with Siverlight 5.0, RIA Services and Entity framework in my project.

When I deploy the application using VS, the application runs fine. However, when I use a web deployment project to publish the application, the first call to a RIA services service on the same system fails. An error similar to this is produced:

> Load Operation failed for query 'Login'. The remote server returned an error: NotFound

I guess, the last message is not enough to get the concrete error. Suggest me what to do to provide you more information. I'm getting this error for two days and I'm getting desperate.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:31:21.863

我要做的第一件事是[启用 WCF 跟踪](http://blogs.msdn.com/b/madhuponduru/archive/2006/05/18/601458.aspx)，然后[安装 Fiddler](http://www.fiddler2.com/fiddler2/)以获取有关通信的更多信息。Silverlight 的每个通信错误都会以 NotFound 的形式返回，因此就请求/响应本身而言，您唯一真正的希望是让 Fiddler 为您提供一些额外的见解。WCF 跟踪有望为您提供有关服务器端正在发生的事情的更多信息。最后，如果可能，在已发布的应用程序上放置一个调试器并插入一个断点来逐步解决问题。

这应该有望让您在服务器端和客户端都有更多的可见性，Fiddler 可以让您深入了解两者之间发生的通信。

这些类型的错误可能是使用 Silverlight 时最大的，或者至少是最常见的头痛。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:21:03.220

RIA 服务对此可能有点痛苦——它喜欢在不能做某事时返回 404 ......

您可能会发现您遇到了部署问题。RIA 服务从它有权访问的程序集动态创建端点。希望您知道哪个程序集加载失败 - 如果是，请检查您的部署目录以确保程序集在那里，并使用 Fuslogvw 检查是否存在程序集绑定问题。

# visual-studio-2010 - Coloring Shapes in Visual Basic 2010

> ID：13129739
> 
> 赞同：0
> 
> 时间：2012-10-29T21:09:41.663
> 
> 标签：visual-studio-2010, graphics

So I'm working on making a program that you can load an image and fill the shapes in the image 3 different colors(The program is for coloring real estate plots different colors. the colors are red, green, yellow.). I can load the image, save it and draw on the picture itself, but my question is; What is the code to fill the whole shape. The shapes are random. I understand there are .FillRectangle and .FillEllipse and what not, but i need one that's a paint bucket tool. Any help would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T17:41:03.700

我没有任何功能性 .NET 代码可供您使用，但我可以提供一些想法，因为我从事平面设计多年。

油漆桶工具的工作方式与“魔杖”工具类似。如果您熟悉 Adob​​e Photoshop 中的这些工具，那么您可能知道影响其行为的一些参数。（容差、连续、抗锯齿等）

当您单击图像中的给定像素时，这些工具中的任何一个都必须分析周围的像素以确定相似性。该工具的选项之一控制比较被视为“相似”或“不相似”的阈值。

想象一下，您正在使用黑白（1 位）图像。如果您单击一个白色像素，则可以简单快速地确定该点是否与任何其他白色像素相邻。您将级联比较，直到找不到更多白色像素，然后填充（或选择）该区域。

但是，现在考虑一个 8 位灰度图像。如果单击白色 (255) 像素，则可能有相邻的像素非常亮但不相同（例如值 250-254）。是否应该填充/选择这些相似但不相同的颜色应该基于相似度的阈值。

JPG 图像采用有损压缩算法，该算法会在其他相似的颜色上引入细微的变化。这会导致使用低容差值无法很好地填充或选择的“模糊”区域。您将希望允许与原始像素的偏差有限，以获得所需的效果。

# haskell - How to efficiently write a HashMap to a file?

> ID：13129740
> 
> 赞同：3
> 
> 时间：2012-10-29T21:09:54.840
> 
> 标签：haskell

```
import qualified Data.HashMap.Strict as M
import qualified Data.Text as T
import qualified Data.Text.IO as T.IO
import Text.FShow.RealFloat (fshow)

main = do  
  dataA <- T.IO.readFile "pathA"
  dataB <- T.IO.readFile "pathB"
  ...
  let hashmap = -- process dataA and dataB
      hashmapList = map (\(t1,t1Map) -> (t1, map (\(t2,float) -> (t2,fshow float)) (M.toList t1Map))) $ M.toList hashmap
      hashmapString = show hashmapList
  writeFile "path" hashmapString 
```

I would like to write hashmap (see the code above), which is of type `M.HashMap T.Text (M.HashMap T.Text Float)`, to a file. I turn hashmap into a List and besides use fshow to show Floats efficiently. Using `show`I then turn the List into a String and write it to a file.

Compiling with -O2 and profiling yields:

```
COST CENTRE          MODULE                %time %alloc

main.hashmapList.\.\ Main                   46.0   50.0
main.hashmapString   Main                   32.5   41.1
main.writeFile       Main                   11.9    0.2
main.hashmapList.\   Main                    3.4    2.7
... 
```

So especially turning the Map into a List and turning the List into a String takes a lot of time and space. How can hashmap be written to a file more efficiently?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-22T19:14:40.630

还不如正确回答这个问题。如果您有一个打开的文件句柄和一个将单个条目写入此文件的 IO 操作，那么您可以使用`mapM_`from`Data.Foldable`并在整个结构上运行该操作以将其运行到该文件中。如果你也需要钥匙，那么类似的东西`traverseWithKey`就是你的朋友。

# macos - Unable to run os x lion on vmware workstation on windows 7

> ID：13129741
> 
> 赞同：2
> 
> 时间：2012-10-29T21:09:56.577
> 
> 标签：macos, osx-lion, vmware

I have a strange problem with running Mac OS X Lion or Mountain Lion on VMWare Workstation on my windows 7 PC. Here is my hardware information, if it can help

```
Operating System      Microsoft Windows 7 Ultimate 6.1.7600
CPU Type              QuadCore Intel Core i7-2600, 3500 MHz (35 x 100)
Motherboard Name      Gigabyte GA-Z77X-UD5H
Motherboard Chipset   Intel Panther Point Z77, Intel Sandy Bridge
DIMM2: G Skill F3-12800CL8-4GBXM    4 GB DDR3-1600 DDR3 SDRAM
DIMM4: G Skill F3-12800CL8-4GBXM    4 GB DDR3-1600 DDR3 SDRAM
Video Adapter         ATI Radeon HD 4870 (RV770) 1024Mb
Disk Drive            ST3500418AS  (500 GB, 7200 RPM, SATA-II)
Disk Drive            ST500DM002-1BD142  (500 GB, 7200 RPM, SATA-III) 
```

I have tried about 7 images of Mac OS X Lion and Mountain Lion on VMWare Workstation 8 and 9, and also tried to change almost all settings, but I cannot run it in any way. It shows grey screen with notice "VMWARE" and it's all, it seems there is nothing to be run, even it doesn't show the apple logo. It makes me mad for over 10 days, and I have no idea what else to do with this. I think, that the problem is in my hardware, because same image with same vmware is working very well on my HP probook 4530s.

Please, if everyone can help me, I will be very grateful.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T21:13:15.017

The reason you are getting this error is because you can't run mac os x in vmware without using a side program to hack the source code of vmware and change stuff. It is also against the apple Terms of Service to run the mac os x operating system outside of an apple computer.

# javascript - In JavaScript/Ajax, how can you get the value of the root element in an XMLDocument?

> ID：13129743
> 
> 赞同：0
> 
> 时间：2012-10-29T21:10:00.370
> 
> 标签：javascript, xml, web-services, xml-parsing

This should be something easy to look up, but any related documentation I see fails to work in this case. Let's say you have a response coming back from a web service call with the following XML:

```
<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://tempuri.org/">Hello, World!  str=1</string> 
```

I just want to be able to extract the value - Hello, World! str=1 - without having to use string.replace() or anything else like that. If the XML were stored in a variable called response, and if the following code were called:

```
alert(response.documentElement.nodeValue) 
```

"undefined" is what shows up. What the heck? I just want to get a string or any sort of ordinary primitive out of a web method (I'm not using JSON or anything), but documentation on how to do this is being difficult to find. How do you do this? Thanks!

EDIT: Here's the code:

```
<WebMethod()> _
Public Function HelloWorld(ByVal str As Int32) As String
    Return "Hello, World!  str=" & str
End Function 
```

* * *

```
<html>
<body>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
<script type="text/JavaScript">
    <!--
        $.ajax({
            type: "POST",
            data: "&str=1",
            dataType: "xml",
            url: "<HTTP path and filename>.asmx/HelloWorld",
            timeout: 15000,
            cache:false,
            success: function (result) {
                alert(result);
            },
            error: function() {
                alert("bad");
            }
        });
    //-->
</script>
</body>
</html> 
```

It shows:

```
[object XMLDocument] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:07:29.680

两者都`response.documentElement.textContent`将为`response.documentElement.firstChild.nodeValue`您提供包含您提供的示例 XML 文档的文本内容。

# c# - 有没有办法忽略 2GB 文件上传的 maxRequestLength 限制？

> ID：13129746
> 
> 赞同：11
> 
> 时间：2012-10-29T21:10:15.930
> 
> 标签：c#, asp.net, iis, iis-7

这是我设置`maxRequestLength`为 2GB（最大值）的地方，它表示 ASP.NET 支持的最大请求大小：

```
<system.web>
    <httpRuntime maxRequestLength="2097151" executionTimeout="3600"/>
    ... 
```

在这里我将 设置`maxAllowedContentLength`为 4GB（最大值），它指定了 IIS 支持的请求中的最大内容长度

```
<system.webServer>
    <security>
        <requestFiltering>
            <requestLimits maxAllowedContentLength="4294967295"/>
        </requestFiltering>
    </security>
    ... 
```

我希望能够上传最大 4GB 的文件，但我受到该`maxRequestLength`领域的限制。

我注意到这个第三方上传工具 (http://www.element-it.com/onlinehelp/webconfig.html) 有一个`ignoreHttpRuntimeMaxRequestLength`属性，允许它上传最大 4GB 的文件。

有谁知道我是否可以`maxRequestLength`像其他上传工具一样忽略该值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T21:30:51.240

[考虑到MaxRequestLength](http://msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection.maxrequestlength.aspx)的 Type是[Int](http://msdn.microsoft.com/en-us/library/5kzh1b5w(v=vs.110).aspx)，目前无法正确解析高于[Int.Max](http://msdn.microsoft.com/en-us/library/system.int32.maxvalue(v=vs.85).aspx)的值。

我听说他们可能会增加 IIS8，但微软目前还没有具体的消息。我在 .Net 4.5 中看到的唯一方法是使用[HttpRequest.GetBufferlessInputStream](http://msdn.microsoft.com/en-us/library/hh195568.aspx)

> 获取可用于读取传入 HTTP 实体正文的 Stream 对象，可选择禁用 MaxRequestLength 属性中设置的请求长度限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-16T01:43:13.880

就我而言，这些是我需要应用的更改：

```
<system.web>
    <httpRuntime targetFramework="4.6.1" maxRequestLength="2147483647" />
</system.web>

<system.webServer>
     <serverRuntime uploadReadAheadSize="2147483647" />
     <security>
        <requestFiltering>
           <requestLimits maxAllowedContentLength="2147483647" />
        </requestFiltering>
     </security>
</system.webServer> 
```

为了添加 serverRuntime，请遵循[此问题的第一个答案中的说明](https://stackoverflow.com/questions/31394838/adding-serverruntime-tag-in-webconfig-cause-500-19-error)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-29T21:22:24.610

您应该能够通过像这样将相同的节点添加到应用程序的 web.config 中来覆盖 machine.config 中的设置。Microsoft 有一些关于[ASP.NET 配置文件层次结构和继承](http://msdn.microsoft.com/en-us/library/ms178685%28v=vs.100%29.aspx)的信息。

**注意：** Erik Philips 是正确的，最大尺寸`maxRequestLength`为 2,147,483,647 ( `Int32.MaxValue`)。这个答案是为了说明如何从应用程序的 web.config/ 中覆盖 machine.config（或任何 .config）中定义的设置

```
<configuration>
    ...
    <system.web>
        <httpRuntime maxRequestLength="2147483647"/>
    ...
    ...
    </system.web>
    ...
</configuration> 
```

但是，在这样做时，您可能还想增加超时时间，或者它可能会超时。

# sql - 如果一行尚不存在具有四个无数并发线程的行，我该如何插入？

> ID：13129747
> 
> 赞同：1
> 
> 时间：2012-10-29T21:10:33.753
> 
> 标签：sql, concurrency, db2, persistence, mybatis

我需要同时在四个无数线程中执行以下操作（嗯，可能更接近 2 个线程，但无论哪种方式......）：如果某某不存在，请插入它。

目前，该应用程序说：

```
select rows from the db
if row count == 0,
    do some stuff
    insert a row 
```

我有一种情况，它同时在 2 个单独的线程中运行。这样，两个线程可以（实际上到目前为止每次都这样做）在任一线程插入行之前检查现有行；因此我们有重复的行。这是不好的。

我能想到的所有算法都不尽如人意。

例如，如果我这样做：

```
open tx
insert a row
select rows
if row count > 2, rollback
else commit 
```

当事务使用`READ_COMMITTED`隔离时，一个线程将看不到另一个线程的插入行，并且可能出现重复。通过`READ_UNCOMMITTED`隔离，每个线程都可以看到另一个线程的行，并且两者都会回滚。我想如果我使用`MERGE`语句而不是插入然后选择（反之亦然），我会遇到同样的问题。

当上述算法同时执行时，是否有一种算法可以用来保证恰好插入 1 行？FWIW，我在 Spring 中使用 DB2、mybatis 和基于 xml 的 tx 管理，但如果可能的话，我很乐意从其他方面进行翻译。

在并发方面我是新手，所以如果这个问题揭示了您所知道的书籍或文章所弥补的无知，请分享。

编辑：

上面的插入语句是懒惰地授予用户一些东西，如果他们没有的话。在这种情况下，唯一性约束将是合适的。然而，在应用程序的其他地方，它是不合适的。:(

我很快就会使这个例子更具体一些，这样更容易理解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T21:16:44.410

我会创建一个唯一性约束并使用 ReadCommitted。这样，如果第二个线程尝试插入一个 dup，它会回滚，但初始插入有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T18:08:07.470

我们能找到的唯一解决方案是在可序列化事务中发出“如果不存在符合条件的记录则插入”命令。如果不存在满足某些条件的记录，则 SQL 本身可以是插入记录的任何东西（例如，MERGE 会起作用）。在这种情况下，一旦一个线程检查是否存在满足所选语句标准的行，则在 tx 完成之前，没有其他线程可以插入任何满足该标准的内容。为了性能，我们为合并操作打开了一个新的 tx，并在完成后立即提交。

我们使用 DB2 和 Oracle 成功地测试了这个解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T00:46:45.937

我们做类似的事情。因为我们不想锁定表，所以我们使用乐观并发和唯一性约束。

1.  由于并发性，第一个会烧伤你的条件是在两个单独的线程中两次插入相同的东西。其他人提到的解决方案是在您的架构中包含唯一性约束。如果您有一个列可以为空的复合约束，这可能会很棘手。看到这个激烈的论点：[http](http://bugs.mysql.com/bug.php?id=8173) ://bugs.mysql.com/bug.php?id=8173所以你可能需要一个额外的列用于唯一性约束。

2.  第二个可能会让您感到痛苦的情况是您需要对数据进行更新（例如递增一或某事）。在这种情况下，我们使用 hibernate 支持的乐观并发及其行版本控制。查看[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/transactions.html#transactions-optimistic](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/transactions.html#transactions-optimistic)。不确定mybatis是否有类似的东西，但你可以手动编写相同的东西。如果你的线程确实有冲突，一个会失败。对我们来说，我们都需要成功，所以如果发生冲突，失败的线程将重试操作（通过重新读取、重新处理和重新写入数据）。在这种情况下，我们做一些类似于以太网工作方式（或任何其他基于冲突的协议/操作）的事情，即尝试，如果失败，以某种方式退避并重试。

HTH。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T01:18:32.390

我建议尝试

```
MERGE 
```

SQL 语句。它能够插入在单个语句中不存在的行。

# ruby-on-rails - How can I allow multiple Date formats in Ruby on Rails for csv file import?

> ID：13129752
> 
> 赞同：1
> 
> 时间：2012-10-29T21:10:58.433
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

I have a birthday column in my csv that should allow user to input **multiple date formats** and then the file be imported via web page. At the moment the column is only set to one type of format; `:birthday => (Date.strptime(row[2], "%mm/%dd/%YY") rescue nil),`. Is it possible to have multiple date formats? Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:24:09.483

请尝试[`Date.parse`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/Date.html#method-c-parse)：

> 解析给定的日期和时间表示，并创建一个日期对象。
> 
> 如果可选的第二个参数为真，并且检测到的年份在“00”到“99”的范围内，则将年份视为 2 位数字形式并使其完整。
> 
> 例如：
> 
> ```
> Date.parse('2001-02-03')          #=> #<Date: 2001-02-03 ...>
> Date.parse('20010203')            #=> #<Date: 2001-02-03 ...>
> Date.parse('3rd Feb 2001')        #=> #<Date: 2001-02-03 ...> 
> ```

如果您需要更多控制，您可以随时定义自己的解析方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:24:55.350

Rails 的 DateTime 尝试自动检测格式。它将检测以下格式：`mm/dd/yy`或`dd-mm-yy`或`yyyy-mm-dd`或`yyyy/mm/dd`。

否则，您必须构建自己的方法，尝试使用文件中存在的格式进行不同的解析。

# android - Unable to instantiate activity ComponentInfo- issue with facebook integration into personal app

> ID：13129754
> 
> 赞同：0
> 
> 时间：2012-10-29T21:11:08.317
> 
> 标签：android, facebook

I am trying to integrate Facebook in my app. I want the user of my app to have the feature of sharing whats on his mind on his facebook wall. attached here is my code along with the log file. I have declared everything in my manifest as well. I dont know why am i getting java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.integration/com.integration.FBSharing}: java.lang.NullPointerException

10-29 14:53:58.344: E/AndroidRuntime(6459): FATAL EXCEPTION: main 10-29 14:53:58.344: E/AndroidRuntime(6459): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.integration/com.integration.FBSharing}: java.lang.NullPointerException 10-29 14:53:58.344: E/AndroidRuntime(6459): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1891) 10-29 14:53:58.344: E/AndroidRuntime(6459): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992) 10-29 14:53:58.344: E/AndroidRuntime(6459): at android.app.ActivityThread.access$600(ActivityThread.java:127) 10-29 14:53:58.344: E/AndroidRuntime(6459): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158) 10-29 14:53:58.344: E/AndroidRuntime(6459): at android.os.Handler.dispatchMessage(Handler.java:99) 10-29 14:53:58.344: E/AndroidRuntime(6459): at android.os.Looper.loop(Looper.java:137) 10-29 14:53:58.344: E/AndroidRuntime(6459): at android.app.ActivityThread.main(ActivityThread.java:4441) 10-29 14:53:58.344: E/AndroidRuntime(6459): at java.lang.reflect.Method.invokeNative(Native Method) 10-29 14:53:58.344: E/AndroidRuntime(6459): at java.lang.reflect.Method.invoke(Method.java:511) 10-29 14:53:58.344: E/AndroidRuntime(6459): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823) 10-29 14:53:58.344: E/AndroidRuntime(6459): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590) 10-29 14:53:58.344: E/AndroidRuntime(6459): at dalvik.system.NativeStart.main(Native Method) 10-29 14:53:58.344: E/AndroidRuntime(6459): Caused by: java.lang.NullPointerException 10-29 14:53:58.344: E/AndroidRuntime(6459): at android.content.ContextWrapper.getResources(ContextWrapper.java:81) 10-29 14:53:58.344: E/AndroidRuntime(6459): at android.content.Context.getString(Context.java:286) 10-29 14:53:58.344: E/AndroidRuntime(6459): at com.integration.FBSharing.(FBSharing.java:34) 10-29 14:53:58.344: E/AndroidRuntime(6459): at java.lang.Class.newInstanceImpl(Native Method) 10-29 14:53:58.344: E/AndroidRuntime(6459): at java.lang.Class.newInstance(Class.java:1319) 10-29 14:53:58.344: E/AndroidRuntime(6459): at android.app.Instrumentation.newActivity(Instrumentation.java:1023) 10-29 14:53:58.344: E/AndroidRuntime(6459): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1882)

public class FBSharing extends Activity {

```
// Your Facebook APP ID
 String APP_ID = getString(R.string.APP_ID);

// Instance of Facebook Class
private Facebook facebook = new Facebook(APP_ID);
private AsyncFacebookRunner mAsyncRunner;

private SharedPreferences mPrefs;

// Buttons
Button btnFbLogin;
Button btnFbGetProfile;
Button btnPostToWall;
Button btnShowAccessTokens;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fblogin);

    btnFbLogin = (Button) findViewById(R.id.btn_fblogin);
    btnFbGetProfile = (Button) findViewById(R.id.btn_get_profile);
    btnPostToWall = (Button) findViewById(R.id.btn_fb_post_to_wall);
    btnShowAccessTokens = (Button) findViewById(R.id.btn_show_access_tokens);

    mAsyncRunner = new AsyncFacebookRunner(facebook);

    /**
     * Login button Click event
     * */
    btnFbLogin.setOnClickListener(new View.OnClickListener() 
    {

        public void onClick(View v) 
        {
            Log.d("Image Button", "button Clicked");
            loginToFacebook();
        }
    });

    /**
     * Getting facebook Profile info
     * */
    btnFbGetProfile.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            getProfileInformation();
        }
    });

    /**
     * Posting to Facebook Wall
     * */
    btnPostToWall.setOnClickListener(new View.OnClickListener() 
    {

        public void onClick(View v) 
        {
            postToWall();
        }
    });

    /**
     * Showing Access Tokens
     * */
    btnShowAccessTokens.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            showAccessTokens();
        }
    });

}

/**
 * Function to login into facebook
 * */
public void loginToFacebook() {

    mPrefs = getPreferences(MODE_PRIVATE);
    String access_token = mPrefs.getString("access_token", null);
    long expires = mPrefs.getLong("access_expires", 0);

    if (access_token != null) {
        facebook.setAccessToken(access_token);

        btnFbLogin.setVisibility(View.INVISIBLE);

        Log.d("FB Sessions", "" + facebook.isSessionValid());
    }

    if (expires != 0) {
        facebook.setAccessExpires(expires);
    }

    if (!facebook.isSessionValid()) {
        facebook.authorize(this,
                new String[] { "email", "publish_stream" },
                new DialogListener() {

                    public void onCancel() {
                        // Function to handle cancel event
                    }

                    public void onComplete(Bundle values) {
                        // Function to handle complete event
                        // Edit Preferences and update facebook acess_token
                        SharedPreferences.Editor editor = mPrefs.edit();
                        editor.putString("access_token",
                                facebook.getAccessToken());
                        editor.putLong("access_expires",
                                facebook.getAccessExpires());
                        editor.commit();

                        // Making Login button invisible
                        btnFbLogin.setVisibility(View.INVISIBLE);

                    }

                    public void onError(DialogError error) {
                        // Function to handle error

                    }

                    public void onFacebookError(FacebookError fberror) {
                        // Function to handle Facebook errors

                    }

                });
    }
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    facebook.authorizeCallback(requestCode, resultCode, data);
}

/**
 * Get Profile information by making request to Facebook Graph API
 * */
public void getProfileInformation()
{
    mAsyncRunner.request("me", new RequestListener() 
    {
        public void onComplete(String response, Object state) 
        {
            Log.d("Profile", response);
            String json = response;
            try 
            {
                // Facebook Profile JSON data
                JSONObject profile = new JSONObject(json);

                // getting name of the user
                final String name = profile.getString("name");

                // getting email of the user
                final String email = profile.getString("email");

                runOnUiThread(new Runnable() 
                {

                    public void run() 
                    {
                        Toast.makeText(getApplicationContext(), "Name: " + name + "\nEmail: " + email, Toast.LENGTH_LONG).show();
                    }

                });//end of runnable

            } //end of try
            catch (JSONException e) 
            {
                e.printStackTrace();
            }
        }// end of onComplete

        public void onIOException(IOException e, Object state) 
        {
        }

        public void onFileNotFoundException(FileNotFoundException e,
                Object state) 
        {
        }

        public void onMalformedURLException(MalformedURLException e,
                Object state) 
        {
        }

        public void onFacebookError(FacebookError e, Object state) 
        {
        }
    });// end of request
}// end of getProfile

/**
 * Function to post to facebook wall
 * */
public void postToWall() {
    // post on user's wall.
    Bundle params = new Bundle();
    params.putString("name","ICE App");
    params.putString("caption", "Bestbuy Deal for SONY Action Cam");
    params.putString("description", "Checkout SONY ICE For exciting deals!!");
    params.putString("link", "http://www.sony.com");
    params.putString("picture", "R.drawable.sony");

    facebook.dialog(this, "feed",params, new DialogListener() {

        public void onFacebookError(FacebookError e) {
        }

        public void onError(DialogError e) {
        }

        public void onComplete(Bundle values) {
        }

        public void onCancel() {
        }
    });

}

/**
 * Function to show Access Tokens
 * */
public void showAccessTokens() {
    String access_token = facebook.getAccessToken();

    Toast.makeText(getApplicationContext(),
            "Access Token: " + access_token, Toast.LENGTH_LONG).show();
}

/**
 * Function to Logout user from Facebook
 * */
public void logoutFromFacebook() {
    mAsyncRunner.logout(this, new RequestListener() {
        public void onComplete(String response, Object state) {
            Log.d("Logout from Facebook", response);
            if (Boolean.parseBoolean(response) == true) {
                runOnUiThread(new Runnable() {

                    public void run() {
                        // make Login button visible
                        btnFbLogin.setVisibility(View.VISIBLE);

                        // making all remaining buttons invisible

                        btnPostToWall.setVisibility(View.INVISIBLE);

                    }

                });

            }
        }

        public void onIOException(IOException e, Object state) {
        }

        public void onFileNotFoundException(FileNotFoundException e,
                Object state) {
        }

        public void onMalformedURLException(MalformedURLException e,
                Object state) {
        }

        public void onFacebookError(FacebookError e, Object state) {
        }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T03:42:53.177

如果您阅读堆栈跟踪，它会说 FBSharing.java:34 存在空指针异常

> 10-29 14:53:58.344：E/AndroidRuntime(6459)：在 com.integration.FBSharing.(FBSharing.java:34) 10-29

如果我正确计算了您的代码行数，则此行会导致您的应用程序崩溃：

`btnFbLogin.setOnClickListener(new View.OnClickListener()`

这意味着`btnFbLogin`为空。检查按钮的 id 并确保您确实获得了对按钮的引用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-01-12T16:49:06.410

确保在函数中声明这些`onCreate()`：

```
// Buttons
Button btnFbLogin;
Button btnFbGetProfile;
Button btnPostToWall;
Button btnShowAccessTokens; 
```

我有同样的问题。我修好了它喜欢这个。

# python - python loops and string manipulation

> ID：13129755
> 
> 赞同：-4
> 
> 时间：2012-10-29T21:11:16.037
> 
> 标签：python, string, list, loops

The function is called def expand_fmla (original)

The input variable to this function, original, is a string with a specific format: the first two positions in original have the symbols `*` or `+`, hence there are 4 possibilities for the first two positions of original: `++, **, +*` and `*+`. The subsequent positions have digits, at least 3 of them (0 to 9), possibly including repetition.

This function should return a formula which has the same digits and in the same order as in the original formula, and in between the digits the two operation symbols are alternatingly included.

For example:

```
expand_fmla('++123') should return '1+2+3'

expand_fmla('+*1234') should return '1+2*3+4'

expand_fmla('*+123456') should return '1*2+3*4+5*6' 
```

How can I do this, I do not understand???

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:18:36.573

这应该这样做：

```
def expand_fmla(original):
    answer = []
    ops = original[:2]
    nums = original[2:]
    for i,num in enumerate(nums):
        answer.extend([num, ops[i%2]])
    return ''.join(answer[:-1])

In [119]: expand_fmla('+*1234')
Out[119]: '1+2*3+4'

In [120]: expand_fmla('*+123456')
Out[120]: '1*2+3*4+5*6'

In [121]: expand_fmla('++123')
Out[121]: '1+2+3' 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:24:27.660

使用一些`itertools`食谱，`itertools.cycle()`在这里特别有用：

```
from itertools import *
def func(x):
    op=x[:2]                             # operators
    opn=x[2:]                            # operands
    cycl=cycle(op)                       # create a cycle iterator of operators

    slice_cycl=islice(cycl,len(opn)-1)   # the no. of times operators are needed
                                         # is 1 less than no. of operands, so
                                         # use islice() to slice the iterator

    # iterate over the two iterables opn and          
    # slice_cycl simultanesouly using
    # izip_longest , and as the length of slice_cycl 
    # is 1 less than len(opn), so we need to use a fillvalue=""
    # for the last pair of items

    lis=[(x,y) for x,y in izip_longest(opn,slice_cycl,fillvalue="")]   

    return "".join(chain(*lis))

print func("++123")
print func("+*123")
print func("+*123456")
print func("*+123456") 
```

**输出：**

```
1+2+3
1+2*3
1+2*3+4*5+6
1*2+3*4+5*6 
```

# jquery - 如何获取字段集图例的值并将该值传递到隐藏字段

> ID：13129765
> 
> 赞同：2
> 
> 时间：2012-10-29T21:11:44.213
> 
> 标签：jquery, variables, hidden-field, legend

我需要一种在包含该字段集图例值的字段集中添加隐藏字段的方法。

我能够在每个字段集图例之后添加输入字段，但我无法将字段集的值传递给隐藏字段的值。

这是我到目前为止所拥有的：

```
<script type="text/javascript">
var theLegend = $('legend');  
    $('<input type="hidden"name="hiddenList[]" value="' + theLegend.val() + '">').insertAfter('legend');
</script> 
```

总的来说，我想要实现的是让字段集图例的值传递到数据库中。我需要隐藏字段位于它们各自的字段集中。表单是使用 CMS 中的表单构建器构建的，我无法“破解”表单构建器的代码，所以我需要一种使用 jquery/javascript 的方法，而且我几乎是 jquery 新手。 .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T21:16:10.273

我建议如下：

```
$('legend').each(
    function(i,e){
        var that = $(e),
            parent = that.closest('fieldset'),
            text = that.text();
        $('<input />', {'type' : 'hidden', 'name' : 'hiddenList[]', 'value' : text})
            .appendTo(parent);
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/gM3ps/)。

要查看输出，请右键单击并在`legend`文本上“检查元素”。

您遇到的问题之一是您`val()`用于检索元素的*文本*（只有`input`, 和`textarea`元素有`value`/ `val()`），而`text()`在这种情况下是您想要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T21:19:29.497

选择图例后，使用 .text() 方法而不是 .val()

`theLegend.text()`

# java - "First sentence should end with a period."

> ID：13129766
> 
> 赞同：21
> 
> 时间：2012-10-29T21:11:49.843
> 
> 标签：java, checkstyle

Java checkstyle confuses and baffles me.

```
package pmain;

/**
 * Some text here.
 */

public class Main {

} 
```

This is literally all of the code I have. Checkstyle displays a "First sentence should end with a period." at the "/**".

Why does CheckStyle produce this warning?

Could the checkstyle config I'm required to use be broken? Am I doing something wrong? Is "Some text here" not the first sentence? Is "." not a period?

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-29T07:28:58.473

第一句话应该以点结尾。

```
/**
 *An abstract class that represents an algorithm.
 *
 * @author zhangtj
 *
 * @version 1.0
*/ 
```

会通过的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-29T21:21:27.670

刚刚在我的机器上进行了测试，实际上无法重现：我没有在句末收到带点的警告。但是一旦我删除它（并再次运行 checkstyle），规则就会正确触发，并且我会收到警告`/**`。

评论后的空白行没有任何区别。

仔细检查该点是否真的是一个点，而不是“看起来”像一个点的其他字符。并仔细检查您在更改文件后是否真的重新运行了 checkstyle。它不会自动执行检查。

* * *

也许有人玩过 checkstyle 设置。实际上有两个属性控制这个规则：`checkFirstSentence`一个是真或假，`endOfSentenceFormat`一个是正则表达式，应该匹配句点。但是，如果规则集重新定义了该属性... ;)

**延伸阅读**

*   [http://checkstyle.sourceforge.net/config_javadoc.html](http://checkstyle.sourceforge.net/config_javadoc.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-04-27T16:12:03.157

这让我很生气。要删除此添加：

...

```
<module name="JavadocStyle">
   <property name="checkFirstSentence" value="false"/>
</module> 
```

...

而且，对我来说，我**完全**删除了该`SummaryJavadoc`模块。

在您的 checkstyle.xml 中关闭此检查。

请参阅： [http](http://checkstyle.sourceforge.net/config_javadoc.html#JavadocStyle) ://checkstyle.sourceforge.net/config_javadoc.html#JavadocStyle & [http://checkstyle.sourceforge.net/config_javadoc.html#SummaryJavadoc](http://checkstyle.sourceforge.net/config_javadoc.html#SummaryJavadoc)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-05T17:30:28.163

注释或“。”结尾后的空格可能会导致变薄。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-13T12:33:58.120

您的问题与`.`行尾的缺失有关。要解决此问题，您需要覆盖该`period`属性。它的默认值是`.`字符。

根据最新的[Checkstyle 文档](https://checkstyle.sourceforge.io/config_javadoc.html#SummaryJavadoc)，这是摆脱“<code>第一句应该以句点结尾”的推荐配置。警告：

```
<module name="SummaryJavadoc">
    <property name="forbiddenSummaryFragments" value="^@return the *|^This method returns |^A [{]@code [a-zA-Z0-9]+[}]( is a )"/>
    <property name="period" value=""/>
</module> 
```

**如果上述解决方案不起作用，您可以使用以下替代解决方案：**

覆盖`endOfSentenceFormat`属性的默认值。

默认值：

```
([.?!:][ \t\n\r\f&lt;])|([.?!:]$) 
```

新值，接受行尾的任何数字和字母：

```
([.?!:][ \t\n\r\f&lt;])|([\d\w.?!:]$) 
```

完成 Checksytle 配置：

```
<module name="JavadocStyle">
    <property name="scope" value="public"/>
    <property name="checkEmptyJavadoc" value="true"/>
    <property name="tokens" value="ANNOTATION_DEF, ANNOTATION_FIELD_DEF, CLASS_DEF, CTOR_DEF, ENUM_DEF, INTERFACE_DEF, METHOD_DEF, PACKAGE_DEF, VARIABLE_DEF"/>
    <property name="endOfSentenceFormat" value="([.?!:][ \t\n\r\f&lt;])|([\d\w.?!:]$)"/>
</module> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-11T08:23:02.053

我使用 2 行来避免这个警告。例如：

```
/**
 * Let's call this as the first sentence,
 * here the second one.
*/ 
```

# javascript - JQuery 自动完成 - Http 基本身份验证

> ID：13129773
> 
> 赞同：1
> 
> 时间：2012-10-29T21:12:29.580
> 
> 标签：javascript, jquery, authentication, cookies

`.autocomplete`在进行呼叫时，传递浏览器当前存储在会话 cookie 中的 BASIC 身份验证凭据的最简单方法是什么？我知道我可以使用带有用户名和密码的 ajax 方法，但我不知道如何从浏览器中检索所述信息。

本质上，用户使用 apache 的 htpswd/htaccess 功能登录，我知道浏览器必须将信息存储在 cookie 中。我的问题是如何检索要在 AJAX 调用中使用的所述信息，以便它不返回 410 响应？

我当前的代码：

```
$( ".item" ).autocomplete({
                        source: function(request, response){$.get("https://www.mydomain.com/blah/bling/blat/", 
                        function(data){response(JSON.parse(data));});},
                        minLength: 2
                    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:57:06.593

身份验证凭据不存储在 cookie 中。我不认为 JavaScript 可以直接访问它。但我认为没有必要。如果需要凭据，浏览器将自动发送它们，并在必要时提示用户。有关更多详细信息，请参见[此处。](http://forums.devshed.com/javascript-development-115/access-http-authentication-credentials-via-javascript-696405.html)

# xcode - How to run mac application automatically in fullscreen

> ID：13129777
> 
> 赞同：3
> 
> 时间：2012-10-29T21:12:35.787
> 
> 标签：xcode, macos, webview, fullscreen

Hi I like to run an OSx View with an WebView init in fullscreen (so big as the current screen is not the Lion fullscreen mode), is there any code for that?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T13:57:32.557

抱歉，这有点晚了，但最简单的方法是：

```
[yourWindow toggleFullScreen:@""]; 
```

只要把它放在你的`- (void)applicationDidFinishLaunching`，它就会自动进入全屏。希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T21:19:06.563

做这个：

```
int width = [[NSScreen mainScreen] frame].size.width;
int height = [[NSScreen mainScreen] frame].size.height;

[yourWindow setFrame:NSMakeRect(0, 0, width, height) display:YES]; 
```

int`width`并将`height`获取您的屏幕宽度和高度，然后使用这些 int 设置窗口的框架（具有您的 web 视图的窗口）。
我希望这就是你要找的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-19T19:07:22.317

Xcode 8，OSX 10.10，我能找到的唯一工作代码如下，放在 applicationDidFinishLaunching 中：

```
[[[[NSApplication sharedApplication] windows] lastObject] toggleFullScreen:nil]; 
```

# regex - Apache Rewrite for Domain Canonicalization & HTTPS

> ID：13129781
> 
> 赞同：0
> 
> 时间：2012-10-29T21:12:55.660
> 
> 标签：regex, apache, mod-rewrite

I have tried to piece together some suggestions found both here and elsewhere on using mod_rewrite to ensure `www.` as well as `https://` on a site. I've come up with the following solution, but am curious if there is a more concise way to achieve the same goal.

```
<VirtualHost *:80>

  RewriteEngine On
  RewriteCond %{HTTPS} off
  RewriteCond %{HTTP_HOST} ^domain.com$ [OR]
  RewriteCond %{HTTP_HOST} ^www.domain.com$
  RewriteRule ^(.*)$ https://www.domain.com%{REQUEST_URI} [R=301,L]

</VirtualHost>

<VirtualHost *:443>

  RewriteEngine On
  RewriteCond %{HTTPS} on
  RewriteCond %{HTTP_HOST} ^domain.com$
  RewriteRule ^(.*)$ https://www.domain.com%{REQUEST_URI} [R=301,L]

</VirtualHost> 
```

Note that in my present use case I'm only trying to change the following cases:

*   `http://domain.com` -> `https://www.domain.com`
*   `http://www.domain.com` -> `https://www.domain.com`
*   `https://domain.com` -> `https://www.domain.com`

There are other subdomains that I do not want to redirect to `https://`, so I am only trying to match requests for the raw domain and the `www` subdomain. Any insight would be much appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:51:16.617

一体：

```
RewriteEngine On
RewriteCond %{HTTPS}_%{HTTP_HOST} ^(.*_domain\.com|off_www\.domain\.com)$ [NC]
RewriteRule ^(.*)$ https://www.domain.com/$1 [R=301,L] 
```

# facebook - When fetching friends and friends of friends via FQL, how to ignore private friends list

> ID：13129782
> 
> 赞同：1
> 
> 时间：2012-10-29T21:13:02.007
> 
> 标签：facebook, facebook-fql

Here my FQL request :

> $fql_url = 'https://graph.facebook.com/' . 'fql?q={"friends":"SELECT+uid,third_party_id,name,sex,pic,work+FROM+user+WHERE+is_app_user+AND+uid+IN(SELECT+uid2+FROM+friend+WHERE+uid1=me())",' . '"friends+of+friends":"SELECT+uid,name,sex,pic,work+FROM+user+WHERE+is_app_user+AND+uid+IN(SELECT+uid2+FROM+friend+WHERE+uid1+IN(SELECT+uid+FROM+user+WHERE+is_app_user+AND+uid+IN(SELECT+uid2+FROM+friend+WHERE+uid1=me())))"}' . '&' . $access_token;

When all user have a "public" friends list, all is fine. But if someone's friends list is set to "private" then it crash.

> { "error": { "message": "Can't lookup all friends of 593606920 due to user's privacy settings.", "type": "NoIndexFunctionException", "code": 604 } }

How can I "ignore" private friends list and only take all other ?

# json - 按名称获取 JSON 对象

> ID：13129787
> 
> 赞同：0
> 
> 时间：2012-10-29T21:13:20.937
> 
> 标签：json

我有一个具有以下结构的 json 对象：

```
[
{
"filters": [
    {
        "name": "category",
        "list": [
            {
                "category-abc": {
                    "title": "abc",
                    "number": "2"
                }
            },
            {
                "category-def": {
                    "title": "def",
                    "number": "1"
                }
            }
        ]
    },
    {
        "name": "topic",
        "list": [
            {
                "topic-abc": {
                    "title": "abc",
                    "number": "6"
                }
            },
            {
                "topic-def": {
                    "title": "def",
                    "number": "5"
                }
            }
        ]
    },
}
] 
```

名单实际上要长得多，有很多名字 | 列出对。我希望在遍历列表名称数组时获取每个列表，但不想每次都遍历该列表，所以我想按名称获取列表。

像这样的东西：

```
filters['topic'][0].title 
```

但这不起作用，因为那里有“名称”键。没有条件有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:24:37.713

我认为这就是你想要的（它假设`data`包含原始 JSON 对象）：

```
var filters = [];
foreach (var subitem in data[0].filters) {
  filters[subitem.name] = subitem.list;
} 
```

# ruby - Using Compass from Ruby (not shell)

> ID：13129789
> 
> 赞同：10
> 
> 时间：2012-10-29T21:13:36.157
> 
> 标签：ruby, sass, compass-sass

I am building a script in Ruby where I would like to compile a single SCSS file using Compass. I am trying to make this as simple as possible, and would like to avoid using a config.rb file. I just want to set a couple settings via straight Ruby and tell Compass to compile a single SCSS file into a CSS file.

I know that this has to be possible but I have not been able to find any decent documentation on how to do it. Any help would be appreciated.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T12:55:21.017

你是对的，实际上并没有任何关于如何在 Ruby 中使用 Compass 的全面文档。这很不幸，但我们不要让文档等小细节阻止我们！

# 第一次尝试

当我想做同样的事情时，我只是浏览了 Compass[源代码](https://github.com/Compass/compass/tree/stable/cli/lib/compass)，并能够将这个小 Ruby 脚本放在一起。乍一看，它似乎可以解决问题：

```
require 'compass'
require 'sass/plugin'

compiler = Compass::Compiler.new(
    # Compass working directory
    '.',
    # Input directory
    'styles/scss',
    # Output directory
    'styles/css',
    # Compass options
    { :style => :compressed }
)

compiler.compile('test.scss', 'test.css') 
```

但显然 Compass 有一堆默认配置选项，在直接调用编译器构造函数时不会自动包含这些选项（其中 SASS`load_path`就是其中之一）。在尝试导入 Compass 函数和 mixin 时，这可能会导致错误，例如：

> 错误：找不到要导入的文件或无法读取：compass/css3

# 指南针 <1.0.0（又名“旧方式”）

以下是如何在*不*覆盖这些默认值的情况下调用编译器：

```
require 'compass'

Compass.add_configuration(
    {
        :project_path => '.',
        :sass_path => 'styles/scss',
        :css_path => 'styles/css'
    },
    'custom' # A name for the configuration, can be anything you want
)
Compass.compiler.compile('test.scss', 'test.css') 
```

但是，从 Compass 版本 1.0.0 开始，`Compass.compiler`已弃用，支持 . `Compass.sass_compiler`，导致...

# 指南针 >=1.0.0（又名“新方式”）

感谢[@philipp](https://stackoverflow.com/users/687901/philipp)发现[如何使用新 API](https://stackoverflow.com/questions/25399962/compass-from-ruby-sasscompiler-not-found)，我们可以再次更新此代码段以使用`Compass.sass_compiler`：

```
require 'compass'
require 'compass/sass_compiler'

Compass.add_configuration(
    {
        :project_path => '.',
        :sass_path => 'styles/scss',
        :css_path => 'styles/css'
    },
    'custom' # A name for the configuration, can be anything you want
)

compiler = Compass.sass_compiler({
  :only_sass_files => [
    'styles/scss/test.scss'
  ]
})

compiler.compile! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:46:08.840

只需从命令行调用编译方法。您可以在那里指定每个选项。要查看所有选项，请运行`compass help compile`.

下面是一个例子。它将在与 test.scss 文件相同的目录中输出编译后的 css 文件。

```
file_name = "absolute/path/to/test.scss"
system "compass compile #{file_name} --sass-dir . --css-dir ." 
```

您可以根据需要指定和插入任意数量的选项。还要检查这个是否在 ruby​​ 中运行命令：

[在 Ruby 脚本中运行命令行命令](https://stackoverflow.com/questions/3159945/running-command-line-commands-within-ruby-script)

# immutability - 反序列化情况下不可变数据的标识

> ID：13129794
> 
> 赞同：0
> 
> 时间：2012-10-29T21:14:05.907
> 
> 标签：immutability, identity, deep-copy

如果对象是不可变的，那么制作对象的深层副本非常容易且高效——只需复制该对象的内存指针即可。

进行深度相等检查也非常简单有效 - 只需比较指针即可。

但是**如果数据来自外部世界**并且我们需要检查它的身份会发生什么？

考虑以下示例：

*   应用程序从数据库中查询 Post 的数据，将其反序列化为不可变的 Post 对象（模型）并将其缓存在内存中。
*   一段时间后，应用程序再次查询相同的数据，并将其反序列化为不可变的 Post 对象。
*   现在，我们如何检查 Post 是否已更改？我们不能只比较不可变对象的引用来检查身份。引用会有所不同（因为我们对数据进行了两次反序列化），但数据本身可能仍然相同。

如何处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:01:29.453

两种可能可行的方法，或者可能为您提供更多关于未来方法的想法：

1.  保留一个或多个已知不可变实例的字典，并查找您构造的实例以查看它们是否在字典中；如果是这样，将字典实例替换为新读取的实例。请注意，除非每次构造对象时都使用字典，否则引用 *equality* 可用于加速比较，但引用 *inequality* 不能。然而，让对象缓存它们的哈希码可能很有用，因为不相等的项目*通常*具有不同的哈希值。还要注意，除非您使用某种“WeakDictionary”，否则您必须确保定期清除字典（实际上，这意味着除非您有 WeakDictionary，否则很难清除未使用的项目至少不偶尔清理用过的）。
2.  可以给每个对象一个创建时间指示器（可能是一个静态的 `Interlocked.Increment` 计数器）以及一个指向已知相等的最早（第一个创建的）对象的链接。比较对象时，请遵循“旧的已知相等”对象的链。如果链到达同一个对象，则原始对象相等。否则，如果对象的哈希码匹配，则测试它们的值是否相等。如果它们相等，请更新较新的链接以指向较旧的链接。如果任一起始对象具有多个链接的链，则 `Interlocked.CompareExchange` 其链接直接指向最早的已知相等对象。使用这种方法，值相等的对象之间的比较将导致它们形成派系；集团内价值相等的对象之间的比较会很快，不同派系中等值对象之间的比较，将两个派系合二为一。另请注意，可能需要让节点的消费者持有包装对象，而不是直接链接到节点本身；如果这样做了，一个集团中所有节点的包装器可以共享对同一内部数据项的引用。

如果有合适的字典类型可用，方法 #1 可能是一个不错的方法，但方法 #2 也可能具有一些相当大的优势。＃2最大的烦恼是它为对象访问添加了额外的间接层。尽管如此，能够让对象迅速将自己整合成派系可能是一个主要的优势。

# javascript - 错误：ray.intersectScene 不是函数

> ID：13129795
> 
> 赞同：4
> 
> 时间：2012-10-29T21:14:08.857
> 
> 标签：javascript, three.js, webgl

我一直在将`sim.js`代码及其对象用于一个简单的 WebGL 项目。当我需要使用该`frustum`课程时（请参阅[此问题](https://stackoverflow.com/questions/13125415/how-can-i-get-my-mesh-has-gone-off-screen)），我必须更新我的`three.js`. 一件事坏了：

```
TypeError: ray.intersectScene is not a function                   sim.js(line 357)
     var intersects = ray.intersectScene( this.scene ); 
```

我在 git 上查看了源代码，该函数在`ray.js`. 如何更新此代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T21:25:37.197

请参阅有关迁移的three.js Wiki：[https ://github.com/mrdoob/three.js/wiki/Migration](https://github.com/mrdoob/three.js/wiki/Migration)

`Ray`从中删除 intersectScene 改为使用`Raycaster.intersectObjects( array )`。

三.js r.61

# cakephp - 我需要使用 CakePHP 中的模型保存的 stripslash

> ID：13129798
> 
> 赞同：0
> 
> 时间：2012-10-29T21:14:15.380
> 
> 标签：cakephp

自从我使用 CakePHP 框架以来，这一直困扰着我很长一段时间。我是否需要清理或删除我最初通过模型保存的斜线内容？

谢谢

问候加布里埃尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:19:45.877

默认情况下，它会保护您免受 SQL 注入，但对于 XSS 保护等，您需要启用[**Security 组件**](http://book.cakephp.org/2.0/en/core-utility-libraries/security.html)或使用 Sanitize 库。正如书中所说：

> 如果您使用 CakePHP 的 ORM 方法（例如 find() 和 save()）和适当的数组表示法（即 array('field' => $value)）而不是原始 SQL，CakePHP 已经保护您免受 SQL 注入。对于 XSS 的清理，通常最好将原始 HTML 保存在数据库中而不进行修改，并在输出/显示时清理。

您可能会发现本书的[**这一页**](http://book.cakephp.org/2.0/en/core-utility-libraries/sanitize.html)特别有趣，可以进一步阅读。

# actionscript-3 - 列表组件以调出 InputText 框

> ID：13129799
> 
> 赞同：1
> 
> 时间：2012-10-29T21:14:17.813
> 
> 标签：actionscript-3, flash, list, multiplayer, textinput

我正在创建一个列表组件，每个标签上都有不同的数字，范围从 1 到 10。当单击一个数字时，我需要它一个接一个地显示那么多输入文本框。

这几乎是一个多人游戏，您选择要玩多少玩家，然后输入每个名字..我被卡住了，这太荒谬了..如果有人有解决方案或不同的想法，请帮助我，非常感谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T04:58:17.537

有很多方法可以做到这一点。

**Flash 专业方法**

在 Flash Professional 的艺术板上创作您的观点。

包括一个列表控件，以及您要显示的文本框，例如：

![画板](../Images/a5f24882c60debb599e35ea1db511687.png)

为您的组件提供属性名称，例如`quantityList`列表以及答案文本输入控件，例如`answer1`在`answerBoxes`自定义符号内。

![连锁](../Images/8570edbd8742060f803981f83ca68f08.png)

在代码中，您可以通过将其添加到时间线来控制答案视图的可见性：

```
import flash.events.Event;

quantityList.addItem({label:"1", data:1});
quantityList.addItem({label:"2", data:2});
quantityList.addItem({label:"3", data:3});
quantityList.addItem({label:"4", data:4});
quantityList.addItem({label:"5", data:5});
quantityList.addItem({label:"6", data:6});
quantityList.addItem({label:"7", data:7});
quantityList.addItem({label:"8", data:8});
quantityList.addItem({label:"9", data:9});
quantityList.addItem({label:"10", data:10});

quantityList.addEventListener(Event.CHANGE, changeHandler);

function changeHandler(event:Event):void
{
    var numberOfQuestions = event.target.selectedItem.data as int;

    answerBoxes.answer1.visible = (numberOfQuestions > 0 ? true : false);
    answerBoxes.answer2.visible = (numberOfQuestions > 1 ? true : false);
    answerBoxes.answer3.visible = (numberOfQuestions > 2 ? true : false);
    answerBoxes.answer4.visible = (numberOfQuestions > 3 ? true : false);
    answerBoxes.answer5.visible = (numberOfQuestions > 4 ? true : false);
    answerBoxes.answer6.visible = (numberOfQuestions > 5 ? true : false);
    answerBoxes.answer7.visible = (numberOfQuestions > 6 ? true : false);
    answerBoxes.answer8.visible = (numberOfQuestions > 7 ? true : false);
    answerBoxes.answer9.visible = (numberOfQuestions > 8 ? true : false);
    answerBoxes.answer10.visible = (numberOfQuestions > 9 ? true : false);
} 
```

运行时，您可以从列表中选择项目：

![跑步](../Images/1968fbd6f4285e963cc5308a4e71ed88.png)

[工作 SWF 示例](http://jasonsturges.com/labs/stack-overflow/examples/quantity-list/quantity-list.swf)

[Flash Pro CS5.5 FLA 源代码](http://jasonsturges.com/labs/stack-overflow/examples/quantity-list/quantity-list.fla)

**Flex - 一种程序化方法**

> ![数字游戏](../Images/9fba0e44826f40d8519d3460f6868ed4.png)

将数量值存储在列表数据提供程序中，并在更改时迭代添加元素：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx">
    <s:layout>
        <s:HorizontalLayout />
    </s:layout>

    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayList;

            import spark.components.TextInput;
            import spark.events.IndexChangeEvent;

            protected function quantityList_changeHandler(event:IndexChangeEvent):void
            {
                textInputGroup.removeAllElements();

                for (var i:uint = 0; i < quantityList.selectedItem; i++)
                {
                    textInputGroup.addElement(new TextInput());
                }
            }
        ]]>
    </fx:Script>

    <s:List id="quantityList"
            change="quantityList_changeHandler(event)"
            dataProvider="{new ArrayList([1, 2, 3, 4, 5, 6, 7, 8, 9, 10])}" />

    <s:VGroup id="textInputGroup" />

</s:Application> 
```

**Flex - 一种声明式方法**

> ![数字游戏](../Images/9fba0e44826f40d8519d3460f6868ed4.png)

使用 Flex 状态系统，您可以声明式地布局您的视图，然后包含处于所需状态的组件。您还可以合并动画状态之间的转换。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx">
    <s:layout>
        <s:HorizontalLayout />
    </s:layout>

    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayList;

            import spark.components.TextInput;
            import spark.events.IndexChangeEvent;

            protected function quantityList_changeHandler(event:IndexChangeEvent):void
            {
                currentState = "quantity" + quantityList.selectedItem.toString();
            }
        ]]>
    </fx:Script>

    <s:states>
        <s:State name="quantity1" />
        <s:State name="quantity2" />
        <s:State name="quantity3" />
        <s:State name="quantity4" />
        <s:State name="quantity5" />
        <s:State name="quantity6" />
        <s:State name="quantity7" />
        <s:State name="quantity8" />
        <s:State name="quantity9" />
        <s:State name="quantity10" />
    </s:states>

    <s:List id="quantityList"
            change="quantityList_changeHandler(event)"
            dataProvider="{new ArrayList([1, 2, 3, 4, 5, 6, 7, 8, 9, 10])}" />

    <s:VGroup id="textInputGroup">
        <s:TextInput includeIn="quantity1,quantity2,quantity3,quantity4,quantity5,quantity6,quantity7,quantity8,quantity9,quantity10" />
        <s:TextInput includeIn="quantity2,quantity3,quantity4,quantity5,quantity6,quantity7,quantity8,quantity9,quantity10" />
        <s:TextInput includeIn="quantity3,quantity4,quantity5,quantity6,quantity7,quantity8,quantity9,quantity10" />
        <s:TextInput includeIn="quantity4,quantity5,quantity6,quantity7,quantity8,quantity9,quantity10" />
        <s:TextInput includeIn="quantity5,quantity6,quantity7,quantity8,quantity9,quantity10" />
        <s:TextInput includeIn="quantity6,quantity7,quantity8,quantity9,quantity10" />
        <s:TextInput includeIn="quantity7,quantity8,quantity9,quantity10" />
        <s:TextInput includeIn="quantity8,quantity9,quantity10" />
        <s:TextInput includeIn="quantity9,quantity10" />
        <s:TextInput includeIn="quantity10" />
    </s:VGroup>

</s:Application> 
```

# html - 似乎无法获得我想要的行距

> ID：13129801
> 
> 赞同：2
> 
> 时间：2012-10-29T21:14:19.687
> 
> 标签：html, css

我做了很多看起来更复杂的事情，我认为这会很容易，但我只是不知道我哪里出错了。

我有一个进度条，希望在它上面有一些文字，非常靠近进度条本身。如果我只使用带有 after 的纯文本，那么文本就是我想要的，但我想使用 css 来格式化这些标题。当我这样做时，即使我在 css 中将 line-height 设置得非常低，我似乎也无法使行距足够小。

```
<h5 id="bar1Title"></h5><h5 id="bar1Title2"></h5>
<progress id="bar1" value="30" max="255"></progress> 
```

此外，我想将 bar1Title 和 bar1Title2 放在同一行，这是我似乎无法完成的另一个简单任务！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:22:07.210

**h5**是`block level element`.. 因此，如果您希望这些元素并排显示，则需要显式设置 display: inline 。

```
h5
{
    display : inline;
} 
```

如果行高不起作用，您也可以调整边距属性并将其设置为负数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:20:20.677

```
<h5 id="bar1Title" style="margin-bottom:-2px;"></h5><h5 id="bar1Title2" style="margin-bottom:-2px;"></h5>
<progress id="bar1" value="30" max="255"></progress> 
```

尝试使用 style="margin-bottom:-2px;" 并根据需要增加 px 的值，以使其顺利进行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T21:22:46.967

这会吗？

```
<div>
    <span id="bar1Title">111</span>
    <span id="bar1Title2">222</span>
</div>
<div style="line-height: 0px;margin-top: -3px;">
    <progress id="bar1" value="30" max="255"></progress>
</div> 
```

或这个

```
<h5 id="bar1Title" style="display: inline">111</h5>
<h5 id="bar1Title2" style="display: inline">222</h5>
<div style="line-height: 0px;margin-top: -3px;">
    <progress id="bar1" value="30" max="255"></progress>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T21:24:18.277

标题标签有一些您需要考虑的默认边距。

[http://www.htmlcssdeveloper.com/tutorial/advanced-html-css/what-is-the-default-margin-of-h1-h2-h3-h4-h5-h6.html](http://www.htmlcssdeveloper.com/tutorial/advanced-html-css/what-is-the-default-margin-of-h1-h2-h3-h4-h5-h6.html)

您必须清除该保证金

```
<h5 style="margin: 0px;"></h5> 
```

# python - Python - 如何获取当前的键锁状态？

> ID：13129804
> 
> 赞同：8
> 
> 时间：2012-10-29T21:15:17.467
> 
> 标签：python, capslock

我正在尝试编写一个简单的程序来显示不同键锁的当前状态，但我无法找到如何在 Python 中获取它们当前状态的解决方案。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T21:50:29.457

如果您可以等待一两天，我会将此功能添加到[python-evdev](https://github.com/gvalkov/python-evdev)并更新此答案。它可能看起来类似于：

```
from evdev import InputDevice, ecodes

dev = InputDevice('/dev/input/eventX') # your keyboard device
dev.ledstates(verbose=True)
{ (0, 'LED_NUML')    : True,
  (1, 'LED_CAPSL')   : True,
  (2, 'LED_SCROLLL') : False} 
```

正如@ronak`xset`所提到的，使用要容易得多，因为您不必对任何输入设备具有读取权限。不幸的是，它只能在 X 下工作（而 X 又使用该`evdev`接口（至少在 linux 上））。

* * *

好吧，我花了足够长的时间，但它在里面。让“ON”LED的界面最终是：

```
>>> dev.leds()
[0, 1, 8, 9]

>>> dev.leds(verbose=True)
[('LED_NUML', 0), ('LED_CAPSL', 1), ('LED_MISC', 8), ('LED_MAIL', 9)] 
```

获取设备上所有可用的 LED：

```
>>> dev.capabilities()[ecodes.EV_LED]
[0, 1, 2]

>>> dev.capabilities(verbose=True)[('EV_LED', ecodes.EV_LED)]
[('LED_NUML', 0), ('LED_CAPSL', 1), ('LED_SCROLLL', 2)] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T23:26:35.957

好的，在阅读了[源代码`python-keyboardleds`](https://bitbucket.org/jwilk/python-keyboardleds/src/bdcc040e8da40e24ca6452403b4a97c7420ca131/keyboardleds.py?at=default)和[`console_ioctl`手册页](http://www.kernel.org/doc/man-pages/online/pages/man4/console_ioctl.4.html)之后，下面是如何用纯 Python 进行操作：

```
import os
import struct
import fcntl

DEVICE = '/dev/tty'    

_KDGETLED = 0x4B31

scroll_lock = 0x01
num_lock = 0x02
caps_lock = 0x04

fd = os.open(DEVICE, os.O_WRONLY)

# ioctl to get state of leds
bytes = struct.pack('I', 0)
bytes = fcntl.ioctl(fd, _KDGETLED, bytes)
[leds_state] = struct.unpack('I', bytes)

# Use bitmask to check status caps_lock bit
status = leds_state & caps_lock != 0

print "Caps Lock is On: %s" % status 
```

**注意**：这仅适用于真实终端和 VT（1-7，可通过`ctrl`++访问的终端`alt`）`Fx`，不适用于 X11 终端仿真器中的伪终端。

要检查，`tty`请在控制台中运行：

```
$ tty
/dev/tty1    # will work

$ tty
/dev/pts/4   # won't work 
```

`/dev/console`用作查询设备也可以在 X11 中使用，但需要 root 权限。

有关所涉及概念的详细信息，请参阅有关[ioctls](http://en.wikipedia.org/wiki/Ioctl)和[位掩码的 Wikipedia 页面，以及 Python](http://en.wikipedia.org/wiki/Mask_%28computing%29)[`fcntl`模块](http://docs.python.org/2/library/fcntl.html)的文档。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-29T21:32:09.150

```
└──> xset q | grep LED
  auto repeat:  off    key click percent:  0    LED mask:  00000000
└──> xset q | grep LED
  auto repeat:  off    key click percent:  0    LED mask:  00000001 
```

当大写锁定打开时，LED 掩码应为 1，如果 LED 掩码关闭，则应为 0。

此外，由于您提到要使用 python，您可以通过以下方式获取值

```
>>> import commands
>>> # Caps Lock is off.
>>> commands.getoutput('xset q | grep LED')[65]
'0'
>>> # Setting Caps Lock on now.
>>> commands.getoutput('xset q | grep LED')[65]
'1' 
```

蟒蛇3版本：

```
import subprocess
if subprocess.check_output('xset q | grep LED', shell=True)[65] == 50 :
    capslock = False
if subprocess.check_output('xset q | grep LED', shell=True)[65] == 51 :
    capslock = True
print( "capslock ON is : ", capslock ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-28T14:44:59.953

另请参阅 tkinter - 有 Caps-Lock 的事件。当我打开面板时，我使用 xset 来查找 Caps-Lock 的初始状态，然后在面板打开时使用 tkinter 事件来跟踪。1）我不确定如何在 tkinter 中获得初始状态 - 一定有一种方法 2 xset 在 tkinter 事件过程中似乎不可靠 - 过程并不总是通过 xset 显示大写锁定更改......

示例代码：

```
def capsLock(event):
   caps = event.state & 0x0002 
```

另请参阅： [Python - 如何获取当前的键锁状态？](https://stackoverflow.com/questions/13129804/python-how-to-get-current-keylock-status)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-19T02:40:45.740

如果您的操作系统是 Windows，请尝试：

```
import win32api,win32con
caps_status = win32api.GetKeyState(win32con.VK_CAPITAL)
if caps_status==0:
    print('CapsLock is off')
else:
    print('CapsLock is on') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-08T09:50:33.937

为了扩展 ronak 提供的答案，python3 版本以它应该的方式工作，但*仅在*打开 num lock 时。

`subprocess.check_output('xset q | grep LED', shell=True)[65]`根据 numlock 和 caps lock 的状态返回值 48 到 51（capslock 加 1，而 numlock 加 2）

考虑到数字锁定，这应该起作用：

```
import subprocess
x=subprocess.check_output('xset q | grep LED', shell=True)[65]
if x==48 or x==50:
    print("caps off")
    if x == 48:
        print("num off")
    else:
        print("num on")
elif x==49 or x==51:
    print("caps on")
    if x == 49:
        print("num off")
    else:
        print("num on")``` 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-26T13:49:34.923

在 Windows 下查看[https://stackoverflow.com/a/21160382/10871895的大写锁定键，无需加载其他模块。](https://stackoverflow.com/a/21160382/10871895)

# matlab - 复合辛普森规则的 MatLab 算法

> ID：13129805
> 
> 赞同：0
> 
> 时间：2012-10-29T21:15:24.643
> 
> 标签：matlab, numerical-integration

我已经尝试过，只是为了好玩，为复合辛普森规则编写一个 MatLab 代码。据我所知，代码是正确的，但我的答案并不像我想要的那样准确。如果我在函数 f = cos(x) + e^(x^2) 上尝试我的代码，其中 a = 0，b = 1 和 n = 7，我的答案大约是 1,9，而它应该是 2， 3\. 如果我使用 Wikipedia 上提供的算法，我会得到一个非常接近 n = 7 的近似值，所以我的代码显然不够好。如果有人能在我的代码中看到任何错误，我将不胜感激！

```
function x = compsimp(a,b,n,f)
% The function implements the composite Simpson's rule

h = (b-a)/n;
x = zeros(1,n+1);
x(1) = a;
x(n+1) = b;
p = 0;
q = 0;

% Define the x-vector
for i = 2:n
    x(i) = a + (i-1)*h;
end

% Define the terms to be multiplied by 4
for i = 2:((n+1)/2)
    p = p + (f(x(2*i -2)));
end

% Define the terms to be multiplied by 2
for i = 2:((n-1)/2)
    q = q + (f(x(2*i -1)));
end

% Calculate final output
x = (h/3)*(f(a) + 2*q + 4*p + f(b)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:24:02.503

你的区间`[a,b]`应该分成`n`区间。这导致形成每个分区边界的`n+1`值。`x`您的向量`x`仅包含`n`元素。您的代码似乎只处理`n`术语而不是`n+1`按要求处理。

编辑:: 现在您已经根据上述修改了问题，试试这个

```
% The 2 factor terms
for i = 2:(((n+1)/2) - 1 )
    q = q + (f(x(2*i)));
end

% The 4 factor terms
for i = 2:((n+1)/2)
   p = p + (f(x(2*i -1)));
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-28T18:55:08.507

您创建的代码工作正常。我看到的唯一问题是 n。根据我的经验，尝试 n>=10000 用于任何功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-03T01:25:59.190

更正的部分应该`p1`是`p2`和`p3`。我试了一下，得到了大致准确的结果：

[![在此处输入图像描述](../Images/af490f30ec7a51ac38d70f109f740729.png)](https://i.stack.imgur.com/FzgJL.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-14T21:02:08.803

```
function x = compsimp(a,b,n,f) 
```

我不知道这是否重要，但不应该是`f`第一个字母：

```
function x = compsimp(f,a,b,n) 
```

# asp.net-mvc - MVC 将一组事物绑定到不同的下拉列表

> ID：13129807
> 
> 赞同：0
> 
> 时间：2012-10-29T21:15:47.123
> 
> 标签：asp.net-mvc, data-binding

我有一个名为的数据库表`ItemAttributeLinks`和这些表的集合

```
Collection<ItemAttributeLink> ItemAttributeLinks 
```

现在，在我看来，我这样做是为了将 n 个下拉列表绑定到此集合中的 n 个项目。这不起作用。中的值`m.Item.ItemAttributeLinks`始终为空。下拉列表中的值出现并且都是正确的，问题是所选值，不要在回发时绑定。

```
@{
            int i = 0;
            foreach (var type in @Model.AttributeTypes)
            {
                <section>
                    <label>@type.Text</label>
                    <div> @Html.DropDownListFor(m => m.Item.ItemAttributeLinks[i] ,Model.AttributeValuesList[Convert.ToInt32(type.Value)], "Select a value")</div>
                </section>
                i++;
            } 
```

顺便说一下，ItemAttributeLink 表包含一个 int id、一个 int 外键 attributevalueid 和一个 int 外键 ItemId。

以这种方式绑定多个下拉列表的正确方法是什么？}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:58:36.983

您需要将下拉列表绑定到原始类型（例如整数、字符串、Guid...）：

```
@Html.DropDownListFor(
    m => m.Item.ItemAttributeLinks[i].SomePrimitiveTypeProperty,
    Model.AttributeValuesList[Convert.ToInt32(type.Value)], 
    "Select a value"
) 
```

然后在您的 POST 控制器操作中，原始类型将填充所选值。如果要获取相应的模型，则必须使用 id 查询数据库。

请记住，在 HTML 中，`<select>`元素（这是 DropDownList 帮助程序生成的）仅在提交表单时发送选定的值。您不能将其绑定到复杂类型。

# java - 使宽度 Blackberry CheckboxField 刚好适合文本

> ID：13129814
> 
> 赞同：1
> 
> 时间：2012-10-29T21:16:18.573
> 
> 标签：java, blackberry, checkbox, width

我有一个带有 CheckboxFields 的水平字段管理器。我的问题是我需要手动（即以静态方式）调整复选框字段的宽度，这使得复选框字段始终保持固定大小，即使文本很短。

有没有办法根据复选框字段（或一般）的文本长度动态调整宽度？

编辑：实际上，当我使用 JDE 7 运行相同的代码时没有问题，但是当我尝试使用 JDE 6 时，一切都变得非常大，并且复选框字段标签文本变得非常大，将我的加载图标推得很远并且也变得很大。如下图所示：

![在此处输入图像描述](../Images/be330f5faa1f6252589a5d82db578947.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:05:24.777

现在我明白你在问什么了。试试这个：

```
public class LoadingScreen extends MainScreen
{
public LoadingScreen()
{       
    createGUI();                               
}

private void createGUI()
{
    add(new LabelField("CheckboxField Demo"));

    HorizontalFieldManager HFM1 = new HorizontalFieldManager(Field.FIELD_HCENTER);

    CheckboxField checkBoxField3 = new CheckboxField("Option 1", false, Field.FIELD_VCENTER)
    {
        protected void drawFocus(Graphics graphics, boolean on) 
        {               
            super.drawFocus(graphics, false);
        } 

        protected void layout(int width, int height) 
        {
            super.layout(150, height);
        }

    };

    checkBoxField3.setMargin(0, 10, 0, 0);
    HFM1.add(checkBoxField3);

    CheckboxField checkBoxField4 = new CheckboxField("Option 2", false,  Field.FIELD_VCENTER)
    {
        protected void drawFocus(Graphics graphics, boolean on) 
        {               
            super.drawFocus(graphics, false);
        }
        protected void layout(int width, int height) 
        {
            super.layout(150, height);
        }
    };
    HFM1.add(checkBoxField4);

    HFM1.setMargin(10,0,0,0);
    add(HFM1);              
}
} 
```

让我知道。

# php - 向数据库提交多个复选框值

> ID：13129815
> 
> 赞同：1
> 
> 时间：2012-10-29T21:16:21.760
> 
> 标签：php, mysql, database, checkbox

我对 PHP 很陌生，我正在寻找一种将多个复选框的值提交到数据库中的方法！现在我已经设法让复选框显示为选中，如果数据库中的值 = 1，否则它将被取消选中。

以下是我拥有的当前代码。

```
<?php
    $query = "SELECT * FROM users_achievements_xbox WHERE user_id = '$userID' && game_id = '$gameID' ORDER BY achievement_id ASC";
    $result = mysql_query($query);
    while($row = mysql_fetch_assoc($result)) {   // Start looping table row
    $userID = $row['user_id'];
    $gameID = $row['game_id'];
    $achievementID = $row['achievement_id'];
    $achievementName = $row['achievement_name'];
    $achievementDescription = $row['achievement_description'];
    $achievementValue = $row['achievement_value'];

    $check = mysql_query("SELECT * FROM users_achievements_xbox WHERE user_id = '$userID' && game_id = '$gameID' && achievement_id = '$achievementID'");
    $row2 = mysql_fetch_assoc($check);
    $achievement_locked = $row2['achievement_locked'];

    if($achievement_locked == "0")
    {
        $checked = 'checked="checked"';
    }
    else
    {
        $checked = "";
    }
?>
    <tr align="center" bgcolor="#eeeeee">
        <td> <img src="images/achievements/<?php echo $gameID; ?>/<?php echo $achievementID; ?>.jpg" /> </td>
        <td> <?php echo $achievementName; ?> </td>
        <td> <?php echo $achievementDescription; ?> </td>
        <td> <?php echo $achievementValue; ?> </td>
        <td> <input type="checkbox" name="checkbox" value="0" <?php echo $checked ?> /> </td>
    </tr>

<?php
} // end of while loop
?> 
```

我正在考虑尝试通过 isset 执行此操作，但我不想要一个循环的提交按钮" 在我的数据库中，当我只希望选中的复选框在选中时更改为 0，如果不选中则更改为 1！

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T21:48:27.383

这是一个例子。得到理解。我没有逃脱 POST 变量。确保你这样做。

HTML 文件：

```
<form name="form1" method="post" action="test.php">
  <p>
    <input name="colors[]" type="checkbox" id="colors[]" value="0">
    Red 
    <input name="colors[]" type="checkbox" id="colors[]" value="0">
    Blue 
    <input name="colors[]" type="checkbox" id="colors[]" value="0">
    Green</p>
  <p> 
    <input name="colors[]" type="checkbox" id="colors[]" value="0">
    Yellow 
    <input name="colors[]" type="checkbox" id="colors[]" value="0">
    Brown </p>
    <input type="submit">
</form> 
```

这是你的 php 文件应该有的。

```
<?php

$colors = $_POST['colors'];

$red = isset($colors[0]) ? 1 : 0;
$blue = isset($colors[1]) ? 1 : 0;
$green = isset($colors[2]) ? 1 : 0;
$yellow = isset($colors[3]) ? 1 : 0;
$brown =isset($colors[4]) ? 1 : 0;

// query
$sql = "INSERT INTO table (red,blue,green,yellow,brown) VALUES (:red,:blue,:green,:yellow,:brown)";
$q = $conn->prepare($sql);
$q->execute(array(':red'=>$red,
                    ':blue'=>$blue,
                    ':green'=>$green,
                    ':yellow'=>$yellow,
                  ':brown'=>$brown));
?> 
```

# php - 在午夜获取今天的时间戳？

> ID：13129817
> 
> 赞同：141
> 
> 时间：2012-10-29T21:16:31.537
> 
> 标签：php, time, timestamp

我将如何在今天午夜在 php 中获取时间戳。假设现在是星期一下午 5 点，我想要星期一（今天）午夜（上午 12 点）的时间戳，这已经发生了。

谢谢

* * *

## 回答 #1

> 赞同：275
> 
> 时间：2012-10-29T21:20:04.863

```
$timestamp = strtotime('today midnight'); 
```

或通过*DateTime*：

```
$date = new DateTime('today midnight');
// or: $date = date_create('today midnight');
$timestamp = $date->getTimestamp(); 
```

然后也许是不可变的：

```
$midnight = new DateTimeImmutable('today midnight');
// or: $midnight = date_create_immutable('today midnight');
$timestampOfMidnight = $midnight->getTimestamp(); 
```

1.  那是在[默认时区](https://www.php.net/manual/en/datetime.configuration.php#ini.date.timezone)。
2.  剧透：只是“ `midnight`”或或只是“ `today`”返回相同。
3.  添加时区，例如“ `UTC today`”，始终拥有它。
4.  剧透 #2：UTC 问候风格：“ `midnightZ`”
5.  历史：*`midnight`*自[PHP 5.1.2](https://www.php.net/ChangeLog-5.php#5.1.2)（2006 年 1 月）以来，*`today`*自[PHP 4.3.1](https://www.php.net/ChangeLog-4.php#4.3.1)（2003 年 2 月）以来

*更多示例：*

给定时间*UTC 2020-01-01 00:00:00*：

```
UTC time is ............: [red   ] 1577836800 
```

调用时`strtotime($)`，结果为：

```
today midnight .........: [pink  ] 1577833200
midnight ...............: [pink  ] 1577833200
today ..................: [pink  ] 1577833200
tomorrow ...............: [green ] 1577919600
UTC today ..............: [red   ] 1577836800
today Z ................: [red   ] 1577836800
Asia/Shanghai today ....: [lime  ] 1577808000
Asia/Shanghai ..........: [blue  ] 1577811600
HKST today .............: [copper] 1577804400 
```

在线演示：[https ://3v4l.org/KWFJl](https://3v4l.org/KWFJl)

* * *

PHP 文档：

*   在[相对格式](https://www.php.net/manual/en/datetime.formats.relative.php#datetime.formats.relative)页面上，查看*基于日的表示法*表。这些格式适用[`strtotime()`](https://php.net/strtotime)于**`DateTime`**和`date_create()`。

*   您可能想看看 PHP 提供的更多功能：[https](https://php.net/datetime) ://php.net/datetime - PHP 中与日期时间相关的函数和对象的入口页面，其中包含指向其他与日期时间相关的扩展的链接。

* * *

**注意：**虽然“ `midnight`”在技术上*介于*两天之间，但这里是“ `today`”（一天的开始）与 PHPs' `strtotime`。

*讨论：*

到目前为止，答案`strtotime("today midnight")`or`strtotime("midnight today")`是一个完整且听起来不错的 PHP 答案，它可能看起来有点冗长，`strtotime("midnight")`并`strtotime("today")`返回相同的结果。

但是，即使是更加冗长，也并不总是能立即回答这个问题，如果它是关于*一天开始的* 午夜或一天*结束*的午夜，即使在今天也是作为上下文给出的。*阅读“今天午夜”*时，我们可能会想到一天的开始，但这是一个假设，并不精确，也许不可能。[*维基百科*](https://en.wikipedia.org/wiki/Midnight#Start_and_end_of_day)：

> 尽管在这个问题上没有全球一致意见，但午夜通常被认为是新一天的开始，并与 00:00 小时相关联。

与此编程问题进行比较：

*   鉴于午夜是一个*时间转换*
*   要求单个 UNIX 时间戳时
*   然后没有答案

（它将在两个 UNIX 时间戳之间，因此您将获取两个时间戳并描述两者的含义，这不会回答问题，因为它要求单个时间戳）。

由于这种不匹配以及 UNIX 时间如何引用日期/时间，这不容易完全解决。

让我们以众所周知的带有小时和分钟的数字 24 小时时钟来表示*午夜*（是否更精确？）：

```
$midnight = strtotime("today 00:00"); 
```

或结束一天：

```
$midnight = strtotime("today 24:00"); 
```

（注：显示为第二天开始）

或者 12 小时制，它也可以用来给出 今天*午夜的**UNIX 时间戳*：

 *```
$midnight = strtotime("12:00 a.m."); 
```

（注意：不支持*“午夜 12 点”*`strtotime()`表示法）

像*午夜这样的**过渡时间*映射到时钟上可能导致的混乱甚至可能在 12 小时制时钟中变得更加明显，类似于“ ”*中午*（在 PHP 中不可用作为相对日期/时间格式，但“ ”）从技术上讲，介于两者之间*（*现在在中午的两个完整日期之间，或在一天的前半天和后半天之间）。*`midnight`*`noon`**

 ***这样一来，代码可能不会在 24 小时内得到很好的接受，或者只是写出“ `today midnight`”。

你的旅费可能会改变。

这有点与*时钟时间*一致。来自*[维基百科午夜](https://en.wikipedia.org/wiki/Midnight)*：

> *“午夜是从一天到下一天的**过渡时间——****日期变化的****时刻**，在任何特定司法管辖区的当地官方时钟时间。按时钟时间，午夜与中午相反，相差 12 小时。[由我粗体]"*

 **并来自*[维基百科 12 小时制](https://en.wikipedia.org/wiki/12-hour_clock#Confusion_at_noon_and_midnight)*：

> *“并不总是很清楚“12:00 am”和“12:00 pm”表示什么时间。从拉丁词meridies（中午），ante（之前）和post（之后），术语ante meridiem（上午）表示before meridiem (pm) 表示中午之后。由于“noon”（midday, meridiem (m.)）既不在其之前也不在其之后，因此术语 am 和 pm 不适用。尽管“12 m.”被建议为一种表示中午的方法，这种做法很少做，也不能解决如何表示午夜的问题。”*

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2014-03-20T14:16:07.833

我认为您应该使用新的 PHP DateTime 对象，因为它在处理超出 strtotime() 所具有的 32 位限制的日期时没有问题。这是一个如何在午夜获取今天日期的示例。

```
$today = new DateTime();
$today->setTime(0,0); 
```

或者，如果您使用的是 PHP 5.4 或更高版本，您可以这样做：

```
$today = (new DateTime())->setTime(0,0); 
```

然后您可以使用`echo $today->format('Y-m-d');`获取您希望对象输出的格式。

[PHP 日期时间对象](http://us2.php.net/manual/en/class.datetime.php)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-09-27T13:54:10.757

今天午夜。简单的。

```
$stamp = mktime(0, 0, 0); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-12-29T15:19:06.270

您正在计算最近一次天体事件的时间，即太阳直接从您的脚下经过，并根据当地的正午标记惯例进行调整，并可能进行调整，以便人们下班回家后有足够的日光，以及其他政治考虑。

令人生畏吧？实际上这是一个常见问题，但完整的答案取决于位置：

```
$zone = new \DateTimeZone('America/New_York'); // Or your own definition of “here”
$todayStart = new \DateTime('today midnight', $zone);
$timestamp = $todayStart->getTimestamp(); 
```

“这里”的潜在定义列在[https://secure.php.net/manual/en/timezones.php](https://secure.php.net/manual/en/timezones.php)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-04-19T13:56:02.873

**2020 年 4 月 19 日更新的答案**

我们可以这样做：

`$today = date('Y-m-d 00:00:00');`

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-10-29T21:18:54.797

```
$today_at_midnight = strtotime(date("Ymd")); 
```

应该给你你所追求的。

***解释***

我所做的是使用 PHP 的 date 函数来获取今天的日期而不引用任何时间，然后将其传递给“string to time”函数，该函数将日期和时间转换为纪元时间戳。如果没有时间，则假定为当天的第一秒。

参考：日期函数： http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

字符串到时间：[http ://us2.php.net/manual/en/function.strtotime.php](http://us2.php.net/manual/en/function.strtotime.php)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-05-16T12:06:55.160

以更客观的方式：

```
$today = new \DateTimeImmutable('today'); 
```

例子：

```
 echo (new \DateTimeImmutable('today'))->format('Y-m-d H:i:s');
// will output: 2019-05-16 00:00:00 
```

和：

```
echo (new \DateTimeImmutable())->format('Y-m-d H:i:s');
echo (new \DateTimeImmutable('now'))->format('Y-m-d H:i:s');
// will output: 2019-05-16 14:00:35 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-12-03T21:45:19.417

```
$timestamp = strtotime('today midnight'); 
```

是相同的

```
$timestamp = strtotime('today'); 
```

而且你的服务器上的工作少了一点。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-30T13:44:37.427

`$midnight = strtotime('midnight');`是有效的
你也可以试试 `strtotime('12am')`或`strtotime('[input any time you wish to here. e.g noon, 6pm, 3pm, 8pm, etc]')`。我跳过了在午夜之前添加今天，因为默认是今天。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-06-27T13:53:08.933

如果您使用的是 Carbon，您可以执行以下操作。您还可以格式化此日期以设置`Expire`HTTP 标头。

```
Carbon::parse('tomorrow midnight')->format(Carbon::RFC7231_FORMAT) 
```******

# c# - 如何在 asp.net mvc 2 中创建树视图？

> ID：13129819
> 
> 赞同：0
> 
> 时间：2012-10-29T21:16:40.293
> 
> 标签：c#, asp.net-mvc, json, asp.net-mvc-2

我有几个数据库表，一个用于文件夹，一个用于文件，具有以下模式。

**文件夹**

*   文件夹ID
*   文件夹名称
*   创建日期
*   父文件夹 ID

**文件**

*   文件ID
*   文件名
*   文件扩展名
*   描述
*   文件夹ID
*   上传日期
*   下载次数

基本上我需要知道如何以 JSON 返回的方式查询这些，可以与[jQuery Treeview 插件](http://bassistance.de/jquery-plugins/jquery-plugin-treeview/)或[jqTree 一起使用](http://mbraak.github.com/jqTree/)。

我有两个类，文件和文件夹，可用于从数据库返回的数据创建文件和文件夹对象，但我不知道如何将它作为 json 返回，以便文件夹包含它们的子-文件夹，所有文件都显示在正确的文件夹中。

任何帮助将不胜感激，我搜索并搜索，但我能找到的只是一个使用 ASP.NET MVC 3 的示例，不幸的是我在这个项目上使用 ASP.NET MVC2 被困住了。

提前致谢。

```
public class Folder
{
    public int FolderID { get; set; }
    public string FolderName { get; set; }        
    public IList<Folder> Subfolders { get; set; }
    public IList<File> Files { get; set; } 
    public bool IsRootFolder
    {
        get { return Subfolders.Count == 0; }
    }
}

public class File
{
    public int FileID { get; set; }
    public int FolderID { get; set; }
    public string FileName { get; set; }
    public string Exstension { get; set; }
    public string Description { get; set; }
    public DateTime? UploadDate { get; set; }
    public int DownloadCount { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:43:39.733

树视图的 HTML 只是嵌套的无序列表（ul 和 li 元素）。因此，只需从您的 JSON 数据生成它，然后使用您的插件设置最外层列表的样式。

例如，如果您使用 jQuery treeview 插件，您可以生成：

```
<ul id="tree">
    <li>Node 1</li>
    <li>Node 2</li>
        <ul>
            <li>Node 2.1</li>
            <li>Node 2.2</li>
        </ul>
    <li>Node 3</li>
</ul> 
```

然后使用样式：

```
$("#tree").treeview(); 
```

# git - 提交时自动将 git 目录复制到分支

> ID：13129822
> 
> 赞同：1
> 
> 时间：2012-10-29T21:16:48.263
> 
> 标签：git, version-control, github-pages

是否可以向 git repo 添加一个钩子，该钩子会自动将文件从 master 目录复制到分支的根目录？

原因如下：

我想使用 GitHub 页面来发布项目文档。不幸的是，GitHub 坚持将站点内容放在名为“gh_pages”的分支中。这样做的问题是，每当我想写文档时，我都必须切换分支，所以我不能同时编码和写作。此外，当我切换到 gh_pages 分支时，Eclipse 会发疯，因为那里没有 .project 文件，所以整个项目都关闭了。

更好的方法是将站点内容存储在主分支的 /gh_pages 子目录中。如果我可以在那里编辑一些降价页面，提交和推送，并且必须自动更新站点，那将是非常酷的。

可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:22:59.680

是的。您可以在项目中添加一个文件夹并将其作为自身的子模块。将子模块指向 gh_pages 分支。更重要的是，现在您在 2.x 之间有了版本化链接。

这是他的步骤：

```
git submodule add docs git+ssh://github.com/yourid/yourproject.git
git submodule init
git submodule update
cd docs
git checkout gh_pages
cd -
git add -A
git commit -m "added docs submodule" 
```

当你更新你的文档时，执行这个

```
cd docs && git add -A && git push && cd - 
```

我不打扰编写脚本。按下`CTRL-R`并输入`docs`会很快调出。点击进入，你很高兴。

当您运行时，`git status`您会看到有一个包含更改的文件夹`docs`。像往常一样添加和提交。

当其他人想要保持同步时，您需要发出命令

```
git submodule update 
```

查看文档是否需要更新，

```
git submodule 
```

将显示子模块是最新的还是未初始化的。如果它是最新的并已初始化，那么在它上市之前您将看不到任何标记。否则，它将有一个`+`or`-`在它前面，这取决于它是在顶级 repo 已在当前提交中注册的版本的后面还是前面。

更多信息可以在 progit.org/book 第 6 章第 6 节中找到。

# html - PHP邮件表单 - 不发布变量

> ID：13129825
> 
> 赞同：-1
> 
> 时间：2012-10-29T21:17:03.977
> 
> 标签：html, forms, html-email, php

除了 1（一个）变量之外的所有东西似乎都在我的邮件表单上工作。在我的 HTML 页面上，我有一个带有选择框、一些文本输入和消息的文本区域的表单。正在检索除消息变量之外的所有内容。

我对这些基于 PHP 的邮件表单从来没有这么好过。我通常使用 HTML mailto 表单，但它们不安全且非常初级。

我会很感激你的帮助。谢谢！

**HTML**

```
<form method="post" action="php/contact.php">
            <label for="senderName">name:</label> <input name="senderName" type="text" /><br />
            <label for="senderEmail">email:</label> <input name="senderEmail" type="text" /><br />
            <label for="senderRegarding">subject:</label> 
                <select name="senderRegarding">
                    <option value="start a project">Wish to start a project</option>
                    <option value="request resume password">Request resum&eacute; password</option>
                    <option value="other">Other</option>
                </select><br />
            <label for="senderMessage">message:</label> <textarea name="senderMessage"></textarea><br />
            <input type="submit" name="submit" /> <input type="reset" />
        </form> 
```

**PHP**

```
 <?php
if (isset($_POST['submit'])){
     $name = $_POST['senderName'];
     $email = $_POST['senderEmail'];
     $regarding = $_POST['senderRegarding'];
     $message = $_POST['message'];

     $subject = "Contact Form";

     $message = 
     "Name: " . $name . "\r\n" . 
     "Email: " . $email . "\r\n" . 
     "Subject: ". $regarding . "\r\n" .
     "Message: " . $senderMessage;

     $headers = 
     "From: " . $name .  "\r\n" .
     "Reply-To: " . $email . "\r\n" .
     "MIME-Version: 1.0\n" .
     "Content-type: text/plain; charset=iso-8859-1\n";

     $to = "email@address";
};
     mail($to, $subject, $message, $headers);
     header("Location:../index.htm");
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T21:18:49.803

如果您查看代码，则 textarea 称为“senderMessage”，而您的 $_POST 正在寻找“消息”。

将 $_POST['message'] 更改为 $_POST['senderMessage'] 即可

**现存的**

```
$message = $_POST['message']; 
```

**改成**

```
$message = $_POST['senderMessage']; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T21:21:51.987

我强烈建议不要使用 PHP 的内置`mail()`函数；这真的很糟糕。你最终会得到看起来很糟糕的代码；您必须手动构建所有标题；它对错误非常开放。

相反，下载一份[phpMailer](http://code.google.com/a/apache-extras.org/p/phpmailer/)。

这是一个使在 PHP 中发送电子邮件变得轻而易举的类。

```
require("class.phpmailer.php");
$mail = new PHPMailer();

$mail->From     = $from;
$mail->AddAddress($to);
$mail->Subject  = $subject;
$mail->Body     = $body;
$mail->Send(); 
```

简单得多，我相信你会同意的。而且更安全、更易于使用且功能更强大。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T21:18:59.837

我相信更换

```
 $message = $_POST['message']; 
```

为了

```
 $message = $_POST['senderMessage']; 
```

可能会解决您的问题。或者，您可以更改`<textarea name="senderMessage></textarea>`为`<textarea name="message"></textarea>`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-29T21:19:47.820

它应该是`$message = $_POST['senderMessage'];`

# matlab - 没有置换或重塑的矩阵的笛卡尔和

> ID：13129826
> 
> 赞同：1
> 
> 时间：2012-10-29T21:17:16.717
> 
> 标签：matlab, bsxfun

我有两个二维矩阵 a 和 b。让我们说`a = randn(10, 20)`和`b = randn(10, 30)`。我想计算笛卡尔和！这两个数组中，即a的每一列和b的每一列都应该选择一次，并加在一起形成一个大小为(10, 20*30)的矩阵c。这可以通过使用`bsxfun`、`permute`和`reshape`as 来完成：

```
c = bsxfun(@plus, a, permute(b, [1 3 2]));
c = reshape(c, [size(a,1), size(a,2)*size(b,2)]); 
```

我想知道是否存在一种更快更直接的方法来执行此操作，而无需置换或重塑。我知道为此编写一个 mex 函数很容易，但我想知道 mex 是否必要。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T00:27:40.237

有时最直接的方法是最快的！

```
c = zeros(size(a, 1), size(a, 2) * size(b, 2));
ic = 1;
for ib = 1:size(b, 2)
    for ia = 1:size(a, 2)
        c(:, ic) = a(:, ia) + b(:, ib);
        ic = ic + 1;
    end
end 
```

### 例子

```
a = randn(10, 20); 
b = randn(10, 30);

% # Originally proposed method
tic
c1 = bsxfun(@plus, a, permute(b, [1 3 2]));
c1 = reshape(c1, [size(a, 1), size(a, 2) * size(b, 2)]);
toc

% # Method suggested by gevang
tic
[pB, pA] = meshgrid(1:size(b, 2), 1:size(a, 2));
c2 = a(:, pA(:)) + b(:, pB(:));
toc

% # Direct approach
tic
c3 = zeros(size(a, 1), size(a, 2) * size(b, 2));
ic = 1;
for ib = 1:size(b, 2)
    for ia = 1:size(a, 2)
        c3(:, ic) = a(:, ia) + b(:, ib);
        ic = ic + 1;
    end
end
toc 
```

结果是：

```
 Elapsed time is 0.005850 seconds.
 Elapsed time is 0.009442 seconds.
 Elapsed time is 0.000328 seconds. 
```

如您所见，`for`在这种情况下，双循环几乎快 20 倍......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T23:58:15.437

您可以预先生成所有列索引组合，例如，使用`meshgrid,`then 并行添加正确索引的矩阵值以用于`[size(a,1), size(a,2)*size(b,2)]`最终的值矩阵：

```
a = randn(10, 20); 
b = randn(10, 30);

[pA, pB] = meshgrid(1: size(a,2), 1: size(b,2));
c = a(:, pA(:)) + b(:, pB(:)); 
```

# iphone - 在写入磁盘之前从 NSURL 修剪任何非法字符

> ID：13129827
> 
> 赞同：0
> 
> 时间：2012-10-29T21:17:42.070
> 
> 标签：iphone, objective-c, nsurl

我想将一个字符串写入一个可能包含文件系统不支持的`NSURL`字符的字符串，例如`/`or 。`:`有没有方便的方法来修剪这些字符？或者可能是包含所有非法字符的引用，以便我可以自己编写这样的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:24:15.680

最好用这样的方法来逃避它们：

```
NSString *unescaped = @"http://www";
NSString *escapedString = (NSString *)CFURLCreateStringByAddingPercentEscapes(
    NULL,
   (CFStringRef)unescaped,
    NULL,
   (CFStringRef)@"!*'();:@&=+$,/?%#[]",
    kCFStringEncodingUTF8);

NSLog(@"escapedString: %@",escapedString); 
```

正如这里[所说](https://stackoverflow.com/questions/8086584/objective-c-url-encoding)的那样？

或者你可以直接剥离！* ' ( ) ; : @ & = + $ , / ? % # [ ] 个字符，如果你愿意的话。在此处查找[保留字符列表](http://www.w3.org/Addressing/URL/uri-spec.html)。

# web-platform-installer - 找不到 php.exe

> ID：13129828
> 
> 赞同：0
> 
> 时间：2012-10-29T21:17:44.067
> 
> 标签：web-platform-installer, webmatrix-2

我是网络编程新手，我已经为 webmatrix 安装了 PHP。我的 php 网站运行良好，但我需要在命令行中使用“php 工具”，但它给出了错误“'php' 未被识别为内部......”我首先知道，我应该找到 php.exe 文件，但虽然我搜索了很多，我找不到它。

wps在哪里安装？或者我应该怎么做才能在命令行中使用“php”命令。

# installation - 如何让 inno setup 拉取本地 IP 地址？

> ID：13129829
> 
> 赞同：1
> 
> 时间：2012-10-29T21:17:47.387
> 
> 标签：installation, inno-setup

> **可能重复：**
> [如何使用 Inno-setup 获取本地 IP 地址](https://stackoverflow.com/questions/6166900/how-to-get-the-local-ip-address-using-inno-setup)

无论如何我都找不到拉本地 IP 地址以显示在安装程序的文本字段中。我认为我需要的是 IPv4。我想知道 inno 是否有办法像一些常量值一样提取这些值？请帮忙。

# c - 读出 Thunderbird 未读邮件？（Linux，终端）

> ID：13129830
> 
> 赞同：1
> 
> 时间：2012-10-29T21:17:51.040
> 
> 标签：c, email, ubuntu, thunderbird, dwm

我正在为 dwm 构建状态栏，我想通过终端读出未读邮件计数（使用 grep、sed 或 fopen 作为文件）并通过 fopen/popen 获取它。

我正在使用 ubuntu/dwm/thunderbird 16。我认为没有包含未读电子邮件计数的文本文件...

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:47:29.650

> 转到 ~/.thunderbird/default/

搜索

> Imapmail/../收件箱

或在

> 邮件/../收件箱

对于没有任何扩展名的文件。它们包含您的邮件。执行以下操作

> cat `<file>`|grep -c X:Mozilla-状态：0000

这将为您提供未读邮件计数，因为您的未读邮件的 X:Mozilla-Status 为 0000

对于其他状态，请通过不同的 X:Mozilla-Statuses

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T21:29:25.260

[不是答案]

我没有足够的代表来评论下面的答案（Anurag 的答案）。但是 X:Mozilla-Status: 0000 的 grepping/counting 不再起作用。我尝试了一个 conky 脚本。即使未读状态也是 0001。我已经用 ubuntu 12.10 和 Thunderbird 16 进行了测试。这是在[getsatisfaction.com (external link)](https://getsatisfaction.com/mozilla_messaging/topics/x_mozilla_status_flags_are_not_being_used_all_messages_marked_read)上提出的相同问题。

您还可以计算“X:Mozilla-Status:”和“X:Mozilla-Status:0001”，无论收件箱的状态如何，两者都将返回相同的值。似乎 X:Mozilla-Status 根本没有被使用。[（参考）](http://mxr.mozilla.org/comm-central/source/mailnews/base/public/nsMsgMessageFlags.idl)

***我搜索了 IMAP 收件箱。也许这就是原因。也许 IMAP 的信息存储在其他地方。

# django - 如何安装 Django 1.5 版？

> ID：13129833
> 
> 赞同：5
> 
> 时间：2012-10-29T21:18:24.970
> 
> 标签：django, installation

如果我这样做，`pip install django`我会得到 1.4 版。如果我这样做，`pip install Django==1.5`我会收到消息`Could not find a version that satisfies the requirement Django==1.5 (from versions: )`。如果我从 github 安装最新版本，我会得到 1.6 alpha 版。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T21:26:32.317

Django 1.5 仍处于 alpha 阶段。[您可以从下载页面](https://www.djangoproject.com/download/)下载 tarball，也可以`git clone`从 github 存储库切换到我认为的 1.5 分支`git checkout stable/1.5.x`。我不确定为什么 1.5.x 在 alpha 版本中被认为是“稳定”分支，但这是唯一明显符合条件的分支。

无论哪种方式，如果可以的话，我建议您进行实际安装`pip install -e (directory name)`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T22:27:21.407

直接来自 github 存储库：

```
pip install git+git://github.com/django/django.git@1.5b2 
```

# ios - itunesconnect.apple.com 是上传屏幕截图的唯一途径吗？

> ID：13129841
> 
> 赞同：0
> 
> 时间：2012-10-29T21:18:53.143
> 
> 标签：ios, app-store-connect

除了使用 Web 界面，还有更好的方法将屏幕截图上传到 iTunes 连接`itunesconnect.apple.com`吗？

如果您的应用程序已本地化为多种语言，则可能需要数小时才能将所有屏幕截图上传到 iTunes Connect。如果您有一个本地化为 4 种语言的通用应用程序，带有 Pro 和 Lite 版本，那最终会是`2 * 4 * (5 + 5 + 5) = 120 screenshots`！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:25:24.087

不，这是唯一的方法..

> 我明白了为什么 iTunes Connect 如此糟糕：Palm 偷走了 Apple 员工，所以 Apple 偷走了 Microsoft 员工来运行它。谜团已揭开。[http://nikf.org](http://nikf.org/post/206123480/i-figured-out-why-itunes-connect-sucks-so-bad)

顺便说一句，如果你偶然发现[ApplicationLoader](http://developer.apple.com/library/ios/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/9_UsingApplicationLoader/UsingApplicationLoader.html) .. 它不可能用于此目的。

# javascript - 使用 javascript 和 css 设置两个元素的位置（相对） - 阻止它们移动

> ID：13129846
> 
> 赞同：0
> 
> 时间：2012-10-29T21:19:10.430
> 
> 标签：javascript, css, position, element

我在设置 2 个 div 的位置时遇到问题，而其中一个不向右/向左移动另一个 div 的宽度。他们按自己的宽度将任何元素推到一边。

我的意思是，视觉： ![在此处输入图像描述](../Images/45e86b758f6aae9f1878c10321d4f31c.png)

我怎样才能阻止这种情况发生，同时保持两个 div 相对？

编辑：

我意识到，绝对适合我在这里找到的需要[http://css-tricks.com/absolute-positioning-inside-relative-positioning/](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)。但是...我需要它们是可拖动的，但是如果#wrapper 设置为相对，则它们不能被拖动。有没有办法制作元素，以便它们可以`#wrapper`被相对拖动？

链接到示例[http://jsfiddle.net/QddTt/13/](http://jsfiddle.net/QddTt/13/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:52:12.447

发现了问题。我的包装纸`z-index:-99;`出于某种原因放在里面。当包装器是静态的时，删除它允许我拖动我的元素。

所以主要解决方案：将两个元素的位置设置为绝对。

# android - FileNotFoundException，无法从 jar 中读取内容？

> ID：13129850
> 
> 赞同：1
> 
> 时间：2012-10-29T21:19:28.980
> 
> 标签：android, build, filenotfoundexception, sign, jar-signing

我在尝试更新我的应用程序时遇到了最糟糕的情况。我终于让它在我的手机上构建和运行，但是当我尝试导出签名的应用程序包时，我得到了两个错误：

```
Could not read jar file contents from *\TapForTap.jar
Could not read jar file contents from *\GoogleAdMobAdsSdk-6.0.1.jar 
```

我已经尝试了所有通常的删除/重新导入、清理、退出/重新启动 Eclipse。没有任何效果。是的，是否检查了库。还有其他想法吗？

编辑：

这是错误之一：

```
 eclipse.buildId=M20120208-0800
java.version=1.7.0_07
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.java.product
Command-line arguments:  -os win32 -ws win32 -arch x86 -product org.eclipse.epp.package.java.product

    Error
    Mon Oct 29 16:24:24 MST 2012
    Could not read jar file contents from \Expansion Free\TapForTap.jar

        java.io.FileNotFoundException: \Expansion Free\TapForTap.jar (The system cannot find the path specified)
            at java.io.FileInputStream.open(Native Method)
            at java.io.FileInputStream.<init>(Unknown Source)
            at com.android.tools.lint.client.api.LintDriver.findClasses(LintDriver.java:1142)
            at com.android.tools.lint.client.api.LintDriver.checkClasses(LintDriver.java:932)
            at com.android.tools.lint.client.api.LintDriver.runFileDetectors(LintDriver.java:785)
            at com.android.tools.lint.client.api.LintDriver.checkProject(LintDriver.java:661)
            at com.android.tools.lint.client.api.LintDriver.analyze(LintDriver.java:288)
            at com.android.ide.eclipse.adt.internal.lint.LintJob.run(LintJob.java:151)
            at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

# ruby-on-rails - 如何将文件编码为 Rails 3 的 UTF-8？

> ID：13129852
> 
> 赞同：0
> 
> 时间：2012-10-29T21:19:34.970
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, encoding, chardet

我一直在处理 Outlook 导入（在导出到 Outlook 格式中链接），但我遇到了编码问题。我通过导出我的 LinkedIn 联系人获得的 Outlook 格式 CSV 不是 UTF-8。调用. `ñ`_ `mongoid_search`_ `str.to_s.mb_chars.normalize`我认为编码是问题，因为当我打电话时`mb_chars`（[见第一个代码示例](http://apidock.com/rails/String/mb_chars)）。我不确定这是否是 gem 中的错误，但我还是被建议清理数据。

在 File Picker 中，我尝试使用他们新的、社区支持的 gem 来上传 CSV 数据。我尝试了三种编码检测器和转码器：

1.  Python 库的 Ruby 端口`chardet`
    *   没有按预期工作
    *   端口仍然包含 Python 代码，阻止它在我的应用程序中运行
2.  `rchardet19`宝石
    *   放心检测`iso-8859`。`.8/1`
    *   尝试使用 Iconv 转码，但在“非法字符”上崩溃`ñ`
3.  [`Charlock_Holmes`](https://github.com/brianmario/charlock_holmes)宝石
    *   放心检测`windows-1252`_`33/100`
    *   `rchardet`我认为那是实际的编码，并且`iso-8859`是基于此的。
    *   这个 gem 使用 ICU 并有一个支持 Heroku 的维护分支“bundle-icu”。当我尝试使用 转码时`charlock`，我收到错误`U_FILE_ACCESS_ERROR`，ICU 错误代码表示“无法打开文件”

有人知道在这里做什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:27:53.593

Ruby 1.9 内置了编码，你试过吗：

```
s.force_encoding 'utf-8' 
```

mb_chars 是 ruby​​ 1.8 的包装器，因此您不需要它。

见重复

[如何使用 ruby​​ 1.9 转换字符编码](https://stackoverflow.com/questions/3159742/how-to-convert-character-encoding-with-ruby-1-9)

# c# - ScrollViewer 的 ScrollToHorizo ntalOffset 在 Windows 8 应用程序中不起作用

> ID：13129866
> 
> 赞同：1
> 
> 时间：2012-10-29T21:20:35.767
> 
> 标签：c#, xaml, windows-8, microsoft-metro, windows-runtime

我有一个带有 a`ScrollViewer`和 an的 Windows 应用商店应用程序`Image`。当我双击时，`ScrollViewer`我希望它将图像缩放到它的宽度。这部分不是问题，但我也希望在`Image`放大后居中。

我尝试在 上调用该`ScrollToHorizontalOffset`方法，`ScrollViewer`但它似乎不适用于我给它的任何数字。问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-29T06:32:01.740

在滚动查看器中分配一个 SizeChangedEvent。

```
<ScrollViewer SizeChanged="OnSizeChange"></ScrollViewer> 
```

像这样。然后最好将图像放在画布中。所以你的代码可能是这样的。

```
<ScrollViewer SizeChanged="OnSizeChange" x:Name="scrl">
   <Canvas RenderTransformOrigin="0.5,0.5" x:Name="main">
       <Image source="" Canvas.Top="insert desire double value here", Canvas.Left="Same goes here"/>
   </Canvas>
</ScrollViewer> 
```

然后在后面的代码中，您可以根据滚动查看器更改画布的高度和宽度

Main.Width = scrl.ViewPortWidth; Main.Height = scrl.ViewPortHeight;

您可以在`canvass`添加 a 时试验它的大小`double tap event`。更改大小`canvas`可以放大或缩小，`image`因为图像在内部`canvass`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T22:20:37.120

也许偏移量仅适用于您的图像完全填充 ScrollViewer 并因此无法滚动的非缩放视图。您可以尝试设置图像尺寸，使其大于 ScrollViewer，但设置原始 ZoomFactor，使其首先填充 ScrollViewer。然后缩放和滚动可能会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-14T11:57:57.473

尝试使用“ChangeView”而不是“ZoomToFactor”

# android - 使服务成为前台服务

> ID：13129870
> 
> 赞同：6
> 
> 时间：2012-10-29T21:21:04.703
> 
> 标签：android, notifications

我有一项服务，我想创建一个前台服务。我的服务不需要与用户沟通。我在这个论坛上看到的最简单的例子就是把这段代码放在服务中......

```
 Notification notification = new Notification();
    startForeground(5481, notification); 
```

我在 Commonsware book pp 606 中看到了一个更复杂的示例，它使用了通知生成器 (NotificationCompat.Builder)。此示例和其他示例需要提供复杂的通知。我没有这个需求。

我了解，为了使我的软件能够被接受，我必须至少显示一个图标，让用户知道我的服务正在运行，并为用户提供取消它的方法。此外，如果我的服务决定自行停止，该图标应该会消失。但就是这样。这就是我需要做的。

我必须在上面的 tode 中添加什么来实现这一点？谢谢，加里

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T22:20:22.870

你读过[在前台运行服务](http://developer.android.com/guide/components/services.html#Foreground)吗？

您的通知需要一个图标才能显示出来。系统不会显示没有图标的通知。

使用 NotificationCompat.Builder 的原因是 a) 它保持跨平台的兼容性和 b) 使用它，创建简单的通知更容易。您可以使用 Builder 来创建复杂的通知，但也可以使用它来构建简单的通知。

如果不知道您要做什么，很难说更多。

# java - Alt 键在 JTextField 中无法正常工作

> ID：13129877
> 
> 赞同：0
> 
> 时间：2012-10-29T21:21:39.303
> 
> 标签：java, jtextfield, keylistener, key-bindings, alt

我正在尝试使用“Alt”键在 Java 中的两个 JTextField 之间切换。我已经使用了代码：

```
private void GetAltKey(java.awt.event.KeyEvent evt) {
        if (evt.isAltDown()) {
            this.GetVectorDirect(true); //Select another JTextField
        }
} 
```

现在，这种类型的代码可以工作，但不能正常工作。我需要按两次“Alt”键才能真正切换。不仅对于那个键，所有其他键都会发生这种情况 - 立即下一次按键被忽略，即，我需要键入两次才能按相同的键。

有什么更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:27:32.147

发生这种情况是因为`alt`您按下的第一个是触发 GetAltKey 事件（顺便说一下，考虑更改为 getAltKey），请注意，当这种情况发生时，您的`alt`键没有关闭，因此您`evt.isAltDown()`返回 false。

解决方法很简单，把你的`evt.isAltDown()`方法改成`evt.getKeyCode() == KeyEvent.VK_ALT`.

```
private void getAltKey(java.awt.event.KeyEvent evt) {
    if (evt.getKeyCode() == KeyEvent.VK_ALT) {
        this.GetVectorDirect(true); //Select another JTextField
    }
} 
```

我希望它有所帮助。干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T00:06:03.767

我会改用[键绑定 API](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)，键侦听器往往很麻烦，通常会生成很多混乱的`if-else`语句。

```
public class KeyBindingsTransfer {

    public static void main(String[] args) {
        new KeyBindingsTransfer();
    }

    public KeyBindingsTransfer() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TransferPane());
                frame.setSize(200, 200);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    protected class TransferPane extends JPanel {

        private JTextArea left;
        private JTextArea right;

        public TransferPane() {
            setLayout(new GridLayout(1, 2, 4, 4));

            left = new JTextArea();
            right = new JTextArea();

            add(left);
            add(right);

            InputMap inputMap = getInputMap(WHEN_IN_FOCUSED_WINDOW);
            inputMap.put(KeyStroke.getKeyStroke(KeyEvent.VK_ALT, 0, true), "transferOnAlt");

            ActionMap actionMap = getActionMap();
            actionMap.put("transferOnAlt", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    System.out.println("Clicked");
                    if (left.hasFocus()) {
                        right.requestFocusInWindow();
                    } else if (right.hasFocus()) {
                        left.requestFocusInWindow();
                    }
                }
            });

        }

    }

} 
```

# javascript - 是否有任何自动化工具可以从 COLLADA 格式的 3d 模型生成 2d 图像以显示在网站上？

> ID：13129880
> 
> 赞同：4
> 
> 时间：2012-10-29T21:21:42.910
> 
> 标签：javascript, 3d, 2d, webgl, collada

首先，我对 3D 建模的经验很少，所以这可能是一个措辞不佳的问题。如果是这样，那我道歉。

本质上，我有一个大型的 COLLADA 格式 3d 模型数据库，需要在网站的画廊中显示。模型的数量在数千个数量级，因此任何类型的显示格式都最好是自动化的。

我最初的想法是使用 WebGL 以 3D 形式显示这些文件。然而，不幸的是，缺乏来自 Internet Explorer 的支持是一个交易破坏者。

此外，就加载时间而言，任何其他用于 3d 模型显示的 Javascript API 可能都不可行，因为它们不涉及任何类型的硬件加速。

我的下一个最佳选择是从不同角度拍摄多个模型的 2d 图像。但是，由于该数据库中的模型数量众多，几乎不可能手动输出每个模型的 2d 图像。

那么，我的问题是：是否有任何工具可用于从大量 3d 模型中自动生成图像？或者，更好的是，有没有一种方法可以直接从模型中渲染这些图像以显示在浏览器中，而无需过多的加载时间？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:16:43.113

您可以在命令行或 Python API 中使用[meshtool](https://github.com/pycollada/meshtool)从 3D 模型生成 2D 屏幕截图。

这是保存单个屏幕截图的命令行示例：

```
meshtool --load_collada file.dae --save_screenshots ss.png 
```

还有一个命令可以拍摄多个屏幕截图，围绕模型旋转：

```
meshtool --load_collada file.dae --save_rotate_screenshots ss 10 800 600 
```

This would save 10 screenshots of size 800x600 to files named ss.1.png, ss.2.png, etc. You can also use the Python API of meshtool to do any custom export you want. It uses [Panda3D](http://www.panda3d.org/) under the hood, which is very easy to use.

# javascript - 使用 jquery 和 sortable 如何判断用户是否开始移动并将其放回原处

> ID：13129886
> 
> 赞同：0
> 
> 时间：2012-10-29T21:22:14.270
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-sortable

我有一个 UL 列表，里面有很多我正在使用的 li

```
 $( "#group" ).sortable({
                start: function(event, ui) {
                },
                stop: function(event, ui) {
                    enableSave();
                }
            }); 
```

我想做的是--> 如果该人开始移动 LI 并决定将其放回不调用 enableSave();

我以为我可以保存 event.pageX 和 pageY 然后检查 stop ，但是尽管该项目被放回同一个地方，但该值永远不会完全相同

我确信有正确的方法可以做到这一点

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:24:37.010

用于`.index()`获取 中的`li`索引`ul`。存储开始`index`时的开始，然后将其与结束时的索引进行比较。如果它是相同的，它没有移动:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:24:40.443

当调用 start 函数时，您可以获得元素的位置（顶部和左侧），当调用 stop 函数时，再次获取位置并检查它是否相同。如果不是，那么它已被移动。

# c - WinAPI 命名管道位置

> ID：13129891
> 
> 赞同：2
> 
> 时间：2012-10-29T21:22:29.493
> 
> 标签：c, windows, winapi, named-pipes

```
HANDLE pipe = CreateFile( L"\\\\.\\pipe\\my_pipe",
                              GENERIC_READ, // only need read access
                              FILE_SHARE_READ | FILE_SHARE_WRITE,
                              NULL,
                              OPEN_EXISTING,
                              FILE_ATTRIBUTE_NORMAL,
                              NULL ); 
```

我是win api的新手，我想知道在硬盘上创建的“my_pipe”文件在哪里？我在二进制文件或源代码附近找不到它

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T21:24:40.693

Windows 不遵循 UNIX 哲学“一切都是文件”，因此您使用内核 API 创建的命名对象不是文件，而是各种 NT 对象名称空间中的对象。您可以使用[WinObj](http://technet.microsoft.com/en-us/sysinternals/bb896657.aspx)等工具查看它们。

您可能想查看有关Windows 中的[对象管理器的文章。](http://en.wikipedia.org/wiki/Object_Manager_%28Windows%29)

# spring - 我可以选择我的 jpa 存储库的名称吗？

> ID：13129894
> 
> 赞同：2
> 
> 时间：2012-10-29T21:23:05.597
> 
> 标签：spring, repository, spring-data, spring-data-jpa

我必须为扩展 CrudRepository 的接口命名为一个空间名称（我使用 spring 和 Jpa），即

```
public interface UserRepository extends CrudRepository<User, Long> {} 
```

所以在这种情况下，我有一个名为 UserRepository 的实体

我试过注释

```
@Entity(name="UserCustomRepository")
public interface UserRepository extends CrudRepository<User, Long> {} 
```

但它不起作用......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:26:40.020

显然根据文档是不可能的，请参阅[*1.3.3.1。XML配置*](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/#repositories.create-instances.spring)：

> 这些 bean 中的每一个都将在派生自接口名称的 bean 名称下注册，因此接口`UserRepository`将在`userRepository`.

为什么需要自定义名称？除了您的示例`@Entity(name="UserCustomRepository")`完全损坏之外，`@Entity`它还用于标记 JPA 实体，而不是 Spring beans/repositories。

# html - 与左右 div 垂直对齐

> ID：13129897
> 
> 赞同：1
> 
> 时间：2012-10-29T21:23:22.467
> 
> 标签：html, css, vertical-alignment

我有两个div，一个在左边，一个在右边。如果左边的描述比图片长（180px），那么图片会停留在顶部。或者，反之亦然，如果文本比图像短，则文本要在顶部对齐。

我希望两者总是在中间对齐。

我认为我需要的是`display:table-cells`then `vertical-align:middle`，但到目前为止我没有运气让它工作。

```
 <div class="span4">
   <img class="thumbnail" src="http://placehold.it/290x180" width="290" height="180" alt="Second function" />
  </div>
  <div class="span6 offset1">
    <h3>Element</h3>
    <p>Description.</p>
  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:07:19.930

开始看这个： [在另一个div中垂直居中一个div](https://stackoverflow.com/questions/6490252/vertically-centering-a-div-inside-another-div)

采用了那里提到的一些样式元素并将其应用到这里：http: [//jsfiddle.net/kgJ2M/3/](http://jsfiddle.net/kgJ2M/3/)

一旦我将高度值放在单独的 div 中，它就会使描述空间居中，而不是在它刚好适合的盒子内居中。

希望这个问题还不算晚。这似乎是一个普遍的问题。

```
.span4 {
  float:left;
}
.span6{
  height:180px;
  width:100px;
  vertical-align:middle;
  display:table-cell;
  border:1px solid blue;
}
.containerspan {
  border:1px solid green;
  height:200px;
  display:table-cell;
  vertical-align:middle;
  text-align:center;
} 
```

# jquery - 在两个页面之间加载动画 div

> ID：13129898
> 
> 赞同：0
> 
> 时间：2012-10-29T21:23:23.200
> 
> 标签：jquery, css

我在单独的页面上有两个相同的 div - 有没有办法让它们从起始位置登陆页面到第二页上的位置并打开第一个内容 div（蓝色）所以基本上向左动画制作垂直线而不是立方体。

所以从这里[http://www.crazyedits.co.uk/](http://www.crazyedits.co.uk/)

到这里[http://www.crazyedits.co.uk/home.php#](http://www.crazyedits.co.uk/home.php#)并打开第一个彩色 div？

我刚刚开始学习，所以尽量保持简单的窥视（对不起，如果我的问题很明显） - 但我已经尝试了 5 个小时来找到解决方案，但似乎没有任何效果。

登陆页面按钮

```
<div class="button1">
    <div id="icon"><img src="Images/home.png" width="200" height="160" /></div>
    <div id="title">HOME</div>
</div> 
```

内容页面按钮

```
<div>   <div class="content_button1">
    <div ="icon"><a href="#home_page" ><img src="Images/home.png" width="200" height="160" style="border:none;" /></a></div>
    <div id="title"><li><a href="#home_page" >HOME</a></li></div>
    <div id="home_page" class="contain"></div> </div>
</div> 
```

CSS

我认为我遇到的问题是我必须为每个页面上的按钮设置 2 个不同的 css 集 - 一个将它们对齐在中心，一个将它们对齐到左边。因此，如果有一种方法可以让我使用相同的类并且仍然在正方形中获得 4 并且与绝对位置有关，那么我将更接近使其工作

```
/******page buttons*******/

.content_button1{width:199px; height:199px; margin:0px 0px 19px 0px; background-color:#09C;} 
.content_button2{width:199px; height:199px; margin:19px 0px 19px 0px; background-color:#C00;} 
.content_button3{width:199px; height:199px; margin:19px 0px 19px 0px; background-color:#F60;} 
.content_button4{width:199px; height:199px; margin:19px 0px 19px 0px; background-color:#093;} 

/*****landing page buttons*****/

.button1{width:199px; height:199px; float:left; margin:20px ; background-color:#09C;} 
.button2{width:199px; height:199px; float:left; margin:20px ; background-color:#C00;} 
.button3{width:199px; height:199px; float:left; margin:20px ; background-color:#F60;} 
.button4{width:199px; height:199px; float:left; margin:20px ; background-color:#093;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T22:06:10.443

看看这个：[JSFIDDLE](http://jsfiddle.net/9FdKU/1/)

CSS

```
.button {width:199px; height:199px; position:absolute}
#top-left {background-color:#09C;} 
#top-rite {background-color:#C00;}
#bot-left {background-color:#F60;}
#bot-rite {background-color:#093;}

#top-left.pos  {left:50%; margin-left: -110px; top:0px; }
#top-rite.pos  {left:50%; margin-left: 110px; top:0px; }
#bot-left.pos  {left:50%; margin-left: -110px; top:220px; }
#bot-rite.pos  {left:50%; margin-left: 110px; top:220px; }​ 
```

您可以看到类和 ID 的结构方式使得您可以轻松地获得向左移动的位置。如果你想要一些流畅的动画效果，你可能想看看这个：[http ://api.jquery.com/animate](http://api.jquery.com/animate)

jQuery

```
$(document).ready(function(){
    $('.button').click(function(){

        $('#center_content').css('margin-top','0');
        $('#top-left').css('left','0').css('margin-left','0').css('top','10px');
        $('#top-rite').css('left','0').css('margin-left','0').css('top','220px');
        $('#bot-left').css('left','0').css('margin-left','0').css('top','430px');
        $('#bot-rite').css('left','0').css('margin-left','0').css('top','640px');
    });        
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T22:57:50.747

您不能真正在 2 个页面之间制作动画，因为第 2 页是在浏览器中加载的，并且动画是通过 JS 完成的。最好的解决方案是将您的东西放在一个页面中并使用绝对位置进行播放。

我写了一段可能有点复杂的代码，但我评论了很多，为了向你解释所有的东西。

四个正方形首先位于页面中心，并在您调整窗口大小时重新定位。

然后，当您单击四个正方形之一时，将启动动画并显示相应的内容。

之后，点击另一个方块会出现相应的内容。

祝你好运 ！

[http://fiddle.jshell.net/4SZXT/11/](http://fiddle.jshell.net/4SZXT/11/) <-- 代码在这里

# powershell - 使用 Powershell 将文件从一台远程服务器复制到另一台远程服务器

> ID：13129900
> 
> 赞同：1
> 
> 时间：2012-10-29T21:23:51.803
> 
> 标签：powershell, powershell-2.0

我正在尝试使用 Powershell 将文件从服务器 A 复制到服务器 B。两台服务器都属于我们的托管服务提供商，因此与将文件从本地机器复制到任一服务器相比，将文件从 A 复制到 B 非常快。我想我可以使用 Powershell 在 serverA 上运行远程命令并将文件复制到 serverB。这就是我想出的：

```
$SourceServerName = "serverA"
$SourceContentPath = "\\serverA\c$\testSrc"
$DestinationContentPath = "\\serverB\c$\testDest"

Invoke-Command -ComputerName $SourceServerName -ScriptBlock {param ($SourcePath,$InstallPath) 
                Copy-Item -Path $SourcePath\* -Destination $InstallPath -Recurse
            } -ArgumentList $SourceContentPath, $DestinationContentPath 
```

但我收到一个错误“System.Management.Automation.RemoteException：访问路径'testDest'被拒绝。

我是管理员，并且在两个盒子上都正确配置了 WinRM。如果我尝试在同一服务器内远程复制文件（即从 \\serverA\c$\testSrc 到 \\serverA\c$\testDest），一切正常。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:06:09.270

`Invoke-Command`在您当前的用户（您当前登录到您的机器的用户）下执行。您应该将`-Credential`您的参数设置`Invoke-Command`为目标系统的管理员用户

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:25:55.587

服务器 A 上的 cmdlet 不会像您一样执行。

两种可能的解决方案：

### 最简单的：

```
$SourceServerName = "serverA"
$SourceContentPath = "\\serverA\c$\testSrc"
$DestinationContentPath = "\\serverB\c$\testDest"
$cred = Get-Credential # input your username and password of serverB here

Invoke-Command -ComputerName $SourceServerName -ScriptBlock {param ($SourcePath,$InstallPath, $cred) 
            Copy-Item -Path $SourcePath\* -Destination $InstallPath -Recurse -Credential $cred
        } -ArgumentList $SourceContentPath, $DestinationContentPath, $cred 
```

### 域用户解决方案：

如果您是域用户，并且可以控制这两台计算机，您可以通过`Enable-WSManCredSSP`在本地计算机和服务器 A 上的 PowerShell 中启用 CredSSP，然后添加`-Authentication CredSSP`in `Invoke-Command`.

# youtube-api - youtube“无法将消息发布到...”导致无法跟踪视频分析

> ID：13129902
> 
> 赞同：2
> 
> 时间：2012-10-29T21:24:00.053
> 
> 标签：youtube-api

我们目前在我们的主页上嵌入了一个 youtube 视频。在控制台中单击播放后，我们会看到以下消息：

无法将消息发布到[http://www.youtube.com](http://www.youtube.com)。收件人来自[http://www.stitchlabs.com](http://www.stitchlabs.com)。

在之前的 youtube google 小组中，它说这个错误是无害的，而且似乎与播放有关，但我们注意到了其他问题。我注意到的是，我们的 youtube 帐户的视频分析中没有记录回放。这是针对我们主页和旅游页面 (www.stitchlabs.com) 上的视频播放的。正在记录从我们的视频页面或任何其他渠道合作伙伴嵌入的视频页面的回放。知道这些是否相关，如果不是，可能是什么原因造成的？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:42:14.703

“无法将消息发布到……”警告不会影响您的分析。当对 postMessage 的调用发送到尚未完成加载的窗口时，会出现此警告。玩家试图尽早发布消息以确保 api 尽快准备好，而不是等到 onLoad 事件可能会在 api 准备好使用后触发。

对于分析部分，如果计算观看次数，可能会产生很多影响。例如，自动播放和脚本播放不计入您的观看次数。这是一个带有详细信息的线程。

[https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/ZZWcKmfFUvM](https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/ZZWcKmfFUvM)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T04:18:11.940

我不知道这两个问题是否相关，但您可以尝试使用此解决方案解决第一个问题：

[在 Manifest V2 下的 Google Chrome 扩展程序中使用 YouTube 的 PlayerAPI - 有效，但会产生大量警告](https://stackoverflow.com/questions/12411290/using-youtubes-playerapi-inside-of-a-google-chrome-extension-under-manifest-v2)

> 无法将消息发布到[http://www.youtube.com](http://www.youtube.com)通过使用 $(window).load() 而不是 $(document).ready 包装 YTPlayer 实例化代码来解决。

看看是否能解决第二个问题

# jquery - 如何调试通过 AJAX（特别是 jQuery）加载的 Javascript

> ID：13129904
> 
> 赞同：54
> 
> 时间：2012-10-29T21:24:01.290
> 
> 标签：jquery, ajax, xmlhttprequest, firebug, google-chrome-devtools

我最近用更复杂的项目改变了我的编码风格，以“按需”加载页面（及其嵌入式脚本）。但是，在加载这些脚本时很难调试它们，例如：

```
jQuery.get('/myModularPage', function(html){ /* insert the loaded page into the DOM */ }); 
```

或者

```
$('#some-container').load('/myOtherPage'); 
```

这些脚本运行完美，但如果我在调试，如何在这些动态加载的页面和脚本中设置断点？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-10-29T21:36:16.660

将此添加到您希望它中断的 js 文件中：

```
debugger; 
```

然后像任何其他调试器一样进入/结束/退出。

适用于动态加载的脚本和页面。据我所知，仅适用于 Chrome。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-10-29T21:24:01.290

**更新**

接受的表格现在带有`#`(hashtag) 而不是`@`(at symbol)

语法已更改以避免与 IE 条件编译语句和其他一些问题发生冲突（感谢 Oleksandr Pshenychnyy 和 Varunkumar Nagarajan 指出这一点）

```
//#sourceURL=/path/to/file 
```

这实际上可以是任何可以帮助您识别代码块的字符串。

JMac 的另一个优点：

> 对我来说，js 文件显示在一个名为“（无域）”的组内的源列表中。可能值得一提，因为我一开始就错过了！

**原来的**

[在阅读这篇文章](http://blog.getfirebug.com/2009/08/11/give-your-eval-a-name-with-sourceurl/)之前，我在上面挣扎了大约一个星期。它确实非常适合我的开发环境（我写这篇文章时是 Chrome 22）。

> Firebug 还支持开发人员命名的 eval() 缓冲区：只需在 eval(expression) 的末尾添加一行，例如：
> 
> ```
> //@ sourceURL=foo.js 
> ```

例如，给定这个简单的 html 文档：

```
<!DOCTYPE html>
<html>
<body>
    <p>My page's content</p>
    <div id="counter"></div>
    <script type="text/javascript">
        //if this page is loaded into the DOM via ajax 
        //the following code can't be debugged 
        //(or even browsed in dev-tools)

        for(i=0;i<10;i+=1) {
            document.getElementById('counter').innerText = i;
        }

        //but if I add the line below
        //it will "magically" show up in Dev Tools (or Firebug)

        //@ sourceURL=/path/to/my/ajaxed/page
    </script>
<body>
</html> 
```

我还没有发现的东西：

*   是否必须为内联脚本的每个脚本块执行此操作？
*   它必须是脚本块的最后一行吗？（这篇文章建议答案是**肯定**的）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-05-16T17:39:43.477

这个问题看起来现在已经使用[新的 pragma](http://updates.html5rocks.com/2013/06/sourceMappingURL-and-sourceURL-syntax-changed)解决了：

```
//# sourceURL=filename 
```

请注意“哈希”`#`而不是“at”`@`符号。

通过在源代码中包含该行，对它的引用将显示在调试器中！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-30T05:05:55.520

正如您已经提到的，您可以使用`//@ sourceURL`. Chrome 似乎不支持`//@ sourceURL`内联脚本。它确实适用于 eval 表达式。[这篇关于源映射的 HTML5 文章](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/)提供了有关命名 eval 块和命名代码中任何匿名函数的更多详细信息。

您可以尝试嵌入脚本标签或 JSONP，而不是使用 eval。

# d3.js - 仅选择使用 d3.js 更新元素

> ID：13129913
> 
> 赞同：5
> 
> 时间：2012-10-29T21:24:35.833
> 
> 标签：d3.js

有`d3.js` `join`没有办法只选择与“输入”元素分开的“更新”元素？

```
updateAndEnter = d3.selectAll('element').data(data);

entering = updateAndEnter.enter();

exiting = updateAndEnter.exit();

updatingOnly = ??; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-29T22:17:00.547

是的，数据连接之后的选择包含“仅更新”元素。在附加到 enter() 选择之后，它将被扩展以包括输入元素。

请参阅[一般更新模式](http://bl.ocks.org/3808218)：

```
 // DATA JOIN
  // Join new data with old elements, if any.
  var text = svg.selectAll("text")
      .data(data);

  // UPDATE
  // Update old elements as needed.
  text.attr("class", "update");

  // ENTER
  // Create new elements as needed.
  text.enter().append("text")
      .attr("class", "enter")
      .attr("x", function(d, i) { return i * 32; })
      .attr("dy", ".35em");

  // ENTER + UPDATE
  // Appending to the enter selection expands the update selection to include
  // entering elements; so, operations on the update selection after appending to
  // the enter selection will apply to both entering and updating nodes.
  text.text(function(d) { return d; });

  // EXIT
  // Remove old elements as needed.
  text.exit().remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-03T13:58:52.773

这是我的荣幸

对我来说（也是）这有点令人困惑：似乎唯一可用的设置实际上是 ENTER+UPDATE（混合在一起）和 EXIT。

但是，如果我想工作或至少只识别更新的元素怎么办？我编写了一个非常简单的函数（接下来，只需将其包装在基本 html 页面末尾的脚本标记中）显示了这个简单的难题：如何突出显示更新的元素？只有 ENTER 和 EXIT 似乎反应“正确”

要测试它，只需输入 chrome 控制台：

```
manage_p(['append','a few','paragraph'])
manage_p(['append','a few','new','paragraph'])
manage_p(['append','paragraphs']) 
```

我可以得到绿色或红色突出显示，我不能得到白色

也许我们缺少 D3Js 规范？

最好的问候，法布里齐奥

```
function join_p(dataSet) {

var el = d3.select('body');
var join = el
.selectAll('p')
.data(dataSet);

join.enter().append('p').style('background-color','white');

join.style('background-color','green').text(function(d) { return d; });

join.exit().text('eliminato').style('background-color','red');
} 
```

# php - PHP 匹配 URI 到模式

> ID：13129918
> 
> 赞同：3
> 
> 时间：2012-10-29T21:24:42.200
> 
> 标签：php, uri, match, front-controller

我正在开发一个简单的前端控制器，主要用于学习目的。

我喜欢 Symfony 进行路由的方式，在你的地图中有这样的模式：`/news/{category}/{id}`并将 category 和 id 变量传递给控制器​​。但我的问题是 - 因为我无法使用 RegEx - 我不知道如何将模式与 URI 匹配。

我该怎么搭配

```
/news/{category}/{id} 
```

到

```
/news/tech/5784 
```

我应该允许这样的模式：`/news/*`- where`*`匹配所有内容？或者变量与一些垃圾混合在一起，像这样`/news/{category}_ex/14{id}`？

获取变量和值并不是什么大问题，但编写一个用于匹配的正则表达式才是。

提前谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T21:34:36.870

最简单的方法是使用（正则表达式）命名[的子模式](http://php.net/manual/en/regexp.reference.subpatterns.php)。

```
$regex = '#^/news/(?P<category>[a-z0-9]+)/(?P<id>[0-9]+)$#';
$path  = '/news/tech/5784';

if (preg_match($regex, $path, $matches))
{
    $matches['category'] === 'tech';
    $matches['id']       === '5784';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T21:34:58.227

您最有可能在寻找[PHP 子模式](http://www.php.net/manual/en/regexp.reference.subpatterns.php)

```
$str = '/news/tech/5784';
if (preg_match('~^/news/(?<category>[^/]+)/(?<id>[^/]+)~', $str, $match))
   echo $match['category'] . " - " . $match['id'] . "\n"; 
```

## 输出：

```
tech - 5784 
```

# jquery - 为什么我在悬停过快时遇到间歇性问题？

> ID：13129919
> 
> 赞同：1
> 
> 时间：2012-10-29T21:24:44.040
> 
> 标签：jquery, intermittent

我遇到了一个问题，因为如果我快速将鼠标悬停在元素上，该元素不会被隐藏。如果我缓慢/正常地悬停，它会按照我的预期工作。这是我的 jQuery：

```
$(".A").mouseenter(function(){
    $("#arrow").hide();
    $('.1').fadeIn('fast');
}).mouseleave(function(){
    $('.1').hide();
    $("#arrow").fadeIn('fast');
}); 

$(".B").mouseenter(function(){
    $("#arrow").hide();
    $('.2').fadeIn('fast');
}).mouseleave(function(){
    $('.2').hide();
    $("#arrow").fadeIn('fast');
}); 

$(".C").mouseenter(function(){
    $("#arrow").hide();
    $('.3').fadeIn('fast');
}).mouseleave(function(){
    $('.3').hide();
    $("#arrow").fadeIn('fast');
}); 
```

这是我的html：

```
<div class="three columns arrow_father">
    <img id="arrow" src="images/graph.png" alt="" />
    <img class='rec_img hidden 1' src='img1.jpg' alt='caption 3' data-caption='#htmlCaption3' />
    <img class='rec_img hidden 2' src='img2.jpg' alt='caption 3' data-caption='#htmlCaption3' />
    <img class='rec_img hidden 3' src='img3.jpg' alt='caption 3' data-caption='#htmlCaption3' />
</div> 
```

PS：我确定我的 jQuery 搞砸了，必须有办法让它更短/更整洁/更整洁，我们将不胜感激建议；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:30:28.567

在开始一个新动画之前停止所有先前排队的动画，例如：

```
$("#arrow").stop(true, true).hide();
$('.1').stop(true, true).fadeIn('fast'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:47:13.233

我认为最好先把你`img`放在 a 中`<a id="" href=""><img/></a>`，所以例如你可以写这个代码：

```
 $(document).ready(function(){
   $("#").click(function(){
   $("").show();
   });
   }); 
```

# asp.net-mvc - 发现 ASP.NET MVC 错误页面但收到 Elmah 电子邮件

> ID：13129921
> 
> 赞同：0
> 
> 时间：2012-10-29T21:24:58.877
> 
> 标签：asp.net-mvc, error-handling, elmah

我的 ErrorsController 中有一个位于 Errors/Error 的错误页面。如果我创建一个错误，它会将我重定向到该页面。但是，我收到一封来自 Elmah 的错误电子邮件，其中说明了以下消息。即使我的错误页面显示正常，我也收到此消息是否有原因？

```
System.InvalidOperationException: The view 'Error' or its master was not found or no view engine supports the searched locations. The following locations were searched: ~/Views/divisions/Error.cshtml ~/Views/divisions/Error.vbhtml ~/Views/Shared/Error.cshtml ~/Views/Shared/Error.vbhtml 
```

**网络配置**

```
 <customErrors mode="Off" defaultRedirect="~/Error">
          <error statusCode="404" redirect="~/PageNotFound" />
      </customErrors> 
```

# php - 如何使用 PHP 做 SQL 的 GROUP BY？

> ID：13129926
> 
> 赞同：2
> 
> 时间：2012-10-29T21:25:45.640
> 
> 标签：php, sql, arrays, group-by, grouping

我想从数据库表中选择行并使用 PHP 而不是基于参数的 SQL 对它们进行分组（在本例中是按项目）。

SQL：

```
Clothes table

 id  item     owner
 1   shoes     joe 
 2   pants     joe
 3   hat       joe
 4   pants     joe
 5   hat       tom

SELECT * from Clothes where owner='joe'

 1   shoes     joe 
 2   pants     joe
 3   hat       joe
 4   pants     joe 
```

以下是我希望使用 PHP 而不是 SQL 来处理结果的方式`GROUP BY item`

PHP：

```
 1   shoes     joe 
 2   pants     joe   //count 2
 3   hat       joe 
```

我确定有一个 PHP 数组函数，我只是不熟悉，想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T21:40:15.717

最简单的方法是利用数组键的唯一性：

```
$grouped = array();

while ($row = $db->fetchResult()) {  // or however you get your data
    if (isset($grouped[$row['item']])) {
        $grouped[$row['item']]['count']++;
    } else {
        $grouped[$row['item']] = $row + array('count' => 1);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T21:36:03.527

使用伪代码进行数据库访问功能，我相信这应该可行：

```
$sql = "SELECT * from Clothes where owner='joe'";
$res = query($sql);
$arr = array();    

while ($row = $res->fetch())
{
    $arr[] = $row['item'];
}

$arr = array_unique($arr); 
```

您应该注意，这可能会给您一个“稀疏数组”（换句话说，键中可能存在间隙）。正如评论中所说，如果您有该选项，通常最好在 SQL 中执行此操作。即使这意味着执行两个类似的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T21:40:45.207

```
function group($items, $field) {
    $return = array();

    foreach ($items as $item) {
        $key = $item[$field];

        if (isset($return[$key])) {
            $return[$key]['count']++;
        } else {
            $return[$key] = $item;
            $return[$key]['count'] = 1;
        }
    }

    return $return;
}

print_r(group($results, "item")); 
```

# node.js - Socket.io/Node.JS 数组元素传输

> ID：13129928
> 
> 赞同：0
> 
> 时间：2012-10-29T21:25:54.477
> 
> 标签：node.js, websocket, socket.io

我有一组画布元素，每个元素都负责使用定义的函数与这些元素进行交互。

我有，虽然有问题。

每当我尝试通过 socket.io 传输当前单击的画布元素时，识别 previousInfo 变量似乎存在问题，该变量应该存储光标所在位置的信息。

例子：

```
canvas[i].onTouchStart = onTouchStartEventFunction;

canvas[i].onTouchMove = onTouchMoveEventFunction;

canvas[i].onTouchEnd = onTouchEndEventFunction; 
```

这将创建画布数组并将每个实例存储在数组中。

功能：

```
var onTouchStartEventFunction = function(info, index, count, event) {
draw(info.layerX, info.layerY, event.type, info.layerX, info.layerY, this);
    socket.emit('touchevent', {
        x: info.layerX,
        y: info.layerY,
        e: event.type,
        px: info.layerX,
        py: info.layerY,
        idx: this
});
}

var onTouchMoveEventFunction = function(info, index, count, previousInfo, event) {
if(previousInfo === null) 
{} 
else {
    document.getElementById("timer").innerHTML = "X: " + info.layerX + " Y: " + info.layerY + " pX:" + previousInfo.layerX + " pY:" + previousInfo.layerY;
    draw(info.layerX, info.layerY, event.type, previousInfo.layerX, previousInfo.layerY, this);
    socket.emit('touchevent', {
        x: info.layerX,
        y: info.layerY,
        e: event.type,
        px: previousInfo.layerX,
        py: previousInfo.layerY,
        idx: this
    });
}
}

var onTouchEndEventFunction = function(info, index, count, event) {
draw(info.layerX, info.layerY, event.type, info.layerX, info.layerY, this);
socket.emit('touchevent', {
    x: info.layerX, 
    y: info.layerY,
    e: event.type,
    px: info.layerX,
    py: info.layerY,
    idx: this
});
} 
```

如果我不通过套接字传递 'idx:this' 一切正常，并且 previousInfo 按预期工作。但是，每当我开始使用“idx:this”时，pX 和 pY（previousInfo X 和 Y 坐标）总是相同的，没有变化。

最糟糕的是，每一个实例都会发生这种情况，而且无论我点击哪里，pX 和 pY 点总是保持不变。

那么，鉴于此，谁能指出我做错了什么？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:28:42.610

我们的问题描述中似乎缺少一些东西，但我会尝试创建一个自调用函数：

```
 var onTouchEndEventFunction = function(info, index, count, event) {
     draw(info.layerX, info.layerY, event.type, info.layerX, info.layerY, this);
     (function (canvas) {
        socket.emit('touchevent', {
            x: info.layerX, 
            y: info.layerY,
            e: event.type,
            px: info.layerX,
            py: info.layerY,
            idx: canvas
    });)(this);
  } 
```

# iphone - 发送 ASIFormDataRequest 请求

> ID：13129935
> 
> 赞同：0
> 
> 时间：2012-10-29T21:26:56.237
> 
> 标签：iphone, mysql, ipad, asiformdatarequest

我正在尝试将数据从 iPhone 发送到 php 文件以在 mySql 中插入一些数据

在 iPhone 中，我编写了以下代码：

```
-(IBAction) SendToServer{

NSString *phpUrl = @"http://mamdouhsaleh.com/myFolder/RegisteredPersons.php";

NSString *dbName = @"my_dbName";
NSString *localHost = @"localhost";
NSString *dbUser = @"my_userName";
NSString *dbPwd = @"my_password";

NSString *PersonName2 = personName.text;
NSString *CourseTitle2 = courseTitle.text;
NSString *MobileNo2 = mobileNo.text;
NSString *Email2 = email.text;

NSURL *link = [NSURL URLWithString:[phpUrl stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:link];

[request setRequestMethod:@"POST"];
[request setPostValue:dbName forKey:@"dbName"];
[request setPostValue:localHost forKey:@"localHost"];
[request setPostValue:dbUser forKey:@"dbUser"];
[request setPostValue:dbPwd forKey:@"dbPwd"];
[request setPostValue:@"" forKey:@"submit"];

[request setPostValue:PersonName2 forKey:@"PersonName"];
[request setPostValue:CourseTitle2 forKey:@"CourseTitle"];
[request setPostValue:MobileNo2 forKey:@"MobileNo"];
[request setPostValue:Email2 forKey:@"Email"];

[request setTimeOutSeconds:120];
[request setDelegate:self];
NSError *error = [request error];
[request startAsynchronous];

NSDictionary *questions = nil;
if (!error) {
    NSData *response = [request responseData];
    NSString *json = [[NSString alloc] initWithData:response encoding:NSUTF8StringEncoding];
    questions = [json objectFromJSONString];
    NSLog(@"Data: %@", questions);

}
} 
```

我在 RegisteredPersons.php 上写道：

```
<?php

if (isset($_POST['submit'])) {

$dbName = $_POST['dbName'];
$localHost = $_POST['localHost'];
$dbUser = $_POST['dbUser'];
$dbPwd = $_POST['dbPwd'];

$con = mysql_connect($localHost,$dbUser,$dbPwd);
$db_found = mysql_select_db($dbName);

mysql_query('SET CHARACTER SET UTF8');
mysql_query("SET NAMES utf8; ");

$myPageId = mysql_query("SELECT MAX(ID) FROM RegisteredPersons");
$row = mysql_fetch_row($myPageId);

$personId = $row[0]++;
$PersonName = $_POST['PersonName']; 
$CourseTitle = $_POST['CourseTitle'];
$MobileNo = $_POST['MobileNo']; 
$Email = $_POST['Email']; 

mysql_query("INSERT INTO RegisteredPersons VALUES (". $personId . ", '" . $PersonName . "', '" . $CourseTitle . "', " . $MobileNo . ", '" . $Email . "')");

mysql_close();

}

?> 
```

但插入不会发生在 RegisteredPersons 表中。我的代码有什么问题？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T20:11:44.030

我通过替换 $personId = $row[0]++; 解决了这个问题 由 $personId = $row[0]+1;

# regex - 正则表达式 Perl

> ID：13129941
> 
> 赞同：0
> 
> 时间：2012-10-29T21:27:16.260
> 
> 标签：regex, perl

我正在学习 perl 中的正则表达式，我想要一个类似于下面的函数：

```
sub RegEx() 
{
  my $T = "0,1,";
  my $T2 = "-0:0-0:1-0:2-0:3-0:4-1:0-1:1-1:2-1:3-";

  printf ("T= %s <br>", $T);
  printf ("T2 %s <br>", $T2);

  my @values = split(',', $T);
  foreach my $val (@values) {
         printf ("We are at item %s in T <br>", $val);
         my $temp = $val .":" . "\(\\d\)\+";
         printf ("Rexeg %s <br>",$temp);
         @result = split(/$temp/, $T2);
         foreach my $val2 (@result) {
                printf ("T2- %s <br>", $val2);
         }
   }
} 
```

并根据索引 ($T) 将 $T2 的值解析为数组

但正在显示以下内容

```
T= 0,1 
T2 -0:0-0:1-0:2-0:3-0:4-1:0-1:1-1:2-1:3- 
We are at item 0 in T 
Rexeg 0:(\d)+ 
T2- - 
T2- 0 
T2- - 
T2- 1 
T2- - 
T2- 2 
T2- - 
T2- 3 
T2- - 
T2- 4 
T2- -1:0-1:1-1:2-1:3- 
We are at item 1 in T 
Rexeg 1:(\d)+ 
T2- -0:0-0:1-0:2-0:3-0:4- 
T2- 0 
T2- - 
T2- 1 
T2- - 
T2- 2 
T2- - 
T2- 3 
T2- - 
```

请让我知道为什么我仍然看到

1.  T2- -0:0-0:1-0:2-0:3-0:4- 当正则表达式为 1:(\d)+

2.  “——”

作为@results 的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:41:29.233

`split`没有意义。您不想拆分字符串。你要：

```
my @result = $T2 =~ /$temp/g; 
```

你真的应该`-`在你的模式中包含“”。（考虑当数字达到 10 时会发生什么。）

```
my @result = $T2 =~ /-\Q$val\E:(\d+)/g; 
```

（如果总是数字，`\Q..\E`技术上不需要，但这是一个好习惯。）`$val`

也就是说，我可能只解析 $T2 一次。

```
my $T2 = "-0:0-0:1-0:2-0:3-0:4-1:0-1:1-1:2-1:3-";
my %T2; push @{ $T2{$1} }, $2 while $T2 =~ /-(\d+):(\d+)/g;
...
my @result = @{ $T2{$val} }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:58:32.800

1.  你分手了`1:(\d)+`。第一个匹配元素的左边是什么？你写的字符串。

2.  你分手了`1:(\d)+`。这个正则表达式的两个匹配之间是什么？破折号。

你分手了`1:(\d)+`。这意味着，您将字符串切成部分，并使用正则表达式的结果**作为分隔符**。使用 () 对整数进行通配使其作为正则表达式匹配出现在全局结果中。

现在，您可以向我们解释您想要达到的目标，然后我们也许可以帮助您一一纠正自己。

# c++ - 使用类型 有或没有命名空间

> ID：13129945
> 
> 赞同：15
> 
> 时间：2012-10-29T21:27:39.417
> 
> 标签：c++, stl, c++11

在 C++11 中，我可以选择是否要使用定义的类型，带或不带命名空间 std::

至少我的编译器（g++ 4.7）接受这两种变体。

我的问题是：使用 cstdint 中的 typedef 的推荐方法是什么。有或没有命名空间？有什么优点或缺点？还是只是风格问题？

所以变体a）：

```
#include <cstdint>
std::uint8_t n = 21; 
```

回复：

```
#include <cstdint>
using std::uint8_t;
uint8_t n = 21; 
```

或变体 b)：

```
#include <cstdint>
uint8_t n = 21; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-29T21:35:07.100

首选在`std`命名空间中声明的名称。原因在 §17.6.1.3/4 ( *ISO/IEC 14882:2011(E)* , C++11) 中给出：

> 除了第 18 到 30 条和附录 D 中的说明外，每个头文件*cname*的内容应与相应的头文件*名称*`.h`的内容相同，如 C 标准库 (1.2) 或 C Unicode TR 中规定的，视情况而定，如如果通过包含。但是，在 C++ 标准库中，声明（在 C 中定义为宏的名称除外）在 namespace 的命名空间范围 (3.3.6) 内`std`。`std`未指定这些名称是否首先在全局命名空间范围内声明，然后通过显式*使用声明*(7.3.3)注入命名空间。

如果您使用不带 的`<c`*名称*`>`标题中的名称`std`，则您的程序依赖于未指定的要求。

这在 C++03 和更早版本中有所不同，其中名称只应该出现在`std`命名空间中。然而，现实情况是，许多实现只是将 C 标准库头文件`<`*名称*`.h>`的内容注入到`std`其中，因此在 C++11 中已经适应了这一点。C++03 标准的相应部分（§17.4.1.2/4）说：

> 除第 18 至 27 条中的说明外，每个头*cname*的内容应与相应头*名称*`.h`的内容相同，如 ISO/IEC 9899:1990 编程语言 C（第 7 条）或 ISO/IEC:1990 中规定的编程语言——C 修正案 1：C 完整性，（第 7 条），视情况而定，如同包含。但是，在 C++ 标准库中，声明和定义（在 C 中定义为宏的名称除外）在 namespace 的命名空间范围 (3.3.5) 内`std`。

除此之外，限定名称`std::`有助于避免冲突——如果你完全限定它，你就会确切地知道你得到了什么。如果你真的打算做`using namespace std`or `using std::something`，至少在尽可能小的范围内做。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-29T21:34:46.827

在 C++11 中，对于在 C++ 标准中明确命名的 C 头文件，以下内容成立：

*   <foo.h> 版本**需要**实现才能将它们添加到全局命名空间中，并**允许**将它们添加到`std::`命名空间中。

*   <cfoo> 版本**需要**实现才能将它们添加到`std::`命名空间中，并**允许**将它们添加到全局命名空间中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-29T21:42:39.440

`std`将命名空间中的内容包装在`<cstdint>`标头中的原因是为了避免名称冲突，当它们发生时会非常不愉快。但是，在这种情况下，这些类型不太可能在其他地方找到。所以我会使用`<stdint.h>`，特别是因为这个特性是在`C`它被添加到之前引入的`C++`，因此`<stdint.h>`头文件比 旧`<cstdint>`，因此在旧的编译器中可用。

如果您决定要在全局命名空间中使用这些名称，您还应该更喜欢后跟，因为后者会将您已包含的其他标头中的所有其他内容也转储`<stdint.h>`到全局命名空间中，您可能不想要，因为许多其他标准名称比 uint8_t 之类的名称更容易发生冲突。`<cstdint>``using namespace std``std``<cfoo>`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-12-08T00:11:21.153

包含`<cstdint>`并使用`std::`或包含`<stdint.h>`使用非限定类型名称。有一些平台（例如 QNX SDP 6.6）`<cstdint>`没有在全局命名空间中声明这些类型。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-29T21:35:04.093

我的个人风格是始终完全限定名称，以便清楚它们的来源。也就是说，我会使用`std::uint8_t`. 也就是说，我将包含`<cstdint>`并使用限定名称。

也就是说，请注意，`std::uint8_t`仅当您真的打算使用*正好是*8 位的类型时才指示使用。如果您运行代码的平台没有这样的类型，例如，因为它使用 9 位单元作为其基本实体，则程序不应该编译。如果你想使用最小`unsigned`的 8 位可用，你想使用`uint_least8_t`.

# .net - 有没有办法控制 cookie 被发送到哪些 URL？

> ID：13129947
> 
> 赞同：1
> 
> 时间：2012-10-29T21:27:48.077
> 
> 标签：.net, http, iis, cookies, web

我的会话 cookie 有点长（大约 700 字节），因为它包含各种加密的用户信息等等。我可以做一些事情来缩小那个尺寸，我也在研究这个角度，但这是另一个话题。

我的问题是我不喜欢这个 cookie 在每个 HTTP 请求上被发送到服务器的方式。包括对 JPG 图像、CSS 文件和静态 Javascript 文件的请求。由于这些请求不需要 cookie，我觉得它可能会减慢页面加载时间，因为这是 700 字节 x 页面加载的资源数量。显然，这些文件会被缓存，但我仍然希望我的页面能够尽可能快速流畅地加载。

我能想到的一个解决方案是将我所有的静态内容放在另一个子域上，例如`cdn.myserver.com/images/`and `cdn.myserver.com/scripts/`，并将 cookie-path 设置为仅 include `www.myserver.com`。我相信这会奏效，但它会使开发和登台环境复杂化。我可能最终不得不根据代码运行的环境动态生成 URL。

**我的问题：**

除了上述解决方案之外，还有什么方法可以防止通过网络发送某些 HTTP 请求（例如图像、脚本和样式资源）的 cookie？

我在 .NET 堆栈上运行，使用 IIS7.5 作为 Web 服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T21:40:56.660

从服务器的角度来看，您无能为力。当您的服务器 (IIS) 或您的框架（ASP.NET 或其他）收到请求时，cookie 已经发送。

你提到的绝对有效，引用[RFC 2109（“HTTP 状态管理机制”）](http://www.ietf.org/rfc/rfc2109.txt)（强调我的）：

> 主机名可以指定为 IP 地址或 FQHN 字符串。有时我们将一个主机名与另一个进行比较。主机 A 的名称域匹配主机 B 的 if
> 
> *   两个主机名都是 IP 地址，并且它们的主机名字符串完全匹配；或者
> *   两个主机名都是 FQDN 字符串，并且它们的主机名字符串完全匹配；或者
> *   **A 是 FQDN 字符串，格式为 NB，其中 N 是非空名称字符串，B 格式为 .B'，B' 是 FQDN 字符串。（因此，xycom 域匹配 .y.com 而不是 y.com。）**
> 
> 请注意，域匹配不是交换操作：**abccom 域匹配 .c.com，但不是相反。**

因此，创建一个单独的子域，同时专门将您的 cookie 键入*不同*的子域将起作用。

请注意，这样[做是为了提高页面速度而普遍接受的做法，](http://developer.yahoo.com/performance/rules.html#cookie_free)而[Stack Overflow 自 2009 年底以来一直在这样做](https://blog.stackoverflow.com/2009/08/a-few-speed-improvements/)。

为了降低您的登台和开发环境的复杂性，我建议您遵循此指南；将内容放在单独的域中意味着您不必为任何这些环境做任何不同的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T21:48:30.647

据我所知，唯一的解决方案是使用您提到的无 cookie 域或子域。但请记住，域或子域应该是指向您的主域的规范 DNS 名称。

为了简化开发和暂存环境，我建议您将[CombineAndMinify](http://www.codeproject.com/Articles/125159/Package-that-speeds-up-loading-of-JavaScript-CSS-a)组件与您的 ASP.net 项目一起使用，这样它将在后台满足您的需求，并且它还有一些您可能喜欢使用的其他功能。
另外它有调试|发布模式，所以你可以在调试的时候绕过它。

# javascript - 在 Javascript For 循环中使用变量

> ID：13129950
> 
> 赞同：1
> 
> 时间：2012-10-29T21:27:53.763
> 
> 标签：javascript, variables, checkbox

我的页面上的表单中包含一个复选框。当用户单击按钮时，我需要找出复选框中的哪些项目已被选中。

我可以让它与以下代码一起使用而不会出现任何问题。

```
for (i=0; i < Form3.CBox1.length; i++)
  if (Form3.CBox1[i].checked)
   {
   Answer = Answer + Form3.CBox1[i].value + ",";
   } 
alert(Answer); 
```

我遇到的问题是我在我的页面上多次调用上述函数，我想传入变量而不是硬编码表单和复选框的名称。每次我这样做 Javascript 都不会返回任何东西。以下代码中的变量 vCurrForm 和 vCurrCBox 已在之前的另一个函数中设置，我已经测试以确保它们设置正确，但我仍然无法让这段代码工作。

```
for (i=0; i < vCurrForm.vCurrCBox.length; i++)
  if (vCurrForm.vCurrCBox[i].checked)
   {
   Answer = Answer + vCurrForm.vCurrCBox[i].value + ",";
   } 
alert(Answer); 
```

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:32:29.227

当使用变量作为对象的键时，您需要使用数组语法（即`[]`s），它本身会给我们这个（仍然损坏的）代码：

```
for (i=0; i < vCurrForm[vCurrCBox].length; i++)
{
    if (vCurrForm[vCurrCBox][i].checked)
   {
       Answer = Answer + vCurrForm[vCurrCBox][i].value + ",";
   }
}
alert(Answer); 
```

问题是它`vCurrForm`仍被视为常规旧变量，即使它是该变量的字符串名称。因此，您需要从其父级引用它；`window`：

```
for (i=0; i < window[vCurrForm][vCurrCBox].length; i++)
{
    if (window[vCurrForm][vCurrCBox][i].checked)
   {
       Answer = Answer + window[vCurrForm][vCurrCBox][i].value + ",";
   }
}
alert(Answer); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:38:11.303

如果不了解您如何声明和设置这些值，就很难确定问题所在。它可能与变量被设置到的对象类型或其范围有关。以下是一些需要检查的事项：

1.  确保变量 vCurrForm.vCurrCBox 是一个数组。
2.  确保 vCurrForm 和 vCurrCBox 在被调用函数可访问的范围内声明。
3.  在这种情况下，请确保将 vCurrForm 设置为表单对象，并将 vCurrCBox 设置为复选框控件数组。

查看提供的代码几乎让我认为被引用的变量是针对单个项目（当前复选框）的。在这种情况下，您可能不会得到您正在寻找的结果。

如果可能的话，需要考虑的其他事情是使用 JQuery 来更轻松地获取选中的框并连接它们的值。在 JQuery 中，您的代码可以通过以下方式完成：

```
var Answers = "";
$("input[type='checkbox']:checked").each(function() { Answers += $(this).val() + ", "; }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T21:39:34.723

或者，更好的解决方案是将引用传递给包含元素的数组，而不是与字符串匹配。例如：

```
function getAnswers(items) {
   for (var i = 0; i < items.length; i++)
   {
       if (items[i].checked) {
           Answer = Answer + items[i].value + ",";
       }
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T07:06:57.123

非常感谢您提供的所有帮助。我已经看到了我的方式的错误。

以下对我有用

```
**for (i=0; i < document[vCurrForm][vCurrCBox].length; i++)
    if (document[vCurrForm][vCurrCBox][i].checked)
              {
        Answer = Answer + document[vCurrForm][vCurrCBox][i].value + ",";
        }** 
```

# ruby-on-rails - 如何在 ruby 脚本中访问 rails 方法？

> ID：13129951
> 
> 赞同：0
> 
> 时间：2012-10-29T21:28:02.830
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我在脚本目录中的 rails 应用程序中有一个 ruby​​ 脚本。如何访问`in_time_zone`脚本中的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T21:50:05.363

如果您只需要一种方法，您可以直接敲击`require 'active_support/all'`脚本的顶部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T21:56:46.997

它在`active_support/core_ext`。

```
> require 'active_support/core_ext'
 => true
> d = DateTime.new(2000)
 => Sat, 01 Jan 2000 00:00:00 +0000 
> d.in_time_zone("Alaska")
 => Fri, 31 Dec 1999 15:00:00 AKST -09:00 
> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T21:33:55.777

例如，您可以创建自定义 rake 任务，然后访问应用程序中的所有内容。你可以查看这个[很棒的截屏视频](http://railscasts.com/episodes/66-custom-rake-tasks)

# function - powershell中“x”秒后停止功能

> ID：13129952
> 
> 赞同：2
> 
> 时间：2012-10-29T21:28:19.523
> 
> 标签：function, powershell

我目前有一个侦听指定端口的脚本。我希望这个脚本在 5 秒后停止运行，无论是否连接。有没有办法让我做到这一点？某种延迟

```
function listen-port ($port) {
    $endpoint = new-object System.Net.IPEndPoint ([ipaddress]::any,$port)
    $listener = new-object System.Net.Sockets.TcpListener $endpoint
    $listener.start()
    $listener.AcceptTcpClient() # will block here until connection
    $listener.stop()
    }
listen-port 25 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:59:35.577

如果你不打算对客户做任何事情，那么你不必接受他们，可以停止倾听：

```
function listen-port ($port) {
$endpoint = new-object System.Net.IPEndPoint ([ipaddress]::any,$port)
$listener = new-object System.Net.Sockets.TcpListener $endpoint
$listener.start()
Start-Sleep -s 5
$listener.stop()
} 
```

如果您需要对客户端执行某些操作，可以使用异步 AcceptTcpClient 方法（[BeginAcceptTcpClient](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.beginaccepttcpclient%28v=vs.80%29.aspx)、[EndAcceptTcpClient ）：](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.endaccepttcpclient%28v=vs.80%29.aspx)

```
function listen-port ($port) {
$endpoint = new-object System.Net.IPEndPoint ([ipaddress]::any,$port)
$listener = new-object System.Net.Sockets.TcpListener $endpoint
$listener.start()
$ar = $listener.BeginAcceptTcpClient($null,$null) # will not block here until connection

if ($ar.AsyncWaitHandle.WaitOne([timespan]'0:0:5') -eq $false) 
{ 
 Write-Host "no connection within 5 seconds" 
}
else
{ 
 Write-Host "connection within 5 seconds"
 $client = $listener.EndAcceptTcpClient($ar)
}

$listener.stop()
} 
```

另一种选择是在侦听器上使用[Pending方法：](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.pending%28v=vs.80%29.aspx)

```
function listen-port ($port) {
$endpoint = new-object System.Net.IPEndPoint ([ipaddress]::any,$port)
$listener = new-object System.Net.Sockets.TcpListener $endpoint
$listener.start()
Start-Sleep -s 5

if ($listener.Pending() -eq $false)
{
 Write-Host "nobody connected"
} 
else
{ 
 Write-Host "somebody connected"
 $client = $listener.AcceptTcpClient()
}

$listener.stop()
} 
```

# javascript - 使用 facebook 照片创建相册（灯箱等）

> ID：13129957
> 
> 赞同：2
> 
> 时间：2012-10-29T21:29:05.547
> 
> 标签：javascript, facebook, wordpress, integration

我正在尝试在灯箱（或类似的画廊类型的东西）中显示照片库，但我的客户希望照片来自 Facebook 相册，以避免不得不两次上传照片。

我在 wordpress 中工作，但我环顾了一些可用的插件，它们似乎不太有希望。

我在这里最好的进攻计划是什么？我还没有真正开始深入研究 facebook api，但如果这是你们的建议，我会继续做。我对 javascript 和 php 非常熟悉。在我确定它会起作用之前，我不想进入那个兔子洞。

我只是真的在寻找人们分享一些见解，因为我真的不知道从哪里开始。

编辑：

这就是我被困的地方......

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Facebook Photo Gallery</title>
    <script type='text/javascript' src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script type="text/javascript">

$.getJSON('http://graph.facebook.com/356611067762340/photos').then(function(response) {
        // 0-8, 0 returns the largest available images, 8 the smallest
        var imageIndex = 5;

        var images = _(response.data)
            .chain()
            .pluck('images')
            .pluck(imageIndex)
            .value();

        console.log(images);

        _(images).each(function(image) {
            $('#image-container').append(
                $('<img>').attr('src', image.source)
            );
        });

        });
    </script>

    </head>

    <body>
    <div id="image-container"></div>​

    </body>
    </html> 
```

这对我来说似乎完全有效，为什么它不起作用......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:43:38.003

如果相册是公开的并且归 Facebook 页面（不是个人资料）所有，这应该很容易。我在一个婚礼网站上做到了这一点。

这是我使用的专辑：[https ://www.facebook.com/media/set/?set=a.428653951748.228645.6815841748&type=3](https://www.facebook.com/media/set/?set=a.428653951748.228645.6815841748&type=3)

这是我需要的 Facebook API 端点：http: [//graph.facebook.com/428653951748/photos](http://graph.facebook.com/428653951748/photos)

您只需要能够从 Facebook 相册的 URL 中提取的相册 ID，然后向 graph.facebook.com/[id]/photos 发出请求。你会得到一组很好的图像和不同大小图像的 URL。

例如，使用 jQuery 和 Underscore.js（也在[http://jsfiddle.net/ey2Pd/2/](http://jsfiddle.net/ey2Pd/2/)）：

```
$.getJSON('http://graph.facebook.com/10150198713667381/photos').then(function(response) {

    // 0-8, 0 returns the largest available images, 8 the smallest
    var imageIndex = 4;

    var images = _(response.data).chain()
        .pluck('images')
        .pluck(imageIndex)
    .value();

    _(images).each(function(image) {
        $('#image-container').append(
            $('<img>').attr('src', image.source)
        );
    });

});​ 
```

# php - 需要帮助，PHP 和 mysql 新手

> ID：13129960
> 
> 赞同：-3
> 
> 时间：2012-10-29T21:29:36.747
> 
> 标签：php, mysql, syntax

我对 php 和 MySQL 有点陌生。当我调用下面的函数时，我正在阅读教程并收到上述消息。

```
<?php
function get_subject_by_id($subject_id){
    global $connection;
    $query = "SELECT * FROM subjects WHERE id=" . $subject_id . "LIMIT 1";
    $result_set = mysql_query($query, $connection);
        confirm_query($result_set);
    //if no rowes are returned, fetch array will return false
    if ($subject = mysql_fetch_array($result_set)) {
        return $subject;
    } else { 
        return NULL;
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T21:31:06.433

`$query = "SELECT * FROM subjects WHERE id=" . $subject_id . "LIMIT 1";`

应该

`$query = "SELECT * FROM subjects WHERE id=" . $subject_id . " LIMIT 1";`

注意前面的空格`LIMIT 1`。

但是我们仍然不知道您的问题是什么，因为您没有指定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:42:57.310

这是相同代码的 PDO 版本，以及一些关于 PDO 的好读物

设置您的连接，然后您可以使用 PDO 更安全的查询功能，如下所示：

```
function get_subject_by_id($subject_id){
    $host = 'localhost';
    $dbname = 'name_of_database';
    $user = 'user_name';
    $pass = 'User_password';
    try{
        $DB = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass); 
    }catch(PDOException $e){  
        echo $e->getMessage();  
    }
    $query = "SELECT * FROM subjects WHERE id=? LIMIT 1";
    $result_set = $DB->prepare($query);
    //Include the variables to pass with the query
    $result_set->execute(array($subject_id));
    //You should modify this function to use PDO as well
    confirm_query($result_set);
    //if no rowes are returned, fetch array will return false
    if ($result_set->rowCount()) {
        return $subject;
    } else { 
        return NULL;
    }
} 
```

这里有一些阅读：

[http://www.php.net/manual/en/book.pdo.php](http://www.php.net/manual/en/book.pdo.php)

# testing - 如何提高我的回归测试速度

> ID：13129962
> 
> 赞同：1
> 
> 时间：2012-10-29T21:29:48.260
> 
> 标签：testing

我发现自己经常从 IDE 运行我的应用程序，测试了很多更简单的更改，我发现它会拖慢我的开发时间，但如果我不这样做，我担心以前的依赖工作会出现错误。在可能需要几分钟才能构建的大型产品环境中 - 每个人多久进行一次实际测试？你如何处理潜在的错误代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T21:37:49.653

自动化回归测试是提高开发速度的最佳投资之一。

这是你应该更聪明而不是更努力地工作的领域。有大量关于自动化测试的已发布信息。你应该尽可能地这样做。

示例范围从数据测试、单元测试到集成和 UI 测试。所有这些都可以在某种程度上自动化，让您的生活更轻松。有太多工具和实践要列出，但我曾经使用过一个站点[http://www.opensourcetesting.org/resources.php](http://www.opensourcetesting.org/resources.php)，它可能是您的切入点。还有很多关于这些主题的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:40:37.683

我做的几件事：

*   防御性代码：
    *   自由地使用断言来测试假设（对于生产代码，总是可以关闭断言：尽管有些公司在发布带有断言的代码以使诊断问题行为更容易——即使开销高达约 30%）
    *   相互怀疑：始终在使用单元之前验证对单元的输入
    *   白名单而不是黑名单：指定什么构成“有效”行为通常比试图列举所有可能失败的方式更容易。
*   代码审查：
    *   通过 ReviewBoard 等开源软件使用代码审查流程已被证明可以提高整体开发速度/质量。
*   冒烟测试：在进行更长时间的测试之前检查基本假设/行为的简单、廉价的测试 - 这可以为您节省大量时间。
*   单元测试：
    *   为您编写的每个代码单元包括自包含测试：代码块、函数/方法、类、包……等等
    *   一旦可以测试您编写的最小代码块，就对其进行测试-它将为您节省时间。
    *   利用一个测试框架自动运行这些
*   回归测试：
    *   更改后测试所有内容以确保没有任何问题。这些通常需要更长的时间才能运行，因此您可能必须在夜间构建中执行这些操作。
*   在编写代码之前编写测试：
    *   首先编写测试可以帮助您准确了解程序应该做什么/行为。
    *   它可以帮助您完全按照规范进行编码

# node.js - 节点中许多异步任务的设计模式

> ID：13129969
> 
> 赞同：4
> 
> 时间：2012-10-29T21:30:45.890
> 
> 标签：node.js, design-patterns, asynchronous

我正在学习节点并编写 API。我的一个 API 调用采用一个名为 Tags 的参数，该参数将包含逗号分隔的标签，我希望将每个标签保存到磁盘（我使用的是 MongoDB + Mongoose）。通常，当我在我的 API 中保存到数据库时，我会传递一个回调并在该回调内部保存后继续，但是在这里我有可变数量的对象要保存到磁盘，而且我不知道保存所有对象的最干净方法将这些标签复制到磁盘，然后保存引用它们的对象。任何人都可以建议使用干净的异步模式吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T21:32:41.763

[async](https://github.com/caolan/async)对于这些任务来说是一个很好的节点库..

并行或串行运行多个异步调用，然后触发一个回调：

```
async.parallel([
    function(){ ... },
    function(){ ... }
], callback);

async.series([
    function(){ ... },
    function(){ ... }
]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T21:39:41.680

当我不想要额外的依赖项时，这是我经常使用的常见代码模式：

```
var tags = ['tag1', 'tag2', 'tag3'];
var wait = tags.length;
tags.forEach(function (tag) {
    doAsyncJob(tag, done);
});

function done() {
    if (--wait === 0) allDone();
} 
```

此代码将为数组的每个项目并行运行 doAsyncJob(tag, callback)，并在每个作业完成时调用 allDone。如果您需要连续处理数据（一个接一个），这是另一种模式：

```
(function oneIteration() {
    var item = tags.shift();
    if (item) {
        doAsyncJob(item, oneIteration);
    } else {
        allDone();
    }
})(); 
```

# asp.net-mvc-3 - 视图或控制器上的字符串格式？

> ID：13129971
> 
> 赞同：0
> 
> 时间：2012-10-29T21:31:04.217
> 
> 标签：asp.net-mvc-3

这个“asp.net mvc”的新手，但熟悉移动应用程序的 mvp 模式（mvc#）。

所需的业务逻辑是以“1.03”之类的格式显示“固件版本”。

我发现它可以在 Controller 中格式化：

```
ViewBag.deviceFirmwareVersion = String.Format("{0}.{1}", result.VERSION_MAJOR[0], result.VERSION_MINOR[0]); 
```

或在视图中：

```
<td>@String.Format("{0}.{1}", Model.VERSION_MAJOR[0], Model.VERSION_MINOR[0])</td> 
```

那么，有什么区别呢？当然，我更喜欢在 Controller 中执行此操作。Mvc# 使视图尽可能简单（哑视图），让它取决于演示者做什么。这里有类似的规则吗？

[2012 年 11 月 2 日] 也许我的问题有点偏离重点，我最终创建了视图模型，在其中我从数据实体中提取必要的部分并将它们格式化以供查看。[这个链接](http://blogs.msdn.com/b/simonince/archive/2010/01/26/view-models-in-asp-net-mvc.aspx)帮助了我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T21:40:25.860

使用 MVC 范例，所有关于*显示*信息的事情都必须在视图中描述，因为信息可以以不同的格式（HTML、JSON、XML）获取，如果您在控制器中格式化数据，那么您必须检查每种类型的您可以显示的格式。*如果你现在*只使用 HTML 可以很容易地在控制器中设置数据格式，但进一步会给你带来麻烦。

（抱歉英语不好）

# java - 实现类

> ID：13129973
> 
> 赞同：0
> 
> 时间：2012-10-29T21:31:08.260
> 
> 标签：java, class

这些天我正在努力学习java。现在我刚刚学会了如何使用多个类并且我正在构建游戏“砖块破坏者”，但我不明白为什么这不起作用。

```
 public void run() {
    BricksandBox world = new BricksandBox();
    world.createWorld();
} 
```

这是来自“BricksandBox”的部分代码：

```
public void createWorld(){
        buildCanvas();
        int i = 0;
        while(i < NBRICK_ROWS){
        i++;
        createARow();
        setCollumNumber();

        }
    }
    /*builds the gamecenter */
    private void buildCanvas(){
        GRect can = new GRect(APPLICATION_WIDTH, APPLICATION_HEIGHT);
        add(can);

    }

    private void createARow(){

        for (int i = 1; i <= NBRICKS_PER_ROW; i++){
            //int y = the brickYoffset + BrickHeight+BrickSep this moves
            // the brick one down. 
            int y = BRICK_Y_OFFSET+((BRICK_SEP+BRICK_HEIGHT)*collumNumber);
            /* 
             * i-1 because it can't be set to zero. else there will be 11 bricks.
             * so you do i-1.
             */
            int x = BRICK_SEP/2+(BRICK_SEP*(i-1))+(BRICK_WIDTH*(i-1));
            GRect brick = new GRect(x,y,BRICK_WIDTH,BRICK_HEIGHT);
            brick.setFilled(true);

            //setting the color
            if(collumNumber <= 1){
                brick.setColor(Color.RED);
            }
            else if(collumNumber <= 3){
                brick.setColor(Color.ORANGE);
            }
            else if(collumNumber <= 5){
                brick.setColor(Color.YELLOW);
            }
            else if(collumNumber <= 7){
                brick.setColor(Color.GREEN);
            }
            else if(collumNumber <= 9){
                brick.setColor(Color.CYAN);
            }
            add(brick);
            }

    }   

    private void setCollumNumber(){
        //MeeBezig. create a value that counts up from 1 to 10.
        //1 is the first row number. 2 is the second row number etc...
        int x = BRICK_SEP/2+(BRICK_SEP*collumNumber)+(BRICK_WIDTH*collumNumber/2);
        int y = BRICK_Y_OFFSET+((BRICK_HEIGHT)*collumNumber);

        if(contains(x,y)){

            collumNumber++;

            }

    }

    /** 
     * a number that counts from one to ten
     */
    private int collumNumber;' 
```

首先，这部分只是在主文件中。但是为了分解，我试图把它放在一个不同的类中。但是现在当我运行程序时，它只显示一个空白画布。

提前致谢！

# asp.net - Dynamic Checkbox event handler asp.net

> ID：13129978
> 
> 赞同：0
> 
> 时间：2012-10-29T21:31:27.070
> 
> 标签：asp.net, .net, c#-4.0

I found a few questions related to this, but none that I could figure out how to apply to my issue. Anyway, I have a ASP webform that pulls questions and answers from a database and puts them in a table. In the table, I have a column with a checkbox where the user can flag questions. My problem is that event handler for the CheckChanged event is not firing. I read some things about postback and whatnot, but my issue is that these controls are not created until the retrieve question button is pressed. Any help or pointers would be great.

Thanks,

Joseph

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.SqlClient;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace ScienceAssessmentToolASP
{
public partial class createnewtest : System.Web.UI.Page
{
    private int n;
    private SqlConnection conn = null;
    private List<int> flaggedQuestions = new List<int>();

    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        try
        {
            GetConn();
            ExecuteRetrieval();
            n = 1;
        }
        catch (Exception ex) { n = 0; Response.Write("for debugging: " + ex); }
        finally { if (conn != null) conn.Close(); }
        if (n < 0)
            //Label1.Text = "Connection Successful";
            Label3.Text = "Failed to Connect to Database, please contact the administrator.";           
    }
    private void GetConn()
    {
        string connString = @"
            removed ";

        conn = new SqlConnection(connString);
        conn.Open();
    }

    private void ExecuteRetrieval()
    {
        List<string> names = new List<string>(),
          types = new List<string>();
        SqlDataReader reader = null;

         string query = "select * from [ScienceQA] where [GradeLevel] = " + DropDownList1.Text +
            " and [Topic] = '" + DropDownList2.Text + "';";

        SqlCommand cmd = new SqlCommand(query, conn);

        reader = cmd.ExecuteReader();

        TableHeaderRow headerRow = new TableHeaderRow();
        TableHeaderCell idH = new TableHeaderCell();
        TableHeaderCell questionH = new TableHeaderCell();
        TableHeaderCell answerH = new TableHeaderCell();
        TableHeaderCell flagH = new TableHeaderCell();

        idH.Text = "ID";
        questionH.Text = "Question";
        answerH.Text = "Answer";
        flagH.Text = "Flag";

        headerRow.Cells.Add(idH);
        headerRow.Cells.Add(questionH);
        headerRow.Cells.Add(answerH);
        headerRow.Cells.Add(flagH);
        resultTable.Controls.Add(headerRow);

        while (reader.Read())
        {
            TableRow row = new TableRow();
            TableCell idCell = new TableCell();
            TableCell qCell = new TableCell();
            TableCell aCell = new TableCell();
            TableCell flag = new TableCell();

            idCell.Text = reader[0].ToString();
            qCell.Text = reader[1].ToString();
            aCell.Text = reader[2].ToString();

            CheckBox flagBox = new CheckBox();
            flagBox.ID = "flag" + idCell.Text.ToString();
            //flagBox.Text = "Flag";
            flagBox.CheckedChanged += new System.EventHandler(flagButton_Click);
            flag.Controls.Add(flagBox);

            row.Cells.Add(idCell);
            row.Cells.Add(qCell);
            row.Cells.Add(aCell);
            row.Cells.Add(flag);
            resultTable.Controls.Add(row);          
        }

        Label4.Visible = true;
        flagCounter.Visible = true;
        resultTable.Visible = true;
    }
    protected void flagButton_Click(object sender, EventArgs e) 
    {
        CheckBox lb = (CheckBox)sender;
        int questionID = Convert.ToInt32(lb.Text.Substring(4));

        if (lb.Checked)
        {
            lb.Checked = false;
            flaggedQuestions.Add(questionID);
            flagCounter.Text = Convert.ToString(Convert.ToInt32(flagCounter.Text) - 1);
        }
        else
        {
            lb.Checked = true;
            flaggedQuestions.Remove(questionID); 
            flagCounter.Text = Convert.ToString(Convert.ToInt32(flagCounter.Text) + 1);
        }          
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T21:37:25.303

Try setting [AutoPostBack](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkbox.autopostback.aspx) to true when you create the control:

```
flagBox.AutoPostBack = true; 
```

This makes it so the event will cause a postback. If you don't have this the code won't fire until you submit the form.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T19:17:39.363

I figured it out. I guess I didnt need anything in button handler, since the clicking of the button causing a postback. So I put all the button1 handler stuff in my pageload with a if(postback) check and that worked.

# c# - 单击按钮时调用两次 Ajax 函数

> ID：13129984
> 
> 赞同：0
> 
> 时间：2012-10-29T21:32:13.983
> 
> 标签：c#, jquery, ajax

我在这里看到了几个类似的问题，但我无法解决这个问题。这似乎不是一个投标交易，因为它最终会起作用，但是如果我在调试时单击按钮时尝试使用 Ajax 显示隐藏的 div（模仿弹出窗口）我可以看到方法（ConfirmMaxBid）中的控制器被调用了两次（甚至更多我有时感觉甚至更多次，并通过代码混合流程，即来回走动）。

这是视图

```
@model UI.Models.BidOnAuctionViewModel
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Content/js/BidAndMaxBidConfirmation.js")" type="text/javascript"></script>

@{
   var disableButton = Model.AuctionOpen ? "" : "bid-btn-disabled";     
}

@using (Html.BeginForm("ConfirmMaxBid", "Lot"))
{
  <fieldset>
    <div class="lotdetail-maxbid-row">
        <label>Your Max Bid</label>
        @*<input id="Amount" class="radius2 text-box single-line valid" type="text" name="Amount" data-val-required="The Amount field is required." data-val-number="The field Amount must be a number." data-val="true">*@
        @if (Model.AuctionOpen)
        {
            @Html.TextBoxFor(model => model.Amount, new {@class = "radius2 text-box single-line valid"})
        }
        else
        {
            @Html.TextBoxFor(model => model.Amount, new {@class = "radius2 text-box single-line valid", @disabled = "disabled"})
        }
    </div>
    <input type="submit" id="autobidButton" value="Increase Max bid" class="btn btn-level2 btn-maxbid @disableButton" />
  </fieldset>

  <div id="autoBidConfirmation" class="lotdetail-modal" style="display: none;"> 
    @Html.HiddenFor(model => model.AuctionId)
    @Html.HiddenFor(model => model.AutobidAmount)
    @Html.HiddenFor(model => model.AuctionEventId)
    <h4 id="confirmationMessage"></h4>
    <span id="returnedCorrectedAmount" class="lotdetail-modal-msg"></span>
    <input name="button" value="Place bid" type="submit" class="btn btn-level2" />
    <input id="cancelAutoBid" name="button" value="Cancel" type="submit" class="btn btn-level2 btn-cancel" />
  </div>
} 
```

这是 document.ready 时调用的脚本函数

```
$('#autobidButton').click(function (e) {
    e.preventDefault();
    var model =
        {
            AuctionEventId: $('#AuctionEventId').val(),
            AuctionId: $('#AuctionId').val(),
            Amount: $('#Amount').val()
        };
    $.ajax({
        url: "/Lot/ConfirmMaxBid",
        dataType: 'json',
        type: "POST",
        contentType: 'application/json; charset=utf-8',
        data: JSON.stringify(model),
        success: function (data) {
            var amount = "$" + data.AutobidAmount;
            $('#returnedCorrectedAmount').html(amount);
            $('#AutobidAmount').val(data.AutobidAmount);
            $('#confirmationMessage').text(data.AutobidConfirmationMessage);
            $('#autoBidConfirmation').show();
        }
    });
}); 
```

最后这是方法（该部分至少调用两次，以避免这个问题太长）

```
public ActionResult ConfirmMaxBid(string button, BidOnAuctionViewModel model)
    {
        if(Request.IsAjaxRequest())
        {
            var confirmationMessage = "Confirm your bid";
            var correctedAmount = model.Amount;
            if (!CheckMaxBidFitsIncrementTier(model.Amount, model.AuctionEventId))
            {
                confirmationMessage = "This bid can't be placed, do you want to place the following instead?";
                correctedAmount = CalculateNextBidAmountForWrongMaxAmount(model.Amount, model.AuctionEventId);
            }

            return Json(new
            {
                AutobidAmount = correctedAmount,
                model.AuctionId,
                model.AuctionEventId,
                AutobidConfirmationMessage = confirmationMessage
            });
        }

        if (button == "Place bid")
        {
          //Here's the code to do the stuff when confirming in the partial view 
```

知道为什么会这样吗？

提前致谢

更新

放置一些警报后（我猜是相当原始的调试方式）我看到在成功函数的最后一行之后再次调用了该方法（在 $('#autoBidConfirmation').show(); 之后）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:39:24.547

您的文档可能在异步回发后多次准备就绪。

尝试类似：

```
$(document).ready(OnDocumentReady);

function OnDocumentReady()
{
     $("#autobidButton")
          .unbind("click", AutoBidFunction)
          .click(AutoBidFunction);
}

function AutoBidFunction(e)
{
    // Code Here
} 
```

# python - 使用 Tkinter，有没有办法在不明显缩放窗口的情况下获得可用的屏幕尺寸？

> ID：13129985
> 
> 赞同：4
> 
> 时间：2012-10-29T21:32:25.763
> 
> 标签：python, tkinter

您可以获得可用的屏幕尺寸（屏幕减去任务栏，无论它位于何处），如下所示：

```
import Tkinter as tk
root = tk.Tk()
root.state('zoomed')
root.update()
usable_width  = root.winfo_width()
usable_height = root.winfo_height() 
```

有没有一种用户看不到的方法？在 Tkinter 中，“撤回”（隐藏）和“缩放”是相互排斥的状态。

您可以通过添加以下内容来获得总屏幕尺寸：

```
total_width  = root.winfo_screenwidth()
total_height = root.winfo_screenheight() 
```

到目前为止，我一直无法找到一种方法来做到这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-24T03:08:29.783

'zoomed' 在 Linux Mint 中对我不起作用，但我终于找到了一些有用的东西，我认为它更便携。这甚至可以在窗口被撤回时调用，以便用户看不到更改。

```
w, h = root.maxsize() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T00:28:03.970

您可以致电：

```
root.attributes("-alpha", 0) 
```

创建窗口后。这将使它不可见，然后您可以像以前一样执行大小计算。

# xcode - 我应该如何让 Xcode 链接使用 C++ 静态库的 iOS 项目

> ID：13129990
> 
> 赞同：3
> 
> 时间：2012-10-29T21:32:42.987
> 
> 标签：xcode

使用 Xcode，我编写了一个 Cocoa Touch 静态库，主要使用 C++。它为 Objective-C 客户端代码提供了一个 C 接口。

我有一个使用它的客户端 iOS 应用程序，一切正常并按预期运行，除了我发现我需要`.cpp`在客户端项目中包含一个最小文件以使链接成功。否则我会得到与 C++ 相关的未解析符号，例如`operator new(unsigned long)`.

上面的 hack 简单有效，所以我想我没有违反任何法律，但是有没有一种适当的方法来消除我的链接器错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T21:37:04.167

我想应该只是`-lc++`在项目设置中添加链接器标志的问题。

在项目设置的“构建设置”选项卡的“链接”部分下的“其他链接器标志”下添加它。

# c# - 我可以在不同的 Web 参考 resource.cs 中强制将对象强制转换为相同类型吗？

> ID：13129992
> 
> 赞同：0
> 
> 时间：2012-10-29T21:32:53.733
> 
> 标签：c#, coldfusion

所以，我有一个正在开发的应用程序，我必须调用两个冷 Fusion Web 服务，

```
http://blah/search.cfc and http://blah/asset.cfc 
```

两者都返回一个“QueryBean”。我称它们为 DAM_Search 和 DAM_Asset。QueryBean 结果具有相同的类型，但它们存储在两个目录中。

DAM_Search 的此类位于 **项目文件夹\Web References\DAM_Search\Reference.cs** 和 DAM_Asset 具有相同的类，位于 **项目文件夹\Web References\DAM_Asset\Reference.cs**

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.225")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.SoapTypeAttribute(Namespace="http://wstypes.newatlanta.com")]

public partial class QueryBean {

    private object[] dataField;
    private string[] columnListField;

    /// <remarks/>
    [System.Xml.Serialization.SoapElementAttribute(IsNullable=true)]
    public object[] data {
        get {
            return this.dataField;
        }
        set {
            this.dataField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.SoapElementAttribute(IsNullable=true)]
    public string[] columnList {
        get {
            return this.columnListField;
        }
        set {
            this.columnListField = value;
        }
    }
} 
```

我的问题是我想将此服务的结果发送到单个函数，该函数将 QueryBean 转换为 XML 节点，我可以将调用它的任何应用程序传回。但是当我尝试使用该函数时它失败了，因为 DAM_Search.QueryBean 与 DAM_Asset.QueryBean 不同。当我尝试施放它时

```
private XmlDocument Get_AssetInfo(object qBean)
{
      DAM_Search.QueryBean qBean2 = (DAM_Search.QueryBean)qBean; 
```

我收到此错误消息

*无法将“DAM_Service.DAM_Asset.QueryBean”类型的对象转换为“DAM_Service.DAM_Search.QueryBean”类型。*

有没有一种方法可以强制转换，因为我知道数据类型实际上是相同的，或者有没有一种方法可以告诉 Web 服务对 QueryBean 类使用相同的类引用？

这对外面的任何人有什么影响吗？:-)

蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T22:27:16.133

如果您使对象在两侧真正相同，即具有相同的类型名称和程序集名称，您可能能够执行此转换。

我的意思是，您可以拥有一个单独的 DLL，其中包含像 QueryBean 这样的共享类。然后从两个服务中引用这个项目。现在演员应该成功了。

它失败的原因是因为即使两个项目中的 QueryBean 类具有完全相同的属性，.NET Framework 也不知道这一点，因为这两种类型位于完全不同的程序集中。

# php - PHPUnit 测试套件包含路径

> ID：13129993
> 
> 赞同：12
> 
> 时间：2012-10-29T21:32:57.740
> 
> 标签：php, unit-testing, phpunit

使用 phpunit，我在包含路径方面遇到了一些问题，不是针对 phpunit 本身，而是针对我的代码和测试目录。

我有以下代码结构：

```
Application
  -StringCalculator.php

tests
  -StringCalculatorTest.php 
```

在我的 StringCalculatorTest.php 中，我有一个 require 语句：

```
require_once('../StringCalculator.php'); 
```

从测试文件夹内运行`phpunit StringCalculatorTest.php`完美。

但是，当我在根目录中引入一个 phpunit.xml 配置文件时，即

```
Application
  -StringCalculator.php

tests
  -StringCalculatorTest.php

phpunit.xml 
```

包含路径被搞砸了。我必须将 require_once 替换为

```
require_once('StringCalculator.php'); 
```

在应用程序和测试目录之间设置包含路径的正确方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-29T21:53:48.010

设置 PHP 包含路径的最佳位置是在引导文件中。通常，您的`phpunit.xml`文件将包含引导属性：

```
<phpunit backupGlobals="true"
     backupStaticAttributes="false"
     bootstrap="bootstrap.php"
     cacheTokens="true"
     colors="true"
     ... and so on ...
</phpunit> 
```

然后在您的引导文件中，您可以设置包含路径、包含重要文件等。

```
set_include_path(get_include_path() . PATH_SEPARATOR . '../my/sources'); 
```

配置文件包含在PHPunit 文档的[附录 C中。](https://phpunit.de/manual/current/en/appendixes.configuration.html)

**编辑：**链接已更新

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-25T07:28:11.793

我知道这个问题已经回答了
这个答案是给未来的访客的

根据 phpunit 文档，您可以在包含路径中使用`includePath`指令`phpunit.xml`

```
<php>
  <includePath>/path/to/ur/project</includePath>
</php> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T08:39:06.813

首先，我不明白它是如何`require_once('../StringCalculator.php');`工作的，它应该是：`require_once('../Application/StringCalculator.php');`.

然后，slashingweapon 的答案很好，它是最好的 IMO，但是如果你不想那么麻烦，你可以指定你`require_once`从当前文件的目录开始：

```
require_once(__DIR__ . '../Application/StringCalculator.php'); 
```

# eclipse - org.codehaus.groovy.control.MultipleCompilationErrorsException：启动失败：Script7.groovy：1：无法解析类

> ID：13129994
> 
> 赞同：18
> 
> 时间：2012-10-29T21:32:59.990
> 
> 标签：eclipse, exception, selenium, groovy, soapui

尝试运行soapui文件时，我目前收到此错误：

```
org.codehaus.groovy.control.MultipleCompilationErrorsException:
startup failed: Script7.groovy: 1: unable to resolve class com.company.ui.test.SoapUI_T11001_StockConsSecurityCurBusiDate @ line 1, column 1\.     
  import com.company.ui.test.SoapUI_T11001_StockConsSecurityCurBusiDate
                             ^
org.codehaus.groovy.syntax.SyntaxException: unable to resolve class com.company.ui.test.SoapUI_T11001_StockConsSecurityCurBusiDate @ line 1, column 1.
 at org.codehaus.groovy.ast.ClassCodeVisitorSupport.addError(ClassCodeVisitorSupport.java:148)  
 at org.codehaus.groovy.control.ResolveVisitor.visitClass(ResolveVisitor.java:1206)
 at org.codehaus.groovy.control.ResolveVisitor.startResolving(ResolveVisitor.java:148)
 at org.codehaus.groovy.control.CompilationUnit$6.call(CompilationUnit.java:585)
 at org.codehaus.groovy.control.CompilationUnit.applyToSourceUnits(CompilationUnit.java:832)
 at org.codehaus.groovy.control.CompilationUnit.doPhaseOperation(CompilationUnit.java:519)
 at org.codehaus.groovy.control.CompilationUnit.processPhaseOperations(CompilationUnit.java:495)
 at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:472)
 at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:292)
 at groovy.lang.GroovyShell.parseClass(GroovyShell.java:727)
 at groovy.lang.GroovyShell.parse(GroovyShell.java:739)
 at groovy.lang.GroovyShell.parse(GroovyShell.java:766)
 at groovy.lang.GroovyShell.parse(GroovyShell.java:757)
 at com.eviware.soapui.support.scripting.groovy.SoapUIGroovyScriptEngine.compile(SoapUIGroovyScriptEngine.java:141)
 at com.eviware.soapui.support.scripting.groovy.SoapUIGroovyScriptEngine.run(SoapUIGroovyScriptEngine.java:90)
 at com.eviware.soapui.impl.wsdl.teststeps.WsdlGroovyScriptTestStep.run(WsdlGroovyScriptTestStep.java:148)
 at com.eviware.soapui.impl.wsdl.panels.teststeps.GroovyScriptStepDesktopPanel$RunAction$1.run(GroovyScriptStepDesktopPanel.java:274)
 at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
 at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
 at java.lang.Thread.run(Thread.java:619)
 1 error 
```

肥皂UI代码：

```
import com.company.ui.test.SoapUI_T11001_StockConsSecurityCurBusiDate

def env = testRunner.testCase.testSuite.project.getPropertyValue("env")
def baseUrl = testRunner.testCase.testSuite.project.getPropertyValue("baseUrl")

log.info("The baseurl is "+baseUrl)
log.info("The env under test is "+env)

SoapUI_T11001_StockConsSecurityCurBusiDate testStep = new SoapUI_T11001_StockConsSecurityCurBusiDate();
testStep.init(baseUrl);
testStep.execute(null); 
```

日食代码：

```
package com.company.ui.test;

import java.util.concurrent.TimeUnit;

import org.openqa.selenium.By;
import org.openqa.selenium.WebElement;

import com.eviware.soapui.model.support.AbstractSubmitContext;
import com.eviware.soapui.model.testsuite.TestRunner;

public class SoapUI_T11001_StockConsSecurityCurBusiDate extends BaseSelenium{
   public static void main(final String[] args){
      final SoapUI_T11001_StockConsSecurityCurBusiDate ico = new SoapUI_T11001_StockConsSecurityCurBusiDate();
      try{
         ico.init("https://avncedevn1.nam.nsroot.net:17620/", false);
      }catch(Exception e){
         // TODO Auto-generated catch block
         e.printStackTrace();
      }
      ico.execute(null);
   }
        //...code....
} 
```

我该如何解决这个错误？我不确定是什么导致了错误。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2020-05-16T22:14:36.243

这对我有用：
按 Ctr+Alt+Shift+s
或：
从文件菜单 -> 项目结构 -> SDK 位置 -> JDK 位置 下拉菜单选择：
嵌入 JDK c:....\jre
然后确定。

[![在此处输入图像描述](../Images/48e34fdd3e6725bfb4acd3962dd08933.png)](https://i.stack.imgur.com/GyZ6d.png)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2020-04-26T19:16:10.243

如果您使用 android studio 并遇到此错误，那么我解决了它在项目结构选项上将项目的 Gradle 版本更改为最新版本 6.2.1。

[![图片 Android Studio](../Images/0cacad1cb7e95376bfff7e58bb110d98.png)](https://i.stack.imgur.com/XW5oy.png)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2021-05-01T03:05:20.793

可能的原因之一是jdk版本*太高*。例如，使用 jdk 16 构建 Apache Kafka 的源代码会抛出此错误。使用 jdk 11 很好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-18T20:43:47.180

如果您想在第一次安装后在 Android Studio 上创建一个新项目，可能您将包含 (') 符号的应用程序名称写为撇号。

例如，我尝试将名称设置为：“Henry's Game”，但由于此错误，撇号导致 Android Studio 无法加载：

```
Caused by: org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed: 
```

因此，只需更改应用程序的名称，并简单地使用拉丁字母语言，例如英语。

修复：转到您的 Android 项目树并找到 Gradle Scripts > settings.gradle > 更改名称：

```
rootProject.name='Henry Game'
include ':app' 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-08-25T10:27:29.470

更改碰撞路径中的 bild.gradel 文件

```
dependencies {
        classpath "com.android.tools.build:gradle:7.0.1"

    } 
```

Gradel-wrapper.properties

```
 distributionUrl=https\://services.gradle.org/distributions/gradle-7.0.2-bin.zip 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-08T23:57:18.917

使用 Eclipse Juno (Kepler Release) Build id: 20121114-2344，我发现了类似的问题：

```
org.codehaus.groovy.control.multiplecompilationerrorsexception startup failed unable to resolve class Chart 
```

Chart 类是我的一些图表实用程序的容器类。

我在 Eclipse 之外尝试过，使用 Groovy 2.0 Console 相同的代码段可以正常工作。在挠了大约 3 个小时后，我通过添加以下内容来解决它

```
import excel.Chart 
```

在带有“”的 main() 调用类中，`new Chart()`因此得到了投诉，一旦添加，错误就消失了。更奇怪的是，通过错误后，我删除了那个导入，仍然没有更多的抱怨！（我所有的脚本/类都在同一个包下`excel`，我想不需要这样的导入语句。）

投诉的症状之一是输出 bin 文件夹中没有生成 Chart.class。一旦投诉消失，Chart.class 就会出现在那里。

我猜这可能是 Eclipse/Groovy 插件的错误（我使用 Groovy Plugin for Juno）。

希望我的理解是正确的，它会有所帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-12-02T11:20:52.980

我的解决方案是更改 gradle 版本和 Gradle JDK：

文件 > 项目结构 > 项目

[在此处输入图像描述](https://i.stack.imgur.com/It6OS.png)

文件 > 项目结构 > SDK 位置

[在此处输入图像描述](https://i.stack.imgur.com/Im1jg.png)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2022-01-04T14:21:17.887

我正在使用 Android Studio - 北极狐，这对我有用

转到文件菜单 -> 项目结构 -> SDK 位置 -> Gradle 设置

[![在此处输入图像描述](../Images/8447c745519c691d4c3f4991d3d837fd.png)](https://i.stack.imgur.com/rxs9m.jpg)

然后选中“Download external annotations for dependencies”按钮并从下拉菜单中选择 JDK location 并选择：Android Default Jdk Vesion。

单击确定。

[![在此处输入图像描述](../Images/c9f430b1380b3c782091669aac6df672.png)](https://i.stack.imgur.com/7wBa1.jpg)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-10T06:04:57.107

转到 Files 并单击 Invalidate caches/ Restart 。Android studio 会清空缓存，重启不会出错。

希望这个答案对你有帮助:)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-03-04T05:27:26.070

对于这个问题，你可能也会像我一样遇到**来自 gsp的****包**命名。在***build/gsptmp***文件夹中，**Grails 4.xx** 创建临时 gsp 文件来链接它们引用的类。由于包名称的更改，在我的情况下它没有这样做。在战争构建期间尝试使用命令！******`grails war --stacktrace`******

 ******以前，它是`<%@ page import="bv.BankReconciliationController" %>` 但文件夹**bv**已重命名为**factoring**。因此，解决方案是将导入更改为 `<%@ page import="factoring.BankReconciliationController" %>`并且它起作用了:)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-07-06T07:29:51.593

我也遇到了同样的问题，并在这里和其他地方尝试了所有解决方案，最后我删除了我的 .gradle 和 gradle 文件夹和 android studio 的缓存，然后再次打开工作室并重建项目，之后它就可以正常工作了并使用了最新的 gradle 版本，以前它正在使用旧版本并导致问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-08-21T09:35:56.207

对我来说，解决方案是将 gradle 升级到最新版本，并删除 .idea 文件，并使缓存无效并重新启动 android studio。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-10-23T13:36:24.797

启动项目时，请确保选择 SDK 版本 11 或更高版本。它将默认为最低 SDK，但您必须向下滚动到更高版本才能使其工作。然后项目应该加载和构建。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-12-23T12:30:39.520

对我来说，我只是在 windows 中删除程序文件（C:\Users\username\.gradle）下的 .grade 文件，它就可以工作了。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2012-11-13T20:26:35.140

你有安装 grail 和 groovy 插件吗？如果是这样，请尝试卸载此插件。我有相同的错误消息并卸载插件，重新启动 IDE 对我有用。******

# html - 在 CSS 中使用图标字体时遇到问题

> ID：13129995
> 
> 赞同：8
> 
> 时间：2012-10-29T21:33:00.957
> 
> 标签：html, css, icon-fonts

我是网页设计和开发的新手，一直在玩不同的造型技术。在我的研究过程中，我遇到了**icon fonts**。尽管我研究了许多教程和视频，但尽管付出了数小时的努力，我还是无法成功地使用图标字体。

首先，我去了一个提供大量图标字体的网站，选择我喜欢的字体，生成它们，最后将它们下载到一个文件夹中。但是现在这些图标字体都在一个文件夹中，我该怎么办呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-29T22:09:26.853

这是一个分步指南：

转到[Font Squirrel](http://www.fontsquirrel.com/fonts/modern-pictograms)并下载该`@font-face`套件。解压缩，将其重命名为“fonts”，并将其放在与您的 html 文件相同的目录中。

将其用作您的 html 文件：

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <style>
    @font-face {
    font-family: 'ModernPictogramsNormal';
    src: url('fonts/modernpics-webfont.eot');
    src: url('fonts/modernpics-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/modernpics-webfont.woff') format('woff'),
         url('fonts/modernpics-webfont.ttf') format('truetype'),
         url('fonts/modernpics-webfont.svg#ModernPictogramsNormal') format('svg');
    font-weight: normal;
    font-style: normal;
    }
    li {
      list-style-type: none;
    }
    [data-icon]:before {
      font-family: 'ModernPictogramsNormal';
      content: attr(data-icon);
      speak: none;
      padding:0 5px;
    }
    </style>
</head>
<body>
  <ul>
    <li data-icon="^">RSS</li>
    <li data-icon="*">Star</li>
    <li data-icon=".">Shopping Cart</li>
  </ul>
</body>
</html> 
```

你应该看到这个：

![图标字体示例](../Images/232ac3df715af039fa765215fbd1a29d.png)

你在滚！

此外，要知道使用什么字符，请查看 Font Squirrel 网站上的字符图。

# epplus - EPPlus - 找不到第 10 列

> ID：13129996
> 
> 赞同：0
> 
> 时间：2012-10-29T21:33:03.200
> 
> 标签：epplus

我有一个应用程序，用户上传 excel（2007 或更高版本）文件，该文件被解析，内容存储在数据库中。我正在使用[EPPlus](http://epplus.codeplex.com/)从 Excel 中读取内容。这是代码片段

```
foreach (var worksheet in package.Workbook.Worksheets)
                        {
                            for (int i = worksheet.Dimension.Start.Row + 1; i <= worksheet.Dimension.End.Row; i++)
                            {
                                DataRow newRow = dt.NewRow();

                                for (int j = worksheet.Dimension.Start.Column; j <= worksheet.Dimension.End.Column; j++)
                                {
                                    newRow[j - 1] = worksheet.Cells[i, j].Value;
                                }

                                dt.Rows.Add(newRow);
                            }
                        } 
```

当 j 的值达到 11 时，出现以下异常**Cannot find column 10**。但我确实检查了文件，它实际上有列索引 10。我放了一个断点，观察第 9 列的值，它与第 10 列之前的值完全相同。

所以有人可以帮助我吗？真正的问题是什么？

我检查了 API，EPPlus lib 实际上有一个索引属性 Cells，它接受列的索引作为第二个参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:38:10.487

您确定例外来自“worksheet.Cells[i, j].Value”而不是来自“newRow[j - 1]”吗？您的循环计数器“j”为 11，但异常指示“无法找到第 10 列”，它与 newRow 上的“[j-1]”索引器匹配。