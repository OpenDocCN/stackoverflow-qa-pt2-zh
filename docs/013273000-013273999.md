# StackOverflow 问答 13273000-13273999

# javascript - 如何清除此关闭参考

> ID：13273001
> 
> 赞同：1
> 
> 时间：2012-11-07T15:38:58.760
> 
> 标签：javascript

对于此代码：

```
 var myObj = {
    callMeMaybe: function () {
        var myRef = this;
        var val = setTimeout(function () { 
            console.log('Time is running out!'); 
            myRef.callMeMaybe();
        }, 1000);
    }
};

myObj.callMeMaybe();
myObj = null; 
```

如果我们调用 myObj.callMeMaybe() 然后调用 myObj = null。我们仍然无法取消对 callMeMaybe() 的调用；无论如何要解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:56:11.187

clearTimeout() 方法清除使用 setTimeout() 方法设置的计时器。setTimeout() 返回的 ID 值用作 clearTimeout() 方法的参数。

```
clearTimeout(id_of_settimeout); 
```

Number.MAX_VALUE是 1.7976931348623157e+ **308VALUE**

我认为这个问题可以通过 clearTimeout 循环 1.7976931348623157e+308VALUE 次来完成。

需要很长时间吗？

或者您可以通过以下方式获得最大 id_of_settimeout

```
max_id_of_settimeout = setTimeout(null,0); 
```

然后循环回**零**

```
for (var i = max_id_of_settimeout;i>=0;i--){clearTimeout(i);} 
```

只是我的观点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:42:34.017

你需要`window.clearTimeout`打开`val`.

```
 var myObj = {
    callMeMaybe: function () {
        var myRef = this;
        this.val = setTimeout(function () { // made val visible outside
            console.log('Time is running out!'); 
            myRef.callMeMaybe();
        }, 1000);
    }
};

myObj.callMeMaybe();

window.clearTimeout( myObj.val );
myObj = null; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-07T15:42:27.150

使用新函数覆盖`callMeMaybe`属性，或者`null`如果您不介意 TypeError。

```
myObj.callMeMaybe();
myObj.callMeMaybe = function(){}; 
```

现在，当从 进行异步调用时`setTimeout`，它将调用空函数。

* * *

如果您不想覆盖该函数，则只需在对象上设置一个标志。

```
var myObj = {
    callMeMaybe: function () {
        var myRef = this;
        var val = setTimeout(function () { 
            console.log('Time is running out!'); 
            if (!myRef.prevent)
                myRef.callMeMaybe();
        }, 1000);
    }
};

myObj.callMeMaybe();
myObj.prevent = true; // will prevent the .callMeMaybe() in the setTimeout 
```

* * *

但要清楚，您*不能清除*闭包引用本身。对象是引用类型，JavaScript 是按值传递的。

这意味着当你这样做时：

```
var myRef = this; 
```

...您已经制作了对象引用的副本。因为`myRef`是局部变量，所以不能从外部触及。您可以做的最好的事情是操纵被引用的对象，或者使`myRef`变量可用于外部范围。

...并忽略不赞成的选民。他们不了解 JavaScript 的工作原理。

# r - <<- 在 R 中是什么意思？

> ID：13273002
> 
> 赞同：-2
> 
> 时间：2012-11-07T15:39:04.543
> 
> 标签：r

> **可能重复：**
> [您如何在 R 中使用“<<-”（范围分配）？](https://stackoverflow.com/questions/2628621/how-do-you-use-scoping-assignment-in-r)

我正在阅读伪代码。我遇到过`<<-`很多次。有什么意义`<<-`？这是什么意思？以及我们在使用`<<-`算子时需要考虑或注意什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T15:40:53.983

从帮助文件`?"<<-"`：

> 运算符 <<- 和 ->> 通常只在函数中使用，并导致在父环境中搜索正在分配的变量的现有定义。如果找到这样的变量（并且其绑定未锁定），则重新定义其值，否则在全局环境中进行赋值。请注意，它们的语义与 S 语言中的不同，但与 R 的范围规则结合使用时很有用。有关更多详细信息和示例，请参阅“R 语言定义”手册。

这是一个例子：

```
foo <- function(){
  a <<- 1
} 
```

现在运行它，看看它是如何`a`在全局环境中创建一个新对象的：

```
a
Error: object 'a' not found

foo()
a
[1] 1 
```

* * *

人们应该尽量避免这种情况的原因是它打破了函数式编程范式。在函数式编程中，人们编写的函数只依赖于它们的输入并且不会产生副作用。

的副作用`<<-`是在父环境中创建一个新对象，因此不再是函数式编程。

在大多数日常使用中，没有必要使用`<<-`，尽管在使用具有状态的闭包时它可能很有用，即记住它们过去所做的事情。这在 Hadley 的[devtools wiki中有详细的描述](https://github.com/hadley/devtools/wiki/First-class-functions)

# java - 顺序搜索问题

> ID：13273007
> 
> 赞同：1
> 
> 时间：2012-11-07T15:39:21.823
> 
> 标签：java

这种顺序搜索有什么问题？`m_t3[]`是一个整数数组，其中包含数字 、 和填充它的`0`某种`1`组合 `4`。（数组的大小为 9）。NetBeans 给我一条错误消息，`incomparable types: int[] and int`. 我看到的这类搜索的例子看起来像这样。

```
int key = 0;
boolean cat = false;
for (int i = 0; i < m_t3.length; i++) {
    if (m_t3[i] == key) {
        cat = true;
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:43:50.313

您的代码中唯一可能有问题的行是

```
if (m_t3[i] == key) 
```

您似乎`m_t3`是一个数组数组，而不是一个简单的数组。仔细检查您的声明。

# c# - 如何将两个模型列表合并为一个模型

> ID：13273012
> 
> 赞同：0
> 
> 时间：2012-11-07T15:39:35.170
> 
> 标签：c#, asp.net-mvc-3, linq, entity-framework, lambda

请看下面的代码：

```
public class NewsFilterModel
{
    public CtArticleDetail ArticleDetail { get; set; }

    public PcPage Page { get; set; }
}

public IEnumerable<NewsFilterModel> GetNewsFilterModelByTagNames(string tagNames, int status)
{
     var resultArticle = db.CtArticleDetail.Where(m => m.tagNames == tagNames);
     var resultPage  = db.PcPage.Where(m => m.tagNames == tagNames);
} 
```

谁能建议将两个模型组合为一个模型的最佳方法是 NewsFilterModel 吗？

我想要实现的是：

新闻过滤模型列表

```
1.Article1
2.Page1
3.Article2
4.Page2
5.Article3
6.Page3 
```

我已经像下面这样结束了：

```
foreach (var item in pageResult)
            {
                resultList.Add(new NewsFilterModel { ArticleDetail = null, Page = item, Date = item.UpdatedOn.ToDateTime() });
            }

            foreach (var item in tempArticleList)
            {
                resultList.Add(new NewsFilterModel { ArticleDetail = item, Page = null, Date = item.LiveDate.ToDateTime() });
            }

            return resultList.AsEnumerable(); 
```

谁有更好的主意，请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:39:31.987

您可以使用 Union 来组合结果集

```
var query1 = db.CtArticleDetail
    .Where(a => a.tagNames.Equals(tagNames))
    .Select(a => new NewsFilterModel() { ArticleDetail = a, Page = null });
var query2 = db.PcPage
    .Where(a => a.tagNames.Equals(tagNames))
    .Select(a => new NewsFilterModel() { ArticleDetail = null, Page = a });
var query3 = query1.Union(query2)
    //.OrderBy(a => a.Date); -- Order here
    ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:48:09.307

`CtArticleDetail`显然你的and没有关系`PcPage`，所以你需要改变你的模型。

```
public class NewsFilterModel
{
    public IEnmerable<CtArticleDetail> ArticleDetails { get; set; }

    public IEnmerable<PcPage> Pages { get; set; }
} 
```

和

```
public NewsFilterModel GetNewsFilterModelByTagNames(string tagNames, int status)
{
     var resultArticle = db.CtArticleDetail.Where(m => m.tagNames == tagNames);
     var resultPage  = db.PcPage.Where(m => m.tagNames == tagNames);

     var newsFilterModel = new NewFilterModel { ArticleDetails = resultArticle, Pages = resultPage };
     return newsFilterModel;
} 
```

# ruby-on-rails - 如何将自定义 ruby 和 rails 用于不同的应用程序？

> ID：13273014
> 
> 赞同：1
> 
> 时间：2012-11-07T15:39:38.240
> 
> 标签：ruby-on-rails, ruby, rvm, redmine

我正在使用 Ubuntu 12.04。

我还使用**rvm**在我的系统上安装了 ruby​​ 和 rails 。这是自定义安装，而不是 ubuntu 包。

我想在我的系统上安装 Redmine。但是，当我使用安装它时

```
aptitude install redmine redmine-mysql 
```

它没有找到 ruby​​ 或 rails，因为它不是通过`aptitude`. 是否可以让 Redmine 使用我的自定义安装而不安装默认的 ruby​​/rails。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T15:51:18.573

不要通过安装它，`aptitude`因为他们经常为 Ruby 提供相当过时的东西。如果你想在你的 RVM 环境中运行 Redmine：

*   下载 Redmine： [http ://www.redmine.org/projects/redmine/wiki/Download](http://www.redmine.org/projects/redmine/wiki/Download)
*   `rvm use whatever_ruby_you_want`
*   `cd /path/to/redmine`
*   `bundle install`

    然后按照[此处](http://www.redmine.org/projects/redmine/wiki/RedmineInstall "这里")的说明设置数据库。

# mysql - MySQL SELECT 如果只匹配一个值

> ID：13273016
> 
> 赞同：0
> 
> 时间：2012-11-07T15:39:48.503
> 
> 标签：mysql, select

我的要求似乎并不难，但我不确定最好的方法。

我有下表：

```
userID  file
   1      1
   1      2 
   1      3
   2      1
   2      3
   3      2
   4      1
   4      2 
```

我想选择**只有**文件号 2 的用户 ID。在我的示例中，结果将只有 3。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T15:43:09.343

```
SELECT userID
FROM tableName a
WHERE file = 2
GROUP BY userID
HAVING COUNT(*) = 
(
  SELECT COUNT(*)
  FROM tableName b
  WHERE a.userID = b.userID 
) 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/0eb8c/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:43:02.423

您可以使用`WHERE NOT EXISTS`（[SQL Fiddle](http://sqlfiddle.com/#!2/29e8e/1)）：

```
SELECT UserId
FROM theTable t
WHERE file = 2
AND NOT EXISTS(SELECT 1 FROM theTable tt WHERE t.UserId = tt.UserId AND file <> 2)
GROUP BY UserId 
```

或自反连接（[SQL Fiddle](http://sqlfiddle.com/#!2/29e8e/2)）：

```
SELECT t.UserId
FROM theTable t
LEFT OUTER JOIN theTable tt ON t.UserId = tt.UserId AND tt.file <> 2
WHERE t.file = 2
AND tt.UserId IS NULL
GROUP BY t.UserId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T16:42:09.400

一种方法是通过一个标志，一个 IF 标志，除了用户的总记录之外，他们还有一个 #2 文件......如果两者 = 1，那么你很好。但是，此版本会查询所有用户。

```
select
      userID
   from
      YourTable
   group by
      UserID
   having
          sum( if( file = 2, 1, 0 )) = 1
      AND count(*) = 1 
```

此版本应用预查询仅列出那些至少有 #2 文件的人，然后获取总数

```
select
      PreQuery.UserID
   from
      ( select distinct YT1.userID
           from YourTable YT1
           where YT1.File = 2 ) as PreQuery
      JOIN  YourTable YT2
         on PreQuery.UserID = YT2.UserID
   group by
      PreQuery.UserID
   having
      count(*) = 1 
```

我显然不知道您的数据大小（记录数），但是如果您有 10k 用户和 100k 文件，但只有 250 可以访问文件 #2，那么第二个查询将只关注 250 个用户，然后再踢仅基于 HAVING count = 1 仅具有单个显式文件的那些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T16:36:26.410

试试这个查询 -

```
SELECT userID FROM table
GROUP BY userID
HAVING COUNT(IF(file = 2, 1, NULL)) = COUNT(*)

+--------+
| userID |
+--------+
|      3 |
+--------+ 
```

# node.js - NodeJS：runInNewContext 和 instanceof

> ID：13273020
> 
> 赞同：0
> 
> 时间：2012-11-07T15:40:00.710
> 
> 标签：node.js, instanceof

我有一个执行以下操作的脚本：

```
var context = {}
vm.runInNewContext("var someFunc = function() {}", context);
console.log(typeof context.someFunc); //function
console.log(context.someFunc instanceof Function); //false 
```

我明白为什么第 4 行返回 false：在新上下文中有一个新`Function`对象，它不等于`Function`外部上下文中的对象。因此，`context.someFunc`不是该外部`Function`对象的实例。

但是，该`context.someFunc`函数由使用`instanceof Function`. 由于`context.someFunc`是一个函数，但不是`Function`该上下文中的实例，因此第三方不会将其视为函数，因此它应该崩溃。我尝试使用以下上下文：

```
var context = {
    "Function" : Function
} 
```

但这也没有解决我的问题。

也许 using`var someFunc = new Function(arg, body)`会起作用（尚未测试），但是我无法完全控制传递给的代码`vm.runInNewContext`，因此我也无法使用该解决方案。

如何让`context.someFunc instanceof Function`在上下文之外返回 true？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:08:46.910

这是不可能的。在您无法控制第三方模块的情况下使用相同的上下文。当我遇到类似的问题时，首先我尝试修复第三方模块并提交拉取请求并解释问题所在，然后我放弃并切换到 eval in`new Function()`而不是在新的上下文中运行，这更符合我的需求.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-27T07:51:24.053

实际上确实存在解决方案，但在完整性和性能之间存在权衡。

1.  只需将返回的函数包装在另一个函数中：

    ```
     const context = {}
     vm.runInNewContext("var someFunc = function() {}", context);
     const someFunc = context.someFunc;
     context.someFunc = function(...args) { return someFunc.apply(this, args); }
     console.log(context.someFunc instanceof Function); //true 
    ```

    这个解决方案（几乎）没有开销，但它不是一个完整的解决方案。它适用于直接在上下文中公开的已知函数，但在不太琐碎的情况下它开始崩溃。例如，让它与高阶函数、地图等一起工作需要相当多的工作，我认为甚至不可能涵盖所有奇异的组合。

2.  使用 a`Proxy`按需包装函数

    使用 a `Proxy`，不需要提前知道在 上公开了哪些值`context`，而是可以按需包装函数。这也使得处理高阶函数更容易，因为我们可以递归地代理返回值和参数。然而，正确实现需要付出更多的努力，并且会对性能产生重大影响。

3.  `Function`在新环境中更改原型

    ```
    const context = { OuterFunction : Function};
    vm.runInNewContext(`
      // setup
      Object.setPrototypeOf(Function.prototype, OuterFunction.prototype);
      //script
      const someFunc = function() {};
    `, context);
    console.log(context.someFunc instanceof Function); 
    ```

    此解决方案使内部`Function`扩展外部`Function`，因此任何内部函数都是外部函数的实例。但是，使用`setPrototypeOf`对性能非常不利，尤其是在更改像`Function`. 因此，只要有可能，就应该避免这种情况。

# c++ - 移动构造函数未按预期调用

> ID：13273021
> 
> 赞同：14
> 
> 时间：2012-11-07T15:40:02.293
> 
> 标签：c++, c++11, move-constructor

我是 C++0x 的新手，我正试图围绕右值引用和移动构造函数。我正在使用带有-std = c ++ 0x的g ++ 4.4.6，我对以下代码感到困惑：

```
 class Foo 
    {
    public:
      Foo() 
        : p( new int(0) )
      {
        printf("default ctor\n");
      }

      Foo( int i )
        : p( new int(i) )
      {
        printf("int ctor\n");
      }

      ~Foo() 
      {
        delete p;
        printf("destructor\n");
      }

      Foo( const Foo& other ) 
        : p( new int( other.value() ) )
      {
        printf("copy ctor\n");
      }

      Foo( Foo&& other )
        : p( other.p )
      {
        printf("move ctor\n");
        other.p = NULL;
      }

      int value() const 
      {
        return *p;
      }

    private:
      // make sure these don't get called by mistake
      Foo& operator=( const Foo& );
      Foo& operator=( Foo&& );

      int* p;
    };

    Foo make_foo(int i) 
    {
      // create two local objects and conditionally return one or the other
      // to prevent RVO
      Foo tmp1(i);
      Foo tmp2(i);

      // With std::move, it does indeed use the move constructor
      //  return i ? std::move(tmp1) : std::move(tmp2);
      return i ? tmp1 : tmp2;

    }

    int main(void) 
    {
      Foo f = make_foo( 3 );

      printf("f.i is %d\n", f.value());

      return 0;
    } 
```

我发现正如所写，编译器使用复制构造函数在 main() 中构建对象。当我在 make_foo() 中使用 std::move 行时，在 main() 中使用了 move 构造函数。为什么在 make_foo() 中需要 std::move？我认为虽然 tmp1 和 tmp2 是 make_foo() 中的命名对象，但当它们从函数返回时，它们应该成为临时对象。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-07T16:02:18.293

这是你的问题：

```
return i ? tmp1 : tmp2; 
```

如果 return 语句只是 ，则函数中的局部变量只会从 return 语句中移出`return var;`。如果要进行该测试，则需要使用 if：

```
if (i) {
   return tmp1;
} else {
   return tmp2;
} 
```

引用有点复杂，但它在 12.8/31 和 12.8/32

> 12.8/32 当满足或将满足复制操作省略的条件时，除了源对象是函数参数，并且要复制的对象由左值指定，重载决议选择构造函数首先执行复制，就好像对象是由右值指定的 [...]

也就是说，即使表达式是左值，当满足 12.8/31 中的条件时，它也会被视为右值，该块中的第二个选项是：

> 12.8/31 在具有类返回类型的函数的 return 语句中，当表达式是与函数具有相同 cv 非限定类型的非易失性自动对象（函数或 catch 子句参数除外）的名称时返回类型，可以通过将自动对象直接构造到函数的返回值中来省略复制/移动操作。

这决定了`return tmp;`允许复制省略，但`return (cond?tmp:tmp);`不允许。

请注意，要让编译器`std::move`在 return 语句中生成隐式，返回的对象必须是省略的候选对象，除非它也是函数的参数。使用条件操作禁止复制省略，同时禁止编译器移出您的对象。第二种情况可能更容易编码：

```
Foo make_foo(Foo src) {
   return src;           // Copy cannot be elided as 'src' is an argument
} 
```

# html - CSS 到 php 表格结果

> ID：13273027
> 
> 赞同：0
> 
> 时间：2012-11-07T15:40:22.460
> 
> 标签：html, css

嗨，我有一段 php 代码，

它从mysql生成一些结果并将它们添加到一个工作正常的两列表中。然后，我将以下 css 类添加到列中。

```
td.manu {
background: url("../images/manu_button.fw.png") no-repeat; 
height: 87px; 
width:478; 
font-size:48px; 
font-family:Arial,
 Helvetica, sans-serif; 
 color:#309;} 
```

现在，如果返回结果并且有两列数据，则表格非常适合，但是如果它返回一列，则文本位于页面中间：

请参阅以下链接：

[http://www.qrrw.net/R](http://www.qrrw.net/R) - 这显示一列

[http://www.qrrw.net/p](http://www.qrrw.net/p) - 显示两个列

任何意见，将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:49:27.077

目前，您的表`<div>`定义为

```
<div align="center"> 
```

该`align`属性已弃用 - 您不应再使用它。

在其中添加以下样式`div`，即：

```
<div style="text-align: left; margin-left: 300px;"> 
```

这将为您提供与两列都已到位的结果相似的结果。您可能必须增加边距才能获得所需的效果。

**注意：**这是一个创可贴的解决方案...如果您不想过多地更改样式 - 添加一些逻辑来检测只有一列的情况，并`<td>`在结果中插入空白以弥补缺失细胞。这样，您的输出仍应遵循您想要的样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:54:17.367

这是一个快速的解决方案。

假设数组结果存储为如下 $result。

请执行下列操作

```
if (count($result) == 1){
echo <td class="manu">LINK HERE</td><td class="manu"></td>    </tr>
} 
```

基本上你正在做的只是添加一个额外的列，如果结果是 1

为了更好地使用，如果结果很奇怪，您应该始终在最后添加一个额外的。这样每一个你都会有 2 。所以你的代码在关闭标签之前会是这样的

```
if (count($result) % 2 == 1){
echo <td class="manu">LINK HERE</td><td class="manu"></td>    </tr>
} 
```

最后，我可以建议您切换到仅使用 div 而不是表格的纯 CSS 布局吗？它将使您的代码更容易编辑和更新设计和布局。

# javascript - 可以使用 javascript 捕获窗口/选项卡关闭吗？

> ID：13273032
> 
> 赞同：1
> 
> 时间：2012-11-07T15:40:31.730
> 
> 标签：javascript, browser, web, cross-browser

假设有一个带有多个选项卡的浏览器窗口打开，任何选项卡都关闭然后应该使用 javascript 捕获它，一件事是浏览器上没有添加扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:44:18.287

是的，你可以监听[onbeforeunload](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)事件，它在选项卡或窗口关闭之前触发。

# .net - Json.net 松散与严格类型反序列化

> ID：13273033
> 
> 赞同：9
> 
> 时间：2012-11-07T15:40:38.953
> 
> 标签：.net, wcf, serialization, json.net, deserialization

在我正在进行的项目中，我们开始使用 Json.Net 库。

但是，我刚刚发现 json.net 在字符串类型上是“松散的”。

这是一个例子：

DTO 类

```
[JsonObject]
public class DTO
{
    [JsonProperty]
    public string type;
} 
```

反序列化

```
byte[] rawBody = GetBytes(@"{""type"":true}");
using (MemoryStream ms = new MemoryStream(rawBody))
{
    using (StreamReader sr = new StreamReader(ms))
    {
        var serializer = new JsonSerializer();

        return serializer.Deserialize(sr, typeof(DTO));
     }
 } 
```

这会将“type”属性反序列化为“True”。但是，我希望它会失败并抛出异常，因为存在类型不匹配。如果我在 json 中将 true 替换为 1，它的作用相同。属性“类型”的值为“1”。

问题：

1.  有没有办法强制执行严格的序列化？

2.  除了字符串之外，还有其他类型像我们在这里看到的那样具有隐式转换吗？

谢谢你。

杰夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:25:22.197

我想出了一个解决方法。

虽然它有效，但我不知道这是否是解决我的“问题”的好方法。

我使用转换器从

这是我所做的：

```
[JsonObject]
public class DTO
{
    [JsonProperty]
    public string type;
} 
```

自定义转换器：

```
class JsonStrictConverter<T> : JsonConverter
    {
        public JsonToken[] TokenTypes { get; set; }

        public JsonStrictConverter(params JsonToken[] tokenTypes)
        {
            TokenTypes = tokenTypes;
        }

        public override bool CanConvert(Type objectType)
        {
            return objectType == typeof(T);
        }
        public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
        {
            if (reader.TokenType == JsonToken.Null)
            {
                if (objectType.IsValueType)
                {
                    return Activator.CreateInstance(objectType);
                }
                return null;
            }

            var converter = System.ComponentModel.TypeDescriptor.GetConverter(typeof(T));
            return (T)converter.ConvertFromString(reader.Value.ToString());
        }
        public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
        {
            throw new NotImplementedException("The converter '" + this.GetType().Name + "' is not intended to be used when serializing.");
        }
        public override bool CanWrite { get { return false; } }
    } 
```

反序列化：

```
XmlDictionaryReader bodyReader = message.GetReaderAtBodyContents();
bodyReader.ReadStartElement("Binary");
byte[] rawBody = bodyReader.ReadContentAsBase64();
using (MemoryStream ms = new MemoryStream(rawBody))
{
    using (StreamReader sr = new StreamReader(ms))
    {
        var serializer = new JsonSerializer();
        /* These converter are present to enforce strict data type in the json. */ 
        /* by default, newtonsoft can serialize Numbers as strings, strings as boolean, etc.... */
        serializer.Converters.Add(new JsonStrictConverter<string>(JsonToken.String));
        serializer.Converters.Add(new JsonStrictConverter<bool>(JsonToken.Boolean));
        serializer.Converters.Add(new JsonStrictConverter<short>(JsonToken.Integer));
        serializer.Converters.Add(new JsonStrictConverter<ushort>(JsonToken.Integer));
        serializer.Converters.Add(new JsonStrictConverter<int>(JsonToken.Integer));
        serializer.Converters.Add(new JsonStrictConverter<uint>(JsonToken.Integer));
        serializer.Converters.Add(new JsonStrictConverter<long>(JsonToken.Integer));
        serializer.Converters.Add(new JsonStrictConverter<ulong>(JsonToken.Integer));
        serializer.Converters.Add(new JsonStrictConverter<float>(JsonToken.Float, JsonToken.Integer));
        serializer.Converters.Add(new JsonStrictConverter<double>(JsonToken.Float, JsonToken.Integer));
        serializer.Converters.Add(new JsonStrictConverter<decimal>(JsonToken.Float, JsonToken.Integer));

        return serializer.Deserialize(sr, typeof(DTO));                    
    }
} 
```

这种方法中是否缺少任何类型？

周围有没有更好的解决方案？

谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T13:48:14.620

认为 json.net 处理严格的类型序列化，而且它比 .net json 序列化器快得多。 [http://json.codeplex.com](http://json.codeplex.com "json.net")

# spring-mvc - 当 Roo 为页面生成输出时，如何让 Roo 生成打开创建或编辑页面而不是文本的链接？

> ID：13273043
> 
> 赞同：2
> 
> 时间：2012-11-07T15:41:14.943
> 
> 标签：spring-mvc, spring-roo

当前在实体的列表视图中，对其他实体的引用仅作为键值以纯文本形式输出。相反，我希望将对其他实体的引用作为超链接输出。

我尝试修改 list.jspx 但我无法弄清楚我需要添加到 URL 以使其对正确的控制器开放。指向正确方向的指针会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:36:44.133

我发现 roo 标签库总是为我指明正确的方向。这是一个`src/main/webapp/WEB-INF/tags/form/fields/table.tagx` 与您要求的类似的示例：

```
 <spring:url value="${path}/${itemId}" var="update_form_url">
    <spring:param name="form" />
 </spring:url>
 <spring:url value="/resources/images/update.png" var="update_image_url" />
 <spring:message arguments="${typeName}" code="entity_update" var="update_label" htmlEscape="false" />
 <a href="${update_form_url}" alt="${fn:escapeXml(update_label)}" title="${fn:escapeXml(update_label)}">
    <img alt="${fn:escapeXml(update_label)}" class="image" src="${update_image_url}" title="${fn:escapeXml(update_label)}" />
 </a> 
```

希望您可以调整此示例以满足您的需求。

# java - java创建arraylist一个增加并存储增量的抽象方法

> ID：13273044
> 
> 赞同：0
> 
> 时间：2012-11-07T15:41:14.730
> 
> 标签：java, arraylist, abstract-class

我需要一点帮助。我现在正在为大学做作业，我在问题的一小部分上遇到了绊脚石。

让我给你背景。讲师完全没用。从书上读。没有做过任何工作的例子。抢了另一位讲师的作业。

现在我遇到的问题是，她给了我们一个抽象方法来实现如下

```
 public abstract int getId(); 
```

这是与通常的名字、姓氏、性别......结婚的东西，这将进入一个数组列表。我可以在睡梦中做到这一点。

问题是当我使用字符串构建代码时，我可以覆盖该功能，并且我可以成功构建除此部分之外的其余分配。如果她作为一个字符串离开会更容易，因为没有进行数学计算。我不能把它作为一个字符串保留，因为它是要求扣除 50% 的。

感谢您提前提供任何帮助。

基思

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:49:56.593

有什么问题：

```
public class YourClass extends YourAbstractClass {

    private static int id = 0;

    @Override
    public int getId() {
        return ++id;
    }

} 
```

# mysql - 将 mySQL 选择转换为 SQL 选择

> ID：13273045
> 
> 赞同：0
> 
> 时间：2012-11-07T15:41:20.017
> 
> 标签：mysql, sql, sql-server

我有这个 mySQL select 语句，它可以按我的需要工作；

```
SELECT `requires`, `level` FROM `fp` WHERE `model` = '".$model."' GROUP BY `level` ORDER BY `menu_order` 
```

在表中，*requires*和*level*都是 char 字段。当按 *menu_order* 排序时，每个*level*值的第一行将始终是我想要检索的*requires的值。*

对于我使用的 SQL 版本；

```
SELECT requires, level FROM fp WHERE model = '" & model & "' GROUP BY level ORDER BY menu_order 
```

现在，当我尝试在 SQL 上运行相同的查询时，我得到了；

需要'_is_invalid_in_the_select_list_because_it_is_not_contained_in_either_an_aggregate_function_or_the_GROUP_BY_clause

我发现了很多这个错误的例子，但似乎都比我想要做的要复杂得多。也许我已经使用 mySQL 太久了，以至于我的大脑陷入了这种思维方式。

应该如何用 SQL 编写该 select 语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:51:46.247

很难将您的 sql 转换为 MsSQL（如果这就是您所说的 SQL），因为 MySQL 和 MsSQL 允许使用 GROUP BY 的方式略有不同。

聚合是 SUM()、AVG()、COUNT() 等函数。因为 requires 不是一个聚合，它必须在 GROUP BY 的列表中，否则你会得到那个错误

您需要让我们知道您正在尝试做什么：我猜想尝试找到层次结构？

微软SQL

```
SELECT level, requires 
FROM fp 
WHERE model = '" + model + "' 
GROUP BY level, requires 
```

或者

```
SELECT level, count(*)
FROM fp 
WHERE model = '" + model + "' 
GROUP BY level 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:45:18.650

如果您要使用支持窗口函数（MS SQL Server、Postgres、Oracle）的 RDBMS，您可以`ROW_NUMBER`使用`level`. 然后您可以根据您的订单只挑选第一个。

```
SELECT requires, level
FROM (
    SELECT requires, level, 
        row_number() OVER (PARTITION BY level ORDER BY menu_order) rn
    FROM fp
    WHERE model = '"' + model + '"'
) A
WHERE rn = 1 
```

这是您查询的正确翻译并满足您的要求：

> 当按 *menu_order* 排序时，每个 level 值的第一行将始终是我想要检索的 requires 的值。

# c - 对 pthread_cond_wait 的调用必须被 pthread_cond_signal 唤醒吗？

> ID：13273052
> 
> 赞同：2
> 
> 时间：2012-11-07T15:41:32.580
> 
> 标签：c, pthreads

标题基本上不言自明。如果我使用特定条件和互斥锁调用 pthread_cond_wait，该线程是否会一直阻塞，直到使用相应条件调用 pthread_cond_signal？或者，无论互斥体随后是否再次解锁，它都会解除阻塞？

如果答案是前者，我有后续。我有一个用于在我的线程之间传递消息的队列。我想确保一次只有一个线程可以将一个项目附加到队列中（因此使用互斥锁）。没有任何线程知道是否有任何其他线程将等待自己控制互斥锁。

当尝试将项目附加到队列时，我锁定互斥锁，等待队列未满并具有 pthread 条件，然后执行附加，然后解锁互斥锁。在解锁它之前，我是否应该执行一个 pthread_cond_signal，即使我不知道是否有任何其他线程会等待？如果多个线程在等待会发生什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T16:05:30.227

1.  有人需要发信号/广播条件变量，否则等待线程*不一定*会被唤醒。您也可以获得“虚假”唤醒，但不要依赖它们。一旦服务员被唤醒（通过信号或广播或虚假的），它将开始尝试获取互斥锁，并且一旦它*返回* `pthread_cond_wait`。

2.  如果有多个线程在等待，则其中一个被唤醒（任意或根据实现记录的规则）。在您描述的代码中，线程在此 condvar 上等待的唯一位置是当它尝试将项目添加到完整队列时。所以你有三个选择：

    *   每次从完整队列*中删除*元素时，都会向条件变量发出信号。这会唤醒 0 个或多个服务员之一。然后在它添加一个元素后再次发出信号，如果队列仍然没有满，以防万一有超过1个服务员。

    *   每次从完整队列中删除元素时广播条件变量。现在您不需要在添加元素后发出信号。

    *   每次删除元素时都会向条件变量发出信号，无论队列是否已满。如果您这样做，请不要犯错误，即将来更改代码以一次性删除两个元素并且只发出一次信号。每次您发出信号时，条件变量都会将服务员的数量减少一个，这种方法之所以有效，是因为它可以防止同时存在至少一个服务员，*并且*尝试获取互斥锁的被唤醒的前服务员少于队列中的空间。因此，当有可用空间时，您永远不会让线程等待。

想到这一点的方式是，您正在等待的“条件”是“队列未满”。每当条件*变为*真时，您应该发出信号或广播条件变量。如果您选择发信号，并且可能有多个服务员，那么每个服务员都需要发信号（以唤醒下一个服务员）如果条件在完成其操作后*仍然为真。*

如果您不关心一些额外上下文切换的性能成本，并且如果您已经编写了正确等待 condvar 以应对虚假唤醒的代码，那么在条件为时发出信号或广播 condvar 也是安全的还是假的。这是条件变量的优点之一，它可以更容易地推断代码的正确性。因此，“只要条件为真，您应该发出信号或广播条件变量”的要求仅意味着它所说的。*当且仅当*条件为真时，您不必发出信号。

因此，在这种情况下，每次从队列中删除元素时都可以发出信号，无论它是否事先已满。在这种情况下，很容易将信号的数量减少到必要的最小值，但有时它比确定条件是否为真更麻烦，所以如果它现在为真并且*可能*有，则改为发出信号以前是假的，或者甚至只是表明它现在*可能*是真的。我不建议无缘无故地增加额外的唤醒，但有时它会使代码更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:07:08.553

`pthread_cond_wait`一旦 a) 条件变量发出信号并且 b) 另一个线程已解锁互斥锁，thw调用将解除阻塞。然后`pthread_cond_wait`将锁定互斥锁并返回。

（请注意，您几乎总是需要在返回后重新检查您的真实测试，例如“队列是否已满？” 。通常出于这个原因，`pthread_cond_wait`您会在循环中调用它。）`while`

您无法使用 pthread API 检查是否有任何其他线程正在等待条件变量，因此正常模式是在解锁互斥锁之前`pthread_cond_signal`或`pthread_cond_broadcast`之前调用。如果没有人在等待，这些都很便宜。

“信号”和“广播”的区别在于前者只唤醒一个等待线程（并没有指定哪个），而后者唤醒所有等待线程。

我认为在你的情况下，你应该在每次从队列中删除一个项目时“广播”，让插入线程知道他们有机会。然后，您不需要从其他插入发出插入线程的信号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T16:22:05.663

当您将项目放入队列时，如果队列先前为空，则向条件变量发出信号 - 这样您就可以唤醒可能等待从队列中获取项目的线程。如果队列不为空，则获取线程没有理由阻塞条件，因此不需要信号。

当您从队列中获取一个项目时，如果队列先前已完全满，则向**另一个**条件变量发出信号 - 这样您就可以唤醒一个可能等待将项目放入队列的线程。如果队列未满，则附加线程没有理由阻塞条件，因此不需要信号。

不要广播，除非您从队列中获取/放入多个项目。如果你只放一件物品，分别。只提供一个插槽并广播，您将唤醒所有线程，但只有一个线程能够取得进展，所有其他线程将返回等待并唤醒它们，它们恢复并返回睡眠将是纯粹的高架。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T15:46:37.050

1 是的。与调用关联的互斥`pthread_cond_wait()`锁由函数解锁。

2 任何等待条件的线程都可以恢复。返回时`pthread_cond_wait()`，关联的互斥锁被锁定。

> pthread_cond_wait
> 
> **原子地解锁互斥锁**（根据 pthread_unlock_mutex）并等待条件变量 cond 发出信号。线程执行被挂起并且在条件变量发出信号之前不会消耗任何 CPU 时间。调用线程必须在进入 pthread_cond_wait 时锁定互斥锁。**在返回调用线程之前，pthread_cond_wait 重新获取互斥锁**（根据 pthread_lock_mutex）。

# javascript - 在 Javascript 中存储树数据

> ID：13273053
> 
> 赞同：1
> 
> 时间：2012-11-07T15:41:33.533
> 
> 标签：javascript

我需要存储数据来表示这一点：

水 + 火 = 蒸汽
水 + 土 = 泥
泥 + 火 = 岩石

目标如下：我有可拖动的 HTML div，当`<div id="Fire">`和`<div id="Mud">`重叠时，我添加`<div id="Rock">`到屏幕上。曾经在 iPhone 或 Android 上玩过炼金术吗？同样的东西

现在，我这样做的方式是一个 JS 对象：

```
var stuff = {
    'Steam' : { needs: [ 'Water', 'Fire'] },
    'Mud'   : { needs: [ 'Water', 'Earth'] },
    'Rock'  : { needs: [ 'Mud',   'Fire'] },
    // etc...
}; 
```

每次一个 div 与另一个重叠时，我都会遍历对象键并检查“需要”数组。

我可以处理这种结构，但我想知道我是否可以做得更好？

**编辑**：我应该补充一点，我还需要存储一些其他的东西，比如简短的描述或图标名称。所以我有`Steam: { needs: [ array ], desc: "short desc", icon:"steam.png"},`

**最后编辑**：感谢大家的贡献，我在您的所有评论中发现了非常有价值的意见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:15:14.753

如何直接编码具有其他依赖项的元素以及它们产生的内容？

```
var elements = {
  water: {
    earth: 'mud', //water with earh produces mud
    fire: 'steam'
  },
  fire: {
    water: 'steam',
    mud: 'rock'
  },
  earth: {
    water: 'mud'
  },
  mud: {
    fire: 'rock'
  }
} 
```

因此，当您拥有 #div1 和 #div2 时，您只需执行以下操作：

```
elements[div1][div2]
elements['fire']['water']
"steam" 
```

并且您获得了生成元素的 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:57:44.960

每当您创建数据结构时，您需要牢记以下几点：

1.  熵应该很高（即冗余应该更少）。
2.  元素的访问时间应该更短。

我看到树的方式并不是表示您尝试建模的数据的最佳方式。

但是，您在代码中展示的内容很好。创建一个对象，其属性是方程的右侧元素：

```
var stuff = {
    Steam: ...,
    Mud: ...,
    Rock: ...
}; 
```

这允许及时访问元素`O(1)`。

方程的左侧可以像您所做的那样建模为数组。这就是我会做的。

然而，将它们包装在一个额外的对象中只是额外的冗余，它会增加元素的访问时间。

我会这样建模：

```
var stuff = {
    Steam: ["Water", "Fire"],
    Mud: ["Water", "Earth"],
    Rock: ["Mud", "Fire"]
}; 
```

然后，您可以通过用它们各自的基本“材料”替换数组中所有出现的复合“材料”来规范化您的表格。

**编辑：**根据您的评论，我建议您使用如下数据结构（您可以并且应该将其存储在`.json`文件中）：

```
{
    "Water": {
        "needs": []
    },
    "Fire": {
        "needs": []
    },
    "Earth": {
        "needs": []
    },
    "Steam": {
        "needs": ["Water", "Fire"]
    },
    "Mud": {
        "needs": ["Water", "Earth"]
    },
    "Rock": {
        "needs": ["Water", "Earth", "Fire"]
    }
} 
```

你应该存储基本的东西而不是复合的东西的原因是，同样的东西`stuff`可能是由一种以上的复合材料组合而成的。以基本形式存储成分是最少冗余的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T16:49:16.847

我玩过炼金术，我会用指向所需对象的链接替换需求数组。我还创建了一个我认为您在游戏中需要的制作数组。设置此深度链接一次会使后续查找更快。

```
var stuff = {
  Fire: {
    name: 'Fire', active: true, needs: []
  }
  ,Water: {
    name: 'Water', active: true, needs: []
  }
  ,Earth: {
    name: 'Earth', active: true, needs: []
  }
  ,Steam: {
    name: 'Steam', active: false, needs: ['Water','Fire']
  }
  ,Mud: {
    name: 'Mud', active: false, needs: ['Water','Earth']
  }
  ,Rock: {
    name: 'Rock', active: false ,needs: ['Mud','Fire']
  }
};

for (var name in stuff) {
    // create links for needs and wants
    for (var i=0, n; n = stuff[name].needs[i]; i++) {
        if (stuff[n]) {
            stuff[name].needs[i] = stuff[n];
            if (!stuff[n].makes) stuff[n].makes = [];
            stuff[n].makes.push(stuff[name]);
        }
    }
    (function (o) {
        o.getNeeds = function () {
            var needs = [];
            for (var i=0, n; n = o.needs[i]; i++) {
                needs.push(o.needs[i].name);
            }
            return needs;
        };
        o.getMakes = function () {
            var makes = [];
            if (!o.makes) o.makes = [];
            for (var i=0, n; n = o.makes[i]; i++) {
                makes.push(o.makes[i].name);
            }
            return makes;
        };
        o.dump = function () {
            return o.name + " needs(" + o.getNeeds().join(',') + "), makes(" + o.getMakes().join(',') + ")";
        };
    })(stuff[name]);
}

stuff.testCombine = function (itemArray) {
    // itemArray is an unordered array of "stuff" names to test, eg ['Water','Fire']
    // if the elements in itemArray match an makes list for an item, this function returns that item.
    // if no combine was found, this function returns false
    if (!itemArray || !itemArray[0] || !stuff[itemArray[0]]) return false;

    // itemArray[0] is the guinea pig item, we see what it can make, and then see what the ingredient lists are and compare them to itemArray
    possible = stuff[itemArray[0]].makes;
    itemArray = itemArray.sort();

    for (var i=0, p; p = possible[i]; i++) {
        var n = p.getNeeds().sort();

        var matched = false;
        // check if n and itemArray are identical
        if (n.length && n.length == itemArray.length) {
          var j = 0;
          for (j=0; j < n.length && n[j] == itemArray[j]; j++);
          if (j == n.length) matched = true;
        }

        if (matched) return p;
    }
    return false;
}

// shows properties of Steam
alert(stuff.Steam.dump());
// shows properties of Water
alert(stuff.Water.dump());

alert("Water can be used to make :\n" + [stuff.Water.makes[0].dump(), stuff.Water.makes[1].dump()].join("\n"));

// stuff.Steam.needs[0] is Water, .makes[1] is Mud, .makes[0] is Rock
alert(stuff.Steam.needs[0].makes[1].makes[0].name);

// test if 'Water', 'Earth' makes something:
var m = stuff.testCombine(['Water','Earth']);
if (!m) { 
    alert('Did not Combine'); 
} else {
    alert('Combined to make ' + m.dump());
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T22:58:33.903

如果您不介意包含另一个外部库并且熟悉 LINQ，则可以使用[linq.js。](http://linqjs.codeplex.com)

```
var stuff = {
  'Steam' : { needs: ['Water', 'Fire'] },
  'Mud'   : { needs: ['Water', 'Earth'] },
  'Rock'  : { needs: ['Mud',   'Fire'] }
    // etc...
};

function Alchemy(stuff) {
  var recipes = 
    Enumerable.From(stuff).ToLookup(
      "$.Value.needs",
      "$.Key", 
      "Enumerable.From($).OrderBy().ToString('+')"
    );

  this.attempt = function(elem1, elem2) {
    return recipes.Get([elem1, elem2]).ToString();
  };
};

var alchemy = new Alchemy(stuff);
console.log(alchemy.attempt('Fire', 'Mud'));   // "Rock"
console.log(alchemy.attempt('Fire', 'Earth')); // ""
console.log(alchemy.attempt('Fire', 'Water')); // "Steam" 
```

笔记

*   `Enumerable.From(stuff)`将您的`stuff`对象拆分为其`Key`和`Value`部分。
    例如，将`Key`引用`"Rock"`和。`Value``{ needs: ['Mud', 'Fire'] }`
*   `ToLookup()`从中创建一个查找字典。它需要3个参数：
    1.  要查找的内容（在本例中为 中的元素`"$.Value.needs"`）
    2.  如果找到匹配项返回什么（在这种情况下，结果元素的名称，即`Key`）
    3.  创建字典键的转换函数（在这种情况下，成分数组被转换为排序字符串：`['Mud', Fire']`成为`"Fire+Mud"`）。
*   该`Get()`函数使用相同的转换函数为其参数找到匹配项。

请注意，字符串参数 like`"$.Value.needs"`是
`function ($) { return $.Value.needs; }`.

linq.js 还提供[了更多有用的功能](http://neue.cc/reference.htm)，可以将复杂的任务转换为单行。

* * *

编辑：从查找中返回所有附加信息很简单：

```
function Alchemy(stuff) {
  var recipes = 
    Enumerable.From(stuff).ToLookup(
      "$.Value.needs",
      null, // return the object unchanged 
      "Enumerable.From($).OrderBy().ToString('+')"
    );

  this.attempt = function(elem1, elem2) {
    return recipes.Get([elem1, elem2]).FirstOrDefault();
  };
};

console.log(alchemy.attempt('Fire', 'Mud')); 
/* result
{
  Key: "Rock",
  Value: {
    needs: ["Mud", "Fire"],
    whatever: "else you had defined in {stuff}"
  }
}
*/ 
```

Lookup 对象的目的是提高速度。您还可以每次遍历整个对象图：

```
function alchemy(elem1, elem2) {
  return 
    Enumerable
    .From(stuff)
    .Where(function ($) {
      var recipe = Enumerable.From($.Value.needs);
      return recipe.Intersect([elem1, elem2]).Count() == 2;
    })
    .Select("{element: $.Key, properties: $.Value}")
    .FirstOrDefault();
);

console.log(alchemy('Fire', 'Water'));
// {element: "Steam", properties: {needs: ["Water", "Fire"]}} 
```

请注意，这`.Select()`是可选的。您可以删除它，在这种情况下，结果将与前面的示例相同。

# database - 如何决定是使用 ER 还是 UML 进行建模？

> ID：13273055
> 
> 赞同：12
> 
> 时间：2012-11-07T15:41:37.477
> 
> 标签：database, database-design, uml, er-diagrams

UML 图可用于建模数据库设计和类设计，但 ER 图应专门用于数据库问题。您如何选择一种图形表示而不是另一种？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-07T15:46:21.510

ERD - 实体关系图 - 为您提供表应如何连接、每个表上将包含哪些字段、表连接（如果是多对多、一对多）的图像。

UML 可用于除 ERD 之外的许多图表。序列图，状态图，更多的是应用程序的功能（用户可以做什么，谁做，他什么时候做，在什么步骤之前，他用什么表来做）除了表描述。

我会使用 ERD 来描述数据库关系，使用 UML 来描述操作、时间、动作等。

**参考维基：** [Entity-relationship_diagram](http://en.wikipedia.org/wiki/Entity-relationship_diagram) & [Unified_Modeling_Language](http://en.wikipedia.org/wiki/Unified_Modeling_Language)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T15:50:51.660

始终使用 UML，因为它包含 ER。使用 ER 的唯一原因是您使用的工具（例如，生成 DDL SQL 脚本来创建表）仅支持 ER（现在大多数都支持 UML，但您可能仍然会发现一些坚持使用 ER）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-07T15:46:43.367

UML 是一种表示法，因此如果您与了解 UML 的人交谈，使用 UML 将是有益的。经典的实体关系图通常采用 Chen 表示法。

就个人而言，我发现我总是使用 UML 来建模实体关系，并且只在学术界使用过 Chen。

# blackberry - 来自黑莓浏览器字段的位图？

> ID：13273057
> 
> 赞同：2
> 
> 时间：2012-11-07T15:41:40.130
> 
> 标签：blackberry, browserfield

在我的应用程序中，我将一些 HTML 内容加载到`BrowserField`. 我想将浏览器内容作为`Bitmap`. 我使用了以下代码。

```
Display.screenshot(Display.getWidth(), Display.getHeight()); 
```

但是要全屏。我需要特别注意`BrowserField`作为`Bitmap`.

我怎样才能做到这一点？

# codeigniter - CodeIgniter 从 URL 中删除函数

> ID：13273058
> 
> 赞同：-1
> 
> 时间：2012-11-07T15:41:39.753
> 
> 标签：codeigniter, url

我有一个使用 CI 表单验证的登录表单。

表格位于 domain.com/login

它运行一个名为 validate_credentials 的函数，如果验证失败，它会重新加载视图。问题是 URL 继续显示：

domain.com/login/validate_credentials

如何删除 /validate_credentials？

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Login extends CI_Controller {

    public function index()
    {
    $this->load->library('form_validation');

    $this->form_validation->set_rules('email', 'Email', 'trim|required|valid_email');
    $this->form_validation->set_rules('password', 'Password', 'required');

    $this->form_validation->set_error_delimiters('<div class="alert alert-error">', '</div><br />');

    if ($this->form_validation->run() == FALSE)
    {
        $this->load->view('login/login');
    }
    else
    {
        $this->load->view('clock/clock');
    }

}

function validate_credentials() {
    $this->load->model('membership_model');
    $query = $this->membership_model->validate();

    if($query) {// staff credentials validated...
        $data = array(
                'email' => $this->input->post('email'),
                'staff_logged_in' => TRUE
            );

            $this->session->set_userdata($data);
            redirect('clock/clock');
    }

    else {  // not validated reload index function
        $this->index();
    }
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:59:13.460

不要调用其他控制器函数，而是重定向到索引。因为 CodeIgniter 中控制器中的函数正在设置 URL 方案，所以您现在执行的方式只是执行 index 函数，但在 validate_credentials 函数（和 URL）内。

这样做：

```
 <?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Login extends CI_Controller {

    public function index()
    {
    $this->load->library('form_validation');

    $this->form_validation->set_rules('email', 'Email', 'trim|required|valid_email');
    $this->form_validation->set_rules('password', 'Password', 'required');

    $this->form_validation->set_error_delimiters('<div class="alert alert-error">', '</div><br />');

    if ($this->form_validation->run() == FALSE)
    {
        $this->load->view('login/login');
    }
    else
    {
        $this->load->view('clock/clock');
    }

}

function validate_credentials() {
    $this->load->model('membership_model');
    $query = $this->membership_model->validate();

    if($query) {// staff credentials validated...
        $data = array(
                'email' => $this->input->post('email'),
                'staff_logged_in' => TRUE
            );

            $this->session->set_userdata($data);
            redirect('clock/clock');
    }

    else {  // not validated reload index function
        //$this->index();
        $this->load->helper('url'); //to enable redirect function
        redirect('index'); //based on your index url
    }
}

} 
```

如果需要显示错误或成功信息，请参考 CodeIgniter 的[session 库](http://codeigniter.com/user_guide/libraries/sessions.html)的 flash_message，这里是一个例子。

在您的控制器中设置错误消息，就在重定向到索引之前：

```
$this->load->library('session');
$this->session->set_flashdata('error_message', "This is my error message"); 
```

在您的索引视图中，如果它存在，您将显示它：

```
<?if($this->session->flashdata('error_message')):?>
    <div class="nNote nFailure"><p><?=$this->session->flashdata('error_message');?></p></div>
<?endif;?> 
```

请注意 flash_message 只显示一次。这意味着您的索引将显示您的错误，然后销毁会话消息。这是 flash_message 的目的，正确且简单地显示错误消息。

# python - PyDev 找不到模块

> ID：13273062
> 
> 赞同：0
> 
> 时间：2012-11-07T15:41:46.370
> 
> 标签：python, eclipse, python-2.7, pydev, ctypes

我是 Python 新手，在 Windows 中的 Eclipse Juno 中使用 PyDev 2.71 进行以下示例：

```
from ctypes import cdll

msvcrt = cdll.mscvrt
message_string = "test\n"
msvcrt.printf("Testing: %s", message_string) 
```

但是，它正在生成以下错误：

```
 self._handle = _dlopen(self._name, mode)
WindowsError: [Error 126] The specified module could not be found 
```

在创建这个 PyDev 模块之前，我在 Eclipse 中添加了解释器。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:02:25.597

我傻了，我有一个错字。

它是cdll。**msvcrt**不是 cdll。**mscvrt**

现在可以了。

# networking - TCP SACK 重叠选项

> ID：13273066
> 
> 赞同：1
> 
> 时间：2012-11-07T15:41:57.493
> 
> 标签：networking, tcp

我面临一个奇怪的问题。我们有两个通过 RFC 进行通信的系统，但是这种通信每次都会因以下问题而中断：

客户端收到一个 SLE=2734286 和 SLR=2777173 的 TCP ACK 客户端然后开始重新传输“丢失”的包 然后收到一个 TCP DUP ACK 和 SACK：2777089-2777173 2734286-2777173

这很奇怪，不是吗？SACK 参数重叠。然后客户端再次发送丢失的包，但总是收到 TCP DUP ACK。5 次尝试后，客户放弃了。

它的 Windows 2003 到 Linux 2.6.32。

你们中有人知道这样的问题吗？网络连接本身工作正常（例如，通过 SSH 复制数据时，SACK 协议似乎工作正常）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:14:32.967

根据 RFC (http://tools.ietf.org/html/rfc2018)，这些 SACK 没有任何问题。数据接收器**应该**修剪第二个 SACK，但这不是硬性要求（来自第 4 节）：

> SACK 选项应该通过重复最近报告的 SACK 块来填充（基于先前 SACK 选项中的第一个 SACK 块），这些 SACK 块不是已包含在正在构建的 SACK 选项中的 SACK 块的子集

我怀疑数据接收器的实现（这是您示例中的服务器）仅包括在段到达时生成一个 SACK 条目并将其推送到列表中，而不是每次都尝试折叠列表。

# python - App Engine Python 开发服务器 + 任务队列 + 后端

> ID：13273067
> 
> 赞同：7
> 
> 时间：2012-11-07T15:42:01.800
> 
> 标签：python, google-app-engine

我在本地开发服务器上使用 GAE Python 2.7。我已经配置了一个后端

```
backends:
- name: worker
  class: B1
  options: dynamic 
```

我正在使用默认的任务队列。一切正常，后端和任务队列在 SDK 控制台上可见。本地开发工作也开始没有任何错误：

```
Multiprocess Setup Complete:
Remote API Server [http://localhost:9200]
App Instance [http://localhost:9000]
Backend Instance: worker.0 [http://localhost:9100]
Backend Balancer: worker [http://localhost:9199] 
```

但是如果我尝试通过任务解决后端

```
taskqueue.add(url='/xyz', method='POST', target='worker', params={'a':'b'}) 
```

此错误引发：

```
ERROR An error occured while sending the task "task1" (Url: "/backend/languages/create_database/") in queue "default". Treating as a task error.
Traceback (most recent call last):
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/taskqueue/taskqueue_stub.py", line 1884, in ExecuteTask
    connection.endheaders()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 937, in endheaders
    self._send_output(message_body)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 797, in _send_output
    self.send(msg)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 759, in send
    self.connect()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 740, in connect
    self.timeout, self.source_address)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 553, in create_connection
    for res in getaddrinfo(host, port, 0, SOCK_STREAM):
gaierror: [Errno 8] nodename nor servname provided, or not known 
```

我正在使用“本地主机”，看不出它失败的任何原因。一些想法/解决方案？缺少任何启动参数或类似的东西吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T23:59:05.217

这是 中的一个错误[`taskqueue.py`](http://code.google.com/searchframe#Qx8E-7HUBTk/trunk/python/google/appengine/api/taskqueue/taskqueue.py&q=taskqueue.py%20package:googleappengine%5C.googlecode%5C.com&l=827)，它错过了区分生产环境和开发环境的案例。

在生产中，它通过连接`target`与来做正确的事情`hostname`。

在开发中，这不起作用，并且会在尝试解析`worker.localhost`地址时产生您报告的错误。

相反，它应该将任务主机设置为`ip:port`dev_appserver 正在运行后端。

公共问题跟踪器中已经有一个[错误](http://code.google.com/p/googleappengine/issues/detail?id=5105)已上报给工程团队。

如果您想收到有关更新的通知，请随意给它加注星标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T06:46:12.787

有一种解决方法可以帮助我在本地进行调试：

```
if os.environ['SERVER_SOFTWARE'].startswith('Development'):
    taskqueue.add(url='/task', params={...})
else:    
    taskqueue.add(url='/task', params={...}, target='backendservername') 
```

在这种情况下，如果我们在本地调试，我们会在常规任务队列中运行任务。如果我们将此代码放入 App Engine，它将使用后端服务器启动任务。

# objective-c - UISlider 在最大边缘位置没有响应

> ID：13273069
> 
> 赞同：1
> 
> 时间：2012-11-07T15:42:08.627
> 
> 标签：objective-c, ios, uiviewcontroller, uislider, touches

我已经使用 DoubleSlider 实现了 UISlider[问题](https://github.com/doukasd/iOS-Components/tree/master/Controls/DoubleSlider)是当我的视图出现并且我的滑块手柄在那时处于最小和最大位置时。

**症状**：

*   加载视图时，maxHandle 长时间不响应触摸。当它最终响应时，它运行良好，但它需要大约 5 秒才能唤醒。
*   当我将手柄移动到滑块的最大边缘时，这种情况会重复。

**尝试的解决方案**：

*   我已经调试了这个问题，它发现手柄没有得到触摸事件。我想知道为什么，因为它在一段时间后正常工作。
*   我检查了可触摸区域并将其做得非常大（80x120px）

还有什么可能导致这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:10:10.050

问题是，当我制作一个狭窄的滑块区域时，该触摸开始于屏幕边缘之间，滑块不接受它作为滑块的起始触摸。使滑块的活动区域如此之大，以使滑块边缘与屏幕边缘之间的间隙小于触摸区域，从而解决了该问题。

# python - 使用 SQLAlchemy/sqlite 为并发进程提交错误

> ID：13273077
> 
> 赞同：1
> 
> 时间：2012-11-07T15:42:31.423
> 
> 标签：python, sqlite, sqlalchemy

我正在尝试编写一个 Python + SQLAlchemy 应用程序，它使用一个集中的 sqlite 数据库来存储有关各种文件的信息。我使用校验和来验证每个文件和/或文件版本在数据库中只存储一次，所以我`UniqueConstraint`在校验和列上有一个。

我将文件信息存储在`DbFile`要对其进行进一步操作的对象中。我创建了一个名为的静态方法`New()`，它将返回一个`DbFile`对象。如果文件已经存在于数据库中，它将返回该对象，否则将创建一个新对象。

```
 import md5
 # Not shown: sqlalchemy imports

 Base = declarative_base()
 engine = create_engine('sqlite:///test.db')
 Session = sessionmaker(bind=engine)
 session = Session()

 class DbFile(Base):
     id = Column(Integer, primary_key=True)
     filename = Column(String, nullable=False)
     checksum = Column(String, nullable=False)

     __table_args__ = (UniqueConstraint('checksum'),)

     @staticmethod
     def New(filename):
          file_md5 = md5.md5(open(filename).read())
          checksum = file_md5.hexdigest()

     q = session.query(Files).filter(Files.checksum == checksum)
     if q.count() == 1:
         print "Loading existing file object from database"
         return q.one()

     dbfile = DbFile(filename=filename, checksum=checksum) 
```

在加载了一些文件后，我做了一个`session.commit()`. 如果只有一个进程正在访问数据库，这很好用，但是如果我启动多个 python 进程（从命令行），其中一个总是会中止并`sqlalchemy.exc.IntegrityError`抱怨校验和违反了唯一键约束。在检查存在和写入数据库之间显然存在竞争条件，但我还没有找到防止它的好方法。

我试图捕获错误，`session.commit()`但有时错误是由`q.count()`语句触发的。有没有一种干净的方法可以做到这一点？

# jquery - jQuery：当父类更改时更改子类名称的一部分

> ID：13273082
> 
> 赞同：0
> 
> 时间：2012-11-07T15:42:48.780
> 
> 标签：jquery, class, replace, parent-child

我有以下 HTML 结构：

```
<div id="settings-choose">
    <a href="#setting1" class="setting-tab">
        <div class="content">
            <div class="icon setting1-off"></div>
            <div class="label">Setting 1</div>
        </div>
    </a>
    <a href="#setting2" class="setting-tab">
        <div class="content">
            <div class="icon setting2-off"></div>
            <div class="label">Setting 2</div>
        </div>
    </a>
    <!-- more .setting-tab elements -->
</div> 
```

每当我单击其中一个`.setting-tab`元素时，我都想：

1.  将类添加`.selected`到该`.setting-tab`元素（并将其从其他元素中删除）
2.  将其子元素`-off`上的“”部分替换为“ ”（并将所有其他部分翻转为“ ”）`.icon``-on``-off`

我可以成功地做到#1，但不能做到#2。这是我所拥有的：

```
$("#settings-choose .setting-tab").click(function(){
    $("#settings-choose .setting-tab").removeClass("selected");
    $(this).addClass("selected");

    $("#settings-choose .setting-tab").each(function(){
        var icon = $(this).find(".icon"),
            state = icon.attr("class");

        if (!($(this).hasClass("selected"))){
            state.replace("-on", "-off");
        } else {
            state.replace("-off", "-on");
        }
    });
}); 
```

这会正确地将`.selected`类添加到单击的任何`.setting-tab`元素并将其从其他元素中删除...

```
<a href="#setting1" class="setting-tab selected">...</a>
<a href="#setting2" class="setting-tab">...</a> 
```

但是`.icon`元素的类没有改变......

```
<a href="#setting1" class="setting-tab selected">
    <div class="content">
        <div class="icon setting1-off"></div>
        <div class="label">Setting 1</div>
    </div>
</a> 
```

我在控制台中没有收到任何错误，只是......它没有改变。

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:51:16.357

快速回答是您忘记了仅替换变量中的文本的类的分配值。

```
 if (!($(this).hasClass("selected"))){
            icon.attr("class", state.replace("-on", "-off"));
        } else {
            icon.attr("class", state.replace("-off", "-on"));
        } 
```

但您可以进行其他更改，例如

```
$("#settings-choose .setting-tab").removeClass("selected"); 
```

反而

```
$("#settings-choose .selected").removeClass("selected"); 
```

# ruby - ruby 的正确 utf-8 编码注释行是什么？

> ID：13273084
> 
> 赞同：4
> 
> 时间：2012-11-07T15:42:52.880
> 
> 标签：ruby, unicode, encoding, utf-8

> **可能重复：**
> [Ruby - UTF-8 文件编码](https://stackoverflow.com/questions/6444826/ruby-utf-8-file-encoding)

我一直在使用 UTF-8，并希望帮助 ruby​​ 解释器读取我的文件。因此，我`# encoding=utf-8`在我的 ruby​​ 代码的开头放了这样的：

```
#!/usr/bin/env ruby
# encoding=utf-8 
```

但时不时地，我会看到其他变体： `bundle gem NAME`插入`# -*- encoding: utf-8 -*-`（进入 NAME.gemspec）。gem [magic_encoding 也](https://github.com/m-ryan/magic_encoding)使用了这一行。

推荐的方法是什么？

*   `# encoding = utf-8`
*   `# encoding: utf-8`
*   `# -*- encoding: utf-8 -*-`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T15:46:58.937

简短的回答：

```
# encoding: utf-8 
```

这是一个完整的答案： [Ruby - UTF-8 file encoding](https://stackoverflow.com/questions/6444826/ruby-utf-8-file-encoding)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T15:45:53.167

对于可接受的内容，它看起来像是一个相当宽松的规范。我一直用：

```
# encoding: UTF-8 
```

也可以接受的是`coding`。我找不到关于允许的变体的参考，但只要您的文件被正确解释，它应该没问题。检查该`__ENCODING__`值以确保它被拾取。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-07T16:15:22.443

Python 的行为方式相同，[这个 Python 问题](https://stackoverflow.com/questions/728891/correct-way-to-define-python-source-code-encoding)的答案表明没有真正的建议，只需选择适合您的编辑器的方法：对于 Emacs，使用`# -*- encoding: utf-8 -*-`; 供 VIM 使用`# vim:fileencoding=<encoding-name>`。

# c - 如何通过 C 中的函数正确分配和传递指针

> ID：13273086
> 
> 赞同：0
> 
> 时间：2012-11-07T15:42:55.417
> 
> 标签：c, memory-management

我有三个文件：

### 某事.h

```
typedef struct {
    int size_t;
    char *c;
} p;

p ** createMatrix(int r, int c);

void printMatrix(p **matrix, const int r, const int c); 
```

### 某事.c

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "something.h"

p **
createMatrix(int r, int c)
{
    int rowsize=r*2+1;
    int colsize=c*2+1;

    /* memory alloc of rows */
    p **matrix=malloc(rowsize*sizeof(p *));
    int k;
    for(k=0; k<rowsize; k++)
    {
        /* memory alloc of columns */
        matrix[k]=malloc(colsize*sizeof(p));
    } 
    int i, j;
    for(i=0; i<rowsize; i++)
    {
        for(j=0; j<colsize; j++)
        {
            /* columns is between letters */
            if(j%2!=0)
        {   
                matrix[i][j].size_t=7;
                matrix[i][j].c=malloc(8*sizeof(char));
                strcpy(matrix[i][j].c,"       ");
        }
        else if(i%2==0 && j%2==0)
            {
                matrix[i][j].size_t=1;
                matrix[i][j].c=malloc(sizeof(char));
                *(matrix[i][j].c)='a';
            }
            else
            {
                matrix[i][j].size_t=1;
                matrix[i][j].c=malloc(sizeof(char));
                *(matrix[i][j].c)=' ';
            }
        }
    }       
    return matrix;
}

void
printMatrix(p **matrix, const int r, const int c)
{
    int rowsize=r*2+1;
    int colsize=c*2+1;
    printf("\n");
    int i, j;
    for(i=0; i<rowsize; i++)
    {
        printf("\t");
        for(j=0; j<colsize; j++)
        {
            if(matrix[i][j].size_t==1)
                printf("%c", *matrix[i][j].c);
            else
                printf("%s", matrix[i][j].c);

        }
        printf("\n");
    }
    printf("\n");
 } 
```

### 主程序

```
#include <stdlib.h>
#include <stdio.h>
#include "something.h"    

void
printMenufunction(p **matrix, int rows, int cols)
{
    int rowsize=rows*2+1;
    int colsize=cols*2+1;
    /* memory alloc of rows */
    matrix=malloc(rowsize*sizeof(p *));
    int i;
    for(i=0; i<rowsize; i++)
    /* memory alloc of columns */
        matrix[i]=malloc(colsize*sizeof(p));
    matrix=createMatrix(rows, cols);
}

int
main(void)
{
    int rows, cols;
    p **matrix;
    char *stringtemp;
    printf("ask for row and col in form (5x5):\n");
    scanf("%s", stringtemp);
    sscanf(stringtemp, "%dx%d", &rows, &cols);
    printMenufunction(matrix, rows, cols);
    printMatrix(matrix, rows, cols);
    return 0;
} 
```

这个简化的版本给我带来了分段错误。我不明白我要在哪里访问未分配的内存？有人可以解释一下吗？(SSCCE)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:58:17.197

这段代码没有任何问题，除了内存泄漏，因为您分配了矩阵，然后将其分配给使用该函数创建的矩阵，而没有释放先前分配的矩阵。

# vhdl - 如何在 VHDL 中表示数组文字？

> ID：13273091
> 
> 赞同：2
> 
> 时间：2012-11-07T15:43:12.827
> 
> 标签：vhdl, hdl, modelsim

我有以下类型声明：

```
type cachesubset is record
                      tag     : std_logic_vector(3 downto 0);
                      word0   : w32;
                      word1   : w32;
                      dirty   : std_logic;
                      valid   : std_logic;
                    end record;

type    cacheset is record
                      lru : std_logic;
                      subsets: array(0 to 1) of cachesubset
                    end record; 
```

我想定义空的缓存集常量：

```
constant 
empty_cachesubset : cachesubset := (
                                    tag   => "0000",
                                    word0 => "00000000000000000000000000000000",
                                    word1 => "00000000000000000000000000000000",
                                    dirty => '0',
                                    valid => '0'
                                   );

constant 
empty_cacheset    : cacheset    := (
                                    lru     => '0',
                                    subsets => ???
                                   ); 
```

关键是我不知道如何创建数组文字。

## 一些笔记...

请不要介意我使用两个单独的字段来处理子集中的单词，而我可能对缓存集和子集做同样的事情......关键是我还将为子集中的单词应用数组...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:35:06.423

你可以这样做：

```
library ieee;
use ieee.std_logic_1164.all;

package test is
    subtype w32 is std_logic_vector(31 downto 0);

    type cachesubset is record
        tag   : std_logic_vector(3 downto 0);
        word0 : w32;
        word1 : w32;
        dirty : std_logic;
        valid : std_logic;
    end record;

    type subsetst is array (0 to 1) of cachesubset;

    type cacheset is record
        lru     : std_logic;
        subsets : subsetst;
    end record;

    constant empty_cachesubset : cachesubset := (
        tag => (others => '0'),
        word0 => (others => '0'),
        word1 => (others => '0'),
        dirty => '0',
        valid => '0'
    );

    constant empty_cacheset : cacheset := (
        lru         => '0',
        subsets     => (
            0 => empty_cachesubset,
            1 => (
                tag => (others => '0'),
                word0 => (others => '0'),
                word1 => (others => '0'),
                dirty => '0',
                valid => '0'
            )
        )
    );
end package test; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:12:57.740

```
subsets => ??? 
```

最简单的方法是将数组中的每个条目设置为相同的值...

```
subsets => (others => empty_cachesubset); 
```

正如另一个答案所示，您可以将各个元素设置为不同的值 - 然后使用“其他”来默认其余部分。

# c - 菜单程序的 Excel 数据文件

> ID：13273092
> 
> 赞同：-8
> 
> 时间：2012-11-07T15:43:13.593
> 
> 标签：c, excel, menu, pic

我使用 Microchip MPLAB X IDE 用 C 语言为 PIC24 微控制器编写了一个菜单程序。菜单是在运行时从数据文件构建的。数据文件目前为Assembler 文件，与C 程序文件链接，但维护难度较大。我想做的是在 Excel 电子表格中构建数据文件，然后以某种方式将其导出（.csv？）并将其添加到菜单项目中，但不知道该怎么做。请记住，数据文件包含程序中包含的变量和函数标识符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:34:48.880

就目前的问题而言，这个问题很模糊，但在这里。

您的汇编程序/C 代码需要给定格式的数据才能进行汇编/编译。

您建议使用 Excel 来维护菜单...您的汇编器/编译器将无法理解 xls 或 csv（或很可能是 xml），因此不能选择直接导出。

但是，您可以编写 VBA 脚本来从 Excel 数据生成 asm/c 文件。

# system.reactive - EventLoopScheduler 中的 RX2 异常

> ID：13273094
> 
> 赞同：0
> 
> 时间：2012-11-07T15:43:22.970
> 
> 标签：system.reactive, reactive-programming

我们已经从 RX1.1.11111.1 迁移到 RX 2.0.20823.2。现在我们遇到了一个来自 EventLoopScheduler 的罕见异常：

```
an Unhandled Exception occured in non UI thread.
System.NullReferenceException: Object reference not set to an instance of an object.
   at System.Reactive.Concurrency.EventLoopScheduler.Run()
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

有谁猜出是什么问题？是因为我们没有使用 onError 委托并且我们的方法之一失败了吗？

这是代码的要点：

EventLoopScheduler m_scheduler = new EventLoopScheduler();

. . .

m_receivedMessageHandler.StatusReceived.ObserveOn(m_scheduler) .Subscribe(p_unit => sendAll(m_retransmitManager, m_endPoint));

sendAll 中的异常会导致这种行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:32:53.767

您需要在订阅中放置一个 onError 处理程序，否则应用程序将崩溃。如果您不关心错误，那么就吃掉它，不要做任何事情。我有一次同样的错误，所以我做了

```
 var subscription = observable.Subscribe(
                onNext: (v) => DoSomethingWith(v),
                onError: (Exception e) => {
                    // Just eat and log the exception.
                    Debug.WriteLine(e.ToString());
                }
            ); 
```

当我不在乎异常时。如果这是一个真正的问题，最好明确地忽略错误和/或将其记录在某个地方。

# c - fgetc 在识别新行时停止 (\n)

> ID：13273095
> 
> 赞同：3
> 
> 时间：2012-11-07T15:43:26.607
> 
> 标签：c, file, newline, fgetc

我有这个代码：

```
while( (cCurrent = fgetc(fp)) != EOF)
{

} 
```

问题是，当它遇到新行时，它会停止读取。

什么是忽略换行符的好方法？

编辑：

我正在尝试创建一个文件加密器。它能够加密文件，但解密过程不起作用。它一直工作到第一行的末尾，但不会继续到文件中的下一个字符。

例如，对于文本文件：

```
Foo  
Bar 
```

加密后的结果是：

> 许||Gb|t

解密后的结果是：

> ```
> FooRqb 
> ```

我的结论是新行字符是问题所在。也许不是。

我的代码是：

```
/* check if the file is openable */
if( (fp = fopen(szFileName, "r+")) != NULL )
{
    /* save current position */
    currentPos = ftell(fp);
    /* get the current byte and check if it is EOF, if not then loop */
    while( (cCurrent = fgetc(fp)) != EOF)
    {
        /* XOR it */
        cCurrent ^= 0x10;
        /* take the position indicator back to the last position before read byte */
        fseek(fp, currentPos, SEEK_SET);
        /* set the current byte */
        fputc(cCurrent, fp);
        /* reset stream for next read operation */
        fseek(fp, 0L, SEEK_CUR);
        /* save current position */
        currentPos = ftell(fp);
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T16:38:19.153

我花了一段时间，但我终于得到了你想要做的事情。

输入文件：

```
Hello 
```

通过运行您的代码进行加密：

```
Xu||(non displayable character) 
```

通过再次运行您的代码来解密：

```
Hello 
```

那么这是如何工作的：

```
0x48 XOR 0x10 = 0100 1000 (H)---+
                0001 0000       |
                ---------       V
                0101 1000 = 58 (X)

0x58 XOR 0x10 = 0101 1000 (X)---+
                0001 0000       |
                ---------       V
                0100 1000 = 48 (H) 
```

`'\n'`问题在于您正在使用0xA [16]的换行符

输入文件：

```
Hello
You 
```

这工作正常，直到`'\n'`我们得到新行：

```
0xA XOR 0x10 =  0000 1010 ('\n')---+
                0001 0000          |
                ---------          V
                0001 1010 = 1A (substitute character) 
```

[替换字符](http://en.wikipedia.org/wiki/Substitute_character)在 DOS 操作系统中，此字符用于指示文件的结尾 (EOF)

所以这失败了*，因为*你在 Windows 上工作。因此，您需要对加密/解密中的情况进行特殊检查，`'\n'`而不是盲目地对其进行异或。

一个简单的解决方法，您可以简单地执行以下操作：

```
while( (cCurrent = fgetc(fp)) != EOF)
{
    /* XOR it if it's not a '\n'*/
    if(cCurrent != '\n')
      cCurrent ^= 0x10; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T16:50:08.377

在 Windows 上，文本文件中的行由 分隔`\r\n`，而不仅仅是`\n`，并且文件默认以“文本”模式打开，读取文件时会自动转换`\r\n`为（参见[Visual Studio 2012 中的 fopen](http://msdn.microsoft.com/en-us/library/yeby3zcb%28v=vs.110%29.aspx)）。`\n`

由于您将文件解释为字节序列（由于 XOR 操作），因此您不希望出现这种行为 - 每次有一行结束时，您都会丢失一个数据字节。您应该以“二进制”模式打开文件以抑制此行为：

```
fp = fopen(szFileName, "rb+") 
```

这也将抑制@Mike 指出的读取`\x1A`字符被解释为文件结尾的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T15:48:13.540

`fgetc`不应该在换行符处停止，只能在`EOF`man [fgetc(3)](http://linux.die.net/man/3/fgetc)处停止：

> fgetc() 从流中读取下一个字符并将其作为 unsigned char 转换为 int 或**文件末尾的 EOF 或错误**返回。

但是，如果你这样写：

```
while( (cCurrent = fgetc(fp)) != '\n' && cCurrent != EOF) 
```

它将在换行符处*停止，所以第一个是正确的：*

```
while( (cCurrent = fgetc(fp)) != EOF) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T15:48:36.017

这不是[fgetc()](http://www.cplusplus.com/reference/clibrary/cstdio/fgetc/)的正确行为。

您的第二个代码片段令人费解，因为它实际上在您换行时会中断。所以如何解决这个问题对我来说是个谜。

我怀疑你的逻辑有点混乱。

# c# - 在 asp.net 文本框中使用选定的文本

> ID：13273097
> 
> 赞同：0
> 
> 时间：2012-11-07T15:43:42.310
> 
> 标签：c#, asp.net

我有一个包含常规文本的文本框。我希望用户能够选择一个单词并从该单词创建一个超链接。我将通过基本上使用该词并将其替换为 a 标签并添加 url 信息来做到这一点。我的问题是如何从后面的 c# 代码中获取用户选择的文本。我看到了一些关于 selectedtext 的东西，但它只适用于 windows 窗体文本框。有任何想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:47:24.193

这在纯 asp.net 中是不可能的。你必须添加一些客户端技术来获取浏览器中的操作。

使用普通 html 页面，查看 Jquery 或其他 javascript 框架，并突出显示文本，例如： http: [//mark.koli.ch/2009/09/use-javascript-and-jquery-to-get-user-选定的文本.html](http://mark.koli.ch/2009/09/use-javascript-and-jquery-to-get-user-selected-text.html)

或者看一下silverlight，您可能会发现所有可用于Windows 窗体的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:50:08.770

我建议使用 javascript。

```
var startPos =input.selectionStart;
var endPos = input.selectionEnd;
var selectedText = input.value.substring(startPos, endPos); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:50:59.103

您不能从后面的代码中做到这一点，因为您的 C# 代码在服务器上运行并且用户在客户端上选择此文本。您将不得不使用 Javascript。

我推荐 jQuery FieldsSelection ：

[https://github.com/localhost/jquery-fieldselection](https://github.com/localhost/jquery-fieldselection)

# opengl-es - 减少顶点缓冲区中的重复数据

> ID：13273099
> 
> 赞同：9
> 
> 时间：2012-11-07T15:43:49.537
> 
> 标签：opengl-es, opengl-es-2.0, vbo

我一次使用 3 个顶点缓冲区（我实际上有很多，但一次只使用了 3 个）。

它们包含在着色器中混合在一起以产生所需输出的信息 - 2D 骨骼动画。

有两个*骨骼*缓冲区，其中包含任何给定帧处骨骼的位置/旋转/缩放。

有一个*皮肤*缓冲区，其中包含用于渲染纹理区域的顶点，就好像它位于世界原点*(0,0)*一样。

在着色器中，将两个骨骼缓冲区与一个缓动值组合（作为统一传递），然后通过变换皮肤顶点，将部分渲染到正确的位置。

这表现得很好，并且是对我开始的地方的一个很好的改进——我在 GPU 上计算了所有内容，并且只是传入了 x/y/u/v 坐标，我受到每帧向 GPU 传输大量数据的限制。

但是，有很多重复的信息。皮肤缓冲区只包含它需要的东西，每个皮肤部分有 4 个顶点，每个顶点都是唯一的。

但是，当它与骨骼结合时，每个骨骼顶点被复制 4 次——以匹配皮肤缓冲区。在移动设备上工作，这简直是一种痛苦，因为我的内存不足，而且有这么多的浪费让我很恼火。

如果只有 1 个骨骼，这就是缓冲区的外观。

**骨缓冲液 1**

`[x1,y1,rot1] [x1,y1,rot1] [x1,y1,rot1] [x1,y1,rot1]`

**骨缓冲液 2**

`[x2,y2,rot2] [x2,y2,rot2] [x2,y2,rot2] [x2,y2,rot2]`

**皮肤缓冲液**

`[xA,yA,uA,vA] [xB,yB,uB,vB] [xC,yC,uC,vC] [xD,yD,uD,vD]`

我不会发布完整的着色器，因为那里有太多额外的东西（旋转和缩放工作类似）：

```
attribute vec2 bonePosition1; // x1, y1
attribute vec2 bonePosition2; // x2, y2
attribute vec2 skinPosition; // xA (or xB .. ), yA (or yB .. )
uniform float a; // Some value 0..1 depending on time
...
vec2 bonePosition = mix(bonePosition1, bonePosition2, a);
vec2 combinedPosition = skinPosition * bonePosition; 
```

笔记; 因为我主要针对 iOS（其他人也是如此，但它是最严格的），所以我知道我仅限于 16 个属性。

有没有办法缩小骨骼缓冲区的内存占用？我有很多很多帧到一个皮肤缓冲区。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T06:05:30.843

`GL_ELEMENT_ARRAY_BUFFER`如我所见，您需要为带有数据（）的缓冲区绑定多个索引缓冲区（`GL_ARRAY_BUFFER`）。如果您能够绑定 2 个`GL_ARRAY_BUFFER`缓冲区，您也可以单独绑定一个`GL_ELEMENT_ARRAY_BUFFER`。我不知道这是否可以在 OpenGL ES 中实现。如果这是不可能的，您可以尝试使用整数而不是浮点数来节省内存，但我相信这不适用于骨骼平移/旋转值。

关于你的笔记。要克服 16 个属性的限制，您可以将较小的`vec2`属性组合成`vec4`. 例如，您可以将`bonePosition1`and`bonePosition2`合并为一个`vec4`：

```
attribute vec4 bonePosition12; 
```

然后在着色器中以这种方式使用它：

```
vec2 bonePosition1 = vec2(bonePosition12.x,bonePosition12.y);
vec2 bonePosition2 = vec2(bonePosition12.z,bonePosition12.w); 
```

这可能对性能有一些小的影响，但由于此代码在顶点着色器中，与着色器的数学相比，性能下降应该可以忽略不计。我已经使用类似的代码来操纵颜色（在片段着色器中）并且性能还可以。

# svn - 为什么 svn 合并结果是任意的？

> ID：13273101
> 
> 赞同：2
> 
> 时间：2012-11-07T15:44:03.217
> 
> 标签：svn, merge, tortoisesvn

为什么以及如何解决？我的机器上安装了 Win7 x64 和最新的 TortoiseSVN。

我们现在正处于关键时刻，并且像许多其他人一样拥有主干和分支。

今天我不得不提交主干，并将其合并到分支很多次，因为我犯了很多错误。

反正！合并结果不可靠！我以前没有问题。

首先我尝试了外部差异和合并工具，来自 Scooter Software 的 Beyond Compare。它似乎比以前更好，但我仍然得到一个随机结果。

请帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:54:24.713

如果您按顺序合并**相同的源**（合并的数据在运行之间未更改）多次合并，您将获得**相同的结果**。时期

> 今天我不得不提交主干，并将其合并到分支很多次，因为我犯了很多错误......

如果您“commit-merge-commit-merge...-commit merge”至少更改了一个源，则在这种情况下合并结果**会有所不同。**有什么让你如此惊讶？

反正

> 合并结果不可靠！

不是很好的问题描述，甚至根本不是问题的描述。停止歇斯底里，尽可能多地展示细节。像这样的东西（我会试着想象你的情况）

## 示例错误报告开始

当我尝试合并`URL/trunk/filename@REVA`时，`URL/branches/somebranch/filename@REVB`我总是得到不同的合并结果，请参阅

`SAMPLEMERGED1`

`SAMPLEMERGED2`

`SAMPLEMERGED3`

即使始终有相同的差异

`svn diff URL/trunk/filename@REVA URL/branches/somebranch/filename@REVB`

`... diff output here ...`

分支文件的历史是

`svn log --stop-on-copy URL/branches/somebranch/filename@REVB`

`... log output here ...`

我有 TortoiseSVN v. NNN 和 SVN-server v. NNN 上的存储库

## 错误报告示例 END

# javascript - 使图像占据 100% 的高度，但不是 100% 的高度（缩小时保持图像相同的尺寸）

> ID：13273104
> 
> 赞同：0
> 
> 时间：2012-11-07T15:44:07.857
> 
> 标签：javascript, html, css

编辑：感谢 minitech，让它比以前更接近工作。我使用“封面”作为背景大小，并且在放大/缩小时不再调整大小（如所希望的那样），但现在图像也太大了。有没有办法解决？

再次感谢。

...

原帖：

我正在制作一个网站，我希望左栏成为一个图像，该图像占据用户浏览它的任何分辨率的 100% 的高度和 30% 的宽度。此外，如果他们放大/缩小，我希望图像调整大小，以便它仍然保持浏览器的完整高度。

我尝试使用以下 javascript 以像素为单位设置包含 div 的宽度/高度，然后使用百分比调整其余部分：

`document.write('<div id="container" style="width: ' + window.innerWidth + 'px; height: ' + window.innerHeight + 'px;">');`

它不像我预期的那样工作（没有重新调整尺寸），并且比我测试过的几个浏览器/分辨率（尤其是在 iPad 上）上的查看高度更高或更短。

该网站是[http://lesliecampbellweddings.com/](http://lesliecampbellweddings.com/)。

任何帮助是极大的赞赏！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:47:41.573

您可能可以使用绝对定位：

```
#container {
    bottom: 0;
    position: absolute;
    top: 0;
    width: 30%;
} 
```

[这是一个演示。](http://dabblet.com/gist/4032390)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:50:59.333

很可能您不需要任何 JavaScript，只需要`background-attachment:fixed;`用于您的左列。

看看这个工作演示：http: [//jsfiddle.net/ckukT/](http://jsfiddle.net/ckukT/)

这是此示例的 HTML：

```
<div id="wrapper">
    <div id="left-col">
    </div>
    <div id="right-col">
        <p>Random text and content that would be needed goes here</p>
    </div>
</div>​ 
```

这是各自的CSS：

```
#wrapper {height:100%; width:100%;}

#left-col {
    background: url("http://www.lesliecampbellweddings.com/images/brideAndGroom.jpg") top center fixed no-repeat;
    width:50%;
    height:900px;
    float:left;
}

#right-col {
    background: yellow; /* so you can see it*/
    width:50%;
    height:900px;
    float:left;
} 
```

​</p>

可以随意使用固定像素来代替 center top 作为背景定位，但是 center 将使照片保持居中，尽管浏览器的宽度或大小如何，并且 top 将使其始终显示顶部 - 如果你总是使用 center center 你可以使用想要显示图像的中间。你可以玩这个，但理想情况下，我假设你会一直保持她的脸。

# java - Apache Batik - 例外：“prolog 中不允许的内容”将 PDF 转换为 JPEG

> ID：13273113
> 
> 赞同：0
> 
> 时间：2012-11-07T15:44:41.923
> 
> 标签：java, svg, transcoding, batik

当我尝试将某些 PDF 转换为 JPEG 时出现异常，并显示消息“prolog 中不允许内容”。我正在执行一个两步操作，将 SVG 转换为 PDF，然后将 PDF 转换为图像。

当我尝试执行 Batik 的直接流程时，我遇到了这个问题。

这是我的代码。

```
File pdfFile= new File("path to pdffile");
InputStream in = new java.io.FileInputStream(pdfFile);
JPEGTranscoder transcoder = new JPEGTranscoder();
transcoder.addTranscodingHint(JPEGTranscoder.KEY_XML_PARSER_CLASSNAME,
        "org.apache.crimson.parser.XMLReaderImpl");
transcoder.addTranscodingHint(JPEGTranscoder.KEY_QUALITY,
        new Float(1.0));
TranscoderInput input = new TranscoderInput(in);
OutputStream ostream = new FileOutputStream("path to jp file here!");
TranscoderOutput output = new TranscoderOutput(ostream);
transcoder.transcode(input, output);
ostream.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:33:12.667

Batik[转码器](http://xmlgraphics.apache.org/batik/using/transcoder.html)期望将 SVG 数据作为输入，而不是 pdf 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:33:25.093

我找不到任何建议您可以使用 Batik 将 PDF 转换为 JPEG 的内容。顺便说一句，Batik 是一个 XML 图形库，*而不是*通用的转码器库。从 PDF 转换为 JPEG 不是它的用途，它用于显示和/或将 SVG 输入转码为某些图像输出。

现在，话虽这么说，你有什么理由不能直接从 SVG 转到 JPEG 吗？或者使用 Batik 将 SVG 转码为 PDF，然后使用 Batik 之外的其他库将 PDF 转码为 JPEG？您对这种方法有什么担忧？

# wcf - 验证 WCF 输入的最佳方法

> ID：13273122
> 
> 赞同：0
> 
> 时间：2012-11-07T15:45:28.300
> 
> 标签：wcf

在我的服务中，除了某些强制参数和所有输入参数之外的所有方法都封装在消息契约中。

现在，我们正在验证每个服务方法中的输入，就像在所有服务方法中复制验证逻辑一样。有什么办法可以将所有这些验证移到共同的地方，而且我不希望我的服务方法被执行，因为输入无效。

感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T02:27:17.093

Enterprise Library [Validation Application Block](http://msdn.microsoft.com/en-us/library/ff664356%28v=pandp.50%29.aspx)有一个[与 WCF 集成](http://msdn.microsoft.com/en-us/library/ff664526%28v=pandp.50%29.aspx)的模块。

它将输入验证实现为 WCF 参数检查器。如果参数验证失败，您的方法将永远不会被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:49:57.337

是的，您可以对每个请求使用[FluentValidator 。](http://fluentvalidation.codeplex.com/)`MessageContract`

您可以为具有通用验证规则的请求编写通用验证器。

**例如**：如果您想在两者中验证员工个人资料`CreateEmployeeRequest`，`UpdateEmployeeRequest`那么您可以为员工个人资料 () 编写通用验证器，`EmployeeProfileValidator`并在创建和更新员工请求验证器中使用此验证器。

# list - SML 清单二重奏

> ID：13273123
> 
> 赞同：-1
> 
> 时间：2012-11-07T15:45:32.620
> 
> 标签：list, sml

我需要一个函数，它会以一个列表为例`[1,1,2,2]`，并最好返回`[2,2]`或者`[(2*1),(2*2)]`，但`[2,0,2,0]`只要它可能查看列表中有多少双峰就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:07:19.847

您可以尝试先使用[ListMergeSort](http://www.smlnj.org/doc/smlnj-lib/Manual/listsort.html)的排序功能对列表进行排序。一旦你有了一个排序列表，就可以很容易地使用一个简单的递归函数来找到每个元素的频率。

# java - 从按钮数组启动 realcalc

> ID：13273124
> 
> 赞同：0
> 
> 时间：2012-11-07T15:45:35.460
> 
> 标签：java, android, button, android-intent

我试图从我的应用程序中通过一个按钮启动 realcalc，但每次我尝试它都没有做任何事情。

按钮的代码

```
case 15: {
            Intent intent2 = new Intent("uk.co.quarticsoftware.REALCALC");
            double x = 0;// Set initial value (double).
            if (!texts[n].getText().toString().equals("")
                    || !texts[n].getText().toString().equals(null))
                x = Double.parseDouble(texts[n].getText().toString());
            intent2.putExtra("X", x);
            // Launch calculator.
            startActivityForResult(intent2, 0);

            break;
        }// open Calculatorcase 7: 
```

由于它是一组按钮，因此我使用开关盒，因为某些按钮具有不同的功能。switch case 包含在单个 onclick 侦听器块中。所有按钮都可以正常工作，但我似乎无法启动意图。如果我从应用程序第一页上的按钮尝试此操作，它似乎可以工作。在设备上没有 google play 或 realcalc 但我没有看到应用程序经历异常的情况下，我也编写了异常代码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:53:28.367

```
Intent i = new Intent();
i.setClassName("com.android.calculator2",
               "com.android.calculator2.Calculator");
startActivity(i); 
```

取自这里[链接](http://groups.google.com/group/android-developers/browse_thread/thread/792eb424da2f946e)

这个和我一起工作：

```
Intent intent = new Intent();

                intent.setAction(Intent.ACTION_MAIN);
                intent.addCategory(Intent.CATEGORY_LAUNCHER);
                intent.setComponent(new ComponentName(
                CALCULATOR_PACKAGE,
                CALCULATOR_CLASS));

                Calculator.this.startActivity(intent); 
```

# unix - 将文件从 s3 下载到 STDOUT

> ID：13273130
> 
> 赞同：7
> 
> 时间：2012-11-07T15:46:04.243
> 
> 标签：unix, amazon-s3

我目前使用 s3cmd 从 s3 下载文件。但是我宁愿将内容输出到 STOUT。你知道可以做到这一点的unix工具吗？

谢谢，扬

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-07T15:51:36.153

您需要在`-`命令参数的末尾添加以使其将输出重定向到 STDOUT。

例子 ：`s3cmd get s3://... -`

有关更多信息，请参阅[此线程](http://www.mail-archive.com/s3tools-general@lists.sourceforge.net/msg00130.html)。

# android - 用eclipse检测TF300

> ID：13273131
> 
> 赞同：1
> 
> 时间：2012-11-07T15:46:06.287
> 
> 标签：android, eclipse

嗨，我刚刚开始研究 Android 编程，并且遇到了 Eclipse 检测我的 TF300T 的问题。我认为它应该只是插入 USB 电缆。

我可以使用 AVD 来测试我的代码，但是我想看看它在真实设备上的功能，任何帮助将不胜感激。

我还确保通过管理器安装了 Google USB 设备更新，PC 也确实检测到了平板电脑，只是在 Eclipse 中没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:49:36.490

在您的设备上，启用 USB 调试（在设置 -> 应用程序 -> 开发中），并确保您的连接设置为“仅充电”（在设置 -> USB 连接类型 -> 默认连接类型中）。

以上是针对我的 HTC Evo 的，在您的 TF300T 上可能会有所不同，但底线是您需要启用 USB 调试并确保 USB 连接类型未设置为磁盘驱动器。

# php - 在 PHP foreach 循环中动态添加数组

> ID：13273133
> 
> 赞同：-1
> 
> 时间：2012-11-07T15:46:09.873
> 
> 标签：php, arrays, loops, foreach

我正在尝试从数据库动态地将新数组添加到现有数组中，但我的循环仅添加 mysql_fetch_row 中的最后一行。我认为它实际上是在覆盖同一个数组。

**PHP 代码**

```
<?php
$con = require_once('./dbconnect.php');

global $con;
mysql_select_db("packages", $con);
$packages = mysql_query("SHOW TABLES FROM packages");

while($row = mysql_fetch_row($packages)){
    $node = array();

    foreach($row as $key2 => $value2){
        $node[$row[0]] = array("Item1" => "Other dynamic Info here");
    }
}

print_r($node);

mysql_close($con);
?> 
```

输出如下：

```
Array
(
    [Pack1] => Array
        (
            [Item1] => Other dynamic Info here
        )

) 
```

它应该输出：

```
Array
(
    [Pack1] => Array
        (
            [Item1] => Other dynamic Info here
        )

)
Array
(
    [Pack2] => Array
        (
            [Item2] => Other dynamic Info here
        )

) 
```

**我一直试图让这个 foreach() 循环工作大约一天......我做错了什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:49:54.077

**尝试将 while 循环外的 $node 数组定义为：**

```
$node = array(); ## <-- HERE

while ($row = mysql_fetch_row($packages))
{    
    foreach ($row as $key2 => $value2) 
    {
        $array      = array("Item1" => "Other dynamic Info here");
        $key        = $row[0];
        $node[$key] = $array;
    }
} 
```

您还可以使用它[`var_dump`](http://php.net/var_dump)来调试您的代码，以便在出现问题时更快地发现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:48:27.717

应该

```
foreach($row as $key2 => $value2){
    $node[$key2] = array("Item1" => "Other dynamic Info here");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:49:01.307

宣布

```
$node = array(); 
```

在while循环之外。

如果节点数组的索引无关紧要，您可以使用“附加”表示法

```
foreach($row as $key2 => $value2){
    node[] = array("Item1" => "Other dynamic Info here");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T15:53:42.127

您正在通过`while`循环在每个循环中覆盖数组，但仅在最后一个循环后输出数组一次。您的代码应如下所示（注意 的位置`print_r`）：

```
<?php
$con = require_once('./dbconnect.php');

global $con;
mysql_select_db("packages", $con);
$packages = mysql_query("SHOW TABLES FROM packages");

while($row = mysql_fetch_row($packages)){
    $node = array();

    foreach($row as $key2 => $value2){
        $node[$row[0]] = array("Item1" => "Other dynamic Info here");
    }
    print_r($node);
}

mysql_close($con);
?> 
```

这将在循环的每个循环中输出数组`while`。

# requirejs - Require.JS + Backbone +“Crockfords”模型模式

> ID：13273136
> 
> 赞同：0
> 
> 时间：2012-11-07T15:46:11.170
> 
> 标签：requirejs

条件：

1）我们有一堆使用以下模式的遗留代码：

base.js

```
var Base = function(config) {
    var that={};
    that.doThing1=function(){};
    that.doThing2=function(){};
    return that;
} 
```

child.js

```
var Child = function(config) {
    var that=Base;
    that.doStuff1=function(){that.doThing1();};
    that.doThing2=function(){};
    return that;
} 
```

2）最重要的事情之一是它是遗留代码，而且很多，所以重构一切以使用不同的模式现在*完全不可能*。

3）我正在尝试将 require.js 用于当前项目，以及 w/backbone，因此我想要在其中需要“Base”依赖项的子类。

这是我现在所在的位置，但它不起作用：

```
require('Base'), function(Base) {
    var Child = function(config) {
        var that=Base;
        that.doStuff1=function(){that.doThing1();};
        that.doThing2=function(){};
        return that;
    }
    return Child;
} 
```

问题）：

如何设置此模式，以便我可以将 require() 包裹在它周围，以异步获取遗留依赖项，以便我可以将 require() Child 放入主干类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T23:29:12.370

好吧，这似乎做到了。让我感到震惊的是 - 请注意在 base.js 中该类的名称不存在。相反，我在 require.config() 中命名了它。

base.js

```
define(function() {
    return function(config) {
        var that={};
        that.doThing1=function(){};
        that.doThing2=function(){};
        return that;
    };
}); 
```

child.js

```
define(['Base'], function(Base) {
    return function(config) {
        var that=Base(config);
        that.doStuff1=function(){that.doThing1();};
        that.doThing2=function(){};
        return that;
    };
}); 
```

# c# - 应该使用什么方法将模型绑定到现有会话对象？

> ID：13273144
> 
> 赞同：0
> 
> 时间：2012-11-07T15:46:33.447
> 
> 标签：c#, asp.net-mvc

这是我的问题：

我们有一个带有一组受控用户的 Intranet asp.net mvc 3 应用程序。我们有一个 Person 类，它包含大量信息，最初加载并存储在会话中。该对象的数据/编辑跨越许多屏幕。基本上，每个屏幕都是 Person 数据的一个子集。

我正在尝试利用 asp.net mvc 中的内置模型绑定。我是否应该创建一个数据类来绑定来自每个屏幕的表单数据，然后使用服务对象更新我的会话对象？

下面的示例：DxFormData 包含人员数据的子集，并且仅用作此方法的参数。

```
 public ActionResult Dx(DxFormData data)
 {
    // Update current session Person object with data passed in if modelstate is valid
    var viewModel = this.GetDxViewModel();        
    return View(viewModel);
 }

public class DxForm Data
{
    public string AdmitDx { get; set; }
    public string PrinDx { get; set; }
} 
```

我正在寻找有关这种方法的想法，以及是否有更好的解决方案可供我使用。我看到的问题是 person 类包含所有数据，而我正在使用该数据的子集创建另一个类。显然，复制属性。

旁注：我确实编写了一个自定义模型绑定器，该绑定器返回会话人员进行绑定。但是，当它尝试绑定时，我不断收到错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:44:32.373

我认为这种方法没有问题。如果您尝试使用`Parent`类作为操作参数，然后在每个表单提交操作中，您将收到验证错误，因为模型未完全填充，因此您应该在这种情况下使用视图模型，不幸的是您无法避免重复属性。

# php - 查看表结构后，phpMyAdmin 的链接将不起作用

> ID：13273145
> 
> 赞同：1
> 
> 时间：2012-11-07T15:46:34.147
> 
> 标签：php, nginx, phpmyadmin, ubuntu-12.04

当任何用户登录到 phpMyAdmin 以查看/编辑表、导航到任何表并查看结构时，他们无法再单击任何链接以导航到 phpMyAdmin 的任何其他部分，直到他们重新加载页面或打开一个链接新标签/页面。

只要您不尝试查看表格结构，界面的其余部分就可以正常工作。一旦您查看表格结构，链接就会停​​止正常单击。

我什至不知道从哪里开始，让我知道哪些代码示例或日志会有所帮助。

配置：

Ubuntu 12.04（完全更新）
nginx（来自 Ubuntu 存储库）
mysql（来自 Ubuntu 存储库）
php5 和 mysql 扩展（来自 Ubuntu 存储库）
phpMyAdmin（来自 GitHub 存储库）

# php - $.post 函数没有返回正确的数据

> ID：13273159
> 
> 赞同：1
> 
> 时间：2012-11-07T15:47:26.053
> 
> 标签：php, javascript, jquery, post

我正在使用 $.post 将数据从可放置元素传递到我的主页。然而，当我回显数据时，我得到的工具栏以及我获取的数据都会回显给我。

```
if (isset($_POST['data'])){
$data = $_POST['data'];
echo $data; 
```

包含 $.post 的 javascript 如下

```
if(dropbox && dropbox1 !== ''){
        $.post("account_main.php", 
          {data: $(this).text()}, 
          function(data) {
                $('#demo').html(data);
          });       
        } 
```

使用可放置元素的脚本的视觉效果是[HERE](http://jsfiddle.net/Kxtvg/247/)，但问题未在此处显示，无法复制。我愿意接受任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:50:34.277

```
if (isset($_POST['data'])) {
    echo $_POST['data'];
    # Other stuff
    exit; # Kill the script
} 
```

如果我正确理解您的问题，那应该对其进行排序:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:30:34.693

你试一试 ：

```
if (dropbox && dropbox1 !== "") {
    var url, params, callback;
    url = "account_main.php";

    params = {
       "data": $(this).text()
    };

    callback = function(data) {
         $("#demo").html(data);
    }

    $.post(url, params, callback, "html");
} 
```

请注意，我强烈建议您使用 JSON 而不是 HTML 作为响应。

```
header("Content-type: application/json");
echo json_encode($my_result); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-07T15:50:58.353

```
data: $(this).text() 
```

$(this) 指的是 $.post，我认为这不是您想要的数据。

# objective-c - 有没有办法知道工具提示何时会出现在 NSImageView 上？

> ID：13273162
> 
> 赞同：0
> 
> 时间：2012-11-07T15:47:42.103
> 
> 标签：objective-c, xcode, cocoa, nsview, nsimageview

我想知道是否有在显示工具提示之前调用 get 的方法。我在任何地方都找不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:07:32.080

不！！！但是，您可以使用 -mouseEntered() 事件创建自己的 NSView 子类。

# c# - 重新启动一个进程

> ID：13273163
> 
> 赞同：4
> 
> 时间：2012-11-07T15:47:44.693
> 
> 标签：c#, process, kill

我想重新启动一个程序。
我找到了进程并调用了 Kill 方法，然后我再次运行它：
process.Kill();
进程.开始（）；

它停止但不启动。
此外，如果我放置 Exited 事件，它永远不会触发。
有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T15:49:53.583

`Process.Kill()`是异步的。你需要`Process.WaitForExit()`在调用 kill 后调用。

# objective-c - WebService IOS design optimization

> ID：13273167
> 
> 赞同：0
> 
> 时间：2012-11-07T15:47:52.803
> 
> 标签：objective-c, ios, json, web-services

Im using a web service to populate a tableview, but the data in my web database changes very rarely, and i don't need to always download the same data. I need to storage the data in the device, and verify if the data on the device is different than the one on the web. What is the best practice to do that? Parse a JSON object, containing the last version and comparing to the local version and then parsing the data if its needed ? Is there a way to automate the last version?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:50:36.250

I personally used [local storage](http://www.w3schools.com/html/html5_webstorage.asp) for the same situation on iOS and it worked great.

You just need to provide an URL which responds with the last version of the data (maybe a date) and then locally in JavaScript you first check if version online is newer than your local stored one, if it is you redownload data and place it into localstorage, otherwise you just keep old data (and don't download anything at all).

Of course everything must be done through Ajax.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:53:16.057

If you have control over the web APIs then have a separate api that returns a timestamp for the last web data change and check this. If the date is not newer than the date of last download use the local data. imho.

# java - 带有属性文件的 Spring ACL

> ID：13273173
> 
> 赞同：0
> 
> 时间：2012-11-07T15:48:03.193
> 
> 标签：java, spring, jsp, spring-security, acl

我想知道是否有人尝试实现 spring acl 功能，但不是使用数据库，而是使用简单的属性文件。例如 ：

myobject.input.field1=ACL_READ
myobject.input.field2=ACL_READ,ACL_WRITE

在jsp中：

```
<sec:accesscontrollist hasPermission="ACL_READ" domainObject="myobject.input.field1">
This will be shown if the user has either of the permissions 
represented by the values "1" or "2" on the given object.
    <input type="text" name="field1" />
</sec:accesscontrollist> 
```

cf [http://static.springsource.org/spring-security/site/docs/3.1.x/reference/taglibs.html#d0e6991](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/taglibs.html#d0e6991)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:32:10.333

首先，你的方法

```
myobject.input.field1=ACL_READ
myobject.input.field2=ACL_READ,ACL_WRITE 
```

不包含有关`SID`被授予指定权限的 s（安全 ID）的任何信息。SID 是可以被授予权限的任何主题。例如，您的应用程序或用户组的用户。谁被授予对象的`ACL_READ`权限`myobject.input.field1`？我猜你忘记了。

其次，持有这样一个属性文件将只是实现您自己的数据库系统。你最好使用现有的软件。

如果您不想使用 PostgreSQL 或 Oracle 等成熟的 RDBMS，您可以使用基于文件的关系数据库。

现有和经过测试的软件：

*   SQLite

*   数据库

# twitter4j - 如何使用 twitter4j 处理速率限制以避免被禁止

> ID：13273174
> 
> 赞同：1
> 
> 时间：2012-11-07T15:48:04.583
> 
> 标签：twitter4j

我还没有被 Twitter 禁止。但是，我想避免它。我有一个简单的方法，使用 StatusListener 根据关键字数组拉推文，然后它们将被分支数组过滤。据我了解，StatusLintener 仅获取新推文，并且仍在运行，直到应用程序停止。

我认为这段代码会在一段时间后达到速率限制。那么，有没有办法处理呢？一个身份验证请求可以在一小时内请求 350 次，它是如何与 StatusLintener 一起工作的？

```
public static void getTweetsKeywords(ConfigurationBuilder cb, String[] keywords, String[] branches,){
    TwitterStream twitterStream = new TwitterStreamFactory(cb.build()).getInstance();

    StatusListener listener = new StatusListener() {

        public void onStatus(Status status) {   
            System.out.println(status.getCreatedAt()+" - "+"@" + status.getUser().getScreenName() + " - " + status.getText());
        }

        public void onDeletionNotice(StatusDeletionNotice statusDeletionNotice) {
            System.out.println("Got a status deletion notice id:" + statusDeletionNotice.getStatusId());
        }

        public void onTrackLimitationNotice(int numberOfLimitedStatuses) {
            System.out.println("Got track limitation notice:" + numberOfLimitedStatuses);
        }

        public void onScrubGeo(long userId, long upToStatusId) {
            System.out.println("Got scrub_geo event userId:" + userId + " upToStatusId:" + upToStatusId);
        }

        public void onException(Exception ex) {
            ex.printStackTrace();
        }
    };

    FilterQuery fq = new FilterQuery();
    fq.track(keywords);

    twitterStream.addListener(listener);
    twitterStream.filter(fq);      
} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T15:51:42.503

`StatusListener`不会轮询 Twitter API 来获取推文。它监听来自 Twitter Streaming API 的推文流。因此，它不受速率限制。

# java - @override 是什么意思？我到底在压倒什么？

> ID：13273179
> 
> 赞同：-3
> 
> 时间：2012-11-07T15:48:13.113
> 
> 标签：java, android, overriding

> **可能重复：**
> [您何时使用 Java 的 @Override 注释，为什么？](https://stackoverflow.com/questions/94361/when-do-you-use-javas-override-annotation-and-why)

我在许多代码中看到了很多 @override 元素，但我并不完全知道它的含义。例如：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
} 
```

我不知道这意味着什么，我不明白我在压倒什么。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T15:49:39.090

这意味着您正在覆盖父类的方法（您从中扩展的方法）。

# c# - c#嵌套结构属性的反射

> ID：13273180
> 
> 赞同：2
> 
> 时间：2012-11-07T15:48:20.077
> 
> 标签：c#, .net, reflection

我正在尝试对对象解析进行一些动态文本，但是，在为结构创建和设置嵌套属性值时遇到了障碍。

如果我在一个结构对象中有一个属性，那么每当我使用反射来获取结构对象并设置它的任何属性/字段时，对象上的值都不会改变。以下面的对象图为例。

```
public struct MyStruct
{
    public int MyIntProp {get;set;}
}

public class MyObj
{
    public MyStruct NestedStruct {get;set;}
}

PropertyInfo pInfo = (myObj.GetType()).GetProperty("NestedStruct");
object nestedStruct = pInfo.GetValue(myObj); // This is the nested struct however it is only a copy not the actual object
PropertyInfo intInfo = (pInfo.PropertyType).GetProperty("MyIntProp");
intInfo.SetValue(nestedStruct, 23); // this sets the MyIntProp on the nestedStruct, but it is not set on the myObj.NestedStruct.  My goal is to set object on that NestedStruct via reflection. 
```

当我使用反射获取 NestedStruct 属性然后在该结构上设置 MyIntProp 时，原始的 MyObj.NestedStruct.MyIntProp 不会改变。自然，我将此归因于结构是值类型而不是引用类型的事实。

所以真正的问题是如何使用反射来获取对值类型的引用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T15:50:58.427

> 如果我在一个结构对象中有一个属性，那么每当我使用反射来获取结构对象并设置它的任何属性/字段时，对象上的值都不会改变。

好吧，不 - 因为在这条线上：

```
object nestedStruct = pInfo.GetValue(myObj); 
```

...您正在复制该值，因为它是一种值类型。你也在装箱——这很好，因为这意味着当你在`intInfo.SetValue`调用中改变它时，它是被修改的装箱副本。（如果您在调用时对其进行拳击`intInfo.SetValue`，那真的是没有希望的。）

在盒装副本中进行更改后，您需要将其设置*回*对象的属性中：

```
pInfo.SetValue(myObject, nestedStruct); 
```

*尝试不*使用反射来做你正在做的事情会很有启发性：

```
MyObj myObj = new MyObj();
myObj.NestedStruct.MyIntProp = 23; 
```

编译器会在最后一行给你一个错误，解释这是一件愚蠢的事情：

> Test.cs(20,9)：错误 CS1612：无法修改“MyObj.NestedStruct”的返回值，因为它不是变量

# php - shell 脚本是否可以检测 JavaScript 是否在 firefox 上运行？

> ID：13273181
> 
> 赞同：0
> 
> 时间：2012-11-07T15:48:24.940
> 
> 标签：php, javascript, shell

我用 JavaScript 编写了一个 HTML 页面，一个 PHP 文件和一个 shell 脚本它们都在我运行 shell 脚本的同一台机器上，它将用 Firefox 打开 html 页面，当 JavaScript 完成时，它会 POST 到 getdata.php

```
<form id="hidden_form" method="POST" action="getdata.php" ></form> 
```

getdata.php 会做一些事情，然后它会向 shell 脚本发送一个信号

以上是正常行为，恐怕在某些时候，PHP 或 JavaScript 会出错并且不会向 shell 脚本发送信号

shell脚本有什么好的简单的方法来检测JavaScript是否正在运行？

下面的一个人提到我可以让javascript定期向服务器发送请求，比如每2分钟一次，但是如何让shell脚本注意到这个/获取信号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:53:44.737

不。

请记住：Javascript 在客户端浏览器上远程运行；PHP（和你的 shell 脚本）在服务器上。

您*可以*做的是在发送网页时（在服务器上）设置警报，并在触发时调用警报处理程序：

*   [http://www.woodwose.net/thatremindsme/2011/05/forking-parallel-processes-in-bash/](http://www.woodwose.net/thatremindsme/2011/05/forking-parallel-processes-in-bash/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:00:23.723

如果您的 JavaScript 正在运行一个长时间处理的脚本，您可能会在设定的时间间隔内间歇性地向服务器提交请求。如果您在设定的时间段后没有看到请求...（间隔 x2 或 w/e）并且在完成后未收到信号，您可以假设 JavaScript 本身已停止运行/中断。

```
setInterval("methodofcommunicatingtotheserver", 1000); 
```

等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T16:01:17.337

..如前所述：不。

在这种情况下，您最好的选择是：

1.  重新设计你的脚本。它是否绝对有必要通过浏览器内的javascript将请求发送到php页面？
2.  如果上述答案是肯定的，请查看[Selenium](http://seleniumhq.org/)，尤其是[Selenium WebDriver](http://seleniumhq.org/projects/webdriver/)。

它不提供开箱即用的 bash 脚本绑定，但它很容易从 Python（或 PHP，他们说）等其他语言使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T16:29:13.630

正如有人建议的那样，您可以使用 setInterval 轮询服务器以查看 javascript 引擎是否仍在运行，但这也可能意味着只有执行 setInterval 的 javascript 线程才是实际运行的线程（取决于可能出现的错误类型）。您可以将帖子发送到“status.php”，这将触摸/写入磁盘上的文件，bash 脚本可以轮询该文件以查看它是否定期更新。

但是，我建议您研究类似[phantomjs](http://phantomjs.org/)的东西，它可以让您解决这类问题。

# python - 以数组为索引的 Numpy 切片

> ID：13273187
> 
> 赞同：1
> 
> 时间：2012-11-07T15:48:36.247
> 
> 标签：python, numpy

我正在尝试将完整的索引集提取到 N 维立方体中，这似乎`np.mgrid`正是我所需要的。例如，`np.mgrid[0:4,0:4]`生成一个 4 x 4 矩阵，其中包含相同形状数组中的所有索引。

问题是我想根据另一个数组的形状在任意数量的维度上执行此操作。即，如果我有一个任意维度的数组`a`，我想做类似的事情`idx = np.mgrid[0:a.shape]`，但不允许使用这种语法。

是否可以构建我需要`np.mgrid`工作的切片？或者是否有其他一些优雅的方式来做到这一点？以下表达式可以满足我的需要，但它相当复杂并且可能效率不高：

```
np.reshape(np.array(list(np.ndindex(a.shape))),list(a.shape)+[len(a.shape)]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:53:09.217

我通常使用[np.indices](http://docs.scipy.org/doc/numpy/reference/generated/numpy.indices.html)：

```
>>> a = np.arange(2*3).reshape(2,3)
>>> np.mgrid[:2, :3]
array([[[0, 0, 0],
        [1, 1, 1]],

       [[0, 1, 2],
        [0, 1, 2]]])
>>> np.indices(a.shape)
array([[[0, 0, 0],
        [1, 1, 1]],

       [[0, 1, 2],
        [0, 1, 2]]])
>>> a = np.arange(2*3*5).reshape(2,3,5)
>>> (np.mgrid[:2, :3, :5] == np.indices(a.shape)).all()
True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:54:59.270

我相信以下内容可以满足您的要求：

```
>>> a = np.random.random((1, 2, 3))
>>> np.mgrid[map(slice, a.shape)]
array([[[[0, 0, 0],
         [0, 0, 0]]],

       [[[0, 0, 0],
         [1, 1, 1]]],

       [[[0, 1, 2],
         [0, 1, 2]]]]) 
```

它产生完全相同的结果，`np.mgrid[0:1,0:2,0:3]`只是它使用`a`' 形状而不是硬编码尺寸。

# ajax - 通过 ajax 渲染部分时条件不起作用

> ID：13273188
> 
> 赞同：0
> 
> 时间：2012-11-07T15:48:40.240
> 
> 标签：ajax, ruby-on-rails-3

在我的**index.js.erb**

```
$(".div").html("<%= escape_javascript(render('something/some_form')) %>"); 
```

在**some_form.htm.erb**我有不工作的条件

```
<% if @variable1 == @variable2 %> 
   show something1
<% else %>
   show something2
<% end %> 
```

出于某种原因，当我的 js.erb 呈现这个部分时，我总是有*show something2*。所以 <% if @variable1 == @variable2 %> 条件不起作用

在我的控制器中定义的 variable1 和 variable2

我怎样才能使这个平等的条件起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:53:14.953

控制器变量在部分中不可见。请阅读有关部分的[官方文档](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:48:18.290

您需要通过局部变量将这些变量传递给局部变量：

```
//e.g locals: {variable1: @variable1, variable2: @variable2}

$(".div").html("<%= escape_javascript(render('something/some_form', locals: {variable1: @variable1, variable2: @variable2})) %>"); 
```

某种形式

```
<% if variable1 == variable2 %> 
   show something1
<% else %>
   show something2
<% end %> 
```

# axapta - Axe X++ 覆盖对话框表单字段过滤器 CustAccount

> ID：13273195
> 
> 赞同：2
> 
> 时间：2012-11-07T15:49:12.287
> 
> 标签：axapta, x++

我的对话框也有类似的问题，但是没有控制调用方法出现错误。

我正在尝试覆盖对 CustAccount 类型的对话框字段的查找 - 我想要的是查找以返回 invoiceAccount 具有特定值的所有 custTable 记录。

这是我的代码：

```
class AG_UpdateQuoteCust extends Runbase
{
DialogField                 dlgCust;
CustAccount                 newCust;
CustAccount                 custAccount;

#define.CurrentVersion(1)
#define.Version1(1)
#localmacro.CurrentList
    custAccount
#endmacro
}

public Object dialog()
{

DialogRunbase      dlg;
;

dlg = super(dlg);

dlg.caption("Change quotation customer account");

dlg.addText('Please select an alternative customer account');

dlgCust     = dlg.addField(typeid(CustAccount),'Customer account');

dlgCust.fieldControl().mandatory(true);

if(!dlgCust)
{
    error('Please fill out all mandatory fields');
}

return dlg;
}

void Fld2_1_lookup()
{
    Dialog                  dlg = this.dialog();
    SysTableLookup          sysTableLookup;
    QueryBuildDataSource    queryBuildDataSource;
    QueryBuildRange         queryBuildRange;
    Query                   query;
    Str                     TmpStr;
    Formrun                 fr = this.dialogModify().parmDialog();
    Object                  Control = fr.controlCallingMethod();

    FormStringControl              _control = control;
    ;

    sysTableLookup = SysTableLookup::newParameters(tablenum(CustTable),_control);

    sysTableLookup.addLookupfield(fieldnum(CustTable, AccountNum),true);
    sysTableLookup.addLookupfield(fieldnum(CustTable, Name));
    sysTableLookup.addLookupfield(fieldnum(CustTable, NameAlias));

    query = new Query();

    queryBuildDataSource = query.addDataSource(tablenum(CustTable));

    tmpStr = 'ADAM001H';

    queryBuildRange = queryBuildDataSource.addRange(fieldnum(CustTable, InvoiceAccount));
    queryBuildRange.value(TmpStr);

    sysTableLookup.parmQuery(query);

    sysTableLookup.performFormLookup();
}

public void dialogPostRun(DialogRunbase dialog)
{

;

Super(dialog);
dialog.formRun().controlMethodOverload(true);
dialog.formRun().controlMethodOverloadObject(this);
} 
```

你能告诉我我哪里出错了 - 事实上，我并不真正理解 dialogPostRun 方法的这种覆盖或 ControlCallingMethod 的使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T01:09:32.407

尝试`DialogRunbase dlg;`从方法移动`dialog`到`ClassDeclaration`，删除`Dialog dlg = this.dialog();`和使用`Object control = dlg.formRun().controlCallingMethod();`方法`fld2_1_lookup`。它应该工作。

# c# - 窗口服务中的代码是如何执行的？

> ID：13273199
> 
> 赞同：4
> 
> 时间：2012-11-07T15:49:28.700
> 
> 标签：c#, service, window, execution

我被要求开发一个 C# windows 服务。但是我习惯于使用用户输入创建 GUI。

由于windows服务是自动化的，我想知道代码是如何执行的。

我的意思是如何控制流量？

有人可以澄清一下吗？我没有找到很多关于窗口服务的信息......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:54:21.110

Windows 服务从 OnStart 开始执行，通常从这里开始的重复执行可能是一个计时器。当服务停止时调用 OnStop 方法。这篇[**文章**](http://www.switchonthecode.com/tutorials/creating-a-simple-windows-service-in-csharp)可能是一个很好的起点。

```
protected override void OnStart(string[] args)
  {
    base.OnStart(args);

    //TODO: place your start code here
  }

  protected override void OnStop()
  {
    base.OnStop();

    //TODO: clean up any variables and stop any threads
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T15:54:23.970

代码开始于`OnStart()`

```
protected override void OnStart(string[] args)
{
    // Equivalent of Main()
    // Run threads here before timeout so OS knows it has started
} 
```

您通常从另一个函数启动一个线程，以便`OnStart()`可以返回并且可以启动服务。

与`OnStop`等相同`OnShutdown`，您将在其中清理所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-29T12:03:37.180

```
protected override void OnStart(string[] args)
    {
        try
        {
            timer.AutoReset = true;
            timer.Enabled = true;
            timer.Start();

            serviceThread = new Thread(new ThreadStart(Delete));
            clientCleanupThread = new Thread(new ThreadStart(removeExpirery));
            enableAutoSubscribeProduct = new Thread(new ThreadStart(Products));

            serviceThread.Start();
            clientCleanupThread.Start();

            enableAutoSubscribeProduct.Start();

        }
        catch (Exception ex)
        {

            Log.Error("Error on thread start " + ex.Message);
        }
    } 
```

# jquery - jQuery UI 选项卡“beforeLoad”事件未触发

> ID：13273203
> 
> 赞同：5
> 
> 时间：2012-11-07T15:49:39.747
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我正在使用 jQuery UI 选项卡，并且需要延迟加载选项卡。但我想在加载之前对 url 做一些细微的改变。

检查文档，看起来[beforeLoad](http://api.jqueryui.com/tabs/#event-beforeLoad)正是我想要的，但我无法触发它，如您在此示例中所见：

**HTML**

```
<div id="tabs">
    <ul>
        <li><a href="/echo/html">Foo</a></li>
        <li><a href="/echo/html">Bar</a></li>
    </ul>
</div>​ 
```

**JS**

```
$("#tabs").tabs({
    beforeLoad:function(e,ui){
      alert(1); // never happens       
    },
    show: function( e,ui ){
        $( ui.panel ).html('<p>Loading...</p>');
    }
});​ 
```

现场演示：http: [//jsfiddle.net/vtortola/5NAKN/](http://jsfiddle.net/vtortola/5NAKN/)

为什么不触发？

我正在使用 jquery-1.7.2.js 和 jquery-ui-1.8.11.js。

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T17:17:04.213

'beforeLoad' 事件属于 jquery ui 1.9

更新演示：http: [//jsfiddle.net/vtortola/5NAKN/28/](http://jsfiddle.net/vtortola/5NAKN/28/)

```
relevant, formatted code inline. umadbro? 
```

# c# - Need advice on program logic

> ID：13273205
> 
> 赞同：-3
> 
> 时间：2012-11-07T15:49:43.223
> 
> 标签：c#, .net

The program comes to the page and makes pressing buttons

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace Bot
{
    public partial class FormWindow : Form
    {
        Random rnd;
        Settings settingsForm;
        Timer tm;
        CallTimers callTimers;

        public FormWindow()
        {
            rnd = new Random();
            settingsForm = new Settings();
            tm = new Timer();
            tm.Tick += new EventHandler(tm_Tick);
            wb = new WebBrowser();
            InitializeComponent();
        }

        private void wb_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            if (wb.Document.GetElementById("login-email") != null)
            {
                wb.Document.GetElementById("login-email").InnerText = settingsForm.tEmail.Text;
                wb.Document.GetElementById("login-password").InnerText = settingsForm.tPassword.Text;
                Method_1("button luxury")[0].InvokeMember("click");
            }

               CallMethodAfterDelay(KrysomahHunting, 5000, tm);

                if (wb.Url.AbsoluteUri == "http://www.moswar.ru/metro/" && wb.ReadyState == WebBrowserReadyState.Complete)
                {
                    wb.Stop();
                    method_2("c", "Выследить Крысомаху")[0].InvokeMember("click");
                    Method_1(new string[] { "button" })[0].InvokeMember("click");
                }
        }

        //go to page 
        public void GoPage(string string_9, string string_10)
        {
            this.wb.Stop();
            string additionalHeaders = "Content-Type: application/x-www-form-urlencoded" + Environment.NewLine;
            this.wb.Navigate(string_9, "", Encoding.UTF8.GetBytes(string_10), additionalHeaders);
        }

        public List<HtmlElement> Method_1(params string[] ClassNames)
        {
            List<HtmlElement> list = new List<HtmlElement>();
            foreach (HtmlElement htmlElement in wb.Document.All)
            {
                for (int i = 0; i < ClassNames.Length; i++)
                {
                    string b = ClassNames[i];
                    if (htmlElement.GetAttribute("className") == b)
                    {
                        list.Add(htmlElement);
                        break;
                    }
                }
            }
            return list;
        }

        private void ButtonStart_Click(object sender, EventArgs e)
        {
            if (this.settingsForm.tEmail.Text == "" || this.settingsForm.tPassword.Text == "")
            {
                MessageBox.Show("Отсутствует логин и\\или пароль для входа на сервер МосВара.\nВвести их можно, нажав на кнопку \"Настройки\".", "Ошибка", MessageBoxButtons.OK, MessageBoxIcon.Hand);
                return;
            }
            wb.Navigate("http://www.moswar.ru");
        }

        private void tm_Tick(object sender, EventArgs e)
        {
            ((MethodInvoker)tm.Tag).Invoke();
            tm.Stop();
        }

        //go to page through time 
         public void CallMethodAfterDelay(MethodInvoker MethodToCall, int Delay,Timer tm)
       {
           tm.Interval = Delay;
           tm.Tag = MethodToCall;
           tm.Start();
       }
        public void KrysomahHunting()
        {
            GoPage("http://www.moswar.ru/metro/", "");
        }

        private List<HtmlElement> method_2(string string_9, string string_10)
        {
            List<HtmlElement> list = new List<HtmlElement>();
            foreach (HtmlElement htmlElement in this.wb.Document.All)
            {
                if (htmlElement.GetAttribute("className") == string_9 && htmlElement.InnerText != null && htmlElement.InnerText.IndexOf(string_10) != -1)
                {
                    list.Add(htmlElement);
                }
            }
            return list;
        }

    }
} 
```

Help how to articulate the logic

In this piece of code

```
private void wb_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            if (wb.Document.GetElementById("login-email") != null)
            {
                wb.Document.GetElementById("login-email").InnerText = settingsForm.tEmail.Text;
                wb.Document.GetElementById("login-password").InnerText = settingsForm.tPassword.Text;
                Method_1("button luxury")[0].InvokeMember("click");
            }

               CallMethodAfterDelay(KrysomahHunting, 5000, tm);

                if (wb.Url.AbsoluteUri == "http://www.moswar.ru/metro/" && wb.ReadyState == WebBrowserReadyState.Complete)
                {
                    wb.Stop();
                    method_2("c", "Выследить Крысомаху")[0].InvokeMember("click");
                    Method_1(new string[] { "button" })[0].InvokeMember("click");
                }

        } 
```

When the program comes to the method

```
method_2("c", "Выследить Крысомаху")[0].InvokeMember("click"); 
```

throws Exception ArgumentOutRangeException

I supposethat this couldbe caused by

```
private void wb_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e) 
```

Heconstantly checks.Ifapagethatexecute methods .And because the method once already done its job, there is no longer the values

And so we get an exception ArgumentOutRangeException. Help how to make the logic for this case!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:53:58.333

What if you add a check in on that method call?

```
var method2 = method_2("c", "...");
if (method2.Count > 0)
    method2[0].InvokeMember("click"); 
```

# android - ADB 错误 = 13，ADB 拒绝权限，存在 = true - Android SDK 设置

> ID：13273206
> 
> 赞同：0
> 
> 时间：2012-11-07T15:49:45.410
> 
> 标签：android, eclipse, adb, permission-denied

这是一个反复出现的问题，似乎有几个原因。即使在谷歌搜索之后，我也无法找到我的。不过，已经有几个人回答了这个问题。

问题是，当我尝试使用 Eclipse 和 ADB 运行 android 项目时，我得到：

```
Failed to get the adb version: Cannot run program "/extraHD/android/android-sdk-linux/platform-tools/adb":
error=13, Permission denied from '/extraHD/android/android-sdk-linux/platform-tools/adb'
- exists=true 
```

一些数据：1）/extraHD 是我的第二个 HD，180GB 免费，我有完全权限 2）adb 可执行文件有完全权限 777 3）如果，在 'cd /extraHD/android/android-sdk-linux/platform-tools' 之后，我运行其中任何一个（没有运行 adb 进程）：

```
./adb 
./adb shell
./adb start-server
./adb kill-server
./adb shell kill you
./adb root
./adb remount 
```

我得到了同样的答案：

```
bash: ./adb: Permission denied 
```

以root身份执行时的答案相同！即使作为普通用户，我也可以在该目录中创建/删除文件...

通过 Eclipse 和 zip 文件重新安装 ADB 后出现同样的问题。

重启也没有用。

/extraHD/android/android-sdk-linux//tools/emulator 我遇到了同样的问题。

尝试了 fsck，重新安装了 Eclipse，重新安装了工具和平台工具（特别是 adb），重新安装了 API。一样。

线索？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:55:54.010

我有一个类似的问题，我通过执行以下操作解决了它（在启动时挂载 sdk 分区并更改 fstab 中的权限以允许在 Windows NTFS 分区中写入）：

1.  打开终端，可以使用**Ctrl+Alt+t**

2.  使用“blkid”列出块设备并打印通用唯一标识符 (UUID)

    ```
    sudo blkid 
    ```

3.  找到带有 SDK 分区标签的行并复制 UUID 值：

    /dev/sXX: LABEL="secondHD" UUID=" **copy_this** " TYPE="ntfs"

4.  在 fstab 文件的末尾添加一个新行，以便在引导期间挂载分区：

    ```
    sudo gedit /etc/fstab 
    ```

5.  请记住自定义“您的..”值，重要的顺序，每行上的字段由制表符或空格分隔；键入 man fstab 以获取更多信息）。保存并退出。

    UUID="yourValueCopied" "yourPartitionPath&Name" ntfs users,uid="YourGroup",gid="YourUserGroup",umask=0022,exec,permissions,auto 0 2

6.  重新启动计算机并尝试另一个时间 adb :)

似乎这是一个 ntfs 分区问题：

[https://askubuntu.com/questions/207180/changeing-permissions-in-fstab-in-order-to-allow-writing-in-windows-ntfs-partitio](https://askubuntu.com/questions/207180/changing-permissions-in-fstab-in-order-to-allow-writing-in-windows-ntfs-partitio)

fstab-permission-masks 的一个很好的解释：

[http://www.omaroid.com/fstab-permission-masks-explained/](http://www.omaroid.com/fstab-permission-masks-explained/)

# c# - 以编程方式将“开始按钮”添加到 Windows 8

> ID：13273214
> 
> 赞同：-2
> 
> 时间：2012-11-07T15:50:02.750
> 
> 标签：c#, windows, button

有其他人问过这个问题，但建议的通用注册表设置不再起作用。我想做的是类似于 StartIsBack 的东西，它“重新调用”代码以将开始按钮/菜单带回 Windows 8，或者我可以复制类似于其他 Windows 8 开始按钮替代方案所做的工作。

有谁知道如何以编程方式（C++ 或 C#）重新调用开始按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T00:36:02.880

在 Win8/2102 中，微软通过 Windows 代码主动删除了所有与开始按钮相关的代码。我怀疑你会找到任何可以使用的 API。

# jquery - blueimp github 文件上传器 IE maxFileSize 问题

> ID：13273222
> 
> 赞同：1
> 
> 时间：2012-11-07T15:50:11.570
> 
> 标签：jquery, file-upload, blueimp

在 IE 中，不支持 maxFileSize 设置。但是，在演示[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)中，在上传大文件时单击“开始”按钮会显示错误“文件太大”。请问我能知道它是如何完成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:18:15.530

我遇到了同样的问题。我已经在 js/ 目录的 main.js 文件中设置了最大大小，但是在 IE 上它不起作用。

为了让它在 Internet Explorer 上运行，我还必须在插件的 server/php/ 目录中的 UploadHandler.php 中设置最大大小。

原来它说 'max_file_size' => null, ，我改成 'max_file_size' => 1000000,

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:40:56.737

在服务器端，您可以看到文件大小（如果您使用 PHP，它位于 `$_FILES["files"]["size"]`）并发送错误消息。

# javascript - 按钮点击只工作一次

> ID：13273224
> 
> 赞同：3
> 
> 时间：2012-11-07T15:50:16.467
> 
> 标签：javascript, html

我不知道为什么 OnClick 事件不会在我的代码中再次发生；在这里看到jsfiddle：http: [//jsfiddle.net/btcAx/2/](http://jsfiddle.net/btcAx/2/)

html:

```
<input id="LoginID" readonly="readonly" type="password" value="UserName"/>
<br/>
<input id="LoginPW" readonly="readonly" type="password" value="Password"/>
<br/>
<input onclick="change()" type="button" value=" Show/Hide Text " id="ChangeButton"/> 
```

JS：

```
function change() {
  var inp1 = document.querySelector('#LoginID');
  var inp2 = document.querySelector('#LoginPW');

  if (inp1.type = "password") {
      inp1.type = "text";
      inp2.type = "text";
  }
  else {
      inp1.type = "password";
      inp2.type = "password";
  }
} 
```

它将从密码更改为文本类型，但随后不会变回...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T15:53:29.583

尝试

```
if (inp1.type == "password") { 
```

代替

```
if (inp1.type = "password") { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:56:47.257

```
if (inp1.type = "password") { 
```

应该

```
if (inp1.type == "password") { 
```

# nhibernate - POCO 的虚拟方法中的 NHibernate 奇怪行为（非常简单的案例）

> ID：13273226
> 
> 赞同：1
> 
> 时间：2012-11-07T15:50:19.620
> 
> 标签：nhibernate, orm

我正在用 2 个类编写一个非常简单的案例：Parent 和 Child。父母有 n 个孩子，孩子有 1 个父母。我在它们之间建立了双向关系。

我试图向我的父母添加一个业务规则，该规则检查孩子的父母和处理呼叫的实例之间的相等性。当它应该返回真时它返回假。所以我简化了一切以找到问题的根源。所以我在 POCO 之外测试了相同的相等性，它返回了 true：

```
Parent parent0 = session.Load<Parent>(0);
Child child = session.Load<Child>(0);

bool externalTest = parent0 == child.Parent; 
```

然后我为我的父母编写了一个方法来测试完全相同的东西：

```
bool internalTest = parent0.IsRelated(child);

... Parent Class code

public virtual bool IsRelated(Child child)
{
    return child.Parent == this;            
}
... 
```

它返回假......我只是不明白。这是完全相同的代码。

**更多信息：**

所以为了获得更多信息，我修改了我的测试：

```
Parent parent0 = session.Load<Parent>(0);
Child child = session.Load<Child>(0);

bool externalTest = parent0 == child.Parent;
System.Diagnostics.Debug.WriteLine("outside parent: " + externalTest);
System.Diagnostics.Debug.WriteLine("Number of parent instances before call to IsRelated:" + Parent.NumberOfInstances);
parent0.IsRelated(child, parent0);
System.Diagnostics.Debug.WriteLine("Number of parent instances after call to IsRelated:" + Parent.NumberOfInstances);

... Parent Class code
public virtual void IsRelated(Child child, Parent sameAsThis)
{
    bool internalTest = child.Parent == this;
    System.Diagnostics.Debug.WriteLine("inside parent:" + internalTest);

    bool sameTest = sameAsThis == this;
    System.Diagnostics.Debug.WriteLine("this should equal sameAsThis:" + sameTest);

}
... 
```

我将父实例直接传递给自身并验证它是同一个实例。好吧，不是，当我输入 IsRelatedMethod 时，我创建了另一个实例。

这是我的测试结果：

外部父母：真

调用 IsRelated:1 之前的父实例数

内部父母：假

这应该等于 sameAsThis:False

调用 IsRelated 后的父实例数：2

我究竟做错了什么 ？

有关详细的映射文件和 pocos，请参阅（http://stackoverflow.com/questions/13253459/relationships-fixup-in-entityframework-vs-nhibernate）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:47:50.307

这是因为 Nhibernate 使用代理来延迟加载实体。在您的情况下，孩子的父母是代理实例。

> 要解决您的问题，只需更改`.Load`为`.Get`

`.load`实际上并没有命中数据库并填充实体。有关更多信息，请参阅 Ayende 的这篇[博文](http://ayende.com/blog/3988/nhibernate-the-difference-between-get-load-and-querying-by-id)

# sql-server - Semantic Web - 将应用程序数据直接存储在 RDF 中或存储在 SQL 中并稍后导出/导入

> ID：13273227
> 
> 赞同：4
> 
> 时间：2012-11-07T15:50:21.040
> 
> 标签：sql-server, windows, oracle, iis, rdf

我有一个标准的 IIS Web 应用程序，它将其数据存储在标准 SQL Server 或 Oracle DB 中。我现在有兴趣以[RDF](http://www.rdfabout.com/quickintro.xpd)格式存储数据，以实现完整的**Semantic Web**。

是否建议直接以 RDF 格式存储数据？CRUDQ 操作将对数据进行。性能明智这是一个好举措吗？

**如果不是**（就像我假设的那样），我想我会维护标准 SQL 数据库并将数据导出/导入 RDF 吗？我怎样才能做到这一点？那里有好的转换器吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T18:50:42.560

如果您真的想坚持使用我不推荐的关系数据库，您可以使用[D2RQ](http://d2rq.org/)之类的东西，或者您可以寻找支持[R2RML](http://www.w3.org/TR/r2rml/)的东西。或者你可以试试[SDB](http://jena.apache.org/documentation/sdb/index.html)。

但是，如果您想使用语义技术，最好使用实际的 RDF 数据库。您将获得更好的性能，您将拥有更好的开发体验。有很多选择，[Mulgara](http://mulgara.org)、[Jena](http://jena.apache.org)、[Sesame](http://openrdf.org)、[Stardog](http://stardog.com)、[OWLIM](http://www.ontotext.com/owlim)、[AllegroGraph](http://www.franz.com/agraph/allegrograph/)、[BigData](http://www.systap.com/bigdata.htm)、[Virtuoso](http://virtuoso.openlinksw.com/rdf-quad-store/)和 Oracle 提供一些 RDF 支持，如果您有 Oracle 许可证，但根据我的经验，它不如专用 RDF 性能好数据库。

很多 SemWeb 工具链都是用 Java 编写的，但是由于您提到了 IIS，也许您在 MS 世界中，在这种情况下，[dotNetRDF](http://www.dotnetrdf.org/)是一个不错的选择。

但总的来说，如果您打算使用该技术，请使用专用的 RDF/SemWeb 工具。不要试图将 RDF 硬塞进非语义的东西中，也不要自己编写。无需重新发明轮子，有很多优秀的 SemWeb 软件可以让您的项目顺利进行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T17:14:04.640

我认为关键是您将在（？）数据上使用/实现什么接口。

有几种方法可以走，我自己会使用 SWI-Prolog 对 RDF 存储进行建模，可能使用[SPARQL ，同时通过](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%279%27,swi%28%27/doc/packages/semweb.html%27%29%29)[ODBC](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%272%27,swi%28%27/doc/packages/odbc.html%27%29%29)访问原始数据。

然后我有机会避免静态映射（我认为转换可能是一种风险），至少在数据中出现一些“稳定”语义之前。

SWI-Prolog 也有一些作为报告工具和生成 Web 演示的点。

在 Prolog[中编写 W3C 规则以将](http://www.w3.org/TR/2011/WD-rdb-direct-mapping-20110324/)“自动”关系映射到三元组似乎是一项有趣的任务，我会尝试...

# tridion - Tridion 2011：如何对发布队列中的用户列表进行排序？

> ID：13273228
> 
> 赞同：2
> 
> 时间：2012-11-07T15:50:20.897
> 
> 标签：tridion, tridion-2011

在 Tridion 2011 SP1 HR1 发布队列上，我看到用户列表未排序。

> **有没有办法对用户列表进行排序，或者我应该为热修复提出一张票？**

## 更新：

要更清楚。

在 Filter Publishing Task options --> User Dropdown 上，当前排序是基于`User Title`默认完成的。

作为用户，它没有显示为已排序。

所以，我正在寻找基于`User Description`.

请建议我如何实现这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T16:27:36.613

在 2011 SP1 中，过滤发布任务选项中的用户下拉列表按用户名（用户标题）的字母顺序排序。如果您选择“全部”，则在“发布任务”列表中，您可以通过单击列标题按用户名对任务进行排序。还有一个小漏斗图标，您可以在其中进一步过滤。

我很确定这是设计使然，因此很可能不会为此提供修补程序。您可以通过 sdltridionworld 上的 Ideas 站点提交一个想法，以便在下一个版本中实现此功能，或者构建一个自定义 gui 扩展来专门执行您需要的操作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-12T09:52:29.490

在发布队列弹出窗口的用户下拉列表中对用户进行排序可以通过创建新的自定义扩展来实现。您将新的 js 文件添加到发布队列弹出组，您可以在其中覆盖`Tridion.Cme.Views.PublishQueue.USER_DROPDOWN_HEAD_PATH`属性。它应该指向 Dropdown xml 定义文件。您需要创建自己的 Dropdown xml 定义文件（通过复制现有的）并添加带有 value的`WebUI/Editors/CME/Xml/ListDefinitions/PublishQueueUserDropdown-head.xml`新节点。`/list:listDefinition/list:rows/list:defaultSortField``@Description`

# android - Android ListView 布局充气器

> ID：13273229
> 
> 赞同：2
> 
> 时间：2012-11-07T15:50:22.020
> 
> 标签：android, listview, android-arrayadapter, layout-inflater

我们目前正在大学里处理列表视图。我的讲师给了我们一个简单的应用程序，它在列表中显示邮件消息，当用户选择一个时，它会在新活动中显示消息的内容。我几乎了解正在发生的所有事情，但是我想清除一些灰色区域！

基本上我想知道这部分代码是做什么的？

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {

    View v = convertView;
    if (v == null) {
        LayoutInflater vi = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.inbox_row, null);
    } 
```

此方法位于扩展 ArrayAdapter 的类中。我认为这是某种形式的回收是对的吗？当视图在屏幕上和屏幕外出现时？......

任何帮助深表感谢。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T15:56:05.943

这正是你所说的，一种回收的形式。

膨胀布局需要大量内存和大量时间，因此为了提高效率，系统会将刚刚离开屏幕的内容传递给您，您可以简单地更新其文本和图像并将它们返回给 UI。

因此，例如，如果您的列表视图在其列表中显示 6 个项目（由于它的高度），它只会膨胀 6 个项目，并且在滚动期间它只会不断回收它们。

您应该使用一些额外的优化技巧，我相信评论者发布的视频链接会解释它们。

**编辑**

该示例是 Store 项目的 ArrayAdapter，但您可以根据需要进行设置。适配器在 UI 和数据之间进行匹配和分离层。

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    if (convertView == null)
    convertView = newView();

    // Store is the type of this ArrayAdapter
    Store store = getItem(position);
    Holder h = (Holder) convertView.getTag();

    // And here I get the data and address them to the UI
    // as you can see, if the convertView is not null,
    // I'm not creating a new one, I'm just changing text, images, etc
    h.storeName.setText(store.getStoreName());
    h.address.setText(store.getAddressLine1());
    h.postcode.setText(store.getPostCode());
    h.distance.setText(store.getDistance());

    return convertView;
}

// I like to separate in a different method when the convertView is null
// but that's me being organisation obsessive
// but it also makes easy to see which methods are only being called the 1st time
private View newView() {
    LayoutInflater inf = LayoutInflater.from(getContext());
    View v = inf.inflate(R.layout.map_result_list, null);
    Holder h = new Holder();
    // here we store that holder inside the view itself
    v.setTag(h);

    // and only call those findById on this first start
    h.storeName = (TextView) v.findViewById(R.id.txtLine1);
    h.address = (TextView) v.findViewById(R.id.txtLine2);
    h.postcode = (TextView) v.findViewById(R.id.txtLine3);
    h.distance = (TextView) v.findViewById(R.id.txtDistance);

    return v;
}

// this class is here just to hold reference to the UI elements
// findViewById is a lengthy operation so this is one of the optimisations
private class Holder {
    TextView storeName;
    TextView address;
    TextView postcode;
    TextView distance;
} 
```

# objective-c - 更改日期格式

> ID：13273232
> 
> 赞同：1
> 
> 时间：2012-11-07T15:50:41.600
> 
> 标签：objective-c, ios, date-format

我有一个`NSString *string = @"2012-10-24 23:00:00 +0000";`

我想将其转换为正常格式`24 october 2012`

我使用以下代码。但它一直在崩溃。谁能帮我？

```
NSDateFormatter *dateformat = [[NSDateFormatter alloc] init];
[dateformat setDateFormat:@"yyyy MM dd HH:mm:SS zzz"];
NSDate *dateNS = [dateformat dateFromString:date];
[dateformat setDateFormat:@"dd MM yyyy"];
date = [dateformat stringFromDate:dateNS];
[dateformat release] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:58:26.490

它不断崩溃，因为它无法`NSDate`从输入日期创建，因为日期格式不正确。它缺少`-`日期和秒之间的`ss`时间`SS`。

您还需要一个日期格式`MMMM`来获取月份的全名：

```
NSString *string = @"2012-10-24 23:00:00 +0000";
NSDateFormatter *dateformat = [[NSDateFormatter alloc] init];
[dateformat setDateFormat:@"yyyy-MM-dd HH:mm:ss zzz"];
NSDate *dateNS = [dateformat dateFromString:string];
[dateformat setDateFormat:@"dd MMMM yyyy"];
NSString *date = [dateformat stringFromDate:dateNS];
[dateformat release]; 
```

# javascript - 如何使用 Meteor.js、Twitter 和 Oauth 发布推文

> ID：13273235
> 
> 赞同：5
> 
> 时间：2012-11-07T15:50:52.287
> 
> 标签：javascript, twitter, oauth, twitter-oauth, meteor

我对 Meteor 和 Twitter 有一点问题。我想做的就是通过单击按钮发布推文。为此，我必须通过 Oauth 对 Twitter 服务进行身份验证。

目前，我正在以一种非常复杂的方式进行身份验证，从客户端到服务器再返回。但现在我找到了 Meteor.loginWithTwitter 函数。本来我以为这个功能只是为了让你用 Twitterkeys 登录你自己的应用程序，现在我不太确定了。可能我也可以用它来解决我的问题。因为似乎 Oauth-Process 完全（并且以简单的方式）在 Meteor 中实现。

遗憾的是，我找不到任何仅用于登录并获得最终 oauth_token 的文档或示例。所以我从 Meteor 得到的只是我尝试下面的代码，是这个错误消息：

错误消息：Accounts.ConfigError {消息：“服务未配置”}

```
Meteor.loginWithTwitter( function(err){
  if (err){
    console.log(err)
  }else{
    console.log("yeah");
 }
}); 
```

我知道我必须在某个地方输入我的应用信息，例如消费者密钥，但我不知道在哪里。有人可以帮助我并为我知道一些例子吗？或者知道我是否在正确的轨道上？

谢谢和问候菲利普

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T21:59:40.197

最简单的方法是：添加 accounts-ui 包：

```
meteor add accounts-ui accounts-twitter 
```

在你的模板中做

```
{{loginButtons}} 
```

首次启动应用程序时，单击登录按钮将引导您完成设置过程。您将创建一个 Twitter 应用程序并将消费者密钥和消费者秘密复制到流星呈现给您的表单中。之后，您可以使用 Twitter 登录。

确保使用最新的 Meteor 版本（此时为 0.5.2）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-06T10:51:53.830

您还可以使用代码配置您的消费者密钥和秘密，这是微博的一个示例，但它适用于 twitter、google 等......（服务器端）：

```
// first, remove configuration entry in case service is already configured
Accounts.loginServiceConfiguration.remove({
    service: "weibo"
});
Accounts.loginServiceConfiguration.insert({
    service: "weibo",
    clientId: "1292962797",
    secret: "75a730b58f5691de5522789070c319bc"
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-21T05:26:52.040

您需要**在服务器端**添加@Tom31 建议的内容，即我有一个 /server/server.js

```
Accounts.loginServiceConfiguration.remove({"service": "twitter"});
Accounts.loginServiceConfiguration.insert({
 "service": "twitter",
 "consumerKey" : "<yours>",
 "secret" : "<yours>"
}); 
```

最后，您的访问令牌存储在数据库中的用户中，但此信息不会传播到客户端，如果您想访问它，您可以新建一个服务器端方法并通过[Meteor.call](http://docs.meteor.com/#meteor_call)或[Meteor.apply](http://docs.meteor.com/#meteor_apply)

**更新：我的服务器端方法示例**

我已经创建了这样的服务器端方法：

```
Meteor.methods({
...
  userGet: function(id) {
   return removeSensibleFields( Meteor.users.findOne({ _id: id }) );
  }
...
}); 
```

其中**removeSensibleFields**是一种删除所有可能不会发送回客户端的不必要/私人信息的方法

# erp - 史诗 baq 搜索不起作用

> ID：13273248
> 
> 赞同：0
> 
> 时间：2012-11-07T15:51:21.427
> 
> 标签：erp, epicorerp

我在 epicor 905700c 中创建了一个 BAQ。在 BAQ Search 选项卡下，我选择了 Part.PartNum 作为“Like”列。但是，当我尝试使用此 BAQ 进行零件搜索时，它无法正常工作。

例如，如果我打开零件维护，然后单击零件按钮以搜索可用零件，则会弹出搜索表单。我选择刚刚创建的 BAQ 搜索。搜索实际上会返回结果，但是当我尝试选择一个时，它不会填充部分字段。

这发生在我通过partnum连接的每个BAQ上。所有其他 BAQ 搜索都有效。

我假设 Epicor 中的某个设置在我们进行安装时没有正确打开。任何人都可以解释为什么会发生这种情况以及如何解决它？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:41:19.467

我尝试在相同版本 Epicor 9.05700 的几个客户端数据库中为零件表创建 BAQ。它对其中任何一个都不起作用。在与 Epicor 通话后，他们知道这是一个错误。不确定补丁是否已经准备好，但如果你正在维护，你可以打电话看看是否得到它。

# java - Google Checkout/Wallet 可以设置两个通知回调吗？

> ID：13273249
> 
> 赞同：1
> 
> 时间：2012-11-07T15:51:20.710
> 
> 标签：java, tomcat, google-checkout, android-pay

在我的网站上，我使用的是 Java Tomcat，并且我有一个应用程序战争，其中包含我的产品网页和购买与 Google 钱包集成的产品的代码。

我现在添加了一个新产品，其相关网页部署在另一个 war 文件中。所以我每个产品都有一个战争文件，但是现在当尝试添加购买产品 2 的代码时，我意识到我需要设置谷歌通知回调以在我的谷歌偏好中指向这场战争，但我不能，因为它已经指向战争1.

那么有没有办法设置**两个**谷歌通知回调，或者我是否需要重新组织我的代码，以便我将两个战争文件合并为一个，或者可能更好地创建包含两个产品使用的所有购买代码的第三个战争。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T21:23:31.033

您不能 - 正如您已经知道的，回调 api url 已在您的帐户中设置，并且您只提供了一个。

除了（或不）创建另一个（又名“第三个”）之外，也许通过使用[`merchant-private-data`](https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Tag_Reference#tag_merchant-private-data)和/或标记您的订单[`merchant-private-item-data`](https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Tag_Reference#tag_merchant-private-item-data)可能是可行的。

这样，您可以在接收时适当地“细分”订单（或物品）`new-order-notification`。

嗯……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T22:28:14.753

每个产品都有一个网站吗？您还可以创建多个 Checkout 帐户，每个产品一个。

# java - p:tabview 动态 true 中的选项卡内的表单，无法通过 id 从 tabview 外部的表单访问缓存 false

> ID：13273250
> 
> 赞同：1
> 
> 时间：2012-11-07T15:51:20.663
> 
> 标签：java, jsf, primefaces

在 a`dynamic="true"`中，`cache"false"` `p:tabview`我使用表单动态生成了内容。似乎此选项卡视图之外的元素（以另一种形式）无法访问表单 ID。尝试使用带有所有前缀的萤火虫 ID 来查找。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:34:49.310

您必须在表单的 ID 之前添加选项卡视图的 ID（不是选项卡 ID），如下所示

```
:tabViewId:formId 
```

但首先为 tabview 分配一个 ID，所以它不是自动生成的。

```
<p:tabView id="tab" dynamic="true" cache="false">
    <p:tab>
       <h:form id="myForm">
           ...
       </h:form>
    </p:tab>
</p:tabView> 
```

在本例中，表单的 ID 是`:tab:myForm`

# c# - 反序列化对 Saml2SecurityToken 的 SAML2 响应时出错

> ID：13273256
> 
> 赞同：2
> 
> 时间：2012-11-07T15:51:34.780
> 
> 标签：c#, .net, c#-4.0, single-sign-on, saml-2.0

我有一个 SAML 响应，我想将其转换为 Saml2SecurityToken。这就是我所做的：

```
// SAMLResponseString is a base64 encode SAML2 XML string
string SAMLResponse = SamlHelper.DecodeFrom64(SAMLResponseString);
XmlReader reader = new XmlTextReader(new StringReader(SAMLResponse));

var certificate = new X509Certificate2("[path]", "[password]");
List<SecurityToken> tokens = new List<SecurityToken>();
tokens.Add(new X509SecurityToken(certificate));

SecurityTokenResolver outOfBandTokenResolver =
  SecurityTokenResolver.CreateDefaultSecurityTokenResolver(new 
  ReadOnlyCollection<SecurityToken>(tokens), true);
var securityToken = (Saml2SecurityToken) WSSecurityTokenSerializer.DefaultInstance.ReadToken(reader, null); 
```

在（WSSecurityTokenSerializer）的最后一行，我收到以下错误：

```
Cannot read the token from the 'Response' element with the 'urn:oasis:names:tc:SAML:2.0:protocol' namespace for BinarySecretSecurityToken, with a '' ValueType. If this element is expected to be valid, ensure that security is configured to consume tokens with the name, namespace and value type specified. 
```

我的回复开始于：（< 和 samlp:Response 之间没有空格）：

```
< samlp:Response xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion" Version="2.0"> 
```

有谁知道这里出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T19:56:02.170

虽然 .NET 支持 SAML2 断言（来自 .NET 4.5），但它不支持`samlp:Response`属于的 SAML2 协议。您需要滚动自己的代码以从响应消息中获取断言并将其传递给框架方法，或者使用第三方库。

我编写了一个[开源库](https://github.com/KentorIT/authservices)，用于处理 ASP.NET 应用程序中的传入 SAML2 响应，您可以在其中找到用于读取和验证响应消息并将其转换为 .NET 标识的代码。

# jquery - 如何在jquery中更改下拉菜单的数据源

> ID：13273258
> 
> 赞同：0
> 
> 时间：2012-11-07T15:51:34.797
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, razor, client-side

我希望通过 jquery（在 MVC3 中使用剃刀）更改为列出下拉列表中可用的项目。

我有一个从视图数据填充的 DDL；

```
@Html.DropDownList("allusers", null, null, new { @class = "chosenlist" }) 
```

还有另一组称为“allNewUsers”的视图数据。我有一个单击的按钮，它运行一些客户端 jquery：

```
 $(function() {
    $('#remove').click(function () {
        var id = $("#allusers").val();
        var hdr = $("#Holdersid").val();
        $.ajax({
            url: "RemoveApprover/" + id + "/" + hdr + "/3",
            data: id,
            success: function (data) {
                $('#remove').hide();
               $..change view data here
            },
            error: function (xhr, ajaxOptions, thrownError) {  
                alert(xhr.responseText);
            }
        })
    })
    }); 
```

此代码在服务器上运行一个公共字符串，成功时隐藏删除按钮。然后我需要做的是将 DDL 的数据源从 allusers 更改为 allNewusers。我可以在我的客户端代码中轻松做到这一点吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:03:03.137

将 allNewUsers 视图数据保存在`hidden`控件中。在按钮上单击清除列表`dropdown`并通过隐藏控件视图数据循环并`dropdown`通过 附加到列表`jQuery`。

# mysql - 根据多个条件查找相关文章

> ID：13273264
> 
> 赞同：1
> 
> 时间：2012-11-07T15:51:49.327
> 
> 标签：mysql, sql

[这个问题与这个](https://stackoverflow.com/questions/4717093/mysql-find-related-articles)问题相似，但有所不同：我有八种不同类型的标签。

像这样的东西：

```
videos      [id, title]
tags1       [id, tag]
tags2       [id, tag]
tags3       [id, tag]
tags4       [id, tag]
tags5       [id, tag]
tags6       [id, tag]
tags7       [id, tag]
tags8       [id, tag]
video_tags1 [vid_id, tag_id]
video_tags2 [vid_id, tag_id]
video_tags3 [vid_id, tag_id]
video_tags4 [vid_id, tag_id]
video_tags5 [vid_id, tag_id]
video_tags6 [vid_id, tag_id]
video_tags7 [vid_id, tag_id]
video_tags8 [vid_id, tag_id] 
```

给定一个 video.id，我想根据哪些视频具有最多的共同标签来挑选相关视频。我发现很难找到一种方法来做到这一点，更不用说一种不会让服务器崩溃的方法了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:39:28.363

如果您可以更改数据库模型，那么这些建议可能适合您。

以这种方式重新定义您的表格：

```
videos      [id, title]
tags    [id, tag_type,tag]
videos_tags [vid_id, tag_id] 
```

您还可以添加一个 tag_type 表（它将有 8 行，每个标签类型一个）以获得更高的一致性。

然后这个查询（它可能有一些语法错误，但我的意图是你明白了）会给你视频ID和匹配标签的数量与提供的标签：

```
select 
       videos.id, count(videos.id) as nEqualTags 
from 
       videos videos inner join  video_tags vtags on  (vtags.vid_id=videos.id )
where 
       vtags.tag_id in (select tag_id from videos_tags where vt.id = ?) 
group by 
       videos.id 
order by 
       nEqualTags desc 
```

`nEqualTags`如果低于某个值，您可以添加更多逻辑以减少结果。

（并且还考虑添加一些索引以获得更好的性能）。

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:49:50.487

我认为处理规范化表总是一个好主意，在这种情况下，这个 UNION 查询可能会有所帮助：

```
(select 1 as tab, vid_id, tag_id from video_tags1
 union select 2 as tab, vid_id, tag_id from video_tags2
 union select 3 as tab, vid_id, tag_id from video_tags3
 ...) 
```

现在你必须使用这样的查询：

```
SELECT
  tags_1.vid_id, count(*) as common_tags
FROM
  (big union above) video_tags
  INNER JOIN
  (big union above) video_tags_1
  ON video_tags.tab = video_tags_1.tab
  AND video_tags.tags_id = video_tags_1.tags_id
  AND video_tags.vid_id = 1
  AND video_tags_1.vid_id <> 1
GROUP BY video_tags_1.vid_id
ORDER BY common_tags DESC 
```

这将返回所有按它们共有的标签数量排序的 DESC 记录。这可能是如何进行的想法。您应该再添加一个 JOIN 以获得视频的标题。如果您还需要获取它们共同的标签的描述......这是可能的，但我认为这会使查询复杂化很多！

你确定你不能改变你的数据库模型，只使用一个表作为标签，一个表作为视频标签吗？它会让事情变得容易得多！

# r - 在 R 中将 2 个数据集组合在一个图中

> ID：13273271
> 
> 赞同：3
> 
> 时间：2012-11-07T15:52:11.060
> 
> 标签：r, plot

我有两列数据，`f.delta`我`g.delta`想在 R 中生成散点图。

这是我的做法。

```
plot(f.delta~x, pch=20, col="blue")
points(g.delta~x, pch=20, col="red") 
```

问题是： 的值`f.delta`从 0 到 -7 不等；的值`g.delta`从 0 到 10 不等。

绘制绘图时，y 轴从 1 延伸到 -7。因此，虽然所有`f.delta`点都是可见的，但任何`g.delta`y>1 的点都将从视图中截断。

如何阻止 R 从数据值中自动设置 ylims。尝试过各种 , , . 的组合，但`yaxt`均未`yaxp`成功`ylims`。

任何建议将不胜感激。

谢谢，安詹

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T16:04:39.737

除了 Gavin 的出色回答之外，我还想提一下，在这些情况下，另一个常见的习惯用法是创建一个具有正确限制的空图，然后使用 , 等填充`points`它`lines`。

使用 Gavin 的示例数据：

```
with(df,plot(range(x),range(f.delta,g.delta),type = "n"))
points(f.delta~x, data = df, pch=20, col="blue")
points(g.delta~x, data = df, pch=20, col="red") 
```

根据我们提供的 x 和 y 值的范围，仅创建空绘图窗口的`type = "n"`原因。`plot`然后我们使用`points`这个现有图上的两列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T15:57:55.587

您需要告诉 R 数据的限制是什么，并将其作为参数传递`ylim`给`plot()`（注意参数`ylim`不是`ylims`！）。这是一个例子：

```
set.seed(1)
df <- data.frame(f.delta = runif(10, min = -7, max = 0),
                 g.delta = runif(10, min = 0, max = 10),
                 x = rnorm(10))

ylim <- with(df, range(f.delta, g.delta)) ## compute y axis limits

plot(f.delta ~ x, data = df, pch = 20, col = "blue", ylim = ylim)
points(g.delta ~ x, data = df, pch = 20, col = "red") 
```

哪个生产

![在此处输入图像描述](../Images/a2894d255b255472b4ed1afc18a7862a.png)

# ios6 - iOS 6 AutoLayout 缩放和翻译动画

> ID：13273273
> 
> 赞同：8
> 
> 时间：2012-11-07T15:52:22.993
> 
> 标签：ios6, core-animation, autolayout

我的目标是根据选择使 3 个图像沿水平轴缩小、增长和移动。使用自动布局似乎会使图像在试图满足顶部空间到超级视图/底部空间到超级视图约束时跳跃。

因此，为了解决这个问题，我将所有图像都放在了它们自己的 UIView 中。UIView 设置为图像可以增长到的最大尺寸，它以水平轴为中心。所以现在所有图像必须做的就是在它们对应的 UIView 中保持居中。这解决了我的问题，因为 UIViews 执行水平平移，而图像在内部缩小/增长，同时保持居中。我的问题是 - 这是正确的方法吗？它看起来很长，好像我可能滥用了自动布局的能力。我必须使用更多图像执行类似的任务，因此欢迎提出任何建议！谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-01T16:29:37.727

我刚刚在这里写了一篇关于这个主题的小文章：

[使用自动布局时，如何调整 CALayer 的锚点？](https://stackoverflow.com/questions/12943107/how-do-i-adjust-the-anchor-point-of-a-calayer-when-auto-layout-is-being-used/14105757#14105757)

基本上自动布局在任何类型的视图变换中都不能很好地发挥作用。最简单的解决方案是让您的视图完全脱离自动布局的控制，但或者您可以只给它提供不会反击您打算应用的特定类型转换的约束。第二种解决方案听起来就像您正在做的事情。

# c# - 防止同时读取和写入文件

> ID：13273277
> 
> 赞同：1
> 
> 时间：2012-11-07T15:52:49.897
> 
> 标签：c#, multithreading, locking

我有一个需要读取和写入文件的进程。该应用程序对其读写有特定的顺序，我想保留这个顺序。我想要做的是实现一些东西，让第一个操作开始并让第二个操作等到​​第一个操作完成，先到先服务，比如队列来访问文件。从我读过的文件锁定看来，这可能是我正在寻找的东西，但我找不到一个很好的例子。谁能提供一份？

目前我正在使用带有 .Synchronized 的 TextReader/Writer，但这并没有达到我希望的效果。

抱歉，如果这是一个非常基本的问题，线程让我头疼：S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:02:36.507

它应该像这样简单：

```
public static readonly object LockObj = new object();

public void AnOperation()
{
    lock (LockObj)
    {
        using (var fs = File.Open("yourfile.bin"))
        {
            // do something with file
        }
    }
}

public void SomeOperation()
{
    lock (LockObj)
    {
        using (var fs = File.Open("yourfile.bin"))
        {
            // do something else with file
        }
    }
} 
```

基本上，定义一个锁对象，然后每当您需要对文件执行某些操作时，请确保使用 C#`lock`关键字获得锁。到达`lock`语句后，执行将无限期地阻塞，直到获得锁为止。

还有其他可以用于锁定的结构，但我发现`lock`关键字是最直接的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:02:58.273

如果您使用的是 .Net Framework 的当前版本，则可以从[`Task.ContinueWith`](http://msdn.microsoft.com/en-us/library/dd270696.aspx).

如果您的工作单元在逻辑上总是“读一些，然后写一些”，那么以下内容简洁地表达了该意图并且应该扩展：

```
string path = "file.dat";

// Start a reader task
var task = Task.Factory.StartNew(() => ReadFromFile(path));

// Continue with a writer task
task.ContinueWith(tt => WriteToFile(path));

// We're guaranteed that the read will occur before the write
// and that the write will occur once the read completes.
// We also can check the antecedent task's result (tt.Result in our
// example) for any special error logic we need. 
```

# c# - 在 C# 中编译并执行来自 txt 的代码行

> ID：13273278
> 
> 赞同：-5
> 
> 时间：2012-11-07T15:52:51.097
> 
> 标签：c#, txtextcontrol

我在 text s 这行：

```
myData = myData.Replace(".jpg", ">JPG<");
myData = myData.Replace(".gif", ">GIF<");
myData = myData.Replace(".png", ">PNG<");
myData = myData.Replace(".tif", ">TIF<"); 
```

在我的 C# 程序上，我不会一个一个地在一个 cicle 上：

```
for (int l=0; w<listWithLines.Count;l++)
{
// MY LINE
// listWithLines[l]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:55:24.493

我不认为你能做到这一点，你可以使用 CodeProviders 等从外部源编译代码块，但我认为你不能像你想要的那样将它放入预定义的范围（范围在你的 for 循环中） ，除非您可以将其作为块加载并将其作为操作传递给方法（将执行循环）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:59:23.753

我不知道以这种方式从文本文件编译和运行代码行的简单方法。但是，如果您要为 myData 对象提供使用 XML 进行序列化和反序列化的方法，您可以从外部文件中读取行来执行类似的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T16:05:24.927

如果您的意图只是进行字符串替换（如示例行中所示），并且您能够修改文本列表，那么最好的方法是仅在列表中提供替换标记：

```
.jpg,>JPG<
.gif,>GIF<
.png,>PNG<
.tif,>TIF< 
```

然后可以像这样修改您的 C# 代码：

```
for (int l=0; w<listWithLines.Count;l++)
{
    string[] strTokens = listWithLines[l].Split(',');
    // MY LINE
    myData = myData.Replace(strTokens[0], strTokens[1]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T16:35:35.100

你也许可以这样做，但它需要像 Reflection.Emit 这样的东西来做很多工作。很确定您还必须学习整个课程您可以使用 IronPython 或其他 DLR 实现之一来完成它，但也可以做很多工作将其转换为 xml

```
<Replaces>
<Replace from=".jpg" to=">JPG<" />
<Replace from=".gif" to=">GIF<" />
</Replaces> 
```

然后做类似的事情

```
XmlDocument doc = new XmlDocument();
doc.Load("Replaces.xml")
foreach(XmlNode replaceNode in doc.DocumentElement.SelectNodes("Replaces/Replace"))
{
  myData = myData.Replace(replaceNode.Attributes["from"].Value, replaceNode.Attributes["to"].Value);
} 
```

# filter - 如何使用 pyqt 对 qtable 进行排序或过滤

> ID：13273279
> 
> 赞同：0
> 
> 时间：2012-11-07T15:52:51.300
> 
> 标签：filter, pyqt

我在 qtwidget 中填充了一个 qtable，其中包含 4 列作为项目、人员、时间、颜色，现在我希望能够根据列选项进行过滤。例如，我如何才能只显示一个特定项目的行，然后在该特定项目中只显示红色，这样我就可以知道谁参与了该项目以及该人花了多少时间。

谢谢。

# android - 如何告诉我的自定义 FragmentPagerAdapter 停止销毁我的 Fragment？

> ID：13273285
> 
> 赞同：22
> 
> 时间：2012-11-07T15:53:18.617
> 
> 标签：android, android-fragments, android-viewpager

我有一个带有 FragmentPagerAdapter 的 ViewPager，而我的应用程序之前只使用了两个片段（不同类型）而没有问题。

不过，我刚刚添加了第三个片段，现在当我远离它们时，我的适配器/viewpager 似乎正在破坏我的片段。例如，如果我在第 1 页，当我接近第 3 页时，它会被破坏并重新创建。如果我在第 3 页，那么第 1 页也会发生同样的情况。

这在我的应用程序中引起了很多问题。这些片段根本不是很重的 RAM，那么我怎样才能阻止这种情况发生呢？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-11-07T15:57:14.273

我相信您正在寻找[ViewPager.setOffscreenPageLimit()](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setOffscreenPageLimit%28int%29)。

在您的情况下，以下内容应将您的片段保存在内存中而不是破坏它们。

```
ViewPager pager = (ViewPager) findViewById(R.id.viewPager);
pager.setOffscreenPageLimit(2); 
```

但是，我怀疑您在销毁时没有正确存储视图状态。您的片段应正确处理被销毁/重新创建。例如，如果发生方向更改，您的片段也会被销毁并重新创建。如果用户离开您的应用程序并且系统稍后需要内存并破坏您的活动，也可能发生这种情况。它应该能够重新打开并处于与以前相同的状态。如果这确实是您的问题，请考虑在[onSaveInstanceState()](http://developer.android.com/reference/android/app/Fragment.html#onSaveInstanceState%28android.os.Bundle%29)中保存状态。保存的状态将在[onCreate](http://developer.android.com/reference/android/app/Fragment.html#onCreate%28android.os.Bundle%29)中呈现给您，您可以在其中将片段的状态初始化为与销毁的状态相同。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-19T04:54:57.843

只需在 FragmentpagerAdapter 中覆盖此方法

```
@Override
public void destroyItem(ViewGroup container, int position, Object object) {
       // TODO Auto-generated method stub
       super.destroyItem(ViewGroup container, int position, Object object);
} 
```

消除`super.destroyItem(ViewGroup container, int position, Object object);`

从你的代码

# c# - 单独的 UI 线程上的 WPF 控件？

> ID：13273289
> 
> 赞同：5
> 
> 时间：2012-11-07T15:53:39.817
> 
> 标签：c#, wpf, multithreading, user-interface, wpf-controls

我正在制作一个媒体播放器，现在.. 我添加了一个实时搜索功能来搜索歌曲等（比如 WMP 实时搜索），即当您输入关键字时，搜索就会发生。

在搜索过程中，访问数据库和加载 IEnumerable 是通过 BackGroundProcess 在另一个线程上完成的。UI 通过调用 UIElement 的调度程序进行更新。

这个过程相当快，但是当您在文本框中输入搜索关键字时，似乎有一点滞后，这是因为 Listbox.ItemSource 更新需要一些时间。即假设您要搜索“Adele”，当您输入“a”时，搜索功能会加载“A”的结果，但是当我们输入整个单词“Adele”时，需要一些时间来显示“d " "e" "l" "e" 并且这些字母之间有轻微的滞后。

在这个搜索过程中，当我停止更新 UI 时，搜索过程看起来非常流畅，这对我来说只是意味着 Listbox 正在锁定线程，所以当 Listbox 完成处理时，播放器的其余 UI 被卡在那里.

所以我相信如果我可以将 Listbox Control 放到另一个 UI 线程中，无论加载 Listbox 所花费的时间如何，我都可以保持播放器的流畅运行。仅供参考：数据虚拟化已经存在，ListBox 的 UI 虚拟化正在运行

如何将 ListBox 控件放到另一个 UI 线程上？WPF, C#

提前致谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T16:02:14.687

如果您在每次按键时都查询数据库 - 这将导致您在快速（甚至正常）打字时出现一些滞后

您最好限制请求，我们使用它来限制调度程序线程。

```
public static class DispatcherExtensions
{
    private static Dictionary<string, DispatcherTimer> timers =
        new Dictionary<string, DispatcherTimer>();
    private static readonly object syncRoot = new object();

    public static string DelayInvoke(this Dispatcher dispatcher, string namedInvocation,
        Action action, TimeSpan delay,
        DispatcherPriority priority = DispatcherPriority.Normal)
    {
        lock (syncRoot)
        {
            if (String.IsNullOrEmpty(namedInvocation))
            {
                namedInvocation = Guid.NewGuid().ToString();
            }
            else
            {
                RemoveTimer(namedInvocation);
            }
            var timer = new DispatcherTimer(delay, priority, (s, e) =>
                {
                    RemoveTimer(namedInvocation);
                    action();
                }, dispatcher);
            timer.Start();
            timers.Add(namedInvocation, timer);
            return namedInvocation;
        }
    }

    public static void CancelNamedInvocation(this Dispatcher dispatcher, string namedInvocation)
    {
        lock (syncRoot)
        {
            RemoveTimer(namedInvocation);
        }
    }

    private static void RemoveTimer(string namedInvocation)
    {
        if (!timers.ContainsKey(namedInvocation)) return;
        timers[namedInvocation].Stop();
        timers.Remove(namedInvocation);
    } 

} 
```

假设您没有使用 MVVM，您可以在单击按钮时轻松使用它

```
Dispatcher.CurrentDispatcher.DelayInvoke("UpdateSearch",
       YourMethodThatStartsBackgroundThread,Timespan.FromSeconds(1)); 
```

另外值得注意的是：如果您使用的是 4.5，则可以查看绑定上的[Delay属性。](http://www.jonathanantoine.com/2011/09/21/wpf-4-5-part-4-the-new-bindings-delay-property/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:01:23.860

在 ASP.NET 中，我们通常使用两种技术

*   最多等待 3 个字符开始搜索。
*   在用户停止输入后和开始搜索之前等待几毫秒，因为用户输入速度超过几毫秒，您的搜索词将包含多个字符。第二个选项包括在用户开始键入时启动一个计时器，并将该计时器设置为零（不停止它）每个按键按下。当用户停止输入 2000 毫秒（例如）时，您执行搜索

一个完美的方法是将这两种技术结合起来：仅在搜索条件中有 3 个或更多字符时进行搜索，并使用计时器。

# python - django - 将模型文件渲染为模板

> ID：13273291
> 
> 赞同：1
> 
> 时间：2012-11-07T15:53:43.627
> 
> 标签：python, django, file, render

我有一个模型叫广告。该模型具有文本字段、标题字段和文件字段。

我成功地将所有 3 个字段保存到模型中。

现在我需要在模板中显示它们。我的愿景是：

```
ads = Advertisement.objects.all()
return render_to_response('page.html', {'ads':ads},context_instance=RequestContext(request)) 
```

在我的 page.html 中：

```
{% for each_ad in ads %}
<p>{{each_ad.title}}</p>
<p>{{each_ad.text}}</p>
<p><a href="/ads/{{each_ad.file_pdf}}>{{each_ad.file_pdf.name}}</a></p>
{% endfor %} 
```

这看起来对吗？如果没有，请告诉我方法，以便我学习。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T16:10:03.293

PDF链接是否下载取决于用户的浏览器。

添加`target="_blank"`将在新窗口/标签中打开pdf：

```
<p><a href="/ads/{{each_ad.file_pdf}}" target="_blank">{{each_ad.file_pdf.name}}</a></p> 
```

为了确保它始终在每个环境中下载更加困难，您需要设置您的`.htaccess`（如果您使用的是 apache，请按照以下内容：[强制使用 .htaccess 下载文件或图像](https://stackoverflow.com/questions/4218466/force-fileimage-download-with-htaccess)）或将其强制为`attachment`生产来自 Django 的 PDF。

# expressionengine - 过滤掉 EE1 的 Twitter 时间线插件中的提及

> ID：13273293
> 
> 赞同：3
> 
> 时间：2012-11-07T15:53:46.593
> 
> 标签：expressionengine

在 EE1 中使用[Twitter 时间轴插件](http://expressionengine.com/downloads/details/twitter_timeline/)时，有没有办法从它输出的推文列表中过滤掉提及？

我只想输出不作为对另一个用户的回复开始的推文，以避免对话出现在网站的 Twitter 提要中。

谢谢，

斯特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:11:41.997

我过去曾为此使用过[Tweetline](http://devot-ee.com/add-ons/tweetline)。它比 Twitter Timeline 插件更灵活，您可以轻松过滤掉提及和转发。

* * *

**使用 EE1 修复进行编辑：**幸运的是，Twitter API（甚至是这个旧版本）支持转发和回复的参数，因此为这些添加参数非常简单。在第 82 行查找：

```
$TMPL->log_item("Using '{$timeline}' Twitter Timeline {$log_extra}"); 
```

在下面添加以下内容：

```
// toggle retweets and replies

if ($TMPL->fetch_param('replies') == 'off')
{
    $this->parameters['exclude_replies'] = TRUE;
}

if ($TMPL->fetch_param('retweets') == 'on')
{
    $this->parameters['include_rts'] = TRUE;
} 
```

然后，您可以在模板中使用这样的代码：

```
{exp:twitter_timeline screen_name="someguy" limit="1" replies="off" retweets="off"} 
```

由于 API 的设置方式，它看起来好像默认包含回复而没有转发。这也值得注意，来自[API 文档](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)：

> 最好将 count 的值视为对要返回的推文数量的限制，因为在应用计数后会删除暂停或删除的内容。即使未提供 include_rts，我们也会在计数中包含转推。建议您在使用此 API 方法时始终发送 include_rts=1。

# codeigniter - 将图片路径上传到db和文件夹名称中的图片上传

> ID：13273298
> 
> 赞同：2
> 
> 时间：2012-11-07T15:54:19.830
> 
> 标签：codeigniter, codeigniter-2, codeigniter-form-helper

这是控制器：

```
public function category()
    {
        if($this->form_validation->run()==FALSE)
        {
            $this->load->view('admin/home');
        }
        else{
                $config['upload_path'] = 'uploads/';
        $config['allowed_types'] = 'gif|jpg|png';
        $config['max_size'] = '100';
        $config['max_width']  = '1024';
        $config['max_height']  = '768';
                $this->load->library('upload', $config);
                $image_data=$_POST['file'];
            if ( ! $this->upload->do_upload())
            {
                // no file uploaded or failed upload
                $error = array('error' => $this->upload->display_errors());
                $this->load->view('admin/home', $error);
            }
            else
            {
                // success
                $data = array('upload_data' => $this->upload->data());
                $this->your_upload_model->add($title, $description, $data["file_name"]);

                $this->load->view('upload_success', $data);
            }
        }

    } 
```

这是视图：

```
<?php echo validation_errors();?>
        <?php echo form_open_multipart('login/category');?>
        <?php
        if(isset($error))
        {
            echo $error;
        }
        ?>
<table>
<tr>
        <td align=right>Logo:</td>

        <td><input type="file" name="file"></td>
        <td><input type="submit" value="submit"></td>

        </tr>

        </table> 
```

我收到两个错误：

1.  消息：未定义的索引：文件
2.  您没有选择要上传的文件。

即使文本字段名称相同并且我使用了`form_open_multipart()`. 此外，图像未上传，错误无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:36:39.983

首先，这`$_POST['file']`不起作用，但其次，您需要在以下位置提供 HTML 字段名称`do_upload()`：

```
if ( ! $this->upload->do_upload('file'))
{
...
} 
```

另外，删除，`$image_data=$_POST['file'];`因为它无论如何都行不通。您已经在使用`$this->upload->data()`这是获取上传文件数据的正确方法。

`$this->upload->do_upload()`没有字段名称的原因是因为如果未提供参数，它会查找字段`name="userfile"`。您正在使用`name="file"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T10:31:28.807

将此代码用于第一个问题：

```
public function category()
{
 if (array_key_exists('submit', $_POST)) {
  ---------You can enter the remaining code here............
 }
} 
```

对于第二个：

```
if ( ! $this->upload->do_upload("file"))
{
 -----------code here----------
} 
```

# sql-server - 在 vb.net 中模拟远程用户访问 MS SQL Server

> ID：13273300
> 
> 赞同：1
> 
> 时间：2012-11-07T15:54:20.190
> 
> 标签：sql-server, vb.net, impersonation, runas

我正在尝试通过 vpn 模拟域用户。我可以使用 RUNAS 命令从命令提示符运行管理工作室。但是，在调试模式或已发布的应用程序中，我无法对我的 vb 应用程序（.net 4.5、winforms、使用 VS 2012 Express）做同样的事情。这是我尝试过的：

*   我的应用程序的 runas 命令（来自开始菜单程序中快捷方式的位置，以及可执行文件）；在这些情况下，在命令提示符中输入密码后，我会收到“未知用户或密码错误”错误。
*   我已经在代码中尝试了模拟用户，如 [http://williamfaulkner.co.uk/2009/04/vbnet-run-as-administrator-impersonate-a-user-2008/][ 1]，这似乎是 MSDN 上列出的使用调用 advapi.dll 的变体（我不太确定它是如何工作的）。在这种情况下，当代码尝试查询 SQL 服务器时，我还会收到“未知用户或密码错误”错误。

有没有人对这些错误和/或我如何解决这个问题有任何解释。我假设如果我可以模拟和运行 ssms，我应该能够在我的 vb 应用程序中做到这一点。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:02:24.947

这有点飞跃，但是 - Windows 的特定部分只能运行一次，并且不允许有来自不同用户的多个实例。我想知道这是否是这里的问题。我特别想explorer.exe。如果这听起来可能是导致 RUNAS 方法出错的原因，请尝试：

1.  通过运行以用户身份启动新的 cmd 窗口： runas /noprofile /user:domain\user cmd
2.  打开任务管理器并终止 explorer.exe 进程（执行此操作时您将失去启动栏）
3.  在cmd窗口中输入：explorer.exe
4.  开始栏和窗口将返回并以其他用户身份运行

现在试试你的应用程序。完成后，请务必通过以下方式切换回来：

1.  打开任务管理器（这将作为其他用户运行）
2.  杀死 explorer.exe 进程
3.  按 ctrl alt del 然后单击任务管理器（这应该让它像你一样运行）
4.  在任务管理器中，单击文件 - 新任务
5.  类型：explorer.exe
6.  现在一切都应该恢复正常了。

# php - 第 23 行的 SQL PHP 表单错误

> ID：13273302
> 
> 赞同：0
> 
> 时间：2012-11-07T15:54:29.190
> 
> 标签：php, html, sql

我一直在尝试编写代码以插入不同的表，但它在第 23 行一直给我错误。

这是一个大学项目登记表。

```
<?php

$con = mysql_connect(","","");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

mysql_select_db("HNDGeorgeMason", $con);

$firstname=$_POST['firstname'];
$surname=$_POST['surname'];
$username=$_POST['username'];
$password=$_POST['password'];
$address=$_POST['address'];
$postcode=$_POST['postcode'];
$userid=$_POST['userid'];
$type=$_POST['type'];

switch ($_POST['type'])
{
case guides
 $sql="INSERT INTO Guides (firstname, surname, type, username, password)
 VALUES ('$firstname', '$surname', '$type', '$username', '$password')";

case parents
 $sql="INSERT INTO Parents (firstname, surn ame, type, username, password)
VALUES ('$firstname', '$surname', '$type', '$username', '$password')"; 

case leaders
 $sql="INSERT INTO Leaders (firstname, surname, type, username, password)
 VALUES ('$firstname', '$surname', '$type', '$username', '$password')"; 
}

 mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:56:45.913

检查您的代码

*   `$con = mysql_connect(","","");`
*   在情况下：例如：`case "guides"`
*   永远不要只插入你的 $_POST 而不清理输入（由于[SQL 注入）](http://en.wikipedia.org/wiki/SQL_injection)。至少使用[mysqli_real_escape_string()](http://www.php.net/manual/en/mysqli.real-escape-string.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:58:04.303

```
case "leaders":
 $sql="INSERT INTO Leaders (firstname, surname, type, username, password)
 VALUES ('$firstname', '$surname', '$type', '$username', '$password')"; 
break; 
```

# android - 当网络可用时，在 Android 上排队一条消息以发送到服务器

> ID：13273304
> 
> 赞同：0
> 
> 时间：2012-11-07T15:54:29.893
> 
> 标签：android

Android 手机（4.0.4 或更高版本）上的应用程序需要向服务器发送通知（非常小的一个，可能适合 1024 字节）。问题是网络目前可能不可用。

通常应用程序会在网络可用后再次尝试，但如果应用程序本身在此之前被卸载，则消息必须到达。

如果这有任何改变，我的具体情况需要在用户禁用或卸载我们的设备管理员应用程序时发送消息。

现在我希望这是不可能的，但也许有人可以想到一个解决方案。我可以看到的一种可能性是在这种情况下发送短信，但很难在服务器端接收。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:47:24.463

所以不幸的答案是预期的 - 这是不可能的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:02:20.033

您可以向服务器发送 SMS 而不是消息吗？

如果是这样，那么你可以打电话

```
SmsManager sms = SmsManager.getDefault();
sms.sendTextMessage(phoneNumber, null, message, pi, null); 
```

您需要许可：`android.permission.SEND_SMS`

有关详细信息，请参阅[SmsManager](https://developer.android.com/reference/android/telephony/SmsManager.html)。

如果没有可用的服务提供商连接，短信将进入短信发件箱，并在连接恢复时发送。用户仍然可以进入他的发件箱并从那里删除邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-06T04:49:53.503

这是一个 github 项目[reyna](https://github.com/B2MSolutions/reyna)可以解决它。

# java - Apache HttpClient 获取服务器证书

> ID：13273305
> 
> 赞同：4
> 
> 时间：2012-11-07T15:54:35.993
> 
> 标签：java, http, apache-httpclient-4.x, apache-httpcomponents

有没有办法在请求后使用 Apache HttpClient 获取经过身份验证的服务器的 SSL 证书 - 只是服务器端 request.getAttribute("javax.servlet.request.X509Certificate") 的对应物？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T16:49:01.623

好的，这在某些方面有点元，我希望以一种适用于任何连接管理器的方式来做这件事。我假设您在最新的 HttpClient (4.2) 上运行

因此，您需要做的是向客户端添加一个 HttpResponseInterceptor。

```
((AbstractHttpClient)client).addResponseInterceptor(new HttpResponseInterceptor() {
    @Override
    public void process(HttpResponse response, HttpContext context) throws HttpException, IOException {
        HttpRoutedConnection routedConnection= (HttpRoutedConnection)context.getAttribute(ExecutionContext.HTTP_CONNECTION);
        if( routedConnection.isSecure() ) {
            Certificate[] certificates= routedConnection.getSSLSession().getPeerCertificates();
            // Assume that PEER_CERTIFICATES is a constant you've defined
            context.setAttribute(PEER_CERTIFICATES, certificates);
        }
    }
}); 
```

完成后，通过此客户端发出的任何请求都将检查连接是否标记为“安全”，然后尝试获取对等证书。

在此示例中，我只是放入与对等连接关联的整个证书数组。

此时，要执行，您将执行类似于以下的操作：

```
HttpContext context= new BasicHttpContext();
HttpGet get= new HttpGet(....);
client.execute(get, context);
// should contain the array of Certificate - these are more likely X509Certificate instances
Certificate[] peerCertificates= (Certificate[])context.getAttribute(PEER_CERTIFICATES);certificates
// do whatever logic to complete and consume the request 
```

希望这会得到你所需要的——如果有人有除此之外的建议，他们将不胜感激。

**编辑**这也可以作为 HttpRequestInterceptor 完成，并且与已经建立的连接具有相同的效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-02T14:43:17.807

对于 HttpClient 4.5，需要像这样更改解决方案：

```
clientBuilder.addInterceptorLast(new HttpResponseInterceptor() {
        @Override
        public void process(HttpResponse response, HttpContext context) throws HttpException, IOException {
            ManagedHttpClientConnection routedConnection = (ManagedHttpClientConnection) context.getAttribute(HttpCoreContext.HTTP_CONNECTION);
            SSLSession sslSession = routedConnection.getSSLSession();
            if (sslSession != null) {
                Certificate[] certificates = sslSession.getPeerCertificates();
                // Assume that PEER_CERTIFICATES is a constant you've defined
                context.setAttribute(PEER_CERTIFICATES, certificates);
            }
        }
    }); 
```

# asp.net-ajax - '$common' 未定义 - asp.net 网页中的 AJAX 控制工具包错误

> ID：13273309
> 
> 赞同：1
> 
> 时间：2012-11-07T15:54:56.133
> 
> 标签：asp.net-ajax, ajaxcontroltoolkit

我有一个带有 ModalPopupExtender 的 asp.net 网页，当页面加载时出现以下错误：

> 消息： '$共同'是未定义的
> 线：2
> 字符：2784
> 代码：0
> URI：HTTPS：？///ScriptResource.axd d = RtZliaGPxbVTibdn1QCLLFCYmkQJLzmVdEg8YVHOawz2u0jp4PvhsrY5Kg6-rtio9wXKnnE88B3dPvlDZPsA89Ul _-- ULFJ0EwbU35JI9_Fa4mL5XwLwQEomAqEfSv6eluWku9SSc-q_lmfPgC4bQA2＆T = ffffffffbad362a4

该弹出窗口在一台生产 Web 服务器（运行 Windows 2003 R2）上运行良好，但在另一台（运行 Windows 2008 R2）上失败。

有没有人见过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T14:56:45.830

我更改为 ToolkitScriptManager 并且错误消失了。谢谢大卫斯特拉顿。

# c# - HttpContext.Current.Request.Url.Host 它返回什么？

> ID：13273312
> 
> 赞同：40
> 
> 时间：2012-11-07T15:55:18.880
> 
> 标签：c#, asp.net, http, httpcontext

我有一个具有路径的本地应用程序：

```
http://localhost:950/m/pages/Searchresults.aspx?search=knife&filter=kitchen 
```

但是当它进入集成环境或生产环境时，它会类似于

```
http://www.someshopping.com/m/pages/SearchResults.aspx?search=knife&filter=kitchen 
```

在某些情况下，我只需要通过：

```
www.someshopping.com 
```

到我的 XSLT 文件和我正在使用的函数之一：

```
string currentURL = HttpContext.Current.Request.Url.Host; 
```

这会在本地环境中返回“ **localhost ”。**相同的代码会返回我吗：

**[www.someshopping.com](http://www.someshopping.com)**正在生产中（我不需要**http://**）

只是不想冒险。于是问了这个傻问题。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-11-07T15:59:46.847

是的，只要您在浏览器 www.someshopping.com 中键入的 url 并且您没有使用 url 重写然后

```
string currentURL = HttpContext.Current.Request.Url.Host; 
```

将返回`www.someshopping.com`

注意本地调试环境和生产环境的区别

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-07T15:59:55.753

该`Host`属性将返回您在访问该站点时使用的域名。所以，在你的开发环境中，因为你要求

```
http://localhost:950/m/pages/Searchresults.aspx?search=knife&filter=kitchen 
```

它回来了`localhost`。您可以像这样分解您的 URL：

```
Protocol: http
Host: localhost
Port: 950
PathAndQuery: /m/pages/SearchResults.aspx?search=knight&filter=kitchen 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-10-07T07:46:21.113

试试这个：

```
string callbackurl = Request.Url.Host != "localhost" 
    ? Request.Url.Host : Request.Url.Authority; 
```

这将适用于本地和生产环境。因为本地使用带有端口号的 url，所以使用 Url.Host 是可能的。

# javascript - 表索引和成员绑定

> ID：13273316
> 
> 赞同：1
> 
> 时间：2012-11-07T15:55:27.383
> 
> 标签：javascript, jquery, html, algorithm

在以下代码中：http: [//jsfiddle.net/ueP5U/1/](http://jsfiddle.net/ueP5U/1/)

我有一个表，其中每个 td/th 成员都由其给定一个相对索引`<tr>`

```
var tableIterator = function(table, process) {
$.each(table.children(), function() { //cycle through thead,tbody,tfoot
    $(this).children().each(function() { //cycle through thead, tbody, tfoot "tr"s
        process.call($(this));
    });
});
}

tableIterator($("table"), function() {
  $(this).find("td,th").each(function() {
    $(this).text("Index: " + $(this).index()); 
  });
}); 
```

​</p>

该表可以包含两个或多个标题，其中父标题获得更大的 colspan 并且底部标题通过提供等效数量的列来符合（即索引 4 有两个索引为 1 和 2 的子标题）。

我实际上想要做的是制作父标题，选择它的所有“孩子”（当然不是实际的 dom 孩子），并根据所选列进行相同的操作。

我明白了逻辑：每个标题元素，需要找到它以前的兄弟“孩子”索引，并将 colspan 的数量添加到它自己的孩子以获得他们的索引（即索引 5 [colspan = 2]，去索引 4，找到它的最后一个孩子（索引 1））并将 colspan 的数量添加到它的“孩子”中，所以他们将拥有 index: 2 和 index: 3 （+=1*colspan.val() 次）

它的身体“孩子”也是如此。

我假设我需要根据使用 jQuery.filter(return $("thead").findByColumn(2[或任何其他顶部标题索引])) 显示的内容创建一个包含绑定元素的对象数组

希望得到一些帮助，因为我什至在开始时都遇到了麻烦，通过单击突出显示、通过 max_width 隐藏或根据选择在列上运行的示例非常受欢迎！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T00:04:23.757

```
function iterTable(table, callback) {
    // Keeps track of which indices are blocked by larger cells
    var blocked = [];

    $("thead,tbody,tfoot", table).each(function (groupIndex) {
        var groupName = this.tagName;

        $("tr", this).each(function (rowIndex) {
            var colIndex = 0;
            var blockedRow = blocked[0] || [];

            $("td,th", this).each(function () {
                var $cell = $(this);
                var colSpan = parseInt($cell.prop("colspan")) || 1;
                var rowSpan = parseInt($cell.prop("rowspan")) || 1;

                // Skip all blocked cells
                while (blockedRow[colIndex]) {
                    colIndex++;
                }

                callback(groupIndex, groupName, rowIndex, colIndex, $cell);

                // Mark all sub-cells as blocked.
                for (var i = 0; i < rowSpan; i++) {
                    for (var j = 0; j < colSpan; j++) {
                        if (!blocked[i]) blocked[i] = [];
                        blocked[i][colIndex+j] = true;
                    }
                }
                colIndex += colSpan;
            });

            // Pop the first element; We don't need it any more.
            blocked.shift();
        });
    });
}

var columns = [];
iterTable($('table'), function (groupIndex, groupName, rowIndex, colIndex, $cell) {
    $cell.text(groupName + " " + rowIndex + "," + colIndex);
    if (groupName == "TBODY") {

        // Save the cell into a specific column.
        if (!columns[colIndex]) columns[colIndex] = [];
        columns[colIndex][rowIndex] = $cell;

    }
    else { // THEAD or TFOOT

        var colSpan = parseInt($cell.prop("colspan")) || 1;
        $cell.click(function () {
            // Toggle the background for the column under the header.
            for (var i = 0; i < colSpan; i++) {
                $.each(columns[colIndex+i], function () {
                    $(this).toggleClass('selected');
                });
            }
        });

    }
}); 
```

[（jsfiddle）](http://jsfiddle.net/ueP5U/2/)

# sql-server - 如何使用 Sql server 2012 生成插入语句？

> ID：13273317
> 
> 赞同：26
> 
> 时间：2012-11-07T15:55:33.983
> 
> 标签：sql-server, sql-server-2012

[我有 sql server 2012 express 并且刚刚从http://www.ssmstoolspack.com/Download](http://www.ssmstoolspack.com/Download)安装了最新版本的 ssms 工具

使用 sql server 2008 express 和 ssms 工具，我能够右键单击表并查看 ssms 工具选项，该选项允许我为表生成插入语句，但现在我看不到它？任何人都知道如何为表生成插入语句？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-12-28T12:52:59.063

您可以使用 SSMS 2012 本地编写数据脚本，而无需使用 SSMS 工具包等插件，尽管该功能被隐藏起来。

*   右键单击您的数据库并选择任务 -> 生成脚本
*   单击“下一步”跳过介绍屏幕并进入下一页，然后选择要编写脚本的对象。请注意，您可以在此处编写所有 SQL 对象的脚本，而不仅仅是表。这是因为此向导允许您编写模式和数据的脚本。 *重要的是，仅模式是默认设置，您需要在下一页进行更改。*点击下一步。
*   现在，您将看到一组主要与如何输出脚本有关的选项，但是有一个标有**Advanced**的不起眼的按钮。单击此按钮将为您提供一个包含选项列表的对话框。General 部分下的最后一个选项是“Types of data to script”，您应该将其从“Schema only”更改为“Data only”或“Schema and data”。
*   最后，决定您希望脚本在哪里执行，您应该能够生成您的 INSERT 语句。

有关更多详细信息，请参阅此博客文章，这是我发现此功能的地方： [http ://raresql.com/2012/09/30/generating-insert-statements-in-sql-server-2012/](http://raresql.com/2012/09/30/generating-insert-statements-in-sql-server-2012/)

请注意，与 SSMS 工具包不同，这将为您尝试编写脚本的每一行生成一个 INSERT 语句。如果您需要移动大量行，那么您可能需要寻求替代方案。但是，对于编写小型配置表的脚本，这是完美的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:23:01.997

试试[这个链接](http://vyaskn.tripod.com/code/generate_inserts.txt)上的过程。

安装后，只需使用`EXEC sp_generate_inserts MyTable`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T16:00:59.117

啊，2012 ssms工具不再免费了，我只好点个license然后重启sql server。

# ruby - 拆分开头和结尾处的空字符串

> ID：13273318
> 
> 赞同：8
> 
> 时间：2012-11-07T15:55:35.540
> 
> 标签：ruby, string, perl, split

> **可能重复：**
> [Ruby 中的拆分问题](https://stackoverflow.com/questions/5453051/split-problem-in-ruby)

在 Ruby 中，当我使用与字符串开头匹配的分隔符拆分字符串时，它会在数组的初始位置给出一个空字符串：

```
"abc".split(/a/) # => ["", "bc"] 
```

但是当我使用匹配字符串结尾的分隔符做类似的事情时，它不会给出一个空字符串：

```
"abc".split(/c/) # => ["ab"] 
```

这在我看来不一致。这种规范有什么理由吗？

**编辑** 如果它要与 Perl 的规范兼容，就像 muu 中的简短回答一样，那么问题仍然是一样的：为什么在 Perl 中会这样？也正因如此，现在它也变成了关于 Perl 的问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T16:37:19.390

来自[精美手册](https://ruby-doc.org/core/String.html#method-i-split)：

> **split(pattern=$;, [limit]) → anArray**
> [...]
> 如果省略了*limit*参数，则会抑制尾随的空字段。如果*limit*是一个正数，最多将返回该数量的字段（如果*limit*为 1，则整个字符串作为数组中的唯一条目返回）。如果为负数，则返回的字段数没有限制，并且不抑制尾随的空字段。

所以尾随的“空字段”被抑制，因为文档说它们是。如果您想要尾随的空字符串，请要求它：

```
'abc'.split(/c/, -1) # [ 'ab', '' ] 
```

为什么会这样？可能是因为它符合[Perl 的`split`](http://perldoc.perl.org/functions/split.html)行为：

> 如果`LIMIT`为负数，则将其视为任意大；产生尽可能多的字段。

我们看到，使用负数`limit`再次给了我们尾随的空字符串：

```
$ perl -e 'print join(",", split(/c/, "abc")), "\n"'
ab
$ perl -e 'print join(",", split(/c/, "abc", -1)), "\n"'
ab, 
```

为什么要复制 Perl 的行为？问马茨。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T20:13:06.190

在阅读了 AWK 的 mu is too short 之后的规范后，我开始觉得 AWK 的初衷`split`是提取与字段对应的子字符串，每个字段都以标点符号结尾，例如`,`，`.`分隔符被认为是“字段结束字符”。目的不是将字符串对称地拆分为每个分隔符位置的左侧和右侧，而是在分隔符位置的左侧终止子字符串。在这个概念下，在分隔符的左侧总是有一些字符串（即使它是空的）是有意义的，但不一定在分隔符的右侧。这可能是通过 Perl 继承给 Ruby 的。

# java - iPhone 客户端与 Java 服务器对话

> ID：13273320
> 
> 赞同：1
> 
> 时间：2012-11-07T15:55:57.383
> 
> 标签：java, iphone, objective-c, client-server

我正在尝试让 iphone 客户端与 Java Server 交谈，这是 Java Server 代码：

```
import java.io.*;
import java.net.*;
import java.text.SimpleDateFormat;
import java.util.*;

public class Server {
// a unique ID for each connection
private static int uniqueId;
// an ArrayList to keep the list of the Client
private ArrayList<ClientThread> al;
// if I am in a GUI
private ServerGUI sg;
// to display time
private SimpleDateFormat sdf;
// the port number to listen for connection
private int port;
// the boolean that will be turned of to stop the server
private boolean keepGoing;

/*
 *  server constructor that receive the port to listen to for connection as parameter
 *  in console
 */
public Server(int port) {
    this(port, null);
}

public Server(int port, ServerGUI sg) {
    // GUI or not
    this.sg = sg;
    // the port
    this.port = port;
    // to display hh:mm:ss
    sdf = new SimpleDateFormat("HH:mm:ss");
    // ArrayList for the Client list
    al = new ArrayList<ClientThread>();
}

public void start() {
    keepGoing = true;
    /* create socket server and wait for connection requests */
    try
    {
        // the socket used by the server
        ServerSocket serverSocket = new ServerSocket(port);

        // infinite loop to wait for connections
        while(keepGoing)
        {
            // format message saying we are waiting
            display("Server waiting for Clients on port " + port + ".");

            Socket socket = serverSocket.accept();      // accept connection
            // if I was asked to stop
            if(!keepGoing)
                break;
            ClientThread t = new ClientThread(socket);  // make a thread of it
            al.add(t);                                  // save it in the ArrayList
            t.start();
        }
        // I was asked to stop
        try {
            serverSocket.close();
            for(int i = 0; i < al.size(); ++i) {
                ClientThread tc = al.get(i);
                try {
                    tc.sInput.close();
                    tc.sOutput.close();
                    tc.socket.close();
                }
                catch(IOException ioE) {
                    // not much I can do
                }
            }
        }
        catch(Exception e) {
            display("Exception closing the server and clients: " + e);
        }
    }
    // something went bad
    catch (IOException e) {
        String msg = sdf.format(new Date()) + " Exception on new ServerSocket: " + e + "\n";
        display(msg);
    }
}
/*
 * For the GUI to stop the server
 */
protected void stop() {
    keepGoing = false;
    // connect to myself as Client to exit statement
    // Socket socket = serverSocket.accept();
    try {
        new Socket("localhost", port);
    }
    catch(Exception e) {
        // nothing I can really do
    }
}
/*
 * Display an event (not a message) to the console or the GUI
 */
private void display(String msg) {
    String time = sdf.format(new Date()) + " " + msg;
    if(sg == null)
        System.out.println(time);
    else
        sg.appendEvent(time + "\n");
}
/*
 *  to broadcast a message to all Clients
 */
private synchronized void broadcast(String message) {
    // add HH:mm:ss and \n to the message
    String time = sdf.format(new Date());
    String messageLf = time + " " + message + "\n";
    // display message on console or GUI
    if(sg == null)
        System.out.print(messageLf);
    else
        sg.appendRoom(messageLf);     // append in the room window

    // we loop in reverse order in case we would have to remove a Client
    // because it has disconnected
    for(int i = al.size(); --i >= 0;) {
        ClientThread ct = al.get(i);
        // try to write to the Client if it fails remove it from the list
        if(!ct.writeMsg(messageLf)) {
            al.remove(i);
            display("Disconnected Client " + ct.username + " removed from list.");
        }
    }
}

// for a client who logoff using the LOGOUT message
synchronized void remove(int id) {
    // scan the array list until we found the Id
    for(int i = 0; i < al.size(); ++i) {
        ClientThread ct = al.get(i);
        // found it
        if(ct.id == id) {
            al.remove(i);
            return;
        }
    }
}

/*
 *  To run as a console application just open a console window and:
 * > java Server
 * > java Server portNumber
 * If the port number is not specified 1500 is used
 */
public static void main(String[] args) {
    // start server on port 1500 unless a PortNumber is specified
    int portNumber = 1500;
    switch(args.length) {
        case 1:
            try {
                portNumber = Integer.parseInt(args[0]);
            }
            catch(Exception e) {
                System.out.println("Invalid port number.");
                System.out.println("Usage is: > java Server [portNumber]");
                return;
            }
        case 0:
            break;
        default:
            System.out.println("Usage is: > java Server [portNumber]");
            return;

    }
    // create a server object and start it
    Server server = new Server(portNumber);
    server.start();
}

/** One instance of this thread will run for each client */
class ClientThread extends Thread {
    // the socket where to listen/talk
    Socket socket;
    ObjectInputStream sInput;
    ObjectOutputStream sOutput;
    // my unique id (easier for deconnection)
    int id;
    // the Username of the Client
    String username;
    // the date I connect
    String date;

    // Constructore
    ClientThread(Socket socket) {
        // a unique id
        id = ++uniqueId;
        this.socket = socket;
        /* Creating both Data Stream */
        System.out.println("Thread trying to create Object Input/Output Streams");
        try
        {
            // create output first
            sOutput = new ObjectOutputStream(socket.getOutputStream());
            sInput  = new ObjectInputStream(socket.getInputStream());
            // read the username
            username = (String) sInput.readObject();
            display(username + " just connected.");
        }
        catch (IOException e) {
            display("Exception creating new Input/output Streams: " + e);
            return;
        }
        // have to catch ClassNotFoundException
        // but I read a String, I am sure it will work
        catch (ClassNotFoundException e) {
        }
        date = new Date().toString() + "\n";
    }

// try to close everything
    private void close() {
        // try to close the connection
        try {
            if(sOutput != null) sOutput.close();
        }
        catch(Exception e) {}
        try {
            if(sInput != null) sInput.close();
        }
        catch(Exception e) {};
        try {
            if(socket != null) socket.close();
        }
        catch (Exception e) {}
    }

    /*
     * Write a String to the Client output stream
     */
    private boolean writeMsg(String msg) {
        // if Client is still connected send the message to it
        if(!socket.isConnected()) {
            close();
            return false;
        }
        // write the message to the stream
        try {
            sOutput.writeObject(msg);
        }
        // if an error occurs, do not abort just inform the user
        catch(IOException e) {
            display("Error sending message to " + username);
            display(e.toString());
        }
        return true;
    }
}
} 
```

现在我正在尝试让登录 iphone 客户端，通过简单的 NSString 消息发送，这就是我在 iphone 客户端中所做的：

```
CFReadStreamRef readStream;
CFWriteStreamRef writeStream;
CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)@"localhost", 1500, &readStream, &writeStream);

inputStream = (NSInputStream *)readStream;
outputStream = (NSOutputStream *)writeStream;
[inputStream setDelegate:self];
[outputStream setDelegate:self];
[inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[inputStream open];
[outputStream open]; 
```

只有这行代码我可以连接到 Java 服务器，并在服务器中我在终端中收到：

```
Thread trying to create Object Input/Output Streams 
```

所以它与服务器连接，然后我试图以这种方式发送用户名：

```
NSString *username  = @"user";
NSData *data = [[NSData alloc] initWithData:[username dataUsingEncoding:NSASCIIStringEncoding]];
[outputStream write:[data bytes] maxLength:[data length]]; 
```

但在服务器终端我收到这个：

```
Exception creating new Input/output Streams: java.io.StreamCorruptedException: invalid stream header: 69616D3A 
```

我也尝试过以这种方式发送消息：

```
NSData *_data=[username dataUsingEncoding:NSUTF8StringEncoding]; 
int data_len = [_data length];
uint8_t *readBytes = (uint8_t *)[_data bytes];
int byteIndex=0;
unsigned int len=0;
while (TRUE) {
len = ((data_len - byteIndex >= 40960) ? 40960 : (data_len-byteIndex));
if(len==0)
break;
uint8_t buf[len]; 
(void)memcpy(buf, readBytes, len);
len = [outputStream write:(const uint8_t *)buf maxLength:len]; byteIndex += len;
readBytes += len; 
} 
```

但也以这种方式我收到相同的异常，我如何将消息发送到 java 服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:04:29.820

对您的代码没有具体帮助，但请考虑使用 AFNetwork。（在 github 上）网络总是很困难，而且这个框架真是太棒了。

啊..你试图在java端写入对象流..那些使用专有字节格式。您没有以预期的方式发送数据（错误的字节 => 没有 java 对象）

我真的会使用 JSON、xml 或更简单的“协议”版本

# list - 从列表中选择 AZ

> ID：13273321
> 
> 赞同：1
> 
> 时间：2012-11-07T15:55:57.803
> 
> 标签：list, coldfusion, coldfusion-8, alphabetical

我有一个项目列表，并希望让用户可以选择跳转到他们想要的字母。

例如，屏幕顶部的字母 AZ，当用户单击 B 时，它会将它们带到列表中第一项以 B 开头的部分。

有没有办法使用 ColdFusion 做到这一点？

我的列表是使用查询填充的。

```
<table border="1"> 
  <tr> 
    <th>Names</th> 
    <th>Other Stuff</th> 
  </tr> 

<cfoutput query="getnames"> 
  <tr> 
    <td> 
      <li>#getnames.names#</li> 
    </td> 
    <td> 
    <li>#getnames.otherstuff#</li> 
    </td> 
  </tr> 
</cfoutput>
</table> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T16:08:11.053

您将使用命名锚点跳转到页面中的某个位置。假设你跳到一个人的姓氏。

```
<cfset letters = "A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z">
<cfoutput>
    <cfloop list="#letters#" index="i">
        <a href="###i#">#i#</a>&nbsp;
    </cfloop>
</cfoutput>

<cfset currentLetter = left(yourQuery.lastName,1)>
<cfoutput query = "yourQuery">
    <cfif currentLetter neq left(yourQuery.lastName,1)>
        <cfset currentLetter = left(yourQuery.lastName,1)>
        <a name = "#currentLetter#" />
    </cfif>
    #yourQuery.lastName#<br />
</cfoutput> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T15:59:51.993

使用锚。在您的列表中，为第一个带有起始字母的项目提供一个 ID，如下所示：

```
<li id="letter-a">Apple</li> 
```

然后在您的字母列表中链接到它：

```
<a href="#letter-a">A</a> 
```

（如果每个字母都有标题，请将 ID 提供给这些字母。）

# eventbrite - Evenbrite 的最大字段长度是多少？

> ID：13273322
> 
> 赞同：3
> 
> 时间：2012-11-07T15:56:01.547
> 
> 标签：eventbrite

我们正在将 Evenbrite 数据（通过 API）导出到第三方系统。为了使第三方系统尽可能高效，了解标准 Eventbrite 字段（例如附属公司、支付金额、公司等）的最大字段长度是有用的。哪里有清单吗？（或者它们都是 255 个字符？）。我已经看过了，但到目前为止还没有找到任何东西。

提前干杯！

# linq - linq orderby 集合中的第一项

> ID：13273325
> 
> 赞同：0
> 
> 时间：2012-11-07T15:56:06.383
> 
> 标签：linq, entity-framework, sorting

您如何对实体内的集合执行 OrderBy？

例如，这按名称（字符串）对客户进行排序

```
entities.Customers.OrderBy(c => c.Name) ... 
```

如果 Customer 有一个 Orders 属性，它是 Order 实体的集合，并且出于某种原因您想对 Customer 进行排序（比如说按订单日期），您可以这样做吗？

```
entities.Customers.OrderBy(c => c.Orders.?) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:59:07.420

不清楚如何对没有订单的客户进行排序，所以

```
var query = entities.Customers
                    .Where(c => c.Order.Any())
                    .OrderBy(c => c.Orders.FirstOrDefault().Date) 
```

# android - Android绑定服务不起作用

> ID：13273332
> 
> 赞同：3
> 
> 时间：2012-11-07T15:56:18.643
> 
> 标签：android, service, bind, aidl

我有一个问题`bindService()`。我正在尝试在构造函数中进行绑定，提供一个包含两个 parcleable extras 的 Intent。正在调用构造函数，`onResume()`并且服务在其`onBind()`方法中解析两个额外内容，并可能`null`作为解析的结果返回。

当我第一次运行应用程序（通过在 Eclipse 中运行）时，绑定（预期）被服务拒绝：服务的`onBind()`方法被调用并返回`null`。但是，该`bindService()`方法在应用程序端返回`true`（它不应该返回，因为绑定没有通过！）。

当我尝试以下操作时，这会变得更成问题：我按下 HOME 按钮并再次启动应用程序（因此它`onResume()`再次运行并且应用程序再次尝试绑定到服务）。这次服务`onBind()`似乎甚至没有运行！但应用程序`bindService()`仍然返回`true`！

下面是一些示例代码，可以帮助您理解我的问题。

应用端：

```
// activity's onResume()
@Override
public void onResume() {
    super.onResume();
    var = new Constructor(this);
}

// the constructor
public Constructor(Context context) {
    final Intent bindIntent = new Intent("test");

    bindIntent.putExtra("extra1",extra_A);
    bindIntent.putExtra("extra2",extra_B);

    isBound = context.bindService(bindIntent, connection, Context.BIND_ADJUST_WITH_ACTIVITY);

    log("tried to bind... isBound="+isBound);
} 
```

服务端：

```
private MyAIDLService service = null;   

@Override
public void onCreate() {
    service = new MyAIDLService(getContentResolver());
}

@Override
public IBinder onBind(final Intent intent) {
    log("onBind() called");     

    if (intent.getAction().equals("test") {
        ExtraObj extra_A = intent.getParcelableExtra("extra1");
        ExtraObj extra_B = intent.getParcelableExtra("extra2");

        if (parse(extra_A,extra_B))
            return service;
        else {
            log("rejected binding");
            return null;
        }

     }
} 
```

`ServiceConnection`我使用的是以下方法`onServiceConnected()`：

```
@Override
public void onServiceConnected(final ComponentName name, final IBinder service) {
    log("onServiceConnected(): successfully connected to the service!");

    this.service = MyAIDLService.asInterface(service);
} 
```

所以，我从来没有看到“成功连接到服务！” 日志。我第一次运行应用程序（通过 Eclipse）我得到“拒绝绑定”日志以及“isBound = true”，但从那里我只得到“isBound = true”，“拒绝绑定”没有不要再出现了。

我怀疑这可能与 Android 识别成功绑定的可能性有关，即使我强行拒绝也是如此。理想情况下，我也可以强制“取消绑定”，但这是不可能的：我怀疑这是因为，当我杀死应用程序时，我得到了一个位于`onUnbind()`服务方法中的日志（即使应该有首先没有约束力！）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T20:48:22.980

有同样的问题，但意识到我的服务实际上并没有启动。也许尝试将“Context.BIND_AUTO_CREATE”添加到标志中，这将导致服务被创建和启动。我不相信 Context.BIND_ADJUST_WITH_ACTIVITY 会启动它，因此可能不会调用 onServiceConnected （即使 bindService() 调用返回 true，它也不适合我）：

```
 isBound = context.bindService(bindIntent, connection,
          Context.BIND_ADJUST_WITH_ACTIVITY | Context.BIND_AUTO_CREATE); 
```

# c# - 比较两个表 SQLSE

> ID：13273333
> 
> 赞同：0
> 
> 时间：2012-11-07T15:56:24.543
> 
> 标签：c#, sql, sql-server

我想知道是否可以使用 C# 和 SQLSE 比较一个数据库中两个不同表中的两列。如果两个表的数据顺序相同，我可以说这两个表是匹配的；否则，不匹配。

// 更多信息

我想比较两列具有重复值的两列值来自两名患者的实际就诊组合，我想检查他们是否在同一日期访问医院，并合理安排每 5 次组合去比较匹配我想比较整个表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:24:26.650

据我了解（否则请添加更多信息）：

```
SELECT ColumnA, ColumnB, ColumnC FROM Table1 WHERE ColumnC IN (SELECT ColumnC FROM Table2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:19:19.473

假设您要比较两个表的主键列中的数据*；*您可以执行以下操作，如果 CNT 大于 1，则它们不匹配：

```
SELECT COUNT(*) CNT
FROM 
        X
        FULL OUTER JOIN Y
            ON
            X.primaryKeyColumn = Y.primaryKeyColumn 
WHERE 
        X.otherColumn IS NULL 
        OR 
        Y.otherColumn IS NULL 
```

你的问题有点含糊。你似乎很关心`ORDER`。您认为以下两列是否匹配？：

![在此处输入图像描述](../Images/2bf6f76228d67c87fba958f23282c57a.png)

# vb.net - 简单的 Newtonsoft.Json 示例在 VB.Net 中读取文件/循环数据

> ID：13273337
> 
> 赞同：1
> 
> 时间：2012-11-07T15:56:43.900
> 
> 标签：vb.net, file-io, json.net

我想要一个打开 Json 文件并使用 VB.Net 循环使用 JSon.Net 的值的简单示例

这是简单的Json：

```
{
    root: [
        {
            "__type": "BannerElement",
            "Id": 1,
            "Title": "Politics",
            "Text": "Some Text",
            "ImageFile": "/Religion-in-Politics--DM1.1.jpg",
            "ReadMoreUrl": "http://google.com",
            "SortOrder": 0,
            "Disabled": false
        },
        {
            "__type": "BannerElement",
            "Id": 2,
            "Title": "God",
            "Text": "Some Text",
             "ImageFile": "/Religion-in-Politics--DM1.1.jpg",
            "ReadMoreUrl": "http://google.com",         
            "SortOrder": 1,
            "Disabled": false
        }
    ]
} 
```

我似乎在互联网/谷歌上找不到任何例子......

这是我到目前为止所拥有的......

```
strJSonPath = Replace(Replace(String.Format("{0}/json/slides.js", ConfigurationManager.AppSettings("APPhysicalPath")), "\", "/"), "//", "/")
                Dim strJson As String = File.ReadAllText(strJSonPath)
                Dim jobj As JObject = JObject.Parse(strJson)
                Dim arrJArray As JArray = jobj("root") 
```

# mysql - 在 MYSql 中替换换行符不起作用

> ID：13273343
> 
> 赞同：34
> 
> 时间：2012-11-07T15:56:54.460
> 
> 标签：mysql, sql

我执行了以下查询，由于某种原因它没有替换数据库中的换行符。它说 Rows match 1 but no change 。有什么问题？

```
mysql> UPDATE aboutme SET abouttext=REPLACE(abouttext,'\\n','') WHERE userid='5099a95cd944b8.22468149';
Query OK, 0 rows affected (0.00 sec)
Rows matched: 1  Changed: 0  Warnings: 0 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-07T16:01:01.617

`\n`您可以使用, not匹配换行符`\\n`。

代码：

```
 UPDATE aboutme 
 SET abouttext=REPLACE(abouttext,'\n','') 
 WHERE userid='5099a95cd944b8.22468149'; 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-11-20T17:08:13.773

如果`\n`在我的情况下不起作用，则以下工作`\r\n`

```
UPDATE aboutme 
SET abouttext=REPLACE(abouttext,'\r\n','') 
WHERE userid='5099a95cd944b8.22468149'; 
```

就我而言，它是一个 Web 应用程序。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-09-26T12:42:09.307

你认为它包含`\n`，但它有`\r`。

```
update [Table] set [column]=replace(convert([column] using utf8) ,'\r',''); 
```

在你的情况下：

```
update aboutme set abouttext=replace(convert(abouttext using utf8) ,'\r',''); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T16:09:29.520

这就是发生的事情

```
mysql> mysql> select * from t1 limit 3;
+----------+------------+-----------+---------------------+
| actor_id | first_name | last_name | last_update         |
+----------+------------+-----------+---------------------+
|        1 | PENELOPE   | GUINESS   | 2006-02-15 04:34:33 |
|        2 | NICK       | WAHLBERG  | 2006-02-15 04:34:33 |
|        3 | ED         | CHASE     | 2006-02-15 04:34:33 |
+----------+------------+-----------+---------------------+
3 rows in set (0.00 sec)

mysql> update t1 set first_name=replace(first_name,'abc','') where first_name='ed';
Query OK, 0 rows affected (0.00 sec)
Rows matched: 10  Changed: 0  Warnings: 0

mysql> select * from t1 limit 3;
+----------+------------+-----------+---------------------+
| actor_id | first_name | last_name | last_update         |
+----------+------------+-----------+---------------------+
|        1 | PENELOPE   | GUINESS   | 2006-02-15 04:34:33 |
|        2 | NICK       | WAHLBERG  | 2006-02-15 04:34:33 |
|        3 | ED         | CHASE     | 2006-02-15 04:34:33 |
+----------+------------+-----------+---------------------+
3 rows in set (0.00 sec)

mysql> update t1 set first_name=replace(first_name,'ED','EDD') where first_name='ed';
Query OK, 10 rows affected (0.00 sec)
Rows matched: 10  Changed: 10  Warnings: 0

mysql> select * from t1 limit 3;
+----------+------------+-----------+---------------------+
| actor_id | first_name | last_name | last_update         |
+----------+------------+-----------+---------------------+
|        1 | PENELOPE   | GUINESS   | 2006-02-15 04:34:33 |
|        2 | NICK       | WAHLBERG  | 2006-02-15 04:34:33 |
|        3 | EDD        | CHASE     | 2006-02-15 04:34:33 |
+----------+------------+-----------+---------------------+

3 rows in set (0.00 sec) 
```

我的意思是它工作的 where 条件就是为什么你有“匹配的行：1”但是你的替换找不到`\\n`替换它，这就是为什么要`changed: 0`检查你的表数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-10T08:56:44.827

REPLACE 函数区分大小写，我认为它属于 MySql 服务器版本

description=REPLACE(description, 'Videosite', 'video.5la.net') 与 description=REPLACE(description, 'VideoSite', 'video.5la.net') 的结果不同

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-27T13:36:25.610

尝试这样的事情：

```
REPLACE(REPLACE(text, CHAR(92), '#'), '#n', ' ') 
```

# jquery - JQuery UI 验证不显示 Grails？

> ID：13273344
> 
> 赞同：0
> 
> 时间：2012-11-07T15:57:01.000
> 
> 标签：jquery, grails, user-interface, validation

我一直在研究 Grails 应用程序，最近想使用 JQuery UI 验证插件添加客户端验证。我按照以下步骤这样做：

1.  运行这个命令：**grails install-plugin jquery-validation-ui**
2.  将此添加到视图中：`<r:require modules="jquery-validate, jquery-ui" />`
3.  我也试过这个：`<r:require modules="jquery-validation-ui" />`

一旦运行，我还检查了视图，可以看到所需的 JavaScript 文件已使用资源标签附加到视图，但是没有显示错误，这看起来很奇怪，因为如果我将此代码添加到视图中它可以工作：

```
<g:hasErrors bean="${modelInstance}">
    <div class="alert error">
        <g:renderErrors bean="${modelInstance}" as="list" />
    </div>
</g:hasErrors> 
```

下面是插件添加到**config**的代码：

```
// Added by the JQuery Validation UI plugin:
jqueryValidationUi {
    errorClass = 'error'
    validClass = 'valid'
    onsubmit = true
    renderErrorsOnTop = false

    qTip {
        packed = true
      classes = 'ui-tooltip-red ui-tooltip-shadow ui-tooltip-rounded'  
    }

    /*
      Grails constraints to JQuery Validation rules mapping for client side validation.
      Constraint not found in the ConstraintsMap will trigger remote AJAX validation.
    */
    StringConstraintsMap = [
        blank:'required', // inverse: blank=false, required=true
        creditCard:'creditcard',
        email:'email',
        inList:'inList',
        minSize:'minlength',
        maxSize:'maxlength',
        size:'rangelength',
        matches:'matches',
        notEqual:'notEqual',
        url:'url',
        nullable:'required',
        unique:'unique',
        validator:'validator'
    ]

    // Long, Integer, Short, Float, Double, BigInteger, BigDecimal
    NumberConstraintsMap = [
        min:'min',
        max:'max',
        range:'range',
        notEqual:'notEqual',
        nullable:'required',
        inList:'inList',
        unique:'unique',
        validator:'validator'
    ]

    CollectionConstraintsMap = [
        minSize:'minlength',
        maxSize:'maxlength',
        size:'rangelength',
        nullable:'required',
        validator:'validator'
    ]

    DateConstraintsMap = [
        min:'minDate',
        max:'maxDate',
        range:'rangeDate',
        notEqual:'notEqual',
        nullable:'required',
        inList:'inList',
        unique:'unique',
        validator:'validator'
    ]

    ObjectConstraintsMap = [
        nullable:'required',
        validator:'validator'
    ]

    CustomConstraintsMap = [
        phone:'true', // International phone number validation
        phoneUS:'true',
        alphanumeric:'true',
        letterswithbasicpunc:'true',
    lettersonly:'true'
    ]   
} 
```

有人可以建议是否需要采取一些附加步骤才能在客户端进行验证？我还包含了我要验证的文本框之一的示例：

```
<tr class="prop">
            <td valign="top" class="name">
            <label for="name">Name</label>
            </td>
            <td>
            <g:textField id="name" name='name' bean="${modelInstance}" value="${name}"
                           size='40'/>
            </td>
</tr> 
```

提前致谢

# xml - 使用 Perl 写入 xml 时遇到问题

> ID：13273345
> 
> 赞同：0
> 
> 时间：2012-11-07T15:57:10.610
> 
> 标签：xml, perl, compiler-errors, xmlwriter

您可以在下面找到我正在编写的脚本。我的问题在脚本下方。

```
use XML::Writer;
use IO;

@sortedPLATFORMS = qw(win32_x86 win64_x64 linux_x86 linux_x64 solaris_sparc solaris_sparcv9 aix_rs6000 aix_rs6000_64 hpux_pa-risc hpux_ia64);
@STARTS = qw(wdf_22_00 wdf_23_00 wdf_00_00 wdf_01_00 wdf_02_00);

my @waitFors;

my $thisPlatform;
my $thisMachine;
my $thisTask;
my $thisBuild;
my $thisCMD;
my $thisWaitFor;

foreach my $start(@STARTS)
{   
    my $jobFile = "jobs/$start.txt";
    my $doc = new IO::File(">$start.xml", 'w');
    my $writer = new XML::Writer(OUTPUT => $doc) or die "Cannot open file";
    $writer->xmlDecl("UTF-8"); #XML declaration
    $writer->startTag("$start");

    if(open(JOB_FILE,$jobFile))
    {
    while(<JOB_FILE>)
    {
        chomp;
        s-^\s+$--;
        next unless($_);
        next if(/^\;/);
        next if(/\[config\]/);
        next if(/event_dir\s+\=\s+(.+?)$/);

        if(/\[(.+?)\]/)
        {
            getInfos();
        }
        elsif(/^\s+waitfor\s+\=\s+(.+?)$/)
        {
            $thisWaitFor = $1;
            push(@waitFors, "$thisWaitFor");
        }
        elsif(/^\s+command\s+\=\s+(.+?)$/)
        {
            $thisCMD = $1;
            writeXML();
            @waitFors = ();
        }       
    }
}
else
{
    print "something is wrong";
}

$writer->endTag();
    $writer->end();
    $doc->close();
close JOB_FILE;
} 
```

我得到的错误是：

```
 Can't call method "characters" on an undefined value at createMachineList.pl
 line 96, <JOB_FILE> line 13. 
```

其中方法是来自sub`"characters"`的`$writer->characters("\n\n");`一行。`writeXML()`

我知道有一个未定义的值传递给`writeXML()`但我不明白为什么。

有人可以对这个问题有所了解吗？

谢谢你，sSmacKk

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T16:13:36.953

您`my $writer`在循环内声明。该函数在循环外声明。因此，该函数无法访问该变量。要么将其作为参数传递，要么将其设为全局（不推荐）。你在使用`strict`和`warnings`吗？

# javascript - 如何使用javascript将类名作为变量传递

> ID：13273348
> 
> 赞同：7
> 
> 时间：2012-11-07T15:57:18.987
> 
> 标签：javascript

如何使用 javascript 将类名作为变量传递？

假设我有类 Person。

我想将类的名称传递给一个函数，以便该函数可以调用该类。

所以函数是

```
function openClass(name) 
```

我想通过

```
openClass('person') 
```

这样openClass就可以调用类人

例如

```
function openClass(name)
{
    return new name() // here I want this line to actually 
                      // call the class "Person" if that is 
                      // what is passed in as a name parameter,

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T16:00:01.090

从技术上讲，JavaScript 中没有类。尽管许多第三方库确实在 JavaScript 之上创建了一个类系统。

“类”通常是一个构造函数。因此，如果您有函数的名称，则只需将其从全局范围中挖掘出来。假设函数是全局定义的：

```
var Constructor = window[name];
return new Constructor(); 
```

如果您的函数实际上是在 say 中定义的`my.namespace.Person`，那么它会更复杂一些，但仍然是相同的总体思路。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T16:00:32.627

你可以做

```
function openClass(name) {
    return new window[name]();
} 
```

[演示](http://dystroy.org/stackoverflow/newPerson.html)（打开控制台）

当然，如果你没有将你的类声明为一个全局函数，而是在一个特定的对象或数组中，只需用这个对象或数组替换 window 即可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T16:02:37.997

您可以只传递该类的构造函数。所以如果类是Person，它将有一个构造函数

```
var Person = function(){
    //...
}

you can pass that in to getClass as an argument

var getClass = function(constructor){
    return new constructor()
};

var newObject = getClass(Person); 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-07T15:59:48.277

只需调用`openClass(Person)`.

这会将`Person`函数传递给`openClass`，在那里可以正常调用它。

如果您确实*需要*将其作为字符串传递，则可以`Person`按名称查找函数：

```
window[name] 
```

# data-annotations - EntityFramework 5.0 变量数据注释

> ID：13273349
> 
> 赞同：1
> 
> 时间：2012-11-07T15:57:22.323
> 
> 标签：data-annotations, entity-framework-5

我正在使用从数据库示例加载数据的 DisplayText：代码简历：

```
public class AtributosInModels : DisplayNameAttribute
{
    string displayName;
    private static int lenght;

    public static int Lenght
    {
        get { return lenght; }
        set { lenght = value; }
    }

    vw_UsuarioPerfilAtributoRepository vw_usuarioPerfilAtributoRepository = new vw_UsuarioPerfilAtributoRepository();

    public AtributosInModels(string key) 
    {

        _key = key;

    }

    public override string DisplayName
    {
        get
        {
            Func<vw_UsuarioPerfilAtributo, bool> expressionPerfil = Perf => Perf.NomeAtributo == _key;
            var entity = vw_usuarioPerfilAtributoRepository.GetSingle(expressionPerfil);

            if (entity.Tamanho!=null)
            lenght = entity.Tamanho.Value;

            try { displayName = entity.NomeLabel; }
            catch (Exception) { displayName = null; }
            return string.IsNullOrEmpty(_key) ? "" : displayName;
        }
    }

    public string _key { get; set; }
} 
```

}

```
 [AtributosInModels("NomeUsuario")]
    [MaxLength(AtributosInModels.Lenght)]
    public string NomeUsuario { get; set; } 
```

如果代码很乱，我会放满**

现在我想从数据库中加载 Lenght、DataType、Permission、DisplayFormat。但是模型类不能操纵变量，我正在尝试使用静态方法

```
[MaxLength(AtributosInModels.Lenght)] 
```

错误 5 属性参数必须是属性参数类型的常量表达式、typeof 表达式或数组创建表达式

失败的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:07:59.833

属性参数必须在编译时已知。因此它必须是一个常数值。

# sql - 在 SQL 中拆分长字符串

> ID：13273350
> 
> 赞同：0
> 
> 时间：2012-11-07T15:57:28.013
> 
> 标签：sql, sql-server-2008, user-defined-functions

此处建议的内联解决方案：[如何拆分字符串以便可以访问项目 x？](https://stackoverflow.com/questions/2647/split-string-in-sql)由于递归深度的限制（并且您不能更改 UDF 内的限制），vzczc 仅适用于包含少于 100 个元素的字符串。

还有其他分割长字符串的方法吗？我一直在使用的 UDF（不是内联的）非常慢：

```
CREATE FUNCTION [dbo].[fn_ParseDelimitedStrings](@String nvarchar(MAX), @Delimiter char(1))
RETURNS @Values TABLE
(
 RowId int Not Null IDENTITY(1,1) PRIMARY KEY
,Value nvarchar(255) Not Null
)
AS
BEGIN
    DECLARE  @startPos smallint
        ,@endPos smallint

    IF (@String = '')
    RETURN

    IF (RIGHT(@String, 1) != @Delimiter)
        SET @String = @String + @Delimiter
    SET @startPos = 1
    SET @endPos = CharIndex(@Delimiter, @String)
    WHILE @endPos > 0
    BEGIN
        INSERT @Values(Value)
        SELECT LTRIM(RTRIM(SUBSTRING(@String, @startPos, @endPos - @startPos)))
        -- remove the delimiter just used
        SET @String = STUFF(@String, @endPos, 1, '')
        -- move string pointer to next delimiter
        SET @startPos = @endPos
        SET @endPos = CHARINDEX(@Delimiter, @String)
    END
    RETURN
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:42:29.920

您可以`MAXRECURSION`在调用函数时使用提示来消除只能拆分少于 100 个元素的字符串的问题，因此使用您使用的[链接](https://stackoverflow.com/a/2703/1048425)中的示例可以调用：

```
-- CREATE A STRING TO SPLIT WITH OVER 100 DELIMITERS
DECLARE @s VARCHAR(1000) = 'a'

SELECT  @s = @s + ',a'
FROM    master..spt_values
WHERE   type= 'p'
AND     number BETWEEN 1 AND 150

--SPLIT LONG STRING
SELECT  *
FROM    dbo.splitString(@s, ',')
OPTION (MAXRECURSION 0) -- NO LIMIT 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:05:39.117

不确定这是否会为您提供与您自己的示例相同的性能（可能会），但请尝试我正在使用的一个：

```
 CREATE FUNCTION [dbo].[UDF_Split]
 (
     @InputParam VARCHAR(4000),
     @delimiter CHAR(1)
 ) 
 RETURNS @tSplit TABLE (
 ItemValue VARCHAR(255)
 ) 
 AS

 BEGIN

-- Declares --
--------------

-- Variables.
DECLARE @ItemValue VARCHAR(255)

-- Initialize --
----------------

-- Make sure it has a trailing comma.
IF RIGHT(@InputParam, 1) <> @delimiter SELECT @InputParam = @InputParam + @delimiter 

-- Put values separated by delimiter in a string to a table as records.
WHILE CHARINDEX(@delimiter, @InputParam) <> 0
BEGIN 
    SELECT @ItemValue = CONVERT(VARCHAR(255), SUBSTRING(@InputParam, 1, CHARINDEX(@delimiter , @InputParam) -1))

    if DATALENGTH(@ItemValue) = 0
        SELECT @InputParam = SUBSTRING(@InputParam,2, len(@InputParam) - 1)
    else
    begin
        SELECT @InputParam = SUBSTRING(@InputParam, DATALENGTH(RTRIM(@InputParam)) - ((DATALENGTH(RTRIM(@InputParam)) - DATALENGTH(RTRIM(@ItemValue))) - 2), 4000) 

        INSERT  @tSplit 
        SELECT  CONVERT(VARCHAR(255), @ItemValue)
    end     

END 

-- Return --
------------
RETURN
END 
```

# sql-server - 如何使用 SSIS 包处理 XML 文件和更新表？

> ID：13273356
> 
> 赞同：0
> 
> 时间：2012-11-07T15:57:46.740
> 
> 标签：sql-server, ssis

我有两个 XML 文件`accepted.XML`，`rejected.XML`它们具有相似的结构。这些文件的节点之一是**CLIENT_CLAIM_NUM**。

如果`CLIENT_CLAIM_NUM`来自accepted.xml，我需要更新一个具有相应状态的SQL Server 表作为接受。被拒绝的.xml 也是如此。我接受的.XML 具有以下结构：

### Accepted.xml 文件布局：

```
 <CLAIM> 
      <CLIENT_CLAIM_NUM>1</CLIENT_CLAIM_NUM> 
      <Vendor_ASSIGNED_CLAIM_NUM>434772</Vendor_ASSIGNED_CLAIM_NUM> 
      <LASTNAME>#########</LASTNAME> 
      <Date>2012-01-06T00:00:00</Date>
 </CLAIM> 
```

另外，如何通过邮件发送每个文件中的索赔编号计数？

我使用数据流任务和 XML 源来解析 XML。它将节点作为列提供，但我如何将其存储在变量中或使用这些列更新表。我不能使用暂存表，因为我希望将所有这些都放在一个包中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T01:29:53.313

要更新表，请将输出数据流路径连接到 OLE DB 命令转换。构造一个参数化的更新语句，例如

更新 MyTable SET Claim_Num = ?

然后在“列映射”选项卡上映射您的列（在 OLE DB 命令转换中）。您可以根据需要添加其他参数并将它们映射到其他列。

要将值存储在变量中，首先定义一个数据类型 = 对象的变量。然后将输出数据流路径连接到记录集目标，并指定该变量。请注意，这实际上是所有行和列的表。

要获取特定单元格，接下来将 Foreach 循环容器添加到您的控制流（现有数据流任务的下游）。将枚举器设置为 Foreach ADO 枚举器。将您的变量指定为 ADO 对象源变量。然后在变量映射选项卡上为输出中的每一列定义新变量。现在，Foreach 循环容器中的任何任务都将在循环的每次迭代中获得分配有每行值的变量。

# asp.net - 将图像存储在数据库或硬盘上

> ID：13273371
> 
> 赞同：0
> 
> 时间：2012-11-07T15:58:52.240
> 
> 标签：asp.net, sql-server

我正在开发一个 ASP.NET Web 应用程序，该网站托管在具有大硬盘驱动器（30 GB）的 VDS（虚拟专用服务器）上。用户可以上传图片，目前图片存储在数据库图片列中（SQL server 2008）。将图像作为文件存储在硬盘上而不是保存在数据库中更好吗？每种方法的优缺点是什么？我想每天大约有 100 张图片，所以我想数据库会快速增长，最后我会有一个非常大的 MDF 文件！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:09:32.440

这取决于您的优先事项。对于哪种方法最好，没有一概而论的答案。但是，除非您预见需要为这些图像使用数据库备份，否则存储指向文件系统的指针就足够了。否则，filestream 选项最适合将图像存储在数据库中。

PinalDave 写过关于这个主题的文章，您可能会发现讨论很有趣：http: [//blog.sqlauthority.com/2009/07/13/sql-server-blob-pointer-to-image-image-in-database-filestream-storage /](http://blog.sqlauthority.com/2009/07/13/sql-server-blob-pointer-to-image-image-in-database-filestream-storage/)

# ios - @selector 方法的参数

> ID：13273372
> 
> 赞同：0
> 
> 时间：2012-11-07T15:59:04.050
> 
> 标签：ios, methods, arguments, selector

我有一个带有 NSString 类型参数的方法 @selector。当我编译应用程序时出现此错误

```
No visible @interface for 'UIButton' declares the selector 'addTarget:action:
withObject:forControlEvents 
```

该方法在头文件中声明。这是代码：

```
 -(void)loadDetailListViewController: (NSString *)nameTable{
      //......
  }

 - (MKAnnotationView *)mapView:(MKMapView *)mapview viewForAnnotation:(id 
  <MKAnnotation>)annotation
  {
        //.....

   UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

   [rightButton addTarget:self action: @selector(loadDetailListViewController:) 
     withObject:self.nameTable forControlEvents:UIControlEventTouchUpInside];
    //here the error

        //.....
   } 
```

不知道括号对不对

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T16:09:09.973

该方法不存在。这确实

```
[rightButton addTarget:self action: @selector(loadDetailListViewController:) forControlEvents:UIControlEventTouchUpInside]; 
```

如果您需要将字符串传递给该方法，我建议使用字符串属性对 UIButton 进行子类化，您可以在那里设置它。该按钮在选择器中作为参数传递，因此您可以从那里获取它和字符串：

```
- (void)loadDetailListViewController:(MyCustomButtonClass *)button {

    // access the string from the button

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:06:31.940

UIButton (UIControl) 没有像您使用的那样的签名。去掉`withObject`就好了。您可以考虑删除`tableName`参数，因为它是对象属性并且可以直接读取。

文件：

> *   (void)addTarget:(id)target action:(SEL)action forControlEvents:(UIControlEvents)controlEvents

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T16:07:45.543

试试这个

```
 -(void)loadDetailListViewController: (id)sender{
      //......
  }

 - (MKAnnotationView *)mapView:(MKMapView *)mapview viewForAnnotation:(id 
  <MKAnnotation>)annotation
  {
        //.....

   UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

   [rightButton addTarget:self action: @selector(loadDetailListViewController:) 
     forControlEvents:UIControlEventTouchUpInside];
    //here the error

        //.....
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T16:08:32.307

错误说明编译器找不到`'addTarget:action: withObject:forControlEvents`可以在`UIButton`.

`UIControl`有一个方法`addTarget:action:forControlEvents:`，但没有一个包含“ **withObject:** ”的方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T16:08:39.207

没有这样的方法 addTarget:action: **withObject:** forControlEvents

采用：

```
[rightButton addTarget:self action: @selector(loadDetailListViewController:) forControlEvents:UIControlEventTouchUpInside]; 
```

您不需要将 self.nameTable 传递给此方法，您可以在 loadDetailListViewController 中访问它：就好了

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-07T16:10:22.090

没有像这样的方法：`addTarget:(id)target action:(SEL)action withObject:(id) forControlEvents:(UIControlEvents)controlEvents`

将其更改为：`addTarget:(id)target action:(SEL)action forControlEvents:(UIControlEvents)controlEvents`

请参考：[UIControl 类](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIControl_Class/Reference/Reference.html)

# c# - 为什么我的登录页面不断重新加载，而不尝试进行身份验证？

> ID：13273375
> 
> 赞同：1
> 
> 时间：2012-11-07T15:59:10.157
> 
> 标签：c#, asp.net, asp.net-mvc, login, forms-authentication

在控制器/AccountController.cs 中：

```
public class AccountController : Controller
{
    //
    // GET: /Account/Login
    public ActionResult Login()
    {
        return View();
    }
    ...
} 
```

在 web.config 中：

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/Login" defaultUrl="~/Home/Index" name=".ASPXFORMSAUTH"/>
</authentication>
<authorization>
  <deny users="?"/>
</authorization> 
```

在 Views/Account/Login.aspx 中：

```
<script runat="server" type="text/C#">
    protected void Page_Load(object sender, EventArgs e) {...}
    protected void OnAuthenticate(object sender, AuthenticateEventArgs e) {...}
    protected void OnLoggedIn(object sender, EventArgs e){...}
    protected void OnLoginError(object sender, EventArgs e){...}
</script>

...

<asp:Login ID="login1" runat="server" 
           DestinationPageUrl="~/Views/Home/Index.aspx"
           OnAuthenticate="OnAuthenticate" 
           OnLoggedIn="OnLoggedIn" 
           OnLoginError="OnLoginError">
    ...
    <asp:Button ID="loginButton" runat="server" CommandName="Login1" Text="Login" ValidationGroup="login1" TabIndex="4" />
    ...
</asp:Login> 
```

`Page_Load`被调用，但随后`OnAuthenticate`,`OnLoggedIn`和`OnLoginError`从未被调用。这是为什么？

我正在使用 MVC，单击“登录”按钮后会发生什么我被带回 AccountController。这将返回 Login.aspx 视图，因此登录页面会重新加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:14:12.290

您正在将 Web 表单与 MVC 混合使用——您不能这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:01:00.730

您已将该代码标记为`text/javascript`而不是`text/c#`使用`runat=server`标记。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T16:01:58.227

你有错误的脚本类型应该是 type="text/C#"

**改变**

```
<script runat="server" type="text/javascript"> 
```

**到**

```
<script runat="server" type="text/C#"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T17:45:27.863

我最终使用 Razor 而不是 ASPX 从头开始​​重写所有内容。我不知道如何解决这个问题中的问题，我采取了完全不同的方法。

# android - 我只想设置一次 setOnItemClickListener

> ID：13273381
> 
> 赞同：3
> 
> 时间：2012-11-07T15:59:27.123
> 
> 标签：android, include

我使用“包含”XML。我不想设置每个“活动”setOnItemClickListener。

我的“包含”XML food.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/foot"
    android:layout_width="fill_parent"
    android:layout_height="36dp"
    android:layout_alignParentBottom="true"
    android:background="#292929"
    android:gravity="right|center_vertical"
    android:padding="5dp" >

    <ImageView
        android:id="@+id/imageView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="15dp"
        android:src="@drawable/categories" />
</LinearLayout> 
```

我把他放在哪里

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#595858"
    android:gravity="top" >

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/foot">

    <include
        android:layout_alignParentBottom="true"
        layout="@layout/foot" />

</RelativeLayout> 
```

每次我的活动使用“脚”时，我都会在图像“setOnItemClickListener”上设置

**我只想设置一次 setOnItemClickListener**

谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T16:05:19.983

如果存在具有适当 ID 的图像视图，则使您的所有活动都从将设置侦听器的基活动类继承：

```
public class MyBaseActivity extends Activity {
    public onStart() {
      super.onStart();
      ImageView clickableImageView = (ImageView) findViewById(R.id.imageView3);
      if (clickableImageView!=null) clickableImageView .setOnClickListener(myClickListener);
    }

    private OnClickListener myClickListener = new OnClickListener() {
      // ...
    };
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T16:07:48.490

您必须编写带有`setOnItemClickListener`实现的单独类，然后扩展它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T16:08:44.607

您可以像这样在 xml 中指定 onclick 函数：

```
<ImageView
        android:id="@+id/imageView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="15dp"
        android:src="@drawable/categories"
        android:onClick="callThisOnClick" /> 
```

然后在你的活动中你有

```
public void callThisOnClick(View v){
        // put your onClick code here.
} 
```

您必须记住，android 只会在当前活动中查找 callThisOnclick，因此您必须将其包含在每个使用食物的活动中。

您可以使用扩展活动并具有 callThisOnClick 的基类，然后使用其余活动扩展您的基类。

# jquery-mobile - jquerymobile 1.2 谷歌地图全屏时调整大小

> ID：13273384
> 
> 赞同：1
> 
> 时间：2012-11-07T15:59:34.690
> 
> 标签：jquery-mobile, maps, fullscreen

我在 jquerymobile 中使用谷歌地图。升级到 jqm 1.2 后，地图不会全屏显示（在移动和桌面浏览器中）。但是当我调整浏览器窗口的大小时，它会变成全屏（我希望在第一个屏幕打开时）。

我在互联网上搜索问题并尝试了其中的大多数，但没有一个对我有帮助。

你有什么建议？

编辑：我在使用 jquery.ui.maps 时解决了。重要的是不要在画布样式中使用 width:100% 。而不是在 pagebeforeshow 事件上调整画布大小

```
$('#map').live('pagebeforeshow',function(e,data){
    $('#map_canvas').height($(window).height() - (10 + $('[data-role=header]').height() - $('[data-role=footer]').height()));
}); 
```

```
<div data-role="page" id="map" data-add-back-btn="true" data-fullscreen="true" style="width:100%; height:100%;">
    <div data-role="header" data-position="fixed">                
        <h1 id="mapHeader">Konum</h1>                
        <a href="#menu"  data-role="button" data-icon="grid" class="ui-btn-right" data-theme="e" >Menu</a>                  
    </div>
    <div data-role="content" id="map_content" style="width:100%; height:100%; padding:0;">             
       <div id="map_canvas" style="position:absolute; width:100%; height:100%; min-height:100%;"></div>
    </div>          
</div> 
```

# maven - 使用 Maven 和 CXF 插件从 WSDL 生成 Java 源代码

> ID：13273385
> 
> 赞同：0
> 
> 时间：2012-11-07T15:59:45.427
> 
> 标签：maven, cxf, maven-plugin

我有一个 Maven 项目。pom 的目标是使用`cxf-codegen-plugin`插件从 WSDL 文件生成 Web 服务。

我如何从中生成 Web 服务的来源`pom.xml`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:59:45.427

只需执行 generate-sources 目标：

```
mvn generate-sources 
```

源的目的地在 pom.xml 中指定。默认为 target/cxf

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T17:12:00.293

您还可以使用`maven-source-plugin`生成源：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-source-plugin</artifactId>
    <version>2.1.2</version>
    <executions>
        <execution>
            <id>attach-sources</id>
            <goals>
                <goal>jar</goal>
                <goal>test-jar</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

这将为您的主要应用程序和测试生成源代码。

# java - TestNG：如何不忽略方法级别的@Test(testName)

> ID：13273396
> 
> 赞同：1
> 
> 时间：2012-11-07T15:59:57.277
> 
> 标签：java, methods, annotations, testng, reportng

我正在尝试将 @Test 中的 testName 属性用于我的 ReportNG html 输出。

不幸的是它说：

```
/**
* The name of the test  this test class should be placed in.  This
* attribute is ignore if @Test is not at the class level.
*/
public String testName() default ""; 
```

所以 testName 总是空的。

需要更改什么以不忽略方法级别的此属性？

如果知道这一点很重要，我正在使用 TestNG .xml 套件来运行我的测试。

很高兴任何提示，干杯！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T16:06:22.557

在方法级别指定它是没有意义的，因为测试的名称适用于整个类。

# jquery - 无法使用 css 更改 jQuery 图像滑块的不透明度

> ID：13273401
> 
> 赞同：2
> 
> 时间：2012-11-07T16:00:06.520
> 
> 标签：jquery, css

我正在帮助一个朋友建立一个网站，我们无法更改使用 jQuery 的图像滑块的不透明度。

我们已经尝试`opacity:1;`过`background:rgba(0, 0, 0, 1);`

[http://cafe.cic.hull.ac.uk/~374332/IM_v2_New/HTML/index.html](http://cafe.cic.hull.ac.uk/~374332/IM_v2_New/HTML/index.html)

任何帮助将不胜感激

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:42:01.490

当父容器（在本例中为 div）上的[不透明度](http://www.w3.org/TR/css3-color/#transparency)`#contentBorder`设置为小于`1`任何子容器继承该值并且不能高于父容器时。

一些替代方案：

1.  创建一个 alpha 透明背景图像以在父级上使用，以便获得相同的效果。

2.  在父级上使用[RGBA](http://www.w3.org/TR/css3-color/#rgba-color)或[HSLA](http://www.w3.org/TR/css3-color/#hsla-color)背景颜色（不支持 IE8 及更低版本）

3.  使用不透明度，但在一个空的同级容器上设置不透明度，该容器扩展到内容的高度/宽度

# sql-server - SQLite 的等效项是否有一个 set identity_insert？

> ID：13273403
> 
> 赞同：13
> 
> 时间：2012-11-07T16:00:13.287
> 
> 标签：sql-server, sqlite, auto-increment

在 TSQL 中有

```
SET IDENTITY_INSERT ON; 
```

SQLite 中是否有等效的功能？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-07T16:30:14.483

SQLite 总是允许在主键列中插入一个值；仅当插入的值是`NULL`（显式或省略）时才使用自动生成的值。

有关详细信息，请参阅[文档](http://www.sqlite.org/autoinc.html)。

# java - 将数字转换为二进制，无法修复 0/0 错误

> ID：13273413
> 
> 赞同：0
> 
> 时间：2012-11-07T16:00:44.890
> 
> 标签：java, divide-by-zero

您好，我有一个程序可以成功地将十进制转换为二进制。但是，最后代码将 0 除以 0 会导致最后出现错误消息。这是代码。

```
import java.lang.*; 
import java.util.*;     
public class BinaryConverter {
public static void main (String[] argv) {

    Scanner input = new Scanner (System.in);

    int number = 0;
    int factorOfTwo = 0;

    do {
        System.out.println("Enter the number to convert (0-255): ");
        number = input.nextInt();
    }  while (number< 0 || number > 255);

    System.out.println("The number " + number + " converted to binary is : ");

    for (factorOfTwo = 1; factorOfTwo <= 128; factorOfTwo*=2) {
        if (number / factorOfTwo >= 1){
            System.out.print("1");
            number -= factorOfTwo;
        }
        else System.out.print ("0");
    }

} // end of main
}// end of class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:07:18.223

您收到的错误信息是什么？因为你`factorofTwo`永远不可能`0`。 `for (factorOfTwo = 1; factorOfTwo <= 128; factorOfTwo*=2)`..这里只是增加

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:09:32.370

发布的代码中没有被零除。在该循环中只有一个除法，并且`factorOfTwo`永远不能为 0。

如果您仍然得到除以零错误，请确保您正在运行此代码：

1.  检查编译的类文件是否比源文件更新。

2.  检查已编译的类文件是否位于类路径的第一个位置。

另外，请注意**Aki**的评论。您正在向后创建二进制数。

# javascript - 如何在 jQuery .on 函数中设置事件

> ID：13273415
> 
> 赞同：4
> 
> 时间：2012-11-07T16:00:47.730
> 
> 标签：javascript, jquery, twitter-bootstrap

查看引导库，我看到使用 .on 函数时，
事件是这样编写的：

```
 $(document).on('click.button.data-api', '[data-toggle^=button]', function (e) {
    // some code
  }) 
```

编写事件`click.button.data-api`而不是的目的是`click`什么？
够`click`了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T16:02:46.610

`"button"`和`"data-api"`是[事件名称空间](http://docs.jquery.com/Namespaced_Events)，在事件名称之后用分隔`.`。

当然它只适用于 a `"click"`，但是当引导程序关闭数据 API 时会破坏不相关的代码`.off("click")`。使用命名空间，他们可以调用`.off("click.data-api")`以仅删除属于引导数据 API 的事件。

# c# - 如何获取windows用户名

> ID：13273416
> 
> 赞同：2
> 
> 时间：2012-11-07T16:00:54.130
> 
> 标签：c#, asp.net, vb.net

我正在尝试在 aspx 页面上获取 Windows 用户名。

我尝试了以下方法：

```
<% System.Threading.Thread.CurrentPrincipal = new System.Security.Principal.WindowsPrincipal(System.Security.Principal.WindowsIdentity.GetCurrent()) %>
<%= System.Threading.Thread.CurrentPrincipal.Identity.Name %> 
```

但所做的只是给我*IIS APPPOOL/SBalance* - 这不是 Windows 用户名！

但是，如果我添加以下服务器控件：

```
<asp:LoginName ID="LoginName1" runat="server" /> 
```

这确实成功地预先填充了我的域和用户名。

那么如何在不使用登录控件的情况下在 aspx 页面上将域/用户名作为字符串获取？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T16:02:56.643

如果您使用 Windows 身份验证，您可以通过以下方式获取用户名`User.Identity.Name`

```
string windowsLogin = Page.User.Identity.Name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:04:07.623

您需要在 web.config 中启用模拟

```
<identity impersonate="true" /> 
```

那么你需要在 IIS 中启用 windows 模拟并禁用匿名身份验证

# websphere-portal - 用于访问作为 WAR 文件部署在 Websphere Portal Server 上的 Web 应用程序的 URL

> ID：13273423
> 
> 赞同：0
> 
> 时间：2012-11-07T16:01:19.980
> 
> 标签：websphere-portal

我们已将一个包含 JSP 和 Servlet 作为 .war 文件的简单 Web 应用程序部署到 IBM Websphere Portal Server。但是，我们无法确定用于访问或查看 Web 应用程序的 URL。我们可以使用独立的 Web 应用程序访问 Web 应用程序，还是需要为此创建门户页面。

欢迎任何信息或帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:31:15.237

无论哪种方式，你都可以做到。您可以直接访问它，也可以作为 portlet 访问它。当您将 .war 文件部署到 WAS 控制台时，您必须设置上下文根。上下文根将是用于访问您的 Web 应用程序的 URI 的根。根据它是什么类型的应用程序以及您打算如何使用它，您可能需要使用 XMLAccess 接口将应用程序注册到门户。如果您可以提供您正在使用的 Portal 版本，我可以为您指出相关文档。

以下是 Portal v7 的一些资源： [将 java war 文件部署到 IBM Web Sphere 门户](https://stackoverflow.com/questions/11225680/deploy-java-war-file-to-ibm-web-sphere-portal)

[http://www-10.lotus.com/ldd/portalwiki.nsf/xpDocViewer.xsp?lookupName=IBM+WebSphere+Portal+7+Product+Documentation#action=openDocument&res_title=Export_the_WAR_file_and_install_the_portlet_wp7&content=pdcontent](http://www-10.lotus.com/ldd/portalwiki.nsf/xpDocViewer.xsp?lookupName=IBM+WebSphere+Portal+7+Product+Documentation#action=openDocument&res_title=Export_the_WAR_file_and_install_the_portlet_wp7&content=pdcontent)

# c++ - 我正在将官方 SQLite 源代码添加到我的 C++ 项目并收到链接器错误

> ID：13273424
> 
> 赞同：1
> 
> 时间：2012-11-07T16:01:20.307
> 
> 标签：c++, sqlite, linker

这在我的 C++ 项目中指的是哪种链接错误？我唯一想到的是 SQLite3 标头是项目的一部分。

```
duplicate symbol _main in:
/Users/.../Build/Intermediates/AssetInspector.build/Debug-iphoneos/AssetInspector.build/Objects-normal/armv7/main.o
/Users/.../Build/Intermediates/AssetInspector.build/Debug-iphoneos/AssetInspector.build/Objects-normal/armv7/shell.o
ld: 2 duplicate symbols for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T16:04:29.450

问题是函数 main 是在 main.c 和 shell.c 中定义的。

您应该只链接那些 .c 文件中的一个目标文件，而不是两者

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T16:35:06.307

将 SQLite 合并编译到您的项目中时，*仅*使用该`sqlite3.c`文件。不需要其他文件。（`shell.c`是`sqlite3`命令行工具的源代码。）

# java - Java 黑莓 NullPointerException

> ID：13273432
> 
> 赞同：-2
> 
> 时间：2012-11-07T16:01:55.327
> 
> 标签：java, blackberry, nullpointerexception, runtime-error, runtimeexception

我有一个程序，目前除了显示时间并允许用户按下一个按钮，该按钮将引导他进入另一个屏幕，我将显示一个对话框以显示成功运行（仅供参考，应用程序的名称是 SuperAlarms，我正在使用 Eclipse 插件）。该程序编译得非常好（尽管有一些错误表明某些变量没有被使用）但是一旦我加载程序我得到一个“java.lang.NullPointerException”。

超级警报.java：

```
/*
 * Description:
 *  A convenient alarm clock application that will play a song and provide a "pause" button
 *  to pause the music so it can be continued later
 * Author: Dennis Plotnik
 * Copyright: Standard Intellectual Property Copyright Laws Apply (2012)
 * Version: 1.0
 * Methods used:
 * - Date
 * - Threads
 * - Music Streams
 * - GUI
 *  
 */

package com.galaxy.dennis;

import net.rim.device.api.ui.UiApplication;

/**
 * This class extends the UiApplication class, providing a
 * graphical user interface.
 */
public class SuperAlarms extends UiApplication
{
    /**
     * Entry point for application
     * @param args Command line arguments (not used)
     */ 
    public static void main(String[] args)
    {
        // Create a new instance of the application and make the currently
        // running thread the application's event dispatch thread.
        SuperAlarms theApp = new SuperAlarms();       
        theApp.enterEventDispatcher();
    }

    /**
     * Creates a new SuperAlarms object
     */
    public SuperAlarms()
    {        
        // Push a screen onto the UI stack for rendering.
        pushScreen(new SuperAlarmsMainScreen());
    }    
} 
```

SuperAlarmsMainScreen.java：

```
package com.galaxy.dennis;

import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.FieldChangeListener;
import net.rim.device.api.ui.Font;
import net.rim.device.api.ui.FontFamily;
import net.rim.device.api.ui.Ui;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.ButtonField;
import net.rim.device.api.ui.component.Dialog;
import net.rim.device.api.ui.component.LabelField;
import net.rim.device.api.ui.component.SeparatorField;
import net.rim.device.api.ui.container.HorizontalFieldManager;
import net.rim.device.api.ui.container.MainScreen;

/**
 * A class extending the MainScreen class, which provides default standard
 * behavior for BlackBerry GUI applications.
 */
public final class SuperAlarmsMainScreen extends MainScreen implements FieldChangeListener
{
    private TimeUpdater updater;
    private HorizontalFieldManager hfm_centerTime;
    private Alarm[] alarms;
    private ButtonField bf_newAlarm;
    private GridOrganizer g;
    private FontFamily comicSansMs;
    private Font fnt_title;
    private Font fnt_main;

    //LabelFields
        private LabelField lf_curTime;

    public SuperAlarmsMainScreen()
    {
        //FieldManagers
            hfm_centerTime = new HorizontalFieldManager(Field.FIELD_HCENTER);
            g = new GridOrganizer(0, null);

        //Fonts:
        try {
            comicSansMs = FontFamily.forName("Comic Sans MS");
            fnt_title = comicSansMs.getFont(Font.BOLD, 16, Ui.UNITS_pt);
            fnt_main = comicSansMs.getFont(Font.PLAIN, 12, Ui.UNITS_pt);
        } catch(ClassNotFoundException e) { e.printStackTrace(); }

        //Title:
            setTitle("SuperAlarms");

        //Updater:
            for (int i=0;i<5;i++) alarms[i] = new Alarm(null, null, null, null);
            updater = new TimeUpdater(alarms);
            updater.start();

        //Labelfields:
            lf_curTime = new LabelField(updater.getTime());
            lf_curTime.setFont(fnt_title);
            hfm_centerTime.add(lf_curTime);

            add(hfm_centerTime);
            add(new SeparatorField());

        //Bottom
            bf_newAlarm = new ButtonField("Create New Alarm", ButtonField.CONSUME_CLICK);
            bf_newAlarm.setChangeListener(this);
    }

    public void fieldChanged(Field field, int context) {
        if (field == bf_newAlarm) {
            UiApplication.getUiApplication().pushScreen(new NewAlarmScreen());
        }

    }
} 
```

NewAlarmScreen.java：

```
package com.galaxy.dennis;

import net.rim.device.api.ui.component.Dialog;
import net.rim.device.api.ui.container.MainScreen;

public class NewAlarmScreen extends MainScreen {
    public NewAlarmScreen() {
        Dialog.alert("You clicked that button!");
    }
} 
```

GridOrganizer.java：

```
package com.galaxy.dennis;

import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.component.SeparatorField;
import net.rim.device.api.ui.container.HorizontalFieldManager;
import net.rim.device.api.ui.container.MainScreen;
import net.rim.device.api.ui.container.VerticalFieldManager;

public class GridOrganizer {

    private HorizontalFieldManager[] hfm;
    private VerticalFieldManager[] vfm;
    private int row; 
    private MainScreen screen;

    public GridOrganizer(int row, MainScreen mainscreen) {
        this.row = row;
        this.screen = mainscreen;
        hfm = new HorizontalFieldManager[row];
        for (int i=0;i<row;i++) hfm[i] = new HorizontalFieldManager(Field.USE_ALL_WIDTH);
        vfm = new VerticalFieldManager[row];
        for (int i=0;i<row;i++) vfm[i] = new VerticalFieldManager(Field.USE_ALL_WIDTH);
    }

    public void add(int row, int col, Field obj) {

        switch(col) {
        case 1:
            hfm[row-1].add(obj);
            break;
        case 2:
            vfm[row-1].add(obj);
        }
    }

    public void draw(boolean addLines) {
        for (int i=0;i<this.row;i++) {
            hfm[i].add(vfm[i]);
        }
        for (int i=0;i<this.row;i++) {
            screen.add(hfm[i]);
            if (addLines)
                screen.add(new SeparatorField());
        }

    }
} 
```

TimeUpdater.java：

```
package com.galaxy.dennis;

import java.util.Date;

import net.rim.device.api.i18n.SimpleDateFormat;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.Dialog;

public class TimeUpdater extends Thread {
    private String time = "0:00";
    private int[][] days;
    private Alarm[] alarm;

    public TimeUpdater(Alarm[] alarms) {
        this.alarm = alarms;
        Date date = new Date();
        SimpleDateFormat hours = new SimpleDateFormat("H");
        SimpleDateFormat minutes = new SimpleDateFormat("mm");
        String h = hours.format(date);
        String m = minutes.format(date);
        time = h + ":" + m;
    }

    public void run() {
        UiApplication.getUiApplication().invokeLater(new Runnable() {

            public void run() {
                Date date = new Date();
                SimpleDateFormat hours = new SimpleDateFormat("H");
                SimpleDateFormat minutes = new SimpleDateFormat("mm");
                String h = hours.format(date);
                String m = minutes.format(date);
                time = h + ":" + m;
                for (int i=0;i<5;i++) {
                    if (alarm[i].getTime() == time) Dialog.alert("Alarm: " + alarm[i].getName() + "!");
                }
            }
        }, time(30), true);
    }

    public String getTime() {
        return time;
    }

    public long time(int s) {
        return s*1000;
    }
} 
```

Alarm.java：包com.galaxy.dennis；

```
public class Alarm {
    private String time;
    private String song;
    private String name;
    private int[] days;

public Alarm(String t, String s, String n, int[] d) {
    this.time = t;
    this.song = s;
    this.name = n;
    this.days = d;      
}

public void setTime(String str) {
    this.time = str;
}

public void setSong(String str) {
    this.song= str;
}

public void setName(String str) {
    this.name = str;
}

public void setDays(int[] d) {
    this.days = d;
}

public String getTime() {
    return this.time;
}

public String getSong() {
    return this.song;
}

public String getName() {
    return this.name;
}

public int[] getDays() {
    return this.days;
}
} 
```

为什么我会收到此错误？

**编辑**：编译消息：

```
 Packaging project SuperAlarms B:\Apps\Eclipse\plugins\net.rim.ejde.componentpack6.0.0_6.0.0.43\components\bin\rapc.exe
    -convertpng -quiet codename=deliverables\Standard\6.0.0\SuperAlarms -sourceroot=B:\Programming\Java\BlackBerry\SuperAlarms\src;B:\Programming\Java\BlackBerry\SuperAlarms\res
    -import=B:\Apps\Eclipse\plugins\net.rim.ejde.componentpack6.0.0_6.0.0.43\components\lib\net_rim_api.jar deliverables\Standard\6.0.0\SuperAlarms.rapc B:\Programming\Java\BlackBerry\SuperAlarms\bin 
B:\Programming\Java\BlackBerry\SuperAlarms\src\com\galaxy\dennis\Alarm.java:9: Warning!: member data 'String song' not required in class: com.galaxy.dennis.Alarm 
B:\Programming\Java\BlackBerry\SuperAlarms\src\com\galaxy\dennis\Alarm.java:9: Warning!: member data 'int[] days' not required in class: com.galaxy.dennis.Alarm 
B:\Programming\Java\BlackBerry\SuperAlarms\src\com\galaxy\dennis\Alarm.java:17: Warning!: method 'com.galaxy.dennis.Alarm.setTime(String)' not invoked. 
B:\Programming\Java\BlackBerry\SuperAlarms\src\com\galaxy\dennis\Alarm.java:21: Warning!: method 'com.galaxy.dennis.Alarm.setSong(String)' not invoked. 
B:\Programming\Java\BlackBerry\SuperAlarms\src\com\galaxy\dennis\Alarm.java:25: Warning!: method 'com.galaxy.dennis.Alarm.setName(String)' not invoked. 
B:\Programming\Java\BlackBerry\SuperAlarms\src\com\galaxy\dennis\Alarm.java:29: Warning!: method 'com.galaxy.dennis.Alarm.setDays(int[])' not invoked. 
B:\Programming\Java\BlackBerry\SuperAlarms\src\com\galaxy\dennis\Alarm.java:37: Warning!: method 'com.galaxy.dennis.Alarm.getSong()' not invoked. 
B:\Programming\Java\BlackBerry\SuperAlarms\src\com\galaxy\dennis\Alarm.java:45: Warning!: method 'com.galaxy.dennis.Alarm.getDays()' not invoked. 
B:\Programming\Java\BlackBerry\SuperAlarms\src\com\galaxy\dennis\GridOrganizer.java:15: Warning!: member data 'int row' not required in class: com.galaxy.dennis.GridOrganizer
B:\Programming\Java\BlackBerry\SuperAlarms\src\com\galaxy\dennis\GridOrganizer.java:15: Warning!: member data 'MainScreen screen' not required in class: com.galaxy.dennis.GridOrganizer 
B:\Programming\Java\BlackBerry\SuperAlarms\src\com\galaxy\dennis\GridOrganizer.java:26: Warning!: method 'com.galaxy.dennis.GridOrganizer.add(int,int,Field)' not invoked. 
B:\Programming\Java\BlackBerry\SuperAlarms\src\com\galaxy\dennis\GridOrganizer.java:36: Warning!: method 'com.galaxy.dennis.GridOrganizer.draw(boolean)' not invoked. 
B:\Programming\Java\BlackBerry\SuperAlarms\src\com\galaxy\dennis\SuperAlarmsMainScreen.java:35: Warning!: member data 'Alarm[] alarms' not required in class: com.galaxy.dennis.SuperAlarmsMainScreen 
B:\Programming\Java\BlackBerry\SuperAlarms\src\com\galaxy\dennis\SuperAlarmsMainScreen.java:35: Warning!: member data 'GridOrganizer g' not required in class: com.galaxy.dennis.SuperAlarmsMainScreen 
B:\Programming\Java\BlackBerry\SuperAlarms\src\com\galaxy\dennis\SuperAlarmsMainScreen.java:35: Warning!: member data 'Font fnt_main' not required in class: com.galaxy.dennis.SuperAlarmsMainScreen 
Packaging project SuperAlarms succeeded (took 2.932 seconds) 
```

这是我启动程序后发生的情况的图片： ![在此处输入图像描述](../Images/93728e65190c854c80a6083c8d9fc1ab.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:14:56.387

一个*疯狂*的猜测是`FontFamily.forName("Comic Sans MS")`返回 null。先尝试不设置字体。

# java - Java HashMap 对象，整数

> ID：13273434
> 
> 赞同：0
> 
> 时间：2012-11-07T16:02:09.037
> 
> 标签：java, class, integer, hashmap

我有以下地图：

```
Map<City, Integer> map = getMap(); 
```

和我的班级城市：

```
public class City {
    private String c1;
    private String c2;

    public City(String c1, String c2){
        this.c1 = c1;
        this.c2 = c2;
    } 
```

现在我有一个充满值的地图，我需要寻找一个特定的键，例如：“伦敦，巴黎”。我的主要方法是这个：

```
map.get(new City("London", "Paris")); 
```

出于某种原因，它给了我

> 线程“主”java.lang.NullPointerException 中的异常

而且我几乎可以肯定我不能这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:04:25.187

实现类的`hashCode`and`equals`方法`City`，否则`map.get(new City("London", "Paris"));`总是返回`null`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:04:22.620

当您尝试使用结果时，您可能会得到空指针。为此，您还需要实现 city 的 equals 和 hashcode 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T16:07:28.333

如果要在哈希映射中使用类，则需要覆盖`hashCode`and `equals`：

```
 @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((c1 == null) ? 0 : c1.hashCode());
        result = prime * result + ((c2 == null) ? 0 : c2.hashCode());
        return result;
    } 
```

equals 的实现应该是微不足道的。

您的代码失败，因为您没有为编译器定义如何比较两个 City 对象。您可以通过覆盖该`equals`函数来定义比较规则。每当您覆盖 equals 函数时，您也应该覆盖该`hashCode`函数。哈希映射使用该`hashCode`函数以有意义和最佳的方式存储键值对。`hashCode`在哈希映射中执行查找时也使用该函数。

您可以在以下文章中找到有关这些语义的更丰富、更准确的信息：http: [//www.ibm.com/developerworks/java/library/j-jtp05273/index.html](http://www.ibm.com/developerworks/java/library/j-jtp05273/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T16:07:30.620

关于您可能会遇到 NullPointerException 的原因有几个：

*   您的地图为空。因此，当您执行 a 时`map.get()`，它会抛出异常
*   由于您没有覆盖`equals()`and`hashCode()`方法，因此当您执行 a 时`get()`，地图不会返回正确的对象，而是返回 null。当您尝试使用此功能时，您会遇到异常。

# iphone - 自动分页滚动视图

> ID：13273435
> 
> 赞同：0
> 
> 时间：2012-11-07T16:02:13.467
> 
> 标签：iphone, objective-c, ios, uiscrollview

我有个问题。我想在滚动视图中向用户显示一些内容。我想从左到右快速自动滚动滚动视图。我尝试使用 DDAutoscrollview（如果有人知道），但它对我不起作用。有人可以为我提供水平自动滚动 Uiscrollview 的解决方案吗？我已经为滚动视图设置了一个页面控件，因为它使用分页。任何代码片段都会很好。

我的代码（只是滚动视图）：

。H

```
 @interface Interface1 : UIViewController {

    IBOutlet UIScrollView *scroller;

} 
```

.m

```
- (void)viewDidLoad
{

    [scroller setScrollEnabled:YES];
    [scroller setContentSize:CGSizeMake(960, 230)];

        [super viewDidLoad];
} 
```

我正在使用故事板和 ARC。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:17:57.040

您不需要为此使用任何额外的库。UIScrollView 有一个`contentOffset`属性，您可以简单地将动画标志设置为 YES：

```
[myScrollView setContentOffset:CGPointMake(320, 0) animated:YES]; 
```

或者您可以将其包装在 UIView 动画中：

```
[UIView animateWithDuration:1.5f animations:^{
    [myScrollView setContentOffset:CGPointMake(320, 0) animated:NO];
}]; 
```

无论哪种方式，您都可能希望将滚动视图的 contentSize 设置为至少 640 宽，以便您可以实际分页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:17:00.287

你正在寻找`- (void)scrollRectToVisible:(CGRect)rect animated:(BOOL)animated`. 它将允许您在 contentSize 中给它一个矩形，它会滚动到它。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T16:17:43.703

我不知道到底有多快，但你试过这个方法吗？

```
- (void)setContentOffset:(CGPoint)contentOffset animated:(BOOL)animated
// In your case, e.g.:
[scroller setContentOffset:CGPointMake(640, 0) animated:YES] 
```

# php - 将post数据从php发送到webadress而不重定向

> ID：13273440
> 
> 赞同：-1
> 
> 时间：2012-11-07T16:02:19.210
> 
> 标签：php, asp.net, redirect, post

我在一个站点`www.aaa.com`上有一个 PHP 页面，当我单击发送按钮时，它应该在该页面上将文本框数据作为发布数据发送到 ASPX 网页`www.bbb.com`。

我需要相关的 ASPX 代码来将帖子数据检索到文本框中并自动提交。

我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T16:16:41.267

如果您有能力依赖客户端解决方案，则可以使用`jQuery` [$.ajax()](http://api.jquery.com/jQuery.ajax/)来实现这一目标。引用 jQuery API 页面， $.ajax() 函数：

> 执行异步 HTTP (Ajax) 请求。

然后，您可以使用如下类似的代码来发送您的数据`POST`，然后检索服务器提供的任何响应（编辑到跨站点功能）：

```
$.ajax({
    url: 'yourfolder/bbb.com?myparameter=myargument',
    dataType: 'jsonp',
    crossDomain: true,
    jsonp: false, //or else the first json element will be a ?
    data: $("#my-form-text-area").val(), //the data sent to the server
    success: function(receivedData) {
        alert("This is the data received from the server: " + receivedData.myJsonField);
  } 
```

});

`$.ajax`默认情况下，请求是异步的，这意味着处理将在您的服务器中进行，并且该`success`函数仅在收到响应时才显示数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T16:04:00.993

如果这是您的网站 - 尝试 GET。如果没有，你可以 CURL

# azure - 负载均衡器 - 对失败实例的恢复操作

> ID：13273444
> 
> 赞同：1
> 
> 时间：2012-11-07T16:02:28.803
> 
> 标签：azure, load-balancing

我知道 LB 会在某个时间段内探测实例的运行状况。我也知道最近 LB 更新了对自定义探针的支持。据我所知和所能找到的，LB 在接收除 200（OK）以外的代码时唯一采取的行动是停止向其转发流量。当注意到实例没有响应探测时，负载均衡器有什么办法可以执行一些恢复操作？通过恢复操作，我的意思是重新启动有问题的实例或通知一些可以采取进一步行动的服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:05:45.393

自定义负载均衡器探测的目标是它包含自定义逻辑来确定实例是否健康/准备好接收来自负载均衡器的请求。就像@astaykov 已经解释的那样，负载均衡器的工作不是采取纠正措施，而是由结构控制器决定。但是 Fabric Controller 只监控它知道的内容。也许您正在启动任务中启动一个可执行文件，并且您希望您的实例在该进程脱机时重新启动（例如，考虑一个 Node 进程）。

如果此进程处于脱机状态并尝试重新启动它，您的自定义负载均衡器探测可能会返回状态 500。同时，负载均衡器不会将请求转发到该特定实例。在您的探测中，您还可以尝试重新启动该过程，如果几次后失败，您可以自己请求重新启动（以干净的方式）：

[RoleEnvironment.RequestRecycle](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleenvironment.requestrecycle.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:51:04.777

采取纠正措施不是 LB 工作的一部分。LB 工作正如它的名字所暗示的那样 - 平衡实例之间的流量。当我们更深入地阅读[文档](http://msdn.microsoft.com/en-us/library/windowsazure/jj151530.aspx)时，我们会看到

> 如果来宾代理无法反复响应 HTTP 200 OK，Azure 负载均衡器会将实例标记为无响应并停止向该实例发送流量

关键是故障实例将被设置为“无响应”。现在管理实例是 Windows Azure Fabric Controller 的工作。它检查他们的状态，如果有问题 - 采取纠正措施。

# powershell - 使用 PowerShell 检查 COM+ 组件安全角色

> ID：13273448
> 
> 赞同：0
> 
> 时间：2012-11-07T16:02:37.677
> 
> 标签：powershell, com+

我有几个使用基于角色的安全性的 COM+ 应用程序。在任何故障排除期间，手动检查每个组件以确保选中“强制组件级别访问检查”和“为选定项目设置的角色明确设置”框可能会很痛苦。

下面的脚本已经解决了一半的问题（强制执行组件级别访问检查），但我正在努力寻找一种方法来以编程方式确定分配给组件的任何角色是否也启用了它们的复选框。

非常感谢任何帮助！

```
Clear-Host;

$comAdmin = New-Object -com ("COMAdmin.COMAdminCatalog.1");
$applications = $comAdmin.GetCollection("Applications") ;
$applications.Populate() ;
$appfilter = "ABC";

foreach ($application in $applications){

  if($application.name.substring(0,3) -eq $appfilter){

    try{    
          $components = $applications.GetCollection("Components",$application.key)
          $components.Populate()

          foreach ($component in $components){

            $componentName = $component.Name;
                Write-Host $componentName;

            $accesschecks = $component.Value("ComponentAccessChecksEnabled");

            Write-Host "Access Checks Enabled: " -NoNewLine;
            Switch ($accesschecks){
                $true{Write-Host $accesschecks -ForegroundColor Green}
                $false{Write-Host $accesschecks -ForegroundColor red -BackgroundColor white}
            }   

            $roles = $applications.GetCollection("Roles",$application.key) ;
            $roles.Populate();
            $rolename = $roles.Item(0).Name;

            #$roleenabled = !!???!!     

            Write-Host "Role: $rolename Enabled: " -NoNewLine;
            Switch ($roleenabled){
                $true{Write-Host $roleenabled -ForegroundColor Green}
                $false{Write-Host $roleenabled -ForegroundColor red -BackgroundColor white}
            } 
            Write-Host;

             }
    }
    catch{}
  }
Write-Host "-------------------------------------";
} 
```

[显示已启用角色的示例 COM+ 对话框](http://www.aspgrid.com/12_comp.gif)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:12:36.840

破解它。如果未在组件安全设置中选中角色框，则角色不会列在 RolesforComponent 集合中，就好像根本没有角色一样。此外，可能有多个角色分配给一个组件，因此需要另一个循环来枚举：

```
Clear-Host;

$comAdmin = New-Object -com ("COMAdmin.COMAdminCatalog.1");
$applications = $comAdmin.GetCollection("Applications") ;
$applications.Populate() ;
$appfilter = "ABC";

foreach ($application in $applications){

    if($application.name.substring(0,3) -eq $appfilter){

            try{  

                    Write-Host $application.name -ForegroundColor White;
                   $components = $applications.GetCollection("Components",$application.key)
                $components.Populate()

                foreach ($component in $components){
                $componentName = $component.Name;
                    $componentID = $component.Value("CLSID");
                        Write-Host "*"$componentName;
                $accesschecks = $component.Value("ComponentAccessChecksEnabled");
                        Write-Host "  Access Checks Enabled: " -NoNewLine;

                  Switch ($accesschecks){
                       $true{Write-Host $accesschecks -ForegroundColor Blue -BackgroundColor Green}
                           $false{Write-Host $accesschecks -ForegroundColor White -BackgroundColor Red}
                            }
                }   

                        $RolesForComponent = $components.GetCollection("RolesForComponent",$component.Value("CLSID"))
                        $RolesForComponent.Populate();

                        If ($RolesForComponent.Count -eq 0){
                            Write-Host "  " -NoNewLine;
                            Write-Host "Check Roles!" -ForegroundColor White -BackgroundColor Red;
                        }
                        Else{
                            foreach ($role in $RolesForComponent){
                $rolename = $role.Name;
                            Write-Host "  " -NoNewLine;
                            Write-Host $rolename -NoNewLine;
                            Write-Host "  " -NoNewLine;
                            Write-Host "Role OK" -ForegroundColor Blue -BackgroundColor Green;
                            Write-Host;
                       }        
                        }
            }

        catch{}

    }
    Write-Host "----------------------------------------------------------------------";
} 
```

更多信息在这里[MSDN RolesForComponent 集合](http://msdn.microsoft.com/en-us/library/ms686119%28v=vs.85%29.aspx)

# linux - Linux 环境下的 Oracle 外部表字段解析

> ID：13273450
> 
> 赞同：1
> 
> 时间：2012-11-07T16:02:47.820
> 
> 标签：linux, parsing, oracle11g, external-tables

叠花！

我在使用 Oracle Database 11g 实例时遇到问题，其中我有一个外部表映射来自外部文件的数据。

这是我在开发 Windows Server 2008 R2 x64 虚拟机上运行的代码：

```
CREATE TABLE ABC (
    NAMECREDORPART1 CHAR(50 CHAR), 
    NAMECREDORPART2 CHAR(50 CHAR), 
    NAMECREDORPART3 CHAR(50 CHAR), 
    ADDRESSCREDORPART1 CHAR(50 CHAR),
    (...)
   ) 
   ORGANIZATION EXTERNAL (
        TYPE ORACLE_LOADER
        DEFAULT DIRECTORY FILES
        ACCESS PARAMETERS (
            records delimited by '\n' CHARACTERSET 'WE8ISO8859P15'
            LOAD WHEN (documento != blanks)
            FIELDS
            MISSING FIELD VALUES ARE NULL
            REJECT ROWS WITH ALL NULL FIELDS (
               NAMECREDORPART1 position(1:49) char(50),
               NAMECREDORPART2 position(50:99) char(50),       
               NAMECREDORPART3 position(100:149) char(50),
               ADDRESSCREDORPART1 position(150:199) char(50),
               (...)
            )
        )
        LOCATION ('abc.mtf')
    )
PARALLEL
NOMONITORING
REJECT LIMIT UNLIMITED; 
```

此代码导致在此 ABC 表上加载/映射以下数据： ![在此处输入图像描述](../Images/7b253a88a0a0a4539f9fd5c61367b1d1.png) 这正是我希望我的数据加载的方式！:D

不幸的是，我的生产环境是在 Linux 平台上运行的 Oracle Database 11g（相同版本）。当我使用相同的代码加载相同的文件 (abc.mtf) 时，这会导致奇怪的行为：字段被空格填充。我不知道为什么会发生这种情况，因为这在我的 Windows Server 2008 VM 上没有发生。

这是相同数据在 Linux 环境中的屏幕截图：

![http://img211.imageshack.us/img211/7535/error01i.png](../Images/e12ab745a296425c009cbb1f24d7a72b.png)

有人可以帮我在 Linux 环境下获得与我在 Windows 上获得的输出相同的输出吗？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:06:41.517

问题可能是“记录分隔”子句没有考虑不同的行尾字符组合吗？默认的 NEWLINE 应该解决这个问题。

# python - XML Python解析器抛出错误

> ID：13273459
> 
> 赞同：-1
> 
> 时间：2012-11-07T16:03:04.553
> 
> 标签：python, xml-parsing, elementtree

这是 XML DTD（至少我认为它是 DTD，我对 XML 不是很精通，所以如果我错了，请纠正我）：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE PATDOC SYSTEM "-US-Grant-025xml.dtdST32" [
<!ENTITY USD0484671-20040106-D00000.TIF SYSTEM "USD0484671-20040106-D00000.TIF" NDATA TIF>
<!ENTITY USD0484671-20040106-D00001.TIF SYSTEM "USD0484671-20040106-D00001.TIF" NDATA TIF>
<!ENTITY USD0484671-20040106-D00002.TIF SYSTEM "USD0484671-20040106-D00002.TIF" NDATA TIF>
<!ENTITY USD0484671-20040106-D00003.TIF SYSTEM "USD0484671-20040106-D00003.TIF" NDATA TIF>
<!ENTITY USD0484671-20040106-D00004.TIF SYSTEM "USD0484671-20040106-D00004.TIF" NDATA TIF>
<!ENTITY USD0484671-20040106-D00005.TIF SYSTEM "USD0484671-20040106-D00005.TIF" NDATA TIF>
<!ENTITY USD0484671-20040106-D00006.TIF SYSTEM "USD0484671-20040106-D00006.TIF" NDATA TIF>
<!ENTITY USD0484671-20040106-D00007.TIF SYSTEM "USD0484671-20040106-D00007.TIF" NDATA TIF>
<!ENTITY USD0484671-20040106-D00008.TIF SYSTEM "USD0484671-20040106-D00008.TIF" NDATA TIF>
<!ENTITY USD0484671-20040106-D00009.TIF SYSTEM "USD0484671-20040106-D00009.TIF" NDATA TIF>
<!ENTITY USD0484671-20040106-D00010.TIF SYSTEM "USD0484671-20040106-D00010.TIF" NDATA TIF>
<!ENTITY USD0484671-20040106-D00011.TIF SYSTEM "USD0484671-20040106-D00011.TIF" NDATA TIF>
<!ENTITY USD0484671-20040106-D00012.TIF SYSTEM "USD0484671-20040106-D00012.TIF" NDATA TIF>
]>
<PATDOC DTD="2.5" STATUS="Build 20030724"> 
```

尝试运行 python 解析器时出现以下错误

```
Traceback (most recent call last):
  File "C:\Users\John\Desktop\FINAL BART ALL INFO-Magic Bullet.py", line 75, in <module>
    doc = etree.XML(item)
  File "lxml.etree.pyx", line 2723, in lxml.etree.XML (src/lxml/lxml.etree.c:52448)
  File "parser.pxi", line 1573, in lxml.etree._parseMemoryDocument (src/lxml/lxml.etree.c:79932)
  File "parser.pxi", line 1452, in lxml.etree._parseDoc (src/lxml/lxml.etree.c:78774)
  File "parser.pxi", line 960, in lxml.etree._BaseParser._parseDoc (src/lxml/lxml.etree.c:75389)
  File "parser.pxi", line 564, in lxml.etree._ParserContext._handleParseResultDoc (src/lxml/lxml.etree.c:71739)
  File "parser.pxi", line 645, in lxml.etree._handleParseResult (src/lxml/lxml.etree.c:72614)
  File "parser.pxi", line 585, in lxml.etree._raiseParseError (src/lxml/lxml.etree.c:71955)
XMLSyntaxError: Entity 'num' not defined, line 166, column 84 
```

这将获取专利 XML 数据并将其解析为分隔文件。另外，我使用了“从 lxml 导入 etree 导入 urllib2、os、zipfile”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:51:58.507

`&num;`是 '#' 的实体，但 lxml 认为它不是格式良好的 XML。

检查文件的 DTD 以查看它是否允许实体 - 如果没有 DTD，这是问题的一部分。

# php - MySQL 查询从一个表中获取 Stock 数据并更新第二个表上的 LIKE 数据

> ID：13273463
> 
> 赞同：0
> 
> 时间：2012-11-07T16:03:13.997
> 
> 标签：php, mysql

好的，让我们看看我能不能用文字表达出来。我有 2 个表，有类似的数据。它们旨在用作系统其余部分使用的库存数据。其中一个表是最近添加的，该表上的 2 列数据需要与其他表上的数据相匹配，因此我可以尝试更快地运行查询。那就是说。我需要修复的列与我想要的列具有非常相似的数据。正如我可以使用从第二个表到第一个表的选择查询`like`并实际获取我想要的数据，但我不能反过来做。

所以继承人我想知道它是否可能只是基于查询。本质上，我想遍历第二个表，我希望 2 列数据与第一个表中的数据列匹配。它们是 varchar 列，因为它们中的内容只是字符串。但是以运动为例，我想在第一张表中我有：

纽约巨人队

新英格兰爱国者队

在第二张表中，我有：

爱国者

巨人队

在进行此查询时，我想更新第二列中的行以匹配第一个表中的数据。这可能只是单独基于查询，还是我必须提出某种级别的服务器端逻辑才能克服？

在一张表中，我正在处理大约 4000 行，而在另一张表中，我正在使用 1001 行，不确定这是否有帮助，但值得一提。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:14:29.013

使用 mysql 命令行客户端登录到您的数据库并选择数据库。然后输入类似的内容：

```
mysql> describe config; 
```

这将输出表*配置*的定义。复制它并将其添加到您的问题中：

```
+--------+-------------+------+-----+---------+----------------+
| Field  | Type        | Null | Key | Default | Extra          |
+--------+-------------+------+-----+---------+----------------+
| id     | int(11)     | NO   | PRI | NULL    | auto_increment |
| option | varchar(45) | NO   |     | NULL    |                |
+--------+-------------+------+-----+---------+----------------+ 
```

为你的两张桌子这样做。

然后还可以获得这些表的一些示例性数据，例如：

```
mysql> select * from config LIMIT 5; 
```

然后您可以再次复制和粘贴：

```
+----+---------------------------+
| id | option                    |
+----+---------------------------+
|  1 | value for option with ID1 |
|  2 | value for option with ID2 |
+----+---------------------------+ 
```

这应该使您所询问的内容更加具体，至少是现有数据。然后尝试制定您想要达到的结果，最好使用类似的布局。

# java - im4Java - 调整大小的动态操作

> ID：13273465
> 
> 赞同：0
> 
> 时间：2012-11-07T16:03:20.933
> 
> 标签：java, image-processing, imagemagick, im4java

我正在使用 im4Java 库来调整我的图像大小。我看到您可以设置一个模板操作，其中包含输入和输出文件的占位符。我知道您最初可以为操作设置调整大小，但是可以设置调整大小也是动态的操作吗？

这是我当前的代码：

```
 IMOperation op = new IMOperation();
   op.addImage();
   op.resize(500, 500); // I would like to make this dynamic
   op.quality(70d);
   op.addImage(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:51:55.907

您可以实现 DynamicOperation 接口并将其添加到您的操作堆栈中。

示例用例：

需要将给定图像的大小调整为图像大小集中的所有其他图像大小。

例如：
Set1：[16x16、32x32、64x64]，
Set2：[12x12、24x24、48x48]。

如果输入图像的大小为 32x32，则需要将其大小调整为 16x16、64x64。

代码：

```
...

DynamicResizeOperation drOp = new DynamicResizeOperation();
IMOperation op = new IMOperation();
op.addImage(inputImagePath);
op.addDynamicOperation(drOp);
op.addImage(); //place holder for out put image

...

for (IMSize imSize : resizeList) {
  //set the dynamic size to resize
  drOp.setSize(imSize.getWidth(), imSize.getHeight());

...

class DynamicResizeOperation implements DynamicOperation {

    private int height;
    private int width;

    public DynamicResizeOperation() {}

    public void setSize(int width, int height) {
        this.height = height;
        this.width = width;
    }

    @Override
    public Operation resolveOperation(Object... pImages) throws IM4JavaException {

        //return the resize operation if and only if both height and width are non zero positive values
        if (height > 0 && width > 0) {
            IMOperation op = new IMOperation();
            op.resize(width, height, "!");
            return op; 
        }
        return null;
    }
} 
```

# c# - 将sqlce表中的标识设置为自动递增？

> ID：13273466
> 
> 赞同：4
> 
> 时间：2012-11-07T16:03:21.857
> 
> 标签：c#, sql-server-ce

我是一名初级程序员（高中生），我的老师给了我一项任务，`sqlce`每次我在数据库中插入新行时，让表中的主键自动递增（我认为他不知道该怎么做它要么:)

这是我当前的代码：

```
using (SqlCeConnection con = new SqlCeConnection(conString))
{
    con.Open();

    using (SqlCeCommand com = new SqlCeCommand("INSERT INTO Occupational VALUES(@employedBeforeBool, @nameofEmployer, @Addressemployed,@specificsAtEmployer,@employmentOnDischarge, @yearsExperienceWithEmployer, @desireToReturnToEmployer, @farmingExperienceBool, @tradesorapprentiship, @whattradesorapprentiship, @SoldierID, @Occupational_ID)", con))
    {
        com.CommandText = "SET IDENTITY_INSERT Occupational ON";
        com.Parameters.AddWithValue("@employedBeforeBool", Soldier1.employedBeforeBool);
        com.Parameters.AddWithValue("@nameofEmployer", Soldier1.nameOfEmployer);
        com.Parameters.AddWithValue("@Addressemployed", Soldier1.addressOfEmployer);
        com.Parameters.AddWithValue("@specificsAtEmployer", Soldier1.specificsAtEmployer);
        com.Parameters.AddWithValue("@employmentOnDischarge", Soldier1.employmentOnDischarge);
        com.Parameters.AddWithValue("@yearsExperienceWithEmployer", Soldier1.yearsExperienceWithEmployer);
        com.Parameters.AddWithValue("@desireToReturnToEmployer", Soldier1.desireToReturnToEmployer);
        com.Parameters.AddWithValue("@farmingExperienceBool", Soldier1.farmingExperienceBool);
        com.Parameters.AddWithValue("@tradesorapprentiship", Soldier1.tradeOrApprenticeship);
        com.Parameters.AddWithValue("@whattradesorapprentiship", Soldier1.whattradesorapprentiship);
        com.Parameters.AddWithValue("@SoldierID", SoldierID);
        //com.Parameters.AddWithValue("@Occupational_ID", counter);

        com.ExecuteNonQuery();
    } 
```

我的程序在运行时没有崩溃，看起来它正在插入，但表格内没有显示任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:09:20.313

您当前的代码用文本覆盖`INSERT INTO`查询。`SET IDENTITY`只有 1 个 CommandText 属性。

并在创建表时完成列自动增量，在插入期间您不必做任何事情。

如果您使用设计器创建表，请返回并将`IDENTITY`Key 列的属性设置为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T23:15:40.857

就像 Henk 所说，对于给定的 SQLCECommand，您不能有两个不同的 CommandText。只要您在构建表时将字段/列标识为身份，那么您需要确保在命令本身中取出对身份列的任何引用（您的是@Occupational_ID）。

但是，有两个非常重要的事实之前没有说明：

1.  您需要两个单独的 SQLCECommand（一个用于打开 Identity，另一个用于实际插入）。在“使用”语句中添加以下内容：

    SqlCeCommand identChangeCommand = new SqlCeCommand(con); identChangeCommand.CommandText = "SET IDENTITY_INSERT 职业开启";

2.  您需要在 Insert 中添加标识列的起始值。因为您使用整数作为数据类型，所以您可以选择任何整数值开始。之后的每个 Insert 都会在前一个值 Inserted 上加一个：

    使用 (SqlCeCommand com = new SqlCeCommand("INSERT INTO Occupational VALUES(1000, @usedBeforeBool, ...

PS 确保你 ExecuteNonQuery() 这两个命令。希望有帮助！

# oracleforms - 如何在 OracleForms 中更改此对象？

> ID：13273467
> 
> 赞同：0
> 
> 时间：2012-11-07T16:03:22.837
> 
> 标签：oracleforms

使用 OracleForms Builder 32 位 v 11.2。如何更改此图中突出显示的表单名称？![甲骨文表格](../Images/4276e356490fc9668c0443ec7291b390.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T19:48:12.837

这由窗口的“标题”属性控制。您可以通过 Forms Designer 属性面板设置它，选择有问题的窗口。或者您可以使用 Forms built-in 以编程方式更改它`set_window_property`，例如：

`set_window_property('my_window_name', TITLE, 'New Title');`

# java - 将 " 转换为 %22 的正确 URLencoder 编码是什么？

> ID：13273469
> 
> 赞同：0
> 
> 时间：2012-11-07T16:03:35.953
> 
> 标签：java, urlencode, apache-httpclient-4.x

我有以下网址：

[https://api-test.company.com/contacts?q=email=](https://api-test.company.com/contacts?q=email=) "jlowder@company.com"

我正在使用以下方法解析它：

```
String URL = "https://api-test.company.com/contacts?" + URLEncoder.encode("q=email=jlowder@company.com", "UTF-8"); 
```

我也尝试过“ISO-8859-1”，但都为我的 URL 返回了这个：

[https://api-test.homeaway.com/contacts?q%3Demail%3Djlowder%40homeaway.com](https://api-test.homeaway.com/contacts?q%3Demail%3Djlowder%40homeaway.com)

为了从我的服务器接收正确的响应，我需要的 url 是：

[https://api-test.company.com/contacts?q=email=%22jlowder@company.com%22](https://api-test.company.com/contacts?q=email=%22jlowder@company.com%22)

%22 是电子邮件地址周围的“ ”标记。

如何形成正确的 URL？我找不到的例子都不能做到这一点..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:15:15.187

如果你真的想要这个，那么你必须将引号也放入字符串中：

```
String URL = "https://api-test.company.com/contacts?q=email=" + URLEncoder.encode("\"jlowder@company.com\"", "UTF-8"); 
```

给出： `https://api-test.company.com/contacts?q=email=%22jlowder%40company.com%22`

顺便说一句：你想命名那个 String `url`，而不是`URL`.

# c# - 是否有 asp:literal 控件的自动格式化？

> ID：13273475
> 
> 赞同：1
> 
> 时间：2012-11-07T16:03:49.980
> 
> 标签：c#, asp.net

有没有办法自动格式化 a`string`以将文字插入到 JavaScript 代码中？

假设您的页面中有这个：

```
<script type="text/javascript">
    var strvar = <asp:Literal runat="server" id="ltrStrvar"></asp:Literal>;
</script> 
```

在您的服务器端代码中：

```
protected void Page_Load(object sender, EventArgs e) {
    ltrStrvar.Text = "hello \"world\"";
} 
```

有没有办法*自动*让它转义字符串并用引号括起来以便无错误地插入 JavaScript，所以我所要做的就是`Text`使用任意字符串设置属性？我知道如何*手动*完成，但正在寻找更优雅的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:08:09.017

您可以创建一个自定义`LiteralWithQuotationMarks`用户控件，该控件在`Literal`内部使用该控件并在缺少引号时将其括起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:08:12.793

你可以这样做：

```
public string sanitizeJavascriptString(string dirtyInput)
{
    return dirtyInput.Replace("\\", "\\\\")
        .Replace("\"", "\\\"")
        .Replace("'","\\'");
} 
```

我不知道是否存在现有的转义功能，但我对此表示怀疑。我也不是 100% 确定还需要转义什么，但我假设你可以添加其他字符，如果你知道它们是什么。

# c# - 在 URL 中的第一个斜杠后获取任何内容

> ID：13273476
> 
> 赞同：3
> 
> 时间：2012-11-07T16:03:49.473
> 
> 标签：c#, url, slash

我可以使用以下方式获取我的浏览器网址：`string url = HttpContext.Current.Request.Url.AbsoluteUri;` 但如果我有如下网址：

```
http://www.test.com/MyDirectory/AnotherDir/testpage.aspx 
```

我将如何获得其中的“MyDirectory”部分，.NET 中是否有实用程序来获得它，或者我是否需要字符串操作？

如果我在“/”的第一个实例之后进行字符串操作并说什么，那么它不会在 http: 之后返回斜杠吗？如果我的网址是`www.test.com/MyDirectory/AnotherDir/testpage.aspx`

有人可以帮忙吗

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T16:10:55.380

从您的 url 实例化一个 Uri 实例：

```
Uri myUri = new Uri("http://www.test.com/MyDirectory/AnotherDir/testpage.aspx"); 
```

然后，您可以使用以下方法将路径段放入字符串数组：

```
string[] segments = myUri.Segments 
```

您的第一个“MyDirectory”文件夹将位于：

```
string myFolderName = segments[0]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T16:08:25.133

您可以通过以下`PathAndQuery`属性获得`Url`

```
var path = HttpContext.Current.Request.Url.PathAndQuery; 
```

它会回来`/MyDirectory/AnotherDir/testpage.aspx`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T16:15:40.447

```
 Uri uriAddr = new Uri("http://www.test.com/MyDirectory/AnotherDir/testpage.aspx");
 var firstSegment= uriAddress.Segments.Where(seg => seg != "/").First(); 
```

# jquery - jquery ajax成功不起作用

> ID：13273489
> 
> 赞同：0
> 
> 时间：2012-11-07T16:04:32.810
> 
> 标签：jquery, ajax, symfony

我正在尝试使用 ajax 收集控制器的响应，但我无法获得以下代码：

```
$.ajax({url: url,
      success: function(data) {
        alert("hi"); //no work.
  }
 }); 
```

并将其返回给控制器：

```
return new Response($venta->getId()); 
```

控制器调用成功返回数字 de venta id。但成功不进入该部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:08:13.747

HTML：

```
 <html>
<head>
      <script 
        src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"  
         type="text/javascript"></script>
    <script type="text/javascript">
    url='./responsetest.php';
    $.ajax({
        type: 'GET',
       dataType: 'json',
       url:url,
       success: function(data) {
         alert("hi");
       },
    error: function(data) {
        console.log(data);
    }
    });
      </script>
</head>
<body>
    <div id="display"></div>
</body>
    </html> 
```

PHP 文件：responsetest.php

```
 <?php header('content-type: application/json; charset=utf-8');
    $msg = array('id' => 89);
    echo $_GET['callback'].json_encode($msg);
    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:27:21.297

ajax jQuery 代码：

```
$.ajax({
   dataType: 'json',
    url:url,
   success: function(data) {
     alert("hi");
     }
}); 
```

返回网址：

```
$array['id'] = $venta->getId();
return  new Response(json_encode($array), 200, array('Content-Type', 'text/json')); 
```

在浏览器中显示

```
{"id":89} 
```

没有显示警报（嗨）为什么？谢谢。

# java - 在 Java 中编写增强的 for 循环

> ID：13273490
> 
> 赞同：1
> 
> 时间：2012-11-07T16:04:34.810
> 
> 标签：java

我正在尝试将以下 for 循环转换为增强的 for 循环

```
 for(int i=0; i< vowels.length; i++){
            if(vowels[i] == Character.toLowerCase(c)){
                return true;
            }
        }
        return false; 
```

这就是我得到的，但我得到了`i == Character.isLetter(c)`下划线，因为`==`对于参数类型 char、boolean，运算符未定义。这里有什么问题？

```
 for(char i: vowels){
            if(i == Character.isLetter(c)){
                return true;
            }
        }
        return false; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:05:19.710

`Character.isLetter(c)`返回`boolean`不`char`。你无法`boolean`与`char`.

您可能需要执行以下操作：

```
 for(char i: vowels){
          boolean isChar = Character.isLetter(c);
           if(isChar){
            if(i ==c){
                return true;
            }
         }
        } 
```

编辑：在您发表评论后：您的代码应类似于：

```
for(char i: vowels){
        if(i == Character.toLowerCase(c)){
            return true;
        }
    } 
```

注意：手写代码，可能存在语法错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:06:45.567

你一定是想说

```
for (char v: vowels){
    if (Character.isLetter(v)) {
        return true;
    }
}
return false; 
```

现在，您正在将 a与检查`char`的`boolean`结果进行比较`isLetter`。

（我将变量名更改为`v`以强调它是元音，而不是索引。）

# jshint - JSHint 和“容忍变量阴影”

> ID：13273491
> 
> 赞同：1
> 
> 时间：2012-11-07T16:04:36.080
> 
> 标签：jshint

有人知道为什么这段代码不会在 JSHint 中产生错误吗？

我认为它应该给我一个可变的阴影警告，但我没有得到一个。

我在使用 Visual Studio 插件时将“容忍变量阴影”设置为错误。

```
RES.test = function () {
    var test, f;

    f = function () {
        var test;

        window.alert(test);
    };
}; 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-28T18:46:57.357

我也偶然发现了这个。显然 JSHint 开发人员对“阴影”的定义不是你所期望的。对他们来说，隐藏来自闭包的变量名并不是隐藏。是的，我也觉得很奇怪:-)

如果您查看他们的测试套件，它们的意思是“重新定义”，您在哪里

```
var a = 1;
...
var a = 2; 
```

看看他们的测试用例：[https ://github.com/jshint/jshint/blob/master/tests/stable/unit/fixtures/redef.js](https://github.com/jshint/jshint/blob/master/tests/stable/unit/fixtures/redef.js)

# java - 检查一行是否以列表中的内容开头

> ID：13273495
> 
> 赞同：0
> 
> 时间：2012-11-07T16:04:45.153
> 
> 标签：java

我有一个看起来像这样的列表：

```
List<String> messages = Arrays.asList("//", "/*", "*", "}", "{"); 
```

然后我读入一个文件并逐行浏览它。我想检查该行的开头是否与列表中的任何内容匹配。

我之前就是这样做的，但这似乎不是完成我想要做的最有效的方法：

```
/*
if (!strLine.startsWith("//") && !strLine.startsWith("/*") && !strLine.startsWith("*")  && !strLine.startsWith("}") && !strLine.startsWith("{")) {
System.out.println(strLine);
}
*/ 
```

关于什么是最好的方法的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:09:31.313

```
public boolean isInList(List<String> list, String strline){
   for(String message:list){
     if(strline.startsWith(message)){
       return true;
     }
  }
  return false;
}

//Usage
String someString = "something";
List<String> messages = Arrays.asList("//", "/*", "*", "}", "{");

if(isInList(messages,someString)){
   System.out.println("foundMatch");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:10:05.143

您可以为此使用正则表达式和匹配器。但是您不能使用字符串列表，但可以在运行时构建它。

```
Matcher m = Pattern.compile("^(//|/\\*|\\*|\\{|\\}).*").matcher("");
if (!matcher.reset(strLine).matches()) {
   // does not start
} 
```

样本 ：

```
String str = "abc\n// foo\n/* foo */\nthing\n{bar\n{baz\nlol";
Matcher matcher = Pattern.compile("^(//|/\\*|\\*|\\{|\\}).*").matcher("");
for (String strLine : str.split("\n")) {
    if (!matcher.reset(strLine).matches()) {
        System.out.println(strLine + " does not match");
    }
} 
```

印刷：

```
abc does not match
thing does not match
lol does not match 
```

您可以使用以下方法动态构建模式`Pattern.quote`：

```
public static Pattern patternOf(List<String> starts) {
    StringBuilder b = new StringBuilder();
    for (String start: starts) {
        b.append("|").append(Pattern.quote(start));
    }
    return Pattern.compile("^(" + b.substring(1) + ").*");
}
// use it like this:
Matcher matcher = patternOf(Arrays.asList("//", "/*", "*", "{", "}")).matcher("");
// produces a pattern like: ^(\Q//\E|\Q/*\E|\Q*\E|\Q{\E|\Q}\E).* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T16:14:21.240

对于您正在进行的少量测试，这并非不合理。您正在消除循环或迭代器的开销，并且您正在消除注释所建议的正则表达式的解析和执行。

考虑对测试进行排序，以便首先列出四个字符串中最常见的。这样测试将尽快通过。

我不认为在宏伟的计划中这有什么大不了的。访问文件将是你正在做的最慢的部分。少数字符串比较什么都不是。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T16:21:30.777

使用 Apache Commons Lang 很容易：[`StringUtils.startsWithAny`](https://commons.apache.org/lang/api-3.1/org/apache/commons/lang3/StringUtils.html#startsWithAny%28java.lang.CharSequence,%20java.lang.CharSequence...%29).

例如：

```
List<String> messages = Arrays.asList("//", "/*", "*", "}", "{");
boolean startsWith = StringUtils.startsWithAny("{mystring}", messages.toArray(new String[messages.size()])); 
```

# c++ - 使用模板进行宏扩展

> ID：13273498
> 
> 赞同：5
> 
> 时间：2012-11-07T16:04:52.243
> 
> 标签：c++, templates, macros

我正在编写几个函数，它们将模板函数的结果作为输入：

```
int alg1(Vect3) {...}
...
int algN(Vect3) {...}

void main() {
    alg1( mat.topRightCorner<3,1>() )
} 
```

其中，如果您很好奇，则`topRightCorner`返回 的子矩阵，这是[Eigen](http://eigen.tuxfamily.org)`mat`中的一个方法，当在编译时已知时，维度将作为模板参数放置在其中。

但是使用宏创建“快捷方式”以在不同算法之间快速切换（因为在实际代码中该函数被多次调用），就像这样

```
#define ALG(X)    ( algN(X) )

ALG( mat.topRightCorner<3,1>() ) 
```

给出一个错误，因为宏被正确扩展但不知何故被误解为具有两个不同的参数，`mat.topRightCorner<3`并且`1>()`.

用方括号包裹输入就可以了，但是为什么会出现这种行为呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T16:14:34.923

因为`,`被预处理器接受为新宏参数的分隔符，并且因为预处理器并不真正关心您可能将其作为模板参数列表的分隔符。

更准确地说：

```
ALG( mat.topRightCorner<3,1>() )
     ^^^^^^^^^^^^^^^^^^^^ ^^^^ 
```

这两个词法看起来都像有效的宏参数，并且宏解析优先。

另一方面，预处理器知道做什么`()`，因此您可以通过这种方式“强制”解析为单个参数。

# android - Android模拟器：运行我的应用程序后互联网断开连接

> ID：13273499
> 
> 赞同：0
> 
> 时间：2012-11-07T16:04:57.860
> 
> 标签：android, emulation

我为这个问题阅读了许多其他问题/答案，但找不到答案。
我“没有”代理问题，因为互联网一开始就可以工作。

案例1：
1.启动模拟器
2.运行浏览器和冲浪，冲浪，冲浪......
结果：工作正常！

Case2:
1\. 启动模拟器
2\. 运行浏览器和冲浪。
结果：工作正常！
3.运行我的应用程序
结果：互联网停止工作
4.运行浏览器和冲浪。
结果：互联网停止工作

那么我在我的应用程序中做什么？没什么。
但我打开多个互联网连接来下载图像和其他内容。

我的应用程序可以在真实设备上完美运行。

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:11:17.130

如果您使用的是 Eclipse，请尝试：

**窗口>首选项>Android>启动**

默认模拟器选项：-dns-server 8.8.8.8,8.8.4.4

说明[在这里](https://stackoverflow.com/questions/2676073/android-emulator-dns-server-usage)

# javascript - PhoneGap 尝试上传音频媒体文件 - 适用于 iOS，找不到文件 Android

> ID：13273500
> 
> 赞同：1
> 
> 时间：2012-11-07T16:05:03.237
> 
> 标签：javascript, jquery, cordova, jquery-mobile

*   我们有一个记录音频的应用程序，它使用了 PhoneGap 媒体 API，在 iOS 的情况下是文件 API。
*   当用户单击*Accept & Upload*按钮时，应用程序使用 PhoneGap 的 File.FileTransfer() 方法将该文件移动到服务器。
*   适用于iOS，Android不太好。
*   当我将我的 Android 设备连接到我的计算机并安装为驱动器时，我可以看到该文件正在根目录中创建，这正是它应该在的位置。
*   创建音频文件后，我可以从存储在全局变量`fullRecordPath`which =中的位置在我的设备上播放文件`recording.wav`
*   当我尝试将 File.FileTransfer() 指向该路径时，我得到错误代码 = 1，我知道这是*未找到文件*

处理*接受和上传*点击事件的代码：

```
$('#btnAcceptUpload').live('tap',function () {

    if(isIOS){
        thisFileToUpload = fullRecordPath;
    } else {
        // thisFileToUpload = './'+fullRecordPath;          //doesn't work
        // thisFileToUpload = 'file:///'+fullRecordPath;    //doesn't work
        thisFileToUpload = fullRecordPath;                  //doesn't work
    }

    var options = new FileUploadOptions();

    msg = '';
    options.fileKey="file";

    msg += "options.fileKey = "+options.fileKey+"\n";
    options.fileName=thisFileToUpload.substr(thisFileToUpload.lastIndexOf('/')+1);

    msg += "options.fileName = "+options.fileName+"\n";
    options.mimeType='audio/wav';

    options.chunkedMode = false;

    msg += "options.mimeType = "+options.mimeType+"\n";
    msg += "thisFileToUpload = "+thisFileToUpload;

    alert(msg);

    var ft = new FileTransfer();
    ft.upload(thisFileToUpload, "http://10.0.17.121/~email/ttmovefiles.php", fileUploadSuccess, fileUploadFailure, options);
}); 
```

成功回调：

```
function fileUploadSuccess(r) {
    console.log("Code = " + r.responseCode);
    console.log("Response = " + r.response);
    console.log("Sent = " + r.bytesSent);
    alert(r.response);
} 
```

失败回调：

```
function fileUploadFailure(error){
    alert("An error has occurred: Code = " + error.code);
} 
```

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:25:34.047

好吧好吧。我想出了这个。我保证稍后我会回来并收紧这个，但我想把它记录下来，这样我就可以结束帮助另一个人了。

*   在 iOS 中创建一个新的媒体你别无选择，你必须使用 File api。文件系统中的这个完全限定的位置被移到同一个全局变量中，Media.play() 方法在 iOS 中可以很好地发挥作用。
*   不知道为什么它会以这种方式工作，但对于 Android，Media.play() 不喜欢传递给它的完全限定路径。它只想要文件名，并且显然是从根目录搜索。
*   File.FileTransfer.upload() 始终希望上传资产的完全限定路径，无论 iOS 还是 Android。

使这项工作：

我使用 File API 创建了音频媒体然后用来将录音移入的文件。我设置了 2 个全局变量：一个用于在设备上播放音频，`fullRecordPath`另一个用于上传`fullUploadPath`。

这是创建文件、调用媒体 API 并设置 Android 需要的全局变量的函数：

```
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSystem){

    fileSystem.root.getFile(recordFileName, {
        create: true,
        exclusive: false
    }, function(fileEntry){
        alert("---------> Android File " + recordFileName + " created at " + fileEntry.fullPath);
        fullRecordPath = recordFileName;
        fullUploadPath = fileEntry.fullPath;
        mediaVar = new Media(recordFileName, function(){
            alert("Android media created successfully");
        }, androidMediaCreateFailure, mediaStatusCallback); //of new Media
        onMediaCreated();
    }, androidMediaCreateFailure); //of getFile
}, androidMediaCreateFailure); //of requestFileSystem 
```

这是播放该媒体的代码

```
function playAudio() {
    var my_media = new Media(fullRecordPath,

        // success callback
        function () {
            console.log("playAudio():Audio Success");
        },

        // error callback
        function (err) {
            console.log("playAudio():Audio Error: " + err.code);
            exposeObject(err);
        });

    my_media.play();
} 
```

这是要上传的代码

```
$('#btnAcceptUpload').live('tap',function () {

    if(isIOS){
        thisfullUploadPath = fullRecordPath;
    } else {
        thisfullUploadPath = fullUploadPath;
    }

    var options = new FileUploadOptions();

    msg = '';
    options.fileKey="file";

    msg += "options.fileKey = "+options.fileKey+"\n";
    options.fileName=thisfullUploadPath.substr(thisfullUploadPath.lastIndexOf('/')+1);

    msg += "options.fileName = "+options.fileName+"\n";
    options.mimeType='audio/wav';

    options.chunkedMode = false;

    msg += "options.mimeType = "+options.mimeType+"\n";
    msg += "thisfullUploadPath = "+thisfullUploadPath;

    alert(msg);

    var ft = new FileTransfer();
    ft.upload(thisfullUploadPath, "http://10.0.17.121/~email/ttmovefiles.php", fileUploadSuccess, fileUploadFailure, options);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:43:23.140

在android上，你需要解决FileSystem

```
window.resolveLocalFileSystemURI(FILEURI, function(msg){
// success call msg.fullPath
}, function(){
// FAIL
}); 
```

# windows-runtime - 何时应在 WinRT 中保存应用程序数据？

> ID：13273504
> 
> 赞同：5
> 
> 时间：2012-11-07T16:05:15.187
> 
> 标签：windows-runtime

在 WinRT 中，Suspended 事件应该用于保存应用程序数据。它甚至是用 Visual Studio 附带的模板编写的。但是，当用户关闭应用程序时，Suspended 事件直到 10 秒后才会触发。如果用户同时启动应用程序，数据将丢失。在这种情况下我应该如何处理？我尝试了其他事件，例如页面的 NavigatedFrom ，但没有一个被触发。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-07T16:51:55.510

你可以试试这个：

```
 Window.Current.Activated += (sender, args) =>
        {
            if (args.WindowActivationState ==
                CoreWindowActivationState.Deactivated)
                ; //save data
        }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T21:19:15.897

如果用户关闭应用程序**，他希望应用程序下次从头开始**。但是，如果用户离开应用程序去做另一件事**，他希望返回到最后一个操作**。

如果您强制您的应用在用户关闭应用时保存状态：

***用户如何在任何时候从头开始应用程序？***

# c# - 扩展方法必须在非泛型静态类中定义

> ID：13273508
> 
> 赞同：3
> 
> 时间：2012-11-07T16:05:21.440
> 
> 标签：c#

我收到上述错误。我在这个错误上看到了其他类似的帖子，但我似乎没有找到问题所在。我将我的类类型更改为静态并且错误抵抗。这是我的主表单类的完整代码：

我编辑了我的课程。这就是现在的样子，错误已更改为：“PhoneFind.frmMain”类型声明时缺少部分修饰符；这种类型的另一个部分声明存在。

```
namespace PhoneFind
{
    public partial class frmMain : Form
    {
        // the path to the temporary file to store the webresponse
        String path = "c:\\Temp\\webresponse.txt";
        public frmMain()
        {
            InitializeComponent();
            comboSelectSearchEngine.SelectedIndex = 0;
            ofdPhones.Filter = "txt files (*.txt)|*.txt";
            listbxMessages.Items.Clear();
            addItemToListBox(listbxMessages, "Welcome to ActionBase Phone Find!");
            addItemToListBox(listbxMessages, "Select the file containing the numbers.");
            radioNumbers.Checked = true;
        }

        private void frmMain_Load(object sender, EventArgs e)
        {

        }

        private void btnLoadFile_Click(object sender, EventArgs e)
        {
            if (ofdPhones.ShowDialog() == System.Windows.Forms.DialogResult.OK)
            {
                txtFile.Text = ofdPhones.FileName;

                // Read the file line by line and add the numbers to the numbers listbox.
                listbxNumbers.Items.Clear();
                String line;
                int numbersCounter = 0;
                System.IO.StreamReader file = new System.IO.StreamReader(ofdPhones.FileName);
                while ((line = file.ReadLine()) != null)
                {
                    listbxNumbers.Items.Add(line.Trim());
                    numbersCounter++;
                }
                addItemToListBox(listbxMessages, ofdPhones.FileName + " loaded.");
                addItemToListBox(listbxMessages, numbersCounter + " records found in the file.");

            }
        }

        // add item to the listbox and move scroll to the end of the listbox for the latest messages to be visibile to the viewer
        private void addItemToListBox(ListBox listbox, String item)
        {
            listbox.Items.Add(item);
            listbox.SelectedIndex = (listbox.Items.Count - 1);
        }

        private void radioNumbers_CheckedChanged(object sender, EventArgs e)
        {
            if (!radioNumbers.Checked)
            {
                grpbxNumbers.Text = "Names and Addresses";
            }
            else
            {
                grpbxNumbers.Text = "Numbers";
            }
        }

        private void btnRun_Click(object sender, EventArgs e)
        {
            if (listbxNumbers.Items.Count == 0)
            {
                MessageBox.Show("No records have been loaded." + "\n" + "Use the browse button to load records.", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
            else if (!CheckForInternetConnection())
            {
                MessageBox.Show("No internet connection.", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
            else
            {
                String response;
                switch (comboSelectSearchEngine.SelectedIndex)
                {
                    case 0: // Hitta.se
                        foreach (String item in listbxNumbers.Items)
                        {
                            WebRequestObj request = new WebRequestObj(item, "hitta");
                            response = request.sendRequest();
                            if (response.Equals("Error"))
                            {
                                addItemToListBox(listbxMessages, "Error sending '" + item + "' to the server.");
                            }
                            else
                            {
                                //create a temporary file to work on the response
                                StreamWriter sw;
                                if (!File.Exists(path)) {
                                    sw = File.CreateText(path);
                                }
                                try
                                {
                                    File.WriteAllText(path, String.Empty); // clear the content of the file
                                    sw = File.AppendText(path);
                                    sw.WriteLine(response);
                                    sw.Flush();
                                    sw.Close();
                                    String s = findResultType(path);
                                    MessageBox.Show(s);
                                }
                                catch (IOException ioe)
                                {
                                    MessageBox.Show(ioe.Message,"Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
                                }

                            }
                        }
                        break;
                }
            }
        }

        public bool CheckForInternetConnection()
        {
            try
            {
                using (var client = new System.Net.WebClient())
                using (var stream = client.OpenRead("http://www.google.com"))
                {
                    return true;
                }
            }
            catch
            {
                return false;
            }
        }

        /*
         * findResultType
         * gets the web response and finds out if the matching result of the search termis one of the following:
         * 1\. one person (oneperson)
         * 2\. one company (onecompany)
         * 3\. more than one person, no company (manypersonnocompany)
         * 4\. no person, more than one company (nopersonmanycompany)
         * 5\. more than one person, more than one company (manypersonmanycompany)
         * 6\. no person, no company (nopersonnocompany)
         */
        public String findResultType(String reponsepath)
        {                   
            HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
            doc.Load(reponsepath);
            List<String> itemList = new List<String>();
            IEnumerable<String> v = null;
            var item = doc.DocumentNode.SelectNodes("//body[@id='person']");

            if (item != null)
            {
                v = item.Select(p => p.InnerText);
                itemList = v.ToList();
                if (itemList.Count == 1)
                    return "oneperson";
            }
            else
            {
                item = doc.DocumentNode.SelectNodes("//body[@id='company']");
                if (item != null)
                {
                    v = item.Select(p => p.InnerText);
                    itemList = v.ToList();
                    if (itemList.Count == 1)
                        return "onecompany";
                }
            }

            //for (int i = 0; i < itemList.Count; i++)
            //{
            //    MessageBox.Show(itemList[i]);
            //    //console.writeline(itemlist[i]);
            //}
            //console.writeline(itemlist.count + " results found.");
            return "";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-07T16:07:33.340

这是您的第一个问题：

```
public static class frmMain : Form 
```

您不能从另一个类派生静态类。静态类总是隐式派生自`Object`. 静态类中也不能有非静态成员。

所以基本上，你不能把你的扩展方法放在你的`frmMain`类中（应该重命名以遵循 .NET 命名约定并同时更具描述性）。你为什么*要把*扩展方法放在那个类中呢？

我什至在您发布的代码中都看不到扩展方法 - 您是否删除了它？*是在您尚未*发布的其他课程中吗？

从根本上说，我认为你需要退后一步。听起来您在没有完全理解编译器错误消息的情况下做出了反应。阅读扩展方法，阅读什么是静态类，直到你真正*理解*为什么你不希望你的表单类是静态的，以及为什么你*想让*包含你的扩展方法的类成为静态的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:10:10.827

一个`static`类不能有公共构造函数。此外，`static`表单毫无意义，因为您需要显示它们的实例。

如果你有一个扩展方法（我没有看到任何......），你必须将它移动到一个单独的`static`类中，你不能创建以下实例：

```
static class MyExtensions
{
  public static void Extend(this Object o) {}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T16:10:53.097

您应该始终将扩展方法放在单独的静态类中。

您无法通过简单地将类标记为静态来解决问题。这改变了类的整个含义。相反，为扩展方法创建一个新类。

例如：

```
public static class Extensions
{
    public void SomeExtension(this object arg)
    {
        ...
    }
} 
```

# javascript - Yii 和 jquery 和 javascript 包含...困惑

> ID：13273516
> 
> 赞同：1
> 
> 时间：2012-11-07T16:05:54.997
> 
> 标签：javascript, jquery, yii

来自[http://www.yiiframework.com/forum/index.php/topic/37313-confused-about-jquery-and-script-inclusion-handling/](http://www.yiiframework.com/forum/index.php/topic/37313-confused-about-jquery-and-script-inclusion-handling/)的交叉发布，但有时人们在这里回答得更快......

我对 Yii 对 jquery 和其他 javascript 文件包含的处理感到非常困惑。

这是有效的：

```
<script type="text/javascript">
    jQuery(document).ready(function() {
        jQuery('#Event_recuring_nature, #Event_venue, #Event_expected_attendance, #Event_age_group, #Event_state, #Event_gender, #Event_ethnicity, #Event_exclusivity, #Package_cash_product_sponsorships, #Event_vanue_signature, #Event_logo_on_step_and_repeat, #Event_inclusion_in_press, #Event_ad_space, #Event_inclusion_in_event_materials, #Package_category_exclusivity, #logo_on_signature, #Event_proposed_events_included, #Event_dependant_on_sponsorship, #Event_sponsorship_type, #Event_attendee_professions, #Event_attendee_income').yaselect();
    });
</script>
<script type="text/javascript" src="/js/libs/jquery-ui-datetimepicker.js"></script>
<script type="text/javascript" src="/js/event_create.js"></script>
<script type="text/javascript" src="/js/slider.js"></script>
<script type="text/javascript" src="/js/other_social.js"></script>
<script type="text/javascript" src="/js/package.js"></script> 
```

而这（据说会更好？）没有：

```
<?php 
Yii::app()->clientScript->registerScript('create-script', "
    $(function()  {
          $('body').css('overflow-x','hidden');
        $('#Event_recuring_nature, #Event_venue, #Event_expected_attendance, #Event_age_group, #Event_state, #Event_gender, #Event_ethnicity, #Event_exclusivity, #Package_cash_product_sponsorships, #Event_vanue_signature, #Event_logo_on_step_and_repeat, #Event_inclusion_in_press, #Event_ad_space, #Event_inclusion_in_event_materials, #Package_category_exclusivity, #logo_on_signature, #Event_proposed_events_included, #Event_dependant_on_sponsorship, #Event_sponsorship_type, #Event_attendee_professions, #Event_attendee_income').yaselect();
    });

");
?>
<?php Yii::app()->clientScript->registerScriptFile($this->assetsBase.'/js/libs/jquery-ui-datetimepicker.js'); ?>
<?php Yii::app()->clientScript->registerScriptFile($this->assetsBase.'/js/event_create.js'); ?>
<?php Yii::app()->clientScript->registerScriptFile($this->assetsBase.'/js/slider.js'); ?>
<?php Yii::app()->clientScript->registerScriptFile($this->assetsBase.'/js/other_social.js'); ?>
<?php Yii::app()->clientScript->registerScriptFile($this->assetsBase.'/js/package.js'); ?> 
```

我有 `<app_dir>/js/`所有 javascript 的目录，并 `<app_dir>/protected/assets/js`按照 yii 论坛上的 registerScriptFile 帖子中的建议创建（据说可以很好地处理脚本包含）。我当然有重复的文件，我正在清理。

布局在标题中有这个：

```
 <?php Yii::app()->clientScript->registerCoreScript('jquery')?>
    <?php Yii::app()->clientScript->registerScriptFile($this->assetsBase.'/js/libs/jquery-ui-1.8.20.custom.min.js')?>
    <?php Yii::app()->clientScript->registerScriptFile($this->assetsBase.'/js/libs/jquery.yaselect.min.js')?>
    <?php Yii::app()->clientScript->registerScriptFile($this->assetsBase.'/js/script.js')?> 
```

我在 config/main.php 中有这个：

```
// application components
   'components'=>array(
      'clientScript'=>array(
            'packages'=>array(
                 'jquery'=>array(
                     'baseUrl'=>Yii::app()->request->baseUrl . '/js/libs/',
                     'js'=>array('jquery-1.7.2.min.js')
                  )                                       
             )
      ), 
```

（我知道 baseUrl 现在指向 /js，但尝试使用

```
'baseUrl'=>Yii::app()->basePath . '/assets/js/libs' 
```

也根本没有加载 jquery ！！！

请帮忙！我是 Yii 的新手，对此我失去了理智。谢谢你。

编辑：这是代码生成的：

```
<script type="text/javascript" src="/js/libs/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="/assets/ab20866e/jquery.yiiactiveform.js"></script>
<script type="text/javascript" src="/assets/2dfe5520/js/libs/jquery-ui-datetimepicker.js"></script>
<script type="text/javascript" src="/assets/2dfe5520/js/event_create.js"></script>
<script type="text/javascript" src="/assets/2dfe5520/js/slider.js"></script>
<script type="text/javascript" src="/assets/2dfe5520/js/other_social.js"></script>
<script type="text/javascript" src="/assets/2dfe5520/js/package.js"></script>
<script type="text/javascript" src="/assets/2dfe5520/js/libs/jquery-ui-1.8.20.custom.min.js"></script>
<script type="text/javascript" src="/assets/2dfe5520/js/libs/jquery.yaselect.min.js"></script>
<script type="text/javascript" src="/assets/2dfe5520/js/script.js"></script> 
```

对我来说，第二行 /assets/ab20866e/jquery.yiiactiveform.js 看起来很可疑，因为它具有不同的资产 ID...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T16:53:23.460

虽然我面前没有您的布局文件，但您的布局似乎`$content`在脚本文件注册之前已经存在。

因此，视图中的脚本被加载，然后是模板中的脚本。发生这种情况时，日期时间选择器正在加载，但由于 jquery-ui 尚未加载而报告错误。确保您的模板之前加载了脚本`$content`。

或者，您可以通过指定位置参数来强制加载在视图中的脚本在正文中，而不是在头部中，例如：

```
<?php Yii::app()->clientScript->registerScriptFile(Yii::app()->request->baseUrl . '/js/libs/jquery-ui-datetimepicker.js', CClientScript::POS_BEGIN); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:32:54.910

要考虑的另一件事是强制 Yii 从一开始就加载 jQuery，如下所示：

```
cs()->registerCoreScript('jquery'); 
```

你也可以像这样加载 jQuery UI：

```
cs()->registerCoreScript('jquery.ui'); 
```

我发现这在加载其他 jQuery 库和文件时解决了很多*registerScriptFile* POS_BEGIN/POS_HEAD 问题（如 ernies 回答）

# c++ - 模板忽略了 const（为什么？）

> ID：13273518
> 
> 赞同：7
> 
> 时间：2012-11-07T16:05:57.417
> 
> 标签：c++, templates, constructor, constants, default-constructor

有人知道，为什么会编译？

```
template< typename TBufferTypeFront, typename TBufferTypeBack = TBufferTypeFront>
class FrontBackBuffer{

public:

  FrontBackBuffer(
    const TBufferTypeFront  front, 
    const TBufferTypeBack back):    ////const reference  assigned to reference???
     m_Front(front),
     m_Back(back)
  {
  };

  ~FrontBackBuffer()
  {};

  TBufferTypeFront m_Front;       ///< The front buffer
  TBufferTypeBack m_Back;         ///< The back buffer

};

int main(){
    int b;
    int a;
    FrontBackBuffer<int&,int&> buffer(a,b); //
    buffer.m_Back = 33;
    buffer.m_Front = 55;
} 
```

我用 GCC 4.4 编译。为什么它甚至让我编译这个？不应该出现我不能将 const 引用分配给非 const 引用的错误吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-07T16:11:36.830

问题是如果 type`T`是`int&`，那么 type`const T`不是`const int&`，但是`int & const`。在模板替换和 typedef 结果中忽略引用上的非法顶级 const。

另一方面，如果`T`是`const int`，那么`T&`是`const int&`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-07T16:11:46.837

当 TypeBufferFront 为`int&`时，`const TBufferTypeFront`等效于`int& const`，其中 const 在模板替换期间被忽略，因为所有引用都是常量，即使它们引用的不是。

因此，当用 实例化时`int&`，您的构造函数是有效的`FrontBackBuffer(int&, int&)`，它按给定的方式工作。

这是为什么许多人会使用`T const`而不是的示例`const T`，以更清楚地说明替换是如何发生的，并允许他们从右到左阅读 cv 限定符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T16:24:42.493

为了让代码做你想做的事，它必须阅读：

```
 FrontBackBuffer(
    typename std::remove_reference<TBufferTypeFront>::type const&  m_front, 
    typename std::remove_reference<TBufferTypeBack>::type const& m_back):    ////const reference  assigned to reference???
    m_Front(m_front),
    m_Back(m_back)
  {
  }; 
```

它具有添加的“功能”，即在用于构造时将其他类型转换为 const 引用`FrontBackBuffer`。

Now this isn't perfect. This prevents temporary arguments to `FrontBackBuffer` from being moved, and passes even small cheap to copy types (like `char`) by reference instead of by value. There are standard C++0x techniques to do this that are a bit awkward to write if you care.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T16:11:56.800

`FrontBackBuffer::m_Front`是在您的模板实例化`TBufferTypeFront`中转换为的类型。`int&`分配给`int&`.

# windows - 带有 % 和 ^ 的 CMD

> ID：13273521
> 
> 赞同：2
> 
> 时间：2012-11-07T16:06:07.277
> 
> 标签：windows, batch-file, cmd

我有一个 file.bat，我通过 Windows 中的命令行运行它。

它需要读取一些字符，例如`%`密码`^`。

当我运行脚本时，我看到 shell 没有读取这些字符。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T16:08:48.157

您需要使用`^`.

为了逃避`^`你使用另一个`^^`

正如 jeb 正确指出的那样，您无法`%`在命令行上转义 's，但是当在变量字符串中使用它们设置变量时，它似乎接受了它们。

```
set p=hello%
echo %p%
hello% 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T22:25:32.460

试试这个：

```
setlocal EnableDelayedExpansion
set var=something
for /f "delims=" %%a ("!var!") do
(
  endlocal 
  set "result=%%~a"
) 
```

这将使命令提示符从**var** - [source读取特殊字符](http://ss64.org/viewtopic.php?id=1460)

# javascript - 尝试 Catch 在 Chrome 中未捕获语法错误

> ID：13273526
> 
> 赞同：3
> 
> 时间：2012-11-07T16:06:12.257
> 
> 标签：javascript, function, google-chrome

我正在尝试解决其他人的 JavaScript 文件的问题，他们声明了一个如下所示的函数。

```
function window.confirm(str) {
..... code here .....
} 
```

这适用于 IE，但在 Google Chrome 中，它会在`window.confirm`. 我试图像下面这样尝试捕获它，但这不起作用，同样的语法错误。然后它不会让我使用该 JavaScript 文件中定义的任何函数。

```
try {
    var window.confirm = function(str) {
        ..... code here .....
    };
}
catch(e) {} 
```

我还尝试将声明更改为变量，如下所示，但这也不起作用。同样的错误。

```
var window.confirm = function(str) {
    ..... code here .....
}; 
```

有没有办法在 Chrome 中捕捉到这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T16:08:08.163

两点：

*   `try/catch`用于检测执行错误，而不是编译错误。不要部署有语法错误的代码。

*   `function window.confirm(){`是你必须避免的 MS 习语。您可以使用`window.confirm = function() {`，或者，如果您在全局范围内，只需使用`var confirm = function() {`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T16:08:45.073

`function window.confirm(str)`并且`var window.confirm ...`无效。相反，尝试：

```
window.confirm = function(str){
..... code here .....
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-08T09:41:30.747

如果您绝对需要尝试捕获“Uncaught SyntaxError”错误，那么您将不得不依赖 JavaScript 的隐藏在地板下被误解的继子函数`eval()`。

在下面的示例代码中，`obj`仅当传入字符串评估为有效对象时才会更新；否则`obj`将默认为`{}`. 让我们假设`$someTextField`拉入在 CMS 文本区域字段中输入的设置，并且内容编辑器在该字段中输入了这个格式错误的字符串：

```
{
  "foo": "bar
} 
```

示例代码：

```
var oSettings = {};

// Returns "Uncaught SyntaxError: Unexpected token ILLEGAL(…)"
try {
  oSettings = <?php echo $someTextField ?>;
} catch(e) {}

// This works
try {
  eval('oSettings = <?php echo $someTextField ?>');
} catch(e) {} 
```

请记住，如果要评估的字符串来自某个外部源（例如，CMS），并且您无法像本示例中那样控制它，那么您需要做三件事：

1.  检测并阻止执行可能会破坏您的应用程序的 JavaScript 代码。

2.  转义传入字符串中的引号以避免与 JavaScript 引号冲突。由于我们在此示例中使用 PHP，因此最好执行以下操作：

    `eval('oSettings = <?php echo addslashes($someTextField) ?>');`

3.  删除换行符，因为评估的字符串需要在一行上。做这样的事情会更好：

    `eval('oSettings = <?php echo addslashes(str_replace(array("\r\n", "\n", "\r"), "", $someTextField)) ?>');`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T16:07:52.080

您必须修复语法错误。Try/catch 不会捕获语法错误，因为语法错误是编译时错误，而 try/catch 只能捕获运行时错误。

# scala - 示例：Play2.0-scala 的日历

> ID：13273527
> 
> 赞同：1
> 
> 时间：2012-11-07T16:06:21.913
> 
> 标签：scala, playframework-2.0, fullcalendar

我需要在我的网站上添加一个日历来管理事件，我找到了这个[示例](https://github.com/biesior/Play-20-Sample-FullCalendar-Java)，但它仅适用于 Java。我试图制作它的 scala 版本，但我在某些方面遇到了困难。

所以我想知道是否有类似的东西，但对于 scala 版本。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:15:55.857

正如@pedrofurla 已经说过的，只需从 scala 中使用它。这是 scala 的优点之一——您可以无缝地使用 java 代码。

# java - 通过 Resourcebundle 编码问题读取属性文件

> ID：13273530
> 
> 赞同：3
> 
> 时间：2012-11-07T16:06:30.980
> 
> 标签：java, character-encoding

我正在使用资源包来读取基于语言环境的属性文件。（Lang_en_US.properties，..）

resourcebundle 被读取为 iso-8859-1（标准？）。

```
ResourceBundle rb= ResourceBundle.getBundle("Lang", locale); 
```

然后在整个 Spring/JSF Web 应用程序中使用资源包来生成前端文本。

```
<h:outputText value="#{msg['message.example']}" /> 
```

但我相信这无关紧要，因为调试表明在调用 rb getMessage 之后文本已经是乱码。

```
// returns gibberish:
log.trace(rb.getMessage("l_SampleText")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:11:57.443

我相信您假设资源包被读入为 iso-8859-1 是正确的。 [Properties 类的 Javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html) ( [source](https://stackoverflow.com/questions/4659929/how-to-use-utf-8-in-resource-properties-with-resourcebundle) )

您确定您的属性文件保存在 iso-8859-1 格式下吗？我相信 Notepad++ 提供了至少检查编码的功能，如果不转换它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:47:24.013

由于您使用的 UTF-8 字符可能无法在 ISO-8859-1 中正确编码，因此您有 2 个选项

1.  使用[nativetoascii](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/native2ascii.html)工具对包中的字符进行转义，以便正确读取所有字符

2.  使用 Spring 的[MessageSources 的](http://www.cakesolutions.net/teamblogs/2009/04/02/utf-8-encoding-and-message-sources/)bundle support，它支持 UTF-8 编码的文件

# data-structures - 将整数集链接到值的数据结构/哈希函数

> ID：13273532
> 
> 赞同：0
> 
> 时间：2012-11-07T16:06:32.353
> 
> 标签：data-structures, hash, hashmap

给定*n 个*整数 id，我希望将所有可能的*最多 k*个 id 的集合链接到一个常数值。我正在寻找一种将集合（例如 {1, 5}, {1, 3, 5} 和 {1, 2, 3, 4, 5, 6, 7}）转换为唯一值的方法。

保证：

*   n < 100 和 k < 10（同样：集合大小将在 [1, k] 范围内）。
*   id 的顺序无关紧要：{1, 5} == {5, 1}。
*   *所有*组合都是可能的，但有些可能被排除在外。
*   所有集合和值都是恒定的，并且只生成一次。没有删除或插入，没有值更新。
*   一旦生成，唯一发生的操作将是查找。
*   查找将是频繁且单向的（给定集合，查找值）。
*   无需对*值*进行排序（或以其他方式组织） 。

此外，如果“相邻”集合（删除一个 id、添加一个 id、交换一个 id 等）以及“至少包括该集合的所有集合”很容易到达，那将是很好的（但不是强制性的）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:28:17.813

使用素数的乘积进行枚举。

*   一个 -> 2
*   b -> 3
*   c -> 5
*   d -> 7
*   等等

现在哈希（ab）：= 6，哈希（abc）：= 30

一个很好的副作用是，如果“ab”是“abc”的子集，那么：

```
hash(abc) % hash(ab) == 0 
```

和

```
hash(abc) / hash(ab) == hash(c) 
```

坏消息：您可能会遇到溢出，第 100 个素数可能在 1000 左右，而 64 位无法容纳 1000**10。这不会影响作为散列函数的功能；只有子集的东西将无法工作。[相同的方法适用于字谜](https://stackoverflow.com/a/11117236/905902)

另一个选项是 Zobrist 散列。它等效于素数方法，但不是素数，而是使用一组固定的（随机）数字，而不是乘法，而是使用 XOR。对于像您这样的固定小型（它需要 << ~70 位）设置，可以调整 zobrist 表以完全避免冲突（产生*完美*的哈希）。

最后（也是最简单的）方法是使用（100位）位图，并将其视为哈希值（可能在模表大小之后）

一个*完全不相关*的方法是在位图的位上构建一个决策树。（树的*最大*深度为 k）[在位值上的相关 kD 树](https://stackoverflow.com/a/9295393/905902)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:12:21.090

可能不是最佳解决方案，但您可以执行以下操作：

1.  使用简单的 IntegerComparator 将集合从最低到最高排序
2.  将集合的每个项目添加到字符串

所以如果你有 {2,5,9,4} 第一步-> {2,4,5,9}; 第二->“2459”

这样，您将从唯一的集合中获得唯一的字符串。如果您确实需要将它们映射到整数值，则可以在此之后对字符串进行哈希处理。

我能想到的第二种方法是将它们存储在 java [Set](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)中，然后简单地将其映射到带有键的[HashMap](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html)`set`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T16:58:55.313

从每组 {1, 6, 87, 89} = {1,5,81,2,0,0,...} {1,2,3,4} = { 1,1, 1,1,0,0,0,0... };

然后使用可变长度编码对每个数字进行二进制编码并连接这些位。

很难比较这些集合（除了前几个相等的位），但是由于集合中不能有很多大的间隔，所有可能的值都可能适合 64 位。（至少 16 位的松弛...）

# ios - 为什么委托设置为弱引用而不是强引用？

> ID：13273533
> 
> 赞同：0
> 
> 时间：2012-11-07T16:06:33.347
> 
> 标签：ios, delegates, datasource

> **可能重复：**
> [ios 对强/弱引用感到困惑](https://stackoverflow.com/questions/11458286/ios-confused-about-strong-weak-references)

我是 ios 开发的新手，正在阅读斯坦福关于代表的讲义。为什么委托被设置为弱引用而不是强引用？

# jquery - jquery代码工作一次但不重复

> ID：13273535
> 
> 赞同：0
> 
> 时间：2012-11-07T16:06:51.440
> 
> 标签：jquery, asp.net-mvc, webgrid

我有一个小的 jquery 脚本，当我单击网格/表（从 webgrid 构建）中的 ajax actionlink 时，它将用旋转的轮子替换内容。它只在第一次工作。

```
$('#thisGrid tr td').click(function () {
    $(this).html('<img  src="@Url.Content("~/Content/ajax-loader.gif")" alt="Loading... Please Wait" style="height: 20px;"/>');
}); 
```

我还没有发现任何东西可以让我确定为什么会这样......关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:12:46.603

可能尝试使用实时点击功能。

```
$('#thisGrid tr td').live('click', function(){ ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:13:22.913

**委托**活动

```
$('#thisGrid').on('click','td' , function () {
    $(this).html('<img  src="@Url.Content("~/Content/ajax-loader.gif")"
                alt="Loading... Please Wait" style="height: 20px;"/>');
}); 
```

**更新** jQuery 1.6 及以下

```
 $('#thisGrid').delegate('td' , 'click', function () {
        $(this).html('<img  src="@Url.Content("~/Content/ajax-loader.gif")"
                    alt="Loading... Please Wait" style="height: 20px;"/>');
    }); 
```

# jquery - 在使用 Jquery 为 POST 提交 JSON 数组时，使用 Jersey 的 REST 问题，

> ID：13273536
> 
> 赞同：4
> 
> 时间：2012-11-07T16:06:59.660
> 
> 标签：jquery, json, spring, rest, jersey

我有一个 REST 的 Jersey 实现，它提供了来自 Tomcat（Server1）的 API

```
@POST
@Consumes({ MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
@Produces({ MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML })
public Users create(Users users) {
    return dao.create(users);
} 
```

并且请求是从 Apache (Server2) 的 jquery 客户端发布的

```
$.ajax({
    type: 'POST',
    contentType: 'application/json',
    url: rootURL,
    dataType: "json",
    data: formToJSON(),
    success: function(data, textStatus, jqXHR){
        alert('user created successfully');

    },
    error: function(jqXHR, textStatus, errorThrown){
        alert('user error: ' + textStatus);
    }
}); 
```

此 jquery 实际上正在向服务器提交请求，但服务器/API 无法识别此请求。所有其他请求（如 @Formparam /@Header 等带有 POST /GET 的）都在工作

如果我使用 REST 客户端使用相同的东西，它正在工作，任何人都可以帮我用请求对象类型对这个问题进行排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:37:29.843

调试通信问题的最佳方法是检查发送到服务器的标头。为了完成此任务，您可以使用 Chrome 开发人员工具在浏览器中检查请求。打开 Chrome，按 F12，转到 Network 选项卡，按 XHR 过滤并强制发出此请求。复制所有标题并将它们张贴在这里。

然后，使用 Jersey 客户端 API 进行测试。启用日志记录，向客户端添加过滤器：

```
client.addFilter(new LoggingFilter()); 
```

然后查看控制台并将输出与 Chrome Dev Tools 的前一个输出进行比较。

# java - 通过 XML 添加 TemplateMethod 的

> ID：13273540
> 
> 赞同：1
> 
> 时间：2012-11-07T16:07:09.120
> 
> 标签：java, xml, freemarker

我想将 XML 文件中的 TemplateMethods 添加到 Freemarker，而不是每次都触及现有的。
使用以下值已经可以做到这一点：

**示例 XML：**

```
<example>
    <value1>abc</value>
    <value2>def</value>
</example> 
```

**示例模板：**

```
This value1: ${doc.example.value1} and this value2: ${doc.example.value2} 
```

*我可以在 xml 中添加任意数量的值并在模板中使用它，而无需更改调用程序。*

* * *

我如何通过实现来做到这一点`TemplateMethodModel`，而无需在每次添加/删除时更改我的 Freemarker 代码？

更具体 - 我想做什么：

**XML 模型：**
*包含类和 TemplateMethod 的名称*

```
<templatemethodmodel>
   <method name="intToHex">example.methods.IntToHexMethod</method>
</templatemethodmodel> 
```

**模板：**
*调用`IntToHexMethod`类的实例*

```
Only an example: ${intToHex(3)} 
```

现在应该可以添加新方法（= 带有名称和类的 xml 条目），而无需触摸我处理模板的 java 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:39:10.327

如果您想通过 FreeMarker 的 DOM 包装器来实现（即通过将 DOM 对象公开为“doc”），那么您不能这样做（除非您 extends `freemarker.ext.dom.NodeModel`，但这可能很困难）。但是，如果您真的不需要具有所有与 XML 相关的功能（如 XPath）的 DOM 包装器，您可以从 XML 中创建一个`Map`(of `Map`-s of `Map`-s etc.) 并为模板公开`Map`as `doc`。（或者，您可以编写自己的`DOM`Node 包装器，将 XML 完全按照您的需要暴露给模板，但这有点复杂。）

# python - 将我的整数放入python中的列表中

> ID：13273553
> 
> 赞同：2
> 
> 时间：2012-11-07T16:07:33.660
> 
> 标签：python, string, list, char, ord

我正在创建一个使用凯撒密码对消息进行编码和解码的程序。到目前为止，我正在构建基础工作，我正在尝试获取用户给我的字符列表并使用 ord 制作整数列表......到目前为止，我遇到的所有问题是将收到的整数重新放入一个列表。

```
import random

encode_decode = input("Do you want to encode, or decode? (e/d)")

shift_amount = input("Please enter the shift amount for your message")

if encode_decode == "e" or encode_decode == "E":
    user_words_unrefined = input("Enter your message to encode!")
elif encode_decode == "d" or encode_decode == "D":
    user_words_unrefined = input("Enter your message to decode!")

user_words_refined = list(user_words_unrefined)

Alphabet = [chr(i) for i in range(ord('a'), ord('z') + 1)]

Counter = 0
for i in range(len(user_words_refined)):
    user_words_numbers = (ord(user_words_refined[Counter]))
    user_numbers_list = [user_words_numbers]
    print(user_numbers_list)
    Counter += 1 
```

输入（“你好，党的人！”）输出它将它们全部打印在单独的行上，并用方括号括起来......有什么想法吗？

```
[72]
[101]
[108]
[108]
[111]
[44]
[32]
[80]
[97]
[114]
[116]
[121]
[32]
[112]
[101]
[111]
[112]
[108]
[101] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T16:14:23.337

您可以使用列表推导，而不是使用跨越输入字符串长度的 for 循环。

```
user_numbers_list = [ord(letter) for letter in user_words_refined] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T16:15:09.370

这应该可以解决您的问题。请参阅代码中的注释。如果需要，我很乐意提供进一步的解释

```
user_numbers_list = []    #initialise the list
Counter = 0
for i in range(len(user_words_refined)):
    user_words_numbers = (ord(user_words_refined[Counter]))
    user_numbers_list.append(user_words_numbers)     #add to the end of the list
    print(user_numbers_list)
    Counter += 1 
```

最好的选择实际上是列表理解......请参阅 Jordan Lewis 的答案以获得更简洁的方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T16:15:26.233

将最后一部分更改为类似

```
user_numbers_list = []
Counter = 0
for i in range(len(user_words_refined)):
    user_words_numbers = (ord(user_words_refined[Counter]))
    user_numbers_list.append(user_words_numbers)
    print(user_numbers_list)
    Counter += 1 
```

另外，考虑直接通过 user_words_refined 进行迭代，例如

```
for word in user_words_refined:
    user_words_numbers = ord(word)
    user_numbers_list.append(user_words_numbers)
    print(user_numbers_list) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T16:25:14.177

就像旁注一样，而不是

```
encode_decode = input("Do you want to encode, or decode? (e/d)") 
```

你可以使用

```
encode_decode = input("Do you want to encode, or decode? (e/d)").lower() 
```

所以你不必`or`在你的 if 语句中使用太多的 's。

# ios - UIStatusBar + 切换全帧视频 + 旋转 = 帧问题

> ID：13273558
> 
> 赞同：0
> 
> 时间：2012-11-07T16:07:48.090
> 
> 标签：ios, video, screen-rotation, uistatusbar

我的视频（AVPlayer 实例）在一个较小的“最小化”窗口中开始播放。触摸屏幕以显示控件，并允许用户将其扩展为全屏，覆盖状态栏。我给 viewController 这个全帧：

```
[[UIScreen mainScreen] bounds] 
```

但是viewController仍然认为状态栏在那里，即使我先隐藏它：

```
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationSlide] 
```

因此视频屏幕从看不见的状态栏下方开始，位于 (0, statusBarHeight)。如果我在控件可见的情况下旋转设备（这使状态栏可见），问题仍然存在。如果我在控件被隐藏（并且状态栏丢失）时旋转设备，一切都会自行纠正，并且视频窗口按预期从 (0,0) 开始。

我的解决方案是在（0，-statusBarHeight）处启动全屏视频窗口，然后观察没有控件的旋转，然后我可以将视频窗口放回原点。呸。

当我将视频最小化回原始大小时，如果没有控件进行旋转，则视频窗口将过高（statusBarHeight）像素。

所以另一个布尔值告诉我，当我最小化视频时，如果我应该通过 (0, +statusBarHeight) 纠正它的“真实”位置。双呸。

如果此时我们旋转设备，一切都很好。但是，如果我们改为立即最大化视频，则全屏视频会高出 (statusBarHeight) 像素。三重呸！

好的，更多的布尔值，但这一切都因为视频引擎是一个单独的框架而变得复杂，并且“控制应用程序”也有类似的问题..啊！

我会以错误的方式解决这个问题吗？它变得太复杂和脆弱了。我知道（通过查看野外的其他应用程序）这是一个常见问题 - 我有一个表现出相同行为的应用程序列表。有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T21:27:47.883

我写了一个非常简单的应用程序来重现这个问题，并用了一个“技术支持事件”来询问苹果的开发者技术支持。他们建议我提交错误报告（ID 12685127）。他们说：

> AVPlayer 绝对没有考虑到状态栏..

和

> 恐怕我没有看到更好的解决方案，除了像你现在所做的那样纠正这个..

# django - Django 模板样式和 CSS 随中间件消失

> ID：13273559
> 
> 赞同：2
> 
> 时间：2012-11-07T16:07:47.933
> 
> 标签：django, django-models, django-forms, django-templates, django-views

我有自定义中间件，当我将它添加到我的 settings.py 中的 MIDDLEWARE_CLASSES 元组时，网站上的所有 css 和图像都会消失，只留下文本。

**中间件.py**

```
from django.shortcuts import redirect
from django.core import urlresolvers

class AcceptTOSMiddleware(object):
    def process_request(self, request):
        login_url = urlresolvers.reverse('login')
        tos_url = urlresolvers.reverse('tos')
        if request.path not in [login_url, tos_url]:
            profile = request.user.get_profile()
            if not profile.tos:
                return redirect(tos_url)
        return None 
```

**设置.py**

```
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.middleware.locale.LocaleMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',
    'pagination.middleware.PaginationMiddleware',
    'utils.middleware.AcceptTOSMiddleware'
) 
```

有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:13:43.650

1.  这应该**只发生在 development 中**，否则 HTTPD 将为静态文件提供服务，并且 django 方面将没有任何东西可以阻止它，

2.  阅读 runserver 的**控制台输出**，它应该显示对静态文件的请求以 3xx 重定向响应（可能是 301），

3.  对于开发，您的中间件**还应该检查**是否`request.path`不以`settings.STATIC_URL`nor开头`settings.MEDIA_URL`，`return None`在这种情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:15:46.453

听起来您正在通过 Django 提供静态文件；也许您正在使用开发服务器？

如所写，您的中间件将重定向到任何与登录无关的路径，包括图像和 CSS。您还可以排除 STATIC_URL 和 MEDIA_URL 下的所有内容。

# eclipse - 如何将 SoapUI 添加到 SVN？

> ID：13273561
> 
> 赞同：1
> 
> 时间：2012-11-07T16:07:55.570
> 
> 标签：eclipse, tortoisesvn, repository, soapui

我正在尝试在 TortoiseSVN 存储库中包含soapUI。目前，我在 TortoiseSVN 中有 Eclipse，但我也想添加soapui。我的 SoapUI 项目导入了一个 .jar，它由我在 Eclipse 上的 java 文件组成。我该怎么做呢？

我在网上进行了研究，告诉我使用 svn://svn.eviware.com/soapui/trunk/core 在 Eclipse 中创建一个新的存储库，但是这是我得到的错误。

![在 Eclipse 中为 SoapUI 创建新的存储库位置时出错](../Images/ae91bb589de6ffe7c1a7d1b657c84c49.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:57:17.323

根据您的屏幕截图，我假设您想获得 SoapUI 源代码并正确构建它？

SmartBear 将 SoapUI 的源代码从 SVN 移至 GitHub。你会在[这里找到源代码](https://github.com/SmartBear/soapui)

更多信息在[官方网站](http://www.soapui.org/Developers-Corner/building-soapui-from-svn.html)

# php - Zend Framework + Smarty 用于高流量网站

> ID：13273571
> 
> 赞同：0
> 
> 时间：2012-11-07T16:08:13.933
> 
> 标签：php, zend-framework, smarty

我正在考虑将 smarty 与 Zend 框架集成到一个大型项目中。我想要实现的目标是：提高代码可读性和加快开发速度。Zend 本身就很重，而且我还使用了 PropelORM，这增加了重量。我不太关心 PHP 性能，因为有备用 PHP 缓存可以缓存源代码，但是我仍然希望在向项目添加另一个大库之前好好考虑一下。

你有在高流量下使用 smarty 的经验吗？有什么我应该注意的问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:57:07.503

我在高流量项目（每天大约 40000 次访问）上使用 Zend 和 Smarty，没有任何问题。Smarty 集成也非常容易。模板被编译成 PHP 代码，所以不用担心。

小心助手，一个僵硬的助手可以让你的服务器宕机。但这不是Smarty的问题......

# java - 像 getNames() 这样的 Netty ChannelPipeline 方法是否保证以“正确”的顺序给出结果？

> ID：13273572
> 
> 赞同：0
> 
> 时间：2012-11-07T16:08:16.313
> 
> 标签：java, netty

我试图弄清楚如何将两个 Netty 管道连接成一个。看起来它应该足够简单。就像是：

```
List<String> namesOfSecond = second.getNames();
for (String name : namesOfSecond) {
    ChannelHandler handler = second.get(name);
    first.addLast("Second-" + name, handler);
} 
```

但是 getNames() 的 javadoc 只是说“返回处理程序名称的列表”。它没有说明列表的顺序，即使是任何特定的顺序。为了使上述代码正常工作，名称列表必须按照管道中与这些名称对应的处理程序列表的顺序排列。是吗？有保障吗？

还有一个 toMap() 函数，它“将此管道转换为有序 Map，其键是处理程序名称，其值是处理程序。” 我猜这似乎好一点，因为它明确表示地图是有序的。然而，它并没有说明它是由什么订购的。

我猜这些函数以“明显”和“正确”的顺序返回东西——即管道顺序（而不是按名称按词法排序）——但文档没有明确说明，所以我会想确定。有人知道吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:54:02.880

你的猜测是正确的。这两种机制从头到尾遍历已安装的处理程序（或准确地说是处理程序上下文），在第一种情况下构造一个列表，在第二种情况下构造一个 LinkedHashMap。

# c# - 如何正确调用 IL2JS？

> ID：13273574
> 
> 赞同：5
> 
> 时间：2012-11-07T16:08:27.697
> 
> 标签：c#

我看到微软开源的[IL2JS](https://github.com/Reactive-Extensions/IL2JS)，它似乎是一个通过编译 IL 将 Silverlight 应用程序编译为纯 javascript 的工具。

但是，我似乎无法让它工作。当我运行时：

> PS C:\source\IL2JS-master\bin> ./il2jsr -rewrite C:\FlatRedBallProjects\Test1\Test1\Test1\Bin\Debug\Test1.dll -out test.js -reference .\IL2JS_mscorlib.dll

当我运行这个时，我得到

> 错误 3003：没有程序集名称类似于特殊的“JSTypes”程序集 1 个错误，0 个警告

所以我尝试为 jstypes 添加另一个 -reference 选项并得到以下输出：

> PS C:\source\IL2JS-master\bin> ./il2jsr -rewrite C:\FlatRedBallProjects\Test1\Test1\Test1\Bin\Debug\Test1.dll -out test.js -reference .\IL2JS_mscorlib.dll -reference 。 \IL2JS_JSTypes_silverlight.dll
> 
> 错误 3005：无法从文件“C:\source\IL2JS-master\bin”加载程序集：无法加载 mscorlib 1 个错误，0 个警告

所以看起来你只能有一个 -reference 选项，但你需要以某种方式引用 jstypes 和 mscorlib 程序集。

我究竟做错了什么？

* * *

**编辑**：因此，经过更多调试后，正确的方法似乎是使用 2 -reference 参数。后者不起作用的原因是因为

```
 CCI.SystemTypes.Initialize(false, true, ResolveReference);

        // ----------------------------------------
        // Account for mscorlib being loaded
        // ----------------------------------------
        mscorlib = CCI.SystemTypes.SystemAssembly;
        if (mscorlib == null || mscorlib.Directory == null) 
```

在`AssemblyLoader.cs`. 最后一个 if 语句失败（`mscorlib.Directory`为空）。现在的问题是为什么...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T06:20:39.683

根据[https://github.com/Reactive-Extensions/IL2JS/blob/master/HOW_TO_BUILD.txt](https://github.com/Reactive-Extensions/IL2JS/blob/master/HOW_TO_BUILD.txt)，需要设置 IL2JSROOT 环境变量，

“或将注册设置 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\IL2JS@Root 设置为 。上面的 powershell 设置为您设置了此变量。如果您希望在其他地方使用解决方案或项目，请自行设置此变量。”

试试看，它可能会有所帮助。

# wpf - 带有 ItemsControl 的 ScrollViewer 不起作用

> ID：13273577
> 
> 赞同：1
> 
> 时间：2012-11-07T16:08:33.827
> 
> 标签：wpf

```
<ScrollViewer VerticalScrollBarVisibility="Visible"  Height="100">
        <ItemsControl Name="icReviews" BorderBrush="Black" BorderThickness="1" Height="300">
            <ItemsControl.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1" >
                    <GradientStop Offset="1" Color="#FFFF9900" />
                    <GradientStop Offset="0" Color="#FFDD4400" />
                </LinearGradientBrush>
            </ItemsControl.Background>

            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <UniformGrid Columns="3" Width="1712" Height="300"></UniformGrid>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>

            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition ></RowDefinition>
                                <RowDefinition></RowDefinition>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                <ColumnDefinition></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Row="0" Grid.Column="1" TextElement.FontFamily="FangSong" TextElement.FontSize="15"  TextElement.FontWeight="Bold" TextElement.Foreground="Blue">
                                <TextBlock Text="{Binding Path=Subject}" Foreground="White" TextElement.FontSize="15" TextElement.FontFamily="FangSong" TextWrapping="Wrap" Margin="5,5"></TextBlock>
                                <TextBlock Text="{Binding Path=Review}" Foreground="White" TextElement.FontSize="15" TextElement.FontFamily="FangSong" TextWrapping="Wrap" Margin="5,5"></TextBlock>
                                <WrapPanel>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="Posted by : " Foreground="White" Margin="5,5" TextElement.FontSize="15"></TextBlock>
                                        <TextBlock Text="{Binding Path=Username}" Foreground="White" TextElement.FontSize="15" TextElement.FontFamily="FangSong" Margin="5,5"></TextBlock>
                                    </StackPanel>
                                </WrapPanel>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </DataTemplate>
            </ItemsControl.ItemTemplate>

        </ItemsControl>
    </ScrollViewer> 
```

我现在已经使用滚动查看器的高度属性编辑了我的代码。我仍然看不到任何滚动条

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T19:10:55.953

你是给你`ScrollViewer`的高度，还是将它限制在一个限制其孩子高度的面板内？

如果高度不受某种限制，则没有理由`ScrollViewer`显示滚动条，因为它可以增长到显示其子项所需的任何高度。

您可以通过设置`VerticalScrollBarVisibility`and`HorizontalScrollBarVisibility`来测试它，`Visible`以查看您的`ScrollViewer`实际位置，如果是这种情况，那么您可以通过`ScrollViewer.Height`将到他们想要的任何大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:19:09.377

您必须定义一个包含 a的`ControlTemplate`for 。我不相信它默认包含一个...`ItemsPresenter``ScrollViewer`

# iphone - Web 应用程序后退按钮不起作用

> ID：13273578
> 
> 赞同：0
> 
> 时间：2012-11-07T16:08:33.520
> 
> 标签：iphone, web-applications, jquery-mobile, mobile-safari

我有一个 jquery mobile 使用的 webapp，这个 webapp 有很多页面。还添加了主屏幕按钮，感觉就像本机应用程序全屏一样，所以我为每个页面使用了通用标题，我不希望每个页面都有重复的标题。此标题有一个“返回”按钮，使用以下代码

```
<div data-role="header" data-theme="g" data-position="fixed" data-tap-toggle="false">
    <a onclick=history.back() data-icon="back" data-direction="reverse" data-role="button">Back</a>
</div> 
```

我在每个页面上都使用了 php cookie 存储功能，即当用户恢复此 webapp 时返回到以前的位置...

我的问题是当用户返回上一个位置时，我的后退按钮不起作用，是否可以修复。？或者 iPhone 不允许这个功能用于 webapp。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:19:09.593

为什么要`onclick=history.back()`手动设置？

> 当页面插件的 addBackBtn 选项为 true 时，框架会自动在标题上生成一个“后退”按钮。

来源： http: [//jquerymobile.com/test/docs/toolbars/docs-headers.html](http://jquerymobile.com/test/docs/toolbars/docs-headers.html)（跳转到“添加返回按钮”）

### 我自己的经历

在我的 jQuery Mobile 项目中，我从来没有遇到过在 iPhone 上自动生成后退按钮的问题。

# regex - 多个条件 GET 参数

> ID：13273581
> 
> 赞同：0
> 
> 时间：2012-11-07T16:08:41.560
> 
> 标签：regex, node.js, routing, express, params

如何将这两个获取请求合并为一个？

```
app.get('/:something/:else', function(req, res){
  res.render("something");
});

app.get('/:something', function(req, res){
  res.render("something");
}); 
```

我试过了，但没有用。

```
app.get('(/:something|/:something/:else)', function(req, res){
  res.render("something");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:18:42.123

我不是 100% 确定，但我认为你可以做到：

```
'/:something/:else?' 
```

否则，您可以将中间件函数存储在变量中：

```
var m = function (req, res) { }
app.get('/one', m);
app.get('/two', m); 
```

或者，您可以使用正则表达式。

```
app.get(/^\/commits\/(\w+)(?:\.\.(\w+))?$/, function(req, res){
  var from = req.params[0];
  var to = req.params[1] || 'HEAD';
  res.send('commit range ' + from + '..' + to);
}); 
```

Express.js 网站上有一些信息：http: [//expressjs.com/api.html#app.VERB](http://expressjs.com/api.html#app.VERB)

作者还有一个基于 Express.js 路由的客户端库，所以也许你可以在那里找到更多信息。那就是我可以'？例子。该库名为 page.js，可在以下位置找到：http: [//visionmedia.github.com/page.js/](http://visionmedia.github.com/page.js/)

# javascript - 在asp.net代码后面访问javascript文档

> ID：13273591
> 
> 赞同：0
> 
> 时间：2012-11-07T16:09:13.873
> 
> 标签：javascript, asp.net

我正在尝试从后面的 ASP.net 页面代码访问 javascript 文档。如何在后面的 c# 代码中执行与以下相同的操作？

```
document.getElementById(id).src = "myurl.com" 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:13:25.347

将 runat="server" 和 ID 添加到元素。然后，您应该能够通过属性集合访问 src。

```
<img src="http://www.google.com/img.png" id="imgGoogle" runat="server" />

Dim src as String = imgGoogle.Attributes("src") 
```

# perl - 打印实时更新脚本的进度条

> ID：13273594
> 
> 赞同：2
> 
> 时间：2012-11-07T16:09:23.453
> 
> 标签：perl

在我的脚本中，与我已经拥有的一组数据相比，我检查元素是否存在，我多次执行此操作，因此是进度条。

这就是我现在正在做的事情

```
### A loop which is done multiple times ### 

my $i =1;
my $page = 50;
while ($i <= $page)    
{

##### Part where I print my progress bar ######
print "\rProgress:[";
my $completed =($i/$page)*100;
$completed = ceil($completed);
my $l= $completed;
while ($l>0){
    print "#";
    $l--;
}   
my $remaining = 100-$completed;
while ($remaining>0){
    print " ";
    $m--;
} 
print "] ";
print $completed . "% Complete";

######### Part where I check and keep count #############
foreach (@each_job) 
{
    my $temp = $_;
    # Count number of jobs that exist with my set
    if ($job{"$temp"} == 1) 
    { 
        $does_exist++ ;
        ## print "\n Exists - $does_exist"; #Confused for this print
    }
    else 
    {
        $does_not_exist++;
        ## print "\n Does not exist - $does_not_exist"; #Confused for this print
    };
    };
    $i++;
} 
```

所以我目前得到的是

```
Progress:[################################################                                                    ] 48% Complete 
```

哪个工作正常并将进度条显示为逐页遍历。但我想要的是这样的 -

```
Progress:[################################################                                                    ] 48% Complete
Exists - 3
Does Not Exist - 5 
```

它会在同一个地方不断更新（使用`\r`）。有人能帮我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:21:57.850

使用一个为你处理所有转义代码 rigamarole 的 curses 库，让你只需要更新屏幕区域即可。

从这个[CPAN 搜索 curses modules](https://metacpan.org/search?q=curses)开始。

# android - 自定义可扩展列表 Android

> ID：13273598
> 
> 赞同：0
> 
> 时间：2012-11-07T16:09:32.290
> 
> 标签：android, list, customization

这就是我的应用程序使用可扩展列表视图从数据库中读取数据然后显示它的样子，范围是 3 个月或 12 周！现在我想要的是只显示每周的内容！我不想显示 WEEK 标签！例如，如果在这 12 周内有任何数据，我们将显示它（但只有日期标签和数据描述），但如果没有，我们什么也不显示！（不显示周！）而且我想禁用每个项目的折叠。

![在此处输入图像描述](../Images/ec31698c1af731ae0ab1e6e36c7d7d0c.png)

这是我的适配器

```
public class MyCareHeaderExpandableListAdapter extends MyCareExpandableListAdapter {

public MyCareHeaderExpandableListAdapter(Context context) {
    super(context);
}
//--------------------------------------------------------------------

@Override
public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
    //Log.d("getChildView", "getChildView " + groupPosition);
     //View view = adapter.getView(childPosition, convertView, parent);
    Item item = getChild(groupPosition, childPosition);
    return setContentView(R.layout.expandable_list_item, convertView, item);
}
//--------------------------------------------------------------------
@Override
public long getChildId(int groupPosition, int childPosition) {
    int id = ((ScheduleItem)m_childrens.get(groupPosition).getItem(childPosition)).getID();
    return id;
}
//--------------------------------------------------------------------

/**
 * This function is called to generate the view for the groups.
 */
public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
    String name[] = getGroup(groupPosition);

    //  Generating header
    //  A header has no child, and begins the name with "Week"
    //if (getChildrenCount(groupPosition) == 0 && (name[1] == null)) { 
    if (name[1] == null) { 
        convertView = m_inflater.inflate(R.layout.expandable_list_week, null);
        TextView textView = (TextView)convertView.findViewById(R.id.txtHeader);
        Font.setToView(textView, Font.BOLD);
        textView.setText(name[0]);
    }
    //  Generating group name
    else {
        //Log.d("getGroupView", name);
        convertView = m_inflater.inflate(R.layout.expandable_list_group, null); 
        TextView textView = (TextView)convertView.findViewById(R.id.txtDay);
        textView.setText(name[0]);
        Font.setToView(textView, Font.BOLD);

        TextView textView2 = (TextView)convertView.findViewById(R.id.txtDate);
        textView2.setText(name[1]);
        Font.setToView(textView2, Font.BOLD);
    }
    return convertView;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:27:06.863

您正在处理的两个问题：

(1) 几周内不显示没有条目的组视图

为此，我建议修改您的组游标查询，使其不返回带有“空”周条目的游标。

(2) 不允许用户折叠组

出于同样的目的，我实现了`OnGroupClickListener`拦截组点击，基本上什么都不做。这使我可以控制组何时展开或折叠。这是我的监听器实现：

```
/**
 * Only purpose here is to intercept taps on the header rows and ignore them
 * (avoid expandable list view adapter from expanding/collapsing).
 */
@Override
public boolean onGroupClick(ExpandableListView parent, View v,
        int groupPosition, long id) {
    return true;
} 
```

**编辑：**

要扩展所有组：

```
 int groupCount = myCursorTreeAdapter.getGroupCount();
    for (int i = 0; i < groupCount; i++) {
        myExpandableListView().expandGroup(i);
    } 
```

# jquery - 获取提交按钮的名称

> ID：13273599
> 
> 赞同：0
> 
> 时间：2012-11-07T16:09:34.617
> 
> 标签：jquery, asp.net-mvc-4

我在 .Net 平台上使用 MVC 4，并且在我看来有以下 html。如您所见，名称相同，以区分进入控制器时按下哪个按钮以采取正确的操作。

```
<tr>
    <td>
        <input type="submit" name="submitbutton" id="btnRefresh" value='Refresh' />
    </td>
        @if (Model.ShowGeneratePDFBtn == true)
        {
            <td>
                <input type="submit" name="submitbutton" id="btnGeneratePDF" value='Generate PDF' />
            </td>
        }
</tr> 
```

但是，当按下第二个（“生成 PDF”）按钮时，我需要禁用它，以便用户在进程发生时无法再次按下它。如果我禁用它，它将不再作为控件出现在 html 中（这是可以理解的）。

这是js：

```
$('#btnGeneratePDF').click(function () {
    DisableGeneratePDF();
});

function DisableGeneratePDF() {
    $('#btnGeneratePDF').attr("disabled", true);
} 
```

在控制器中，按下时按钮的值为 null 而不是“生成 PDF”，因此不会执行正确的操作。

这是控制器中的第一行：

```
[HttpPost]
public ActionResult ProcessForm(string submitbutton, ViewModelTemplate_Guarantors model, FormCollection collection) 
```

这是视图中的第一行。我也尝试过使用 FormMethod.Post，但由于我不会转到另一个页面，因此 AjaxOption 会更有效。

```
@using (Html.BeginForm("ProcessForm", "Home", new AjaxOptions { HttpMethod = "POST" })) 
```

**当我禁用按钮时，如何成功地将“生成 PDF”值传递给控制器​​？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:19:42.143

创建一个隐藏的表单值并将其放入您的视图模型中。然后在单击事件处理程序中设置该值。

在您的模型中，添加以下内容

```
public class Guarantors
{
    public bool ShouldGeneratePdf { get; set; }
} 
```

在您的视图中，添加

```
@Html.HiddenFor(x => x.ShouldGeneratePdf) 
```

到你的 JavaScript

```
$('#btnGeneratePDF').click(function () {
    DisableGeneratePDF();
    $('#ShouldGeneratePdf').val('True');
});

function DisableGeneratePDF() {        
    $('#btnGeneratePDF').attr("disabled", true);
} 
```

那应该这样做。

# c# - 级联控件的正确数据结构

> ID：13273601
> 
> 赞同：0
> 
> 时间：2012-11-07T16:09:35.650
> 
> 标签：c#, .net, vb.net

假设我在数据库中有一系列表，其中包含（例如）有关一系列餐厅菜单项的信息。因此，例如，我们有 10 个表：

```
Rest_1, Rest_2, Rest_3, .... Rest_10 
(Names being more complex, though, in the real situation) 
```

并且每个表都有完全相同的列结构，比如说（只是为了说明目的而编造这个，所以请原谅这个例子的弱点）：

```
Col1 (Primary Key) = Menu_Item
Col2               = Menu_Category  (Desert, Appetizer, ...)
Col3               = Item_Cost
Col4               = Item_SalePrice
Col5               = Item_Popularity
Col6               = Seasonal_Item  (Boolean - Is it seasonal)
Col7               = Min_Order      (Boolean - Is there a minimum order from the vendor)  
Col8               = In_Stock       (Boolean - Is it in stock now)  
.... 
```

现在，我有一个带有 3 个组合框和一个复选框的 Windows 窗体：

```
cboRestaurant
cboMenuCategory
cboPopularity
ckInStock 
```

还有一个 DataView，它根据用户上面的选择，显示正确的（过滤的）信息，然后可以用于处理某些东西。

所以，我的情况是我们会：

1.  填充餐厅组合框
2.  根据用户选择的 cboRestaurant 和 ckInStock.checked 状态，填充 cboMenuCategory 组合框
3.  基于 1 和 2，填充 cboPopularity 组合框
4.  根据用户为所有组合框/复选框选择的内容，填充数据视图。

...再次，我知道这是一个弱例子，但我试图传达这个概念。

* * *

所以......根据我在网上收集到的信息，我认为实现这一目标的最佳案例是：

1.  查询每个表并将结果存储在 DataTable 中（我可以这样做）
2.  将这些数据表存储在数据集中（我可以这样做）

我不知道该怎么做是让数据集知道所有数据表是如何相关的（都具有相同的列名）并将组合框绑定到数据集**，**例如根据之前选择的内容过滤信息组合框。

## 或者

创建一个包含所有表中所有这些变量的列表（自定义对象），然后基于`combobox.SelectedIndexChanged`\`ckInStock.CheckedChanged`事件创建该列表的 Linq-Query - 这似乎更糟，因为我们不断地查询和重新查询。

* * *

## 所以，我的第一个问题是：

如果解决方案 #1 是正确的，我如何创建综合数据集并根据前面的组合框和复选框值让组合框具有正确的过滤数据？

## 我的第二个问题是：

有没有更好的方法来完成这个我只是不知道的 - 一个内置的更好的对象，为你做级联过滤，或者如何最好地完成这个？

# facebook - iOS 6.0 Facebook SDK 权限，无法获取用户性别

> ID：13273603
> 
> 赞同：0
> 
> 时间：2012-11-07T16:09:47.843
> 
> 标签：facebook, permissions, ios6

我有一个快速的问题：

此代码段有效：

```
 NSArray *permissions = @[@"email", @"user_birthday"];
    return [FBSession openActiveSessionWithReadPermissions:permissions
                                              allowLoginUI:allowLoginUI
                                         completionHandler:^(FBSession *session,
                                                             FBSessionState state,
                                                             NSError *error) {
                                             [self sessionStateChanged:session
                                                                 state:state
                                                                 error:error];
                                         }]; 
```

这不会：

```
NSArray *permissions = @[@"email", @"user_birthday", @"gender"];
return [FBSession openActiveSessionWithReadPermissions:permissions
                                          allowLoginUI:allowLoginUI
                                     completionHandler:^(FBSession *session,
                                                         FBSessionState state,
                                                         NSError *error) {
                                         [self sessionStateChanged:session
                                                             state:state
                                                             error:error];
                                     }]; 
```

我只是询问 Facebook 用户的性别，在第一种情况下，我在我的 NSLog 控制台上找到了用户会话，这很棒……但是当我扩展权限并在其中包含性别时，我得到了UIAlertView with: Error 操作无法完成。（com.facebook.sdk 错误 2。）

我做错了什么？如何请求获得用户性别的许可？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-05T03:38:00.747

性别不是 的公共属性，因此，您不能使用 user.gender 进行访问，就像使用 user.name 一样，这里您有一个字典，并且您可以通过密钥访问。

喜欢：

```
_genderLabel.text = [user objectForKey:@"gender"]; 
```

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:25:38.200

正如您[在此处](https://developers.facebook.com/docs/reference/login/basic-info/)看到的，性别是基本信息的一部分。每当您打开具有权限的会话时，它都会询问基本信息。既然您已经拥有它，facebook 必须将其视为错误。

顺便问一下用户名时我遇到了同样的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T17:52:35.487

查看[权限列表](https://developers.facebook.com/docs/reference/login/#permissions)-`gender`不是其中之一 - 性别是[User 对象](https://developers.facebook.com/docs/reference/api/user/)的一个​​字段，并且也暴露在[FQL 表](https://developers.facebook.com/docs/reference/fql/user/)`sex`的列中，一旦用户授予您访问其访问权限的基本权限，您就可以访问该列数据。[`user`](https://developers.facebook.com/docs/reference/fql/user/)

仅返回当前用户性别的示例查询（SDK 不可知）是简单 `/me?fields=gender`的，其返回值将是

```
{
  "gender": "male", 
  "id": "533875325"
} 
```

请注意，它在访问用户时也会在默认响应中返回，因此您无需显式指定它。

此外，一些用户可能没有定义性别（尽管我认为这相对罕见）

# google-visualization - 如何在 Google 图表中显示除日期之外的时间？

> ID：13273605
> 
> 赞同：2
> 
> 时间：2012-11-07T16:09:50.823
> 
> 标签：google-visualization

我的时间序列风格的谷歌图表 ( `google.visualization.DataTable`) 没有在 x 轴上显示时间；只有日期。

如何让它在 X 轴上显示时间增量？我了解如何更新格式化程序以显示时间，但首先没有 x 轴值，如此屏幕截图所示：

![](../Images/bb3818c300aa114b5106eef05c56c558.png)

# stack - STDIN 中的两个引用与管道

> ID：13273606
> 
> 赞同：2
> 
> 时间：2012-11-07T16:09:57.857
> 
> 标签：stack, pipe, stdin, exploit

我正在尝试利用 .c，它要求 2 个输入。我必须使用十六进制条目将返回地址更改为我想要的任何内容。如何同时通过管道输入两个条目？那可能吗？

# image-processing - 将 PDF 转换为图像时 ImageMagick 会改变颜色

> ID：13273609
> 
> 赞同：13
> 
> 时间：2012-11-07T16:10:04.197
> 
> 标签：image-processing, imagemagick

我正在使用以下命令将最终用户上传的各种 PDF 转换为图像

```
-density 140 -limit memory 64MB -limit map 128MB [pdffile] page.png 
```

这是结果。右侧是原始 PDF，左侧是输出图像。如您所见，颜色明显不同。

什么可能导致这种情况以及如何解决它？

![图片](../Images/140a4f4f2a597625f19e2e03c7d97471.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T14:25:04.767

尝试以下命令：

```
-density 140 -limit memory 64MB -limit map 128MB -colorspace RGB [pdffile] page.png 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-14T11:40:12.707

**编辑：**我后来发现 ImageMagick 可以做得很好，我只需要使用`-colorspace sRGB`

我的最终命令是：

```
convert -density 560 -limit memory 64MB -limit map 128MB \
        -colorspace sRGB [pdffile] -scale 25% page.png 
```

过采样和缩小是为了对抗下面提到的不良抗锯齿。

在我发现之前，这是我早期的解决方案......

* * *

在我的情况下，ImageMagick 产生的颜色过`convert`饱和，就像问题中的颜色一样。我试图使用 IM 6.7.7.10-6ubuntu3转换[这个文件。](http://www.jpl.nasa.gov/visions-of-the-future/pdf/grand_tour.pdf)

*   `-resample 100`没有任何区别。

*   `-colorspace RGB`似乎产生了更准确的饱和度，但整个图像比应有的更暗。

奇怪的是，[这个](http://www.imagemagick.org/discourse-server/viewtopic.php?t=8756#p31908)使用 GhostScript 而不是 ImageMagick 进行转换的建议产生的颜色非常接近正确的颜色：

```
gs -q -sDEVICE=png16m -dSubsetFonts=true -dEmbedAllFonts=true \
      -sOutputFile=page.png -r200 -dBATCH -dNOPAUSE [pdffile] 
```

（最初的建议通过了该`-dUseCIEColor`选项，但在我的情况下，这似乎降低了伽马：亮像素很好，但暗像素太暗了，所以我删除了它。）

在那之后，唯一困扰我的是**抗锯齿/边缘**在某些地方有点偏离（特别是在经过 45 度的曲线上可见）。为了改善这一点，我以所需分辨率的四倍创建输出，然后按比例缩小，使这些错误几乎无法察觉。请注意，我必须为此使用 ImageMagick `-scale`，而**不是** `-geometry`or `-resize`，以避免[双三次振铃效应](https://dsp.stackexchange.com/questions/14707/scaling-down-a-raster-image/28868#28868)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T17:38:37.783

使用`-resample`选项：

```
-density 140 -resample 100 -limit memory 64MB -limit map 128MB [pdffile] page.png 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-08T13:21:01.260

开源 MuPDF util mutool 使用下面的默认参数保留颜色和大小，但您需要在命令末尾列出以逗号分隔的页面。

mutool draw -o draw%d.png abook.pdf 1,2

否则，如果使用 Linux，请在使用 imagemagick 的转换时尝试 Windows 以获得更好的色彩空间 RGB 解释。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-02-15T04:51:53.217

下图显示了如果您以更高的分辨率进行采样然后按比例缩小，抗锯齿效果如何得到改善。

虽然1120的质量比560略好，但是转换的时间比较长，所以我大概会选择560比较好：质量取舍。

`-colorspace sRGB -density 140`

[![在此处输入图像描述](../Images/a7e58fa42509ab60ee1a60e4fc29d20f.png)](https://i.stack.imgur.com/Vzc2L.png)

`-colorspace sRGB -density 280 -scale 50%`

[![在此处输入图像描述](../Images/091acf50d593dfc53edf7fcaa16f58d7.png)](https://i.stack.imgur.com/sbpnt.png)

`-colorspace sRGB -density 420 -scale 33.3333%`

[![在此处输入图像描述](../Images/e7564ab4d3d812d0cdbfe3c9b49458f9.png)](https://i.stack.imgur.com/AtzAs.png)

`-colorspace sRGB -density 560 -scale 25%`

[![在此处输入图像描述](../Images/c322722d3f6ce15a420cbdb6de900d64.png)](https://i.stack.imgur.com/31e7z.png)

`-colorspace sRGB -density 1120 -scale 12.5%`

[![在此处输入图像描述](../Images/7fa6bedcb1cbeee7c4aaa86ca7ece143.png)](https://i.stack.imgur.com/K3cE8.png)

（如果您下载最后两张图像并在您最喜欢的图像查看器中在它们之间切换，则更容易看到差异。或者向上滚动此图像列表，而不是向下滚动。您应该看起来它们变得越来越难看。）

# r - 如何将绘图附加到现有的 pdf 文件

> ID：13273611
> 
> 赞同：33
> 
> 时间：2012-11-07T16:10:04.057
> 
> 标签：r, pdf, plot

`dev.off()`我想在调用 *很久之后将绘图附加到现有的 pdf 。在阅读了帮助文件并阅读了[此处](https://stackoverflow.com/questions/1395410/how-to-print-r-graphics-to-multiple-pages-of-a-pdf-and-multiple-pdfs)和[此处](https://stackoverflow.com/questions/7534606/save-multiple-graphs-one-after-another-in-one-pdf-file)`pdf()`的问答之后，我很确定它不能在 R 中完成。但是，也许你们中的一些更聪明的人有一个我无法找到的解决方案。

```
pdf("Append to me.%03d.pdf",onefile=T)
plot(1:10,10:1) #First plot (page 1)
dev.off()
pdf("Append to me.%03d.pdf",onefile=T)
plot(1:10,rep(5,10)) #Want this one on page 2
dev.off() 
```

*这不是上面链接的问题的重复，因为我想在 pdf 设备关闭*后附加到 pdf 文件。*

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-07T16:46:28.970

您可以使用`recordPlot`将每个图存储`list`在`replayPlot`. 这是一个例子：

```
num.plots <- 5
my.plots <- vector(num.plots, mode='list')

for (i in 1:num.plots) {
    plot(i)
    my.plots[[i]] <- recordPlot()
}
graphics.off()

pdf('myplots.pdf', onefile=TRUE)
for (my.plot in my.plots) {
    replayPlot(my.plot)
}
graphics.off() 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-07T16:49:50.310

如果您愿意安装小型、免费、独立于平台的[**pdftk**](http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/)实用程序，您可以使用 R 的系统调用将所有图形拼接在一起：

```
## A couple of example pdf docs
pdf("Append to me.1.pdf")
plot(1:10,10:1)
dev.off()

pdf("Append to me.2.pdf")
plot(1:10,rep(5,10)) 
dev.off()

## Collect the names of the figures to be glued together
ff <- dir(pattern="Append to me")
## The name of the pdf doc that will contain all the figures
outFileName <- "AllFigs.pdf"

## Make a system call to pdftk
system2(command = "pdftk",
        args = c(shQuote(ff), "cat output", shQuote(outFileName)))

## The command above is equiv. to typing the following at the system command line
## pdftk "Append to me.1.pdf" "Append to me.2.pdf" cat output "AllFigs.pdf" 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-07T16:46:20.033

这是非常骇人听闻的，可能掩盖了我有限的 UNIX shell fu，但它适用于安装了[**pdfjam**包](http://www2.warwick.ac.uk/fac/sci/statistics/staff/academic-research/firth/software/pdfjam)的 Fedora 17机器（不是 R 包，而是来自 YUM 存储库）

```
pdf("pdf1.pdf")
plot(1:10)
dev.off()

pdf("| pdfjoin --outfile \"pdf2.pdf\" && pdfjoin pdf1.pdf pdf2.pdf --outfile pdf1.pdf && rm pdf2.pdf")
plot(10:1)
dev.off() 
```

R中的输出是：

```
> pdf("| pdfjoin --outfile \"pdf2.pdf\" && pdfjoin pdf1.pdf pdf2.pdf --outfile pdf1.pdf && rm pdf2.pdf")## && pdfunite joined.pdf tmp.pdf joined.pdf && rm tmp.pdf")
> plot(10:1)
> dev.off()
          ----
  pdfjam: This is pdfjam version 2.08.
  pdfjam: Reading any site-wide or user-specific defaults...
          (none found)
  pdfjam: No PDF/JPG/PNG source specified: input is from stdin.
  pdfjam: Effective call for this run of pdfjam:
          /usr/bin/pdfjam --fitpaper 'true' --rotateoversize 'true' --suffix joined --outfile pdf2.pdf -- /dev/stdin - 
  pdfjam: Calling pdflatex...
  pdfjam: Finished.  Output was to 'pdf2.pdf'.
          ----
  pdfjam: This is pdfjam version 2.08.
  pdfjam: Reading any site-wide or user-specific defaults...
          (none found)
  pdfjam: Effective call for this run of pdfjam:
          /usr/bin/pdfjam --fitpaper 'true' --rotateoversize 'true' --suffix joined --outfile pdf1.pdf -- pdf1.pdf - pdf2.pdf - 
  pdfjam: Calling pdflatex...
  pdfjam: Finished.  Output was to 'pdf1.pdf'.
null device 
          1 
```

基本上，如果它是唯一的输入文件，`pdfjoin`则将从中获取输入，因此我将输出从管道传输到程序并使用参数指定输出文件。然后使用将原始PDF与刚刚创建的连接在一起，指定输出PDF是原始PDF的名称。`stdin``pdf()``pdfjoin``--outfile``&&``pdf1.pdf``pdf2.pdf``pdf1.pdf`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-25T16:38:59.507

我最近发现了这部出色的作品（没有试图声称它是我自己的）

[https://jonkimanalyze.wordpress.com/2014/07/24/r-compile-png-files-into-pdf/](https://jonkimanalyze.wordpress.com/2014/07/24/r-compile-png-files-into-pdf/)

这并不是 OP 所要求的，但我喜欢它的原因是我经常有非常密集的散点图和其他对 pdf 中的窗口大小调整等反应不佳的图。但是我需要产生多页输出。因此，如果这些图是数据密集型的，我会将它们渲染为 .png，然后使用上述函数在最后重新组合。

```
merge.png.pdf <- function(pdfFile, pngFiles, deletePngFiles=FALSE) {

  pdf(pdfFile)

  n <- length(pngFiles)

  for( i in 1:n) {

    pngFile <- pngFiles[i]

    pngRaster <- readPNG(pngFile)

    grid.raster(pngRaster, width=unit(0.8, "npc"), height= unit(0.8, "npc"))

    if (i < n) plot.new()

  }

  dev.off()

  if (deletePngFiles) {

    unlink(pngFiles)
  }

} 
```

# css - 将特定的类样式添加到路径

> ID：13273612
> 
> 赞同：0
> 
> 时间：2012-11-07T16:10:07.113
> 
> 标签：css, class, path, stroke

我正在寻找如何在 css 中添加与特定路径匹配的类（例如，我的路径的名称是“城市”，我想对其应用其他颜色的描边或填充。我尝试通过不同的方式，但没有结果。这可能吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:38:29.813

这是一个基本的解决方案，它不会处理类的添加，只是根据您的路径进行替换。

创建两个目录，一个名为“red”，一个名为“blue”。在每个页面中创建页面，其中包含以下内容。他们将读取路径并将类添加到名为#content 的DIV 中。

这是一个[Fiddle](http://jsfiddle.net/am_d/LDjKe/)（注意：带有硬编码路径*，所以它可以工作*）来演示。

希望这可以帮助。

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title></title>
    <style type="text/css">
    .red {background-color:red}
    .blue {background-color:blue}
    .green {background-color:green}
    </style>
</head>
<body>
<div id="content">this is the content</div>
    <script type="text/javascript">
     var locationpath =  ""+window.location.pathname+"";
     var options = ['red','blue','green'];
     for (var i =0;i<options.length;i++) {
         if (locationpath.indexOf(options[i])>0) {
            document.getElementById('content').setAttribute('class',options[i]) ;
         } 
     }

    </script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:40:31.987

“路径”是什么意思？

> 例如，我的路径名称是“城市”，我想对其应用其他颜色的描边或填充。

如果您尝试通过“名称”来关注元素，则应该使用 Jquery。

例子：

`<input type="text" name="tiluuu"/>`

和jQuery

`$('input').attr('name','tiluuu').css({'color':'red'});`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T16:30:32.783

我不确定您要的是什么，请发布您的一些代码。但我认为你可以通过在 CSS 中创建多个类路径来完成你想要的，如下所示：

```
#something {
  width: 200px;
  font-size: 12px;
     }

#something.black {
   color: #000000
     }

#something.white {
   color: #FFFFFF
     } 
```

HTML 会是这样的：

```
<h1 id="something" class="black">This Should Be Black</h1> 
```

等等。

# asp.net-mvc - MVC：正确的身份验证

> ID：13273613
> 
> 赞同：0
> 
> 时间：2012-11-07T16:10:08.690
> 
> 标签：asp.net-mvc, asp.net-mvc-3, forms-authentication

在我的控制器中，我有一个登录方法。我在那里检查凭据，如果一切正常，请致电

```
FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe); 
```

它有效，但如果我立即检查

```
this.User.Identity.IsAuthenticated 
```

在控制器内部，我看到它仍然是错误的。我需要刷新页面以查看该用户确实已通过身份验证。在同一个请求期间，是否有可能立即对用户进行身份验证？之后渲染的其他部分视图依赖于它。

在网络表单开发中，我会称之为

```
RedirectFromLoginPage 
```

但这里它位于从布局文件呈现的局部视图中，我无法从那里重定向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:52:43.997

该调用`FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);`设置了一个加密的身份验证 cookie。因为这是一个 cookie，所以调用`IsAuthenticated`不是立即的，因为用户必须向服务器发出另一个请求才能将 cookie 发送到客户端/从客户端发送。

# xslt - 使用 xslt 在文本中查找关键字

> ID：13273616
> 
> 赞同：0
> 
> 时间：2012-11-07T16:10:11.227
> 
> 标签：xslt

我想编写一个样式表来突出显示文本中的关键字。

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html"/>
    <xsl:template match="/">
        <xsl:param name="keyword">keyword</xsl:param>
        <html>
            <body>
                <xsl:for-each select="element()">
                <xsl:variable name="elValue" select="."/>
                    <xsl:analyze-string select="upper-case(.)" regex="{upper-case($keyword)}*">
                        <xsl:matching-substring>
                            <i>
                                <xsl:value-of select="."/>
                            </i>
                        </xsl:matching-substring>
                        <xsl:non-matching-substring>
                            <xsl:value-of select="."/>
                        </xsl:non-matching-substring>
                    </xsl:analyze-string>
                </xsl:for-each>
            </body>
        </html>
    </xsl:template>
</xsl:stylesheet> 
```

我用过正则表达式。

我的问题：整个 html 输出现在都是大写的。我曾尝试使用变量 elValue 来保存原始值，但这不起作用。该变量似乎在每个循环中附加了新值（并且不仅包含新值）。

有没有办法输出元素的原始格式（没有大写）？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:22:07.177

您可能只是想在[http://www.w3.org/TR/xslt20/#analyze-string](http://www.w3.org/TR/xslt20/#analyze-string)`i`上使用一个标志，即

```
 <xsl:analyze-string select="." regex="{$keyword}*" flags="i">
                    <xsl:matching-substring>
                        <i>
                            <xsl:value-of select="."/>
                        </i>
                    </xsl:matching-substring>
                    <xsl:non-matching-substring>
                        <xsl:value-of select="."/>
                    </xsl:non-matching-substring>
                </xsl:analyze-string> 
```

# c# - 计算的 const 值不断落后一个构建

> ID：13273617
> 
> 赞同：4
> 
> 时间：2012-11-07T16:10:12.233
> 
> 标签：c#, build, constants, pre-build-event

**在更新在预构建**事件期间运行的构建增量程序时，我注意到一个潜在的问题，它可能会导致相当多的问题。第一次构建应用程序成功更新`BuildInfo.cs`并计算了所有 const 值。每次后续构建和成功执行预构建事件都会更新正确的文件（如下所示），但每个计算的 const 值都与上次构建相比已过期。

```
// In externally modified file BuildInfo.cs which is updated by our pre-build
// tool to update the version information and produce new consts.
namespace ConstProblem.Properties {
  static class BuildInfo {
    internal const string AssemblyVersionString = "1.1.0.0";
    internal const string BuildDate = "2012-11-07T08:52:32.5480259-07:00";
    internal const string FileVersionString = "1.1.12312.852";
    internal const string Full = "v1.1 (Build: 2012-11-07 08:52)";
    internal const string Short = "1.1";
  }
}

// Program.cs. Reproduces the problem for this question.
namespace ConstProblem {
  class Program {
    const string UserAgent = "ConstProblem/" + Properties.BuildInfo.Short;

    static void Main() {
      System.Console.WriteLine(UserAgent);
    }
  }
} 
```

例如，该应用程序最初是使用`AssemblyVersionString`at构建的`1.0.0.0`。上述程序按预期运行和编译。将其增加到 1.1 并第二次构建/运行应用程序`ConstProblem/1.0`作为它的输出并具有这个作为它的值

```
// From the Immediate Window
Properties.BuildInfo
ConstProblem.Properties.BuildInfo
    base {object}: object
    AssemblyVersionString: "1.1.0.0"
    BuildDate: "2012-11-07T08:51:46.8404556-07:00"
    FileVersionString: "1.0.12312.851"
    Full: "v1.0 (Build: 2012-11-07 08:51)"
    Short: "1.0" 
```

如您所见，已正确`AssemblyVersionString`更新`1.1.0.0`，但其余计算值未正确更新。如果我要第三次构建和执行（并增加到 1.2），它们将更新到上面提供的信息。

我已经确认预构建事件的输出文件正确输出了所有信息并以状态 0 退出以允许构建继续。我不知道为什么 const 总是落后。构建实用程序也是我编写的，它只是使用模板并在文件被签出时替换 BuildInfo.cs 的内容。

我的环境正在运行 Visual Studio 2010 Ultimate 并在 .Net 4 中编译。我已经在控制台和 Web 应用程序中重现了这一点。我从[如何获取您自己的程序集的程序集版本和文件版本？](http://blogs.msdn.com/b/junfeng/archive/2004/02/28/81407.aspx "如何获取自己的程序集的程序集版本和文件版本？ ——张俊峰")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T16:00:44.170

它正在从 AssemblyInfo.cs 读取成功的构建增量，但是在成功构建后只会增加 1，因此为什么你总是落后 1。

将 **[assembly: AssemblyVersion("1.star.star.star")]**添加到**AssemblyInfo.cs**（在解决方案/属性中）

```
^ star = * (editor limitation) 
```

# jquery - 滚动势头有问题时点击

> ID：13273618
> 
> 赞同：1
> 
> 时间：2012-11-07T16:10:13.510
> 
> 标签：jquery, ios, jquery-mobile, ios6, touch

我在 iOS 上使用“新”CSS 属性来实现滚动动力，`-webkit-overflow-scrolling`. 我有一个`<div>`您可以滚动和选择的列表，以便选择器消失并且所选项目放置在其他位置。问题是，如果项目 A 在位置 (X,Y)；我向上滑动以向下滚动，当滚动动量处于活动状态时，我再次点击位置 (X,Y)，项目 A 曾经所在的位置，但现在被向上移动的项目 B 占据，项目 A 是被选中的项目.

一个视频值一百万字：[https ://www.youtube.com/watch?v=mXh28IY3wIU](https://www.youtube.com/watch?v=mXh28IY3wIU)

这是一个已知的错误？我正在使用 jQuery 的移动事件“点击”，如下所示：

```
$selector.on('tap', '.act-item-inner', function(e){
    e.preventDefault();
    var $selected=$(this);
    [...]
} 
```

正如你想象的那样，$selector 是包装器，$selected 是项目 B

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T01:05:38.477

在 iOS 上滚动浏览网站时，浏览器

1.  从您的网站截取屏幕截图
2.  并冻结 JavaScript-Engine（包括所有 JavaScript-/DOM-Events）。

所以是的，这是众所周知的。但它像设计的那样工作。您可以通过`setTimeout`或将一些消息打印到控制台来观察此行为`setInterval`。您会看到它们在弹性滚动期间没有执行。

我建议当引擎未冻结时，这会在您的特定用例中导致竞争条件。

# javascript - 使用猫鼬返回特定用户的所有评论而没有其他文档字段

> ID：13273619
> 
> 赞同：1
> 
> 时间：2012-11-07T16:10:12.783
> 
> 标签：javascript, mongodb, indexing, mongoose

```
var mongoose = require('mongoose');

// defines the database schema for this object
var schema = mongoose.Schema({
  projectName : String,
  authorName : String

   comment : [{
      id : String,                                  
      authorName : String,
      authorEmailAddress : { type : String, index : true }  
    }]
  }); 
```

`})`

```
// Sets the schema for model
var ProjectModel = mongoose.model('Project', schema);

// Create a project
exports.create = function (projectJSON) {

  var project = new ProjectModel({

    projectName : projectJSON.projectName ,
    authorName : projectJSON.authorName,    

    comment : [{
      id : projectJSON.comments.id,                                         
      authorName : projectJSON.comments.authorName,                         
      authorEmailAddress : projectJSON.authorEmailAddress
    });

  project.save(function(err) {
    if (err) {
      console.log(err);
    }
    else{
      console.log("success");
    }
  });

} 
```

**问：我想检索特定用户在所有项目中所做的所有评论（没有其他文档字段）**

我的尝试：

```
// assuming email address is unique per user, as user can always change displayName for instance

exports.allCommentsByUser = function(userEmail, callback){ 
    ProjectModel.find(
        {"comments.authorEmailAddress" : userEmail}, 
        { "projectName" : 1, "comments.authorEmailAddress" : 1 }, 
        callback);
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:48:53.447

您可以将 2.2 聚合框架用于此类查询：

```
ProjectModel.aggregate([
    {
        // Only include the projectName and comments fields.
        $project: { 'projectName': true, 'comments': true, '_id': false }
    }, {
        // Get all project docs that contain comments by this user
        $match: { 'comments.authorEmailAddress': userEmail }
    }, {
        // Duplicate the project docs, one per comment.
        $unwind: '$comments'
    }, {
        // Filter that result to just the comments by this user
        $match: { 'comments.authorEmailAddress': userEmail }
    }], callback
); 
```

# bash - Shell 是可变数字

> ID：13273621
> 
> 赞同：2
> 
> 时间：2012-11-07T16:10:24.543
> 
> 标签：bash, shell, case, wildcard

晚上好，我想写一个脚本来说明它的参数是否是一个数字，但是我明白了：

```
a: 4: Syntax error: "(" unexpected (expecting ")") 
```

起初我是这样尝试的：

```
    #!/bin/bash
    案例“$1”在
        0x* ) 十六进制回显；；
        ''|*[!0-9]*) echo dec ;;
        * ) 回声 wtf ;;
    经社理事会

```

后来我发现了这一点：

```
    如果 ！[[ "$yournumber" =~ ^[0-9]+$ ]] ; 然后
       执行 >&2; echo "错误：不是数字"; 1号出口
    菲

```

好吧，它们都不起作用，我寻求帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:16:59.160

我不确定你的意思是什么`*[!0-9]*`，但以下似乎对我有用。

```
#!/bin/bash

shopt -s extglob

case "$1" in
    '')
        echo missing ;;
    0x+([0-9a-fA-F]))
        echo hex ;;
    +([0-9]))
        echo dec ;;
    *)
        echo wtf ;;
esac 
```

请注意，`extglob`让我使用更复杂的模式匹配来查找“十六进制”和“十进制”数字。您可以在[bash 手册页](http://www.freebsd.org/cgi/man.cgi?query=bash&manpath=FreeBSD+Ports)中找到这方面的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-06T22:17:54.693

这个作为基础怎么样？

`expr >>/dev/null "$i" : '0[xX][0-9a-fA-f][0-9a-fA-F]*$' && echo hex; expr >>/dev/null "$i" : '0[0-7]*$' && echo oct; expr >>/dev/null "$i" : '[0-9][0-9]*$' && echo dec;`

# c - C结构成员是字符串，如何直接分配字节

> ID：13273623
> 
> 赞同：0
> 
> 时间：2012-11-07T16:10:26.630
> 
> 标签：c, string, struct

我正在研究一个简单的文件系统，它（显然）包含文件夹、文件等。

一个（a 的简化版本）文件夹在 RAM 中由一个结构表示，如下所示：

```
typedef struct{
     char label[20];
     unsigned int id;
     t_node contents[50];
 } folder; 
```

现在，我显然希望标签包含其中包含名称的原始字节字符串（更好的是不带尾随 0 的原始字符串，但这是我愿意做出的牺牲）。

不，这是我创建和使用结构的方式：

```
folder* myFolder = (folder *) malloc(sizeof(folder));
myFolder->label = "name";

//Which doesn't work, if I try this:

char name[20] = "name";
myFolder->label = name;

//this too, doesn't work. 
```

错误消息显示“从类型'char *'分配给类型'char [20]'时类型不兼容”。我明白了，但不知道如何解决。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T16:11:55.677

使用`strncpy()`：

```
char name[20] = "name";
strncpy(myFolder->label, name, sizeof(myFolder->label) - 1);
myFolder->label[sizeof(myFolder->label) - 1] = 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T16:12:50.733

尝试使用`strncpy()`：

```
strncpy( myFolder->label, "name", 20 ); 
```

代替

```
myFolder->label = "name"; 
```

您不能使用赋值运算符来填充数组，在这种情况下，“名称”的右侧将解析为 char 指针。

另外，我建议用一些已定义的常量替换常量 20，指示值是什么（即 MAX_FOLDER_LABEL_LEN）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T16:11:57.283

您需要使用[strcpy](http://linux.die.net/man/3/strcpy)

```
strcpy(myFolder->label, "name"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T16:12:48.347

数组不是可修改的左值，因此不能为其赋值。你有几个解决方案：

*   声明`label`为指向`char`;
*   使用`strcpy`（或等效）。

# jquery - 在 Jqgrid 中禁用输入列

> ID：13273627
> 
> 赞同：0
> 
> 时间：2012-11-07T16:10:32.707
> 
> 标签：jquery, jqgrid, disabled-input

```
$("#list").jqGrid({
    url: '/modulos/carga/cargaServiciosTarifa.ashx',
    datatype: 'xml',
    mtype: 'GET',
    colNames: ['Precio Dia', 'Precio Hora','Unidad'],
    colModel: [
              { name: 'preciodia', index: 'preciodia', width: 100, align: 'center', editable: true, sortable: false },
              { name: 'preciohora', index: 'preciohora', width: 400, align: 'center', editable: true, sortable: false },
              { name: 'Unidad', index: 'TSI_Unidad', width: 100, align: 'center',            editable: true, edittype: 'select',
                      editoptions: { value: "Dia:Dia;Hora:Hora" }, sortable: true }
              ],
autoencode: true,
pager: '#pager',
rowNum: 20,
sortname: 'preciohora',
sortorder: 'asc',
sortable: true,
autowidth: false,
width: 733,
height: -1,
shrinkToFit: true,
viewrecords: true,
gridview: true,
caption: 'Listado Servicios asociados a Tarifa',
postData: {tarId: tarId.val()},
editurl: '/modulos/carga/cargaServiciosTarifa.ashx'
});

//Paginador
        jQuery("#list").jqGrid('navGrid',
            '#pager',
            {
                alerttext: "Seleccione un precio.",
                add: true, addtitle: "Crear precio",
                del: true, deltitle: "Eliminar precio",
                edit: true, edittitle: "Modificar precio",
                search: false, searchtitle: "Búsqueda",
                refresh: true,
                cloneToTop: true
            },
            { width: 360, resize: false, closeAfterEdit: true, recreateForm: true, viewPagerButtons: true },
            { width: 360, resize: false, closeAfterAdd: true, recreateForm: true, viewPagerButtons: true },
            { }, //Delete action
            { closeAfterSearch: true, closeOnEscape: true }
        ); 
```

有两个文本框和一个选择选项，我想知道如果我选择选择（第三列）的选项“Hora”，如何禁用“Precio Dia”（第一个文本框）列，另一种方式禁用“Precio” Dia' 如果我在选择中选择“Hora”！当我创建或编辑（没有内联编辑，我使用 navGrid）时，有没有可能的方法来做到这一点？

是否有任何属性（如禁用 html）可以添加到 colModel 定义中？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:50:16.047

我认为您可以`change`在 select 元素上定义处理程序。在处理程序内部，您可以根据 select 中的当前选定选项禁用或启用第一个输入字段。因为您使用表单编辑，所以第一个输入字段的 id 将与第一列的名称相同。此外，您将需要在表单初始化期间执行相同的操作。相应的代码如下所示：

```
editoptions: {
    value: "Dia:Dia;Hora:Hora",
    dataInit : function (elem) {
        setTimeout(function () {
            $("#preciodia").prop("disabled", $(elem).val() === "Hora");
        }, 50);
    },
    dataEvents: [
        {
            type: 'change',
            fn: function (e) {
                $("#preciodia").prop("disabled", $(this).val() === "Hora");
            }
        }
    ]
}, 
```

# adfs2.0 - 从 adfs 网络测试 openam 时出现异常

> ID：13273635
> 
> 赞同：0
> 
> 时间：2012-11-07T16:11:03.587
> 
> 标签：adfs2.0, openam, federation

我们已对 openam 和 adfs 设置进行了所有必要的更改，并使用此链接：[https](https://wikis.forgerock.org/confluence/display/openam/OpenAM+and+ADFS2+configuration) ://wikis.forgerock.org/confluence/display/openam/OpenAM+and+ADFS2+configuration 作为我们的参考，但是当我们测试时我们从 adfs 网络设置我们得到以下异常：

类型异常报告

信息

描述 服务器遇到一个内部错误 () 阻止它完成这个请求。

例外

javax.servlet.ServletException：AMSetupFilter.doFilter com.sun.identity.setup.AMSetupFilter.doFilter(AMSetupFilter.java:117) 根本原因

org.apache.jasper.JasperException：在第 158 行处理 JSP 页面 /saml2/jsp/spAssertionConsumer.jsp 时发生异常

155：se.getMessage（））；156：返回；157：}158：respInfo = SPACSUtils.getResponse（159：请求，响应，组织名称，hostEntityId，metaManager）；160: 161: 字符串 ecpRelayState = respInfo.getRelayState();

堆栈跟踪： org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:524) org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:417) org.apache.jasper.servlet.JspServlet.serviceJspFile( JspServlet.java:320) org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266) javax.servlet.http.HttpServlet.service(HttpServlet.java:803) com.sun.identity.setup.AMSetupFilter。 doFilter(AMSetupFilter.java:91) 根本原因

javax.servlet.ServletException：com.sun.identity.saml2.common.SAML2Exception：java.security.PrivilegedActionException：com.sun.xml.messaging.saaj.SOAPExceptionImpl：消息发送失败org.apache.jasper.runtime.PageContextImpl.doHandlePageException (PageContextImpl.java:850) org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:779) org.apache.jsp.saml2.jsp.spAssertionConsumer_jsp._jspService(spAssertionConsumer_jsp.java:360) org.apache.jasper .runtime.HttpJspBase.service(HttpJspBase.java:70) javax.servlet.http.HttpServlet.service(HttpServlet.java:803) org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:393) org.apache .jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320) org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266) javax.servlet.http。HttpServlet.service(HttpServlet.java:803) com.sun.identity.setup.AMSetupFilter.doFilter(AMSetupFilter.java:91) 根本原因

com.sun.identity.saml2.common.SAML2Exception：java.security.PrivilegedActionException：com.sun.xml.messaging.saaj.SOAPExceptionImpl：消息发送失败 com.sun.identity.saml2.profile.SPACSUtils.getResponseFromArtifact（SPACSUtils.java :417) com.sun.identity.saml2.profile.SPACSUtils.getResponseFromGet(SPACSUtils.java:282) com.sun.identity.saml2.profile.SPACSUtils.getResponse(SPACSUtils.java:174) org.apache.jsp.saml2 .jsp.spAssertionConsumer_jsp._jspService(spAssertionConsumer_jsp.java:183) org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) javax.servlet.http.HttpServlet.service(HttpServlet.java:803) org.apache .jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:393) org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320) org.apache.jasper.servlet.JspServlet。service(JspServlet.java:266) javax.servlet.http.HttpServlet.service(HttpServlet.java:803) com.sun.identity.setup.AMSetupFilter.doFilter(AMSetupFilter.java:91) note 根的完整堆栈跟踪原因在 Apache Tomcat/6.0.14 日志中可用。

请任何人都可以帮助我解决此异常，并告诉我设置中的错误是什么以及解决此问题的可能解决方案。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:01:09.290

OpenAM 无法向 ADFS 端点发送 SOAP 消息很可能是因为 JVM 信任库设置不正确。如果您没有在 ADFS 上使用 HTTPS，那么可能是某个网络组件阻止了从 OpenAM 到 ADFS 的流量。检查联合调试日志以获取更多详细信息。

# return - 如何获取从方法返回的数据？（爪哇）

> ID：13273638
> 
> 赞同：0
> 
> 时间：2012-11-07T16:11:18.223
> 
> 标签：return

这可能是一个非常愚蠢的问题，但是从方法返回的数据会发生什么？例如，如果我有一个将两个数字相加的方法并告诉它返回总和，我将如何从调用该方法的地方访问该信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:24:14.573

假设您的问题与java有关。

您可以将整个方法分配给一个新变量。

```
public class Test {
        public static void main(String args[]){
            int value1=2;
            int value2=5;
            int sum=sum(value1,value2);
            System.out.println("The sum is :"+ sum);
        }

        public static int sum(int value1,int value2){
            return value1+value2;   
        }
 } 
```

实际发生的是方法签名 sum(value1,value2) 保存了 2 个数字求和的结果。还有另一种在方法内部编写代码的方法，但结果是一样的。

例如：

```
public class Test {
         public static void main(String args[]){
            int sum=sum(2,5);
            System.out.println("The sum is :"+ sum);
         }

         public static int sum(int value1,int value2){
               int sum=value1+value2;               
               return sum;  
         }
} 
```

PS您可以尝试直接使用上述示例。他们将编译并运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:21:29.527

在大多数语言中，您可以通过将函数调用放在赋值表达式的右侧来访问函数的结果。

例如，在 Python 中，您可以通过执行以下操作将调用列表上的内置`len`函数的结果分配给调用的变量`x`：

```
x = len([1, 2, 3]) 
```

# jasper-reports - 使用 Beans 对 List 进行 Ireport 子报表

> ID：13273640
> 
> 赞同：3
> 
> 时间：2012-11-07T16:11:25.333
> 
> 标签：jasper-reports, ireport

我正在使用 bean 对象作为数据源。数据源包含几个属性——其中一个是我尝试使用的行项目列表。按 bean 看起来像这样：

```
String name;
String address;
List<DetailRecord> records; 
```

I want to have the records show up as the detail lines int the report. I know I need to setup a sub-report, but I'm not sure how to set the sub-report to use the records element of the current parent data item as the datasource.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T16:39:14.857

好的..我知道我需要做什么。对于子报告，我需要以这种方式指定数据源：

```
 new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($F{records}) 
```

这里有几个“陷阱”让我停留了一段时间：

*   您必须使用完整的类名（仅使用 JRBeanCollectionDataSource）将不起作用
*   在主报告中，您必须将记录的类型设置为 java.util.list（或适当的类。

由于父项中的记录字段默认为字符串，我的尝试一直在轰炸（没有明显的错误）。一旦我将其更改为列表，事情就开始起作用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-03T12:18:21.850

另一种解决方案，它可能会帮助某人:)。

1.  来自主报告，对于子报告集 - 使用数据源表达式。

2.  数据源表达式集，如 - new MySubRepClass($F{list}.get(counter))。

3.  MySubRepClass 是作为子报告的 bean 数据源的类（像数据源 bean 一样设置），并且列表（主报告中的属性）包含其实例。

4.  MySubRepClass 应该实现 JRDataSource

幸运！

# wso2 - 计划的消息转发处理器在 X 次传递尝试后不会停用

> ID：13273641
> 
> 赞同：2
> 
> 时间：2012-11-07T16:11:31.827
> 
> 标签：wso2, esb, wso2esb

我在 Red Hat 2.6.32 上运行 WSO2 ESB 4.5.1 和 Sun Java SE 1.6.0_33，使用 Apache ActiveMQ 5.5.1 作为 ESB 的持久存储。

我正在尝试编写一个流程：
1\. 从 XML 文件中读取地址信息
2\. 将每个地址保存在 MQ 队列中
3\. 从 MQ 读取消息处理器并尝试传递到 JMS 端点
4\. 如果传递失败消息处理器将在停用自身之前再尝试一次交付

当 JMS 端点（在另一台服务器上运行的另一个 ActiveMQ 实例）启动时，一切正常，但是如果我停止充当 JMS 端点的 ActiveMQ，消息处理器不会像我预期的那样在重试后停用，而是不断尝试重新发送来自消息存储的相同消息。出了什么问题？

这是我的流程：

代理人：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="AddressPxy" transports="vfs" statistics="disable" trace="disable" startOnLoad="true">
<target>
  <inSequence>
     <property name="OUT_ONLY" value="true" scope="default" type="STRING"/>
     <property name="target.endpoint" value="AddressesEP" scope="default" type="STRING"/>
     <log level="full"/>
     <iterate expression="//addresses/address">
        <target>
           <sequence>
              <store messageStore="AddressesMS"/>
           </sequence>
        </target>
      </iterate>
    </inSequence>
  </target>
  <parameter name="transport.vfs.ActionAfterProcess">MOVE</parameter>
  <parameter name="transport.PollInterval">15</parameter>
  <parameter name="transport.vfs.MoveAfterProcess">file:///home/esb/sent</parameter>
  <parameter name="transport.vfs.FileURI">file:///home/esb/addresses.xml</parameter>
  <parameter name="transport.vfs.MoveAfterFailure">file:///home/esb/fail</parameter>
  <parameter name="transport.vfs.ContentType">application/xml</parameter>
  <parameter name="transport.vfs.ActionAfterFailure">MOVE</parameter>
  <description></description>
</proxy> 
```

消息存储：

```
<messageStore name="AddressesMS" class="org.wso2.carbon.message.store.persistence.jms.JMSMessageStore" xmlns="http://ws.apache.org/ns/synapse">
  <parameter name="java.naming.factory.initial">org.apache.activemq.jndi.ActiveMQInitialContextFactory</parameter>
  <parameter name="java.naming.provider.url">tcp://localhost:61616</parameter>
  <parameter name="store.jms.JMSSpecVersion">1.1</parameter>
  <parameter name="store.jms.cache.connection">false</parameter>
</messageStore> 
```

消息处理器：

```
<messageProcessor name="AddressesMP" class="org.apache.synapse.message.processors.forward.ScheduledMessageForwardingProcessor" messageStore="AddressesMS" xmlns="http://ws.apache.org/ns/synapse">
  <parameter name="interval">10000</parameter>
  <parameter name="max.delivery.attempts">1</parameter>
</messageProcessor> 
```

端点：

```
<endpoint xmlns="http://ws.apache.org/ns/synapse" name="AddressesEP">
  <address uri="jms:/Addresses?transport.jms.ConnectionFactoryJNDIName=QueueConnectionFactory&java.naming.factory.initial=org.apache.activemq.jndi.ActiveMQInitialContextFactory&java.naming.provider.url=tcp://rhdev001:61616&transport.jms.DestinationType=queue">
  </address>
</endpoint> 
```

我在 wso2carbon.log 中看到此错误消息：

```
TID: [0] [ESB] [2012-11-07 02:58:07,396] ERROR {org.apache.axis2.transport.jms.JMSSender} -  Unable to create a JMSMessageSender for : null {org.apache.axis2.transport.jms.JMSSender}  
javax.jms.JMSException: Could not connect to broker URL: tcp://rhdev001:61616\. Reason: java.net.ConnectException: Connection refused  
TID: [0] [ESB] [2012-11-07 02:58:07,398] ERROR {org.apache.synapse.message.processors.forward.BlockingMessageSender} -  Error sending Message to url : jms:/Addresses?transport.jms.ConnectionFactoryJNDIName=QueueConnectionFactory&java.naming.factory.initial=org.apache.activemq.jndi.ActiveMQInitialContextFactory&java.naming.provider.url=tcp://rhdev001:61616&transport.jms.DestinationType=queue {org.apache.synapse.message.processors.forward.BlockingMessageSender}  
org.apache.axis2.AxisFault: Unable to create a JMSMessageSender for : null  
TID: [0] [ESB] [2012-11-07 02:58:07,399] ERROR {org.apache.synapse.message.processors.forward.ForwardingJob} -  Error Forwarding Message  {org.apache.synapse.message.processors.forward.ForwardingJob}  
java.lang.Exception: Error while Sending Message 
```

希望可以有人帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:46:10.253

在此版本的 ESB 中，消息处理器中的“max.delivery.attempts”参数存在一个小问题。但是您可以通过转到源视图并将“max.delivery.attempts”更改为“max.deliver.attempts”来完成这项工作。

# jquery - jQuery 通过 LI 滑动

> ID：13273648
> 
> 赞同：0
> 
> 时间：2012-11-07T16:11:44.713
> 
> 标签：jquery, slider

我有一长串从屏幕流出的 LId，我希望这样当我单击上一个和下一个按钮时，幻灯片会沿单击的任何方向移动。我希望它循环播放，如果可能的话，我想避开插件。

我知道我需要 marginLeft 来增加它的价值，但我不知道该怎么做。任何帮助将不胜感激。谢谢！

```
<ul>
   <li class="first selected team_one"></li>
   <li class="team_two"></li>
   <li class="team_three"></li>
   <li class="team_four"></li>
   <li class="last team_five"></li>
</ul>

$('.team .next').click(function(){
   $('.team ul li.first').animate({ marginLeft: '-157px' });
});

$('.team .prev').click(function(){              
   $('.team ul li.first').animate({ marginLeft: '0' });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:56:51.477

我们的想法是，这是一个彼此相邻的元素列表，在一个带有溢出：隐藏的 div 中。然后您只需为左侧或边距等设置动画以使其转到下一个图像，我使用的是 css3 过渡来为运动设置动画。

您可以使用几秒钟的 setTimeout() 执行一个函数，并在内部增加边距或向左（作为 pmandell 的注释），在增量之后您再次调用您的函数，您可以在顶部放置一个 if 语句，如 if left 或 margin 高于 x 然后你再次设置初始值而不是增量。您还可以定义一个布尔值并在该布尔值更改时停止动画，作为计数器或类似的东西。

希望它可以帮助你。

# android - Android：如何将多种样式应用于布局？

> ID：13273651
> 
> 赞同：1
> 
> 时间：2012-11-07T16:11:45.523
> 
> 标签：android, styles

在我的应用程序中，我提供了一个选项来应用样式来编辑活动的背景颜色。但是，如何添加额外的微调器选项来更改字体样式？我可以创建一个主题来涵盖背景和字体样式的每种组合，但是随着添加更多颜色或样式，这将变得笨拙。有没有人有任何指导？

```
<style name ="redBody">
         <item name="android:textColor">@color/red</item>
        <item name ="android:background">@color/white</item>
    </style>

    <style name ="redTitle">
         <item name="android:textColor">@color/white</item>
        <item name ="android:background">@color/red</item>
    </style>

    <style name ="blueBody">
         <item name="android:textColor">@color/darkBlue</item>
        <item name ="android:background">@color/white</item>
    </style>

    <style name ="blueTitle">
         <item name="android:textColor">@color/white</item>
        <item name ="android:background">@color/darkBlue</item>
    </style>

    <style name ="greenBody">
         <item name="android:textColor">@color/green</item>
        <item name ="android:background">@color/white</item>
    </style>

    <style name ="greenTitle">
         <item name="android:textColor">@color/white</item>
        <item name ="android:background">@color/green</item>
    </style>

    <style name = "Theme" parent="@android:style/Theme">
        </style>

    <style name = "Theme.Red" >
        <item name="textTitle">@style/redTitle</item>
        <item name="textBody">@style/redBody</item>

        </style>

    <style name = "Theme.Blue" >
        <item name="textTitle">@style/blueTitle</item>
        <item name="textBody">@style/blueBody</item>

        </style>
    <style name = "Theme.Green">
        <item name="textTitle">@style/greenTitle</item>
        <item name="textBody">@style/greenBody</item>

        </style> 
```

# signalr - 在 ASP.NET 中托管“n”个 SignalR 集线器（但包含 MEF）

> ID：13273652
> 
> 赞同：0
> 
> 时间：2012-11-07T16:11:48.080
> 
> 标签：signalr, signalr-hub

我有一个 ASP.NET Web 项目，我需要在其中托管多个 SignalR 集线器，另一个 MVC3 应用程序将与之通信。

我的主要问题是直到运行时我才知道我将托管哪些集线器，因为它们需要被 MEF 插入。包含导出（IXXXHub 类型）的 DLL 将位于 ASP.NET Web 的 bin 目录中地点。目前有 3 种可导出类型 - AHub、BHub 和 CHub，但可能还有更多，例如 DHub 可能会在以后实施。

我已经浏览了 SignalR 示例，展示了如何在 ASP.NET Web 项目中托管，所以我感到困惑的部分是试图让我的 MEF 进入并托管 AHub/BHub/CHub 中的每一个。我已经查看了使用 Application_Start 的各种方法，但无法弄清楚如何。

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:42:32.613

我最终得到了答案，方法是在 Global.asax 类中的 List 对象上使用 [ImportMany] 属性，然后在 Application_Start 函数中使用 MEF 目录/容器/ComposeParts 代码。

# qt - 如何使用 QGLWidget 或 QGLBuilder 创建一个在中点弯曲的 Quad？

> ID：13273653
> 
> 赞同：0
> 
> 时间：2012-11-07T16:11:53.340
> 
> 标签：qt, opengl

如何使用 QGLWidget 或 QGLBuilder 创建一个在中点弯曲的 Quad？实际上，我想以一种看起来像切割球体的方式弯曲四边形。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:22:14.510

> 如何创建在中点弯曲的四边形

你不能。根据定义，四边形总是平坦的。您当然可以将四边形细分为许多小三角形并变形该网格，但这是不同的。

> QGLWidget 还是 QGLBuilder？

那些都无所谓。

# javascript - 选择后如何禁用下拉菜单项？

> ID：13273658
> 
> 赞同：0
> 
> 时间：2012-11-07T16:11:57.503
> 
> 标签：javascript, html

类别是您将看到的第一个项目，我希望在选择它后将其删除或禁用，以便在查看其他下拉菜单项时不会显示。

```
<select NAME="category" style="width:130px; background-color:#FFF; font-weight:bold; font-size:12px;" ONCHANGE="setup(document.search1.category.value)"> 
  <option value="category" selected="selected">Category</option> 
  <option value="cleaning">Cleaning</option> 
  <option value="cooling">Cooling</option>
  <option value="heating">Heating</option> 
  <option value="kitchen">Kicthen</option> 
  <option value="lighting">Lighting</option> 
  <option value="washroom">Washroom</option> 
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:14:09.700

这将删除选定的项目

```
<select NAME="category" style="width:130px; background-color:#FFF; font-weight:bold; font-size:12px;" onchange="this.remove(this.selectedIndex);"> 
  <option value="category" selected="selected">Category</option> 
  <option value="cleaning">Cleaning</option> 
  <option value="cooling">Cooling</option>
  <option value="heating">Heating</option> 
  <option value="kitchen">Kicthen</option> 
  <option value="lighting">Lighting</option> 
  <option value="washroom">Washroom</option> 
</select>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:18:48.470

你应该像这样使用它`disabled = 'disabled'`

```
<select NAME="category" style="width:130px; background-color:#FFF; font-weight:bold; font-size:12px;" onchange="javascript:this.disabled = 'disabled';"> 
  <option value="category" selected="selected">Category</option> 
  <option value="cleaning">Cleaning</option> 
  <option value="cooling">Cooling</option>
  <option value="heating">Heating</option> 
  <option value="kitchen">Kicthen</option> 
  <option value="lighting">Lighting</option> 
  <option value="washroom">Washroom</option> 
</select>​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T16:19:58.383

如果您想在用户从您的下拉列表中选择不同的项目后删除“类别”行项目，您可以这样做：

```
<script type="text/javascript">
    $(document).ready(function () {

    $('#selectList').change(function () {
        if (this[0].value == "category")
        {
            this.remove(this[0]);
        }
    });

});
</script>

<select id='selectList' name="category" 
style="width:130px; background-color:#FFF; font-weight:bold; font-size:12px;"> 
    <option value="category">Category</option> 
    <option value="cleaning">Cleaning</option> 
    <option value="cooling">Cooling</option>
    <option value="heating">Heating</option> 
    <option value="kitchen">Kicthen</option> 
    <option value="lighting">Lighting</option> 
    <option value="washroom">Washroom</option> 
</select> 
```

这将从下拉列表中删除类别行，并且仅删除类别行。

# excel - 在 Excel 中检测重复数据的公式（有一个困难的变量！）

> ID：13273665
> 
> 赞同：2
> 
> 时间：2012-11-07T16:12:27.547
> 
> 标签：excel, excel-formula

我需要清理邮件列表，并且想知道是否有人知道一个公式来找出以下内容：

我有一个包含两列 A 和 B 的 Excel 电子表格，我需要做的公式是：如果 [B 列中的值重复] 有 [A 列中的空白] AND [A 列中的数据] 然后显示 B 列的值在新的 C 列中。

数据示例：

```
COL A      |    COL B
11/11/12   |    **name@example.com**
03/09/11   |    different@example.com
           |    **name@example.com**
06/01/12   |    anothername@example.com 
```

该公式将检测到 name@example.com 重复并且它在 A 列中有一个日期，并且在 A 列中没有任何值，因此在 C 列中显示：name@example.com。

希望这是有道理的！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T16:30:24.013

这应该有效（显然更改范围以覆盖所有行）：

```
=IF(AND(COUNTIF($B$2:$B$5,B2)>1,A2=""),B2,"") 
```

# postgresql - 在 PostgreSQL 9.2 中重命名 hstore 键

> ID：13273667
> 
> 赞同：10
> 
> 时间：2012-11-07T16:12:37.630
> 
> 标签：postgresql, hstore

[我一直在评估 PostgreSQL 的 hstore 功能（9.2），而精美的手册](http://www.postgresql.org/docs/current/static/hstore.html)唯一没有明确说明的是如何重命名键。例如，我如何将密钥重命名`c`为`ai_count`？

`"c"=>"3", "ai_voltage"=>"3", "ai_temperature"=>"28"`

我认为没有直接的方法可以做到这一点，它涉及将密钥复制`c`到`ai_count`密钥，然后删除`c`密钥。我怎样才能做到这一点，理想情况下作为一个可以应用于多个记录的单行？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-07T19:13:04.637

我认为您是对的，您必须将旧对拔出并将新对（使用重命名的密钥）放回原处。

你可以用单线做到这一点：

```
(h - from_key) || hstore(to_key, h -> from_key) 
```

`h`hstore 在哪里，是`from_key`您要更改的密钥，`to_key`也是您要更改的内容。这将返回一个具有所需更改的新 hstore，但它假定它`from_key`位于`h`; 如果`from_key`不在，`h`那么你最终会`to_key -> NULL`在你的 hstore 中得到 a。如果您像所有理智的人一样，不想要杂散的 NULL，那么我会将逻辑包装在一个简单的函数中，以便更容易添加存在检查；像这样的东西：

```
create or replace function
change_hstore_key(h hstore, from_key text, to_key text) returns hstore as $$
begin
    if h ? from_key then
        return (h - from_key) || hstore(to_key, h -> from_key);
    end if;
    return h;
end
$$ language plpgsql; 
```

然后你可以说这两个并得到预期的结果：

```
=> select change_hstore_key('a=>1,b=>2,c=>3'::hstore, 'b', 'pancakes');
      change_hstore_key       
------------------------------
 "pancakes"=>"2", "a"=>"1", "c"=>"3"

=> select change_hstore_key('a=>1,b=>2,c=>3'::hstore, 'pancakes', 'X');
      change_hstore_key       
------------------------------
 "a"=>"1", "b"=>"2", "c"=>"3" 
```

# javascript - 使用 Javascript 保存文件对话框

> ID：13273675
> 
> 赞同：0
> 
> 时间：2012-11-07T16:13:06.407
> 
> 标签：javascript, ember.js

我想问一下有没有什么代码行可以放入一个JS文件中，弹出一个文件对话框，提示我保存一个创建好的txt文件？

目前，在我的项目中使用 ember.js。动作顺序是单击网页中的按钮将触发一个动作以调用我的一个 js 文件中的函数。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:23:49.453

由于正常的浏览器安全限制，您不能使用 JavaScript 从 Web 浏览器将文件保存到桌面，所以简而言之，答案是否定的。

我假设您正在生成要保存到 Web 浏览器中的文件的文本。您可以做的是将该文本提交到您的网络服务器，并让您的网络服务器将文本作为 HTTP 响应发送回，但设置以下 HTTP 标头...

```
Content-Disposition: attachment; filename=<file name.ext> 
```

...这将强制另存为对话框，而不是浏览器在屏幕上呈现它。

参考：[http ://www.jtricks.com/bits/content_disposition.html](http://www.jtricks.com/bits/content_disposition.html)

希望对你有帮助...

# c - RAND_MAX 是否保证 <= UINT_MAX？

> ID：13273676
> 
> 赞同：1
> 
> 时间：2012-11-07T16:13:06.803
> 
> 标签：c, c99

我正在尝试确定 RAND_MAX 是否可以放入 unsigned int 变量中。在查看了 C99 标准之后，我只发现 RAND_MAX 保证至少有 32767 的值。虽然我知道 RAND_MAX 扩展为 int 值，但我不确定它是否是一个 long int。现在我正在使用 unsigned long int 变量，但我想简化我的源代码以使用 unsigned int 变量。

总而言之，这个假设陈述是否适用于 C99 标准：

RAND_MAX <= UINT_MAX <= ULONG_MAX

此外，RAND_MAX 是否明确小于（即不等于）UINT_MAX 或 ULONG_MAX。我意识到 RAND_MAX 的值通常是梅森素数，但我不确定这是否是标准。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-07T16:20:49.107

`RAND_MAX`是可以返回的最大值`rand()`。既然`rand()`被定义为返回`int`，`RAND_MAX`就不会超过`INT_MAX`，因此也就不会超过`UINT_MAX`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T16:21:10.337

`rand`具有签名`int rand(void);`，因此它返回的任何非负值都必须适合`unsigned int`，因为 的非负范围`int`包含在 的范围内`unsigned int`。

这没有明确说明`RAND_MAX`是 <= `INT_MAX`，但是要求`rand`返回范围`0`to的值`RAND_MAX`以及 32767 for 的下限`RAND_MAX`表示`rand`预期覆盖范围`0`to `RAND_MAX`，如果它大于则不会出现这种情况`INT_MAX`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T16:20:21.697

试试[这个](https://stackoverflow.com/questions/4945698/is-the-value-of-rand-max-always-2n-1)。

我同意这个问题的回答者的观点，即 Mersenne Twister 将为您提供所需的所有控制和速度。它也是任何 C++ 程序的一个非常容易的补充。

但就像许多其他人所说的那样，rand() 的 int 返回类型实际上保证了 RAND_MAX 小于 UINT_MAX。

# c# - 将位图的数据位存储到 int 数组中

> ID：13273678
> 
> 赞同：3
> 
> 时间：2012-11-07T16:13:13.680
> 
> 标签：c#, bitmap

在Java中我会做这样的事情

```
int[] pixels = ((DataBufferInt) image.getRaster().getDataBuffer()).getData(); 
```

其中 image 是一个 BufferedImage ，然后改变那里的像素并制作我自己的 blitting 方法但是我应该如何在 C# 中做这样的事情？我知道我可以使用位图来替换 C# 中的 BufferedImage，但我不确定是否要引用上面显示的数据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T16:20:14.043

您将使用[`Lockbits`](http://msdn.microsoft.com/en-us/library/5ey6h79d.aspx)and `Marshal.Copy`：

```
Rectangle rect = new Rectangle(0, 0, bmp.Width, bmp.Height);
System.Drawing.Imaging.BitmapData bmpData =
  bmp.LockBits(rect, System.Drawing.Imaging.ImageLockMode.ReadWrite, bmp.PixelFormat);

IntPtr ptr = bmpData.Scan0;
int bytes  = Math.Abs(bmpData.Stride) * bmp.Height;
byte[] rgbValues = new byte[bytes];

// Copy the RGB values into the array.
System.Runtime.InteropServices.Marshal.Copy(ptr, rgbValues, 0, bytes);

// do something with the array

// Copy the RGB values back to the bitmap
System.Runtime.InteropServices.Marshal.Copy(rgbValues, 0, ptr, bytes);

bmp.UnlockBits(bmpData); 
```

注意：代码基本上是来自`LockBits`文档页面的示例代码，但代码有一个限制。它假定该`Stride`值为正，即图像没有倒置存储在内存中，尽管使用`Math.Abs`on`Stride`值表明编写代码的人知道该`Stride`值可能为负。

对于负值`Stride`，`Scan0`不能用作连续内存块的起始地址，因为它是第一条扫描线的地址。内存块的起始地址将是图像中最后一行的起始地址，而不是第一行。

该地址将是`bmpData.Scan0 + bmpData.Stride * (bmp.Height - 1)`

# java - Maven如何为create-schema命令指定一个sql文件目录

> ID：13273682
> 
> 赞同：1
> 
> 时间：2012-11-07T16:13:25.227
> 
> 标签：java, mysql, maven, configuration

我有几个包含多个 sql 文件的目录。如何配置 maven 以运行目录中的所有 sql 文件。我目前的配置是这样的：

```
 <build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>sql-maven-plugin</artifactId>
            <version>${sql-maven-plugin.version}</version>
            <dependencies>
                <dependency>
                    <groupId>mysql</groupId>
                    <artifactId>mysql-connector-java</artifactId>
                    <version>${mysql-connector.version}</version>
                </dependency>
            </dependencies>
            <configuration>
                <driver>${mysql.jdbc.driver.class.name}</driver>
                <url>${mysql.jdbc.url}</url>
                <username>${mysql.jdbc.username}</username>
                <password>${mysql.jdbc.password}</password>
            </configuration>
            <executions>
                <execution>
                    <id>create-schema</id>
                    <phase>install</phase>
                    <goals>
                        <goal>execute</goal>
                    </goals>
                    <configuration>
                        <skip>${mysql.db.skip}</skip>
                        <autocommit>true</autocommit>
                        <srcFiles>
<srcFile>src/main/resources/directory1/file1.sql</srcFile>
<srcFile>src/main/resources/directory1/file2.sql</srcFile>
<srcFile>src/main/resources/directory2/file1.sql</srcFile>
<srcFile>src/main/resources/directory2/file2.sql</srcFile>
                        </srcFiles>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
  </build> 
```

每个目录中有很多文件。

如何使用目录而不是列出每个文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:20:21.470

根据[文档](http://mojo.codehaus.org/sql-maven-plugin/usage.html)，您可以指定一个文件集，而不是单独列出您的文件。[这里](http://mojo.codehaus.org/sql-maven-plugin/examples/execute.html)给出了一个例子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-01T15:08:41.207

在 pom.xml 中完成 basedir

```
 <execution>
        <id>create-data</id>
        <phase>process-test-resources</phase>
        <goals>
          <goal>execute</goal>
        </goals>
        <configuration>
          <orderFile>ascending</orderFile>
          <fileset>
            <basedir>${basedir}</basedir>
            <includes>
              <include>src/test/sql/test-data2.sql</include>
              <include>src/test/sql/test-data1.sql</include>
            </includes>
          </fileset>
        </configuration>
      </execution> 
```

# iphone - MPMoviePlayer 内的 UITapGestureRecognizer

> ID：13273691
> 
> 赞同：0
> 
> 时间：2012-11-07T16:14:05.970
> 
> 标签：iphone, objective-c, mpmovieplayercontroller, uigesturerecognizer

我正在尝试在 MPMoviePlayer 中添加一个 Tapgesturerecognizer。但是，当我点击它时，它只显示“电影菜单”（您可以暂停的栏等）。有没有办法将 UITapGestureRecognizer 添加到 MPMoviePlayer 或者我应该寻找其他方法来解决我的问题？

已经检查了文档和 SO 没有任何成功...

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:01:35.233

我曾经尝试自定义一个`MPMoviePlayer`，但它反击了。为了成功完成我的项目，我需要围绕一个来构建我自己的界面`AVPlayer`。

由于`MPMoviePlayer`该类是包含特定用户界面的高级类，`AVPlayer`因此很难自定义。`AVPlayer`可以提供一个显示电影的视图，但没有更多的用户界面。因为它是较低级别的类，所以它很乐意与您设计和实现的任何用户界面一起工作，包括与`UITapGestureRecognizer`对象交互。由于它是较低级别的类，因此您还需要在`MPMoviePlayer`. 添加该接口并不难。从阅读[AV Foundation Programming Guide](http://developer.apple.com/library/ios/#DOCUMENTATION/AudioVideo/Conceptual/AVFoundationPG/Articles/00_Introduction.html)开始。

# c# - 使用 javascript 上传和保存 Excel 文件 C# webservice

> ID：13273693
> 
> 赞同：2
> 
> 时间：2012-11-07T16:14:19.560
> 
> 标签：c#, web-services, excel, file, upload

我有一个使用 XMLHttpRequest 对象将文件上传到服务器的 javascript 代码。我接受该文件作为使用 C# 编写的 Web 服务中的流：

```
int uploadFile(Stream file)
{
    using (FileStream fileStream = File.Create(System.AppDomain.CurrentDomain.BaseDirectory + "file.csv"))
            {
                byte[] buffer = new byte[8 * 1024];
                int len;
                while ((len = file.Read(buffer, 0, buffer.Length)) > 0)
                {
                    fileStream.Write(buffer, 0, len);
                }    
            }
    //process file
    return 0;
} 
```

在 javascript 中，文件作为表单数据对象发送：

```
var fd = new FormData(document.forms.namedItem("file"));
var req = new XMLHttpRequest();
req.open("POST", url, true);
req.send(fd); 
```

现在，我正在尝试将 Excel 文件保存在服务器上。我正在将流读入字节数组并将其写入 csv 文件。但我面临的错误是 csv 文件中的数据损坏。

我哪里出错了，或者有没有其他方法可以通过网络服务上传和保存文件？

谢谢。

# c# - 如何根据本页上的链接从网页下载图片？

> ID：13273697
> 
> 赞同：2
> 
> 时间：2012-11-07T16:14:22.847
> 
> 标签：c#, .net, image, web, download

这是我到目前为止所拥有的，但我遇到了一个问题。

页面[https://xxxxxxxx.zendesk.com/tickets/33126](https://xxxxxxxx.zendesk.com/tickets/33126)包含指向 .jpg 图像的链接。我想下载这张图片。该页面可能有多个图像，因此我需要扫描页面以查找所有 .jpg、.gif 等。

```
I'm having an issue with my code at the end. I'll explain there.

    public static void GetTicketAttachments(string url)
    {   
        GetImages("https://xxxxxxxx.zendesk.com/tickets/33126");   
    }

static void GetImages(string url)
    {
        string responseString;
        HttpWebRequest initialRequest = (HttpWebRequest)WebRequest.Create(url);
        using (HttpWebResponse initialResponse = (HttpWebResponse)initialRequest.GetResponse())
        {
            using (StreamReader reader = new StreamReader(initialResponse.GetResponseStream()))
            {
                responseString = reader.ReadToEnd();
            }

            List<string> imageset = new List<string>();
            Regex regex = new Regex(@"f=""[^""]*jpg|bmp|tif|gif|png", RegexOptions.IgnoreCase);
            foreach (Match m in regex.Matches(responseString))
            {
                if (!imageset.Contains(m.Value))
                    imageset.Add(m.Value);
            }
            for (int i = 0; i < imageset.Count; i++)
                imageset[i] = imageset[i].Remove(0, 3);
            totalFiles = imageset.Count;
            currentFiles = totalFiles;

            foreach (string f in imageset)
            {
                ThreadPool.QueueUserWorkItem(new WaitCallback(DownloadImage), f);
            }
        }
    } 
```

问题发生在这里。出于某种原因，对象“路径”始终为空。因此我无法下载图片。

```
static void DownloadImage(object path)
    {
        currentFiles--;
        path = Path.GetFileName(path.ToString());
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(path.ToString());
        using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
        {
            Image image = Image.FromStream(response.GetResponseStream());
            image.Save(@"C:\" + Path.GetFileName(path.ToString()));
        }
    } 
```

有谁知道可能是什么问题？“图片计数”确实是计数 1（页面上的一个图片链接）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:16:16.603

不要尝试自己解析文档。查看 HTML Agility Pack ( [http://htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/) ) 从 HTML 文档中提取有意义的信息。

# android - 接电话VS按家

> ID：13273699
> 
> 赞同：0
> 
> 时间：2012-11-07T16:14:31.053
> 
> 标签：android

我运行我的 android 应用程序，当我按下主页按钮并返回应用程序时。一切都被维护（分数，状态..等）。假设它转到 OnPause OnResume。

但是，当我在运行我的应用程序时接到电话时，我的应用程序状态会被重置（分数消失了..etc）。

这是为什么？它不应该通过 onPause/OnResume 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:34:29.710

当你接到电话时，它会通过`onPause`and `onStop`，当它再次被带到前面时，它会通过`onStart`and `onResume`。它也可能正在经历，当你把它带回来时，`onDestroy`它会导致它经历。`onCreate`建议将`Log`语句放在每个生命周期方法中，以查看哪些被调用（或调试器中的断点）。然后你就会知道采取什么方法来恢复你的游戏。

实际上，您应该实现该应用程序，以便它可以`onDestroy`在以您想要的方式再次启动时通过并恢复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T16:37:56.500

当您的应用程序进入后台时，Android 操作系统会根据当前因素（例如可用内存）决定是否应终止该应用程序。如果没有足够的资源来维持该`onPaused()`状态的应用程序，那么它们将被销毁（`onStop()`随后是`onDestroy()`）。

> 它不应该通过 onPause/OnResume 吗？

根据上述和[文档](http://developer.android.com/reference/android/app/Activity.html)，是的，它确实进入了`onPause`，但之后它进入了其他阶段。

这是一张方便的图片，可以帮助我*了解*您阅读的文档。

![Android 活动生命周期](../Images/5c3db2f4141bb962cef57eed42280a9c.png)

# sql - SQL 带回材料名称

> ID：13273705
> 
> 赞同：1
> 
> 时间：2012-11-07T16:15:08.453
> 
> 标签：sql, sql-server-2008, tsql

下面的代码是我创建的查询的结果，除了一件事之外它都可以正常工作。我有材料名称的材料 ID：

```
1 = bath
2 = sink
3 = toilet 
```

以下有效，但显示每种材料的水槽

```
Select cu.FName + '  ' + cu.SName as 'Name', 
cu.Address1 + ', ' + cu.Address2 + ', ' + cu.Address3 as 'Dispatch Address', 
cu.PostCode, 
co.DateOrdered,
co.Material1,
ma.MaterialName,
co.material2, 
ma.MaterialName, 
ma.Price as 'Item Price' 
from Customers cu 
left join CustomerOrder co on co.CustomerID = cu.CustomerID
left join ItemOrder it on it.OrderID = co.OrderID 
left join Materials ma on ma.MaterialID = co.Material1 
or co.material2 = ma.MaterialItemID or co.material3 = ma.MaterialItemID 
```

它显示如下（仅列出材料以防止混淆）

```
Material1 | MaterialName | Material2 | Material2Name | Material3 | Material3Name
    1          Sink            2           Sink           3             Sink 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:18:53.730

有几种方法可以做到这一点，包括`JOIN`在`materials`桌子上多次使用以获得结果：

```
Select cu.FName + '  ' + cu.SName as 'Name', 
    cu.Address1 + ', ' + cu.Address2 + ', ' + cu.Address3 as 'Dispatch Address', 
    cu.PostCode, 
    co.DateOrdered,
    co.Material1,
    ma1.MaterialName Material1Name,
    co.material2, 
    ma2.MaterialName Material2Name, 
    ma1.Price as 'Item Price',
    co.material3, 
    ma3.MaterialName  Material3Name
from Customers cu 
left join CustomerOrder co 
    on co.CustomerID = cu.CustomerID
left join ItemOrder it 
    on it.OrderID = co.OrderID 
left join Materials ma1 
    on ma1.MaterialID = co.Material1 
left join Materials ma2 
    on co.material2 = ma2.MaterialItemID
left join Materials ma3 
    on co.material3 = ma3.MaterialItemID 
```

# android - Android - 是否有可能找出哪个应用程序具有音频焦点？

> ID：13273711
> 
> 赞同：6
> 
> 时间：2012-11-07T16:15:27.743
> 
> 标签：android, android-audiomanager

我的手机上有一个应用程序可以持续关注音频，即使没有声音播放也是如此。作为应用程序开发人员，我想知道我是否能够告知用户它是哪个应用程序，或者我是否可以判断我的应用程序是否具有音频焦点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T21:09:13.027

我强烈怀疑是否有任何公共 API 可以告诉您目前哪个应用程序具有焦点。

您可以通过请求来跟踪您的应用是否具有音频焦点，例如：

```
AudioManager audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
boolean requestGranted = AudioManager.AUDIOFOCUS_REQUEST_GRANTED == audioManager.requestAudioFocus(listener, AudioManager.STREAM_MUSIC,
                    AudioManager.AUDIOFOCUS_GAIN);
if(requestGranted){
   // you now has the audio focus
} 
```

当您请求和放弃焦点时，您应该确保维护您的侦听器的**单个**实例，[请在此处查看我的答案](https://stackoverflow.com/questions/11860046/android-mediaplayer-audiofocus-loss-setonerrorlistener-issue/14129015#14129015)以解决音频焦点的常见问题

这是一个例子`onAudioFocusChange()`：

```
@Override
public void onAudioFocusChange(int focus) {

  switch (focus) {
    case AudioManager.AUDIOFOCUS_LOSS:
        Log.d(TAG,"AUDIOFOCUS_LOSS");
        // stop and release your player
        break;
    case AudioManager.AUDIOFOCUS_LOSS_TRANSIENT:
        Log.d(TAG,"AUDIOFOCUS_LOSS_TRANSIENT");
        // pause your player
        break;
    case AudioManager.AUDIOFOCUS_GAIN:
        Log.d(TAG,"AUDIOFOCUS_GAIN");
        // restore volume and resume player if needed
        break;
    case AudioManager.AUDIOFOCUS_LOSS_TRANSIENT_CAN_DUCK:
        Log.d(TAG,"AUDIOFOCUS_LOSS_TRANSIENT_CAN_DUCK");
        // Lower volume
        break;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-25T00:45:08.390

Maybe this method does what you want: AudioManager.isMusicActive() [http://developer.android.com/reference/android/media/AudioManager.html#isMusicActive%28%29](http://developer.android.com/reference/android/media/AudioManager.html#isMusicActive%28%29)

# c++ - C++ 错误：转换为非标量类型

> ID：13273714
> 
> 赞同：5
> 
> 时间：2012-11-07T16:15:40.397
> 
> 标签：c++, string, stl, iterator, syntax-error

我似乎在下面的代码段中遇到了一个特殊的错误（忽略多余的头文件和空白的 main 函数，我只是想将此问题隔离到一个可编译的 .cpp 文件中以便在此处发布）。它表示从“[我定义的某种类型]”到非标量类型“[我定义的某种类型]”的错误转换。

这个特定示例中的代码应该将一组字符串列表作为一个输入参数（命名输入），并将对字符串列表的引用作为另一个（命名输出）并计算最长的字符串公共前缀列表输入中的列表并将结果存储到输出中。

编译器错误消息（也作为注释包含在相应行中是这样的：

> lcp.cpp:28:47：错误：从 '<code>std::list<std::basic_string<char> >::const_iterator {aka std::_List_const_iterator<std::basic_string<char> >}' 转换为非标量类型 '<code>std::list<std::basic_string<char> >::iterator {aka std::_List_iterator<std::basic_string<char> >}'

这是实际的程序：

```
#include <iostream>
#include <sstream>
#include <string>
#include <vector>
#include <set>
#include <map>
#include <list>

using namespace std;

void getLongestCommonPrefix(set <list <string> > & input, list <string> & output)
{

    set <list <string> > :: iterator it = input.begin();

    output = *it;

    for(; it != input.end(); ++it)
    {
        if(output.size() > (*it).size())
        {
            list <string> :: iterator it1 = output.begin();
            advance(it1, (*it).size()-1);
            output.erase(it1, output.end());
        }

        list <string> :: iterator it1 = output.begin();
        list <string> :: iterator it2 = (*it).begin();  //lcp.cpp:28:47: error: conv    ersion from ‘std::list<std::basic_string<char> >::const_iterator {aka     std::_List_const_iterator<std::basic_string<char> >}’ to non-scalar type     ‘std::list<std::basic_string<char> >::iterator {aka     std::_List_iterator<std::basic_string<char> >}’ requested

        for(; it1 != output.end(); ++it1,++it2)
        {
            if(*it1 != *it2)
                break;
        }

        output.erase(it1, output.end());

        if(!output.size())
            return;
    }
}     

int main()
{
    return 0;
} 
```

我很想听听这里的专家关于为什么以及何时发生这种错误以及解决方法可能是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T16:20:08.173

从 C++11 开始，`std::set`没有非常量迭代器。当你这样说时：

```
(*it).begin(); 
```

您正在取消引用一个常量迭代器以获取一个常量对象并调用`begin()`该对象，这为您提供了另一个常量迭代器，因为该对象是常量。然后，您尝试将此常量迭代器存储到非常量迭代器中，因此会出现错误。

# java - 当 mvn install 神秘地失败时 -

> ID：13273715
> 
> 赞同：2
> 
> 时间：2012-11-07T16:15:43.537
> 
> 标签：java, maven, junit, installation, classloader

我有一个带有单元测试的 maven 项目，并且在运行“mvn install”时得到了很大的异常跟踪。令人惊讶的是 - 这个堆栈跟踪实际上不会导致任务失败！看来这与Junit库的可用性有关......

1）我想知道如何（显然）为这个项目解决这个问题，以便库可用并且测试运行（是的，Junit4 在 pom.xml 依赖项中）。

2）明确调试并找到根本原因的最佳方法是什么？

3) 为什么 Maven 说“构建成功”时，surefire 实用程序显然抛出了一个讨厌的异常？

> org.apache.maven.surefire.util.SurefireReflectionException：java.lang.reflect.InvocationTargetException；嵌套异常是 java.lang.reflect.InvocationTargetException: null java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect .DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164) at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110) 在 org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:172) 在 org.apache。

POM在下面

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>rudolf</groupId>
    <artifactId>r1</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>jar</packaging>

    <name>r1</name>
    <url>http://maven.apache.org</url>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.1</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>commons-lang</groupId>
            <artifactId>commons-lang</artifactId>
            <version>2.3</version>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-io</artifactId>
            <version>1.3.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.derby</groupId>
            <artifactId>derby</artifactId>
            <version>10.9.1.0</version>
        </dependency>
        <dependency>
            <groupId>com.google.protobuf</groupId>
            <artifactId>protobuf-java</artifactId>
            <version>2.4.0a</version>
        </dependency>
    </dependencies>

    <build>
        <plugins>
          <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.9</version>
            <executions>
                <execution>
                    <phase>test</phase>
                    <goals>
                        <goal>test</goal>
                    </goals>
                </execution>
            </executions>
          </plugin>          
          <plugin>
             <groupId>org.apache.maven.plugins</groupId>
             <artifactId>maven-compiler-plugin</artifactId>
             <version>2.3.2</version>
             <configuration>
               <source>1.6</source>
               <target>1.6</target>
             </configuration>
           </plugin>
        </plugins>
    </build>

    <pluginRepositories>
        <pluginRepository>
            <id>onejar-maven-plugin.googlecode.com</id>
            <url>http://onejar-maven-plugin.googlecode.com/svn/mavenrepo</url>
        </pluginRepository>
    </pluginRepositories>
</project> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:00:35.657

**这绝对是一场完美的愚蠢风暴：**

1) My Test Classes 没有按照**默认的surefire正则表达式**命名请看相关的[Maven没有找到要运行的JUnit测试](https://stackoverflow.com/questions/6178583/maven-does-not-find-junit-tests-to-run)。所以测试并没有真正运行。

2) DID 运行的测试实际上是在做一些 JVM 黑客攻击，使用诸如“不安全”之类的类 - 导致分段错误。这种分段错误与整个 Maven 构建相混淆，破坏了 Maven 输出的结果。

**带回家的课程是：**

1)（不是 100% 肯定，但它似乎）——如果在 mvn 构建期间 JVM 中发生了一些奇怪的低级故障，人们可能会期望最后会出现奇怪的结果，这并不能简单地以正确的方式指示错误/故障

2）用于surefire行为的默认Junit测试用例不只是自动运行包中的所有@Test方法 - 必须适当地命名类，或者您必须手动编辑surefire模式过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T23:35:45.583

我在使用 TestNG 集成测试（故障安全）时遇到了这样的问题。一个类似的非常神秘的错误导致我失去了一整天（啊！-请 Eclipse/TestNG，如果您要给我们错误，请让它们有所帮助）。就我而言，这是因为测试方法上的访问器是私有的，需要公开。

我希望其他人在浪费一整天之前发现这很有用。

# c++ - 收集与 c++ MVS2008 解决方案的所有枚举关联的所有“字符串”

> ID：13273717
> 
> 赞同：1
> 
> 时间：2012-11-07T16:15:47.780
> 
> 标签：c++, visual-studio-2008, boost, macros, enums

我在 MVS2008 中创建了一个巨大的 C++ 解决方案作为“win32 控制台应用程序”项目，创建过程中唯一的附加选项是：“预编译头文件”。

在这个解决方案中，我现在有大量以各种方式定义的枚举：它们总是在*`.h`*文件中定义，但它们可以在命名空间内、类内或命名空间内的类内定义。

我想以更优雅的方式定义（我知道如何以蛮力的方式来做，但它不会是 DRY，对吧？）一个函数：

```
void myfunc( const char * ) 
```

当我将这个枚举的“字符串值”传递给它时，它将打印一个枚举的所有“字符串”值。

准确地说，如果我的代码中有某处：

```
enum Place
{
    Home,
    Work
}; 
```

我希望能够将字符串“Place”和打印字符串“Home”和“Work”的函数传递给我的函数。

确实有很多枚举，如果可能的话，我希望避免大量修改它们，最好不要修改它们。我想到了一个小型解析器，但我认为这根本不是最优的。

顺便说一句，我被限制不使用与 boost 不同的外部事物，但我可以使用宏。我希望能够以某种方式定义枚举上的“循环”的概念，以及“枚举字符串中的循环”的概念，但根本不知道该怎么做。

欢迎所有想法。

# lucene.net - Lucene.net 查询包含并避免空字符串字段

> ID：13273718
> 
> 赞同：0
> 
> 时间：2012-11-07T16:15:48.340
> 
> 标签：lucene.net, term

我有一个 Lucene 索引设置，可以很好地查询。我只是无法让“字段不等于空字符串”条件起作用。例如在下面的代码示例中，我想要 3 个条件

1.  其中“国家标签”字段包含“{4ED2F7EE-5C2A-418C-B2F6-236F94166BA1}”。
2.  其中“国家标签”字段不是空字符串。
3.  其中“日期”范围在“20110101T000000”和“20121001T000000”之间。

    ```
     WildcardQuery taggingQuery = new WildcardQuery(new Term("country tag", "*" + ShortID.Encode("{4ED2F7EE-5C2A-418C-B2F6-236F94166BA1}").ToLowerInvariant() + "*"));
        TermQuery taggingNotQuery = new Term("country tag", " "));

        RangeQuery rangeQuery = new RangeQuery(new Term("date", "20110101T000000"), new Term("date", "20121001T000000"), true);

        BooleanQuery booleanQuery = new BooleanQuery();
        booleanQuery.Add(taggingQuery, BooleanClause.Occur.MUST);
        booleanQuery.Add(taggingNotQuery, BooleanClause.Occur.MUST_NOT);
        booleanQuery.Add(rangeQuery, BooleanClause.Occur.MUST); 
    ```

我有一种感觉我做错了，或者我的查询在某种程度上是错误的。我不应该需要一个我应该注意空字段或空字段的条件。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:39:55.107

如果您允许 '*' 作为搜索字符串中的第一个字符，Lucene 可以使用“countrytag:*”之类的查询来查找在**countrytag**字段中包含任何内容的所有文档。（Lucene 的默认设置是禁用查询字符串中的初始 '*'。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:28:06.050

我应该在设置索引时多加注意。我忘了为每个字段添加字段分析器。使用不同的分析器而不是标准分析器对多列表字段进行索引。我将此添加到我的配置部分以进行字段抓取，并且我的查询开始工作

```
<fieldTypes hint="raw:AddFieldTypes">
                  <!-- Text fields need to be tokenized -->
                  <fieldType name="single-line text" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="multi-line text" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="word document" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="html" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="rich text" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="memo" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="text" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <!-- Multilist based fields need to be tokenized to support search of multiple values -->
                  <fieldType name="multilist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="treelist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="treelistex" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="checklist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <!-- Legacy tree list field from ver. 5.3 -->
                  <fieldType name="tree list" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                </fieldTypes> 
```

# iphone - UITableView 在 cellForRow 中使用 selectRowAtIndexPath 会导致双高亮

> ID：13273719
> 
> 赞同：1
> 
> 时间：2012-11-07T16:15:56.657
> 
> 标签：iphone, ios, ipad, uitableview

**背景：**我正在尝试实现一个可以折叠和展开的分段表格视图。折叠时，表格将记住选择的内容，并在展开时保留所选状态。

**问题：** a 部分已扩展并且功能正常。该单元格已按应有的方式选择。但是，在同一位置但下一部分的单元格似乎也被突出显示。

**示例：**我有 2 个部分：*A*和*B*。在每个部分中，我有 3 个单元格：*a*、*b*和*c*。我展开这两个部分，以便所有单元格都显示在屏幕上，并且没有选择任何内容。然后我点击（*A*，*a*）。单元格（*A*，*a*）突出显示，一切正常。我折叠*了 A*部分，然后展开*A*部分。( *A* , *a* ) 应突出显示。但是，( *B* , *a* ) 也被突出显示。这可以用 ( *A* , *b*) 和 ( *A* , *c* )。它会分别点亮 ( *B* , *b* ) 和 ( *B* , *c* )。

**项目：** <*已删除*>

**代码：**

`viewController.m` 对此持有细节问题。

```
@interface ViewController ()

@end

@implementation ViewController{
    UITableView * _tableView;

    BOOL aOpen;
    BOOL bOpen;
    BOOL cOpen;

    NSIndexPath *selectedIndexPath;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    _tableView = [[UITableView alloc]initWithFrame:self.view.bounds style:UITableViewStylePlain];
    _tableView.delegate = self;
    _tableView.dataSource = self;
    _tableView.allowsMultipleSelection = NO;
    [self.view addSubview:_tableView];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table View stuff
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 3;
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section{
    switch (section) {
        case 0:
            return [[TableViewHeader alloc]initWithFrame:CGRectMake(0, 0, self.view.bounds.size.width, 40) title:@"Section A" section:section isOpen:aOpen delegate:self];
            break;
        case 1:
            return [[TableViewHeader alloc]initWithFrame:CGRectMake(0, 0, self.view.bounds.size.width, 40) title:@"Section B" section:section isOpen:bOpen delegate:self];
            break;
        case 2:
            return [[TableViewHeader alloc]initWithFrame:CGRectMake(0, 0, self.view.bounds.size.width, 40) title:@"Section C" section:section isOpen:cOpen delegate:self];
            break;
        default:
            return Nil;
            break;
    }
}

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section{
    return 40;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    switch (section) {
        case 0:
            return aOpen? 3:0;
            break;
        case 1:
            return bOpen? 4:0;
            break;
        case 2:
            return cOpen? 5:0;
            break;
        default:
            return 0;
            break;
    }

}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];
    if (!cell) {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cell"];
        cell.contentView.backgroundColor = [UIColor grayColor];
        cell.contentView.alpha = .4;
    }

    if ([selectedIndexPath isEqual:indexPath]) {//if it was already selected
        [tableView selectRowAtIndexPath:indexPath animated:NO scrollPosition:UITableViewScrollPositionNone];
    }
    return cell;

}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    return 74;
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;

}

//for high visibility purpose
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section
{
    if (section == 2) {
        UIView *view = [[UIView alloc] init];
        return view;
    }

    return nil;
}

-(CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section{
    if (section == 2) {
        return 1;
    }
    return 0;
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

    selectedIndexPath = indexPath;
    [tableView reloadData];
}

#pragma mark - header delegate handler
- (void) headerTappedAtSection: (int) section {
    BOOL openAction = false;
    int numberOfRow;
    switch (section) {
        case 0:
            aOpen = !aOpen;
            openAction = aOpen;
            numberOfRow = 3;
            break;
        case 1:
            bOpen = !bOpen;
            openAction = bOpen;
            numberOfRow = 4;
            break;
        case 2:
            cOpen = !cOpen;
            openAction = cOpen;
            numberOfRow = 5;
            break;
        default:
            break;
    }
    [_tableView reloadSections: [NSIndexSet indexSetWithIndex:section] withRowAnimation:UITableViewRowAnimationAutomatic];
    if (openAction && numberOfRow) {
        [_tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:section] atScrollPosition:UITableViewScrollPositionTop animated:YES];
    }
}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:48:46.533

我建议执行以下操作：

从 tableView 中删除：cellForRowAtIndexPath

```
if ([selectedIndexPath isEqual:indexPath]) {//if it was already selected
     [tableView selectRowAtIndexPath:indexPath animated:NO scrollPosition:UITableViewScrollPositionNone];
} 
```

并在 reloadSection 之后添加内部头委托处理函数（可能在 if (openAction && numberOfRow){} 中）

```
 [_tableView selectRowAtIndexPath:selectedIndexPath animated:NO scrollPosition:UITableViewScrollPositionNone]; 
```

这将确保在重新加载部分后选择单元格。并且由于 selectedCellIndex 已保存，您应该能够使用它来选择单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:32:32.763

您的表格视图是否已`allowsMultipleSelection`设置为`YES`？如果是这样，您需要将其设置为`NO`以便表格视图将*替换*该部分，而不是在您调用`selectRowAtIndexPath:animated:scrollPosition:`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T05:25:12.220

尝试改变

```
[_tableView reloadSections: [NSIndexSet indexSetWithIndex:section] withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

用一个简单的..

```
 [_tableView reloadData]; 
```

# c# - Edmx 实体模型继承

> ID：13273720
> 
> 赞同：-2
> 
> 时间：2012-11-07T16:15:59.573
> 
> 标签：c#, .net, ado.net, edmx

我想创建一个通用实体模型，上面有一些类和逻辑，以放入 DLL 并在各种项目中重用它。我牢记在每个项目的另一个中扩展通用 ModelContainer 并使用扩展的 ModelContainer 访问数据库的可能性。我问你是否可以以“干净的方式”这样做，或者我需要一些工作或“坏东西”。谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:20:46.673

我不明白你到底想要什么，但我认为你想扩展由`edmx`.

您可以使用`Partial Classes`或来做到这一点`Extension Methods`。

# python - Boto 上传到 S3 不适用于某些文件类型

> ID：13273727
> 
> 赞同：1
> 
> 时间：2012-11-07T16:16:23.817
> 
> 标签：python, django, amazon-s3, amazon-web-services, boto

以下代码将上传的文件存储在 S3 中：

```
def store_in_s3(filename, filecontent, type, modelname, format, manufacturer, adder_id):
    extension = os.path.splitext(filename)[1]
    filename = modelname + "-" + manufacturer + "-" + type + "-" + format + "-" + str(adder_id) + extension
    pathtofile = "Parts/%s" % (filename)
    conn = S3Connection(settings.AWS_ACCESS_KEY_ID, settings.AWS_SECRET_ACCESS_KEY)
    b = conn.create_bucket('mybucket')
    mime = mimetypes.guess_type(filename)[0]
    k = Key(b)
    k.key = "/media/Parts/%s" % (filename)
    k.set_metadata("Content-Type", mime)
    k.set_contents_from_string(filecontent)
    k.set_acl("public-read")
    return pathtofile 
```

它适用于图像和文本文件，但是当我尝试上传某些文件类型时，我得到了这个，不知道为什么：

`<Error><Code>SignatureDoesNotMatch</Code><Message>The request signature we calculated does not match the signature you provided. Check your key and signing method.</Message><StringToSignBytes>50 55 54 0a 66 33 5a 74 6f 74 50 4e 50 4a 62 59 69 6e 67 68 38 38 45 39 45 67 3d 3d 0a 4e 6f 6e 65 0a 57 65 64 2c 20 30 37 20 4e 6f 76 20 32 30 31 32 20 31 36 3a 30 38 3a 35 37 20 47 4d 54 0a 2f 73 6e 61 70 65 64 61 2f 6d 65 64 69 61 2f 43 41 44 50 61 72 74 73 2f 61 64 37 31 31 2d 41 53 44 41 2d 4d 6f 64 65 6c 2d 53 50 49 43 45 2d 31 2e 63 69 72</StringToSignBytes`

追溯：

```
File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Users/nb/Desktop/spicestore/spices/views.py" in add_model
  577\.          new_model.content=store_in_s3(filename, filecontent, type, modelname, format, manufacturer, adder_id)
File "/Users/nb/Desktop/spicestore/store_in_s3.py" in store_in_s3
  24\.     k.set_contents_from_string(filecontent)
File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/boto/s3/key.py" in set_contents_from_string
  1124\.                                         encrypt_key=encrypt_key)
File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/boto/s3/key.py" in set_contents_from_file
  994\.                            chunked_transfer=chunked_transfer, size=size)
File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/boto/s3/key.py" in send_file
  727\.                                                    query_args=query_args)
File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/boto/s3/connection.py" in make_request
  468\.                 override_num_retries=override_num_retries)
File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/boto/connection.py" in make_request
  910\.         return self._mexe(http_request, sender, override_num_retries)
File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/boto/connection.py" in _mexe
  810\.                                       request.body, request.headers)
File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/boto/s3/key.py" in sender
  684\.                     response.status, response.reason, body)

Exception Type: S3ResponseError at /spices/add
Exception Value: S3ResponseError: 403 Forbidden 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T03:44:36.687

在您的代码中：

`k.set_metadata("Content-Type", mime)`

mime 必须为 None，看起来 s3 不允许文件的 Content-Type 为 None。您可以删除它，该文件将设置为 s3 中的默认内容类型。

使用时

`mimetypes.guess_type(filename)`

filename 应以文件扩展名结尾，例如 www.test.com/1.jpg?code=XXXX
mimetype 无法猜测类型，将返回 None。

# jsf-2 - JSF2 表单提交“目标无法访问，标识符 'myModel' 仅在提交时解析为空

> ID：13273731
> 
> 赞同：0
> 
> 时间：2012-11-07T16:16:33.377
> 
> 标签：jsf-2, jboss7.x, cdi

我有一个非常奇怪的问题，一个 bean 没有解决，但只有在提交时才解决。它在视图上工作正常，但在提交时，它错误地说标识符为空

我的JSF

```
 <h:form id="edit" styleClass="form">
        <rich:panel>
            <f:facet name="header">
                <h:outputText value="Edit Data" />
            </f:facet>

            <rich:graphValidator value="#{myModel}" id="gv">
                <rich:messages for="gv" />
                <rich:messages id="goal-messages" globalOnly="true" />

                    <!-- form fields that reference #{myModel.fields} -->

                    <h:commandButton id="save" value="Save"
                        action="#{myModel.save}" />
            </rich:graphValidator>

        </rich:panel>
    </h:form> 
```

模型类

```
@Named("myModel")
@RequestScoped
public class MyModelImpl implements Model {

    @Inject
    @RequestParam("objectId")
    private Long objectId;

    // Getters & Setters for the various fields

    public void save() {
        // does nothing just now
    }
} 
```

我知道我应该将保存操作移到一个控制器中，一旦我让它工作，我就会这样做。我有另一个没有问题的工作实例（在另一个但相关的模块中）。事实上，我复制了代码以开始并根据需要进行了修改。

这个模块的主要区别在于我对它的命名与类不同。

视图加载正常，没有任何问题，但在提交时，我得到以下信息：

根本的例外是：

```
Caused by: javax.el.PropertyNotFoundException: /edit.xhtml @26,71 value="#{myModel.name}": Target Unreachable, identifier 'myModel' resolved to null
at com.sun.faces.facelets.el.TagValueExpression.setValue(TagValueExpression.java:133) [jsf-impl-2.1.7-jbossorg-2.jar:]
at org.richfaces.el.ValueExpressionAnalayserImpl$SetValueCommand.resolve(ValueExpressionAnalayserImpl.java:42) [richfaces-components-ui-4.2.2.Final.jar:4.2.2.Final]
at org.richfaces.el.ValueExpressionAnalayserImpl.resolveValue(ValueExpressionAnalayserImpl.java:64) [richfaces-components-ui-4.2.2.Final.jar:4.2.2.Final]
at org.richfaces.el.ValueExpressionAnalayserImpl.updateValueAndGetPropertyDescriptor(ValueExpressionAnalayserImpl.java:90) [richfaces-components-ui-4.2.2.Final.jar:4.2.2.Final]
at org.richfaces.validator.BeanValidatorServiceImpl.validateExpression(BeanValidatorServiceImpl.java:157) [richfaces-components-ui-4.2.2.Final.jar:4.2.2.Final]
... 41 more 
```

记住它在查看页面时有效，我对为什么它在提交时不起作用感到非常茫然。

我尝试了各种方法，包括：

*   将范围更改为@ViewScoped，
*   删除显示的大部分字段（第一栏 - 名称），
*   再次传入 requestParam（但我意识到我什至没有被放在首位，它工作正常。

我发现很多不同的人都有相同的最终错误，但情况不同。

一切都没有喜悦。有人对可能是什么问题有任何想法吗？

我正在 JBoss 7.1.1.Final 上使用 Arquillian 进行测试

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:51:14.317

事实证明 - 罪魁祸首是日食。昨天浪费了一个下午后，我今天早上尝试通过 maven 运行测试，它运行良好。

我曾尝试在 Eclipse 中清理项目，但昨天似乎没有任何效果。今天再做一次似乎解决了这个问题。

事实上，问题再次出现，我再次能够通过清理项目来解决。

：-/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T00:42:58.493

可以试试@ManagedBean？：

```
@ManagedBean(name="myModel")
@RequestScoped
public class MyModelImpl implements Model {

@Inject
@RequestParam("objectId")
private Long objectId;

// Getters & Setters for the various fields

//should save return some outcome?
public String save() {
    return "index.xhtml";
}

public String getName() {
   retrun "Your error shows that somewhere in your xhtml this property is called";
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-01T14:28:44.220

检查您的 faces-config.xml 是否位于 Web 应用程序根目录的 META-INF 目录中。

[http://docs.oracle.com/javaee/7/api/javax/faces/webapp/FacesServlet.html](http://docs.oracle.com/javaee/7/api/javax/faces/webapp/FacesServlet.html)

# python - scikit-learn OpenMP libsvm

> ID：13273738
> 
> 赞同：4
> 
> 时间：2012-11-07T16:17:09.697
> 
> 标签：python, openmp, libsvm, scikit-learn

我正在使用 scikit-learn SVC 对一些数据进行分类。我想提高训练成绩。

> clf = svm.SVC（缓存大小=4000，概率=真，详细=真）

由于 sckikit-learn 与 libsvm 和 libsvm 的接口使用 OpenMp，我希望：

> 导出 OMP_NUM_THREADS=16

将在多个内核上运行。不幸的是，这没有帮助。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T17:47:36.810

scikit-learn 中的 libsvm 当前绑定不支持 OpenMP。但是，如果您遇到性能问题，您很可能`sklearn.svm.SVC`应该使用更具可扩展性的模型。

如果您的数据是高维的，它可能是线性可分的。在这种情况下，建议首先尝试更简单的模型，例如朴素贝叶斯模型或`sklearn.linear_model.Perceptron`已知的训练速度非常快的模型。您也可以尝试使用它来实现`sklearn.linear_model.LogisticRegression`，这比 scikit-learn 中的其他线性模型更具可扩展性，尽管内存效率更低。`sklearn.svm.LinearSVC``liblinear``libsvm`

如果您的数据不是线性可分的，您可以尝试`sklearn.ensemble.ExtraTreesClassifier`（调整`n_estimators`参数以权衡训练速度与预测准确性）。

或者，您可以尝试使用`RBFSampler`scikit-learn 的转换器来近似 RBF 内核 + 在输出上拟合线性模型：

[http://scikit-learn.org/dev/modules/kernel_approximation.html](http://scikit-learn.org/dev/modules/kernel_approximation.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-19T22:43:50.287

如果您在 scikit-learn 中使用交叉验证或网格搜索，那么您可以使用带有 n_jobs 参数的多个 CPU：

```
GridSearchCV(..., n_jobs=-1)
cross_val_score(..., n_jobs=-1) 
```

请注意，cross_val_score 每个 forld 只需要一个作业，因此如果您的折叠次数少于您的 CPU，您仍然不会使用所有的处理能力。

[LibSVM 可以使用 OpenMP，如果您可以按照 LibSVM FAQ 中的说明](http://www.csie.ntu.edu.tw/~cjlin/libsvm/faq.html#f432)直接编译和使用它。因此，您可以以 LibSVM 格式导出您的缩放数据（这是一个关于如何做到这一点的[StackOverflow 问题）并直接使用 LibSVM 来训练您的数据。](https://stackoverflow.com/questions/9301191/python-program-to-export-numpy-lists-in-svmlight-format)但这只有在您进行网格搜索或想知道准确度分数时才有用，据我所知，LibSVM 创建的模型不能在 scikit-learn 中使用。

还有一个[LibSVM 的 GPU 加速版本](http://mklab.iti.gr/project/GPU-LIBSVM)，我尝试过它并且速度非常快，但不是基于当前的 LibSVM 版本。我已经和开发人员谈过了，他们说他们希望尽快发布一个新版本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-15T21:52:32.567

虽然这个帖子已经有一年多了，但我认为值得回答。

我在 scikit-learn 上为 libsvm 和 liblinear (linearSVC) 编写了 openmp 支持补丁，可在此处获取 - [https://github.com/fidlr/sklearn-openmp](https://github.com/fidlr/sklearn-openmp)。

它基于 libsvm 关于如何添加 OpenMP 支持的常见问题解答以及 liblinear 的多核实现。

只需克隆 repo 并运行 sklearn-build-openmp.sh 以应用补丁并构建它。

时间`OMP_NUM_THREADS=4 python plot_permutation_test_for_classification.py`：

*   具有线性内核时序的 svmlib 下降了 2.3 倍
*   RBF 内核 - 相同。
*   带有 4 个线程的 Liblinear 被 x1.6 删除

可以在此处找到有关和使用信息的详细信息 - [http://fidlr.org/post/137303264732/scikit-learn-017-with-libsvm-openmp-support](http://fidlr.org/post/137303264732/scikit-learn-017-with-libsvm-openmp-support)

# jquery - 使用 jQuery 中的下拉过滤在表中查找 td 值

> ID：13273740
> 
> 赞同：0
> 
> 时间：2012-11-07T16:17:19.163
> 
> 标签：jquery, html-table, filtering

[http://medfor.petersenuploads.co.uk/product.php/698/2/clear-ps-honey-jar-with-metal-screw-cap](http://medfor.petersenuploads.co.uk/product.php/698/2/clear-ps-honey-jar-with-metal-screw-cap)

当前屏幕中间有一组下拉菜单和一个选项卡（完整产品列表）。如果您单击完整产品列表中的产品之一，它会更新下拉列表。这包括一个隐藏字段（每个案例的项目）

我想要做的是根据 3 个选定的下拉菜单获取每个案例的项目（从表中）的值。例如：

选择 100ml，无菌 R，无标签 - 这与表中的第二行匹配。我想从表中获取“每箱物品”的值，以便我可以设置隐藏的下拉列表（每箱物品）并获取要添加到购物篮的正确产品。

执行此操作的代码在 script.js 中

```
// Handles changing any drop downs in the product selection area and updates the choosen item based on label names and field values.
$('.product-options select').change(function() {
    $('p.selection-item').text("");
    $('#selection-name').text($('header>h1').text());
    $('.product-options select').each(function (i) {
        $('p.selection-item').append($("label[for='"+$(this).attr("id")+"']").text() + " " + $('option:selected', this).text(), "<br />");

        var tableRow = $(".product-table td").filter(function() {
            return $(this).text() == "50";
            //Needs to match against all drop down values
        }).closest("tr");
        console.log(tableRow);
    });
    $('div.product-selection h2').removeClass('noshow');
    $('div.product-selection p').removeClass('noshow');
    recalcPrice($('#pid').val());
}); 
```

我需要过滤表以获取单行，然后获取倒数第二列的值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:13:53.630

假设 columns / td 放置是静态的，您可以执行以下操作。

```
var tableRow = $(".product-table tbody tr").filter(function() {
            var
                cap = $("#capacity :selected").text(),
                ster = $("#sterility :selected").text(),
                lbl = $("#labeltype :selected").text();
            return $(this).find("td").eq(0).text() == cap && $(this).find("td").eq(1).text() == ster && $(this).find("td").eq(2).text() == lbl
        }); 
```

如果 columns / td 放置是动态的，您可以执行以下操作。

```
var tableRow = $(".product-table tbody tr").filter(function() {
            var arr = [],
                cap = $("#capacity :selected").text(),
                ster = $("#sterility :selected").text(),
                lbl = $("#labeltype :selected").text();
            $.each($(this).find("td"), function(){
               arr.push($(this).text());//there was a parenthesis missing here.
            });
            return $.inArray(cap, arr) != -1 && $.inArray(ster, arr) != -1 && $.inArray(lbl, arr) != -1;
        }); 
```

# vim - 为什么在 Vim 中使用 CTRL-A 递增会使我从“07”变为“10”？

> ID：13273741
> 
> 赞同：16
> 
> 时间：2012-11-07T16:17:26.540
> 
> 标签：vim

我在 Mac Terminal Vim 中有一系列数字，我通过按 `CTRL`-来增加它们`A`。Strangley，当我在 时`07`，数字会跳到`010`而不是`08`。我刚刚尝试了 MacVim 并发生了相同的行为。有谁知道为什么？

注意：两个 Vim 都适用于`7`.

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-07T16:22:40.347

如果您不想以八进制表示数字递增，`:set nrformats-=octal`.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-07T16:19:53.233

因为前导零是八进制的广泛使用表示法，其中 7 之后的数字是 10。根据[维基百科](http://en.wikipedia.org/wiki/Leading_zero#0_as_a_prefix)，“前缀 0 用于 C 编程语言、Python、Perl、Unix shell bash 和其他指定八进制数的语言”。

# android - 使用 android 库编译本机 C 代码

> ID：13273743
> 
> 赞同：0
> 
> 时间：2012-11-07T16:17:36.637
> 
> 标签：android, c, gcc, android-ndk

我有一个原生 C 代码到 android（我没有使用 JNI，它是纯 C），我想在 LogCat 上打印日志消息。在不使用的情况`#include<android/log.h>`下，我能够编译`arm-linux-gnueabi-gcc -static -o Matrix MatrixMultiplication.c`并且效果很好，但是现在我需要向 LogCat 发送一些带有`#define LOGD(...) __android_log_print(ANDROID_LOG_DEBUG , "NativeC", __VA_ARGS__)`. 我试图导入库，但它没有用，这个：[http](http://betelco.blogspot.com.br/2010/01/buildingdebugging-android-native-c.html) ://betelco.blogspot.com.br/2010/01/buildingdebugging-android-native-c.html 。我正在使用 android-ndk-r8b

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:32:31.390

为了更好地兼容 Android 功能，您应该使用与 jni 项目相同的结构，而不是直接调用编译器和链接器，但使用

```
include $(BUILD_EXECUTABLE) 
```

在 Android.mk 而不是库构建选项之一。

请注意，官方不支持构建和调用可执行文件，尽管它目前有效。

# c - 使用 fscanf() 将整数复制到数组中。在 C 中

> ID：13273746
> 
> 赞同：3
> 
> 时间：2012-11-07T16:17:43.573
> 
> 标签：c, arrays, scanf

我有一个包含几行 10 个整数的文件。

我想将这些整数复制到几个数组中，命名为 line1、line2、line3 等，其中包含相应数组中每一行的数字。

我目前正在使用

```
fscanf(items, "%d, %d, %d, %d, %d, %d, %d, %d, %d, %d", &line1[0], &line1[1], &line1[2], &line1[3], &line1[4], &line1[5], &line1[6], &line1[7], &line1[8], &line1[9]); 
```

将前 10 个整数分配给名为 line1 的数组。

这是一种非常草率的方法，并且它没有解决将其余值分配给其他数组的另一个问题。

任何有关如何更整齐地将 10 个值分配给数组以及如何将每一行分配给不同数组的建议将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T16:26:03.397

使用多维数组和嵌套循环：

```
#DEFINE COLS 10
#DEFINE ROWS 10

int i, j;
int line[ROWS][COLS];

for (i = 0; i < ROWS; ++i) {
  for (j = 0; i < COLS - 1; ++j) {
    fscanf(items, "%d, ", &line[i][j]);
  }
  fscanf(items, "%d", &line[i][COLS - 1]);
} 
```

**编辑：**

上面的代码使用与问题相同的格式字符串（逗号分隔值）。如果空格分隔的值是可以的，您可以使用直接循环，而不用分隔`fscanf`每一行的最后一项：

```
#DEFINE COLS 10
#DEFINE ROWS 10

int i, j;
int line[ROWS][COLS];

for (i = 0; i < ROWS; ++i) {
  for (j = 0; i < COLS; ++j) {
    fscanf(items, "%d", &line[i][j]);
  }
} 
```

边注：

如果要编写检测输入文件中错误的代码，则需要检查`fscanf`. 可能在学校项目中不需要，但在工业强度代码中需要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T16:27:05.877

如果你知道你有多少行，比如 100，你可以：

```
int arr[r][c];

for (i=0; i<r; i++) {
    for (j=0; j<c-1; j++) {
        fscanf(file, "%d, ", &arr[i][j]);
    }
    fscanf(file, "%d\n", &arr[i][j]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T16:19:42.933

您需要使用循环。

```
#include <stdio.h>

for (size_t i = 0; i < 9; ++i)
     fscanf("%d, ", &line1[i]);
fscanf("%d", &line[9]); 
```

有一个二维阵列会更好。

```
int a[NLINES][NCOLUMNS];

for (size_t i = 0; i < NLINES; ++i) {
   for (size_t j = 0; j < NCOLUMNS - 1; ++j)
        fscanf(fp, "%d, ", &a[i][j]);
   fscanf(fp, "%d\n", &a[i][NCOLUMNS - 1]);
} 
```

# git - 使用 TeamCity 将 git 提交时间保持为修改时间

> ID：13273747
> 
> 赞同：1
> 
> 时间：2012-11-07T16:17:46.573
> 
> 标签：git, teamcity

我们正在尝试使用 TeamCity*仅*将更改的文件从 git 部署到我们的 Web 服务器。为此，我们需要将文件的修改时间戳作为中央存储库中的最后提交时间。

每当我们在 TeamCity 中进行干净构建（干净的签出目录）时，文件的修改时间就是构建运行的时间。我们需要它是最后一次提交时间，所以它是可靠的。

我们在这里使用了提交钩子： [git 的 use-commit-times 是什么？](https://stackoverflow.com/questions/1964470/whats-the-equivalent-of-use-commit-times-for-git) 我得到了在我的个人仓库中工作的钩子，但在 TeamCity 中实施时它似乎不起作用。

我们如何让 TeamCity 使用上次提交时间作为文件的修改时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:08:49.203

经过很多圈，我终于让它工作了。

1.  使用此脚本添加**结帐**后和**接收后git 挂钩：** [https ://stackoverflow.com/a/11543788/444917](https://stackoverflow.com/a/11543788/444917)
2.  将钩子`C:\Program Files (x86)\Git\share\git-core\templates\hooks\`放在构建代理上
3.  将 TeamCity 构建配置为使用**代理端 VCS 检出**（编辑构建配置 > VCS > 将 VCS 检出模式设置为自动在代理上）。请注意，这可能会导致第一次构建非常慢，因为它会拉取所有提交。
4.  我们还使用了构建之间的工件依赖关系。为了在那里保留时间戳，我们必须压缩文件并将压缩文件存储为工件。请参阅[http://youtrack.jetbrains.com/issue/TW-10941](http://youtrack.jetbrains.com/issue/TW-10941)

# python - 意外缩进 - Python def

> ID：13273748
> 
> 赞同：-3
> 
> 时间：2012-11-07T16:17:47.230
> 
> 标签：python, python-2.7

你能帮我解决这个问题吗？

```
def group_iter (iterator, n=2, strict=False):

    accumulator = []
        accumulator.append(item)
        if len(accumulator) == n: 
        yield tuple(accumulator)
        accumulator = []

    if strict and len(accumulator) !=0:
        raise ValuseError("Leftover values")

print "This is count %r " % group_iter 
```

当我运行它时，我得到：

```
accumulator.append (item)
IndentationError: unexpected indent 
```

我怎么解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:18:49.720

您的代码缩进太远，请删除多余的空格以匹配`accumulator = []`.

```
def group_iter (iterator, n=2, strict=False):
    accumulator = []
    accumulator.append(item)
    if len(accumulator) == n: 
        yield tuple(accumulator)
        accumulator = [] 
```

您可能需要查看您的 Python 教程，了解何时缩进 Python 代码以及何时不缩进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:24:42.027

错误是否也显示行号？它应该给你一个从哪里开始的提示。（顺便说一句，它在第 4-7 行）

```
accumulator.append(item) # remove indent
if len(accumulator) == n: # remove indent
    yield tuple(accumulator) # keep indent
accumulator = [] # uncertain whether to keep or remove this base on your needs. 
```

# hibernate - org.hibernate.MappingException：找不到具有逻辑名称的列：

> ID：13273750
> 
> 赞同：1
> 
> 时间：2012-11-07T16:17:52.110
> 
> 标签：hibernate, jakarta-ee, mappingexception

我有这个表格：

1.- 参与者

```
CREATE TABLE participante ( 
    id_participa    SMALLINT NOT NULL,
    nasi            INTEGER NOT NULL,
    PRIMARY KEY(id_participa,nasi),
    FOREIGN KEY(nasi) REFERENCES persona(nasi)
) 
```

2.- 角色

```
CREATE TABLE persona ( 
    nasi        INTEGER NOT NULL,
    PRIMARY KEY(nasi)
) 
```

3.- CITA

```
CREATE TABLE cita ( 
    id_participa    SMALLINT NOT NULL,
    nasi            INTEGER NOT NULL,
    idcita          INTEGER NOT NULL,
    PRIMARY KEY(id_participa,idcita,nasi),
    FOREIGN KEY(id_participa, nasi) REFERENCES participante(id_participa, nasi)
) 
```

4.- 公式

```
CREATE TABLE formulario ( 
        id_participa        SMALLINT NOT NULL,
        nasi                INTEGER NOT NULL,
        idcita              INTEGER NOT NULL,
        PRIMARY KEY(id_participa,idcita,nasi),
        FOREIGN KEY(id_participa, nasi, idcita) REFERENCES cita(id_participa, nasi, idcita)
    ) 
```

（在其他领域中，我只是向您展示与问题有关的领域）

这里是实体：

1.- 参与者

```
@Entity
@Table(name = "participante")
public class Participante implements Serializable {

    private static final long serialVersionUID = 1L;
    @Id
    @Column(name = "id_participa")
    private Integer idParticipante;
    @Id
    @OneToOne
    @JoinColumn(name = "nasi")
    private Persona persona; 
```

2.- 角色

```
@Entity
@Table(name = "persona")
public class Persona implements Serializable {

    private static final long serialVersionUID = 1L;
    @Id
    @Column(name = "nasi")
    private Integer nasi; 
```

3.- CITA

```
@Entity
@Table(name = "cita")
public class Cita implements Serializable {

    private static final long serialVersionUID = 1L;
    @Id
    @Column(name = "idcita")
    private Integer idCita;
    @Id
    @ManyToOne
    @JoinColumns({
            @JoinColumn(name = "id_participa", referencedColumnName = "id_participa"),
            @JoinColumn(name = "nasi", referencedColumnName = "nasi") })
    private Participante participante; 
```

4.- 公式

```
@Entity
@Table(name = "formulario")
public class Formulario implements Serializable {

    private static final long serialVersionUID = 1L;
    @Id
    @OneToOne
    @JoinColumns({
            @JoinColumn(name = "id_participa", referencedColumnName = "id_participa"),
            @JoinColumn(name = "nasi", referencedColumnName = "nasi"),
            @JoinColumn(name = "idcita", referencedColumnName = "idcita") })
    private Cita cita; 
```

当我尝试启动服务器时，我得到了这个异常：

```
Caused by: org.hibernate.MappingException: Unable to find column with logical name: nasi in participante
    at org.hibernate.cfg.Ejb3JoinColumn.checkReferencedColumnsType(Ejb3JoinColumn.java:575)
    at org.hibernate.cfg.BinderHelper.createSyntheticPropertyReference(BinderHelper.java:126)
    at org.hibernate.cfg.ToOneFkSecondPass.doSecondPass(ToOneFkSecondPass.java:116)
    at org.hibernate.cfg.Configuration.processEndOfQueue(Configuration.java:1514)
    at org.hibernate.cfg.Configuration.processFkSecondPassInOrder(Configuration.java:1437)
    at org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1355)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1724)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1775)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBuilder.buildSessionFactory(LocalSessionFactoryBuilder.java:242)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:372)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:357)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 73 more 
```

**编辑**：我刚刚发现，如果我从注释中删除“referencedColumn”属性，我会得到一个不同的异常：

```
Caused by: org.hibernate.AnnotationException: A Foreign key refering es.myapp.modelo.datos.dominio.participante.Participante from es.myapp.modelo.datos.dominio.cita.Cita has the wrong number of column. should be 1
    at org.hibernate.cfg.annotations.TableBinder.bindFk(TableBinder.java:432)
    at org.hibernate.cfg.ToOneFkSecondPass.doSecondPass(ToOneFkSecondPass.java:117)
    at org.hibernate.cfg.Configuration.processEndOfQueue(Configuration.java:1514)
    at org.hibernate.cfg.Configuration.processFkSecondPassInOrder(Configuration.java:1437)
    at org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1355)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1724)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1775)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBuilder.buildSessionFactory(LocalSessionFactoryBuilder.java:242)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:372)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:357)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 73 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:37:59.473

如果我创建辅助 PK 类，它可以工作......

例如：

```
@Embeddable
public class CitaPK implements Serializable{

    private static final long serialVersionUID = 1L;
    @ManyToOne
    @JoinColumns({
            @JoinColumn(name = "id_participa", referencedColumnName = "id_participa"),
            @JoinColumn(name = "nasi", referencedColumnName = "nasi") })
    private Participante participante;
    @Column(name = "idcita", columnDefinition="smallint")
    private Integer idCita; 
```

然后在 Cita 课上：

```
@Entity
@Table(name = "sicco_citas")
public class Cita implements Serializable {

    private static final long serialVersionUID = 1L;
    @Id
    private CitaPK citaPK; 
```

[http://docs.jboss.org/hibernate/stable/annotations/reference/en/html/entity.html#d0e2177](http://docs.jboss.org/hibernate/stable/annotations/reference/en/html/entity.html#d0e2177)

# java - 将 JTextArea 更改为 JScrollPane 导致它不可见

> ID：13273752
> 
> 赞同：3
> 
> 时间：2012-11-07T16:17:58.333
> 
> 标签：java, swing, jframe

我在使用 JScrollPanes 和 JTextArea 对象并让它们一起工作时遇到问题。

如果我只是将 JTextArea 添加到我的 JPanel，它可以正常工作并显示在我告诉它的位置。但是，如果我将 contentPane.add(textArea) 更改为 contentPane.add(new JScrollPane(textArea))，则 textArea 不再可见，并且也没有 textarea 的迹象。

这是我的代码：

```
public docToolGUI() {

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 611, 487);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        setContentPane(contentPane);
        contentPane.setLayout(null);

        textField = new JTextField();
        textField.setBounds(253, 323, 86, 20);
        contentPane.add(textField);
        textField.setColumns(10);

        JLabel lblEnterRootDirectory = new JLabel("Enter Root Directory");
        lblEnterRootDirectory.setBounds(253, 293, 127, 20);
        contentPane.add(lblEnterRootDirectory);

        JButton btnGo = new JButton("Go");
        btnGo.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent arg0) {
                new ToolWorker().execute();
            }
        });
        btnGo.setBounds(253, 361, 89, 23);
        contentPane.add(btnGo);

        textArea = new JTextArea();
        textArea.setWrapStyleWord(true);
        textArea.setEditable(false);
        textArea.setBounds(25, 11, 560, 276);
        contentPane.add(new JScrollPane(textArea));

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T16:59:03.590

尝试使用使用 2 个 int 值的 JTextArea 的构造函数：

```
textArea = new JTextArea(rows, columns); 
```

从 [教程](http://docs.oracle.com/javase/tutorial/uiswing/components/textarea.html)：

> JTextArea 构造函数的两个参数分别提示文本区域应显示的行数和列数。包含文本区域的滚动窗格在确定滚动窗格的大小时会注意这些提示。

编辑：上面的示例是对 LayoutManager 的提示，但我只是注意到您没有使用它。除非你有充分的理由不这样做，否则你应该这样做。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-07T16:57:21.203

这是因为您必须设置 JScrollPane 的边界，并且必须使滚动窗格而不是文本区域可见。

```
textArea = new JTextArea();
textArea.setWrapStyleWord(true);
textArea.setEditable(false);

JScrollPane scrollPane = new JScrollPane(textArea);
scrollPane.setBounds(25, 11, 560, 276);
scrollPane.setVisible(true);

contentPane.add(scrollPane); 
```

# android - Android：将音频转换为浮点数[]

> ID：13273755
> 
> 赞同：2
> 
> 时间：2012-11-07T16:18:06.993
> 
> 标签：android, audio, short

我正在 Android 中开发一个应用程序，它必须记录声音并在屏幕上显示一些代表声音频率或强度的值。

为了记录，我使用了这段代码：

```
mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
mRecorder.setOutputFile(name);
mRecorder.prepare();
mRecorder.start(); 
```

然后我最初试图将存储的文件转换为这样的字节：

```
DataInputStream dis1 =  new DataInputStream ( new FileInputStream (name));
byte[] datainBytes1 = new byte[dis1.available()];
dis1.readFully(datainBytes1);
dis1.close(); 
```

但我想将该字节值转换为 short 或 float 以使用绘图方法显示它们：

```
canvas.drawLine(xini,yini,xfinal,yfinal,paint) 
```

您能否推荐我另一种将音频文件转换为我可以绘制的短值的方法？

非常感谢您的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:00:05.157

我认为您尝试显示录制声音的方式不正确。作为起点，您需要学习音频编码格式并查看以下 android 类：http: [//developer.android.com/reference/android/media/AudioTrack.html](http://developer.android.com/reference/android/media/AudioTrack.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-12T03:09:34.823

[在这里](https://java.net/projects/gervill/sources/Mercurial/content/src/com/sun/media/sound/AudioFloatConverter.java)，您将找到一个库类，用于在考虑有符号/无符号、大/小端和样本大小的情况下在浮点数和字节之间进行转换。

[https://java.net/projects/gervill/sources/Mercurial/content/src/com/sun/media/sound/AudioFloatConverter.java](https://java.net/projects/gervill/sources/Mercurial/content/src/com/sun/media/sound/AudioFloatConverter.java)

# vba - 当对多列执行文本到列时，空格似乎会影响定界过程

> ID：13273759
> 
> 赞同：1
> 
> 时间：2012-11-07T16:18:23.340
> 
> 标签：vba, excel, excel-2010

我的第一个工作表包含许多填充的列。在底部，我有将这些列之一复制到第二张工作表并执行文本到列的代码。然后它重复该过程，将另一列复制到第二张表中的下一个可用列中。

**问题：** 似乎当代码在第二张表中特定列的第一个单元格中遇到空白时，文本到列操作无法正常工作。

如果工作表 1 中的列（“粘贴”）看起来像：

```
------------------------------------------
Column 1    column 2   column 3  column 4
a b         c  d                  e  f           
g h         i  j       k l        m n 
```

* * *

在工作表 2（“TOP LINE”）中的列文本之后，它看起来像这样：

```
---------------------------------------------------
C1  C2  C3  C4  C5  C6  C7  C8  
a    b   c   d   e   f
g    h   i   j   k   n 
```

* * *

因此，在工作表 1 的第 3 列中的单元格 1 被发现为空后，第 4 列之后的工作表 2 中的一些文本丢失（l 和 m 已消失）。我认为这可以归结为以下代码的以下行，但我不确定是否诚实。

```
 Selection.TextToColumns Destination:=Cells(1, b), DataType:=xlDelimited, 
```

任何帮助将不胜感激，我用这个把头发扯掉了！

```
Sub TextToColumns()

Dim a As Integer, b As Integer, cell As Range, column As Range

Excel.Application.DisplayAlerts = False
Excel.Sheets("TOP LINE").Select
Cells.Select
Cells.ClearContents

For a = 1 To 60

If Application.WorksheetFunction.CountA(Excel.Sheets("Paste In").Columns(a)) > 0 Then
Excel.Sheets("Paste In").Columns(a).Copy
b = Excel.Sheets("TOP LINE").Cells(1, Columns.Count).End(Excel.xlToLeft).column
Excel.Sheets("TOP LINE").Select

  If Application.WorksheetFunction.CountA(Excel.Sheets("TOP LINE").Columns(b)) > 0      Then b = b + 1
    Excel.Sheets("TOP LINE").Columns(b).EntireColumn.Select
    Excel.ActiveSheet.Paste
   Excel.Application.CutCopyMode = False
    Selection.TextToColumns Destination:=Cells(1, b), DataType:=xlDelimited, _
            TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=True, Tab:=False, _
            Semicolon:=False, Comma:=False, Space:=True, Other:=False, FieldInfo _
            :=Array(Array(1, 1), Array(2, 1), Array(3, 1), Array(4, 1), Array(5, 1),   Array(6, 1), _
            Array(7, 1), Array(8, 1)), TrailingMinusNumbers:=True
 End If
Next a

ActiveSheet.Columns.AutoFit
ActiveSheet.Rows.AutoFit

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:34:39.197

```
Sub TextToColumns()

    Dim a As Integer, b As Integer        
    Dim shtTop As Worksheet, shtPaste As Worksheet
    Dim wsf As WorksheetFunction

    Set wsf = Application.WorksheetFunction
    Set shtTop = ActiveWorkbook.Sheets("TOP LINE")
    Set shtPaste = ActiveWorkbook.Sheets("Paste In")

    Application.DisplayAlerts = False
    shtTop.Cells.ClearContents

    For a = 1 To 60

        If wsf.CountA(shtPaste.Columns(a)) > 0 Then

            b = shtTop.Cells(1, Columns.Count).End(Excel.xlToLeft).Column
            Do While wsf.CountA(shtTop.Columns(b)) > 0
                b = b + 1
            Loop

            shtPaste.Columns(a).Copy shtTop.Cells(1, b)
            Application.CutCopyMode = False

            shtTop.Columns(b).TextToColumns Destination:=shtTop.Columns(b), _
                DataType:=xlDelimited, TextQualifier:=xlDoubleQuote, _
                ConsecutiveDelimiter:=True, Tab:=False, _
                Semicolon:=False, Comma:=False, Space:=True, Other:=False, _
                FieldInfo:=Array(Array(1, 1), Array(2, 1), Array(3, 1), _
                Array(4, 1), Array(5, 1), Array(6, 1), Array(7, 1), Array(8, 1)), _
                TrailingMinusNumbers:=True
        End If
    Next a

    With shtTop
        .Activate
        .Columns.AutoFit
        .Rows.AutoFit
    End With

End Sub 
```

# c++ - 将 std::vector 转换为 CComSafeArray 的任何快速方法

> ID：13273768
> 
> 赞同：2
> 
> 时间：2012-11-07T16:18:46.380
> 
> 标签：c++, stdvector, safearray

有什么快速的方法可以将 std::vector 转换为 CComSafeArray。我目前正在编写一段代码，它基本上将 5 或 6 个向量转换为 CComSafeArray（不是在迭代中）。其中，一大块代码（释放旧空间，创建新的安全数组，复制）出现了。我真的希望我可以轻松地转换它。

由于我们可以编写一种方法来进行这种转换，我实际上正在寻找位于图书馆等角落的有用功能。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-31T05:12:47.680

这应该将向量的内容直接复制到底层 SAFEARRAY 中，假设它们是简单类型或指针。

```
vector<T> vecInput;

// Create a SAFEARRAY of size elements
CComSafeArray<T> sa(vecInput.size());

// Copy all the contents into the SAFEARRAY
memcpy(&sa.GetSafeArrayPtr()->pvData[0], &vecInput[0], sizeof(T) * vecInput.size()); 
```

如果您正在寻找一个通用的解决方案，迭代向量也可以：

```
vector<T> vecInput;

// Create a SAFEARRAY of size elements
CComSafeArray<T> sa(vecInput.size());

// Copy all the contents into the SAFEARRAY
for (size_t i = 0; i < vecInput.size(); ++i)
    sa.SetAt(i, vecInput[i]); 
```

如果您想使用 STL 算法，至少有[一种解决方案在 SAFEARRAY 之上提供符合 STL 的迭代器，](http://www.codeproject.com/Articles/1677/STL-Compliant-Class-for-SafeArrays)之后您可以调用`CComSafeArray::Attach`以将 SAFEARRAY 分配给 CComSafeArray。

# maven - hibernate3-maven-plugin 生成 java.lang.ClassNotFoundException: org.hibernate.util.ReflectHelper

> ID：13273772
> 
> 赞同：1
> 
> 时间：2012-11-07T16:18:59.257
> 
> 标签：maven, jpa-2.0, ddl, hibernate3-maven-plugin

我正在尝试从我的 orm.xml 文件生成模式 (ddl)。我正在使用 hibernate3-maven-plugin。我使用 JPA 和 hibernate 作为实现，但对其他实现或 maven 插件持开放态度。我的 pom.xml 中的代码是：

```
 <build>
    <plugins>
        <plugin>                
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>hibernate3-maven-plugin</artifactId>
            <version>3.0</version>

            <configuration>
                <hibernatetool>
                    <jpaconfiguration persistenceunit="unitname" />

                    <hbm2ddl export="false" create="true"
                 update="true" format="true" outputfilename="schemaDiff.ddl" />

                </hibernatetool>
            </configuration>
        </plugin>            
    </plugins>
</build> 
```

我运行的命令是：

> mvn hibernate3:hbm2ddl -e

我收到的错误是：

> 引起：java.lang.NoClassDefFoundError: org.hibernate.tool.ant.JPAConfigurationTask.createConfiguration(JPAConfigurationTask.java:32) 中的 org/hibernate/util/ReflectHelper org.hibernate.tool.ant.ConfigurationTask.getConfiguration(ConfigurationTask. java:54) 在 org.hibernate.tool.ant.Hbm2DDLExporterTask.createExporter(Hbm2DDLExporterTask.java:51) 在 org.hibernate.tool.ant 的 org.hibernate.tool.ant.HibernateToolTask​​.getConfiguration(HibernateToolTask​​.java:302) .ExporterTask.execute(ExporterTask.java:39) 在 org.hibernate.tool.ant.HibernateToolTask​​.execute(HibernateToolTask​​.java:186) 在 org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291) 在sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl。invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.apache.tools.ant.dispatch .DispatchUtils.execute(DispatchUtils.java:106) ... 还有 28 个
> 
> 引起：java.lang.ClassNotFoundException: org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass(SelfFirstStrategy.java:50) 的 org.codehaus.plexus.classworlds.realm.ClassRealm 的 org.hibernate.util.ReflectHelper。 loadClass(ClassRealm.java:244) 在 org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:230) ... 40 更多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:22:48.030

George Herolyants 在这里提出了一个解决方案。

[http://doingenterprise.blogspot.com/2012/05/schema-generation-with-hibernate-4-jpa.html](http://doingenterprise.blogspot.com/2012/05/schema-generation-with-hibernate-4-jpa.html)

# ruby - Ruby 1.9.3 小版本

> ID：13273773
> 
> 赞同：3
> 
> 时间：2012-11-07T16:19:00.490
> 
> 标签：ruby, ruby-1.9.3

当使用 RBConfig 来确定我的 ruby​​ 版本时，我在使用 ruby​​ 1.9.3 时得到了“错误”的小版本：

```
# ruby -v
ruby 1.9.3p286 (2012-10-12 revision 37165) [i686-linux]
# ruby -rrbconfig -e 'puts RbConfig::CONFIG.fetch(%q(MAJOR))'
1
# ruby -rrbconfig -e 'puts RbConfig::CONFIG.fetch(%q(MINOR))'
9
# ruby -rrbconfig -e 'puts RbConfig::CONFIG.fetch(%q(TEENY))'
1 
```

使用 Ruby 1.8.7 - 这很好用：

```
$ ruby -v
ruby 1.8.7 (2012-06-29 patchlevel 370) [x86_64-linux]
$ ruby -rrbconfig -e 'puts Config::CONFIG.fetch(%q(MAJOR))'
1
$ ruby -rrbconfig -e 'puts Config::CONFIG.fetch(%q(MINOR))'
8
$ ruby -rrbconfig -e 'puts Config::CONFIG.fetch(%q(TEENY))'
7 
```

我知道我可以获得补丁级别并稍微使用它，但为什么 ruby​​ 1.9.3 返回 1 作为它的小版本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T16:50:53.357

Ruby 有两个版本概念：实际发布版本和“兼容版本”。对于所有 Ruby 1.9.1 -> 1.9.3，兼容版本为`1.9.1`，因为它们都向后兼容该`1.9.1`版本。

该`RUBY_VERSION`常量包含发布版本号，但如果这些值对您很重要，您将需要拆分这些点以获得 MAJOR、MINOR 和 TEENY：

```
>> major, minor, teeny = RUBY_VERSION.split(".")
=> ["1", "9", "3"]
>> teeny
=> "3" 
```

也就是说，Ruby 版本号是专门设计为可与 ASCII 比较的，因此通常会看到这样的代码进行简单的版本检查：

```
if RUBY_VERSION >= "1.9.3"
  #...
end 
```

补丁级别通常可以忽略，因为补丁级别版本中没有 API 更改，只有错误修复和安全补丁。希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:52:47.607

看起来 Minor 只是在报告图书馆未成年人 - 好的。所以我剩下的就是 ruby​​_version 字符串 - 总比没有好。

```
# /usr/bin/ruby -rrbconfig -e 'print RbConfig::CONFIG.fetch(%q(LIBRUBY_SO))'
libruby.so.1.9.1
# /usr/bin/ruby -rrbconfig -e 'print RbConfig::CONFIG.fetch(%q(ruby_version))'
1.9.3-p286 
```

红宝石 1.8 显示了这一点：

```
$ /usr/bin/ruby -rrbconfig -e 'print RbConfig::CONFIG.fetch(%q(LIBRUBY_SO))'
libruby1.8.so.1.8.7 
```

和 ruby​​ 1.9.2-p320 这个：

```
$ ruby -rrbconfig -e 'print RbConfig::CONFIG.fetch(%q(LIBRUBY_SO))'
libruby.so.1.9.1 
```

所以我猜谜团解开了。

# c++ - 如何结合 if() 使一个函数只被调用一次以避免分支丢失？

> ID：13273775
> 
> 赞同：0
> 
> 时间：2012-11-07T16:19:04.900
> 
> 标签：c++, loops, if-statement

这是一个 c++ 编码问题。

```
 if (condition)
            initialize arg2;

 for loop
 {
      if (condition)
            f(arg1, arg2[loop_index]);
      else  
            f(arg1, 0); 

 } 
```

如何结合只`if()`调用`f()`一次？

arg2 可能会消耗大量内存，如果条件为假，我们不需要对其进行初始化。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:21:37.427

```
 if (condition)
       initialize arg2;

 for loop
 {
     f(arg1, condition?arg2[loop_index]:0);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:24:09.800

您可以轻松地将分支从循环中取出，并在外部分支中有两个循环：

```
if (condition) {
  initialize arg2;

  for loop {
    f(arg1, arg2[loop_index]);
  }
} else {
  for loop {
    f(arg1, 0);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T13:39:14.937

最简单的是，如果执行 1 次，则将变量表示从 0 到 1 的标志。将标志设为全局变量。

```
int flag=0;
main(){//code}

  if (condition&&flag==0)
        f(arg1, arg2[loop_index]);
  else  
        f(arg1, 0); 
```

在 f() 内

```
f(){
flag=1;
//rest code
} 
```

# c# - XNA-相对于世界移动旋转的相机（视图）

> ID：13273781
> 
> 赞同：4
> 
> 时间：2012-11-07T16:19:29.077
> 
> 标签：c#, xna

所以我一直在努力让这个工作，但到目前为止没有运气，希望你能提供帮助。问题是我的项目中有一个摄像头，用户可以使用鼠标和按钮自由移动。目前是这样的： `move = new Vector3(0, 0, -1) * moveSpeed; move = new Vector3(0, 0, 1) * moveSpeed; ...` 然后我只是将移动向量添加到 cameraPos 向量： `cameraPos += move`

那么问题是如果我旋转相机然后尝试移动，例如向下移动，它不会直接向下移动，而是以某个角度移动。我假设这是由于在本地轴上移动。但我想做的是在世界轴上移动。这样的事情可能吗，还是我必须以某种方式计算角度然后在多个轴上移动？

最好的祝福！

编辑：我正在旋转相机，相机 `cameraPos` 的当前位置是相机 `rotation` 的当前旋转。这是旋转相机的代码：

```
void Update()
{
    ...
    if(pressed)
    {
        int newY = currentY - oldY;
        pitch -= rotSpeed * newY;
    }
    Rotate();
}

void Rotate()
{
    rotation = Matrix.CreateRotationX(pitch);
    Vector3 transformedReference = Vector3.Transform(cameraPos, rotation);
    Vector3 lookAt = cameraPos + transformedReference;
    view = Matrix.CreateLookAt(cameraPos, lookAt, Vector3.Up);

    oldY = currentY;
} 
```

我希望这更具可读性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T08:47:15.473

我能够通过使用来解决这个问题：

```
Vector3 v;
if (state.IsKeyDown(Keys.Up))
   v = new Vector3(0, 0, 1) * moveSpeed;
... //Other code for moving down,left,right

if (state.IsKeyDown(Keys.V))
    view *= Matrix.CreateRotationX(MathHelper.ToRadians(-5f) * rotSpeed); //Multiplying view Matrix to create rotation

view *= Matrix.CreateTranslation(v); //Multiplying view Matrix to create movement by Vector3 v 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:13:10.187

我想您已经将您正在查看的方向保存在`Vector3`. 用这个替换你的方法：

```
direction.Normalize();
var move = direction * moveSpeed;
cameraPos += move; 
```

# qt - 仅当鼠标在特定区域时移动 QGraphicsItem

> ID：13273785
> 
> 赞同：2
> 
> 时间：2012-11-07T16:19:38.427
> 
> 标签：qt, python-2.7, pyside, qgraphicsitem

我正在尝试使用 PySide 在 python 中创建类似于 terragens 节点网络视图的东西。
我使用此代码对 QGraphicsRectItem 进行了子类化。

```
class Node(QGraphicsRectItem):
    def __init__(self,pos):
        QGraphicsRectItem.__init__(self,pos.x()-100,pos.y()-30,200,60)
        self.setFlag(QGraphicsItem.ItemIsMovable,True)
    (...) 
```

这给出了这个（带有一些精美的绘画）：

![在此处输入图像描述](../Images/6550a33acbf4d88e633f405e42be39fe.png)

我想通过将鼠标从一个小矩形拖到另一个小矩形来实现连接节点，但这会导致整个节点移动。

因此，当鼠标在一个小矩形内按下时，我不希望 QGraphicsRectItem 被移动。我怎么能做到这一点。

（如果需要，我可以定义类似的东西`isInDraggingArea(x,y)`）

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:37:49.447

我找到了解决方案，抱歉浪费您的时间。

在场景中添加以下代码：

```
def mousePressEvent(self, event):
    item = self.itemAt(event.scenePos())
    if item and item.inDraggingArea(event.scenePos()):
            QGraphicsScene.mousePressEvent(self,event) 
```

# java - 如何在日期时间列中插入日期（sqlserver）

> ID：13273787
> 
> 赞同：0
> 
> 时间：2012-11-07T16:19:40.950
> 
> 标签：java

如何在没有时间的情况下插入特定日期（java.sql.Date），仅将日期值插入日期时间字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:45:14.370

当您在数据库中插入记录时，请使用 java.sql.Date 并使用 setDate 方法。它不会插入日期的时间部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:26:29.027

你应该在[这里](http://docs.oracle.com/javase/6/docs/api/java/sql/Date.html)找到你的答案。有很多方法。您可以将其转换为字符串，然后`substring(x,y)`也可以使用函数。

# android - 如何为我的所有数据库调用设置一个 AsyncTask

> ID：13273789
> 
> 赞同：1
> 
> 时间：2012-11-07T16:19:42.930
> 
> 标签：android, android-asynctask

我在这里寻找设计我的应用程序的正确方法。

我有 5 个活动，每个活动都调用一个单独的数据库方法（更新、插入、删除 ..等）。我想知道，不是创建 5 个异步任务类，而是每个类都是属于要调用的活动的私有类，有没有办法可以创建一个异步任务类，以便在所有活动中实例化它的对象？

在 C++ 中，您可以传递要执行的“整个方法”，这样我就可以创建一个分配任务并将一个方法传递给它以执行，但我不确定我是否可以在 Java 中做到这一点。或者你认为最好的做法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:30:53.907

检查`Runnable`班级。

A`Runnable`代表可以执行的任务。你需要实现它`run()`你可以将一个实例传递`Runnable`给你`AsyncTask`并在它的`doInBackground(...)`方法中执行它。

可能有更好的方法来做到这一点，但这是我现在唯一想到的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:31:25.200

我不确定这是否符合您的要求，但我建议创建一个[IntentService](http://developer.android.com/reference/android/app/IntentService.html)，它将自动和异步地将您的 Database/Content-Provider 读取和写入排队。

您可以编写单独的读取、写入和更新方法，这些方法将在 IntentService 的 onHandleIntent 方法中处理。Intent 服务确保

*   数据库/CP 访问是异步完成的
*   连续的数据库/CP 访问请求被自动排队和处理
*   服务自动停止/启动，无需管理生命周期
*   即使应用程序进入后台，数据库/CP 读/写也已完成

对于 ListView/Adapter 访问，考虑使用[加载器](http://developer.android.com/guide/components/loaders.html)

# android - Android - 片段不保存InstanceState

> ID：13273790
> 
> 赞同：0
> 
> 时间：2012-11-07T16:19:44.897
> 
> 标签：android, android-fragments

我是 android 新手，我有一个片段，它经历了 onPause、destroyView、destroy，但从未调用过 onSaveInstanceState。

这是预期的吗？

我怎样才能保存状态？

```
@Override
public void onSaveInstanceState(Bundle outState) {
    outState.putParcelable(KEY_CATEGORY, category);
    super.onSaveInstanceState(outState);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:34:48.737

`onSaveInstanceState`系统会在即将从内存中删除您的片段/出于任何原因重新创建它时调用。否则不会调用它。

如果这是您的情况并且`onSaveInstanceState`仍然没有被调用，那么您的片段的代码片段可能会有所帮助。

由于省略了调用超类的此方法的行，这种情况发生了很多次。比如[这里](https://stackoverflow.com/questions/8503629/fragments-onsaveinstancestate-never-called)。确保你调用它。

# sql - 多对多表中的主键

> ID：13273795
> 
> 赞同：2
> 
> 时间：2012-11-07T16:20:03.460
> 
> 标签：sql, postgresql

假设我有两个表，用户和语言

```
user (Table Name)
-----------------
user_id (PK)
user_name
mobile
...
....

language (Table Name)
---------------------
lang_code (PK)
lang_name
...
.... 
```

问题是，如果我想在用户和语言表（多对多）之间添加关系，这是正确的方法吗？

```
solution 1

user_language (Table Name)
--------------------------
user_id (FK)
lang_code (FK)

or solution 2

user_language (Table Name)
--------------------------
user_id (PK)
lang_code (PK)

or solution 3

user_language (Table Name)
--------------------------
user_lang_id (PK)
user_id (FK)
lang_code (FK) 
```

我看到很多人在多对多表上添加主键，但我认为这并不重要并且浪费空间。那么哪个是正确的？

顺便说一句，我正在使用 PostgreSQL

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T16:22:39.487

就个人而言，我会选择解决方案 4：

```
用户语言
---------------
user_id (FK)
语言代码 (FK)

使用复合 PRIMARY KEY (user_id, lang_code)

```

我不认为添加代理键（`user_lang_id`在解决方案 3 中）真的会为模式添加任何值，而只是添加另一个需要担心的列。主键是保持唯一性的好主意 - 没有它，您可以多次添加相同的 user_id/lang_code 组合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T16:28:14.053

复合主键`(user_id,lang_code)`是一种通用的方法。如果您想在另一个表中引用`user_language`，或者如果您在此表中存储一些其他属性，则可能需要代理 PK。但即使在这种情况下，您通常也会对`(user_id,lang_code)`

# axis2 - 如何检测Axis2中使用了哪个transportReceiver？

> ID：13273802
> 
> 赞同：3
> 
> 时间：2012-11-07T16:20:21.463
> 
> 标签：axis2, tomcat7

我正在使用 tomcat7 和axis2 来部署java web 服务。

在 server.xml 中，我配置了三个连接器（http、https 至极服务器和客户端证书，https 仅带有服务器端证书）：

```
<Connector port="8181" protocol="HTTP/1.1" />
<Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true" scheme="https" clientAuth="true"  keystoreFile=... truststoreFile=... />
<Connector port="8444" protocol="HTTP/1.1" SSLEnabled="true" scheme="https" clientAuth="false" keystoreFile=...  /> 
```

在axis2.xml中我配置了三个transportReceivers：

```
<transportReceiver name="http" class="org.apache.axis2.transport.http.AxisServletListener">
    <parameter name="port">8181</parameter>
    <parameter name="c1">none</parameter>
</transportReceiver>

<transportReceiver name="https" class="org.apache.axis2.transport.http.AxisServletListener">
    <parameter name="port">8443</parameter>
    <parameter name="c2">serverAndClient</parameter>
</transportReceiver>

<transportReceiver name="https" class="org.apache.axis2.transport.http.AxisServletListener">
    <parameter name="port">8444</parameter>
    <parameter name="c3">serverOnly</parameter>
</transportReceiver> 
```

这很好用！我所有的 Web 服务都可以按预期在所有端口上访问。

不幸的是，我只想在 8443 上允许“无密码登录”（因为客户端将拥有证书），并在 8444 上允许“使用密码登录”。

在Java中我试过：

```
MessageContext msg = MessageContext.getCurrentMessageContext();
TransportInDescription tin = msg.getTransportIn();
String str = tin.getParameters().toString(); 
```

但我总是得到：

```
[Parameter : port=8444, Parameter : c3=serverOnly] 
```

似乎一个传输接收器总是处理我的消息。有没有办法检测哪个传输接收器（或端口）真正用于当前调用？

BR，雅克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:18:59.363

最后我找到了解决方案。

我错了，只有一个传输接收器处理所有消息。有两种（一种用于 http，一种用于 https）。不幸的是，您无法定义第二个 https 传输，因为axis2 将所有传输描述符保存在哈希映射中，并且名称是一个键，因此“https”始终只有一个条目，您将获得 8181 或 8444。

为了解决这个问题，您可以创建自己的 servlet 并在消息到达时将端口号存储在 MessageContext 中。这很容易：

```
public class MyServlet extends AxisServlet
{   
    protected MessageContext createMessageContext( HttpServletRequest request, HttpServletResponse response, boolean invocationType ) throws IOException
    {
        MessageContext mc = super.createMessageContext( request, response, invocationType );
        URL url = new URL( request.getRequestURL().toString() );
        mc.setProperty( "myPort", url.getPort() );
        return mc;      
    }
} 
```

当然你必须把你的类名放在axis2/.../web.xml 并重启tomcat。然后您可以检查任何axis2调用中的端口号：

```
MessageContext mc = MessageContext.getCurrentMessageContext();
int port = ( Integer ) mc.getProperty( "myPort" ); 
```

现在我真的得到了 8181、8443 或 8444 :)。

BR，雅克

# java - maven 从错误的存储库下载

> ID：13273803
> 
> 赞同：2
> 
> 时间：2012-11-07T16:20:26.423
> 
> 标签：java, maven, build, bamboo

在 Bamboo 服务器上运行的项目构建之一中，看起来 mvn 去下载某些父 pom（当前构建项目的） - 但它查看的存储库是错误的 - 构建失败，因为资源不存在。我不知道如何告诉 Bamboo 服务器上的 mvn 查看任何下载的特定 url - 相反 - 我应该在哪里调查以找出 mvn 正在查看这个错误的 url 的原因？如果我运行本地 mvn clean install 它工作正常，因为我知道 url 在我的 settings.xml 中指定。

此外，此 url 设置是否特定于 Bamboo 上的项目（即每个项目都可以指定自己的 url 供 maven 在下载时查看）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T21:19:43.837

旧版本的 Maven 有时会报告非常具有误导性的路径名。

您需要检查：

1.  `<repository>`你的 poms里有什么元素吗？
2.  全局配置文件中是否声明了任何存储库或镜像？
3.  竹子是否配置为使用与您通常使用的不同的存储库或镜像集？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:31:28.733

我们可以自己在 pom.xml 中指定存储库，有关更多信息，请参阅以下链接

[http://www.mkyong.com/maven/how-to-add-remote-repository-in-maven-pom-xml/](http://www.mkyong.com/maven/how-to-add-remote-repository-in-maven-pom-xml/)

在本地工作可能是因为本地存储库中提供了所有必要的 jar。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T20:16:39.947

检查您是否有 ${user.home}/.m2/settings.xml。如果这样做，那么您的 Bamboo 服务器可能没有配置包含您的存储库的 settings.xml，请参阅[http://maven.apache.org/settings.html](http://maven.apache.org/settings.html)。

在构建日志中查找类似以下的行可以帮助解决正在使用的存储库：下载：“http://yourmvnhost:8080/nexus/content/groups/public/org/apache/maven/plugins/maven-compiler-插件/maven-metadata.xml"

# python - django：连接 2 个查询或特殊订单？

> ID：13273805
> 
> 赞同：3
> 
> 时间：2012-11-07T16:20:32.493
> 
> 标签：python, django, concatenation

我必须进行这样的查询：

```
similar_brokers_ = Profile.objects.filter(Q(tp=broker.tp) |  Q(md=broker.md)).exclude(Q(id=broker.id))[:4] 
```

我需要 4 个类似的经纪人，他们有相同的`tp`领域或`md`领域

所以这个查询就可以了，但是我需要`tp`首先使用具有相同字段的经纪人，然后他们应该使用具有相同`md`字段的经纪人。

我怎样才能做得更好？

例如 ：

```
broker1  with tp=1, md=100
broker2  with tp=2, md=100
broker3  with tp=1, md=99 
```

让经纪人类似于`broker1`：首先应该去`broker3`（`tp`=1）和之后`broker2`（`md`=100）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:02:16.053

你试过`order_by('tp', 'md')`吗？请参阅[order_by的文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/#order-by)

# html - 使用带有单选按钮的 HTML“标签”标签

> ID：13273806
> 
> 赞同：49
> 
> 时间：2012-11-07T16:20:34.153
> 
> 标签：html, accessibility, forms

标签是否`label`适用于单选按钮？如果是这样，你如何使用它？我有一个显示如下的表单：

```
First Name: (text field)
Hair Color: (color drop-down)
Description: (text area)
Salutation: (radio buttons for Mr., Mrs., Miss) 
```

我想使用`label`左列中每个标签的标记来定义其与右列中相应控件的连接。但是如果我使用单选按钮，规范似乎表明表单控件的实际“Salutation”标签突然不再属于`label`标签，而是选项“先生，夫人等”。进入`label`标签。

我一直是可访问性和语义网络的粉丝，但这种设计对我来说没有意义。`label`标签明确声明标签。`option`标签选择选项。您如何`label`在一组单选按钮的实际标签上声明 a ？

**更新：** 这是一个带有代码的示例：

```
<tr><th><label for"sc">Status:</label></th>
    <td>&#160;</td>
    <td><select name="statusCode" id="sc">
            <option value="ON_TIME">On Time</option>
            <option value="LATE">Late</option>
        </select></td></tr> 
```

这很好用。但与其他表单控件不同的是，单选按钮的每个值都有一个单独的字段：

```
<tr><th align="right"><label for="???">Activity:</label></th>
    <td>&#160;</td>
    <td align="left"><input type="radio" name="es" value="" id="es0" /> Active &#160;
        <input type="radio" name="es" value="ON_TIME" checked="checked" id="es1" /> Completed on Time &#160;
        <input type="radio" name="es" value="LATE" id="es2" /> Completed Late &#160;
        <input type="radio" name="es" value="CANCELED" id="es3" /> Canceled</td>
</tr> 
```

该怎么办？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-11-07T16:22:42.467

> 标签标签是否适用于单选按钮？

是的

> 如果是这样，你如何使用它？

与任何其他表单控件相同的方式。

您可以给它一个与控件`for`匹配的属性`id`，或者将控件放在标签元素中。

> 我想为左列中的每个标签使用标签标签

标签用于**控件**，而不是一组控件。

如果要为一组控件添加标题，请使用 a`<fieldset>`和 a `<legend>`（并为`<label>`集合中的每个控件提供 a）。

```
<fieldset>
  <legend> Salutation </legend>
  <label> <input type="radio" name="salutation" value="Mr."> Mr. </label>
  <label> <input type="radio" name="salutation" value="Mrs."> Mrs. </label>
  <!-- etc -->
</fieldset> 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-11-07T16:25:55.050

是啊。这是它的工作原理。

`<label>`标记*各个字段*，因此每个字段`<input type="radio">`都有自己的`<label>`。

要标记一*组*字段（例如，共享相同的几个单选按钮`name`），您可以使用`<fieldset>`带有`<legend>`元素的标签。

```
<fieldset>
    <legend>Salutation</legend>

    <label for="salutation_mr">Mr <input id="salutation_mr" name="salutation" type="radio" value="mr"><label>

    <label for="salutation_mrs">Mrs <input id="salutation_mrs" name="salutation" type="radio" value="mrs"><label>

    <label for="salutation_miss">Miss <input id="salutation_miss" name="salutation" type="radio" value="miss"><label>

    <label for="salutation_ms">Ms <input id="salutation_miss" name="salutation" type="radio" value="ms"><label>
</fieldset> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-08-14T14:44:00.347

您可以使用`aria-role="radiogroup"`来关联控件，而无需使用`<fieldset>`. 这是[WCAG 2.0 建议的技术之一](https://www.w3.org/TR/WCAG20-TECHS/ARIA17.html)。

```
<div role="radiogroup" aria-labelledby="profession_label" aria-describedby="profession_help">
  <p id="profession_label">What is your profession?</p>
  <p id="profession_help">If dual-classed, selected your highest leveled class</p>
  <label><input name="profession" type="radio" value="fighter"> Fighter</label>
  <label><input name="profession" type="radio" value="mage"> Mage</label>
  <label><input name="profession" type="radio" value="cleric"> Cleric</label>
  <label><input name="profession" type="radio" value="theif"> Thief</label>
</div> 
```

但是，我注意到使用这种技术 WebAim Wave 工具会发出有关缺失的警告`<fieldset>`，所以我不确定 AT 对此的支持是什么样的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-07T16:24:04.310

您不能为一组按钮声明一个标签，而是为每个按钮声明一个标签。在这种情况下，标签是“先生”、“夫人”。和“小姐”，而不是“问候”。

**更新**
也许你应该为你的这个“标签”使用另一个标签 - 因为它不是真正的标签。

```
<tr>
    <th align="right" scope="row"><span class="label">Activity:</span></th>
    <td>&#160;</td>
    <td align="left"><label><input type="radio" name="es" value="" id="es0" /> Active &#160;</label>
    [... and so on]
</tr> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-08-20T23:03:18.670

我对主题的 2 美分，或者更确切地说是一个侧节点*（它不使用隐式关联能够放置在任何地方，而是链接）*： **分组**由`name`属性完成，并由属性**链接**`id`：

```
<ol>
    <li>
        <input type="radio" name="faqList" id="faqListItem1" checked />
        <div>
            <label for="faqListItem1">i 1</label>
        </div>
    </li>
    <li>
        <input type="radio" name="faqList" id="faqListItem2" />
        <div>
            <label for="faqListItem2">i 2</label>
        </div>
    </li>
    <li>
        <input type="radio" name="faqList" id="faqListItem3" />
        <div>
            <label for="faqListItem3">i 3</label>
        </div>
    </li>
</ol>
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-07T16:25:40.760

回答您的问题：不，您不能将 Salutation 连接到单选按钮之一。如果您单击“称呼”，则将选择其中一个选项是没有意义的。相反，您可以给 Mr、Mrs 和 Miss 他们自己的标签，因此如果有人单击其中一个词，则会选择相应的单选按钮。

```
<input id="salutation_mr" type="radio" value="mr" name="salutation">
<label for="salutation_mr">Mr.</label>
<input id="salutation_mrs" type="radio" value="mrs" name="salutation">
<label for="salutation_mrs">Mrs.</label>
<input id="salutation_miss" type="radio" value="miss" name="salutation">
<label for="salutation_miss">Miss</label> 
```

~~我确实认为您仍然可以将 Salutation 包装在`<label>`元素中，只是不能使用该`for`属性。~~我的立场是正确的，请参阅下面的评论。尽管在技术上是可行的，但这并不是它的`<label>`本意。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-07T16:23:02.983

标签的“for”属性对应于单选按钮 ID。所以...

```
<label for="thisRad">Radio Button 1</label>
<input type="radio" id="thisRad" /> 
```

希望能帮助到你。

你会希望你的看起来像这样......

```
Salutation<br />
<label for="radMr">Mr.</label><input type="radio" id="radMr" />
<label for="radMrs">Mrs.</label><input type="radio" id="radMrs" />
<label for="radMiss">Miss.</label><input type="radio" id="radMiss" /> 
```

# android - Eclipse 无法识别安卓设备

> ID：13273808
> 
> 赞同：2
> 
> 时间：2012-11-07T16:20:40.713
> 
> 标签：android, eclipse, driver, adb

我是安卓新手。我的 eclipse indigo 可以识别我的 2 个 Android 设备 Motorola Atrix 之一，但不能识别 Motorola Droid。我不确定是什么问题。我的两台设备都在运行 android 2.3.6 我的设备管理器显示 Android Phone -> Android ADB Composite Interface。我还启用了 USB 调试，但它仍然无法识别我的第二台设备。我已尝试进入设备管理器并卸载 droid 驱动程序并再次安装，但仍然无法正常工作。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:38:18.000

在 windows 下您可能需要 OEM 设备驱动程序，请看这里：

[http://developer.android.com/tools/extras/oem-usb.html#Drivers](http://developer.android.com/tools/extras/oem-usb.html#Drivers)

对于摩托罗拉，您可以在这里找到驱动程序：

[https://motorola-global-portal.custhelp.com/app/answers/detail/a_id/88481](https://motorola-global-portal.custhelp.com/app/answers/detail/a_id/88481)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:43:56.010

试试这个：

> 转到您的设备管理器->右键单击android手机下的android adb复合界面->转到详细信息选项卡->从向下滚动中选择硬件ID属性。
> 
> 你会看到一些东西在 USB\VID_05E0&PID .....

这个 05E0 是一个十六进制数字，创建 adb_usb.ini 文件并将这个数字作为 0x05E0 放入其中。现在将此文件保存在您的 .android 目录中。您将在 eclipse 中看到您的设备，也可以使用 adb devices 命令从命令行中看到您的设备。

# nuget - AutofacContrib.DynamicProxy2 NuGet 包

> ID：13273813
> 
> 赞同：1
> 
> 时间：2012-11-07T16:21:04.607
> 
> 标签：nuget, autofac, nuget-package

我在`AutofactContrib.DynamicProxy2`安装时遇到问题。
尝试获取`AutofactContrib.DynamicProxy2`NuGet 包时，出现以下错误：

> PM> install-package AutofacContrib.DynamicProxy2
> 正在尝试解决依赖项“Autofac (≥ 2.4.5.724)”。
> 正在尝试解决依赖项“Castle.Core (≥ 2.5.2)”。
> 正在尝试解决依赖项“Castle.DynamicProxy (≥ 2.2.0)”。
> 正在尝试解决依赖项“Castle.Core (= 1.2.0)”。
> 安装包：将“Castle.Core 2.5.2”更新为“Castle.Core 1.2.0”失败。找不到与“Castle.Core 1.2.0”兼容的“AutofacContrib.DynamicProxy2”版本。在 line:1 char:16
> + install-package <<<< AutofacContrib.DynamicProxy2
> + CategoryInfo : NotSpecified: (:) [Install-Package], InvalidOperationException
> + FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand

据我了解，在 Castle V.3 中不再有 a`DynamicProxy.dll`但它包含在`Castle.Core.dll`.
我想我必须安装以前的版本`Castle.Core.dll`，但由于某种原因，该软件包依赖于`'Castle.Core (≥ 2.5.2)'`，所以即使我手动安装`Castle.Core`V. 1.2，我仍然会收到此错误。
有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T16:26:48.660

尝试使用`-ignoredependencies`，它适用于`targetFramework="net40"`。

```
PM> install-package autofaccontrib.dynamicproxy2 -ignoredependencies 
```

您可以单独安装依赖项

```
Autofac(≥ 2.4.5.724)
Castle.Core(≥ 2.5.2)
Castle.DynamicProxy(≥ 2.2.0) 
```

**结果**：

```
PM> install-package autofaccontrib.dynamicproxy2 -ignoredependencies
Successfully installed 'AutofacContrib.DynamicProxy2 2.4.5.724'.
Successfully added 'AutofacContrib.DynamicProxy2 2.4.5.724' to StackOverflow2.

PM> 
```

# iphone - 如何在目标 c 中创建谷歌图表的图像

> ID：13273814
> 
> 赞同：0
> 
> 时间：2012-11-07T16:21:04.370
> 
> 标签：iphone, objective-c, google-visualization

我正在寻找一些现成的代码，这样我就可以将我的数据、标签等插入到一个函数中并接收一个像这样的现成的谷歌图表。

![在此处输入图像描述](../Images/ecf436ee24ceb09a350e478a1ae80ba6.png)

但我没有找到。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:21:04.370

同时，我编写了一个函数来接收所有必要的参数，创建一个谷歌图表并转换它`UIImage`。这里是：

> -（UIImage *）产生GoogleChartImage：（NSString*）标题
> 
> ```
>  xAxis:(NSArray*)axisXLabels
>                           yAxis:(NSArray*)axisYLabels
>                         andData:(NSArray*)dataValues
>                           color:(NSString*)lineColor
>                      chartWidth:(NSNumber*)width
>                      chartHight:(NSNumber*)hight
>                     lagendLabel:(NSString*)legend
>                        minScale:(NSNumber*)minScale
>                        maxScale:(NSNumber*)maxScale{
> 
> NSMutableString *myurl = [NSMutableString stringWithString:@"http://chart.googleapis.com/chart?chxl=0:|"];
> 
> //axisXLabels
> int countAxisXLabels = [axisXLabels count];
> 
> for(NSUInteger i = 0; i < countAxisXLabels; ++i)
> {
>     NSNumber *value = [axisXLabels objectAtIndex:i];
>     [myurl appendFormat:@"%@", value];
>     if(i < countAxisXLabels - 1)
>         [myurl appendString:@"|"];
> }
> 
> [myurl appendString:@"|1:|"];
> 
> //axisYLabels
>  int countAxisYLabels = [axisYLabels count];
> for(NSUInteger i = 0; i < countAxisYLabels; ++i)
> {
>     NSNumber *value = [axisYLabels objectAtIndex:i];
>     [myurl appendFormat:@"%@", value];
>     if(i < countAxisYLabels - 1)
>         [myurl appendString:@"|"];
> }
> 
> [myurl appendString:@"&chxr=0,0,105|1,3.333,100&chxt=x,y&chs="];
> 
> //size
> [myurl appendFormat:@"%@x%@&cht=lc&chd=t:", width,hight];
> 
> //dataValues
> int countDataValues = [dataValues count];
> 
> for(NSUInteger i = 0; i < countDataValues; ++i)
> {
>     NSNumber *value = [dataValues objectAtIndex:i];
>     [myurl appendFormat:@"%@", value];
>     if(i < countDataValues - 1)
>     [myurl appendString:@","];
> }
> 
> //legend
> [myurl appendFormat:@"&chdl=%@&chg=25,50&chls=2&",legend];
> 
> //color
> [myurl appendFormat:@"chm=o,%@,0,-2,8&chco=%@",lineColor,lineColor];
> 
> //title
> [myurl appendFormat:@"&chtt=+%@",title];
> 
> //scale
> [myurl appendFormat:@"&chds=%@,%@",minScale,maxScale];
> 
> NSString *theurl=[myurl stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
> 
> NSMutableURLRequest *theRequest=[NSMutableURLRequest requestWithURL:[NSURL URLWithString:theurl] 
> ```
> 
> cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
> 
> ```
> NSURLResponse* response;
> NSError* error;
> NSData *imageData=[NSURLConnection sendSynchronousRequest:theRequest returningResponse:&response 
> ```
> 
> 错误：&错误]; NSLog(@"%@",error); NSLog(@"%@",响应); NSLog(@"%@",imageData);
> 
> ```
> UIImage *myimage = [[UIImage alloc] initWithData:imageData];
> 
> return myimage;
> 
> // Chart Wizard: https://developers.google.com/chart/image/docs/chart_wizard
>  } 
> ```

这是测试功能：

> -（无效）测试{
> 
> ```
> NSString* title = @"Height History";
> NSArray *axisXLabels = [NSArray arrayWithObjects:
>                        @"Jan",
>                        @"Feb",
>                        @"Mar",
>                        @"Jun",
>                        @"Jul",
>                        @"Aug",
>                        nil];
> 
> NSArray *axisYLabels = [NSArray arrayWithObjects:
>                         [NSNumber numberWithInt:0],
>                         [NSNumber numberWithInt:50],
>                         [NSNumber numberWithInt:150],
>                         [NSNumber numberWithInt:200],
>                         nil];
> 
> NSArray *dataValues = [NSArray arrayWithObjects:
>                        [NSNumber numberWithInt:130],
>                        [NSNumber numberWithInt:140],
>                        [NSNumber numberWithInt:140],
>                        [NSNumber numberWithInt:150],
>                        [NSNumber numberWithInt:170],
>                        [NSNumber numberWithInt:180],
>                        nil];
> 
> NSString *lineColor = @"FF9900";
> 
> NSNumber *width = [NSNumber numberWithInt:300];
> 
> NSNumber *hight = [NSNumber numberWithInt:200];
> 
> NSNumber *minScale = [NSNumber numberWithInt:0];
> 
> NSNumber *maxScale = [NSNumber numberWithInt:200];
> 
> NSString *legendLabel = @"cm";
> 
> UIImage *myimage =[self produceGoogleChartImage:title xAxis:axisXLabels yAxis:axisYLabels andData:dataValues color:lineColor 
> ```
> 
> chartWidth:width chartHight:hight lagendLabel:legendLabel minScale:minScale maxScale:maxScale];
> 
> ```
> _chartImage.image=myimage; 
> ```
> 
> }

你应该得到图像，就像问题中的那个一样。

# antlr - ANTLR 如何区分终端和正则表达式

> ID：13273817
> 
> 赞同：1
> 
> 时间：2012-11-07T16:21:17.733
> 
> 标签：antlr

考虑以下简化语法：

```
ID  :   ('a'..'z') ('a'..'z')*;

TYPE    :   'int' '[' ']' |
        'boolean' |
        'int'; 
```

现在，如果我将*boolean*作为输入，它可以被解析为*ID*或*TYPE*。我希望它被解析为*TYPE* - 如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:34:59.157

放在`TYPE` *前面* `ID`：

```
TYPE : 'int' '[' ']' 
     | 'boolean' 
     | 'int'
     ;

ID   : ('a'..'z') ('a'..'z')*
     ; 
```

ANTLR 的词法分析器规则是这样工作的：

1.  尽可能匹配
2.  如果在规则 #1 之后，两个或多个规则匹配相同数量的字符，则选择语法中首先定义的规则

由于这些规则，`"boolean"`被标记为`TYPE`，而`"booleans"`将被标记为`ID` ¹

* * *

¹ *没有*`"booleans"`被标记为两个标记：( ) 和( ))*`TYPE``"boolean"``ID``"s"`*

# ios - 我应该在哪个 ViewController 上实现 FacebookSDK 的 removeObserver？

> ID：13273818
> 
> 赞同：0
> 
> 时间：2012-11-07T16:21:27.390
> 
> 标签：ios, xcode, facebook

我正在将 Facebook 的 iOS SDK 实施到我的应用程序中。然而，有两个函数应该注册和注销通知：

从[Facebook 的登录到 ios 的 facebook](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)：

> 在**viewDidLoad**方法中，通过将以下代码添加到方法的末尾来注册您在应用程序委托中定义的会话更改通知：
> 
> **[[NSNotificationCenter defaultCenter]
> addObserver:self
> selector:@selector(sessionStateChanged:)
> name:FBSessionStateChangedNotification
> object:nil];**

和

> 通过将以下代码添加到**didReceiveMemoryWarning**方法的末尾来取消注册通知：
> 
> **[[NSNotificationCenter defaultCenter] removeObserver:self];**

由于我有很多视图控制器并且它们都应该使用 facebook 的 API，我想我应该在**applicationDidFinishLoadingWithOptions**中实现注册/取消注册方法（`register`用于通知）

但我不确定是否以及如何实现`unregister`'removeObserver 命令，因为appDelegate**无法使用**applicationDidReceiveMemoryWarning 。

*   DidReceiveMemoryWarning 是否访问了 App 的所有 viewController？
*   仅在我的一个 viewControllers 中取消注册就足够了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:33:49.263

应用程序委托**确实**收到内存警告：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)

如果没有，另一种选择是使用通知中心：

```
NSNotificationCenter *center = [NSNotificationCenter defaultCenter];
[center addObserver:self
           selector:@selector(whatever:)
               name:UIApplicationDidReceiveMemoryWarningNotification
             object:nil]; 
```

综上所述，在我看来，在内存警告中删除观察者是不合适的。您将在什么时候恢复它？但是，嘿，如果那是 Facebook 推荐的……

# ruby - 有人知道 AWS Elastic Bean Stalk 对原生 ruby 的支持吗？

> ID：13273821
> 
> 赞同：-2
> 
> 时间：2012-11-07T16:21:35.790
> 
> 标签：ruby, amazon-web-services, amazon-elastic-beanstalk

有什么我可以尝试的例子吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:28:25.733

一点点搜索出现了这个：[http ://aws.typepad.com/aws/aws-elastic-beanstalk/](http://aws.typepad.com/aws/aws-elastic-beanstalk/)

# node.js - 使用 Mongoose 更新子文档

> ID：13273823
> 
> 赞同：0
> 
> 时间：2012-11-07T16:21:38.143
> 
> 标签：node.js, mongodb, coffeescript, mongoose

好的，所以我正在尝试使用 Mongoose 更新子文档（嵌入文档）。我有：

```
 query =
      'fanclubs.fanclub_id': fanclub_id

    fan_update =
      'fanclubs.$.fanclub_name': fanclub_data.fanclub_name

    Fan.update query, fan_update, (err, numAffected) ->
      console.log err
      console.log numAffected 
```

似乎实际上并没有`Fan`用 new 更新对象`fanclub_name`。想法？

我想更新`fanclub_name`字段

**编辑**我的`Fan`架构

```
mongoose = require "mongoose"
{FanClubMemberSchema} = require './schemas/fanClubMemberSchema'
validation = require './validation'

FanSchema = new mongoose.Schema(
  first_name:
    type: String
    trim: true
    required: true

  last_name:
    type: String
    trim: true
    required: true

  fullname:
    type: String
    trim: true
    required: true

  email:
    type: String
    lowercase: true
    unique: true
    required: true
    validate: [validation.email, 'Email is invalid']

  fanclubs:
    type: [FanClubMemberSchema]
    required: false

  added_on:
    type: Date
    default: Date.now
    required: true
) 
```

**FanClubMemberSchema**

```
mongoose = require "mongoose"

FanClubMemberSchema = new mongoose.Schema
  fanclub_id:
    type:  String
    trim:  true
    required: true

  fanclub_name:
    type: String
    trim: true
    required: true

  fanclub_image:
    type: String
    trim:true
    required:true

  access:
    type:  String
    trim:  true
    required: true

  joinedOn:
    type:  Date
    default: Date.now
    required: true    

exports.FanClubMemberSchema = FanClubMemberSchema 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T17:11:34.187

默认情况下，`update`操作只会更新它匹配的第一个文档。所以这只会更新`fanclubs`它包含的第一个粉丝的数据`fanclub_id`。所以我认为它可能有效，但您没有检查`fan`已更新的一个文档。

要更新所有粉丝的数据，您需要启用该`multi`选项：

```
Fan.update query, fan_update, { multi: true }, (err, numAffected) ->
  console.log err
  console.log numAffected 
```

# git - 将分支合并到 master 但限制您的提交

> ID：13273827
> 
> 赞同：4
> 
> 时间：2012-11-07T16:22:03.990
> 
> 标签：git

```
 feature-branch----C---D
                    /
     develop---A---B
    /
 master 
```

我有一个分支`feature-branch`已从分支合并`develop`。这个开发分支是一个正在进行的分支，每周合并到 master 中。我已经完成了这个特性分支的工作，这是在它需要直接进入 master 之后决定的。我不希望正在开发的提交 A 和 B 进入 master。有没有一个很好的解决方案可以让我在不挑选它们的情况下将提交 C 和 D 提交到 master 中？

谢谢，

布雷登

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T16:27:29.427

您应该重新定位`feature-branch`到 master，删除它对提交 A 和 B 的依赖关系。如果 C 和 D 对 A 和 B 具有真实的代码级语义依赖关系，那么您当然不走运。

以下命令序列将修改`feature-branch`为基于`master`而不是`develop`：

```
git checkout feature-branch
git rebase --onto master develop 
```

# java - 在java中返回枚举的静态方法

> ID：13273828
> 
> 赞同：0
> 
> 时间：2012-11-07T16:22:03.893
> 
> 标签：java, enums

> **可能重复：**
> [使用枚举类型的差异方法java](https://stackoverflow.com/questions/13272727/difference-method-java-using-enum-types)

是否可以使用静态方法计算 2 个枚举类型的值之间的差异？枚举代​​表甲板的地方。（即黑桃二（2），红心皇后（10）= 8）。

```
public enum Rank {TWO, THREE, FOUR, FIVE, SIX,SEVEN, EIGHT, NINE, TEN, 
                    JACK, QUEEN, KING, ACE}
public enum Suit {CLUBS, DIAMONDS, HEARTS, SPADES} 
```

我希望该方法返回两张卡之间的等级差异......不知道如何接近/有效地实现这一点。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:23:42.463

```
 public static int diff(Rank first, Rank second){
    return Math.abs(first.ordinal() - second.ordinal() + someDefaultValue);
 } 
```

# r - 合并多个data.tables

> ID：13273833
> 
> 赞同：49
> 
> 时间：2012-11-07T16:22:11.927
> 
> 标签：r, join, merge, data.table

我知道可以将两个`data.table`与`merge`函数或`[.data.table`函数合并（加入）。但是，如果我说 10, `data.table`s 并想用来`do.call`将它们合并在一起，是否有一个函数可以做到这一点？目前我求助于`do.call(cbind, ...)`仅适用于非常特殊的情况。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-11-07T16:47:42.370

不确定，但也许（未经测试）：

```
Reduce(merge,list(DT1,DT2,DT3,...)) 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-09-18T18:14:34.287

为了充实@Henk 在评论中建议的解决方案，以下是如何使用它以`all = TRUE`简洁的方式选择选项：

```
MergedDT = Reduce(function(...) merge(..., all = TRUE), List_of_DTs) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-06-22T07:27:58.663

最新版本的 data.table (1.10.5) 有一个简单的表连接语法，也可以链式连接。

```
 set(DT1, key)
 set(DT2, key) 
  ...
 set(DT10, key)

 DT_cmb <- DT1[DT2,][DT3,]...[DT10,] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-07T06:51:17.597

对于 Michael Ohlrogge 的新回答，我在这里创建了一个函数来执行此任务。您可以从以下继承更多参数`merge.data.table()`

```
mergeDTs <- function(dt_list, by = NULL, sort = FALSE) {
  Reduce(
    function(...) {
      merge(..., by = by, all = TRUE, sort = sort)
    }, dt_list)
} 
```

# c - 如何杀死叉子的孩子？

> ID：13273836
> 
> 赞同：22
> 
> 时间：2012-11-07T16:22:26.397
> 
> 标签：c, fork

我有以下创建子叉的代码。我想在孩子在父母身上完成执行之前杀死它。怎么做？

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

int i;

main (int ac, char **av)
{
  int pid;

  i = 1;

  if ((pid = fork()) == 0) {
    /* child */
    while (1) {
      printf ("I m child\n");
      sleep (1);
    }
  }
  else {
    /* Error */
    perror ("fork");
    exit (1);
  }
  sleep (10)

   // TODO here: how to add code to kill child??

} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-07T16:25:01.073

请参阅[杀死](http://linux.die.net/man/2/kill)系统调用。通常最好先使用 SIGTERM，让进程有机会在使用 SIGKILL 之前欣然死去。

**编辑**

忘了您需要使用[waitpid](http://linux.die.net/man/2/waitpid)来获取该进程的返回状态并防止僵尸进程。

**进一步的编辑**

您可以使用以下代码：

```
kill(pid, SIGTERM);

bool died = false;
for (int loop; !died && loop < 5 /*For example */; ++loop)
{
    int status;
    pid_t id;
    sleep(1);
    if (waitpid(pid, &status, WNOHANG) == pid) died = true;
}

if (!died) kill(pid, SIGKILL); 
```

它将给进程 5 秒的时间优雅地死去

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-07T16:24:01.190

发出信号。

```
#include <sys/types.h>
#include <signal.h>

kill(pid, SIGKILL);

/* or */

kill(pid, SIGTERM); 
```

如果您自己处理信号，则第二种形式更可取。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-07T16:23:56.037

`kill(pid, SIGKILL)`来自父母的问题。

# ios - 如何设置 UITableViewcell 内部标签的高度？

> ID：13273837
> 
> 赞同：0
> 
> 时间：2012-11-07T16:22:29.040
> 
> 标签：ios, xcode, uitableview, storyboard

当我尝试在 Storyboard 中设置的单元格中设置标签的高度时，它可以工作，但是当我尝试设置具有它自己的 .xib 文件的标签的高度时，它就不起作用了。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"MainArticleCell";

     MainArticleCell *cell = (MainArticleCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

cell.mainArticleTitleLabel.frame = CGRectMake(0, 0, 320, 30); // NOT WORKING
... 
```

我成功连接到标签，因为当我尝试添加文本时它可以工作。

```
cell.mainArticleTitleLabel.text = @"lorem ipsum text"; 
```

问题出在哪里？

**更新（改进的解释）：**

当我在设置高度之前检查是否像在 IB 上设置并且在代码中设置之后就像我设置但在模拟器中的视觉效果是一样的。

```
NSLog(@"%f", cell.mainArticleTitleLabel.frame.size.height);
cell.mainArticleTitleLabel.frame = CGRectMake(0, 117, 320, 48);
NSLog(@"%f", cell.mainArticleTitleLabel.frame.size.height); 
```

**更新 2**

我什至可以改变背景颜色（但不能设置高度）

```
cell.mainArticleTitleLabel.backgroundColor = [UIColor redColor];
cell.mainArticleTitleLabel.frame = CGRectMake(0, 117, 320, 48); // NOT WORKING 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:23:15.490

问题是你不能在

```
cellForRowAtIndexPath 
```

你必须在 heightForRowAtIndexPath

这是一个代码示例

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //in my case i get the text of the cell in an array
    NSString* theText =  [anArray objectAtIndex:indexPath.row];

    //then calculate the texte size with standard text
    CGSize textSize = [theText sizeWithFont:[UIFont systemFontOfSize:14] constrainedToSize:CGSizeMake(300, MAXFLOAT) lineBreakMode:NSLineBreakByWordWrapping];

    return textSize.height;
} 
```

如果在 iOS 6 中使用属性文本，请使用

```
CGRect rectSize = [theText boundingRectWithSize:CGSizeMake(labelWidth, MAXFLOAT) options:NSStringDrawingUsesLineFragmentOrigin context:NULL]; 
```

并返回

```
return rectSize.size.height; 
```

我在我的代码中使用它，它适用于动态单元格高度。

**编辑**

我阅读了不同的评论。看来我的回答没有用，因为您的问题不在于返回 heightForRowAtIndexPath 中的值，因为您已经在这样做了。您的问题是它在情节提要中工作，而不是在单个 xib 中。那个时候我帮不上忙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:58:49.223

经过多次尝试后，我放弃了这种方式，我尝试通过情节提要上的 TableView 添加一个单元格并添加自定义类，它可以工作。

# android - onMeasure(): wrap_content，我怎么知道要包装的尺寸？

> ID：13273838
> 
> 赞同：17
> 
> 时间：2012-11-07T16:22:32.637
> 
> 标签：android, view, custom-component

我制作了一个自定义视图，`onDraw()`并在画布上绘制了位图。当我在布局文件中指定我希望它 wrap_content 时，它仍然会填满整个屏幕。`onMeasure()`说：

> measure 的基类实现默认为背景大小，除非`MeasureSpec`. 子类应覆盖 onMeasure(int, int) 以提供对其内容的更好测量。

好的很酷，所以我知道我需要覆盖`onMeasure()`并使用`MeasureSpec`. 根据[这个答案](https://stackoverflow.com/questions/12266899/onmeasure-custom-view-explanation)

> 未指定意味着 layout_width 或 layout_height 值设置为 wrap_content。你可以是任何你想要的尺寸。

现在我解决了我的问题，我如何`onMeasure()`测量尚未创建的位图并测量/包装它？我知道其他 Android 视图必须做一些事情，因为如果设置为 wrap_content，它们不会挡住整个屏幕。提前致谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2017-02-24T04:33:47.020

[这是](https://stackoverflow.com/a/42240421/3681880)这些常用视图方法的运行顺序：

```
1\. Constructor    // choose your desired size 
2\. onMeasure      // parent will determine if your desired size is acceptable
3\. onSizeChanged
4\. onLayout       
5\. onDraw         // draw your view content at the size specified by the parent 
```

## 选择所需的尺寸

如果您的视图可以是它想要的任何尺寸，它会选择什么尺寸？这将是您的`wrap_content`大小，并取决于您的自定义视图的内容。例子：

*   如果您的自定义视图是图像，那么您所需的大小可能是位图的像素尺寸加上任何填充。（在选择大小和绘制内容时，您有责任在计算中考虑填充。）
*   如果您的自定义视图是一个模拟时钟，那么所需的尺寸可能是它看起来不错的一些默认尺寸。（您始终可以获得设备的[`dp`合适`px`尺寸](https://stackoverflow.com/a/42108115/3681880)。）

如果您想要的大小使用繁重的计算，请在您的构造函数中执行此操作。否则，您可以将其分配在`onMeasure`. ( `onMeasure`, `onLayout`, and`onDraw`可能会被多次调用，这就是为什么在这里做繁重的工作不好的原因。)

## 协商最终尺寸

`onMeasure`是孩子告诉父母想要多大的地方，父母决定是否可以接受。这个方法经常被调用几次，每次都传入不同的大小要求，看看是否可以达成某种妥协。最后，孩子需要尊重父母的尺寸要求。

当我需要[复习](https://stackoverflow.com/a/12267248/3681880)如何设置我的`onMeasure`：

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {

    int desiredWidth = 100;
    int desiredHeight = 100;

    int widthMode = MeasureSpec.getMode(widthMeasureSpec);
    int widthSize = MeasureSpec.getSize(widthMeasureSpec);
    int heightMode = MeasureSpec.getMode(heightMeasureSpec);
    int heightSize = MeasureSpec.getSize(heightMeasureSpec);

    int width;
    int height;

    //Measure Width
    if (widthMode == MeasureSpec.EXACTLY) {
        //Must be this size
        width = widthSize;
    } else if (widthMode == MeasureSpec.AT_MOST) {
        //Can't be bigger than...
        width = Math.min(desiredWidth, widthSize);
    } else {
        //Be whatever you want
        width = desiredWidth;
    }

    //Measure Height
    if (heightMode == MeasureSpec.EXACTLY) {
        //Must be this size
        height = heightSize;
    } else if (heightMode == MeasureSpec.AT_MOST) {
        //Can't be bigger than...
        height = Math.min(desiredHeight, heightSize);
    } else {
        //Be whatever you want
        height = desiredHeight;
    }

    //MUST CALL THIS
    setMeasuredDimension(width, height);
} 
```

在上面的示例中，所需的宽度和高度只是设置为一些默认值。您可以改为预先计算它们并使用类成员变量在此处设置它们。

## 使用选择的尺寸

之后`onMeasure`，您的视图的大小是已知的。这个尺寸可能是也可能不是你要求的，但它是你现在必须使用的。使用该大小在`onDraw`.

## 笔记

*   每当您对影响外观但不影响大小的视图进行更改时，请调用`invalidate()`. 这将导致`onDraw`再次被调用（但不是所有其他以前的方法）。
*   每当您对视图进行更改会影响大小时，请调用`requestLayout()`. 这将重新开始测量和绘图的过程`onMeasure`。它通常[与对 的调用结合使用`invalidate()`](https://stackoverflow.com/a/42430021/3681880)。
*   如果由于某种原因您确实无法事先确定合适的所需尺寸，那么我想您可以按照@nmw 的建议进行操作，只要求零宽度，零高度。`invalidate()`然后在加载所有内容后请求一个布局（不仅仅是）。不过，这似乎有点浪费，因为您需要将整个视图层次结构连续布置两次。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T17:07:07.157

如果您无法在 onMeasure 调用之前测量位图，则可以在加载位图之前返回大小为零。加载后，使父 ViewGroup 无效以强制执行另一个度量（不记得视图本身上的 invalidate() 是否会强制执行 onMeasure）。

# c# - 代码合约 + 代码分析

> ID：13273842
> 
> 赞同：20
> 
> 时间：2012-11-07T16:22:46.210
> 
> 标签：c#, .net, visual-studio, visual-studio-2012, code-contracts

我考虑开始在我的代码库中使用[代码契约。](http://msdn.microsoft.com/en-us/devlabs/dd491992.aspx)

我已经在启用所有规则并以零警告为目标的情况下使用代码分析。

但是，在使用时，`Contract.Requires(parameter != null)`我收到了来自代码分析的警告，即 CA1062：

> CA1062：Microsoft.Design：在外部可见的方法“Foo”中，在使用之前验证参数“parameter”。

不幸的是，我不想禁用该规则，因为我发现它很有用。但我也不想压制它的每一次错误发生。

有解决办法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-09T12:57:24.893

为了解决这个问题，需要执行以下步骤：

1.  在代码分析中禁用 CA1062 以消除来自代码分析的警告。目前没有办法让代码分析理解`Contract.Requires`。
2.  在项目的 Code Contracts 窗格中启用“Perform Static Contract Checking”。
3.  启用“隐式非空义务”
4.  将警告级别设置为“hi”（重要的是，这就是我所缺少的！）

步骤 1 消除了 CA 警告，步骤 2 到 4 启用来自代码合同的警告，该警告至少是等效的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-26T15:31:57.223

从框架的 4.5.2 版本（甚至可能是 4.5）开始，可以告诉代码分析有关代码合同正在执行的合同。首先创建以下扩展方法和标记属性

```
 using System;
  using System.Diagnostics;
  using System.Diagnostics.CodeAnalysis;
  using System.Diagnostics.Contracts;

  /// <summary>Extension methods to enhance Code Contracts and integration with Code Analysis.</summary>
  public static class ContractExtensions {
#if RUNTIME_NULL_CHECKS
    /// <summary>Throws <c>ArgumentNullException{name}</c> if <c>value</c> is null.</summary>
    /// <param name="value">Value to be tested.</param>
    /// <param name="name">Name of the parameter being tested, for use in the exception thrown.</param>
    [ContractArgumentValidator]  // Requires Assemble Mode = Custom Parameter Validation
    public static void ContractedNotNull<T>([ValidatedNotNull]this T value, string name) where T : class {
      if (value == null) throw new ArgumentNullException(name);
      Contract.EndContractBlock();
    }
#else
    /// <summary>Throws <c>ContractException{name}</c> if <c>value</c> is null.</summary>
    /// <param name="value">Value to be tested.</param>
    /// <param name="name">Name of the parameter being tested, for use in the exception thrown.</param>
    [SuppressMessage("Microsoft.Usage", "CA1801:ReviewUnusedParameters", MessageId = "value")]
    [SuppressMessage("Microsoft.Usage", "CA1801:ReviewUnusedParameters", MessageId = "name")]
    [ContractAbbreviator] // Requires Assemble Mode = Standard Contract Requires
    public static void ContractedNotNull<T>([ValidatedNotNull]this T value, string name) where T : class {
      Contract.Requires(value != null,name);
    }
#endif
  }

/// <summary>Decorator for an incoming parameter that is contractually enforced as NotNull.</summary>
[AttributeUsage(AttributeTargets.Parameter, AllowMultiple = false)]
public sealed class ValidatedNotNullAttribute : global::System.Attribute {} 
```

现在将您的条目空测试转换为以下格式：

```
/// <summary>IForEachable2{TItem} implementation</summary>
public   void  ForEach(FastIteratorFunctor<TItem> functor) {
  functor.ContractedNotNull("functor"); // for Code Analysis

  TItem[] array = _array;
  for (int i = 0; i < array.Length; i++)    functor.Invoke(array[i]);
} 
```

方法名称*ContractedNotNull*和编译开关*RUNTIME_NULL_CHECKS*当然可以更改为任何适合您命名风格的名称。

[这是告诉我这种技术的原始博客](http://geekswithblogs.net/terje/archive/2010/10/14/making-static-code-analysis-and-code-contracts-work-together-or.aspx)，我对它进行了一些改进；非常感谢 Terje Sandstrom 发表他的研究。

Rico Suter 在[这里](http://blog.rsuter.com/elegant-method-parameter-validation-with-code-contracts-support/)通过使用附加属性对此进行了扩展，以便调试器和内联器也更智能：

*   [DebuggerStepThroughAttribute 类](https://msdn.microsoft.com/library/system.diagnostics.debuggerstepthroughattribute(v=vs.110).aspx)
*   [MethodImplAttribute 类](https://msdn.microsoft.com/library/system.runtime.compilerservices.methodimplattribute(v=vs.110).aspx)

# java - 从 .jar 文件重新创建项目

> ID：13273843
> 
> 赞同：1
> 
> 时间：2012-11-07T16:22:50.277
> 
> 标签：java, jar, recreate

有没有机会从 .jar 文件重新创建（netbeans-）项目？因为我相信一些愚蠢的加密软件会破坏我的文件。

他们有什么建议或解决方案吗？我已经使用终端命令“jar xf MyJarFile.jar”提取了 .jar 文件。但是我看不懂里面的代码...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:25:36.843

您可以将 jar 反编译为源代码，然后创建一个新项目并将所有源代码拖到您的 src 文件夹中。我喜欢使用 JD-GUI 来反编译 .jar：http://java.decompiler.free.fr/?q= [jdgui](http://java.decompiler.free.fr/?q=jdgui)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T17:23:54.493

我还推荐使用 JD-GUI，当我的简单文本编辑器损坏了我的 .java 文件并且我能够使用它将类转换回源代码时，它对我有很大帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-09T06:23:51.763

先删除$文件，然后jad最好，jdgui会出错。

# algorithm - 动态编程以找到最小数量的硬币

> ID：13273847
> 
> 赞同：0
> 
> 时间：2012-11-07T16:23:01.840
> 
> 标签：algorithm, dynamic, dynamic-programming

我试图理解我的硬件问题的一部分，但它看起来真的像中文......

假设我们有硬币`x_1, x_2, x_3, ... x_n`。 `x_1 = 1`总是。我们希望以最少数量的硬币提供一定数量的钱。然后我们使用动态规划。

现在我不明白这一点 - 返回金额的最小硬币数量`c(i,j) = min { c(i-1,j), 1+c(i,j-x_i) }` 在哪里。`c(i,j)``j`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:59:31.310

`c(i,j-x_i)``j-x_i`是仅使用硬币来获得价值的最小硬币数量`i,i+1,...,n`（这是归纳假设，这就是递归公式向我们保证的）。
因此，使用给定的一组硬币 + 一个额外的硬币 value`1+c(i,j-x_i)`的最小方法是我们决定使用它。`j-x_i``x_i`

由此，`c(i,j) = min { c(i-1,j), 1+c(i,j-x_i) }`实际上是在穷举地选择“什么是最好的”：

1.  取当前硬币，并递归检查其余较小的问题
2.  决定不接受它 - 再次递归检查较小的问题。

取其中的最小值确保我们（因为它是详尽地完成的 - 在所有可能性上）`c(i,j)`是最小的。

# asp.net - ASP.net：使用 .NET 技术开发强大的 Web 应用程序，我需要哪些工具？

> ID：13273851
> 
> 赞同：0
> 
> 时间：2012-11-07T16:23:20.933
> 
> 标签：asp.net, .net, asp.net-mvc, mobile, jquery-mobile

寻找可以让我使用 .NET 堆栈开发移动网站的所有可用工具的概要。我可能会使用 MVC 4 和 jQuery Mobile，但我还需要考虑什么才能让所有设备兼容。请记住，我说的是网站，而不是本机应用程序。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:54:17.713

Visual Studio 是您自己编写应用程序所需的一切。[Web Essentials](http://visualstudiogallery.msdn.microsoft.com/6ed4c78f-a23e-49ad-b5fd-369af0c2107f) VS 扩展在处理与 Web 相关的东西时非常方便，因此我建议您查看并安装它。就 JavaScript 而言，Jquery/Jquery mobile 可能是客户端兼容性的最佳选择。

现在，这就是制作网站所需的全部内容，但为了进行测试，您应该真正使用实际的移动浏览器。一种方法当然是使用实际的 iOS 或 Android 设备来尝试移动 safari、移动 chrome 等。另一种方法是下载适用于 iOS 和 Android 的 SDK 和开发工具，它们与[iOS SDK 和XCode](https://developer.apple.com/xcode/index.php)和[Android SDK 和 Eclipse](http://developer.android.com/sdk/index.html)，分别。您可以使用通常用于应用程序测试的模拟器在您 PC 上的假设备上运行移动浏览器，这将为您提供一种更真实的方式来测试网站的外观以及移动设备固有的触摸功能浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T17:22:48.210

视觉工作室。特别是[Visual Studio 2012](http://www.microsoft.com/visualstudio/eng/downloads)，针对移动网络进行了高度优化。

跨平台支持的[Mono项目（不是 Web 应用程序，而是常规应用程序）。](http://www.mono-project.com/Main_Page)

# git - 如何使用 SourceTree 更新我的分叉存储库？

> ID：13273852
> 
> 赞同：118
> 
> 时间：2012-11-07T16:23:23.987
> 
> 标签：git, github, mercurial, bitbucket, atlassian-sourcetree

我正在使用 SourceTree（带有 BitBucket）来管理我的代码。我已经分叉了一个 repo，并且父 repo 已经更新。

如何使用 SourceTree 将上游代码合并到我的分叉存储库中？

* * *

## 回答 #1

> 赞同：241
> 
> 时间：2012-11-07T16:23:23.987

# c# - 将字符串转换为 ToolStripMenuItem

> ID：13273855
> 
> 赞同：0
> 
> 时间：2012-11-07T16:23:34.367
> 
> 标签：c#

我已经在表单上设置了一个菜单结构，我想使用数据库以编程方式启用或禁用某些菜单项。

我已经到了最后一个阶段，我有一个`AllowedMenu`and类`CodeNames`（它与工具条菜单完全匹配），我想做的就是将它从字符串转换`CodeName`为 a 。`ToolStripMenuItem`

我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:10:39.240

似乎找到了一些有用的东西......

```
var m = menuStrip1.Items.Find(menuItem.CodeName, true);
var o = m.ToList();
foreach (var p in o)
{
    p.Visible = false;
} 
```

谢谢大家。。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:31:38.240

您可以`Items`通过`ToolStrip`. 如果您有确切的项目名称（在`CodeName`变量中），您可以执行以下操作：

```
if (toolStrip1.Items.ContainsKey(CodeName)) //Just in case... 
{
    var yourItem = toolStrip1.Items[CodeName];
} 
```

# c# - 从存储过程返回的 XML 中的反斜杠

> ID：13273860
> 
> 赞同：0
> 
> 时间：2012-11-07T16:23:43.047
> 
> 标签：c#, sql, xml, escaping

我编写了一个存储过程，它使用以下语法将我的行作为 XML 返回：

```
FOR XML PATH ('customer'), ROOT ('customers'), TYPE 
```

从 SSMS 中的存储过程运行查询会产生输出，单击时看起来很好。

但是，从 C# 调用该存储过程会给我 XML，我认为它具有被转义的双引号，因此：

```
<customers><customer id=\"123456\" firstName=\"ABE\" lastName=\"LINCOLN\" dob=\"02/12/1809\"> 
```

我的 C# 代码如下所示：

```
public string GetCustomerXML()
{
     string xml = string.Empty;
     XmlDocument xmlDoc = new XmlDocument();

     using (SqlConnection myConnection = new SqlConnection(connectionString))
     {
          myConnection.Open();

          using (SqlCommand cmd = new SqlCommand("GetData_CreateXML", myConnection))
          {
               cmd.CommandType = CommandType.StoredProcedure;

               using (XmlReader reader = cmd.ExecuteXmlReader())
               {
                   while (reader.Read())
                   {
                       xmlDoc.Load(reader);
                       xml = xmlDoc.OuterXml.ToString();
                   }
               }
           }
     }

     return xml;
} 
```

我在这里做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:26:39.557

> 我在这里做错了什么？

我怀疑您只是在调试器中检查字符串，它通常会转义字符串，就好像您想将其写为 C# 字符串文字一样。

尝试*记录*字符串（例如，将其写入控制台这样简单的事情），我怀疑您会发现那些反斜杠根本不存在。

# java - 在java中对多维数组进行排序

> ID：13273862
> 
> 赞同：-1
> 
> 时间：2012-11-07T16:23:51.017
> 
> 标签：java, arrays, sorting, multidimensional-array

我正在尝试在 java 中对二维数组进行排序。第一列是一个 int，描述了一种权限，第二列是另一个整数，描述了一个应用程序的类别。我想对第一列进行排序，使第二列保持原样。因此，例如，如果我将 [0][0] 作为参数，我将返回该类别中最常用的权限。

对不起我的英语不好，谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:31:27.760

使用`Arrays#sort(T[],Comparator<? super T>)`功能

```
 int array [][] = {{1,11},{2,34},{3,8},{8,4},{7,23}};

        java.util.Arrays.sort(array, new java.util.Comparator<int[]>() {
            public int compare(int[] a, int[] b) {
                return b[0] - a[0];
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:29:43.080

希望这可以帮助：

```
 class 2DcolumnComparator implements Comparator {
        private int columnToSortOn;

        2DcolumnComparator(int columnToSortOn) {
        this.columnToSortOn = columnToSortOn;
    }

    public int compare(Object o1, Object o2) {
     String[] row1 = (String[])o1;
     String[] row2 = (String[])o2;

     return row1[columnToSortOn].compareTo(row2[columnToSortOn]);
    }
   } 
```

# jsp - 提交表单不适用于 IE 9

> ID：13273867
> 
> 赞同：0
> 
> 时间：2012-11-07T16:24:05.413
> 
> 标签：jsp

它适用于 Firefox 和 Chrome，但不太确定是什么原因。在 apache tomcat 中使用 jsp。

表单代码如下

```
<form id="form1" method="POST" action="zzz.jsp?yy=submit">
    <input type="button" name="submit" id="submit" value="Submit" onclick="Submitconfirm()" />
    </p>
</form> 
```

提交确认的javascript

```
function Submitconfirm() {
    var a = document.getElementById("form1");

    if (confirm()) {
        a.submit();
    }
}

function confirm() {
    return confirm('Are you sure these details are correct?');
} 
```

jsp没有回发功能所以我不得不求助于这个，在提交时会执行javascript来发送表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T00:41:36.943

您必须将按钮重命名为其他名称，因为它会导致与 JS`.submit()`函数发生冲突。有关更多详细信息，请参阅[此 SO 问题](https://stackoverflow.com/a/834197/249327)。例如

```
<input type="button" name="submitButton" id="submit" value="Submit" onclick="Submitconfirm()" /> 
```

# sql - 通过将两个字段相加来更新 sql 列

> ID：13273869
> 
> 赞同：-1
> 
> 时间：2012-11-07T16:24:10.737
> 
> 标签：sql, sql-server-2008

我有一张有几列的桌子。我需要将数据从一列（钱）添加到另一列（钱），然后逐行更新表格。

我试过选择这会创建一个临时列，但没有数据保存到数据库中

我已尝试插入，但我需要将新总数更新到正在计算的字段中

我认为我的解决方案是一个更新，但到目前为止这对我不起作用。

更新前；

```
ID  ColumnNameCurrent   ColumnNameYTD
A               20.20                       89.60 
b               55.00                       147.38
c               60.98                       258.46
d               38.43                     7,894.32 
```

更新后（我希望）

```
ID  ColumnNameCurrent   ColumnNameYTD
A    20.20                    109.80 
b    55.00                    202.38 
c    60.98                    319.44 
d    38.43                   7,932.75 
```

我认为代码应该是什么；

```
UPDATE TableName
SET ColumnNameYTD = ColoumNameYTD + ColumnNameCurrent 
```

您能否向我解释一下我可以在上面进行哪些更改以获得所需的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:01:05.953

除非我遗漏了您的要求，否则您`UPDATE`应该可以：

```
update yourtable
set ColumnNameYTD = ColumnNameYTD + ColumnNameCurrent 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/053de/1)

# iframe - 如何使用 jquery 确认、iframe 和骨干上传文件？

> ID：13273871
> 
> 赞同：1
> 
> 时间：2012-11-07T16:24:13.323
> 
> 标签：iframe, backbone.js, confirm

我尝试使用带有主干的 jquery 确认框上传文件。我使用 iframe 传输。调用 Web 服务会出现错误“**当前请求不是多部分请求**”。我做错了什么？

```
$.confirm({
            'title'     : "Upload a file",
            'message'   : "<form id='uploadForm' method='post' enctype='multipart/form-data'>"+"<input type='file' id='uploadFile' />"+"</form>",
            'buttons'   : {
                'Yes'   : {
                    'name' : "Upload",
                    'class' : 'blue',
                    'action': function(event){ 
                        //TODO Call webservice

                        $.ajax({
                                iframe: true,
                                type: "POST",
                                url: "/api/data/upload",
                                files: $(":file", this),

                            }).complete(function(data) {
                                console.log(data);
                            });
                        //});
                    }
                },
                'No'    : {
                    'name' : "Cancel",
                    'class' : 'gray',
                    'action': function(){}  
                }
            }
        }); 
```

# c++ - 什么是类中命名空间的好选择？

> ID：13273873
> 
> 赞同：1
> 
> 时间：2012-11-07T16:24:15.453
> 
> 标签：c++, enums, namespaces, scope

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T16:34:30.380

Try using new C++11 feature - [strongly typed enumerations](http://en.wikipedia.org/wiki/C++11#Strongly_typed_enumerations). Thanks to it you will not have name collisions and you will end up with really strong type system.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T16:34:33.183

You can use enum class for this

```
enum class State
{
    Accelerating,
    Breaking,
    Stopped
}; 
```

Then you'd refer to it as State::Breaking as you wanted. This of course requires c++11, see [http://en.wikipedia.org/wiki/C%2B%2B11#Strongly_typed_enumerations](http://en.wikipedia.org/wiki/C%2B%2B11#Strongly_typed_enumerations)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T16:24:15.453

An alternative I found was to, instead of namespace, use classes, but the problem is this way the project is not clear enough and classes can be instantiated. (Although I can cheat this problem with private constructors)

```
class GameCharacter {
public:
    class MovingState {
        MovingState();
            /* or, in C++11:
             * MovingState() = delete;
             */
    public:
        enum State {
            Running,
            Walking,
            Stopped    // Referred as GameCharacter::MovingState::Stopped.
        };
    };
    class DrivingState {
        DrivingState();
            /* or, in C++11:
             * DrivingState() = delete;
             */
    public:
        enum State {
            Accelerating,
            Breaking,
            Stopped    // Referred as GameCharacter::DrivingState::Stopped.
        };
    };
    ...
}; 
```

this works, but I'm not very clear if this is the best solution. I think there should be another way. I want opinions. What do you think?

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-07T16:34:34.437

In C++1x (the new version of C++ that was standardised last year), you can use [strongly typed enumerations](http://en.wikipedia.org/wiki/C%2B%2B11#Strongly_typed_enumerations), which put the identifiers in the scope of the enum class itself (among other improvements). These are declared with `enum class`:

```
class GameCharacter {
public:
    enum class State {
        Running,
        Walking,
        Stopped    // Referred to as GameCharacter::MovingState::Stopped.
    };
    ...
}; 
```

In the meantime, if you're stuck with a C++03 compiler or want to retain compatibility, just use `class` instead of `namespace` and declare the constructor private as you suggested in your own answer. You can make the entire `class` private if the outside world doesn't need to see it.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-07T16:36:29.760

This sounds like a job for C++11's [Strongly Typed Enumerations](http://en.wikipedia.org/wiki/C%2B%2B11#Strongly_typed_enumerations).

```
class GameCharacter {
public:
    enum class MovingState {
        Running,
        Walking,
        Stopped
    };
    ...
    void f(Movingstate m) { if (m == MovingState;:Running) ... }
};
void f() { if (mm == GameCharacter::MovingState::Running) ... } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-07T16:37:13.337

If you use C++11, you can use

```
class GameCharacter {
 public:
  enum class DrivingState { Accelerating, Breaking, Stopped };
  enum class WalkingState { Stopped, Running, Walking };

  DrivingState driving_state() { return ds_; }
  void set_driving_state(DrivingState ds) { ds_ = ds; }

  WalkingState walking_state() { return ws_; }
  void set_walking_state(WalkingState ws) { ws_ = ws; }

  DrivingState ds_;
  WalkingState ws_;
};

int main() {
  GameCharacter g;
  g.set_walking_state(GameCharacter::WalkingState::Stopped);
  g.set_driving_state(GameCharacter::DrivingState::Stopped);
  return 0;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-07T16:42:21.567

You can use a struct instead of a namespace if you are unable to use C++11 [strongly typed enums](http://en.wikipedia.org/wiki/C++11#Strongly_typed_enumerations):

```
class GameCharacter {
public:
    struct MovingState {
        enum Enum {
            Running,
            Walking,
            Stopped
        };
    }
    ...
}; 
```

This was something that we adopted for a while (until C++11 support) as it can be used everywhere unlike the namespace trick.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-07T16:26:04.977

If you have so much in your class that you feel you need to sub-categorise it into namespaces, then your class *has too many things*.

You should move stuff out of it. In particular all these enums don't need to be members of a class. Why not keep them in the same namespace that the class is in?

# selenium - 如何在脚本中实现 AbstractWebdriverEventListener

> ID：13273874
> 
> 赞同：0
> 
> 时间：2012-11-07T16:24:15.057
> 
> 标签：selenium, webdriver, testng

我创建了一个名称为的文件，`SeleniumTestListener.java`并编写了以下代码：

```
@override
@AfterMethod(alwaysrun=true)
public class UITestNGListener  extends AbstractWebDriverEventListener
{   

        // TODO Auto-generated method stub
        @Override
        @AfterTest(alwaysRun=true)
        public void onException(Throwable exception, WebDriver driver) {
        System.out.println("Failed Failed Failed");

    } 
```

现在，当我尝试运行脚本时（故意让它在登录我的应用程序后失败）

但它因配置问题而失败

> org.testng.TestNGException：方法 onException 需要 2 个参数，但在 @Configuration 注释中提供了 0 个参数。

有人可以帮助如何为此传递值（可抛出异常，webdriver驱动程序）吗？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:05:27.070

1.  你不能`@AfterMethod`在课堂上使用。
2.  如果您在测试方法中指定参数，则需要使用`@Parameters`注释或使用`@DataProvider`.

# javascript - 如何使用 jquery 以编程方式从跨度中获取像素宽度

> ID：13273879
> 
> 赞同：5
> 
> 时间：2012-11-07T16:24:28.100
> 
> 标签：javascript, jquery, html

我正在尝试做类似的事情：

```
 $('<span>random text in here</span>').width() 
```

但它返回的宽度是 0。（我试图这样做的原因是为了获取给定文本的像素宽度。）

我如何以编程方式获得这个宽度？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-07T16:25:21.983

您必须对其进行渲染。

你可以这样做：

```
var s = $('<span>random text in here</span>');
s.appendTo(document.body);
var w = s.width();
s.remove(); 
```

[示范](http://jsfiddle.net/aNJcA/)

注意 ：

*   如果您像我一样一次性执行此操作，则不会显示任何内容。出于所有实际目的，没有在 DOM 中插入任何内容，
*   您也可以使用内存画布，但它不会处理比简单文本更复杂的东西，也不会考虑跨度的 css 设置。

这是使用内存画布测量某些文本宽度的解决方案：

```
var canvas = document.createElement('canvas');
var c = canvas.getContext('2d');
// set here c.font to adjust it to your need
var w = c.measureText('random text in here').width; 
```

[示范](http://jsfiddle.net/aUtba/)

在一般情况下，我会使用第一个，但这可能取决于您*为什么*要测量文本。

# doctrine - Doctrine 1.2 DQL 中的子查询为 FROM

> ID：13273883
> 
> 赞同：0
> 
> 时间：2012-11-07T16:24:44.270
> 
> 标签：doctrine, subquery, doctrine-1.2

好的，所以最重要的是在给定某些条件的情况下，获取 mysql 表中在同一个表中有另一个相关行的行。这个表就像一个活动日志，所以我想通知某人“某个人”离开了他的组，但我只想在那个人在给定日期之前加入组时发出通知，所以我要做的是下一个 sql：

```
SELECT ua.*, ua2.*
  FROM user_activities AS ua 
     INNER JOIN (SELECT ua2.* FROM user_activities AS ua2
                 WHERE ua2.activity = "join-group"
                 ORDER BY ua2.created_at) 
     AS ua2 ON ua2.group_name = ua.group_name AND ua2.user_id = ua.user_id
  WHERE ua.activity = "unjoin-group"; 
```

由于清楚的原因，我省略了日期条件。

所以我需要知道如何将其转换为 DQL（对于学说 1.2），这可能吗？还是我最好以编程方式进行？

我现在尝试的是：

```
$q = Doctrine_Query::create()
            ->from('UserActivity ua, ua.User u ')
            ->where('ua.created_at > ?', $min_date)
            ->andWhere('ua.activity = ?', "unjoin-group")
            ->andWhereIn('u.status', array(STATUS_HOT, STATUS_ACTIVE))
            ->andWhere('ua.user_id IN ( SELECT
                                            uaa.id
                                        FROM
                                            UserActivity uaa
                                        WHERE
                                            uaa.activity   = ? AND
                                            uaa.created_at < ? AND
                                            uaa.created_at > ? AND
                                            uaa.group_name = ua.group_name
                                        LIMIT 1',
                                            array("join-group", $min_date, $max_date)); 
```

但我得到这个错误：

致命错误最大函数嵌套级别“100”达到中止

所以我无法继续前进

# sql - 如何从 SSIS 包中的表中仅获取过去一年创建的记录？

> ID：13273885
> 
> 赞同：0
> 
> 时间：2012-11-07T16:24:48.633
> 
> 标签：sql, sql-server, sql-server-2008, ssis

我在表中有一个**CT_DT**列。我只需要处理过去创建的交易`365 days`。

例如，假设当前日期是**Nov 7, 2012 ，我必须只处理自****Nov 7, 2011**以来创建的那些交易。我在 SSIS 包中使用条件过滤器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T16:43:29.463

您可以过滤查询中的数据，您可能在数据流任务中的数据源上使用。

### 查询以过滤源上的数据：

```
SELECT  column1
    ,   column2
    ,   column3
FROM    dbo.MyTable
WHERE   DATEDIFF(YEAR, CT_DT, GETDATE()) <= 1 
```

如果您绝对要过滤`Conditional Split`数据流任务中的转换数据，请创建一个新输出并将其设置为以下表达式：

### 条件拆分的表达式：

```
DATEDIFF("yy", CT_DT, GETDATE()) <= 1 
```

您的条件拆分将如下所示。

![条件拆分](../Images/e0d96f214fb373b0e823e4cea4abb8d1.png)

# c# - LINQ 查询以在一段时间内按月对记录进行分组

> ID：13273887
> 
> 赞同：2
> 
> 时间：2012-11-07T16:24:58.343
> 
> 标签：c#, linq

我正在寻找一些帮助来调整以下 LINQ 查询以返回未来 6 个月内的所有日期，即使是那些在给定月份内没有记录的日期。

```
var maxDate = DateTime.Now.AddMonths(6);

var orders = (from ord in db.Items

where (ord.Expiry >= DateTime.Now && ord.Expiry <= maxDate)

group ord by new
    {
        ord.Expiry.Value.Year,
        ord.Expiry.Value.Month
    }
into g
select new ExpiriesOwnedModel
    {
        Month = g.Select(n => n.Expiry.Value.Month).First(),
        Quantity = g.Count()
    }).ToList(); 
```

对于如何最好地实现这一点，我非常感谢任何帮助或指示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T16:33:25.663

我不确定它与您的数据库的交互效果如何，但我会像使用连接一样执行此操作：

```
var firstDaysOfMonths = Enumerable.Range(0, 7).Select(i =>
    new DateTime(DateTime.Today.Year, DateTime.Today.Month, 1).AddMonths(i));
var orders = firstDaysOfMonths.GroupJoin(
    db.Items,
    fd => fd,
    ord => new DateTime(ord.Expiry.Value.Year, ord.Expiry.Value.Month, 1),
    (fd, ords) => new { Month = fd.Month, Quantity = ords.Count() }); 
```

请注意，您最终可能会获得额外的一个月，而之前您没有（在该月的第一天？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T16:48:35.070

如果您更喜欢组连接的查询语法（我愿意），请从 Rawling 的回答中窃取：

```
var orders =
    from month in Enumerable.Range(0, 7)
        .Select(i => new DateTime(DateTime.Today.Year, DateTime.Today.Month, 1).AddMonths(i))
    join ord in db.Items
        on month equals new DateTime(ord.Expiry.Value.Year, ord.Expiry.Value.Month, 1)
        into ords
    select new { month.Month, Quantity = ords.Count() }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T17:15:37.580

如果它不能很好地与数据库一起使用，则可以选择：

```
var rawGroups = db.Items.Where(item.Expiry >= DateTime.Now && ord.Expiry <= maxDate)
                        .GroupBy(item => new
                           {
                            item.Expiry.Value.Year,
                            item.Expiry.Value.Month
                           }, g => new ExpiriesOwnedModel()
                          {
                            Month = g.Key.Month,
                            Quantity = g.Count()
                          }).ToDictionary(model => model.Month);

var result = Enumerable.Range(DateTime.Now.Month,6)
                       .Select(i => i > 12 ? i - 12 , i)
                       .Select(i => rawGroups.Keys.Contains(i) ?
                                    rawGroups[i] :
                                    new ExpiriesOwnedModel() 
                                    { Month = i , Quantity = 0 }); 
```

# java - apache POI打开docx文件失败

> ID：13273893
> 
> 赞同：0
> 
> 时间：2012-11-07T16:25:18.990
> 
> 标签：java, apache, apache-poi

我试图获取 Doc/Docx 文本内容。似乎 apache POI 就是这样做的。我在 pom.xml 中包含了依赖项。我尝试了很多这样的代码示例：

```
 File docFile1=new File("c:\\document1.docx")
    FileInputStream inputStream = new FileInputStream(docFile1);
    XWPFDocument docIn = new XWPFDocument(inputStream);
    XWPFWordExtractor extractor = new XWPFWordExtractor(docIn);
    String docText = extractor.getText(); 
```

这行代码无法编译。eclipse 错误在第 3 行（构造函数 XWPFDocument(FileInputStream) is undefined ）。许多网络资源认为这应该可以工作。但它没有。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:59:17.407

对于任何有同样问题的人。包括最后一个 POI 版本解决了问题。在撰写本文时它是 3.7 。

# sql - SQL电影数据库查询

> ID：13273894
> 
> 赞同：0
> 
> 时间：2012-11-07T16:25:19.513
> 
> 标签：sql, sqlplus

我无法解决以下 SQL 请求：

1）“给出原始名称和年份，以及现在的名称和年份，以及在'1960'之前制作然后在'2000'之后重新制作的电影的工作室。”

2）“获取所有在'1951'之前创作并在'2000'之后重拍的电影的电影名称”

有几张桌子，但我假设只需要两张：“电影”和“翻拍”

“电影”属性：电影ID、电影名称、年份、导演、工作室

'remakes' 属性：filmid、标题、年份、priorfilm、previousyear

我的理解是重拍包含在电影中，因此“重拍”表中的先前电影对应于“电影”表中的电影ID。我无法将两者联系起来以放置年份条件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:30:15.413

您需要`films`（对于原版）加入`remakes`（告诉您电影如何对应）然后`films`再加入（对于重拍版本）。

**1：**

```
SELECT o.filmname as originalname, o.year as originalyear,
       c.filmname as remakename, c.year as remadeyear, o.studio
FROM films o
INNER JOIN remakes r on r.priorfilm = o.filmid
INNER JOIN films c on c.filmid = r.filmid
WHERE o.year < 1960 AND c.year > 2000 
```

**2：**

```
SELECT o.filmname
FROM films o
INNER JOIN remakes r on r.priorfilm = o.filmid
INNER JOIN films c on c.filmid = r.filmid
WHERE o.year < 1951 AND c.year > 2000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:37:54.210

第一次查询

```
SELECT f.filmname, f.year, f.studio, r.title, r.prioryear
       from film f , join remakes r on f.filmid = r.filmid
            where r.year > 2000 and f.year < 1960; 
```

第二次查询

```
select f.* from film f join remakes r on f.filmid = r.filmid
    where f.year < 1951 and r.year > 2000 
```

# jquery - 脚本只为 2 个不同的输入加载第一个函数，而不是单独加载它们

> ID：13273902
> 
> 赞同：0
> 
> 时间：2012-11-07T16:25:44.263
> 
> 标签：jquery

这是 2 个输入的 2 个不同函数 - inputStringVga 和 inputStringCpu，但是它总是只加载第一个函数，即使 2 个输入具有不同的 ID（inputStringVga 和 inputStringCpu） 为什么会这样？以及如何让他们加载他们的函数而不是只加载第一个函数查询？

```
function lookup(inputStringVga) {
    if(inputStringVga.length == 0) {
        $('#suggestions').fadeOut(); // Hide the suggestions box
    } else {
        $.post("rpc.php", {queryStringVga: ""+inputStringVga+""}, function(data) { // Do an AJAX call
            $('#suggestions').fadeIn(); // Show the suggestions box
            $('#suggestions').html(data); // Fill the suggestions box
        });
    }
}
function lookup(inputStringCpu) {
    if(inputStringCpu.length == 0) {
        $('#suggestions').fadeOut(); // Hide the suggestions box
    } else {
        $.post("rpc.php", {queryStringCpu: ""+inputStringCpu+""}, function(data) { // Do an AJAX call
            $('#suggestions').fadeIn(); // Show the suggestions box
            $('#suggestions').html(data); // Fill the suggestions box
        });
    }
} 
```

rpc.php 文件

```
$querystring = JRequest::getVar('queryStringCpu');
    if(isset($querystring)) {
if(strlen($querystring) >0) {

    $query = "SELECT cpuname FROM #__cpu WHERE cpuname LIKE '%" . $querystring . "%' ORDER BY cpuname LIMIT 50";
    $db->setQuery( $query );
    $db->query( $query ) or die('Blogai');
    $qq = $db->loadObjectList();

    foreach ($qq as $aa) {
    echo '<div class="aa">'.$aa->cpuname.'</div>';
        }
    }
}
$querystring2 = JRequest::getVar('queryStringVga');

    if(isset($querystring2)) {
if(strlen($querystring2) >0) {

    $query2 = "SELECT vganame FROM #__cpu WHERE vganame LIKE '%" . $querystring2 . "%' ORDER BY vganame LIMIT 50";
    $db->setQuery( $query2 );
    $db->query( $query2 ) or die('Blogai');
    $qq2 = $db->loadObjectList();

foreach ($qq2 as $aa2) {
    echo '<div class="aa1">'.$aa2->vganame.'</div>';
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:48:07.317

从我认为你正在尝试做的事情来看，你会想要这样的东西：

```
<input name="'.$this->name.'" type="text" size="50" value="'.$this->value.'" id="inputStringVga" onkeyup="lookup(this.value, this.id);" /></input> <div id="suggestions"></div> 
```

和你的 JS：

```
function lookup(val, id) {
    if(val.length == 0) {
        $('#suggestions').fadeOut(); // Hide the suggestions box
    } else {
        aa = {};
        aa[id] = ""+val+"";
        $.post("rpc.php", aa, function(data) { // Do an AJAX call
            $('#suggestions').fadeIn(); // Show the suggestions box
            $('#suggestions').html(data); // Fill the suggestions box
        });
    }
} 
```

可能需要弄乱该关联数组的形成方式，但无论如何..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:27:28.450

它们都是**相同的功能**。所以一个函数会**被**. `signature of current function`因为在读取任何代码之前首先读取函数定义。

两者都有相同的签名 `function lookup()` ..参数的数量没有问题。

# php - PHP 无法访问空属性错误

> ID：13273905
> 
> 赞同：1
> 
> 时间：2012-11-07T16:25:48.730
> 
> 标签：php

我收到以下错误，我似乎无法弄清楚为什么或如何触发它。

`Fatal error: Cannot access empty property in /home/content/p/l/a/plai1870/html/com/php/Bone/Compiler.php on line 18`

第 18 行是

```
throw new LogicException($this->$compilers[$language]." is not a supported compiler."); 
```

这是编译器.php

```
<?php
namespace Bone;
use LogicException;

class Compiler implements \Bone\Interfaces\Compiler {

    protected $compiler;

    protected $compilers = array(
        "php"           => "PHP",
        "as3"           => "ActionScript3",
        "javascript"    => "Javascript"
    );

    public function __construct($language) {
        $language = strtolower($language);
        if (!isset($this->$compilers[$language])) {
            throw new LogicException($this->$compilers[$language]." is not a supported compiler.");
        }
        $compiler = "\Bone\Compilers\\".$this->$compilers[$language]."\Compiler";
        $this->compiler = new $compiler();
    }

    public function buildDefinition($object, $path = null) {
        return $this->compiler()->buildInterface($object, $path);
    }

    public function buildObject($object, $path = null) {
        return $this->compiler->buildObject($object, $path);
    }   

    public function parameters($method) {
        return;
    }

    public function save($data, $path) {
        return;
    }
}
?> 
```

**编辑** 我打电话给它：

```
$compiler = new \Bone\Compiler("php"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T16:27:38.050

对不起，如果这是最明显的，但是：

```
throw new LogicException($this->$compilers[$language]." is not a supported compiler."); 
```

由于已检查该属性不存在，不应该是：

```
throw new LogicException("$language is not a supported compiler."); 
```

?

**编辑：**

```
$this->$compilers[$language]
       ^- variable property 
```

删除`$`那里：

```
$this->compilers[$language] 
```

然后您可以检查是否设置了数组中的条目，而不是是否设置了具有（未设置）数组`$compilers`（局部变量）内值名称的属性。

开发时，请始终打开警告和通知（您可以想象的最高错误级别），以免在没有 PHP 事先警告您的情况下遇到这些问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T16:31:20.037

你的数组是`$this->compilers`，不是`$this->$compilers`。

`$compilers`在您的函数中不存在，因此`$this->$compilers`正在寻找一个空白属性。

# c++ - 通过字符串名称访问 C++ 运行时成员函数

> ID：13273906
> 
> 赞同：2
> 
> 时间：2012-11-07T16:25:50.517
> 
> 标签：c++, function-pointers

我有两节课：

```
class MyClassInfo {
public:
  void AddMethod(std::string name, void* pointer); // I don't know what signature should be
}
class MyClass
{
public: 
  void SetField1(int f1);
  int GetFileld1();
private:
  int field1;
}; 
```

我需要能够在运行时通过名称（字符串）访问 MyClass 的方法。我不想使用任何库（boost 除外）和/或编译器功能（例如 rtti）来做到这一点。

我不知道应该在 AddMethod 方法中使用哪个签名，因为我不知道如何将函数指针传递给函数。此函数必须是允许添加任何方法的通用函数。Mb，你知道一个更好的变体如何在没有 MyClassInfo 的情况下做到这一点。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:27:21.387

这在直接 C++ 中是不可能的。您将不得不查看替代方法，例如创建到成员函数指针的名称映射。但即便如此，也需要一致的方法签名。

就像是

```
std::map<std::string, int (MyClass::*)(void*)) 
```

例如。您的`AddMethod`签名将如下所示

```
void AddMethod(std::string name, int (MyClass::* pointer)(void*)); 
```

你会这样称呼它

```
info.AddMethod("someMethod", &MyClass::someMethod); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:32:58.413

如果您要传递`AddMethod`的所有函数都具有相同的签名（可能在绑定一些参数之后），您可以使用此签名：

```
void AddMethod(std::string name, boost::function<int ()> func); 
```

并像这样使用：

```
info.AddMethod("GetFileId1", std::bind1st(std::mem_fun(&MyClass::GetFileId1), &MyClassInstance); 
```

如果函数具有不同的签名，您可以使用以下方式存储它们`boost::function_base`：

```
void AddMethod(std::string name, boost::function_base func); 
```

你像上面一样使用它。现在的挑战是准确找出`boost::function`对象中存储的类型，以便您可以使用它。

# java - 计算文件中的数字总和？

> ID：13273908
> 
> 赞同：-2
> 
> 时间：2012-11-07T16:25:54.583
> 
> 标签：java, android, io

我想从 TextView 中的文件中显示所有价格的总和（例如 £18.99 £50 等），目前它只是读取/显示文件中的最后价格。

这是我当前写入文件的代码：

```
total.setText(total.getText());                            
        try {
            FileOutputStream fos = openFileOutput("TotalSavings", Context.MODE_PRIVATE);
            fos.write(total.getText().toString().getBytes());
            fos.close();
        } catch (Exception e) {
            e.printStackTrace();
        } 
```

这是我当前用于读取文件的代码（成员 burmat 建议进行一些更改）：

```
public void savingstotalbutton(View view) {

        double total = 0;

        try {
            BufferedReader inputReader = new BufferedReader(new InputStreamReader(
                    openFileInput("TotalSavings")));
            String inputString;
            @SuppressWarnings("unused")
            StringBuffer stringBuffer = new StringBuffer();                
            while ((inputString = inputReader.readLine()) != null) {

                if (inputString.length() > 0) {
                String line = inputString.replaceAll("[^0-9.]", "");
                total = total + Double.parseDouble(line);
                }
            }
            savingstotaltext.setText(String.valueOf(total));
        } catch (IOException e) {
            e.printStackTrace();
        }               
    } 
```

任何帮助表示赞赏。

**编辑：** 我手动修改了 TotalSavings.txt 的内容并添加了不同的价格并将其复制到应用程序的 /files 文件夹中。它读取所有价格并给出有效的总和，但问题是写入函数覆盖了第一行，它永远不会进入下一行。

**编辑 2：**使用 calc 按钮显示计算并将结果写入文件 TotalSavings.txt 的整个代码

```
public void calc(View view) {
        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(view.getWindowToken(), 0);
        if (price.getText().toString().equals(""))
            return;
        if (disc.getText().toString().equals(""))
            return;
        double priceVal = Double.parseDouble(price.getText().toString());
        double discVal = Double.parseDouble(disc.getText().toString());
        double discount = priceVal / 100.0 * discVal;
        int di = (int) (discount * 100);
        double totalVal = priceVal - (di / 100.0);
        NumberFormat nf = NumberFormat.getCurrencyInstance(Locale.getDefault());
        savings.setText(nf.format(discount));
        total.setText(nf.format(totalVal));

        savings.setText(savings.getText());                            
        try {
            FileOutputStream fos = openFileOutput("TotalSavings", Context.MODE_PRIVATE);
            fos.write(savings.getText().toString().getBytes());         
        fos.close();
        } catch (Exception e) {
            e.printStackTrace();
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:31:28.773

我认为你不需要这条线

```
String line = inputString.replaceAll("[^0-9.]", ""); 
```

相反，你必须说

```
String line = inputString; 
```

它必须为你工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T13:42:40.423

写入文件的问题的答案是每次写入文件时，您都在重写之前的内容，您需要做的是更改

```
FileOutputStream fos = openFileOutput("TotalSavings", Context.MODE_PRIVATE) 
```

到：

```
FileOutputStream fos = openFileOutput("TotalSavings", Context.MODE_PRIVATE | Context.MODE_APPEND) 
```

这告诉 android 你想要附加到文件并保持它的私密性。

*编辑* 您的新问题是因为您将文本直接放在其他文本之后，您想在文件中强制换行。最简单的方法是：

```
String totalFromField = total.getText().toString() + "\n";
fos.write(totalFromField.getBytes()); 
```

# android - 改变图像质量（不改变分辨率）

> ID：13273909
> 
> 赞同：0
> 
> 时间：2012-11-07T16:26:01.297
> 
> 标签：android, linux, image, bash, imagemagick

我找到了这个命令

以改进的质量调整图像大小：

```
$ convert input.png -colorspace RGB +sigmoidal-contrast 11.6933 \ 
-define filter:filter=Sinc -define filter:window=Jinc -define filter:lobes=3 \ 
-resize 400% -sigmoidal-contrast 11.6933 -colorspace sRGB output.png 
```

但我需要别的东西，我需要一个命令来降低图像质量。例如，如果 input.png 是 100pix x 100pix 分辨率和 100KB 大小，我想制作一个具有相同分辨率但质量较低的 output.png 图像，比如说 50KB

我怎样才能做到这一点 ？

（我最初的问题是限制为 50KB 的图像，我想做的就是将我所有的图像转换为 50KB 以下的大小）。

我希望这很容易解决，但我自己无法解决。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:32:50.007

只需将图像转换为较低的采样率。ImageMagick 有一篇关于[转换](http://www.imagemagick.org/Usage/transform/#pixelate)的文章，其中涵盖了一些选项。

```
convert input.png -sample 25% -scale 400% output.png 
```

结果：

```
input.png  PNG 640x480 640x480+0+0 8-bit sRGB 256c 27.4KB 0.000u 0:00.000
output.png PNG 640x480 640x480+0+0 8-bit sRGB 225c 6.58KB 0.000u 0:00.000 
```

![输入.png](../Images/8e72ac2c718a90a6cad9883d90140ee9.png)输入.png

![输出.png](../Images/583380dc526bd0b4333b780bc296c526.png)输出.png

# algorithm - 用户活动算法

> ID：13273913
> 
> 赞同：1
> 
> 时间：2012-11-07T16:26:19.057
> 
> 标签：algorithm

我不确定这是否是问这个问题的正确地方。在这里，我正在寻找计算游戏的用户活动分数。

考虑一下：

1.  用户 A 想要攻击用户 B...Z
2.  用户 B....Z 可以攻击任何用户 A...Z

我需要一种将用户 B...Z**排序**为用户 A 的方法，这样他们就可以选择攻击谁。我们希望确保每个人都能玩这款游戏。这意味着每个用户都被宣传为用户 A 的潜在对手，基于以下因素确定的分数：

1.  用户 B...Z 已经被攻击（这个用户的分数应该下降，因为我们要显示没有被攻击的人）
2.  用户 B...Z 响应攻击（该用户的分数应该增加，因为他们实际上正在玩游戏）

计算这样一个分数的最简单算法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T16:10:10.260

最简单的算法是一个简单的公式：

排名 = weight1 * TimesResponded - weight2 * TimesAttacked

其中两个权重都是正常数，您可以对其进行调整以稍微改变游戏玩法。

# c# - net.mail 和 web.mail 与 gmail

> ID：13273914
> 
> 赞同：1
> 
> 时间：2012-11-07T16:26:20.370
> 
> 标签：c#, email

我想知道，如果我可以使用`System.Net.Mail`465 端口和`System.Web.Mail`587 端口。例如对于 gmail，我不能在这个例子中切换端口，因为它会抛出传输协议异常......

```
using web = System.Web.Mail;
using net = System.Net.Mail;

private void SendMail()
{
    web.MailMessage webMail = new web.MailMessage();
    webMail.To = "MAILTO@gmail.com";
    webMail.From = "MAILFROM@gmail.com";

    webMail.Fields.Add("http://schemas.microsoft.com/cdo/configuration/sendusing", "2");
    webMail.Fields.Add("http://schemas.microsoft.com/cdo/configuration/smtpusessl", "true");            
    webMail.Fields.Add("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate", "1");
    webMail.Fields.Add("http://schemas.microsoft.com/cdo/configuration/sendusername", "LOGIN");
    webMail.Fields.Add("http://schemas.microsoft.com/cdo/configuration/sendpassword", "PASSWORD");
    webMail.Fields.Add("http://schemas.microsoft.com/cdo/configuration/smtpserverport", 465);
    web.SmtpMail.SmtpServer = "smtp.gmail.com";
    web.SmtpMail.Send(webMail);

    net.SmtpClient smtp = new net.SmtpClient();
    smtp.UseDefaultCredentials = false;
    smtp.Credentials = new System.Net.NetworkCredential("LOGIN", "PASSWORD");
    smtp.Port = 587;
    smtp.Host = "smtp.gmail.com";
    smtp.EnableSsl = true;

    var netMail = new net.MailMessage(new net.MailAddress("MAILFROM@gmail.com", "", System.Text.Encoding.UTF8),
                                      new net.MailAddress("MAILTO@gmail.com", "", System.Text.Encoding.UTF8));

    smtp.Send(netMail); 
} 
```

我在问，因为即使是最简单的第二个`Net.Mail`也无法在 .Net 2.0 构建中的俄语 Win 7 64x 下发送 - 它会引发有关标题中无效字符的异常......并且 We.Mail 按预期工作。但是我不想用...

# asp.net - asp.net 为表单添加值的方法

> ID：13273915
> 
> 赞同：0
> 
> 时间：2012-11-07T16:26:21.623
> 
> 标签：asp.net

基本上我想在表单操作方法中放置一个 url。

ltlUrl.text 值在 pageLoad 中添加到服务器端。如何使用 ltlUrl 作为操作方法？

```
 <form action="<%# ltlurl.text%>" enctype="multipart/form-data">
        <input type="text" name="title" value="test" />
        <input type="file" name="file" />
        <input type="submit" />

    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:50:53.213

由于您在后面的代码中填充文本控件，因此您可以简单地执行以下操作：

```
this.Page.Form.Action = "http://someour"; 
```

我相信 VB.NET 语法将是：

```
Me.Page.Form.Action = "http://someurl" 
```

# oop - 何时应该将代码块提取到私有方法

> ID：13273918
> 
> 赞同：1
> 
> 时间：2012-11-07T16:26:30.797
> 
> 标签：oop

当我编写一个方法时，我尝试将该方法中的代码块提取到私有方法中。

例如，如果我需要转换其中一个输入参数，我会创建一个私有方法来接受参数值并返回转换后的值。我从“main”方法的主体中调用这个私有方法——本质上，我尝试将转换操作封装在私有方法中并适当地命名该方法。

我真的在寻找人们是否认为这种通用方法是个好主意的答案。我从其他开发人员那里得到了不同的反馈，其中一些人赞成将所有代码保留在一种方法中。我认为小型私有方法封装了这些单一任务，他们认为如果代码保留在一个方法中，则类会保持清洁。

很高兴从社区获得一些关于您认为哪种方法反映了更好的设计或更符合 OOP 原则的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:46:34.563

我通常出于多种原因这样做：

*   它有助于重用。
*   它使方法具有单一的职责。这反过来又使他们很容易传达他们的目的。我认为[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)不仅适用于类，也适用于方法。
*   它使方法易于阅读和理解。我的方法一般不超过 6 或 7 行。
*   它使以后重构它们变得容易（例如，如果您需要将某些行为解耦到另一个对象中，这在系统发展时很常见）。

作为一般的经验法则，我使用必须在方法体中添加注释来解释正在发生的事情是一种气味，这意味着它可以被重构为更小的部分。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:36:20.670

简而言之，这通常是一个好主意。

有关更多信息，请查看来自 DeveloperWorks的 Neal Ford 的[Composed Method文章。](http://www.ibm.com/developerworks/java/library/j-eaed4/index.html)在本文中，Neal 说明了如何重构私有方法，从而隔离适合重用的代码区域。

> 这个练习真正重要的好处是能够收集可重用的代码。查看清单 1 中的代码时，您看不到可重用资产；你只看到一堆代码。通过将 olio 方法分开，我发现了可重用资产。但其优势不仅仅在于重用。我还为处理应用程序中的持久性的简单框架奠定了基础。当需要创建另一个简单的边界类来从数据库中获取一些实体时，我已经有代码可以帮助我做到这一点。这是提取框架而不是在象牙塔中构建框架的本质。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T16:30:04.563

一般来说，您应该在更多地方放入您需要的方法代码（为了不重复自己）。

如果一个方法很长，将代码放入其他方法中也是有意义的，那么将其拆分为多个方法可能是有意义的。

# apache-flex - Flex：alternatingRowColors alpha 颜色

> ID：13273923
> 
> 赞同：1
> 
> 时间：2012-11-07T16:26:43.020
> 
> 标签：apache-flex, datagrid, colors, alpha

如何在flex 4.6 spark DataGrid中设置alternatingRowColors alpah颜色

**回答：**

Tnx 到 www.Flextras.com 我找到了它：

在 DataGrid 皮肤中需要`prepareGridVisualElement`像这样覆盖：

```
public function prepareGridVisualElement(grid:Grid, rowIndex:int, columnIndex:int):void
{
    const dataGrid:DataGrid = grid.dataGrid;
    if (!dataGrid)
        return;

    const colors:Array = dataGrid.getStyle("alternatingRowColors");
    rowBackgroundFillColor.alpha = rowIndex % 2 == 0 ? 0 : 0.25;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:48:30.880

使用[alternatingRowColors](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/DataGrid.html#styleSummary)或样式。

引用文档：

> 用于初始化 DataGrid 的 rowBackground 皮肤部分。如果指定了alternatingRowColors 样式，则使用alternatingRowColorsBackground 皮肤部件作为rowBackground 皮肤部件的值。网格行的交替颜色由此样式的 Array 值中的连续条目定义。
> 
> 如果要更改此样式的呈现方式，请替换 DataGridSkin 类中的 alternateRowColorsBackground 皮肤部分。如果要为每一行指定背景，则直接初始化 rowBackground 皮肤部分。默认值未定义。

# c++ - 使用 googlemock 模拟正在测试的函数的内部调用

> ID：13273924
> 
> 赞同：1
> 
> 时间：2012-11-07T16:26:47.253
> 
> 标签：c++, unit-testing, googlemock

我是 Google Mock 的新手，根据我对文档和在线资源的理解，我无法找到解决问题的方法：

我有以下课程：

```
class A
{
    public:
        A() { }
        int fun1()
        {
            //Some code
            B b;
            x = b.fun2();
            //Some other code
        }
};
class B
{
    public:
        B() { }
        int fun2()
        {
            //Some code
            y = C::fun3();
            //Some code
        }
};
class C
{
    public:
        static int fun3()
        {
            //Read a file and provide success if a certain pattern is found
        }
}; 
```

现在我正在尝试为 A::fun1() 编写 Google 测试。但是由于代码的结构（所有调用都是通过对象进行的，并且我没有可以使用它来初始化模拟等的基类，所以我无法成功模拟它。

有人可以帮助我了解这是否可以用当前形式的 Google Mock 进行模拟？请注意，我不允许更改原始源代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:49:41.140

只要可以使用静态接口（即模板参数）配置被测类，您就可以这样做。有关更多信息，请参见此处：[模拟非虚拟方法](https://github.com/google/googletest/blob/master/googlemock/docs/CookBook.md#mocking-nonvirtual-methods)。

另一种选择可能是在您的测试类中引入包装器接口，可以像往常一样模拟：[Alternative to Mocking Concrete Classes](https://github.com/google/googletest/blob/master/googlemock/docs/CookBook.md#alternative-to-mocking-concrete-classes)。

如果您无法更改任何代码，恕我直言，这是不可能的。

**更新**：只要`class B`在里面实例化，无论如何`A::fun1()`都很难模拟。`B`它应该作为参数传递，因此您有机会控制测试方法中的实例化。

对您来说可能是一个可行的解决方案，可能是欺骗构建环境进行测试，并提供一个声明和定义来`class B`提供一个模拟。

# c++ - C++ 错误 C2653 'Class' 不是类或命名空间名称

> ID：13273926
> 
> 赞同：8
> 
> 时间：2012-11-07T16:26:55.493
> 
> 标签：c++, class

下午好。我已经开始学习 c++，并且我正在编译我的项目。如果你发现一些错误的代码，如果你告诉我，我会很高兴。

我有以下定义：

**实用程序.h**

```
#include "stdafx.h"
#include <string>
using namespace std;

class Utils
{
public:
static string GetStringFromInt (int number);
}; 
```

**实用程序.cpp**

```
#include "Utils.h"
#include <sstream>
#include <string>
using namespace std;

 string Utils::GetStringFromInt (int number)
{

    stringstream ss;
    ss << number;
    return ss.str();
} 
```

和

**平.h**

```
#include "stdafx.h"
#include <string>

using namespace std;

class Ping
{
public:
    static int PingIt(int argc, char* argv[],string &mstime,string &ttl);   
}; 
```

**ping.cpp**

```
#include "Ping.h"
#include <string>
#include "icmpdefs.h"
#include <string>
#include <iostream>
#include <sstream>
#include <WinSock.h>
#include <Windows.h>
#include "Utils.h"
#pragma comment(lib,"wsock32.lib")
using namespace std;

int Ping::PingIt(int argc, char* argv[],string &mstime,string &ttl)
{

    // Check for correct command-line args
    if (argc < 2) {
        cerr << "usage: ping <host>" << endl;
        return 1;
    }

    // Load the ICMP.DLL
    HINSTANCE hIcmp = LoadLibrary("ICMP.DLL");
    if (hIcmp == 0) {
        cerr << "Unable to locate ICMP.DLL!" << endl;
        return 2;
    }

    // Look up an IP address for the given host name
    struct hostent* phe;
    if ((phe = gethostbyname(argv[1])) == 0) {
        cerr << "Could not find IP address for " << argv[1] << endl;
        return 3;
    }

    // Get handles to the functions inside ICMP.DLL that we'll need
    typedef HANDLE (WINAPI* pfnHV)(VOID);
    typedef BOOL (WINAPI* pfnBH)(HANDLE);
    typedef DWORD (WINAPI* pfnDHDPWPipPDD)(HANDLE, DWORD, LPVOID, WORD,
            PIP_OPTION_INFORMATION, LPVOID, DWORD, DWORD); // evil, no?
    pfnHV pIcmpCreateFile;
    pfnBH pIcmpCloseHandle;
    pfnDHDPWPipPDD pIcmpSendEcho;
    pIcmpCreateFile = (pfnHV)GetProcAddress(hIcmp,
            "IcmpCreateFile");
    pIcmpCloseHandle = (pfnBH)GetProcAddress(hIcmp,
            "IcmpCloseHandle");
    pIcmpSendEcho = (pfnDHDPWPipPDD)GetProcAddress(hIcmp,
            "IcmpSendEcho");
    if ((pIcmpCreateFile == 0) || (pIcmpCloseHandle == 0) || 
            (pIcmpSendEcho == 0)) {
        cerr << "Failed to get proc addr for function." << endl;
        return 4;
    }

    // Open the ping service
    HANDLE hIP = pIcmpCreateFile();
    if (hIP == INVALID_HANDLE_VALUE) {
        cerr << "Unable to open ping service." << endl;
        return 5;
    }

    // Build ping packet
    char acPingBuffer[64];
    memset(acPingBuffer, '\xAA', sizeof(acPingBuffer));
    PIP_ECHO_REPLY pIpe = (PIP_ECHO_REPLY)GlobalAlloc(
            GMEM_FIXED | GMEM_ZEROINIT,
            sizeof(IP_ECHO_REPLY) + sizeof(acPingBuffer));
    if (pIpe == 0) {
        cerr << "Failed to allocate global ping packet buffer." << endl;
        return 6;
    }
    pIpe->Data = acPingBuffer;
    pIpe->DataSize = sizeof(acPingBuffer);      

    // Send the ping packet
    DWORD dwStatus = pIcmpSendEcho(hIP, *((DWORD*)phe->h_addr_list[0]), 
            acPingBuffer, sizeof(acPingBuffer), NULL, pIpe, 
            sizeof(IP_ECHO_REPLY) + sizeof(acPingBuffer), 5000);
    if (dwStatus != 0) {
        cout << "Addr: " <<
                int(LOBYTE(LOWORD(pIpe->Address))) << "." <<
                int(HIBYTE(LOWORD(pIpe->Address))) << "." <<
                int(LOBYTE(HIWORD(pIpe->Address))) << "." <<
                int(HIBYTE(HIWORD(pIpe->Address))) << ", " <<
                "RTT: " << int(pIpe->RoundTripTime) << "ms, " <<
                "TTL: " << int(pIpe->Options.Ttl) << endl;

        mstime = Utils::GetStringFromInt((pIpe->RoundTripTime));
        ttl = Utils::GetStringFromInt(int(pIpe->Options.Ttl));
    }
    else {
        cerr << "Error obtaining info from ping packet." << endl;
    }

    // Shut down...
    GlobalFree(pIpe);
    FreeLibrary(hIcmp);
    return dwStatus;
} 
```

当我编译项目时，我得到：

**错误 1 ​​错误 C2653：“Ping”：不是类或命名空间名称 c:\users\claderasm\documents\visual studio 2010\projects\landetestconsole\landecplusconsole\ping.cpp 14 1 LandeCplusConsole**

我读过有时会抛出此错误，因为您没有在第一个#include 中包含“stdafx.h”，但我已经更改了它。

如果你能告诉我更多的话，我会很高兴

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T07:00:56.750

我无法使用您提供的代码重现您的错误，但我在 VS2008 上进行了尝试，它提出的一些警告让我认为这很可能是由于您的预编译头文件未包含在源代码中。我可以看到还有一些其他问题肯定会在以后给您带来问题：

*   **不要在 .h 中包含预编译的标头**。（好吧，除非绝对必要，否则您甚至应该避免在 .h 中包含任何内容）。预编译的标头（至少在视觉上做事的方式）意味着首先包含在每个 cpp 文件中（不是 .h）。如果您不这样做，它将针对您拥有的每个包含发出警告：

    **警告 C4627** : '#include "Ping.h"': 在查找预编译头文件时跳过使用 <- 你去你的 Point 类不再定义！

    最后是一个错误**致命错误 C1010**：在查找预编译头时文件意外结束。您是否忘记将 '#include "stdafx.h"' 添加到您的源代码中？

    这实际上是我在 VS2008 上编译代码时收到的消息，也许在 VS2010 上，除了这些之外，您还有关于 Point 未定义的错误。当整理出预编译的头文件问题时，它编译得很好（见下一点）

*   使用预编译头文件并不意味着用于构建它的 .h 将自动包含在所有源代码中。为此，您必须更改一些项目设置：**右键单击**您的项目 -> **Properties**，在左侧面板中展开**Configuration Properties -> C/C++ -> Advanced**。在右侧的列表中，您应该看到**Force Includes**。在此处键入 stdafx.h，然后瞧，您不必手动将其放入添加到项目中的每个新 .cpp 中。请注意，您必须对所有配置执行此操作（顶部的组合框写有“配置：活动（调试）”

抱歉，还是VS2008的屏幕，希望VS2010也一样 ![在此处输入图像描述](../Images/50989a89a80e1df053c89a23456bea8f.png)

*   **保护你的标题**。当同一 .h 的多个包含发生时（并且会发生），您应该在标题上加注以避免您的类的多个定义。您可以通过两种方式进行操作：define 方法和 pragma once 方法。pragma once 不是标准的，但在 Visual 上编译速度更快，因此您最终可以混合使用这两种方式。

myheader.h 使用编译指示一次：

```
#pragma once
class MyClass
{
    //<some definitions>
}; 
```

myheader.h 使用定义：

```
#ifndef __MYHEADER_H
#define __MYHEADER_H
class MyClass
{
    //<some definitions>
};
#endif 
```

myheader.h 同时使用：

```
#pragma once
#ifndef __MYHEADER_H
#define __MYHEADER_H
class MyClass
{
    //<some definitions>
};
#endif 
```

*   已经说过了，但要**避免在标题中使用“使用”，**因为它会传播。我自己避免在任何地方使用“使用”。

# c++ - 多维数组的目的是什么？

> ID：13273928
> 
> 赞同：2
> 
> 时间：2012-11-07T16:27:03.973
> 
> 标签：c++, arrays, 2d

我有几个关于多维数组的问题。我了解如何为他们分配内存，但我不明白为什么需要（除了让事情更具可读性）。

数组的`[]`运算符重载了，对吧？那么，为什么不能分配单个内存块并授予访问权限`1dArray[i*nInRow][offset]`？

通过在多个维度中使用数组是否有进一步的性能提升？此外，当为二维数组动态分配内存时，它们是存储在连续的位置，还是分散在堆周围？当请求数据时，我可以假设所有内容都是作为一个块从内存中提取的吗？

我看到的大部分信息都只是解释了语法。任何答案或建议阅读都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:29:52.003

> 数组的 [] 运算符重载了，对吧？那么，为什么不能通过 1dArray[i*nInRow][offset] 分配单个内存块并授予访问权限？

它可以，事实上我会在一般情况下推荐这个。

> 通过在多个维度中使用数组是否有进一步的性能提升？

并不真地。根据您的布局，您可以优化缓存命中，但对于展平的一维数组也是如此。两者之间的内存布局（通常）完全相同。唯一的区别是数组的语义*类型*以及您现在必须自己实现 2D 元素查找这一事实。

> 此外，当为二维数组动态分配内存时，它们是存储在连续的位置，还是分散在堆周围？当请求数据时，我可以假设所有内容都是作为一个块从内存中提取的吗？

数组总是连续的。

尽管您*实际上是*在分配 2D 数组，但您应该小心。有些人编写`int** ptr = new int*[2]`然后手动分配每个“子数组”，并认为他们有一个二维数组。他们不。他们有一个指针数组，*这就是*你得到“分散”布局的时候。您的二维数组是`int (*ptr)[3] = new int[2][3];`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:31:30.783

首先，存在多维问题。其次，如果多维问题是“稀疏的”，分配 99*99*99*99*...*99 个元素是没有意义的，而只是指向下一级结构的指针，这些结构被巧妙的语法数组隐藏 [ n][i][j][k]...

例如，虚拟内存和页表在现代操作系统和 CPU 中以这种方式运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T16:31:35.060

二维数组有两种类型：

1）所有内存都在一个大块中的那种，和

2）每一行（或每一列）都是连续的，但各个行分散在周围，并且您有一个指向每一行的指针数组。

如果您想要执行某些操作（例如交换行），Type #2 具有更好的性能，因为您所要做的就是交换两个指针。

# c# - c#任务在它们之间没有睡眠就无法工作

> ID：13273929
> 
> 赞同：3
> 
> 时间：2012-11-07T16:27:04.430
> 
> 标签：c#, multithreading, task

我在 c# 中使用 Task 在多线程中通过 FTP 发送文件。

这是我的函数（文件是字符串列表）

```
 Task<bool>[] result = new Task<bool>[file.Count];
        int j = 0;
        foreach (string f in file)
        {  
            result[j] = new Task<bool>(() => ftp.UploadFtp(f, "C:\\Prova\\" + f + ".txt", j));
            result[j].Start();
            j++;

            //System.Threading.Thread.Sleep(50);

        }
        Task.WaitAll(result, 10000); 
```

以及上传文件的功能

```
public static bool UploadFtp(string uploadFileName, string localFileName, int i)
    {
        FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://127.0.0.1/" + uploadFileName + ".txt");
        //settare il percorso per il file da uplodare
        //FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://desk.txt.it/");
        request.Method = WebRequestMethods.Ftp.UploadFile;

        request.Credentials = new NetworkCredential("ftp_admin", "");
        //request.Credentials = new NetworkCredential("avio", "avio_txt");
        try
        {
            Console.WriteLine(uploadFileName);
            Console.WriteLine(i);
            StreamReader sourceStream = new StreamReader(localFileName);
            byte[] fileContents = File.ReadAllBytes(localFileName);

            sourceStream.Close();
            request.ContentLength = fileContents.Length;

            Stream requestStream = request.GetRequestStream();
            requestStream.Write(fileContents, 0, fileContents.Length);
            requestStream.Close();

            FtpWebResponse response = (FtpWebResponse)request.GetResponse();

            //MessageBox.Show("Upload File Complete, status {0}", response.StatusDescription);

            response.Close();
            return true;
        }
        catch (Exception e)
        {
            return false;
        }

    } 
```

以这种方式，程序总是尝试保存列表的最后一个文件，但如果我添加一个 Sleep(50) 它会正确上传文件。似乎只有当我不使用睡眠时，程序才会启动 4 个任务做同样的工作（保存最后一个文件），但我不明白为什么，也不知道如何解决这个问题。

有人能帮我吗？谢谢你

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T16:31:04.670

看看你的代码：

```
int j = 0;
foreach (string f in file)
{  
    result[j] = new Task<bool>(() => ftp.UploadFtp(f, "C:\\Prova\\" + f + ".txt", j));
    result[j].Start();
    j++;
} 
```

lambda 表达式在执行时使用*当前值`j`*。因此，如果任务在 增加后开始，*您*`j`将错过您想要的值。

在 C# 4 中，您会遇到同样的问题`f`- 但这已在 C# 5 中得到修复。有关更多详细信息，请参阅 Eric Lippert 的博客文章[“关闭被认为有害的循环变量”](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)。

最小的修复是微不足道的：

```
int j = 0;
foreach (string f in file)
{  
    int copyJ = j;
    string copyF = f;
    result[j] = new Task<bool>(
         () => ftp.UploadFtp(copyF, "C:\\Prova\\" + copyF + ".txt", copyJ));
    result[j].Start();
    j++;
} 
```

现在什么都不会改变`copyJ`，并且`copyF`- 您将在循环的每次迭代中捕获一个单独的变量。在 C# 5 中，您不需要`copyF`，而可以直接使用`f`。

...但我也建议使用`Task.Factory.StartNew()`, （或`Task.Run`在 .NET 4.5 中）或只是`Parallel.For`.

# android - 从 Activity 传递 int 以扩展 ImageView 类

> ID：13273930
> 
> 赞同：-6
> 
> 时间：2012-11-07T16:27:04.290
> 
> 标签：android, android-activity

我正在拼命地尝试从扩展 ImageView 的 Activity 类（我正在修改标准 ImageView 的类）传递一个 int。这似乎相当困难。到目前为止，我已经尝试过：

*   通过 SharedPreference 传递它，语法错误（无应用程序上下文）
*   将其作为意图传递（不能在扩展 ImageView 中 getIntent()
*   将其作为对象传递（getApplication() 处的语法错误）

我想知道是否有任何可能的方法将 Activity 类中的 int 传递给扩展 ImageView 的类。我没有上面列出的解决方案的代码，但我已经从 Activity 到 Activity 尝试了它们。有没有办法通过这个int？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:45:08.603

我想您在代码中的某处初始化这个“扩展 ImageView”类并用它来膨胀布局？IE：

```
CustomImageView myImageView = new CustomImageView();
[...]
yourRootView.addView(myImageView); 
```

如果是这样，您可以在初始化时传递 int ：

```
CustomImageView myImageView = new CustomImageView(yourInt); 
```

与您的 CustomImageView.class 在 cunstructor 中捕获它：

```
public CustomImageView(int yourInt) {
    Log.i("Hello", "This is the int your were looking for" + yourInt); 
```

另一种方法是在您的 CustomImageView.class 中设置一个 setter/getter

```
private yourInt;

public void setInt(int yourInt) {
    this.yourInt = yourInt;
} 
```

然后，您可以从您的活动中执行以下操作：

```
CustomImageView myImageView = new CustomImageView();
myImageView.setInt(yourInt); 
```

抱歉，如果这不能回答您的问题，您提供的信息很少，所以我不得不猜测（*编辑，我找不到“评论”按钮来...评论）

**编辑**

您的活动课程：

```
class MyActivtiy extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_someactivity);

        MyImageView myImageView = new MyImageView(2); // 2 is our Example Integer

        //**Alternative** - Needs setInger(int someInt) in ImageView class (see below)
        myImageView.setInteger(4);
    }
} 
```

你的 ImageView 类

```
class MyImageView extends ImageView {

    Int anInteger;

    public MyImageView(int anInteger) {
         Log.i("Hello", "The integer is: " + anInteger);
         // Above line will show in Logcat as "The integer is: 2
         this.anInteger = anInteger;
         // Above line will set anInteger so you can use it in other methods
    }

    public void printIntToLogCat() {
        Log.i("Hello", "You can use the integer here, it is: "  + anInteger);
        // Above line in logcat: "You can [...], it is: 2"
    }

    //**Alternative**
    public void setInteger(int someInt) {
       this.anInteger = someInt;  // With above example this will set anInteger to 4
       printIntToLogCat();
       // Above Line will print: "You can[...], it is: 4"
    }
} 
```

# java - 调用 setString 时是否可以避免 Hibernate 使用单引号？

> ID：13273933
> 
> 赞同：0
> 
> 时间：2012-11-07T16:27:13.900
> 
> 标签：java, hibernate

我正在使用 Hibernate，并且我在 HBM 文件中配置了一个带有一个参数的 SQL 查询。我想为这个参数设置一些值，比如一个表达式，但是 Hibernate 用单引号将值括起来。

例子：

```
<sql-query name="myQuery">
    select A,B from table where A in (:words)
</sql-query>

hibernateSession.getNamedQuery("myQuery").setString("words", "soundex('someWord1'), soundex('someWord2')");

// As a result:

select A,B from table where A in ('soundex('someWord1'), soundex('someWord2')') 
```

所以它不起作用！我想得到以下结果：

```
hibernateSession.getNamedQuery("myQuery").setString("words", "soundex('someWord1'), soundex('someWord2')");
=> select A,B from table where A in (soundex('someWord1'), soundex('someWord2')) 
```

是否可以使用在 hbm 文件中配置的 SQL 查询？

谢谢

# php - 正则表达式验证 4 位和 5 位数字？

> ID：13273938
> 
> 赞同：1
> 
> 时间：2012-11-07T16:27:34.300
> 
> 标签：php, regex

我有这个正则表达式：

```
if(preg_match("@^\d{4}$@", basename($entry, ".php"))) {
--do something here--
} 
```

该条件仅适用于 4 位数字。但我需要验证 4 位数字和 5 位数字。如何使其也可以验证 5 位数字？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T16:28:54.000

大括号可以采用范围的低端和高端，所以`{4,5}`应该可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T16:30:49.133

作为正则表达式的替代方法，请考虑使用更简单的函数，例如[`ctype_digit()`](http://php.net/manual/en/function.ctype-digit.php)和[`strlen()`](http://php.net/strlen)。

```
$filename = basename($entry, ".php");
$length = strlen($filename);

if (($length >= 4 && $length <= 5) && ctype_digit($filename)) {
  // your code
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T16:29:25.747

```
if(preg_match("@^\d{4,5}$@", basename($entry, ".php"))) {
--do something here--
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-07T16:29:42.893

代替

```
 if(preg_match("@^\d{4}$@", basename($entry, ".php"))) { 
```

采用

```
if(preg_match("@^\d{4,5}$@", basename($entry, ".php"))) { 
```

# objective-c - 以相反的顺序对 NSArray 进行排序

> ID：13273943
> 
> 赞同：12
> 
> 时间：2012-11-07T16:27:58.407
> 
> 标签：objective-c, ios, xcode

```
NSArray* sortedArray = [myArray sortedArrayUsingSelector:@selector(compare:)]; 
```

只是想知道如何按降序对这个数字数组进行排序？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-07T16:31:57.773

要么使用允许您将块作为比较器传递的方法，并实现一个反转对象的比较器（为 NSOrderedDescending 返回 NSOrderedAscending，反之亦然）....

... 或者：

```
NSArray *reversed = [[[myArray sortedArrayUsingSelector:@selector(compare:)] reverseObjectEnumerator] allObjects]; 
```

对不起。最重要的部分。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-07T16:33:41.887

利用`NSSortDescriptor`

```
NSSortDescriptor* sortOrder = [NSSortDescriptor sortDescriptorWithKey: @"self" ascending: NO];
NSArray *temp = [myArray sortedArrayUsingDescriptors: [NSArray arrayWithObject: sortOrder]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-01T03:53:57.893

我喜欢使用`sortedArrayUsingFunction:`可以完全控制数组排序方式的方法。然后反转结果返回您将返回的负值。

```
NSInteger myCompare (id obj1, id obj2, void *context) {
    int retval = [obj1 compare:obj2 options:NSNumericSearch];
    retval = -retval; // now it's sorted reverse
    return retval;
}

...

NSArray *arr = @[@"foo20zz", @"foo7zz", @"foo100zz"];
NSArray *sarr = [arr sortedArrayUsingFunction:myCompare context:NULL];
NSLog(@"sarr is %@", sarr); 
```

# java - 尝试在不同的类中使用 @transient 变量

> ID：13273944
> 
> 赞同：0
> 
> 时间：2012-11-07T16:28:04.127
> 
> 标签：java, hibernate

我正在开发一个使用 Hibernate 写入数据库的项目。

我有一个模型的抽象 POJO

**删除代码**

子类中没有什么特别的事情发生。但是我有一个控制器类，我正在尝试修改一些数据。我想使用瞬态变量，但它不让我。我在另一堂课上这样做

**删除代码**

然后我调用一个迭代器来获取数据库中的内容并将其添加到地图中。这一切都很好。

我的主要问题是，当我执行 temp.setDescription 时......它没有在 temp 对象中保存描述元素。因此它没有传递到地图。

有什么建议么？我希望我提供了足够的信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:17:59.607

您永远不会将“临时”放入地图中......您将项目放入地图中的唯一代码是：

```
computerMap.put(hardware.getUuid(), hardware); 
```

对于它是新对象的情况，您实例化一台新计算机并将其分配给`temp`not `hardware`，这样任何新计算机将永远不会进入地图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:54:59.240

我想到了。我的模型中的 hashCode 中没有我需要的变量。:)

# grid - 图片框在某些计算机上无法正确绘制

> ID：13273950
> 
> 赞同：1
> 
> 时间：2012-11-07T16:28:15.207
> 
> 标签：grid, size

我正在制作一个数学游戏，它涉及制作图表。在某些计算机上，它可以完美运行，但在某些计算机上，图形与图片框不匹配。它与屏幕分辨率无关，因为我尝试更改它没有任何区别。关于为什么它不在每台计算机上绘制相同的任何想法？

这是绘制网格的代码。

```
private void PaintGrid()
    {
        for (int i=1;i<20;i++) { 
          // Draw grid rectangle into the buffer
          using (Graphics bufferGrph = Graphics.FromImage(buffer))
          {

            bufferGrph.DrawLine(new Pen(Color.Gray, 2), i * 30, 1, i * 30, 600);
            bufferGrph.DrawLine(new Pen(Color.Gray, 2), 1, i * 30, 600,i * 30);
          }
        }
        using (Graphics bufferGrph = Graphics.FromImage(buffer))
        {
            bufferGrph.DrawLine(new Pen(Color.CadetBlue, 5), 300, 1, 300, 600);
            bufferGrph.DrawLine(new Pen(Color.CadetBlue, 5), 1, 300, 600, 300);
        }

        // Invalidate the panel. This will lead to a call of 'panel1_Paint'
        panel1.Invalidate();
    } 
```

# ruby-on-rails-3 - Ubuntu - Apache - Rails - 乘客 - 生成错误

> ID：13273952
> 
> 赞同：0
> 
> 时间：2012-11-07T16:28:19.150
> 
> 标签：ruby-on-rails-3, ubuntu, apache2, passenger, spawning

我有乘客抱怨的错误：

```
*** Passenger ERROR (ext/common/ApplicationPool/../SpawnManager.h:220):
Could not start the spawn server: /usr/local/rvm/gems/ruby-1.9.3-head/ruby: No such file or directory (2)
[ pid=8970 thr=139698295748416 file=ext/apache2/Hooks.cpp:865 time=2012-11-07 17:17:32.422 ]: Unexpected error in mod_passenger: Cannot spawn application '/www/lensfinder.se/ruby/lensfinder': Could not read from the spawn server: Connection reset by peer (104)
  Backtrace:
     in 'virtual Passenger::SessionPtr Passenger::ApplicationPool::Client::get(const Passenger::PoolOptions&)' (Client.h:750)
     in 'Passenger::SessionPtr Hooks::getSession(const Passenger::PoolOptions&)' (Hooks.cpp:297)
     in 'int Hooks::handleRequest(request_rec*)' (Hooks.cpp:566) 
```

据我所知，它无法访问 /www/lensfinder.se/ruby/lensfinder 尽管它存在。

我在[Phusion 乘客网站上找到了这个常见问题解答](http://www.modrails.com/documentation/Users%20guide%20Apache.html#_the_apache_error_log_says_that_the_spawn_manager_script_does_not_exist_or_that_it_does_not_have_permission_to_execute_it)

问题是，当我尝试使用该命令时，

```
passenger-config --root 
```

我明白了：

```
-bash: /usr/bin/passenger-config: ruby: bad interpreter: No such file or directory 
```

阿帕奇配置：

```
LoadModule passenger_module /usr/local/rvm/gems/ruby-1.9.3-head/gems/passenger-3.0.12/ext/apache2/mod_passenger.so
   PassengerRoot /usr/local/rvm/gems/ruby-1.9.3-head/gems/passenger-3.0.12
   PassengerRuby /usr/local/rvm/wrappers/ruby-1.9.3-head/ruby

<VirtualHost 10.0.0.37:80>
    ServerAdmin webmaster@compartment.se
    DocumentRoot /www/lensfinder.se/htdocs
    ServerName lensfinder.se
Redirect 301 / http://www.lensfinder.se/
    ErrorLog /var/log/apache2/lensfinder.se-error.log
    CustomLog /var/log/apache2/lensfinder.se-access.log combined
</VirtualHost>
<VirtualHost 10.0.0.37:80>
    ServerAdmin hostmaster@compartment.se
    ServerName lensfinder.se
    ServerAlias www.lensfinder.se
    ServerAlias *.lensfinder.se
#   DocumentRoot /www/lensfinder.se/htdocs
    DocumentRoot /www/lensfinder.se/ruby/lensfinder/script
    <Directory />
        Options FollowSymLinks
        AllowOverride all
    </Directory>
    <Directory /www/lensfinder.se/htdocs>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        allow from all
    </Directory>
    ScriptAlias /cgi-bin/ /www/lensfinder.se/cgi-bin/
    <Directory "/www/lensfinder.se/cgi-bin">
        AllowOverride None
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        Order allow,deny
        Allow from all
        AllowOverride AuthConfig
#Options Includes
#Options FollowSymLinks
#Options +Indexes +Multiviews +FollowSymLinks
    </Directory>
    <Directory "/www/lensfinder.se/htdocs/usage">
        AllowOverride None
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        Order allow,deny
        Allow from all
        AllowOverride AuthConfig
#Options Includes
#Options FollowSymLinks
#Options +Indexes +Multiviews +FollowSymLinks
    </Directory>
    ErrorLog /var/log/apache2/lensfinder.se-error.log
    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn
    CustomLog /var/log/apache2/lensfinder.se-access.log combined
    Alias /doc/ "/usr/share/doc/"
    <Directory "/usr/share/doc/">
        Options Indexes MultiViews FollowSymLinks
        AllowOverride None
        Order deny,allow
        Deny from all
        Allow from 127.0.0.0/255.0.0.0 ::1/128
    </Directory>

Alias /ruby/ /www/lensfinder.se/ruby/lensfinder/script
        <Directory /www/lensfinder.se/ruby/lensfinder/script>
#       Options ExecCGI
#       AddHandler cgi-script .cgi
#       Addhandler fastcgi-script .fcgi .fcg .fpl
        AllowOVerride all
        Order allow,deny
        Allow from all
        </Directory>

<IfModule passenger_module>
   PassengerRoot /usr/local/rvm/gems/ruby-1.9.3-head/gems/passenger-3.0.12
   PassengerRuby /usr/local/rvm/gems/ruby-1.9.3-head/ruby
</IfModule>

RailsEnv production
RailsBaseURI /script

#
<Location />
# Insert filter
SetOutputFilter DEFLATE

# Netscape 4.x has some problems...
BrowserMatch ^Mozilla/4 gzip-only-text/html

# Netscape 4.06-4.08 have some more problems
BrowserMatch ^Mozilla/4\.0[678] no-gzip

# MSIE masquerades as Netscape, but it is fine
# BrowserMatch \bMSIE !no-gzip !gzip-only-text/html

# NOTE: Due to a bug in mod_setenvif up to Apache 2.0.48
# the above regex won't work. You can use the following
# workaround to get the desired effect:
BrowserMatch \bMSI[E] !no-gzip !gzip-only-text/html

# Don't compress images
SetEnvIfNoCase Request_URI \
\.(?:gif|jpe?g|png)$ no-gzip dont-vary

# Make sure proxies don't deliver the wrong content
#Header append Vary User-Agent env=!dont-vary
</Location>

</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:45:00.563

好的，我的猜测是您将Passenger 指向错误的目录。您应该将其指向`public`Rails 应用程序的目录。

这是您项目的极简配置`/etc/apache2/sites-available/lensfinder.se`：

```
<VirtualHost 10.0.0.37:80>
  ServerAdmin hostmaster@compartment.se
  ServerName lensfinder.se
  ServerAlias *.lensfinder.se

  DocumentRoot /www/lensfinder.se/ruby/lensfinder/public
  RailsEnv production

  <Directory "/www/lensfinder.se/ruby/lensfinder/public">
    Options FollowSymLinks
    AllowOverride All
    Options -MultiViews
  </Directory>

</VirtualHost> 
```

然后编辑`/etc/apache2/apache2.conf`并在文件末尾添加：

```
LoadModule passenger_module /usr/local/rvm/gems/ruby-1.9.3-head/gems/passenger-3.0.12/ext/apache2/mod_passenger.so
PassengerRoot /usr/local/rvm/gems/ruby-1.9.3-head/gems/passenger-3.0.12
PassengerRuby /usr/local/rvm/wrappers/ruby-1.9.3-head/ruby 
```

然后 simlink 您的虚拟主机配置以启用它：

```
ln -s /etc/apache2/sites-available/lensfinder.se /etc/apache2/sites-enabled/lensfinder.se 
```

当然重启apache2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T11:01:13.830

除了上[一个答案](https://stackoverflow.com/a/13274245/141881)之外，在我的情况下，即使在编辑配置文件之后，我仍然在加载 Apache 时遇到问题，因为该模块仍被配置为加载上一个（全局）`.so`文件。

我发现`/usr/local/rvm/gems/[YOUR-RUBY-VER]/gems/passenger-[YOUR-PASSENGER-VER]/ext/apache2/`目录中有源文件和脚本，但没有二进制文件。然而，提供了构建这些脚本的脚本。简单地运行`sudo /usr/local/rvm/gems/ruby-[YOUR-RUBY-VER]/gems/passenger-[YOUR-PASSENGER-VER]/bin/passenger-install-apache2-module`。

# asp.net - 黄屏死机只能在 IE 中工作

> ID：13273954
> 
> 赞同：3
> 
> 时间：2012-11-07T16:28:26.097
> 
> 标签：asp.net, iis-7, yellow-screen-of-death

**我继承了一个大型应用程序，每当发生异常时，我都会在Chrome**中看到乱码：

![在此处输入图像描述](../Images/c3be9731caa7cc0862469a74f184b9dd.png)

然而，在**IE**中，它按预期显示了黄屏死机：

![在此处输入图像描述](../Images/42c78efa83d34963e8ee14dd6e32cc68.png)

我无法弄清楚为什么会发生这种情况。会不会是编码问题？

**编辑**- 以下是请求和响应标头：

要求：

```
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:max-age=0
Connection:keep-alive
Cookie:.ASPXAUTH=5D3E8316B9AF0... [cut for brevity] 
Host:localhost:81
Referer: **************** [intentionally hidden]
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.96 Safari/537.4 
```

回复：

```
Cache-Control:private
Content-Length:6193
Content-Type:text/html; charset=utf-8
Date:Wed, 07 Nov 2012 16:42:15 GMT
Server:Microsoft-IIS/7.5
X-AspNet-Version:4.0.30319
X-Powered-By:ASP.NET 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:40:27.777

*尝试使用 Chrome 开发者工具（菜单工具*->*开发者工具*）调试这个案例。切换到*网络*选项卡并重新加载页面。现在单击左栏中的文件名并检查*Headers* -> *Response Headers* -> *content-type*的值*text/html*以及*content-encoding*的*gzip*。也许响应是压缩的，但在 http 标头中没有正确声明。

另请查看“*响应*”选项卡。内容是否有可读的 html 文档？

# sql - CRM 报表中的 SQL 查询

> ID：13273956
> 
> 赞同：3
> 
> 时间：2012-11-07T16:28:43.347
> 
> 标签：sql, dynamics-crm, dynamics-crm-2011, dynamic-sql

CRM 中的“案例”有一个名为“状态”的字段，其中包含四个选项。

我正在尝试在 CRM 中构建一个报告，该报告用一年中的每一周（每行是不同的一周）填充表格，然后计算具有每个状态选项的案例数量（列将是每个状态选项）。

桌子看起来像这样

```
 Status 1    Status 2    Status 3
Week 1       3         55          4
Week 2       5         23          5
Week 3       14        11          33 
```

到目前为止，我有以下内容：

```
SELECT 
    SUM(case WHEN status = 1 then 1 else 0 end) Status1,
    SUM(case WHEN status = 2 then 1 else 0 end) Status2,
    SUM(case WHEN status = 3 then 1 else 0 end) Status3,
    SUM(case WHEN status = 4 then 1 else 0 end) Status4,
    SUM(case WHEN status = 5 then 1 else 0 end) Status5
FROM [DB].[dbo].[Contact] 
```

这给了我以下信息：

```
Status 1   Status 2   Status 3  
   2         43          53 
```

现在我需要以某种方式将其拆分为过去一年的 52 行，并按日期过滤这些结果（联系人表中的列）。我对 SQL 查询和 CRM 有点陌生 - 这里的任何帮助将不胜感激。

这是我的进度和示例数据的 SQLFiddle：[http ://sqlfiddle.com/#!2/85b19/1](http://sqlfiddle.com/#!2/85b19/1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:17:54.760

听起来你想[按 range 分组](https://stackoverflow.com/questions/232387/in-sql-how-can-you-group-by-in-ranges)。诀窍是创建一个代表每个范围的新字段（每年为您一个）并按此分组。

由于您似乎还想要无限范围的日期，因此 marc_s 对如何以通用方式对日期进行分组有一个很好的总结：[SQL group by frequency within a date range](https://stackoverflow.com/questions/8640138/sql-group-by-frequency-within-a-date-range)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T04:30:58.833

所以，让我们分解一下：

您想要制作一份报告，为每个联系人每周显示注册到该联系人的案例数量的明细，该报表分为三列，每列一列`StateCode`。

如果是这种情况，那么您需要为每个联系人提供 52 条日期记录（左右）。对于类似日历的请求，最好有一个单独的日历表，让您从中查询。Dan Guzman 有一个[博客条目](http://weblogs.sqlteam.com/dang/archive/2010/07/19/calendar-table-and-datetime-functions.aspx "日历表和日期/时间函数")，它创建了一个有用的日历表，我将在查询中使用它。

```
WITH WeekNumbers AS
(
    SELECT
        FirstDateOfWeek,
         -- order by first date of week, grouping calendar year to produce week numbers
        WeekNumber = row_number() OVER (PARTITION BY CalendarYear ORDER BY FirstDateOfWeek)
    FROM
        master.dbo.Calendar -- created from script
    GROUP BY
        FirstDateOfWeek,
        CalendarYear
), Calendar AS
(
    SELECT
        WeekNumber =
        (
            SELECT
                WeekNumber
            FROM
                WeekNumbers WN
            WHERE
                C.FirstDateOfWeek = WN.FirstDateOfWeek
        ),
        *
    FROM
        master.dbo.Calendar C
    WHERE
        CalendarDate BETWEEN '1/1/2012' AND getutcdate()
)

SELECT
    C.FullName,
    ----include the below if the data is necessary
    --Cl.WeekNumber,
    --Cl.CalendarYear,
    --Cl.FirstDateOfWeek,
    --Cl.LastDateOfWeek,
    'Week: ' + CAST(Cl.WeekNumber AS VARCHAR(20))
    + ', Year: ' + CAST(Cl.CalendarYear AS VARCHAR(20)) WeekNumber
FROM
    CRM.dbo.Contact C
    -- use a cartesian join to produce a table list
    CROSS JOIN
        (
            SELECT
                DISTINCT WeekNumber,
                CalendarYear,
                FirstDateOfWeek,
                LastDateOfWeek
            FROM
                Calendar
        ) Cl
ORDER BY
    C.FullName,
    Cl.WeekNumber 
```

这与 Ben 链接到的解决方案不同，因为 Marc 的查询仅返回有匹配值的周数，而您可能希望也可能不希望查看没有活动的周数。

一旦您将核心联系人表按上述方式逐周拆分（或针对您的特定时间段进行更改），您可以简单地为每个人添加一个子查询，`StateCode`以查看列中的细分，如下面的最终查询所示。

```
WITH WeekNumbers AS
(
    SELECT
        FirstDateOfWeek,
        WeekNumber = row_number() OVER (PARTITION BY CalendarYear ORDER BY FirstDateOfWeek)
    FROM
        master.dbo.Calendar
    GROUP BY
        FirstDateOfWeek,
        CalendarYear
), Calendar AS
(
    SELECT
        WeekNumber =
        (
            SELECT
                WeekNumber
            FROM
                WeekNumbers WN
            WHERE
                C.FirstDateOfWeek = WN.FirstDateOfWeek
        ),
        *
    FROM
        master.dbo.Calendar C
    WHERE
        CalendarDate BETWEEN '1/1/2012' AND getutcdate()
)

SELECT
    C.FullName,
    --Cl.WeekNumber,
    --Cl.CalendarYear,
    --Cl.FirstDateOfWeek,
    --Cl.LastDateOfWeek,
    'Week: ' + CAST(Cl.WeekNumber AS VARCHAR(20)) +', Year: ' + CAST(Cl.CalendarYear AS VARCHAR(20)) WeekNumber,
    (
        SELECT
            count(*)
        FROM
            CRM.dbo.Incident I
            INNER JOIN CRM.dbo.StringMap SM ON
                I.StateCode = SM.AttributeValue
            INNER JOIN 
                (
                    SELECT
                        DISTINCT ME.Name,
                        ME.ObjectTypeCode
                    FROM
                        CRM.MetadataSchema.Entity ME
                ) E ON
                SM.ObjectTypeCode = E.ObjectTypeCode
        WHERE
            I.ModifiedOn >= Cl.FirstDateOfWeek 
            AND I.ModifiedOn < dateadd(day, 1, Cl.LastDateOfWeek)
            AND E.Name = 'incident'
            AND SM.AttributeName = 'statecode'
            AND SM.LangId = 1033
            AND I.CustomerId = C.ContactId
            AND SM.Value = 'Active'
    ) ActiveCases,
    (
        SELECT
            count(*)
        FROM
            CRM.dbo.Incident I
            INNER JOIN CRM.dbo.StringMap SM ON
                I.StateCode = SM.AttributeValue
            INNER JOIN 
                (
                    SELECT
                        DISTINCT ME.Name,
                        ME.ObjectTypeCode
                    FROM
                        CRM.MetadataSchema.Entity ME
                ) E ON
                SM.ObjectTypeCode = E.ObjectTypeCode
        WHERE
            I.ModifiedOn >= Cl.FirstDateOfWeek 
            AND I.ModifiedOn < dateadd(day, 1, Cl.LastDateOfWeek)
            AND E.Name = 'incident'
            AND SM.AttributeName = 'statecode'
            AND SM.LangId = 1033
            AND I.CustomerId = C.ContactId
            AND SM.Value = 'Resolved'
    ) ResolvedCases,
    (
        SELECT
            count(*)
        FROM
            CRM.dbo.Incident I
            INNER JOIN CRM.dbo.StringMap SM ON
                I.StateCode = SM.AttributeValue
            INNER JOIN 
                (
                    SELECT
                        DISTINCT ME.Name,
                        ME.ObjectTypeCode
                    FROM
                        CRM.MetadataSchema.Entity ME
                ) E ON
                SM.ObjectTypeCode = E.ObjectTypeCode
        WHERE
            I.ModifiedOn >= Cl.FirstDateOfWeek 
            AND I.ModifiedOn < dateadd(day, 1, Cl.LastDateOfWeek)
            AND E.Name = 'incident'
            AND SM.AttributeName = 'statecode'
            AND SM.LangId = 1033
            AND I.CustomerId = C.ContactId
            AND SM.Value = 'Canceled'
    ) CancelledCases
FROM
    CRM.dbo.Contact C
    CROSS JOIN
        (
            SELECT
                DISTINCT WeekNumber,
                CalendarYear,
                FirstDateOfWeek,
                LastDateOfWeek
            FROM
                Calendar
        ) Cl
ORDER BY
    C.FullName,
    Cl.WeekNumber 
```

# asp.net - MS CRM 2011 打开带有来自 asp.net 网站的自定义视图的查找对话框

> ID：13273958
> 
> 赞同：1
> 
> 时间：2012-11-07T16:28:48.043
> 
> 标签：asp.net, view, crm, lookup

我有一个 asp.net 网站，它作为 iframe 包含在实体形式上。网站上有一个按钮。如果我单击该按钮，将显示一个 crm 查找对话框。

这很好用，但现在我需要使用我将在运行时创建的自定义视图打开相同的查找。

我知道如何构建自定义视图并将其绑定到现有的 crm 查找字段：

```
Xrm.Page.getControl(lookupFieldId).addCustomView(viewId, entityName, 
    viewDisplayName, fetchXml, layoutXml, viewIsDefault); 
```

但它不是 crm 表单上的一个字段，它是我的 asp.net 网站上的一个按钮。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:06:05.210

我解决了我的问题：

使用 window.parent 我获得了 CRM 级别。现在我可以使用 LookupObjects 调用 Lookup：

```
window.parent.LookupObjects(null, "single", typeCode, 0, null, "", null, 
    null, null, null, null, null, viewId, [customView]); 
```

# python - 是否可以使用 Python 将数据包注入现有的 tcp 连接？

> ID：13273960
> 
> 赞同：2
> 
> 时间：2012-11-07T16:28:49.763
> 
> 标签：python, networking, tcp, packets

正如标题所说，我想使用现有的 tcp 连接发送数据。所述连接已经由第 3 方程序建立。我无法找到有关此的太多信息，并且可以肯定地说我根本不知道这将如何工作。

操作系统是Windows。我首选的编程语言是 python - 我不想使用 3rd 方 python 模块，但如果它们让我的生活更轻松，我会的。

澄清一下，如果您不确定我想做什么：我想发送数据，就好像它是由不同的程序发送的一样；很像[WPE pro](http://wpepro.net/index.php?categoryid=3)的发送功能。

更新：

从技术上讲，我不能手动设计 TCP 数据包，然后告诉网络设备（或操作系统）发送该数据包吗？那不是注入套接字会做的完全一样的事情吗？

编辑：维基百科说接收主机确认它收到的数据包，这使得这有点困难。但是如果可以在第 3 方程序接收到它之前丢弃该确认包，那么这应该可以工作。正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:59:30.937

[Scapy](http://www.secdev.org/projects/scapy/) / [Pcapy](http://corelabs.coresecurity.com/index.php?module=Wiki&action=view&type=tool&name=Pcapy)是非常强大的工具，用于监控并将数据包注入实时网络接口。我已经将它们用于多个项目。这些工具非常适合刺激/响应低级网络协议（即 DHCP、DNS 等）以及通过简单 UDP 发送的任何无状态信息。

不幸的是，TCP 层非常复杂且有状态。因此，将有意义的东西注入流中会更加困难。此外，Scapy/Pcapy 目前不[支持 tcp](http://trac.secdev.org/scapy/wiki/TCP)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T17:26:13.943

TCP 会话并非旨在成为多对一连接。它是一种点对点有状态协议，可跟踪已发送的数据包与另一端已接收的数据包。我不相信您可以将自己注入已经建立的会话中。如前所述，您最好的选择是创建代理并充当中间人闯入者。仍然不是一件微不足道的事情，而是可行的。

# iphone - 如何在 UIView 中使用 CAAnimation 添加波纹动画

> ID：13273963
> 
> 赞同：1
> 
> 时间：2012-11-07T16:28:54.687
> 
> 标签：iphone, objective-c, ios, xcode, caanimation

我试图在我的`iOS`应用程序中实现涟漪效果，如果用户触摸特定按钮，`UIView`涟漪就会出现。我试着用谷歌搜索，但结果让我更加困惑。在某些地方我认为它与`CAAnimation`, then`CAFilter`等有关。我找不到任何像样的教程，所以如果有人可以帮助我，我的以下方法中应该有什么代码。（按下按钮时调用）

```
- (void)buttonPressed:(id)sender 
```

我需要知道如何以编程方式对视图产生连锁反应。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:41:03.663

对于勇敢和坚强的人（那些不怕被应用程序拒绝的人）：

```
[UIView beginAnimations:@"rippleEffect" context:NULL];
[UIView setAnimationTransition:110 forView:myViewContainer cache:YES];
[UIView setAnimationPosition:CGPointMake(100.0f, 100.0f)];
[myView removeFromSuperview];
[UIView commitAnimations]; 
```

来源：[www.iphonedevwiki.net](http://www.iphonedevwiki.net/index.php?title=UIViewAnimationState)

# perl - 在 perl 中加速 foreach 循环

> ID：13273964
> 
> 赞同：1
> 
> 时间：2012-11-07T16:29:05.830
> 
> 标签：perl

我有一个工作 perl 脚本，它扫描一个目录并使用 imgsize [http://dktools.sourceforge.net/imgsize.html](http://dktools.sourceforge.net/imgsize.html)来获取 png 文件的宽度等。有没有人有任何加快这个过程的提示（现在，每 1000 个文件平均需要 5 分钟）？我只是想知道代码是否可以通过某种方式进行优化。谢谢。

```
use strict;
use warnings;

use File::Find;

my @files;
my $directory = '/Graphics/';
my $output_file = '/output_file';
my $max_height = 555;
my $count = 0;

open ( OUTPUT, '>>', $output_file );

find( \&wanted, $directory );

foreach my $file ( @files ) {
        if ( $file =~ /\.png$/ ) {
                my $height = `imgsize $file | cut -d\'\"\' -f4`;
                if ( $height > $max_height ) {
                        print OUTPUT "$file\n";
                }

                $count++;

                my $int_check = $count/1000;
                if ( $int_check !~ /\D/ ) {
                        print "processed: $count\n";
                }
        }
}

print "total: $count\n";
close ( OUTPUT );
exit;

sub wanted {
  push @files, $File::Find::name;
  return;
} 
```

* * *

**解决方案**：原来我能够使用该`Image::Info`模块。我从每 5 分钟处理 1000 个图像变为每**12 秒**处理一次。如果有人感兴趣，这是相关的代码片段：

```
 use Image::Info qw(image_info);

    foreach my $file ( @files ) {
            if ( $file =~ /\.png$/ ) {
                    my $output = image_info($file);
                    my $height = ${$output}{height};

                    if ($height > $max_height) {
                            print OUTPUT "$file\n";
                    }

                    $count++;

                    my $int_check = $count/1000;
                    if ( $int_check !~ /\D/ ) {
                            print "processed: $count\n";
                    }
            }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T16:38:16.890

您显示的 Perl 代码可能不是罪魁祸首。您可以使用[Devel::NYTProf 对其](http://search.cpan.org/~timb/Devel-NYTProf-4.09/lib/Devel/NYTProf.pm)进行分析，就像@choroba 所说的那样。但我敢打赌，大部分时间都来自为每个图像（`imgsize`和`cut`）分叉两个外部进程。您应该查看 Perl 模块，这些模块可以在不运行任何外部进程的情况下检索图像的高度。像[Image::Info](http://search.cpan.org/~srezic/Image-Info-1.33/lib/Image/Info.pm)这样的模块浮现在脑海中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T16:41:33.113

在循环中启动外部进程通常是让事情进展缓慢的好方法。启动另一个过程需要大量成本，如果您为每张图像都这样做，您很快就会注意到成本。您也在调用`cut`，这意味着每次循环都会调用两次。

因此，第一步是`cut`使用本地 Perl 字符串操作进行操作，从而消除每个循环启动一个进程。

不幸的是，完全消除流程成本的唯一方法是在流程中完成所有工作，这意味着您需要一个可以从 Perl 调用的库，它可以读取图像并获取它们的大小。我没有尝试过，但`Perl::ImageMagick`可能值得一看，我相信还有其他的。

您也可以尝试使用`fork`或 线程拆分您自己的进程，并让每个子进程并行执行部分负载，但您可能会遇到系统上的 I/O 可用性问题。

# json - 将 JSON 文件导入 Google BigQuery 表

> ID：13273965
> 
> 赞同：1
> 
> 时间：2012-11-07T16:29:08.660
> 
> 标签：json, google-bigquery

我正在尝试使用 BigQuery Web UI 将 JSON 文件导入到 Google BigQuery 表中。

当我定义 JSON 模式时，它无法导入，因为一些 json 字段名称包含破折号 - UI 报告和错误表明该字段无效。

例如：

```
{
    "first-name": "Bob",
    "last-name": "Smith"
} 
```

我已经拥有这种格式的大量数据，因此重命名该字段并不是一个真正的选择。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:16:09.343

BigQuery 目前仅支持以下[格式](https://developers.google.com/bigquery/docs/tables#tables)的字段名称：大写和/或小写字母（AZ、az）、数字 (0-9) 和下划线（但不支持空格或其他字符）。

# sql - SQL：唯一约束和聚合函数

> ID：13273966
> 
> 赞同：1
> 
> 时间：2012-11-07T16:29:09.040
> 
> 标签：sql, database

目前我正在学习（MS）SQL，并且正在尝试各种聚合函数示例。我的问题是：是否有任何场景（使用聚合函数的示例查询）在使用聚合函数时具有唯一约束列（在表上）有帮助。

请注意：我不是想找到问题的解决方案，而是想看看现实世界的 SQL 编程中是否存在这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:35:10.060

想到一个直接的理论场景，唯一约束将由唯一索引支持，因此如果您只是聚合该字段，则索引将比扫描表更窄，但这将基于查询没有使用任何其他字段，因此被覆盖，否则它将超出 NC 索引。

我认为添加索引以强制执行唯一约束将自动具有潜在帮助查询的能力，但这可能有点做作。

如果您需要该字段是唯一的，则将唯一约束放在该字段上，如果您需要一些索引来帮助查询性能，请单独考虑它们，或者在该字段上添加唯一索引+包含其他字段以使其覆盖（不太有用，但比单个字段上的唯一索引更有用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:46:18.817

让我们看下面两张表，一张包含科目名称和科目 ID 的记录，另一张表包含学生在特定科目中得分的记录。

> Table1（SubjectId int 唯一，subject_name varchar，MaxMarks int） Table2（Id int，StudentId int，SubjectId，Marks int）

因此，如果我需要查找所有尝试科学（SubjectId = 2）的学生在科学科目中获得的分数的 AVG，那么我将触发以下查询。

```
SELECT AVG(Marks),  MaxMarks  
FROM Table1, Table2 
WHERE Table1.SubjectId = 2; 
```

# jquery - 主干.js 视图中的 $

> ID：13273967
> 
> 赞同：2
> 
> 时间：2012-11-07T16:29:11.920
> 
> 标签：jquery, backbone.js, backbone.js-collections

Backbone.js 视图中的 jQuery $ 和 this.$ 有什么区别？在一个视图中，我使用下面的代码收听了一个集合的重置事件以清空一个元素

```
//code in View
this.$("#the_id").empty(); 
```

但是它没有清空我的元素，然后我将代码更改为

```
$("#the_id").empty(); 
```

这次它起作用了。那么，为什么 this.$ 不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:30:31.303

`this.$( selector )`在视图中调用与调用or`$( selector, this )`相同`$(this).find( selector )`。

它为选择器 IE 提供上下文，仅`this`搜索下面的元素以匹配选择器，而普通 jQuery`$(selector)`从整个文档的根目录开始搜索。

您的视图不应操作它不拥有的元素，如果调用`this.$("#the_id").empty();`不做任何事情，则意味着该元素不在视图的“控制区域”或一开始就不存在。

# riak - 如果最初是从源代码下载的，如何升级 Riak？

> ID：13273977
> 
> 赞同：0
> 
> 时间：2012-11-07T16:29:42.730
> 
> 标签：riak

如果 Riak 最初是通过软件包安装的（[http://docs.basho.com/riak/1.2.1/cookbooks/Rolling-Upgrades/），Riak](http://docs.basho.com/riak/1.2.1/cookbooks/Rolling-Upgrades/)有很多关于如何升级 Riak 的文档。但是，如果您最初是从源代码下载/安装 Riak，如何升级它？

我正在使用的当前版本的 Riak 是 1.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T21:14:27.223

It's pretty much the same except in step 3 instead of

```
sudo dpkg -i <riak_package_name>.deb 
```

you just download the tarball with new version and install it as you did first time.

But frankly speaking in 99% cases it's easier to do it via packages. I believe you can upgrade to packaged version from manually installed one by following their rolling update instructions precisely.

# javascript - 使用 polyfill 的 HTML5 数字输入

> ID：13273978
> 
> 赞同：2
> 
> 时间：2012-11-07T16:29:44.923
> 
> 标签：javascript, asp.net-mvc, html

我正在使用 HTML5 数字输入和 polyfill (https://github.com/jonstipe/number-polyfill) 来处理旧版浏览器。

页面/输入运行良好。我可以输入值，使用微调器按钮，一切都很好。但该值的格式类似于“0.00”，默认为 en-US 文化。我正在构建的网站在荷兰文化设置上运行，该设置使用“0,00”进行数字格式设置。

现在在回发时，MVC 将“4.6”读作“46”，这显然不是我想要的。所以现在我正在寻找一种处理这个问题的好方法。我知道我可以调整 javascript 或在 MVC 端使用自定义绑定器来修复错误。但在那种情况下，我会假设它总是一种或另一种格式。最理想的是，我想遵循用户的设置（这是 MVC 在服务器端所做的）。因此，当英语用户使用该网站时，他/她可以输入“4.6”，而荷兰语用户可以输入“4,6”。

但这是一个“很高兴拥有”，如果它太复杂，我现在将使用荷兰风格输入。

# joomla - 用 mootools 调用 ajax

> ID：13273983
> 
> 赞同：0
> 
> 时间：2012-11-07T16:30:03.767
> 
> 标签：joomla, mootools

大家好，我用 mootols 调用 ajax 并收到此错误，我正在寻找互联网但没有找到任何东西

这是我调用 ajax 的代码

```
 $$('.item-129 a').addEvent('click', function(event){
                event.stop();
                var req= new Request({
                    method: 'get',
                    url: '<?php echo JURI::root()?>index.php?option=com_content&view=article&id=6',
                    data: {'do': '1'},
                    onComplete: function(responseText){$('textos').set('html', responseText);}
                }).send();
            }); 
```

这是错误

```
TypeError: $("textos").set is not a function
anonymous()mootoo...ssed.js (línea 959) 

return self.apply(bind, args || arguments); 
```

任何的想法！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:10:16.347

这意味着：

*   未找到该元素
*   您不使用 mootools 1.2+，因此没有设置方法，因为您使用 Request 而不是 ajax 不太可能
*   jQuery 有 $ 或其他东西，它没有 .set 方法

首先尝试：

```
onComplete: function(){
    console.log($("textos"));
} 
```

如果这有响应，请查看它返回的内容。如果您使用 jquery，它将返回包装好的 jquery 函数。如果是 mootools，它将是一个元素。

如果你有 jquery，mootools 会默默地`document.id`代替。

所以。写成`document.id('textos').set('html', responseText)`

如果`document.id('textos')`你也没有得到一个元素，它就没有找到。

# asp.net - 如何使用 OracleDataReader 检索模式数据并以我想要的方式显示它？

> ID：13273986
> 
> 赞同：0
> 
> 时间：2012-11-07T16:30:07.277
> 
> 标签：asp.net, vb.net

我有一个如下所示的表：

```
date          code                name    score         set
09/09/12     967873         Team A         24            1
09/09/12     967873         Team B         22            1
09/09/12     967873         Team A         21            2 
09/09/12     967873         Team B         16            2
02/04/12     965454         Team X         21            1
02/04/12     965454         Team Y         19            1
02/04/12     965454         Team X         21            2
02/04/12     965454         Team Y         19            2 
```

你猜对了！这是一场排球比赛！但是，我希望我的输出在一行中（我已经从数据库中检索了上表）。例如：

```
date           code               Teams                 Set-1    Set-2     Set-3
09/09/12      967873             Team A VS.Team B       24-22    21-16       -
and so on.... 
```

我想使用 vb.net`dataReader`和`html`tables/`dataset`为用户提供正确的格式，但`algorithm`.

`**Notice that the game could have a third set as well` 谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:04:05.983

...这可能有点矫枉过正，但我​​会通过创建一个自定义对象来做到这一点，您可以在其中以您需要的方式解析数据。例如：

```
Public Class VolleyBallData

Public Property dbDate As String
Public Property dbCode As String

Private _Teams(2) As String
Public WriteOnly Property dbTeams As String
    Set(ByVal value As String)
        _Teams = Value.Split({" VS."}, StringSplitOptions.None)    
    End Set
End Property

Private _Set1(2) As String
Public WriteOnly Property dbSet1 As String
    Set(ByVal value As String)
        _Set1 = Value.Split({"-"}, StringSplitOptions.None)
    End Set
End Property

... 
```

然后，您可以从您的自定义对象创建一个输出函数，该函数以您需要的方式将数据输出到 a`List(of DataRow)`中，因为您知道每个数组中的每个第一个元素都是 Team 1 的数据，并且每个第二个元素是2队的。然后只需将这些行添加到您的父数据表中。

或者，老实说，您可以通过函数轻松地做到这一点......我只是喜欢用于数据验证目的的自定义对象。

希望这是有道理的...

# visual-c++ - 任何类型的函数参数

> ID：13273992
> 
> 赞同：0
> 
> 时间：2012-11-07T16:30:25.787
> 
> 标签：visual-c++

我有功能体：

```
 cout<<value; 
```

我想制作可以具有任何类型参数的函数，`value`以使用将许多类型参数传递给`cout`.

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:00:32.643

您几乎在描述模板。

```
template<typename T>
void Foo(const T &value)
{
   std::cout << value;
} 
```

相反，如果您问的是“我有一个`T`我希望能够序列化的类型`std::cout`”，那么您需要`operator <<`在您的类中重载。

```
class MyType
{
   int x;

   friend std::ostream &operator <<(std::ostream &stream, const MyType &value)
   {
      return std::cout << value.x;
   }
}; 
```

# vb.net - List(of String) 或 Array 或 ArrayList

> ID：13273997
> 
> 赞同：30
> 
> 时间：2012-11-07T16:30:40.467
> 
> 标签：vb.net, list, collections

希望对大多数有经验的程序员来说是一个简单的问题。

让我这样做的数据类型是什么？

```
Dim lstOfStrings as *IDK*

Dim String0 As String = "some value"
Dim String1 As String = "some value"
Dim String2 As String = "some value"
Dim String3 As String = "some value"
Dim String4 As String = "some value"
Dim String5 As String = "some value"

lstOfStrings.add(String0, String1, String2, String3) 
```

我会像这样访问这些

```
Dim s1 = lstOfStrings(0)
Dim s2 = lstOfStrings(1) 
Dim s3 = lstOfStrings(2) 
Dim s4 = lstOfStrings(3) 
```

如果我使用 List(of String) 我只能将一件事添加到列表中（一次），并且在我的函数中我希望能够存储多个值（一次）。

**解决方案：**

```
Private Function Foo() As List(Of String)

    Dim temp1 As String
    Dim temp2 As String 
    Dim temp3 As String 

    Dim temp4 As String 
    Dim temp5 As String 
    Dim temp6 As String 

    Dim inputs() As String = {temp1, temp2, temp3, temp4, temp5, temp6}

    Dim lstWriteBits As List(Of String) = New List(Of String)(inputs)

    Return lstWriteBits
End Function 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-07T16:34:31.330

`List(Of String)`大多数情况下会处理这个问题 - 尽管您需要使用`AddRange`添加一组项目，或者`Add`一次添加一个：

```
lstOfString.Add(String1)
lstOfString.Add(String2)
lstOfString.Add(String3)
lstOfString.Add(String4) 
```

如果您要添加已知值，如您所见，一个不错的选择是使用以下内容：

```
Dim inputs() As String = { "some value", _
                              "some value2", _
                              "some value3", _
                              "some value4" }

Dim lstOfString as List(Of String) = new List(Of String)(inputs)

' ...
Dim s3 = lstOfStrings(3) 
```

这仍然允许您稍后根据需要添加项目，但也可以快速获取初始值。

* * *

编辑：

在您的代码中，您需要修复声明。改变：

```
Dim lstWriteBits() As List(Of String) 
```

到：

```
Dim lstWriteBits As List(Of String) 
```

目前，您正在声明一个 List(Of String) 对象的数组。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2015-01-27T13:25:23.357

你可以做这样的事情，

```
 Dim lstOfStrings As New List(Of String) From {"Value1", "Value2", "Value3"} 
```

[集合初始化器](https://msdn.microsoft.com/query/dev12.query?appId=Dev12IDEF1&l=EN-US&k=k(vb.CollectionInitializer);k(TargetFrameworkMoniker-.NETFramework,Version%3Dv4.5);k(DevLang-VB)&rd=true)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-07T16:48:05.850

这两个集合都不允许您以这种方式添加项目。

您可以进行扩展以使例如`List(Of String)`具有`Add`可以做到这一点的方法：

```
Imports System.Runtime.CompilerServices
Module StringExtensions

  <Extension()>
  Public Sub Add(ByVal list As List(Of String), ParamArray values As String())
    For Each s As String In values
      list.Add(s)
    Next
  End Sub

End Module 
```

现在您可以在一次调用中添加多个值：

```
Dim lstOfStrings as New List(Of String)
lstOfStrings.Add(String1, String2, String3, String4) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-07T16:32:44.527

[在此处](http://msdn.microsoft.com/en-us/library/z883w3dc.aspx)查看 List`AddRange`方法

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-05-03T17:25:54.437

有时我不想在实例化列表时将项目添加到列表中。

实例化一个空白列表

```
Dim blankList As List(Of String) = New List(Of String) 
```

添加到列表中

```
blankList.Add("Dis be part of me list") 'blankList is no longer blank, but you get the drift 
```

循环遍历列表

```
For Each item in blankList
  ' write code here, for example:
  Console.WriteLine(item)
Next 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-08T13:23:01.507

您可以`IList(Of String)`在函数中使用：

```
Private Function getWriteBits() As IList(Of String)

Dim temp1 As String
Dim temp2 As Boolean
Dim temp3 As Boolean

'Pallet Destination Unique
Dim temp4 As Boolean
Dim temp5 As Boolean
Dim temp6 As Boolean

Dim lstWriteBits As Ilist = {temp1, temp2, temp3, temp4, temp5, temp6}

Return lstWriteBits
End Function 
```

用于 `list1.AddRange(list2)`添加列表

希望能帮助到你。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-04T20:15:37.327

对于那些坚持维护旧 .net 的人，这里有一个适用于 .net framework 2.x 的版本：

```
Dim lstOfStrings As New List(of String)( new String(){"v1","v2","v3"} ) 
```

# javascript - 多个线程上的 JavaScript setInterval

> ID：13273998
> 
> 赞同：0
> 
> 时间：2012-11-07T16:30:46.247
> 
> 标签：javascript, jquery, jquery-selectors

我有一个像这样的通用字典：数据包含一个字典（键，值）对：

```
for (var key in data) {
  var interval = setInterval(function () { 
    getProgress(key, data[key], interval) }, 2500); // get percent progress every sec.
  }
} 
```

需要为每个数据[key]项执行的getProcess函数

```
 function getProgress(machineId, operationId, interval) {
        alert(machineId);
        $.post("@Url.Action("Status","Packages")", { 
            machineId: machineId, 
            operationId: operationId 
            }, function (data) {
                if (data) {
                    //blah blah...
                } else { 
                    clearInterval(interval); }
                }
            }
        });
    } 
```

由于某种原因，只有最后一个 machineId 得到了 setInterval。我需要分别为每个数据项设置 setInterval。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T16:33:40.247

经典 for 循环范围问题。for 循环的每次迭代都在同一范围内执行，因此在 for 循环内创建的每个函数都访问相同的`key`变量。

简单的解决方案是为每次迭代创建一个私有范围。

```
for ( var key in data ) {
    (function (key) {
        var interval = setInterval(function () { 
            // get percent progress every sec.
            getProgress(key, data[key], interval) 
        }, 2500); 
    })(key);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T17:13:50.127

在数据数组上实现 forEach 循环时，我遇到了同样的问题。为了克服这个问题，我简单地实现了 for 循环的基本方法。

```
for(var key;key<data.length;key++)
{
  var interval = setInterval(function () 
  { 
    // get percent progress every sec.
    getProgress(key, data[key], interval) 
  }, 2500);
} 
```

也喜欢为每次迭代创建私有范围的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T16:32:03.590

您所有的回调都共享同一个`key`变量。

您需要将代码包装在[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)中：

```
for (var dontUse in data) {
    (function(key) {
        var interval = setInterval(function () { getProgress(key, data[key], interval) }, 2500); // get percent progress every sec.
    })(dontUse);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-07T16:32:59.813

您应该制作附加功能，以便每次在循环中复制数据和密钥：

```
function func(key, data)
{
  var interval = setInterval(function () { getProgress(key, data, interval);  }, 2500);
}

for (var key in data) {
  func(key, data);
} 
```

这是因为 setInterval 是异步的