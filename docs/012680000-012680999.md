# StackOverflow 问答 12680000-12680999

# python - 如何以pythonic方式处理数组列表或单个数组

> ID：12680006
> 
> 赞同：0
> 
> 时间：2012-10-01T19:47:34.303
> 
> 标签：python, numpy

我有这个问题：

在我的软件中，我要么处理单个数组，要么处理 3 个数组的列表（它们是像素化天空图的 1 个或 3 个组件）。

如果单个数组是 1 个数组的列表，那么无论元素数量如何，都可以很容易地透明地迭代它。

现在，假设我想对这些地图进行平方：

```
my_map = np.ones(100) # case of single component
# my_map = [np.ones(100) for c in [0, 1, 2]] # case of 3 components

if isinstance(my_map, list): #this is ugly
    my_map_2 = [m**2 for m in my_map]
else:
    my_map = my_map ** 2 
```

您对如何改善这一点有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:51:55.263

如果返回值是单个值，您可以将其转换为列表。使用 list() 工厂方法。

```
my_map = []
temp = np.ones(100) # case of single component
# Append your temp value.. either single or a list to your empty list..
my_map.append(temp)
my_map_2 = [m**2 for m in my_map] 
```

我假设您的方法`np.ones(100)`可能会返回一个值，甚至是一个列表..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:06:53.760

你为什么不直接创建一个二维数组？

```
my_array = np.ones((100,3), dtype=float) 
```

这样，您可以一次直接对“三个”数组进行平方。您仍然可以访问单个元素：

```
(x, y, z) = my_array.T 
```

where`.T`是该方法的快捷`.transpose`方式。

使用这种方法比在列表上循环要高效得多，尤其是当您将相同的函数应用于三个数组时。即使您想对第一个数组进行平方，将第二个数组加倍并取第三个数组的平方根，您也可以：

```
my_array[:,0] **=2
my_array[:,1] *=2
my_array[:,2] **=0.5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:20:44.107

你试过`numpy.asarray`吗？那么 if-else 就是

```
my_map = numpy.asarray(my_map)**2 
```

还要检查`numpy.asanyarray`您是否还想处理 ndarrays 的子类。

我经常`numpy.asarray`在我的函数的开头调用，所以它们可以在列表和数组上工作。

# php - 表单元素上的 action 属性可以为空吗？

> ID：12680007
> 
> 赞同：0
> 
> 时间：2012-10-01T19:47:36.203
> 
> 标签：php, html, forms

从 HTML5 开始，广泛使用和推荐`action=""`的是无效 HTML。

从规格：

> action 和 formaction 内容属性（如果指定）必须具有一个有效 URL 的值。

那么让`action`属性指向当前页面的正确方法是什么？

我目前正在使用

```
action="<php htmlspecialchars($_SERVER["REQUEST_URI"]); ?>" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:54:09.223

确实，该`action=`属性可能不为空，因为空字符串不是有效的 URL。但是，简单地忽略它并让浏览器解决它是有效的。

浏览器将假定当前页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:53:57.983

您可以将值设置为“。” 或者根本不设置动作属性。

```
<form method="post">
or
<form method="post" action="."> 
```

（我很惊讶，但将其留空确实无效，至少 validator.w3.org 正在返回错误）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T19:58:30.977

不，在 HTML5 中，该[`action`属性](http://www.w3.org/TR/html5/attributes-common-to-form-controls.html#attr-fs-action)可以省略，默认为 emoty 字符串，表示对当前文档的引用。

# c# - 在richtextbox c#中使链接只读

> ID：12680011
> 
> 赞同：0
> 
> 时间：2012-10-01T19:47:43.823
> 
> 标签：c#, url, richtextbox, readonly

我在 c# 中有一个richtextbox，我想让链接显示为只读。现在我可以将光标移入其中并进行编辑。有没有办法让它只读？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:43:29.857

您可以设置 RichTextBox 的此属性以使整个文本为只读

**只读 = 真**

如果您只想保护链接但保留其他文本可编辑，请尝试在 Form1_Load 或您可能创建的任何方法下插入以下内容

您需要添加**RichTextBox.Find(string str);** 从对象浏览器

```
 MatchCollection mc = Regex.Matches(richTextBox1.Text, @"(www[^ \s]+|http[^ \s]+)([\s]|$)", RegexOptions.IgnoreCase); // Create a new MatchCollection and match from richTextBox1.Text

    for (int collection = 0; collection < mc.Count; collection++) // increase collection for every string in mc
    {
        if (richTextBox1.Find(mc[collection].Value, RichTextBoxFinds.None) > -1) // Find the mc value
        {
            richTextBox1.SelectionProtected = true; // Protect the value
        }
    } 
```

所以表格看起来像这样

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Text.RegularExpressions;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            MatchCollection mc = Regex.Matches(richTextBox1.Text, @"(www[^ \s]+|http[^ \s]+)([\s]|$)", RegexOptions.IgnoreCase);

            for (int collection = 0; collection < mc.Count; collection++)
            {
                if (richTextBox1.Find(mc[collection].Value, RichTextBoxFinds.None) > -1)
                {
                    richTextBox1.SelectionProtected = true;
                }
            }

        }
    }
} 
```

谢谢，

祝你有美好的一天 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T19:50:55.563

您可以像这样在代码中更改它：

```
richTextBox1.ReadOnly = true; 
```

或者您可以转到您的设计视图，检查您的富文本框的属性并将`ReadOnly`属性设置为`true`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-22T02:46:29.627

我想分享我的解决方案......我确实尝试了我在互联网上找到的所有内容，但似乎我无法完全达到我想要的 100%（将richtexbox 设为只读）。然后我开始寻找一种替代方案，最终我得到了一个完全按照我想要的方式做的事情。

有时我们需要在其上显示带有样式的值，这就是我们第一次选择richtextbox的原因，然后当我们无法将其设置为ReadOnly时就成为一个问题。不同的是我不再使用richtextbox，而是将其更改为标签。根据您的程序的工作方式，您可能需要 2 个控件（富文本框和标签）来保存相同的值，这些值将根据您的要求进行切换（可见真/假）。

在此处查看我的示例以获得 ReadOnly Richtextbox 外观相似的控件：

```
<div id="History">
    <asp:Label ID="lblLACA27" runat="server" CssClass="ctlLabel"></asp:Label>
</div> 
```

还有一段 CSS 代码：

```
 #History
    {
        height: 100px;
        float: left;
        overflow: auto;
        overflow-x: hidden;
    } 
```

包含 LABEL 的 DIV 标记将像多行文本框/富文本框一样带有可见的滚动条。就是这样，让我们​​继续编程。希望这对以后的人有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T20:00:07.767

您应该捕获更改事件，以重置用户想要对链接进行的每个更改并将其设置回原始链接的方式。如果用户删除或添加字符，则保存链接的位置并更新位置。

# c# - 使用 Protobuf-net 恢复损坏的文件序列化

> ID：12680015
> 
> 赞同：2
> 
> 时间：2012-10-01T19:48:08.810
> 
> 标签：c#, file-io, protobuf-net

我假设我的应用程序正在更新文件时，机器电源被切断了。当重新打开并启动我的应用程序时，它试图反序列化文件。调用`Serializer.Deserialize`没有失败，但生成的对象具有每个属性的默认值。

我的文件更新/保存：

```
using (FileStream theStream = File.Open(fileName + "_tmp", FileMode.Create)) {
    ProtoBuf.Serializer.Serialize<MyObject>(theStream, inObjectToSerialize);
}
File.Copy(fileName + "_tmp", fileName, true); 
```

没有 _tmp 文件，只有主文件。文件的大小不为零，这让我相信信息是完整的。有没有办法恢复这些数据？

更新：

我已经用 ProtoReader 尝试了 Marc 的建议，并且有问题的文件会导致抛出异常`reader.ReadFieldHeader()`。ProtoException 读取：“源数据中的无效字段：0”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T20:03:12.523

我没有太多可以继续下去的……我想简短的版本是：*这取决于文件中剩下的内容*。

您可以做的一件事是遍历文件以查看其中的内容：

```
using (var input = File.OpenRead(path))
using (var reader = new ProtoReader(input, RuntimeTypeModel.Default, null))
{
    while (reader.ReadFieldHeader() > 0)
    {
        Console.WriteLine("offset {0}, field {1}, type {2}",
            reader.Position, reader.FieldNumber, reader.WireType);
        reader.SkipField();
    }
} 
```

这至少可以让您看到当前正在处理多少数据。

如果您知道某些字段的布局（即“字段 3 是字符串，字段 7 是子对象等”），那么您可以使输出更详细。

# jquery - 带有 IE9 的 Fancybox 重定向到 ajax 操作

> ID：12680018
> 
> 赞同：0
> 
> 时间：2012-10-01T19:48:45.367
> 
> 标签：jquery, ajax, magento, internet-explorer-9, fancybox

我正在尝试将 Fancybox 与 magento 管理员一起使用，除了 IE9 之外，所有工作都正常存在发生了什么：我正在通过 ajax 提供我的 fancybox，我的链接是这样的：

```
<a class="fancybox fancybox.ajax" href="http://10.1.1.34/clovis/index.php/ClearSale/Standard/Index/codPedidoCS/100000048/">ClearSale</a> 
```

我的fancybox调用：

```
<script type="text/javascript">
        jQuery(function() {
             jQuery('.fancybox').fancybox();
        });
</script> 
```

我的ajax回报：

```
echo "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\"><b><span style='color:red;'>Ocorreu um erro, por favor entre em contato com o suporte.</span></b>"; 
```

但是这个 ajax 返回可能是任何东西，我也有同样的问题。会发生什么：在 Firefox 上一切正常。但是在 IE9 上，当我单击链接时，他显示了 fancybox 2 秒，并使用 ajax 返回重定向到一页。我已经尝试了所有，但没有任何工作，我打开了 fancybox 的演示文件，并发生了 ajax 示例相同的行为，但在浏览器上显示消息“激活activeX”，如果我激活一切正常，但在我的代码上不要要求激活activeX。我不知道我还能做什么。请有人帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:53:17.217

我解决了它，我不知道是谁或为什么，但是当我告诉：

```
<a href="www.google.com"/> 
```

并使用 jquery 单击并使用 prevent return false 或 preventDefault 来不发送到 url IE9 变得疯狂并且不能这样做。因此，当我告诉 href='php action reference' fancybox 时，尝试在 fancybox 上加载返回值并阻止 url 加载。但这不是在 ie9 上发生的，他打开了盒子并进行了重定向。所以我的解决方案是，我在我的 .phtml 上创建一个 div 用于加载内容。并这样做：

```
 jQuery(function(){
        jQuery('.fancybox').bind('click',function(){
            jQuery.ajax({
                  url: jQuery(this).attr('href'),
                  cache: false,
                  success: function(html){
                      jQuery('#clearsale').html(html);
                  }
                });
            jQuery.fancybox(jQuery('#clearsale'));
            return false;
        });
    });
    </script>   
<div id="clearsale" style="width:600px;height:100px;display: none;">
</div> 
```

现在工作正常。

# java - Tomcat windows服务无法访问网络驱动器

> ID：12680019
> 
> 赞同：2
> 
> 时间：2012-10-01T19:48:46.157
> 
> 标签：java, tomcat, windows-services, network-security

我有两个 Windows 域 A 和 B。

我有两台服务器：`nasB`在域 B 上和`webserverA`在域 A 上。

我有两个用户：`userB`在域 B 上，可以访问`nasB`，`userA`在域 A 上，可以访问`webserverA`

我正在运行 tomcat 作为服务`webserverA`，它的登录为属性设置为`userA`.

我已经`\\nasB\myFiles$\`映射了`webserverA`使用`userB`凭据。该映射仅允许 JVM 访问。我总是在代码中使用 UNC 访问驱动器。我在管理网络密码中也有凭据。这两种方法在直接运行任何 Java 应用程序但不作为服务运行时都有效:(

如果我将 tomcat 作为服务运行，它会抛出一个 filenotfound ，除非在尝试访问`\\nasB\myFiles$\somefile.txt`. 如果我使用 startup.bat 运行 tomcat，它可以正常访问该文件。

我无法运行 tomcat 服务，`userB`因为他无权访问`webserverA`. 如何让我的 tomcat 服务`userB`在访问时使用凭据`nasB`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T19:55:02.627

不要尝试使用映射驱动器。

鉴于用户的配置和映射的驱动器只有在用户使用交互式登录登录时才可用，您将无法使用这些资源。尝试使用 UNC 路径，如果由于用户限制而不起作用，请移交 jcifs 库，在这些情况下它非常方便，因为它允许您在使用 UNC 路径访问资源时进行身份验证，从而减少不确定性关于读取网络驱动器中的文件夹和文件的能力（另外，将 tomcat 服务配置为以管理用户身份运行，提供不应过期的凭据，...）。

我自己也遇到过，这只是我个人的看法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T15:55:55.087

在两个 Windows 服务器上创建用户名/密码相同的 Windows 用户。示例 userA/passA 然后使用该用户运行 Tomcat Windows 服务。

# php - While 语句和 div

> ID：12680020
> 
> 赞同：-1
> 
> 时间：2012-10-01T19:48:47.143
> 
> 标签：php

我试图让下面的代码使用 while 语句循环。我遇到的问题是让 div 值得在 PHP 中使用。关于如何实现这一点的任何想法？我的数据库由名为月、日、描述和位置的列组成。

```
<div class="events-module">

<?php
$con = mysql_connect("localhost","username","password");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("sandbox", $con);

$result = mysql_query("SELECT * FROM events"); ?>

<?php while($row = mysql_fetch_array($result)) ?>

<div class="date">
<div id="month"><h4><?php echo $row['month']; ?></h4></div>
<div id="day"><h3><?php echo $row['day']; ?></h3></div>
</div>

<div class="event">
<div id="description"><p><?php echo $row['description']; ?></p></div>
<div id="location"><p><b><?php echo $row['location']; ?></b></p></div>
</div>

<?php endwhile;

 mysql_close($con);

 ?>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:58:35.350

你没有说具体是什么问题。但是，您似乎错过了 while 循环的起始块

```
while (.... )  :
              ^^^
... // div stuff
end while 
```

# c# - 如何在 c#.NET 中打开一个关闭的窗体？

> ID：12680022
> 
> 赞同：0
> 
> 时间：2012-10-01T19:48:55.633
> 
> 标签：c#, .net, winforms, form-control

我想在 c# 中重新打开一个关闭的窗口窗体。

实际上，我主动关闭表单以允许 autoIT 脚本在不同的 Windows 应用程序上运行。但是，我想在脚本完成后重新打开相同的表单。

所以...

```
this.Close();
.
.
.
Application.Run(new FormTestPage()); 
```

但是，这给了我一个错误，说要改用 Form.ShowDialogue。我不确定它是如何工作的。提前致谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:00:42.580

如果您关闭主窗体并启动应用程序

```
var frm = new MainForm();
Application.Run(frm); 
```

然后关闭主窗体也会关闭应用程序。像这样启动应用程序

```
var frm = new MainForm();
frm.Show();
Application.Run(); 
```

现在当应用程序必须关闭时，您必须调用`Exit`（因为它不再自动关闭）：

```
Application.Exit(); 
```

`FormClosed`如果您不只是暂时关闭表单，您可以在主表单中执行此操作。

现在您可以正常重新打开表单：

```
var frm = new MainForm();
frm.Show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T19:52:19.107

```
var item = new FormTestPage();
item.ShowDialog(); 
```

# backbone.js - Backbone.js：单页应用程序、路由和 hrefs 问题

> ID：12680024
> 
> 赞同：1
> 
> 时间：2012-10-01T19:48:57.780
> 
> 标签：backbone.js, backbone-routing

听起来可能有点复杂。

这是 SinglePage，启用 pushState 的应用程序。我有一条路线，用于配置：

```
 routes: {
        '': 'dashboard',
        'configure/sites/:id': 'configure',
        'configure/sites/:id/:section': 'configureSection'
    }, 
```

我正在使用 tbranyen/backbone-boilerplate[方式](https://github.com/tbranyen/backbone-boilerplate/blob/master/app/main.js#L22)来导航网址。如果我从仪表板单击 href `a href="configure/sites/33`，则视图呈现良好。在浏览器 URL 中，我可以看到“localhost:12345/configure/sites/33”。

在配置视图上，我有一个菜单，`<a href=`里面有一些。

```
<ul class="nav configure-nav">
<li>
    <a href="overview" class="overview">Overview</a>
</li>
<li>
    <a href="configuration" class="configuration">Configuration</a>
</li> 
```

问题是，如果我尝试点击这些链接，它们`id`就会消失。

![浏览器地址栏](../Images/64b1320b639dd70855e2f9fb95224f20.png)

预期的href：`http://localhost:12345/configure/sites/33/configuration`

实际href：`http://localhost:12345/configure/sites/configuration`

你能解释一下发生了什么以及如何解决它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T04:56:09.120

我不知道这是否能解决您的问题，但如果您正在制作单页应用程序，您应该在“localhost:12345/”之后放置一个 hashbang，否则所有这些请求都会发送到服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:44:24.283

这是由于相对和绝对链接的工作方式。在您的情况下，href 是相对于您路径中最近的“目录”的（为了保持文件系统类比， :id 部分可以被视为一个文件）。

如果您在路由中添加尾部斜杠，则概述和配置链接将被正确植根。

# macos - OSX 上 Python 3 中的 Numpy？

> ID：12680028
> 
> 赞同：1
> 
> 时间：2012-10-01T19:49:07.627
> 
> 标签：macos, numpy, python-3.x

我在 OSX Lion (10.7) 上运行 Python 3.3，并尝试`numpy`通过 pip 安装：

```
pip install numpy 
```

这是一个用`virtualenvwrapper`. 但是，我得到：

```
$ pip install numpy
Downloading/unpacking numpy
  Downloading numpy-1.6.2.tar.gz (2.6MB): 2.6MB downloaded
  Running setup.py egg_info for package numpy
    RefactoringTool: Skipping implicit fixer: buffer
    RefactoringTool: Skipping implicit fixer: idioms
    RefactoringTool: Skipping implicit fixer: set_literal
    RefactoringTool: Skipping implicit fixer: ws_comma
    RefactoringTool: Refactored /Users/aparkin/.envs/omgwhatverdoiget/build/numpy/build/py3k/numpy/__init__.py
    RefactoringTool: Refactored /Users/aparkin/.envs/omgwhatverdoiget/build/numpy/build/py3k/numpy/_import_tools.py
    RefactoringTool: Refactored /Users/aparkin/.envs/omgwhatverdoiget/build/numpy/build/py3k/numpy/ctypeslib.py
    RefactoringTool: Refactored /Users/aparkin/.envs/omgwhatverdoiget/build/numpy/build/py3k/numpy/dual.py

...  MANY LINES OMITTED ....

numpy/core/src/multiarray/nditer_pywrap.c: In function ânpyiter_ass_subscriptâ:

numpy/core/src/multiarray/nditer_pywrap.c:2314: warning: passing argument 1 of âPySlice_GetIndicesâ from incompatible pointer type

lipo: can't figure out the architecture type of: /var/folders/7m/62gtb_jbz4g8g8b5dz046gp17h0168/T//ccyGGQyx.out

----------------------------------------
Command /Users/aparkin/.envs/omgwhatverdoiget/bin/python3 -c "import setuptools;__file__='/Users/aparkin/.envs/omgwhatverdoiget/build/numpy/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /var/folders/7m/62gtb_jbz4g8g8b5dz046gp17h0168/T/pip-eh07x0-record/install-record.txt --single-version-externally-managed --install-headers /Users/aparkin/.envs/omgwhatverdoiget/bin/../include/site/python3.3 failed with error code 1 in /Users/aparkin/.envs/omgwhatverdoiget/build/numpy
Storing complete log in /Users/aparkin/.pip/pip.log 
```

嗯，救命？

完整的 pip.log 位于[http://pastebin.com/pzdLUM2r](http://pastebin.com/pzdLUM2r)（并且相当大——大约 6400 行）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:53:32.227

周末安装 Python 3.3 时，我只是按照自己的说明进行操作[。](https://stackoverflow.com/questions/10557857/install-numpy-for-python-3-2-3-on-os-x-10-7-4)似乎工作正常。

希望这可以帮助，

亚当。

# java - 暂停一个可运行线程并等待用户输入

> ID：12680032
> 
> 赞同：1
> 
> 时间：2012-10-01T19:49:32.553
> 
> 标签：java, android

假设我必须将一堆文件从一个位置复制到另一个位置。我将在 AsyncTask 中执行此操作，以便在操作发生时轻松显示进度条。

但是假设一个被复制的文件已经存在于新位置，然后可以暂停异步任务并显示一个警告对话框说跳过或覆盖？

据我了解，它在异步任务中是不可能的。但是有没有一种聪明的方法来实现类似的东西？或者我应该先检查一下可能有 1000 多个文件的列表，然后检查它们是否存在于新位置？

什么是最有效的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:58:18.383

基本上你可以做这样的事情：

```
public ? doInBackground(?... ?s) {
    while (shouldCopy) {
        while (needUserVerfication)
            if (!verifying) 
                publishProgress(NEED_USER_VERIFICATION);
        else
            // ...
    }
}

public void onProgressUpdate(Integer... ints) {
    switch (ints[0]) {
    case NEED_USER_VERIFICATION:
        AlertDialog.Builder adb = new AlertDialog.Builder(mContext);
        adb.setTitle("Lisen!");
        adb.setMessage("I need your input");
        adb.setPostiveClickListener("Accept", this)
        adb.setNegativeClickListener("Cancel", this)
        adb.show();
    case PUBLISH_PROGRESS:
        // Update progress
    }
}

public void onClick(DialogInterface dialog, int which) {
    if (DialogInterface.POSITIVE == which) {
        needUserVerification = true
    } else {
        needUserVerification = false
    }
    verifying = false
} 
```

因为make 在主线程`publishProgress`中`onProgressUpdate`运行，所以一切都应该是花花公子。

# javascript - 窗口.close(); javascript代码不适用于chrome

> ID：12680033
> 
> 赞同：3
> 
> 时间：2012-10-01T19:49:40.653
> 
> 标签：javascript, css, html, mootools

我有一个图像 javascript 按钮，它不适用于 chrome ，

你能帮我提前谢谢！

这是代码：

我只是隐藏弹出窗口：

**编辑 ：**

关闭我正在使用这个功能只是隐藏它

```
function hideBulle() {
    $("bullepopup").style.display="none";
    hideoverlay();
} 
```

这是创建一个盒子和这个按钮的代码

```
 function showBulle(obj) {
    showoverlay();
    coo =   $("content").getPosition();
    $("bullepopup").style.width = "555px";
    $("bullepopup").style.height = "555px";
    $("bullepopup").position({x: (coo.x+((650-555)/2)), y: (coo.y+(440-250)/2)});
    $("bullepopup").style.display="";
    $("bullepopup").set('html','');
    new Element('img',{src:'images/br588.gif',styles: {float:'right',cursor:'pointer'},
                            events: {
                                click: function(){
                                hideBulle();
                                }
                            }
                        }).inject($('bullepopup'));

    new Element('br').inject($('bullepopup'));

    new Element('div',{html:obj.get('html')}).inject($('bullepopup'));
}
function hideBulle() {
    $("bullepopup").style.display="none";
    hideoverlay();
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T19:05:25.480

使用 chrome 开发者工具检查你的 css，你的按钮中应该有一些框架

删除或更改它

你也可以试试这段代码

```
window.open('', '_self', ''); //bug fix
window.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T17:12:47.543

top.window.close() 对我有用。在 IE、FF、Chrome、Safari 和 Opera 上测试。

# python - 使用 Homebrew 在带有 Mountain Lion 的 MBA 上安装 python 时构建失败

> ID：12680037
> 
> 赞同：0
> 
> 时间：2012-10-01T19:50:02.643
> 
> 标签：python, macos, homebrew

我收到以下错误消息，但在给出的链接中找不到解决方案。

```
==> make install PYTHONAPPSDIR=/usr/local/Cellar/python/2.7.3
ln -sf pythonw2 "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/bin/pythonw"
lipo -extract i386 -output /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/bin/python2.7-32 pythonw
lipo: input file (pythonw) must be a fat file when the -extract option is specified
make[1]: *** [install_pythonw] Error 1
make: *** [frameworkinstallapps] Error 2

Error: python did not build
Logs: /Users/einar/Library/Logs/Homebrew/python/
Help: https://github.com/mxcl/homebrew/wiki/troubleshooting
      https://github.com/mxcl/homebrew/issues/12918
      https://github.com/mxcl/homebrew/issues/15199 
```

我正在尝试遵循[本指南](http://www.thisisthegreenroom.com/2011/installing-python-numpy-scipy-matplotlib-and-ipython-on-lion/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:54:30.000

我没有正确地进行 RTFM。

“尝试使用旧环境，例如 brew install --env=std graphviz” 来自[https://github.com/mxcl/homebrew/wiki/troubleshooting](https://github.com/mxcl/homebrew/wiki/troubleshooting)修复它就好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T18:27:40.077

采用：

```
 $ brew install python --framework --with-brewed-openssl 
```

# machine-learning - 验证聚类算法的输出

> ID：12680038
> 
> 赞同：5
> 
> 时间：2012-10-01T19:50:03.413
> 
> 标签：machine-learning, scipy, data-mining, cluster-analysis, scikit-learn

**是否有客观的方法来验证聚类算法的输出？**

我正在对由具有许多属性的对象组成的数据集使用 scikit-learn 的亲和力传播聚类。提供给聚类算法的差分矩阵由这些属性的加权差分组成。我正在寻找一种方法来客观地验证距离权重的调整，如结果集群中所反映的那样。数据集很大并且具有足够的属性，因此手动检查小示例不是验证生成的集群的合理方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T22:34:11.330

**是的**：

将集群交给领域专家，让他分析算法找到的结构是否*合理*。与其说是新的，不如说是明智的。

...和 **否**：

没有可用的*自动*评估是*公平*的。从某种意义上说，它考虑了无监督聚类的目标：*知识发现*又名：学习有关数据的新知识。

自动评估聚类有两种常用方法：

*   内部凝聚力。即有一些特定的属性，例如与集群间方差相比，集群内方差要最小化。问题是作弊通常是微不足道的。即构建一个分数非常好的微不足道的解决方案。因此，不得使用此方法*来*比较基于不同假设的方法。您甚至不能公平地比较不同类型的层次聚类链接。

*   外部评价。您使用标记的数据集，并根据算法*重新发现*现有知识的程度对算法进行评分。有时这很有效，因此它是一种公认​​的评估技术。然而，任何*监督*或*半监督*方法当然会在这方面得分更高。因此，它是 A) 偏向*于*有监督的方法，并且 B) 实际上完全违背了发现你*还不*知道的东西的*知识发现思想。*

 *如果您真的打算使用集群——即了解一些关于您的数据的信息——您将不得不在某些时候*检查*集群，最好通过完全独立的方法，例如领域专家。如果他可以告诉您，例如，通过聚类确定的用户组是一个*尚未仔细调查**的重要*组，那么您就是赢家。

 *但是，不幸的是，大多数人都希望进行“一键式”（和一分）评估。

哦，“聚类”*并不是*真正的机器学习任务。实际上并没有涉及到学习。对于机器学习社区来说，它是无人关心的丑小鸭。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T10:15:40.393

还有另一种方法可以**通过计算子折叠的稳定性度量来评估聚类质量**，有点像监督模型的交叉验证：

*   将数据集拆分为 3 折 A、B 和 C。使用您的算法在 A+B 和 A+C 上计算两个聚类。计算交叉点 A 上 2 个标签的调整后的兰德指数或调整后的互信息，并将此值视为算法稳定性得分的估计值。

*   通过改组数据并将其分成 3 个其他折叠 A'、B' 和 C' 重复冲洗并重新计算稳定性分数。

*   平均 5 或 10 次运行的稳定性分数，以粗略估计稳定性分数的标准误差。

您可以猜到，这是一种计算机密集型评估方法。

了解这种基于稳定性的聚类算法评估在实践中是否真的有用以及确定它何时无法产生有效的模型选择标准仍然是一个开放的研究领域。请参阅Ulrike von Luxburg[的《聚类稳定性：概述》和其中的参考资料，了解有关这些问题的最新技术的概述。](http://arxiv.org/abs/1007.1075)

注意：如果您想使用此策略来选择 k-means 中的最佳 k 值，则使用 Adjusted for Chance 指标（例如 ARI 或 AMI）非常重要。NMI 和 V-measure 等未经调整的指标将倾向于任意偏爱具有更高 k 的模型。**

# c# - System.Web.Services.Protocols.SoapException：服务器无法识别 HTTP Header SOAPAction 的值（随机发生）

> ID：12680039
> 
> 赞同：0
> 
> 时间：2012-10-01T19:50:07.487
> 
> 标签：c#, soap

我目前遇到了从我们的一项网络服务中得到的错误。错误是：

System.Web.Services.Protocols.SoapException：服务器无法识别 HTTP 标头 SOAPAction 的值：在 System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse（SoapClientMessage 消息，WebResponse 响应，流 responseStream，布尔 asyncCall）在 System.Web .Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] 参数)

我记录的有关此错误的内容：它似乎是随机发生的 它大约在我们迁移服务的同时开始。在迁移之前没有错误。

任何故障排除提示将不胜感激。另请注意，我已经通过谷歌搜索此错误以及有关堆栈溢出的类似问题，我无法通过提供的答案解决此问题，我希望有人能带来一些新的见解。

# php - 无法使用php将数据插入数据库

> ID：12680044
> 
> 赞同：0
> 
> 时间：2012-10-01T19:50:32.520
> 
> 标签：php, database, insert

我在使用表单在我的数据库中发布数据时遇到问题。我确定非常基本的东西，但我很坚持：/

我可以使用 select from database 例程从我的数据库中取出东西。所以我知道与数据库的连接可能不是问题。

这是我的'upload.php'：

```
<html>
<head>
<title>Upload</title>
</head>
<body>

    <form action="action.php" method="post">

        <fieldset class="first">
             Name: 
        <input type="text" name="author" />
        Heading:
          <input type="text" name="heading" />

        Text:
        <textarea type="text" name="thecontent"> </textarea>
        </fieldset>

        <fieldset>
        <input type="submit"/> 
            </fieldset>
    </form>

</body>
</html> 
```

这是我的“action.php”：

```
<html>
<head>

<title>Send!</title>
</head>

<body>

<?php

 ini_set('display_errors', 1); error_reporting(E_ALL); 

$link = mysql_connect('localhost','name','pasword')
or die ("Unable to connect"); 

$mydb = mysql_select_db('the_database',$link)
or die ("No database found"); 

$author = $_POST['author']; 
$heading = $_POST['heading'];
$thecontent = $_POST['thecontent'];

$mysql_query="INSERT INTO articles ('heading', 'author', 'content')
 VALUES ('$heading','$author','$thecontent')" or die(mysql_error());   

echo "This was send: $author $heading $thecontent <br> ";

 mysql_close()

?> 

</body>
</html> 
```

所有帮助将不胜感激！

干杯，齐格

感谢所有的帮助家伙！我正在尝试使用 mysqli 插入数据但是它还没有工作这是我在 action.php 中的新代码：

```
<html>
<head>

<title>Send!</title>
</head>

<body>

<?php

 ini_set('display_errors', 1); error_reporting(E_ALL); 
$DB_HOST = 'localhost';
$DB_USER = '**';
$DB_PASS = '***';
$DB_NAME = '***';
@ $db = new mysqli($DB_HOST, $DB_USER, $DB_PASS, $DB_NAME);
if (mysqli_connect_errno()) {
echo 'Error.';
exit();
}

$author = $_POST['author']; 
$heading = $_POST['heading'];
$thecontent = $_POST['thecontent'];

$query = 'INSERT INTO articles ('heading', 'author', 'content')
 VALUES ('$heading','$author','$thecontent')';   

$result = $db->query($query);
    if ($result) {
    echo $db->affected_rows."This was added.";
    } 
    else {
    echo "somethings gone very wrong.";
    }

$db->close();

?> 

</body>
</html> 
```

我做错了什么伙计们？非常感谢您的帮助！

干杯，齐格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:53:31.680

您构建了**INSERT**字符串，但您从不调用一个方法来用它来真正地**插入**数据库。

此外，不推荐使用旧`mysql_*`方法，使用`PDO`API`mysqli`代替，请参阅[http://www.php.net/manual/en/mysqlinfo.api.choosing.php](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)

另请参阅有关此内容的 stackoverflow 帖子：[mysqli 或 PDO - 有什么优点和缺点？](https://stackoverflow.com/questions/13569/mysqli-or-pdo-what-are-the-pros-and-cons)

一些`PDO`准备好的语句示例`PDO`：[http ://www.php.net/manual/en/pdo.prepare.php](http://www.php.net/manual/en/pdo.prepare.php)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-01T20:01:06.770

```
$mysql_query="INSERT INTO articles    ('heading', 'author', 'content')
 VALUES ('$heading','$author','$thecontent')";
mysql_query($mysql_query);
//required to run the query..

And mysql_close(); // missing :p 
```

# javascript - html下拉框事件？

> ID：12680046
> 
> 赞同：1
> 
> 时间：2012-10-01T19:50:42.777
> 
> 标签：javascript, html, select, combobox

> **可能重复：**
> [如何在 html 选择的 onChange 上传递参数](https://stackoverflow.com/questions/5024056/how-to-pass-parameters-on-onchange-of-html-select)

在这里有点困惑。我知道选项标签中的 OnChange 事件没有发生任何事情。但是我想将选择的任何选项的值（1 到 7）传递到选择标记中的 onChange 事件中（代替我在那里的“7”）。最好的方法是什么？

我基本上想要一个字体大小选择框。fmtEdit 函数更改大小。

```
<select onchange="fmtEdit('Icontent','FontSize','7')">
  <option value="0" selected="true">font size</option>
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
  <option value="4">4</option>
  <option value="5">5</option>
  <option value="6">6</option>
  <option value="7">7</option>
</select> 
```

谢谢！加布斯特罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:11:38.127

您可以尝试[KRyan](https://stackoverflow.com/questions/5024056/how-to-pass-parameters-on-onchange-of-html-select)在 OP 下的评论中提到的链接，因为这应该可以解决您的问题。如果你坚持内联，试试这个。

```
<select onchange="fmtEdit('Icontent','FontSize',this.options[this.selectedIndex].value)">
  <option value="0" selected="true">font size</option>
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
  <option value="4">4</option>
  <option value="5">5</option>
  <option value="6">6</option>
  <option value="7">7</option>
</select> 
```

# php - 全文排名

> ID：12680049
> 
> 赞同：-1
> 
> 时间：2012-10-01T19:50:51.713
> 
> 标签：php

> **可能重复：**
> [如何根据与用户输入匹配的单词数进行排名](https://stackoverflow.com/questions/12679751/how-to-have-ranking-based-on-how-many-words-match-user-input)

我怎样才能让搜索引擎按输入的单词数量进行排名，并按它们在标题、描述、关键字、链接字段中出现的类型数量进行排名。

因此，较高的结果是通过拥有更多用户提交的单词来排序的。假设如果用户输入 iPhone，iPhone 关键字会出现在链接、描述和标题字段中，因此排名会高于仅在描述中提到它的 Apple 和在标题和描述中提到它的 Apple Store .

我的代码如下：

```
 $query = " SELECT * FROM scan WHERE "; 

 $terms = array_map('mysql_real_escape_string', $terms);
 $i = 0; 
 foreach ($terms as $each) {
  if ($i++ !== 0){
        $query .= " AND "; 
  }
  $query .= "Match(title, description, keywords, link) Against ('".implode(' ',$terms)." IN BOOLEAN MODE') ";
  } 
  $secs = microtime();  

$query = mysql_query($query) or die('MySQL Query Error: ' . mysql_error( $connect ));

echo '<p class="time">Qlick showed your results in ' . number_format($secs,2) . ' seconds.</p>';     

 $numrows = mysql_num_rows($query);
if ($numrows > 0) {

      while ($row = mysql_fetch_assoc($query)) {
            $id = $row['id'];
            $title1 = $row['title'];
            $description = $row['description'];
            $keywords = $row['keywords'];
            $link = $row['link'];
            $rank = $row['rank'];
          $title = substr($title1,0,60);

        echo '<h2><a class="ok" href="' . $link . '">' . $title . '</a></h2>' . PHP_EOL;
                    echo '<p class="kk">' . $description . '<br><br><span class="keywords">' . PHP_EOL;            
                    echo '<p><a class="okay" href="' . $link . '">' . $link . '<br><br><span class="keywords">' . PHP_EOL;
                      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:58:43.907

[虽然我确信可以在 mysql 中实现这一点，但像solr/lucene](http://lucene.apache.org/solr/)这样的全文搜索索引旨在直接处理这些内容。您可能会找到更好的资源并帮助您沿着这条路走下去。

使用 php，复制 mysql 查询返回的数组：

```
while ($row = mysql_fetch_assoc($query))
{ 
 $rows[] = $row;
} 
```

然后你可以循环 $rows 并为

```
foreach ($rows as $row)
  $row['score'] = score_row($row, $terms) 
```

score_row 是一个辅助方法，它根据哪些列具有哪些术语以及您对“重要性”的定义返回更大的分数。

然后按分数对行进行排序，然后按照您的操作打印结果。

# facebook-graph-api - 查找整个域的 link_stat 中的所有链接计数

> ID：12680052
> 
> 赞同：0
> 
> 时间：2012-10-01T19:50:59.967
> 
> 标签：facebook-graph-api, facebook-fql

是否可以在 link_stat 表中找到整个域的所有统计信息？

```
SELECT share_count, like_count, comment_count, total_count, click_count FROM link_stat WHERE url = "http://www.facebook.com" 
```

喜欢“http://facebook.com%”是行不通的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:53:50.507

我一直找不到简单的方法。我发现这样做的唯一方法是将所有网址手动添加到`IN`比较中。

```
WHERE url IN ('url1', 'url2', ..., 'urln') 
```

在这里尝试使用`CONTAINS()`会出错`The link_stat table does not support search.`

# c# - 如何绑定列表 到gridview？

> ID：12680053
> 
> 赞同：-1
> 
> 时间：2012-10-01T19:51:11.677
> 
> 标签：c#, asp.net, list, data-binding, gridview

我在任何地方都找不到答案...我的 List<string[]> 填充如下：

```
...
while (myReader.Read())
{
    string[] row = new string[myInt];

    for (int i = 0; i < myInt; i++)
    {
        row[i] = myReader[i].ToString();
    }

    myList.Add(row);    
}
... 
```

如何将此列表绑定到具有 TemplateField 列的网格视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T20:14:32.910

一种更简单的方法是创建一个匿名类并将其绑定到您的 GridView。例子：

```
var query = from c in row
            select new { SomeProperty = c };

GridView.DataSource=query;
GridView.DataBind(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:07:21.910

您可以随时`RowDataBound`使用`GridView`

```
<asp:GridView ID="gridView1" runat="server" 
    OnRowDataBound="gridView1_DataBound">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:Label ID="myLabel" runat="server"></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

绑定数据时：

```
var myStrings = new List<string[]>
                      {
                          new [] { "hello", "bye"},
                          new [] { "1", "2"}
                      };

gridView1.DataSource = myStrings;
gridView1.DataBind(); 
```

`RowDataBound`事件：

```
public void gvDataBound(object sender, GridViewRowEventArgs e)
{
    if(e.Row.RowType != DataControlRowType.DataRow)
    {
        return;
    }

    var item = (string[]) e.Row.DataItem;
    Label myLabel = e.Row.FindControl("myLabel") as Label;
    myLabel.Text = item[0];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T19:59:20.693

像往常一样简单地使用数据绑定。要引用该列，它默认按索引进行。所以像这样：

```
<asp:GridView runat="server" AutoGenerateColumns="false" ID="rpt">
<Columns>
    <ItemTemplate>
        <%# Eval("Key") %>
    </ItemTemplate>
</Columns>
</asp:Repeater>

Dictionary<string, string> lst = new Dictionary<string, string>();
lst.Add("test", String.Empty);
lst.Add("test1", String.Empty);
this.rpt.DataSource = lst;
this.rpt.DataBind(); 
```

# android - requestWindowFeature() 的目的是什么？

> ID：12680055
> 
> 赞同：24
> 
> 时间：2012-10-01T19:51:14.973
> 
> 标签：android, user-interface

做什么`requestWindowFeature()`？我用它来创建一个自定义标题栏，但我真的不明白它的目的是什么。

[此处](http://developer.android.com/reference/android/app/Activity.html#requestWindowFeature%28int%29)SDK 文档中提供的解释没有意义。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-01T20:06:19.630

每个活动都有一个关联的窗口（整个 UI 在其上绘制）。此窗口具有默认的绘制方式（工具栏、操作栏、图标是否绘制）。

但是，您可以使用[`requestWindowFeature`](http://developer.android.com/reference/android/app/Activity.html#requestWindowFeature(int))来要求系统包含或排除某些 Windows 功能（工具栏、操作栏等）。

在这里您可以找到支持的功能的完整列表：http: [//developer.android.com/reference/android/view/Window.html](http://developer.android.com/reference/android/view/Window.html)

例如，您可以使用[`FEATURE_NO_TITLE`](http://developer.android.com/reference/android/view/Window.html#FEATURE_NO_TITLE)使窗口全屏或[`FEATURE_RIGHT_ICON`](http://developer.android.com/reference/android/view/Window.html#FEATURE_RIGHT_ICON)让系统知道应该在右侧绘制图标。

# jqgrid - JQGrid 组文本自定义格式化程序，内部带有按钮并传递 RowData

> ID：12680057
> 
> 赞同：2
> 
> 时间：2012-10-01T19:51:16.047
> 
> 标签：jqgrid

我需要在分组行上提供一个按钮，当单击该按钮时，我应该捕获 rowData。我尝试使用自定义格式化程序、grid.SetCell 选项来实现这一点，但没有奏效。这是示例代码：

```
grid.jqGrid({

        datatype: 'local',

colNames: ['Id', 'Order Id', 'Name', 'OrderName'],

 colModel : [

{ name: 'ID', index: 'ID', editable: true}, //// I grouped by this column

 { name: 'OrderID', index: 'OrderID', width: 30, align: 'center'},

 { name: 'Name', index: 'Name', width: 30, align: 'center'},

 { name: 'OrderName', index: 'OrderName', width: 30, align: 'center'}

],

groupingView: {

            groupField: ['ID'],
            groupCollapse: true,
            groupColumnShow: [false],
            groupText: ['<b>{0}</b></div><input type = "button" class = "button" value = "NEW" id = "btnNew" style = "width:100px; hieght:10px" onclick = "javascript:AddNew({OrderID})" /><<b>{1} Orders</b>']

function AddNew(orderId)
{
//// DO SOME THING
} 
```

在上面的示例中，我的网格将按 Id 分组，在每个分组的行上，我需要创建一个按钮，该按钮的 onclick 事件应由 Order Id 组成。（每个组下的所有行的订单 ID 都是相同的）。我还需要在这里显示 Count。

我无法在上面的文本组中传递订单 ID，然后我像这样在 ID 列上使用自定义格式化程序。

```
var html ;

formatter: function(cellValue, options, rowObject)
{
 if ((options.rowId.toString()).indexOf("listghead") === -1) {

    html = cellvalue + "<input type = "button", value = "New" onclick = AddNew(' +rowObject[1] +')
}

return html;

} 
```

rowObject 值已被传递，但分组被破坏。如果我不使用上述条件分组工作正常，但 onclick 事件正在中断。

帮我 。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T13:20:19.053

当涉及到 group header 时，您可以只传递 rowObject ，当涉及到 groupheader 时，它不是 undefined 或 null 。

当您检测到它的组标题时，只需使用 alert(rowObject) 对其进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:39:11.720

您可以通过 rowObject 获取行值，这样：

```
html = rowObject.childNodes[1].childNodes[0].wholeText; 
```

此代码将包含 rowObject 内容的字符串返回到该列

# php - 检查字符串以获取有效的目录名称

> ID：12680061
> 
> 赞同：6
> 
> 时间：2012-10-01T19:51:29.040
> 
> 标签：php, directory

我需要一个本机或用户制作的函数来检查字符串是否是有效的目录名称。我查看了 PHP 文档，我只能找到`is_dir`检查它是否是现有目录而不是有效目录名称的函数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T19:58:39.023

这应该适合你。

请参阅[正则表达式以验证文件夹名称和文件名](https://stackoverflow.com/questions/6222215/regex-for-validating-folder-name-file-name)

```
if (strpbrk($filename, "\\/?%*:|\"<>") === FALSE) {
  /* $filename is legal; doesn't contain illegal character. */
}
else {
  /* $filename contains at least one illegal character. */
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T20:18:15.637

这会奏效。您可以根据需要修改第二个和第三个参数。

```
if (!mkdir($directory, 0700, true)) {
    die('Error: Illegal directory.');
} 
```

请注意，如果目录名称有效，这将创建目录。但是，以我的拙见（并且不知道您的特定用例），这是大多数语言中处理检查目录名称有效性的首选方式。只需尝试创建目录，如果失败，则告诉他们它失败了​​。

这样做的好处是它使您的代码文件系统不可知，并且它是验证和创建目录的最不容易出错的方法，因为在您验证目录和何时之间没有其他进程或线程能够创建目录你创造它。

缺点是此方法假定您要立即创建目录。

当然，`mkdir()`可能失败的原因有很多（例如，权限不足、硬件故障、目录名无效等），因此您可能希望根据错误向用户显示不同的错误消息。不幸的是，PHP 没有像其他一些语言那样强大的异常处理，但是如果您想走这条路，您应该能够使用诸如此[答案](https://stackoverflow.com/a/1241751/25295)`mkdir()`中的方法来捕获可能生成的不同警告。

# entity-framework - AutoMapper - 将两个实体对象转换为单个 DTO

> ID：12680062
> 
> 赞同：0
> 
> 时间：2012-10-01T19:51:31.030
> 
> 标签：entity-framework, automapper

我有两个 EntityFramework 模型，我想将它们组合成一个 DTO。有没有办法做到这一点？以下问题中有几个想法，但您要么必须创建复合模型，要么无法调用 Mapper.AssertConfigurationIsValid 来验证所有属性是否已设置。

[是否可以使用 Automapper 将多个 DTO 对象映射到单个 ViewModel？](https://stackoverflow.com/questions/2127786/is-it-possible-to-map-multiple-dto-objects-to-a-) 单视图模型使用自动映射

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:10:06.617

从我的角度来看，强烈建议创建用于合并实体的复合类型。实体是业务逻辑或域逻辑的一部分（取决于您的架构），而 DTO 是表示逻辑或传输层的一部分。您可以创建一个可以轻松测试的显式映射；自动映射（创建不带选项的映射）仅适用于测试。如果您使用的是 DTO，那么您可能会在某处使用它：在 WCF 中？作为视图模型？

Visual Studio 和 .Net Framework 可以管理许多文件，而且您不必牺牲可测试性或简单性（您知道“技术债务”吗？）

注意： Mapper.AssertConfigurationIsValid 的作用是验证所有由自动或显式映射生成的映射。我建议你每次都打电话。

# flex4 - 解决 Flex/Adobe Flash Builder 中未找到导入的错误

> ID：12680067
> 
> 赞同：0
> 
> 时间：2012-10-01T19:52:06.720
> 
> 标签：flex4, flash-builder4.5

我对 Flex/Adobe FlashBuilder 非常陌生，我遇到了“找不到导入”错误。来自 Java 背景，我理解这更像是在 Flex/Flash 中导入相当于 *.jar 文件的问题。但是我应该如何解决这个问题，我不知道。

任何人都想帮助并获得一些积分:)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:11:50.167

如果您是初学者，您导入的所有内容可能都是 Flex 框架或由您制作的。如果您导入自己的类，请记住在其名称中保留包（如果来自不同的包）。检查类名是否有拼写错误。

在代码中使用类时，您可以使用内容辅助 ( `Ctrl+Space`)，然后会自动添加导入。

您还可以查看 quickfix lightbulb 所说的内容（它与 Eclipse 中的相同，因为 FBuilder 是基于它的）。

通过包含导致错误的代码，您可以使您的问题变得更好。

# javascript - Uncaught SyntaxError: Unexpected token ILLEGAL

> ID：12680072
> 
> 赞同：2
> 
> 时间：2012-10-01T19:52:19.967
> 
> 标签：javascript, html, css, wordpress, syntax-error

> **可能重复：**
> [webkit 中出现意外的令牌非法](https://stackoverflow.com/questions/4404526/unexpected-token-illegal-in-webkit)

我为这个网站[http://avuedesigns.com/new/](http://avuedesigns.com/new/)写了一个简单的悬停效果脚本[http://jsfiddle.net/paDmg/368/](http://jsfiddle.net/paDmg/368/) - 它适用于 jsfiddle，但我得到了

> Uncaught SyntaxError: Unexpected token ILLEGAL

当我把它放在我的 JavaScript 中时。它在第 29 行告诉我哪个是结束标记 });​</p>

```
$('#hover-grid .indiv-cell').hover(function() {

//set variables to current cell attributes
var cellHeader = $(this).attr('data-hoverheader');
var cellText = $(this).attr('data-hovertext');
var replacementImg = $(this).find('a img').attr('data-replacementimg');
var oringinalImg = $(this).find('a img').attr('src');

//save original image to data variable
$(this).data('origImg', oringinalImg);

//add remove classes
$('#hover-grid .indiv-cell').removeClass('newClass');
$(this).addClass('newClass', 1000);
$(this).find('a img').hide().attr('src', replacementImg).fadeIn(300);
$('.master-cell h1').hide().text(cellHeader).fadeIn(300);
$('.master-cell p').hide().text(cellText).fadeIn(300);

//return false;
}, function() {
    $(this).find('a img').hide().attr('src', $(this).data('origImg')).fadeIn(10);
});​ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T19:54:58.820

您可能嵌入了非法字符。使用十六进制编辑器查看您的 JS 并查找任何不可见的 ASCII 字符。他们可能会被 JSfiddle 剥离

请参阅[Chrome 未捕获语法错误：意外令牌非法](https://stackoverflow.com/questions/5733275/chrome-uncaught-syntax-error-unexpected-token-illegal)

# actionscript-3 - AS3 对象数组未添加到舞台

> ID：12680074
> 
> 赞同：1
> 
> 时间：2012-10-01T19:52:21.353
> 
> 标签：actionscript-3

所以我一般来说是 AS3 和 AS 的新手。我确实在一定程度上了解 Java，并且非常了解 PHP。

我正在尝试通过编写一个以编程方式创建十六进制地图的应用程序来学习。我正在使用一个六边形库，我将在下面包含它，但是这是我的问题。当我运行一个 for 循环，比如说 10 个计数，然后我创建一个形状，添加形状并绘制形状，它没有问题。在同一个循环中，如果我将形状推送到数组，然后添加该数组元素，然后绘制它，我什么也得不到。

```
package
{
    import flash.display.MovieClip;
    import flash.display.Shape;
    import flash.text.TextField;

    public class Main extends MovieClip
    {
        private var radius:Number = 30;
        private var sides:Number = 6;
        private var myrotation:Number = 0;
        private var lineColor:Number = 0x000000;
        private var lineThickness:Number = 1;
        private var l:TextField = new TextField();
        private var f:Array = new Array(20);
        public function Main()
        {
            l.text = "test";
            addChild(l);
            //WORKS should be red
            for(var j:int = 0; j<stage.stageWidth/(radius*2);j++)
            {
                var t:Polygon = new Polygon();
                addChild(t);
                t.drawPolygon(radius,sides,2*radius*j,radius*2,0xFF0000,lineThickness,myrotation);
            }

            //DOES NOT WORK (note the *3 is so it is lower down) should be blue
            for(var j:int = 0; j<stage.stageWidth/(radius*2);j++)
            {
                f.push(new Polygon());
                addChild(f[j]);
                f[j].drawPolygon(radius,sides,2*radius*j,radius*3,0x0000FF,lineThickness,myrotation);
            }   
        }
    }
} 
```

我正在使用的多边形类如下。我从某处的互联网上抓取了它。

```
 package
{
    import flash.display.MovieClip;
    import flash.events.Event;

    public class Polygon extends MovieClip
    {
        //PROPERTIES
        private var points:Array;

        private var id:int;
        private var ratio:Number;
        private var top:Number;

        private var fade_value:int;

        //CONSTRUCTOR
        public function Polygon()
        {
            addEventListener(Event.ADDED_TO_STAGE,init);
        }

        private function init(evt:Event):void
        {
            removeEventListener(Event.ADDED_TO_STAGE,init);
            stage.frameRate=31;
        }

        //METHODS
        public function drawPolygon(radius:int,segments:int,centerX:Number,centerY:Number,tint:uint,line:int,rotating:Number):void
        {
            id=0;
            points=new Array();
            ratio=360/segments;
            top=centerY-radius;
            for(var i:int=rotating;i<=360+rotating;i+=ratio)
            {
                var xx:Number=centerX+Math.sin(radians(i))*radius;
                var yy:Number=top+(radius-Math.cos(radians(i))*radius);
                points[id]=new Array(xx,yy);
                if(id>=1) 
                {
                    drawing(points[id-1][0],points[id-1][1],points[id][0],points[id][1],tint,line);
                }
                id++;
            }
            id=0;
        }

        private function radians(n:Number):Number 
        {
            return(Math.PI/180*n);
        }

        private function drawing(startX:Number,startY:Number,stopX:Number,stopY:Number,tint:Number,line:int):void 
        {
            graphics.lineStyle(line,tint,1);
            graphics.moveTo(startX,startY);
            graphics.lineTo(stopX,stopY);
        }

        public function fadeOut():void
        {
            fade_value=0;
            addEventListener(Event.ENTER_FRAME,fade);
        }
        public function fadeIn():void
        {
            fade_value=1;
            addEventListener(Event.ENTER_FRAME,fade);
        }

        //PRIVATE
        private function fade(evt:Event):void
        {
            var da:Number=fade_value-alpha;
            var aa:Number=da*.1;
            alpha+=aa;
            if(Math.abs(da)<=.05)
            {
                alpha=fade_value;
                removeEventListener(Event.ENTER_FRAME,fade);
                if(fade_value==0)
                    dispatchEvent(new Event('fadeOutDone'));
                else
                    dispatchEvent(new Event('fadeInDone'));
            }
        }
    }
} 
```

----EDIT---- 代码现在如下，出现同样的问题。我尝试添加一个向量并尝试转换数组元素。包 { 导入 flash.display.MovieClip; 导入 flash.display.Shape；导入 flash.text.TextField；

```
 public class Main extends MovieClip
    {
        private var radius:Number = 30;
        private var sides:Number = 6;
        private var myrotation:Number = 0;
        private var lineColor:Number = 0x000000;
        private var lineThickness:Number = 1;
        private var l:TextField = new TextField();
        private var f:Array = new Array(20);
        private var v:Vector.<Polygon> = new Vector.<Polygon>(10);
        public function Main()
        {
            l.text = "test";
            addChild(l);
            //WORKS should be red
            for(var i:int = 0; i<stage.stageWidth/(radius*2);i++)
            {
                var t:Polygon = new Polygon();
                addChild(t);
                t.drawPolygon(radius,sides,2*radius*i,radius*2,0xFF0000,lineThickness,myrotation);
            }

            //DOES NOT WORK (note the *3 is so it is lower down) should be blue
            for(var j:int = 0; j<stage.stageWidth/(radius*2);j++)
            {
                f.push(new Polygon());
                addChild(f[j]);
                Polygon(f[j]).drawPolygon(radius,sides,2*radius*j,radius*3,0x0000FF,lineThickness,myrotation);
            } 

            for(var k:int = 0; k<stage.stageWidth/(radius*2);k++)
            {
                v.push(new Polygon());
                addChild(v[k]);
                v[k].drawPolygon(radius,sides,2*radius*k,radius*3.5,0x00FF00,lineThickness,myrotation);
            }   
        }
    }
} 
```

整理笔记...

加载配置文件 C:\Program Files (x86)\Adobe\Adobe Flash Builder 4.6\sdks\4.6.0\frameworks\flex-config.xml 初始设置：64ms 开始加载 swcs 14ms 运行总计：78ms 加载 30 个 SWC：484ms 预编译: 841ms C:\Users\jmasiello.place\Documents\flash\Main.as: 警告：此编译单元没有在 Frame 元数据中指定 factoryClass 来加载配置的运行时共享库​​。要在没有运行时共享库​​的情况下进行编译，请将 -static-link-runtime-shared-libraries 选项设置为 true 或删除 -runtime-shared-libraries 选项。

文件：145 时间：961ms 链接... 25ms 优化... 26ms SWF 编码... 11ms C:\Users\jmasiello.place\Documents\flash\Main.swf (1809 bytes) 后编译：65ms 总时间：1595ms 峰值内存使用：47 MB​​（堆：29，非堆：18）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:03:39.930

W当你这样做时

```
private var f:Array = new Array(20); 
```

您在 implements 中创建一个包含 20 个元素的数组，
然后您将一个元素推入同一个数组。
f.push(新多边形()); 通过推送一个元素，您将添加到最后一个元素，
这使得数组的前 20 个元素为空，第 21 个元素为多边形，
您甚至可以通过执行来验证它。

```
for(var j:int = 0; j<stage.stageWidth/(radius*2);j++){
    f.push(new Polygon());
    trace(f)
} 
```

因此，在您的代码中，您将推入第 21 个元素，然后通过

```
addChild(f[j]); 
```

其中 j = 0 并且 0 中的元素仍然为 null
那么修复它的最佳方法是

```
private var f:Array = new Array(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:04:50.957

你有任何错误吗？您可能需要转换为 Polygon 以使编译器接受 drawPolygon 方法。

```
for(var j:int = 0; j<stage.stageWidth/(radius*2);j++) {
 f.push(new Polygon());
 addChild(f[j]);
 Polygon(f[j]).drawPolygon(radius,sides,2*radius*j,radius*3,0x0000FF,lineThickness,myrotation;
} 
```

要跳过转换，您可以使用 Vector 而不是 Array，因为编译器将知道它专门处理 Polygons。

# maven - 从 src/main/resources 中的 XML 文件生成 Java 源的 maven 插件设计

> ID：12680078
> 
> 赞同：0
> 
> 时间：2012-10-01T19:52:44.237
> 
> 标签：maven, code-generation, classpath, maven-plugin

我正在为[JCasGen](http://uima.apache.org/d/uimaj-2.4.0/tools.html#ugr.tools.jcasgen)开发一个 Maven 插件，它采用 XML 类型系统描述文件并生成一些 Java 类。[类型系统描述文件通常通过类路径](http://uima.apache.org/d/uimaj-2.4.0/references.html#ugr.ref.xml.component_descriptor.imports)指向同一个项目中的其他类型系统描述文件。因此，JCasGen 需要一个包含所有 XML 类型系统描述文件的类路径才能运行。（这些 XML 文件也必须放在项目的最终 jar 文件中，因为 Java 代码也可以通过类路径引用它们。）

XML 文件在其中，`src/main/resources`以便 Maven 将它们复制到其中，`target/classes`并且它们将包含在项目的 jar 文件中。所以给插件的自然类路径是`target/classes`. 但是，如果我的插件在直观`generate-sources`阶段运行，则其中的 XML 文件`src/main/resources`还没有被复制到`target/classes`中，JCasGen 将失败。

那么，我该如何构造事物以便为 JCasGen 提供正确的类路径呢？

以下是我想到的几件事，但我真的不知道它们是否有意义：

1.  在阶段上运行插件`process-resources`，仅`target/classes`用于类路径。这就是我目前正在做的，它似乎工作。（我担心确保我的插件始终在标准 Maven 资源复制之后运行，但这似乎是默认情况下发生的情况。）这种方法的主要问题是，`process-resources`对于生成源的插件来说，这不是直观的阶段。

2.  通过连接资源目录和构建类路径`target/classes`：

    ```
    StringBuilder classpath = new StringBuilder();
    for (Resource resource : this.project.getBuild().getResources()) {
      classpath.append(resource.getDirectory());
      classpath.append(File.pathSeparatorChar);
    }
    classpath.append(this.project.getBuild().getOutputDirectory()); 
    ```

    我尝试了类似的方法，它似乎可以工作，但我担心对于包含或排除的复杂资源，这可能会失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:55:24.490

创建一个多模块项目，其中第一个模块只是将 xml 文件复制到一个 jar 中。第二个模块使用该 jar 作为输入并执行插件。

```
.
├── pom.xml
├── xml
| ├── pom.xml
| └── 源
| └── 主要
| └── 资源
| └── com
| └── 堆栈溢出
| ├── 包1
| | └── FirstClass.xml
| └── 包2
| └── SecondClass.xml
└── 创
    └── pom.xml

```

`pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.stackoverflow</groupId>
    <artifactId>Q12682078</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>pom</packaging>

    <name>${project.artifactId}-${project.version}</name>

    <modules>
        <module>xml</module>
        <module>gen</module>
    </modules>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>com.stackoverflow</groupId>
                <artifactId>Q12682078-xml</artifactId>
                <version>${project.version}</version>
            </dependency>
        </dependencies>
    </dependencyManagement>
</project> 
```

`xml/pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.stackoverflow</groupId>
        <artifactId>Q12682078</artifactId>
        <version>1.0-SNAPSHOT</version>
    </parent>

    <artifactId>Q12682078-xml</artifactId>

    <name>${project.artifactId}-${project.version}</name>
</project> 
```

`gen/pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.stackoverflow</groupId>
        <artifactId>Q12682078</artifactId>
        <version>1.0-SNAPSHOT</version>
    </parent>

    <artifactId>Q12682078-gen</artifactId>

    <name>${project.artifactId}-${project.version}</name>

    <dependencies>
        <dependency>
            <groupId>com.stackoverflow</groupId>
            <artifactId>Q12682078-xml</artifactId>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <!-- your plugin that now has the xml files in the classpath -->
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:08:22.123

我不完全理解您的问题，我将其添加为能够正确格式化它的答案（所以请不要投票，除非它是实际使用的！）。

我知道您的插件应该在生成源阶段运行：这是正确的阶段，句号:)。

maven 标准规定生成的代码应该放在 target/generated-sources/ 下，例如[jaxb2 插件](http://mojo.codehaus.org/jaxb2-maven-plugin/xjc-mojo.html)将文件放在 target/generated-sources/jaxb 下，maven 在编译过程中会自动添加这个文件夹。

我建议您查看 jaxb2 插件以找到一些指导。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T23:38:33.280

`process-resources`只需在阶段上运行插件。此解决方案由生成源并需要访问类路径的其他插件使用：

*   GWT Maven 插件[gwt:resources](http://mojo.codehaus.org/gwt-maven-plugin/resources-mojo.html)和[gwt:mergewebxml](http://mojo.codehaus.org/gwt-maven-plugin/mergewebxml-mojo.html)目标
*   jDTAUS Container Mojo [spring-descriptor](http://www.jdtaus.org/1.0.x/jdtaus-core/jdtaus-container-mojo/spring-descriptor-mojo.html)目标

请注意，要获得您应该使用的类路径`project.getCompileClasspathElements()`，而不是`project.getBuild().getOutputDirectory()`. 前者将确保您获得`target/classes`当前项目所依赖的项目目录等。

# python - 带有属性的python枚举

> ID：12680080
> 
> 赞同：39
> 
> 时间：2012-10-01T19:53:02.660
> 
> 标签：python, enums

考虑：

```
class Item:
   def __init__(self, a, b):
       self.a = a
       self.b = b

class Items:
    GREEN = Item('a', 'b')
    BLUE = Item('c', 'd') 
```

有没有办法让简单枚举的想法适应这种情况？（见[这个问题](https://stackoverflow.com/questions/36932/whats-the-best-way-to-implement-an-enum-in-python)）理想情况下，就像在 Java 中一样，我想把它全部塞进一个类中。

Java模型：

```
enum EnumWithAttrs {
    GREEN("a", "b"),
    BLUE("c", "d");

    EnumWithAttrs(String a, String b) {
      this.a = a;
      this.b = b;
    }

    private String a;
    private String b;

    /* accessors and other java noise */
} 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-10-10T15:44:59.573

Python 3.4 有一个[新的 Enum 数据类型](https://docs.python.org/3/library/enum.html)（它已被[向后移植`enum34`](https://pypi.python.org/pypi/enum34)并[增强为`aenum`](https://pypi.python.org/pypi/aenum)¹）。`enum34`和`aenum`²都可以轻松支持您的用例：

*   `aenum`（Python 2/3）

    ```
     import aenum
      class EnumWithAttrs(aenum.AutoNumberEnum):
          _init_ = 'a b'
          GREEN = 'a', 'b'
          BLUE = 'c', 'd' 
    ```

*   `enum34`(Python 2/3) 或标准库`enum`(Python 3.4+)

    ```
     import enum
      class EnumWithAttrs(enum.Enum):

          def __new__(cls, *args, **kwds):
              value = len(cls.__members__) + 1
              obj = object.__new__(cls)
              obj._value_ = value
              return obj
          def __init__(self, a, b):
              self.a = a
              self.b = b

          GREEN = 'a', 'b'
          BLUE = 'c', 'd' 
    ```

并在使用中：

```
>>> EnumWithAttrs.BLUE
<EnumWithAttrs.BLUE: 1>

>>> EnumWithAttrs.BLUE.a
'c' 
```

* * *

¹披露：我是[Python stdlib`Enum`](https://docs.python.org/3/library/enum.html)、[`enum34`backport](https://pypi.python.org/pypi/enum34)和[Advanced Enumeration ( `aenum`)](https://pypi.python.org/pypi/aenum) 库的作者。

² `aenum`还支持`NamedConstants`基于元类的`NamedTuples`.

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2019-02-17T10:08:37.910

对于 Python 3：

```
class Status(Enum):
    READY = "ready", "I'm ready to do whatever is needed"
    ERROR = "error", "Something went wrong here"

    def __new__(cls, *args, **kwds):
        obj = object.__new__(cls)
        obj._value_ = args[0]
        return obj

    # ignore the first param since it's already set by __new__
    def __init__(self, _: str, description: str = None):
        self._description_ = description

    def __str__(self):
        return self.value

    # this makes sure that the description is read-only
    @property
    def description(self):
        return self._description_ 
```

您可以按类型将其用作标准枚举或工厂：

```
print(Status.READY)
# ready
print(Status.READY.description)
# I'm ready to do whatever is needed
print(Status("ready")) # this does not create a new object
# ready 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-10-01T19:58:15.713

在 Python 3.4 和添加出色的[`enum`模块](https://docs.python.org/3/library/enum.html)之前，一个不错的选择是使用[namedtuple](http://docs.python.org/library/collections.html#collections.namedtuple)：

```
from collections import namedtuple

Item = namedtuple('abitem', ['a', 'b'])

class Items:
    GREEN = Item('a', 'b')
    BLUE = Item('c', 'd') 
```

现在，任何*受支持*的 Python 版本都有`enum`，所以请使用该模块。它使您可以更好地控制每个枚举值的生成方式。

如果您给每个项目一个值元组，那么这些值将`__init__`作为单独的（位置）参数传递给方法，这样您就可以在枚举值上设置其他属性：

```
from enum import Enum

class Items(Enum):
    GREEN = ('a', 'b')
    BLUE = ('c', 'd')

    def __init__(self, a, b):
        self.a = a
        self.b = b 
```

这将生成枚举条目，其值是分配给每个名称的元组，以及两个属性`a`和`b`：

```
>>> Items.GREEN, Items.BLUE
(<Items.GREEN: ('a', 'b')>, <Items.BLUE: ('c', 'd')>)
>>> Items.BLUE.a
'c'
>>> Items.BLUE.b
'd'
>>> Items(('a', 'b'))
<Items.GREEN: ('a', 'b')> 
```

请注意，您可以通过再次传入相同的元组来查找每个枚举值。

如果第一项应该代表每个枚举条目的值，请使用一种`__new__`方法来设置`_value_`：

```
from enum import Enum

class Items(Enum):
    GREEN = ('a', 'b')
    BLUE = ('c', 'd')

    def __new__(cls, a, b):
        entry = object.__new__(cls) 
        entry.a = entry._value_ = a  # set the value, and the extra attribute
        entry.b = b
        return entry

    def __repr__(self):
        return f'<{type(self).__name__}.{self.name}: ({self.a!r}, {self.b!r})>' 
```

我也添加了一个自定义`__repr__`，默认只包括`self._value_`. 现在每个条目的值由元组中的第一项定义，可用于查找枚举条目：

```
>>> Items.GREEN, Items.BLUE
(<Items.GREEN: ('a', 'b')>, <Items.BLUE: ('c', 'd')>)
>>> Items.BLUE.a
'c'
>>> Items.BLUE.b
'd'
>>> Items('a')
<Items.GREEN: ('a', 'b')> 
```

有关更多选项，请参阅[文档中的](https://docs.python.org/3/library/enum.html#when-to-use-new-vs-init)[vs.](https://docs.python.org/3/library/enum.html#when-to-use-new-vs-init)[部分。`__init__``__new__`](https://docs.python.org/3/library/enum.html#when-to-use-new-vs-init)

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2020-06-26T18:50:12.370

这是另一种方法，我认为它比其他方法更简单，但具有最大的灵活性：

```
from collections import namedtuple
from enum import Enum

class Status(namedtuple('Status', 'name description'), Enum):
    READY = 'ready', 'I am ready to do whatever is needed'
    ERROR = 'error', 'Something went wrong here'

    def __str__(self) -> str:
        return self.name 
```

按预期工作：

```
print(Status.READY)
print(repr(Status.READY))
print(Status.READY.description)
print(Status.READY.value) 
```

印刷：

```
ready
<Status.READY: Status(name='ready', description='I am ready to do whatever is needed')>
I am ready to do whatever is needed
Status(name='ready', description='I am ready to do whatever is needed') 
```

你会得到最好的[namedtuple](https://docs.python.org/3/library/collections.html#collections.namedtuple) *和* [Enum](https://docs.python.org/3/library/enum.html)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-07-25T17:04:43.233

对于小型枚举@property 可能会起作用：

```
class WikiCfpEntry(Enum):
    '''
    possible supported storage modes
    '''
    EVENT = "Event"      
    SERIES = "Series"

    @property
    def urlPrefix(self):
        baseUrl="http://www.wikicfp.com/cfp"
        if self==WikiCfpEntry.EVENT:
            url= f"{baseUrl}/servlet/event.showcfp?eventid="
        elif self==WikiCfpEntry.SERIES:
            url= f"{baseUrl}/program?id="
        return url 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-09-01T15:05:47.340

对于基于关键字的属性初始化，您可以尝试[data-enum](https://github.com/chasefinch/data-enum)，这是一种更轻量级的 enum 实现，在某些情况下具有更简洁的语法，包括本例。

```
from data_enum import DataEnum

class Item(DataEnum):
    data_attribute_names = ('a', 'b')

Item.GREEN = Item(a='a', b='b')
Item.BLUE = Item(a='c', b='d') 
```

我应该注意，我是 data-enum 的作者，并专门构建它来解决这个用例。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-06-03T14:55:45.550

受到其他一些答案的启发，我找到了一种方法，可以尽可能“透明地”将附加字段包含到枚举中，从而克服了其他方法的一些缺点。一切都像没有附加字段一样工作。

枚举就像一个元组一样是不可变的，枚举的值就像没有附加字段一样，它就像一个普通的枚举一样工作`auto()`，并且按值选择一个枚举是可行的。

```
import enum

# Common base class for all enums you want to create with additional fields (you only need this once)
class EnumFI(enum.Enum):

    def __init_subclass__(cls, **kwargs):
        super().__init_subclass__(**kwargs)
        cls._values = []

    def __new__(cls, *args, **kwargs):
        value = args[0]
        if isinstance(value, enum.auto):
            if value.value == enum._auto_null:
                value.value = cls._generate_next_value_(None, 1, len(cls.__members__), cls._values[:])  # Note: This just passes None for the key, which is generally okay
            value = value.value
            args = (value,) + args[1:]
        cls._values.append(value)
        instance = cls._member_type_.__new__(cls, *args, **kwargs)
        instance._value_ = value
        return instance

    def __format__(self, format_spec):
        return str.__format__(str(self), format_spec) 
```

然后在代码中的任何地方你都可以这样做：

```
from enum import auto
from collections import namedtuple

class Color(namedtuple('ColorTuple', 'id r g b'), EnumFI):
    GREEN = auto(), 0, 255, 0
    BLUE = auto(), 0, 0, 255 
```

示例输出：

```
In[4]: Color.GREEN
Out[4]: <Color.GREEN: 1>

In[5]: Color.GREEN.value
Out[5]: 1

In[6]: Color.GREEN.r
Out[6]: 0

In[7]: Color.GREEN.g
Out[7]: 255

In[8]: Color.GREEN.b
Out[8]: 0

In[9]: Color.GREEN.r = 8
Traceback (most recent call last):
  File "/home/phil/anaconda3/envs/dl/lib/python3.6/site-packages/IPython/core/interactiveshell.py", line 3326, in run_code
    exec(code_obj, self.user_global_ns, self.user_ns)
  File "<ipython-input-9-914a059d9d3b>", line 1, in <module>
    Color.GREEN.r = 8
AttributeError: can't set attribute

In[10]: Color(2)
Out[10]: <Color.BLUE: 2>

In[11]: Color['BLUE']
Out[11]: <Color.BLUE: 2> 
```

# f# - 为什么 List.foldBack 是通过可变数组（而不是通过延续）实现的？

> ID：12680085
> 
> 赞同：6
> 
> 时间：2012-10-01T19:53:16.077
> 
> 标签：f#, f#-powerpack

我一直在阅读[F# 核心库源代码](http://blogs.msdn.com/b/dsyme/archive/2010/11/04/announcing-the-f-compiler-library-source-code-drop.aspx)(v.2.0) 并发现了一些相当有趣的东西：
`List.foldBack`通过可变数组实现，不像`List.fold`它非常简单。这是源代码，或者您可以在[这里](https://github.com/fsharp/fsharp/blob/89263e0df38789efa141766cea4c27f244bd368b/src/fsharp/FSharp.Core/list.fs)找到它：

```
let foldArraySubRight (f:OptimizedClosures.FSharpFunc<'T,_,_>) (arr: 'T[]) start fin acc = 
    let mutable state = acc
    for i = fin downto start do
        state <- f.Invoke(arr.[i], state)
    state

// this version doesn't causes stack overflow - it uses a private stack 
let foldBack<'T,'State> f (list:'T list) (acc:'State) = 
    // skipped optimized implementations for known lists

    // It is faster to allocate and iterate an array than to create all those 
    // highly nested stacks.  It also means we won't get stack overflows here. 
    let arr = toArray list
    let arrn = arr.Length
    foldArraySubRight f arr 0 (arrn - 1) acc 
```

**不使用延续的原因是什么？**
像下面的代码这样幼稚的东西似乎只比高度优化的库方法慢 2-3 倍。看起来它真的*“更快地分配和迭代数组”*似乎值得怀疑。此外，它是尾递归的，所以这里没有 StackOverflow。
我错过了什么吗？

```
let foldBack2 predicate acc list =
    let rec loop list cont =
        match list with
        | [] -> cont acc
        | h::t -> loop t (fun racc -> cont (predicate h racc))
    loop list id 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T20:25:51.453

我可以想到几个不使用 CPS 的理由：

1.  你用内存交换堆栈空间（所有这些延续都在堆上）
2.  CPS 对大多数人来说是不可思议的
3.  正如您发现的那样，它通常比替代品慢（请参阅[此问题](https://stackoverflow.com/q/7199122/162396)以获取证据）

无法轻松地向后遍历列表，并且由于无法击败数组以进行顺序访问（向前*或*向后）复制到数组或从数组复制实际上非常有效。`foldBack`作为一项挑战，尝试为 10,000/100,000/100,000,000 个元素编写更快的代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T20:27:25.297

[快速制作普通案例](http://www.cs.iastate.edu/~prabhu/Tutorial/CACHE/common_case.html)。

在实践中，您经常处理不会导致堆栈溢出的小列表。例如，`List.foldBack`OCaml中 F# 的对应项[List.fold_right 既不](http://caml.inria.fr/pub/docs/manual-ocaml/libref/List.html)是尾递归也不是使用 CPS。

作为用户，我们并不真正关心内部实现是什么。我们享受同时拥有 fast 和 tail-recursive 的惊喜`List.foldBack`。例如，这个漂亮的[拆分](https://stackoverflow.com/a/7945580/634025)函数在 F# 中是尾递归的：

```
let split list = List.foldBack (fun x (l,r) -> x::r, l) list ([],[]) 
```

# sharepoint - 如何在 sharepoint webpart 中为 visio 绘图添加悬停效果

> ID：12680092
> 
> 赞同：1
> 
> 时间：2012-10-01T19:53:50.210
> 
> 标签：sharepoint, hover, web-parts, visio

我创建了一个 web 部件页面，其中包含 sharepoint 站点中的 visio 绘图。现在我想在鼠标悬停在特定形状上时显示形状数据，而不是单击“切换形状信息窗格的可见性”。

例如，当鼠标悬停在一张员工图像上时，可以弹出“形状数据”中包含的更详细信息，显示“姓名：XXX，ID：XXX，年龄：XXX...”

我尝试在“形状表”中添加“评论”，但悬停效果仅适用于 Visio 设计模式。在我将绘图集成到 sharepoint webpart 后它不起作用。

另外，我尝试了另一种方法，将 visio 绘图保存为 htm 网页。但是，数据不会以这种方式动态更新。

我怎样才能实现这个功能？我需要使用javascript吗？如果是这样，我如何将 javascript 集成到我已经使用 visio 绘图创建的网页中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:03:38.427

这将引导您完成整个过程。

[在 Visio 2010 中创建 Office 计划 ECMAScript 混搭绘图以在 SharePoint Server 2010 中显示](http://msdn.microsoft.com/en-us/library/gg243427.aspx)

# ios - 将 uiimageviews 中的两个图像组合成一个具有正确位置的 uiimage

> ID：12680098
> 
> 赞同：3
> 
> 时间：2012-10-01T19:54:13.413
> 
> 标签：ios, xcode, uiimageview, core-graphics

我有两个 UIImageViews 的视图。第一个uiimageview是一张图片，可以改变但总是在同一个位置。第二个 uiimageview 包含一个 logo 的 uiimage，这个 uiimageview 可以调整大小、平移和旋转。

顺便说一下，两个 uiimageviews 都设置为 Aspect Fit。

当我完成第二个uiimageview的拖动和缩放后，我想保存这两个uiimage，并绘制一个uiimage。但是在新的 uiimage 中，我需要在完成拖动并调整第二个 uiimageview 的大小后将它们完全定位。

我将这个组合的 uiimage 推送到一个名为 PreviewViewController 的新 uiviewcontroller。在这里，我想在图像视图中显示 uiimage，如果用户按下是，则保存它。

**我几乎让它工作了，但是 x 和 y 的位置让我感到困惑。还有一个问题，当将第二个 uiimageview 图像绘制到新图像上时，它的视图模式看起来像 Scale to fill 并且看起来很难看。**

这是我的代码

```
- (UIImage *)combineImages{

    UIImage *tshirt = self.tskjorteTemplateView.image;
    UIImage *logo = self.bildeView.image;

    UIGraphicsBeginImageContext(self.tskjorteTemplateView.image.size);
    UIGraphicsBeginImageContextWithOptions(self.tskjorteTemplateView.frame.size, NO, 0.0);
    [tshirt drawInRect:CGRectMake(0,0, self.tskjorteTemplateView.frame.size.width, self.tskjorteTemplateView.frame.size.height)];
    [logo drawInRect:CGRectMake(bildeView.center.x - (bildeView.frame.size.width / 2) ,
                                bildeView.center.y - (bildeView.frame.size.height / 2), self.bildeView.frame.size.width, self.bildeView.frame.size.height)];

    UIImage *result = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return result;
} 
```

它在这里调用：

```
fullPreviewImage = [self combineImages];

WantToSaveViewController *save = (WantToSaveViewController *)segue.destinationViewController;
save.delegate = [self.navigationController.viewControllers objectAtIndex:0];
save.previewImage = fullPreviewImage; 
```

# c# - 您可以创建和启动的 Process 对象的数量是否有 Windows 限制？

> ID：12680100
> 
> 赞同：2
> 
> 时间：2012-10-01T19:54:17.233
> 
> 标签：c#, .net, windows, process, windows-server-2008-r2

似乎有与此相关的问题，但我没有看到涉及实际的 .Net Process 对象。目前，我正在使用 Process 对象来启动外部可执行文件并在 C# 中从中读取数据。对于我必须监控数据的每个收集点，这种情况都会发生一次。但是，当我必须监视 5 个或更多收集点时，我的第五个收集点的进程在我可以从中收集任何数据之前被终止。下面列出了用于启动 Process 对象的代码。任何帮助表示赞赏。

```
 procCollectionMonitor = new Process();
    procCollectionMonitor.StartInfo.FileName = options.CollectionMonitorProcessPath;

    procCollectionMonitor.StartInfo.WorkingDirectory = System.IO.Path.GetDirectoryName(options.CollectionMonitorProcessPath);
    procCollectionMonitor.StartInfo.ErrorDialog = false;

    procCollectionMonitor.StartInfo.UseShellExecute = false;

    procCollectionMonitor.EnableRaisingEvents = true;
    procCollectionMonitor.Exited += spawn_Exited;
    procCollectionMonitor.Start(); 
```

此应用程序是一个 Windows 服务，在 Windows Server 2008 R2 上运行。如前所述，此问题仅在启动 5 个或更多收集点时才会出现。需要 4 个或更少的实例没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-11-12T00:29:40.470

由于您使用的是 Windows 服务，因此肯定存在限制。限制可以通过桌面堆来控制。检查以下答案以获取更多详细信息：

[如何增加 Windows 服务可以生成的子进程的最大数量——桌面堆限制](https://stackoverflow.com/questions/17472389/how-to-increase-the-maximum-number-of-child-processes-that-can-be-spawned-by-a-w)

您只需要执行以下操作：

转到 regEdit，然后导航到键：

> HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\Session Manager\SubSystems

从以下位置编辑名为“Windows”的键：

> %SystemRoot%\system32\csrss.exe ObjectDirectory=\Windows SharedSection=1024,20480,768 Windows=On SubSystemType=Windows ServerDll=basesrv,1 ServerDll=winsrv:UserServerDllInitialization,3 ServerDll=sxssrv,4 ProfileControl=Off MaxRequestThreads=16

至：

> %SystemRoot%\system32\csrss.exe ObjectDirectory=\Windows SharedSection=1024,20480, **2048** Windows=On SubSystemType=Windows ServerDll=basesrv,1 ServerDll=winsrv:UserServerDllInitialization,3 ServerDll=sxssrv,4 ProfileControl=Off MaxRequestThreads=16

这也应该解决这个问题，我相信最佳解决方案是找到一种解决方法来启动独立于 Window 服务的进程（直到现在我不知道如何）

**更新：** 我找到了解决此问题的解决方法...您可以使用“CreateProcessAsUser”方法了解更多详细信息，请查看以下链接：

[https://www.codeproject.com/Articles/35773//Articles/35773/Subverting-Vista-UAC-in-Both-32-and-64-bit-Archite](https://www.codeproject.com/Articles/35773//Articles/35773/Subverting-Vista-UAC-in-Both-32-and-64-bit-Archite)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:39:11.720

您可以启动的进程数量没有实际限制。首发五人肯定不成问题。您对 C# 和 .NET 的使用不会产生影响。.NET 中的 Process 类只是 Win32 CreateProcess 和 ShellExecuteEx API 的托管包装器。问题必须出在您正在启动的程序上。您需要对其进行分析以弄清楚发生了什么。

# sql - SQL 中的“列名或提供的值的数量与表定义不匹配”错误

> ID：12680102
> 
> 赞同：0
> 
> 时间：2012-10-01T19:54:29.477
> 
> 标签：sql, sql-server

我有以下 SQL 代码：

```
select @colNames = coalesce(@colNames+',','')+''''+ RptLOB1 +''''
from CM.Correlation
group by RptLOB1

print @colNames

insert into AnalyticsV2.dbo.ResultCSV values('', @colNames) 
```

打印`@colNames`内容如下：

```
'Accident and Health','AE','Avemco Aviation','Bail','Commercial','Contingency','Contract','Court','Credit','DFP','DIC','Disability','Energy and Marine','EPLI','Excess Casualty','Exited Lines','Fidelis Marine','Fidelity','Group Life','HC Houston Aviation','HCC Indemnity Guaranty','HCCG International','HCCG US','HCCMIS','HCRM','Indemco','Large Commercial','Liability','Medical Stop Loss','MPL','Niche and Other Specialty','Occupational Accident','Other Aviation','Other International','Other Surety','Other US PC','PI','Primary Casualty','Property DF','Property Treaty','Public Risk','Surety','Technical Property','UK Credit','USSIC Aviation' 
```

45 个不同的 RptLOB。

当我执行它给我以下错误信息：

> *列名或提供的值的数量与表定义不匹配。*

我的表有 46 列，插入语句中的空白列应该对此进行调整。为什么这会给我一个错误？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:23:33.667

您正在尝试在具有 46 列的表上`''`插入2 个值。`@colnames`事实上，它`@colnames`是一个值用逗号分隔的字符串，并没有使它成为 45 列，它只是一个字符串，一列。

# c# - 启动一个新线程并调用带有参数的方法 C#

> ID：12680106
> 
> 赞同：-1
> 
> 时间：2012-10-01T19:54:54.250
> 
> 标签：c#, multithreading, email, outlook

> **可能重复：**
> [在不使用 Thread.Sleep c# 的情况下延迟发送电子邮件](https://stackoverflow.com/questions/12675864/delaying-the-sending-of-email-messages-without-using-thread-sleep-c-sharp)

所以我试图在我的应用程序的 for 循环中启动一个新线程。我根本不熟悉线程，所以我需要一些信息。

我使用这种方法通过 Outlook 发送电子邮件：

```
public void sendEMailThroughOUTLOOK(string recipient, string subject, string body)
    {

        try
        {

            // Create the Outlook application.
            Outlook.Application oApp = new Outlook.Application();
            // Create a new mail item.
            Outlook.MailItem oMsg = (Outlook.MailItem)oApp.CreateItem(Outlook.OlItemType.olMailItem);
            // Set HTMLBody. 
            //add the body of the email
            oMsg.Body = body;

            oMsg.Subject = subject;
            // Add a recipient.
            Outlook.Recipients oRecips = (Outlook.Recipients)oMsg.Recipients;
            // Change the recipient in the next line if necessary.
            Outlook.Recipient oRecip = (Outlook.Recipient)oRecips.Add(recipient);
            oRecip.Resolve();
            // Send.
            oMsg.Send();
            // Clean up.
            oRecip = null;
            oRecips = null;
            oMsg = null;
            oApp = null;
        }//end of try block
        catch (Exception ex)
        {
        }//end of catch

        //end of Email Method
    } 
```

在 foreach 循环中，我每次迭代都会发送一封电子邮件。

但是我需要延迟这些电子邮件，但我不想让 UI 线程休眠。

几个小时前我问了一些答案，但无法经常检查我的问题。

我尝试了他们的一些建议，例如使用这个：

```
Thread oThread = new Thread(new ThreadStart((sendEMailThroughOUTLOOK(recipient, subjectLine, finalbody))); 
```

但我得到一个错误。它说它需要一个方法名称......而且我确实有一个方法名称。是因为我的方法的论点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:05:53.937

您可以这样做，也可以查看 ParameterizedThreadStart：

```
Thread oThread = new Thread(new ThreadStart(() => { sendEMailThroughOUTLOOK(recipient, subjectLine, finalbody); })); 
```

# ios - 如何让图像在触摸时更改为 alpha

> ID：12680107
> 
> 赞同：0
> 
> 时间：2012-10-01T19:54:54.567
> 
> 标签：ios, cocoa-touch, alpha, uicontrol

**按钮不是 a `UIButton`，它是`UIControl`**

当用户点击 my`UIControl`时，我想更改 alpha 以便用户有一些视觉反馈，它被按下。然后释放时再次更改

```
UIImageView *mask =[[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 58, 58)];
mask.image =[UIImage imageNamed:@"centerButton.png"];
mask.center = self.center;
mask.center = CGPointMake(mask.center.x, mask.center.y+3);
[self addSubview:mask]; 
```

中心按钮是使用[rayWenderlich.com](http://www.raywenderlich.com/9864/how-to-create-a-rotating-wheel-control-with-uikit)上[的教程](http://www.raywenderlich.com/9864/how-to-create-a-rotating-wheel-control-with-uikit)创建的，用于学习创建自定义控件。

**我被困住了。我不知道如何引用中心图像。**

这是我的 .h 课程

```
@interface OOTRotaryWheel : UIControl

@property (weak) id <OOTRotaryProtocol> delegate;
@property (nonatomic, strong) UIView *container;
@property int numberOfSections;
@property CGAffineTransform startTransform;
@property (nonatomic, strong) NSMutableArray *sectors;
@property int currentSector;
@property (nonatomic, retain) UIImageView *mask;

- (id) initWithFrame:(CGRect)frame andDelegate:(id)del withSections:(int)sectionsNumber;
- (void)rotate;
- (void) buildSectorsEven;
- (void) buildSectorsOdd;

@end 
```

那么如何检测 UIImageView 上的触地并触地呢？让它更像一个按钮（所以当我可以加载另一个 xib 或其他东西时）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:23:34.220

**要更改 alpha 使用：`mask.alpha = 0.0f;`**

**要做到这一点`IBActions`：**
按下按钮时采取行动：

```
-(IBAction)buttonPressedDown{
      mask.alpha = 0.5f;
}//Connect this IBAction to touchDown 
```

要将按钮更改回原来的 Alpha：

```
-(IBAction)buttonUpInsideAndOutside{
      mask.alpha = 1.0f;
}//Connect this IBAction to touchUpInside and touchUpOutside 
```

* * *

**要做到这一点`UITouches`：**
按下按钮时采取行动：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
      UITouch*touch = [touches anyObject];
      if(touch.view==mask)
            mask.alpha = 0.5f;
}//Will only work if the IBOutlet is connected 
```

要将按钮更改回原来的 Alpha：

```
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
      mask.alpha = 1.0f;
}//Will only work if the IBOutlet is connected 
```

**无论您是否有 xib/storyboard 界面，这都会起作用。**

# python - “如果”和“如果不是”之间的表现或风格差异？

> ID：12680109
> 
> 赞同：7
> 
> 时间：2012-10-01T19:55:01.390
> 
> 标签：python, performance, if-statement, coding-style

这两种 if 语句的编写方式之间是否存在性能差异或风格偏好？基本上是一样的，第一个条件只会满足一次，而另一个条件每隔一段时间就会满足一次。只满足一次的条件应该是第一还是第二？它对性能有影响吗？如果性能相同，我更喜欢第一种方式。

```
data = range[0,1023]
length = len(data)
max_chunk = 10

for offset in xrange(0,length,max_chunk):
    chunk = min(max_chunk,length-offset)
    if chunk < max_chunk:
        write_data(data[offset:])
    else:
        write_data(data[offset:offset+max_chunk]) 
```

对比

```
data = range[0,1023]
length = len(data)
max_chunk = 10

for offset in xrange(0,length,max_chunk):
    chunk = min(max_chunk,length-offset)
    if not chunk < max_chunk:
        write_data(data[offset:offset+max_chunk])
    else:
        write_data(data[offset:]) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T20:00:16.820

在您的示例中，`if`根本不需要：

```
data = range[0,1023]
length = len(data)
max_chunk = 10

for offset in xrange(0,length,max_chunk):
    write_data(data[offset:offset+max_chunk]) # It works correctly 
```

我认为这是您情况下最有效的方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-01T20:20:28.350

好吧，让我们试试：

```
x = np.random.rand(100)

def f(x):
    z = 0
    for i in x:
        if i < 0.5:
            z += 1
        else:
            z += 0
    return z

def g(x):
    z = 0
    for i in x:
        if not (i < 0.5):
            z += 0
        else:
            z += 1
    return z 
```

我们得到：

```
%timeit f(x)
10000 loops, best of 3: 141 us per loop
%timeit g(x)
10000 loops, best of 3: 140 us per loop 
```

不，这里没有很多差异。即使 x 较大，差异也很小。

我必须说我有点惊讶，我本来希望直接版本 ( `f`) 比`not`版本 ( `g`) 更有效。

道德：随心所欲。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-01T19:59:04.447

我认为可读性比性能优势更重要（如果有的话），尽管我认为没有任何区别。

所以使用第一种方式，因为它更容易理解。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-01T19:58:28.477

不应该有任何性能差异（如果有的话，我认为第二个性能会降低），但只需使用对您来说更清晰的那个。我也更喜欢第一个。:)

如果你以后发现它有所作为，那就去改变它，但你知道他们在说什么：过早的优化是万恶之源。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-01T20:33:30.097

其他人已经注意到可读性（通常）更重要，并且您并不真正需要 if 示例的呈现方式。此外，还有一句老话：[“过早的优化是万恶之源”](http://en.wikipedia.org/wiki/Program_optimization#When_to_optimize)。

也就是说，找出性能的最佳方法是测试。因此，我将您的两个示例放入函数中（更改`range[0,1023]`为`range(0, 1023)`使工作正常），将第一个示例命名为“without_not”，第二个示例命名为“with_not”，并使用[testit 模块](http://docs.python.org/library/timeit.html)创建了一个简单的 main 进行测试：

```
def main():
    global outfile
    outfile = open('test.dat', 'wt')
    num_tests = 10000
    without_timer = timeit.Timer(stmt=without_not)
    with_timer = timeit.Timer(stmt=with_not)
    print 'without result: ', without_timer.timeit(number=num_tests)
    print 'with result: ', with_timer.timeit(number=num_tests)
    outfile.close() 
```

然后我进行了几次测试。正如我和其他回答者所预期的那样，没有`not`运行的版本在每次测试中都快了一点——大约 0.6%；不够担心，IMO。（好吧，可能在某些情况下它很重要，但如果是这种情况，我会推荐 C 或其他一些编译语言。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T19:59:41.690

我无法验证这一点，但根据常识，我认为第一个会表现得更好。第二个是评估 <，然后评估 not。那是一项额外的操作。它每次都这样做。加上直觉上第一个更有意义。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-20T23:42:22.960

是否会有性能差异？是的，处理器必须在 if-else 语句的情况下进行预测性跳转。你会注意到不同吗？没门。您的编译器/优化器将在执行之前将您的代码倒置。你的计算可能不需要几千年就能让它变得重要。您甚至可能不使用实时系统。

正如其他人所说：关注可读性，不要预先优化不重要的部分

# jquery - jquery在多个单选按钮选择上显示/隐藏元素

> ID：12680111
> 
> 赞同：1
> 
> 时间：2012-10-01T19:55:07.260
> 
> 标签：jquery, forms, show, show-hide

我对 Web 开发非常陌生，如果你甚至可以这样称呼它，尤其是 jQuery，我已经用 jQuery 碰了壁。

我拥有的是一个表格（用于选择目的）和一系列 Paypal 按钮。我需要执行的功能是显示/隐藏，但前提是选择了三个单选按钮的特定选择。每三个组合选择是显示/隐藏相应的贝宝按钮。

我可以通过单一形式的单选选择很好地显示/隐藏，但不能用于组合。

你必须原谅我的白菜编码，因为我仍然只是一个初学者，代码可以优化很多，谢天谢地，它只是一个低流量的网站/小市场。对任何可以帮助我的人表示敬意。

已经设法很好地隐藏了所有按钮。下面的脚本

```
<script type="text/javascript">

$(document).ready(function(){

    //Hide div w/id extra
         $("#button1,#button2,#button3,#button4,#button5,
             #button6,#button7,#button8,#button9,#button10,
             #button11, #button12, #button13, #button14,#button15,
             #button16,#button17,#button18,#button19,#button20,
              #button21,#button22,#button23,#button24,                 
              #button25,#button26,#button27").css("display","none");

});

</script> 
```

这是表单html

```
 <form action="order-lamb" method="post" id="order">
   <input type="hidden" name="pack" value="whole" />
   <div class="form-item leg option left2">
      <h3> Choose from the following Leg options</h3>
      <p>Choose what leg options you would like:</p>
      <label for="leg-one-of-each"><input type="radio" name="leg" value="each" id="leg-one-of-each" />1 x Carvery and 1 x Butterfly Legs</label>
      <p class="or">OR</p>
      <label for="leg-both-carvery"><input type="radio" name="leg" value="carvery" id="leg-both-carvery" />2 x Carvery Legs</label>
      <p class="or">OR</p>
      <label for="leg-both-butterfly"><input type="radio" name="leg" value="butterfly" id="leg-both-butterfly" /> 2 x Butterfly Legs</label>
   </div>
   <div class="form-item loin option right2 ">
      <h3> Choose from the following Loin options:</h3>
      <p>Choose what loin options you would like:</p>
      <label for="loin-one-of-each"><input type="radio" name="loin" value="loin-each" id="loin-one-of-each" />1 x Nolsette Loin and 1 x Backstrap &amp; Tenderloin</label>
      <p class="or">OR</p>
      <label for="loin-both-nolsette"><input type="radio" name="loin" value="nolsette" id="loin-both-nolsette" />2 x Nolsette Loins </label>
      <p class="or">OR</p>
      <label for="loin-both-backstrap"><input type="radio" name="loin" value="backstrap-tenderloin" id="loin-both-backstrap" />2 x Backstrap &amp; Tenderloins </label>
   </div>
   <div class="cf"></div>
   <div class="form-item shoulder option left2">
      <h3>Choose from the following Shoulder options:</h3>
      <p>Choose what shoulder option you would like:</p>
      <label for="shoulder-one-of-each"><input type="radio" name="shoulder" value="shoulder-each" id="shoulder-one-of-each" /> 1 x Bone and Rolled and 1 x French Danish</label>
      <p class="or">OR</p>
      <label for="shoulder-both-bone-and-rolled"><input type="radio" name="shoulder" value="bone-and-rolled" id="shoulder-both-bone-and-rolled" />2 x Bone and Rolled</label>
      <p class="or">OR</p>
      <label for="shoulder-both-french-danish"><input type="radio" name="shoulder" value="french-danish" id="shoulder-both-french-danish" />2 x French Danish</label>
   </div>
   <div class="form-item included right2">
      <h3>You will also get:</h3>
      <p>These are included:</p>
      <span class="choice selected">2 x Fully Frenched Racks </span>
      <p class="or">AND</p>
      <span class="choice selected">1 x Coastal Spring Lamb Mince Pack </span> </span>    
      <p class="or">AND</p>
      <span class="choice selected">1 x Coastal Spring Lamb Patty Pack</span> </span>
   </div>
   <div class="clear"></div>
   <div class="align-right" />
   <div class="form-item submit">
      <p class="error">You must select an option in each category.</p>
      <input type="image" name="submit" src="images/buttons-and-logos/awaiting-payment.png" id="submit" border="0" />
      <p class="paypal">You will receive a confirmation email when your payment has been processed via paypal. <br />Price includes freight and GST.<br /></p>
   </div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:09:45.117

首先，您应该为这些按钮创建一个类，这将使您的代码更容易保持清洁并减少您的工作量。它会是这样的。

在您的按钮创建中。

```
<input type="button" class="hideMe"> 
```

然后在 CSS 文件中，您将拥有如下内容

```
.hideMe{
     display:none;
} 
```

或者，如果您不想要单独的 CSS 文件，您也可以在您的 javascript 部分中执行以下操作。

```
<script type="text/javascript">
$(document).ready(function(){
     //Hide div w/id extra
     $(".hideMe").css("display","none");

});
</script> 
```

无论如何，沿着这些路线。

其次，要回答您的主要问题，您始终可以检查最后一个按钮，以确保所有 3 个都被选中。

```
$('input:radio[name="yourRadioNameHere"]').change(function(){
       if ($(this).is(':checked') && $(radioButton2).is(':checked')  && $(radioButton2).is(':checked') ) {
         // Do whatever you need to do here
       }
}); 
```

我确信那里有一个更优雅的解决方案，但是我现在很累，即将结束这一天，哈哈。但这应该有效。

希望这可以帮助！

编辑：要让它在所有 3 个复选框上工作，您需要执行 3 个 if 语句。但是，为了节省重复代码，请创建一个函数来为您执行检查。例如

```
 function checkChecked(){
           if ($(this).is(':checked') && $(radioButton2).is(':checked')  && $(radioButton2).is(':checked') ) {
         // Do whatever you need to do here
       }
    } 
```

然后，您将拥有 3 个调用此函数的 if 语句。下面是一个例子。

```
 $('input:radio[name="yourRadioNameHere"]').change(function(){
       checkCheck();
}); 
```

正如我所说，那里有更多可能更优雅的解决方案，但这将完成您所寻找的工作。例如，我很确定那里有一些功能可以检查是否更改了任何复选框，这将为您节省 3 个 if 语句。但是，我将把谷歌搜索留给你:)。

希望额外的代码有所帮助。

# asp.net-web-api - 如何在同一公司内的多个项目中高效共享数据？

> ID：12680113
> 
> 赞同：0
> 
> 时间：2012-10-01T19:55:18.380
> 
> 标签：asp.net-web-api, security

我将构建 2 个 Web API 项目，这些项目将用于我们公司的其他 Web/移动站点项目。

*   Web API 是面向公众的
*   没有 SSL
*   可用于 jquery ajax 调用
*   数据本身不是私有/敏感数据。

Web API 调用将用于首页上的高流量站点[例如。填充主页上的下拉列表]

所以我想要某种机制来限制仅对我们公司项目的 Web API 调用，或者至少禁止有人使用我的公共 Web API 创建他们的站点或任何类型的攻击 [如重放]。

以下是我想到的几种方法

1.  使所有 Web API 调用只能在 Intranet 内访问[仅通过服务器端代码访问 Web API]。那会让我失去通过 ajax 访问它的便利。
2.  在每个请求中使用用户名密码，但我们的网站不会使用 HTTPS。所以它违背了目的
3.  想过使用 Nonce，但是当 Nonce 在我的面向公众的页面上过期时会发生什么？我应该以某种方式刷新页面？我不能要求用户做某事，因为该页面未经用户身份验证。
4.  使用 OAuth 进行身份验证。它看起来很复杂，并且需要对每个请求进行身份验证，我担心它会影响性能[因为我们的网站流量很高]
5.  只需使用 uniqueID，并检查其来自的域。希望不会有大事发生

我想和5一起去。请告诉我你的建议。提前致谢。

**编辑** 我们的网站不是 https，只有 ReadOnly 请求。我主要关心的是性能。我不希望复杂的安全步骤减慢我们的公共 WebAPI，因为我们公司内的许多 Web 项目都会调用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T07:29:23.330

免责声明 - 做你自己的研究（可能会等待更多的答案），我不是安全专家，这只是我几分钟后想到的。

**计划这是一个开放的 api**

老实说，要保护东西很难，您可以尽最大努力尝试，但实际上您是在谈论让任何人通过 javascript 访问 api，您没有太多机会完全保护它。您在制作此 api 时做出的每一个决定都应该基于任何人都可以访问它的想法，除非您实施真正的身份验证方案（例如，不是自定义方案），否则不要发送任何私人数据。

如果您的数据不是那么重要，那么它是否没有得到很好的保护也没关系。

下一个从事此工作的人可能会找到完成功能的最简单方法，当您不完全了解原始计划时，许多安全漏洞来自更新系统。

**基于令牌的身份验证**

允许您使用您的 api 的每个站点都将一个唯一的 id (guid) 插入到具有源站点、客户端 IP 和到期日期的数据库中。根据您页面的生命周期，这可能会很快过期，但成本会更高。

当 javascript 访问您的 api 时，他们会传递此令牌，您的 api 只需检查令牌与数据库中的 ip 并确保它没有过期。

如果您可以使用某种标准形式的身份验证，可能会使用像 ASP.NET 这样的加密 cookie，那就更好了。不过，如果您是跨域的，我不相信这是可能的。

检查IP应该有助于防止中间人攻击另一个站点试图允许用户使用您的api，它不会阻止他们自己直接使用它并对信息做任何他们喜欢的事情。

您可以尝试限制您的 api 的速率，以防止其他网站使用它向其用户提供信息。这可以通过简单地限制您分发令牌的频率以及每个令牌允许发出多少请求来完成。

**CORS**

[http://en.wikipedia.org/wiki/Cross-origin_resource_sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

因为您可能正在使用跨域 ajax 调用，所以您可能需要研究一种叫做 CORS 的东西。这将允许兼容的浏览器发出跨域请求，对于不支持它的浏览器，您可能需要回退到 jsonp。这也应该有助于消除支持它的浏览器中的跨站点脚本攻击。AFAIK 这是一种浏览器技术，而不是服务器技术（除了 http 标头），所以这不会阻止任何不符合此规则的客户端，但它可以帮助保护您的用户。

**防止 CSRF**

[https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF) )

如果您允许更新任何数据，那么我强烈建议您考虑使用跨站点请求防伪机制。也许像 MVC 提供的令牌，您在 cookie 中（来自 api）提供唯一值，并且还要求他们在他们向 api 发布的任何帖子中将值传递回。在服务器和客户端上实现都非常简单，服务器不需要在会话中存储任何内容来执行此操作，这意味着只要 cookie 处于活动状态，它就可以工作。这使得恶意方很难让其他人对您的 api 执行请求。如果您使用表单而不是 ajax 进行任何回发，则需要确保将令牌添加到您的回发值中。请记住，这不是一种身份验证方法，而是一种尝试防止 CSRF 的方法。

您可以将其与身份验证令牌结合使用，但同样因为它依赖于发送 cookie，这可能是不可能的。

**DOS 攻击**

还要尝试确保 api 方法不昂贵，以帮助阻止使用大量 cpu 时间的 DOS 攻击。当然，如果有人真的想删除您的网站，他们可能仍然可以这样做，您的工作就是尝试限制他们的途径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T04:22:39.583

如果你还在寻找，你需要的是一种轻量级的消息认证方法，可以验证消息的真实性。在相当轻量级但仍然安全的算法中使用散列密钥，例如`SHA-1`您可以为每个请求计算散列值，您将始终在服务器端进行身份验证，然后再接受请求。避免使用诸如服务器或主机名之类的恒定数据位进行 MAC-ing。相反，使用正在发送的数据的一个组件，这样如果它在传输过程中被修改，验证就会失败。请参阅[此答案](https://stackoverflow.com/a/12792698/1530938)以了解分步

Number 5 is an Okay solution, but I always **strongly caution against** solutions that depend on the goodness and mercy of the web client to your application/api. Most people out there just want to hurt your app and will forge anything, including the host/referer http header with minimum effort.

# crystal-reports - Crystal Reports 2008 - 在页脚中使用详细数据

> ID：12680115
> 
> 赞同：2
> 
> 时间：2012-10-01T19:55:35.283
> 
> 标签：crystal-reports, report

我有一份报告，我正在尝试获取更改日志的两个日期时间变量之间的差异。

开始日期时间只是详细信息部分的第一个字段，所以我只是使用 Minimum 来获取它。

对于结束日期时间，我不能做最大值，因为最后一条记录通常是在案例结束之后（一周后发送电子邮件调查）。所以我有一个运行总计，只有在行上找到“已关闭”一词时才计算在内。

然后我有一个函数，如果运行的总计 = 1 然后将该日期时间放入变量 (F1) 中（我尝试过本地、共享和全局）。当我将公式放在详细信息部分时，这有效。只有已关闭的第一行在其前面有日期时间戳。

问题是当我尝试在组页脚中使用此变量时，该字段为空白。我不明白为什么变量会被清除以及如何让它保持在那里。请帮忙！！

F1：

```
datetimevar endts;

if {#RTotal0}=1 then
endts:={@datetime}; 
```

F2（用于组页脚）

```
datetimevar endts;
endts; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:19:59.443

我能够使用类似的查询来重现这一点。您只需要强制 Crystal Reports 评估您的函数，因此在您的 F2 函数中，添加`WhilePrintingRecords;`到第一行，如下所示：

```
WhilePrintingRecords;
datetimevar endts;
endts; 
```

这应该强制报告在打印每个分组时评估公式。

# jquery - 缩略图分页/滚动

> ID：12680116
> 
> 赞同：0
> 
> 时间：2012-10-01T19:55:36.773
> 
> 标签：jquery, html, css, jquery-plugins, plugins

我正在使用插件作为图像/图库滑块。就目前而言，主图像下方的缩略图以网格形式显示 - 我希望它们显示在单行中，来回滑动以显示所有图像。我怎样才能做到这一点？

[现场直播。](http://urbanpalate.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:59:15.047

为您的容器 div (nivo-controlNav) 设置一个高度。它应该等于你拇指的高度，并将它的溢出设置为隐藏

像这样：

```
.nivo-controlNav {
    height: 130px; /*here you put your real size*/
    overflow: hidden;
} 
```

后期编辑：

```
.nivo-controlNav {
    height: 136px;
    width: 960px;
    overflow-y: hidden;
    overflow-x: auto;
}
.nivo-controlNav a {
    width: 136px;
    height: 136px;
    display: inline-block;
    float: left;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:01:25.603

我会假设它需要浮动图像容器元素。如果它们已经浮动（可能是由于您提到的网格布局），那么可能是扩展容器 div 的宽度（包含所有缩略图的 div）的情况。

# c# - C# 中点向下舍入为零

> ID：12680121
> 
> 赞同：3
> 
> 时间：2012-10-01T19:55:49.510
> 
> 标签：c#

我知道 MidpointRounding.AwayFromZero 和 MidpointRounding.ToEven，但我想我想要介于两者之间的东西。它用于促销模块，因此如果值为 0.5，则折扣价格必须向下舍入。

例如，我想：

```
£1.244 四舍五入为 £1.24
1.245 英镑四舍五入为 1.24 英镑
1.246 英镑四舍五入至 1.25 英镑

```

据我了解，.AwayFromZero 会将中间值四舍五入为 1.25 英镑，.ToEven 将正确四舍五入为 1.24 英镑，但 1.335 英镑将四舍五入为 1.34 英镑，而不是我想要的 1.33 英镑。

有谁知道如何做到这一点？

谢谢，乔恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T20:50:54.083

有很多未指定的行为。让我们保持安全并明确地进行四舍五入，忽略负面因素，因为这是关于金钱的：

```
 public static decimal Promotion(decimal value) {
        decimal unround = decimal.Floor(value * 100m);
        decimal fraction = value * 100m - unround;
        if (fraction <= 0.5m) return unround / 100m;
        else return (unround + 1m) / 100m;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T20:03:41.157

```
Math.ceiling(x - 0.5) 
```

应该做的伎俩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T20:00:29.500

通常要做这样的事情，你从你的价值中减去 0.001，然后正常四舍五入。

```
1.244 - .001 = 1.243 = 1.24
1.245 - .001 = 1.244 = 1.24
1.246 - .001 = 1.245 = 1.25

1.300 - .001 = 1.299 = 1.3

```

在这种情况下，你真的想把它放在它自己的函数/扩展方法中，无论如何，并用函数记录为什么你在舍入之前减去 .001。

# javascript - 保存具有 id 的元素的变量存储在哪里？

> ID：12680124
> 
> 赞同：7
> 
> 时间：2012-10-01T19:55:54.363
> 
> 标签：javascript, html, dom

这个问题（[Element access with ID](https://stackoverflow.com/q/12663981/1026459)）指出，如果一个元素有一个 id，那么您可以通过基于该 id 的变量名来访问它。这让我很感兴趣，因为我在使用 Visual Studio 2010 开发时看到了这个变量可用。出于好奇，我做了一些测试，结果证明这`document.getElementById()`仍然比使用变量名更快。因此，我开始尝试通过窗口查看，认为它必须在`window["idName"]`、 在调试中，并且`console.log(window)`无法找到变量实际存储的位置。

当一个元素在 html 中定义时，`<div id="foo">`它可以在带有变量的 javascript 中使用`foo`（我不建议使用它，这是不好的做法）。该变量存储在哪里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T20:03:23.153

这是非标准行为。它存储在哪里（以及是否）取决于实现。

* * *

在 Linux 上使用`Firefox 15`时，我必须深入 2 个原型对象才能找到实际对象。我在这个 StackOverflow 页面上运行了这段代码，并得到了`true`结果。

```
Object.getPrototypeOf(Object.getPrototypeOf(window)).hasOwnProperty("hlogo"); 
```

* * *

在 Linux 上的 Chrome 中，它是一个层次。

```
Object.getPrototypeOf(window).hasOwnProperty("hlogo"); 
```

* * *

在 Firefox 中看到它确实让我感到惊讶，但由于 Chrome 遵循了微软的模式，我想 Firefox 一定觉得有必要效仿。

* * *

如果你不知道原型链有多深，你可以运行一个循环，并将不同的对象添加到一个数组中，或者只使用循环中的对象。

```
var protos = [],
    obj = window;

while (Object.getPrototypeOf(obj) !== null) {
    obj = Object.getPrototypeOf(obj);
    protos.push(obj);
}

alert("The object had " + protos.length + " prototype objects"); 
```

# mysql - 按类别和自定义字段对 wordpress 过滤器进行高级 SQL 查询

> ID：12680126
> 
> 赞同：0
> 
> 时间：2012-10-01T19:55:56.950
> 
> 标签：mysql, wordpress, custom-fields

我想选择`portata`按类别和其他自定义字段过滤的自定义字段“”的不同值。

这是按类别选择自定义值的查询：

```
global $wpdb;
$querystr2 = "
SELECT DISTINCT wpostmeta.meta_value 
FROM $wpdb->posts wposts
LEFT JOIN $wpdb->postmeta wpostmeta ON wposts.ID = wpostmeta.post_id 
LEFT JOIN $wpdb->term_relationships ON (wposts.ID = $wpdb->term_relationships.object_id)
LEFT JOIN $wpdb->term_taxonomy ON ($wpdb->term_relationships.term_taxonomy_id = $wpdb->term_taxonomy.term_taxonomy_id)

WHERE wpostmeta.meta_key = 'portata'
AND $wpdb->term_taxonomy.taxonomy = 'category'
AND $wpdb->term_taxonomy.term_id IN($variabile_c)
ORDER BY wpostmeta.meta_value ASC

"; 
```

如何将其他自定义字段添加到过滤器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T04:04:02.373

您需要再次针对 $wpdb->postmeta 进行连接，为每个连接使用单独的别名，并在 WHERE 子句中添加几个 AND 以应用额外的条件——例如：

```
 SELECT DISTINCT wpostmeta1.meta_value
   FROM $wpdb->posts wposts
     LEFT JOIN $wpdb->postmeta wpostmeta1 ON wposts.ID = wpostmeta1.post_id 
     LEFT JOIN $wpdb->postmeta wpostmeta2 ON wposts.ID = wpostmeta2.post_id 
     LEFT JOIN $wpdb->term_relationships ON (wposts.ID = $wpdb->term_relationships.object_id)
     LEFT JOIN $wpdb->term_taxonomy ON ($wpdb->term_relationships.term_taxonomy_id = $wpdb->term_taxonomy.term_taxonomy_id)
   WHERE wpostmeta1.meta_key = 'portata'
     AND wpostmeta2.meta_key = 'other-custom-field-value'
     AND $wpdb->term_taxonomy.taxonomy = 'category'
     AND $wpdb->term_taxonomy.term_id IN($variabile_c)
   ORDER BY wpostmeta1.meta_value ASC 
```

将“其他自定义字段值”替换为您需要过滤的第二个自定义字段值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:16:39.143

谢谢亚伦米勒！现在它工作了！

```
SELECT DISTINCT wpostmeta1.meta_value
FROM $wpdb->posts wposts
     LEFT JOIN $wpdb->postmeta wpostmeta1 ON wposts.ID = wpostmeta1.post_id 
     LEFT JOIN $wpdb->postmeta wpostmeta2 ON wposts.ID = wpostmeta2.post_id 
     LEFT JOIN $wpdb->term_relationships ON (wposts.ID = $wpdb->term_relationships.object_id)
     LEFT JOIN $wpdb->term_taxonomy ON ($wpdb->term_relationships.term_taxonomy_id = $wpdb->term_taxonomy.term_taxonomy_id)
WHERE wpostmeta1.meta_key = 'portata'
     AND wpostmeta2.meta_key = 'alimentazione'
AND wpostmeta2.meta_value = '$variabile_portata'
     AND $wpdb->term_taxonomy.taxonomy = 'category'
     AND $wpdb->term_taxonomy.term_id IN($variabile_c)
ORDER BY wpostmeta1.meta_value ASC 
```

谢谢亚伦米勒。现在，如果您希望通过自定义字段添加 1 个其他文件管理器，我必须添加 1 个左连接？谢谢！

# sql - "NVARCHAR(255) is null" 带来排序规则冲突

> ID：12680131
> 
> 赞同：1
> 
> 时间：2012-10-01T19:56:19.460
> 
> 标签：sql, tsql

我有一个临时程序：

```
CREATE PROCEDURE 
#update_ListItemEntityNumberValueAndLocalizations(
    @modelPrefix NVARCHAR(255), 
    @definitionNeutralName NVARCHAR(255), 
    @listItemNeutralValue NVARCHAR(255),    
    @newNumberValue float,
    @listItemEnName NVARCHAR(255),
    @listItemDeName NVARCHAR(255)) 
```

在此过程中，有以下 if 语句：

```
if(@listItemEnName is not null) 
```

在这一行，我收到以下错误：

> 无法解决 is not 操作中“SQL_Latin1_General_CP1_CI_AS”和“Latin1_General_CI_AS”之间的排序规则冲突。

有谁知道为什么会发生这种情况以及如何避免它？

更新：数据库排序规则是`SQL_Latin1_General_CP1_CI_AS`

为什么“is null”需要排序规则？

有没有办法强制转换 null 或设置参数的排序规则？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T20:16:13.253

使用显式整理子句

```
if(@listItemEnName COLLATE Latin1_General_CI_AS is not null) 
```

或者取决于存储过程将上下文切换到`USE tempdb;`然后创建临时存储过程然后将上下文切换回原始数据库的操作，可能如下所示。

您正在创建一个临时存储过程，因此该参数将被视为具有`tempdb`. 但是`tempdb`，必须与您的用户数据库有不同的排序规则。

据我从实验中可以看出，首次创建存储过程时，它绑定到正在使用的数据库上下文（即使它后来是`ALTER`从不同的数据库上下文中编辑的）。

. 例如，我使用区分大小写的排序规则，但如果我在不区分大小写的数据库中创建以下过程

```
CREATE PROC #Foo2 
AS
IF 'a' = 'A'
    PRINT 'Yes'
SELECT *
FROM sys.database_files 
```

无论我从哪个数据库运行它，或者在`USE`使用不同的数据库时更改它，它都会继续打印“是”并返回有关原始数据库文件的信息。

# android - 在 AndEngine 中加载大纹理

> ID：12680133
> 
> 赞同：4
> 
> 时间：2012-10-01T19:56:29.340
> 
> 标签：android, textures, andengine

在我们正在开发的游戏中，我们需要为一个大小为 485x485 的大型精灵设置动画，并且动画大约有 30 帧。我们在为此类工件设置动画时遇到问题。我已经尝试了下面列出的一些解决方案，但不幸的是我们还没有提出解决方案。

## 平铺

看起来将每一帧都放在一个大图块中不是一种选择，因为：

*   纹理大小需要是 2 的幂，因此在大多数设备上显示为黑色
*   当我将纹理大小设置为 2 的幂时，对于大多数设备来说它变得太大了
*   AndEngine 的推荐最大纹理大小[似乎是](https://stackoverflow.com/questions/5796723/android-andengine-animatedsprite-texture-size-too-large)1024x1024 。

## 分离精灵

另一个选项是加载每个纹理，因此每个帧，分别加载并将其放入`Sprite`（如此[处所述](http://damsteen.nl/blog/animating-large-sprites-in-andengine)）。这非常有效，并且在正确的时间切换每个精灵的可见性会导致用户看到动画。

这种方法的问题是加载整个动画需要相当长的时间。由于加载屏幕，在最初加载游戏时这是不可见的，但在游戏后期需要更改动画，然后游戏需要大约 2-3 秒才能加载。放置加载屏幕不是一种选择。

### 在单独的线程上加载

我试图将纹理加载到一个单独的、新创建的线程中，但即使线程加载纹理，游戏的绘制似乎也暂停了。

## 其他选择？

我不知道任何选择，而且似乎没有其他人试图为大于 50x50 像素的纹理设置动画，因为很难找到有类似情况的人。

我的问题是：是否可以在 AndEngine 中为大型纹理设置动画？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:25:05.203

我认为您的问题将遇到设备限制，而不是引擎限制。为移动设备设计，很少有安卓设备可以运行它。

但是，您可以使用 VertexShaders 和 FramentShaders 提出替代解决方案。这是 Andengine GLES2 的一个重要特性

这是描述该方法的文章： http: [//code.zynga.com/2011/11/mesh-compression-in-dream-zoo/](http://code.zynga.com/2011/11/mesh-compression-in-dream-zoo/)

# javascript - RequireJS - 有什么理由在它上面构建一个包装器吗？

> ID：12680136
> 
> 赞同：1
> 
> 时间：2012-10-01T19:57:14.543
> 
> 标签：javascript, requirejs

我有一个与使用 RequireJs 的方式有关的问题。我们的应用程序应该在 Near 功能中增长很多，因此主要问题是准备一个框架，该框架将由参与项目的开发人员遵循。

我们在 RequireJS 上尝试了这种包装器（试图强制执行 OOP 方法）：

```
 //each file will contains such a definition
            //this file should be located under: appNamespace/Client/Widget.js

            //attaching the class definition to the namespace
            with ({public : appNamespace.Client})
            {
               //using a Class defined in the file: appNamespace/DomainModel/DataTable.js
               var dt = using('appNamespace.DomainModel.DataTable');

               //Class definition
               public.Widget = function(iName)
               {
                    //private variable
                    var dSort = new dt.SortableTable();

                    this.Draw = function(iRegion)
                    {
                      //public method implementation           
                    }
               }
            } 
```

或者，我们可以使用自然的 RequireJS 模型，如结构：

```
<pre><code>
//this module definition should be located in the file: appNamespace/Client/Widget.js
define('appNamespace/DomainModel/DataTable', function(dt)
{
     function Widget(iName)
     {
        //private variable
        var dSort = new dt.SortableTable();

        this.Draw = function(iRegion)
        {
            //public method implementation           
        }
     }

     return Widget;
}) 
```

我更喜欢第一个例子，因为：

那么 - 我为什么要使用第二个示例 - 自然的 RequireJS 模型样式？有什么我想念的吗？

欢迎任何建议

# jquery - 无法从 File API 检索文件

> ID：12680142
> 
> 赞同：2
> 
> 时间：2012-10-01T19:57:48.573
> 
> 标签：jquery, html, fileapi

好的，我正在尝试使用 File API 和 jQuery 显示图像缩略图。我已经从我的谷歌搜索中阅读了大量的教程，并且从我所阅读的内容来看，这段代码应该可以工作：

## Javascript

```
$(document).ready(function(){
    function uploadAvatar( file ) {
        var preview = $('#newUserProfile .avatar img');
        var reader = new FileReader();

        reader.onload = function(e){
            preview.attr('src', e.target.result);
        };

        reader.readAsDataURL(file);
    }

    $('input#imageUpload').change(function(){
        uploadAvatar($(this).files[0]);
    });
}); 
```

## HTML

```
<form>
    <input type="file" id="imageUpload" />
</form>
<div id="newUserProfile">
    <div class="avatar">
        <img src="" />
    </div>
</div> 
```

但是，它返回此错误：

```
Uncaught TypeError: Cannot read property '0' of undefined    -> newUser.js
  (anonymous function)                                       -> newUser.js
  p.event.dispatch                                           -> jquery.min.js
  g.handle.h                                                 -> jquery.min.js 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:00:26.573

改变：

```
uploadAvatar($(this).files[0]); 
```

到：

```
uploadAvatar(this.files[0]); 
```

jQuery 对象没有`files`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:01:08.997

`files`是文件输入元素本身的属性而不是 jQuery 对象，使用`uploadAvatar(this.files[0]);`而不是`uploadAvatar($(this).files[0]);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T02:28:18.573

阅读文件是一种浪费。Base64 编码在文件大小上产生 33% 的开销。`blob:`相反，只需从文件对象中创建一个URL。它更有效：

```
window.URL = window.URL || window.webkitURL;

function uploadAvatar(file) {
  var url = window.URL.createObjectURL(file);
  $('#newUserProfile .avatar img').attr('src', url);
}

$('input#imageUpload').change(function(){
  uploadAvatar(this.files[0]);
}); 
```

# ruby-on-rails - ActiveAdmin 操作项取决于数据的状态

> ID：12680145
> 
> 赞同：7
> 
> 时间：2012-10-01T19:57:59.787
> 
> 标签：ruby-on-rails, activeadmin

如果要编辑的对象具有某种状态，我想隐藏编辑路径。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-03T13:41:52.570

我终于做到了。我需要两件事：

直接访问时重定向并隐藏按钮到编辑页面。

为了在用户尝试直接访问编辑页面时重定向，我使用了 before_filter：

```
before_filter :some_method, :only => [:edit, :update]
def some_method
    redirect_to action: :show if status == something
end 
```

要隐藏按钮，我这样做：

```
ActiveAdmin.register Model do
    config.clear_action_items!
    action_item :only => [:show] , :if => proc { instance.status == something } do
        link_to 'Edit', edit_model_path(instance)
    end
end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-03T06:34:26.987

If you are talking about hiding the edit link that is shown by default (along with the view and delete links) in the index action, you can customize the index view as follows:

```
ActiveAdmin.register Model do

  index do

    column :actions do |object|

      raw( %(#{link_to "View", [:admin, object]} 
        #{link_to "Delete", [:admin, object], method: :delete} 
        #{(link_to"Edit", [:edit, :admin, object]) if object.status? }) )

    end
  end
end 
```

Because the content of the column will be only what is returned by the `column` block, you need to return all three (or two) links at once as a string. Here `raw` is used so that the actual links will be displayed and not the html for the links.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-22T14:03:47.950

这可以通过以下方式实现：

```
ActiveAdmin.register Object do
  index do
    column :name
    actions defaults: true do |object|
      link_to 'Archive', archive_admin_post_path(post) if object.status?
    end
  end
end 
```

请注意，使用`defaults: true`会将您的自定义操作附加到活动的管理员默认操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T20:39:20.547

您可以在您的控制器中创建一个`before_filter`仅适用于编辑操作的。它可以检查状态，并允许它运行或`redirect_to`取决于方法的返回。

在您的应用程序控制器中是这样的：

```
def some_method
  if foo.bar == true
    redirect_to foos_path
  end
end 
```

然后在您的问题控制器的开头

```
before_filter :some_method, :only => :edit 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-03T05:41:33.097

如果您想隐藏对象的“编辑”链接（在 active_admin 视图中），如果对象包含某些特定值，您可以覆盖该方法的默认视图并在显示链接之前添加条件。

# ms-access - 如何更改嵌入在报表中的查询中的列宽

> ID：12680147
> 
> 赞同：0
> 
> 时间：2012-10-01T19:58:10.520
> 
> 标签：ms-access

在我的 Access 应用程序中，我有一个报告，其中包含一个实际上只是一个查询的子报告。

有问题的查询只是一个传递查询，它只执行一个预先准备好的存储过程。查询是动态创建的，因此我可以从用于请求报告的表单中传递一些日期参数（单击按钮）。

当我在 SQL Server Management Studio 中返回结果时，由于列名非常窄且数据是 0 到 100 范围内的整数，因此该查询中的 8 或 9 列非常窄。

在 MS Access 中，当查询嵌入在报表中时，Access 似乎设置了一个列宽，这意味着所有列都不适合页面，即使纸张是横向的。

无论如何我可以做些什么来告诉 Access 使列宽变窄吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:09:16.277

您可以像这样设置查询的列宽：

```
Sub SetColumnWidth()
Dim qdf1 As DAO.QueryDef
Dim fld1 As DAO.Field

Set qdf1 = CurrentDb.QueryDefs("query3")

For i = 0 To qdf1.Fields.Count - 1
    Set fld1 = qdf1.Fields(i)
    fld1.CreateProperty "ColumnWidth", dbInteger
    'very narrow indeed
    fld1.Properties("ColumnWidth") = 200
    Set fld1 = Nothing
Next i

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T17:48:02.037

我发现似乎最好的解决方案是使用表单向导创建一个表单，该向导将查询作为其数据源并在数据表视图中显示自身。

当您将其嵌入到报表中时，可以调整表单中数据字段的字段宽度以适应布局模式。

# java - 升序中的冒泡排序 - 程序无法编译

> ID：12680148
> 
> 赞同：0
> 
> 时间：2012-10-01T19:58:13.950
> 
> 标签：java, methods, main, bubble-sort

我需要编写一个程序，该程序使用冒泡排序方法和要求用户输入他们的数组的主函数。之后程序按升序对数组进行排序。我的程序现在要求用户输入，但是一旦发生这种情况，程序将无法编译并且我被卡住了。这是代码：

```
import java.util.Scanner;
public class IntSorter{
  public static int bubbleSort(int[] a){
    boolean needNextPass =true;
    for(int i=1; i<a.length && needNextPass; i++){
      needNextPass = false;
      for(int j=0; j<a.length - i; j++){
        if(a[j]> a[j+1]){
          int temp = a[j];
          a[j]=a[j+1];
          a[j+1] = temp;
          needNextPass = true;
          }
        }
      }
   for(int i=0; i<a.length; i++){
     System.out.print(a[j] + " ");
     }
   }
public static void main(String[] args){
  Scanner input = new Scanner(System.in);
  System.out.print("Enter size of array: ");
  int N = input.nextInt();
  int[] x = new int[N];
  System.out.print("Enter " +N +"numbers of your array: ");
    for(int i= 0; i<N; i++){
      x[i] = input.nextInt()
  }
  IntSorter access = new IntSorter();
  System.out.print("Your sorted array is: ");
  access.IntSorter(x);}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:01:35.433

您主要方法中的最后一行是：-

```
access.IntSorter(x); 
```

将此行替换为： -

```
access.bubbleSort(x); 
```

并且使用`single uppercase`字符作为变量是可怕的.. 使用`size`而不是数组的大小..

```
System.out.print("Enter " +N +"numbers of your array: ");
  for(int i= 0; i<N; i++){
      x[i] = input.nextInt()
  } 
```

在上面的代码中，如果用户没有输入整数值怎么办？你会得到一个例外..你需要抓住它..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:00:44.637

此行似乎缺少分号：

```
 x[i] = input.nextInt() 
```

而且您似乎正在访问`j`其范围之外的变量：

```
 System.out.print(a[j] + " "); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T20:02:27.430

您可以使用未定义`i`的来代替：`j`

```
for (int i = 0; i < a.length; i++) {
   System.out.print(a[i] + " ");
} 
```

还

```
public static int bubbleSort(int[] a) { 
```

没有`int`返回值；

您可以使用您的编译器或 IDE 来帮助突出这些问题。

# ruby - Ruby 的 net/http 的客户端带宽使用情况

> ID：12680150
> 
> 赞同：4
> 
> 时间：2012-10-01T19:58:15.793
> 
> 标签：ruby, linux, networking

我正在尝试跟踪 ruby​​ 中单个请求的带宽使用情况，以查看我的网络使用量有多少被分配给不同的 API 调用。

我在 net/http 或 ruby​​ 套接字类（TCPSocket 等）中找不到任何东西，它们似乎有一种不错的方法来做到这一点，而无需大量猴子修补。

我在 linux 上找到了许多有用的工具来执行此操作，但它们都没有给我提供在标头处检查 http 请求内部的粒度（所以我可以找出我们正在请求的 url）。我使用的工具是 vnStat 和 ipfm——它们是很好的系统带宽或主机/网络监控。

理想情况下，我想在 ruby​​ 代码中做一些事情来跟踪发送/接收的数据。我认为如果我可以获取原始标题并将该长度添加到正文长度以进行传输和接收，那将是 Good Enough™。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:02:25.153

Ruby可以使用[New Relic](https://newrelic.com/docs/ruby/new-relic-for-ruby)吗？它具有出色的网络使用/api调用可视化/图表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:44:03.543

[使用Faraday](https://github.com/technoweenie/faraday)编写一个中间件来跟踪它似乎很容易。

# java - 使用 Maven 编译 Java 代码时出现 ArrayIndexOutOfBoundsException

> ID：12680152
> 
> 赞同：2
> 
> 时间：2012-10-01T19:58:20.023
> 
> 标签：java, maven, jboss5.x, seam2, maven-compiler-plugin

仅在运行时出现以下错误`mvn clean`：

```
An exception has occurred in the compiler (1.6.0_34). Please file a bug at the
Java Developer Connection (http://java.sun.com/webapps/bugreport) after
checking the Bug Parade for duplicates. Include your program and the following
diagnostic in your report.  Thank you.
java.lang.ArrayIndexOutOfBoundsException: 117920
at com.sun.tools.javac.zip.ZipFileIndex.get4ByteLittleEndian(ZipFileIndex.java:644)
at com.sun.tools.javac.zip.ZipFileIndex.access$500(ZipFileIndex.java:29)
at com.sun.tools.javac.zip.ZipFileIndex$ZipDirectory.readEntry(ZipFileIndex.java:740)
at com.sun.tools.javac.zip.ZipFileIndex$ZipDirectory.buildIndex(ZipFileIndex.java:720)
at com.sun.tools.javac.zip.ZipFileIndex$ZipDirectory.access$000(ZipFileIndex.java:652)
at com.sun.tools.javac.zip.ZipFileIndex.checkIndex(ZipFileIndex.java:261)
at com.sun.tools.javac.zip.ZipFileIndex.<init>(ZipFileIndex.java:209)
at com.sun.tools.javac.zip.ZipFileIndex.getZipFileIndex(ZipFileIndex.java:115)
at com.sun.tools.javac.util.DefaultFileManager.openArchive(DefaultFileManager.java:621)
at com.sun.tools.javac.util.DefaultFileManager.listDirectory(DefaultFileManager.java:309)
at com.sun.tools.javac.util.DefaultFileManager.list(DefaultFileManager.java:890)
at com.sun.tools.javac.jvm.ClassReader.fillIn(ClassReader.java:2130)
at com.sun.tools.javac.jvm.ClassReader.complete(ClassReader.java:1781)
at com.sun.tools.javac.code.Symbol.complete(Symbol.java:384)
at com.sun.tools.javac.comp.Enter.visitTopLevel(Enter.java:274)
at com.sun.tools.javac.tree.JCTree$JCCompilationUnit.accept(JCTree.java:446)
at com.sun.tools.javac.comp.Enter.classEnter(Enter.java:238)
at com.sun.tools.javac.comp.Enter.classEnter(Enter.java:252)
at com.sun.tools.javac.comp.Enter.complete(Enter.java:457)
at com.sun.tools.javac.comp.Enter.main(Enter.java:442)
at com.sun.tools.javac.main.JavaCompiler.enterTrees(JavaCompiler.java:822)
at com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:727)
at com.sun.tools.javac.main.Main.compile(Main.java:353)
at com.sun.tools.javac.main.Main.compile(Main.java:279)
at com.sun.tools.javac.main.Main.compile(Main.java:270)
at com.sun.tools.javac.Main.compile(Main.java:87)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.codehaus.plexus.compiler.javac.JavacCompiler.compileInProcess0(JavacCompiler.java:551)
at org.codehaus.plexus.compiler.javac.JavacCompiler.compileInProcess(JavacCompiler.java:526)
at org.codehaus.plexus.compiler.javac.JavacCompiler.compile(JavacCompiler.java:167)
at org.apache.maven.plugin.AbstractCompilerMojo.execute(AbstractCompilerMojo.java:678)
at org.apache.maven.plugin.CompilerMojo.execute(CompilerMojo.java:128)
at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
at      org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352) 
```

我使用的环境如下：

*   日食伽利略
*   Java 1.6.0_34（64 机器上的 32 位）
*   JBoss 缝 2.2
*   JBoss AS 5.1

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:53:15.897

我不明白这个问题，但我找到了解决方案：我清理了我的 .m2 目录并重新安装了 jdk。

可以肯定的是，这是一种我们永远无法重现的环境问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-17T18:09:01.657

将 Maven 版本从 3.2 升级到 3.4 对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-27T03:53:50.997

我也遇到了这个问题。我通过一一减少 pom 依赖来解决这个问题。

最后我发现这`son-lib`是问题的主要原因。所以我删除了这个依赖，一切都很好。

# google-app-engine - 我可以在 App Engine 上通过文档 ID 进行全文搜索吗？

> ID：12680158
> 
> 赞同：3
> 
> 时间：2012-10-01T19:58:40.910
> 
> 标签：google-app-engine, full-text-search

在创建具有这样显式 id 的文档后：

```
Document(doc_id = 123) 
```

是否可以使用 id 找到该文档，类似于`get_by_id`使用 Datastore？

我尝试使用`id:123`、`_id:123`、`doc_id:123`和进行查询`_doc_id:123`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T09:19:28.270

`Index.list_documents`具有选项`start_doc_id`，`limit`可用于按 id 获取单个文档。

```
documents = index.list_documents(start_doc_id = id, limit = 1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T17:33:59.317

我还在 Java 中发现您可以执行 index.get(ID)，这可能对 Java 用户有用。

这是 Javadoc： [https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/Index#get(java.lang.String)](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/Index#get(java.lang.String))

# c# - 映射 System.Drawing.Color

> ID：12680163
> 
> 赞同：0
> 
> 时间：2012-10-01T19:59:02.510
> 
> 标签：c#, fluent-nhibernate

如果我不映射`Color`而是映射具有 Color 属性的对象，则`FluentNHibernate`成功将其映射到`varbinary(max)`. 但是，考虑到实际上`Color`仅由 4 个字节组成，并且我热衷于改进它而不使用新类型来代理它，这是非常低效的。

它内部`Color`由四个属性组成，

1.  `long value`（向下转换`int`为代表 ARGB）
2.  `short state`, 指示这是否是已知且有效的颜色
3.  `string name`, 颜色的名称（如果已知）。
4.  `short knownColor`指示它是哪种已知颜色的值

所以我试图将其映射如下。

```
public ColorMapping()
{
    CompositeId()
        .KeyProperty(c => Reveal.Member<Color, long>("value"))
        .KeyProperty(c => Reveal.Member<Color, short>("state"))
        .KeyProperty(c => Reveal.Member<Color, string>("name"))
        .KeyProperty(c => Reveal.Member<Color, short>("knownColor"));
} 
```

但是，在使用时出现以下异常，

> 类初始化方法 DataContextTest.ClassInitialise 抛出异常。FluentNHibernate.Cfg.FluentConfigurationException：FluentNHibernate.Cfg.FluentConfigurationException：创建 SessionFactory 时使用了无效或不完整的配置。检查 PotentialReasons 集合和 InnerException 了解更多详细信息。
> 
> ---> FluentNHibernate.Cfg.FluentConfigurationException：创建 SessionFactory 时使用了无效或不完整的配置。检查 PotentialReasons 集合和 InnerException 了解更多详细信息。
> 
> ---> NHibernate.MappingException：无法编译映射文档：（XmlDocument）---> NHibernate.MappingException：无法确定类型：System.Linq.Expressions.Expression `1[[System.Func`2[[System.Drawing.Color, System.绘图，版本=4.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a]，[System.Int64，mscorlib，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089]]，mscorlib，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089]]，System.Core，版本=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089，对于列：NHibernate.Mapping.Column(Member)。

我在滥用`Reveal`吗？如果是这样，我打算如何使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:23:04.233

我会将它映射为 UserType 来回转换它

```
// in mapping
Map(x => x.Color).Column("ColorARGB").CustomType<ColorUserType>();

[Serializable]
class ColorUserType : IUserType
{
    public object Assemble(object cached, object owner)
    {
        return DeepCopy(cached);
    }

    public object DeepCopy(object value)
    {
        return value;
    }

    public object Disassemble(object value)
    {
        return DeepCopy(value);
    }

    bool IUserType.Equals(object x, object y)
    {
        var colorX = x as Color;
        var colorY = y as Color;
        return colorX == null ? colorY = null : colorX.ToArgb() == colorY.ToArgb();
    }

    public virtual int GetHashCode(object x)
    {
        var colorX = (Color)x;
        return (colorX != null) ? colorX.ToArgb() : 0;
    }

    public bool IsMutable { get { return false; } }

    public object NullSafeGet(IDataReader rs, string[] names, object owner)
    {
        return Color.FromArgb((int)NHibernateUtil.Int32.Get(rs, names[0]));
    }

    public void NullSafeSet(IDbCommand cmd, object value, int index)
    {
        NHibernateUtil.Int32.Set(cmd, ((Color)value).ToArgb(), index);
    }

    public object Replace(object original, object target, object owner)
    {
        return original;
    }

    public Type ReturnedType { get { return typeof(Color); } }

    public SqlType[] SqlTypes { get { return new []{ SqlTypeFactory.Int32 }; } }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T22:29:16.547

最后我选择了 ICompositeUserType。代码如下，

```
public class ColorType : ICompositeUserType
{
    /// <summary>
    /// Get the value of a property
    /// </summary>
    /// <param name="component">an instance of class mapped by this "type"</param>
    /// <param name="property"/>
    /// <returns>
    /// the property value
    /// </returns>
    public object GetPropertyValue(object component, int property)
    {
        var color = (Color) component;
        if (property == 0)
        {
            return color.ToArgb();
        }

        return (int) color.ToKnownColor();
    }

    /// <summary>
    /// Set the value of a property
    /// </summary>
    /// <param name="component">an instance of class mapped by this "type"</param>
    /// <param name="property"/>
    /// <param name="value">the value to set</param>
    public void SetPropertyValue(object component, int property, object value)
    {
        throw new InvalidOperationException("Color is immutable");
    }

    /// <summary>
    /// Compare two instances of the class mapped by this type for persistence
    ///             "equality", ie. equality of persistent state.
    /// </summary>
    /// <param name="x"/><param name="y"/>
    /// <returns/>
    public new bool Equals(object x, object y)
    {
        return ReferenceEquals(x, y) ||
               x != null && y != null &&
               object.Equals(x, y);
    }

    /// <summary>
    /// Get a hashcode for the instance, consistent with persistence "equality"
    /// </summary>
    public int GetHashCode(object x)
    {
        return x == null
                   ? 0
                   : x.GetHashCode();
    }

    /// <summary>
    /// Retrieve an instance of the mapped class from a IDataReader. Implementors
    ///             should handle possibility of null values.
    /// </summary>
    /// <param name="dr">IDataReader</param>
    /// <param name="names">the column names</param>
    /// <param name="session"/>
    /// <param name="owner">the containing entity</param>
    /// <returns/>
    public object NullSafeGet(IDataReader dr, string[] names,
        ISessionImplementor session, object owner)
    {
        var argb = (int?) NHibernateUtil.Int32.NullSafeGet(dr, names[0]);
        var knownColor = (int?) NHibernateUtil.Int32.NullSafeGet(dr, names[1]);
        return knownColor != null
            ? Color.FromKnownColor((KnownColor) knownColor.Value)
            : Color.FromArgb(argb.Value);
    }

    /// <summary>
    /// Write an instance of the mapped class to a prepared statement.
    ///             Implementors should handle possibility of null values.
    ///             A multi-column type should be written to parameters starting from index.
    ///             If a property is not settable, skip it and don't increment the index.
    /// </summary>
    /// <param name="cmd"/>
    /// <param name="value"/>
    /// <param name="index"/>
    /// <param name="settable"/>
    /// <param name="session"/>
    public void NullSafeSet(IDbCommand cmd, object value, int index,
        bool[] settable, ISessionImplementor session)
    {
        var color = (Color) value;
        if (color.IsKnownColor)
        {
            ((IDataParameter) cmd.Parameters[index]).Value = DBNull.Value;
            ((IDataParameter) cmd.Parameters[index + 1]).Value = (int) color.ToKnownColor();
        }
        else
        {
            ((IDataParameter) cmd.Parameters[index]).Value = color.ToArgb();
            ((IDataParameter) cmd.Parameters[index + 1]).Value = DBNull.Value;
        }
    }

    /// <summary>
    /// Return a deep copy of the persistent state, stopping at entities and at collections.
    /// </summary>
    /// <param name="value">generally a collection element or entity field</param>
    /// <returns/>
    public object DeepCopy(object value)
    {
        return value;
    }

    /// <summary>
    /// Transform the object into its cacheable representation.
    ///             At the very least this method should perform a deep copy.
    ///             That may not be enough for some implementations, 
    ///             method should perform a deep copy. That may not be enough for 
    ///             some implementations, however; for example, associations must 
    ///             be cached as identifier values. (optional operation)
    /// </summary>
    /// <param name="value">the object to be cached</param>
    /// <param name="session"/>
    /// <returns/>
    public object Disassemble(object value, ISessionImplementor session)
    {
        return value;
    }

    /// <summary>
    /// Reconstruct an object from the cacheable representation.
    ///             At the very least this method should perform a deep copy. (optional operation)
    /// </summary>
    /// <param name="cached">the object to be cached</param>
    /// <param name="session"/>
    /// <param name="owner"/>
    /// <returns/>
    public object Assemble(object cached, ISessionImplementor session, object owner)
    {
        return cached;
    }

    /// <summary>
    /// During merge, replace the existing (target) value in the entity we are merging to
    ///             with a new (original) value from the detached entity we are merging. For immutable
    ///             objects, or null values, it is safe to simply return the first parameter. For
    ///             mutable objects, it is safe to return a copy of the first parameter. However, since
    ///             composite user types often define component values, it might make sense to recursively
    ///             replace component values in the target object.
    /// </summary>
    public object Replace(object original, object target, ISessionImplementor session, object owner)
    {
        return original;
    }

    /// <summary>
    /// Get the "property names" that may be used in a query.
    /// </summary>
    public string[] PropertyNames { get { return new[] {"Argb", "KnownColor"}; } }

    /// <summary>
    /// Get the corresponding "property types"
    /// </summary>
    public IType[] PropertyTypes
    {
        get
        {
            return new IType[]
                   {
                       NHibernateUtil.Int32, NHibernateUtil.Int32
                   };
        }
    }

    /// <summary>
    /// The class returned by NullSafeGet().
    /// </summary>
    public Type ReturnedClass { get { return typeof (Color); } }

    /// <summary>
    /// Are objects of this type mutable?
    /// </summary>
    public bool IsMutable { get { return false; } }
} 
```

# javascript - 如何在 SVG 上使用箭头标记 元素？

> ID：12680166
> 
> 赞同：32
> 
> 时间：2012-10-01T19:59:10.487
> 
> 标签：javascript, d3.js, svg, graphics

我需要在 d3.js 中创建一个箭头，但我发现的只是带有节点图的示例。我需要的是简单地制作一个从 A 点到 B 点的箭头。

我尝试在以下示例中实现部分代码：http: [//bl.ocks.org/1153292](http://bl.ocks.org/1153292)

这个特定的部分：

```
svg.append("svg:defs").selectAll("marker")
    .data(["suit", "licensing", "resolved"])
  .enter().append("svg:marker")
    .attr("id", String)
    .attr("viewBox", "0 -5 10 10")
    .attr("refX", 15)
    .attr("refY", -1.5)
    .attr("markerWidth", 6)
    .attr("markerHeight", 6)
    .attr("orient", "auto")
  .append("svg:path")
    .attr("d", "M0,-5L10,0L0,5"); 
```

但正如我之前提到的，我没有找到创建箭头的方法，`svg:line` 非常感谢你能给我的帮助。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-10-02T08:24:17.357

If you meant 'how do I use an arrow marker on a <line> element?' then here's how you do that:

```
<line x1="100" y1="230" x2="300" y2="230" 
 marker-end="url(#yourMarkerId)" stroke="black" stroke-width="10"/> 
```

Here's a full [example](http://xn--dahlstrm-t4a.net/svg/markers/simple-marker.svg). And note that `marker-end` is a css property, so you can also put that part in a stylesheet if you want.

If you meant you want to draw your marker with lines, then just add whatever lines you need as a child of the marker element (and make sure to use the coordinate system defined by the marker's viewBox attribute).

# c# - c# - 不能隐式转换类型 void

> ID：12680183
> 
> 赞同：-1
> 
> 时间：2012-10-01T20:00:50.753
> 
> 标签：c#

我有以下表格，它给了我无法将类型 void 隐式转换为 HomeInventory2.Domain.CreateInventory 的错误...

我的表格

```
namespace HomeInventory2
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void label1_Click(object sender, EventArgs e)
        {
        }

        private void submitButton_Click(object sender, EventArgs e)
        {
            CreateInventory create = new CreateInventory();
            create.ItemAmount = textBoxAmount.Text;
            create.ItemCategory = textBoxCategories.Text;
            create.ItemProperties = textBoxValue.Text;
            create.ItemValue = textBoxValue.Text;

            InventoryMngr invtryMngr = new InventoryMngr();
            CreateInventory creating = invtryMngr.Create(create);
        }
    }
} 
```

以及它引用的 createinventory 文件

```
namespace HomeInventory2.Domain
{
    [Serializable]
    public class CreateInventory
    {
        private string itemCategory;
        public String ItemCategory
        {
            set { itemCategory = value; }
            get { return itemCategory; }
        }

        private string itemProperties;
        public String ItemProperties
        {
            set { itemProperties = value; }
            get { return itemProperties; }
        }

        private string itemAmount;
        public String ItemAmount
        {
            set { itemAmount = value; }
            get { return itemAmount; }
        }

        private string itemValue;
        public String ItemValue
        {
            set { itemValue = value; }
            get { return itemValue; }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:07:02.840

你为什么这样做：

`CreateInventory creating = invtryMngr.Create(create);`

为什么不只是：

`invtryMngr.Create(create);`

因为你正在做的是创建另一个`CreateInventory`，从你发布的代码来看，不需要在那里。这就是给你错误的原因，因为`invtryMngr.Create()`很可能返回无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:05:11.093

看起来您正在调用 void 方法，`invtryMngr.Create(create);`因此编译器告诉您，由于该方法不返回任何内容，因此您不能将其分配给`creating`变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T20:05:28.507

给你错误的行是：

```
CreateInventory creating = invtryMngr.Create(create); 
```

事实上，我认为这`invtryMngr.Create(create)`并没有返回任何东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T20:15:39.183

正如其他人已经指出的那样，这条线`invtryMngr.Create(create);`可能是导致问题的原因。

该`Create`方法可能具有 void 返回类型

```
public void Create(CreateInventory create)
{
    ...
} 
```

要么这样称呼它而无需分配

```
invtryMngr.Create(create); 
```

或将方法更改为

```
public CreateInventory Create(CreateInventory create)
{
    ...
    return createdInventory;
} 
```

# android - 编辑文本Android之间的输入重复

> ID：12680184
> 
> 赞同：0
> 
> 时间：2012-10-01T20:00:51.173
> 
> 标签：android, android-edittext

这是我的问题，我有两个编辑文本，一个最大值为 2 位，另一个接受所有值。但是当我输入时，在第一个编辑文本中，值在第二个中再次重复，并开始使用第一个中的两个值写入。任何答案如何停止出现第二个编辑文本中属于第一个的值？

这是代码：

```
 if (inStr.equals("0")) {
               inStr = inDigit;
            } else {
               inStr += inDigit;

               int maxLength = 2;
               InputFilter[] FilterArray = new InputFilter[1];
               FilterArray[0] = new InputFilter.LengthFilter(maxLength);
               editX.setFilters(FilterArray);                  
               editX.setText(inStr);              
            }

            if(inStr1.equals("0")){
                   inStr1 = inDigit;
               }
            else{
                inStr1 += inDigit; 

                          editY.requestFocus(); 

                          editY.setText(inStr1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:55:00.253

很难说出代码的上下文，但这一行似乎是罪魁祸首：

```
editY.setText(inStr1); 
```

如果需要，只需删除该行或将其更改为`editY.setText("")`以确保其为空。

# javascript - 从动态添加的元素打开 jQuery 对话框

> ID：12680185
> 
> 赞同：0
> 
> 时间：2012-10-01T20:00:53.237
> 
> 标签：javascript, jquery, jquery-ui

我动态地将内容添加到我的页面（向表中添加行）。

我希望通过单击表格行来打开一个包含来自外部 URL 的内容的模式对话框。

这就是我所拥有的。对话框将打开，但没有内容...

```
newRow.onclick = function() {
    $(".detail_popup").dialog({
        modal: true,
        open: function (event, ui)
        {
            $(this).load("http://www.google.com");
        },
        //autoOpen: true,
        width: 500,
        height: 600,
        title: "Detailed Info",
        resizable: false,
    });
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:03:52.413

如果触发动作的元素已被动态添加到 DOM，则需要使用 jQuery 的“live”事件：http: [//api.jquery.com/live/](http://api.jquery.com/live/)

例如：

```
$("newRowSelector").live("click", function(){

    $(".detail_popup").dialog({
        modal: true,
        open: function (event, ui)
        {
            $(this).load("http://www.google.com");
        },
        //autoOpen: true,
        width: 500,
        height: 600,
        title: "Detailed Info",
        resizable: false,
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:06:52.497

如果是新添加的元素，则需要将事件委托给父元素，以便将单击事件附加到新添加的行，，

```
$('table').on('tr' , 'click', function() {
    $(".detail_popup").dialog({
        modal: true,
        open: function (event, ui)
        {
            $(this).load("http://www.google.com");
        },
        //autoOpen: true,
        width: 500,
        height: 600,
        title: "Detailed Info",
        resizable: false,
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T20:21:27.187

HTML：

```
<input type="button" id="add-row" value="Add row" /><br />

<table id="my-table">
    <tr><td>Row 1</td></tr>
    <tr><td>Row 2</td></tr>
</table>

<div id="detail-popup">
    <iframe>temp</iframe>
</div>​ 
```

jQuery：

```
$('#detail-popup').dialog({
    modal: true,
    open: function (event, ui)
    {
        $(this).find('iframe').attr('src', 'http://www.microsoft.com');
    },
    autoOpen: false,
    width: 500,
    height: 600,
    title: "Detailed Info",
    resizable: false
});

$('#add-row').click(function() {
   $('#my-table').append('<tr><td>New Row</td></tr>');
});

$('#my-table').on('click', 'tr', function() {
    $('#detail-popup').dialog('open');
});​ 
```

几点注意事项：

1.  从 jQuery 1.7开始，您将希望使用[`.on`](http://api.jquery.com/on/)as is deprecated。`.live`
2.  您需要将外部站点加载到`iframe`.，或将其加载到服务器端，然后加载到您的模态对话框 div 中。
3.  Google 主页有一些脚本不允许您将 www.google.com 加载到`iframe`. 我知道人们经常谈论它，但我不确定是否有解决方法。因此，我在示例中加载了 www.microsoft.com。
4.  我在 id 中添加了一个 id `table`，只是为了在使用该`.on`函数时使事情更加明确。

小提琴：http: [//jsfiddle.net/gromer/YEs9R/1/](http://jsfiddle.net/gromer/YEs9R/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T21:50:43.727

如果我正确理解了您的问题，那么您的问题不在于您的点击事件失败（正如上面的答案所解决的那样），而只是没有任何内容加载到显示的对话框中？

我刚刚尝试了您的代码示例，我认为 jQuery 不想加载 www.google.com 是一个安全问题，因为它来自不同的域。当我使用指向来自同一域的某些内容的 url 时，它工作正常。你试过了吗？

# javascript - 图像轨迹脚本

> ID：12680187
> 
> 赞同：0
> 
> 时间：2012-10-01T20:01:01.550
> 
> 标签：javascript, wordpress, cursor

我有以下用于光标轨迹的脚本，但是光标图像出现在页面的左上角并且没有显示为光标轨迹？什么可能导致脚本无法正常运行？我从以下位置复制了这个脚本： [http ://www.dynamicdrive.com/dynamicindex13/trailer.htm](http://www.dynamicdrive.com/dynamicindex13/trailer.htm)

我曾尝试编辑图像路径（我最初使用图像的绝对路径），我还尝试禁用以前用于此路径的“插件”

```
<script>
/******************************************
* Cross browser cursor trailer script- By Brian Caputo (bcaputo@icdc.com)
* Visit Dynamic Drive (http://www.dynamicdrive.com/) for full source code
* Modified Dec 31st, 02' by DD. This notice must stay intact for use
******************************************/

A=document.getElementById
B=document.all;
C=document.layers;
T1=new Array("wp-content/uploads/2012/10/meerkat1.gif",77,39,"wp-content/uploads/2012/07/meerkat2.gif",77,39,"wp-content/uploads/2012/10/meerkat3.gif",77,39,"wp-content/uploads/2012/10/meerkat4.gif",77,39,"wp-content/uploads/2012/10/meerkat5.gif",77,39,"wp-content/uploads/2012/10/meerkat6.gif",77,39)

var offsetx=15 //x offset of trail from mouse pointer
var offsety=10 //y offset of trail from mouse pointer

nos=parseInt(T1.length/3)
rate=50
ie5fix1=0;
ie5fix2=0;
rightedge=B? document.body.clientWidth-T1[1] : window.innerWidth-T1[1]-20
bottomedge=B? document.body.scrollTop+document.body.clientHeight-T1[2] : window.pageYOffset+window.innerHeight-T1[2]

for (i=0;i<nos;i++){
createContainer("CUR"+i,i*10,i*10,i*3+1,i*3+2,"","<img src='"+T1[i*3]+"' width="+T1[(i*3+1)]+" height="+T1[(i*3+2)]+" border=0>")
}

function createContainer(N,Xp,Yp,W,H,At,HT,Op,St){
with (document){
write((!A && !B) ? "<layer id='"+N+"' left="+Xp+" top="+Yp+" width="+W+" height="+H : "<div id='"+N+"'"+" style='position:absolute;left:"+Xp+"; top:"+Yp+"; width:"+W+"; height:"+H+"; ");
if(St){
if (C)
write(" style='");
write(St+";' ")
}
else write((A || B)?"'":"");
write((At)? At+">" : ">");
write((HT) ? HT : "");
if (!Op)
closeContainer(N)
}
}

function closeContainer(){
document.write((A || B)?"</div>":"</layer>")
}

function getXpos(N){
if (A)
return parseInt(document.getElementById(N).style.left)
else if (B)
return parseInt(B[N].style.left)
else
return C[N].left
}

function getYpos(N){
if (A)
return parseInt(document.getElementById(N).style.top)
else if (B)
return parseInt(B[N].style.top)
else
return C[N].top
}

function moveContainer(N,DX,DY){
c=(A)? document.getElementById(N).style : (B)? B[N].style : (C)? C[N] : "";
if (!B){
rightedge=window.innerWidth-T1[1]-20
bottomedge=window.pageYOffset+window.innerHeight-T1[2]
}
c.left=Math.min(rightedge, DX+offsetx);
c.top=Math.min(bottomedge, DY+offsety);
}
function cycle(){
//if (IE5) 
if (document.all&&window.print){
ie5fix1=document.body.scrollLeft;
ie5fix2=document.body.scrollTop;
}
for (i=0;i<(nos-1);i++){
moveContainer("CUR"+i,getXpos("CUR"+(i+1)),getYpos("CUR"+(i+1)))
}
}

function newPos(e){
moveContainer("CUR"+(nos-1),(B)?event.clientX+ie5fix1:e.pageX+2,(B)?event.clientY+ie5fix2:e.pageY+2)
}

function getedgesIE(){
rightedge=document.body.clientWidth-T1[1]
bottomedge=document.body.scrollHeight-T1[2]
}

if (B){
window.onload=getedgesIE
window.onresize=getedgesIE
}

if(document.layers)
document.captureEvents(Event.MOUSEMOVE)
document.onmousemove=newPos
setInterval("cycle()",rate)
</script> 
```

# cordova - 根据页脚点击在页脚中显示/隐藏导航栏

> ID：12680188
> 
> 赞同：0
> 
> 时间：2012-10-01T20:01:04.870
> 
> 标签：cordova, jquery-mobile, footer, navbar

jqm 1.1.1 和科尔多瓦 2.0.0

我在页脚中捕获点击，并在点击时切换显示（）/隐藏（）导航栏。

到目前为止，我正在捕获水龙头，导航栏正在显示/隐藏，但是当它显示时，它会将页面延长导航栏的高度。这种长度并不明显，但它使页面即使在导航栏被隐藏后也可以滚动。（它只将导航栏高度添加到页面底部一次。）

仅供参考，“点击切换”不是一个选项，因为它需要在屏幕的 ui 内容部分点击，并且还有其他可点击项，这就是我必须在页脚中捕获点击的原因。

我怎么能不把那个长度添加到页面底部，这样导航栏更像是一个覆盖而不是一个扩展，或者我怎样才能在 hide() 上删除那个额外的高度；

页脚代码如下所示：

```
<div data-role="footer" data-position="fixed" data-theme="b">
  <div id="menu" data-role="navbar" data-iconpos="top">
    <ul>
      <li><a href="#" data-icon="gear">Settings</a></li>
      <li><a href="#" data-icon="delete">Delete</a></li>
    </ul>
  </div>
  <h6>App Footer Text</h6>
</div><!-- /footer --> 
```

显示/隐藏 javascript 是这样的：

```
if(stateMenu == false)
{
  $('#menu').addClass('fixed');
  $("#menu").show();
  stateMenu = true; 
}
else
{
  $('#menu').removeClass('fixed'); 
  $('#menu').hide();  
  stateMenu = false;
} 
```

谢谢大家...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:06:00.583

将此添加到显示块：

```
$('#menu').css('display', 'normal'); 
```

将此添加到隐藏块：

```
$('#menu').css('display', 'none'); 
```

这会从 dom 中删除 div，因此现在菜单显示/隐藏并且看起来应该...您可以将其绑定到任何事件，包括菜单按钮（我已将其绑定到菜单按钮和页脚内的点击）

# python-2.7 - python shell返回不正确的结果

> ID：12680194
> 
> 赞同：0
> 
> 时间：2012-10-01T20:01:27.180
> 
> 标签：python-2.7

在 shell 中键入以下内容：`3 * 7.1`
Python 返回值：21.299999999999997

当结果当然是 21.3 时。

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:03:36.693

[在这里查看](http://docs.python.org/tutorial/floatingpoint.html)以了解二进制系统中浮点数学的局限性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:03:09.770

这符合浮点数的标准。当你处理浮点数时，你不会得到精确的数字，因为浮点数是使用二进制实现的。想想看，没有可能的方法来处理一个无限精度的数字。

请参阅[Floats 的 Wiki 页面](http://en.wikipedia.org/wiki/Floating_point)。

# html - 创建带有描述的菜单项

> ID：12680201
> 
> 赞同：0
> 
> 时间：2012-10-01T20:01:50.143
> 
> 标签：html, css, menu

今天我尝试了一些独特的东西，所以我决定编写我的模板。

你知道有些菜单有标题和描述吗？

例子：

主页 我们的主页

关注我们！

菜单应该是这样的：

[http://gyazo.com/360b81db32cf61922e9ff8f55274d779](http://gyazo.com/360b81db32cf61922e9ff8f55274d779)

好的，我尝试简单地通过
在 li 项目中使用来添加描述，但它根本不起作用！

```
<div class="header">
     <div class="container">
           <div id="logo"><a href="#"><img src="img/logo.png"/></a></div>
                <div class="menu">
                <ul>
                <li>Home<br /> Main Page</li>
                <li>Home<br /> Main Page</li>
                <li>Home<br /> Main Page</li>
                <li>Home<br /> Main Page</li>
                <li>Home<br /> Main Page</li>
                </ul>
            </div>
     </div>
</div> 
```

那是我使用的 CSS：

```
.header {
background: #6b6353 url("../img/header.png");
width: 100%;
height: 112px;
}

#logo {
float: left;
margin-top:22px;
}

.subheader {
background: #deac12 url("../img/subheader.png");
width: 100%;
height: 36px;
}

.menu ul li{
display: inline;
} 
```

为什么即使它有内联和中断它也不起作用？

该代码会发生什么：

[http://gyazo.com/a585ed4b408f3c6ed2583244ea4ff236](http://gyazo.com/a585ed4b408f3c6ed2583244ea4ff236)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:06:55.647

你应该`display: inline-block`为你的 li 使用，看在上帝的份上，停止使用`<br>`标签，使用 a`<span>`或 a`<p>`代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:07:12.933

```
.menu ul li{
    float: left;    
}​ 
```

将解决您的问题。你得到了换行符，但是第二`li`个换行符在第二个换行符之后立即开始（第 2 个 li 的第 1 行将在第 1 个 li 的第 2 行旁边开始），所以这类似于

```
[Home
Main Page][Home
Main Page][Home
Main Page]... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T20:08:33.010

尝试使用

```
.menu ul li{
list-style: none;
float: left;
} 
```

删除`display: inline;`将使列表样式可见，这就是为什么`list-style: none;`，并且`float: left;`将使所有内容都`<li>`在同一行。

# ios - 如何在按钮单击时将用户发送到 Facebook 页面

> ID：12680205
> 
> 赞同：5
> 
> 时间：2012-10-01T20:02:00.007
> 
> 标签：ios, xcode, facebook, ibaction

我是 iOS 开发的新手，所以请多多包涵。

我正在创建一个简单的应用程序。有一个 facebook 按钮，我希望该按钮将用户发送到我的 facebook 页面，无论是在浏览器中，还是如果他们有 facebook 应用程序打开它。

我知道可能有很多需要解释，但如果有人能指出我正确的方向，那就太好了，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:44:36.723

您需要下载 FacebookSDK 并按照那里描述的步骤进行操作。查看此页面[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)

希望有帮助...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T20:52:30.920

从 Facebook 4.0 更新开始，您可以跳转到具有此 URI 架构的页面：

```
fb://page/{fbid} 
```

只需确保您检查以确保您正在使用的设备可以响应它：

```
[[UIApplication sharedApplication] canOpenURL:[NSURL urlWithString:@"fb://page/{fbid}"]]; 
```

您的方法可能最终看起来像这样：

```
- (IBAction)openFBPage:(id)sender {
    if ([[UIApplication sharedApplication] canOpenURL:[NSURL urlWithString:@"fb://page/{fbid}"]]) {
        [[UIApplication sharedApplication] openURL:[NSURL urlWithString:@"fb://page/{fbid}"]];
    } else {
        NSLog(@"Facebook isn't installed.");
        // or do the sensible thing and openURL the HTTP version of the page in safari
} 
```

...您可以将上述方法与您在 Interface Builder 中的按钮链接起来。

# ruby-on-rails - Ruby 1.9 的多字节字符无效，设置编码：utf-8 无法修复

> ID：12680208
> 
> 赞同：0
> 
> 时间：2012-10-01T20:02:21.890
> 
> 标签：ruby-on-rails, rvm

我刚刚将我的 Ruby 版本从 1.8.7 升级到 1.9.2（使用 RVM）。所以 Ruby 是：ruby 1.9.3p194（2012-04-20 修订版 35410）[x86_64-darwin12.2.0]。该应用程序在 Rails 3.2.8 上。自升级以来，我收到有关多字节字符的错误。

我在 stackoverflow 上发现了多个*非常相似*的问题，但其中没有一个解决方案对我有用：

[Ruby 1.9 -](https://stackoverflow.com/questions/3678172/ruby-1-9-invalid-multibyte-char-us-ascii) [Rails 和 Ruby 1.9](https://stackoverflow.com/questions/1739836/invalid-multibyte-char-us-ascii-with-rails-and-ruby-1-9) 和 [Rails 3.1、Ruby 1.9.2-p180 和 UTF-8 问题的](https://stackoverflow.com/questions/6774080/rails-3-1-ruby-1-9-2-p180-and-utf-8-issues)无效多字节字符 (US-ASCII) 和 无效多字节字符 (US-ASCII)

当我启动我的应用程序并尝试浏览它时，出现多个错误，例如：

> SyntaxError (/Users/antun/ror/parktwor3svn/app/helpers/application_helper.rb:35: 无效的多字节字符 (UTF-8) /Users/antun/ror/parktwor3svn/app/helpers/application_helper.rb:35: 语法错误, 出乎意料的 tIDENTIFIER, 期待 ']' ... 国家”、“阿富汗”、“？陆地群岛”、“阿尔巴尼亚”、“阿尔及利亚...

有问题的代码（在 app/helpers/application_helper.rb 中）看起来像这样。为简洁起见，我将其归结为前几个国家 - “奥兰群岛”中的“Å”是触发它的字符之一。当我在编辑器中查找该字符时，我得到：00c5。（其他国家/地区名称中有更多的 unicode 字符）。

```
 def countries
    return ["", "United States", "Afghanistan", "Åland Islands", "Albania"]
  end 
```

到目前为止，我已经尝试将以下内容添加到 app/helpers/application_helper.rb作为修复它*的第一行：*

```
# encoding: UTF-8 
```

和

```
# encoding: utf-8 
```

和

```
# -*- coding: utf-8 -*- 
```

这些都不起作用。

我的 config/application.rb 有：

```
config.encoding = "utf-8" 
```

我的文本编辑器是 VIM，当我对该文件执行 :set encoding 时，它返回：“encoding=utf-8”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:05:56.773

使用诸如*od*之类的工具（假设您使用的是 Linux）来查看*文件的实际内容*。如果您有单字节 C5，则您的文件不是 UTF-8。它可能存储在 ISO-8859-1 或类似格式中，Ruby 的抱怨非常正确。

# php - 为什么重音字符没有正确存储在我的 MySQL 数据库中？

> ID：12680214
> 
> 赞同：0
> 
> 时间：2012-10-01T20:02:47.487
> 
> 标签：php, utf-8, character-encoding, drupal-7, doctrine-orm

我有一个 drupal 表单，它使用 Doctrine 库将用户输入保存到 MySQL 数据库中。问题是，如果用户输入有重音字符，它们在 DB 中看起来不太好。例如，`Sempé`变成`SempÃ©`。这对我来说很奇怪，因为：

*   它存储到的字段是 utf8：`varchar(20) COLLATE utf8_swedish_ci NOT NULL,`
*   该表也是 utf8：`ENGINE=InnoDB AUTO_INCREMENT=202 DEFAULT CHARSET=utf8 COLLATE=utf8_swedish_ci`
*   我所有的 php 脚本，包括告诉 drupal 哪些字段要添加到表单中的脚本）都保存为 utf-8
*   drupal 创建的表单接受 utf8：`<form enctype="multipart/form-data" action="/drupal/identification" method="post" id="form-identification" accept-charset="UTF-8">`
*   drupal 创建的页面以 utf8 格式发送：`<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />`
*   php->mysql 连接设置为 utf8：

    ```
    $dbParams = array("driver" => "pdo_mysql",
        "host" => variable_get("dbManip_host"),
        "user" => variable_get("dbManip_user"),
        "password" => variable_get("dbManip_password"),
        "dbname" => variable_get("dbManip_dbName"),
        "charset" => "utf8"); 
    ```

我也试过：

*   添加`default_charset = "utf8"`到**php.ini**
*   `utf8_encode`在保存之前传递表单数据
*   `mb_convert_encoding`在保存之前传递表单数据

但这些都没有奏效。

我在这里错过了什么吗？

**更新**

我查看了浏览器发送到服务器的标头并发现`$_SERVER['HTTP_ACCEPT_CHARSET'] === null`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:07:34.157

您应该尝试在实体管理器的配置中添加一个名为 charset 的额外参数：

```
$conn = array(
  'driver' => 'pdo_mysql',
  'host' => 'hostname',
  'user' => 'user',
  'password' => 'pass',
  'dbname' => 'dbname',
  'charset' => 'utf8'
);

$entityManager = \Doctrine\ORM\EntityManager::create($conn, $config); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T22:11:52.723

在通过给定的 PHP MySQL 链接提交任何其他查询之前，请尝试：

```
mysql_query('SET NAMES UTF8'); 
```

此语句表明通过同一 MySQL 链接提交的进一步查询将采用 UTF8 字符集。

当您想稍后检索 MySQL 数据并通过 PHP 发布到网页时，请务必在 HTTP 标头中设置字符集：

```
header('Content-type: text/html; charset=utf-8'); 
```

...并在显示的内容中转换为 HTML 实体：

```
echo mb_convert_encoding($mysql_col_str, 'HTML-ENTITIES', 'UTF-8'); 
```

（这个最后的语句假设已经定义了一个变量**$mysql_col_str ，其中包含 MySQL 查询返回的 UTF8 值）**

# java - Java在同一个类的另一个方法中调用一个方法

> ID：12680220
> 
> 赞同：0
> 
> 时间：2012-10-01T20:03:11.970
> 
> 标签：java, methods

首先，我在 Java 方面的经验很少。

谈到我的问题，我正在用我自己的方法实现我自己的列表。

```
public class MyList<E> implements List<E>{
..... 
```

其中一种方法返回我的列表的大小

```
 public int getSize(){
 ....
 } 
```

然后，如果我能以某种方式将此方法应用于我的列表，那么我还有另外两种更简单的方法。怎么会这样？

我有一个方法必须比较给定列表是否等于该列表

```
 public boolean equals(Lista<E> list){
 ....
 } 
```

我虽然首先比较了两个列表的大小，如果它们不匹配，则返回 false。如果他们这样做，它会继续比较每个元素。这可能吗？我将如何应用 getSize ？如果这是不可能的，我将逐个元素进行比较。

我的另一种方法必须返回每个元素的数组

```
public Object[] toArray() {
   E myarray = new E[??] 
```

正如你所看到的，我不知道如何声明这个数组。我必须事先知道我的名单的大小。我虽然关于作为参数传递（这将解决问题）但我需要以这种方式解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:05:14.587

你打电话`list.getSize()`，像这样：

```
if (list.getSize() != this.getSize()) {
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:07:29.783

由于您无法在 Java 中创建通用数组，因此您必须这样做

```
public Object[] toArray() { 
   E[] myarray = (E[]) new Object[this.getSize()]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T20:05:00.787

只需使用以下`getSize()`方法：

```
E myarray = new E[getSize()]; 
```

# c# - 为什么 SqlParameter 没有得到值？

> ID：12680225
> 
> 赞同：-2
> 
> 时间：2012-10-01T20:03:22.960
> 
> 标签：c#, asp.net, sql-server, sqlparameter

我正在尝试`SqlParameter`用字符串初始化 a 的值。但为什么它没有得到价值？

这是我尝试过的：

```
 int loadChart(string status)
 {
        connect();

        SqlParameter[] parameters ={
                                      new SqlParameter("status", SqlDbType.VarChar, 10),
                                      new SqlParameter("count", SqlDbType.Int, 4)
                                  };

        parameters[0].Value = status;
        parameters[1].Direction = ParameterDirection.Output;

        SqlCommand cmd = new SqlCommand("sp_Arsenic_getSourceStatusCount", objConnection);

        foreach (SqlParameter param in parameters)
        {
            cmd.Parameters.Add(param);
        }

        cmd.ExecuteNonQuery();

        disConnect();

        int count;
        count =(int) parameters[1].Value;

        return count;
    }
} 
```

存储过程：

```
alter procedure sp_Arsenic_getSourceStatusCount
@status varchar(10),
@count int
as
select @count=COUNT(status) from Arsenic_WaterSource where status=@status
return 1 
```

插入断点我发现字符串变量`status`的值是“安全的”，但在gets`parameters[0].Value = (string) status;`行。如何解决这个问题？`parameters[0].value``null`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T20:29:55.347

您没有在过程中将 @count 参数定义为 OUTPUT 参数：

```
alter procedure sp_Arsenic_getSourceStatusCount
@status varchar(10),
@count int OUTPUT  /* <--------------  */
as
select @count=COUNT(status) from Arsenic_WaterSource where status=@status
return 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:18:41.190

尝试这个：

```
connect();

SqlCommand cmd = new SqlCommand("sp_Arsenic_getSourceStatusCount", objConnection);

cmd.Parameters.Add(new SqlParameter("@status", status));
SqlParameter pCount = new SqlParameter("@count", 0);
pCount.Direction = System.Data.ParameterDirection.Output;
cmd.Parameters.Add(pCount);

cmd.ExecuteNonQuery();

disConnect();

int count = Convert.ToInt32(parameters[1].Value);

return count; 
```

和这个：

```
alter procedure sp_Arsenic_getSourceStatusCount
@status varchar(10),
@count int = 0 OUTPUT
as
set nocount on
select @count=COUNT(status) from Arsenic_WaterSource where status=@status
go 
```

# python - GNU readline 模块中 Python 的 file_object.readline() 的等价物是什么？

> ID：12680226
> 
> 赞同：1
> 
> 时间：2012-10-01T20:03:26.900
> 
> 标签：python, python-3.x, gnu, readline

我浏览了基于 GNU 的 readline 模块的 (Python 3.3) 文档，我可以看到除了读取一行之外，我几乎可以做所有我想做的事情。我不知道如何使用 readline 模块并要求下一行，就像在 sys.stdin.readline() 中不太复杂的那样。

那么如何将 Python 的 GNU readline 工具用作增强的 sys.stdin.readline() 呢？

# windows - vbs如何从命令行命令获取结果

> ID：12680227
> 
> 赞同：7
> 
> 时间：2012-10-01T20:03:26.653
> 
> 标签：windows, vbscript, get

我想使用 Windows 脚本 (.vbs) 从命令行 (cmd.exe) 获取简单命令的结果。这是怎么做到的？我找不到一个好的/简单的例子或解释。您可以使用“日期”或“时间”命令来提供示例。如：

![在此处输入图像描述](../Images/2cac0fe8123e7709e4e758b24649390f.png)

PS 我能够编写打开 cmd.exe 并发送命令的脚本代码。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T20:14:27.627

如有疑问，请阅读[文档](http://msdn.microsoft.com/en-us/library/2f38xsxe%28v=vs.84%29.aspx)。你可能想要这样的东西：

```
Set p = CreateObject("WScript.Shell").Exec("%COMSPEC% /c date /t")
Do While p.Status = 0
  WScript.Sleep 100
Loop
WScript.Echo p.StdOut.ReadAll 
```

**编辑：**使用`Exec()`时通过[`.StdIn`](http://msdn.microsoft.com/en-us/library/yzzwsz3t%28v=vs.84%29.aspx)描述符传递输入，而不是通过`SendKeys()`（无论如何这是一种相当不可靠的传递输入方式）。

`%COMSPEC%`是一个具有完整路径的系统环境变量，`cmd.exe`并且该`/c`选项在命令（在示例中）完成`cmd.exe`后退出。`date /t`

如果命令通过退出代码指示成功/失败，您可以[`ExitCode`](http://msdn.microsoft.com/en-us/library/za76z6hh%28v=vs.84%29.aspx)在命令完成后检查属性。

```
If p.Status <> 0 Then WScript.Echo p.ExitCode 
```

**Edit2：**`atprogram`您可以构建命令行来执行特定任务而无需用户交互，而不是交互式使用？使用非交互式命令行可能会起作用：

```
prompt = "C:\>"
atprogram_cmdline_1 = "atprogram.exe ..."
atprogram_cmdline_2 = "atprogram.exe ..."
'...

Function ReadOutput(p)
  text = ""
  Do Until Right(text, Len(prompt)) = prompt
    text = text & p.StdOut.Read(1)
  Loop
  ReadOutput = text
End Function

Set cmd = CreateObject("WScript.Shell").Exec("%COMSPEC% /k")
ReadOutput cmd  ' skip over first prompt

cmd.StdIn.WriteLine(atprogram_cmdline_1)
WScript.Echo ReadOutput(cmd)
cmd.StdIn.WriteLine(atprogram_cmdline_2)
WScript.Echo ReadOutput(cmd)
'...

cmd.Terminate  ' exit CMD.EXE 
```

`%COMSPEC% /k`在不运行命令的情况下生成命令提示符。`/k`防止它关闭。因为它不会自动关闭，所以您不能在`While p.Status = 0`此处使用循环。如果一个命令需要一些时间来完成，你需要`WScript.Sleep`几秒钟。

通过`cmd.StdIn.WriteLine`您可以在`CMD`实例中运行命令行。该函数`ReadOutput()`读取输出，`StdOut`直到出现下一个提示。您需要寻找提示，因为读取操作是阻塞的，所以您不能简单地说“读取所有已打印的内容”。

完成后，您`CMD.EXE`通过退出`cmd.Terminate`。

# actionscript-3 - 将 URL 参数传递给加载的 swf

> ID：12680228
> 
> 赞同：0
> 
> 时间：2012-10-01T20:03:30.393
> 
> 标签：actionscript-3

我有 html 页面传递参数到 swf：

```
<param name="movie" value="Template.swf?xmlName=63"> 
```

我可以访问我的 swf 文件中的参数值：

```
var val:String = root.loaderInfo.parameters.xmlName;

so val = 63 
```

但现在我要通过前一个 swf 加载另一个 swf。如何从第二个（加载的）swf 调用参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:38:10.770

最简单的方法是使用 LocalConnection。假设两个 swf 在同一个域上：

加载的 SWF：

```
var connection:LocationConnection = new LocalConnection();
connection.connect("connectionName");

function yourMethod(value:String):void
{
    trace("I received "+value);
} 
```

调用 SWF：

```
var connection:LocationConnection = new LocalConnection();
var param:String = root.loaderInfo.parameters.xmlName;
conn.send("connectionName","yourMethod",param); 
```

有关 LocalConnection 的更多信息，请参见[此处](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/LocalConnection.html#send%28%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:07:19.393

您可以像在 html 中一样传递变量

```
var val:String = root.loaderInfo.parameters.xmlName;
var urlRequest:URLRequest = new URLRequest("second.swf?xmlName=" + val);
loader.load(urlRequest); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T18:52:31.617

感谢您的帮助，但我这样做更简单，我从加载的 swf 访问了 var val ：

```
var xmlTextName:String ;
var asdasd:Object;
asdasd = this.parent.parent.parent.parent;  
xmlTextName = String(asdasd.val)// xmlTextName =63 
```

我不知道是什么或为什么，但它现在正在运行（：

# xcode - xcode 4.5 在打开项目时崩溃

> ID：12680231
> 
> 赞同：2
> 
> 时间：2012-10-01T20:03:44.060
> 
> 标签：xcode, crash

非常烦人：当我打开我的一个项目时，xcode 不断崩溃。

我不知道为什么...

这个

[XCode 4.3.1 在打开特定项目时崩溃](https://stackoverflow.com/questions/9759209/xcode-4-3-1-crashes-on-opening-specific-project)

没有帮助 - 这是崩溃日志 - 任何想法？

```
Process:         Xcode [19761]
Path:            /Applications/Xcode.app/Contents/MacOS/Xcode
Identifier:      com.apple.dt.Xcode
Version:         4.5 (1839)
Build Info:      IDEApplication-1839000000000000~3
App Item ID:     497799835
App External ID: 10747437
Code Type:       X86-64 (Native)
Parent Process:  launchd [198]
User ID:         501

Date/Time:       2012-10-01 21:48:52.265 +0200
OS Version:      Mac OS X 10.8.2 (12C54)
Report Version:  10
Sleep/Wake UUID: 9ACF0419-50CB-4C8A-9DAB-48BB96BC96BE

Interval Since Last Report:          92224 sec
Crashes Since Last Report:           11
Per-App Interval Since Last Report:  263627 sec
Per-App Crashes Since Last Report:   11

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000

Application Specific Information:
ProductBuildVersion: 4G182
ASSERTION FAILURE in /SourceCache/IDEFoundation/IDEFoundation-1877/Framework/Classes/Model/SourceControl/IDESourceControlUtilities.m:73
Details:  Unable to make tmp file
Function: DVTFilePath *IDESourceControl_filePathForTmpFileBasedOnFileName(NSString *)
Thread:   <NSThread: 0x40030a1e0>{name = (null), num = 1}
Hints:   None
Backtrace:
  0  0x0000000101f63a5c -[IDEAssertionHandler handleFailureInFunction:fileName:lineNumber:messageFormat:arguments:] (in IDEKit)
  1  0x000000010122a20d _DVTAssertionHandler (in DVTFoundation)
  2  0x000000010122a2a5 _DVTAssertionFailureHandler (in DVTFoundation)
  3  0x0000000101ad87b5 IDESourceControl_filePathForTmpFileBasedOnFileName (in IDEFoundation)
  4  0x00000001092a9c6e -[GitExportFileOperation initWithRequest:] (in IDEGit)
  5  0x000000010929e640 -[GitController operationForRequest:] (in IDEGit)
  6  0x0000000101a0c0d8 -[IDESourceControlManager performRequest:waitUntilFinished:withCompletionBlock:] (in IDEFoundation)
  7  0x0000000101a91d99 __96-[IDESourceControlWorkingTreeGroup temporaryFolderForBranchName:revisionNumber:completionBlock:]_block_invoke_0 (in IDEFoundation)
  8  0x0000000101a91c72 -[IDESourceControlWorkingTreeGroup temporaryFolderForBranchName:revisionNumber:completionBlock:] (in IDEFoundation)
  9  0x000000010201fd58 -[IDESourceControlWorkingTreeGroup(IDESourceControlDocumentLocationAdditions) exportPrivateTemporaryDocumentForBranchName:revisionName:usingTemplateDocument:completionBlock:] (in IDEKit)
 10  0x0000000101eb8a18 -[IDEComparisonEditor _exportSecondaryDocument] (in IDEKit) 
```

# c# - DynamicResource 抛出异常

> ID：12680237
> 
> 赞同：1
> 
> 时间：2012-10-01T20:04:10.573
> 
> 标签：c#, wpf, binding

我必须将以下样式应用于我的`ListViewItem`：

```
<UserControl.Resources>

<local:Look x:Key="ListViewItemLook" Background="Magenta"/>

<Style x:Key="ListViewItemStyle" TargetType="{x:Type ListViewItem}">
<Style.Triggers>

    <Trigger Property="IsSelected" Value="True">
        <Setter Property="Background" Value="{Binding Source={DynamicResource ListViewItemLook}, Path=Background}"/>
    </Trigger>

</Style.Triggers>

</Style> 
```

但我得到一个例外，我尝试改变：

```
<Setter Property="Background" Value="{Binding Path=Background}"/> 
```

并添加到样式：

```
<Setter Property="DataContext" Value="{DynamicResource ListViewItemLook}"/> 
```

但是是行不通的。我无法绑定到 StaticResource，因为我需要设置 BackGround 属性运行时。

我该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:10:46.410

如果您希望 local:Look 和 setter 都引用相同的颜色，请执行一个小的重构：

将颜色拉出到单独的 SolidColorBrush 中并让两个项目都引用它：

```
<SolidColorBrush x:Key="SelectedListViewItemBackground" Color="Magenta" />
<local:Look x:Key="whatever" Background="{StaticResource SelectedListViewItemBackground}" />
<Setter Property="Background" Value="{StaticResource SelectedListViewItemBackground}" /> 
```

如果您尝试做其他事情，我无法弄清楚它是什么，因为这个问题没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:57:46.097

据我所知，DynamicResource 扩展使用 DependencyProperty 机制（很像绑定）。因此，您不能使用 DynamicResource 设置 Binding 对象的 Source 属性，因为它不是 DependencyProperty。

另外，如果你想改变 Look 的 Background 属性而不是资源中的 Look 本身；那么将 Look 设置为绑定属性的静态资源应该不是问题。当然 Look 类的 Background 属性应该触发 PropertyChanged 事件或者是 DependencyProperty 本身。

# iphone - 每次创建 CC3MeshNode 时如何不导入新的 POD 文件？

> ID：12680239
> 
> 赞同：1
> 
> 时间：2012-10-01T20:04:12.000
> 
> 标签：iphone, objective-c, cocos2d-iphone, cocos3d

在 cocos3d 中，我想复制一个来自 .POD 文件（earth.pod）的旋转地球的 CC3MeshNode。这就是我制作 1 的方式：

```
[self addContentFromPODFile: @"earth.pod"];

CC3MeshNode* earth = (CC3MeshNode*)[self getNodeNamed: @"Sphere"];
[earth setRotation:cc3v(0.0, 0.0, 0.0)];
CCActionInterval* rotate = [CC3RotateBy actionWithDuration: 1.0
                                                       rotateBy: cc3v(0.0, 30.0, 5.0)];
[earth runAction: [CCRepeatForever actionWithAction: rotate]];
earth.location = cc3v(0, 0, 0); 
```

现在我想创建第二个地球：

```
CC3MeshNode* earth2 = (CC3MeshNode*)[self getNodeNamed: @"Sphere"];
[earth2 setRotation:cc3v(0.0, 0.0, 0.0)];
CCActionInterval* rotate2 = [CC3RotateBy actionWithDuration: 1.0
                                                       rotateBy: cc3v(0.0, 30.0, 5.0)];
[earth runAction: [CCRepeatForever actionWithAction: rotate2]];
earth2.location = cc3v(5, 0, 0); 
```

但这摆脱了原来的。如何从可以复制的 POD 文件创建 CC3MeshNode？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:58:01.827

您应该能够执行以下操作：

```
CC3PODResourceNode *resourceNode = [CC3PODResourceNode nodeFromFile: @"earth.pod"];
CC3MeshNode *meshNode1 = [resourceNode getMeshNodeNamed: @"Sphere"];
CC3MeshNode *meshNode2 = [meshNode1 copyWithName: @"Sphere2"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T12:42:34.267

CC3MeshNode* earth2 = [(CC3MeshNode*)[self getNodeNamed:@"Sphere"] copyAutoreleased];

# jquery - JQuery Animate Jumpy 仅在 Safari 中

> ID：12680241
> 
> 赞同：5
> 
> 时间：2012-10-01T20:04:35.953
> 
> 标签：jquery, safari, jquery-animate, css-float

我正在处理一个想要隐藏左侧导航栏的页面。我只遇到了 Safari 的问题，Chrome、FF、Opera、IE7+ 没有问题。

当 Safari 中的滑动动画即将完成时，您会看到一些内容短暂地跳转到其原始位置然后消失。我已经研究了一段时间没有太多运气。似乎大多数时候它是填充或边距，但它们设置为零，我尝试了两次 CSS 重置。在我看来，这似乎与花车有关。我尝试与 Clear 一起玩，但没有运气。

[这是一个演示](http://jsfiddle.net/eLvBr/6/)

以及相关的动画：

```
$('#btnHide').click(function() {
    $("#divNavContent").animate({
        width: 'toggle'
    }, 1000, function() {
        $("#divNavHidden").animate({
            width: 'toggle'
        }, 500);
    });

});

$('#btnShowMenu').click(function() {
    $("#divNavHidden").animate({
        width: 'toggle'
    }, 500, function() {
        $("#divNavContent").animate({
            width: 'toggle'
        }, 1000);
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:18:01.873

问题是由于`float: left;`on`#divLeft`但是您可以从中删除浮动`#divLeft`并保持相同的结构。

还要添加`margin-left: 4px;`到，`#content`因为当您移除浮动时，两个 div 会有点挤压。

似乎它更像是 Safari 中的一个错误，而不是你的错。

# objective-c - 表格视图不显示

> ID：12680242
> 
> 赞同：0
> 
> 时间：2012-10-01T20:04:47.173
> 
> 标签：objective-c, ios, json, cocoa-touch

我正在开发这个应用程序，但不知何故，它没有在我的 tableviewcontroller 中返回任何行。这是我的代码：

```
#define kBgQueue dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0)
#define kStudentenURL [NSURL URLWithString:@"http://localhost/api/api.php"] 

#import "MasterViewController.h"

#import "DetailViewController.h"

@interface MasterViewController () {
    NSArray *_studenten; } @end

@implementation MasterViewController

- (void)awakeFromNib {
    [super awakeFromNib]; }

- (void)viewDidLoad {
    [super viewDidLoad];    // Do any additional setup after loading the view, typically from a nib.
    // The hud will dispable all input on the view (use the higest view possible in the view hierarchy)     HUD = [[MBProgressHUD alloc] initWithView:self.navigationController.view];  [self.navigationController.view addSubview:HUD];        // Regiser for HUD callbacks so we can remove it from the window at the right time  HUD.delegate = self;        // Show the HUD while the provided method executes in a new thread  [HUD showWhileExecuting:@selector(getJsonDataFromServer) onTarget:self withObject:nil animated:YES]; }

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated. }

-(void)getJsonDataFromServer {
    dispatch_async(kBgQueue, ^{
        NSData* data = [NSData dataWithContentsOfURL:
                        kStudentenURL];
        [self performSelectorOnMainThread:@selector(fetchedData:)
                               withObject:data waitUntilDone:YES];
    }); }

- (void)fetchedData:(NSData *)responseData {
    NSError* error;
    NSDictionary *json = [NSJSONSerialization
                          JSONObjectWithData:responseData                           
                          options:kNilOptions
                          error:&error];

    _studenten = [json objectForKey:@"studenten"];

    NSLog(@"Studenten: %@", _studenten);
    NSLog(@"%u", _studenten.count); }

#pragma mark - Table View

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1; }

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return _studenten.count; }

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];

    NSDictionary *student = [_studenten objectAtIndex:0];

    NSString *studentNaam = [student objectForKey:@"studentNaam"];
    NSString *studentAchterNaam = [student objectForKey:@"studentAchterNaam"];

    cell.textLabel.text = studentAchterNaam;
    cell.detailTextLabel.text = studentNaam;

    return cell; }

/* // Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath { }
*/

/* // Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath {
    // Return NO if you do not want the item to be re-orderable.
    return YES; }
*/

/*- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([[segue identifier] isEqualToString:@"showDetail"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        NSDate *object = _objects[indexPath.row];
        [[segue destinationViewController] setDetailItem:object];
    } }*/

@end 
```

我知道我的 json 输入正确。s 正在返回我要求的`NSLog`数据，但我似乎无法获得任何行。有人可以帮帮我吗？tnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:13:00.740

简单的答案——一旦你完成了数据数组的加载，你需要调用 [(your tableview) reloadData] ！

大概您现在已经在情节提要上获得了表格视图，并且您已经设置了它的数据源并委托给您的视图控制器。您还需要在您的视图控制器中拥有该 tableview 的属性。您可能有一些看起来像这样的代码。

```
@interface MasterViewController () {
    NSArray *_studenten;
}

@property (weak, nonatomic) IBOutlet UITableView *tableView;

@end

@implementation MasterViewController
- (void)fetchedData:(NSData *)responseData {
    NSError* error;
    NSDictionary *json = [NSJSONSerialization
                      JSONObjectWithData:responseData                           
                      options:kNilOptions
                      error:&error];

    _studenten = [json objectForKey:@"studenten"];

    NSLog(@"Studenten: %@", _studenten);
    NSLog(@"%u", _studenten.count);
    [self.tableView reloadData];
}
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:34:30.300

我的猜测是，您永远不会从`dequeueReusableCell`. 我建议你在尝试重用一个单元格后，检查它是否为 nil，如果是，则需要分配一个新单元格。我已将代码添加到您的函数中。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];
    if(!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"Cell"];
    }

    NSDictionary *student = [_studenten objectAtIndex:0];

    NSString *studentNaam = [student objectForKey:@"studentNaam"];
    NSString *studentAchterNaam = [student objectForKey:@"studentAchterNaam"];

    cell.textLabel.text = studentAchterNaam;
    cell.detailTextLabel.text = studentNaam;

    return cell; } 
```

# android - 在 ICS 中启动完成

> ID：12680243
> 
> 赞同：-1
> 
> 时间：2012-10-01T20:04:48.130
> 
> 标签：android, broadcastreceiver

我有一个在 ICS 中启动服务的广播接收器。我没有与代码相关的活动。我面临的问题是我无法在接收器中接收到 BOOT COMPLETED 广播。是否有解决方案。在 ICS 中接收引导完成意图。我读到 [http://commonsware.com/blog/2011/07/13/boot-completed-regression-confirmed.html](http://commonsware.com/blog/2011/07/13/boot-completed-regression-confirmed.html)

但灵魂是什么。任何人都可以在这方面提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:57:29.773

`enter code here`

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="11" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.INSTALL_PACKAGES"/>
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.Translucent.NoTitleBar">
    <receiver
         android:permission="android.permission.RECEIVE_BOOT_COMPLETED"
         android:name=".BootComp"
         android:exported="true"
         android:enabled="true">

        <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
        <category android:name="android.intent.category.LAUNCHER" />

        </intent-filter>
  </receiver>

    <service android:name="CheckForUpdateService"></service>
    <activity android:name="Upgrade_choice"></activity>
</application> 
```

这是我的清单文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:28:11.237

这是我在接收器中接收启动完成的方法。我在系统启动完成时启动一项服务。

if(("android.intent.action.BOOT_COMPLETED").equals(intent.getAction())) {

```
 Log.d(tag,"Received the BOOT COMPLETE intent");
    Intent i=new Intent();

    i.setAction("com.example.bootcompletecheck.CheckForUpdateService");

    ctx.startService(i);
    }
    else
    {
        Log.d(tag,"----Not received----");
    }
} 
```

}

# jquery - jQuery maskedinput 和表单重置

> ID：12680246
> 
> 赞同：0
> 
> 时间：2012-10-01T20:04:55.630
> 
> 标签：jquery, maskedinput

我在 ZipCode 和 Phone Number 字段的典型地址输入表单上使用Josh Bush 的 Masked Input 插件（ [Masked Input ）。](http://digitalbush.com/projects/masked-input-plugin/#license)

当我在表单中显示记录并在相关字段上设置输入掩码时，表单最初显示格式化的 zip (99999-9999) 和电话号码 (999)999-9999。

但是，当我发出表单重置时，输入掩码格式消失了，我留下了 zip 和电话的原始字段值 999999999 和 9999999999。

这些字段在获得焦点时会正确格式化，但我希望它们在重置后立即正确格式化。

知道如何让它与通用解决方案一起使用，而无需在表单上的所有字段中循环关注吗？

我考虑将“data-inputmask”属性添加到适当的字段并调用一个通用函数，该函数使用该属性在表单加载时建立输入掩码，但这个示例是我实际维护和访问的代码的简化在项目中使用 inputmask 是不可行的。

这是表单和脚本的简化版本：

```
<form action="/User/UpdateAddress" id="AddEditAddress" method="post" novalidate="novalidate">
    <input id="AddressId" name="AddressId" type="hidden" value="A5A715C7-C5DD-4793-A3D8-CE101F83224B" />
    <label for="FirstName" title="First Name">First Name</label>
    <input id="FirstName" name="FirstName" type="text" value="John" />
    <label for="LastName" title="Last Name">Last Name</label>
    <input id="LastName" name="LastName" type="text" value="Doe" />
    <label for="Address1" title="Address 1">Address 1</label>
    <input id="Address1" name="Address1" type="text" value="123 Main St" />
    <label for="Address2" title="Address 2">Address 2</label>
    <input id="Address2" name="Address2" type="text" value="Apartment 123" />
    <label for="City" title="City">City</label>
    <input id="City" name="City" type="text" value="Anytown" />
    <label for="State" title="State">State</label>
    <input id="State" name="State" type="text" value="PA" />
    <label for="ZipCode" title="Zip Code">Zip Code</label>
    <input id="ZipCode" name="ZipCode" type="text" value="191234567" />
    <label for="Phone" title="Phone">Phone</label>
    <input id="Phone" name="Phone" type="text" value="2155551234" />        
</form>
<button id="FormReset">Reset</button>
<button id="FormSubmit">Submit</button>
<script type="text/javascript">
    $("input#ZipCode").inputmask("99999-9999");
    $("input#Phone").inputmask("(999)999-9999");
    $("button#FormReset").on("click", function(){
        $("form#AddEditAddress")[0].reset();
    });
    $("button#FormSubmit").on("click", function(){
        $("form#AddEditAddress")[0].submit();
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:11:55.270

为什么不尝试在单击重置按钮后立即重新分配输入掩码..

```
$("button#FormReset").on("click", function(){
        $("form#AddEditAddress")[0].reset();
        $("input#ZipCode").unmask().inputmask("99999-9999");
        $("input#Phone").unmask().inputmask("(999)999-9999");
}); 
```

# java - UpdateTimestampsCache 未出现在 Terracotta 开发控制台中

> ID：12680247
> 
> 赞同：0
> 
> 时间：2012-10-01T20:04:56.210
> 
> 标签：java, hibernate, ehcache, terracotta

我已经为休眠二级缓存配置了 ehcache 以使用 Terracotta 服务器。一切正常，除了查询缓存的 UpdateTimestampsCache 没有显示在开发控制台中。我们使用的是 Hibernate 3.6.10 和 ehcache 2.6.0。

我看到所有实体、集合、查询和 StandardQueryCache，但没有看到 org.hibernate.cache.UpdateTimestampsCache。我知道时间戳缓存存在并且正在使用，因为我可以使用检测到的指标库查看其上的统计信息。

有任何想法吗？谢谢！

这是我的 ehcache.xml 配置

```
<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="http://ehcache.org/ehcache.xsd"
    updateCheck="false" 
    name="Hibernate-CacheManager"
    monitoring="autodetect"
    dynamicConfig="true">    

<terracottaConfig url="localhost:9510" />

<defaultCache
    eternal="false"
    overflowToDisk="false"
    maxElementsInMemory="50000"
    timeToIdleSeconds="7200"
    timeToLiveSeconds="0">

    <cacheDecoratorFactory 
        class="com.yammer.metrics.ehcache.InstrumentedEhcacheFactory" />

    <terracotta/>
</defaultCache>

<cache
    name="org.hibernate.cache.UpdateTimestampsCache"
    eternal="false"
    overflowToDisk="false"
    maxElementsInMemory="500"
    timeToIdleSeconds="7200"
    timeToLiveSeconds="0">

    <cacheDecoratorFactory 
        class="com.yammer.metrics.ehcache.InstrumentedEhcacheFactory" />

    <terracotta/>

</cache>

<cache
    name="org.hibernate.cache.StandardQueryCache"
    eternal="false"
    overflowToDisk="false"
    maxElementsInMemory="50000"
    timeToIdleSeconds="7200"
    timeToLiveSeconds="0">

    <cacheDecoratorFactory 
        class="com.yammer.metrics.ehcache.InstrumentedEhcacheFactory" />

    <terracotta/>

</cache>
</ehcache> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:08:39.947

重新复制答案：[http ://forums.terracotta.org/forums/posts/list/0/7554.page#36815](http://forums.terracotta.org/forums/posts/list/0/7554.page#36815)

Hibernate 不维护直到 Hibernate 4.0.0 的 UpdateTimestampsCache 缓存的统计信息。这解释了为什么缓存没有出现在 terracotta 开发控制台中。

这被归档为错误[https://hibernate.onjira.com/browse/HHH-5326](https://hibernate.onjira.com/browse/HHH-5326)

# android - Android NonUI Thread 使应用程序“无响应”

> ID：12680249
> 
> 赞同：0
> 
> 时间：2012-10-01T20:05:03.807
> 
> 标签：android, service, ui-thread, background-thread, serviceconnection

我正在编辑一个在服务中进行 GPS 调用的 android 应用程序的代码。位置监听器。它还使用`ServiceConnection`

在某些视图中，设备认为我的应用程序响应时间过长，并且用户可以“强制关闭”或“等待”。在此弹出窗口出现之前，用户仍然可以使用该应用程序，他们可以滚动、滑动、按下按钮等。

我只是假设这与 GPS 服务有关，因为它在发生此问题时正在运行。

我听说这个问题与 UIthread 上运行的线程有关，而不是后台线程。但我确信服务在后台线程中异步运行。

洞察力赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:12:57.753

使用服务不一定会产生新线程，服务调用在其调用者线程上运行。来自 android API 服务文档：“请注意，服务与其他应用程序对象一样，在其托管进程的主线程中运行......”。

您可以指定服务在不同的进程上运行，但最佳做法是在服务中生成一个新线程。

有关 android 服务的更多信息，请访问：http: [//developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:26:41.403

我完全建议您扩展 AsyncTask，它可以正确和轻松地使用 UI 线程。允许您在 UI 线程上执行后台操作并发布结果，而无需操作线程和/或处理程序。您可能希望在 doInBackground 方法中进行所有计算。顺便说一句，**强制关闭或等待**是此类问题的经典行为。祝你好运！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T20:27:09.637

服务中的处理仍然会导致您的应用程序挂起。

您应该考虑实施的解决方案是在单独的线程中运行任何可能使您的活动陷入困境的逻辑。这包括：数据库更新/插入、网络通信和任何其他长时间运行的代码。

AsyncTask 是一种方便的方法，因为您可以在 onPreExecute 和 onPostExecute 函数中操作 UI。

您可以将 AsyncTask 作为子类直接在您的服务中实现。

希望这有帮助！干杯

# google-chrome - aceshop/joomla 上的 google chrome 和 css 的 ssl 问题

> ID：12680254
> 
> 赞同：1
> 
> 时间：2012-10-01T20:05:14.963
> 
> 标签：google-chrome, ssl, joomla, https, aceshop

我有一个已安装 aceshop 的 joomla 安装。我还为结帐页面设置了 SSL，因为这是我想要或需要为 ssl 保护的唯一区域。

我遇到的问题是谷歌浏览器。因为结帐页面在 SSL 中，而 css/js 引用不是，所以 Chrome 正在阻止 css。您必须覆盖页面的安全设置才能正确显示它。

有谁知道如何解决这个问题？我不希望网站的其余部分在 sll 下，只是结帐页面。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:03:19.567

您还需要通过 SSL 为您的 CSS/JS 提供服务。如果您不这样做，那么您是否通过 SSL 提供该页面并不重要。在这种情况下，中间人攻击者可以添加任意 JavaScript，该 JavaScript 将在结帐页面的上下文中执行，它可以窃取用户键入的所有信息（姓名、地址、抄送等）。

如果你想让你的网站安全，就需要修复所有混合模式的内容问题，否则就等于没有安全感。

# oauth - 如何从 OAuthWebSecurity 获取 ExtraData？

> ID：12680257
> 
> 赞同：1
> 
> 时间：2012-10-01T20:05:28.357
> 
> 标签：oauth, security

(MVC 4)

AuthConfig.cs 定义；

```
OAuthWebSecurity.RegisterFacebookClient(
  appId: "21703538509...",
  appSecret: "28cbbc965e8ff6c9dc57cac9e323..."
); 
```

`ExternalLoginCallback`函数中， `OAuthWebSecurity.VerifyAuthentication`返回的结果是（名称，链接，性别）。但是，我需要电子邮件地址。如何从 Facebook 获取电子邮件地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T22:48:09.917

要获得电子邮件访问权限，您需要编写自定义 Facebook 提供商。

下载`DotNetOpenAuth.AspNet.Clients.FacebookClient`并添加`{ "scope", "email, read_stream" }`，

```
public sealed class CustomFacebookClient : OAuth2Client
{
    #region Constants and Fields

    /// <summary>
    /// The authorization endpoint.
    /// </summary>
    private const string AuthorizationEndpoint = "https://www.facebook.com/dialog/oauth";

    /// <summary>
    /// The token endpoint.
    /// </summary>
    private const string TokenEndpoint = "https://graph.facebook.com/oauth/access_token";

    /// <summary>
    /// The _app id.
    /// </summary>
    private readonly string appId;

    /// <summary>
    /// The _app secret.
    /// </summary>
    private readonly string appSecret;

    #endregion

    #region Constructors and Destructors

    /// <summary>
    /// Initializes a new instance of the <see cref="FacebookClient"/> class.
    /// </summary>
    /// <param name="appId">
    /// The app id.
    /// </param>
    /// <param name="appSecret">
    /// The app secret.
    /// </param>
    public CustomFacebookClient(string appId, string appSecret)
        : base("facebook")
    {
        Requires.NotNullOrEmpty(appId, "appId");
        Requires.NotNullOrEmpty(appSecret, "appSecret");

        this.appId = appId;
        this.appSecret = appSecret;
    }

    #endregion

    #region Methods

    /// <summary>
    /// The get service login url.
    /// </summary>
    /// <param name="returnUrl">
    /// The return url.
    /// </param>
    /// <returns>An absolute URI.</returns>
    protected override Uri GetServiceLoginUrl(Uri returnUrl)
    {
        // Note: Facebook doesn't like us to url-encode the redirect_uri value
        var builder = new UriBuilder(AuthorizationEndpoint);
        builder.AppendQueryArgs(
            new Dictionary<string, string> {
                { "client_id", this.appId },
                { "scope", "email, read_stream" },
                { "redirect_uri", returnUrl.AbsoluteUri }
            });
        return builder.Uri;
    }

    /// <summary>
    /// The get user data.
    /// </summary>
    /// <param name="accessToken">
    /// The access token.
    /// </param>
    /// <returns>A dictionary of profile data.</returns>
    protected override IDictionary<string, string> GetUserData(string accessToken)
    {
        FacebookGraphData graphData;
        var request =
            WebRequest.Create(
                "https://graph.facebook.com/me?access_token=" + FacebookClientHelper.EscapeUriDataStringRfc3986(accessToken));
        using (var response = request.GetResponse())
        {
            using (var responseStream = response.GetResponseStream())
            {

                graphData = FacebookClientHelper.Deserialize<FacebookGraphData>(responseStream);
            }
        }

        // this dictionary must contains 
        var userData = new Dictionary<string, string>();
        userData.AddItemIfNotEmpty("id", graphData.Id);
        userData.AddItemIfNotEmpty("username", graphData.Email);
        userData.AddItemIfNotEmpty("name", graphData.Name);
        userData.AddItemIfNotEmpty("link", graphData.Link == null ? null : graphData.Link.AbsoluteUri);
        userData.AddItemIfNotEmpty("gender", graphData.Gender);
        userData.AddItemIfNotEmpty("birthday", graphData.Birthday);
        userData.AddItemIfNotEmpty("email", graphData.Email);
        return userData;
    }

    /// <summary>
    /// Obtains an access token given an authorization code and callback URL.
    /// </summary>
    /// <param name="returnUrl">
    /// The return url.
    /// </param>
    /// <param name="authorizationCode">
    /// The authorization code.
    /// </param>
    /// <returns>
    /// The access token.
    /// </returns>
    protected override string QueryAccessToken(Uri returnUrl, string authorizationCode)
    {
        // Note: Facebook doesn't like us to url-encode the redirect_uri value
        var builder = new UriBuilder(TokenEndpoint);
        builder.AppendQueryArgs(
            new Dictionary<string, string> {
                { "client_id", this.appId },
                { "redirect_uri", NormalizeHexEncoding(returnUrl.AbsoluteUri) },
                { "client_secret", this.appSecret },
                { "code", authorizationCode },
            });

        using (WebClient client = new WebClient())
        {
            string data = client.DownloadString(builder.Uri);
            if (string.IsNullOrEmpty(data))
            {
                return null;
            }

            var parsedQueryString = HttpUtility.ParseQueryString(data);
            return parsedQueryString["access_token"];
        }
    }

    /// <summary>
    /// Converts any % encoded values in the URL to uppercase.
    /// </summary>
    /// <param name="url">The URL string to normalize</param>
    /// <returns>The normalized url</returns>
    /// <example>NormalizeHexEncoding("Login.aspx?ReturnUrl=%2fAccount%2fManage.aspx") returns "Login.aspx?ReturnUrl=%2FAccount%2FManage.aspx"</example>
    /// <remarks>
    /// There is an issue in Facebook whereby it will rejects the redirect_uri value if
    /// the url contains lowercase % encoded values.
    /// </remarks>
    private static string NormalizeHexEncoding(string url)
    {
        var chars = url.ToCharArray();
        for (int i = 0; i < chars.Length - 2; i++)
        {
            if (chars[i] == '%')
            {
                chars[i + 1] = char.ToUpperInvariant(chars[i + 1]);
                chars[i + 2] = char.ToUpperInvariant(chars[i + 2]);
                i += 2;
            }
        }
        return new string(chars);
    }

    #endregion

} 
```

此外，人们可能会认为这可行：

```
var parameters = new Dictionary<string, object>();
parameters["scope"] = "email";

OAuthWebSecurity.RegisterFacebookClient(appId:  "appId", appSecret: "appSecret",
"facebook, parameters); 
```

这行不通。它为您的提供者提供了额外的数据，当您在视图中展示您的提供者时可以使用这些数据。

```
<img src="@provder.ExtraData["icon"]"/> 
```

# java - Java：以特定格式读取字符串

> ID：12680264
> 
> 赞同：0
> 
> 时间：2012-10-01T20:05:48.027
> 
> 标签：java, regex

我没有发布任何令我印象深刻的代码。我正在Java中尝试这个：

问题：

我有这样的话：

```
,xxxx-1223
yyyyy,xxdd-345
$,xxxxr-7
sdsdsdd-18 
```

所以无论我有什么格式，我都应该能够阅读最后一个：

```
xxxx-1223
xxdd-345
xxxxr-7
sdsdsdd-18 
```

单词可能是什么，我只需要得到如图所示的单词。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T20:07:37.817

用于[`String#lastIndexOf(int)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#lastIndexOf%28int%29)查找最后一个逗号出现的位置，并用于[`String#substring(int)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring%28int%29)获取后面的其余字符串。

```
String input = /* whatever */;
int lastComma = input.lastIndexOf(',');
String output = input.substring(lastComma + 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:23:52.123

```
String[] str=yourWord.split(",");
String output=str[str.length-1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T20:07:35.820

您可以使用此正则表达式：-

```
(\\w+-\\d+)$ 
```

[或者可以使用String.split()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)或[String.substring(int)](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring%28int%29)方法简单地解决这个特定问题

# ios - 使用 iOS 核心位置管理器时的模拟位置

> ID：12680265
> 
> 赞同：0
> 
> 时间：2012-10-01T20:05:50.453
> 
> 标签：ios, core-location

使用核心位置管理器时是否可以像在 Android 中那样模拟位置？我想这样做，以便我们可以看到用户在不同位置时的模拟行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:21:07.030

如果您至少使用 Xcode 4.2 和 iOS SDK 5+，您可以启动您的应用程序并在模拟器中单击`debug`菜单，然后单击`location`选项，单击`custom location`。然后，您可以输入自定义纬度和经度。他们还提供 Freeway Drive、City Bicycle Ride 和 City Run 等选项，这些都可以模拟设备的移动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T21:46:52.573

如果您从 Xcode 运行，您绝对可以在设备上模拟位置。应用程序编译、安装并开始运行后，在窗口底部（或控制台上方，如果有显示）找到“调试栏”。有一个小的“位置”图标显示位置菜单，如果您想要更复杂的东西，还可以选择加载 GPX 文件。您还可以编辑您的构建方案以在运行阶段包含一个默认位置（即，对于每次运行，而不仅仅是在您使用调试栏中的菜单设置位置时）。

需要注意的一点是，如果您使用的是个人设备而不是专用的开发设备：即使您从 Xcode 断开连接后，Xcode 设置的自定义位置仍然存在。因此，如果您将手机留在办公桌上，您可能会发现它仍然认为它在您模拟的任何位置；重启将清除此设置，并允许您正常使用您的设备。

# javascript - 判断一个方法是同步的还是异步的

> ID：12680270
> 
> 赞同：20
> 
> 时间：2012-10-01T20:06:22.200
> 
> 标签：javascript, node.js

在 node.js 中，是否可以确定（使用函数）方法是同步的还是异步的？

我想编写一个执行以下操作的函数：

```
function isSynchonous(methodName) {
    //if the method is synchronous, return true. Otherwise, return false.
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-08-19T16:59:24.627

从语言的角度来看，这是不可能的，我相信 llambda 的回答证明了这一点。

*   函数可以异步做事但同步返回一些东西；比如说，返回被触发的异步任务的数量。
*   函数可以同步返回代表异步信息的承诺。我会称这种方法为异步的，但语言无法真正说明这一点。
*   在某种反常的意义上，每个异步函数都会“返回”一些东西……`undefined`如果没有别的。

从工程的角度来看：

*   阅读文档。
*   如果函数接受回调，它很可能是异步的。查看函数签名。
*   阅读代码。
*   使用“常识”。如果函数执行 IO 并从 IO 返回结果，则在某些情况下，它必须是异步的。这包括文件读取、从标准输入读取、保存到数据库和 HTTP/AJAX 请求。注意流通常用于此，它表示异步任务，但回调是特殊的。

此外，还有*将*两者混合的功能。

```
function(callback) {
    if(ready) {
        callback();
    }
    else {
        setTimeout(callback, 5000);
    }
} 
```

可以说这是非常邪恶的，正确的做法是

```
if(ready) {
    process.nextTick(callback);
} 
```

所以该函数具有统一的行为。

**但是，至少在 Node.js 中，有一种方法可以判断是否发生了任何异步*事件***。请参阅[此讨论](https://stackoverflow.com/questions/17960452/how-can-i-get-a-list-of-callbacks-in-the-node-work-queue-or-why-wont-node-ex)。

```
// untested!! please read the documentation on these functions before using yourself
var work = process._getActiveHandles().length + process._getActiveCallbacks().length;
foo;
var newWork = (process._getActiveHandles().length + process._getActiveCallbacks().length) - work;
if(newWork > 0) {
    console.log("asynchronous work took place.");
} 
```

这是可行的，因为根据定义，异步工作不能在同一个滴答上解决，并且因为 Node.js 是单线程的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-19T16:54:24.527

你不一定知道。一个函数甚至可以是随机同步或异步的。

例如，一个接受另一个函数的函数可以立即执行该函数，或者它可以使用 setImmediate 或 nextTick 安排在以后执行它。该函数甚至可以随机选择同步或异步调用其传递的函数，例如：

```
console.log('Start')

function maybeSynchOrAsync(fun) {

  var rand = Math.floor((Math.random() * 2))

  if (rand == 0) {
    console.log('Executing passed function synchronously')
    fun()
    console.log('Done.')
  } else {
    console.log('Executing passed function asynchronously via setImmediate')
    setImmediate(fun)
    console.log('Done.')
  }
}

maybeSynchOrAsync(function () { console.log('The passed function has executed.') }); 
```

此外，从技术上讲，每个函数调用都是同步的。如果您调用函数*F*，并且*F*将回调函数排队等待稍后调用（使用 setTimeout 或任何机制），则原始函数*F*仍然具有同步返回值（无论它是未定义的、承诺的、thunk 还是其他）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-01T20:08:59.047

不，那是不可能的。这些方法不仅标记为同步或异步，它们要么使用回调，要么不使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-11-17T21:03:24.070

为什么你需要知道，是真正的问题。

话说回来; 这可以通过新的 JS 抽象来实现。如今，对于由前面的关键字明确定义的异步函数，`async`您可以执行如下测试；

```
async function test(){}
var type = Object.getPrototypeOf(test).constructor.name;
console.log(type); // <- 'AsyncFunction' 
```

凉爽的..！

至于那些碰巧返回一个promise的普通函数，我们必须记住它只是一个同步函数立即同步返回一个promise对象。这意味着您必须在调用函数之前动态检查函数是否提前返回承诺。我认为这将带您进入类型级别的编程冒险，这种冒险存在于 Haskell 等复杂语言中。

# c# - 值类型和原始类型有什么区别？

> ID：12680272
> 
> 赞同：15
> 
> 时间：2012-10-01T20:06:30.863
> 
> 标签：c#, language-agnostic, primitive-types

阅读一本关于 C# 的书，我注意到有时会提到值类型，有时会提到某些数据类型（例如 int、double）的原始类型。我以为它们是一样的，但它们真的一样还是不一样？

值类型和原始类型有什么区别？它们是一样的吗？

**编辑**

这个问题不仅与 C# 编程语言有关，我想知道即使在任何其他语言中它们有什么不同。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T20:12:18.463

原始类型（例如`int`）可以直接映射到基类库（BCL）类型（例如`System.Int32`）

值类型继承自值`System.ValueType`并按值传递（以及其他属性）。

它们不可互换，因为`object`( `System.Object`) 是原始类型但不是值类型，结构是值类型但不是原始类型。

[在此处](http://www.codeproject.com/Articles/11212/Primitive-Reference-and-Value-Types)查看更多差异

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-01T20:10:20.397

值类型*通常*是驻留在 Stack 上的任何类型。

原始类型是在编程语言级别定义的类型，通常甚至是值类型，由语言的编译器直接支持。

然而，这是一个总结性的一般答案，因为每种编程语言在两种类型之间都有不同的差异集......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-01T20:10:10.577

不，他们不是。复制值类型，同时引用引用类型。看图片![价值与参考](../Images/0468ea9dfd4e42cae86d0e43d995830d.png)

**编辑** 我的错误。这是差异的教程：http: [//www.codeproject.com/Articles/11212/Primitive-Reference-and-Value-Types](http://www.codeproject.com/Articles/11212/Primitive-Reference-and-Value-Types)

# java - Java - 具有返回值的异步方法

> ID：12680273
> 
> 赞同：0
> 
> 时间：2012-10-01T20:06:45.447
> 
> 标签：java, asynchronous, casting

我有一个关于java中异步方法调用的问题，特别是关于异步方法的响应值。

情况如下：

我要调用的异步方法是..

```
public void getSpeed(IResponseListener listener) {
....
} 
```

监听器的界面是...

```
interface IResponseListener {
    public void response(ResponseEvent event);
} 
```

当异步方法有响应值时调用此方法

我现在的问题是该类`ResponseEvent`具有`response`可以是任何类型的属性（`boolean,float,String...)`并且在接口的实现中`IResponseListener`我必须强制转换值......

```
IResponseListener listener = new IResponseListener {

    public void response(ResponseEvent event) {
        float f = (float)event.response;
    }
} 
```

这是处理这个问题的好方法吗？我认为不好的是响应侦听器必须知道响应的类型！是否有更好的解决方案来处理想要给出响应的异步调用，即使响应可以是任何类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:49:40.190

我认为很多这些答案开始看起来像这样->

```
public interface Function<Args, Value>
{
  public Value call(Args args);
} 
```

你的返回类型无关紧要——如果它可以返回多种类型，那么“多种类型”就是一种类型……考虑到你在看什么，我可以建议一种 JSON 类型吗？

现实情况是您不能期望您的处理程序提前知道类型，因此您需要指定它。无论是返回类型还是类都取决于您。

我可以很容易地看到做一个类层次结构：

```
public class ResponseString implements Function<Args, String>; 
public class ResponseNumber implements Function<Args, Number>;
...
public class ResponseType implements Function<Args, Type>; 
```

或者只是创建一个包含您需要的所有信息的类型。总而言之，该方法可以定义它对类型的期望，并且您可以扩展它们。请记住，响应也可以是可以执行的功能。知道如何处理某事但不知道它是什么并没有错 ->

示例->

```
//Admittedly I'd probably have a "Procedure or VoidFunction interface as well".
public yourMethod(Function<String args, Function<String,?> handler)
{
  String hello = "hello";
  Function<String,?> function = handler.call(hello);
  function.call(hello); 
} 
```

我希望这有帮助。有时没有理由走这么远，有时有。您不知道类型 - 似乎您希望其他人会提供它，这可以在保持严格的同时为您做到这一点。

编辑：在一个框架中有这个的例子是：

```
 Applcation.openDialog(Dialog dialog, Callable<Boolean> onClose); 
```

这将返回 true 的对话框清理并关闭，否则返回 false。我真的不在乎这里发生了什么，我确实在乎它告诉我是，关闭它，或者不。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:11:52.387

使用 Java 泛型：

```
interface IResponseListener<T> {
    public void response(T response);
} 
```

然后，在一个匿名类中：

```
IResponseListener listener = new IResponseListener<Float> {

    public void response(Float response) {
        float f = response;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T20:17:37.733

我不知道这是否正确，但是如果您要以不同的方式处理返回值，为什么不使用您期望的不同类型的对象重载响应方法。只是一个建议。。

```
interface InterfaceName{
    void response(float responseVal);
    void response(boolean responseVal);
    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T20:40:47.753

我会按照@nico_ekito 所说的那样做......或者使用您现有的解决方案。您不知道结果类型是一个问题。

无论如何，您可以进行一些调整，让 ResponseEvent 类为您进行转换。

**响应监听器.java**

```
interface IResponseListener {
    void response(ResponseEvent event);
} 
```

**响应事件.java**

```
public class ResponseEvent {

   private Object response;

   @SuppressWarnings("unchecked")
   public <T> T getResponse() {
       return (T)response;
   }

   public <T> void setResponse(T response) {
       this.response = response;
   }
} 
```

**用法：**

```
IResponseListener listener = new IResponseListener() {
    public void response(ResponseEvent event) {
        float f = event.getResponse();
    } 
}; 
```

请注意，`ClassCastException`如果您的类型与您期望的不同，您将得到一个。

# linux - KSH：包含双引号的变量

> ID：12680278
> 
> 赞同：1
> 
> 时间：2012-10-01T20:06:56.353
> 
> 标签：linux, string, shell, echo, ksh

我有一个名为 STRING1 的字符串，其中可能包含双引号。

我通过 sed 回显字符串以提取标点符号，然后发送到数组以计算某些单词。问题是我无法通过双引号将变量回显到 sed。

我正在爬取我们的文件系统，寻找使用 FTP 命令的文件。我为“FTP” grep 每个文件

```
STRING1=`grep -i ftp $filename` 
```

如果你 echo $STRING1 这是输出（只是一个例子）

```
myserver> echo "Your file `basename $1` is too large to e-mail. You must ftp the file to BMC tech support. \c"
    echo "Then, ftp it to ftp.bmc.com with the user name 'anonymous.' \c"
    echo "When the ftp is successful, notify technical support by phone (800-537-1813) or by e-mail (support@bmc.com.)" 
```

然后我有这个代码

```
STRING2=`echo $STRING1|sed 's/[^a-zA-Z0-9]/ /g'` 
```

我试过双引号 $STRING1 像

```
STRING2=`echo "$STRING1"|sed 's/[^a-zA-Z0-9]/ /g'` 
```

但这不起作用。Single Qoutes，只是将 $STRING1 作为字符串发送到 sed ......所以这不起作用。

我还能在这里做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:13:52.180

问题在于你如何`STRING1`开始。如果我正确理解您要执行的操作，则需要编写：

```
STRING1="Your file `basename $1` is too large to e-mail. You must ftp the file to BMC tech support. \c
Then, ftp it to ftp.bmc.com with the user name 'anonymous.' \c
When the ftp is successful, notify technical support by phone (800-537-1813) or by e-mail (support@bmc.com.)" 
```

然后你可以写：

```
STRING2=`echo "$STRING1"|sed 's/[^a-zA-Z0-9]/ /g'` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:08:24.993

为我工作：

```
/home/user1> S1='"double         quotes"'
/home/user1> echo "$S1"
"double         quotes"

/home/user1> S2=`echo "$S1"|sed 's/[^a-zA-Z0-9]/ /g'` 
/home/user1> echo "$S2"
 double         quotes 
```

# windows-mobile - 摩托罗拉手持终端 MC75A 没有响应

> ID：12680280
> 
> 赞同：0
> 
> 时间：2012-10-01T20:07:00.550
> 
> 标签：windows-mobile, barcode, barcode-scanner, windows-mobile-6, motorola-emdk

我正在使用摩托罗拉 MC75A 开发一些项目。但我有一些问题。我将条形码控件添加到页面和 EnableScanner 属性 = false。

当我更改条形码的属性 EnableScanner=True 并运行项目时，应用程序没有响应。

因此我将 EnableScanner=True 更改为 False。

我决定在代码隐藏上更改此属性。在 Page_Activated 事件中 EnableScanner=True，在 Page_Deactivate EnableScanner=False。

我的应用程序仍然没有在此页面上响应。这里有什么问题 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:13:22.030

这些小设备可能需要一段时间才能激活扫描仪。我们一直开着我们的。

你给设备多长时间来打开扫描仪？

# c# - StartsWith 应该只用于订购吗？

> ID：12680282
> 
> 赞同：11
> 
> 时间：2012-10-01T20:07:09.790
> 
> 标签：c#, string

我正在阅读 Microsoft[在 .NET Framework 中使用字符串的最佳实践](http://msdn.microsoft.com/en-us/library/dd465121.aspx)。

它给出了以下示例作为介绍`StringComparison.OrdinalIgnoreCase`：

```
public static bool IsFileURI(string path) 
{
    return path.StartsWith("FILE:", StringComparison.OrdinalIgnoreCase);
} 
```

到目前为止，一切都很好。但它接着说：

> 但是，前面的示例使用该`String.StartsWith(String, StringComparison)`方法来测试是否相等。**因为比较的目的是测试是否相等而不是对字符串进行排序，所以更好的选择是调用该`Equals`方法，如下例所示。**

```
public static bool IsFileURI(string path)
{
    if (path.Length < 5) return false;

    return String.Equals(path.Substring(0, 5), "FILE:", 
                         StringComparison.OrdinalIgnoreCase);
} 
```

我很难理解为什么第二个版本更好。我可以理解从`CompareTo`（比较）到`Equals`（平等）的转换，但不`StartsWith`也是平等测试吗？我错过了什么还是这是一个文档错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T21:01:12.393

不是一个真正的答案，而是`StartsWith()`一个平等测试，我认为这是一个**文档错误**，但我很想知道性能，所以我使用以下代码做了一个基准测试：

```
class Program {
    static void Main( string[ ] args ) {
        Stopwatch sw = Stopwatch.StartNew( );
        for ( int i = 0; i < 1000000000; i++ ) //1 billion times
            IsFileURI1( "File:\\ThisIsATest" );
        sw.Stop( );
        Console.WriteLine( "String.StartsWith(): " + sw.ElapsedMilliseconds.ToString( ) );

        sw.Restart( );
        for ( int i = 0; i < 1000000000; i++ ) //1 billion times
            IsFileURI2( "File:\\ThisIsATest" );
        sw.Stop( );
        Console.WriteLine( "String.Equals(): " + sw.ElapsedMilliseconds.ToString( ) );
    }

    public static bool IsFileURI1( string path ) {
        return path.StartsWith( "FILE:", StringComparison.OrdinalIgnoreCase );
    }

    public static bool IsFileURI2( string path ) {
        if ( path.Length < 5 ) return false;

        return String.Equals( path.Substring( 0, 5 ), "FILE:", StringComparison.OrdinalIgnoreCase );
    }   
} 
```

结果是（*毫秒*）：

```
String.StartsWith(): 90102 
String.Equals(): 73113 
```

所以就性能而言，第二种解决方案更好，大约**快 20%**。

# c - 查看代码以读取外部 adc 值

> ID：12680283
> 
> 赞同：2
> 
> 时间：2012-10-01T20:07:10.120
> 
> 标签：c, embedded, avr, avr-gcc

我刚开始使用 AVR 微控制器。我正在使用 ATmega32-A 微控制器。我已经连接了一个外部 ADC（AD7798）。我想使用 SPI 通信读取外部 ADC 值。我尝试了很多，但我无法获得 ADC 值。我的项目是我必须使用带有可编程波形发生器的微控制器生成波形。我成功地做到了这一点并将这个信号传递给传感器。我想从 ADC 读取传感器输出。我在下面附上了简单的电路图。我写了这样的代码

```
// I have initialized PORTB like this

PORTB=0x00;
DDRB=0xBF;

// SPI initialisation
// SPI clock rate fck/16
// SPI master
// SPI MSB first
// SPI CPOL = 1, CPHA = 1

SPCR=0x5D;
PORTB.3 = 1; 

void main (void){

 printf("adc value :%x\n",ReadAd());

} 
```

我在另一个文件中写了所有函数

我已经阅读了数百次数据表，但我仍然能够读取 ADC 值。我很困惑我在做什么错误。我检查了每个引脚，并使用示波器检查了 ADC 输入引脚，我得到 0.6V 输入信号。请帮我解决这个问题。Tommarow 是这个项目的最后期限。请任何人帮助我读取ADC值。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:56:23.260

我无法查明问题所在，但我注意到以下几点可能会有所帮助：

*   查看波形发生器芯片对 SDATA 线的作用。当您使用 ADC 时，它必须是高阻抗的，因为它们共享相同的总线 (MOSI)。确保芯片不总是驱动总线，否则您的 ADC 通信将永远无法工作。

*   片选线上没有上拉电阻，这可能会导致 ADC 在 uC 上电时进入异常状态等。您可能希望使用此信息在端口 3 和 4 上启用内部上拉电阻来自 atmega32 数据表（第 50 页）：

> “如果在引脚配置为输入引脚时将 PORTxn 写入逻辑 1，则激活上拉 > 电阻”

*   确保您的 SPI 时钟极性和相位与 ADC 的通信协议匹配，并且 ADC 支持硬件 SPI 的每次 8 位通信

*   您的 ChipSelectAD 函数有一行可能是不必要的，但也许我只是不知道当该位设置为输出时读取引脚的目的

    > "while(PINB.3); //等待片选引脚"

*   您的 ADC 的引脚接线是否正确？该图未显示电源或参考电压连接。

*   可能会减慢您的 SPI SCLK 频率，直到您确定一切正常，尽管看起来 ADC 可以处理相当高的输入时钟速度。

*   确保在 adc 读取发生在 16 位值上时左移...看起来 SPI 读取的 8 位字符结果实际上被移位了 8 次，除非编译器自动向上转换类型，否则将其设为零.

# c++ - 基类有不完整的类型错误

> ID：12680287
> 
> 赞同：11
> 
> 时间：2012-10-01T20:07:27.470
> 
> 标签：c++, oop

> 基类的类型不完整

这个错误到底是什么意思，我该如何解决？我已经尝试通过`class Entity`在我的 EntityPhysics 标头中声明该类，但它不起作用。

这是我的 Entity.h

```
#ifndef __Game__Entity__
#define __Game__Entity__

#include <iostream>
#include <string>

#include "OGRE/Ogre.h"

#include "OgreInit.h"

class Entity{
public:
    Entity(std::string entityId, std::string mesh, Ogre::Vector3 position = Ogre::Vector3::ZERO, Ogre::Vector3 rotation = Ogre::Vector3::ZERO);
    virtual ~Entity() = 0;

    void setPosition(Ogre::Vector3 position);
    Ogre::Vector3 getPosition();
    void setRotation(Ogre::Vector3 rotationIncrease);
    Ogre::Vector3 getRotation();
    void setMesh(std::string meshName);
    std::string getMesh();
    virtual void tick() = 0;
    void removeEntity();

    Ogre::Entity getEntity();
    Ogre::SceneNode getSceneNode();

    std::string entityId;
protected:
    Ogre::Entity *ent;
    Ogre::SceneNode *nod;
};

#endif /* defined(__Game__Entity__) */ 
```

还有我的 EntityPhysics.h

```
#ifndef __Game__EntityPhysics__
#define __Game__EntityPhysics__

#include <iostream>
#include <string>
#include "OGRE/Ogre.h"
#include "OgreBulletCollisionsBoxShape.h"
#include "OgreBulletDynamicsRigidBody.h"

#include "Entity.h"
#include "OgreInit.h"

class EntityPhysics: public Entity //error occurs here: "Base class has incomplete type"
{
public:
    EntityPhysics(std::string pentityId, std::string mesh, Ogre::Vector3 position, Ogre::Vector3 rotation, /*Physics Specific "stuff"*/std::string shapeForm = "BoxShape", float friction = 1.0, float restitution = 0.0, float mass = 1.0);
    virtual ~EntityPhysics() = 0;
    virtual void tick() = 0;
private:
    float friction, restitution, mass;

    OgreBulletCollisions::CollisionShape *collisionShape;
    OgreBulletDynamics::RigidBody *rigidBody;
};

#endif /* defined(__Game__EntityPhysics__) */ 
```

我认为这可能与我有关，包括`Entity.h`在子类中，但如果我这样做，我会得到同样的错误。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T20:10:11.050

这很可能是由于循环包含造成的，解决此问题的方法是删除不需要的包含。

在`Entity.h`你不需要：

```
#include "OGRE/Ogre.h"
#include "OgreInit.h" 
```

您可以并且应该改为前向声明类型。相同的`EntityPhysics.h`和：

```
#include "OGRE/Ogre.h"
#include "OgreBulletCollisionsBoxShape.h"
#include "OgreBulletDynamicsRigidBody.h"

#include "OgreInit.h" 
```

您真正需要的唯一一个是`Entity.h`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T21:39:38.013

我有一个类似的错误消息，我通过将#includes 移到头文件下方来解决，以便其他#includes 所需的类定义和方法定义早于其他头文件包含。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-09T17:39:57.290

当我们想用作基类但它尚未完成时会发生这种情况（基类中有一些错误）。只需检查基于类是否一切正常

# .net - 具有自动增量列的实体框架

> ID：12680291
> 
> 赞同：0
> 
> 时间：2012-10-01T20:07:37.307
> 
> 标签：.net, entity-framework

我已经阅读[了几个](https://stackoverflow.com/questions/8989627/entity-framework-id-auto-incrementing) [关于此的](https://stackoverflow.com/questions/3188194/c-entity-framework-auto-increment-problem)[问题](https://stackoverflow.com/questions/3011764/autonumber-with-entity-framework?lq=1) ，但我尝试了他们的解决方案（每个问题基本相同）但没有成功。

我创建了一个模型并用它来更新本地数据库 (.sdf) 文件。现在，我正在尝试添加一个实体，但它失败了。这意味着它甚至不会保存任何实体。我已经`identity`为我的 PK 设置了字段，配置了`StoredGeneratedPattern`属性，查看了直接在 XML 中手动设置它（它就在那里）。我仍然无法保存任何东西。我错过了什么？

**实体关系模型**

![在此处输入图像描述](../Images/4aa5bd6b647bcb59a043053bbe7bc863.png)

**模型 XML 配置 (TestDbEntities.edmx)**

```
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx Version="2.0" xmlns:edmx="http://schemas.microsoft.com/ado/2008/10/edmx">
  <!-- EF Runtime content -->
  <edmx:Runtime>
    <!-- SSDL content -->
    <edmx:StorageModels>
    <Schema Namespace="TestDbModel.Store" Alias="Self" Provider="System.Data.SqlServerCe.3.5" ProviderManifestToken="3.5" xmlns:store="http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator" xmlns="http://schemas.microsoft.com/ado/2009/02/edm/ssdl">
  <EntityContainer Name="TestDbModelStoreContainer">
    <EntitySet Name="UserMessages" EntityType="TestDbModel.Store.UserMessages" store:Type="Tables" Schema="dbo" />
    <EntitySet Name="Users" EntityType="TestDbModel.Store.Users" store:Type="Tables" Schema="dbo" />
    <AssociationSet Name="Rel_User_Message" Association="TestDbModel.Store.Rel_User_Message">
      <End Role="users" EntitySet="Users" />
      <End Role="messages" EntitySet="UserMessages" />
    </AssociationSet>
  </EntityContainer>
  <EntityType Name="UserMessages">
    <Key>
      <PropertyRef Name="ID" />
    </Key>
    <Property Name="ID" Type="int" StoreGeneratedPattern="Identity" Nullable="false" />
    <Property Name="Message" Type="nvarchar" Nullable="true" MaxLength="1000" />
    <Property Name="Author_ID" Type="int" Nullable="false" />
  </EntityType>
  <EntityType Name="Users">
    <Key>
      <PropertyRef Name="ID" />
    </Key>
    <Property Name="ID" Type="int" StoreGeneratedPattern="Identity" Nullable="false" />
    <Property Name="Identity" Type="nvarchar" Nullable="false" MaxLength="100" />
    <Property Name="Password" Type="nvarchar" Nullable="false" MaxLength="100" />
    <Property Name="Name" Type="nvarchar" Nullable="false" MaxLength="100" />
    <Property Name="LastName" Type="nvarchar" Nullable="false" MaxLength="100" />
    <Property Name="Active" Type="bit" Nullable="false" DefaultValue="false" />
  </EntityType>
  <Association Name="Rel_User_Message">
    <End Role="users" Type="TestDbModel.Store.Users" Multiplicity="1" />
    <End Role="messages" Type="TestDbModel.Store.UserMessages" Multiplicity="*" />
    <ReferentialConstraint>
      <Principal Role="users">
        <PropertyRef Name="ID" />
      </Principal>
      <Dependent Role="messages">
        <PropertyRef Name="Author_ID" />
      </Dependent>
    </ReferentialConstraint>
  </Association>
</Schema></edmx:StorageModels>
    <!-- CSDL content -->
    <edmx:ConceptualModels>
      <Schema Namespace="TestDbModel" Alias="Self" xmlns:annotation="http://schemas.microsoft.com/ado/2009/02/edm/annotation" xmlns="http://schemas.microsoft.com/ado/2008/09/edm">
        <EntityContainer Name="TestDbEntities" annotation:LazyLoadingEnabled="true">
          <EntitySet Name="UserMessages" EntityType="TestDbModel.UserMessage" />
          <EntitySet Name="Users" EntityType="TestDbModel.User" />
          <AssociationSet Name="Rel_User_Message" Association="TestDbModel.Rel_User_Message">
            <End Role="users" EntitySet="Users" />
            <End Role="messages" EntitySet="UserMessages" />
          </AssociationSet>
        </EntityContainer>
        <EntityType Name="UserMessage">
          <Key>
            <PropertyRef Name="ID" />
          </Key>
          <Property Type="Int32" Name="ID" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Type="String" Name="Message" MaxLength="1000" FixedLength="false" Unicode="true" />
          <NavigationProperty Name="Author" Relationship="TestDbModel.Rel_User_Message" FromRole="messages" ToRole="users" />
        </EntityType>
        <EntityType Name="User">
          <Key>
            <PropertyRef Name="ID" />
          </Key>
          <Property Type="Int32" Name="ID" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Type="String" Name="Identity" MaxLength="100" FixedLength="false" Unicode="true" Nullable="false" />
          <Property Type="String" Name="Password" MaxLength="100" FixedLength="false" Unicode="true" Nullable="false" />
          <Property Type="String" Name="Name" MaxLength="100" FixedLength="false" Unicode="true" Nullable="false" />
          <Property Type="String" Name="LastName" MaxLength="100" FixedLength="false" Unicode="true" Nullable="false" />
          <Property Type="Boolean" Name="Active" Nullable="false" DefaultValue="False" />
          <NavigationProperty Name="AuthoredMessages" Relationship="TestDbModel.Rel_User_Message" FromRole="users" ToRole="messages" />
        </EntityType>
        <Association Name="Rel_User_Message">
          <End Type="TestDbModel.User" Role="users" Multiplicity="1" />
          <End Type="TestDbModel.UserMessage" Role="messages" Multiplicity="*" />
        </Association>
      </Schema>
    </edmx:ConceptualModels>
    <!-- C-S mapping content -->
    <edmx:Mappings>
    <Mapping Space="C-S" xmlns="http://schemas.microsoft.com/ado/2008/09/mapping/cs">
  <EntityContainerMapping StorageEntityContainer="TestDbModelStoreContainer" CdmEntityContainer="TestDbEntities">
    <EntitySetMapping Name="UserMessages">
      <EntityTypeMapping TypeName="IsTypeOf(TestDbModel.UserMessage)">
        <MappingFragment StoreEntitySet="UserMessages">
          <ScalarProperty Name="ID" ColumnName="ID" />
          <ScalarProperty Name="Message" ColumnName="Message" />
        </MappingFragment>
      </EntityTypeMapping>
    </EntitySetMapping>
    <EntitySetMapping Name="Users">
      <EntityTypeMapping TypeName="IsTypeOf(TestDbModel.User)">
        <MappingFragment StoreEntitySet="Users">
          <ScalarProperty Name="ID" ColumnName="ID" />
          <ScalarProperty Name="Identity" ColumnName="Identity" />
          <ScalarProperty Name="Password" ColumnName="Password" />
          <ScalarProperty Name="Name" ColumnName="Name" />
          <ScalarProperty Name="LastName" ColumnName="LastName" />
          <ScalarProperty Name="Active" ColumnName="Active" />
        </MappingFragment>
      </EntityTypeMapping>
    </EntitySetMapping>
    <AssociationSetMapping Name="Rel_User_Message" TypeName="TestDbModel.Rel_User_Message" StoreEntitySet="UserMessages">
      <EndProperty Name="users">
        <ScalarProperty Name="ID" ColumnName="Author_ID" />
      </EndProperty>
      <EndProperty Name="messages">
        <ScalarProperty Name="ID" ColumnName="ID" />
      </EndProperty>
    </AssociationSetMapping>
  </EntityContainerMapping>
</Mapping></edmx:Mappings>
  </edmx:Runtime>
  <!-- EF Designer content (DO NOT EDIT MANUALLY BELOW HERE) -->
  <Designer xmlns="http://schemas.microsoft.com/ado/2008/10/edmx">
    <Connection>
      <DesignerInfoPropertySet>
        <DesignerProperty Name="MetadataArtifactProcessing" Value="EmbedInOutputAssembly" />
      </DesignerInfoPropertySet>
    </Connection>
    <Options>
      <DesignerInfoPropertySet>
        <DesignerProperty Name="ValidateOnBuild" Value="true" />
        <DesignerProperty Name="EnablePluralization" Value="False" />
        <DesignerProperty Name="IncludeForeignKeysInModel" Value="False" />
      </DesignerInfoPropertySet>
    </Options>
    <!-- Diagram content (shape and connector positions) -->
    <Diagrams>
      <Diagram Name="Model1">
        <EntityTypeShape EntityType="TestDbModel.UserMessage" Width="1.5" PointX="2.625" PointY="0.5" Height="1.5956835937499996" />
        <EntityTypeShape EntityType="TestDbModel.User" Width="1.5" PointX="0.5" PointY="0.5" Height="2.3648893229166665" />
        <AssociationConnector Association="TestDbModel.Rel_User_Message" >
          <ConnectorPoint PointX="2" PointY="1.2978417968749998" />
          <ConnectorPoint PointX="2.625" PointY="1.2978417968749998" />
        </AssociationConnector>
      </Diagram>
    </Diagrams>
  </Designer>
</edmx:Edmx> 
```

**C#（示例代码）**

```
User user = new User()
{
    Identity = name + "." + lastName,   // generated value
    Password = Convert.ToBase64String(password),  // generated value
    Name = name,                        // ...
    LastName = lastName,                // ...
    Active = rand.NextDouble() > 0.7   // 70% de chance d'être actif
};
ctx.AddToUsers(user);

try
{
    ctx.SaveChanges();

    Console.WriteLine("Created user #" + (i + 1) + " : " + user.Identity);
}
catch (Exception e)
{
    Console.WriteLine(e.InnerException);
    Console.WriteLine("Collision for name " + user.Identity);
} 
```

**堆栈跟踪错误**

```
L'exception System.Data.UpdateException n'a pas été gérée
  Message=Une erreur s'est produite lors de la mise à jour des entrées. Pour plus d'informations, consultez l'exception interne.
  Source=System.Data.Entity
  StackTrace:
       à System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)
       à System.Data.EntityClient.EntityAdapter.Update(IEntityStateManager entityCache)
       à System.Data.Objects.ObjectContext.SaveChanges(SaveOptions options)
       à System.Data.Objects.ObjectContext.SaveChanges()
       à TestApplication.entity.EntitiesTest.CreateTestDbEntities(TestDbEntities ctx) dans C:\Users\yrochon\Documents\Visual Studio 2010\Projects\TestApplication\TestApplication\entity\Entities.cs:ligne 119
       à TestApplication.entity.EntitiesTest.Test() dans C:\Users\yrochon\Documents\Visual Studio 2010\Projects\TestApplication\TestApplication\entity\Entities.cs:ligne 26
       à TestApplication.Program.Main(String[] args) dans C:\Users\yrochon\Documents\Visual Studio 2010\Projects\TestApplication\TestApplication\Program.cs:ligne 18
       à System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       à System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       à Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       à System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       à System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       à System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       à System.Threading.ThreadHelper.ThreadStart()
  InnerException: System.Data.EntityCommandCompilationException
       Message=Une erreur s'est produite lors de la préparation de la définition de la commande. Pour plus de détails, consultez l'exception interne.
       Source=System.Data.Entity
       StackTrace:
            à System.Data.Mapping.Update.Internal.UpdateTranslator.CreateCommand(DbModificationCommandTree commandTree)
            à System.Data.Mapping.Update.Internal.DynamicUpdateCommand.CreateCommand(UpdateTranslator translator, Dictionary`2 identifierValues)
            à System.Data.Mapping.Update.Internal.DynamicUpdateCommand.Execute(UpdateTranslator translator, EntityConnection connection, Dictionary`2 identifierValues, List`1 generatedValues)
            à System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)
       InnerException: System.NotSupportedException
            Message=Les clés et les valeurs générées par le serveur ne sont pas prises en charge par SQL Server Compact.
            Source=System.Data.SqlServerCe.Entity
            StackTrace:
                 à System.Data.SqlServerCe.SqlGen.DmlSqlGenerator.GenerateReturningSql(StringBuilder commandText, DbModificationCommandTree tree, ExpressionTranslator translator, DbExpression returning)
                 à System.Data.SqlServerCe.SqlGen.DmlSqlGenerator.GenerateInsertSql(DbInsertCommandTree tree, List`1& parameters, Boolean isLocalProvider)
                 à System.Data.SqlServerCe.SqlGen.SqlGenerator.GenerateSql(DbCommandTree tree, List`1& parameters, CommandType& commandType, Boolean isLocalProvider)
                 à System.Data.SqlServerCe.SqlCeProviderServices.CreateCommand(DbProviderManifest providerManifest, DbCommandTree commandTree)
                 à System.Data.SqlServerCe.SqlCeProviderServices.CreateDbCommandDefinition(DbProviderManifest providerManifest, DbCommandTree commandTree)
                 à System.Data.Common.DbProviderServices.CreateCommandDefinition(DbCommandTree commandTree)
                 à System.Data.Common.DbProviderServices.CreateCommand(DbCommandTree commandTree)
                 à System.Data.Mapping.Update.Internal.UpdateTranslator.CreateCommand(DbModificationCommandTree commandTree)
            InnerException: 
```

这[是唯一的解决方案](https://stackoverflow.com/questions/4736177/updateexception-when-using-sql-server-compact-with-entity-framework)吗？手动生成身份（即使它们应该由数据库自动递增）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:24:24.510

将 SQL Compact Edition 升级到[版本 4](http://www.microsoft.com/en-us/download/details.aspx?id=17876)并将自动增加 id。

# wsh - JavaScript 中的文件结尾

> ID：12680293
> 
> 赞同：2
> 
> 时间：2012-10-01T20:07:48.563
> 
> 标签：wsh, jscript, windows-scripting

我想在 JavaScript 中逐行读取本地文件。Ut 我可以检查它是否到了这个文件的末尾。例如：

```
file = new ActiveXObject("Scripting.FileSystemObject"); 

// Sets the variable "f" to equal the new open file contents 

f = file.OpenTextFile("c:\\wantlist.txt", 1); 
s = f.ReadLine()

While(s != EOF)
{
    //. Do some thing 
    s = f.ReadLine()
} 
```

JavaScript 中的 EOF 应该是什么？或者你有其他方法来处理这个问题吗？非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:12:16.550

尝试：

```
f.AtEndOfStream 
```

[http://msdn.microsoft.com/en-us/library/ffk3x3bw%28v=vs.84%29.aspx](http://msdn.microsoft.com/en-us/library/ffk3x3bw%28v=vs.84%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T20:13:53.400

您正在返回一个[FileStream](http://msdn.microsoft.com/en-us/library/aa242724%28v=vs.60%29.aspx)对象，因此您想使用返回 boolean 的属性之一来执行您想要执行的操作，例如[`AtEndOfStream`](http://msdn.microsoft.com/en-us/library/aa242864%28v=vs.60%29.aspx)

然而，现在我要拿出我的肥皂盒，问你为什么要使用 javascript 为 windows 脚本编写东西，以及为什么你不选择使用更现代的东西，比如 PowerShell，它会给你最大的灵活性.NET 对象，但几乎所有 BASH 或其他脚本语言的脚本能力。

那么您在这里尝试完成的方法将更容易编写/使用/获得其他社区成员的支持。

我们不太可能回忆起 windows jscript 编程的深奥细节（但显然我们中的一些老屁还在身边）

# javascript - 两点之间的距离以抛出负值

> ID：12680295
> 
> 赞同：0
> 
> 时间：2012-10-01T20:07:50.437
> 
> 标签：javascript, rotation, distance

我使用公式来计算两点之间的距离，以确定当我将鼠标移到图像上时旋转图像的程度。

1.  点击，我捕捉到我点击的点
2.  鼠标移动拖动，我记录鼠标移动到的点的位置
3.  我计算起点和终点之间的距离
4.  我使用从 1 开始的这个值来旋转图像。

所以假设我点击图像的中心，我开始向右拖动鼠标，我的图像完美旋转，然后不松开点击我将鼠标拖回我的图像上，我的图像现在反向旋转，这是完美的。现在，一旦鼠标到达该中心（我最初单击的位置），它就会强制我的图像向相反方向旋转，因为距离达到了它的极限（0）并且新值都是正的，即使我向左移动。

我知道两点之间的距离应该是正的，但是一旦它回到（0），我需要一些东西来做负，这样我就可以正确地旋转我的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:18:16.093

最快的方法是使用简单的`if`语句。

```
if (x2 < x1)
    dist = -dist; 
```

您需要考虑是否只想绕 Y 轴旋转，正如我从您所写的内容中猜测的那样，还是绕 X 轴旋转，在这种情况下，旋转的方向将由是否`(y2 < y1)`（两个旋转的组合）决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:44:42.707

[http://jsfiddle.net/wRexz/4/](http://jsfiddle.net/wRexz/4/)

```
var dragging = false, startpoint, endpoint, midpoint = $("#center").position();
midpoint = {x:midpoint.left - 2, y:midpoint.top-2};

$("#stage").mousedown(function(e){
    dragging = true;
    startpoint = {x:e.offsetX, y:e.offsetY};
});

$("#stage").mouseup(function(e){
    dragging = false;
});

$("#stage").mousemove(function(e){
    if (dragging){
        var angle = 0, sp = startpoint, mp = midpoint;
        var p = {x:e.offsetX, y:e.offsetY};
        var sAngle = Math.atan2((sp.y-mp.y),(sp.x - mp.x));
        var pAngle = Math.atan2((p.y-mp.y),(p.x - mp.x));        

        angle = (pAngle - sAngle) * 180/Math.PI;

        $("#display").text(angle);
        $('#rotateme').css({ rotate: '+=' + angle });

        startpoint = {x:p.x, y:p.y};
    }
});​ 
```

这将找到两点之间的相对旋转角度。每次`mousemove`触发事件时它都会更新，因此它一次不会超过 180 度（除非在中点拖动时）。`Math.atan2`与后者相比，简化了逻辑，`Math.atan`因为后者不适用于坐标系。

# angularjs - 在 Angular 中使用 Bootstrap 预输入

> ID：12680296
> 
> 赞同：20
> 
> 时间：2012-10-01T20:07:50.717
> 
> 标签：angularjs, bootstrap-typeahead

我目前正在开发一个 Web 应用程序，它使用 twitter-bootstrap 和 Angularjs 很好地协调。但是，我在使用预输入并将其用作 ng 模型时遇到了问题。

键入时一切正常，但是当我选择一个项目（建议）时，该值不会反映在 Angular 控制器中，除非我在选择一个值后更改文本框的值。类型 -> 选择 -> 类型有效。类型 -> 选择不起作用。

HTML：

```
<form ng-submit="addAssignment(assignName)">
  <div class="input-append">
    <input type="text" placeholder="Type a name" ng-model="assignName" ng-change="dostuff()" data-provide="typeahead" data-source="{{ teamNames }}">
    <button class="btn" type="submit">Add</button>
 </div>
</form> 
```

角代码：

```
 $scope.addAssignment = function(name) {
    alert(name);
    return;
 } 
```

我添加了一个 ng-change 函数，只是为了检查模型值何时更改。它仅在手动键入时更改，而不是在从出现在 typeahead 的列表中选择一个值时更改。

我感谢任何可能有助于解决此问题的回复。谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-25T13:23:10.823

我建议从 AngularUI/boostrap 存储库中检查 typeahead 指令：http: [//angular-ui.github.com/bootstrap/](http://angular-ui.github.com/bootstrap/)

它是纯 AngularJS 中的本机实现，因此不需要任何 3rd 方依赖项。最重要的是，它很好地与 AngularJS 生态系统集成，因为它： * 使用`select`指令中已知的简洁语法 * 理解 AngularJS 承诺，因此可以以`$http`最小的努力动态获取结果。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-12-26T02:34:59.963

[AngularStrap](http://mgcrea.github.io/angular-strap)中有一个用于 Bootstrap3 的本地实现，它利用`ngAnimate`了 AngularJS v1.2+

*   演示： http: [//mgcrea.github.io/angular-strap/##typeaheads](http://mgcrea.github.io/angular-strap/##typeaheads)

您可能还想结帐：

*   来源：[https ://github.com/mgcrea/angular-strap/blob/master/src/typeahead/typeahead.js](https://github.com/mgcrea/angular-strap/blob/master/src/typeahead/typeahead.js)
*   Plunkr：[http ://plnkr.co/edit/VB43wxoDBhVyRMnKUHr9?p=preview](http://plnkr.co/edit/VB43wxoDBhVyRMnKUHr9?p=preview)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-06-19T18:56:23.927

我制作了这个原生的 typeahead 实现，只依赖于 angular （和引导 css 的样式），可能会帮助任何人寻找如何做到这一点。

在这里演示：[https ://jsfiddle.net/bh29tesc/](https://jsfiddle.net/bh29tesc/)

角度指令：

```
angular.module('app').
directive('typeahead', ['$compile', '$timeout', function($compile, $timeout)   {
    return {
        restrict: 'A',
        transclude: true,
        scope: {
            ngModel: '=',
            typeahead: '=',
            typeaheadCallback: "="
        },
        link: function(scope, elem, attrs) {
            var template = '<div class="dropdown"><ul class="dropdown-menu" style="display:block;" ng-hide="!ngModel.length || !filitered.length || selected"><li ng-repeat="item in filitered = (typeahead | filter:{name:ngModel} | limitTo:5) track by $index" ng-click="click(item)" style="cursor:pointer" ng-class="{active:$index==active}" ng-mouseenter="mouseenter($index)"><a>{{item.name}}</a></li></ul></div>'

            elem.bind('blur', function() {
                $timeout(function() {
                    scope.selected = true
                }, 100)
            })

            elem.bind("keydown", function($event) {
                if($event.keyCode == 38 && scope.active > 0) { // arrow up
                    scope.active--
                    scope.$digest()
                } else if($event.keyCode == 40 && scope.active < scope.filitered.length - 1) { // arrow down
                    scope.active++
                    scope.$digest()
                } else if($event.keyCode == 13) { // enter
                    scope.$apply(function() {
                        scope.click(scope.filitered[scope.active])
                    })
                }
            })

            scope.click = function(item) {
                scope.ngModel = item.name
                scope.selected = item
                if(scope.typeaheadCallback) {
                    scope.typeaheadCallback(item)
                }
                elem[0].blur()
            }

            scope.mouseenter = function($index) {
                scope.active = $index
            }

            scope.$watch('ngModel', function(input) {
                if(scope.selected && scope.selected.name == input) {
                    return
                }

                scope.active = 0
                scope.selected = false

                // if we have an exact match and there is only one item in the list, automatically select it
                if(input && scope.filitered.length == 1 && scope.filitered[0].name.toLowerCase() == input.toLowerCase()) {
                    scope.click(scope.filitered[0])
                }
            })

            elem.after($compile(template)(scope))
        }
    }
}]); 
```

用法：

```
<input class="form-control" type="text" autocomplete="false" ng-model="input" placeholder="Start typing a country" typeahead="countries" typeahead-callback="callback" /> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-08T15:54:14.697

好吧，我创建了一个肮脏的解决方法。根据此处的示例：[https](https://groups.google.com/forum/#!topic/angular/FqIqrs-IR0w/discussion) ://groups.google.com/forum/#!topic /angular/FqIqrs-IR0w/discussion，我为预输入控件创建了一个新模块：

```
angular.module('storageApp', []).directive('typeahead', function () {
return {
    restrict:'E',
    replace:true,
    scope:{
        model:'=',
        source:'&'
    },
    template:'<input type="text" ng-model="model"/>',
    link:function (scope, element, attrs) {
        console.log(scope.source);
        $(element).typeahead({
            source:scope.source,
            updater:function (item) {
                scope.$apply(read(item));
                return item;
            }
        });

        function read(value) {
            scope.model = value;
        }
    } // end link function
}; // end return
}); // end angular function 
```

我在数据绑定方面遇到了一些问题，自动填充选项是从 Angular 控件中收集的，并且我遇到的问题是控件是在此信息准备好之前创建的。因此，我在 typeahead 控件中添加了一个 html 属性（数据源），并在构造函数中设置了一个 $observe 函数。

```
<typeahead id="addSupplier" model="addSupplier" placeholder="Skriv inn leverandør" class="typeahead" source="getSuppliers()" ></typeahead> 
```

我认为这是一个肮脏的解决方案，所以如果有人有更好的想法，我很高兴听到它:)。该错误在此处描述：[https ://github.com/angular/angular.js/issues/1284](https://github.com/angular/angular.js/issues/1284)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-28T06:32:36.000

Another alternative

In HTML

```
 <form ng-submit="submitRegion()">
        <input type="text" ng-model="currentRegion" id="region-typeahead" data-source="{{ defaultRegions }}"  data-provide="typeahead"/>
        <button type="submit" class="btn">Add</button>
    </form> 
```

In your Controller

```
 $scope.defaultRegions = ["Afghanistan", "Australia", "Bahrain", "New Zealand" ];

    $scope.submitRegion = function(){
        $scope.currentRegion = $('#region-typeahead').val();
        $scope.addRegion(); //your add or click function you defined
        $scope.currentRegion = ''; //clear
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T08:53:27.147

这是基于@zgohr 的实现

```
$('#your-input-id-here').change((event)->
  angular.element("#your-input-id-here").scope().$apply((scope)->
    scope.your_ng_model = event.target.value
  )
) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-11T20:01:08.737

这是我使用的另一种方法。它也很脏。此代码可以放在您的控制器中。

```
$('#id_of_your_typeahead_input').change(function(event){
  $scope.$apply(function(scope){
    scope.your_ng_model = event.target.value;
  });
  $scope.your_ng_click_function();
}); 
```

# c++ - 国际象棋游戏的数学网格的 2D 索引

> ID：12680297
> 
> 赞同：0
> 
> 时间：2012-10-01T20:08:08.837
> 
> 标签：c++, chess

好的，所以我在国际象棋比赛中走了很长一段路！我有一个主要问题！如果我想要棋盘[4][3] 上的棋子，则棋盘在内存中的索引如下所示：

```
y axis
  0 1 2 3 4 5 6 7
  1 
x 2
a 3
x 4     X
i 5
s 6
  7 
```

我将 x 轴编号为内存索引的样子，以便用户在查看屏幕时看到这一点。正如我现在的代码一样，这是我必须输入的内容才能在 d,6 处获得棋子：用户输入 = wf4，它在程序中转换为 Board[5][3]。如您所见，我想输入 wd6 并转到 d 和最多 6 个。但程序首先下降 5，然后下降到 3(d)。

```
 1 R N B Q K B N R
x 2 P P P P P P P P
a 3
x 4
i 5         
s 6       P
  7 P P P   P P P P
  8 R N B Q K B N R
    a b c d e f g h
        y-axis 
```

我有从坐标中减去 1 的公式，所以如果用户输入 (e,8)，它会在 chessBoard[4][7] 中寻找一个棋子，但当然这不会找到棋子，因为 [4][ 7] 比 7 下降 4。我们想要超过 4 下降 7。我真正想要的是超过 4 上升 1！所以它看起来像这样：

```
 8 R N B Q K B N R
y 7 P P P P P P P P
a 6
x 5
i 4
s 3
  2 P P P P P P P P
  1 R N B Q K B N R
    a b c d e f g h
       x-axis 
```

在这里，我应该输入 e, 1 并得到一个 King。为此，我需要找到某种方法使左下角变为 0,0 而不是左上角。所以基本上，我该怎么做？如何将 2D 数组索引转换为数学样式网格？！？！编辑***好吧，完美的例子！我是我的玩家，输入 c, 6 将弹出输入值：source.x = 2 和 source.y = 6。我有执行此操作的代码。现在我需要告诉我的棋盘[source.x][source.y]玩家的意思是棋盘[2][2]。看？而且我没有看到直接的公式，因为查看此输入列表与使用最后一个图表需要查看的板：

*   input = 1,4 array[4][1] 得到相同的片段
*   input = 5,7 array[1][5] 得到相同的部分
*   input = 2,6 array[2][2] 得到相同的片段
*   input = 3,7 array[1][3] 得到相同的部分

所以很明显输入 x 需要交换到数组的 y 索引中。但是，x 值呢？呃，这太复杂了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:13:08.930

试试`chessBoard[x-1][8-y]`。

那样：

*   x = 1 -> x-1 = 0
*   x = 8 -> x-1 = 7

和：

*   y = 1 -> 8-y = 7
*   y = 8 -> 8-y = 0

正是你需要的。

**更新**：

这里似乎有些混乱......所以让我们重述一下：排列 2D 矩阵的方法只有 8 种（最低限度合理）：2 个`x`符号乘以 2 个`y`符号次切换`x`/`y`或不切换`= 2*2*2 = 8`。你只需要选择你最喜欢的。

首先，为了简单起见，我将假设两者`x`和`y`范围从`0`到`7`包容。如果不是这种情况，那么更正应该是微不足道的。

让数组名称为`b`，那么你有：

1.  `b[x][y]`
2.  `b[x][7-y]`
3.  `b[7-x][y]`
4.  `b[7-x][7-y]`
5.  `b[y][x]`
6.  `b[y][7-x]`
7.  `b[7-y][x]`
8.  `b[7-y][7-x]`

现在，哪一个？简单的。例如，您说当`x`增加时您应该向右移动……那么，正确的位置在哪里？好吧，这取决于你如何绘制矩阵（我看到了你的 ASCII 艺术，但它很模棱两可），但是从 avobe 8 选项中，只有 2 应该像你说的那样移动。在这 2 个中，一个会`y`上升，另一个会下降。尝试两者并再次选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:00:04.970

非常感谢你们的帮助，我真的很感激！我想到了。我的解决方案是继续制作两个 Location 结构。一个是 ChessLocation，其**x 值为 char**，**y 为 int**，另一个是 ArrayLocation，其**x 和 y 值均为 int 值**。然后我制作了在两者之间进行转换的方法。这个想法是使用 ChessLocations 来操作我的代码中的几乎所有内容。只有当我实际在棋盘的某个位置设置一块或检查一块时，我才会使用 ArrayLocations。转换如下（另外，对不起，我不知道如何在这个文本编辑器中制作段落......）

```
ArrayLocation ChessBoard::convertToArrayLocation(ChessLocation chessLocation)
{
    ArrayLocation location;
    location.x = 8- chessLocation.y;
    location.y = chessLocation.x - 0x61;

    return location;
} 
```

这将转换回 ChessLocation

```
ChessLocation ChessBoard::convertToChessLocation(ArrayLocation arrayLocation)
{
    ChessLocation location;

    location.x = 0;
    location.y = 0;
    location.x = arrayLocation.y +0x61;
    location.y = 8 - arrayLocation.x  ;

    return location;
} 
```

我本可以使用两个接受任何值并吐出所需值的构造函数来创建一个 Location 类，但我对 c++ 还不是很精通（不幸的是，我所有的类都使用了 Java ...

# assembly - x86 汇编中 2 的幂，计算不适合 32 位寄存器的 2^x

> ID：12680303
> 
> 赞同：1
> 
> 时间：2012-10-01T20:08:35.360
> 
> 标签：assembly, x86, masm, exponent, exponentiation

作为 ASM 编程的初学者，我需要在汇编中得到 2 的 38 次方的结果，并且我需要你的帮助来理解为什么我的程序没有产生我需要的结果（它打印 4 个十进制）：

```
.386
.model flat, stdcall
option casemap:none

include \masm32\include\windows.inc
include \masm32\include\msvcrt.inc
includelib \masm32\lib\msvcrt.lib

.data

formatstr db "%d",0

.code 
start:

mov eax , 2
mov ecx , 38
mov esi , eax
mov edx , 0

.while TRUE
    mul esi
    mov esi, edx
    add esi, eax
    mov edx, 0
    mov eax, 2
    dec ecx
    .break .if (!ecx)
.endw

invoke crt__cprintf, addr formatstr, esi

end start 
```

如您所见，我正在使用 masm32 编写它（如果在这种情况下有任何问题）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T22:18:14.773

`2^38`显然不适合一个 32 位寄存器，例如`eax`.

要存储值`2^38`( `274877906944`)，您需要 39 位。在 32 位代码中，您可以使用例如。两个 32 位寄存器，例如`edx:eax`. 但是，在 32 位代码中`mul`只接受 32 位**因子**（例如，寄存器，其他的总是`eax`），所以在循环中使用 32 位`mul`是行不通的，因为您不能将中间结果存储在 32 位中寄存器要**再次**相乘，即使`mul`将 64 位**结果**存储在`edx:eax`.

但是你可以[`rcl`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/rcl.html)用来计算例如。`2^38`在 32 位代码中：

```
 xor edx,edx
    mov eax,2    ; now you have 2 in edx:eax
    mov ecx,38   ; 2^n, in this case 2^38 (any value x, 1 <= x <= 63, is valid).

x1: dec ecx      ; decrease ecx by 1
    jz ready     ; if it's 2^1, we are ready.

    shl eax,1    ; shift eax left through carry flag (CF) (overflow makes edx:eax zero)
    rcl edx,1    ; rotate edx through carry flag (CF) left
    jmp x1

ready:            ; edx:eax contains now 2^38. 
```

**编辑：**受@Jagged O'Neill 的回答启发的非循环实现。这个没有指数> = 32的跳跃，指数< 32的跳跃，也适用于`ecx`0，`ecx`大于63组`edx:eax`到`0`。

```
 mov     ecx,38          ; input (exponent) in ecx. 2^n, in this case 2^38.
                            ; (any value x, 0 <= x <= 63, is valid).
; the code begins here.

    xor     eax,eax
    xor     edx,edx         ; edx:eax is now prepared.

    cmp     cl,64           ; if (cl >= 64),
    setb    al              ; then set eax to 0, else set eax to 1.
    jae     ready           ; this is to handle cl >= 64.

; now we have 0 <= cl <= 63

    sub     ecx,1
    setnc   al              ; if (count == 0) then eax = 0, else eax = 1.
    lea     eax,[eax+1]     ; eax = eax + 1\. does not modify any flags.
    jna     ready           ; 2^0 is 1, 2^1 = 2, those are ready now.
    mov     ebx,ecx         ; copy ecx to ebx
    cmp     cl,32           ; if (cl >= 32)
    jb      low_5_bits
    mov     cl,31           ; then shift first 31 bits to the left.
    shld    edx,eax,cl
    shl     eax,cl          ; now shifted 31 bits to the left.
    lea     ecx,[ebx-31]    ; cl = bl - 31

low_5_bits:
    shld    edx,eax,cl
    shl     eax,cl

ready: 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T20:15:50.993

当您在 x86 上进行乘法运算时，`edx`将保留结果的前 32 位，`eax`并将保留结果的后 32 位。当你这样做时：

```
mul esi
mov esi, edx
add esi, eax 
```

结果只有在 0 的情况下才有意义，`edx`所以`mov`/`add`基本上是在做`mov esi, eax`. 如果前 32 位非零，那么您最终会得到一个相当无意义的高位和低位混搭。

# mysql - MySQL分区修剪变量

> ID：12680305
> 
> 赞同：0
> 
> 时间：2012-10-01T20:08:47.310
> 
> 标签：mysql, variables, database-partitioning, pruning

我正在尝试优化一个需要将近 30 分钟才能运行的查询。我想要做的是利用分区修剪来最小化搜索的行。对表进行分区的变量范围是来自不同表的变量。似乎mysql正在搜索所有分区。

这是表格（切掉不相关的部分）：（顺便说一句，我确实意识到 int(x) 并没有改变 int 的大小。我在知道更好之前就设计了那个表格，并且没有修好了）

```
expectedEvent | CREATE TABLE `expectedevent` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`eventId` int(5) NOT NULL,
`unitGroup_id` int(6) NOT NULL,
`minOccur` int(9) NOT NULL,
`periodInDays` int(4) NOT NULL,
PRIMARY KEY (`id`),
KEY `eventId` (`eventId`),
KEY `unitGroup_id` (`unitGroup_id`),
CONSTRAINT `expectedevent_ibfk_1` FOREIGN KEY (`unitGroup_id`) REFERENCES `unitgroup` (`id`)

event_message | CREATE TABLE `event_message` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`unitId` varchar(15) NOT NULL,
`eventId` smallint(6) NOT NULL,
`eventName` varchar(50) NOT NULL,
`gpsDateTime` datetime NOT NULL,
`weekInfo` tinyint(4) NOT NULL,
`odometer` int(11) NOT NULL,
...
KEY `id` (`id`),
KEY `unitId` (`unitId`,`eventId`),
KEY `eventId` (`eventId`)
...
!50100 PARTITION BY RANGE (weekInfo)
ARTITION p0 VALUES LESS THAN (1) ENGINE = InnoDB,
ARTITION p1 VALUES LESS THAN (2) ENGINE = InnoDB,

unitGroup | CREATE TABLE `unitgroup` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`name` varchar(60) DEFAULT NULL,

unitGroup_devices | CREATE TABLE `unitg
`id` int(11) NOT NULL AUTO_INCREMENT,
`unitGroup_id` int(11) NOT NULL,
`scopeDevice_id` int(11) NOT NULL,
PRIMARY KEY (`id`),
KEY `unitGroup_id` (`unitGroup_id`),
KEY `scopeDevice_id` (`scopeDevice_id`)
... 
```

这个查询需要将近 30 分钟（选择，没有解释）：

```
explain partitions
select ee.eventId, scopeDevice_id as scopeDevId, sd.unitId as unitId, count(em.id) as evtCount, minOccur, periodInDays
from expectedEvent ee left join unitGroup ug on ee.unitGroup_id=ug.id
left join unitGroup_devices ugd on ug.id=ugd.unitGroup_id
left join scopeDevice sd on ugd.scopeDevice_id=sd.id
left join event_message em on sd.unitId=em.unitId and em.eventId=ee.eventId
where gpsDateTime>=DATE_SUB(DATE(now()),INTERVAL periodInDays DAY)
and weekInfo>=WEEKOFYEAR(DATE_SUB(DATE(now()),INTERVAL periodInDays DAY))
and weekInfo <=WEEKOFYEAR(DATE(now()))
group by ee.id, ugd.scopeDevice_id;

| id | select_type | table | partitions                                                                                                                                                | type   | possible_keys               | key          | key_len | ref                                            | rows | Extra                           |
+----+-------------+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+--------+-----------------------------+--------------+---------+------------------------------------------------+------+---------------------------------+
|  1 | SIMPLE      | ee    | NULL                                                                                                                                                      | ALL    | eventId,unitGroup_id        | NULL         | NULL    | NULL                                           |    1 | Using temporary; Using filesort |
|  1 | SIMPLE      | ug    | NULL                                                                                                                                                      | eq_ref | PRIMARY                     | PRIMARY      | 4       | navsat_scope.ee.unitGroup_id                   |    1 | Using where; Using index        |
|  1 | SIMPLE      | ugd   | NULL                                                                                                                                                      | ref    | unitGroup_id,scopeDevice_id | unitGroup_id | 4       | navsat_scope.ee.unitGroup_id                   |   11 | Using where                     |
|  1 | SIMPLE      | sd    | NULL                                                                                                                                                      | eq_ref | PRIMARY,unitId              | PRIMARY      | 4       | navsat_scope.ugd.scopeDevice_id                |    1 | Using where                     |
|  1 | SIMPLE      | em    | p0,p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13,p14,p15,p16,p17,p18,p19,p20,p21,p22,p23,p24,p25,p26,p27,p28,p29,p30,p31,p32,p33,p34,p35,p36,p37,p38,p39,p40 | ref    | unitId,eventId              | unitId       | 19      | navsat_scope.sd.unitId,navsat_scope.ee.eventId |  682 | Using where                     |
+----+-------------+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+--------+-----------------------------+--------------+---------+------------------------------------------------+------+---------------------------------+ 
```

在expectedEvent中只有一个入口，所以基本上相当于做了下面的事情。此查询大约需要 3 分钟（选择，没有解释）：

```
select ee.eventId, scopeDevice_id as scopeDevId, sd.unitId as unitId, count(em.id) as evtCount, minOccur, periodInDays
from expectedEvent ee left join unitGroup ug on ee.unitGroup_id=ug.id
left join unitGroup_devices ugd on ug.id=ugd.unitGroup_id
left join scopeDevice sd on ugd.scopeDevice_id=sd.id
left join event_message em on sd.unitId=em.unitId and em.eventId=ee.eventId
where gpsDateTime>="2012-09-29"
and weekInfo>=WEEKOFYEAR("2012-09-29")
and weekInfo <=WEEKOFYEAR("2012-10-01")
group by ee.id, ugd.scopeDevice_id;

| id | select_type | table | partitions | type   | possible_keys               | key          | key_len | ref                                            | rows | Extra                           |
+----+-------------+-------+------------+--------+-----------------------------+--------------+---------+------------------------------------------------+------+---------------------------------+
|  1 | SIMPLE      | ee    | NULL       | ALL    | eventId,unitGroup_id        | NULL         | NULL    | NULL                                           |    1 | Using temporary; Using filesort |
|  1 | SIMPLE      | ug    | NULL       | eq_ref | PRIMARY                     | PRIMARY      | 4       | navsat_scope.ee.unitGroup_id                   |    1 | Using where; Using index        |
|  1 | SIMPLE      | ugd   | NULL       | ref    | unitGroup_id,scopeDevice_id | unitGroup_id | 4       | navsat_scope.ee.unitGroup_id                   |   11 | Using where                     |
|  1 | SIMPLE      | sd    | NULL       | eq_ref | PRIMARY,unitId              | PRIMARY      | 4       | navsat_scope.ugd.scopeDevice_id                |    1 | Using where                     |
|  1 | SIMPLE      | em    | p39,p40    | ref    | unitId,eventId              | unitId       | 19      | navsat_scope.sd.unitId,navsat_scope.ee.eventId |  682 | Using where                     |
+----+-------------+-------+------------+--------+-----------------------------+--------------+---------+------------------------------------------------+------+---------------------------------+ 
```

我的解决方法是首先在我的 C# 应用程序中读取 expectedEvent 表，然后使用实际日期而不是变量构建查询。

然而，我更愿意在 MySQL 中完成这一切。如何优化查询？ExpectedEvent 最终将包含许多行。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:55:36.313

MySQL 在准备好 SQL 语句时进行“分区修剪”（当 MySQL 为该语句生成执行计划时）。为了将“分区修剪”作为计划的一部分，MySQL 需要在解析时已知的值；对于解析时未知的值，不实施分区修剪。

当 MySQL 执行一条 SQL 语句时，MySQL 首先准备一个执行计划，然后执行该计划。“分区修剪”是在准备阶段决定的执行计划的细节。（这解释了为什么您的谓词中带有常量的语句显示分区修剪，但您的引用列的语句没有显示任何修剪。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:17:57.687

您需要在 WHERE 子句中使用实际值，而不是通过 JOIN 获取值。想想看，当 MySQL 为查询准备执行计划时，它不知道表中的值是什么`gpsDateTime`。因此它无法知道它只需要查询中的某些分区来获取它需要的数据。

在您的情况下，预先通过查询获取过滤器中使用的日期值，然后在进行选择查询时使用实际值会快得多，就像您在第二个示例中所做的那样。

# c# - 使用线程使 ADO.NET 查询超时

> ID：12680315
> 
> 赞同：0
> 
> 时间：2012-10-01T20:09:52.423
> 
> 标签：c#, multithreading, ado.net

我需要在几个不同的 ADO.NET 连接类型（Sql 和 Oracle）上运行查询。如果查询尚未完成，我希望能够在 X 秒后取消查询。我认为线程可能是解决此问题的好方法，所以我可以在 X 秒后杀死线程，如果它还活着的话：

```
var thread = new Thread((param) =>
{
    try
    {
        string connStr = "****";
        OracleConnection conn = new OracleConnection(connStr);
        try
        {                       
            conn.Open();
            Debug.WriteLine("Connection Open: " + DateTime.Now.ToLongTimeString());
            OracleCommand cmd = new OracleCommand(param as string, conn);
            Debug.WriteLine("Command Start: " + DateTime.Now.ToLongTimeString());
            OracleDataReader reader = cmd.ExecuteReader();
            Debug.WriteLine("Command End: " + DateTime.Now.ToLongTimeString());
            conn.Close();
            Debug.WriteLine("Connection Close: " + DateTime.Now.ToLongTimeString());
        }
        catch (Exception ex)
        {
            Debug.WriteLine("Exception: " + ex.Message);
        }
    }
    catch (ThreadInterruptedException)
    {
        Debug.WriteLine("Cancel: " + DateTime.Now.ToLongTimeString());
    }
});

Debug.WriteLine("Start: " + DateTime.Now.ToLongTimeString());

thread.Start("begin dbms_lock.sleep(10); end;"); 
DateTime start = DateTime.Now;
while (thread.IsAlive)
{
    if (DateTime.Now > start.AddSeconds(5))
    {
        thread.Interrupt();
    }
}                

Debug.WriteLine("End: " + DateTime.Now.ToLongTimeString()); 
```

但是，这并不能取消`thread.Interrupt()`我之前使用过的其他代码。

我怎样才能让它工作，或者有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:44:21.950

创建一个封装您的 sql 查询的[ASP.NET Web Api 控制器](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api)，在您的 MVC 控制器中使用[HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.timeout.aspx)并为您对 api 的请求指定超时。Web API 调用将返回一个包含查询结果的 JSON 对象，您需要在控制器中使用[JavaScriptSerializer.Deserialize](http://msdn.microsoft.com/en-us/library/bb355316.aspx)对其进行反序列化。

# android - 是否可以将 MapCSS 与 OSMDroid 一起使用？

> ID：12680316
> 
> 赞同：0
> 
> 时间：2012-10-01T20:09:56.647
> 
> 标签：android, osmdroid, openstreetmap

我正在制作一个使用 OSMDroid 作为地图引擎的 android 应用程序，我想为它制作一个自定义主题并阅读 MapCSS 而不是创建图块。

我一直在研究如何将两者结合起来，但运气不佳..有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:19:01.190

您是否考虑过使用 Mapsforge？这将执行 OSM 数据的可定制的客户端渲染。OSM 文件使用 Osmosis 插件转换为自定义二进制格式，然后可以通过 XML 样式文件设置样式。

[http://code.google.com/p/mapsforge](http://code.google.com/p/mapsforge)

# javascript - 如何阅读 HTML 标签

> ID：12680318
> 
> 赞同：-3
> 
> 时间：2012-10-01T20:10:05.000
> 
> 标签：javascript, html

我想在不使用 id/class 的情况下使用 Javascript 读取 HTML 标签。我知道***getElementById***的功能。但我想知道如何在不使用 Javascript 中的 id 或 class 而不是 Jquery 的情况下读取 HTML 标签。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T20:13:27.237

整个 DOM API 都为您准备好了。

*   `(element).getElementsByTagName`通过标签名称获取元素。
*   `(element).getElementsByClassName`按类名获取元素。
*   `(element).querySelector[All]`基于 CSS 选择器获取一个元素/元素。
*   `(element).children`获取元素的子元素。
*   `(element).childNodes`获取元素的子节点。

名单还在继续。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T20:12:13.133

您可以使用[`document.getElementsByTagName(...)`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName)，例如：

```
var divs = document.getElementsByTagName('div');
divs; // => a list of "div" elements in the document. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T20:12:29.180

您可以使用`document.getElementsByTagName`.

```
 var allDivsinDom = document.getElementsByTagName('div'); //Array of all divs
    var allAnchorinDom = document.getElementsByTagName('a'); //Array of all a
.... 
```

这样你就可以访问 dom 中的所有元素

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T20:19:32.430

您还可以获取每个子节点的 and 并读取整个 DOM 树，如下所示`document.body.childNodes`：`childNodes`

```
function readHTML(node) {
    var i, child;
    if (node.nodeType == 1) { // only tags 
        for (i = 0 ; i < node.childNodes.length ; ++i) {
            child = node.childNodes[i];
            // do something with node
            window.console.info(child.tagName);
            readHTML(child);
        }
    }
}
readHTML(document.body); 
```

以及`document.getElementsByTagName`之前提出的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T20:21:39.253

页面中的 HTML 标签形成一棵树；那棵树的根是一个名为“文档”的节点。您可以调用该节点上的方法，例如 getElementById，以在树中进一步查找节点，但您不必这样做。

您可以通过访问其 innerHTML 属性来检索任何节点的原始 HTML 内容，包括整个文档。（请注意，这不会为您提供节点本身的 HTML 标记，而是其内容，因此如果您还需要该标记，则需要获取节点的父节点的 innerHTML）

如果您想读取整个文档的原始 HTML，请尝试访问 document.documentElement.innerHTML，并解析您从中获得的内容。

# asp.net - 由于 providerOptions 元素，发布 ASP.NET 3.5 站点使 Web.config 为空

> ID：12680320
> 
> 赞同：0
> 
> 时间：2012-10-01T20:10:06.403
> 
> 标签：asp.net, iis-7.5, asp.net-3.5, publishing-site

我正在尝试使用 WebDAV 将 ASP.Net 3.5 站点发布到 IIS 7.5 服务器，并且每次执行配置文件时都会清空。罪魁祸首是下面代码中的 providerOption 元素。

```
<system.codedom>
<compilers>
  <compiler language="c#;cs;csharp" extension=".cs" warningLevel="4" type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
    <providerOption name="CompilerVersion" value="v3.5"/>
    <providerOption name="WarnAsError" value="false"/>
  </compiler>
  <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" warningLevel="4" type="Microsoft.VisualBasic.VBCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
    <providerOption name="CompilerVersion" value="v3.5"/>
    <providerOption name="OptionInfer" value="true"/>
    <providerOption name="WarnAsError" value="false"/>
  </compiler>
</compilers> 
```

C:\Windows\System32\inetsrv\config\schema 中的 FX_schema.xml 文件用于验证站点的 Web.config，它不包含 providerOptions 作为 XML 的一部分。我可以添加一些内容以允许修改文件以通过添加如下内容来允许它：

```
 <collection addElement = "providerOption">
  <attribute name = "name" required = "true" isUniqueKey = "true" type = "string" />
  <attribute name = "value" required = "true" type = "string" />
 </collection> 
```

但我没有任何权限写入架构文件。这看起来也像是其他人应该看到的东西，并且快速搜索发现有些人是。我看到的唯一选项是“只需删除 codedom 部分”，这意味着 3.5 的东西，比如 LINQ，将无法工作，所以这是一个非首发。

那么，如何在 providerOption 元素完好无损的情况下将我的网站发布到 IIS 7.5？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:53:27.183

好吧，因为我找不到任何具体的东西，所以我继续做我认为可能是解决方案的事情：我制作了自己的文件并将其与模式文件一起放入。我将其命名为 ThreeFive.xml，并将其放置在 C:\Windows\System32\inetsrv\config\schema。该文件的全部内容如下：

```
<configSchema>
    <sectionSchema name="system.codedom">
        <element name="compilers">
            <collection addElement="compiler" removeElement="remove" clearElement="clear">
                <attribute name="language" type="string" isCombinedKey="true" />
                <attribute name="extension" type="string" isCombinedKey="true" />
                <attribute name="type" type="string" />
                <attribute name="warningLevel" type="int" />
                <attribute name="compilerOptions" type="string" />
                <collection addElement="providerOption">
                  <attribute name="name" required="true" isUniqueKey="true" type="string" />
                  <attribute name="value" required="true" type="string" />
                </collection>
            </collection>
        </element>
    </sectionSchema>
</configSchema> 
```

然后我发布了一个 3.5 站点，该站点从 appconfig 设置中检索信息并执行了一些 LINQ 以确保配置和 3.5 生效。配置文件没有被清空并且 LINQ 正在按预期工作，所以我很想将其称为解决方案。

# xamarin.ios - 在 MonoTouch 中使用 ImageLoader - 当有大量图像时加载错误的图像

> ID：12680324
> 
> 赞同：0
> 
> 时间：2012-10-01T20:10:12.780
> 
> 标签：xamarin.ios, image-loading

我在表格视图中有一个国家列表（大约 100 行）。如果我以缓慢的速度滚动浏览它，一切正常，并且加载了正确的图像。如果我尽可能快地滚动浏览，那么一些国家的标志就会混淆。这似乎是 ImageLoader 中的一个错误，但我觉得奇怪的是没有其他人遇到过它？我正在使用这里的最新代码： [https ://github.com/migueldeicaza/MonoTouch.Dialog/blob/master/MonoTouch.Dialog/Utilities/ImageLoader.cs](https://github.com/migueldeicaza/MonoTouch.Dialog/blob/master/MonoTouch.Dialog/Utilities/ImageLoader.cs)

如果我将 ImageLoader.cs 中的“MaxRequests”更改为更大的值，例如 30，一切似乎都可以正常工作。如果我将其更改为 3，则所有内容的加载速度都会非常缓慢，并且会显示很多错误的国家/地区标志。

我使用这个类的方式有问题吗？我尝试像这里一样采用子类方式： [https ://github.com/xamarin/mobile-samples/blob/master/MWC/MWC.iOS/UI/CustomElements/SpeakerCell.cs](https://github.com/xamarin/mobile-samples/blob/master/MWC/MWC.iOS/UI/CustomElements/SpeakerCell.cs)

但我遇到了完全相同的问题。缓慢滚动时工作正常，快速滚动时会感到困惑。

我像这样加载图像：

```
private System.Collections.Generic.Dictionary<string, List<NSIndexPath>> listOfImageUrls = new System.Collections.Generic.Dictionary<string, List<NSIndexPath>>();

public void UpdatedImage (Uri uri)
{
    InvokeOnMainThread (() => ReloadImage(uri));
}

public void ReloadImage(Uri uri){
    String id = uri.ToString();
    if(!listOfImageUrls.ContainsKey(id))
        return;
    List<NSIndexPath> indexes = listOfImageUrls[id];
   _tvc.GetTableView().ReloadRows(indexes.ToArray(), UITableViewRowAnimation.None);
}

public override UITableViewCell GetCell(UITableView tableView, NSIndexPath indexPath)
{
 ...
   UIImageView imgLogo = ...; 
   string imageUri = getCountryFlagUrlSmall (dataSourceItemCountry);
   imgLogo.Image = MonoTouch.Dialog.Utilities.ImageLoader.DefaultRequestImage (new Uri (imageUri), this);           

   if(listOfImageUrls.ContainsKey(imageUri))
   {
      if(!listOfImageUrls[imageUri].Contains(indexPath))
        listOfImageUrls[imageUri].Add(indexPath);                       
   }
   else
    listOfImageUrls.Add(imageUri, new List<NSIndexPath>{indexPath});
   } 
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:46:51.720

我改用这个： [https ://github.com/sichy/UrlImageStore/blob/master/MonoTouch.UrlImageStore/UrlImageStore.cs](https://github.com/sichy/UrlImageStore/blob/master/MonoTouch.UrlImageStore/UrlImageStore.cs)

只需要 4-5 行代码来更改实现并且一切都正确加载。

# php - 结合 sql 查询和 javascript 的结果来计算一个字段

> ID：12680326
> 
> 赞同：0
> 
> 时间：2012-10-01T20:10:20.717
> 
> 标签：php, javascript, jquery, sql

我对 JavaScript 很陌生，对 JavaScript 中的数组有疑问。直截了当：我有 HTML 代码：

```
<input type="text" name="conPrice" id="conPrice" size="16" maxlength="128"/>
<input type="text" name="OverP" id="OverP" size="16" maxlength="128"  />
<div id="slider"></div> //Slider 
```

数量的第一个字段，从滑块中拉出。SQL 表中价格的第二个字段

SQL基于有四个字段的条件：

```
| ID | MIN | MAX | PRICE | 
```

我试图根据我的滑块值在字段**OverP中获取价格列价格。**因此，例如，如果我在滑块上有数字 6，并且它在 1-7 之间作为 MIN 和 MAX，那么价格将为 10。

我有这个 SQL：

```
<?php
$x = mysql_query("SELECT p_max AS max FROM dsd_price");
$y = mysql_query("SELECT p_min AS min FROM dsd_price");
$z = mysql_query("SELECT p_price AS price FROM dsd_price");
while ($x_array = mysql_fetch_array($x)){$max[] = $x_array;}
while ($y_array = mysql_fetch_array($y)){$min[] = $y_array;}
while ($z_array = mysql_fetch_array($z)){$price[] = $z_array;}
?> 
```

最后是我的 JS：

```
<script>
$(document).ready(function slider() {
$( "#slider" ).slider({
    value:1,
    min: 0,
    max: 201,
    step: 1,
    slide: function( event, ui ) {
//Its setting the slider value to the element with id "conPrice" 
$("#conPrice" ).val(ui.value);
    }
});
});

$(document).ready(function calcul() {
var frm = document.dsd_form;
var quant = frm.conPrice;
var overp = ['<?php echo implode("','", $price); ?>'];
var mini = ['<?php echo implode("','", $min); ?>'];
var maxi = ['<?php echo implode("','", $max); ?>'];
for(index = 0; quant > mini[index], quant < maxi[index]; index++){
    $( "#OverP" ).val( overp[index] );
})
}   
</script> 
```

我没有得到我希望的结果，我知道问题出在我的 JS 上。希望尽快对我的话题提出一些建议。

更新：到目前为止放入测试页面的整个代码。滑块确实滑动，滑块值正在处理为 conPrice，但计算不起作用...

```
<script src="jquery.js" type="text/javascript" charset="utf-8"></script>
<!-- For slider -->
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.min.js"></script>

<!-- Slider JS -->
<?php
$x = mysql_query("SELECT p_max AS max FROM dsd_price");
$y = mysql_query("SELECT p_min AS min FROM dsd_price");
$z = mysql_query("SELECT p_price AS price FROM dsd_price");
while ($x_array = mysql_fetch_array($x)){$max[] = $x_array['max'];}
while ($y_array = mysql_fetch_array($y)){$min[] = $y_array['min'];}
while ($z_array = mysql_fetch_array($z)){$price[] = $z_array['price'];}
?>
<script>
$(document).ready(function slider() {
$( "#slider" ).slider({
    value:1,
    min: 0,
    max: 201,
    step: 1,
    slide: function( event, ui ) {
  //Its setting the slider value to the element with id "conPrice" 
  $("#conPrice" ).val(ui.value);
    }
 });
    function price(){
    var frm = document.dsd_form;
    var quant = frm.conPrice;
    var overp = ['<?php echo implode("','", $price); ?>'];
    var mini = ['<?php echo implode("','", $min); ?>'];
    var maxi = ['<?php echo implode("','", $max); ?>'];
    for(var index = 0; quant > mini[index], quant < maxi[index]; index++){
        $( "#OverP" ).val( overp[index] );
    }
}
});
</script>
</head>
<body>
<form id="dsd_form" name="dsd_form" action="db_create_sql.php" method="post" class="niceform">
<fieldset>
       <dl>
            <dt><label for="conPrice">Price:</label></dt>
            <dd><input type="text" name="conPrice" id="conPrice" size="16" maxlength="128" />
            <input type="text" name="OverP" id="OverP" size="16" maxlength="128" />
            <div id="slider" ></div>
            </dd>
        </dl>
</fieldset>
</form>
</body>
</html> 
```

拥有 SQL 数据库：

```
p_id | p_min | p_max | p_price
  1        1      1       11
  2        2      5       13 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:13:27.140

看来您的括号与 calcul() 函数不匹配。尝试这个：

```
$(document).ready(function calcul() {
var frm = document.dsd_form;
var quant = frm.conPrice;
var overp = ['<?php echo implode("','", $price); ?>'];
var mini = ['<?php echo implode("','", $min); ?>'];
var maxi = ['<?php echo implode("','", $max); ?>'];
for(index = 0; quant > mini[index], quant < maxi[index]; index++)
{
    $( "#OverP" ).val( overp[index] );
}}); 
```

# asp.net - UpdatePanel PostBack 截断 HTTP 正文

> ID：12680330
> 
> 赞同：3
> 
> 时间：2012-10-01T20:10:44.180
> 
> 标签：asp.net, webforms, asp.net-ajax

当更新面板中的回发发生得太快时，似乎 ASP.NET 客户端 JavaScript 有一个错误，即它发送到服务器的正文不等于 HTTP 标头中的内容长度。当视图状态变量被截断时，这会导致 IIS 7.5 抛出“无效的 base-64”异常（对于我的特定应用程序）。Fiddler 跟踪显示 HTTP 请求实际上格式错误。

在我的生产案例中（它发生在不止一页上），这是由于视图状态非常大。是的，我可以修剪或完全摆脱它。但问题是有谁知道*为什么*客户会截断身体以及如何避免它？

鉴于我没有添加任何自己的 JavaScript，在我看来，错误在于 MS 客户端 JavaScript。请注意，我只在 IE8/9 和 Chrome 而不是 Firefox 中触发了它——也许 Firefox 使用不同的套接字库（仍然是 nspr）？

以下是我试图说明问题的示例。我在“网站”中添加了该页面，并且正在使用带有 .Net 4 的 VS10。我可以使用 IIS7.5 和 VS10 内置 Web 服务器来触发该问题。这个例子通常会在 64k（精确）处截断，但我的生产页面会有所不同。

在 Default.aspx 中：

```
<asp:UpdatePanel ID="up" runat="server" UpdateMode="Conditional"> 
  <ContentTemplate> 

     <asp:Label ID="lblResult" runat="server" /> 

     <asp:Repeater ID="rptCheckBoxes" runat="server"> 
        <ItemTemplate> 
         <br /> 
         <asp:CheckBox ID="cbOne" runat="server" 
                       AutoPostBack="true" 
                       OnCheckedChanged="cb_OnCheckChanged" 
                       Text='<%# Eval("thing") %>' /> 
        </ItemTemplate> 
     </asp:Repeater> 

  </ContentTemplate> 
</asp:UpdatePanel> 
```

在 Default.aspx.cs 中：

```
protected void Page_Load(object sender, EventArgs e) 
{ 
    if (!Page.IsPostBack) 
    { 
        var things = new List<Thingy>(); 
        for (int i = 0; i < 5000; i++) 
        { 
            things.Add(new Thingy { Thing = i.ToString() }); 
        } 
        rptCheckBoxes.DataSource = things; 
        rptCheckBoxes.DataBind(); 
    } 
} 

protected void cb_OnCheckChanged(object sender, EventArgs e) 
{ 
    CheckBox cb = sender as CheckBox; 

    if (cb.Checked) 
    { 
        lblResult.Text = cb.Text; 
    } 
    else 
    { 
        lblResult.Text = "not checked"; 
    } 
} 

internal class Thingy 
{ 
    public string Thing { get; set; } 
} 
```

运行 Fiddler，快速单击复选框，最终显示格式错误的 HTTP 请求。

# jsp - 随机 JSP 编译错误 - NullPointerException

> ID：12680331
> 
> 赞同：2
> 
> 时间：2012-10-01T20:10:47.817
> 
> 标签：jsp, jboss, nullpointerexception, tiles

我在带有 JBoss 4.0.5.GA 的 Java EE 应用程序中出现了看似随机的 NullPointerExceptions。部署后，加载某些页面会导致 500 错误：

```
org.apache.jasper.JasperException: Unable to compile class for JSP 
```

根本原因是：

```
java.lang.NullPointerException
java.util.Hashtable.put(Hashtable.java:396)
org.apache.jasper.compiler.Generator$TagHandlerInfo.<init>(Generator.java:3737)
org.apache.jasper.compiler.Generator$GenerateVisitor.getTagHandlerInfo(Generator.java:2130)
org.apache.jasper.compiler.Generator$GenerateVisitor.visit(Generator.java:1599)
org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1441)
org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2163)
org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2213)
org.apache.jasper.compiler.Generator$GenerateVisitor.visit(Generator.java:1705)
org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1441)
org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2163)
org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2213)
org.apache.jasper.compiler.Generator$GenerateVisitor.visit(Generator.java:1705)
org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1441)
org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2163)
org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2213)
org.apache.jasper.compiler.Generator$GenerateVisitor.visit(Generator.java:1705)
org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1441)
org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2163)
org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2213)
org.apache.jasper.compiler.Generator$GenerateVisitor.visit(Generator.java:1705)
org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1441)
org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2163)
org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2213)
org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2219)
org.apache.jasper.compiler.Node$Root.accept(Node.java:456)
org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2163)
org.apache.jasper.compiler.Generator.generate(Generator.java:3320)
org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:198)
org.apache.jasper.compiler.Compiler.compile(Compiler.java:295)
org.apache.jasper.compiler.Compiler.compile(Compiler.java:276)
org.apache.jasper.compiler.Compiler.compile(Compiler.java:264)
org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:563)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:305)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:314)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:264)
javax.servlet.http.HttpServlet.service(HttpServlet.java:810)
sun.reflect.GeneratedMethodAccessor385.invoke(Unknown Source)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
java.lang.reflect.Method.invoke(Method.java:592)
org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:243)
java.security.AccessController.doPrivileged(Native Method)
javax.security.auth.Subject.doAsPrivileged(Subject.java:517)
org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:275)
org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:161)
java.security.AccessController.doPrivileged(Native Method)
atg.servlet.pipeline.TailPipelineServlet.service(TailPipelineServlet.java:90)
atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:116)
atg.servlet.pipeline.DispatcherPipelineServletImpl.service(DispatcherPipelineServletImpl.java:202)
atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:116)
atg.servlet.http.CookieBufferServlet.service(CookieBufferServlet.java:97)
atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:116)
atg.userprofiling.ExpiredPasswordServlet.service(ExpiredPasswordServlet.java:356)
atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:116)
atg.servlet.pipeline.MimeTyperPipelineServlet.service(MimeTyperPipelineServlet.java:206)
atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:116)
atg.droplet.DropletEventServlet.service(DropletEventServlet.java:565)
atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:116)
atg.servlet.sessionsaver.SessionSaverServlet.service(SessionSaverServlet.java:2442)
atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:116)
atg.commerce.order.CommerceCommandServlet.service(CommerceCommandServlet.java:128)
atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:116)
atg.commerce.promotion.PromotionServlet.service(PromotionServlet.java:191)
atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:116)
atg.userprofiling.AccessControlServlet.service(AccessControlServlet.java:602)
atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:116)
atg.userprofiling.PageEventTriggerPipelineServlet.service(PageEventTriggerPipelineServlet.java:169)
atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:116)
atg.userprofiling.SessionEventTrigger.service(SessionEventTrigger.java:461)
atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:116)
atg.userprofiling.ProfileRequestServlet.service(ProfileRequestServlet.java:477)
atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:116)
atg.servlet.pipeline.DynamoPipelineServlet.service(DynamoPipelineServlet.java:469)
atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:116)
atg.servlet.pipeline.PathAuthenticationPipelineServlet.service(PathAuthenticationPipelineServlet.java:370)
atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:116)
atg.userprofiling.sso.PassportServlet.service(PassportServlet.java:561)
atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:116)
atg.servlet.security.ThreadUserBinderServlet.service(ThreadUserBinderServlet.java:91)
atg.servlet.pipeline.PipelineableServletImpl.passRequest(PipelineableServletImpl.java:116)
atg.servlet.pipeline.HeadPipelineServlet.passRequest(HeadPipelineServlet.java:1099)
atg.servlet.pipeline.HeadPipelineServlet.service(HeadPipelineServlet.java:781)
atg.servlet.pipeline.PipelineableServletImpl.service(PipelineableServletImpl.java:231)
atg.filter.dspjsp.PageFilter.doFilter(Unknown Source)
sun.reflect.GeneratedMethodAccessor412.invoke(Unknown Source)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
java.lang.reflect.Method.invoke(Method.java:592)
org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:243)
java.security.AccessController.doPrivileged(Native Method)
javax.security.auth.Subject.doAsPrivileged(Subject.java:517)
org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:275)
org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:217)
java.security.AccessController.doPrivileged(Native Method)
com.quebecor.commerce.filter.OpenSessionFilter.doFilter(OpenSessionFilter.java:49)
sun.reflect.GeneratedMethodAccessor411.invoke(Unknown Source)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
java.lang.reflect.Method.invoke(Method.java:592)
org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:243)
java.security.AccessController.doPrivileged(Native Method)
javax.security.auth.Subject.doAsPrivileged(Subject.java:517)
org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:275)
org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:217)
java.security.AccessController.doPrivileged(Native Method)
org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
sun.reflect.GeneratedMethodAccessor410.invoke(Unknown Source)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
java.lang.reflect.Method.invoke(Method.java:592)
org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:243)
java.security.AccessController.doPrivileged(Native Method)
javax.security.auth.Subject.doAsPrivileged(Subject.java:517)
org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:275)
org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:217) 
```

*   这不会在可重复的基础上发生。在夜间，错误有时会消失。
*   有时，只需重新启动服务器（无需重新部署）就会导致错误消失。
*   在部署之间，发生错误的页面可能会发生变化。
*   这不会发生在开发机器上，但会发生在每晚构建和预生产环境中。因为在dev中不会出现，所以无法直接调试...
*   在我们的 nightly 和 pre-prod 部署中，work 和 tmp 文件夹在每次部署时都被完全清空。

我们正在使用 JBoss 4.0.5.GA 和 Java 1.5.0_11。我们还使用 Tiles 2.0.6 和 ATG 电子商务框架 2007.1。我们没有升级、替换或删除我们的任何项目依赖项。

有趣的是，这只发生在我们网站的一个新部分中，我们基于新的独立 Tiles 模板从头开始开发了一组新的 JSP。该网站的现有部分不显示任何这些错误。

我尝试使用 JSPC 预编译 JSP 页面（使用此处的说明：http: [//tomcat.apache.org/tomcat-5.5-doc/jasper-howto.html#Web%20Application%20Compilation](http://tomcat.apache.org/tomcat-5.5-doc/jasper-howto.html#Web%20Application%20Compilation)）。所有页面都编译成功。

我有点不知所措。以前有人见过这个错误吗？任何提示或想法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:56:39.340

经过调查，编译问题似乎与瓦片库中某个标签上的标签 getter/setter 类型不匹配有关。

升级到瓷砖 2.0.7 后，问题似乎已解决。

jasper 编译机制（至少在那个版本的 tomcat 中）使用 java.beans.Introspector。getXXX 和 setXXX 之间的类型不匹配可能会扰乱自省过程。

几年前，tile 开发团队解决了这个问题，在 [https://issues.apache.org/jira/browse/TILES-276上阅读更多相关信息](https://issues.apache.org/jira/browse/TILES-276)

# installation - Wix WebApplicationExtension 防止卸载 WebApplication

> ID：12680333
> 
> 赞同：1
> 
> 时间：2012-10-01T20:11:01.353
> 
> 标签：installation, wix, windows-installer, wix3.5

我正在 IIS 中安装 WebApplication。安装运行正常，但是当我尝试卸载我的产品时，WebApplication 留在了 IIS 中。所有文件都已删除，但 WebApp 仍显示在 IIS 管理器控制台中。这是我的组件代码：

```
<!-- WebServices Virtual Directory -->
<Component Id="IWSVirtualDirectory" Guid="{XXXX...}" DiskId="1" KeyPath="yes" Win64="no">
    <!-- Virtual directory -->
      <iis:WebVirtualDir Id="IWSWebVirtualDirectory" Alias="[IWS_VIRTUAL_DIRECTORY_NAME]" Directory="MyWebServices" WebSite="IWSTargetWebSite">
         <!-- Web Application -->
         <iis:WebApplication Id="IWSWebApplication" Name="MyWebServices-$(var.MAJOR).$(var.MINOR).3" WebAppPool="IWSWebAppPool">
            <!-- ISAPI filter -->
            <iis:WebApplicationExtension Extension="dll" CheckPath="yes" Script="yes" Executable="[#FTIRWWSIsapi_dll]" Verbs="GET,HEAD,POST" />
            <iis:WebApplicationExtension Extension="srf" CheckPath="yes" Script="yes" Executable="[#FTIRWWSIsapi_dll]" Verbs="GET,HEAD" />
         </iis:WebApplication>
        <!-- Properties -->
        <iis:WebDirProperties Id="IWSWebDirProperties" Read="yes" LogVisits="yes" Index="yes" Script="yes" Execute="no" DefaultDocuments="FTIRWWS.htm" BasicAuthentication="no" PassportAuthentication="no" DigestAuthentication="no" IIsControlledPassword="no" WindowsAuthentication="yes" />
      </iis:WebVirtualDir>                               
    </Component> 
```

编辑：奇怪的是，如果我删除这两个`<iis:WebApplicationExtension />`只是将处理程序映射到应用程序要服务的文件扩展名的两个，则实际上删除了 WebApplication。为什么处理程序映射会阻止 WebApplication 被卸载？除了 Windows Installer 日志之外，是否有任何日志可以检查正在发生的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:36:50.393

您用于定义虚拟目录别名（应用程序名称）的属性在卸载时未正确设置。当您运行安装时，您可能会以`IWS_VIRTUAL_DIRECTORY_NAME`某种方式设置（询问用户、一些逻辑等）但是在卸载时，此属性没有设置，并且 WiX 在卸载时找不到要删除的虚拟目录。

这是人们容易犯的一个常见错误。你必须以`IWS_VIRTUAL_DIRECTORY_NAME`某种方式存储价值。最著名的方法[由 Rob Mensching 描述，称为“记住属性”模式](http://robmensching.com/blog/posts/2010/5/2/The-WiX-toolsets-Remember-Property-pattern)。按照那篇文章中的建议，您将能够在安装和卸载之间存储属性。

# php - 使用 strtotime 和 date 的不一致数据和错误答案

> ID：12680340
> 
> 赞同：2
> 
> 时间：2012-10-01T20:11:45.743
> 
> 标签：php, date, strtotime

使用 PHP 5.3 并给出字符串`Sat, 20 Oct 2012 05:00:00 GMT`：

```
print $start;
$start = strtotime($start);
var_dump($start);
$hour = date('H:i A', $start);
die($hour); 
```

我的程序中的那段代码返回了这个：

```
Sat, 20 Oct 2012 05:00:00 GMT
int(1350709200)
00:00 AM 
```

是正确的`var_dump`，但日期返回一个错误的答案。

另请注意，将该片段更改为：

```
print $start;
$start = strtotime($start);
die($start);
$hour = date('H:i A', $start);
die($hour); 
```

返回：

```
Sat, 20 Oct 2012 05:00:00 GMT 
```

第一个骰子返回一个空字符串，一个空值，我只能假设它实际上是一个布尔值 FALSE。

所以我实际上有两个不同的问题，在这里。根据我是否`var_dump`死亡，相同的答案会返回两个不同的东西，第二个是该日期似乎收到了错误的答案，而不是`var_dump`答案。

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:32:57.007

正如您所说，您将时区设置为美国/芝加哥。当您调用 strtotime 时，您在字符串中明确指定 GMT。然后，当您将时间戳放入日期时，它会获取时间戳并在格林威治标准时间前 5 小时为您提供美国/芝加哥的时间，这就是为什么它是上午 00:00。

您正在使用 5.3。我建议使用[DateTime](http://uk.php.net/manual/en/class.datetime.php)对象而不是 strtotime() 和 date()。使用时区等更容易一些，并且 var_dumps 很有用。从用户输入或数据库值创建一个 DateTime，然后在代码中传递它而不是时间戳。

# c# - 如何通过反射在单个调用中同时获取字段和属性？

> ID：12680341
> 
> 赞同：23
> 
> 时间：2012-10-01T20:11:47.620
> 
> 标签：c#, reflection

如果这在某处被覆盖，我深表歉意。发帖前我做了研究！

好的，所以问题...我正在使用 GetType( ).GetProperties，但它没有返回简单的实例字段，它们没有获取/设置...所以我使用了 .GetFields，它可以找到它们，但我想获得一个简单的单个对象来获取/设置一个值而不在字段和属性之间翻转......这可能吗？

我当前的代码适用于 PropertyInfo，效果很好，但这不适用于我猜的字段？

[编辑] **这是我想出的解决方案，效果很好。感谢大家....**

```
 // some logic borrowed from James Newton-King, http://www.newtonsoft.com
    public static void SetValue(this MemberInfo member, object property, object value)
    {
        if (member.MemberType == MemberTypes.Property)
            ((PropertyInfo)member).SetValue(property, value, null);
        else if (member.MemberType == MemberTypes.Field)
            ((FieldInfo)member).SetValue(property, value);
        else
            throw new Exception("Property must be of type FieldInfo or PropertyInfo");
    }

    public static object GetValue(this MemberInfo member, object property)
    {
        if (member.MemberType == MemberTypes.Property)
            return ((PropertyInfo)member).GetValue(property, null);
        else if (member.MemberType == MemberTypes.Field)
            return ((FieldInfo)member).GetValue(property);
        else
            throw new Exception("Property must be of type FieldInfo or PropertyInfo");
    }

    public static Type GetType(this MemberInfo member)
    {
        switch (member.MemberType)
        {
            case MemberTypes.Field:
                return ((FieldInfo)member).FieldType;
            case MemberTypes.Property:
                return ((PropertyInfo)member).PropertyType;
            case MemberTypes.Event:
                return ((EventInfo)member).EventHandlerType;
            default:
                throw new ArgumentException("MemberInfo must be if type FieldInfo, PropertyInfo or EventInfo", "member");
        }
    } 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-01T20:20:03.453

怎么样：

```
const BindingFlags bindingFlags = BindingFlags.Public | BindingFlags.Instance;
MemberInfo[] members = type.GetFields(bindingFlags).Cast<MemberInfo>()
    .Concat(type.GetProperties(bindingFlags)).ToArray(); 
```

或者，像[FastMember](http://nuget.org/packages/FastMember)这样的库将与字段或属性一起愉快地工作，无论成员类型如何，get/set 都相同。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-01T20:15:50.387

您似乎已经注意到，GetProperties() 和 GetFields() 的返回类型不同。您必须使用 GetValue() 和 SetValue() 定义一个接口，并使用扩展 ParameterInfo 和 FieldInfo 来实现此接口。这可能会用作包装器：

```
interface IGetSettable
{
    public void SetValue(
        Object obj,
        Object value,
        Object[] index);
    public Object GetValue(
        Object obj,
        Object[] index);
}

public class ParameterInfoGS : IGetSettable
{
    protected ParameterInfo pi;

    public ParameterInfoExtra(ParameterInfo _pi)
    {
        pi = _pi;
    }

    public void SetValue(
        Object obj,
        Object value,
        Object[] index) {pi.SetValue(obj, value, index);}
    public Object GetValue(
        Object obj,
        Object[] index) {return pi.GetValue(obj, index);}
}

public class FieldInfoGS : IGetSettable
{
    protected FieldInfo pi;

    public FieldInfoExtra(FieldInfo _pi)
    {
        pi = _pi;
    }

    public void SetValue(
        Object obj,
        Object value,
        Object[] index) {pi.SetValue(obj, value, index);}
    public Object GetValue(
        Object obj,
        Object[] index) {return pi.GetValue(obj, index);}
}

public static class AssemblyExtension
{
    public static IGetSettable[] GetParametersAndFields(this Type t)
    {
        List<IGetSettable> retList = new List<IGetSettable>();

        foreach(ParameterInfo pi in t.GetParameters())
            retList.Add(new ParameterInfoExtra(pi));

        foreach(FieldInfo fi in t.GetFields())
            retList.Add(new FieldInfoExtra(fi));

        return retList.ToArray();
    }
} 
```

这将允许您这样做`GetType().GetParametersAndFields()`（即使用标准反射类型）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-12-11T09:26:15.673

有点晚了，但我想出了以下...... 1个循环，就像一个魅力;-)

```
 MemberInfo[] memberInfos = dotNetType.GetMembers();
        ModelPropertySpec modelPropertySpec;
        foreach (MemberInfo memberInfo in memberInfos)
        {
            Type itemType = null;
            String memberName = memberInfo.Name;
            switch (memberInfo.MemberType)
            {
                case MemberTypes.Property:
                    itemType = dotNetType.GetProperty(memberName).PropertyType;
                    break;
                case MemberTypes.Field:
                    itemType = dotNetType.GetField(memberName).FieldType;
                    break;
            }

            if (itemType != null)
            {
                modelPropertySpec = ParsePropertyType(memberName, itemType);
                modelSpec.Properties.Add(modelPropertySpec.Name, modelPropertySpec);
            }
        } 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-05-01T14:55:45.653

要获取属性或字段，您可以说：

```
var q=
    from it in type.GetMembers(bindingAttr)
    where it is PropertyInfo||it is FieldInfo
    select it; 
```

`bindingAttr`可能在哪里

```
var bindingAttr=
        BindingFlags.NonPublic|
        BindingFlags.Public|
        BindingFlags.Instance; 
```

`BindingFlags.NonPublic`如果您不想获得非公共成员，请删除。顺便说一句，查询不是单个**调用**，而是单个**语句**。

* * *

要在不自行转换的情况下获取属性或字段的值，请使用`InvokeMember`以下技巧：

```
static object GetValue<T>(
        T x, object target) where T:MemberInfo {
    var invokeAttr=(
            x is FieldInfo
                ?BindingFlags.GetField
                :x is PropertyInfo
                    ?BindingFlags.GetProperty
                    :BindingFlags.Default)|
            BindingFlags.NonPublic|
            BindingFlags.Public|
            BindingFlags.Instance;

    return target.GetType().InvokeMember(
        x.Name, invokeAttr, default(Binder), target, null);
} 
```

同样，要设置值：

```
static void SetValue<T>(
        T x, object target, object value) where T:MemberInfo {
    var args=new object[] { value };
    var invokeAttr=(
            x is FieldInfo
                ?BindingFlags.SetField
                :x is PropertyInfo
                    ?BindingFlags.SetProperty
                    :BindingFlags.Default)|
            BindingFlags.NonPublic|
            BindingFlags.Public|
            BindingFlags.Instance;

    target.GetType().InvokeMember(
        x.Name, invokeAttr, default(Binder), target, args);
} 
```

如果你传递一个`MemberInfo`非`PropertyInfo`或`FieldInfo`作为第一个参数，它会抛出，因为`BindingFlags.Default`没有指定你要做什么。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-01T20:19:23.800

使用 DLR（很简单，如果您在编译时知道成员名称）：

```
((dynamic)obj).MyFieldOrPropertyName = myValue; 
```

如果您只知道*run-time*的成员名称，我会推荐[FastMember](http://nuget.org/packages/FastMember)，正如 Marc Gravell 所建议的那样。

# regex - 解析配置文件

> ID：12680346
> 
> 赞同：0
> 
> 时间：2012-10-01T20:11:55.530
> 
> 标签：regex, bash, sed, grep

我想用单引号得到第一个模式。

```
$ cat test 
if (response == 'good' and name == 'john') 
```

使用此命令，我得到单引号中的最后一个模式：

```
$ sed -nr "s/.*'(.*)'.*/\1/p" test
john 
```

我希望它返回

> 好的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:19:05.453

以下应该可以解决问题

```
sed -nr "s/[^']*'([^']*)'.*/\1/p" test 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:40:52.573

有几种方法可以实现这一点。例如`awk`：

```
awk -F"'" '{print $2}' 
```

或`Perl`：

```
perl -ne 'print "$1\n" if /'"'"'(.*?)'"'"'/;' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:49:56.443

使用这个概念

```
sed "s/^[a-z].* ([a-z].*== '\([a-z].*\)' [a-z].*== '\([a-z].*\)')$/\1/" inputfile 
```

# asp.net - ASP .Net 文件上传最大请求长度超出错误

> ID：12680347
> 
> 赞同：8
> 
> 时间：2012-10-01T20:11:59.310
> 
> 标签：asp.net, file-upload, iis-7, sitecore, sitecore6

我在页面上有一个简单的 ASP .Net 文件上传控件。我有以下 web.config 设置

```
<system.webServer>
      <security>
      <requestFiltering>
        <requestLimits maxAllowedContentLength="524288000" />
      </requestFiltering>
    </security>
 </system.webServer>

    <system.web>
      <httpRuntime maxRequestLength="524288" executionTimeout="120000" />
    </system.web> 
```

我在开发盒上使用 IIS 7.5，在 Web 服务器上使用 IIS 7。

如果我上传大小为 7MB 的文件，它工作正常。

但是当我上传 10MB 的文件时，它会抛出以下异常

我在页面上有一个简单的 ASP .Net 文件上传控件。我有以下`web.config`设置

```
Exception Details: System.Web.HttpException: Maximum request length exceeded.

Stack Trace:     

[HttpException (0x80004005): Maximum request length exceeded.]
   System.Web.HttpRequest.GetEntireRawContent() +8772610
   System.Web.HttpRequest.GetMultipartContent() +62
   System.Web.HttpRequest.FillInFormCollection() +168
   System.Web.HttpRequest.get_Form() +68
   System.Web.TraceContext.InitRequest() +910
   System.Web.TraceContext.VerifyStart() +143
   System.Web.HttpApplication.AssignContext(HttpContext context) +118
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +464 
```

任何帮助将不胜感激。我知道这个问题已经被问过很多次了，但是这些解决方案都不适合我。

我们正在使用 Sitecore 内容管理系统。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T20:22:31.913

您的 maxRequestLength 设置为过大的 512 MB。尝试将其设置为 12MB。

如果是 IIS 阻塞，请尝试将其设置为非应用程序级别；而是在文件夹中创建一个 Web.Config。

更多信息在这里：

[http://weblogs.asp.net/jgalloway/archive/2008/01/08/large-file-uploads-in-asp-net.aspx](http://weblogs.asp.net/jgalloway/archive/2008/01/08/large-file-uploads-in-asp-net.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T13:19:12.193

我终于解决了。当我们使用 Sitecore 时，我们将页面作为特定路径的内容树上的一个项目。现在我们还有一些驻留在文件系统上的旧页面。这些驻留在文件系统上的页面有自己的本地 web.config 文件，该文件具有有限的最大请求长度。此设置在上传大文件时会产生问题。

谢谢大家的帮助。

# html - li 元素背景颜色和溢出滚动

> ID：12680352
> 
> 赞同：0
> 
> 时间：2012-10-01T20:12:16.423
> 
> 标签：html, css, html-lists

我创建了一个简单的 html 源代码，并对其应用了一个小的 CSS 样式表：

```
html {
    width: 100%;
}
body {
    font-family: Calibri, Tahoma, Geneva, sans-serif;
    padding: 20px;
}
pre {
    padding: 0;
    margin: 0 auto;
    border: 1px solid #888; 
    font-family: Menlo,Monaco,Consolas,monospace;
    color: #000;
    width: 80%;
    overflow: auto; 
}
pre li { white-space: pre; }

ol { margin-top: 0; margin-bottom: 0;  /* IE indents via margin-left */
     color: #979797; background: #E3E3E3; }
.li1 { background: #F5F5F5 }
.li2 { background: #eee } 
```

我在预先格式化的标签中有一个有序列表。每个其他列表元素要么被赋予类属性，要么被赋予`li1`（`li2`其目的是交替颜色）。列表元素需要 ，`white-space: pre`因为文本节点前后的空格很重要。这`pre`是包含元素的 80%（最终是窗口宽度的 80%）。在 x 维度溢出的情况下，我想要滚动。

我在上面的 CSS 中做了所有这些，它*几乎*可以工作。我遇到的问题是列表元素的背景颜色不随内容扩展。它们似乎被限制为`pre`和/或 ol的原始宽度，`element`如下图所示，我尽可能向右滚动：

![列表元素背景颜色不扩展](../Images/2332be2567b8c357fc4399c94e718a71.png)

我对 CSS 进行了一段时间的修改，但我无法确定此问题的根本原因或修复方法。求这方面的建议，谢谢。

该问题的完整来源如下，注意：对于以下代码的潜在编辑者，该`pre`元素旨在位于一行上，因为它是预先格式化的文本，否则对其进行格式化会改变事情。

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Test Site</title>
    <style type="text/css">
    html {
    width: 100%;
    }
    body {
        font-family: Calibri, Tahoma, Geneva, sans-serif;
        padding: 20px;
    }
    pre {
        padding: 0;
        margin: 0 auto;
        border: 1px solid #888; 
        font-family: Menlo,Monaco,Consolas,monospace;
        color: #000;
        width: 80%;
        overflow: auto; 
    }
    pre li { white-space: pre; }

    ol { margin-top: 0; margin-bottom: 0;  /* IE indents via margin-left */
         color: #979797; background: #E3E3E3; }
    .li1 { background: #F5F5F5 }
    .li2 { background: #eee }
    </style>
</head>

<body>

<pre class="php"><ol><li class="li1">pre a &#123; text-decoration: none &#125;</li><li class="li2">pre a:hover &#123; background: #C8C8C8 }</li><li class="li1">pre li &#123; white-space: pre; &#125;</li><li class="li2">&nbsp;</li><li class="li1">.php ol &#123; margin-top: 0; margin-bottom: 0;  /* IE indents via margin-left */</li><li class="li2">          color: #979797; background: #E3E3E3; }</li><li class="li1">&nbsp;</li><li class="li2">&nbsp;</li><li class="li1">&nbsp;</li><li class="li2">.php .li1 &#123; background: #F5F5F5 }</li><li class="li1">.php .li2 &#123; background: #eee }</li><li class="li2">&nbsp;</li><li class="li1">&nbsp;</li><li class="li2">.php .st0  &#123; color: #C0C } /* string content */</li><li class="li1">.php .st_h &#123; color: #F0C } /* string content single quoted */</li><li class="li2">.php .sy0  &#123; color: #000 } /* semi-colon, operators */ </li><li class="li1">.php .br0  &#123; color: #000 } /* parens */</li><li class="li2">.php .kw2  &#123; color: #00F } /* php tags */</li><li class="li1">.php .sy1  &#123; color: #00F } /* php tags */</li><li class="li2">.php .nu0  &#123; color: #F00 } /* numbers */</li><li class="li1">.php .kw3  &#123; color: #096 } /* core language functions */</li><li class="li2">.php .re0  &#123; color: #09F; font-weight: bold; } /* variables */</li><li class="li1">.php .kw1  &#123; color: #069; font-weight: bold; } /* control statements? */</li><li class="li2">.php .kw4  &#123; color: #069; font-weight: bold; } /* bool? */</li><li class="li1">.php .co1  &#123; color: #FF8400 } /* Forward slash comments */</li></ol></pre>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:11:19.790

pre 固定为 80%，因此备用颜色停在那里，我们可以使用以下样式将 li 扩展到最后。

```
 .li1 { background: #F5F5F5;width:200%; }
    .li2 { background: #eee;width:200%; } 
```

[**演示**](http://jsfiddle.net/947Pd/4)

# javascript - 在调用 apply 之前是否需要将参数转换为数组？

> ID：12680356
> 
> 赞同：5
> 
> 时间：2012-10-01T20:12:26.317
> 
> 标签：javascript, arrays, arguments, apply

是否有任何浏览器限制或任何其他问题阻止我这样做：

```
fn.apply(this, arguments); 
```

相对：

```
fn.apply(this, Array.prototype.slice.call(arguments)); 
```

我知道这`apply`需要一个“真”`Array`作为第二个参数，但传递一个参数集合似乎同样有效。或者...？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T20:17:28.917

根据[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)，它“使用给定的 this 值和作为数组（或类似对象的数组）提供的参数调用函数”。鉴于这`arguments`是一个类似数组的对象，使用它不应该有任何限制。

事实上，[描述中](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply#Description)明确表示`arguments`是一个有效参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-17T01:08:11.237

# MDN 上的支持是[未知的。](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply#compat-desktop)

已知只有 Firefox 接受 . 的第二个参数的类数组对象`Function.prototype.apply()`。在直接通过之前我会谨慎行事`arguments`。

# c# - 如何从 appdomain B 访问 appdomain A 中的静态类？

> ID：12680358
> 
> 赞同：1
> 
> 时间：2012-10-01T20:12:43.773
> 
> 标签：c#, c#-4.0

我遇到了这样一种情况，即我在 appdomain A 中使用的单例静态类需要从 appdomain B 访问。我已经尝试将具有包装单例的属性的可序列化对象传递给 appdomain B，但这只是重新创建appdomain B 中的单身人士。我真的不太熟悉 appdomains 之间的通信方式。是否有一些远程处理库实际上确保代码在 appdomain A 内执行，同时从 appdomain B 调用？有人可以在这里指出正确的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:56:07.693

我最终从 appdomain B 向 appdomain A 触发了一个事件，并在 appdomain A 的事件处理程序中调用了单例。远程处理都是自动的。我遇到的几个问题是我使用的远程代理对象默认在 5 分钟后过期（必须将过期时间设置为更长的时间）以及事件处理程序所在的 appdomain A 中的类必须从 MarshalByRefObject 或否则代码实际上是在 appdomain B 中执行的（即使它在 appdomain A 类中）。

# mysql - Javafx 捆绑 mysql 驱动程序

> ID：12680359
> 
> 赞同：1
> 
> 时间：2012-10-01T20:12:49.607
> 
> 标签：mysql, jar, driver, bundle, exe

*大家好你们好，*

我有本教程的其他步骤：http: [//www.blueskyworkshop.com/topics/Java-Pages/javafx-win-installer/](http://www.blueskyworkshop.com/topics/Java-Pages/javafx-win-installer/)

使用**NetBeans 7.2**创建 Windows Native Installer 和**EXE**到我的**JavaFx 2.2**应用程序。我使用了 InnoSetup，安装程序创建成功。我的应用程序使用**MySql**作为 SGBD，它使用corse**的 mysql 的驱动程序连接器，**当我编译我的应用程序时，它包含在**dist/lib中。**

 ********但是**当我使用新的安装程序安装我的应用程序时，驱动程序不包含在文件夹“lib”中，而是直接与 jar 文件位于同一文件夹中，因此 jar**找不到驱动程序**。

我的问题是如何修改**build.xml**以便安装程序可以像基本目录一样尊重基本层次结构。

*谢谢，*******

# php - 我的php代码很慢，出现超时错误

> ID：12680361
> 
> 赞同：1
> 
> 时间：2012-10-01T20:12:58.220
> 
> 标签：php

我有一个足球幻想联盟脚本，每周我都会使用以下代码向用户添加一个积分：

```
$sql_user="select * from ".$prev."user ";

$re_user=mysql_query($sql_user);
while($d_user=mysql_fetch_array($re_user))
{
$userID=$d_user['id'];

$sql_addpointgroup="select * from ".$prev."addpoint group by weekno order by weekno";
$re_addpointgroup=mysql_query($sql_addpointgroup);
while($d_addpointgroup=mysql_fetch_array($re_addpointgroup))
{       
  $points=0;
  $sql_addpoint="select * from ".$prev."addpoint where weekno='".$d_addpointgroup['weekno']."'";
  $re_addpoint=mysql_query($sql_addpoint);
  while($d_addpoint=mysql_fetch_array($re_addpoint))
  {
    $points=$d_addpoint['points'];
    $sql_weekstatistic="select * from ".$prev."weekstatistic where weekno='".$d_addpointgroup['weekno']."' and userID='$userID' and playerID='".$d_addpoint['playerID']."'";
    $re_weekstatistic=mysql_query($sql_weekstatistic);
    if(mysql_num_rows($re_weekstatistic)>0)
    {
        $sql_update="update ".$prev."weekstatistic set points='$points' where weekno='".$d_addpointgroup['weekno']."' and userID='$userID' and playerID='".$d_addpoint['playerID']."'";

        mysql_query($sql_update);
    }
  }
}   
} 
```

一开始这段代码运行良好，但注册用户数达到 500 个用户后，现在更新过程非常缓慢，并且有时会出现超时错误消息。

有没有办法重写这段代码，以便更快地完成更新过程？

提前谢谢了，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:22:24.347

嵌套循环意味着您可以轻松地运行数千个查询来获取您想要的数据。请尝试`join`：

```
SELECT * FROM (SELECT * FROM addpoint GROUP BY weekno ORDER BY weekno) AS a JOIN addpoint USING weekno 
```

使用该查询，您可以只循环一个结果数组。

至于更新，这是您可以使用的快捷方式。但是，只有`weekno`在表上定义为唯一索引时才能使用它。

```
INSERT INTO weekstatistic (weekno,points) VALUES {$vals} ON DUPLICATE KEY UPDATE points=VALUES(points) 
```

`{$vals}`应该是以逗号分隔的 weekno/points 值列表：

```
$tmp = Array();
// build an array like so:
$tmp[] = "('".$weekno."','".$points."')";
// at the end of the loop:
$vals = implode(",",$tmp);
// now run the query. 
```

理想情况下，您只需两个查询即可完成所有操作。

# jquery - FancyBox 在自己的页面上打开图像

> ID：12680364
> 
> 赞同：0
> 
> 时间：2012-10-01T20:13:01.083
> 
> 标签：jquery, fancybox

我已经尝试了针对此问题发布的其他几个答案，但我仍然无法弄清楚。

[这是有问题的网站](http://ryansamul.com/dark/gallery-subject-new.html)。

我承认除了 HTML 和我自己破译的内容之外没有真正的编程经验。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:14:52.070

那是因为你实际上没有正确地包含fancybox。

访问您的网站时出现以下 404 错误：

```
'http://ryansamul.com/dark/fancy/source/helpers/jquery.fancybox-buttons.css?v=1.0.3'
'http://ryansamul.com/dark/fancy/source/helpers/jquery.fancybox-thumbs.css?v=1.0.6'
'http://ryansamul.com/dark/fresco/css/fresco/fresco.css'
'http://ryansamul.com/dark/fancy/source/jquery.fancybox.css?v=2.1.0'
'http://ryansamul.com/dark/js/swfsubject/swfsubject.js'
'http://ryansamul.com/dark/fresco/js/fresco/fresco.js' 
```

也许您忘记将这些文件上传到您的服务器？或者路径错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T00:43:23.420

在您的[custom.js](http://ryansamul.com/dark/js/custom.js)文件中，您`jQuery.noConflict()`用于初始化函数：

```
jQuery.noConflict()(function($){
 //.... 
}); 
```

...到目前为止一切都很好，但是在您的主页中，您的fancybox初始化没有使用`jQuery.noConflict()`

```
<script type="text/javascript">
 $(document).ready(function() {
  $(".fancybox-thumb").fancybox();
 });
</script> 
```

...所以像这样修改它应该可以解决问题：

```
<script type="text/javascript">
 jQuery(document).ready(function() {
   jQuery(".fancybox-thumb").fancybox();
 });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T08:55:24.313

在新标签页中打开的照片有一个`class="portfolio-item-preview"`而不是`class="fancybox-thumb"`. 更改此设置将使 fancybox 在所有元素上正确初始化。

# python - 网站如何安全地托管和执行用户代码

> ID：12680368
> 
> 赞同：1
> 
> 时间：2012-10-01T20:13:19.713
> 
> 标签：python

网站和其他网络服务（例如 Google App Engine 或 WordPress 等）如何安全地允许人们上传他们想要的任何代码，而不会定期受到用户代码的损害？我正在研究一个项目，该项目基本上使用 Python 中更复杂的“Eval()”实现来执行用户上传的代码。我正在考虑尝试安全地做到这一点，而不是托管代码，而是让开发人员托管代码，我可以像 api 一样访问它？或者可能必须全部批准（就像他们在应用商店中所做的那样）。

无论如何，只是换个说法，我怎样才能安全地托管和执行用户上传的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:10:17.180

Python interåreter 过去将沙盒作为功能目标。然而，它对 Python 来说并不是很好。

剩下的就是 RestrictedPython（部署在 Plone 网站上）：

[http://pypi.python.org/pypi/RestrictedPython](http://pypi.python.org/pypi/RestrictedPython)

它基本上是一个 eval() 在执行之前修改 Python AST。对少数行脚本有用，对实际应用程序开发无用。

但是，如果我是你，我不会尝试在虚拟机级别创建沙盒。相反，我会创建jailed / chrooted UNIX 进程，这些进程对所有内容（磁盘、网络等）具有只读访问权限，并且执行时间过长会导致终止超时。这几乎就是 App Engine 的工作方式。

# c# - C#系统服务配置最佳实践

> ID：12680374
> 
> 赞同：1
> 
> 时间：2012-10-01T20:14:03.417
> 
> 标签：c#, configuration

系统服务从 C:\Windows\System32 目录运行它们的 EXE，因此如果我想让我的服务加载配置文件，我需要将配置文件放在 System32 目录中，这感觉不太对劲。我对 System32 的理解是，它只能通过系统实用程序来接触，而不是应用程序放置其支持文件的地方。C# 系统服务如何加载配置文件是否有最佳实践？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:32:46.077

无需在 System32 目录中放置 windows 服务配置文件。事实上，如果您创建新的 Windows 服务项目并添加项目属性/设置 (AssemblyName.exe.config)，此配置文件将放置在安装路径中（服务安装程序的默认设置）。

我相信安装路径是配置文件的最佳位置。

配置文件可以通过您自己的设置类型轻松扩展。看看我的一个答案：

[自定义配置部分](https://stackoverflow.com/questions/12676374/custom-configuration-section/12677402#12677402)

# mocking - Vala 的模拟库

> ID：12680375
> 
> 赞同：5
> 
> 时间：2012-10-01T20:14:10.903
> 
> 标签：mocking, vala

我想使用模拟对象编写单元测试，例如C# 的[Moq](http://code.google.com/p/moq/)或[NSubstitute](http://nsubstitute.github.com/)。任何人都可以推荐一个与 Vala 一起使用的模拟库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T12:36:50.757

因为 Vala 生成 C 代码（使用 GObject 库），所以您可以使用 C 模拟库，如[test-dept](https://code.google.com/p/test-dept/)。

# ios - viewDidLoad 中的边界和帧大小

> ID：12680377
> 
> 赞同：2
> 
> 时间：2012-10-01T20:14:22.530
> 
> 标签：ios, cocoa-touch, uiview, uiviewcontroller, bounds

我推送一个视图控制器 ( `mainVC`) 并向其中添加一些子视图。当用户采取一些行动时，大多数这些视图都是按需构建的。

当我构建每个视图时，我指`mainVC.view.bounds`的是视图的大小。根据需求大小构建的那些很好，但第一个（我添加`viewDidLoad`）似乎没有考虑隐藏的导航栏或未隐藏的工具栏 - 我不确定是哪个。

其他问题似乎向我保证 viewDidLoad 是引用边界和添加这些子视图的正确位置。我被误导了吗？日志记录产生以下结果：

`viewDidLoad`边界高度为 548 。

`viewWillAppear`边界高度为 460 (-44 x 2) 。在`viewWillAppear`我隐藏导航栏，但前后高度相同。

在以后的所有时间，边界高度都是 504 (-44 x 1)。

为什么在我尝试阅读时边界高度没有更新`viewDidLoad`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T00:59:38.140

视图控制器生命周期在[iOS 视图控制器编程指南中](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html)描述。

总之，什么时候`-view`叫第一次，什么时候`-viewDidLoad`叫。即使视图控制器对视图所做的第一件事就是设置框架，它仍然需要访问视图。

```
UIViewController *controller = [MyViewController myViewController];

// -viewDidLoad has not been called (if +myViewController doesn't call -view.)

UIView *view = [controller view];

// -viewDidLoad has been called.

view.frame = [UIApplication sharedApplication].delegate.window.bounds; 
```

即使你使用`controller.view.frame`相同的逻辑顺序也会发生。`-viewDidLoad`将始终使用尚未嵌入视图层次结构的新反序列化视图进行调用。

* * *

**更新**

如果之前不清楚，我指出了为什么在`-viewDidLoad`. 只有在`-viewDidLoad`视图控制器的视图被添加到视图层次结构之后。这是设置视图的最后一帧的时间。

如果您必须让框架具有正确的尺寸，您可以使用 IB 来设置您知道需要的尺寸，或者（如果您不使用 IB）将框架设置为`-loadView`. 这种方法是有缺陷的，因为它静态地将框架的大小设置为在调用后可能会更改的值`-viewDidLoad`（例如通话状态栏）。

* * *

**更新 2**

您需要将添加子视图与定位和调整子视图分开。

如果您是从 Storyboard 或 Nib 加载，那么您是正确的，应该在`-viewDidLoad`. 如果您以编程方式加载，则所有子视图都添加到`-loadView`.

第二个任务是定位和调整子视图。首选方法是使用[UIView.autoresizingMask](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/autoresizingMask)，但为了更精确的布局，[KVO](https://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html) view.bounds 并在视图控制器的视图更改其大小时调整您的自定义子视图。

# c# - 如何使用 Microsoft Fakes 引用具有自身通用参数的存根？

> ID：12680378
> 
> 赞同：8
> 
> 时间：2012-10-01T20:14:25.237
> 
> 标签：c#, visual-studio-2012, microsoft-fakes

我在我正在处理的一些单元测试中使用 Microsoft Fakes。我的界面如下所示：

```
interface ISecuredItem<TChildType> where TChildType : class, ISecuredItem<TChildType>
{
    SecurityDescriptor Descriptor { get; }
    IEnumerable<TChildType> Children { get; }
} 
```

一个典型的实现如下：

```
class RegistryKey : ISecuredItem<RegistryKey>
{
    public SecurityDescriptor Descriptor { get; private set; }
    public IEnumerable<RegistryKey> Children { get; }
} 
```

我想将此界面与 Microsoft Fakes 一起使用，并让它为我生成一个存根。问题是，Fakes 使用的形式是`StubInterfaceNameHere<>`，所以在上面的例子中，你最终会尝试做类似的事情`StubISecuredItem<StubISecuredItem<StubISecuredItem<StubISecuredItem....`

这可能吗？如果是这样，我如何以这种方式使用假货？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T10:58:20.053

经过一些实验，我找到了一个可行的解决方案，尽管它不是最优雅的。

这是您的常规代码：

```
public interface ISecuredItem<TChildType>
    where TChildType : ISecuredItem<TChildType>
{
    SecurityDescriptor Descriptor { get; }
    IEnumerable<TChildType> Children { get; }
} 
```

在您的测试项目中，您创建一个 StubImplemtation 接口

```
public interface StubImplemtation : ISecuredItem<StubImplemtation> { } 
```

然后在您的单元测试中，您可以执行以下操作：

```
var securedItemStub = new StubISecuredItem<StubImplemtation>
                          {
                              ChildrenGet = () => new List<StubImplemtation>(),
                              DescriptorGet = () => new SecurityDescriptor()
                          };

var children = securedItemStub.ChildrenGet();
var descriptor = securedItemStub.DescriptorGet(); 
```

如果没问题，您可以跳过整个`StubImplementation`并使用。`RegistryKey`

# java - 是否可以延迟类的加载，稍后可能会动态加载？

> ID：12680380
> 
> 赞同：4
> 
> 时间：2012-10-01T20:14:27.543
> 
> 标签：java, classloader

我想知道，我尝试了无数复杂的搜索词来确定是否有办法延迟 Java 中类的加载。我的意思是，可以在类/构建路径上找到这些类，但我不希望它们在启动时加载。这会导致使用了错误的类加载器。

我是否可以选择性地延迟或阻止默认类加载器加载某些类/JAR？

*示例*（在构建路径上使用 3rd 方 jar）：

```
// boilerplate main
JarWrapper apiJar = SpecialJarLoader("api.jar"); // SpecialJarLoader is a proprietary class loader
Class apiClass = apiJar.loadClass("org.company.comm.AConnection"); // runtime failure here due to the class already being loaded 
```

如果我从构建路径中删除 Jar，则 apiClass.getClassLoader() 是预期的专有加载器。问题是我不能随意使用“org.company.comm.AConnection”或 Jar 中的任何其他类（包括 IDE 的自动完成），因为它实际上不在构建路径上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T20:16:54.080

类仅在首次使用时才加载。因此，您的类将不会在启动时加载，而是在第一次需要该类的某些内容（包括静态方法、类型声明等）时。因此，默认行为是尽可能延迟加载。

如果要控制加载时间，可以通过 ClassLoaer.loadClass() 显式加载类。如果您的类包含某个接口，则您只能在接口上访问代码（从而确保该类不被某些依赖链加载）然后加载它（ClassLoader.loadclass（））并在您实际实例化它需要这个类的一个实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:18:03.583

做到这一点的唯一方法是使用 JNI（即在 C 中）编写您的 CUSTOM JAVA 加载器

这样，您可以选择性地加载一个类。

# html - 在背景图像中居中放置 YouTube 视频

> ID：12680388
> 
> 赞同：1
> 
> 时间：2012-10-01T20:15:17.190
> 
> 标签：html

我试图在背景图像中居中嵌入视频。您可以看到背景图像和 YouTube 视频没有相互居中。这是示例的链接：[http ://wanalift.org/learning-center](http://wanalift.org/learning-center)

我通过将视频嵌入到 div 中并将其居中来做到这一点。我还尝试将背景图像居中。这是我正在使用的代码：

```
<div style="text-align: center;"> 
     <iframe width="640" height="360" src="http://www.youtube.com/embed/LBJJ4s6VAz4?rel=0"   frameborder="0" allowfullscreen></iframe>
          <div style="text-align: center;"> 
              <iframe src="http://wanalift.org/wp-content/themes/wanalift/images/Video_Player_Background.png" frameborder="0" width="660" height="380"></iframe>
          </div>
      </div> 
```

在背景图像中居中视频我缺少什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:26:05.243

您可以将包含视频的 div 的背景图像制作为图像

```
<div style="text-align: center;background-image: url(http://wanalift.org/wp-content/themes/wanalift/images/Video_Player_Background.png);">...</div> 
```

# backbone.js - twitter bootstrap：加载 DOM 后激活选项卡布局

> ID：12680391
> 
> 赞同：0
> 
> 时间：2012-10-01T20:15:40.380
> 
> 标签：backbone.js, tabs, twitter-bootstrap

我正在使用 Backbone JS 和 Twitter Bootstrap 构建一个选项卡容器。本质上，我有一个容器视图（包含选项卡导航和选项卡本身的容器 div），然后每个选项卡都是附加到容器的不同主干视图。

加载选项卡之前的标记如下所示：

```
<div class="container">
  <ul class="nav nav-tabs">
    <li><a href="#1" data-toggle="tab">Tab1</a></li>
    <li><a href="#2" data-toggle="tab">Tab2</a></li>
  </ul>
  <div class="tab-content">
  </div>
</div> 
```

选项卡视图附加到`tab-content`div。

我的问题是引导选项卡布局实际上并没有占据上风。我得到了一组垂直的 div，而不是容器中的选项卡式布局。基本上就好像在渲染容器视图后立即激活选项卡布局一样，因此，附加的选项卡不会被考虑在内，因为它们最初不是 DOM 的一部分。

我本质上是在寻找一种方法来调用 Bootstrap 以在标签全部加载到 DOM*后*激活它们。添加一条类似的行`$(".nav-tabs a:first").tab('show')`似乎无法解决它。

我知道在 jQuery UI 中你必须显式调用一个函数来激活选项卡。引导程序有类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:08:43.657

列表元素内的锚点需要将其 href 设置为 tab-content 类中的 div 的 id。选项卡内容中的 div 需要有一个“选项卡窗格”类和一个由锚点引用的 id。

```
<div class="container">
  <ul class="nav nav-tabs">
    <li><a href="#tab1" data-toggle="tab">Tab1</a></li>
    <li><a href="#tab2" data-toggle="tab">Tab2</a></li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane" id="tab1">tab1</div>
    <div class="tab-pane" id="tab2">tab2</div>
  </div>
</div> 
```

这是一个 jsfiddle：http: [//jsfiddle.net/TVUPF/98/](http://jsfiddle.net/TVUPF/98/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T00:51:38.307

这可能会有所帮助： http: [//lostechies.com/derickbailey/2012/02/20/using-jquery-plugins-and-ui-controls-with-backbone/](http://lostechies.com/derickbailey/2012/02/20/using-jquery-plugins-and-ui-controls-with-backbone/)

在这篇文章中，我提供了一个示例，说明如何使用依赖于 DOM 中元素的控制套件（如引导程序）。

有几种不同的解决方案可以完成这项工作。

# search - 有没有办法使用 Javamail 搜索所有可用的 IMAP 文件夹？

> ID：12680392
> 
> 赞同：4
> 
> 时间：2012-10-01T20:15:47.103
> 
> 标签：search, imap, jakarta-mail

我正在寻找一种方法来搜索所有文件夹（对于给定的用户）。

我知道[IMAP SEARCH 命令](https://www.rfc-editor.org/rfc/rfc3501#section-6.4.4)要求您首先选择要操作的邮箱 - 将搜索结果限定到该特定邮箱。

Javamail IMAP 实现实现了一个对对象`search`进行操作的函数。`Folder`这似乎模仿了规范，因为它将在给定的文件夹中搜索。

我曾希望我能够搜索特殊的“默认”文件夹（使用 中的`getDefaultFolder`方法检索`IMAPStore`），因为这将返回包含所有其他文件夹的根文件夹。但是，虽然检索到的`Folder`可以提供所有可用文件夹的列表，但它的类型不是 type `HOLDS_MESSAGES`，因此它不能用于访问或搜索消息。

是否有其他方法可以在所有文件夹中搜索邮件，或者我需要单独搜索每个文件夹？

恐怕我不能发布两个以上的超链接，但是这里可以访问[Javamail com.sun.mail.imap 文档](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/imap/package-summary.html)，通过它您可以看到有关我一直在描述的方法的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:45:14.677

IMAP 协议不提供此功能，因此 JavaMail 无法比您自己通过遍历所有文件夹并在每个文件夹中搜索来做得更好。

# android - MonoDroid：片段 - 细节片段

> ID：12680393
> 
> 赞同：0
> 
> 时间：2012-10-01T20:15:47.547
> 
> 标签：android, mono, xamarin.android, fragment

在**Mono for Android**文档示例项目“ **HoneycombFragments** ”的**TitlesFragment**中，这一行出现在**OnActivityCreated**中。

```
 var detailsFrame = Activity.FindViewById<View>(Resource.Id.details);
        _isDualPane = detailsFrame != null && detailsFrame.Visibility == ViewStates.Visible; 
```

在生命周期的这个阶段，详细视图在哪里被创建，因为它没有在 Layout xml 中被引用，也没有在这个阶段的代码中（详细视图在稍后阶段添加到代码中）。它神奇地使它看起来像细节视图构造函数还没有被调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:10:01.690

编辑器中似乎存在错误。当有 2 个具有相同名称的布局时，双击一个，然后另一个为您提供相同的文件。因此，我看不到实际上添加到第二个 xml 中的 XML 的详细信息视图。

![在此处输入图像描述](../Images/5faba3c1024e86ef0ea96343215a6242.png)

# c - 为什么限制指针没有效果

> ID：12680398
> 
> 赞同：8
> 
> 时间：2012-10-01T20:16:03.507
> 
> 标签：c, pointers, restrict-qualifier

对于限制指针，我看不出 gcc 的代码有任何差异。

**文件 1**

```
void test (int *a, int *b, int *c)
{
  while (*a)
  {
    *c++ = *a++ + *b++; 
  }
} 
```

**文件2**

```
void test (int *restrict a, int *restrict b, int *restrict c)
{
  while (*a)
  {
    *c++ = *a++ + *b++;
  }
} 
```

编译

```
 gcc -S -std=c99 -masm=intel file1.c
  gcc -S -std=c99 -masm=intel file2.c 
```

**file1.s**和**file2.s**都相同，除了`.file`告诉文件名的行：

```
 .file   "file1.c"
    .text
    .globl  test
    .type   test, @function
test:
.LFB0:
    .cfi_startproc
    pushq   %rbp
    .cfi_def_cfa_offset 16
    .cfi_offset 6, -16
    movq    %rsp, %rbp
    .cfi_def_cfa_register 6
    movq    %rdi, -8(%rbp)
    movq    %rsi, -16(%rbp)
    movq    %rdx, -24(%rbp)
    jmp .L2
.L3:
    movq    -8(%rbp), %rax
    movl    (%rax), %edx
    movq    -16(%rbp), %rax
    movl    (%rax), %eax
    addl    %eax, %edx
    movq    -24(%rbp), %rax
    movl    %edx, (%rax)
    addq    $4, -24(%rbp)
    addq    $4, -8(%rbp)
    addq    $4, -16(%rbp)
.L2:
    movq    -8(%rbp), %rax
    movl    (%rax), %eax
    testl   %eax, %eax
    jne .L3
    popq    %rbp
    .cfi_def_cfa 7, 8
    ret
    .cfi_endproc
.LFE0:
    .size   test, .-test
    .ident  "GCC: (GNU) 4.6.3 20120306 (Red Hat 4.6.3-2)"
    .section    .note.GNU-stack,"",@progbits 
```

这两个代码都从内存中读取，然后将指向的内存位置分配`a`给`b`。我预计该`restrict`版本不会重新读取and 的地址，`a`并且and`b`的地址将在寄存器中递增并在最后写入内存。`a``b`

我做错了什么吗？或者示例的选择可以吗？

我尝试使用不同的开关`-O0`, `-O1`, `-O2`, `-O3`, `-Ofast`, 并`-fstrict-aliasing` 为两个文件使用相同的结果。

*注意：* gcc --version = gcc (GCC) 4.6.3 20120306 (Red Hat 4.6.3-2)

**编辑**代码已更改。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T20:29:11.003

您只是在阅读其中一个指针，所以`restrict`没关系。

请参阅[此示例](http://cellperformance.beyond3d.com/articles/2006/05/demystifying-the-restrict-keyword.html)，因为指针可能会为相同的数据起别名，并且数据是通过两个指针写入和读取的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T22:17:47.090

问题是以下表达式：

```
 *c++ = *a++ + *b++; 
```

无论如何，几乎都需要取消引用每次循环迭代中的所有指针，因为指针在每次迭代中都会发生变化。使用没有任何好处`restrict`。

尝试将循环内的行更改为：

```
 *c++ = *a++ + *b; 
```

（您可能还需要启用优化，例如`-O2`）。

您会看到，在`restrict`它加载`*b`到寄存器一次的情况下，而在没有限制的情况下，它需要在每次循环迭代中通过指针加载，因为它不知道是否有`c`aliases `b`。

# c# - 如何开发 Windows Phone 应用程序，如徽标测验

> ID：12680403
> 
> 赞同：-6
> 
> 时间：2012-10-01T20:16:20.370
> 
> 标签：c#, xaml, xna, logos

我正在开发一个 Windows Phone 应用程序，其功能类似于 App Store 中流行的 Logo Quiz。

我知道它涉及一个数据库来确定答案是否正确，但我不知道如何使用它，欢迎任何教程:)

但真正的问题是弹出界面，有一些示例，一些教程？

并且.. 更好地使用 XNA 或 XAML？

谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:29:57.677

XAML 是一个不错的选择。

至于示例或教程，请从诺基亚开发者社区尝试一下。
这将为您提供一个很好的起点。

[如何为 Windows Phone 创建基于视频/音频/图像和文本的测验游戏](http://www.developer.nokia.com/Community/Wiki/How_to_create_a_Video/Audio/Image_and_Text_based_Quiz_Game_for_Windows_Phone)

# php - 高度可定制的社交网络平台

> ID：12680405
> 
> 赞同：-4
> 
> 时间：2012-10-01T20:16:26.763
> 
> 标签：php, customization, social-networking

我正在搜索一个社交网络平台，无论是付费的还是免费的，它是完整的，具有良好的功能，但 100% 可定制以添加我自己的功能，并且易于定制。我想要所有社交网络的功能，但我需要添加我自己的代码、对象、类和数据库。所以我会使用 php 并找到一个易于处理的逻辑结构的平台。

我有点迷茫，有很多社交网络平台：elgg，buddypress，socialengine，但我不明白是否可以扩展，有多难！:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:18:55.987

Facebook API 是“巨大的”。我的意思是，在规模、定制和社区支持方面，没有更大的 API 可以为您提供更多资源。

它是用 PHP 构建的，并且有几个基本的插件实现，您可以从这些插件开始并在此基础上进行构建。

## 您的“APP”可能是：

*   嵌入在您的独立网站上的小部件，通过 API 调用与 facebook 交互
*   在 facebook 用户平台上安装小部件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T16:32:31.937

Elgg 是一个很好的解决方案。它是屡获殊荣的社交网络平台。如果您熟悉 MVC 架构，您可以将 elgg 添加/扩展/转换为您可以想象的任何东西。

# asp.net-mvc - 部分视图不执行控制器的操作

> ID：12680406
> 
> 赞同：0
> 
> 时间：2012-10-01T20:16:40.590
> 
> 标签：asp.net-mvc, asp.net-mvc-4, partial-views

我有以下部分视图，我试图调用视图（“消息/创建”）内的控制器（“消息”）的操作（“搜索”）。

我似乎根本无法触发控制器的动作。我已经尝试了很多组合，但似乎无法使用它。

部分视图旨在具有用于过滤 HTML 表格的文本框和按钮。

## 部分（“_ProfileList.cshtml”）

```
@model MyApp.Models.MessagingModels.ViewModels.CreateMessageViewModel
@{
    var altLine = false;
}

<div>
    @using (Ajax.BeginForm("Search", "Messages", new AjaxOptions { UpdateTargetId = "dvProducts", HttpMethod = "Post" }))
    {
        <label for="Searchbox">Find Profile :</label>
        @Html.TextBox("SearchString", ViewBag.CurrentFilter as string)
        <input class="ui-state-default ui-corner-all" type="submit" value="Search" />
    }
    <br />
    <br />
</div>
<div id="dvProducts" class="datagrid">
    <table>
        <thead>
            <tr>
                <th>&nbsp;</th>
                <th>Profile Name</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.ListOfProfiles)
            {
                <tr class='@(altLine ? "alt" : "norm")'>
                    <td>
                        <input type="radio" name="SelectedProfile" value="@item.ID" id="SelectedProfile_@item.ID" /></td>
                    <td>
                        @if (item.Favourite)
                        {
                            <img src="@Url.Content("~/Images/favourite-star.png")" alt="Favourite" />
                        }

                        @Html.DisplayFor(modelItem => item.Name)</td>
                    <td>@Html.DisplayFor(modelItem => item.Description)</td>
                </tr>
            }
        </tbody>
        <tfoot>
        </tfoot>
    </table>
</div> 
```

## 创建消息视图模型

```
public class CreateMessageViewModel
{
        private List<ProfileModels.DataModels.Profile> _listOfProfiles; 

        public List<ProfileModels.DataModels.Profile> ListOfProfiles 
        {
            get
            {
                using(var ctx = new EFDataContext())
                {
                    var tmp = ctx.Profiles.OrderBy(p => p.Name).ToList();
                    //_listOfProfiles = ctx.Profiles.OrderBy(p => p.Name).ToList().ToPagedList(1, 10);
                    return _listOfProfiles;
                }
            }
            set { _listOfProfiles = value; }
        }

       //..removed for brevity

} 
```

## 消息视图

```
@model MyApp.Models.MessagingModels.ViewModels.CreateMessageViewModel
@{
    ViewBag.Title = "Create";
}
<div class="grid_12">

    @using (Html.BeginForm())
    {
        <div id="SignupForm">
            <fieldset>
                <legend>Profile</legend>
                <strong>What profile would you like to target?</strong>
                 @{ Html.RenderPartial("_ProfilesList", Model); }
            </fieldset>
            <fieldset>
                <legend>Region</legend>
            </fieldset>
            <fieldset>
                <legend>Message</legend>
                <strong>What type of message do you want to send?</strong><br />
                <div id="message-type-selector">
                    <input type="radio" name="messagetype" value="SMS" id="message-type-sms" checked="checked" />
                    <label for="message-type-sms">SMS</label><br />
                    <input type="radio" name="messagetype" value="Email" id="message-type-email" />
                    <label for="message-type-email">Email</label><br />
                </div>
                <br />
                <div id="Message-Options-SMS">
                    @Html.LabelFor(model => model.SMSMessageText)
                    <br />
                    @Html.EditorFor(model => model.SMSMessageText)
                    <div id="smscharactersremaining">100 characters remaining</div>

                    <button id="check-textarea">
                        Check Spelling
                    </button>
                    &nbsp;
                    <span class="loading">loading..</span>

                </div>
                <div id="Message-Options-Email">
                    @Html.LabelFor(model => model.EmailMessageText)
                    <br />
                    <textarea id="EmailMessageText" name="EmailMessageText" cols="50" rows="15"></textarea>
                    <link href="@Url.Content("~/content/jHtmlArea.css")" rel="stylesheet" type="text/css" />
                    <script src="@Url.Content("~/Scripts/jHtmlArea-0.7.5.min.js")" type="text/javascript" ></script>
                    <link href="@Url.Content("~/content/jHtmlArea.css")" rel="stylesheet" type="text/css" />
                    <link href="@Url.Content("~/Content/jHtmlArea.ColorPickerMenu.css")" rel="stylesheet" />
                    <script src="@Url.Content("~/Scripts/jHtmlArea.ColorPickerMenu-0.7.0.min.js")" type="text/javascript" ></script>

                </div>

            </fieldset>
            <fieldset>
                <legend>Tracking</legend>

            </fieldset>
            <fieldset>
                <legend>Confirmation</legend>

            </fieldset>
            <p>@Html.ValidationSummary(false)
                <input id="SaveAccount" type="button" value="Submit form" />
            </p>
        </div>
    }
</div>
<div class="clear"></div> 
```

## 消息控制器

```
public class MessagesController : Controller
    {
        private readonly EFDataContext db = new EFDataContext();

        public ActionResult Search(string CurrentFilter)
        {
            var model = from p in db.Profiles
                        where p.Name.Contains(CurrentFilter) || p.Description.Contains(CurrentFilter)
                        select p;

            var vmm = new CreateMessageViewModel
                          {
                              ListOfProfiles = model.ToList()
                          };

            return PartialView("_ProfilesList", vmm);
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T20:23:18.703

你有几个问题，但我认为最大的问题是你有嵌套的表单。您的 Ajax.BeginForm 在另一个 Html.BeginForm 中呈现。

嵌套表不是合法的 HTML，浏览器可能会也可能不会尊重它们。

# security - 清漆安全

> ID：12680408
> 
> 赞同：0
> 
> 时间：2012-10-01T20:16:50.340
> 
> 标签：security, varnish

清漆安全**main.vcl**包含

```
# clear all internal variables
include "/etc/varnish/security/build/variables.vcl"; 
```

和

```
# fallthrough: clear all internal variables on security.vcl_recv exit
include "/etc/varnish/security/build/variables.vcl"; 
```

但是**/etc/varnish/security/build/variables.vcl**不包含在 git 中。我把它注释掉了，它工作正常但是我在哪里可以得到**/etc/varnish/security/build/variables.vcl**？
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:23:00.650

看起来工具目录中有一个脚本来构建它？

[http://git.varnish-cache.org/old/varnish/varnish-tools/security.vcl/tools/generate_variables](http://git.varnish-cache.org/old/varnish/varnish-tools/security.vcl/tools/generate_variables)

# ruby-on-rails-3 - Rails 3 暗示用户角色是坏习惯吗？

> ID：12680409
> 
> 赞同：0
> 
> 时间：2012-10-01T20:16:50.853
> 
> 标签：ruby-on-rails-3, conventions, user-roles

我有一个用户表，教师和学生之间存在自我参照关系。目前，学生通过instructor_id foreign_key 与他们的导师相关联。一个学生永远有一个导师，一个导师永远不会是一个学生。

综上所述，就授权而言，如果用户的instructor_id 字段具有值，则可以简单地确定用户是否是学生，反之亦然？还是我应该明确定义用户角色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:24:37.753

首先，我会尝试找到一些方法让它不自引用。也许通过只制作一个persons表并有一个单独的表作为链接（`users.instructor_id`链接到`instructors`哪个具有字段`instructor_id`和`user_id`，`instructors.instructor_id`正在使用的`users.instructor_id`，然后您可以查询`SELECT * FROM users WHERE EXISTS (SELECT * FROM instructors WHERE instructors.user_id = users.user_id)`以获取当前教师的列表），或者最好的情况是有一个学生表和教师表。

如果您确定没有讲师将拥有讲师 ID，那么我相信您应该能够通过该字段为空（或默认值为 -1）来检查用户是否是学生。

我建议将您的表结构重建为非自引用的，从长远来看，当一名教师被分配给另一名教师或学生出于某种原因教学时，它将对您有所帮助。

# twitter-bootstrap - wrapBootstrap 没有更新，版权呢

> ID：12680412
> 
> 赞同：0
> 
> 时间：2012-10-01T20:17:06.097
> 
> 标签：twitter-bootstrap

我的问题是：

*   wrapBootstrap 网站（用于购买主题）没有更新吗？我看了几天订阅者和买家的统计数据，但没有一个增加。从那里购买引导主题是否安全？

*   那么购买主题的版权呢？在我的页脚上，我必须注意到设计师是：“例如 Company blah blah”，或者我只能写我是网站的开发者，而对设计一无所知？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T00:07:43.013

该网站是可靠的，我在那里有一些主题。我得到了及时付款。唯一的问题是支持。0 支持。我发送的超过 10 封电子邮件没有回复。如果他们增加支持，那么该站点将是买卖主题的好地方。

至于版权，您可以自由更改页脚链接。没问题。

# java - AWTEvent 和 EventQueue

> ID：12680413
> 
> 赞同：0
> 
> 时间：2012-10-01T20:17:08.297
> 
> 标签：java, swing, awt, eventqueue

我有一个外部设备一次向我发送 1 个字符的数据。我正在将其写入 JTextPane 上的 StyledDocument。此数据在不是 AWT 线程的线程上发送给我，因此我需要创建 AWTEvents 并将它们推送到 EventQueue 以便 AWT 处理写入，这样我就不会收到异常。

我现在有一个有趣的问题...

我的文本正在向后打印到文档。

这显然是因为我在收到字符时一次将字符推送到事件队列 1。一个队列显然是最后推送的，首先是弹出的。我正在尝试一种可以在添加新事件或类似事件之前触发事件的方法，以便我可以按顺序触发事件。

[http://www.kauss.org/Stephan/swing/index.html](http://www.kauss.org/Stephan/swing/index.html)是我用来创建事件的示例。

```
private class RUMAddTextEvent extends AWTEvent {

    public static final int EVENT_ID = AWTEvent.RESERVED_ID_MAX + 1;
    private int index;
    private String str;
    private AttributeSet as;

    public RUMAddTextEvent(Component target, int index, String str, AttributeSet as) {
        super(target, EVENT_ID);
        this.index = index;
        this.str = str;
        this.as = as;
    }

    public int getIndex() {
        return index;
    }

    public String getStr() {
        return str;
    }

    public AttributeSet getAs() {
        return as;
    }
}

private class RUMRemoveTextEvent extends AWTEvent {

    public static final int EVENT_ID = AWTEvent.RESERVED_ID_MAX + 1;
    int index;
    int size;

    RUMRemoveTextEvent(Component target, int index, int size) {
        super(target, EVENT_ID);
        this.index = index;
        this.size = size;
    }

    public int getIndex() {
        return index;
    }

    public int getSize() {
        return size;
    }
}

/**
 * Prints a character at a time to the RUMComm window.
 *
 * @param c
 */
public void simpleOut(Character c) {
    cursor.x++;
    if (lines.isEmpty()) {
        this.lines.add(c.toString());
    } else {
        this.lines.add(cursor.y, this.lines.get(cursor.y).concat(c.toString()));
        this.lines.remove(cursor.y + 1);

    }

    try {
        //doc.insertString(doc.getLength(), c.toString(), as);

        eventQueue = Toolkit.getDefaultToolkit().getSystemEventQueue();
        eventQueue.postEvent(new RUMAddTextEvent(this, doc.getLength(), c.toString(), as));
        getCaret().setDot(doc.getLength());
    } catch (Exception ex) {
        //Exceptions.printStackTrace(ex);
    }
}

/**
 * Creates a new line
 */
public void newLine() {
    cursor.y++;
    cursor.x = 0;
    this.lines.add("");

    //doc.insertString(doc.getLength(), "\n", null);
    eventQueue = Toolkit.getDefaultToolkit().getSystemEventQueue();
    eventQueue.postEvent(new RUMAddTextEvent(this, doc.getLength(), "\n", null));
    getCaret().setDot(doc.getLength());

}

/**
 * Backspace implementation.
 *
 */
public void deleteLast() {
    int endPos = doc.getLength();
    //doc.remove(endPos - 1, 1);
    eventQueue = Toolkit.getDefaultToolkit().getSystemEventQueue();
    eventQueue.postEvent(new RUMRemoveTextEvent(this, endPos - 1, 1));
    cursor.x--;

}

 @Override
protected void processEvent(AWTEvent awte) {
    //super.processEvent(awte);
    if (awte instanceof RUMAddTextEvent) {
        RUMAddTextEvent ev = (RUMAddTextEvent) awte;
        try {
            doc.insertString(ev.getIndex(), ev.getStr(), ev.getAs());
        } catch (BadLocationException ex) {
            Exceptions.printStackTrace(ex);
        }
    } else if (awte instanceof RUMRemoveTextEvent) {
        RUMRemoveTextEvent ev = (RUMRemoveTextEvent) awte;
        try {
            doc.remove(ev.getIndex(), ev.getSize());
        } catch (BadLocationException ex) {
            Exceptions.printStackTrace(ex);
        }

    } else {
        super.processEvent(awte);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:52:14.353

我只能鼓励那些试图照顾 Swing 线程规则的人。然而，尽管您努力创建事件并将它们推送到您仍然可以通过调用文档长度和更改插入符号位置来`EventQueue`访问后台的 Swing 组件。`Thread`

扩展一个文本组件以在其上设置文本对我来说似乎有点过头了，当然也不是解决这个问题的最佳方法。就我个人而言，我会让背景`Thread`填充一个缓冲区并偶尔将该缓冲区刷新到文本文档中（例如，在每个新行，使用计时器每秒两次，每次达到 1000 个字符时，...）。对于更新，我会简单地使用`SwingUtilities.invokeLater`.

一些示例代码来说明这一点，从我的一个旧项目中检索。它不会编译，但它说明了我的观点。该类将`String`s 附加到`ISwingLogger`应在 EDT 上访问的一个。`javax.swing.Timer`请注意在 EDT 上定期更新的用法。

```
import javax.swing.Timer;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.ByteArrayOutputStream;
import java.io.IOException;

public class SwingOutputStream extends ByteArrayOutputStream{
  private final ISwingLogger fSwingLogger;

  private Timer fTimer;
  private final StringBuilder fBuffer = new StringBuilder( 1000 );

  public SwingOutputStream( ISwingLogger aSwingLogger ) {
    fSwingLogger = aSwingLogger;

    fTimer = new Timer( 200, new ActionListener() {
      public void actionPerformed( ActionEvent aActionEvent ) {
        flushBuffer();
      }
    } );
    fTimer.setRepeats( false );
  }

  @Override
  public void flush() throws IOException {
    synchronized( fBuffer ){
      fBuffer.append( toString( "UTF-8") );
    }
    if ( fTimer.isRunning() ){
      fTimer.restart();
    } else {
      fTimer.start();
    }

    super.flush();
    reset();
  }

  private void flushBuffer(){
    synchronized ( fBuffer ){
      final String output = fBuffer.toString();
      fSwingLogger.appendString( output );
      fBuffer.setLength( 0 );
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:43:33.960

恕我直言，您采取了一些本应简单的事情，并使其变得更加复杂（顺便说一句，我是这方面的真正大师；））

在不知道你确切的问题的情况下，很难做到 100%，但是这个小例子演示了我如何使用`SwingUtilities.invokeLater/invokeAndWait`

```
public class EventTest {

    public static void main(String[] args) {

        JFrame frame = new JFrame();
        frame.setLayout(new BorderLayout());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(400, 400);
        JTextArea area = new JTextArea();
        frame.add(new JScrollPane(area));
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);

        Thread thread = new Thread(new Dispatcher(area));
        thread.setDaemon(true);
        thread.start();

    }

    public static class Dispatcher implements Runnable {

        private String message = "Hello from the other side\n\nCan you read this\n\nAll done now";
        private JTextArea area;

        public Dispatcher(JTextArea area) {
            this.area = area;
        }

        @Override
        public void run() {

            int index = 0;
            while (index < message.length()) {

                try {
                    Thread.sleep(250);
                } catch (InterruptedException ex) {
                }

                send(message.charAt(index));
                index++;

            }

        }

        public void send(final char text) {

            System.out.println("Hello from out side the EDT - " + EventQueue.isDispatchThread());

            try {
                SwingUtilities.invokeAndWait(new Runnable() {
                    @Override
                    public void run() {
                        System.out.println("Hello from the EDT - " + EventQueue.isDispatchThread());
                        area.append(new String(new char[]{text}));
                    }
                });
            } catch (Exception exp) {
                exp.printStackTrace();
            }

        }

    }

} 
```

在您的情况下，我可能会制作一系列能够处理您想要进行的每次更新的可运行文件。

例如，我可能会创建一个`InsertRunnable`and `DeleteRunnable`（来自您的示例代码），它可以在当前位置插入一个字符串或从当前插入符号位置删除一个字符串/字符。

我会向这些人传递所需的信息，让他们处理其余的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T20:38:17.710

您的实际问题不是事件被无序处理，而是您正在使用即将过期的信息创建事件：

```
new RUMAddTextEvent(this, doc.getLength(), ... 
```

提交事件时，文档的长度可能为 0，但在处理事件时可能不是这样。您可以通过使用 AppendTextEvent 而不是指定索引来解决该问题，但如果您也有基于位置的插入，则必须考虑这些。

整个批次的另一种选择是使用无效模型：

```
// in data thread
void receiveData(String newData) {
    updateModelText(newData);
    invalidateUI();
    invokeLater(validateUI);
}

// called in UI thread
void validateUI() {
    if (!valid) {
        ui.text = model.text;
    }
    valid = true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-21T19:35:21.027

> ...当我收到它们时。一个队列显然是**最后推送的，首先是弹出的。**我试着...

你在这里有一些概念上的错误。队列是**FIFO**，意味着先推入先弹出。一个堆栈，将是**LIFO**，意味着最后推入首先弹出。我相信这才是你真正的问题所在。

# iphone - 科尔多瓦 2.1 cdvviewcontroller.h 丢失

> ID：12680415
> 
> 赞同：0
> 
> 时间：2012-10-01T20:17:15.343
> 
> 标签：iphone, ios, xcode, cordova

我刚刚安装了新的 PhoneGap 2.1.0 并按照所有步骤准确地启动了一个项目，它似乎可以工作，除了当我尝试在 iPhone 6 模拟器上运行它时，我收到一条错误消息，显示 Cordova/CDVViewController.h不见了。我在运行 Lion 的 MacBook Pro 上使用 XCode 4.5。我看到很多人都遇到过这个错误，但没有提供解决方案。有人能帮忙吗？此外，我在安装新的 PhoneGap 之前卸载了 PhoneGap 2.0。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:31:35.967

解决方案是在安装 PhoneGap 2.1 之前完全删除 PhoneGap 2.0。我所做的是安装 2.1，然后尝试创建一个项目。不行后，我用了2.0的卸载程序。这删除了我的 CordovaLib 文件夹，即使我在 2.1 文件夹中解压了它。我查看了 PhoneGap 2.1 下载的 lib/ios 文件夹，并将 CordovaLib 文件夹复制到了我放置 iOS 文件夹中其他文件的位置，然后就完成了。我也可以替换我解压的整个 ios 文件夹。

我使用的是 XCode 4.5，并且我的目标是 iOS 6，所以我必须做一个额外的步骤才能让它在模拟器中运行。我必须在 Xcode 的项目导航器中单击 CordovaLib.xcodeproj，然后将 Build Active Architecture Only 中的值更改为 YES。这完成了我的解决方案。

这对你ac360有帮助吗？

# ios - iOS 6 UIWebView 视频没有声音

> ID：12680417
> 
> 赞同：5
> 
> 时间：2012-10-01T20:17:23.850
> 
> 标签：ios, uiwebview, ios6

我们的应用在 UIWebView 中托管 HTML。很少有用户注意到视频不再播放音频，全部在 iOS 6 中。我已经研究了这个问题并且无法复制该错误，但是用户投诉继续涌入。最初我认为用户不小心将他们的静音设备，但似乎并非如此。

这里有没有人注意到任何类似的问题？

# javascript - 要使用的正确模式：this 或原型

> ID：12680419
> 
> 赞同：0
> 
> 时间：2012-10-01T20:17:34.940
> 
> 标签：javascript

> **可能重复：**
> [在 Javascript 中使用“原型”与“这个”？](https://stackoverflow.com/questions/310870/use-of-prototype-vs-this-in-javascript)

如果我有一个对象函数，我应该什么时候使用`this.something`而不是`func.prototype.something`？

只是为了澄清：

```
function Person()
{
   this.walk=function(){...};
} 
```

代替：

```
function Person()
{}
Person.prototype.walk=function(){...}; 
```

什么时候方便使用一种形式而不是另一种形式？这两种解决方案的优缺点是什么？特别是在我一直使用的情况下`var person = new Person();`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T20:23:15.813

这两段代码真的很不一样，并且实现了不同的目标。

第一个示例涉及一个函数，该函数在调用时将属性添加到接收器对象（由 引用的对象`this`），或者如果该属性已存在，则更新该属性的值。因此，使用不同的接收者调用“Person”函数将分别更新这些对象，每个对象都会获得一个名为“walk”的属性。如果使用“Person”作为构造函数，那么新创建的对象同样会被直接更新。

第二个示例将方法添加到函数的*原型*对象。当随后使用 调用该函数时`new`，生成的新对象将继承原型对象的属性。这意味着可以将此类对象视为它们实际上具有称为“walk”的属性，该属性是可调用的函数。但是，该属性实际上并不直接存在于每个构造对象上；它是可见的，因为原型对象在 JavaScript 属性查找中扮演的角色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:20:09.777

如果您需要在 Person 的所有实例上使用此功能，则需要使用`prototype`. 另请参阅[此](https://stackoverflow.com/questions/310870/use-of-prototype-vs-this-in-javascript)stackoverflow 帖子。

# javascript - 编写 XHR 同步行为的替代方法

> ID：12680420
> 
> 赞同：1
> 
> 时间：2012-10-01T20:17:35.253
> 
> 标签：javascript

我最近听说我们在使用 XHR 时不应该使用同步行为。就我而言，我需要同步行为。同步重写对我的服务的调用的最佳方法是什么，而不是我现在的做法。请不要 jquery ..

```
 var xhReq = new XMLHttpRequest();
    xhReq.open("POST", "ClientService.svc/REST/TestHtmlSend", false);
    xhReq.send(null);
    var serverResponse = JSON.parse(xhReq.responseText);

    return serverResponse; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T20:29:25.570

你永远*不需要*“同步行为”；相反，您（开发人员）只需要了解 JavaScript 的异步特性——特别是如何使用匿名回调和处理闭包。

例如，如果你这样做：

```
function doSomething(arg) {
    var number = arg + 10; // for example
    var data = getDetail();
    data = JSON.parse(data);
    element.innerHTML = number + ': ' + data.name;
}

function getDetail() {
    var xhReq = new XMLHttpRequest();
    xhReq.open("POST", "ClientService.svc/REST/GetDetail", false); // bad!
    xhReq.send(null);
    return xhReq.responseText;
} 
```

它可以异步编写：

```
function doSomething(arg) {
    var number = arg + 10;
    getDetail(function(data) {
        data = JSON.parse(data);
        element.innerHTML = number + ': ' + data.name;
    });
}

function getDetail(cb) {
    var xhReq = new XMLHttpRequest();
    xhReq.open("POST", "ClientService.svc/REST/GetDetail", true);
    xhReq.onreadystatechange = function() {
        if (xhReq.readyState == 4) cb(xhReq.responseText);
    }
    xhReq.send(null);
} 
```

请注意，在异步示例中，您的内部回调函数（仅在网络请求完成后执行）仍然可以访问外部函数的`number`变量。这是因为 JavaScript 具有*静态作用域*——换句话说，当您声明一个函数时，该函数将永久访问包含该函数的任何函数的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:26:37.610

通常它看起来像这样：

```
var xhReq = new XMLHttpRequest();
xhrReq.onreadystatechange = function() {
  if (this.readyState != 4) return;
  if (this.status != 200) ...process error...

  var serverResponse = JSON.parse(xhReq.responseText);
  ... process the response ...
}    
xhReq.open("POST", "ClientService.svc/REST/TestHtmlSend", true);
xhReq.send(null); 
```

# python - 实时更新python中的绘图

> ID：12680427
> 
> 赞同：0
> 
> 时间：2012-10-01T20:18:11.993
> 
> 标签：python, dynamic, matplotlib

我有一个 python 代码，我在其中计算大量参数值的数量，然后将数量绘制为参数的函数。这是一个例子

```
t = np.linspace(1,100,10000)
q = np.zeros(10000)
for i in np.arange(10000)
   q[i] = func(t[i])
plt.plot(t,q)
plt.show() 
```

但是我希望绘图能够动态更新，以便每次`q`计算数组的新元素时都会将其添加到绘图中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:30:16.730

```
from pylab import *

import time

ion()

tstart = time.time()               # for profiling
x = arange(0,2*pi,0.01)            # x-array
line, = plot(x,sin(x))

for i in arange(1,200):
    line.set_ydata(sin(x+i/10.0))  # update the data
    draw()                         # redraw the canvas

print 'FPS:' , 200/(time.time()-tstart) 
```

从我在评论中发布的帖子中撕下来......

# javascript - 视频 html5 元素上的播放事件是什么？

> ID：12680432
> 
> 赞同：19
> 
> 时间：2012-10-01T20:18:32.660
> 
> 标签：javascript, jquery, html5-video

我在页面上嵌入了一个视频 html5 标签。当用户单击“播放按钮”时，我需要触发一个动作。但我找不到如何将其绑定到我的操作。有我需要的活动吗？我正在使用 jQuery ...

谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-01T20:23:20.347

这个 W3C 演示页面有帮助吗？[http://www.w3.org/2010/05/video/mediaevents.html](http://www.w3.org/2010/05/video/mediaevents.html)看来播放事件只是“播放”。

例如：

```
$('video').bind('play', function (e) {
    // do something
}); 
```

或者

```
$('video').on('play', function (e) {
    // do something
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-01T20:34:42.113

我使用了以下[页面](http://www.w3.org/2010/05/video/mediaevents.html)中的代码并将其剥离：

```
<script language="javascript">
    document.addEventListener("DOMContentLoaded", init, false);

    function init() {
        var _video = document.getElementById("video");
        _video.addEventListener("playing", play_clicked, false);
    }

    function play_clicked() {
        alert("play was clicked");
    }
</script>

<video id='video'
  controls preload='none' 
  poster="http://media.w3.org/2010/05/sintel/poster.png">
  <source id='mp4'
    src="http://media.w3.org/2010/05/sintel/trailer.mp4"
    type='video/mp4'>
  <p>Your user agent does not support the HTML5 Video element.</p>
</video> 
```

希望我能帮上忙。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-08-26T19:34:47.847

HTML5 视频元素有一个`onplay`您可以使用的事件，不需要添加侦听器的额外步骤。此解决方案也不需要 JQuery。

```
var myVid = document.getElementById('video');    
if (myVid !== null) { // Possibility of no video loaded in DOM
    myVid.onplay = function () {
        //do something
    };
} 
```

[MDN](https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onplay)有完整的细节。

# c++ - Mac 10.7/10.8 上的 C++ 运行时错误

> ID：12680433
> 
> 赞同：0
> 
> 时间：2012-10-01T20:18:34.097
> 
> 标签：c++, eclipse, macos, dylib

我正在使用 Eclipse、GCC 4.8 并在 Mac OS 10.7 和 10.8 上构建 C++ 项目。在大多数情况下，项目构建和运行正常，除了一些特定的功能。例如：

```
int main( int argc, char ** argv ) {
    string a = "test";
    string b = "-bla";
    string c;
    c = a + b;
    return 0;
} 
```

编译成功：

> ****为项目工作构建配置调试******
> 
>  **生成所有构建文件：../working.cpp 调用：GCC C++ 编译器 g++ -O0 -g3 -Wall -c -fmessage-length=0 -std=c++11 -MMD -MP -MF"working.d" - MT"working.d" -o "working.o" "../working.cpp" 完成构建：../working.cpp 构建目标：Working 调用：MacOS X C++ Linker g++ -o "Working" ./working. o 完成的建筑目标：工作
> 
> ****构建完成********

 ****但是，我收到了这个运行时错误：

```
dyld: lazy symbol binding failed: Symbol not found: __ZNSsaSEOSs
  Referenced from: /Volumes/Macintosh HD/Users/zeroliu/Study/CPP/Working/Debug/Working
  Expected in: /usr/lib/libstdc++.6.dylib

dyld: Symbol not found: __ZNSsaSEOSs
  Referenced from: /Volumes/Macintosh HD/Users/zeroliu/Study/CPP/Working/Debug/Working
  Expected in: /usr/lib/libstdc++.6.dylib 
```

我发现错误来自

```
string c;
c = a + b; 
```

有趣的是，如果我进行以下更改：

```
string c = a+b; 
```

或者

```
c = a; 
```

程序运行完美。

有人对这里发生的事情有任何想法吗？谢谢****

# c# - 由于加载时未触发 NewDocument 事件，如何处理 Word DocumentChange 事件

> ID：12680436
> 
> 赞同：6
> 
> 时间：2012-10-01T20:18:43.957
> 
> 标签：c#, .net, events, ms-word, add-in

首次加载 Microsoft Word 时不会触发 NewDocument 和 DocumentOpen 事件。当 Word 的一个实例已经打开并打开一个新的或现有的文档时，这些事件就会很好地触发。

我看到的建议是处理 DocumentChange 事件（在 Word 加载时总是触发）而不是其他两个事件。

我的问题是我该怎么做？**DocumentChange 事件没有任何参数，所以我怎么知道文档（新的或现有的）刚刚打开的时间？**

此外，我已经在 DocumentChange 事件中有逻辑，并且对新文档和现有文档的处理是不同的，因此我不能将所有代码都扔到事件中。

```
private void ThisAddIn_Startup(object sender, System.EventArgs a)
{
  this.Application.DocumentChange += new ApplicationEvents4_DocumentChangeEventHandler(Application_DocumentChange);
}

private void Application_DocumentChange()
{
  // How do I handle NewDocument or DocumentOpen?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:04:24.027

[该](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/3027424c-add3-4935-a822-b517147dbdef/)链接将为您提供帮助，基本上他们所说的是 ThisAddIn_Startup在DocumentOpen 事件完成运行后运行**。**还有一个解决该问题的方法，只需点击超链接即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T19:16:15.440

所以我最终在 ThisAddIn_Startup 中处理了加载的文档。如果文档的 Path 是一个空字符串，那么我们就知道该文档是新的，并且从未保存在本地机器上。否则，我知道它已保存（包括在临时目录中）并且我将其作为现有文档处理。

```
private void ThisAddIn_Startup(object sender, System.EventArgs a)
{
  try
  {
    Word.Document doc = this.Application.ActiveDocument;
    if (String.IsNullOrWhiteSpace(doc.Path))
    {
      ProcessNewDocument(doc);
    }
    else
    {
      ProcessDocumentOpen(doc);
    }
  }
  catch (COMException e)
  {
    log.Debug("No document loaded with word.");
  }

  // These can be set anywhere in the method, because they are not fired for documents loaded when Word is initialized.
  ((MSWord.ApplicationEvents4_Event)this.Application).NewDocument +=
    new MSWord.ApplicationEvents4_NewDocumentEventHandler(Application_NewDocument);
  this.Application.DocumentOpen +=
    new MSWord.ApplicationEvents4_DocumentOpenEventHandler(Application_DocumentOpen);
} 
```

正如我对 Deni 回答的评论所述：在 ThisAddIn.Desiger.cs 的 Initialize() 方法中设置 DocumentOpen 事件处理程序适用于现有文档，但在 Word 打开时初始化的新文档不会调用 NewDocument，因此此解决方案不起作用。所以我在 ThisAddIn_Startup 事件中保留了 DocumentOpen 和 NewDocument 的设置，否则 DocumentOpen 也会在使用 Word 加载文档时被触发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-04T18:12:05.367

我已经使用 Startup 处理程序中的 Application.Documents 集合来查找加载项加载之前存在的所有文档。它完成了与您的答案相同的事情，此外，如果您稍后（而不是在 Word 启动时）出于任何原因按需加载加载项，则枚举集合不仅可以获得活动文档。

每当 ActiveDocument 更改时，就会触发 DocumentChange() 事件。Word 一次只有一个活动文档。在多个打开的 Word 文档之间切换将触发该事件。此外，当关闭文档时，该事件可能会在另一个打开的文档变为活动状态时触发。它也会在最后一个文档关闭后触发，在这种情况下，Application.ActiveDocument 将无效。

# ruby-on-rails - RoR 投票系统。按条件计票投票=真或投票=假不工作

> ID：12680437
> 
> 赞同：1
> 
> 时间：2012-10-01T20:18:53.113
> 
> 标签：ruby-on-rails, voting

我有这些模型

*   问题
*   投票

发行 has_many votes 和 Vote belongs_to issue。Vote 模型有一个布尔投票属性。在问题索引视图中，我想循环浏览问题并显示标题、正文、赞成票按钮、反对票按钮以及显示当前有多少赞成票和反对票的相应标签。我使用带有隐藏字段的表单来执行此操作，用于 issue_id 和投票（1 或 0）。问题模型上的方法应该计算选票。但我不断得到 0 返回。Totalvotes_count 有效，但其他两个无效。在服务器日志中，我看到使用正确的 issue_id 和投票值创建投票，但查询由于某种原因无法正常工作。

**问题模型**

```
class Issue < ActiveRecord::Base
attr_accessible :body, :end_at, :title
validates_presence_of :title, :body, :end_at
has_many :votes

def upvotes_count
    votes.count(:conditions => "vote = 1")
end

def downvotes_count
    votes.count(:conditions => "vote = 0")
end

def totalvotes_count
    votes.count
end

end 
```

**index.html.erb**

```
<% @issues.each do |issue| %>
<li>
    <div class="issue">
        <h2><%= issue.title %></h2>
        <p><%= issue.body %></p>

        <%= form_for(@vote, :remote => true) do |f| %>
        <%= f.hidden_field "issue_id", :value => issue.id %>
        <%= f.hidden_field "vote", :value => 1 %>
        <%= submit_tag issue.upvotes_count.to_s + " Up", :class => 'up-vote' %>
        <% end %>

        <%= form_for(@vote, :remote => true) do |f| %>
        <%= f.hidden_field "issue_id", :value => issue.id %>
        <%= f.hidden_field "vote", :value => 0 %>
       <%= submit_tag issue.downvotes_count.to_s + " Down", :class => 'down-vote' %>
        <% end %>

    </div>
</li>
<% end %> 
```

**投票控制器**

```
class VotesController < ApplicationController

  def index
    @votes = Vote.find(:all, :include => :issue)
  end

  def new 
    @vote = Vote.new(params[:vote])

    respond_to do |format|
        format.html # new.html.erb
        format.xml  { render :xml => @vote }
    end
  end

  def create
    @vote = Vote.new(params[:vote])

    respond_to do |format|
      if @vote.save
          format.js
          format.html { redirect_to issues_path }
      else
          format.html { redirect_to issues_path }
      end
    end
  end

end 
```

**问题控制器（部分）**

```
class IssuesController < ApplicationController
  # GET /issues
  # GET /issues.json
  def index
    @issues = Issue.all

    @vote = Vote.new

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @issues }
    end 
```

结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:34:42.343

我相信你的问题是你没有`self`在模型中调用你的方法，但是正如 tamersalama 提到的，这对于简单的投票跟踪来说可能是过度的。`:upvote`在and`:downvote`属性上编写一个简单的 +1 方法可能是最简单的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:22:14.207

的默认值是多少`vote`。如果它是 NULL - 那么两者都行不通。

更仔细地阅读这个问题 - 它看起来像`vote`确定它是赞成还是反对的价值。我建议您对 使用 STI（单表继承）机制`Vote`，在其中创建一个类型列来存储投票类型（:upvote，:downvote），并在 type 属性上设置一个索引。

然而，所有这一切似乎都是矫枉过正（取决于您的域的其余部分）。您可以简单地将投票与每个问题一起缓存。一列赞成票，一列反对票就足够了。除非您想跟踪投票上的其他属性（例如投票的人）。

# sql-server-2008 - 在 SQL Server 2008 中加密的数据在 2008 R2 中不起作用

> ID：12680440
> 
> 赞同：2
> 
> 时间：2012-10-01T20:19:00.900
> 
> 标签：sql-server-2008, sql-server-2008-r2

我在 SQL Server 2008 中加密了卡信息。迁移到 SQL Server 2008 R2 后，应用程序无法解密信用卡列。

它与 2008 R2 的新主密钥有什么关系吗？是什么导致了问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-18T07:46:45.907

您是否检查过扩展属性中的排序规则在迁移后发生了变化？![在此处输入图像描述](../Images/07096ece680d51f29e55b29961d913ef.png)

# java - 通过 Java 套接字错误传输文件

> ID：12680443
> 
> 赞同：0
> 
> 时间：2012-10-01T20:19:13.037
> 
> 标签：java, file, sockets, tcp, transfer

我正在尝试将 XML 文件从桌面服务器传输到 Android 客户端，但我在 Android 设备上只获得了整个文件的 1024 字节。我的代码是：

* * *

## 将文件从桌面服务器发送到 Android 客户端：

```
byte[] mybytearray = new byte[(int) filePianificazione.length()];

BufferedInputStream bufferedInputStream = new BufferedInputStream(new FileInputStream(filePianificazione));

bufferedInputStream.read(mybytearray, 0, mybytearray.length);

bufferedInputStream.close();

out.write(mybytearray, 0, mybytearray.length);

out.flush(); 
```

* * *

## 从Android客户端接收文件到服务器：

```
byte[] mybytearray = new byte[1024];

FileOutputStream fos = new FileOutputStream(file.getAbsolutePath());

BufferedOutputStream bos = new BufferedOutputStream(fos);

int bytesRead = in.read(mybytearray, 0, mybytearray.length);

bos.write(mybytearray, 0, bytesRead);

bos.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:22:37.217

首先你声明`byte[] mybytearray = new byte[1024];`

然后你做一个单

```
int bytesRead = in.read(mybytearray, 0, mybytearray.length);

bos.write(mybytearray, 0, bytesRead); 
```

在您的读取代码（Android 客户端）中，您只读取 1024 个字节，因为这是您的输入缓冲区的长度，并且您只读取一次。您需要有一个`while`循环，该循环将继续从您的输入流中读取，然后将其写出，直到您到达 EOF。

就像是：

```
while(in.available() > 0)
{
    int bytesRead = in.read(mybytearray, 0, mybytearray.length);
    bos.write(mybytearray, 0, bytesRead);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:06:42.430

在 Java 中复制流的规范方法如下：

```
while ((count = in.read(buffer)) > 0)
{
  out.write(buffer, 0, count);
} 
```

# android - navigator.geolocation.getCurrentPosition 总是得到错误代码 3: timeout expired

> ID：12680444
> 
> 赞同：13
> 
> 时间：2012-10-01T20:19:15.673
> 
> 标签：android, geolocation

我正在使用 cordova-2.0.0 和 android 模拟器 google api level16。

每当我跑步时，`navigator.geolocation.getCurrentPosition`我总是会得到`error3`. 我的代码简介如下：

```
 // Wait for Cordova to load
            document.addEventListener("deviceready", onDeviceReady, false);

            // Cordova is ready
            function onDeviceReady() {
                console.log("Entering index.html.onDeviceReady");
                var networkState = navigator.network.connection.type;
                getPosition(networkState);
}

function getPosition(networkState) {
    console.log("Entering getPosition function");
    console.log("networkState is: " + networkState);
    if (networkState !== null) {
        navigator.geolocation.getCurrentPosition(onSuccess, onError, {
            maximumAge : Infinity,
            timeout : 5000,
            enableHighAccuracy : true
        });
    } else {
        alert('Please check your network connection and try again.');
    }
    console.log("Leaving getPosition function");
}

// function for lat & lng
function onSuccess(position) {
    console.log("Entering onSuccess(position) function");
    console.log("Latitude is: " + position.coords.latitude);
    console.log("longitude is: " + position.coords.longitude);
    lat = position.coords.latitude;
    lng = position.coords.longitude;
    console.log("Leaving onSuccess(position) function");
}

// function for lat & lng
function onError(error) {
    console.log("Entering onError(error) function");
    alert('code: ' + error.code + '\n' + 'message: ' + error.message + '\n');
    console.log("Leaving onError(error) function");
} 
```

**如果有人知道为什么`error3`提出，请提出建议。非常感谢**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T14:31:13.140

我确实设置了

```
enableHighAccuracy: false 
```

也是，但害怕“错误代码3”不断弹出......

```
browser / settings / privacy and security / position / delete position access data 
```

确实有帮助...只有电源循环（但我想浏览器终止也会这样做）Android（4.1.2）确实迫使浏览器重复“共享位置？”的问题。对用户来说，将错误代码 3 抛出门外......

我想在某些情况下（我不能重复，对不起）浏览器为该站点存储了一个无效的位置 - 或者 - 记住了该站点的共享拒绝......

很抱歉回答迟了（也许以不完整的方式）......如果有人有更好的证据，请分享...... :-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T04:23:46.530

这让我难倒了好一阵子。基本上我可以让它返回数据的唯一方法是通过*专门*传递

```
enableHighAccuracy: false 
```

如果我启用它，它总是超时。

# internet-explorer-8 - 字体真棒没有出现在 Internet Explorer 8 中

> ID：12680446
> 
> 赞同：15
> 
> 时间：2012-10-01T20:19:23.770
> 
> 标签：internet-explorer-8, font-awesome

我们最近开发了一个网站，该网站强烈依赖 Font Awesome 作为其设计的一部分。我们将标准实现与 before:content 及其提供的 CSS 一起使用。

由于某种原因，Font Awesome 没有在 IE8 中显示。我花了好几个小时进行故障排除和尝试各种修复，但没有运气。

我有：

*   将 EOT 的 mimetype 设置为 application/vnd.ms-fontobject
*   设置 OTF、TTF 的 mimetype 为 application/octet-stream
*   加载所有 CSS 后执行 HTML5Shiv。
*   在页面加载时重新加载 CSS 或 DOM 的各种尝试

这是网站：[http](http://www.tetakere.org.nz) ://www.tetakere.org.nz - Hotlinks 框是 Font Awesome 的一个很好的例子

有没有人对让这个网站显示 Font Awesome 的其他方法有任何想法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-04T22:40:58.953

经过一些痛苦的故障排除后，我终于解决了。

解决方案是将 HTML5Shiv 的加载从该`<head>`部分移动到`</body>`标记之前。

```
<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
</body> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-03-13T05:36:05.617

我知道这是一个较老的问题，但是我在这个问题上遇到了很多麻烦，除了最后一个答案之外，这些答案都没有帮助。

换了个头...

对我有用的是：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

这也有效（我提到的最后一个答案）：

```
<meta http-equiv="X-UA-Compatible" content="IE=8"> 
```

另外，我读到（[使用标签强制关闭 IE 兼容模式](https://stackoverflow.com/questions/3449286/force-ie-compatibility-mode-off-in-ie-using-tags#comment26890406_3449338)）您应该将该元标签放在所有其他元标签之上，并且放在任何条件 IE 语句之前；否则元标记将失效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-31T08:48:10.797

我不需要 html5shiv 来让 FontAwesome 在 IE8 中工作。 [这个答案](https://stackoverflow.com/a/12459447/682583)（重新创建 .eot 文件并替换旧文件）解决了我的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-19T21:11:44.313

我尝试了从修改我的 apache 配置到 .htaccess 文件的所有方法，但都没有成功。在 IE 开发工具中，我偶然发现了“文档模式”，默认为 IE7。因此，经过一些研究，我发现了这个元标记：

```
<meta http-equiv="X-UA-Compatible" content="IE=9"> 
```

现在 IE 10 和 9 可以正确格式化我的网站并正确显示所有 Font Awesome 图标。

如果你仍然想要 IE 8 兼容，那么你可以从这个开始：

```
<meta http-equiv="X-UA-Compatible" content="IE=8"> 
```

希望有帮助...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-25T12:47:30.567

1.  将此添加到 htaccess。“BrowserMatch MSIE 最佳标准支持标头集 X-UA 兼容 IE=8 env=最佳标准支持”
2.  试图重新转换eot字体
3.  doc 可压缩性模式更改
4.  试过usleep功能
5.  设置间隔js
6.  添加谷歌html5脚本
7.  在 ie8 的正文部分调用 css
8.  添加数据图标类
9.  广告伪元素js
10.  在 CSS 中添加 png 和 svg 过滤器
11.  检查服务器中的字体类型权限

但最终在添加时有效

> **.sass 和 .less CSS**

文件

快乐编码

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-04T12:12:06.023

如果您使用的是 IE8，则需要添加 html5.js 脚本，例如：

```
<!--[if lt IE 9]>
  <script     src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<![endif]--> 
```

它对我有用，我相信它会起作用。参考链接 [https://github.com/FortAwesome/Font-Awesome/wiki/Troubleshooting#internet-explorer-compatibility-mode](https://github.com/FortAwesome/Font-Awesome/wiki/Troubleshooting#internet-explorer-compatibility-mode)

# javascript - 如何遍历 JavaScript 对象并检查空值？

> ID：12680452
> 
> 赞同：3
> 
> 时间：2012-10-01T20:19:57.250
> 
> 标签：javascript, isnull

假设我有一个 JavaScript 对象，例如：

```
var obj = {};
obj.computers = {};
obj.computers.favorite = "Commodore 64";
obj.computers.popular = "Apple"; 
```

现在，我可以轻松地检查 null，例如：

```
if(obj != 'undefined' && obj != null) {
    if(obj.computers != 'undefined' && obj.computers != null)) {
        ..... 
```

如您所见，如果我需要查看是否`obj.computers.favorite`已设置，我必须在其中真正嵌套一些条件逻辑。我们的一些对象有 3、4、5 层深。

这就是我希望能够做到的：

```
var fav = obj.computers.favorite || 'Unknown'; 
```

但我意识到我需要用某种方法来包装它。就像是：

```
var fav = getValueOrDefault(obj.computers.favorite, 'Unknown'); 
```

建议表示赞赏。

谢谢

**编辑**

我对“未定义”的检查实际上并不是我使用的。当我问这个问题时，它只是从我的脑海中浮现出来。哈哈

但我想知道，我可以只包装一个 try/catch 并在异常时抛出默认值吗？

```
function(obj, default) {
    try {
        if(obj != null) {
            return obj;
        } else {
            return default;
        }
    } catch(ex) {
        return default;
    }
} 
```

另外，感谢 Shusi 指出多余的变量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T20:25:05.117

你真的可以写：

```
(obj && obj.computers && obj.computers.favorite) || 'Unknown' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T20:46:39.500

您可以使用*辅助*函数来完成。如果我正确理解您的问题，您的对象**可能具有**任意深度对象，并且您希望访问这些任意嵌套属性而不会弄乱您的代码。我构建了一个`Nested`函数，`get()`如果设置了任意属性，则可以使用该函数，如果未设置，则可以使用默认值。

```
var Nested = function() {};
// prop is a dot-separated path like "foo.bar.baz"
Nested.prototype.get = function(prop, _default) {
    var current = this;
    $.each(prop.split("."), function(i, e) {
        current = current[e] || undefined;
        if (current == undefined)
            return false;
    });
    return current || _default;
} 
```

然后你可以写这样的代码

```
var fav = obj.get("computers.favourite", "Linux");
// this emulates
var fav = obj.computers.favourite || "Linux"; // throws error 
```

正如你所看到的，打字并没有那么多。当然，它不像*普通的 Javascript* ......[这是小提琴](http://jsfiddle.net/BwSbu/1/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-01T21:07:36.993

我写这篇文章是为了帮助您处理您的一个问题：“*我需要查看是否设置了 obj.computers.favorite* ”。

```
Object.prototype.isset = function (/* string */ full_path)
{
    var props = full_path.split('.');
    var self = this; /* note that self is usually the window object */

    for (var ii = 0; ii < props.length; ++ii)
    {
        var prop = props[ii];
        var hasMoreComing = ii < props.length - 1 ? true : false;

        if (self[prop] !== null && typeof self[prop] === 'object' && hasMoreComing)
        {
            self = self[prop];
            continue;   // Move up one level.
        }
        else if (hasMoreComing)
            return false;    // ..because user queries a subproperty of a value type

        return self.hasOwnProperty(prop);
    }
}; 
```

**测试代码：**

```
var test = {};

test.kuk = {};
console.log( test.isset('kuk') );  // Prints true.

test.kuk.fitta = {};
console.log( test.isset('kuk.fitta') ); // Prints true.

test.kuk.fitta = null;
console.log( test.isset('kuk.fitta') ); // Prints true.

test.kuk.fitta = undefined;
console.log( test.isset('kuk.fitta') );  // Prints true

delete test.kuk.fitta;
console.log( test.isset('kuk.fitta') );  // Prints false

test.kuk.fitta = 123;
console.log( test.isset('kuk.fitta.doesnt.exist') );  // Prints false 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T20:25:05.767

以下函数将字符串作为参数，如果存在则返回对象

```
 function getValueOrDefault(str , obj, deflt){
    var a = str.split("."); o = obj;
    for(var i =0; i < a.length; i++){
         o = obj[a[i]];
         if(!o){
           return deflt;
         }
    }
      return o;
}

var obj = {};
obj.computers = {};
obj.computers.favorite = "Commodore 64";
obj.computers.popular = "Apple";
getValueOrDefault('computers.favorite', obj, 'Unknown'); 
```

注意：在将属性分配给对象时，不得使用 var，例如。`var obj.computers.favorite` 是语法错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-01T20:25:42.257

不幸的是，没有一种超级简单的方法可以解决这个问题，但是您不需要同时检查 null 和 undefined。因为 null 和 undefined 都是假的，你可以这样做：

```
if (obj && obj.computers) {
  var fav = obj.computers.favorite || 'unknown';
} 
```

它实际上并没有解决你的抱怨是什么，但它没有你想象的那么痛苦。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-03-25T18:24:57.300

[可选](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining)的链接运算符是处理此问题的更新方法：

```
let favorite = obj?.computers?.favorite; 
```

将此与[nullish coalescing operator](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_operator)结合使用，您可以精确地执行最初要求的操作：

```
let favorite = obj?.computers?.favorite ?? 'Unknown'; 
```

请注意，这些运算符都没有得到普遍支持。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-28T10:24:39.097

您也可以使用*JavaScript ES5* `reduce`函数执行此操作：

```
function get(root, member) {
    return member.split('.').reduce((acc, value) => {
        return (acc && typeof acc[value] !== 'undefined') ? acc[value] : undefined
    }, root);
} 
```

它从成员字符串中创建一个数组，然后随着成员的减少，累加器逐渐在对象内遍历。

你可以像这样使用它，即使是数组：

```
let obj = {
    computers : {
        favorite : "Commodore 64",
        popular : "Apple",
        list: [
            {
                sn : "TDGE52343FD76",
                price: "9867.99",
                options: {
                    fanless: true
                }
            }
        ]
    }
}

get(obj, 'computers.popular');
// => "Apple"
get(obj, 'computers.list.0.sn');
// => "TDGE52343FD76"
get(obj, 'computers.list.0.options.fanless');
// => true
get(obj, 'computers.list.0.options.runsWithoutEletricity');
// => undefined
get(obj, 'computers.list.0.options.runsWithoutEletricity') || "too bad..." ;
// => "too bad..." 
```

有一个codepen可以[安全遍历js对象](https://codepen.io/gabriel-glenn/pen/NZXrBV)

# perl - 访问散列中的值

> ID：12680456
> 
> 赞同：-2
> 
> 时间：2012-10-01T20:20:14.217
> 
> 标签：perl, hash

我在访问哈希值时遇到问题，我不确定我做错了什么。我做了一些 Perl，但没有太多使用哈希。

我正在尝试访问散列散列中的散列值。

这是我构建哈希的地方

```
sub buildList
{
    my ($name,$gender,$father,$mother,$age);
    my %bear_ref=();

    open IN, "<input.txt" or die "can't open file";

    while(<IN>) {
        ($name, $gender, $father, $mother, $age ) = split(/:/);
        $bear_ref{ $name } { 'gender' } = $gender;
        $bear_ref{ $name } { 'mother' } = $father;
        $bear_ref{ $name } { 'father' } = $mother;
        $bear_ref{ $name } { 'age' } = $age;
    }
    close IN;
    return \%bear_ref;
} 
```

当我迭代哈希中的键时，我可以访问该列表，但不能直接访问。所以我假设它与我从“keys() 循环”中获取值的方式有关

```
for my $name (keys %$ref) {
   $father= $ref->{ $name }->{ 'father'}; # works
   $mother= $ref->{ $name }->{ 'mother'}; # works
   getTree($name, $ref);
}

sub getTree
{
    my $bear = shift;
    my $ref = shift;
    my ($father, $mother);
     $father= $ref->{ $name }->{ 'father'}; # doesn't work...have also tried with %$ref->
     $mother= $ref->{ $name }->{ 'mother'}; # doesn't work...have also tried with %$ref->
    print "$father : $mother\n";

} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T20:23:15.220

`$name`应该`$bear`在`getTree`子里。

```
sub getTree
{
    my $bear = shift;
    my $ref = shift;
    my ($father, $mother);
    ## note that I am using $bear instead of $name since $name is not defined
    $father= $ref->{ $bear }->{ 'father'};
    $mother= $ref->{ $bear }->{ 'mother'};
    print "$father : $mother\n";
} 
```

**注意：** `use strict`并且`use warnings`会有所帮助。

# ruby-on-rails - 当 `:through` 模型具有复杂范围时使用 `has_many :through` 关联（Rails 中可能存在错误？）

> ID：12680460
> 
> 赞同：0
> 
> 时间：2012-10-01T20:20:44.523
> 
> 标签：ruby-on-rails, activerecord

在我的 rails 应用程序中，我有一个具有复杂 default_scope 的特定模型，并且我试图在一个通过该模型的模型上创建 has_many 关系。不幸的是，我收到了奇怪的错误消息，这似乎是由 :through 模型的默认范围引起的。这是我的设置：

```
# == Schema Information
#
# Table name: training_classes
#
#  id            :integer         not null, primary key
#  created_at    :datetime        not null
#  updated_at    :datetime        not null
#
class TrainingClass < ActiveRecord::Base
  has_many :meetings, class_name: :ClassMeeting, foreign_key: :class_id, dependent: :destroy, inverse_of: :training_class
  has_many :training_records, foreign_key: :class_id, dependent: :destroy, inverse_of: :training_class

  scope :with_date, joins("
    LEFT OUTER JOIN
      (#{ClassMeeting.earliest_dates.to_sql}) as class_meeting
    ON class_meeting.class_id = training_classes.id
  ")
  default_scope with_date.order('class_meeting.start_time ASC')
end

# == Schema Information
#
# Table name: training_records
#
#  id         :integer         not null, primary key
#  class_id   :integer
#  created_at :datetime        not null
#  updated_at :datetime        not null
#
class TrainingRecord < ActiveRecord::Base
  belongs_to :training_class, foreign_key: :class_id, inverse_of: :training_records
  has_many :attendance_records, inverse_of: :training_record, dependent: :destroy
  has_many :meetings, class_name: :ClassMeeting, through: :training_class # This doesn't work correctly
end

# == Schema Information
#
# Table name: class_meetings
#
#  id         :integer         not null, primary key
#  class_id   :integer
#  start_time :datetime
#  end_time   :datetime
#  created_at :datetime        not null
#  updated_at :datetime        not null
#
class ClassMeeting < ActiveRecord::Base
  belongs_to :training_class, foreign_key: :class_id, inverse_of: :meetings
  has_many :attendance_records, class_name: :AttendanceRecord, foreign_key: :meeting_id, dependent: :destroy
  has_many :training_records, through: :training_class # This doesn't work correctly

  scope :earliest_dates, select('
    class_meetings.id,
    class_meetings.class_id,
    MIN(class_meetings.start_time) as start_time'
  ).group('class_meetings.class_id').order('class_meetings.start_time DESC')
end 
```

请注意，在这些示例中，为简单起见，我删除了代码。我很确定与这三个模型之间的关系相关的所有内容都完好无损。此外，关于这些模型的其他所有内容在我的应用程序中都可以正常工作，只是`has_many :x, through: training_class`关系不起作用。这是我收到的错误消息：

```
irb(main):004:0> ClassMeeting.first.training_records
  ClassMeeting Load (0.0ms)  SELECT "class_meetings".* FROM "class_meetings" LIMIT 1
  TrainingRecord Load (0.0ms)  SELECT "training_records".* FROM "training_records" INNER JOIN "training_classes" ON "training_records"."class_id" = "training_classes"."id" WHERE "training_classes"."id" = 1 ORDER BY class_meeting.start_time ASC
ActiveRecord::StatementInvalid: SQLite3::SQLException: no such column: class_meeting.start_time: SELECT "training_records".* FROM "training_records" INNER JOIN "training_classes" ON "training_records"."class_id" = "training_classes"."id" WHERE "training_classes"."id" = 1 ORDER BY class_meeting.start_time ASC
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/sqlite3-1.3.6-x86-mingw32/lib/sqlite3/database.rb:91:in `initialize'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/sqlite3-1.3.6-x86-mingw32/lib/sqlite3/database.rb:91:in `new'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/sqlite3-1.3.6-x86-mingw32/lib/sqlite3/database.rb:91:in `prepare'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/sqlite_adapter.rb:246:in `block in exec_query'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract_adapter.rb:280:in `block in log'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract_adapter.rb:275:in `log'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/sqlite_adapter.rb:242:in `exec_query'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/sqlite_adapter.rb:467:in `select'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/database_statements.rb:18:in `select_all'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/query_cache.rb:63:in `select_all'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/querying.rb:38:in `block in find_by_sql'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/explain.rb:40:in `logging_query_plan'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/querying.rb:37:in `find_by_sql'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/relation.rb:171:in `exec_queries'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/relation.rb:160:in `block in to_a'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/explain.rb:33:in `logging_query_plan'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/relation.rb:159:in `to_a'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/relation/finder_methods.rb:159:in `all'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/associations/has_many_through_association.rb:173:in `find_target'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/associations/collection_association.rb:333:in `load_target'
        from c:in `load_target'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/associations/collection_proxy.rb:87:in `method_missing'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/commands/console.rb:47:in `start'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/commands/console.rb:8:in `start'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:41:in `<top (required)>'
        from script/rails:6:in `require' 
```

和：

```
irb(main):006:0> TrainingRecord.first.meetings      
  TrainingRecord Load (0.0ms)  SELECT "training_records".* FROM "training_records" LIMIT 1
  ClassMeeting Load (0.0ms)  SELECT "class_meetings".* FROM "class_meetings" INNER JOIN "training_classes" ON "class_meetings"."class_id" = "training_classes"."id" WHERE "training_classes"."id" = 23 ORDER BY class_meeting.start_time ASC
ActiveRecord::StatementInvalid: SQLite3::SQLException: no such column: class_meeting.start_time: SELECT "class_meetings".* FROM "class_meetings" INNER JOIN "training_classes" ON "class_meetings"."class_id" = "training_classes"."id" WHERE "training_classes"."id" = 23 ORDER BY class_meeting.start_time ASC
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/sqlite3-1.3.6-x86-mingw32/lib/sqlite3/database.rb:91:in `initialize'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/sqlite3-1.3.6-x86-mingw32/lib/sqlite3/database.rb:91:in `new'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/sqlite3-1.3.6-x86-mingw32/lib/sqlite3/database.rb:91:in `prepare'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/sqlite_adapter.rb:246:in `block in exec_query'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract_adapter.rb:280:in `block in log'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract_adapter.rb:275:in `log'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/sqlite_adapter.rb:242:in `exec_query'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/sqlite_adapter.rb:467:in `select'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/database_statements.rb:18:in `select_all'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/query_cache.rb:63:in `select_all'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/querying.rb:38:in `block in find_by_sql'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/explain.rb:40:in `logging_query_plan'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/querying.rb:37:in `find_by_sql'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/relation.rb:171:in `exec_queries'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/relation.rb:160:in `block in to_a'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/explain.rb:33:in `logging_query_plan'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/relation.rb:159:in `to_a'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/relation/finder_methods.rb:159:in `all'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/associations/has_many_through_association.rb:173:in `find_target'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/associations/collection_association.rb:333:in `load_target'
        from c:in `load_target'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/associations/collection_proxy.rb:87:in `method_missing'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/commands/console.rb:47:in `start'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/commands/console.rb:8:in `start'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:41:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>'irb(main):007:0> 
```

似乎 :through 关系在其repsective查询中包含了默认范围的`order('class_meeting.start_time ASC')`一部分。`TrainingClass`对我来说，这似乎根本不是合理的行为。这是 Rails 的错误吗？我已经能够通过使用 :finder_sql 关系选项使关系正常工作，但这似乎是一个相当尴尬的解决方案。有谁知道我该如何解决这个问题？（也许是一种让关系忽略`TrainingClass`默认范围的方法？）

# magento - 如何使用一些 PHP 规则高度自定义 Magento 销售电子邮件模板？

> ID：12680462
> 
> 赞同：1
> 
> 时间：2012-10-01T20:21:00.447
> 
> 标签：magento

我只需要在付款确认后发送的电子邮件中填写客户购买的产品（课程）的名称。

但据我所知，电子邮件模板不接受 PHP 代码来执行某些规则。

我需要的是类似

```
Congratulations,
Your subscription for Course 1, Course 4 and Course 8 is confirmed. 
```

所以，我想我需要获取产品，将它们放入字符串中，等等......

我怎样才能让它以这种方式工作？有没有办法拆分订购的产品并在 Transactional Emails CMS 中制定这些 php 规则？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T22:27:24.300

Magento 已经在做类似的事情了。

参考：

默认货件电子邮件模板，[app/locale/en_US/template/email/sales/shipment_new.html](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/locale/en_US/template/email/sales/shipment_new.html#L98)：

```
{{layout handle="sales_email_order_shipment_items" shipment=$shipment order=$order}}
{{block type='core/template' area='frontend' template='email/order/shipment/track.phtml' shipment=$shipment order=$order}} 
```

在[`Mage_Core_Model_Email_Template_Filter::layoutDirective()`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Model/Email/Template/Filter.php#L200)和中处理[`::blockDirective()`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Model/Email/Template/Filter.php#L156)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T22:42:48.290

本教程指出了它：

[http://www.webspeaks.in/2011/06/customize-new-order-email-template-in.html](http://www.webspeaks.in/2011/06/customize-new-order-email-template-in.html)

您可以在 phtml 文件中获得 $order ，您可以将所需的 php 放在一起以获得您想要实现的目标。

# java - Java 测试失败（tostring）

> ID：12680466
> 
> 赞同：2
> 
> 时间：2012-10-01T20:21:07.483
> 
> 标签：java

我有这个 Java 程序，但我的测试给了我这个消息：

> testEmployeeTostring: testEmployeeTostring 预期失败 <[id[= 1013, name= Jubal Early, job = ]procurement]> 但是：<[id[= 1013, name= Jubal Early, job = ] 采购]>

我不得不使用`@Override`，我认为这就是问题所在。我希望有人能解决这个问题：

```
public class Employee {

        int id;
        String name;
        JobType job;

        public Employee(int id, String name, JobType job)
        {
                this.id = id;
                this.name = name;
                this.job = job;
        }

        @Override public String toString()
        {
                return ("["+ "id =" + id + ", name = "  + name + ", job = " + job + "]");
        }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T20:23:57.437

] 和“采购”之间有一个空格

**工作 = ] 采购**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T20:24:26.670

带有断言语句的预期字符串中有一个额外的空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T20:25:45.210

你确定你有`equals()`方法被覆盖吗？JUnit 用于`equals()`比较对象。覆盖`hashCode()`总是一个好主意：

```
@Override
public boolean equals(Object o) {
    if (this == o) return true;
    if (!(o instanceof Employee)) return false;
    Employee employee = (Employee) o;
    return id == employee.id && job == employee.job && name.equals(employee.name);

}

@Override
public int hashCode() {
    int result = id;
    result = 31 * result + name.hashCode();
    result = 31 * result + job.hashCode();
    return result;
} 
```

上面的代码假定所有字段都是不可为空的，`JobType`即`enum`. `toString()`只要您比较对象而不是`toString()`对象（不好的做法），顺便说一句，这里可能无关紧要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T20:26:24.907

这可能是由于 JobType.toString() 方法返回了一个额外的空间。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-01T20:27:00.467

我相信您在返回 toString() 方法的字符串中有一些额外的空格，从而使返回的字符串与测试期望的字符串（稍微）不同。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-01T20:25:45.357

与, `String a`_`String b`

你在做`a == b`而不是`a.equals(b)`吗？

# responsive-design - 3 列（左、主、右）站点，但较小的设备在第一列（主、左、右）

> ID：12680469
> 
> 赞同：3
> 
> 时间：2012-10-01T20:21:25.553
> 
> 标签：responsive-design

我一直在挠头，没有运气。设计师有一个 3 栏的网站、两个侧边栏和一个主要内容区域。

专为桌面设计，有左栏、主要内容、右栏。但是，在较小的设备上，我们希望首先堆叠主要内容。

所以通常，你可以通过

```
<div id="left" style="float:left;">...</div>
<div id="right" style="float:right;">...</div>
<div id="main" style="margin-left:[width of left col];">...</div> 
```

或者

```
<div id="left" style="float:left;">...</div>
<div id="main" style="float:left;">...</div>
<div id="right" style="float:left;">...</div> 
```

但这并不能解决在响应时让主要内容区域先出现的问题。我唯一的解决方案是首先使用 main 的标记：

```
<div id="main">...</div> 
<div id="left">...</div>
<div id="right">...</div> 
```

但是我无法为桌面设置样式，因为这些 div 的高度是未知的。

有任何想法吗？太多了？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:43:24.557

来自优秀的[响应式模式网站的](http://bradfrost.github.com/this-is-responsive/patterns.html)[这种布局](http://codepen.io/bradfrost/full/vspLD)似乎正是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T03:08:58.833

```
<div id="left" style="float:left;">...</div>
<div id="main" style="float:left;">...</div>
<div id="right" style="float:left;">...</div> 
```

您可以使用 javascript 获取第一列（左）和第二列（主）的高度。一旦你得到它们的值，你就可以用它来为它们两个放置位置 css 值。

对于主，您将分配一个负顶部位置，将其放在顶部，然后对于左侧，您将放置正顶部位置。

# html - 如何在css上制作类似osx的边框？

> ID：12680471
> 
> 赞同：0
> 
> 时间：2012-10-01T20:21:31.663
> 
> 标签：html, css, border

我想用这样的css做一个边框

![边界](../Images/8542f50846fb740052113c12c9d7e6bf.png)

我现在拥有的是这样的：

```
input,textarea,select {
    font-weight: 400 !important;
    font-family: Monaco !important;
}

input:focus,textarea:focus,select:focus,checkbox:focus,input[type=checkbox]:focus
    {
    border: 2px solid #8aade1;
    -webkit-box-shadow: 0 0 3px #8aade1;

    -moz-box-shadow: 0 0 3px #8aade1;
    -o-box-shadow: 0 0 3px #8aade1;
    box-shadow: 0 0 3px #8aade1;

    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;

    outline: none;
}

/* Desativar borda zuada no firefox */
input::-moz-focus-inner,button::-moz-focus-inner {
    border: 0;
}​ 
```

[http://jsfiddle.net/tNPmT/](http://jsfiddle.net/tNPmT/)
有没有办法让它更相似？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:24:18.643

这将适用于某些浏览器......但不是全部。它不适用于 FF 或 IE 中的选择元素。（我知道。我一周前尝试过。）我知道 Google 做了类似的事情，但是当我尝试查看他们的代码时，它们实际上具有选择元素的*外观*，但实际上并非如此。我想出了一个简单的轮廓，而不是试图获得完全相同的盒子阴影。

不是你想听的，我知道……但那是我的经验。

# php - 如何将页面菜单与数组链接？

> ID：12680478
> 
> 赞同：0
> 
> 时间：2012-10-01T20:21:52.250
> 
> 标签：php

我正在处理孤儿信息我看到了这个链接菜单，但我不知道如何通过以下代码连接我的页面：

关联：`http://example.com/?m=content&a=kidinfo`

```
<?php
$m = array(             
array("title"=>"Home page", "link"=>"?m=index"),            
array("title"=>"Kids Info", "link"=>"?m=content&a=kidinfo"),                
array("title"=>"Gallery", "link"=>"?m=content&a=gal"),                              
array("title"=>"Location", "link"=>"?m=content&a=loc"),             
array("title"=>"About", "link"=>"?m=content&a=about"),              
);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:52:19.910

如果我理解正确，你想按照这个思路做一些事情来填充你的数组......

```
<?php
$baseURL = "http://example.com/";
$m = array(             
array("title"=>"Home page", "link"=>"?m=index"),            
array("title"=>"Kids Info", "link"=>"?m=content&a=kidinfo"),                
array("title"=>"Gallery", "link"=>"?m=content&a=gal"),                              
array("title"=>"Location", "link"=>"?m=content&a=loc"),             
array("title"=>"About", "link"=>"?m=content&a=about"),              
);
?> 
```

然后，当你想输出你的链接时，你可以做一些事情......

```
<?php
foreach($m as $link) {
    $path = $baseURL . $link["link"];
    $title = $link["title"];
    echo "<a href='$path'>$title</a>";
  }
?> 
```

编写该 foreach 块的另一种方法如下...

```
<?php foreach($m as $link): ?>
<a href='<?= $baseURL . $link["link"] ?>'><?= $link["title"] ?></a>
<?php endforeach; ?> 
```

第一个对初学者来说更容易理解，第二个假设您启用了 php 的短标签。

# macos - 某些文件的新自定义导入器偶尔会导致 mdworker 崩溃

> ID：12680482
> 
> 赞同：0
> 
> 时间：2012-10-01T20:22:22.500
> 
> 标签：macos, cocoa, spotlight

我的**Spotlight 导入**器正在从我的应用程序的数百个文档文件中导入元数据。

在带有各种文件的 Xcode 调试器下一切正常。但是，一旦将导入程序安装在系统上，运行导入程序时， **mdworker 进程会因 300 多个文件而崩溃两次。**

堆栈跟踪对指示问题没有多大帮助（一些 STL 库位置） - 有没有办法为在 Spotlight 服务器*的现场*运行的导入程序打开更多调试信息？
特别是**触发崩溃的文件的名称**？

任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T14:51:58.570

好的，只需在调试器下运行几乎所有内容（aka `/Users/`）的导入程序，而不仅仅是最终跟踪问题文件的特定文件，即在 Xcode 方案中`mdimport`用作托管可执行文件和选项

*   `-d2`（或d4或其他）
*   `-g $(BUILT_PRODUCTS_DIR)/MyImporter.mdimporter`
*   `/Users/`

# objective-c - GCD - 具有同步任务的异步队列

> ID：12680483
> 
> 赞同：2
> 
> 时间：2012-10-01T20:22:22.890
> 
> 标签：objective-c, ios, multithreading, ipad, grand-central-dispatch

我正在尝试从 API 下载数据，然后再将其显示给用户。

这就是我正在做的事情：

```
dispatch_queue_t concurrentQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_async(concurrentQueue, ^{

    __block NSMutableArray *newImages;

    dispatch_sync(concurrentQueue, ^{
        newImages = [NSMutableArray array];
        // images retrieved using `NSURLConnection sendSynchronousRequest`
    });

    dispatch_sync(dispatch_get_main_queue(), ^{
        // display images to the user
    });
}); 
```

我的问题是，既然`newImages`是用 声明的`__block`，我是否总是保证`newImages`在主队列执行第二个任务时拥有最新的数据？如果不是，那么将该数组的内容传递到第二个块并确保其最新内容的最安全方法是什么？

我认为我的数据在某个地方搞砸了，因此我问这个问题。

如果这看起来不错，那么我将发布我的完整代码以寻求帮助，以防万一出现其他问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T23:43:12.850

解决方案的草图：

```
q = /* custom serial queue */
urls = /* urls array */;
NSMutableArray *images = [NSMutableArray new];
for (NSURL *url in URLs) {
   NSURLRequest *req = [self imageRequestForURL:url];
   dispatch_async(q, ^{
     UIImage *image = [self imageFromRequest:req];
     [images addObject:newImage];
   }
}
dispatch_async(q, ^{
   dispatch_async(dispatch_get_main_queue(), ^{
     [self applyUpdatesForURLs:urls withImages:images];
   });
} 
```

该队列是标准工作队列。

由于`applyUpdatesForURLs:withImages:`在图像下载块之后被排入串行队列，因此可以保证在下载所有图像后运行该块。

没有同步问题，`images`因为所有使用它的代码都串行运行而不是同时运行。

而 UI 更新最终发生在主线程上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T23:25:24.710

首先，您不能`dispatch_sync()`在并发队列上。（嗯，你可以，但它与 a 完全相同`dispatch_async()`。）`dispatch_sync()`只对串行队列有任何概念意义，你说，“我想等到所有在我之前排队的块结束，然后执行这个块，然后将控制权返回给调用线程。”

其次，[rdelmar 的回答](https://stackoverflow.com/a/12681233/72508)是正确的——你把它复杂化了。即使您不想在 上使用批处理完成处理程序`NSURLConnection`，您当然也不需要在并发队列上嵌套两个块调度 - 只需一个块执行批处理下载（在并发队列上运行异步）与嵌套完成后主队列上的 UI 更新块就好了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T21:21:42.697

你不能在一个并发队列中有多个块来更新一个可变数组——它只是不能正常工作，因为可变容器不是线程安全的。当图像可用时，在主队列中排队一个块，然后将其添加到那里的数组中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T21:17:16.893

您发布的方法看起来过于复杂。为什么不使用 NSURLConnection 方法，sendAsynchronousRequest:queue:completionHandler:。您可以指定 mainQueue 作为队列参数来更新您的 UI。

```
 NSURL *url = [NSURL URLWithString:@"your server address"];
    NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:5];
    [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *theData, NSError *error){
        if (error == nil) {
            //do what you want with theData and update the UI
        }
    }]; 
```

# c# - 打印但需要图像名称

> ID：12680485
> 
> 赞同：1
> 
> 时间：2012-10-01T20:22:24.320
> 
> 标签：c#, printing

我正在尝试打印具有多个帧的单个 tiff 文件。但是，如果我使用 javascript (window.print())，我会打印出整个网页，而不仅仅是 tiff 图像。

所以我环顾 StackOverflow 并找到了一些示例代码。我试图实现它，但问题是代码适用于绝对图像 URL :- 例如“C:\img.jpeg”

***我想知道是否有人可以告诉我如何将我的 imgFax.ImageUrl 转换为实际的图像名称？（否则我会收到一个错误：-“路径中的非法字符”<--- 在我的 System.Drawing.Image img = System.Drawing.Image.FromFile(imgFax.ImageUrl); 代码中）***

如果有人可以向我展示一些示例代码，那就太棒了！谢谢。

```
protected void PrintAll_Click(object sender, EventArgs e) 
{ 
  // number of frames 
  int number = _FaxPages.Count; 

 // for loop to iterate through each frame 
 for (int i = 0; i < number; i++) 
  { 
     // fax ID 
     string _FaxId = Page.Request["FaxId"]; 

     //string _Frame = Page.Request["Frame"]; 

     // current frame 
     _PageIndex = i; 

     // IMG URL 
     imgFax.ImageUrl = "ShowFax.ashx?n=" + _FaxId + "&f=" + _PageIndex + "&mw=750"; 

     PrintDocument pd = new PrintDocument(); 

     pd.PrintPage += PrintPage; 
     pd.Print();   

 } 
```

}

```
private void PrintPage(object o, PrintPageEventArgs e) 
{ 
   System.Drawing.Image img = System.Drawing.Image.FromFile(imgFax.ImageUrl); 
   Point loc = new Point(100, 100); 
   e.Graphics.DrawImage(img, loc); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:35:35.013

我不确定您是否可以通过 PrintDocument 在 ASP 中进行任何打印。这都是服务器端代码，而打印将在 -**并由**客户端的浏览器完成。我认为您必须通过 JavaScript 来完成，但不能打印整个页面 - 您必须创建另一个页面，仅显示要打印的内容，然后将用户重定向到那个较小的页面（例如在弹出窗口），然后通过 javascript 自动打印。我不是 100% 确定，但我使用的所有银行网站似乎都遵循这一点，这在一般情况下很常见。

例如，这是一篇采用这种精确方法的文章： http: [//www.dotnetcurry.com/ShowArticle.aspx?ID=92](http://www.dotnetcurry.com/ShowArticle.aspx?ID=92)

请记住，您的小“打印页面”实际上应该显示您要打印的内容:)

关于打印图像的另一个不错的链接：[http ://forums.asp.net/post/3369436.aspx](http://forums.asp.net/post/3369436.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:35:52.573

您可以将单个 tiff 图像拆分为单独的文件，如此处所示[，](http://social.msdn.microsoft.com/forums/en-US/csharpgeneral/thread/51ba8a7e-fce0-47f3-800c-102295f50c6d)然后您可以为每个图像拥有一个唯一的 URL：

```
static String[] SplitFile(String file_name)
{
    System.Drawing.Image imageFile = System.Drawing.Image.FromFile(file_name);
    System.Drawing.Imaging.FrameDimension frameDimensions = new System.Drawing.Imaging.FrameDimension(imageFile.FrameDimensionsList[0]);
    int NumberOfFrames = imageFile.GetFrameCount(frameDimensions);
    string[] paths = new string[NumberOfFrames];
    for (int intFrame = 0; intFrame < NumberOfFrames; ++intFrame)
    {
        imageFile.SelectActiveFrame(frameDimensions, intFrame);
        Bitmap bmp = new Bitmap(imageFile);
        paths[intFrame] = System.IO.Path.GetDirectoryName(Application.ExecutablePath) + @"\" + intFrame.ToString() + ".tif";
        bmp.Save(paths[intFrame], System.Drawing.Imaging.ImageFormat.Tiff);
        bmp.Dispose();
    }
    imageFile.Dispose();
    return paths;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T20:56:32.720

嗯，好的.. 我知道我已经回答了一些问题，但我注意到您已将问题标记为粗体.. 所以这里是：您不能，没有办法。

您拥有的指向图像的 URL 只是一个 Internet 链接。它可能指向图像、网站或一些二进制数据。远程网络服务器读取 URL 参数并决定如何处理它。根本没有文件名。只有网页“ShowFax.ashx”的 URL 及其参数。

某些网页可能会返回一个特殊的标题、内容处置/附件，并且在该标题中它们有时可能会为您提供一个文件名。这就是“下载”网页向浏览器提供信息的方式，因此它可能会向用户显示“将文件另存为..”窗口。但是，情况可能并非如此。您在一个简单地从 URL 读取图像的 aspx 控件中显示图像。这一切都是由控件自动完成的，因此您甚至没有机会查看标头 - 当然，除非您手动发送请求、捕获流、查看、将其重定向回控件等。恕我直言，太多了为简单的打印任务而工作，而这仅仅是个开始！

# asp.net-mvc - 如何将打字稿添加到现有的 Asp.Net MVC 项目？

> ID：12680486
> 
> 赞同：46
> 
> 时间：2012-10-01T20:22:24.460
> 
> 标签：asp.net-mvc, typescript

我喜欢 typescript 背后的想法，但似乎无法弄清楚如何将它包含在 ASP.Net MVC 项目中。我已经安装了 Visual Studio 扩展，但我似乎找不到关于如何添加`*.ts`编译成`*.js`文件的文件的示例或文档。

编辑：实际上，我应该复制 Win8 示例`.jsproj`包含和处理`.ts`文件的方式吗？还是仅适用于 HTML/JS Win8 项目？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-02T23:38:13.750

**警告：**这个答案现在已经过时了，因为自从这个答案以来，Typescript 和 MVC 都发生了很大的变化。我稍后会尝试更新。- Richcoder

感谢[Sohnee](https://stackoverflow.com/users/75525/sohnee)的回答。

您可以使用 Add > New Item 对话框将 TypeScript 文件添加到现有项目中。 ![示例图片](../Images/b1f79ed7d7515895313b877f19014009.png) 请注意，“Typescript File”项目不在 Web 组下，而是在它的父级下，在本例中为 Visual C#。

这应该添加一个 TypeScript 文件，其余的将由 Visual Studio 完成。

然后您需要将这些行添加到项目文件中：

```
 <ItemGroup>
    <AvailableItemName Include="TypeScriptCompile" />
 </ItemGroup>
 <ItemGroup>
    <TypeScriptCompile Include="$(ProjectDir)\**\*.ts" />
 </ItemGroup>
 <Target Name="BeforeBuild">
    <Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\0.8.0.0\tsc&quot; -target ES5 @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" IgnoreExitCode="true" />
 </Target> 
```

它对我来说非常有效，但是如果您遇到任何问题，请发表评论。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-01T22:14:39.563

那是对的。您所需要的只是将 .ts 文件构建为 .js 文件的 ms 构建目标。Win8 示例显示了一个 beforeBuild 目标，用于对属于 itemGroup TypeScriptCompile 的所有文件调用 tsc，该文件被定义为 $(ProjectDir)***.ts（或项目中的所有 .ts 文件）。

复制此模式应该适用于任何 msbuild 项目，而不仅仅是 Win8 项目。

这是我正在谈论的示例：将其添加到任何 msbuild 项目中，并且您应该在构建开始时将任何 .ts 文件编译到等效的 .js 文件中。

```
<ItemGroup> 
   <TypeScriptCompile Include="$(ProjectDir)\**\*.ts" />
</ItemGroup>

<Target Name="TypeScriptCompile" BeforeTargets="Build">
   <Message Text="Compiling TypeScript files" />
   <Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\0.8.0.0\tsc&quot; -target ES5 @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" />
</Target> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-04T00:55:15.907

我拼凑了一个 nuget 包，该包将 msbuild 目标文件添加到您的项目中。它将运行 tsc 编译器并清理其输出，以便您可以双击 Visual Studio 中的错误并跳转到文件/行/列。

[https://www.nuget.org/packages/Sholo.TypeScript.Build](https://www.nuget.org/packages/Sholo.TypeScript.Build)

对于您希望 tsc 编译的任何内容，您需要将属性窗口中的 Build Action 设置为“TypeScriptCompile”。经过几天对 TypeScript 的修改，我发现进行引用的 .ts 文件应该设置为 TypeScriptCompile，但仅被引用的文件不应该设置为 ymmv。此外，您可能需要显示所有文件并添加原始 .js 文件。如果您想将相关的 .ts/.js/.d.ts 文件组合在一起，请查看 VsCommands 扩展。使用 NetDemon/类似扩展的工作流程也很不错。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-07T22:51:18.887

如果您正在使用[Bundling 和 Minification](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)，我刚刚发布了 IBundleTransform 的实现，它将 TypeScript 编译为 Javascript。它在[GitHub](https://github.com/wouterdevinck/TypeScript-BundleTransform/)和 NuGet (Install-Package TypeScriptBundleTransform) 上。如果您还没有使用 Bundling and Minification，那么值得一看！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-02T01:10:52.793

**更新：**

只需安装[Web Essentials 2012](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)插件，您将在保存时自动编译 - 用于 .js 和 .min.js 以及一个整洁的拆分视图，以查看您的 TypeScript 代码旁边的 JavaScript 输出。

* * *

这是我一直在使用的粗略方法：

右键单击您的项目 > 属性 > 构建事件

PreBuild 框粘贴此（递归构建项目中的所有 .ts 文件）：

```
forfiles /S /P $(ProjectDir) /m *.ts /c "cmd /c tsc @file" 
```

用于构建特定的入口文件：

```
tsc $(ProjectDir)MyScripts/myfile.ts 
```

我确信有更好的方法来做到这一点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-19T16:43:16.740

如果您使用的是[Microsoft ASP.NET Web 优化框架](http://aspnetoptimization.codeplex.com/)（又名捆绑和缩小），请尝试将[捆绑转换](http://bundletransformer.codeplex.com/)器与已安装的模块[BundleTransformer.TypeScript 一起](http://nuget.org/packages/BundleTransformer.TypeScript)使用。除了将 TypeScript 代码编译为 JS 之外，您还可以使用 Bundle Transformer 的其他模块对生成的 JS 代码进行缩小：[BundleTransformer.MicrosoftAjax](http://nuget.org/packages/BundleTransformer.MicrosoftAjax)、[BundleTransformer.Yui](http://nuget.org/packages/BundleTransformer.Yui)、[BundleTransformer.Closure](http://nuget.org/packages/BundleTransformer.Closure)、[BundleTransformer.JsMin](http://nuget.org/packages/BundleTransformer.JsMin)、[BundleTransformer。 UglifyJs](http://nuget.org/packages/BundleTransformer.UglifyJs)和[BundleTransformer.Packer](http://nuget.org/packages/BundleTransformer.Packer)。

# sql-server - 提高Sql查询速度

> ID：12680487
> 
> 赞同：0
> 
> 时间：2012-10-01T20:22:28.317
> 
> 标签：sql-server, optimization

我正在使用用于跟踪文档的 Sql Server 数据库，并试图根据 indexTables 中存储的四个值查找重复的文档。到目前为止，我所拥有的速度非常慢。有没有办法加快这个速度？

```
select d.ID, d2.ID
from DOCUMENTS d
inner join IndexTable1 itm on d.ID = itm.ID 
inner join IndexTable2 pd on d.ID = pd.ID 
inner join IndexTable3 amt on d.ID = amt.ID 
inner join IndexTable4 acct on d.ID = acct.ID 
inner join DOCUMENTS d2 on d.ID <> d2.ID
inner join IndexTable06 itm2 on d2.ID = itm2.ID and itm.VALUE=itm2.VALUE
inner join IndexTable07 pd2 on d2.ID = pd2.ID and pd2.VALUE = pd.VALUE
inner join IndexTable03 amt2 on d2.ID = amt2.ID and amt.VALUE = amt2.VALUE
inner join IndexTable13 acct2 on d2.ID = acct2.ID and acct.VALUE = acct2.VALUE 
```

更多信息：运行“显示估计的执行计划”显示最大的命中来自对 IndexTable2 (37%) 和 IndexTable3(35%) 执行聚集索引搜索。

# jquery - TinyMCE 导致页面跳转

> ID：12680491
> 
> 赞同：4
> 
> 时间：2012-10-01T20:22:48.637
> 
> 标签：jquery, html, tinymce

因此，当用户按下编辑按钮时，我对 tinyMCE 编辑器进行了以下调用。

```
 function edit () {

     tinyMCE.execCommand('mceAddControl',false, selectedEditBox.attr('id') );
     tinyMCE.execCommand('mceFocus',false, selectedEditBox.attr('id') );

  } 
```

以下是 tinyMCE 的初始化代码

```
 tinyMCE.init({

editor_selector : "mceSimple",
mode : "none",
theme : "advanced",
theme_advanced_buttons1 : "closeButton,bold,italic,underline,separator,strikethrough,justifyleft,justifycenter,justifyright, justifyfull,bullist,numlist,undo,redo,link,unlink,pastetext,selectall",
plugins : "autoresize, paste",
paste_preprocess : function(pl, o) {
    console.log(o.content);
},
paste_postprocess : function(pl, o) {
    console.log(o.node.innerHTML);
},
theme_advanced_resizing : true,                
setup : function(ed) {
    // Add a custom button
    ed.addButton('closeButton', {
        title : 'Close',
        image : '/images/editComplete.png',
        onclick : function() {
            hideEditor ( ed);
        }
      });
   }

 }); 
```

所以这工作正常，它将框添加到选定的元素。问题是当我这样做时页面会跳转。我更改的第一部分会导致页面跳转到页面底部，但是我创建的每个其他编辑器都会导致框跳转到页面顶部。有谁知道是什么原因造成的或如何解决？

任何答案都非常感谢。

# iphone - 如果从 NSCachesDirectory 加载内存泄漏

> ID：12680492
> 
> 赞同：-1
> 
> 时间：2012-10-01T20:22:49.010
> 
> 标签：iphone, ios, xcode, memory-leaks, automatic-ref-counting

我从 plist 加载了很多注释，所有加载都很好，但是如果我从 NSCachesDirectory 内存泄漏工具加载，则会显示泄漏。如果我从 url 加载，则不会泄漏。我在项目中使用 ARC。

内存泄漏

```
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
        NSString *path = [[documentPaths lastObject] stringByAppendingPathComponent:@"test.plist"];
        NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:path]; // leaking here 
```

无泄漏

```
NSString *urlStr = [[NSString alloc] 
                    initWithFormat:@"http://www.domain.com/test.plist" ];

NSURL *url = [NSURL URLWithString:urlStr];
NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfURL:url]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:46:29.563

我不确定为什么仪器会显示一个泄漏而不是另一个泄漏，但这几乎可以肯定是由于这些代码片段未表示的某些问题。您可以通过简单地使用 URL 方法来验证这一点（无论如何，这是建议的方法，更喜欢使用文件 URL 而不是带有新代码的路径）来定位文件：

```
NSError* error = nil;
NSURL* fileURL = [[[NSFileManager defaultManager] URLForDirectory:NSCachesDirectory inDomain:NSUserDomainMask appropriateForURL:nil create:YES error:&error] URLByAppendingPathComponent:@"test.plist"];
if( !fileURL ) { /* deal with error */ }
// If this still leaks, it's due to the way your code is structured and
// you will have to provide more details.
NSDictionary* dict = [[NSDictionary alloc] initWithContentsOfURL:fileURL]; 
```

# xpages - 将道场日期选择器和道场时间选择器绑定到一个 NotesDateTime 字段？

> ID：12680494
> 
> 赞同：0
> 
> 时间：2012-10-01T20:22:54.590
> 
> 标签：xpages

无论如何，是否可以将单独的 dojo 日期选择器和 dojo 时间选择器中的值绑定到一个 NotesDateTime 字段中？我希望能够获取从两个控件返回的值并将它们组合到字段中，但也获取 NotesDateTime 值，将其拆分并在单独的 dojo 日期和时间组件中显示值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T19:21:37.203

这是我决定这样做的方法：

```
var dateStart = getComponent("djDateTextBox1").getValue();
var timeStart = getComponent("djTimeTextBox1").getValue();

if (dateStart != null && timeStart != null)
{
    var dt =   @Date(@Year(dateStart),@Month(dateStart),@Day(dateStart),@Hour(timeStart),@Minute(timeStart),@Second(timeStart));        
      docContractor.replaceItemValue("ContractorStartDateTime",session.createDateTime(dt));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:34:49.597

我想你回答了你自己的问题。对日期和时间使用两个单独的字段，对组合版本使用一个计算字段。

# android - 如何强制android重新加载main.xml

> ID：12680500
> 
> 赞同：0
> 
> 时间：2012-10-01T20:23:00.180
> 
> 标签：android, configuration, locale

我正在开发一个项目以在应用程序中即时更改语言环境。主 UI 是在 res/layout/main.xml 中创建的。这是我的代码：

```
OnCreate() 
{
           ... ...
    Configuration config = getBaseContext().getResources().getConfiguration();
    config.locale = Locale.FRANCE;  // set locale to french
    getBaseContext().getResources().updateConfiguration(config, getBaseContext().getResources().getDisplayMetrics());
    setContentView(R.layout.main);
} 
```

结果：main.xml 中的 android:text="@string/myString" 正在 res/values-fr/strings.xml 中使用 myString，这正是我的预期。

在语言环境更改为意大利语的另一个函数中：

```
{   ... ...
    Configuration config = getBaseContext().getResources().getConfiguration();
    config.locale = Locale.ITALY;   // change locale to Italian
    getBaseContext().getResources().updateConfiguration(config, getBaseContext().getResources().getDisplayMetrics());
} 
```

在调用该函数之后， getString(R.string.myString) 正在 res/values-it/strings.xml 中使用 myString，这正是我所期望的。但是，主 UI 不会改变。main.xml 中的 android:text="@string/myString" 仍在 res/values-fr/strings.xml 中使用 myString，直到我强制 Activity 重新启动：

```
{
    Intent intent = getIntent();
    finish();
    startActivity(intent);
} 
```

我试图调用 view.invalidate() 和 layoutInflater.inflate(R.layout.main, this) 但它们都不起作用。任何想法/建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:14:18.453

非常简单，当准备好更新时，确保您的 onCreate 方法可以正确处理它们，然后在您的活动上调用[recreate()](http://developer.android.com/reference/android/app/Activity.html#recreate%28%29)，Android 将关心娱乐并照常调用流程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:43:38.003

我真的很好奇你为什么要手动更改语言环境，因为它可以从设备设置中自动驱动，但让我们假装你是故意这样做的:)

你需要做的就是打电话`setContentView(R.layout.main);`。Activity 将根据区域设置自动更新 UI。

这里的棘手点是，如果您有一些动态数据（例如对按钮、文本视图等的引用），您可能还需要更新您的引用，因为旧的将不再相关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T20:52:13.200

用于更改语言环境的代码最好移至您的自定义应用程序类。您创建类似 MyApplication 的东西，它在 onCreate/onConfiguration 更改中扩展 Application 将是这样的代码：

```
String lang = getSharedPreferences(PREFS_APP, 0).getString(LANGUAGE, Locale.getDefault().getLanguage());
locale = new Locale(lang);
if (locale != null) {
 newConfig.locale = locale;
 Locale.setDefault(locale);
 getBaseContext().getResources().updateConfiguration(newConfig, getBaseContext().getResources().getDisplayMetrics());
} 
```

你在 AndroidManifest 部分注册这个自定义类 Application ( android:name=".MyApplication")
这个想法是 Android 不喜欢设置在系统中设置的不同语言环境。
在您的设置活动中更改区域设置后执行此操作：

```
Configuration c = new Configuration();
Locale newLocale = new Locale(localeCode);
Locale.setDefault(newLocale);
c.locale = newLocale;
ctx.getResources().updateConfiguration(c, ctx.getResources().getDisplayMetrics()); 
```

然后像这样重新启动/返回您的 MainActivity：

```
Intent goTo = new Intent(ctx, MainActivity.class);
goTo.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
act.startActivity(goTo); 
```

我希望我没有错过一些重要的事情，但这是动态更改语言背后的主要思想。

# mysql - SQL 从多行创建一个数组

> ID：12680502
> 
> 赞同：3
> 
> 时间：2012-10-01T20:23:01.820
> 
> 标签：mysql, join, hive, self-join

我有一张表，其中包含从 到 的一对多`ID`映射`some_value`。什么查询可以为我`some_value`提供特定的全部信息`ID`？

我可以使用 SQL 中有用的任何数组、字符串或其他对象作为`list_of_values`. 您不需要使用我的逗号分隔格式。

我的特殊 SQL 变体是 Hive，但语法和功能与 MySQL 非常相似 :)

起始表：

```
ID             some_value
-----------    ------------
1              a
1              b
1              c
2              x
2              y
2              z
2              a
3              g
3              h 
```

成品表：

```
ID              list_of_values
----------      ----------------
1               a, b, c
2               x, y, z, a
3               g, h 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T20:26:31.613

```
SELECT ID, COLLECT_SET(some_value) AS list_of_values
    FROM YourTable 
    GROUP BY ID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:34:57.257

```
SELECT
    `id`,
    GROUP_CONCAT(DISTINCT `some_value` SEPARATOR ', ') AS 'list_of_values'
FROM `your_table`
GROUP BY `id` 
```

# eclipse - Aptana（和 Eclipse）在美洲狮上启动失败

> ID：12680508
> 
> 赞同：1
> 
> 时间：2012-10-01T20:23:30.243
> 
> 标签：eclipse, macos, aptana3

这可能不是山狮问题，但可能很简单；我正在尝试使用 PyDev，安装 Aptana Studio 3，因为 PyDev 已包含在内。对于可能是新手查询的道歉，但我找不到任何相关的面包屑。

在 OSX 10.8.2、Java 1.6.0_35 上安装。下载了 Aptana Studio 3.2.2，软件包安装正常。使用 32 位或 64 位 jvm 启动应用程序失败并显示附加跟踪。尝试单独安装 Eclipse 也会失败，并出现相同的“未知存储库类型”错误。

它正在寻找的目录确实存在，并且使其可写世界并没有帮助。

建议？调试策略？提前感谢您的帮助。

瑞克

* * *

```
!SESSION 2012-10-01 13:36:22.241 -----------------------------------------------
eclipse.buildId=unknown
java.version=1.6.0_35
java.vendor=Apple Inc.
BootLoader constants: OS=macosx, ARCH=x86, WS=cocoa, NL=en_US
Framework arguments:  -keyring /Users/CS255/.eclipse_keyring -showlocation
Command-line arguments:  -os macosx -ws cocoa -arch x86 -keyring /Users/CS255/.eclipse_keyring -consoleLog -showlocation

!ENTRY org.eclipse.equinox.p2.core 4 0 2012-10-01 13:36:22.858
!MESSAGE Provisioning exception
!STACK 1
org.eclipse.equinox.p2.core.ProvisionException: Unknown repository type at file:/Applications/Aptana_Studio_3/configuration/org.eclipse.osgi/bundles/194/data/listener_1925729951/.
    at org.eclipse.equinox.internal.p2.repository.helpers.AbstractRepositoryManager.fail(AbstractRepositoryManager.java:393)
    at org.eclipse.equinox.internal.p2.repository.helpers.AbstractRepositoryManager.doCreateRepository(AbstractRepositoryManager.java:282)
    at org.eclipse.equinox.internal.p2.metadata.repository.MetadataRepositoryManager.createRepository(MetadataRepositoryManager.java:41)
    at org.eclipse.equinox.internal.provisional.p2.directorywatcher.RepositoryListener.initializeMetadataRepository(RepositoryListener.java:109)
    at org.eclipse.equinox.internal.provisional.p2.directorywatcher.RepositoryListener.<init>(RepositoryListener.java:59)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.DropinsRepositoryListener.<init>(DropinsRepositoryListener.java:82)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.Activator.watchDropins(Activator.java:532)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.Activator.start(Activator.java:172)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:389)
    at org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1131)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:559)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:544)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:457)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:243)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:438)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:1)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340)
!SUBENTRY 1 org.eclipse.equinox.p2.metadata.repository 4 1005 2012-10-01 13:36:22.859
!MESSAGE Unknown repository type at file:/Applications/Aptana_Studio_3/configuration/org.eclipse.osgi/bundles/194/data/listener_1925729951/.

!ENTRY org.eclipse.equinox.p2.reconciler.dropins 4 0 2012-10-01 13:36:22.870
!MESSAGE FrameworkEvent ERROR
!STACK 0
org.osgi.framework.BundleException: Exception in org.eclipse.equinox.internal.p2.reconciler.dropins.Activator.start() of bundle org.eclipse.equinox.p2.reconciler.dropins.
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:734)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:389)
    at org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1131)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:559)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:544)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:457)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:243)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:438)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:1)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340)
Caused by: java.lang.IllegalStateException: Could not create metadata repository for: file:/Applications/Aptana_Studio_3/configuration/org.eclipse.osgi/bundles/194/data/listener_1925729951/
    at org.eclipse.equinox.internal.provisional.p2.directorywatcher.RepositoryListener.initializeMetadataRepository(RepositoryListener.java:112)
    at org.eclipse.equinox.internal.provisional.p2.directorywatcher.RepositoryListener.<init>(RepositoryListener.java:59)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.DropinsRepositoryListener.<init>(DropinsRepositoryListener.java:82)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.Activator.watchDropins(Activator.java:532)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.Activator.start(Activator.java:172)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    ... 12 more
Root exception:
java.lang.IllegalStateException: Could not create metadata repository for: file:/Applications/Aptana_Studio_3/configuration/org.eclipse.osgi/bundles/194/data/listener_1925729951/
    at org.eclipse.equinox.internal.provisional.p2.directorywatcher.RepositoryListener.initializeMetadataRepository(RepositoryListener.java:112)
    at org.eclipse.equinox.internal.provisional.p2.directorywatcher.RepositoryListener.<init>(RepositoryListener.java:59)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.DropinsRepositoryListener.<init>(DropinsRepositoryListener.java:82)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.Activator.watchDropins(Activator.java:532)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.Activator.start(Activator.java:172)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:389)
    at org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1131)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:559)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:544)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:457)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:243)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:438)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:1)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340)

!ENTRY org.eclipse.osgi 4 0 2012-10-01 13:36:23.014
!MESSAGE Application error
!STACK 1
org.osgi.service.application.ApplicationException: No application id has been found.
    at org.eclipse.equinox.internal.app.EclipseAppContainer.startDefaultApp(EclipseAppContainer.java:262)
    at org.eclipse.equinox.internal.app.MainApplicationLauncher.run(MainApplicationLauncher.java:29)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:06:49.373

是的，这是一个文件锁定问题，但这并不简单，因为在明显的地方更改权限或移动 dist 似乎并不能解决它。最简单的解决方法是添加

> -Dosgi.configuration.area=@user.home/.eclipse

到 eclipse.ini 文件，它为每个用户（或只是我）在他们的主目录中提供一个可写的配置。

[此处](https://stackoverflow.com/questions/8214957/locking-is-not-possible-in-the-directory-c-eclipse-configuration-org-eclipse-os)讨论了解决方案。

感谢@irbull 的回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T22:43:12.173

这看起来像是试图更新只读目录的问题。虽然 Eclipse '应该' 支持这一点，但它似乎并不支持。您可以尝试将 Eclipse 安装移动到不同的目录（例如在 /Users//eclipse 中）而不是 Applications。似乎 MacOS 不允许 Eclipse 将配置信息写入 /Applications 文件夹。

# wpf - 如何更改 xamdatagrid(infragistics) 的修复字段拆分器的样式？

> ID：12680515
> 
> 赞同：0
> 
> 时间：2012-10-01T20:24:01.623
> 
> 标签：wpf, infragistics, xamdatagrid

我正在使用 Infragistics XamDataGrid 来显示我的数据，但最终用户认为拆分器太宽，这让他们感到不舒服。

想知道如何更改该拆分器的样式以使其宽度更小。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:18:54.953

我刚刚使用以下样式进行了测试：

```
<Style TargetType="{x:Type igDP:FixedFieldSplitter}">
    <Setter Property="Width" Value="2"/>
    <Setter Property="MinWidth" Value="2"/>  
</Style> 
```

MinWidth 属性默认设置为 7，因此如果您想要更薄的拆分器，则需要更改 Width 和 MinWidth 以进行补偿，否则您的 Width 将不允许低于 7。

# escaping - 禁用管理员生成器列表操作的转义？

> ID：12680516
> 
> 赞同：0
> 
> 时间：2012-10-01T20:24:07.483
> 
> 标签：escaping, symfony-1.4, admin-generator

我正在为我的一个数据模型（“成就”）配置 Symfony 1.4 的管理生成器。“成就”数据模型有一个字段（“url”），用于存储指向外部资源的 URL，我希望此 URL 呈现为管理员生成器列表操作中的链接。默认情况下，管理员生成器将链接显示为纯文本。我尝试编写一个函数来用 HTML 装饰 URL，如果字符串太长则修剪字符串（添加到“lib/model/doctrine/Achievement.class.php”）。

```
function getLink()
{
  $text = $this->getUrl();
  if(strlen($text) > 40)
  {
    $text = sprintf( "%s...%s", substr($text, 0, 20), substr($text, -20, 20) );
  }

  return sprintf('<a href="%s">%s</a>', $this->getUrl(), $text);
} 
```

不幸的是，在管理生成器列表视图中，HTML 被转义，留下了一个长长的丑陋字符串。我无法弄清楚如何禁用此字段的转义。

如果我在“apps/backend/config/settings.yml”中将“ESC_SPECIALCHARS”更改为“ESC_RAW”，则链接会正确呈现。Symfony 1.4 是否没有更细粒度的转义控制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T21:21:12.073

您不应该在模型中生成 HTML。而是为此创建一个[辅助](http://www.symfony-project.org/gentle-introduction/1_4/en/07-Inside-the-View-Layer#chapter_07_sub_helpers)函数，并使字段呈现为[部分](http://www.symfony-project.org/gentle-introduction/1_4/en/07-Inside-the-View-Layer#chapter_07_sub_helpers)并在其中使用辅助函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T22:26:32.857

你可以`sfConfig::set('sf_escaping_strategy', false)`在你的控制器（actions.class.php）中使用`list`。请参阅我对[这个](https://stackoverflow.com/questions/2180644/symfony-is-it-possible-to-disable-output-escaping-per-module-or-per-template/9396475#9396475)问题的回答。

但是，就像[1ed](https://stackoverflow.com/users/1260260/1ed)所说，你最好为此做一个助手，而不是在你的控制器中编写 html 代码。

# jquery - jQuery 在 AJAX 请求中同时发送 GET 和 POST 参数

> ID：12680522
> 
> 赞同：8
> 
> 时间：2012-10-01T20:24:32.147
> 
> 标签：jquery, ajax, post, get

如何使用 jQuery AJAX 请求同时发送 GET 和 POST 参数？

我正在尝试添加 `do=ajax&id=" + ID`到`url`，但结果请求仅打磨到`sss.php`没有查询字符串（获取部分）。谢谢。

```
$.ajax({
    url: "sss.php?do=ajax&id=" + ID ,
    type: "post",
    data: "ddd=sss",
    // callback handler that will be called on success
    success: function(response, textStatus, jqXHR){
        // log a message to the console
        console.log("Hooray, it worked!");
    },
    // callback handler that will be called on error
    error: function(jqXHR, textStatus, errorThrown){
        // log the error to the console
        console.log(
            "The following error occured: "+
            textStatus, errorThrown
        );
    }
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T20:34:25.053

我认为您遇到了观察性错误，或者看到的是服务器端而不是 jQuery 问题。当我做这样的帖子[时](http://jsbin.com/eduzif/1)：

```
$.ajax({
  url: "http://jsbin.com/eduzif/1?foo=bar",
  type: "post",
  data: "baz=doh",
  success: function() {
    display("Done, look at your console's network tab");
  }
}); 
```

...查询字符串和 POST 数据都发送到服务器。如果您使用 Chrome 或 Firefox 等现代浏览器并在触发帖子后查看控制台的“网络”选项卡，则很容易检查这一点。就我而言：

![显示包含查询字符串和表单数据的帖子的图像](../Images/a499627a35b9aa601a4875e6fb737a10.png)

*（您可以忽略上面的服务器回复 403；JSBin 不允许 POST，但这不会影响我们在发送到服务器的请求中看到的内容。）*

所以这里的答案是：仔细检查你是如何在服务器端获取数据的。URL 中的参数（“GET”样式参数）可用作查询字符串参数（URL 的一部分）；“POST”样式参数可用作“表单”数据（例如，响应的正文）。根据您使用的服务器端技术，通常有不同的方法来检索 GET（查询字符串）参数与 POST（表单数据/正文）参数。

# android - 是否可以通过页内链接调用 iOS 和 Android 中的原生 Share 功能？

> ID：12680524
> 
> 赞同：5
> 
> 时间：2012-10-01T20:24:35.367
> 
> 标签：android, html, ios, share, social

我想在页面中放置一个按钮，该按钮将调用 iOS 和 Android 中新的浏览器内共享功能。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T23:32:59.063

不，这就是为什么您有这些弹出窗口要求点击共享按钮并将其添加到主屏幕的原因。

# c++ - 为什么在 C++ 中将智能指针作为函数参数传递？

> ID：12680526
> 
> 赞同：4
> 
> 时间：2012-10-01T20:24:46.343
> 
> 标签：c++, function, pointers, smart-pointers

我对 C++ 智能指针非常陌生，我很难理解关于将它们用于函数参数的建议。

“C++ 编码标准：101 条规则、指南和最佳实践”说这些是传入智能指针的原因。

> 更喜欢通过（智能）指针传递
> 
> *   如果参数是可选的（因此调用者可以将 null 作为“不可用”或“不关心”值传递）
> *   或者如果函数存储了指针的副本
> *   或以其他方式操纵论点的所有权。

有人可以给我每个例子，为什么不使用智能指针在这种情况下会是一个坏主意？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T20:35:11.807

> *更喜欢通过（智能）指针*[当...]

我认为您误读了编码标准。您将其阅读为“这些是使用智能指针的原因”。作者的意图是“这些是使用某种指针的原因，它可能是一个智能指针。”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T20:35:27.663

> 更喜欢通过（智能）指针传递

请注意括号中的“聪明”程度？

这个人在这里谈论的是通过指针与引用传递。Smart 在括号中，因为在喜欢智能指针的团队中工作时，您会遵循类似的规则。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T20:38:53.840

我将假设这个问题通常与指针有关，因为这就是问题中引用的文本所解释的内容。

您想要使用智能指针（或一般来说良好的老式指针）有几个原因。第一个也是最明显的一个是，当您通过引用或指针传递某些内容时，您将指针传递给内存中的项目，这意味着您将获得实际的对象，而不是通过值传递时获得的副本。当您想使用某些函数操作对象时，这很有用，或者只是为了减少复制（想象一下一直将大文本文件作为值发送，那肯定会效率低下！）

接下来，将某些东西作为空值传递的机会。这基本上意味着参数可以作为“不存在”传入，而这又可以在逻辑中处理。例如，如果文件指针为空，则创建一个新文件。

特别是对于智能指针：智能指针是在幕后进行额外管理算法的指针，这可能是引用计数或其他选项。例如，您可以使用 unique_pointer 来确保在任何给定时间只存在一个指向该对象的指针。有关更多信息，请参阅维基百科[http://en.wikipedia.org/wiki/Smart_pointer](http://en.wikipedia.org/wiki/Smart_pointer)

如果问题确实与一般指针的工作有关，请参阅此介绍[http://www.tech-recipes.com/rx/1232/c-pointers-pass-by-value-pass-by-reference/](http://www.tech-recipes.com/rx/1232/c-pointers-pass-by-value-pass-by-reference/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T20:31:18.700

智能指针存在于一个，也正是一个，函数：

> 论据的所有权

智能指针强制执行此操作，这样您就不会搞砸了，这很可能是因为手动管理所有权非常容易出错，而智能指针可以保证。

在常规指针上使用智能指针没有其他理由。

# jquery - jQuery 选择器通配符在哪里

> ID：12680527
> 
> 赞同：3
> 
> 时间：2012-10-01T20:24:47.053
> 
> 标签：jquery, jquery-selectors

试图弄清楚如何将通配符概念应用于某些东西，而不是在哪里应用。

现在我有`$('.zm_name[rel!="'+keyed+'"]').parent().hide();`它会隐藏所有与我正在寻找的键值不完全匹配的东西，这很好用。但是，它仅在键入的值准确时才有效。所以我希望它像它一样`keyed*`，但任何不等于字符串隐藏的开头。

我试过`$('.zm_name[rel^!="'+keyed+'"]').parent().hide();`但只得到一个语法错误，我浏览了 api 的 jquery 选择器部分，似乎找不到我正在寻找的确切内容。所以我想知道有没有结合这种方法的实际方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T20:27:02.010

试试这个

```
$('.zm_name:not(.zm_name[rel^="'+keyed+'"])').parent().hide(); 
```

//或者

```
$('.zm_name:not([rel^="'+keyed+'"])').parent().hide();​​​​​​​ 
```

[演示](http://jsfiddle.net/sushanth009/FzUsn/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:31:14.293

我通常远离很长的选择器，因为它们可能会令人困惑和多余。尝试使用以下`filter`方法：

```
$('.zm_name').filter(function(){ 
  return !(new RegExp('^'+ keyed)).test(this.rel); 
}); 
```

# android - Android代码接受姓名和电话号码并在点击接受按钮时保存

> ID：12680533
> 
> 赞同：0
> 
> 时间：2012-10-01T20:25:10.040
> 
> 标签：android, save, contacts

有人可以建议代码接受姓名和号码保存吗？我的布局如下。

**

```
 <TableRow android:id="@+id/TableRow01" android:layout_width="wrap_content" android:layout_height="wrap_content">
 </TableRow>
    <TextView android:text="Contact Name" android:id="@+id/TextView01"    android:layout_width="wrap_content" android:layout_height="wrap_content" android:contentDescription="Name" android:cursorVisible="true" android:gravity="center" android:editable="true">
    </TextView>
 <TableRow android:id="@+id/TableRow02" android:layout_width="wrap_content" android:layout_height="wrap_content">
 </TableRow>
    <EditText android:text="" android:id="@+id/EditText01" android:layout_width="wrap_content" android:layout_height="wrap_content">
    </EditText>      
 <TextView android:text="Phone Number" android:id="@+id/TextView02" android:layout_width="wrap_content" android:layout_height="wrap_content" android:phoneNumber="true" android:gravity="center">
 </TextView>
    <EditText android:text="" android:id="@+id/EditText02" android:layout_width="wrap_content" android:layout_height="wrap_content">
    </EditText>
 <Button android:text="Accept" android:id="@+id/Button01" android:layout_width="wrap_content" android:layout_height="wrap_content" android:clickable="true" android:gravity="center">
 </Button> 
```

**

请建议我应该如何从这里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:32:30.527

将 onClickListener 添加到保存按钮。并在侦听器内部抓取人们在其中写入姓名和电话号码的 editText 框中的值。检查姓名和号码是否有效。（如不留空）。然后将值插入 SQLite 数据库。

按钮 onClick 示例： [http ://android-helper.blogspot.ca/2011/04/android-simple-button-click-example.html](http://android-helper.blogspot.ca/2011/04/android-simple-button-click-example.html)

保存到 SQLite 示例： [http ://anujarosha.wordpress.com/2011/12/12/how-to-insert-data-in-to-a-sqlite-database-in-android/](http://anujarosha.wordpress.com/2011/12/12/how-to-insert-data-in-to-a-sqlite-database-in-android/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T20:35:47.163

您可以这样做来获取数据：

```
Button btn = (Button) findViewById(R.id.Button01);
btn.setOnClickListener(new View.OnClickListener(){
    EditText nameText = (EditText) findViewById(R.id.EditText01);
    EditText phoneText = (EditText) findViewById(R.id.EditText02);
    String name = nameText.getText();
    String phone = phoneText.getText();
    // Save the values, send to server yada yada
} 
```

# java - android apk的静态分析工具

> ID：12680537
> 
> 赞同：1
> 
> 时间：2012-10-01T20:25:33.933
> 
> 标签：java, android, testing, static-analysis

你们熟悉任何可以对android apk进行静态分析的工具吗？我想在第三方 apk 中有总方法计数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:32:36.290

查看这些链接：

[安卓突击](http://code.google.com/p/android-assault/)

[APK 分析器](http://developer.sonymobile.com/2012/04/13/powerful-tool-to-analyse-your-apks-now-released-open-source/)

[安德罗卫士](http://code.google.com/p/androguard/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T23:22:46.657

我用这个工具[Scandroid](http://github.com/scandroid/scandroid)

您需要稍微修改 DexIClass.java 类以获得所有方法的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-02T19:46:36.973

您还可以查看我为提取 Team City/持续集成报告的信息而编写的这个相当简单的 shell 脚本：

[https://github.com/sveinungkb/android-apk-info](https://github.com/sveinungkb/android-apk-info)

让您轻松地从 apk 中提取关键指标：

*   方法计数
*   班级人数
*   apk 大小（字节）
*   .dex 大小（字节）

支持 Team City 的系统消息，因此您可以将其作为报告提取。在 Jenkins 中也应该很容易解析。

# matlab - matlab：检查xls文件是否打开

> ID：12680548
> 
> 赞同：0
> 
> 时间：2012-10-01T20:26:24.433
> 
> 标签：matlab, fopen, fclose

我试图编写一个代码来检查文件是否打开。如果是这样，当文件没有关闭时，屏幕上会打印一条警告消息。

我想我没有正确使用“fclose”，因为通过这种方式，我得到了错误：

```
??? Error using ==> fclose
Invalid file identifier.  Use fopen to generate a valid file identifier.

Error in ==> fileisopen at 4
fclose(fid); 
```

我尝试不使用 fclose 函数，它可以工作，但是当我打开文件时，我收到一条消息，该文件仅供阅读。

这是我的代码：

```
path_of_file = 'C:\Documents and Settings\erezalon\Desktop\data.xls';

[fid msg_file] = fopen(path_of_file, 'a');
fclose(fid);
while (fid == -1)
    errormsg = strcat('the file: ', path_of_file, ' is open. please close it!');
    waitfor(msgbox(errormsg,'Error'));
    [fid msg_file] = fopen(path_of_file, 'a');
    fclose(fid);
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:11:05.340

我成功了！这是解决方案：

```
path_of_file = 'C:\Documents and Settings\erezalon\Desktop\data2.xls';

fid = fopen(path_of_file, 'a');
if fid ~= -1
    fclose(fid);
else
    while (fid == -1)
        errormsg = strcat('the file: ', path_of_file, ' is open. please close it!');
        waitfor(msgbox(errormsg,'Error'));
        fid = fopen(path_of_file, 'a');
    end
    fclose(fid);
end 
```

# java - 键盘键使用什么方法来移动Java中的东西而不是ActionListener

> ID：12680550
> 
> 赞同：0
> 
> 时间：2012-10-01T20:26:27.053
> 
> 标签：java, swing, key-bindings, keylistener

您好，我创建了一个小应用程序，可以移动我用 Java 绘制的球，但使用 ActionListener，现在我是 Java 新手，我想使用我的键盘来执行此操作。应该使用什么方法？我看到有人说 KeyBindings，也有人说 KeyListener 我试图自己找出一些东西，但它不起作用。我写的代码如下：

```
@Override
public void keyPressed(KeyEvent e) {
    System.out.println("keyPressed");

    char c = e.getKeyChar();

    if( c == KeyEvent.VK_LEFT  ) {

        pos -= 10;

    }

    repaint();
}

@Override
public void keyReleased(KeyEvent arg0) {
    // TODO Auto-generated method stub

}

@Override
public void keyTyped(KeyEvent arg0) {
    System.out.println("keyTyped");
    char v = arg0.getKeyChar();
    if( v == KeyEvent.KEY_LOCATION_RIGHT ) {

        pos -= 10;

    }
    repaint();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T21:04:11.043

将您的听众附加到按钮可能不是您想要的。您可能希望将其添加到`JPanel`具有焦点的那个。他们是关键……有焦点的那个。在不同的平台上似乎有所不同，并且非常不可靠地触发您的听众。

更好的是选择键绑定。[Swing 键绑定教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)包含足够的示例代码来说明如何使用它们。

你的其余逻辑似乎是有序的。触发操作时更改位置并安排重绘。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T00:23:37.947

好吧，花了比我希望的时间更长的时间（灭火；））

这基本上使用了`Action`s、键绑定和按钮的组合......

现在我将球渲染分离到一个单独的类中，这只是让我有机会在不影响容器的情况下更改球的渲染方式......您显然将拥有自己的渲染过程。

**主要的**

```
public class BallsUp {

    public static void main(String[] args) {
        new BallsUp();
    }

    public BallsUp() {
        JFrame frame = new JFrame();
        frame.setTitle("Balls up");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(400, 400);
        frame.setLocationRelativeTo(null);

        BallPane ballPane = new BallPane();
        JPanel mainPane = new JPanel(new BorderLayout());
        mainPane.add(ballPane);

        JPanel north = new JPanel(new GridBagLayout());
        north.add(new JButton(new BallPane.UpAction(ballPane)));
        mainPane.add(north, BorderLayout.NORTH);

        JPanel south = new JPanel(new GridBagLayout());
        south.add(new JButton(new BallPane.DownAction(ballPane)));
        mainPane.add(south, BorderLayout.SOUTH);

        JPanel east = new JPanel(new GridBagLayout());
        east.add(new JButton(new BallPane.RightAction(ballPane)));
        mainPane.add(east, BorderLayout.EAST);

        JPanel west = new JPanel(new GridBagLayout());
        west.add(new JButton(new BallPane.LeftAction(ballPane)));
        mainPane.add(west, BorderLayout.WEST);

        frame.add(mainPane);
        frame.setVisible(true);

    }

} 
```

**球形窗格**

```
public class BallPane extends JPanel {

    protected static final int DISTANCE = 10;

    private Ball ball;

    private Timer resizeTimer;
    private ComponentListener componentListener;

    public BallPane() {

        setBall(new Ball());

        InputMap im = getInputMap(WHEN_IN_FOCUSED_WINDOW);
        ActionMap am = getActionMap();

        im.put(KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0), "goDown");
        im.put(KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0), "goUp");
        im.put(KeyStroke.getKeyStroke(KeyEvent.VK_LEFT, 0), "goLeft");
        im.put(KeyStroke.getKeyStroke(KeyEvent.VK_RIGHT, 0), "goRight");

        am.put("goDown", new DownAction(this));
        am.put("goUp", new UpAction(this));
        am.put("goLeft", new LeftAction(this));
        am.put("goRight", new RightAction(this));

        setFocusable(true);
        requestFocusInWindow();

    }

    public void setBall(Ball ball) {
        this.ball = ball;
    }

    public Ball getBall() {
        return ball;
    }

    @Override
    public void addNotify() {

        super.addNotify();

        componentListener = new ComponentAdapter() {
            @Override
            public void componentResized(ComponentEvent e) {
                resizeTimer.restart();
            }
        };

        resizeTimer = new Timer(250, new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                removeComponentListener(componentListener);
                Point p = new Point(getWidth() / 2, getHeight() / 2);
                getBall().setLocation(p);
                resizeTimer.stop();
                resizeTimer = null;
                repaint();
            }
        });
        resizeTimer.setRepeats(false);
        resizeTimer.setCoalesce(true);

        addComponentListener(componentListener);

    }

    @Override
    protected void paintComponent(Graphics g) {

        super.paintComponent(g);

        Ball ball = getBall();
        if (ball != null) {

            Graphics2D g2d = (Graphics2D) g;
            ball.paint(g2d);

        }

    }

    public static abstract class AbstractBallAction extends AbstractAction {

        private BallPane pane;

        public AbstractBallAction(BallPane pane) {
            this.pane = pane;
        }

        public BallPane getBallPane() {
            return pane;
        }

        public int getXDistance() {
            return 0;
        }

        public int getYDistance() {
            return 0;
        }

        @Override
        public void actionPerformed(ActionEvent e) {

            BallPane pane = getBallPane();
            Ball ball = pane.getBall();

            Point location = ball.getLocation();
            location.y += getYDistance();
            location.x += getXDistance();
            if (location.y < (ball.getWidth() / 2)) {
                location.y = (ball.getWidth() / 2);
            } else if (location.y > pane.getHeight() - 1 - ball.getHeight()) {
                location.y = pane.getHeight() - ball.getHeight();
            }
            if (location.x < (ball.getHeight() / 2)) {
                location.x = (ball.getHeight() / 2);
            } else if (location.x > pane.getWidth() - 1 - ball.getWidth()) {
                location.x = pane.getWidth() - ball.getWidth();
            }
            ball.setLocation(location);
            pane.repaint();
        }

    }

    public static class UpAction extends AbstractBallAction {

        public UpAction(BallPane pane) {
            super(pane);
            putValue(NAME, "Up");
        }

        @Override
        public int getYDistance() {
            return -DISTANCE;
        }

    }

    public static class DownAction extends AbstractBallAction {

        public DownAction(BallPane pane) {
            super(pane);
            putValue(NAME, "Down");
        }

        @Override
        public int getYDistance() {
            return DISTANCE;
        }

    }

    public static class LeftAction extends AbstractBallAction {

        public LeftAction(BallPane pane) {
            super(pane);
            putValue(NAME, "Left");
        }

        @Override
        public int getXDistance() {
            return -DISTANCE;
        }

    }

    public static class RightAction extends AbstractBallAction {

        public RightAction(BallPane pane) {
            super(pane);
            putValue(NAME, "Right");
        }

        @Override
        public int getXDistance() {
            return DISTANCE;
        }

    }

} 
```

**球**

```
public class Ball {

    private Shape shape;
    private Point p;

    public Ball() {
        shape = new Ellipse2D.Float(0, 0, 10, 10);
    }

    public void setLocation(Point p) {
        this.p = p;
    }

    public Point getLocation() {
        return p;
    }

    public Shape getShape() {
        return shape;
    }

    public void paint(Graphics2D g2d) {
        Point p = getLocation();
        if (p != null) {
            g2d = (Graphics2D) g2d.create();
            g2d.setColor(Color.BLUE);
            Shape shape = getShape();
            int x = (int) p.x - (shape.getBounds().width / 2);
            int y = (int) p.y - (shape.getBounds().height / 2);
            g2d.translate(x, y);
            g2d.fill(shape);
            g2d.dispose();
        }
    }

    public int getWidth() {
        return getShape().getBounds().width;
    }

    public int getHeight() {
        return getShape().getBounds().width;
    }
} 
```

我道歉，我有点得意忘形，但这个基本前提是有效的；）

# vba - 如何在将多个工作簿合并为一个时添加一些查找数据

> ID：12680552
> 
> 赞同：0
> 
> 时间：2012-10-01T20:26:30.523
> 
> 标签：vba, excel

我现在有一个程序可以合并来自多个工作簿的特定工作表。该程序必须处理大约 300 个工作簿并创建一个合并的工作簿。在合并的工作簿中，我必须向从其他工作簿复制的每一行添加更多数据点。目标工作簿中的行数可能约为 100,000。

我有另一个 XL，其中包含与客户相关的许多其他数据，如姓名、国家、货币等，我必须将其添加为其他列。

一个工作簿仅包含来自一位客户的数据。因此，对于从一个工作簿复制的数据，所有这些列的数据将基本相同。

现在，我正在考虑打开 customerData 工作簿并根据 customerID 有选择地复制数据，然后在粘贴每个工作表中的数据时将其粘贴到目标工作簿中。

现在代码将如下所示：

```
For each workbook in the source Folder
    Open source workbook
    Copy the range from worksheet1
    Copy the customerID from worksheet2
    Open target workbook
    Paste range from source.worksheet1 in the target worksheet
    Fill the range in the target worksheet with the first column as customerID
    Open workbook with customer master data
    Copy data based on customerID
    Paste in the target worksheet using fill range 
```

另一种方法是完成粘贴所有工作表中的所有数据，然后查找客户数据 - 这里的优点是可以在多个文件中为客户提供数据，因此在避免多次查找方面有一定的效率。客户主数据文件只需打开一次。

我想知道我采取的方法是否正确，是否有任何改进可以做到。

具体来说，我有以下问题：

*   有没有办法避免打开每个源文件？
*   将源工作簿中的所有数据添加到内存中的数组并将其复制一次到目标工作簿中是否更好？
*   如果我使用数组方法，我应该在粘贴之前将查找添加到数组中，还是应该在将数据粘贴到目标范围内之后执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:45:02.043

我写这个作为回复，因为它可能太长了作为评论。

1）没有办法避免打开源文件来检索数据。对于这样的操作，非常重要的是，对于您打开以进行检索的每个工作簿，您创建一个新的 Excel 实例（CreateObject 方法）并在完成后通过应用 .Quit 方法将其从内存中完全清除。Workbook.close 并不像您期望的那样完美（内存没有完美清除），并且您尝试在一个循环中打开/关闭的工作簿数量越多，您的应用程序在某个特定位置崩溃/冻结的可能性就越大观点。

2）读/写操作花费的时间最多，因此确实建议您尝试将它们的频率降低到最低限度。最好的方法确实是将每个检索到的工作簿的所有数据一次读取到单个范围（和数组）中并在内存中执行所有操作。当您执行了您想要执行的操作后，您可以将检索到的数组写入单个范围。
您可以按照您的建议一次将所有工作簿加载到一个数组中（据我所知，数组的大小仅受可用内存量的限制。出于实用的原因，我建议您编写每次关闭文件时都会将数据复制到目标工作簿。如果发生意外情况，您无需重新运行整个代码，但您可以将 for next 循环设置为上次的位置。

3）如果您想防止应用程序在每次遇到错误时停止（这很可能在您检索此数量的数据时），请使用

```
On Error goto ErrHandler
Err.Handler: 
    'Display error number / Description + place in logfile 
    Resume next 
```

建议您创建一个小的错误处理程序，将错误代码、描述和发生错误的位置写入单独的“日志”文件中，以便以后跟踪错误。但是这样你就可以在代码运行时喝咖啡。

4）至于查找，我不确定我是否正确理解您尝试做的事情。最快的查找自然是具有最短循环的查找。嵌套循环通常相当昂贵，当然当它们很长时。
我只想提一下（就像我通常做的那样），建议将来将 MS Access 用于用户 db（或任何其他 RDBMS）（当我听到“客户 ID”时，这是我首先想到的）。在性能领域的主要优势是可以通过应用索引直接访问记录。使用简单的 SQL 语句进行查询很容易，这比使用 VBA 自己编写所有程序并遍历数组要容易得多。SQL 语句可用于执行一般的 CRUD（创建、检索、更新、删除记录）操作，但还有更多。此外，您可以应用 VBA 来处理任何其他转换。

我希望我的回复对你有任何帮助，虽然我没有提供任何真实的代码。

# php - 在 WordPress 目录中安装 php 脚本的 Htaccess 问题

> ID：12680560
> 
> 赞同：0
> 
> 时间：2012-10-01T20:27:04.727
> 
> 标签：php, wordpress, .htaccess

我的根目录中安装了 wordpress。我添加了一个名为“jobs”的文件夹，并在其中放置了一个 php 脚本。当我访问 mysite.com/jobs 时，它可以工作.. 但是当我向下钻取时，例如尝试访问 mysite.com/jobs/parttime/miami - 那是它默认为 wordpress 404 页面的时候。

我一直在这里寻找正确的答案，但似乎无法使任何工作。

.htaccess

```
 # BEGIN WordPress 
<IfModule mod_rewrite.c> 
RewriteRule ^jobs - [L] 
RewriteEngine On 
RewriteBase / 
RewriteRule ^index\.php$ - [L] 
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
</IfModule> 
# END WordPress 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T21:49:16.957

有很多不同的方法可以解决这个问题。另一种方法是将 RewriteCond 添加到主 WordPress 重定向，以便它跳过以作业开头的请求。

```
 # BEGIN WordPress 
<IfModule mod_rewrite.c> 
RewriteEngine On 
RewriteBase / 
RewriteRule ^index\.php$ - [L] 
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/?jobs
RewriteRule . /index.php [L] 
</IfModule> 
# END WordPress 
```

# ruby-on-rails - Rails：表单提交没有正确创建属性？

> ID：12680561
> 
> 赞同：2
> 
> 时间：2012-10-01T20:27:06.590
> 
> 标签：ruby-on-rails

我正在尝试制作一个应用程序来制作属于许多用户的相册，并且用户可以拥有多个相册。但是，每当我尝试创建相册时，我的 @user.album.count 似乎都没有改变。

专辑/new.html.erb

```
<%= form_for (@album), url: user_albums_path, :html => { :id => "uploadform", :multipart => true } do |f| %>
<div>
    <%= f.label :name %>
    <%= f.text_field :name %>

    <%= f.label :description %>
    <%= f.text_area :description %>

    <br>

    <%=f.submit %>
</div>
<% end %> 
```

专辑控制器

```
class AlbumsController < ApplicationController

    def index
      @user = User.find(params[:user_id])
      @albums = @user.albums.all

      respond_to do |format|
        format.html
        format.json { render json: @albums }
      end
    end

    def show
      @albums = Album.all
      @album = Album.find(params[:id])
      @photo = Photo.new
    end

    def update
    end

    def edit
    end

    def create
      @user = User.find(params[:user_id])
      @album = @user.albums.build(params[:album])
      respond_to do |format|
        if @album.save
          format.html { redirect_to user_path(@user), notice: 'Album was successfully created.' }
          format.json { render json: @album, status: :created, location: @album}
        else
          format.html { render action: "new" }
          format.json { render json: @album.errors, status: :unprocessable_entity }
        end
      end 
    end

    def new
      @user = User.find(params[:user_id])
      @album = Album.new
    end

    def destroy
    end

end 
```

楷模

```
#album model
class Album < ActiveRecord::Base
  attr_accessible :avatar, :name, :description
  has_many :user_albums
  has_many :users, :through => :user_albums
  has_many :photos
end

#user model
class User < ActiveRecord::Base

  has_secure_password
  attr_accessible :email, :name, :password, :password_confirmation
  validates_presence_of :password, :on => :create

  validates_format_of :name, :with => /[A-Za-z]+/, :on => :create
  validates_format_of :email, :with => /\A([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})\Z/i, :on => :create
  validates_length_of :password, :minimum => 5, :on => :create

  has_many :user_albums
  has_many :albums, :through => :user_albums
  accepts_nested_attributes_for :albums

end

  #photo model (not up to there yet)
  class Photo < ActiveRecord::Base
    belongs_to :album
  end 
```

配置/路由

```
Pholder::Application.routes.draw do
resources :users do
  resources :albums 
end

resources :albums do
  resources :photos
end

root :to => "users#index" 
```

* * *

这是我的控制台

在 2012-10-01 17:41:59 -0400 为 127.0.0.1 开始获取“/assets/application.js?body=1” 服务资产 /application.js - 304 未修改（0ms）[2012-10-01 17:41:59] WARN 无法确定响应正文的内容长度。设置响应的内容长度或设置 Response#chunked = true

# 

Started POST "/users/13/albums" for 127.0.0.1 at 2012-10-01 17:42:11 -0400 Processing by AlbumsController#create as HTML Parameters: {"utf8"=>"✓", "authenticity_token"=>"ttqQnEt1KFuwvYRU6MuOLgc5UprSE/zMzGMuzzZiZiE=", "album"=>{"name"=>"fdsafds", "description"=>"fdafdsfafdsfadsfsdsa"}, "commit"=>"Create Album", "user_id"=>"13"} User Load (0.1ms) SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1 [["id", "13"]] (0.0ms) begin transaction SQL (0.3ms) INSERT INTO "albums" ("created_at", "description", "name", "updated_at") VALUES (?, ?, ?, ?) [["created_at", Mon, 01 Oct 2012 21:42:11 UTC +00:00], ["description", "fdafdsfafdsfadsfsdsa"], ["name", "fdsafds"], ["updated_at", Mon, 01 Oct 2012 21:42:11 UTC +00:00]] (5.6ms) commit transaction Redirected to [http://localhost:3000/users/13](http://localhost:3000/users/13) Completed 302 Found in 9ms (ActiveRecord: 6.0ms)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T23:32:42.020

Ok I found the problem. As you are creating the album through the user, with the build method

```
@album = @user.albums.build(params[:album]) 
```

then it's the user you have to save,

```
@user.save 
```

So your new create method is

```
def create
  @user = User.find(params[:user_id])
  @album = @user.albums.build(params[:album])
  respond_to do |format|
    if @user.save
      print @album.errors
      format.html { redirect_to user_path(@user), notice: 'Album was successfully created.' }
      format.json { render json: @album, status: :created, location: @album}
    else
      format.html { render action: "new" }
      format.json { render json: @album.errors, status: :unprocessable_entity }
    end
  end
end 
```

# php - 星级脚本不适用于静态网址 (RewriteRule)

> ID：12680564
> 
> 赞同：1
> 
> 时间：2012-10-01T20:27:14.307
> 
> 标签：php

星级脚本有问题。它适用于动态网址，例如：

/index.php?md=详情&id2

但它不适用于相同的链接，但在静态中，例如：

/ads/test-add-idn2.html

重写规则示例：

> RewriteRule ^ads */(.)-idn(.* ).html$ index.php?md=details&id=$2 [L,NE]

使用动态网址但不是静态网址的示例“要求”：

> 要求（'_star-rating.php'）；// 获取数据库连接信息

如何调用“_star-rating.php”来处理静态网址？

使用另一个重写规则？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:33:22.917

您没有选择正确的信息：

```
^ads/(.)-idn(.).html$
            ^^^ a dot can be any character, but only one
     ^^^ same here 
```

你可能需要类似的东西：

```
^ads/([-\w]+)-idn(\d+)\.html$ 
```

*   `[-\w]+`: 一个或多个单词字符或`-`符号
*   `\d+`: 一位或多位数字

**编辑：**请注意，这个（一个`.htaccess`文件）只影响通过网络浏览器/http调用的url。当您使用`include`或在 php 中时，您正在处理本地文件系统，这与任何文件`require`无关。`.htaccess`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:35:11.323

认为您的规则不正确。尝试：

```
RewriteRule ^ads/(.*?)-idn(\d+)\.html$ index.php?md=details&id=$2 [L,NE] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T20:36:06.447

您的重写规则将不匹配。如果您之前尝试捕获 URI 中的所有内容`-idn`并获取其后的数字，则需要更改您的模式，例如：

```
RewriteRule ^ads/(.*)-idn([0-9]*)\.html$ index.php?md=details&id=$2 [L,NE] 
```

请注意，我们使用`*`来匹配`.`之前所有文本的通配符`-idn`。我们还使用字符类`[0-9]`来指定我们对`-idn`文字前后的 0 个或多个数字感兴趣`.`（必须对其进行转义，以免被视为通配符`.`。

# ruby-on-rails - 带有收件箱和已发送消息的状态机

> ID：12680569
> 
> 赞同：0
> 
> 时间：2012-10-01T20:28:01.447
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid, state-machine

我正在制作一个私人消息系统，并且我正在使用状态机来了解消息在哪里。

这是我的模型：

```
class Message
  include Mongoid::Document
  include Mongoid::Timestamps::Created

  #fields
  field :subject, :type => String
  field :body, :type => String
  field :place, :type => String
  field :has_been_read, :type => String

  # Relationships 
  belongs_to :sender, :class_name => 'User', :inverse_of => :messages_sent
  belongs_to :receiver,   :class_name => 'User', :inverse_of => :messages_received

  #state machine has been read message?
    state_machine :has_been_read, :initial => :unread do
    event :read_message do
    transition :from => :unread, :to => :read
   end
   event :mark_unread do
     transition :from => :read, :to => :unread
   end
  end
  #state machine status can be in_box, sent, draft, trash, spam
end 
```

用户模型：

```
class User
 include Mongoid::Document
 include Mongoid::Timestamps::Created
.
.
.
  has_many :messages_sent, :class_name => 'Message', :inverse_of => :sender
  has_many :messages_received, :class_name => 'Message', :inverse_of => :receiver
.
.
.
end 
```

**1º 一条消息如何同时出现在同一地点`sent`？`inbox`**

**2º 什么初始状态对发送者和接收者用户有消息？**

抱歉，我是[state_machine gem的新手](https://github.com/pluginaweek/state_machine)

非常感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:06:21.473

看起来您正在尝试在此处跟踪两件事（读取状态和交付状态），并且您目前正在将它们组合在一起。我认为这实际上是有道理的，并且将它们分开会更干净。

我会推荐以下内容：

1.  在您的状态机中，跟踪消息状态：草稿、发件箱、已发送、收件箱、垃圾箱等。

2.  Separately keep a `read_at` field in your model that stores the datetime that the message was viewed by the recipient and default this value to nil.

    `field :read_at, type: DateTime, default: nil`

3.  Add a boolean method to your document for checking read status:

    `def read?`
    `!@read_at.nil?`
    `end`

# android - 无法在 Eclipse 中完成 ADT 的设置

> ID：12680570
> 
> 赞同：0
> 
> 时间：2012-10-01T20:28:01.440
> 
> 标签：android, eclipse, ubuntu, adt

我正在使用 Ubuntu 11.10。我已经在“下载”目录中提取了“android-sdk_r20.0.3-linux.tgz”。在 Eclipse 中安装 ADT 期间尝试设置 SDK 的位置时，我可以看到“android-sdk_r20.0.3-linux.tgz”文件，但它是灰色的。因此，我无法选择它来完成 ADT 的设置。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:43:44.203

*.tgz 是一个存档。从中提取文件，然后将 Eclipse 指向该文件夹。

# asp.net-mvc - EF 3 个表上的多对多关系（Fluent API）

> ID：12680571
> 
> 赞同：0
> 
> 时间：2012-10-01T20:28:07.250
> 
> 标签：asp.net-mvc, entity-framework, entity-framework-4, mapping, fluent-interface

我有 3 张表需要合并到一张表中。在下面你可以看到代码。

问题是每个球员都可以在每场比赛中参加一支或多支球队。每场新比赛的球员和球队安排。

那么我如何使用 fluent api 映射它，或者也许有更好的方法来解决它。从现在开始谢谢。

```
 public class Player
    {
        public int PlayerID { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string Phone { get; set; }
        public DateTime TimeStamp { get; set; }
        public ICollection<Team> Teams { get; set; }
        public ICollection<Tournament> Tournaments { get; set; }

    }

public class Team
    {
        public int TeamID { get; set; }
        public string Name { get; set; }
        public DateTime TimeStamp { get; set; }
        public ICollection<Player> Players { get; set; }
        public ICollection<Tournament> Tournaments { get; set; }
    }

public class Tournament
    {
        public int TournamentID { get; set; }
        public DateTime Date { get; set; }
        public int PlaceID { get; set; }
        public DateTime TimeStamp { get; set; }
        public virtual Place Place { get; set; }
        public ICollection<Player> Players { get; set; }
        public ICollection<Team> Teams { get; set; }
    }

  public class BPContext : DbContext
    {
        public DbSet<Tournament> Tournaments { get; set; }
        public DbSet<Place> Places { get; set; }
        public DbSet<Table> Tables { get; set; }
        public DbSet<Player> Players { get; set; }
        public DbSet<Team> Teams { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:19:17.523

我看不出你想用这个来完成什么。您的表格包含所有玩家、所有球队和所有锦标赛。

我想会有一场比赛要打？您可以做的是创建另一个表匹配，以使用与此类似的实体：

```
public class Match
{

 [Key]
 public int MatchId {get;set;}

 [ForeignKey("Tournament")]
 public int TournamentId {get;set;}

 [InverseProperty("Matches")]
 public virtual List<Team> Teams {get;set;}

 [InverseProperty("Matches")]
 public virtual List<Player> Players {get;set;}

 [InverseProperty("Matches")]
 public virtual Tournament Tournament {get;set;}
} 
```

这个新实体拥有所有 3 个之前的实体。但是，您必须修改以前的内容以包含这些更改：

```
public class Player
{
    public int PlayerID { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Phone { get; set; }
    public DateTime TimeStamp { get; set; }

    [InverseProperty("Players")]
    public virtual List<Match> Matches { get; set; }

    [InverseProperty("Players")]
    public virtual List<Team> Teams {get;set;}
} 
```

可以使用 LINQ 为玩家获取所有锦标赛：ctx.Players.Where(x => x.PlayerId == 15).Matches.Select(x => x.TournamentId)。

如果您想查看锦标赛中的所有玩家：ctx.Matches.Where(x => x.TournamentId ==15).Players.Select(x => x.Name)。

```
public class Team
{
    public int TeamID { get; set; }
    public string Name { get; set; }
    public DateTime TimeStamp { get; set; }

    [InverseProperty("Teams")]
    public List<Match> Matches {get;set;}

    [InverseProperty("Teams")]
    public List<Player> Players {get;set;}
}

public class Tournament
{
    public int TournamentID { get; set; }
    public DateTime Date { get; set; }
    public int PlaceID { get; set; }
    public DateTime TimeStamp { get; set; }
    public virtual Place Place { get; set; }

    [InverseProperty("Tournament")]
    public virtual List<Match> Matches {get;set;}
} 
```

# c# - Minidump 符号不会在发布模式下加载

> ID：12680574
> 
> 赞同：4
> 
> 时间：2012-10-01T20:28:49.070
> 
> 标签：c#, debugging, symbols, minidump

我正在尝试使用 VS 2010 调试小型转储。

虽然由我在“调试模式”中构建的应用程序生成的小型转储工作正常并且可以正确调试，但由在“发布模式”中构建的应用程序生成的小型转储不起作用。我的意思是我在调试小型转储时收到“无可用源”的问候，因为据说这些符号有问题。

“模块”窗口中的“符号状态”显示：“符号文件中没有本机符号”。

如果我从符号路径加载符号，我会得到“在此文件夹中找不到匹配的符号文件”。当然这是不正确的（我一直都知道，但以防万一我检查了它们是否真的与 ChkMatch.exe 匹配并且确实如此）。

我已经设法弄清楚究竟是哪些构建开关使小型转储无法使用——它们是“优化代码”和“调试信息”。使小型转储“工作”的唯一方法是取消选中“优化代码”并使用“完整”调试信息（不，pdb-only 不起作用）。这两个都有性能影响，我真的很想避免将这种构建设置用于我的应用程序的发布版本。

有谁知道为什么这两个开关会使小型转储无法使用？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T22:24:01.127

经过大量的试验和错误，我终于设法找出问题所在。我正在为遇到相同问题的其他人发布此信息。

解决方案是在工具/选项/调试/常规中取消选中“仅启用我的代码”。请务必停止调试，然后重新启动以使更改生效。

# c# - 有人可以向我解释一下组装类的功能吗？

> ID：12680576
> 
> 赞同：0
> 
> 时间：2012-10-01T20:28:55.083
> 
> 标签：c#, .net, dynamic, runtime, .net-assembly

我想在运行时加载和创建程序集，有人告诉我使用命名空间 System.Reflection.Assembly 和 System.Reflection.Emit。

我找到的唯一参考资料是在 msdn 上，但是当您不知道从哪里开始以及如何开始时，使用它就不太好。我已经用谷歌搜索了，但我没有找到任何有用的教程/示例/参考。

有人可以向我解释该功能或给我一些示例/教程吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T20:45:24.573

[http://msdn.microsoft.com/en-us/library/saf5ce06.aspx](http://msdn.microsoft.com/en-us/library/saf5ce06.aspx)

```
 public static void CompileScript(string source)
        {
            CompilerParameters parms = new CompilerParameters();
            parms.GenerateExecutable = true;
            parms.GenerateInMemory = true;
            parms.IncludeDebugInformation = false;
            parms.ReferencedAssemblies.Add("System.dll");
            // Add whatever references you might need here 
            CodeDomProvider compiler = CSharpCodeProvider.CreateProvider("CSharp");
            CompilerResults results = compiler.CompileAssemblyFromSource(parms, source);
            file.move(results.CompiledAssembly.Location,"c:\myassembly.dll");
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:00:38.587

从源文件创建程序集的一种可能方法是简单地运行 CSC（C# 命令行编译器），将源文件和引用作为参数传递。手动 IL 生成可能太先进了，尤其是如果您想从其他人提供的代码构建程序集。

要加载 - 使用 Assembly.Load。

# iphone - 选择行后的导航栏标题

> ID：12680583
> 
> 赞同：0
> 
> 时间：2012-10-01T20:29:18.593
> 
> 标签：iphone, ios

我创建了导航栏，但是当我选择例如 A 行而不写在 A 栏中

我怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:41:52.280

当您选择一行时，您是在推动一个新的视图控制器，还是有意保持在同一个视图上？

如果您想保持在同一个视图上，请在您的 didSelectRowAtIndexPath 方法中使用以下内容...

```
self.title = @"New Title"; 
```

或者，如果您尝试更改视图，请使用以下...

```
[self.navigationController pushViewController:newViewcontroller animated:YES]; 
```

在 newViewController 中，您可以使用 self.title 来设置该视图的标题。

# tsql - BIGINT 标量函数

> ID：12680584
> 
> 赞同：-2
> 
> 时间：2012-10-01T20:29:24.487
> 
> 标签：tsql

如何？？创建一个返回 bigint 的标量函数。该函数需要 2 个 bigint 输入。该函数将输入相乘并返回结果。

谢谢你，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:35:56.793

像这样的东西怎么样：

```
CREATE FUNCTION [dbo].[testbigint]
(
    @int1 bigint,
    @int2 bigint
)
RETURNS bigint
AS
BEGIN
    -- Declare the return variable here
    DECLARE @returnVal bigint

    set @returnVal =  @int1* @int2

    -- Return the result of the function
    RETURN @returnVal

END 
```

# jquery - 带有 JSON 和 .NET MVC 3 的 jQuery Skip 和 Take 函数

> ID：12680587
> 
> 赞同：1
> 
> 时间：2012-10-01T20:29:29.327
> 
> 标签：jquery, json, asp.net-mvc-3, pagination

如果从控制器中的 JSON 对象填充的项目，我试图为列表设置上一个和下一个按钮。

我有一个skip and take变量，这样我就可以对记录集做同样的事情。我想一次分页前进 7 个（下一个），一次反转 7 个（上一个）。

订单正在正确加载，但我不完全理解跳过的想法，以及在没有更多“页面”要呈现时更改 CSS 类。

```
 var skip = 0;
    var take = 7;

    function loadItems() {
        $.ajax({
            url: '@Url.Action("GetAllItems")',
            data:
            {
                skip: skip,
                take: take
            },
            type: "GET",
            cache: false,
            success: function (items) {
                $.each(items, function (index, item) {
                    $('#ul-items').append('<li><a class="link">' + item.Information + '</a></li>');
                });
            }
        });
    }

    $(document).ready(function () {
        $('#previous').live("click", function () {
            //page number , # of records needed
            skip(0);
            take(-7);

            if (i) {//execute if there are no previous selections available
                $('#previous').removeClass('enabled').addClass('disabled');
            }
        });

        $('#next').live("click", function () {
            //page number , # of records needed
            skip(1);
            take(7);

            if (i) {//execute if there are no previous selections available
                $('#next').removeClass('enabled').addClass('disabled');
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:34:10.127

`Skip`允许您很好地跳过列表中的许多项目。并`Take`在列表中获取下一个项目。

假设您有一个包含 100 个项目的分页列表，并且您一次需要 10 个项目。

最初你取 10 个。第二个链接需要跳过 10 个元素并取接下来的 10 个元素。

所以这就像`paginatedList.Skip(i*10).Take(10)`我将成为你的页码一样。

因此，如果 i 为 0，则 0*10 将是第 0 页（实际上是第一页，但用户不知道）。 `Take 10`将返回前 10 个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:44:07.130

您的代码应该更像这样，ypu 不必更改取值，只需跳过：

```
 $('#previous').live("click", function () {
            if (skip > 0) {
                skip = skip - 1;
            } else {
                $('#previous').removeClass('enabled').addClass('disabled');
            }
            loadItems();
        });

        $('#next').live("click", function () {
            skip = skip + 1;
            loadItems();
            $('#previous').addClass('enabled').removeClass('disabled');
        }); 
```

# java - 带有 Applet 的 java.lang.InstantiationException

> ID：12680591
> 
> 赞同：0
> 
> 时间：2012-10-01T20:30:14.967
> 
> 标签：java, exception, applet

该程序应显示 1 个普通按钮 (a) 和 3 个单选按钮 (x,z,y)。当用户选择一个单选按钮并按下按钮 a 时，它应该将他重定向到一个网站。问题是在启动期间。窗口是空的，在左下角有一条消息说“开始：Applet 未初始化”。此外，我在控制台中得到“java.lang.InstantiationException”。

我将不胜感激任何帮助。

```
package nome.nonoriginale;

import java.awt.Button;
import java.awt.Checkbox;
import java.awt.event.ActionListener;
import java.net.MalformedURLException;
import java.net.URL;

import javax.swing.JApplet;

import com.sun.corba.se.spi.orbutil.fsm.Action;

public abstract class Linkers extends JApplet implements ActionListener
{
Button a = new Button("Go to");

URL libro1;
URL libro2;
URL libro3;

Checkbox x;
Checkbox z;
Checkbox y;

public void init()
{
    try
    {
        libro1 = new URL("http://www.reddit.com/");
        libro2 = new URL("http://www.youtube.com/");
        libro3 = new URL("http://www.ismatteirecanati.it/default.aspx?pag=0&lang=it");
    }
    catch(MalformedURLException e)
    {
        System.out.println("Link's broken, brah");
    }
    add(a);
    add(x);
    add(z);
    add(y);

    a.addActionListener(this);
}

public void ActionPerformed(Action e)
{   
    if(x.getState() == true)
        getAppletContext().showDocument(libro1);

    else if(y.getState() == true)
        getAppletContext().showDocument(libro2);

    else if(z.getState() == true)
        getAppletContext().showDocument(libro3);
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:37:31.940

该类在声明时无法实例化`abstract`。您需要`abstract`从类声明中删除关键字：

```
public class Linkers extends JApplet implements ActionListener 
```

除此之外，您可以通过实施`ActionListener`来实施：

```
public void actionPerformed(ActionEvent e) { 
```

看起来您`Action`错误地导入了 CORBA 类。

一旦进行了这些更改，您将获得一个`NullPointerException`，因为您的复选框未实例化。

不要将 AWT 与 Swing 组件混合使用**——AWT 是重量级的，会对 Swing 组件的绘制产生不利影响**。

所以你可以使用：

```
JCheckBox x = new JCheckBox(); 
```

# c++ - 甚至没有声明的函数的未解决的外部符号链接器错误？

> ID：12680595
> 
> 赞同：0
> 
> 时间：2012-10-01T20:30:36.313
> 
> 标签：c++, visual-studio-2010

通常当我收到这个错误时，我会去寻找一个我忘记定义的函数，但我是从一个类的赋值运算符那里得到的，我从来没有声明过它。错误是这样的：

`1>SYNC_D3D11Model_Defs.obj : error LNK2019: unresolved external symbol "public: struct SYNC::Vector2 & __thiscall SYNC::Vector2::operator=(struct SYNC::Vector2 const &)" (??4Vector2@SYNC@@QAEAAU01@ABU01@@Z) referenced in function "public: struct VERTEX_TYPE & __thiscall VERTEX_TYPE::operator=(struct VERTEX_TYPE const &)" (??4VERTEX_TYPE@@QAEAAU0@ABU0@@Z)`

`1>SYNC_D3D11Model_Defs.obj : error LNK2019: unresolved external symbol "public: struct SYNC::Vector4 & __thiscall SYNC::Vector4::operator=(struct SYNC::Vector4 const &)" (??4Vector4@SYNC@@QAEAAU01@ABU01@@Z) referenced in function "public: struct VERTEX_TYPE & __thiscall VERTEX_TYPE::operator=(struct VERTEX_TYPE const &)" (??4VERTEX_TYPE@@QAEAAU0@ABU0@@Z)`

这基本上归结为， VERTEX_TYPE::operator= 正在尝试使用`SYNC::Vector2::operator=(const SYNC::Vector2 &)`但`SYNC::Vector4::operator=(SYNC::Vector2 &)`找不到定义。问题在于，1) 我从未在 VERTEX_TYPE 中声明、定义或使用赋值运算符，2) 即使我有，这些函数确实是在 .cpp 中定义的。这里自己看看。这是两个有问题的结构及其定义。

SYNC_Vectors.h

```
#ifndef SYNC_VECTORS_H
#define SYNC_VECTORS_H

#include <cmath>

namespace SYNC
{
    struct Vector2
    {
        Vector2();
        Vector2(const Vector2 & vec);
        Vector2(const float & x, const float & y);
        ~Vector2();

        inline Vector2 & operator=(const Vector2 & rhs);

        inline Vector2 operator+(Vector2 rhs);
        inline Vector2 operator-(Vector2 rhs);
        inline Vector2 operator*(const float & scalar);
        friend inline Vector2 operator*(const float & scalar, Vector2 rhs);

        inline Vector2 & operator+=(const Vector2 & rhs);
        inline Vector2 & operator-=(const Vector2 & rhs);
        inline Vector2 & operator*=(const float & scalar);

        bool operator==(const Vector2 & rhs);
        bool operator!=(const Vector2 & rhs);

        inline Vector2 & operator++();
        inline Vector2 & operator--();

        inline void Normal(Vector2 & rhs);

        Vector2 & Normalize();
        void Normalize(Vector2 & rhs);

        Vector2 & Dot(const Vector2 & rhs1, const Vector2 & rhs2);
        static float Cross(const Vector2 & lhs, Vector2 & rhs);

        float x;
        float y;
    };

    struct Vector3
    {
        Vector3();
        Vector3(const Vector3 & vec);
        Vector3(const float & x, const float & y, const float & z);
        virtual ~Vector3();

        inline Vector3 & operator=(const Vector3 & rhs);

        inline Vector3 operator+(Vector3 rhs);
        inline Vector3 operator-(Vector3 rhs);
        inline Vector3 operator*(const float & scalar);
        friend inline Vector3 operator*(const float & scalar, Vector3 rhs);

        inline Vector3 & operator+=(const Vector3 & rhs);
        inline Vector3 & operator-=(const Vector3 & rhs);
        inline Vector3 & operator*=(const float & rhs);

        inline bool operator==(const Vector3 & rhs);
        inline bool operator!=(const Vector3 & rhs);

        inline Vector3 & operator++();
        inline Vector3 & operator--();

        void Normalize();
        void Normalize(Vector3 rhs);

        void Dot(const Vector3 & vec1, const Vector3 & vec2);
        void Cross(const Vector3 & vec1, const Vector3 & vec2);

        float x;
        float y;
        float z;
    };

    struct Vector4
    {
        Vector4();
        Vector4(const Vector4 & rhs);
        Vector4(const float & x, const float & y, const float & z, const float & w);
        ~Vector4();

        inline Vector4 & operator=(const Vector4 & rhs);

        inline Vector4 operator+(Vector4 rhs);
        inline Vector4 operator-(Vector4 rhs);
        inline Vector4 operator*(const float & scalar);
        friend inline Vector4 operator*(const float & scalar, Vector4 rhs);

        inline Vector4 & operator+=(const Vector4 & rhs);
        inline Vector4 & operator-=(const Vector4 & rhs);
        inline Vector4 & operator*=(const float & rhs);

        inline bool operator==(const Vector4 & rhs);
        inline bool operator!=(const Vector4 & rhs);

        inline Vector4 & operator++();
        inline Vector4 & operator--();

        float x;
        float y;
        float z;
        float w;
    };

    struct Quaternion
    {
        Quaternion();
        Quaternion(const Quaternion & rhs);
        Quaternion(const Vector3 & v, const float & w);
        ~Quaternion();

        inline Quaternion & operator=(const Quaternion & rhs);

        inline bool operator==(const Quaternion & rhs);
        inline bool operator!=(const Quaternion & rhs);

        inline Quaternion operator*(Quaternion rhs);
        inline Quaternion & mul(const Quaternion & rhs);

        inline void Conjugate();
        inline void Conjugate(Quaternion &);

        inline void Normalize();
        inline void Normalize(Quaternion &);

        Vector3 v;
        float w;
    };

}
#endif 
```

SYNC_Vectors.cpp

```
#include "SYNC_Vectors.h"

//-----------------------------------------
// SYNC::Vector2 defintions
//-----------------------------------------

SYNC::Vector2::Vector2()
{
    x = 0;
    y = 0;
}

SYNC::Vector2::Vector2(const Vector2 & vec)
{
    x = vec.x;
    y = vec.y;
}

SYNC::Vector2::Vector2(const float & ix, const float & iy)
{
    x = ix;
    y = iy;
}

SYNC::Vector2::~Vector2()
{
}

SYNC::Vector2 & SYNC::Vector2::operator=(const SYNC::Vector2 & rhs)
{
    x = rhs.x;
    y = rhs.y;

    return *this;
}

SYNC::Vector2 SYNC::Vector2::operator+(SYNC::Vector2 rhs)
{
    rhs.x += x;
    rhs.y += y;

    return rhs;
}

SYNC::Vector2 SYNC::Vector2::operator-(SYNC::Vector2 rhs)
{
    rhs.x -= x;
    rhs.y -= y;

    return rhs;
}

SYNC::Vector2 SYNC::Vector2::operator*(const float & scalar)
{
    SYNC::Vector2 ret( x * scalar, y * scalar);

    return ret;
}

SYNC::Vector2 operator*(const float & scalar, SYNC::Vector2 rhs)
{
    rhs.x *= scalar;
    rhs.y *= scalar;

    return rhs;
}

SYNC::Vector2 & SYNC::Vector2::operator+=(const Vector2 & rhs)
{
    x += rhs.x;
    y += rhs.y;

    return *this;
}

SYNC::Vector2 & SYNC::Vector2::operator-=(const Vector2 & rhs)
{
    x -= rhs.x;
    y -= rhs.y;

    return *this;
}

SYNC::Vector2 & SYNC::Vector2::operator*=(const float & scalar)
{
    x *= scalar;
    y *= scalar;

    return *this;
}

bool SYNC::Vector2::operator==(const Vector2 & rhs)
{
    if(rhs.x == x && rhs.y == y)
        return true;
    else 
        return false;
}

bool SYNC::Vector2::operator!=(const Vector2 & rhs)
{
    if(rhs.x != x || rhs.y != y)
        return true;
    else
        return false;
}

SYNC::Vector2 & SYNC::Vector2::operator++()
{
    x++;
    y++;

    return *this;
}

SYNC::Vector2 & SYNC::Vector2::operator--()
{
    x--;
    y--;

    return *this;
}

void SYNC::Vector2::Normal(Vector2 & rhs)
{
    rhs.x = y;
    rhs.y = -x;
}

SYNC::Vector2 & SYNC::Vector2::Normalize()
{
    if(x > 0.000001 || y > 0.000001)
    {
        float length = sqrt((x * x) + (y * y));
        x /= length;
        y /= length;
    }
    else
    {
        x = 0;
        y = 0;
    }

    return *this;
}

void SYNC::Vector2::Normalize(Vector2 & rhs)
{
    if(x > 0.000001 || y > 0.000001)
    {
        float length = sqrt((x * x) + (y * y));
        rhs.x = x / length;
        rhs.y = y / length;
    }
    else
    {
        rhs.x = 0;
        rhs.y = 0;
    }
}

SYNC::Vector2 & SYNC::Vector2::Dot(const Vector2 & rhs1, const Vector2 & rhs2)
{
    x = rhs1.x * rhs2.x;
    y = rhs1.y * rhs2.y;

    return *this;
}

float SYNC::Vector2::Cross(const Vector2 & rhs1, Vector2 & rhs2)
{
    return ((rhs1.x * rhs2.y) - (rhs1.y * rhs2.x));
}

//-----------------------------------------
// SYNC::Vector3 defintions
//-----------------------------------------

SYNC::Vector3::Vector3()
{
    x = 0;
    y = 0;
    z = 0;
}

SYNC::Vector3::Vector3(const Vector3 & vec)
{
    x = vec.x;
    y = vec.y;
    z = vec.z;
}

SYNC::Vector3::Vector3(const float & ix, const float & iy, const float & iz)
{
    x = ix;
    y = iy;
    z = iz;
}

SYNC::Vector3::~Vector3()
{
}

SYNC::Vector3 & SYNC::Vector3::operator=(const Vector3 & rhs)
{
    x = rhs.x;
    y = rhs.y;
    z = rhs.z;

    return *this;
}

SYNC::Vector3 SYNC::Vector3::operator+(Vector3 rhs)
{
    rhs.x += x;
    rhs.y += y;
    rhs.z += z;

    return rhs;
}

SYNC::Vector3 SYNC::Vector3::operator-(Vector3 rhs)
{
    rhs.x -= x;
    rhs.y -= y;
    rhs.z -= z;

    return rhs;
}

SYNC::Vector3 SYNC::Vector3::operator*(const float & rhs)
{
    Vector3 ret(x * rhs, y * rhs, z * rhs);
    return ret;
}

SYNC::Vector3 operator*(const float & scalar, SYNC::Vector3 rhs)
{
    rhs.x *= scalar;
    rhs.y *= scalar;
    rhs.z *= scalar;

    return rhs;
}

SYNC::Vector3 & SYNC::Vector3::operator+=(const Vector3 & rhs)
{
    x += rhs.x;
    y += rhs.y;
    z += rhs.z;

    return *this;
}

SYNC::Vector3 & SYNC::Vector3::operator-=(const Vector3 & rhs)
{
    x -= rhs.x;
    y -= rhs.y;
    z -= rhs.z;

    return *this;
}

SYNC::Vector3 & SYNC::Vector3::operator*=(const float & rhs)
{
    x *= rhs;
    y *= rhs;
    z *= rhs;

    return *this;
}

bool SYNC::Vector3::operator==(const Vector3 & rhs)
{
    if(x == rhs.x && y == rhs.y && z == rhs.z)
        return true;
    else 
        return false;
}

bool SYNC::Vector3::operator!=(const Vector3 & rhs)
{
    if(x != rhs.x || y != rhs.y || z != rhs.z)
        return true;
    else 
        return false;
}

SYNC::Vector3 & SYNC::Vector3::operator++()
{
    x++;
    y++;
    z++;

    return *this;
}

SYNC::Vector3 & SYNC::Vector3::operator--()
{
    x--;
    y--;
    z--;

    return *this;
}

void SYNC::Vector3::Normalize()
{
    if(x > 0.000001 || y > 0.000001 || z > 0.000001)
    {
        float length = sqrt((x * x) + (y * y) + (z * z));
        x /= length;
        y /= length;
        z /= length;
    }
    else
    {
        x = 0;
        y = 0;
        z = 0;
    }
}

void SYNC::Vector3::Normalize(Vector3 rhs)
{
    if(x > 0.000001 || y > 0.000001 || z > 0.000001)
    {
        float length = sqrt((x * x) + (y * y) + (z * z));
        rhs.x /= length;
        rhs.y /= length;
        rhs.z /= length;
    }
    else
    {
        rhs.x = 0;
        rhs.y = 0;
        rhs.z = 0;
    }
}

void SYNC::Vector3::Dot(const Vector3 & vec1, const Vector3 & vec2)
{
    x = vec1.x * vec2.x;
    y = vec1.y * vec2.y; 
    z = vec1.z * vec2.z;
}

void SYNC::Vector3::Cross(const Vector3 & vec1, const Vector3 & vec2)
{
    x = ((vec1.y * vec2.z) - (vec1.z * vec2.y));
    y = ((vec1.z * vec2.x) - (vec1.x * vec2.z));
    z = ((vec1.x * vec2.y) - (vec1.y * vec2.x));
}

//-----------------------------------------
// SYNC::Vector4 defintions
//-----------------------------------------

SYNC::Vector4::Vector4()
{
    x = 0;
    y = 0;
    z = 0;
    w = 0;
}

SYNC::Vector4::Vector4(const Vector4 & rhs)
{
    x = rhs.x;
    y = rhs.y;
    z = rhs.z;
    w = rhs.w;

}

SYNC::Vector4::Vector4(const float & ix, const float & iy, const float & iz, const float & iw)
{
    x = ix;
    y = iy;
    z = iz;
    w = iw;
}

SYNC::Vector4::~Vector4()
{
}

SYNC::Vector4 & SYNC::Vector4::operator=(const Vector4 & rhs)
{
    x = rhs.x;
    y = rhs.y;
    z = rhs.z;
    w = rhs.w;

    return *this;
}

SYNC::Vector4 SYNC::Vector4::operator+(Vector4 rhs)
{
    rhs.x += x;
    rhs.y += y;
    rhs.z += z;
    rhs.w += w;

    return rhs;
}

SYNC::Vector4 SYNC::Vector4::operator-(Vector4 rhs)
{
    rhs.x += x;
    rhs.y += y;
    rhs.z += z;
    rhs.w += w;

    return rhs;
}

SYNC::Vector4 SYNC::Vector4::operator*(const float & rhs)
{
    Vector4 ret( x * rhs, y * rhs, z * rhs, w * rhs);
    return ret;
}

SYNC::Vector4 operator*(const float & scalar, SYNC::Vector4 rhs)
{
    rhs.x *= scalar;
    rhs.y *= scalar;
    rhs.z *= scalar;
    rhs.w *= scalar;

    return rhs;
}

SYNC::Vector4 & SYNC::Vector4::operator+=(const Vector4 & rhs)
{
    x += rhs.x;
    y += rhs.y;
    z += rhs.z;
    w += rhs.w;

    return *this;
}

SYNC::Vector4 & SYNC::Vector4::operator-=(const Vector4 & rhs)
{
    x += rhs.x;
    y += rhs.y;
    z += rhs.z;
    w += rhs.w;

    return *this;
}

SYNC::Vector4 & SYNC::Vector4::operator*=(const float & rhs)
{
    x *= rhs;
    y *= rhs;
    z *= rhs;
    w *= rhs;
}

bool SYNC::Vector4::operator==(const Vector4 & rhs)
{
    if(x == rhs.x && y == rhs.y && z == rhs.z && w == rhs.w)
        return true;
    else
        return false;
}

bool SYNC::Vector4::operator!=(const Vector4 & rhs)
{
    if(x != rhs.x || y != rhs.y || z != rhs.z || w != rhs.w)
        return true;
    else
        return false;
}

SYNC::Vector4 & SYNC::Vector4::operator++()
{
    x++;
    y++;
    z++;
    w++;
}

SYNC::Vector4 & SYNC::Vector4::operator--()
{
    x--;
    y--;
    z--;
    w--;
}

//---------------------------------
// SYNC::Quaternion definitions
//---------------------------------

SYNC::Quaternion::Quaternion()
{
    v.x = 0;
    v.y = 0;
    v.z = 0;
    w = 0;
}

SYNC::Quaternion::Quaternion(const Quaternion & rhs)
{
    v.x = rhs.v.x;
    v.y = rhs.v.y;
    v.z = rhs.v.z;
    w = rhs.w;
}

SYNC::Quaternion::Quaternion(const Vector3 & iv, const float & iw)
{
    v = iv;
    w = iw;
}

SYNC::Quaternion::~Quaternion()
{
}

SYNC::Quaternion & SYNC::Quaternion::operator=(const Quaternion & rhs)
{
    v = rhs.v;
    w = rhs.w;
}

bool SYNC::Quaternion::operator==(const Quaternion & rhs)
{
    if(v == rhs.v && w == rhs.w)
        return true;
    else
        return false;
}

bool SYNC::Quaternion::operator!=(const Quaternion & rhs)
{
    if(v != rhs.v || w != rhs.w)
        return true;
    else
        return false;
}

SYNC::Quaternion SYNC::Quaternion::operator*(Quaternion rhs)
{
    rhs.v.x = (w * rhs.v.x) + (v.x * rhs.w)  + (v.y * rhs.v.z) - (v.z * rhs.v.y);
    rhs.v.y = (w * rhs.v.y) - (v.x * rhs.v.z) + (v.y * rhs.w) + (v.z * rhs.v.x);
    rhs.v.z = (w * rhs.v.z) + (v.x * rhs.v.y) - (v.y * rhs.v.x) + (v.z * rhs.w);
    rhs.w = (w * rhs.w) - (v.x * rhs.v.x) - (v.y * rhs.v.y) - (v.z * rhs.v.z); 

    return rhs;
}

SYNC::Quaternion & SYNC::Quaternion::mul(const Quaternion & rhs)
{
    v.x = (w * rhs.v.x) + (v.x * rhs.w)  + (v.y * rhs.v.z) - (v.z * rhs.v.y);
    v.y = (w * rhs.v.y) - (v.x * rhs.v.z) + (v.y * rhs.w) + (v.z * rhs.v.x);
    v.z = (w * rhs.v.z) + (v.x * rhs.v.y) - (v.y * rhs.v.x) + (v.z * rhs.w);
    w = (w * rhs.w) - (v.x * rhs.v.x) - (v.y * rhs.v.y) - (v.z * rhs.v.z); 

    return *this;
}

void SYNC::Quaternion::Conjugate()
{
    v *= -1;
}

void SYNC::Quaternion::Conjugate(Quaternion & rhs)
{
    rhs.v = v * -1;
    rhs.w = w;
}

void SYNC::Quaternion::Normalize()
{
    float length = sqrt((w*w) + (v.x * v.x) + (v.y * v.y) + (v.z * v.z));
    if(length > 0.000001)
    {
        v.x /= length;
        v.y /= length;
        v.z /= length;
        w /= length;
    }
    else
    {
        v.x = 0;
        v.y = 0;
        v.z = 0;
        w = 0;
    }
}

void SYNC::Quaternion::Normalize(Quaternion & rhs)
{
    float length = sqrt((w*w) + (v.x * v.x) + (v.y * v.y) + (v.z * v.z)); 
    if(length > 0.000001)
    {
        rhs.v.x = v.x / length;
        rhs.v.y = v.y / length;
        rhs.v.z = v.z / length;
        rhs.w = w / length;
    }
    else
    {
        rhs.v.x = 0;
        rhs.v.y = 0;
        rhs.v.z = 0;
        rhs.w = 0;
    }
} 
```

同步模块

```
#ifndef SYNCMOD_H
#define SYNCMOD_H

#include <fstream>
#include <map>
#include <string>
#include "SYNC_Vectors.h"

struct SYNCMODEL_HEADER
{   
    char id[8];
    short ver[2];
    long m_numOfVertices;
    long m_numOfIndices;
    std::string m_modelName;
};

struct VERTEX_TYPE
{
    SYNC::Vector3 position;
    SYNC::Vector4 color;
    SYNC::Vector3 normal;
    SYNC::Vector3 binormal;
    SYNC::Vector3 tangent;
    SYNC::Vector2 textureCoords;
};

class SYNCMODEL_MATERIAL_HEADER
{
    enum DATA_TYPE{MATERIAL_SHORT , MATERIAL_INT, MATERIAL_LONG, MATERIAL_FLOAT, MATERIAL_DOUBLE};
    struct Data_Index
    {
        DATA_TYPE type;
        char * accessor;
    };

    int m_numOfElements;
    std::map<std::string, Data_Index> m_Indices;

};

std::ifstream & operator>>(std::ifstream & stream, SYNCMODEL_HEADER & header);

#endif 
```

同步模块.cpp

```
#include "syncmod.h"

std::ifstream & operator>>(std::ifstream & stream, SYNCMODEL_HEADER & header)
{
    stream.read(header.id, 8);
    stream.read(reinterpret_cast<char *>(&header.ver), sizeof(short) * 2);
    stream.read(reinterpret_cast<char *>(&header.m_numOfVertices), sizeof(long));
    stream.read(reinterpret_cast<char *>(&header.m_numOfIndices), sizeof(long));
    std::getline(stream, header.m_modelName, '\0');
    stream.seekg(static_cast<int>(stream.tellg()) - 1);
    return stream;
} 
```

有谁知道这到底是怎么回事？

编辑：这里只是一个额外的观察，为什么它只用这两个的赋值运算符而不是 SYNC::Vector3 来抛出标志？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:37:17.707

标头`SYNC_Vectors.h`声明：

```
inline Vector2 & operator=(const Vector2 & rhs); 
```

源文件`SYNC_Vectors.cpp`定义：

```
SYNC::Vector2 & SYNC::Vector2::operator=(const SYNC::Vector2 & rhs) 
```

从声明中删除`inline`，事情应该会变得更好。或者，正如我们所讨论的，通过复制文本或在文件末尾使用指令`<g>`将内联函数的定义放入. 对于后者，大多数人经常使用独特的扩展名。`SYNC_Vectors.h``#include``.inl`

# javascript - 使用正则表达式匹配哈希，但不是当它们是 url 的一部分时

> ID：12680596
> 
> 赞同：1
> 
> 时间：2012-10-01T20:30:47.843
> 
> 标签：javascript, regex

我正在努力使用 javascript 中的正则表达式，它需要 # 之后的文本到第一个单词边界，但如果它是 url 的一部分，则不匹配它。所以

#test - 应该匹配 test
sometext#test2 - 应该匹配 test2
xx moretext#test3 - 应该匹配 test3
[http://test.com#tab1](http://test.com#tab1) - 不应该匹配 tab1

我用链接替换散列后的文本（但不是散列字符本身）。文本中可以有多个散列，并且应该匹配所有散列（我想我应该使用 /g ）。

匹配散列后的部分非常容易：/#\b(.+?)\b/g，但如果字符串本身以“http”开头，则不匹配是我无法解决的问题。我可能应该使用负面的环顾四周，但我在解决这个问题时遇到了问题。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:46:10.267

由于 JS 不支持lookbehinds，因此请尝试使用负前瞻这个正则表达式：

```
/^(?!http:\/\/).*#\b(.+?)\b/ 
```

`www`根据您的情况，您可能也需要检查。

**编辑：**然后你可以这样做：

```
str = str.replace(re.exec(str)[1], 'replaced!'); 
```

[http://jsfiddle.net/j7c79/2/](http://jsfiddle.net/j7c79/2/)

**编辑 2：**有时，如果它变得太复杂，单独的正则表达式并不是要走的路。尝试不同的方法：

```
var txt = "asdfgh http://asdf#test1 #test2 woot#test3";

function replaceHashWords(str, rep) {
  var isUrl = /^http/.test(str), result = [];
  !isUrl && str.replace(/#\b(.+?)\b/g, function(a,b){ result.push(b); });
  return str.replace((new RegExp('('+ result.join('|') +')','g')), rep);
}

alert(replaceHashWords(txt, 'replaced!')); 
// asdfgh http://asdf#replaced! #replaced! woot#replaced! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:18:29.747

由于正则表达式通常（如果不总是）使用起来非常昂贵，我建议使用基本字符串和数组方法来确定给定的一组字符是否代表一个 URL（尽管我假设所有 URLS 都会开始用`http`字符串）：

```
$('ul li').each(
    function() {
        var t = $(this).text(),
            words = t.split(/\s+/),
            foundHashes = [],
            word = '';
        for (var i = 0, len = words.length; i < len; i++) {
            word = words[i];
            if (word.indexOf('http') == -1 && word.indexOf('#') !== -1) {
                var match = word.substring(word.indexOf('#') + 1);
                foundHashes.push(match);
            }
        }
        // the following just shows what, if anything, was found
        // and can definitely be safely omitted
        if (foundHashes.length) {
            var newSpan = $('<span />', {
                'class': 'matchedWords'
            }).text(foundHashes.join(', ')).appendTo($(this));
        }
    }); 
```

[JS Fiddle 演示（将一些计时信息打印到控制台）](http://jsfiddle.net/davidThomas/9TFXg/1/)。

参考：

*   jQuery：
    *   [`appendTo()`](http://api.jquery.com/appendTo/).
    *   [`each()`](http://api.jquery.com/each/).
    *   [`text()`](http://api.jquery.com/text/).
*   '香草' JavaScript
    *   [`Array.join()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join).
    *   [`String.indexOf()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf).
    *   [`String.split()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split).
    *   [`String.substring()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substring).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T20:33:33.360

这需要回顾一下，遗憾的是 JavaScript 的功能缺乏一些东西。

但是，如果您的主题字符串是一些 HTML 并且这些 URL 在`href`属性中，您可以从中创建一个文档并搜索文本节点，只替换它们`nodeValue`的 s 而不是整个 HTML 字符串。

# python - 将稀疏格式转换为数组 numpy

> ID：12680598
> 
> 赞同：0
> 
> 时间：2012-10-01T20:30:57.017
> 
> 标签：python, arrays, numpy

假设您有一个返回表行的生成器。你可以像这样使用的东西：

```
for (labels, value) in rows:
    pass 
```

“标签”的长度为 n 并为简单起见说它是所有字符串。“值”是像浮点数一样的数字。

是否有一种快速、最佳或内置的方法来散列标签并最终得到一个 n 维数组和 n 个列表，告诉您如何将标签值映射到索引？我想你也许可以把它存储在一个rearray中？我一直这样做，但最终总是有点扔掉代码。我想找到或创造一些更可重用的东西。

我会很高兴 `(('here', 'there', 'nowhere'), 1.234)`被映射到`results['here']['there']['nowhere'] = 1.234`或`results[12,3,45] = 1.234`（并在每个维度的轴上给出相应的列表。）

我可能会编写生成器转换为稀疏格式并使用 scipy，但这似乎是做一些相对简单的事情的讨厌方法。

我看到很多类似的问题，但没有一个能准确回答这个问题。也许我错过了一个搜索短语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:51:50.913

您可以尝试使用结构化数组：

```
result = np.fromiter(your_generator, dtype=[('labels', '|S10'), ('value', float)]) 
```

您将能够检索 a`ndarray`标签`result['labels']`（当然，值也是`result['value']`）。

请注意，您可以将多个条目存储在同一个标​​签中（前提是您始终具有相同的编号），例如

```
result = np.array([(('a','b','c'), 1.23),(('a','c','d'), 2.34)],
                  dtype=[('label', ("|S10", 3)), ('value', float)]) 
```

其中每个单独的记录作为一个元组给出，记录的三个“标签”作为一个元组本身。您还可以使用定制的 dtype 单独命名每个“标签”，例如：

```
 dtype=[('label',[('A','|S10'),('B','|S10'),('C','|S10')]),('value',float)] 
```

这样，您可以访问所有`A`通过`result['label']['A']`...

# android - 自定义选项卡指示器视图

> ID：12680599
> 
> 赞同：2
> 
> 时间：2012-10-01T20:31:00.173
> 
> 标签：android, android-layout, android-widget, actionbarsherlock

我想重现此选项卡指示器结构（屏幕来自 nova 启动器）：下拉菜单和右下角的箭头。

![在此处输入图像描述](../Images/3eccd9f23eeb1c09f3d38bdc7cfc760a.png)

我对代码没有问题，但我无法重现这种外观。我试过这个：

```
mBar.addTab(mBar.newTab().setText(ctx.getString(R.string.tab_actions)).setTabListener(this).setCustomView(R.layout.navigation_spinner)); 
```

其中 mBar 是 sherlock 支持 actionBar。

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout android:layout_width="match_parent"
    android:layout_height="match_parent" android:layout_margin="-10dp"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical">
    <Button android:id="@+id/button1" android:layout_width="match_parent"
        android:layout_height="match_parent" android:text="Button" />

</LinearLayout> 
```

这是我的结果：

![在此处输入图像描述](../Images/9bf84d92add739ce407a280759551e71.png)

问题是中央选项卡中的按钮没有填充选项卡指示器。如何设置自定义视图以完美填充指标而无需边距或填充？或者我必须以不同的方式处理这个问题才能获得像第一个屏幕一样的结果？谢谢指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T09:18:34.753

你想做的事情真的很复杂，而且很难实现。

如果你想要下拉菜单，你可以试试这些：

菜单/options.xml：

```
<item
    android:icon="@drawable/ic_menu_sort"
    android:showAsAction="ifRoom">
    <menu>
        <item
            android:id="@+id/menuSortNewest"
            android:title="Sort by newest" />
        <item
            android:id="@+id/menuSortRating"
            android:title="Sort by rating" />
    </menu>
</item> 
```

第二种选择：

菜单/options.xml：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:id="@+id/menuSort"
        android:showAsAction="ifRoom"
        android:actionLayout="@layout/action_sort"  />
</menu> 
```

布局/action_sort.xml：

```
<Spinner xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/ic_menu_refresh"
    android:entries="@array/order" /> 
```

菜单资源文档 - [http://developer.android.com/guide/topics/resources/menu-resource.html](http://developer.android.com/guide/topics/resources/menu-resource.html)

# delphi - 如何使用 Delphi/DSPack 捕获帧而不在 TVideoWindow 上显示？

> ID：12680600
> 
> 赞同：3
> 
> 时间：2012-10-01T20:31:07.333
> 
> 标签：delphi, directshow, dspack

DSpack 有示例代码来播放兼容 DirectShow 的视频设备并同时捕获视频帧。TVideoWindow 附加到 FilterGraph 以显示视频 (Firgure-1)。如果您删除 TVideoWindow，那么操作系统 (Windows) 将自动调出 ActiveMovie 并在单独的窗口中显示视频（图 2）。

有没有办法使用 DSPack 在不使用任何 GUI 组件且不显示视频的情况下捕获视频帧？

DSPack 论坛有一些关于 NullRenderer 过滤器的提及，但没有关于如何使用它的文档或示例。看起来我们可以通过直接在 GraphEdit 中手动将 Video Renderer 替换为 Null Render 来实现（图 3）。

我们如何通过在代码中进行所有操作来获得图 3 所示的结果？DSPack 没有解释如何创建 Null Renderer。

```
Figure-1: The graph of the default example code 
```

![图1](../Images/76301a99f5998bb5fada7d65e38c1937.png)

```
Figure-2: Shows what happens if I remove the TVideoWindow 
```

![图 2](../Images/31ef273e37f6de6d125054966b554404.png)

```
Figure-3: Shows what happens if I replace Video Renderer with a 
         Null Renderer and manually connect them in the GraphEdit. 
```

![图-3](../Images/905ae03adf016bf03f6335b1cbb32db1.png)

**这就是我最终做的（到目前为止）**

`ReassignSampleGrabberOutput`之前调用以下`filterGraph.Play;`

```
procedure TForm1.ReassignSampleGrabberOutput;
var
  nullRenderer : IBaseFilter;
  nullRendererPins: IEnumPins;
  nullRendererPin : IPin;
  graph:   IGraphBuilder;
begin

  nullRenderer := CreateComObject(CLSID_NullRenderer) as IBaseFilter;
  FilterGraph1.QueryInterface(IID_IGraphBuilder, graph);
  graph.AddFilter(nullRenderer, 'Null Renderer');

  nullRenderer.EnumPins(nullRendererPins);

  nullRendererPins.Reset;

  if nullRendererPins.Next(1, nullRendererPin, nil) = S_OK then
  begin
    //SampleGrabber1.OutPutPin.Disconnect;
    //SampleGrabber1.OutPutPin.Connect(nullRendererPin, nil);

    graph.Disconnect(SampleGrabber1.OutPutPin);
    graph.FindFilterByName('Video Renderer', filter);
    graph.RemoveFilter(filter);
    graph.Connect(SampleGrabber1.OutPutPin, nullRendererPin);

  end;
end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T20:35:43.670

[`Null Renderer Filter`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd390934%28v=vs.85%29.aspx)是标准过滤器/类。在代码中，您只需要实例化它 ( `CoCreateInstance`)，将其添加到图表中，并将其输入引脚连接到 Sample Grabber 的未连接输出引脚。

在 Delphi/DSPack 中应该是这样的：

`Renderer := CreateComObject(CLSID_NullRenderer) as IBaseFilter;`

# c# - C++ .NET DLL 包装器到 C# COM DLL（使用 Mono 构建）

> ID：12680607
> 
> 赞同：0
> 
> 时间：2012-10-01T20:31:25.067
> 
> 标签：c#, c++, unix, dll, mono

我有一个 C# COM DLL 的 C++ .NET COM DLL 包装器，我很好奇，是否可以在 UNIX 上使用 Mono 构建包装器？当我尝试时，我得到了很多这样的错误：

```
$>/opt/mono/bin/mcs /target:library *.cpp -recurse:'*.cpp' -warn:0 -out:my.dll -r:System.Windows.Forms.dll -r:System.Data.dll -r:System.Xml.Linq.dll

/AssemblyInfo.cpp(2,18): error CS1024: Wrong preprocessor directive
/AssemblyInfo.cpp(4,6):  error CS1041: Identifier expected, `namespace' is a keyword
/AssemblyInfo.cpp(4,22): error CS1001: Unexpected symbol `;', expecting identifier
/AssemblyInfo.cpp(42,1): error CS8025: Parsing error 
```

我还是 COM 和 Mono 的新手，所以如果这个想法存在根本缺陷，我深表歉意。

PS。如果有兴趣，我可以包含实际代码，但我对一般机制更感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:45:43.510

COM 组件不是跨平台的，它只适用于 Windows 操作系统，等效的跨平台替代方案是Firefox 使用的[XPCOM 。](http://fr.wikipedia.org/wiki/XPCOM)

# java - Spring Security + JSR 250 + EJB 3.1 不工作

> ID：12680608
> 
> 赞同：0
> 
> 时间：2012-10-01T20:31:27.123
> 
> 标签：java, spring-security, ejb-3.1, jsr250

我的 JEE6 webapp（主要是 CDI、EJB 3.1 和 JSF 2）使用 Spring Security 3，但不使用 Spring 依赖注入或 MVC。我实现了一个 Spring AuthenticationProvider 来处理登录。在登录期间，我根据一些自定义业务逻辑向我的用户添加角色。

现在，我想使用 JSR 250 注释来保护我的业务逻辑。我的业务逻辑是使用无状态 EJB（3.1 版）实现的。

我在 web.xml 中包含 Spring 的上下文 XML 文件，如下所示：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/spring/applicationContext-security.xml
    </param-value>
</context-param> 
```

这是 XML 文件的内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:security="http://www.springframework.org/schema/security"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
      http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
      http://www.springframework.org/schema/security
      http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<security:global-method-security jsr250-annotations="enabled"/>

<security:http auto-config="false">
    <security:intercept-url pattern="/pages/**" access="ROLE_USER"/>
    <security:intercept-url pattern="/**" access="IS_AUTHENTICATED_ANONYMOUSLY"/>
    <security:form-login login-page="/login.jsf"/>
    <security:anonymous/>
    <security:custom-filter ref="logoutFilter" position="LOGOUT_FILTER"/>
</security:http>

<bean id="logoutFilter" class="org.springframework.security.web.authentication.logout.LogoutFilter">
    <constructor-arg index="0" value="/login.jsf"/>
    <constructor-arg index="1">
        <list>
            <bean id="customLogoutHandler" class="com.example.client.security.CustomLogoutHandler"/>
            <bean id="securityContextLogoutHandler" class="org.springframework.security.web.authentication.logout.SecurityContextLogoutHandler"/>
        </list>
    </constructor-arg>
    <property name="filterProcessesUrl" value="/logout.jsf"/>
</bean>

<security:authentication-manager>
    <security:authentication-provider ref="customAuthenticationProvider"/>
</security:authentication-manager>

<bean id="customAuthenticationProvider"
      class="com.example.client.security.CustomAuthenticationProvider"/>
</beans> 
```

在我的类中，我使用类注解（类型级别）来表示所有方法都应该只能由具有特定角色的用户访问：

```
@Model
@RolesAllowed("ROLE_GROUP")
public class UserListAction { 
```

但是，只有角色 ROLE_USER 的用户也可以访问此类的任何功能。我在使用以下代码进行调试时验证了用户没有错误的角色：

```
 Collection<? extends GrantedAuthority> authorities = SecurityContextHolder.getContext().getAuthentication().getAuthorities(); 
```

正如预期的那样，权限集合不包含 ROLE_GROUP 权限。

似乎我的注释被完全忽略了，但是为什么呢？我也尝试过 Spring 的 pre-post annotations，但它们似乎也没有效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:10:33.507

默认情况下，Spring Security 使用[标准 Spring AOP](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/aop.html#aop-proxying)，它仅限于由 Spring 应用程序上下文创建的 bean。生命周期不受 Spring 控制的对象（例如 EJB）不会受到影响。同样，如果您使用创建对象实例`new`或其他一些框架按需创建对象。

您必须将方法安全拦截器应用于所有对象实例的唯一选择是使用 Aspectj。[这个问题](https://stackoverflow.com/questions/11400503/secured-annotations-not-working-in-aspectj-mode-with-autoproxy/11475003#11475003)的答案可能是一个很好的起点。

# vba - Excel 2007 VBA 计算错误

> ID：12680609
> 
> 赞同：3
> 
> 时间：2012-10-01T20:31:29.403
> 
> 标签：vba, math, excel, excel-2007

当您运行执行数值计算的 VBA 宏会产生一个十进制值时，返回的结果可能不正确。

这里有几个例子：

```
Dim me_wrong as Double
me_wrong = 1000 - 999.59 
```

结果 = 0.409999999999968

```
Dim me_wrong_too as Double
me_wrong_too = 301.84 - 301 
```

结果 = 0.839999999999975

我以前从未注意到这一点。到底是怎么回事？？？

我看过以下有关 Office 97 的文章，但找不到有关 Excel 2007 中的错误的任何信息：http: [//support.microsoft.com/default.aspx ?scid=kb;en-us;165373](http://support.microsoft.com/default.aspx?scid=kb;en-us;165373)

另外，它没有解释为什么我以前从未见过它。

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T20:36:40.287

Office 97 和 VBA 对问题的解释同样适用于 Excel 2007。尽管迁移到更高版本，但核心 VBA 系统基本上没有变化，因此困扰旧 VBA 宏的相同类型的准确性问题将持续存在。

根本问题在于以二进制表示小数的固有不准确性，以及如何使用 IEEE 浮点表示至少做出一些努力来减轻这种不准确性。在[此位置对 IEEE 表示的主题进行了非常体面的处理。](http://support.microsoft.com/kb/42980/EN-US)

**编辑：只是一点点额外的细节信息。**

举一个简单的例子来说明这个问题，假设小数表示为 2 的逆幂之和，例如 2 ^(-1)、 2 ^(-2)、 2 ^(-3)等。最终看起来像 0.5、0.25、0.125 等等。如果您*准确地*代表这些数字，那么一切都很好。但是，考虑像 0.761 这样的数字；2 ^(-1) +2 ^(-2)让你达到 0.750，但现在你需要 0.011。2 ^(-3) (.125) 太大了，但 2 ^(-4) (.0625) 太小了……所以你不断地使用较小的 2 次方，意识到你永远*无法完全**准确地*表示数字。

选择变成您停止解决并接受固有的不准确性，因为对于您正在解决/建模的问题“足够好”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T21:08:02.377

不幸的是，这不是一个错误。

双重表示遵循定点符号，其中尾数是数字“1,x”，其中“1”是隐含的。有一个指数和一个符号，这使得在 Base 2 中的完整表示。

相关问题是 Base=2 ，它使 "1,x" 中的 "x" 成为有限精度（它的 53 位）小数二进制。认为 x= a52*1/2+a51*1/4+a50*1/8+...+a*1**1/(2^52)+a0*1/(2^53)，其中**a < i >**是尾数中的位。

尝试用这种表示达到 1,4，然后你就碰到了精度墙……在二进制权重中没有 0.4 的有限分解。因此，规范指定您应该在真实数字之前立即表示数字，这样您就可以得到 0,39999..9997346（或任何尾部）。

“好”消息是，我上周刚刚在这个主题上烧掉了四个“c”编码日，如果你用**非常小的比例**（比如 10^-9）表示你的数字，你可以不用**双打**，然后存储在**非常大的变量**（long64）中，并且只使用整数来执行显示功能（通过整数除法及其余数在数学上切掉整数和小数部分）。一种享受，我告诉你……不是。

# youtube-api - 添加多个播放列表条目是不可靠的

> ID：12680613
> 
> 赞同：1
> 
> 时间：2012-10-01T20:31:39.147
> 
> 标签：youtube-api, playlist, json-c

我看到在短时间内向播放列表添加多个条目似乎经常失败而没有任何错误响应的问题。

我使用 json-c 格式和 2.1 版的 api。如果我发送 POST 请求以将 7 个视频条目添加到播放列表，那么我会看到其中 3-5 个视频条目实际添加到播放列表的结果。我正在从 api 获取所有请求的 201 创建响应。

请求如下所示：

```
{"data":{"position":0,"video":{"duration":0,"id":"5gYXlTe0JTk","itemsPerPage":0,"rating":0,"startIndex":0,"totalItems":0}}}

and here's the response:

{"apiVersion":"2.1","data":{"id":"PLL_faWZNDjUU42ieNrViacdvqvG714P4QjvSDgGRg1kc","position":4,"author":"Lance Andersen","video":{"id":"5gYXlTe0JTk","uploaded":"2012-08-16T19:27:19.000Z","updated":"2012-09-28T20:20:39.000Z","uploader":"usanahealthsciences","category":"Education","title":"What other products does USANA offer?","description":"Discover USANA's other high-quality products: the Sens skin and hair care line, USANA Foods, the RESET weight-management program, and Rev3 Energy.","thumbnail":{"sqDefault":"http://i.ytimg.com/vi/5gYXlTe0JTk/default.jpg","hqDefault":"http://i.ytimg.com/vi/5gYXlTe0JTk/hqdefault.jpg"},"player":{"default":"http://www.youtube.com/watch?v=5gYXlTe0JTk&feature=youtube_gdata_player","mobile":"http://m.youtube.com/details?v=5gYXlTe0JTk"},"content":{"5":"http://www.youtube.com/v/5gYXlTe0JTk?version=3&f=playlists&d=Af8Xujyi4mT-Oo3oyndWLP8O88HsQjpE1a8d1GxQnGDm&app=youtube_gdata","1":"rtsp://v6.cache3.c.youtube.com/CkgLENy73wIaPwk5JbQ3lRcG5hMYDSANFEgGUglwbGF5bGlzdHNyIQH_F7o8ouJk_jqN6Mp3Viz_DvPB7EI6RNWvHdRsUJxg5gw=/0/0/0/video.3gp","6":"rtsp://v7.cache7.c.youtube.com/CkgLENy73wIaPwk5JbQ3lRcG5hMYESARFEgGUglwbGF5bGlzdHNyIQH_F7o8ouJk_jqN6Mp3Viz_DvPB7EI6RNWvHdRsUJxg5gw=/0/0/0/video.3gp"},"duration":72,"aspectRatio":"widescreen","rating":5.0,"likeCount":"6","ratingCount":6,"viewCount":1983,"favoriteCount":0,"commentCount":0,"accessControl":{"comment":"allowed","commentVote":"allowed","videoRespond":"moderated","rate":"allowed","embed":"allowed","list":"allowed","autoPlay":"allowed","syndicate":"allowed"}},"canEdit":true}} 
```

如果我设置位置属性，问题不会改变。

如果我按顺序发送它们，它们之间有 5 秒的延迟，那么结果会更可靠，通常 7 个中有 6 个会出现在播放列表中。似乎在 api 服务器端发生了竞争情况。
我不确定如何处理这个问题，因为我在 api 调用响应中看到零错误。

我考虑过进行批处理，但找不到任何关于 json-c 格式的文档。我不确定这是否会有所作为。

是否有可靠地将播放列表条目添加到播放列表的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:44:18.587

这已在 10 月 25 日左右修复并更新到 youtube 数据 API。

# c# - 例外：参数无效（将新图像传递给图片框）

> ID：12680618
> 
> 赞同：9
> 
> 时间：2012-10-01T20:31:50.957
> 
> 标签：c#, image, dispose

我已经在 PictureBox 控件中有一个图像，现在我想向它传递一个新图像。

会发生什么，是 allpication Disposes（我发现了一个异常：“参数无效”）。

这是我的代码：

```
 using (Image img = Image.FromFile(open.FileName))
            {
                part.Picture = img;
                pictureBox1.InitialImage = null;
                pictureBox1.Image = img;
            } 
```

因此，当代码退出该方法时，它会直接 Displose 这个和主窗体。我仅在 Form1 启动的行上捕获异常。在这一点上，没有任何例外。pictureBox 正在绘画（在 Paint 事件中）时一定有问题，但我没有对此感到满意。

我真的不知道如何解决这个问题。我什至尝试使用清除所有资源（通过调用垃圾收集），但似乎没有任何效果。

* * *

还有一件事：“部分”是列表的引用，所以当我尝试删除当前图像（用新图像替换它）时，我遇到了另一个异常，例如：

“该进程无法访问该文件，因为它正在被另一个进程使用”。

* * *

这是否与第一个异常有关（当新图像未在图片框中绘制时）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-01T21:15:36.297

正如 Reed 所指出的，一旦您退出 using() 语句，您从 open.Filename 中提取的图像就会被释放。您的图片框仍在内存中引用此图像，因此当它被处理时，您也会丢失存储在图片框中的内容。

您真正需要的是您正在提取的图像的唯一副本。

```
 using (Image sourceImg = Image.FromFile(open.Filename))
    {
        Image clonedImg = new Bitmap(sourceImg.Width, sourceImg.Height, PixelFormat.Format32bppArgb);
        using (var copy = Graphics.FromImage(clonedImg))
        {
            copy.DrawImage(sourceImg, 0, 0);
        }
        pictureBox1.InitialImage = null;
        pictureBox1.Image = clonedImg;
    } 
```

这样，您的文件将在您退出此块后立即解锁，并且您将在图片框中保留图像的唯一副本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T20:33:43.077

问题是，在这段代码执行之后，`pictureBox1.Image`它指的是一个`Image`已经被处理的。

如果您不将`Image`创建包装在 a 中`using`，它应该可以解决您的问题。

```
Image img = Image.FromFile(open.FileName);
part.Picture = img;
pictureBox1.InitialImage = null;
pictureBox1.Image = img; // You can't dispose of this, or it won't be valid when PictureBox uses it! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T20:48:20.573

是的，这现在有效，但奇怪的是，我几乎发誓我也尝试过这种方式。好吧，没关系，只是它有效。困扰我的还有其他事情，我认为这与您的代码相同，但它不起作用，它再次尝试 Dispose 应用程序（同样的例外）。这是一个示例代码：

```
using(Image img = Image.FromFile(open.FileName))
{
   part.Picture = img; 
}
pictureBox1.InitialImage = null;
pictureBox1.Image = part.Picture;  //Picture  is a propery in a class 
```

现在我将一个实际图像传递到一个通用列表中，并尝试从中将新图像分配给图片框，但是，正如我所说，再次引发异常（并且应用程序终止）。为什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T20:46:28.577

您还可以执行以下操作，创建一个加载图像然后将其传递回图像控件的方法，例如，这就是我想填充图像控件时使用的方法

我有一个带有 3 个要加载的不同图像的 Windows 窗体，但我只显示一个的代码，因为我为所有 3 个图像控件调用相同的方法

```
 #region Codes for browsing for a picture
    /// <summary>
    /// this.picStudent the name of the Image Control
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    private void btnStudentPic_Click(object sender, EventArgs e)
    {
        Image picture = (Image)BrowseForPicture();
        this.picStudent.Image = picture;
        this.picStudent.SizeMode = PictureBoxSizeMode.StretchImage;
    }

    /// <summary>
    /// 
    /// </summary>
    /// <returns></returns>
    private Bitmap BrowseForPicture()
    {
       // Bitmap picture = null;

        try
        {
            if (this.fdlgStudentPic.ShowDialog() == DialogResult.OK)
            {
                byte[] imageBytes = File.ReadAllBytes(this.fdlgStudentPic.FileName);
                StudentPic = new Bitmap( this.fdlgStudentPic.FileName);
                StuInfo.StudentPic = imageBytes;
            }
            else
            {
                StudentPic = Properties.Resources.NoPhotoAvailable;
            }
        }
        catch (Exception)
        {
            MessageBox.Show("That was not a picture.", "Browse for picture");
            StudentPic = this.BrowseForPicture();
        }

        return StudentPic;
    }
    #endregion 
```

# objective-c - 比较类 __NSCFDictionary

> ID：12680620
> 
> 赞同：1
> 
> 时间：2012-10-01T20:31:56.167
> 
> 标签：objective-c, class, compare, nsdictionary, nsobject

有人可以解释为什么我得到 0 而不是 1 吗？

```
- (id)outlineView:(NSOutlineView *)outlineView objectValueForTableColumn:(NSTableColumn *)tableColumn byItem:(id)item {
    if (item != nil) {
        NSLog(@"%@",[item class]);
        NSLog(@"%d",[[item class]isEqual:[NSDictionary class]]);
    };
}

__NSCFDictionary 0 
```

* * *

问候，达雷克 :)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T20:34:46.680

你得到 0 因为 __NSCFDictionary 与 NSDictionary 不同。

尝试`isKindOfClass:`改用。

# linux - 32 和 33 杀戮信号发生了什么？

> ID：12680624
> 
> 赞同：9
> 
> 时间：2012-10-01T20:32:04.937
> 
> 标签：linux, bash, kill

如果您输入`kill -l`bash 并探测信号数。

32 和 33 杀戮信号发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T00:22:27.117

[POSIX 实时信号](http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_04_02)选项定义了一组具有各种有用属性的信号`SIGRTMIN`（例如`SIGRTMAX`，它们具有明确定义的传递优先级——最低信号号优先——并且同一信号的多个实例可以排队，并与参数，通过`sigqueue()`）。这些是由内核使用信号编号 32 向上实现的。

但是 POSIX 不需要`SIGRTMIN`并且`SIGRTMAX`是用户级代码的编译时常量，而在 GNU libc 中它们不是：如果您使用用户级`<signal.h>`通过预处理器（例如使用`gcc -E`）放置源文件，您会看到实际上`SIGRTMIN`扩展到`(__libc_current_sigrtmin())`.

在 glibc 内部的[实现](http://sourceware.org/git/?p=glibc.git;a=blob;f=nptl/sysdeps/unix/sysv/linux/allocrtsig.c;h=31ba872f5925c3ea258dbcd463638f72a2235e57;hb=75f0d3040a2c2de8842bfa7a09e11da1a73e17d0)*至少*保留了内核支持的前两个值，用于其内部目的。第一个（最高优先级的信号）用于支持线程取消处理；第二个用于与`setuid`. （见[这里](http://sourceware.org/git/?p=glibc.git;a=blob;f=nptl/pthreadP.h;h=fa89cbf44a3e0cd23856d980baa9def8b1cc358d;hb=75f0d3040a2c2de8842bfa7a09e11da1a73e17d0#l306)。我不确定在什么情况下使用分配更多信号供内部使用的能力。）

因此，丢失的信号编号是由于向`bash`您显示了应用程序对可用信号的视图（忽略了 glibc 内部使用的信号），而不是内核的视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:46:55.987

这不是 Centos 的重点。在archlinux上我有：

```
$ kill -l
 1) SIGHUP       2) SIGINT       3) SIGQUIT      4) SIGILL       5) SIGTRAP
 6) SIGABRT      7) SIGBUS       8) SIGFPE       9) SIGKILL     10) SIGUSR1
11) SIGSEGV     12) SIGUSR2     13) SIGPIPE     14) SIGALRM     15) SIGTERM
16) SIGSTKFLT   17) SIGCHLD     18) SIGCONT     19) SIGSTOP     20) SIGTSTP
21) SIGTTIN     22) SIGTTOU     23) SIGURG      24) SIGXCPU     25) SIGXFSZ
26) SIGVTALRM   27) SIGPROF     28) SIGWINCH    29) SIGIO       30) SIGPWR
31) SIGSYS      34) SIGRTMIN    35) SIGRTMIN+1  36) SIGRTMIN+2  37) SIGRTMIN+3
38) SIGRTMIN+4  39) SIGRTMIN+5  40) SIGRTMIN+6  41) SIGRTMIN+7  42) SIGRTMIN+8
43) SIGRTMIN+9  44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12 47) SIGRTMIN+13
48) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14 51) SIGRTMAX-13 52) SIGRTMAX-12
53) SIGRTMAX-11 54) SIGRTMAX-10 55) SIGRTMAX-9  56) SIGRTMAX-8  57) SIGRTMAX-7
58) SIGRTMAX-6  59) SIGRTMAX-5  60) SIGRTMAX-4  61) SIGRTMAX-3  62) SIGRTMAX-2
63) SIGRTMAX-1  64) SIGRTMAX 
```

如您所见，结束`31`的总是相同的信号`SIGRTMAX`，但有一些变化。

此外，在`/usr/include/asm/signal.h`我们发现的源文件中：

```
#define NSIG        32
typedef unsigned long sigset_t;

#endif /* __ASSEMBLY__ */

#define SIGHUP       1
#define SIGINT       2
#define SIGQUIT      3
#define SIGILL       4
#define SIGTRAP      5
#define SIGABRT      6
#define SIGIOT       6
#define SIGBUS       7
#define SIGFPE       8
#define SIGKILL      9
#define SIGUSR1     10
#define SIGSEGV     11
#define SIGUSR2     12
#define SIGPIPE     13
#define SIGALRM     14
#define SIGTERM     15
#define SIGSTKFLT   16
#define SIGCHLD     17
#define SIGCONT     18
#define SIGSTOP     19
#define SIGTSTP     20
#define SIGTTIN     21
#define SIGTTOU     22
#define SIGURG      23
#define SIGXCPU     24
#define SIGXFSZ     25
#define SIGVTALRM   26
#define SIGPROF     27
#define SIGWINCH    28
#define SIGIO       29
#define SIGPOLL     SIGIO
/*
#define SIGLOST     29
*/
#define SIGPWR      30
#define SIGSYS      31
#define SIGUNUSED   31

/* These should not be considered constants from userland.  */
#define SIGRTMIN    32
#define SIGRTMAX    _NSIG 
```

这证实了`SIGRTMIN`&`SIGRTMAX`是最大的信号并且`32`两者都有价值。

有关信号的更多信息`man 7 signals`

# java - 在 Java 中引发某个异常时的通知

> ID：12680631
> 
> 赞同：0
> 
> 时间：2012-10-01T20:32:31.860
> 
> 标签：java, exception, frameworks

我想知道是否有一种方法可以在抛出某个异常时得到通知，即使它已经被捕获。

我有一个异常被引发异常的底层框架捕获。我一直试图从他们的 try-catch 之外（基本上围绕它）使用这个异常作为触发点来运行一些代码并试图找到一种方法来做到这一点。

有什么办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T20:38:29.533

你没有给出上下文，所以这里有一些可能性：

*   在适当的构造函数中设置断点并在调试模式下运行
*   使用方面，例如 aspectj 或 spring
*   把你的扩展放在异常的构造函数中
*   在导致异常的代码周围放置一个 try-catch

PS：对于您不知道的情况，您可以`RuntimeExceptions`像捕获已检查的异常一样捕获。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:42:44.180

据我了解，您无法访问源代码，异常在您的访问范围之外被捕获和处理，您想让它做点什么吗？

唯一对我来说显而易见的解决方案是 PowerMock，一个库允许您覆盖构造函数并返回您自己创建的对象。它通常仅用于测试，我不鼓励将其用于任何其他目的，但您可以使用它来替换该异常的所有实例，并使用原始异常的扩展，并添加您自己的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T20:38:40.123

如果框架已经捕获了异常，则无法使用 try-catch 块捕获它。

您正在尝试这样做：

```
try {
    try {
        throw new Exception();
    } catch(Exception e) {
        e.printStackTrace();
    }
} catch(Exception e) {
    System.out.println("Caught from the outside!");
} 
```

这将失败，将打印异常的 StackTrace，但“从外部捕获！” 不会被打印。这是因为中间抛出的异常已经被捕获，异常不能被捕获两次，否则会破坏错误处理的目的；一旦处理了错误，无需通知更高级别；）

# android-spinner - Spinner 下拉菜单项颜色 (Android)

> ID：12680636
> 
> 赞同：6
> 
> 时间：2012-10-01T20:32:46.303
> 
> 标签：android-spinner, textcolor

所以我有一个微调器，我成功地更改了所选项目的颜色，但我无法更改下拉菜单中项目的颜色

这是我的**spinner_layout.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TextView  
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent" 
   android:layout_height="wrap_content"
   android:textSize="13sp" 
   android:textColor="#33CCFF"         
/> 
```

这是我的**styles.xml**

```
<resources>
  <style name="AppTheme" parent="android:Theme.Light" >
     <item name="android:spinnerDropDownItemStyle">@style/SpinnerItem.DropDownItem.Color</item>
     <item name="android:spinnerItemStyle">@style/SpinnerItem</item>
  </style>
  <style name="SpinnerItem.DropDownItem.Color" parent="@android:style/Widget.DropDownItem.Spinner">
      <item name="android:textColor">#4FBDE8</item>
  </style>

  <style name="SpinnerItem" parent="@android:style/Widget.TextView.SpinnerItem">
      <item name="android:textColor">#4FBDE8</item>
  </style>
</resources> 
```

有没有我可以做到的 XML 方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T02:36:33.683

这是我在另一个stackoverflow线程上找到的解决方案

```
<style name="Theme.NoTitleBar.WithColoredSpinners" parent="@android:style/Theme.NoTitleBar">
    <item name="android:spinnerItemStyle">@style/SpinnerItem</item>
    <item name="android:spinnerDropDownItemStyle">@style/SpinnerItem.DropDownItem</item>
</style>

<style name="SpinnerItem" parent="@android:style/Widget.TextView.SpinnerItem">
    <item name="android:textColor">#00FF00</item>
</style>

<style name="SpinnerItem.DropDownItem" parent="@android:style/Widget.DropDownItem.Spinner">
    <item name="android:textColor">#FF0000</item>
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-14T06:54:47.070

在为微调器指定布局资源文件时，您必须在两个地方设置它。

1.  在声明一个新的 ArrayAdapter 时

    ```
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this, R.layout.spinner_item, categories); 
    ```

2.  在阵列适配器上设置 dropDownViewResource 时。

    ```
    dataAdapter.setDropDownViewResource(R.layout.spinner_item_dropdown); 
    ```

请注意，使用了两个不同的布局文件。您可以通过以下方式自定义视图，方法是定义样式并将这些样式用作相应布局中的主题。

```
<style name="SpinnerItem" parent="@android:style/Widget.TextView.SpinnerItem">
    <item name="android:textColor">@color/white</item>
    <item name="android:background">@color/black</item>
</style>

<style name="SpinnerItem.DropDownItem" parent="@android:style/Widget.DropDownItem.Spinner">
    <item name="android:textColor">@color/black</item>
</style> 
```

希望这可以帮助。

# javascript - YUI 中的 jQuery outerHeight() 等价物是什么

> ID：12680638
> 
> 赞同：10
> 
> 时间：2012-10-01T20:32:55.817
> 
> 标签：javascript, jquery, height, yui

[在 jQuery 中，我可以通过使用outerHeight()](http://api.jquery.com/outerHeight/)轻松获取包含填充、边框和可选边距的元素的当前计算高度...

```
// returns height of element + border + padding + margin
$('.my-element').outerHeight(true); 
```

我将如何在 YUI 中执行此操作？我目前使用的是**2.8.1 版本**。

与[这个问题](https://stackoverflow.com/questions/4136616/yui-get-true-element-width)类似，我总是可以对高度、边框、填充和边距执行[getComputedStyle()](http://yuilibrary.com/yui/docs/api/classes/Node.html#method_getComputedStyle)，但这是很多体力劳动，包括解析返回值和获取所需的正确值并自己进行数学运算。

在 YUI 中是否有一些与 jQuery 等效的功能可以`outerHeight()`为我完成所有这些工作？

## 解决方案

我最终编写了自己的解决方案，因为我找不到 jQuery`outerheight()`等价物。我已在[此处发布解决方案作为答案](https://stackoverflow.com/a/12753203/196921)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T21:26:25.350

在 YUI 中没有内置的方法来获取元素的外部宽度及其边距。就像@jshirley 提到的那样，有`offsetWidth`，但它没有考虑边距。但是，您可以创建一个很容易添加边距的函数：

```
Y.Node.ATTRS.outerHeight = {
  getter: function () {
    return this.get('offsetHeight') + 
           parseFloat(this.getComputedStyle('marginTop')) + 
           parseFloat(this.getComputedStyle('marginBottom'));
  }
};

Y.Node.ATTRS.outerWidth = {
  getter: function () {
    return this.get('offsetWidth') +
           parseFloat(this.getComputedStyle('marginLeft')) +
           parseFloat(this.getComputedStyle('marginRight'));
  }
}; 
```

然后你可以通过做得到外部宽度`Y.one(selector).get('outerWidth')`。这是一个基于@jshirley 代码的示例：http: [//jsbin.com/aretab/4/](http://jsbin.com/aretab/4/)。

请记住，尺寸通常是浏览器中错误的来源，这并没有考虑到一些东西（即：文档的尺寸）jQuery 试图捕捉（参见[https://github.com/jquery/jquery/ blob/master/src/dimensions.js](https://github.com/jquery/jquery/blob/master/src/dimensions.js)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T20:59:57.417

如果您想避免手工劳动，请将元素包装在 div 中并获取其计算样式。

如果您不止一次地做某事，请创建一个函数/插件以重用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T20:56:25.763

根据[http://www.jsrosettastone.com/](http://www.jsrosettastone.com/)，您应该使用 .get('offsetHeight')。

此示例显示了等效性：http: [//jsbin.com/aretab/1/edit](http://jsbin.com/aretab/1/edit)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T19:56:02.193

我最终为此编写了自己的小实用函数：

```
/**
 * Calculates the outer height for the given DOM element, including the 
 * contributions of padding, border, and margin.
 * 
 * @param el - the element of which to calculate the outer height
 */
function calculateElementOuterHeight(el) {

  var height = 0;
  var attributeHeight = 0;
  var attributes = [
      'height', 
      'border-top-width', 
      'border-bottom-width', 
      'padding-top', 
      'padding-bottom', 
      'margin-top', 
      'margin-bottom'
  ];

  for (var i = 0; i < attributes.length; i++) {

    // for most browsers, getStyle() will get us a value for the attribute 
    // that is parse-able into a number
    attributeHeight = parseInt(YAHOO.util.Dom.getStyle(el, attributes[i]), 10);

    // if the browser returns something that is not parse-able, like "auto", 
    // try getComputedStyle(); should get us what we need
    if (isNaN(attributeHeight)) {
      attributeHeight = parseInt(YAHOO.util.Dom.getComputedStyle(el, attributes[i]), 10);
    }

    // if we have an actual numeric value now, add it to the height, 
    // otherwise ignore it
    if (!isNaN(attributeHeight)) {
      height += attributeHeight;
    }
  }

  return isNaN(height) ? 0 : height;
} 
```

这似乎适用于所有现代浏览器。我已经在 Chrome、Firefox（idk 大约 3.6，但最新版本有效）、Safari、Opera 和 IE 7、8、9 中对其进行了测试。让我知道你们的想法！

# c# - 如何从文件中读取长度为 1 或 2 个字符的数字

> ID：12680640
> 
> 赞同：0
> 
> 时间：2012-10-01T20:32:59.587
> 
> 标签：c#

如何从文本文件中读取仅包含一两个字符的数字。例如：

```
123 32 40 14124 491 1 
```

我需要得到 ：`32 40 1`

我做了什么：

```
OpenFileDialog ls = new OpenFileDialog();
int numbersFromFile;
if (ls.ShowDialog() == DialogResult.OK)
{
    StreamReader read = new StreamReader(ls.FileName);
} 
```

我不确定该怎么做，我想我需要读取字符串中的所有字符然后使用子字符串功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:37:46.070

你可以使用类似的东西：

```
string lines = File.ReadAllText(ls.FileName);
string[] words = lines.Split(new[] {' ', '\n'}, StringSplitOptions.RemoveEmptyEntries);
string result = String.Join(" ", words.Where(w => w.Length < 3));

// result == "32 40 1" given above input 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:42:59.860

```
string numbers = string.Empty;
using (var reader = new StreamReader(@"C:\Temp\so.txt"))
{
    numbers = reader.ReadToEnd();
}

var matches = numbers.Split(' ').Where(s => s.Length == 1 || s.Length == 2);
foreach (var match in matches)
{
    Console.WriteLine(match);
} 
```

`matches`将包含一个`IEnumerable<string>`长度为 1 或 2 的字符串。不过，这不会检查它是否是字符串，但可以轻松更改代码来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T20:43:21.233

您可以将内容读入一个字符串，然后拆分单词以测试长度。像下面

```
 //create the Stream reader object
            StreamReader sr = new StreamReader("FilePath");
            //open and get the contents put into a string
            String documentText = sr.ReadToEnd();
            //close the reader
            sr.Close();
            //split out the text so we can look at each word
            String[] textStrings = documentText.Split(' ');
            //create a list to hold the results
            List<String> wordList = new List<String>();

            //loop through the words and check the length
            foreach (String word in textStrings)
            {   //if it is less then 3 add to our list
                if (word.Length < 3)
                {
                    wordList.Add(word);
                }
            }

            //...do what you need to with the results in the list
            foreach (String wordMatch in wordList)
            {
                MessageBox.Show("There are " + wordList.Count.ToString() + " items in the list");
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T20:43:56.830

我只是用一个简单的正则表达式来做到这一点；

```
string strRegex = @"(?<=\ )\d{1,2}(?!\d)";
RegexOptions myRegexOptions = RegexOptions.Multiline;
Regex myRegex = new Regex(strRegex, myRegexOptions);
string strTargetString = @"123 32 40 14124 491 1"; // read.ReadToEnd();

foreach (Match myMatch in myRegex.Matches(strTargetString))
{
  if (myMatch.Success)
  {
    // Add your code here
  }
} 
```

(?) 构造确保您的匹配项周围有一个空格和非数字，并且 \d{1,2} 匹配一组长度为一个或两个字符的数字。

# android - 如何使用列表片段中的内容提供者填充详细信息片段

> ID：12680642
> 
> 赞同：1
> 
> 时间：2012-10-01T20:33:09.760
> 
> 标签：android, xamarin.android

我有一个使用 SimpleCursorAdapter 填充列表的 ListFragment。它使用两个窗格设置在右侧显示详细信息片段。

```
public override void OnCreate(Bundle savedInstanceState)
    {
        base.OnCreate(savedInstanceState);

        string[] fromColumns = new string[]
        {
            MinefieldDataProvider.InterfaceConsts.FirstName
        };

        int[] toControlIds = new int[]
        {
            Android.Resource.Id.Text1
        };

        LoaderManager.InitLoader(PersonnelListLoaderId, null, this);
        this._adapter = new SimpleCursorAdapter(Activity.ApplicationContext, Android.Resource.Layout.SimpleListItem1, null, fromColumns, toControlIds, CursorAdapterFlags.None);
        this.ListAdapter = this._adapter;
    }

    public override void OnActivityCreated(Bundle savedInstanceState)
        {
            base.OnActivityCreated(savedInstanceState);

            View detailsPane = this.Activity.FindViewById(Resource.Id.item_detail_container);
            this._dualPane = (detailsPane != null && detailsPane.Visibility == ViewStates.Visible);

            if (savedInstanceState != null)
                this._currentPosition = savedInstanceState.GetInt("currentPosition", -1);

            if (this._dualPane)
            {
                this.ListView.ChoiceMode = ChoiceMode.Single;
                this.ShowDetails(this._currentPosition);
            }
        } 
```

但是我不确定使用用户选择填充详细信息窗格的“android”方式。我是否提取 URI 并将其传递给详细信息片段，然后在详细信息部分使用 ContentProvider 的新实例？或者我是否传递了我想以某种方式显示在用户界面中的每个单独的字段？

请注意，在详细信息窗格中，用户将能够编辑信息并使用 ContentProvider 通过按钮将其保存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:34:47.377

我最终在详细信息片段中使用了加载器管理器并在那里进行了查询。这种方式更加自给自足。

# actionscript-3 - 使用 OOP 和 TimeLine

> ID：12680643
> 
> 赞同：0
> 
> 时间：2012-10-01T20:33:22.430
> 
> 标签：actionscript-3, flash

我在使用 flash CS6（或 CS*）时遇到问题，我希望能够在界面中创建符号并将它们链接到 as3 类。问题是在编辑类时代码提示不能正常工作，我想是因为 CS* 接口没有告诉代码对象类型。

*例如：*

我创建了一个符号并将它链接到一个类 (myclasses.SomeDisplayObject) 我现在在 flash pro 代码编辑器中创建和编辑这个类，但编辑器不知道任何对象属性。

为了解决这个问题，我一直在类上创建私有属性并在构造中分配它们。这样我可以设置类型和代码提示工作。这是一个真正的麻烦，我在一个类中有 50 行变量赋值。

必须有更好的方法，我希望这里有人知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:38:25.047

您可以使用其他编辑器。例如，有[FlashDevelop](http://www.flashdevelop.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T00:26:50.040

只需关闭“自动声明阶段实例”并将它们声明为公共属性即可。有关如何在时间线上处理 OOP 的更多细节，请查看[http://www.developria.com/2010/04/combining-the-timeline-with-oo.html](http://www.developria.com/2010/04/combining-the-timeline-with-oo.html)和[http://www.meetup.com /atlflex/文件/](http://www.meetup.com/atlflex/files/)

IDE（或您选择使用的任何其他代码工具，如 Flash Builder）然后应该识别您的实例。

# sencha-touch-2 - Sencha Architect xtype 更改

> ID：12680645
> 
> 赞同：1
> 
> 时间：2012-10-01T20:33:24.167
> 
> 标签：sencha-touch-2, sencha-architect

如何在 Sencha Architect 中更改 xtype？

例子：

从：

`xtype: 'list'`

至

`xtype: 'RefreshableList'`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T00:54:38.727

作为免责声明，我是 Sencha Architect 产品的首席工程师之一。

拖出一个列表作为顶级组件。所有顶级组件都是它们自己的类。将`userAlias`和`userClassName`配置设置为“refreshablelist”和“RefreshableList”等值。看看为此生成的代码。

拖出一个 Panel 作为顶级组件，将检查器中现有的 RefreshableList 拖到新的 Panel 中。提示将询问您是否要移动、复制或链接列表，选择“链接”。这将创建您的子类 RefreshableList 的实例。

这是目前在 Architect 中执行此任务的最佳方式。如果您在 Architect 之外构建 RefreshableList 组件并希望在此过程中链接它，情况会有所不同。您将必须创建一个覆盖并更改您在那里实例化的 xtype。我们正试图在 Sencha Architect 2.2 中解决这个限制。您将能够指定我们当前调用的`createAlias`. 这是要创建的别名（xtype、ptype、type 等）。

例如，如果您拖出一个面板，然后在其中放置一个列表，则可以在检查器中选择该列表并将其配置`createAlias`为“RefreshableList”。这会将生成代码中的 xtype 从“list”替换为“RefreshableList”。它*不会*改变 Architect 内部画布上呈现的内容。您必须通过 JS 资源和/或动态加载器/需要功能加载 RefreshableList 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T01:36:17.047

您必须通过扩展列表类来创建自己的类并为其提供您自己的小部件别名。本教程有你需要的一切：[http ://www.sencha.com/learn/how-to-use-classes-in-sencha-touch-2/](http://www.sencha.com/learn/how-to-use-classes-in-sencha-touch-2/)

更新

这是一个非常基本的自定义列表的一些代码

```
//this follows the MVC structure, if you wanted you could also do something like ux.RefreshableList
Ext.define('myAppName.view.RefreshableList', {
    extend: 'Ext.dataview.List',
    xtype: 'RefreshableList',
    config: {
        fullscreen: true,
        itemTpl: '{title}',
        data: [
            { title: 'Item 1' },
            { title: 'Item 2' },
            { title: 'Item 3' },
            { title: 'Item 4' }
        ]
    },
    initialize: function() {
        this.callParent();
    }
}); 
```

# mysql - 如果 my.cnf 不存在（在 OS X Mountain Lion 上），MySQL 从哪里获取变量？

> ID：12680650
> 
> 赞同：0
> 
> 时间：2012-10-01T20:34:01.063
> 
> 标签：mysql, macos

> **可能重复：**
> [对于自制 mysql 安装，my.cnf 在哪里？](https://stackoverflow.com/questions/7973927/for-homebrew-mysql-installs-wheres-my-cnf)

我已经通过 Homebrew 在 OSX Mountain Lion 上安装了 MySQL，并且在通过 my.conf 文件配置安装时遇到了一些问题。

运行`mysqld --help --verbose`返回以下内容：

```
Default options are read from the following files in the given order:
/etc/my.cnf /etc/mysql/my.cnf /usr/local/etc/my.cnf ~/.my.cnf 
The following groups are read: mysqld server mysqld-5.5
The following options may be given as the first argument: 
```

其次是一堆不同的配置选项。

我想通过创建一个 my.cnf 文件来设置一个变量，但是每当我尝试这样做时（在 /etc/ 中），当我尝试启动或停止 MySQL 服务器时，我都会收到一条关于 .pid 文件的错误消息。我试图通过在 my.cnf 中为 pid-file 设置一个值来解决这个问题，但这似乎不起作用。

我期望看到的是一个预先存在的 my.cnf 文件，MySQL 从中获取它列出的所有变量的值。然后我就可以编辑该文件并设置我想要设置的变量。但是，该文件似乎不存在。那么 MySQL 是从哪里获取变量值的呢？编写 my.cnf 文件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T01:02:06.253

根据上面斯蒂芬的评论和链接，默认情况下 Homebrew 不提供 my.cnf 文件：至少不在 MySQL 将读取它的位置。上面的链接提供了有关如何使用 homebrew 提供的样板 my.cnf 之一*来*开始构建您自己的 my.cnf 文件的说明。

# php - Ajax 发布请求安全性

> ID：12680663
> 
> 赞同：3
> 
> 时间：2012-10-01T20:34:54.210
> 
> 标签：php, ajax, json, security

我正在使用 PhoneGap 开发一个移动应用程序，它将通过 ajax 请求与服务器（PHP）进行通信。

在服务器端（PHP） 像[https://example.com/retrieveData.php](https://example.com/retrieveData.php)这样的东西 将通过获取用户 ID`$_POST['user_id']`并以 JSON 形式返回有关用户的一些敏感信息。

在客户端（PhoneGap-Javascript），JSON 输出将被解析并在应用程序中使用。

我担心的是，如果有人窃取了这个 url ( [https://example.com/retrieveData.php](https://example.com/retrieveData.php) )，他可以手动发送虚​​假的 post 请求并且可以窃取返回的用户信息吗？

我怎样才能保护这种通信？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T20:43:12.963

> 我担心的是，如果有人窃取了这个 url ( [https://example.com/retrieveData.php](https://example.com/retrieveData.php) )，他可以手动发送虚​​假的 post 请求并且可以窃取返回的用户信息吗？

你的担心是对的。**除非**您检查[**授权**](http://en.wikipedia.org/wiki/Authorization)请求的请求的某些部分，否则任何人都可以向该 URL 发送消息并获得结果。

例如，您可以进行[*身份​​验证*](http://en.wikipedia.org/wiki/Authentication)以检查请求是否来自用户，然后根据用户应该有权访问该信息的想法授权请求。

[*或者，您可以根据只有有效请求者才能通过共享机密*](http://en.wikipedia.org/wiki/Shared_secret)知道的内容进行授权，并依靠`https`该 URL 的一部分来防止共享机密公开。您将秘密提供给受信任的合作伙伴，当您通过 PHP（也通过 HTTPS 保护）生成 Web 表单时，您会包含一个包含共享秘密的隐藏输入。这就是[XSRF](http://en.wikipedia.org/wiki/Cross-site_request_forgery)保护通常的工作方式。

你应该考虑以下几点：

1.  谁应该能够合法地访问此页面？通过您的手机应用程序进行交互的登录用户、可以保护秘密的合作伙伴、Web API 用户？
2.  他们有什么凭据可以使用您服务器的其他部分？登录cookies？XSRF 代币？合作伙伴代币？
3.  您的应用程序的哪些部分仅通过安全通道发送，例如`https`？

如果 (2) 中的某些凭据子集满足所有 (1) 的要求，并且这些凭据仅通过 (3) 发送，那么您只需在页面中检查 (2)。否则，您需要重新设计您的应用程序架构，直到实现这一点。

OWASP 有一个[授权指南](https://www.owasp.org/index.php/Guide_to_Authorization)可能会派上用场，他们也有许多关于审查授权代码的页面，但大多数示例都不是 PHP 特定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:37:23.540

*当然，*他可以发送他想要的任何帖子请求。解决此问题的唯一可能方法是使用服务器知道的身份验证，即客户端必须向您发送一些难以猜测的内容，然后在服务器中启动会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-15T06:24:07.870

正如其他答案所暗示的，以下是使您的网络应用程序更安全的策略：-

*   最基本的规则，使用安全协议（https）
*   通过用户名和密码验证您的用户
*   您的应用程序的大多数功能/操作主要必须要求用户通过身份验证。
*   除了身份验证，维护您的应用程序的访问控制列表，它决定每个用户角色拥有的权限（假设您将用户划分为不同的角色）。在代表用户执行任何操作之前，请检查用户是否有权这样做。
*   不要只依赖客户端验证。也在服务器端执行验证。
*   将 csrf_tokens 与您的响应以及会话 cookie 一起发送。
*   切勿在 cookie 中发送任何机密信息。

希望能帮助到你。

# jquery - 点击图片的网址后背景图片发生变化

> ID：12680665
> 
> 赞同：2
> 
> 时间：2012-10-01T20:34:59.470
> 
> 标签：jquery

我正在尝试更改单击时的背景图像。我希望将图像更改为单击的图像的 url，而不是使用要更改的 bg 图像的设置值。

我创建了一个 jsfiddle，其中包含一个我想到的示例。它显示了我目前陷入的困境。它位于此处：http: [//jsfiddle.net/CompMike/j8JZ3/27/](http://jsfiddle.net/CompMike/j8JZ3/27/)

这是我尝试过的 jQuery，但它不起作用。我对此很陌生。 *switchfg*是一个内部带有透明图像的 div。它的背景图像设置为默认值。*switchbg*是同一页面上的图像列表。单击其中一个时，我需要将该图像设置为 div *switchfg*的背景。任何帮助将不胜感激。[http://jsfiddle.net/CompMike/j8JZ3/27/](http://jsfiddle.net/CompMike/j8JZ3/27/)

```
jQuery(document).ready(function() {

var switchfg = jQuery('.light-switch');
var switchbg = jQuery('.switchbg img');

switchbg.on("click", function() {
    var img = $(this).attr('src');
    switchfg.css('background-image', function() {
        'url(' + img + ');' 
    });
   });
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:45:07.720

您必须像这样直接设置背景（没有功能）：

```
switchfg.css('background-image', 'url(' + img + ')'); 
```

要查看背景，您还需要为 .light-switch div 指定宽度和高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:46:18.127

我为你的脚本做了更新：

[http://jsfiddle.net/j8JZ3/35/](http://jsfiddle.net/j8JZ3/35/)

首先，代码中有一些混乱 - $.css() 中的 function()。刚刚删除它。

但真正的问题是在您声明的 CSS 文件中

`background: url(....)`

在 JavaScript 中你想改变：

`background-image: .....`

因此，我将两者都更改为`background: url(....)`并且有效。

# c - 如何使用 SSE2 添加数组中的所有元素？

> ID：12680668
> 
> 赞同：4
> 
> 时间：2012-10-01T20:35:11.190
> 
> 标签：c, x86, sse, simd, sse2

假设我有一个非常简单的代码，例如：

```
double array[SIZE_OF_ARRAY];
double sum = 0.0;

for (int i = 0; i < SIZE_OF_ARRAY; ++i)
{
    sum += array[i];
} 
```

我基本上想用 SSE2 做同样的操作。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T22:24:25.833

这是一个非常简单的 SSE3 实现：

```
#include <emmintrin.h>

__m128d vsum = _mm_set1_pd(0.0);
for (int i = 0; i < n; i += 2)
{
    __m128d v = _mm_load_pd(&a[i]);
    vsum = _mm_add_pd(vsum, v);
}
vsum = _mm_hadd_pd(vsum, vsum);
double sum = _mm_cvtsd_f64(vsum0); 
```

* * *

您可以展开循环以获得更好的性能，方法是使用多个累加器隐藏 FP 添加的延迟（如 @Mysticial 所建议的那样）。使用多个“总和”向量展开 3 或 4 次，以达到负载和 FP-add 吞吐量（每个时钟周期一个或两个）的瓶颈，而不是 FP-add 延迟（每 3 或 4 个周期一个）：

```
__m128d vsum0 = _mm_setzero_pd();
__m128d vsum1 = _mm_setzero_pd();
for (int i = 0; i < n; i += 4)
{
    __m128d v0 = _mm_load_pd(&a[i]);
    __m128d v1 = _mm_load_pd(&a[i + 2]);
    vsum0 = _mm_add_pd(vsum0, v0);
    vsum1 = _mm_add_pd(vsum1, v1);
}
vsum0 = _mm_add_pd(vsum0, vsum1);    // vertical ops down to one accumulator
vsum0 = _mm_hadd_pd(vsum0, vsum0);   // horizontal add of the single register
double sum = _mm_cvtsd_f64(vsum0); 
```

请注意，`a`假定数组是 16 字节对齐的，并且`n`假定元素的数量是 2 的倍数（或 4，在展开循环的情况下）。

另请参阅[在 x86 上进行水平浮点向量求和的最快方法，](https://stackoverflow.com/questions/6996764/fastest-way-to-do-horizontal-float-vector-sum-on-x86)了解在循环外进行水平求和的替代方法。SSE3 支持并不完全普遍（尤其是 AMD CPU 比 Intel 支持它晚）。

此外，`_mm_hadd_pd`即使在支持它的 CPU 上，它通常也不是最快的方式，因此仅 SSE2 的版本在现代 CPU 上不会更糟。不过，它在循环之外并且没有太大的区别。

# google-apps-script - 谷歌电子表格保存“未定义”值

> ID：12680672
> 
> 赞同：0
> 
> 时间：2012-10-01T20:35:28.413
> 
> 标签：google-apps-script, google-docs

我的情况是这样，我正在尝试保存从 GUI Builder 上创建的表单中获取的数据或值，这是我第一次使用 [link to google script documentation][1] 上发布的示例脚本

它工作得很好，我可以在表单上输入值，但是当我决定使用 GUI Builder 时，因为我们需要更多的文本字段和东西，它停止工作，每次我点击按钮时，我的电子表格都会得到一个“未定义”值。

我检查了所有的 ID，它们都与脚本完全相同。

编码：

_guardar ：此函数将文本字段值插入电子表格。celda 在英文中意为细胞 ultimaFila 意为 lastRow

```
 function doGet(e) {      
   var doc = SpreadsheetApp.openById('0Au-gVDPWE5-bdDhJQzc2N2U4Q2l3LVY2cWpkbHdXMVE'); 
   var app = UiApp.createApplication();      
   app.add(app.loadComponent("MyForm"));
   return app;
 }  

function _guardar(e){
  var app = UiApp.getActiveApplication();
  var doc = SpreadsheetApp.openById('0Au-gVDPWE5-bdDhJQzc2N2U4Q2l3LVY2cWpkbHdXMVE');
  var ultimaFila = doc.getLastRow(); 
  var celda = doc.getRange('a1').offset(ultimaFila, 0); 
  celda.setValue(e.parameter.nombre);
  celda.offset(0, 1).setValue(e.parameter.empresa); 
  celda.offset(0, 2).setValue(e.parameter.nit); 
  celda.offset(0, 3).setValue(e.parameter.sector); 
  celda.offset(0, 4).setValue(e.parameter.telefono); 
  celda.offset(0, 5).setValue(e.parameter.email); 
  celda.offset(0, 6).setValue(e.parameter.web); 
  celda.offset(0, 7).setValue(e.parameter.descripcion);      

  app.close();

  return app; 

} 
```

这类似于 google 文档站点上的示例代码。！[在此处输入图像描述][2]

我还检查了“OnClick”事件是否设置在“_enviar”函数上。

所有文本框和标签都包含在 Absolute 面板中，包括按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:44:07.767

与参数相对应的不是 ID，而是名称。这些在 GUI 构建器的另一个选项卡中定义，用于通过 e.parameter.name 获取值

请参阅下面的屏幕截图：

![在此处输入图像描述](../Images/038d86965bbdcc94e8022873ae54abbc.png)

编辑：根据您的评论，您是否检查了 GUI 中的回调元素？它是父面板吗？

![在此处输入图像描述](../Images/fc0bf34df98442cc95c5f8a31ae53a07.png)

# symfony - Symfony2 - 重定向后身份验证丢失

> ID：12680675
> 
> 赞同：0
> 
> 时间：2012-10-01T20:35:40.827
> 
> 标签：symfony

我今天遇到了我的 SF2 应用程序的问题。我希望用户在提交有效的订阅表单后自动进行身份验证。

所以基本上在我的控制器中，这就是我所做的：

```
if ($form->isValid()) {
    $customer = $form->getData();

    try {
        $customer = $this->get('my.service.manager.customer')->customerSubscribe($customer);
    } catch (APIClientException $e) {
        $error = $e->getErrors();
        ...
    }

    if ($customer && !isset($error)) {
        // connect customer
        $token = new UsernamePasswordToken($customer, null, 'api_auth', array('ROLE_USER'));
        $this->get('security.context')->setToken($token);

        ...
    }

    return new RedirectResponse($this->generateUrl('MyBundle_index'));
} 
```

“连接客户”评论下方的两行实际上似乎可以很好地验证用户身份。问题是当我使用 RedirectResponse 重定向到另一个页面时，身份验证就会丢失。

我试过打电话给

```
$this->container->get('security.context')->isGranted('ROLE_USER') 
```

它在调用 RedirectResponse 之前返回 true，在我的另一个控制器中返回 false，其中响应被重定向。

在这一点上，我对自己做错了什么感到有些困惑。任何想法表示赞赏。顺便说一句，我正在使用 Symfony2.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:47:55.177

我注意到当您一次重定向不止一次时会发生这种情况。路由的控制器是否`MyBundle_index`返回另一个重定向？如果是这样，我想这就是你的答案。

否则，也许尝试使用前锋？代替：

```
return new RedirectResponse($this->generateUrl('MyBundle_index')); 
```

...只是转发到为该路由定义的任何控制器/操作：

```
return $this->forward("SomeBundle:Default:index"); 
```

用户最终在其地址栏中使用的 URL 可能不是您所期望的（它不会与他们最初请求的 URL 不同），但您可能可以对其进行调整以使其符合您的喜好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:34:13.647

好的，我这样解决了：

```
$token = new UsernamePasswordToken($customer->getEmail(), null, 'api_auth', array('ROLE_USER')); 
```

显然我需要将客户 ID（在这种情况下是电子邮件）作为 UsernamePasswordToken 的第一个参数，而不是整个客户对象。我不确定为什么，因为我的实体 Customer 实现了 _toString 方法，但至少它可以正常工作。

# r - 熔化多个变量跨度

> ID：12680680
> 
> 赞同：1
> 
> 时间：2012-10-01T20:35:54.417
> 
> 标签：r

（仍然）是 r 的新手，对于如何完成数据的多次融合非常困惑。这是一个子集：

```
df <- structure(list(Subject = c(101L, 101L, 101L, 102L, 102L, 102L
), Condition = structure(c(1L, 1L, 1L, 2L, 2L, 2L), .Label = c("apass", 
"vpas"), class = "factor"), FreqCode = structure(c(1L, 1L, 1L, 
2L, 2L, 2L), .Label = c("LessVerbal", "MoreVerbal"), class = "factor"), 
Item = c(1L, 4L, 7L, 1L, 4L, 7L), Len = c(80L, 68L, 85L, 
68L, 85L, 79L), R1_1.RT = c(237L, 203L, 207L, 336L, 487L, 
340L), R1_2.RT = c(177L, 225L, 162L, 634L, 590L, 347L), R1_3.RT = c(200L, 
226L, 212L, 707L, 653L, 379L), R1.RT = c(614L, 654L, 581L, 
1677L, 1730L, 1066L), R1_1 = structure(c(1L, 1L, 1L, 1L, 
1L, 1L), .Label = "The", class = "factor"), R1_2 = structure(c(3L, 
1L, 2L, 1L, 2L, 4L), .Label = c("antique", "course", "new", 
"road"), class = "factor"), R1_3 = structure(c(4L, 1L, 2L, 
1L, 2L, 3L), .Label = c("car", "materials", "surfaces", "technology"
), class = "factor"), R1 = structure(c(3L, 1L, 2L, 1L, 2L, 
4L), .Label = c("The antique car", "The course materials", 
"The new technology", "The road surfaces"), class = "factor")), .Names = c("Subject", 
"Condition", "FreqCode", "Item", "Len", "R1_1.RT", "R1_2.RT", 
"R1_3.RT", "R1.RT", "R1_1", "R1_2", "R1_3", "R1"), class = "data.frame", row.names =  
c(NA, 
-6L)) 
```

我的目标是获得（部分）如下所示的输出：

```
Region RT WordRegion Word
R1_1.RT 237 R1_1 the
...
R1_2.RT 177 R1_2 new
... 
```

编辑：以“.RT”结尾的变量（例如，R1_1.RT）是区域名称，将被融合到区域列中。以数字结尾的变量（例如，R1_1）与区域名称及其相关值完全对应。我希望它们与区域名称一起融合，以便我可以根据区域列分析它们

在代码的第一部分，我将所有值融合到一个 Region 列中，并将值更改为 RT。这似乎工作正常：

```
#long transform (with individual regions at end)
SmallMelt1 = melt(df, measure.vars = c("R1_1.RT", "R1_2.RT", "R1_3.RT", "R1.RT"), var = "Region")
#change newly created column name to "RT" (note:you have to change the number in [] to match your data)
colnames(SmallMelt1)[11 ] <- "RT" 
```

但我不知道如何同时融化另一个变量跨度，使它们与第一个跨度垂直排列。我想做这样的事情，在第一次融化之后，但它不起作用：

```
#Second Melt for region names (doesn't work)
SmallMelt2 = melt(SmallMelt1, measure.vars = c("R1_1", "R1_2", "R1_3", "R1"), var = "WordRegion")

#Change name to Word
colnames(SmallMelt2)[9] <- "Word" #add col number for "value" here 
```

如果您需要任何澄清，请告诉我。我希望有人可以提供帮助...在此先感谢-DT

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:04:44.847

所以，在咨询了名单外的人之后，我找到了解决方案。我的错误是我试图在第一步的输出上运行第二步。通过在原始数据上独立运行这两个步骤然后连接，我得到了正确的结果。

```
SmallMelt1 = melt(df, measure.vars = c("R1_1.RT", "R1_2.RT", "R1_3.RT", "R1.RT"), var =   "Region")
SmallMelt2 = melt(df, measure.vars = c("R1_1", "R1_2", "R1_3", "R1"), var = "WordRegion")
SmallMelt3=cbind(SmallMelt1,SmallMelt2[,11]) 
```

# asp.net-mvc - Web 上的 .NET 异步——它必须带有异步控制器吗？

> ID：12680682
> 
> 赞同：1
> 
> 时间：2012-10-01T20:35:56.977
> 
> 标签：asp.net-mvc, asynchronous, task-parallel-library

如果我想在我的数据层使用 TPL 异步，我是否也必须`Task<T>`在我的 MVC 控制器上使用？

换句话说，要使 async 与 .NET MVC 一起工作，是否必须从请求开始时就实现它才能在更深的执行层上工作？`Task<T>`或者即使我使用的是同步控制器，在我的 DAL/Web 请求级别上仍然有好处吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:39:08.007

如果您不使用异步控制器，您将不得不在某个时候等待任务。在这一点上，主要优势消失了：减少阻塞线程的数量。

当然，如果您同时运行多个异步活动，则情况并非如此。这会将阻塞线程的数量从 N 减少到 1。（如果 N = 1 没有好处，只有损坏）。

请注意，默认情况下异步并不快。它在 ASP.NET 中的主要目的是在极端情况下获得可伸缩性 - 处理 100 多个并发请求。只有这样，它才会更快或规模更大。

因此，如果您有“通常”数量的并发请求（例如 < 100），则只需同步即可，不要担心所有这些。

# python - 使用 django 模板向后循环

> ID：12680691
> 
> 赞同：53
> 
> 时间：2012-10-01T20:36:41.003
> 
> 标签：python, django, django-templates

我有一个对象列表，我试图将它们全部显示出来（所以我正在使用 django `{% for %} {% endfor %}`）但是，我需要一次遍历每个对象，而不是向前遍历。我查看了[https://docs.djangoproject.com/en/dev/ref/templates/builtins/#for](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#for)但我真的不知道如何使用它来向后循环。我想知道如何做到这一点，如果它甚至可能。下面是我目前如何实现它的一个简单示例（向前迭代）：

```
...
{% for i in scheduling_info %}
    <pre>{{ i.log }}</pre>
{% endfor %}
... 
```

谢谢！

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-10-01T20:39:01.390

直接从您链接的页面：

您可以使用`{% for obj in list reversed %}`.

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-04-11T12:50:47.473

如果有人最终在这里寻找 jinja2 解决方案，比如我：

```
{% for obj in list | reverse %} 
```

# arrays - 带有 JSON 的 Mule 集合拆分器

> ID：12680692
> 
> 赞同：4
> 
> 时间：2012-10-01T20:36:44.060
> 
> 标签：arrays, json, mule, splitter

我有一个类似于下面粘贴的 JSON。我正在尝试提取每个单独的记录并将其推送到队列中。我将如何提取 Mule 中的每条记录？我一直在尝试使用集合拆分器和 foreach 循环，但我不知道如何让它工作。

```
{
  "locations": {
    "record": [
      {
        "id": 8817,
        "loc": "NEW YORK CITY"
      },
      {
        "id": 2873,
        "loc": "UNITED STATES"
      },
      {
        "id": 1501,
        "loc": "NEW YORK STATE"
      }
    ]
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T20:59:34.530

去做这个：

1.  将 JSON 实体转换为 Java 结构的层次结构
2.  提取`record`列表
3.  拆分列表

现在在 Mule XML 配置中：

```
<json:json-to-object-transformer returnClass="java.util.Map" />
<expression-transformer expression="#[payload.locations.record]" />
<collection-splitter />
<!-- TODO: dispatch to queue --> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-24T08:29:00.413

试试这个，而不是 Map put List。这对我来说很好。

```
<json:json-to-object-transformer returnClass="java.util.List" />
<expression-transformer expression="#[message.payload.locations.record]" />
<collection-splitter /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-02T14:00:18.720

我正在添加另一种解决方案，其中 returnClass="java.util.Map" 有效，请查看代码，您可以在从 Fiddler 或 POST 客户端发送数据时使用 http 方法将相同的 JSON 放入正文中作为 POST。

在此流程中，我直接在拆分器中分配表达式，而不是使用表达式转换器。我正在使用 Any Point Studio 使其工作。

```
 <flow name="mule-splitterFlow2" doc:name="mule-splitterFlow2">
        <http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="8081" doc:name="HTTP" path="splitterjson"/>
        <json:json-to-object-transformer returnClass="java.util.Map" doc:name="JSON to Object"/>
        <splitter expression="#[message.payload.locations.record]" doc:name="Splitter">
        </splitter>
        <logger level="INFO" doc:name="Logger" message="#[message.payload]"/>
    </flow>
```

# intellij-idea - JProfiler 要求 IntelliJ Configuration Director (.IntelliJ ...)

> ID：12680693
> 
> 赞同：3
> 
> 时间：2012-10-01T20:36:46.260
> 
> 标签：intellij-idea, jprofiler

我尝试在 MacOS 上安装与 IntelliJ 10 集成的 JProfiler。安装程序尝试找到我没有且我不知道如何创建的“IntelliJ 配置文件夹”。

任何帮助或提示都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T20:40:51.217

请参阅相应的[IntelliJ IDEA 常见问题解答文章](http://devnet.jetbrains.net/docs/DOC-181)。

> ~/库/首选项/IntelliJIdea10

**视窗：**

> C:\Users\user.IntelliJIdea2017.2

# c++ - 查看状态和应用程序设计

> ID：12680694
> 
> 赞同：0
> 
> 时间：2012-10-01T20:36:48.563
> 
> 标签：c++, model-view-controller, c++11

我有一个工具栏控制器，它能够通过查询文档属性或应用程序框架来更新工具栏状态（启用/禁用、按下/未按下）。我有一些代表视图当前状态的按钮。

从应用程序设计的角度来看，我喜欢工具栏控制器能够在给定文档的任何时间更新按钮状态。我也更喜欢工具栏控制器和按钮处理程序没有内部状态。

我看到的选项 - 寻找其他建议：

*   创建一种机制来访问文档的所有视图，访问者可以捕获视图的状态，然后用于启用/禁用/按下/按下按钮。
*   在视图和工具栏处理程序之间创建一些连接，允许工具栏按钮直接询问视图。
*   其他？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:45:04.553

您可以尝试为视图设置一个事件循环并使用函数调用调度更新状态

像这样：

```
class ViewEventArgs{
   public:
    int eventNumber;
};
class ViewEvent{
    public:
   virtual void onViewChange(ViewEventChangeArgs args) = 0;
};

class ViewController{
    public:
   virtual void doPressed() = 0;
   virtual void doChecked() = 0;
   //other interface methods
};

class ToolbarView : public ViewEvent{
   public:
   //Your EVENT-LOOP kernel will fire these events depending upon the state change in the view
   void onViewChange(ViewEventChangeArgs args)
   {
       switch(args.eventNumber){
    case PRESSED:
       getToolbarController()->doPressed();//the method dispatch
       break;
    case CHECKED:
       getToolbarController()->doChecked();
       }      
   }
    //other parts of the view
};

class ToolbarController: public ViewController{
    public:
       void doPressed() { /*pressed*/ }
       void doChecked() { /*checked*/ }
           //implementations
}; 
```

# playorm - createEntityManager - 每个请求还是每个应用程序？

> ID：12680695
> 
> 赞同：0
> 
> 时间：2012-10-01T20:37:14.003
> 
> 标签：playorm

单独使用 Astyanax 我知道我们可以轻松设置连接池。但是，我不确定当您执行 NoSqlEntityManager other = factory.createEntityManager(); 时会发生什么 或 NoSqlSession 会话 = mgr.getSession();

*   每次需要连接时都应该创建一个 entityManager 吗？
*   或者我应该只有 1 个 EM 并为每个查询创建一个会话？

更多的话，所以不让我保存:(。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:10:36.010

为 Web 应用程序中的每个 Web 请求或非 Web 应用程序中的每个工作单元创建 EntityManager。它与 Hibernate 的 EntityManager 完全一样，也维护了一级缓存。

在一个网络请求期间，您通常会进行 1-4 次查询。

就像休眠 NoSqlEntityManager 维护一级缓存（根据我的经验，在读取对象时会获得相当多的缓存命中）。

# cocoa - 更改 NSTextField 连续多次单击的行为

> ID：12680701
> 
> 赞同：0
> 
> 时间：2012-10-01T20:37:46.407
> 
> 标签：cocoa, nstextfield, double-click, nsevent, click-counting

我有一个`NSTextField`由自定义视图嵌套的，我想更改连续多次单击的默认行为（双击、三次单击等），类似于文本节点 MindNode 的行为（见下图）。

我希望第一次单击以“激活”文本字段，然后从头开始（例如重置事件的单击计数）。

我有以下想法，但我不知道如何实现它们以及它们是否真的有意义：

*   以某种方式更改使用时间`+[NSEvent doubleClickInterval]`并减慢第二次点击。
*   以编程方式减少点击次数？
*   使用 使 NSTextField 不可选择`-hitTest:`，将点击转发到超级视图，更改文本字段的某些参数并接受下一次点击。在这种情况下，第二次点击的点击次数仍然是 2。
*   覆盖`-mouseDown:`而不是调用超级。这破坏了 NSTextField 的选择功能。

我希望有一种更简单的方法来实现这一点，但我忽略了这一点。

感谢您的回答！

这是问题的图形表示： ![更改 NSTextField 的多次单击行为](../Images/4eaf7d98f88c97cc49d32eceecb79fc9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:24:48.467

我会通过在 NSBox 中嵌入文本字段和自定义视图来做到这一点，它将设置为自定义类型，最初没有背景颜色或边框（因此它是不可见的）。最初，自定义视图将位于顶部，并且它会有一个 mouseDown: 方法来接收第一次点击。在该方法中，您可以重新排列框的子视图，以便文本字段位于顶部并接收下一次点击。如果您愿意，该框可能比文本字段大一些，因此您可以为其设置背景颜色或其他看起来像围绕文本字段的自定义激活环的绘图。在文本字段的 controlTextDidEndEditing: 方法中，您可以将系统重置回初始状态，以便下次单击它时准备好。

编辑后：这是我在覆盖类中使用的代码：

```
@implementation Overlay

static NSComparisonResult rdComparator( NSView *view1, NSView *view2, void *context ) {
    if ([view1 isKindOfClass:[NSTextField class]])
        return NSOrderedDescending;
    else if ([view2 isKindOfClass:[NSTextField class]])
        return NSOrderedAscending;
    return NSOrderedSame;
}

-(void)mouseDown:(NSEvent *)theEvent {
    self.box.fillColor = [NSColor redColor];
    NSView *contentView = self.box.subviews.lastObject;
    [contentView sortSubviewsUsingFunction:rdComparator context:nil];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T13:16:51.927

我已经通过以`NSTextField`编程方式对鼠标按下事件的点击计数进行子类化和递减来解决它。使用子类的布尔属性，我可以打开和关闭这种特殊行为。

```
- (void)mouseDown:(NSEvent *)theEvent
{
    if (self.specialBehavior) {
        theEvent = [NSEvent mouseEventWithType:theEvent.type
                                      location:theEvent.locationInWindow
                                 modifierFlags:theEvent.modifierFlags
                                     timestamp:theEvent.timestamp
                                  windowNumber:theEvent.windowNumber
                                       context:theEvent.context
                                   eventNumber:theEvent.eventNumber
                                    clickCount:theEvent.clickCount - 1
                                      pressure:theEvent.pressure];
    }

    [super mouseDown:theEvent];
} 
```

`NSEvent`为了简化这个长方法调用，我编写了一个减少事件点击次数的类别方法。

# java - 在另一个类的 JTextArea 中写一行

> ID：12680707
> 
> 赞同：2
> 
> 时间：2012-10-01T20:38:23.420
> 
> 标签：java, swing, jtextarea

我正在尝试在我的类“Visual”中使用方法将一行代码写入 JTextArea，当我从“Visual”调用它时它会打印，但是当我从“Login”调用它时它只会将文本打印到控制台，而不是TextArea。

```
private static Visual Visual;
Visual.WriteLine("I'm sorry, your username or password is incorrect. Please try again."); 
```

或者

```
private static Visual Visual = new Visual();
Visual.WriteLine("I'm sorry, your username or password is incorrect. Please try again."); 
```

不要从“登录”表格中工作

但，

```
WriteLine("Test"); 
```

从方法所在的类“Visual”开始工作。

这是“视觉”中的方法

```
public void WriteLine(String Text) {
    System.out.println(Text);
    SystemFeed.append(Text.toString() + "\n");
    SystemFeed.setCaretPosition(SystemFeed.getDocument().getLength());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T21:34:15.217

我只能根据目前提供的信息进行猜测（意思是请向我们提供有关您的问题的更多相关信息！）但我担心您可能遇到参考问题，您尝试写入的 GUI 参考不是与显示的相同。建议：

*   摆脱所有不必要的静态变量，包括 Visual 变量。使它们成为实例变量。
*   如果这样做会出错，解决方案不是将 Visual 设为静态，而是获取对此类适当实例的引用。
*   检查您的程序在其中调用了多少次`new Visual(...)`。它应该只进行一次此调用。考虑将 a`System.out.println("New Visual created")`放入 Visual 构造函数中以查看是否如此。
*   将对可视化 GUI 的有效引用传递给需要调用此对象上的方法的任何对象。因此，如果您的 Login 对象需要调用 Visual 对象的`public void setVisual(Visual visual)`方法，请给 Login 一个允许其接受正确 Visual 引用的方法，确保在设置 Login 类期间调用该方法一次，然后确保在 Login 中，您使用此引用进行 Visual 方法调用。

再次，如果这没有帮助，那么告诉我们更多，最好是[sscce](http://sscce.org)。

# php - strftime 日期格式中的德语变音符号 - 正确的 utf-8 编码？

> ID：12680716
> 
> 赞同：15
> 
> 时间：2012-10-01T20:38:43.857
> 
> 标签：php, encoding, utf-8, diacritics

我正在使用 PHP `14\. März 2012`（即 2012 年 3 月 14 日）创建这样的德语日期格式。

我正在使用`$date[0]`它包含一个 unix 时间戳，并且我将它这样转换为可读的德语日期。

```
$date_day_month = strftime('%d. %B', $date[0]);
$date_year = strftime('%Y', $date[0]);

echo $date_day_month . $date_year; 
```

`ä`但是我以某种方式得到了像这样的变音符号的问号

`14\. M�rz 2012`

为什么会这样，我该如何解决？提前致谢。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-08-14T10:45:17.453

在我的情况下，一个简单的语言环境改变就可以了。

代替：

```
setlocale(LC_TIME, "de_DE"); 
```

采用：

```
setlocale(LC_TIME, "de_DE.UTF-8"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-23T15:31:59.593

在 Windows 环境（XAMPP）中，`setlocale(LC_TIME, "de_DE.UTF-8")`并没有为我解决问题，所以我求助于使用语言环境`"de"`，然后 - 正如@Chris 在他对[另一个答案](https://stackoverflow.com/a/18229644/1460043)的评论中建议的那样- 将字符串手动转换为 utf8：

```
setlocale(LC_TIME, "de");
$maerzLatin1 = strftime('%B', mktime(9, 0, 0, 3, 1, 2016));
$maerzUtf8 = utf8_encode($maerzLatin1);  // this one contains "März" UTF8-encoded 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T20:42:28.280

您可以尝试将您的网页设为 utf-8，将其放入您的`head`标签中：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

`strftime`取决于语言环境的正确设置，因此请检查`setlocale()`并确保该语言环境存在于运行 php 的机器上。

**更新**

我在我的服务器上运行了这段代码：

```
setlocale(LC_ALL, 'de_DE');
$date[0] = mktime( 1, 0, 0, 3, 2, 2012 );

$date_day_month = strftime('%d. %B', $date[0]);
$date_year = strftime('%Y', $date[0]);

echo $date_day_month . $date_year; 
```

那输出：

`02\. März2012`

# ios - 无法使用应用商店分发配置文件安装 iPhone 应用

> ID：12680724
> 
> 赞同：1
> 
> 时间：2012-10-01T20:39:51.397
> 
> 标签：ios, xcode4

开发了我的第一个 iPhone 应用程序供内部使用，它应该在内部分发。**当我使用开发人员配置文件**对构建进行代码签名时，我能够成功地将其安装到设备上。**但是当使用App store 分发配置文件**对构建进行代码签名时，无法使用 iTunes 安装相同的应用程序（.ipa）。我收到以下错误。

```
 Oct  1 15:52:32 unknown installd[462] <Error>: profile not valid: 0xe8008012
    Oct  1 15:52:32 unknown installd[462] <Error>: 001d7000 install_embedded_profile: Could not install embedded profile: -402620398
    Oct  1 15:52:32 unknown installd[462] <Error>: 001d7000 verify_signer_identity: Could not copy validate signature: -402620395
    Oct  1 15:52:32 unknown installd[462] <Error>: 001d7000 preflight_application_install: Could not verify executable at /var/tmp/install_staging.1JP9zU/foo_extracted/Payload/mi-ios.app
    Oct  1 15:52:32 unknown installd[462] <Error>: 001d7000 install_application: Could not preflight application install
    Oct  1 15:52:32 unknown installd[462] <Error>: 001d7000 handle_install: API failed
    Oct  1 15:52:32 unknown installd[462] <Error>: 001d7000 send_message: failed to send mach message of 71 bytes: 10000003
    Oct  1 15:52:32 unknown installd[462] <Error>: 001d7000 send_error: Could not send error response to client 
```

我确保分发配置文件有效（在我的 Mac 上安装了私钥和证书）。

我不确定我在这里缺少什么。我遵循了 iOS 开发中心给出的每一步。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:48:04.040

顾名思义，App Store 配置文件*仅*在通过 App Store 分发时使用。它的存在是为了签署您的应用程序以通过 App Store 分发，并且不能用于任何其他目的。*除非您通过 App Store*安装已由其签名的应用程序，否则它将完全正确地失败。

如果您想在相对较短的时间内将应用程序分发给少数设备供内部使用，您应该使用临时配置文件；如果要长时间使用大量用户，则需要注册为企业开发人员并遵循不同的流程。

# python - Python 3.2.3 登录安全网站

> ID：12680725
> 
> 赞同：2
> 
> 时间：2012-10-01T20:39:56.977
> 
> 标签：python, html, login

使用 python 3.2.3 我正在尝试登录一些网站并将源代码从隐藏页面保存到文件中。我被困在如何登录上。我已经知道如何登录到一个特定的网站，但似乎无法让它在其他网站上运行。我尝试登录的网页的来源是：

```
<form id="login_form" name="login_form" action="https://www.o2online.ie/amserver/UI/Login?org=o2ext&goto=%2F%2Fwww.o2online.ie%2Fo2%2Fmy-o2%2F" method="post">
                                    <p id="form_header">My Account login</p>
                                    <input value="Go" type="hidden" name="IDButton" id="IDButton"/>
                                    <input value="o2ext" type="hidden" name="org" id="org"/>
                                    <input value="TRUE" type="hidden" name="CONNECTFORMGET"/>
                                    <label for="IDToken1">Username</label><br />
                                    <input tabindex=1 type="text" id="IDToken1" name="IDToken1" value="Username/mobile" onclick="javascript: this.value='';" maxlength="60"  onfocus="this.value='';" tabindex=1 /><br />
                                    <br />
                                    <label for="IDToken2">Password</label><br />
                                    <input tabindex=2 type="password" id="IDToken2" name="IDToken2" value="" maxlength="30"  onfocus="this.value='';" tabindex=2 />
                                    <input tabindex=3 type="image" src="../images/my-o2/Login-button.png" id="submit_button" />
                                </form> 
```

在我成功登录的其他页面上，有一个具有特定值的提交按钮，但是这个网页有一个没有价值的提交按钮的图像。

我一直在使用的代码是：

```
import urllib.request
import urllib.parse
import http.client
import sys

url = 'http://www.o2online.ie/o2/login/'
login_data = {
             'IDToken1': 'xxxx',
             'IDToken2': 'xxxx',
             #'submitbutton': 'submit'                           
             }

# creating an opener object that will handle the cookies
opener = urllib.request.build_opener(urllib.request.HTTPCookieProcessor)

r = opener.open(url, urllib.parse.urlencode(login_data).encode())

# logged in

#Opening and saving source to a file
f = opener.open('http://www.o2online.ie/o2/my-o2/')
sys.stdout = open('file.html', 'w')
print (f.read(999999)) 
```

我已经注释掉了提交按钮。

可以修改此代码以登录该网站吗？

您将如何在 python 中提交此表单？

# oracle - Oracle 关系数据库，查询/连接多个表

> ID：12680726
> 
> 赞同：0
> 
> 时间：2012-10-01T20:39:57.630
> 
> 标签：oracle, plsql, relational-database

我知道这里的大多数人倾向于不喜欢在这里提出家庭作业问题的人，但我真的在我的数据库系统课上被一个问题难住了。

1.  列出所有城市（城市名称和邮政编码，其中至少有一处物业由在'1119 Leighton Ave' 的分公司工作的员工管理。按城市名称的升序排列您的结果。否则，零分。

数据库架构是：

```
Branch (bNo, street, zipcode)
Staff (sNo, fName, lName, position, sex, dob, salary, bNo)
Property (pNo, street, zipcode, type, room, rent, oNo, sNo, bNo)
Owner (oNo, fName, fName, street, zipcode, phone)
Client (cNo, fName, lName, phone, prefType, maxRent)
Viewing (pNo, cNo, viewDate, cmmt)
Zip (city, state, zipcode) 
```

这是我试图放在一起的查询，非常不成功......

```
SELECT z.city, p.zipcode
FROM Zip z, Property p
WHERE p.bNo = (SELECT bNo
                   FROM Branch
                   WHERE street = '1119 Leighton Ave'); 
```

我在连接方面遇到了一些困难。上面的这个陈述甚至没有接近正常工作。我正在翻阅我的书和互联网，试图找到某种帮助。任何帮助将不胜感激。提前致谢。

### 更新

我目前正在尝试：

```
SELECT DISTINCT Zip.city, Zip.zipcode AS Zip
FROM Zip
    JOIN Property ON Zip.zipcode = Property.zipcode
    JOIN Branch ON Zip.zipcode = Branch.zipcode
WHERE Property.bNo = (SELECT bNo
                      FROM Branch
                      WHERE Street = '1119 Leighton Ave')
ORDER BY Zip.city; 
```

输出看起来好多了，但我认为它不正确。我现在正在检查它。

更新#2

好的，所以通过运行这个查询：

```
SELECT DISTINCT zipcode
FROM Property
WHERE bNo = 'B001'; 
```

就像 FYI B001 是位于 1119 Leighton Ave 的分行的分行编号一样。无论如何，该命令给了我以下邮政编码：

```
36205
36251
36264
36206
36277
36272
36265
36203
36201 
```

当我运行上述命令时：

```
SELECT DISTINCT Zip.city, Zip.zipcode AS Zip
FROM Zip
    JOIN Property ON Zip.zipcode = Property.zipcode
    JOIN Branch ON Zip.zipcode = Branch.zipcode
WHERE Property.bNo = (SELECT bNo
                      FROM Branch
                      WHERE Street = '1119 Leighton Ave')
ORDER BY Zip.city; 
```

这是我的输出：

```
City                  Zip
--------------------- -----
ANNISTON              36206
JACKSONVILLE          36265 
```

所以，我相信这个查询有点不对劲。但是你们给了我一个很好的开始，我会继续玩它，我相信我可能会弄明白。非常感谢你们。

我想我已经弄明白了，感谢大家的帮助。

```
SELECT DISTINCT Zip.city, Zip.zipcode AS Zip
FROM Zip
    JOIN Property ON Zip.zipcode = Property.zipcode
    JOIN Branch ON Zip.zipcode = Property.zipcode
    JOIN Staff ON Staff.bNo = Branch.bNo
WHERE Property.bNo = (SELECT bNo FROM Branch WHERE Street = '1119 Leighton Ave')
ORDER BY Zip.city 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:58:31.220

在 Oracle 中有多种编写 JOIN 查询的方法。更标准的 SQL 方法是执行以下操作：

```
SELECT t1.colNameA, t1.colNameB, t2.colNameC
FROM t1
  JOIN t1.pid = t2.fkid
WHERE
 t1.colNameA='whatever' 
```

考虑到这一点，您可以尝试以下步骤：

1.  列出您需要的所有列：

    选择 Zip.city, Zip.zipcode

2.  列出您需要的所有表，包括它们之间的关系：

    ```
    FROM Zip
      JOIN Property ON Zip.zipcode=Property.zipcode
      JOIN Branch ON Zip.zipCode=Branch.zipcode
      JOIN etc 
    ```

3.  添加 WHERE 条件。

    ```
    WHERE Branch.street='1119 LeightonAve'
      AND etc 
    ```

4.  添加 ORDER BY 子句

    ```
    ORDER BY Zip.city 
    ```

这不是完整的答案，但希望能帮助您找到正确的方向。

**编辑＃2** 编辑后，我建议您需要研究关键字“ [DISTINCT](http://www.techonthenet.com/sql/distinct.php) ”。像这样的东西可能更符合您的要求：

```
SELECT DISTINCT Zip.city, Zip.zipcode 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:54:07.840

尝试这个

```
SELECT z.city, p.zipcode
FROM Zip z
     JOIN Property p ON z.zipcode = p.zipcode  -- city name and zip code where there is at least one property for rent 
     JOIN Staff s ON p.sNo = p.sNo -- managed by staff 
     JOIN Branch b ON s.bNo = b.bNo AND b.street = '1119 Leighton Ave' -- who works in the branch office at ‘1119 Leighton Ave’
ORDER BY z.city 
```

`JOIN`(INNER JOIN) 确保参与的两个表在至少一行中具有相同的值，否则不返回任何记录。

# hibernate - 我可以将 JPA CriteriaQueries 与 Hibernate EntityMode.MAP 一起使用吗？

> ID：12680727
> 
> 赞同：1
> 
> 时间：2012-10-01T20:40:03.510
> 
> 标签：hibernate, jpa, criteria-api

我一直在努力使用 Hibernate 来映射我的元模型，该元模型在编译时（请参阅[此处](https://stackoverflow.com/questions/12061289/hibernate-orm-to-map-to-non-classes)）使用`EntityMode.MAP`. 我想使用程序`Criteria`化查询，但从 Hibernate 4 开始，他们说不`Criteria`推荐使用 Hibernate 查询 API 以支持 JPA。美好的。

但是我可以将 JPA`CriteriaQuery`用于非类吗？我看不到使用“纯”JPA 按名称而不是按类指定实体的方法。是否有一些 Hibernate（非标准 JPA）技巧可以增强 JPA 的支持`EntityMode.MAP`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T03:47:38.230

此问题已在[HHH-7714](https://hibernate.atlassian.net/browse/HHH-7714)中解决。您必须使用大于 4.2.1 (Stable) / 4.3.0.Beta1(Unstable) 的休眠版本

***Koehn***所有可能的功劳。感谢您对 Hibernate 项目的贡献！

# java - 如何创建一个加减除数和乘以 2 个分数的程序？

> ID：12680728
> 
> 赞同：2
> 
> 时间：2012-10-01T20:40:14.680
> 
> 标签：java, add, calculator, fractions

首先我想开始说我是编程新手，我知道的不多。话虽如此，如果有人可以帮助我完成我的程序，它应该读取 2 个分数和一个运算符，例如“2/3 + 4/5”，我将不胜感激。我已经完成了一些代码，但是当我运行它时它仍然给我一个错误，这是我到目前为止所拥有的：

```
public class Fraction {

    private static int numer;
    private static int denom;

     public Fraction(int num, int den)
        {
            numer = num;
            denom = den;
            simplify();
        }

    int findGcd(int a, int b)
        { 
        int temp;
            while(b != 0)
            {
                    temp = b;
                    b = a % b;
                    a = temp;
            }
        return a;
    }

    void simplify()
        {
            int gcd = findGcd(numer, denom);
            numer /= gcd;
            denom /= gcd;
        }

    public int getNumer(){
        return numer;
    }

    public int getDenom(){
        return denom;
    }

    Fraction add(Fraction x) {
        Fraction result;

        if (x.getDenom()== getDenom()) {
            result = new Fraction(x.getNumer() + getNumer(), denom);
        } else {
            denom = this.getDenom() * x.getDenom();
            numer = this.getNumer() * x.getDenom() + x.getNumer() * this.getDenom();
            return new Fraction(numer,denom);

        }
        return result;
    }

    public String toString(){
          return (Integer.toString(numer) + "/" +
                     Integer.toString(denom));
    }

    public static void main (String []args){
            Fraction a = new Fraction(1,3);
            Fraction b = new Fraction(4,5);
            System.out.println(a.toString());
            System.out.println(b.toString());
    }
} 
```

谢谢你的帮助，我真的很感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T20:47:41.620

你为什么要做你的领域[`static`](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)？`static`字段属于类而不是每个实例化（不是你想要的）。尝试删除`static`关键字。

另一方面，您提到您想读取用户的输入。您可能想考虑使用 a [`Scanner`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)（以防您还不知道这个方便的类）。

读取输入后`2/3 + 4/5`，您可以使用空格作为分隔符来拆分字符串。`2/3`现在，您可以从新形成的字符串数组的第一个 ( ) 和第三个 ( ) 元素中解析一个分数`4/5`，并执行与数组 ( ) 的第二个元素对应的操作`+`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:48:47.640

`static`变量和变量之间是有区别的`instance`。

*   静态变量是所有实例通用的类变量。因此，如果您为一个实例更改这些变量，它将为所有实例更改。
*   另一方面，实例变量特定于每个实例。它们绑定到类的实例。

话虽这么说..您需要稍微修改一下代码..

`static`将类中的变量更改为`instance`变量..

```
private static int numer;
private static int denom; 
```

上面的两个变量应该是实例变量。所以它们对于你为你的类创建的每个实例都是唯一的。

因此，将它们更改为： -

```
private int numer;
private int denom; 
```

而对于阅读用户输入，`A.R.S`已经给你链接到一个`valuable`类..

# jquery - jQuery禁用身体滚动，但不是子元素？

> ID：12680729
> 
> 赞同：4
> 
> 时间：2012-10-01T20:40:20.250
> 
> 标签：jquery, scroll, parent-child

当我有一个弹出 div（例如照片库查看器等）时，我想禁用正文滚动，但是我不希望为子元素禁用滚动。

我现在正在使用它，它禁用了所有的卷轴：

```
$('body').bind('mousewheel DOMMouseScroll', function(e) {
    var scrollTo = null;

    if (e.type == 'mousewheel') {
        scrollTo = (e.originalEvent.wheelDelta * -1);
    }
    else if (e.type == 'DOMMouseScroll') {
        scrollTo = 40 * e.originalEvent.detail;
    }

    if (scrollTo) {
        e.preventDefault();
        $(this).scrollTop(scrollTo + $(this).scrollTop());
    }
}); 
```

因此，如果我有一个名为“popup”的元素类，我怎么能接受呢？或者更好的是，我怎样才能阻止事件影响除正文标签之外的任何内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:11:39.543

你可以看看这个页面

[如何使用 jQuery 以编程方式禁用页面滚动](https://stackoverflow.com/questions/3656592/programmatically-disable-scrolling)

我相信这个人想要同样的行为，我感觉 Y 滚动条可能会消失，但也许你可以为它找出一些东西，或者总是显示它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T16:14:51.543

尝试将此添加到您的子元素

```
onmouseover="document.body.style.overflow='hidden';" 
onmouseout="document.body.style.overflow='auto';" 
```

它将使主体滚动条消失，直到子元素上的鼠标悬停，但否则会产生预期的效果。

# java - 使用 Spring 验证器验证嵌套对象列表？

> ID：12680730
> 
> 赞同：21
> 
> 时间：2012-10-01T20:40:23.030
> 
> 标签：java, list, spring-mvc, nested, validation

我想知道如何在 Spring MVC 应用程序中使用 Spring Validator（不是注释）验证表单中的嵌套对象列表。

```
class MyForm() {
    String myName;
    List<TypeA> listObjects;
}
class TypeA() {
    String number;
    String value;
} 
```

如何创建 MyFormValidator 来验证 listObjects 并为 TypeA 的数量和值添加错误消息。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-08-14T21:15:26.443

对于嵌套验证，您可以执行以下操作：

```
public class MyFormValidator implements Validator {

    private TypeAValidator typeAValidator;

    @Override
    public boolean supports(Class clazz) {
        return MyForm.class.equals(clazz);
    }

    @Override
    public void validate(Object target, Errors errors) {
        MyForm myForm = (MyForm) target;
        typeAValidator = new TypeAValidator();

        int idx = 0;
        for (TypeA item : myForm.getListObjects()) {

            errors.pushNestedPath("listObjects[" + idx + "]");
            ValidationUtils.invokeValidator(this.typeAValidator, item, errors);
            errors.popNestedPath();
            idx++;

            ...
        }

        ...
    }
}

public class TypeAValidator implements Validator{

    @Override
    public boolean supports(Class<?> clazz) {
        return TypeA.class.isAssignableFrom(clazz);
    }

    @Override
    public void validate(Object target, Errors errors) {
        TypeA objTypeA = (TypeA)target;

        ValidationUtils.rejectIfEmpty(errors, "number", "number.notEmpty");
    }
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-01T20:59:14.890

```
public class MyFormValidator implements Validator {

    @Override
    public boolean supports(Class clazz) {
        return MyForm.class.equals(clazz);
    }

    @Override
    public void validate(Object target, Errors errors) {
        MyForm myForm = (MyForm) target;

        for (int i = 0; i < myForm.getListObjects().size(); i++) {
            TypeA typeA = myForm.getListObjects().get(i);

            if(typeAHasAnErrorOnNumber) {
                errors.rejectValue("listObjects[" + i + "].number", "your_error_code");
            }

            ...
        }

        ...
    }

} 
```

有趣的链接：

*   [Spring MVC：使用 Bean 列表提交多行表单](http://viralpatel.net/blogs/spring-mvc-multi-row-submit-java-list/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-28T06:51:36.170

我使用的一个方便的助手类 -

```
public final class ValidationHelper {

    public static <TEntity> void invokeNestedValidator(Validator validator, TEntity entity, Errors errors, String subPath) {
        try {
            errors.pushNestedPath(subPath);
            ValidationUtils.invokeValidator(validator, entity, errors);
        } finally {
            errors.popNestedPath();
        }
    }

    public static <TEntity> void invokeNestedValidatorForList(Validator validator, List<TEntity> entities, Errors errors, String subPathRoot) {
        for (int index = 0; index < entities.size(); index++) {
            invokeNestedValidator(validator, entities.get(index), errors, subPathRoot + "[" + index + "]");
        }
    }

    private ValidationHelper() {}
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-30T10:19:19.210

您可以在项目的任何地方使用它

```
import org.springframework.validation.ValidationUtils;
import org.apache.commons.beanutils.PropertyUtils;
import org.apache.commons.collections.CollectionUtils;

    public static void invokeValidatorForNestedCollection(Validator validator,
                                                      Object obj,
                                                      String collectionPath,
                                                      Errors errors) {

    Collection collection;
    try {
        collection = (Collection) PropertyUtils.getProperty(obj, collectionPath);
    } catch (IllegalAccessException | InvocationTargetException | NoSuchMethodException e) {
        throw new RuntimeException(e);
    }

    if (CollectionUtils.isEmpty(collection)) return;
    int counter = 0;
    for (Object elem : collection) {
        errors.pushNestedPath(String.format(collectionPath + "[%d]", counter));
        ValidationUtils.invokeValidator(validator, elem, errors);
        errors.popNestedPath();
        counter++;
    }
} 
```

# r - 运行相同脚本的两台不同机器之间的 R 性能差异

> ID：12680737
> 
> 赞同：0
> 
> 时间：2012-10-01T20:40:52.980
> 
> 标签：r

我在 unix（它的集群）和 Windows（intel core duo ,2Gb RAM）上运行相同的代码。我可以看到运行时间存在显着差异。我可以在 unix 中看到，它只使用一个核心，但在 Windows 上，它可能使用两个核心（我不确定）。我的担忧如下：

```
Windows:
   user  system elapsed
207.12 8.82  472.04
Unix
 user  system elapsed
327.765 2.493 330.819 
```

我不明白，为什么 Windows 的 cpu 处理时间和经过的时间差异太大。我将代码分成几段，这只发生在读写部分（I/O）上，其余的计算与unix相比非常快，并且在“用户”和“经过”时间方面没有任何区别

```
user  system elapsed
48.765 0.00 52.69 
```

我没有做任何特别的事情，但我正在阅读大约 300mb 的非常大的文件

```
indata <- read.csv(mutFile, sep="\t", header = TRUE) 
```

如何避免这种差异以提高整体性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:46:22.323

300 MB 远非“非常大”。您可以`read.csv`按照 中的建议来提高速度`?read.csv`，特别是“内存使用”部分。这应该使两个系统上的运行时间更短。

至于系统之间的区别，我怀疑 Unix 机器有更快的 HDD 和/或更快的 RAM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:54:36.607

为了在读取数据集时获得高性能，我建议购买固态驱动器 (SSD)。但是，您的其他硬件（主要是您的 SATA 控制器）可能是瓶颈。此外，就 Gb/单位资金而言，SSD 并不便宜。通常，性能差异可以通过硬件差异（“普通”硬盘驱动器与笔记本电脑硬盘驱动器）来解释。解决方案是花钱购买更快的机器。或者，就像@JoshuaUlrich 所说，花一些时间优化文本文件的读取，以通过当前硬件获得良好的性能提升。

# php - 具有限制和大偏移量的 MySQL 查询永远存在

> ID：12680738
> 
> 赞同：5
> 
> 时间：2012-10-01T20:40:52.810
> 
> 标签：php, html, mysql, sql

我有一个使用下面的 PHP 脚本构建的目录，它使用分页来获得每页 1002 个结果。问题是您进入页面越远，加载时间就越长。例如，第 1 页的加载速度明显快于第 10,000 页。

我猜我的查询做错了，而不是只选择它应该被限制的 1002 个结果，它还循环遍历它之前的所有结果。如果有人可以发布需要修复的代码，那就太好了！

感谢您的时间和帮助！

```
<?php include("websites/header.html"); ?>

<center>
<?php
    /*
        Place code to connect to your DB here.
    */
    include('websites/database.php');   // include your code to connect to DB.

    $tbl_name="list";       //your table name
    // How many adjacent pages should be shown on each side?
    $adjacents = 5;

    /* 
       First get total number of rows in data table. 
       If you have a WHERE clause in your query, make sure you mirror it here.
    */
    $query = "SELECT COUNT(*) as num FROM $tbl_name";
    $total_pages = mysql_fetch_array(mysql_query($query));
    $total_pages = $total_pages[num];

    /* Setup vars for query. */
    $targetpage = "websites.php";   //your file name  (the name of this file)
    $limit = 1002;                              //how many items to show per page
    $page = $_GET['page'];
    if($page) 
        $start = ($page - 1) * $limit;          //first item to display on this page
    else
        $start = 0;                             //if no page var is given, set start to 0

    /* Get data. */
    $sql = "SELECT website FROM $tbl_name LIMIT $start, $limit";
    $result = mysql_query($sql);

    /* Setup page vars for display. */
    if ($page == 0) $page = 1;                  //if no page var is given, default to 1.
    $prev = $page - 1;                          //previous page is page - 1
    $next = $page + 1;                          //next page is page + 1
    $lastpage = ceil($total_pages/$limit);      //lastpage is = total pages / items per page, rounded up.
    $lpm1 = $lastpage - 1;                      //last page minus 1

    /* 
        Now we apply our rules and draw the pagination object. 
        We're actually saving the code to a variable in case we want to draw it more than once.
    */
    $pagination = "";
    if($lastpage > 1)
    {   
        $pagination .= "<div class=\"pagination2\">";
        //previous button
        if ($page > 1) 
            $pagination.= "<a href=\"$targetpage?page=$prev\">&lt; previous</a>";
        else
            $pagination.= "<span class=\"disabled\">&lt; previous</span>";  

        //pages 
        if ($lastpage < 7 + ($adjacents * 2))   //not enough pages to bother breaking it up
        {   
            for ($counter = 1; $counter <= $lastpage; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
            }
        }
        elseif($lastpage > 5 + ($adjacents * 2))    //enough pages to hide some
        {
            //close to beginning; only hide later pages
            if($page < 1 + ($adjacents * 2))        
            {
                for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                }
                $pagination.= "...";
                $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
                $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
            }
            //in middle; hide some front and some back
            elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
            {
                $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
                $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
                $pagination.= "...";
                for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                }
                $pagination.= "...";
                $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
                $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
            }
            //close to end; only hide early pages
            else
            {
                $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
                $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
                $pagination.= "...";
                for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                }
            }
        }

        //next button
        if ($page < $counter - 1) 
            $pagination.= "<a href=\"$targetpage?page=$next\">next &gt;</a>";
        else
            $pagination.= "<span class=\"disabled\">next &gt;</span>";
        $pagination.= "</div>\n";       
    }
?>

    <?php
$i = 0;
echo '<table style="table-layout:fixed; width:1050px;"><tr>'; 
        while($row = mysql_fetch_array($result))
{
    $i ++;
    if ($i<=3)
    {
      echo '<td style="word-wrap: break-word;">
         <div><a href="http://www.mywebsite.com/check.php?site='.strtolower($row[website]).'">'.strtolower($row[website]).'</a></div>
       </td>'; 
    }

    else
    {       
      echo '</tr><tr>';
      echo '<td style="word-wrap: break-word;"><div><a href="http://www.mywebsite.com/check.php?site='.strtolower($row[website]).'">'.strtolower($row[website]).'</a></div></td>'; 
      $i = 0;
    $i++;
   }
}  
echo '</tr></table>';
    ?>

<?=$pagination?>
</center>

<?php include("websites/footer.html"); ?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T21:29:42.837

在大多数数据库中，带有偏移量的 LIMIT 非常慢（我已经为 MySQL 找到[了一些](http://www.debianadmin.com/top-84-mysql-performance-tips.html) [关于此效果的文档](http://explainextended.com/2009/10/23/mysql-order-by-limit-performance-late-row-lookups/)，并且我正在尝试找到一篇我不久前阅读的非常好的文章，为 SQLite 解释了这一点）。原因是它通常是这样实现的：

1.  做所有正常的查询计划，就好像该`LIMIT`子句不存在一样
2.  遍历结果，直到我们得到您想要的索引
3.  开始返回结果

这意味着如果你这样做`LIMIT 10000, 10`，它将被解释为：

1.  获取前 10,000 个结果并忽略它们
2.  给你接下来的10个结果

有一个微不足道的优化，您至少可以将索引用于前 10,000 个结果，因为您不关心它们的值，但即使在这种情况下，数据库仍然需要遍历 10,000 个索引值，然后才能为您提供 10 个结果。可能有进一步的优化可以改善这一点，但在一般情况下**，您不想使用`LIMIT`大值的偏移量**。

我所知道的处理分页的最有效方法是跟踪最后一个索引，所以如果第一个页面结束于`id = 5`，那么让你的**下一个**链接有`WHERE id > 5`（`LIMIT x`当然有）。

编辑：找到[SQLite 的文章](https://www.sqlite.org/cvstrac/wiki?p=ScrollingCursor)。我强烈建议您阅读这篇文章，因为它解释了用 SQL 做事的正确方式™。由于 SQLite 的人*真的很聪明*，其他数据库也有同样的问题，我假设 MySQL 以类似的方式实现这一点。

> 另一个经常出现的错误是程序员试图使用 LIMIT 和 OFFSET 来实现滚动窗口。这里的想法是，您首先只需记住显示中顶部条目的索引并运行如下查询：
> 
> ```
> SELECT title FROM tracks
> WHERE singer='Madonna'
> ORDER BY title
> LIMIT 5 OFFSET :index 
> ```
> 
> 索引初始化为 0。要向下滚动，只需将索引增加 5 并重新运行查询。要向上滚动，请将索引减 5 并重新运行。
> 
> 以上将实际工作。**问题是当索引变大时它会变慢。OFFSET 在 SQLite 中的工作方式是它导致 sqlite3_step() 函数忽略它看到的第一个 :index 断点。因此，例如，如果 :index 为 1000，那么您实际上是在读取 1005 个条目并忽略除最后 5 个以外的所有条目。最终结果是随着列表中的越来越低，滚动开始变得迟缓。**

# php - 为什么第一次成功后在 PHP 中创建文件的多次尝试失败？

> ID：12680739
> 
> 赞同：0
> 
> 时间：2012-10-01T20:40:55.477
> 
> 标签：php

我正在为某人编写安装程序，并且大部分进展顺利。如果我第一次正确输入所有内容，一切都很好。在数据库信息步骤中，如果我输入错误的内容，我会按预期出现错误，并且可以更正我的错误以成功完成。现在，问题来了。如果某个步骤运行不正确，并且用户希望后退一步或刷新浏览器，则不会创建该文件。重新创建文件的唯一方法是通过新窗口运行安装。

要创建的文件：（数据库信息 - settings.php） `<?php $dbhot = "localhost"; $dbuser = "somedude"; $dbpass = "giggety"; $dbname = "blah"; ?>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:54:55.953

在您的问题中没有看到任何代码。然而，我带来了我的水晶球，上面写着：

如果文件处理程序在执行开始时创建了一个文件（一个空文件）并且如果已经存在则暂停您的脚本，请检查您的代码。这可以解释您无法再次创建它的事实。此外，当您在新窗口中从起点一直运行该处理程序时，该处理程序可能会忽略现有文件。然后，将检查您的算法，以防它期望某些东西并且错误条件没有得到正确处理。

而已。这就是我能做的所有猜测。如果您添加代码，我们都可以改进建议。

# sitecore - Sitecore 用户无法在编辑器中加载项目

> ID：12680742
> 
> 赞同：1
> 
> 时间：2012-10-01T20:41:13.307
> 
> 标签：sitecore, sitecore6

我有一个内容编辑器，当她登录 Sitecore 内容编辑器并单击一个项目时，什么也没有发生。该项目不会加载以进行编辑。如果她从该项目单击到另一个项目，则会提示她“是否要保存对该项目的更改”？

使用其他帐户登录可以解决此问题。在另一台 PC 上使用她的帐户登录可以解决此问题。

有没有人见过这个？Sitecore 在此用户的 PC 上无法运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:19:00.287

使用的是什么版本的 Sitecore？使用 IE9 的旧版本需要启用兼容模式（这在 6.5 的后续更新中已解决）

我发现内容编辑器在 Firefox 和 IE9 兼容模式下最稳定。Chrome 有一些棘手的问题，但通常都能正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T00:29:27.370

当您说该项目未加载进行编辑时，您需要更具体吗？显然，如果她单击该项目并收到保存提示，则用户可以编辑该项目。什么是她做不到的？

此外，这取决于您将用户设置为使用什么角色，但根据您对站点的配置方式，用户只需单击该项目，查看字段并在其中输入内容即可。可能没有任何“编辑”队列。不是这样吗？如果没有，那么需要更多详细信息才能正确回答您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T07:50:28.277

听起来像是浏览器/缓存问题。我通常尝试以下方法。1\. 如果 IE 9 我尝试私下打开会话并重试 2\. 清除所有浏览器历史记录 3\. 如果这不起作用尝试使用另一个浏览器。4\. 如果其他浏览器解决了问题，请尝试将原始浏览器的设置重置为默认值。

最后检查您是否使用代理服务器并尝试不使用。这是一个长镜头。

# delayed-job - TS 延迟增量 - 检查已完成的作业

> ID：12680743
> 
> 赞同：1
> 
> 时间：2012-10-01T20:41:17.757
> 
> 标签：delayed-job, thinking-sphinx

有没有办法检查 TS 延迟增量作业是否已完成？我有一个场景，我需要在`after_save`回调中运行新搜索，当然我希望看到搜索结果中反映的增量索引的更改。

以下是我的示例的一些细节：

我有一个名为 Feature 的模型，它有很多注释（注释模型）。索引如下所示：

```
define_index do
  indexes annotations.value, :as => :annotations

  # other indexes
  set_property :delta => :delayed
end 
```

当注释的“值”发生变化时，我`delta`会在注释模型回调中更新关联特征的属性。将 delta 属性设置为 true 会启动延迟作业任务以更新 delta 索引。在单独的回调中，我想对更新的 delta 索引执行新的搜索，但我注意到搜索从未反映索引的当前状态。毫无疑问，因为增量作业尚未完成。

处理这些时间问题的最佳策略是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:44:19.760

我只能想到一个。查询delayed_jobs 表

```
ActiveRecord::Base.connection.execute("select count(1) from delayed_jobs where handler like '%%'") 
```

如果作业成功，则条目肯定已经消失。这是我能想到的唯一方法。如果没什么大不了的，或者单独禁用此模型的延迟增量。

# html - 在本教程中如何用我自己的图像替换 bg 图像元素

> ID：12680744
> 
> 赞同：1
> 
> 时间：2012-10-01T20:41:26.520
> 
> 标签：html, css

[http://tympanus.net/codrops/2012/08/08/circle-hover-effects-with-css-transitions/](http://tympanus.net/codrops/2012/08/08/circle-hover-effects-with-css-transitions/)

参见示例 1：作者建议使用背景图像元素会增加自由度，但是当我尝试从那里实现自己的图像时，它不会出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:57:14.413

如果没有更多上下文，很难回答您的问题，但我很确定您遇到了路径问题。

本教程在示例 1 中使用相对路径。如果您还使用相对路径，则应确保该路径正确地引用了所需文件的位置。您也可以选择使用绝对路径。

相对路径示例：`../../images/image.png`

绝对路径示例：`http://exampledomain.com/images/image.png`

# java - 将 slf4j 与 spring mvc 一起使用是否会对性能产生影响？

> ID：12680751
> 
> 赞同：0
> 
> 时间：2012-10-01T20:42:03.043
> 
> 标签：java, spring-mvc, log4j, jetty, slf4j

从一个示例应用程序中，他们使用 slf4j 并且依赖项的范围是运行时。

是否有任何性能影响，或者这是在应用程序启动期间一次性命中？

```
 <!-- Logging -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${org.slf4j.version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${org.slf4j.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${org.slf4j.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
            <scope>runtime</scope>
        </dependency> 
```

我相信 spring 和 log4j 存在一些内存泄漏，因为每当我在开发过程中使用 jetty 运行我的应用程序时，如果它在发生更改时每 10 秒重新加载一次，它最终会给我一个 OOM 错误（permgen？）循环，我被告知这是因为弹簧伐木。

注释？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:45:28.173

我认为性能影响并不明显，但这取决于您记录了多少，以及为记录进行了多少计算。因此，包含大量计算的日志记录`if(logger.isDebugEnabled()) {...}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:01:02.673

Spring 使用 commons-logging，最终将使用您当前拥有的配置将其输出发送到 log4j。

通过添加 slf4j，您并没有更改 Spring 用于内部记录的内容 - 但您已经添加了另一个路径，用于从您自己的 slf4j 记录器获取日志消息到 log4j。

实际上，这种类型的事情不会真正产生任何影响（除了 commons-logging 之外还使用 slf4j，两者都发送到 log4j），因为 slf4j 或 commons-logging 在 log4j 面前都没有真正自己做很多工作 -他们基本上只是将他们的消息发送到 log4j 以发送到它的附加程序。

*（但如果您担心性能，请一如既往地进行测试和测量！）*

# python - 拆分（分解）熊猫数据框字符串条目以分隔行

> ID：12680754
> 
> 赞同：303
> 
> 时间：2012-10-01T20:42:16.210
> 
> 标签：python, pandas, numpy, dataframe

我有`pandas dataframe`其中一列文本字符串包含逗号分隔的值。我想拆分每个 CSV 字段并为每个条目创建一个新行（假设 CSV 是干净的，只需要在“，”上拆分）。例如，`a`应该变成`b`：

```
In [7]: a
Out[7]: 
    var1  var2
0  a,b,c     1
1  d,e,f     2

In [8]: b
Out[8]: 
  var1  var2
0    a     1
1    b     1
2    c     1
3    d     2
4    e     2
5    f     2 
```

到目前为止，我已经尝试过各种简单的功能，但该`.apply`方法在轴上使用时似乎只接受一行作为返回值，我无法开始`.transform`工作。我们欢迎所有的建议！

示例数据：

```
from pandas import DataFrame
import numpy as np
a = DataFrame([{'var1': 'a,b,c', 'var2': 1},
               {'var1': 'd,e,f', 'var2': 2}])
b = DataFrame([{'var1': 'a', 'var2': 1},
               {'var1': 'b', 'var2': 1},
               {'var1': 'c', 'var2': 1},
               {'var1': 'd', 'var2': 2},
               {'var1': 'e', 'var2': 2},
               {'var1': 'f', 'var2': 2}]) 
```

我知道这行不通，因为我们通过 numpy 丢失了 DataFrame 元数据，但它应该让您了解我尝试做的事情：

```
def fun(row):
    letters = row['var1']
    letters = letters.split(',')
    out = np.array([row] * len(letters))
    out['var1'] = letters
a['idx'] = range(a.shape[0])
z = a.groupby('idx')
z.transform(fun) 
```

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2016-11-06T13:12:51.043

**更新 3：**使用[`Series.explode()`/`DataFrame.explode()`方法](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.explode.html)更有意义（在 Pandas 0.25.0 中实现并在 Pandas 1.3.0 中扩展以支持多列分解），如使用示例所示：

对于单列：

```
In [1]: df = pd.DataFrame({'A': [[0, 1, 2], 'foo', [], [3, 4]],
   ...:                    'B': 1,
   ...:                    'C': [['a', 'b', 'c'], np.nan, [], ['d', 'e']]})

In [2]: df
Out[2]:
           A  B          C
0  [0, 1, 2]  1  [a, b, c]
1        foo  1        NaN
2         []  1         []
3     [3, 4]  1     [d, e]

In [3]: df.explode('A')
Out[3]:
     A  B          C
0    0  1  [a, b, c]
0    1  1  [a, b, c]
0    2  1  [a, b, c]
1  foo  1        NaN
2  NaN  1         []
3    3  1     [d, e]
3    4  1     [d, e] 
```

对于多列（**对于 Pandas 1.3.0+**）：

```
In [4]: df.explode(['A', 'C'])
Out[4]:
     A  B    C
0    0  1    a
0    1  1    b
0    2  1    c
1  foo  1  NaN
2  NaN  1  NaN
3    3  1    d
3    4  1    e 
```

* * *

**更新 2：**更通用的矢量化函数，适用于多列`normal`和多`list`列

```
def explode(df, lst_cols, fill_value='', preserve_index=False):
    # make sure `lst_cols` is list-alike
    if (lst_cols is not None
        and len(lst_cols) > 0
        and not isinstance(lst_cols, (list, tuple, np.ndarray, pd.Series))):
        lst_cols = [lst_cols]
    # all columns except `lst_cols`
    idx_cols = df.columns.difference(lst_cols)
    # calculate lengths of lists
    lens = df[lst_cols[0]].str.len()
    # preserve original index values    
    idx = np.repeat(df.index.values, lens)
    # create "exploded" DF
    res = (pd.DataFrame({
                col:np.repeat(df[col].values, lens)
                for col in idx_cols},
                index=idx)
             .assign(**{col:np.concatenate(df.loc[lens>0, col].values)
                            for col in lst_cols}))
    # append those rows that have empty lists
    if (lens == 0).any():
        # at least one list in cells is empty
        res = (res.append(df.loc[lens==0, idx_cols], sort=False)
                  .fillna(fill_value))
    # revert the original index order
    res = res.sort_index()
    # reset index if requested
    if not preserve_index:        
        res = res.reset_index(drop=True)
    return res 
```

演示：

多`list`列 - 所有`list`列必须在每行中具有相同的元素数：

```
In [134]: df
Out[134]:
   aaa  myid        num          text
0   10     1  [1, 2, 3]  [aa, bb, cc]
1   11     2         []            []
2   12     3     [1, 2]      [cc, dd]
3   13     4         []            []

In [135]: explode(df, ['num','text'], fill_value='')
Out[135]:
   aaa  myid num text
0   10     1   1   aa
1   10     1   2   bb
2   10     1   3   cc
3   11     2
4   12     3   1   cc
5   12     3   2   dd
6   13     4 
```

保留原始索引值：

```
In [136]: explode(df, ['num','text'], fill_value='', preserve_index=True)
Out[136]:
   aaa  myid num text
0   10     1   1   aa
0   10     1   2   bb
0   10     1   3   cc
1   11     2
2   12     3   1   cc
2   12     3   2   dd
3   13     4 
```

设置：

```
df = pd.DataFrame({
 'aaa': {0: 10, 1: 11, 2: 12, 3: 13},
 'myid': {0: 1, 1: 2, 2: 3, 3: 4},
 'num': {0: [1, 2, 3], 1: [], 2: [1, 2], 3: []},
 'text': {0: ['aa', 'bb', 'cc'], 1: [], 2: ['cc', 'dd'], 3: []}
}) 
```

CSV 列：

```
In [46]: df
Out[46]:
        var1  var2 var3
0      a,b,c     1   XX
1  d,e,f,x,y     2   ZZ

In [47]: explode(df.assign(var1=df.var1.str.split(',')), 'var1')
Out[47]:
  var1  var2 var3
0    a     1   XX
1    b     1   XX
2    c     1   XX
3    d     2   ZZ
4    e     2   ZZ
5    f     2   ZZ
6    x     2   ZZ
7    y     2   ZZ 
```

使用这个小技巧，我们可以将类似 CSV 的列转换为`list`列：

```
In [48]: df.assign(var1=df.var1.str.split(','))
Out[48]:
              var1  var2 var3
0        [a, b, c]     1   XX
1  [d, e, f, x, y]     2   ZZ 
```

* * *

**更新：** **通用矢量化方法（也适用于多列）：**

原DF：

```
In [177]: df
Out[177]:
        var1  var2 var3
0      a,b,c     1   XX
1  d,e,f,x,y     2   ZZ 
```

**解决方案：**

首先让我们将 CSV 字符串转换为列表：

```
In [178]: lst_col = 'var1' 

In [179]: x = df.assign(**{lst_col:df[lst_col].str.split(',')})

In [180]: x
Out[180]:
              var1  var2 var3
0        [a, b, c]     1   XX
1  [d, e, f, x, y]     2   ZZ 
```

现在我们可以这样做：

```
In [181]: pd.DataFrame({
     ...:     col:np.repeat(x[col].values, x[lst_col].str.len())
     ...:     for col in x.columns.difference([lst_col])
     ...: }).assign(**{lst_col:np.concatenate(x[lst_col].values)})[x.columns.tolist()]
     ...:
Out[181]:
  var1  var2 var3
0    a     1   XX
1    b     1   XX
2    c     1   XX
3    d     2   ZZ
4    e     2   ZZ
5    f     2   ZZ
6    x     2   ZZ
7    y     2   ZZ 
```

* * *

**旧答案：**

受[@AFinkelstein 解决方案](https://stackoverflow.com/a/28182629/5741205)的启发，我想让它更通用，它可以应用于具有两列以上的 DF，并且与 AFinkelstein 的解决方案一样快，几乎一样快）：

```
In [2]: df = pd.DataFrame(
   ...:    [{'var1': 'a,b,c', 'var2': 1, 'var3': 'XX'},
   ...:     {'var1': 'd,e,f,x,y', 'var2': 2, 'var3': 'ZZ'}]
   ...: )

In [3]: df
Out[3]:
        var1  var2 var3
0      a,b,c     1   XX
1  d,e,f,x,y     2   ZZ

In [4]: (df.set_index(df.columns.drop('var1',1).tolist())
   ...:    .var1.str.split(',', expand=True)
   ...:    .stack()
   ...:    .reset_index()
   ...:    .rename(columns={0:'var1'})
   ...:    .loc[:, df.columns]
   ...: )
Out[4]:
  var1  var2 var3
0    a     1   XX
1    b     1   XX
2    c     1   XX
3    d     2   ZZ
4    e     2   ZZ
5    f     2   ZZ
6    x     2   ZZ
7    y     2   ZZ 
```

* * *

## 回答 #2

> 赞同：136
> 
> 时间：2015-01-28T00:28:46.950

经过痛苦的实验以找到比公认答案更快的东西，我得到了这个工作。在我尝试过的数据集上，它的运行速度提高了大约 100 倍。

如果有人知道如何使它更优雅，请务必修改我的代码。如果不将要保留的其他列设置为索引，然后重置索引并重新命名列，我找不到一种可行的方法，但我想还有其他方法可行。

```
b = DataFrame(a.var1.str.split(',').tolist(), index=a.var2).stack()
b = b.reset_index()[[0, 'var2']] # var1 variable is currently labeled 0
b.columns = ['var1', 'var2'] # renaming var1 
```

* * *

## 回答 #3

> 赞同：121
> 
> 时间：2019-07-20T07:18:40.710

## 熊猫 >= 0.25

Series 和 DataFrame 方法定义了[**`.explode()`**](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.explode.html#pandas.DataFrame.explode)一种将*列表*分解为单独行的方法。请参阅[Exploding a list-like column](https://pandas.pydata.org/pandas-docs/stable/user_guide/reshaping.html#exploding-a-list-like-column)的文档部分。

由于您有一个逗号分隔的字符串列表，因此将字符串拆分为逗号以获得​​元素列表，然后调用`explode`该列。

```
df = pd.DataFrame({'var1': ['a,b,c', 'd,e,f'], 'var2': [1, 2]})
df
    var1  var2
0  a,b,c     1
1  d,e,f     2

df.assign(var1=df['var1'].str.split(',')).explode('var1')

  var1  var2
0    a     1
0    b     1
0    c     1
1    d     2
1    e     2
1    f     2 
```

**请注意，`explode`仅适用于单个列**（目前）。要一次分解多个列，请参见下文。

NaN 和空列表得到了他们应得的待遇，而您不必费劲儿地把它弄好。

```
df = pd.DataFrame({'var1': ['d,e,f', '', np.nan], 'var2': [1, 2, 3]})
df
    var1  var2
0  d,e,f     1
1            2
2    NaN     3

df['var1'].str.split(',')

0    [d, e, f]
1           []
2          NaN

df.assign(var1=df['var1'].str.split(',')).explode('var1')

  var1  var2
0    d     1
0    e     1
0    f     1
1          2  # empty list entry becomes empty string after exploding 
2  NaN     3  # NaN left un-touched 
```

**与基于`ravel`/`repeat`**的解决方案（完全忽略空列表并阻塞 NaN）**相比，这是一个严重的优势。**

* * *

### 分解多列

请注意，`explode`一次仅适用于单个列，但您可以使用`apply`一次分解多个列：

```
df = pd.DataFrame({'var1': ['a,b,c', 'd,e,f'], 
                   'var2': ['i,j,k', 'l,m,n'], 
                   'var3': [1, 2]})
df
    var1   var2  var3
0  a,b,c  i,j,k     1
1  d,e,f  l,m,n     2

(df.set_index(['var3']) 
   .apply(lambda col: col.str.split(',').explode())
   .reset_index()
   .reindex(df.columns, axis=1))

df
  var1 var2  var3
0    a    i     1
1    b    j     1
2    c    k     1
3    d    l     2
4    e    m     2
5    f    n     2 
```

想法是将所有不应分解的列设置为索引，**然后**通过`apply`. 当列表大小相同时，这很有效。

* * *

## 回答 #4

> 赞同：103
> 
> 时间：2012-10-01T21:15:03.957

像这样的东西怎么样：

```
In [55]: pd.concat([Series(row['var2'], row['var1'].split(','))              
                    for _, row in a.iterrows()]).reset_index()
Out[55]: 
  index  0
0     a  1
1     b  1
2     c  1
3     d  2
4     e  2
5     f  2 
```

然后你只需要重命名列

* * *

## 回答 #5

> 赞同：52
> 
> 时间：2016-10-09T17:57:42.287

这是我为这个常见任务[编写的函数。](https://github.com/cognoma/genes/blob/721204091a96e55de6dcad165d6d8265e67e2a48/2.process.py#L61-L95 "GitHub 上的来源：cognoma/genes 存储库")它比`Series`/`stack`方法更有效。保留列顺序和名称。

```
def tidy_split(df, column, sep='|', keep=False):
    """
    Split the values of a column and expand so the new DataFrame has one split
    value per row. Filters rows where the column is missing.

    Params
    ------
    df : pandas.DataFrame
        dataframe with the column to split and expand
    column : str
        the column to split and expand
    sep : str
        the string used to split the column's values
    keep : bool
        whether to retain the presplit value as it's own row

    Returns
    -------
    pandas.DataFrame
        Returns a dataframe with the same columns as `df`.
    """
    indexes = list()
    new_values = list()
    df = df.dropna(subset=[column])
    for i, presplit in enumerate(df[column].astype(str)):
        values = presplit.split(sep)
        if keep and len(values) > 1:
            indexes.append(i)
            new_values.append(presplit)
        for value in values:
            indexes.append(i)
            new_values.append(value)
    new_df = df.iloc[indexes, :].copy()
    new_df[column] = new_values
    return new_df 
```

有了这个函数，[原来的问题](https://stackoverflow.com/q/12680754/4651668)很简单：

```
tidy_split(a, 'var1', sep=',') 
```

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2015-06-24T21:01:57.303

与以下类似的问题：[pandas：如何将列中的文本拆分为多行？](https://stackoverflow.com/questions/17116814/pandas-how-do-i-split-text-in-a-column-into-multiple-columns)

你可以这样做：

```
>> a=pd.DataFrame({"var1":"a,b,c d,e,f".split(),"var2":[1,2]})
>> s = a.var1.str.split(",").apply(pd.Series, 1).stack()
>> s.index = s.index.droplevel(-1)
>> del a['var1']
>> a.join(s)
   var2 var1
0     1    a
0     1    b
0     1    c
1     2    d
1     2    e
1     2    f 
```

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2018-10-24T16:29:52.587

有可能在不改变数据帧结构的情况下拆分和分解数据帧

> 拆分和扩展特定列的数据

输入：

```
 var1    var2
0   a,b,c   1
1   d,e,f   2

#Get the indexes which are repetative with the split 
df['var1'] = df['var1'].str.split(',')
df = df.explode('var1') 
```

出去：

```
 var1    var2
0   a   1
0   b   1
0   c   1
1   d   2
1   e   2
1   f   2 
```

**编辑-1**

> 拆分和扩展多列的行

```
Filename    RGB                                             RGB_type
0   A   [[0, 1650, 6, 39], [0, 1691, 1, 59], [50, 1402...   [r, g, b]
1   B   [[0, 1423, 16, 38], [0, 1445, 16, 46], [0, 141...   [r, g, b] 
```

根据参考列重新索引，并对齐列值信息与堆栈

```
df = df.reindex(df.index.repeat(df['RGB_type'].apply(len)))
df = df.groupby('Filename').apply(lambda x:x.apply(lambda y: pd.Series(y.iloc[0])))
df.reset_index(drop=True).ffill() 
```

出去：

```
 Filename    RGB_type    Top 1 colour    Top 1 frequency Top 2 colour    Top 2 frequency
    Filename                            
 A  0       A   r   0   1650    6   39
    1       A   g   0   1691    1   59
    2       A   b   50  1402    49  187
 B  0       B   r   0   1423    16  38
    1       B   g   0   1445    16  46
    2       B   b   0   1419    16  39 
```

* * *

## 回答 #8

> 赞同：16
> 
> 时间：2018-08-08T17:23:44.133

## TL;博士

```
import pandas as pd
import numpy as np

def explode_str(df, col, sep):
    s = df[col]
    i = np.arange(len(s)).repeat(s.str.count(sep) + 1)
    return df.iloc[i].assign(**{col: sep.join(s).split(sep)})

def explode_list(df, col):
    s = df[col]
    i = np.arange(len(s)).repeat(s.str.len())
    return df.iloc[i].assign(**{col: np.concatenate(s)}) 
```

* * *

## 示范

```
explode_str(a, 'var1', ',')

  var1  var2
0    a     1
0    b     1
0    c     1
1    d     2
1    e     2
1    f     2 
```

让我们创建一个`d`包含列表的新数据框

```
d = a.assign(var1=lambda d: d.var1.str.split(','))

explode_list(d, 'var1')

  var1  var2
0    a     1
0    b     1
0    c     1
1    d     2
1    e     2
1    f     2 
```

* * *

## 普通的留言

我将使用`np.arange`with`repeat`来生成可以使用 with 的数据框索引位置`iloc`。

## 常问问题

### 为什么我不用`loc`？

因为索引可能不是唯一的，并且 using`loc`将返回与查询索引匹配的每一行。

### 为什么不使用该`values`属性并对其进行切片？

调用时`values`，如果整个数据帧都在一个有凝聚力的“块”中，Pandas 将返回一个数组视图，即“块”。否则 Pandas 将不得不拼凑一个新数组。拼凑时，该数组必须是统一的 dtype。通常这意味着返回一个 dtype 为的数组`object`。通过使用`iloc`而不是切片`values`属性，我减轻了自己必须处理的问题。

### 你为什么用`assign`？

当我使用`assign`要爆炸的相同列名时，我会覆盖现有列并保持其在数据框中的位置。

### 为什么索引值重复？

由于`iloc`在重复位置上使用，结果索引显示相同的重复模式。列表或字符串的每个元素重复一次。
这可以重置`reset_index(drop=True)`

* * *

## 对于字符串

我不想过早地拆分字符串。因此，我`sep`假设如果要拆分，则计算参数的出现次数，结果列表的长度将比分隔符的数量多一。

然后我将它`sep`用于`join`字符串`split`。

```
def explode_str(df, col, sep):
    s = df[col]
    i = np.arange(len(s)).repeat(s.str.count(sep) + 1)
    return df.iloc[i].assign(**{col: sep.join(s).split(sep)}) 
```

## 对于列表

类似于字符串，除了我不需要计算出现次数，`sep`因为它已经分裂了。

我使用 Numpy`concatenate`将列表挤在一起。

```
import pandas as pd
import numpy as np

def explode_list(df, col):
    s = df[col]
    i = np.arange(len(s)).repeat(s.str.len())
    return df.iloc[i].assign(**{col: np.concatenate(s)}) 
```

* * *

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2015-04-21T09:02:49.710

我为具有任意数量的列的数据框提出了一个解决方案（同时仍然一次只分离一个列的条目）。

```
def splitDataFrameList(df,target_column,separator):
    ''' df = dataframe to split,
    target_column = the column containing the values to split
    separator = the symbol used to perform the split

    returns: a dataframe with each entry for the target column separated, with each element moved into a new row. 
    The values in the other columns are duplicated across the newly divided rows.
    '''
    def splitListToRows(row,row_accumulator,target_column,separator):
        split_row = row[target_column].split(separator)
        for s in split_row:
            new_row = row.to_dict()
            new_row[target_column] = s
            row_accumulator.append(new_row)
    new_rows = []
    df.apply(splitListToRows,axis=1,args = (new_rows,target_column,separator))
    new_df = pandas.DataFrame(new_rows)
    return new_df 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-11-04T17:34:22.453

这是一个相当简单的消息，它使用`split`pandas`str`访问器中的方法，然后使用 NumPy 将每一行展平为一个数组。

通过使用 将非拆分列重复正确的次数来检索相应的值`np.repeat`。

```
var1 = df.var1.str.split(',', expand=True).values.ravel()
var2 = np.repeat(df.var2.values, len(var1) / len(df))

pd.DataFrame({'var1': var1,
              'var2': var2})

  var1  var2
0    a     1
1    b     1
2    c     1
3    d     2
4    e     2
5    f     2 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2019-01-22T23:45:09.067

我一直在努力解决内存不足的问题，使用各种方式来扩展我的列表，所以我准备了一些基准来帮助我决定要投票的答案。我测试了五个场景，列表长度与列表数量的比例不同。分享以下结果：

**时间：（**越少越好，点击查看大图）

[![速度](../Images/a5c913a4af19c229fb11be9be911d2ce.png)](https://i.stack.imgur.com/UsJ5X.png)

**峰值内存使用：（**越少越好）

[![内存使用峰值](../Images/9cdecb2ab92d3d1d894dea23a9cc142e.png)](https://i.stack.imgur.com/eC2J3.png)

**结论**：

*   [@MaxU 的回答](https://stackoverflow.com/a/40449726/6646912)（更新 2），代号*连接*几乎在每种情况下都提供了最佳速度，同时保持低速窥视内存使用率，
*   如果您需要处理大量具有相对较小列表的行并且可以承受增加的峰值内存，请参阅[@DMulligan 的答案](https://stackoverflow.com/a/28182629/6646912)（代号*堆栈），*
*   接受[的@Chang 的答案](https://stackoverflow.com/a/12681217/6646912)适用于具有几行但非常大的列表的数据框。

完整的细节（函数和基准代码）在这个[GitHub gist](https://gist.github.com/krassowski/0259a2cd2ba774ccd9f69bbcc3187fbf)中。请注意，基准问题已简化并且不包括将字符串拆分到列表中 - 大多数解决方案都以类似的方式执行。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2019-12-17T08:04:26.887

单线使用`split(___, expand=True)`和`level`和`name`参数`reset_index()`：

```
>>> b = a.var1.str.split(',', expand=True).set_index(a.var2).stack().reset_index(level=0, name='var1')
>>> b
   var2 var1
0     1    a
1     1    b
2     1    c
0     2    d
1     2    e
2     2    f 
```

如果您需要`b`看起来与问题中的完全一样，您还可以执行以下操作：

```
>>> b = b.reset_index(drop=True)[['var1', 'var2']]
>>> b
  var1  var2
0    a     1
1    b     1
2    c     1
3    d     2
4    e     2
5    f     2 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-01-05T20:16:01.400

基于优秀的@DMulligan[解决方案](https://stackoverflow.com/a/28182629/304209)，这里是一个通用的矢量化（无循环）函数，它将数据帧的一列拆分为多行，并将其合并回原始数据帧。它还使用了这个[答案](https://stackoverflow.com/a/37071454/304209)`change_column_order`中的一个很好的通用函数。

```
def change_column_order(df, col_name, index):
    cols = df.columns.tolist()
    cols.remove(col_name)
    cols.insert(index, col_name)
    return df[cols]

def split_df(dataframe, col_name, sep):
    orig_col_index = dataframe.columns.tolist().index(col_name)
    orig_index_name = dataframe.index.name
    orig_columns = dataframe.columns
    dataframe = dataframe.reset_index()  # we need a natural 0-based index for proper merge
    index_col_name = (set(dataframe.columns) - set(orig_columns)).pop()
    df_split = pd.DataFrame(
        pd.DataFrame(dataframe[col_name].str.split(sep).tolist())
        .stack().reset_index(level=1, drop=1), columns=[col_name])
    df = dataframe.drop(col_name, axis=1)
    df = pd.merge(df, df_split, left_index=True, right_index=True, how='inner')
    df = df.set_index(index_col_name)
    df.index.name = orig_index_name
    # merge adds the column to the last place, so we need to move it back
    return change_column_order(df, col_name, orig_col_index) 
```

例子：

```
df = pd.DataFrame([['a:b', 1, 4], ['c:d', 2, 5], ['e:f:g:h', 3, 6]], 
                  columns=['Name', 'A', 'B'], index=[10, 12, 13])
df
        Name    A   B
    10   a:b     1   4
    12   c:d     2   5
    13   e:f:g:h 3   6

split_df(df, 'Name', ':')
    Name    A   B
10   a       1   4
10   b       1   4
12   c       2   5
12   d       2   5
13   e       3   6
13   f       3   6    
13   g       3   6    
13   h       3   6 
```

请注意，它保留了列的原始索引和顺序。它也适用于具有非顺序索引的数据帧。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2018-06-05T23:42:09.153

字符串函数 split 可以采用选项布尔参数“expand”。

这是使用此参数的解决方案：

```
(a.var1
  .str.split(",",expand=True)
  .set_index(a.var2)
  .stack()
  .reset_index(level=1, drop=True)
  .reset_index()
  .rename(columns={0:"var1"})) 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2020-12-08T00:18:36.117

我真的很欣赏“Chang She”的答案，但是该`iterrows()`功能在大型数据集上需要很长时间。我遇到了这个问题，我来到了这个。

```
# First, reset_index to make the index a column
a = a.reset_index().rename(columns={'index':'duplicated_idx'})

# Get a longer series with exploded cells to rows
series = pd.DataFrame(a['var1'].str.split('/')
                      .tolist(), index=a.duplicated_idx).stack()

# New df from series and merge with the old one
b = series.reset_index([0, 'duplicated_idx'])
b = b.rename(columns={0:'var1'})

# Optional & Advanced: In case, there are other columns apart from var1 & var2
b.merge(
    a[a.columns.difference(['var1'])],
    on='duplicated_idx')

# Optional: Delete the "duplicated_index"'s column, and reorder columns
b = b[a.columns.difference(['duplicated_idx'])] 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-06-19T15:42:16.410

刚刚从上面使用了 jiln 的优秀答案，但需要扩展以拆分多个列。以为我会分享。

```
def splitDataFrameList(df,target_column,separator):
''' df = dataframe to split,
target_column = the column containing the values to split
separator = the symbol used to perform the split

returns: a dataframe with each entry for the target column separated, with each element moved into a new row. 
The values in the other columns are duplicated across the newly divided rows.
'''
def splitListToRows(row, row_accumulator, target_columns, separator):
    split_rows = []
    for target_column in target_columns:
        split_rows.append(row[target_column].split(separator))
    # Seperate for multiple columns
    for i in range(len(split_rows[0])):
        new_row = row.to_dict()
        for j in range(len(split_rows)):
            new_row[target_columns[j]] = split_rows[j][i]
        row_accumulator.append(new_row)
new_rows = []
df.apply(splitListToRows,axis=1,args = (new_rows,target_column,separator))
new_df = pd.DataFrame(new_rows)
return new_df 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-05-27T08:55:37.437

使用 MultiIndex 支持升级 MaxU 的答案

```
def explode(df, lst_cols, fill_value='', preserve_index=False):
    """
    usage:
        In [134]: df
        Out[134]:
           aaa  myid        num          text
        0   10     1  [1, 2, 3]  [aa, bb, cc]
        1   11     2         []            []
        2   12     3     [1, 2]      [cc, dd]
        3   13     4         []            []

        In [135]: explode(df, ['num','text'], fill_value='')
        Out[135]:
           aaa  myid num text
        0   10     1   1   aa
        1   10     1   2   bb
        2   10     1   3   cc
        3   11     2
        4   12     3   1   cc
        5   12     3   2   dd
        6   13     4
    """
    # make sure `lst_cols` is list-alike
    if (lst_cols is not None
        and len(lst_cols) > 0
        and not isinstance(lst_cols, (list, tuple, np.ndarray, pd.Series))):
        lst_cols = [lst_cols]
    # all columns except `lst_cols`
    idx_cols = df.columns.difference(lst_cols)
    # calculate lengths of lists
    lens = df[lst_cols[0]].str.len()
    # preserve original index values    
    idx = np.repeat(df.index.values, lens)
    res = (pd.DataFrame({
                col:np.repeat(df[col].values, lens)
                for col in idx_cols},
                index=idx)
             .assign(**{col:np.concatenate(df.loc[lens>0, col].values)
                            for col in lst_cols}))
    # append those rows that have empty lists
    if (lens == 0).any():
        # at least one list in cells is empty
        res = (res.append(df.loc[lens==0, idx_cols], sort=False)
                  .fillna(fill_value))
    # revert the original index order
    res = res.sort_index()
    # reset index if requested
    if not preserve_index:        
        res = res.reset_index(drop=True)

    # if original index is MultiIndex build the dataframe from the multiindex
    # create "exploded" DF
    if isinstance(df.index, pd.MultiIndex):
        res = res.reindex(
            index=pd.MultiIndex.from_tuples(
                res.index,
                names=['number', 'color']
            )
    )
    return res 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-08-17T21:33:45.020

我要添加到此集合中的解决方案版本！:-)

```
# Original problem
from pandas import DataFrame
import numpy as np
a = DataFrame([{'var1': 'a,b,c', 'var2': 1},
               {'var1': 'd,e,f', 'var2': 2}])
b = DataFrame([{'var1': 'a', 'var2': 1},
               {'var1': 'b', 'var2': 1},
               {'var1': 'c', 'var2': 1},
               {'var1': 'd', 'var2': 2},
               {'var1': 'e', 'var2': 2},
               {'var1': 'f', 'var2': 2}])
### My solution
import pandas as pd
import functools
def expand_on_cols(df, fuse_cols, delim=","):
    def expand_on_col(df, fuse_col):
        col_order = df.columns
        df_expanded = pd.DataFrame(
            df.set_index([x for x in df.columns if x != fuse_col])[fuse_col]
            .apply(lambda x: x.split(delim))
            .explode()
        ).reset_index()
        return df_expanded[col_order]
    all_expanded = functools.reduce(expand_on_col, fuse_cols, df)
    return all_expanded

assert(b.equals(expand_on_cols(a, ["var1"], delim=","))) 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2021-05-28T07:36:23.657

单线使用[`assign`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.assign.html?highlight=assign#pandas.DataFrame.assign)and [`explode`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.explode.html)：

```
 col1  col2
0  a,b,c     1
1  d,e,f     2

df.assign(col1 = df.col1.str.split(',')).explode('col1', ignore_index=True) 
```

输出：

```
 col1  col2
0    a     1
1    b     1
2    c     1
3    d     2
4    e     2
5    f     2 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2015-03-17T21:07:42.120

对于这个问题，我提出了以下解决方案：

```
def iter_var1(d):
    for _, row in d.iterrows():
        for v in row["var1"].split(","):
            yield (v, row["var2"])

new_a = DataFrame.from_records([i for i in iter_var1(a)],
        columns=["var1", "var2"]) 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-06-18T10:27:08.103

另一种使用python复制包的解决方案

```
import copy
new_observations = list()
def pandas_explode(df, column_to_explode):
    new_observations = list()
    for row in df.to_dict(orient='records'):
        explode_values = row[column_to_explode]
        del row[column_to_explode]
        if type(explode_values) is list or type(explode_values) is tuple:
            for explode_value in explode_values:
                new_observation = copy.deepcopy(row)
                new_observation[column_to_explode] = explode_value
                new_observations.append(new_observation) 
        else:
            new_observation = copy.deepcopy(row)
            new_observation[column_to_explode] = explode_values
            new_observations.append(new_observation) 
    return_df = pd.DataFrame(new_observations)
    return return_df

df = pandas_explode(df, column_name) 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-08-02T14:02:06.600

这里有很多答案，但我很惊讶没有人提到内置的 pandas 爆炸功能。查看以下链接： [https ://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.explode.html#pandas.DataFrame.explode](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.explode.html#pandas.DataFrame.explode)

由于某种原因，我无法访问该功能，所以我使用了以下代码：

```
import pandas_explode
pandas_explode.patch()
df_zlp_people_cnt3 = df_zlp_people_cnt2.explode('people') 
```

[![在此处输入图像描述](../Images/25299ab14096ac651ff1375ccaba182f.png)](https://i.stack.imgur.com/XbTRL.png)

以上是我的数据样本。如您所见，**人员**列有一系列人员，我试图将其分解。我给出的代码适用于列表类型数据。因此，请尝试将逗号分隔的文本数据转换为列表格式。此外，由于我的代码使用内置函数，它比自定义/应用函数快得多。

注意：您可能需要使用 pip 安装 pandas_explode。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-06-17T11:23:15.397

我有一个类似的问题，我的解决方案是先将数据框转换为字典列表，然后进行转换。这是功能：

```
import re
import pandas as pd

def separate_row(df, column_name):
    ls = []
    for row_dict in df.to_dict('records'):
        for word in re.split(',', row_dict[column_name]):
            row = row_dict.copy()
            row[column_name]=word
            ls.append(row)
    return pd.DataFrame(ls) 
```

例子：

```
>>> from pandas import DataFrame
>>> import numpy as np
>>> a = DataFrame([{'var1': 'a,b,c', 'var2': 1},
               {'var1': 'd,e,f', 'var2': 2}])
>>> a
    var1  var2
0  a,b,c     1
1  d,e,f     2
>>> separate_row(a, "var1")
  var1  var2
0    a     1
1    b     1
2    c     1
3    d     2
4    e     2
5    f     2 
```

您还可以稍微更改该函数以支持分隔列表类型的行。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2020-08-25T04:09:13.843

在此页面上的所有解决方案中添加一些点点滴滴后，我能够得到类似的东西（对于需要立即使用它的人）。该函数的参数是 df（输入数据帧）和 key（具有分隔符分隔字符串的列）。如果与分号“;”不同，只需用您的分隔符替换。

```
def split_df_rows_for_semicolon_separated_key(key, df):
    df=df.set_index(df.columns.drop(key,1).tolist())[key].str.split(';', expand=True).stack().reset_index().rename(columns={0:key}).loc[:, df.columns]
    df=df[df[key] != '']
    return df 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-05-28T07:45:06.360

尝试：

```
vals = np.array(a.var1.str.split(",").values.tolist())    
var = np.repeat(a.var2, vals.shape[1])

out = pd.DataFrame(np.column_stack((var, vals.ravel())), columns=a.columns)
display(out)

      var1 var2
    0   1   a
    1   1   b
    2   1   c
    3   2   d
    4   2   e
    5   2   f 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-08-04T04:15:22.213

在最新版本的熊猫中，您可以使用`split`后跟`explode`

```
a.assign(var1=a['var1'].str.split(',')).explode('var1') 
```

一种

```
 var1 var2
0   a   1
0   b   1
0   c   1
1   d   2
1   e   2
1   f   2 
```

# facebook-opengraph - 有一个非营利组织的页面，找不到适合开放图的 fbid

> ID：12680755
> 
> 赞同：0
> 
> 时间：2012-10-01T20:42:27.117
> 
> 标签：facebook-opengraph, webpage

我知道有人问过类似的问题，但没有一个解决方案对我有用。我刚刚为非营利组织创建了一个页面，并且正在我们的主站点上实现开放图。当我用 http://developers.facebook.com/tools/debug 抓取网站时，我得到了

> URL 'http://www.desertmuseumdigitallibrary.org/public1/detail.php?id=ASDM23540' 类型'article' 的对象无效，因为属性'fb:admins' 的给定值'114003368752609' 无法解析为输入“fbid”。

我相信这可能是页面 id，但它确实适用于[https://graph.facebook.com/114003368752609](https://graph.facebook.com/114003368752609)。我一直无法找到可以在 https://graph.facebook.com/ 上使用的任何其他号码。我在登录时提到的页面是[http://www.facebook.com/pages/ASDM-Sonoran-Desert-Digital-Library/114003368752609](http://www.facebook.com/pages/ASDM-Sonoran-Desert-Digital-Library/114003368752609)并且名称“ASDM-Sonoran-Desert-Digital-Library”没有为 https://graph.facebook.com/ 工作。

我也尝试过创建一个应用程序，希望这会给我一个我可以使用的 app_id，但该链接直接将我发送到我的常规页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:14:16.010

114003368752609 是根据上面的图形API结果的页面ID

该字段应该是管理 URL 以获取洞察的用户的用户 ID；不能为此使用页面 ID

如果您将此访问权限分配给多个用户，则需要使用应用 ID（在[https://developers.facebook.com/apps](https://developers.facebook.com/apps)创建）——在这种情况下，为该应用配置的管理员将有权访问这些见解。

您需要的是：

```
<meta property="fb:admins" content="CSV LIST OF USER IDS OF FACEBOOK USERS" />
<meta property="fb:app_id" content="APP ID OF AN APP" /> 
```

# php - 将产品分配给用户 mysql

> ID：12680757
> 
> 赞同：0
> 
> 时间：2012-10-01T20:42:30.700
> 
> 标签：php, mysql, database, product

我有一个产品和用户列表。我正在尝试将产品分配给特定用户。我应该如何在数据库中设置它。我现在不需要 php 代码，因为我不知道如何连接 MySQL 中的数据？我打算使用复选框传递数据库的帖子信息。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:15:49.957

在您的产品表中添加一个 user_id 字段，该字段将包含用户表的“id”字段。

例如

编号 | 用户 ID | 产品名称 | 产品描述

如果您想根据特定用户选择产品

```
SELECT * FROM products WHERE user_id = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:48:52.330

正如@Dragon 建议的那样，您需要在产品和用户表之间建立多对多关系。假设您有`user_products`两个字段`userId`和`productId`.

现在您可以通过在这个新表中插入一个条目来为一个人分配尽可能多的产品，例如 userId 是 100，productId 是 10,11,12

```
 INSERT INTO user_products (userId,productId) VALUES (100, 10);
 INSERT INTO user_products (userId,productId) VALUES (100, 11); 
```

希望你有一个想法！

# ubuntu-12.04 - Leda 6.3 Ubuntu 上的免费版

> ID：12680759
> 
> 赞同：0
> 
> 时间：2012-10-01T20:42:49.043
> 
> 标签：ubuntu-12.04, leda

我是 LEDA 6.3 的新手，我想在 ubuntu 上使用它。我下载了 LEDA 的免费版，但无法按照说明设置路径。

我必须在免费版中设置路径吗？非常感谢任何安装帮助。

如何运行和编译我的 LEDA 项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T15:13:28.607

1.  LEDA 6.3，免费版包括：libleda.so、libleda.a、头文件

2.  提炼：

    ```
    gunzip your_donwload_file.tar.gz
    tar xvf your_download_file.tar 
    ```

3.  HelloWorld 生成文件

    ```
    CXXFLAGS = -DLEDA_MULTI_THREAD

    LEDAROOT = path_to_your_leda_folder
    OBJS = HelloWorld.o

    LIBS = -Wl,-rpath=$(LEDAROOT) -L$(LEDAROOT) -lleda -lX11 -lm
    INCLUDE = -I$(LEDAROOT)/incl
    CXXFLAGS += $(INCLUDE)

    TARGET = HelloWorld

    $(TARGET): $(OBJS)
        $(CXX) -o $(TARGET) $(OBJS) $(LIBS)

    all: $(TARGET)

    clean:
        rm -f $(OBJS) $(TARGET) 
    ```

# ruby-on-rails - Rails“不是模块”错误

> ID：12680762
> 
> 赞同：30
> 
> 时间：2012-10-01T20:43:00.250
> 
> 标签：ruby-on-rails, ruby

我在“lib”rails 目录上建立了一个库。库的结构是这样的：

```
 lib/insurance/broker/fake_broker.rb 
```

该类类似于以下示例：

```
module Insurance
  module Broker
    class FakeBroker
      def initialize(user_id, user_secret)
        @user_id = user_id
        @user_secret = user_secret
      end
    end
  end
end 
```

因此，在我的 result_controller 中，我正在这样做：

```
require 'insurance/broker/fake_broker'

 def show
   broker = Insurance::Broker::FakeBroker.new(1234,1234)
 end 
```

但 Rails 返回此错误：

```
Insurance is not a module 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-10-01T20:56:54.040

Ruby 告诉您它找到了一个`Insurance`，但它不是一个模块。也许您已经定义了一个`Insurance` **类**？

根据周围的代码，如果您通过添加双冒号“重置”命名空间可能会有所帮助：

```
broker = ::Insurance::Broker::FakeBroker.new(1234,1234) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-20T17:12:14.313

一种可能性可能是这样的错误，即在目录级别，一个类也存在同名，因此它将引用该类。请检查目录。

# javascript - jQuery .addClass 未在 $(this) 上执行

> ID：12680763
> 
> 赞同：0
> 
> 时间：2012-10-01T20:43:02.153
> 
> 标签：javascript, jquery, html, addclass

当用户单击选定的类更改为单击的项目时，我正在尝试更改列表项。我有这个代码：

```
$(function() {
    $("a.product-page li").click(function(){
        $(this).parent("a").addClass("selected-page");
        $("#options a.selected-page").removeClass("selected-page");
    });
}); 
```

但是 removeClass 有效，但 addClass 无效。

这是[网站](http://www.danddcreativesolutions.co.uk/business-sites/powerplay/product.php?id=1&type=balls)。

HTML：

```
<ul id="options">
    <a href="#summary" id="summary" class="product-page selected-page"><span></span><li>Summary</li></a>
    <a href="#specs" id="specs" class="product-page"><span></span><li>Specs</li></a>
    <a href="#media" id="media" class="product-page"><span></span><li>Media</li></a>
    <a href="#reviews" id="review" class="product-page"><span></span><li>Reviews</li></a>
</ul> 
```

CSS：

```
ul#options {
    margin-left:0px;
}

ul#options li{
    list-style:none;
    padding: 10px 20px;
    background: #CCC;
    border-top: 1px #999 solid;
    border-left: 1px #999 solid;
    border-right: 1px #999 solid;
}

ul#options a{
    display:block;
    border:none !important;
}

ul#options a.selected-page span{
    position:absolute;
    width:0px;
    height:0px;
    border-width:10px;
    border-color:transparent #999999 transparent transparent;
    border-style:solid;
    margin-left:270px;
    margin-top:11px;
}

ul#options a:last-child li {
    border-bottom:1px #999 solid;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T20:43:53.167

这是因为您要立即删除该课程。翻转这两行，它会起作用。

```
$(function() {
    $("a.product-page li").click(function(){
        $("#options a.selected-page").removeClass("selected-page");
        $(this).parent("a").addClass("selected-page");
    });
}); 
```

如上面评论中所述，您的 HTML 格式也非常错误。这将需要解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T20:44:59.470

您正在添加类，然后在下一行中删除。

这里的顺序

```
$(this).parent("a").addClass("selected-page");
$("#options a.selected-page").removeClass("selected-page"); 
```

是不正确的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T20:46:34.863

*   `<a>`您应该将链接标签包装在标签内`li`，如下所示，

**HTML：**

```
<ul id="options">
    <li><a href="#summary" id="summary" class="product-page selected-page"><span></span>Summary</a></li>
    <li><a href="#specs" id="specs" class="product-page"><span></span>Specs</a></li>
    <li><a href="#media" id="media" class="product-page"><span></span>Media</a></li>
    <li><a href="#reviews" id="review" class="product-page"><span></span>Reviews</a></li>
</ul> 
```

*   您正在删除刚刚添加的课程。您可以将删除类移到 addclass 上方，或者在删除时使用不排除它。

**代码：**

```
$(function() {
    $("a.product-page", $('#options')).click(function(){
        $(this).addClass("selected-page");
        $("#options a.selected-page").not(this).removeClass("selected-page");            
    });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T20:50:23.397

反转线条

```
 $(this).parent("a").addClass("selected-page");
    $("#options a.selected-page").removeClass("selected-page"); 
```

# regex - Perl 正则表达式匹配大型 Unicode 代码点

> ID：12680767
> 
> 赞同：8
> 
> 时间：2012-10-01T20:43:17.177
> 
> 标签：regex, perl, unicode, encoding

我正在尝试用单引号或双引号替换各种字符。

这是我的测试文件：

```
# Replace all with double quotes
＂ fullwidth
“ left
” right
„ low
" normal

# Replace all with single quotes
' normal
‘ left
’ right
‚ low
‛ reverse
` backtick 
```

我正在尝试这样做...

```
perl -Mutf8 -pi -e "s/[\x{2018}\x{201A}\x{201B}\x{FF07}\x{2019}\x{60}]/'/ug" test.txt
perl -Mutf8 -pi -e 's/[\x{FF02}\x{201C}\x{201D}\x{201E}]/"/ug' text.txt 
```

但只有反引号字符被正确替换。我认为这与其他代码点太大有关，但我找不到任何关于此的文档。

在这里，我有一个转储 Unicode 代码点[的单行](https://en.wikipedia.org/wiki/One-liner_program)代码，以验证它们是否与我的正则表达式匹配。

```
$ awk -F\  '{print $1}' test.txt | \
    perl -C7 -ne 'for(split(//)){print sprintf("U+%04X", ord)." ".$_."\n"}'

U+FF02 ＂
U+201C “
U+201D ”
U+201E „
U+0022 "

U+0027 '
U+2018 ‘
U+2019 ’
U+201A ‚
U+201B ‛
U+0060 ` 
```

为什么我的正则表达式不匹配？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-01T20:49:19.560

它不匹配，因为您忘记了`-CSAD` 对 Perl 的调用，并且没有`$PERL_UNICODE`在您的环境中设置。您只是说`-Mutf8`要宣布您的源代码采用该编码。这不会影响您的 I/O。

你需要：

```
$ perl -CSAD -pi.orig -e "s/[\x{2018}\x{201A}\x{201B}\x{FF07}\x{2019}\x{60}]/'/g" test.txt 
```

[我确实在这个答案](https://stackoverflow.com/questions/6162484/why-does-modern-perl-avoid-utf-8-by-default/6163129#6163129)中提到过这种事情几次。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-01T20:57:42.380

使用`use utf8;`，您告诉 Perl 您的源代码是 UTF-8。这是无用的（尽管无害），因为您已将源代码限制为 ASCII。

使用`/u`, 你告诉 Perl 使用 , `\s`,`\d`的Unicode 定义`\w`。这是无用的（尽管无害），因为您不使用任何这些模式。

您没有对输入进行解码，因此您的输入仅由字节组成，因此您的类中的大多数字符（例如`\x{2018}`）不可能匹配任何内容。你需要解码你的输入（当然，编码你的输出）。使用`-CSD`可能会这样做。

```
perl -CSD -i -pe'
   s/[\x{2018}\x{201A}\x{201B}\x{FF07}\x{2019}\x{60}]/\x27/g;
   s/[\x{FF02}\x{201C}\x{201D}\x{201E}]/"/g;
' text.txt 
```

# php - 每年循环自动递增年份

> ID：12680777
> 
> 赞同：9
> 
> 时间：2012-10-01T20:43:45.213
> 
> 标签：php

> **可能重复：**
> [如何在 PHP 中将日期增加 1（日/年）？](https://stackoverflow.com/questions/5381330/how-to-increment-date-with-1-day-year-in-php)

我不确定从哪里开始，但我试图让一年从 1928 年开始，到 1948 年停止，并且每年都会增加一年，所以自 2012 年以来，日期范围是 1928 - 1948 年，而 2013 年将是 1929 年- 1949 和 2014 将是 1930 - 1950 等等......

现在我只有一个基本的循环来确定何时开始和停止这些年，但它不是太动态，就像我说的那样，我几乎对除日期（'Y'）+1 之外的从哪里开始一无所知。

```
for($i=1928;$i<=date('Y');$i++)
{
    echo '<option value='.$i.'>'.$i.'</option>';
    if($i == '1948'){break;}
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-01T20:45:05.677

所以你想让它在当年负 84 和当年负 64 之间变化吗？使用此代码：

```
$firstYear = (int)date('Y') - 84;
$lastYear = $firstYear + 20;
for($i=$firstYear;$i<=$lastYear;$i++)
{
    echo '<option value='.$i.'>'.$i.'</option>';
} 
```

编辑：更新性能。当前年份在循环之前确定（根据 Pitchinnate 的评论）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T20:46:39.160

试试这个：

```
$year = date('Y');
$add = $year - 2012;
$min = 1928 + $add;
$max = $min + 20;
for($i=$min;$i<=$max;$i++)
{
    echo '<option value='.$i.'>'.$i.'</option>';
} 
```

对 for 循环进行 date('Y') 或任何评估并不是一个好主意，因为每次循环都会计算它。[关于这个的文章](http://www.codeforest.net/php-mythbusters-count-inside-for-loop-is-slow)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T20:48:26.033

```
for($i =0; $i <= 20 ;$i++)
{
    $year = date('Y') - 84 + $i;
    echo '<option value='.$year.'>'.$year.'</option>';
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-01T20:51:05.527

像这样的东西？

```
$base_year = 2012;
$start_year = $base_year - 84;
$end_year = $start_year + 20;

for( $i = $start_year; $i <= $end_year; $i++)
{   
    echo '<option value='.$i.'>'.$i.'</option>';
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-01T20:58:52.393

看起来您有一个常数，您希望日期范围与当前年份相差多远，您可以使用它来编写一个适合您的循环。

由于现在是 2012 年，而您希望在 2012 年时范围从 1928 开始，那么我们可以使用 2012 - 1928 = 84，因此范围开始的年份应该总是比当前年份少 84。

因此我们可以编写如下代码：

```
$startingYear = date('Y') - 84;
$endingYear = $startingYear + 20;

for ($i = $startingYear;$i <= $endingYear;$i++)
{
    echo '<option value='.$i.'>'.$i.'</option>';
} 
```

# php - PHP - MySQL - GROUP BY / ORDER BY？错误的结果输出

> ID：12680787
> 
> 赞同：0
> 
> 时间：2012-10-01T20:44:30.030
> 
> 标签：php, mysql

我对 MySQL 还很陌生，我遇到了这个问题，我已经寻求帮助，但找不到答案（可能是因为我不确定要搜索什么）。我确信有一个简单的解决方案。

我有一个像这样的简单 MySQL 表：

```
id   |   referenceid   |   status
40       104702            4
39       104720            2
38       104720            0
37       104719            2
36       104719            0
35       104702            2
34       104702            0
41       104719            5 
```

我想获取一个将产生以下输出的数组：

对于每个唯一的“referenceid”字段，我想知道最高的“ID”（即最近的）及其“状态”。

所以我试过这个查询：

```
$result = mysql_query(
  "SELECT status,id,referenceid 
   FROM image_status_tracking 
   GROUP BY referenceid",$db);

while ($row = mysql_fetch_array($result)) {
  $id = $row['id'];
  $status = $row['status'];
  $referenceid = $row['referenceid'];
  echo "ID $id, REFID $referenceid, Status $status <br />";
} 
```

这给出了这个输出：

```
ID 40, REFID 104702, Status 4

ID 37, REFID 104719, Status 2

ID 39, REFID 104720, Status 2 
```

但这不是我希望的结果。参考 ID 104719 的 ID 和状态应该是 41 和 5，而不是 37 和 2。

我无法弄清楚如何获取每个参考 ID 的最新 ID 行输出。

我注意到，在 PHPMYADMIN 中（您可以在上表中看到），ID 以相反的顺序列出，最新的 ID 在底部。我不确定这是否与这个问题有关。

我希望这很清楚，我相信这是一件简单的事情。

感谢您的阅读。

詹姆士

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T20:54:03.690

从记忆中打字，所以你可能需要稍微纠正一下语法，但我认为这个概念应该有效。

```
select * 
  from image_status_tracking 
 where id in (
              select max(id) from image_status_tracking 
              GROUP BY referenceid
             ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:57:26.903

您的查询不符合您的要求。对于每个参考 id，它会选择一个随机的 id 和状态。这是 MySQL 的一个（错误）功能，称为隐藏列。

你想要的更像是：

```
select ist.*
from image_status_tracking ist join
     (SELECT referenceid, max(id) as maxid
      FROM image_status_tracking 
      GROUP BY referenceid
    ) r
    on ist.referenceid = r.referenceid 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T21:05:25.497

试试这个...

```
 SELECT MAX(ID), Status From image_status_tracking 
       GROUP BY referenceid 
```

# javascript - 是否可以创建位置实例？

> ID：12680790
> 
> 赞同：7
> 
> 时间：2012-10-01T20:44:50.640
> 
> 标签：javascript

当我输入`window`控制台时。控制台显示`window`是`Window`. 是否可以使用`new Window()`. 我试过了，但它抛出错误**TypeError: Illegal constructor**

我的问题与`Location`对象有关。我可以使用创建一个新对象`Location`吗？我需要它，以便我可以将`location`对象上可用的方法应用于我的链接。

我试图访问 Location 对象但没有成功。

我正在使用`Chrome console`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T21:01:36.210

尝试使用`Location`来操作任意 URI 将*无法*正常工作。`Location`对象/类型*不是*一般的URI 容器，而是与 DOM 及其导航状态的*特殊约定。*

我通过谷歌 YMMV找到[了 webr3 的这个 URI JavaScript 类型：](https://github.com/webr3/URI)

> JavaScript 的 URI 类型
> 
> *   支持各种 URI（URL、URN、任何方案）。
> *   相对 URI 解析
> *   所有类都扩展了本机 String 实现。
> *   URI 规范的纯 ECMA-262 实现 (RFC-3986)
> *   工作客户端或服务器端，（V8 / node.js 兼容）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-11-24T14:40:01.887

尽管这个问题已经很老了，但无论如何将答案发布为使用本机 HTML Web API 被认为是一种很好的做法。

## 解决方案

*   HTML Web API [URL](https://developer.mozilla.org/en/docs/Web/API/URL)允许我们创建一个具有以下属性的 URL 对象。
*   该对象的打字稿等效项如下所示 -

```
interface URL {
    hash: string;
    host: string;
    hostname: string;
    href: string;
    readonly origin: string;
    password: string;
    pathname: string;
    port: string;
    protocol: string;
    search: string;
    username: string;
    readonly searchParams: URLSearchParams;
    toString(): string;
} 
```

* * *

## 例子

举个例子，

```
var url = new URL('http://localhost:8081/route1/route2?q=test#route3/route4'); 
```

给你以下对象-

```
{
    hash: "#route3/route4"
    host: "localhost:8081"
    hostname: "localhost"
    href: "http://localhost:8081/route1/route2?q=test#route3/route4"
    origin: "http://localhost:8081"
    password: ""
    pathname: "/route1/route2"
    port: "8081"
    protocol: "http:"
    search: "?q=test"
    searchParams: URLSearchParams {}
    username: ""
} 
```

* * *

## 兼容性检查

使用前请检查[兼容性](https://developer.mozilla.org/en/docs/Web/API/URL#Browser_compatibility)。

我希望这个解决方案对你有用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-01T20:50:56.727

不，你不能。一个浏览器窗口有一个 的实例，`window`一个窗口有一个`location`. 试图创建多个实例`window`或`window.location`似乎表明概念错误。

如果我理解您想要正确执行的操作，您应该创建一个`anchor`使用 javascript 操作的元素：

```
var url = document.createElement('a');
url.href = "http://www.example.com/some/path?name=value#anchor";
var protocol = url.protocol;
var hash = url.hash;

alert('protocol: ' + protocol);
alert('hash: ' + hash); 
```

或者，如果你已经有一个锚，你可以使用

```
var url = document.getElementById('myanchorid'); 
```

​</p>

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T20:56:09.960

将对象想象`window`为单例。您不能创建它的新实例。这意味着什么？一个新的`Window`内部`Window`会是什么？它与 a 的`location`对象类似`Window`。每个`Window`都有一个`location`，但`Window`不能同时在两个`location`s 中。

修改`location`一个`Window`用途：

```
window.location.href = "http://www.google.com"; 
```

要创建一个新的（子）`Window`——一个弹出窗口——使用对象的`open`方法`window`：

```
window.open('http://www.example.com'); 
```

要更改链接的“位置”，请修改链接的`href`属性。例如，要修改 HTML 链接：

```
<a href="http://www.google.com" id="mylink">Visit Website</a>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

... 采用 ...

```
document.getElementById("mylink").href = "http://www.yahoo.com"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-25T21:43:08.430

**不**，您不能自己创建新`Location`对象。

但是，您可以非常接近。我构建了一个小型 (~1kB) 库，它提供了一个自定义`Location`函数，其工作方式与您期望的标准`Location`函数一样：

## [外置](https://npmjs.com/package/ulocation)

有了它，您可以像这样创建新的位置对象：

```
var x = new Location('https://joe:secret@example.com:8080/path?q=test#hash');
console.info(x.protocol);  // > 'https:'
console.info(x.hostname);  // > 'example.com'
console.info(x.port);      // > '8080'
console.info(x.pathname);  // > '/path'
console.info(x.search);    // > '?q=test'
console.info(x.hash);      // > '#hash' 
```

创建的位置对象与`window.location`对象或锚点非常相似。如果设置`href`，所有其他字段会自动更新：

```
x.href = 'http://www.example.org/wow'
console.info(x.protocol);  // > 'http:'
console.info(x.hostname);  // > 'www.example.org'
console.info(x.port);      // > ''
console.info(x.pathname);  // > '/wow'
console.info(x.search);    // > ''
console.info(x.hash);      // > '' 
```

`'change'`它甚至会在您可以侦听的 URL 更改时发出事件：

```
x.on('change', function(){
  console.info(this.href);
})

x.href= 'https://stackoverflow.com'  // > 'https://stackoverflow.com' 
```

它可以在 Node 和浏览器上运行，但是由于它的体积很小，所以没有单独的 Web 下载；使用 Webpack 或 Browserify 将它包含在你的包中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-28T11:31:30.120

根据您需要`Location`做什么，您可以。`Location`我使用下面的代码为单元测试创​​建了一个。

```
const windowLocation: Location = {
    host: 'localhost:4200',
    protocol: 'http:',
    ancestorOrigins: null,
    hash: null,
    href: null,
    hostname: null,
    origin: null,
    pathname: null,
    port: null,
    search: null,
    assign: null,
    reload: null,
    replace: null,
}; 
```

# android - 如何使用 Android 设备控制 Arduino 和 WiFly 扩展板

> ID：12680791
> 
> 赞同：1
> 
> 时间：2012-10-01T20:44:53.103
> 
> 标签：android, tcp, arduino, wireless

我正在尝试使用我的 Android 手机控制[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno) R3 板 + [WiFly RN-131C 扩展](https://www.sparkfun.com/products/9954)板（即类似于[此处](http://www.youtube.com/watch?v=cxYo-rx89Y4)显示的内容，尽管我认为在这种情况下 Arduino 通过以太网屏蔽）。

Arduino 可以通过 WiFly shield 连接到我的本地网络，Android 手机也连接到同一网络。

我一直在尝试寻找一些做类似事情的教程（不幸的是，上面视频中给出的教程的链接已损坏），我找到了一些，但我在如何发送命令的步骤上遇到了麻烦Android 手机到 Arduino。许多教程展示了 Android 手机和 Arduino 如何通过蓝牙或[使用两个 Android 设备](http://www.cellbots.com/resources/getting-started/)进行通信，但我正在寻找通过[Wi-Fi](http://en.wikipedia.org/wiki/Wi-Fi)本地网络进行的通信。

例如，我在一辆[4x4 遥控车上](http://www.instructables.com/id/How-to-build-an-Arduino-WiFi-4x4-with-Android-Cont/?ALLSTEPS)发现了这个很好的教程，这个人很友善地提供[了他的 Android 应用程序的源代码](http://www.instructables.com/files/orig/F4M/JD8F/GK0YV2SQ/F4MJD8FGK0YV2SQ.zip)。但是，我没有在代码中看到实际通信发生的位置（即发送命令的位置）。

根据我的阅读，我必须通过 TCP 连接创建一个套接字，但我不知道在 Android 中是如何完成的...... :-/ 我是 Arduino 新手，但我有一些 Android 编程经验。 . 除了使用网络套接字和 TCP！

关于 Android 手机如何通过 TCP 与 Arduino 进行通信的具体示例代码是什么？

PS：另一个很好的教程可以在*[Experimenting with Android and Arduino](http://blog.mawqey.com/2011/01/24/experimenting-with-android-and-arduino/#TCP_To_Serial_Communication_Server)*中找到，但我不知道 Python 并且不能完全按照说明进行操作 :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:05:30.010

我用UDP做了类似的事情。TCP 将需要稍微不同的实现，但希望这能很好地推动正确的方向。

看看我的Android代码[**在这里**](http://code.google.com/p/power-wheelino/source/browse/trunk/0.1a/client/android/PowerWheelino/src/com/powerwheelino/)

## udpClient.java：

```
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;

import android.util.Log;

public class UdpClient {
         String messageStr;
         DatagramSocket s;;
         int server_port;
         InetAddress local;
         int msg_length;
         byte[] message;

        public UdpClient (String ipAddress, int port){
                  server_port = port;
                  try {
                        local = InetAddress.getByName(ipAddress);
                        s = new DatagramSocket();
                } catch (Exception e) {
                        e.printStackTrace();
                        Log.d("Powerwheelino",e.getStackTrace() + "error");
//                      DatagramPacket rPacket = new DatagramPacket()
//                      s.receive(rPacket);

                }               
        }

        public boolean sendData(byte drive, byte steering){
                byte drvByte = (byte) (drive & 0xFF);
                byte steerByte = (byte) (steering & 0xFF);
                message = new byte[2];
                message[0] = drvByte;
                message[1] = steerByte;
                msg_length = message.length;
                //message = messageStr.getBytes();
                try {   
                     DatagramPacket p = new DatagramPacket(message, msg_length,local,server_port);
                     s.send(p);
                } catch (Exception e) {
                        Log.d("Powerwheelino", e.getStackTrace() +"ERROR ");
                        e.printStackTrace();
                        return false;
                }
                return true;
        }

        public boolean isConnected (){
                return s.isConnected();
        }

} 
```

# jquery - jquery每个添加类之间有延迟

> ID：12680803
> 
> 赞同：8
> 
> 时间：2012-10-01T20:45:41.593
> 
> 标签：jquery, loops, delay, each, setinterval

我需要遍历每个 div .row 以添加或删除具有 CSS3 3D 变换效果的翻转类。

当我使用 jquery each() 将此添加/删除类应用于每个“.row”时，所有 div 都会同时添加或删除类“.flip”。我需要延迟这个，所以它看起来像多米诺骨牌效应。

知道如何让这个工作吗？或者如何逐个添加/删除翻转类？

这是我发现的，但它不起作用：

```
 $('.row').each(function(i){
    if($(this).hasClass('flip')){
      $(this).delay(i*500).removeClass('flip');
    }else{
      $(this).delay(i*500).addClass('flip');
    }
  }); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-01T21:01:42.720

jQuery`delay()`方法仅使用延迟串在一起的方法队列中的下一部分，`$(obj).delay(500).addClass('flip');` 它不会延迟所有后续代码行。（查看第[一个示例](http://api.jquery.com/delay/)以及代码如何并排运行动画）

尝试`setTimeout()`改用。

```
$('.row').each(function(i){
  var row = $(this);
  setTimeout(function() {
    row.toggleClass('flip');
  }, 500*i);
});​ 
```

[小提琴](http://jsfiddle.net/xPgJp/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T21:02:49.983

你必须用`setTimeout`它来做一个`delay`效果。

这里是 jsFiddle：http: **[//jsfiddle.net/xQkmB/1/](http://jsfiddle.net/xQkmB/1/)**

```
var i = 0;
var rows = $(".row");
show();

function show() {
    if (i < rows.length) {
        $(rows[i]).show();
        i++;
        setTimeout(show, 1000);
    }       
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T21:05:58.023

该`addClass`函数不是动画函数，因此它不会排队，因此无需等待`.delay()`完成即可立即运行。

我使用这个扩展来排队非动画 jQuery 调用：

```
(function($) {
    $.fn.queued = function() {
        var self = this;
        var func = arguments[0];
        var args = [].slice.call(arguments, 1);
        return this.queue(function() {
            $.fn[func].apply(self, args).dequeue();
        });
    }
}(jQuery)); 
```

在您的代码中将这样调用：

```
$('.row').each(function(i){
    $(this).delay(i*500).queued('toggleClass', 'flip');
} 
```

注意：使用`toggleClass`而不是条件添加/删除。

# android - 如何从活动启动/停止服务？

> ID：12680805
> 
> 赞同：0
> 
> 时间：2012-10-01T20:45:49.550
> 
> 标签：android

我的主要活动中有一个切换按钮。我希望服务在切换按钮打开时启动，在关闭时停止。活动可能随时关闭。我希望活动“记住”它在活动关闭之前启动的服务，并且该活动应该能够关闭它在上次运行时启动的服务。

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:51:52.917

先阅读这个[Service](http://developer.android.com/reference/android/app/Service.html)，然后用这些家伙来控制它：[startService()](http://developer.android.com/reference/android/content/Context.html#startService%28android.content.Intent%29)和[stopService()](http://developer.android.com/reference/android/content/Context.html#stopService%28android.content.Intent%29)。关于记住，您可以使用静态变量来检查服务的状态，并在您的服务的 onCreate 和 onDestroy 上更改它，这就像解决方案之一。

# .net - Web 上的 .NET Async - 如果我可以旋转新的云实例，那有什么意义？

> ID：12680806
> 
> 赞同：2
> 
> 时间：2012-10-01T20:46:06.803
> 
> 标签：.net, architecture, asynchronous, cloud

如果异步的目的是在单个盒子上启用更多请求，那么云提供的尽可能多的实例是否可以消除单个盒子上大量请求的需求，从而消除我对异步的需求？

我并不是要为无性能或草率编码提出论据，我只是想知道是否还有其他技术问题可能通过添加更多框来避免异步 - 与数据库的连接过多？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T20:47:25.427

> 如果异步的目的是在单个盒子上启用更多请求，那么云提供的尽可能多的实例是否可以消除单个盒子上大量请求的需求，从而消除我对异步的需求？

不，它并没有否定这种需要。在一个盒子上允许更多请求可以减少您需要的云实例总数，从而显着降低成本。由于您按实例付费（即：计算时间），因此从每个实例中获得更多工作直接影响您的总体成本。

# three.js - THREE.JS - 建筑物窗户中的倒影

> ID：12680809
> 
> 赞同：1
> 
> 时间：2012-10-01T20:46:19.547
> 
> 标签：three.js, blender

我用 Blender 创建了一个建筑物并将其导入到 three.js 中。我设法用立方体相机和这条线给建筑物的窗户一个半反射效果：

```
geometry.materials[3] = new THREE.MeshLambertMaterial( { color: 0x0000ff, ambient:0x0000aa, envMap: cubeCamera.renderTarget, reflectivity: 0.7, refractionRatio: 0.25 } ); 
```

geometry.materials[3] 是我窗户的 Blender 材质。问题是，我创建的这座建筑是一座摩天大楼，而且恰好有很多窗户。如果我像上面那样做，我会在每个窗户上得到相同的反射，因为窗户之间还有其他材料，并且每个窗户材料都被墙材料与下一个窗户材料隔离开来。但我想在所有窗户上都有一个大反射，就像整栋建筑只由一种材料制成一样。反射应该只出现在窗户上，而不应该出现在墙上。窗户都是相同的材料。有没有办法归档这种行为？

# java - Java 使用 Ghostscript 将 PDF 转换为 TIFF

> ID：12680815
> 
> 赞同：1
> 
> 时间：2012-10-01T20:46:36.053
> 
> 标签：java, pdf, tiff, ghostscript

我正在使用 Ghostscript API 将 PDF 转换为单页 TIFF 图像。

但是我收到一个错误：

```
java.io.IOException \
   Temporary file \
   C:\DOCUME~1\LOCALS~1\Temp\ghost4j\net.sf.ghost4j.document.PDFDocument \
   cannot be deleted 
```

这个临时文件是在 Simplerenderer 对象渲染文档并保存在 List≶image> 时创建的。

可以在进程运行期间删除此临时文件吗？我是否必须使用一些等待方法才能完成该过程？是否涉及任何锁定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:16:25.523

[我认为这是java](/questions/tagged/java "显示标记为“java”的问题")程序员众所周知的事实，只要文件上的某些流是打开的，它就会被锁定（至少对于 JVM 的 Windows 实现）。所以无法删除。

在尝试删除文件之前，您是否正确关闭了流？

也可以看看

*   [删除java中的临时文件](https://stackoverflow.com/questions/1026479/delete-temporary-file-in-java)
*   [我无法在java中删除文件](https://stackoverflow.com/questions/991489/i-cant-delete-a-file-in-java)
*   [Java 无缘无故地锁定文件](https://stackoverflow.com/questions/586830/java-keeps-lock-on-files-for-no-apparent-reason)

# linux - 类 Unix 系统中的循环符号链接有什么用？

> ID：12680821
> 
> 赞同：5
> 
> 时间：2012-10-01T20:46:47.457
> 
> 标签：linux, symlink

我正在浏览 Linux 机器上的目录，在进行详细列表时，我注意到一个链接指向自身，例如：

```
somelink -> /path/to/directory/somelink 
```

我想知道这样做的原因是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T20:50:29.270

如果`somelink`是 in`/path/to/directory`那么这是一个无效的符号链接。如果你尝试访问它，文件系统会给你一个错误（可能是*符号链接的级别太多**）。创建时可能是拼写错误（或其他错误），或者符号链接以某种方式移动并最终链接到自身。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T21:09:08.230

循环符号链接没有充分的理由。很可能，它是偶然创建的。

# node.js - 有没有办法知道 Node.js 上的 Socket.IO 丢弃了多少易失性消息？

> ID：12680822
> 
> 赞同：3
> 
> 时间：2012-10-01T20:46:47.033
> 
> 标签：node.js, socket.io, volatile

我四处搜索了一下，没有发现任何关于这个特定问题的信息。我目前正在开发涉及 Node.js 上的 Socket.IO 的东西。

我的问题很简单：有没有办法知道从 socket.volatile.emit() 中删除了多少消息？

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:58:42.293

[https://github.com/LearnBoost/socket.io/blob/master/lib/transport.js#L524-534](https://github.com/LearnBoost/socket.io/blob/master/lib/transport.js#L524-534)

没有计数器增加，但你可以打开日志来看看。

# java - Java：如何从哈希表中找到所有“具有最大值的条目对”

> ID：12680829
> 
> 赞同：2
> 
> 时间：2012-10-01T20:47:09.153
> 
> 标签：java, hashtable, max

我想从哈希表中找到所有“具有最大值的条目对”，我的哈希表是这样的——

```
 Hashtable<Integer, Integer> ht = new Hashtable<Integer, Integer>();
    ht.put(1, 4);
    ht.put(2, 2);
    ht.put(3, 4);
    ht.put(4, 2);
    ht.put(5, 4); 
```

我想找到这些键值对：`<1,4>, <3,4>, <5,4>`，我知道可以通过首先找到最大值条目，然后通过哈希表重复查找其他类似条目来完成。但我想知道是否有任何优雅/更简单的方法可以做到这一点。

任何的想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T21:03:41.143

```
 int max = Integer.MIN_VALUE;
    final List< Entry< Integer, Integer > > maxList =
            new ArrayList< Entry< Integer, Integer > >();

    for ( final Entry< Integer, Integer > entry : ht.entrySet() ) {
        if ( max < entry.getValue() ) { 
            max = entry.getValue();
            maxList.clear();
        }
        if ( max == entry.getValue() )
            maxList.add( entry );
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T21:59:36.717

[您可以使用Eclipse Collections](https://github.com/eclipse/eclipse-collections)中的一些迭代模式来完成此操作。

```
MutableMap<Integer, Integer> map = UnifiedMap.newWithKeysValues(1, 4)
    .withKeyValue(2, 2)
    .withKeyValue(3, 4)
    .withKeyValue(4, 2)
    .withKeyValue(5, 4);

Integer maxValue = map.valuesView().max();
RichIterable<Pair<Integer,Integer>> pairs =
    map.keyValuesView().select(
        Predicates.attributeEqual(Functions.<Integer>secondOfPair(), maxValue));

Assert.assertEquals(
    HashBag.newBagWith(Tuples.pair(1, 4), Tuples.pair(3, 4), Tuples.pair(5, 4)),
    pairs.toBag()); 
```

如果您只需要每对中的密钥，则可以收集它们。

```
RichIterable<Integer> maxKeys = pairs.collect(Functions.<Integer>firstOfPair()); 
```

注意：我是 Eclipse Collections 的提交者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T20:52:45.150

```
List<Integer> keysForMaximums = new ArrayList<Integer>();
int currentMax = Integer.MIN_VALUE;
while(iterator.hasNext()) {
    int key = /*get key from iterator*/;
    int val = /*get value from iterator*/;
    if(val > currentMax) {
        currentMax = val;
        keysForMaximums.clear();
    }
    if(val == currentMax)
        keysForMaximums.add(key);
} 
```

然后 keysForMaximum 将是包含在地图中找到的最大值的键的列表

这是做什么的，它创建了一个空的整数列表，以及一个表示找到的最大数的数字（默认为最低 int 值），然后它遍历地图并检查这些人是否有更大的最大值，清除列表并设置他到最大的最大值，然后如果他是最大的最大值，则添加他的密钥

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T20:57:23.353

据我所知，这些天没有使用哈希表。
我会使用 HashMap（它也是 KeyValue-List）。

你可以迭代你的完整地图

```
for (Entry<Integer, Integer> entry : myMap.entrySet()) {  
    //  Your stuff here  
} 
```

使用这种方法，您可以获得值和键。
有关更多信息，请参阅[Java 文档](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#entrySet%28%29)。

最好的祝福

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T20:56:19.133

您可以按值排序，然后向后搜索，直到找到一个值，即 != 最后一个。

但我也喜欢你的方法。它具有线性复杂性，即适用于大多数用例。

# hibernate - 使用休眠或 TomEE？

> ID：12680833
> 
> 赞同：0
> 
> 时间：2012-10-01T20:47:24.167
> 
> 标签：hibernate, jakarta-ee, jpa, apache-tomee

我有一个基于 EJB 的库，需要对其进行修改以与 Tomcat 应用程序服务器兼容（即没有 JaveEE）。我在 Hibernate 上浏览了一下，感到很困惑。

显然，有一个使用 .cfg 文件作为基础的自然 Hibernate 分支，它与 Java SE 兼容，然后有一个基于 JPA 的 Hibernate 分支，它有条件地依赖于 Java EE。我还觉得烦人的一件事是某些接口显然不受支持——例如 CriteriaQuery。

所以我想，我必须去自然的 Hibernate 分支来实现摆脱 Java EE 的目标（考虑到差异，这很烦人）。OTOH，还有兼容 Tomcat 的 TomEE，大概让我保持大部分代码不变

如果我能得到一些反馈，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T18:03:32.130

几点：

*   Hibernate 是一种 JPA 实现，是三种实现之一。Gavin King，Hibernate 的创建者，在 JPA 上工作非常努力。从应用程序中删除所有 JPA 使用是向后移动，而不是向前移动。你只会失去便携性而没有收获。
*   您可以在有或没有 TomEE 的情况下在 Tomcat 中使用 JPA。

就讨厌 Java EE 并想摆脱它而言，这确实成为了一项不可能完成的任务。所有这些技术都是 Java EE 的一部分：

*   小服务程序
*   JSP
*   JSF
*   JPA
*   EJB
*   CDI / @注入
*   JAX-RS
*   JAX-WS
*   管理系统
*   Bean 验证

将其中一些标记为 JavaEE 而将一些标记为非 JavaEE 是一种否定形式。它们都是作为 JavaEE 的一部分创建和发布的。

解决一些反 JavaEE 营销所造成的混乱几乎是不可能的。真正具有破坏性的是，几乎不可能找到不使用 3 种或更多 JavaEE 技术的“非 JavaEE”应用程序。

为了解决“重”问题和“太多”问题，2010 年创建了 Web Profile，以便可以在不牺牲可移植性的情况下创建更小的运行时。这包括：

*   小服务程序
*   JSP
*   JSF
*   JPA
*   EJB（精简版）
*   CDI / @注入
*   Bean 验证

没有分布式事务，也没有繁重的东西。如果您堆叠 Tomcat、Hibernate 和 Spring，您将包括：

*   小服务程序
*   JSP
*   JPA
*   @注入
*   Bean 验证

无论您是否选择使用这些 API，它们都将存在。

使用实现本身但不使用标准 API 几乎没有价值。这是一场虚假的胜利。您仍将使用相同的运行时代码，只是没有可移植性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T20:37:22.913

今天， spring*框架*或 JavaEE 已经足够接近，可以根据您的喜好进行选择（个人认为是 Java EE，但您更喜欢宝马还是梅赛德斯？：p）

也就是说，JPA 规范不是最好的规范，您可以轻松使用特定的行为链接到 hibernate/openjpa/eclipselink，甚至隐藏在 javax.persistence 包后面

据说它使 Java 开发曾经学过的东西轻松很多

所以我的建议：使用 TomEE，如果你发现某些东西真的阻碍了重写你不想要的东西，但 IMO 你会浪费时间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T02:45:32.070

我不了解 TomEE——我希望如果您只是想部署到不同的 J2EE 容器中，那么您已经这样做了，并且不需要修改代码。

也就是说，这意味着你想远离 EE。

除非您已经或将需要“分布式事务”或消息传递支持（例如，到/来自 IBM 大型机），否则我认为 J2EE 在很大程度上是一个失败的体系结构。

Tomcat、Spring 和 Hibernate 几乎都是独立的（不使用 JPA 包装器或 API，它们大多只是从 Hibernate 最初的成功复制而来的额外盗版层）是我推荐的。

如果您为 HB 配置添加注释，则可以在代码中使用 Hibernate API 时使用/组合 JPA 的注释（有时它们具有更清晰的语法）。

干杯，希望这会有所帮助。

# c - 我可以使用临时地址结构调用 bind() 吗？

> ID：12680835
> 
> 赞同：2
> 
> 时间：2012-10-01T20:47:28.500
> 
> 标签：c, sockets

该`bind()`函数`const struct sockaddr *addr`作为参数之一。我可以传递一个临时`sockaddr`结构，它会在`bind()`调用后立即被删除吗？

```
void bindMe(int socket) {
    struct sockaddr_in addr = {...};
    bind(socket, (struct sockaddr_in*)&addr, sizeof(sockaddr_in));
}
// addr is no more exist after function calling, 
// but I still want to work with the socket. 
```

此外，POSIX 中有很多函数都指向结构。如何确定函数调用后是否可以释放结构？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T20:52:32.897

是的，你可以这么做。 [`bind`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/bind.html)是同步系统调用，所以一旦返回，内核就全部用参数完成了。

如果套接字是非阻塞的并`bind`返回`EINPROGRESS`以指示绑定正在异步发生，则释放结构仍然是安全的。当操作异步完成时，内核在内部复制结构。

> 如何确定函数调用后是否可以释放结构？

阅读文档。大多数 POSIX 函数是同步的，并且可以在函数返回后安全地释放参数，但这并不总是正确的。如果您不确定，请阅读文档。显然，如果您的程序中有多个线程，则不应在进行 API 调用时同时修改来自另一个线程的数据。

# ios - 如何在 UIScrollView 中为键盘实现 ResignFirst Responder？

> ID：12680839
> 
> 赞同：1
> 
> 时间：2012-10-01T20:47:41.260
> 
> 标签：ios, xcode, uiscrollview

> **可能重复：**
> [在 UITextField 之外的任何地方触摸时关闭键盘](https://stackoverflow.com/questions/11274119/dismiss-keyboard-on-touch-anywhere-outside-uitextfield)

我在我的应用程序中使用 UIScrollView。我放了几个文本字段和按钮。当他们触摸文本框之外时，我想隐藏我的键盘。（我的意思是他们将在 uiscrollview 上录制）。我已经尝试了很多东西...我使用 UIGestureRecognizer 但它不起作用...请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T21:31:10.647

这是刚刚尝试过的解决方案，它有效..希望有帮助

将以下代码添加到您的 viewDidLoad；

```
-(void)viewDidLoad {
    //create a tapGesture which calls a removeKeyboard method
    UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(removeKeyboard)];

    tapGesture.cancelsTouchesInView = NO;

    [self.yourScrollView addGestureRecognizer:tapGesture];
}

-(void)removeKeyboard {
    [self.yourTextField resignFirstResponder];
} 
```

希望有帮助....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:53:14.297

在您的视图中尝试以下代码...

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches] anyObject];
    if ([yourTextView isFirstResponder] && [touch view] != yourTextView) {
        [yourTextView resignFirstResponder];
    }
} 
```

# mysql - 在 MySQL 的文本字段中查询给定字符的最大长度

> ID：12680843
> 
> 赞同：0
> 
> 时间：2012-10-01T20:47:57.533
> 
> 标签：mysql

如何创建查询以查找文本字段中给定字符的最大长度？例如：

```
283948XXXX92388888888X92380XXXX0983XXXXXXXXXXXXXXXXXX45 
```

如果我希望字符为“8”，它将返回一个整数值“8”

如果我希望字符是“X”，它将返回一个整数值“18”

任何帮助将不胜感激！

-Raymosrunerx

PS：我正在使用 putty 并远程访问具有 MySQL 的服务器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:32:36.747

更简单的答案是你没有。您使用 Python 或 Perl 等脚本语言。

在 python 中获得字符串后，您可以执行以下操作：

```
def findLength(str,char):
    count =0
    max = 0
    for ch in str:
        if ch == char:
            count+=1
        else:
            if count > max:
                max = count
            count = 0
    return max

print findLength('283948XXXX92388888888X92380XXXX0983XXXXXXXXXXXXXXXXXX45','X') 
```

# google-app-engine - Google App Engine 中的 HTML 301 重定向

> ID：12680844
> 
> 赞同：7
> 
> 时间：2012-10-01T20:48:01.197
> 
> 标签：google-app-engine, redirect, http-status-code-301, domain-name

我有 4 个 URL 我想重定向到我的主页。它们都是常见的拼写错误，我希望覆盖我的基础，以便用户即使收到一封信也可以访问该网站。我将如何使用 Google App Engine 执行此操作？

我想我需要一个 python 处理程序来进行重定向，但这会是什么样子？任何资源或示例都会很棒。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T20:54:16.827

您可以简单地使用`self.redirect()`，您的请求将得到正确处理。

```
class PageHandler(webapp.RequestHandler):
  def get(self):
    self.redirect('/home/', permanent=True) 
```

您还可以使用 设置自定义状态`self.response.set_status(301)`。我建议您在文档中阅读更多内容：[Redirects, Headers and Status Codes](https://developers.google.com/appengine/docs/python/tools/webapp/redirects)。

# c# - 我需要设置自定义实体的 State 和 StatusCode

> ID：12680845
> 
> 赞同：4
> 
> 时间：2012-10-01T20:48:01.773
> 
> 标签：c#, dynamics-crm, dynamics-crm-2011

我需要使用**.Net CRM SDK**设置自定义实体的*State*和*StatusCode*。 以下代码执行，但当我检查实体表单时，StatusCode 没有更改。

 **```
private void SetState(Entity entity, int statuscode)
{
  SetStateRequest setState = new SetStateRequest
  {
    EntityMoniker = new EntityReference(
      entity.LogicalName, new Guid(entity.Id.ToString())),
    State = new OptionSetValue(0),
    Status = new OptionSetValue(statuscode)
  };
  SetStateResponse myres = (SetStateResponse)svc.Execute(setState);
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-02T10:00:34.193

您可以尝试以下代码，我使用此代码设置状态。

```
Microsoft.Xrm.Sdk.EntityReference moniker = new EntityReference();
moniker.LogicalName = "contract";
moniker.Id = newContractId;

Microsoft.Xrm.Sdk.OrganizationRequest request 
  = new Microsoft.Xrm.Sdk.OrganizationRequest() { RequestName = "SetState" };
request["EntityMoniker"] = moniker;
OptionSetValue state = new OptionSetValue(1);
OptionSetValue status = new OptionSetValue(2);
request["State"] = state;
request["Status"] = status;

_service.Execute(request); 
```

或者您可以像这样设置状态：

```
int statusCode = 123456;
entity["statuscode"] = new OptionSetValue(statusCode);
_service.Update(entity); 
```**

# git - 使用 DVCS 的多个代码库，复制一个功能？

> ID：12680849
> 
> 赞同：1
> 
> 时间：2012-10-01T20:48:26.270
> 
> 标签：git, dvcs

我还没有尝试过，但我认为它比我预期的要容易。

我正在制作一个包含两个代码库的项目。我自己的具有所有高级功能，而公共的具有较少的功能（仅使用免费提供的软件，因此可能具有较少的功能）。现在我当然有一个开发或功能分支，所以当它稳定时，我会将它放入我的主代码库中。

我的问题是，如果其他人将功能添加到有限的代码库中，我如何将其拉入我的主代码库？让我们假设他的开发分支是私有的，我只能在他的分支与有限的代码库合并后才能访问它。我无法提取代码库，因为它们会发生冲突。我该怎么办？有没有一种不奇怪的方法来区分更改并将其应用于我的全功能代码库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:14:34.780

如果历史非常不同，那么挑选正确的提交似乎是最简单的解决方案。
看：

*   “ [Git 挑选语法并合并分支](https://stackoverflow.com/questions/12626754/git-cherry-pick-syntax-and-merge-branches)”
*   “[在 Git 中挑选提交对象](https://stackoverflow.com/questions/12679017/picking-commit-objects-in-git)”（fetch + cherry-pick）

# jquery - 使用 jQuery 的主干集合自定义事件

> ID：12680851
> 
> 赞同：0
> 
> 时间：2012-10-01T20:48:32.117
> 
> 标签：jquery, events, backbone.js

Collection 实例可以绑定到自定义事件吗？我用 jQuery: 试过了`$(collectionInstance).on(eventsmap)`。

然后当我尝试检查注册事件时：

`console.log($.data(collectionInstance, 'events'));`

我得到绑定到实例的所有自定义事件。

但`$(collection).trigger('customevent');`不会触发此 customevent 并且不会调用事件处理程序。

当我尝试相同的操作时，`Backbone.View`我可以触发自定义事件而不会出现任何问题。为什么会这样？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:36:45.447

骨干集合[`Backbone.Events`](http://backbonejs.org/#Events)混合在一起，因此集合具有`on`、`off`和`trigger`方法。您想使用这些方法而不是尝试将集合包装在 jQuery 中：

```
collectionInstance.on('event', callback, context);
// One by one until you're done 
```

然后在其他地方：

```
collection.trigger('customevent'); 
```

# php - 显示 json 结果的 PHP 问题

> ID：12680852
> 
> 赞同：2
> 
> 时间：2012-10-01T20:48:44.527
> 
> 标签：php, json

首先，我对 PHP 非常陌生，所以我仍在尝试。我的问题是：我试图在 PHP 中回显 Bing API 结果。

这是一个 JSON 结果示例，我从中获得

```
$jsonobj = json_decode($response); 
```

（回复是我从 Bing 得到的，所以我只是粘贴了下面的回复 - 只需添加此信息，以防您想知道我从哪里得到`$jsonobj = json_decode($response);`）

```
{"d":{"results":[{"__metadata":{"uri":"https://api.datamarket.azure.com/Data.ashx/Bing/Search/Composite?Sources=\u0027web\u0027&Market=\u0027en-US\u0027&Query=\u0027php\u0027&Adult=\u0027off\u0027&$skip=0&$top=1","type":"ExpandableSearchResult"},"ID":"1c509d25-5ca4-4db5-bfc5-cafd6917e2c2","WebTotal":"10600000","WebOffset":"0","ImageTotal":"","ImageOffset":"","VideoTotal":"","VideoOffset":"","NewsTotal":"","NewsOffset":"","SpellingSuggestionsTotal":"","AlteredQuery":"","AlterationOverrideQuery":"","Web":[{"__metadata":{"uri":"https://api.datamarket.azure.com/Data.ashx/Bing/Search/ExpandableSearchResultSet(guid\u00271c509d25-5ca4-4db5-bfc5-cafd6917e2c2\u0027)/Web?$skip=0&$top=1","type":"WebResult"},"ID":"4cf2a8d6-21b7-433d-81e9-84e74091a44a","Title":"PHP: Hypertext Preprocessor","Description":"What is PHP? PHP is a widely-used general-purpose scripting language that is especially suited for Web development and can be embedded into HTML.","DisplayUrl":"www.php.net","Url":"http://www.php.net/"},{"__metadata":{"uri":"https://api.datamarket.azure.com/Data.ashx/Bing/Search/ExpandableSearchResultSet(guid\u00271c509d25-5ca4-4db5-bfc5-cafd6917e2c2\u0027)/Web?$skip=48&$top=1","type":"WebResult"},"ID":"2d8f8107-895e-4052-9edc-b656e74c3f2e","Title":"CakePHP: the rapid development php framework. Pages","Description":"Official website. Offers a manual for beginners and links towards the last version.","DisplayUrl":"cakephp.org","Url":"http://cakephp.org/"},{"__metadata":{"uri":"https://api.datamarket.azure.com/Data.ashx/Bing/Search/ExpandableSearchResultSet(guid\u00271c509d25-5ca4-4db5-bfc5-cafd6917e2c2\u0027)/Web?$skip=49&$top=1","type":"WebResult"},"ID":"816d781c-ff8b-4a60-b5b7-28d807bba28a","Title":"PHP Presents","Description":"Welcome to the PHP Presentation System. Here we list all of the available presentation categories stored within this system.","DisplayUrl":"talks.php.net","Url":"http://talks.php.net/"}],"Image":[],"Video":[],"News":[],"RelatedSearch":[],"SpellingSuggestions":[]}]}} 
```

现在，我知道我可以使用以下命令来回显 WebTotal：

```
foreach($jsonobj->d->results as $value) {
    echo $value->WebTotal;
} 
```

但是，我不知道如何回显实际结果，例如`Title`,`Description`和`Url`.

我试过了：

```
foreach($jsonobj->d->results as $value) {
    echo $value->Title."<br>";
    echo $value->Description."<br>";
    echo $value->Url."<br>";
} 
```

还有类似的东西：

```
foreach($jsonobj->d->results->Web as $value) {
    echo $value->Title."<br>";
    echo $value->Description."<br>";
    echo $value->Url."<br>";
} 
```

因为我认为将 Web 添加到`foreach`遗嘱中可能会呼应正确的价值观，但没有成功。

也许有人可以帮助我并告诉我我做错了什么？

我的任务是获得以下结果：

> 标题：PHP：超文本预处理器
> 
> 说明：什么是PHP？PHP 是一种广泛使用的通用脚本语言，特别适用于 Web 开发，并且可以嵌入到 HTML 中。
> 
> 网址：http://www.php.net/

然后，其他两个结果。

太感谢了 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T21:04:38.437

您可以按如下方式执行此操作：

```
foreach($jsonobj->d->results as $result) {
    foreach($result->Web as $value) {
        echo $value->Title;
        // and the same for the other properties
    }
} 
```

顺便说一句：你应该使用一个工具来格式化你的 json 字符串。这样会更清楚 json 数据的样子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:05:12.603

首先使用 print_r 方法，这样您就可以看到对象的外观，从而可以确定从哪里开始循环。

```
echo '<pre>';
print_r($jsonobj); 
```

然后将类型更改为数组，如 $array = (array) $jsonobj; 所以你可以将它用于 array_shift 函数（你可以使用这个函数调整你的数组）

[http://php.net/manual/en/function.array-shift.php](http://php.net/manual/en/function.array-shift.php)

# php - 如何比较 Doctrine2 中日期的一部分

> ID：12680854
> 
> 赞同：2
> 
> 时间：2012-10-01T20:48:53.227
> 
> 标签：php, date, doctrine-orm

如何在 DQL 中提取部分日期（例如月份）？

我正在尝试使用这样的查询：

```
$query = $qb->select('u')
->from('user', 'u')
->where('MONTH(u.birthdate)', $month)
->getQuery(); 
```

我正在尝试选择所有生日在当月的用户。这可能吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:10:49.853

尝试

```
->where('MONTH(u.birthdate)=:month')->setParameter("month", $month) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-27T05:02:31.287

要启用 MONTH、YEAR 等 MySQL 功能，您必须先安装并启用它们，您可以从 Benjamin Eberlei [Doctrine 2 Extensions获得它](https://github.com/beberlei/DoctrineExtensions.git)

并按照说明进行操作。

# azure - socket.io 与 SignalR

> ID：12680855
> 
> 赞同：6
> 
> 时间：2012-10-01T20:48:56.410
> 
> 标签：azure, socket.io, signalr

我正在开发一个部署在 Azure 上的 ASP.NET MVC 应用程序，并寻找一个提供异步传输机制/回退的库。

经过我自己的研究，我得出结论，有两个著名的候选者——Socket.io 和 SignalR。

我的问题很简单）它们的优缺点是什么？有什么充分的理由使用其中一个吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T23:56:30.893

我不得不说 SignalR 绝对是您的应用程序的最佳方法。在当前的构建中，我们作为服务器的笔记本电脑正在推送大约 350k 消息/秒。在下一个版本中，它会更高（根据当前测试判断，高几倍）。

查看主站点：[http ://signalr.net/](http://signalr.net/)

GitHub：[https ://github.com/SignalR/SignalR](https://github.com/SignalR/SignalR)

JabbR 提问：http: [//jabbr.net/#/rooms/signalr](http://jabbr.net/#/rooms/signalr)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T20:53:34.953

我从未使用过 SignalR，根据谷歌告诉我的信息，它是 .Net 应用程序的替代解决方案。

所以我想你应该试一试。Socket.IO 很棒，我喜欢它，但我是一个节点。根据他们的文档，没有 .net/c# 绑定。也许他们的文档不是最新的。

# android - 将活动滚动到顶部

> ID：12680856
> 
> 赞同：0
> 
> 时间：2012-10-01T20:49:00.170
> 
> 标签：android, android-activity

我尝试并搜索了很多，但没有找到答案。我有一个活动 A，在活动 B 上透明。我试图让活动 A 滚动到顶部，就像通知栏一样，以便活动 B 变为活动状态。我应该能够在必要时向下滚动 A。此外，我正在尝试在 A 中的图像视图上实现这种滚动，而不是在活动 A 的任何地方。onTouch 和 onTouchListener 可以帮助我吗？请在这里帮助我。我正在寻找实现此功能的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:04:33.330

我能想到的唯一方法是使用[`Activity.overridePendingTranistion`](http://developer.android.com/reference/android/app/Activity.html#overridePendingTransition%28int,%20int%29). 使用它，您每次都必须开始和完成您的活动才能使其动画化。您是否考虑过使用向下动画的视图，例如[`SlidingDrawer`](http://developer.android.com/reference/android/widget/SlidingDrawer.html)?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T22:10:57.737

您可以将 Activity A 设置为动画到顶部，保存其状态，并让它启动 Activity B 然后停止。当用户向下滑动以尝试返回 Activity A 时，Activity B 只需启动 A，它从顶部向下动画开始。它恢复它保存的数据，所以对用户来说它就像它一直处于活动状态一样。如果您需要 Activity A 继续处理，您可以将处理委托给 Activity B、服务或受 RoboGuice 控制并保持活动状态的类，因为它同时注入 A 和 B。

# heroku - Heroku Config Vars 对于敏感信息是否安全？

> ID：12680859
> 
> 赞同：11
> 
> 时间：2012-10-01T20:49:25.783
> 
> 标签：heroku

我在一次偶然的谈话中无意中听到 Heroku 上的 ENV（配置变量）不是存储敏感变量的最安全的地方。我认为恰恰相反，我的 Google-fu 对我没有任何帮助。有什么想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T06:47:19.177

Heroku 配置变量旨在安全地存储敏感信息。所有配置变量都以加密形式存储并安全存储。只有在测功机本身中启动您的应用程序时，它们才会被解密和加载。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-09-12T18:34:52.283

这取决于您所说的安全是什么意思。在 Heroku 仪表板上应用程序的设置部分，有一个“显示配置变量”按钮。这将向有权访问该应用程序的任何人显示您的配置变量。

出于这个原因，您可能不希望在配置变量中包含 AWS_SECRET_ACCESS_KEY 或关键密码之类的内容。

# firebreath - Firebreath 插件在 IE8 中没有关闭（）

> ID：12680860
> 
> 赞同：1
> 
> 时间：2012-10-01T20:49:28.607
> 
> 标签：firebreath

我有一个用 Firebreath 构建的插件/activex（不知道哪个版本，我认为至少是 1.6 - 如果有人告诉我在哪里看，我会在这里更新）。

在 IE8 中，但在 IE9 或 Chrome 中，每次页面刷新时内存使用量会增加几 MB。

我怀疑这意味着我在 javascript 中有一个循环结构，它也包含对插件的引用。还是包含插件的 DOM 元素？我们不会在 javascript 中构建任何“大”的东西，所以我的重点放在组成插件的（几个 MB）DLL 上。这是一个合理的想法吗？还有什么可能导致这个和/或我该如何调试它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:24:05.317

通常这是插件内部的循环引用；不是在 javascript 中，而是在你的 c++ 代码中。但是，可能有一个错误已经出现，导致了这个问题。从 github（master 分支）尝试最新的，看看是否有变化。

# asp.net - 为什么饼图只显示一个字段的值？

> ID：12680861
> 
> 赞同：0
> 
> 时间：2012-10-01T20:49:32.290
> 
> 标签：asp.net, .net, sql-server, charts

我正在尝试使用饼图，我希望在上面显示 2 个区域。但是对于我下面的代码，只显示了最后一个。

```
Code behind:

 protected void Page_Load(object sender, EventArgs e)
    {
        DataTable dt = new DataTable();

        dt.Columns.Add("status");
        dt.Columns.Add("count");

        DataRow dr = dt.NewRow();
        dr["status"] = "safe";
        dr["count"] = loadChart("safe");

        dt.Rows.Add(dr);

        dr["status"] = "unsafe";
       dr["count"] = loadChart("unsafe");

        dr = dt.NewRow();

       dt.Rows.Add(dr);

        Chart1.DataSource = dt;

        Chart1.Series[0].XValueMember = "status";
        Chart1.Series[0].YValueMembers = "count";

        Chart1.DataBind();
    } 
```

**标记：**

```
 <asp:Chart ID="Chart1" runat="server">
        <series>
            <asp:Series ChartType="Pie" Name="Series1">
            </asp:Series>

        </series>
        <chartareas>
            <asp:ChartArea Name="ChartArea1">
            </asp:ChartArea>
        </chartareas>
    </asp:Chart> 
```

**输出：**

![在此处输入图像描述](../Images/b4062e991297ae50f78510bcd5194b0c.png)

我也想看看安全的部分。我有它的价值。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:24:29.153

您在同一行中设置了两次值：

```
 DataRow dr = dt.NewRow();
dr["status"] = "safe";
dr["count"] = loadChart("safe");
dt.Rows.Add(dr);
**//still in the same row**
dr["status"] = "unsafe";
dr["count"] = loadChart("unsafe");
dr = dt.NewRow();
dt.Rows.Add(dr); 
```

您应该创建新行，然后设置第二个值：

```
 DataRow dr = dt.NewRow();
dr["status"] = "safe";
dr["count"] = loadChart("safe");
dt.Rows.Add(dr);
**//new row creation
dr = dt.NewRow();**
dr["status"] = "unsafe";
dr["count"] = loadChart("unsafe");    
dt.Rows.Add(dr); 
```

# c# - 使用反射实例化类

> ID：12680864
> 
> 赞同：1
> 
> 时间：2012-10-01T20:49:39.970
> 
> 标签：c#, reflection, dll, interface, .net-assembly

我有不同的类库，每个类库都实现一个接口`IImportCharacter`。在我的主应用程序中，用户选择一个 DLL，应用程序需要检查库是否实现了接口，然后在实现它的库中实例化类。我正在尝试使用反射来做到这一点，但我不断得到：

> 无法将“CustomCharacter.Ogre”类型的对象转换为“MainGame.IImportCharacter”类型。

```
Assembly assembly = assemblyPath;
foreach (Type type in assembly.GetTypes())
{
    IImportCharacter instance = null;
    if (type.GetInterface("IImportCharacter") != null)
    {
        //exception thrown at this line
        instance = (IImportCharacter)Activator.CreateInstance(type);
    }
} 
```

我已经将同一个`IImportCharacter`文件复制到主项目中，否则编译器会抱怨它不知道是什么`IImportCharacter`。我认为这可能会导致问题，因为它与动态加载的不是同一个。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T20:53:34.953

是的，我认为您要转换的界面是具有相同名称的不同类型。为什么不将 IImportCharacter 移动到一个共享程序集，您可以从代码和正在加载的程序集中引用它，因为它是您的界面？

否则，请尝试`Convert.ChangeType()`在动态加载的类型上使用动态加载的接口。

# graphviz - 如何在 Graphviz 中绘制重叠集群？

> ID：12680865
> 
> 赞同：11
> 
> 时间：2012-10-01T20:49:44.130
> 
> 标签：graphviz

我正在尝试使用 GraphViz 来绘制图形模型。但是，我没有找到一种方法来绘制重叠集群。例如，如何使“nodeA->nodeB”同时位于 clusterA 和 clusterB 内？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T06:07:16.357

AFAIK你不能。

文档中描述的集群：

> 如果子图的名称以簇开头，则 Graphviz 将子图记为特殊的簇子图。如果支持，布局引擎将进行布局，以便将**属于集群的节点绘制在一起**，集群的整个绘图包含在一个边界矩形内。

集群的整个想法*不是*重叠，而是对节点进行分组（当节点是两个子图的一部分时，graphviz 会引发错误）。

# java - Java：如何允许 UDP 套接字程序以阻塞 I/O 接收和发送？

> ID：12680872
> 
> 赞同：2
> 
> 时间：2012-10-01T20:50:28.903
> 
> 标签：java, sockets, udp

我只是在摆弄一个 UDP 聊天程序，它只允许在两个客户端之间发送消息。我正在使用 DatagramSocket 和 DatagramPacket 类。我遇到的问题是当一个客户端正在等待从另一个客户端接收数据报时，使用接收，然后我无法与该客户端发送任何消息，因为它的 I/O 被阻止，所以我当前的版本只有允许一次来回发送一条消息。我正在尝试完成它以允许接收方法与代码的发送部分分开侦听和运行，以便用户可以发送任意数量的消息而无需等待回复。任何有关示例的建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:55:32.817

每端需要两个线程，一个用于接收消息（并显示它们），另一个用于接收用户输入并发送这些消息。

# php - 如何将 .css 文件应用于以下 PHP 代码：

> ID：12680873
> 
> 赞同：-7
> 
> 时间：2012-10-01T20:50:32.880
> 
> 标签：php, html, redirect

有没有办法将 css 文件添加到以下 php 代码中：

```
<?php            
   echo "<a href=logout.php>Logout</a>";   
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:52:16.483

```
<?php  
      echo '<link href="stylesheet.css" rel="stylesheet" type="text/css" />';
      echo "<a id='logout' href='logout.php'>Logout</a>";   
 ?> 
```

在 stylesheet.css 中：

```
#logout{color:green;font-size:.7em;border:1px solid black;} 
```

如果它是 html，你会以同样的方式添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:52:32.147

您实际上可以在 PHP 中进行上下文切换。考虑以下

```
<style type="text/css">
  a {
    color: red;
  }
</style>

<?php  
  echo '<a href="logout.php">Logout</a>';   
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T20:52:49.597

听起来你想要[内联 CSS](http://www.tizag.com/cssT/inline.php)，例如：

```
<p style="background: blue; color: white;">A new background and font color with inline CSS</p> 
```

# javascript - 以编程方式向 Google 电子表格写入一行 javascript

> ID：12680875
> 
> 赞同：0
> 
> 时间：2012-10-01T20:50:49.937
> 
> 标签：javascript

我正在尝试找到一种将行动态插入到谷歌电子表格中的方法。我有一个对象列表，其中包含一行中每一列的所有数据。我只是想运行一个 for 循环，然后将数据发送到电子表格中的行。但是电子表格完全是空的。所以我不知道这是否会产生某些问题。

```
 for(var j=0; j < masterList.length; j++) {

        //tried this one but it didn't pan out
       sheet.appendRow([ masterList[j].Date, masterList[j].Name, masterList[j].Bugs,      masterList[j].Enhancements, masterList[j].Epic, masterList[j].DevOps, masterList[j].High ]);

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:35:32.150

在尝试附加之前，您是先访问电子表格然后再访问工作表吗？这是一个例子。

```
function insertData(masterList) {

    var spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
    var sheet = spreadsheet.getSheets()[0];

    for(var j=0; j < masterList.length; j++) {
        var ml = masterList[j];
        sheet.appendRow( [ ml.Date, ml.Name, ml.Bugs, ml.Enhancements, ml.Epic, ml.DevOps, ml.High ] );
    }
} 
```

# php - 使用 PHPExcel 从 MYSQL 生成 excel 文件

> ID：12680876
> 
> 赞同：0
> 
> 时间：2012-10-01T20:50:49.167
> 
> 标签：php, mysql, phpexcel

在最终用户单击“生成 excel 文件”按钮后，我正在使用 PHPExcel 生成一个 excel 文件。此按钮应为客户端打开一个 excel 文件，并显示数据。到目前为止，我有这段代码，但目前它只打开一个没有 excel 文件的空白页。谁能告诉我我做错了什么？我猜我没有正确连接到数据库..

```
<?php 
$dbhost= "mysql"; //your MySQL Server 
$dbuser = "survey"; //your MySQL User Name 
$dbpass = "password"; //your MySQL Password 
$dbname = "database"; 
//your MySQL Database Name of which database to use this 
$tablename = "questions"; //your MySQL Table Name which one you have to create excel   file 
// your mysql query here , we can edit this for your requirement 
$sql = "Select * from $table "; 
//create  code for connecting to mysql 
$Connect = @mysql_connect($dbhost, $dbuser, $dbpass) 
 or die("Couldn't connect to MySQL:<br>" . mysql_error() . "<br>" . mysql_errno()); 
 //select database 
 $Db = @mysql_select_db($dbname, $Connect) 
or die("Couldn't select database:<br>" . mysql_error(). "<br>" . mysql_errno()); 
//execute query 
$result = @mysql_query($sql,$Connect) 
or die("Couldn't execute query:<br>" . mysql_error(). "<br>" . mysql_errno()); 

 error_reporting(E_ALL);

 require_once '../Classes/PHPExcel.php';
 $objPHPExcel = new PHPExcel();

 // Set the active Excel worksheet to sheet 0 

$objPHPExcel->setActiveSheetIndex(0);  

// Initialise the Excel row number 

$rowCount = 1;  

// Redirect output to a client’s web browser (Excel5) 
header('Content-Type: application/vnd.ms-excel'); 
header('Content-Disposition: attachment;filename="results.xls"'); 
header('Cache-Control: max-age=0'); 
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5'); 
$objWriter->save('php://output');

exit; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-02-05T10:15:00.993

我知道这是很久以前发布的..但这可能对某人有帮助。

您没有为工作表分配任何值。所以在选择查询之后给出以下代码

```
while($row=mysqli_fetch_array($result))
              {
               $objWorksheet->fromArray($data, ' ', $ii);
                } 
```

这就是整个代码的样子：

```
<?php 
$dbhost= "mysql"; //your MySQL Server 
$dbuser = "survey"; //your MySQL User Name 
$dbpass = "password"; //your MySQL Password 
$dbname = "database"; 
//your MySQL Database Name of which database to use this 
$tablename = "questions"; //your MySQL Table Name which one you have to create excel   file 
// your mysql query here , we can edit this for your requirement 
$sql = "Select * from $table "; 
//create  code for connecting to mysql 
$Connect = @mysql_connect($dbhost, $dbuser, $dbpass) 
 or die("Couldn't connect to MySQL:<br>" . mysql_error() . "<br>" . mysql_errno()); 
 //select database 
 $Db = @mysql_select_db($dbname, $Connect) 
or die("Couldn't select database:<br>" . mysql_error(). "<br>" . mysql_errno()); 
//execute query 

 error_reporting(E_ALL);

 require_once '../Classes/PHPExcel.php';
 $objPHPExcel = new PHPExcel();

  // Set the active Excel worksheet to sheet 0 

    $objWorksheet =$objPHPExcel->getActiveSheet(); 
//title for worksheet 
$objWorksheet->setTitle('Data');
//header values
$objWorksheet->setCellValue('A1', 'Sl.');
$objWorksheet->setCellValue('B1', 'Username');
$i=2;

$result = @mysql_query($sql,$Connect);

    while($row=mysqli_fetch_array($result))
              {
                $data= array($row[0],$row[1],$row[2],$row[3]);
                $ii="A".$i;
//fill data
                $objWorksheet->fromArray($data, ' ', $ii);
                 $i++;

              }

// Redirect output to a client’s web browser (Excel5) 
header('Content-Type: application/vnd.ms-excel'); 
header('Content-Disposition: attachment;filename="results.xls"'); 
header('Cache-Control: max-age=0'); 
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5'); 
$objWriter->save('php://output');

exit;
?> 
```

# asp.net - 全高 Web 应用程序

> ID：12680877
> 
> 赞同：1
> 
> 时间：2012-10-01T20:50:50.360
> 
> 标签：asp.net, html, css

我想让我的网站充分利用浏览器的高度。我尝试了所有常用的 css 无济于事。id 像侧边栏和主要内容填充浏览器的整个高度，而标题应保持固定高度。

[jsFiddle](http://jsfiddle.net/damo642/Yu8YU/)

任何帮助感谢达摩

**HTML**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <script src="assets/js/jquery.js" type="text/javascript"></script>
    <title>TestSite</title>
    <link href="assets/css/Main.css" rel="stylesheet" type="text/css" />
    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server" LoadScriptsBeforeUI="True">
    </asp:ScriptManager>
    <asp:UpdatePanel ID="UpdatePanel" runat="server">
        <ContentTemplate>
            <div id="HeaderWrapper">
                <div id="Header">
                </div>
            </div>
            <div id="ContentWrapper">

                <div id="Sidebar">

                </div>
                <div id="Content" style="border: thin solid #666666"  class="Tabs">
                </div>
                <!-- end of content -->        
            </div>
            <!-- end of wrapper -->
            <div>
                <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
                </asp:ContentPlaceHolder>
            </div>
        </ContentTemplate>
    </asp:UpdatePanel>
    </form>
</body>
</html>​ 
```

**CSS**

```
#HeaderWrapper 
{
    width: 100%;
    clear: both;
    height: 80px;
    margin-top:2px;
    margin-bottom:2px;
    margin-right:0px;
    margin-left:0px;    
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFF', endColorstr='#99CCFF'); /* for IE */
    background: -webkit-gradient(linear, left top, left bottom, from(#FFF), to(#9CF)); /* for webkit browsers */
    background: -moz-linear-gradient(top,  #FFF,  #9CF); /* for firefox 3.6+ */   

    padding-top:0px;
    padding-bottom:0px;
    padding-right:0px;
    padding-left:0px;
    border-bottom:thin solid #FFFFFF;

}

#Header
{    

    width:1024px;
    margin: 0 auto;
    padding-top:0px;
    padding-bottom:0px;
    padding-right:0px;
    padding-left:0px; 
    border-radius: 5px;    

}

#ContentWrapper 
{
    width:1024px;
    margin: 0 auto;
    padding-top:0px;
    padding-bottom:0px;
    padding-right:0px;
    padding-left:0px; 
    border-radius: 5px;    

}

/* sidebar */

#Sidebar {

    float: left;
    width: 184px;
    padding: 0px;
    height:800px;
    border: thin solid #666666;
    padding:0px;
    border-radius: 0px;
    margin-top:0px;
    margin-bottom:0px;
    margin-right:6px;
    margin-left:0px;    
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFF', endColorstr='#FFFFFF'); /* for IE */
    background: -webkit-gradient(linear, left top, left bottom, from(#FFF), to(#FFF)); /* for webkit browsers */
    background: -moz-linear-gradient(top,  #FFF,  #FFF); /* for firefox 3.6+ */ 

}

/* end of sidebar -->

/* content */

#Content {
    float: left;
    width: 824px;
    padding-top:0px;
    padding-bottom:0px;
    padding-right:0px;
    padding-left:0px; 
    min-height:800px;
    border-radius: 0px;
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFF', endColorstr='#FFFFFF'); /* for IE */
    background: -webkit-gradient(linear, left top, left bottom, from(#FFF), to(#FFF)); /* for webkit browsers */
    background: -moz-linear-gradient(top,  #FFF,  #FFF); /* for firefox 3.6+ */ 
}
/* End content */

/* End content */
html,body {
    margin:0px;
    padding:0px;
    font-family: Arial, Helvetica, sans-serif;
    font-size:13px;
    line-height:1.5em;     
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#003366', endColorstr='#FFFFFF'); /* for IE */
    background: -webkit-gradient(linear, left top, left bottom, from(#036), to(#FFF)); /* for webkit browsers */
    background: -moz-linear-gradient(top,  #036,  #FFF); /* for firefox 3.6+ */ 
    height: 100%;    

}​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T22:22:30.960

我知道有人已经提供了一个带有 javascript 的解决方案，但如果你想要纯 CSS，请尝试将 #ContentWrapper、UpdatePanel 和表单的高度设置为 100%。

把这个放在头部

```
<style type="text/css">
    #<%=UpdatePanel.ClientID%> 
    {
        height: 100%;    
    }
</style> 
```

更新您的 CSS 文件：

```
#ContentWrapper 
{
    height: 100%;
    width:1024px;
    margin: 0 auto;
    padding-top:0px;
    padding-bottom:0px;
    padding-right:0px;
    padding-left:0px; 
    border-radius: 5px;    
}

html,body, form {
    margin:0px;
    padding:0px;
    font-family: Arial, Helvetica, sans-serif;
    font-size:13px;
    line-height:1.5em;     
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#003366', endColorstr='#FFFFFF'); /* for IE */
    background: -webkit-gradient(linear, left top, left bottom, from(#036), to(#FFF)); /* for webkit browsers */
    background: -moz-linear-gradient(top,  #036,  #FFF); /* for firefox 3.6+ */ 
    height: 100%;    

}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T21:32:32.363

那么你总是可以通过 JavaScript 设置你想要的元素的高度（[这里是一个更新的演示](http://jsfiddle.net/Yu8YU/7/)）

```
var height = $(window).height()-$("#HeaderWrapper").height()-10;
$("#Sidebar,#Content").css("height", height); 
```

您可能希望像这样在 resize 事件中添加此代码`$(window).resize(function() {});`（jsFiddle 似乎妨碍了修改此事件）

此外，我删除了 min-height 并使内容窗格在处理此问题时使用 overflow-y: scroll 因为我认为它会更好地工作并支持更广泛的浏览器，但这种方法不需要这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T21:06:13.610

如果我理解你，这就是你想要的：

[http://jsfiddle.net/KZurX/11/](http://jsfiddle.net/KZurX/11/)

我已经减少了 768 数字以说明 jsFiddle 中测试窗口的小尺寸。可以看到，当窗口高度大于指定值时，侧边栏和主要内容会填满窗口。*注意：jsFiddle 不运行服务器端代码，因此您的 asp.net 控件是不必要的。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T16:32:32.797

我决定不重新发明轮子并使用它。对于阅读本文的任何人，请遵循此建议，否则您会发疯的！ [解决方案说明](http://www.alistapart.com/articles/conflictingabsolutepositions/)

这让我想到了这个

[解决方案](http://www.alistapart.com/d/conflictingabsolutepositions/layout-1.html)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-01T21:08:05.367

您必须使用媒体查询，如下所示：

```
@media (min-width: 768px) {
    body{
        height:100%;
    }
} 
```

# jquery - HighCharts - 删除堆叠条上系列之间的空间

> ID：12680880
> 
> 赞同：2
> 
> 时间：2012-10-01T20:50:58.520
> 
> 标签：jquery, highcharts, space, highstock, stacked

我有一个 HighCharts 图表来显示一些信息。我每天都有堆积的信息。每个条目都是唯一的 -> 我不能使用单个系列。

问题是：两天之间，空间很大，我不知道如何减少或删除它。当我玩 PlotOptions 时没有效果。我认为原因是我的 xAxis-Handling，因为如果我使用“正常方式”来声明 xAxis 类别，就没有问题。

我的 jsFiddle：http: [//jsfiddle.net/MhL2Q/1/](http://jsfiddle.net/MhL2Q/1/)

另一个工作的 jsFiddle：jsfiddle_dot_net/wergeld/M85tL/（只允许 2 个链接）

原始 HighChart 演示：http: [//jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/column-stacked/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/column-stacked/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:15:53.253

[这](http://jsfiddle.net/YSfkQ/)是否满足您的需求？您需要删除图表中的所有填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:07:27.077

您可以使用[xAxis.minPadding](http://api.highcharts.com/highstock#xAxis.minPadding)和[xAxis.maxPadding](http://api.highcharts.com/highstock#xAxis.maxPadding)

> 最大值相对于轴长度的填充。0.05 的填充将使 100 像素的轴长 5 像素。当您不希望最高数据值出现在绘图区域的边缘时，这很有用。当设置了轴的最大选项或使用axis.setExtremes（）设置了最大极限时，将忽略maxPadding。默认为 0。

```
xAxis: {
    type: 'datetime',
    dateTimeLabelFormats: {
        month: '%e. %b',
        year: '%b'
    },
    tickInterval: 24 * 3600 * 1000,
    tickWidth: 1,
    minPadding: 0.5,
    maxPadding: 0.5                
} 
```

[填充日期时间轴@jsFiddle](http://jsfiddle.net/jugal/kZa2s/)

# python - 使用 simplecv 在多个窗口中显示视频

> ID：12680885
> 
> 赞同：0
> 
> 时间：2012-10-01T20:51:38.257
> 
> 标签：python, opencv, window, webcam, simplecv

我正在尝试使用 SimpleCV 在 2 个窗口中显示 2 个网络摄像头的输出，但是我用下面的代码得到的是一个溅射组合，看起来是 2 个不同大小的窗口，合并为一个。

```
cam = Camera(0)
cam1 = Camera(1)
while True:
    cam.getImage().show() 
    cam1.getImage().show() 
```

我已经使用 C++/OpenCV 成功执行了相同的操作，但我希望使用 Python/SimpleCV 进行开发。

我发现的 show() 上的 SimpleCV 文档不是很冗长。有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:33:26.343

遗憾的是 pygame 只支持一个窗口，这是我们用来渲染显示的库。你总是可以使用一些其他类型的库来单独显示它们，比如 GTK。

另一个技巧是使用并排功能：

```
cam = Camera(0)
cam1 = Camera(1)
while True:
    i1 = cam.getImage()
    i2 = cam1.getImage()
    i1.sideBySide(i2).show() 
```

我应该提一下，您也可以随时使用两个 JpegStreamCameras：

```
cam = Camera(0)
cam1 = Camera(1)
js = JPegStreamer()
js1 = JPegStreamer(8081)

while True:
    js.save(cam.getImage())
    js1.save(cam1.getImage()) 
```

然后在您的网络浏览器中转到： localhost:8080 localhost:8081

每个都应该显示一个单独的相机。

# iphone - 如何使用 Rubymotion 自定义 UISlider？

> ID：12680889
> 
> 赞同：0
> 
> 时间：2012-10-01T20:52:08.013
> 
> 标签：iphone, ios, ruby, rubymotion

参考[文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UISlider_Class/Reference/Reference.html)，您可以通过多种方式更改 UISlider 的属性。

您将如何在 Rubymotion 中编辑滑块以设置例如 a `minimumValueImage`？

```
slider = UISlider.alloc.initWithFrame([[50, 50], [200, 40]])
# ??? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:06:57.163

`mininumValueImage`是 UISlider 的属性。所以你可以这样设置：

```
slider.minimumValueImage = UIImage.imageNamed("sliderMinValueImage") 
```

# paypal - 如何以与 Kickstarter 类似的方式使用 Paypal API

> ID：12680895
> 
> 赞同：0
> 
> 时间：2012-10-01T20:52:17.000
> 
> 标签：paypal, payment-processing

我已经查看了 preapproval API，它看起来有点像我想要的，但不完全是。

我需要模仿 Kickstarter 的工作方式。用户被发送到他们登录并同意付款的 Paypal 网站，然后在特定日期从他们的帐户中提取付款，或者如果不满足某些条件，则什么也不会发生。我知道 Paypal 对某些用途很“有趣”，但实际商品和服务正在出售，所以我认为应该没问题。

我需要很多人能够为一笔更大的付款做出贡献；我不知道是否有办法在 Paypal 本身内部设置类似的东西，或者是否所有逻辑都应该单独保存，然后在某个日期触发 Paypal 付款？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:48:57.920

我已经在 quora 上回答了两个与此相关的问题，您可能会对 PayPal 推荐的众筹项目方法感兴趣：

[http://www.quora.com/PayPal/I-want-to-use-Paypal-for-my-self-hosted-crowdfund-campaign-but-I-heard-they-might-close-my-account-如果有太多钱进来了，那就有办法解决这个问题](http://www.quora.com/PayPal/I-want-to-use-Paypal-for-my-self-hosted-crowdfund-campaign-but-I-heard-they-might-close-my-account-if-theres-too-much-money-coming-in-is-there-a-way-to-fix-this)

[http://www.quora.com/PayPal/Is-paypal-better-for-crowdfunding-than-amazon-payments-why-or-why-not/answer/Praveen-Alavilli？**snids** = 55404046#ans1382191](http://www.quora.com/PayPal/Is-paypal-better-for-crowdfunding-than-amazon-payments-why-or-why-not/answer/Praveen-Alavilli?__snids__=55404046#ans1382191)

如果您有任何我可以帮助的问题，请告诉我。

# templates - Sitecore 演示文稿详细信息不会在模板更改时更新

> ID：12680898
> 
> 赞同：5
> 
> 时间：2012-10-01T20:52:22.413
> 
> 标签：templates, sitecore, sitecore6, presentation

我正在开发一个 Sitecore (6.4.0.101124) 网站，该网站有两个用于主页的模板。它们具有非常相似的结构 - 它们之间的最大区别在于它们在标准值的表示详细信息的控件部分中都有一个不同的子布局。我的理解是，当在项目上更改模板时，应将模板的标准值应用于该项目。但是，当内容编辑器更改模板时，演示详细信息保持不变，直到我进入并更改它们。

所以这意味着要么我误解了它应该如何工作，要么正在发生一些奇怪的事情。[这与此线程](https://stackoverflow.com/questions/4523013/sitecore-template-standard-values-layout-not-updating-all-items-layout-not-load)中讨论的问题非常相似，但给出的答案似乎并不适用，因为该项目不是使用分支模板创建的。

有没有人有过类似的经历（并解决了）？我在这应该如何工作方面偏离了基础吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T04:43:05.627

You write:

> My understanding is that when the template is changed on an item the standard values of the template should be applied to that item.

This is only true if a field has not been edited. Once a field for an item has been edited, the edited value takes precedence over the default. Changing the template to one that has different Standard Values will only have an impact if the field has not been touched, or if the user resets the field to the default value using the Fields Reset button. (Note that manually clearing the field will not do the trick. Sitecore will store an empty string, which will override the Standard Value. By using the Reset button, you set the field to a Database Null, which causes the Standard Value to be used.)

![Reset Button](../Images/bc79a95b48244472d382c6cb65cb556e.png)

You can tell if a field has been edited by checking for the text "standard value" next to the field in the Content Editor:

![Standard Values display hint](../Images/c2e042cfbf8e1e6c09647ecb99d1f101.png)

* * *

### Sitecore 6.4.0 and Layout Deltas

Things are more complex with the Renderings field on Sitecore 6.4.0 and above, because Sitecore [introduced](http://sdn.sitecore.net/upload/sitecore6/64/what%27s%20new%20in%20sc6.4-usletter.pdf) a feature called "Layout Deltas" with this release. Before Layout Deltas, if you edited the presentation details of an item, Sitecore would copy the layout information from the "Renderings" field of Standard Values into the item's Renderings field, which had the consequence that any subsequent change to Standard Values Renderings would have no effect on the display of this item.

This functionality made it difficult to manage changes to presentation, since a minor change to a detail of presentation on an individual item, such as adding conditional rendering logic, would break the inheritance from Standard Values. If if was necessary to change the presentation of a class of items, it was necessary to first change Standard Values, and then to make the same change to every item that modified presentation.

With Sitecore 6.4's Layout Deltas, if you modify the presentation of an item, just the change is stored in the item's Renderings field, rather than a complete copy of the Standard Values rendering. This change, or delta, information is applied on top of the Standard Values Renderings information, so that modifications to Standard Values layouts are applied to all inheriting items, not just ones with unmodified presentation.

It sounds like your content editors have made a modification to the presentation of the item. When the template is switched, this change is being applied on top of the new template. You can confirm this by checking for the [Standard Values] text next to the Renderings field of the item in question.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T00:22:53.367

模板具有值，但是将值携带到使用该模板创建的项目中的是标准值项目。现在，话虽如此，从该模板创建的项目上的每个字段都有一个标志，表明它是否使用模板标准值。如果演示详细信息仍未标记为使用标准值，则它不会级联对项目的更新。

现在.. 确保您了解分支和模板之间的区别.. 分支是您如何创建项目的“模型”。当您对分支项目进行更改时，它根本不会级联更改。项目将从其 TEMPLATE 标准值继承值。分支值仅在项目创建时继承。

编辑：顺便说一句，我应该补充一点，如果您打开左侧的装订线以显示已覆盖的演示文稿，您可以查看演示文稿值是否为标准值。如果您看到该图标，则您知道该项目当前未使用标准值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-13T20:21:04.780

我遇到了这个问题，因为我有一个需要更改数百页的字段。一开始就没有分享。我尝试在模板中将该字段设置为 Shared & Unversioned，但这并没有导致它在我进行更改时随处更改。

然后我继续在模板中将标准值设置为我想要的字段，然后在突出显示标准值后选择版本 -> 字段 -> 重置。我第一次这样做时，它将字段重置为空白。然后我又做了一次，使用该特定字段的每个页面上的字段都发生了变化。希望这可以帮助。似乎如果您已经有一个未共享的字段，则需要对其进行标准值重置。

# ownership - 流程自动化：供 IT 或每个部门实施？

> ID：12680900
> 
> 赞同：0
> 
> 时间：2012-10-01T20:52:24.487
> 
> 标签：ownership

作为一名 IT 网络开发人员，我主要为公司的所有部门（IT、法律、人力资源、工程、技术作家、财务和会计、市场营销等）编写流程自动化代码和报告。

然而，其他一些部门也有小型编程团队（工程、人力资源和市场营销），他们做一些特定于部门的工作，这是他们“核心工作”的一部分。

例如营销维护我们的外部网站，因此需要一些图形艺术家和 HTML/CSS/JS 开发人员来实现它。人力资源部有专门的员工，只使用我们的工资/支付系统，因为它是高度机密的。工程师使用需要高级工程知识的脚本自动进行一些调试/测试。

**您如何在这些小型、专家、非 IT 团队应该处理哪些项目和 IT 应该处理哪些项目之间划清界限？是否有最佳实践或可以使用的标准列表？**

这个问题既是政治问题又是技术问题，但我正在寻找最佳实践和划清界限的理想方式，而不是政治考虑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:00:20.290

您应该根据组织结构图和预期职责划定界限，您可以参考现有组织文档的越多越好。例如，营销部门正在为公司网站做前端工作，但 IT 应该负责内部 Intranet 站点。

您的组织文档应该已经让 IT 负责内部信息系统，也许 HR 是需要隐私的例外。该异常将为您提供边界，异常中未包含的任何内容都是 IT 的滚动而不是 HR。他们在他们的代码库上工作并持有他们数据库的密钥。但是，如果运行代码和数据库的系统需要调整，那应该是 IT 并且应该符合公司范围内的标准。

使用此示例，例如为工程团队优化部分网络之类的事情很容易回答。那是一份 IT 工作。优化测试用例将属于工程。备份和加密财务数据的代码是 IT 的职责，您不需要知道信息的真实内容，只需知道它的基本属性。编写代码来分析财务文件将交给财务部门的某个人，因为需要访问敏感文件等。

# jquery-plugins - jQuery 插件默认包含复杂对象

> ID：12680902
> 
> 赞同：0
> 
> 时间：2012-10-01T20:52:31.273
> 
> 标签：jquery-plugins, undefined, complextype, defaults

以下对默认值的定义是不好的做法吗？

```
var defaults = {
    name:'',
    surname:'',
    address:{
        part1:'',
        part2:'',
        postCode:'' 
    }
}; 
```

如果插件发起者只定义了地址对象中的第 1 部分，则地址的其余部分将是未定义的。

处理这个问题的最佳方法是什么？或者我根本不应该使用复杂的对象作为选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:20:33.693

好的，所以在我问这个问题之前，这只是我搜索中的一个措辞。

我不知道 jQuery.extend() 可以通过使用递归扩展

```
this.opts = $.extend(true,{}, defaults, options); 
```

代替

```
this.opts = $.extend({}, defaults, options); 
```

# php - PHP MySQLi - 检查用户权限

> ID：12680905
> 
> 赞同：3
> 
> 时间：2012-10-01T20:52:32.840
> 
> 标签：php, mysql, mysqli

我正在尝试实现一个 PHP 函数，该函数将检查用户是否有权执行特定的数据库查询（例如 CREATE TABLE）。

我在以下位置查看了 MySQLi 手册：

[http://php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)

..但我找不到任何 API 来检查连接的用户权限。

使用 PHP 5 检查用户是否在 MySQL 中具有特定权限的推荐方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T19:14:14.147

好吧，我实际上不明白你为什么需要这样的查询。如果您通过 PHP 对 MySQLi 运行非特权查询，`mysqli_query`语句将返回错误，不是吗？...

# html - iPad Web App 在启动时冻结

> ID：12680909
> 
> 赞同：7
> 
> 时间：2012-10-01T20:52:46.627
> 
> 标签：html, image, ipad, web-applications, startup

我正在构建一个简单的网络应用程序，主要用于在 iPad 上运行。问题是如果您在应用程序显示启动图片并加载内容时快速双击主页按钮/点击它，应用程序会在启动时冻结。如果您尝试快速打开/关闭应用程序，您可能会看到我在说什么。

一旦应用程序冻结，它就会卡在显示主页内容的主屏幕上。按主页按钮不会让您回到主屏幕。按电源按钮也不会锁定屏幕。您必须进行硬重置（同时按下主页按钮和锁定按钮）。

我认为这里的问题可能是启动图像。有没有人遇到过这个？

测试设备是装有 iOS 6.0 的 iPad 3。

以下是基本的 HTML（仍会导致应用程序冻结）：

```
<!DOCTYPE html>
<html> 
<head> 
<title>Mobile</title> 
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="apple-mobile-web-app-status-bar-style" content="black" /> 
<meta name="apple-mobile-web-app-capable" content="yes"/>  

<link rel="stylesheet" href="css/main.css" />
<!-- iPad (Retina, landscape) -->
<link rel="apple-touch-startup-image"
  media="(device-width: 768px)
     and (orientation: landscape)
     and (-webkit-device-pixel-ratio: 2)"
  href="apple.png">
</head> 
<body>

Test

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T22:06:38.483

摆脱：

```
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" /> 
```

为我解决了同样的问题。

在您的情况下，请尝试将其取出：

```
<meta name="apple-mobile-web-app-status-bar-style" content="black" /> 
```

删除旧的快捷方式并重新添加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T14:56:05.093

我有一个完全可以重现的类似问题。它看起来像一个 iOS 错误，当我进入另一个著名的网络应用程序（金融时报）时，它会做同样的事情。

他们对这个问题的回答似乎是……在初始加载屏幕之后，他们基本上有第二个加载屏幕，一种“请稍候……”消息，用户有点接受提示并等待它完成在用他们的手机做任何其他事情之前。

确实，如果我让我自己的应用程序加载到最后，关闭它，回到它，关闭它，再回到它，我做不到足够的次数来实现它，除非我不等它完成就去做加载。

所以答案（直到这个错误从任何iOS更新解决它解决）是有一个非常壮观的加载屏幕超过初始加载屏幕3秒，从而阻止人们过早关闭它。

加油苹果，如果你能解决这个问题，我会永远爱你！

# centos - 使用 adjtime() 作为非特权用户

> ID：12680913
> 
> 赞同：1
> 
> 时间：2012-10-01T20:52:53.300
> 
> 标签：centos, privileges, ntp, setuid, unix-timestamp

我正在运行 CentOS 5.4，想知道是否有任何方法可以将“adjtime()”系统调用作为非 root 用户使用。

提前感谢，非常感谢

# java - 将文件读入二维数组 Java

> ID：12680914
> 
> 赞同：0
> 
> 时间：2012-10-01T20:52:56.973
> 
> 标签：java, multidimensional-array

我从一个看起来像这样的文件中读取

5

0 3 1 4 2

4 0 6 1 4

1 2 0 6 5

6 3 1 0 8

4 1 9 3 0

第一个数字无关紧要。我想从第 2 行开始读取。我能够读取第 1 行并存储它，但我无法读取数组的其余部分。

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

public class TSM {
private static int numOfCities;
private static int[][] arr;

public static void main(String[] args) throws NumberFormatException, IOException{
    numOfCities = 0;

    BufferedReader br = new BufferedReader(new     FileReader("/Users/sly/Desktop/tsp.txt"));   
    String line = " ";
    String [] temp;

    while ((line = br.readLine())!= null){ 

        if(line.trim().length() ==1) { //set value of first line in file to be numOfCities
            numOfCities = Integer.parseInt(line);
            System.out.println("There are"+ " " + numOfCities+ " " + "Number of cities");

        } else{ 
            temp = line.split(" "); //split spaces

            for(int i = 0; i<arr.length; i++) {
                for (int j = 0; j<arr.length; j++) {    
                    arr[i][j] = Integer.parseInt(temp[i]);

                }
            }
        }
    }
    printArray();
}

public static void printArray () { 
         for (int i =0; i <arr.length; i++) {
          for (int j = 0; j < arr.length; j++) {
            System.out.print(arr[i][j]);
          }
          System.out.println("");
         }
    }    
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T21:06:22.500

从逻辑上讲，您的 else 部分有一些问题。每条线代表二维数组中的一行。它应该有点如下 -

```
else { 
    temp = line.split(" "); //split spaces 
    int[] newRow = new int[temp.length];
    //for(int i = 0; i<arr.length; i++){ 
    for (int j = 0; j<temp.length; j++){ 
        newRow[j] = Integer.parseInt(temp[i]); 
    } 
    //} 
    //declare currentRowIndex outside while loop with initial value of 0
    arr[currentRowIndex] = newRow; 
    //increment currentRowIndex on each iteraton of the while loop
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T20:54:47.683

`arr`未正确初始化：

```
private static int[][] arr; 
```

改成：

```
private static int[][] arr = new int[5][5]; // for example. Dimensions
                                            // guessed from file content. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T00:17:18.150

您可以在循环中取出这部分代码：

```
if(line.trim().length() ==1) { //set value of first line in file to be numOfCities
    numOfCities = Integer.parseInt(line);
    System.out.println("There are"+ " " + numOfCities+ " " + "Number of cities");
} else { 
```

因为你可以做的是在while循环上面放这个：

```
numOfCities = Integer.parseInt(br.readLine());
System.out.println("There are"+ " " + numOfCities+ " " + "Number of cities"); 
```

这将做的是读取第一行，将其设置为城市数，然后进入 while 循环并从第二行而不是第一行开始。所以你的整个代码将是：

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

public class TSM {
    private static int numOfCities;
    private static int[][] arr = new int[5][5];

    public static void main(String[] args) throws NumberFormatException, IOException{
        numOfCities = 0;

        BufferedReader br = new BufferedReader(new FileReader("/Users/sly/Desktop/tsp.txt"));   
        String line = " ";
        String [] temp;

        numOfCities = Integer.parseInt(br.readLine()); //Reads first line then starts at while loop in second
        System.out.println("There are"+ " " + numOfCities+ " " + "Number of cities");

        while ((line = br.readLine())!= null){ 
            temp = line.split(" "); //split spaces

            for(int i = 0; i<arr.length; i++) {
                for (int j = 0; j<arr.length; j++) {    
                    arr[i][j] = Integer.parseInt(temp[i]);
                }
            }

        }
        printArray();
    }

    public static void printArray () { 
        for (int i =0; i <arr.length; i++) {
            for (int j = 0; j < arr.length; j++) {
                System.out.print(arr[i][j]);
            }
            System.out.println("");
        }
    }    
} 
```

希望能帮助到你！

# php - 如何在不立即转到该页面的情况下将数据提交到 php 页面？

> ID：12680919
> 
> 赞同：0
> 
> 时间：2012-10-01T20:53:20.057
> 
> 标签：php, javascript, ajax

我需要从用户输入中获取表单数据 - 即单选按钮并使用它来将搜索过滤器应用于数据库搜索。

然而，有一些特定的参数给我带来了困难。

具体来说：搜索过滤器选项窗格是网站主页上的静态固定装置。由搜索过滤器修改的查询是一个单独的 php 页面，它被一个 ajax 函数调用以在页面中间显示搜索结果而不刷新页面。

是否甚至可以将变量值提交到另一个 php 页面而无需转到该页面并立即处理 php？或者变量不会像那样存储吗？

代码太长，但我会给出基本的伪代码：

*   表单action="查询页面接收用户input.php"

*   一些单选按钮：

    *   20
    *   15
    *   10

*   提交按钮--> 提交单选按钮值到 QueryPage.php 但不重定向

*   用户单击一个调用显示 QueryPage.php 输出的 ajax 函数的类别链接（即健身）。此时 QueryPage.php 应该使用之前选择的特定用户输入过滤器执行搜索。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:59:05.667

让我看看我是否理解正确：

您基本上是说您的单选按钮将根据用户选择的内容修改搜索结果？

如果是这种情况，我可以想到 2 个选项：

1- 当您为搜索发出 ajax 请求时，首先，获取用户输入并将其与搜索查询一起发送到 QueryPage.php 文件。您可以访问该功能吗？2- 使用 ajax 将用户输入发布（您使用 jQuery 还是其他库？）到 UserInput.php 文件，您将在其中存储会话中的数据，然后从 QueryPage.php 访问会话并获取之前发送的值。

这是否回答你的问题？对不起，如果没有，这有点难以理解这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T21:00:30.780

您可以使用 JQUERY 及其事件方法。例如更改、单击、悬停。在您的情况下，您想使用单选按钮，因此您可能想为此使用点击事件。

```
$("#radio").click(function () {
// SEND HTTP REQUEST
}); 
```

[http://www.mkyong.com/jquery/how-to-select-a-radio-button-with-jquery/](http://www.mkyong.com/jquery/how-to-select-a-radio-button-with-jquery/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T21:01:04.867

是的。您可以只使用[`.ajax()`](http://api.jquery.com/jQuery.ajax/),[`.post()`](http://api.jquery.com/jQuery.post/)或[`cURL`](http://www.php.net/manual/en/ref.curl.php)。这会将您的数据发布到指定页面而无需重定向。

使用 .post() 的示例

```
$.post("test.php", { name: "John", time: "2pm", fieldname: "your value" } ); 
```

# python - 将 python 字典写入 CSV 文件，其中键为列标题

> ID：12680920
> 
> 赞同：3
> 
> 时间：2012-10-01T20:53:25.700
> 
> 标签：python, csv, dictionary

我正在尝试将字典中的元素写入一个文本文件，其中每个键都是一列。目前我有一些看起来像的东西

```
import csv
import numpy as np

data1 = np.arange(10)
data2 = np.arange(10)*2
data3 = np.arange(10)*3

writefile = '../Desktop/data.txt'
datadict = {} 

datadict['data1'] = data1
datadict['data2'] = data2
datadict['data3'] = data3

f = open( writefile, 'w' )
fieldnames = ['data1','data2', 'data3']
data = csv.DictWriter(writefile, fieldnames, restval='', extrasaction='ignore', dialect='excel')

f.close() 
```

但它给了我错误“参数1必须有一个“写”方法”。我不确定那是什么意思。我也担心方言 = 'excel'，但我不知道还能放什么。最后，我想要一个看起来像这样的文件：

![在此处输入图像描述](../Images/189f08f4b6f2e243989e54bef4589ee8.png)

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T21:54:32.040

这里根本不需要使用 DictWriter：

```
import csv
import numpy as np

data1 = np.arange(10)
data2 = np.arange(10)*2
data3 = np.arange(10)*3

writefile = '../test.csv'
fieldnames = ['data1','data2', 'data3']
with open( writefile, 'w' ) as f:
    writer = csv.writer(f)
    writer.writerow(fieldnames)
    writer.writerows(zip(data1, data2, data3)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T20:57:40.740

您应该将类​​文件对象作为第一个参数传递给`DictWriter`构造函数。

```
datalist = [{'data1': d1, 'data2': d2, 'data3': d3} for d1, d2, d3 in zip(data1, data2, data3)]
...
f = open(writefile, 'w')
...
writer = csv.DictWriter(f, ...) 
for i in xrange(10):
    writer.writerow(datalist[i])
f.close() 
```

更简单的类比案例：

```
with open(writefile, 'w') as f:
    writer = csv.writer(f)
    for row in zip(data1, data2, data3):
        writer.writerow(row) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-29T11:31:37.473

如果您正在做看起来可能在这里做的那种数据分析，那么最好的选择可能是进入[`pandas`](http://pandas.pydata.org/)Python 的专用数据分析库。

这是一个执行您想要的示例的示例：

```
import pandas as pd
import numpy as np

data1 = np.arange(10)
data2 = np.arange(10)*2
data3 = np.arange(10)*3

df = pd.DataFrame(zip(data1, data2, data3), columns=['data1', 'data2', 'data3'])
df.to_csv('myfile.csv') 
```

我会说很整洁。此外，您现在可以[用](https://stackoverflow.com/questions/26537878/pandas-sum-across-columns-and-divide-each-cell-from-that-value)您的数据做[各种](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.sort.html) [难以想象](https://stackoverflow.com/questions/25748683/python-pandas-sum-dataframe-rows-for-given-columns)的[事情。](http://pandas.pydata.org/pandas-docs/stable/groupby.html)

您还可以`DataFrame`从现有字典中创建一个：

```
In [115]: a_dict = {'foo':[1,2,3], 'bar':[4,5,6], 'baz':[7,8,9]}

In [116]: pd.DataFrame(a_dict)
Out[116]: 
   bar  baz  foo
0    4    7    1
1    5    8    2
2    6    9    3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T20:55:26.527

试试这个：

```
import csv
import numpy as np

data1 = np.arange(10)
data2 = np.arange(10)*2
data3 = np.arange(10)*3

writefile = '../Desktop/data.txt'
datadictlist = [{'data1': data1[i], 'data2': data2[i], 'data3': data3[i]} for i in xrange(10)]

f = open( writefile, 'w' )
fieldnames = ['data1','data2', 'data3']
writer = csv.DictWriter(f, fieldnames, restval='', extrasaction='ignore', dialect='excel')
writer.writerows(datadictlist)

f.close() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T21:54:06.017

放“a+”而不是“w”

```
f = open( writefile, 'a+' ) 
```

# jquery-ui-dialog - 从 jquery-ui 对话框打开 nyromodal 在对话框后面

> ID：12680925
> 
> 赞同：0
> 
> 时间：2012-10-01T20:53:42.037
> 
> 标签：jquery-ui-dialog, nyromodal

我正在尝试使用 nyromodal 显示图像。我正在尝试从 jquery-ui 对话框中进行操作，但 nyromodal 显示在对话框后面。如何更改以使图像位于最前面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:39:14.060

您可以尝试`z-index`在 nyroModal.css 中添加属性。我添加了`z-index`in`.nyroModalBg, .nyroModalCloseButton, .nyroModalTitle, .nyroModalCont, .nyroModalCont iframe, .nyroModalLoad`来解决类似的问题。

# sql - 通过excel VBA更新SQL数据库

> ID：12680931
> 
> 赞同：0
> 
> 时间：2012-10-01T20:54:10.213
> 
> 标签：sql, excel, vba

首先，我了解让用户通过 excel 更新数据库的过程存在很多风险，我感谢任何反对这种方法的建议，但让我们推测我有一个从不犯错误的完美用户:)

因此，首先我设法通过 excel 中的 vba 访问存储过程，以根据特定单元格中的参数提取数据。现在，如果我想更新这些字段，我将如何做呢？

我的第一个建议是创建一个基于电子表格中所有字段更新的存储过程。如果这是正确的途径，我将如何遍历所有行？

人们可以提供的任何其他建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:41:31.567

有关更新 SQL Server 的一些说明。这`[ODBC;FileDSN=z:\docs\test.dsn]`可以是任何有效的连接字符串。

```
Dim cn As Object,  rs As Object
Dim scn As String, sSQL As String, sFile As String

    sFile = ActiveWorkbook.FullName

    scn = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & sFile _
        & ";Extended Properties=""Excel 8.0;HDR=Yes;IMEX=1"";"

    ''Late binding, so no reference is needed

    Set cn = CreateObject("ADODB.Connection")
    Set rs = CreateObject("ADODB.Recordset")
    cn.Open scn

    sSQL = "SELECT * INTO [ODBC;FileDSN=z:\docs\test.dsn].FromXL " _
         & "FROM [Sheet8$]"
    cn.Execute sSQL, recs
    Debug.Print recs

    sSQL = "INSERT INTO [ODBC;FileDSN=z:\docs\test.dsn].FromXL " _
         & "SELECT * FROM [Sheet8$]"
    cn.Execute sSQL, recs
    Debug.Print recs

    sSQL = "UPDATE [ODBC;FileDSN=z:\docs\test.dsn].FromXL x " _
         & "INNER JOIN [Sheet8$] w " _
         & "ON x.ID = w.ID SET x.Field =w.field"
    cn.Execute sSQL, recs
    Debug.Print recs

    rs.Open "SELECT * FROM [ODBC;FileDSN=z:\docs\test.dsn].FromXL", cn
    Debug.Print rs.GetString 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:08:28.037

你必须熟悉微软的 COM 对象。我的 VBA 生锈了，所以要小心。

```
str t = Range("A1:A4").Value 
```

如果您正在执行大量动态处理，您应该让自己成为一些 microsoft 存根的包装器方法。

```
function getValue(str location)
    return Range(location + ":" + location).Value
end function 
```

我之前做过大型 VBA 项目，从前端读取值是一项昂贵的操作。您应该设置对象来保存这些值，这样您就不必多次读取相同的值。

最后，您需要大量验证，从检查数据库以确保用户拥有最新版本到确保电子表格不在打印视图中（因为这会影响能够读取的范围）。

验证版本很重要，因为您将需要发布修复程序并且您需要验证这些修复程序是否正在使用。

# c# - LINQ c# 效率

> ID：12680933
> 
> 赞同：3
> 
> 时间：2012-10-01T20:54:16.950
> 
> 标签：c#, performance, linq, ienumerable

我需要编写一个查询，从用户为任何给定数据集定义的列中提取不同的值。可能有数百万行，因此语句必须尽可能高效。下面是我的代码。

这个 LINQ 查询的顺序是什么？有没有更有效的方法来做到这一点？

```
var MyValues = from r in MyDataTable.AsEnumerable()
               orderby r.Field<double>(_varName)
               select r.Field<double>(_varName); 

IEnumerable result= MyValues.Distinct(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T20:58:35.793

我不能对`AsEnumerable()`调用或字段转换说太多，但对于 LINQ 方面，这`orderby`是一种稳定的快速排序，应该是`O(n log n)`. 如果我不得不猜测，除了`orderby`应该是之外的一切`O(n)`，所以总的来说你仍然只是`O(n log n)`。

更新：LINQ`Distinct()`调用也应该是`O(n)`.

所以总的来说，这个东西的 Big-Oh 仍然是`O(Kn log n)`，其中 K 是一些常数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T21:10:20.190

[来自评论]

> 我实际上使用 MyDistinct.Distinct()

如果您想要不同的`_varName`值并且您不能在 dbms 的选择查询中完成所有这些操作（什么是最有效的方法），您应该使用`Distinct`before `OrderBy`。顺序在这里很重要。

在开始过滤重复项之前，您需要订购所有数百万行。如果您先使用 distinct，则只需订购其余部分。

```
var values = from r in MyDataTable.AsEnumerable()
             select r.Field<double>(_varName);
IEnumerable<double> orderedDistinctValues = values.Distinct()
                                                  .OrderBy(d => d); 
```

我最近问了一个相关问题，E.Lippert 在订单重要和不重要的时候给出了很好的解释：

[LINQ 扩展方法的顺序不影响性能？](https://stackoverflow.com/questions/10110013/order-of-linq-extension-methods-does-not-affect-performance)

[这是一个小演示](http://ideone.com/IH2AH)，您可以在其中看到顺序很重要，但您也可以看到它并不重要，因为比较双精度对于 cpu 来说是微不足道的：

```
Time for first orderby then distinct: 00:00:00.0045379
Time for first distinct then orderby: 00:00:00.0013316 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T21:02:19.117

> 有没有更有效的方法来做到这一点？

如果您将排序作为初始化查询的一部分进行`MyDataTable`，而不是事后在内存中排序，您可以获得更高的效率。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T21:14:27.690

如果您***想要***所有百万条记录并且您在 64 位内存寻址操作系统上有足够的内存，那么您的上述查询（linq）很好。

查询的顺序是，如果您看到底层命令，将被转换为

```
Select <_varname> from MyDataTable order by <_varname> 
```

这与在数据库 IDE 或命令行上运行时一样好。

给你一个关于性能的简短回答

1.  如果可以的话，放入一个 where 子句（使用索引的列）
2.  确保用户可以选择被索引的列 (_varname)。想象一下数据库试图在一个未索引的列上对数百万条记录进行排序，这显然很慢，但会危及 linq 接收 badpress
3.  确保（如果可能）使用有价值的记录正确完成 MyDataTable 的初始化（再次基于 where 子句）
4.  分析您的基础查询，
5.  如果可能，创建存储过程（有争议）。您也可以创建一个包含存储过程的实体模型

今天它可能会更快，但是随着表空间的增长，如果你的数据没有被排序（索引），那么事情就会变得更慢（即使你有一个很好的 linq 表达式）

希望这可以帮助

也就是说，如果您的数据库未正确编入索引，则意味着

# android - 显示软键盘时保持底部内容滚动视图可见

> ID：12680937
> 
> 赞同：2
> 
> 时间：2012-10-01T20:54:43.470
> 
> 标签：android, scroll, scrollview

我有一个 ScrollView，我试图用它来复制文本消息应用程序的可接受行为。首次加载 ScrollView 时，我滚动到底部。并且当软键盘被调出时，ScrollView 会调整它的高度来进行补偿。但是当 ScrollView 的高度减小时，底部的内容被隐藏，而不是顶部的内容。我希望内容随着尺寸的减小而被推高。

现在，只要调整 ScrollView 的大小，我就可以滚动到底部，但是如果 ScrollView 尚未滚动到底部怎么办？本质上，我想保持用户正在查看的最后一条可见文本消息可见，无论它是否位于 ScrollView 的底部。

我也尝试过使用 ADJUST_PAN 布局参数，但我不希望我的整个窗口都被平移。但如果有类似的 ScrollView 行为，那正是我正在寻找的。

# bash - Bash 中的日期命令

> ID：12680941
> 
> 赞同：0
> 
> 时间：2012-10-01T20:55:13.550
> 
> 标签：bash, date

如何在 bash 的 if 语句中调用 date +%a 命令？我搜索了谷歌，但找不到任何东西。我正在尝试创建一个脚本，以便如果 date +%a 显示 Mon 我会回显备份您的文件！

到目前为止，我已经尝试过：

```
if [date +%a==Mon]
then
echo back
fi 
```

在其他变体中。

我错过了什么？

如果这是一个愚蠢的问题，我提前道歉，我是 Bash 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:57:01.477

使用命令替换：

```
if [[ $(date +%a) == Mon ]] ; then
   echo Backup time
fi 
```

# css - 如何解决我的内容 div 中的差距？

> ID：12680944
> 
> 赞同：-1
> 
> 时间：2012-10-01T20:55:30.520
> 
> 标签：css

我有一个**“内容 div”**，**里面**有两个带有背景图像（渐变和阴影）的 div。现在，如果有**很多**内容，我会遇到以下问题，我必须调整**“内容 div”**的大小，但是当我这样做时，我的 div（顶部和底部 div）之间会显示一个**BIG GAP 。**我知道我可以通过插入更大的图像来解决它，但这对我来说是不行的，因为**每次**内容 div 变大时我都必须调整图像大小。

有没有办法解决这个问题？**谢谢你们！！！**

[Fiddle **WITH LESS CONTENT**](http://jsfiddle.net/9T4PF/)（没有调整 div 的大小，所以看起来不错）

[Fiddle **WITH MORE CONTENT**](http://jsfiddle.net/CDMZT/)调整了我的大小**“内容 div”**，中间有一个间隙:(

HTML代码在这里：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" />
<meta name="author" content="Dejan Peic"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<title></title>

</head>
<body>

<div class="mainwrap">
<div class="content">
<p><b>LESS CONTENT LOOKS OK!!!</p>
<div class="top">
</div>

<div class="bottom">
</div>
</div><!--/content-->
</div>
</body>
</html> 
```

CSS 代码：

```
*{margin:0px;padding:0px}

.content{
background-color:white;
position:relative;
display:block;
width:995px;
height:528px;
margin:0px auto;
margin-top:40px;
margin-bottom:40px;
z-index:100;
overflow:hidden;
}

.top{
position:absolute;
z-index:-100;
background-image:url('http://www.robertpeic.com/Global%20one/template/content-top.png');
top:0;
width:990px;
height:203px;
background-size: contain;
}

.bottom{
position:absolute;
z-index:-100;
background-image:url('http://www.robertpeic.com/Global%20one/template/content-bottom.png');
bottom:0;
width:989px;
height:225px;
background-size: contain;
}

p{
margin-left:50px;
margin-top:20px;
font-size:25px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:06:33.163

将背景图像分成三部分而不是两部分：

```
<div id="top"></div>
<div id="middle"></div>
<div id="bottom"></div> 
```

将所有内容放在中间`div`，然后给它一个垂直重复的背景图像（`background-repeat: repeat-y`）。当内容量增加时，中间`div`会变高，背景会垂直重复以匹配，所以你永远不会有间隙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:06:48.170

您的身高 (`top`和`bottom`) 在较大的容器中加起来不超过 528 像素；但是，它们在较小的一个中确实加起来为 428。

如果有任何方法可以消除 CSS 中对定义高度的需求，您可能想要追求它——以帮助消除这样的怪癖。

# c - 使用灵活的数组成员分配结构

> ID：12680946
> 
> 赞同：7
> 
> 时间：2012-10-01T20:55:37.490
> 
> 标签：c, c99, flexible-array-member

这是 C99 代码：

```
typedef struct expr_t
{
    int n_children; 
    foo data; // Maybe whatever type with unknown alignment
    struct expr_t *children[];
} expr_t; 
```

现在，我该如何分配内存？

```
expr_t *e = malloc (sizeof (expr_t) + n * sizeof (expr_t *)); 
```

或者

```
expr_t *e = malloc (offsetof (expr_t, children) + n * sizeof (expr_t *)); 
```

?

甚至可以保证在`sizeof`具有灵活数组成员的类型上工作（GCC 接受它）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T20:58:53.080

`expr_t *e = malloc (sizeof (expr_t) + n * sizeof (expr_t *));`在 C99 中定义良好。从 C99 规范 6.7.2.1.16：

> 作为一种特殊情况，具有多个命名成员的结构的最后一个元素可能具有不完整的数组类型；这称为灵活数组成员。在大多数情况下，灵活数组成员被忽略。特别是，结构的大小就像省略了柔性数组成员一样，只是它可能具有比省略所暗示的更多的尾随填充。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T21:00:48.850

如果编译器接受具有灵活数组成员的结构的声明，则该结构的`sizeof`运算符应该产生结构的大小，就好像灵活数组成员不存在一样。

这种结构的正确分配是：

```
expr_t *e = malloc (sizeof(expr_t) + n * sizeof(struct expr_t *)); 
```

即使编译器不支持灵活的数组成员，您仍然可以使用此技巧。只需将结构的数组成员声明为大小`1`，然后分配`n - 1`项目而不是`n`.

# javascript - 使用类'.item'jQuery计算变量中的元素

> ID：12680948
> 
> 赞同：3
> 
> 时间：2012-10-01T20:55:54.623
> 
> 标签：javascript, jquery, variables

如何使用包含在变量中的类项来计算元素

到目前为止[http://jsfiddle.net/jGj4B/](http://jsfiddle.net/jGj4B/)

```
var post = '<div/><div class="item"></div><div class="item"></div><div class="item"></div><div class="item"></div>';
alert($(post).find('.item').length);​ // i have tried .size() in place of .length 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T21:17:43.523

你想要`filter`而不是`find`：

```
$(post).filter('.item').length 
```

`find`寻找后代元素，但没有。

如果你想要顶级项目和后代，你可以这样做：

```
$(post).find('.item').andSelf().filter(".item").length 
```

尽管按照另一个答案中的建议将其包装在一个跨度中可能更容易理解。

* * *

**编辑 2013 年 7 月 19 日：** `andSelf`自 v1.8 起已弃用，`addBack`应取而代之。

```
$(post).find('.item').addBack().filter(".item").length 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:10:43.450

最好的方法是创建一个 DOM 对象而不实际将其附加到 DOM。就像是：

```
var post = '<div/><div class="item"></div><div class="item"></div><div class="item"></div><div class="item"></div>';

// Create a dummy element:
var temp = $("<span />");

// Populate the HTML of that element with the data from your post variable
$(temp).html(post);

// Search the element as you normally would (if it were attached to the DOM)
$(temp).find(".item").length; // equals 4 
```

# python - Python行、列、矩阵的烦恼

> ID：12680953
> 
> 赞同：-4
> 
> 时间：2012-10-01T20:56:18.730
> 
> 标签：python

我正在编写一个带有给定的python程序

```
matrix = [['A', 'B', 'C'], 
          ['D', 'E', 'F'], 
          ['G', 'H', 'I']] 
```

我正在尝试编写一个代码，以便我可以定义每个值的坐标，这样如果我的命令是 get_coordinate('any value in matrix')，它将打印出矩阵中的行和列。

我很难定义行和列以使此代码正常工作。我真正要找的是如何写行=矩阵行，列=矩阵列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:08:00.830

你可以随时尝试这个，

```
def getLoc(matrix, elem):
    row , col = 0 , 0
    for a in [j for i in matrix for j in i]:
        if a == elem:
            return row / len(matrix), col % len(matrix)
        col += 1
        row += 1 
```

# playframework - Play 2 - 如何使用通过 sbt 包含的库

> ID：12680956
> 
> 赞同：0
> 
> 时间：2012-10-01T20:56:26.323
> 
> 标签：playframework, playframework-2.0, dependencies, sbt

我只是在我的 Play 2 项目中添加了一个 sbt 依赖项：

```
val appDependencies = Seq(
   "org.markdownj" % "markdownj" % "0.3.0-1.0.2b4"    
) 
```

我现在如何在 Play 2 的控制器和模型中使用这个库。我就是想不通！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T21:28:24.740

模板中的用法：

```
@Html(new com.petebevin.markdown.MarkdownProcessor().markdown("This is a *simple* test.")) 
```

在控制器/模型中的用法：

```
import com.petebevin.markdown.MarkdownProcessor
val textInMarkdown = /* where ever your text comes from */
val htmlCode: String = new MarkdownProcessor().markdown(textInMarkdown) 
```

生成javadocs（bash）可能会有所帮助：

```
git clone https://github.com/myabc/markdownj.git
cd markdownj/core
mvn javadoc:javadoc #this may take a while, loading lots of dependencies
#open markdownj/core/target/site/apidocs/index.html 
```

对其他降价处理器开放。

# actionscript-3 - 设置精灵宽度或高度而不缩放它的孩子

> ID：12680959
> 
> 赞同：4
> 
> 时间：2012-10-01T20:56:38.490
> 
> 标签：actionscript-3, size, sprite, scale

我正在尝试动态更改 Sprite 对象的`width`and `height`，该对象是其他类似 Sprite 对象的容器。容器对象会根据其子对象的大小自动更改其大小，但是当我更改子对象的位置时，容器的大小保持不变，并且它的子对象似乎被放置在容器之外。

我试图通过使用这样的东西来解决这个问题：

```
if (container.width < (child.x + child.width))
{
    container.width = (child.x + child.width);
} 
```

但是当我使用这段代码时，容器对象的子对象会被缩放。
有没有办法改变容器的大小而不缩放它的孩子？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T21:35:17.393

这不可能直接实现，精灵的大小取决于其内容的范围。所以唯一的选择是调整精灵的孩子的大小，或者在`x: 0`,上放置一个虚拟孩子`y: 0` *（假设这将是您想要的锚点）*。

如您所料，内容边界的坐标没有被考虑在内，例如，当有一个`100 x 100px`放置在 上`x: 50, y: 50`的孩子时，父母的大小仍然是`100 x 100px`，而不是`150 x 150px`。

`100 x 100px`添加on的另一个孩子`x: 0, y: 0`会增加 到 的范围`150 x 150`，因为它现在从孩子一开始，`x: 0, y: 0`在孩子二`x: 50, y: 50`+结束`100 x 100px`。

![内容界限](../Images/5cbf5f0232461b3092350a114b74ed43.png)

# c++ - 0xC0000005：访问冲突写入位置0xcccccccc

> ID：12680960
> 
> 赞同：-1
> 
> 时间：2012-10-01T20:56:50.273
> 
> 标签：c++, pointers, pass-by-reference

当我调用我的`calculatePlaneEQ`函数时，当我重新分配值时，它会引发访问冲突......我的指针生锈了，但似乎这应该可以工作！

```
float *planeCoefA, *planeCoefB, *planeCoefC, *planeCoefD = NULL; 
```

**称呼：**

```
calculatePlaneEQ (<...>, &planeCoefA, &planeCoefB, &planeCoefC, &planeCoefD); 
```

**防御：**

```
void calculatePlaneEQ (<...>, float ** myXnorm, float ** myYnorm, float ** myZnorm, float** myD)
{
    float  xNorm = 1.3;
    float  yNorm = 1.4;
    float  zNorm = 1.5;
    float eqD = 1.6; 

    *(*myXnorm) = xNorm;
    *(*myYnorm) = yNorm;
    *(*myZnorm) = zNorm;
    *(*myD) = eqD;  
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T21:01:25.093

它应该是：

```
float planeCoefA, planeCoefB, planeCoefC, planeCoefD; 
```

称呼：

```
calculatePlaneEQ (<...>, &planeCoefA, &planeCoefB, &planeCoefC, &planeCoefD); 
```

防御：

```
void calculatePlaneEQ (<...>, float * myXnorm, float * myYnorm, float * myZnorm, float * myD)
{

    float  xNorm = 1.3;
    float  yNorm = 1.4;
    float  zNorm = 1.5;
    float eqD = 1.6; 

    *myXnorm = xNorm;
    *myYnorm = yNorm;
    *myZnorm = zNorm;
    *myD = eqD;
} 
```

* * *

更好的是，使用引用而不是指针：

称呼：

```
calculatePlaneEQ (<...>, planeCoefA, planeCoefB, planeCoefC, planeCoefD); 
```

防御：

```
void calculatePlaneEQ (<...>, float &myXnorm, float &myYnorm, float &myZnorm, float &myD)
{

    float  xNorm = 1.3;
    float  yNorm = 1.4;
    float  zNorm = 1.5;
    float eqD = 1.6; 

    myXnorm = xNorm;
    myYnorm = yNorm;
    myZnorm = zNorm;
    myD = eqD;
} 
```

这比 C 风格的指针使用更惯用 C++，而且更不容易出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T21:00:30.373

```
float *planeCoefA, *planeCoefB, *planeCoefC, *planeCoefD = NULL; 
```

您还没有初始化任何指针。 `planeCoefA`, `planeCoefB`, 并且`planeCoefC`将具有随机值。Only`planeCoefD`被分配`NULL`，但这对任何一个都无效。

但是，无论如何，您仍然只为这些内存位置分配值。这是未定义的行为。指针是变量，它们的值是内存地址。但是，它们不会自动指向有效内存；他们需要被初始化。

```
float planeCoefA = 0, planeCoefB = 0, planeCoefC = 0, planeCoefD = 0;

// ...

void calculatePlaneEQ (<...>, float *myXnorm, float *myYnorm, float *myZnorm, float* myD) 
```

添加另一个间接级别（即`float**`v `float*`）的唯一原因是如果您需要修改*参数*以便调用者可以看到它（因为，请记住；您*通过 value*传递这些参数）。您只需要写入指针所指的内存位置，因此单个指针就足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T21:04:48.710

似乎您正在做太多的间接级别。

```
float planeCoefA, planeCoefB, planeCoefC, planeCoefD; 
```

称呼

```
calculatePlaneEQ (<...>, &planeCoefA, &planeCoefB, &planeCoefC, &planeCoefD); 
```

和

```
void calculatePlaneEQ (<...>, float * myXnorm, float * myYnorm, float * myZnorm, float* myD)
{
 ...
  *myXnorm = 12.1f;
 ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T21:12:08.687

您始终可以使用真正的浮动和参考，以使您和他人的事情变得更简单。

```
float planeCoefA = 0.0;
float planeCoefB = 0.0;
float planeCoefC = 0.0;
float planeCoefD = 0.0; 
```

调用：calculatePlaneEQ（<...>，planeCoefA，planeCoefB，planeCoefC，planeCoefD）；

防御：

```
void calculatePlaneEQ (<...>, float & myXnorm, float & myYnorm, float & myZnorm, float & myD)
{

    myXNorm = 1.3;
    myYNorm = 1.4;
    myZNorm = 1.5;
    myD = 1.6; 

} 
```

如果出于某种原因您更喜欢使用指针，那么您可以在函数签名中使用浮点指针：

```
void calculatePlaneEQ (<...>, float * myXnorm, float * myYnorm, float * myZnorm, float * myD) 
```

在这种情况下，您将在函数主体中的每个变量名称前加上一个星号：

```
*myXNorm = 1.3; 
```

但是，您将冒着被传递无效指针的风险。

# c# - 如何在不知道它们类型的情况下初始化数组中的项目？

> ID：12680962
> 
> 赞同：0
> 
> 时间：2012-10-01T20:56:54.840
> 
> 标签：c#, arrays, interface, constructor

如果我传递了一个实现接口的类的实例，我不一定知道确切的类型。如果我想创建这个类的数组（不管它是什么），我可以这样做：

```
IWhatever[] ArrayOfClass = (IWhatever[])Array.CreateInstance(InstanceOfClass.GetType(), length); 
```

只要 InstanceOfClass 是实现 IWhatever 的类的实例，它就可以工作。

问题是我似乎无法弄清楚如何初始化数组的成员。我认为`new IWhatever()`可能有效，但它没有。

如何构造数组的成员？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:59:12.300

您需要将每个成员初始化为某个实现接口的类的实例。

如果您想要与 相同的类型`InstanceOfClass`，并且该类型具有默认构造函数，则可以使用以下内容：

```
for(int i=0;i<ArrayOfClass.Length;++i)
{
    ArrayOfClass[i] = (IWhatever)Activator.CreateInstance(InstanceOfClass.GetType());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:03:16.987

向接口添加工厂方法。工厂方法将创建正确特定类型的实例，您可以根据其泛型类型将其分配为数组。

# javascript - 如何使用 PhoneGap 保存网页以供离线使用？

> ID：12680964
> 
> 赞同：2
> 
> 时间：2012-10-01T20:57:04.987
> 
> 标签：javascript, cordova

我正在使用 PhoneGap 开发 RSS 阅读器。到目前为止一切都很好，但现在我想提前下载链接的文章页面，这样用户就不必等待缓慢的连接。

使用 JQuery 通过 AJAX 获取 HTML 很容易，但我还想要图像和 CSS。我可以从生成的 HTML 中获取图像和 CSS 的 URL，但路径是相对的。我认为这不会有问题，因为我有基本 URL。不幸的是，它并没有我想象的那么简单：

一篇示例文章是`http://www.golem.de/news/sicherheit-ecall-soll-motorradfahrern-das-leben-retten-1210-94854.html`. 包含的 CSS 文件具有相对 URL `/staticrl/styles/golem_main_47-min.css`。我尝试使用页面 URL 中的最后一个斜杠来查找相对路径的基础（W3C 说这是它的工作方式）。应该是这样`http://www.golem.de/news/staticrl/styles/golem_main_47-min.css`，但实际文件位于`http://www.golem.de/staticrl/styles/golem_main_47-min.css`. 我也可以在后面使用第一个斜杠`http://`，这适用于我尝试的前三个示例，但我很确定这并不总是有效，因为这不是相对 URL 的工作方式。但是我怎么能确定基础是什么？

也许我错过了一个非常简单的方法来做到这一点？我也尝试使用 IFrame，但 JavaScript 不允许访问跨域 IFrame 内容。

有没有人有这样的经验？我现在很困。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T06:43:02.430

我认为您误解了相对 url 的工作原理。

相对 url 从主机名 (http://www.golem.de) 获取资源。

不是来自主机名 + 最后一个目录路径 (http://www.golem.de/news)。

您需要解析文章 url 并获取主机名，然后将资源路径附加到主机 url。这是获取主机名的示例函数：

```
var rssUrl = 'http://www.golem.de/news/sicherheit-ecall-soll-motorradfahrern-das-leben-retten-1210-94854.html';

GetHostName(rssUrl) // www.golem.de

function GetHostName(url) {
   return url.match(/:\/\/(.[^/]+)/)[1];
} 
```

您可能想要修改正则表达式以保留协议 (http://)，或者找到其他方法从 url 解析主机名。

# file - 尝试 grep 日志文件时出现行太长错误

> ID：12680973
> 
> 赞同：1
> 
> 时间：2012-10-01T20:57:57.710
> 
> 标签：file, unix, grep

当我在 shell 提示符下键入：

```
grep -r  "ambiguously" . 
```

我得到错误：

> grep：行太长。

基本上，当前目录是一个日志目录，我试图在所有日志文件中找到 sql 错误“列不明确定义”。

但为什么我会收到错误消息？文件很大，这是主要原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T21:06:36.797

你应该试试

```
find -type f -exec grep PATTERN {} + 
```

命令行限制可以在 linux 上找到

```
$ getconf ARG_MAX 
```

在 *BSD 上

```
$ sysctl kern.argmax 
```

请参阅[http://www.cyberciti.biz/faq/argument-list-too-long-error-solution/](http://www.cyberciti.biz/faq/argument-list-too-long-error-solution/)以进一步了解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-22T16:43:45.193

“grep:line too long”并不一定意味着该行“太长”的一个或多个文件包含您正在寻找的字符串。

您可能想尝试：

我在`find /var/log -type f`；做 echo $i && grep PATTERN $i ; 完成 |tee /tmp/output.txt

或者

我在`find /var/log -type f`；做 echo $i && grep PATTERN $i ; 完毕

取决于您搜索的文件数量。

“行太长”会出现在标准错误中，如果您可以向后滚动，您将在屏幕上看到它。它可能是“lastlog”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T21:00:52.597

您会收到错误消息，因为 grep 可以通过命令行获取的文件数量受到限制。

尝试

```
ls -b . | xargs grep "ambiguously" 
```

编辑：此解决方案仅在您不需要递归时才有效

# vb.net - COM 与非 COM DLL

> ID：12680981
> 
> 赞同：11
> 
> 时间：2012-10-01T20:58:50.553
> 
> 标签：vb.net, dll, com

我的大部分经验是使用 Java 和 VB.NET 等高级语言。我确实有一些 C++ 经验（在大学）。

我了解 COM DLL 和 .NET 编译器生成的 DLL 之间的区别。我不完全理解 C 和 C++ 编译器生成的 COM DLL 和 Windows DLL 之间的区别。

我想在 .NET 程序中使用 C++ DLL。我设法让这个工作。我的问题具体是：C++ 生成的 DLL 和 VB6（基于 COM）生成的 DLL 有什么区别。

我花了一个小时在谷歌上搜索并查看 MSDN。我虽然不用问问题就能找到答案，但我没有。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-01T21:50:29.203

两者之间存在*巨大*差异。该列表太长，无法在 SO 帖子中准确重现，我将尝试重点介绍：

*   C++ DLL 必须导出它想让客户端代码可用的每个函数或类。一个 COM DLL 仅导出 4 个具有众所周知的名称和行为的函数
*   使用 C++ DLL 的应用程序必须在链接时描述该 DLL 的接口，COM 服务器在运行时绑定
*   使用 C++ DLL 的应用程序必须允许 Windows 在启动时找到 DLL，通常通过将 DLL 放在与 EXE 相同的目录或路径上。在没有客户端应用程序指定其位置的情况下找到 COM DLL。注册表在运行时用于定位 DLL
*   COM 服务器不必是 DLL。它可以是任何东西，包括同一台机器上的单独进程或位于世界各地另一台机器上的可执行文件。客户端代码不知道它所在的位置

特定于 COM 的自动化子集：

*   任何支持 COM 的语言都可以使用 COM 服务器。在 Windows 中，这几乎是其中的任何一个。

最后一个要点可能会让您误以为您了解 COM dll 和 .NET dll 之间的区别。它们没有任何共同点，但 .NET 非常好，并且可以与 COM 服务器互操作。Tlbimp.exe 实用程序非常擅长掩盖差异。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T21:06:43.967

Com 是一种二进制标准，它允许应用程序使用可互换的二进制模块，只要符合 com 标准，任何语言都可以生成 com 投诉库。因此，差异取决于某些 com 库将是本机机器代码，有些可能会通过解释器进行管理和运行。com 真正要做的是弥合 c++ 在源代码级别的 oop 风格与预构建的二进制世界之间的可用性差距。

# apache-flex - flex 3 冷融合 10 问题

> ID：12680983
> 
> 赞同：0
> 
> 时间：2012-10-01T20:58:52.750
> 
> 标签：apache-flex, coldfusion, coldfusion-10

我们有一个 Flex 3 应用程序，它使用 WebService 和 loadWSDL() 调用带有查询返回值的 ColdFusion 函数。Flex 3 应用程序将返回数据存储在 ArrayCollection 中。问题是 Flex 在 ColdFusion 8 上解析数据很好，但不是 10。我确实看到在 ColdFusion 10 下运行时返回的数据，但看起来格式有点不同。我想知道这是否可能是 SOAP 1.1 与 1.2 的问题。有没有人有任何可能导致这种情况的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:11:30.757

添加这一行

```
<cfset this.wssettings.version.consume = "1"> 
```

到 Application.cfc 将强制 Coldfusion 10 使用 Axis1 Web 服务和 Flex 3 支持的 SOAP 1.1 格式。Application.cfc 文件放置在您的应用程序根目录中。

# html - 使用内联列表中的图像创建水平导航

> ID：12680985
> 
> 赞同：-5
> 
> 时间：2012-10-01T20:58:59.853
> 
> 标签：html, css

我想使用 UL 和 LI 创建一个水平菜单。唯一的问题是每个按钮都有图像中的文本，所以我想查看图像并且鼠标悬停。

我尝试给每个 li 一个具有图像背景宽度和高度的类，一个 li homeButton:hover 但它不起作用。

这是我的html

```
 <div id="navcontainer">
    <ul id="navlist">
    <li><a href="#"><img src="imgs/nav/home.png" border="0" /></a></li>
    <li><a href="#"><img src="imgs/nav/about.png" border="0" /></a></li>
    <li><a href="#"><img src="imgs/nav/webshop.png" border="0" /></a></li>
    <li><a href="#"><img src="imgs/nav/lookbook.png" border="0" /></a></li>
    <li><a href="#"><img src="imgs/nav/blog.png" border="0" /></a></li>
    <li><a href="#"><img src="imgs/nav/news.png" border="0" /></a></li>
    </ul>
</div> 
```

这是我的CSS

```
 #navlist
{
list-style: none;
padding: 0;
margin: 0;
}

#navlist li
{
display: inline;
padding:0;
margin: 0;
}

#navlist li:before { content: url('../imgs/nav/slash.png'); }
#navlist li:first-child:before { content: ""; }

/*IE workaround*/
/*All IE browsers*/
* html #navlist li
{
background-image: url('../imgs/nav/slash.png');
background-repeat: no-repeat;
background-position: 0 50%;
padding: 0 0.5em 0 1em;
margin: 0 1em 0 -1em;
}

/*Win IE browsers - hide from Mac IE\*/
* html #navlist { height: 1%; }

* html #navlist li
{
display: block;
float: left;
} 
```

:after 在每个按钮旁边放置一个图像....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:05:38.843

`background-image`在`li`标签内部使用。你可以玩弄`margin`and `padding`，我给了你一些任意的值来让你开始。

```
#navlist { 
    list-style: none;
    margin: 0; }
#navlist li { 
    background: url('../imgs/nav/slash.png') 0 50% no-repeat;
    margin: 0 0 0 5px; /* The amount of space you want before the image */
    padding: 0 0 0 5px; /* The amount of space you want to allocate for this image */
    display: inline-block; } 
```

# ruby - 检查宝石是否可以从其他宝石中获得

> ID：12680989
> 
> 赞同：1
> 
> 时间：2012-10-01T20:59:16.123
> 
> 标签：ruby, ruby-on-rails-3, gem, sidekiq

我目前正在为 ruby​​ 编写 Gem，并且我想提供的一些东西是对 resque 或 sidekiq 的支持。通常，如果服务（其中一个）不可用，我不希望用户崩溃，所以我只想在用户启动并运行这些 gem 时加载它们。

我尝试了以下方法：

**我的mod.rb**

```
module Mymod
  # Code code code
end

require "mymod/railtie" if defined?(Rails)
require "mymod/sidekiqworker" if defined?(Sidekiq) 
```

**mymod/sidekiqworker.rb**

```
module mymod
  class Sidekiqworker
    include Sidekiq::Worker
    sidekiq_options :queue => :default

    def perform(path)

    end
  end
end 
```

但是当我加载 gem 并启动服务器时，类不包括在内（看起来 sidekiq 没有定义）。

如果我在 sidekiqworker 文件的顶部添加“需要'sidekiq'”，这将有效，但这会破坏允许人们使用任一服务的目的。

有没有办法查看用户是否安装了 gem，然后允许他们使用该服务？

我正在使用： - Ruby 1.9.3 - Rails 3 - Sidekiq 1.2.1

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:04:24.157

在你的内部`.gemspec`确保你添加了你的gem所依赖的所需gem作为运行时依赖项。这样一来，当您的 gem 安装时，Bundler 将成为处理该 gem 可用性的工具。您只需要担心使用gem（即`require`，然后使用它）。

在你的情况下，这看起来像

```
# in name_of_gem.gemspec

# some code identifying your gem

s.add_runtime_dependency "rails"
s.add_runtime_dependency "sidekiq" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T21:05:15.403

您通常会捕获`LoadError`.

```
begin
  require 'sidekiq'
rescue LoadError
  # sidekiq not available
end 
```

您可以将结果分配给变量

```
has_sidekiq = begin
  require 'sidekiq'
  true
rescue LoadError
  false
end

require "mymod/sidekiqworker" if has_sidekiq 
```

# wireshark - 使用命令行使用 Tshark 捕获时如何限制数据包大小

> ID：12680995
> 
> 赞同：2
> 
> 时间：2012-10-01T20:59:54.467
> 
> 标签：wireshark

目前我的命令是 tshark.exe -i (int interface) -V -x -w C:\file.pcap 但我找不到我应该添加的内容以限制数据包大小

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:13:39.580

您可以使用选项[-s capture snaplen](http://www.wireshark.org/docs/man-pages/tshark.html)。

```
-s capture snaplen
    设置捕获实时数据时使用的默认快照长度。每个网络数据包不超过 snaplen 个字节将被读入内存或保存到磁盘。值 0 指定快照长度为 65535，以便捕获完整的数据包；这是默认设置。
    此选项可以出现多次。如果在第一次出现 -i 选项之前使用，它将设置默认快照长度。如果在 -i 选项之后使用，它会为该选项之前出现的最后一个 -i 选项指定的接口设置快照长度。如果未专门设置快照长度，则使用默认快照长度（如果提供）。

```

# windows - 在 Linux 环境下运行 .bat

> ID：12680998
> 
> 赞同：8
> 
> 时间：2012-10-01T21:00:01.093
> 
> 标签：windows, linux, bash, batch-file, sh

有没有办法在 Linux 环境中运行 .bat 文件？我有几个 .bat 文件，它们的目的是调用 mvn install:install-file 脚本。因此脚本中没有任何依赖于操作系统的内容。

谢谢，

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-01T21:03:10.077

您可以使用[`wine`](http://www.winehq.org/)or [`dosbox`](http://www.dosbox.com/)，但通常没有已知`bat`的 linux 解释器。但是，有各种用于 windows 的 unix shell 的实现，甚至还有一个标准工具包`Windows Services for UNIX`（aka [`SUA`](http://technet.microsoft.com/en-us/library/cc779522%28v=ws.10%29.aspx)），其中包括`ksh`实现和许多其他好东西，所以如果你想要它对操作系统透明，你可以考虑使用它并编写你的脚本使用符合 POSIX 的 shell 脚本语言。

--- 编辑 --- 另一方面，如果你的脚本*只*包含一个`mvn <params>`，你可以确保文件具有执行权限（`x`标志），在它前面加上一个 shell 解释器（比如`/bin/bash script.bat`），然后试试看它。但是，不能保证成功。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T21:06:26.317

简单的答案是肯定的，有一种方法可以在 Linux 上运行它，只要：

*   您从该`.bat`文件运行的命令`$PATH`位于您的 Linux 框中
*   您没有使用 Microsoft 特定的 BATCH 文件命令或控制结构

您需要使文件可执行，并且很可能在文件的内容前面加上一行，告诉 Linux 使用哪个 shell 运行脚本。bash 是这样的：`#!/bin/bash`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-31T06:31:00.387

在 Linux 终端类型上

```
wine cmd 
```

之后，windows cmd 将在您的终端上播放。转到 .bat 文件所在的文件夹，输入 bat 文件名，然后按 Enter。它将成功运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-28T08:21:19.883

安装dosbox

`sudo apt install dosbox`

运行它 `dosbox`

从您的 Linux 操作系统挂载您的主文件夹。在dosbox里面输入

`MOUNT D /home/<your user>`

切换文件夹驱动器

`D:`

现在，如果您`my.bat`在用户主目录中调用了一个文件，则在 doxbox 中运行它 `MY.BAT`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-19T04:45:35.400

您可以使用 notepad++ 在 linux 中轻松运行任何批处理文件，您可以在任何 linux 应用商店中找到 notepad++。我已经从适用于 linux 的 snap 商店下载了它。Notepad++ 有一个名为 run 的选项，它将在任何环境中为您运行批处理文件

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-01T21:03:42.407

不，这些`bat`文件是 windows shell 脚本，可能执行 windows 命令并期望在 windows 环境中运行。您需要将它们转换为 shell 脚本才能在 linux 上运行它们，因为您的 bash shell 无法理解 dos 命令。幸运的是，如果安装文件脚本真正独立于平台，那应该很容易。如果您提供示例，我们可能会帮助您翻译。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-02-11T17:16:24.920

您可以将与 .bat 脚本等效的内容编写为 shell 脚本。