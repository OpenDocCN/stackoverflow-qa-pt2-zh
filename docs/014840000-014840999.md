# StackOverflow 问答 14840000-14840999

# python - 如何使用python打印特定的xml值？

> ID：14840000
> 
> 赞同：-1
> 
> 时间：2013-02-12T19:12:07.283
> 
> 标签：python, xml, xml-parsing

我有如下所示的 xml

```
<api>
<apicat>
    <cat>
        <id>1</id>
        <name>testname</name>
    </cat>
    <cat>
        <id>2</id>
        <name>testname2</name>
    </cat>
    <cat>
        <id>3</id>
        <name>testname3</name>
    </cat>
</apicat> 
```

如何打印 id=2 的名称？还请注意，如果 xml 没有以相同的顺序返回值，并且结果数量高于 10,000？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:14:50.713

您可以使用带有[xpath](/questions/tagged/xpath "show questions tagged 'xpath'")表达式的[lxml](/questions/tagged/lxml "显示标记为“lxml”的问题")模块轻松完成此操作：

```
from lxml import etree

file = "file://path/to/file.xml"
doc = etree.parse(file)

print doc.xpath('//cat[id=2]/name/text()')[0] 
```

见[http://lxml.de/](http://lxml.de/)

和[Xpath 教程](http://www.w3schools.com/xpath/default.asp)

您的 XML 文件无效，此文件应为：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<api>
    <apicat>
        <cat>
            <id>1</id>
            <name>testname</name>
        </cat>
        <cat>
            <id>2</id>
            <name>testname2</name>
        </cat>
        <cat>
            <id>3</id>
            <name>testname3</name>
        </cat>
    </apicat>
</api> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:26:36.790

试试这个：

```
$ xpath -e '//cat[id=2]/name' your.xml 
```

# php - 为什么要清理 POST 和 GET

> ID：14840001
> 
> 赞同：0
> 
> 时间：2013-02-12T19:12:08.777
> 
> 标签：php, mysql, sql-drop

我有一个问题......我知道你必须清理 POST 和 GET 以阻止人们对你的网站/数据库做讨厌的事情，但我很困惑......我在一个网站上看到了以下内容以为我会问这个问题。

![在此处输入图像描述](../Images/d1950df65a3af4608fe762e192d800d2.png)

黑客先生怎么知道要删除的表被称为学生？，在这种情况下，它是一所学校，可能不需要太多的工作，但我认为这种东西的代码在运行时是隐藏的在一个 php 文件中......所以如果我将我的表命名为模糊的东西，攻击者如何知道要删除的表名是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T19:13:07.157

是的，它是隐藏的，但如果你有这样的漏洞，你可以执行任何你想要的查询，包括`SHOW TABLES`和`SHOW COLUMNS ..`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T19:16:12.967

经验法则是，安全总比后悔好！如前所述，攻击者可以输出您的数据内容，或者根据图片将其删除。尽管 PHP 代码是隐藏的，但在某些情况下可能并非如此，例如一些错误输出或 PHP 模块由于某种原因被卸载，然后源代码将变得可见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T19:18:29.907

也许这不能回答这个问题，但我想澄清一下：每个人都在谈论“清理”用户输入只是为了避免表丢失、数据库被破坏和其他灾难。

我没有看到的是，消毒是为了保护您的查询。不是来自黑客，也不是来自魔鬼，而只是为了这个名叫 O'Reilly 的可怜人，或任何其他包含引号的用户提供的数据。

那句话可能会打断你的查询，句号。并停止您设计精美的 web 应用程序。而且它不是恶意的。

因此，清理您的查询以避免它们中断。这样做的同时，您还可以防止 MALICIOUS BREAKING，它*本身*就是一个类别。查询是*STRINGS*，由引号分隔，并且插值引号只是在不应该的地方结束字符串，并且您的数据库调用错误。

# backbone.js - 将路线重定向到另一个

> ID：14840007
> 
> 赞同：7
> 
> 时间：2013-02-12T19:12:31.567
> 
> 标签：backbone.js, backbone-routing

我试图在执行路由回调之前将路由重定向到另一个。我有以下代码：

```
console.log("file loaded");
(function (History) {
    var _navigate = History.prototype.navigate;

    _.extend(History.prototype, {
        navigate: function (fragment, opts) {
            alert("adad");
            return _navigate.call(this, fragment, opts);
        }
    });
})(Backbone.History); 
```

此代码包装`Backbone.History.navigate`方法，并在方法调用时显示警报。但是当我改变路线时，这个警报永远不会出现。

该`console.log`行只是为了确保在backbone.js 之后加载了该文件。

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T07:58:11.077

我认为你压倒了错误的事情：这`navigate`不是你认为的那样使用。

让我们看一部分[`Backbone.history.start`](https://github.com/documentcloud/backbone/blob/master/backbone.js#L1078)：

```
// Start the hash change handling, returning `true` if the current URL matches
// an existing route, and `false` otherwise.
start: function(options) {
  //...
  if (this._hasPushState) {
    Backbone.$(window).on('popstate', this.checkUrl);
  } else if (this._wantsHashChange && ('onhashchange' in window) && !oldIE) {
    Backbone.$(window).on('hashchange', this.checkUrl);
  } else if (this._wantsHashChange) {
    this._checkUrlInterval = setInterval(this.checkUrl, this.interval);
  } 
```

您将看到在 Backbone 中处理路由的所有各种方式都经过`checkUrl`而不是`navigate`. 该`checkUrl`方法做了一些忙碌的工作和调用`loadUrl`；忙碌工作的[一部分是这样的](https://github.com/documentcloud/backbone/blob/master/backbone.js#L1157)：

```
 if (this.iframe) this.navigate(current); 
```

so`navigate`将被调用，但只有当 an`<iframe>`用于模拟`hashchange`和`popstate`事件时才会调用，而 AFAIK 仅在您使用旧版本的 IE 时才会发生。

回到通常的代码路径。我们已经看到它`checkUrl`做了一些繁忙的工作和电话`loadUrl`，那么它有什么作用呢？[`loadUrl`这样做](https://github.com/documentcloud/backbone/blob/master/backbone.js#L1164)：

```
loadUrl: function(fragmentOverride) {
  var fragment = this.fragment = this.getFragment(fragmentOverride);
  var matched = _.any(this.handlers, function(handler) {
    if (handler.route.test(fragment)) {
      handler.callback(fragment);
      return true;
    }
  });
  return matched;
} 
```

如果您查看 in 中的[`route`方法和 in 中`History`](https://github.com/documentcloud/backbone/blob/master/backbone.js#L1145)的[`route`方法，`Route`](https://github.com/documentcloud/backbone/blob/master/backbone.js#L966)您会发现这`handler.callback`是从您的一个路由器调用路由处理程序并触发路由事件的原因。

您要替换的`navigate`方法几乎仅由[`Router`'s`navigate`](https://github.com/documentcloud/backbone/blob/master/backbone.js#L980)使用：

```
navigate: function(fragment, options) {
  Backbone.history.navigate(fragment, options);
  return this;
} 
```

如果你想在调用路由处理程序之前重定向，你可以`loadUrl`用这样的东西替换：

```
(function(History) {
    var _loadUrl = History.prototype.loadUrl;
    _.extend(History.prototype, {
        loadUrl: function() {
            var args = [].slice.apply(arguments);
            args[0] = this.getFragment(args[0]);
            // If args[0] is the fragment that you want to
            // redirect then replace it here or do whatever
            // needs to be done.
            return _loadUrl.apply(this, args);
        }
    });
})(Backbone.History); 
```

演示：http: [//jsfiddle.net/ambiguous/e4KYK/](http://jsfiddle.net/ambiguous/e4KYK/)

总的来说，我认为你最好在普通路由处理程序中处理重定向：当调用有问题的路由时，只需调用[`navigate`](http://backbonejs.org/#Router-navigate)任何方便的路由器。

* * *

请记住，除了[方法](http://backbonejs.org/#History)`Backbone.History`之外没有记录，因此这里的所有内容都可能发生变化。[`start`](http://backbonejs.org/#History)

# scala - 您如何打印以下 Slick 查询的选择语句？

> ID：14840010
> 
> 赞同：11
> 
> 时间：2013-02-12T19:12:47.987
> 
> 标签：scala, slick

我想找出以下哪些查询对于获取表的行数最有效，因此我试图打印出 select 语句。我知道您可以添加`.selectStatement`到 Queryable 但不知道这是否告诉我完整的真相，因为我必须删除结果生成代码，例如`.list.length`并将其替换为`.selectStatement`. Slick 可能会发现您正在寻找长度并进一步优化，所以我想查看整个查询的 select 语句，包括由于`.list.length`, 或`.count).first`

```
Query(MyTable).list.length

(for{mt <- MyTable} yield mt).list.length

(for{mt <- MyTable} yield mt.count).first 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-02-05T18:13:05.983

在带有 slick 2.0.0 的 play-2.2.1 中，在 application.conf 中有：

```
logger.scala.slick.jdbc.JdbcBackend.statement=DEBUG 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-06-30T10:38:34.877

在`Playframework 2.4.x`使用`Slick 3.0+`以下条目：

`<logger name="slick.jdbc" level="DEBUG"/>`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-01-05T16:55:48.207

在 Slick 3.1.0（我想在 3.0）中，您可以进行非常酷的 sql 调试：

```
[DEBUG] - slick.jdbc.JdbcBackend.statement - Preparing statement: select "id", "email", "name", "password" from "users" where ("email" = 'petya@mail.ru') and ("password" = ext.crypt('123456',"password"))
[DEBUG] - slick.jdbc.JdbcBackend.benchmark - Execution of prepared statement took 56ms
[DEBUG] - slick.jdbc.StatementInvoker.result - /----------------------+---------------+-------+----------------------\
[DEBUG] - slick.jdbc.StatementInvoker.result - | 1                    | 2             | 3     | 4                    |
[DEBUG] - slick.jdbc.StatementInvoker.result - | id                   | email         | name  | password             |
[DEBUG] - slick.jdbc.StatementInvoker.result - |----------------------+---------------+-------+----------------------|
[DEBUG] - slick.jdbc.StatementInvoker.result - | 4fe6e5c3-af74-40f... | petya@mail.ru | petya | $2a$10$WyOrBy7p48... |
[DEBUG] - slick.jdbc.StatementInvoker.result - \----------------------+---------------+-------+----------------------/ 
```

我只使用 logback 配置进行日志记录，所以很容易打开：

```
<logger name="slick" level="INFO" />
<logger name="slick.jdbc" level="DEBUG" /> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-06-11T10:52:56.997

在 Slick 3.0 中，您现在可以直接获取 SQL 以直接执行

```
val q = coffees.filter(_.supID === 15)
val action = q.delete
val affectedRowsCount: Future[Int] = db.run(action)
val sql = action.statements.head 
```

请参阅[http://slick.typesafe.com/doc/3.0.0/queries.html#querying](http://slick.typesafe.com/doc/3.0.0/queries.html#querying)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-08-22T06:14:27.070

如果您设置了日志记录框架，则可以设置`scala.slick.session=DEBUG`为记录连接池事件和查询。

（注意：设置`scala.slick=DEBUG`会让你被查询编译器的信息淹没）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-13T07:50:58.413

我无法使用 Slick 打印选择语句，但 Virtualeyes 提出了一个很好的建议：查看数据库日志！

好吧，我在 Scala Worksheets 中测试我的 Slick 代码，这就是你设置它的方式 - 对于工作表和 H2，你需要更改数据库 url 中的跟踪级别，例如

```
implicit val session = Database.forURL(
"jdbc:h2:mem:test1;TRACE_LEVEL_FILE=4", 
driver = "org.h2.Driver")
.createSession() 
```

这将告诉 H2 记录几乎所有内容。但请记住，您必须在首选项 -> 工作表中增加“要输出的最大数量或行数”。

事实证明，将 Slick 设置为正确的日志记录级别将达到相同的目的。

感谢 virtualeyes 提醒我注意房间里的大象 :-)

# svg - 从 HTML 表格中的选定元素中获取源字符串

> ID：14840014
> 
> 赞同：1
> 
> 时间：2013-02-12T19:13:04.097
> 
> 标签：svg, javascript

我有一个 HTML 表，其中包含各种图像。我想在单击表格中的一个项目时调用一个函数，该函数可以更改我网站中另一个元素的源图像。

如何从表格中对点击图像的 id 进行分级？

这是我调用的 Javascript 函数。

函数更改材料（）

```
 {
    var newsource = document.getElementById("WHAT TO PUT HERE??").src;
    canvas_background.setAttribute("xlink:href", newsource);
    alert("You loaded a new material");

    } 
```

我应该用什么代替这里放什么来获取点击的元素源？

我已经从表中省略了所有 (>) 符号。谢谢大家，对不起，我是一个完全的业余爱好者！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:42:16.460

你可能有类似的东西

```
<td id="foo" onClick="changeMaterial()">My Table Cell</td> 
```

我正在猜测。

您需要将一些内容传递给 changeMaterial 函数。元素id，或者你想要的url

```
<td id="foo" onClick="changeMaterial(this.id)">My Table Cell</td> 
```

你的功能看起来像

```
function changeMaterial(id) {
    var newsource = document.getElementById(id).src;
    ... 
```

# google-apps-script - 在 Google Apps 脚本中选择当前项目的触发器时出现意外错误

> ID：14840016
> 
> 赞同：1
> 
> 时间：2013-02-12T19:13:09.867
> 
> 标签：google-apps-script

我有一个每 10 分钟运行一次的脚本。我想关闭/删除触发器，当我在“资源”菜单下选择“当前项目的触发器”选项时，我得到“发生意外错误”。

我在不同的时间尝试了几次，结果都是一样的。我还尝试在“资源”菜单下选择“所有触发器”选项。我只设置了一个触发器。我过去能够关闭/移除触发器。

我想知道这是否可能是因为我可能在脚本即将运行时选择了该选项。

任何意见将不胜感激。

迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-12T15:10:46.147

我也有这个问题。原来我没有安装最新版本的 Chrome。一旦我更新了 Chrome，问题就解决了。

# ibm-mobilefirst - Worklight - BB 和 windows 中没有 worklight 的功能？

> ID：14840022
> 
> 赞同：-4
> 
> 时间：2013-02-12T19:13:29.073
> 
> 标签：ibm-mobilefirst

您能否帮我了解一下黑莓和 Windows 上没有哪些工作灯功能？有没有记录的地方，如果没有，你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:37:53.940

我认为没有公开的功能奇偶校验文档，但以下是 BlackBerry 6/7、7.1/10 和 Windows Phone 7、7.5、8 目前不支持的 Worklight 功能：

也许您正在寻找特定的东西？

*   直接更新（全部）
*   nativePage（全部）
*   Cordova 插件（全部）
*   皮肤（Windows Phone 7、7.5、8）
*   JSONStore（全部）
*   自定义设备配置（全部）
*   推送通知（全部）
*   短信通知（全部）
*   道场（全部）
*   外壳/内部应用程序（全部）
*   高级页面的容器（模块 45）（全部）
*   申请中心（全部）

# three.js - 在 Three.js 中动态地将顶点添加到一行中

> ID：14840026
> 
> 赞同：12
> 
> 时间：2013-02-12T19:13:46.857
> 
> 标签：three.js

我想出了如何在threejs中画一条线，问题是我需要动态地将顶点添加到线中。当我动态地将顶点添加到线时，场景不会更新。

我试过`geometry.verticesNeedUpdate = true`了，这似乎不起作用。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-12T20:16:00.117

编辑：使用`BufferGeometry`，`drawcalls`您现在可以实现等效的功能。请参阅[使用 three.js 动态绘制一条线](https://stackoverflow.com/questions/31399856/drawing-a-line-with-three-js-dynamically/31411794#31411794)。

三.js r.71

* * *

不支持向直线动态添加顶点。如[维基](https://github.com/mrdoob/three.js/wiki/Updates)中所述：

> 您只能更新缓冲区的内容，不能调整缓冲区的大小（这非常昂贵，基本上相当于创建新几何体）。
> 
> 您可以通过预先分配更大的缓冲区然后保持不需要的顶点折叠/隐藏来模拟调整大小。

三.js r.55

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-16T23:44:58.310

几天前我也遇到了这个问题。正如 WestLangley 所说，你不能开箱即用地做真正的动态几何，但 alterq 有几个策略来“伪造它”并在[https://github.com/mrdoob/three.js/issues上实现预期效果/342](https://github.com/mrdoob/three.js/issues/342)。

关于您对最后一个答案的评论，**不要**只是从每一帧的场景中删除并重新添加新行 - 您（很可能）会受到巨大的性能影响。您需要使用 alterq 的第一个或第二个变通策略。

在我的应用程序中，我使用了这样的选项 1：

1.  提前创建一个 THREE.Geometry 对象，并使用您认为需要的尽可能多的顶点（或者相当多的顶点）对其进行初始化。（在显示它们之前，您还需要以某种方式隐藏它们 - 我将它们的位置设置为屏幕外。）

2.  使用该几何体创建一个 THREE.Line 对象并添加到场景中。

3.  现在，当您想向该线添加一个新点时，您必须索引几何对象的顶点，找到其中最后一个未使用的点，然后更新它 - 将坐标更改为真实坐标，然后设置`geometry.verticesNeedUpdate = true;`（否则认为没有任何改变）。（请参阅[如何](https://github.com/mrdoob/three.js/wiki/Updates)在 wiki 上进行更新。）

我仍然在解决我的方法中的问题，但这至少应该让你在屏幕上得到一个线条图。

三.js r55

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-24T01:15:34.353

正如 WestLangley 的回答所说，你不能那样做。这是我决定使用的公认的hacky解决方法：

*   通过用我的线的起点填充geometry.vertices来分配比我需要的更多的顶点
*   当我想添加新点时，将数组的内容向左移动并将新点写入 geometry.vertices 的最后一个数组条目

代码：要创建一个新行：

```
function createNewLine(startingPoint){
    var geometry = new THREE.Geometry();
    for (i=0; i<MAX_LINE_POINTS; i++){
    geometry.vertices.push(startingPoint.clone());
    }
    myLine = new THREE.Line(geometry, lineMaterial);
    myLine.geometry.dynamic = true;
    scene.add(myLine);
    render();
} 
```

向直线添加一个点：

```
function addPoint(myPoint) {
    myLine.geometry.vertices.push(myLine.geometry.vertices.shift()); //shift the array
    myLine.geometry.vertices[maxLinePoints-1] = myPoint; //add the point to the end of the array
    myLine.geometry.verticesNeedUpdate = true;
    render();
} 
```

然后你最终得到的是一条线，它有一堆点堆叠在一起，然后是你实际想要渲染的点。我在 three.js git 存储库上提交了一个问题，以更简单地解决这个问题。 [https://github.com/mrdoob/three.js/issues/4716](https://github.com/mrdoob/three.js/issues/4716)

# java - Java：从另一个数组创建数组

> ID：14840028
> 
> 赞同：0
> 
> 时间：2013-02-12T19:13:48.013
> 
> 标签：java, arrays, split

我有一些用于问题游戏的 .txt 文件，我将它们分成了一些部分。这些部分被查看，当用户转到下一页问题时，我从 txt 中读取下一行。问题是我想将每一行的一部分存储到一个数组中。例如，如果有 30 行，我需要用这些部分创建另一个包含 30 个参数的数组，以便稍后与玩家回答的问题数组进行比较。

也许它不是很清楚，所以这里是代码。

我阅读了文件：

```
try {
        InputStream is = context.getAssets().open(questionFile);
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        // Skips lines
        for (i = 0; i< questionNumber; i++) {
            reader.readLine();

        }
        question = reader.readLine(); 
```

用户转到下一个问题：

```
public void Next(){
    questionNumber=questionNumber + 1;
} 
```

读取行的部分和我要创建`Array`行数的部分：

```
public String getCorrecta() {
    String[] parts = question.split("\\;");
    String correcta = parts[8];
    return correcta;
} 
```

因此，如果有带有以下示例的txt，请继续：

```
1;1; ; ; ; ; ; ;C
2;2; ; ; ; ; ; ;B
3;3; ; ; ; ; ; ;A
4;4; ; ; ; ; ; ;D 
```

我需要一个这样的数组：

```
public String [] Example = {"C","B","A","D"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:53:25.020

这是代码（假设索引 8（从零开始）是预先知道的。但是，如果您想读取文件并将所有列放入单独的数组中（更喜欢集合而不是数组），您应该一次性完成并且没有多次读取文件。需要更好地理解你的用例。

```
 public static final String COLUMN_SEPARATOR = ";";
      String[] stringsAtIndexN(int index, String inputFile)
        throws IOException {
        List<String> list = new ArrayList<String>();
        BufferedReader br = new BufferedReader(new FileReader(inputFile));
        String str;
        while ((str = br.readLine()) !=null) {
          list.add(str.split(COLUMN_SEPARATOR)[index]);
        }
        return list.toArray(new String[list.size()]);
      } 
```

# ios - 从 plist 中检索信息

> ID：14840038
> 
> 赞同：0
> 
> 时间：2013-02-12T19:14:24.890
> 
> 标签：ios, cocoa-touch, plist

我目前正在**尝试**在 iphone 上制作一个问答游戏，所以我看到了一个教程，但似乎 xcode 不理解我的 plist 或其他东西：我的标签在运行时是空白的：在我的 .m 文件中：

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.

questionNumber = 0;
NSString * path = [[NSBundle mainBundle] pathForResource:@"Propriety List" ofType:@"plist"];
if (path) {
NSDictionary *tempDict = [[NSDictionary alloc] initWithContentsOfFile: path];
self.Question = [tempDict objectForKey:@"Root"];}
currentQuestion = -1;
}

-(void) showNextQuestion {
currentQuestion++;
if (currentQuestion < [self.Question count]) {
    NSDictionary *nextquestion = [self.Question objectAtIndex:currentQuestion];
    self.Answear = [nextquestion objectForKey:@"QuestionAnswear"];
    self.labelQuestionTitle.text = [nextquestion objectForKey:@"QuestionTitle"];
    self.labelAnswearA.text = [nextquestion objectForKey:@"A"];
    self.labelAnswearB.text = [nextquestion objectForKey:@"B"];
    self.labelAnswearC.text = [nextquestion objectForKey:@"C"];
    self.labelAnswearD.text = [nextquestion objectForKey:@"D"];
    self.labelAnswearE.text = [nextquestion objectForKey:@"E"];
    }
else {
    // Game over
    }
}

- (IBAction)buttonPressedA:(id)sender{
if ([self.Answear isEqualToString:@"A"]) {
    numCorrect++;
    NSLog(@"%d", numCorrect);

} 
```

当然，我只是放了相关代码，而不是全部。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:31:36.040

这是我的 checkForPlist 方法，如果 plist 存在，则返回 BOOL 并填充 NSDictionary，因此值得运行：

```
-(BOOL) checkForPlist
{
    NSString *errorDesc = nil;
    NSPropertyListFormat format;
    NSString *plistPath;
    NSString *rootPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                              NSUserDomainMask, YES) objectAtIndex:0];
    plistPath = [rootPath stringByAppendingPathComponent:@"TestPlist.plist"];
    if (![[NSFileManager defaultManager] fileExistsAtPath:plistPath]) {
        plistPath = [[NSBundle mainBundle] pathForResource:@"TestPlist" ofType:@"plist"];
    }
    NSData *plistXML = [[NSFileManager defaultManager] contentsAtPath:plistPath];
    self.plistDictionary = (NSMutableDictionary *)[NSPropertyListSerialization
                                           propertyListFromData:plistXML
                                           mutabilityOption:NSPropertyListMutableContainersAndLeaves
                                           format:&format
                                           errorDescription:&errorDesc];
    if (!self.plistDictionary) {
        NSLog(@"Error reading plist: %@, format: %d", errorDesc, format);
        return NO;
    }
    else
    {
        NSLog(@"Plist exists - %@", [self.plistDictionary objectForKey:@"LastUpdated"]);
        return YES;
    }
} 
```

让我知道这是否有帮助！

# android - android listview适配器复选框刷新

> ID：14840040
> 
> 赞同：0
> 
> 时间：2013-02-12T19:14:49.173
> 
> 标签：android, listview, checkbox, adapter

注意：这不是滚动导致复选框迷失方向的常见问题。

我有一个带有相对布局（包含一个文本视图和一个复选框）作为列表视图行的列表视图适配器，我想这样做，所以当用户单击列表视图行时......然后复选框将切换。

我现在几乎可以正常工作了，但是发生的事情是复选框没有显示它已经切换，直到我将行从屏幕上滚动然后回来。所以它似乎没有正确刷新。我的猜测是我需要用复选框监听器明确地做其他事情。这是我的代码：

```
 ViewHolder holder = null;
        MainContactsListOnOff entry = listMaincontactslistOnOff.get(position);
        if (convertView == null) {
            LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            convertView = inflater.inflate(R.layout.contact_rowonoff, null);

        holder = new ViewHolder();
        holder.code = (TextView) convertView.findViewById(R.id.textView1onoff);
        holder.name = (CheckBox) convertView.findViewById(R.id.checkBox1onoff);
        holder.img = (ImageView) convertView.findViewById(R.id.imageView1onoff);
        convertView.setTag(holder);       

        } else {
            holder = (ViewHolder) convertView.getTag();
        }
     holder.code.setText(entry.getName().toString());
  if(entry.getOnoff()==1){
      holder.img.setImageResource(R.drawable.green);
  } else {
      holder.img.setImageResource(R.drawable.red);
  }
     convertView.setId(entry.getDevID());
     holder.name.setTag(entry);
     holder.name.setChecked(entry.getChecked());

     convertView.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                RelativeLayout rl = (RelativeLayout) arg0;
                CheckBox chkBx = (CheckBox) rl.getChildAt(1);
                MainContactsListOnOff mclOO = (MainContactsListOnOff)   chkBx.getTag();
                if(chkBx.isChecked()){
                    mclOO.setChecked(false);
                } else {
                    mclOO.setChecked(true);
                }

            }

        });
      return convertView; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T19:39:42.823

你只是忘了那里有一条线！

```
if(chkBx.isChecked()){
                mclOO.setChecked(false);
            } else {
                mclOO.setChecked(true);
            }
chkBox.setChecked(!chkBx.isChecked()); //<-----Add this line to update the box state! :) 
```

您只修改了标签，但没有修改复选框。这就是为什么当它重新加载时它是正确的。

（反弹：您可以将上面的内容简化为两行：

```
chkBox.setChecked(!chkBx.isChecked()); 
mclOO.setChecked(chkBox.isChecked()); 
```

)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T01:45:31.043

我实现了类似的功能——我在 listView 的一行中有一个复选框。所以，有三个地方处理这个事情：

**xml 文件：** 在 row.xml 中将复选框标记为“可聚焦”（在我的情况下，这是文件名）。

```
<CheckBox
    android:id="@+id/on_off"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:focusable="false" /> 
```

**将接收复选框点击的Activity：** 使该Activity实现OnCheckedChangeListener。然后，您将需要实现其 onCheckedChanged() 方法。

```
@Override
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

        // here you receive clicks
            // you can perform your desired action

    } 
```

现在，问题是如何将复选框与侦听器（即列表视图活动）相关联。好吧，无论您将 xml 复选框绑定到 java 中的 CheckBox 的任何位置，都将其设置为

就我而言，我有一个自定义 View 类，代表一行列表视图。我将活动传递给该类的构造函数，然后在其构造函数中将其用作实现 OnCheckedChangeListener 的活动的 CheckedChangedListener。

```
public class ListRow extends RelativeLayout  {

    // other elements
    ...
    private CheckBox OnOff;

    public ListRow(Context context, ...) {
        super(context);

         LayoutInflater inflater = 
                 (LayoutInflater)     context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
         inflater.inflate(R.layout.list_row, this, true);
         ...

         OnOff = (CheckBox) findViewById(R.id.on_off);
        OnOff.setOnCheckedChangeListener((OnCheckedChangeListener) context);

    }
} 
```

# playframework - Play Framework：如何获取资产的绝对路径

> ID：14840043
> 
> 赞同：2
> 
> 时间：2013-02-12T19:14:59.860
> 
> 标签：playframework, playframework-2.0

我的 Play 应用程序会自动生成一些 HTML 电子邮件，这些电子邮件当然会引用服务器上的一些图像。由于 HTML 电子邮件需要完整的 URL 才能在客户端获取图像，因此我在我的视图模板中定义了基本 URL，`application.conf`然后在我的视图模板中构建了完整路径。也就是说，有没有办法获取`public/images`目录的完整 URL，这样我就不再需要额外的配置了？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T19:58:29.293

AFAIK，您可以使用反向路由获取资产的完整 URL：

```
routes.Assets.at("images/anImage.png").absoluteURL() 
```

# delphi - 判断一个窗口是否有子窗口

> ID：14840052
> 
> 赞同：1
> 
> 时间：2013-02-12T19:15:16.177
> 
> 标签：delphi, winapi, delphi-7

我使用以下代码获得了一个窗口句柄：

```
var h: THandle;
...
h := FindWindow('MozillaWindowClass', NIL); 
```

h 有效 (> 0)。

我如何知道这个窗口是否有任何子窗口？

我不能使用 FindWindowEx()，因为它需要一个类名。

我想在这里完成的是找出 MozillaWindowClass 窗口是属于 Thunderbird 还是 Firefox。看起来 Thunderbird 有一个没有子级的 MozillaWindowClass，但 Firefox 没有，所以这将是一种快速查找的方法。（我无法使用 CreateToolhelp32Snapshot() 获取进程名称，因为我的代码也需要在 Windows 2000 上运行）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T19:17:53.553

确定窗口是否有任何子窗口的最简单方法是调用[`GetWindow`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633515.aspx)传递`GW_CHILD`。

```
function HasChildren(Window: HWND): Boolean;
begin
  Result := GetWindow(Window, GW_CHILD)<>0;
end; 
```

# ruby-on-rails - 当我只想要 public/images 时，image_path 总是使用 assets/

> ID：14840063
> 
> 赞同：2
> 
> 时间：2013-02-12T19:16:14.700
> 
> 标签：ruby-on-rails, api, ruby-on-rails-3.2

为什么要`image_path`坚持附加`assets/`到存储在 public/images 中的图像路径的前面？

我正在建立一个摄影师的网站，所以我们自然希望照片在其中，包括随机选择一些照片作为布局的一部分。此外，我建立了一个超级简单的画廊，只显示所有照片。这些图像文件存储在：

```
public/images/gallery 
```

我得到了一个 ImageMagick gem 来将它们缩小到所需的大小。这些小文件存储在：

```
public/images/gallery/sm/ 
```

作为呈现布局 ERB 的一部分，缩小在页面加载时完成。我知道它最初可能听起来很糟糕，但它只会缩小一次图像，而延迟缩小意味着我们不必重新启动服务器来添加新照片（他想要这样做）。

我的阅读表明资产管道是用于静态布局的东西，但这比那更动态。我被引导相信 public/images 是这些东西应该去的地方，特别是因为生产模式 Rails 抱怨生成的缩略图没有编译。

输入问题：我将这些图像放在上面显示的路径中，并且 image_path 会返回看起来像资产管道路径的内容。当我展平子目录并将所有内容都放在公共/图像中时，它甚至都不起作用。

我的解决方法是手动构建标签。那么image_path（以及扩展名image_tag）是否仅适用于资产管道？我应该从公共图像的字符串中构造标签吗？我还发现提到 image_path 应该首先在公共场合查找匹配的文件，但我也看到文档（[http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html)）声称它不会验证它返回路径的东西的存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:58:20.943

编辑：原始答案中的错误

Rails 资产管道用于为应用程序启动时存在的资产提供服务。对于按照您的建议提供动态资产，有一个类似问题的答案：[Rails 3.1 assets not Recognizing new images upload by rmagick until server restart](https://stackoverflow.com/questions/7750989/rails-3-1-assets-not-recognizing-new-images-uploaded-by-rmagick-until-server-res)这比我刚才的回答要好得多。

在四处搜索以改进我的第一个答案后，我认为创建 image_tag 的最佳解决方案是创建自己的类似 image_tag 的助手。也许：

```
def public_image_path(filename)
  [your path to that file]
end

def public_image_tag(filename, options={})
  image_tag(public_image_path(filename), options)
end 
```

# javascript - 当我们在顶部有一个持久栏时锚链接

> ID：14840068
> 
> 赞同：0
> 
> 时间：2013-02-12T19:16:41.057
> 
> 标签：javascript, jquery, browser, scroll

有趣的“问题”。我们花了很多时间使我们的顶部栏在网站上保持不变。现在，每当在页面上单击锚点时，浏览器都会将我带到一个部分，但是因为有一个持久栏，所以该部分的开头隐藏在持久栏后面 :)

有没有什么聪明的主意可以通过 Jquery 或其他东西来跟踪它，而不是浏览器默认值，也许可以使用“动画”和“滚动顶部”使这种滚动锚定工作？- 然后将用户带到锚点偏移量*上方*约 30px 处，这样即使有持久栏，预期的目的地现在在持久栏下方可见？

当在页面中单击链接时，我可以控制这一点，但是如何控制用户何时通过锚点进入页面。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:57:51.153

您可以使用 window.location.hash 隔离锚散列。根据 URL 的其余部分，您可能需要稍微调整一下 hashTag 值。然后，一旦你有了一个 jQuery 对象，你就可以随心所欲了。

HTML：

```
< a id="sectionName" name="sectionName"></ a> 
```

JS：

```
var hashTag = window.location.hash;
$(hashTag).css({ position: "absolute", top: "30px" }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T19:29:17.823

查看这个 jquery 示例。[Smooth-Scrolling](http://www.devirtuoso.com/2011/11/smooth-scrolling-in-jquery/)它还显示了如何设置偏移变量，以便您可以设置顶栏的缓冲区

# php - 是否可以让 php 加载并运行 Javascript？

> ID：14840072
> 
> 赞同：-2
> 
> 时间：2013-02-12T19:16:49.627
> 
> 标签：php, javascript

我有一个在目录上运行 glob 的 php 脚本，它返回它在目录中找到的所有图像，在所有图像之前有一个来自谷歌的广告。如果我可以使用 glob 加载 10 个图像，然后从谷歌广告服务插入 javascript，并继续加载图像，我会很高兴。所以每 10 张图片就有一个广告。到目前为止，我的每一次尝试都失败了，任何帮助都将不胜感激！

下面是我的PHP代码

```
<?php
$manualwidth = $_GET['manwidth'];
$manualdir = $_GET['mandir'];
$manualmodel = $_GET['manurl'];
$manualurl = $manualdir . '/' . $manualmodel . '/';
$files = glob($manualurl .'{*.jpg,*.gif}', GLOB_BRACE);

for ($i=0; $i<count($files); $i++)

{
    $num = $files[$i];
    echo '<img src="'.$num.'" width="'.$manualwidth.'"><br>'."&nbsp;&nbsp;";
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T19:21:25.987

每 10 次迭代回显 js

```
<?php
$count = count($files);
for ($i=0; $i<$count; $i++)
{
    if($i % 10 === 0) {
      echo "google ads here";
    }
    $num = $files[$i];
    echo '<img src="'.$num.'" width="'.$manualwidth.'"><br>'."&nbsp;&nbsp;";
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:27:56.873

如何将广告代码放入目录中的 html 文件中：

**广告.html**

```
<script type="text/javascript>
//Code to run
</script>
//other ad stuff here 
```

然后在每 10 个图像之后包含该文件：

**索引.php**

```
<?php
for($i = 1; $i <= count($files); $i++)
{
    //Echo image code here

    if($i%10 == 0)
    include("ad.html");

} 
```

# sharepoint - 是否可以自动检查“在新窗口中打开”以在 SharePoint 2010 中插入链接？

> ID：14840073
> 
> 赞同：0
> 
> 时间：2013-02-12T19:16:54.727
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-designer

我正在寻找一种在使用 SharePoint 2010 网站功能区中的“插入”选项卡插入链接时自动选中“在新窗口中打开”框的方法。

有没有办法在通过浏览器可用的 SharePoint 设置中进行配置？如果没有，我可以在 SharePoint Designer 中采取哪些步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:49:27.800

不，您将无法以任何简单的方式设置此设置。

您将需要使用 Javascript 始终选中此复选框，或使用在所有站点上启用的委托控件。

# iphone - 如何在 MapView 中处理具有相同经纬度的多个注释

> ID：14840076
> 
> 赞同：3
> 
> 时间：2013-02-12T19:17:04.930
> 
> 标签：iphone, objective-c, ipad, mkmapview

我正在放置联系人的针脚，有些针脚具有相同的经度和纬度。当 Pin 图被放到地图上时，它们会显示出来，但是当我触摸一次有两个以上联系人时，我只会看到第一个和最后一个。

那么，在相同的经纬度上处理多个联系人的最佳方式是什么？

理想情况下，我想我可以显示该位置的数量，然后我希望用户可以继续触摸图钉，它会循环浏览注释。我不确定该怎么做，或者是否有更好的解决方案。

感谢您对问题的任何帮助或见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:08:02.650

这是一个想法：

![k-均值](../Images/5f5d5c5b2d6b69c987a4138a691eebef.png)

在现有注释上运行 K-means 算法（参见[https://stackoverflow.com/a/5978803/412916](https://stackoverflow.com/a/5978803/412916)），并在引脚密度超过任意数字时删除集群注释。如果用户触摸针脚，您可以添加注释并为来自集群针脚的动画制作动画。我建议您在动画时禁用交互，因为逻辑变得混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T21:35:36.483

我会让一个注释代表该纬度和经度的所有联系人/对象的 NSDictionary。用不同颜色的 pin 表示多个 lat&long。

```
-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    static NSString *identifier = @"AnnotationIdentifier";

    if ([annotation isKindOfClass:[NSDictionary class]]) {
//Code here to show red pin vs. blue pin
}
} 
```

你需要一个自定义的 MKPinAnnotationView 子类的 init 方法，比如：

```
-(id)initWithCoordinate:(CLLocationCoordinate2D) coordinateC:(NSDictionary *)dictionaryParam; 
```

最后，要在触摸该引脚时运行一个方法，如下所示：

```
-(void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
{
     if ([view.annotation class] == [NSDictionary class]) {
        NSLog(@"multiple");

// more code here to run a view for multiple contacts

    }
    else
    {
...
}
} 
```

# c++ - 如何使用向量和结构？

> ID：14840082
> 
> 赞同：3
> 
> 时间：2013-02-12T19:17:20.483
> 
> 标签：c++, data-structures, vector, struct

我需要计算字符串中的字母，按计数和`cout`结果对它们进行排序。为此，我正在尝试使用`vector`and `struct`。这是我的代码的一部分，但它不起作用，因为我不知道如何实现某些东西：

```
#include <iostream>
#include <string>
#include <vector>
#include <algorithm>

using namespace std;

struct int_pair{
     int key;
     int value;
};  

bool sort_by_value(int_pair left, int_pair right){
    return left.value < right.value;
}

int main() {    
    string characters = "aasa asdfs dfh f ukjyhkh k wse f sdf sdfsdf";    
    vector<int_pair> most_frequent;     

    for (string::size_type i = 0; i <= characters.length(); i++) {
        int int_char = (int)characters[i];
        most_frequent[int_char]++; <-- I want to do something like this, but it's not working 
    }

    sort(most_frequent.begin(), most_frequent.end(), sort_by_value);

    for (vector<int_pair>::iterator it = most_frequent.begin(); it != most_frequent.end(); ++it) <-- is this call correct?
        cout << " " << it->key << ":" << it->value << endl;    

    return 0;
} 
```

在这段代码中，我有 2 个部分我不知道如何处理：

```
most_frequent[int_char]++; <-- I want to do something like this, but it's not working 
```

和

```
for (vector<int_pair>::iterator it = most_frequent.begin(); it != most_frequent.end(); ++it) <-- is this call correct? 
```

也许您可以在此代码中看到任何其他错误和潜在问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T19:48:54.347

我会使用 std::map 来确定每个字母的频率，然后将其复制到多重映射中，同时反转键和值以使它们按顺序排列。

```
#include <iostream>
#include <map>
#include <algorithm>

template<class T, class U>
std::pair<U,T> flip_pair(const std::pair<T,U>& p) {
  return std::make_pair(p.second,p.first);
}

int main(){
  std::string characters = "zxcvopqiuweriuzxchajksdui";
  std::map<char,int> freq;
  std::multimap<int,char> rev_freq;

  // Calculate the frequency of each letter.
  for(char c: characters){
    freq[c]++;
  }

  // Copy the results into a multimap with the key and value flipped 
  std::transform(std::begin(freq), std::end(freq), 
                 std::inserter(rev_freq, rev_freq.begin()), 
                 flip_pair<char,int>);

  // Print out the results in order.
  for(std::pair<int,char> p : rev_freq){
    std::cout << p.first << ": " << p.second << std::endl;
  }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T19:23:05.987

这应该做你需要的：

```
most_frequent[int_char].key = int_char;
most_frequent[int_char].value++; 
```

是的，它设置了`key`很多次，即使它不需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T19:21:14.593

使用键访问容器时（`vector`使用整数索引，在您的情况下为“键”），您不必再次将键存储在容器的值字段中。

所以你不需要你的`struct`，因为你只需要 value 字段并且可以直接在向量中存储出现的次数。

这个想法是在开始时用 256 个整数填充向量，全部初始化为零。然后，使用向量索引作为“键”（字符代码）来访问元素（出现次数）。

这将产生类似于以下的代码：

```
// initialize with 256 entries, one for each character:
vector<int> counts(256);

for (string::size_type i = 0; i <= characters.length(); i++) {
    // for each occurrence of a character, increase the value in the vector:
    int int_char = (int)characters[i];
    counts[int_char]++;  
} 
```

向量的填充完成后，您可以使用以下算法找到最大值（不仅是值，还有存储它的键）[`std::max_element`](http://en.cppreference.com/w/cpp/algorithm/max_element)：

```
vector<int>::iterator most_frequent =
        std::max_element(counts.begin(), counts.end());

// getting the character (index within the container, "key"):
std::cout << (char)(most_frequent - counts.begin());

// the number of occurrences ("value"):
std::cout << (*most_frequent); 
```

这是您的更改示例（仅打印最常见的字符，这里是空格，所以您看不到它）：http: [//ideone.com/94GfZz](http://ideone.com/94GfZz)

您*可以*对该向量进行排序，但是，您当然会丢失密钥，因为元素会移动并更改它们的索引。有一个很好的技巧来处理这样的统计数据：使用*反转（多）映射*（键，值反转）：

```
multimap<int,int> keyForOccurrence;
for (vector<int>::iterator i = counts.begin(); i != counts.end(); ++i) {
    int occurrences = *i;
    int character = i - counts.begin();
    keyForOccurrence.insert(std::pair<int,int>(occurrences, character));
} 
```

更新代码：http: [//ideone.com/Ub5rnL](http://ideone.com/Ub5rnL)

您现在应该自己理清的最后一件事是如何访问和处理此地图中的数据。这个*反转映射*的奇妙之处在于它现在可以按出现次数自动排序，因为映射是按键排序的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T20:00:19.083

我发现使用**`std::map`**容器来存储每个字符的出现更自然。字符是地图的*键*，它的出现次数是地图的*值*。很容易扫描源字符串并使用 构建此映射`std::map::operator[]`，并`++`增加出现次数。

然后，您可以从上面的映射构建第二个映射，键和值*反转*：所以这个映射将按*出现次数*排序，然后您可以打印第二个映射。请注意，您必须使用 a`std::multimap`作为第二个映射，因为它的键（即出现次数）可以重复。

示例代码如下（我用 VS2010 SP1/VC10 测试过）：

```
#include <stddef.h>     // for size_t
#include <algorithm>    // for std::transform
#include <functional>   // for std::greater
#include <iostream>     // for std::cout
#include <iterator>     // for std::inserter
#include <map>          // for std::map, std::multimap
#include <ostream>      // for std::endl
#include <string>       // for std::string
#include <utility>      // for std::pair
using namespace std;

int main() 
{    
    string str = "aasa asdfs dfh f ukjyhkh k wse f sdf sdfsdf";    

    // Build the occurrences map (char -> occurrences)
    map<char, size_t> freq;     
    for (size_t i = 0; i < str.length(); ++i)
        freq[ str[i] ]++;

    // Build a new map from previous map with inverted <key, value> pairs,
    // so this new map will be sorted by old map's value (i.e. char's
    // occurrences), which is new map's key. 
    // Use the std::greater comparator to sort in descending order.
    multimap<size_t, char, greater<size_t>> sorted_freq; 
    transform(
        freq.begin(), freq.end(),                       // source 
        inserter(sorted_freq, sorted_freq.begin()),     // destination
        [](const pair<char, size_t>& p)                 // invert key<->value
        { 
            return pair<size_t, char>(p.second, p.first); 
        }
    );

    // Print results    
    for (auto it = sorted_freq.begin(); it != sorted_freq.end(); ++it)
        cout << it->second << ": " << it->first << endl;
} 
```

> 输出：
> 
> ```
>  : 9
> s: 7
> f: 7
> d: 5
> a: 4
> k: 3
> h: 3
> u: 1
> w: 1
> y: 1
> j: 1
> e: 1 
> ```

如果您不想打印出现的空格字符，则可以轻松将其过滤掉。

请注意，使用`std::map`/`std::multimap`也将比`std::vector`使用非 ASCII 字符更好地扩展，例如，如果您使用 Unicode UTF-32（因为 Unicode 字符远不止 256 个）。

# jquery - 如何根据 Jquery 中的动画速度加载内容？

> ID：14840085
> 
> 赞同：0
> 
> 时间：2013-02-12T19:17:37.300
> 
> 标签：jquery, slider, jquery-animate

   我正在创建自己的 jquery 滑块。我所做的是我在顶部有一些图像作为菜单。其中一些被隐藏了。所以我有下一个和上一个按钮来显示剩余的菜单。
根据选择的菜单（直接单击菜单或使用下一个，上一个按钮），我将显示其下方的内容。

一切都很好。现在我想实现动画。我通过向左添加 css 属性来显示菜单。

```
jQuery("#positionindicator").css({left : "+=" + imageWidth + "px"}); 
```

当我尝试使用动画时，如果用户**快速**单击下一个或上一个按钮，内容加载缓慢。为了显示内容，我正在调用另一个名为`loadcontent`

```
jQuery("#"+i+"_slidecontent").show(); // for showing the content, similarly for hide the content too 
```

因此，有时菜单选择指示为另一个菜单，并为其他菜单加载内容。

我想同时实现这两者，即使用户**连续点击按钮**。

我所做的是我尝试使用动画而不是 css，但我得到了我在上述场景中提到的错误。

```
jQuery("#positionindicator").animate({left : "+=" + imageWidth + "px"}); 
```

![截屏](../Images/cf670cf9bf20a756a151f1ced590ba09.png)

# objective-c - 为什么 - NSWindowcontroller 的不同实例如何共享相同的变量？

> ID：14840086
> 
> 赞同：-1
> 
> 时间：2013-02-12T19:17:37.973
> 
> 标签：objective-c, cocoa, automatic-ref-counting, nstimer, nswindowcontroller

有一个 nib 文件，我正在创建具有不同上下文的不同窗口实例，所有控件都正常工作，除了计时器和由计时器触发的变量看起来与所有窗口共享。这就是我创建窗口实例的方式。

```
#import <Cocoa/Cocoa.h>
#import "MYWindow.h"
@interface AppDelegate : NSObject <NSApplicationDelegate>
{
}
@property (strong) MYWindow *pickerWindow; 
```

--

```
#import "AppDelegate.h"
@implementation AppDelegate
-(IBAction)newWindow:(id)sender
{
    myWindow = [[MYWindow alloc] initWithWindowNibName:@"MYWindowNIB"];
    [myWindow showWindow:self];
} 
```

我也遇到了 ARC 的问题，当我打开前一个窗口的新实例时，即使我声明它的属性很**强大**，这也是为什么使用标志 -fno-objc-arc 编译 AppDelegate 的原因。否则，正如我所说的那样，我所做的一切都会立即发布。XCode 4.6

## 编辑

```
int i = 0;
-(void)windowDidLoad
{
    timerMoveOutNavBar = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(countUP) userInfo:nil repeats:YES];
}

-(void)countUP
{
    [text setStringValue:[NSString stringWithFormat:@"%d", i]];
    i++;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:04:56.670

我找到了解决方案，您必须将变量和所有其他对象声明为私有。

```
@private
    int i; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T19:40:44.107

“共享相同的变量”是什么意思？您可以拥有一个所有窗口控制器都继承自的超类，并且它们都将具有您在超类中创建的属性和方法，如果这就是您所说的。

至于正在释放的窗口，您是否在 IB 中选中了“关闭时释放”框？如果是这样，请取消选中该框。

**编辑后**

问题与初始化 int 变量“i”的方式有关。通过将其放在方法之外，您将其声明为所有实例都会看到的全局变量。您应该创建一个 ivar 并将其值设置为零，您可以在其中创建计时器：

```
@implementation MyWindowController {
   IBOutlet NSTextField *text;
    int i;
}

- (void)windowDidLoad {
    [super windowDidLoad];
    [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(countUP:) userInfo:nil repeats:YES];
    i = 0;
}

-(void)countUP:(NSTimer *) timer {
    [text setStringValue:[NSString stringWithFormat:@"%d", i]];
    i++;
    if (i== 50) [timer invalidate];
} 
```

请注意，我在选择器名称中添加了一个冒号——使用计时器，计时器将自己作为参数传递给它的选择器，因此您可以像我一样引用它来使其无效。但是可以通过将计时器分配给 ivar 或属性（在您的情况下为 timerMoveOutNavBar）来按照您的方式进行操作。

# javascript - JavaScript, No JQuery Please, 如何获取 iframe 中特定标签的总数

> ID：14840088
> 
> 赞同：1
> 
> 时间：2013-02-12T19:17:42.093
> 
> 标签：javascript, html

我需要知道如何获取同一域上 iframe 中特定标签的总数。我目前正在使用这个没有 iframe 的工作示例：

```
<div id="id_of_first_div">
    <p>
    </p>
    <p>
    </p>
    <div>
        <p>
        </p>
    </div>
    <p>
    </p>
    <p>
    </p>
</div>

<script>
var top_level_div = document.getElementById('id_of_first_div');
var count = top_level_div.getElementsByTagName('p').length;
document.write(count);
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T19:21:43.567

假设 iframe 与包含窗口位于同一域中：

```
ifr = // your preferred method of getting the <iframe> element, getElementById preferred
count = ifr.contentDocument.getElementsByTagName('p').length; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:22:00.803

如果它在同一个域上：

```
function getFrameCount(iframeID, elem){
   var iFrame = document.getElementById(iframeID), iFrame_p;
   if ( iFrame.contentDocument ) { // FF etc.
     iFrame_p = iFrame.contentDocument.getElementsByTagName(elem);
   } else if ( iFrame.contentWindow ) { // IE
     iFrame_p = iFrame.contentWindow.document.getElementsByTagName(elem);
   }
   return iFrame_p.lenght;
}

var number_of_p = getFrameCount('iframeID', 'p'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T19:25:35.810

创建漂亮代码的简单方法是创建获取 iframe 内容的方法，因为它在某些浏览器中有所不同。

```
function getIframeContent(frmName)
{
  var iframe = document.getElementById(frmName);
  var innerDoc = (iframe.contentDocument) ? iframe.contentDocument :   iframe.contentWindow.document;
  return innerDoc;
} 
```

然后访问`getIframeContent.getElementsByTagName....` 我希望这对您有所帮助的元素。

# vb.net - ZedGraph - 强制所有图形窗格的大小相同

> ID：14840092
> 
> 赞同：0
> 
> 时间：2013-02-12T19:17:55.633
> 
> 标签：vb.net, winforms, zedgraph

我正在使用 ZedGraph 控件 (zgc) 创建单独的堆叠条形图并将它们显示在单个堆叠列中，如下图所示。

我遇到的问题是我无法控制控件中显示的窗格数量，因为这是由列表框中的项目数量决定的。似乎控件的默认性质允许图形窗格的高度根据控件中显示的窗格数量而变化。

zgc 设置为dock=fill 在面板控件中，该面板控件在表单中设置为dock=fill。我想强制图形窗格为静态高度，并且当图形窗格的数量超过表单的高度时，需要在面板中显示垂直滚动条。我怎样才能实现这一目标？我用于创建和填充 zgc 的代码发布在图像下方。

![在此处输入图像描述](../Images/ab47c2cf95c03a1e7b3b2ccb3416c162.png)

```
Private Sub CreateGraph(ByVal dat As Date)

    Dim count As Integer = 0
    Dim master As MasterPane = zgc.MasterPane
    master.Fill = New Fill(Color.FromArgb(180, 180, 180), Color.FromArgb(180, 180, 180), 45.0F)
    master.PaneList.Clear()
    master.Title.IsVisible = True
    master.Title.Text = "Workload for " & dat.ToShortDateString()
    master.Margin.All = 10
    master.InnerPaneGap = 5
    master.IsCommonScaleFactor = False

    For Each mach As String In lbMach.Items
        rowCount = 0
        Dim myPaneT As New GraphPane(New Rectangle(10, 10, 10, 10), "", "Time in Minutes", mach)
        myPaneT.Fill.IsVisible = False
        myPaneT.Chart.Fill = New Fill(Color.White, Color.White, 45.0F)
        myPaneT.BaseDimension = 3.0F
        myPaneT.XAxis.Title.IsVisible = False
        myPaneT.XAxis.Scale.IsVisible = False

        myPaneT.XAxis.Scale.Min = 0
        myPaneT.XAxis.Scale.Max = (MeiSettings.WrkHrs * 60)
        myPaneT.Legend.IsVisible = True
        myPaneT.Border.IsVisible = False
        myPaneT.Title.IsVisible = False
        myPaneT.XAxis.MajorTic.IsOutside = False
        myPaneT.XAxis.MinorTic.IsOutside = False
        myPaneT.XAxis.MajorGrid.IsVisible = True
        myPaneT.XAxis.MinorGrid.IsVisible = True
        myPaneT.Margin.All = 1

        If count = lbMach.Items.Count - 1 Then
            myPaneT.XAxis.Title.IsVisible = True
            myPaneT.XAxis.Scale.IsVisible = True
            myPaneT.Margin.Bottom = 10
        End If

        If count > 0 Then
            myPaneT.YAxis.Scale.IsSkipLastLabel = True
        End If

        myPaneT.YAxis.MinSpace = 20
        myPaneT.Y2Axis.MinSpace = 20

        Dim dt As DataTable = ItemsByMachineDT(mach, dat)
        Dim myCurve As BarItem

        If dt.Rows.Count > 0 Then
            Dim profName As String = Nothing
            Dim timeDur() As Double
            For Each dr As DataRow In dt.Rows
                If profName = dr("PRO").ToString() Then
                    timeDur = {((Convert.ToDouble(dr("QTY")) / Convert.ToDouble(dr("MPM"))))}
                Else
                    timeDur = {((Convert.ToDouble(dr("QTY")) / Convert.ToDouble(dr("MPM")) + Convert.ToDouble(dr("Time"))))}
                End If

                myCurve = myPaneT.AddBar(dr("JOB").ToString & " - " & dr("PRO").ToString(), timeDur, Nothing, BarColor(rowCount))

                If MeiSettings.IsGradient = True Then
                    myCurve.Bar.Fill = New Fill(BarColor(rowCount), Color.White, BarColor(rowCount), 90.0F)
                Else
                    myCurve.Bar.Fill = New Fill(BarColor(rowCount), BarColor(rowCount), BarColor(rowCount), 90.0F)
                End If

                rowCount += 1
                profName = dr("PRO").ToString()
            Next
        End If

        myPaneT.YAxis.MajorTic.IsBetweenLabels = True
        myPaneT.YAxis.Type = AxisType.Text
        myPaneT.BarSettings.Type = BarType.Stack
        myPaneT.BarSettings.Base = BarBase.Y
        master.Add(myPaneT)
        count += 1
    Next

    zgc.IsShowPointValues = True

    Using g As Graphics = Me.CreateGraphics()
        master.SetLayout(g, PaneLayout.SingleColumn)
        master.AxisChange(g)
    End Using

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:10:23.980

控制每个 GraphPane ：

```
 GraphPane temp = zgc.MasterPane.PaneList.ElementAt(ind); //ind => index of the graphpane in zedgraphcontrol 
```

设置静态高度 n 宽度 ZedgraphControl ：

```
 zgc.Size = new Size(Width,Height); 
```

设置滚动条 ZedgraphControl 的可见性：

```
 zgc.IsShowHScrollBar = true;
    zgc.IsShowVScrollBar = true; 
```

# python - 如何在cython中切片列表

> ID：14840097
> 
> 赞同：3
> 
> 时间：2013-02-12T19:18:34.837
> 
> 标签：python, list, cython, slice

我在 cython 中有一个列表，并且想在不使用 python 对象（用于速度）的情况下对其进行切片。

```
cdef int len = 100    
cdef int *q
cdef int *r

q = <int *>malloc( len *cython.sizeof(int) )

r = q[50:] 
```

并得到了这个错误：

```
r = q[50:]
    ^
------------------------------------------------------------

hello.pyx:24:9: Slicing is not currently supported for 'int *'. 
```

有有效的方法吗？“......目前不支持......”让我有点害怕。我使用 cython 0.18

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T01:44:42.033

通过 Typed Memoryviews 可以实现快速切片和其他一些很酷的东西。但是为了进行切片，您需要一些关于数组的元数据，因此最好使用数组类型而不是普通指针。查找文档以获取更多信息：[http](http://docs.cython.org/src/userguide/memoryviews.html) ://docs.cython.org/src/userguide/memoryviews.html 。

您的问题的修改给出：

```
cdef int q_array[5] # c array
cdef int[:] q # 1D memview
cdef int[:] r # another 1D memview

q = q_array # point q to data
r = q[2:] # point r to a slice of q

r[0] = 5 # modify r

# test                                                                      
print q[2]
print r[0] 
```

如果您真的不想要它，您仍然可以从切片创建指针：

```
# ...

cdef int* r_ptr
cdef int* q_ptr

r_ptr = &r[0]
q_ptr = &q[0]

print q_ptr[2]
print r_ptr[0] 
```

也适用于 numpy 数组：

```
import numpy as np

cdef int[:] q = np.arange(100).astype('int32') # slow
cdef int[:] r

r = q[50:] # fast slicing

print r[0] 
```

# php - 如何让这个 iframe 使用所有高度？

> ID：14840100
> 
> 赞同：0
> 
> 时间：2013-02-12T19:19:00.627
> 
> 标签：php, css, iframe, height, max

我想知道如何让“这个”iframe/div（标有红色边框）使用所有可用的高度。iframe 距离顶部 160 像素，我希望它到底部。当我将高度设置为 100% 时，它会填满所有内容，但是当我使网页不那么高时，它会很晚才显示滚动条。这是因为他距离顶部 160 像素......有人知道如何解决这个问题吗？

php:

```
<div id="sidebar"  style="display: none;">
    <div class="sidebar p1"><a onclick="toggle_visibility('sidebar');"><i class="icon-arrow-left-3 fg-color-white"></i></a></div>
    <div class="sidebar p2">settings</div>
    <div class="sidebar p3">change theme color:</div>

    <iframe id="data" src="/test/coredata/sidebar/theme_data.php"/>

</div> 
```

CSS：

```
#sidebar{ 
        width: 315px; height: 100%; 
        position: fixed; right: 0px;
        top: 0px; background: #004d5f;
}
#data{width:310px; height:300px; position:absolute; top: 160px; left: 0px; border:3px solid #FF0000;} 
```

屏幕： http: [//puu.sh/21vAz](http://puu.sh/21vAz)（在 url 中由于 10 代表...）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:24:13.673

您已将 iframe 的高度设置为 300px：#data{width:310px; 高度：300px；

如果你想让它填满整个框架，你应该把它设置为 100%

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T19:25:41.457

```
 <script language="JavaScript">
    <!--
function calcularAltura()
{
  //Calcular a altura da página actual.
  var the_height=
    document.getElementById('the_iframe').contentWindow.
      document.body.scrollHeight;

  //Alterar a altura do iframe
  document.getElementById('the_iframe').height=
      the_height;
}
//-->
</script>

<iframe width="700" id="the_iframe" 
    onLoad="calcularAltura();" 
    src="/test/coredata/sidebar/theme_data.php"
    scrolling="NO"
    frameborder="0"
    height="1">
</iframe> 
```

它应该工作;）

# clojure - Clojure 系列的 defs 但不暴露于外部范围

> ID：14840101
> 
> 赞同：4
> 
> 时间：2013-02-12T19:19:02.757
> 
> 标签：clojure

在我的clojure 文件的开头，我有一系列的defs，其中一些只是垫脚石defs，即不打算在文件的后面进一步使用。IE

```
def src-folder (File. "src")
def lib-folder (File. src-folder "lib")
def dist-folder (File. src-folder "bin") 
;; I only care for the lib-folder and dist-folder beyond this point 
```

在 Clojure 中这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T19:21:37.577

在第一个一次性定义中使用`let`而不是，并将剩余的调用嵌套在:`def``def``let`

```
(let [root-dir (File. "projects/my-project")
      src-folder (File. root-dir "src")]
  (def lib-folder (File. src-folder "lib"))
  (def dist-folder (File. src-folder "bin"))) 
```

`src-folder`评估后，本地绑定的值将被丢弃`let`，只留下`lib-folder`和`dist-folder`var 可供程序的其余部分访问。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T19:22:42.090

如果它们是`defn`s（即函数），您可以简单地使用`defn-`它们来创建私有函数。

对于`def`s 你必须明确地将它们设置为私有：

```
(def ^:private src-folder (File. "src")) 
```

# python - Python：重写具有元组的文本文件

> ID：14840104
> 
> 赞同：1
> 
> 时间：2013-02-12T19:19:08.793
> 
> 标签：python

我有一些在单独的脚本中创建的文本文件，但我不知道如何以我想要的方式排列文本文件。

文本文件包含三列：

X, Y, [Z1, Z2, Z3, ...]

其中 X/Y/Z 值是任意数字。

这个文件有几行，Z-lists 有不同的长度。我想要将 Z 列表分开，以便每行中只有一个 Z 值，但 X/Y 值会根据 Z 列表中有多少元素而重复。

例如，文本文件的前两行是：

```
 2306 3481 [2, -3, 82.6, 0.2]
    2336 3408 [9, 0] 
```

我希望这两行变成：

```
 2306 3481 2
    2306 3481 -3
    2306 3481 82.6
    2306 3481 0.2
    2336 3408 9
    2336 3408 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T19:25:00.540

使用`ast.literal_eval`和`str.split`：

```
with open("abc.txt") as f:
    for line in f :
        line=line.split(None,2)  #returns ['2306', '3481', '[2, -3, 82.6, 0.2]'] 
        a,b=line[:2]   
        lis=literal_eval(line[-1])
        for x in lis:
            print a,b,x    #or write to a new file
   ....:             
2306 3481 2
2306 3481 -3
2306 3481 82.6
2306 3481 0.2
2336 3408 9
2336 3408 0 
```

# ios - CoreData 获取请求返回空数组

> ID：14840105
> 
> 赞同：1
> 
> 时间：2013-02-12T19:19:21.040
> 
> 标签：ios, objective-c, core-data

我有更多的概念问题而不是基于代码的问题，因为我的代码有效。

当我的应用程序启动时，我从 coreData 获取 sessionObject 并验证 authToken。

此代码在我的加载控制器中有效。Fetch 请求有效并返回一个 sessionObjects 数组。但是，在我验证 authToken 的 App Delegate 中，返回的数组为空。为什么代码在控制器中有效，而在 App Delegate 中无效？提取请求没有错误。上下文不是零。这是我在加载控制器中使用的确切代码并且有效。

我是否必须在 App Delegate 中对 CoreData 执行不同的请求？我可以在 App Delegate 中使用获取请求吗？

应用程序 Delegate DidBecomeActive 方法中的示例代码。我使用 DidBecomeActive 所以我们可以验证从后台和初始化返回。

```
 // check for valid authtoken if present so the correct home screen will display
NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"CurrentSession" inManagedObjectContext:[self managedObjectContext]];

[request setEntity:entity];
CurrentSession *sessionObj = nil;
NSError *cdError = nil;
if([self managedObjectContext] == nil){
    NSLog(@"context is nil");
}
NSArray *sessionArray = [[[self managedObjectContext] executeFetchRequest:request error:&cdError] mutableCopy];
if (sessionArray != nil && [sessionArray count]) {

    sessionObj = (CurrentSession *)[sessionArray lastObject];
            NSLog(@"Found session %@",sessionObj.authToken);
    if (![sessionObj.authToken isEqualToString:@""]) {
        [Solid_Utilities validateAuthToken:[self managedObjectContext]];
    }
} else {
    NSLog(@"NO SESSION FOUND");
} 
```

**编辑** 我确定我的问题可能与线程有关。在加载控制器中，我在单独的线程上运行了很多任务，并且我假设 App Delegate 在主线程上运行。但是，我提供给加载控制器的上下文是在应用程序委托中生成的。

**编辑** 我在 App Delegate 和 Loading 控制器中做了一个 isMainThread 检查，结果都是真的。不知道为什么如果他们使用相同的上下文并存储他们不会返回相同的对象数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:27:17.160

看起来答案与我遇到的另一个问题有关。原来原始开发人员将核心数据堆栈添加到基本控制器中，我在应用程序委托中使用堆栈并将其传递给基本控制器。基本控制器会用自己的堆栈覆盖我的上下文，这就是为什么我无法在应用程序委托中获得预期的获取结果。

我会说从我在这个项目中学到的知识是在应用程序委托中创建上下文并将其传递给您的第一个控制器。然后在 prepareForSegue 或当您手动推送时传递上下文。同样在视图中会消失，您检查是否返回并更新商店上下文。如果您执行任何多线程，请确保在应用程序委托中您的上下文是 nsmainconcurrencytype，以便您可以为其他线程创建子上下文。这将保持数据结果符合预期并将冲突降至最低。

感谢您对此的所有意见。你的回答帮助我找到了这个愚蠢的问题。

# python - 使用 Python LXML XPath 抓取数据

> ID：14840107
> 
> 赞同：0
> 
> 时间：2013-02-12T19:19:33.573
> 
> 标签：python, html-parsing, lxml

我正在尝试解析一个网站

```
blahblahblah 
<a  href="THIS IS WHAT I WANT" title="NOT THIS">I DONT CARE ABOUT THIS EITHER</a>
blahblahblah 
```

（其中有很多，我希望它们都以某种标记化的形式出现）。问题是“a href”实际上有两个空格，而不仅仅是一个（有些是“a href”，我不想检索一个空格），所以使用 tree.xpath('//a/@ href') 不太好用。有人对该怎么做有任何建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:25:37.407

不了解 LXML，但您绝对可以使用 BeautifulSoup，`<a>`在页面上查找所有内容，然后创建一个 for 循环，您将在其中检查是否`<a href=...>`与您的正则表达式模式匹配，如果匹配，而不是废弃 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:39:02.520

此代码按预期工作：

```
from lxml import etree

file = "file:///path/to/file.html" # can be a http URL too
doc = etree.parse(file)

print doc.xpath('//a/@href')[0] 
```

编辑：AFAIK 不可能做你想做的事`lxml`。

您可以改用[正则表达式](/questions/tagged/regex "显示标记为“正则表达式”的问题")。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T20:41:37.817

“（有些是我不想检索的带有一个空格的“a href”）

我认为这意味着您只想定位 a 和 href 之间有多个空格的元素。XML 允许标签名称和属性之间有任意数量的空格（空格、制表符、换行符都是允许的）。在解析文本并创建文档树时，空格将被丢弃。LXML 和 XPATH 使用的是 Document 树中的 Node 对象，而不是为创建树而解析的原始文本。

一种选择是使用正则表达式来查找您想要的文本。但实际上，既然这是完全有效的 XML/HTML，为什么还要删除一些空格呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T12:28:03.940

使用 xpath 表达式查找所有节点，然后遍历所有这些节点以查找匹配项，您可以获得节点的字符串表示形式：

```
etree.tostring(node) 
```

供进一步参考： http: [//lxml.de/tutorial.html#elements-carry-attributes-as-a-dict](http://lxml.de/tutorial.html#elements-carry-attributes-as-a-dict)

# java - 有没有将 Scheme/Java/Ruby 代码翻译成英文句子的程序？

> ID：14840109
> 
> 赞同：6
> 
> 时间：2013-02-12T19:19:38.497
> 
> 标签：java, ruby, scheme, code-translation

我发现这篇关于将英语句子转换为 Scheme 的文章，但似乎找不到任何相反的方法（即 Scheme 到英语句子）： ftp: [//ftp.cs.utexas.edu/.snapshot/hourly.2 /pub/AI-Lab/tech-reports/UT-AI-TR-87-48.pdf](ftp://ftp.cs.utexas.edu/.snapshot/hourly.2/pub/AI-Lab/tech-reports/UT-AI-TR-87-48.pdf) 另外，我认为文章甚至没有提到如何获取所提到的代码。

有谁知道这样的项目，还是我将不得不尝试自己推出？

我也对这样的 Java/Groovy 和/或 Ruby 翻译器感兴趣。

基本上，我想使用一个程序，给定一串代码，以英文句子输出算法。

编辑：实际上，上面提到的文章的底部确实有相应的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T20:30:45.913

你想要一个伪代码转换器。有几个伪代码转换器可以将伪代码转换为编程语言代码，反之亦然。了解这些转换器远非完美。但他们至少应该让你有一个不错的起点。

# java - 用于解析一些 html 名称和值属性的正则表达式

> ID：14840114
> 
> 赞同：0
> 
> 时间：2013-02-12T19:20:07.037
> 
> 标签：java, regex

我正在使用. `name`_ 但是我没有返回所有必需的值。下面是html页面的片段-`values``HTML``Regex``regex`

```
<input style="display: none;" name="hiddenAction" value="myval" type="hidden">
<input name="ml_uiss" id="ml_uiss" value="aba972kd82lw" type="hidden">
<input style="display: none;" name="Key" id="Key" value="56n8f48jfn98cwnc38c398nc83nx2b9c32n.an24" type="text">
<input name="AvKbkGPQr" class="iswickEnabled input" maxlength="10" id="AvKbkGPQr" onkeyup="javascript:checkIt(this);" onkeydown="javascript:checkIt(this);" onchange="javascript:checkIt(this);" value="1234567890" onfocus="this.value='';" type="text"> <input name="PjbkAPker" class="iswickEnabled input" maxlength="10" id="PjbkAPker" onkeyup="javascript:checkIt(this);" onkeydown="javascript:checkIt(this);" onchange="javascript:checkIt(this);" type="text"> 
<input id="timeCheck" name="timeCheck" value="23:38:20" type="hidden">
<input name="isDone" id="isDone" value="prq" type="hidden"> 
```

下面是代码`regex`-

```
String reg = "<input.*name=['\"](\\w+)['\"].*\\svalue=['\"]([\\w:.\\s]+)['\"].*(<input name=\"(\\w+)\")?";
Pattern p = Pattern.compile(reg);
Matcher m = p.matcher(myString);
while (m.find()) {
    String match1 = m.group(1);
    String match2 = m.group(2);
    String match3 = m.group(3);
    String match4 = m.group(4);
    System.out.println("[" + match1 + "][" + match2 + "][" + match3+ "][" + match4 + "]");
} 
```

输出如下 -

```
[hiddenAction][myval][null][null]
[ml_uiss][aba972kd82lw][null][null]
[Key][56n8f48jfn98cwnc38c398nc83nx2b9c32n.an24][null][null]
[AvKbkGPQr][1234567890][null][null]
[timeCheck][23:38:20][null][null]
[isDone][prq][null][null] 
```

在第 4 行`HTML`内容中，它有两个`input name`标签，因此，这`regex`没有选择第二个 `input name`是 PjbkAPker （输出中缺少这个）。其余的都很好。
我也想要第二个`input name`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T20:11:16.730

[用正则表达式解析 X/HTML 是个坏主意^(TM)](https://stackoverflow.com/a/1732454/244128)。

尝试使用[jsoup](http://jsoup.org/)代替：

```
Document doc = Jsoup.parseBodyFragment(htmlString);
Elements inputs = doc.select("input");
for (Element el : inputs) {
  Attributes attrs = el.attributes();
  System.out.print("ELEMENT: " + el.tagName());
  for (Attribute attr : attrs) {
    System.out.print(" " + attr.getKey() + "=" + attr.getValue());
  }
  System.out.println();
} 
```

# ios - 为什么 iOS 中的一些库是由基于 C 的 API 提供的？

> ID：14840116
> 
> 赞同：3
> 
> 时间：2013-02-12T19:20:15.350
> 
> 标签：ios, objective-c, core-graphics

为什么 iOS 中的某些库提供了基于 C 的 API？例如，Core Graphics 库是由基于 C 的 API 提供的。但是，我无法理解苹果这样做的原因。

而且，`[[UIColor red] setStroke]`drawRect中的那种代码：也让我很困惑！如果 Apple 决定使用基于 C 的 API，为什么他们使用面向对象样式的代码来处理图形？

并且`CGContextAddLineToPoint()`，例如，接受参数`CGContextRef c`。我认为它完全适合使用面向对象的东西。

```
// current
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextMoveToPoint(context, 0, 0);
CGContextAddLineToPoint(context, 10, 10);

// looks better
CGContext *context = [UIGraphics getCurrentContext]
[context moveToPoint: CGMakePoint(0, 0)] // or [context moveToPointX: 0 y: 0]
[context addLineToPoint: CGMakePoint(10, 10)]  // or [context addLineToPointX: 10 y: 10] 
```

那么，为什么 Apple 在某些库上使用基于 C 的 API？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T19:25:20.080

表现

1.  因为与 Objective-C 对象相比，C 中的内存开销更少
2.  加速，因为不需要通过 Objective-C 运行时

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-12T19:30:28.417

一个可能的原因是性能。

当您向对象发送消息时，编译器会将其转换为对名为 C 函数的调用，该函数将`objc_msgSend()`您发送消息的对象、消息和消息的任何参数作为参数。然后它会进行查找以确定与该消息对应的实际函数的位置并将控制权传递给它。

我确信 Apple 已经优化了它，`objc_msgSend`因为它被频繁调用，但它仍然会比简单的函数调用慢很多。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-12T20:58:32.003

抽象的原因之一可以在 Apple 的历史中找到。当 Cocoa 首次亮相 Mac（作为 Rhapsody OS 中的 Yellow Box）时，许多大型开发人员不愿意将他们的用户界面移植到它。因此，在 Mac OS X 10.0 发布时，现有的 Mac Toolbox 被清理并与 Cocoa 一起作为“Carbon”发布。

Carbon 和 Cocoa 有很多功能重叠，因此创建共享的、基于 C 的库很有意义。虽然 Carbon 的受欢迎程度下降了，但 iOS 已经出现，C 库对于 Apple 操作系统之间的抽象仍然有用——在 AppKit 和 UIKit 之间。

* * *

**注意：**根据经验，您应该尝试使用满足您需求的最高级别的 API。例如，如果`UIBezierPath`并且`UIColor`会给你想要的东西，那么你可以（并且可能应该）留在 Objective-C 花园中以获得可读性、易于调试和面向未来。但是，根据功能和性能要求，您始终可以退回到 CoreGraphics。同样，如果您需要在应用程序中处理线程并发任务，`NSOperation`子类是一种干净且一致的方式，但如果您的需求是独特的，您总是可以回退到 GCD`dispatch_()`方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-12T19:28:47.503

一方面，`C`它是一种开销较小的低级语言。当您引入对象时，您会引入一些开销以换取在大多数情况下更易于遵循的程序结构。

此外，由于 iOS 和 OS X 都基于 Unix 内核，Apple API 中提供的任何低级操作系统集成要么用更常用的跨平台语言`C`编写，要么编写为这些相同`C`功能的包装器。在某些时候，Apple 不值得花时间`Objective-C`为所有内容提供包装器。

# python - 从二进制文件创建 16 位和 24 位整数

> ID：14840120
> 
> 赞同：0
> 
> 时间：2013-02-12T19:20:38.127
> 
> 标签：python, binaryfiles

我正在修改一个现有的读取二进制文件的 Python 应用程序。文件的格式发生了一些变化。目前，一个字段被定义为记录的 35-36 字节。规范还声明“......记录中的字段将是用 ASCII 编写的字符字段。” 这是当前工作代码的样子：

```
def to_i16( word ):
    xx = struct.unpack( '2c', word )
    xx = ( ord( xx[ 0 ] ) << 8 ) + ord( xx[ 1 ] )

    return xx

val = to_i16( reg[ 34:36 ] ) 
```

但是该字段被重新定义为字节 35-37，因此它将是一个 24 位值。我讨厌使用二进制文件，并且对比特玩弄很可怕。如何将该 3 字节值转换为 24 位整数？我尝试了一些通过谷歌搜索找到的代码位，但我认为它们不正确。很难确定，因为我仍在等待发送示例“新格式”文件的人向我发送显示我应该提出的值的文本表示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:27:25.580

只需读取 24 位（我假设为[big endian](http://en.wikipedia.org/wiki/Endianess)，因为原始代码也是该格式）：

```
val = struct.unpack('>I', b'\x00' + reg[34:37]) 
```

# date - 如何防止用户在 Joomla 日历字段中选择今天之前的日期？

> ID：14840124
> 
> 赞同：0
> 
> 时间：2013-02-12T19:20:52.603
> 
> 标签：date, joomla, calendar, field

我想在组件 adsmanger 的搜索模块中自定义 Joomla 的日历字段，基本上我想要：

*   防止用户选择今天之前的日期。
*   防止用户在字段中输入，他只能使用日历选择日期。
*   将当前日期设置为默认值

这是组件中日历字段生成的一部分：

```
<?php
case 'date':

            $options = array();
            $options['size'] = 16;
            $options['maxlength'] = 16;
            if ($field->required == 1) {
                $options['class'] = 'adsmanager_required';
                $options['mosReq'] = '1';
                $options['mosLabel'] = "$strtitle";
            }
            else 
            {
                $options['class'] = 'adsmanager';
            }
            $return .= JHTML::_('behavior.calendar');
            if ($value != "") {
                if (function_exists("strptime")) {
                    $a = strptime($value, JText::_('ADSMANAGER_DATE_FORMAT_LC'));
                    $timestamp = mktime(0, 0, 0, $a['tm_mon']+1, $a['tm_mday'], $a['tm_year']+1900);
                } else {
                    $timestamp = strtotime($value);
                }
                if ($timestamp != null)
                    $value = date("Y-m-d",$timestamp);
                else
                    $value = "";
            }
            $return .=  JHTML::_('calendar', $value, "$field->name", "$field->name", JText::_('ADSMANAGER_DATE_FORMAT_LC'), $options); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:35:16.917

日历实际上并没有办法完全按照您开箱即用的方式进行操作。不过，有一些方法可以让你更接近。

包含的方法是设置可用年份，至少可以将它们保留在今年。

```
Calendar.setRange(2013, 2020); 
```

javascript 函数中还有一种方法可以添加一个`onUpdate`处理程序，您可以使用该处理程序编写自己的比较函数，以将日期限制为今天和以后。但是，在 Joomla 中似乎没有一个好方法可以将函数传递到这个位置，因为它应该是`Calendar.setup()`调用的一部分。生成 javascript 的代码`libraries/joomla/html/html.php`位于第 880 行。

# c - 为什么公共部分变量只显示在目标文件而不是可执行文件中？

> ID：14840126
> 
> 赞同：5
> 
> 时间：2013-02-12T19:21:01.167
> 
> 标签：c, gcc, objdump, compiler-flags

我试图更多地了解可执行文件的“公共”部分，我注意到在编译代码时，我可以看到仅在目标文件（ ）而不是可执行`objdump`文件上放置在公共代码中的变量。`*.o`

这是为什么？

```
//test.c

int i[1000];
int main(){return 0;} 
```

构建命令：

```
> gcc -g0 -fcommon -c test.c
> gcc -g0 -fcommon test.c 
```

`objdump`显示`i`在符号表的公共部分：

```
> objdump -x test.o
  ...
  SYMBOL TABLE:
  ...
  00000fa0    O   *COM*   00000020  i 
```

除非我在可执行文件上运行它：

```
> objdump -x a.out
  ...
  SYMBOL TABLE:
  ...
  0804a040 g  O   .bss    00000fa0  i 
```

如果我用标志重建目标文件，它会像在可执行文件上一样`-fno-common`显示在段中。`.bss`最终的可执行文件没有这个“COMMON”部分吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T19:28:35.500

公共部分是链接器知道的。它基本上将所有`common`内容放入[典型]可执行文件具有的三个或四个实际部分之一（代码或文本、数据、bss - 有时还有一个rodata）。

因此，在这种情况下，您的变量最终以 .bss 结尾，因为它们没有被初始化。

从 gcc 手册上`-fcommon`/`-fno-common`

> 在 C 代码中，控制未初始化的全局变量的位置。Unix C 编译器传统上通过将变量放在一个公共块中来允许在不同的编译单元中对这些变量进行多重定义。这是 -fcommon 指定的行为，并且是 GCC 在大多数目标上的默认行为。另一方面，ISO C 不要求这种行为，并且在某些目标上可能会对变量引用带来速度或代码大小的损失。-fno-common 选项指定编译器应将未初始化的全局变量放在目标文件的数据部分，而不是将它们生成为公共块。这样做的效果是，如果在两个不同的编译中声明了相同的变量（没有 extern），则在链接它们时会出现多定义错误。在这种情况下，您必须改为使用 -fcommon 进行编译。使用 -fno-common 编译对于它提供更好性能的目标很有用，或者如果您希望验证程序是否可以在始终以这种方式处理未初始化变量声明的其他系统上运行。

因此，`-fno-common`或者`-fcommon`只有在调用多个全局变量时才会有所作为`i`[并且它们应该具有相同的大小，或者您的程序变得无效，这比未定义的行为差一级！]

# android - Android Fragments - 2 Fragment & 1 Frame 布局

> ID：14840128
> 
> 赞同：1
> 
> 时间：2013-02-12T19:21:06.443
> 
> 标签：android, android-layout, android-fragments, android-listfragment, android-fragmentactivity

我正在尝试创建一个包含三个垂直面板的布局 - 2 个片段和 1 个框架布局。第一个片段将是选择列表，第二个片段将有不同的内容。从第二个片段中选择一个列表项时，第三个窗格将显示详细信息。

这是我的布局文件：

activity_three_pane.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_marginLeft="10dp"
android:layout_marginRight="10dp"
android:divider="?android:attr/dividerHorizontal"
android:orientation="horizontal"
android:showDividers="middle"
tools:context=".ActivitySectionList" >

<fragment
    android:id="@+id/frg_section_list"
    android:name="eam.droid.pt.entholkaappiyam.FragmentSectionList"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1"
    tools:layout="@android:layout/list_content" />

<fragment
    android:id="@+id/frg_chapter_list"
    android:name="eam.droid.pt.entholkaappiyam.FragmentChapterList"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1"
    tools:layout="@android:layout/list_content" />

<FrameLayout
    android:id="@+id/fl_chapter_detail"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="2" />

</LinearLayout> 
```

activity_section_list.xml：

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/frg_section_list"
    android:name="eam.droid.pt.entholkaappiyam.FragmentSectionList"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    tools:context=".ActivitySectionList"
    tools:layout="@android:layout/list_content" /> 
```

活动章节列表.xml：

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/frg_chapter_list"
    android:name="eam.droid.pt.entholkaappiyam.FragmentChapterList"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    tools:context=".ActivityChapterList"
    tools:layout="@android:layout/list_content" /> 
```

activity_chapter_detail.xml：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/fl_chapter_detail"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".ActivityChapterDetail"
    tools:ignore="MergeRootFrame" /> 
```

Java 代码如下所示：

ActivitySectionList.java

```
public class ActivitySectionList extends FragmentActivity implements FragmentSectionList.Callbacks 
```

FragmentSectionList.java

```
public class FragmentSectionList extends ListFragment 
```

ActivityChapterList.java

```
public class ActivityChapterList extends FragmentActivity implements FragmentChapterList.Callbacks 
```

片段章节列表.java

```
public class FragmentChapterList extends ListFragment 
```

ActivityChapterDetail.java

```
public class ActivityChapterDetail extends FragmentActivity 
```

FragmentChapterDetail.java

```
public class FragmentChapterDetail extends Fragment 
```

但是应用程序因 Inflate Exception 和 IllegalStateException 而崩溃。我正在尝试过去两天，但无法找出问题所在。如果有人对此有想法，请回复。

我注意到的一件事是它在手机上运行良好，它将单个片段用于整个屏幕。但在试图在屏幕上放置三个片段的平板电脑上崩溃。当我调试时，我知道 FragmentChapterList.java 的 OnAttach 在 ActivityChapterList.java 的 onCreate 之前被调用。这就是为什么，它给出了 IllegaltStateException: Activity 必须实现片段的回调。因此，我尝试在 ActivitySectionList.java 中实现这两个片段回调。

像这样：

```
public class ActivitySectionList extends FragmentActivity implements FragmentSectionList.Callbacks, FragmentChapterList.Callbacks 
```

然后它在平板电脑上运行良好。但是，无法在手机上检索章节列表。

这是我的日志：

* * *

```
02-12 14:14:55.858: E/AndroidRuntime(989): FATAL EXCEPTION: main
02-12 14:14:55.858: E/AndroidRuntime(989): java.lang.RuntimeException: Unable to start activity ComponentInfo{eam.droid.pt.entholkaappiyam/eam.droid.pt.entholkaappiyam.ActivitySectionList}: android.view.InflateException: Binary XML file line #20: Error inflating class fragment
02-12 14:14:55.858: E/AndroidRuntime(989):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
02-12 14:14:55.858: E/AndroidRuntime(989):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
02-12 14:14:55.858: E/AndroidRuntime(989):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
02-12 14:14:55.858: E/AndroidRuntime(989):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
02-12 14:14:55.858: E/AndroidRuntime(989):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-12 14:14:55.858: E/AndroidRuntime(989):  at android.os.Looper.loop(Looper.java:137)
02-12 14:14:55.858: E/AndroidRuntime(989):  at android.app.ActivityThread.main(ActivityThread.java:4745)
02-12 14:14:55.858: E/AndroidRuntime(989):  at java.lang.reflect.Method.invokeNative(Native Method)
02-12 14:14:55.858: E/AndroidRuntime(989):  at java.lang.reflect.Method.invoke(Method.java:511)
02-12 14:14:55.858: E/AndroidRuntime(989):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
02-12 14:14:55.858: E/AndroidRuntime(989):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
02-12 14:14:55.858: E/AndroidRuntime(989):  at dalvik.system.NativeStart.main(Native Method)
02-12 14:14:55.858: E/AndroidRuntime(989): Caused by: android.view.InflateException: Binary XML file line #20: Error inflating class fragment
02-12 14:14:55.858: E/AndroidRuntime(989):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
02-12 14:14:55.858: E/AndroidRuntime(989):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
02-12 14:14:55.858: E/AndroidRuntime(989):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
02-12 14:14:55.858: E/AndroidRuntime(989):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-12 14:14:55.858: E/AndroidRuntime(989):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
02-12 14:14:55.858: E/AndroidRuntime(989):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
02-12 14:14:55.858: E/AndroidRuntime(989):  at android.app.Activity.setContentView(Activity.java:1867)
02-12 14:14:55.858: E/AndroidRuntime(989):  at eam.droid.pt.entholkaappiyam.ActivitySectionList.onCreate(ActivitySectionList.java:20)
02-12 14:14:55.858: E/AndroidRuntime(989):  at android.app.Activity.performCreate(Activity.java:5008)
02-12 14:14:55.858: E/AndroidRuntime(989):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
02-12 14:14:55.858: E/AndroidRuntime(989):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
02-12 14:14:55.858: E/AndroidRuntime(989):  ... 11 more
02-12 14:14:55.858: E/AndroidRuntime(989): Caused by: java.lang.IllegalStateException: Activity must implement fragment's callbacks.
02-12 14:14:55.858: E/AndroidRuntime(989):  at eam.droid.pt.entholkaappiyam.FragmentChapterList.onAttach(FragmentChapterList.java:84)
02-12 14:14:55.858: E/AndroidRuntime(989):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:867)
02-12 14:14:55.858: E/AndroidRuntime(989):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1066)
02-12 14:14:55.858: E/AndroidRuntime(989):  at android.support.v4.app.FragmentManagerImpl.addFragment(FragmentManager.java:1168)
02-12 14:14:55.858: E/AndroidRuntime(989):  at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:280)
02-12 14:14:55.858: E/AndroidRuntime(989):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676) 
```

谁能告诉我我哪里可能出错了？如果有人遇到 3 个垂直面板（2 个列表和 1 个细节）的教程或示例，请指点我。

这是详细的场景：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:55:12.450

我假设只有平板电脑和课堂上`activity_three_pane.xml`才会膨胀。`ActivitySectionList`在这种情况下，对于平板电脑，fragment`FragmentSectionList`和`FragmentChapterList`inflated 作为布局的一部分，因此您需要为两者实现回调 in `ActivitySectionList`，这是您的异常的来源。

这个设置看起来非常复杂和令人困惑。我建议拆分您的活动，这样您就不会重叠代码。这将帮助您更轻松地诊断问题，并清理您的代码。例子：

```
public class BookActivity extends FragmentActivity implements FragmentSectionList.Callbacks, FragmentChapterList.Callbacks
{

    public void onCreate(Bundle savedInstanceState) {

        setContentView(R.layout.activity_three_pane);
    }
}

public class ActivitySectionList extends FragmentActivity implements FragmentSectionList.Callbacks
{

    public void onCreate(Bundle savedInstanceState) {

        setContentView(R.layout.activity_section_list);
    }
} 
```

然后在调用这些活动的任何活动中：

```
if( ( getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK ) == Configuration.SCREENLAYOUT_SIZE_XLARGE ) {
    startActivity( new Intent(this, BookActivity.class);
}
else {
    startActivity( new Intent(this, ActivitySectionList.class);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T05:12:18.830

您的活动是否扩展了 FragmentActivity？.. 如果不尝试扩展 FragmentActivity 而不仅仅是 Activity。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T10:42:32.393

一个疯狂的猜测：会不会是 FragmentActivity（支持库）正在使用 Fragment（非支持库）？如果是这种情况：确保您坚持支持库（检查导入）或使用 Android 3+。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T22:46:14.503

听起来 FragmentChapterList 正在扩展[android.app.ListFragment](http://developer.android.com/reference/android/app/ListFragment.html)而不是正确的[android.support.v4.app.ListFragment](http://developer.android.com/reference/android/support/v4/app/ListFragment.html)。我会检查您在 FragmentChapterList 中的导入，以确保 ListFragment 导入实际上是支持库版本。

# python - 为命名输出文件Python创建for循环

> ID：14840130
> 
> 赞同：1
> 
> 时间：2013-02-12T19:21:08.280
> 
> 标签：python, excel, csv, for-loop

所以我正在导入一个名称列表，例如

文本文件将包括：

```
Eleen
Josh
Robert
Nastaran
Miles

my_list = ['Eleen','Josh','Robert','Nastaran','Miles'] 
```

然后我将每个名称分配给一个列表，我想为该列表中的每个名称编写一个新的 excel 文件。

```
#1\.   Is there anyway I can create a for loop where on the line:
temp = os.path.join(dir,'...'.xls')
_________________________  
def high_throughput(names):
    import os
    import re

# Reading file

in_file=open(names,'r')
dir,file=os.path.split(names)
temp = os.path.join(dir,'***this is where i want to put a for loop 
for each name in the input list of names***.xls')
out_file=open(temp,'w')

data = []

for line in in_file:
    data.append(line)

in_file.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:23:21.327

看看[`openpyxl`](http://pythonhosted.org/openpyxl/)，特别是如果您需要创建`.xlsx`文件。下面的示例假定 Excel 工作簿创建为空白。

```
from openpyxl import Workbook
names = ['Eleen','Josh','Robert','Nastaran','Miles']
for name in names:
    wb = Workbook()
    wb.save('{0}.xlsx'.format(name)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T03:21:12.843

试试这个：

```
in_file=open(names,'r')
dir,file=os.path.split(names)

for name in in_file:
    temp = os.path.join(dir, name + '.xls')
    with open(temp,'w') as out_file:
        # write data to out_file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T19:41:52.810

我仍然不确定您要做什么（并且“不确定”，我的意思是“完全困惑”），但我想我可以解释您做错的一些事情，以及如何正确地做：

```
in_file=open(names,'r')
dir,file=os.path.split(names)
temp = os.path.join(dir,'***this is where i want to put a for loop 
for each name in the input list of names***.xls') 
```

此时，您没有*输入*的姓名列表。这就是您正在阅读的内容`in_file`，而您还没有阅读。稍后，您将那些命名为`data`，之后您可以使用它们。所以：

```
in_file=open(names,'r')
dir,file=os.path.split(names)

data = []

for line in in_file:
    data.append(line)

in_file.close()

for name in data:
    temp = os.path.join(dir, '{}.xls'.format(name))
    out_file=open(temp,'w') 
```

请注意，我将 for 循环放在函数调用之外，因为您必须这样做。这是一件好事，因为您可能希望在该循环内打开每个路径（并对每个文件执行操作），而不是打开由文件循环构成的单个路径。

但是，如果您不坚持使用 for 循环，那么有些东西可能更接近您正在寻找的东西：列表推导。你有一个名字列表。您可以使用它来构建路径列表。然后您可以使用它来构建打开文件的列表。像这样：

```
paths = [os.path.join(dir, '{}.xls'.format(name)) for name in data]
out_files = [open(path, 'w') for path in paths] 
```

然后，稍后，在您构建了要写入所有文件的字符串之后，您可以执行以下操作：

```
for out_file in out_files:
   out_file.write(stuff) 
```

然而，这是一种奇怪的设计。主要是因为您必须关闭每个文件。它们*可能*会被垃圾收集自动关闭，即使没有，它们*也可能会*被刷新……但除非你很幸运，否则你写的所有数据都只是在内存中的缓冲区中，永远不会被写入磁盘。通常，您不想编写依赖于运气的程序。所以，你想关闭你的文件。使用这种设计，您必须执行以下操作：

```
for out_file in out_files:
   out_file.close() 
```

回到我一开始建议的一个大循环可能要简单得多，所以你可以这样做：

```
for name in data:
    temp = os.path.join(dir, '{}.xls'.format(name))
    out_file=open(temp,'w')
    out_file.write(stuff)
    out_file.close() 
```

或者，甚至更好：

```
for name in data:
    temp = os.path.join(dir, '{}.xls'.format(name))
    with open(temp,'w') as out_file:
        out_file.write(stuff) 
```

还有一些评论，我们在这里……</p>

首先，您真的不应该尝试从字符串中手动生成 .xls 文件。您可以使用像`openpyxl`. 或者，您可以创建 .csv 文件，使用 Python 内置的库很容易创建它们`csv`，Excel 可以像处理 .xls 文件一样轻松地处理它们。或者，您可以使用`win32com`或`pywinauto`控制 Excel 并使其创建您的文件。真的，任何事情都比尝试手动生成它们要好。

其次，您可以编写的事实`for line in in_file:`意味着 an`in_file`是某种行序列。因此，如果您只想将其转换`list`为一行，您可以一步完成：

```
data = list(in_file) 
```

但实际上，您首先需要此列表的唯一原因是您可以稍后循环它，创建输出文件，对吗？那么，为什么不先推迟，然后循环遍历文件中的行呢？

无论您做什么来生成输出内容，都请先执行此操作。然后用文件名列表循环文件并写东西。像这样：

```
stuff = # whatever you were doing later, in the code you haven't shown

dir = os.path.dirname(names)
with open(names, 'r') as in_file:
    for line in in_file:
        temp = os.path.join(dir, '{}.xls'.format(line))
        with open(temp, 'w') as out_file:
            out_file.write(stuff) 
```

这将替换您示例中的所有代码（除了那个名为的函数`high_throughput`，它在本地导入一些模块然后什么都不做）。

# c++ - 如何编写用于使用已知键填充地图的语义操作？

> ID：14840132
> 
> 赞同：3
> 
> 时间：2013-02-12T19:21:13.677
> 
> 标签：c++, boost, boost-spirit, boost-spirit-qi

我正在尝试使用其他参数动态构建解析器`boost::spirit:qi`。目标是解析字符串并`std::map<std::string, std::string>`使用键和值填充 a。但是，map 的 key 字段是不被解析的（即在解析器生成之前就知道了）。

我猜我需要编写一个语义操作，将地图的键设置为适当的解析值。我可以看到它`qi::_1`提供了解析器的内容，但是我如何引用返回结构（在本例中为 a `std::map`）？

如果`std::map`在范围内，我可以像这样直接分配它：

```
parser = lit(prefix) >> value_parser[map_[key] = _1]; 
```

但就我而言，我想实际生成一个解析器，而不是进行解析。我猜我需要一些东西来代替`map_[key]`。

* * *

提供更多上下文（根据要求）：

我首先解析一个看起来像这样的“模板”字符串：

```
/path/to/:somewhere:/nifty.json 
```

`:somewhere:`用于表示以后可以通过 name 引用的任何字符串`somewhere`。我的解析器运行良好。

接下来，我想从该模板生成另一个解析器，它解析这样的字符串：

```
/path/to/anywhere/nifty.json 
```

并为我提供一个`std::map<std::string, std::string> m`where `m["somewhere"] == "anywhere"`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T00:33:43.703

我不确定这是否是您的想法，但继承的属性可能是您的答案。您无需动态创建解析器，而是创建一个解析器，将密钥和对映射的引用作为您在每次调用时提供的继承属性：

```
// an attempt to demonstrate a parser that takes a std::map by reference and a key by value,
// then stores a parsed value into the map as the value associated with the given key

#include <string>
#include <map>

#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>

typedef std::string::const_iterator fwd_iter_t;

namespace qi = boost::spirit::qi;
namespace phoenix = boost::phoenix;

typedef int value_t;  // or whatever
typedef std::map<std::string, value_t> result_map_t;
// key insight - rules can take "inherited" attributes (parameters in 2nd argument):
typedef qi::rule<fwd_iter_t,
                 void(result_map_t&, std::string),       // inherit map ref and key to use
                 boost::spirit::ascii::space_type> map_insert_rule_t;

int main() {

   result_map_t result_map;
   std::vector<std::string> keys = { "A", "B", "C" };
   std::string test_data = "PREFIX 1\nPREFIX 2\nPREFIX 3";

   using boost::phoenix::construct;   // to create pairs
   using boost::phoenix::insert;      // to add pairs to the map
   typedef result_map_t::value_type result_map_pair_t;
   // use Phoenix actions to construct the key/value pair and insert it
   map_insert_rule_t maprule = qi::lit("PREFIX")
                            >> qi::int_[insert(qi::_r1,   // inherited map ref
                                               construct<result_map_pair_t>(qi::_r2, qi::_1))];

   fwd_iter_t beg = test_data.begin();
   fwd_iter_t end = test_data.end();
   for (auto k_it = keys.begin(); k_it != keys.end(); ++k_it) {
      using boost::spirit::ascii::space;
      if (!qi::phrase_parse(beg, end,
                            maprule(phoenix::ref(result_map), *k_it),
                            space)) {
         std::cerr << "parse failed!" << std::endl;
         return 1;
      }
   }

   std::cout << "parse results:" << std::endl;
   for (auto r_it = result_map.begin(); r_it != result_map.end(); ++r_it) {
      std::cout << r_it->first << " " << r_it->second << std::endl;
   }

   return 0;
} 
```

您可以通过从 qi::rule 继承并使其成为私有数据成员来消除调用中的 std::map 引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T23:57:56.873

您应该能够使用 phoenix bind 来完成您所要求的事情，但是如果我们有更多的上下文，似乎可以使用更清洁的解决方案。

```
parser = lit(prefix) >> value_parser[phx::ref(map)[key] = qi::_1] 
```

根据密钥的来源，您可能还需要使用 phx::ref 。

# c - 在 C 中使用互斥锁同步两个 pthread

> ID：14840135
> 
> 赞同：1
> 
> 时间：2013-02-12T19:21:20.447
> 
> 标签：c, pthreads, mutex, synchronize

需要帮助将两个线程与互斥锁同步。我是 C 和互斥锁的新手，我不确定在这里做什么。该代码有两个线程，计数到十并打印出每个数字，但不同步，所以它不会打印同步，它是半同步的。意味着我最终只会遇到麻烦，有时它会打印 8..9..11、8..9..10..10 等等。

我不能对原始代码进行更改，如果您删除有关互斥锁的行，那就是原始代码。我只能添加关于互斥锁的行。

```
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>

pthread_mutex_t mutex;

int g_ant = 0;

void *writeloop(void *arg) {
    while(g_ant < 10) {
        pthread_mutex_lock(&mutex);
        g_ant++;
        usleep(rand()%10);
        printf("%d\n", g_ant);
        pthread_mutex_unlock(&mutex);
    }
    exit(0);
}

int main(void)
{
    pthread_t tid;
    pthread_mutex_init(&mutex, NULL);
    pthread_create(&tid, NULL, writeloop, NULL);
    writeloop(NULL);
    pthread_join(tid, NULL);
    pthread_mutex_destroy(&mutex);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:29:39.733

在互斥锁之外的情况下，您可能没有收到正确的值。确保循环按顺序运行的有保证的方法是将以下更改为`writeloop`：

```
void writeloop(void *arg) {
    while (g_ant < 10) {
        pthread_mutex_lock(&mutex);
        if (g_ant >= 10) {
            pthread_mutex_unlock(&mutex);
            break;
        }

        g_ant++;
        usleep(rand()%10);
        printf("%d\n", g_ant);
        pthread_mutex_unlock(&mutex);
    }
} 
```

# ajax - 将 .ajaxForm 函数添加到标准 .ajax 调用

> ID：14840136
> 
> 赞同：0
> 
> 时间：2013-02-12T19:21:23.257
> 
> 标签：ajax, ajaxform

所以我试图找到一种方法来让进度条在我的 .ajax 调用上工作，但运气不佳。我知道 ajaxForm 插件中有以下代码允许 uploadProgress 选项，但我的代码工作方式我无法使用该插件。无论如何添加以下代码以使其附加到标准 .ajax 调用？远射我知道！

```
// XMLHttpRequest Level 2 file uploads (big hat tip to francois2metz)
function fileUploadXhr(a) {
    var formdata = new FormData();

    for (var i=0; i < a.length; i++) {
        formdata.append(a[i].name, a[i].value);
    }

    if (options.extraData) {
        var serializedData = deepSerialize(options.extraData);
        for (i=0; i < serializedData.length; i++)
            if (serializedData[i])
                formdata.append(serializedData[i][0], serializedData[i][1]);
    }

    options.data = null;

    var s = $.extend(true, {}, $.ajaxSettings, options, {
        contentType: false,
        processData: false,
        cache: false,
        type: method || 'POST'
    });

    if (options.uploadProgress) {
        // workaround because jqXHR does not expose upload property
        s.xhr = function() {
            var xhr = jQuery.ajaxSettings.xhr();
            if (xhr.upload) {
                xhr.upload.addEventListener('progress', function(event) {
                    var percent = 0;
                    var position = event.loaded || event.position; /*event.position is deprecated*/
                    var total = event.total;
                    if (event.lengthComputable) {
                        percent = Math.ceil(position / total * 100);
                    }
                    options.uploadProgress(event, position, total, percent);
                }, false);
            }
            return xhr;
        };
    }

    s.data = null;
        var beforeSend = s.beforeSend;
        s.beforeSend = function(xhr, o) {
            o.data = formdata;
            if(beforeSend)
                beforeSend.call(this, xhr, o);
    };
    return $.ajax(s);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:46:04.263

我不保证这一点，但试试这个：

```
xhr.upload.onprogress = function(event) {
                var percent = 0;
                var position = event.loaded || event.position;
                var total = event.total;
                if (event.lengthComputable) {
                    percent = Math.ceil(position / total * 100);
                }
                console.log("Progress: "+percent+"%");   //debug to see if the problem is there
                options.uploadProgress(event, position, total, percent);
            }; 
```

从发布的代码中，我什至无法猜测问题是在`onprogress`事件处理中还是在那个`options.uploadProgress`，不管它是什么。
我将其发布为答案只是因为它不适合发表评论。

# excel - 从 excel 列中提取唯一的电子邮件地址

> ID：14840139
> 
> 赞同：0
> 
> 时间：2013-02-12T19:21:33.720
> 
> 标签：excel, formula, worksheet-function

我有一个包含 25 万个电子邮件地址的列表。电子邮件地址在工作表的 A 列中。我正在尝试将此列表中不重复的每个电子邮件地址提取到它自己的列 (C) 中。由于这些电子邮件地址中有 70-75% 是重复的，因此应该给我留下大约 40k 个唯一的电子邮件地址。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T19:25:08.777

使用`Data > Remove Duplicates`功能，事先将整列复制到 C 中。

# sql-server-2008 - 优化使用 15% cpu 时间的 sql 查询

> ID：14840143
> 
> 赞同：1
> 
> 时间：2013-02-12T19:21:44.070
> 
> 标签：sql-server-2008

我有以下查询在 sql 服务器上占用了 %15 cpu 时间。

```
declare
  @JobQueueId int = NULL,   @JobTypeId int = NULL,   @JobTypeIdHasValue BIT = 0,   @TargetId int = NULL,   @TargetIdHasValue BIT = 0,   
  @JobMessage nvarchar(max) = NULL,   @ComputerName nvarchar(60) = NULL,   @ComputerNameHasValue BIT = 0,   @StartedOn datetime = NULL,   
  @StartedOnHasValue BIT = 0,   @CompletedOn datetime = NULL,   @CompletedOnHasValue BIT = 0,   @SkipOrderedBy datetime = NULL,   
  @SkipOrderedByHasValue BIT = 0,   @SkipOrderedOn datetime = NULL,   @SkipOrderedOnHasValue BIT = 0,   @Attempts int = NULL,   
  @AttemptsHasValue BIT = 0,   @FailResult nvarchar(max) = NULL,   @FailResultHasValue BIT = 0,   @CreatedBy uniqueidentifier = NULL,   
  @CreatedOn datetime = NULL  

  SET TRANSACTION ISOLATION LEVEL READ COMMITTED    

  SELECT   [JobQueueId],   [JobTypeId],   [TargetId],   [JobMessage],   [ComputerName],   [StartedOn],   [CompletedOn],   [SkipOrderedBy],     [SkipOrderedOn],   [Attempts],   FailResult],   [CreatedBy],   [CreatedOn]  
  FROM      [dbo].[JobQueue]  

  WHERE   
  ([JobQueueId] = @JobQueueId OR @JobQueueId IS NULL)    
  AND ([JobTypeId] = @JobTypeId OR (@JobTypeId IS NULL AND @JobTypeIdHasValue = 0))   
  AND ([TargetId] = @TargetId OR (@TargetId IS NULL AND @TargetIdHasValue = 0))   
  AND ([JobMessage] = @JobMessage OR @JobMessage IS NULL)   
  AND ([ComputerName] = @ComputerName OR (@ComputerName IS NULL AND @ComputerNameHasValue = 0))   
  AND ([StartedOn] = @StartedOn OR (@StartedOn IS NULL AND @StartedOnHasValue = 0))   
  AND ([CompletedOn] = @CompletedOn OR (@CompletedOn IS NULL AND @CompletedOnHasValue = 0))   
  AND ([SkipOrderedBy] = @SkipOrderedBy OR (@SkipOrderedBy IS NULL AND @SkipOrderedByHasValue = 0))   
  AND ([SkipOrderedOn] = @SkipOrderedOn OR (@SkipOrderedOn IS NULL AND @SkipOrderedOnHasValue = 0))   
  AND ([Attempts] = @Attempts OR (@Attempts IS NULL AND @AttemptsHasValue = 0))   
  AND ([FailResult] = @FailResult OR (@FailResult IS NULL AND @FailResultHasValue = 0))   
  AND ([CreatedBy] = @CreatedBy OR @CreatedBy IS NULL)   
  AND ([CreatedOn] = @CreatedOn OR @CreatedOn IS NULL) 
```

有人可以提供任何指示来帮助我优化此查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:51:05.397

由于查询可能会缓存有利于特定参数的计划，因此不同的参数可能不会从该计划中受益太多（搜索“参数嗅探”，您会发现这是一个非常常见的问题） . 几个选项：

1.  添加[`OPTION (RECOMPILE)`](http://www.sqlmag.com/article/sql-server/-using-the-recompile-query-hint-to-solve-parameter-sniffing-problems-94369)到声明中。由于每次编译，这将花费更多，但它至少是可预测的，并且您不应该有这些巨大的波动，其中某些参数运行半秒，而另一些参数运行很长时间。
2.  用于[`OPTIMIZE FOR UNKNOWN`](http://blogs.msdn.com/b/sqlprogrammability/archive/2008/11/26/optimize-for-unknown-a-little-known-sql-server-2008-feature.aspx)避免使用先前缓存的参数进行优化。
3.  打开服务器级选项（通过`sp_configure`）`Optimize for ad hoc workloads`（参见[此处](http://www.sqlskills.com/blogs/kimberly/plan-cache-and-optimizing-for-adhoc-workloads/)和[此处](http://www.sqlskills.com/blogs/kimberly/plan-cache-adhoc-workloads-and-clearing-the-single-use-plan-cache-bloat/)），并更改您的查询以使用动态 SQL。换句话说，像这样构建查询：

    ```
    DECLARE @sql NVARCHAR(MAX);

    SET @sql = N'SELECT ... FROM [dbo].[JobQueue] WHERE 1=1';

    IF @JobQueueId IS NOT NULL
      SET @sql = @sql + N' AND JobQueueId = @JobQueueId';

    -- ... repeat for other params

    EXEC sp_executesql 
      @sql,
      N'@JobQueueId INT, ..., @CreatedOn DATETIME',
      @JobQueueId, ..., @CreatedOn; 
    ```

另见： http: [//www.sommarskog.se/dynamic_sql.html#Dyn_search](http://www.sommarskog.se/dynamic_sql.html#Dyn_search)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T21:38:49.817

这是一个可怕的，可怕的查询。AND 和 OR（及其模式）的绝对数量使得任何关于索引的静态推理都是徒劳的。它如此糟糕的主要原因是因为它是“通用的”：很多应该是静态的工作（比如检查@JobQueueId 是否为空）都留给了SQL Server。

由于您不会从任何类型的查询准备中获利，因此您应该以动态方式构建查询，并让 db 服务器针对每个特定情况优化您的选择。

# svn - Subversion 分支和发布计划

> ID：14840144
> 
> 赞同：-1
> 
> 时间：2013-02-12T19:21:49.290
> 
> 标签：svn, release-management, subversive

目前，我们正在为我们的项目遵循一个简单的发布计划，如下所示；

1.  开发人员提交了对 subversion 存储库的更改。
2.  构建对 QA 服务器的更改。
3.  构建对生产服务器的更改。

问题是我们在 SVN 主干中使用一个单一的源代码集来完成所有这些步骤。

因此我们无法控制 QA 服务器的发布（例如：避免某些要求）。

我们的发布事件非常复杂，因为有些日子我们必须向 QA 服务器发布 5-6 次。

我想使用颠覆分支我可以克服这个问题。希望我可以为 QA/live 服务器发布创建一个单独的分支，并且我可以合并来自 head/trunk 的必要更改。

或者这是相反的方式？为 QA/live 服务器版本保留 head/trunk 版本，并为开发提交创建一个分支。

正确的方法是什么？

请让我知道是否有更好的方法/工具来处理这种情况。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:24:58.640

SVN 中有一种非常流行的分支方法。它在这里描述：http: [//svnbook.red-bean.com/en/1.7/svn.branchmerge.commonpatterns.html](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.commonpatterns.html)

在我的项目（具有单独发布周期的单人项目）中，我同时使用发布和功能分支并且没有问题。

确切的分支政策可能会有所不同，这对我有用：

*   主干（只有一个）：所有自动测试通过，仅包含已完成的功能和错误修复
*   功能分支（通常是多个）：专用于单个功能或错误修复，通常构建，自动测试通常通过，完成后重新集成到主干并删除
*   Stabilization branch (may be multiple, but usually one): dedicated to a planned release, automatic tests pass, used to generate builds to be sent to QA, internal/external release tags are created from it, some fixes or even features may be merged here from the trunk

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T19:34:02.257

> 正确的方法是什么？

这是一个意见，但创建 3 个树干。一种用于开发，一种用于 QA，一种用于生产。

仅当您要分叉项目时，才需要开发分支。

QA 主干可以分支进行单元测试，同时维护主干进行集成测试。

生产主干永远不会分支，但会为每个生产版本标记。如果有人必须解决问题，代码将被导出而不是签出。这些更改将应用​​于开发主干。

*   查看开发代码
*   应用生产修复更改
*   提交开发代码。

您需要一个人和一个流程将代码从开发主干移动到 QA 主干，还需要一个人和一个流程将代码从 QA 主干移动到生产主干。

# c++ - C++ 基类的成员是否真的需要是虚拟的才能被派生类覆盖？

> ID：14840147
> 
> 赞同：0
> 
> 时间：2013-02-12T19:22:14.647
> 
> 标签：c++, polymorphism, virtual, members

```
class A { 
    public: 
    virtual int test()=0; 
};

class B : public A { 
   public: 
   int test(){return 10;}
};

B *b = new B();
b->test(); // would return 10; 
```

**然而：**

```
class A { 
    public: 
    int test(){return 0;}
};

class B : public A { 
   public: 
   int test(){return 10;}
};

B *b = new B();
b->test(); // **would return 0**; 
```

为什么它在这里返回“ **0** ”？这对我来说是零意义，因为我假设派生类 (B) 的（某种重载）成员排在第一位！这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T19:29:09.473

除了无效的语法（`B->test();`应该在哪里`b->test();`），第二个也将返回 10。

如果相反，您会写：

```
A* a = new B();
a->test(); 
```

根据 A::test 是否为虚拟，它会返回 0 或 10。

# asp.net-mvc - 不显示未提供的 div 数据

> ID：14840150
> 
> 赞同：0
> 
> 时间：2013-02-12T19:22:27.703
> 
> 标签：asp.net-mvc, asp.net-mvc-4, razor

我正在使用 mvc4 并将模型中的数据显示到 cshtml 视图中。

在将数据设置到标记中时，我将其添加到 div 标签中。

mvc中有没有办法如果没有设置模型属性，不显示div？

我的标记示例

```
<div class="myclass"> @Model.Text </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:24:45.957

您可以测试设置的值，如下所示：

```
@if (!string.IsNullOrEmpty(Model.Text)) 
{
    <div class="myclass"> @Model.Text </div>
} 
```

* * *

**更新：**如果您想合并是否根据其值呈现元素的逻辑，您可以创建一个[自定义 HTML Helper](http://www.aspnetwiki.com/page%3acreating-custom-html-helpers)方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:24:17.790

如何将其包装在空检查中

```
@{
  if (@Model.Text != null)
  {
     <div class="myclass"> @Model.Text </div>
  }
} 
```

# sql-server-2008 - 如何提高在 2005 上运行良好的 SSIS 2008 包的更新性能？

> ID：14840151
> 
> 赞同：3
> 
> 时间：2013-02-12T19:22:35.267
> 
> 标签：sql-server-2008, ssis

我正在将我的数据仓库*`SQL Server 2005`*从**`SQL Server 2008`**. 表更新有很大的性能下降。插件工作得很好。

我在两种环境中都使用相同的 SSIS 包，但 2008 仍然无法正确更新。

我已经在所有表上运行了完整的更新统计信息。该过程使用临时表。我已经删除了所有索引（更新所需的索引除外），但这些措施都没有帮助。我还写了一个更新语句来模仿 SSIS 正在做的事情，并且它运行得像预期的那样快。

更新过程使用数据流任务（任务中还有其他内容，例如插入`processed`表以了解更新中使用了哪些数据）。

这是一个全新的数据库，上面没有运行其他任何东西。有什么建议么？

捕获的统计信息 IO

*   2005，CPU=0，读取=150
*   2008，CPU=1700，读取=33,000

数据库内存：

*   2005 年，总计 40GB / 18 个 Sql Server
*   2008 年，总计 128GB / 110GB Sql Server

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:02:14.347

在执行计划中发现了问题。2008 年的计划是使用不同的表构建更新语句。背景：由于我们在查询这些表时使用不允许任何其他访问的索引视图，因此我们构建了 iView 使用的更小/更精简的表，而不是我们的维度，以使它们对用户可用。优化器选择的是那些表，而不是我们在查询中指定的表。

当我最初做解释计划时，我使用了错误的查询，它没有这个功能。这一切都不同了。

谢谢！

# mysql - 在 While 循环中更新 MySQL

> ID：14840155
> 
> 赞同：0
> 
> 时间：2013-02-12T19:22:44.647
> 
> 标签：mysql, phpmyadmin, while-loop

可能有一个简单的解决方案，但我无法弄清楚：我正在尝试在 While 循环中更新（来自 phpMyAdmin 面板）：

```
DELIMITER $$
CREATE PROCEDURE proc_name()
BEGIN
DECLARE c int ;
SET c = 509 ;
WHILE c<637 DO
  UPDATE foobar
    SET `qwerty`= 10000+c-509
    WHERE `product_id` IS c ;
  SET c = c + 1 ;
END WHILE;
END $$
DELIMITER ; 
```

错误：

> ..靠近'c; 设置 c = c + 1 ; 结束时；END'在第 9 行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T19:24:00.643

尝试将其更改为：

```
WHERE `product_id` = c ; 
```

# java - java.lang.SecurityException: Cannot set up certs for trusted CAs (JBoss AS 7)

> ID：14840165
> 
> 赞同：0
> 
> 时间：2013-02-12T19:23:16.643
> 
> 标签：java, jboss, module, javax.crypto

(Using eclipse)

I am using classes from a JAR provided by a third party. The third party JAR has the line:

```
var = Cipher.getInstance("AES"); 
```

When this line gets executed, it throws the following stack trace:

```
13:38:00,120 ERROR [stderr] (EJB default - 1) java.lang.ExceptionInInitializerError
13:38:00,121 ERROR [stderr] (EJB default - 1)   at javax.crypto.Cipher.getInstance([DashoPro-V1.2-120198])

...
BLAH BLAH BLAH 
(Stack trace which leads all the way down to the call I make through the third party jar)
...

13:38:00,154 ERROR [stderr] (EJB default - 1) Caused by: java.lang.SecurityException: Cannot set up certs for trusted CAs
13:38:00,154 ERROR [stderr] (EJB default - 1)   at javax.crypto.b.<clinit>([DashoPro-V1.2-120198])
13:38:00,155 ERROR [stderr] (EJB default - 1)   ... 55 more 
```

Previously, I accessed this JAR by pasting it into a folder in my eclipse project, then adding the JAR to my build-path and deployment assembly.

However, because we want two different deployments to use the same instance of an object initialized from this third party jar, the decision was made to move the third party JAR into a JBoss AS 7 "module"

We maintained the reference to the JAR in the project within the build path, but removed it from the deployment assembly. I also added a "Dependencies: com...[the path specified in the module]"

This appears to have worked, as the project will build and deploy.

However, whenever I attempt to call a method which has been called hundreds of thousands of times already, I get this exception.

The exception appears to be getting thrown during the static initialization of SunJCE_b.class, but i'm not sure at all.

Here is the stack at the time that the first SecurityException gets thrown:

```
b.e() line: not available   
b.clinit() line: not available  
Cipher.getInstance(String) line: not available  
OtherCompanyCryptography.getCipherInstance() line: not available 
```

I can't find any references to javax.crypto.b.e() online.

How is it that previously this worked, but when I turned it into a JBoss module, it stopped working?

Also, how can I resolve this issue?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-21T18:00:57.567

First of all you provided information about two different JVMs:

1.  `SunJCE_b` class is from Oracle (Sun) JVM
2.  `javax.crypto.b` class is from IBM JVM

Particularly they are doing the same thing. They are responsible of verifying cryptographic components signatures. In most of the cases such a stack trace is caused by wrong jurisdiction policy files on the class path. Then i.e. on IBM JVM you can see in the stack trace:

```
Caused by: java.lang.SecurityException: Jurisdiction policy files are not signed by trusted signers! 
at javax.crypto.b.a 
```

Another reason may be cryptographic provider with invalid (or old) signature. If you provide more detailed stack trace then I will be able to help more.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T17:51:17.563

Dear people of the future:

The workaround we ended up using was to package the thrid party jar into a separate project, which we called ApiCommons.

We then created a combined application called ApplicationBundle.ear

ApplicationBundle.ear contains the two deployment modules that we wanted to have using the same object, shared between the two via JNDI.

The ApplicationBundle project contains the jars in ApiCommons in its "deployment assembly"

We were able to keep the two deployment modules as separate eclipse projects, but they deploy in a single .EAR file, and both bundled projects have ApiCommons on their build path, but not their deployment assembly.

# ruby-on-rails - Rails API 应用程序的异常策略

> ID：14840168
> 
> 赞同：2
> 
> 时间：2013-02-12T19:23:54.470
> 
> 标签：ruby-on-rails, exception, policy

我想知道如何在 Rails API 应用程序中管理异常的一般策略。

我想客户应该只收到那些与他的客户逻辑相关的异常。所以在控制器中，我正在捕捉这些异常并发送它的消息。

`MainApplicationException`是我的应用程序中所有异常的顶层异常类。

```
class MyController < ApplicationController

  def some_action

    ... # processing of the request

    rescue MainApplicationException => error
      render: { :message => error.message }
    end
  end
end 
```

但是可以肯定的是，在处理传入的请求时很有可能会引发异常。

我应该如何注册这个异常以及我应该在应用程序中的什么位置挽救这些异常？我应该把这些消息记录下来吗？是否有针对此类问题的教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:36:05.937

异常处理很难！一般来说，特别是在构建 API 时，很好地掌握[HTTP 状态代码](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)非常重要。一个简单的例子是 404。比如说你正在做`Company.find(params[:id]`它会抛出一个 ActiveRecord::RecordNotFound 并且这可以在应用程序控制器中一直被捕获：`rescue_from ActiveRecord::RecordNotFound, :with => :not_found`

例如，对于您必须处理的数据也是如此，如果格式（例如，您接收的是 'application/xml' 而不是 'application/json.'）不是您所接受的，您可以抛出
406。

最难的部分显然是处理用户数据，这里出现的一个重要问题是你想通知用户多少？太多的信息可能会使您的系统暴露在潜在的黑客面前。

就我个人而言，我发现控制器是处理异常的好地方，只要它们不影响代码的任何其他部分。否则，一个不错的方法可能是[构建器模式](http://en.wikipedia.org/wiki/Builder_pattern)，它允许您在不实际处理控制器中的错误的情况下编写响应。

有很多关于异常处理的书籍，但是关于处理 API 错误和资源集合的简单介绍可能是[这篇博文](http://blog.luisrei.com/articles/rest.html)

希望这可以帮助。

# c# - 在 xUnit.net 中跳过整个测试类

> ID：14840172
> 
> 赞同：49
> 
> 时间：2013-02-12T19:24:07.000
> 
> 标签：c#, xunit.net

是否可以跳过特定类中的所有测试，例如 NUnit

```
[TestFixture]
[Ignore("Reason")]
public class TestClass {
} 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-13T03:02:53.807

没有-[目前没有这样的设施](https://github.com/xunit/xunit/issues/791)，

在 xUnit 中实现该效果的一种快速方法是注释掉`public`- 私有类不被反映（但显然它不会以这种方式出现在跳过列表中）。

如果您觉得对此的需求足够普遍，请考虑将其作为问题记录在 CodePlex 上（我个人无法想象赞成它，因为我根本不会遇到需要跳过整个测试类的测试的情况）。

更新：另一种方法是`TraitAttribute`在类上放置一个，然后（假设您正在使用`xunit.console`跑步者）通过运行过滤掉它`/-trait traitName`。（例如，您可以通过`ExplicitAttribute`这种方式实现待定测试的 BDD 框架技术的某些方面和类似的语义 - 当然，最大的问题是在使用任何这些过滤技术时它们不会出现在任何报告中）

更新2：你可以做

```
const string skip = "Class X disabled";

[Fact(Skip=skip)]
void Test() {} 
```

然后您可以更改为`const string skip = null`以撤消跳过。这样做的（缺点）优点是测试仍然在测试列表中显示为已跳过的测试，通常在测试运行报告中包含一个原因（而不是`private`让它可能被遗忘）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-01-16T13:08:04.950

这是我避免错误 xUnit1000 的技巧：测试类必须是公共的（检查单个事实，我认为理论也可以通过这种方式被破解）。

```
// Uncomment to enable tests
//public class FactSwitch : FactAttribute { } // public! ahh, a bug!

// Uncomment to disable tests
internal class FactSwitch : Attribute { }

public class MyTests
{
    [FactSwitch]
    public void MyTest1()
    {
        "it".ShouldBe("it");
    }
} 
```

（3年后）

在寻找相同的解决方案时，我发现有更好的方法可以做到这一点。让我们按照 Ruben Bartelink 建议的方式重写上面的示例（继续他的想法）。

```
public class MyTests
{
    //const string SkipOrNot = null; // Run all tests
    const string SkipOrNot = "reason"; // Skip all tests

    [Fact(Skip = SkipOrNot)]
    public void MyTest1()
    {
        "it".ShouldBe("it");
    }
} 
```

Nathan Cooper 对我的想法提出了一个很好的改进：

```
public class MyTests
{
    // Uncomment to disable tests
    //private class FactAttribute : Attribute { }

    [Fact]
    public void MyTest1()
    {
        "it".ShouldBe("it");
    }
} 
```

所以我喜欢鲁本和内森的两个想法。使用 Skip="something" (Ruben) 和根本不使用 Skip 之间存在细微差别。使用“Skip”会将所有测试置于“Skipped tests”警告区，而“FactAttribute : Attribute”将隐藏它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-26T08:07:18.990

这是另一个需要对代码进行最少更改的 hack

```
using FactAttribute = System.Runtime.CompilerServices.CompilerGeneratedAttribute;
using TheoryAttribute = System.Runtime.CompilerServices.CompilerGeneratedAttribute; 
```

任何兼容的属性都可以用于替换。

如果您还使用了，`InlineDataAttribute`那么您需要定义一个替换，因为我认为没有现有的 compatible 属性。

```
using InlineDataAttribute = DummyDataAttribute;

[AttributeUsage(AttributeTargets.Method, AllowMultiple = true)]
internal class DummyDataAttribute : Attribute
{
    public DummyDataAttribute(params object[] data)
    {
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-30T18:42:38.307

我发现了另一种在没有编译器警告的情况下临时禁用整个类的方法。

禁用：

```
[System.Diagnostics.CodeAnalysis.SuppressMessage("Usage", "xUnit1000:Test classes must be public", Justification = "Disabled")]//*/
/*
public /**/class DatabaseTests
{
} 
```

启用向上移动`/*`一行（即使用 alt+up）：

```
/*
[System.Diagnostics.CodeAnalysis.SuppressMessage("Usage", "xUnit1000:Test classes must be public", Justification = "Disabled")]//*/
public /**/class DatabaseTests
{
} 
```

请注意，使用 SupressMessage 的完整命名空间路径不会弄乱您的使用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-14T01:42:24.943

您可以创建*LocalOnlyFactAttribute*

```
 public class LocalOnlyFactAttribute : FactAttribute
    {
        //uncomment to run on local
        //const string skip = null; 

        //keep this to avoid slow running tests on other env
        const string skip = "Disabled slow running tests."; 

        public override string Skip { get => skip; set => base.Skip = value; }
    } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-04-24T14:26:10.187

据我所知，在运行时动态跳过整个 xUnit 测试类的最简单方法是在`TestFrameworkAttribute`程序集级别使用方法返回另一个实现接口的类（或从 继承，这更简单），您最终可以在其中覆盖该方法，以决定是否应该跳过一个类。`ITestFramework``XunitTestFramework``CreateDiscoverer()``ITestFrameworkDiscoverer``XunitTestFrameworkDiscoverer``IsValidTestClass()`

这是一些示例代码：

```
[assembly: TestFramework("MyNamespace.Xunit.MyTestFramework", "MyAssembly")]

namespace MyNamespace.Xunit
{
    public class MyTestFramework : XunitTestFramework
    {
        public MyTestFramework(IMessageSink messageSink)
            : base(messageSink)
        {
        }

        protected override ITestFrameworkDiscoverer CreateDiscoverer(
            IAssemblyInfo assemblyInfo)
            => new MyTestFrameworkDiscoverer(
                assemblyInfo,
                SourceInformationProvider,
                DiagnosticMessageSink);
    }

    public class MyTestFrameworkDiscoverer : XunitTestFrameworkDiscoverer
    {
        public MyTestFrameworkDiscoverer(
            IAssemblyInfo assemblyInfo,
            ISourceInformationProvider sourceProvider,
            IMessageSink diagnosticMessageSink,
            IXunitTestCollectionFactory collectionFactory = null)
            : base(
                assemblyInfo,
                sourceProvider,
                diagnosticMessageSink,
                collectionFactory)
        {
        }

        protected override bool IsValidTestClass(ITypeInfo type)
            => base.IsValidTestClass(type) &&
               FilterType(type);

        protected virtual bool FilterType(ITypeInfo type)
        {
            // Insert your custom filter conditions here.
            return true;
        }
    }
} 
```

用 xUnit 测试`2.4.1`。

我们在 Pomelo.EntityFrameworkCore.MySql 中使用它（参见[AssemblyInfo.cs](https://github.com/PomeloFoundation/Pomelo.EntityFrameworkCore.MySql/blob/ebe011a6f1b2a2a9709fe558cfc7ed3215b55c37/test/EFCore.MySql.FunctionalTests/AssemblyInfo.cs#L18-L20)和[MySqlXunitTestFrameworkDiscoverer.cs](https://github.com/PomeloFoundation/Pomelo.EntityFrameworkCore.MySql/blob/ade47ba2358e5a8cfbd147db11beb7d64e15b02d/test/EFCore.MySql.FunctionalTests/TestUtilities/Xunit/MySqlXunitTestFrameworkDiscoverer.cs)）（比这里的示例代码复杂一点）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-02-06T00:44:30.773

在最初的问题之后几乎一年后添加了一个原因。我有一组调用真实服务器 api 的测试，我想按需运行。使用 nUnit，它具有 Ignore 属性：使用该设置，测试运行器将跳过这些测试，但我仍然可以手动运行它。

xUnit 没有这样的功能。最接近的是设置这样的类级别属性，并在我想运行它时将其注释掉。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-08-15T12:52:34.063

您可以通过自定义 ITestClassCommand 实现此目的。

见[http://mariangemarcano.blogspot.be/2010/12/xunitnet-running-tests-testcategory.html](http://mariangemarcano.blogspot.be/2010/12/xunitnet-running-tests-testcategory.html)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-06-15T01:37:53.520

您需要将您的班级访问级别设置为**内部**和隐藏消息，就像@Miq 所做的那样：

```
[System.Diagnostics.CodeAnalysis.SuppressMessage("Usage", "xUnit1000:Test classes must be public", Justification = "Disabled")]
internal class MyClassThatIsNotATestClass
{ ... } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-05-14T01:49:34.170

考虑创建*LocalOnlyFactAttribute*，它可以在多个测试文件中重复使用。

```
 public class LocalOnlyFactAttribute : FactAttribute
    {
        //uncomment to run on local
        //const string skip = null; 

        //keep this to avoid slow running tests on other env
        const string skip = "Disabled slow running tests."; 

        public override string Skip { get => skip; set => this.Skip = value; }
    } 
```

# c++ - C ++相同的函数参数具有不同的返回类型

> ID：14840173
> 
> 赞同：13
> 
> 时间：2013-02-12T19:24:10.060
> 
> 标签：c++, function, types, overloading

我需要找到某种方法来模拟 C++ 中函数返回类型的重载。

我知道没有办法直接做到这一点，但我希望有一些开箱即用的方法。我们正在创建一个供用户使用的 API，他们将传入一个数据字符串，该字符串根据字符串信息检索值。这些值是不同的类型。本质上，我们想让他们这样做：

```
int = RetrieveValue(dataString1);
double = RetrieveValue(dataString2);
// Obviously, since they don't know the type, they wouldn't use int =.... It would be:
AnotherFunction(RetrieveValue(dataString1)); // param of type int
AnotherFunction(RetrieveValue(dataString2)); // param of type double 
```

但这在 C++ 中不起作用（显然）。现在，我们正在对其进行设置，以便他们调用：

```
int = RetrieveValueInt(dataString1);
double = RetrieveValueDouble(dataString2); 
```

但是，我们不希望他们知道他们的数据字符串的类型是什么。

不幸的是，我们不允许使用外部库，所以不要使用 Boost。

我们有什么办法可以解决这个问题吗？

澄清一下，我知道 C++ 本身无法做到这一点。但必须有某种方法可以绕过它。比如我想过做RetrieveValue(dataString1, GetType(dataString1))。这并不能真正解决任何问题，因为 GetType 也只能有一种返回类型。但我需要这样的东西。

我知道以前有人问过这个问题，但意义不同。我不能使用任何明显的答案。我需要一些完全开箱即用的东西才能对我有用，而另一个问题中的任何答案都不是这种情况。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-12T19:29:29.157

你必须从这个开始：

```
template<typename T>
T RetrieveValue(std::string key)
{
     //get value and convert into T and return it
} 
```

要支持此功能，您必须多做一些工作，以便将 value 转换为 type `T`。转换价值的一种简单方法是：

```
template<typename T>
T RetrieveValue(std::string key)
{
     //get value
      std::string value = get_value(key, etc);

      std::stringstream ss(value);
      T convertedValue;
      if ( ss >> convertedValue ) return convertedValue;
      else throw std::runtime_error("conversion failed");
} 
```

请注意，您仍然必须将此函数称为：

```
int x = RetrieveValue<int>(key); 
```

如果您可以这样做，则可以避免提及`int`两次：

```
Value RetrieveValue(std::string key)
{
     //get value
      std::string value = get_value(key, etc);
      return { value };
} 
```

其中`Value`实现为：

```
struct Value
{
    std::string _value;

    template<typename T>
    operator T() const   //implicitly convert into T
    {
       std::stringstream ss(_value);
       T convertedValue;
       if ( ss >> convertedValue ) return convertedValue;
       else throw std::runtime_error("conversion failed");
    }
} 
```

然后你可以这样写：

```
int    x = RetrieveValue(key1);
double y = RetrieveValue(key2); 
```

这就是你想要的，对吧？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T19:33:32.733

唯一明智的方法是将返回值移动到参数中。

```
 void retrieve_value(std::string s, double& p);
 void retrieve_value(std::string s, int& p);
 <...>

 double x;
 retrieve_value(data_string1, x);

 int y;
 retrieve_value(data_string2, y); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T19:37:17.353

无论是重载还是特化，您都需要将信息包含在函数签名中。您可以将变量作为未使用的第二个参数传递：

```
int RetrieveValue(const std::string& s, const int&) {
  return atoi(s.c_str());
}
double RetrieveValue(const std::string& s, const double&) {
  return atof(s.c_str());
}

int i = RetrieveValue(dataString1, i);
double d = RetrieveValue(dataString2, d); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T22:30:11.997

如果数据字符串是编译时常量（如回答我的评论所述），您可以使用一些模板魔法来完成这项工作。一个更简单的选择是根本不使用字符串，而是使用一些允许您重载参数的数据类型。

```
struct retrieve_int {} as_int;
struct retrieve_double {} as_double;

int RetrieveValue(retrieve_int) { return 3; }
double RetrieveValue(retrieve_double) { return 7.0; }

auto x = RetrieveValue(as_int);    // x is int
auto y = RetrieveValue(as_double); // y is double 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-12T19:31:19.160

如果您知道您的值永远不会是零或负值，只需返回一个包含 int 的结构，然后将不需要的值加倍并归零...

这是一种廉价而肮脏，但简单的方法......

```
struct MyStruct{
int myInt;
double myDouble;
};

MyStruct MyFunction(){
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-12T19:30:31.877

不幸的是，没有办法重载函数返回类型看到这个答案 [通过返回类型重载](https://stackoverflow.com/questions/9568852/overloading-by-return-type)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-12T19:30:38.800

```
int a=itoa(retrieveValue(dataString));
double a=ftoa(retrieveValue(dataString)); 
```

两者都返回一个字符串。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-12T19:31:45.450

作为模板解决方案的替代方案，您可以让函数返回一个引用或指向某个类的指针，然后创建该类的子类以包含您想要返回的不同数据类型。`RetrieveValue`然后将返回对适当子类的引用。

这将让用户将返回的对象传递给其他函数，而无需知道它属于哪个子类。

这种情况下的问题将变成内存管理问题——选择哪个函数分配返回的对象，哪个函数删除它，以及何时删除它，以避免内存泄漏。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-08T22:50:21.327

答案很简单，只需声明返回 void* 类型的函数并在定义中返回对不同类型变量的引用。例如在标头 (.h) 中声明

```
void* RetrieveValue(string dataString1); 
```

在定义（.cpp）中只写

```
void* RetrieveValue(string dataString1)
{
    if(dataString1.size()<9)
    {
        static double value1=(double)dataString1.size();
        return &value1;
    }
    else
    {
        static string value2=dataString1+"some string";
        return &value2;
    }
} 
```

然后在调用 RetrieveValue 的代码中只需转换为正确的值

```
string str;
string str_value;
double dbl_value;
if(is_string)
{
    str_value=*static_cast<*string>(RetrieveValue(str));
}
else
{
    dbl_value=*static_cast<*double>(RetrieveValue(str));
} 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2013-02-12T19:54:20.107

由于您使用了一个并非您真正想要的示例，因此您让每个人都有些失望。

您真正拥有的设置（使用返回类型未知的此函数的返回值调用函数）将不起作用，因为函数调用在编译时被解析。

然后，您将被限制为运行时解决方案。我推荐访问者模式，你必须大幅改变你的设计以允许这种改变。我真的没有其他方法可以做到这一点。

# angularjs - Angular.js：通过数组中的缺失过滤 ng-repeat

> ID：14840176
> 
> 赞同：12
> 
> 时间：2013-02-12T19:24:13.553
> 
> 标签：angularjs, repeater, filtering

我需要过滤 ng-repeat 中的项目，以便仅显示未出现在 alreadyAddedValues() 数组中的项目：

```
<ul class="dropdown-menu">
    <li ng-repeat="v in values() | filter: { ????? } ">{{value.name}}</li>
</ul>

$scope.values() = function(){
    ................
}

$scope.alreadyAddedValues() = function()
{
    //returns an array
} 
```

搜索已经增加的价值应该由`value.shortName`

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-13T00:34:41.113

例如，您可以使用自定义函数进行过滤：

```
<li ng-repeat="v in values() | filter:filterAlreadyAdded ">{{value.name}}</li> 
```

在控制器上：

```
$scope.filterAlreadyAdded = function(item) {
    // filter logic here...
    // return false if item already added, true otherwise
}; 
```

**jsfiddle**：http: [//jsfiddle.net/bmleite/5VbCJ/](http://jsfiddle.net/bmleite/5VbCJ/)

# file - 使用 Bash 变量代替文件作为可执行文件的输入

> ID：14840178
> 
> 赞同：32
> 
> 时间：2013-02-12T19:24:15.097
> 
> 标签：file, pipe, bash

我有一个可执行文件，其使用方式如下：

```
executable -v -i inputFile.txt -o outputFile.eps 
```

为了更高效，我想使用 Bash 变量代替输入文件。所以，我想做如下的事情：

```
executable -v -i ["${inputData}"] -o outputFile.eps 
```

在这里，方括号代表一些聪明的代码。

你知道一些技巧可以让我以这种方式将信息传递到所描述的可执行文件中吗？

非常感谢你的协助

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-02-12T19:49:28.483

您可以使用以下构造：

```
<(command) 
```

因此，要让 bash 使用命令为您创建一个 FIFO，而不是您的尝试`-i ["${inputData}"]`，您可以这样做：

```
-i <(echo "$inputData") 
```

因此，这是您的最终总命令：

```
executable -v -i <(echo "$inputData") -o outputFile.eps 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2018-03-27T17:54:13.397

[Echo 不能安全地用于任意输入](https://unix.stackexchange.com/a/65819/280944)。

要正确处理`inputdata='\ntest'`or之类的病理情况`inputdata='-e'`，您需要

```
executable -v -i <(cat <<< "$inputData") 
```

在`zsh`中，`cat`是不必要的

* * *

**编辑：**即使这增加了一个尾随换行符。要逐字节输出确切的变量内容，您需要

```
executable -v -i <(printf "%s" "$inputData") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-06-25T11:06:23.917

**注意：仅限 zsh：**

要获取包含 的内容的文件名`${variable}`，请使用：

```
<(<<<${variable}) 
```

笔记：

*   `<<<${variable}`重定向`STDIN`来自`${variable}`
*   `<<<${variable}`相当于（但比）快`cat <<<${variable}`

所以对于OP的情况：

```
executable -v -i <(<<<${inputData}) -o outputFile.eps 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2017-04-27T20:35:31.167

```
executable -v -i <<<"${inputData}" -o outputFile.eps 
```

会**在 bash 中**解决问题。

# javascript - 00-59（秒）之间数字的javascript正则表达式

> ID：14840179
> 
> 赞同：4
> 
> 时间：2013-02-12T19:24:15.030
> 
> 标签：javascript, regex

我想检查一个字段是否是有效的时间值（仅几秒钟）。所以我想接受从 0 到 59 的数字。我得出了这个：

```
[0-5][0-9]? 
```

这几乎可以完成这项工作。但不包括数字 7-8-9 ... 如果用户数字 07，它可以工作，但我不想强迫用户输入第一个 0。所以我尝试了这样的事情：

```
([0-5][0-9]? | [0-9]) 
```

但这不起作用并产生过多递归调用的错误。

任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T19:25:36.150

在您的第二个正则表达式中，您需要`?`从第一部分中删除它，并使其`[1-5]`代替`[0-5]`：

```
[0-9]|[1-5][0-9] 
```

如果您想足够灵活以同时允许`7`和`07`，请使用`[0-5]`：

```
[0-9]|[0-5][0-9] 
```

然后，简化上述正则表达式，您可以使用：

```
[0-5]?[0-9]   // ? makes [0-5] part optional 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T19:26:41.377

这应该足够了：`[0-5]?\d`

但是，如果您想强制执行两位数（即。`01`，`02`...），您应该只使用`[0-5]\d`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T19:29:18.360

如果要使十位数可选，而不是单位位置，请将其放在`?`那里：

```
[0-5]?[0-9] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T19:30:27.870

如果您希望 0 是可选的，请将 移到`?`之后`[0-5]`。

`[0-5]?[0-9]`应该这样做。

# c# - 如何使用 Open XML SDK 在 C# 中创建复选框

> ID：14840183
> 
> 赞同：0
> 
> 时间：2013-02-12T19:24:17.930
> 
> 标签：c#, asp.net, ms-word, openxml, openxml-sdk

我想在 C# 中使用 Open XML SDK 创建一定数量的复选框。我该怎么做？

例子：

```
(Checkbox) - Shoes 

(Checkbox) - Shirt 
```

复选框数量也有所不同。我正在阅读模板文档，然后进行编辑以返回。到目前为止，我有这样的事情：

```
string documentText;
using (StreamReader reader ...)
{
    documentText = reader.ReadToEnd();
}

string addClothes = "";
Run newCheckBox = GenerateRun();
foreach(var item in ClothesList)
{
    addClothes = item.clothing;
    //MY DILEMMA
    documentText = documentText.Replace("##clothing##", newCheckBox + addClothes + "NewLine");
}

public Run GenerateRun()
{
    Run run1 = new Run() { RsidRunProperties = "004C0D9A", RsidRunAddition = "00850FA5" };
    FieldCode fieldCode1 = new FieldCode() { Space = SpaceProcessingModeValues.Preserve };
    fieldCode1.Text = " FORMCHECKBOX ";

    run1.Append(fieldCode1);
    return run1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:44:51.647

使用 OpenXML SDK 我认为它是这样的：（原始复制/粘贴 - 的值`-1636166143`可能会偏离）

```
using w14 = DocumentFormat.OpenXml.Office2010.Word

            SdtRun sdtRun1 = new SdtRun();

            SdtProperties sdtProperties1 = new SdtProperties();
            SdtId sdtId1 = new SdtId(){ Val = -1636166143 };

            W14.SdtContentCheckBox sdtContentCheckBox1 = new W14.SdtContentCheckBox();
            W14.Checked checked1 = new W14.Checked(){ Val = W14.OnOffValues.Zero };
            W14.CheckedState checkedState1 = new W14.CheckedState(){ Font = "MS Gothic", Val = "2612" };
            W14.UncheckedState uncheckedState1 = new W14.UncheckedState(){ Font = "MS Gothic", Val = "2610" };

            sdtContentCheckBox1.Append(checked1);
            sdtContentCheckBox1.Append(checkedState1);
            sdtContentCheckBox1.Append(uncheckedState1);

            sdtProperties1.Append(sdtId1);
            sdtProperties1.Append(sdtContentCheckBox1);

            SdtContentRun sdtContentRun1 = new SdtContentRun();

            Run run1 = new Run();

            RunProperties runProperties1 = new RunProperties();
            RunFonts runFonts1 = new RunFonts(){ Hint = FontTypeHintValues.EastAsia, Ascii = "MS Gothic", HighAnsi = "MS Gothic", EastAsia = "MS Gothic" };

            runProperties1.Append(runFonts1);
            Text text1 = new Text();
            text1.Text = "☐";

            run1.Append(runProperties1);
            run1.Append(text1);

            sdtContentRun1.Append(run1); 
```

复选框后面的任何文本都在上面的代码之后

# ruby-on-rails - Rspec 应该有_many 引发错误数量的参数（0 代表 1）

> ID：14840185
> 
> 赞同：0
> 
> 时间：2013-02-12T19:24:24.970
> 
> 标签：ruby-on-rails, rspec, has-many

当我在我的 Rails 应用程序上运行 rspec 测试文件时，除了`has_many`关联测试之外，一切都通过了：

```
it { should have_many(:notes) } # ERROR
it { should belong_to(:agent_field_set) } # OK
it { should have_and_belong_to_many(:profiles) } # OK 
```

`should have_many(:notes)`线提高了`ArgumentError: wrong number of arguments (0 for 1)`。我检查了我的数据库和我的模型文件以验证`has_many`关联的存在，并且看起来都很好：

```
has_many :notes, class_name: "NoteNs::Note", foreign_key: :user_id 
```

谁能告诉我在哪里寻找问题？

*规格：Ruby 1.9.3，Rails 3.2.11*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:48:49.883

最后，解决问题的是重命名我的一个命名范围。我的命名范围被称为`parent`，我的模型有一个`belongs_to :parent`关联。

我无法猜测为什么在命名范围（在类上）和关联（在实例上）之间会出现冲突。+1 给任何可以向我解释的人。

# java - 将 KeyListener 添加到线程

> ID：14840187
> 
> 赞同：0
> 
> 时间：2013-02-12T19:24:55.840
> 
> 标签：java, awtrobot

我创建了一个程序，它使用 Robot 类在记事本上输出一些文本。

```
public class Main extends Thread implements KeyListener {

  public Main() {
     addKeyListener(this);
     ...
  } 
```

我想通过单击某个键来停止它，可以吗？我试图实现它并添加它，但这是一个编译错误。

我的类是 Thread 的子类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:31:34.413

> 公共类 Main 扩展 Thread 实现 KeyListener {

如果您查看[Thread 类的 javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html)，您会发现它不包含该`addKeyListener`方法，因此会出现编译错误。

但是请注意，在使用时，`java.awt.Robot`您关心的是*发出* `KeyEvents`而不是监听它们：

```
Robot robot = new Robot(); 
 // Create a delay of 5 sec so that you can open notepad 
robot.delay(5000);
robot.keyPress(...); 
```

**编辑：**要退出，您可以模拟组合键`ALT`+ `F4`。

```
robot.keyPress(KeyEvent.VK_ALT);  
robot.keyPress(KeyEvent.VK_F4);  
robot.keyRelease(KeyEvent.VK_ALT);  
robot.keyRelease(KeyEvent.VK_F4); 
```

注意按键释放命令。这是从先前的组合键中分离键状态所必需的。

# android - onDrawFrame 之外的 Android OpenGL 游戏循环

> ID：14840194
> 
> 赞同：4
> 
> 时间：2013-02-12T19:25:17.963
> 
> 标签：android, opengl-es, runnable, game-loop

我在为我的第一款游戏创建游戏循环时遇到了问题。我已经阅读了很多关于它的内容，但仍然无法弄清楚。它基于 OpenGL，所以我使用 onDrawFrame 作为游戏循环，它在我的手机上运行良好。问题是 onDrawFrame 的刷新时间取决于硬件，因此它在某些设备上运行速度太快。所以我想要的是添加一个单独的游戏循环，它会在所有智能手机上以恒定的时间周期自我刷新。（并且 onDrawFrame 只会处理应有的图形）

至于现在我有：

*   myGameRenderer 类与所有 openGl 东西一个 onDrawFrame
*   支持触摸事件的 myGLSurfaceView
*   我的游戏活动

onDrawFrame 激活 myGameUpdate 函数，该函数根据来自 myGLSurfaceView 的信息控制游戏中所有对象的位置变化

我尝试过创建新的 Runnable，但它似乎不起作用，我不知道如何启动该 runnable 以及我应该将它放在哪里（我试图将它放在 myGameRenderer 类中，但它没有t似乎工作，没有什么动静：

```
private final Runnable mUpdateDisplay = new Runnable() {
    @Override
    public void run() {
        update();

}};

private void update() {

//some update stuff blablabla
//some update stuff blablabla

mHandler.postDelayed(mUpdateDisplay,40); //to refresh at 25 fps

} 
```

但我想我不明白它 - 我的意思是我创建了这个可运行文件。我试图将它放在 onCreateSurface 中以启动它，但没有效果。所以 - 一般的想法可以吗？以及如何开始循环？放在哪里？或者我应该使用其他方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:13:32.473

好的，这很简单——我只是想念 r.run(); 但总有一些东西。现在它可以按我的意愿工作了——我的意思是帧不依赖于硬件，但一切都不像以前那么流畅了——3d 中的部分对象正在闪烁。似乎有些物体明显绘制得更快，有些物体绘制得更晚，看起来很难看。那么我做错了什么？有没有更好的办法？

# objective-c - 如何在 NSString 中保留一定数量的空格？

> ID：14840199
> 
> 赞同：0
> 
> 时间：2013-02-12T19:25:35.887
> 
> 标签：objective-c, replace, nsstring, space

对于不变的部分（即“奖金分数：（+7%）”）和变化的部分（例如“247,890”），我有单独的文本对象。由于它们是分开的，我想在不变的部分留出空间来显示数字。

我首先尝试的是：

```
NSString* numberString = @"247,890";
NSString* blankScore = [@"" stringByPaddingToLength:[numberString length] withString: @" " startingAtIndex:0];
NSString* baseDisplay = [NSString stringWithFormat:@"BONUS SCORE: %@ (+7%%)", blankScore]; 
```

'blankScore' 是正确的长度，但生成的 baseDisplay 似乎修剪了 blankScore 周围的空间，使其空间对于显示的数字来说太小了。

接下来我尝试了另一种创建blankScore的方法：

```
NSString* blankScore = [numberString stringByReplacingCharactersInRange:NSMakeRange(0, [numberString length]) withString:@" "]; 
```

但这返回了一个长度为 1 的 blankScore。

我是否错误地理解了这些 NSString 方法？我检查了文档，似乎我对这些方法的理解与那里写的一致，但我仍然不明白为什么我不能让我的 baseDisplay 拥有正确数量的空格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:49:51.710

@H2CO3 是正确的解决方案。您应该使用： NSString *baseDisplay = [NSString stringWithFormat:@"BONUS SCORE: %@ (+7%%)", numberString];

为了使这项工作更好，您可能需要考虑使用 NSNumberFormatter 来正确格式化更改部分，然后再将其插入 baseDisplay 对象。像这样的东西：

```
NSNumber *changingNumber = [NSNumber numberWithDouble:247890];
NSNumberFormatter *correctFormat = [[NSNumberFormatter alloc] init];
[correctFormat setNumberStyle:NSNumberFormatterDecimalStyle];
[correctFormat setHasThousandSeparators:YES];
[correctFormat setUsesGroupingSeparator:YES];

NSString *numberString = [correctFormat stringFromNumber:changingNumber];
NSString *baseDisplay = [NSString stringWithFormat:@"BONUS SCORE: %@ (+7%%)", numberString]; 
```

这样，无论你向它扔什么数字，它都会正确显示“1,234,456”或“34,567”，无论如何。

**编辑：**

根据对我的回答的评论，您将需要使用：

```
stringByPaddingToLength:withString:startingAtIndex: 
```

它应该看起来像这样：

```
NSString *templateString = @"BONUS SCORE:";
NSString *templateString2 = @"(+7%%)";
NSUInteger baseStringLength = [templateString length] + [numberString length];
NSString *spacedString = [templateString stringByPaddingToLength:baseStringLength withString:@" " startingAtIndex:0];
NSString *baseDisplay = [NSString stringWithFormat:@"%@%@", spacedString, templateString2]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:39:51.913

您是否`blankScore`使用在控制台上打印过`NSLog`？实际上你的字符串是正确的，但是输出在行尾被修剪 - 这就是你看到它描述的原因。

# mysql - 如何将 subscr_date 和 subscr_effective 转换为 mysql 日期

> ID：14840204
> 
> 赞同：0
> 
> 时间：2013-02-12T19:25:48.093
> 
> 标签：mysql, datetime, paypal, paypal-ipn, paypal-subscriptions

自动回答我自己的问题，因为目标是帮助你们解决 IPN，这足以让自己省去这一步……

提醒：这是关于转换Paypal IPN的以下字段：

*   `$_POST['subscr_date']`
*   `$_POST['subscr_effective']`

到一个 mysql`DATE`值。

希望能帮助到你！干杯，S。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:00:43.097

Java 用户只需要使用`SimpleDateFormat("HH:mm:ss MMM dd, yyyy z")`.

请注意，IPN 指南中这种格式的文档（“HH:MM:SS DD Mmm YY, YYYY PST”）是不正确的，您可以从双年字段中看出这一点。

另请注意，正如我今天刚刚建立的，沙盒测试 IPN 工具发送的内容是第三种格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:25:48.093

所以，如果你想知道如何将这些日期转换为 mysql，下面是代码：

```
DELIMITER $$
DROP FUNCTION  IF EXISTS ppdate_to_mysqldate$$

CREATE FUNCTION ppdate_to_mysqldate(I_PP_EFFECTIVE_DATE VARCHAR(32)) RETURNS DATE DETERMINISTIC
BEGIN
DECLARE dteStart DATE;

    /*
        I_PP_EFFECTIVE_DATE:    
        . from doc:
            Date when the subscription modification will be effective.
            Time/Date stamp generated by PayPal, in the following format: HH:MM:SS DD Mmm YY, YYYY PST
        . from real example: 
            03:00:00 Mar 11, 2013 PDT
            06:56:24 Feb 11, 2013 PST
    */

    IF INSTR(I_PP_EFFECTIVE_DATE, 'PDT') > 0 THEN
        SELECT STR_TO_DATE(I_PP_EFFECTIVE_DATE, '%H:%i:%s %b %e, %Y PDT') INTO dteStart FROM DUAL;
    ELSE 
        SELECT STR_TO_DATE(I_PP_EFFECTIVE_DATE, '%H:%i:%s %b %e, %Y PST') INTO dteStart FROM DUAL;
    END IF;

    RETURN dteStart;
END$$

DELIMITER ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-26T16:18:44.447

正如[https://stackoverflow.com/users/670078/panagiotis](https://stackoverflow.com/users/670078/panagiotis)所指出的，如果您使用的是 PHP，最简单的答案是使用 strtotime 转换。

这是一个更完整的复制/粘贴 PHP 解决方案：

```
$subscr_date = date('Y-m-d H:i:s', strtotime($_POST['subscr_date']));
$subscr_effective = date('Y-m-d H:i:s', strtotime($_POST['subscr_effective'])); 
```

对某些人来说，使用函数可能会更好（虽然它是更多的代码，但我经常被指责做事情“简单”而不是“最佳实践”......;）

```
function changePaypalDateToMySQL($paypalDate){
    return date('Y-m-d H:i:s', strtotime($paypalDate));
}

$subscr_date = changePaypalDateToMySQL($_POST['subscr_date']);
$subscr_effective = changePaypalDateToMySQL($_POST['subscr_effective']); 
```

作为附加说明，PayPal 支持 webhook [https://developer.paypal.com/docs/integration/direct/webhooks/rest-webhooks/](https://developer.paypal.com/docs/integration/direct/webhooks/rest-webhooks/)，这通常比 IPN [https://www.paypal-engineering.com/ “更好” 2014/10/07/webhooks-for-rest-apis-launched/](https://www.paypal-engineering.com/2014/10/07/webhooks-for-rest-apis-launched/)并推荐使用。

# clojure - Clojure 创建目录层次结构 - 但不是以程序方式

> ID：14840205
> 
> 赞同：10
> 
> 时间：2013-02-12T19:25:48.733
> 
> 标签：clojure

假设我需要在 Clojure 中创建以下目录结构：

```
a
\--b
|   \--b1
|   \--b2
\--c
   \-c1 
```

而不是做如下程序性的事情：

```
(def a (File. "a"))
(.mkdir a)
(def b (File. a "b"))
(.mkdir b)
;; ... 
```

...有没有一种聪明的方法可以以某种方式将上述动作以声明方式表示为数据，然后一口气创建层次结构？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T20:08:26.653

一种快速简单的方法是制作一个 dirs 向量来创建 mkdir 并将其映射到它：

```
user> (map #(.mkdir (java.io.File. %)) ["a", "a/b" "a/b/c"])
(true true true) 
```

或者您可以将您的 dir 结构指定为一棵树，并使用 zippers 来遍历它，从而在途中制作 dirs：

```
(def dirs ["a" ["b" ["b1" "b2"]] ["c" ["c1"]]])
(defn make-dir-tree [original]
  (loop [loc (zip/vector-zip original)]
    (if (zip/end? loc)
      (zip/root loc)
      (recur (zip/next
              (do (if (not (vector? (zip/node loc)))
                    (let [path (apply str (interpose "/" (butlast (map first (zip/path loc)))))
                          name (zip/node loc)]
                      (if (empty? path)
                        (.mkdir (java.io.File. name))
                        (.mkdir (java.io.File. (str path "/" name))))))
                  loc))))))
(make-dir-tree dirs) 
```

.

```
arthur@a:~/hello$ find a
a
a/c
a/c/c1
a/b
a/b/c
a/b/b2
a/b/b1 
```

如果您正在做很多一般的系统管理，那么可能需要做一些更重的事情。[托盘项目](http://palletops.com/)是一个库，用于在物理和云托管系统上进行各种系统管理（尽管它往往倾向于多云的东西）。具体[目录](http://palletops.com/pallet/marginalia/uberdoc.html#pallet.action.directory)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-07T08:54:40.950

如果您想轻松处理创建递归目录，另一种选择是使用**.mkdirs**

```
user> (require '[clojure.java.io :as io]')
user> (.mkdirs (io/file "a/b/c/d")) 
```

您可以使用绝对路径，例如。/a/b/c/d 否则它将相对于您启动 repl 的路径创建。

检查给定路径是否不是现有目录也很方便

```
user> (.isDirectory (io/file "a/b/c/d")) 
```

# android - 如何从 onItemClickListener 获取局部变量值以在另一个活动中使用它？

> ID：14840207
> 
> 赞同：0
> 
> 时间：2013-02-12T19:25:53.580
> 
> 标签：android

我有一个从数据库填充的列表视图，在 onItemLongClick 上我有一个上下文菜单，我想用它来编辑和更新列表中的选定项目。问题是我不知道如何获取所选项目的值，以便在另一个具有带有编辑文本的表单的活动上使用它们。我希望在新活动开始时，这些字符串值位于适当的编辑文本上。这是 onItemLongClick 代码：

```
 **REMOVED AND ADDED CORRECT CODE BELOW** 
```

使用光标，我获取所选项目的值并将它们存储在字符串 nameOfSong 和 ArtistOfSong 中。当活动开始填充相应的编辑文本时，我该如何实现？

**==EDIT==** 我以这种方式使用了 SharedPreferences ：

第一个活动的 OnItemLongClick：

```
public boolean onItemLongClick(AdapterView<?> listview, View arg1,
                final int position, final long arg3) {
            //bind context menu to listview' s onIitemLongClick(touch and hold)
            // Get the cursor, positioned to the corresponding row in the result set
               Cursor cursor = (Cursor) listview.getItemAtPosition(position);

               // Get the state's capital from this row in the database.

               registerForContextMenu(listView);
                openContextMenu(listView);
                String nameOfSong = 
                cursor.getString(cursor.getColumnIndexOrThrow("songname"));
                String artistOfSong = 
                cursor.getString(cursor.getColumnIndexOrThrow("artist"));
                SharedPreferences.Editor editor = prefs.edit();
                editor.putString("key1", nameOfSong);
                editor.putString("key2", artistOfSong);
                editor.commit(); 
```

第二个活动代码：

```
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.update_item);

    etEditSong = (EditText) findViewById(R.id.etEditSong);
    etEditArtist = (EditText) findViewById(R.id.etEditArtist);
    sEditDance = (Spinner) findViewById(R.id.sUpdDanceList);
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
    etEditSong.setText(prefs.getString("key1", null));
    etEditArtist.setText(prefs.getString("key2", null));

} 
```

现在我得到了第二个活动的线索。现在需要找到如何从上面的 editTexts 值更新数据库行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:32:41.080

如果您从该长按开始下一个活动，您可以使用

```
Intent intent = new Intent(CurrentActivity.this, DestinationActivity.class);
intent.putExtra(KEY1, nameOfSong);
intent.putExtra(KEY2, artistOfSong);
startActivity(intent); 
```

然后，在接收活动中

```
String nameOfSong = getIntent().getStringExtra(KEY1);
String artistOfSong = getIntent().getStringExtra(KEY2); 
```

如果您从其他地方开始活动，您可以创建一个全局实例变量并将其设置在 onItemLongClick 中，然后在开始活动的任何地方执行相同的过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T21:15:14.503

如果您正在使用`SharedPreferences`，只需获取`onCreate()`正在使用它的活动的方法中的数据。

```
SharedPreferences myPrefs = getSharedPreferences("myPrefs", MODE_PRIVATE);
String song = myPrefs.getString("key1", null);
String artist = myPrefs.getString("key2", null); 
```

然后只需为要显示信息的文本视图设置文本

```
TextView song1 = (TextView) findViewById(R.id.song);
song1.setText(song); 
```

如果你愿意，你可以用 edittext 做到这一点，但如果你只是显示标题 idk 为什么你要让它可编辑

# c# - 使用 LINQPad 后 Visual Studio 中的 SQL Server 数据库出错

> ID：14840210
> 
> 赞同：0
> 
> 时间：2013-02-12T19:26:19.960
> 
> 标签：c#, sql-server, visual-studio-2010, linqpad

我有一个 SQL Server 数据库，用于 VS 2010 中的 MVC 4 项目。我正在使用 LINQPad 对我的数据库运行查询。当我打开 LINQPad 时，我可以连接到我的 .mdf 数据库文件并按预期运行查询。当我关闭 LINQPad，打开 VS 并尝试在服务器资源管理器中查看我的数据库时，会显示以下错误：

![在此处输入图像描述](../Images/4ba79c99ed754b80e1db578247ac20b9.png)

我可以删除数据库并`Seed()`通过包管理器中的 Update-Database 命令运行该方法作为该错误的解决方法，但是每次通过 LINQPad 连接到数据库时都必须这样做有点麻烦。

编辑（对于那些看不到图像的人）：

> 无法打开数据库“C:..... .MDF”，因为它是 706 版。此服务器支持 655 版及更早版本。不支持降级路径。无法打开新数据库“C:..... .MDF”。CREATE DATABASE 已中止。尝试为“C:..... .MDF”附加自动命名的数据库文件失败。存在同名数据库，或无法打开指定文件，或位于 UNC 共享上。

这是一个常见的错误吗？任何人有任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:41:35.410

根据错误消息，您正在使用 Visual Studio 2010 db 项目来访问 SQL Server 2012。

这是 MSDN 解决方法

[http://connect.microsoft.com/SQLServer/feedback/details/731860/unable-to-create-a-sql-server-2012-projects-in-visual-studio-2010](http://connect.microsoft.com/SQLServer/feedback/details/731860/unable-to-create-a-sql-server-2012-projects-in-visual-studio-2010)

* * *

似乎 linqPad 可能正在做一些“升级”？不同版本的 linqPad 也可能有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T09:49:40.010

在使用损坏的 Microsoft SQL Server 时，您会遇到 SQL Server 的意外行为。为了有效地解决 SQL Server 的此类问题，**RecoveryFIX for SQL** Database Recovery 就是这样一款精通的第三方工具。通过使用此工具，您可以轻松地从损坏的 Microsoft SQL 服务器的所有版本中恢复丢失、损坏或无法访问的 SQL 数据库文件。

谢谢

# asp.net-mvc - ASP.NET Razor C# Html.ActionLink 创建空链接

> ID：14840212
> 
> 赞同：11
> 
> 时间：2013-02-12T19:26:23.083
> 
> 标签：asp.net-mvc

您将如何使用 an`Html.ActionLink`来呈现以下链接 -

```
<a href="javascript:void(0);"></a> 
```

这样做可能看起来很愚蠢，但有时我需要一个具有链接功能（翻转指针等）但不会去任何地方的链接。我想使用 Html.ActionLink 来实现代码一致性。

我尝试了不同的变体，`Html.ActionLink`但我不断收到关于不允许为空的事情的消息。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-12T20:01:10.757

```
@Html.ActionLink(" ", "", "", new {href="javascript:void(0)"}) 
```

将呈现为

```
<a href="javascript:void(0)"> </a> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-12T20:25:03.460

与其强迫 ActionLink 做一些不适合做的事情，不如考虑创建自己的辅助方法：

```
public static class MyHtmlExtensions
{
    public static MvcHtmlString EmptyLink(this HtmlHelper helper, string linkText)
    {
        var tag = new TagBuilder("a");
        tag.MergeAttribute("href", "javascript:void(0);");
        tag.SetInnerText(linkText);
        return MvcHtmlString.Create(tag.ToString());
    }
} 
```

将命名空间导入到您的视图中，您将能够执行此操作：

```
@Html.EmptyLink("My link text") 
```

# java - java中的日期格式更改

> ID：14840213
> 
> 赞同：-5
> 
> 时间：2013-02-12T19:26:23.583
> 
> 标签：java, date

嗨，我已经看到有很多关于这个的问题，但我没有看到任何询问如果我得到一个像“01-Nov-2012”这样的字符串会发生什么，我需要将它转换为“mm/ dd/yyyy" 我该怎么做？我得到的字符串有问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T19:28:40.940

您可以使用两种[SimpleDateFormats](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html) - 一种用于解析输入，一种用于生成输出：

```
String input =  "01-Nov-2012";
Date d = new SimpleDateFormat("dd-MMM-yyyy", Locale.US).parse(input);
String output = new SimpleDateFormat("MM/dd/yyyy").format(d);
System.out.println("output = " + output); //prints 11/01/2012 
```

注意：当日期包含单词（“Nov”）时，最好指定语言环境，以确保使用正确的语言。

# android - 如何将JPEG / PNG编码为Base64而不解码为位图，使用更少的内存

> ID：14840214
> 
> 赞同：1
> 
> 时间：2013-02-12T19:26:28.213
> 
> 标签：android, memory-management, bitmap, base64

将JPEG转换为base64有很好的资源。

我特别感兴趣的是在**不解码为 bimap 的情况下这样做，避免任何内存膨胀。**我也知道任何文件都可以通过首先将其转换为字节数组来编码为 Base64。

因此，如果我们可以直接创建一个远远小于解码的 jpeg 位图的字节数组的 JPEG / PNG 文件的字节数组，我们可以使用更少的内存占用将其转换为 base64。

我遇到的最接近的答案是这个[https://stackoverflow.com/a/10160856/499752](https://stackoverflow.com/a/10160856/499752)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T04:33:04.063

```
public void getGalleryDetails(String path) throws FileNotFoundException {

    InputStream inputStream = new FileInputStream(path);
    byte[] bytes;
    byte[] buffer = new byte[8192];
    int bytesRead;
    ByteArrayOutputStream output = new ByteArrayOutputStream();
    try{
        while((bytesRead = inputStream.read(buffer)) != -1){
            output.write(buffer, 0, bytesRead);
        }
    }catch(IOException e){
        e.printStackTrace();
    }

    bytes = output.toByteArray();

    encodedImage = Base64.encodeToString(bytes, Base64.DEFAULT);
    Log.i("ENCODED", encodedImage);
} 
```

您实际上可以使用它...您可以在其中提供要转换为 Base64 的文件的路径。对不起，迟到的帖子......只是说这个帖子。

# meteor - 使用 Meteorite 添加 Foundation 包时出错

> ID：14840220
> 
> 赞同：1
> 
> 时间：2013-02-12T19:26:45.663
> 
> 标签：meteor, zurb-foundation

我正在尝试将 ZURB Foundation 包 ( [https://github.com/IslamMagdy/meteor-foundation](https://github.com/IslamMagdy/meteor-foundation) ) 添加到使用陨石的项目中，但我收到错误消息。

文档告诉我`mrt add foundation`在终端中运行，但是当我这样做时，我收到以下错误消息：

```
/usr/local/lib/node_modules/meteorite/lib/dependencies/package.js:50
  throw 'No package named ' + self.name + ' was found in the atmosphere da
                                        ^
No package named foundation was found in the atmosphere database 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T19:41:45.017

看起来气氛可能有问题，您可以手动添加包。

在您的应用程序根目录中修改您的`smart.json`文件，使其看起来像（我添加了基础包）。

```
{
    "packages": {
        "foundation" :{
            "git": "https://github.com/IslamMagdy/meteor-foundation.git"
        }
    }
} 
```

然后运行`mrt`，它应该直接从 git 添加包，并保持最新。

编辑：我尝试了上面的包，但它有点小故障。但这确实对我有用：

```
mrt add foundation-custom 
```

在执行此操作之前，不要忘记从 smart.json 中删除基础包。

# sql - 交点

> ID：14840222
> 
> 赞同：1
> 
> 时间：2013-02-12T19:26:55.750
> 
> 标签：sql, postgis, spatial

我正在为我的空间数据库使用 postgis。

在我的数据库中，我在一个表中有一组线，在另一个表中有一组点。如何确定哪个最适合作为两条线的交点？我所追求的是与 st_intersection 函数有关的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:12:19.697

PostGIS`ST_INTERSECTION`将为您提供两条线之间交点的几何形状，然后`MIN(ST_DISTANCE([...], [...])`在此交点和您的点之间的 a 将为您提供最佳拟合。

> *   [http://www.postgis.org/docs/ST_Intersection.html](http://www.postgis.org/docs/ST_Intersection.html)
> *   [http://www.postgis.org/docs/ST_Distance.html](http://www.postgis.org/docs/ST_Distance.html)

# amazon-web-services - 为 Spot 实例 AWS EC2 设置预留实例

> ID：14840223
> 
> 赞同：-1
> 
> 时间：2013-02-12T19:26:57.000
> 
> 标签：amazon-web-services, amazon-ec2

我的问题是担心现货市场上越来越不稳定的价格上涨。我已经看到事情从柔和和安全的感觉到疯狂的价格上涨出现。我知道这是一种发现的可能性，但从未达到它的程度。

所以我的问题是我无法在 AWS 文档或网络上找到答案。但是，如果我要在与我的现货实例相同的区域购买一个备用实例，如果价格上涨到高于我的出价，我的服务器就会被推到备用实例上，还是我会放弃服务器以终止？

我喜欢现货的当前价格，但如果出现价格飙升，我不介意支付保留小时价格，因为它总是几乎低于峰值金额。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:34:48.953

在不终止并启动新服务器的情况下，您无法将服务器从现货定价更改为保留定价。

现货定价从来都不是为运行网络服务器而设计的，人们为此目的使用它的事实很大程度上是为什么价格现在以他们的方式飙升的原因。最初现货是为处理队列或作业而引入的，当现货价格跌至可接受的水平时，这些队列或作业可能会被终止并重新启动。

# javascript - javascript 在同一页面中不能与 jquery 一起使用

> ID：14840225
> 
> 赞同：-3
> 
> 时间：2013-02-12T19:27:13.503
> 
> 标签：javascript, jquery

我的代码有问题，它是 jquery 和纯 javascript 的混合体。我使用 jquery 来显示和隐藏一些`div`s 和 js`div`通过在`div`. 普通的 js 代码不能按原样工作，但如果我删除 jquery 代码，它就可以正常工作。

我的代码：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Ton plans</title>
<link href="template/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
var auto_refresh = setInterval(
function ()
{
    $('#refresh').fadeOut().load('last_post.php').fadeIn();
}, 10000); 
</script>
<script type="text/javascript" src="js/jquery-1.9.0.min.js"></script>

<script type="text/javascript">

  //no conflict jquery
  jQuery.noConflict();
  //jquery stuff
  (function($) {
      $(document).ready(function()
      {  

         $("#bott_div").click(function() {
         $("#div_profile").show(['fast'])

         })

         $("#page").click(function() {
         $("#div_profile").hide(['fast'])

         })

      })  
 })    
          (jQuery);

</script>

</head> 
```

jQuery 代码和普通的 javaScript 之间存在冲突，导致它无法正常工作。我需要帮助确定问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T19:29:37.613

改变前两个脚本的顺序——像这样

```
<script type="text/javascript" src="js/jquery-1.9.0.min.js"></script>
<script type="text/javascript">
var auto_refresh = setInterval(
function ()
{
    $('#refresh').fadeOut().load('last_post.php').fadeIn();
}, 10000); 
</script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T19:31:07.377

jQuery代码中你的函数前面有一个“（”。将代码封装在一个

```
 $(document).ready(function() {
        $("sampleSelect").click(function() {
        //code
        }
     }); 
```

# javascript - JavaScript/jQuery 是否总是具有该元素的最新元素或版本？

> ID：14840226
> 
> 赞同：3
> 
> 时间：2013-02-12T19:27:15.023
> 
> 标签：javascript, jquery

我正在编写一个用户脚本，它可以通过以下方式获取元素：

```
var theElement = $('div.someClass:last'); 
```

抓取类中的最后一个元素，`.someClass`以便我可以解析它。

这就是我的问题所在。此页面上有另一个脚本`<div class="someClass">`每隔一段时间动态添加一个新脚本。我希望页面上的最后一个元素始终具有`.someClass`选定的类。

Javascript/jQuery 是否总是有最新的元素，还是我必须手动“刷新”它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T19:29:07.423

评估您的选择器并返回结果。如果你想做你所要求的，你将不得不重新评估那个选择器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T19:38:49.770

Sushanth 的回答是正确的，但根据[这篇文章](http://darcyclarke.me/development/live-vs-static-node-lists/)，您可以使用

```
var theElements = document.getElementsByClassName('someClass'); 
```

然后可靠地使用

```
var theElement = $(theElements[theElements.length - 1]); // wrapping in $() is optional 
```

这是值得做的，因为 $(selector) 是一项相当昂贵的操作。

*编辑*- 仅适用于 ie9 及更高版本虽然[http://caniuse.com/getelementsbyclassname](http://caniuse.com/getelementsbyclassname)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-12T19:29:50.060

**不..它不会自动刷新。**

每次直接在选择器上修改某些内容时，最好再次缓存它。

您希望的选择器不是[**实时节点列表。**](http://darcyclarke.me/development/live-vs-static-node-lists/)

在这种情况下，如果选择器中似乎有任何更改，我宁愿在第一种情况下根本不缓存。

这样我就可以直接使用**选择器而不是缓存的选择器。**

# php - 允许字母、数字和某些字符

> ID：14840227
> 
> 赞同：1
> 
> 时间：2013-02-12T19:27:16.840
> 
> 标签：php

在表单中，用户可以输入一些文本。在验证 php 中，我想检查此文本是否仅包含字母、数字和允许的特殊字符：`.,:;'"/*$@#<>&+-`

```
$pattern = '/^i';
$chars = ".,:;'\"/*$@#<>&+-";
$newString = htmlspecialchars($chars);
if (!preg_match($pattern, $chars, $text))   $error = $error . "You can use only letters, digits and [.,:;'\"/*$@#<>&+-]".'<br>'; 
```

变量与`$error`表单一起发送回页面并显示在那里。

我使用了错误的模式吗？无论我在输入框中输入什么，我都会收到错误消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T19:32:08.330

这是您的英文代码：

*   将 $pattern 设置为 '/^i'
*   将 $chars 设置为允许的字符列表
*   将 $newString 设置为 $chars 的 HTML 编码版本
*   将 '/^i' 与您的字符列表匹配并将匹配项存储在 $text 变量中
*   如果匹配失败，则显示错误消息

好吧，你的问题是什么应该很明显。不是一个有效的正则表达式，如果是的话，它会在文本的开头`/^i`寻找一个文字，就是这样。`i`

这就是我认为你的意思：

```
$chars = ".:;'\"/*$@#<>&+-";
if( preg_match("([^a-zA-Z0-9".preg_quote($chars)."])",$text)) $error .= "You can only...."; 
```

# ruby-on-rails - 获取 Active Record 对象所在的模型

> ID：14840230
> 
> 赞同：1
> 
> 时间：2013-02-12T19:27:27.340
> 
> 标签：ruby-on-rails, ruby, rails-activerecord

我正在做一个 ActiveRecord 查询，它将我的每个模型的内容连接到一个名为`@contents`. 但是我需要为来自特定模型的数据显示不同的内容。

所以在我看来，我需要对数组的元素进行某种测试：

```
<% @contents.each do |c| %>
  <article>
    <% if [TEST FOR EVENT] %>
      EVENT HTML
    <% elsif [TEST FOR POST] %>
      POST HTML
    <% end %>
  </article>
<% end %> 
```

我如何获得`c`来自的模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:31:58.437

这可以解决问题：

```
c.kind_of?(Event) #=> true or false 
```

# 更深入：[Ruby：kind_of？与 instance_of 相比？与 is_a 相比？](https://stackoverflow.com/questions/3893278/ruby-kind-of-vs-instance-of-vs-is-a)

我的比较的简短版本：

```
3.class #=> Fixnum
3.is_a? Integer #=> true
3.kind_of? Integer #=> true
3.instance_of? Integer #=> false
# is_a? & kind_of? can 'detect' subclasses, when instance_of? does not 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T19:32:36.180

您可以使用该`is_a?`方法。

`<% if c.is_a?(Event) %>`或者`<% if c.is_a?(Post) %>`

只需传递类名。

# wix - 错误 LGHT0301：无法打开数据库

> ID：14840233
> 
> 赞同：15
> 
> 时间：2013-02-12T19:27:41.080
> 
> 标签：wix, wix3.5

我正在使用 WiX 3.5。最近，在构建服务器上开始频繁出现以下 WiX 错误：

> light.exe (,): 错误 LGHT0301: 无法打开数据库。在验证期间，当尝试使用不受支持的代码页或不是有效的 Windows Installer 数据库的文件打开数据库时，最常发生这种情况。请在 Module/@Codepage、Package/@SummaryCodepage、Product/@Codepage 或 WixLocalization/@Codepage 中使用不同的代码页；或确保提供有效 Windows Installer 数据库的路径。

**错误指的是哪个“数据库”？**（WiX 源文件很长一段时间都没有更改，所以我怀疑这是代码页问题。）

[其他人](https://stackoverflow.com/questions/14460150/wix-error-lght0301)报告此错误可能是由 Trend Micro Office Scan 引起的，它确实安装在构建服务器上。我要求系统管理员从扫描中排除构建目录，但仍然出现此错误。**如何确定病毒扫描程序是否是罪魁祸首？**（错误并不总是发生，所以如果我禁用病毒扫描程序并且下一次构建成功，我仍然不知道错误是否已经永久消失。）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-10-07T14:22:21.550

“禁用 ICE 验证”对我有用 - 只是在 .Setup 中通过 Visual Studio 2012 进行的设置。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-12T23:58:28.670

在研究了 WiX 源代码并运行[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)后，我发现从病毒扫描中排除构建目录是不够的。

**说明：**当 light.exe 运行时，它会在临时目录中创建目标 MSI 文件。（此文件是 LGHT0301 错误消息所指的数据库。） light.exe 关闭 MSI 文件后，ntrtscan.exe 打开 MSI 文件进行读取访问和只读共享。稍后，在数据库验证步骤中，light.exe 尝试重新打开 MSI 文件以进行读/写访问，并发生共享冲突。

**解决方法：**将临时目录排除在实时病毒扫描之外。例如，在 Windows Server 2008 上，此目录是`C:\Users\«username»\AppData\Local\Temp`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-12T20:16:02.713

这是构建过程和防病毒软件的常见问题。扫描仪将检测到新的 MSI 包并尝试对其进行扫描。同时，构建过程还尝试通过运行 [内部一致性评估](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369554%28v=vs.85%29.aspx)器(ICE) 套件来验证它，但由于数据库上有互斥体，因此您会失败。

您应该从构建输出文件夹中删除病毒扫描。或者，将验证与[Light](http://en.wikipedia.org/wiki/WiX#Light)命令分离，以便防病毒扫描在您运行 ICE 验证之前放弃 MSI 句柄。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-28T13:52:36.627

我遇到了同样的问题，这实际上与我系统的代码页和语言设置有关。

在 Windows 的区域设置中添加英语输入语言解决了我的德语 Windows 安装问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-29T05:03:34.960

真正的原因是[趋势科技实时扫描](http://en.wikipedia.org/wiki/Trend_Micro_Internet_Security)！

（以下仅供历史参考）

**我跟着@Michael Liu回答并解决了问题**

* * *

我有同样的问题。

我不是指任何这些标签中的代码页（或摘要代码页），实际上也不是 WXS 中的任何地方。放置 Codepage="1252" 并没有改变任何东西。

最后，我尝试添加

```
encoding="utf-8" 
```

到以前只有 version='1.0' 属性的 XML 标记。这解决了问题，如*[“无法打开数据库”错误中所述。- 解决了](http://windows-installer-xml-wix-toolset.687559.n2.nabble.com/quot-Failed-to-open-the-database-quot-error-SOLVED-td7582297.html)*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-27T17:13:46.633

它也是我的防病毒程序。

检查问题是否与防病毒程序有关的一种简单方法是在 WiX 项目设置中禁用 ICE 验证（使用版本 3.7）。这对我有用，现在是永久设置，因为在我们公司，您无法更改防病毒软件的设置。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-12-05T14:19:24.410

这是我在使用 WiX 时发现的最常见错误。最简单的解决方案是转到项目的属性→*工具设置*→（检查）*抑制ICE验证*。

# ocaml - ocaml 电池安装

> ID：14840236
> 
> 赞同：1
> 
> 时间：2013-02-12T19:28:12.223
> 
> 标签：ocaml, ocaml-batteries

关于电池安装的信息似乎相互矛盾。我尝试了几个建议，但没有一个对我有用。

我第一次尝试

```
ocamlfind batteries/ocaml 
```

但这给出了这个错误：

```
ocamlfind: Cannot find command: /username/godi/lib/ocaml/pkg-lib/batteries/ocaml 
```

然后我尝试将电池目录中的 ocamlinit 文件复制到我的主目录中的 .ocamlinit 中。这给出了这个错误：

```
Cannot find file topfind.
File ".ocamlinit", line 38, characters 0-20:
Error: Unbound module Toploop 
```

我正在使用 ocaml 4.00.1。

注意：如果这个问题对于这个[ocaml 电池编译是多余的，我深表歉意：Unbound module Toploop](https://stackoverflow.com/questions/13506800/ocaml-batteries-compiling-unbound-module-toploop)但给出的答案不够明确，我无法实际尝试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T08:19:37.737

就像@rgrinberg 说的，尝试用 opam 安装电池。为此，首先下载快速安装程序：

```
$ wget http://www.ocamlpro.com/pub/opam_installer.sh 
```

然后执行这个脚本：

```
$ sh ./opam_installer.sh /usr/local/bin 
```

它将安装最新的“稳定” opam（您当然可以更改路径`/usr/local/bin`）和最新版本的 OCaml 编译器。

之后，您只需要运行：

```
$ opam install batteries 
```

应该没问题。

您还可以检查[ocaml.org](http://ocaml.org/install.html)安装部分（通过包管理器）或[opam 网站](http://opam.ocamlpro.com/)。

# python - scipy.sparse_matrix 中元素的批量归零

> ID：14840243
> 
> 赞同：4
> 
> 时间：2013-02-12T19:28:32.630
> 
> 标签：python, scipy, sparse-matrix

我有一个 scipy.sparse_matrix A ，我想将元素中相当大的一部分归零。（在我今天使用的矩阵中，A 有大约 70M 条目，我想将其中的大约 700K 归零）。我有这些元素以几种不同的格式提供，但现在它们位于与 A 相同维度且值为 0/1 的 sparse_matrix B 中。

如果这些是密集矩阵（编辑：numpy 数组），我可以做 A = AA*B 但我无法想出任何简单的方法来用稀疏矩阵来做这些。（或者除了（a）遍历 B 中的元素并将这些元素处的 A 设置为 0 或（b）将所有内容转换为密集之外的任何方式，对于我所拥有的大小来说，这将几乎不适合内存......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T20:54:45.210

Scipy 的稀疏矩阵有一种`multiply`方法可以进行逐点乘法。你可以简单地做：

```
A = A - A.multiply(B) 
```

我认为您可能必须运行该`eliminate_zeros()`方法来摆脱归零的条目，但显然这不是必需的：

```
>>> sp_mat
<1000000x1000000 sparse matrix of type '<type 'numpy.float64'>'
    with 1000 stored elements in Compressed Sparse Row format>
>>> zero_mat
<1000000x1000000 sparse matrix of type '<type 'numpy.int32'>'
    with 96 stored elements in Compressed Sparse Row format>
>>> sp_mat - sp_mat.multiply(zero_mat)
<1000000x1000000 sparse matrix of type '<type 'numpy.float64'>'
    with 904 stored elements in Compressed Sparse Row format> 
```

# java - 在 android 上可跨 textView

> ID：14840247
> 
> 赞同：40
> 
> 时间：2013-02-12T19:28:38.247
> 
> 标签：java, android, twitter, spannable

```
Tweet o = tweets.get(position);

TextView tt = (TextView) v.findViewById(R.id.toptext);
//TextView bt = (TextView) v.findViewById(R.id.bottomtext);         

EditText bt =(EditText)findViewById(R.id.bottomtext);
bt.setText(o.author);
Spannable spn = (Spannable) bt.getText();
spn.setSpan(new StyleSpan(android.graphics.Typeface.BOLD_ITALIC)
, 0, 100, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);  

//bt.setText(o.author);    
tt.setText(o.content); 
```

我在我的 Android 应用程序中设置 twitter 数据。我想使用 Spannable 将字体设置为粗体和斜体，但它不起作用，出现错误。我该怎么做？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-02-12T19:40:32.250

> 我想用 spannable 使字体粗体和斜体

为此，您需要制作`o.content`文本，`SpannableString`然后将其设置为 TextView：

```
SpannableString spannablecontent=new SpannableString(o.content.toString());
spannablecontent.setSpan(new StyleSpan(android.graphics.Typeface.BOLD_ITALIC), 
                         0,spannablecontent.length(), 0);
// set Text here
tt.setText(spannablecontent); 
```

**编辑：** 您还可以使用 Html.fromHtml 在 textview 中制作粗体和斜体文本：

```
tt.setText(Html.fromHtml("<strong><em>"+o.content+"</em></strong>")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-21T23:27:06.043

创建`spannable`文本`bold`并`italic`设置为您的简单方法`TextView`是使用以下方法`Html.fromHtml()`：

并使用 html 元素`<b>`和`<i>`

```
myTextView.setText(Html.fromHtml("<b><i>my text bold and italic!</i></b>")); 
```

或 html 元素`<strong>`和`<em>`

```
 myTextView.setText(Html.fromHtml("<strong><em>my text bold and italic!</em></strong>")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-12T15:49:59.843

```
SpannableString hint = new SpannableString(o.content.toString()); 
```

字体大小

```
hint.setSpan(new RelativeSizeSpan(0.9f), 0, hint.length(), Spanned.SPAN_INCLUSIVE_INCLUSIVE); 
```

字体系列

```
hint.setSpan(new TypefaceSpan("sans-serif"), 0, hint.length(), Spanned.SPAN_INCLUSIVE_INCLUSIVE); 
```

斜体

```
hint.setSpan(new StyleSpan(Typeface.ITALIC), 0, s.length(), 0); 
```

颜色

```
hint.setSpan(new ForegroundColorSpan(Color.GRAY), 0, hint.length(), 0); 
```

胆大

```
hint.setSpan(new StyleSpan(Typeface.BOLD), 0, hint.length(), 0); 
```

参考链接： [https ://www.programcreek.com/java-api-examples/index.php?api=android.text.style.RelativeSizeSpan](https://www.programcreek.com/java-api-examples/index.php?api=android.text.style.RelativeSizeSpan)

# ios - cmdevicemotion 停止提供更新

> ID：14840256
> 
> 赞同：1
> 
> 时间：2013-02-12T19:29:01.157
> 
> 标签：ios, core-motion, cmmotionmanager

我的代码中有一些奇怪的问题，我无法弄清楚，需要一些帮助。我在我的 AppDelegate 中定义了一个 CMMotionManager。在我的视图控制器中，我定义了一个属性：

```
 @property (nonatomic, retain) CMMotionManager *motionManager; 
```

然后使用此代码开始更新：

```
 - (void)startMyMotionDetect
    {
motionManager = [(AppDelegate *)[[UIApplication sharedApplication] delegate] sharedManager];

motionManager.deviceMotionUpdateInterval = 1.0/60.0;

[motionManager startDeviceMotionUpdates];
timer = [NSTimer scheduledTimerWithTimeInterval:20/60 target:self selector:@selector(handleDeviceMotion) userInfo:nil repeats:YES];

} 
```

但是，handleDeviceMotion 只被调用了几次，然后它停止更新 deviceMotion 输出。我已将代码更改为推送样式（块代码），但在这种情况下，块不会被执行！块中的测试 NSLog 注释永远不会被执行。该代码如下所示：

```
motionManager = [(AppDelegate *)[[UIApplication sharedApplication] delegate] sharedManager];

motionManager.deviceMotionUpdateInterval = 1.0/60.0;

[motionManager startDeviceMotionUpdatesToQueue:[NSOperationQueue mainQueue] withHandler:^(CMDeviceMotion *dMotion, NSError *error)
 {
     NSLog(@"test 1");

    [self performSelectorOnMainThread:@selector(handleDeviceMotion) withObject:nil waitUntilDone:YES];

 }]; 
```

下面是 handleDeviceMotion 代码的样子：

```
- (void)handleDeviceMotion//:(CMDeviceMotion *)dMotion
{

if ([motionManager isDeviceMotionActive])
{
    NSLog(@"test");
}

....} 
```

使用第一种方法，我看到“测试”打印了几次，然后就停止了。

我认为通过将 motionManager 保留为属性，我不必担心它会被释放，但它似乎正在某个地方被释放（或者你认为还有其他事情发生吗？）。

非常感谢您的帮助。

# python - 使用python从数据库验证wordpress用户登录

> ID：14840257
> 
> 赞同：2
> 
> 时间：2013-02-12T19:29:03.820
> 
> 标签：python, wordpress, hash

我正在龙卷风中建立一个基于 websocket 的聊天室，主站点运行 wordpress。我想允许 wordpress 用户使用相同的用户名和密码登录聊天。因此，我想使用 python 查询 wordpress 数据库并验证提供的用户名和密码。

我想知道的是wordpress用什么来散列密码？

（我知道我想避免的 XMLRPC API）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-13T07:19:03.253

Wordpress 使用 php crypt 函数，可以在 Python 中使用[passlib](http://pythonhosted.org/passlib/index.html)进行解密。这是代码：

```
from passlib.hash import phpass
phpass.verify("password", "wordpress hash") 
```

我在 Wordpress 2.8 和 PHP 5.3.6 上使用过它，而且效果很好。

# jsf - IE9渲染IE8文档标准

> ID：14840259
> 
> 赞同：3
> 
> 时间：2013-02-12T19:29:07.463
> 
> 标签：jsf, xhtml, primefaces, glassfish, internet-explorer-9

我需要我的应用程序以 IE9 文档标准运行，但我无法弄清楚为什么它会自动以 IE8 文档标准呈现。

我正在使用在 Glassfish 3.1.2 中运行的 JSF 2.1.17 和 Primefaces 3.4。我的 IDE 是 Netbeans-7.1.2。当我在 IE 中打开开发人员工具时，在“HTML”选项卡下显示：

```
<--!DOCTYPE html-->
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
```

但是，在“脚本”选项卡下，它显示：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML lang=en xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<HEAD>
<META content="IE=8.0000" http-equiv="X-UA-Compatible"> 
```

**我浏览了我所有的页面和模板，但在哪里找不到 meta content="IE=8.0000" 或上面显示的 !DOCTYPE**。这很奇怪。

我所有的页面都有：

```
<!DOCTYPE html> 
```

我的主要模板有这个：

```
<!DOCTYPE html> 

<html   xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" 
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"> 
```

其他页面有：

```
<!DOCTYPE html>

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                template="/layout/someFile.xhtml" > 
```

以下是我尝试过的事情：

1) 将 Glassfish JSF 更新到 2.1.17，因为我读到旧版本的 Mojarra 存在一个错误，导致它忽略 DOCTYPE。

2）我补充说：

```
<meta http-equiv="X-UA-Compatible" content="IE=9" > 
```

到每个页面，希望它会强制执行 IE9，但这不起作用。

3）然后我尝试使用 content="IE=Edge"，仍然没有变化。

4）我将我的 DOCTYPE 更改为：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

不确定 XHTML 是否需要这种严格的 DOCTYPE 才能正确呈现。但这没有用。

任何帮助都会很棒。我做了很多研究试图解决这个问题，但是我是网络开发的新手，所以我的理解非常有限。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T02:16:53.833

> *我补充说：*
> 
> ```
> <meta http-equiv="X-UA-Compatible" content="IE=9" > 
> ```
> 
> *到每个页面，希望它会强制执行 IE9，但这不起作用。*

根据有关此元标记的[MSDN 文档，](http://msdn.microsoft.com/en-us/library/jj676915%28v=vs.85%29.aspx)

> X-UA-Compatible 标头不区分大小写；但是，它必须出现在网页的标题（HEAD 部分）中，位于除标题元素和其他元元素之外的所有其他元素之前。

this 必须出现**在**所有其他元素 expect for`<title>`和其他`<meta>`元素之前。如果您仔细研究 JSF/PrimeFaces 生成的 HTML，您会发现在此`<link>`之前有一个 PrimeFaces 特定元素会阻止`X-UA-Compatible`标头执行其工作。

PrimeFaces[支持](http://blog.primefaces.org/?p=1433)多个方面，`<h:head>`以便您可以控制头部资源的排序。以下应该为您做：

```
<f:facet name="first">
    <meta http-equiv="X-UA-Compatible" content="IE=9" /> 
</f:facet> 
```

同样，这是特定于 PrimeFaces，而不是标准 JSF。

# android - android为什么这个按钮不可点击

> ID：14840265
> 
> 赞同：5
> 
> 时间：2013-02-12T19:29:24.750
> 
> 标签：android, android-layout, android-xml, android-button

我不知道为什么最后两个按钮不可点击，我多次使用背景（我为它们设置的）并且它适用于其他布局，我确信错误是类似 foucable 或 clickable 但我不'不知道具体在哪里。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FFFFFF"
    android:fillViewport="true" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="#FFFFFF"
            android:orientation="vertical" >

            <RelativeLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="20dip"
                android:layout_marginLeft="10dip"
                android:layout_marginRight="10dip"
                android:layout_marginTop="20dip"
                android:layout_weight="1" >

                <Button
                    android:id="@+id/b_orderMeal_selectRestaurant"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_marginRight="30dip"
                    android:text="@string/b_selectRestaurant" />

                <ImageView
                    android:id="@+id/iv_orderMeal_isSelectRestaurant"
                    android:layout_width="25dp"
                    android:layout_height="25dp"
                    android:layout_alignParentRight="true"
                    android:contentDescription="@string/iv_isSelected"
                    android:src="@drawable/x" />
            </RelativeLayout>

            <RelativeLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="20dip"
                android:layout_marginLeft="10dip"
                android:layout_marginRight="10dip"
                android:layout_marginTop="20dip"
                android:layout_weight="1" >

                <Button
                    android:id="@+id/b_orderMeal_selectMealItems"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_marginRight="30dip"
                    android:text="@string/b_select_MealItems" />

                <ImageView
                    android:id="@+id/iv_orderMeal_isSelectMealItems"
                    android:layout_width="25dp"
                    android:layout_height="25dp"
                    android:layout_alignParentRight="true"
                    android:contentDescription="@string/iv_isSelected"
                    android:src="@drawable/x" />
            </RelativeLayout>

            <RelativeLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="20dip"
                android:layout_marginLeft="10dip"
                android:layout_marginRight="10dip"
                android:layout_marginTop="20dip"
                android:layout_weight="1" >

                <Button
                    android:id="@+id/b_orderMeal_selectPayMethod"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_marginRight="30dip"
                    android:text="@string/b_selectPayMethod" />

                <ImageView
                    android:id="@+id/iv_orderMeal_isSelectPayMethod"
                    android:layout_width="25dp"
                    android:layout_height="25dp"
                    android:layout_alignParentRight="true"
                    android:contentDescription="@string/iv_isSelected"
                    android:src="@drawable/x" />
            </RelativeLayout>

            <Button
                android:id="@+id/b_orderMeal_checkBasket"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dip"
                android:layout_marginRight="40dip"
                android:layout_marginTop="20dip"
                android:layout_weight="1"
                android:text="@string/b_check_basket" />

            <TextView
                android:id="@+id/tv_orderMeal_errorMessage"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dip"
                android:layout_marginRight="20dip"
                android:layout_marginTop="30dip"
                android:layout_weight="1"
                android:text="@string/tv_orderMeal_errorMessage"
                android:textColor="#FF0000"
                android:textSize="20dip"
                android:textStyle="bold"
                android:typeface="sans" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:background="@drawable/bg_selector"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/b_orderMeal_send"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="4dip"
                android:layout_weight="1"
                android:background="@drawable/button_bg"
                android:text="@string/b_send"
                android:focusable="true"
                android:clickable="true"
                android:textColor="#FFFFFF" />

            <Button
                android:id="@+id/b_orderMeal_cancel"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="4dip"
                android:layout_weight="1"
                android:background="@drawable/button_bg"
                android:text="@string/b_cancel"
                android:clickable="true"
                android:textColor="#FFFFFF" />
        </LinearLayout>
    </RelativeLayout>

</ScrollView> 
```

我说的是最后两个按钮

### 爪哇

```
b_send = (Button) findViewById(R.id.b_orderMeal_send);
        b_send.setOnClickListener(this);
        b_cancel = (Button) findViewById(R.id.b_orderMeal_cancel);
        b_cancel.setOnClickListener(this); 
```

### 点击

```
@Override
    public void onClick(View v) {
      case R.id.b_orderMeal_cancel:
        Toast.makeText(this, "roma", Toast.LENGTH_LONG);
        break;          
    } 
```

### 笔记

吐司没有出现

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T19:33:33.663

> 我不知道为什么最后两个按钮不可点击，我多次使用背景（我为它们设置的）并且它适用于其他布局，我确信错误是类似 foucable 或 clickable 但我不'不知道具体在哪里。

我认为你的`XML`设计在各个方面都很好，所以问题很可能出现在`Java`. 您很可能忘记注册`OnClickListener`您的`Button(s)`.

```
Button btn = (Button) findViewById(R.id.b_orderMeal_send);
btn.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
       Toast.makeText(this, "Click event works.", Toast.LENGTH_SHORT).show();
     }
 })); 
```

或者你可以使用`OnClickListener`界面然后

```
public void onClick(View v) {
   switch (v.getId()) {
      case R.id.b_orderMeal_send:
         Toast.makeText(this, "Click event works.", Toast.LENGTH_SHORT).show();
      break;
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-10T12:31:36.920

有时**模拟器**会出现问题，所以我想建议你们使用真正的 Android 设备来检查/运行您的应用程序

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T19:40:38.153

用下面的方法替换你的`onClick()`方法，让我们知道 logcat。 **看来您正在尝试显示`toast`但缺少`.show()`显示吐司的方法。** 试试下面的代码，让我们知道

```
 @Override
 public void onClick(View v) {
 if(v.equals(b_send)){
     Toast.makeText(this,"b_send clicked", Toast.LENGTH_LONG).show();
     Log.d("TEMP TAG","b_send clicked");
 } else if(v.equals(b_cancel)){ 
    Toast.makeText(this,"b_cancel clicked", Toast.LENGTH_LONG).show();
      Log.d("TEMP TAG","b_cancel clicked");
      }

  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-01T10:27:01.683

在您的按钮的 xml 中设置 clickable = true 并在您的代码中尝试此操作。

```
findViewById(R.id.b_orderMeal_send).setOnClickListener(commonClickListener);
findViewById(R.id.b_orderMeal_cancel).setOnClickListener(commonClickListener);

private OnClickListener commonClickListener = new OnClickListener() {
@Override
public void onClick(View v) {
    int selectedItemId = v.getId();
    switch (selectedItemId) {
    case R.id.b_orderMeal_send:
        Toast.makeText(this, "roma", Toast.LENGTH_LONG).show();
        break;
    case R.id.b_orderMeal_cancel:
    Toast.makeText(this, "roma", Toast.LENGTH_LONG).show();
        break;

    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-09T04:35:29.670

同样的事情不断发生在我身上，但我的情况有点不同。首先，按钮工作正常，并且都可以点击，然后在几次重新启动后突然完全停止工作。

我只是然后重新启动它`Quit`，`Emulator`按钮又开始工作了

# html - collection_select 行为不端

> ID：14840272
> 
> 赞同：0
> 
> 时间：2013-02-12T19:29:42.310
> 
> 标签：html, ruby-on-rails-3, forms, selection

我有一个表单，用户从下拉列表中选择一个类别。这是我认为的代码：

```
<%= collection_select(:project_categories, :id, Project_Category.all, :id, :category_name) %> 
```

表单中的所有其他字段（是的，collection_select 在表单内）按预期保存到数据库并从数据库中读取。但不是collection_select...

这是模型：

```
class Project < ActiveRecord::Base
  attr_accessible :category,
  ...
  belongs_to  :user
  has_one     :category
  ...
end 
```

控制器：

```
def create
  @user = current_user
  @project = current_user.build_project(params[:project])
  @project.save
  render 'edit'
end
...
def update
  @project = Project.find(params[:id])
  @user = current_user
  @project.current_step = session[:step]
end
...
  private

  def correct_user
    @project = current_user.project
    redirect_to show_user_path if @project.nil?
  end

  def has_project
    @project = current_user.projects.find_by_id(params[:id])
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:13:08.813

您是否尝试为每个项目分配一个类别？如果你的关系设置正确，它应该是这样的：

```
<%= collection_select(:category_id, Category.all, :id, :name) %> 
```

您的`Project`模型将需要一个`:category_id`整数。

# ios - 带有圆形手柄的 UIBezierPath 矩形

> ID：14840276
> 
> 赞同：3
> 
> 时间：2013-02-12T19:30:02.050
> 
> 标签：ios, core-graphics, uibezierpath

我正在尝试绘制一个具有四个圆形手柄的矩形。这是它的样子：

```
o----o
|    |
|    |
o----o 
```

圆形把手是“热的”。换句话说，当用户触摸它时，手柄可以四处移动，而其余点则被锚定。我想知道是否有人可以编写此功能的代码。我正在查看 UIBezierPath 以绘制带圆圈的矩形，但我很难考虑如何允许用户仅点击圆圈。我在想它可能需要五个不同的 UIBezierPath 对象，但最终 UI 将由这些对象的多个组成。

任何建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T19:40:41.033

我根本不会把它画成一个带有复杂`UIBezierPath`s 的单一形状。我认为它是 6 个不同的部分。一个容器、一个矩形和 4 个圆。

我会有一个简单的容器`UIView`，它有一个矩形视图和四个`UIViews`圆角。然后`UIPanGestureRecognizer`在每个圆圈上放一个。在手势处理程序中，移动圆心并将底层矩形矩形调整相同的量。这将避免任何复杂的路径或数学运算，并使矩形本身的加减量变得简单。

**更新：代码！**

我创建了一个处理一切的自包含 UIView 子类。您可以像这样创建一个：

```
HandlesView *view = [[HandlesView alloc] initWithFrame:self.view.bounds];
[view setAutoresizingMask:UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth];
[view setBackgroundColor:[UIColor redColor]];
[self.view addSubview:view];

// A custom property that contains the selected area of the rectangle. Its updated while resizing.
[view setSelectedFrame:CGRectMake(128.0, 128.0, 200.0, 200.0)]; 
```

视图本身的框架是总的可拖动区域。选定的框架是内部可见矩形。

```
//
//  HandlesView.h
//  handles
//
//  Created by Ryan Poolos on 2/12/13.
//  Copyright (c) 2013 Ryan Poolos. All rights reserved.
//

#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>

@interface HandlesView : UIView

@property (nonatomic, readwrite) CGRect selectedFrame;

@end 
```

这是实现。

```
//
//  HandlesView.m
//  handles
//
//  Created by Ryan Poolos on 2/12/13.
//  Copyright (c) 2013 Ryan Poolos. All rights reserved.
//

#import "HandlesView.h"

@interface HandlesView ()
{
    UIView *rectangle;

    NSArray *handles;
    NSMutableArray *touchedHandles;

    UIView *circleTL;
    UIView *circleTR;
    UIView *circleBL;
    UIView *circleBR;
}
@end

@implementation HandlesView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        rectangle = [[UIView alloc] initWithFrame:CGRectInset(self.bounds, 22.0, 22.0)];
        [self addSubview:rectangle];

        // Create the handles and position.
        circleTL = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, 44.0, 44.0)];
        [circleTL setCenter:CGPointMake(CGRectGetMinX(rectangle.frame), CGRectGetMinY(rectangle.frame))];

        circleTR = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, 44.0, 44.0)];
        [circleTR setCenter:CGPointMake(CGRectGetMaxX(rectangle.frame), CGRectGetMinY(rectangle.frame))];

        circleBL = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, 44.0, 44.0)];
        [circleBL setCenter:CGPointMake(CGRectGetMinX(rectangle.frame), CGRectGetMaxY(rectangle.frame))];

        circleBR = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, 44.0, 44.0)];
        [circleBR setCenter:CGPointMake(CGRectGetMaxX(rectangle.frame), CGRectGetMaxY(rectangle.frame))];

        handles = @[ circleTL, circleTR, circleBL, circleBR ];

        for (UIView *handle in handles) {
            // Round the corners into a circle.
            [handle.layer setCornerRadius:(handle.frame.size.width / 2.0)];
            [self setClipsToBounds:YES];

            // Add a drag gesture to the handle.
            [handle addGestureRecognizer:[[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)]];

            // Add the handle to the screen.
            [self addSubview:handle];
        }
    }
    return self;
}

- (void)setSelectedFrame:(CGRect)selectedFrame
{
    [rectangle setFrame:selectedFrame];

    [circleTL setCenter:CGPointMake(CGRectGetMinX(rectangle.frame), CGRectGetMinY(rectangle.frame))];
    [circleTR setCenter:CGPointMake(CGRectGetMaxX(rectangle.frame), CGRectGetMinY(rectangle.frame))];
    [circleBL setCenter:CGPointMake(CGRectGetMinX(rectangle.frame), CGRectGetMaxY(rectangle.frame))];
    [circleBR setCenter:CGPointMake(CGRectGetMaxX(rectangle.frame), CGRectGetMaxY(rectangle.frame))];
}

- (CGRect)selectedFrame
{
    return rectangle.frame;
}

// Forward the background color.
- (void)setBackgroundColor:(UIColor *)backgroundColor
{
    // Set the container to clear.
    [super setBackgroundColor:[UIColor clearColor]];

    // Set our rectangle's color.
    [rectangle setBackgroundColor:[backgroundColor colorWithAlphaComponent:0.5]];

    for (UIView *handle in handles) {
        [handle setBackgroundColor:backgroundColor];
    }
}

- (void)handlePan:(UIPanGestureRecognizer *)gesture
{
    // The handle we're moving.
    UIView *touchedHandle = gesture.view;

    // Keep track of touched Handles.
    if (!touchedHandles) {
        touchedHandles = [NSMutableArray array];
    }

    switch (gesture.state) {
        case UIGestureRecognizerStateBegan:
            [touchedHandles addObject:touchedHandle];
            break;

        case UIGestureRecognizerStateChanged:
        {
            CGPoint tranlation = [gesture translationInView:self];

            // Calculate this handle's new center
            CGPoint newCenter = CGPointMake(touchedHandle.center.x + tranlation.x, touchedHandle.center.y + tranlation.y);

            // Move corresponding circles
            for (UIView *handle in handles) {
                if (handle != touchedHandle && ![touchedHandles containsObject:handle]) {
                    // Match the handles horizontal movement
                    if (handle.center.x == touchedHandle.center.x) {
                        handle.center = CGPointMake(newCenter.x, handle.center.y);
                    }

                    // Match the handles vertical movement
                    if (handle.center.y == touchedHandle.center.y) {
                        handle.center = CGPointMake(handle.center.x, newCenter.y);
                    }
                }
            }

            // Move this circle
            [touchedHandle setCenter:newCenter];

            // Adjust the Rectangle
            // The origin and just be based on the Top Left handle.
            float x = circleTL.center.x;
            float y = circleTL.center.y;

            // Get the width and height based on the difference between handles.
            float width = abs(circleTR.center.x - circleTL.center.x);
            float height = abs(circleBL.center.y - circleTL.center.y);

            [rectangle setFrame:CGRectMake(x, y, width, height)];

            [gesture setTranslation:CGPointZero inView:self];
        }
            break;

        case UIGestureRecognizerStateEnded:
            [touchedHandles removeObject:touchedHandle];
            break;

        default:
            break;
    }
}

@end 
```

这只是一个概念证明。有很多遗漏的注意事项，例如能够在框外拖动、多点触控复杂性、负尺寸。所有这些问题都可以以非常不同的方式处理，并且是使这样的事情从一个好主意变成一个漂亮的自定义界面的秘诀。我会把这部分留给你。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T19:38:37.273

当您实现手势识别器时，您将希望将圆形贝塞尔路径存储在您的类中。

有一个 Apple 文档描述了如何实现一个 UIView 或 UIControl 来接受带有图片和示例代码的触摸事件。

[http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/multitouch_background/multitouch_background.html#//apple_ref/doc/uid/TP40009541-CH5-SW9](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/multitouch_background/multitouch_background.html#//apple_ref/doc/uid/TP40009541-CH5-SW9)

# mysql - 按范围计数没有给出所需的输出

> ID：14840277
> 
> 赞同：0
> 
> 时间：2013-02-12T19:30:17.300
> 
> 标签：mysql, sql, database, stored-procedures, routines

我创建了一个例程来给我一个输出，比如

```
|  Row  |  Voters  | Households  |
| Total |  15235   |  7250       | 
| Poll  |  NULL    |   NULL      |
| <70%  |  5000    |   2500      |
| <80%  |  3500    |   2235      |
     .....
|  AV   |   NULL   |   NULL      |
| <70%  |   300    |  150        |
     .....
|  PAV  |   NULL   |   NULL      |
| <70%  |  1894    |  1201       | 
```

一切从 <70% 到 <100%

我有一个例行代码

```
CREATE PROCEDURE `district_Propensity_counts`(IN target INT)
    COMMENT 'build demographic table for district'
BEGIN

  DROP TABLE IF EXISTS Temp;

   CREATE TEMPORARY TABLE Temp (
      Row   VARCHAR(25)   DEFAULT NULL,
      Col   VARCHAR(15)   DEFAULT NULL,
      Data  MEDIUMINT(12) UNSIGNED DEFAULT 0,
      Seq   TINYINT(2)    UNSIGNED DEFAULT 0
   ) ENGINE=MyISAM DEFAULT CHARSET=latin1;

INSERT INTO Temp 
   SELECT 'Total' AS Row, 
          'Voters' AS Col, 
          COUNT(*) AS Data,
          1 as Seq 
     FROM VoterProfile p 
    INNER JOIN DistrictPrecinct d 
            ON d.precinct_id=p.precinct_code 
         WHERE district_id=target 
   UNION 
   SELECT 'Total' AS Row, 
          'Households' AS Col, 
          COUNT(HHKey) AS Data, 
          1 as Seq 
     FROM (SELECT HHKey 
             FROM VoterProfile p 
       INNER JOIN DistrictPrecinct d 
               ON d.precinct_id=p.precinct_code 
            WHERE district_id=target
                GROUP BY HHKey) AS A

UNION

SELECT 'Poll' AS Row,
NULL AS Col, NULL AS Data, 2 AS Seq

     UNION

    (
     SELECT r.Row
     , 'Voters' AS Col
     , CASE r.Row
         WHEN '< 70%' THEN IFNULL(d.c70,0)
         WHEN '< 80%' THEN IFNULL(d.c80,0)
         WHEN '< 90%' THEN IFNULL(d.c90,0)
         WHEN '< 100%' THEN IFNULL(d.c100,0)
       END AS Data
     , 3 AS Seq
  FROM ( SELECT '< 70%' AS Row
         UNION ALL SELECT '< 80%' 
         UNION ALL SELECT '< 90%'
         UNION ALL SELECT '< 100%' 
       ) r
 CROSS
  JOIN ( SELECT SUM(vp.poll_propensity >= 0.70 AND p.perm_absentee = 'N' AND vp.mail_propensity = 0) AS c70
              , SUM(vp.poll_propensity >= 0.80 AND p.perm_absentee = 'N' AND vp.mail_propensity = 0) AS c80
              , SUM(vp.poll_propensity >= 0.90 AND p.perm_absentee = 'N' AND vp.mail_propensity = 0) AS c90
              , SUM(vp.poll_propensity >= 1    AND p.perm_absentee = 'N' AND vp.mail_propensity = 0) AS c100
              , COUNT(p.voter_id) AS count_voter_id
           FROM VoterProfile p
           JOIN DistrictPrecinct d ON d.precinct_id=p.precinct_code
           JOIN VoterPropensity vp ON p.voter_id=vp.voter_id
          WHERE d.district_id = target
            AND vp.election_type = 'T'
       ) d
 ORDER BY r.Row)

    UNION(
     SELECT r.Row
     , 'Households' AS Col
     , CASE r.Row
         WHEN '< 70%' THEN IFNULL(d.c70,0)
         WHEN '< 80%' THEN IFNULL(d.c80,0)
         WHEN '< 90%' THEN IFNULL(d.c90,0)
         WHEN '< 100%' THEN IFNULL(d.c100,0)
       END AS Data
     , 3 AS Seq
  FROM ( SELECT '< 70%' AS Row
         UNION ALL SELECT '< 80%' 
         UNION ALL SELECT '< 90%'
         UNION ALL SELECT '< 100%' 
       ) r
 CROSS
  JOIN ( SELECT SUM(vp.poll_propensity >= 0.70 AND p.perm_absentee = 'N' AND vp.mail_propensity = 0) AS c70
              , SUM(vp.poll_propensity >= 0.80 AND p.perm_absentee = 'N' AND vp.mail_propensity = 0) AS c80
              , SUM(vp.poll_propensity >= 0.90 AND p.perm_absentee = 'N' AND vp.mail_propensity = 0) AS c90
              , SUM(vp.poll_propensity >= 1    AND p.perm_absentee = 'N' AND vp.mail_propensity = 0) AS c100
              , COUNT(p.HHKey) AS count_HHKey
           FROM VoterProfile p
           JOIN DistrictPrecinct d ON d.precinct_id=p.precinct_code
           JOIN VoterPropensity vp ON p.voter_id=vp.voter_id
          WHERE d.district_id = target
            AND vp.election_type = 'T'
            GROUP BY HHKey
       ) d
 ORDER BY r.Row)

 UNION
SELECT 'AV' AS Row,
NULL AS Col, NULL AS Data, 4 AS Seq                     

    UNION(
     SELECT r.Row
     , 'Voters' AS Col
     , CASE r.Row
         WHEN '< 70%' THEN IFNULL(d.c70,0)
         WHEN '< 80%' THEN IFNULL(d.c80,0)
         WHEN '< 90%' THEN IFNULL(d.c90,0)
         WHEN '< 100%' THEN IFNULL(d.c100,0)
       END AS Data
     , 5 AS Seq
  FROM ( SELECT '< 70%' AS Row
         UNION ALL SELECT '< 80%' 
         UNION ALL SELECT '< 90%'
         UNION ALL SELECT '< 100%' 
       ) r
 CROSS
  JOIN ( SELECT SUM(vp.mail_propensity >= 0.70 AND p.perm_absentee = 'N' AND vp.poll_propensity = 0) AS c70
              , SUM(vp.mail_propensity >= 0.80 AND p.perm_absentee = 'N' AND vp.poll_propensity = 0) AS c80
              , SUM(vp.mail_propensity >= 0.90 AND p.perm_absentee = 'N' AND vp.poll_propensity = 0) AS c90
              , SUM(vp.mail_propensity >= 1    AND p.perm_absentee = 'N' AND vp.poll_propensity = 0) AS c100
              , COUNT(p.voter_id) AS count_voter_id
           FROM VoterProfile p
           JOIN DistrictPrecinct d ON d.precinct_id=p.precinct_code
           JOIN VoterPropensity vp ON p.voter_id=vp.voter_id
          WHERE d.district_id = target
            AND vp.election_type = 'T'
       ) d
 ORDER BY r.Row)

    UNION(
     SELECT r.Row
     , 'Households' AS Col
     , CASE r.Row
         WHEN '< 70%' THEN IFNULL(d.c70,0)
         WHEN '< 80%' THEN IFNULL(d.c80,0)
         WHEN '< 90%' THEN IFNULL(d.c90,0)
         WHEN '< 100%' THEN IFNULL(d.c100,0)
       END AS Data
     , 5 AS Seq
  FROM ( SELECT '< 70%' AS Row
         UNION ALL SELECT '< 80%' 
         UNION ALL SELECT '< 90%'
         UNION ALL SELECT '< 100%' 
       ) r
 CROSS
  JOIN ( SELECT SUM(vp.mail_propensity >= 0.70 AND p.perm_absentee = 'N' AND vp.poll_propensity = 0) AS c70
              , SUM(vp.mail_propensity >= 0.80 AND p.perm_absentee = 'N' AND vp.poll_propensity = 0) AS c80
              , SUM(vp.mail_propensity >= 0.90 AND p.perm_absentee = 'N' AND vp.poll_propensity = 0) AS c90
              , SUM(vp.mail_propensity >= 1    AND p.perm_absentee = 'N' AND vp.poll_propensity = 0) AS c100
              , COUNT(p.HHKey) AS count_HHKey
           FROM VoterProfile p
           JOIN DistrictPrecinct d ON d.precinct_id=p.precinct_code
           JOIN VoterPropensity vp ON p.voter_id=vp.voter_id
          WHERE d.district_id = target
            AND vp.election_type = 'T'
            GROUP BY HHKey
       ) d
 ORDER BY r.Row)

   UNION
SELECT 'PAV' AS Row,
NULL AS Col, NULL AS Data, 6 AS Seq 

    UNION(
     SELECT r.Row
     , 'Voters' AS Col
     , CASE r.Row
         WHEN '< 70%' THEN IFNULL(d.c70,0)
         WHEN '< 80%' THEN IFNULL(d.c80,0)
         WHEN '< 90%' THEN IFNULL(d.c90,0)
         WHEN '< 100%' THEN IFNULL(d.c100,0)
       END AS Data
     , 7 AS Seq
  FROM ( SELECT '< 70%' AS Row
         UNION ALL SELECT '< 80%' 
         UNION ALL SELECT '< 90%'
         UNION ALL SELECT '< 100%' 
       ) r
 CROSS
  JOIN ( SELECT SUM(vp.mail_propensity >= 0.70 AND p.perm_absentee = 'Y') AS c70
              , SUM(vp.mail_propensity >= 0.80 AND p.perm_absentee = 'Y') AS c80
              , SUM(vp.mail_propensity >= 0.90 AND p.perm_absentee = 'Y') AS c90
              , SUM(vp.mail_propensity >= 1    AND p.perm_absentee = 'Y') AS c100
              , COUNT(p.voter_id) AS count_voter_id
           FROM VoterProfile p
           JOIN DistrictPrecinct d ON d.precinct_id=p.precinct_code
           JOIN VoterPropensity vp ON p.voter_id=vp.voter_id
          WHERE d.district_id = target
            AND vp.election_type = 'T'
       ) d
 ORDER BY r.Row)

        UNION(
     SELECT r.Row
     , 'Households' AS Col
     , CASE r.Row
         WHEN '< 70%' THEN IFNULL(d.c70,0)
         WHEN '< 80%' THEN IFNULL(d.c80,0)
         WHEN '< 90%' THEN IFNULL(d.c90,0)
         WHEN '< 100%' THEN IFNULL(d.c100,0)
       END AS Data
     , 7 AS Seq
  FROM ( SELECT '< 70%' AS Row
         UNION ALL SELECT '< 80%' 
         UNION ALL SELECT '< 90%'
         UNION ALL SELECT '< 100%' 
       ) r
 CROSS
  JOIN ( SELECT SUM(vp.mail_propensity >= 0.70 AND p.perm_absentee = 'Y') AS c70
              , SUM(vp.mail_propensity >= 0.80 AND p.perm_absentee = 'Y') AS c80
              , SUM(vp.mail_propensity >= 0.90 AND p.perm_absentee = 'Y') AS c90
              , SUM(vp.mail_propensity >= 1    AND p.perm_absentee = 'Y') AS c100
              , COUNT(p.HHKey) AS count_HHKey
           FROM VoterProfile p
           JOIN DistrictPrecinct d ON d.precinct_id=p.precinct_code
           JOIN VoterPropensity vp ON p.voter_id=vp.voter_id
          WHERE d.district_id = target
            AND vp.election_type = 'T'
            GROUP BY HHKey
       ) d
 ORDER BY r.Row
 )

     ;

END 
```

然后使用调用第一个过程的第二个过程

```
CREATE PROCEDURE `district_propensity`(IN target varchar(30))
    COMMENT 'display demographics for district'
BEGIN

  CALL district_Propensity_counts(target);

  SELECT district_id, district_name FROM Districts WHERE district_id=target;

  SELECT Row,
         GROUP_CONCAT(IF (COL='Voters',Data,NULL))+0 AS 'Voters', 
         GROUP_CONCAT(IF (COL='Households',Data, NULL))+0 AS 'Households' 
    FROM Temp 
    GROUP BY ROW
    ORDER BY SEQ;

END 
```

但是当我这样做时得到的输出：

```
CALL district_propensity('3') 
```

是这样的

```
|  Row  |  Voters  |  Households  |
| Total |  15235   |    7250      |
| Poll  |  NULL    |    NULL      |
| <90%  |  4565    |     1        |
| AV    |  NULL    |     NULL     |
| <100% |  668     |     0        |
| <70%  |  1894    |     0        |
| <80%  |  1434    |     3        |
|  PAV  |  NULL    |     NULL     | 
```

就是这样...我错过了所有其他人..但是选民列中的数字是正确的..它的计数是正确的，但错过了很多..

非常感谢您对此的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:33:49.883

尝试这个：

```
GROUP_CONCAT(IF (COL='Voters',Data,0))+0 AS 'Voters', 
GROUP_CONCAT(IF (COL='Households',Data,0))+0 AS 'Households' 
```

# php - ajax - 检查用户名是否存在 + 如果存在则返回消息

> ID：14840286
> 
> 赞同：2
> 
> 时间：2013-02-12T19:31:00.967
> 
> 标签：php, javascript, ajax

我试图检查用户想要的用户名是否已经被使用，而无需发送表单，基本上是用户名字段的 onBlur。

我遇到了一些麻烦，有几个问题。

我有我的输入字段加上 js：

```
<script src="js/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function(){

$('#username').on('blur', checkdb);

function checkdb(){ 
    var desiredUsername = $(this).val();
    $.ajaxSetup({
        url: "check-db.php",
        type: "POST",
    });

    $.ajax({
        data: 'desiredUsername='+desiredUsername,       
        success: function (msg) {
            alert (msg);},
            error: function (XMLHttpRequest, textStatus, errorThrown){   
            alert('Error submitting request.'); 
        }   
    });     
}           
});
</script>

<input type="text" name="username" id="username"> 
```

和我的 check-db.php 文件：

```
$mysqli = mysqli_connect("localhost","connection info");
if ($mysqli->connect_errno) {
echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
}

$desiredUsername = $_POST['desiredUsername'];

$stmt = $mysqli->prepare("SELECT * FROM users WHERE username = '?' ");
$stmt->bind_param('s', $desiredUsername);
$stmt->execute(); 
```

首先：我从我的 php 代码中得到一个错误，“变量的数量与准备好的语句中的参数数量不匹配”，这让我有点困惑？我有 1 个变量和 1 个参数，不是吗？

那么，一旦这实际工作，我如何将消息/变量发送回输入页面？所以如果用户名被占用，我可以这么说，或者如果它可用的话？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:38:36.037

在服务器大小（在您的情况下为 PHP）上，只需`echo`像这样传递给客户端（Javascript）的东西：

```
echo json_encode($datas); //can be array or whatever 
```

然后在客户端：

```
$.ajax({
    method: 'POST',
    dataType:'json',
    data: {'username' : desiredUsername}, //then getting $_POST['username']
    success: function(datas) {
        console.log(datas); //Your previous data from the server side
    },
    error: function(XMLHttpRequest, textStatus, errorThrown){    
        console.log(textStatus);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:35:47.040

尝试

```
function checkdb(){ 
    var desiredUsername = $(this).val();
    $.ajaxSetup({
        url: "check-db.php",
        type: "POST",
    });

    $.ajax({
        data: {
            desiredUsername: desiredUsername
        },
        success: function (msg) {
            alert(msg);
        },
        error: function (XMLHttpRequest, textStatus, errorThrown){    
            alert('Error submitting request.'); 
        }   
    });    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T19:37:20.423

发送数据时出现错误，您应该发送一个 JS 对象作为数据，如下所示：

```
data: { desiredUsername: desiredUsername }, 
```

# html - Firefox中的CSS功能区中断

> ID：14840289
> 
> 赞同：0
> 
> 时间：2013-02-12T19:31:13.390
> 
> 标签：html, css, firefox, ribbon

我为 H1 标题标签创建了一个功能区。在 Chrome、Safari 和 IE9 中似乎一切正常，但由于某种原因，它在 Firefox 中出现故障。

这是它在 Firefox 中的外观截图：

![在此处输入图像描述](../Images/7cd5497b48c72002acc1a29dce9d7ce6.png)

这是我的 H1 标签的 CSS：

```
#home .content h1 {
text-align: left;
position: relative;
color: #fff;    
margin: 0 -25px 20px -30px;
padding: 5px 0; 
background: #939393;
text-indent: 30px;
font: 1.3em 'Oswald', sans-serif;
}

#home .content h1:before {
content: '';
position: absolute;
border-style: solid;
border-color: transparent;
bottom: -10px;
border-width: 0px 10px 10px 0px;
border-right-color: #464646;
left: 0px;  
} 
```

我试过了

```
overflow: hidden; 
```

但这似乎不起作用。

我也试过

```
-moz-box-sizing: border-box; 
```

但这似乎也没有解决任何问题

我也弄乱了一些边距和填充，但在 FF 中似乎没有任何改变。

这是该网站的链接（目前作为演示）： [http ://dev.boostmktg.com/oas](http://dev.boostmktg.com/oas)

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:42:45.613

看起来 text-indent 将您的功能区“阴影”向右推 30 像素。

我设法通过删除文本缩进并给 h1 30px 的左填充来让它在 Firefox 中工作

最终的 CSS 看起来像这样：

```
#home .content h1 {
text-align: left;
position: relative;
color: #fff;    
margin: 0 -25px 20px -30px;
   /* add left padding of 30 pixels */ 
padding: 5px 0 5px 30px; 
background: #939393;
   /* no need for this text-indent: 30px; */
font: 1.3em 'Oswald', sans-serif;
}

#home .content h1:before {
content: '';
position: absolute;
border-style: solid;
border-color: transparent;
bottom: -10px;
border-width: 0px 10px 10px 0px;
border-right-color: #464646;
left: 0px;  
} 
```

# jshint - 逗号第一个验证，没有空格

> ID：14840293
> 
> 赞同：0
> 
> 时间：2013-02-12T19:31:37.213
> 
> 标签：jshint, gruntjs

我正在为我正在编写的 JavaScript 套件构建一个 JSHint 集。我写对象的习惯如下：

```
var obj = {
   hello: 'World'
  ,foo: 'Bar'
  ,name: 'Dave'
}; 
```

我使用 Grunt 和 grunt-contrib-jshint 通过以下选项运行验证：

*   浏览器：是的
*   eqeqeq：假
*   拉克斯逗号：是的
*   白色：真实
*   缩进：2

当我运行时，`grunt jshint`我得到一个错误，即在逗号后需要一个空格。我如何忽略这个空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-14T10:47:57.857

可以按照doc中写的方式忽略具体的错误； [https://github.com/gruntjs/grunt-contrib-jshint](https://github.com/gruntjs/grunt-contrib-jshint) 这是一个报价

忽略特定警告

如果您想忽略特定警告：

[L24:C9] W015：预期 '}' 在 11 处而不是 9 处缩进。您可以通过在警告 ID 前添加 - 作为选项来切换它：

```
grunt.initConfig({
  jshint: {
    ignore_warning: {
      options: {
        '-W015': true,
      },
      src: ['**/*.js'],
    },
  },
}); 
```

更新。另外，我正在使用这样的配置并且没有逗号错误

```
,defaultOptions = {
            curly: true,
            eqeqeq: true,
            immed: true,
            latedef: 'nofunc',
            newcap: true,
            noarg: true,
            nonew: true,
            sub: true,
            undef: true,
            boss: true,
            eqnull: true,
            camelcase: true,
            quotmark: true,

            // lax
            laxcomma: true,

            // environment
            browser: true,
            devel: true,
            jquery: true,
        } 
```

# c# - 返回 HTML 和 Windows 窗体的 MVC 操作结果

> ID：14840298
> 
> 赞同：0
> 
> 时间：2013-02-12T19:31:54.703
> 
> 标签：c#, .net, asp.net-mvc

我对 MVC 完全陌生。我计划开发一个在 Web 和 Windows 上运行的应用程序。我关心的是 .net 中的 MVC 是否与 Windows 应用程序兼容？

如果是，是否可以根据以下某些条件返回带有 Windows 表单或网页的操作结果？

```
public actionresult Index()
{
  if(some condition)
  {
    return View("webpage.html");
  }
  else
  {
    return View("Webform");
  }
}/* code may note be having exact syntax. Just for understanding purpose. 
```

让我知道开发这样的应用程序的解决方案是否可行。感谢您提供其他建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:48:51.847

ActionResult 类是 System.Web.Mvc 的一部分，因此它是不相关的窗口窗体。它有助于将不同的 Web 相关子类型结果（html、json、重定向、文件）返回到 Web/客户端的响应流。

我认为你必须做很多前期工作和修改 .net 才能做到你所描述的。

相反，我会创建某种通用存储库，可以由您的 MVC 应用程序和 Windows 窗体（或更好的 WPF）应用程序共享。有很多例子：[https ://stackoverflow.com/questions/3175/repository-pattern-tutorial-in-c-sharp](https://stackoverflow.com/questions/3175/repository-pattern-tutorial-in-c-sharp)

这样，大部分工作都进入存储库，并且可以在 Windows 窗体应用程序和 MVC 应用程序的控制器中使用这些工作。我还建议构建一个 MVVM wpf 应用程序，因为这种风格与 MVC 模式非常相似，这将使存储库更加可重用。

# iphone - 从个人资料页面（电话号码、电子邮件地址、照片）中提取联系人变量到 iOS 电话簿联系人列表

> ID：14840301
> 
> 赞同：1
> 
> 时间：2013-02-12T19:31:58.667
> 
> 标签：iphone, ios, objective-c, abpeoplepickerview

我想从我的应用程序中的用户配置文件中加载信息到 iPhone 电话簿/联系人列表中。

我的应用程序有用户资料，其中包含有关他们所代表的人的各种属性，例如他们的电话号码、姓名、学校、教育水平、电子邮件地址、照片、他们所做的事情的摘要、他们的兴趣等。

我想做的是让另一个用户能够从这个配置文件页面中提取（单击）联系人属性，以便将其导入到 iPhone 联系人列表中。

例如，如果我喜欢 UserA，并且想将她添加到我的 iPhone 联系人列表中，我可以单击“添加到联系人”，然后导入 UserA 的所有相关个人资料信息（电话号码、电子邮件地址、街道地址、URL、照片等）并在我的 iPhone 电话簿中创建 UserA 作为新联系人。

这可以使用 iphone 的 abpeoplepicker api 吗？如果是这样，我该如何执行此操作（我在哪里可以参考适当的文档），以及可能的限制/约束/标准是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:01:01.987

框架：

```
#import "AddressBook/AddressBook.h" 
```

代码：

```
- (void) getLocalContacts
{
    ABAddressBookRef addressBook = ABAddressBookCreate( );
    CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople( addressBook );
    CFIndex nPeople = ABAddressBookGetPersonCount( addressBook );

    User *user;
    NSMutableArray *allContacts = [[NSMutableArray alloc] init];

    for ( int i = 0; i < nPeople; i++ )
    {
        ABRecordRef person = CFArrayGetValueAtIndex( allPeople, i );

        ABMultiValueRef emails = ABRecordCopyValue(person, kABPersonEmailProperty);

        if(ABMultiValueGetCount(emails) != 0)
        {
            user = [[User alloc] init];

            CFStringRef fName, lName;
            fName = ABRecordCopyValue(person, kABPersonFirstNameProperty);
            lName  = ABRecordCopyValue(person, kABPersonLastNameProperty);

            CFStringRef email = ABMultiValueCopyValueAtIndex(emails, 0);

            NSData  *imgData = (NSData *)ABPersonCopyImageData(person);

            NSString *firstName = (NSString *) fName;
            NSString *lastName = (NSString *) lName;

            if (firstName.length == 0 && lastName.length != 0){
                user.userName = lastName;
            } 
            else if (firstName.length != 0 && lastName.length == 0){
                user.userName = firstName;
            }
            else if (firstName.length == 0 && lastName.length == 0){
                user.userName = @"";
            }
            else if (firstName.length != 0 && lastName.length != 0){
                user.userName = [NSString stringWithFormat:@"%@ %@", firstName, lastName];
            }

            //user.firstName = (NSString *) firstName;
            user.lastName = @"";

            user.email = (NSString *) email;

            user.firstName = (NSString *) email;

            user.localImage = [UIImage imageWithData:imgData];

            [allContacts addObject:user];

            [user release];

        }
    }

    [DataManager sharedManager].allLocalUsers = allContacts;

    [self hideSpinner];

} 
```

# ios - 分组模型在 iOS 中缓慢渲染 (OpenGL ES 2.0)

> ID：14840309
> 
> 赞同：-1
> 
> 时间：2013-02-12T19:32:48.670
> 
> 标签：ios, opengl-es

首先，让我澄清一下“分组模型”的含义。我实际上不确定这是什么标准术语。为了减少渲染调用的数量，我将多个模型组合成一个模型，并通过对 glDrawElements 的一次调用（使用 VBO）来渲染整个事物。在我的代码中，我称之为 ModelGroup。我将它用于各种事物，尤其是用于大组几何简单的对象（如城市中的建筑物或粒子）。

这个问题最近出现在我的模型组渲染非常缓慢的地方。我通过在它周围放置一个计时器，将减速与对 glDrawElements 的实际调用隔离开来。例如，我的粒子曾经在大约 2ms​​ 左右渲染大约 10k 粒子（没有实例化）。我不记得确切的数字，但我们只能说渲染绝对不是目前的瓶颈。到目前为止，对具有 10k 个粒子的 glDrawElements 的一次调用大约需要 256 毫秒。这种性能仅比单独调用 glDrawElements 渲染对象好一点。因此，出于某种原因，GPU 显然承受着巨大的负担。

我的引擎发生了什么变化：我最近更新了 XCode，并从使用 EAGLView 更改为使用 GLKViewController。在这两种截然不同的性能状态之间，我的代码中没有任何其他更改。我会说，为了迁移到使用 GLKViewController，我完全重新创建了我的项目并添加了我所有的源文件。然后我重写了我的游戏循环以通过 GLKViewController 的更新功能进行更新。然而，这是一个非常小的变化。

为了完全清楚我的 ModelGroup 类的作用，我将发布将添加的模型编译到呈现的显示模型中的函数。

```
-(bool) compileDisplayModelWithNormals:(bool)updateNormals withTexcoords:(bool)updateTexcoords withColor:(bool)updateColor withElements:(bool)updateElements
{
    modelCompiled = YES;
    bool initd = displayModel->positions;

    // set properties
    if( !initd )
    {
        displayModel->primType = GL_UNSIGNED_SHORT;
        displayModel->elementType = GL_TRIANGLES;
        displayModel->positionType = GL_FLOAT;
        displayModel->texcoordType = GL_FLOAT;
        displayModel->colorType = GL_FLOAT;
        displayModel->normalType = GL_FLOAT;
        displayModel->positionSize = 3;
        displayModel->normalSize = 3;
        displayModel->texcoordSize = 2;
        displayModel->colorSize = 4;

        // initialize to zero
        displayModel->numVertices = 0;
        displayModel->numElements = 0;
        displayModel->positionArraySize = 0;
        displayModel->texcoordArraySize = 0;
        displayModel->normalArraySize  = 0;
        displayModel->elementArraySize = 0;
        displayModel->colorArraySize = 0;

        // sum the sizes
        for( NSObject<RenderedItem> *ri in items )
        {
            GLModel *model = ri.modelAsset.model.displayModel;
            displayModel->numVertices += model->numVertices;
            displayModel->numElements += model->numElements;
                displayModel->positionArraySize += model->positionArraySize;
            displayModel->texcoordArraySize += model->texcoordArraySize;
            displayModel->normalArraySize += model->normalArraySize;
            displayModel->elementArraySize += model->elementArraySize;
            displayModel->colorArraySize += model->colorArraySize;
        }
        displayModel->positions = (GLfloat *)malloc( displayModel->positionArraySize );
        displayModel->texcoords = (GLfloat *)malloc( displayModel->texcoordArraySize );
        displayModel->normals = (GLfloat *)malloc( displayModel->normalArraySize );
        displayModel->elements = (GLushort *)malloc( displayModel->elementArraySize );
        displayModel->colors = (GLfloat *)malloc( displayModel->colorArraySize );
    }

    // update the data
    int vertexOffset = 0;
    int elementOffset = 0;
    for( int j = 0; j < [items count]; j++ )
    {
        NSObject<RenderedItem> *ri = (GameItem *)[items objectAtIndex:j];
        GLModel *model = ri.modelAsset.model.displayModel;
        if( !ri.geometryUpdate )
        {
            vertexOffset += model->numVertices;
            continue;
        }
        // reset the update flag
        ri.geometryUpdate = NO;

        // get GameItem transform data
        rpVec3 pos = [ri getPosition];
        rpMat3 rot = [ri orientation];

        int NoV = model->numVertices;
        int NoE = model->numElements;
        for( int i = 0; i < NoV; i++ )
        {
            // positions
            rpVec3 r = rpVec3( model->positions, model->positionSize * i );

            // scale
            rpVec3 s = ri.scale;
            r.swizzleLocal( s );

            // rotate
            r = rot * r;

            // translate
            r.addLocal( pos );
            int start = model->positionSize * (vertexOffset + i);
            for( int k = 0; k < model->positionSize; k++ )
                displayModel->positions[start + k] = r[k];

            if( updateTexcoords )
            {
                // texcoords
                start = model->texcoordSize * (vertexOffset + i);
                if( model->texcoords )
                    for( int k = 0; k < model->texcoordSize; k++ )
                        displayModel->texcoords[start + k] = model->texcoords[model->texcoordSize * i + k];
            }
            if( updateNormals )
            {
                // normals (need to be rotated)
                if( model->normals )
                {
                    for( int k = 0; k < model->normalSize; k++ )
                    {
                        rpVec3 vn = rpVec3( model->normals, model->normalSize * i );
                        rpVec3 vnRot = rot * vn;
                        start = model->normalSize * (vertexOffset + i);
                        displayModel->normals[start + k] = vnRot[k];
                    }
                }
            }
            if( updateColor )
            {
                if( model->colors )
                {
                    start = model->colorSize * (vertexOffset + i);
                    displayModel->colors[start] = ri.color.r;
                    displayModel->colors[start + 1] = ri.color.g;
                    displayModel->colors[start + 2] = ri.color.b;
                    displayModel->colors[start + 3] = ri.color.a;
                }
            }
        }
        if( updateElements )
        {
            for( int i = 0; i < NoE; i++ )
            {
                // elements
                displayModel->elements[elementOffset + i] = model->elements[i] + vertexOffset;
            }
        }
        vertexOffset += NoV;
        elementOffset += NoE;
    }

    return YES;
} 
```

为了完整起见，这里是我渲染粒子的方式。粒子场绘制函数内部：

```
glBindVertexArray( modelGroup.displayModel->modelID );
glBindTexture( GL_TEXTURE_2D, textureID );

// set shader program
if( changeShader ) glUseProgram( shader.programID );

[modelViewStack push];
mtxMultiply( modelViewProjectionMatrix.m, [projectionStack top].m, [modelViewStack top].m );

glUniformMatrix4fv( shader.modelViewProjectionMatrixID, 1, GL_FALSE, modelViewProjectionMatrix.m );
[DebugTimer check:@"particle main start"];
glDrawElements( GL_TRIANGLES, modelGroup.displayModel->numElements, GL_UNSIGNED_SHORT, 0 );
[DebugTimer check:@"particle main end"];

[modelViewStack pop]; 
```

夹在 glDrawElements 语句之间的两个语句是我用来测量事件之间时间的计时器。

另外，我只想补充一点，我已经在设备和 iPad 模拟器 6.1 上运行，结果相同。模拟器在执行多个绘图调用时较慢，但在为 ModelGroup 调用 glDrawElements 时两者同样慢。就硬件加速而言，我已经检查以确保这种性能影响不会因为缺乏加速而产生一些副作用。我渲染了一个从包含 1024 个立方体（类似于城市的模型组）的文件中读取的模型，该模型可以毫无问题地渲染（没有 20 毫秒的延迟，就像模型组中的 1000 个立方体一样）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T07:26:14.550

我相信我已经以某种方式解开了这个谜团。毕竟，为什么这能解决问题对我来说仍然是个谜。

我一直在为这些函数使用我自己的自定义枚举值

```
glEnableVertexAttribArray
glVertexAttribPointer 
```

而不是使用作为 GLKViewController 类的一部分出现的新的（从 iOS 5.0 开始）Apple 指定的值：

```
GLKVertexAttribPosition
GLKVertexAttribNormal
GLKVertexAttribTexcoord0 
```

进行此更改后，我在调用`glDrawElements`. 我的模型组现在将以 0.1 毫秒的顺序渲染，而不是大约 20 毫秒。正如我所说，我真的不明白为什么这会解决任何问题，但它仍然是一个解决方案。

# python - Python使用re模块解析导入的文本文件

> ID：14840310
> 
> 赞同：3
> 
> 时间：2013-02-12T19:32:56.857
> 
> 标签：python, regex, python-3.x

```
def regexread():
    import re

    result = ''
    savefileagain = open('sliceeverfile3.txt','w')

    #text=open('emeverslicefile4.txt','r')
    text='09,11,14,34,44,10,11,  27886637,    0\n561, Tue, 5,Feb,2013, 06,25,31,40,45,06,07,  19070109,    0\n560, Fri, 1,Feb,2013, 05,21,34,37,38,01,06,  13063500,    0\n559, Tue,29,Jan,2013,'

    pattern='\d\d,\d\d,\d\d,\d\d,\d\d,\d\d,\d\d'
    #with open('emeverslicefile4.txt') as text:     
    f = re.findall(pattern,text)

    for item in f:
        print(item)

    savefileagain.write(item)
    #savefileagain.close() 
```

上面写的函数解析文本并返回七个数字的集合。我有三个问题。

1.  首先，包含与 text='09,...etc' 完全相同的文本的“读取”文件返回 a `TypeError expected string or buffer`，即使阅读一些帖子我也无法解决。
2.  其次，当我尝试将结果写入“写入”文件时，没有返回任何内容，并且
3.  第三，我不确定如何获得与 print 语句相同的输出，即三行七个数字，每行是我想要的输出。

这是我第一次使用正则表达式，所以请温柔！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-12T22:20:40.020

这应该可以解决问题，检查评论以了解我在这里做什么=）祝你好运

```
import re
filename = 'sliceeverfile3.txt'
pattern  = '\d\d,\d\d,\d\d,\d\d,\d\d,\d\d,\d\d'
new_file = []

# Make sure file gets closed after being iterated
with open(filename, 'r') as f:
   # Read the file contents and generate a list with each line
   lines = f.readlines()

# Iterate each line
for line in lines:

    # Regex applied to each line 
    match = re.search(pattern, line)
    if match:
        # Make sure to add \n to display correctly when we write it back
        new_line = match.group() + '\n'
        print new_line
        new_file.append(new_line)

with open(filename, 'w') as f:
     # go to start of file
     f.seek(0)
     # actually write the lines
     f.writelines(new_file) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:45:29.503

你在正确的轨道上......

您将遍历文件： [How to iterate over the file in python](https://stackoverflow.com/questions/5733419/how-to-iterate-over-the-file-in-python)

并将正则表达式应用于每一行。当您意识到您正在尝试编写“项目”时，上面的链接应该真正回答您的所有 3 个问题，该项目在该循环之外不存在。

# c# - WPF 4.0 SpellCheck 问题加载自定义词典

> ID：14840313
> 
> 赞同：1
> 
> 时间：2013-02-12T19:33:02.953
> 
> 标签：c#, wpf, spell-checking

有没有人在 WPF 4.0 中使用自定义字典？我在让自定义词典在我的 WPF 项目中工作时遇到问题。我一直在尝试遵循 msdn 提供的示例，但没有取得任何进展。

[http://msdn.microsoft.com/en-us/library/system.windows.controls.spellcheck.customdictionaries.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.spellcheck.customdictionaries.aspx)

```
glossary.Definition.SpellCheck.IsEnabled = true;
Uri uri = new Uri(@"pack://application:,,,/Prog.Proj;component/dictionary.lex");
glossary.Definition.SpellCheck.CustomDictionaries.Add(uri); 
```

由于我工作的性质，子文件夹已重命名。

我的 .lex 文件被设置为资源文件。

**编辑**
只有在页面已经加载后在单独的按钮事件中设置它时，我才能让它工作。似乎有什么东西阻止了 CustomDictionariesSources 的“拼写”属性加载，直到回发之后？如果有人对此有所了解，请发表您的见解。

**最终编辑**
我想要的文本框在一个网格内，该网格有一个启用的禁用标志，该标志设置在代码的深处。下面评论的另一个链接谈到了这一点。面临的另一个问题是我的页面由部分呈现，具体取决于用户选择。为了创建一致的行为，每次加载/重新加载我的文本框时，我都会将拼写检查作为最后一步加载。

我创建了一个上下文菜单扩展，以允许用户接受建议或添加到自定义词典。然后我根据当前用户将我的自定义词典提交到注册表中。我发现这个方向非常用户友好且易于实施。要检索项目，我需要创建一个临时文件，打包该文件的 uri，然后在加载自定义字典后删除该文件。

如果这有助于您实施自定义拼写检查，或者如果您有任何疑问，请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T20:45:35.860

您示例中的 URI 是 C: 驱动器上文件夹的磁盘路径。如果您想访问作为资源嵌入到应用程序中的 lex 文件，您需要使用“ [Pack URI](http://msdn.microsoft.com/en-us/library/aa970069.aspx) ”。

有关用于加载自定义字典的 Pack URI 的示例，请参阅[您已链接到的文章：](http://msdn.microsoft.com/en-us/library/system.windows.controls.spellcheck.customdictionaries.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-4)

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    IList dictionaries = SpellCheck.GetCustomDictionaries(richTextBox1);

    // customwords2.lex is included as a resource file
    dictionaries.Add(new Uri(@"pack://application:,,,/WPFCustomDictionary;component/customwords2.lex"));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-28T13:59:48.013

在我的情况下，通过将我的 custom.lex 文件上的**构建操作***从无*更改为*资源来解决问题*

[![在此处输入图像描述](../Images/09d0fd3c2800b6aec7f873b8b9b039de.png)](https://i.stack.imgur.com/1Eqwe.png)

# ruby-on-rails - 在没有控制器的模型中是否有必要的质量分配保护？

> ID：14840315
> 
> 赞同：0
> 
> 时间：2013-02-12T19:33:08.077
> 
> 标签：ruby-on-rails, facebook, facebook-oauth, rails-activerecord, mass-assignment

我有一个这样的模型：

```
class Page < ActiveRecord::Base
  attr_accessible :page_id, :name, :page_url, :username
end 
```

并且它没有相关的控制器，但在另一个控制器中我正在执行此代码：

```
fgraph  = Koala::Facebook::API.new(ftoken)

@pages = fgraph.fql_query("select XXX from pages where xxx")

@pages.each do |p|

    newpage = Page.find_or_initialize_by_page_id("#{p["page_id"]}")
    newpage.update_attributes(
      name: p["name"],
      username: p["username"],
      page_url: p["page_url"]
      )
end 
```

最后一行用 facebook 数据更新了我的模型的数据。我认为不可能用质量分配进行攻击，因为我已经获得了动作方法中的信息，但我真的很喜欢使用rails，我想确认我的假设是否属实。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:04:00.870

是的。确实，白名单属性**可以**从其他任何地方通过批量分配进行更新。

`update_attributes`是一个 rails 方法，它接受 attr-value 对的哈希并尝试将其应用于对象并保存。`save`返回成功前，全部`model validations`运行，看是否可以执行保存操作。

由于在您的情况下，更新针对的是列入白名单的字段，因此您的方法运行良好。在您的方法尝试更新任何其他属性的那一天，例如`date_of_birth`，该方法将失败，说`date_of_birth`无法大规模更新。

为了数据的安全，您最好在写入时或读取时使用[rails-sanitizers 。](http://api.rubyonrails.org/classes/HTML/Sanitizer.html)这将确保

1.  呈现的数据可读且不难看（某些用户输入往往如此）
2.  表中的数据是 html 安全的
3.  不会导致任何类型的[代码注入](http://en.wikipedia.org/wiki/Code_injection)。

# conditional-statements - 在某些条件下阅读序列图

> ID：14840317
> 
> 赞同：2
> 
> 时间：2013-02-12T19:33:13.637
> 
> 标签：conditional-statements, uml, specifications, sequence-diagram

我有以下序列图，它由交换一组消息的四个生命线组成。

我的问题是：

我如何阅读此图中红色矩形包围的内容？

![在此处输入图像描述](../Images/4d1cf14c38ed1aa6495f42414bbf6d14.png)

这是我的尝试：

第一个是：“t=0”

据我所知，这是一个时间观察，但我真的不确定，因为当我通读 UML 参考手册（2004）时，时间观察的语义是获取当前时间并且具有语法“t = now”，这里 t 分配给零？

第二个是条件“t<=500 ms”

这是否意味着这个条件应该为真才能调用 write(record) 消息？以及此消息上方的条件（t <= 50 ms）这意味着什么？

你能澄清每一个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:49:39.677

首先，我不确定 UML 规范是否定义了如何“阅读”您的图表。下面是我的阅读方式。第一个“t = 0”对我来说指定时间原点，即从这一点开始时间。关于第二个（“t <= 500 ms”），它是一个约束，表示必须在“t=0”时刻之后最多 500 ms 调用 write(record) 消息这一事实。这是您的建模系统的一个约束，您不知道在 500 毫秒截止日期之后是否调用它会发生什么，因为情况**并非**如此。希望它有所帮助。

# ios6 - UIViewControllers - View1、View2、View3依次显示

> ID：14840318
> 
> 赞同：0
> 
> 时间：2013-02-12T19:33:22.557
> 
> 标签：ios6

我需要连续显示三个 UIViewController。UIViewController1 是我的主视图控制器，有一个按钮。单击该按钮以模态方式显示 UIViewController2。30 秒后，UIViewController3 自动模态显示。我是否必须先关闭 UIViewcontroller2 然后显示 UIViewController3？我在 UIViewcontroller3 上有一个完成按钮，单击它应该带我回到 UIViewController1（主视图控制器）。我是否首先从链中解除 UIViewController2，然后在 UIViewController1 上执行 alloc/init 以显示它？我不想在这个过程中出现任何内存泄漏。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:28:36.953

有两种主要方法可以做到这一点，其中一种，你已经提到过。在 XCode 中测试了这个场景之后。

第一个涉及从最终视图控制器（第三个）中解散所有模态视图控制器。通过这样做，您**不能**使用动画来关闭视图控制器。如果您尝试为它们设置动画，第二个将不会被解雇。（*当然，您可以用动画关闭第二个，但它会显示从第二个到第一个的动画，而不是从第三个到第一个的动画*）

为此，您需要将您的第二个视图控制器作为属性传递给您的第三个视图控制器，以便您可以调用该行：

```
[[self parentVC] dismissModalViewControllerAnimated:NO]; 
```

*注意 parentVC 是一个属性，应该设置为指向第二个视图控制器*

然后在解雇时：

```
[self dismissModalViewControllerAnimated:NO];
[[self parentVC] dismissModalViewControllerAnimated:NO]; 
```

这将带您回到第一个视图控制器。

第二个，这并不是真正的好坏，但可能更容易编码，是在进入第三个之前关闭第二个视图控制器；同样，您可能不想在从第二个到第三个的过渡之间为视图控制器设置动画，但是您**可以**从**第三个到第一个**动画。

# c# - 如果绑定给出空字符串，则擦除 DataGrid 列中的 TextBlock

> ID：14840322
> 
> 赞同：0
> 
> 时间：2013-02-12T19:33:34.950
> 
> 标签：c#, wpf, datagrid

我有一个自定义列：

```
 <DataGridTemplateColumn Width="*" Header="Name">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <StackPanel>
                            <TextBlock Text="{Binding DisplayName}" />
                            <TextBlock Foreground="Gray" Text="{Binding PrivateMessage}" />
                        </StackPanel>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn> 
```

我想让 TextBlock {Binding PrivateMessage} 消失，如果它被赋予一个空字符串“”，这样 DisplayName 就在中间而不是在它上面。

这在 WPF 中可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:47:31.943

```
<DataTemplate>
    <StackPanel VerticalAlignment="Center">
        <TextBlock Text="{Binding DisplayName}" />
        <TextBlock x:Name="message" Foreground="Gray" Text="{Binding PrivateMessage}" />
    </StackPanel>
    <DataTemplate.Triggers>
        <DataTrigger Binding="{Binding PrivateMessage}" Value="{x:Static system:String.Empty}">
            <Setter TargetName="message" Property="Visibility" Value="Collapsed" />
        </DataTrigger>
    </DataTemplate.Triggers>
</DataTemplate> 
```

# java - 比较列表中同一对象的两个实例

> ID：14840323
> 
> 赞同：1
> 
> 时间：2013-02-12T19:33:36.833
> 
> 标签：java, list

我正在尝试比较两个对象以查看它们是否相同。我从 JSON 代码创建第一个列表，并使用 InstructionModel 的实例填充列表（数据）。然后，我通过选择数据并创建 InstructionModel 的新实例（模型）来将数据与数据库进行比较。但结果总是错误的，我的代码做错了什么？

```
exists = data.contains(model);

if(!exists)
{
    //Do Some Stuff Here
} 
```

来自 a 的数据`List<InstructionModel>`： ![在此处输入图像描述](../Images/1d97ed0fcdcbf1d3eea692da00408b0b.png) InstructionModel 对象中的数据： ![在此处输入图像描述](../Images/0d45237b37e509fd401abe42590ca008.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T19:36:34.853

您需要覆盖 InstructionModel 类的 equals 方法。在此方法中，您比较您的值，如果匹配则返回 true，否则返回 false。

该[`List#contains`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#contains%28java.lang.Object%29)函数将使用`Object#equals`容器中对象的函数。如果未覆盖此函数，它将仅比较引用，而不是实际值。

另外：正如评论所提到的，如果您覆盖“equals”方法，那么您也需要覆盖“hashCode”方法（反之亦然）。集合将使用这些方法来比较您的对象实例。例如：如果您不覆盖两者，则两个实例在 List 中可能被视为相同，但在['Hashmap'](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)中可能不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T19:37:14.620

您可能想覆盖上的`equals`方法`InstructionModel`。

# image - 在matlab中找到感兴趣对象的总像素？

> ID：14840327
> 
> 赞同：2
> 
> 时间：2013-02-12T19:33:45.087
> 
> 标签：image, matlab, image-processing

我想找到图像中对象的总像素数。

以下图为例。我想找到三角形中的像素总数。

![在此处输入图像描述](../Images/8a24ce4b6cd6bb9e25d3a04c7bf72438.png)

我在用

```
imtool('test.jpg'); 
```

并使用该`measure distance`工具手动查找距离，从而找到三角形的面积来计算对象的总像素，在这种情况下是三角形。

有没有一种有效的方法呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T19:53:59.057

这是一个方法：

```
img = imread('test.jpg');
thr = graythresh(img);
thr_img = im2bw(img,thr);
triangle_count = sum(sum(thr_img < thr)) 
```

1.  选择图像的阈值
2.  根据这个阈值对图像进行二值化
3.  计算二值化图像中低于此阈值的像素数

在您的情况下，三角形中的像素数似乎约为 1605037。

这是二值化图像的可视`thr_img`化：

![二值化图像](../Images/01addf2e2a37c3e7cdbe4de515e48a04.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:43:52.230

将图像二值化，然后使用`bwconvhull`. [文档有一个很好](http://www.mathworks.com/help/images/ref/bwconvhull.html)[的`bwconvhull`](http://www.mathworks.com/help/images/ref/bwconvhull.html)例子来说明如何做到这一点。

# php - MySQL - 从序列化数组执行 JOIN？

> ID：14840329
> 
> 赞同：0
> 
> 时间：2013-02-12T19:33:55.890
> 
> 标签：php, mysql, arrays, serialization, join

我正在使用 PHP 和 MySQL 创建一个简单的购物车脚本，但我无法找出执行此查询的最快和最有效的方法。

我有一个名为的表`carts`和一个名为 的表`products`。该`carts`表有一个名为的列`contents`，其中包含一个序列化的项目编号数组。这些项目编号对应于 的`pid`列`products`。

我要做的是有一个查询来提取数据数组并将数组的内容与其对应的行匹配，`products`这样我就可以回显出该产品的所有匹配数据。

```
CREATE TABLE `carts` (
    `cart_id` INT(10) NOT NULL AUTO_INCREMENT,
    `session_id` VARCHAR(50) NULL DEFAULT NULL,
    `contents` LONGTEXT NULL,
    `first_name` VARCHAR(50) NULL DEFAULT NULL,
    `last_name` VARCHAR(50) NULL DEFAULT NULL,
    `address` VARCHAR(100) NULL DEFAULT NULL,
    `city` VARCHAR(100) NULL DEFAULT NULL,
    `state` VARCHAR(100) NULL DEFAULT NULL,
    `postal` VARCHAR(20) NULL DEFAULT NULL,
    `country` VARCHAR(20) NULL DEFAULT NULL,
    PRIMARY KEY (`cart_id`),
    UNIQUE INDEX `session_id` (`session_id`)
)
COLLATE='utf8_general_ci'
ENGINE=MyISAM
AUTO_INCREMENT=7;

CREATE TABLE `products` (
    `pid` INT(4) NOT NULL AUTO_INCREMENT,
    `itemTitle` VARCHAR(100) NOT NULL,
    `itemNumber` VARCHAR(10) NOT NULL,
    `itemDescription` LONGTEXT NOT NULL,
    `imgArray` LONGTEXT NOT NULL,
    `visibility` TINYINT(1) NOT NULL,
    `availability` TINYINT(1) NOT NULL,
    `itemPrice` DECIMAL(8,2) NOT NULL,
    `accentColor` VARCHAR(11) NOT NULL,
    PRIMARY KEY (`pid`)
)
COLLATE='latin1_swedish_ci'
ENGINE=MyISAM
AUTO_INCREMENT=143; 
```

示例序列化数组：`a:6:{i:0;s:3:"115";i:2;s:2:"82";i:4;s:2:"79";i:5;s:2:"58";i:6;s:2:"38";i:7;s:2:"85";}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:38:37.603

虽然在技术上可能是可行的，但您不应该尝试`JOIN`在序列化列上。最快的方法是在购物车和产品之间使用桥接表。修改代码以处理桥表中的行而不是单个序列化字段应该不难。

# asp.net - Ajax 回调不更新标签

> ID：14840343
> 
> 赞同：0
> 
> 时间：2013-02-12T19:35:17.310
> 
> 标签：asp.net, jquery, repeater

我正在异步使用以下`$.get`方法调用页面。`AjaxCallHandler.aspx`

```
 $.get("AjaxCallHandler.aspx?tc_id=" + tc_id, function (response) {
            //get All lblStatus
            var sel = "span[tc_id=" + tc_id + "]";
            //alert($(sel).text() + "  " + response);
            $(sel).text(response);
        }); 
```

AjaxCallHandler页面基于**.**`tc_id is even or odd`

```
public partial class AjaxCallHandler : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        var str = Request.QueryString["tc_id"] != null ? Request.QueryString["tc_id"] as string : string.Empty;
        int tc_id;
        if (int.TryParse(str, out tc_id))
        {
            Response.Clear();            //clears the existing HTML
            Response.ContentType = "text/plain";  //change content type
            if (tc_id % 2 == 0)
                Response.Write("Pass");    //writes out the new name 
            else
                Response.Write("Fail");
            Response.End();             //end
        }
    }
} 
```

我只是将响应绑定到带有自定义属性的 Asp.Net labell（放置在中继器内）`tc_id`，labelStatus 没有更新。

`$(sel).text(response);`请注意，我看到在 Chrome 控制台上执行时值正在更新 。

我尝试禁用转发器的 ViewState 以及`lblStatus`，但这也无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:22:59.393

我会将处理响应的代码移动到[ashx 文件（通用处理程序）](http://www.codeproject.com/Articles/353260/ASP-NET-Advanced-Generic-Handler-ASHX)

但是你说你正确地得到了响应，你什么时候准确地调用这个？页面加载后像这样？

```
 $(function () {
       $.get("AjaxCallHandler.aspx?tc_id=" + tc_id, function (response) {
                //get All lblStatus
                var sel = "span[tc_id=" + tc_id + "]";
                //alert($(sel).text() + "  " + response);
                $(sel).text(response);
            });
    }); 
```

# ruby-on-rails - has_many：通过关联错误'找不到源关联'

> ID：14840344
> 
> 赞同：2
> 
> 时间：2013-02-12T19:35:20.730
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有三个模型：user、guideline 和 favourite_guideline（目的是用户可以创建自己喜欢的指南列表）。

尝试添加收藏夹时出现关联错误

> ActiveRecord::HasManyThroughSourceAssociationNotFoundError in GuidelinesController#favourite 在模型 FavouriteGuideline 中找不到源关联 :favourite 或 :favourites。试试 'has_many :favourites, :through => :favourite_guidelines, :source => '。它是 :guideline 还是 :user 之一？

```
 class User < ActiveRecord::Base

      has_many :guidelines
      has_many :favourite_guidelines
      has_many :favourites, through: :favourite_guidelines

    end

    class Guideline < ActiveRecord::Base

      belongs_to :user
      has_many :favourite_recipes
      has_many :favourited_by, through: :favourite_recipes, source: :user

    end

    class FavouriteGuideline < ActiveRecord::Base

      belongs_to :guideline
      belongs_to :user

    end 
```

指南控制器中我最喜欢的操作是：

```
def favourite
    type = params[:type]
    if type == "favourite"
      current_user.favourites << @guideline
      redirect_to :back, notice: 'You favourited #{@guideline.name}'

    elsif type == "unfavourite"
      current_user.favourites.delete(@guideline)
      redirect_to :back, notice: 'Unfavourited #{@guideline.name}'

    else
      # Type missing, nothing happens
      redirect_to :back, notice: 'Nothing happened.'
    end
  end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T23:24:08.073

好的，

> 试试 'has_many :favourites, :through => :favourite_guidelines, :source => '。它是 :guideline 还是 :user 之一？

它是：指南。

```
has_many :favourites, through: :favourite_guidelines, source: :guideline 
```

> :source 指定 has_many :through 查询使用的源关联名称。仅当无法从关联中推断名称时才使用它。has_many :subscribers, :through => :subscriptions 将在 Subscription 上查找 :subscribers 或 :subscriber ，除非给出 :source 。

来自[文档](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html):)

# c# - 在自动生成的属性中实例化对象

> ID：14840345
> 
> 赞同：3
> 
> 时间：2013-02-12T19:35:23.210
> 
> 标签：c#

有没有办法自动实例化一个对象而不在构造函数中实例化它？

实际上，我有类似的东西：

```
public List<Object> Products { get; set; }
public MyClass()
{
    this.Products = new List<Object>();
} 
```

但是，相反，我想直接实例化我的列表，而不用在我的类的构造函数中指定类似的内容：

```
public List<Object> Products = new List<Object>(); { get; set; } 
```

有什么技巧可以做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T19:37:30.977

我想您是在问是否可以为自动实现的属性赋予初始值。这个问题的答案是“不”。

您*可以*编写手动属性：

```
private List<Product> products = new List<Product>();

public List<Product> Products
{
    get { return products; }
    set { this.products = value; }
} 
```

你真的需要二传手吗？您是否需要客户端能够用另一个列表*替换*变量值？您可能会发现您只需要一个只读属性，在这种情况下您可以编写：

```
private readonly List<Product> products = new List<Product>();

public IList<Product> Products { get { return products; } } 
```

请注意，在这里您仍然可以使用集合初始化程序，例如

```
Foo foo = new Foo
{
    Products = { new Product("foo"), new Product("bar") }
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T19:37:18.503

正如乔恩斯基特所说：

> 不幸的是，现在没有办法做到这一点。您必须在构造函数中设置值。（使用构造函数链接有助于避免重复。）
> 
> 自动实现的属性现在很方便，但肯定会更好。我发现自己并不希望像只读自动实现的属性那样频繁地进行这种初始化，该属性只能在构造函数中设置并且由只读字段支持。有可能这两个都将在 C# 5 中得到修复，我强烈希望这将解决不变性问题。（我认为它们中的任何一个都没有计划用于 C# 4。）

来源：[初始化 C# 自动属性](https://stackoverflow.com/questions/169220/initializing-c-sharp-auto-properties)

* * *

如果需要初始化`property` `without using the constructor`，则需要使用`backing field`.

例子

```
class Demo
{
    private List<object> myProperty = new List<object>();
    public List<object> MyProperty
    {
        get { return myProperty; }
        set { myProperty = value; }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T19:37:08.423

在 C# 中，目前没有自动生成的属性（尽管 VB.NET 自动属性可以做到这一点）。这是我经常为自己所希望的。所以你可以手动滚动你自己的属性，或者使用构造函数。

无论哪种方式，您都会有一些您希望不必编写的代码来执行此操作（没有构造函数的手动属性与具有构造函数的自动属性）。

不过，有趣的是，这两个选项之间的 IL 是不同的。当您有一个带有使用初始化器的支持字段的手动属性时，它将在 C# 中的基类构造函数之前执行：

```
MyClass..ctor:
IL_0000:  ldarg.0     
IL_0001:  newobj      System.Collections.Generic.List<System.Object>..ctor
IL_0006:  stfld       UserQuery+MyClass._products
IL_000B:  ldarg.0     
IL_000C:  call        System.Object..ctor
IL_0011:  nop         
IL_0012:  ret 
```

在构造函数中使用带有初始化的自动属性时，将在 C# 中的基类构造函数之后执行：

```
MyClass..ctor:
IL_0000:  ldarg.0     
IL_0001:  call        System.Object..ctor
IL_0006:  nop         
IL_0007:  nop         
IL_0008:  ldarg.0     
IL_0009:  newobj      System.Collections.Generic.List<System.Object>..ctor
IL_000E:  call        UserQuery+MyClass.set_Products
IL_0013:  nop         
IL_0014:  nop         
IL_0015:  ret 
```

我只是出于好奇而这么说，因为在 .NET 中编写依赖于初始化顺序的代码可能是有风险的（初始化顺序实际上在 VB.NET 和 C# 之间有所不同）

# xamarin.ios - monotouch 资产库方向

> ID：14840347
> 
> 赞同：2
> 
> 时间：2013-02-12T19:35:26.430
> 
> 标签：xamarin.ios, orientation, alassetslibrary

我有一个应用程序，允许用户从资产库中选择多个图像。我遇到的问题是，当我将图像从资产库“复制”到应用程序库中的目录时，没有存储方向元数据。结果是图像有时是颠倒的等等......

下面是来自单元测试的代码。我已将代码简化并移到单独的行中，以便于调试。

这有效，但不复制元数据：

```
private void getAssetFromURL(ALAsset asset) 
{
    NSError fileError;

    ALAssetRepresentation rep = asset.DefaultRepresentation;

    CGImage cgi = rep.GetImage();
    UIImage img = UIImage.FromImage(cgi);
    NSData jpegData = img.AsJPEG();
    jpegData.Save(pathToSave,true,out fileError);
} 
```

如果我更改代码以包含方向，则会收到对象引用错误。jpegData 为空，当我在调试中查看 UIImage 上的 CGImage 数据时，我注意到它为空。我确实注意到方向确实正确传递给了 UIImage 。

```
private void getAssetFromURL(ALAsset asset) 
{
    NSError fileError;

    ALAssetRepresentation rep = asset.DefaultRepresentation;

    UIImageOrientation orientation = UIImageOrientation.Up;
    if (rep.Orientation != null && rep.Orientation != ALAssetOrientation.Up)
        orientation = (UIImageOrientation)rep.Orientation;

    CGImage cgi = rep.GetImage();
    UIImage img = UIImage.FromImage(cgi,rep.Scale,orientation);
    NSData jpegData = img.AsJPEG();  //data is null
    jpegData.Save(pathToSave,true,out fileError);  //throws object reference error
} 
```

我究竟做错了什么？有没有一种简单的方法，无需旋转图像即可将方向传递给 JPEG？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T06:50:24.753

你为什么不尝试做以下事情，我从来没有遇到过这样的方向问题。

```
UIImageOrientation orientation = UIImageOrientation.Up;
ALAssetRepresentation assetRep = asset.DefaultRepresentation;
CGImage imgRef = assetRep.GetFullScreenImage ();
orientation = (UIImageOrientation)assetRep.Orientation;
UIImage Image = new UIImage(imgRef,1.0f,orientation);

using (NSData imageData = img.AsJPEG()) 
{
     Byte[] myByteArray = new Byte[imageData.Length];
     System.Runtime.InteropServices.Marshal.Copy(imageData.Bytes, myByteArray, 0, Convert.ToInt32(imageData.Length));
     string pathToSave = ""; //Assign your path
     if(!File.Exists(pathToSave))
     {
     File.WriteAllBytes (pathToSave, myByteArray);
     }
} 
```

还有一件事，我认为如果您使用assetRep.GetFullScreenImage () 而不是assetRep.GetImage () 将解决您的问题。

希望能帮助到你。

# vb.net - 删除 vb .NET 中的最后一个字符（空行）

> ID：14840349
> 
> 赞同：0
> 
> 时间：2013-02-12T19:35:36.837
> 
> 标签：vb.net, newline, filestream

我必须在 vb .NET 中以编程方式删除文件的最后一个空行。有时，只有一个空行，有时是两个（但永远不会更多）。

我现在使用这些代码行：

```
fs = New FileStream(Fic_source, FileMode.Open, FileAccess.ReadWrite)
fs.Seek(-50, SeekOrigin.End)
Dim strEOF As String = New StreamReader(fs).ReadToEnd()
strEOF = strEOF .Replace(vbCrLf, "")  ' 
strEOF = strEOF .Replace("\r", "")    ' Removes every CR / LF / CRLF from the end of the file
strEOF = strEOF .Replace("\n", "")    '
strEOF = String.Concat(strEOF , vbCrLf) ' adds an empty line to finish the file correctly 
```

但我似乎无法弄清楚如何将我的流中的最后 50 个字符替换为 strEOF，有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:40:24.687

如果是我，我会考虑更改文件的长度 - 在文件流上尝试 SetLength。冲洗并关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T20:03:20.867

由于您已将流中的数据转换为字符串，因此使用正则表达式来匹配和替换多个 CRLF 的可能性。正则表达式处理器的一个细微差别是您可以告诉它从右到左工作。因此从最后开始。

以下模式将从末尾 ($) 开始，并仅用一个 CRLF 替换任何 CRLF（最多两组，或四个字符为 \r\n）。如果没有，那么即使它与任何字符集都不匹配，它也会在最后*替换（实际上放入）一个。*

```
dim data = string.Format("ABC{0}DEF{0}{0}", Environment.NewLine) ' 2 CRLF
dim pattern = "[\r\n]{0,4}$"

Console.WriteLine( "***{0}***", Regex.Replace( data, pattern, Environment.NewLine, RegexOptions.RightToLeft) )

data = string.Format("ABC{0}DEF", Environment.NewLine) ' No CRLFS

Console.WriteLine( "***{0}***", Regex.Replace( data, pattern, Environment.NewLine, RegexOptions.RightToLeft) )

' Console Results (note that *** is following each DEF
'***ABC
'DEF
'***
'***ABC
'DEF
'*** 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T20:19:03.537

你想从你拥有的文本的末尾修剪 CR 和 LF，所以你不妨使用 .TrimEnd：

```
strEOF = strEOF.TrimEnd(vbCrLf.ToArray) & vbCrLf 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-10T13:40:04.700

```
Dim objWriter As New StreamWriter(FileNamewithPath, True)
objWriter.NewLine = Chr(10) 'This works as ENTER on keyboard. This is optional.
objWriter.WriteLine("The text that is required to write")
'Loop it to get all the values you need to write.
'Before the last line. i.e. before your end loop - 1 step
objWriter.NewLine = "" 'add this
objWriter.WriteLine("last line to be written").
objWriter.Close() 
```

# php - 从多个页面中选择

> ID：14840351
> 
> 赞同：0
> 
> 时间：2013-02-12T19:35:40.650
> 
> 标签：php

我的网站上有一个“编辑页面”部分来编辑页面，但是它只编辑一个页面，我希望它编辑一些（显示该目录中所有 .html 文件的选项菜单）

这是我的代码： http: [//newfoundfaggot.net/cms/code.tx](http://newfoundfaggot.net/cms/code.tx) 抱歉，它不在实际的“问题”上，但是我找不到如何发布 PHP 代码。

任何帮助不胜感激..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:40:49.213

`$filename`可以简单地是一个数组而不是一个字符串，然后您可以遍历该数组中的每个文件并在每个文件上执行相同的功能。

所以像：

```
$filenames = array('index.php', 'another.php');

foreach($filenames as $filename) {
   // Do what you're already doing here..
} 
```

当然，您必须意识到让您的用户在您的服务器上生成自己的 PHP 文件的安全隐患！

# c# - 条码阅读器和打印机问题

> ID：14840352
> 
> 赞同：0
> 
> 时间：2013-02-12T19:35:44.923
> 
> 标签：c#, barcode

我想知道是否有人在这里遇到过这个问题：

我正在向打印机发送一个特定的字符串，例如：`123456789`

它打印有关该字符串的条形码，尽管我总是需要使用该字符串，否则阅读器不会准确读取我发送的内容。

所以我发送：`123456789`

读者读到：`0123456780`

有什么方法可以将数据发送到打印机而无需更改条形码的格式？

发送`123456789`到打印机，将其视为条形码，然后从阅读器中扫描。

我有点困惑。希望其他人遇到过同样的问题并理解我在说什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:35:18.823

如果您知道正在打印/扫描的条形码格式会容易得多。有不同的类型，其中大多数具有固定的格式。

如果您知道这一点，您可能能够配置阅读器或打印机，或者至少您会知道*为什么*以及*如何*更改条形码格式，而不是“不得不玩它”。

您可能遇到的一种可能情况是[UPC-A 条码可以存储为 EAN13 条码](http://www.nationwidebarcode.com/are-upc-a-and-ean-13-the-same/)；EAN13 包含 13 位数字，而 UPC-A 包含 12 位数字——但这只是现在的猜测。

# c# - 插入查询总是返回 false

> ID：14840359
> 
> 赞同：-1
> 
> 时间：2013-02-12T19:36:17.697
> 
> 标签：c#, asp.net, sql

我正在尝试在上传文件中注入值。我是 C# .net 的新手，我在 Google 上搜索了很多以找到答案，但找不到任何可以为我提供所需帮助的答案。我从数据库中获取值没有问题，但是当我尝试插入它时，它总是返回 false。我不知道还能做什么。

我在每一行 nr 上都使用了断点，但我真的需要帮助。

正如我所说，从数据库中获取值没有问题，所以我已连接但插入总是返回 false。也许这个问题对你们大师来说更清楚:)

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Data.SqlClient;
using System.Xml;
using System.Xml.Linq;
using System.IO;

public partial class Extra : System.Web.UI.Page
{

    public int count = 0;

    protected void Page_Load(object sender, EventArgs e)
    {
        Label1.Text = "Hello choose a file to upload";
    }

    protected void Button1_Click(object sender, EventArgs e)
    {

        if (FileUpload1.HasFile)
        {
            try
            {
                if (FileUpload1.PostedFile.ContentLength > 2000000)
                {
                    Label1.Text = "File is to big";
                }
                else
                {
                    FileUpload1.SaveAs("C:\\Uploads\\" + FileUpload1.FileName);
                    Label1.Text = "File name: " + FileUpload1.PostedFile.FileName + "<br />" +
                        FileUpload1.PostedFile.ContentLength + "kb<br />" +
                        FileUpload1.PostedFile.ContentType;

                    try
                    {
                        //open connection
                        SqlConnection con = new SqlConnection("Data Source='localhost';Initial Catalog=webDB;Trusted_Connection=true;Integrated Security=SSPI");
                        //con.Database = "";Data Source=JOHANNES-TOSH;Initial Catalog=webDB;Integrated Security=True
                        con.Open();

                        SqlCommand cmd = new SqlCommand();
                        cmd.Parameters.Add("@name", SqlDbType.NVarChar, 150);
                        cmd.Parameters["@name"].Value = FileUpload1.PostedFile.FileName;
                        cmd.Parameters.Add("@type", SqlDbType.NVarChar, 150);
                        cmd.Parameters["@type"].Value = FileUpload1.PostedFile.ContentType;
                        cmd.Parameters.Add("@size", SqlDbType.Int, 11);
                        cmd.Parameters["@size"].Value = FileUpload1.PostedFile.ContentLength;
                        cmd.CommandText = "INSERT INTO [CORE.uploads] (name, type, size) VALUES (@name, @type, @size)";
                        //cmd.CommandType = CommandType.TableDirect;
                        cmd.Connection = con;
                        cmd.ExecuteNonQuery();

                        con.Close();
                    }
                    catch (SqlException err) {
                        Response.Write("<br />");
                        Response.Write(err.Message.ToString());
                        Response.Write(err.LineNumber);
                    }
                }

            }
            catch (Exception ex)
            {
                Label1.Text = ex.Message.ToString();
            }
        }
        else 
        {
            Label1.Text = "You have not specified a file.";
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:15:52.157

您实际上不需要为这种情况指定参数类型的大小。试试这个方法。如果这不起作用，请检查您的表名和列名以确保它们相同。此外，请检查其余代码。希望这有帮助。

```
SqlCommand cmd = new SqlCommand();
cmd.Parameters.Add("@name", SqlDbType.NVarChar).Value = FileUpload1.PostedFile.FileName;
cmd.Parameters.Add("@type", SqlDbType.NVarChar).Value = FileUpload1.PostedFile.ContentType;
cmd.Parameters.Add("@size", SqlDbType.Int).Value = FileUpload1.PostedFile.ContentLength;
cmd.CommandText = "INSERT INTO [CORE].[uploads] (name, type, size) VALUES (@name, @type, @size)";
cmd.Connection = con;
cmd.ExecuteNonQuery(); 
```

编辑：另外，请确保您的连接字符串是好的。如果您打开带有数据库连接的窗口，您可以在数据库连接的属性中找到它（忘记该窗口的名称）

# solr - 在动态字段中搜索

> ID：14840360
> 
> 赞同：1
> 
> 时间：2013-02-12T19:36:23.090
> 
> 标签：solr, solrnet

我有两个动态字段，例如“Product -Name- * **” **和****“Product-Rating-* *”。一份文档可以包含 5 个产品和各自的评级，如下所示。

```
<str name="Product-Name-0">HTC Wildfire S</str>
<str name="Product-Name-1">Samsung Tab 2</str>
<str name="Product-Name-2">Samsung Note</str>
<str name="Product-Name-3">IPhone5</str>
<str name="Product-Name-4">Nokia Lumia 720</str>
<int name="Product-Rating-0">5</int>
<int name="Product-Rating-1">9</int>
<int name="Product-Rating-2">7</int>
<int name="Product-Rating-3">9</int>
<int name="Product-Rating-4">9</int> 
```

在我目前的情景中，我必须提升评级较高的产品（仅超过 6 分。注意评级将在 1 到 10 之间）。如果我想搜索一个特定的产品名称，例如“IPhone5”，那么我就是这样查询的

```
(Product-Name-0:IPhone5 AND (Product-Rating-0:7^3 OR Product-Rating-0:8^4 OR Product-Rating-0:9^5 OR Product-Rating-0:10^6)) OR 
(Product-Name-1:IPhone5 AND (Product-Rating-1:7^3 OR Product-Rating-1:8^4 OR Product-Rating-1:9^5 OR Product-Rating-1:10^6)) OR
(Product-Name-2:IPhone5 AND (Product-Rating-2:7^3 OR Product-Rating-2:8^4 OR Product-Rating-2:9^5 OR Product-Rating-2:10^6)) OR
(Product-Name-3:IPhone5 AND (Product-Rating-3:7^3 OR Product-Rating-3:8^4 OR Product-Rating-3:9^5 OR Product-Rating-3:10^6)) OR
(Product-Name-4:IPhone5 AND (Product-Rating-4:7^3 OR Product-Rating-4:8^4 OR Product-Rating-4:9^5 OR Product-Rating-4:10^6)) 
```

我本可以使用 Product-Name-*:IPhone5 来查找所有文件，但问题是我不知道如何根据其各自的 Product Rating 来提升该产品。

无论我是否遵循正确的方法，任何人都可以指导我吗？

或者有没有其他方法可以实现这一目标？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:11:07.007

我认为您的架构设计本身存在问题，为什么单个文档中有多个名称和评级。理想情况下，每个名称都应该是具有自己评级的单独文档，这样您就可以使用评级值本身的某些功能来提升它。

# css - CSS相邻选择器不起作用

> ID：14840361
> 
> 赞同：1
> 
> 时间：2013-02-12T19:36:28.163
> 
> 标签：css, css-selectors, operators

我希望创建一个 CSS 相邻选择器，它执行以下操作：

选择标签中包含的标签`<ul>`前面的所有无序列表。`strong``p`

因此，如果我有以下 HTML 结构：

```
<p><strong>Headline</strong></p>
<ul>
    <li>list item</li>
</ul> 
```

我希望这会像这样工作：`p strong + ul{}`

但事实并非如此。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T19:38:30.453

`ul`是 的兄弟，而`p`不是`strong`：

```
 p   + ul
strong | li 
```

这就是为什么您的选择器不起作用的原因。

这里的问题是你不能使用 CSS 来选择 a`p`只有当它有 a`strong`时，这使得使用纯 CSS 选择器是不可能的。（在有人问之前，选择器 4 中的主题选择器可能也不可能。）

您需要找到另一种方法，例如给出`p`适当的类名，或者使用 JavaScript 来遍历 DOM。

# php - 如何计算 wget 请求的数量？

> ID：14840362
> 
> 赞同：0
> 
> 时间：2013-02-12T19:36:33.620
> 
> 标签：php, wget

有没有办法计算linux管理员`wget`对我的多个文件执行了多少次？

还是我必须生成一个特殊的`.sh`脚本来连接到数据库并手动更新数据库记录？

# ruby-on-rails - Rails 路由和通过关联限制身份验证

> ID：14840368
> 
> 赞同：0
> 
> 时间：2013-02-12T19:36:53.520
> 
> 标签：ruby-on-rails, routes

我有一组范围资源。

```
scope '/:org_name', :as => 'organization' do
  resources :users
end 
```

一个组织有很多用户。

我想要的是我的路线看起来像这样：

```
http://www.mysite.com/<organization-name>/users/1 
```

这目前工作正常。

问题是我可以将“组织名称”部分更改为我想要的任何内容，并且不会影响任何内容。如果我把任何字符串放在那里，我仍然被认证为那个用户。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:55:31.253

正如 Deefour 提到的，您将需要手动执行此操作。你在这里解释的问题是授权而不是身份验证，看看像[CanCan这样的 gem](https://github.com/ryanb/cancan)

用一个例子来解释它。您必须确保用户是给定组织的成员。这可能看起来像这样（假设您有一个代表登录用户的 current_user）：

控制器：

```
class UsersController < ApplicationController
  before_filter :find_organization, :ensure_organization_membership, :only => :show

  def show
    @user = @organization.users.find(params[:id])
  end

  def find_organization
    @organization = Organization.find_by_name(params[:org_name])
  end

  def ensure_organization_membership
    # Make sure the current_user(Logged in user) is a member of the company before showing the user profile
    @organization.include(:users).member_of?(current_user)
  end
end 
```

并且在模型中

```
class Organization
....
  def member_of?(user)
    users.includes?(user)
  end
...
end 
```

希望有帮助。

# python - Python - 比较文件中的字符串

> ID：14840369
> 
> 赞同：1
> 
> 时间：2013-02-12T19:36:53.847
> 
> 标签：python, string, file

我只是在学习 Python 以在 Inkscape 中进行扩展，并且在比较从文件中加载的字符串时遇到了问题。我要做的是加载我在文本文件中定义的多边形：

```
 polygon
    r:255
    g:0
    b:0
    50;50
    50;100
    100;50 
```

我的解析方法是这样的：

```
 def load_file(filepath, parent, log):
        file = open(filepath)
        x = []
        y = []
        r = 0
        g = 0
        b = 0
        index = 0

        for line in file:
            fline = line.lstrip("\xef\xbb\xbf").rstrip("\n")
            log.write("Input string: " + repr(line) + "\n")
            log.write("Formatted: " + repr(fline) + "\n")
            if fline == "":
                continue
            elif fline is "polygon": ## Where the first line should be going
                log.write("\tDetected string as polygon start delimiter\n")
                if index > 0:
                    draw_shape(x, y, r, g, b, "Polygon", parent)
                    del x[0, len(x)]
                    del y[0, len(y)]
                    r = g = b = index = 0
                continue
            elif fline[:2] is "r:":
                log.write("\tDetected string as polygon red value delimiter\n")
                r = int(fline[2:])
                continue
            elif fline[:2] is "g:":
                log.write("\tDetected string as polygon green value delimiter\n")
                g = int(fline[2:])
                continue
            elif fline[:2] is "b:":
                log.write("\tDetected string as polygon blue value delimiter\n")
                b = int(fline[2:])
                continue
            else: ## Where the first line actually is going
                log.write("\tDelimiter failed previous detections; assumed to be polygon cordinates\n")
                spl = fline.split(";")
                x[index] = float(spl[0]) ## Error gets thrown here
                y[index] = float(spl[1])
                index += 1
                continue

        draw_shape(x, y, r, g, b, parent) 
```

这种方法在第一行就失败了。它不断看到“多边形”并进入最后一个 else 块，在那里它解析坐标。我一直保留的日志文件如下所示：

```
 Process Started
    Input string: '\xef\xbb\xbfpolygon\n'
    Formatted: 'polygon'
        Delimiter failed previous detections; assumed to be polygon coordinates 
```

我已经在 shell 中逐步完成了这个过程，在那里它说`line is "process"`是真的，所以我完全迷失了这里。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:06:56.243

1.  比较`fline is "polygon"`几乎总是错误的。改为使用`fline == "polygon"`。

2.  这与您的问题无关，但如果您使用正确的 Unicode 解码功能，而不是手动剥离字节顺序标记并将其余部分视为字节，您将更轻松地处理文本。我更喜欢`codecs.open(filename, encoding='utf-8-sig')`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T21:32:47.523

一旦你成功打开了 Unicode 文件，我认为这样的事情比你正在做的事情更容易：

```
elements='''polygon
r:255
g:0
b:0
50;50
50;100
100;50

polygon
r:155
g:22
b:55
55;60
66;100
120;150
155;167'''       

for element in re.split(r'^\s*\n',elements,flags=re.MULTILINE):
    if element.startswith('polygon'):
        el=element.splitlines()
        poly={k:v for k,v in [s.split(':') for s in el[1:4]]}
        x,y=zip(*[s.split(';') for s in el[4:]])
        poly.update({'x':x, 'y': y})
        print poly 
```

印刷：

```
{'y': ('50', '100', '50'), 'x': ('50', '50', '100'), 'r': '255', 'b': '0', 'g': '0'}
{'y': ('60', '100', '150', '167'), 'x': ('55', '66', '120', '155'), 'r': '155', 'b': '55', 'g': '22'} 
```

# solr - Solr Luke 需要 numTerms 才能返回文档计数

> ID：14840371
> 
> 赞同：0
> 
> 时间：2013-02-12T19:37:03.480
> 
> 标签：solr, lucene, luke

在 Solr 中使用 Luke，我想返回每个字段的文档总数，但它仅在我将 ?numTerms 设置为至少 1 时返回文档总数。这会显着减慢 Luke 请求，尤其是在使用值时填充自动完成下拉菜单。每个请求大约 1 秒对 5 秒。是否有另一种更快的方法来获取文档数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:25:30.800

我知道 Luke 在启动时会显示包含每个字段的文档数——为什么不看看 Luke 的来源？毕竟是开源的...

获得所有字段文档计数后，只需将它们缓存起来，就不必再次获取它们。

# java - 将 JSONArray 与包含列表的 bean 列表一起使用

> ID：14840383
> 
> 赞同：0
> 
> 时间：2013-02-12T19:37:33.907
> 
> 标签：java, json, javabeans, arrays, org.json

我正在尝试使用 json.org 的 JSONArray 对象构造函数将 Java bean 列表转换为 JSON 字符串。

这是豆：

```
package jackiesdogs.bean;

import java.util.*;

public class UploadLog {
    private String logDescription;
    private List<String> headings;
    private List<List<String>> log;

    public UploadLog(String logDescription, List<String> headings, List<List<String>> log) {
        this.logDescription = logDescription;
        this.headings = headings;
        this.log = log;
    }

    public String getLogDescription() {
        return logDescription;
    }

    public void setLogDescription(String logDescription) {
        this.logDescription = logDescription;
    }

    public List<String> getHeadings() {
        return headings;
    }

    public void setHeadings(List<String> headings) {
        this.headings = headings;
    }

    public List<List<String>> getLog() {
        return log;
    }

    public void setLog(List<List<String>> log) {
        this.log = log;
    }

} 
```

这是我用来将其转换为 JSON 的代码：

```
JSONArray outputJSON = new JSONArray(output,false); 
```

我希望得到以下信息：

```
[{"headings":[{"Vendor Order Id"}],"logDescription":"You are attempting to upload a duplicate order.","log":[{[{"132709B"}]}]}] 
```

但相反，我得到：

```
[{"headings":[{"bytes":[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],"empty":false}],"logDescription":"You are attempting to upload a duplicate order.","log":[{}]}] 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:10:11.750

我只熟悉GSON，还是比较靠谱的。以下适用于 GSON。

```
import com.google.gson.Gson;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

public class PlayWithGson2 {
    public static void main(String[] args) throws IOException {
        PlayWithGson pwg = new PlayWithGson();

        List<String> headings = new ArrayList<String>();
        headings.add("Vendor Order Id");

        List<List<String>> log = new ArrayList<List<String>>();
        UploadLog ul = new UploadLog("headings", headings, log);

        Gson gson = new Gson();
        String toJson = gson.toJson(ul);
        System.out.println(toJson);
    }
} 
```

印刷：

```
{"logDescription":"headings","headings":["Vendor Order Id"],"log":[]} 
```

# c# - 如何在 Http Authorization Header 中转换和发送字符串？

> ID：14840388
> 
> 赞同：3
> 
> 时间：2013-02-12T19:37:48.527
> 
> 标签：c#, rest, asp.net-mvc-4

我正在开发一个 REST API。`HttpClient`客户端用服务器的公钥加密后，将其用户名和密码放在授权头中。用户名和密码总是由字母和数字组成，这意味着它可以用 ASCII 表示。

我正在使用此代码进行加密。

```
string encrypted = Encrypt (someText, crypto);

    public static string Encrypt (string plainText, RSACryptoServiceProvider crypto)
    {
        var plainData = GetBytes (plainText);
        var encryptedData = crypto.Encrypt (plainData, true);
        return GetString (encryptedData);
    }

    public static byte[] GetBytes (string str)
    {
        var bytes = new byte[str.Length * sizeof (char)];
        Buffer.BlockCopy (str.ToCharArray (), 0, bytes, 0, bytes.Length);
        return bytes;
    }

    public static string GetString (byte[] bytes)
    {
        var chars = new char[bytes.Length / sizeof (char)];
        Buffer.BlockCopy (bytes, 0, chars, 0, bytes.Length);
        return new string (chars);
    } 
```

问题是我在加密后得到这个字符串

> ꠨屰⭮⬎㔾䐛え멩戻덒ேꑰꑰ䵇᷹᷹᷶᷶虣虣ⱒ̿ⱒ̿ⱒ̿ঊࠎঊࠎঊࠎ飳枹飳枹飳枹쉦폩쉦폩쉦폩ᤫᤫᤫᤫ 뉋⭠夏旻浨፛᠏რ

我无法在授权标头中发送这些 Unicode 字符。有什么方法可以获取 ASCII 中的加密文本，以便可以轻松地通过 HttpClient 发送？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T19:39:38.697

您可以对其进行[base64](http://en.wikipedia.org/wiki/Base64)编码。Base64 编码生成的字符串适合通过支持 ASCII 字符串的传输方式发送。

```
public static string Encrypt (string plainText, RSACryptoServiceProvider crypto)
{
    var plainData = GetBytes (plainText);
    var encryptedData = crypto.Encrypt (plainData, true);
    return Convert.ToBase64String (encryptedData);
} 
```

顺便说一句，我会用 ; 替换您用于将字符串转换为字节数组的自定义 GetBytes 方法`Encoding.GetBytes`。这是这样做的内置和首选方法。例如：

```
var plainData = System.Text.Encoding.UTF8.GetBytes(plainText); 
```

# javascript - window.onload 包含图片

> ID：14840389
> 
> 赞同：4
> 
> 时间：2013-02-12T19:37:51.453
> 
> 标签：javascript, html, dom

是否`window.onlaod`包括图像加载？还是我必须为此使用另一个事件？

我想使用 ajax 调用来获取包含图像的 HTML 文档，但是我想在加载所有图像时显示这个文档。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T19:39:55.363

它确实包括所有网页资源的负载 - 更多信息在这里：[https ://developer.mozilla.org/en/docs/DOM/window.onload](https://developer.mozilla.org/en/docs/DOM/window.onload)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T19:43:41.167

是的，简而言之，它等待整个视觉内容聚集在一起，它将在所有图像、所有帧及其内容的加载完成后触发。

# css - 各种背景图片无法通过 Shopify 中的 CSS 样式表加载

> ID：14840390
> 
> 赞同：0
> 
> 时间：2013-02-12T19:37:53.780
> 
> 标签：css, background-image, shopify, liquid

我有一个非常奇怪的问题，我似乎无法弄清楚。

我有几张图像用作样式表中的背景图像`galleria-fullscreen.css.liquid`。出于某种原因，有些图像会加载，而有些则不会。它们都位于 Shopify 中的资产文件夹中，并且确实没有押韵或原因为什么其中一些正在加载而一些失败。

我尝试过使用以下内容：

```
background: url( {{'down.gif'}} );

background: url('down.gif');

background: url( {{'down.gif'}} | asset_url ); 
```

这些变化似乎都没有任何作用。

我认为最好的办法是查看 firebug 中的页面并亲自查看。

[https://fine-grain-2.myshopify.com/products/the-bowden-brown-cherry#](https://fine-grain-2.myshopify.com/products/the-bowden-brown-cherry#)

我将在下面发布相关代码。

这是与问题相关的CSS：

此图像加载：

```
.galleria-thumbnails-tab {
    opacity: .7;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=70)";
    filter: alpha(opacity=70);
    position: absolute;
    left: 50%;
    margin-left: -50px;
    top: 0;
    height: 16px;
    width: 100px;
    background: #DADAD2 url( {{'up.gif'}} ) no-repeat 50% 5px;
    cursor: pointer;
    -moz-border-radius-topleft: 4px;
    -moz-border-radius-topright: 4px;
    -webkit-border-top-right-radius: 4px;
    -webkit-border-top-left-radius: 4px;
} 
```

这些图像不加载：

```
.galleria-thumbnails-tab.open,
.galleria-thumbnails-tab.open:hover {
    background: url( {{'down.gif'}} );
    opacity: 1;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
    filter: alpha(opacity=100);
}

.galleria-image-nav-right,
.galleria-image-nav-left {
    width: 100px;
    right: 0;
    top: 0;
    height: 100%;
    background: url( "{{'arrow-right.png'}}" ) no-repeat 50% 50%;
    position: absolute;
    cursor: pointer;
    z-index: 2;
    display: none;
}
.galleria-image-nav-left {
    left: 0;
    right: auto;
    background-image: url( "{{'arrow-left.png'}}"  );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:31:07.077

我会仔细检查你的 css 的语法`backround-image`。确保它遵循 shopify 的正确模板语法。

仔细检查网络检查器中的网络选项卡。如果您有特定图像的 404，请仔细检查语法和路径以确保您正确加载图像。

**试试这个语法：**

看起来您丢失了`| asset_url`或没有将其放在双右括号内。

```
#selector {background:url({{ 'image.jpg' | asset_url }});} 
```

**有关 SHOPIFY LIQUID LAYOUT / CSS URL 格式的一些信息：**

[http://wiki.shopify.com/Asset_url](http://wiki.shopify.com/Asset_url)

[http://ecommerce.shopify.com/c/ecommerce-design/t/images-url-s-in-the-style-css-file-109049](http://ecommerce.shopify.com/c/ecommerce-design/t/images-url-s-in-the-style-css-file-109049)

[http://wiki.shopify.com/Liquid](http://wiki.shopify.com/Liquid)

# playframework - 播放框架中未解决的 postgresql 9.2 jar 依赖关系

> ID：14840392
> 
> 赞同：10
> 
> 时间：2013-02-12T19:37:56.067
> 
> 标签：playframework, playframework-2.0, dependency-management, postgresql-9.2

我正在使用带有播放框架 2.1 的 postgresql 9.2

我在这里下载了驱动程序： [http](http://jdbc.postgresql.org/download.html) ://jdbc.postgresql.org/download.html（JDBC4 Postgresql 驱动程序，版本 9.2-1002）

我的`project/Build.scala`文件如下：

```
import sbt._
import Keys._
import play.Project._

object ApplicationBuild extends Build {

  val appName = "myApp"
  val appVersion = "0.1"

  val appDependencies = Seq(
    "postgresql" % "postgresql" % "9.2-1002.jdbc4")

  val main = play.Project(appName, appVersion, appDependencies)
} 
```

我已将 jdbc 驱动程序放置在播放目录结构中的以下位置：

```
myApp/lib/postgresql-9.2-1002.jdbc4.jar
myApp/lib/9.2-1002.jdbc4.jar
myApp/lib/postgresql/postgresql/9.2-1002.jdbc4.jar 
```

但是，使用 运行应用程序时`play run`，出现以下错误并且构建失败：

```
[warn]  module not found: postgresql#postgresql;9.2-1002.jdbc4              
[warn] ==== local: tried
[warn]   /home/ubuntu/play-2.1.0/repository/local/postgresql/postgresql/9.2-1002.jdbc4/ivys/ivy.xml
[warn] ==== Typesafe Releases Repository: tried
[warn]   http://repo.typesafe.com/typesafe/releases/postgresql/postgresql/9.2-1002.jdbc4/postgresql-9.2-1002.jdbc4.pom
[warn] ==== Typesafe Snapshots Repository: tried
[warn]   http://repo.typesafe.com/typesafe/snapshots/postgresql/postgresql/9.2-1002.jdbc4/postgresql-9.2-1002.jdbc4.pom
[warn] ==== public: tried
[warn]   http://repo1.maven.org/maven2/postgresql/postgresql/9.2-1002.jdbc4/postgresql-9.2-1002.jdbc4.pom
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::                       
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: postgresql#postgresql;9.2-1002.jdbc4: not found
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
sbt.ResolveException: unresolved dependency: postgresql#postgresql;9.2-1002.jdbc4: not found 
```

* * *

**关于如何获得 Play 的任何提示！识别我的 jar 文件？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-12T19:48:29.697

Postgresql 驱动程序的 9.2 版本[尚未进入 Maven 中央仓库](http://search.maven.org/#search%7Cgav%7C1%7Cg%3a%22postgresql%22%20AND%20a%3a%22postgresql%22)，因此您必须使用 9.1 版本：

```
"postgresql" % "postgresql" % "9.1-901-1.jdbc4" 
```

或者您可以通过将 JAR 放到您的`myApp/lib`文件夹中并从您的文件中删除任何依赖项来使用 9.2 版本`project/Build.scala`（该`lib`文件夹由 sbt 自动添加）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-06-10T15:24:17.840

我在 [存储库](http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22org.postgresql%22%20AND%20a%3A%22postgresql%22)中找到了这个：

```
"org.postgresql" % "postgresql" % "9.2-1003-jdbc4" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-17T17:49:05.193

当我将 9.2 版本更改为 9.1 版本时，它可以完美运行。感谢您的回答 nico_ekito

我的buid.scala

```
 val appDependencies = Seq(
  "postgresql" % "postgresql" % "9.1-901-1.jdbc4",
  jdbc,
  javaCore,
  javaEbean
  ) 
```

我的应用程序.conf

```
db.default.driver=org.postgresql.Driver
db.default.url="jdbc:postgresql://localhost:5432/DBName"
db.default.user=postgres
db.default.password=123456 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-26T16:30:17.123

我使用以下链接中的信息解决了这个问题：

[https://github.com/tminglei/slick-pg/issues/1](https://github.com/tminglei/slick-pg/issues/1)

希望对你有帮助！！:)

祝你好运 ;）

利尼西尼。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-17T21:07:40.133

在文件**application.conf 中**：

```
 db.default.driver=org.postgresql.Driver
 db.default.url="jdbc:postgresql://localhost:5432/dataBaseName"
 db.default.user=user
 db.default.password="password" 
```

在您的主项目中创建意大利面**/lib ，并应添加****.jar**做 postgres。

[在此处](http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22postgresql%22%20AND%20a%3A%22postgresql%22)下载，然后重新加载项目。

# r - 结合R中的隐式图

> ID：14840395
> 
> 赞同：2
> 
> 时间：2013-02-12T19:38:01.563
> 
> 标签：r, plot

我一直在尝试在 R 中组合两个或多个影响图，但一直没能做到。我正在尝试创建相空间图。这是我到目前为止的代码

```
 r= 0.083
 ka= 100
 e= 0.3
 a= 1.2883
 t= 0.2313
 uj= 0.01
ua= 0.004
m= 0.005

 juvenile <- function(x,y){r*y*(1-y/ka)-(((1-e)*a*x*y)/(1+t*a*x))-(uj+m)+x}
 x<-seq(0,150,length=1000)
 y<-seq(0,150,length=1000)
 z<-outer(x,y,juvenile)
 a<-contour(x,y,z,level=0)

 adult <- function(x,y){m*x-ua*y}
 x<-seq(0,150,length=1000)
 y<-seq(0,150,length=1000)
 z<-outer(x,y,adult)
 b<-contour(x,y,z,level=0)` 
```

有没有办法将它们绘制在一起？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T19:43:45.563

这行吗？

```
 a<-contour(x,y,z,level=0, xlim=range(x), ylim=range(y))
 b<-contour(x,y,z,level=0, xlim=range(x), ylim=range(y), add=TRUE) 
```

# ruby-on-rails - 在 Mongoid 中使用 IPAddress Gem 作为自定义字段

> ID：14840397
> 
> 赞同：1
> 
> 时间：2013-02-12T19:38:06.293
> 
> 标签：ruby-on-rails, ruby, mongoid3

我试图通过猴子将序列化方法修补到 IPAddress 模块来将[IPAddress](https://github.com/bluemonk/ipaddress)用作 Mongoid 文档的[自定义字段](http://mongoid.org/en/mongoid/docs/documents.html#custom_fields)，但我似乎无法得到它......

```
class Computer
  include Mongoid::Document

  field :ip_address, type: IPAddress
end

module IPAddress
  def mongoize
    to_string
  end

  def self.mongoize(object)
    object.to_string
  end

  def self.demongoize(string)
    IPAddress.new string
  end

  def self.evolve(object)
    object.to_string
  end
end 
```

这就是我这一秒做对的事情......但我尝试了很多其他方法，但找不到一个有效的方法。任何帮助将非常感激！

# tfs - 在没有 Visual Studio 的情况下使用 Team Foundation Server 2012

> ID：14840398
> 
> 赞同：2
> 
> 时间：2013-02-12T19:38:06.557
> 
> 标签：tfs, tfs-2012

我正在我的商店监督 VSS 到 TFS 2012 的迁移并且遇到了一个问题：“报告人”使用 Crystal Reports（不知道版本，抱歉）并且没有 Visual Studio。在 VSS 下这不是问题，因为 VSS 有一个独立的客户端......但 TFS 没有这样的动物。我需要给报告人员什么，以便他可以使用 TFS？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T20:30:48.963

您可以简单地[安装 Team Explorer](http://www.microsoft.com/en-us/download/details.aspx?id=30656)，如果您没有安装 Visual Studio 版本，它会提供独立安装。

从技术上讲，这是安装 Visual Studio shell，但不安装任何开发工具。因此，您的“报告人”将能够使用团队资源管理器视图、源代码控制编辑器、工作项编辑器和其他 TFS 功能，而无需安装（或许可）完整的 Visual Studio 体验。

# .net - 64 位 WPF 应用程序在计算机子集上启动时静默崩溃

> ID：14840402
> 
> 赞同：1
> 
> 时间：2013-02-12T19:38:19.470
> 
> 标签：.net, wpf, 64-bit

我遇到了一个不起眼的 .NET (WPF) 崩溃。我的应用程序是使用 64 位平台目标编译的，它静默崩溃（没有对话框或任何东西），并且在我的用户计算机子集上的 Windows 事件查看器中记录了一个事件。

我的应用程序由主要的 WPF 可执行文件和一个类库 DLL 组成，它们都是为 .NET Framework 4 客户端配置文件编译的，并且都具有 64 位的目标平台。

奇怪的是，如果我使用 Any CPU 的目标平台编译 WPF 可执行文件，但将类库的目标设为 64 位，那么应用程序会突然启动正常。

堆栈跟踪如下所示：

```
 (a30.f0): Access violation - code c0000005 (first/second chance not available)
ntdll!RtlPcToFileHeader+0x97:
00000000`7729ce6b 418b4350        mov     eax,dword ptr [r11+50h] ds:00000000`00000050=????????
0:000> k
  *** Stack trace for last set context - .thread/.cxr resets it
Child-SP          RetAddr           Call Site
00000000`004cefd0 000007fe`f1cecf00 ntdll!RtlPcToFileHeader+0x97
00000000`004cf050 000007fe`f1cece5d MSVCR110_CLR0400!__ExceptionPtr::_CopyException+0x8b
00000000`004cf140 000007fe`f1cec978 MSVCR110_CLR0400!__ExceptionPtr::_InitBadAllocException+0x5d
00000000`004cf1a0 000007fe`f1cf519b MSVCR110_CLR0400!IsProcessorFeaturePresent+0x1bfe
00000000`004cf1d0 000007fe`f1ced41f MSVCR110_CLR0400!initterm+0x1f
00000000`004cf200 000007fe`f1ced3bf MSVCR110_CLR0400!cinit+0x3f
00000000`004cf230 00000000`772cb0d8 MSVCR110_CLR0400!CrtEndBoot+0x65
00000000`004cf260 00000000`772b784a ntdll!LdrpRunInitializeRoutines+0x1fe
00000000`004cf430 00000000`772b7b2e ntdll!LdrpLoadDll+0x231
00000000`004cf640 000007fe`fd9b9aa9 ntdll!LdrLoadDll+0x9a
00000000`004cf6b0 000007fe`fc24b05b KERNELBASE!LoadLibraryExW+0x22e
00000000`004cf720 000007fe`fc24aee3 mscoreei!RuntimeDesc::LoadLibrary+0x193
00000000`004cf8a0 000007fe`fc242611 mscoreei!RuntimeDesc::LoadMainRuntimeModule+0x266
00000000`004cf940 000007fe`fc24b2fb mscoreei!RuntimeDesc::EnsureLoaded+0x6a
00000000`004cf9d0 000007fe`fc24b299 mscoreei!RuntimeDesc::GetProcAddressInternal+0x23
00000000`004cfa00 000007fe`fc248974 mscoreei!CLRRuntimeInfoImpl::GetProcAddress+0x61
00000000`004cfa80 000007fe`fc2474c8 mscoreei!GetCorExeMainEntrypoint+0x120
00000000`004cfb40 000007fe`fb685b21 mscoreei!CorExeMain+0x41
00000000`004cfb90 00000000`76bc652d mscoree!CorExeMain_Exported+0x57
00000000`004cfbc0 00000000`772bc521 kernel32!BaseThreadInitThunk+0xd
00000000`004cfbf0 00000000`00000000 ntdll!RtlUserThreadStart+0x1d 
```

这对我来说显然是一个大问题，因为这意味着我不能保证我的应用程序实际上会在最终用户的计算机上运行。

有没有人遇到过类似的事情并知道如何解决？我的应用程序正在加载 64 位 DLL，我想绝对确定它没有在 32 位模式下运行。

# regex - 正则表达式模式以匹配特定字符后跟数字

> ID：14840412
> 
> 赞同：2
> 
> 时间：2013-02-12T19:39:22.417
> 
> 标签：regex, pattern-matching

我正在尝试找到与这些字符匹配的正则表达式模式（任何地方）

```
;# 
```

后跟一个数字，后跟一个可选的

```
;# 
```

例如，匹配其中任何一个的模式

```
;#2

;#27

;#275

;#27;#

;#2;# 
```

我计划在 VBA Excel 宏中使用它。

提前感谢大家。

史蒂夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T19:49:56.753

这个正则表达式应该可以解决问题：

```
;#\d+(;#)? 
```

# backbone.js - Marionette.js - 劫持 CompositeView 函数以创建流式分页

> ID：14840423
> 
> 赞同：6
> 
> 时间：2013-02-12T19:40:11.897
> 
> 标签：backbone.js, marionette

我正在创建一个流式分页视图列表。我们以空集合启动应用程序，并定期将项目添加到集合中。当集合的大小通过 page_size 属性时，其余模型不应被渲染，但复合视图应添加页码以单击。

我计划为我的复合视图创建一个渲染函数，它只根据当前页面#和页面大小渲染项目，在我的集合中有一个函数，它返回一个模型列表，如下所示：

```
get_page_results: function(page_number){
    var all_models = this.models;

    var models_start = page_number * this.page_size;
    var models_end = models_start + this.page_size;

    //return array of results for that page
    return all_models.slice(models_start,models_end);
} 
```

我的问题是，我是否**应该为此使用 Marionette 的复合视图？**似乎我覆盖了 Marionette 的 collectionView 的大部分功能以获得我想要的东西。

每次我的收藏中的项目数量发生变化时，需要更新两件事：

*   集合视图中的 itemViews
*   复合视图底部的页码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:21:08.753

我强烈建议不要在视图层执行此操作。您将在视图中添加大量代码，并且最终会在多个视图之间复制大量代码（一个用于显示数据，一个用于页面列表和计数，一个用于... ）。

相反，使用装饰器模式来构建一个知道如何处理的集合。我这样做是为了过滤、排序和分页数据，效果很好。

例如，这是我设置过滤的方式（在 JSFdiddle 中运行：http: [//jsfiddle.net/derickbailey/vm7wK/](http://jsfiddle.net/derickbailey/vm7wK/)）

```
 function FilteredCollection(original){
    var filtered = Object.create(original);

    filtered.filter = function(criteria){
        var items;
        if (criteria){
            items = original.where(criteria);
        } else {
            items = original.models;
        }
        filtered.reset(items);
    };        

    return filtered;
}

var stuff = new Backbone.Collection();

var filtered = FilteredCollection(stuff);
var view = Backbone.View.extend({
    initialize: function(){
        this.collection.on("reset", this.render, this);
    },

    render: function(){
        var result = this.collection.map(function(item){ return item.get("foo"); });
        this.$el.html(result.join(","));
    }
}); 
```

在您的情况下，您不会像这样进行过滤......但是分页和流式传输的想法是相同的。

您将在“PagingCollection”中跟踪您所在的页面，然后当您的原始集合被重置或添加了新数据时，PagingCollection 函数将重新计算最终 pagedCollection 实例中需要哪些数据，并且使用您需要的数据重置该集合。

像这样的东西（虽然这是未经测试和不完整的。你需要填写一些细节并根据你的应用程序的需要充实它）

```
 function PagingCollection(original){
    var paged = Object.create(original);
    paged.currentPage = 0;
    paged.totalPages = 0;
    paged.pageSize = 0;

    paged.setPageSize = function(size){
      paged.pageSize = size;
    };

    original.on("reset", function(){
      paged.currentPage = 0;
      paged.totalPages = original.length / paged.pageSize;
      // get the models you need from "original" and then
      // call paged.reset(models) with that list
    });

    original.on("add", function(){
      paged.currentPage = 0;
      paged.totalPages = original.length / paged.pageSize;
      // get the models you need from "original" and then
      // call paged.reset(models) with that list
    });

    return paged;
} 
```

使用分页信息装饰集合后，将分页集合传递给 CollectionView 或 CompositeView 实例。这些将正确呈现您传递给它的集合中找到的模型。

关于 CollectionView 与 CompositeView ... CompositeView 是一个 CollectionView（它直接从它扩展），它允许您围绕集合呈现模型/模板。这是主要的区别......它们都处理集合，并从该集合中呈现视图列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:14:55.073

我们已经构建了一组`bakcbone.marionette`你可能会觉得有用的 mixin ( [https://github.com/g00fy-/marionette.generic/](https://github.com/g00fy-/marionette.generic/) )

您可以使用 PaginatedMixin，它允许对 Backbone 集合进行分页 + PrefetchMixin，因此您不必将预取集合传递给视图。

您需要做的唯一代码是：

```
YourListView = Generic.ListView.mixin(PaginatedMixin,LoadingMixin,PrefetchMixin).extend({
    paginateBy:10,
    template:"#your-list-template",
    itemViewOptions:{template:"#your-itemview-template"},
    fetchPage:function(page){
        this.page = page;
        return this.collection.refetch({data:{page:page}}); // your code here
    },
    hasNextPage:function(){
      return true; // your code here
    },
}); 
```

有关工作示例，请参见[https://github.com/g00fy-/stack.reader/blob/master/js/views.js](https://github.com/g00fy-/stack.reader/blob/master/js/views.js)

# asp.net - 典型的 FileUpload RegularExpressionEvaluator 触发错误，如何修复？

> ID：14840425
> 
> 赞同：0
> 
> 时间：2013-02-12T19:40:18.393
> 
> 标签：asp.net, .net, c#-4.0, file-upload, validation

在我的页面上，我有一个标准的 asp:FileUpload 控件。它的正下方是一个正则表达式验证器，它应该只允许上传 pdf 和 Word 文档。这是在网络上随处可见的同一个正则表达式。出于某种原因，它在另一个项目中运行良好，但在我当前的项目中却不行。在 Firefox 中加载页面时，我立即让验证器在选择文件后立即向我显示错误消息。这告诉我这是一个客户端问题，因为该页面尚未提交到服务器。

标签：

```
<asp:RegularExpressionValidator id="Resume_Validator" runat="server" 
      ControlToValidate="Resume" 
      ValidationGroup="applicationForm" 
      ErrorMessage="Upload PDF or Word files only<br />" 
      Display="Dynamic" 
      CssClass="validationMsg" 
      ValidationExpression="^(([a-zA-Z]:)|(\\{2}\w+)\$?)(\\(\w[\w].*))(.pdf|.PDF|.doc|.DOC|.docx|.DOCX)$" 
/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:16:45.390

为什么不在客户端使用 jQuery 文件验证呢？

```
//Check file extension
        var ext = file.split('.').pop().toLowerCase();   //Check file extension if valid or expected
        if ($.inArray(ext, ['txt']) == -1) {
            $(".errorDiv").html("Select valid text file (txt).");
            e.preventDefault(); //Prevent submission of form
        }
        else {
    //Do your logic here, file upload, stream. etc.. if file was successfully validated
    } 
```

# javascript - 如何使 html 页面的本地副本像在线版本一样运行？

> ID：14840428
> 
> 赞同：-1
> 
> 时间：2013-02-12T19:40:25.220
> 
> 标签：javascript, html, proxy

我对编程有点陌生，我在尝试打开 html 文档时遇到了问题，就好像它是通过页面本身打开的一样。我想我需要在浏览器打开文件时为其创建一个代理，但我不确定。

我需要这个的原因是因为当文件存储在本地时，它与它的运行方式冲突并留下一些东西。

编辑：已解决，我的网站使用 AJAX，无法实现我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:57:43.477

存储您未创作的网站以供以后离线使用可能具有挑战性。根据所使用的脚本，这可能会或可能不会起作用。最好的办法是检查文件中的绝对路径，并尽可能将它们更改为相对路径。

```
i.e: <img src="http://google.com/img/test.jpg"> to <img src="img/test.jpg"> 
```

所有 javascript 和 CSS 也是如此。

这是假设在页面加载后没有任何与 javascript 的双向通信。如果它使用任何 AJAX 或轮询，你基本上就完蛋了。

你有什么理由需要这个离线？仅仅是数据，还是数据加 UI 交互？

如果只有数据，您可以将其保存为另一种格式以供以后查看。如果您需要图形交互，或者您需要再次在线更新，您可能会不走运。

# javascript - 如何在jquery mobile中为复选框提供边框

> ID：14840429
> 
> 赞同：0
> 
> 时间：2013-02-12T19:40:26.743
> 
> 标签：javascript, html, css, jquery-mobile, checkbox

我想在 jquery mobile 中为我的复选框添加边框。我尝试使用 CSS 的边框属性和轮廓属性进行样式设置。

```
<input type="checkbox" name="checkbox-0" style="outline: 3px solid #1e5180;"/>
<input type="checkbox" name="checkbox-1" style="border: 3px solid #1e5180;"/> 
```

但对我不起作用。有人可以提供解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:02:41.780

使用 jquery-mobile 复选框：

[http://jquerymobile.com/demos/1.0a4.1/docs/forms/forms-checkboxes.html](http://jquerymobile.com/demos/1.0a4.1/docs/forms/forms-checkboxes.html)

您可以通过定位 .ui-btn-up-c 来自定义样式

```
.ui-btn-up-c {
   border: 1px solid #999999;
} 
```

或者在这里建立你自己的主题：

[http://jquerymobile.com/themeroller/](http://jquerymobile.com/themeroller/)

# drupal - 在哪里配置“简单访问”模块drupal 7的设置

> ID：14840430
> 
> 赞同：0
> 
> 时间：2013-02-12T19:40:28.380
> 
> 标签：drupal

我希望能够为 drupal 7 中的“simple accesses”模块添加一个组，我在管理员中可以做到这一点的地方高低寻找，但找不到。使用简单访问的 7.x-2.0-beta1 版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:23:38.053

我有角色，答案是：除非您这样做，否则不会出现简单访问的设置页面：[https ://drupal.org/node/887108](https://drupal.org/node/887108)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:40:59.013

模块页面说这个“访问组基于角色”添加角色在这里

[http://yousite.com/admin/people/permissions/roles](http://yousite.com/admin/people/permissions/roles)

# jpa - 使用 JPQL 更新方法用另一个实体更新一个实体

> ID：14840433
> 
> 赞同：0
> 
> 时间：2013-02-12T19:40:35.350
> 
> 标签：jpa, eclipselink, jpql

我试图用 JPQL 中的另一个实体替换具有一对多关系的实体，但不知道如何正确表达 JPQL。

```
update PersonInstitution pi set pi.designation = (select d from Designation d where d.id = 50) where pi.designation.id = 34] 
```

我想用所有 PersonInstitution 实体的另一个名称（id 为 50）替换一个名称（id 为 34）。但它给出了错误。

我可以加载所有对象并对其进行编辑并将它们持久化，但我认为这是一种效率较低的方法。

我将 JPA 与 EclipseLink 2.0 一起使用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:31:41.597

根据规范，它可能不适用于 JPQL。

```
update_clause ::= UPDATE entity_name [[AS] identification_variable] SET update_item {, update_item}* 

update_item ::= [identification_variable.]{state_field | single_valued_object_field} = new_value 
```

您必须手动完成，否则可以尝试使用本机查询。

# linux - 在文件中传递的 Bash 脚本

> ID：14840436
> 
> 赞同：1
> 
> 时间：2013-02-12T19:40:38.360
> 
> 标签：linux, bash, shell, flags

我有 main.sh，在里面调用 sub.sh。但是，我需要将信息传递给 sub.sh。可以这样做吗：

```
wget centos_64bit_novz.sh 
sh centos_64bit_novz.sh --LEVEL=$LEVELSEC --SERVVRT=novz 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:43:03.563

使用`wget -O-`，您将内容放入`stdout`.
并且`bash -s`，您可以使用参数。

```
wget centos_64bit_novz.sh -O- | bash -s --LEVEL=$LEVELSEC --SERVVRT=novz 
```

# iphone - NSMutableArray 的 NSMutableArray。发送到不可变对象的变异方法

> ID：14840437
> 
> 赞同：7
> 
> 时间：2013-02-12T19:40:39.697
> 
> 标签：iphone, ios, objective-c, xcode, cocoa

我`NSMutableArray`有`NSMutableArrays`：

```
 NSMutableArray *array = [[NSMutableArray alloc]init];

        for (int i = 0; i < 5; i++)
        {
            NSMutableArray *miniArray = [[NSMutableArray alloc]init];

            for (int k = 0; k < 30; k++)
            {   
                [miniArray addObject:@"0"];
            }
            [array addObject:miniArray];
        } 
```

然后，当我尝试这样做时：

```
 [[array objectAtIndex:packIndex]replaceObjectAtIndex:index withObject:@"1"]; 
```

它崩溃了：`[__NSCFArray replaceObjectAtIndex:withObject:]: mutating method sent to immutable object'`

为什么 ？怎么修 ？谢谢 ！

**UPD**：我将此数组保存在`NSUserDefaults`：

```
[defaults setObject:array forKey:@"mainArray"]; 
```

然后，我在另一堂课上读到它：

```
array = [[NSMutableArray alloc]initWithArray:[[NSUserDefaults standardUserDefaults] objectForKey:@"mainArray"]]; 
```

另外，我必须提到，有时代码运行良好，它会将“0”更改为“1”。但它有时也会崩溃。所以我看不到逻辑，为什么它工作正常或为什么有时会崩溃。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-12T20:09:45.763

问题是当您从 NSUserDefaults 中读取数组时，迷你数组不会自动成为 NSMutableArrays。

尝试这个：

```
array = [[NSMutableArray alloc]initWithArray:[[NSUserDefaults standardUserDefaults] objectForKey:@"mainArray"]];
for(int i = 0; i < array.count; i++) {
    NSArray * tempArray = array[i];
    array[i] = [tempArray mutableCopy];
} 
```

编辑：Best Coder 的回答解释了为什么会这样。存储在 NSUserDefaults 中的对象存储为不可变版本，基本上 NSUserDefaults 是一个 plist，并且没有将数组标记为可变/不可变的标志，因此当您将它们读回时，它们被假定为不可变的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-12T20:11:31.720

> 从 NSUserDefaults 返回的值是不可变的，即使您将可变对象设置为值。例如，如果您将可变字符串设置为“MyStringDefault”的值，那么您稍后使用 stringForKey: 检索的字符串将是不可变的。

相反，对您从 NSUserDefaults 检索到的数组创建一个 mutableCopy，添加您的对象，然后重新设置您的新数组。

看到这个链接：http: [//developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-02-12T19:57:33.243

尝试使用更详细的代码：

```
NSMutableArray *tempArray = [array objectAtIndex:packIndex];
[tempArray replaceObjectAtIndex:index withObject:@"1"]; 
```

# asp.net-mvc - 如何成功配置 Common.Logging？

> ID：14840445
> 
> 赞同：10
> 
> 时间：2013-02-12T19:41:23.607
> 
> 标签：asp.net-mvc, nlog, common.logging

我正在尝试使用 NuGet 包将 Common.Logging 配置为在 ASP.Net MVC 项目中使用 NLog2。根据以下 URL 提供的信息，我相信我的记录器配置正确，但我仍然遇到配置错误。

[Common.Logging 配置说明](http://netcommon.sourceforge.net/docs/2.1.0/reference/html/ch01.html)

[NLog 配置教程](https://github.com/NLog/NLog/wiki/Tutorial)

我已按照说明在**web.config**中添加了以下内容：

```
<configuration>
  <configSections>
      <section name="nlog" type="NLog.Config.ConfigSectionHandler, NLog"/>
      <sectionGroup name="common">
            <section name="logging" type="Common.Logging.ConfigurationSectionHandler, Common.Logging" />
      </sectionGroup>
    </configSections>
    <common>
      <logging>
        <factoryAdapter type="Common.Logging.NLog.NLogLoggerFactoryAdapter, Common.Logging.NLog20">
            <arg key="configType" value="INLINE" />
        </factoryAdapter>
      </logging>
    </common>
    <nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <targets>
        <target name="logfile" xsi:type="file" filename="e:\logfile.txt" layout="${date:format=yyyy/MM/dd HH:mm:ss} ${message}" />
      </targets>
      <rules>
        <logger name="*" minlevel="Trace" writeTo="logfile" />
      </rules>
    </nlog> 
    <runtime>
      <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
        <dependentAssembly>
          <assemblyIdentity name="Common.Logging" publicKeyToken="af08829b84f0328e" culture="neutral" />
          <bindingRedirect oldVersion="0.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
        </dependentAssembly>
      </assemblyBinding>
    </runtime>
</configuration> 
```

据我所知，这是我应该做的一切，但是当我尝试运行 Web 项目时出现配置错误......

> **解析器错误消息：**为 common/logging 创建配置节处理程序时发生错误：无法创建类型“Common.Logging.NLog.NLogLoggerFactoryAdapter，Common.Logging.NLog20”

任何人都可以就缺少或错误的内容提供建议吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-12T19:45:12.430

问题似乎是Common.Logging NuGet包（v2.0.0）添加的默认配置不正确。

web.config 中的运行时部分需要更改为以下内容：

```
<dependentAssembly>
   <assemblyIdentity name="Common.Logging" publicKeyToken="af08829b84f0328e" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-65535.65535.65535.65535" newVersion="2.0.0.0" />
  </dependentAssembly> 
```

请注意 oldVersion 值。这似乎是导致错误的原因（至少基于我在上面问题中概述的场景）。

另请参阅此相关 GitHub 问题：[Common.Logging / Common.Logging.NLog20 NuGet packages 的可能问题](https://github.com/net-commons/common-logging/issues/23)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-05T13:44:07.393

通过使用为我工作

```
<factoryAdapter type="Common.Logging.NLog.NLogLoggerFactoryAdapter, Common.Logging.NLog2"> 
```

代替

```
<factoryAdapter type="Common.Logging.NLog.NLogLoggerFactoryAdapter, Common.Logging.NLog20"> 
```

注意最后的20对2。

# apache - Apache Web 服务器上 svg 的 Mime 类型

> ID：14840446
> 
> 赞同：0
> 
> 时间：2013-02-12T19:41:28.160
> 
> 标签：apache, webserver, mime-types

我在网站上有 .svg 字体和 .svg 图片。

我对服务器上的 mime 类型有疑问。

当我设置这个 mime 类型时：font/opentype svg

比 .svg 图像消失了。我错了什么？

我应该在服务器上设置哪些 mime 类型？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:08:30.450

mime 类型应为：`image/svg+xml`

# ios - Vuforia 视频播放

> ID：14840447
> 
> 赞同：0
> 
> 时间：2013-02-12T19:41:32.013
> 
> 标签：ios, vuforia

我正在尝试使用 Vuforia Video Playback 示例应用程序作为大学项目的起点。我想做的是开发一个基于 iOS 的小型应用程序，该应用程序将识别我定义的目标，并根据示例应用程序在目标上播放我选择的视频。我是 Vuforia 的新手，因此我非常感谢通过对以下内容的简单解释获得一些帮助和指导：

1.  使用目标管理器创建了我自己的目标数据集并下载了 .xml 和 .dat 文件后，我必须在哪里更新示例应用程序代码才能使用我的目标而不是 Stones&Chips 示例？

2.  一旦我集成了我的目标，当检测到我的目标时，我需要修改哪些示例应用程序代码来调用我自己的视频（从网络流式传输或本地存储在 iPhone 上）？正如我所说，我对这种环境非常陌生，并且发现我通过示例学习得最好，因此非常感谢任何帮助和指导......</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:03:42.673

首先，将您的数据集（.dat 和 .xml）文件和任何视频添加到资源/资产组。

然后，从 VideoPlayback-2-0-7 开始，您需要在 VideoPlaybackAppDelegate.mm 中编辑以下行。

更新数据集以匹配数据集的文件名（.dat 和 .xml）。第 92 行：

```
[qUtils addTargetName:@"Stones & Chips" atPath:@"StonesAndChips.xml"];
```

更新视频以匹配您添加的任何视频。从第 148 行开始：

```
switch (i) {
    case 0:
        filename = @"VuforiaSizzleReel_1.m4v";
        break;
    default:
        filename = @"VuforiaSizzleReel_2.m4v";
        break;
}
```

更新 EAGLView.h 中的视频目标数。第 25 行：

```
#define NUM_VIDEO_TARGETS 2
```

更新 EAGLView.mm 中的视频纹理。请注意，您需要为每个可跟踪的纹理设置一个纹理，否则应用程序将崩溃。加载纹理的代码没有错误检查。从第 39 行开始：

```
 // Texture filenames (an Object3D object is created for each texture)
    const char* textureFilenames[] = {
        "icon_play.png",
        "icon_loading.png",
        "icon_error.png",
        "VuforiaSizzleReel_1.png",
        "VuforiaSizzleReel_2.png"
    };
```

更新 EAGLView.mm 中的目标名称匹配代码。从第 357 行开始：

```
// VideoPlayerHelper to use for current target
int playerIndex = 0;    // stones

if (strcmp(imageTarget.getName(), "chips") == 0)
{
    playerIndex = 1;
} 
```

# c# - 如何在 IInputStream 接口中包装 Windows.Storage.Streams.IInputStream？

> ID：14840449
> 
> 赞同：0
> 
> 时间：2013-02-12T19:41:37.827
> 
> 标签：c#, .net, windows-runtime, iasyncoperation

我想实现一个 IInputStream ，它委托给另一个 IInputStream 并在将读取的数据返回给用户之前对其进行处理，如下所示：

```
using System;

using Windows.Storage.Streams;

using Org.BouncyCastle.Crypto;
using Org.BouncyCastle.Crypto.Engines;
using Org.BouncyCastle.Crypto.Parameters;

namespace Core.Crypto {
    public class RC4InputStream : IInputStream {

        public RC4InputStream(IInputStream stream, byte[] readKey) {
            _stream = stream;

            _cipher = new RC4Engine();
            _cipher.Init(false, new KeyParameter(readKey));
        }

        public Windows.Foundation.IAsyncOperationWithProgress<IBuffer, uint> ReadAsync(IBuffer buffer, uint count, InputStreamOptions options)
        {
            var op = _stream.ReadAsync(buffer, count, options);
            // Somehow magically hook up something so that I can call _cipher.ProcessBytes(...)
            return op;
        }

        private readonly IInputStream _stream;
        private readonly IStreamCipher _cipher;
    }
} 
```

我有两个不同的问题，我无法通过搜索浩瀚的互联网来回答：

*   在委派的 ReadAsync() 之后链接另一个操作以运行的最佳方法是什么（我可以使用“等待”，也可以使用 AsyncInfo 创建一个新的 IAsyncOperation，但我不知道如何连接进度报告器等）
*   如何访问“IBuffer”背后的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T06:01:29.673

您需要返回您自己的`IAsyncOperationWithProgress`. 你可以用它[`AsyncInfo.Run`](http://msdn.microsoft.com/en-us/library/hh779372.aspx)来做到这一点：

```
public IAsyncOperationWithProgress<IBuffer, uint> ReadAsync(IBuffer buffer, uint count, InputStreamOptions options)
{
    return AsyncInfo.Run<IBuffer, uint>(async (token, progress) =>
        {
            progress.Report(0);
            await _stream.ReadAsync(buffer, count, options);
            progress.Report(50);
            // call _cipher.ProcessBytes(...)
            progress.Report(100);
            return buffer;
        });
} 
```

当然，您可以根据自己的工作使自己的进度报告更加细化。

要访问其中的数据，`IBuffer`您可以使用其中一种[`ToArray`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.windowsruntime.windowsruntimebufferextensions.toarray.aspx)或[`AsStream`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.windowsruntime.windowsruntimebufferextensions.asstream.aspx)扩展方法。

# c# - 在 Linq 中比较

> ID：14840455
> 
> 赞同：4
> 
> 时间：2013-02-12T19:41:54.037
> 
> 标签：c#, linq

我在数据库中有一堆数据，我想为其编写搜索功能。问题是我得到了很多重复。数据以姓名和姓氏为结构，我只想发送两者中的一个，所以如果我有两个名字为 Foo 和姓氏 Bar 的人，只会显示一个。

不管我怎么想，我总是回到我需要比较它们的地方。

```
var names = db.People
      .Where(r => r.Name.Contains(q))
      .OrderBy(r=> r.Name)
       *Psuedo-Code*
       if((this.Name==next.Name)&&(this.surSame==next.Surname)
           toss next data and loop to next
       *Psuedo-Code*
      .Take(5); 
```

也许有点混乱，但你明白我想要实现的目标。我可以以某种方式做到这一点，还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T19:47:04.390

你可以这样做：

```
var names = db.People
    .Where(r => r.Name.Contains(q))
    .Select(r => new { Name = r.Name, Surname = r.Surname })
    .Distinct()
    .Take(5); 
```

但是，如果这不起作用，因为您需要整个 People 记录，您只需要第一个，我已经成功地完成了这样的事情：

```
var names = db.People
   .Where(r => r.Name.Contains(q))
   .GroupBy(r => new { Name = r.Name, Surname = r.Surname })
   .Select(g => g.First())
   .Take(5); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T19:49:25.280

`Distinct``Equals`在课堂上使用`People`是正确的方法，但这里有一个更“内联”的替代方法：

```
var names = db.People
  .Where(r => r.Name.Contains(q))
  .GroupBy(r => new { r.Name, r.Surname })
  .Select(g => g.First())
  .OrderBy(r => r.Name)
  .Take(5); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T19:45:32.450

在类中使用`Distinct()`和实现方法，或者使用辅助类来比较它们：`Equals``People`

```
public class PeopleComparer : IEqualityComparer<People>
{
    public bool Equals(People x, People y)
    {
        return x.Name == y.Name && x.Surname == y.Surname;
    }

    public int GetHashCode(People obj)
    {
        unchecked
        {
            return (obj.Name.GetHashCode() * 31) + obj.Surname.GetHashCode();
        }
    }
} 
```

# gtk - GValue、GTypeValueTable、GTypeInfo 和 GParamSpec 的用途

> ID：14840456
> 
> 赞同：8
> 
> 时间：2013-02-12T19:42:06.850
> 
> 标签：gtk, gnome, glib, gobject

GObject 库的文档非常详细。很难弄清楚创建实体的目的。也就是说，我没有得到`GValue`、`GTypeValueTable`、`GTypeInfo`和`GParamSpec`的角色`TypeData`。

简而言之，类型注册的过程如下。每种类型都由一个`TypeNode`结构表示。有两种`TypeNode`结构存储：`static_fundamental_type_nodes array`用于存储`TypeNodes`静态基本类型和`static_type_nodes_ht`用于静态非基本类型的哈希表。在非基本类型的情况下，每个`GType`只是对应的内存地址或在基本类型的情况下的索引。动态类型会发生什么 - 我不知道，如果可以请解释一下。对应的代码位于 gtype_init 函数中，负责类型系统的初始化：[http](http://git.gnome.org/browse/glib/tree/gobject/gtype.c#n4323) ://git.gnome.org/browse/glib/tree/gobject/gtype.c#n4323 。 `TypeNode``TypeNode``static_fundamental_type_nodes`

![在此处输入图像描述](../Images/cceae7da865e1ef171026688a9945436.png)

`GValue`,`GParamSpec`并且`GObject`是`GTypes`它们自己，所以它们被注册为类型。

`GValue`意味着用于通过它注册新的类型值，但是如何呢？

`GParameters`并且`GParamSpec`似乎需要注册`GObject`类型（不确定）。它究竟是如何完成的？各自的作用是什么？

最重要的是： 和 的作用`GTypeValueTable`是`GTypeInfo`什么`TypeData`？`TypeData`由BoxedData、ClassData、IFaceData、InstanceData 引用`TypeNode`并包含子结构（为什么是 Instance，我们不是在注册类型吗？）。`GTypeValueTable`此外，它们似乎相互重复，因为它们都包含对 base_init/finalize 的引用，class_init/finalize 具有对`GTypeValueTable`.

所以，GObject 爸爸，如果你正在阅读这篇文章，请解释一下自己！描述你使用的那些结构的目的。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-13T07:48:04.493

除非您尝试处理一些非常低级的代码，否则您真正需要关心的仅有两个是 GValue 和 GParamType

我将从`GParamType`

`GParamType`用于向 GObject 注册属性。比如说，我有一个名为 Person 的 GObject 子类，我希望它有两个属性：Name 和 Age。在`class_init`函数中，我会像这样注册这些

```
{
    GParamSpec *pspec;

    . . .

    pspec = g_param_spec_string ("name", "Name", "The name of the person", "", G_PARAM_READWRITE | G_PARAM_STATIC_STRINGS);
    g_object_class_install_property (object_class, PROP_NAME, pspec);

    pspec = g_param_spec_int ("age", "Age", "The age of the person", 0, G_PARAM_READWRITE | G_PARAM_STATIC_STRINGS);
    g_object_class_install_property (object_class, PROP_AGE, spec);

    . . .
} 
```

现在您可以调用`g_object_get`这些`g_object_set`属性，系统将知道如何处理它

```
char *name;
int age;
g_object_set (G_OBJECT (person), "name", "Steve", "age", 37, NULL);
g_object_get (G_OBJECT (person), "name", &name, "age", &age, NULL);

g_print ("%s is %d years old\n", name, age);

// And because the type system knows when a property is a string, it knows how to give
// you a copy of the string, so you need to free it once you've finished with it
g_free (name); 
```

这里解释了各种参数：[GParamSpec](http://developer.gnome.org/gobject/stable/gobject-GParamSpec.html#GParamFlags)所有标准类型都有 GValue 类型：strings、bools、ints 等，而 GStreamer 等其他一些库将注册自己的自定义类型。

除了在 GObjectClass 上安装属性之外，您很少需要处理 GParamSpec。它们出现的两个主要场合是在 GObjectClass 的 set/get_property 方法和 GObject 通知信号中。在最后一种情况下，通过调用来检测哪个属性收到了通知信号很有用`g_param_spec_get_name`，但实际上最好使用更具体的通知信号，如下所示：

```
g_signal_connect (person, "notify::name", G_CALLBACK (name_changed_cb), NULL);
g_signal_connect (person, "notify::age", G_CALLBACK (age_changed_cb), NULL); 
```

而不是

```
g_signal_connect (person, "notify", G_CALLBACK (something_changed_cb), NULL); 
```

有时您可能想要创建自己的结构并将其用于属性。例如，如果我有

```
struct _PersonDetails {
    char *name;
    int age;
} 
```

而不是在 Person 对象上有两个属性，我想要一个称为“详细信息”的属性。GLib 类型系统不知道如何处理我的自定义`struct _PersonDetails`，因此我需要为它创建一个装箱类型，以便它知道如何正确复制/释放在 Glib 内部传递的结构。这就是`GValue`进来的地方。

`GValue`用于包装不同类型的值，以便可以正确复制和释放它们（如果需要），并且可以使用通用函数。

例如，GObjectClass 方法 set_property 的原型为

```
void set_property (GObject *object, guint property_id, const GValue *value, GParamSpec *pspec) 
```

这意味着可以传入任何可以由 GValue 表示的类型，并且不需要特定的函数，例如 set_int_property、set_string_property、set_bool_property。

`g_object_set`这也意味着函数`g_object_get`知道如何处理传入的参数，因为它知道属性“name”被注册为字符串类型，并且它具有复制/释放该字符串所需的功能。

更多关于 GValue 的信息可以在这里找到 -[通用值](http://developer.gnome.org/gobject/stable/gobject-Generic-values.html)

为了`struct _PersonDetails`向 GLib 类型系统注册我们的自定义，我们将创建一个自定义 Boxed 类型，它告诉系统如何复制和释放它。详细信息在这里：[盒装类型](http://developer.gnome.org/gobject/stable/gobject-Boxed-Types.html)

```
G_DEFINE_BOXED_TYPE (PersonDetails, person_details,
                     person_details_copy,
                     person_details_free)
. . .

static gpointer
person_details_copy (gpointer data)
{
    struct _PersonDetails *details = (struct _PersonDetails *)data;
    struct _PersonDetails *copy = g_new (struct _PersonDetails, 1);

    // We need to copy the string
    copy->name = g_strdup (details->name);
    copy->age = details->age;

    return (gpointer) copy;
}

static void
person_details_free (gpointer data)
{
    struct _PersonDetails *details = (struct _PersonDetails *)data;

    // name was allocated so it needs freed as well
    g_free (details->name);

    g_free (details);
} 
```

现在我们可以使用注册我们的类型

```
pspec = g_param_spec_boxed ("details", "Details", "The person's details", person_details_get_type (), G_PARAM_READWRITE | G_PARAM_STATIC_STRINGS);
g_object_class_install_property (object_class, PROP_DETAILS, pspec); 
```

# javascript - 某些浏览器是否在操作系统中包含多个线程？

> ID：14840466
> 
> 赞同：0
> 
> 时间：2013-02-12T19:43:08.647
> 
> 标签：javascript

我试图从宏观角度了解我的代码是如何工作的。

我从这个[SO Question](https://stackoverflow.com/questions/3897625/parallel-javascript-code)中了解到并行编程是可能的，该问题链接到Resig的一篇关于[web workers的文章。](http://ejohn.org/blog/web-workers/)

我觉得这很令人困惑，因为我认为我已经阅读过浏览器中的 JavaScript 是单线程的。

也许我错配了一些东西。

某些浏览器是否支持多线程？这与并行处理相似还是相关？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T19:45:24.980

*Web 浏览器中的 JavaScript 在语义*和*行为*上始终是单线程的。有一个名为“Web Workers”的新（ish）工具，它允许多个独立的 JavaScript 线程运行，但每个线程都看到一个世界，其中语义（除了一些特殊的特殊情况）正是人们在单线程事件中所期望的 -驱动环境。

主“页面”线程和每个工作线程之间的通信严格通过消息传递进行。将消息传递给工作人员（或页面线程）会触发一个事件，必须处理该事件才能接收到消息。

[这是 MDN 对 Workers 的介绍。](https://developer.mozilla.org/en-US/docs/DOM/Worker)

*编辑*正如我在下面的评论中所写，对这个问题有不同的思考方式。浏览器（或任何其他 JavaScript 环境）可以同时运行许多不同的 JavaScript 执行线程。那是“多线程环境”吗？好吧，如果你喜欢我猜你可以这么称呼它。但是，从每个线程的角度来看，没有其他线程需要担心：只有要处理的事件和要通过平台 API 启动的操作（例如，DOM 交互、XHR 和 Workers）。这些 API 要么是同步的，要么不是。但是无需担心同步原语，无需与其他线程共享内存等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T19:54:56.337

你说 JS 是单线程是对的。

它实际上意味着编写的 javascript 代码由本机操作系统分配给浏览器的单个进程读取（ `parsed`）和评估（ ）。`executed`

虽然可以给浏览器的线程数量没有限制，但直到一段时间以前，所有浏览器都相互使用一个线程，这是一种安全的方法（避免了复杂的时序问题和跨线程通信）。

自 HTML5 出现以来，浏览器制造商被迫引入 cookie 功能，例如`Web Workers`.

Web Workers 允许浏览器从操作系统请求超过 1 个线程并在每个线程中执行并行操作。

因此，开发人员有责任编写 JS 代码以确保进程没有依赖关系等，以便它们实际上可以独立工作。

在此处阅读有关它的[HTML5 官方网站](http://www.html5rocks.com/en/tutorials/workers/basics/)。不过与 Resig 的博客非常相似。

# c# - 将文件中的键值对添加到字典？

> ID：14840472
> 
> 赞同：0
> 
> 时间：2013-02-12T19:43:47.300
> 
> 标签：c#, dictionary, add

我正在尝试将 .txt 文件中的值导入我的`dictionary`. .txt 文件的格式如下：

唐老鸭, 2010-04-03

依此类推……每行都有 1 个这样的条目。当我尝试将拆分字符串添加到`dictionary`.

我正在尝试这样： `scoreList.Add(values[0], values[1]);` 但它说名称在上下文中不存在。我希望有人能指出我正确的方向......

谢谢！

```
 private void Form1_Load(object sender, EventArgs e)
    {
          Dictionary<string, DateTime> scoreList = new Dictionary<string, DateTime>();
          string path = @"list.txt";
          var query = (from line in File.ReadAllLines(path)
                       let values = line.Split(',')
                       select new { Key = values[0], Value = values[1] });

          foreach (KeyValuePair<string, DateTime> pair in scoreList)
          {
              scoreList.Add(values[0], values[1]);
          }
          textBox1.Text = scoreList.Keys.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T19:47:06.123

您的`values`变量仅在 LINQ 查询范围内。您需要枚举查询结果，并将值添加到字典中：

```
foreach (var pair in query)
{
    scoreList.Add(pair.Key, pair.Value);
} 
```

话虽如此，LINQ 提供了一种`ToDictionary`扩展方法，可以在这里为您提供帮助。您可以将循环替换为：

```
scoreList = query.ToDictionary(x => x.Key, x => x.Value); 
```

最后，为了使类型正确，您需要将 Value 转换为`DateTime`using，例如`DateTime.Parse`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T19:47:53.113

首先你做错了，你应该从列表中添加项目而不是 LINQ 中使用的 values[0] 和 values[1] ..

```
Dictionary<string, DateTime> scoreList = new Dictionary<string, DateTime>();

    string path = @"list.txt";

    var query = (from line in File.ReadAllLines(path)
                 let values = line.Split(',')
                 select new { Key = values[0], Value = values[1] });

    foreach (var item in query) /*changed thing*/
    {

        scoreList.Add(item.Key, DateTime.Parse(item.Value)); /*changed thing*/
    }

    textBox1.Text = scoreList.Keys.ToString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T19:48:20.093

代码的*直接*问题是它只存在于查询表达式中......您的序列有一个元素类型，它是一个具有和属性`values`的匿名类型。`Key``Value`

下一个问题是您正在迭代`scoreList`，一开始它是空的......而且也没有迹象表明您打算从哪里转换`string`为`DateTime`. 哦，我不确定是否`Dictionary<,>.Keys.ToString()`会给你任何有用的东西。

不过，您可以简单地构建字典：

```
var scoreList = File.ReadLines(path)
                    .Select(line => line.Split(','))
                    .ToDictionary(bits => bits[0], // name
                                  bits => DateTime.ParseExact(bits[1], // date
                                              "yyyy-MM-dd",
                                              CultureInfo.InvariantCulture)); 
```

注意使用[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.parseexact.aspx)而不是仅仅`DateTime.Parse`- 如果您知道数据的格式，则应该使用该信息。

# build - 制作依赖于环境变量的目标

> ID：14840474
> 
> 赞同：8
> 
> 时间：2013-02-12T19:43:53.713
> 
> 标签：build, makefile

我在一个 Web 应用程序上工作，其 Makefile 包含以下内容：

```
dist/index.html: src/templates/index.html
    @bin/insert-scripts $< --output $@ 
```

**bin/insert-scripts**在提供的文件中替换`<--scripts-->`为以下内容之一：

*   当 $ENV 为“开发”时，许多脚本标签（用于 jQuery、Underscore 等），或
*   当 $ENV 为“生产”时，单个脚本标签（指向连接的、缩小的文件）。

问题是，如果一个人在一种模式下构建 dist/index.html（比如“开发”），然后在另一种模式下再次构建它*而不触及依赖项*，make 会说没有什么可做的。我想做的是使 $ENV 成为 dist/index.html 的依赖项：

```
dist/index.html: src/templates/index.html $ENV
    @bin/insert-scripts $< --output $@ 
```

这当然行不通，所以我考虑有一个名为 ENV 的文件，其中包含“开发”或“生产”。该文件将成为依赖项：

```
dist/index.html: src/templates/index.html ENV
    @bin/insert-scripts $< --output $@ 
```

与其设置环境变量，不如设置 ENV 文件的内容。这看起来有点笨拙，但至少准确地表示了依赖关系树。

处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T21:35:06.627

如果您绝对必须为更改的环境强制重新构建，您始终可以为构建环境使用标记文件：

```
.PHONY: always-rebuild

environment : always-rebuild
   echo $ENV > $@.tmp
   diff --quiet $@ $@.tmp || cp $@.tmp $@
   rm -f $@.tmp

dist/index.html : src/templates/index.html environment 
```

`diff`ing 确保`environment`始终重新构建（<= 检查），但仅在相关环境变量更改时才被触及。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T21:35:17.170

因此，您希望`make`在以下两种情况下运行脚本：

*   `src/templates/index.html`改变了
*   **自上次生成以来**ENV环境变量已更改**`dist/index.html`**

 **这个要求的问题是环境变量没有时间戳。因此，make 无法知道目标是否是最新的。

通常在类似情况下的解决方案是简单地具有单独的目标，例如`dist-development/index.html`和`dist-production/index.html`。您甚至可以找到一种方法来使用符号链接或其他东西来有效地将 Web 应用程序指向正确的最新版本**index.html**。但是使用**ENV**文件的替代方案也是一种可能。我建议对您的程序进行一些改进：

```
.PHONY: ENV
ifneq "$(ENV)" "$(shell cat ENV)"
dist/index.html: ENV src/templates/index.html
    @bin/insert-scripts $< --output $@
else
dist/index.html: src/templates/index.html
    @bin/insert-scripts $< --output $@
endif

ENV:
    echo $(ENV) >$@ 
```

这样，您的 make 将接受**$ENV**的当前设置并将其保存在具有正确时间戳的文件中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T21:33:02.020

当所有相关信息都编码在文件名中时，Make 总是最有效：

```
all : dist-${ENV}/index.html

dist-development/index.html : src/templates/index.html
    ENV=development bin/insert-scripts $< --output $@

dist-production/index.html : src/templates/index.html
    ENV=production bin/insert-scripts $< --output $@ 
```**

# java - 将数组中的对象的元素添加到字符串数组中

> ID：14840481
> 
> 赞同：1
> 
> 时间：2013-02-12T19:44:12.890
> 
> 标签：java, arrays, string, object, loops

我有一个假设遍历 2 个 Ojbect 数组的方法，第一个是大小为 50 的菜单，其中包含食谱，其中最多可容纳 10 个称为成分的元素，每个元素最多可容纳 3 个元素，但我只是在寻找它们名字！我想在食谱中获取那些成分元素的匹配名称并将它们添加到我的字符串数组中，然后返回它，这是我的代码......

```
public class Recipe implements Cloneable
{

    String Name;

    final int INGREDIENT_ARRAY_MAX = 10;

    Ingredient Ingredients[] = new Ingredient[INGREDIENT_ARRAY_MAX];

    public class RecipeBook
    {

        final static int MENU_ARRAY_MAX = 50;

        static Recipe Menu[] = new Recipe[MENU_ARRAY_MAX];

        public static String[] getRecipesByIngredient(String ingredientName)
        {

            String[] targetRecipes = new String[MENU_ARRAY_MAX];

            int counter = 0;

            for (int j = 0; j < Menu.length; j++)
            {

                if (Menu[j] == null)
                {

                    break;

                }

                else
                {

                    for (int k = 0; k < Menu[j].Ingredients.length; k++)
                    {

                        System.out.println(Menu[j].Ingredients[k]);

                        if (Menu[j].Ingredients[k].getName().equals(ingredientName))
                        {

                            targetRecipes[counter] = Menu[j].getName();
                            counter++;

                        }
                    }
                }
            }

            return targetRecipes;

        }
    }
} 
```

现在我知道它不起作用以及为什么，但我不确定解决方案。目前我每个食谱中只有 3 个食谱和 3 个成分！上面的东西仅供参考，它们是RecipeBook (Menu) 和Recipes (Ingredients) 的对象数组。

现在，当运行此代码时，我将进入 NullPointerException，因为尝试针对字符串测试空值，但我如何让它检查配方，如果它没有找到任何东西，它会转到菜单中的下一个配方，如果有，它只是添加它，但会继续检查直到完成。我尝试添加“if”语句来检查空值而不是空值，但它变得复杂，它仍然没有让我的程序返回检查其余数组。我知道第一个“if”可以保留，因为如果我在 Menu 中签入的位置为空，则其余部分必须为空，因此没有必要再进一步。但是我如何检查成分数组，找到一些东西，添加它，并回到菜单中筛选含有该成分的食谱？是否可以在内部循环中添加一个 if 来检查是否为 null，如果是，则返回到外部循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:20:22.473

如果条件如下更新

第一个如果条件：

if (Menu[j] == null || Menu[j].Ingredients == null || Menu[j].Ingredients.length ==0)

第二个 if 条件：

if (Menu[j].Ingredients[k] != null && ingredientsName.equal(Menu[j].Ingredients[k].getName())) 如果有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T20:21:37.003

我不知道你是如何填充配方数组的，但我可以说你的代码缺少很多空值检查。我会这样（代码未编译/测试）：

```
public static String[] getRecipesByIngredient(String ingredientName) {
    String[] targetRecipes = null;
    // check input parameter ingredientName against null and do lookup only if it is not null
    if(ingredientName != null) {
        // init the result array and do look up
        targetRecipes = new String[MENU_ARRAY_MAX];
        for (int j = 0; j < Menu.length; j++) {
            // you might run into NPE if Menu[j] or if the array of ingredients in Menu[j] (Menu[j].Ingredients) is null
            if(Menu[j] != null && Menu[j].Ingredients != null) {
                for (int k = 0; k < Menu[j].Ingredients.length; k++) {
                    // Menu[j].Ingredients[k] may also be null
                    // Menu[j].Ingredients[k].getName() may also be null but no need to check it since
                    // you call equals of the string object ingredientName witch you already checked
                    // and equals(null) is always false in that case
                    if (Menu[j].Ingredients[k] != null && ingredientName.equals(Menu[j].Ingredients[k].getName()) {
                        // here you might want to check Menu[j].getName() against null otherwise you'll have
                        // a null inside your result array (this is some like a land mine) unless you want
                        // to check against null while iterating over you result array
                        if(Menu[j].getName() != null) {
                            targetRecipes[counter++] = Menu[j].getName();
                        }
                    }
                }
            } // save the else...
        }
    } // else targetRecipes is still null, with witch you may want to say "no result found"
    return targetRecipes;
} 
```

# database - Access 中的表关系问题

> ID：14840486
> 
> 赞同：0
> 
> 时间：2013-02-12T19:44:42.723
> 
> 标签：database, ms-access, table-relationships

我正在创建一个项目，教师在其中输入学生的课程成绩，并对该数据进行各种报告。

这是一门课程，其中有许多单元，并且在这些单元中有许多评估目标，学生可以满足这些目标以获得不及格、通过、优异或优异成绩。

在课程中有 20 个单元，但学校会选择其中的一部分，他们将教给学生。例如，我的学校选择 Unit 1、3、4、7、15 和 20。

下面是我当前数据库的图像

[http://i.stack.imgur.com/Glb7P.png](http://i.stack.imgur.com/Glb7P.png)

[http://i.stack.imgur.com/In7Rq.png](http://i.stack.imgur.com/In7Rq.png)

我遇到的问题是访问不会让我拥有多个具有相同单元的学生。另外我想要一个单独的表，我可以在其中包含名称和描述等单位信息，但我不知道该怎么做？

希望我已经提供了足够的信息，如果没有，请不要犹豫发表评论。

任何帮助将不胜感激！

非常感谢，罗宾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T19:53:17.637

您需要 am to n 关系。由于这些是逻辑概念而不是物理概念，因此您需要在学生和单元之间添加一个连接表，以便您拥有

```
student <---- 1 : n ---> student_unit <--- n : 1 ---> unit 
```

```
表单元
----------
单位 ID (PK)
姓名
描述

表 student_unit
------------------
学生证（PK、FK）
单位 ID（PK、FK）

```

我还会区分描述评估 ( `tlkpAssessment`) 的表和`tblUnit and`tlkpAssessment `. It allows you to assign the same assessment to different units. In these junction tables the ID columns are of type`Number、Long Integer `which matches the`Auto Number `column usually used for the IDs in the main tables. I also would set their`Required `property to`Yes` 之间的另一个函数表。

前缀`tlkp`表示“查找表”。我通常将所有表名保持为单数。

![在此处输入图像描述](../Images/7c88d0e48c9c9fa128534557a1e14436.png)

# twitter-bootstrap - Bootstrap 下拉菜单中的焦点输入字段

> ID：14840487
> 
> 赞同：1
> 
> 时间：2013-02-12T19:44:49.843
> 
> 标签：twitter-bootstrap

我很难在 Twitter Bootstrap 的下拉菜单中集中输入字段。我的html标记如下：

```
<div class="btn-group">
  <button class="btn dropdown-toggle" data-toggle="dropdown">
    Groups <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
     <li><a href="#">Friends <i class="icon-ok pull-right"></i></a></li>
     <li><a href="#">Family <i class="icon-ok pull-right"></i></a></li>
     <li><a href="#">Other</a></li>
     <li class="divider" />
     <li><input type="text" class="input-block-level" placeholder="New group" /></li>
  </ul>
</div> 
```

我还为此创建了一个 jsFiddle：http: [//jsfiddle.net/Yppqw/2/](http://jsfiddle.net/Yppqw/2/)

请告诉我如何在聚焦输入字段时保持下拉可见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:00:59.400

尝试使用“btn-group”类向您的元素添加“下拉”类

您可能可以删除该 btn-group 类，除非您计划在此按钮旁边放置其他按钮。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-04-24T09:49:27.883

尝试这个

```
<div class="dropdown inputdropdown">
                  <input class="searchformss dropdown-toggle" type="text" data-toggle="dropdown" placeholder="test" />
                  <div class="dropdown-menu">
                    <a class="dropdown-item">test</a>
                    <a class="dropdown-item">Another action</a>
                    <a class="dropdown-item">Something else here</a>
                  </div>
                </div> 
```

# php - include() 一个文件，所以每个函数都可以访问

> ID：14840490
> 
> 赞同：0
> 
> 时间：2013-02-12T19:44:59.400
> 
> 标签：php

如果我这样做

```
include('orderConst_pdo_connect.php');
switch  ($type){
    case "retrieve":
        retrieve_address($customer_id);
        break;
    case "new":
        new_address($customer_id, $address);
        break;
    case "update":
        update_address($customer_id, $address_id);
        break;
    case "delete":
        delete_address($customer_id, $address_id);
        break;              
}

function retrieve_address($customer_id){
    $sth = $dbh->prepare("
    SELECT * 
    FROM   address 
    WHERE  customer_id = :customer_id 
    ORDER  BY CASE 
                WHEN use_frequency IS NULL THEN id 
                ELSE use_frequency 
              END ASC");

.... 

} 
```

我得到错误

`Fatal error: Call to a member function prepare() on a non-object`

直到我把`include('orderConst_pdo_connect.php')`函数放在里面。有没有办法包含文件并在页面顶部授予对它的函数访问权限，或者我是否需要将它包含在使用它的每个函数中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T19:46:44.420

在包含文件中定义的变量，默认情况下在函数中不可用。您可以授予您的函数访问此变量的权限`global $dbh`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T20:20:38.763

而不是使用`global`，只需执行以下操作：

```
function retrieve_address($dbh, $customer_id) {
    // blah
} 
```

# mysql - mysql中分组行的排序

> ID：14840491
> 
> 赞同：0
> 
> 时间：2013-02-12T19:45:02.950
> 
> 标签：mysql, group-by, sql-order-by

```
SELECT t1.item_id, t1.item, t1.created, t1.owner, t1.type, t1.fld, t2.tag
FROM items AS t1
INNER JOIN tagged AS t2 ON t1.item_id = t2.item_id
WHERE tag
IN ('how', 'jkas', 'bodor', 'zimp', 'ctuo', 'sjex', 'kek'
)
GROUP BY item_id
ORDER BY t1.created DESC 
LIMIT 0 , 100 
```

如何通过与 IN TAG 匹配的数量来排序项目？我深入手册，找不到答案，迷失在我不理解的东西中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:47:19.180

您可以使用`COUNT`并将结果放入子查询中：

```
SELECT * 
FROM (
   SELECT t1.item_id, t1.item, t1.created, t1.owner, 
      t1.type, t1.fld, t2.tag, COUNT(DISTINCT t2.tag) tagCount
   FROM items AS t1
      INNER JOIN tagged AS t2 ON t1.item_id = t2.item_id
   WHERE tag IN ('how', 'jkas', 'bodor', 'zimp', 'ctuo', 'sjex', 'kek')
   GROUP BY item_id
) t
ORDER BY tagCount DESC, created DESC 
LIMIT 0 , 100 
```

# android - 恢复快照时日期未更新

> ID：14840495
> 
> 赞同：0
> 
> 时间：2013-02-12T19:45:21.713
> 
> 标签：android, emulation, snapshot

当我启动设置为保存快照的模拟器时，模拟器仍然使用自上次运行以来的日期，即 4 天前。我正在尝试使用我的应用程序，并且我需要进行此更新，以便我可以正确测试事物，因为我的应用程序使用带有日期的日志。

如何在不丢失快照的所有数据的情况下解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:31:38.690

好吧，我只需要进入设置并禁用“自动日期”，然后手动设置操作系统的日期。

# javascript - 为什么我的请求只返回 JSON，我的页面丢失

> ID：14840496
> 
> 赞同：0
> 
> 时间：2013-02-12T19:45:22.473
> 
> 标签：javascript, jquery, asp.net-mvc, json, jquery-validation-engine

当我编辑产品时，客户端验证有效。我还想检查服务器端验证。我将以下代码用于其他对象。有效。但我在产品编辑页面中使用相同的代码。这没用：

```
jQuery(document).ready(function () {
            ...
            if (jQuery('#ProductEditForm').validationEngine('validate')) {
                jQuery.post('/Product/Edit', {
                    ProductId: jQuery('#ProductId').val(),
                    Price: jQuery('#Price').val(),
                    Name: jQuery('#Name').val(),
                    formname: 'Product_Edit_Form',
                    formtype: 'ProductEditF'
                }, function (result) {
                    if (!result.success) {
                      alert(result.error);
                    }
                });
                return false;
            } else {
                return false;
            }
           ...
 }); 
```

在产品控制器中：

```
[HttpPost]
public ActionResult Edit(Product model)
 {
  var result = //My Edit  operation
  if (result.IsSuccessfull)
  {
   return Json(new { error = "", success = true }, JsonRequestBehavior.AllowGet);
  }
  else
  {
   return Json(new { error = "Error occured!", success = false }, JsonRequestBehavior.AllowGet);
  }
} 
```

当结果不成功时，动作只返回这一行： ![在此处输入图像描述](../Images/f6217fc75df0bbf6b4875981412d8625.png)

为什么我的页面会丢失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:55:41.330

我认为你想要的是这样的：

```
 jQuery.post('/Product/Edit', {
                ProductId: jQuery('#ProductId').val(),
                Price: jQuery('#Price').val(),
                Name: jQuery('#Name').val(),
                formname: 'Product_Edit_Form',
                formtype: 'ProductEditF',
                success: function(){
            alert('success');
      },
      error: function(){
        alert('failure');
      }
            }); 
```

# javascript - Firefox 中的 Javascript 加载不正确

> ID：14840504
> 
> 赞同：1
> 
> 时间：2013-02-12T19:45:43.507
> 
> 标签：javascript, jquery, firefox, leaflet

首先，我向任何阅读本文的人道歉。我遇到了相当多的 JS 问题，这是我见过的最棘手的问题。我会尽力给出一个清晰的描述，但我可能需要修改它。

我在 SugarCRM 的内联框架中加载了以下页面：

```
<head>
<link rel="stylesheet" href="style/style.css" />
</head>
<body>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" src="js/index_controller.js"></script>
<table class="form_text" style="width: 100%; height: 100%;" cellpadding="5">
    <tr>
        <td><iframe id="map_frame" 
                style="width: 100%; height: 100%; overflow-y: hidden; border: solid 1px #DDDDDD"
                scrolling="no"
                src="map.php?<?php
                    foreach ( $_REQUEST as $key => $value ) {
                        echo $key . "=" . $value . "&";
                    }?>"></iframe>
        </td>
        ...
        </td>
    </tr>
</table>
</div>
<script type="text/javascript">
    parent.$("iframe").each(function(iel, el) {
          if(el.contentWindow === window) {
              var to_remove = $(el).parent().prev();
              $(to_remove).remove();
              $(el).css("border", "none");
          }
    });
    $(document).ready(function(){
        updateMap();
    });
</script>
</body> 
```

在该页面的 iframe 中，我有这个：

```
<head>
<link rel="stylesheet" href="style/style.css" />
<!--[if lte IE 8]>
 <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.4/leaflet.ie.css" />
 <!--[endif]-->
<link rel="stylesheet"
href="http://cdn.leafletjs.com/leaflet-0.4/leaflet.css" />
<script src="js/jquery-1.9.1.js"></script>
</head>
<body>
<script type="text/javascript" src="../include/DashletContainer/Containers/DCMenu.js">    </script>
<script type="text/javascript" src="js/arrayList.js"></script>
<script type="text/javascript" src="js/custom_map_controls.js"></script>
<div id="map" style="height: 100%"></div>
<form action="../index.php" method="post" name="DetailView"
id="formDetailView">
<input type="hidden" name="module" value=""> <input type="hidden"
    name="record" value=""> <input type="hidden" name="return_action"> <input
    type="hidden" name="return_module"> <input type="hidden"
    name="return_id"> <input type="hidden" name="module_tab"> <input
    type="hidden" name="isDuplicate" value="false"> <input type="hidden"
    name="offset" value="1"> <input type="hidden" name="action"
    value="EditView"> <input type="hidden" name="sugar_body_only"> <input
    type="hidden" name="prospect_id" value="">
</form>
<script type="text/javascript" src="js/map_icons.js"></script>
<script type="text/javascript" src="js/map_controller.js"></script>
<script src="js/leaflet-0.4.5.js"></script>
</body> 
```

这`leaflet-0.4.5.js`脚本在评估时会创建一个称为 L 的全局可用对象，它可以访问所有 Leaflet 映射框架的功能。在我的 map_controller.js 中，我向 L.Map 添加了一些特殊功能，该函数用于创建实际的地图对象。这在 Chrome 中运行良好，当我直接在浏览器选项卡中加载页面时，它在 Firefox 中运行良好。但是当我按预期加载它时，在内联框架内的 SugarCRM 页面中，我在 JS 控制台中收到错误“L.insert function name here is not defined”。如果我只刷新 iframe 而不重新加载整个 SugarCRM 页面，则地图会按预期显示。我现在正在通过捕获异常并在它发生时强制页面重新加载来解决这个问题，但我真的很想知道为什么会发生这种情况。一世'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:09:32.070

您的问题是`$(document).ready`在*父*页面上使用。

这将在 HTML 解析器完成对父级的解析后立即运行。但是它会到达 iframe 内部，并且取决于 iframe 内的各种脚本已经加载，它们可能还没有到那个时候。基本上，这是顶级页面的 HTTP 响应和子框架中脚本的 HTTP 响应之间的竞争。

正确的方法是从 onload 或至少从 DOMContentLoaded （这是`$(document).ready`挂钩的）在子节点上触发的点运行初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:48:23.133

您应该使用某种依赖管理，例如[LABjs](http://labjs.com/)或[RequireJS](http://requirejs.org/)，以确保您的脚本以正确的顺序加载和执行。

# javascript - JS：如何将带有变量的数组附加到 JSON 中？

> ID：14840510
> 
> 赞同：1
> 
> 时间：2013-02-12T19:46:16.740
> 
> 标签：javascript, jquery, json, string

**给定以下数据：**

```
var json = [ 
{ 'myKey': 'A', 'status': 0 },
{ 'myKey': 'B', 'status': 1 },
{ 'myKey': 'C', 'status': 1  },
{ 'myKey': 'D', 'status': 1 }
]; 
```

我想附加**一个带有变量“Id”的新数组**，例如：

```
var Id = "aNewLetterFunction";
json.push({'myKey':'+Id+','status':1}); //this doesn't work 
```

我该怎么办，因为 +Id+ 本身不被视为变量？JSfiddle.net 赞赏。

**编辑：** [小提琴可用](http://jsfiddle.net/7DdKN/)

* * *

我尝试了各种方法，例如：

```
json.push('{"myKey":"'+Id+'","status":1},'); 
```

或者

```
var ar1 = '{"myKey":"';
var Id = Id;
var ar2 = '","status":1},';
json.push(ar1+Id+ar2); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T19:49:32.763

`json`可能不是一个好的变量名，因为您有一个对象数组，而 JSON 根据定义是一个字符串。

撇开那条注释不谈，您只需构造一个对象文字并推送它：

```
var Id = "aNewLetterFunction";
json.push({
    myKey: Id,
    status: 1 
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T19:48:20.950

创建对象，不要创建 JSON 字符串：

```
json.push({
    myKey:Id,
    status:'1'
}); 
```

您不想向 JSON 添加另一个值，而是向**可以解析为 JSON 字符串但不是字符串的数组添加另一个值。**

[**现场演示**](http://jsfiddle.net/ksXaS/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T19:48:55.640

只需使用

```
json.push({'myKey':Id, 'status':1}); 
```

您不想要带有变量名称的字符串，而是使用变量？

# xml - 来自 JSP 的 XML Servlet 请求

> ID：14840512
> 
> 赞同：0
> 
> 时间：2013-02-12T19:46:19.243
> 
> 标签：xml, ajax, jsp, servlets, webserver

我是 JSP 和 Servlet 方面的新手。
我有一个构建并返回 XML 文件的 Servlet。现在我想创建一个 JSP 页面，该页面对该 servlet 执行请求，以便获取 xml 并将其格式化为 HTML 表。
如何从我的 JSP 页面向我的 Servlet 发送请求？

换句话说，这就是我想要设计的：

1.  用户使用此参数打开 JSP 页面：`artist=Dream Theater`
2.  JSP 页面向我的 Servlet 发送请求以获取艺术家的歌曲
3.  Servlet 从数据库中读取艺术家的歌曲并以 XML 格式返回列表
4.  JSP 页面创建了一个漂亮的 HTML 表格，其中包含数据

是否有意义？我知道，Servlet 可以直接返回带有数据的 HTML，但我想使用 XML：通过这种方式，我可以从不同的上下文（例如，从移动应用程序）访问我需要的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:55:06.727

我用 JQuery 和 Ajax 解决了：

```
$.ajax({
    type : "GET",
    url : MyServlet,
    data : {
        artist: myArtist,
    },
    success : function(data) {
        //Data to HTML
    }
}); 
```

# c# - 没有匹配的绑定可用，并且类型在 Ninject 中不可自绑定

> ID：14840515
> 
> 赞同：10
> 
> 时间：2013-02-12T19:46:32.977
> 
> 标签：c#, ninject, ninject.web.mvc

我正在使用 Ninjec、Ninject.Web.MVC 和 Ninject.Web.Common

当我启动我的 mvc 应用程序时，我收到此绑定错误：

我的绑定有什么问题？

> 激活 DbConnection 时出错
> 
> 没有匹配的绑定可用，并且该类型不可自绑定。
> 
> 激活路径：
> 
> 4) 将依赖DbConnection注入到DbContext类型构造函数的参数existingConnection中
> 
> 3) 将依赖 DbContext 注入 GenericRepository{User} 类型的构造函数的参数 dbContext
> 
> 2) 将依赖 IGenericRepository{User} 注入 HomeController 类型的构造函数的参数 repo
> 
> 1) 请求 HomeController
> 
> 建议：
> 
> 1) 确保您已经为 DbConnection 定义了一个绑定。
> 
> 2) 如果绑定是在模块中定义的，请确保该模块已加载到内核中。
> 
> 3) 确保您没有意外创建多个内核。
> 
> 4) 如果您使用构造函数参数，请确保参数名称与构造函数参数名称匹配。
> 
> 5) 如果您使用自动模块加载，请确保搜索路径和过滤器正确。

```
public interface IGenericRepository<T> where T : class
{
}

public class GenericRepository<T> : IGenericRepository<T> where T : class
{
        public GenericRepository(TLPContext dbContext)
        {
            DbContext = dbContext;
        }

        protected TLPContext DbContext { get; private set; }
}

[assembly: WebActivator.PreApplicationStartMethod(typeof(TLP.App_Start.NinjectWebCommon), "Start")]
[assembly: WebActivator.ApplicationShutdownMethodAttribute(typeof(TLP.App_Start.NinjectWebCommon), "Stop")]

namespace TLP.App_Start
{
    using Microsoft.Web.Infrastructure.DynamicModuleHelper;
    using Ninject;
    using Ninject.Web.Common;
    using System;
    using System.Web;
    using TLP.DataAccess;
    using TLP.DataAccess.Contract;
    using TLP.DataAccess.Implementation;

    public static class NinjectWebCommon
    {
        private static readonly Bootstrapper bootstrapper = new Bootstrapper();
        public static void Start()
        {
            DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
            DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
            bootstrapper.Initialize(CreateKernel);
        }

        public static void Stop()
        {
            bootstrapper.ShutDown();
        }

        private static IKernel CreateKernel()
        {
            var kernel = new StandardKernel();
            kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
            kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();
            kernel.Bind<TLPContext>();
            kernel.Bind(typeof(IGenericRepository<>)).To(typeof(GenericRepository<>));
            return kernel;
        }
    }
}

[DbModelBuilderVersion(DbModelBuilderVersion.V5_0)]
    public class TLPContext : DbContext
    {
        public TLPContext()
            : base("DefaultConnection")
        {
            // We do not want implicit uncontrollable lazy loading, instead we use the explicit Load method
            this.Configuration.LazyLoadingEnabled = false;
        }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();

            // Primary key
            modelBuilder.Entity<User>().HasKey(p => p.UserId);
            modelBuilder.Entity<User>().Property(p => p.FirstName).HasMaxLength(30).IsRequired();
            modelBuilder.Entity<User>().Property(p => p.RegisteredAt).IsRequired();
        }

        public DbSet<User> Users { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T20:18:06.160

Ninjects[按以下顺序](https://github.com/ninject/ninject/wiki/Injection-Patterns)查找构造函数：

1.  标记为的构造函数`[Inject]`
2.  参数最多的构造函数
3.  默认构造函数

在您的情况下，您的`TLPContext`构造函数没有标记，`[Inject]`因此适用 2\. 规则，Ninject 将尝试解析[基类构造函数](http://msdn.microsoft.com/en-us/library/gg696127%28v=vs.103%29.aspx)，然后抛出异常。

所以你可以通过用标记你的构造函数来解决这个问题`InjectAttribute`

```
[Inject]
public TLPContext()
   : base("DefaultConnection")
{
   this.Configuration.LazyLoadingEnabled = false;
} 
```

或者您可以在注册时使用该方法[指定构造函数](http://www.planetgeek.ch/2011/05/28/ninject-constructor-selection-preview/)：`ToConstructor``TLPContext`

```
kernel.Bind<TLPContext>().ToConstructor(_ => new TLPContext()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-12T15:30:28.617

我曾经有过类似的问题。我正在使用`Ninject MVC`并尝试`kernel`使用新的`StandardKernel`ctor来实例化它，但它没有用。

我的问题是@Elisa 前面提到的第 3 点：`Ensure you have not accidentally created more than one kernel.`

我通过使用解决了它`bootstrapper.Kernel`。

# python - python中的正确线程

> ID：14840517
> 
> 赞同：1
> 
> 时间：2013-02-12T19:46:42.360
> 
> 标签：python, multithreading, mq

我正在编写一个家庭自动化助手——它们基本上是类似守护进程的小型 python 应用程序。他们可以将每个进程作为一个单独的进程运行，但是由于将创建一个小型调度程序，我将在它们自己的线程中生成每个守护进程，并且能够在将来线程死亡时采取行动。

这就是它的样子（使用两个类）：

```
from daemons import mosquitto_daemon, gtalk_daemon
from threading import Thread

print('Starting daemons')
mq_client = mosquitto_daemon.Client()
gt_client = gtalk_daemon.Client()

print('Starting MQ')
mq = Thread(target=mq_client.run)
mq.start()

print('Starting GT')
gt = Thread(target=gt_client.run)
gt.start()

while mq.isAlive() and gt.isAlive():
    pass
print('something died') 
```

问题是 MQ 守护程序（moquitto）可以正常工作，我应该直接运行它：

```
mq_client = mosquitto_daemon.Client()
mq_client.run() 
```

它将开始并挂在那里听所有涉及相关主题的消息——这正是我正在寻找的。

但是，在调度程序中运行会使其行为怪异——它会收到一条消息，然后停止执行，但报告该线程是活动的。鉴于它在没有线程woodoo 的情况下工作正常，我假设我在调度程序中做错了什么。

我引用 MQ 客户端代码以防万一：

```
import mosquitto
import config
import sys
import logging

class Client():
    mc = None

    def __init__(self):
        logging.basicConfig(format=u'%(filename)s:%(lineno)d %(levelname)-8s [%(asctime)s]  %(message)s', level=logging.DEBUG)
        logging.debug('Class initialization...')
        if not Client.mc:
            logging.info('Creating an instance of MQ client...')
            try:
                Client.mc = mosquitto.Mosquitto(config.DEVICE_NAME)
                Client.mc.connect(host=config.MQ_BROKER_ADDRESS)
                logging.debug('Successfully created MQ client...')
                logging.debug('Subscribing to topics...')
                for topic in config.MQ_TOPICS:
                    result, some_number = Client.mc.subscribe(topic, 0)
                    if result == 0:
                        logging.debug('Subscription to topic "%s" successful' % topic)
                    else:
                        logging.error('Failed to subscribe to topic "%s": %s' % (topic, result))
                logging.debug('Settings up callbacks...')
                self.mc.on_message = self.on_message
                logging.info('Finished initialization')
            except Exception as e:
                logging.critical('Failed to complete creating MQ client: %s' % e.message)
                self.mc = None
        else:
            logging.critical('Instance of MQ Client exists - passing...')
            sys.exit(status=1)

    def run(self):
        self.mc.loop_forever()

    def on_message(self, mosq, obj, msg):
        print('meesage!!111')
        logging.info('Message received on topic %s: %s' % (msg.topic, msg.payload)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T20:01:43.907

您正在传递`Thread`另一个类实例的`run`方法......它真的不知道如何处理它。

`threading.Thread`可以以两种一般方式使用：生成一个 Thread 包装的独立函数，或者作为具有`run`方法的类的基类。在您的情况下，似乎基类是要走的路，因为您的`Client`类有一个`run`方法。

在您的课程中替换以下内容`MQ`，它应该可以工作：

```
from threading import Thread

class Client(Thread):
    mc = None

    def __init__(self):
        Thread.__init__(self) # initialize the Thread instance
        ...
    ...

    def stop(self):
        # some sort of command to stop mc
        self.mc.stop() # not sure what the actual command is, if one exists at all... 
```

然后在调用它时，不要这样做`Thread`：

```
mq_client = mosquitto_daemon.Client()
mq_client.start() 

print 'Print this line to be sure we get here after starting the thread loop...' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T20:15:18.047

Several things to consider:

1.  zeromq hates being initialized in 1 thread and run in another. You can rewrite Client() to be a Thread as suggested, or write your own function that will create a Client and run that function in a thread.

2.  Client() has a class level variable mc. I assume that mosquitto_daemon and gtalk_daemon both use the same Client and so they are in contention for which Client.mc wins.

3.  "while mq.isAlive() and gt.isAlive(): pass" will eat an entire processor because it just keeps polling over and over without sleep. Considering that python is only quasi-threaded (the Global Interpreter Lock (GIL) allows only 1 thread to run at a single time), this will stall out your "daemons".

4.  Also considering the GIL, the orignal daemon implementation is likely to perform better.

# java-native-interface - FFmpegFrameRecorder 问题

> ID：14840521
> 
> 赞同：0
> 
> 时间：2013-02-12T19:46:48.290
> 
> 标签：java-native-interface, javacv

在使用 JavaCV 中的 FFmpegFrameRecorder 时，JVM 崩溃并显示以下消息：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x00000000699d6a64, pid=4076, tid=308
#
# JRE version: 7.0_13-b20
# Java VM: Java HotSpot(TM) 64-Bit Server VM (23.7-b01 mixed mode windows-amd64 compressed oops)
# Problematic frame:
# C  [avformat-54.dll+0xd6a64]  av_read_play+0x4
#
# Failed to write core dump. Minidumps are not enabled by default on client versions of Windows
#
# An error report file with more information is saved as:
# C:\Users\Sagar Jadhav\Documents\NetBeansWorkspace\OpenCV\hs_err_pid4076.log
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#
Java Result: 1 
```

* * *

代码如下：

```
package com.opencv.windows;

import com.googlecode.javacv.CanvasFrame;
import com.googlecode.javacv.FFmpegFrameGrabber;
import com.googlecode.javacv.FFmpegFrameRecorder;
import com.googlecode.javacv.OpenCVFrameGrabber;
import com.googlecode.javacv.cpp.opencv_core;

public class VideoRecorderDemo
{
    OpenCVFrameGrabber grabber;
    FFmpegFrameRecorder recorder;
    CanvasFrame canvasFrame;

    VideoRecorderDemo() 
    {
        grabber = new OpenCVFrameGrabber("c:\\sample.mp4");
        recorder = new FFmpegFrameRecorder("c:\\sample1.mp4", 2);
        canvasFrame = new CanvasFrame("Video Recorder Demo");      
        canvasFrame.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);

        try
        {
            grabber.start();

            opencv_core.IplImage image;
            while((canvasFrame.isVisible()) && (image = grabber.grab()) != null)
                canvasFrame.showImage(image);
        }
        catch(Exception e)
        {
            System.out.println("Error : " + e.getMessage());
        }

        init();
        startRecording();
        stopRecording();
    }

    void init()
    {
        try
        {
            grabber.start();
            recorder.start();
        }
        catch(Exception e)
        {
            System.out.println(e.getMessage());
        }
    }

    void startRecording()
    {
        try
        {
            opencv_core.IplImage image;
            while((canvasFrame.isVisible()) && (image = grabber.grab()) != null)
            {   
                recorder.record(image);
                canvasFrame.showImage(image);
            }
        }
        catch(Exception e)
        {
            System.out.println(e.getMessage());
        }
    }

    void stopRecording()
    {
        try
        {
            grabber.stop();
            recorder.stop();
            canvasFrame.dispose();
        }
        catch(Exception e)
        {
            System.out.println(e.getMessage());
        }
    }

    public static void main(String args[])
    {
        new VideoRecorderDemo();
    }
} 
```

我正在使用 OpenCV 2.4.3 库和 zeronoe 提供的 ffmpeg 库（ffmpeg-20130209-git-969039e-win64-shared）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:51:14.627

你必须使用这个版本的ffmpeg：

[http://ffmpeg.zeranoe.com/builds/win64/shared/ffmpeg-20121029-git-11d695d-win64-shared.7z](http://ffmpeg.zeranoe.com/builds/win64/shared/ffmpeg-20121029-git-11d695d-win64-shared.7z)

我遇到了你的问题，但我搜索了 JavaCV 自述文件，发现 JavaCV 已使用此版本的 ffmpeg 编译

祝你好运

# python - sunburnt：解析响应时出现 SolrError

> ID：14840524
> 
> 赞同：0
> 
> 时间：2013-02-12T19:47:03.160
> 
> 标签：python, solr, sunburnt

在我打算在 Django 应用程序中使用这个界面时，我遇到了以下错误跟踪：

> > > import sunburnt
> > > si = `("http://localhost:8984/solr/sprod/")` sunburnt.SolrInterface si.query(global_attr_article_type='casual shoes').execute()
> > > Traceback（最近一次调用最后）：
> > > 文件“”，第1行，在
> > > 文件“/usr/local/lib/python2.7 /dist-packages/sunburnt/search.py​​”，第 599 行，在执行
> > > 结果 = self.interface.search(**self.options())
> > > 文件“/usr/local/lib/python2.7/dist-packages/ sunburnt/sunburnt.py”，第 212 行，在搜索中
> > > 返回 self.schema.parse_response(self.conn.select(params))
> > > 文件“/usr/local/lib/python2.7/dist-packages/sunburnt/schema.py "，第 510 行，在 parse_response
> > > 返回 SolrResponse(self, msg)
> > > 文件“/usr/local/lib/python2.7/dist-packages/sunburnt/schema.py”，第 652 行，在**init**
> > > self.result = SolrResult(schema, result_node)
> > > 文件“/usr/local/lib/python2\. 7/dist-packages/sunburnt/schema.py"，第 691 行，在**init**
> > > self.docs = [schema.parse_result_doc(n) for n in node.xpath("doc")]
> > > 文件 "/usr/local/lib/ python2.7/dist-packages/sunburnt/schema.py”，第 519 行，在 parse_result_doc 中
> > > 返回 dict([self.parse_result_doc(n) for n in doc.getchildren()])
> > > 文件“/usr/local/lib/python2 .7/dist-packages/sunburnt/schema.py"，第 516 行，在 parse_result_doc
> > > 值 = [self.parse_result_doc(n, name) for n in doc。得到孩子（）]
> > > 文件“/usr/local/lib/python2.7/dist-packages/sunburnt/schema.py”，第 525 行，在 parse_result_doc
> > > 返回名称中，SolrFieldInstance.from_solr(field_class, doc.text or '').to_user_data()
> > > 文件“/usr/local/lib/python2.7/dist-packages/sunburnt/schema.py”，第 326 行，在 from_solr
> > > self.value = self.field.from_solr(data)
> > > 文件“/usr/local/lib/python2 .7/dist-packages/sunburnt/schema.py”，第 161 行，在 from_solr
> > > 返回 self.normalize(value)
> > > 文件“/usr/local/lib/python2.7/dist-packages/sunburnt/schema.py”，第 219 行，在 normalize
> > > (value , **self.class** , self.name))
> > > SolrError：类'sunburnt.schema.SolrFieldType_SolrIntField_indexed_True_omitNorms_True_stored_True'（字段设计器）的值无效`

索引文档中的设计器字段确实为空
`<arr name="designer"> <int/> </arr> <arr name="discount"> <float>0.0</float> </arr> <arr name="discount_label"> <str/> </arr>`

这就是模式的内容
`<fieldType name="integer" class="solr.IntField" omitNorms="true"/>
..
...
....
<field name="designer" type="integer" indexed="true" stored="true"/>`

我知道这与该字段为空有关，但由于架构没有在该字段的任何地方提及 'required' = true ，我想知道到底是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T02:49:57.673

我猜

```
<arr name="designer"> <int/> </arr> 
```

暗示您正在尝试在 Solr 中存储多值整数字段？但是您的字段定义`designer`需要一个单值整数。如果您没有该文档的设计器字段，那么您索引的文档应该没有该字段的任何内容。

# javascript - while(true) 与 setInterval(function(),0)

> ID：14840527
> 
> 赞同：26
> 
> 时间：2013-02-12T19:47:07.817
> 
> 标签：javascript, html

**设置间隔（）**

> **重复调用函数或执行代码片段，每次调用该函数之间有固定的时间延迟。**

**尽管（）**

> **只要测试条件评估为真，就创建一个执行指定语句的循环。在执行语句之前评估条件。**

如果我使用`while(true)`执行特定语句，我的浏览器要么崩溃（**Firefox**），滞后（**Opera**），或者该语句不会被执行（**Chrome**），但如果我使用**0 秒**`setInterval()`的固定时间，一切正常，即使它只有 0 秒，并且在逻辑上不能快于 0 秒，但为什么会发生这种情况？**`while(true)`**

 ****while()**示例：

```
<!DOCTYPE html>
<html>
    <body>
        <div id="counter"></div>
        <script>
            var i = 0;
            while (true)
            {
                document.getElementById("counter").innerHTML += i++; 
            }
        </script>
    </body>
</html> 
```

**setInterval()**示例：

```
<!DOCTYPE html>
<html>
    <body>
        <div id="counter"></div>
        <script>
            var i = 0;
            setInterval(function() { counter() }, 0);
            function counter()
            {
               document.getElementById("counter").innerHTML += i++;
            }
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-12T19:50:36.693

涉及锁定的差异很大。第一种方法，`while`循环将锁定用户的 CPU，因为它永远运行而不会停止，并且会占用 100% 的处理器。`setInterval`实际上有一个隐含的最小数量，并且取决于浏览器。我相信它大约是10毫秒。所以，你`setInterval`实际上只运行了一毫秒左右的简单更新，每 10 毫秒一次。这对处理器来说很苛刻，但不需要 100% 的处理器，并且可以通过操作系统的任务管理来缓解。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-12T19:53:44.240

*   `while(1)`生成一个无限循环，也就是说，JavaScript 将永远运行并且*永远不会*将控制权交还给浏览器，因此它会冻结，因为它无法再进行任何其他操作（直到脚本被杀死）。

*   `setTimeout(func, 0)`从某种意义上说，它的行为有所不同，在它执行之后，控制权被交还给浏览器，然后浏览器可以决定之后要做什么。设置 0ms`setTimeout` **并不能保证**JavaScript 代码在停止后直接运行。使用 0ms 参数，您只需告诉浏览器您希望代码在它停止后直接运行，但浏览器可以在实际执行之前完全自由地执行其他操作。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-02-12T19:51:51.640

浏览器中的 Javascript 是*单线程*和*事件驱动的*。永远不会有两件事同时运行，而事件循环才是王道。如果您的 JS 从未放弃对单个线程的控制（通过结束一个函数），那么没有其他东西可以使用该线程。同一线程处理 JS 和 DOM，因此如果您的 JS 占用线程，用户甚至无法滚动或单击任何内容。

`setInterval`（或者实际上`setTimeout`）延迟为 0（毫秒，而不是秒）仅意味着在给定延迟之后将此函数添加到事件队列中，不能保证该函数将在该确切时间执行。

编辑：实际上，网络工作者可以与主浏览器线程同时运行 JS，但他们看不到任何相同的内存/无法访问 DOM，所以上面的点/假设仍然成立。 .. 如果你想成为 Web 工作者，你需要对 JS/函数式编程有一个很好的理解。

编辑（再次）：你为什么要永远循环？如果您正在投票（我能想到的唯一原因），请不要这样做。几乎总是有更好的方法，尤其是在 JS 中。函数式方法是定义事件发生时要执行的函数（您正在轮询的事物），然后将该函数附加到事件（如何执行此操作取决于事件）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-12T19:54:45.377

while(true) 将阻止任何执行，直到条件循环完成，我们已经知道这永远不会发生。（铬合金）

setInterval 告诉环境每 x 毫秒执行一次任意代码，它不会阻塞您的浏览器，因为“调度程序”仍然具有控制权。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-12T19:58:27.603

您是否有特定的理由使用永无止境的循环，甚至在每一步都操作 DOM？

如果您使用`while`循环，它很可能会完全锁定浏览器和客户端，如果没有以某种方式终止，也可能导致 CPU 过载。

循环`while`试图在尽可能少的微秒内完成它的工作。所以它甚至可能尝试在一秒钟内执行一百万步，甚至更多，在这种情况下，它取决于客户端。但是，以这样的速度更新 DOM 是不可能的。

在 for 的情况下`setInterval`，它与循环有很大的不同`while`，实际上，将其称为 a 更合适`function repeater`。它在给定时间过去后重复给定功能。因此，即使时间为 0，它也有一个检查`if the waiting time has passed now, and should the next repeat be run`.

因此，您可能会认为 while 循环**比 0 秒延迟更即时。****

# c++ - 多次渲染一个对象

> ID：14840528
> 
> 赞同：0
> 
> 时间：2013-02-12T19:47:09.623
> 
> 标签：c++, object, rendering, shader, directx-11

现在我面临在 Directx 11 中多次渲染相同对象的问题，因为该对象具有：

*   漫反射着色器
*   定向照明着色器
*   纹理着色器

现在最终的颜色应该以某种方式将它们全部组合在一起，可能是这样的：

*   渲染漫反射
*   渲染纹理
*   渲染定向

最终颜色 =（漫反射 + 纹理）* 光照 // 虽然不确定

但是如何归档呢？没有效果框架！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T10:26:18.563

它可以在 DirectX11 中通过多种方式实现。首先是制作一个“超级着色器”。这意味着在同一个着色器中进行漫反射、纹理和照明。第二种是使用动态着色器链接，并在运行时将独特的漫反射/纹理/照明着色器动态链接在一起。2010 年 6 月的 sdk 有一个很好的动态着色器链接示例。通常的颜色组合是：

最终颜色 = 漫反射 * 纹理 * 光照

# sql - 在 TSQL 中计算反累积值？

> ID：14840533
> 
> 赞同：1
> 
> 时间：2013-02-12T19:47:24.727
> 
> 标签：sql, tsql

给定一张汽车表及其在不同日期（每个月的第一天）的里程表读数，我如何编写 TSQL（理想情况下，用作 SQL Server 视图）来返回“增量”值？

换句话说，我想要从[Calculate a Running Total in SQL Server](https://stackoverflow.com/questions/860966/calculate-a-running-total-in-sqlserver)进行反向操作。

例子：

在这张桌子上：

```
车牌 ​​| 日期 | 里程
--------------------------
    1 1/1/2000 10000
    1 2000 年 2 月 1 日 11000
    1 2000 年 3 月 1 日 12000
    2 2000 年 1 月 1 日 10000
    2 2000 年 2 月 1 日 11001
    2 2000 年 3 月 1 日 12001
    3 2000 年 1 月 1 日 10000
   （缺少 (3, 2/1/2000) 的数据点）
    3 2000 年 3 月 1 日 12000

```

我们会返回类似的东西（细节/边缘情况很灵活）：

```
车牌 ​​| 日期 | 三角洲
--------------------------
    1 1/1/2000 10000
    1 2000 年 2 月 1 日 1000
    1 3/1/2000 1000
    2 2000 年 1 月 1 日 10000
    2 2000 年 2 月 1 日 1001
    2 2000 年 3 月 1 日 1000
    3 2000 年 1 月 1 日 10000
    3 2000 年 3 月 1 日 2000 年

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T19:52:28.943

这应该适用于 SQL 2005 或更高版本：

```
WITH cteData As
(
   SELECT
      CarId,
      Date,
      Mileage,
      ROW_NUMBER() OVER (PARTITION BY CarId ORDER BY Date) As RowNumber
   FROM
      dbo.Cars
)
SELECT
   C.CarId,
   C.Date,
   CASE
      WHEN P.CarId Is Null THEN C.Mileage
      ELSE C.Mileage - P.Mileage
   END As Delta
FROM
   cteData As C
   LEFT JOIN cteData As P
   ON P.CarId = C.CarId
   And P.RowNumber = C.RowNumber - 1
ORDER BY
   C.CarId,
   C.Date
; 
```

[SQL小提琴](http://www.sqlfiddle.com/#!3/d41d8/8780)

**注意：**这假设“缺少 (3, 2/1/2000) 的数据点”意味着表中没有汽车 3 的行，2000 年 2 月。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T20:04:25.087

窗口功能很棒。但是 SQL Server 在 SQL Server 2012 之前没有您需要的那个。在那里，您有滞后功能：

```
select t.*,
       (Milage - lag(Milage) over (partition by carId order by date)) as Delta
from t 
```

对于早期版本，您可以使用相关子查询：

【上传问题】，唉。

```
 select t.*, (Mileage - prevMileage) as Delta
    from (select t.*,     
                 (select top 1 Mileage    from t t2
                  where t2.carId = t.carId and t2.date < t.date order by desc
                ) as prevDelta 
      from t
     ) t 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T20:54:30.347

尝试在不依赖任何 2012 函数、光标、while 循环等的情况下执行此操作。

这在某些限制范围内有效 - 即 car#3 的条目的空条目对它来说是一个问题：

```
DECLARE @cars table ([id] int, [date] smalldatetime, [mileage] int)
INSERT INTO @cars ([id], [date], [mileage])
SELECT 1, '1/1/2000', 10000 UNION ALL
SELECT 1, '2/1/2000', 11000 UNION ALL
SELECT 1, '3/1/2000', 12000 UNION ALL
SELECT 2, '1/1/2000', 10000 UNION ALL
SELECT 2, '2/1/2000', 11000 UNION ALL
SELECT 2, '3/1/2000', 12000 UNION ALL
SELECT 3, '1/1/2000', 10000 UNION ALL
SELECT 3, '2/1/2000', NULL UNION ALL
SELECT 3, '3/1/2000', 12000

SELECT t1.id, t1.date, t1.mileage, t2.id, t2.date, t2.mileage, t1.mileage - t2.mileage as miles FROM @cars t1
LEFT JOIN @cars t2
ON t1.id = t2.id
AND t1.date = DATEADD(MONTH,1, t2.date) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T22:48:02.317

Same approach as the one from @Richard Deeming, but this one regards possible null values as included in original question.

```
;with cte ( rn, id, date, mileage )
as
(
  select
     row_number() over ( partition by id order by id, date )
     , id
     , date
     , mileage
   from
      cars
   where
      mileage is not null
)
select
  "current".id
  , "current".date
  , delta = isnull( "current".mileage - predecessor.mileage, "current".mileage )
from
  cte as "current"
  left join cte as predecessor
    on "current".id = predecessor.id
    and "current".rn - 1 = predecessor.rn 
```

See [SQL-Fiddle](http://www.sqlfiddle.com/#!3/d6559/14/0).

# java - android中的“finally”阻塞如何运行

> ID：14840534
> 
> 赞同：3
> 
> 时间：2013-02-12T19:47:27.687
> 
> 标签：java, android

在 android 中，对于 finally 块下的代码：

```
1548 finally {
1549                /*
1550                 * clean-up everything...
1551                 */
1552                synchronized (sGLThreadManager) {
1553                    stopEglSurfaceLocked();
1554                    stopEglContextLocked();
1555                }
1556            } 
```

这是否意味着它将由“FinalizerDaemon”运行？

当 trace.txt 显示 FinalizerDaemon 正在等待 ReferenceQueue 时，这意味着什么？

```
 "FinalizerDaemon" daemon prio=5 tid=7 WAIT
  | group="system" sCount=1 dsCount=0 obj=0x419d0c60 self=0x50cf3650
  | sysTid=3933 nice=0 sched=0/0 cgrp=apps handle=1086157112
  | schedstat=( 0 0 0 ) utm=32 stm=9 core=1
  at java.lang.Object.wait(Native Method)
  - waiting on <0x416da5d0> (a java.lang.ref.ReferenceQueue)
  at java.lang.Object.wait(Object.java:401)
  at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:102)
  at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:73)
  at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:169)
  at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T19:53:09.037

无论是否发生异常，finally 都会在 try catch 块的末尾执行。

FinalizerDaemon 与此无关。它与垃圾收集有关。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T19:52:57.080

`finally`和终结器不相关。

`finally`是在`try`-块之后的代码块，无论-`catch`的结果如何，它都会运行。它通常是您可以找到重要的清理代码以防止资源泄漏的地方。`try``catch`

`finalize()`清理对象时，垃圾收集器可以运行终结器（对象的方法）。但是，您不能保证它们会运行，也不能以任何顺序运行，等等。

FinalizerDaemon 可能是一个正在运行`finalize()`方法的线程。在这种情况下，它听起来像是阻塞了 a `ReferenceQueue`，它将保存对有资格完成的对象的引用。

对于它的价值，这里没有特定于 Android 的行为。这只是 Java 行为。

# php - 在 php 中，将所有 $_GET 变量保存在会话变量中，并再次通过 $_GET 访问它们

> ID：14840541
> 
> 赞同：0
> 
> 时间：2013-02-12T19:48:00.417
> 
> 标签：php

我想将所有`$_GET`变量保存在会话变量中，以便`$_GET`稍后再次访问它们。

一些伪代码/算法

page1.php 发送带有字段的表单`<form action="page1.php" method="get"><input type="text" value="banan" name="apa">`

page2.php 保存所有`$_GET`变量

page3.php 将所有 get-variables 设置为 page2.php 以便第一个变量可以通过`$_GET['apa']`

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:53:10.917

这是可能的，但我不确定为什么要这样做。为什么不直接从中读取数据，`$_SESSION`而不是`$_GET`将会话数据与实际作为参数传递给您所在页面的数据混淆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T19:57:25.860

**不要这样做。** 但是要保存：

```
<?php

session_start();
$_SESSION["GET"] = $_GET;

?> 
```

并检索：

```
<?php

session_start();
$_GET = $_SESSION["GET"];

?> 
```

我认为这里真正的问题是你有一个想要实现的目标，并且你*认为*这是实现该目标的正确方法。它不是; 肯定有更好的方法来实现您想要的最终结果。但是你必须告诉我们最终结果应该是什么。

# r - 在 ggplot2 中为每个 facet_wrap 网格放置一个图例

> ID：14840542
> 
> 赞同：31
> 
> 时间：2013-02-12T19:48:02.273
> 
> 标签：r, ggplot2, legend, facet, facet-wrap

我有这个数据框：

```
 Date Server FileSystem PercentUsed
1  12/1/2011      A          /          60
2   1/2/2012      A       /var          50
3   2/1/2012      A        tmp          90
4  2/10/2012      A        /db          86
5  2/13/2012      A       /app          90
6  12/1/2011      B         C:          67
7   1/2/2012      B         D:          67
8   2/1/2012      B         F:          34
9  2/10/2012      B   /restore          89
10 2/13/2012      B         G:          56
11 12/1/2011      C          /          90
12  1/2/2012      C       /tmp          78
13  2/1/2012      C      /data          67
14 2/10/2012      C   /Storage          34
15 2/13/2012      C  /database          12

dput(x)
structure(list(Date = structure(c(2L, 1L, 3L, 4L, 5L, 2L, 1L, 
3L, 4L, 5L, 2L, 1L, 3L, 4L, 5L), .Label = c("1/2/2012", "12/1/2011", 
"2/1/2012", "2/10/2012", "2/13/2012"), class = "factor"), Server = structure(c(1L, 
1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L), .Label = c("A", 
"B", "C"), class = "factor"), FileSystem = structure(c(1L, 9L, 
14L, 5L, 2L, 10L, 11L, 12L, 6L, 13L, 1L, 8L, 3L, 7L, 4L), .Label = c("/", 
"/app", "/data", "/database", "/db", "/restore", "/Storage", 
"/tmp", "/var", "C:", "D:", "F:", "G:", "tmp"), class = "factor"), 
    PercentUsed = c(60L, 50L, 90L, 86L, 90L, 67L, 67L, 34L, 89L, 
    56L, 90L, 78L, 67L, 34L, 12L)), .Names = c("Date", "Server", 
"FileSystem", "PercentUsed"), class = "data.frame", row.names = c(NA, 
-15L)) 
```

我想在每个网格旁边放一个图例`facet_wrap`，它自己`FileSystem`：

当我这样做时，它会将图例放在所有`FileSystem`. 是否可以在每个网格旁边放置`FileSystem`属于每个服务器？

```
ggplot(x, aes(Date, PercentUsed, group=1, colour=FileSystem)) + 
     geom_jitter(size=0.5) + geom_smooth(method="loess", se=T) + 
     facet_wrap(~Server, ncol=1) 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-12T20:25:25.770

最好的方法是使用**gridExtra**包：

```
library(gridExtra)

xs <- split(x,f = x$Server)
p1 <- ggplot(xs$A,aes(x = Date,y = PercentUsed,group = 1,colour = FileSystem)) + 
        geom_jitter(size=0.5) + 
        geom_smooth(method="loess", se=T) + 
        facet_wrap(~Server, ncol=1)

p2 <- p1 %+% xs$B
p3 <- p1 %+% xs$C

grid.arrange(p1,p2,p3) 
```

![在此处输入图像描述](../Images/0f1466aa06a3ed206b55cd8e83e72d3b.png)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-02-12T20:39:29.827

嗯，@joran 打败了我（我`gridExtra`已经过时了，但我花了 10 分钟才意识到这一点）。这是一个类似的解决方案，但这个解决方案通常按`Server`.

```
library(gridExtra)
out <- by(data = x, INDICES = x$Server, FUN = function(m) {
      m <- droplevels(m)
      m <- ggplot(m, aes(Date, PercentUsed, group=1, colour = FileSystem)) + 
         geom_jitter(size=2) + geom_smooth(method="loess", se=T)
   })
do.call(grid.arrange, out)

# If you want to supply the parameters to grid.arrange
do.call(grid.arrange, c(out, ncol=3)) 
```

![图片](../Images/2537f0c53d10f47c1dba6cae5e6e28a7.png)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2018-02-16T08:00:10.557

我们可以不使用构面，而是为每组创建一个绘图列表，然后使用*cowplot::plot_grid*进行绘图。每个人都有自己的传奇：

```
# make list of plots
ggList <- lapply(split(x, x$Server), function(i) {
  ggplot(i, aes(Date, PercentUsed, group = 1, colour = FileSystem)) + 
    geom_jitter(size = 2) +
    geom_smooth(method = "loess", se = TRUE)})

# plot as grid in 1 columns
cowplot::plot_grid(plotlist = ggList, ncol = 1,
                   align = 'v', labels = levels(x$Server)) 
```

* * *

正如@Axeman 所建议的那样，我们可以使用`facet_grid(~Server)`, 而不是. 添加标签`labels = levels(x$Server)`。

[![在此处输入图像描述](../Images/b83199a5f3c3d859f52048cc9c320184.png)](https://i.stack.imgur.com/p2rij.jpg)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-23T14:10:46.533

我喜欢@joran 的回答，并以他们的代码为起点提供了几个选项。**这两个选项都解决了未对齐的方面的问题。**

### 刻面外的传说

如果为图例项选择等宽字体，则可以使用`str_pad`在所有图例项的右侧添加填充，强制每个项的长度保持一致。

如果您愿意使用等宽字体，这是一个快速修复。

```
library(ggplot2)
library(dplyr)
library(gridExtra)
library(stringr)

l <- max(nchar(as.character(x$FileSystem)))
mylevels <- as.character(levels(x$FileSystem))
mylevels <- str_pad(mylevels, width = l, side = "right", pad = " ")
x <- mutate(x, FileSystem = factor(str_pad(FileSystem, width = l, side = "right", pad = " "),
            levels = mylevels))
windowsFonts("Lucida Sans Typewriter" = windowsFont("Lucida Sans Typewriter"))
xs <- split(x,f = x$Server)
p1 <- ggplot(xs$A,aes(x = Date,y = PercentUsed,group = 1,colour = FileSystem)) + 
  geom_jitter(size=0.5) + 
  geom_smooth(method="loess", se=T) + 
  facet_wrap(~Server, ncol=1) +
  theme(legend.text = element_text(family = "Lucida Sans Typewriter"))

p2 <- p1 %+% xs$B
p3 <- p1 %+% xs$C

grid.arrange(p1,p2,p3) 
```

[![在此处输入图像描述](../Images/2194c6cf1b89abbc90f08cdb5432a1da.png)](https://i.stack.imgur.com/Ooo33.png)

### 刻面内的图例

如果您不介意每个方面内的图例，您可以使用`scale`调用中的“扩展”参数为每个方面添加额外的空间：

```
library(lubridate)
x <- mutate(x, Date = as.Date(as.character(Date), format = "%m/%d/%Y"))
xs <- split(x,f = x$Server)
p1 <- ggplot(xs$A,aes(x = Date,y = PercentUsed,group = 1,colour = FileSystem)) + 
  geom_jitter(size=0.5) + 
  scale_x_date(expand = expansion(add = c(5, 20)),
               date_labels = "%d-%m-%Y") +
  geom_smooth(method="loess", se=T) + 
  facet_wrap(~Server, ncol=1) +
  theme_bw() +
  theme(legend.position = c(0.9, 0.5))

p2 <- p1 %+% xs$B
p3 <- p1 %+% xs$C

grid.arrange(p1,p2,p3) 
```

[![在此处输入图像描述](../Images/9946265e83fb9ba9afaceda424e95680.png)](https://i.stack.imgur.com/1VELo.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-01T15:08:32.287

除此之外`gridExtra`，`cowplot`还有，`patchwork`现在也在游戏中。因此，您可以执行以下操作：

```
require(ggplot2)
require(patchwork)
# split
dfs = split(df, f = df$Server)
# apply ggplot function and write to list
gg_l = lapply(dfs, function(x) {
  ggplot(x, aes(x = Date,y = PercentUsed, group = 1, colour = FileSystem)) + 
    geom_jitter(size = 0.5) + 
    geom_smooth(method = "loess", se = TRUE) + 
    facet_wrap(~ Server, ncol = 1)
})
# patchwork
wrap_plots(gg_l, ncol = 1) 
```

[![在此处输入图像描述](../Images/6bea9b9e3040f68eb7eddb0f336efc55.png)](https://i.stack.imgur.com/GggNk.png)

您也可以手动组合图，看看[这里](https://patchwork.data-imaginist.com/articles/guides/assembly.html)。我将 OP 的数据用于`df`.

# mysql - 图像表架构反馈

> ID：14840548
> 
> 赞同：2
> 
> 时间：2013-02-12T19:48:24.223
> 
> 标签：mysql, database-design, database-schema

好的，所以过去几个月我一直在处理这个问题，主要是因为我是一个新手......我做了我的阅读和研究，这就是结果......

我正在为我的网站的画廊设计一个图像表模型。基本上，我将上传一张图片 ( `filename`) 并创建 5 种不同的尺寸 ( `small`, `thumb`, `medium`, `large`, `big`)。

我已经为不同尺寸设置了指南：

*   上传图片的最小尺寸为 100 像素
*   ---> 始终创建`small`和`thumb`调整大小
*   如果上传的图片大于 100 px ---> create `small`, `thumb`, `medium`size
*   如果上传的图片大于 350 px ---> create `small`, `thumb`, `medium`, `large`size
*   如果上传的图片大于 700 px ---> create `small`, `thumb`, `medium`, `large`, `big`size

每个大小都有自己的文件名，由代表大小的`filename`+ a定义。`suffix`因此，一个小的图像文件名将以`_s`后缀 (1234_s.jpg) 结尾，拇指`_t`后缀 (1234_t.jpg) 等等......

我还决定创建一个小型文件系统结构，因为我最终可能会上传大约 125 000 张图像。与此类似的东西：

```
http://www.mywebsite.com/gallery/images/0/6/image1.png
http://www.mywebsite.com/gallery/images/5/4/image2.png 
```

图像的路径将驻留在一个`config.php`文件中，我会将数据库中图像文件夹的相对路径保存在名为 `relative_dir`

我还需要保持宽度和高度，以便它在浏览器中显示正常（如果要显示很多拇指，使用 getimagesize 可能会给服务器带来很大压力）

所以，经过几周的阅读和研究，我想出了这个（记住我是新手）

有什么意见、建议吗？

```
IMAGE
-----------------------
image_id
title
caption
relative_dir
filename
small_filename
small_width
small_height
thumb_filename
thumb_width
thumb_height
medium_filename
medium_width
medium_height
large_filename
large_width
large_height
big_filename
big_width
big_height 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T19:57:45.400

具有 , 或在您的情况下 , 之类`value1`的列表示`value2`非规范化问题。它会产生一个庞大的表，如果您想要添加（或删除）图像大小，您将不得不更改架构。我不确定为什么需要/列，因为每个列似乎都具有基于其大小状态的静态宽度/高度（例如，始终为 100 像素），但没关系。我建议三个表：`value3``small``medium``large``_width``_height``small`

```
ImageUploads -- canonical image table
iuID, title, caption, relative_dir, filename
(do you need *both* relative_dir/filename)

ImageSizes -- settings for sizes; width/height may go here as well
isID,
sizeName (small, medium, large, big, thumb)
sizeSuffix (_s, _m, _l, _b, _t?)

Images
iuID, isID 
```

使用该`Images`表，您可以轻松获取规范图像文件名、标题/标题/等。并获得您需要的后缀。如果每个单独的文件需要不同的宽度/高度，或者`ImageSizes`如果它是每个大小的，则宽度/高度将出现在此表上。如果您想拥有默认值但允许灵活性，您也可以同时使用两者。

# java - 实例化错误

> ID：14840551
> 
> 赞同：8
> 
> 时间：2013-02-12T19:48:32.923
> 
> 标签：java

我正在关注一本初学者的 Java 书籍，其中一个项目是从常见的抛出错误中挑选一个错误，并尝试尽你所能来引发错误。

我选择了 InstantiationError 并且知道你不能实例化抽象类或接口。文档说错误通常被编译器捕获，但如果类的定义发生了不兼容的更改，则可以在运行时抛出。

我不知道在程序运行时如何更改类定义，我正在寻找一些关于我应该进一步阅读的提示。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T19:52:32.367

> 我不知道程序运行时如何更改类定义

它*在运行时无法更改，但**在编译后*可以更改。

例如，试试这个：

```
// In Test.java
public class Test {
    public static void main(String[] args){
        System.out.println(new Foo());
    }
}

// In Foo.java
public class Foo {
} 
```

编译：

```
javac Foo.java Test.java 
```

跑：

```
java Test

// Some output like this...
Foo@1d6535bf 
```

现在改成`Foo.java`这样：

```
// No parameterless constructor any more!
public class Foo {
    public Foo(int x) {
    }
} 
```

*重新* 编译`Foo.java`：

```
javac Foo.java 
```

并重新运行测试：

```
Exception in thread "main" java.lang.NoSuchMethodError: Foo: method <init>()V 
    not found
    at Test.main(Test.java:3) 
```

不过，这*不是*我所说的“常见错误”。

请注意，这不是`InstantiationError`- 但您可以`Foo.java`再次更改为：

```
public interface Foo {
} 
```

同样，只需重新编译`Foo.java`，这一次你会得到：

```
Exception in thread "main" java.lang.InstantiationError: Foo
        at Test.main(Test.java:3) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-12T19:49:46.407

也许当您在运行时使用反射实例化一个抽象类时。

代码示例：

```
public abstract class MyAbstractClass{
}

public class MyMainClass() {
    public void test(String[] args) {
             this.getClass().getClassLoader().loadClass("MyAbstractClass").getConstructors()[0].newInstance();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T19:49:58.180

查看[Reflection API](http://docs.oracle.com/javase/tutorial/reflect/index.html)，它提供了一种按名称实例化类的方法。

```
public void throwError() {
    AbstractType type = this.getClassLoader().newInstance("my.abstract.Type");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T20:09:42.467

可能导致此类错误的一件简单的事情是，如果您尝试使用错误数量的参数创建对象。假设构造函数接受两个参数，但您的界面设计为用户可以输入 3 个或更多参数。通常，编译器会捕获参数的数量，但如果它是“动态”创建的，那么它将在运行时被捕获

# c++ - 带有类的库如何工作？

> ID：14840553
> 
> 赞同：4
> 
> 时间：2013-02-12T19:48:50.743
> 
> 标签：c++, libraries

在学校学习 C++ 时，我们从来没有真正谈论过如何构建库，所以对我的初步理解感到抱歉。从我在网上阅读的内容来看，库似乎只是已经编译的代码集合，然后有一个`.h`文件列出了该库中可以访问的函数。

例如，当我`#include <cmath>`现在可以调用`sin(x)`而无需访问 cmath 代码来编译它时。我的问题是这是否适用于其中包含数据的类。

那么我可以创建一个库吗

```
//AccumulatorLibrary.h
class Accumulator
{
public:
    int num;
    int increment() {num++};
    void otherFunctions(); //otherFunctions defined in the .lib file
} 
```

然后调用它

```
//Main
#include "AccumulatorLibrary.h"
#include <stdio>
int main()
{
    Accumulator A(0); //initalize num to 0
    Accumulator B(7); //initalize num to 7
    cout<<A.increment;
    cout<<B.increment;
    cout<<A.increment;
} 
```

并得到输出`1 8 2`？

总之，如果我弄清楚如何将一堆类放入库文件中，我是否可以访问我想要的任何数据，只要该数据在`.h`文件中具有访问功能？

或者一个更基本的问题，a `.h`and `.lib`file 的工作方式是否与常规 c++ 代码完全相同，只是在使用时不必编译它，并且您无权访问文件中的代码`.lib`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T19:54:49.183

> 从我在线阅读的内容来看，库似乎只是已经编译的代码集合，然后有一个 .h 文件列出了该库中可以访问的函数。

正确的。

> 我的问题是这是否适用于其中包含数据的类。

确实如此。许多 C++ 库都公开了类并将其代码预编译在库中。

> 或者一个更基本的问题，.h 和 .lib 文件的工作方式与常规 c++ 代码完全相同，只是在使用时不必编译它......

等等。.h 文件仍然包含 C++ 代码（声明，有时甚至是内联实现）。.lib 文件是动态链接库。它们是 C++ 源文件编译（和链接）的结果。

> ...并且您无权访问 .lib 文件中的代码？

您确实可以访问它：使用反汇编程序打开它。它不再是 C++ 了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T20:29:37.730

> 从我在网上阅读的内容来看，库似乎只是已经编译的代码集合

是和不是。

对我来说，“库”是一段代码（一个或多个头文件（`.h)`文件和零个、一个或多个源 ( `.cpp`) 文件），没有`main()`函数，可以独立编译和链接（除了`main()`）。

一个库可能有多种机制可用：

*   可作为源：在这里，您必须将库与您的应用程序一起编译。示例有 C++ 标准模板库、Boost C++ 库、您或您的同事编写的库、您从 sourceforge 下载的库等。（警告：有时基于源的库可以在系统中预编译作为编译优化。 )

    请注意，作为源可用意味着您可以阅读它，但不一定要修改它。

*   以二进制形式提供：在这里，库已经编译并且可能在您的系统中可用。示例是 C 标准库、C++ 标准库、C 数学库等。从问题来看，听起来这就是您所指的那个。

> 然后有一个 .h 文件，其中列出了该库中可以访问的函数。

没错，C 库就是这种情况。对于 C++，这个概念自然地扩展到包括类和（公共）成员函数。

> 总之，如果我弄清楚如何将一堆类放入库文件中，我是否可以访问我想要的任何数据，只要该数据在 .h 文件中具有访问功能？

是的！

> 或者更基本的问题，.h 和 .lib 文件的工作方式与常规 c++ 代码完全相同，只是在使用时不必编译它，而且您无权访问 .h 和 .lib 文件中的代码。 .lib 文件？

库遵循与 C++ 相同的规则，如上所述的唯一区别是它没有`main()`函数。

您是否需要编译取决于您可以使用它的方式（见上文）。

对于许多库，您可以访问源代码（见上文）。

以下是您的示例的完整代码：

```
// AccumulatorLibrary.h
class Accumulator {
  public:
    Accumulator( int x ) : num( x ) {}    // ctor with initializer
    int increment() {num++};
    int get() const;
    void set( int x );
  private:
    int num;
};
// AccumulatorLibrary.cpp
int Accumulator::get() const { return num; }
int Accumulator::set( int x ) { num = x; }

// Usercode.cpp
#include "AccumulatorLibrary.h"
#include <iostream>
using namespace std;
int main() {
    Accumulator A(0); //initalize num to 0
    Accumulator B(7); //initalize num to 7

    A.increment();
    cout << A.get() << endl;        // print 1

    B.increment();
    cout << B.get() << endl;        // print 8

    A.increment();
    cout << A.get() << endl;        // print 2
} 
```

# c# - 使用文件文本来证明 TextBox

> ID：14840558
> 
> 赞同：1
> 
> 时间：2013-02-12T19:48:59.933
> 
> 标签：c#, textbox, text-files

我试图弄清楚如何使用一个充满首字母缩略词的文本文件来证明和自动更正关键字列表。例如，我的文本框中可能有一个如下所示的列表：

```
 nec 1080p television
 nec hdtv television
 nec lcd tv
 etc. 
```

在我的文本文件中，我会有这样的东西：

```
 LCD
 TV
 NEC
 HDTV
 etc. 
```

将首字母缩写词文本文件与文本框文本（每个文本可能有 100 行长）进行比较并更正文本框中任何非大写文本的最快和最有效的方法是什么？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:08:54.340

```
textBox.Lines = ReplaceWithAcronyms(textBox.Lines, File.ReadAllLines(acronymsPath)).ToArray();

private static IEnumerable<string> ReplaceWithAcronyms(IEnumerable<string> lines, IEnumerable<string> acronyms)
{
    foreach (string line in lines)
    {
        yield return string.Join(" ", 
            line.Split(' ').Select(word => ReplaceWithAcronym(word, acronyms)));
    }
}

private static string ReplaceWithAcronym(string word, IEnumerable<string> acronyms)
{
    string acronym = acronyms.FirstOrDefault(ac => ac == word.ToUpperInvariant());
    if (acronym == null)
    {
        return word;
    }

    return acronym;
} 
```

ReplaceWithAcronyms 获取文本框的行和文件的行，其中每一行都是一个首字母缩写词。然后它将每一行拆分为单词并将每个单词传递给 ReplaceWithAcronym。如果单词是首字母缩略词之一，它将返回，否则将返回单词不变。通过使用 string.Join，单词是“未拆分的”。结果被转换为一个数组，然后分配回文本框行。

我没有检查数百行的速度有多快。为了提高性能，您可以使用 HashSet 作为首字母缩写词。我不认为几百行真的是个问题。在尝试提高性能之前，我会尝试一下。也许已经足够好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T02:13:52.733

这就是我用来最终让它工作的东西。我使用了 Pescolino 的解决方案，然后调用它：

```
sortBox1 = ReplaceWithAcronyms(sortBox1, File.ReadAllLines(@"I:\acronyms.txt")).ToList(); 
```

# ios - usesEvenOddFillRule 是如何工作的？

> ID：14840563
> 
> 赞同：19
> 
> 时间：2013-02-12T19:49:26.403
> 
> 标签：ios, uibezierpath

谁能解释[UIBezierPath](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBezierPath_class/Reference/Reference.html)`usesEvenOddFillRule`的属性是如何工作的以及它可以在哪里使用？

我知道我可能会投票失败，但我真的没有在 Apple 的文档中得到解释。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-12T20:25:21.747

奇偶填充规则是确定路径的哪些区域在路径“内部”与“外部”路径的一种方法，在填充路径内部时了解这一点很重要。它们通常仅在路径自身切割孔时有所不同。奇偶规则通常不会遮蔽这些区域，而其他选项通常会。

奇偶规则很简单：

> 当您在包含路径的画布上直线前进时，计算您穿过路径的次数。如果你穿过奇数次，你就在路径“里面”。如果你穿过偶数次，你就在路径之外。

因此，如果您的路径由两个呈靶心形状的同心圆组成，则奇偶规则会将两个圆之间的区域视为“内部”，而将中心区域视为“外部”。

另一种选择称为非零缠绕规则。（如果`usesEvenOddFillRule`是则使用`NO`）。非零值再次考虑穿过路径的直线，但对交叉点的计数略有不同。它考虑了绘制路径的方向。（即逆时针圆圈与顺时针圆圈不同。）因此：

> 当您在包含路径的画布上沿直线前进时，请保持一个计数器，从 0 开始。每次您越过路径从左到右前进的部分路径时（从穿过路径的线观察)，在计数器上加一。每次你越过一条从你的右边到左边的路线时，从计数器中减去一个。如果计数器不为零，则您在路径内。否则，你在外面。

因此，在同一个同心圆示例中，如果两个圆的绘制方向相同，则中心圆内部和外部的整个区域都将被视为路径“内部”。如果两个圆的绘制方向相反，中心区域将被视为路径“外部”，如奇偶规则中一样。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-12T20:20:05.947

这里给出了计算机图形中填充规则的一个很好的解释。（这在 .NET 参考中，但完全相同的原则适用于 Quartz。）

[http://msdn.microsoft.com/en-us/library/system.windows.media.fillrule.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.fillrule.aspx)

简而言之，奇偶填充规则意味着每条边都将出现在输出图形中（这可能会导致单个填充路径中有“洞”），而非零填充规则在大多数情况下会结束这意味着即使绘制的形状包含自相交，它也大多是实心的。

一个简单的例子可以在下面看到。左图使用奇偶填充规则，右图使用非零填充规则。

![填充规则示例](../Images/543e5f287100eb40fdb805b58272561a.png)

# c++ - 一些 lua/c++ 代码中的 SIGSEGV 错误

> ID：14840569
> 
> 赞同：2
> 
> 时间：2013-02-12T19:49:40.513
> 
> 标签：c++, lua, segmentation-fault

以下代码以 SIGSEGV 错误结尾：

```
extern "C" {
    #include "lua/lua.h"
    #include "lua/lualib.h"
    #include "lua/lauxlib.h"
}

int main( int argc, char *argv[] )
{
    lua_State *L;
    luaL_openlibs(L);
    lua_close(L);
    return 0;
} 
```

Gdb 给了我以下信息：

```
(gdb) run
Starting program: d:\Dropbox\cpp\engine\bin\main.exe
[New Thread 7008.0x1df8]

Program received signal SIGSEGV, Segmentation fault.
0x6d781f30 in lua_pushcclosure () from d:\Dropbox\cpp\engine\bin\lua52.dll
(gdb) where
#0  0x6d781f30 in lua_pushcclosure () from d:\Dropbox\cpp\engine\bin\lua52.dll
#1  0x6d79329e in luaL_requiref () from d:\Dropbox\cpp\engine\bin\lua52.dll
#2  0x6d79bdee in luaL_openlibs () from d:\Dropbox\cpp\engine\bin\lua52.dll
#3  0x004013a6 in main (argc=1, argv=0x702fc8) at main.cpp:10
(gdb) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T19:52:15.480

您必须在打开 lib ( ) 之前创建一个新的 lua 状态`luaL_openlibs(L);`，如下所示：

```
L = luaL_newstate(); 
```

您会遇到分段错误，因为您有一个未初始化的指针，取消引用它（这是 lib 所做的）是未定义的行为。

# gcc - 在 Windows 7 x86 上进行 ccppc 编译期间的 Win32 错误 8

> ID：14840572
> 
> 赞同：1
> 
> 时间：2013-02-12T19:49:49.467
> 
> 标签：gcc, windows-7, makefile

我正在尝试使用 ccppc（版本 3.3-e500）编译一些 C 源文件。大多数情况下，编译会失败，请注意以下错误

```
0 [main] cc1 {PID} sigproc_init: cannot create wait_sig thread, Win32 Error 8 
```

我查了这个 Win32 错误，它对应于`ERROR_NOT_ENOUGH_MEMORY`. 我很确定这不是物理内存的问题，我在这台机器上有 4GB，编译时使用的内存不超过 1.5GB。不幸的是，我的机器上没有本地管理员，因此无法调查页面文件的问题。

`.o`几次失败后，源代码最终会编译，一旦所有源代码都编译完成，输出的 's没有明显问题。但是，这个问题将 10 分钟的构建变成了一个多小时的构建。

这个问题在 XP x86 机器上不存在，我没有研究过 x64 的任何一个操作系统。

有没有人在 Windows 7 上使用 ccppc 或其他 gcc 二进制文件遇到过这样的问题？寻找解决方案的任何指导都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-11T10:41:33.963

从在 Windows XP 32 位下编译到 Windows 7 64 位下编译时，发现 PowerPC 的 gcc 2.96 中的 cc1.exe 程序在某些编译时失败并出现相同的错误。使用 Visual Studio 调试器附加到 cc1.exe 并使用 Sysinternals 工具进行监视的调查表明：

1.  当 cc1.exe 程序成功时，它会产生 3 个线程。

2.  当 cc1.exe 程序失败时，第 3 次 CreateThread() 调用失败并显示`ERROR_NOT_ENOUGH_MEMORY`.

3.  运行 Visual Studio 命令报告的 cc1.exe 的图像标头`dumpbin /HEADERS`显示堆栈保留大小为 400000000 字节。即创建的每个线程需要 400000000 字节的连续虚拟地址空间。

4.  当 CreateThread 调用失败时`ERROR_NOT_ENOUGH_MEMORY`，Sysinternals VMMap 工具显示最大可用虚拟内存区域小于请求的堆栈保留大小 400000000 字节。

5.  cc1.exe 是一个 32 位进程，它有 2GB 的虚拟地址空间。Windows 7 具有 ASLR（地址空间布局随机化），这会导致 DLL 的加载地址随机化。我认为 ASLR 有效地分割了虚拟地址空间，因此在 cc1.exe 进程的某些调用中，加载的 DLL 使用的虚拟地址不会为线程堆栈留下足够大的空闲区域。除了 ASLR，在 Windows 7 中加载到 cc1.exe 中的 DLL 大约是 Windows XP 下的 4 倍，这可能会导致该问题。

根据上述调查，使用 Visual Studio`editbin /STACK:67108864`程序将 cc1.exe 的堆栈保留大小减少到 64Mbytes，其中选择 64Mbytes 作为用于 C++ 代码的 cc1plus.exe 程序的堆栈保留大小。随着堆栈保留大小的减少，`ERROR_NOT_ENOUGH_MEMORY`错误不再出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T15:04:34.957

所以，我从来没有真正找到解决方案，但我确实设法想出了一个可行的解决方法。

由于编译最终将在多次重新之后工作`make`，您可以将您的`make`命令包装在一个检查“ERRORLEVEL”变量的do/while循环中，并继续直到它指示成功。

这显然不能解决“需要永远编译”的问题，但你的编译最终会成功。

# excel - 在文件夹中的所有excel文件中查找和替换字符串

> ID：14840574
> 
> 赞同：2
> 
> 时间：2013-02-12T19:49:53.230
> 
> 标签：excel, vba

我需要帮助创建查找和替换字符串宏，以便它可以在文件夹中的所有文件中查找和替换字符串。

例如 fofler =`"C:\ifolder\"` 文件列表 =`"*.xlsx"`

到目前为止，我只能对一个文件执行此操作，我需要对文件夹中的所有文件执行此操作

```
Sub ReplaceStringInFile()

Dim sBuf As String
Dim sTemp As String
Dim iFileNum As Integer
Dim sFileName As String

' Edit as needed
sFileName = "C:\macro\test.txt"

iFileNum = FreeFile
Open sFileName For Input As iFileNum

Do Until EOF(iFileNum)
    Line Input #iFileNum, sBuf
    sTemp = sTemp & sBuf & vbCrLf
Loop
Close iFileNum

sTemp = Replace(sTemp, "THIS", "THAT")

iFileNum = FreeFile
Open sFileName For Output As iFileNum
Print #iFileNum, sTemp
Close iFileNum

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T09:54:46.080

*因为您实际上有打开文本文件的代码 - 而不是 Excel 文件 - 我遵循了相同的方法*

像这样的东西在哪里

1.  `Dir`用于循环遍历特定文件夹中的所有[txt文件。](/questions/tagged/txt "显示标记为“txt”的问题")
2.  使用 FileScriptingObject 一次读取所有文本，进行替换，然后用更新的文本覆盖文件文件。

**代码**

```
Sub  ReplaceStringInFile()

Dim objFSO As Object
Dim objFil As Object
Dim objFil2 As Object
Dim StrFileName As String
Dim StrFolder As String
Dim SstrAll As String

Set objFSO = CreateObject("scripting.filesystemobject")
StrFolder = "c:\macro\"
StrFileName = Dir(StrFolder & "*.txt")

Do While StrFileName <> vbNullString
    Set objFil = objFSO.opentextfile(StrFolder & StrFileName)
    strAll = objFil.readall
    objFil.Close
    Set objFil2 = objFSO.createtextfile(StrFolder & StrFileName)
    objFil2.Write Replace(strAll, "THIS", "THAT")
    objFil2.Close
    StrFileName = Dir
Loop
End Sub 
```

# caching - 在 Grails 中缓存昂贵的 Web 服务调用的最佳策略

> ID：14840575
> 
> 赞同：10
> 
> 时间：2013-02-12T19:49:56.737
> 
> 标签：caching, grails

我有一个简单的 Grails 应用程序，需要在用户会话期间（在使用界面时）多次定期调用外部 Web 服务。

我想缓存这个 Web 服务响应，但是服务的结果每隔几天就会改变一次，所以我想把它缓存一小段时间（也许每天刷新）。

Grails 缓存插件似乎不支持“生存时间”实现，所以我一直在探索一些可能的解决方案。我想知道什么插件或程序解决方案最能解决这个问题。

例子：

**BuildConfig.groovy**

```
plugins{
    compile ':cache:1.0.0'
} 
```

**MyController.groovy**

```
def getItems(){
    def items = MyService.getItems()
    [items: items]
} 
```

**MyService.groovy**

```
@Cacheable("itemsCache")
class MyService {
    def getItems() {
        def results

        //expensive external web service call

        return results
    }
} 
```

**更新**

有很多不错的选择。我决定采用 Burt 建议的插件方法。我已经包含了一个示例答案，对上面的代码示例进行了微小的更改，以帮助其他想要做类似事情的人。此配置会在 24 小时后使缓存过期。

**BuildConfig.groovy**

```
plugins{
    compile ':cache:1.1.7'
    compile ':cache-ehcache:1.0.1'
} 
```

**配置文件**

```
grails.cache.config = {
    defaultCache {
        maxElementsInMemory 10000
        eternal false
        timeToIdleSeconds 86400
        timeToLiveSeconds 86400
        overflowToDisk false
        maxElementsOnDisk 0
        diskPersistent false
        diskExpiryThreadIntervalSeconds 120
        memoryStoreEvictionPolicy 'LRU'
     }
 } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-13T03:09:04.417

核心插件不支持 TTL，但 Ehcache 插件支持。请参阅[http://grails-plugins.github.com/grails-cache-ehcache/docs/manual/guide/usage.html#dsl](http://grails-plugins.github.com/grails-cache-ehcache/docs/manual/guide/usage.html#dsl)

[http://grails.org/plugin/cache-ehcache](http://grails.org/plugin/cache-ehcache)插件依赖于[http://grails.org/plugin/cache](http://grails.org/plugin/cache)但用一个使用 Ehcache 的缓存管理器替换了缓存管理器（所以你需要安装两者）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T05:57:42.057

破解/解决方法是使用@Cacheable("itemsCache") 和@CacheFlush("itemsCache") 的组合。

告诉 getItems() 方法缓存结果。

```
@Cacheable("itemsCache")
def getItems() {
} 
```

然后是另一个刷新缓存的服务方法，您可以从作业中频繁调用它。

```
@CacheFlush("itemsCache")
def flushItemsCache() {} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T20:35:11.503

从[grails-cache](https://github.com/grails-plugins/grails-cache/blob/master/test/unit/grails/plugin/cache/ConfigBuilderTests.groovy)单元测试（查找 timeToLiveSeconds）中，我看到您可以在缓存级别配置缓存，而不是每个方法调用或类似的配置。使用此方法，您将配置*grails.cache.config*的设置。

您将使用您的生存时间设置创建一个专用缓存，然后在您的服务中引用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-03T10:07:56.800

在与SpEL的战斗中失败了几个小时后，我最终赢得了战争！如您所知，Grails 缓存没有开箱即用的 TTL。您可以坚持使用 ehcache 并进行一些花哨的配置。或者更糟糕的是在保存/更新等时添加逻辑刷新它。但我的解决方案是：

```
@Cacheable(value = 'domainInstance', key="#someId.concat((new java.util.GregorianCalendar().getTimeInMillis()/10000))")
def getSomeStuffOfDb(String someId){
         //extract something of db
  }       
} 
```

还有一件事要指出。您可以跳过 Config.groovy 中的配置，它将自动创建和添加。但是，如果您的应用程序在启动后立即处于负载状态，则会导致一些异常。

```
 2017-03-02 14:05:53,159 [http-apr-8080-exec-169] ERROR errors.GrailsExceptionResolver  - CacheException occurred when processing request: [GET] /some/get
Failed to get lock for campaignInstance cache creation. Stacktrace follows: 
```

所以为避免这种情况，请添加配置，以便事先准备好缓存设施。

```
grails.cache.enabled = true
grails.cache.clearAtStartup = true
grails.cache.config = {
    defaults {
        maxElementsInMemory 10000
        overflowToDisk false
    }
    cache {
        name 'domainInstance'
    }
} 
```

GregorianCalendar().getTimeInMillis()/10000 将使 TTL 约为 10 秒。/1000 ~1 秒。纯数学在这里。

# asp.net - html中的表单标签不起作用

> ID：14840579
> 
> 赞同：0
> 
> 时间：2013-02-12T19:50:04.147
> 
> 标签：asp.net

我不是一个熟练的程序员，我正在使用第三方的 CMS 构建一个站点。我创建了一个`<form>`以收集信息并将其发送到外部站点。我的代码不起作用。我被告知的原因是该站点是在 ASP.NET 上构建的，并且由于“母版”页面中已经有一个`<form>`元素，并且`<form>`元素不能相互嵌入；所以我写的永远不会奏效。有人建议我寻找基于 Java 的解决方案，但我不知所措。

我现在的代码非常基本......

```
<form action="http://ExternalWebSite.com" method="post" id="subForm">
    <label for="name">Name:</label><br /><input type="text" name="name" id="name" /><br />
    <label for="Email">Email Address:</label><br /><input type="text" name="email" id="email" /><br />
    <label for="Dog name">Your dog's name:</label><br /><input type="text" name="dogname" id="dogname" /><br />
    <label for="Town where you live">Town where you live:</label><br /><input type="text" name="town" id="town" /><br />
    <input type="submit" value="Subscribe" />
</form> 
```

如何在不使用我的 html 代码中的标签的情况下执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:55:49.097

ASP.NET Web 表单`<form runat="server">`在您的应用程序中添加了一个。因此，您不能嵌套表单，但可以通过 hack 获得多个表单，[此处](https://stackoverflow.com/a/7544462/231716)提到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:14:46.640

您也可以对该网址进行 ajax 调用（在这种情况下为发布）

```
$.ajax({
      type: "POST",
      url: "http://ExternalWebSite.com",
      data: { name: $("#name").val(), $("#email").val(), $("#dogname").val(), $("#town").val() },
      success: function(result){
         //here you handle what to do after the post
      }
    }); 
```

有关如何使用 jquery 的进一步参考，请访问：[此链接](http://jquery.com/)这里最重要的是调用 ajax，它是 foinf 发布指定 utl 发送命名参数的成功函数，它将接收您在响应上写的任何内容您正在调用的 url，以及选择器 $("#name").val() ，这意味着“给我带有 id 名称的元素的值”

# ibm-mobilefirst - Worklight - 我们可以将 ear/war 部署到 worklight 服务器吗

> ID：14840600
> 
> 赞同：0
> 
> 时间：2013-02-12T19:52:16.623
> 
> 标签：ibm-mobilefirst

我进入了一个不同的用例，我正在处理我们使用 rad 为 Websphere 开发的通用 Web 应用程序，以及 Worklight 应用程序。

我的问题是，我们可以将我的 web 应用程序的 ear/war 文件部署到 Worklight 服务器吗？我们有一个 worklight 服务器，但到目前为止还没有托管 webaplication，那么我们可以使用 worklight 服务器来托管 webapplications 的 ear/war 吗？有没有可能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:53:50.773

Worklight Server 能够处理基于 Worklight 的应用程序，而不是其他类型的“基于 Web”的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T20:21:33.437

我相信最初的问题是我们是否可以使用 Worklight 服务器来部署任何与 Worklight 无关的应用程序的 EAR/WAR。

回答：当 Worklight 只是部署在 WAS 或 WAS Liberty Core 中的 J2EE 应用程序时，我看不到部署任何与 Worklight 无关的应用程序的 EAR/WAR 的问题。但我不认为这是强烈推荐或可取的，因为它违反了 Worklight 购买中的许可政策。

# java - 有任何可用的 Java 代理服务器库吗？

> ID：14840603
> 
> 赞同：5
> 
> 时间：2013-02-12T19:52:30.510
> 
> 标签：java, proxy, reverse-proxy

我正在开发一个客户端应用程序。应用程序通过运行在 127.0.0.1:1080 的代理服务器进行连接

运行在 127.0.0.1:1080 的代理服务器还将通过一组随机代理转发客户端请求，并将输出返回给客户端应用程序。

基本上，客户端通过代理服务器发出请求，但代理服务器通过一组随机代理转发请求。

是否有可以提供帮助的 Java 库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T19:59:59.013

我快速搜索了一下，发现如下

Java HTTP 代理库 - [http://sourceforge.net/projects/wpg-proxy/](http://sourceforge.net/projects/wpg-proxy/)

JAVA 袜子 - [http://jsocks.sourceforge.net/](http://jsocks.sourceforge.net/)

谷歌数据 API - [https://developers.google.com/gdata/articles/proxy_setup](https://developers.google.com/gdata/articles/proxy_setup)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T19:57:03.447

[Apache HTTPClient](http://hc.apache.org/httpcomponents-client-ga/examples.html)库支持代理。

# infragistics - 按顺序枚举网格列

> ID：14840607
> 
> 赞同：0
> 
> 时间：2013-02-12T19:52:43.753
> 
> 标签：infragistics, ultrawingrid

我正在使用 Infragistics 的[UltraGrid](http://help.infragistics.com/Help/NetAdvantage/WinForms/2011.2/CLR2.0/html/Infragistics2.Win.UltraWinGrid.v11.2~Infragistics.Win.UltraWinGrid.UltraGrid_members.html)控件。我可以使用以下代码获得[UltraGridColumns的强类型枚举：](http://help.infragistics.com/Help/NetAdvantage/WinForms/2011.2/CLR2.0/html/Infragistics2.Win.UltraWinGrid.v11.2~Infragistics.Win.UltraWinGrid.UltraGridColumn_members.html)

```
(this.grid.DisplayLayout.Bands[0].Columns).Cast<UltraGridColumn>(); 
```

如何订购此枚举，使其与 UI 中的相同？（用户可以自由地重新排列列）。

有没有我可以用来排序或排序的属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T20:00:41.693

订单在标题中（是的......）：

```
this.grid.DisplayLayout.Bands[0].Columns).Cast<UltraGridColumn>()
    .OrderBy(c => c.Header.VisiblePosition); 
```

# jquery - 确定链接是文本还是图像

> ID：14840609
> 
> 赞同：0
> 
> 时间：2013-02-12T19:52:52.787
> 
> 标签：jquery

我需要根据 href 是否包含文本链接或图像链接来编写 if 语句。因此，如果我得到这样的链接内容：

```
jQuery(document).ready(function($){
     $('a').click(function(event) {
     var $linkContent = $(this).html();
     // this doesnt work.. just one of the things I tried
     // var imgsrc = $(this).attr('src');
        });

    }) 
```

我还认为我可以采用另一种方式，只获取如下文本内容：

```
var linkContent = $(this).text(); 
```

然后，当我警告此变量时，它会显示文本链接的文本，而图像则为空白。伟大的！但仍然不适合我。我打算根据它的 .length 编写规则，但是如果我提醒图像链接的长度，即使提醒 .text() 它是空白的，图像链接仍然会给我一个整数。我很困惑！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T19:57:15.530

`this`在您的点击处理程序中将始终是一个锚元素，因为它附加到您的代码中的锚元素。但是就这样做

```
 $('a').click(function(event) {
    var $this = $(this);
    if($this.find("img").length) { //searches within the anchor element for an img element
       //it's an image
    } else {
       //no images in the anchor tag
    }
}) 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-02-12T19:59:13.470

您应该使用 HTTP HEAD 来查看内容上下文。

这是一个示例，您可以从中截取位，它被用作检查 url 是否存在的检查器：

```
public static boolean exists(String URLName){
try {
  HttpURLConnection.setFollowRedirects(false);
  // note : you may also need
  //        HttpURLConnection.setInstanceFollowRedirects(false)
  HttpURLConnection con =
     (HttpURLConnection) new URL(URLName).openConnection();
  con.setRequestMethod("HEAD");
  return (con.getResponseCode() == HttpURLConnection.HTTP_OK);
}
catch (Exception e) {
   e.printStackTrace();
   return false;
} 
```

}

# scala - 无法从 Lift Snippet 访问 Menu.param 的参数

> ID：14840612
> 
> 赞同：1
> 
> 时间：2013-02-12T19:53:02.220
> 
> 标签：scala, web-applications, lift

我正在尝试从片段中的 Lift Menu.param 中提取参数，以便我可以使用它来创建一个命名的 Comet。但是，当我尝试在我的 Boot.scala 中使用 SnippetDisptach 将参数传递给代码段时，我得到了 NullPointerException，如下所示：http: [//comments.gmane.org/gmane.comp.web.lift/44299](http://comments.gmane.org/gmane.comp.web.lift/44299)

我创建的菜单项如下：

```
object AnItemPage {
// create a parameterized page
  def menu = Menu.param[Item]("Item", "Item",
                                s => fetchItem(s), item => item._id.toString) / "item"

  private def fetchItem(s:String) : Box[Item] = synchronized {
          ItemDAO.findById(ObjectId.massageToObjectId(s)) 
  }

} 
```

我已将菜单添加到 SiteMap。我还创建了一个片段，我想获取 Item 参数。（我在这里使用 fmpwizard 的 InsertNamedComet 库）：

```
 class AddCometItemPage(boxedItem: Box[Item]) extends InsertNamedComet with DispatchSnippet{
     val item : Item = boxedItem.openOr(null)
     override lazy val name= "comet_item_" + item._id.toString
     override lazy val cometClass= "UserItemCometActor"

     def dispatch = null
    } 
```

我的下一步是创建这个类的一个实例，正如 David Pollak 在这里演示的那样：http: [//comments.gmane.org/gmane.comp.web.lift/44299](http://comments.gmane.org/gmane.comp.web.lift/44299)

这是我添加到 Boot.scala 中的内容：

```
LiftRules.snippetDispatch.append {
  case "item_page" => new AddCometItemPage(AnItemPage.menu.currentValue)
} 
```

我的 item.html 引用了这个片段：

```
 <div class="lift:item_page"> 
```

当我编译并运行它时，我得到以下空指针异常：

```
Exception occurred while processing /item/5114eb4044ae953cf863b786

Message: java.lang.NullPointerException
net.liftweb.sitemap.Loc$class.siteMap(Loc.scala:147)
net.liftweb.sitemap.Menu$ParamMenuable$$anon$9.siteMap(Menu.scala:170)
net.liftweb.sitemap.Loc$class.allParams(Loc.scala:123)
net.liftweb.sitemap.Menu$ParamMenuable$$anon$9.allParams(Menu.scala:170)
net.liftweb.sitemap.Loc$class.net$liftweb$sitemap$Loc$$staticValue(Loc.scala:87)
net.liftweb.sitemap.Menu$ParamMenuable$$anon$9.net$liftweb$sitemap$Loc$$staticValue(Menu.scala:170)
net.liftweb.sitemap.Loc$$anonfun$paramValue$2.apply(Loc.scala:85)
net.liftweb.sitemap.Loc$$anonfun$paramValue$2.apply(Loc.scala:85)
net.liftweb.common.EmptyBox.or(Box.scala:646)
net.liftweb.sitemap.Loc$class.paramValue(Loc.scala:85)
net.liftweb.sitemap.Menu$ParamMenuable$$anon$9.paramValue(Menu.scala:170)
net.liftweb.sitemap.Loc$$anonfun$currentValue$3.apply(Loc.scala:114)
net.liftweb.sitemap.Loc$$anonfun$currentValue$3.apply(Loc.scala:114)
net.liftweb.common.EmptyBox.or(Box.scala:646)
net.liftweb.sitemap.Loc$class.currentValue(Loc.scala:114)
net.liftweb.sitemap.Menu$ParamMenuable$$anon$9.currentValue(Menu.scala:170)
bootstrap.liftweb.Boot$$anonfun$lift$8.apply(Boot.scala:107)
bootstrap.liftweb.Boot$$anonfun$lift$8.apply(Boot.scala:106)
net.liftweb.util.NamedPF$$anonfun$applyBox$1.apply(NamedPartialFunction.scala:97)
net.liftweb.util.NamedPF$$anonfun$applyBox$1.apply(NamedPartialFunction.scala:97)
net.liftweb.common.Full.map(Box.scala:553)
net.liftweb.util.NamedPF$.applyBox(NamedPartialFunction.scala:97)
net.liftweb.http.LiftRules.snippet(LiftRules.scala:711)
net.liftweb.http.LiftSession$$anonfun$net$liftweb$http$LiftSession$$findSnippetInstance$1.apply(LiftSession.scala:1506)
net.liftweb.http.LiftSession$$anonfun$net$liftweb$http$LiftSession$$findSnippetInstance$1.apply(LiftSession.scala:1506)
net.liftweb.common.EmptyBox.or(Box.scala:646)
net.liftweb.http.LiftSession.net$liftweb$http$LiftSession$$findSnippetInstance(LiftSession.scala:1505)
net.liftweb.http.LiftSession$$anonfun$locateAndCacheSnippet$1$1$$anonfun$apply$88.apply(LiftSession.scala:1670)
net.liftweb.http.LiftSession$$anonfun$locateAndCacheSnippet$1$1$$anonfun$apply$88.apply(LiftSession.scala:1669) 
```

有人知道我哪里出错了吗？我无法在 Menu.param 上找到很多信息。

非常感谢您的帮助。

F

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T20:46:47.717

我从来没有尝试过你在做什么，所以我不确定完成它的最佳方法。您使用 Loc 参数的方式是从 URL 模式中提取变量。在您的情况下， Item 的字符串表示形式`http://server/item/ITEMID`在哪里`ITEMID`，哪个是传递给`fetchItem`函数的值。如果您只是随意调用函数调用，它将没有值，并且据我所知，您正在请求一个未初始化的值。

我认为有两种可能的解决方案。第一个是使用[`S.location`](http://scala-tools.org/mvnsites/liftweb-2.4/#net.liftweb.http.S)而不是`AnItemPage.menu.currentValue`. 它将返回一个`Box[Loc[Any]]`表示`Loc`当前正在访问的 （使用参数集）。您可以使用它`Loc`来检索`currentValue`和设置参数。

另一种选择是在您的代码段中实例化演员。像这样的东西：

**项目.html**

```
 <div data-lift="AnItemPage">
     <div id="mycomet"></div>
   </div> 
```

然后在您的 AnItemPage 片段中，如下所示：

```
class AnItemPage(item: Item) {
  def render = "#mycomet" #> new AddCometItemPage(item).render 
} 
```

我还没有测试过其中任何一个，所以他们可能需要一些调整。希望它能给你一个大致的想法。

# smalltalk - 当我加载包含此类的蒙蒂塞洛包时，是否有特定方法会在类中执行？

> ID：14840613
> 
> 赞同：4
> 
> 时间：2013-02-12T19:53:05.520
> 
> 标签：smalltalk, pharo, squeak, monticello

当我加载包含此类的蒙蒂塞洛包时，是否有特定方法会在类中执行？

一个例子：

版本 1，

SomeMonticelloPackage-MyName.1.mcz：

```
Object subclass: #SomeClass
    classVariableNames: 'ImportantParameter'

SomeClass class>>defaultParameter
    ^ false

SomeClass class>>initialize
    ImportantParameter := self defaultParameter 
```

在版本 2 中，我更改了重要参数的默认值，

SomeMonticelloPackage-MyName.2.mcz：

```
SomeClass class>>defaultParameter
    ^ true

SomeClass class>>initialize
    ImportantParameter := self defaultParameter 
```

*   如果我将第 1 版加载到空图像中，一切正常。
*   如果我将第 2 版加载到空图像中，一切正常。
*   如果我先加载第 1 版，然后再加载第 2 版，那么第 2 版会使用错误的默认值。

所以我希望当一个包含这个类的蒙蒂塞洛包被加载到一个图像中时，可以在一个类中调用一些方法，这样我就可以重新初始化这个类。有吗？这个问题还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T12:10:49.103

是的，当您加载 MC 包时，会执行一个特定的方法：`initialize`方法！

更准确地说，如果`initialize`方法与图像中已经存在的方法不同，它就会被执行。MC 对这些类初始化器进行特殊处理（就像在使用变更集而不是 Monticello 时对它们进行特殊处理一样）。

所以在你的例子中，一切都很好。加载第二个版本`initialize`将导致它被执行。（编辑：既然你更新了你的例子，所以初始化本身没有被修改，你需要遵循我下一段中的建议）。

但要小心：如果另一个包版本具有相同的确切`initialize`类方法，它将*不会*再次执行。这是因为蒙蒂塞洛在加载包时，只考虑与图像中不同的方法，以及加载版本提供的方法。所以如果你想*强制*执行该`initialize`方法，你至少需要给它一个不同的时间戳。

# django - Django - 使用表单在 Django 管理员之外自动填充 created_by 字段

> ID：14840615
> 
> 赞同：1
> 
> 时间：2013-02-12T19:53:05.940
> 
> 标签：django, django-models, django-forms

要求用户通过填写​​由 modelformset_factory 创建的表单来在 django 管理员之外创建一个新实例。问题是我不知道如何将 request.user 传递给表单，因此在保存表单时 created_by 字段无效。

模型.py：

```
from django.db import models
from django.contrib.auth.models import User

class ezApp(models.Model):
    name = models.SlugField(max_length=50, unique=True )
    date_created = models.DateTimeField('date created', auto_now_add=True)
    date_updated = models.DateTimeField('date updated', auto_now=True)
    created_by = models.ForeignKey(User)
    in_use = models.BooleanField() 
```

视图.py

```
from django.shortcuts import render_to_response
from ezmapping.models import *
from django.forms.models import modelformset_factory

def setName(request):
    ezAppFormSet = modelformset_factory(ezApp, extra=1, fields=('name'))
    formset = ezAppFormSet(queryset=ezApp.objects.none())
    if request.method == 'POST':
        formset = ezAppFormSet(request.POST, request.FILES)
        if formset.is_valid():
            formset.save()
    return render_to_response("project/manage_new.html", {'formset': formset, 'title': "New"}, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T21:34:05.067

您可以`created_by`在保存实例之前自行设置该字段。

做这样的事情：

```
if formset.is_valid():
    instances = formset.save(commit=False)
    for instance in instances:
        instance.created_by = request.user
        instance.save() 
```

有关此功能的文档在[此处](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#saving-objects-in-the-formset)。

# c# - 通过权限（或活动或操作）而不是按角色进行 ASP.NET MVC 身份验证

> ID：14840621
> 
> 赞同：1
> 
> 时间：2013-02-12T19:53:19.457
> 
> 标签：c#, .net, asp.net-mvc, security, authentication

ASP.NET MVC 提供了保护控制器及其方法的可能性，方法是使用`[Authorize(Roles = "Administrators, Content Editor")]`.

我想使用这种机制，但要检查权限而不是角色。这是一个更好的设计：一个用户有一个或多个角色，每个角色都有一个权限集。然后对权限进行安全检查，并且更容易添加具有特定权限的新角色。

我想使用标准的 SQL 角色提供程序。所以到目前为止我发现的唯一解决方案是使用微软提供的所有东西，但也可以使用普通的“角色”作为权限。然后我必须创建一个自定义表（和 UI）来处理真实角色（自定义表）和微软“角色”（而不是用作权限）之间的关联。

有没有更好的方法来做我需要的事情？

谢谢！

# ruby-on-rails - 如何在 Rails ActiveRecord 中专门过滤相关模型中的标签

> ID：14840623
> 
> 赞同：0
> 
> 时间：2013-02-12T19:53:23.903
> 
> 标签：ruby-on-rails, ruby, filter, tags, rails-activerecord

我目前有这个：

```
class Item < ActiveRecord::Base
  has_many :item_tags, :dependent => :delete_all
  has_many :tags, :through => :item_tags, :order => 'name ASC'

  scope :asc, order('filename ASC')
end

class Tag < ActiveRecord::Base
  has_many :item_tags, :dependent => :delete_all
  has_many :items, :through => :item_tags

  scope :asc, order('name ASC')

  validates_presence_of :name
  validates_uniqueness_of :name
end

class ItemTag < ActiveRecord::Base
  belongs_to :item
  belongs_to :tag

  scope :asc, order('position ASC')
end 
```

我可以通过以下标签轻松地进行包容性过滤：

```
@items = Item.asc
@items = @items.joins(:item_tags).where('item_tags.tag_id' => params[:tags]) if params[:tags]
# params[:tags] contains a string of comma separated tags IDs like: "13,14,15" 
```

但结果（当然）包括标签为 13、14 或 15 的所有项目。

如何构建仅返回具有标签 13 AND 14 AND 15 的项目的查询？

例如。如果我按“椅子”和“现代”标签过滤，我不想要所有椅子物品和所有现代物品。我只想要所有现代椅子物品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:14:53.543

答案就在这里：[查找与所有类别匹配的产品（Rails 3.1）](https://stackoverflow.com/questions/11885929/find-products-matching-all-categories-rails-3-1/11887362#11887362)

我需要这样做：

```
tags = params[:tags].split(',')
Item.joins(:tags).where(:tags => {:id => tags}).group('items.id').having("count(item_tags.tag_id) = #{tags.count}") 
```

# ajax - ITHit Ajax 浏览器更新文件问题

> ID：14840630
> 
> 赞同：0
> 
> 时间：2013-02-12T19:53:57.607
> 
> 标签：ajax, webdav, ithit-ajax-file-browser

ITHit Ajax 浏览器功能右键单击“更新文件...”我们的用户认为非常危险。例如，可以使用 .xls 文件更新 .doc 文件，从而导致“损坏”的 word 文件实际上包含 Excel 工作簿，因此我们在每个新的 Ajax 浏览器版本中都删除了 ITHitAJAXFileBrowser.js 文件中的此菜单项。是否可以通过自定义来改进或删除该功能？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:45:05.457

要删除 Ajax 文件浏览器中的菜单项，您可以使用以下代码：

```
ITHit.Events.AddListener(ajaxFileBrowser.GetMenuManager(), 'OnShowMenu', onShowMenu);
...
function onShowMenu(menu, aContextMenuHierarchyItems) { 
    var index = getMenuIndexByMenuId(menu, 'CustomProperties');
    if (index != -1) {
        menu.Children.splice(index, 1);
    }
}

function getMenuIndexByMenuId(menu, menuId) {
    for (var i = 0, l = menu.Children.length; i < l; i++) {
        if (menu.Children[i].Id == menuId) {
           return i;
        }
    }
    return -1;
} 
```

请在此处找到更多信息：http: [//www.webdavsystem.com/ajaxfilebrowser/programming/context_menu_customization](http://www.webdavsystem.com/ajaxfilebrowser/programming/context_menu_customization) [http://www.ajaxbrowser.com/?menudlgdemo](http://www.ajaxbrowser.com/?menudlgdemo)

# powershell - Powershell：查找和替换由换行符分割的单词

> ID：14840632
> 
> 赞同：1
> 
> 时间：2013-02-12T19:53:59.040
> 
> 标签：powershell

所以我有一个看起来像这样的文本文件：

```
Members : {USER\member1, USER\member2, US
           ER\member3, USER\member4, USER
           \member5, USER\member6} 
```

我想删除`USER\`. 以下代码将其删除，但在被换行符分割时不会删除，例如`US`在一行和`ER\`另一行时。

```
Foreach-Object { %{$_.Replace('USER\', '') } 
```

插进``n or `r`去是不行的。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T20:07:09.733

尝试这个：

```
PS > ((Get-Content .\t.txt) | % { $_.Trim() }) -join "" -replace "USER\\"
Members : {member1, member2, member3, member4, member5, member6} 
```

如果文本在字符串数组中，`(Get-Content .\t.txt)`请使用您的变量切换。如果您在字符串（不是数组）变量中有文本，请使用：

```
($MYSTRINGVAR.Split("`r`n") | % { $_.Trim() }) -join "" -replace "USER\\" 
```

**编辑**只需修改“成员”部分：

```
$text = (Get-Content .\input.txt) -join "`r`n"
($text | Select-String '(?s)(?<=Members : \{)(.+?)(?=\})' -AllMatches).Matches | % {
        $text = $text.Replace($_.Value, ($_.Value -split "`r`n" | % { $_.Trim() }) -join "" -replace "USER\\")
}
$text | Set-Content output.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T21:56:37.127

这实际上只是对[Graimer 解决方案](https://stackoverflow.com/a/14840857/1630171)的评论，但它会太长而且作为评论也不够可读，所以我将其作为（补充）答案。

要在删除后重新包装字符串，`USER\`您可以执行以下操作：

```
$s = "Members : {member1, member2, member3, member4, member5, member6}"

$s -match '^(.*?{)(.*)(})$'
$pad = " " * $matches[1].Length
$matches[1] + ($matches[2] -replace '(.{1,20},) ', "`$1`r`n$pad") + $matches[3] 
```

第一个正则表达式将字符串分成 3 个部分，可以通过`$matches`集合访问：

```
Name  Value
----  -----
3     }
2     member1, member2, member3, member4, member5, member6
1     Members : {
0     Members : {member1, member2, member3, member4, member5, member6} 
```

`$matches[1]`是包括左大括号的序言，`$matches[2]`是成员列表，`$matches[3]`是右大括号。现在你只需要以`$matches[2]`你想要的任何长度包装：

```
'(.*{1,20},) ' 
```

上面的意思是“最长匹配最多 20 个字符，后跟逗号和空格”。将其替换为第一^组( `$1`) 后跟换行符 (```r `n``) and a number of spaces that matches the length of the prologue (`$pad`) 并将其与序言和尾随花括号粘合在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T21:37:36.560

可能有更简单的方法可以到达那里，但你可以试试这个：

```
$Text = @'
Members : {USER\member1, USER\member2, US
           ER\member3, USER\member4, USER
           \member5, USER\member6}
'@

# First - USER\ with newline inside..
foreach ($index in 1..4) {
    $Text = $Text -replace ('USER\\'.Insert($index,'(\r\n\s+)')), '$1'
}

# Than - pure USER\
$Text = $Text -replace 'USER\\'
$Text 
```

如您所见，我创建了一些包含该元素并将其保留在结果中的模式 ( `, '$1'`)。对于简单的 - 我只是删除 USER\ 我已使用 herestring 创建要使用的文本，实际文件*可能*不需要 \r。

# android - Android垃圾收集器是否在运行时暂停其他应用程序？

> ID：14840637
> 
> 赞同：11
> 
> 时间：2013-02-12T19:54:19.913
> 
> 标签：android, performance, garbage-collection

我发现了一些与我矛盾的关于 Android 垃圾收集器的信息。

Android 开发者指南 说：

> Android 3.0 是该平台的第一个版本，旨在在单核或多核处理器架构上运行。Dalvik VM、Bionic 库和其他地方的各种变化增加了对多核环境中对称多处理的支持。这些优化可以使所有应用程序受益，甚至是那些单线程的应用程序。例如，如果有两个活动核心，如果 Dalvik 垃圾收集器在第二个核心上运行，单线程应用程序可能仍会看到性能提升。系统会自动安排。”

好的，现在是另一件事

根据此链接：[Dalvik Virtual Machine Architecture](http://davidehringer.com/software/android/The_Dalvik_Virtual_Machine.pdf) android 使用标记和扫描方法。

> Dalvik 垃圾收集器中的当前策略是保留标记位，或指示特定对象“可访问”的位，因此不应被垃圾收集，与其他堆内存分开。

如果我们在这个链接上检查标记和清除是如何工作的： [标记和清除垃圾收集算法](http://www.brpreiss.com/books/opus5/html/page424.html) ，我们可以看到：

> 标记和清除方法的主要缺点是正常程序执行在垃圾收集算法运行时被挂起。特别是，在与人类用户交互或必须满足实时执行约束的程序中，这可能是一个问题。例如，使用标记和清除垃圾收集的交互式应用程序会周期性地无响应。

所以我现在的问题是，它是如何真正起作用的？垃圾收集器会在他工作时暂停一切，还是能够完全独立于其他活动处理器内核运行？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-13T00:56:13.627

**Gingerbread 及更高**版本中的 Dalvik VM使用**Mostly Concurrent 部分收集**垃圾收集器，暂停时间通常约为 5 毫秒。因此，是的，GC 通过停止它们来影响其他应用程序，但并发 GC 算法能够最小化这些暂停。

你应该看看：

*   [Android垃圾收集器的技术细节](https://stackoverflow.com/q/4818869/772000)
*   [Does the DalvikVM Garbage Collector halt the whole VM?](https://stackoverflow.com/q/13657904/772000)

In general, the Garbage Collection theory [[Garbage Collection Wiki]](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29#Stop-the-world_vs._incremental_vs._concurrent) explains:

*   **Stop-the-world** garbage collectors completely halt execution of the program to run a collection cycle

*   **Incremental and concurrent garbage collectors** are designed to reduce this disruption by interleaving their work with activity from the main program. Incremental garbage collectors perform the garbage collection cycle in discrete phases, with program execution permitted between each phase (and sometimes during some phases).

*   **Concurrent garbage collectors** do not stop program execution at all, except perhaps briefly when the program's execution stack is scanned.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T20:07:29.163

完全独立是不可能的：垃圾收集器和程序使用相同的内存并且必须以某种方式进行通信。即使是“无暂停”的 GC，比如 Azul 的（顺便说一句，很好读：[http](http://www.artima.com/lejava/articles/azul_pauseless_gc.html) ://www.artima.com/lejava/articles/azul_pauseless_gc.html ），也有技术暂停。Dalvik 可能（纯属猜测，基于过去 15 年中 IBM、Sun 和 Oracle 等公司可能涌入 JVM 的轶事证据和资源）落后于 JVM 中发现的最新技术数年，所以我怀疑停顿时间会更长.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T20:08:58.470

它不会暂停其他应用程序，它可能会暂停您的应用程序。标记和扫描不必停止*所有*处理，它只是最简单的方法。它可能有一些地方会暂停执行，而其他地方则不会。唯一真正的判断方法是查看 Dalvik VM 代码。而且我不会指望它在所有版本的 Android 中都是相同的答案。

# jquery - InnerHTML <> JQuery.html() - 取决于它的版本

> ID：14840640
> 
> 赞同：1
> 
> 时间：2013-02-12T19:54:27.320
> 
> 标签：jquery, innerhtml

这让我抓狂。我正在使用 JQuery 1.9 进行测试...我传递了一些 HTML 代码，包括脚本标签...我在元素中搜索脚本元素并找到了它们。就像是：

```
var myHtml = '<div>...</div><script href="..."></script>';
var myElem = $('<div/>').html(myHtml);
var scripts = myElem.find('script');
//scripts.length == 1 
```

但是在生产中，我有旧版本（JQuery 1.7），并且`scripts.length`是 0... 并且调试器显示脚本已添加到标题中？？？

*   [JsFiddle Example (JQuery 1.9.1)](http://jsfiddle.net/AxxvF/1/) 1 Script Found (脚本被插入到div中)
*   [JsFiddle Example (JQuery 1.7.2)](http://jsfiddle.net/AxxvF/2/) 0 Scripts Found (脚本被插入到标题中)

所以可能的解决方案（非常丑陋）是在此代码运行之前和之后检测标头的脚本......或使用 100% DOM

如果您在如何使用 JQuery 早期版本（例如 1.7）在一段 html 代码中找到脚本元素中有任何其他更漂亮的解决方案？？？

**更新**

我找到了一个可能的解决方案： [JsFiddle Example (JQuery 1.7.2 + DOM)](http://jsfiddle.net/AxxvF/3/) 1 Script Found (script is inserted in the div)

# c++ - 在 C++ 中使用向量给了我一个我无法理解的错误

> ID：14840642
> 
> 赞同：2
> 
> 时间：2013-02-12T19:54:33.070
> 
> 标签：c++, vector, compiler-errors

代码如下：

```
#include <stdio.h>
#include <math.h>
#include <vector>

float comp_cur(float A_x, float A_y, float B_x, float B_y, float C_x, float C_y);
void comp_arr(std::vector<float> vals, std::vector<float> out, int scale, float dim);

main(){
    std::vector <float> curves;
    std::vector <float> inputs;

    inputs.push_back(2.0);
    inputs.push_back(3.0);
    inputs.push_back(6.0);
    inputs.push_back(1.0);
    inputs.push_back(7.0);

    comp_arr(inputs,curves,1.0,1.0);
}

float comp_cur(float A_x, float A_y, float B_x, float B_y, float C_x, float C_y){

    B_x = B_x-A_x;
    B_y = B_y-A_y;
    C_x = C_x-A_x;
    C_y = C_y-A_y;
    A_x = 0;
    A_y = 0;

    float numerator_A = C_y*B_x - B_y*C_x;
    float denominator_A = C_x*C_x*B_x - C_x*B_x*B_x;
    float A = numerator_A / denominator_A;

    float B = (B_y - A*B_x*B_x) / B_x;

    float curviture = 2*A / powf( (1 + (2*A*B_x + B)*(2*A*B_x + B)), 1.5);
    return (curviture);
}

void comp_arr(std::vector<float> vals, std::vector<float> out, int scale, float dim){
    for(int i = scale; i < sizeof(vals)-scale+1; i++){
        float cur = comp_cur((i-scale)*dim, vals[i-1], i*dim, vals[i], (i+scale)*dim, vals[i+1]);
        out.push_back(cur);
    }
} 
```

关于 comp_cur 的一切工作正常，但 comp_arr 函数抛出一个可怕的错误。我对 C 和 C++ 很陌生，所以我根本无法理解这个错误。

```
/tmp/ccTCZ2bX.o: In function `main':
comp.cpp:(.text+0x174): undefined reference to `__cxa_end_cleanup'
/tmp/ccTCZ2bX.o:(.ARM.extab+0x0): undefined reference to `__gxx_personality_v0'
/tmp/ccTCZ2bX.o: In function `std::vector<float, std::allocator<float> >::~vector()':
comp.cpp:(.text._ZNSt6vectorIfSaIfEED2Ev[_ZNSt6vectorIfSaIfEED5Ev]+0x6c): undefined reference to `__cxa_end_cleanup'
/tmp/ccTCZ2bX.o:(.ARM.extab.text._ZNSt6vectorIfSaIfEED2Ev[_ZNSt6vectorIfSaIfEED5Ev]+0x0): undefined reference to `__gxx_personality_v0'
/tmp/ccTCZ2bX.o: In function `std::vector<float, std::allocator<float> >::vector(std::vector<float, std::allocator<float> > const&)':
comp.cpp:(.text._ZNSt6vectorIfSaIfEEC2ERKS1_[_ZNSt6vectorIfSaIfEEC5ERKS1_]+0xb4): undefined reference to `__cxa_end_cleanup'
/tmp/ccTCZ2bX.o:(.ARM.extab.text._ZNSt6vectorIfSaIfEEC2ERKS1_[_ZNSt6vectorIfSaIfEEC5ERKS1_]+0x0): undefined reference to `__gxx_personality_v0'
/tmp/ccTCZ2bX.o: In function `std::_Vector_base<float, std::allocator<float> >::~_Vector_base()':
comp.cpp:(.text._ZNSt12_Vector_baseIfSaIfEED2Ev[_ZNSt12_Vector_baseIfSaIfEED5Ev]+0x70): undefined reference to `__cxa_end_cleanup'
/tmp/ccTCZ2bX.o:(.ARM.extab.text._ZNSt12_Vector_baseIfSaIfEED2Ev[_ZNSt12_Vector_baseIfSaIfEED5Ev]+0x0): undefined reference to `__gxx_personality_v0'
/tmp/ccTCZ2bX.o: In function `std::vector<float, std::allocator<float> >::_M_insert_aux(__gnu_cxx::__normal_iterator<float*, std::vector<float, std::allocator<float> > >, float const&)':
comp.cpp:(.text._ZNSt6vectorIfSaIfEE13_M_insert_auxEN9__gnu_cxx17__normal_iteratorIPfS1_EERKf[std::vector<float, std::allocator<float> >::_M_insert_aux(__gnu_cxx::__normal_iterator<    float*, std::vector<float, std::allocator<float> > >, float const&)]+0x290): undefined reference to `__cxa_end_catch'
comp.cpp:(.text._ZNSt6vectorIfSaIfEE13_M_insert_auxEN9__gnu_cxx17__normal_iteratorIPfS1_EERKf[std::vector<float, std::allocator<float> >::_M_insert_aux(__gnu_cxx::__normal_iterator<    float*, std::vector<float, std::allocator<float> > >, float const&)]+0x294): undefined reference to `__cxa_end_cleanup'
comp.cpp:(.text._ZNSt6vectorIfSaIfEE13_M_insert_auxEN9__gnu_cxx17__normal_iteratorIPfS1_EERKf[std::vector<float, std::allocator<float> >::_M_insert_aux(__gnu_cxx::__normal_iterator<    float*, std::vector<float, std::allocator<float> > >, float const&)]+0x2a0): undefined reference to `__cxa_begin_catch'
comp.cpp:(.text._ZNSt6vectorIfSaIfEE13_M_insert_auxEN9__gnu_cxx17__normal_iteratorIPfS1_EERKf[std::vector<float, std::allocator<float> >::_M_insert_aux(__gnu_cxx::__normal_iterator<    float*, std::vector<float, std::allocator<float> > >, float const&)]+0x308): undefined reference to `__cxa_rethrow'
/tmp/ccTCZ2bX.o:(.ARM.extab.text._ZNSt6vectorIfSaIfEE13_M_insert_auxEN9__gnu_cxx17__normal_iteratorIPfS1_EERKf[std::vector<float, std::allocator<float>     >::_M_insert_aux(__gnu_cxx::__normal_iterator<float*, std::vector<float, std::allocator<float> > >, float const&)]+0x0): undefined reference to `__gxx_personality_v0'
/tmp/ccTCZ2bX.o: In function `std::_Vector_base<float, std::allocator<float> >::_Vector_base(unsigned int, std::allocator<float> const&)':
comp.cpp:(.text._ZNSt12_Vector_baseIfSaIfEEC2EjRKS0_[_ZNSt12_Vector_baseIfSaIfEEC5EjRKS0_]+0x90): undefined reference to `__cxa_end_cleanup'
/tmp/ccTCZ2bX.o:(.ARM.extab.text._ZNSt12_Vector_baseIfSaIfEEC2EjRKS0_[_ZNSt12_Vector_baseIfSaIfEEC5EjRKS0_]+0x0): undefined reference to `__gxx_personality_v0'
/tmp/ccTCZ2bX.o: In function `std::vector<float, std::allocator<float> >::_M_check_len(unsigned int, char const*) const':
comp.cpp:(.text._ZNKSt6vectorIfSaIfEE12_M_check_lenEjPKc[std::vector<float, std::allocator<float> >::_M_check_len(unsigned int, char const*) const]+0x54): undefined reference to     `std::__throw_length_error(char const*)'
/tmp/ccTCZ2bX.o: In function `__gnu_cxx::new_allocator<float>::deallocate(float*, unsigned int)':
comp.cpp:(.text._ZN9__gnu_cxx13new_allocatorIfE10deallocateEPfj[__gnu_cxx::new_allocator<float>::deallocate(float*, unsigned int)]+0x1c): undefined reference to `operator delete(void*)'
/tmp/ccTCZ2bX.o: In function `__gnu_cxx::new_allocator<float>::allocate(unsigned int, void const*)':
comp.cpp:(.text._ZN9__gnu_cxx13new_allocatorIfE8allocateEjPKv[__gnu_cxx::new_allocator<float>::allocate(unsigned int, void const*)]+0x40): undefined reference to     `std::__throw_bad_alloc()'
comp.cpp:(.text._ZN9__gnu_cxx13new_allocatorIfE8allocateEjPKv[__gnu_cxx::new_allocator<float>::allocate(unsigned int, void const*)]+0x50): undefined reference to `operator new(unsigned     int)'
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T20:14:26.010

在不知道您如何编译的情况下，我会进行有根据的猜测。

确保您使用`g++`而不是`gcc`-`g++`自动为您编译 c++ 设置一些选项，包括链接到标准库。或者，给出`-lstdc++`和`-x c++`选项。

# javascript - 指令和元素间通信

> ID：14840644
> 
> 赞同：2
> 
> 时间：2013-02-12T19:54:44.457
> 
> 标签：javascript, angularjs, angularjs-directive

我创建了以下简单指令来重定向输入按键事件。

我认为使用向另一个处理按键事件的指令发出消息可能会更好，而不是像我在这里所做的那样使用 jQuery 标识符。

与 Angular 哲学一致，处理元素到元素通信时的最佳实践是什么？为什么？

谢谢

```
=========================================================
.directive('redirectEnter',function() {
    return {
        restrict : 'A',
        link : function($scope,$element,$attr) {
            $element.keypress(function($event) {
                if($event.keyCode == '13') {
                    $($attr.redirectEnter).click();
                    $event.stopPropagation();
                    $event.preventDefault();
                }
            });
        }
    }
})
=========================================================
<a redirect-enter="#apply">Redirect enter example</a>
<button id="apply">Apply</button> 
========================================================= 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:05:36.277

您的 HTML 示例没有通过`ng-click`等连接到按钮元素的任何逻辑，因此为了举例，让我们想象一下这样的视图：

```
<input ng-model="model.something">
<button ng-click="submit()"> 
```

（请记住，您的 DOM 元素应该通过指令或控制器的范围与逻辑相关联。使用`$("#apply").click(...)`是禁忌！）

在这个例子中，很容易说我们希望`input`元素吃掉“输入”按键并将它们“重定向”到按钮。但我们*真正*想要的“输入”按键`input`是*按钮将执行的操作*——在这种情况下，调用`submit`作用域上的方法。

这是一个指令，它将一个表达式作为其`redirect-enter`属性进行评估（我可能会称其为`onEnter`）并评估该表达式。

```
<input ng-model="model.something" redirect-enter="submit()">
<button ng-click="submit()">Submit</button> 
```

这是使这项工作起作用的指令：

```
app.directive('redirectEnter', function() {
  return {
    restrict : 'A',
    link : function($scope,$element,$attr) {
      $element.keypress(function($event) {
        if($event.keyCode == '13') {
          $scope.$eval($attr.redirectEnter);
          $event.stopPropagation();
          $event.preventDefault();
        }
      });
    }
  }
}); 
```

这是关于 jsFiddle 的示例：http: [//jsfiddle.net/BinaryMuse/HgD9y/](http://jsfiddle.net/BinaryMuse/HgD9y/)

请注意，如果您希望在链接元素上具有相同的行为，则应使用`ng-click`.

如果您正在努力避免在您的 Angular 代码中使用普通的 jQuery 选择器（就像我在此答案顶部提到的否决），请考虑[Angular FAQ](http://docs.angularjs.org/misc/faq)中的以下建议：

> 停止尝试使用 jQuery 修改控制器中的 DOM。真的。这包括添加元素、删除元素、检索它们的内容、显示和隐藏它们。使用内置指令，或在必要时编写自己的指令来进行 DOM 操作。有关复制功能，请参见下文。
> 
> 如果您正在努力改掉这个习惯，请考虑从您的应用程序中删除 jQuery。真的。Angular 具有 $http 服务和强大的指令，几乎总是不需要它。Angular 捆绑的 jQLite 具有一些最常用于编写 Angular 指令的特性，尤其是绑定到事件。

# android - Android ContentObserver - 联系人 - 无状态更新

> ID：14840648
> 
> 赞同：0
> 
> 时间：2013-02-12T19:54:52.340
> 
> 标签：android, contentobserver, user-presence

我一直在关注 ICS 的框架，并且似乎 Android Contacts Provider 中的 ContactsProvider2 在任何插入/更新后调用 notifyChange，不仅如此，它还通过以下方式实现：

```
NotifyChange(ContactsContract.AUTHORITY_URI, null, syncToNetwork); 
```

这意味着在联系人 AUTHORITY Uri 上的任何插入/更新/删除都会触发内容观察者获取更新。虽然从理论上讲，这非常好.. 似乎它也可以通过 Presence 更新触发。

如果我尝试在数据表上拉一个游标，它也会将数据表链接到存在，并且对存在的任何更新都有 onLoadFinished 被调用（CursorLoader）。

查看游标问题，看起来是因为 ContactsProvider2 调用

```
setTablesAndProjectionMapForData() 
```

这又将 Presnce/status 列附加到每个数据行。

```
appendContactPresenceJoin(sb, projection, RawContacts.CONTACT_ID);
appendContactStatusUpdateJoin(sb, projection, ContactsColumns.LAST_STATUS_UPDATE_ID);
appendDataPresenceJoin(sb, projection, DataColumns.CONCRETE_ID);
appendDataStatusUpdateJoin(sb, projection, DataColumns.CONCRETE_ID); 
```

有没有办法注册一个内容观察者来获取数据表的更新，而实际上却没有获取状态更改的更新？我相信存在曾经被排除在 2.3 / 3.x 中的 Data.CONTENT_URI 查询中。但看起来它已经改变了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:00:55.500

[CONTENT_VCARD_URI](http://developer.android.com/reference/android/provider/ContactsContract.Contacts.html#CONTENT_VCARD_URI)呢？

# c# - 为什么我会收到此文件 I/O 异常？

> ID：14840650
> 
> 赞同：2
> 
> 时间：2013-02-12T19:55:01.430
> 
> 标签：c#, vb.net, file-io

我正在编写从 Visual Basic 6 机器翻译成 C# 的代码。我正在尝试打开一个文件并读取其内容。这是一个简单的 156 字节短文本文件，strPath 中的路径正确，可以在文本编辑器中轻松打开文件

```
ffNum = VBNET.FileSystem.FreeFile();
VBNET.FileSystem.FileOpen(ffNum, strPath, VBNET.OpenMode.Input,
                          VBNET.OpenAccess.Default, VBNET.OpenShare.Default, -1);
int nSize = (int)VBNET.FileSystem.LOF(ffNum);
String thedata = VBNET.FileSystem.InputString(nSize, ffNum);
VBNET.FileSystem.FileClose(new int[] { ffNum }); 
```

*InputString* (next to last) 行抛出 IOException " Bad **file name or number** "

怎么可能？*FileOpen*调用没有抛出异常，LOF*也*没有，而且它返回了正确的大小。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T19:57:07.480

看起来这些论点是错误的。从[文档](http://msdn.microsoft.com/en-gb/library/microsoft.visualbasic.filesystem.inputstring.aspx)中：

```
Public Shared Function InputString ( _
    FileNumber As Integer, _
    CharCount As Integer _
) As String 
```

注意如何`FileNumber`是第一个参数，`CharCount`是第二个。

所以看起来调用应该是：

```
String thedata = VBNET.FileSystem.InputString(ffNum, nSize); 
```

也就是说，我会尝试完全避免这种代码，并使用类似的东西[`File.ReadAllText`](http://msdn.microsoft.com/en-us/library/system.io.file.readalltext.aspx):)

# c# - IP 多播：我怎么知道有人订阅了？

> ID：14840652
> 
> 赞同：3
> 
> 时间：2013-02-12T19:55:08.473
> 
> 标签：c#, c++, boost, multicast

我一直在研究有关多播的各种文档（.NET WinSock、c++ boost::asio）。我遇到的一个问题是我不知道您如何知道一个群组是否**至少有 1 个订阅者**。我需要它的原因是，如果没有人在听它，那么创建数据就没有多大意义。是否有从下一跳发回的关于树当前状态的消息？当第一个订阅者出现或最后一个订阅者离开时是否会触发某种事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T20:01:01.347

请参阅这篇关于“[多播如何工作](http://technet.microsoft.com/en-us/library/cc759719%28v=ws.10%29.aspx)”的文章。

简而言之，您的应用程序不需要跟踪多播订阅；路由器会为您做到这一点。如果您要生成多播数据，请生成它 - 路由器将负责该数据是否发送给订阅者。

路由器不会引发任何事件来通知您订阅。如果您想要一些通知，则必须将该功能构建到您自己的自定义协议实现中，并要求您的客户端明确通知主机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T00:09:42.750

您可以知道，如果您可以发出 IGMP QUERY 消息，或者通过收听 IGMP JOIN/LEAVE 消息：除非您连接到多个路由器，否则您将只能得到每个消息。只要最后一条 IGMP 消息是您的组的 JOIN 而不是 LEAVE，就至少有一个订阅者。

# php - PHP mkdir 不工作 - 可能与 Mac localhost 有关

> ID：14840660
> 
> 赞同：2
> 
> 时间：2013-02-12T19:55:43.643
> 
> 标签：php, macos, apache, mkdir

我正在尝试在我的 PHP 脚本中执行以下代码：

```
if (!is_dir($path . 'channel-partners/html/intro-letter/' . $name_url)) {
      mkdir($path . 'channel-partners/html/intro-letter/' . $name_url, 0777, true);
} 
```

`$name_url`是在运行时传入的字符串。当我尝试在我的 Mac 本地主机中执行此操作时，我获得了许可。我想知道问题是否不是我的脚本，而是我在 Mac 上设置 Apache 的方式。我是否需要做一些特殊的事情来配置 Apache 以允许它创建文件和创建目录（这里没有显示文件创建）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T20:03:16.563

运行 Apache 的用户或组需要对父 DIR 具有写入权限。Mac 上默认安装的 Apache 在名为 的用户和组下运行`_www`，所以

`chgrp -R _www /the/parent/directory/here`应该做的工作。查看`man chmod` `man chown` `man chgrp`更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T20:00:42.380

您可能应该为 apache 用户设置适当的权限到您的目标文件夹。

# android - ListFragment Textview 不必要的行

> ID：14840661
> 
> 赞同：2
> 
> 时间：2013-02-12T19:55:45.600
> 
> 标签：android, android-layout

ListFragment 生成以下视图：

![截屏](../Images/b878dd53451c816bfa88be87923564c5.png)

我正在尝试消除白线，但到目前为止没有任何帮助。有什么建议么？

布局代码：

```
<TextView xmlns:android=   "   http:  //schemas.android.com/apk/res/android"
    android:id="@+id/Genere_list"
    android:textAppearance="?android:attr/listViewStyle"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@android:color/black"
    android:textColor="@android:color/white" /> 
```

用于创建视图的代码：

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    setListAdapter(new ArrayAdapter<String>(getActivity(),
    R.layout.test_album_view, Generes.GENERE_TITLES));  
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T20:05:36.957

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    getListView().setDivider(null);
    setListAdapter(new ArrayAdapter<String>(getActivity(), R.layout.test_album_view, Generes.GENERE_TITLES));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T20:06:44.667

您需要创建`ListView.xml`如下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

<ListView 
    android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        android:divider="#f19000"
        android:dividerHeight="1dip" >
    </ListView>

</LinearLayout> 
```

您要更改的是以下几行：

```
android:divider="#f19000"
android:dividerHeight="1dip" 
```

你也可以使用

```
android:divider="@android:color/transparent" 
```

使您的线条透明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-11T23:27:58.263

如前所述，你必须使用这个：

```
 android:divider="@null"
    android:dividerHeight="0dp" 
```

在列表视图中：

```
<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:divider="@null"
    android:dividerHeight="0dp">
</ListView> 
```

# c# - 将活动上传到 Google API 日历

> ID：14840669
> 
> 赞同：0
> 
> 时间：2013-02-12T19:56:25.727
> 
> 标签：c#, .net, calendar

我使用 Google Calendar API 编写我的应用程序。一切正常，但是当我尝试将重复的事件上传到 Google 时，出现错误。我不知道，有什么不好的。

代码：

```
EventEntry newEvent = new EventEntry();
newEvent.Title.Text = "Event title";
When time = new When(new DateTime(2013, 02, 12, 15, 0, 0), new DateTime(2013, 02, 12, 17, 0, 0));
newEvent.Times.Add(time);
Where place = new Where();
place.ValueString = "World";
newEvent.Recurrence = new Recurrence();
newEvent.Recurrence.Value = "DTSTART;VALUE=DATE:20130212T15000\r\n" +
                            "DTEND;VALUE=DATE:20130212T17000\r\n" +
                            "RRULE:FREQ=DAILY;BYDAY=Tu;\r\n";
service.Insert(query.Uri, newEvent); 
```

在这种情况下，事件应该在星期二每周重复一次。当我运行它时，我有错误：“请求执行失败” - 但是当我评论 newEvent.Recurrence.Value... 时，一切正常，事件在谷歌日历中但没有重复:(

帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:32:54.760

解决了类似的问题：[如何在 Google 日历中创建“recurData”？](https://stackoverflow.com/questions/2409483/how-to-create-recurdata-in-google-calendar/2492953#2492953)

所以创建一个单独的重复

```
EventEntry myEntry = new EventEntry();
myEntry.Title.Text = "Hello recurring Event!";
// Set a location for the event.
Where eventLocation = new Where();
eventLocation.ValueString = "here and there";
entry.Locations.Add(eventLocation);

// Any other event properties

// Recurring event:
String recurData =
  "DTSTART;VALUE=DATE:20070501\r\n" +
  "DTEND;VALUE=DATE:20070502\r\n" +
  "RRULE:FREQ=WEEKLY;BYDAY=Tu;UNTIL=20070904\r\n";

Recurrence recurrence = new Recurrence();
recurrence.Value = recurData;
myEntry.Recurrence = recurrence; 
```

# ios - iOS telprompt - 你能得到通话的状态吗？

> ID：14840672
> 
> 赞同：4
> 
> 时间：2013-02-12T19:56:46.270
> 
> 标签：ios, phone-call, telprompt

我正在开发的应用程序会在用户要求时拨打电话，并在通话结束时使用 telprompt 回到应用程序。有什么方法可以说明导致通话结束的原因吗？如果呼叫失败，我想做一件事，但如果它成功并且用户只是点击“END”，我想做其他事情。不过，我在文档中没有看到任何关于它的内容。

TIA

珍妮

# python - Python拆分提取的CSV数据

> ID：14840675
> 
> 赞同：0
> 
> 时间：2013-02-12T19:56:50.913
> 
> 标签：python, csv, split

我有一些格式的数据（取自 CSV 文件）：

```
 MyValues = [[2 2 2 1 1]
             [2 2 2 2 1]
             [1 2 2 1 1]
             [2 1 2 1 2]
             [2 1 2 1 2]
             [2 1 2 1 2]
             [2 1 2 1 2]
             [2 2 2 1 1]
             [1 2 2 1 1]] 
```

我想将这些数据分成 2/3 和 1/3 并能够区分它们。例如

```
twoThirds = [[2 2 2 1 1]
             [2 2 2 2 1]
             [1 2 2 1 1]
             [2 1 2 1 2]
             [2 1 2 1 2]
             [2 1 2 1 2]]

 oneThird = [[2 1 2 1 2]
             [2 2 2 1 1]
             [1 2 2 1 1]] 
```

我试图使用下面的代码来实现这一点，但我不确定我是否以正确的方式解决了这个问题？

```
 twoThirds = (MyValues * 2) / 3 #What does this code provide me? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T20:02:41.173

它只是一个列表，使用切片表示法。并阅读[文档](http://docs.python.org/2/tutorial/introduction.html#lists)：

```
In [59]: l = range(9)

In [60]: l[:len(l)/3*2]
Out[60]: [0, 1, 2, 3, 4, 5]

In [61]: l[len(l)/3*2:]
Out[61]: [6, 7, 8] 
```

# css - 添加没有自动换行 css 的换行符

> ID：14840678
> 
> 赞同：1
> 
> 时间：2013-02-12T19:57:05.617
> 
> 标签：css

我有一个`textarea`像这样的CSS类..

```
.expanderHTMLText{
     font: 12px Arial, Helvetica;   
    min-height: 50px;
    white-space:nowrap;
} 
```

我不希望单词在长单词之间中断，但我确实希望填充框的文本不要全部在带有滚动条的 1 行上。我想摆脱水平滚动，但不必打破文字来做到这一点。我该如何做到这一点？

![在此处输入图像描述](../Images/c8f5bee7a9615af5cfbf0ca928603dad.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T20:28:31.380

删除空格：nowrap；线，它不会在一条线上。

编辑：谁对我投了反对票？请给我一个解释。

空白：nowrap；明确定义，不会发生包装。包装文本的唯一方法是删除或更改此属性。white-space 属性的默认值是 normal，它的作用几乎与 nowrap 相同，只是它将换行文本（折叠空格）。

如果您不想将单词（甚至是长单词）拆分为多行，则需要添加 word-wrap: normal; 正如 JSW189 建议的那样。但是，如果您有一个不适合一行的单词，那么您仍然会得到一个水平滚动条 - 但这很明显，您要么在多行上有单词，要么是滚动条。

# ios - 需要在 iOS 列中获取最大重复值

> ID：14840686
> 
> 赞同：0
> 
> 时间：2013-02-12T19:57:25.580
> 
> 标签：ios, objective-c, sqlite

我正在使用 sqllite 数据库。

我有一个表（命名为联系人）与行的命名： ID ， Page ， Lat ， lon ， outDate

我需要得到最大。页面中的重复值和其他列值仅针对此最大值我该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:23:57.357

一种方法是首先隔离 Page 列的最大重复值，然后在子查询中使用该值来选择与其匹配的所有联系人行。

要隔离 page 列的最大重复值，您可以使用 group by 子句，该子句将根据该行中的“Page”值将所有结果行组合在一起。如果您按照与“Page”值匹配的行数以降序方式对它们进行排序，然后只取顶行，则您将获得“Page”的最大重复值。

```
select * from contact where Page in (
select Page from contact group by Page order by count(*) desc limit 1) 
```

# css - 图像的 Css UL LI 对齐

> ID：14840688
> 
> 赞同：0
> 
> 时间：2013-02-12T19:57:32.223
> 
> 标签：css, html-lists

我有这个 html 代码：

```
<ul id="top-bar">
    <li class="top-icon-block"><img src="images/home.png"></li>
    <li class="top-icon-sep-block"><img src="images/top_icon_separator.png"></li>
    <li class="top-icon-block"><img src="images/home.png"></li>
</ul> 
```

相关的 CSS 如下所示：

```
 #top-bar {
width: inherit;
height: 40px;
padding: 0px;
margin: 0px;
vertical-align: middle;
display: table-row;
}

.top-icon-block {
    width: 50px;
margin: 0px;
background-image: url("images/top_bar_bg.png");
background-repeat: repeat-x;
display: table-cell;
text-align: center;
}

li.top-icon-block img {
padding-top: 8px;
vertical-align: middle;
}

.top-icon-sep-block {
width: 4px;
margin: 0px;
background-image: url("images/top_bar_bg.png");
background-repeat: repeat-x;
display: table-cell;
text-align: center;
}

li.top-icon-sep-block img {
padding-top: 18px;
vertical-align: middle;
} 
```

出于某种原因，所有图像都基于最高填充顶部对齐，而我真的需要它们不同。

这是一个jsfiddle：http: [//jsfiddle.net/XWdMP/](http://jsfiddle.net/XWdMP/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:13:53.307

如果我正确理解您的问题，那是因为您的元素上的填充不同，但它与较大的填充内联呈现。有效地压低你的其他两个图像。

添加一个隐藏到你的 li 元素的溢出应该可以解决问题并隐藏从图像填充差异中显示的间隙。

```
#top-bar li {
    overflow: hidden;
} 
```

让我知道这是否可以解决问题。 [http://jsfiddle.net/rakkeh/XWdMP/1/](http://jsfiddle.net/rakkeh/XWdMP/1/)

# php - 为什么我收到“无法重新声明 drupal_error_levels()”错误？

> ID：14840690
> 
> 赞同：2
> 
> 时间：2013-02-12T19:57:35.697
> 
> 标签：php, drupal, drupal-7

我有一个在服务器上运行 Drupal 7 的站点，我在特定页面和特定操作（如（清除缓存，或类似“/日历”的页面）上）收到以下错误，否则站点运行正常。

> 致命错误：无法在第 16 行的 includes/errors.inc 中重新声明 drupal_error_levels()
> 致命错误：无法在第 16 行的 includes/database/query.inc 中重新声明类 QueryConditionInterface

我在生产服务器上收到此错误。如果我在我的本地服务器或主机提供商的任何其他服务器上运行相同的代码和数据库，它运行良好而没有错误。

我不知道是什么导致了这个错误，我也检查了文件并且没有重复的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T16:10:52.087

我能够在我的安装中指定这个问题。我修改了一个模块和模板。为此，我制作了特定模块/模板文件夹的副本作为备份。Drupal 显然所做的是检查这两个文件夹中的文件夹并加载它们 - 无论是否必要。而你现在我已经加载了两倍的所有函数和 css 类：-Q 这不会立即发生，但只要你进入 drupal 后端中的模块或模板;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T21:02:22.917

这可能为时已晚，无法帮助 OP，但在将我的 Drupal/CiviCRM 站点移动到同一主机上的新服务器后，我遇到了这些相同的错误（在某些页面/URL 上，但不是其他的）。我创建了一些符号链接来解决[CiviCRM 问题](http://forum.civicrm.org/index.php?topic=14372.0)，但在移动站点后它们被破坏了。更正这些符号链接为我解决了这个问题。

我还有其他问题，但我不知道它们是否相关。如果这不能完全解决您的问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-22T00:27:51.243

此错误通常是由 PHP 缓存和优化引擎引起的。

所以请禁用 XCache、eAccelerator、XDebug 等扩展，如果有，请重新启动 memcached，错误应该消失了。

如果它仍在发生，请检查您的[数据库排序规则](https://stackoverflow.com/q/5906585/55075)（它应该不区分大小写，例如：）`general_ci`。

# java - 每个类的 Java + Selenium 对象

> ID：14840694
> 
> 赞同：-1
> 
> 时间：2013-02-12T19:57:50.087
> 
> 标签：java, selenium, testng, selenium-webdriver

我在 Java 中使用 Selenium + TestNG 进行 Web 自动化。目前我已经设置了我的自动化，这样我就有了一个静态 Web 驱动程序，并且每次调用 webdriver 都会返回相同的浏览器实例。

虽然这对我来说更容易开发不同的模块（无需传递对象），但现在我在尝试并行运行 TC 时遇到了问题。

我想知道是否有任何方法可以为每个测试用例创建一个 webdriver，并在同一个测试用例中使用相同的 webdriver，而无需将该对象实际传递给各个模块？

例如：我有测试用例 TC1 ，测试用例 TC2

我有模块 1 、 2 、 3 ，它们都被 TC1 和 TC2 调用。我需要创建两个 webdriver 对象 W1 和 W2，以便 TC1 中的所有方法都使用 W1，而 TC2 中的所有方法都使用 W2，而无需我将 W1 和 W2 显式传递给所有模块。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:38:24.750

一种方法是将 webdriver 实例创建为[ThreadLocal](http://docs.oracle.com/javase/6/docs/api/java/lang/ThreadLocal.html)对象。这样，您的实例将在您的线程中是全局的，并且仅对由于并行运行而触发的线程是局部的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:39:37.340

*   使用非静态 webdriver 对象初始化创建一个基类。
*   在您的测试类中扩展上述 BaseClass。
*   根据您需要初始化 webdriver 对象的步骤，使用 @Before 和 @After 注释来初始化和退出基类中的驱动程序对象。

# .net - 尝试将 ItextSharp 列表（不是列表框之类的列表，而是项目符号列表）添加到 PDF

> ID：14840697
> 
> 赞同：1
> 
> 时间：2013-02-12T19:57:59.513
> 
> 标签：.net, silverlight, pdf, itextsharp

我正在使用 ItextSharp Stamper 加载模板 PDF，并希望将项目符号列表添加到 PDF 中的特定位置。

拳头这可能吗？我在 mikesdotnetting 博客中看到了如何创建列表，它看起来像我需要的。但是，我想定位列表。

我意识到那里有很多关于 ItextSharp 的文章和线程，但没有找到任何东西。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T18:44:32.320

所以我找到了我的问题的答案。我所做的是：

```
 //Used to add Bulleted list to PDF
        PdfContentByte cb = stamper.GetOverContent(1);
        ColumnText ct = new ColumnText(cb);

        //Get the coordinates of a text field(PUTLISTHERE) to put the List into
        System.Collections.Generic.IList<AcroFields.FieldPosition> fieldsList = fields.GetFieldPositions("PutListHere");
        AcroFields.FieldPosition fieldPosition = fieldsList[0];

        //Set the coordinates for the list
        ct.SetSimpleColumn(fieldPosition.position.Left, 
                           fieldPosition.position.Bottom, 
                           fieldPosition.position.Right, 
                           fieldPosition.position.Top, 15, Element.ALIGN_LEFT);

        //create a new list
        it.List list = new it.List(it.List.UNORDERED, 8f);
        list.SetListSymbol("\u2022");
        list.IndentationLeft = 45f;

        //add the terms to the list
        foreach (Terms_Proposals tp in csaProposal.Terms_Proposals)
        {
            list.Add(new it.ListItem(tp.Term.TermDesc, FontFactory.GetFont("TIMES_ROMAN", 8)));
        }

        //add the list
        ct.AddElement(list);
        ct.Go(); 
```

希望这可以帮助某人！

# c# - 在 winforms/C# 中使用 graphics.drawline 时出现延迟

> ID：14840698
> 
> 赞同：0
> 
> 时间：2013-02-12T19:58:04.020
> 
> 标签：c#, winforms, graphics, picturebox

初学者在这里进入 C#.. 我正在制作一个涉及绘图的程序。基本上，每当我移动鼠标进行绘制时，图像上的实际线条就会出现延迟——而且它比预期的更……直。它曾经工作得很好，但在某些时候我想出了点问题 - 不记得我当时做了什么，所以很难追溯。我试图在一个新的解决方案中复制程序的绘图部分，并且它似乎工作正常..

我会发布 .exe 文件，以便您明白我的意思，但我不确定我们是否可以在此处发布可执行文件。

编辑：我已经确认代码可以正常工作，请查看 sa_ddam213 的答案以获取代码示例。似乎它在其他人的计算机上运行良好，所以我完全糊涂了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:24:36.240

哟正在为每个鼠标移动事件创建一个新的 Graphic 和 Pen 对象，这将比在`Mouse_Down`事件中创建这些变量要慢得多。

这样的事情可能会更快一些。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        b = new Bitmap(this.Width, this.Height);
    }

    private Graphics _graphics;
    private Pen _pen;
    private int pX = 0;
    private int pY = 0;
    private bool paint = false;
    private Bitmap b;

    private void pictureBox1_MouseDown(object sender, MouseEventArgs e)
    {
        pX = e.X;
        pY = e.Y;
        _graphics = Graphics.FromImage(b);
        _pen= new Pen(Color.Black, 3);
        paint = true;
    }

    private void pictureBox1_MouseMove(object sender, MouseEventArgs e)
    {
        if (paint)
        {
            _graphics.DrawLine(_pen, pX, pY, e.X, e.Y);
            pictureBox1.BackgroundImage = b;
            pictureBox1.Refresh();
            pX = e.X;
            pY = e.Y;
        }
    }

    private void pictureBox1_MouseUp(object sender, MouseEventArgs e)
    {
        paint = false;
        _graphics.Dispose();
        _pen.Dispose();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:10:42.467

可能是你的 VGA 有问题。与另一台 PC 核对并告知我们

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T20:06:03.010

尝试使用pictureBox1.Refresh() 而不是pictureBox1.Invalidate()

您可能还需要在 pictureBox1.BackgroundImage = b 之后移动它

此外，在 MouseDown 中，您需要设置*this.Capture* = true，在 MouseUp 中，您应该设置*this.Capture = false*。如果您不这样做并且在鼠标光标位于其他应用程序上时释放鼠标按钮，您的将永远不会收到 MouseUp 消息。

# pointers - 新的 Ada 子池功能和池的池有什么区别？

> ID：14840702
> 
> 赞同：1
> 
> 时间：2013-02-12T19:58:11.613
> 
> 标签：pointers, memory-management, ada

我最近阅读了 2012 年关于迭代器和池[的基本原理部分。](http://www.adacore.com/uploads/technical-papers/Ada2012_Rationale_Chp5_iterators_pools_etc.pdf)概述的一件事是关于子池的新能力，一个没有回答的问题是子池和池池之间的区别是什么——我的意思是，它似乎 [as pg.25] 可以这样实现：

```
-- Minnesota: Land of 10,000 Lakes
type Minnesota(Size: Storage_Count) is new Root_Storage_Pool with private;
type Lake(Size: Storage_Count) is new Root_Storage_Pool with private
     with Storage_Pool => Minnasota;
-- ...
type Pooled is [...] with Storage_Pool => Lake; 
```

虽然我承认我可能大错特错，因为我没有使用子池，更不用说池（还）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T01:12:02.073

来自 Comp.Lang.Ada 的 Randy [Brukardt](https://groups.google.com/forum/?fromgroups=#!topic/comp.lang.ada/OmM3Ior4CwI)。

> Aspect Storage_Pool 仅适用于访问类型（[13.11(15)](http://www.ada-auth.org/standards/12rm/html/RM-13-11.html)等），而 Lake 类型不是访问类型，因此这是非法的（也没有任何意义）。
> 
> 您可以通过将其他池放入其实现中来实现一个池（比如这里的明尼苏达州，包括一组 10000 个湖 :-)。但是你必须有一种方法来选择哪个项目属于每个，咳咳，子池。你会重新发明轮子。
> 
> 还有最终确定的问题。子池机制确保对象不会超过它们的子池（指向对象的指针可能会超过子池，但不是对象本身），即使子池被提前明确销毁（就像 Unchecked_Deallocation 所做的那样）。如果没有语言支持，就没有好的方法可以做到这一点（我们谈到的每个手写子池实现都坚持不从中分配受控、受保护或任务对象，这显然是有限制的）。
> 
> 让我向你保证，要做到这一点是困难和有争议的。几次差点掉下来。自己做不会有争议（我希望！），但仍然很难。由于 ARG 已经完成了脏活，所以最好使用它。
> 
> ```
>  Randy. 
> ```

# javascript - 什么时候触发AJAX成功？

> ID：14840703
> 
> 赞同：3
> 
> 时间：2013-02-12T19:58:14.477
> 
> 标签：javascript, jquery, ajax

我想通过 AJAX 加载一些 HTML 文档，但是我想在这个文档中的所有图像都被加载时显示它。

```
$('.about').click(function () {
    $(".back").load('Tour.html', function () {
        $(".back").show();
    });
}); 
```

“.back”应该在 Tour.html 中的所有图片都加载后可见，什么时候触发成功事件？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T20:03:41.677

```
$(".back").load('Tour.html', function (html) {
    var $imgs = $(html).find('img');
    var len = $imgs.length, loaded = 0;
    $imgs.one('load', function() {
        loaded++;
        if (loaded == len) {
            $(".back").show();
        }
    })
    .each(function () { if (this.complete) { $(this).trigger('load'); });
}); 
```

这要求返回的 html 中至少有一个`<img>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T20:52:12.867

我建议使用 iframe 代替。以下是纯 JavaScript 中的一些示例代码：

```
var ifr=document.createElement("iframe");
ifr.style.display="none";
document.body.appendChild(ifr);
ifr.onload=function() {
    // Do what you want with Tour.html loaded in the iframe
};
ifr.src="Tour.html"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T20:03:12.493

[ImagesLoaded](https://github.com/desandro/imagesloaded)是您正在寻找的。

在加载指定的图像时放置所有代码（在这种情况下为 ajax 请求）。

该插件指定了为什么您不能`load()`在缓存图像上使用

# java - 如何通过追加拼接两个列表

> ID：14840707
> 
> 赞同：0
> 
> 时间：2013-02-12T19:58:25.563
> 
> 标签：java, list

我试过了：

```
List splice(List l1, List l2){
    List l3 = new LinkedList();
    return l3;
}

List append(List l1, List l2) {
    List to_return = copy(l1);
    List l3 = copy(l2);
    while (true) {
        if (l3.isEmpty())
            return to_return;
        to_return = append1(to_return,hd(l3));
        l3 = tl(l3);
    }
} 
```

接下来我该怎么办？如果我输入`[1,2,3]`and `[a,b]`，我想得到`[1,a,2,b,3]`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:06:07.167

我不太明白你的代码，但你说

> 如果我输入[1,2,3]和[a,b]，我想得到[1,a,2,b,3]。

这可以通过

```
static <T> List<T> interleave(List<T> list1, List<T> list2) {
    List<T> newList = new ArrayList<T>();
    List<T> shortOne = list1.size() < list2.size() ? list1 : list2;
    List<T> longOne  = list1.size() < list2.size() ? list2 : list1;
    for (int i = 0; i < shortOne.size(); i++) {
        newList.add(list1.get(i));
        newList.add(list2.get(i));
    }
    for (int i = shortOne.size(); i < longOne.size(); i++) {
        newList.add(longOne.get(i));
    }
    return newList;
} 
```

**编辑**

根据`List`您使用的实现，本文中接受的答案的方法可能更有效：[Java: Interleave two integer based arraylists -> good approach?](https://stackoverflow.com/questions/14551670/java-interleave-two-integer-based-arraylists-good-approach)

# c# - 如何将 UserControl 中的 DependencyProperty 绑定到 DataContext 属性？Windows 商店

> ID：14840711
> 
> 赞同：2
> 
> 时间：2013-02-12T19:58:52.080
> 
> 标签：c#, mvvm, winrt-xaml

我有一个具有依赖属性的 UserControl：

```
 public static readonly DependencyProperty Step2CommandProperty =
        DependencyProperty.Register("Step2Command", typeof(ICommand), typeof(MyTripNavigationStep), new PropertyMetadata(null));

    public ICommand Step3Command
    {
        get { return (ICommand)GetValue(Step3CommandProperty); }
        set { SetValue(Step3CommandProperty, value); }
    } 
```

然后我有一个带有 ICommand 属性的 ViewModel：

```
 public ICommand SaveStep1Command
    {
        get
        {
            return new RelayCommand(() =>
            {

            });

        }
    } 
```

然后我在页面中绑定这样的两个属性，其中我将 viewModel 作为 DataContext 和 UserControl。

```
 <UserControls:Step Step3Command="{Binding SaveStep1Command, Mode=OneWay}" /> 
```

未应用绑定，并且 userControl 中的 Step3Command 始终显示为空。我知道 DataContext 工作正常，并且 Visual Studio 不允许我放置 TwoWay 绑定。我正在使用 GalaSoft Simple Mvvm 和 Visual Studio CTP update 2。

有人知道我在做什么错吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-17T10:38:26.967

您定义了错误的属性。`get`每次访问属性时都会调用该块，因此每次您（或 WPF 中的 MVVM 魔术）访问时`SaveStep1Command`都会创建一个新命令。这不是你想要的。

像这样重写属性：

在您的构造函数代码中，编写：

```
SaveStep1Command = new RelayCommand(...) 
```

并像这样定义您的属性：

```
public ICommand SaveStep1Command { get; } 
```

如果您使用的是旧版本的 .net / C#，则必须像这样定义它：

```
public ICommand SaveStep1Command { get; private set; } 
```

解释尝试：可能是数据绑定只创建了弱引用。使用您的定义方式，`SaveStep1Command`一旦绑定设置就创建它，然后它只是“躺在”堆上 - 当 GC 下次启动时，空间被释放，因为它没有强引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T17:19:25.293

是的。问题是您没有处理 DP 的 Changed 事件。

> 参考这个：[https ://blog.jerrynixon.com/2013/07/solved-two-way-binding-inside-user.html](https://blog.jerrynixon.com/2013/07/solved-two-way-binding-inside-user.html)

# actionscript-3 - IntelliJ 和 Flash 符号库如何协同工作？

> ID：14840712
> 
> 赞同：1
> 
> 时间：2013-02-12T19:59:04.323
> 
> 标签：actionscript-3, flash, intellij-idea, flash-cs5

如果我使用 IntelliJ Idea 作为我正在使用 Flash 编译的 fla 使用的代码的 IDE，有没有办法告诉 IntelliJ 我正在为此编写类文件的符号中存在哪些对象它不会将这些对象的引用视为未定义吗？

示例：我在 Flash CS5 中有一个 Flash 项目，库中有一个链接到 MyClass（一个外部类文件）的 MovieClip。MovieClip 有一个名为 myTextField 的 TextField。

当我在 IntelliJ 中编辑类文件时，它抱怨对 myTextField 的引用，因为它无法知道它。

有没有办法在 IntelliJ 中提供线索？我可以只在类文件中声明 myTextField，还是会干扰已在 MovieClip 中的实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T15:56:32.797

您需要设置 FLA 发布设置以允许您在类文件中声明您的实例。尝试这个：

[http://www.wastedpotential.com/flash-as3-stop-using-automatically-declare-stage-instances/](http://www.wastedpotential.com/flash-as3-stop-using-automatically-declare-stage-instances/)

如果您遵循这些步骤，您可以将您的实例声明为类中的属性。您的 FLA 将编译并且 IntelliJ 将停止阻塞它们。

# php - 在 CodeIgniter 中创建类的实例

> ID：14840717
> 
> 赞同：1
> 
> 时间：2013-02-12T19:59:24.580
> 
> 标签：php, codeigniter

如果不使用 CodeIgniter，我通常会这样做；

```
require_once("object");

test = new object(); 
```

我将如何在 CodeIgniter 中执行此操作？

编辑：例如这个类可能是一个视频游戏对象。它可能包含许多变量，例如标题、年龄、描述等。上述变量也将有变量获取/设置方法。

例如，我可能会使用这个类来帮助包含由数据库搜索创建的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T20:14:01.023

Codeigniter 使用 Singleton 设计模式，并且您的大多数类都使用加载器类加载（根据需要，在构造函数中或在自动加载配置文件中），然后可以通过 Codeigniter Super Object 使用`$this->my_model`。正如 Kai Qing 所指出的，使用模型通常需要：

```
// In the constructor, controller method, or autoload
$this->load->model('my_model');

// Then to use a method simply
$this->my_model->my_method(); 
```

在 Codeigniter 中，类更像是实用程序类来分组类似的功能。但是，您始终可以在 Codeigniter 中使用原生 PHP 来请求一个类，然后实例化您自己的对象。

# javascript - 旋转表格单元格时如何消除空白？

> ID：14840718
> 
> 赞同：2
> 
> 时间：2013-02-12T19:59:25.107
> 
> 标签：javascript, html, css

我试图在表格中显示一些旋转的单元格，但在此示例中，列有一个空格。我想删除它，但我还没有完成如何删除它。

这是示例：

[http://demos.davidjs.com/ST-RotateTableCellContent/](http://demos.davidjs.com/ST-RotateTableCellContent/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:09:44.243

但是，您的函数添加了一个 div `height: width, width: height`，因为您的表格 td 继承了最宽单元格的宽度，在这种情况下`Dummy text`，它适用于旋转单元格`item8`以具有水平的自动单元格宽度的高度`Dummy text`。

您可以不使用 div，因为您的表格单元格已经尝试适应它的内容，或者使用`display:table-cell`您`div`来做同样的事情。

# winapi - 枚举林中的域（Windows 网络）

> ID：14840719
> 
> 赞同：0
> 
> 时间：2013-02-12T19:59:32.613
> 
> 标签：winapi, active-directory, windows-networking

我正在寻找一种 API 方法来检索“net view /domain”所做的信息。即，我正在寻找一种使用win32api（在C环境中）枚举森林中可见域的方法

谢谢。

**更新：** 似乎[DsEnumerateDomainTrusts](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675976%28v=vs.85%29.aspx)可以做我需要的，但是，它看起来不像 net.exe 导入它，所以我仍然想知道其他选项。

**Update2：** 顾名思义，该函数仅枚举受信任域，即使指定了 DS_DOMAIN_IN_FOREST 也是如此，所以我在第 1 格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T06:10:55.430

我认为在您的情况下，最好的方法是询问 Active Directory。

您将在[此答案](https://stackoverflow.com/a/10527365/608772)中找到获取目录中所有域的方法，首先请求“rootDSE”以查找配置命名上下文，然后请求`crossRef`with`nETBIOSName`以检索域条目

由于您对如何从本机代码询问活动目录感兴趣，您可以查看 RFC 1823 中描述的 LDAP C-Binding API，Microsoft 支持它，请参阅[MS Strategy for Lightweight Directory Access Protocol (LDAP)](http://technet.microsoft.com/en-us/library/cc750824.aspx)。您可以[在轻量级目录访问协议中找到 Microsoft API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367008%28v=VS.85%29.aspx)的使用和参考手册。

# svn - 如何直接签出 SVN 外部 URL？

> ID：14840720
> 
> 赞同：2
> 
> 时间：2013-02-12T19:59:33.133
> 
> 标签：svn, svn-externals

我有一个包含一些客户端文件的 Subversion 存储库。一些客户端将使用标准文件，但其他客户端将提供文件的自定义版本。为了适应这一点，我为将使用共享文件的客户端使用了 svn:externals。所以我们的结构是这样的：

```
svn
|+ top
   |+ shared
   |+ clients
      |+ custom1
      |+ custom2
      |+ shared1
      |+ shared2 
```

客户端“custom1”是 Subversion 中包含该客户端自定义文件的真实文件夹，客户端“shared1”是`/clients`指向`/top/shared`.

我希望的是，当我想部署一个新客户端时，我可以简单地将他们的文件夹导出到服务器，使用如下命令：

```
svn export http://svn/top/clients/custom1 \\server\custom1 
```

或者

```
svn export http://svn/top/clients/shared1 \\server\shared1 
```

这对于自定义客户端来说很好，因为它们在 Svn 中有一个“真实”文件夹，但是对于配置了外部的客户端，我得到一个错误：

```
svn: E170000: URL 'http://svn/top/clients/shared1' doesn't exist 
```

有没有办法可以直接签出/导出“外部”文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:32:15.810

我最终做的是使用[svn ls](https://stackoverflow.com/questions/868033/check-that-an-svn-repository-url-does-not-exist)来查看我是否正在访问物理目录。如果它不存在，则使用以下命令获取我的外部目标：

```
svn propget svn:externals http://svn/top/clients/ | findstr "\<shared1\>" | sed "s/\(.*\)\s\(shared1\)/\1/" 
```

`findstr`将获得我正在寻找的属性的单行，并且该`sed`命令将解析出目标 url（空格之前的部分）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T19:33:51.640

`http://svn/top/clients/shared1`不是 SVN 中的物理路径，而只是对外部的引用。因此，这就是您无法直接检查的原因。

要摆脱这种情况，您可以`http://svn/top/clients/shared1`在 SVN 中创建一个空文件夹，并且可以在该`http://svn/top/clients/shared1`文件夹上赋予 svn:external 属性以使其指向`/top/shared`而不是`/clients`文件夹。

然后您的签出将获得一个物理路径来签出，但您无需将实际内容保存在此文件夹下。

# firefox - Three.js：Firefox：视口大小不正确：多个视图

> ID：14840721
> 
> 赞同：4
> 
> 时间：2013-02-12T19:59:34.040
> 
> 标签：firefox, wamp, three.js, wampserver

多重视图未完全绘制完整尺寸；它比窗口小约 10%，顶部和右侧有空白区域。（见下图）。

该问题适用于这个[Three.js 示例](http://mrdoob.github.com/three.js/examples/webgl_multiple_views.html)。据我所知，它是以下组合的组合：

*   同一场景的多个视口
*   火狐
*   我的 WAMP 设置

为了确认上述内容，我做了以下事情：

*   如果我转到上面的链接，它在 Chrome 和 Firefox 中都可以正常工作。
*   将我的浏览器指向我的本地主机 WAMPSERVER 设置上该示例的副本，它在 Chrome 中正确显示，但在 Firefox 中不正确。
*   如果我将上面的示例提取到我的硬盘驱动器并在 Firefox 或 Crhome 中打开它，它也会正确显示。（绕过 WAMP）。
*   如果我只显示场景的一个视口，我的项目会正确显示。（Firefox 和 Chrome，通过本地主机上的 WAMP 加载）。

这（显然）与我的 localhost WAMP 设置有关，Firefox 不喜欢这会干扰多视图配置（因为单视图示例工作正常）。也许是标题或类似的东西。

我的代码有问题吗？火狐？三.JS？赏金是最好的解决方法。如果可以的话，我很乐意回答有关我的 WAMP 配置或其他任何问题的问题。

谢谢！

左：不工作。对：工作。 ![在此处输入图像描述](../Images/3bf73d7df7551fde7a829908974e72d1.png)

# terminal - Terminal.app 中带有电力线的错误着色

> ID：14840722
> 
> 赞同：2
> 
> 时间：2013-02-12T19:59:45.063
> 
> 标签：terminal, zsh, tmux

我设置了 tmux powerline，并安装了所有相应的字体。我现在遇到的问题是在强硬派中充当背景时颜色看起来不一样。

![显示的颜色差异](../Images/6f13e1ca38f3f3b295d2b4aae812d290.png)

我确保将 tmux 设置为使用 256 色模式

tmux.conf：[http ://hastebin.com/durehunuge.conf](http://hastebin.com/durehunuge.conf)

关于如何让颜色匹配的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T17:31:48.780

可悲的是，我能够解决此问题的唯一方法是切换到 iTerm2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T09:05:06.817

我假设您对“箭头”符号有疑问？

如果是这样，那么您可以使用正确的符号轻松解决该问题。

在您的主题文件中，您有一些看起来像这样的行：

```
if patched_font_in_use; then
    TMUX_POWERLINE_SEPARATOR_LEFT_BOLD="<U+2B82>"
    TMUX_POWERLINE_SEPARATOR_LEFT_THIN="<U+2B83>"
    TMUX_POWERLINE_SEPARATOR_RIGHT_BOLD="<U+2B80>"
    TMUX_POWERLINE_SEPARATOR_RIGHT_THIN="<U+2B81>"
else
    TMUX_POWERLINE_SEPARATOR_LEFT_BOLD="◀"
    TMUX_POWERLINE_SEPARATOR_LEFT_THIN="❮"
    TMUX_POWERLINE_SEPARATOR_RIGHT_BOLD="▶"
    TMUX_POWERLINE_SEPARATOR_RIGHT_THIN="❯"
fi 
```

这些用于您的细分，例如：

```
"weather 89 211" \
"date 235 136" \
"time 235 136 ${TMUX_POWERLINE_SEPARATOR_LEFT_THIN}" \ 
```

这将在我的机器上呈现为：

```
 ⮂ ☼ -1°C ⮂ 02.03.2013 ⮃ 10:02 
```

如您所见，没有背景的时间箭头很细。

# c# - 如何为 XDocument 指定 xmlns？

> ID：14840723
> 
> 赞同：15
> 
> 时间：2013-02-12T19:59:50.023
> 
> 标签：c#, .net, xml, xml-namespaces, linq-to-xml

我试过了：

```
textBox1.Text = new XDocument(new XDeclaration("1.0", "UTF-8", "yes"),
    new XElement("root1", new XAttribute( "xmlns", @"http://example.com"), new XElement("a", "b"))
).ToString(); 
```

但我得到：

```
The prefix '' cannot be redefined from '' to 'http://example.com' within the same start element tag. 
```

我还尝试替换（根据我找到的答案）：

```
XAttribute(XNamespace.Xmlns,... 
```

但是也报错了。

**注意**：我不想在文档中包含多个 xmlns。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-12T20:10:18.357

`XDocument`API 使用命名空间范围名称的方式是作为实例`XName`。只要您接受 XML 名称不仅仅是一个字符串，而是一个作用域标识符，它们就很容易使用。这是我的做法：

```
var ns = XNamespace.Get("http://example.com");
var doc = new XDocument(new XDeclaration("1.0", "utf-8", null));
var root = new XElement(ns + "root1", new XElement(ns + "a", "b"));
doc.Add(root); 
```

结果：

```
<root1 xmlns="http://example.com">
    <a>b</a>
</root1> 
```

请注意，`+`运算符被重载以接受 an`XNamespace`和 a`String`以产生和`XName`实例。

# c++ - 这些编程语言的无头浏览器库

> ID：14840724
> 
> 赞同：3
> 
> 时间：2013-02-12T19:59:50.630
> 
> 标签：c++, c, go, d, headless-browser

HtmlUnit 是一个基于 Java 的无头浏览器库。是否有适用于 C/C++、D 和 Go 编程语言的无头浏览器库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T20:07:12.637

[给](https://github.com/mattn/go-webkit/blob/master/example/webview.go)你。

（虚拟文本使其长度至少为 30 个字符）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T21:06:10.767

**古武特**呢？

> Gowut (Go Web UI Toolkit) 是一个功能齐全、易于使用、独立于平台的 Web UI Toolkit，用纯 Go 编写，不链接或调用依赖于平台的原生代码。

[Gowut 主页](https://sites.google.com/site/gowebuitoolkit/)

[Gowut 项目页面](http://code.google.com/p/gowut/)（它是开源的）

**编辑：**检查 HtmlUnit 是什么，Gowut 与 Go 不完全相同...

# facebook - 我可以让一个应用程序只对喜欢 Facebook 页面的人可用吗？

> ID：14840729
> 
> 赞同：0
> 
> 时间：2013-02-12T20:00:00.553
> 
> 标签：facebook, facebook-graph-api, facebook-like

我制作了一个 facebook 应用程序并与一个页面相关联。我只希望喜欢该页面的人能够使用该应用程序。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:04:14.140

当有人试图加载您的应用程序时，他们需要获得授权。

获得授权后，您可以查询用户的图表以查看他们喜欢的内容：

（我假设您已经授权使用 php sdk，并且将拥有 $facebook 对象，但是其他技术的原理是相同的）

```
 $fanPageId = "xxxxxxxxx";
    $appId = "xxxxxxxxxx";
    $fanPageLiked = false;
    $appLiked = false;

    $likes = $facebook->api('me/likes');

    foreach ($likes['data'] as $ilike) {
        if ($ilike['id'] == $fanPageId) {$fanPageLiked = true;}
        if ($ilike['id'] == $appId) {$appLiked = true; }
    }

    if ($fanPageLiked)
    {
    .... run your game.
    }
    else
    {
    .... redirect to fan page.
    } 
```

# .htaccess - 使用 mod_rewrite 从 cgi-bin 中提取查询字符串并重定向

> ID：14840730
> 
> 赞同：1
> 
> 时间：2013-02-12T20:00:01.647
> 
> 标签：.htaccess, mod-rewrite

我有一个看起来像这样的文件路径：/cgi-bin/folder/script.cgi?t=1&u= [http://domain.com/url/url-2/](http://domain.com/url/url-2/)

我想要做的是创建一个重写规则来提取查询字符串 u= 然后重定向到该 URL，我已经为此工作了一段时间但没有成功。

```
RewriteRule ^cgi-bin/folder/script.cgi?t=1&u=(.*)$ $1 [R=301,L] 
```

上面是我的一个“解决方案”的一个例子，它显然不起作用。任何帮助深表感谢。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:05:54.893

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+cgi-bin/folder/script\.cgi\?t=1&u=([^\s&]+) [NC]
RewriteRule ^ /%1 [R=302,L,NE] 
```

# python - Python：使用 List Comprehensions 以逐个对象填充空列表

> ID：14840732
> 
> 赞同：0
> 
> 时间：2013-02-12T20:00:06.787
> 
> 标签：python, performance, optimization, list-comprehension

我有一个“字典-valueiterator”组。对于每个组列表，我随机抽样两个（或更多值）并存储在一个新列表中

```
GroupsList = list([])
  for m in Groups:
     GroupsList.append(point_random_selection(m,n)) 
```

其中**point_random_selection**

```
def point_random_selection(list,n):
    if n == 0:
            raise TypeError("The pulse density 0 is not iterable")
    try:
        sample_point = random.sample(list,n)
    except ValueError:
        sample_point = list
    return sample_point

GroupsList = [[<liblas.point.Point object at 0x00000001363A0E10>],
 [<liblas.point.Point object at 0x00000002CE52CB38>],
 [<liblas.point.Point object at 0x00000000CF516908>],
 [<liblas.point.Point object at 0x00000004293F9400>],
 [<liblas.point.Point object at 0x0000000249F67C50>],
 [<liblas.point.Point object at 0x0000000312D85A90>],
 [<liblas.point.Point object at 0x000000047DF396A0>,
  <liblas.point.Point object at 0x000000047DF14F98>]] 
```

在某些情况下，我有两个或更多列表（例如：）

```
GroupsList[6]
[<liblas.point.Point object at 0x000000047DF396A0>,
 <liblas.point.Point object at 0x000000047DF14F98>] 
```

我希望在新列表中存储一个逐个列表，以便在我有两个或多个*liblas.point.Point 对象*时也逐个附加：

```
GroupsList = [[<liblas.point.Point object at 0x00000001363A0E10>],
     [<liblas.point.Point object at 0x00000002CE52CB38>],
     [<liblas.point.Point object at 0x00000000CF516908>],
     [<liblas.point.Point object at 0x00000004293F9400>],
     [<liblas.point.Point object at 0x0000000249F67C50>],
     [<liblas.point.Point object at 0x0000000312D85A90>],
     [<liblas.point.Point object at 0x000000047DF396A0>],
     [<liblas.point.Point object at 0x000000047DF14F98>]] 
```

列表理解是最好的方法吗？ex插入

```
GroupsList.append(point_random_selection(m,n)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T20:06:40.653

如果我理解正确，您想将嵌套列表更改`[[a, b], [c, d]]`为`[a, b, c, d]`使用列表理解。如果这是您尝试做的正确解释，则以下内容将起作用：

```
GroupsList = [point for lst in GroupsList for point in lst] 
```

但是，最好通过将循环更改为以下内容（替换`append()`为`extend()`）从一开始就创建平面结构：

```
for m in Groups:
    GroupsList.extend(point_random_selection(m,n)) 
```

`a.extend(b)`（其中`a`和`b`是列表）导致与以下循环相同的行为（但更有效）：

```
for x in b:
    a.append(x) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T20:05:52.857

我不完全确定我是否正确阅读了您的问题，但是您在寻找[`list.extend`](http://docs.python.org/2/library/stdtypes.html#mutable-sequence-types)吗？例如：

```
>>> a = [1, 2]
>>> a.extend([5, 1, 4])
>>> a
[1, 2, 5, 1, 4] 
```

* * *

此外，一些一般的风格反馈：

*   [标准 Python 风格](http://www.python.org/dev/peps/pep-0008/)强烈反对命名变量，例如`Group`or `GroupsList`; 命名它们`groups`或`groups_list`.
*   `list([])`更容易写成`[]`
*   `point_random_selection` `list`可能应该避免将参数命名为，因为它会影响全局`list()`函数
*   似乎您可以将大部分替换`point_random_selection`为

```
return random.sample(the_list, min(n, len(the_list)) 
```

# php - .htaccess 条件重写和文件结构

> ID：14840733
> 
> 赞同：1
> 
> 时间：2013-02-12T20:00:18.217
> 
> 标签：php, apache, .htaccess

分解它，这就是我的站点地图的样子。

```
http://website.com/home
http://website.com/contact
http://website.com/support 
```

使用我的 index.php 处理程序处理 GET 语句 index.php?home、index.php?contact 和 index.php?support

目前，我的 .htaccess 看起来像这样：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI}  /([^/]+)/?$  [NC]
RewriteRule .*   index.php?%1  [L] 
```

到目前为止，这很好用，但是它是有限的。我正在集成一个我用 PHP 设计的迷你博客，它可以接受查询字符串，如下所示：

```
http://site.com/blog.php?y=2013&m=02&d=12&title=welcome-to-site-blog 
```

现在，我想保留网站的根文件结构并集成博客文件结构。希望看起来像这样：

```
http://site.com/2013/02/12/welcome-to-site-blog 
```

任何帮助都会很棒。我知道条件语句是必需的，但我对 htaccess 几乎没有经验。

在此先感谢，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:51:27.197

你可以试试这个：

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI}   !blog\.php                           [NC]
RewriteCond %{REQUEST_URI}   ^/([^/]+)/([^/]+)/([^/]+)/([^/]+)/?  [NC]
RewriteRule .  blog.php?key1=%1&key2=%2&key3=%3&key4=%4         [L,NC] 
```

静默地图

`http://site.com/var1/var2/var3/var4`

到：

`http://site.com/blog.php?key1=var1&key2=var2&key3=var3&key4=var4`

假定所有`varN`字符串都是可变的，而脚本名称`blog.php`是固定的，但可以是任何名称。如果更改，则替换规则集中的所有实例。

对于永久且可见的重定向，请替换`[L,NC]`为`[R=301,L,NC]`.

# c#-4.0 - 使用泛型实现 IsNotNullAndGreaterThanZero 扩展方法

> ID：14840735
> 
> 赞同：2
> 
> 时间：2013-02-12T20:00:27.913
> 
> 标签：c#-4.0, generics, extension-methods

我有一个如下所述的扩展方法。有没有办法让它以通用方式工作。对于 int？，decimal？，long？，double？。或者 0（零）的方式有限制比较不同的数字数据类型？

```
public static bool IsNotNullAndGreaterThanZero(this decimal? value)
{
return (value ?? 0M) > 0M;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T20:04:07.287

好吧，你可以这样做：

```
public static bool IsNotNullAndGreaterThanDefault<T>(this T? value)
    where T : struct, IComparable<T>
{
    return value != null && value.Value.CompareTo(default(T)) > 0;
} 
```

这使用了这样一个事实，即对于大多数值类型，默认值是“自然零”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T20:05:34.510

您可以使用[IConvertible](http://msdn.microsoft.com/en-us/library/system.iconvertible.aspx)来执行此操作：

```
public static bool IsNotNullAndGreaterThanZero<T>(this T? value)
     where T : struct, IConvertible
{
    return value != null && value.ToDecimal() > 0M;
} 
```

基本值类型，如 int/long/double 都实现了`IConvertible`，这将允许它工作。

# javascript - 为什么我的图像切换器在 IE 中不起作用

> ID：14840736
> 
> 赞同：0
> 
> 时间：2013-02-12T20:00:32.123
> 
> 标签：javascript, internet-explorer, mouseover

访问：查看我的示例：[http ://www.nycthirst.com/test-space/test-orig-best.html](http://www.nycthirst.com/test-space/test-orig-best.html)

这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<style type="text/css">
<!--

div#GHOLD { position: relative; width: 400px; height: 464px; 
          }
div.gname { position: absolute; top: 7px; left: 0px; height: 23px;  text-align: center;
            /*border: solid black 1px; padding-top: 4px;*/
            z-index: 20;
          }
div.bname { position: absolute; top: 3px; left: 0px; height: 27px;  text-align: center;
            padding-top: 4px;
            /*border:solid black 1px;*/
            z-index: 25;
          }
div.ihold { position: absolute; top: 36px; left: 0px; 
            width: 400px; height: 360px; z-index: 10; 
          }
img.bgraph { border: none; width: 400px; height: 360px; z-index: 10; }

-->
</style>

<script type="text/javascript">
function graphShow(which)

{
var ghold = document.getElementById("GHOLD");
var gdivs = ghold.getElementsByTagName("DIV");
gdivs[0].className = gdivs[1].className = gdivs[2].className = "gname";
gdivs[which].className = "bname";
gdivs[3].style.zIndex = gdivs[4].style.zIndex = gdivs[5].style.zIndex = 10;
gdivs[which+3].style.zIndex = 15;

}

</script>
</head>
<body>
<div id="GHOLD">
  <div class="bname" style="left: 39px;  width: 77px; height: 135px; top: 35px;" onMouseOver="graphShow(1);"></div>
  <div class="gname" style="left: 162px; width: 77px; height: 135px; top: 35px;" onMouseOver="graphShow(0);"></div>
  <div class="gname" style="left: 280px; width: 77px; height: 135px; top: 35px;" onMouseOver="graphShow(2);"></div>
  <div class="ihold" style="z-index: 15;">
    <img class="bgraph" src="http://www.asme.org/wwwasmeorg/media/ASMEMedia/Events/Energy/energy_landing_page_drop1.png" alt="95 percent">
  </div>
  <div class="ihold">
    <img class="bgraph" src="http://www.asme.org/wwwasmeorg/media/ASMEMedia/Events/Energy/energy_landing_page_drop2.png" alt="69 percent" style="z-index: 10;">
  </div>
  <div class="ihold">
    <img class="bgraph" src="http://www.asme.org/wwwasmeorg/media/ASMEMedia/Events/Energy/energy_landing_page_drop3.png" alt="52 percent" style="z-index: 10;">
  </div>
</div>

</body>
</html 
```

>

因此，上面的页面代码在 Firefox 和 chrome 中完美运行。它在 IE 中没有任何作用。这个想法是在鼠标悬停或悬停状态时背景图像会改变。如果有更简单的解决方案，我很乐意看到它。我是 Javascript 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:06:52.997

IE 似乎不喜欢将鼠标事件传递给看起来不可见的元素。如果您的触发器 div 上没有背景或可见文本，则 mouseover 事件会直接通过它们。

您基本上必须为触发器 div 提供背景或内容，以覆盖您希望鼠标悬停发生的区域。IE 不关心背景的内容，只要它存在并且颜色不是“透明”的。您甚至应该能够使用 1x1 透明 GIF 作为背景，只要您平铺它。

# apache - mod_proxy_ajp cookie 值被剥离

> ID：14840738
> 
> 赞同：1
> 
> 时间：2013-02-12T20:00:39.163
> 
> 标签：apache, tomcat, cookies, mod-proxy, ajp

我有一个使用 mod_proxy_ajp 将请求转发到 tomcat 服务器的 apache 设置。当请求到达时，它似乎失去了我的价值观。当请求直接发送到 tomcat 时，这工作正常，所以看起来 apache 正在剥离这些值。

任何帮助，将不胜感激。

**浏览器**：
MyCookie
value=ID=12345
Path=/
Domain=mydomain.org

**Tomcat**：
MyCookie
值=ID
路径=null
域=null

配置：

```
LoadModule proxy_module                 /usr/lib64/apache2-prefork/mod_proxy.so  
LoadModule proxy_ajp_module                 /usr/lib64/apache2-prefork/mod_proxy_ajp.so  
LoadModule rewrite_module                 /usr/lib64/apache2-prefork/mod_rewrite.so
<VirtualHost *:80>
ServerName server.domain.org  
ServerAlias server.domain.org  
Header set Access-Control-Allow-Origin "*"
Header set Access-Control-Allow-Methods "GET,POST,OPTIONS"
Header set Access-Control-Allow-Headers "content-type,x-requested-with"

RewriteEngine on
RewriteRule ^/$ /vaultWeb [PT]

<Directory />
Options All
Order Deny,Allow
Allow from all
</Directory>

ProxyRequests off

<Proxy *>
Order Deny,Allow
Allow from all
</Proxy>

<Location />
Order Deny,Allow
Allow from all
</Location>

ProxyPass /app1 ajp://localhost:18009/app1
ProxyPass /app2 ajp://localhost:8009/app2
ProxyPass /app3 ajp://localhost:8009/app3
ProxyPass /app4 ajp://localhost:18009/app4
ProxyPass /app5 ajp://localhost:9008/app5
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:26:26.217

好的，似乎 apache 或 tomcat 都在“帮助”，并且由于 cookie 是版本 0，因此该规范未批准的任何字符都将被删除。在这种情况下，等号（以及它之后的任何内容）。由于我无法控制设置 cookie 的服务器，我能说服他们做的最好的事情就是对 cookie 进行编码，然后我只使用 URLDecoder 来解码值。繁荣等号和一切。

# windows-7 - 我如何告诉蛋糕去哪里找咖啡？

> ID：14840742
> 
> 赞同：1
> 
> 时间：2013-02-12T20:00:56.647
> 
> 标签：windows-7, coffeescript, git-bash, cakefile

设置twilson63 构建的[快速咖啡应用程序。](https://github.com/twilson63/express-coffee)似乎蛋糕找不到咖啡，但他们都可以`which`。还有什么我需要在这里做的吗？这是我的步骤：

```
jcollum@DEVELOPER01 ~/dev/express-coffee-master
$ which coffee
/c/Users/jcollum/AppData/Roaming/npm/node_modules/coffee-script/bin/coffee 
```

好的咖啡在那里。

```
jcollum@DEVELOPER01 ~/dev/express-coffee-master
$ which cake
/c/Users/jcollum/AppData/Roaming/npm/node_modules/coffee-script/bin/cake 
```

蛋糕也是如此。

```
jcollum@DEVELOPER01 ~/dev/express-coffee-master
$ cake
Cakefile defines the following tasks:

cake docs                 # Generate annotated source code with Docco
cake build
cake spec                 # Run Mocha tests
cake test                 # Run Mocha tests
cake dev                  # start dev env
cake debug                # start debug env
cake scaffold             # scaffold model/controller/test

  -n, --name         name of model to `scaffold` 
```

Cake 在本地找到了一个 cakefile。

```
jcollum@DEVELOPER01 ~/dev/express-coffee-master
$ cake dev

c:\Users\jcollum\dev\express-coffee-master\node_modules\which\which.js:83
  throw new Error("not found: "+cmd)
        ^
Error: not found: coffee
    at Function.whichSync [as sync] (c:\Users\jcollum\dev\express-coffee-master\node_modules\which\which.js:83:9)
    at Object.options [as action] (c:\Users\jcollum\dev\express-coffee-master\Cakefile:121:17)
    at helpers.extend.invoke (c:\Users\jcollum\AppData\Roaming\npm\node_modules\coffee-script\lib\coffee-script\cake.js:44:26)
    at Object.exports.run (c:\Users\jcollum\AppData\Roaming\npm\node_modules\coffee-script\lib\coffee-script\cake.js:69:21)
    at Object.<anonymous> (c:\Users\jcollum\AppData\Roaming\npm\node_modules\coffee-script\bin\cake:7:38)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10) 
```

呸呸呸！没有。我怀疑这是 Windows 7 的问题，并且节点不能很好地一起玩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:24:50.223

似乎答案是确保我的环境中有一个 NODE_PATH：

`export NODE_PATH=/c/Users/jcollum/AppData/Roaming/npm:/c/Users/jcollum/AppData/Roaming/npm/node_modules`

要么，要么将`node_modules`.bash_profile 添加到我的 PATH 中。

在这里得到了想法：[https ://github.com/replit/jsrepl/issues/56](https://github.com/replit/jsrepl/issues/56)

# php - 表达式引擎：数据库查询未按预期执行

> ID：14840748
> 
> 赞同：0
> 
> 时间：2013-02-12T20:01:16.307
> 
> 标签：php, mysql, expressionengine

我已经设置了一个启用 PHP 的 EE 模板，并将 PHP Parsing Stage 设置为输入。我希望以下代码能够正确更新数据库，但没有任何反应：

```
<?php
    $ids= "{last_segment}";
    $userId = "{member_id}";

    $sql = "UPDATE table SET column = '" . $ids . "' WHERE member_id = '" . $userId . "'";

    $this->EE->db->query($sql);
?> 
```

如果我回显我的查询，它看起来是正确的，事实上，如果我在 PHPMyAdmin 中运行它，它工作正常。有什么我想念的吗？我需要修改 PHP 解析阶段吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T19:47:54.663

看起来您可能只需要在“EE”之后加上括号：

```
$this->ee()->db->query($sql); 
```

另外，我不确定您是否需要`$this`...

[http://ellislab.com/expressionengine/user-guide/development/usage/database.html](http://ellislab.com/expressionengine/user-guide/development/usage/database.html)

# php - PHP 从动态创建的表中提取特定名称

> ID：14840749
> 
> 赞同：0
> 
> 时间：2013-02-12T20:01:15.880
> 
> 标签：php, html

所以我束手无策。在更复杂的问题中，这是让我感到困惑的问题。我不确定这是 HTML 问题还是 PHP 问题了。我已经尝试了我能想到的一切，但一无所获。好的，所以我需要从动态创建的表中提取一个特定的名称，确切地说是武器名称。因此，用户单击“删除武器”按钮，该武器将被删除。查询很好；我的问题是得到这个名字。如果只有一种武器并且这不是动态的，我只会选择特定的字段名称。那是 PHP 101。这是从中提取的循环：

```
while ( $weapons = mysql_fetch_array($data)) {
            echo '
              <table width="780" border="1">
                 <tr>
                    <td colspan="2">weapon</td>
                    <td>AttackBonus</td>
                    <td>crit</td>
                </tr>
                <tr>
                    <td colspan="2">

                        <input type="text" name="weaponName'.$i.'" id="weaponName'.$i.'"  size="10" value="'.$weapons["weaponsName"].'" />
                        <input type="hidden" name="weaponName" value="'.$weapons["weaponsName"].'"/>
                    </td>
                    <td>
                        <input type="text" name="attackBonus'.$i.'" id="attackBonus'.$i.'"  size="10" value='.$weapons["weaponsAttackBonus"].' />
                    </td>
                    <td>
                        <input type="text" name="crit'.$i.'" id="crit'.$i.'"  size="10" value='.$weapons["weaponsCritical"].' />
                    </td>
                </tr>
                <tr>
                    <td>type</td>
                    <td>range</td>
                    <td>ammunition</td>
                    <td>damage</td>
                </tr>
                <tr>
                    <td>
                        <input type="text" name="type'.$i.'" id="type'.$i.'"  size="10" value='.$weapons["weaponsType"].' />
                    </td>
                    <td>
                        <input type="text" name="range'.$i.'" id="range'.$i.'"  size="10" value='.$weapons["weaponsRange"].' />
                    </td>
                    <td>
                        <input type="text" name="ammunition'.$i.'" id="ammunition'.$i.'"  size="10" value='.$weapons["weaponsAmmunition"].' />
                    </td>
                    <td>
                        <input type="text" name="damage'.$i.'" id="damage'.$i.'"  size="10" value='.$weapons["weaponsDamaage"].' />
                    </td>
                </tr>
                <tr>
                    <td colspan="4">
                        <input type="submit" formaction="include/deleteweapon.php"  formmethod="post" value="Delete Weapon"/>
                    </td>               
                </tr>
                </table>

    ';
        $i++;} 
```

这可能是一件小事，这一直是我的问题。我尝试了几个不同的 while 循环。我已经尝试过使用 issets($_post[“weaponName0”] 等的 if 语句。我只是不知道。

编辑：所以我不太擅长解释我需要什么。显示信息的循环很好，是的，按钮需要在那里。

（我没有足够的代表来上传图片，所以这里是链接） [http://farm9.staticflickr.com/8391/8468562067_0cd4158e35_b.jpg](http://farm9.staticflickr.com/8391/8468562067_0cd4158e35_b.jpg)

这就是它的样子。我无法获得武器名称的值。这里的输出很好，当我需要删除那个特定的武器时，我遇到了问题。我需要那个名字。这就是为什么我不确定它是 HTML 还是 PHP。该按钮必须被迭代或有什么意义？mySQL 很好，这是最简单的部分。

我知道我能做什么，但在我看来这是糟糕的设计，我想我也会遇到同样的问题。我可以为这些字段添加一个复选框以删除，并且在您尝试保存字符后它将被删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:11:35.113

您正在使用 mysql_fetch_array 而不是 mysql_fetch_assoc，因此您应该使用字段索引，如下所示：

```
 $weapons["weaponsName"] // This is wrong

 $weapons[0] // This is the right approach 
```

PS：你不应该使用 mysql 扩展......去 mysqli 或 PDO ;)

萨卢多斯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T20:10:08.260

看起来您对于循环的每次迭代都有一个删除按钮。您应该能够设置要删除的名称，就像将其设置为标签一样。

```
<input type=hidden name=weaponsName value=".$weapons['weaponsName'].">
<input type=submit ...>

$weaponsName = $_POST['weaponsName']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T20:05:53.200

我不是 100% 确定我理解您的问题，我相信您的 HTML，您应该执行以下操作：

```
<input type="hidden" name="weaponName[<?php print $i; ?>]" value="The Name" /> 
```

在您的 PHP 中，您应该能够访问给定索引的名称：

```
$index = 1; // Some arbitrary index
$weapon_name = $_POST['weaponName'][$index]; 
```

或者，我会做什么：在表单的操作中，指定一个 id：

```
<form action="delete.php?id=<?php print $weaponId; ?>" action="post"> 
```

然后在您的 PHP 中，您可以执行以下操作：

```
$id = $_GET['id']; // This is the weapon ID 
```

然后，您可以使用 ID 直接从数据库中提取名称。

# c++ - a 类型必须实现继承的纯虚方法 b

> ID：14840752
> 
> 赞同：6
> 
> 时间：2013-02-12T20:01:24.437
> 
> 标签：c++

我想要使​​用抽象类在 C++ 中模拟接口原型。但是在 Eclipse IDE 中，我得到“这一行的多个标记 - 'Handler' 类型必须实现继承的纯虚拟方法 'Handler::setNext'”

我的问题是为什么会这样？

处理程序.h

```
class Handler {
 public:

    virtual void setNext(Handler &next)  = 0;
    Handler();
    virtual ~Handler();
    virtual void process()  = 0;
 public:

    Handler *nextInChain;

}; 
```

处理程序.cpp

```
#include "Handler.h"
Handler::Handler(){
}
Handler::~Handler(){
} 
```

甲骨文.h

```
#include "Handler.h"
class Oracle : virtual public Handler {
 public:
    Oracle();
    virtual ~Oracle();
    virtual void process();
    virtual void setNext(Handler &next);
 private:

}; 
```

甲骨文.cpp

```
#include "Oracle.h"

Oracle::Oracle(){
Handler AQUI;//AQUI I get Multiple markers at this line
             //- The type 'Handler' must implement the inherited pure virtual method 
 //'Handler::setNext'
}

Oracle::~Oracle(){
}

void Oracle::process(){
}

void Oracle::setNext(Handler &next){
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-12T20:03:54.787

这是不正确的：

```
Handler AQUI; 
```

您不能实例化抽象类。

您要做的是定义一个指针`Handler`并将其分配给来自子类的有效对象的地址，例如`Oracle`.

# multithreading - 如何使用自己的消息处理循环在 Delphi 中创建第二个 UI 线程？

> ID：14840753
> 
> 赞同：4
> 
> 时间：2013-02-12T20:01:26.157
> 
> 标签：multithreading, delphi, vcl

我正在开发一个带有嵌入式脚本的 VCL (Delphi Win32) 表单应用程序平台，并希望添加调试支持。脚本在主 VCL 线程中执行 - 脚本直接进行 UI 操作，并有一些其他遗留约束将其保留在 UI 线程中。

调试器 UI 需要在自己的线程中运行，因为主 UI 线程将阻塞脚本断点。它仍然需要在同一个进程中，线程安全调试组件才能工作。

我尝试关注 Blorgbeard 对[https://stackoverflow.com/a/12505959/243144](https://stackoverflow.com/a/12505959/243144)的评论，但我不确定 Delphi 的 VCL 是否可行。（.NET 在将表单传递给 Application.Run 时创建一个新的 ApplicationContext） 使用以下 Delphi，主 UI 线程的阻塞会停止第二个线程上的消息处理（反之亦然）。

```
procedure TDebuggerThread.Execute;
begin
  CoInitialize(nil);

  FForm := TForm2.Create(nil);
  FForm.Show;
  Application.Run;
end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T20:08:53.007

Delphi 表单只是单线程的。的任何后代`TControl`，包括`TForm`，只能从主 UI 线程访问。`TApplication`永远不要在除主线程之外的任何东西上调用任何方法。

您当然可以创建绑定到不同线程的*其他窗口。*您只是不能在这些线程中使用 VCL UI 元素。相反，您将使用它`CreateWindow`来创建主窗口及其上的任何控件。您将编写一个窗口过程来处理发送到这些窗口的任何消息。您将在父窗口过程而不是子窗口过程中处理控制通知消息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T20:08:25.523

VCL 的限制之一是所有与 GUI 控件的交互都必须在主线程上执行。没有办法规避这一点。

如果您想使用 VCL 在单独的线程中显示调试器 GUI，您唯一的选择是使用进程外解决方案。换句话说，在不同的进程中运行您的调试器，并使用 IPC 在两个进程之间进行通信。

# mysql - 比较时的Mysql格式字符串

> ID：14840754
> 
> 赞同：0
> 
> 时间：2013-02-12T20:01:35.897
> 
> 标签：mysql, ruby

我怎么能告诉mysql比较我喜欢的条件，以便mysql在从字符串中删除空格并使符号大写之前......例如，现在我的ruby代码是这样的：

```
LineItem.find(:all, :conditions => ["(description like ?) and (order_id in (?))", "%#{params[:art_order_search]}%", orders.map(&:id)]) 
```

但是，当我将 mysql 字段描述（不要对 db 进行任何更改）进行比较时，我该怎么做，像 ruby​​ gsub 那样做一些事情：例如：现在我将有这样的事情：

```
description in db = ololo from lol oc 90
select * from ooo where description like "OC90" 
```

但是我该怎么做，当我比较时，我的领域是：

```
OLOLOFROMLOL**OC90** 
```

只是什么功能以及如何在这里写：（描述像？）？？？红宝石字符串模拟是：

```
.gsub(/[^0-9A-Za-z]/, '').upcase 
```

但是如何为mysql和mysql做呢？

*如果有不清楚的地方，请不要给我减号，只是在评论中提问......*

也许与 TRIM 和 UPPER，但如何？

# django - django上下文处理器

> ID：14840757
> 
> 赞同：6
> 
> 时间：2013-02-12T20:01:43.420
> 
> 标签：django

我有一堆变量需要用于所有模板的视图。似乎最好的选择是上下文处理器。

文档说：

> 上下文处理器有一个非常简单的接口：它只是一个 Python 函数，它接受一个参数，一个 HttpRequest 对象，并返回一个添加到模板上下文的字典。每个上下文处理器必须返回一个字典。

如果我需要进行更高级的查找，我可以定义其他函数吗？这些函数是否需要在一个类中？`context_processors.py`我正在考虑在我的应用程序文件夹中创建一个名为的文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T20:12:14.587

您可以定义其他函数，并且这些函数不需要在一个类中。

通常，人们将他们的上下文处理器放入`context_processors.py`您认为的函数中，然后将它们全部命名为`settings.TEMPLATE_CONTEXT_PROCESSORS`.

例如，这是一个包含`context_processors.py`内部的应用程序：[django-seo](https://github.com/glavit/django-seo)。

# d3.js - 如何在discreteBarChart nvd3.js上的y轴上设置域和比例

> ID：14840759
> 
> 赞同：6
> 
> 时间：2013-02-12T20:01:43.327
> 
> 标签：d3.js, nvd3.js

我在我的一个应用程序中使用 d3.js 图表。他们在这张图片中 查看[图表](http://d.pr/i/Ogts)

对于货币图表上的 Y 轴（见图），我希望最大值四舍五入到 400，无论这里的最大条形大小是 358.72 美元，但我想将条形保持在 358.72 但在 Y 轴上它将是 400 限制.

它的代码在这里

```
tradesChart = [ 
      {
        key: "Cumulative Return",
        values: [
                        {
            "label" : "6E",
            "value" : 100       },
                    {
            "label" : "NG",
            "value" : 100       },
                    {
            "label" : "TF",
            "value" : 67        }        ]
      }
    ];
        nv.addGraph(function() {

      var chart = nv.models.discreteBarChart()
          .x(function(d) { return d.label })
          .y(function(d) { return d.value/100 })
          .staggerLabels(true)
          .showValues(true)
          .valueFormat(d3.format('.0%'))

      chart.yAxis.tickFormat(function(d) { return d3.format('d')(d*100) + '%'; });

      d3.select('#chart-trades svg')
        .datum(tradesChart)
        .transition().duration(500)
        .call(chart);

      nv.utils.windowResize(chart.update);

      return chart;
    }); 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-13T19:12:49.497

您需要修改 Y 轴刻度的域。通常它是从数据的最大值推导出来的，如下所示：

```
yScale.domain([0, d3.max(data, function (d) { return d.v; }) ]); 
```

在您的情况下，您应该将其修改为更像这样：

```
yScale.domain([0, 400]); 
```

或者，如果您想从数据中设置最大值*或*最小静态值，您可以执行以下操作：

```
yScale.domain([0, d3.max(data, function (d) { return d.v > 400 ? d.v : 400; }) ]); 
```

一个完整的例子 jsfiddle 在[这里](http://jsfiddle.net/activescott/69cwn/)。

这就是使用 D3.js 的方法，我对古老的 nvd3.js 库不熟悉，所以我不确定如何访问规模，但我会看看是否能找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T20:44:51.633

强制 Y

强制进入 Y 刻度的数字列表（即 0，或最大值/最小值等）。数字告诉 d3.js 在比例中使用的值，而不是 d3.js 确定值。

数据类型：数字数组（即 [0, 50]

[http://cmaurer.github.io/angularjs-nvd3-directives/line.chart.html](http://cmaurer.github.io/angularjs-nvd3-directives/line.chart.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-08T08:17:09.003

我使用 nvd3 而对我来说这有效：

```
nv.models.discreteBarChart().yDomain([0,400]) 
```

我无法使用它`yScale.domain`

# java - 如何在java中使JFrame模糊？

> ID：14840763
> 
> 赞同：1
> 
> 时间：2013-02-12T20:01:56.407
> 
> 标签：java, swing, jframe, jlayer

在我的 java 程序中，当用户单击主框架中的一个按钮时，`JFrame`另一个按钮在`JFrame`主框架顶部可见。现在如何使前一帧模糊？就像图像中的背景一样：

![叠加模糊背景](../Images/d84b858a450d5e8d22c92f3850e98ba0.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T20:17:13.957

现在如何使前一帧模糊？

*   看看[基于 JXLayer(Java6) 的 JLayer(Java7)](http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html)，

*   类似的效果是可能的[`GlassPane`](https://stackoverflow.com/questions/8715807/layering-multiple-glasspanes-in-a-root-container), 或[`JViewport`](https://stackoverflow.com/questions/8197261/jtable-how-to-change-background-color)（不是正确的方式，但良好的 Swing GUI 包含`JScrollPane`作为第一个。`JComponent`in `JFrame`// `JDialog`）`JWindow`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T20:18:05.447

我假设您正在使用 Java Swing 进行编码，并且图片是您想要的效果。

您将使用 a`JDialog`创建顶部窗口，而不是使用`JFrame`. A`JDialog`被设计为模态的。换句话说，锁定`JFrame`直到`JDialog`关闭。

a 的默认行为`JDialog`是不使底层模糊或变暗`JFrame`。为了使底层变暗`JFrame`，您将不得不在 .的玻璃窗格上绘制黑色图像`JFrame`。

本[教程](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html)向您展示如何操作`JFrame`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T20:04:50.203

有`setOpacity(float opacity)`可用的方法`JFrame`（实际上继承自`Frame`）。

# android - Mono Android：在 onPause() 状态下终止线程

> ID：14840766
> 
> 赞同：1
> 
> 时间：2013-02-12T20:02:08.993
> 
> 标签：android, multithreading, thread-safety, xamarin.android

我遇到了一个奇怪的问题......我的应用程序是为了在一个单独的线程上做一些 web 服务调用。一旦网络服务调用完成，它会将用户导航到不同的活动。在用户按下主页按钮或退出当前活动的情况下，如果 web 服务调用线程仍在运行，它应该终止 web 服务。因此，我将线程终止方法置于 OnPause 状态。

这是在线程内运行的方法块：

```
private Thread _webserviceThread;

void WebserviceCallThread(){
    WebRestult result= WebserviceCall();
    if(!result.containsError()){
         RunOnUIThread(delegate{
             transitionToActivityXYZ();
         });
    }
}

void RunThreadAction(){
    _webserviceThread = new Thread(new ThreadStart(WebserviceCallThread));
    _webserviceThread.Start();
}

protected override void OnPause(){
    if(_webserviceThread != null && _webserviceThread.IsAlive){
        _webserviceThread.Abort();
    }

} 
```

在 web 服务调用完成并开始转换到另一个页面后，它进入 OnPause 状态。然而，在一些奇怪的情况下，它会认为线程没有在 OnPause 状态下完成，即使活动转换是方法的最后一行。

有没有人遇到过这个问题？如果是这样，你是如何解决这个问题的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:37:39.923

为什么不使用 Task Parallel Library，它是标准的 .NET，并且使用 AsyncTask，只推荐用于耗时少于几秒的任务。见[文档](http://docs.mono-android.net/index.aspx?link=T%3aAndroid.OS.AsyncTask)

> AsyncTasks 最好用于短时间的操作（最多几秒钟）。如果您需要保持线程长时间运行，强烈建议您使用 java.util.concurrent 提供的各种 API

下面是如何使用任务并行库的示例，取自[此处](http://www.gregshackles.com/2011/04/using-background-threads-in-mono-for-android-applications/comment-page-1/#comment-2872)

```
private void loginWithTaskLibrary()
{
    _progressDialog.Show();

    Task.Factory
        .StartNew(() =>
            _loginService.Login("greg")
        )
        .ContinueWith(task =>
            RunOnUiThread(() =>
                onSuccessfulLogin()
            )
        );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:09:50.720

我总是用[`AsyncTask`](http://docs.mono-android.net/index.aspx?link=T%3aAndroid.OS.AsyncTask)这种东西。它不仅**抽象**出显式的线程处理并提供钩子来做你想做的一切；这也是一种很好的方式来表示`unit of work`可以从 other 中使用的a `activities`。

[这篇](http://www.gregshackles.com/2011/04/using-background-threads-in-mono-for-android-applications/)文章的一部分有一个简单的例子，但它没有使用非常方便的通用参数。

# html - 如何封装 CSS，尤其是对于弹出窗口且不涉及 iframe？

> ID：14840767
> 
> 赞同：4
> 
> 时间：2013-02-12T20:02:12.983
> 
> 标签：html, css, encapsulation

刚刚从设计团队获得了一个带有 css 的新网页，用于弹出一个精美的框；

他们不知道或不关心寻找现有的类和ID；

我需要一个没有任何工作的解决方案`IFRAME`

问题是主 css 文件中已经有超过 20.000 行 css 行，并且在某些时候某些内容会被覆盖，整个网站都会大爆炸！

这个新网页有很常见`class`的`id`名字，我说的是近100个带有css属性的标签；

我想知道`encapsulate`这个新的 css 属性和未来的属性是否有方法；

如果有办法做到这一点，怎么能做到呢？

有了这个网页，我很幸运，我粘贴了带有内容的标签，就在此之前，我使用了`style type"text/css'`标签；但我不会永远幸运；

仅仅因为我们获得了由不同人编写的 css 代码的网页，如果某些属性、名称或 id 相互交叉，那么创建新的 css 类对我来说是不公平的。

我现在有大约 10 个类，`a tag`而且我大部分的属性是相同的；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T20:40:24.357

使用有针对性的规则，让级联为您处理。将您的弹出窗口放在一个包装器中，其中包含您喜欢的名称的详细信息。

```
<div id="myPopupDivWithCommonIds">
    <!-- rest of popup -->
</div> 
```

并将您的 css 规则定位到该 div。

```
#myPopupDivWithCommonIds .error { color: bright-pink; }
#myPopupDivWithCommonIds #main { width: 93.21%; } 
```

等等等等。这会处理 css 规则并防止你的新东西溢出。您必须注意确保没有其他规则会流下来；最好的方法是明智地覆盖任何已定义的属性（Pekka 所说的）。您也可以对其进行核对并包含自定义的“重新启动”或“引导”样式表，然后再次将其所有规则重新定位到您的新弹出 div （就像您说的，20k 行 css 很难；但包括另一个文件通过附加 #id 选择器来设置针对您的 div 的重置规则会有所帮助）。

哦，这仍然没有解决重复 id 在技术上是无效标记的问题，并且很可能会干扰您尝试在该页面上运行的任何 JavaScript。

如果这听起来像一团糟，那么它就是。您的开发人员和设计人员已经做到了这一点，如果没有进行认真的重构，您将不会回到干净的解决方案。对于您的用例而言，iFrame 可能看起来像是一个 hack 或不可能的，但它确实会清理很多您正确预见的问题。

# apache - 乘客/Apache 在 AWS/CENTOS 上缺少 gcc/zlib-devel

> ID：14840768
> 
> 赞同：-1
> 
> 时间：2013-02-12T20:02:16.653
> 
> 标签：apache, amazon-web-services, centos, passenger

我正在尝试在运行 CENTOS 的 AWS 实例上安装Passenger for Apache。当我尝试安装它时，它告诉我：

```
GNU C++ compiler... not found
Zlib development headers... not found 
```

这些都已安装（yum install gcc zlib-devel）并且是最新版本。gcc -v 说它是 4.6.2。

我已经看到了类似的问题，其中接受的答案是运行

```
mount -o remount,rw,exec,nosuid /tmp 
```

这将返回以下内容：

```
mount: can't find /tmp in /etc/fstab or /etc/mtab 
```

我尝试使用 chmod 777 /tmp 更改 /tmp 目录的权限（它确实存在，只是似乎没有挂载），但这不允许乘客安装看到这两个包。

有人可以帮我吗？我不确定此时还能做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:09:17.427

我无法解决上述问题，但我还是设法通过添加 EPEL 进行安装，然后通过 yum 安装 mod_passenger：

```
rpm -Uvh http://ftp.linux.ncsu.edu/pub/epel/6/i386/epel-release-6-8.noarch.rpm
yum install mod_passenger 
```

# jquery - jQuery - 在 attr 上动态绑定 CSS 类？

> ID：14840770
> 
> 赞同：0
> 
> 时间：2013-02-12T20:02:32.240
> 
> 标签：jquery, attr

我有一个唯一的表行，其中每一行都有一个唯一的 ID。但是，有时该表是通过 AJAX 动态生成的。

我还有一个用于更新特定表格行 bgcolor 的按钮。但由于该表行可能是动态生成的，它似乎不起作用。

```
$("input[name=Save]").live("click", function(event){

  //rowID comes from somewhere in the my script

  $.ajax({
  type: "POST",
  url: "./Library/saveStff.php",
  data: $("form").serialize(),
  async: false,
  dataType: "text",
  success: function(value){

  //value will return the color

  //change color
  $(".info_"+rowID).attr('bgcolor', value);
  }
  });

}); 
```

'live', 'on', 'bind' 似乎只适用于事件。但我只想将它应用于 attr/bgcolor。

使用

```
$(".info_"+rowID).live("attr", $(this).('bgcolor', value)); 
```

也似乎无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T20:05:48.380

使用[css()](http://api.jquery.com/css/) ...试试这个

```
$(".info_"+rowID).css('background-color', value); 
```

> 从 jQuery 1.7 开始，不推荐使用 .live() 方法。

使用 on()

```
("input[name=Save]").on("click", function(event){.. 
```

# scala - 如果它存在，那么获取列表尾部的简单简洁方法是什么？

> ID：14840773
> 
> 赞同：2
> 
> 时间：2013-02-12T20:02:50.943
> 
> 标签：scala

我发现自己经常想要放弃列表的头部，如果它在那里的话。我知道我可以：

```
myList match {
  case h :: t => t
  case x => Nil
} 
```

但这在我的代码中变得非常冗长，因为有很多地方我需要这样做。

有什么更简单/更短/更简洁的吗？我有点想要像 headOption 这样的东西，但对于 tail.... 不会在空列表上抛出匹配错误的东西。

想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T20:05:28.393

`myList.drop(1)`相当于你写的代码。

# android - 文件资源管理器未显示数据库且 DDMS 透视图为空白

> ID：14840775
> 
> 赞同：0
> 
> 时间：2013-02-12T20:03:09.303
> 
> 标签：android

我正在使用此代码创建数据库文件，但文件未显示在文件资源管理器或 DDMS 中。我只是在创建一个文件而不是实现任何东西

```
public class TimeTrackerOpenHelper extends SQLiteOpenHelper{

public TimeTrackerOpenHelper(Context context, String name,
        CursorFactory factory, int version) {
    super(context, "database.db", null, 1);
    // TODO Auto-generated constructor stub
}

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub

} 
```

}

我也将它包含在我的活动文件中

```
 TimeTrackerOpenHelper openHelper = new TimeTrackerOpenHelper(this ,"database.db", null, 1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:23:14.790

在您调用`getReadableDatabase`或之前不会创建数据库`getWritableDatabase`。的构造函数`SQLiteOpenHelper`只是将数据库名称和版本存储在内部字段中，但尚未创建数据库文件。

# jquery - AJAX的同步完成

> ID：14840782
> 
> 赞同：2
> 
> 时间：2013-02-12T20:03:25.463
> 
> 标签：jquery, ajax

我在另一个 AJAX 调用中有一个 AJAX 调用。

我正在使用`$.ajax`方法：

```
$.ajax({
    type: 'POST',
    url: '/xx/xxx',
    success: function (data) {
        if(data == true){
            var j = MethodThatCallAjaxFunction();
            //some code here
        }
    }    
}); 
```

`j`在注释之后执行代码之前，如何确保填充 的值`//some code here`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T20:05:05.560

你不能。 `MethodeThatCallAjaxFunction`可以通过同步（坏），也可以附加回调。

```
function mtcaf() {
    return $.ajax();
}
//snip
if (data == true) {
    mtcaf().done(function () {
        //some codes here
    });
} 
```

# android - android从今年下周日开始重复闹钟

> ID：14840783
> 
> 赞同：0
> 
> 时间：2013-02-12T20:03:26.497
> 
> 标签：android, alarmmanager

无论何时（如果过去），我的重复闹钟都会在周日第一次开始，这是问题所在，在下周日闹钟正确重复，我想从下周日开始闹钟..这是我的代码：

```
 AlarmManager alarmMgr = (AlarmManager) activity.getSystemService(Context.ALARM_SERVICE);

            Intent intent = new Intent(activity, Alarm.class);
            PendingIntent pendingIntent = PendingIntent.getBroadcast(activity, 0, intent,PendingIntent.FLAG_UPDATE_CURRENT);

            Calendar calendarStart = Calendar.getInstance();

            calendarStart.set(Calendar.DAY_OF_WEEK, 1 );
            calendarStart.set(Calendar.HOUR_OF_DAY,8);
            calendarStart.set(Calendar.YEAR,calendarStart.get(Calendar.YEAR));              
            calendarStart.set(Calendar.MINUTE, 0);
            calendarStart.set(Calendar.SECOND, 0);

            Toast.makeText(activity, calendarStart.getTime()+"",Toast.LENGTH_LONG).show();

            alarmMgr.setRepeating(AlarmManager.RTC_WAKEUP, calendarStart.getTimeInMillis() ,24*60*60*1000, pendingIntent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:22:50.580

> 无论何时（如果过去），我的重复闹钟都会在星期日第一次开始

检查是否`calendarStart`是过去以及是否添加 7 天：

```
if(calendarStart.compareTo(Calendar.getInstance()) < 0) { 
    // calendarStart is in the past, use next Sunday
    calendarStart.add(Calendar.DAY_OF_YEAR, 7);
}

Toast.makeText(activity, calendarStart.getTime()+"",Toast.LENGTH_LONG).show(); 
```

# ios - Master-Detail-View manageObject 设置不正确

> ID：14840786
> 
> 赞同：0
> 
> 时间：2013-02-12T20:03:53.517
> 
> 标签：ios, objective-c, nsmanagedobjectcontext, uicollectionview, master-detail

`CollectionView`我尝试使用而不是`TableView`启动和运行来获取主详细信息视图。基本上我遵循了[http://goo.gl/e07Bs](http://goo.gl/e07Bs)和[http://goo.gl/tGLVY](http://goo.gl/tGLVY)的例子来让它工作。与 Xcide 4.6 一样，样板文件发生了一些变化，但我尽了最大努力。

当我运行烟雾测试时，应用程序崩溃并显示以下消息：

```
1 -fetchedResultsController value self.mOContext 0x00000000
2013-02-12 20:33:52.895 foobar[1461:c07] *** Terminating app 
due to uncaught exception 'NSInvalidArgumentException', reason: 
'+entityForName: nil is not a legal NSManagedObjectContext 
parameter searching for entity name 'PhotoModel'' 
```

错误似乎在这一行：

```
NSEntityDescription *entity = [NSEntityDescription entityForName:@"PhotoModel" inManagedObjectContext:self.managedObjectContext]; 
```

我在此行之前创建了一个断点并检查了 managedObjectContext 的内容，如上面在日志中所见，它是空的（第一行，self.mOContext）。

如何设置 managedObjectContext，或者我的错误在哪里，这不起作用......？

**编辑：**因为我需要在主细节场景之前有一个新场景，所以我不得不改变它`AppDelegate.m`以满足新的要求。我会评论初始样板`didFinishLaunchingWithOptions`以使初始场景正常工作：

```
#import "AppDelegate.h"
#import "MasterViewController.h"    
#import "LoginViewController.h"

@implementation AppDelegate

@synthesize managedObjectContext = _managedObjectContext;
@synthesize managedObjectModel = _managedObjectModel;
@synthesize persistentStoreCoordinator = _persistentStoreCoordinator;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.

    /*
    // Old Master-Detail-View-Controller, commented to get the initial new scene to work
    UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;
    MasterViewController *controller = (MasterViewController *)navigationController.topViewController;
    controller.managedObjectContext = self.managedObjectContext;
    */  

    return YES;
} 
```

这是我的`MasterViewController.h`

```
#import <UIKit/UIKit.h>
#import <CoreData/CoreData.h>

@interface MasterViewController : UICollectionViewController <NSFetchedResultsControllerDelegate>

@property (strong, nonatomic) NSFetchedResultsController *fetchedResultsController;
@property (strong, nonatomic) NSManagedObjectContext *managedObjectContext;

@end 
```

和`MasterViewController.m`

```
#import "MasterViewController.h"
#import "CollectionViewCell.h"
#import "DetailViewController.h"

static NSString *cellid = @"cellid";

@interface MasterViewController ()
- (void)configureCell:(UICollectionViewCell *)cell atIndexPath:(NSIndexPath *)indexPath;
@end

@implementation MasterViewController
{
    NSMutableArray *_objectChanges;
    NSMutableArray *_sectionChanges;
}

- (void)awakeFromNib
{
    [super awakeFromNib];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    // not sure if needed
    self.navigationItem.leftBarButtonItem = self.editButtonItem;

    UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(insertNewObject:)];
    self.navigationItem.rightBarButtonItem = addButton;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)insertNewObject:(id)sender
{
    NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
    NSEntityDescription *entity = [[self.fetchedResultsController fetchRequest] entity];
    NSManagedObject *newManagedObject = [NSEntityDescription insertNewObjectForEntityForName:[entity name] inManagedObjectContext:context];

    // If appropriate, configure the new managed object.
    // Normally you should use accessor methods, but using KVC here avoids the need to add a custom class to the template.
    [newManagedObject setValue:[NSDate date] forKey:@"timeStamp"];

    // Save the context.
    NSError *error = nil;
    if (![context save:&error]) {
         // Replace this implementation with code to handle the error appropriately.
         // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }
}

#pragma mark - Collection View

- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView
{
    return [[self.fetchedResultsController sections] count];
}

- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
{
    id <NSFetchedResultsSectionInfo> sectionInfo = [self.fetchedResultsController sections][section];
    return [sectionInfo numberOfObjects];
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    CollectionViewCell *cell = (CollectionViewCell *)[collectionView dequeueReusableCellWithReuseIdentifier:cellid forIndexPath:indexPath];
    NSManagedObject *object = [self.fetchedResultsController objectAtIndexPath:indexPath];
#warning Unimplementd Cell Configuration 
    return cell; 
}

#pragma mark - Segue

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showDetail"]) {
        NSIndexPath *indexPath = [[self.collectionView indexPathsForSelectedItems] lastObject];
        NSManagedObject *object = [[self fetchedResultsController] objectAtIndexPath:indexPath];
        [[segue destinationViewController] setDetailItem:object];
    }
}

#pragma mark - Fetched results controller

- (NSFetchedResultsController *)fetchedResultsController
{
    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    // Edit the entity name as appropriate.
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"PhotoModel" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];

    // Set the batch size to a suitable number.
    [fetchRequest setFetchBatchSize:20];

    // Edit the sort key as appropriate.
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"timeStamp" ascending:NO];
    NSArray *sortDescriptors = @[sortDescriptor];

    [fetchRequest setSortDescriptors:sortDescriptors];

    // Edit the section name key path and cache name if appropriate.
    // nil for section name key path means "no sections".
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"Master"];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    NSError *error = nil;
    if (![self.fetchedResultsController performFetch:&error]) {
         // Replace this implementation with code to handle the error appropriately.
         // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return _fetchedResultsController;
}    

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo
           atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type
{

    NSMutableDictionary *change = [NSMutableDictionary new];

    switch(type) {
        case NSFetchedResultsChangeInsert:
            change[@(type)] = @(sectionIndex);
            break;

        case NSFetchedResultsChangeDelete:
            change[@(type)] = @(sectionIndex);
            break;
    }
    [_sectionChanges addObject:change];
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath
{
    UICollectionView *collectionView = self.collectionView;

    NSMutableDictionary *change = [NSMutableDictionary new];

    switch(type) {
        case NSFetchedResultsChangeInsert:
            change[@(type)] = newIndexPath;
            break;

        case NSFetchedResultsChangeDelete:
            change[@(type)] = newIndexPath;
            break;

        case NSFetchedResultsChangeUpdate:
            change[@(type)] = newIndexPath;
            break;

        case NSFetchedResultsChangeMove:
            change[@(type)] = @[indexPath, newIndexPath];
            break;
    }

    [_objectChanges addObject:change];
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    if ([_sectionChanges count] > 0)
    {
        [self.collectionView performBatchUpdates:^{

            for (NSDictionary *change in _sectionChanges)
            {
                [change enumerateKeysAndObjectsUsingBlock:^(NSNumber *key, id obj, BOOL *stop) {

                    NSFetchedResultsChangeType type = [key unsignedIntegerValue];
                    switch (type)
                    {
                        case NSFetchedResultsChangeInsert:
                            [self.collectionView insertSections:[NSIndexSet indexSetWithIndex:[obj unsignedIntegerValue]]];
                            break;
                        case NSFetchedResultsChangeDelete:
                            [self.collectionView deleteSections:[NSIndexSet indexSetWithIndex:[obj unsignedIntegerValue]]];
                            break;
                        case NSFetchedResultsChangeUpdate:
                            [self.collectionView reloadSections:[NSIndexSet indexSetWithIndex:[obj unsignedIntegerValue]]];
                            break;
                    }
                }];
            }
        } completion:nil];
    }

    if ([_objectChanges count] > 0 && [_sectionChanges count] == 0)
    {
        [self.collectionView performBatchUpdates:^{

            for (NSDictionary *change in _objectChanges)
            {
                [change enumerateKeysAndObjectsUsingBlock:^(NSNumber *key, id obj, BOOL *stop) {

                    NSFetchedResultsChangeType type = [key unsignedIntegerValue];
                    switch (type)
                    {
                        case NSFetchedResultsChangeInsert:
                            [self.collectionView insertItemsAtIndexPaths:@[obj]];
                            break;
                        case NSFetchedResultsChangeDelete:
                            [self.collectionView deleteItemsAtIndexPaths:@[obj]];
                            break;
                        case NSFetchedResultsChangeUpdate:
                            [self.collectionView reloadItemsAtIndexPaths:@[obj]];
                            break;
                        case NSFetchedResultsChangeMove:
                            [self.collectionView moveItemAtIndexPath:obj[0] toIndexPath:obj[1]];
                            break;
                    }
                }];
            }
        } completion:nil];
    }

    [_sectionChanges removeAllObjects];
    [_objectChanges removeAllObjects];
}

- (void)configureCell:(UICollectionViewCell *)cell atIndexPath:(NSIndexPath *)indexPath
{
    NSManagedObject *object = [self.fetchedResultsController objectAtIndexPath:indexPath];
    //cell.textLabel.text = [[object valueForKey:@"timeStamp"] description];  
    #warning textlabel has to be created in storyboard
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:28:45.157

managedObjectContext 通常由 XCode 在样板代码中创建。创建项目时，请确保启用 Core Data。在项目创建向导期间，应该有一个“使用核心数据”复选框。这将插入正确的样板代码来创建托管对象上下文和持久存储协调器，无论何时使用 Core Data，您都需要这两者。

编辑：

在您注释掉的旧 AppDelegate 代码中，他们在此处将主视图控制器中的 managedObjectContext 变量设置为 self.managedObjectContext ：

```
controller.managedObjectContext = self.managedObjectContext; 
```

你确定为你的自定义控制器做同样的事情吗？

# javascript - 从样式属性中清理 HTML 代码

> ID：14840787
> 
> 赞同：2
> 
> 时间：2013-02-12T20:03:54.240
> 
> 标签：javascript, jquery, html, contenteditable

我有一个`contenteditable`复制用户文本的 HTML 代码的选项。我想删除`style=""`浏览器添加到某些元素的属性。例如：

```
<h2>what</h2><p><span style="color: rgb(54, 54, 54); font-size: 18px; line-height: 1.77777778em;">what is&nbsp;this</span><span style="color: rgb(54, 54, 54); font-size: 18px; line-height: 1.77777778em;">&nbsp;</span></p><p></p> 
```

我怎么能用 jQuery 做到这一点？

我已经尝试过，但它不起作用：

```
$('#post_content').keydown(function(e) {
  // if ctrl + e
  if ((e.metaKey || e.ctrlKey) && e.keyCode == 69) {
    var html = $('#post_content').removeAttr('style').html();
    prompt("Ctrl+C to copy HTML code", html);
  }
}); 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T20:14:29.097

[`removeAttr()`为此目的应该可以正常工作](http://jsfiddle.net/mblase75/y3PyZ/)。

我怀疑问题出在您的选择器`#post_content`上——不在您提供的示例 HTML 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T20:20:20.603

```
$("#post_content *").removeAttr("style");
prompt("Ctrl+C to copy HTML code", $("#post_content").html()); 
```

[http://jsfiddle.net/WHRST/](http://jsfiddle.net/WHRST/)

您必须选择 contenteditable 元素的所有后代。因此，您在选择中使用 (*)，一旦您拥有所有后代，您就可以调用 .removeAttr("style") ，它将从集合中的每个元素中删除。

# android - 在应用计费设置返回代码 3

> ID：14840789
> 
> 赞同：1
> 
> 时间：2013-02-12T20:04:00.380
> 
> 标签：android, in-app-billing

我试图让应用内计费工作。我已经按照[http://blog.blundell-apps.com/simple-inapp-billing-payment-v3/](http://blog.blundell-apps.com/simple-inapp-billing-payment-v3/)的教程进行了一些操作，并且我可以进行购买。尽管在某些时候从我的两个测试设备都停止工作。同时停止工作的是完全付费的应用程序，我只会看到免费的应用程序。

从我对保留产品的开发者帐户测试中，我发现了我的帐户以某种方式被注销的原因？当重新登录它工作时，对此感到满意:)

从我针对已发布产品的测试帐户中，我收到一条消息说“商家无法提供产品”或类似的东西。然后该帐户崩溃（无法购买），我无法让市场再次运作。

我有： - 已验证多个帐户不存在 - 确保我的帐户仍然登录市场（来自开发者帐户的案例） - 清除了 google play 缓存 - 将帐户删除为测试帐户 - 重新启动设备

这里有什么想法吗？我可以理解我的应用程序是否由于编码不佳而无法运行，但是这种行为是什么，使该帐户的市场失效？谷歌播放会因为垃圾邮件而阻止我的帐户吗？10 个左右的 IAB 设置是否算作垃圾邮件？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:29:49.603

开发者不能购买自己的产品。因此，您可以构建您的 apk 的签名版本并在主帐户未绑定到您的开发者帐户的设备上进行测试。我不得不用我妻子的手机来测试我的 IAP。另请注意，您必须等待一段时间才能提供您的产品（SKU）。

# javascript - ajax xmlhttp 响应为空 - javascript

> ID：14840796
> 
> 赞同：0
> 
> 时间：2013-02-12T20:04:30.110
> 
> 标签：javascript, ajax, null, response

这是我的代码：

```
<script type="text/javascript">

                                var xmlhttp;
                                $(document).ready(function (){ 

                                    xmlhttp=new XMLHttpRequest();   
                                });

                                function SubmitCommentAJAX(i){alert();

                                    alert(i.parentNode.getElementsByClassName("commentsScroll")[0].innerHTML);

                                    var thecomment=i.parentNode.getElementsByClassName("styled")[0].innerHTML; 
                                    var commentBox=i.parentNode.getElementsByClassName("commentsScroll")[0];

                                    var request="http://localhost:8080/ituned.com/index?Event=Comment&PostTitle=<%=p.getTitle()%>&PostOwner=<%=p.getUsername_of_Owner()%>&comment="+thecomment;
                                    xmlhttp.open("POST",request,true);
                                    xmlhttp.send();

                                    xmlhttp.onreadystatechange=function()
                                     {
                                      if (xmlhttp.readyState==4 && xmlhttp.status==200)
                                        {        
                                          var response=xmlhttp.responseXML.getElementsByTagName("theComment")[0].text;
                                          commentBox.insertBefore(response, commentBox.firstChild);

                                       }
                                     };

                                }
                                </script> 
```

我得到：Cannot call method 'getElementsByTagName' of null for this line：

var response=xmlhttp.responseXML.getElementsByTagName("theComment")[0].text;

servlet 发送了响应，因为在调试器中它说收到了响应，但无论如何这里是 servlet 中的代码：

```
response.setContentType("text/xml");
        try {
            response.getWriter().println("<theComment>asasasaasa<br></theComment>");
        } catch (IOException e) {

            e.printStackTrace();
        } 
```

浏览器是chrome。谁能告诉我为什么 xmlhttp.responseXML 是空的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:08:20.857

`<br>`在 xml try 中无效`<theComment>asasasaasa<br/></theComment>`。

# eclipse - 两个基于 Resteasy 的 WAR，一个不扫描提供者？

> ID：14840797
> 
> 赞同：0
> 
> 时间：2013-02-12T20:04:32.717
> 
> 标签：eclipse, maven, tomcat, jackson, resteasy

我在 Eclipse 中有 2 个针对 Tomcat 7 的 m2e 管理项目。每个项目都有相同的配置，除了 POM 中的 artifactId 和 web.xml 中的显示名称（其中一个的大部分配置是从另一个中剪切/粘贴的）。

在第一个上，当我“在服务器上运行”时，所有 Resteasy 类都被注册，@Providers 被扫描并注册。

另一方面，Web 服务器已注册，但没有证据表明正在扫描。有没有人遇到过这样的情况？我很想知道这两个项目有什么不同。

工作日志：

```
INFO: Reloading Context with name [/itworks] has started
Feb 12, 2013 12:48:57 PM org.jboss.resteasy.plugins.server.servlet.ConfigurationBootstrap 
INFO: Adding scanned @Provider: xxx.BadRequestHandler
Feb 12, 2013 12:48:57 PM org.jboss.resteasy.plugins.server.servlet.ConfigurationBootstrap 
INFO: Adding scanned @Provider: org.codehaus.jackson.jaxrs.JsonMappingExceptionMapper
Feb 12, 2013 12:48:57 PM org.jboss.resteasy.plugins.server.servlet.ConfigurationBootstrap 
INFO: Adding scanned @Provider: org.codehaus.jackson.jaxrs.JsonParseExceptionMapper
Feb 12, 2013 12:48:57 PM org.jboss.resteasy.plugins.server.servlet.ConfigurationBootstrap 
INFO: Adding scanned @Provider: org.codehaus.jackson.jaxrs.JacksonJsonProvider
Feb 12, 2013 12:48:57 PM org.jboss.resteasy.plugins.server.servlet.ConfigurationBootstrap 
INFO: Adding scanned @Provider: org.codehaus.jackson.jaxrs.JacksonJaxbJsonProvider
Feb 12, 2013 12:48:57 PM org.jboss.resteasy.plugins.server.servlet.ConfigurationBootstrap 
INFO: Adding scanned resource: xxx.Hashmask
Feb 12, 2013 12:48:57 PM org.jboss.resteasy.plugins.server.servlet.ConfigurationBootstrap 
INFO: Adding scanned resource: xxx.HelloWorld
Feb 12, 2013 12:48:57 PM org.apache.catalina.core.StandardContext reload
INFO: Reloading Context with name [/itworks] is completed 
```

非工作日志：

```
INFO: Reloading Context with name [/noworkie] has started
Feb 12, 2013 12:56:30 PM org.jboss.resteasy.plugins.server.servlet.ConfigurationBootstrap 
INFO: Adding scanned resource: yyy.HelloWorld
Feb 12, 2013 12:56:30 PM org.jboss.resteasy.plugins.server.servlet.ConfigurationBootstrap 
INFO: Adding scanned resource: yyy.MongoTest
Feb 12, 2013 12:56:30 PM org.apache.catalina.core.StandardContext reload
INFO: Reloading Context with name [/noworkie] is completed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:40:07.380

尝试将此参数添加到项目的 web.xml 中：

```
<context-param>
    <param-name>resteasy.use.deployment.sensitive.factory</param-name>
    <param-value>false</param-value>
</context-param> 
```

它帮助我解决了 Jboss 上的类似问题。我在[resteasy jira 问题中找到了这个解决方案。](https://issues.jboss.org/browse/RESTEASY-748?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel) 看起来它是resteasy中的已知问题......

# javascript - Bootstrap Carousel：指标不循环

> ID：14840799
> 
> 赞同：8
> 
> 时间：2013-02-12T20:04:40.347
> 
> 标签：javascript, twitter-bootstrap, carousel

我正在尝试从 Bootstrap 实现轮播。

一切正常，除了轮播指示器（'.carousel-indicators'）没有与幻灯片一起循环。

[这是一个完全精简的页面](http://dev.magzalez.com/bootstrap-question.html)：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1.0, width=device-width">
<meta name="description" content="">
<title>Test Home Page</title>
<link href="http://s3.amazonaws.com/stockpr-test-store/esph2/files/css/bootstrap.min.css" rel="stylesheet" media="screen">
<style>
    li.active {
        color:red;
    }
</style>
</head>
<body>
    <div class="container">
    <h1>Test</h1>
        <div id="myCarousel" class="carousel slide">
            <ol class="carousel-indicators">
                <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                <li data-target="#myCarousel" data-slide-to="1"></li>
                <li data-target="#myCarousel" data-slide-to="2"></li>
            </ol>
            <!-- Carousel items -->
            <div class="carousel-inner">
                <div class="active item"><img src="http://dummyimage.com/960x500/fff/000" alt="Slide 1"></div>
                <div class="item"><img src="http://dummyimage.com/960x500/fff/000" alt="Slide 2"></div>
                <div class="item"><img src="http://dummyimage.com/960x500/fff/000" alt="Slide 3"></div>
            </div>
            <!-- Carousel nav -->
            <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
            <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
        </div>
    </div><!--//container-->

<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="http://s3.amazonaws.com/stockpr-test-store/esph2/files/js/bootstrap.min.js"></script>
<script>
$('.carousel').carousel();
</script>
</body> 
```

[这几乎与http://twitter.github.com/bootstrap/javascript.html#carousel](http://twitter.github.com/bootstrap/javascript.html#carousel)上的示例完全相同。关于为什么他们不会滑动的任何想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-12T21:15:27.170

将您的 Bootstrap css 文件和 JavaScript 文件更新到最新版本。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-20T18:24:20.027

我无法让我的工作（不知道发生了什么），但这是我让它看起来像这样的方式：

## HTML

```
<div id="myCarousel" class="carousel slide">
    <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="myCarousel-target active"></li>
        <li data-target="#myCarousel" data-slide-to="1" class="myCarousel-target"></li>
        <li data-target="#myCarousel" data-slide-to="2" class="myCarousel-target"></li>
    </ol>
    <!-- Carousel items -->
    <div class="carousel-inner">
        <div data-slide-no="0" class="item carousel-item active"><img src="http://dummyimage.com/960x500/fff/000" alt="Slide 1"></div>
        <div data-slide-no="1" class="item carousel-item"><img src="http://dummyimage.com/960x500/fff/000" alt="Slide 2"></div>
        <div data-slide-no="2" class="item carousel-item"><img src="http://dummyimage.com/960x500/fff/000" alt="Slide 3"></div>
    </div>
</div> 
```

## JavaScript

```
<script type="text/javascript">
    $(function() {
        $('#myCarousel').carousel({interval: 2000});
        $('#myCarousel').on('slid', function() {
            var to_slide = $('.carousel-item.active').attr('data-slide-no');
            $('.myCarousel-target.active').removeClass('active');
            $('.carousel-indicators [data-slide-to=' + to_slide + ']').addClass('active');
        });
        $('.myCarousel-target').on('click', function() {
            $('#myCarousel').carousel(parseInt($(this).attr('data-slide-to')));
            $('.myCarousel-target.active').removeClass('active');
            $(this).addClass('active');
        });
    });
</script> 
```

干杯!

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-25T13:10:55.257

这里是

```
<div id="myCarousel" class="carousel slide">
          <!-- Carousel items -->
          <ol class="carousel-indicators">
            <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
            <li data-target="#myCarousel" data-slide-to="1"></li>
          </ol>
          <div class="carousel-inner">
              <div id="0" class="item active">
                <img src="image/snow1.jpg" alt="">
                <div class="carousel-caption">
                  <h4>First Thumbnail label</h4>
                  <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
                </div>
              </div>
              <div id="1" class="item">
                <img src="image/snow2.jpg" alt="">
                <div class="carousel-caption">
                  <h4>Second Thumbnail label</h4>
                  <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
                </div>
              </div>
          </div> 
          <!-- Carousel nav -->

          <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
          <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>

    </div>
<script>
$(document).ready(function() {
  $('.carousel').carousel();
  $('.carousel').on('slid', function() {
    var to_slide = $('.carousel-inner .item.active').attr('id');
    $('.carousel-indicators').children().removeClass('active');
    $('.carousel-indicators [data-slide-to=' + to_slide + ']').addClass('active');
  });
});
</script> 
```

希望对你有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-11T17:49:24.790

我遇到了同样的问题，我只是通过从 /js 文件夹中删除 bootstrap-carousel.js 来解决它！

# javascript - 带有当前年份的 jQuery 日期选择器 - 10

> ID：14840800
> 
> 赞同：1
> 
> 时间：2013-02-12T20:04:42.067
> 
> 标签：javascript, jquery, datepicker

我有这样的jquery datepicker

```
 $birth.datepicker({
        onSelect: function(dateText, inst) { 
        $(this).parent().find("label#error").html("");
        $gender.focus();
    },
        yearRange: '1950:2006',
        changeMonth: true,
    changeYear: true,           
    showOtherMonths: true,          
    selectOtherMonths: true,
    dateFormat: 'yy-mm-dd',
        defaultDate: new Date(2006,01,01),
    }); 
```

我正在尝试修改此代码，以便将当前年份减去 10，如下所示

```
$birth.datepicker({
        var currentYear = new Date();
        onSelect: function(dateText, inst) { 
        $(this).parent().find("label#error").html("");
        $gender.focus();
    },
        yearRange: '1950:document.write(currentYear.getFullYear() - 10)',
        changeMonth: true,
    changeYear: true,           
    showOtherMonths: true,          
    selectOtherMonths: true,
    dateFormat: 'yy-mm-dd',
        defaultDate: new Date(2006,01,01),
    }); 
```

上面的代码不起作用，它破坏了我的日期选择器......有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T20:09:53.653

改变：

```
yearRange: '1950:document.write(currentYear.getFullYear() - 10)', 
```

至：

```
yearRange: '1950:-10', 
```

这会将 yearRange 从 1950 年设置为比当前年份少 10 年。

**[jsFiddle 示例](http://jsfiddle.net/j08691/6aaFb/)**

从yearRange 选项的[文档中：](http://api.jqueryui.com/datepicker/#option-yearRange)

> 年份下拉菜单中显示的年份范围：相对于今天的年份 ("-nn:+nn")、相对于当前选定的年份 ("c-nn:c+nn")、绝对年份 ("nnnn: nnnn") 或这些格式的组合 ("nnnn:-nn")。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T20:09:09.097

不，伙计，不。

`datepicker`在函数调用之外进行所有变量计算。

此代码**无法**运行。

用这个

```
var year = (new Date()).getFullYear() - 10 
```

在日期选择器初始化程序中

```
yearRange: "1950:" + year, 
```

这应该足够了

# vb.net - WebBrowser 忽略代码

> ID：14840803
> 
> 赞同：2
> 
> 时间：2013-02-12T20:04:51.267
> 
> 标签：vb.net, visual-studio-2010, webbrowser-control

我正在尝试在我的项目中使用 Mibbit irc，到目前为止运行良好，但是有一个缺陷。单击时粘贴在聊天中的链接将在 Internet Explorer 中打开，而不是在用户的默认 Web 浏览器中打开。我尝试实现一个简单的代码，但其中一半似乎被忽略了。

[http://i.stack.imgur.com/FKGGr.jpg](http://i.stack.imgur.com/FKGGr.jpg)

WebBrowser 组件启动页面：[http ://widget.mibbit.com/?settings=4abcd3a5f0bf25306d4c6d1968e28cb2&server=irc.mibbit.net&channel=%23Mytestchannel12345](http://widget.mibbit.com/?settings=4abcd3a5f0bf25306d4c6d1968e28cb2&server=irc.mibbit.net&channel=%23Mytestchannel12345)

忽略是否​​包含：mibbit.com（聊天widged）和ad4game.com（愚蠢的横幅......）如果包含，因为它放置了不同的横幅 - 因此，不同的链接。对于 widged 来说，它显然有几台服务器托管它，它会重定向到其中的一些服务器，如 widged1.mibbit.com、widged2.mibbit.com 等。

在默认用户浏览器中打开：全部，除了上面的 2 个。

```
Public Class Form1
Private Sub WebBrowser1_Navigating(ByVal sender As Object, ByVal e As System.Windows.Forms.WebBrowserNavigatingEventArgs) Handles WebBrowser1.Navigating
    Dim navTo As String = e.Url.ToString
    If Not (navTo.ToLower.Contains("mibbit.com") OrElse navTo.ToLower.Contains("ad4game.com") OrElse navTo.ToLower.Contains("about:blank")) Then
        e.Cancel = True
        System.Diagnostics.Process.Start(e.Url.ToString())
    End If
End Sub
End Class 
```

到目前为止没有任何工作...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T02:52:06.180

好的，我已经更新了您的代码示例：

添加一个新函数来找出默认浏览器的路径是什么：

```
Public Class Form1
Private Sub WebBrowser1_Navigating(ByVal sender As Object, ByVal e As System.Windows.Forms.WebBrowserNavigatingEventArgs) Handles WebBrowser1.Navigating
    Dim navTo As String = e.Url.ToString
    If Not (navTo.ToLower.Contains("mibbit.com") OrElse navTo.ToLower.Contains("ad4game.com") OrElse navTo.ToLower.Contains("about:blank")) Then
        e.Cancel = True
        System.Diagnostics.Process.Start(GetDefaultBrowserPath, e.Url.ToString())
    End If
End Sub

' get the default folder path from the registry
Public Function GetDefaultBrowserPath() As String
    Dim defaultbrowser As String = My.Computer.Registry.GetValue("HKEY_CLASSES_ROOT\HTTP\shell\open\command", "", "Not Found")
    Return Split(defaultbrowser, """")(1)
End Function

End Class 
```

# android - 如何获取对最近访问活动的引用

> ID：14840804
> 
> 赞同：2
> 
> 时间：2013-02-12T20:04:55.577
> 
> 标签：android, android-activity

我正在创建一个需要多个活动的简单应用程序。我的应用程序有必要根据某个系统偏好恢复两个活动之一。因此，我实现了一个`Dispatcher`链接到 的类`action.MAIN`，然后`Activity`通过检查其`onResume()`回调中的系统首选项来正确启动该类。

## 问题

由于我在 中执行此`onResume()`操作，因此当在任何结果活动上按下后退按钮时，将`Dispatcher`恢复，因此它再次尝试再次启动相同的操作`Activity`。这可以防止用户离开应用程序，除非他们按下主页按钮。

## 一些代码

以下是我的课程中的一些代码摘录，以帮助澄清我的情况：

*Dispatcher.onResume(void) : 无效*

```
protected void onResume() {

    super.onResume();

    if(!handled){

        Intent activity_switcher;

        //If a game is active...
        if(manager.isGameActive()){

            //Start the the Game Manager with the appropriate game.
            activity_switcher = new Intent(this, GameManager.class);
        }
        //If a game is not active... 
        else{

            //Start the Game Menu
            activity_switcher = new Intent(this, Menu.class);
        }

        //Start the appropriate activity
        startActivity(activity_switcher);
        overridePendingTransition(0, 0);
    }
    else{

        //Finish the application
        finish();
        overridePendingTransition(0, 0);
    }
} 
```

一些变量如下：

*   `manager`是代表我的类与系统首选项接口的变量。
*   `handled`是确定事件是否已被处理的变量（请参阅下面的“尝试的解决方案 #1”）

## 尝试的解决方案#1

我考虑过实现一个布尔类变量 ，`handled`在活动开始之前对其进行测试。如果发现值为`true`，则`Dispatcher`simple 调用`finish()`，但如果值为`false`，则启动适当的活动并将`handled`其设置为，`true`以便当应用程序返回 this`Activity`时，它将简单地完成。

*这行不通，因为...*

如果用户在结果活动之一上按下主页按钮，那么当他们恢复应用程序时，它们将被放置在调度程序活动上，并且应用程序将立即完成，因为它认为它已被处理（变量仍然为真） .

## 尝试的解决方案#2

我试图找到某种方法，让`Dispatcher`每个应用程序生命周期只运行一次。这是有道理的，因为用户永远不会想要返回到它，`Dispatcher`因为它`Activity`应该只在启动时运行一次。因此，我包含了一个计数器，每次调用 onResume() 时都会递增，每次调用 finish() 时都会减少到 0。

*这行不通，因为...*

同样，如果用户按下主页按钮，那么当应用程序重新启动时，`Dispatcher`会**认为**它已经运行过一次（因为没有调用`finish()`），并且会立即再次运行。

## 尝试的解决方案#3

我想如果我能以某种方式确定哪个活动以前是活动的，那么我可以动态地对用户按下后退按钮的情况做出反应，然后*才*通知`Dispatcher`它应该完成，那么就不会立即完成用户按下主页按钮的情况。

这是通过使用一个静态函数来完成的`returningFromMenu()`，当从 menu 调用该函数时`Activity`，会在类中引发一个标志`Dispatcher`，通知它完成。

## 尝试的解决方案 #4（当前实施）

只需将所有这些活动切换代码移动到 onCreate() 中。这将强制执行`Dispatcher`.

*这可能会奏效，因为...*

这将处理用户返回活动的情况（使用 onResume()），并且由于没有标志，因此在按下主页按钮后返回应用程序时没有问题。

* * *

## 我的问题

`Activity`除了必须使用静态方法或成员之外，还有什么方法可以确定最后完成的？我知道这是一种非常糟糕的做法，如果可能的话，我想避免它。

## 更新

*最后更新时间：美国东部标准时间 2013 年 2 月 12 日下午 3:45*

方法 #4 似乎对我的目的有效，但是我仍然认为这里的问题可能对开发人员很有用，并且在我有足够的时间发布更全面的解决方案之前，我不会回答我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:31:31.190

## 解决方案

正如上面“更新”中所述，只需将代码移入即可解决此问题，`onCreate()`以便只进行一次切换。等效地，我可以简单地`finish()`在启动活动后立即进行调用，以便从后台堆栈中删除调用活动。

感谢大家在评论区的努力！

# javascript - CoffeeScript、原型继承和构造函数

> ID：14840807
> 
> 赞同：3
> 
> 时间：2013-02-12T20:05:10.890
> 
> 标签：javascript, constructor, coffeescript, prototype

在 CoffeeScript 中，当您实例化子类时，似乎没有调用超类构造函数。

有没有解决的办法？

这是一个例子：

```
class A
    element = null

    constructor: ->
        element = document.createElement "div"

    hide: =>
        element.style.display = "none"

class B extends A
    constructor: ->
        @hide() #error! 
```

我希望`A`首先调用构造函数，然后调用`B`构造函数。如果`B`then 调用该`hide`方法，它应该隐藏在 的构造函数中创建的元素，`A`而不是说它`element`为 null。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T20:15:33.730

我认为您需要在子类中调用 super

```
class A
    element = null

    constructor: ->
        element = document.createElement "div"

    hide: =>
        element.style.display = "none"

class B extends A
    constructor: ->
        super
        @hide() #error! 
```

# mysql - SQL 和 MySQL 有什么区别？

> ID：14840808
> 
> 赞同：156
> 
> 时间：2013-02-12T20:05:13.713
> 
> 标签：mysql, sql, database

*我是数据库新手，我想知道： SQL*和*MySQL*有什么区别？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-02-12T20:07:56.633

[SQL](http://en.wikipedia.org/wiki/SQL) - 结构化查询语言。它是一种旨在查询[关系数据库](http://en.wikipedia.org/wiki/Relational_database_management_system)的声明性计算机语言。

[MySQL](http://www.mysql.com/)是一种关系型数据库——一种针对数据存储和检索进行了优化的软件。有许多这样的数据库——Oracle、Microsoft SQL Server、SQLite 和许多其他数据库就是这样的例子。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2013-02-12T20:14:27.460

SQL 是结构化查询语言

MySQL 是一种关系型数据库管理系统。您可以向 MySQL 数据库提交 SQL 查询以存储、检索、修改或删除数据。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2013-02-12T20:09:11.633

SQL 代表结构化查询语言，是所有关系数据库管理系统允许用户添加、删除、更新或选择记录的基础。MySQ 之类的东西是实际的管理系统，允许您存储和检索数据，而 SQL 是执行此操作的实际语言。

基本的 SQL 在某种程度上是通用的 - 选择通常看起来相同，插入、更新、删除等。一旦你超越了基础，你的个人数据库的命令和能力就会有所不同，这就是你找到 Oracle 专家的地方， MySQL、SQL Server 等

基本上，MySQL 是包含所有内容的众多书籍之一，而 SQL 是您阅读这本书的方式。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2013-02-12T20:13:06.513

SQL 是由 ISO 和 ANSI 定义的实际语言。[这](http://en.wikipedia.org/wiki/SQL:2011)是维基百科文章的链接。MySQL 是该标准的具体实现。我相信甲骨文收购了最初开发 MySQL 的公司。其他公司也有自己的 SQL 标准实现。

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2013-02-12T20:11:19.903

SQL 代表结构化查询语言，它是一种设计用于从数据库中查询数据的编程语言。MySQL 是一个关系数据库管理系统，这是一个完全不同的东西。

MySQL 是一个使用 SQL 的开源平台，就像 MSSQL 一样，MSSQL 是使用 SQL 进行数据库管理的微软产品（非开源）。

# perl - perl Tie::File 删除文本文件中的行

> ID：14840812
> 
> 赞同：1
> 
> 时间：2013-02-12T20:05:21.780
> 
> 标签：perl

我有以下代码可以从我正在使用的文本文件中删除行。但是，它实际上并没有删除我想要的行。我在这里做了很多测试，并确认如果我得到正确的行号，它将删除这些行。但是，这`$.`似乎是在复制实际的行号（当我在上面打印时，它说实际行数是原来的两倍！）

```
#!/usr/bin/perl
# find_company_codes.pl

use strict;
use warnings;
use diagnostics;

use Tie::File;

my $split_file = "//server/folder/splits_table.txt";

# remove fields where only MAS has rollcall
my @file;
my @lines;

tie @file, 'Tie::File', $split_file or die $_;

foreach (@file) {

    @lines = split(",",$_);

    next if $lines[0] eq "ESDB Link Processing Reg-Prd-CCD";
    next if $lines[2] ne "";
    next if $lines[3] ne "";
    next if $lines[4] ne "";
    next if $lines[5] ne "";
    next if $lines[6] ne "";

    splice(@file, $.,1);

}

untie @file; 
```

ps - 我知道我可以使用[它](http://perldoc.perl.org/perlfaq5.html#How-do-I-change%2c-delete%2c-or-insert-a-line-in-a-file%2c-or-append-to-the-beginning-of-a-file%3f)，但是，我认为在这种情况下使用 'Tie::File` 会更直接一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T20:35:47.850

您不是从文件中读取，而是在遍历数组。`$.`没有意义。首先，我们需要切换到索引。

```
for (0..$#file) {
    my @fields = split(/,/, $file[$_]);

    next if $fields[0] eq "ESDB Link Processing Reg-Prd-CCD";
    next if $fields[2] ne "";
    next if $fields[3] ne "";
    next if $fields[4] ne "";
    next if $fields[5] ne "";
    next if $fields[6] ne "";

    splice(@file, $_, 1);
} 
```

除了那也行不通。拼接的时候，整个数组都是移位的，所以千万不能提前那个转的索引，需要尽快完成循环一个索引。使固定：

```
my $i = 0;
while ($i < $#file) {
    my @fields = split(/,/, $file[$i]);

    if (   $fields[0] ne "ESDB Link Processing Reg-Prd-CCD"
        && $fields[2] eq ""
        && $fields[3] eq ""
        && $fields[4] eq ""
        && $fields[5] eq ""
        && $fields[6] eq ""
    ) {
        splice(@file, $i, 1);
    } else {
        ++$i;
    }
} 
```

很好，这行得通，但速度太慢了。每个`splice`都可能导致文件的其余部分被读取和重写。又一次不当使用 Tie::File！以下将非常快。

```
use strict;
use warnings;

my $qfn = "//rosefs19w/sal...";

my @file;
{
    open(my $fh, '<', $qfn)
        or die("Can't open $qfn: $!\n");
    @file = <$fh>;
}

my $i = 0;
while ($i < $#file) {
    my @fields = split(/,/, $file[$i]);

    if (   $fields[0] ne "ESDB Link Processing Reg-Prd-CCD"
        && $fields[2] eq ""
        && $fields[3] eq ""
        && $fields[4] eq ""
        && $fields[5] eq ""
        && $fields[6] eq ""
    ) {
        splice(@file, $i, 1);
    } else {
        ++$i;
    }
}

{
    open(my $fh, '>', $qfn)
        or die("Can't create $qfn: $!\n");
    print $fh @file;
} 
```

这是正确的。添加额外的 3 行代码并删除 2 行，您的代码将变得快 100、1000、10000 倍！

# php - 在文件更新时触发 php

> ID：14840818
> 
> 赞同：0
> 
> 时间：2013-02-12T20:05:31.640
> 
> 标签：php, apache, webserver, lamp

每次创建或更新 web 目录 (lamp) 中的 (html) 文件时，如何触发 PHP 文件运行？

**细节**

静态 html 页面通过 CMS 推送到 Web 服务器。每次发生这种情况时，我都想触发一个 php 文件（删除 html 页面的缓存图像文件夹并重建它）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:32:55.887

如果您的 CMS 是启动这些文件传输的控制实例，那么最好将缓存清除功能实现为 CMS 本身内的插件/加载项。如果这不是一个选项，那么定期检查更新并采取相应行动的 cronjob 将是一个替代方案。

# macos - 静态编译 OS X 10.6.8 的 cURL

> ID：14840822
> 
> 赞同：1
> 
> 时间：2013-02-12T20:05:39.843
> 
> 标签：macos, curl, command-line, compilation

我想在 XCode 3.2.6 项目中使用 SSL 链接到 cURL。

我下载了 cURL-7.29.0 并解压

我做了：

`CFLAGS="-arch i386" ./configure --with-ssl=tmp/openssl/ --disable-shared --enable-static`

`make`

没有错误，一切似乎都很好，但是我`.a`在任何地方都看不到文件。甚至没有在`lib/`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:20:18.690

在您点击 之前`make install`，实际编译的二进制文件（嗯，更确切地说是存档）由配置系统保存在一个隐藏位置：它位于`lib/.libs/libcurl.a`.

# mongodb - 多个文档更新 mongodb casbah scala

> ID：14840830
> 
> 赞同：1
> 
> 时间：2013-02-12T20:05:57.130
> 
> 标签：mongodb, scala, casbah, salat, mongodb-scala

我有两个 MongoDB 集合

促销合集：

```
{
    "_id" : ObjectId("5115bedc195dcf55d8740f1e"),
    "curr" : "USD",
    "desc" : "durable bags.",
    "endDt" : "2012-08-29T16:04:34-04:00",
     origPrice" : 1050.99,
    "qtTotal" : 50,
    "qtClaimd" : 30,
} 
```

声称的集合：

```
{
    "_id" : ObjectId("5117c749195d62a666171968"),
    "proId" : ObjectId("5115bedc195dcf55d8740f1e"),
    "claimT" : ISODate("2013-02-10T16:14:01.921Z")

} 
```

每当有人要求促销时，都会在“claimedPro”集合中创建一个新文档，其中 proId 是第一个（促销）集合的（虚拟）外键。每个声明都应在“promo”集合中增加一个计数器“qtClaimd”。以事务方式增加另一个集合中的值的最佳方法是什么？我了解 MongoDB 没有针对多个文档的隔离。

另外，我采用“非嵌入式”方法的原因如下

促销被创建并发布给用户，然后索赔将以成千上万的数量发生。我认为将声明嵌入促销集合中是不合逻辑的，因为写入的数量将发生在单个文档中（'coz mongo 在大小因数千个声明而增加时调整促销集合的大小）。采用非嵌入式方法使促销集合不受影响，但在“声明”集合中插入新文档。稍后在生成报告时，我必须显示“促销”详细信息以及该促销的“声明”详细信息。使用非嵌入式方法，我必须首先查询“promo”集合，然后使用“proId”查询“claims”集合。****还值得一提的是，有时可能会有 100 次“索赔”***

用这两个集合实现交易效果的最佳方法是什么？我在 Scala 2.10 版本中使用 Scala、Casbah 和 Salat。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T02:35:10.833

```
db.bar.update({ id: 1 }, { $inc: { 'some.counter': 1 } }); 
```

看看如何使用 SalatDAO 运行它，我不是游戏用户，所以我不想给你错误的建议。`$inc`是 Mongo 的增量方式。

# ubuntu - openCV 2.1.0 安装 + ffmpeg + 错误

> ID：14840835
> 
> 赞同：0
> 
> 时间：2013-02-12T20:06:10.723
> 
> 标签：ubuntu, opencv, ffmpeg

我想安装 OpenCV 2.1.0（在 Ubuntu 11.10 上），但是在 make 之后（我在 make 之前的步骤：http: [//www.doc.ic.ac.uk/~strasdat/rss2010videos/INSTALL.txt](http://www.doc.ic.ac.uk/~strasdat/rss2010videos/INSTALL.txt)）我得到：

```
[ 45%] Built target opencv_lapack
[ 45%] Built target cxcore_pch_dephelp
[ 45%] Built target pch_Generate_cxcore
[ 45%] Built target flann
[ 47%] Built target zlib
[ 50%] Built target cxcore
[ 50%] Built target cv_pch_dephelp
[ 51%] Built target pch_Generate_cv
[ 61%] Built target cv
[ 61%] Built target highgui_pch_dephelp
[ 61%] Built target pch_Generate_highgui
[ 61%] Building CXX object src/highgui/CMakeFiles/highgui.dir/cvcap_ffmpeg.o
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp: In member function ‘virtual void CvCapture_FFMPEG::close()’:
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:403:9: warning: ‘void av_close_input_file(AVFormatContext*)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1687) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:403:31: warning: ‘void av_close_input_file(AVFormatContext*)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1687) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp: In member function ‘bool CvCapture_FFMPEG::reopen()’:
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:432:5: warning: ‘void av_close_input_file(AVFormatContext*)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1687) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:432:27: warning: ‘void av_close_input_file(AVFormatContext*)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1687) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:435:52: error: ‘av_open_input_file’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:436:5: warning: ‘int av_find_stream_info(AVFormatContext*)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1511) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:436:27: warning: ‘int av_find_stream_info(AVFormatContext*)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1511) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:443:5: warning: ‘int avcodec_open(AVCodecContext*, AVCodec*)’ is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3681) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:443:28: warning: ‘int avcodec_open(AVCodecContext*, AVCodec*)’ is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3681) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp: In member function ‘virtual bool CvCapture_FFMPEG::open(const char*)’:
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:468:63: error: ‘av_open_input_file’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:473:11: warning: ‘int av_find_stream_info(AVFormatContext*)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1511) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:473:33: warning: ‘int av_find_stream_info(AVFormatContext*)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1511) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:488:13: warning: ‘int avcodec_open(AVCodecContext*, AVCodec*)’ is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3681) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:488:36: warning: ‘int avcodec_open(AVCodecContext*, AVCodec*)’ is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3681) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp: In member function ‘virtual bool CvCapture_FFMPEG::grabFrame()’:
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:566:54: error: ‘avcodec_decode_video’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp: In function ‘const char* icvFFMPEGErrStr(int)’:
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:819:10: error: ‘AVERROR_NUMEXPECTED’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:823:10: error: ‘AVERROR_NOFMT’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:825:10: error: ‘AVERROR_IO’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:827:10: error: ‘AVERROR_NOMEM’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp: In function ‘AVStream* icv_add_video_stream_FFMPEG(AVFormatContext*, AVCodecID, int, int, int, double, int)’:
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:899:7: warning: ‘AVStream* av_new_stream(AVFormatContext*, int)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1711) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:899:26: warning: ‘AVStream* av_new_stream(AVFormatContext*, int)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1711) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp: In function ‘int icv_av_write_frame_FFMPEG(AVFormatContext*, AVStream*, uint8_t*, uint32_t, AVFrame*)’:
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1011:22: error: ‘PKT_FLAG_KEY’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1019:20: warning: ‘int avcodec_encode_video(AVCodecContext*, uint8_t*, int, const AVFrame*)’ is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:4388) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1019:72: warning: ‘int avcodec_encode_video(AVCodecContext*, uint8_t*, int, const AVFrame*)’ is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:4388) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1031:30: error: ‘PKT_FLAG_KEY’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp: In member function ‘virtual void CvVideoWriter_FFMPEG::close()’:
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1195:20: error: ‘url_fclose’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp: In member function ‘virtual bool CvVideoWriter_FFMPEG::open(const char*, int, double, CvSize, bool)’:
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1228:41: error: ‘guess_format’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1251:31: error: ‘av_alloc_format_context’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1292:35: error: ‘av_set_parameters’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1296:35: error: ‘dump_format’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1321:15: warning: ‘int avcodec_open(AVCodecContext*, AVCodec*)’ is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3681) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1321:36: warning: ‘int avcodec_open(AVCodecContext*, AVCodec*)’ is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3681) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1358:42: error: ‘URL_WRONLY’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1358:52: error: ‘url_fopen’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1364:25: error: ‘av_write_header’ was not declared in this scope
make[2]: *** [src/highgui/CMakeFiles/highgui.dir/cvcap_ffmpeg.o] Chyba 1
make[1]: *** [src/highgui/CMakeFiles/highgui.dir/all] Chyba 2
make: *** [all] Chyba 2 
```

我在 cvcap_ffmpeg.cpp 文件中添加了这个：

```
#ifndef UINT64_C
#define UINT64_C(c) (c ## ULL)
#endif

#if LIBAVCODEC_VERSION_MAJOR < 53
#define CodecType AVMediaType

#define CODEC_TYPE_UNKNOWN    AVMEDIA_TYPE_UNKNOWN
#define CODEC_TYPE_VIDEO      AVMEDIA_TYPE_VIDEO
#define CODEC_TYPE_AUDIO      AVMEDIA_TYPE_AUDIO
#define CODEC_TYPE_DATA       AVMEDIA_TYPE_DATA
#define CODEC_TYPE_SUBTITLE   AVMEDIA_TYPE_SUBTITLE
#define CODEC_TYPE_ATTACHMENT AVMEDIA_TYPE_ATTACHMENT
#define CODEC_TYPE_NB         AVMEDIA_TYPE_NB
#endif 
```

它解决了之前的一些问题。

我尝试像这里一样安装 ffmpeg -> [https://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide](https://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide)，但它没有改变。有人可以帮我解决这些错误吗？

感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:52:29.800

我从 [https://code.ros.org/trac/opencv/ticket/1020](https://code.ros.org/trac/opencv/ticket/1020)得到了答案 试试这两个补丁

# oauth - Clojure - oauth 凭据和签名

> ID：14840836
> 
> 赞同：1
> 
> 时间：2013-02-12T20:06:17.583
> 
> 标签：oauth, clojure, flickr

我正在尝试实现 oauth (clj-oauth [https://github.com/mattrepl/clj-oauth](https://github.com/mattrepl/clj-oauth) ) 以与 flickr API 一起使用。

我已经有了访问令牌，只需要凭据，但在这里我卡住了。

我的代码如下所示：

```
(def credentials (oauth/credentials consumer
                                    (:oauth_token access-token-response)
                                    (:oauth_token_secret access-token-response)
                                    :GET
                                    "http://api.flickr.com/services/rest/..."
                                    {:status "??"))) 
```

我需要调用的网址是：

```
 http://api.flickr.com/services/rest/?method=flickr.photosets.getList&api_key=3c2cfaf22751d55db9e0a4d02be254d7&user_id=92219076%40N07&format=json&nojsoncallback=1&auth_token=72987632743515342-8c99972fdac0b886&api_sig=cca1c874268986779d229f72ab65ee5a 
```

但是上面的例子对我来说不是很清楚，这是什么：status？:status 会被翻译成 /?status="..." 吗？

第二个问题是……我在哪里可以找到 api_sig？它应该由 oauth/make-consumer 生成吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T20:33:55.313

对于第一部分，请查看我对类似问题的回答[。](https://stackoverflow.com/a/19058500/683965)

`api_sig`是 Flickr 旧的、现已弃用的非 oauth 身份验证的一部分。

# d3.js - 为什么只附加了 3 段？

> ID：14840838
> 
> 赞同：0
> 
> 时间：2013-02-12T20:06:22.997
> 
> 标签：d3.js

我是d3的初学者。我读到，当将一个包含 $n$ 个实体的数据集绑定到一个元素，调用 enter，然后执行操作时，这些操作将执行 $n$ 次。

但是，在这里，即使我的数据集的大小为 4，我的段落也只附加了 3 次：http: [//jsfiddle.net/johnhoffman/tYr5U/](http://jsfiddle.net/johnhoffman/tYr5U/)

```
d3.select("body").data([1, 2, 3, 4]).enter().append("p").text("g"); 
```

输出：

```
g
g
g 
```

为什么只有3次？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T20:41:03.870

这是我怀疑您要使用的代码。

```
d3.select("body").selectAll("p").data([1,2,3,4]).enter().append("p").text("g"); 
```

连接应该使用“p”元素，而不是“body”元素。

至于为什么它在你的例子中有三个：

数据有四个元素，绑定到单个“body”元素。默认情况下，第一个元素 1 绑定到现有正文（在 HTML 中定义）。其余 3 个元素绑定到不存在的“body”元素。由于“enter()”只对不存在的元素调用，追加操作在 DOM 的根上被调用了 3 次。

为了证明这一点，请尝试：

```
d3.select("body").data([1,2,3,4]).enter().append("p").text(function(d) {return d;}); 
```

您将看到附加数据中的数字，而不是 g。

令人困惑，但[Circles 教程](http://mbostock.github.com/d3/tutorial/circle.html)帮助我理解了这一点。

# css - 媒体查询不能在 iPhone 或 Android 上运行，也不能在桌面上完全运行

> ID：14840840
> 
> 赞同：1
> 
> 时间：2013-02-12T20:06:25.930
> 
> 标签：css, mobile, responsive-design, media

我正在尝试设计一个网站，该网站将根据用户的设备响应地显示桌面版本或移动版本。我更喜欢使用响应式 CSS 而不是移动重定向。

有问题的网站是[http://www.raceweekend.com](http://www.raceweekend.com)。当浏览器窗口调整为移动宽度时，应该会发生以下情况：

1.  水平菜单应在红色矩形块中变为垂直
2.  旋转的图像应该消失
3.  徽标应位于顶部居中
4.  日期（徽标旁边）应该消失

CSS 在 IE9 和 Firefox 中的行为完全符合我的要求。当我将窗口调整为足够窄时，上述所有项目都会发生。

在移动设备上，它只显示常规浏览器版本；上述情况均未发生。我在 iPhone 4 和三星 Galaxy Nexus 上进行了测试。

这是我的媒体查询代码：

```
@media handheld, screen and (max-width: 480px) {
#nav-bar {
    display:none;
}

#header {
    height:auto !important;
    width:100% !important;
}

#nav {
    height:auto !important;
}

.main-nav li {
    float:none !important;
    clear:both;
    background-color:#cf171f;
    margin-bottom:1px !important;
    padding:0 !important;
}

.main-nav li a{
    display:block;
    padding:10px 18px;
}

.main-nav li a:hover{
    background-color:#be161d;
    color:#ffffff !important;
}

#date {
    display:none;
}

#race-logo {
    width: 100% !important;
}

.center {
    margin: 0px auto;
    display: block;
}

#content, #content-sliders {
    margin-left:5% !important;
    width: 90% !important;
    padding-top:20px !important;
}

#footer {
    font-size:14px !important;
    line-height:1.5em;
}

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T20:34:50.537

尝试使用元标记来强制移动浏览器报告它的实际宽度：

```
<meta name="viewport" content="width=device-width" /> 
```

如果您有适当的响应式设计，您也可以禁用缩放：

```
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T21:21:40.787

您需要将视口`meta`标签添加到您的 HTML：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0" /> 
```

默认情况下，iPhone 实际上会将站点渲染[为视口为 980px 宽](http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/quick-tip-dont-forget-the-viewport-meta-tag/)，然后将其缩小以适合其实际宽度。这是因为 iPhone 的真实视口宽度是 480 像素（iPhone 3GS 或更早版本上的字面值 480 像素，或者双分辨率 iPhone 4 视网膜显示器上的“逻辑”480 像素），所以如果它不这样做，你d 只能看到您访问的每个站点的 480 像素宽的切片。

迷茫了吗？例如，在桌面浏览器上访问 NYTimes.com，然后将窗口大小调整为 480 像素宽。如果默认情况下没有将其视口宽度报告为 980 像素，这就是该网站在 iPhone 上呈现的方式。

无论如何，这就是您的媒体查询不起作用的原因。因此，添加上述`meta`标签将告诉 iPhone 将其宽度报告为其实际宽度（480 像素），然后将匹配您的媒体查询中的条件。

# authentication - 使用 Swiftmailer 通过 SMTP 传输进行身份验证

> ID：14840842
> 
> 赞同：0
> 
> 时间：2013-02-12T20:06:28.453
> 
> 标签：authentication, yii, smtp, swiftmailer

我正在使用 Swiftmailer 在基于 Yii 的应用程序中发送电子邮件，它运行良好，因此 Swiftmailer 扩展包装器没有问题。但是现在我想使用 SMPT 传输来针对邮件服务器对我的应用程序中的用户进行身份验证。我正在使用的代码：

```
$SM = Yii::app()->swiftMailer;

$mailHost = 'XXX'; 
$mailPort = XXX;

// New transport
$transport = $SM->smtpTransport($mailHost, $mailPort);

$transport->setUsername($username);
$transport->setPassword($password);
$transport->start();

if($transport->isStarted()){
    // authenticated;    
}else{
    // error;
}

$transport->stop(); 
```

这是行不通的。当我设置真实的登录凭据时立即登录。但是当我输入错误的凭据时，它会花费一些时间，但最后它也登录了。我不知道为什么会发生这种情况，因为只有在使用真实凭据时 Swiftmailer 才能发送电子邮件。我使用了正确的 API 函数？我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:13:24.850

查看[源代码](https://github.com/swiftmailer/swiftmailer/blob/master/lib/classes/Swift/Transport/AbstractSmtpTransport.php)，当您调用时`start()`，started 始终设置为 True。

我对 switfmailer 不熟悉，但看起来您需要检查 authenticate() 的结果

# vb.net - Visual Basic 中 MsgBox 的粗体字

> ID：14840843
> 
> 赞同：2
> 
> 时间：2013-02-12T20:06:28.847
> 
> 标签：vb.net

如何在 Visual Basic 2008 的 MessageBox 中使字体加粗？

我想要这样：

```
MsgBox(Documentation: .........) 
```

其中“文档”将以粗体显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T20:42:14.013

正如 aphoria 所说，VB 的 MsgBox 不允许粗体文本。以下是您解决此问题的方法：

1) 添加“新 Windows 窗体” 2) 添加 RichTextBox 3) 添加您想要/需要的命令按钮数 4) 转到表单的代码并执行以下操作

```
Public Sub CustomMessageBox(ByVal msg As String, ByVal isBold As Boolean, ByVal color As System.Drawing.Color, ByVal buttonOneText As String, ByVal buttonTwoText As String, ByVal startBoldAt As Integer = 0, ByVal endBoldAt As Integer = 0)
 ' Use parameters to pass the values you want to show
 ' startBoldAt will be the position in the string where you want to have bold lettering begin, and endBoldAt will be the position in the string where you want bold lettering to end.
End Sub

Then you can do:  
Dim cmb as CustomMessageBox = New CustomMessageBox('Your parameters)
' Add a sub that will let you show the CustomMessageBox
cmb.Show() 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T20:10:22.017

内置`MsgBox`函数无法做到这一点。如果你真的需要它，你将不得不建立自己的。

# javascript - $("selection") 和 $("selection", $(this)) 有什么区别

> ID：14840848
> 
> 赞同：3
> 
> 时间：2013-02-12T20:06:40.857
> 
> 标签：javascript, jquery, anonymous-function

我已经看到了 $(this) 的使用并在函数中有所了解，但也曾在选择器中看到过，但无法理解它何时或是否有价值。这是我可以使用并开始工作的两个示例，但是我真的在做任何有价值的事情吗...

在这里，我在选择器中添加了 $(this)

```
(function($) {
    $(".deliver").on('mouseenter',function(){
        $(this).css({'width':'600px'});
        $(".form_jquery",$(this)).fadeIn(1000).css({'display':'block'});
        $(".componentheading",$(this)).css({'display':'none'});
    }); ... 
```

这是我的原始脚本

```
(function($) {
    $(".deliver").on('mouseenter',function(){
        $(this).css({'width':'600px'});
        $(".form_jquery").fadeIn(1000).css({'display':'block'});
        $(".componentheading").css({'display':'none'});
    }); 
```

我在两者中都保留了我所知道的 (this) 的标准用法，并指出我在匿名函数中使用以防万一。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T20:07:44.920

```
$(".componentheading",$(this)) 
```

仅搜索`.componentheading`当前元素下的`$(this)`元素（在这种特殊情况下，它是`.deliver`您输入鼠标的元素）而

```
$(".componentheading") 
```

在整个文档中搜索它们。

[http://api.jquery.com/jQuery/#jQuery1](http://api.jquery.com/jQuery/#jQuery1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T20:10:30.547

为 jQuery 函数提供第二个参数可以缩小选择的范围。默认情况下，上下文是整个文档。

在`$(this)`用作上下文的情况下，您只需要在触发处理程序的元素*内*`form_jquery`查找具有或`componentheading`类的元素。*`mouseenter`*

 *提供一个上下文来缩小选择器搜索范围是提高选择器性能的好方法，只要您知道您正在寻找的元素确实可以在该上下文中找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T20:12:20.073

```
$( selector, context ) 
```

jQuery 的实际功能如下所示`jQuery( selector, context )`，如果您为上下文值提供一个元素，当 jQuery 尝试访问`jQuery.find`您的元素时，它将从您提供的元素开始。

在许多情况下，这可以提高性能！

[**阅读有关 jQuery 上下文的信息**](http://api.jquery.com/context/)

为了向 jQuery 函数提供元素，很多人使用一种称为[DOM 缓存](http://misteroneill.com/journal/jquery-dom-cache/)的方法，您将元素存储在变量中并将其作为引用上下文传递给 jQuery 函数。*

# c - 更改结构中定义的 int 值

> ID：14840850
> 
> 赞同：1
> 
> 时间：2013-02-12T20:06:42.670
> 
> 标签：c, struct, callback, gtk

我定义了一个带有 int n 的结构 Board，它的值是一个小整数。在此方法被 gtk 信号“clicked”调用之前，board->n 具有正确的值。然而，当调用这个函数时，第一个 printf 语句打印出的 n 的值是一个非常大的 32665。

```
draw_token (GtkButton *button, cairo_t *cr, Board *board){

 printf("n: %d\n", board->n);

 printf("button clicked\n");

  //parse label of a button into the corresponding column number         
  guint col = (int)strtol(gtk_button_get_label(button), NULL, 0);

  if (make_move(board, col) == false){
    printf("draw cairo\n");
  }
} 
```

结构：

```
typedef struct board Board;
struct board{
  int k;
  int n;
  char *moves;
  int player;
}; 
```

回调所在的函数：

```
void gui_make_buttons(GtkWidget *box, Board *board){

  guint n = board->n;
  for (int i = 1 ; i <= n ; i++){
    GtkWidget *button = gtk_button_new();
    //make label for button                                              
    char label[3];
    sprintf(label, "%d", i-1);

    gtk_button_set_label((GtkButton*)button,label);

    //    gtk_widget_show(button);                                       
    gtk_container_add(GTK_CONTAINER(box), button);
    g_signal_connect(button, "clicked",G_CALLBACK(gui_draw_token), board);
  }
} 
```

有人可以向我解释为什么每次单击按钮时 n 的值都会更改为像 36751 这样的大值？非常感谢你

带有 main gui.c 的完整代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <gtk/gtk.h>
#include <stdbool.h>
#include "gui.h"
#include "board.h"
#include "connect.h"

gboolean draw_board (GtkWidget *widget, cairo_t *cr, gpointer board){

   guint width, height;

   width = gtk_widget_get_allocated_width (widget);
   height = gtk_widget_get_allocated_height (widget);

   guint row = height/((Board*)board)->n;
   guint col = width/((Board*)board)->n;
    printf("%d\n", row);
    printf("%d\n", col);
  //  cairo_set_source_rgb (cr, 100, 100, 255);
  //  cairo_paint (cr);

   cairo_set_source_rgb(cr, 0, 0, 255);
   for (int i = 1; i < ((Board*)board)->n ; i++){
     //draw horizontal grids;
     cairo_move_to (cr, 0, row*i);
     cairo_line_to (cr, width, row*i);
     //draw vertical grids;
     cairo_move_to (cr, col*i, 0);
     cairo_line_to (cr, col*i, height);
   }
   //   cairo_arc (cr, 100, 100, 50, 0, 2 * G_PI);

   // cairo_move_to (cr, 30, 30);
   // cairo_line_to (cr, 50, 50);
    cairo_stroke (cr);
   return false;
}

int main (int argc, char *argv[]){

    //check for correct number of arguments.                                    
  if (!check_argument(argc, argv))
    return EXIT_FAILURE;

  int k = strtol(argv[1], NULL, 0);
  int n = strtol(argv[2], NULL, 0);

  play_game(k, n);

  return EXIT_SUCCESS;
}

//show widgets and get gtk going                                       
CGUI *gui_start_gtk(Board *board){

  //assigns board to the gui struct at beginning of game
  CGUI *gui = make_gui (board);
  //  gtk_widget_queue_draw (gui->drawing_area);
// gui_draw_init_board(gui);
  gtk_widget_show_all (gui->window);
  gtk_main ();
  return gui;
}
/*
void gui_draw_init_board(GtkWidget *widget, cairo_t *cr, CGUI *gui){
  printf("HI\n");
  if (gui) {
    guint k = gui->board->k;
    guint n = gui->board->n;
    printf("%d\n", k);
  }
}
*/

void gui_make_buttons(GtkWidget *box, Board *board){

  //  guint n = board->n;
  for (int i = 1 ; i <= (board->n) ; i++){
    GtkWidget *button = gtk_button_new();
    //make label for button
    char label[3];
    //      sprintf(label, "%d", i-1);
       sprintf(label, "%d", i-1);
    gtk_button_set_label((GtkButton*)button,label); 

    //    gtk_widget_show(button);
    gtk_container_add(GTK_CONTAINER(box), button);
    g_signal_connect(button, "clicked",G_CALLBACK(gui_draw_token), board); 
  }
}

void gui_draw_token (GtkButton *button, cairo_t *cr, gpointer board){

  printf("button clicked\n");
  printf("n: %d\n", ((Board*)board)->n);
  //parse label of a button into the corresponding column number
  guint col = (int)strtol(gtk_button_get_label(button), NULL, 0);
  printf("%d\n", col);
  printf("n: %d\n", ((Board*)board)->n);
  if (make_move(board, col) == false){
    printf("draw cairo\n");
  }
}

CGUI *make_gui(Board *board){
  CGUI *gui = (CGUI*) malloc(sizeof(CGUI));
  //assign variables to gui object
  gui->board = board;
  GtkWidget *window;
  GtkWidget *frame;
  GtkWidget *drawing_area;

  gtk_init(NULL, NULL);

  //set up initial window
  window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
  gtk_window_set_title(GTK_WINDOW(window), "Connect-N-K");

  gtk_window_set_default_size (GTK_WINDOW(window), 600, 650);
  gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);
  gtk_widget_show(window);
  g_signal_connect_swapped(G_OBJECT(window), "destroy",
               G_CALLBACK(gtk_main_quit), gui);
  //  g_signal_connect (window, "draw", G_CALLBACK (gui_draw_buttons), board);

  //create boxes to fit buttons and drawing area
  GtkWidget *box = gtk_box_new(GTK_ORIENTATION_VERTICAL, 0);
  GtkWidget *draw_box = gtk_box_new(GTK_ORIENTATION_HORIZONTAL, 0);
  GtkWidget *button_box = gtk_box_new(GTK_ORIENTATION_HORIZONTAL, 0);

  //make all buttons take up even amount of space
  gtk_box_set_homogeneous((GtkBox*)button_box, true);

  gtk_widget_set_size_request(button_box, 600, 50);

  //  gtk_box_pack_start (box, window, false, false, false);
  gtk_container_add(GTK_CONTAINER(window), box);
  gtk_container_add(GTK_CONTAINER(box), draw_box);
  gtk_container_add(GTK_CONTAINER(box), button_box);
  //set up initial frame
  frame = gtk_frame_new (NULL);
  gtk_frame_set_shadow_type (GTK_FRAME (frame), GTK_SHADOW_IN);
  gtk_widget_set_size_request(frame, 600, 600);
  gtk_container_add(GTK_CONTAINER(draw_box), frame);

  //create and pack buttons.
  gui_make_buttons(button_box, board);

  //set up drawing area
  drawing_area = gtk_drawing_area_new ();
  gtk_widget_set_size_request(drawing_area, 600, 600);
  gtk_container_add (GTK_CONTAINER (frame), drawing_area);

  g_signal_connect (drawing_area, "draw", G_CALLBACK (draw_board), board);
  printf("n: %d\n", board->n);
  //  printf("board in gui: %d\n", *board);

  gui->window = window;
  gui->frame = frame;
  gui->drawing_area = drawing_area;

  /*
  //show widgets 
```

连接.c：

```
/* connect.c */

#include <stdlib.h>
#include <stdio.h>
#include <stdbool.h>
#include <string.h>
#include "gui.h"
#include "board.h"
#include "connect.h"

#define BUFFER_SIZE 10

/*
static int check_argument(int argc, char *argv[]);
static void play_game(int k, int n);
*/
/*
int main(int argc, char *argv[]){
  //check for correct number of arguments.
  if (!check_argument(argc, argv))
    return EXIT_FAILURE;

  int k = strtol(argv[1], NULL, 0);
  int n = strtol(argv[2], NULL, 0);

  play_game(k, n);
  return EXIT_SUCCESS;
}
*/

int check_argument(int argc, char *argv[]){
  if(argc < 3 || argc >3){
    fprintf(stderr, "Parameters entered incorrectly.  Input two integers for k and n respectively.\n");
    return false;
  }
  else
    return true;

}

//go through all steps of the game
void play_game(int k, int n){
  //check to see if k and n are appropriate
  if(k>n){
    fprintf(stderr, "k is greater than n, game will never be won.\n");
    return;
  }

  Board *board = make_board(k, n);
  //  print_board(board);//print initial board

  //initiate gui
  //  CGUI *gui = make_gui();//set first three vars
  //  gui_set_board(gui, board);//set the fourth var
  // CGUI *gui = gui_start_gtk(board);

  // connect_play_game_text(board);
   connect_play_game_gui(board);

  /*  int player = 1; //let first player go first
  char *s = (char*)malloc(BUFFER_SIZE);//allocate memory for int to read
  int move_result;

  do{
    fgets(s, BUFFER_SIZE, stdin);
    int cols = strtol(s, NULL, 0);
    move_result = make_move(board,cols,player);

    //switch players if legal move and no one wins 
    if(move_result == false)
      player = 3-player; 
    //do nothing is move is illegal(move_result = -1, thus letting
    //the same player choose again.
  }
  while(move_result != true);

  //free up resources
  free(s); 
  destroy_board(board);
  */
}

int connect_play_game_gui(Board *board){
  printf("n in connect: %d\n", board->n);

  CGUI *gui = gui_start_gtk(board);

  //  gui_set_board(gui, board);//set the fourth var
  //  int player = 1; //let first player go first                             
  //  char *s = (char*)malloc(BUFFER_SIZE);//allocate memory for int to read
  // int move_result;                                                           
  //  fgets(s, BUFFER_SIZE, stdin);                                           
  //  int cols = strtol(s, NULL, 0);                                          
  //  move_result = make_move(board,cols,player); 
  //switch players if legal move and no one wins                          
  //  if(move_result == false){
  //  player = 3-player;     
    return true;      
    // }

    //do nothing if move is illegal(move_result = -1, thus letting           
    //the same player choose again.                                          
    //  while(move_result != true); 

  //free up resources                                                        
    //  free(s);
    //  destroy_board(board);
}

int connect_make_move_gui(int col, Board *board, int player){
  return 1;
}

void connect_play_game_text(Board *board){
  print_board(board);//print initial board   

  char *s = (char*)malloc(BUFFER_SIZE);//allocate memory for int to read      
  int move_result;

  do{
    fgets(s, BUFFER_SIZE, stdin);
    int cols = strtol(s, NULL, 0);
    move_result = make_move(board,cols);

  }
  while(move_result != true);
  //free up resources                                                         
  free(s);
  destroy_board(board);
}

//initiate gui
//static void connect_init_gui 
```

板.c：

```
#include <stdlib.h>
#include <stdio.h>
#include <stdbool.h>
#include <string.h>
#include "board.h"
#define DRAW 2
#define ILLEGAL_MOVE -1

static char set_player_char(int player);
static int check_draw(Board *board);

//make a new board
Board *make_board(int k, int n){
  Board *board = (Board *) malloc(sizeof(Board));
  board->moves = (char *)malloc(n*n);
  (board->k) = k;
  (board->n) = n;
  board->player = 1;

  //make an array of empty slots based of size n^2
  for(int i = 0; i < n*n; i++){
    board->moves[i] = '.';
  }
  return board;
}

//print board with updated moves, print last row first.
void print_board(Board *board){
  int n = board->n;
  //loop through each row
  for(int i = n-1; i >= 0; i--){
    //loop through each column
    for(int j = 0; j<n; j++){
      printf("%c", (board->moves)[i*n+j]);
      printf(" ");//add space between columns
    }
    printf("\n"); //wrap around each row
  }
  printf("\n");
}

//set char for player
static char set_player_char(int player){
  char player_char;

  if (player == 1)
    player_char = 'o';
  else
    player_char = '*';

  return player_char;
}

//update board based on player's input, return the row move is made
int make_move(Board *board, int x){
  printf("inmakemove n: %d\n", board->n);
  //  printf("board in make_move: %d\n", &board);
  //if move is illegal, return
  if (!check_legal_move(board, x))
    return ILLEGAL_MOVE;

  int n = board->n;  
  int row;

  //loop through the rows of the given column to find an empty spot.
  for (int i = 0; i < n; i++){
    if ((board->moves)[i*n+x] == '.'){
      (board->moves)[i*n+x] = set_player_char(board->player);
      row = i;
      break;
    }
  }

  print_board(board);

  //Check to see if a player has won the game.;
  int stat = check_win(board, x, row);
  if (stat == true){
    fprintf(stdout, "Player %d won the game.\n", board->player);
    return true;
  }

  //if all slots are filled, game is a draw.
  if(stat == DRAW){
    fprintf(stdout, "Game was a draw.\n");
    return true;
  }

  //if no one won, game continues.
  else{
    board->player = 3-(board->player);
    return false;
  }
}

//check to see if move x is legal
int check_legal_move(Board *board, int x){
  int n = board->n;

  //see if column entered is legal.
  if (x >= (board->n) || x<0){
    fprintf(stderr, "Illegal move by player %d at column %d\
, number entered outside range of available columns.\n", board->player, x);
    return false;
  }

  //see if column entered is already filled
  if ((board->moves)[(n-1)*n+x] != '.'){
    fprintf(stderr, "Illegal move by player %d at column %d\
, column is already filled.\n", board->player, x);
    return false;
  }
  return true;
}

//check for winning move
int check_win(Board* board, int x, int row){

  int n = board->n;
  int k = board->k;
  int current_move = row*n+x; //slot that the current move fills

  char *moves = board->moves;
  char player_char = set_player_char(board->player);

  int score;
  score = 1;

  //Check to see how many continuous slots are filled with the current player'
  //s token horizontally. 
  //going right                                          
  for (int i = 1; i<k && x+i<n; i++){
    if(moves[current_move+i] == player_char)
      score ++;
    else
      break;
  }

  //going left                                                         
  for(int i = 1; i<k && x-i>=0; i++){
    if(moves[current_move-i] == player_char)
      score++;
    else
      break;
  }

  //if horizontally connect to k, the player wins.
  if (score>=k)
    return true;

 //if not, check vertical.
  score = 1;
   //going up
  for (int i = 1; i<k && row+i<n; i++){
    if(moves[current_move+n*i] == player_char)
      score ++;
    else
      break;
  }

  //going down
  for(int i = 1; i<k && row-i>=0; i++){
    if(moves[current_move-n*i] == player_char)
      score ++;
    else
      break;
  }

  //if vertically connect to k, the player wins.                    
  if (score>=k)
    return true;

  //if not, check rising to right diagnol. Reset score like previously.  
  score = 1;

  //going right and up
  for(int i = 1; i<k && row+i<n && x+i<n; i++){
    if(moves[current_move+n*i+i] == player_char)
      score ++;
    else
      break;
  }
  //going left and down
  for(int i = 1; i<k && row-i>=0 && x-i>=0; i++){
    if(moves[current_move-n*i-i] == player_char)
      score ++;
    else
      break;
  }

  //if right diagonally connect to k, the player wins.                      
  if (score>=k)
    return true;

  //if not, check left rising diagonal.
  score = 1;
  //check right and down
  for(int i = 1; i<k && x+i<n && row-i>=0; i++){
    if(moves[current_move-n*i+i] == player_char)
      score ++;
    else
      break;
  }
  //check left and up
  for(int i = 1; i<k && x-i>=0 && row+i<n; i++){
    if(moves[current_move+n*i-i] == player_char)
      score ++;
    else
      break;
  }

  //if left diagonally connect to k, the player wins.                          
  if (score>=k)
    return true;

  if(check_draw(board))
    return DRAW;

  //if no k connect is made in any direction, game is not won. 
  return false;
}

//check to see if game has come to a draw
static int check_draw(Board *board){
  int n = board->n;

  //loop through the top row to see if there are any empty slots left
  for (int i = 0; i<n; i++){
    if((board->moves)[n*(n-1)+i] == '.')
      return false;
  }
  //if no empty slots left, game was a draw.
  return true;
}

//Free up resources.
void destroy_board(Board *board){
  free(board->moves);
  free(board);
} 
```

很抱歉，这很长而且很混乱，我仍在编写代码并且是 C 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:15:16.950

不是我知道 gtk，而是一个快速的谷歌，看起来，你在回调中得到的板实际上并不是你正在传递的板。您对 clicked 事件的回调签名不正确

它应该看起来有点像

```
void button_clicked(GtkWidget *widget, gpointer data) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:24:51.343

您需要更改`void gui_draw_token (GtkButton *button, cairo_t *cr, gpointer board)`为 `void gui_draw_token (GtkButton *button, gpointer board)`

您不能只是编造回调签名并希望一切正常。对于签名，您需要查看适合信号的文档。例如在这种情况下[GtkButton 点击​​信号](http://developer.gnome.org/gtk3/3.2/GtkButton.html#GtkButton-clicked)文档。

如果您删除所有不必要的代码并注释掉代码，这也将有助于我们回答您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T20:15:35.170

编辑：是的，不要注意这一点。我以为是在循环*外*`char label[3]`初始化的，他更新了三次，导致未定义的输出和*`label[0]``label[1]``label[2]`*

 *这就是我粗略查看 739782781 行代码所得到的结果。对不起大家。

* * *

你没有告诉`label`哪一个要更新`sprintf`

```
char label[3];
sprintf(label, "%d", i-1);
            ^ is wrong 
```

它应该是

```
char label[3];
sprintf(label[n-1], "%d", i-1); 
```

我认为。*

# sql - SQL查询逻辑多条记录

> ID：14840855
> 
> 赞同：0
> 
> 时间：2013-02-12T20:06:58.690
> 
> 标签：sql

我需要创建一个查询来返回 Customer_ID 具有多个与之关联的 Prospect_ID 的行。例如，我希望查询是 ale 以返回下面的第 2 行和第 3 行，因为 Customer_ID 是相同的，但 Prospect_ID 不同，但不是第 5 行和第 6 行，因为 Prospect_id 是相同的：

```
Prospect_ID   Customer_ID
1001          31001
1002          31002
1003          31002
1004          31003
1005          31004
1005          31004 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T20:17:21.977

要获得`Customer_id`多个不同的`Prospect_id`：

```
select customer_id
from yourtable
group by customer_id
having count(distinct prospect_id) >1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/e16c9d/1)

如果您想返回所有详细信息，`Customer_Ids`则可以使用：

```
select *
from yourtable t1
where exists (select customer_id
              from yourtable t2
              where t1.customer_id = t2.customer_id
              group by customer_id
              having count(distinct prospect_id) >1) 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/e16c9d/2)。

这也可以写成（感谢[@ypercube](https://stackoverflow.com/users/344949/ypercube)）：

```
select *
from yourtable t1
where exists (select customer_id
              from yourtable t2
              where t1.customer_id = t2.customer_id
              and t1.prospect_id <> t2.prospect_id) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/e16c9d/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T20:26:54.693

您可以使用窗口函数执行此操作：

```
select prospect_id, customer_id
from (select t.*,
             COUNT(*) over (partition by prospect_id, customer_id) as cnt_pc,
             COUNT(*) over (partition by customer_id) as cnt_c
      from t
     ) t
where cnt_pc <> cnt_c and cnt_c > 1 
```

# php - 如何从加载到 PHPExcel 的 excel 文件中删除/删除图形（图表）、图片（图像）？

> ID：14840859
> 
> 赞同：2
> 
> 时间：2013-02-12T20:07:14.163
> 
> 标签：php, phpexcel

我正在使用 PHPExcel 类，我正在加载模板电子表格，然后修改数据等等。

根据我动态传递脚本的内容，模板中的某些图像应该被删除，某些图形（图表）应该被删除。

我已经使用`getChartCollection()`和`getDrawingCollection()`来获取所有内容，但我还没有找到修改集合的方法，以便我可以从加载的模板中删除图表和/或图像。

谢谢你的帮助。杰森·K。

更新 - 感谢下面的 Mark Ba​​ker 提供的信息。我编写了以下代码，需要在 1.7.9 发布之前添加到工作表类。我的代码如下。

```
/**
 * Remove drawing from collection
 *
 * @return PHPExcel_Worksheet_BaseDrawing[]
 */
public function removeImageByIDs($IDs)
{
    if(!is_array($IDs)) $IDs = array($IDs);
    $drawing_collection = $this->_drawingCollection;
    $drawing_collection_copy = $drawing_collection->getArrayCopy();
    foreach($IDs as $ID){
        unset($drawing_collection_copy[$ID]);
    }
    $drawing_collection_copy = array_values($drawing_collection_copy);
    $drawing_collection->exchangeArray($drawing_collection_copy);
    $this->_drawingCollection = $drawing_collection;
    unset($drawing_collection_copy);
    unset($drawing_collection);
    return $this->_drawingCollection;       
}

 /**
 * Remove chart from collection
 *
 * @return PHPExcel_Worksheet_BaseDrawing[]
 */
public function removeChartByIDs($IDs)
{
    if(!is_array($IDs)) $IDs = array($IDs);
    $chart_collection = $this->_chartCollection;
    $chart_collection_copy = $chart_collection->getArrayCopy();
    foreach($IDs as $ID){
        unset($chart_collection_copy[$ID]);
    }
    $chart_collection_copy = array_values($chart_collection_copy);
    $chart_collection->exchangeArray($chart_collection_copy);
    $this->_chartCollection = $chart_collection;
    unset($chart_collection_copy);
    unset($chart_collection);
    return $this->_chartCollection;
} 
```

享受。杰森·K。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T20:25:15.530

信不信由你，这是第一次有人问起从电子表格中删除图表或图像的问题。PHPExcel 实际上没有任何方法，但它们很容易让您自己添加。在这些集合中添加条目的方法在 PHPExcel_Worksheet 类中；并且由于集合只是一个数组，因此只需使用 unset()、array_splice() 或类似方法来删除您不想要的条目。

# jquery - 关闭模态窗口后如何添加事件？

> ID：14840870
> 
> 赞同：25
> 
> 时间：2013-02-12T20:07:49.063
> 
> 标签：jquery, twitter-bootstrap, modal-dialog

我有代码模式：

```
 <-- Button to trigger modal -->
<div id="result"></div>
<a href="#myModal" role="button" class="btn" data-toggle="modal">Launch demo modal</a>

<-- Modal -->
<div class="modal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Modal header</h3>
  </div>
  <div class="modal-body">
    <p>One fine body…&lt;/p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
  </div>
</div> 
```

我有代码什么时候应该在关闭 moal 窗口之后：

```
$('#result').html('yes,result'); 
```

请告诉我如何在关闭模式窗口（关闭或隐藏）时执行第二个代码？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2014-11-14T16:02:27.357

如果您使用的是 Bootstrap 3.x 版，那么现在执行此操作的正确方法是：

```
$('#myModal').on('hidden.bs.modal', function (e) {
  // do something...
}) 
```

向下滚动到活动部分以了解更多信息。

[http://getbootstrap.com/javascript/#modals-usage](http://getbootstrap.com/javascript/#modals-usage)

无论何时发布第 4 版 ( [http://v4-alpha.getbootstrap.com/components/modal/#events](http://v4-alpha.getbootstrap.com/components/modal/#events) )，这似乎都保持不变，但如果是这样，我一定会用相关信息更新这篇文章。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-02-12T20:17:14.607

我找到答案。谢谢下一个正确的答案：

```
$("#myModal").on("hidden", function () {
  $('#result').html('yes,result');
}); 
```

这里的事件[http://bootstrap-ru.com/javascript.php#modals](http://bootstrap-ru.com/javascript.php#modals)

**UPD**

对于 Bootstrap 3.x 需要使用[hidden.bs.modal](http://getbootstrap.com/javascript/#modals-events)：

```
$("#myModal").on("hidden.bs.modal", function () {
  $('#result').html('yes,result');
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-06-02T08:05:55.917

可能有用的答案很少，特别是如果您有动态内容。

```
$('#dialogueForm').live("dialogclose", function() {
    //your code to run on dialog close
}); 
```

或者，在打开模式时，有一个回调。

```
$( "#dialogueForm" ).dialog({
    autoOpen: false,
    height: "auto",
    width: "auto",
    modal: true,
    my: "center",
    at: "center",
    of: window,
    close : function() {
        // functionality goes here
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T20:11:55.783

```
$('.close').click(function() {
  //Code to be executed when close is clicked
  $('#result').html('yes,result');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-17T13:31:40.077

首先检查模态div是否正确，

```
<!-- Button trigger modal -->
<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
  Launch demo modal
</button>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Modal title</h4>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div> 
```

参考：[https ://jsfiddle.net/jakecigar/DTcHh/42400/](https://jsfiddle.net/jakecigar/DTcHh/42400/)

# php - 保持休息，联系表单文本区域的新规则？

> ID：14840874
> 
> 赞同：0
> 
> 时间：2013-02-12T20:08:02.777
> 
> 标签：php, html

我目前正在构建一个联系表单，并且想知道是否有可能维护文本区域的换行符，我的电子邮件采用 html 样式，因此它们在我的电子邮件程序中看起来更好。

我阅读了一些关于 nl2br 命令的文章，但我不确定将代码放在哪里，因为我并不是真正的 PHP 怪胎。

这是代码：

```
<?php
                    $name = $_POST['name'];
                    $email = $_POST['email'];
                    $message = $_POST['message'];
                    $from = 'From: info@epicconcepts.nl'; 
                    $to = 'info@epicconcepts.nl'; 
                    $subject = 'Contact formulier bericht';
                    $human = $_POST['human']; 

                    $headers = "From: info@epicconcepts.nl\r\n";
                    $headers .= "Reply-To: ". strip_tags($_POST['email']) . "\r\n";
                    $headers .= "CC: quincynorbert@gmail.com\r\n";
                    $headers .= 'MIME-Version: 1.0' . "\r\n";
                    $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

                    $body = '<!DOCTYPE html>
                                <html>
                                <head>
                                <style type="text/css">
                                    body{background: #231f20;
                                         width:670px;
                                         height:100%;}
                                    #header-mail{background:#110f10;
                                                 width:650px;
                                                 height:70px;}
                                    #content{background:#231f20;
                                             width:630px;
                                             height:100%;
                                             padding: 20px;
                                             word-wrap:break-word;}
                                    .mail-text{font-family:arial;
                                                color:#fff;
                                                font-size:10pt;
                                                line-height:130%;}
                                    .bold{font-family:arial;
                                          color:#fff;
                                          font-size:10pt;
                                          font-weight:bold;}
                                </style>
                                </head>
                                <body>
                                <img src="http://test.epicconcepts.nl/images/bg-mailer.png" alt="Website Change Request" />
                                <div id="content"><p class="bold">'.$name.'<br><br>'.$email.'</p><p class="mail-text">
                                '.$message.'</p>
                                </div>
                                <a href="http://www.epicconcepts.nl">
                                <img src="http://test.epicconcepts.nl/images/mailer-footer.png" alt="Website Change Request" />
                                </a>
                                </body>
                                </html>';

                    if ($_POST['submit']) {
                        if ($name != '' && $email != '') {
                            if ($human == '4') {                 
                                if (mail ($to, $subject, $body, $headers)) { 
                                echo '<p class="correct-message">Your message has been sent!</p>';
                            } else { 
                                echo '<p class="correct-message">Something went wrong, go back and try again!</p>'; 
                            } 
                        } else if ($_POST['submit'] && $human != '4') {
                            echo '<p class="correct-message">You answered the anti-spam question incorrectly!</p>';
                        }
                        } else {
                            echo '<p class="correct-message">You need to fill in all required fields!</p>';
                        }
                    }
                ?>
                <form method="post" action="contact.php">

                    <label>Naam</label>
                    <input name="name" placeholder="Type hier">

                    <label>Email</label>
                    <input name="email" type="email" placeholder="Type hier">

                    <label>Bericht</label>
                    <textarea name="message" placeholder="Type hier"></textarea>

                    <label>Hoeveel is 2+2?</label>
                    <input name="human" placeholder="Type hier">

                    <input id="submit" name="submit" type="submit" value="Verzend">

                </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:24:09.050

你可以像这样用 nl2br 包裹 $body ：

```
if (mail ($to, $subject, nl2br($body), $headers)) { 
```

# php - 尝试使用 curl 读取 HTML 文件的一部分并且输出很奇怪

> ID：14840878
> 
> 赞同：1
> 
> 时间：2013-02-12T20:08:16.177
> 
> 标签：php, curl

```
set_time_limit(0);
$ch = curl_init('http://www.tibia.com/community/?subtopic=highscores&world=Antica');
curl_setopt($ch, CURLOPT_RANGE, '0-999');
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_TIMEOUT, 50);
echo $data = curl_exec($ch);//get curl response
curl_close($ch); 
```

示例输出是（每次我点击刷新按钮时都会略有不同）：
‹í]kSã8ºþNÕüOÍÕr™&™，³ÜÒ3{æ¥8J¢Æ±2¾é=ûßÏ«‹Û±BãYÜåž,[¥÷òHz%[ ÎÁØ›XÖÆàˆÐG=‹tz´O1ª S‡té[ZxF tm[Ô&è–YÝÀ%jÐ'¿½?¿<ütrÇË‹_X_BD1‡Ýîõç«^¤œàŠ(Èå%ÓwH¤$lšÌ·½°¨Ñý)s&W¼‰ Ç¯Rb ¢‰Ð{dÐª zp×½=¿é¡ÞÿÞœ,úµ³vð·JU«0D@EÔ²ˆ³æ¯G'„A{Û0Ì1tjä´ÜØ4þŽšµZmóãÚÐ·MÞÆQ4{íßà=:DSì@³ß ò2Ý-‹Ø#oŒ:¨ ± ‰þ-üË1}‡=¹ÄéÍ¦¨ÝF%F‹ºßb²#i~éO¢W> à]Ã»\b ·<6]~ßÿÿ?kv¥&¨JuÖÖÞ®PB)¶èWm ƒÁþ~}¿ ÖÜÛö÷wš ÒØ®Õ04IØÜ!õdS€1½ªuHö

当我注释掉 CURLOPT_RANGE 时页面显示正确

编辑：我添加 curl_setopt($ch, CURLOPT_ENCODING, "gzip"); 输出似乎没问题，但仅当范围以 0 开头时。如果范围是例如 2000-3000，则它完全不输出任何内容。

编辑2：错误消息是：“处理内容未编码时出错：无效距离太远”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T20:40:52.393

您正在获取 gzip 压缩的内容。您应该明确声明您希望返回纯 HTML。您可以添加以下选项：

```
curl_setopt($ch, CURLOPT_ENCODING, 'deflate'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T20:26:10.813

我从未使用过 CURLOPT_RANGE。你有理由需要使用它吗？

gzip 仅在您从 0 开始时才起作用的原因是那里有需要解压缩内容的信息。如果您必须使用 Range，那么您应该捕获每个范围的数据并将其组合，然后解压缩。

编辑：

您在一些评论中提到您使用 Range 来获取一些数据以节省带宽。我使用 Firebug 检查了该页面，它小于 10kb。加上所有的图像，它几乎是 500k。您已经节省了很多钱，除非您使用 10kb 拨号上网，否则没什么。不用担心使用 Range 和组合块，只需让 cURL 处理 gzip。

# ios5 - ios 6 中的轮换问题

> ID：14840882
> 
> 赞同：0
> 
> 时间：2013-02-12T20:08:27.313
> 
> 标签：ios5, ios6, rotation, orientation

我到处找，但在 iOS 6 中我找不到这个烦人的旋转问题的解决方案。

出于某种原因，我无法在 iOS 6 中使用旋转方法。他们甚至没有被调用。

例如：

如果我想在 iOS 5 中以纵向模式保持视图，我使用：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);    
} 
```

我了解到 iOS 6 中的新方法应该是：

```
- (NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskPortrait;
} 
```

我也尝试添加：

```
-(BOOL)shouldAutorotate
{
    return NO;
} 
```

但它根本不起作用。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:25:59.437

如果您拥有所有这些，它应该像在 Info.plist 以及您的控制器中设置支持的方向一样简单。您可以通过项目目标上的“摘要”选项卡执行此操作。

# java - wait.until(ExpectedConditions.visibilityOf Element1 OR Element2)

> ID：14840884
> 
> 赞同：9
> 
> 时间：2013-02-12T20:08:39.120
> 
> 标签：java, selenium

我想`wait.until(ExpectedConditions)`与两个元素一起使用。我正在运行测试，我需要`WebDriver`等到**Element1 或 Element2**出现。然后我需要选择最先出现的人。我试过了：

```
WebDriverWait wait = new WebDriverWait(driver, 60); 
    wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//h2[@class='....']"))) || wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//h3[@class='... ']"))); 

        // Then I would need:

String result = driver.findElement(By.xpath("...")).getText() || driver.findElement(By.xpath("...")).getText(); 
```

总而言之，我需要等到两个元素中的任何一个出现。然后选择出现的人（他们不能同时出现）请帮助。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2016-06-18T15:15:43.743

现在有一个本机解决方案，`or`方法，[检查文档](https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html#or-org.openqa.selenium.support.ui.ExpectedCondition...-)。

你像这样使用它：

```
driverWait.until(ExpectedConditions.or(
    ExpectedConditions.presenceOfElementLocated(By.cssSelector("div.something")),
    ExpectedConditions.presenceOfElementLocated(By.cssSelector("div.anything")))); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-18T09:13:16.387

这是我在 Helper 类中声明的方法，它就像一个魅力。只需创建您自己的`ExpectedCondition`并使其返回定位器找到的任何元素：

```
public static ExpectedCondition<WebElement> oneOfElementsLocatedVisible(By... args)
{
    final List<By> byes = Arrays.asList(args);
    return new ExpectedCondition<WebElement>()
    {
        @Override
        public Boolean apply(WebDriver driver)
        {
            for (By by : byes)
            {
                WebElement el;
                try {el = driver.findElement(by);} catch (Exception r) {continue;}
                if (el.isDisplayed()) return el;
            }
            return false;
        }
    };
} 
```

然后你可以这样使用它：

```
Wait wait = new WebDriverWait(driver, Timeouts.WAIT_FOR_PAGE_TO_LOAD_TIMEOUT);
WebElement webElement = (WebElement) wait.until(
        Helper.oneOfElementsLocatedVisible(
                By.xpath(SERVICE_TITLE_LOCATOR), 
                By.xpath(ATTENTION_REQUEST_ALREADY_PRESENTS_WINDOW_LOCATOR)
        )
); 
```

这是页面`SERVICE_TITLE_LOCATOR`的`ATTENTION_REQUEST_ALREADY_PRESENTS_WINDOW_LOCATOR`两个静态定位器。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-11T12:58:46.620

如果您将“OR”放入xpath，我认为您的问题有一个简单的解决方案。

```
WebDriverWait wait = new WebDriverWait(driver, 60); 
wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//h2[@class='....'] | //h3[@class='... ']"))); 
```

然后，打印结果，例如：

```
if(driver.findElements(By.xpath("//h2[@class='....']")).size()>0){
       driver.findElement(By.xpath("//h2[@class='....']")).getText();
}else{
       driver.findElement(By.xpath("//h3[@class='....']")).getText();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-02T18:06:24.113

你也可以像这样使用 CSSSelector：

```
wait.until(ExpectedConditions.visibilityOfElementLocated(By.cssSelector("h2.someClass, h3.otherClass"))); 
```

将 someClass 和 otherClass 替换为 xpath 中 [...] 中的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T03:20:22.423

不幸的是，没有这样的命令。你可以通过 try and catch 来克服这个问题，或者我会更好地推荐你使用开源 Ruby 库[Watir](http://watir.com/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-14T22:36:35.090

有另一种等待方式，但它不使用预期的条件，而是使用 lambda 表达式。

```
wait.Until(x => driver.FindElements(By.Xpath("//h3[@class='... ']")).Count > 0 || driver.FindElements(By.Xpath("//h2[@class='... ']")).Count > 0); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-10T17:02:11.443

如果您要满足可变数量的条件，您可以利用一个通用列表，例如[此处](https://stackoverflow.com/questions/5374311/convert-arrayliststring-to-string-array)`ArrayList<>`所示的 Java ，然后执行以下操作：

```
//My example is waiting for any one of a list of URLs (code is java)

    public void waitUntilUrls(List<String> urls) {
        if(null != urls && urls.size() > 0) {
            System.out.println("Waiting at " + _driver.getCurrentUrl() + " for " + urls.size() + " urls");
            List<ExpectedCondition<Boolean>> conditions = new ArrayList<>();
            for (String url : urls) {
                conditions.add(ExpectedConditions.urlContains(url));
            }

            WebDriverWait wait = new WebDriverWait(_driver, 30);
            ExpectedCondition<Boolean>[] x = new ExpectedCondition[conditions.size()];
            x = conditions.toArray(x);
            wait.until(ExpectedConditions.or(x)); // "OR" selects from among your ExpectedCondition<Boolean> array
        }
    } 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-08-19T12:46:58.097

有一个简单的解决方案，使用显式等待：

```
wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath("//*[@id='FirstElement' or @id='SecondElement']"))); 
```

在此之前，我尝试使用`wait.until(ExpectedConditions.or(...`与 2.53.0 之前的 selenium 版本不兼容的 .

# c++ - 重载模板类的 [] 运算符，获取和设置，在 C++ 中

> ID：14840885
> 
> 赞同：1
> 
> 时间：2013-02-12T20:08:43.193
> 
> 标签：c++, templates, operator-overloading, set, square-bracket

基本上，我正在尝试为 C++ 制作模板映射/字典类（我知道这已经完成，假设我是自虐狂）。

我开始写这个骨架：

```
#pragma once
template <class T>
class AssArray
{
    int _size;
    int _position;

public:
    AssArray(int size);
    ~AssArray(void);

    const T& operator [](char* b) const;
    T& operator [](char* b) const;
        //I read this should be done sth like this when researching, though an explanation would be nice.
}; 
```

现在，我需要能够获取 (T=AssArray["llama"])、设置 (AssArray["llama"]= T) 和覆盖 (AssArray["llama"]= newT)。

这样做很简单，只需循环等，这里真正的问题是操作符；

如果我使用 AssArray["llama"]= T，我应该如何将 T 的值放入运算符重载函数中？

我只找到了简要描述解决方案的解释，并不能真正理解。
请赐教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:17:22.710

您所要做的就是更正您的签名，如下所示：

```
const T& operator [](char* b) const;
T& operator [](char* b); 
```

我已经`const`从第二个运算符中删除了限定符。

> 如果我使用`AssArray["llama"]=T`，我应该如何将 T 的值放入运算符重载函数中？

你没有。您只需返回一个对应该存储新值的位置的引用，编译器将处理其余部分。如果`"llama"`数组中不存在，则需要为其创建一个条目，并返回对该条目的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T20:29:29.010

由于 operator[] 如果你想说 assArray["str"] = T 返回一个对 T 的引用，那么类型 T 必须知道如何处理 operator=。如果 T 没有重载 operator=，则必须在类型 T 中重载 operator=。

operator[] 与赋值无关。它应该只返回给定索引处的元素。

# sorting - 对 MultiButtonList 或 ComponentGroup 进行排序

> ID：14840886
> 
> 赞同：0
> 
> 时间：2013-02-12T20:08:46.957
> 
> 标签：多按钮列表, 组件组进行排序？, sorting, codenameone

有没有办法通过 TextLine1 或 TextLine2对[多按钮列表](/questions/tagged/multibuttonlist "显示标记为“多按钮列表”的问题")或[组件组进行排序？](/questions/tagged/componentgroup "显示标记为“组件组”的问题")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:28:21.050

您可以像往常一样执行排序算法。

要对多个按钮进行排序，只需删除它们并根据该顺序添加它们（假设您使用的是布局管理器，例如框布局）。如果需要，您还可以使用 animateLayout 将它们设置为动画。

# multithreading - 线程的成本

> ID：14840887
> 
> 赞同：12
> 
> 时间：2013-02-12T20:08:47.890
> 
> 标签：multithreading, operating-system, resources

我了解如何以我选择的语言创建线程，并且了解互斥锁以及共享数据的危险等，但我确定 O/S 如何管理线程以及每个线程的成本。我有一系列相关的问题，最清楚地表明我的理解极限的方法可能是通过这些问题。

产生线程的成本是多少？在设计软件时是否值得担心？创建线程的成本之一必须是它自己的堆栈指针和进程计数器，然后是在调度程序将其移入和移出内核时将所有工作寄存器复制到的空间，但还有什么？

一个程序的可用堆栈量是在进程的线程之间平均分配还是先到先得？

我可以以某种方式在（程序的）启动时检查硬件的内核数量吗？如果我在具有 N 核的机器上运行，我应该将线程数保持在 N-1 吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T20:13:21.657

> 然后在调度程序将所有工作寄存器移入和移出内核时复制所有工作寄存器的空间，但还有什么？

一个不太明显的成本是施加在调度程序上的压力，如果它需要处理数千个线程，它可能会开始窒息。内存真的不是问题。通过正确的调整，您可以获得一个“线程”来占用很少的内存，比它的堆栈多一点。这种调整可能很困难（即`clone(2)`直接在 linux 下使用等），但可以做到。

> 一个程序的可用堆栈量是在进程的线程之间平均分配还是在先到先得的情况下分配

每个线程都有自己的堆栈，通常您可以控制它的大小。

> 如果我在具有 N 个内核的机器上运行，我应该将线程数保持为 N-1

检查内核数量很容易，但特定于环境。但是，仅当您的工作负载包含 CPU 密集型操作且 I/O 很少时，将线程数限制为内核数才有意义。如果涉及 I/O，您可能希望拥有比内核更多的线程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T20:12:39.380

在设计和实施的所有事情上，您都应该尽可能深思熟虑。

我知道每次创建线程时，Java 线程堆栈占用大约 1MB。，所以它们加起来。

线程对于允许长时间运行的活动发生而不阻止所有其他用户/进程取得进展的异步任务是有意义的。

线程由操作系统管理。有很多方案，都在操作系统的控制下（例如循环，先到先得等）

对我来说，为某些活动（例如计算密集型计算、图形、数学等）为每个内核分配一个线程非常有意义，但这不一定是决定因素。我开发的一款应用在生产中使用了大约 100 个活动线程；它不是 100 核机器。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-12T20:50:20.087

要添加到其他优秀帖子：

'产生线程的成本是多少？设计软件时是否值得担心？

如果您的设计选择之一经常做这样的事情。避免此问题的一个好方法是在应用程序启动时通过使用专用于操作的池和/或应用程序生命周期线程创建一次线程。线程间信令比连续线程创建/终止/销毁要快得多，也更安全/更容易。

有关线程停止、终止、销毁、线程数失控、OOM 失败等问题的帖子数量已成为历史。如果您可以完全避免这样做，那就太好了。

# c# - String.Empty 与 Null 上的 Convert.ToInt32(String)

> ID：14840889
> 
> 赞同：23
> 
> 时间：2013-02-12T20:08:55.897
> 
> 标签：c#, .net, type-conversion

该表达式`Convert.ToInt32(String.Empty)`将引发 FormatException，因为它无法将空字符串解析为 Int32 值。

但是，`Convert.ToInt32(DirectCast(Nothing, String))`VB.NET 或`Convert.ToInt32((string)null)`C# 中的表达式会将 null 解析为 Int32 值为零。

深入研究 .NET 源代码`Convert.cs`，我看到以下代码：

```
public static int ToInt32(String value) {
    if (value == null) 
        return 0;
    return Int32.Parse(value, CultureInfo.CurrentCulture);
} 
```

这解释了这种行为，但我想了解为什么它是这样写的，而不是为空字符串返回零？

例如，为什么不写成：

```
public static int ToInt32(String value) {
    if (String.IsNullOrEmpty(value)) 
        return 0;
    return Int32.Parse(value, CultureInfo.CurrentCulture);
} 
```

（请注意，`String.IsNullOrEmpty()`两者`Convert.ToInt32()`都可以追溯到 .NET 2.0，可能更早。）

**编辑：我的问题与**[这个问题](https://stackoverflow.com/questions/11580208/why-convert-toint32null-returns-0-in-c-sharp)非常相似，但我也想知道为什么`Convert.ToInt32(String.Empty)`会引发异常而不是返回 Int32 默认值`0`。（答案`String.Empty`不是 的默认值`String`，因此没有相关性。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T20:12:57.960

我完全不了解实际设计团队背后的推理，但在我看来，这可能是某种“默认值等效”。Null 是 string 的默认值，因此将其转换为 int 的默认值似乎是合乎逻辑的。然而，String.Empty 是一个与任何其他非空字符串数据一样的字符串，因此它应该被格式化，因此例外。

我认为 ArgumentNullException 本来是一个“更干净”的决定，但我不知道这一切背后可能存在什么内部问题......

另一个编辑：
在**[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.convert.aspx)**中，有 5 种可能的结果之一：

> 一次成功的转换。对于前面结果中未列出的两种不同基本类型之间的转换，**所有不会导致数据丢失的扩大转换以及所有缩小转换都将成功**，并且该方法将返回目标基本类型的值。

看起来从 null 对象到另一种类型的转换没有理由失败（不是格式错误，不是不支持的*类型*转换），但是像 int 这样的值类型没有“无数据”的表示，所以默认值生成目标类型。

快速思考 - “相反”转换，`Convert.ToString(0)`，不会产生 null ，因为：

*   0 是数据，在很多情况下它可以是非常有效和重要的值
*   null 不是 0 的正确字符串表示形式

# java - 如何扩展 Java 类并更改注解？

> ID：14840893
> 
> 赞同：2
> 
> 时间：2013-02-12T20:09:14.643
> 
> 标签：java, inheritance, annotations

我有一个使用注释的 Java 类。我想编写一个扩展它并更改现有方法的注释的版本。

所以会有一个方法：

```
@myAnnotation(value=VALUE_THAT_CHANGE_IN_SUBCLASS)
    myMethod(){
} 
```

子类将有几个新方法，但主要只是按照我所说的方式更改注释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T21:05:16.543

虽然我不确定您为什么要这样做，但您需要扩展类、覆盖方法并应用注释：

```
public class App
{
    public static void main(String[] args) throws NoSuchMethodException
    {
        Class<MyClass> c = MyClass.class;
        MyAnnotation a = c.getMethod("someMethod",null).getAnnotation(MyAnnotation.class);
        System.out.println(a.name());

        Class<MySubclass> c2 = MySubclass.class;
        a = c2.getMethod("someMethod",null).getAnnotation(MyAnnotation.class);
        System.out.println(a.name());
    }   
}

@Retention(RetentionPolicy.RUNTIME) 
@Target(ElementType.METHOD) 
@interface MyAnnotation {
    String name() default "";
}

class MyClass {

    @MyAnnotation(name="Some value")
    public String someMethod() {
        return "Hi!";
    }
}

class MySubclass extends MyClass {

    @Override
    @MyAnnotation(name="Some other value")
    public String someMethod() {
        return super.someMethod();
    }
} 
```

输出：

> 一些价值
> 一些其他价值

# javascript - jQuery单选按钮“选中”属性未触发

> ID：14840894
> 
> 赞同：3
> 
> 时间：2013-02-12T20:09:15.253
> 
> 标签：javascript, jquery, radio-button, checked

我正在尝试根据用户检查的单选按钮向 div 添加文本，但无论检查哪个属性，它最终都会触发“else”块，并且每次都显示“女性”。

请帮忙！

```
<input type="radio" name="gender" class="gender" id="male" value="male">Male<br />
<input type="radio" name="gender" class="gender" id="female" value="female">Female<br />

$(".gender").change(function () {                 
if ($("#male").attr("checked")) {
        $("#content").text("male");
    }
    else {
        $("#content").text("female");
    }
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T20:09:56.263

使用`.prop('checked')`而不是`.attr('checked')`. 后者基于 HTML 属性，该属性始终为 false，因为它不在 DOM 中。 `.prop`可用于检查在 DOM 中可能不可见的属性更改。

[http://jsfiddle.net/Xxuh8/](http://jsfiddle.net/Xxuh8/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T20:15:42.643

您的代码将一直有效`jQuery 1.8`或更少。[http://jsfiddle.net/Dnd2L/](http://jsfiddle.net/Dnd2L/)

在最新版本`.attr`中，用于在 HTML 中定义并`.prop`映射到动态元素的属性并返回当前值的属性。 [http://jsfiddle.net/Dnd2L/1/](http://jsfiddle.net/Dnd2L/1/)

`attr`有关和的更多信息`prop`- [https://stackoverflow.com/a/5876747/297641](https://stackoverflow.com/a/5876747/297641)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T20:20:09.840

您并不特别需要 if，因为您的单选按钮是分组的，并且不可能有多个选择。

您可能想改用它：

```
$(".gender").change(function () {                 
    $("#content").text($(this).val());
}); 
```

JSFiddle：http: [//jsfiddle.net/3Lsg6/](http://jsfiddle.net/3Lsg6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T20:29:23.923

或者如果您的收音机没有上课用途

```
$("input[name='gender'][checked='checked']").val(); 
```

获取选中的收音机的值。要更改检查的内容，请将要检查的 cbx 的值放入 val() 中，即，`...val("male");`

# php - 使用后退按钮的 CodeIgniter 问题

> ID：14840895
> 
> 赞同：0
> 
> 时间：2013-02-12T20:09:17.140
> 
> 标签：php, mysql, codeigniter, jquery-mobile

我有一个 Web 应用程序，它允许用户执行生成一组分页结果的搜索。然后，用户可以从结果中选择其中一项以查看更多信息。然而，当用户按下后退按钮时，它会`Error loading page`从 jQuery Mobile 产生一个错误。通过查看 Chrome Inspector 中的预览，这是由于`1064`错误（我的 SQL 语法中的错误）造成的。鉴于查询在首次执行时有效，我认为这不是真正的问题。

对 CodeIgniter 没有太多经验，我的猜测是，当按下后退按钮时，控制器方法没有被发送所需的值来返回有效响应 - 因此出现错误。

任何人都可以帮助解决这个问题，因为我希望用户能够返回搜索结果并随意来回分页。

```
Error Number: 1064

You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AND `library`.`votes` >= '1000'AND `library`.`language` != 'German'AND `ro' at line 5

SELECT *FROM (`library`)JOIN `classifications` ON `library`.`id` = `classifications`.`id`WHERE `library`.`rating` >=AND `library`.`votes` >= '1000'AND `library`.`language` != 'German'AND `classifications`.`meter` >ORDER BY `library`.`rating` DESC

Filename: /Applications/MAMP/htdocs/libraryTest/models/results_model.php

Line Number: 53 
```

**编辑**

问题似乎是，正如我上面所说，当按下后退按钮时控制器方法不接受任何参数，因此它试图执行以下没有值的查询：

```
SELECT *FROM (`library`)JOIN `classifications` ON `library`.`id` = `classifications`.`id`WHERE `library`.`rating` >=AND `library`.`votes` >= '1000'AND `library`.`language` != 'German'AND `classifications`.`meter` >ORDER BY `library`.`rating` DESC 
```

您可以看到 和 的值`library.rating`不`classifications.meter`存在。但我想重申，当首次调用控制器方法时，这些值存在于初始查询中。导航回页面时会发生此错误。

上面第53行对应的是model方法中SQL查询的执行：

`return $sql_query->get()->result();`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:39:45.903

```
'AND `library`.`votes` >= '1000'AND `library`.`language` != 'German'AND `ro' 
```

在该行的末尾，您有：`AND 'ro'`

检查你的语法。那是从哪里来的？这是一个错误的条件。它应该是这样的：

```
AND language != ro 
```

请在此处粘贴第 53 行！因为有问题。

# c++ - 是个 c ++ 11中的库可移植吗？

> ID：14840901
> 
> 赞同：8
> 
> 时间：2013-02-12T20:09:44.513
> 
> 标签：c++, random, c++11

c++11中的库是可移植的吗？我避免使用 rand() 因为我听说它不可移植。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-12T20:11:59.110

你如何定义“便携”？

如果通过“便携”，您的意思是“在给定相同输入的情况下将产生二进制相同的随机数序列”，那么是的，`rand`它不是便携的。是的，[C++ 随机生成器](http://en.cppreference.com/w/cpp/numeric/random)是可移植的（其中大多数。不是`std::default_random_engine`或[`std::random_device`](http://en.cppreference.com/w/cpp/numeric/random/random_device)），因为它们实现了*特定的*算法。`rand`可以是任何东西，只要它不完全不同于随机数生成器。

话虽这么说，正如@PeteBecker 指出的那样，分布本身并没有那么明确。因此，虽然`std::mt19937`将为给定的种子产生相同的值序列，但不同[`std::uniform_int_distribution`](http://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution)的 s 可以为相同的输入序列和范围提供不同的值。

当然，如果您需要一致性，您可以随时定义自己的分布。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-12T20:47:24.960

中描述的随机数引擎`<random>`对其算法有明确的要求，以确保可移植性。分布没有。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T20:50:54.013

[例如，您可以使用std::mt19937 （Mersenne Twister）](http://www.cplusplus.com/reference/random/mt19937/)生成“给定相同输入的相同随机数序列”（来自@Nicol Bolas）。你绝对不能这样做，`rand()`这很烦人。

相关问题：

*   [C++11 标准是否保证跨实现的相同种子具有相同的随机数？](https://stackoverflow.com/q/13589215/341970)

*   [跨平台一致的伪随机数](https://stackoverflow.com/q/922358/341970)

# python - 如何转换阿拉伯语 Unicode

> ID：14840909
> 
> 赞同：3
> 
> 时间：2013-02-12T20:10:05.147
> 
> 标签：python, encoding, python-2.7

我正在研究 python 中的阿拉伯语光词干分析器包
我想将任何操作的结果从 Unicode 转换为阿拉伯字母。

我的代码：

```
import tashaphyne
form tashaphyne  import *
>>> text = u"الْعَرَبِيّةُ"
>>> strip_tashkeel(text) 
```

我希望它显示“العربية”而不是 Unicode

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:19:38.233

您可以使用 encode() 函数将 unicode 字符串转换为任何其他编码，如下所示：

```
text.encode('utf8') 
```

[这](http://docs.python.org/2/library/codecs.html#standard-encodings)是 Python 2.7 中可能的编码列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T20:35:30.357

您看到`u'\u0627\u0644\u0639\u0631\u0628\u064a\u0629'`的不是“العربية”，因为`repr()`unicode 字符串的表示意味着即使在 7 位终端上也可以显示。

要查看实际脚本而不是 unicode，请`print _`在调用 之后执行`strip_tashkeel()`，或`print strip_tashkeel(text)`直接执行。

# sql-server-2008 - 在 SQL Server 2008 中运行 WHILE 或 CURSOR 或两者

> ID：14840911
> 
> 赞同：1
> 
> 时间：2013-02-12T20:10:07.813
> 
> 标签：sql-server-2008, for-loop

我正在尝试在 SQL Server 2008/TSQL 中运行某种循环，但我不确定这应该是 a`WHILE`还是`CURSOR`两者。最终结果是我试图遍历用户登录列表，然后确定唯一用户，然后运行循环以确定用户在网站上停留 5 分钟所需的访问次数，按频道划分.

表：登录历史

```
UserID  Channel   DateTime          DurationInSeconds
1       Website   1/1/2013 1:13PM   170
2       Mobile    1/1/2013 2:10PM   60
3       Website   1/1/2013 3:10PM   180
4       Website   1/1/2013 3:20PM   280
5       Website   1/1/2013 5:00PM   60
1       Website   1/1/2013 5:05PM   500
3       Website   1/1/2013 5:45PM   120
1       Mobile    1/1/2013 6:00PM   30
2       Mobile    1/1/2013 6:10PM   90
5       Mobile    1/1/2013 7:30PM   400
3       Website   1/1/2013 8:00PM   30
1       Mobile    1/1/2013 9:30PM   200 
```

[SQL Fiddle 到这个模式](http://sqlfiddle.com/#!3/5f2ec/1)

我可以`select`像这样将唯一用户放入一个新表中：

```
SELECT UserID
INTO #Users
FROM LoginHistory
GROUP BY UserID 
```

现在，我正在尝试开发的功能是遍历这些唯一的 UserID，按 DateTime 对登录进行排序，然后计算达到 300 秒所需的登录次数。

我希望得到的结果集如下所示：

```
UserID  TotalLogins  WebsiteLogins  MobileLogins    Loginsneededto5Min
1       4            2              2               2
2       2            2              0               0   
3       3            3              0               3
4       1            1              0               0
5       2            1              1               2 
```

如果我用另一种语言执行此操作，我会认为它会是这样的：（并道歉，因为这不完整，只是我想我要去的地方）

```
for (i in #Users):
  TotalLogins = Count(*), 
  WebsiteLogins = Count(*) WHERE Channel = 'Website', 
  MobileLogins = Count(*) WHERE Channel = 'Mobile', 
    for (i in LoginHistory):
      if Duration < 300:
        count(NumLogins) + 1 
```

** 好的 - 我在嘲笑自己结合多种不同语言/语法的方式，但这就是我正在考虑解决这个问题的方式**

想到一个好的方法来实现这一点？我的偏好是使用循环，这样我就可以继续将`if/then`逻辑写入代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:30:13.497

一种略有不同的分段方法。一个小的区别是递归部分在每个用户达到 300 秒时终止，而不是对所有可用登录进行求和。

`UserId`/上的索引`StartTime`应该可以提高更大数据集的性能。

```
declare @Logins as Table ( UserId Int, Channel VarChar(10), StartTime DateTime, DurationInSeconds Int )
insert into @Logins ( UserId, Channel, StartTime, DurationInSeconds ) values
  ( 1, 'Website', '1/1/2013 1:13PM', 170 ),
  ( 2, 'Mobile', '1/1/2013 2:10PM', 60 ),
  ( 3, 'Website', '1/1/2013 3:10PM', 180 ),
  ( 4, 'Website', '1/1/2013 3:20PM', 280 ),
  ( 5, 'Website', '1/1/2013 5:00PM', 60 ),
  ( 1, 'Website', '1/1/2013 5:05PM', 500 ),
  ( 3, 'Website', '1/1/2013 5:45PM', 120 ),
  ( 1, 'Mobile', '1/1/2013 6:00PM', 30 ),
  ( 2, 'Mobile', '1/1/2013 6:10PM', 90 ),
  ( 5, 'Mobile', '1/1/2013 7:30PM', 400 ),
  ( 3, 'Website', '1/1/2013 8:00PM', 30 ),
  ( 1, 'Mobile', '1/1/2013 9:30PM', 200 )

select * from @Logins

; with MostRecentLogins as (
  -- Logins with flags for channel and sequenced by   StartTime   (ascending) for each   UserId .
  select UserId, Channel, StartTime, DurationInSeconds,
    case when Channel = 'Website' then 1 else 0 end as WebsiteLogin,
    case when Channel = 'Mobile' then 1 else 0 end as MobileLogin,
    Row_Number() over ( partition by UserId order by StartTime ) as Seq
    from @Logins ),
  CumulativeDuration as (
  -- Start with the first login for each   UserId .
  select UserId, Seq, DurationInSeconds as CumulativeDurationInSeconds
    from MostRecentLogins
    where Seq = 1
  union all
  -- Accumulate additional logins for each   UserId   until the running total exceeds 300 or they run out of logins.
  select CD.UserId, MRL.Seq, CD.CumulativeDurationInSeconds + MRL.DurationInSeconds
    from CumulativeDuration as CD inner join
      MostRecentLogins as MRL on MRL.UserId = CD.UserId and MRL.Seq = CD.Seq + 1 and CD.CumulativeDurationInSeconds < 300 )
  -- Display the summary.
  select UserId, Sum( WebsiteLogin + MobileLogin ) as TotalLogins,
    Sum( WebsiteLogin ) as WebsiteLogins, Sum( MobileLogin ) as MobileLogins,
    ( select Max( Seq ) from CumulativeDuration where UserId = LT3.UserId and CumulativeDurationInSeconds >= 300 ) as LoginsNeededTo5Min
    from MostRecentLogins as LT3
    group by UserId
    order by UserId 
```

请注意，您的样本结果似乎有错误。 `UserId`3 在两次通话中达到 300 秒：180 + 120。您的示例显示了三个通话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T21:40:22.007

好的，这是一个`CURSOR`可能优于基于集合的解决方案的时代之一。可悲的是，我对游标不太擅长，所以我可以给你一个基本的解决方案供你尝试：

```
;WITH CTE AS
(
    SELECT *, ROW_NUMBER() OVER(PARTITION BY UserID ORDER BY [DateTime]) RN
    FROM UserLogins
), CTE2 AS
(
    SELECT  *, 1 RecursionLevel
    FROM CTE
    WHERE RN = 1
    UNION ALL
    SELECT  B.UserID, B.Channel, B.[DateTime], 
            A.DurationInSeconds+B.DurationInSeconds, 
            B.RN, RecursionLevel+1
    FROM CTE2 A
    INNER JOIN CTE B
        ON A.UserID = B.UserID AND A.RN = B.RN - 1
)
SELECT  A.UserID,
        COUNT(*) TotalLogins,
        SUM(CASE WHEN Channel = 'Website' THEN 1 ELSE 0 END) WebsiteLogins,
        SUM(CASE WHEN Channel = 'Mobile' THEN 1 ELSE 0 END) MobileLogins,
        ISNULL(MIN(RecursionLevel),0) LoginsNeedeto5Min
FROM UserLogins A
LEFT JOIN ( SELECT UserID, MIN(RecursionLevel) RecursionLevel
            FROM CTE2 
            WHERE DurationInSeconds > 300
            GROUP BY UserID) B
    ON A.UserID = B.UserID
GROUP BY A.UserID 
```

# sql - 如何在 SQL Server 中截断一定数量的字符后的结果

> ID：14840915
> 
> 赞同：1
> 
> 时间：2013-02-12T20:10:16.987
> 
> 标签：sql, sql-server-2008, excel

我试图在 32,759 个字符后截断结果，因为这是 excel 中的字符限制，这就是我的结果将被粘贴的地方。

到目前为止我尝试过的两种方法：

```
CONVERT(varchar(max), substring(comment,1,37259)) as [Comment]
CONVERT(varchar(max), ( substring(comment,1,8000) + substring(comment,8001,16000)...)) as [comment] 
```

编辑：似乎数据没有进入 varchar(max) 因为它返回的结果只有 8000 个字符。这是选择语句的一部分。我得到超过 32759 个字符的结果没有问题，只是它们在粘贴到 excel 时会进入下一行 - 这就是我试图截断的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T20:30:37.717

想通了，如果其他人遇到这个问题，不妨把它扔掉：

```
convert(varchar(max), ( cast(substring(comment,1,8000) as varchar(max)) +     
cast(substring(comment,8001,8000) as varchar(max)) + 
cast(substring(comment,16002,8000) as varchar(max)) + 
cast(substring(comment,24003,8000) as varchar(max)) + 
cast(substring(comment,32004,755) as varchar(max)) )) as 
[comment] 
```

看起来通过不强制转换每个部分，数据大小被设置为可以容纳所有部分的数据大小/类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T20:53:50.733

所有这些东西都不应该是必要的。如果`comment`是`varchar(max)`，你应该可以说：

```
SUBSTRING(comment, 1, 37259) 
```

如果是`text`，`ntext`那么您需要先转换它：

```
SUBSTRING(CONVERT(VARCHAR(MAX), comment), 1, 37259) 
```

（这显然比您的解决方案更整洁。）

# css - 使用 Sass 从媒体查询中扩展选择器

> ID：14840918
> 
> 赞同：103
> 
> 时间：2013-02-12T20:10:24.907
> 
> 标签：css, sass, media-queries

我有一个项目类和一个紧凑的“修饰符”类：

```
.item { ... }
.item.compact { /* styles to make .item smaller */ } 
```

这可以。但是，我想添加一个查询，当屏幕足够小时`@media`强制类紧凑。`.item`

乍一看，这就是我试图做的：

```
.item { ... }
.item.compact { ... }
@media (max-width: 600px) {
  .item { @extend .item.compact; }
} 
```

但这会产生以下错误：

> 您不能在@media 中@extend 外部选择器。您只能在同一指令中 @extend 选择器。

我将如何使用 SASS 完成此操作，而不必求助于复制/粘贴样式？

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2013-02-12T20:46:13.993

简单的答案是：你不能，因为 Sass 不能（或不会）为它编写选择器。您不能在媒体查询内部并扩展媒体查询之外的内容。如果它只是简单地复制它而不是尝试编写选择器，那肯定会很好。但事实并非如此，所以你不能。

# 使用混合

如果您要在媒体查询内部和外部重用一段代码并且仍然希望它能够扩展它，那么编写一个 mixin 和一个扩展类：

```
@mixin foo {
    // do stuff
}

%foo {
    @include foo;
}

// usage
.foo {
    @extend %foo;
}

@media (min-width: 30em) {
    .bar {
        @include foo;
    }
} 
```

# 从外部扩展媒体查询中的选择器

这不会真正帮助您的用例，但它是另一种选择：

```
%foo {
  @media (min-width: 20em) {
    color: red;
  }
}

@media (min-width: 30em) {
  %bar {
    background: yellow;
  }
}

// usage
.foo {
  @extend %foo;
}

.bar {
  @extend %bar;
} 
```

# 等到 Sass 解除这个限制（或者自己修补）

关于这个问题有许多正在进行的讨论（请不要对这些线程做出贡献，除非你有一些有意义的东西要添加：维护者已经意识到用户需要这个功能，这只是一个如何实现它以及它是什么的问题语法应该是）。

*   [https://github.com/sass/sass/issues/1050](https://github.com/sass/sass/issues/1050)
*   [https://github.com/sass/sass/issues/456](https://github.com/sass/sass/issues/456)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-12T21:58:48.927

作为记录，这是我最终解决问题的方法，只复制了一次生成的样式：

```
// This is where the actual compact styles live
@mixin compact-mixin { /* ... */ }

// Include the compact mixin for items that are always compact
.item.compact { @include compact-mixin; }

// Here's the tricky part, due to how SASS handles extending
.item { ... }
// The following needs to be declared AFTER .item, else it'll
// be overridden by .item's NORMAL styles.
@media (max-width: 600px) {
  %compact { @include compact-mixin; }

  // Afterwards we can extend and
  // customize different item compact styles
  .item {
    @extend %compact;
    /* Other styles that override %compact */
  }
  // As shown below, we can extend the compact styles as many
  // times as we want without needing to re-extend
  // the compact mixin, thus avoiding generating duplicate css
  .item-alt {
    @extend %compact;
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T20:48:42.647

我相信 SASS/SCSS 不支持`@extend`媒体查询中的指令。[http://designshack.net/articles/css/sass-and-media-queries-what-you-can-and-cant-do/](http://designshack.net/articles/css/sass-and-media-queries-what-you-can-and-cant-do/)

您可能需要改用 mixin，尽管需要根据您的目标权衡代码膨胀。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-01T18:16:39.610

这是我找到的最干净的部分解决方案。它在可能的情况下利用 @extend 并在媒体查询中回退到 mixins。

[Sass 中的跨媒体查询 @extend 指令](http://www.sitepoint.com/cross-media-query-extend-sass/)

有关详细信息，请参阅文章，但要点是您调用 mixin 的“占位符”，然后决定是输出 @extend 还是 @include。

```
@include placeholder('clear') {
   clear: both;
   overflow: hidden;
}

.a {
    @include _(clear);
}
.b {
    @include _(clear);
}
.c {
    @include breakpoint(medium) {
      @include _(clear);
   }
} 
```

最终，它可能并不比仅使用 mixins 更好，这是目前公认的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-23T14:42:32.877

我使用断点，但这是相同的想法：

```
@mixin bp-small {
    @media only screen and (max-width: 30em) {
        @content;
    } 
```

如何使用它：

```
.sidebar {
    width: 60%;
    float: left;
    @include bp-small {
        width: 100%;
        float: none;
    }
} 
```

有[一个关于 mixins 的文本](https://kolosek.com/sass-mixins/)，您可以在其中找到有关此选项的更多信息。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-02-12T20:18:46.527

可以重组吗？

```
.compact { //compact-styles }
.item {}
.item.compact { @extend .compact } 

@media (max-width: 600px) {
    .item { @extend .compact; }
} 
```

如果我正确理解了文档，那应该可以。我认为您尝试的方式行不通的原因是它在解析@extend 时看不到 .item.compact，但这是一个不知情的猜测，所以请用一卡车的盐来处理！:)

# ruby-on-rails - Rails 控制台：NameError：未初始化的常量

> ID：14840919
> 
> 赞同：0
> 
> 时间：2013-02-12T20:10:25.817
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我刚刚在我的应用程序中添加了一个名为 Collector 的新模型。

我正在尝试使用服务器上的控制台进行一些数据更改：

```
GsCollector.all.each do |gsc|
  coll = Collector.new
  coll.project_id = gsc.project_id
  coll.kind = 'GsCollector'
  coll.optional = gsc.optional
  coll.included = gsc.included
  coll.save
  gsc.collector_id = coll.id
  gsc.save

  gsc.custom_descriptions.each do |cd|
    cd.collector_id = coll.id
    cd.save
  end

  gsc.order_notes.each do |note|
    note.collector_id = coll.id
    note.save
  end
end 
```

但这失败了：

```
GsCollector Load (0.3ms)  SELECT `gs_collectors`.* FROM `gs_collectors` 
NameError: uninitialized constant Collector
    from (irb):2:in `block in irb_binding'
    from (irb):1:in `each'
    from (irb):1 
```

这里有什么问题？我的开发机器上控制台中的这些命令运行良好。我确实迁移了服务器上的数据库。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-12T20:17:42.050

运行命令

```
reload! 
```

或重新启动终端以获得良好的结果

# regex - 正则表达式查找到特定文件的所有可能的相对链接 - 还捕获链接文本

> ID：14840920
> 
> 赞同：2
> 
> 时间：2013-02-12T20:10:29.707
> 
> 标签：regex, dreamweaver

是的，SO 上有数百个 [regex] [html] 主题，但我检查的前 30 个主题对我的问题没有帮助。

我有 745 个总链接（都是相对的，并且它们必须保持相对）到我网站中的一个文件。我需要找到所有这些链接并在它们之前和之后附加数据。我还需要捕获和使用链接文本。

我已经尝试了几个表达式，下面的正则表达式是我能得到的最接近的，但它还不够好 - 它不断地在不同的文件中找到一些其他 href 的实例，并将内容一直捕获到`</a>`我的文件的其实在乎。

```
<a href="((.)*?)?myFile.html((.)*?)?>((.)*?)?</a> 
```

在上面，我需要捕获文件的相对路径和可能存在的任何锚点，以及实际的链接文本。

*我应该*使用什么正则表达式？

没关系，但我正在使用 Adob​​e Dreamweaver 执行搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:27:01.077

试试这个正则表达式：（更新）

```
href="([^"]*?)myFile\.html#?([^"]*).*?>(.*?)<\/a> 
```

在这里解释演示：[http ://regex101.com/r/lA6vB7](http://regex101.com/r/lA6vB7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T20:27:54.443

以下正则表达式应该可以满足您的需要：

```
<a href="([^"]*?a\.fparameters\.html)(#[^"]+?)?".*?>(.*?)< 
```

即使您有以下网址，它也可以工作：

```
<a href="a.fparameters.html">JOBMAXNODECOUNT</a> 
```

那没有`#xxxx`。

**几个例子：**

因为`<a href="a.fparameters.html#jobmaxnodecount">JOBMAXNODECOUNT</a>`你会得到：

*   第一组：`a.fparameters.html`
*   第 2 组：`#jobmaxnodecount`
*   第 3 组：`JOBMAXNODECOUNT`

因为`<a href="commands/mjobctl.html#modify">mjobctl -m</a> to modify the job after it has been submitted. See the <a href="a.fparameters.html#rsvsearchalgo">RSVSEARCHALGO</a>`你只会得到**一场比赛**：

*   第一组：`a.fparameters.html`
*   第 2 组：`#rsvsearchalgo`
*   第 3 组：`RSVSEARCHALGO`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T22:47:28.900

首先，永远不要这样做：`(.)*`...或者这样：`(?:.)*`

第一个每次消耗一个字符并将其捕获在一个组中，每次都会覆盖先前捕获的字符。第二个通过使用非捕获组避免了大部分开销，但它仍然一次只匹配该组内的一个字符；何苦？它所做的只是弄乱正则表达式。

添加`?`以使其不贪婪 - 例如`(.)*?`- 不会让它变得更糟，但它也无济于事。将其粘贴在另一个组中并使该组成为可选的——即`((.)*?)?`——是[灾难性回溯的秘诀。](http://www.regular-expressions.info/catastrophic.html). 但是除了性能考虑之外，当我看到一个附加了量词的捕获组时，作者几乎总是会出错。（[参考](http://www.regular-expressions.info/captureall.html)）

至于你的问题，我的解决方案与[Oscar 的](https://stackoverflow.com/a/14841200/20938)解决方案几乎相同：

```
<a href="([^#"]*?a\.fparameters\.html)(?:#([^"]*))?">([^<>]*)</a> 
```

# visual-studio-debugging - 命中函数（在外部 .net dll 中）时，Visual Studio 调试器不会中断

> ID：14840925
> 
> 赞同：1
> 
> 时间：2013-02-12T20:10:45.523
> 
> 标签：visual-studio-debugging

我按照[此处](https://stackoverflow.com/questions/1377382/visual-studio-debugger-break-on-entering-an-external-function)描述的步骤在外部 dll 中定义的函数被命中时中断，但它对我不起作用。也许我错过了一个设置。我怎样才能让它工作？

清单：
-仅启用我的代码已禁用
-外部 dll (System.Data.Entity.dll) 的符号似乎已加载（见下文）

![在此处输入图像描述](../Images/5bdbeb55b5a45c0b8cf488199714369c.png)

编辑：答案是将代码编译为 32 位。它对我有用，不能说它是否适用于其他人。

一些注意事项：有一个有用的工具可以了解。它叫`srctool.exe`. 它带有适用于 Windows 的调试工具，并安装在`c:\Program Files\Debugging Tools for Windows (x64)\srcsrv`我的机器上。您可以在 pdb 文件上运行它，它会告诉您文件是否已被源索引。如果 pdb 文件是源代码索引的，则 pdb 文件中嵌入了一个链接，该链接指向可以从中获取源代码的位置。例如，我看到 srctool.exe 的输出：

```
[f:\dd\ndp\fx\src\DataEntity\System\Data\Objects\DataClasses\RelatedEnd.cs] trg: http://referencesource.microsoft.com/source/NET/4.5/net//ndp/fx/src/DataEntity/System/Data/Objects/DataClasses/RelatedEnd.cs/550320/RelatedEnd.cs 
```

如果 pdb 文件没有源索引怎么办？这是否意味着 VS 将无法向您显示来源、步骤等？我想是的，虽然我不是专家。我发现[这个](http://www.wintellect.com/cs/blogs/jrobbins/archive/2009/05/11/pdb-files-what-every-developer-must-know.aspx)链接是半有用的。

无论如何，回来，对我来说，从 pdb 文件中的嵌入式链接获取代码意味着运行这个命令（VS 会给你一个弹出窗口，它会要求你运行命令；如果它失败你不会知道；唯一的方法知道它是否成功是从控制台自己运行它），它给出了一个错误。

```
tf.exe view /version:550320 /noprompt “$/[omitted]/[file].cs” /server:http://[omitted] /console > [file.cs] 
```

为了解决这个限制，我从[http://referencesource.microsoft.com/netframework.aspx](http://referencesource.microsoft.com/netframework.aspx)手动下载了 .net 框架源代码。这里也有一个问题：文件被下载为 .aspx ，它没有做任何事情。原来你必须重命名为.msi。然后运行可执行文件。请参阅此链接：[http ://social.msdn.microsoft.com/Forums/en-US/refsourceserver/thread/f17c11c1-72f6-4529-bafe-5a1d79b72bd7](http://social.msdn.microsoft.com/Forums/en-US/refsourceserver/thread/f17c11c1-72f6-4529-bafe-5a1d79b72bd7)

我简直不敢相信我遇到了多少问题。

# c# - Multiple Dispatch with Generics

> ID：14840931
> 
> 赞同：2
> 
> 时间：2013-02-12T20:11:18.400
> 
> 标签：c#, generics, dynamic-dispatch, multiple-dispatch

I'm trying to abstract away my interface implementations by providing a factory/builder using generics. However, I'm running into an issue with multiple dispatch and C# generics at run time that's doing something that seems odd.

The basic scenario is I've defined several interfaces:

```
public interface IAddressModel
{
}

public interface IUserModel
{
} 
```

Then I have a factory class to return the actual implementations:

```
public class Factory
{
    public T BuildModel<T>()
    {
        return BuildModel(default(T));
    }

    public object BuildModel(object obj)
    {
        //this is here because the compiler will complain about casting T to
        //the first inteface parameter in the first defined BuildModel method
        return null;
    }

    public IAddressModel BuildModel(IAddressModel iModel)
    {
        //where AddressModel inherits from IAddressModel
        return new AddressModel();
    }

    public IUserModel BuildModel(IUserModel iModel)
    {
        //where UserModel inherits from IUserModel
        return new UserModel(); 
    }
} 
```

The issue is when the factory is called like this: `new Factory().BuildModel<IAddressModel>()` The BuildModel(...) method that is dispatched at run time from generics is always the least derived form of T, in this case always object.

However, if you call `new Factory().BuildModel(default(IAddressModel));` the correct method is displatched (most likely because this is done at compile time). It seems that dynamic dispatch with generics doesn't check the methods for the most derived type even though the method called should be the same whether it's done at compile time or run time. Ideally I'd like to make the BuildModel(...) methods private and only expose the generic method. Is there another way to get dynamic displatch to call the correct method at run time? I've tried changing the `BuildModel<>()` implementation to `return BuildModel((dynamic)default(T))` but this throws a run time error about not being able to determine which method to dispatch. Is there maybe a way to do this with contravariance and more interfaces?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T21:13:28.810

You might be able do the dispatch yourself based on the argument type `T`:

```
public class Factory
{
    private Dictionary<Type, Func<object>> builders = new Dictionary<Type, Func<object>>
    {
        { typeof(IAddressModel), BuildAddressModel },
        { typeof(IUserModel), BuildUserModel }
    };

    public T Build<T>()
    {
        Func<object> buildFunc;
        if (builders.TryGetValue(typeof(T), out buildFunc))
        {
            return (T)buildFunc();
        }
        else throw new ArgumentException("No builder for type " + typeof(T).Name);
    }

    private static IAddressModel BuildAddressModel()
    {
        return new AddressModel();
    }

    private static IUserModel BuildUserModel()
    {
        return new UserModel();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T21:04:26.610

The current state of the code requires an explicit cast to compile.

```
public T BuildModel<T>()
{
    return (T)BuildModel(default(T));
} 
```

BuildModel is treating T polymorphically as an object. `BuildModel` does not know that T is an `IAddressModel` or an `IUserModel` unless you define such a restriction:

```
public T BuildModel<T>() where T: IAddressModel
{            
    Console.WriteLine(typeof(T));
    return (T)BuildModel(default(T));
} 
```

Now, the compiler has enough information to recognize that T is an `IAddressModel`. But, what you are after is for `object` to become a more derived parameter (covarient) which is not type safe. In other words, C# does not support covarient parameter types because it is not type safe.

You can still achieve factory like behavior via conditional logic:

```
 public T BuildModel<T>()
    {
        T result = default(T);

        if (typeof(T) == typeof(IAddressModel))
            result = (T)BuildModel((IAddressModel)result);
        else if (typeof(T) == typeof(IUserModel))
            result = (T)BuildModel((IUserModel)result);

        return result;
    } 
```

# php - 如果未填充自定义字段，则用于显示备用图像的 PHP 代码

> ID：14840934
> 
> 赞同：0
> 
> 时间：2013-02-12T20:11:21.410
> 
> 标签：php, image, wordpress, placeholder, custom-fields

如果未提供图像自定义字段，我正在尝试显示可能称为占位符图像的内容

我已经走了这么远，但有点卡住了。输出显示代码。这是我正在使用的 PHP。

```
$my_image = get_post_meta($post->ID, 'ecpt_images', true);

if( isset($my_image) && $my_image != '') {
    echo '<img src="'.$my_image.'" width="230px" height="175px" />';
} else { 
    echo '<img src="/wp-content/uploads/2013/02/Poor.png">';
} 
```

非常感谢您提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:26:51.750

检查您是否使用**了短开标签** `<? /* your code */ ?>`。此设置默认禁用，不推荐使用。确保将代码正确包装在`<?php /* your code */ ?>`.

# mongodb - MongoDB 中的唯一 ID

> ID：14840935
> 
> 赞同：0
> 
> 时间：2013-02-12T20:11:25.440
> 
> 标签：mongodb

我即将部署我的第一个使用 MongoDB 的 Web 服务的生产版本。此 Web 服务可能容易受到攻击（黑客）。我一直使用内置的 Object-ID 作为每个值的唯一标识符，这是公开的（或至少对经过身份验证的用户）。

考虑到它是建立在对象创建时间戳、机器和进程 ID 等数据上的（[http://docs.mongodb.org/manual/core/object-id/](http://docs.mongodb.org/manual/core/object-id/)），这可能是一个问题吗？是不是我提供了太多关于对象创建时间、使用了多少台机器等的信息？你的建议是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T20:29:43.247

并不真地。它不能用于绘制您的网络或机器或查找隐藏的对象，甚至不能绘制您的流量和加载时间（正如我在尝试中发现的那样）。

例如，与自动递增 ID 不同，您无法轻松判断使用什么时间戳或 PID 或机器 ID 创建下一个 ObjectID。这使得抓取隐藏对象变得非常困难，特别是如果您没有在某处公开链接到它们。

PID 和机器 ID 并不能很好地识别有关您网络的任何内容，并且 PID 几乎可以随时更改，无论进程是否重新启动或您是否重新启动服务器；或者，如果您使用的是 PHP 之类的语言，则每次有新连接进入时。

机器 ID 是另一条无用的信息，除了您的计算机之外，它不会真正为任何人提供任何有意义的结果。我认为它不再使用网络接口 ID（某些驱动程序使用了），因此它不能用于从外部识别机器。

所以简而言之，不是真的。

# sql - SQL 查询连接表 - Oracle

> ID：14840941
> 
> 赞同：0
> 
> 时间：2013-02-12T20:11:37.350
> 
> 标签：sql, oracle11g

以示例 HR 模式为例。查找没有 LOCATION_ID = 1700 的员工的查询是什么
我已经尝试使用内部联接进行查询，但我不知道如何走得更远。
结果查询应该是这样的

```
select * from employees
inner join  departments on
    employees.DEPARTMENT_ID=departments.DEPARTMENT_ID
-->  and where departments.location_id != '1700' 
```

因为我以 HR 模式为例。我想补充一点，在我原来的情况下 location_id 是一个 varchar2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T20:14:08.067

我假设你想在 Sql 中查询

```
select * from employees
    inner join  departments on
      employees.DEPARTMENT_ID=departments.DEPARTMENT_ID
where departments.location_id <> 1700 
```

# maven-release-plugin - maven 发布插件 release.properties 文件包含未加密的密码

> ID：14840948
> 
> 赞同：7
> 
> 时间：2013-02-12T20:12:01.483
> 
> 标签：maven-release-plugin

我正在运行 maven 发布插件（org.apache.maven.plugins:maven-release-plugin:2.3.2）并注意到当通过传递时，scm 的密码以明文形式保存在 release.properties 文件中命令行。我想知道是否有办法关闭它。

我正在使用 Hudson 来自动化发布过程，并且通过 Hudson 将 svn 用户名和密码传递到命令行。原因是做发布准备的人可以改变，我有多个 hudson 工作共享一个 settings.xml 来发布不同的项目。

我传入的参数如下： -Dtag=${svn.label} -DreleaseVersion=${maven.releaseVersion} -DdevelopmentVersion=${maven.developmentVersion} -Dusername=${svn.username} -Dpassword=${ svn.password} -DscmCommentPrefix='[maven-release-plugin] ${env.BUILD_URL}'

release.properties 文件是在 release:prepare 期间创建的，但我认为没有必要，因为我正在通过命令行传递所有信息。创建此 release.properties 文件时，它包含纯文本密码。这是有问题的，因为可以使用 hudson 浏览工作区，因此任何有权访问 hudson 的人都可以通过浏览器打开文件来查看密码。

有没有办法不创建 release.properties 文件，或者不将密码保存在文件中？我意识到可以将加密密码保存在 settings.xml 文件中，但该文件在多个作业之间共享，并且运行作业的人员无法编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-07T15:59:50.367

就在几天前，有人要求进行这种改进：[https ://jira.codehaus.org/browse/MRELEASE-846](https://jira.codehaus.org/browse/MRELEASE-846)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T17:09:26.123

我们避免了让 svn-client 为我们缓存密码的问题。

为此，我们有一个特殊帐户，具有足够的颠覆权限。

在我们的构建服务器上，密码由 svn-client 以纯文本形式存储在运行 hudson 的用户的帐户中。对我们来说没问题，因为只有 hudson 管理员才能访问此帐户。

但是你也可以配置 svn-client 来存储加密的密码。配置取决于您的操作系统。

svn-client 配置存储在 .subversion (linux) 或 "ApplicationData/Subversion" (windows) 中。

看 [这里](https://stackoverflow.com/questions/5062232/svn-wont-cache-credentials)、[这里](https://stackoverflow.com/questions/3824513/svn-encrypted-password-store)或[这里](https://stackoverflow.com/questions/2899209/how-to-save-password-when-using-subversion-from-the-console)。

# mysql - 使用具有 DISTINCT 的两个表进行查询

> ID：14840950
> 
> 赞同：0
> 
> 时间：2013-02-12T20:12:06.063
> 
> 标签：mysql

我有两个表 - 客户和 - 组

我需要从客户那里获取县和邮编，并从组中分配组

当我搜索时，我无法得到不同的结果，也就是说，输出显示 100 个客户，邮政编码为 12345，位于 main st 组的 jones 县。

我需要将每个邮编和县按组列出一次。我已经用谷歌搜索并尝试了很多方法，但它超出了我的范围。

谁能协助引导我走向正确的道路

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:15:04.593

添加`GROUP BY group, city, zip`到查询的末尾应该可以满足您的需求。它只会返回三者的唯一组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T20:37:01.493

大概你有类似的东西：

```
select g.*, c.county, c.zip
from clients c join groups g on <some join condition> 
```

您希望每组有一个结果。因此，添加一个`group by`子句，例如：

```
group by g.id  -- assuming id uniquely identifies each group 
```

这将为其他字段提供*任意*值，这对于您正在做的事情可能就足够了。（这使用称为隐藏列的 MySQL 功能。）

# unix - 如何在 UNIX 中删除每行末尾的字符

> ID：14840953
> 
> 赞同：67
> 
> 时间：2013-02-12T20:12:15.097
> 
> 标签：unix, awk, sed

我想删除`,`文件中每一行末尾的逗号。除了在中使用子字符串函数之外，我还能怎么做`awk`？

样本输入：

```
 SUPPLIER_PROC_ID BIGINT NOT NULL,
        BTCH_NBR INTEGER NOT NULL,
        RX_BTCH_SUPPLIER_SEQ_NBR INTEGER NOT NULL,
        CORRN_ID INTEGER NOT NULL,
        RX_CNT BYTEINT NOT NULL,
        DATA_TYP_CD BYTEINT NOT NULL,
        DATA_PD_CD BYTEINT NOT NULL,
        CYC_DT DATE NOT NULL,
        BASE_DT DATE NOT NULL,
        DATA_LOAD_DT DATE NOT NULL,
        DATA_DT DATE NOT NULL,
        SUPPLIER_DATA_SRC_CD BYTEINT NOT NULL,
        RX_CHNL_CD BYTEINT NOT NULL,
        MP_IMS_ID INTEGER NOT NULL,
        MP_LOC_ID NUMERIC(3,0),
        MP_IMS_ID_ACTN_CD BYTEINT NOT NULL,
        NPI_ID BIGINT, 
```

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-02-12T20:14:47.653

尝试这样做：

```
awk '{print substr($0, 1, length($0)-1)}' file.txt 
```

这比仅仅删除最后一个逗号而是任何最后一个字符更通用

如果您只想用 awk 删除最后一个逗号：

```
awk '{gsub(/,$/,""); print}' file.txt 
```

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2013-02-12T20:14:08.147

您可以使用 sed：

```
sed 's/,$//' file > file.nocomma 
```

并删除最后一个字符：

```
sed 's/.$//' file > file.nolast 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-12-09T22:46:55.793

基于的`awk`代码`RS`。

```
awk '1' RS=',\n' file 
```

或者：

```
awk 'BEGIN{RS=",\n"}1' file 
```

最后一个示例对*newline*之前的**任何 char**都有效：

 *```
awk '1' RS='.\n' file 
```

**注意**：*点* `.`匹配除*换行符*以外的任何字符。

**解释**

`awk`允许我们使用不同的记录（行）分隔符，我们只需要在*换行符*（或*任何*字符）`regex`之前包含逗号，用于.*`dot`*`input``RS`**

 ****注意**：这是什么`1`意思？

*简短的回答*，这只是避免使用该`print`语句的捷径。当`awk`条件匹配时，默认操作是打印输入行，例如：

```
$ echo "test" |awk '1'
test 
```

那是因为`1`will 总是**true**，所以这个表达式等价于：

```
$ echo "test"|awk '1==1'
test
$ echo "test"|awk '{if (1==1){print}}'
test 
```

**文档**

*Check* [Record Splitting with Standard awk](https://www.gnu.org/software/gawk/manual/html_node/awk-split-records.html#awk-split-records) and [Output Separators](https://www.gnu.org/software/gawk/manual/html_node/Output-Separators.html#Output-Separators).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-07T16:45:23.077

此 Perl 代码删除了行尾的逗号：

```
perl -pe 's/,$//' file > file.nocomma 
```

如果逗号后有空格，此变体仍然有效：

```
perl -lpe 's/,\s*$//' file > file.nocomma 
```

此变体就地编辑文件：

```
perl -i -lpe 's/,\s*$//' file 
```

此变体就地编辑文件，并进行备份`file.bak`：

```
perl -i.bak -lpe 's/,\s*$//' file 
```***

# android - 软键盘关闭后PhoneGap + Android页面不刷新

> ID：14840960
> 
> 赞同：0
> 
> 时间：2013-02-12T20:12:53.513
> 
> 标签：android, cordova

大多数时候（但并非总是如此），当我完成输入 a or 并且软键盘隐藏时，视图区域会被抬高，底部有一个黑色空间。点击、倾斜或以其他方式接合手机可校正屏幕。然而，用户的第一个动作通常是按下，但如果你点击提交它会跳下来，你实际上只是再次点击文本区域。如何在键盘关闭后停止此操作并重置屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:31:52.437

看看你的AndroidManifest.xml

[http://developer.android.com/guide/topics/manifest/activity-element.html](http://developer.android.com/guide/topics/manifest/activity-element.html)

我认为你需要改变`android:configChanges`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:09:26.770

我遇到了完全相同的问题，即使在 javascript 中也可以处理 hidekeyboard 并执行诸如 window.scrollTo(0,0) 或 $("input[type=text],textarea").blur(); 之类的操作。这将导致屏幕回到正常位置

但是，当从 type = text 的输入字段单击输入字段密码时，它会在内部隐藏键盘，这会导致 hidekeyboard 事件触发并将屏幕滚动到顶部。这是唯一的副作用

如果您找到解决方案，请告诉我

# asp.net - Response.Redirect 未评估

> ID：14840966
> 
> 赞同：0
> 
> 时间：2013-02-12T20:13:06.817
> 
> 标签：asp.net, ajax, vb.net, formsauthentication

我的 Default.aspx 页面上有以下用于登录的 ajax 脚本

```
$(document).ready(function () {
    $('#UserLogin').submit(function (e) {
        $.post("LoginApp.aspx?formpost=Login", { UserID: $("#UserID").val(),
            UPass: $("#UPass").val()
        },
        function (response) {
            if (response === "failed") {
                $("#ErrorDiv").html(response).show();
                // LocalStorage.set('Error', response);
            }
        });

        e.stopPropagation();
        return false;
    });
}); 
```

和以下 FormAuth

```
 If Request.QueryString("formpost") = "Login" Then

    If App.LoginUser(Request.Form("UserID").Trim, Request.Form("UPass").Trim) Then

        FormsAuthentication.RedirectFromLoginPage(Request.Form("UserID").Trim, False)
        If Request.QueryString("ReturnUrl") <> "" Then
            Response.Redirect(Request.QueryString("returnUrl"))
        Else
            Try
                Response.Redirect("secured/")     
            Catch ex As Exception

            End Try

        End If
    Else
        Response.Write("failed")
    End If
Else

    Response.Redirect(".")

End If 
```

问题是 Response.Redirect("secured/") 不起作用。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:26:29.560

您必须处理来自 javascript 的重定向。由于您没有进行回发，因此服务器永远无法完全控制页面。

# android - 从 res 中从 Drawable 创建位图的有效方法（BitmapFactory vs Type Casting）

> ID：14840967
> 
> 赞同：5
> 
> 时间：2013-02-12T20:13:15.787
> 
> 标签：android, bitmap, android-resources, bitmapfactory, android-drawable

哪种方法更有效地从资源中的 Drawable 创建位图？

```
Bitmap myBitmap = BitmapFactory.decodeResource(context.getResources(),
                                       R.drawable.icon_resource); 
```

VS

```
Drawable myDrawable = getResources().getDrawable(R.drawable.icon_resource);
Bitmap myBitmap = ((BitmapDrawable) myDrawable).getBitmap(); 
```

由于 API 22 上述方法已被弃用，因此请使用以下方法

```
Drawable myDrawable = ContextCompat.getDrawable(context, R.drawable.icon_resource) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:20:28.727

您可以在[http://source.android.com](http://source.android.com)上查看位图工厂的源代码， 特别是 decodeResource 的代码。

我认为使用 BitmapFactory 是首选，但在任何一种情况下，如果您正在解码多个位图，那么您应该调用一次 getResources() 并存储结果以用作函数的资源参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-08T20:25:24.960

两者都应该具有相似的解码性能。事实上，Drawable 的初始创建会调用`Drawable.createFromResourceStream()`which 调用`BitmapFactory.decodeResourceStream()`.

但是，`Resources.getDrawable()`使用`Context.getDrawable()`Drawable**缓存**，因此如果您使用此 API 多次加载同一个 Bitmap，如果 Drawable 在缓存中，则可以跳过解码，性能会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-08T19:53:39.263

```
Bitmap myBitmap = BitmapFactory.decodeResource(context.getResources(),
                                       R.drawable.icon_resource); 
```

根据文档，当我们从 inputStream 构建位图时，上述方法是最好的

VS

```
Drawable myDrawable = ContextCompat.getDrawable(context, R.drawable.icon_resource)
Bitmap myBitmap = ((BitmapDrawable) myDrawable).getBitmap(); 
```

该解决方案被广泛使用并且性能更好，因为它只返回此可绘制对象用于渲染的位图。

# search - 当我单击 modx ajaxSearch 中的结果链接时如何修复此问题？

> ID：14840969
> 
> 赞同：0
> 
> 时间：2013-02-12T20:13:18.817
> 
> 标签：search, character-encoding, modx

我在这个网站上使用了ajaxSearch：`http://www.rhemapress.pl/www_poradnia/`当我输入一些东西时，例如：`czwarta`或者`wspomaganie`当我点击一个返回链接时，它会将我重定向到这个文档，但是在这个链接的末尾是这样的： `&searched=wspomaganie&advsearch=oneword&highlight=ajaxSearch_highlight+ajaxSearch_highlight1`我得到了这个错误我点击后。

```
 MODx encountered the following error while attempting to parse the requested resource:
  htmlentities() [function.htmlentities]: charset `ISO-8859-2' not supported, assuming iso-8859-1
  /home/users/rhemapress/public_html/rhemapress/www_poradnia/manager/includes/document.parser.class.inc.php(790) : eval()'d code 
```

哪里有问题？我怎样才能正确地做到这一点？数据库是UTF8。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:44:43.987

我认为您需要替换字符集，类似于他们在此处的操作方式：

[http://forums.modx.com/index.php?topic=17161.0](http://forums.modx.com/index.php?topic=17161.0)

查找与此类似的实例，特别是“etomite_charset”：

```
htmlentities($output,ENT_QUOTES,$modx->config['etomite_charset']);

```

替换为与此类似的内容：

```
htmlentities（$输出，ENT_QUOTES）；

```

但是我不知道这将出现在 ajax 搜索插件中的所有实例。

# perl - perl 从命令行查找和替换。特殊的角色？

> ID：14840973
> 
> 赞同：1
> 
> 时间：2013-02-12T20:13:34.397
> 
> 标签：perl, bash, command-line, replace

所以，我四处寻找这个问题的答案，确实我找到了一些，但似乎没有一个工作......

我有一个文件夹，里面装满了需要修改的 bash 脚本。具体来说，我需要更换线路

```
INPUT=/data/scratch02/mpgussert/HAWC-30/${RUN}_reco 
```

和

```
INPUT=/data/hawc01/hawcroot/data/hawc/reconstructed/quesadilla/${RUN} 
```

我试过这个

```
perl -w -i -p -e "s'INPUT=/data/scratch02/mpgussert/HAWC-30/${RUN}_reco'INPUT=/data/hawc01/hawcroot/data/hawc/reconstructed/quesadilla/${RUN}'g" *.sh 
```

它执行没有错误，但没有找到并替换所需的文本。据我了解，使用 ' 来区分正则表达式应该在没有特殊字符替换的情况下进行搜索。那是对的吗？如果是这样，有什么想法会失败吗？

我也试过

```
perl -w -i -p -e "s/INPUT=\/data\/scratch02\/mpgussert\/HAWC-30\/\$\{RUN\}_reco/INPUT=\/data\/hawc01\/hawcroot\/data\/hawc\/reconstructed\/quesadilla\/\$\{RUN\}/g" *.sh 
```

反斜杠应该忽略特殊字符替换，但这会返回以下错误。

```
Backslash found where operator expected at -e line 1, near "RUN\"
syntax error at -e line 1, near "RUN\"
Execution of -e aborted due to compilation errors. 
```

所以它正在搜索 RUN\，这不是我想要的......有什么想法吗？我将不胜感激您能提供的任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:06:36.983

您希望模式为`...\$\{RUN\}...`，但这不是您要传递的：

```
$ echo "...\$\{RUN\}..."
...$\{RUN\}... 
```

您要么需要进行更多转义，要么切换到单引号。

```
$ echo '...\$\{RUN\}...'
...\$\{RUN\}... 
```

全部一起：

```
perl -i -wpe'
    s{INPUT=/data/scratch02/mpgussert/HAWC-30/\$\{RUN\}_reco}
     {INPUT=/data/hawc01/hawcroot/data/hawc/reconstructed/quesadilla/\${RUN}}g
' *.sh 
```

# macos - awk 中的值匹配如何工作？

> ID：14840977
> 
> 赞同：0
> 
> 时间：2013-02-12T20:13:56.997
> 
> 标签：macos, bash, awk

我有一个 csv 文件，它有各种列，其中一个列是日期列，所以对于给定的日期，我想从 csv 中获取所有记录，我不能使用 grep 的原因是那个日期可能在其他专栏中，我不希望那样。

到目前为止，这就是我所得到的，

日期是这种格式：

```
sed 's/\"//g' kk.csv | awk -F ',' '{print $4}'   '$4 ~ /^2012.*/' 
```

首先我删除所有的“”引号，然后我指定了分隔符'，'然后我在文件的第 4 列应用条件，即日期列，但它不起作用，我正在做什么书上说。

谁能指出我做错了什么，这是与报价相关的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:40:55.277

无需使用 sed。只要 awk 就够搜索了

```
awk -F, '$4 ~ "^\"2012"' kk.csv 
```

这将打印第 4 列以“2012”开头的所有行

如果你想要格式化输出（删除引号等） awk 也这样做

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T20:24:45.677

`awk`只接受一个脚本，而你给它两个（`{printf $4}`和`$4 ~ /^2012.*/`）。`condition { commands }`使用 awk 的语法将它们加入到一个 awk 脚本中：

```
sed 's/\"//g' kk.csv  | awk -F ',' '$4 ~ /^2012.*/ {print $4}' 
```

# c# - 在 datagridview 的工具提示中显示图像

> ID：14840979
> 
> 赞同：7
> 
> 时间：2013-02-12T20:14:01.017
> 
> 标签：c#, winforms, datagridview, tooltip

**背景：**我正在使用 c# 中的 winforms。我不希望图像显示在 datagridview 单元格中，我只在数据库中存储了路径并在数据库中的 datagridview 中显示它们。

**问题：**当用户输入一个单元格时，会弹出一个工具提示。我需要的是，当当前单元格的列索引为 2 时，工具提示应该显示来自当前单元格中给定路径的图像。

我发现[这篇文章](http://www.codeproject.com/Articles/42050/ToolTip-With-Image-C)非常好。但无法获得成功。我有以下代码

```
 void CustomizedToolTip_Popup(object sender, PopupEventArgs e)
    {
        DataGridView parent = e.AssociatedControl as DataGridView;
        if (parent.CurrentCell != null)
        {
            if (parent.CurrentCell.ColumnIndex == 2)
            {
                Bitmap bmpIn = new Bitmap(parent.CurrentCell.Value + "");
                using (Graphics g = Graphics.FromImage(bmpIn))
                {
                    Rectangle mr = new Rectangle(5, 5, 50, 50);
                    mr.Location = new Point(5, 5);
                    g.PageUnit = GraphicsUnit.Pixel;
                    g.DrawImage(bmpIn, mr);
                }
            }
        }
    } 
```

我认为这段代码应该绘制图像，但它不是绘制，而且除了绘制之外我不确定位置，即使我可以绘制，如何在tootip中定位它。我无法从我提到的文章中理解它。下面是我的数据网格视图的图像。

![在此处输入图像描述](../Images/2f81fdc7946ce450a803044db9f62e36.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T21:05:13.793

我为一个项目做了类似的事情。

相反，我只是使用了一个我设置为打开`CellMouseOver`，关闭的表单`CellMouseLeave`

```
 frm_MouseOverPicture HoverZoom = new frm_MouseOverPicture();

    private void dgv_CellMouseEnter(object sender, DataGridViewCellEventArgs e)
    {
       DataGridView dgv_sender = sender as DataGridView;
       DataGridViewCell dgv_MouseOverCell = dgv_sender.Rows[e.RowIndex].Cells[e.ColumnIndex];

       //Get FilePath from dgv_MouseOverCell content

       //Get x, y based on position relative to edge of screen
       //x, y = top left point of HoverZoom form

       HoverZoom.LoadPicture(FilePath);
       HoverZoom.Location = new System.Drawing.Point(x, y);
       HoverZoom.Show();

    }

    private void dgv_CellMouseLeave(object sender, DataGridViewCellEventArgs e)
    {
       HoverZoom.Hide();
       HoverZoom.ClearPicture();
    } 
```

希望这与您正在寻找的内容足够接近。我只是制作了没有边框的表格，并在整个东西上放了一个图片框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-21T13:25:17.483

只需将图片框添加到您的表单并将大小模式设置为“StretchImage”和visible=false，然后将以下事件添加到您的datagridview

```
 private void metroGrid1_CellMouseEnter(object sender, DataGridViewCellEventArgs e)
    {
        DataGridView dgv_sender = sender as DataGridView;
        DataGridViewCell dgv_MouseOverCell=null;
        if (e.RowIndex > 0 && e.ColumnIndex > 0 && e.RowIndex <dgv_sender.RowCount && e.ColumnIndex<dgv_sender.ColumnCount)
        {
          dgv_MouseOverCell = dgv_sender.Rows[e.RowIndex].Cells[e.ColumnIndex];
        }
        if(dgv_MouseOverCell !=null)
        if (e.ColumnIndex == 4) {
            if (dgv_MouseOverCell.Value != null)
            {
                if (File.Exists(dgv_MouseOverCell.Value.ToString()))
                {
                    Image img = Image.FromFile(dgv_MouseOverCell.Value.ToString());
                    pictureBox1.ImageLocation = dgv_MouseOverCell.Value.ToString();
                    pictureBox1.Location = new System.Drawing.Point(Cursor.Position.X - this.Location.X, Cursor.Position.Y - this.Location.Y);
                    pictureBox1.Visible = true;
                }
            }
        }
    }

    private void metroGrid1_CellMouseLeave(object sender, DataGridViewCellEventArgs e)
    {
        pictureBox1.Visible = false;
    } 
```

[点击这里查看图片](https://i.stack.imgur.com/TbVLW.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T22:27:12.000

```
 void CustomizedToolTip_Popup(object sender, PopupEventArgs e)
    {
        DataGridView parent = e.AssociatedControl as DataGridView;
        if (parent.CurrentCell != null)
        {
            if (parent.CurrentCell.ColumnIndex == 2)
            {
                string path = parent.CurrentCell.Value.ToString();
                using (System.Drawing.Imaging.Metafile emf = new System.Drawing.Imaging.Metafile(path))
                using (System.Drawing.Bitmap bmp = new System.Drawing.Bitmap(emf.Width, emf.Height))
                {
                    bmp.SetResolution(emf.HorizontalResolution, emf.VerticalResolution);

                    using (System.Drawing.Graphics g = System.Drawing.Graphics.FromImage(bmp))
                    {
                        g.DrawImage(emf,
                            new Rectangle(0, 0, emf.Width, emf.Height),
                            new Rectangle(0, 0, emf.Width, emf.Height),
                            GraphicsUnit.Pixel
                        );

                        return System.Windows.Interop.Imaging.CreateBitmapSourceFromHBitmap(bmp.GetHbitmap(), IntPtr.Zero, Int32Rect.Empty, BitmapSizeOptions.FromEmptyOptions());
                    }
                }
            }
        }
    } 
```

[来源](https://stackoverflow.com/a/11107333/1080742)

要使用`System.Windows.Interop`

> “您必须下载[.NET 3.0 运行时](http://www.microsoft.com/en-us/download/details.aspx?id=31&mnui=3)或[更高版本](http://www.microsoft.com/en-us/download/details.aspx?id=25150)并安装它以获取程序集......”
> 
> “安装 .NET 3.0 后，它应该出现在“添加引用”列表中，组件名称为“WindowsBase”。如果没有，您始终可以从“添加引用”对话框的“浏览”选项卡中添加它。（C:\Program Files \Reference Assemblies\Microsoft\Framework\v3.0 在我的盒子上）"

[来源](http://forums.asp.net/t/1219173.aspx/1)

# javascript - 是否可以使用网络工作者优化两个脚本？

> ID：14840984
> 
> 赞同：2
> 
> 时间：2013-02-12T20:14:12.287
> 
> 标签：javascript, web-worker

我正在运行两个具有依赖关系的库。我的意思是他们的执行顺序无关紧要。它们将相互检测并以任何顺序运行。

```
script1.js

script2.js 
```

使用网络工作者并行（[并行处理）运行这些脚本是否会受益？](http://en.wikipedia.org/wiki/Parallel_processing)（[MDN 文档](https://developer.mozilla.org/en-US/docs/DOM/Worker)）

我的意思是它们会比我连续运行它们运行得更快吗？

这两个脚本已经在客户端上可用（我不必下载它们）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T20:21:42.633

如果其中一个或两个脚本是纯功能性的，这意味着它不需要访问 DOM 或任何全局 Javascript 对象，那么您可以从使用 Web Workers 中受益。

如果不是这种情况，那么 Web Workers 对你没有好处。当 JS 通过 web worker 运行时，它只能将消息传递回主 DOM 线程并接收它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T20:20:40.667

不，javascript 在网络浏览器中的单个线程上执行。所以你不能并行运行它们，除非它们不是用户交互的（不与 DOM 交互）。

但是，您可以异步加载脚本以加速初始化。

只需使用 上的`async=true`属性`<script>`。像这样：

```
<script async="async">....</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T20:23:27.673

据我了解，网络工作者为您提供了操作系统级别的执行线程。因此，性能改进可能取决于客户端操作系统线程实现中固有的权衡。

无论如何，除非操作系统具有糟糕的线程实现，否则您应该会看到加载时间有所改善。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T20:20:04.540

我敢打赌，**是**的。

就像问

`1 man takes 6 days to do a task. How much time will 2 men take?`

:-)

**WebWorkers 的最理想**用例

# javascript - 操作对象 HTMLLIElement

> ID：14840992
> 
> 赞同：2
> 
> 时间：2013-02-12T20:14:52.193
> 
> 标签：javascript, jquery, dom

我试图从 ul 元素中获取 li 标签，然后将它们隐藏，但是当我调用隐藏函数时，我得到 Object # has no method 'hide'

```
 var li = $(this).siblings("ul").children("li");
 li.get(0).hide (); 
```

我认为问题是我不能调用常规的 jquery 方法，除非它是一个对象

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T20:16:37.247

[`.get(0)`](http://api.jquery.com/get/)返回本机元素。

要隐藏第一个元素，请[`.eq()`](http://api.jquery.com/eq/)改用：

```
li.eq(0).hide(); 
```

# gwt - GWT DataGrid 多行标题

> ID：14840997
> 
> 赞同：1
> 
> 时间：2013-02-12T20:15:06.183
> 
> 标签：gwt, gwt-celltable

我正在将一些 GWT 内容从 迁移`CellTable`到`DataGrid`，主要是为了在滚动时将标题行锁定到位的 DataGrid 功能。

使用 CellTable，如果文本短语太长，列标题文本将换行到下一行。CellTable 的标题会动态增加高度。这是默认行为，我从未编辑过任何 css 文件。

我可以在 DataGrid 中获得这种行为吗？我需要更改我的主项目 css 文件，还是更改 clean.css？是否有编程方式在 DataGrid 上设置属性？

我正在创建`TextColumn`等并通过添加`dataGrid.addColumn()`；

编辑：看这里的例子，如果你缩小浏览器窗口的宽度，标题不会换行：http: //gwt.googleusercontent.com/samples/Showcase/Showcase.html#! [CwDataGrid](http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwDataGrid)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T20:23:13.007

将此添加到您的 CSS 文件中：

```
th {
    white-space: normal !important;
} 
```