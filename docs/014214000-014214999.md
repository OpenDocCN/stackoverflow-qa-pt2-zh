# StackOverflow 问答 14214000-14214999

# android - 微调器将项目显示为下拉列表

> ID：14214001
> 
> 赞同：2
> 
> 时间：2013-01-08T11:30:04.960
> 
> 标签：android, android-layout, spinner, android-spinner

我在选项卡布局内调用的活动中制作了一个微调器。
问题是项目（3 个）正在单独的对话框中显示，就像下拉列表的情况一样，而不是作为微调器。

我按照[这个](https://mytutorialonline.com/android/spinner)例子。正如我所期待的图片所示，
![这](../Images/61cca623fa30396541726369025226d4.png)
但我得到了这个：&这个。我只想在微调器中显示 3 个项目，并且不希望选择项目的新对话框。我已经在 2.3.3 和 4.0.3 模拟器上尝试了我的代码。有什么建议么？ 谢谢
[![这](../Images/5d045e25b0a95f075b6eabc641bb880b.png)](https://i.stack.imgur.com/MhyIn.png)

![这](../Images/46ca9b17f445490fa9355e5148c8770d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T11:42:45.723

微调器作为下拉菜单是 HOLO 主题。第一个图像是 HOLO 主题，第二个和第三个不是.. 从 api 级别 11 开始支持全息主题..

如果你想应用 Holo 主题。放

```
<uses-sdk android:minSdkVersion="10" android:targetSdkVersion="17" /> 
```

和**values-v11**文件夹中的**styles.XML**

 **```
<resources>

<!--
    Base application theme for API 11+. This theme completely replaces
    AppBaseTheme from res/values/styles.xml on API 11+ devices.
-->
<style name="AppBaseTheme" parent="android:Theme.Holo.Light">
    <!-- API 11 theme customizations can go here. -->
</style> 
```

和**values**文件夹中的**styles.XML**

 **```
<resources>

<!--
    Base application theme, dependent on API level. This theme is replaced
    by AppBaseTheme from res/values-vXX/styles.xml on newer devices.
-->
<style name="AppBaseTheme" parent="android:Theme.Light.NoTitleBar">
    <!--
        Theme customizations available in newer API levels can go in
        res/values-vXX/styles.xml, while customizations related to
        backward-compatibility can go here.
    -->
</style>

<!-- Application theme. -->
<style name="AppTheme" parent="AppBaseTheme">
    <!-- All customizations that are NOT specific to a particular API-level can go here. -->
</style>

 <style name="progressbar_holo" parent="@android:style/Theme.Light">
</style> 
```

在**AndroidMeanifeast.xml**

```
android:theme="@style/AppTheme" 
```

在**应用程序**标签中。

**或** 点击这 2 个链接 1\. [https://github.com/ChristopheVersieux/HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)
2\. [https://github.com/ChristopheVersieux/HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)****

# css - Internet Explorer 8 中的对齐问题与 Wordpress 多站点的某些站点上的侧边栏

> ID：14214003
> 
> 赞同：0
> 
> 时间：2013-01-08T11:30:08.807
> 
> 标签：css, wordpress, internet-explorer-8, alignment

我在这些网站上安装了 Wordpress 多站点：

一个门户：[http](http://www.gprsoftware.nl) ://www.gprsoftware.nl链接到

*   [http://www.gpradvies.nl](http://www.gpradvies.nl)
*   [http://www.gprstedenbouw.nl](http://www.gprstedenbouw.nl)
*   [http://www.gprspecials.nl](http://www.gprspecials.nl)
*   [http://www.gprgebouw.nl](http://www.gprgebouw.nl)
*   [http://www.gpronderhoud.nl](http://www.gpronderhoud.nl)

该问题出现在 gprgebouw.nl 和 gpradvies.nl 的所有页面上，但不在其他域上。这是gprgebouw.nl主页的截图

![gprgebouw.nl 截图](../Images/5250bf8942be83b5c7cfa2244807be12.png)

发生什么了：

1.  右侧边栏在内容区域下方滑动
2.  条形图图标图像的大小增加
3.  侧边栏的灰色边框延伸到内容区域的顶部

特别是第 3 点让我相信内容区域没有正确关闭，但我在 HTML 源代码中找不到它。

最奇怪的是，这仅发生在上述网站上，而不发生在其他网站上，尽管它们共享所有 Javascript 和插件以及大部分 CSS（只有一些颜色不同）。

当然，在 Firefox 等浏览器中一切都很好。

任何想法是什么原因造成的？我正在为 IE lte 8 使用 selectivzr 和 modernizr。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:00:28.023

在[http://www.gprgebouw.nl](http://www.gprgebouw.nl)上，您这里缺少一个结束 div 标记：

```
 <div class="aside-content">
        <div class="textwidget">
...
            <p><a href="http://www.gprprojecten.nl/Home/Details/19367" target="_blank"><img alt="Justus van Effen" src="http://software.gprgebouw.nl/start/images/thumb4476.jpg"> <span class="stars rating30"></span></a></p>
            <p><a href="http://www.gprprojecten.nl"onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','http://www.gprprojecten.nl']);" target="_blank" class="a-landing">Bekijk meer projecten op www.gprprojecten.nl</a></p>
        </div>
    </div> 
```

# android - Android应用程序的应用内计费

> ID：14214004
> 
> 赞同：0
> 
> 时间：2013-01-08T11:30:26.737
> 
> 标签：android

我想为我的 android 游戏应用程序使用 Google Play Store API，我很困惑从哪里可以获得这个 API 并实现它们。谁能详细告诉我，这对我很有帮助，因为我是 android 新手游戏。所以请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:34:01.150

Google Play Billing Library 是 SDK 的一部分，您只需通过 SDK manager 下载即可。

Goole Developers 还提供了一个不错的培训课程： [https ://developer.android.com/training/in-app-billing/index.html](https://developer.android.com/training/in-app-billing/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:34:22.213

这个官方文档很容易理解：

[http://developer.android.com/google/play/billing/billing_integrate.html](http://developer.android.com/google/play/billing/billing_integrate.html)

# java - 带有文本字段和组合框的对话框

> ID：14214005
> 
> 赞同：-6
> 
> 时间：2013-01-08T11:30:33.647
> 
> 标签：java, swing, jtextfield, jcombobox, jdialog

我对 Swing in Java 的一个主题有一个小问题。我试图创建一个对话框：

1.  标签和组合框（例如：性别：M/F）和
2.  标签和文本字段（例如：你叫什么名字：文本字段）。

我希望所有的东西都在同一个对话框中。谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:33:42.443

您可以将组件添加到 JPanel，然后在对话框中添加面板。

请参阅本[教程](http://www.coderanch.com/t/338717/GUI/java/JOptionPane-custom-buttons-close-JOptionPane)。

# java - 与在 RegEx 中强制元字符作为正常字符有关

> ID：14214009
> 
> 赞同：1
> 
> 时间：2013-01-08T11:30:48.870
> 
> 标签：java, regex

在 oracle 文档中，有以下语句。

元数据是`<([{\^-=$!|]})?*+.>`

```
There are two ways to force a metacharacter to be treated as an ordinary character:

    * precede the metacharacter with a backslash, or
    * enclose it within \Q (which starts the quote) and \E (which ends it). 
```

我理解的第一种方式。

任何人都可以详细解释第二种方式吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T11:32:29.913

> ```
> * enclose it within \Q (which starts the quote) and \E (which ends it). 
> ```

考虑元字符`$`，现在您希望将其视为普通字符，使用第二种方式，您必须将其括`$`起来`\Q`，`\E`如下所示：

```
 "\\Q$\\E" (eqvivalent to `\\$`) 
```

但是请注意，您仍然必须转义`\Q`并`\E`使用额外的反斜杠，因为它们不是有效的转义序列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:50:44.060

有一个特殊的方法 Pattern.quote(String)。这就是它在内部基本上所做的事情

```
 int slashEIndex = s.indexOf("\\E");
    if (slashEIndex == -1)
        return "\\Q" + s + "\\E"; 
```

如果字符串包含`"\\E"`序列，它将转义它们

# web - 客户网站维护/工单管理系统

> ID：14214013
> 
> 赞同：0
> 
> 时间：2013-01-08T11:31:09.603
> 
> 标签：web, maintenance

我为客户开发网站，最近一直在寻找一个好的维护管理软件。这将让我注册我的客户，并让他们发布他们的工作订单，或对他们网站所需的任何更改或升级的请求。

我应该能够跟进和跟踪每个特定时间的请求、进度和计数。我尝试了一些票务系统，但它们更像是帮助台风格。将我的开发人员分配给特定项目将是一个很好的功能，这样当请求到来时，他们会立即获得信息。

开源将是首选，以便我们可以尝试以自己的方式对其进行自定义，但我们也对其他选项持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:33:47.583

在我们的工作中，我们使用[http://projectsputnik.com](http://projectsputnik.com)作为简单的错误跟踪器、时间管理、计费时间和总工作时间与计费时间的比率......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T07:20:40.310

也许看看[OsTicket](http://osticket.com/)

osTicket 是一个广泛使用且值得信赖的开源支持票证系统。它将通过电子邮件、网络表单和电话创建的查询无缝路由到一个简单、易于使用、多用户、基于网络的客户支持平台。osTicket 包含比市场上大多数昂贵（和复杂）的支持票证系统更多的功能和工具。最好的部分是，它是完全免费的。

您可以对其进行定制，不仅可以作为支持平台，还可以作为销售平台，这就是我们目前所做的。

# javascript - 重塑图像

> ID：14214017
> 
> 赞同：0
> 
> 时间：2013-01-08T11:31:19.773
> 
> 标签：javascript, html, canvas, image-masking

我正在寻找一个在线工具或教程来重塑图像。我真正想要的是这样的。

![图 1](../Images/bd219ed400ae8016181c5265800e6e03.png)

这样我就可以把它改造成这样的东西

![图 2](../Images/b5b318dae913a73239a6ea0b91d02a60.png)

我在[这个网站上发现了这个功能！](http://www.polyvore.com/cgi/app)..但我无法追踪他们是如何做到的。我已经用谷歌搜索了几个小时，但最终得到了一些损坏的网址。我不是一开始的设计师，但我必须这样做。有人请告诉我如何做到这一点..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:43:26.517

You can have a closer look to html5 canvas tutorials like [THIS.](http://www.onlywebpro.com/2011/06/25/html5-canvas-for-absolute-beginners-part-1/)

In this tutorial for example "Part 2: Drawing Shape With Paths" will be interesting for you. To have those "handles" you will need to draw some simple rectangles at every point in your path.

Everything more about this would go too much in detail. I think this is a good place to start for you.

# sqlite - 奇怪的 sqlite3 行为

> ID：14214020
> 
> 赞同：0
> 
> 时间：2013-01-08T11:31:27.353
> 
> 标签：sqlite

我正在使用 Unix 命令行 sqlite3 命令工具开发一个小型 SQLite 数据库。我的架构是：

```
sqlite> .schema
CREATE TABLE status (id text, date integer, status text, mode text); 
```

现在我想将所有条目的“模式”列设置为字符串“状态”。但是，如果我输入这个：

```
sqlite> UPDATE status SET mode="Status"; 
```

它没有将“模式”列设置为字符串“状态”，而是将每个条目设置为“状态”列中当前的值。相反，如果我键入以下内容，它会执行预期的行为：

```
sqlite> UPDATE status SET mode='Status'; 
```

这是正常行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:02:47.543

这也是一个常见问题解答：-

**我的 WHERE 子句表达式 column1="column1" 不起作用。它会导致返回表的每一行，而不仅仅是 column1 的值为“column1”的行。**

在 SQL 中的字符串文字周围使用单引号，而不是双引号。这是 SQL 标准所要求的。您的 WHERE 子句表达式应为： column1='column2'

SQL 在包含特殊字符或关键字的标识符（列名或表名）周围使用双引号。所以双引号是转义标识符名称的一种方式。因此，当您说 column1="column1" 时，它等同于 column1=column1，这显然总是正确的。

[http://www.sqlite.org/faq.html#q24](http://www.sqlite.org/faq.html#q24)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:59:32.447

是的，这在 SQL 中很正常。

单引号用于字符串值；双引号用于标识符（如表名或列名）。（请参阅[文档](http://www.sqlite.org/lang_keywords.html)。）

# node.js - 如何在 Windows 7 上使用 npm 安装 v8-profiler？

> ID：14214021
> 
> 赞同：6
> 
> 时间：2013-01-08T11:31:32.800
> 
> 标签：node.js, profiler, npm, v8, node-inspector

尝试在 Windows7（64 位）上安装 v8-profiler

```
npm install v8-profiler 
```

注意：1.依赖是Python 2.7，我已经安装并设置了env。变种。还

1.  确认安装了“Visual C++ Redistributable Package”。

2.  还安装了 node-gyp 模块

但是仍然抛出的错误如下：

```
D:\Projects\Projects\MY_Prjct3\MY_Prjct>npm install v8-profiler
npm http GET https://registry.npmjs.org/v8-profiler
npm http 304 https://registry.npmjs.org/v8-profiler

> v8-profiler@3.6.2-1 install D:\Projects\Projects\MY_Prjct3\MY_Prjct\node_modules\
v8-profiler
> node-gyp rebuild

D:\Projects\Projects\MY_Prjct3\MY_Prjct\node_modules\v8-profiler>node "C:\Program F
iles\nodejs\node_modules\npm\bin\node-gyp-bin\\..\..\node_modules\node-gyp\bin\n
ode-gyp.js" rebuild
C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.Cpp.InvalidPlatform
.Targets(23,7): error MSB8007: The Platform for project 'profiler.vcxproj' is i
nvalid.  Platform='x64'. You may be seeing this message because you are trying
to build a project without a solution file, and have specified a non-default Pl
atform that doesn't exist for this project. [D:\Projects\Projects\MY_Prjct3\My_Prj
ct\node_modules\v8-profiler\build\profiler.vcxproj]
gyp ERR! build error
gyp ERR! stack Error: `C:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild.exe
` failed with exit code: 1
gyp ERR! stack     at ChildProcess.onExit (C:\Program Files\nodejs\node_modules\
npm\node_modules\node-gyp\lib\build.js:236:23)
gyp ERR! stack     at ChildProcess.EventEmitter.emit (events.js:99:17)
gyp ERR! stack     at Process._handle.onexit (child_process.js:678:10)
gyp ERR! System Windows_NT 6.1.7601
gyp ERR! command "node" "C:\\Program Files\\nodejs\\node_modules\\npm\\node_modu
les\\node-gyp\\bin\\node-gyp.js" "rebuild"
gyp ERR! cwd D:\Projects\Projects\MY_Prjct3\MY_Prjct\node_modules\v8-profiler
gyp ERR! node -v v0.8.15
gyp ERR! node-gyp -v v0.7.1
gyp ERR! not ok
npm ERR! v8-profiler@3.6.2-1 install: `node-gyp rebuild`
npm ERR! `cmd "/c" "node-gyp rebuild"` failed with 1
npm ERR!
npm ERR! Failed at the v8-profiler@3.6.2-1 install script.
npm ERR! This is most likely a problem with the v8-profiler package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     node-gyp rebuild
npm ERR! You can get their info via:
npm ERR!     npm owner ls v8-profiler
npm ERR! There is likely additional logging output above.

npm ERR! System Windows_NT 6.1.7601
npm ERR! command "C:\\Program Files\\nodejs\\\\node.exe" "C:\\Program Files\\nod
ejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "v8-profiler"
npm ERR! cwd D:\Projects\Projects\MY_Prjct3\MY_Prjct
npm ERR! node -v v0.8.15
npm ERR! npm -v 1.1.66
npm ERR! code ELIFECYCLE
npm ERR!
npm ERR! Additional logging details can be found in:
npm ERR!     D:\Projects\Projects\MY_Prjct3\MY_Prjct\npm-debug.log
npm ERR! not ok code 0 
```

* * *

文件：npm-debug.log

```
0 info it worked if it ends with ok
1 verbose cli [ 'C:\\Program Files\\nodejs\\\\node.exe',
1 verbose cli   'C:\\Program Files\\nodejs\\node_modules\\npm\\bin\\npm-cli.js',
1 verbose cli   'install',
1 verbose cli   'v8-profiler' ]
2 info using npm@1.1.66
3 info using node@v0.8.15
4 verbose node symlink C:\Program Files\nodejs\\node.exe
5 verbose read json D:\Projects\Projects\MY_Prjct3\MY_Prjct3\package.json
6 verbose read json D:\Projects\Projects\MY_Prjct3\MY_Prjct3\node_modules\express\package.json
7 verbose read json D:\Projects\Projects\MY_Prjct3\MY_Prjct3\node_modules\hbs\package.json
8 verbose read json D:\Projects\Projects\MY_Prjct3\MY_Prjct3\node_modules\mongodb\package.json
9 verbose read json D:\Projects\Projects\MY_Prjct3\MY_Prjct3\node_modules\mongoose\package.json
10 verbose read json D:\Projects\Projects\MY_Prjct3\MY_Prjct3\node_modules\node-inspector\package.json
11 verbose read json D:\Projects\Projects\MY_Prjct3\MY_Prjct3\package.json
12 verbose cache add [ 'v8-profiler', null ]
13 silly cache add name=undefined spec="v8-profiler" args=["v8-profiler",null]
14 verbose parsed url { pathname: 'v8-profiler',
14 verbose parsed url   path: 'v8-profiler',
14 verbose parsed url   href: 'v8-profiler' }
15 silly lockFile a12f389f-v8-profiler v8-profiler
16 verbose lock v8-profiler C:\Users\Amol.Kulkarni\AppData\Roaming\npm-cache\a12f389f-v8-profiler.lock
17 silly lockFile a12f389f-v8-profiler v8-profiler
18 verbose addNamed [ 'v8-profiler', '' ]
19 verbose addNamed [ null, '' ]
20 silly lockFile f875d38f-v8-profiler v8-profiler@
21 verbose lock v8-profiler@ C:\Users\Amol.Kulkarni\AppData\Roaming\npm-cache\f875d38f-v8-profiler.lock
22 silly addNameRange { name: 'v8-profiler', range: '', hasData: false }
23 verbose url raw v8-profiler
24 verbose url resolving [ 'https://registry.npmjs.org/', './v8-profiler' ]
25 verbose url resolved https://registry.npmjs.org/v8-profiler
26 info trying registry request attempt 1 at 16:54:05
27 verbose etag "ET10KXXLUBJGCCEB13YK5N04L"
28 http GET https://registry.npmjs.org/v8-profiler
29 http 304 https://registry.npmjs.org/v8-profiler
30 silly registry.get cb [ 304,
30 silly registry.get   { server: 'CouchDB/1.2.0 (Erlang OTP/R15B)',
30 silly registry.get     etag: '"ET10KXXLUBJGCCEB13YK5N04L"',
30 silly registry.get     date: 'Tue, 08 Jan 2013 11:21:56 GMT',
30 silly registry.get     'content-length': '0' } ]
31 verbose etag v8-profiler from cache
32 silly addNameRange number 2 { name: 'v8-profiler', range: '', hasData: true }
33 silly addNameRange versions [ 'v8-profiler',
33 silly addNameRange   [ '0.0.1', '0.0.2', '0.0.3', '3.6.2beta', '3.6.2beta2', '3.6.2-1' ] ]
34 verbose addNamed [ 'v8-profiler', '3.6.2-1' ]
35 verbose addNamed [ '3.6.2-1', '3.6.2-1' ]
36 silly lockFile 19e1a1b9-v8-profiler-3-6-2-1 v8-profiler@3.6.2-1
37 verbose lock v8-profiler@3.6.2-1 C:\Users\Amol.Kulkarni\AppData\Roaming\npm-cache\19e1a1b9-v8-profiler-3-6-2-1.lock
38 verbose read json C:\Users\Amol.Kulkarni\AppData\Roaming\npm-cache\v8-profiler\3.6.2-1\package\package.json
39 silly lockFile 19e1a1b9-v8-profiler-3-6-2-1 v8-profiler@3.6.2-1
40 silly lockFile f875d38f-v8-profiler v8-profiler@
41 silly resolved [ { name: 'v8-profiler',
41 silly resolved     version: '3.6.2-1',
41 silly resolved     description: 'node bindings for the v8 profiler',
41 silly resolved     homepage: 'http://github.com/dannycoates/v8-profiler',
41 silly resolved     author: { name: 'Danny Coates', email: 'dannycoates@gmail.com' },
41 silly resolved     keywords: [ 'profiler', 'inspector' ],
41 silly resolved     engines: { node: '>=0.6' },
41 silly resolved     main: 'v8-profiler',
41 silly resolved     scripts: { install: 'node-gyp rebuild' },
41 silly resolved     gypfile: true,
41 silly resolved     readme: 'v8-profiler provides [node](http://github.com/ry/node) bindings for the v8 \nprofiler and integration with [node-inspector](http://github.com/dannycoates/node-inspector)\n\n## Installation\n\n    npm install v8-profiler\n\n## Usage\n\n    var profiler = require(\'v8-profiler\');\n\n## API\n\n    var snapshot = profiler.takeSnapshot([name])      //takes a heap snapshot\n\n    profiler.startProfiling([name])                   //begin cpu profiling\n    var cpuProfile = profiler.stopProfiling([name])   //finish cpu profiling\n\n## node-inspector\n\nCpu profiles can be viewed and heap snapshots may be taken and viewed from the\nprofiles panel.\n',
41 silly resolved     readmeFilename: 'readme.md',
41 silly resolved     _id: 'v8-profiler@3.6.2-1',
41 silly resolved     _from: 'v8-profiler' } ]
42 info install v8-profiler@3.6.2-1 into D:\Projects\Projects\MY_Prjct3\MY_Prjct3
43 info installOne v8-profiler@3.6.2-1
44 verbose from cache C:\Users\Amol.Kulkarni\AppData\Roaming\npm-cache\v8-profiler\3.6.2-1\package\package.json
45 info D:\Projects\Projects\MY_Prjct3\MY_Prjct3\node_modules\v8-profiler unbuild
46 verbose read json D:\Projects\Projects\MY_Prjct3\MY_Prjct3\node_modules\v8-profiler\package.json
47 verbose tar unpack C:\Users\Amol.Kulkarni\AppData\Roaming\npm-cache\v8-profiler\3.6.2-1\package.tgz
48 silly lockFile cffa88b0-ce3-MY_Prjct3-node-modules-v8-profiler D:\Projects\Projects\MY_Prjct3\MY_Prjct3\node_modules\v8-profiler
49 verbose lock D:\Projects\Projects\MY_Prjct3\MY_Prjct3\node_modules\v8-profiler C:\Users\Amol.Kulkarni\AppData\Roaming\npm-cache\cffa88b0-ce3-MY_Prjct3-node-modules-v8-profiler.lock
50 silly gunzTarPerm modes [ '755', '644' ]
51 silly gunzTarPerm extractEntry package.json
52 silly gunzTarPerm modified mode [ 'package.json', 438, 420 ]
53 silly gunzTarPerm extractEntry .npmignore
54 silly gunzTarPerm modified mode [ '.npmignore', 438, 420 ]
55 silly gunzTarPerm extractEntry v8-profiler.js
56 silly gunzTarPerm modified mode [ 'v8-profiler.js', 438, 420 ]
57 silly gunzTarPerm extractEntry profile.cc
58 silly gunzTarPerm modified mode [ 'profile.cc', 438, 420 ]
59 silly gunzTarPerm extractEntry graph_edge.cc
60 silly gunzTarPerm modified mode [ 'graph_edge.cc', 438, 420 ]
61 silly gunzTarPerm extractEntry graph_edge.h
62 silly gunzTarPerm modified mode [ 'graph_edge.h', 438, 420 ]
63 silly gunzTarPerm extractEntry graph_node.cc
64 silly gunzTarPerm modified mode [ 'graph_node.cc', 438, 420 ]
65 silly gunzTarPerm extractEntry graph_node.h
66 silly gunzTarPerm modified mode [ 'graph_node.h', 438, 420 ]
67 silly gunzTarPerm extractEntry heap_profiler.cc
68 silly gunzTarPerm modified mode [ 'heap_profiler.cc', 438, 420 ]
69 silly gunzTarPerm extractEntry heap_profiler.h
70 silly gunzTarPerm modified mode [ 'heap_profiler.h', 438, 420 ]
71 silly gunzTarPerm extractEntry Makefile
72 silly gunzTarPerm modified mode [ 'Makefile', 438, 420 ]
73 silly gunzTarPerm extractEntry binding.gyp
74 silly gunzTarPerm modified mode [ 'binding.gyp', 438, 420 ]
75 silly gunzTarPerm extractEntry cpu_profiler.h
76 silly gunzTarPerm modified mode [ 'cpu_profiler.h', 438, 420 ]
77 silly gunzTarPerm extractEntry profile.h
78 silly gunzTarPerm modified mode [ 'profile.h', 438, 420 ]
79 silly gunzTarPerm extractEntry profiler.cc
80 silly gunzTarPerm modified mode [ 'profiler.cc', 438, 420 ]
81 silly gunzTarPerm extractEntry profile_node.cc
82 silly gunzTarPerm modified mode [ 'profile_node.cc', 438, 420 ]
83 silly gunzTarPerm extractEntry profile_node.h
84 silly gunzTarPerm modified mode [ 'profile_node.h', 438, 420 ]
85 silly gunzTarPerm extractEntry readme.md
86 silly gunzTarPerm modified mode [ 'readme.md', 438, 420 ]
87 silly gunzTarPerm extractEntry snapshot.cc
88 silly gunzTarPerm modified mode [ 'snapshot.cc', 438, 420 ]
89 silly gunzTarPerm extractEntry snapshot.h
90 silly gunzTarPerm modified mode [ 'snapshot.h', 438, 420 ]
91 silly gunzTarPerm extractEntry cpu_profiler.cc
92 silly gunzTarPerm modified mode [ 'cpu_profiler.cc', 438, 420 ]
93 silly gunzTarPerm extractEntry wscript
94 silly gunzTarPerm modified mode [ 'wscript', 438, 420 ]
95 verbose read json D:\Projects\Projects\MY_Prjct3\MY_Prjct3\node_modules\v8-profiler\package.json
96 silly lockFile cffa88b0-ce3-MY_Prjct3-node-modules-v8-profiler D:\Projects\Projects\MY_Prjct3\MY_Prjct3\node_modules\v8-profiler
97 info preinstall v8-profiler@3.6.2-1
98 verbose from cache D:\Projects\Projects\MY_Prjct3\MY_Prjct3\node_modules\v8-profiler\package.json
99 verbose readDependencies using package.json deps
100 verbose from cache D:\Projects\Projects\MY_Prjct3\MY_Prjct3\node_modules\v8-profiler\package.json
101 verbose readDependencies using package.json deps
102 silly resolved []
103 verbose about to build D:\Projects\Projects\MY_Prjct3\MY_Prjct3\node_modules\v8-profiler
104 info build D:\Projects\Projects\MY_Prjct3\MY_Prjct3\node_modules\v8-profiler
105 verbose from cache D:\Projects\Projects\MY_Prjct3\MY_Prjct3\node_modules\v8-profiler\package.json
106 verbose linkStuff [ false,
106 verbose linkStuff   false,
106 verbose linkStuff   false,
106 verbose linkStuff   'D:\\Projects\\Projects\\MY_Prjct3\\MY_Prjct3\\node_modules' ]
107 info linkStuff v8-profiler@3.6.2-1
108 verbose linkBins v8-profiler@3.6.2-1
109 verbose linkMans v8-profiler@3.6.2-1
110 verbose rebuildBundles v8-profiler@3.6.2-1
111 info install v8-profiler@3.6.2-1
112 verbose unsafe-perm in lifecycle true
113 silly exec cmd "/c" "node-gyp rebuild"
114 silly cmd,/c,node-gyp rebuild,D:\Projects\Projects\MY_Prjct3\MY_Prjct3\node_modules\v8-profiler spawning
115 info v8-profiler@3.6.2-1 Failed to exec install script
116 info D:\Projects\Projects\MY_Prjct3\MY_Prjct3\node_modules\v8-profiler unbuild
117 verbose from cache D:\Projects\Projects\MY_Prjct3\MY_Prjct3\node_modules\v8-profiler\package.json
118 info preuninstall v8-profiler@3.6.2-1
119 info uninstall v8-profiler@3.6.2-1
120 verbose true,D:\Projects\Projects\MY_Prjct3\MY_Prjct3\node_modules,D:\Projects\Projects\MY_Prjct3\MY_Prjct3\node_modules unbuild v8-profiler@3.6.2-1
121 info postuninstall v8-profiler@3.6.2-1
122 error v8-profiler@3.6.2-1 install: `node-gyp rebuild`
122 error `cmd "/c" "node-gyp rebuild"` failed with 1
123 error Failed at the v8-profiler@3.6.2-1 install script.
123 error This is most likely a problem with the v8-profiler package,
123 error not with npm itself.
123 error Tell the author that this fails on your system:
123 error     node-gyp rebuild
123 error You can get their info via:
123 error     npm owner ls v8-profiler
123 error There is likely additional logging output above.
124 error System Windows_NT 6.1.7601
125 error command "C:\\Program Files\\nodejs\\\\node.exe" "C:\\Program Files\\nodejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "v8-profiler"
126 error cwd D:\Projects\Projects\MY_Prjct3\MY_Prjct3
127 error node -v v0.8.15
128 error npm -v 1.1.66
129 error code ELIFECYCLE
130 verbose exit [ 1, true ] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T09:48:12.370

V8-profiler ("version": "0.0.2") 使用了一些 V8 API，但这些 API 在版本 3.11.5 中已从 V8 中删除。node.js 在 0.7.11 版本中将 v8 版本从 3.9.24.31 升级到 3.11.10，所以所有高于 0.7.11 的版本都不起作用。

欲了解更多信息：

[https://github.com/dannycoates/v8-profiler/issues/20](https://github.com/dannycoates/v8-profiler/issues/20)

[https://github.com/dannycoates/v8-profiler/issues/16#issuecomment-9099768](https://github.com/dannycoates/v8-profiler/issues/16#issuecomment-9099768)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T13:01:15.280

您的 C++ 编译器（来自 Microsoft Visual Studio 2010）是一个 32 位编译器，但您正在尝试构建一个 64 位程序。

安装并切换到 64 位 C++ 编译器，或切换到 32 位版本的 node/npm。

# asp.net-mvc-4 - MVC4、Breeze 和淘汰赛的数据绑定问题

> ID：14214023
> 
> 赞同：0
> 
> 时间：2013-01-08T11:31:37.433
> 
> 标签：asp.net-mvc-4, knockout.js, breeze

我是 knockout.js 的新手，使用 MVC4 和 Breez.js 的简单测试页面出现错误。我想将数据绑定到表。

```
@{Layout = null;}
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width" />
        <title>Breeze Test</title>
        <link rel="stylesheet" href="/Content/breezesample.css" />
    </head>
    <body>
        <header>
            <div class="content-wrapper">
                <div class="float-left">
                    <p class="site-title">
                        <a href="~/">Breeze Test</a>
                    </p>
                </div>
            </div>
        </header>
        <div id="body">
            <section id="content" class="content-wrapper main-content">

                <script type="text/x-jquery-tmpl" id="BookTableTemplate">
                    <table>
                        <thead>
                            <tr>
                                <th>Title</th>
                                <th>Author</th>
                                <th>ISBN</th>
                                <th>Price</th>
                                <th>Read?</th>
                            </tr>
                        </thead>
                        <tbody data-bind="template: {name:'bookRowTemplate', foreach:books}">
                        </tbody>
                    </table>
                </script>

                <script type="text/x-jquery-tmpl" id="bookRowTemplate">
                    <tr>
                        <td>${Title}</td>
                        <td>${Author}</td>
                        <td>${ISBN}</td>
                        <td>${Price}</td>
                        <td>${IsRead}</td>
                    </tr>
                </script>

                <div data-bind="visible: show" style="display: none">
                    <a href="#" data-bind="click: save">Save</a>&nbsp;
                        <input type="checkbox" data-bind="checked: IncludeRead" />
                    include read 

                    <div data-bind="template: 'BookTableTemplate'"></div>
                </div>
                <div id="logmessages"></div>
            </section>
        </div>
        <!--3rd party library scripts -->
        <script src="/Scripts/jquery-1.7.1.min.js"></script>
        <script src="/Scripts/knockout-2.1.0.js"></script>
        <script src="/Scripts/q.js"></script>
        <script src="/Scripts/breeze.debug.js"></script>

        <!-- Application scripts -->
        <script src="/Scripts/app/logger.js"></script>
        <script src="/Scripts/app/bookViewModel.js"></script>
    </body>
</html> 
```

我没有得到数据输出： ${Title} ${Author} ${ISBN} ${Price} ${IsRead}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T18:35:46.020

看这个例子： http: [//knockoutjs.com/documentation/template-binding.html](http://knockoutjs.com/documentation/template-binding.html)

在您的模板中使用 <td data-bind="text: Title">/>

# arrays - 数组的VBScript索引位置

> ID：14214031
> 
> 赞同：5
> 
> 时间：2013-01-08T11:31:48.390
> 
> 标签：arrays, vbscript, indexing, location

希望这很容易，但我似乎找不到任何参考。

我如何打印存储在数组中的东西的**位置，而不是其中的实际项目。**

```
Array(0) = Dog
Array(1) = Cat
Array(2) = Fish 
```

假设我搜索了数组并找到了猫，我如何打印存储猫的位置，在本例中为索引号 (1)。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T11:34:23.133

数组的位置称为`index`

如果你运行一个循环，

```
For i = LBound(Array) to UBound(Array)
 if Array(i) = "Cat" then  '--restrict to find index of particular item
   MsgBox i '-- gives the location/index of Cat item
 End if
next i 
```

*   `LBound`: 是下限，数组的起始索引。首先。它可以是零或任何值，因为 VBA 提供了将默认数组基数更改为 0 或 1 的灵活性。

*   `UBound`: 是上界，数组的结束索引。最后。

进一步阅读：[如果数组已由 Range 分配，则 LBound 和 Ubound 冲突](https://stackoverflow.com/questions/14033478/lbound-and-ubound-conflicts-in-case-of-array-which-has-been-assigned-by-the-rang/14033633#14033633)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-27T08:26:48.090

在这种情况下使用[ArrayList](http://msdn.microsoft.com/en-us/library/vstudio/system.collections.arraylist)比使用简单数组更好。

```
Set myArray = CreateObject ("System.Collections.ArrayList")
With myArray
  .Add "Dog"
  .Add "Cat"
  .Add "Fish"
End With

intIndex = myArray.IndexOf ("Cat",0) 
```

此外，您不必关心界限。

# arrays - rspec 数组应该如何包含？另一个数组

> ID：14214033
> 
> 赞同：31
> 
> 时间：2013-01-08T11:31:52.113
> 
> 标签：arrays, testing, rspec

我正在尝试测试一个数组是否包含另一个（rspec 2.11.0）

```
test_arr = [1, 3]

describe [1, 3, 7] do
  it { should include(1,3) }
  it { should eval("include(#{test_arr.join(',')})")}
  #failing
  it { should include(test_arr) }
end 
```

这是结果 rspec spec/test.spec ..F

```
Failures:

  1) 1 3 7 
     Failure/Error: it { should include(test_arr) }
       expected [1, 3, 7] to include [1, 3]
     # ./spec/test.spec:7:in `block (2 levels) in <top (required)>'

Finished in 0.00125 seconds
3 examples, 1 failure

Failed examples:

rspec ./spec/test.spec:7 # 1 3 7 
```

include rspec 方法不接受数组参数，有更好的方法来避免“eval”吗？

*   [资源](https://github.com/dchelimsky/rspec/blob/master/lib/spec/matchers/include.rb)
*   [规格](https://www.relishapp.com/rspec/rspec-expectations/v/2-0/docs/matchers/include-matcher)

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-01-08T12:09:44.223

只需使用[splat](http://endofline.wordpress.com/2011/01/21/the-strange-ruby-splat/) (*) 运算符，它将元素数组扩展为可以传递给方法的参数列表：

```
test_arr = [1, 3]

describe [1, 3, 7] do
  it { should include(*test_arr) }
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-29T18:37:10.823

如果你想断言子集数组的*顺序*，你需要做更多的事情`should include(..)`，因为 RSpec 的`include`匹配器只断言每个元素出现在数组中的任何位置，而不是所有参数都按顺序显示。

我最终使用`each_cons`来验证子数组是否按顺序存在，如下所示：

```
describe [1, 3, 5, 7] do
  it 'includes [3,5] in order' do
    subject.each_cons(2).should include([3,5])
  end

  it 'does not include [3,1]' do
    subject.each_cons(2).should_not include([3,1])
  end
end 
```

# r - R包的windows版本比linux版本慢很多

> ID：14214034
> 
> 赞同：2
> 
> 时间：2013-01-08T11:32:00.247
> 
> 标签：r

我正在运行 64 位的 ubuntu。我有一个最小的测试包，用于学习如何做这些事情（我正在关注本[教程](http://www.google.be/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDUQFjAA&url=http://cran.r-project.org/doc/contrib/Leisch-CreatingPackages.pdf&ei=IOvrUOe3G4rL0AWSjoGADA&usg=AFQjCNHmlajNmMov0zsiVa4dw9iyhupiDQ&sig2=CUYtDZA7v60R5PL9JmikOQ&bvm=bv.1357316858,d.d2k&cad=rja)，除了包中还有一些 c 代码）。

该软件包在 linux 中构建/运行，所以我也开始着手让它在 Windows 中运行。

我遵循了这个[答案](https://stackoverflow.com/a/14212267/189035)并使用了由 Uwe Ligges 维护的在线 windows 包生成器来获取我的[包](http://win-builder.r-project.org/AYd113V9vPd4/)的（工作）zip 版本。

现在，当我在 Windows (7-64) 上安装该 .zip 包时，小型演示代码的运行速度比 linux 版本慢。就像慢了 30 倍一样。我怀疑差异总是那么大。我想知道我做错了什么以及如何解决这个差距。

# 编辑：

这是源代码（这是一个最小的工作示例）：

```
#include <algorithm>
#include <cstdlib>
#include <ctime>
#include <functional>
#include <fstream>
#include <iostream>
#include <math.h>
#include <time.h>
#include <stdio.h>
#include <stdlib.h>
#include <sstream>
#include <vector>

#include <Eigen/Dense>
#include <Eigen/LU>
#include <Eigen/SVD>

using namespace std;
using namespace Eigen;
using Eigen::MatrixXf;
using Eigen::VectorXf;

float median(VectorXf& x) {
    int n=x.rows();
    int half=(n+1)/2;   
    half--;                 
    float med;
    nth_element(x.data(),x.data()+half,x.data()+x.size());  
    if((n%2)==1){
        med=x(half);
    } else {
        float tmp0=x(half);
        float tmp1=x.segment(half+1,half-1).minCoeff(); 
        med=0.5*(tmp0+tmp1);
    }
    return med;
}
VectorXf fx01(MatrixXf& x){
    int p=x.cols();
    int n=x.rows();
    VectorXf Recept(n);
    VectorXf Result(p);
    for(int i=0;i<p;i++){
        Recept=x.col(i);
        Result(i)=median(Recept);
    }
    return Result;
}
extern "C"{
    void mse(int* n,int* p,float* x,float* medsout){
        MatrixXf x_cen=Map<MatrixXf>(x,*n,*p);  
        VectorXf MedsOut=fx01(x_cen);
        Map<VectorXf>(medsout,*p)=MedsOut.array();
    }
} 
```

# 编辑2：

按照 cbeleites 的建议，我多次运行代码。这样做我发现了一件奇怪的事情：函数的时间实际上与 linux 相同，除非我`apply()`在调用函数之前调用——我总是将我的包计算的 colwise 中位数的时间与做的时间进行比较`apply(X,2,median)`——

好的，问题解决了。目前。我现在仍然很好奇：为什么一个好的老式调用`apply()`（在一个巨大的矩阵 X 上）会如此糟糕地破坏事情（system.time 从 90 秒变为 3 秒）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:14:35.477

我想到的一种可能性，即不同机器上的计算可能不同的是 BLAS（如果示例中有线性代数计算）。

您是否在 Ubuntu（例如 libopenblas）上安装了优化的 BLAS，但在 Windows 上没有？

# c# - 与 C++/Win32 中的错误代码相比，为什么 C#/.NET 编程中的异常如此流行？

> ID：14214036
> 
> 赞同：3
> 
> 时间：2013-01-08T11:32:07.610
> 
> 标签：c#, .net, winapi, exception, error-handling

我是从 C++/Win32 开发环境迁移到 C#/.NET 的人。我注意到的一件事是，大多数错误状态是在 C++/Win32 中通过使用错误代码及其传播来处理的。

相反，C#/.NET 中的大多数错误状态似乎是通过使用异常来处理的，并且很少建议使用错误代码。

为什么这样？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T11:37:44.957

错误代码的主要问题是需要检查它们。总是。

我们只是人类，可以忘记。

这可能意味着我们可以通过简单地忘记检查错误代码来让我们的程序进入不一致的状态。

但是，如果我们忘记处理异常，我们的程序将退出。

这被认为比它继续在不一致的状态下运行更可取。

错误代码在 C/C++ 代码中仍然普遍存在的大部分原因是历史原因 - 这些语言没有异常处理，因此需要错误代码。并且有很多库和代码符合这个习惯用法，所以程序员需要遵守它。

除了不能忽略它们之外，还有其他使用异常的原因——正如[Marc 所观察到](https://stackoverflow.com/questions/14214036/why-are-exceptions-so-popular-in-c-net-programming-compared-to-error-codes-in/14214118#comment19712396_14214118)的，它们带有很多上下文——堆栈跟踪、消息等等，超出了异常的*类型*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T11:38:10.730

我要说的主要原因之一是错误代码是特定于平台的。.NET 最初设计为可移植的。

例如，a`FileNotFoundException`比一些晦涩的数字更通用，这些数字可能会因您运行的平台而异。

# android - 如何从 java 应用程序中获取 apk 文件路径？

> ID：14214045
> 
> 赞同：1
> 
> 时间：2013-01-08T11:33:34.630
> 
> 标签：android

如何从我的 java 应用程序中获取 apk 文件路径？我在android设备中有apk文件，我想使用java应用程序找到相同apk的路径。是否可以使用ADB命令？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:52:51.230

默认情况下，android 有一个名为 dev tools 的应用程序。启动开发工具。所以如下..

```
Dev Tools --> Package Browser --> Click on the app 
```

这就是你将获得apk路径的全部内容

或者在模拟器上安装apk。Android模拟器有一个叫做开发工具的应用程序。

并以与上述相同的方式进行..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:54:04.300

从 adb shell 尝试以下操作

$ adb shell pm list packages -f

# ruby-on-rails - 使用带有 16 位 tiff 的 carriewave-vips

> ID：14214049
> 
> 赞同：0
> 
> 时间：2013-01-08T11:33:42.417
> 
> 标签：ruby-on-rails, image-processing, carrierwave, vips

我正在使用carrierwave-vips（带有ruby-vips）上传和处理16位tiff。16 位 tiff 将得到保存（仅对于carrierewave 来说不是问题），但我也想处理缩略图（jpeg）。问题是生成的缩略图完全被炸毁了。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:33:42.417

问题是代表您的频段级别的 16 位数字没有按比例缩小。将以下方法添加到您的上传器：

```
def convert_to_8bit
    manipulate! do |image|
      #vips specific
      image.scale
    end
  end 
```

然后`process: :convert_to_8bit`在你的版本中。

# html - Bootstrap 上的 iPhone 方向问题

> ID：14214050
> 
> 赞同：1
> 
> 时间：2013-01-08T11:33:43.390
> 
> 标签：html, css, twitter-bootstrap

我一直在设计一个响应式网站，我遇到了这个问题。

首先，从纵向模式更改为横向模式并没有触发任何响应反应。它只是放大了网站。我确保这不会发生在：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"> 
```

但是，当用户切换回纵向模式时，右侧会出现一个空白。这是一个屏幕截图。

![在此处输入图像描述](../Images/eca4324f6e78a867ee33db913a14fd8d.png)

这是容器的部分代码。

```
 <div class="about">
        <div class="container">
            <div class="row">
                <div class="span12">
                    <div class="headlines"><h1>Hello..</h1></div>
                    <div class="row">
                        <div class="span6">
                            <p>
                                Donec sed odio dui. Etiam porta sem malesuada magna mollis euismod. Nullam id dolor id nibh ultricies vehicula ut id elit. Morbi leo risus, porta ac consectetur ac, vestibulum at eros. Praesent commodo cursus magna, vel scelerisque nisl consectetur et.
                            </p>

                            <p>
                                Donec sed odio dui. Etiam porta sem malesuada magna mollis euismod. Nullam id dolor id nibh ultricies vehicula ut id elit. Morbi leo risus, porta ac consectetur ac, vestibulum at eros. Praesent commodo cursus magna, vel scelerisque nisl consectetur et.
                            </p>
                        </div>
                        <div class="span6">

                            <p>
                                Donec sed odio dui. Etiam porta sem malesuada magna mollis euismod. Nullam id dolor id nibh ultricies vehicula ut id elit. Morbi leo risus, porta ac consectetur ac, vestibulum at eros. Praesent commodo cursus magna, vel scelerisque nisl consectetur et.
                            </p>

                        </div>
                    </div>
                     <hr class="soften"/>

                            <div class="about-hire">
                                <h3 >Hello?</h3><a href="#" class="btn-about">Let's talk!</a>
                            </div>
                </div>
            </div>
        </div>
    </div> 
```

这是相应的CSS。

```
.about {
     text-align: center;
     padding: 100px 0 100px 0;
     background-color: #fff;

}

.about .container {

    position: relative;
    z-index: 9;
}

 @media (max-width: 767px) {

  .about {
    margin-left: -20px;
    margin-right: -20px;

  }

   .about .container {
    margin-left: 20px;
    margin-right: 20px;

  }

 } 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:46:42.653

我可以在这里想到两件事：

**1.** 规模应该是这样的：

`<meta name="viewport" content="width=device-width, initial-scale=1">`

**2.** 可能是您的尺寸状态...如果您没有它，请将其添加到您的**身体标签上...在您的主css中：**

`body {min-width: 100%;}`

如果你想具体一点，你可以从这个开始： `body {min-width: 1024px;}`

然后根据需要适当地添加您的媒体代码。例子：

`@media only screen and ( max-width: 640px) {blah}`

:)

# php - PHP代码版本依赖

> ID：14214051
> 
> 赞同：2
> 
> 时间：2013-01-08T10:52:05.033
> 
> 标签：php, dependencies, version

在每个版本的 php 中，都添加了一些新功能，并且停止了一些功能。

例子：

```
<?php
$hex = hex2bin("6578616d706c65206865782064617461");
var_dump($hex);
?> 
```

需要 php 5.4.0 及更高版本，因为 hex2bin 是在 php 5.4.0 中引入的。
在 php.net 中手动检查 php 代码中使用的每个内置函数的版本依赖性是很乏味的。是否有任何自动/半自动方式来识别执行任何给定 php 代码所需的 php 安装的最低版本（和最高版本，如果适用）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:36:40.963

不知道是否有办法签入需要哪个版本的 php，但您可以使用“function_exists”查看您的 php 版本是否具有该功能。

[http://php.net/manual/en/function.function-exists.php](http://php.net/manual/en/function.function-exists.php)

```
<?php
if (function_exists('hex2bin')) {
    echo "hex2bin function is available.<br />\n";
} else {
    echo "hex2bin function is not available.<br />\n";
}
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T11:38:33.017

由程序员来说明他或她的库/项目的依赖关系。

现在许多项目都使用[Composer](http://getcomposer.org/doc/00-intro.md)作为依赖管理器，但是对于遗留代码，除了运行它并发誓不出错之外，您无能为力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T21:17:38.367

查看 PHPCompatibility 项目：[https](https://github.com/wimg/PHPCompatibility) ://github.com/wimg/PHPCompatibility 这将测试您的代码与 5.2、5.3、5.4 和 5.5（撰写本文时为 alpha2）的兼容性

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T11:40:48.207

好的做法可能是有后备。就像在[这个函数](http://php.net/manual/en/function.hex2bin.php)中提到的那样，还有其他选择。

```
if ( ! function_exists('hex2bin')) {
    function hex2bin($hexstr)
    {
        $n = strlen($hexstr);
        $sbin="";  
        $i=0;
        while($i<$n)
        {      
            $a =substr($hexstr,$i,2);          
            $c = pack("H*",$a);
            if ($i==0){$sbin=$c;}
            else {$sbin.=$c;}
            $i+=2;
        }
        return $sbin;
    }
} 
```

代码基于[约翰逊的回复](http://php.net/manual/en/function.hex2bin.php#110973)。

设置与新功能相同的基本功能，以防它们不存在让您开展业务而不必担心不兼容。只需将这些隐藏在您没有任何理由编辑它们的地方，它们也不会打扰您。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T11:41:35.357

您可以创建手动检查，然后使用“补丁”。定义缺少的内容。

使用 phpversion();

```
 if (strnatcmp(phpversion(),'5.2.10') >= 0) 
 { 
       //loading patch

 } 
 else 
 { 
     //loading patch
      function abc(){
        //
      }
 } 
```

# android - 适用于 Android 和 iOS 的 Common App Store 均可私人访问

> ID：14214057
> 
> 赞同：0
> 
> 时间：2013-01-08T11:34:01.133
> 
> 标签：android, ios, app-store

我想上传我处于测试阶段的应用程序。它适用于 Android 和 iOS。最初我只想将它私下分发给有限的用户。我知道**Google Play 私人频道**，但这仅适用于 Android。我想要两个。是否有任何商店可以在全球范围内访问。而且**我不想**为每个 Apple 用户提供 UUID。如果不是，那么还有哪些其他选择？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T11:43:45.060

如果您想要一种适用于 iOS 和 Android 的通用解决方案，那么

1)[阿帕卢萨](http://www.appaloosa-store.com/?locale=en)

2)[外观](http://www.apphance.com/)

3) [TheBetaFamily](http://thebetafamily.com/)

4)[曲棍球应用程序](http://hockeyapp.net/)

5)[错误感知](http://www.bugsense.com/)

6)[应用刀片](https://appblade.com/)

7)[背包](http://knappsack.com/)

8)[试飞](https://www.testflightapp.com/)

其中大部分是付费的，但其中一些有免费试用期。

我是 Testflight 的忠实粉丝，因为那里的服务很棒而且是免费的。不幸的是，Testflight 只支持 iOS，而且自从 Apple 收购了 Testflight 之后，这种情况就没有改变的机会了。如果您决定最终选择仅 iOS 的选项，那么 Testflight 就是适合您的服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:36:12.123

您可以在此处使用 TestFlight：[https ://testflightapp.com/](https://testflightapp.com/)

TestFlight 可以提供无线下载支持、反馈、报告等，对于 iOS Beta 测试非常有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T11:40:02.867

请参阅@Krishnabhadra 的回答，了解用于私有测试版部署的工具。对于最终分发，请阅读此答案：

ios 只允许越狱手机安装非应用商店应用。因此，无法按照您的要求将 android 和 ios 应用程序放在同一个商店/分发介质中。

ios 应用程序只能在没有应用程序商店的情况下分发给有限的受众进行测试等。

不过，您可以通过自己的网站或其他应用商店分发 Android 应用。

另请参阅此线程： [没有 AppStore 的 iPhone 应用程序](https://stackoverflow.com/questions/982476/iphone-app-without-appstore)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T17:47:11.570

如果您已在开发者帐户中向 Apple 注册了该设备的 UDID，则您只能将 iOS 应用程序分发到未修改的 iOS 设备。这适用于最终的商店分发和任何私人 beta 测试。没有其他办法。

因此，没有世界上可访问的解决方案可以满足您对原生 iOS 应用程序的需求。

但是您可以制作 HTML5 网络应用程序（可在 Safari 中运行的可剪辑网站），无需任何应用程序批准即可在世界范围内访问。

# ios - 在 NSAttributedString 中嵌入信息

> ID：14214068
> 
> 赞同：1
> 
> 时间：2013-01-08T11:34:35.603
> 
> 标签：ios, nsattributedstring

我正在使用 HTML，它在标签的属性中存储了一些额外的数据。为了显示文本，我使用`DTCoreText`将 HTML 转换为`NSAttributedString`. 当用户与一段文本交互时，我想返回并找到与该文本对应的数据。我最初的想法是修改HTML进行`NSAttributedString`转换并添加额外的信息作为属性，这可能不是一件容易的事。想请教有经验的人`NSAttributedString`，`DTCoreText`或者`DTRichTextEditor`，是否可行？是否可以将非标准属性存储`NSAttributedString`为附件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:19:48.183

根据[NSAttributedString 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSAttributedString_Class/Reference/Reference.html)：

> 属性字符串按名称标识属性，使用 NSDictionary 对象在给定名称下存储值。**您可以将任何您希望的属性名称/值对分配给一系列字符——由您的应用程序来解释自定义属性** （请参阅 Attributed String Programming Guide）。如果您在 Core Text 框架中使用属性字符串，您还可以使用该框架定义的属性键。在 iOS 中，标准属性键在 NSAttributedString UIKit Additions Reference 的“常量”部分中描述。在 OS X 中，标准属性键在 NSAttributedString Application Kit Additions Reference 的“常量”部分进行了描述。

您可以将任意属性存储在属性字符串中。因此，您应该能够通过手动向原始 HTML 和它生成的属性字符串添加唯一标识符，在 HTML 和属性字符串文本之间进行一对一的匹配。

如果您的 HTML 中尚不存在此类唯一标识符，这可能意味着手动预处理您的 HTML 以将其分解为块，然后将其转换为单独的属性字符串以添加唯一标识符 - 这将更改该 HTML所以它不再是真正的原文！

# android - 类扩展片段和列表视图

> ID：14214073
> 
> 赞同：0
> 
> 时间：2013-01-08T11:35:05.507
> 
> 标签：android, android-fragments, listactivity, android-listfragment

我正在尝试使用片段创建一个选项卡，该选项卡将在解析 xml 页面后显示条目列表。但是我无法在选项卡类中扩展listactivity，因为它已经扩展了片段。我尝试实现listfragments，但它在ListAdapter adapter = new SimpleAdapter上给我一个错误，说**“构造函数SimpleAdapter（Protab1，ArrayList>，int，String [ ], int[]) 是未定义的”**。你能帮帮我吗？

```
package com.example.pro1;
import java.util.ArrayList;
import java.util.HashMap;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;

import android.annotation.TargetApi;
import android.os.Build;
import android.os.Bundle;
import android.support.v4.app.ListFragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ListAdapter;
import android.widget.SimpleAdapter;

@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public class Protab1 extends ListFragment {
    // All static variables
        static final String URL = "http://api.androidhive.info/pizza/?format=xml";
        // XML node keys
        static final String KEY_ITEM = "item"; // parent node
        static final String KEY_ID = "id";
        static final String KEY_NAME = "name";
        static final String KEY_COST = "cost";
        static final String KEY_DESC = "description";

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        // Inflate the layout for this fragment

        return inflater.inflate(R.layout.protab1, container, false);
        ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);
        // looping through all item nodes <item>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map.put(KEY_ID, parser.getValue(e, KEY_ID));
            map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
            map.put(KEY_COST, "Rs." + parser.getValue(e, KEY_COST));
            map.put(KEY_DESC, parser.getValue(e, KEY_DESC));

            // adding HashList to ArrayList
            menuItems.add(map);
        }

        // Adding menuItems to ListView
        ListAdapter adapter = new SimpleAdapter(this, menuItems,
                R.layout.list_item,
                new String[] { KEY_NAME, KEY_DESC, KEY_COST }, new int[] {
                        R.id.name, R.id.desciption, R.id.cost });

        setListAdapter(adapter);

        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:17:58.240

尝试使用`this.getActivity()`而不是`this`作为 SimpleAdapter 的第一个参数。第一个参数接受一个 Context 对象，但由于 ListFragment（或任何 Fragment）没有扩展 Context，因此它不起作用。

# linq - c# LINQ DataTable 减法

> ID：14214077
> 
> 赞同：0
> 
> 时间：2013-01-08T11:35:17.080
> 
> 标签：linq, datatable

我有两个数据表，它们有不同的列，但一列是相同的。

我想获取新的 DataTable，其中包含 dt1 中不存在于 dt2 中的行。

我怎样才能使用 LINQ 呢？

那是我当前的代码，但它仅适用于具有相同列的数据表：

```
private void Delete_HPM_Deleted_Points(int YellowCard_Request_ID)
{
    DataTable dt_hpm_points_DB = DataAccessLayer.Get_YellowCard_Request_HPM_Points(YellowCard_Request_ID);
    //dt_hpm_points_DB.Columns.Remove("HPM_Tool_ID");
    //dt_hpm_points_DB.Columns.Remove("HPM_Point_Message");
    //dt_hpm_points_DB.Columns.Remove("HPM_Point_isDisabled");
    //dt_hpm_points_DB.Columns.Remove("HPM_Point_Comments");

    DataTable dt_hpm_points_Local = UserSession.Get_User_YC_HPM_Added_Points_DATATABLE();
    //dt_hpm_points_Local.Columns.Remove("HPM_Tool_ID");
    //dt_hpm_points_Local.Columns.Remove("HPM_Point_Message");

    //var rowsInFirstNotInSecond = dt_hpm_points_DB.Rows.Where(r1 => !dt_hpm_points_Local.Rows.Any(r2 => r1.ID == r2.ID));

    DataTable dt_points_to_remove = dt_hpm_points_DB.AsEnumerable().Except(dt_hpm_points_Local.AsEnumerable(), DataRowComparer.Default).CopyToDataTable();

    foreach (DataRow dr in dt_points_to_remove.Rows)
    {
        DataAccessLayer.Delete_YellowCard_Request_HPM_Point(YellowCard_Request_ID, dr["HPM_Point_ID"].ToString());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:42:41.957

You can use [`Linq-To-DataSet`](http://msdn.microsoft.com/en-us/library/vstudio/bb552415.aspx) with a "Left Outer Join":

```
var justInDT1 = from r1 in dt1.AsEnumerable()
                join r2 in dt2.AsEnumerable()
                on r1.Field<int>("PK_ID") equals r2.Field<int>("FK_ID") into GJ
                from subRow in GJ.DefaultIfEmpty()
                where subRow == null
                select r1; 
```

[**How to: Perform Left Outer Joins (C# Programming Guide)**](http://msdn.microsoft.com/en-us/library/vstudio/bb397895.aspx)

# batch-file - 如何用 sp_ 覆盖名称以 nl_ 开头的文件

> ID：14214095
> 
> 赞同：0
> 
> 时间：2013-01-08T11:36:23.463
> 
> 标签：batch-file, rename, xcopy

我有文件夹 A 和 B。文件夹 A 有如下文件：a.mp3 和 a.txt，文件夹 B 有：b.mp3 和 b.txt。我在这里要做的是将文件夹A的内容复制并重命名为B，以便可以覆盖文件。

以下是有关如何在文件夹 B 中覆盖和保留相同文件名的示例代码：

```
XCOPY /HECY A\a.txt B\b.txt 
```

但我不想键入所有文件名来复制和覆盖文件夹 B 中的文件。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:47:41.640

这应该有效。它将所有`A\nl_*.*`文件复制到`B\`，重命名`nl`到`sp`并覆盖文件。

```
setlocal enabledelayedexpansion
for %%a in (A\nl_*.*) do (
set file=%%~nxa
set file=!file:~2!
xcopy /hecyi "%%a" "B\sp!file!"
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:48:06.177

重命名文件/目录或文件/目录。

重命名 [驱动器:][路径][目录名 1 | 文件名1] [目录名2 | 文件名2] REN [驱动器:][路径][目录名1 | 文件名1] [目录名2 | 文件名2]

例子

1.  将目录“sample”重命名为“sample”

重命名 c:\sample 样本

1.  将所有文本文件重命名为扩展名为 .bak 的文件。

重命名 *.txt *.bak

1.  用特定前缀重命名特定文件夹中的所有文件（例如：1_NEW）

重命名 * 1_NEW*

4.将文件“normal sample.txt”重命名为“example sample.txt”。每当处理带有空格的文件或目录时，都必须用引号括起来。否则你会得到“命令的语法不正确”。错误。

重命名“正常 sample.txt”“示例 sample.txt”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T20:07:28.923

您可以直接使用`xcopy /HECYI A\nl_*.* B\sp_*.*`命令执行此操作：

```
C:>dir A /b
nl_t.txt
nl_test.txt
nl_test.xyz
nl_testLarge.txt

C:>dir B /b

C:>xcopy A\nl_*.* B\sp_*.*
A\nl_t.txt
A\nl_test.txt
A\nl_test.xyz
A\nl_testLarge.txt
4 File(s) copied

C:>dir B /b
sp_t.txt
sp_test.txt
sp_test.xyz
sp_testLarge.txt 
```

# google-apps-script - 运行脚本...消息在某些系统/浏览器上停留在那里

> ID：14214100
> 
> 赞同：1
> 
> 时间：2013-01-08T11:36:39.327
> 
> 标签：google-apps-script

我们的一位用户在执行我们的一款应用程序时遇到了问题。每当他们访问脚本时，“Running script Dismiss”消息就会在那里停留看似无限的时间。

浏览器中是否有一些插件会阻止谷歌应用脚​​本正常工作？他们在 linux 上尝试过 Firefox，在 Mac 上尝试过 Firefox 和 Chrome。

该脚本可以通过此模板访问 - [https://docs.google.com/spreadsheet/ccc?key=0Al5WvYyk0zzmdDNLeEcxWHZJX042dS0taXJPNXpJMHc](https://docs.google.com/spreadsheet/ccc?key=0Al5WvYyk0zzmdDNLeEcxWHZJX042dS0taXJPNXpJMHc)，将出现一个名为 OntoMaton 的工具菜单。此菜单中的所有四个操作，包括琐碎的“关于”项，对用户来说都失败/挂起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:07:03.860

我们发现问题是共享文档没有请求在用户机器上运行的权限，因此脚本无法运行，但应该有一条警告消息。

我要求用户直接从库中安装应用程序脚本，然后一切都为他们工作。

# c# - 重写文本时不保留非英文字符

> ID：14214103
> 
> 赞同：4
> 
> 时间：2013-01-08T11:36:48.033
> 
> 标签：c#, .net, text, file-io, character-encoding

我在客户网站上遇到了一个问题，其中包含**“HabitaþÒo”之**类的单词的行在输出时被破坏了。我正在处理一个文本文件（拉出选定的行并将它们写入另一个文件）

为了诊断，我把问题归结为一个只有那个坏词的文件。

原始文件不包含 BOM，但 .net 选择将其读取为 UTF-8。

在阅读和书写时，这个词最终看起来像这样“Habita��o”。

BadWord.txt 文件的十六进制转储如下所示

![在此处输入图像描述](../Images/6b5eb808e7dc240641886ca94a4e7f79.png)

使用此代码复制文件

```
using (var reader = new StreamReader(@"C:\BadWord.txt"))
using (var writer = new StreamWriter(@"C:\BadWordReadAndWritten.txt"))
    writer.WriteLine(reader.ReadLine()); 
```

. . . 给 . . .

![在此处输入图像描述](../Images/290feb4734ba7937ccbf6eea022b5d51.png)

保留阅读器编码也无济于事

```
using (var reader = new StreamReader(@"C:\BadWord.txt"))
using (var writer = new StreamWriter(@"C:\BadWordReadAndWritten_PreseveEncoding.txt", false, reader.CurrentEncoding))
    writer.WriteLine(reader.ReadLine()); 
```

. . . 给 . . . ![在此处输入图像描述](../Images/99f6bdbf723eb9bf8d6686010af93f50.png)

任何想法这里发生了什么，我如何处理这个文件并保留原始文本？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T11:40:43.877

唯一的方法是以相同的编码读取文件，它已被编码。这意味着 Windows-1252：

```
Encoding enc = Encoding.GetEncoding(1252);
string correctText = File.ReadAllText(@"C:\BadWord.txt", enc); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-26T19:43:16.753

你应该`reader.Peek()`在打开 StreamWriter 之前做一个。这会从文件中读取第一个字符以正确检测编码而不更改当前位置。

# varnish - 列出清漆缓存的内容？

> ID：14214104
> 
> 赞同：19
> 
> 时间：2013-01-08T11:36:55.553
> 
> 标签：varnish

有没有办法列出清漆缓存存储的内容？此外，最好以某种方式列出最频繁的缓存命中。

我找到了一种通过列出发送到后端的内容来查看最常见的缓存未命中的方法：

```
varnishtop -b -i TxURL 
```

查看我的最高缓存命中 URL 是非常有用的。

编辑：我正在使用版本：varnish-3.0.3 修订版 9e6a70f

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-09T13:21:28.417

我认为这可以帮助您：

您可以使用 varnishncsa 的参数“Varnish:hitmiss”。

首先使用以下命令捕获日志样本：

`varnishncsa -F '%U%q %{Varnish:hitmiss}x' -n NAME -w /path/requests.logs`

进而：

`sort -k 1 /path/requests.logs | uniq -c | sort -k 1 -n -r | head -25`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T13:30:53.773

Varnish 中不包含此功能，但您可以轻松添加一些脚本来执行此操作。

*   您需要做的第一件事是将 varnishncsa 作为服务启动并将输出写入每日文件。
*   然后至少添加到默认输出格式`%{Varnish:hitmiss}x`和`%U`（参见[varnishncsa doc](https://www.varnish-cache.org/docs/trunk/reference/varnishncsa.html)）
*   最后，编写一些脚本来计算您的顶级 URL，例如如下所示：

> ```
> # we admit %{Varnish:hitmiss}x is the first column and %U the second
> awk '$0 ~ / hit / { arr[$8]=arr[$8]+1 }END{ for(k in arr) { print arr[k]";"k } }' varnishncsa.log|sort -k 1 -nr |head 
> ```

并随时根据您的特定需求进行更新..

# r - 在表格和申请之后，我该如何分配它

> ID：14214107
> 
> 赞同：0
> 
> 时间：2013-01-08T11:37:01.010
> 
> 标签：r, dataframe

我有一个 data.frame

```
df <- data.frame(Equip = c(1,1,1,1,1,2,2,2,2,2),
                 Notif = c(1,1,1,5,5,3,3,3,3,4),
                 Component = c("1","1","1","2","2","1","2","2","2","3")) 
```

列`Notif`被分类到`Component`列中的位置（因为它可能不相关，我不会展示我是如何创建该列的。）

现在我有一个将`Notif`值映射到相应类别的表：

```
 example <- 1 "repair" ; 3 "service" ; 4 "other" ; 5 "service" 
```

如何创建`Category`向量并将其添加到我的 data.frame？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:45:31.790

一种方法是使用命名向量映射`Notif`到`Category`：

```
categories <- c(`1` = "repair", `3` = "service", `4` = "other",  `5` = "service") 
```

然后你可以这样做：

```
df$Category <- categories[as.character(df$Notif)] 
```

或等效地

```
df <- transform(df, Category = categories[as.character(Notif)]) 
```

在这两种情况下，输出都是：

```
df
#    Equip Notif Component Category
# 1      1     1         1   repair
# 2      1     1         1   repair
# 3      1     1         1   repair
# 4      1     5         2  service
# 5      1     5         2  service
# 6      2     3         1  service
# 7      2     3         2  service
# 8      2     3         2  service
# 9      2     3         2  service
# 10     2     4         3    other 
```

* * *

另一种方法是合并 data.frames，比如数据库连接：

```
categories <- data.frame(Notif = c(1, 3, 4, 5),
                         Category = c("repair", "service", "other", "service"))

merge(df, categories, by = "Notif", all.x = TRUE)
#    Notif Equip Component Category
# 1      1     1         1   repair
# 2      1     1         1   repair
# 3      1     1         1   repair
# 4      3     2         1  service
# 5      3     2         2  service
# 6      3     2         2  service
# 7      3     2         2  service
# 8      4     2         3    other
# 9      5     1         2  service
# 10     5     1         2  service 
```

请注意，输出已重新排序，`Notif`这对您来说可能是也可能不是问题。当`Notif`映射到多个变量（如`Category`.

# mysql - 如何使 MySQL 在重复键上返回冲突键？看里面

> ID：14214113
> 
> 赞同：0
> 
> 时间：2013-01-08T11:37:25.600
> 
> 标签：mysql, on-duplicate-key

说，我有一个简单的表：`id`作为主键，并且`field`. 然后我做： `INSERT INTO table(id,field) VALUES (1,'blah')` 然后我再做一次。那么，我怎样才能让 MySQL 返回以下内容：

> ID
> 
> 1

这样它就可以像 SELECT-ing 冲突键一样工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:59:02.137

你可以考虑以下...

```
 DROP TABLE IF EXISTS my_table;

    CREATE TABLE my_table(my_id INT NOT NULL PRIMARY KEY,my_field VARCHAR(12) NOT NULL,conflict TINYINT NOT NULL DEFAULT 0);

    INSERT INTO my_table (my_id,my_field) VALUES (1,'blah') ON DUPLICATE KEY UPDATE conflict = 1;

    SELECT * FROM my_table WHERE conflict = 1;
    Empty set (0.00 sec)

    INSERT INTO my_table (my_id,my_field) VALUES (1,'blah') ON DUPLICATE KEY UPDATE conflict = 1;
    Query OK, 2 rows affected (0.07 sec)

    SELECT * FROM my_table WHERE conflict = 1;
    +-------+----------+----------+
    | my_id | my_field | conflict |
    +-------+----------+----------+
    |     1 | blah     |        1 |
    +-------+----------+----------+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:57:11.150

我认为没有一些代码是不可能的，mysql会返回一个通用的重复键错误

带码解决方案：

您是否使用 AUTO_INCREMENT 列？

如果您使用 INSERT IGNORE 并且该行被忽略，

AUTO_INCREMENT 计数器不递增并且 LAST_INSERT_ID() 返回 0，

这反映了没有插入任何行。

所以：

*   插入忽略
*   如果 LAST_INSERT_ID()，则完成（插入新行）
*   否则你的数据是重复的

[last_insert_id() 文档 >](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)

[插入忽略文档>](http://dev.mysql.com/doc/refman/5.5/en/insert.html)

# c - Writing time to a file in C using time.h

> ID：14214114
> 
> 赞同：0
> 
> 时间：2013-01-08T11:37:30.453
> 
> 标签：c

So basically I've got this project in C - I have to design a customer/order system, in which the customer can make multiple orders but each order is limited to a single product type. I created a struct 'orders' which contains the customer ID, product name, price, and the order time. Here is the code to calculate time:

```
 // computing order time
        time_t timeorder;
        char * displayT;
        timeorder = time(NULL);
        // convert time to string so that it can be displayed
        displayT= ctime(&timeorder);
        printf("Your order time is: %s\n", displayT); //check if time displays correctly
        newOrders11[count13].timeorder = displayT; 
```

Immediately after, the struct 'orders' is written to file. After the user makes an order, he/she should be available to view his/her LATEST order after entering his/her ID number. However, when the order is read from the file, the first order the user made (rather than the latest) is displayed. Here is the code for reading from file:

```
 while (count13<=MAXORDERSTOBEMADE && (fread(&newOrders11[count13], sizeof(struct orders), 1, filePointer))==1)
{
    if(ID == newOrders11[count13].ID) {
        printf("These are the details for order %i\n", count13);

        if(count13>=0)
        printf("Customer ID: %d\n", newOrders11[count13].ID);
        printf("Product Name: %s\n", newOrders11[count13].productname);
        printf("Price: %f\n", newOrders11[count13].total);
    } else {
        continue;
    }
    count13++;
} 
```

Does any one know how I should go about this? Sorry, I am still a C beginner. This is my first program in C.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:29:55.623

Within your `while` loop, you're only testing against the customer ID, so the first record for that customer will match.

Given that records in the file are ordered by timestamp, it might be better to start reading from the end of the file, rather than the beginning:

```
fseek(filePointer, -sizeof (struct orders), SEEK_END);
while (count13 <= MAXORDERSTOBEMADE && (fread(...) == 1))
{
  if (ID == ...)
  {
     ...
  }    
  else
  {
    fseek(filePointer, -2 * sizeof(struct orders), SEEK_CUR);
  }
} 
```

Caveats: `SEEK_END` may not be supported for binary streams, and arbitrary offsets may not be meaningful for text streams:

> ### 7.21.9.2 The fseek function
> 
> 2 The `fseek` function sets the file position indicator for the stream pointed to by `stream`. If a read or write error occurs, the error indicator for the stream is set and `fseek` fails.
> 
> 3 For a binary stream, the new position, measured in characters from the beginning of the file, is obtained by adding offset to the position specified by `whence`. The specified position is the beginning of the file if whence is `SEEK_SET`, the current value of the file position indicator if `SEEK_CUR`, or end-of-file if `SEEK_END`. A binary stream need not meaningfully support `fseek` calls with a `whence` value of `SEEK_END`.
> 
> 4 For a text stream, either `offset` shall be zero, or `offset` shall be a value returned by an earlier successful call to the `ftell` function on a stream associated with the same file and `whence` shall be `SEEK_SET`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:39:08.413

You need to scan through the whole file until you are sure you will not see any more orders. In other words, when you see EOF (end-of-file), you should print the last match you found.

*   So, read through the entire file, one record at a time.
*   If you find a match, store it temporarily in variables for later printing (overwriting any previous match - you only need to remember the last one found).

(optionally, you may want to compare the timestamps and ignore matches with older timestamps. If your file is written in timestamp order this step can be omitted)

*   After reading through the whole file, print the values of the variables where you stored the latest record.

# python - Pyside：windows7 上未解决的函数错误消息

> ID：14214119
> 
> 赞同：1
> 
> 时间：2013-01-08T11:37:47.973
> 
> 标签：python, qt, python-3.x, python-2.7, pyside

我尝试运行一个简单的程序，该程序是用 Python 编写的，带有 PySide 模块来截取网站的屏幕截图。我正在使用 OpenSSL（已安装）的 Windows 7 上运行此程序。

我收到以下错误：

```
QSslSocket: cannot call unresolved function SSLv3_client_method
QSslSocket: cannot call unresolved function SSL_CTX_new
QSslSocket: cannot call unresolved function SSL_library_init
QSslSocket: cannot call unresolved function ERR_get_error 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:55:20.567

我决不相信这个解决方案，因为我做了一个简单的谷歌搜索并遇到了 [http://codeblog.vurdalakov.net/2009/11/solution-qsslsocket-cannot-call.html](http://codeblog.vurdalakov.net/2009/11/solution-qsslsocket-cannot-call.html)

我相信由于库内的变化，错误会有所不同。

问题

当您尝试使用`QSslSocket`或`QNetworkAccessManager`类打开 HTTPS URL 时，您会收到以下错误：

```
QSslSocket: cannot call unresolved function SSLv3_client_method
QSslSocket: cannot call unresolved function SSL_CTX_new
QSslSocket: cannot call unresolved function ERR_get_error
QSslSocket: cannot call unresolved function ERR_error_string 
```

解决方案

您需要安装 OpenSSL Win32 或 Win64 二进制文件。

1.  打开 Win32 OpenSSL 安装项目页面。
2.  下载最新的“light”Win32 或 Win64 安装包，例如“Win32 OpenSSL v0.9.8l Light”。
3.  将其安装到任何位置。忽略“Microsoft Visual C++ 2008 Redistributables”警告（单击“确定”）并选择将 OpenSSL DLL 复制到“OpenSSL 二进制文件 (\bin) 目录”。
4.  将\bin 文件夹中的`libeay32.dll`and复制到您的or`ssleay32.dll`所在的同一位置。`QtNetwork4.dll``QtNetworkd4.dll`

# android - 如何根据android中设备屏幕（或宽度）的大小调整webview的大小

> ID：14214121
> 
> 赞同：0
> 
> 时间：2013-01-08T11:38:02.867
> 
> 标签：android, android-listview, width, android-webview, image-resizing

我有一个自定义 ListView，其中包含一个膨胀的 webView。这是 XML 代码

reader_layout.xml

```
 <ListView
    android:id="@+id/listReader"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/readerHeader"
    android:divider="@android:color/background_dark"
    android:dividerHeight="5dp" >
</ListView> 
```

reader_list_webview.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="match_parent"
   android:layout_height="match_parent" >
<WebView
    android:id="@+id/webView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:clickable="false"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:scrollbars="none" />
</RelativeLayout> 
```

*   我正在使用 AsyncTask 和 BaseAdapter 用 WebView 填充 listView，并且我在每个 webView 中加载了不同的 URL。这是java代码。

    ```
     public class ImageAdapter extends BaseAdapter {

        public ImageAdapter(Context c) {
        context = c;
    }

    // ---returns the number of images---
    public int getCount() {
        return URLs.size();
    }

    public ImageAdapter(Context ctx, Activity act) {
        inflater = (LayoutInflater) act
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    // ---returns the ID of an item---
    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    // ---returns an ImageView view---
    public View getView(final int position, View convertView,
            ViewGroup parent) {

        // ImageView bmImage;

        final ViewHolder holder;
        View vi = convertView;
        if (convertView == null) {
            vi = inflater.inflate(R.layout.book_reader_list_style, parent,
                    false);
            holder = new ViewHolder();

            holder.webView = (WebView) vi.findViewById(R.id.webView1);

            WebSettings webSettings = holder.webView.getSettings();
            webSettings.setCacheMode(WebSettings.LOAD_DEFAULT);
            holder.webView.setVerticalScrollBarEnabled(false);
            holder.webView.setHorizontalScrollBarEnabled(false);
            holder.webView.setVisibility(View.VISIBLE);
            webSettings.setLoadWithOverviewMode(true);
            webSettings.setUseWideViewPort(false);
            holder.webView.setInitialScale(scaleWebView);

            vi.setTag(holder);
        } else {

            holder = (ViewHolder) vi.getTag();
        }
        holder.webView.loadUrl((URLs.get(position)));

        return vi;

    } 
    ```

    }

    类 ViewHolder { WebView webView; }

一切正常。但问题是一些 URL 变得比 webview 大小更宽，因此它们不适合设备屏幕宽度，并且一些 URL 加载小页面，因此我们需要设置 webview 的缩放。

*   我想根据 URL 页面的大小动态设置 webView 的缩放/比例。所以用户不应该使用放大或缩小。

我试过这个

```
android:layout_width="match_parent"
android:layout_height="match_parent" 
```

还有这个

```
myWebview.setLoadWithOverviewMode(true);
myWebview.setUseWideViewPort(true); 
```

这也是

```
holder.webView.setInitialScale(percent); 
```

但这并不能解决我的要求。

## 编辑

如果我设置`setLoadWithOverviewMode(true/false);` 为 true 我的应用程序崩溃，这里是 Logcat

```
01-08 16:16:56.600: E/AndroidRuntime(8666): java.lang.IllegalArgumentException: bitmap size exceeds 32bits 
```

*   实际上我的 webview 加载了 491X600 到 300X500 大小的图像。我怎样才能调整图像或类似的东西？但是当我设置 setLoadWithOverviewMode(true/false); 假它工作正常，但问题是 webview 没有调整大小以适应屏幕的宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:47:07.500

你可以试试这个。。

```
/**This is for to set wide */
    mWebView.getSettings().setUseWideViewPort(true);
    mWebView.getSettings().setLoadWithOverviewMode(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:26:19.117

最后我自己整理了我的解决方案。这里是

```
holder.webView.loadDataWithBaseURL(null,"<!DOCTYPE html><html><body style = \"text-align:center\"><img style=\"border-style:dotted;border-width:5px;border-color:black;width:99%;\" src= "  + URLs.get(position)+ " alt=\"page Not Found\"></body></html>","text/html", "UTF-8", null) 
```

它将完全适合 webView 的标签填充屏幕。无论您的手机是 230X480 还是您有任何 800X1200 的安卓平板电脑。

# javascript - Jquery链接选择任何线索我做错了什么？

> ID：14214122
> 
> 赞同：0
> 
> 时间：2013-01-08T11:38:03.757
> 
> 标签：javascript, jquery, dom, data-binding

我正在使用数据属性进行选择，我想根据第一个选择的数据属性进行过滤。这是我的代码，请告诉我什么？请原谅我的代码混乱，我是 javascript/Jquery 菜鸟

html块/////////

```
<select id="selectOne">
                    <option data-team='{"team":"Engineering"}'>Engineering </option>
                    <option   data-team='{"team": "Software"}'>Software Development</option>
                    <option data-team='{"team": "HumanResources"}'>Human Resources</option>
                    <option  data-team='{"team": "MarkettingAndSales"}'>Marketting and Sales</option>
                    <option  data-team='{"team": "Administrative"}'>Administrative</option>
                    <option  data-team='{"team": "Others"}' class="others">Others</option>
                </select>

                <select id="selectTwo">
                    <option  class="two" data-Speciality='{"team": "Software", "Speciality": "WebDevelopment"}'>Web Development </option>
                    <option  class="two" data-Speciality='{"team": "Engineering", "Speciality": "WebApplication"}'>Application Development </option>
                    <option  class="two" data-Speciality='{"team": "Software", "Speciality": "WebDevelopment"}'>UI/UX Design</option>
                    <option  class="two" data-Speciality='{"team": "Others", "Speciality": "ScientificResearch"}'>Scientific / Research</option>
                    <option  class="two" data-Speciality='{"team": "Engineering", "Speciality": "ScientificResearch"}'>Computer Hardware / Networking</option>
                    <option class="two" data-Speciality='{"team": "Others", "Speciality": "Others"}'>Others</option>
                </select>

$(function(){
    // function to use ajax calls to filter the table data depending on the select forms value
            $("#selectOne").change(function() {
                $("#selectTwo").hide();
                var selected = $(this).find('option:selected');
                $('#selectTwo option [data-team===selected]').show();

            console.log( $(selected).data('team') );

            //the filtering mechanism based on the class
         }); 
```

/// 显然我没有得到第二个选择的值任何线索为什么？

```
$(function(){
    // function to use ajax calls to filter the table data depending on the select forms value
        $("#selectOne").change(function() {
    var selected=$(this).find('option:selected').data('team').teamName;
    console.log(selected);
    var selectTwo= $('#selectTwo').val().data('Speciality').team;
     console.log(selectTwo);

}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:42:11.690

你不能这样显示/隐藏`option`s，至少不是在每个浏览器中。

您必须积极地操作 DOM，即根据您的过滤器逻辑删除和添加元素，而您最终会用简单的 jQuery 搞得一团糟。

如果您需要这样的功能，我会选择任何将数据与 UI 客户端分离的方法：[在这里您可以找到](http://addyosmani.github.com/todomvc/)很多解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:43:50.897

我想，你想要的是：

```
var selected = $(this).val();    
$('#selectTwo').val(selected).show(); 
```

不确定您的期望。

# xml - 我想将 xml 中的数据显示到网格中

> ID：14214128
> 
> 赞同：0
> 
> 时间：2013-01-08T11:38:28.530
> 
> 标签：xml, windows-phone-8

我想将 xml 中的数据显示到网格中

我需要的值我得到这个foreach：

```
foreach (XElement wid in document.Root.Elements("widget"))
    {
                MessageBox.Show(wid.Attribute("caption").Value); //variable: nombreWidget 

        foreach (XElement service in wid.Elements("service"))
                {
                    MessageBox.Show(service.Attribute("caption").Value); //variable: nombreServicio 
                    MessageBox.Show(service.Element("xvalue").Value); //variable: valor 
                }
     } 
```

手动给我填写的变量引入值：

```
public class Widgets
{
    public Widgets()
    {

        Items = new ObservableCollection<WidgetCollectionItem>
            {
                new WidgetCollectionItem
                    {
                        nombreWidget = "Widget", nombreServicio = "Servicio", valor = "valor"
                    },
        new WidgetCollectionItem
                    {
                        nombreWidget = "Widget2", nombreServicio = "Servicio2", valor = "valor2"
                    },
            };
    }
    public ObservableCollection<WidgetCollectionItem> Items { get; set; }
}

public class WidgetCollectionItem
{
    public string nombreWidget { get; set; }
    public string nombreServicio { get; set; }
    public string valor { get; set; }
} 
```

但我想要实现的是在 ObservableCollection 中输入 foreach 的数据

我尝试将两者混合，在 ObservableCollection 之后进入 foreach ，以游览和输入数据，但不起作用。

解决办法是什么？

# algorithm - 日期类型值的模糊匹配

> ID：14214132
> 
> 赞同：0
> 
> 时间：2013-01-08T11:38:33.660
> 
> 标签：algorithm, fuzzy, fuzzy-comparison

我没有真正的问题，但我更喜欢为一个问题寻求创造性的输入。

我想比较两个（很可能不相等的）日期值并计算它们的相似性比率。因此，例如，如果我进行比较`08.01.2013`，`10.01.2013`我会得到一个相对较高的值，但介于两者之间`08.01.2013`，`17.04.1998`它会非常低。

但现在我不确定我应该如何准确计算相似度。首先，我正在考虑将 Date 值转换为字符串，然后在它们上使用 EditDistance（将一个字符串转换为另一个字符串的单个字符操作的数量）。在某些情况下，这似乎是一个好主意，我肯定会实现它，但我还需要一个适当的计算，比如`31.01.2013`和`02.02.2013`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:28:15.073

为什么不使用两个日期之间的天数差异作为起点呢？相似日期为“低”，不等日期为“高”，然后使用算术获得符合您要求的“相似率”。

如果您遇到困难，请考虑过去“足够早”的固定参考日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:27:43.787

可以使用[Levenshtein](http://software-and-algorithms.blogspot.de/2012/09/damerau-levenshtein-edit-distance.html)距离计算编辑距离。

一年的变化比一天的变化意味着更多的“距离”。比较天数的常用方法是以天或小时为单位计算距离。为此，您需要将两个日期转换为序列日数。Microsoft为日期比较和距离计算提供了[DateDiff()函数。](http://office.microsoft.com/en-us/access-help/calculate-the-difference-between-two-date-or-time-values-HP001098486.aspx?CTT=3)

# .net - SAP Webservice 错误创建生产订单

> ID：14214133
> 
> 赞同：0
> 
> 时间：2013-01-08T11:38:36.687
> 
> 标签：.net, sapb1

我在使用 SAP 业务一 Web 服务编写的应用程序时遇到问题。我们的测试数据库运行正常，但是当我们进入测试生产数据库时，我们遇到了问题。

当我们添加生产订单时，我们不断收到以下错误 -

无效代码 [OWOR.Series]

它已经创建了销售订单，如果您手动创建具有相同行的生产订单，它可以正常工作。如果您重置生产文档编号，它也可以工作一次，但它会再次停止工作并出现相同的错误。

这在我们的测试系统中运行良好，所以我假设编号有问题，但我不知道是什么。

谢谢卢克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:58:06.353

好的，所以我解决了。事实证明，对登录 API 的调用对数据库名称非常挑剔。这一切都需要小写，不知道为什么，但是当我通过它时，它按预期工作。很奇怪。

# java - 检票口面板在按钮提交时没有刷新

> ID：14214137
> 
> 赞同：1
> 
> 时间：2013-01-08T11:38:54.123
> 
> 标签：java, refresh, wicket

添加新组后，我需要刷新面板（它已在下面的代码中声明为面板）。该`ItemSelectionComponent`组件是一个不同的组件`Panel`，其中包含特定人员的添加组。我需要做的是，一旦我添加了一个新组，应该刷新特定面板（`ItemSelectionComponent`具有 wicket id的面板`"panel"`）并且应该显示新添加的组。

我目前
`target.addComponent(panel);`
用来刷新，但它似乎没有工作:(

有人可以告诉我有什么问题吗？
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:46:58.503

您的avaiableGroups 应该是包含您的GroupSelectionModel 列表的LoadableDetachableModel。当您使用 AjaxSubmitLink 从 LoadableDetachableModel 获取 List 并添加到它。

```
LoadableDetachableModel<List<GroupSelectionModel>> LDM = new LoadableDetachableModel<List<GroupSelectionModel>>() {

     private static final long serialVersionUID = 1L;

     @Override
     protected String load() {                          
           return ServiceLocator.getInstance().find(GroupService.class).getAllGroups();;
     }
};

AjaxSubmitLink addBtn = new AjaxSubmitLink("addBtn") {

        @Override
        protected void onSubmit(AjaxRequestTarget target, Form<?> f) {

            List<Group> currentGroups = ServiceLocator.getInstance().find(GroupService.class).getAllGroups();
            Group group = new Group();
            group.setGroupType(Group.GroupType.EMAIL);
            group.setMerchant(merchant);
            group.setGroupName(form.getModelObject().getGroupName());

            ServiceLocator.getInstance().find(GroupService.class).saveGroup(group);
            GroupSelectionModel newGroup = new GroupSelectionModel();
            newGroup.setGroup(group);
            newGroup.setGroupSelected(true);
            LDM.getObject().add(newGroup);
    target.addComponent(panel);
        }
    }; 
```

然后将 LDM 作为参数传递给 ItemSelectionComponent 而不是avaiableGroups。在 ItemSelectionComponent 中使用 LDM，就像使用avaiableGroups 一样。

```
 public class ItemSelectionComponent extends Panel{
private static final long serialVersionUID = 6670144847L;
private LoadableDetachableModel<List<GroupSelectionModel>> model;

public ItemSelectionComponent(String id,LoadableDetachableModel<List<GroupSelectionModel>> model){
    super(id);
    this.model = model;
    init();

}

private void init(){
    WebMarkupContainer groupSelectionContainer = new WebMarkupContainer("groupSelectionContainer");
    RepeatingView repeater = new RepeatingView("groupList");
    WebMarkupContainer groupList;

    for(final GroupSelectionModel m : model.getObject()){
        groupList = new WebMarkupContainer(repeater.newChildId());
        WebMarkupContainer groupNameContainer = new WebMarkupContainer("groupNameContainer");
        groupNameContainer.add(new Label("groupName", m.getGroup().getGroupName()));
        groupList.add(groupNameContainer);
        repeater.add(groupList);                  
    }
    groupSelectionContainer.add(repeater);
    this.add(groupSelectionContainer);
}
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:44:18.140

对于您的问题，我有一种可能的解决方案。添加一个**WebMarkupContainer**：

```
final WebMarkupContainer panelContainer = new WebMarkupContainer("panelContainer");
panelContainer.setOutputMarkupId(true); 
```

在 html 中，您将拥有它：

```
<div wicket:id="panelContainer"></div> 
```

然后您必须将面板添加到您的标记容器中：

```
panelContainer.add(panel) 
```

并在目标而不是面板上添加标记容器：

```
target.addComponent(panelContainer); 
```

如果这不起作用，请告诉我，我将提供进一步的帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T12:27:23.037

当您以面板为目标时，其中的组件将被刷新。但是会发生什么取决于“ItemSelectionComponent”如何使用“avaiableGroups”。

# unit-testing - 骆驼路线测试

> ID：14214142
> 
> 赞同：2
> 
> 时间：2013-01-08T11:39:18.203
> 
> 标签：unit-testing, apache-camel

我需要使用（版本 1.6）为一些骆驼路线编写单元测试用例

任何人都可以建议是否可以在路线内模拟组件（处理器和幂等消费者）？如果是，请提出方法。

以下是路线片段

```
 from("direct:someuri").process(someClassObject).
    idempotentConsumer(header("someHeadername"),socratesMessageIdRepository(bean(JpaTemplate.class)))./*process(exceptionProcessor)*/
    to(someQueues); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T11:54:05.340

Camel 有一个很好的测试和模拟框架。

关于这个主题有很多主题，我建议您从这里开始阅读：http: [//camel.apache.org/mock](http://camel.apache.org/mock)和这里[http://camel.apache.org/testing.html](http://camel.apache.org/testing.html)

请注意，Camel 源代码充满了测试用例，您可以研究一些以获取如何测试/模拟的灵感。前任。[http://svn.apache.org/repos/asf/camel/trunk/camel-core/src/test/java/org/apache/camel/processor/IdempotentConsumerTest.java](http://svn.apache.org/repos/asf/camel/trunk/camel-core/src/test/java/org/apache/camel/processor/IdempotentConsumerTest.java)

如果您只是想模拟一个处理器，您可以改用 bean 组件并通过引用调用它。

```
from("foo").bean("myBean").to("bar); 
```

如果您使用的是 spring，您可以简单地注入一个模拟版本的处理器并将其命名为 myBean。即使没有 spring，Camel 也有一个注册表，您可以在其中绑定您的模拟版本，而不是真实版本。

# eclipse - 我可以在 Eclipse 中跳转到类似于 Sublime Text 2 的符号吗？

> ID：14214146
> 
> 赞同：3
> 
> 时间：2013-01-08T11:39:36.410
> 
> 标签：eclipse, editor, keyboard-shortcuts, sublimetext2, symbols

有没有一种方法可以快速跳转到 Eclipse 中的给定符号，类似于在 Sublime Text 2 中的可能方式？在 Sublime Text 2 中，可以使用`CTRL`+`P`快捷方式（Goto Anything），然后键入`@`符号名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:39:36.410

可以使用*全局浏览器*，默认情况下可以通过`CTRL`++`SHIFT`访问`T`

# ios - NSFetchedResultsController 未通知模型更改

> ID：14214151
> 
> 赞同：0
> 
> 时间：2013-01-08T11:39:58.230
> 
> 标签：ios, nsfetchedresultscontroller

不知何故迷失了在其他项目中有效的东西，现在停止了工作。

我有一个控制器 (A)（NSObject 的子类），它有一个用于 kClassCycleQuestionDetails 类实体的 NSFetchedResultsController。我的 ManagedObjectContext 是使用 NSMainQueueConcurrencyType 启动的。

在另一个控制器 (B) 中，我开始插入上述类的实体并开始保存每十个对象。

```
[self.moc performBlock:^{
        [self prepareNewCycle];
    }]; 
```

上下文发布了 NSManagedObjectContextDidSaveNotification （在 B 中接收），但我从未看到`- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller`在 A 中调用的控制器委托方法。

两个控制器共享相同的托管对象上下文，所以我应该看到模型更改？！

有没有人有想法。

编辑：为了澄清：prepareNewCycle 将循环实体插入上下文，然后将 kClassCycleQuestionDetails 的实体添加到循环实体（多对关系）。

这是控制器 A 的 fetchedResultsController 的代码

```
- (NSFetchedResultsController *)fetchedResultsController {

if (_fetchedResultsController != nil) {
    return _fetchedResultsController;
}

/*
 Set up the fetched results controller.
 */
// Create the fetch request for the entity
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
// Edit the entity name as appropriate.
NSEntityDescription *entity = [NSEntityDescription entityForName:kClassCycleQuestionDetails inManagedObjectContext:self.moc];
[fetchRequest setEntity:entity];

// Set the batch size to a suitable number.
[fetchRequest setFetchBatchSize:20];

[fetchRequest setPredicate:[self predicateForExamCycleMode:self.cycle.examQuestionModeValue cycleId:self.cycle.cycle_id]];

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:kQCQDCycleQuestionDetails_id ascending:YES];
NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];

[fetchRequest setSortDescriptors:sortDescriptors];

// Edit the section name key path and cache name if appropriate.
// nil for section name key path means "no sections".
NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc]
                                                         initWithFetchRequest:fetchRequest
                                                         managedObjectContext:self.moc
                                                         sectionNameKeyPath:nil
                                                         cacheName:NSStringFromClass([self class])];
aFetchedResultsController.delegate = self;
self.fetchedResultsController = aFetchedResultsController;

[NSFetchedResultsController deleteCacheWithName:NSStringFromClass([self class])];
NSError *error = nil;
if (![_fetchedResultsController performFetch:&error]) {
    ALog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
}

return _fetchedResultsController; 
```

}

# matlab - 将组合字符串和数字输入的元胞数组写入文本文件

> ID：14214154
> 
> 赞同：6
> 
> 时间：2013-01-08T11:40:14.287
> 
> 标签：matlab, printf

考虑以下：

```
DateTime = {'2007-01-01 00:00';'2007-02-01 00:00';'2007-03-01 00:00'};
Headers = {'Datetime','Data'};
Dat = [100,200,300];

Data = [DateTime,num2cell(Dat')];
Final = [Headers;Data]; 
```

我如何将“最终”中的数据写入制表符分隔的文本文件。当变量仅由数字输入组成但我正在努力解决这个问题时，我知道如何使用 fopen、fprintf 等。我试过了：

```
fid = fopen('C:\Documents\test.txt','wt');
fprintf(fid,'%s\t%s\n',Final{:});
fclose(fid); 
```

但是，这不会生成与 matlab 中生成的格式相同的文本文件。如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T12:09:26.933

该解决方案提供了我认为您需要的东西；我希望有用的一些评论在旁边

```
 DateTime = {'2007-01-01 00:00';'2007-02-01 00:00';'2007-03-01 00:00'};
 Headers = {'Datetime','Data'};
 Dat = [100,200,300];

 % // In the way you used fprintf it expects just strings ('%s\t%s\n'), 
 % // therefore Data should be composed exclusively by them.
 % // Numbers are converted to strings by using num2str
 % // by using cellfun we iteratively convert every element of num2cell(Dat')
 % // in strings, obtaining a cell
 Data = [DateTime,cellfun(@num2str, num2cell(Dat'), 'UniformOutput' , false )]; 
 Final = [Headers;Data];

 fid = fopen('test.txt','wt');

 % // this iterates fprintf on the cell rows, giving you the output
 cellfun(@(x,y) fprintf(fid,'%s\t%s\n',x,y),Final(:,1),Final(:,2));       
 fclose(fid); 
```

结果

```
 Datetime   Data
 2007-01-01 00:00   100
 2007-02-01 00:00   200
 2007-03-01 00:00   300 
```

* * *

**编辑：（**来自评论）在 N 列单元格的一般情况下，您可以简单地进行 for 循环，例如

```
for i = 1 : size(Final,1)
    fprintf(fid,'%s ', Final{i,:} );
    fprintf(fid,'\n');
end 
```

（结果相同，但不取决于列数）。

# android - 是否可以通过隐式意图控制另一个应用程序的方向？

> ID：14214156
> 
> 赞同：0
> 
> 时间：2013-01-08T11:40:20.900
> 
> 标签：android, screen-orientation, external-application

在我的应用程序中，我必须在 Youtube 中显示一个视频。当用户按下按钮时，我通过以下隐式意图启动此视频，并在 Youtube 中传递视频的 url。

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(getString(R.string.video_url)))); 
```

这将启动另一个应用程序，例如 Youtube 应用程序。

我的疑问是： ***是否可以让 youtube 应用仅以横向或纵向播放视频？***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:44:07.527

是的，在 android 清单上添加权限

# javascript - 为什么 jshint 抱怨表达式中的换行符？

> ID：14214160
> 
> 赞同：18
> 
> 时间：2013-01-08T11:40:29.537
> 
> 标签：javascript, jshint

当将以下代码传递给 jshint 时，它认为 if 条件中的换行符不好，说“Bad line breaks before '&&'”。

```
if (1 == 1 
        && true) {
    console.log("hello world");
} 
```

但是，在 '&&' 之后有换行符是可以的。

```
if (1 == 1 && 
        true) {
    console.log("hello world");
} 
```

为什么 jshint 认为前者是错误的，后者是正确的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-08T12:13:00.363

根据[GitHub 上的讨论](https://github.com/jshint/jshint/issues/60#issuecomment-806302)：

> 这可能会导致分号插入和旧的 javascript 解析器中断等问题。请检查各种浏览器。

~~[可以使用 禁用此检查`laxbreak:true`](http://jshint.com/docs/options/#laxbreak)~~。

该`laxbreak`选项即将弃用，但我不确定默认的 jshint 行为是否会改变。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T11:44:56.150

JSHint 的创建者可能不喜欢这种包装，而是更喜欢`&&`第一行中的，这似乎更常见：

> 这个约定背后的主要理由是操作员清楚地表明该行是前一行的延续。对于换行之前的操作员，这很难发现。

实际上有一个关于你在 Github 上问的问题：[https ://github.com/jshint/jshint/issues/557](https://github.com/jshint/jshint/issues/557)

# jquery - JQuery Mobile - listview 弹出图像 -> 不以第一次点击为中心

> ID：14214163
> 
> 赞同：1
> 
> 时间：2013-01-08T11:40:45.690
> 
> 标签：jquery, mobile, dynamic, popup, position

我正在尝试通过单击预览缩略图从列表视图加载大尺寸图像..

灯箱图像应居中。好久不见好。。

现在我尝试通过单击相应的列表行来动态加载大图像。

理论上没有问题 - 我可以动态生成完整的弹出代码或将带有 jquery 的 img src 注入现有的弹出代码。

但是现在，第一次单击时图像大小无法正确重新调整。弹出框以零大小为中心，并在加载图像内容后向右/底部展开。

如果我打开弹出窗口两次，它将正确定位！（也许是缓存问题？）。

我尝试动态预加载大尺寸图像和其他一些调整，但没有成功。

带有动态图像源的popup调用的简单jqm代码：

```
 $('#thumb').live('click', function() {
    var imgbig = "...";
    $("<img/>").attr("src",imgbig); // Even preloading not working
    $("#imgbig").attr("src",imgbig); // Img Tag in existing popup tag
    $("#imgPop").popup("open");
 }); 
```

我希望你们中的任何一个jqm专家都可以解决这个问题。谢谢你的每一个提示！

我做了一个 Fiddle 给你看一个活生生的例子： [Dynamic image not centered on first click](http://jsfiddle.net/pXGkC/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T00:33:43.307

图像正在异步加载。恕我直言，这就是导致您的问题的原因。`setTimeout`可以帮助你。

但是，首先，由于您以编程方式打开弹出窗口，因此您应该更改链接（按钮）：

*   沟渠`data-rel="popup"`
*   放`href="#"`

所以它看起来像：

```
<a href="#" id="thumb">Open image!</a> 
```

其次更改点击处理程序：

```
$('#thumb').live('click', function() {
    var imgbig = "http://www.csunas.org/uploads/beautifull-grand-canyon.jpg";
    $("#imgbig").attr("src", imgbig);
    setTimeout(function(){
        $("#imgPop").popup("open");
    }, 100); 
    return false;
}); 
```

我已经更新了你的[jsFiddle](http://jsfiddle.net/pXGkC/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:11:19.400

谢谢彼得，

我现在这样做：

```
var img = new Image();
$(img).bind('load', function(e) {
    $("#imgbig").attr("src",imgbig);
    $.mobile.hidePageLoadingMsg(); // Hide spinner
    $("#imgPop").popup("open");
});
img.src = imgbig;
$.mobile.showPageLoadingMsg(); // Show spinner until image is loaded 
```

现在将在启动`popup.open`中间加载方法之前加载图像。

# jquery - 将项目添加到jQuery中的列表

> ID：14214167
> 
> 赞同：1
> 
> 时间：2013-01-08T11:40:58.110
> 
> 标签：jquery, html, drop-down-menu, asp-classic

我在 jQuery 中将项目添加到列表时遇到了麻烦，这是我遵循的语法。两者都不起作用。

```
$("myList")[0].options.add(new Option("ListText", value)); //does not work

  $("myList").append($('<option>', {
                 text: "ListText",
                 value: value
    })); //does not work

 $("myList").append(new Option("ListText", value)); //does not work. 
```

这是我的代码的外观

```
<select id="myList" class="DropDownList Test" name="List">                                           
    <option value="selectid" selected="selected">--Please Select--</option> 
    <option value="test1">a</option> 
    <option value="test2">b</option> 
    <option value="test3">c</option>               
</select> 
```

让成像我做这样的事情，如果我也这样做它失败了。

```
function updateTheList(ListID, value, position) {

        switch (position) {
             case '1':
                 $(ListID).append(new Option("Text", value));
                break; 
        } //what is wrong with this syntax

    }

if ($(Name+ "-ListID").is(':visible')) {
            updateTheList($(Name+ "-ListID"), value, position);
        } // it does not work 
```

请告诉我正确的方法。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T11:43:22.210

您缺少`#`jquery 选择器上的哈希值。用这个

```
$("#myList").append($('<option>', {
             text: "ListText",
             value: value
})); 
```

要在特定位置插入，请使用它。您在上面做错的主要事情是将 Jquery 对象传递给函数，然后将其包装在另一个 jquery 对象中。

```
function updateTheList(listId, text, value, position) {

    $(listId + ' option:eq(' + position + ')')
       .after('<option value=\"' + value + '\">' + text + '</option>');
}

if ($('#SomeListId').is(':visible')) {
    updateTheList('#SomeListId', 'Some text', 'Some value', 2);
} 
```

还要尝试坚持命名约定。方法和属性使用 camelCase，对象使用 PascalCase。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-08T11:43:39.937

你的选择器是错误的。应该是`$("#myList")`通过ID选择元素。

您可以阅读更多关于它的[jQuery 文档](http://api.jquery.com/id-selector/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T12:01:19.600

2件事-

1.  您错过了`#`使用 ID 进行选择的机会。
2.  尝试使用`<option />`，而不是`<option>`。

    $('#mySelect').append($("", { value: key, text: value }));

这应该有效。

# java - SQLite 管理器，添加到 FireFox

> ID：14214168
> 
> 赞同：0
> 
> 时间：2013-01-08T11:41:06.517
> 
> 标签：java, sqlitemanager

我是数据库新手，我需要将它用于我正在从事的项目，我有以下问题。

如果我们使用 SQLite manager 在 java 上创建一个数据库，然后生成一个完整程序的 jar 文件。要安装这个项目，我们必须始终为将要安装该程序的每台计算机安装用于 FireFox 的 SQLite Manager 插件。尽管能够在我的 GUI 程序中的数据库中添加和删除内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:52:52.883

不，如果您的程序包含操作数据库所需的所有功能，则无需包含额外的工具。在某些情况下，当最终用户不能直接访问数据库时会更好，以避免各种数据损坏问题。

话虽如此，在您的解决方案旁边提供一个通用工具可能会很好，SQLite Manager 将是一个很好的选择。查看[此 SQLite 管理工具列表以](http://www.sqlite.org/cvstrac/wiki?p=ManagementTools)了解其他可能的选择。

作为旁注，有一些用 Java 编写的嵌入式数据库引擎，可能比 SQLIte 更容易/更自然地集成到 Java 程序中 - 此类产品的示例是[Apache Derby](http://db.apache.org/derby/)和[H2](http://www.h2database.com/html/main.html)

# java - GWT SplitLayoutPanel 块移动

> ID：14214170
> 
> 赞同：0
> 
> 时间：2013-01-08T11:41:13.297
> 
> 标签：java, gwt

我创建了一个SplitLayoutPanel，当我按下一个按钮时我需要阻止移动。怎么办？

```
SplitLayoutPanel splitPanel = new SplitLayoutPanel(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:24:40.000

您没有直接的 api 来处理这个问题。您应该能够破解 SplitLayoutPanel 来做到这一点。

第 1 步 - 将 SplitLayoutPanel 复制到您的代码库中，但确保它具有与 gwt 中相同的包。

第 2 步 - 添加布尔标志和相关 API 以跟踪拖动的禁用。

```
boolean dragEnabled;
setDragEnabled(boolean dragEnabled)
{
  this.dragEnabled=dragEnabled;
} 
```

第 3 步 - SplitLayoutPanel 有一个“Splitter”内部类。在 onBrowserEvent 代码中做这样的事情

```
onBrowserEvent(){
 if(dragEnabled){
   Do the normal thing. Copy the existing code.
 }else{
   Do nothing!!!
 }
} 
```

# ruby-on-rails - 在这种情况下，我该如何制作 link_to？

> ID：14214171
> 
> 赞同：0
> 
> 时间：2013-01-08T11:41:26.950
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想要链接到

`http://example.com/shop/:shop_name`

所以应该是这样的。

```
<%= link_to "Shop", req.host + "/shop/"+ @shop.shop_name , :class => 'btn' %> 
```

我不想在这里使用`something_path`或`something_url`。

我只想从**当前主机**和**变量**创建 url 链接。
我怎样才能？

更新：

```
 <%= link_to "Shop", request.host + /shop/ +@shop.shop_name , :class => 'btn' %> 
```

这让我

`http://www.example.com/shop/www.example.com/shop/walmart`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:50:42.490

尝试，

```
<%= link_to "Shop", "/shop/"+ @shop.shop_name , :class => 'btn' %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:05:57.647

为什么不想使用 url 助手？手动操作很容易出错。

简单地说`routes.rb`

```
get "shop/:name", to: "shops#show", as: "shop_name" 
```

然后你可以在你的模板中使用它：

```
<%= link_to "Shop", shop_name_path(@shop.shop_name), :class => 'btn' %> 
```

在控制器的`show`操作中，`shops`只需获取`name`参数：

```
shop_name = params[:name] 
```

# dynamics-ax-2012 - 在 contoso 虚拟机上开发工作区的权利不足

> ID：14214172
> 
> 赞同：0
> 
> 时间：2013-01-08T11:41:32.643
> 
> 标签：dynamics-ax-2012

我正在使用从 Microsoft 的 PartnerSource 下载的虚拟机。

在过去的几个月里，我一直在成功地开发它，但是现在当我尝试打开开发工作区时，我收到了“权限不足”的消息。

有什么需要更新的（它仅用于开发插件）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:09:31.167

演示许可证很可能已于 2012 年 12 月 31 日到期。

转到您下载虚拟机​​应用程序的 PartnerSource，页面底部附近应该是演示虚拟机许可证的下载。新的许可证说它将于 2013 年 12 月 31 日到期。

# javascript - 主干源代码中的 Javascript 语法

> ID：14214176
> 
> 赞同：0
> 
> 时间：2013-01-08T11:41:51.970
> 
> 标签：javascript, backbone.js

这段代码有什么作用？

```
g = "undefined" !== typeof exports ? exports : k.Backbone = {}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T11:43:29.433

它是以下的简写：

```
if("undefined" !== typeof exports)
    g = exports;
}else{
    g = k.Backbone = {};
} 
```

被`:?`称为[三元运算符](http://en.wikipedia.org/wiki/%3F%3a)

如果我这样写，也许它更具可读性：

```
g = ("undefined" !== typeof exports) // If
    ? exports                        // Then
    : k.Backbone = {};               // Else 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T11:44:27.610

它将 Backbone 定义为 CommonJS 模块，因此可以在 Node.js 等 CommonJS 兼容环境中加载。

您正在查看缩小的源代码。这是未缩小的[样子](http://backbonejs.org/docs/backbone.html)：

```
var Backbone;
if (typeof exports !== 'undefined') {
  Backbone = exports;
} else {
  Backbone = root.Backbone = {};
} 
```

该变量`exports`是 CommonJS 模块定义的返回对象。在 CommonJS 环境中，`Backbone`变量设置为该值，因此`Backbone`从模块中导出。

If `exports` is undefined, it is assumed that the code is in the browser environment, and `Backbone` should be exported a property on the `root` object, which refers to `window`, the browser´s global scope.

# java - 从 Eclipse 运行时的 Android NoClassDefFoundError

> ID：14214177
> 
> 赞同：-1
> 
> 时间：2013-01-08T11:41:52.833
> 
> 标签：java, android, maven, noclassdeffounderror

所以我有一个以前在 Eclipse 中完美运行的应用程序。

由于我已转换为 Maven，因此`NoClassDefFoundError`当我尝试启动特定活动时（`SliderMenuActivity`）。

奇怪的是，应用程序将启动并加载`StartActivity`同一个包的主要活动（）。请注意，这两项活动都包含在`AndroidManifest.xml`

似乎有问题的代码是：

```
Intent intSliderActivity = new Intent(StartActivity.this, SliderMenuActivity.class); 
```

只是想知道`src`文件夹的更改与此有关吗？

我还更改了源文件夹的外观`src/main/java/com/conor/etc`并更新了构建路径。

关于如何解决的任何想法？

作为参考，这里是堆栈跟踪：

```
E/AndroidRuntime(25063): FATAL EXCEPTION: main
E/AndroidRuntime(25063): java.lang.NoClassDefFoundError: com.my_app.android.app.SliderMenuActivity
at com.my_app.android.app.StartActivity$6.my_appApiCallback(StartActivity.java:261)
at com.my_app.android.app.my_app_user_api.my_appApiTask.onPostExecute(my_appApiTask.java:129)
at com.my_app.android.app.my_app_user_api.my_appApiTask.onPostExecute(my_appApiTask.java:1)
at android.os.AsyncTask.finish(AsyncTask.java:631)
at android.os.AsyncTask.access$600(AsyncTask.java:177)
at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:5039)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:11:31.253

我认为你没有建立成功的 LeftMenuSide 库。请尝试重新构建

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:52:08.563

在清单文件中声明你的类，包名如

```
<activity android:name="com.example.SliderMenuActivity"> 
```

# php - 使用 php 中的 curl 从 FTP 下载文件

> ID：14214181
> 
> 赞同：5
> 
> 时间：2013-01-08T11:42:16.577
> 
> 标签：php, curl, ftp

我正在制作一个 php 脚本，旨在在 CLI 中运行，它将帮助我在 ftp 服务器上下载文件。我要告诉你到底哪里出了问题，但在我解释你之前的上下文是什么。

我在一个共享老游戏图像文件的网站上注册。当我们想在这个站点上下载一个文件时，我们必须登录才能检索下载链接。然后，给出的链接是一个 FTP 下载链接。

我使用 Wireshark 捕获了 FTP 连接数据包，并将其与失败的脚本化 FTP 传输进行比较。

所以，.. FTP 服务器接受匿名连接。当我使用浏览器下载文件时，文件的链接是这样的；

**[ftp://website.url/somefolder/1/foo/bar/SOMEOLDIE.rar](ftp://website.url/somefolder/1/foo/bar/SOMEOLDIE.rar)**

现在，如果我使用 FileZilla 连接到这个 FTP，并通过匿名登录获得访问权限，我会看到一些文件夹，但是当我转到我的 iso 必须位于的“somefolder”时，该文件夹是空的。

看看这张图片，然后我会给你看代码。 ![在此处输入图像描述](../Images/a92a4d817311e0c46c0f05faae29732c.png) 现在是代码；

```
function download_file($url){
    echo "Downloading: ".$url;
    $ch = curl_init($url);
    $fp = fopen("data/output.rar", "w");
    curl_setopt($ch, CURLOPT_HEADER, 1);
    curl_setopt($curl, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)"); 
    curl_setopt($ch, CURLOPT_COOKIEFILE, 'data/cookies.txt');
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    //curl_setopt($ch, CURLOPT_FAILONERROR, 1);
    //curl_setopt($ch, CURLOPT_FTPLISTONLY, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1);
    curl_setopt($ch, CURLOPT_USERPWD, "anonymous:mozilla@example.com");
    curl_setopt($ch, CURLOPT_FILE, $fp);
    curl_exec($ch);
    //var_dump(curl_getinfo($ch));
    //echo curl_error($ch);
    curl_close($ch);
    fclose($fp);
} 
```

任何人都可以帮助我吗？我不熟悉 curl，我不知道如何告诉 curl 准确发送我想要的命令。

谢谢 ！

编辑：看看这个，它完全一样的问题；[需要帮助从 FTP 使用 PHP 和 Curl 下载文件](https://stackoverflow.com/questions/10373522/need-help-downloading-a-file-using-php-and-curl-from-an-ftp?rq=1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:33:08.780

好的，伙计们，我明白了：）

我使用 ftp_* 函数代替 curl，因为 curl 试图更改目录，但在这个 ftp 服务器上不允许这样做，所以我使用的代码是；

```
$local_file = 'output.rar';
$server_file = '/somedir/1/bar/foo/somearchive.rar';
$ftp_user_name='anonymous';
$ftp_user_pass='mozilla@example.com';
$ftp_server='server.host';
// set up basic connection
$conn_id = ftp_connect($ftp_server);

// login with username and password
$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);

/* uncomment if you need to change directories
if (ftp_chdir($conn_id, "<directory>")) {
    echo "Current directory is now: " . ftp_pwd($conn_id) . "\n";
} else { 
    echo "Couldn't change directory\n";
}
*/

// try to download $server_file and save to $local_file
if (ftp_get($conn_id, $local_file, $server_file, FTP_BINARY)) {
    echo "Successfully written to $local_file\n";
} else {
    echo "There was a problem\n";
}

// close the connection
ftp_close($conn_id); 
```

有用 ！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:46:38.517

您需要向 CURLOPT_URL 提供文件的完整 URL。此外，如果您想下载文件，您可能希望将其保存在某处。

工作示例：

```
$curl = curl_init();
$file = fopen("ls-lR.gz", 'w');
curl_setopt($curl, CURLOPT_URL, "ftp://ftp.sunet.se/ls-lR.gz"); #input
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_FILE, $file); #output
curl_setopt($curl, CURLOPT_USERPWD, "$_FTP[username]:$_FTP[password]");
curl_exec($curl);
curl_close($curl);
fclose($file); 
```

# c# - webservice错误：响应消息的内容类型text/html与绑定的内容类型不匹配

> ID：14214184
> 
> 赞同：2
> 
> 时间：2013-01-08T11:42:26.373
> 
> 标签：c#, web-services, service-reference

我创建了 C# 项目并添加了一个“Web 服务”作为“服务参考”。我的服务几乎总是运行良好，但有时会出现此错误：

> 响应消息的内容类型 text/html 与绑定的内容类型 (text/xml; charset=utf-8) 不匹配。如果使用自定义编码器，请确保正确实现 IsContentTypeSupported 方法。响应的前 13 个字节是： `'<HTML></HTML>'`.

我用谷歌搜索了这个错误，但我没有找到任何与此相关的内容我的所有搜索结果都与 WCF 有关

这个错误最重要的一点是“响应是：`'<HTML></HTML>'`”客户端期望“xml响应”，但服务器响应是空的“html响应”

你能建议什么可能是错的吗？

[编辑]我的代码很简单：

```
webserv.Insert_ImageSoapClient myservice = new webserv.Insert_ImageSoapClient();
string response = myservice.insert_x(station_id_x, time_t); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:56:05.870

听起来 Web 服务出错并返回 HTML 页面。

# asp.net - asp:Button having position:fixed/absolute is not clickable on firefox nor google chrome

> ID：14214186
> 
> 赞同：1
> 
> 时间：2013-01-08T11:42:35.927
> 
> 标签：asp.net, css, css-position

I am writing code in `ASP.NET`.

I have a button that is clickable on IE but not on FF nor Google Chrome.

I've discovered that the reason lays on the fact that its `position: absoulute` **OR** `position:fixed` Here's the code:

```
<div style="padding-top:50px";>
            <div id="divInfoBox" runat="server" style="padding-top:5px; height:250px;"> 
                <div style="position:fixed; padding-left:-5px; ">
                    <asp:ImageButton CssClass="attachmentImageButton" ID="btnAttachment" runat="server" Visible="false"
                        ImageUrl="~/Style/images/attachment.png" onclick="btnAttachment_Click" />
                </div>                    
            </div>
        </div> 
```

How to make it be clickable on all browsers?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:42:35.927

My guess is that the first two `div` elements are on top of the `ImageButton` and therefore it is not clickable. I have no clue why is that (be glad to find out the exact reason). All I know is that the solution is adding the following:

```
z-index:5 
```

And that should do the trick.

Good luck

p.s.: if 5 isn't enough, try adding higher value.

# objective-c - Hiding status bar: effect on bounds

> ID：14214187
> 
> 赞同：1
> 
> 时间：2013-01-08T11:42:35.987
> 
> 标签：objective-c, ios, uiscrollview

I'm working through the Big Nerd Ranch's iOS Programming book (3rd edition), and there's one particular example that involves a full screen image embedded in a full screen UIScrollView. Both are created as follows:

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
CGRect screenRect=[[self window] bounds];
UIScrollView *scrollView=[[UIScrollView alloc] initWithFrame:screenRect];
view=[[HypnosisView alloc] initWithFrame:screenRect]; 
```

We're asked to make the status bar disappear using the following line:

```
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationFade]; 
```

Everything works fine, but what I don't understand is this: why are the window's bounds the same regardless of whether or not the status bar is there? They are always (0,0,320,568), but I would have expected the height to shrink if I hid the status bar.

Thanks for reading.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:48:24.057

`[UIScreen mainScreen] bounds]`始终返回设备的**框架，**无论您的应用显示或隐藏状态栏的天气如何，设备的框架始终相同。

# wpf - Set WPF CheckBox in a ComboBox to Checked

> ID：14214192
> 
> 赞同：0
> 
> 时间：2013-01-08T11:42:54.063
> 
> 标签：wpf, data-binding, wpf-controls

I have a custom WPF control - essentially a combo-box with check-boxes. The combo-boxes are successfully bound to a list of available items.

This control is to represent a field on a form. It is possible for the form to be completed already, in which case, the control must be rendered with the selected items - i.e. any items previously selected must be rendered as a checked CheckBox; it is here I'm running into trouble.

My first thought was to simply bind the IsChecked property - I don't think this can be done as the list of currently-selected-items is different from the list of available items which the ComboBox is bound to.

Basically, how do I gain access to the CheckBox object to set the Checked property to true? I've looked into this extensively and I can't fathom this out.

I'm using the ItemContainerGenerator approach - so when the user clicks on the drop-down, it is intended that a handler will iterate through the CheckBoxes and set the relevant boxes to checked.

Here's the XAML:

```
<ComboBox x:Name="FieldOptions" 
            ItemsSource="{Binding}" 
            HorizontalAlignment="Stretch" 
            Height="30"
            KeyDown="FieldOptions_OnKeyDown">
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <CheckBox Name="checkbox"
                      Content="{Binding Path=Text}" 
                      Uid="{Binding Path=ID}"
                      FontStyle="Normal"
                      Foreground="Black"
                      Checked="CheckBox_OnChecked" />
            </DataTemplate>
   </ComboBox.ItemTemplate> 
```

Any thoughts would be much appreciated.

# d3.js - d3js highlighting connected nodes

> ID：14214195
> 
> 赞同：0
> 
> 时间：2013-01-08T11:43:02.670
> 
> 标签：d3.js

I want to list all the nodes that are connected to a node that I rollover with a mouse in a text field, been trying to use the filter function and it sort of does what I need since it affects the stroke width of the linked objects but I'd like to also output the node names too.

```
 .on("mouseover", function(da) {
  link.filter(function(db) { return da.group == db.groupColor; })
  .transition()
  .style("stroke-width", 8);  

 selectedText.text("Currently Selected: "+da.name+"is connecting to sensors: "+link.filter(function(db) { return da.group == db.groupColor; }) ); 
```

right now I am getting an output of "bike brian is connected to sensors: [object svgline element]"

but what I want is to be able to return all the names of the other nodes... does that make sense? so that it might say "bike brian is connected to sensors: accelerometer, gps, etc..."

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:07:51.167

假设您的链接使用标准网络语法，您可以执行以下操作：

```
var filteredLinks = link.filter(function(db) { return da.group == db.groupColor; });
var sensorList = '';
for (x in filteredLinks) {
    if (filteredLinks[x]) {
    filteredLinks[x].source.id == originalSensorID ? sensorList += filteredLinks[x].target.id : sensorList += filteredLinks[x].source.id
    }
} 
```

您可能需要在 sensorList 变量中添加逗号和空格。这有点麻烦，但我无法使 .each() 方法与过滤器一起使用，所以这是我能想到的最好的方法。

# css - CSS relative positioned list elements. Reset withing media query for mobile

> ID：14214200
> 
> 赞同：0
> 
> 时间：2013-01-08T11:43:11.157
> 
> 标签：css, imagemap, css-position

I have an imagemap on my website which unfortunately is too big for the mobile version.

As such I have decided to use css media queries such that if the screen is smaller than the map, it simply displays a list instead.

The image map mouseover overlay works with a list whereby the overlays are positioned relatively.

In my media query I thus want to reset the relative positioning so the list items simply appear one below each other like a normal list.

How would I go about this? At the moment the list items simply appear scattered around the page where they would appear if they still had their respective image backgrounds.

THanks

# java - 在 Java Scanner 中拆分数据文件

> ID：14214206
> 
> 赞同：2
> 
> 时间：2013-01-08T11:43:26.043
> 
> 标签：java, design-patterns, java.util.scanner, delimiter

我有以下要拆分的数据。

```
(1,167,2,'LT2A',45,'Weekly','1,2,3,4,5,6,7,8,9,10,11,12,13'), 
```

获取每个值：

> 1
> 167
> 2
> 'LT2A'
> 45
> '每周'
> '1,2,3,4,5,6,7,8,9,10,11,12,13'

我正在使用 Scanner 类来执行此操作，并使用**,**作为分隔符。但是由于最后一个字符串，我遇到了问题：`('1,2,3,4,5,6,7,8,9,10,11,12,13')`.

因此，我想就如何拆分这些数据提出一些建议。
我也尝试使用 ,' 作为分隔符，但字符串包含不带 '' 的数据。

这个问题非常适合我的需求，但如果有人可以就如何拆分这些数据给我建议，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:00:35.097

您可以使用简单的逻辑，例如：

```
 String str="1,167,2,'LT2A',45,'Weekly','1,2,3,4,5,6,7,8,9,10,11,12,13'";
    Scanner s = new Scanner(str);
    s.useDelimiter(",");
    while(s.hasNext())
    {
        String element = s.next();
        if(element.startsWith("'") && ! element.endsWith("'"))
        {
            while(s.hasNext())
            {
                element += "," + s.next();
                if(element.endsWith("'"))
                    break;
            }
        }
        System.out.println(element);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:59:36.253

您可以为您的情况做的最好的事情是首先使用“ `'`”分割它，然后使用“ `"`”分隔符分割它。像下面的代码：

```
String cc = "(1,167,2,'LT2A',45,'Weekly','1,2,3,4,5,6,7,8,9,10,11,12,13'),";

Scanner s = new Scanner(cc);
  try
  {
     while (s.hasNextLine())
     {
        String[] tokens = s.nextLine().split("'"); //split it using ' delimiter 
        for (int i = 0; i < tokens.length; i++)
        {
           String[] ss = tokens[i].split(","); // split it using " delimiter 
           // do the processing for tokens here
        }
     }
  }
  finally
  {
     s.close();
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T12:10:33.927

尝试

```
 String s = "1,167,2,'LT2A',45,'Weekly','1,2,3,4,5,6,7,8,9,10,11,12,13'";
    Scanner sc = new Scanner(s);
    sc.useDelimiter(",");
    while (sc.hasNext()) {
        String n = sc.next();
        if (n.startsWith("'") && !n.endsWith("'")) {
            n = n + sc.findInLine(".+?'");
        }
        System.out.println(n);
    }
} 
```

# php - 铬的问题

> ID：14214210
> 
> 赞同：1
> 
> 时间：2013-01-08T11:43:32.100
> 
> 标签：php, google-chrome

我有一个可以在 Firefox 上完美运行的项目。当我在 chrome 上运行它时，对于一些用户来说，它说重定向太多了？

任何人都可以提出可能的原因/原因，因为这种特殊的场景只发生在少数用户身上，而且他们和其他人一样是普通用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:47:00.167

不同的浏览器对 url/headers 进行不同的编码/解码。他们不断地请求错误的 URI，从而永远被重定向。所以“看起来安全的编码方案”在 Chrome 中失败了。

# jquery - 受 jQuery 影响

> ID：14214211
> 
> 赞同：0
> 
> 时间：2013-01-08T11:43:37.063
> 
> 标签：jquery, asp.net, webforms, asp.net-webcontrol

我在 ASP.NET 4.5 Web 表单应用程序中有一个 asp:Menu 控件。

当我添加对 jquery-1.7.1.js 的引用时，下拉菜单项变得混乱。它们出现在页面的远角，是白色背景上的白色文本。结果在 IE10 和 Chrome 中是一样的。

（Menu 控件的 RenderingMode 设置为 Table，因为 List 在 ASP.NET 4 及更高版本中不起作用。）

可能会发生什么，我该如何解决这个问题？谢谢

# android - 发现具有软件导航栏的 Android 设备的真实屏幕尺寸（以像素为单位）

> ID：14214222
> 
> 赞同：4
> 
> 时间：2013-01-08T11:44:12.743
> 
> 标签：android, screen

我需要能够事先知道不包括软件导航栏的屏幕的确切大小。我正在使用 andengine 来创建游戏。
我们希望全面支持新的 Nexus 系列（4、7 和 10）

根据许多人指出的[this page ，软件导航栏的大小应为48dp。](http://developer.android.com/design/style/metrics-grids.html)
然后使用[这个](https://android.stackexchange.com/questions/24922/why-can-the-nexus-7-display-so-much-more-content-on-screen-than-the-galaxy-nexus)优秀的 stackexchange 帖子上的信息，我收集了计算软件导航栏大小的公式应该是：`px = dp * (ppi / 160)`

根据[官方网站](http://www.google.com/nexus/7/specs/)，Nexus 7 的屏幕为 216 ppi。
软件导航栏应该是：`48 * (216 / 160) = 64.8 ≈ 64px`
我们有一个 Nexus 7 平板电脑，软件导航栏是 75px。

这意味着 ppi 值`(75 * 160) / 48 = 250`
或
dp 大小实际上是`(75 / 216) * 160 = 55.555... ≈ 55dp`

那么它是哪一个？

此外，4.2 Android SDK 带有一些预制的 AVD。其中包括 Nexus 7。据报道，软件导航栏的大小为 64 像素...

我不是在问这些设备的大小，我可以用谷歌（或搜索 stackexchange）来查找这些数字。不购买设备就无法确定设备的屏幕尺寸吗？

**[编辑]**
我想我应该补充一点，我正在使用以下方法获取屏幕尺寸：

```
WindowManager windowManager = (WindowManager) getSystemService(WINDOW_SERVICE);
Display display = windowManager.getDefaultDisplay();
DisplayMetrics screenSize = new DisplayMetrics();
display.getMetrics(screenSize);
CAMERA_WIDTH = screenSize.widthPixels;
CAMERA_HEIGHT = screenSize.heightPixels; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-31T11:35:35.753

以后更好，然后永远。我正在寻找这样的东西，第二个链接是这个问题，但首先是 [http://www.emirweb.com/ScreenDeviceStatistics.php](http://www.emirweb.com/ScreenDeviceStatistics.php)

例如

连结 4

1280 x 768 px (640 x 384 dp) / xhdpi / 普通屏幕 纵向细节

导航栏高度：96 px (48 dp) 标题栏高度：96 px (48 dp) 状态栏高度：50 px (25 dp) 内容视图：1038 x 768 px (519 x 384 dp) 横向详细信息

导航栏宽度：84 px (42 dp) 标题栏高度：80 px (40 dp) 状态栏高度：50 px (25 dp) 内容视图：638 x 1196 px (319 x 598 dp)

我相信它会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T12:36:42.380

软件导航栏高度为 48dp。

96px @ xhdpi **/** 144px @ xxhdpi **/** 我不认为你会找到它@hdpi phone 但它会是 72px。

* * *

通知栏高度似乎有 25dp (Android 4+)。

38px @ hdpi **/** 50px @ xhdpi **/** 75px @ xxhdpi

* * *

它为您提供： **1134px** @ xhdpi (@1280px 高度) **/** * *1701px* * @ xxhdpi (@1920px 高度) **/** 可用空间。

# liferay-6 - 在 Liferay 中创建组织站点的权限

> ID：14214224
> 
> 赞同：1
> 
> 时间：2013-01-08T11:44:15.893
> 
> 标签：liferay-6

我已经定义了一个自定义角色并将其分配给 UserX。我希望 UserX 创建一个 Organization ，然后创建该组织的站点。我在定义自定义角色时检查了“用户和组织”部分下的所有权限。但是我无法创建组织的网站。

当我在组织信息的组织站点部分检查创建站点框时，我得到

```
 Public Pages
    This organization does not have any public pages.

    Private Pages
    This organization does not have any private pages. 
```

我希望它提供一个选择框来选择社区站点、内联网站点或任何其他自定义站点模板。

我应该在我的自定义角色中包含哪些权限，以使该选择框选择社区站点、Intranet 站点或任何其他自定义站点模板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T09:34:57.283

转到控制面板-> 站点。它显示站点列表。选择您想要的站点是否存在，如果不存在则通过单击添加站点按钮创建站点。然后从站点列表中单击“操作”按钮并选择“管理页面”选项。选择私人页面选项卡并选择添加页面按钮以将私人页面添加到该站点。

享受 ！！~布旺

# db2 - DB2 中的字符串函数是否适用于有限的 ASCII 字符集？

> ID：14214229
> 
> 赞同：0
> 
> 时间：2013-01-08T11:44:40.390
> 
> 标签：db2, string-formatting

在一个程序中，我使用了函数 RPAD() 来格式化来自 DB2 db 的数据。在一种情况下，该值是 Ãmber。以下功能：

```
RPAD('Ãmber',10,' ') 
```

仅给出 9 个字符。'Ã' 的 ASCII 值是 195。我无法理解这种行为的原因。有人可以分享他们的经验。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:49:37.400

默认情况下，DB2 将 Ã 的长度视为 2，可能是因为它计算的是字节而不是字符。

```
values(LENGTH('Ãmber'))
 6 
```

您可以为[LENGTH](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/index.jsp?topic=/com.ibm.db2.luw.sql.ref.doc/doc/r0000818.html)和许多其他功能覆盖它

```
values(LENGTH('Ãmber', CODEUNITS16))
 5 
```

不幸的是，[RPAD](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/index.jsp?topic=/com.ibm.db2.luw.sql.ref.doc/doc/r0053530.html)不采用这样的参数。我猜这可能是因为添加了该功能是为了与 Oracle 兼容，而不是基于其自身的优点。

您可以将自己的 RPAD 函数编写为存储过程或 UDF，或者如果这是您唯一需要它的地方，则只需使用 CASE 语句来处理它。

# android - eclipse与android安全可卸载软件无关

> ID：14214237
> 
> 赞同：0
> 
> 时间：2013-01-08T11:45:12.390
> 
> 标签：android, eclipse

我有一台相当旧的计算机，为了加快和减少使用的 eclipse ram，我将从 eclipse 中删除所有不服务于 Android 应用程序开发的软件和 Pugin 现在我已经安装了

*   Equinox p2（核心功能，CPR 管理，更多...）
*   Eclipse csv（客户端，资源）
*   Eclipse 帮助（开发资源、系统）
*   Eclipse PDE 插件开发人员资源
*   日食 RCP
*   EMF（代码、通用、UI）
*   市场客户
*   用于opengl es的跟踪器

当然，还有 Eclipse 和 Android 相关的软件。我可以安全地删除其中哪些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:17:55.617

您可以删除 EMF（Eclipse Modeling Framework Project (EMF)），因为它是一个建模实体框架，对于 android 开发不是必需的。

你可以在这里找到更多信息：[EMF](http://www.eclipse.org/modeling/emf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:55:50.070

不能确切地说，不幸的是，如果 android 插件依赖于其他插件的一个元素。它可能需要下载很多东西。即使您不会使用 ADT 插件中的这些东西。

也就是说，有几种方法可以减少您的 Eclipse 安装。您可以尝试只用最少的东西安装一个准系统的 Eclipse 包。然后安装 ADT 插件。它将负责安装所需的插件。

或者这是冒险的方式。删除你想要的一切。我不太确定，但我很确定 eclipse 会告诉你删除依赖于你想要删除的东西的每个插件。无论如何，这种方法并不完美，因为您可能会删除需要且与 eclipse 无关的内容。

请记住，在您列出的包中应该有子包，并不是所有的包都需要或安装。日食本身就是一种 BEAFY IDE

# android - 使用 Eclipse 安装 Android Adt Bundle 时出错

> ID：14214242
> 
> 赞同：1
> 
> 时间：2013-01-08T11:45:33.587
> 
> 标签：android, eclipse, adt

我有 Windows 7 64 位。我已经安装了 jdk 7。我正在尝试使用 Eclipse 安装 Android ADT 捆绑包。但是当我单击 Eclipse 应用程序安装程序时，它向我显示一条消息

加载 JNI 共享库失败

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:49:08.227

你需要：

```
64-bit Java/JDK
64-bit Eclipse
64-bit OS 
```

希望它会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:20:51.113

先安装JDK6。然后尝试安装ADT

# php - PHP 使用两个表创建树视图

> ID：14214243
> 
> 赞同：0
> 
> 时间：2013-01-08T11:45:33.170
> 
> 标签：php, mysql, arrays, treeview

**我有两个mysql表**

```
 1\. questions
  2\. answers 
```

**问题表有问题和答案表有相关的答案每个答案指向一个问题，所以它有级别**

前任

```
question 1 -> answer 1 -> question 2
           -> answer 2 -> question 3
           -> answer 3 -> question 4 -> answer 1 -> question 5
                                     -> answer 2 -> question 6
                                     -> answer 3 -> question 7
question 8 -> answer 1 -> question 9
           -> answer 2 -> question 10-> answer 1 ->question 12
                                        answer 2 ->question 13
           -> answer 3 -> question 11 
```

**我需要将问题显示为树视图**

前任

```
question 1->question2
            question3
            question4->question 5
                       question 6
                       question 7
question 8->question 9
            question 10->question 12
                         question 13
            question 11 
```

**我的问题表字段是**

```
id  qtype   qtext 
```

**我的答案表字段是**

```
id  answer  quzid   targetquz 
```

任何人都知道如何基于这两个表使用 php 创建树视图。非常感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:55:52.223

希望我没有误解这里的事情（不确定您是否有故意的问题指向回答另一个没有任何答案的问题）；但一般来说我会使用`while`循环。

`while()`
`{ first level here`
`while()`
`{ second level here`
`while()`
`{ third level here`
`....`
`}`
`}`
`}`

# jquery - 如何通过比较另一个属性来获得属性值？

> ID：14214244
> 
> 赞同：0
> 
> 时间：2013-01-08T11:45:34.210
> 
> 标签：jquery

```
<tbody>
<tr class="taskEditRow" rowid="1" level="0" taskid="-1" __template="TASKROW">
<tr class="taskEditRow" rowid="2" level="1" taskid="-2" __template="TASKROW">
<tr class="taskEditRow" rowid="3" level="2" taskid="-3" __template="TASKROW">
<tr class="taskEditRow" rowid="4" level="2" taskid="-4" __template="TASKROW">
</tbody> 
```

在这里，我想通过使用 jquery 比较任务 id 来获取 rowid

```
var x=$(".taskEditRow").attr("taskid==-1");

var y=x.attr("rowid"); 
```

就像我想要 rowid 与 taskid 的比较

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:48:31.893

```
var rowId = $('.taskEditRow[taskid="-1"]').attr("rowid"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:48:34.180

```
var x = $(".taskEditRow[taskid='-1']");
var y = x.attr("rowid"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T11:48:49.017

也许是：

```
var x=$(".taskEditRow[taskid=-1]"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T11:48:49.110

你可以做这样的事情。

```
var x = $(".taskEditRow[taskid='-1']");
var y = x.attr("rowid"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T11:54:33.133

澄清一下，因为没有一个答案在起作用。

您需要使用[属性等于选择器 ( `[attr="value"]`)](http://api.jquery.com/attribute-equals-selector/)。例如，

```
var $row  = $('.taskEditRow[taskid="-1"]');
var rowid = $row.attr("rowid"); 
```

或者，您也可以使用`.filter()`.

```
var $row  = $('.taskEditRow').filter(function(){
  return this.getAttribute("taskid") == "-1";
});
var rowid = $row.attr("rowid"); 
```

# interface - TypeScript 接口实现

> ID：14214248
> 
> 赞同：1
> 
> 时间：2013-01-08T11:45:50.810
> 
> 标签：interface, typescript

我正在使用`TypeScript`. 问题是我实现了`HTMLElement`接口。

```
export class IEElement implements HTMLElement {
   // something here
} 
```

编译器显示了许多我缺少一些属性的错误（`IEElement`声明了一个接口但没有实现它）。我已经实现了大约 5 个我需要的属性。其余的都是多余的。如何避免错误？我需要实现所有接口成员吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:48:14.873

是的，您需要实现所有非可选接口成员。

接口是一个契约，如果您有一个实现该契约的类，您承诺实现该契约中的所有内容。

HTMLElement 接口有很多要实现的——但如果你只是想添加一些行为，也许你可以从现有的实现开始......

```
interface SpecialElement extends HTMLElement {
    myCustomFunction: () => void;
}

var element = <SpecialElement>document.getElementById('example');

element.myCustomFunction = function () { }; 
```

# variables - Jenkins 插件 - 环境变量

> ID：14214249
> 
> 赞同：4
> 
> 时间：2013-01-08T11:45:54.090
> 
> 标签：variables, plugins, jenkins, environment

我正在将 Jenkins 与 Testswarm 和这个[插件](https://wiki.jenkins-ci.org/display/JENKINS/testswarm-plugin)（[分叉来源](https://github.com/gmoulin/jenkins-testswarm-plugin)）一起使用。

我想为 Testswarm 获取一个“作业名称”，其中包含 Jenkins 作业名称、内部版本号和 svn 修订号。

将 JOB_NAME 放在配置字段中没有帮助，变量不会被其值替换。

所以我修改了插件源代码以获取 Jenkins 环境变量，但我得到的只是“null”。

这是罪魁祸首代码。（在 src/main/java/com/javaclimber/jenkins/testswarmplugin/TestSwarmBuilder.java 的第 205 行）

我对此功能进行了很多研究，但没有找到**获取**变量的工作示例。

```
public boolean perform(AbstractBuild build, Launcher launcher, BuildListener listener) throws InterruptedException, IOException {
    ...
EnvVars envVars = build.getEnvironment(listener);
    ...
    envVars.get("JOB_NAME")
} 
```

我在 Java 中不自在，我被困在这一点上。请问有人知道吗？

更新：java 使用版本
java 版本 "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.5) (6b24-1.11.5-0ubuntu1~10.04.2)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T08:25:57.277

更换

```
EnvVars envVars = build.getEnvironment(listener); 
```

经过

```
EnvVars envVars = new EnvVars();
envVars = build.getEnvironment(listener); 
```

做的伎俩...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T17:36:35.883

您使用的是什么版本的 Java？根据[this](http://www.codebeach.com/2008/02/get-environment-variables-in-java.html)，要获取环境变量，需要添加以下内容：

```
String job_name = System.getenv("JOB_NAME"); 
```

你试过这个吗？

另外，我不确定配置字段是什么样的，但是您是否尝试过使用`$JOB_NAME`而不是`JOB_NAME`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-20T21:25:00.863

Jenkins 管道似乎在服务器上执行，因此原始帖子可能缺少为代理定义的变量（通过服务器的代理定义或通过代理的操作系统）。

我不知道 Jenkins 管道获取代理环境的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-17T16:30:44.533

我偶然发现了这个并搜索了一段时间的解决方案，所以对于下一个用户的答案：如果您需要环境变量，请覆盖

`public void perform(Run<?, ?> run, FilePath workspace, EnvVars env, Launcher launcher, TaskListener listener)`

代替

`public void perform(Run<?, ?> run, FilePath workspace, Launcher launcher, TaskListener listener)`

并使用`EnvVars`from 参数。（另见[https://issues.jenkins.io/browse/JENKINS-29144](https://issues.jenkins.io/browse/JENKINS-29144)）

# visual-studio-2010 - double to float typecast vs2010中的神秘而奇怪的错误

> ID：14214252
> 
> 赞同：1
> 
> 时间：2013-01-08T11:46:06.067
> 
> 标签：visual-studio-2010, casting, double

请查看从 OpenCV 2.4.2 第 425 行的文件**lkpyramid.cpp的 VS2010 工作区获取的以下数据**

```
(A12*b2 - A22*b1) * D            -0.0551553(87)159150693    double
(float)((A12*b2 - A22*b1) * D)   -0.0551553(89)         float
delta.x                          -0.0551553(89)         float

(A12*b2 - A22*b1) * D            -0.0564279(18)227904397    double
(float)((A12*b2 - A22*b1) * D)   -0.0564279(18)         float
delta.x                          -0.0564279(18)         float

(A12*b2 - A22*b1) * D            -0.0360617(69)124602773    double
(float)((A12*b2 - A22*b1) * D)   -0.0360617(67)         float
delta.x                          -0.0360617(67)         float 
```

看看数字 87->89, 18->18, 69->67 是如何转换的，但我们不知道编译器正在从 double 转换为 float 是截断还是做更多的事情。

现在的问题是从 double 转换为 float 的逻辑是什么

# objective-c - ZBAR SDK 示例中的条码解码错误

> ID：14214255
> 
> 赞同：1
> 
> 时间：2013-01-08T11:46:17.287
> 
> 标签：objective-c, ios6, zbar-sdk, zbar

我正在将 ZBarSDK 与 iPhone 项目一起使用。

我使用 ZBar 作为嵌入式阅读器。基本上在 Interface Builder 中连接一个 UIView。将类更改为`ZBarReaderView`并实现委托方法`-(void)readerView: (ZBarReaderView*) view didReadSymbols: (ZBarSymbolSet*) syms fromImage: (UIImage*) img`。

这在大多数情况下都可以正常工作。然而，有些条码显然无法正确扫描。第一个块被解释错误。我得到类似`5008914...`下一次得到的东西`7001814...`，然后我得到正确的`4001954...`

我回到 SDK 中的“EmbedReader”示例，查看是否可以找到任何可能需要进行的调整，并发现它也产生了相同的错误。如果我查看示例“ReaderSample”，则不会发生错误，但是它使用`ZBarReaderViewController`.

然后我尝试在我的方法中将`ZBAR_CFG_X_DENSITY`and `ZBAR_CFG_Y_DENSITY`both 更改为 3 `viewWillAppear`，但这没有影响。

`ZBarReaderViewController`和的扫描机制有什么区别`ZBarReaderView`？我能做些什么来抑制错误的结果？

谢谢

这里有一些相关的代码片段。

在.h

```
@interface ScanVC:UIViewController<ZBarReaderViewDelegate>
{
    IBOutlet ZBarReaderView *readerView;
    ...
}
...
@property (nonatomic, retain) IBOutlet ZBarReaderView *readerView;
... 
```

在他们中

```
@synthesize readerView;
...
-(void) viewDidAppear: (BOOL) animated
{
    [[readerView scanner] setSymbology:0 config:ZBAR_CFG_X_DENSITY to: 3];
    [[readerView scanner] setSymbology:0 config:ZBAR_CFG_Y_DENSITY to: 3];
    [[readerView scanner] setSymbology:ZBAR_I25 config:ZBAR_CFG_ENABLE to:0];
    [readerView start];
}
...
- (void) readerView: (ZBarReaderView*) view didReadSymbols: (ZBarSymbolSet*) syms fromImage: (UIImage*) img
{
    for(ZBarSymbol *sym in syms) {
    ...
    }
    ...
}
...
-(void)viewDidLoad
{
    [readerView setDelegate: self];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:19:47.043

我注意到您正在禁用 Interleaved 2 of 5 个代码。您是否知道您将扫描哪种类型，或者您实际上会扫描除 I25 之外的所有类型？如果是这样，您可能想尝试只启用一种符号类型——例如，只启用 Code 39：

```
[[readerView scanner] setSymbology:0 config:ZBAR_CFG_ENABLE to:0];
[[readerView scanner] setSymbology:ZBAR_CODE39 config:ZBAR_CFG_ENABLE to:1]; 
```

我发现这样做可以让我得到更准确的结果（也更快）。

# c# - 具有匿名类型的 C# LINQ 构建表达式

> ID：14214256
> 
> 赞同：8
> 
> 时间：2013-01-08T11:46:16.797
> 
> 标签：c#, linq, lambda, expression

我的代码仅使用一个属性“名称”构建列表。如何修改代码，使其可以构建具有两个属性“Name”和“Test_Result”的列表我知道可以使用匿名类型来执行此操作，但是如何将它们放入动态表达式中？这是我的代码：

```
string item = "Name";
string item2 = "Test_Result";
Type studentType = typeof(Student);

ParameterExpression itemParam = Expression.Parameter(studentType, item);
MemberInfo itemProperty = studentType.GetProperty(item);

MemberExpression valueInItemField = 
    Expression.MakeMemberAccess(itemParam, itemProperty);

Expression<Func<Student, string>> selectExpression =
    Expression<Func<Student, string>>
        .Lambda<Func<Student, string>>(valueInItemField, itemParam);

IEnumerable<string> currentItemFields = 
    DeserializedStudents.Select(selectExpression.Compile()); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-08T11:50:32.117

我假设这里的“名称”和“测试结果”是灵活的，不能硬编码。

匿名类型是完全定义的常规类；关于它们的唯一有趣的事情是*编译器*提供了细节而不是你。

我建议处理这种情况的方法是使用`Tuple.Create`创建一个`IEnumerable<Tuple<string,string>>`并将它们称为`Item1`, `Item2`（来自的名称`Tuple<,>`。另一种选择是使用类似的东西`ExpandoObject`，然后使用`IDictionary<string,object>`API 或`dynamic`API 来取回值。

例如：

```
string item1 = "Name";
string item2 = "Test_Result";
Type studentType = typeof(Student);

var itemParam = Expression.Parameter(studentType, "x");
var member1 = Expression.PropertyOrField(itemParam, item1);
var member2 = Expression.PropertyOrField(itemParam, item2);
var selector = Expression.Call(typeof(Tuple), "Create",
    new[] { member1.Type, member2.Type }, member1, member2);
var lambda = Expression.Lambda<Func<Student, Tuple<string,string>>>(
    selector, itemParam);

var currentItemFields = students.Select(lambda.Compile()); 
```

* * *

`name`这是具有成员和的自定义类型的相同投影`result`：

```
class ProjectedData
{
    public string name { get; set; }
    public string result { get; set; }
}

...

string item1 = "Name";
string item2 = "Test_Result";
Type studentType = typeof(Student);

var itemParam = Expression.Parameter(studentType, "x");
var member1 = Expression.PropertyOrField(itemParam, item1);
var member2 = Expression.PropertyOrField(itemParam, item2);
var selector = Expression.MemberInit(Expression.New(typeof(ProjectedData)),
    Expression.Bind(typeof(ProjectedData).GetMember("name").Single(), member1),
    Expression.Bind(typeof(ProjectedData).GetMember("result").Single(), member2)
);
var lambda = Expression.Lambda<Func<Student, ProjectedData>>(
    selector, itemParam);

var currentItemFields = students.Select(lambda.Compile()); 
```

* * *

或者对于使用字典的方法：

```
string[] fields = {"Name", "Test_Result"};
Type studentType = typeof(Student);

var itemParam = Expression.Parameter(studentType, "x");

var addMethod = typeof(Dictionary<string, object>).GetMethod(
    "Add", new[] { typeof(string), typeof(object) });
var selector = Expression.ListInit(
        Expression.New(typeof(Dictionary<string,object>)),
        fields.Select(field => Expression.ElementInit(addMethod,
            Expression.Constant(field),
            Expression.Convert(
                Expression.PropertyOrField(itemParam, field),
                typeof(object)
            )
        )));
var lambda = Expression.Lambda<Func<Student, Dictionary<string,object>>>(
    selector, itemParam);

var currentItemFields = students.Select(lambda.Compile()); 
```

# c# - 参数无效错误

> ID：14214257
> 
> 赞同：0
> 
> 时间：2013-01-08T11:46:30.777
> 
> 标签：c#, wcf, wcf-binding, wcf-client

我收到参数无效错误。如何解决这个问题？

以下代码是服务器端

```
MemoryStream ms = new MemoryStream(ObjDt.ImgUpload);                  
                ms.Write(ObjDt.ImgUpload, 0, ObjDt.ImgUpload.Length);                
                System.Drawing.Image image = System.Drawing.Image.FromStream(ms, true);               
                image.Dispose();                
                image.Save(@"D:\Projects\WCF\WCF_ImageUpload\DamagedImages\" + strRandNo + ".jpg", System.Drawing.Imaging.ImageFormat.Jpeg);                
                // image.Save(@"C:\DotNet\ImageUpload\DamagedImages\" + strRandNo + ".jpg", System.Drawing.Imaging.ImageFormat.Jpeg);
                //return strRandNo.ToString();
                string val = strRandNo.ToString();
IPAddress = "localhost:53865/WCF/Image" + val + ".jpg"; 
```

在这些代码中，我得到 Parameter is not valid error..这些代码的 Web 配置是

```
<bindings>
      <basicHttpBinding>
        <binding name="StreamedBinding" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647" transferMode="Streamed">
          <readerQuotas maxDepth="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" maxStringContentLength="2147483647"/>
        </binding>
          </basicHttpBinding>
        </bindings>

<services>      
      <service name="Service" behaviorConfiguration="ServiceBehavior">
        <!-- <endpoint address="" binding="basicHttpBinding" bindingConfiguration="basicBinding1" contract="WCF_ImageUpload.IService1"></endpoint>-->
        <endpoint address="" binding="basicHttpBinding"
                          bindingConfiguration="StreamedBinding" bindingName="ServiceBehavior"
                          contract="WCF_ImageUpload.IService1" />
      </service>
    </services> 
```

我在 Windows 应用程序中使用了以下客户端应用程序。

```
Uri uri = new Uri("http://localhost:53865/Service1.svc/UploadDamagedImage");
            Details ObjDt = new Details();
            ObjDt.Name = "hi";
            ObjDt.Email = "hi@gmail.com";
            ObjDt.ContactNumber = "3698754215";
            ObjDt.DeviceModel = "E23";
            ObjDt.Problem = "Repair";
            ObjDt.Besttimetocontact = "9am";
byte[] bytes = File.ReadAllBytes("D:/WCFImages/admin.png");
ObjDt.ImgUpload = bytes;
DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(Details));
            // xmlserializer xser = new xmlserializer();
            MemoryStream mem = new MemoryStream();
            ser.WriteObject(mem, ObjDt);
            string data = Encoding.UTF8.GetString(mem.ToArray(), 0, (int)mem.Length);
            WebClient webClient = new WebClient();
            webClient.UploadStringCompleted += new UploadStringCompletedEventHandler(webClient_UploadStringCompleted);
            webClient.Headers["Content-type"] = "application/json";
            webClient.Encoding = Encoding.UTF8;
            webClient.UploadStringAsync(uri, "POST", data); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:05:22.673

*请告诉我们发生异常的行 - 另外，请提供堆栈跟踪。以下是我快速浏览您发布的代码所看到的...*

此行不是有效的 C# 语法：

```
IPAddress = "http://localhost:53865/WCF/Image" + val + ".jpg"; 
```

此外，该字符串不代表 IP 地址，因此不能将其分配给 类型的对象`IPAddress`。我假设这`IPAddress`不是变量名，因为 C# 的命名约定规定变量名应以小写字母开头。

除此之外，代码有缺陷。您正在创建图像，然后处理它，然后尝试保存它。

```
System.Drawing.Image image = System.Drawing.Image.FromStream(ms, true);               
image.Dispose();                
image.Save(@"D:\Projects\WCF\WCF_ImageUpload\DamagedImages\" + strRandNo + ".jpg", System.Drawing.Imaging.ImageFormat.Jpeg); 
```

它应该是另一种方式：创建、保存、处置：

```
System.Drawing.Image image = System.Drawing.Image.FromStream(ms, true);               
image.Save(@"D:\Projects\WCF\WCF_ImageUpload\DamagedImages\" + strRandNo + ".jpg", System.Drawing.Imaging.ImageFormat.Jpeg); 
image.Dispose(); 
```

甚至更好：

```
using (System.Drawing.Image image = System.Drawing.Image.FromStream(ms, true))              
{
    image.Save(@"D:\Projects\WCF\WCF_ImageUpload\DamagedImages\" + strRandNo + ".jpg", System.Drawing.Imaging.ImageFormat.Jpeg); 
} 
```

**编辑**
在您的评论中，您是说从流中加载图像的行会引发错误。这导致您应该检查以下内容：

执行以下两行是多余的（在您的情况下甚至是错误）：

```
MemoryStream ms = new MemoryStream(ObjDt.ImgUpload);                  
ms.Write(ObjDt.ImgUpload, 0, ObjDt.ImgUpload.Length); 
```

第一行创建基于给定字节的内存流`ObjDt.ImgUpload`（该行之后的流已经“包含图像”）。*然后，您再次*将字节写入流。从流的构造函数中删除参数或删除将字节写入流的行。

总而言之，这两行导致流不包含有效的图像数据，因为它连续两次包含图像字节。此外，我不确定`bool`指示流中存在颜色管理信息的参数 - 出于测试目的将其删除。代码应为：

```
using (MemoryStream ms = new MemoryStream(ObjDt.ImgUpload))
using (System.Drawing.Image image = System.Drawing.Image.FromStream(ms))              
{
    image.Save(@"D:\Projects\WCF\WCF_ImageUpload\DamagedImages\" + strRandNo + ".jpg", System.Drawing.Imaging.ImageFormat.Jpeg); 
} 
```

# validation - PrimeFaces DataTable InCell 编辑 - 非平凡验证

> ID：14214262
> 
> 赞同：3
> 
> 时间：2013-01-08T11:46:43.460
> 
> 标签：validation, jsf, primefaces, datatable

我想在**DataTable中使用****InCell**编辑和验证。我知道可以使用 f:validator 解决琐碎的验证，但是对于非琐碎的名称呢？

 **比方说，我必须确保“名称”属性在表中是唯一的。因此，在接受编辑之前，我应该检查名称是否已更改以及是否被其他元素使用。如果是这样，编辑必须被**拒绝**。

如何实现？据我所知，eventListener 只会收到编辑被接受的通知，所以理论上我可以做出反应并恢复它，但我更愿意在用户单击“接受”图标时拒绝编辑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T23:06:28.087

正如 Daniel 所说，您可以为此使用 JSF 验证器。一个简短的例子：

假设我们有一个人：

```
public class Person
{
    // Just imagine getters and setters ;-)
    private String firstName, lastName;
} 
```

还有一个非常简单的backing bean：

```
@ManagedBean
@ViewScoped
public class PersonBean
{
    private List<Person> persons = new ArrayList<Person>();

    @PostConstruct
    private void init()
    {
        persons.add(new Person("John", "Doe"));
    }   
} 
```

例如，我们要确保名字以大写字母开头。我们不在乎姓氏是否不以大写字母开头（因为与 IE 或遗留数据库兼容，你知道，这通常很奇怪）。

```
@FacesValidator("firstNameValidator")
public class FirstNameValidator implements javax.faces.validator.Validator
{
    @Override
    public void validate(FacesContext context, UIComponent component,
        Object value) throws ValidatorException
    {
        if (!Character.isUpperCase(String.valueOf(value).charAt(0)))
        {
            FacesMessage msg = new FacesMessage("First name should start with a capital.");
            throw new ValidatorException(msg);
        }
    }

} 
```

现在很好地显示所有内容：

```
<p:growl id="growl" />
<h:form>
    <p:dataTable value="#{bean.persons}" var="person" editable="true">
        <p:ajax event="rowEdit" update=":growl"/>
        <p:column headerText="first name">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{person.firstName}" />
                </f:facet>
                <f:facet name="input">
                    <p:inputText validator="firstNameValidator"
                        value="#{person.firstName}" />
                </f:facet>
            </p:cellEditor>
        </p:column>
        <p:column headerText="last name">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{person.lastName}" />
                </f:facet>
                <f:facet name="input">
                    <p:inputText value="#{person.lastName}" />
                </f:facet>
            </p:cellEditor>
        </p:column>
        <p:column>
            <p:rowEditor />
        </p:column>
    </p:dataTable>
</h:form> 
```

如果您有兴趣，可以使用 bean 验证 (JSR-303) 在域级别配置验证。我强烈推荐它，因为它不依赖 JSF 并且与 JPA 集成。

* * *

使用 bean 验证按承诺更新：

首先，验证器：

```
public class FirstNameValidator implements ConstraintValidator<FirstUpper, String>
{
    @Override
    public void initialize(FirstUpper constraintAnnotation) { }

    @Override
    public boolean isValid(String value, ConstraintValidatorContext context)
    {
        return Character.isUpperCase(value.charAt(0));
    }

} 
```

我们将要使用的注解：

```
@Constraint(validatedBy = FirstNameValidator.class)
@Target({ ElementType.METHOD, ElementType.FIELD })
@Retention(RetentionPolicy.RUNTIME)
public @interface FirstUpper
{
    String message() default "{FirstUpper.message}";

    Class<?>[] groups() default {};

    Class<? extends Payload>[] payload() default {};
} 
```

请注意，我们声明的消息`"{FirstUpper.message}"`将被解析为资源包。捆绑包必须位于类路径的根目录中，名为 `ValidationMessages.properties`. 要进行本地化，您可以添加语言环境代码：`ValidationMessages_en.properties`.

在该文件中声明消息：

```
FirstUpper.message=First name should start with a capital. 
```

人物类：

```
public class Person
{
    @FirstUpper
    private String firstName;
    private String lastName;
    // Imagine the getters/setters again ;-)
} 
```

现在，在您的 UI 中，您不必引用验证器，JSF 足够智能，可以使用 JSR-303 进行验证。所以代替这个：

```
<p:inputText validator="firstNameValidator" value="#{person.firstName}" /> 
```

只需使用这个：

```
<p:inputText value="#{person.firstName}" /> 
```

容易吧？;-)**

# django - mongoengine 代码中的 INSTALLED_APPS 错误

> ID：14214264
> 
> 赞同：0
> 
> 时间：2013-01-08T11:46:50.017
> 
> 标签：django, python-2.7, mongoengine

我正在使用 mongodb 开发 Django 1.3.1。

我安装了以下内容：

> django-bootstrap-toolkit==2.5.6 django-email-extras==0.1.8 django-forms-builder==0.7.15 django-pagination==1.0.7
> 
> django-grappelli==2.4.2 docutils==0.9.1 python-memcached==1.48 sphinx-me==0.1.2 wsgiref==0.1.2 django-rte==0.4.0

突然我得到以下错误。任何帮助。

文件“/usr/local/lib/python2.7/dist-packages/django_mongodb_engine-0.4.0-py2.7.egg/django_mongodb_engine/init.py ”，第13行，在settings.INSTALLED_APPS.insert(0, ' **django_mongodb_engine** ') AttributeError: 'tuple' 对象没有属性 'insert'

我试图将 INSTALLED_APPS 转换为列表而不是元组，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:30:30.090

这是因为安装完模块后，django更新到1.4.1，所以要降级：

```
>>> import django 
>>> django.__file__
'/usr/local/lib/python2.7/dist-packages/django/__init__.pyc 
```

> ```
> 1) Remove the /usr/local/lib/python2.7/dist-packages/django 
> ```
> 
> `2) 再次安装 1.3.1

# java - 查找在服务器端创建的 SSL 会话的 ID

> ID：14214265
> 
> 赞同：1
> 
> 时间：2013-01-08T11:46:59.223
> 
> 标签：java, security, ssl

我正在使用 JSSE 提供程序创建 SSL 连接，并想了解现有的 SSL 会话数量及其会话 ID。

我尝试使用`sslContext.getServerSessionContext().getIds()`，但它总是返回空枚举。

注意：正在使用 SSL 会话，因为当我尝试使用在 Server Hello 消息中发送的会话 ID 获取会话时，会找到会话。会话恢复也在工作。

但是我仍然无法使用上述方法获取所有会话 ID。

**编辑：**

```
SSLServerSocketFactory sslSocketFactory = sslContext.getServerSocketFactory();
SSLServerSocket serverSSLSocket = (SSLServerSocket) sslSocketFactory.createServerSocket(serverTlsConfiguration.getPort());

Socket socket = serverSSLSocket.accept();

sslContext.getServerSessionContext().getIds(); 
```

我在这里错过了什么吗？

# php - NTLM 身份验证 + 肥皂客户端 + 未收到响应

> ID：14214271
> 
> 赞同：0
> 
> 时间：2013-01-08T11:47:29.177
> 
> 标签：php, web-services, sharepoint, soap, ntlm

我有以下代码来调用 Sharepoint 数据的 NTLM 身份验证：

```
class NTLMSoapClient extends SoapClient {
/**
 * Whether or not to validate ssl certificates
 *
 * @var boolean
 */

    function __construct($location, $user, $passwd)
    {
        //print '1';

        $headers = array(

            'Method: POST',

            'Connection: Keep-Alive',

            'User-Agent: PHP-SOAP-CURL',

            'Content-Type: text/xml; charset=utf-8',

            'SOAPAction: ""',
        );

        $request='';

        //$this->__last_request_headers = $headers;

        $ch = curl_init($location);

        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

        curl_setopt($ch, CURLOPT_HTTPHEADER , $headers);
        //print '2';

        curl_setopt($ch, CURLOPT_POST , true );

        curl_setopt($ch, CURLOPT_POSTFIELDS , $request);

        curl_setopt($ch, CURLOPT_HTTP_VERSION , CURL_HTTP_VERSION_1_1);

        // the next option may or may not cause issues with non-XML documents
        //curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_NTLM);

        curl_setopt($ch, CURLOPT_USERPWD, $user.':'.$passwd);
        //print '3';

        // optional SSL verification
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

        curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);

        $response = curl_exec($ch);
        print $response;

        // TODO: Add some real error handling.
        // If the response if false than there was an error and we should throw
        // an exception.
        if ($response === false) {
            //print '5';
            throw new EWS_Exception(
              'Curl error: ' . curl_error($ch),
              curl_errno($ch)
            );
        }

        //print '6';

        return $response;
    }
} 
```

调用如下：

```
try{
            $this->soapObject = new NTLMSoapClient( $this->wsdl, $this->spUser, $this->spPass);
        }catch(SoapFault $fault){
            //If we are unable to create a Soap Client display a Fatal error.
            throw new Exception("Unable to locate WSDL file.");
        } 
```

响应以 wsdl 的形式出现。为什么响应以 wsdl 的形式出现。它应该像普通的soap客户端调用一样返回soap客户端对象数组。

# .htaccess - Codeigniter - .HTACCESS 通过 IP 拒绝文件夹/控制器

> ID：14214275
> 
> 赞同：0
> 
> 时间：2013-01-08T11:47:50.237
> 
> 标签：.htaccess, codeigniter, ip

在我的应用程序/控制器文件夹中，我有一个名为“cms”的子文件夹，其中有我的管理工具。我需要通过 IP 限制对该文件夹及其控制器的访问。我曾尝试使用 .HTACCESS 文件来执行此操作，如下所示（但它不起作用）：此文件与 /application/controllers/cms/ 一起存在

```
Order Deny,Allow
Deny from All
Allow from XX.XX.XX.XXX 
```

我在应用程序根目录中的 .HTACCESS 文件如下：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|uploads|images|css|js|robots\.txt|favicon\.ico)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ ./index.php/$1 [L,QSA] 
```

有谁知道我如何将这两个文件设置为正常工作并允许我通过 IP 限制对 /cms/ 文件夹及其控制器的访问？

我期待着您的回音。

谢谢

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:19:40.613

试试这个火花：

[http://getsparks.org/packages/ip_restrict/versions/HEAD/show](http://getsparks.org/packages/ip_restrict/versions/HEAD/show)

您可以让所有 CMS 控制器扩展 CI_Controller 方法 (MY_) 并在构造中调用 spark。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:51:46.703

所以这不起作用？
在 cms 文件夹中创建一个 htaccess 文件，内容如下：

```
order deny, allow
deny from all
allow from xxx.xxx.xxx.xxx 
```

# c# - ComboBox 在 Windows 8 中的 PointerPressed 事件不起作用

> ID：14214276
> 
> 赞同：0
> 
> 时间：2013-01-08T11:47:55.510
> 
> 标签：c#, .net, event-handling

我今天遇到了 ComboBox 的奇怪行为。如果您按下鼠标左键，ComboBox 中的 PointerPressed 事件永远不会触发。仅当您单击鼠标右键时才会触发。谁能告诉我为什么会这样？我想使用鼠标左键触发 PointerPressed 事件。

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <ComboBox x:Name="MyComboBox" Width="200" Height="60" PointerPressed="ComboBox_PointerPressed_1">
        <ComboBox.Items>
            <TextBlock Text="test1"/>
            <TextBlock Text="test2"/>
            <TextBlock Text="test3"/>
        </ComboBox.Items>
    </ComboBox>
</Grid>

private void ComboBox_PointerPressed_1(object sender, PointerRoutedEventArgs e)
{

} 
```

# javascript - 使用javascript修剪两端的字符串

> ID：14214279
> 
> 赞同：2
> 
> 时间：2013-01-08T11:48:08.307
> 
> 标签：javascript, string, trim

> **可能重复：**
> [如何在 javascript 中修剪字符串？](https://stackoverflow.com/questions/498970/how-do-i-trim-a-string-in-javascript)

我有以下来自ajax响应的字符串

```
"\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\r\n\tERROR: Profile : NOT SUCCESS\nCODE        : 2\nCATEGORY    : TECHNICAL\nSEVERITY    : null\nENVIRONMENT : DEV\nAPPLICATION : DEV\nDESCRIPTION : Profile: INVOCATION UNHANDLED EXCEPTION [null]\nDESCRIPTION : Profile: [ServiceAttribute]\nDESCRIPTION : Profile: Instance ID = 20130108124231841\n\r\n\r\n" 
```

我正在使用下面的代码来修剪两端的字符串。

> var text = originalRequest.responseText.replace(/^\s+|\s+$/g, '');

但是，它正在删除来自 ajax 响应的消息之间的 \n 。我最终想要的是

```
"ERROR: Profile : NOT SUCCESS
CODE        : 2
CATEGORY    : TECHNICAL
SEVERITY    : null
ENVIRONMENT : DEV
APPLICATION : DEV
DESCRIPTION : Profile: INVOCATION UNHANDLED EXCEPTION [null]
DESCRIPTION : Profile: [ServiceAttribute]
DESCRIPTION : Profile: Instance ID = 20130108124231841" 
```

我怎么得到这个？从过去 1 小时尝试不同的方式:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T11:54:14.373

只需使用`trim();`：

```
var s = "\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\r\n\tERROR: Profile : NOT SUCCESS\nCODE        : 2\nCATEGORY    : TECHNICAL\nSEVERITY    : null\nENVIRONMENT : DEV\nAPPLICATION : DEV\nDESCRIPTION : Profile: INVOCATION UNHANDLED EXCEPTION [null]\nDESCRIPTION : Profile: [ServiceAttribute]\nDESCRIPTION : Profile: Instance ID = 20130108124231841\n\r\n\r\n";
console.log(s.trim());

"ERROR: Profile : NOT SUCCESS
CODE        : 2
CATEGORY    : TECHNICAL
SEVERITY    : null
ENVIRONMENT : DEV
APPLICATION : DEV
DESCRIPTION : Profile: INVOCATION UNHANDLED EXCEPTION [null]
DESCRIPTION : Profile: [ServiceAttribute]
DESCRIPTION : Profile: Instance ID = 20130108124231841" 
```

如果`trim()`不可用（IE 8-），试试这个 polyfill：

```
if(!String.prototype.trim) {
    String.prototype.trim = function () { 
        return this.replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,'');
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:51:44.897

您可以从两次使用 native 开始`replace()`（重新格式化以查看 reg exp）：

```
"\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\r\n\tERROR: Profile : NOT SUCCESS\nCODE        : 2\nCATEGORY    : TECHNICAL\nSEVERITY    : null\nENVIRONMENT : DEV\nAPPLICATION : DEV\nDESCRIPTION : Profile: INVOCATION UNHANDLED EXCEPTION [null]\nDESCRIPTION : Profile: [ServiceAttribute]\nDESCRIPTION : Profile: Instance ID = 20130108124231841\n\r\n\r\n"
     .replace(/^\s+/, "")
     .replace(/\s+$/, "") 
```

给出：

```
ERROR: Profile : NOT SUCCESS
CODE        : 2
CATEGORY    : TECHNICAL
SEVERITY    : null
ENVIRONMENT : DEV
APPLICATION : DEV
DESCRIPTION : Profile: INVOCATION UNHANDLED EXCEPTION [null]
DESCRIPTION : Profile: [ServiceAttribute]
DESCRIPTION : Profile: Instance ID = 20130108124231841 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T12:00:42.297

出于某种奇怪的原因，我不太喜欢正则表达式。只要有可能，我就会尝试寻找其他方法。对于那些分享我的观点的人，这里是纯 JavaScript 代码，用于根据您的字符列表自定义修剪字符串：

```
function MyTrim(text) {
    //turn into a string in case it's other type:
    var result = text + "";

    //trim leading characters:
    while (result.length > 0 && IsWhiteSpace(result[0]))
        result = result.substr(1, result.length - 1);

    //trim trailing characters:
    while (result.length > 0 && IsWhiteSpace(result[result.length - 1]))
        result = result.substr(0, result.length - 1);

    return result;
}

function IsWhiteSpace(c) {
    return c == " " || c == "\r" || c == "\n" || c == "\t";
} 
```

在你的情况下：

```
var text = MyTrim(originalRequest.responseText); 
```

[现场测试用例](http://jsfiddle.net/p4qGv/)。

# django - Django中的路由器只将一个模型写入数据库？

> ID：14214281
> 
> 赞同：1
> 
> 时间：2013-01-08T11:48:14.517
> 
> 标签：django, router

我的 models.py 中有 4 个模型。我正在使用多个数据库。我只想将模型写入我添加的另一个数据库。我有来自 Django 文档的默认路由器：

```
 def db_for_write(self, model, **hints):
        """
        Attempts to write fileupload models go to galaxy.
        """
        if model._meta.app_label == 'fileupload': #fileupload=app_name
            return 'galaxy' #database=galaxy
        return None 
```

我的型号名称是 GalaxyUser。如何修改此功能，以便在我这样做`./manage.py syncdb --database=galaxy`时仅将模型写入`GalaxyUser`数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T02:27:23.837

您需要定义[`allow_syncdb`](https://docs.djangoproject.com/en/dev/topics/db/multi-db/#allow_syncdb)方法

```
class GalaxyRouter(object):
    def allow_syncdb(self, db, model):
        if db == 'galaxy':
            return model._meta.app_label == 'fileupload'
        if model._meta.app_label == 'fileupload':
            return db == 'galaxy'
        return None 
```

确保路由器与模型位于不同的文件中（如`fileupload/routers.py`），并且它安装在您的`settings.py`文件中，如下所示：`DATABASE_ROUTERS = ['fileupload.routers.GalaxyRouter']`

# memory-management - 如果我们有无限的内存，那么我们还需要分页吗？

> ID：14214286
> 
> 赞同：7
> 
> 时间：2013-01-08T11:48:30.110
> 
> 标签：memory-management, operating-system, paging, virtual-memory

分页通过将页面移入和移出磁盘来创建每个进程都有无限 RAM 的错觉。所以如果我们有无限的内存（在某些假设的情况下），我们还需要分页吗？如果是，那为什么？我在一次采访中遇到了这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T16:02:58.100

假设“无限内存”意味着无限的随机可访问内存或 RAM，我们仍然需要分页。虽然分页通常与将页面进出 RAM 的页面交换到硬盘以节省内存的能力相关联，但这只是分页的一个方面。以下是需要分页的其他一些原因：

*   安全。分页是一种通过确保一个进程不能访问另一个进程的内存并且它不能修改驻留内核来强制执行操作系统安全和内存保护的方法。
*   多任务处理。分页通过虚拟化内存空间来帮助多任务处理，也就是说，进程 A 中的地址 0xFOO 可以与进程 B 中的 0xFOO 完全不同
*   内存分配。分页通过减少碎片和确保仅在访问时分配 RAM 来帮助内存分配。这意味着虽然一个进程需要 100MB 的连续 RAM 空间，但这在物理上不需要是连续的。此外，当程序请求 100MB 空间时，操作系统会告诉程序使用 100MB 空间是安全的，但在程序充分使用该空间之前不会实际分配。

诚然，如果一个人有无限的 RAM，后者就不是完全必要的。即使我们不受资源限制，保持高效始终是一种好习惯。它还演示了有时不考虑分页的用途。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T12:13:50.923

这是一个哲学问题，所以这是一个哲学答案:)

这个问题的诀窍是你对无限记忆做出假设。可以说“不，不需要使用分页，但是”。并遵循：

无限内存必须在内存访问的可接受时间限制内可访问。如果不是（因为无穷大占用大量空间，并且内存离处理单元更远），它和磁盘之间没有区别，两者都不能满足随时可用的内存要求，这就是通过页面缓存尝试的解决。

以亚马逊的 S3 为例，它实际上是无限的。如果您可以依靠 S3 来满足您的所有内存需求，即当您需要在时间 x 内获取某些内容时，您可以从 S3 获取它，则无需分页任何内容，甚至无需将其保存在“本地”内存中。只需在需要时从 S3 获取它，根据需要多次获取。（显然这会产生其他影响，如成本和网络，但我们现在先忽略它）。

当然，您总是可以说您希望内存访问尽可能快，并且“足够快”可能比“最快”慢，因此本地内存访问将为您提供更好的性能等。

最后，如果我必须设想一个无限的内存并且无论内存单元离获取单元有多“远”都具有相同的访问时间，我将不得不设想一个处理单元位于中间的球体，所以你不能争辩说一个内存单元因为距离而比另一个慢。否则，您可以说分页将在内存内部完成，以便更快地访问最常用的内存单元（或您选择使用的任何算法）。

# wordpress - 面向SEO的网站框架

> ID：14214288
> 
> 赞同：-1
> 
> 时间：2013-01-08T11:48:33.253
> 
> 标签：wordpress, joomla, content-management-system, opencms

我必须为一家设计公司创建一个网站。客户的要求是

1.  网站必须快速加载
2.  必须针对 SEO 优化网站 - 在网站启动后规划付费 SEO 流程
3.  必须与 facebook 和其他社交网站集成。

客户将负责其余的 SEO 流程。现在我只需要制作一个对 SEO 友好的快速加载网站。

我是这个 SEO 流程的新手，对为工作选择的框架有点困惑。

任何人都可以为我推荐一个最好和最有效的 PHP 框架吗？

通过大量谷歌搜索，我发现了 Wordpress 和 Joomla！适合我。

但是Joomla！我是不是有点重？

这些网站内容是一个简单的幻灯片放映和一些文章、视频和个人资料以及一个联系表格，仅此而已

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:00:43.280

好吧，为了快速加载，您只需要注意使用哪些插件，有些加载非常慢并且代码很差。

您还可以使用缓存插件，它将数据库查询存储在 HD 上并在以后使用它们，而不是在每次页面加载时重新进行相同的查询。

在主题中，使用一个干净的主题，这样可以减少 WP 调用。如果确实需要页面加载速度，请删除不需要的信息，例如标签列表（在这种情况下，您也会失去一些 SEO 价值）和一些小部件。

搜索引擎优化中最重要的事情是避免外部链接，这会让你大吃一惊。我有一个电子邮件和 url 混淆插件，但我现在在 wordpress 插件页面中找不到它。

然后使用良好的永久链接结构，明智地选择发布 slug，建立适当的页面标题等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:19:22.140

I am an SEO expert and I find that Wordpress, even without plugins is very SEO friendly and not as complex as Joomla.

One SEO plugin I highly recommend is Yoast SEO [http://yoast.com/wordpress/seo/](http://yoast.com/wordpress/seo/)

Another on is WP super cache to speed up the site [http://wordpress.org/extend/plugins/wp-super-cache/](http://wordpress.org/extend/plugins/wp-super-cache/)

Hope this helps ;)

# c++ - 在 Windows 中执行 SetMonitorBrightness 函数时出现无效的监视器句柄错误 - C++

> ID：14214290
> 
> 赞同：2
> 
> 时间：2013-01-08T11:48:33.470
> 
> 标签：c++, windows, winapi

我正在 Windows 中编写程序，我想获得计算机显示器的亮度。我正在使用 Windows GetMonitorBrightness 功能，但是遇到了一些问题。

到目前为止，这是我的代码：

```
DWORD dw;
HMONITOR hMonitor = NULL;
DWORD cPhysicalMonitors;
LPPHYSICAL_MONITOR pPhysicalMonitors = NULL;

LPDWORD pdwMinimumBrightness=NULL;
LPDWORD pdwCurrentBrightness=NULL;
LPDWORD pdwMaximumBrightness=NULL;

HWND hwnd = FindWindow(NULL, NULL);

hMonitor = MonitorFromWindow(hwnd, MONITOR_DEFAULTTONULL);

BOOL bSuccess = GetNumberOfPhysicalMonitorsFromHMONITOR(hMonitor, &cPhysicalMonitors);
pPhysicalMonitors = (LPPHYSICAL_MONITOR)malloc(cPhysicalMonitors* sizeof(PHYSICAL_MONITOR));
bSuccess = GetPhysicalMonitorsFromHMONITOR(hMonitor, cPhysicalMonitors, pPhysicalMonitors);
bSuccess = GetMonitorBrightness(hMonitor, pdwMinimumBrightness, pdwCurrentBrightness, pdwMaximumBrightness); 
```

[我在http://msdn.microsoft.com/en-us/library/windows/desktop/dd692972%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd692972%28v=vs.85%29.aspx)的文档之后写了这个

但是当我运行此代码时，我收到一条错误消息，提示“此函数失败，因为传递了一个无效的监视器句柄”。

我看不出我写的代码有什么问题，但我似乎无法弄清楚这个错误的原因。

**编辑：**我应该提到我正在 CRT 显示器上尝试这个

**编辑2：**修复了这个问题，结果我没有将正确的句柄传递给GetMonitorBrightness。

```
bSuccess = GetPhysicalMonitorsFromHMONITOR(hMonitor, cPhysicalMonitors, pPhysicalMonitors);
HANDLE pmh = pPhysicalMonitors[0].hPhysicalMonitor; //<---------------  
bSuccess = GetMonitorBrightness(pmh, pdwMinimumBrightness, pdwCurrentBrightness, pdwMaximumBrightness); 
```

添加上面的标记线，解决了这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-07T15:48:20.027

`#pragma comment(lib,"Dxva2.lib")`在 . 旁边添加`#include file`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:08:52.687

您没有检查`MonitorFromWindow`. 如果没有找到监视器，它会返回`NULL`，因为你已经通过了`MONITOR_DEFAULTTONULL`。Null 不是监视器句柄。

尝试`MONITOR_DEFAULTTONEAREST`或`MONITOR_DEFAULTTOPRIMARY`。

# php - 使用“全局命名空间”；

> ID：14214293
> 
> 赞同：5
> 
> 时间：2013-01-08T11:48:44.323
> 
> 标签：php, namespaces

我只是想知道是否有一种方法可以使用“use”关键字使一个类的行为就好像它在全局命名空间中一样，所以这个类只能从类外部表现为命名空间类。就像是：

```
namespace wherever\somewhere\deep\deep\inside;
use \; // root namespace.. note: this doesn't work
class stuff{
//....
} 
```

任何人？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-08T12:14:23.327

使用全局命名空间不会按您期望的方式工作。

默认情况下，您可以通过添加反斜杠来引用全局命名空间类——例如`$x = new \PDO(...);`. 努力`use \`不会改变这一点。

如果要从全局命名空间的类中删除反斜杠，则需要`use`专门针对它们中的每一个。在命名空间 PHP 中，任何没有命名空间的类引用都被假定在当前命名空间中，除非它被声明显式引用`use`。

例如：

```
use \PDO, \SplFileObject; 
```

现在我们可以调用`new PDO(...)`或`new SplFileObject()`不使用反斜杠。但是其他不在的全局类`use`仍然需要反斜杠。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-29T10:39:03.530

如果您使用这样的括号，您可以访问全局命名空间：

```
namespace My\Space {
    function myScopedFunction() { .. }
}
namespace {
    function myGlobalFunction() { .. }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-09T00:43:15.717

我不认为你可以。如果有人找到好的方法，请分享。我尝试了以下显然不起作用的方法（文章在这里[http://www.siteconsortium.com/h/D0000H.php](http://www.siteconsortium.com/h/D0000H.php)）。我会发现能够以这种方式进入根命名空间非常有用，因为许多遗留代码不使用命名空间。

```
$root = \_\_NAMESPACE\_\_;   // error 

namespace AA; 
function foo() { print " What AA "; }

use ($root);      // error

namespace $root;  // error can't use var

namespace ""; // error

use "/"; // error

namespace "/";   // error 
```

这里有几个不同的问题。我觉得奇怪的一件事是我可以使用关键字`require_once $script_name`，但我不能使用关键字`namespace $namespace_name`。

# datetime - SignalR 日期时间反序列化错误

> ID：14214298
> 
> 赞同：0
> 
> 时间：2013-01-08T11:49:00.223
> 
> 标签：datetime, deserialization, signalr

我正在使用 SignalR 将一个对象从客户端发布到服务器，该对象包含一个日期属性，该属性有时具有 UTC DateTime，有时具有 LOCAL DateTime（这本身就是一个单独的问题）。我注意到的是，只要日期是当地时间，例如“2013-01-08T10:35:59.8484157+00:00”，我就会收到“无法将字符串转换为 DateTime”错误。经检查，试图解析的字符串似乎从导致转换错误的时区偏移信息中丢失了“+”字符。我试图了解这个角色是如何丢失的。

SignalR 正确地将对象序列化为 json，并对其进行编码，因为 + 字符被编码为 %2B，这可以在 SignalR 请求的正文中看到

```
data=%7B%22H%22%3A%22alertshub%22%2C%22M%22%3A%22AcknowledgeAlert%22%2C%22A%22%3A%5B%7B%22Id%22%3A%22e2d65f79-6a03-4094-a00f-99fcd9b46a7a%22%2C%22StartDateTimeUtc%22%3A%222013-01-08T10%3A26%3A44.0849463%2B00%3A00%22%2C%22EndDateTimeUtc%22%3Anull%2C%22AcknowledgedDateTimeUtc%22%3Anull%2C%22Description%22%3A%22Test+Alert+17%22%7D%5D%2C%22I%22%3A0%7D 
```

通过 UrlDecode 函数运行它会返回正确的值

```
data={
    "H":"alertshub",
    "M":"AcknowledgeAlert",
    "A":[{
            "Id":"e2d65f79-6a03-4094-a00f-99fcd9b46a7a",
            "StartDateTimeUtc":"2013-01-08T10:26:44.0849463+00:00",
            "EndDateTimeUtc":null,
            "AcknowledgedDateTimeUtc":null,
            "Description":"Test Alert 17"
    }],
    "I":0
} 
```

但是在查看 SignalR 请求上下文时，正文列出了“+”，现在是一个空格。这会导致日期转换错误。似乎在 SignalR/JSON.NET/.NET（不确定是哪一个）的某处对发布的数据进行双重解码并将 + 转换为空格。

我创建了一个简单的 MVC 应用程序来演示这个问题，它在 GitHub 上[http://github.com/davidthompson/SignalRPlusEncodingTest](http://github.com/davidthompson/SignalRPlusEncodingTest)

示例应用程序运行后，单击带有 UTC 日期的任何警报旁边的确认按钮，这将调用集线器上的 SignalR 方法，并且警报将消失。如果您对具有本地日期的警报执行相同的操作，它将失败（单击“创建新警报”按钮，它将随机生成具有 UTC 或本地日期的警报）。浏览器控制台将显示有关转换失败的错误。但如果不是这样，收到的错误如下：

```
[10:36:04 GMT+0000 (GMT Standard Time)] SignalR: Could not convert string to DateTime: 2013-01-08T10:35:53.1401147 00:00\. Path 'StartDateTimeUtc', line 1, position 144.
   at Newtonsoft.Json.JsonReader.ReadAsDateTimeInternal()
   at Newtonsoft.Json.Linq.JTokenReader.ReadAsDateTime()
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.ReadForType(JsonReader reader, JsonContract contract, Boolean hasConverter)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.PopulateObject(Object newObject, JsonReader reader, JsonObjectContract contract, JsonProperty member, String id)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateObject(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.Deserialize(JsonReader reader, Type objectType, Boolean checkAdditionalContent)
   at Newtonsoft.Json.JsonSerializer.DeserializeInternal(JsonReader reader, Type objectType)
   at Microsoft.AspNet.SignalR.JTokenValue.ConvertTo(Type type)
   at Microsoft.AspNet.SignalR.Hubs.DefaultParameterResolver.ResolveParameter(ParameterDescriptor descriptor, IJsonValue value)
   at System.Linq.Enumerable.<ZipIterator>d__7a`3.MoveNext()
   at System.Linq.Buffer`1..ctor(IEnumerable`1 source)
   at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)
   at Microsoft.AspNet.SignalR.Hubs.DefaultParameterResolver.ResolveMethodParameters(MethodDescriptor method, IJsonValue[] values)
   at Microsoft.AspNet.SignalR.Hubs.HubDispatcher.InvokeHubPipeline(IHub hub, IJsonValue[] parameterValues, MethodDescriptor methodDescriptor, HubRequest hubRequest, StateChangeTracker tracker)

jquery....min.js (line 10) 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:50:30.927

[这已通过问题https://github.com/SignalR/SignalR/issues/1194](https://github.com/SignalR/SignalR/issues/1194)在 SignalR 的最新开发分支中修复。

# java - 取消阻止电子邮件地址前景

> ID：14214299
> 
> 赞同：0
> 
> 时间：2013-01-08T11:49:05.427
> 
> 标签：java, outlook, exchange-server

我正在从我的 Java EE 应用程序发送电子邮件。为了测试，我向我的办公室电子邮件地址发送了太多电子邮件。现在服务器已经阻止了电子邮件地址，并且没有人接收该域。如何解锁电子邮件地址。我是否应该联系 IT 以解除对 Exchange 服务器的阻止，或者我可以从我这边完成。（应用程序没有问题，因为我用 yahoo、gmail、live 等进行了测试）。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:51:22.163

联系您的 IT 部门，然后使用外部电子邮件进行测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:56:54.463

不可能以`email address` **编程**方式解除对您的阻止。您需要联系**管理员**（监控服务器）。

下一次，确保您没有向任何电子邮件服务器发送垃圾邮件（与所有其他电子邮件客户端一样）

# redirect - Opencart 网址重定向

> ID：14214301
> 
> 赞同：8
> 
> 时间：2013-01-08T11:49:14.993
> 
> 标签：redirect, opencart

我为 Opencart 制作了一个自定义注册模块，

我的注册页面有以下网址：

www.mysite.com/index.php?route=account/customregister

而默认的注册页面 url 是：

www.mysite.com/index.php?route=account/register

当用户单击指向默认注册模块 (route=account/register) 的任何链接时，我想将用户重定向到我的注册页面 (route=account/customregister)。我知道我可以编辑 .htaccess 文件以进行重定向或 url 重写，但我想通过 php 来做到这一点。有人知道我是否可以在我的扩展程序上放置一些类/函数或某种代码来自动将用户重定向到新的 url？

提前谢谢大家

Ps 我无法修改核心文件，也不会编辑 .htaccess。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-08T13:41:48.653

这可以通过 vQmod 轻松实现。您需要使用 vQmod 来编辑文件`/catalog/controller/account/register.php`并将

```
$this->redirect($this->url->link('account/customregister', '', 'SSL')); 
```

就在`index()`方法声明中（所以使用它作为 vQmod 的搜索并使用`after`位置）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-25T16:46:58.173

您可以通过添加以下代码从主页重定向到任何产品：

目录/控制器/common/home.php

```
$this->response->redirect($this->url->link('product/product', 'product_id=50', '')); 
```

其中 50 是您的产品 ID。这是在 Opencart 2.0.1.1 上。我这样做是因为我只卖一种产品，希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-06T17:10:07.337

对于重定向，这也可以在 opencart 中工作

```
$this->redirect($this->url->link('account/customregister', '', 'SSL')); 
```

# jquery - 防止 $.post 表单信息出现在 url

> ID：14214303
> 
> 赞同：2
> 
> 时间：2013-01-08T11:49:21.353
> 
> 标签：jquery, url, post

我有一个网站，其中包含一些个人数据。当我使用 $.post 时，消息会附加到 URL 中。提交表单时也是`index.html`如此。`index.html?message=Hey+what's+up%3F`如何防止这种行为？

jQuery：

```
$(form1Var).submit(function() {                     
    $.post("submit.php", form1Var.serialize(), function(data) {
        var code = data.trim();
        console.log(code);
        $('[data-role="response"]').html('<span class="ui-btn-text">' + code + '</span>');
        $('[data-role="submit"]').load("submit_form.html");
    });
}); 
```

表格：

```
<form name="submit_message" action="" id="message_form">
    <div data-role="fieldcontain" class="ui-field-contain ui-body ui-br">
        <label for="textarea" class="ui-input-text">Message:</label>
        <textarea maxlength="10000" cols="40" rows="8" name="message"
    id="message" class="ui-input-text ui-body-null ui-corner-all ui-shadow-inset ui-body-c"></textarea>
    </div>
    <div data-theme="a" class="ui-btn ui-btn-corner-all ui-shadow ui-btn-up-a"
aria-disabled="false">
        <span class="ui-btn-inner ui-btn-corner-all">
            <span class="ui-btn-text">Submit</span>
        </span>
        <button type="submit" data-theme="a" name="submit" value="submit-value"
    class="ui-btn-hidden" aria-disabled="false">Submit</button>
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T11:51:47.267

那是因为通常也会提交表单。

改变

```
$(form1Var).submit(function() { 
```

至

```
$(form1Var).submit(function(e) {
    e.preventDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:52:26.343

这不是因为`jQuery`帖子。

您必须阻止默认操作，或者您必须`return false`在提交表单后说。

# javascript - 从后面的代码运行 javascript

> ID：14214306
> 
> 赞同：0
> 
> 时间：2013-01-08T11:49:55.183
> 
> 标签：javascript, asp.net, ajax, code-behind

我知道有很多这样的问题。我尝试了很多，但仍然无法使其正常工作。

我有：`RadAjaxManager`, `RadAjaxPanel`,`RadScriptBlock`

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <telerik:RadAjaxManager ID="RadAjaxManager1" runat="server" 
         DefaultLoadingPanelID="RadAjaxLoadingPanel1">
         <ClientEvents OnRequestStart="onRequestStart" />
             <AjaxSettings>
                  <telerik:AjaxSetting AjaxControlID="AjaxPanel">
                      <UpdatedControls>
                          <telerik:AjaxUpdatedControl ControlID="AjaxPanel"/>
                       </UpdatedControls>
                   </telerik:AjaxSetting>
              </AjaxSettings>
    </telerik:RadAjaxManager>
    <telerik:RadAjaxPanel runat="server" ID="AjaxPanel" Wrap="True" CssClass="PanelAjax">
         <telerik:RadComboBox runat="server" ID="cbLanguage" Width="115px" 
             AutoPostBack="True"Sort="Ascending" EmptyMessage="Choose language" 
             DataValueField="id" DataTextField="languageName"
             OnSelectedIndexChanged="cbLanguage_SelectedIndexChanged">
          </telerik:RadComboBox>
    </telerik:RadAjaxPanel>
    <telerik:RadScriptBlock ID="RadScriptBlock1" runat="server">
      <script>
          function MyFunction(){
                  alert('asdasd');
          }
      </script>
    </telerik:RadScriptBlock>
</asp:Content> 
```

在`Master Page`我有：

```
<telerik:RadScriptManager ID="ScriptManager1" runat="server">
</telerik:RadScriptManager> 
```

我想在`combo box selected index change`.

我已经尝试过：

```
protected void cbLanguage_SelectedIndexChanged(object sender, EventArgs e)
{
    Page.ClientScript.RegisterStartupScript(Page.GetType(), "myKey", "MyFunction();");
    ScriptManager.RegisterStartupScript(Page, this.GetType(), "testOne", "MyFunction();", true);
} 
```

我也试着直接发出警报：

```
ScriptManager.RegisterStartupScript(Page, GetType(), "alert", "alert('asd');", false);

RadAjaxManager1.ResponseScripts.Add(@"radalert('Welcome to RadWindow <b>Prometheus</b>!', 330, 210);");

string treeScript = "<script language='javascript'>alert('asd');</script>";
                Page.ClientScript.RegisterStartupScript(this.GetType(), "alert", treeScript);

RadAjaxManager1.ResponseScripts.Add(@"alert('Welcome');"); 
```

有人可以解释一下我做错了什么吗？

没有错误。只是不执行javascript代码。我的屏幕上没有`alert()`窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:14:54.220

您的 javascript 中应该出现语法错误！您的声明中有错字。

你写了：

```
 <script>
      fuction MyFunction(){
              alert('asdasd');
      }
  </script> 
```

但它必须是：

```
 <script>
      function MyFunction(){
              alert('asdasd');
      }
  </script> 
```

# javascript - 尝试将 type="button" 更改为超链接

> ID：14214309
> 
> 赞同：0
> 
> 时间：2013-01-08T11:50:06.103
> 
> 标签：javascript, jquery, asp.net

以下代码适用于我的按钮，单击时会显示图像：

```
<input type="button" onclick='javascript:showImg("<%# FieldValue %>")' /> 
```

我想将其更改为超链接“显示”，但以下代码不起作用。

```
<asp:HyperLink ID="displayImg" runat="server" NavigateUrl='javascript:showImg("<%# FieldValue %>")'>Preview</asp:HyperLink> 
```

它抛出错误：JavaScript 运行时错误：无效参数。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:52:27.553

你不应该使用这个`NavigateUrl`属性，那是一个 URL ......使用这个：

```
<asp:HyperLink ID="displayImg" runat="server" 
      PostBackUrl="#"
      onclick="showImg('<%# FieldValue %>');return false;">
      Preview</asp:HyperLink> 
```

当您使用 ASP.NET 控件时，您需要坚持它们的功能，但**请记住**，您始终可以使用默认的 HTML 控件，在此示例中：

```
<input type="button" onclick="showImg('<%# FieldValue %>')" value="Preview" /> 
```

即使你想使用它，在你的代码隐藏文件中，只需添加一个`runat="server"`，然后你就可以找到使用它的控件`ID`。

* * *

这里有3种方法：

```
<a href="#" onclick="alert('hi!')">Preview 1</a>

<asp:HyperLink runat="server" NavigateUrl="#" onclick="alert('hi!')">Preview 2</asp:HyperLink>

<asp:LinkButton runat="server" PostBackUrl="#" OnClientClick="alert('hi!')">Preview 3</asp:LinkButton> 
```

这将呈现：

```
<a href="#" onclick="alert('hi!')">Preview 1</a>

<a onclick="alert('hi!')" href="#">Preview 2</a>

<a onclick="alert('hi!');" href='javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions("ctl00$MainContent$ctl01", "", false, "", "#", false, true))'>Preview 3</a> 
```

最后一个选项，它将始终 POST。

很简单，选择最好的方式来完成它，他们都这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:10:24.030

这是当您想在 HiperLink NavigateUrl 中绑定某些值时的正确示例： NavigateUrl="javascript:showImg('<%# FieldValue %>')"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T12:01:10.817

或者...

```
 <a ID="displayImg" onclick='showImg("<%= FieldValue %>")'>Preview</a> 
```

问题是 <%= FieldValue %> 在服务器标签内时无法正确解析（asp:hyperlink）

# extjs - 如何在 Windows 7 上正确设置 sencha touch 2。我正在尝试但不能

> ID：14214312
> 
> 赞同：0
> 
> 时间：2013-01-08T11:50:28.640
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我的 CMD 出现问题。当我尝试设置 Sencha touch 2.There is show 这种错误![在此处输入图像描述](../Images/a09ae08f47ee60738f02977f842c93f4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:14:41.460

您需要在**sencha sdk**文件夹而不是**sencha-touch-2**运行命令，如警告中所见

除此之外，我建议您升级到 sencha touch 2.1 版，因为它有很多增强功能。要在此版本中运行命令，您需要下载[Sencha Cmd](http://www.sencha.com/products/sencha-cmd/download)，因为 Sencha SDK 工具在此版本中已被弃用，这里是有关如何使用此 Sencha Cmd的[指南。](http://docs.sencha.com/touch/2-1/#!/guide/command)

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-15T06:38:32.377

请按照以下步骤进行 -

第 1 步 - 如果您没有，请从[此处下载所有与 sencha 相关的 SDK](http://www.sencha.com/products/touch/download/)

第 2 步 - 将“ **sencha-touch-2.3.0-gpl.zip** ”解压缩到您的项目目录。并在您的机器上安装 SenchaCmd 和 sencha SDK 工具。

第 3 步 - 打开命令提示符并输入 sencha 并输入。如果您看到像 - **Sencha Cmd v4.0.1.45**这样的输出，则一切正常。否则可能是您的安装有问题。

第 4 步 - 现在您必须创建一个空白 sencha touch 应用程序 - 转到命令提示符并编写以下命令 -

**C:\inetpub\wwwroot\touch-2.3.0>sencha -sdk“您提取 SDK 的位置路径”生成应用程序 MyApp“您要创建应用程序的位置路径”**
例如在我的情况下这就像 - " **C:\inetpub\wwwroot\touch-2.3.0>sencha -sdk "C:\inetpub\wwwroot\touch-2.3.0" 生成应用程序 MyApp "C:\inetpub\wwwroot\ITK_2.0"** "

第 5 步 - 在您的 Web 服务器上托管应用程序（我在我的 Windows 8 机器上使用 IIS 8）并点击 URL **"localhost/MyApp/"**。

就这样。

快乐编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T13:20:14.450

这是警告而不是错误。[您可以在此处](http://docs.sencha.com/touch/2-1/#!/guide/command)找到有关命令行工具 @ 的更多信息

# asp.net - 是什么导致 Squishit 重建捆绑包

> ID：14214314
> 
> 赞同：6
> 
> 时间：2013-01-08T11:50:32.753
> 
> 标签：asp.net, squishit

谁能告诉我是什么原因/触发 Squishit 在生产模式下重建捆绑包？

例如，如果我创建以下包，则会按预期创建文件“Site.Master_{GUID}.css”。

```
<%= Bundle.Css()
   .Add("~/css/reset.css")
   .Add("~/css/typography.css")
   .Add("~/css/styles.css")
   .Add("~/MasterPages/Site.Master.css")
   .Render("~/Cache/Site.Master_#.css")
%> 
```

但是，如果我删除文件包文件，它不会被重新创建。我通过反复试验发现，如果我将 web.config 文件更改为

```
<compilation debug="true" targetFramework="4.0" /> 
```

然后回到假

```
<compilation debug="false" targetFramework="4.0" /> 
```

下次请求页面时，将重建捆绑包，但我想知道：

a) Squishit 如何决定应该构建还是重建特定的捆绑包

b) 如果有一种公认的方法可以重置 Squishit 以重建所有捆绑包 - 例如在缓存清除或站点更新之后。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T16:40:37.293

SquishIt 并不真正决定是否应该构建或重建特定的包 - 如果 SquishIt 的缓存中存在包，它假定文件仍然存在。这是设计使然，因为每次访问捆绑缓存时检查文件系统会变得非常昂贵。

因为捆绑包缓存在 HttpRuntime.Cache 中，您可以通过从缓存中清除相关项目来强制重建。所有添加的项目都使用“squishit_”前缀，之后可以使用“css”或“js”来描述资产类型。清除缓存的任何内容都应导致重新构建捆绑包，包括站点重置（您的 web.config 更改会触发）。如果您需要一种在运行时控制它的后门方法，[则](http://brennan.offwhite.net/blog/2008/03/28/aspnet-clearing-all-items-in-the-cache/)可以修改类似的内容以满足您的需求。

会导致重新构建包的另一件事是更改其内容中包含的文件之一。当捆绑包最初添加到缓存中时，这是通过 CacheDependency 控制的。

# linux - 如何在linux中查找用户内存使用情况

> ID：14214315
> 
> 赞同：32
> 
> 时间：2013-01-08T11:50:32.920
> 
> 标签：linux, centos, centos6

我如何在 linux centos 6 中查看用户的内存使用情况

```
For example:
    USER    USAGE
    root    40370
    admin   247372
    user2   30570
    user3   967373 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2015-01-28T14:28:55.123

这个单行代码至少在四个具有不同发行版和版本的不同 Linux 系统上为我工作。它也适用于 FreeBSD 10。

```
ps hax -o rss,user | awk '{a[$2]+=$1;}END{for(i in a)print i" "int(a[i]/1024+0.5);}' | sort -rnk2 
```

关于实现，这里没有 shell 循环构造；这使用关联数组进行`awk`分组和求和。

这是我的一台服务器的示例输出，它运行着相当大的 MySQL、Tomcat 和 Apache。数字以 MB 为单位。

```
mysql 1566
joshua 1186                                                                                  
tomcat 353                                                                                   
root 28                                                                                      
wwwrun 12                                                                                    
vbox 1                                                                                       
messagebus 1                                                                                 
avahi 1                                                                                      
statd 0                                                                                      
nagios 0 
```

警告：与大多数类似的解决方案一样，这仅考虑驻留集 (RSS)，因此它不计算任何共享内存段。

**编辑**：一个更易读的版本。

```
echo "USER                 RSS      PROCS" ; echo "-------------------- -------- -----" ; ps hax -o rss,user | awk '{rss[$2]+=$1;procs[$2]+=1;}END{for(user in rss) printf "%-20s %8.0f %5.0f\n", user, rss[user]/1024, procs[user];}' | sort -rnk2 
```

和输出：

```
USER                 RSS      PROCS
-------------------- -------- -----
mysql                    1521     1
joshua                   1120    28
tomcat                    379     1
root                       19   107
wwwrun                     10    10
vbox                        1     3
statd                       1     1
nagios                      1     1
messagebus                  1     1
avahi                       1     1 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-01-08T12:01:58.340

使用标准工具的每用户内存使用百分比：

```
for _user in $(ps haux | awk '{print $1}' | sort -u)
do
    ps haux | awk -v user=${_user} '$1 ~ user { sum += $4} END { print user, sum; }'            
done 
```

或更精确：

```
TOTAL=$(free | awk '/Mem:/ { print $2 }')
for _user in $(ps haux | awk '{print $1}' | sort -u)
do
    ps hux -U ${_user} | awk -v user=${_user} -v total=$TOTAL '{ sum += $6 } END { printf "%s %.2f\n", user, sum / total * 100; }'
done 
```

第一个版本只是总结了每个进程报告的内存百分比`ps`。第二个版本改为以字节为单位汇总内存，然后计算总百分比，从而获得更高的精度。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-01-08T11:56:45.517

如果您的系统支持，请尝试安装和使用[smem](http://www.selenic.com/smem/)：

```
smem -u

User     Count     Swap      USS      PSS      RSS 
gdm          1        0      308      323      820 
nobody       1        0      912      932     2240 
root        76        0   969016  1010829  1347768 
```

或者

```
smem -u -t -k

User     Count     Swap      USS      PSS      RSS 
gdm          1        0   308.0K   323.0K   820.0K 
nobody       1        0   892.0K   912.0K     2.2M 
root        76        0   937.6M   978.5M     1.3G 
ameskaas    46        0     1.2G     1.2G     1.5G 
```

* * *

```
 124        0     2.1G     2.2G     2.8G 
```

在 Ubuntu 中，可以通过键入安装 smem

```
sudo apt install smem 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-03-03T09:06:15.240

这将返回以 GB 为单位的用户的总 ram 使用量，反向排序

```
sudo ps --no-headers -eo user,rss | awk '{arr[$1]+=$2}; END {for (i in arr) {print i,arr[i]/1024/1024}}' | sort -nk2 -r 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-22T20:05:27.183

您可以使用以下 Python 脚本仅使用 sys 和 os 模块来查找每个用户的内存使用情况。

```
import sys
import os

# Get list of all users present in the system
allUsers = os.popen('cut -d: -f1 /etc/passwd').read().split('\n')[:-1]

for users in allUsers:
    # Check if the home directory exists for the user
    if os.path.exists('/home/' + str(users)):
        # Print the current usage of the user
        print(os.system('du -sh /home/' + str(users))) 
```

# c# - 将“[{a},{b},{c}]”拆分为字符串数组“a,b,c”的最佳方法是什么

> ID：14214317
> 
> 赞同：1
> 
> 时间：2013-01-08T11:50:39.420
> 
> 标签：c#

将“[{a},{b},{c}]”拆分为数组的***最佳***方法是什么，例如：`string``t`

```
t[0] == "a"
t[1] == "b"
t[2] == "c" 
```

将输入字符串视为逐字，方括号和大括号实际上都在那里。

**更新：** 这是我需要拆分的更具体示例

```
[{ pk:"4",id:"4",cb_program_id:"2.0000",DataSource:"1",Status:"0",CutoffDate:"15/10/2012 14:05:04" }, 
{ pk:"3",id:"3",cb_program_id:"2.0000",DataSource:"1",Status:"0",CutoffDate:"15/10/2012 14:05:02" }, ... ] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T11:52:20.280

用于[`String.Split`](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CD8QFjAB&url=http://msdn.microsoft.com/en-us/library/system.string.split.aspx&ei=eQjsUJDrIumb0QWJuYCYAQ&usg=AFQjCNEjWM5hb_GjmluDIrNyKTWBNHozeA&bvm=bv.1357316858,d.d2k)删除所有不需要的字符。

```
"[{a},{b},{c}]".Split(new char[] {'[', ']', '{', '}', ','}, StringSplitOptions.RemoveEmptyEntries); 
```

编辑：在 OP 的编辑之后，@Daniel 的答案更适合维护子字符串的完整性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T11:53:28.440

```
var t = s.Trim('[', ']').Split(',').Select(x => x.Trim('{', '}')).ToArray(); 
```

这将首先删除外部括号，用逗号分隔并删除结果开头和结尾的花括号。

要覆盖嵌入的特殊字符（如逗号或花括号），您需要对它们进行转义，否则将存在可能以多种方式拆分的模棱两可的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T11:55:11.847

这是工作示例：

```
string str = "[{a},{b},{c}]";
string[] t = str.Split(new char[] { '[', ']', '{', '}', ',' },
             StringSplitOptions.RemoveEmptyEntries)
             .ToArray(); 
```

输出：

```
t[0] == "a"
t[1] == "b"
t[2] == "c" 
```

# jquery-ui - 为什么当我单击打开 jquery-ui modal-dialog 时屏幕在第一次打开时向下滚动？

> ID：14214321
> 
> 赞同：0
> 
> 时间：2013-01-08T11:50:43.180
> 
> 标签：jquery-ui, modal-dialog

当我使用 jquery-ui 1.9.1 和 jquery 1.8.2 打开一个默认的 jquery-ui 对话框时，屏幕向下滚动，然后出现对话框。它仅在第一次单击时发生，第二次屏幕不会关闭。

这是我试图打开它的方式：

```
$("#btn").click(function (event) {
    $("#btn").off();  
    Common.dialog();  
    event.preventDefault();  
}); 
```

在 Common.dialog 我有一个默认的 jquery-ui 对话框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:06:06.623

对话框源使用 .load，然后在文档末尾第一次打开它。之后，拨号盘已经加载到内存中，滚动不会发生。

我更正了文件的代码剪切并将其内容放入对象中。

# java - Android java.io.IOException: java.net.URISyntaxException:

> ID：14214322
> 
> 赞同：0
> 
> 时间：2013-01-08T11:50:45.083
> 
> 标签：java, android

当我尝试从我的 android 应用程序连接时，我得到一个`exception`说法。`Java URI Syntax Exception "java.io.IOException: java.net.URISyntaxException: Invalid % sequence: %wl in query at index 88:"`

它似乎`exception`在它所说的 URL 中抛出了 where`"%wl"`并且下面是 URL。有没有办法解决这个问题。

```
http://192.168.111.111:9000/RB/db.svc/upd?LinkId=184617ED1F21&IPs=fe80::1a46:17ff:feed:1f21%wlan0,192.168.1.127,&MNo=0771111111&sPin=000&Status=0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T11:58:38.770

如果你想`%`在你的 URL 中使用，首先你需要做的是对其进行编码。

所以首先你需要在连接之前`%`用`%25`你的字符串`....1f21%wlan0...`替换它`.....1f21%25wlan0....`。

您可以使用以下代码在 Java 中对 URL 进行编码

```
String encodedUrl = java.net.URLEncoder.encode(<your_url>,"UTF-8"); 
```

请查看以下链接以获取更多信息。

[1.如何在java中编码url](http://www.mkyong.com/java/how-to-encode-a-url-string-or-form-parameter-in-java/)

[2.URL编码字符参考](http://www.w3schools.com/tags/ref_urlencode.asp)

**更新 ：**

如果你不想使用 URL 编码器，那么你可以试试这个：

```
yourURL.replaceAll("%", "%25"); 
```

在这里替换单个特殊字符很好，但如果您有许多需要正确 URL 编码的特殊字符，这样做将是一项乏味的任务。

# apache-flex - flex 4 Paddings,ScrollPolicy,borderAlpha,backgroundColor 错误

> ID：14214323
> 
> 赞同：0
> 
> 时间：2013-01-08T11:50:48.740
> 
> 标签：apache-flex, flex4, flex3, flash-builder

我有以下初始代码：

```
<s:TitleWindow xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:mx="library://ns.adobe.com/flex/mx" 
               xmlns:s="library://ns.adobe.com/flex/spark"
                width="800"
                textAlign="left"
                paddingLeft="0"
                paddingTop="0"
                paddingRight="0"
                paddingBottom="0"
                borderAlpha="1"
                verticalScrollPolicy="off"
                horizontalScrollPolicy="off"
                creationComplete="creationComplete(event)"
                backgroundColor="{FlexGlobals.topLevelApplication.canvasBackgroundColor}"> 
```

我在 Paddings、ScrollPolicy、borderAlpha 和 backgroundColor 中有这样的错误

**无法解析组件类型 spark.components.TitleWindow 的属性“...”。** 有没有一种快速的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:11:59.473

如果它无法解析该属性，则意味着该属性不适用于该组件。搜索向 spark 组件添加填充。

尝试向 TitleWindow 添加布局：

```
<s:layout>
        <s:VerticalLayout paddingLeft="10" paddingRight="10" paddingTop="10" paddingBottom="10" />
    </s:layout> 
```

乙

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:53:24.683

ScrollPolicy 是一种样式设置：

```
<fx:Style>
    @namespace s "library://ns.adobe.com/flex/spark";

    s|TitleWindow #scroller {
        horizontalScrollPolicy: off;
        verticalScrollPolicy: off;
    }
</fx:Style> 
```

# php - 从 .txt 文件中读取 - 连接 - 回显内容会自动插入空格吗？

> ID：14214328
> 
> 赞同：0
> 
> 时间：2013-01-08T11:51:08.270
> 
> 标签：php, html

我正在从稍后在页面上显示的文本文件中读取内容，这是我的代码：

```
$lines = file("content.txt");
$i=1;
foreach($lines  as $line ){

$var["line" . $i] = $line;
$i++;
}
extract($var); 
```

文本文件包含以下格式的内容：

```
bla1
bla2 
```

等等，域后面没有空格，只是一个换行符，现在我想连接内容并显示它，所以我这样做：

```
$as1 = $line1.$line2;
echo $as1; 
```

但不是预期的结果

```
Bla1Bla2 
```

我明白了

```
Bla1 Bla2 
```

我究竟做错了什么 ？我可以保证文本文件中没有空间，既不在内容后面，也不在内容前面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:52:58.993

没有空间；但除非你告诉 file() 函数，否则每行末尾都有一个换行符

```
$lines = file("content.txt", FILE_IGNORE_NEW_LINES); 
```

浏览器会将换行符呈现为空格，除非在 a or 块内

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:52:41.887

用于`trim`这种情况

```
$as1 = trim($line1).trim($line2);
echo $as1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T11:56:25.290

您可以尝试修剪您的输入...

```
$lines = file("content.txt");
$i=1;
foreach($lines  as $line ){

$var["line" . $i] = trim($line);
$i++;
}
extract($var); 
```

# maven - Python 对 intellij 中 maven 模块的支持

> ID：14214331
> 
> 赞同：1
> 
> 时间：2013-01-08T11:51:26.993
> 
> 标签：maven, python-3.x, intellij-idea

我在 windows 上使用 intellij IDEA 版本 11.1.5，python 插件版本是 2.9.2

我正在使用grinder maven 插件使用grinder 运行性能测试。它只支持 python(Jython) 运行测试。即使我已经安装了 python 插件，我也没有得到任何关于 python 开发的自动建议。Python 文件也显示为文本文件。

是否有任何其他配置可以启用 python 开发的自动建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:55:47.513

Your file types are not configured correctly, `.py` is most likely assigned to **Text files** instead of **Python files**, you can fix it in `File` | `Settings` | `File Types`.

There is no support for tests running via Maven, but you can create your own Run/Debug configuration for Python unit tests in IDEA.

# iphone - TestFlight 集成期间的 Testflight 应用程序下载错误

> ID：14214332
> 
> 赞同：1
> 
> 时间：2013-01-08T11:51:29.137
> 
> 标签：iphone, sdk, testflight

这是测试飞行服务器错误。请稍后再试。在通过 ipad mini 安装应用程序期间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:55:20.013

将您的 iPad Mini 连接到 XCode，打开`Organizer`，在侧面板中找到您的设备并打开其`Console`. 清除日志并尝试，下载应用程序并查看任何日志消息。它会给你一个良好的开端。

# php - X-Mailer 的邮件功能： PHP/' 。phpversion() 不支持内容类型 html

> ID：14214333
> 
> 赞同：1
> 
> 时间：2013-01-08T11:51:40.967
> 
> 标签：php, email-headers

在我的注册页面中，我对邮件内容使用了以下编码。

```
$to =$email;

$subject = "Welcome to our site. Verify your Email address";

$body= "<table>

Dear $firstname $lastname,

Welcome to site name!

You have signed up for a new user account at JumpingEyes.  Please click the following activation link to complete your user registration process.

Your Email: $email

Activation Link:

<

$jeob->urlpath/activelink.php?status=1&mailid=$email

> 

Please Note: If you encounter any problems clicking on this link, please try typing it manually into your browser. Once you have been authenticated, you will have access to your account.

Sincerely,

site Team

*This is a system generated email - PLEASE DO NOT reply to this email*</table>";

$headers = 'From: usersupport@JumpingEyes.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

mail($to,$subject,$body,$headers);

        $display = "<div class='error'>Thank you for creating a new account with JumpingEyes.com.  A confirmation email has been sent to $email for you to activate your new account<br><span style='font-size:12px;font-weight:normal;'><a href='index.php'>Continue....</span></a></div>"; 
```

如果我们收到邮件，它会显示以下输出，并且不考虑 html 标签。如果我们删除表格标签，它不会发送邮件。

而且我也使用过`$headers[] = "Content-type: text/plain; charset=iso-8859-1";`，但邮件功能无法正常工作。任何人都可以帮助我解决这个问题。

```
<table>

Dear Nandhu D,

Welcome to site!

You have signed up for a new user account at JumpingEyes.  Please click the following activation link to complete your user registration process.

Your Email: rithikapsks@gmail.com

Activation Link:

<

http://domain.com//activelink.php?status=1&mailid=rithika@gmail.com

>

Please Note: If you encounter any problems clicking on this link, please try typing it manually into your browser. Once you have been authenticated, you will have access to your account.

Sincerely,

siteTeam

*This is a system generated email - PLEASE DO NOT reply to this email*</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:50:11.620

用下面替换标题并尝试..

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= 'From: Mailer <mailer@example.com>' . "\r\n"; 
```

# php - 表单中的选项值，用于在 DB 中搜索两个值

> ID：14214338
> 
> 赞同：3
> 
> 时间：2013-01-08T11:51:54.177
> 
> 标签：php, html, mysql

我搜索了档案，[这个问题](https://stackoverflow.com/questions/12840366/having-multiple-values-within-an-option-tag)似乎最接近我自己的问题。但是，不幸的是，我无法从中得出解决方案。我有一个用户填写的表单，用于从大型测验数据库创建问题列表。这些问题按科目分类并按难度分级（1、2、3、4）。用户可以通过选择主题和难度来创建问题列表。它工作正常。但是，我们在某些科目上没有很多 1 年级的问题，因此希望将 1 和 2 组合成一个“简单”等级。表单的选项列表工作正常，如下所示，但我希望第二个选项搜索值 1&2 而不仅仅是 2。这是相关的表单代码（它不包括所有主题细节，只是难度选择）：

```
<form action="" method="post" id="quizbuilder">
  <table width="400" border="0">
  <tr>
    <td>number of questions</td>
    <td><input name="quizSize" type="number" value="20" size="2" maxlength="2" min="1" max="50" /></td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>difficulty</td>
    <td><select name="grade">
    <option value="%" selected="selected">any</option>
    <option value="2">easy</option>
      <option value="3">medium</option>
      <option value="4">difficult</option>
    </select>
    <td>&nbsp;</td>
  </tr>
  <tr> 
```

查询如下所示：

```
mysql_select_db($database_qbquery, $qbquery);
$query_userquiz = sprintf("SELECT * FROM questions WHERE (grade LIKE %s) AND (topic1 LIKE %s OR topic2 LIKE %s OR topic3 LIKE %s) ORDER BY RAND() LIMIT %s", GetSQLValueString($userGrade_userquiz, "text"),GetSQLValueString($userTopic_userquiz, "text"),GetSQLValueString($userTopic_userquiz, "text"),GetSQLValueString($userTopic_userquiz, "text"),GetSQLValueString($userQuizSize_userquiz, "int"));
$userquiz = mysql_query($query_userquiz, $qbquery) or die(mysql_error());
$row_userquiz = mysql_fetch_assoc($userquiz);
$totalRows_userquiz = mysql_num_rows($userquiz); 
```

当然，我想做的只是：

```
<option value="1,2">easy</option> 
```

但我知道这行不通，因为它被读取为字符串而不是值。任何帮助将不胜感激，我现在​​头晕目眩，看起来应该很简单，但对我来说不是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:36:35.877

正如我在评论中发布的那样，您可以在使用它之前轻松爆炸值：

```
$value = $_POST['name'];
$name = explode( ',', $value ); 
```

现在你在这里有一个数组，有 1 个或多个值，你可以根据需要使用它们。但有点不清楚，你期望的最终代码是什么。

PS：记得在将它们提供给您的查询之前进行一些额外的 sql 注入检查。

# sql-server-2008 - 库存管理

> ID：14214339
> 
> 赞同：0
> 
> 时间：2013-01-08T11:51:55.867
> 
> 标签：sql-server-2008

我有 2 张桌子，`INWARDS`并且`OUTWARDS`. 我必须显示每个不同库存的每个日期的总内向和总外向数以及该日期剩余的库存余额。我不需要按任何日期分组，我只想知道库存中的库存总数。

我的查询如下：

```
SELECT
    I.Date as'Date',
    P.ResourceName as 'Item Name',
    P.ResourceRate as'Rate',
    i.Qty as Inwards Quantity',
    (   select qty
        from Outwards_master
        where I.Date=S.Date and I.Nameofitem =S.Nameofitem
    ) as 'Outwards Quantity',
    (   select (sum(i.qty)-sum(S.Qty))
        from Inwards_Master
            inner join Outwards_Master
            on i.Nameofitem=S.Nameofitem
    ) as 'Balance'
From Resource_Master P, Inwards_Master I, Outwards_Master S
WHERE (I.Nameofitem= P.ResourceName) and P.TenderCode = 1 
```

这个查询给了我一个错误。问题是什么？

错误是：

消息 8120，级别 16，状态 1，第 1 行列“Inwards_Master.Date”在选择列表中无效，因为它既不包含在聚合函数或 GROUP BY 子句中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:03:40.540

我正在根据您的查询猜测您想要这样的东西：

```
SELECT I.Date as Date, 
  P.ResourceName as ItemName,
  P.ResourceRate as Rate,
  i.Qty as InwardsQuantity,
  s.qty as OutwardsQuantity,
  i.qty-S.Qty as Balance,
  O.UnitSymbol As ItemUnit
FROM UnitMaster O
INNER JOIN Resource_Master P
  ON O.UnitCode = P.Unitcode
INNER JOIN Inwards_Master I
  ON I.Nameofitem= P.ResourceName
INNER JOIN Outwards_Master S 
  ON I.Date=S.Date 
  AND I.Nameofitem =S.Nameofitem
WHERE P.TenderCode=1 
```

如果要显示所有项目，则可能需要使用`LEFT JOIN`：

```
SELECT I.Date as Date, 
  P.ResourceName as ItemName,
  P.ResourceRate as Rate,
  i.Qty as InwardsQuantity,
  s.qty as OutwardsQuantity,
  i.qty-S.Qty as Balance,
  O.UnitSymbol As ItemUnit
FROM UnitMaster O
INNER JOIN Resource_Master P
  ON O.UnitCode = P.Unitcode
LEFT JOIN Inwards_Master I
  ON I.Nameofitem= P.ResourceName
LEFT JOIN Outwards_Master S 
  ON I.Date=S.Date 
  AND I.Nameofitem =S.Nameofitem
WHERE P.TenderCode=1 
```

编辑＃1，根据您的评论，我无法完全确定问题所在，但您可以尝试在子查询中获取总量：

```
SELECT I.Date as Date, 
  P.ResourceName as ItemName,
  P.ResourceRate as Rate,
  i.TotalInQty as InwardsQuantity,
  s.TotalOutQty as OutwardsQuantity,
  i.TotalInQty-S.TotalOutQty as Balance,
  O.UnitSymbol As ItemUnit
FROM UnitMaster O
INNER JOIN Resource_Master P
  ON O.UnitCode = P.Unitcode
LEFT JOIN
(
  select sum(i.Qty) TotalInQty, Nameofitem
  from Inwards_Master I
  group by Nameofitem
) I
  ON I.Nameofitem= P.ResourceName
LEFT JOIN
(
  select sum(s.qty) TotalOutQty, Nameofitem
  from Outwards_Master S 
  group by s.Nameofitem
) S
  ON I.Date=S.Date 
  AND I.Nameofitem =S.Nameofitem
WHERE P.TenderCode=1 
```

# css - 悬停不适用于整个街区

> ID：14214342
> 
> 赞同：0
> 
> 时间：2013-01-08T11:52:05.063
> 
> 标签：css, hover

我正在尝试为整个锚元素创建悬停效果，但它不起作用，一旦鼠标离开文本，下拉菜单就会消失：

[这里](http://amaechiperformance.tangent-design.com/)是测试站点。

CSS：

```
.menu{}
.menu li{float:left;margin-right:24px;list-style-type:none;height:46px;}
.menu li a{width:100%;text-transform: uppercase;color:#39444A;text-decoration:none;font-weight: bold;font-size:18px;display:block;height:46px;}
.menu li a:hover{border-bottom-style: solid;border-bottom-width: 2px;border-bottom-color: #E87D05;color:#E87D05;height:46px;display:block;}
ul.sub_navigation , .sub_navigation
{
    position: absolute;
    display: none;
    z-index: 100;
    background-image: url('/images/menu-bg-png.png');
    background-repeat:repeat-y;
    padding:10px 0px 10px 28px;

 } 
```

我在哪里弄错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:05:22.987

CSS（添加）：

```
.menu li a {
    position: relative;
    z-index: 5;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:14:15.463

在您的情况下，是因为 div 与 div`#slider-container`重叠`#header`。我看到这`#slider-container`是绝对的。

1.  在这种情况下，您可以在属性上添加额外的 20 - 30px`TOP`并去掉 padding-top。

2.  另一件事就是在div上添加`position:relative`和`z-index:10`（例如）`#header`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T12:05:02.187

锚元素具有文本的大小，仅此而已。链接和链接之间的空间是 li 的右边距。

消除

```
li {margin_right: 40px} 
```

并设置

```
a {padding_right: 40px} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T12:06:19.120

尝试这个：

```
.menu > li:hover .sub_navigation {
    display: block;
} 
```

# html - 如何在多个列表项前添加彩色方块？

> ID：14214353
> 
> 赞同：1
> 
> 时间：2013-01-08T11:52:38.813
> 
> 标签：html, css

如何设置这样的列表项样式？

![在此处输入图像描述](../Images/78715875edc858e5bb10ccc04f7cb1e3.png)

所以在文本之前有某种彩色方块。我正在研究这个但找不到它：

[http://www.w3schools.com/cssref/pr_list-style-type.asp](http://www.w3schools.com/cssref/pr_list-style-type.asp)

它们不必是列表项，但在我看来它很方便，因为它是某种列表，我想在同一行中设置样式和显示，而不是像上图那样在不同的行中显示。

我试过这个：

```
<ul class="ordering">
<li><div></div><span>One</span></li>
<li><div></div><span>Two</span></li>
<li><div></div><span>Three</span></li>
</ul> 
```

和这个 css ：

```
.ordering {
    list-style:none;
    min-width:250px;
}
.ordering div{
         width: 12px; height: 12px; float: left;
    }
.ordering span{
        display: block;
        float: left;
        font-size: 11px;
        line-height: 11px;
        padding-left: 5px;
    } 
```

我遇到的问题是我无法将它们分开（它们粘在一起），另一个问题是当我有许多不适合`ordering`班级大小的物品时，它们会断线，但正方形仍然在前一行所以 square + text 不被视为一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:56:43.450

我认为你不需要浮动任何东西：

```
.ordering div {
     width: 12px; height: 12px; display: inline-block;
}

.ordering span{
    display: inline-block;
    font-size: 11px;
    line-height: 11px;
    margin-left: 5px;
} 
```

（如果您希望它在 IE 7 及更早版本中工作，您需要将其更改`<div>`为 a`<span>`或其他一些内联元素）例如：

```
.ordering span.colouredSquare {
     width: 12px; height: 12px; display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:59:29.123

> 我遇到的问题是我无法将它们分开（它们粘在一起），另一个问题是当我有许多不适合订购类大小的物品时，它们会断线但正方形仍然在前一个line so square + text 不被视为一部分

你需要做的就是给你的`li`元素一个 display 属性`display: inline-block`。这应该可以解决您的间距问题并使正方形和文本作为“块”移动，即

```
.ordering li
{
    display: inline-block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T12:01:19.980

你已经以正确的方式尝试了。唯一额外的事情是您可以最小化 html 结构并使用`nth-child()`属性

**HTML**

```
<ul class="ordering">
<li><span></span>One</li>
<li><span></span>Two</li>
<li><span></span>Three</li>
</ul> 
```

**CSS**

```
ul.ordering {    list-style:none;   min-width:250px; }
ul.ordering li{ 
  display:block; 
  clear:left; 
  vertical-align:middle;  
  font-size: 20px;
   line-height: 20px; 
  padding-left: 5px; }
ul.ordering li span{  width: 12px; height: 12px; background:red;  display:inline-block; margin-right:6px }
ul.ordering li:nth-child(2) span{ background:green !important;  }
ul.ordering li:nth-child(3) span{ background:blue !important;  } 
```

**[现场演示](http://jsfiddle.net/LY7J7/2/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T12:20:34.780

或者，您可以通过伪元素的力量稍微清理您的标记。

**HTML**（注意：列表项只有一个子元素）

```
<ul>
  <li><p>Bender</p></li>
  <li><p>Fry</p></li>
  <li><p>Leela</p></li>
</ul> 
```

**CSS**

```
ul { margin: 10px; }
li { position: relative; }

p:before {
  background: #bb3333;
  content: ".";
  display: inline-block;
  height: 10px;
  margin: 0 5px 0 0;
  text-indent: -10000px;
  width: 10px;
}

li:nth-child(2) p:before { background: #33bb33; }
li:nth-child(3) p:before { background: #3333bb; } 
```

看我的小提琴：http: [//jsfiddle.net/uNR2M/2/](http://jsfiddle.net/uNR2M/2/)

而不是`nth-child`我认为我会应用类，因为它的性能稍微好一些。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-08T11:57:03.910

这应该可以解决问题：

```
<li>
    <div></div><span>One</span>
    <div class="clearfix"></div>
</li> 
```

您应该在结束 li 之前添加一些 clearfix。

```
.clearfix {
    clear: both;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-08T12:09:12.713

我不会使用本机列表要点，因为这些要点不可样式化。您可以使用嵌套的 div 和 span，但 IMO 设置`:before`伪元素的样式更简洁，例如：

[演示](http://jsbin.com/ezexeg/3/)

html:

```
<ul>
    <li>item</li>
    <li class="red">item</li>
    <li class="blue">item</li>
</ul> 
```

CSS：

```
li { 
    position: relative; 
    list-style: none; 
    display: inline-block; 
    margin-left: 30px;
    }
li:before {
    content: ' ';
    width: 10px;
    height: 10px;
    position: absolute;
    left: -20px;
    top: 5px;
    background: green;
}
.red:before { background: red; }
.blue:before { background: blue; } 
```

# java - 在java中查找两个时间之间的差异

> ID：14214361
> 
> 赞同：0
> 
> 时间：2013-01-08T11:53:03.453
> 
> 标签：java

> **可能重复：**
> [如何在 Java 中将毫秒转换为“X 分钟，x 秒”？](https://stackoverflow.com/questions/625433/how-to-convert-milliseconds-to-x-mins-x-seconds-in-java)
> [计算两个 Java 日期实例之间的差异](https://stackoverflow.com/questions/1555262/calculating-the-difference-between-two-java-date-instances)

我有这样的功能：

```
 public String setDateAndTime(int h, int m, int s,int amPm) {
    TimeZone nst = TimeZone.getTimeZone("GMT+5:45");
    Calendar calendar1 = new GregorianCalendar(nst);
    Date currentTime1 = new Date();
    calendar1.setTime(currentTime1);

    calendar1.set(Calendar.HOUR, h);
    calendar1.set(Calendar.MINUTE, m);
    calendar1.set(Calendar.SECOND, s);
    calendar1.set(Calendar.YEAR, calendar1.get(Calendar.YEAR));
    calendar1.set(Calendar.MONTH, calendar1.get(Calendar.MONTH));
    calendar1.set(Calendar.DAY_OF_MONTH, calendar1.get(Calendar.DAY_OF_MONTH));
    calendar1.set(Calendar.AM_PM, amPm);

    DateFormat formatter = new SimpleDateFormat("hh:mm:ss a");
    String date = formatter.format(calendar1.getTime());

    return date;
} 
```

通过这个函数我创建了两个日期（字符串）

```
String s1=setDateAndTime(12,00,00,1);//12:00:00 PM
String s2=setDateAndTime(3,15,45,0);//3:15:45 AM 
```

现在如何找到 s1 和 s2 之间的差异，我还需要小时、分钟和秒的剩余时间，以便我可以做进一步的处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T11:58:48.947

您可以通过调用以毫秒为单位获取时间`getTime()`。然后比较`long`值。 `milliis/1000`给出秒，`millis/60/1000`给出分钟，`millis/3600/1000`给出小时等。

你也可以使用像 JodaTime 这样的 3rd 方库，但是如果你需要这个一次性的 Joda 就太多了。

# ruby-on-rails - 满足以下参数时的 ActionMailer 交付

> ID：14214363
> 
> 赞同：0
> 
> 时间：2013-01-08T11:53:21.473
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionmailer

请原谅我问我认为什么是一个相当深入的挑战（无论如何现在对我来说都很好）

我有一个小应用程序，允许用户通过提醒我按钮注册他们的兴趣来签入、签出并希望在重新签入一本书时收到电子邮件

到目前为止，我已经设置了 actionmailer（基本设置）

```
class ReminderMailer < ActionMailer::Base
default from: "email address"

def remind_email(book)
@book = book
@url = "http://localhost:3000"
mail(:to => @book.user.email, :subject => "Book Reminder")

end 
```

我已经准备好发送电子邮件的所有配置，因为我已经通过设计这样做了。

我还创建了邮件模板。这是我坚持的逻辑。

因此，当用户签出一本书时，我将其传回给模型

```
<%= form_for @book do |f| %>
<%= f.label :checked_out, "Check Book Out?" %>
<%= f.check_box :checked_out, {}, true %>
<%= f.hidden_field :user_id, :value => current_user.id %>
<%= f.hidden_field :checked_out, :value => true %>
<%= f.submit 'Checkout' %>
<% end %> 
```

报到

```
<%= form_for @book do |f| %>
<%= f.label :checked_out, "Check Book Back In" %>
<%= f.check_box :checked_out, {checked: false}, false  %>
<%= f.hidden_field :user_id, :value => nil %>
<%= f.hidden_field :checked_out, :value => false %>
<%= f.submit 'Check In' %>
<% end %> 
```

注册兴趣

```
<%= form_for @book do |f| %>
<%= f.label :remind_me, "let Me know when book back in" %>
<%= f.check_box :remind_me, {checked: false}, false  %>
<%= f.hidden_field :remind_me, :value => current_user.id %>
<%= f.submit 'Remind Me' %>
<% end %> 
```

所以我的想法是，当您注册您的兴趣时，您的用户 ID 会被放入remind_me 列中，而我想要实现的是，当 check_out 字段为 false 并且 book.user_id 回到 nil 时，我希望电子邮件发送user_id 在remind_me 列中的用户

我是否以正确的方式思考这个问题？

如果有人可以提供帮助，我将不胜感激，以便我可以从中学习，然后继续练习，直到我了解发生了什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T14:44:39.840

有2种方式来回答：

第一个，不要使用表单签入一本书，而只是调用一个方法。例如：您将表单替换为在控制器中调用新方法的链接：

```
<%= link_to "check in", check_in_book_path(@book.id) %> 
```

在您的 books_controller 中，您调用一个模型方法来签入本书：

```
def check_in
  @book = Book.find params[:id]
  @book.check_in!
  redirect_to book_path(@book)
end 
```

在您的图书模型中：

```
def check_in!
  self.user = nil
  self.checked_out = false
  if self.save
    RemindMailer.remind_mail(self).deliver
  end
end 
```

不要忘记为您的新控制器方法添加路由。

第二种方式，如果你保持你的形式，更短但更复杂。您需要向模型添加一个回调，以验证数据是否更改。例如，在你的书模型中：

```
after_save :send_mail_if_check_in

def send_mail_if_check_in
  if !self.checked_out && self.changes[:user_id] && self.user.nil?
    RemindMailer.remind_mail(self).deliver
  end
end 
```

我更喜欢第一个解决方案，因为它似乎是一个更易于维护的状态机。

我希望这有帮助

# playframework-2.0 - 如何在 Play 2 中呈现 javascript 模板？

> ID：14214364
> 
> 赞同：1
> 
> 时间：2013-01-08T11:53:21.617
> 
> 标签：playframework-2.0

在这里玩新手。

在 Play 文档中声称 Play 模板可以是任何基于文本的格式。如果我想使用 javascript 模板或纯文本模板而不是 html 模板，它是如何工作的？

在 Rails 中，我可以有不同格式的不同视图（模板）。例如，我可以有一个`people/index.html.erb`使用部分调用的`_list.html.erb`，如下所示：

```
<h1>People</h1>
<ul id="people">
  <%= render "list" %>
</ul> 
```

然后我可以有一个`people/index.js.erb`使用相同的部分，看起来像这样：

```
$('#people').html('<%= escape_javascript(render("list")) %>'); 
```

如果客户端需要渲染整个页面，它可以发送一个接受 html 文档的请求，应用程序将提供 html 视图。如果OTOH客户端只需要更新部分页面，它可以发送一个接受脚本的请求，应用程序将提供js视图。这是非常聪明的恕我直言，我想在 Play 中做类似的事情。

我天真地尝试的是创建一个名为的模板`index.scala.js`，然后调用`Ok(views.js.index("Hello world"))`. 不幸的是，这不起作用。我得到一个错误`object js is not a member of package views`。

在 Play 2 中是否有惯用的方法来实现这一点？

# php - 按域名过滤电子邮件

> ID：14214372
> 
> 赞同：0
> 
> 时间：2013-01-08T11:53:37.150
> 
> 标签：php, arrays

可以说我有两个数组-

```
$EmailList1 = array("abc@domain1.com", "def@domain2.com", "ghi@domain3.com");
$EmailList2 = array("jkl@domain1.com", "mno@domain4.com", "pqr@domain5.com"); 
```

现在我希望我的新数组是**[mno@domain4.com, pqr@domain5.com]**

**省略jkl@domain1.com**的原因是因为它的域*(domain1.com)*已经存在于`$EmailList1`

我的方法是首先获取 的所有域`$EmailList1`，将其存储到一个数组中，遍历 的每个项目，`$EmailList2`然后得到结果。

这是正确的方法还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:07:57.007

所有你需要的是

```
$EmailList1 = array("abc@domain1.com","def@domain2.com","ghi@domain3.com");
$EmailList2 = array("jkl@domain1.com","mno@domain4.com","pqr@domain5.com");

$diff = array_udiff($EmailList2, $EmailList1, function ($a, $b) {
    return strstr($a, '@') === strstr($b, '@') ? 0 : 1;
});

echo "<pre>";
var_dump($diff); 
```

输出

```
array (size=2)
  1 => string 'mno@domain4.com' (length=15)
  2 => string 'pqr@domain5.com' (length=15) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:58:36.750

尝试：

```
$uniqueEmailsArray = array_unique(array_merge($EmailList1 , $EmailList2)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T12:05:20.460

尝试这个 -

```
<?php
$EmailList1 = array("abc@domain1.com", "def@domain2.com", "ghi@domain3.com");
$EmailList2 = array("jkl@domain1.com", "mno@domain4.com", "pqr@domain5.com");

foreach($EmailList1 as $email){
  $emailArray = explode('@',$email);
  $domainArray[] = $emailArray[1];
}

$domains = array_unique($domainArray);

foreach($EmailList2 as $email){
  $emailArray = explode('@',$email);
  if(!in_array($emailArray[1], $domains) && !array_search($emailArray[1], $domains)){
    $sorted_emails[] = $email;
  }
}

print_r($sorted_emails);
?> 
```

# asp.net - 不同浏览器中的可滚动 GridView

> ID：14214375
> 
> 赞同：0
> 
> 时间：2013-01-08T11:53:39.340
> 
> 标签：asp.net, html, css

我创建了一个可滚动的网格视图。所以我创建了一个表格，它是网格标题的副本。我用像素给每个宽度属性。但它在不同的浏览器中工作方式不同。任何帮助表示赞赏。

![这是照片](../Images/003de66964116093328e9b09fddf8b93.png) 这是 Grid 标头的标记。

```
<table  cellpadding="0" cellspacing="0">
            <tr>
                <th width="26px">
                </th>
                <th width="152px">
                    Sosial sığorta nömrəsi
                </th>
                <th width="122px">
                    Soyadı
                </th>
                <th width="121px">
                    Adı
                </th>
                <th width="120px">
                    Atasının adı
                </th>
                <th width="50px">
                    Cinsi
                </th>
                <th width="100px">
                    Doğum tarixi
                </th>
                <th width="122px">
                    Uçota düşmə tarixi
                </th>
                <th width="102px">
                    SUN (köhnə)
                </th>
                <th width="150px">
                    Sığorta edənin VÖEN-i
                </th>
                <th width="102px">
                    SUN
                </th>
                <th width="102px">
                    Ölüm tarixi
                </th>
            </tr>
        </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:36:56.453

正如 Blachshma 所说，您只能使用一个表格来修复所有浏览器的列宽相同......而且我认为，使表格/网格可滚动是一项简单的任务......

尝试这个..

```
<div style="max-width:500px;overflow:auto;">

    // Here, HTML code for Table or Gridview

</div> 
```

希望，它可以帮助你。！！谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:00:16.020

而不是创建 2 个表，一个用于标题，另一个用于数据 - 只需创建一个表......

像这样的东西应该让所有列的宽度都正确：

```
<table  cellpadding="0" cellspacing="0">
        <tr>
            <th width="26px">
            </th>
            <th width="152px">
                Sosial sığorta nömrəsi
            </th>
           .....
            <th width="102px">
                Ölüm tarixi
            </th>
        </tr>
        <tr> <!-- Enter data here -->
        </tr>
        <tr> <!-- Enter data here -->
        </tr>
    </table> 
```

# android - 需要有关 Android 上的“不受信任的服务器证书”错误的更多信息

> ID：14214376
> 
> 赞同：2
> 
> 时间：2013-01-08T11:53:41.953
> 
> 标签：android, ssl

我正在开发一个 iPhone/Android 应用程序。有一天，我注意到其中一部 Android 手机拒绝向存在证书问题的服务器执行 http 请求。响应正文很简单，“不受信任的服务器证书”。我在一些文章中看到过这个错误信息。问题是，这只发生在**某些**Android 手机上，而不是全部。所以我想知道：

1.  这是可以在手机上打开和关闭的用户偏好（类似于“拒绝与证书问题的服务器交谈”）吗？如果是这样，我在哪里可以找到它？默认情况下是打开还是关闭？
2.  如果这只是在某些 Android 手机上强制执行的功能，那么市场上有多少百分比的 Android 手机具有此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:09:45.127

在任何 android 版本中，我都不知道您所要求的设置。我希望大多数应用程序使用默认的 HTTPS 处理程序。

不受信任的服务器证书可能是该证书不在该设备的密钥库中。如果使用 Apache HttpClient 而不是 HTTPUrlConnection，则可能会以不同方式处理此错误。可能是系统只是拒绝连接，因为它无法验证服务器的有效性。

不同的 android 版本在 keystore 中有不同的证书。似乎随着 android 版本的发布，最新的证书被放入该版本的密钥库中。它可能是早期版本的 android，没有您要查找的证书。

大多数 android 设备 (~45%) 都在运行 Gingerbread (android 2.3)，它具有较旧的证书列表。紧随其后的是较新的 android 4.0（冰淇淋和更高版本），它具有更简单的下载和安装服务器证书的方法。

# c++ - 在 ACE 6.1 中找不到 ACE_RCSID

> ID：14214377
> 
> 赞同：2
> 
> 时间：2013-01-08T11:53:43.480
> 
> 标签：c++, ace

ACE_RCSID 是一个在 ACE5.5 中可用于某些登录目的的函数。这在 ACE 6.1 中不存在，在 ACE 6.1 中是否有与此类似的任何其他等效功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:23:50.290

不，该支持已被删除，我们在 ACE 中不再有类似的东西。

# objective-c - 日期计算中的语法错误

> ID：14214378
> 
> 赞同：1
> 
> 时间：2013-01-08T11:53:50.090
> 
> 标签：objective-c, ios, xcode

我在 Xcode 中使用以下代码：

```
(void)updateLabel 
{
    NSDate* now = [NSDate date];
    int hour = 23 - [[now dateWithCalendarFormat:nil timeZone:nil] hourOfDay];
    int min = 59 - [[now dateWithCalendarFormat:nil timeZone:nil] minuteOfHour];
    int sec = 59 - [[now dateWithCalendarFormat:nil timeZone:nil] secondOfMinute];
    countdownLabel.text = [NSString stringWithFormat:@"%02d:%02d:%02d", hour, min,sec];
} 
```

并收到以下错误。我怎样才能解决这个问题？

> 错误：二进制的无效操作数 - （有'int'和'id'）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:58:20.563

您必须以这种方式使用：-

```
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *dateComponents = [gregorian components:(NSHourCalendarUnit  | NSMinuteCalendarUnit | NSSecondCalendarUnit) fromDate:[NSDate date]];
NSInteger hour = [dateComponents hour];
NSInteger minute = [dateComponents minute];
NSInteger second = [dateComponents second];
[gregorian release]; 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:58:01.207

使用这种方式

```
NSDate* now = [NSDate date];

NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *dateComponents = [gregorian components:(NSHourCalendarUnit  | NSMinuteCalendarUnit | NSSecondCalendarUnit) fromDate:now];
long hour =23-[dateComponents hour];
long min =59-[dateComponents minute];
long sec =59-[dateComponents second];

NSString *str = [NSString stringWithFormat:@"%02ld:%02ld:%02ld", hour, min,sec];
NSLog(@"--> %@",str); 
```

# spring - 从 RequestContextHolder.currentRequestAttributes 检索手动设置的请求属性

> ID：14214379
> 
> 赞同：1
> 
> 时间：2013-01-08T11:53:57.833
> 
> 标签：spring, httprequest

在我的 Servlet 过滤器代码中，我在 HttpServletRequest 对象中设置了一个属性：

```
request.setAttribute("testname", "name"); 
```

我知道，使用*RequestContextHolder*我们可以从直接来自浏览器的请求中检索属性。但是我们能否使用 RequestContextHolder.currentRequestAttributes 检索我在请求中手动设置的上述属性：

```
RequestAttributes cr = RequestContextHolder.currentRequestAttributes();
if (null != cr) {
 cr.getAttribute("testname",RequestAttributes.SCOPE_REQUEST);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:01:59.427

不确定我是否理解你的问题。

```
RequestAttributes requestAttributes = RequestContextHolder.getRequestAttributes();
HttpServletRequest request = ((ServletRequestAttributes) requestAttributes).getRequest();
request.getAttribute("testname"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-28T12:21:58.193

是的，您可以使用**RequestContextHolder**检索任何手动设置的属性。
如果您在`request.setAttribute("testname", "name")`某处设置属性，则可以使用**RequestContextHolder**使用以下代码检索它：-

```
RequestContextHolder.getRequestAttributes().getAttribute("testname", RequestAttributes.SCOPE_REQUEST); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-16T21:25:46.533

```
final HttpServletRequest currentRequest = ((ServletRequestAttributes) RequestContextHolder.currentRequestAttributes()).getRequest();
    String ProjectContext = currentRequest.getContextPath(); 
```

碰巧访问此页面以解决其他问题。

# database-design - 在数据库中复制数据 - Web 应用程序项目

> ID：14214384
> 
> 赞同：1
> 
> 时间：2013-01-08T11:54:08.443
> 
> 标签：database-design, design-principles

我和 2 个朋友正在开始一个项目，一个简单的社交网络应用程序。困扰我的问题是我们有一个表`Wallet`，它将存储两个用户之间所有交易值的总和。

```
TABLE WALLET:
ID,
UserID,
FriendID,
TotalDebtAmount 
```

根据以前版本的经验，我们决定复制钱包条目，因此如果总共`User1`欠`User2`200 美元，`Wallet`将有 2 个条目：

```
ID  :  UserID  :  FriendID  :  TotalDebtAmount
1      User1      User2           -200
2      User2      USer1            200 
```

这在创建所有用户债务和信用的列表时会很有帮助，因为我们可以只选择所有条目，`WHERE UserID=user`. 如果金额为正，我们的朋友欠我们，如果为负，我们欠我们的朋友。

以前的概念是这样的：

```
TABLE WALLET:
ID,
CreditorUserID,
DebtorUserID,
TotalDebtAmount 
```

欠`User1`200`User2`美元将生成一个条目：

```
ID  :  CreditorUserID  :  DebtorUserID  :  TotalDebtAmount
1      User1              User2               -200 
```

但是选择所有信用和债务将需要`WHERE CreditorUserId=user OR DebtorUserID=user`并且在显示它时我们必须检查当前用户在哪一列中列出并相应地修改金额（正数表示欠款和负数 - 相反，因此在网站上显示债务/信用`DebtorUser`时，我们需要将 -200$ 更改为 200$，如列中所示）。`CreditorUser``User2``User2``DebtorUserID`

我们发现重复数据解决方案要容易得多，但这个项目主要用于教育目的，所以我们的首要任务是使用良好的编程实践，有些人说重复数据不是一个。你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:55:32.480

您为一笔交易编写两条记录（贷方和借方）的方法是一种很好的方法。这构成了[复式记账](http://en.wikipedia.org/wiki/Double-entry_bookkeeping_system)的基础，它在会计中已经使用了数百年。正如您在问题中所指出的，这将使许多操作和查询更容易处理。

有关它的完整示例，请参阅这篇[文章](https://dba.stackexchange.com/a/31086/2264)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:23:14.907

您重复数据，这是不必要的。您也可以使用第一种类型的表格布局进行查询。当然，查询会更复杂一些，但我认为不值得复制数据。

# javascript - JavaScript - 以更好的格式显示时间戳

> ID：14214388
> 
> 赞同：0
> 
> 时间：2013-01-08T11:54:15.933
> 
> 标签：javascript, timestamp

> **可能重复：**
> [在 JavaScript 中格式化日期](https://stackoverflow.com/questions/1056728/formatting-a-date-in-javascript)

我正在使用 Javascript。我的数据包含这样的时间戳：

```
2013-01-08T06:17:37+03:00 
```

我想以清晰的格式显示它，它应该是：`2013-01-08 06:17:37` 不需要其他信息。

我试过了`SimpleDateFormat`，`.toUTCString()`但没有运气

# objective-c - 如何将对象数组发送到 JSON？

> ID：14214389
> 
> 赞同：0
> 
> 时间：2013-01-08T11:54:14.950
> 
> 标签：objective-c, ios

我正在使用包含对象数组的 Web 服务。但是在服务器端，他们只获得所有字段的空值。

客户端代码是：

```
 NSURL *url = [NSURL URLWithString:urlString];
        NSMutableURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:url];
        NSURLConnection *connection= [[NSURLConnection alloc] initWithRequest:urlRequest
                                                                     delegate:self];
        //************DATA formation
        NSMutableDictionary *jsonDict = [[NSMutableDictionary alloc]init];
        NSMutableDictionary *jsonDict1 = [[NSMutableDictionary alloc]init];

        [jsonDict setObject:@"3" forKey:@"rollNo"];
        [jsonDict setObject:@"Ezhil" forKey:@"FirstName"];
        [jsonDict setObject:@"Arasu" forKey:@"LastName"];

        [jsonDict1 setObject:@"4" forKey:@"rollNo"];
        [jsonDict1 setObject:@"XYZ" forKey:@"FirstName"];
        [jsonDict1 setObject:@"ABC" forKey:@"LastName"];

        NSArray *jsonArray=[[NSArray alloc]initWithObjects:jsonDict,jsonDict1, nil];

         //Converting to JSON string.
         SBJsonWriter *writer = [[SBJsonWriter alloc] init];
         NSString *jsonString = [writer stringWithObject:jsonArray];

         NSLog(@"JSON String : %@",jsonString);

        //************Setting DATA in URL
        [urlRequest setHTTPMethod:@"POST"];
        [urlRequest setValue:@"application/json" forHTTPHeaderField:@"Accept"];
        [urlRequest setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
        [urlRequest setHTTPBody:[jsonString dataUsingEncoding:NSUTF8StringEncoding]];
        [connection start]; 

        // Code for response.... 
```

我不知道我错了。任何人都可以帮助我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:01:18.770

我会废弃 SBJson 的东西，只使用本机控件......

做所有与你一样的事情，但删除 SBJsonWriter 的东西并这样做来设置请求的主体......

```
[urlRequest setHTTPBody:[NSJSONSerialization dataWithJSONObject:jsonArray options:NSJSONWritingPrettyPrinted error:&error]]; 
```

那应该行得通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T04:56:27.153

谢谢.. 应用程序工作正常，无需任何修改。问题出在服务器端。但我认为我们可以接受您的建议，而不是使用外部框架。

在这两种情况下，我都得到这样的 json 对象，

```
JSON String : 
 [{"rollNo":"3","FirstName":"Ezhil","LastName":"Arasu"},
  {"rollNo":"4","FirstName":"XYZ","LastName":"ABC"}] 
```

# sql - 无效游标错误

> ID：14214390
> 
> 赞同：-1
> 
> 时间：2013-01-08T11:54:16.157
> 
> 标签：sql, oracle

这个问题与[这个](https://stackoverflow.com/questions/14210196/cant-get-the-row-number)主题有关

我所拥有的是：

```
LOOP
      FETCH l_get_data INTO 
                l_first_name, l_last_name, l_email, l_phone, l_us_id, l_us_fullname, l_user_type,
                l_line_manager_1, l_line_manager_2, l_line_manager_3, l_line_manager_4, l_line_manager_5,
                l_us_flags, l_business_unit, l_position, l_middlename ;
      EXIT WHEN l_get_data%NOTFOUND;
      l_jsonObj := json();
      l_jsonObj.put('userFirstName', l_first_name );   
      l_jsonObj.put('userLastName', l_last_name);
      l_jsonObj.put('userEmail', l_email);

      IF l_phone IS NULL THEN l_jsonObj.put('userPhone', '');
      ELSE l_jsonObj.put('userPhone', l_phone); END IF;

      l_jsonObj.put('login', l_us_id);
      l_jsonObj.put('userFullName', l_us_fullname);
      l_jsonObj.put('userType', l_user_type);

      IF l_line_manager_1 IS NULL THEN l_jsonObj.put('lineManager1', '');
      ELSE l_jsonObj.put('lineManager1', get_full_name(l_line_manager_1)); END IF;

      IF l_line_manager_2 IS NULL THEN l_jsonObj.put('lineManager2', '');
      ELSE l_jsonObj.put('lineManager2', get_full_name(l_line_manager_2)); END IF;

      IF l_line_manager_3 IS NULL THEN l_jsonObj.put('lineManager3', '');
      ELSE l_jsonObj.put('lineManager3', get_full_name(l_line_manager_3)); END IF;

      IF l_line_manager_4 IS NULL THEN l_jsonObj.put('lineManager4', '');
      ELSE l_jsonObj.put('lineManager4', get_full_name(l_line_manager_4)); END IF;

      IF l_line_manager_5 IS NULL THEN l_jsonObj.put('lineManager5', '');
      ELSE l_jsonObj.put('lineManager5', get_full_name(l_line_manager_5)); END IF;

      IF INSTR(l_us_flags, 'DIS', 1, 1) = 0 THEN l_jsonObj.put('active', 'Yes');
      ELSE l_jsonObj.put('active', 'No'); END IF;

      IF l_business_unit IS NULL THEN l_jsonObj.put('businessUnit', '');
      ELSE l_jsonObj.put('businessUnit', l_business_unit); END IF;

      IF l_position IS NULL THEN l_jsonObj.put('position', '');
      ELSE l_jsonObj.put('position', l_position); END IF;

      IF l_middlename IS NULL THEN l_jsonObj.put('userMiddleName', '');
      ELSE l_jsonObj.put('userMiddleName', l_middlename); END IF;

      l_jsonArray.append(l_jsonObj.to_json_value);
      l_select_data.put(l_us_id, l_us_fullname);
    END LOOP;

    CLOSE l_get_data; 
```

问题是我收到了这个错误：`invalid cursor`

我已经检查了 100 次我的代码并且没有逻辑错误（至少我看不到它们）。我正在获取数据，然后尝试将其传递给参数但没有成功。

我要求提供有关问题出在哪里或导致问题的原因的小线索，我敢肯定它确实很小，但很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:10:04.327

上面的代码是正确的，我错的是我传递的参数的名称！感谢您尝试帮助我！

# c# - 如何在不导入的情况下创建与 SslStream AuthenticateAsServer 一起使用的证书

> ID：14214396
> 
> 赞同：13
> 
> 时间：2013-01-08T11:54:35.730
> 
> 标签：c#, ssl, x509certificate

我迷失在证书和私钥的曲折迷宫中。

我正在用 C# 编写服务器。我希望它接受 SSL 连接。出于测试目的，我想为“localhost”生成一个证书，并将该证书用于服务器。理想情况下，我不想污染我的证书存储，所以我只想要一个或多个 C# 代码可以加载的磁盘上的文件来提供证书。

我尝试过的一切（使用网络搜索建议的食谱方法）要么给我“无​​法识别提供给包的凭据”或“服务器模式 SSL 必须使用带有关联私钥的证书”。

有没有办法生成证书和私钥，然后将它们加载到 X509Certificate 对象中而不将它们加载到我的机器证书存储中？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-08T19:30:10.287

最后，我运行以下命令来创建 server.pfx 文件：

```
makecert.exe -r -pe -n "CN=localhost" -sky exchange -sv server.pvk server.cer
pvk2pfx -pvk server.pvk -spc server.cer -pfx server.pfx 
```

然后我在代码中加载它：

```
certificate = new X509Certificate2("server.pfx", "password"); 
```

（我实际上并没有像那样硬编码密码:-)

诀窍是知道我需要一个 pfx 文件，并且我需要使用 X509Certificate2 类而不是 X509Certificate 来加载它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-01T00:49:22.337

Niki Loche 方法有效。

如果你得到`The specified network password is not correct.`，那么你应该在 C# 中尝试不带密码。您输入的密码是什么并不重要`makecert`。

```
certificate = new X509Certificate2("Server.pfx", ""); 
```

但是如果你想使用密码（这是有原因的，它就在那里:)），尝试将*pvk2pfx.exe*命令更改为：

pvk2pfx.exe" -pi 密码 -pvk Server.pvk -spc Server.cer -pfx Server.pfx

并在 C# 中输入：

证书 = new X509Certificate2("Server.pfx", "password");

密码必须与创建 cer 文件时的密码相同。

这对我有用。我希望它会帮助某人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T13:57:39.570

有许多工具可以让您充当自己的 CA 并生成证书。[XCA](http://sourceforge.net/projects/xca/)就是其中之一。例如，还有许多使用 OpenSSL 命令的方法。

仅生成自签名证书似乎是最简单的选择，但使用测试 CA（和单独的服务器证书）可能是值得的。如果需要使测试更真实，这将允许您将测试 CA 导入浏览器的存储中。使用正确的工具（例如 XCA）并不难。

生成服务器证书及其私钥后，将其转换为 PKCS#12 文件 (.p12/.pfx)。

然后，您应该能够使用[`X509Certificate2.import(...)`](http://msdn.microsoft.com/en-us/library/ms148442.aspx). （请参阅[此答案](https://stackoverflow.com/a/2319680/372643)中的示例。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-03T18:08:53.383

我最近开发了一个带有 TLS 的 SMTP 服务器。我需要将服务器作为 Windows 服务安装在 Windows Server 2012 机器上。我为我的域使用了 Let's Encrypt SSL 证书（* 通配符）。在“在服务器上”开发时，我必须以管理员身份运行 Visual Studio，我的代码才能使用“new X509Certificate("cert.pfx", "{password}") 运行，并且运行良好。但是，一旦作为服务安装，该方案不起作用。原来更简单/更安全的方法是使用 X509Store。这是解决问题的代码......

```
private X509Certificate GetSslCertificate()
{
    X509Certificate cert = null;
    string certname = "*.mydomain.com";

    try
    {
        X509Store store = new X509Store(StoreName.My, StoreLocation.LocalMachine);
        store.Open(OpenFlags.OpenExistingOnly);

        foreach (X509Certificate certificate in store.Certificates)
        {
            if (certificate.Subject.ToLower().Contains(certname))
            {
                cert = certificate;
                break;
            }
        }
    }
    catch (Exception) { /* Handle Exception */ }
    return cert;
} 
```

另请注意，我使用“LocalMachine”作为 StoreLocation。如果您安装了 SSL 证书，则需要更改为 CurrentUser。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-09T22:44:18.620

从机器存储（而不是用户存储）导入机器证书时，我遇到了同样的问题。我通过以管理员身份运行 Visual Studio 解决了这个问题，因为访问机器存储证书的私钥需要管理员权限。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-18T16:20:28.137

如果您有 IIS，则可以通过 IIS 管理器进行操作，如下所述：

[http://blogs.msdn.com/b/ericnel/archive/2009/09/22/using-iis-to-generate-a-x509-certificate-for-use-with-the-windows-azure-service-管理-api-step-by-step.aspx](http://blogs.msdn.com/b/ericnel/archive/2009/09/22/using-iis-to-generate-a-x509-certificate-for-use-with-the-windows-azure-service-management-api-step-by-step.aspx)

# php - 警告：move_uploaded_file()：它被移动但文件大小保持为零

> ID：14214398
> 
> 赞同：0
> 
> 时间：2013-01-08T11:54:51.527
> 
> 标签：php, file-upload, chown

我一直在我的服务器上使用上传脚本，如下所示

```
$newname = time() . '_' . $_FILES[$file]["name"];
if (strtolower(end(explode('.', $_FILES[$file]["name"]))) != 'pdf' AND $file != "damage_attachment_damageform_1" AND $file != "damage_attachment_damageform_2" AND $file != "damage_attachment_damageform_3" AND $file != "damage_attachment_damageform_4") {
    if (move_uploaded_file($_FILES[$file]["tmp_name"], $_SERVER['DOCUMENT_ROOT'] . '/components/com_fleet/uploads/docs/' . $newname)) {
        $images[] = $_SERVER['DOCUMENT_ROOT'] . '/components/com_fleet/uploads/docs/' . $newname;
        $docs[] = $_SERVER['DOCUMENT_ROOT'] . '/components/com_fleet/uploads/docs/' . $newname;
    } else {
        die();
    }
} 
```

它可以很好地上传图像，但几天后出现`Warning: move_uploaded_file(): Unable to move` 错误。我在学习编程时已经看过十几次了，所以我做了所有常见的事情，检查路径、$_FILES[$file]["error"] 并检查所有正确的 CHMOD。一切都很好，路径是正确的，chmod 也是，没有错误等等......

1 额外奇怪的事情我注意到该文件确实被写入了正确的 /docs 映射，但它的 Filesize 是空的，并且`move_upload_file`仍然发送`false`......

我忘记了什么？可能是 CHOWN？我该如何解决这个问题，我没有 SSH 访问权限之类的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:58:08.380

Graa 一个小时后，我现在发现了问题所在，服务器磁盘配额已超出。也许人们仍然可以从我的问题中受益......

# ios - NSURLConnection 下载大型 zip 文件

> ID：14214400
> 
> 赞同：0
> 
> 时间：2013-01-08T11:54:53.803
> 
> 标签：ios, iphone, cocoa-touch, download, nsurlconnection

使用 NSURLConnection 分块下载 zip 文件时出现问题。

`-(void)connection: didReceiveData:(NSData *)data method.`

我尝试了两种方法，第一种是将所有数据附加到一个`NSMutableData`对象，然后`writeToFile:atomically:`在最后调用。这适用于一个小视频（14MB），但对于我正在下载的较大视频，它太多了，无法保存在内存中。

第二种方法是`writeToFile:atomically:`在数据进入时调用，这似乎适用于下载，但不适用于解压缩。这是首选方法，但我不确定文件是否被正确重建，因为它不会解压缩。

任何帮助将非常感激，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:13:06.393

第二种方法对我来说似乎是正确的。如果数据太大而无法保存在内存中，您肯定需要将数据写入磁盘。这绝不会影响您解压缩它的能力。所以我的猜测是你在解压缩时做错了什么。你使用 SSZipArchive 吗？（它实际上需要一个指向您的 zip 文件的 URL，因此无论如何都需要将其保存在磁盘上）。

# security - 如何强制执行严格的 Maven 依赖策略（依赖链攻击）

> ID：14214406
> 
> 赞同：5
> 
> 时间：2013-01-08T11:55:19.600
> 
> 标签：security, maven

我想强制执行超出基本`checksumPolicy=fail`方法的严格 Maven 依赖策略。

这是一种尝试**提供对修改后的依赖项的保护，该依赖项仍然具有有效的摘要值**，也称为“依赖链攻击”。

这种情况可能来自以下情况：

*   依赖项已更新，但作者尚未更新版本号并设法覆盖早期版本（或他们的 repo 帐户已被盗用）
*   中间人攻击已经到位（即时重写/散列）
*   存储库本身已被破坏

在与其他开发人员的讨论中，解决上述问题的一种方法是在 pom.xml 中列出已知的 MD5/SHA 摘要，并让 Maven 验证下载的依赖项是否具有相同的摘要。这确保了只要源代码存储库保持安全，任何包含的已被破坏的依赖项都将被检测到。

因此，我的问题是双重的：

1.  有没有更有效的替代方法？
2.  是否有任何现有的实现/插件可以完成这项工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-16T21:58:33.490

如果有人自己解决这个问题，我已经创建了一个处理它的[Maven Enforcer Plugin Rule。](https://maven.apache.org/enforcer/maven-enforcer-plugin/)您可以指定包含预期 SHA1 哈希值的工件 URN 列表，并让实施者验证这确实是构建中使用的内容。

它可以在 MIT 许可下通过 Maven Central 获得，源代码在 GitHub 中：[https ://github.com/gary-rowe/BitcoinjEnforcerRules](https://github.com/gary-rowe/BitcoinjEnforcerRules)

虽然该项目表明它适用于 Bitcoinj 库，但它实际上是一个通用解决方案，可以包含在任何有安全意识的构建过程中。它还将扫描您现有的项目并识别任何问题区域，同时自动为您构建白名单。

下面是您在项目中使用它所需的配置示例。

```
<build>
  <plugins>
    ...
      <!-- Use the Enforcer to verify build integrity -->
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-enforcer-plugin</artifactId>
        <version>1.2</version>
        <executions>
          <execution>
            <id>enforce</id>
            <phase>verify</phase>
            <goals>
              <goal>enforce</goal>
            </goals>
            <configuration>
              <rules>
                <digestRule implementation="uk.co.froot.maven.enforcer.DigestRule">

                  <!-- Create a snapshot to build the list of URNs below -->
                  <buildSnapshot>true</buildSnapshot>

                  <!-- List of required hashes -->
                  <!-- Format is URN of groupId:artifactId:version:type:classifier:scope:hash -->
                  <!-- classifier is "null" if not present -->
                  <urns>

                    <urn>antlr:antlr:2.7.7:jar:null:compile:83cd2cd674a217ade95a4bb83a8a14f351f48bd0</urn>
                    <urn>dom4j:dom4j:1.6.1:jar:null:compile:5d3ccc056b6f056dbf0dddfdf43894b9065a8f94</urn>
                    <urn>org.bouncycastle:bcprov-jdk15:1.46:jar:null:compile:d726ceb2dcc711ef066cc639c12d856128ea1ef1</urn>
                    <urn>org.hibernate.common:hibernate-commons-annotations:4.0.1.Final:jar:null:compile:78bcf608d997d0529be2f4f781fdc89e801c9e88</urn>
                    <urn>org.hibernate.javax.persistence:hibernate-jpa-2.0-api:1.0.1.Final:jar:null:compile:3306a165afa81938fc3d8a0948e891de9f6b192b</urn>
                    <urn>org.hibernate:hibernate-core:4.1.8.Final:jar:null:compile:82b420eaf9f34f94ed5295454b068e62a9a58320</urn>
                    <urn>org.hibernate:hibernate-entitymanager:4.1.8.Final:jar:null:compile:70a29cc959862b975647f9a03145274afb15fc3a</urn>
                    <urn>org.javassist:javassist:3.15.0-GA:jar:null:compile:79907309ca4bb4e5e51d4086cc4179b2611358d7</urn>
                    <urn>org.jboss.logging:jboss-logging:3.1.0.GA:jar:null:compile:c71f2856e7b60efe485db39b37a31811e6c84365</urn>
                    <urn>org.jboss.spec.javax.transaction:jboss-transaction-api_1.1_spec:1.0.0.Final:jar:null:compile:2ab6236535e085d86f37fd97ddfdd35c88c1a419</urn>

                    <!-- A check for the rules themselves -->
                    <urn>uk.co.froot.maven.enforcer:digest-enforcer-rules:0.0.1:jar:null:runtime:16a9e04f3fe4bb143c42782d07d5faf65b32106f</urn>

                  </urns>

                </digestRule>
              </rules>
            </configuration>
          </execution>
        </executions>

        <!-- Ensure we download the enforcer rules -->
        <dependencies>
          <dependency>
            <groupId>uk.co.froot.maven.enforcer</groupId>
            <artifactId>digest-enforcer-rules</artifactId>
            <version>0.0.1</version>
          </dependency>
        </dependencies>

      </plugin>
    ...
  </plugins>
</build> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T14:47:33.083

听起来对存储库本身来说是一项不错的工作。查看有关类似问题的其他[线程。](https://stackoverflow.com/questions/7094035/how-secure-is-using-maven)

我不熟悉 Nexus 中的 PGP 签名方案，但这听起来像是一个好的开始吗？

# php - 如何构建 PHP 依赖注入容器

> ID：14214408
> 
> 赞同：13
> 
> 时间：2013-01-08T11:55:42.527
> 
> 标签：php, dependency-injection

我最近了解到在我的 PHP 应用程序中使用依赖注入 (DI) 的优势。但是，我仍然不确定如何为依赖项创建容器，或者我是否应该在我正在构建的在线论坛中使用 DI。

以下代码是我根据从[这里](http://net.tutsplus.com/tutorials/php/dependency-injection-huh/)学到的示例制作的 DI 容器版本。

```
class ioc {

   var $db;
   var $session;
   var $user_id;

   static function newUser(static::$db, static::$user_id) {
      $user = new User($db, $user_id);
      return $user;
   }

   static function newLogin(static::$db, static::$session) {
      $login = new Login($db, $session);
      return $login;
   }

}

$user = ioc::newUser();
$login = ioc::newLogin(); 
```

我有几个问题：

1) 我应该在哪里实例化我注入的依赖项，例如 $database、$session 等？它是在容器类之外，还是在容器的构造函数内。

2）如果我需要在其他类中创建用户类的多个实例怎么办？我无法注入先前实例化的 $user 对象，因为该实例已被使用。但是，在另一个类中创建多个 User 实例会违反 DI 的规则。例如：

```
class Users {

    function __construct($db, $user_id) {
        $this->db = $db;
        $this->user_id = $user_id;
    }

    function create_friends_list() {
        $st = $this->$db->prepare("SELECT user_id FROM friends WHERE user_id = $this->user_id");
        $st->execute();
        while($row = $st->fetch()) {
            $friend = ioc::newUser($row['user_id']);
            $friend->get_user_name();
            $friend->get_profile_picture();
        }
    }
} 
```

3) 我想知道我是否应该采用 DI，因为我知道我必须重写我以前的所有代码。我以前一直依赖于我在我的 initialize.php 中实例化的全局变量，它包含在我的所有文件中。

在我看来，DI 会产生很多开销，并且在某些情况下它无法使用（如我的 #2 示例中）。以下网站来自一位开发人员，他列举了许多不使用 DI 的充分理由。他的论点有任何依据吗？还是我只是用错了DI？ [检查这个链接](http://www.tonymarston.net/php-mysql/dependency-injection-is-evil.html)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T13:29:33.770

> *我应该在哪里实例化我注入的依赖项，例如 $database、$session 等？它是在容器类之外，还是在容器的构造函数内。*

理想情况下，您的数据库连接和会话将被引导。正确的 DI 需要一个基础对象的实例，所有内容都注册到该实例中。因此，以您的 IOC 类为例，您需要创建它的实例（`$ioc = new IOC();`）然后您需要某种服务提供者类说

```
$ioc->register('database', new DatabaseServiceProvider($host, $user, $pass)) 
```

现在，每次您想要连接到数据库时，您只需要传递`$ioc->get('database');`一个非常粗略的示例，但我认为您可以看到这个想法基本上是将所有内容存储在注册表中，并且没有任何东西是静态绑定的，这意味着您可以创建另一个`$ioc`完全不同的设置可以很容易地创建连接来表示不同的数据库以进行测试。

> *如果我需要在其他类中创建 User 类的多个实例怎么办？我无法注入先前实例化的 $user 对象，因为该实例已被使用。但是，在另一个类中创建多个 User 实例会违反 DI 的规则。*

这是一个常见问题，有多种不同的解决方案。首先，您的 DI 应该显示登录用户和仅用户之间的区别。您可能想要注册您的登录用户，但不仅仅是任何用户。使您的用户类正常并使用

```
$ioc->register('login-user', User::fetch($ioc->get('database'), $user_id)); 
```

所以现在`$ioc->get('login-user')`返回您的登录用户。然后，您可以使用`User->fetchAll($ioc->get('database'));`来获取所有用户。

> *我想知道我是否应该采用 DI，因为我知道我必须重写我以前的所有代码。我以前一直依赖于我在我的 initialize.php 中实例化的全局变量，它包含在我的所有文件中。*

如果您需要重写所有代码以使用 DI，您可能不应该这样做。如果有时间，也许可以考虑制作一个新项目并使用一些旧代码。如果您的代码库很大，我建议您将其分解为较小的项目并使用 RESTFUL api 来获取和保存数据。编写 API 的好例子是将您的论坛搜索放入它自己的应用程序 /search/name?partial-name=bob 将返回所有包含单词 bob 的用户。您可以构建它并随着时间的推移使其变得更好，并在您的主论坛中使用它

我希望您能理解我的回答，但如果您需要更多信息，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T13:56:26.423

我打算写这篇评论，但它太长了。我不是专家，所以我将根据我通过几年的实践和在 SO 中学到的知识来发表我的观点。随意使用或质疑我答案的任何部分（或没有）。

1.- 外面。容器有什么作用？答案应该是单一的。它不应该负责初始化类、连接到数据库、处理会话和其他事情。每个班级只做一件事。

```
class ioc
  {
  public $db;

  // Only pass here the things that the class REALLY needs
  static public function set($var, $val)
    {
    return $this->$var = $val;
    }

  static function newDB($user, $pass)
    {
    return new PDO('mysql:host=localhost;dbname=test', $user, $pass);
    }

  static function newUser($user_id)
    {
    return new User($db, $user_id);
    }

  static function newLogin($session)
    {
    return new Login($this->db, $session);
    }
  }

if (ioc::set('db',ioc::newDB($user, $pass)))
  {
  $user = ioc::newUser($user_id);
  $login = ioc::newLogin($session);
  } 
```

2.- 你不应该`$friend = ioc::newUser($row['user_id']);`在课堂上做。在那里你假设有一个`ioc`用一个方法调用的类`newUser()`，而每个类都应该能够自己行动，而不是基于[可能]其他现有的类。这称为[紧耦合](https://stackoverflow.com/questions/2832017/what-is-the-difference-between-loose-coupling-and-tight-coupling-in-object-orien)。基本上，这就是为什么你也不应该使用全局变量的原因。在一个类中使用的任何东西都应该传递给它，而不是假设在全局范围内。即使您知道它在那里并且您的代码可以工作，它也会使该类无法在其他项目中重用并且更难测试。我不会扩展自己（双关语？），但会在 SO 中放一个我在这里发现的很棒的视频，这样你就可以挖掘更多：[The Clean Code Talks - Don't Look For Things](http://www.youtube.com/watch?v=RlfLCWKxHJ0)。

我不确定该类的`User`行为方式，但这就是我的做法（不是必须的）：

```
// Allow me to change the name to Friends to avoid confusions
class Friends
  {
  function __construct($db)
    {
    $this->db = $db;
    }

  function create_friends_list($user_id)
    {
    if (!empty(id))
      {
      // Protect it from injection if your $user_id MIGHT come from a $_POST or whatever
      $st = $this->$db->prepare("SELECT user_id FROM friends WHERE user_id = ?");
      $st->execute(array($user_id));
      $AllData = $st->fetchAll()
      return $AllData;
      }
    else return null;
    }

  // Pass the $friend object
  function get_friend_data($friend)
    {
    $FriendData = array ('Name' => $friend->get_user_name(), 'Picture' => $friend->get_profile_picture());
    return $FriendData;
    }
  }

$User = ioc::newUser($user_id);
$Friends = new Friends($db);

$AllFriendsIDs = array();
if ($AllFriendsIDs = $Friends->create_friends_list($User->get('user_id')))
  foreach ($AllFriendsIDs as $Friend)
    {
    // OPTION 1\. Return the name, id and whatever in an array for the user object passed.
    $FriendData = $Friends->get_friend_data(ioc::newUser($Friend['user_id']));
    // Do anything you want with $FriendData

    // OPTION 2\. Ditch the get_friend_data and work with it here directly. You're already in a loop.
    // Create the object (User) Friend.
    $Friend = ioc::newUser($Friend['user_id']);
    $Friend->get_user_name();
    $Friend->get_profile_picture();
    } 
```

我没有测试它，所以它可能有一些小错误。

3.- 如果你在编码的同时学习，你将不得不重写很多东西。尝试从一开始就做一些事情，这样您就不需要重写所有内容，而只需要重写类/方法并为所有代码采用一些约定。例如，永远不要从函数/方法内部回显，总是从外部返回和回显。我会说是的，这是值得的。仅仅重写一些东西就必须浪费 1 或 2 个小时，这很糟糕，但如果必须这样做，那就去做吧。

PS，对不起，我到处都改变了你的括号样式。

* * *

编辑阅读其他答案，虽然您不应该使用您的 ioc 对象连接到数据库，但使用它创建一个新对象应该是完美的。在上面编辑以了解我的意思。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T01:46:36.497

你问的问题有一个非常重要的问题，我在评论中提出了这个问题。每当您检查暂停前进进度以返回并完成对现有类的不那么微不足道的重构的可能性时，您都必须真正考虑收益。

你[回复](https://stackoverflow.com/questions/14214408/how-to-build-a-php-dependency-injection-container#comment19722552_14214408)：

> 这似乎有点复杂（而且非常不同）并且比此时值得实施的工作更多。我只是想快速破解一些真正的东西，看看它是否会获得牵引力。

请记住，如果您想用 IoC 容器正确实现 DI，则需要执行以下操作：

*   在引导程序中实现 IoC 容器和注册表
*   修改所有具有依赖关系的现有类以允许 setter 注入，而不依赖于 IoC 容器*本身*
*   根据需要重写/重组测试

关于第二个项目符号的注释反映了我自己的个人观点和偏好，在考虑 DI 的情况下进行开发可能会很*困难*，你*想要*它可以给予的全部回报。最大的回报之一是完全解耦的对象，如果一切仍然依赖于 IoC 容器，您将无法获得*完整*的部分。

这是很多工作，特别是如果您直到现在还没有考虑这种模式。当然，您将获得明显的好处，例如完成后有许多可重用且易于测试的对象。但是，与所有重构一样，在添加或完成新功能和特性的上下文中不会完成任何新的事情。是困难测试还是紧耦合阻碍了这一点？这是你必须权衡的事情。

我建议您在编写新代码*时记住该模式。*提供 setter 方法来注入依赖项，可以手动使用，也可以通过 IoC 容器使用。但是，如果没有注入任何类，请让您的类继续及时创建它们*，并避免在构造函数中组合。*

那时，您将拥有一组*更好地*支持控制反转的类，如果这是您将来想要追求的模式。如果它对您很有效，并且您确实希望将其纳入您的设计决策中，那么您可以轻松地重构以在以后删除 JIT 逻辑。

总之，我担心如果你现在尝试完全实施它，你最终会得到的唯一结果就是*一团糟*。您现在可以更改编写课程的方式，但我不会*回去*尝试全面实施它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T13:10:47.510

而不是 init.php 中的全局变量定义您的对象，例如：

```
ioc::register('user', function() {
 return new User();
}); 
```

并使用您的 create_friends_list 方法：

```
ioc::get('user')->newUser($user_id); 
```

这是一个非常简单的实现。查看： [http ://net.tutsplus.com/tutorials/php/dependency-injection-huh/?search_index=2](http://net.tutsplus.com/tutorials/php/dependency-injection-huh/?search_index=2)

或者

[http://net.tutsplus.com/tutorials/php/dependency-injection-in-php/?search_index=1](http://net.tutsplus.com/tutorials/php/dependency-injection-in-php/?search_index=1)

了解更多信息。

# ios - 在 componentsSeparatedByString 中使用 ASCII 控制码

> ID：14214412
> 
> 赞同：0
> 
> 时间：2013-01-08T11:55:53.700
> 
> 标签：ios

我需要根据 ASCII 控制字符（特别是 US — 0x1F）来分隔字符串。

`NSString componentsSeparatedByString`当它需要一个 unicode 字符串并且我提供 ASCII (UTF-8) 时，我该如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:40:16.867

只需使用文字：

```
[@"XXX\x1fYYY" componentsSeparatedByString:@"\x1f"] 
```

或更好：

```
[@"XXX\x1fYYY" componentsSeparatedByCharactersInSet:[NSCharacterSet controlCharacterSet]] 
```

ASCII 控制字符 00 - 1f 映射到相同的 unicode 代码点。

# php - 在 PHP 中从文件中解码 JSON

> ID：14214413
> 
> 赞同：0
> 
> 时间：2013-01-08T11:55:53.657
> 
> 标签：php, json, file, encoding

```
if (($json=file_get_contents($_FILES["file_upload"]["tmp_name"]))) {
    //$json='{"a":1,"b":2,"c":3,"d":4,"e":5}';
    $content=json_decode($json,TRUE);
                  } 
```

我上传一个文件，然后用 PHP 读取它。我从 json_decode 返回 NULL 的问题，但 json 是有效的，因为当我尝试从字符串中解码相同的 JSON 时，它解码得很好。任何想法可能是错误的。

我发现我在字符串的开头得到了三个。所以我现在做一个 substr，但这是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:28:02.890

在生成 JSON 的 PHP 文件顶部添加以下代码。

```
header('Content-Type: application/json'); 
```

# php - php复制文件到所有文件夹

> ID：14214414
> 
> 赞同：-4
> 
> 时间：2013-01-08T11:55:55.903
> 
> 标签：php, directory

嗨，我想将文件复制到目录中的所有文件夹

我的根文件夹树是

我想将根文件夹中的文件复制到每个目标文件夹

文件夹结构是

![在此处输入图像描述](../Images/522ca555995d51da6c6bf4339e4c3b1a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:19:37.607

由于您有一个静态文件夹结构，我建议将不同的子文件夹存储在一个数组中，然后将其循环到[`copy`](http://us2.php.net/copy)文件中

```
$rootpath = ".";
$destpaths = array("/Folder1/Subfolder1/AnotherSubFolder/Target/",
               "/Folder2/Subfolder1/AnotherSubFolder/Target/",
               "/Folder3/Subfolder1/AnotherSubFolder/Target/",
               "/Folder4/Subfolder1/AnotherSubFolder/Target/",
               "/Folder5/Subfolder1/AnotherSubFolder/Target/",
               "/Folder6/Subfolder1/AnotherSubFolder/Target/",
               "/FolderN/Subfolder1/AnotherSubFolder/Target/");
$file = '/example.txt';
$copyfrom = $rootpath . $file;

foreach($destpaths as $destpath)
{
    $copyto = $rootpath . $destpath . $file;
    if (!copy($copyfrom, $copyto)) {
        echo "failed to copy $file";
    }
} 
```

**正如 Aaron W. 所建议**的那样 ，并且还使用[glob-php](http://php.net/manual/en/function.glob.php)来获取递归路径（folder1，folder2 ...），我将此代码和文件放置在同一个文件夹中，并将其放置在与文件夹 1、文件夹 2 相同的根路径中...

```
$rootpath = "..";
$frompath = ".";
$file = '/example.txt';
$tosubpath="/Subfolder1/AnotherSubFolder/Target/";
$copyfrom = $frompath . $file;

listdirs($rootpath,$copyfrom,$tosubpath,$file);

    function listdirs($dir,$copyfrom,$tosubpath,$file) {
        $dirs = glob($dir . '/*', GLOB_ONLYDIR);

    foreach($dirs as $destpath)
    {   

        $copyto = $destpath. $tosubpath . $file;
        if (!copy($copyfrom, $copyto)) {
            echo "failed to copy ".$copyfrom." to".$copyto."<br>";
        }else{
            echo $copyfrom." copied to".$copyto."<br>";
        }
    }
} 
```

# web-services - 如何解组到不同的 @RequestBody 对象类型？

> ID：14214415
> 
> 赞同：0
> 
> 时间：2013-01-08T11:56:13.300
> 
> 标签：web-services, spring, spring-mvc, unmarshalling

我在接收 XML 作为输入的 Web 服务中使用 Spring。它可以是嵌入在 HTTP 请求中的 XML，也可以是*请求*属性中的纯文本。

目前，我的 Web 服务正在处理两种不同的 XML 模式，因此我的解组器可以将 XML 文件解组为两种对象类型（例如：Foo 和 Bar）。

在我的控制器中，我有下一个代码来处理*请求*属性：

```
@RequestMapping(value={"/mypath"}, method={RequestMethod.POST}, headers={"content-type=application/x-www-form-urlencoded"})
@ResponseBody
public ResponseObject getResponse(@RequestParam("request") String request, HttpServletRequest req) { 
```

它完美地工作，我可以将请求字符串解组为 Foo 对象或 Bar 对象。

问题来自于 XML 嵌入：

```
@RequestMapping(value={"/mypath"}, method={RequestMethod.POST}, headers={"content-type=text/xml"})
@ResponseBody
public ResponseObject getResponse(@RequestBody Foo request, HttpServletRequest req) { 
```

和

```
@RequestMapping(value={"/mypath"}, method={RequestMethod.POST}, headers={"content-type=text/xml"})
@ResponseBody
public ResponseObject getResponse(@RequestBody Bar request, HttpServletRequest req) { 
```

这是消息转换器：

```
<bean id="marshallingHttpMessageConverter" class="org.springframework.http.converter.xml.MarshallingHttpMessageConverter">
    <property name="marshaller" ref="jaxb2Marshaller" />
    <property name="unmarshaller" ref="jaxb2Marshaller" />
</bean>
<oxm:jaxb2-marshaller id="jaxb2Marshaller" contextPath="path.to.Foo:path.to.Bar"/> 
```

我认为 MessageConverter 应该自动解组，但我收到下一个错误：

> java.lang.IllegalStateException: 为 HTTP 路径“/ws/mypath.ws”映射的不明确的处理程序方法：[...] 如果您打算在多个方法中处理相同的路径，那么将它们分解到一个专用的处理程序类中在类型级别映射的路径！

如何自动解组为不同的`@RequestBody`对象类型？（具有相同的*Web 服务路径*）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:49:53.070

必须有一些东西`@RequestMapping`使每个请求方法都是唯一的，在您的情况下，两个基于 xml 的请求映射完全相同 - 在框架找到正确的方法后，参数的类型将被计算出来`@RequestMapping`。所以基本上你所说的是不可行的，除非你在注释中有更多的东西来帮助框架找到正确的方法。

如果您使用的是 Spring 3.1+，您可以进行的一个小简化如下：

```
@RequestMapping(value={"/mypath"}, method={RequestMethod.POST}, consumes=text/xml) 
```

# ios - 目标 C：如何获取字符串等价物或方法参数调用的变量名

> ID：14214417
> 
> 赞同：2
> 
> 时间：2013-01-08T11:56:18.757
> 
> 标签：ios, uiview, frame, nslog

我想做一个简单的方法来记录视图的框架，但也记录特定视图输入的名称。除了输入字符串作为方法的参数之外，是否有一种简单的方法可以获得与被调用视图等效的字符串？

```
-(void)printViewFrame:(UIView*)view { 

    NSLog(@"%@'s frame is: origin x: %f, origin y: %f, size x: %f, size y: %f", view ,view.frame.origin.x, view.frame.origin.y, view.frame.size.width, view.frame.size.height);

}

[self printViewFrame:myView]; 
```

**注意：**现在我只是这样做，这有点难看：

```
-(void)printViewFrame:(UIView*)view name:(NSString*)name {

    NSLog(@"%@'s frame: %@",name, NSStringFromCGRect(view.frame));

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T12:02:03.223

要获取视图的框架，您可以使用`NSStringFromCGRect`

```
NSLog(@"%@",NSStringFromCGRect(view.frame)); 
```

但是如果你想得到视图的名字，你必须将它作为一个 NSString 传递。您只能读取指针的内存地址，而不能读取它的真实名称。你最接近这个的是

```
NSLog(@"%@",NSStringFromClass([view class])); 
```

这将输出

> 界面视图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:07:46.473

你的方法调用

```
[self printViewFrame:myView]; 
```

方法实现

```
-(void)printViewFrame:(UIView*)view { 

    NSLog(@"%@ : %@", NSStringFromCGRect(view.frame),NSStringFromClass(view.class));

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T12:13:41.323

`-(void)printViewFrame:`我认为实现所需功能的唯一可能方法是在调用方法之前记录变量的名称

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T12:17:44.177

我不知道如何用一些标准函数来做到这一点，但我可以用宏来做到这一点：

```
#define PRINT_NAME(var) NSLog(@"%s", #var) 
```

然后，您只需调用它并打印变量的名称：

```
PRINT_NAME(view); 
```

您还可以使用它来获取`NSString`所需的名称：

```
#define GET_NAME_STRING(var) [NSString stringWithFormat:@"%s", #var] 
```

像这样使用它：

```
NSLog(@"frame stuff %f,...., NAME IS %@", frame.x, ..., GET_NAME_STRING(view)); 
```

如果您只需要一种方法（或某些方法），您可以做一些定义来做您想做的事：

```
#define CALL_PRINT(var) NSLog(@"%s", #var); [self printViewFrame:var] 
```

所以，当你打电话

```
CALL_PRINT(myView); 
```

它将打印视图名称，然后调用该`printViewFrame`函数。

另外，如果你不想用宏做任何事情，在那里发现了一些东西：[被触摸的 UIView 的名称](https://stackoverflow.com/questions/2750993/name-of-uiview-that-was-touched)。

# javascript - 防止 Web 应用程序中的右键单击选项

> ID：14214418
> 
> 赞同：-1
> 
> 时间：2013-01-08T11:56:20.167
> 
> 标签：javascript, web-applications, browser

为什么许多 Web 应用程序（如银行网站）会阻止浏览器中的右键单击属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:27:36.250

虽然这个问题更多地属于 UX.SE，但没有好的答案。我或其他人都没有看到这样做的充分理由。一些人认为复制文本很难，并将其用作 DRM。有些人这样做是因为他们认为这很酷。但这只是糟糕的设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:13:27.343

由于安全问题，虽然它不是真的。

一些设计师认为如果禁用右键单击，那么您将无法检查源代码并注入 js 片段。

# google-maps - 我如何在谷歌地图 api 中获取坐标的位置

> ID：14214421
> 
> 赞同：0
> 
> 时间：2013-01-08T11:56:36.853
> 
> 标签：google-maps, localization

我的一个朋友正在对谷歌地图 API 进行少量研究和测试，我们正试图从给定的坐标中检索本地化（城市）。

我们已经能够在地图上显示坐标，但它并没有明确地告诉我们城市或该地点的信息。

希望您能帮助我们，因为我们还没有找到任何方法这样做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:02:38.443

您好，希望此工具对您有所帮助 [http://www.google.co.in/enterprise/mapsearth/products/coordinate.html](http://www.google.co.in/enterprise/mapsearth/products/coordinate.html) Google Maps Coordinate 是一种劳动力管理工具，可提高您的移动团队的效率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:14:07.080

好的，抱歉打扰了，我们终于找到了：
[https ://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

> 什么是地理编码？
> 
> 地理编码是将地址（如“1600 Amphitheatre Parkway, Mountain View, CA”）转换为地理坐标（如纬度 37.423021 和经度 -122.083739）的过程，您可以使用它来放置标记或定位地图。
> 
> 反向地理编码是将地理坐标转换为人类可读地址的过程

这个描述正是我们正在寻找的对立面，但也有其他方法可以做到这一点。希望这可以帮助其他可能有同样疑问的人。

# java - iframe 导致 ClientAbortException: java.io.IOException at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:369)

> ID：14214424
> 
> 赞同：6
> 
> 时间：2013-01-08T11:56:44.873
> 
> 标签：java, html, jsf

我正在使用 iframe 来显示 pdf 文件，用户可以保存、打印等。但是当用户返回或其他地方时，总是会抛出此错误：

```
ClientAbortException:  java.io.IOException
    at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:369)
    at org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:448)
    at org.apache.tomcat.util.buf.ByteChunk.append(ByteChunk.java:363)
    at org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.java:392)
    at org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:381)
    at org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:89)
    at java.nio.channels.Channels$WritableByteChannelImpl.write(Channels.java:296)
    at com.sun.faces.application.resource.ResourceHandlerImpl.handleResourceRequest(ResourceHandlerImpl.java:277)
    at javax.faces.application.ResourceHandlerWrapper.handleResourceRequest(ResourceHandlerWrapper.java:119)
    at org.primefaces.application.PrimeResourceHandler.handleResourceRequest(PrimeResourceHandler.java:91)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:310)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:877)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:594)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1675)
    at java.lang.Thread.run(Thread.java:662) 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T12:17:59.430

> `ClientAbortException`

一般来说，你可以忽略它。当客户端在页面仍在加载时突然中止 HTTP 请求时，将引发此异常。当客户端按下`Esc`，或匆忙离开，或关闭浏览器，或网络中断，甚至着火时，都会发生这种情况。这一切都完全不在你的控制范围内。

堆栈跟踪表明它是由`<h:outputStylesheet>`,`<h:outputScript>`和`<h:graphicImage>`（以及 PrimeFaces 等效项）处理的 JSF 资源请求。因此，当浏览器尝试下载 CSS、JS 和/或图像资源时，就会发生这种情况。

好吧，你只需要“忍受它”。如果您担心服务器日志中的“噪音”，您可以考虑创建一个[servlet 过滤器](https://stackoverflow.com/tags/servlet-filters/info)来抑制这些异常。

```
try {
    chain.doFilter(request, response);
} catch (ClientAbortException e) {
    // Log a single line instead of whole stacktrace, or just ignore it.
} 
```

请注意，这是一个特定于 servletcontainer 的异常类（来自 Catalina/Tomcat），因此这样的过滤器与特定的 servletcontainer make 紧密耦合（即它不能移植到 Glassfish 或其他人）。由于它是 的子类`IOException`，因此您可能想要捕获它并进行`Class#getSimpleName()`检查。

# iphone - 使用 Titanium Studio 一键访问 Facebook

> ID：14214426
> 
> 赞同：0
> 
> 时间：2013-01-08T11:56:53.670
> 
> 标签：iphone, facebook, authentication, titanium-mobile, oneclick

我遇到了 Facebook 与 iPhone 应用程序集成的新方式。他们没有显示 Web 视图以通过应用程序登录 Facebook，而是对其进行了更改，以便用户可以在其设备中使用 Facebook 应用程序登录。

[Facebook 一键访问](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/#step1)

我想知道 Titanium Studio 是否可以做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:01:52.983

如果我是对的，您想将 facebook 集成到您的应用程序中。第一步是获取应用程序 ID，您可以在此处获取它[graph-api docs](https://developers.facebook.com/docs/getting-started/graphapi/ "文档")

并参考[参考官方文档](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Facebook/ "参考官方文档") 按照必要的步骤，你会得到你需要的。希望能帮助到你。

# php - PHP 多三元运算符未按预期工作

> ID：14214427
> 
> 赞同：15
> 
> 时间：2013-01-08T11:56:59.463
> 
> 标签：php, ternary-operator

为什么要这样打印`2`？

```
echo true ? 1 : true ? 2 : 3; 
```

据我了解，它应该打印`1`.

为什么它没有按预期工作？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-08T11:59:46.607

因为您写的内容与以下内容相同：

```
echo (true ? 1 : true) ? 2 : 3; 
```

如您所知， 1 被评估为`true`。

你期望的是：

```
echo (true) ? 1 : (true ? 2 : 3); 
```

所以总是使用大括号来避免这种混淆。

如前所述，三元表达式在 PHP 中保持关联。这意味着首先将执行*左侧*的第一个，然后是第二个，依此类推。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T12:00:09.707

有疑问时使用括号。

与其他语言相比，PHP 中的三元运算符是左结合的，不能按预期工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-08T12:00:11.797

用括号分隔第二个三元子句。

```
echo true ? 1 : (true ? 2 : 3); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-08T12:00:29.870

从[文档](http://php.net/manual/en/language.operators.comparison.php)

```
Example #3 Non-obvious Ternary Behaviour
<?php
// on first glance, the following appears to output 'true'
echo (true?'true':false?'t':'f');

// however, the actual output of the above is 't'
// this is because ternary expressions are evaluated from left to right

// the following is a more obvious version of the same code as above
echo ((true ? 'true' : false) ? 't' : 'f');

// here, you can see that the first expression is evaluated to 'true', which
// in turn evaluates to (bool)true, thus returning the true branch of the
// second ternary expression.
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-07T05:12:28.377

在您的情况下，您应该考虑执行语句的优先级。

使用以下代码：

```
echo true ? 1 : (true ? 2 : 3); 
```

例如，

```
$a = 2;
$b = 1;
$c = 0;

$result1 = $a ** $b * $c;
// is not equal
$result2 = $a ** ($b * $c); 
```

你在数学表达式中使用过括号吗？- 然后，根据执行优先级，结果是不一样的。在您的情况下，三元运算符的编写没有优先级。让解释器了解使用括号执行操作的顺序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-14T06:30:12.120

迟到了，但是从现在开始小心的一个很好的例子：

```
$x = 99;
print ($x === 1) ? 1
    : ($x === 2) ? 2
    : ($x === 3) ? 3
    : ($x === 4) ? 4
    : ($x === 5) ? 5
    : ($x === 99) ? 'found'
    : ($x === 6) ? 6
    : 'not found';
// prints out: 6 
```

PHP 7.3.1（Windows 命令行）的结果。我不明白他们为什么要更改它，因为如果我尝试更改它，代码将变得非常不可读。

# symfony - 向 symfony2 请求深度数组添加参数

> ID：14214428
> 
> 赞同：2
> 
> 时间：2013-01-08T11:57:02.833
> 
> 标签：symfony, request, symfony-2.0

我想在 symfony2 请求中向 ParameterBag 添加一个参数。

所以数组看起来像这样：

```
array (size=2)
  'editor' => 
    array (size=6)
      '_token' => string '5797a4faf1fced89404b80fb04b3cadffc99695e' (length=40)
      'login' => string 'editor' (length=6)
      'firstName' => string 'Joh' (length=3)
      'lastName' => string 'Ha' (length=2)
      'address' => 
        array (size=6)
          'time_zone_code' => string 'Africa/Abidjan' (length=14) 
```

我想在`editor array`. 我试过这个

```
$request->request->add(array('editor[password]' => $password)); 
```

但是当然这只是添加了一个`editor[password]`以`editor array`.

我是否必须替换整个 ParameterBag 或者是否有添加值的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T12:13:07.057

如果 editor 不是 ParameterBag 中的唯一数组，您可以获取 editor 数组，然后为其添加一个值并再次设置它：

```
$data = $this->getRequest()->request->get('editor');
$data['password'] = 'string';
$this->getRequest()->request->set('editor', $data); 
```

### 编辑

看起来谷歌组中有一个与类似答案相似的问题：[https ://groups.google.com/forum/?fromgroups=#!topic/symfony-devs/2-SWFtFKwxQ](https://groups.google.com/forum/?fromgroups=#!topic/symfony-devs/2-SWFtFKwxQ)

# vim - 如何在不将文本放入寄存器的情况下删除视觉选择？

> ID：14214431
> 
> 赞同：1
> 
> 时间：2013-01-08T11:57:05.120
> 
> 标签：vim

我本质上是在尝试完成在这个[线程](https://stackoverflow.com/questions/54255/in-vim-is-there-a-way-to-delete-without-putting-text-in-the-register)中提出的任务。使用视觉选择时，答案不起作用。

在不将文本放入寄存器的情况下，如何在 Vim 中删除可视选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:01:26.330

只需选择文本，然后按`"_d`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:07:53.940

如果`"_d`不起作用（但用字符替换选择），那么您处于*选择模式*，而不是视觉模式。您需要先预先`<C-g>`切换模式：`<C-g>"_d`.

# mysql - mysql 将行转换为列

> ID：14214433
> 
> 赞同：-1
> 
> 时间：2013-01-08T11:57:14.550
> 
> 标签：mysql

我有一个有两列的表：`client_id`和`invoice_id`. 对于每一个都`client id`可以有多个发票 ID。我正在搜索将上述表的行转换为列的 MySQL 查询。我只需要每个客户的前两张发票。类似于下面的伪代码：

```
SELECT ci.client_id, 
  first(ci.invoice_id) AS invoice_column1, 
  second(ci.invoice_id) AS invoice_column2
FROM client_invoices ci
GROUP BY ci.client_id 
```

client_invoices 的示例数据

```
client_id | invoice_id 
1           45
2           56
1           88 
```

样本输出

```
client_id | invoice_column1 | invoice_column2
1           45                88
2           56                NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:08:33.317

假设您有一个表，每个客户端都有多个条目，预期的查询应该如下所示。

```
SELECT
    ci.client_id,
    GROUP_CONCAT(ci.invoice_id) as InvoiceIds
FROM(
    SELECT
        client_id,
        invoice_id,
        @num := if(@group = client_id, @num + 1, 1) as row_number,
        @group := client_id as dummy                
    FROM    client_invoices
    GROUP BY client_id , invoice_id
    HAVING row_number <= 2  
) as ci
GROUP BY ci.client_id 
```

## [演示](http://sqlfiddle.com/#!2/c4b0f/36)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:36:41.753

您可以使用以下内容按组分配行号，然后将数据转换为列：

```
select client_id,
  max(case when group_row_number = 1 then invoice_id end) Invoice1,
  max(case when group_row_number = 2 then invoice_id end) Invoice2
from
(
  select client_id, invoice_id,
    @num := if(@client_id = `client_id`, @num + 1, 1) as group_row_number,
    @client_id := `client_id` as dummy, overall_row_num
  from
  (
    select client_id, invoice_id, @rn:=@rn+1 overall_row_num
    from client_invoices, (SELECT @rn:=0) r
  ) x
  order by client_id, overall_row_num
) src
group by client_id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/703a3/5)

或者更简单的方法：

```
select client_id, 
  max(case when rownum = 1 then invoice_id end) Invoice1,
  max(case when rownum = 2 then invoice_id end) Invoice2 
from 
(
  select client_id,
    invoice_id,
    @row:=if(@prev=client_id,@row,0) + 1 as rownum,
    @prev:=client_id 
  from client_invoices
  order by client_id
)src
group by client_id; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/703a3/8)

两者都产生结果：

```
| CLIENT_ID | INVOICE1 | INVOICE2 |
-----------------------------------
|         1 |       45 |       88 |
|         2 |       56 |   (null) | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T12:12:26.377

像这样的东西？

```
DECLARE tmp int(11);
DECLARE tmp2 int(11);
SELECT invoice_id INTO tmp FROM ci LIMIT 1,1;
SELECT invoice_id INTO tmp2 FROM ci LIMIT 2,1;
SELECT ci.client_id, 
 tmp AS invoice_column1, 
 tmp2 AS invoice_column2
 FROM client_invoices ci
 GROUP BY ci.client_id 
```

# sql - 从 SQL Server 中多个数据库的表中选择一个字段

> ID：14214435
> 
> 赞同：2
> 
> 时间：2013-01-08T11:57:23.953
> 
> 标签：sql, sql-server

我在 SQL Server 上有很多数据库（超过 50 个）。所有数据库都是相同的。每个数据库都有一个名为 DBVersion 的表。每个 DBVersion 都有一个列：“Version”，它是 varchar 类型的。在此表中，始终存在一条记录。

如何遍历所有数据库，从 DBVersion 表中选择“版本”并在 Microsft SQL Server Management Studio 中打印结果？

结果应如下所示：

1.  数据库 1 - 版本：5
2.  数据库 2 - 版本：8
3.  Database50 - 版本：6

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:12:21.070

如果数据库位于同一 SQL-Server 实例上，则可以使用 sp_msforeachdb 来迭代数据库

```
CREATE TABLE #tmp (DatabaseName VARCHAR(50), Version VARCHAR(200));

EXECUTE master.sys.sp_MSforeachdb '
                                USE [?]; 
                                IF EXISTS 
                                    (   SELECT  1
                                        FROM    sys.tables
                                        WHERE   [Object_ID] = OBJECT_ID(N''dbo.DBVersion'')
                                    )
                                    BEGIN
                                        INSERT #tmp (DatabaseName, Version) 
                                        SELECT ''?'', [Version] 
                                        FROM    dbo.DBVersion
                                    END';

SELECT  *
FROM    #tmp;

DROP TABLE #tmp; 
```

对使用未记录的过程有一些怀疑，所以你可以用游标重写它：

```
CREATE TABLE #tmp (DatabaseName VARCHAR(50), Version VARCHAR(200));

DECLARE DBCursor CURSOR LOCAL STATIC FORWARD_ONLY READ_ONLY
FOR
    SELECT  Name
    FROM    sys.databases;
OPEN DBCursor;

DECLARE @DBName VARCHAR(200) = '';
FETCH NEXT FROM DBCursor INTO @DBName;

WHILE @@FETCH_STATUS != 0
    BEGIN
        DECLARE @SQL NVARCHAR(MAX) = N'USE ' + QUOTENAME(@DBName) + '
                                        IF EXISTS 
                                            (   SELECT  1
                                                FROM    sys.tables
                                                WHERE   [Object_ID] = OBJECT_ID(N''dbo.DBVersion'')
                                            )
                                            BEGIN
                                                INSERT #tmp (DatabaseName, Version) 
                                                SELECT @DB, [Version] 
                                                FROM    dbo.DBVersion
                                            END';
        EXECUTE SP_EXECUTESQL @SQL, N'@DB VARCHAR(200)', @DBName;

        FETCH NEXT FROM DBCursor INTO @DBName;
    END

CLOSE DBCursor;
DEALLOCATE DBCursor;

SELECT  *
FROM    #tmp;

DROP TABLE #tmp; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:02:32.397

这会对你有帮助吗？

```
SELECT 'Database1-Version:'+CAST(Version AS NVARCHAR) FROM Database1.schemaname.DBVersion UNION
SELECT 'Database2-Version:'+CAST(Version AS NVARCHAR) FROM Database2.schemaname.dbo.DBVersion UNION
.... 
```

# c# - 持久布尔逻辑

> ID：14214436
> 
> 赞同：3
> 
> 时间：2013-01-08T11:57:37.463
> 
> 标签：c#, sql, sql-server, ado.net, boolean-logic

这是一种与设计相关的问题，而不是技术问题。标题可能不完美，请随意编辑。

我有如下要求：我想从表中保存 SQL Server 2012 中特定 jobEntity（不要与 SQL Server 工作混淆）的资格。出于同样的目的，我还有另一个表说资格，它保存了上述资格与工作表具有参考完整性的工作。用于制作它的存储过程具有参数 JobID 和用户定义的表类型的模式：

```
CREATE TYPE [dbo].[TableTypeQualificationJob] AS TABLE(
    [QualificationID] [int] NULL,
    [QualificationCriteria] [nvarchar](4000) NULL,
    [OptionTo] [bigint] NULL
)
GO 
```

我在业务层有相应的实体。因此，当用户为工作创建多个资格时，他将 List 传递给函数，并且底层方法将列表转换为数据表并使用存储过程添加到数据库中。

问题是 OR 或 AND 中的限定条件。例如，如果有 5 个资格，则说资格 1 资格 2 资格 3 资格 4 资格 5

并被强制执行为

> 资格 1 或资格 2 或 资格 3 和资格 4 和资格 5

所以它制作了三组

> （资格 1 或资格 2 或资格 3）与（资格 4）与（资格 5）

那么如何在 QualificationEntity 类和数据库中解释它。我通过手动将列表转换为用户定义表类型的 DataTable 来使用 ADO.NET 调用 SP，我该如何实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:37:32.173

我会将`OrQualifications`and存储`AndQualifications`为单独的实体，并将它们与实体保持为多对多引用`Job`，这样您就可以区分资格。

要确定申请人是否具有正确的资格，您检查是否满足实体中的所有资格，以及`AndQualification`是否满足实体中的任何资格`OrQualifications`。

* * *

编辑：

上述/初始答案旨在满足一个要求的资格列表和另一个要求至少一个资格的要求。对我来说这似乎已经足够好了，你确定你真的需要嵌套资格吗？相信我，让应用程序比它需要的更复杂是一个坏主意。

**表达式树**
嵌套限定是另一种野兽，这里是一个建议的解决方案：表达式存储为完整的二叉树（每个节点正好有 0 或 2 个子节点的二叉树）。这棵树中的所有节点都由运算符 AND 或 OR（& 或 |）组成，除了作为限定条件的叶子。

示例表达式：
(A | B & C) | (D&E)

（从表达式到树的转换完全取决于您输入数据的方式，最简单的方法是手动创建树！）

作为一棵树：

```
      |
   / \
  | &
 / \ / \
A&DE
   / \
  公元前

```

对于如何将此树持久化到数据库，您有许多不同的选择，例如：

*   绝对最小值为两列的分层模型，一列 Id，一列 ParentId。要获取树，您需要递归查询。对于关系数据库，此选项可能要求很高。
*   将树序列化为例如 xml (XmlSerializer) 或 json (json.NET) 并将其保存为文本。

我个人会选择序列化选项，因为您总是需要完整的树，并且很容易反序列化为数据结构。

这是一个示例数据结构：

```
public class Node
{
    public Node LeftChild { get; set; }
    public Node RightChild { get; set; }
}

class OperatorNode : Node
{
    public bool IsAnd { get; set; }
}

class QualificationNode : Node
{
    public bool IsQualificationMet { get; set; }
} 
```

然后你需要一个可以解析这棵树并输出真假的函数：

```
public bool EvaluateNode( Node node )
{
    var qualificationNode = node as QualificationNode;
    if ( qualificationNode != null )
    {
        return qualificationNode.IsQualificationMet;
    }
    var operatorNode = node as OperatorNode;
    if ( operatorNode.IsAnd )
    {
        return EvaluateNode( node.LeftChild ) && EvaluateNode( node.RightChild );
    }
    return EvaluateNode( node.LeftChild ) || EvaluateNode( node.RightChild );
} 
```

*免责声明：这是所谓的快速和肮脏的代码，请改进。*

**其他选项**
查看 System.Linq.Expressions.Expression。它可用于以编程方式构建逻辑，因此也许这是您可以使用的东西。

# php - 通过显示代表性产品链接到子类别

> ID：14214437
> 
> 赞同：3
> 
> 时间：2013-01-08T11:57:42.587
> 
> 标签：php, zend-framework, magento, categories

在类别页面上，是否可以显示**每个子类别**中的产品（一个或多个） ，以便当点击其中一个产品时，用户被定向到**产品的类别页面**，显示该类别的所有产品？

它只是在类别页面之前添加了一个步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:38:00.527

我可以向您推荐[以下扩展名](http://www.customy.com/magento-extensions/display-products-grouped-by-subcategories.html)。此扩展允许您在其父类别中显示按子类别分组的产品。

# drupal - Drupal 是否适合作为复杂结构化内容的 CMS？

> ID：14214439
> 
> 赞同：2
> 
> 时间：2013-01-08T11:57:52.643
> 
> 标签：drupal, content-management-system

在查看了该站点上的 Drupal 文档和问题后，我仍然不清楚 Drupal 是否适合创作复杂的结构化内容，所以我想知道 Drupal 专家是否可以帮助我？

我正在为非常不同的页面类型和非常不同的内容模型寻找基于 Web 的创作解决方案。许多（但不是全部）页面类似于具有顶级元数据的杂志文章，例如关键字、作者和标题，然后是一系列可能包含其他部分的各种类型的有序部分。

具体来说，我的页面包含任意重复的多态部分：例如，我有一篇包含部分的文章。我想在撰写文章时添加、删除、重新排序和删除部分。对于每个部分，我想选择下一部分是文本部分还是图像部分或引用部分等。我可能想将文本部分更改为图像部分。我有这些多态部分深度嵌套的情况。一些较低级别的部分类型在其结构中类似于 XHTML 元素，例如列表和图像，但对可用元素的列表和旁边的一些定制结构有更多限制。

我有使用 XML Schema 表示的页面的内容模型，使用 xs:choice 和 xs:extension 来表示多态性。重要的是，内容模型不会因为强迫它们进入一个不够灵活而无法适应它们的创作系统而受到损害。

我很想知道 Drupal 是否适合此类内容的创作环境，如果是，哪些插件适合完成此任务？

谢谢。

# tomcat - tomcat7 域设置

> ID：14214440
> 
> 赞同：0
> 
> 时间：2013-01-08T11:57:59.873
> 
> 标签：tomcat, ubuntu, tomcat7, ubuntu-server

我想（简单来说）将不同的文件夹发布到不同的网站域。例如*mysite2.com*、*mysite1.com*。在 apache2 httpd 中，我必须绑定。我究竟如何在 Tomcat 7 中做到这一点？我还制作了一些 NetBeans 项目（我想我必须将战争文件复制粘贴到某处）？

我有一个 VPS，我偶尔使用 FTP 上传文件。所以我想把 WAR 文件放到我的 /home 文件夹中，这样就很容易获得权限。（我的意思是我想更改网站文件的默认文件夹）

我真的不知道：

1) 在哪里为多个域及其内容路径进行配置？默认是

```
<Host name="localhost"  appBase="webapps"> 
```

如何将其更改为 /home/www/site1 /home/www/site2 以及如何为每个站点域进行配置？

2）标签中server.xml（iirc）到底应该写什么`<host>`，会不会和Catalina home有冲突？

我正在使用 Ubuntu 12.10。我没有运行 Apache httpd。只有Tomcat在那里。

我知道这是一个新手问题，但这就是我的身份，我无法通过 Google 或 Tomcat 7 文档掌握东西。

很困惑。需要你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:00:04.033

您在这里有 2 个不同的问题。

首先是如何在 Tomcat 中部署 Web 应用程序。我建议您阅读[http://tomcat.apache.org/tomcat-6.0-doc/appdev/deployment.html](http://tomcat.apache.org/tomcat-6.0-doc/appdev/deployment.html)。配置管理器应用程序后，这是为初学者部署应用程序的最简单方法。

您遇到的第二个问题是您的应用程序在不同地址上的外部访问。Apache 使用 VirtualServers 覆盖了这一点。因为无论如何，你[不能在默认端口 80 上运行 tomcat](https://www.google.com/search?client=ubuntu&channel=fs&q=run%20tomcat%20port%2080&ie=utf-8&oe=utf-8&gl=uk)，我建议你使用 Apache VirtualServers 和[mod_proxy](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)来实现这一点。

# java - 将 GWTquery 与 GWT 一起使用

> ID：14214441
> 
> 赞同：3
> 
> 时间：2013-01-08T11:58:00.393
> 
> 标签：java, jquery, gwt, gwtquery

谁能告诉我如何将 GWTquery 与 GWT 一起使用？GWTquery 教程页面主要介绍如何使用 jQuery，并没有过多解释如何嵌入它。例如，如果我想将它与 GWT 附带的默认 Stockwatcher 应用程序一起使用，并在 java 文件中使用 jQuery，就像 GWTquery 教程所说的那样，在哪里安装 jar 文件，以及如何导入它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T13:11:55.053

GWTquery 不使用 jQuery，它是`jQuery-like`在 GWT 中实现的 API，它不需要 GWT 库或 html 主机页面中的 jquery.js 文件，您可以像其他 gwt 库一样轻松添加其 jar 文件：

**Maven 设置**

如果您想在现有的 maven 项目上添加 GQuery，或者您不想使用 maven 原型，您只需在 pom.xml 文件中添加以下行：

```
 <dependencies>
   <dependency>
     <groupId>com.googlecode.gwtquery</groupId>
     <artifactId>gwtquery</artifactId>
     <version>1.1.0</version>
     <!-- If you are using old versions of gwt, uncomment the appropriate line -->
     <!-- <classifier>2.1.0</classifier> -->
     <!-- <classifier>2.0.1</classifier> -->
     <scope>provided</scope>
   </dependency>
 </dependencies> 
```

如果您不想使用 Maven，或者它是一个已经创建的项目，您可能有兴趣手动设置您的项目。首先，您需要下载与您的 GWT 版本相关的最新稳定版本的 gwtquery 库，并将其放在您的类路径中。如果您是一位经验丰富的 GWT 用户，您可能已经知道如何执行此操作，但如果您是初学者，这里有一个快速复习。

首先，通过运行创建一个新项目

```
$GWT_HOME/webAppCreator gwtquery.sample.Sample 
```

这将创建一堆包含示例项目的文件。找到 build.xml 文件并编辑 id="project.class.path" 添加的部分

```
<pathelement location="PATH_TO_DOWNLOADED_gwtquery-1.0-SNAPSHOT.jar"/> 
```

如果您使用的是 Eclipse，您可能还需要编辑 .classpath 文件并添加以下内容：

```
<classpathentry kind="lib" path="PATH_TO_DOWNLOADED_gwtquery-1.0-SNAPSHOT.jar"/> 
```

接下来，编辑 src/gwtquery/sample/Sample.gwt.xml 文件或项目的现有模块文件，并添加以下行以将 GQuery 导入 GWT 模块：

```
<inherits name='com.google.gwt.query.Query'/> 
```

最后，在您的模块入口点类（例如 src/gwtquery/sample/client/Sample.java）中添加以下导入语句以使 GQuery 易于使用：

```
import com.google.gwt.query.client.GQuery;
import com.google.gwt.query.client.Function;
import com.google.gwt.query.client.Selector;
import com.google.gwt.query.client.Selectors;
import static com.google.gwt.query.client.GQuery.*;
import static com.google.gwt.query.client.css.CSS.*; 
```

[更多信息](http://code.google.com/p/gwtquery/wiki/GettingStarted)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T18:26:09.083

您可以在 GWT 查询站点找到完整的分步指南 - [http://code.google.com/p/gwtquery/wiki/GettingStarted](http://code.google.com/p/gwtquery/wiki/GettingStarted)

除了[gwtquery-sample](http://grepcode.com/project/repo1.maven.org/maven2/com.googlecode.gwtquery/gwtquery-samples/)之外，您还可以在 Internet 上找到足够的示例。

# ruby-on-rails - 轨道载波

> ID：14214448
> 
> 赞同：0
> 
> 时间：2013-01-08T11:58:22.787
> 
> 标签：ruby-on-rails, image, file-upload, carrierwave

我为模型创建了一些动态属性，并在模型中添加了一些代码（setter/getter）来将这些属性定义为这个模型的实例变量。所有这些工作正常。

我正在使用键/值对来存储这些动态属性的值。

我想将这些属性与carrierwave一起使用来上传图像。上传图片后，我会将此图片存储在 aws s3 上，键/值对仅保存上传的名称，就像carrierwave 所做的那样。

我们有更好的选择/建议吗？

除了carrierwave以外，也可以去......谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:06:24.100

可能值得将回形针与 AWS-SDK 一起使用

宝石文件：-

```
gem "paperclip" 
gem 'aws-sdk',   :require => "aws-sdk" 
```

型号代码：-

```
 has_attached_file :image,
                  :styles => {
                  :tiny => "35x35",
                  :thumb => "250x250",
                  :large => "600x600"
                              }, 
:storage => :s3,
:bucket => 'BUCKET NAME',
:s3_credentials => {
  :access_key_id => 'xxxxxxxxxxYOUr ACCESS KEY IDxxxxxxxxxxxx',
  :secret_access_key => 'xxxxxxxxxxxYOUR SECRET ACCESS KEYxxxxxxxxxxx'
  } 
```

希望这可以帮助

# c# - asp.net中的sql server会话模式

> ID：14214457
> 
> 赞同：2
> 
> 时间：2013-01-08T11:58:47.423
> 
> 标签：c#, asp.net, sql-server-2008-r2

我在我的应用程序中使用了 sql server 会话模式。页面加载后会立即生成会话 ID。我在起始页中有一个用户登录名。但是我需要在用户登录成功后创建会话 ID。
**在 web.config 文件中**

```
<sessionState mode="SQLServer" sqlConnectionString="DBConnection" allowCustomSqlDatabase="true" regenerateExpiredSessionId="false" cookieless="false" timeout="1" ></sessionState>

<add name="DBConnection" connectionString="Data Source=localhost;DataBase=ASPState;Integrated Security=True;uid=sa;pwd=password-1" providerName="System.Data.SqlClient"/> 
```

会话 ID 是如何创建的？随着页面加载。我是否需要在用户登录方法中指定任何代码。

![会议](../Images/a0d6489593df0dc32520d109b3d40d74.png)

有什么建议么..

**编辑** 当登录页面被加载时，会话 id 在 ASPState 数据库中创建，如下所示。

```
SessionId   Created Expires     LockDate    LockDateLocal   LockCookie  Timeout Locked  SessionItemShort    SessionItemLong Flags
sf4chi20mebkfaw4taz345h5739e38f4    2013-01-08 12:38:23.340 2013-01-08 12:39:23.340 2013-01-08 12:38:23.340 2013-01-08 18:08:23.340 1   1   0   0x010000000000FF    NULL    0 
```

我可以设置登录完成后创建的会话吗？?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:07:56.473

> 我可以知道在应用程序启动时如何创建会话 ID。？

会话不是在应用程序启动时创建的，而是在用户第一次点击应用程序时创建的。

> 我可以设置登录完成后创建的会话吗？?

一旦用户通过身份验证，您需要[调用`Session.Abandon()`并清除会话 ID cookie 。](https://stackoverflow.com/a/2416037/128217)

对于那些认为 OP 正在尝试解决不存在的问题的人，请阅读[会话固定攻击](http://en.wikipedia.org/wiki/Session_fixation)。

# java - Maven - 在 jar 中包含引用的库

> ID：14214459
> 
> 赞同：3
> 
> 时间：2013-01-08T11:59:00.393
> 
> 标签：java, maven-2, jar, osgi

我有用于发送邮件的 OSGi 包，因此它使用来自*mail-1.4.jar的**com.sun.smtp*包。但是 OSGi 服务无权访问这个 jar。

 *你能帮我吗，如何配置 Maven POM 文件，以便将*mail-1.4.jar*包含在我的包 jar 中，以便 OSGi 服务可以使用它？

**编辑**

错误是：
javax.mail.NoSuchProviderException：无法找到协议的提供者：smtp

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:04:48.920

昨天，我遇到了同样/相似的情况。尝试以下操作：

将以下行添加到您的依赖项列表中：

```
<dependency>
 <groupId>javax.mail</groupId>
 <artifactId>mail</artifactId>
 <version>1.4.1</version>
</dependency> 
```

希望它确实有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T09:13:26.517

我建议不要在您的捆绑包中包含邮件罐。更好的方法是在 osgi 运行时简单地安装 mail.jar。

你必须确保你有两件事来完成这项工作：

1.  确保在您自己的包的清单中导入所需的包。通常只需使用带有默认值的 Maven 捆绑插件即可，但您应该检查生成的清单
2.  将 mail.jar 部署到您的 OSGi 运行时中。如果您使用的是 apache karaf，那么只需执行以下操作： mvn install -s mvn:javax.mail/mail/1.4.4 如果没有，那么下面的 jar 应该会有所帮助。它包含一个正确的 OSGi 部署清单文件[http://search.maven.org/#artifactdetails|javax.mail|mail|1.4.4|jar](http://search.maven.org/#artifactdetails|javax.mail|mail|1.4.4|jar)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T12:09:44.873

尝试将此代码添加到您的 pom.xml

```
<dependency>

   <groupId>javax.mail</groupId>
   <artifactId>mail</artifactId>
   <version>1.4</version>

</dependency> 
```

或者

```
<dependency>
    <groupId>org.apache.commons</groupId>
    <artifactId>commons-email</artifactId>
    <version>1.2</version>
</dependency> 
```

这可能会帮助你！*

# android - 修改参数的 void getter

> ID：14214461
> 
> 赞同：4
> 
> 时间：2013-01-08T11:59:05.130
> 
> 标签：android

我找到了一些 android 代码（[链接](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/view/Display.java)）：

```
 public void getSize(Point outSize) {
      synchronized (this) {
          updateDisplayInfoLocked();
          mDisplayInfo.getAppMetrics(mTempMetrics, mCompatibilityInfo);
          outSize.x = mTempMetrics.widthPixels;
          outSize.y = mTempMetrics.heightPixels;
      }
   } 
```

只是想知道 - 是什么让这篇文章的作者以这种方式实现它？（为什么它修改参数而不是返回新对象？Get方法通常是愚蠢的，有返回值，并且不修改参数。我错了吗？）

我能想到的唯一原因是——效率。此方法的用户可以控制创建的 Point 对象的数量。但是设计这样的 API 是一种好的做法吗？

升级版：

我会这样实现它（或类似的东西）：

```
 public Point getSize() {
      Point outSize = new Point();
      synchronized (this) {
          updateDisplayInfoLocked();
          mDisplayInfo.getAppMetrics(mTempMetrics, mCompatibilityInfo);
          outSize.x = mTempMetrics.widthPixels;
          outSize.y = mTempMetrics.heightPixels;
      }
      return outSize;
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:24:15.537

如果多次调用此方法，则删除不必要的对象创建可以显着提高性能。当您开始查看经常调用的低级代码和方法时，您就开始进行此类优化。

像这样的方法的问题`getSize()`是你真的很想返回一个原语。如果`getSize()`返回，`int`这将不是问题。在这种情况下，将参数传递给用作“输出参数”的方法是很常见的。

在 J2ME 中，我们一直在做这种事情。特别是对于返回 x/y 坐标。在这种情况下，您有 2 个选项不会导致对象创建：

1.  创建 2 个方法：`int getX()`和`int getY()`OR
2.  创建一个将 X 和 Y 坐标写入传递参数的方法，如下所示：`void getXY(int[] coords)`

在第二种方法中，调用者分配一个`int[2]`数组一次（可能是静态的），然后`getXY()`可以使用相同的数组一次又一次地调用该方法来传递坐标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T12:19:32.757

原因是效率。在编写方式中，此方法的用户可以回收点实例并避免内存分配。该方法可能经常在`draw`视图代码中使用，在这里尽可能快地获得流畅的 UI 体验很重要。

分配新对象也意味着 GC 必须更频繁地启动。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T12:34:25.577

正如其他人所指出的那样，正如您所怀疑的那样，作者可能会这样做是为了提高效率。

Java 约定说一个名为的方法`getXXX`不应该接受任何参数并返回一个值。
吸气剂最好也应该没有副作用。

他应该给这个方法一个不同的名字。

# python - 在 python 中解析以分号分隔的文件以创建 CSV

> ID：14214464
> 
> 赞同：2
> 
> 时间：2013-01-08T11:59:27.933
> 
> 标签：python, list, csv, dictionary, tuples

我有一个以下格式的大文本文件，我希望将其转换为 CSV 文件。CSV 文件中的列名应该与下面看到的元组的第一部分相对应。可以安全地假设该行中的第一项（不是元组）将始终采用以下格式。

其他问题包括每行可能没有相同的字段 - 例如，有些有状态，有些没有。有些有同一个字段的多个实例，在这种情况下，我需要连接元组的第二部分（例如，致史密斯先生；格林夫人），但这些问题目前还很遥远。

```
[' Message  1 '];['Status', 'Read'];['Message ID', '012434'];['Message Truncation', 'OK'];['Priority', 'Low'];['Sent Time', '15/12/2010 05:56:36']
[' Message  2 '];['ColumnName', 'Read'];['ColumnName2', '012434'];['Message Truncation', 'OK'];['Priority', 'Low'];['Sent Time', '15/12/2010 05:56:36']
[' Message  3 '];['To', 'Mr Smith'];['To', 'Mrs green'];['Message Truncation', 'OK'];['Priority', 'Low'];['Sent Time', '15/12/2013 05:56:36'] 
```

...

我的计划是遍历文件中的每个块以建立列名，然后开始向这些列名添加数据，在适当的时候留空。我只是想知道如何以 pythonic 的方式来解决这个问题，因为我玩过一个字典列表并被卡住了。

我想我需要拆分行，然后将每个元组添加到字典中。有什么帮助吗？谢谢！

```
for line in file:
    line_split = line.split(';') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T12:14:36.647

您可以使用[`ast.literal_eval`](http://docs.python.org/2/library/ast.html#ast.literal_eval)将每个`['something', 'something_else']`块转换为 python 列表：

```
import ast

column_ids = set()

for line in file:
    columns = [tuple(ast.literal_eval(c)) for c in line.split(';')]
    columns[0] = ('id', columns[0][0]) # Give the first column a 'Id' key
    columns = dict(columns)  # turn the row into a dict
    column_ids.update(columns) 
```

添加打印语句并使用您的示例输入，结果是：

```
{'Status': 'Read', 'Sent Time': '15/12/2010 05:56:36', 'Message Truncation': 'OK', 'Message ID': '012434', 'Priority': 'Low', 'id': ' Message  1 '}
{'Sent Time': '15/12/2010 05:56:36', 'ColumnName2': '012434', 'Message Truncation': 'OK', 'Priority': 'Low', 'ColumnName': 'Read', 'id': ' Message  2 '}
{'Message Truncation': 'OK', 'To': 'Mrs green', 'Priority': 'Low', 'id': ' Message  3 ', 'Sent Time': '15/12/2013 05:56:36'} 
```

并且`column_ids`是：

```
set(['Status', 'Priority', 'ColumnName', 'Message Truncation', 'Message ID', 'To', 'Sent Time', 'ColumnName2', 'id']) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:22:56.827

使用纯python的解决方案...

```
infile = "listdata.txt"
data = open(infile, "r").readlines()

dataDict = []
columns = []

# Create a dictionary list
for line in data:
    row = line.split(";");
    rowData = {}
    for cell in row:
        cell = cell.strip()[1:-1].split(",")
        if len(cell) > 1:
            rowData[cell[0].strip().strip('"').strip("'")] = cell[1].strip().strip('"').strip("'")
    keys = rowData.keys()
    dataDict.append(rowData)
    columns = list(set(columns) | set(keys))

# Write dictionary list to file
outfile = "listdata.csv"
fp = open(outfile, "w")

for key in columns:
    fp.write(key + ", ")

fp.write("\n")

for data in dataDict:
    for key in columns:
        if key in data:
            fp.write(data[key] + ",")
        else:
            fp.write(",")
    fp.write("\n")

fp.close() 
```

输入：

```
[' Message  1 '];['Status', 'Read'];['Message ID', '012434'];['Message Truncation', 'OK'];['Priority', 'Low'];['Sent Time', '15/12/2010 05:56:36']
[' Message  2 '];['ColumnName', 'Read'];['ColumnName2', '012434'];['Message Truncation', 'OK'];['Priority', 'Low'];['Sent Time', '15/12/2010 05:56:36']
[' Message  3 '];['To', 'Mr Smith'];['To', 'Mrs green'];['Message Truncation', 'OK'];['Priority', 'Low'];['Sent Time', '15/12/2013 05:56:36'] 
```

输出：

```
Status, Sent Time, To, ColumnName2, Message ID, Message Truncation, Priority, ColumnName, 
Read,15/12/2010 05:56:36,,,012434,OK,Low,,
,15/12/2010 05:56:36,,012434,,OK,Low,Read,
,15/12/2013 05:56:36,Mrs green,,,OK,Low,, 
```

* * *

**更新**

这处理具有相同类型的多个条目，然后加入`":"`。

```
key = cell[0].strip().strip('"').strip("'")
value = cell[1].strip().strip('"').strip("'")
if key in rowData:
    rowData[key] = rowData[key] + ":" + value
else:
    rowData[key] = value 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T13:43:02.290

使用熊猫：

```
from pandas import *
import ast
from itertools import chain

df=read_csv('in.txt',sep=';',header=None).applymap(ast.literal_eval).ix[:,1:]
newdf=DataFrame(columns=set(i[0] for i in chain(*df.values)),index=df.index)

for row in df.iterrows():   
    for c in row[1].values:
        newdf[c[0]][row[0]]=c[1]      

newdf.to_csv('out.csv') 
```

# java - javax.persistence.metamodel.Map 和 java.util.Map 有什么区别？

> ID：14214480
> 
> 赞同：0
> 
> 时间：2013-01-08T12:00:17.133
> 
> 标签：java, google-app-engine, jdo

我正在尝试在 GAE 中编写一个带 JDO 注释的类，并且我想保留一张地图。该映射应该是一个实体字段，它是按日期散列的实体集合。（我什至不确定这是否是正确的方法）。

Eclipse 的自动完成功能为我提供了 javax.persistence.metamodel.Map 和 java.util.Map。这两者有什么区别？前者的例子是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:12:58.240

google-app-engine 中只允许使用这些集合 [1]：

*   `java.util.ArrayList<...>`
*   `java.util.HashSet<...>`
*   `java.util.LinkedHashSet<...>`
*   `java.util.LinkedList<...>`
*   `java.util.List<...>`
*   `java.util.Set<...>`
*   `java.util.SortedSet<...>`
*   `java.util.Stack<...>`
*   `java.util.TreeSet<...>`
*   `java.util.Vector<...>`
*   请参阅此帖子下方的第一条评论！

因此，我建议您将这些类与给定的包一起使用。

[1] [https://developers.google.com/appengine/docs/java/datastore/jdo/dataclasses?hl=de#Collections](https://developers.google.com/appengine/docs/java/datastore/jdo/dataclasses?hl=de#Collections)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T15:00:40.633

一个是 GAE 支持的标准 Java 库中的一个类，另一个是 JPA API 的一部分（您没有使用它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T13:31:00.870

据我从[java.util.Map](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)和[javax.persistence.metamodel.Map](http://grepcode.com/file/repo1.maven.org/maven2/org.datanucleus/datanucleus-jpa/2.0.0-m2/javax/persistence/metamodel/Map.java)的 javadoc 中看到的最新 API 中似乎不存在，元模型 Map 似乎是 util Map 的包装器，因此我们可以使用它获取有关 util Map 的元数据。

# android - HoloEverywhere 库中的 ListView 类问题

> ID：14214481
> 
> 赞同：1
> 
> 时间：2013-01-08T12:00:19.427
> 
> 标签：android, listview

我正在尝试为项目使用**HoloEverywhere**库，但在构建它之后，它`error`在`ListView`小部件文件夹下的类中提供。错误在于`dispatchDraw(Canvas canvas)`方法。某些变量似乎没有定义，例如 mListPadding、mIsCacheColorOpaque。

我错过了什么吗？

# haskell - Haskell函数求解释

> ID：14214483
> 
> 赞同：-11
> 
> 时间：2013-01-08T12:00:21.313
> 
> 标签：haskell, functional-programming, binary-tree

```
data BTree a = Empty | Node (BTree a) a (BTree a) -- This is a node-labelled binary tree 
```

有人可以解释一下以下 Haskell 函数吗？

1.  `labels :: BTree a -> [a]`

    ```
    labels Empty = []
    labels (Node left label right) = labels left ++ [label] ++ labels right 
    ```

2.  `reflect :: BTree a -> BTree a`

    ```
    reflect Empty = Empty
    reflect (Node left label right) = Node (reflect left) label (reflect right) 
    ```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T12:26:32.967

第一：一些格式。这就是这段代码在 Haskell 中的典型格式：

```
data BTree a = Empty 
             | Node (BTree a) a (BTree a)

labels :: BTree a -> [a]
labels Empty                   = [] 
labels (Node left label right) = labels left ++ [label] ++ labels right

reflect :: BTree a -> BTree a
reflect Empty                   = Empty 
reflect (Node left label right) = Node (reflect left) label (reflect right) 
```

（提示：如果您将代码缩进 4 个空格，它将正确显示突出显示的语法）。现在让我们来看看它：

```
data BTree a = Empty 
             | Node (BTree a) a (BTree a) 
```

定义新的“参数”数据类型。它被称为参数，因为`a`它是一个类型参数。这意味着`a`可以用任何其他类型替换，例如`Int`、`Double`、`String`或其他类型。想想 C++ 中的模板或 Java 中的泛型。`Empty`并且`Node`被称为数据类型的*构造函数*。A`BTree a`可以是`Empty`或（这就是`|`符号）包含 a `Node`，其中包含 a`BTree a`和`a`another `BTree a`。该定义是*递归*的，因为数据类型 ( `BTree a`) 显示在它自己的定义中。

```
labels :: BTree a -> [a]
labels Empty                   = [] 
labels (Node left label right) = labels left ++ [label] ++ labels right 
```

`labels`收集树中包含的所有值。`a`第一行是类型声明：它采用带有节点 ( )的二叉树`BTree a`并将其映射到`a`s ( `[a]`) 列表。单独的类型已经让您对可能发生的事情有一个很好的了解。

接下来的两行是所谓的*模式匹配*。这些类似于`case`其他语言中的语句：您区分不同的可能性，然后选择适当的情况（尽管它们更强大）。您应该注意它们如何与具有的两个构造函数完全对应`BTree a`。如果我们在一个`Empty`节点上，那么我们将只返回一个空列表 ( `[]`)。否则，我们将进入下一行，并且 a `Node`which 必须有 a`BTree a`和`a`a`BTree a`我们绑定到`left`、`label`和`right`。我们可能会调用`left`，`label`以及`right`任何我们想要的，但这些都是直观的。

现在`left`和`right`又是类型`BTree a`，所以我们可以调用`labels`两者并期望它们返回一个`a`s 列表，即`[a]`. 所以标签也是*递归*的，因为它在定义中调用了自己。这是一个非常强大的技术，在 Haskell 中被大量使用。`labels`然后连接它得到的列表`labels left`，一个只包含当前标签 ( `[label]`)，然后一个它来自`labels right`。所以我们可以有效地得出结论，它将左子树的标签与当前标签和右子树的标签连接起来，并将它们全部放入一个列表中。

```
reflect :: BTree a -> BTree a
reflect Empty                   = Empty 
reflect (Node left label right) = Node (reflect left) label (reflect right) 
```

工作方式与 几乎相同`labels`，只是它返回标签树而不是列表。如此有效，这无济于事，它有点昂贵的身份功能。但它是更强大的东西的模板。例如，您可以很容易地传递另一个函数`reflect`并将其应用于其每个元素。

# ios - RestKit - 取消所有请求并停止所有映射操作

> ID：14214488
> 
> 赞同：1
> 
> 时间：2013-01-08T12:00:38.210
> 
> 标签：ios, restkit

我正在创建一个从服务器获取大量数据的应用程序，而restkit 需要大量时间来映射所有数据。现在，如果用户从应用程序中注销，我想取消所有剩余的请求并取消下载数据的所有映射。

我试着用

```
[[RKObjectManager sharedManager].requestQueue cancelAllRequests]; 
```

但是，这只会停止后续请求，但不会停止对已下载数据的映射。

我怎样才能做到这一点 ？我正在使用 RestKit V0.10。

# c# - 使用彭博新闻的 RSS 提要

> ID：14214494
> 
> 赞同：2
> 
> 时间：2013-01-08T12:00:49.287
> 
> 标签：c#, asp.net, rss

我一直在寻找使用彭博 RSS 提要的解决方案。

请查看他们的 XML [Bloomberg RSS 提要](http://www.bloomberg.com/feed/podcast/on-the-economy.xml)

如您所见，`<itunes:summary>`我想得到，但不知道如何获得。

目前，我正在使用这个

```
List<FeedModel> list = new List<FeedModel>();
XmlReader reader = XmlReader.Create(rssUri);

SyndicationFeed feed = SyndicationFeed.Load(reader);

var feedItems = from item in feed.Items
                select new FeedModel()
                {
                    Content = item.Summary.Text,
                    Id = item.Id,
                    PublishDate = item.PublishDate.DateTime.ToString(),
                    Title = item.Title.Text,
                    Link = item.Links.First().Uri.ToString()
                };
return feedItems.ToList(); 
```

我使用[雅虎新闻](http://rss.news.yahoo.com/rss/world)，它工作正常，但不是彭博社。请帮忙？

**额外信息**

我是一名 php 开发人员，我需要用 c# 为我的公司开发一个小模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:51:36.920

这很简单：

```
var doc = XDocument.Load("http://www.bloomberg.com/feed/podcast/on-the-economy.xml");

XNamespace itunes = "http://www.itunes.com/dtds/podcast-1.0.dtd";

var query = doc.Root.Elements("channel")
                .Elements("item")
                .Select(p => new BloomergFeeds
                {
                    Title = p.Element("title").Value,
                    Link = p.Element("link").Value,
                    Guid = p.Element("guid").Value,
                    PublishDate = p.Element("pubDate").Value,
                    Itunes = new Itunes
                    {
                        Author = p.Elements(itunes + "author").First().Value,
                        Subtitle = p.Elements(itunes + "subtitle").First().Value,
                        Summary = p.Elements(itunes + "summary").First().Value,
                        Duration = p.Elements(itunes + "duration").First().Value,
                        Keywords = p.Elements(itunes + "keywords").First().Value,
                    }
                }).ToList();

 public class BloomergFeeds
 {
     public string Title { get; set; }
     public string Link { get; set; }
     public string Guid { get; set; }
     public string PublishDate { get; set; }
     public Itunes Itunes { get; set; }
  }

  public class Itunes
  {
     public string Author { get; set; }
     public string Subtitle { get; set; }
     public string Summary { get; set; }
     public string Duration { get; set; }
     public string Keywords { get; set; }
  } 
```

输出格式很好：

![在此处输入图像描述](../Images/8be9509c7a6784de66f7dcd9032f73e9.png)

显然，您可以更进一步，将关键字拆分为 的新属性`List<string>`，为链接添加新属性（附件）等。无论您想要什么。

享受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:38:17.557

这是一个如何获取扩展属性的快速示例。

**用法**

```
var model = GenerateModelFromRssFeed("http://www.bloomberg.com/feed/podcast/on-the-economy.xml"); 
```

**代码**

```
public class FeedModel
{
    public string Id { get; set; }
    public string Content { get; set; }
    public DateTime PublishDate { get; set; }
    public string Title { get; set; }
    public string Link { get; set; }
    public string Summary { get; set; }
}

public IEnumerable<FeedModel> GenerateModelFromRssFeed(string feedUri)
{
    if (string.IsNullOrWhiteSpace(feedUri)) throw new ArgumentNullException(feedUri);

    using (var reader = XmlReader.Create(feedUri))
    {

        SyndicationFeed feed = SyndicationFeed.Load(reader);
        if (feed == null) throw new ApplicationException("Bloomberg feed cannot be downloaded");

        return from item in feed.Items
                select new FeedModel
                {
                    // this looks a little ugly but is necessary to check if the object (Summary) is null as an 
                    // exception will be thrown when trying to access a property on a null object
                    Content = item.Summary == null ? string.Empty : item.Summary.Text,
                    Id = item.Id,
                    PublishDate = item.Summary == null ? DateTime.MaxValue : item.PublishDate.DateTime,
                    Title = item.Title == null ? string.Empty : item.Title.Text,
                    Link = item.Links.Any() ? item.Links.First().Uri.ToString() : string.Empty,

                    // add in additional logic to test if the element extension is not null
                    Summary = item.ElementExtensions.FirstOrDefault(x => x != null && x.GetObject<XElement>().Name.LocalName.ToLowerInvariant() == "summary").GetObject<XElement>().Value
                };
    }
} 
```

您显然可以`GenerateModelFromRssFeed`根据需要将该方法设为静态。

# javascript - 使用 jquery 在两个列表中传输和排列数据

> ID：14214495
> 
> 赞同：1
> 
> 时间：2013-01-08T12:00:53.600
> 
> 标签：javascript, jquery, jquery-ui

```
<html>    
<head>
<script language="javascript"> 
$(function(){
//For Moving Up..
    $("#button Up").click(function(){
    $("#listbox > option:selected").each(function(){
    var listItem = $(this);
    var listItemPosition = $("#listbox option").index(listItem) + 1;
        if (listItemPosition == 1) return false;
        listItem.insertBefore(listItem.prev());
  });
});
//For Moving Down..
    $("#button Down").click(function(){
    var itemsCount = $("#listbox option").length;
    $($("#listbox option:selected").get().reverse()).each(function() {
    var listItem = $(this);
    var listItemPosition = $("#listbox option").index(listItem) + 1;
    if (listItemPosition == itemsCount) return false;
    listItem.insertAfter(listItem.next());
   });
});
//For Moving right..
    $("#button1").click(function(){
        $("#list1 >> option:selected").each(function(){
            $(this).remove().appendTo("#list2");
        });
    });
//For Moving Left..
    $("#button2").click(function(){
        $("#list2 << option:selected").each(function(){
            $(this).remove().appendTo("#list1");
        });
    });
});
</script>
</head>
<body>
<div>
    <h3>List A</h3>
    <select id="list1" multiple="multiple" rows=2>
       <option value=1>Chennai</option>
         <option value=2>Bangalore</option>
        <option value=3>Kolkata</option>
     <option value=4>Pune</option>
    </select>
    <br/>
    <input id="button1" type="button" value=">>" />
        <input id="button Up" type="button" value="Move Up" />
   <input id="button Down" type="button" value="Move Down" />

</div>
<div>
    <h3>List B</h3>
    <select id="list2" multiple="multiple" rows=2>   
       <option value=1>Jackfruit</option>
         <option value=2>Papaya</option>
        <option value=3>Water Melon</option>
     <option value=4>Banana</option>
    </select>
    <br/>
    <input id="button2" type="button" value="<<" />
</div>

</body>
</html> 
```

**需要帮助以将所有功能实现为单独的功能。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:09:58.290

如下所示定义您在文档外准备好的函数。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>ListBox</title>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">
function ReorderFields(actionType, listBoxCtrl) {
            if (actionType == 'up') {
                ListBoxMoveUp(listBoxCtrl);
            }
            else if (actionType == 'down') {
                ListBoxMoveDown(listBoxCtrl);
            }
        }

        function ListBoxMoveDown(ctrl) {
            var selectedDx = $("#" + ctrl).find("option:selected");
            var next = selectedDx.last().next();

            selectedDx.each(function() {
                $(this).insertAfter(next);
            });
        }

        function ListBoxMoveUp(ctrl) {
            var selectedDx = $("#" + ctrl).find("option:selected");
            var prev = selectedDx.first().prev();

            selectedDx.each(function() {
                $(this).insertBefore(prev);
            });
        }
$(document).ready(function(){
//jQuery Function works on click of the different Buttons

  //For Moving right..
  $("#datepickerImage").click(function(){
        $("#list1  option:selected").each(function(){
            $(this).remove().appendTo("#list2");
        });
    });
//For Moving Left..
    $("#button2").click(function(){
        $("#list2  option:selected").each(function(){
            $(this).remove().appendTo("#list1");
        });
    });
//The function Ends up here..
    });
</script>
</head>
<body>
//The first List Box
<div>
    <select id="lstFields" name="lstFields" style="width: 88px">
     <option value=1>America</option>
     <option value=2>London</option>
     <option value=3>Singapore</option>
     <option value=4>Malaysia</option>
     </select>
    <br/>
    <input type="button" value="Up" onclick="ReorderFields('up', 'lstFields');return false;" />
    <input type="button" value="Down" onclick="ReorderFields('down', 'lstFields');return false;" />
</div>
//The second List Box
    <div>
    <h3>List A</h3>
    <select id="list1" style="width: 88px">
       <option value=1>Chennai</option>
         <option value=2>Bangalore</option>
        <option value=3>Kolkata</option>
     <option value=4>Pune</option>
    </select>
    <br/>

</div>
//The Third List Box
<div>
    <h3>List B</h3>
    <select id="list2" style="width: 88px">   
       <option value=1>Jackfruit</option>
         <option value=2>Papaya</option>
        <option value=3>Water Melon</option>
     <option value=4>Banana</option>
    </select>
    <br/>
    <input id="button2" type="button" value="<<" />
</div>

</body>
</html>
```

值正在正确交换您的代码正在工作只需要在准备好的文档之外定义。

# unity3d - 如何防止 Unity 在构建中打包外部资源文件？

> ID：14214505
> 
> 赞同：1
> 
> 时间：2013-01-08T12:01:27.500
> 
> 标签：unity3d

我想要一个配置 jsonfile，我可以在编译的版本中进行编辑。现在，Unity 将我的文件与其他资源一起打包到一个文件中，有没有办法防止文件出现这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:18:59.697

来自[统一文档](http://docs.unity3d.com/Documentation/ScriptReference/Resources.html)：

> “资源”文件夹中的所有资产都将包含在构建中

如果您的 config.json 不在 Resources 文件夹中，那么只有在游戏中的脚本对象加载或以其他方式使用它时，它才会包含在构建中。

如果您需要访问 config.json 中的数据但不希望最终用户能够修改该文件，那么请考虑将您的配置序列化为二进制 blob。

PS：请返回并接受您之前问题的一些答案。我们回答者需要业力！

# python - 从大的单行文件中分离记录

> ID：14214508
> 
> 赞同：0
> 
> 时间：2013-01-08T12:01:36.640
> 
> 标签：python, python-3.x, kml

我正在使用 Python 3.3 我想编辑一个单行 1.4Mb 的谷歌地球 POI 文件 (.klm)。我需要隔离 begin`<placemark>`和 end的可变长度记录`</placemark>`，检查每个特定单词，扔掉没有它的那些，并保存剩下的。

有没有工具可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:18:08.887

KML 是一种 XML 格式。

使用 XML 解析器对其进行解析（例如`xml.etree.ElementTree`，包含在标准库中，或`lxml`）。

您可以使用诸如[PyKML 之](http://packages.python.org/pykml/)类的专用包来为包含的信息提供更高级别的 API，尽管该特定包尚未准备好 Python 3。

*我确实设法在该项目的文件上运行该[`2to3`工具](http://docs.python.org/3/library/2to3.html)，因此您的里程可能会有所不同。测试失败，但失败看起来是良性的（典型的 python 2 到 3 翻译差异）。*

# android - 关于root android设备和自定义ROM

> ID：14214510
> 
> 赞同：0
> 
> 时间：2013-01-08T12:01:45.860
> 
> 标签：android

我有根 android 设备 LG E400。我希望我的应用程序在设备启动后立即作为家庭应用程序启动。我希望该设备只能运行我的单个应用程序并禁用所有其他功能。此外，由于我的应用程序自动执行所有操作，我想禁用按钮（主页、返回和菜单等），因此没有人可以手动访问它。如何做到这一点？我需要这方面的帮助。

我想完全控制设备。这该怎么做。生根就足够了还是我需要定制ROM？请为此指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:08:06.857

为此，您将需要一个自定义 ROM。如果您没有构建自定义 rom 的经验，那么这些视频可能会有所帮助：

Android 内部结构：
[第 1](http://www.youtube.com/watch?v=1_H4AlQaNa0)
[部分第 2 部分](http://www.youtube.com/watch?v=rFqELLB1Kk8)

# iphone - 如何在谷歌地图中获得替代路线

> ID：14214511
> 
> 赞同：0
> 
> 时间：2013-01-08T12:01:48.340
> 
> 标签：iphone, ios, google-maps

我正在创建显示两个端点之间的路由的应用程序，这已经完成。但是现在我想显示的不仅仅是两端之间的路线，所以我该怎么做。我在谷歌上检查过`&alternative=true`可以提供替代路线，我已经尝试过了，但没有做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:21:51.163

`alternatives`- 参数用于方向 Web 服务。此服务不显示任何内容，它返回路线（当替代参数设置为 true 时，他将在可用时返回多条路线），您可以在某处显示路线。

使用 Javascript-API 时，必须将 DirectionsRequest 的选项设置`provideRouteAlternatives`为[true](https://developers.google.com/maps/documentation/javascript/reference?hl=en#DirectionsRequest)才能获取多条路线。但是没有实现同时显示所有返回的路由的选项，Renderer 默认会显示第一条路由。

您可以`panel`为[Renderer](https://developers.google.com/maps/documentation/javascript/reference?hl=en#DirectionsRenderer)设置，用户将能够在那里选择替代路线。

要同时显示所有路线，您必须自己解析`directionsResponse`并为每条路线绘制折线。

# c# - 使用 C#/Xaml 在网格中显示可变数量的图像

> ID：14214512
> 
> 赞同：1
> 
> 时间：2013-01-08T12:01:50.587
> 
> 标签：c#, windows, image, xaml

我有一个方法可以检索图像的绝对路径列表。我希望使用这些检索到的值在 Windows 8 应用程序中显示图像网格。需要注意的是列表可以是任何大小，我希望图像填满屏幕并继续向下。

这似乎是一个非常简单的问题，但我找不到任何关于如何使用 Google/Bing 执行此操作的明确答案 - 所以我说如果有人知道在这种情况下该怎么做，我会在这里发布它。

目前，我只是从我的音乐文件夹中检索文件列表，并将它们附加到屏幕上显示的字符串 - 没有图像出现，我不知道如何使用动态数量的图像进行这项工作. 有人可以帮我吗？

到目前为止的代码：

检索音乐文件夹中的图像：

```
 private async void SearchButton_Click(object sender, RoutedEventArgs e)
        {
            StorageFolder musicFolder = KnownFolders.MusicLibrary;

            List<string> fileTypeFilter = new List<string>();
            fileTypeFilter.Add(".png");

            QueryOptions queryOptions = new QueryOptions(CommonFileQuery.OrderBySearchRank, fileTypeFilter);
            //use the user's input to make a query
            queryOptions.UserSearchFilter = InputTextBox.Text;
            StorageFileQueryResult queryResult = musicFolder.CreateFileQueryWithOptions(queryOptions);

            StringBuilder outputText = new StringBuilder();

            //find all files that match the query
            IReadOnlyList<StorageFile> files = await queryResult.GetFilesAsync();
            //output how many files that match the query were found
            if (files.Count == 0)
            {
                outputText.Append("No files found for '" + queryOptions.UserSearchFilter + "'");
            }
            else if (files.Count == 1)
            {
                outputText.Append(files.Count + " file found:\n\n");
            }
            else
            {
                outputText.Append(files.Count + " files found:\n\n");
            }

            //output the name of each file that matches the query
            foreach (StorageFile file in files)
            {
                outputText.Append(file.Name + "\n");
            }

            OutputTextBlock.Text = outputText.ToString();
        } 
```

OutputTextBlock 的 XAML 显示文件名，但没有图像：

```
<Grid x:Name="Output" Grid.Row="1" HorizontalAlignment="Left" VerticalAlignment="Top">
    <TextBlock x:Name="OutputTextBlock" Style="{StaticResource BasicTextStyle}" TextWrapping="Wrap"/>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:31:38.090

我不确定这是否适用于 Windows 8 应用程序......但在 WPF 中，我会尝试这样的事情：

```
<ItemsControl ItemsSource="{Binding Path=YourListOfPaths}" 
              HorizontalContentAlignment="Stretch">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <Image Source="{Binding}" />
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

的绑定到您的文件路径列表（eG an `ItemsSource`），描述了每个单个项目的显示方式 - 我只是为每个单个文件使用了一个控件。绑定到项目本身（这里是单个文件路径）。`ItemsControl``ObservableCollection<string>``ItemTemplate``Image``Source`

# java - 休眠无效的列名

> ID：14214520
> 
> 赞同：2
> 
> 时间：2013-01-08T12:02:04.480
> 
> 标签：java, sql-server-2008, hibernate, entities

我正在尝试进行简单的选择，但出现此错误：

```
org.hibernate.exception.SQLGrammarException: Column name 'mesAno' invalid.
at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:122)
at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:129)
at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
at $Proxy64.executeQuery(Unknown Source)
at org.hibernate.loader.Loader.getResultSet(Loader.java:1897)
at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:1698)
at org.hibernate.loader.Loader.doQuery(Loader.java:832)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:293)
at org.hibernate.loader.Loader.doList(Loader.java:2382)
at org.hibernate.loader.Loader.doList(Loader.java:2368)
at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2198)
at org.hibernate.loader.Loader.list(Loader.java:2193)
at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:470)
at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:355)
at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:195)
at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1244)
at org.hibernate.internal.QueryImpl.list(QueryImpl.java:101)
at br.com.gep.persistencia.DaoBasico.recuperarTodos(DaoBasico.java:28)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy62.recuperarTodos(Unknown Source)
at br.com.gep.sped.extrator.csv.arvore.CriadorArquivoCSVArvoreCompetencia.recuperarRegistros(CriadorArquivoCSVArvoreCompetencia.java:37)
at br.com.gep.sped.extrator.csv.CriadorArquivoCSV.escreverArquivoCsv(CriadorArquivoCSV.java:89)
at br.com.gep.sped.extrator.csv.CriadorArquivoCSV.criar(CriadorArquivoCSV.java:55)
at br.com.gep.sped.extrator.csv.CriadorConjuntoArquivosCSVArvore.criarArquivosCSV(CriadorConjuntoArquivosCSVArvore.java:113)
at br.com.gep.sped.extrator.csv.CriadorConjuntoArquivosCSVArvore.criarConjuntoDeArquivos(CriadorConjuntoArquivosCSVArvore.java:94)
at br.com.gep.sped.extrator.TarefaExtracao.extrairDados(TarefaExtracao.java:70)
at br.com.gep.sped.extrator.TarefaExtracao.extrairDadosEEnviar(TarefaExtracao.java:48)
at br.com.gep.sped.extrator.TarefaExtracao.extrair(TarefaExtracao.java:36)
at br.com.gep.sped.extrator.TarefaExtracao.run(TarefaExtracao.java:30)
at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:53)
at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:81)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
at java.util.concurrent.FutureTask.run(FutureTask.java:166)
at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:178)
at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:292)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)
Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: column name 'mesAno' invalid.
at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:197)
at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1493)
at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement(SQLServerPreparedStatement.java:390)
at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement$PrepStmtExecCmd.doExecute(SQLServerPreparedStatement.java:340)
at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:4575)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1400)
at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:179)
at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:154)
at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.executeQuery(SQLServerPreparedStatement.java:283)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
... 46 more 
```

这是我的实体。如您所见，它只有一列（它是一个简单的视图）。

```
@javax.persistence.Table(name = "WIN_ARVORE_EFD_COMPETENCIA", schema = "dbo", catalog = "SPED_WIN")
@Entity
public class VisaoArvoreEfdCompetencia {
    @Id
    private String mesAno;

    @javax.persistence.Column(name = "MES_ANO", nullable = true, insertable = true, updatable = true, length = 7, precision = 0)
    public String getMesAno() {
        return mesAno;
    }

    public void setMesAno(String mesAno) {
        this.mesAno = mesAno;
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;
        VisaoArvoreEfdCompetencia that = (VisaoArvoreEfdCompetencia) o;
        if (mesAno != null ? !mesAno.equals(that.mesAno) : that.mesAno != null) return false;
        return true;
    }

    @Override
    public int hashCode() {
        return mesAno != null ? mesAno.hashCode() : 0;
    }
} 
```

这是这个实体的观点：

```
SELECT CAST(MONTH(DATAFISCAL) AS VARCHAR(2)) + '_' + CAST(YEAR(DATAFISCAL) AS VARCHAR(4)) AS MES_ANO
FROM dbo.MESFISCAL
WHERE (Status = N'AB') 
```

我的实体映射或视图中有问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:03:44.947

`@Column`使用注释在字段上指定列名。这将对实体使用字段访问，而不是混合文件和设置器注释。

```
@Id
@Column(name="MES_ANO", nullable = true, insertable = true, updatable = true, length = 7, precision = 0)
private String mesAno;

public String getMesAno() {
    return mesAno;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T12:25:44.440

来自[http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/)：

> 应避免在字段和方法中混合注释。Hibernate 会从@Id 或@EmbeddedId 的位置猜测访问类型。

如果将 @Id 注释放在字段上，则需要将其他 JPA 注释（@Column 等）放在字段（而不是 getter）上。您不能在 getter / 字段上混合注释。

所以在这里你可以写：

```
@Id
@Column(name="MES_ANO", length = 7)
private String mesAno; 
```

请注意，由于该列已经是 @Id，因此您的可空/可插入/可更新声明可能没有意义。

# c# - 将数据从 Form2 (textbox2) 传输到 Form1 (textbox1)？

> ID：14214523
> 
> 赞同：-2
> 
> 时间：2013-01-08T12:02:16.343
> 
> 标签：c#

> **可能重复：**
> [将数据从 Form2 (textbox2) 传输到 Form1 (textbox1)？](https://stackoverflow.com/questions/14212032/transfering-data-from-form2-textbox2-to-form1-textbox1)

我是新手，`C#`我在谷歌中找不到我正在寻找的答案，所以我希望这里有人可以帮助我。我只是在练习将数据从一个表单传输到另一个表单*（或传递，随心所欲地调用它） 。*

这是我所拥有的：

我有 2 个表格 -`Form1`和`Form2`.
`Form1`包含一个文本框（命名`txtForm1`）和一个按钮（命名`btnForm1`）。
`Form2`包含一个文本框（命名`txtForm2`）和一个按钮（命名`btnForm2`）。

运行应用程序后，通过单击按钮`btnForm1`，用户打开`Form2`。用户在文本框 ( ) 中写入的文本`txtForm2`应传输到 中的文本框 ( `txtForm1`)，该按钮已禁用) `Form1`。

我该如何进行此转移？请帮忙。

好的，我需要清楚这是我拥有的所有代码：

`Form1`（打开的按钮`Form2`）：

```
 private void btnForm1_Click(object sender, EventArgs e)
    {
        new Form2().Show();
    } 
```

`Form2`（关闭按钮`Form2`）：

```
 private void btnForm2_Click(object sender, EventArgs e)
    {
        this.Close();
    } 
```

我没有别的了。（我完全是新手）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:11:32.963

在表格 1 上：

```
private void button1_Click(object sender, EventArgs e)
{
    Form2 frm2 = new Form2(textBox1.Text);
    frm2.Show();
    this.Hide();
} 
```

在表格 2 上：

```
public partial class Form2 : Form
{
public string textBoxValue;
public Form2()
{
    InitializeComponent();
}

public Form2(string textBoxValue)
{
    InitializeComponent();
    this.textBoxValue = textBoxValue;
}

private void Form2_Load(object sender, EventArgs e)
{
    textBox2.Text = textBoxValue;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:41:29.050

在表格 1 上：

```
private void btnForm1_Click(object sender, EventArgs e)
{
    Form2 frm2 = new Form2(txtForm1.Text);
    frm2.ShowDialog();
    txtForm1.Text = frm2.GetText;
} 
```

在表格 2 上：

```
public partial class Form2 : Form
{
  public string GetText { get {return txtForm2.Text;} }
  public Form2()
  {
    InitializeComponent();
  }

  public Form2(string textBoxValue)
  {
    InitializeComponent();
    this.txtForm2.Text = textBoxValue;
  }

private void btnForm2_Click(object sender, EventArgs e)
    {
        DialogResult = DialogResult.OK;
    }
} 
```

# callback - Titanium 移动推送通知回调未触发

> ID：14214525
> 
> 赞同：5
> 
> 时间：2013-01-08T12:02:26.623
> 
> 标签：callback, notifications, titanium, push, titanium-mobile

我也在开发者论坛上问过这个问题，但由于我的时间不多了，我希望在 stackoverflow 上发帖可能会更快。

目前我能够接收推送通知，并且我想发送一些额外的数据，经过四处搜索后我得出结论认为这应该是可能的。这个想法是在触发推送通知时设置来自用户收件箱（在应用程序中）的消息，因此用户会收到一个推送通知，上面写着“新消息”，并且随之而来的是消息以不同的键发送，即应该保存在调用`Applications.Properties`推送通知`callback`功能时。

但是，该`callback`功能永远不会被触发。通知被发送，徽章设置为我的 php 脚本所做的就是消息。为了测试是否触发了回调，我将徽章和消息更改为硬编码值（见下文），我主要从 ios muncher 获得此代码，但我假设警报中的警报`callback`将是向用户显示的警报。

我注意到的另一件事是，我只在用户不使用应用程序时收到推送通知，所以当它在后台运行时。当用户使用应用程序推送通知时没有显示，我认为这可能是因为没有触发回调。

提前感谢您提供的所有帮助。

下面是一些代码：

```
Titanium.Network.registerForPushNotifications({  
    types: [  
            Titanium.Network.NOTIFICATION_TYPE_BADGE,  
            Titanium.Network.NOTIFICATION_TYPE_ALERT,
            Titanium.Network.NOTIFICATION_TYPE_SOUND  
        ],  
        success:function(e){
            var deviceToken = e.deviceToken;  
            Ti.API.info("Push notification device token is: "+deviceToken);  

            //alert('device token is' +e.deviceToken);  
            var request = Titanium.Network.createHTTPClient();

            request.open("POST","http://*********/sendToken.php");  
            var params = {  
                "token": e.deviceToken,
                "username": authProperties[0].username,
                "userId": authProperties[0].userId    
            };  

            request.send(params);

            Ti.API.info("Push notification types:         "+Titanium.Network.remoteNotificationTypes);  
    Ti.API.info("Push notification enabled:"+Titanium.Network.remoteNotificationsEnabled);  
},  
error:function(e){
    alert("Error during registration: "+e.error);

    Ti.API.info("Error during registration: "+e.error);  
},
callback:function(e)  
{  
    // called when a push notification is received.  
    //Titanium.Media.vibrate();  
    var data = JSON.parse(e.data);

    request.open("POST","http://*********/callback.php");  
    var params = {  
        "token": e.deviceToken,
        "username": authProperties[0].username,
        "userId": authProperties[0].userId    
    };  

    request.send(params);

    //  Message data for the inbox
    var inboxData = data.inbox;     

    Titanium.App.properties.setString("badgeCount",data.badge);

    var badge = data.badge;  
    if(badge > 0){  
        Titanium.UI.iPhone.appBadge = 202;//badge;  
    }  

    var message = data.message;
    if(message != ''){  
        var my_alert=Ti.UI.createAlertDialog({title:'',message:JSON.stringify(inboxData) });

        my_alert.show();  
    }  
}  
}); 
```

以下脚本处理推送通知的 php 部分：

```
$serverId = "81273";  
    $name = "APNS";  
    $apnsPort = 2195;//5223;  
    $passPhrase = "";  
    $fwrite = "";  
    $sslUrl = "ssl://gateway.push.apple.com:" . $apnsPort;  
    $apnsCert = "./apns-distr.pem";//give the apns.pem file path on your server  
    $badge = 22;
$message = "[". date("d-m-Y h:i:s") . '] Er is een nieuw bericht voor u.';  
$inboxArray = array();
$inboxArray["id"]= 1;
$inboxArray["message"] = "Dit bericht dient als test";
$inboxArray["date"] = date("d-m-Y h:i:s");
$apnspayload['aps'] = array ('alert' => $message,'badge' => $badge,'sound' => 'default', 'inbox' => $inboxArray);  

$payload = json_encode($apnspayload);  

$tokens = array();
$tokens[] = "********** ** * * *";

foreach($tokens as $tokenId){

    $apnsMessage = chr(1) . pack('N', time()) . pack('N', time() + 86400) . chr(0) . chr(32) 
        . pack('H*', str_replace(' ', '', $tokenId)) . chr(0) . chr(strlen($payload)) . $payload;  

    $streamContext = stream_context_create();  

    stream_context_set_option($streamContext, 'ssl', 'local_cert', $apnsCert);  
    stream_context_set_option($streamContext, 'ssl', 'passphrase', $passPhrase);  

    $apns = stream_socket_client($sslUrl, $error, $errorString, 6, STREAM_CLIENT_CONNECT, $streamContext);  

    if($apns){  
        $fwrite = fwrite($apns, $apnsMessage);  

        fclose($apns);  
        @socket_close($apns);  
    }else{  
        echo 'request failed';  
    }  
}` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:54:50.267

问题解决了，

JSON 似乎出了点问题，仍然不确定是什么。

在 App.js 中： `var data = JSON.parse(e.data);`删除`JSON.parse()`代码后工作。由于某种原因，不需要解析 JSON 数据。因此该行变为`var data = e.data;`

# c++ - 具有完美转发的可变参数模板未针对移动语义进行优化

> ID：14214528
> 
> 赞同：0
> 
> 时间：2013-01-08T12:02:34.263
> 
> 标签：c++, templates, variadic-templates, move-semantics, perfect-forwarding

大家好，我在创建的可变参数添加模板上没有调用 move ctor 的问题。

```
#include <iostream>
#include <algorithm>
#include <functional>

class wrapped_heap_integer{
public:
    wrapped_heap_integer() : value(nullptr)
    {
        std::cout << "Default ctor\n"; 
    }
    explicit wrapped_heap_integer(int value_) : value(new int(value_))
    {
        std::cout << "ctor\n";
    }
    ~wrapped_heap_integer(){
        if(value != nullptr) delete value;
        std::cout << "dtor\n"; 
    }
    wrapped_heap_integer(wrapped_heap_integer const & other) : value(new int(*(other.value))){
        std::cout << "copy ctor\n"; 
    }
    wrapped_heap_integer(wrapped_heap_integer&& other) : value(other.value){
        other.value = nullptr;
        std::cout << "move ctor\n"; 
    }
    wrapped_heap_integer& operator = (wrapped_heap_integer other){
        std::swap(value,other.value);
        std::cout << "copy assignment\n"; 
        return *this;
    }
    wrapped_heap_integer& operator = (wrapped_heap_integer&& other){
        delete value;
        value = other.value;
        other.value = nullptr;
        std::cout << "move assignment\n"; 
        return *this;
    }
    wrapped_heap_integer operator + (wrapped_heap_integer const & other){
        wrapped_heap_integer a(*value + *(other.value));
        return a;
    }
    wrapped_heap_integer& operator+=(wrapped_heap_integer const & other){
        *value += *(other.value);
        return *this;
    }

    friend std::ostream& operator << (std::ostream& o, wrapped_heap_integer& w);
private:
    int* value;

};

std::ostream& operator << (std::ostream& o, wrapped_heap_integer& w){
    o << *(w.value);
    return o;
}

template<typename Head>
Head&& add(Head&& head){
    return std::forward<Head>(head);
}

template<typename Head, typename... Tail>
auto add(Head&& head, Tail&&... tail) -> decltype(head + add(std::forward<Tail>(tail)...))
{
    return head + add(std::forward<Tail>(tail)...);
}

int main(int argc, const char * argv[])
{

    auto result = add(wrapped_heap_integer(4),wrapped_heap_integer(10),wrapped_heap_integer(1));

    std::cout << result << std::endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:28:42.283

我想你在这里得到了普遍的参考。转发参数以不复制右值。

```
template<typename Head>
Head add(Head&& head){
    return std::forward<Head>(head);
} 
```

# django - 示例自定义字段继承外键中的问题

> ID：14214530
> 
> 赞同：0
> 
> 时间：2013-01-08T12:02:35.673
> 
> 标签：django, django-models

在模型中：

```
class Author(models.Model):
    author_name = models.CharField(max_length=50)
    email = models.CharField(max_length=100)
    editor =  ProfiledUserField(User)

    def __str__(self):
        return '%s'%(self.author_name) 
```

* * *

自定义 ProfiledUserField

```
from django.db import models
from django.contrib.auth.models import User
from django.db.models.fields.related import ForeignKey
from django.forms.fields import Select, TextInput
import datetime

class ProfiledUser(object):
    def __init__(self,user_id):
        self.user_id = user_id

    def get_user(self):
        return self.user

    def create_user(self,username,password="user123"):
        user = User.objects.create(username=username,password=password)
        return user

class ProfiledUserField(ForeignKey):
    description = "a custom user field"
    __metaclass__ = models.SubfieldBase

    def __init__(self,*args,**kwargs):
        return super(ProfiledUserField,self).__init__(*args,**kwargs)

    def to_python(self,value):
        return value

    def get_prep_value(self,value):
        print 'in get prep value',datetime.datetime.now().strftime("%A, %d. %B %Y %I:%M:%f")
        return value.id

    def get_db_prep_value(self,value,connection,prepared=False):
        print 'in get Db prep value',datetime.datetime.now().strftime("%A, %d. %B %Y %I:%M:%f")
        return value.id 
```

除了注册模型外，管理部分没有任何内容。

当我尝试通过管理员保存对象时，to_python 被调用两次，第一次是从选择小部件中选择用户对象，第二次使用值无，因此虽然我已经选择/提供了小部件的输入，但它第二次不存在 to_python 是调用导致验证错误“字段不能留空”（因为默认情况下编辑器不能为空或空白）

当我尝试通过 python shell 保存它时，

```
>>> author= Author.objects.create(author_name="Khalil Gibran" , email="kh@gmail.com", editor=user)
AttributeError: 'Author' object has no attribute 'editor_id'

>>> Author
<class 'articles.models.Author'>
>>> Author.__dict__
dict_proxy({'__module__': 'articles.models', 'MultipleObjectsReturned': <class 'articles.models.MultipleObjectsReturned'>, '_meta': <Options for Author>, '__str__': <function __str__ at 0x97d0d4c>, 'article_set': <django.db.models.fields.related.ForeignRelatedObjectsDescriptor object at 0x97e0b0c>, '_base_manager': <django.db.models.manager.Manager object at 0x97e02ec>, 'objects': <django.db.models.manager.ManagerDescriptor object at 0x97e034c>, 'editor': <django.db.models.fields.subclassing.Creator object at 0x97e024c>, 'DoesNotExist': <class 'articles.models.DoesNotExist'>, '__doc__': 'Author(id, author_name, email, editor_id)', '_default_manager': <django.db.models.manager.Manager object at 0x97e02ec>})
>>> dir(Author)
['DoesNotExist', 'MultipleObjectsReturned', '__class__', '__delattr__', '__dict__', '__doc__', '__eq__', '__format__', '__getattribute__', '__hash__', '__init__', '__metaclass__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', '_base_manager', '_default_manager', '_deferred', '_get_FIELD_display', '_get_next_or_previous_by_FIELD', '_get_next_or_previous_in_order', '_get_pk_val', '_get_unique_checks', '_meta', '_perform_date_checks', '_perform_unique_checks', '_set_pk_val', 'article_set', 'clean', 'clean_fields', 'date_error_message', 'delete', 'editor', 'full_clean', 'objects', 'pk', 'prepare_database_save', 'save', 'save_base', 'serializable_value', 'unique_error_message', 'validate_unique'] 
```

ysql 外壳：

```
mysql> describe articles_author;
+-------------+--------------+------+-----+---------+----------------+
| Field       | Type         | Null | Key | Default | Extra          |
+-------------+--------------+------+-----+---------+----------------+
| id          | int(11)      | NO   | PRI | NULL    | auto_increment |
| author_name | varchar(50)  | NO   |     | NULL    |                |
| email       | varchar(100) | NO   |     | NULL    |                |
| editor_id   | int(11)      | NO   | MUL | NULL    |                |
+-------------+--------------+------+-----+---------+----------------+
4 rows in set (0.00 sec) 
```

我究竟做错了什么？

如果我在模型中有 null=True，blank=True，相同的代码工作得很好，但否则我无法保存它。如果我再次删除**元类**=Subfieldbase，一切正常。什么是解释？

# php - Zend Framework 2 - Uploadify 失败，HTTP 响应 302

> ID：14214532
> 
> 赞同：1
> 
> 时间：2013-01-08T12:02:39.340
> 
> 标签：php, jquery, file-upload, zend-framework2, uploadify

我正在努力`Uploadify`工作，但我总是得到一个 http 状态码`302`。

我的 jQuery 看起来像这样：

```
$('#file_upload').uploadify({
        'swf'      : '<?php echo $this->basePath('/swf/uploadify.swf') ?>',
        'uploader' : '<?php echo $this->url('my-module', array('action'=>'uploadify')) ?>',
        'debug': true,
        'preventCaching'  : false
    }); 
```

当我通过浏览器调用我的操作时，它可以工作。当我通过浏览器调用 swf 时，我得到一个 200 - 所以它也可以工作。

我检查了uploadify-forum，但他们的解决方案要么不起作用，要么与ZF1规范有关......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T14:41:54.863

这是一个 flash cookie 错误，解决方案是重新启动会话

注意：我只在 unix/linux 上测试过

```
 class Module
{
    public function onBootstrap($e)
    {
        $eventManager = $e->getApplication()->getEventManager();
        $eventManager->attach(\Zend\Mvc\MvcEvent::EVENT_DISPATCH, array($this, 'onApplicationPreDispacth'), 100);

    }

    public function onApplicationPreDispacth($e)
    {
         $session_name = session_name();

         if (isset($_POST[$session_name])) {
              session_destroy();
              session_id($_POST[$session_name]);
              session_start();
         }
    } 
```

此功能的优先级必须高于您发布 302 重定向的功能

在javascript中：

```
$('#file_upload2').uploadify({
        'buttonText' : 'select files',
        'swf'      : '/static/lib/uploadify/uploadify.swf',
        'uploader' : '/service/upload',
        'auto'     : true,
        'formData' : voice : {"<?php echo session_name();?>" : "<?php echo session_id(); ?>",'source':'voice'}
        } 
        // Put your options here
    }); 
```

[在 zend 框架 2 中使用 uploadify](http://www.lijianxuan.com/post/2014/use-uploadify-in-zend-framework2-no-http302-error)我刚刚写了这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:28:22.797

我只是使用另一个上传器解决了这个问题。无论如何，Flash 上传已经过时了，所以我只使用了：http: [//blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

如果您进行基本安装，它就可以工作（我保留了uploadify上传功能）。唯一的缺点是你必须手动设计上传......但如果你熟悉 Bootstrap 和 jQuery，那就不是那么棘手了。

# php - 删除数组中的 0 个值

> ID：14214539
> 
> 赞同：0
> 
> 时间：2013-01-08T12:03:23.767
> 
> 标签：php, arrays

我已经尝试了这两种方法来从该数组中删除 0 值，但无济于事

```
foreach ($matches as $array_key=>$array_item)
{
  if($matches[$array_key] == 0)
  {
    unset($matches[$array_key]);
  }
}

var_dump ($matches[$array_key]); 
```

和这个

```
$matches_without_nulls = array_filter($matches);
print_r($matches_without_nulls[1]); 
```

但是，我不断得到的字符串是这个

```
{ [0] => string(7) "2337667" [1] => string(7) "2335765" [2] => string(7) "2332651" [3] => string(7) "2328582" [4] => string(1) "0" [5] => string(1) "0" [6] => string(1) "0" [7] => string(1) "0" } 
```

对正在发生的事情有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:05:20.550

尝试改变：

```
if($matches[$array_key] == 0) 
```

至

```
if($matches[$array_key] == "0") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T12:05:39.617

您的数组不包含`0`（整数），它包含`"0"`（字符串）：

```
if($matches[$array_key] == "0") 
```

那会成功的。

PS：你为什么打印出一个不存在的值`$matches[$array_key]`？它已取消设置，因此`NULL`已提供。使用`var_dump ($matches);`.

* * *

我刚试过这个，它工作得很好：

```
$matches = array (
        "2337667",
        "2335765",
        "2332651",
        "2328582",
        "0",
        "0",
        "0",
        "0"
    );

foreach ( $matches as $array_key => $array_item ) {
    if( $matches[$array_key] == "0") {
        unset($matches[$array_key]);
    }
}

var_dump ($matches);

//output

array(4) {
    [0]=> string(7) "2337667"
    [1]=> string(7) "2335765"
    [2]=> string(7) "2332651"
    [3]=> string(7) "2328582"
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-08T12:07:40.940

您的原始代码实际上是[删除所有`0`条目以及其他字符串](http://codepad.org/NjGHbuu5)。您最好为此使用[array_filter](http://php.net/array_filter)函数。

```
array_filter($matches, function($e){return $e!=0;}); 
```

只有[**没有回调的 array_filter 也有效**](http://codepad.org/uWHElNbX)。我不知道为什么它对你不起作用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-08T12:06:30.517

您可以使用**array_filter()**函数。点击以下网址

[http://php.net/manual/en/function.array-filter.php](http://php.net/manual/en/function.array-filter.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T12:24:39.597

大家好，我感谢 Dainis Abols，因为他帮助我解决了问题

问题是多重索引；这是工作解决方案

```
foreach($matches[1] as $array_key=>$array_item)
{
  if($matches[1][$array_key] == "0")
  {
    unset($matches[1][$array_key]);
  }
} 
var_dump ($matches[1]) 
```

;

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T12:07:57.170

比较值而不是使用键

```
foreach($matches as $array_key=>$array_item)
{
     if( $array_item == 0 ) // if($matches[$array_key] == 0)
     {
          unset($matches[$array_key]);
     }
}
var_dump ($matches); 
```

或者

您也可以尝试以下方法

```
foreach($matches as $array_key=>$array_item)
{
     if( !$array_item ) // if $array_item is below, it will get in the loop and excute your code.
     {
          unset($matches[$array_key]);
     }
}
var_dump ($matches); 
```

# android - 如何在菜单项上设置选择器的样式？

> ID：14214540
> 
> 赞同：4
> 
> 时间：2013-01-08T12:03:27.103
> 
> 标签：android, menuitem, android-theme

样式溢出项目仅适用于溢出项目，不适用于菜单按钮（硬件按钮）上的项目

如何在这些菜单项上设置 listSelector 的样式？

这里来自菜单按钮：

![菜单按钮](../Images/77f8ec1ab5380a503fdf020515410177.png)

这里来自溢出项目：

![溢出菜单](../Images/11fc4b16ccf25242cb558c0a598d9d79.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T12:51:50.683

我不确定这是否可能，因为许多著名的应用程序菜单项的样式不像 FB、Twitter 等。但是可以为菜单项中使用的图像设置样式，但另一个我不确定

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<!-- Single menu item
     Set id, icon and Title for each menu item
-->
<item android:id="@+id/menu_bookmark"
      android:icon="@drawable/icon_bookmark"
      android:title="Bookmark" />

<item android:id="@+id/menu_save"
      android:icon="@drawable/icon_save"
      android:title="Save" />

<item android:id="@+id/menu_search"
      android:icon="@drawable/icon_search"
      android:title="Search" />

<item android:id="@+id/menu_share"
      android:icon="@drawable/icon_share"
      android:title="Share" />

<item android:id="@+id/menu_delete"
      android:icon="@drawable/icon_delete"
      android:title="Delete" /> 

<item android:id="@+id/menu_preferences"
      android:icon="@drawable/icon_preferences"
      android:title="Preferences" /> 
```

检查代码的来源：[Android Style Menu Items](http://www.androidhive.info/2011/09/how-to-create-android-menus/)

# android - 像 Android 上的 instagramm 评论一样的 TextView

> ID：14214546
> 
> 赞同：0
> 
> 时间：2013-01-08T12:03:57.950
> 
> 标签：android, textview

如何使文本看起来像 instagramm 评论，带有一种颜色的 ckickable nick 和另一种颜色的不可点击文本和可选的可点击文本标签。

![在此处输入图像描述](../Images/cab5774d05594ae2b99f2dbd274ef6a0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:10:10.567

你可能想试试[这个教程](http://www.chrisumbel.com/article/android_textview_rich_text_spannablestring)

# django - django 中的下一个 url 不存在

> ID：14214548
> 
> 赞同：1
> 
> 时间：2013-01-08T12:04:15.203
> 
> 标签：django

我已成功设置应用程序将我发送到 url 之类的

```
http://localhost:8000/log_in/?next=/task/1/ 
```

我已将上下文处理器定义如下

```
TEMPLATE_CONTEXT_PROCESSORS = (
    "django.contrib.auth.context_processors.auth",
    "django.core.context_processors.debug",
    "django.core.context_processors.i18n",
    "django.core.context_processors.media",
    "django.core.context_processors.static",
    "django.core.context_processors.tz",
    "django.contrib.messages.context_processors.messages",
    "django.core.context_processors.request",

) 
```

但是当我登录时，它会将我重定向到主页，我`request`在登录视图中打印了，我得到的`GET`是空查询集，它是 strande，任何想法为什么！？

我也尝试添加

```
<input type="hidden" name="next" value="{{next}}" /> 
```

到 login.html，但这将`POST`请求的 next 添加为空参数

**编辑1** 登录视图，我尝试打印'next'参数并返回null，因为它`GET`是一个空的查询集

```
def log_in(request):
    """
    This method checks for the input username(email) and password.
    If they are empty the user id redirected to the login page, else checks whether
    the user is authenticated. If the user is not found in the database, it renders the login
    page with an error_message that the email or password are invalid. Further, it checks if the user's
    account is activated, it not he is redirected back to login and notified.
    If the user is activated, it checks for the field remember_me, if it is not checked, then the
    expiry date of the session is set to when the browser is closed.
    Then the user is logged in using the login in django backends and it checks on the session
    value if it is his first time or not to open the getstrated instead of the normal profile.
    """
    print request.GET['next']
    base_login=True
    if request.POST.has_key('username') and request.POST.has_key('password'):
        username = request.POST['username']
        password = request.POST['password']
        user = authenticate(username=username, password=password)
        if user is None:
            error_message = "The Email/Password is incorrect."
            return render(request, 'userprofiles/registration.html', {'error_message': error_message})
        else:
            if user.is_active:
                if not request.POST.get('remember_me', False):
                    request.session.set_expiry(0)

                login(request, user)

                request.session['DEPLOYED_ADDRESS'] = settings.DEPLOYED_ADDRESS

                first_week = False
                logged_user = UserProfile.objects.get(username=request.user.username)
                if (((request.user.last_login - request.user.date_joined).days) < 8) and (logged_user.got_started == False):
                    first_week = True

                if first_week:
                    return redirect('/getting_started/', RequestContext(request))
                else:
                    return redirect('/', RequestContext(request))

            else:
                error_message = "This Email Hasn't Been Activated Yet. Please Check The Activation Mail Sent To You."
                return render(request, 'userprofiles/registration.html', {'error_message': error_message})
    else:
        RegistrationForm = get_form_class(up_settings.REGISTRATION_FORM)

        if request.method == 'POST':
            form = RegistrationForm(data=request.POST, files=request.FILES)

            if form.is_valid():
                new_user = form.save()
                username = form.cleaned_data['username']
                password = form.cleaned_data['password']

                request.session['login'] = "first"

                # Automatically log this user in
                if up_settings.AUTO_LOGIN:

                    if up_settings.EMAIL_ONLY:
                        username = form.cleaned_data['email']

                    user = authenticate(username=username, password=password)
                    if user is not None:
                        if user.is_active:
                            login(request, user)
                            calculate_profile_completion(request)

                return redirect(up_settings.REGISTRATION_REDIRECT)

        else:
            form = RegistrationForm()

        return render(request, 'userprofiles/registration.html', {'form': form,'base_login': base_login}) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T14:47:46.687

`request.GET`当您想要呈现表单时，浏览器会向您的 Django 应用程序发出 GET 请求（这与and无关`request.POST`，它仅包含分别作为 URL 参数或表单编码数据发送的数据，并且始终可用）。由于您`next`在 GET 请求期间使用 URL 参数，因此您将可以访问它。但是，您随后继续将表单页面呈现为对请求的响应，而不包括`next`任何地方，因此浏览器不再有权访问此值，您的应用程序也无法访问。

当浏览器继续提交表单时，它通过执行 POST 请求来完成。碰巧您正在使用相同的处理程序来处理此请求，但它仍然是一个单独的请求，因此`next`您没有通过表单或 URL 参数传递的 , 会丢失。

您可以在原始 GET 请求中解决此问题（在向用户显示表单之前）。收到`next`URL 参数后，您可以执行以下操作之一：

**通过上下文将值传递给模板并将其**放入登录表单中，并在表单中呈现隐藏字段：****

 **```
<!-- inside your FORM element -->
<input type="hidden" name="next" value="{{ next }}"> 
```

**在 GET 请求期间**将 next 放入会话中：****

 **```
request.session['next'] = request.GET.get('next', '/') 
```

还有更多方法（例如，在登录表单类中添加隐藏字段），但以上两种最直接。****

# c# - IEnumerable 集合在 WCF 传输时被清除

> ID：14214551
> 
> 赞同：2
> 
> 时间：2013-01-08T12:04:21.207
> 
> 标签：c#, wcf, collections, ienumerable

我有一个类（比如 CustomClass），它的 type 属性很少`IEnumerable<Enum>`。

`CustomClass`通过WCF传递对象并返回`Result`类型（不同类型）的对象。

如果我`CustomClass`在 WCF 完成所有操作并将响应发送回客户端后检查参数，则`CustomClass`参数具有该值，但是当响应到达客户端时，`CustomClass`清除该 List 属性的所有内容的对象。

我只想知道，为什么？

类的结构`Custom`是

```
 public class QuerySearchCriteria 
 {       
    [DataMember]
    public string DScope { get; set; }

    [DataMember]
    public IEnumerable<SOURCE> Sources { get; set; }

    [DataMember]
    public IEnumerable<ETYPE> ETypes { get; set; }

    [DataMember]
    public IEnumerable<Score> Score{ get; set; }       
} 
```

一切都很好，但是`Score`财产中的物品被删除了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:31:39.070

只是根据您提供的信息进行猜测，但它是`Score`一个可序列化的类吗？在 WCF 中，枚举会自动包含在内，因为它们已被标记`Serializable` *，除非*您手动将 Enum 类型类标记为`DataContract`. 在这种情况下，您需要将 Enum 的每个成员标记为`EnumMember`. 这个[SO question and answer](https://stackoverflow.com/questions/187505/sharing-enum-with-wcf-service)很好地解释了它是如何工作的。

如果我猜错了 :) 那么您应该启用[WCF 跟踪](http://msdn.microsoft.com/en-us/library/ms733025.aspx)并发布该服务正在创建的肥皂，以获取有关正在发生的事情的更多详细信息。此外，发布`Score`课程的来源会有所帮助。

# java - 如何从字符串中解析日期并保持其格式？

> ID：14214554
> 
> 赞同：0
> 
> 时间：2013-01-08T12:04:40.413
> 
> 标签：java

我有这段代码可以将字符串转换为日期。但生成的日期始终采用另一种格式。

```
SimpleDateFormat format = new SimpleDateFormat("dd/MM/yyyy HH:mm");
        try {
            String dateString  = "18/01/2013 11:59";
            dateTest = format.parse(dateString);
            System.out.println(dateTest); //output: Tue Jan 18 11:59:00 GMT 2013
           } 
```

我怎样才能使它`dateTest`与原始格式相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:07:15.643

使用您用来解析日期的相同 SimpleDateFormat 格式化日期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T12:07:20.353

这个

```
System.out.println(format.format(dateTest)); 
```

将完成这项工作。您可以使用您的`format()`方法`SimpleDateFormat`来格式化输出，就像您的输入一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T12:24:51.117

java.util.Date 和 java.sql.Date 都存储秒和年，这就是您在打印 dateTest 时看到它们的原因。如果您想以您提供的格式 (dd/MM/yyyy HH:mm) 打印日期，您只需格式化日期。

```
Date dateTest;      
SimpleDateFormat desiredDateFormat = new SimpleDateFormat("dd/MM/yyyy HH:mm");

try
{
    String dateString  = "18/01/2013 11:59";
    dateTest = desiredDateFormat.parse(dateString);

    System.out.println(desiredDateFormat.format(dateTest)); //output: 18/01/2013 11:59
}
catch (Exception ex)
{
    //do something
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T12:07:45.347

你不能，因为 Date 没有“格式”。

如果您需要这个，您可以创建自己的包含内置格式的 Date 类，但这会很麻烦。

正常的方法是在打印时格式化日期。

```
 System.out.println(format.format(dateTest)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T12:17:17.077

输出时，使用：

`System.out.println(format.format(dateTest));`

# c# - 将 WPF 饼图绑定到 sql server

> ID：14214568
> 
> 赞同：2
> 
> 时间：2013-01-08T12:05:32.563
> 
> 标签：c#, wpf, xaml, pie-chart

我使用 WPF Toolkit 创建了一个饼图。我必须从我的数据库表中提取 Ram Usage 的值。在我的 MainWindow.xaml.cs 中，我创建了一个数据库连接字符串来建立数据库连接，如下所示：

```
 public partial class MainWindow : Window
  {
    SqlConnection con;
    SqlDataAdapter da_Ram=null;
    DataSet ds_Ram = null;
    public MainWindow()
    {
        InitializeComponent();
        try
        {
         con = new SqlConnection("Data Source=User212;Initial Catalog=UsageDB;Persist Security Info=True);
         con.Open();
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }
    }

    private void myChart1_Loaded(object sender, RoutedEventArgs e)
    {
        string selectStatement = "select * from Used,Total from UsageDB.dbo.RamUsage";
        da_Ram = new SqlDataAdapter(selectStatement, con);
        ds_Ram = new DataSet();
        // I am stuck here to proceed for filling my Dataset
    } 
```

} }

XAML 代码：

```
 <loc1:Chart Name="myChart1" Background="YellowGreen" Foreground="DarkBlue" 
     Title="Ram Usage - Pie Chart" LegendTitle="Usage Details" Loaded="myChart1_Loaded" Margin="26,12,12,12">
   <loc1:PieSeries Title="Ram Usage" ItemsSource="{Binding RamUsage}"
               IndependentValueBinding="{Binding Path=Total}"
               DependentValueBinding="{Binding Path=Used}">
    </loc1:PieSeries>
  </loc1:Chart> 
```

这种方法正确吗？还是我必须创建一个单独的类来从数据源中检索值？谢谢。

# c - 添加到列表中的奇怪值

> ID：14214571
> 
> 赞同：1
> 
> 时间：2013-01-08T12:05:42.160
> 
> 标签：c, list

```
#include <stdlib.h>
#include <stdio.h>

struct a
{
    a * next;
    double v;
};

void add(struct a* list,double d)
{
    if(!list->next) goto exception; //I know that a lot of programmers have a low opinion about "goto"

    list=list->next;

    list->v=d;

    return;

exception:
    printf("Cannot add a new element to the list\n");
}

int main()
{
    struct a l;
    double j;
    int i;

    for(j=1.0; j<10.0; j+=1.0)
    {   
        l.next= (a*)malloc(sizeof(a));
        add(&l,j);
        printf("%lf ",l.v);
    }
    return 0;
} 
```

该程序可以编译，但输出中出现一团糟：

> -92559631349317831000000000000000000000000000000000000000000000.000000 -92559631 349317831000000000000000000000000000000000000000000000.000000 -92559631349317831 000000000000000000000000000000000000000000000.000000 -92559631349317831000000000 000000000000000000000000000000000000.000000 -92559631349317831000000000000000000 000000000000000000000000000.000000 -92559631349317831000000000000000000000000000 000000000000000000.000000 -92559631349317831000000000000000000000000000000000000 000000000.000000 -92559631349317831000000000000000000000000000000000000000000000 0.000000 -92559631349317831000000000000000000000000000000000000000000000.000000

而想要的是：

1.0 2.0 3.0 4.0 5.0 6.0 7.0 8.0 9.0

错误在哪里以及如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T12:10:53.687

问题是`l.v`in*从来没有*`main()`被赋值为赋值给. to的分配对调用者不可见，因此in始终是 的相同实例。这意味着正在打印相同的 unialized 。*`add()``l.next``list``list->next``l``main()``struct a``prinf()``double`*

 *其他要点：

*   正确初始化`l`：

    ```
    struct a l = { NULL, 0 }; 
    ```

*   `malloc()`内部`next`实例的内存并初始化所有成员。`struct a``add()`
*   访问最新`next`的，例如`main()`通过返回最新的`struct a`地址`add()`。
*   [不要强制转换`malloc()`](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)（并使用 C 编译器）的返回值。*

# php - 无法获得我的文本字段的值

> ID：14214572
> 
> 赞同：1
> 
> 时间：2013-01-08T12:05:46.393
> 
> 标签：php, javascript, select, textfield, option

无法使用 php 获取我的文本字段“new_list_id”的值。这是我的代码：

```
<select id="mymenu" size="1" name='sf_old' class='short_tf'>
<option >&nbsp;</option>
<option value="nothing">New Input</option>
<option value="101">101</option>
<option value="102">102</option>
</select>

<input type='text' class='short_tf' name='new_sf' id='new_list_id' style='display:none;'/>

<script type="text/javascript">
  var selectmenu=document.getElementById("mymenu")
  selectmenu.onchange=function(){
  var index = selectmenu.selectedIndex;
  if (index == '1'){
    document.getElementById('new_list_id').style.display='inline';
    document.getElementById('mymenu').style.display='none'; 
 }
}
</script> 
```

* * *

使用 php 我可以获取我的 SELECT 标记“mymenu”的值，如果它是选定的，但如果它存在并且 SELECT 标记被隐藏，我无法检索我的文本字段“new_list_id”的值。

（问题）我为我的文本字段获得的值是来自我的 SELECT 标记的字符串“nothing”。想不通为什么。- 我是一个新手程序员，也很抱歉我的英语不好..非常感谢你的帮助。

我也在使用 name 属性，但它给了我相同的结果。请检查我的 php 代码。谢谢

```
if(isset($_REQUEST['sf_old']))
{    $sf=$_REQUEST['sf_old'];}
elseif(isset($_REQUEST['new_sf']))
{    $sf=$_REQUEST['new_sf'];}
else
{    $sf='';}

echo $sf; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:07:51.527

在 php 中，您必须使用“名称”属性。“new_sf” id 属性主要用于客户端脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:08:34.507

试试这个：

```
<input type='text' class='short_tf' name='new_list_id' id='new_list_id' style='display:none;'/> 
```

该`name`属性是 PHP 用来检索值的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T12:54:36.143

`display`将元素的样式属性更改为`none`只会使其在*视觉上*隐藏。它不会改变它会或不会被发送到服务器的事实。因此，第一个条件始终为真，`else`如果从未触发该子句。

您可以尝试另一种方法：

```
$sf = "";

if(isset($_POST['sf_old']) && isset($_POST['new_sf'])){
  if($_POST['sf_old'] == "nothing"){
    $sf = $_POST['new_sf'];
  } else {
    $sf = $_POST['sf_old'];
  }
}

echo $sf; 
```

我更喜欢直接使用`$_POST`而不是`$_REQUEST`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T12:59:47.280

我假设：如果输入字段不为空，您希望从输入字段中获取值，否则您希望从下拉列表中获取值。

你需要扩展你的 if 语句

这是整个代码：

```
<?php 

$sf='';

if(isset($_REQUEST['sf_old'])){    
    $sf = $_REQUEST['sf_old'];
        if($sf == "nothing")
            if(isset($_REQUEST['new_sf'])){
                $sf = $_REQUEST['new_sf'];
        }

    }

    echo $sf;
    ?> 
```

# css - 为什么页面更改时背景图像会移动？

> ID：14214573
> 
> 赞同：0
> 
> 时间：2013-01-08T12:05:47.897
> 
> 标签：css

在这个网站上： [http ://www.erikbijma.nl/](http://www.erikbijma.nl/)

当我从这个页面 [http://www.erikbijma.nl/clients/](http://www.erikbijma.nl/clients/)

到主页，标题徽标图像向左移动，然后返回原位。我怎样才能解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:24:51.147

是滚动条。在加载时，内容比窗口短 - 所以它不显示滚动条。但是当它完全加载时，它会变得比窗口长 - 并显示滚动条。

解决方案是始终显示滚动条 - 当内容较短时，它会显示，但会被禁用。
这就是 Facebook 的做法。

只需添加 `overflow:scroll;` 到您的`body`标签。

# image-processing - CBIR索引策略

> ID：14214574
> 
> 赞同：5
> 
> 时间：2013-01-08T12:05:50.930
> 
> 标签：image-processing, opencv, cbir

我正在开发一个集成在车牌识别应用程序中的 CBIR 解决方案。图像匹配算法非常健壮，但正如您可以想象的那样，数据库很大，从数据库中提取图像进行匹配非常慢。我试图用小的局部特征向量甚至单个数值来量化图像，但没有成功。这个想法是索引一些这样的值，以允许真正快速提取，同时大大减少匹配候选者的数量。我已经阅读了很多关于该主题的论文，但其中大多数都将分类和机器学习作为解决方案。由于我没有看到分类如何有用，因为所有图像都非常相似（车牌图片），我想与“ s 过去也有类似的问题，甚至有人对我如何解决这个问题有一些线索。很长一段时间以来，我一直在尝试设计出解决此性能问题的方法，但没有太多成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:47:50.570

鉴于评论中的附加信息，我将通过以下方式解决问题：

*   从图像中检测/分割板；

*   应用 OCR 以从车牌中提取带有字母和数字的字符串；

*   为了验证两个图像是否对应同一个车牌，比较两个字符串。另请注意，与多维特征向量相比，索引字符串要容易和有效得多。

# google-maps-api-3 - VichGeographicalBundle 和 Symfony2 中的自定义标记

> ID：14214580
> 
> 赞同：0
> 
> 时间：2013-01-08T12:06:21.550
> 
> 标签：google-maps-api-3, symfony-2.1

如何在 symfony2 和[VichGeographicalBundle](https://github.com/dustin10/VichGeographicalBundle/blob/master/Resources/doc/index.md)中设置自定义标记？

我的地图文件构造函数：

```
 public function __construct(EntityManager $em, $iconGenerator)
{
    parent::__construct();

    // configure your map in the constructor 
    // by setting the options

    $this->setShowZoomControl(true);
    $this->setZoom(15);
    $this->setAutoZoom(false);
    $this->setContainerId('map_canvas');
    $this->setWidth(630);
    $this->setHeight(200);
} 
```

我的树枝调用：

```
{{ vichgeo_map_for('showShop',shop) }} 
```

一切正常，除了我找不到如何将其设置为自定义图像（image/custom.png）的标记。

我试图在 config.yml 中注入服务，但我的知识太差了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:31:18.807

尝试类似：

```
<?php

namespace YourBundle\Map\Marker\Icon;

use Vich\GeographicalBundle\Map\Marker\Icon\IconGeneratorInterface;
use ..\Shop; // set the correct path

class CustomDefaultIconGenerator implements IconGeneratorInterface
{
    /**
     * {@inheritDoc}
     */
    public function generateIcon($obj)
    {
        if ($obj instanceof Shop) {
            return '/images/custom.gif'; // make sure the path is correct
        }
    }
} 
```

在你的配置中：

```
services:
    ...
    vich_geographical.icon_generator.default:
        class: YourBundle\Map\Marker\Icon\CustomDefaultIconGenerator
        public: false 
```

但看起来捆绑中的标记支持有点不完整。必须有更好的方法来做到这一点;）

# javascript - 如果键是字符串，则数组显示为空？

> ID：14214583
> 
> 赞同：0
> 
> 时间：2013-01-08T12:06:33.177
> 
> 标签：javascript

我在我的代码中设置了一个具有字符串键的数组，如下所示：

```
 var a = new Array();
 a[1] = new Array();
 a[1]['mystring'] = new Array();
 a[1]['mystring'] = 'test';
 if(isNullValues(a[1])) {
    alert("Array Empty.");
 }
 function isNullValues(data) {
    if (data == undefined || data == null || data.length == 0 || data == "") {
        return true;
     } else {
           return false;
     } 
  } 
```

它提醒我`Array Empty`字符串。但它不应该返回这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:15:02.427

JavaScript 中没有关联数组。您正在做的是将属性“mystring”添加到 a[1] 中的数组。因此，内部计数器“长度”不会增加并且`a[1].length == 0`为真，因此“isNullValues()”返回真。

您可以使用普通对象“彻底修复”此问题：

```
var a = new Array();
a[1] = {};
a[1]['mystring'] = 'test'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:16:36.853

试试这个：

```
 var a = new Array();
 a[1] = new Object();
 a[1]['mystring'] = 'test';
 if(isNullValues(a[1])) {
    alert("Array Empty.");
 }
 function isNullValues(data) {
    if (data == undefined || data == null || data.length == 0 || data == "") {
        return true;
     } else {
           return false;
     } 
  } 
```

我换`new Array()`了`new Object()`。

你也可以`a`写成`var a = [undefined, {mystring: 'test'}];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T12:16:54.667

显示的代码确实应该显示警报，因为：

```
a[1]['mystring'] = new Array(); 
```

只需添加一个名为`mystring`数组的新属性，其中包含的`a[1]`含义是：

```
a[1].length 
```

... 仍然是 0，因为没有元素被添加到实际数组中。并且数组中有 0 个元素，`isNullValues`由于检查，您的函数返回 true：

```
data.length == 0 
```

...导致显示警报。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T12:22:28.333

如前所述，您的第一个问题是使用数组而不是对象。现在，如果你想检查一个对象是否为空（没有键），你必须循环它的键：

```
function isObjectEmpty(obj)
    for(var p in obj) {
        if(obj.hasOwnProperty(p)) return false;
    }
    return true;
} 
```

# eclipse - 在 GIT 中需要一个裸仓库

> ID：14214584
> 
> 赞同：0
> 
> 时间：2013-01-08T12:06:33.810
> 
> 标签：eclipse, git, version-control, egit

在阅读教程时，我不断听到我需要创建一个称为裸存储库的东西来共享存储库中的所有文件。

我还听说一个裸仓库不包含任何 worfiles。

如果它没有任何工作文件，那么其他用户将在他们的本地计算机上克隆什么？？？

我目前在我的 linux 服务器中有一个目录，我需要在几个将通过 eclipse ide 访问的用户之间共享该目录。

任何人都可以用简单的话解释上面突出显示的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T13:03:26.033

> 在阅读教程时，我不断听到我需要创建一个称为裸存储库的东西来共享存储库中的所有文件。

当您`git push`到远程存储库时，您可以覆盖`working directory`. 为避免这种情况，您可以使用`bare`甚至没有`working directory`.

但是，因为没有`working directory`，你不能*在*repo 中工作，`bare`你只能`push`去它和`pull`从它。这使它成为多个用户的“收集点”或“协作存储库”的理想选择——这就是为什么教程说要为服务器`git`使用存储库的原因。`bare`

一个正常的`git`repo 是这样的：

```
my-repository/
    .git/
        COMMIT_EDITMSG 
        ORIG_HEAD
        description    
        index
        objects
        FETCH_HEAD     
        branches       
        gitk.cache     
        info           
        refs
        HEAD           
        config         
        hooks          
        logs
    file1
    file2 
```

`my-repository`是`working directory`，包含您处理的文件`file1`等`file2`。所有`git`数据都存储在`.git`文件夹中。

在`bare`存储库上，您没有工作文件夹。您所拥有的只是`.git`文件夹的内容，存储在该存储库的顶层：

```
my-bare-repository/
    COMMIT_EDITMSG 
    ORIG_HEAD
    description    
    index
    objects
    FETCH_HEAD     
    branches       
    gitk.cache     
    info           
    refs
    HEAD           
    config         
    hooks          
    logs 
```

这是其他用户克隆的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T12:36:37.187

> 我还听说一个裸仓库不包含任何工作文件。

是的。

远程仓库通常是一个裸仓库——一个没有工作目录的 Git 仓库。所有数据都存储在`.git`目录中，不需要工作目录。这只是一个协作点。

> 如果它没有任何工作文件，那么其他用户将在他们的本地计算机上克隆什么？？？

目录中的数据`.git`将被克隆。

# php - 获取单击提交的单选按钮的选定值并将值传递给函数

> ID：14214585
> 
> 赞同：1
> 
> 时间：2013-01-08T12:06:36.327
> 
> 标签：php, javascript, jquery

我正在用 PHP 做一些工作。我有两个 php 页面

索引.php

```
<html>
<head>
<script>
function getVote(int)
{
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("poll").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","poll-vote.php?vote="+int,true);
xmlhttp.send();
}
</script>
</head>
<body>
<h3>Is this correct? </h3>
<div id="poll">

<form>
Yes:
<input type="radio" name="vote" value="0">
<br>No:
<input type="radio" name="vote" value="1">
<input type="submit" value="Forward" onclick="getVote(value);"> 
</form>
</div>
</body>
</html> 
```

单击提交按钮时，我需要获取所选单选按钮的值并将其传递给函数。

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:15:20.027

在你的onclick内联中调用一个函数......

```
 <input type="submit" value="Forward" onclick="getVote();"> //here 
```

并在您的功能中检查无线电值..

```
var radiovalue= $('input[name="vote"]:checked').val() 
```

尝试这个

**JAVASCRIPT**

```
function getVote()
{
 var radiovalue= $('input[name="vote"]:checked').val()
 if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
  }
 else
 {// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
 }
 xmlhttp.onreadystatechange=function()
{

 if (xmlhttp.readyState==4 && xmlhttp.status==200)
  {
   document.getElementById("poll").innerHTML=xmlhttp.responseText;
  }
}
xmlhttp.open("GET","poll-vote.php?vote="+radiovalue,true);
xmlhttp.send();
} 
```

**HTML**

```
<input type="submit" value="Forward" onclick="getVote();"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:11:13.740

首先提供表单的动作和方法属性

```
<form action="index.php" method="post"> 
```

而不仅仅是你可以获得如下值：

```
$vote = $_POST['vote']; 
```

我希望这就是你要找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T12:11:25.093

尝试：

```
function getVote()
{
    var int=document.getElementById("vote").value;
    .... 
```

编辑：注意到它是一个无线电输入......所以这不起作用。你需要类似的东西：

```
function getRadioCheckedValue(radio_name)
{
   var oRadio = document.forms[0].elements[radio_name];

   for(var i = 0; i < oRadio.length; i++)
   {
      if(oRadio[i].checked)
      {
         return oRadio[i].value;
      }
   }

   return '';
} 
```

然后做：

```
function getVote()
{
    var int=getRadioCheckedValue(vote);
    .... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T12:19:53.620

调用没有任何值的函数，然后读出函数之间的单选按钮，如下所示：

```
var rval = document.getElementsByName('vote');

for (var i = 0, length = rval.length; i < length; i++) {
    if (rval[i].checked) {
        alert(rval[i].value); // your value
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T12:17:39.177

通过 jquery，您可以像这样获取所选收音机的值：

```
$('input[name=vote]:checked').val() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T12:18:31.040

尝试改变这两个：

```
<form name="myForm"> 

onclick="getValue(document.myForm);" 
```

然后是函数：

```
function getValue(form){
 var value = '';
 for (var i = 0; i < form.elements.length; i++ ) {
   if (form.elements[i].type == 'radio') {
         if(form.elements[i].checked == true) {
             value = form.elements[i].value;
        }
     }
   }

if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("poll").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","poll-vote.php?vote="+value,true);
xmlhttp.send();
} 
```

# maven - 如何在 Intellij IDEA 11 中构建 maven 导入项目？

> ID：14214588
> 
> 赞同：5
> 
> 时间：2013-01-08T12:06:44.933
> 
> 标签：maven, intellij-idea

我通过导入 maven 项目创建了一个新的 IntelliJ 项目。效果很好： ![在此处输入图像描述](../Images/afe932077f7054bd55f98e6caabc63f0.png)

我可以从 Maven 项目窗格（在 IDE 屏幕的左侧）执行 Maven 目标。例如，我可以使用 compile 目标很好地编译项目。

现在我想使用**Build|Make Project**选项从 UI 构建项目。但是，它不起作用。它抱怨缺少应用程序包，就好像它没有看到依赖项一样。这些依赖项在各自的 pom.xml 文件中定义，但从 IDE 制作项目似乎忽略了它。

我必须做些什么才能让它发挥作用？

**编辑**

好的，我已经从我的家中删除了**.m2**目录，并从 Maven 项目弹出窗口启动了编译目标。我可以在控制台窗格中看到 maven 从 Maven Central 下载依赖项（我只给出了日志的前几行，它很长）：

```
"C:\Program Files (x86)\Java\jdk1.6.0_29\bin\java" -Dclassworlds.conf=O:\java\apache-maven-3.0.4\bin\m2.conf -Dmaven.home=O:\java\apache-maven-3.0.4 -Didea.launcher.port=7534 "-Didea.launcher.bin.path=C:\Program Files (x86)\JetBrains\IntelliJ IDEA 11.1.2\bin" -Dfile.encoding=UTF-8 -classpath "O:\java\apache-maven-3.0.4\boot\plexus-classworlds-2.4.jar;C:\Program Files (x86)\JetBrains\IntelliJ IDEA 11.1.2\lib\idea_rt.jar" com.intellij.rt.execution.application.AppMain org.codehaus.classworlds.Launcher --no-plugin-registry --fail-fast --strict-checksums --update-snapshots -f C:\dev\shunra\Application\Builder\build\vcat\pom.xml compile
[WARNING] Command line option -npr is deprecated and will be removed in future Maven versions.
[INFO] Scanning for projects...
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for com.shunra:VCat-build:pom:1.0.0.SNAPSHOT
[WARNING] 'version' uses an unsupported snapshot version format, should be '*-SNAPSHOT' instead. @ line 7, column 11
[WARNING] 
[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.
[WARNING] 
[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.
[WARNING] 
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO] 
[INFO] util.logging
[INFO] Infra
[INFO] dtos
[INFO] commons
[INFO] license
[INFO] core
[INFO] vcat
[INFO] VCat-build
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building util.logging 0.0.1
[INFO] ------------------------------------------------------------------------
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-resources-plugin/2.5/maven-resources-plugin-2.5.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-resources-plugin/2.5/maven-resources-plugin-2.5.pom (7 KB at 7.2 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-plugins/19/maven-plugins-19.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-plugins/19/maven-plugins-19.pom (11 KB at 38.7 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/19/maven-parent-19.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/19/maven-parent-19.pom (25 KB at 70.0 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/apache/9/apache-9.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/apache/9/apache-9.pom (15 KB at 63.5 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-resources-plugin/2.5/maven-resources-plugin-2.5.jar
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-resources-plugin/2.5/maven-resources-plugin-2.5.jar (26 KB at 63.1 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-compiler-plugin/2.3.2/maven-compiler-plugin-2.3.2.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-compiler-plugin/2.3.2/maven-compiler-plugin-2.3.2.pom (8 KB at 29.6 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-plugins/18/maven-plugins-18.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-plugins/18/maven-plugins-18.pom (13 KB at 53.6 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/16/maven-parent-16.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/16/maven-parent-16.pom (23 KB at 66.8 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/apache/7/apache-7.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/apache/7/apache-7.pom (15 KB at 59.5 KB/sec) 
```

所以，我想连接到 Maven 中心没有问题。

**编辑2**

请注意： ![在此处输入图像描述](../Images/42e4d617bc334bd8672fb8e66fb5df7c.png) 注意问题 - 从 Maven 导入了两个模块 - **Common**和**Core**。他们的 Maven 工件 ID 分别是**commons**和**core**。IntelliJ 似乎混淆了工件 ID 和模块名称，因为：

1.  项目弹出显示模块名称，后跟括号中的相应 maven 工件 ID。
2.  在项目设置对话框中，模块仅由各自的 Maven 工件 ID 给出。
3.  但在模块依赖项中，它仅列出模块名称。

**核心**模块（maven artifact Id **core**）应该看到依赖**Common**模块（maven artifact Id **commons**），但它没有，这就是问题所在。

**编辑3**

这是最顶层的 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                      http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.shunra</groupId>
    <name>VCat-build</name>
    <version>1.0.0.SNAPSHOT</version>
    <artifactId>VCat-build</artifactId>
    <packaging>pom</packaging>
    <modules>
        <module>../../../util.logging</module>
        <module>../../../Infra</module>
        <module>../../../DTOs</module>
        <module>../../../ShunraLicense</module>
        <module>../../../Common</module>
        <module>../../../Core</module>
        <module>../../../VCat</module>
    </modules>
    <build>
        <plugins>
        </plugins>
    </build>
</project> 
```

这是通用模块的一个：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.shunra</groupId>
  <artifactId>commons</artifactId>
  <version>0.0.1</version>
  <dependencies>
        <dependency>
            <groupId>com.sun.jna</groupId>
            <artifactId>jna</artifactId>
            <version>3.0.9</version>
        </dependency>

        <dependency>
            <groupId>commons-io</groupId>
            <artifactId>commons-io</artifactId>
            <version>1.4</version>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-math</artifactId>
            <version>2.2</version>
        </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
            <version>1.9.4</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>javax.xml.bind</groupId>
            <artifactId>jaxb-api</artifactId>
            <version>2.2.7</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
                <groupId>com.shunra</groupId>
                <artifactId>util.logging</artifactId>
                <version>0.0.1</version>
        </dependency>
        <dependency>
                <groupId>com.google.code.gson</groupId>
                <artifactId>gson</artifactId>
                <version>1.6</version>
                <scope>compile</scope>
        </dependency>
        <dependency>
                <groupId>commons-codec</groupId>
                <artifactId>commons-codec</artifactId>
                <version>1.6</version>
                <scope>compile</scope>
        </dependency>
        <dependency>
              <groupId>org.restlet.jse</groupId>
              <artifactId>org.restlet</artifactId>
              <version>2.0.10</version>
        </dependency>
        <dependency>
          <groupId>javax.inject</groupId>
          <artifactId>javax.inject</artifactId>
          <version>1</version>
          <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>commons-configuration</groupId>
            <artifactId>commons-configuration</artifactId>
            <version>1.8</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>commons-beanutils</groupId>
            <artifactId>commons-beanutils</artifactId>
            <version>1.8.3</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
<!--        <dependency>
            <groupId>com.shunra</groupId>
            <artifactId>license</artifactId>
            <version>0.0.1</version>
        </dependency> -->
        <dependency>
              <groupId>com.shunra</groupId>
              <artifactId>dtos</artifactId>
              <version>0.0.1</version>
        </dependency>
  </dependencies>
    <repositories>
    <repository>
       <id>maven-restlet</id>
       <name>Public online Restlet repository</name>
       <url>http://maven.restlet.org</url>
    </repository> 
   </repositories>
  <build>
    <sourceDirectory>src</sourceDirectory>
    <resources>
      <resource>
        <directory>src</directory>
        <excludes>
          <exclude>**/*.java</exclude>
        </excludes>
      </resource>
    </resources>
    <plugins>
      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <configuration>
          <source/>
          <target/>
        </configuration>
      </plugin>
    </plugins>
  </build>
</project> 
```

这是核心模块的一个：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.shunra</groupId>
  <artifactId>core</artifactId>
  <version>0.0.1</version>
  <dependencies>
    <dependency>
      <groupId>com.shunra</groupId>
      <artifactId>commons</artifactId>
      <version>0.0.1</version>
    </dependency>
    <dependency>
        <groupId>com.shunra</groupId>
        <artifactId>license</artifactId>
        <version>0.0.1</version>
    </dependency>
  </dependencies>
  <build>
    <sourceDirectory>src</sourceDirectory>
    <resources>
      <resource>
        <directory>src</directory>
        <excludes>
          <exclude>**/*.java</exclude>
        </excludes>
      </resource>
    </resources>
    <plugins>
      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <configuration>
          <source/>
          <target/>
        </configuration>
      </plugin>
    </plugins>
  </build>
</project> 
```

**编辑4**

终于解决了。删除所有 Intellij 文件并再次重新导入。我猜 pom.xml 文件已经以一种让 IntelliJ 感到困惑的方式发生了变化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T12:21:22.867

查看屏幕截图，您似乎没有离线工作，这是导致此问题的最常见原因。

1.  尝试从 Maven 项目弹出窗口下载源代码和文档（它是左侧的第三个图标）。这通常具有唤醒它并导致下载的效果。

2.  使用运行时配置执行手动 Maven 构建。选择编辑配置 | Maven 然后确保您的工作目录是您的项目根目录，并选择“干净包”的目标。这将强制 Intellij 直接通过 Maven 重建，这可能会唤醒内部后台构建过程。

3.  检查您的设置并确保 Intellj 的 Maven 已正确读取 POM 中的存储库信息并能够找到 Maven Central。您的本地 settings.xml 可能存在阻止下载的问题。

4.  您还可以删除 .idea 和 .iml 文件以强制重新导入项目。

5.  重新启动 Intellij 并希望有最好的...

6.  作为最后的手段，通过 File | 使你的缓存失效。使缓存无效。这可能会减慢您的开发速度，直到它们通过使用进行重建。

**编辑以涵盖更新的问题**

看来您的 POM 文件有点乱。它们不遵循标准的[Maven 目录布局](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)，因此 Intellij 可能会混淆您的目录名称和内部 artifactId 条目。通常父 POM（包含模块）放置在项目的根目录中，模块在下面形成一个目录层次结构。

通过一些广泛的设置配置，您可以强制 Intellij 使用现有结构，但更好的解决方案是重命名目录以匹配 artifactIds 并移动模块，以便它们形成一个 Maven 反应器项目。

**根据评论进一步编辑**

似乎是 Intellij 项目同步。删除 .idea 目录和 .iml 文件就可以了。我已经相应地更新了列表。

# python - Web2Py 中的用户定义类

> ID：14214591
> 
> 赞同：0
> 
> 时间：2013-01-08T12:06:51.180
> 
> 标签：python, class, web2py

我是 Web2Py 的初学者。我希望开发一个简单的应用程序，用户应该使用用户名和密码登录（没有花哨的东西，如使用 facebook 或 OpenID 等登录）。登录成功后，用户会看到一些界面，并执行一些操作。我想象了一个`User`类和一个`JobStore`类（其中定义了某些方法，用户应该能够调用）。所有用户和会话将只有一个 JobStore 对象。当用户登录时，会创建一个引用 JobStore 的 User 对象。User 类有类似`GetRights()`, `RequestJob()`,`MarkAsFinished()`等的方法，而 JobStore 有类似的方法`GetUnfinished()`,`RemoveJobs()`等。从结构上讲，我应该在哪里拥有这些类，以便基于用户在视图上执行的某些操作，调用某些方法？这些类是否应该继承自 Web2Py 中使用的某些标准类？我试图找到一个示例，其中在控制器中使用了某种面向对象的方法，但到目前为止还没有找到。另外，这是 Web2Py 应用程序开发中的错误方法吗？到目前为止，我并没有尝试通过这些功能实现任何复杂的业务逻辑；我只是想了解传统编程方法如何以某种方式映射到 Web2Py 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:49:40.393

您可以在模型或控制器文件中定义类，但将它们放在应用程序的 /modules 文件夹中并将它们导入模型和控制器中需要的位置可能更有意义。您的类不需要从 web2py 类继承，但如果需要，它们可以这样做。有关使用模块和导入的更多信息，请参见[此处](http://web2py.com/books/default/chapter/29/04#Accessing-the-API-from-Python-modules)和[此处](http://web2py.com/books/default/chapter/29/04#Third-party-modules)。

有关重度面向对象方法的示例，请参阅[Movuca](https://github.com/rochacbruno/Movuca) CMS。大部分代码都在[/modules](https://github.com/rochacbruno/Movuca/tree/master/modules)文件夹中。

# php - PHP Postgres 默认连接

> ID：14214592
> 
> 赞同：0
> 
> 时间：2013-01-08T12:07:00.680
> 
> 标签：php, database, postgresql

PHP 中的 pg_query 和 pg_query_params 可以在参数列表中不指定连接资源的情况下执行，因此 PHP 将使用 pg_connect 打开的最后一个连接。

有没有办法检索 PHP 将使用的默认连接字符串，而不是试图找出它来自几个 PHP 文件的位置？get_default_dbConnection() 之类的东西？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:31:43.363

这并不意味着存在默认连接字符串，而是您不必提供引用该连接的参数。查看[php 上的示例：pg_query](http://php.net/manual/en/function.pg-query.php)

```
$conn = pg_pconnect("dbname=publisher");
if (!$conn) {
  echo "An error occured.\n";
  exit;
}

$result = pg_query($conn, "SELECT author, email FROM authors");
if (!$result) {
  echo "An error occured.\n";
  exit;
} 
```

在这个例子中`$conn = pg_pconnect("dbname=publisher")`，在他们的调用中`pg_query`有一个 long `$conn`。那是连接参考。现在你也可以使用

```
$conn = pg_pconnect("dbname=publisher");
$result = pg_query("SELECT author, email FROM authors"); 
```

`pg_query`现在将自动使用最后打开的连接（即 $conn）

更新：

您无法获取资源，`PHP`使用内部方法`php_pgsql_get_default_link`获取默认连接但不会在任何地方返回它（参见`php-5.4.9\ext\pgsql\pgsql.c`源代码）。

[您可以使用pg_dbname](http://php.net/manual/en/function.pg-dbname.php)或[pg_parameter_status](http://php.net/manual/en/function.pg-parameter-status.php)获取有关数据库名称或用户的信息

# c# - 如何更新实体框架模型中的列表？

> ID：14214594
> 
> 赞同：0
> 
> 时间：2013-01-08T12:07:06.273
> 
> 标签：c#, wpf, observablecollection

我的情况如下：

我有一个中央数据库。我有一个基于 EF 模型的应用程序。我已经在几台机器上安装了这个应用程序。

我需要做的是，当我在一台机器上更新某些东西时，它应该反映在绑定到在另一台机器上打开的可观察集合的数据网格中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:18:13.707

您可以尝试使用[HttpListener](http://msdn.microsoft.com/en-us/library/system.net.httplistener.aspx)类。

在页面中有一个示例显示如何实现它。

如果您的应用程序没有以管理员身份运行，您将需要使用 Netsh 注册您正在收听的 URL

# compass-sass - 指南针精灵在 ie8 和 ie7 中不起作用

> ID：14214604
> 
> 赞同：0
> 
> 时间：2013-01-08T12:07:49.417
> 
> 标签：compass-sass, css-sprites

我正在使用指南针制作图像精灵。它在现代浏览器上成功运行，但在 ie 8 和 ie7 中无法运行。我对指南针真的很陌生，我只是使用了一些简单的 mixin 来显示精灵。

`@include spr-sprite("arrow-step"); height:30px; width:30px;`

它有什么遗漏吗。提前感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T05:38:13.223

天啊。`h1:not(#foo)`我在 ie 8 和 ie 7 中不支持的选择器下使用 sprite 。它已解决。

# ruby-on-rails - Rails collection_select 字段重复条目

> ID：14214609
> 
> 赞同：0
> 
> 时间：2013-01-08T12:07:57.437
> 
> 标签：ruby-on-rails, forms, select, collections, updates

在我的 Rails 应用程序表单中，我有以下用于多选的代码：

```
<div class="field">
  <%= f.label :frameworks %><br />
  <%= f.collection_select :framework_ids, Framework.all, :id, :name, {}, {:multiple => true}  %>
</div> 
```

它在创建时运行良好，并且在编辑视图中正确显示了先前选择的框架。

但是当我提交一些其他更新的字段时，它会重复我数据库中的框架条目。

例如，如果我选择了“framework1”、“frameworks2”，更新后我在数据库“framework1”、“frameworks2”、“framework1”、“frameworks2”中，如果我再更新一次：“framework1”， “框架 2”、“框架 1”、“框架 2”、“框架 1”、“框架 2”。

那么我应该怎么做才能预防呢？

**编辑：** 控制器在这里：

```
@component = Component.find(params[:id])

    respond_to do |format|
        if @component.update_attributes(params[:component])
          @component.update_attribute(:numImages, @component.assets.size)
          @component.save

          format.html { redirect_to @component, notice: 'Component was successfully updated.' }
          format.json { head :no_content }
        else
          format.html { render action: "edit" }
          format.json { render json: @component.errors, status: :unprocessable_entity }
        end
    end 
```

结尾

顺便说一句，像我一样更新 :numImages 是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:52:56.533

对于 numImages 更新（您的子问题），我建议在您的组件模型中使用 before_update 方法。

```
 before_update :set_numimages

  def set_numimages
    numImages = assets.size
  end 
```

此外，您正在调用 update_attributes、update_attribute*并*保存在 @component 上。这会调用三个保存操作。我建议你把它改成这个，看看问题是否仍然存在：

```
@component = Component.find(params[:id])  

respond_to do |format|
  if @component.update_attributes(params[:component])
    format.html { redirect_to @component, notice: 'Component was successfully updated.' }
    format.json { head :no_content }
  else
    format.html { render action: "edit" }
    format.json { render json: @component.errors, status: :unprocessable_entity }
  end
end 
```

# drm - 英特尔 DTCP 示例实施套件 (SIK) 内容

> ID：14214610
> 
> 赞同：0
> 
> 时间：2013-01-08T12:08:00.010
> 
> 标签：drm, dlna

我对英特尔 SIK 有一些疑问。

这个 SIK 是否包含 DTCP 堆栈的完整实现？即：包括DTCP使用的椭圆曲线加密（ECC）的实现。？您能否解释一下作为该 SIK 的一部分将提供哪些所有模块？

基本上，我们必须为 arm 平台开发 DTCP 堆栈。通过使用 SIK，什么都可用，我们要开发什么模块。？

# iphone - 如何在 iOS 的 iPod 库中获取歌曲的物理文件位置

> ID：14214612
> 
> 赞同：1
> 
> 时间：2013-01-08T12:08:08.083
> 
> 标签：iphone, ipod, mpmediaitem

当用户从 iPod 库中选择音频时，我有 MPMediaItem 的引用。我通过使用获取该项目的资产网址

```
[mediaItem valueForProperty: MPMediaItemPropertyAssetURL] 
```

但这并没有给我文件的确切物理位置，而是给了我一个 url wrt iPod 库。

```
ipod-library://item/item.mp3?id=1840064795502796074 
```

有没有办法从 iPod 库中获取歌曲的物理 url？

**编辑**- 实际上我想从物理文件中提取 NSData 并将其发送到我的后端服务器，所以我需要物理文件 URL 而不是相对 URL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-23T01:14:42.937

这会起作用，但它有点慢。此外，它是为新的 MP 类编写的：

```
// song is an instance of MPMediaItem

if let val = song.value(forKey: MPMediaItemPropertyAssetURL) as? URL {
   let asset = AVURLAsset.init(url: val)

   if asset.isExportable {
      let exportSession = AVAssetExportSession(asset: asset, presetName: AVAssetExportPresetAppleM4A)

      let exportPath: NSString = NSTemporaryDirectory().appendingFormat("/\(UUID().uuidString).m4a") as NSString
      let exportUrl: NSURL = NSURL.fileURL(withPath: exportPath as String) as NSURL

      exportSession?.outputURL = exportUrl as URL
      exportSession?.outputFileType = AVFileTypeAppleM4A
      exportSession?.exportAsynchronously(completionHandler: {
          // do some stuff with the file
          do {
            try FileManager.default.removeItem(atPath: exportPath as String!)
          } catch {

       }
} 
```

# asp.net - 每次请求 ScriptResource.axd 和 WebResource.axd 时更新最后修改日期

> ID：14214616
> 
> 赞同：0
> 
> 时间：2013-01-08T12:08:25.600
> 
> 标签：asp.net, .net-4.0, iis-7.5, webresource.axd, scriptresource.axd

我们最近将 ASP.NET 解决方案从混合 .NET 3.5 Webforms 和 MVC 2 应用程序升级到了 .NET 4.5 Webforms 和 MVC 4 解决方案。

每当我们请求 Webforms 页面时，总是会为 ScriptResource.axd 和 WebResource.axd 文件更新 Last-Modified 响应标头。这会减慢我们的页面速度，因为我们总是请求新资源而不是从 IIS 获得 304 Not Modified。

我已经检查了诸如编译 debug="false" 和 system.web.extensions scriptResourceHandler cacheControl="true" 之类的明显内容。缓存控制和过期标头看起来不错。它只是 Last-Modified 日期随每个请求而变化。

任何关于如何停止更新 Last-Modified 的想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:04:16.223

我无法弄清楚是什么导致了这个问题。

[我能够通过使用RequestReduce](http://requestreduce.org/) HttpModule快速解决这个问题并提高网站性能，该模块发布处理页面输出以组合和缩小 javascript。

来自组合脚本的缓存按预期工作，并具有减少请求数量和下载总体大小的额外好处。

# asp.net-mvc-3 - ModelState.IsValid 失败后如何保留导航元素？

> ID：14214620
> 
> 赞同：0
> 
> 时间：2013-01-08T12:08:35.897
> 
> 标签：asp.net-mvc-3, validation

我有以下一对用于编辑的控制器方法。

初始调用没有问题，并且正确显示了来自两个子/导航对象的模型和属性（1:1 关系）。

当我尝试保存时，如果模型有效，则没有问题。

但是，当它无效时，我在视图中得到一个空引用，引用了任何子/导航属性——这些属性在原始视图中正确存在。

```
public ActionResult Edit(int id)
    {
        var reportcustomerlimit = db.ReportCustomerLimits.Single(r => r.Id == id);
        return View(reportcustomerlimit);
    }

    [HttpPost]
    public ActionResult Edit(ReportCustomerLimit reportcustomerlimit)
    {
        if (ModelState.IsValid)
        {
            db.ReportCustomerLimits.Attach(reportcustomerlimit);
            reportcustomerlimit.ReportCustomer.Verified = false;
            ReportGenerator.ClearAllReportsZip();
            db.ObjectStateManager.ChangeObjectState(reportcustomerlimit, EntityState.Modified);
            db.SaveChanges();
            return RedirectToAction("Index", new { id = reportcustomerlimit.CustomerNumber });
        }
        else
        {
            //What do I do here?
        }
        return View(reportcustomerlimit);
    } 
```

我错过了什么？

（注意：验证通常在客户端完成，并停止提交表单 - 但我已经关闭了 javascript 以测试服务器端验证是否也有效）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:23:43.007

试试这个代码：

```
[HttpPost]
    public ActionResult Edit(ReportCustomerLimit reportcustomerlimit)
    {
        if (ModelState.IsValid)
        {
            db.ReportCustomerLimits.Attach(reportcustomerlimit);
            reportcustomerlimit.ReportCustomer.Verified = false;
            ReportGenerator.ClearAllReportsZip();
            db.ObjectStateManager.ChangeObjectState(reportcustomerlimit, EntityState.Modified);
            db.SaveChanges();
            return RedirectToAction("Index", new { id = reportcustomerlimit.CustomerNumber });
        }
        else
        {
            var reportcustomerlimit = db.ReportCustomerLimits.Single(r => r.Id == id);
            return View(reportcustomerlimit);
        }

    } 
```

希望能帮助到你。

# asp.net - 使用会员 asp.net 的在线用户列表

> ID：14214624
> 
> 赞同：2
> 
> 时间：2013-01-08T12:08:45.217
> 
> 标签：asp.net, asp.net-membership

我想在我的网站上有一个包含在线用户的列表，我在本地主机中使用此代码，但它没有向我显示任何用户。有谁能够帮助我？我在哪里犯错了？

```
 MembershipUserCollection users;

        if (!IsPostBack)
        {
            // Bind users to ListBox.
            List<MembershipUser> onlineUsers = new List<MembershipUser>();
            foreach (MembershipUser user in Membership.GetAllUsers())
            {

                if (user.IsOnline)
                {
                    onlineUsers.Add(user);

                }

            }
            ListBox1.DataSource = users;
            ListBox1.DataBind(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:21:59.597

尝试更改此行：

```
ListBox1.DataSource = users; 
```

对此：

```
ListBox1.DataSource = onlineUsers; 
```

也不要忘记在 ListBox1 上设置 DataKeyField 和 DataValueField 属性。

# joomla - joomla 2.5模块中的ajax调用

> ID：14214625
> 
> 赞同：0
> 
> 时间：2013-01-08T12:08:46.927
> 
> 标签：joomla, joomla2.5

我喜欢创建一个自定义模块，其中有一个选择列表，在更改时必须从 db 中选择数据并显示数据。

如何在模块的辅助函数中提供 ajax 调用中的 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T16:12:47.750

您创建一个具有自定义位置的模块，然后在新文章中加载您的模块。

每篇文章都有一个 ID 和一个 ALIAS。所以 url 会是这样的

[http://myurl.gr/ID-ALIAS.html?tmpl=component&type=raw](http://myurl.gr/ID-ALIAS.html?tmpl=component&type=raw)

有关更多详细信息，请查看以下链接：
[How to load a custom html module using ajax-call joomla 2.5](https://stackoverflow.com/questions/18695025/how-to-load-a-custom-html-module-using-ajax-call-joomla-2-5)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T12:17:42.897

你可以使用这样的东西：

```
function datadelete(id){

 var dataString = 'id='+ id;
 $.ajax({
        type: "POST",
        url: "index.php?option=componentname&task=deleteecontacts&type=ajax",
        data: dataString,
        cache: false,
        success: function(msg)
        });
} 
```

我希望这能让您了解如何使用 Jquery 在 Ajax 调用中传递 URL

# windows - 如何在前台远程计算机上使用 Invoke-WMIMethod 运行进程

> ID：14214627
> 
> 赞同：0
> 
> 时间：2013-01-08T12:08:50.023
> 
> 标签：windows, wmi, powershell-2.0

我正在运行这个命令

```
Invoke-WmiMethod -ComputerName $machine -Credential $cred -Impersonation 3 -Path Win32_process -Name create -ArgumentList "powershell.exe -ExecutionPolicy Unrestricted -File C:\Windows_Updates.ps1" -Verbose 
```

唯一的问题是在远程机器上，它被创建为后台进程。当我打开任务管理器时，我可以看到 powershell.exe，但我无法确定发生了什么。我几乎到处都看过，但找不到解决方案。

基本上我需要远程执行powershell文件。我愿意使用其他可以看到脚本运行的解决方案。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-08T12:10:54.177

我不认为这是可能的。改用 psexec

[http://blogs.technet.com/b/heyscriptingguy/archive/2005/09/06/how-can-i-remotely-start-an-interactive-process.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2005/09/06/how-can-i-remotely-start-an-interactive-process.aspx)

sysinternals psexec [http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)

# android - Android：在 AsyncTask 中创建 ListView

> ID：14214631
> 
> 赞同：0
> 
> 时间：2013-01-08T12:09:12.617
> 
> 标签：android

我`ListView`在`AsyncTask`里面创作`Fragment`。在`onActivityCreated`方法中我调用`AsyncTask's execute()`方法，但是`onPause()`当我恢复活动之后，我的列表是空的。我应该再次调用`execute()`方法`onResume()`吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:17:36.400

是的，您必须调用 execute on `onResume()`。有关活动周期的更多信息，请参见[此处](http://developer.android.com/reference/android/app/Activity.html)。

# ios - ios 基于 Tile 的视图导航控制器

> ID：14214633
> 
> 赞同：0
> 
> 时间：2013-01-08T12:09:13.907
> 
> 标签：ios, windows-8, tile

我正在开发一个 iOS 应用程序，其中 UI 需要是“基于磁贴”的 - 想想 Windows-8

当应用程序启动时 - 一个“主屏幕”出现了六个不同大小的图块 - 有些是正方形，有些是矩形。

当用户点击（或双击）时，视图会发生变化，以便呈现更详细的视图。详细视图的右上角将有一个“X”。单击“X”将返回主屏幕。

我是 iOS 新手 - 是否有可用的标准框架来完成此任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:58:00.000

我认为您可以使用 UICollectionView ，因为它在 iOS 6 及更高版本中可用。根据您的要求自定义它。[这是一个可以帮助您的教程。](http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12)然后你可以像 UITableVIew 一样自定义它。

# iphone - 如何在 iPhone 编程中替换两个不同的字符串

> ID：14214635
> 
> 赞同：2
> 
> 时间：2013-01-08T12:09:23.863
> 
> 标签：iphone, objective-c

我正在我的应用程序中读取 CSV 文件。

我想替换两个不同的字符串并打印为一行。例如：

```
string1#$string2#$string3####string4 
```

我想`#$`用`,`和 `####`替换`\n`

并希望在 a 上显示结果`UILabel.`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T12:13:23.280

您可以使用`stringByReplacingOccurrencesOfString:withString:`方法，如下所示：

```
NSString *orig = "string1#$string2#$string3####string4";
NSString *res = [orig stringByReplacingOccurrencesOfString:@"#$" withString:@" "];
res = [res stringByReplacingOccurrencesOfString:@"####" withString:@"\n"]; 
```

请注意，原始字符串不会更改：相反，会使用您请求的替换生成一个新实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:13:27.020

采用

```
String = [String stringByReplacingOccurrencesOfString:@"#$" withString:@","];
String = [String stringByReplacingOccurrencesOfString:@"####" withString:@"\n"]; 
```

进而

```
yourLabel.text=String; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T12:13:44.387

试试这个

```
NSString *string = @"####abc#$de";
string = [string stringByReplacingOccurrencesOfString:@"####" withString:@"\n"];
string = [string stringByReplacingOccurrencesOfString:@"#$" withString:@","]; 
```

希望对你有帮助

# javascript - 重新加载页面时未评估 JavaScript 代码

> ID：14214638
> 
> 赞同：0
> 
> 时间：2013-01-08T12:09:33.630
> 
> 标签：javascript, android, mobile, scope

在移动网站中，我有一些 JavaScript 代码，如下所示：

```
<script type="text/javascript">
(function() {
  // function body omitted
}());
</script> 
```

第一次加载页面时执行代码，但是如果我回到上一页，然后再次加载此页面，则不会执行第二次。这只发生在页面加载到带有 User-Agent 标头的老式 Android 浏览器上时：

> Mozilla/5.0 (Linux; U; Android 2.2.1; en-gb; GT-S5570 Build/FROYO) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1

在较新的 Android 手机上，带有 User-Agent 标头：

> Mozilla/5.0 (Linux; Android 4.2.1; Galaxy Nexus Build/JOP40D) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.166 Mobile Safari/535.19

每次加载页面时都会执行代码。这是旧版浏览器的已知问题吗？顺便说一句，两者之间到底有什么区别

```
(function() {
  // function body omitted
}()); 
```

和

```
function() {
  // function body omitted
}(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:00:00.393

至少要回答第二个问题，因为我一直看到人们使用这样的函数表达式

```
(function () {...}()) 
```

有 2 (3) 种类型的功能：

*   函数声明
*   函数表达式
*   *函数语句*

不能直接调用函数声明。但是可以调用作为表达式结果的函数。

语法正确的立即调用函数表达式看起来像

```
(function() {
  // function body omitted
})(); 
```

在这种情况下，该函数通过将其括在括号中然后被调用而成为一个表达式。然而

```
(function() {
  // function body omitted
}()); 
```

也可以工作，因为分组运算符`(`放在函数周围，这会自动使其成为函数表达式*（可调用），*因此您可以通过将 a`()`直接放在函数体之后来调用函数

但这似乎误导了人们，结构像

```
function() {
  // function body omitted
}(); 
```

也是有效的，但情况并非如此，因为缺少分组运算符没有告诉解释器它的表达式。因此它一直是一个函数声明，*不能*直接调用。

这是一篇很好的[文章](http://kangax.github.com/nfe/#expr-vs-decl)，它很好地解释了这 3 种类型

# android - 更新 Actionbarsherlock 中的 Actionbar 菜单

> ID：14214643
> 
> 赞同：1
> 
> 时间：2013-01-08T12:09:44.827
> 
> 标签：android, actionbarsherlock, menuitem

几个星期以来，它一直让我感到悲伤。我每天浪费 4-5 个小时，把其他工作留在剩下的时间里完成。但现在它又回到了困扰我的梦想。因为我现在唯一要做的就是这个。有人可以让我知道如何更新操作栏菜单项吗？好像我们要更新适配器中的数据（在 ListView 或 spinner 中），可以通过`adapter.notifyDataSetChanged()`.

但是，需要为它做的事情是什么`actionbar`？我的要求是这样...

我的所有活动都有我的操作栏。假设如果用户点击`login(action item on actionbar)`活动`4th`，他将被重定向到`login from`第四个活动。提交详细信息后，我将完成登录活动并将用户重定向到`5th activity`. `In the 5th activity I am displaying username(as an action item) instead of login option`在共享偏好和操作的一些帮助下。

但实际问题在这里--->当我回到第四个活动时，显示的`login`是 (action item) 而不是**username**。因为我没有对操作栏进行任何刷新以更新先前活动中的更改。这适用于 backstack 中的所有活动。在我看来，唯一的事情就是在`onResume()`方法中做一些事情，因为当活动从后台来到前面时，这个回调方法将被调用。但是在那个方法中应该怎么做呢？希望我的问题可以理解。如果有人想要任何其他细节，请告诉我。如果有人帮助我解决这个问题，我将非常感激。

**注意：**我不想刷新我的活动，`onResume()`因为它是一种黑客行为，而且会导致活动中的数据丢失。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T12:32:48.597

试试这个：

在所有片段 Activity 中将其写入 onResume() 中。

```
@Override
protected void onResume() {

    super.onResume();

    this.invalidateOptionsMenu();

} 
```

然后在

```
onCreateOptionsMenu(Menu menu) 
```

检查用户是否已登录。如果是，则使用您使用过的相同技术显示用户名，否则显示登录菜单项。

希望这能解决你的大问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-12T05:38:16.413

试试这个：

```
@Override
protected void onResume() {
    super.onResume();
    supportInvalidateOptionsMenu();
} 
```

# android - OnPreferenceClickListener：布尔返回值有什么作用？

> ID：14214644
> 
> 赞同：9
> 
> 时间：2013-01-08T12:09:50.793
> 
> 标签：android, android-preferences

从这个例子：

```
private static Preference.OnPreferenceClickListener BindToPreferenceClickListener = new Preference.OnPreferenceClickListener() {
    public boolean onPreferenceClick(Preference preference) {
        boolean isHandled = false;
        if (...) {
           isHandled = true;
        }
        return isHandled;
    }
} 
```

'true' 的返回值有什么作用？API 文档声明该值表示如果为“真”，则单击已处理，但这究竟意味着什么？我认为这意味着未调用传递首选项的编辑器，可以使用自定义编辑器，但我的实验得出结论，默认编辑器在任一状态下都被调用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T11:31:30.347

正如 OnPreferenceChangeListener.onPreferenceChange 方法文档所说：

> 返回 True 以使用新值更新 Preference 的状态。

该方法在将新值持久保存到首选项之前运行。如果返回 false，则不会保留该值。如果你返回 true，它会被持久化。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-08T12:13:08.713

这意味着当有人点击偏好时，您的听众有机会处理点击。

如果您处理单击，则返回 true。

如果您不处理单击，即单击时不执行任何操作，则可以返回 false，然后系统会将单击传递给下一个侦听器，该侦听器正在侦听该首选项的单击。

我想不出一个例子，你会听点击然后不处理它对不起。

# ios - 如何以编程方式在 iPhone 应用程序中从左到右移动文本？

> ID：14214651
> 
> 赞同：-4
> 
> 时间：2013-01-08T12:10:11.943
> 
> 标签：ios, text, uiview, uilabel, uiviewanimation

我在 iPhone 应用程序中工作。我想在我的应用程序中显示一些来自 web 服务的文本/警报，例如移动文本（从左到右滚动动画）。我不知道该怎么做？

来自 web 服务的警报消息的长度各不相同，并且警报消息的数量也各不相同。我想在带有动画的 UIViewController 顶部的滚动中一一显示。可以在 iPhone 应用程序中进行吗？如果可能意味着有人请帮我这样做吗？我没有任何想法。请帮助我。期待您的帮助。提前致谢。

编辑：我试过stackoverflow.com/questions/1369314/how-to-add-moving-text-in-iphone。它适用于自下而上的动画文本。我想显示左右。我试图更改代码，但我无法解决这个问题。请帮我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:52:57.123

试试这个 ：

根据您的需要将标签设置在默认位置，X=0 和 Width = 320 Y 和 Height

在要执行动画的地方编写此代码

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:5];

lbl.frame = CGRectMake(320, lbl.frame.origin.y, lbl.frame.size.width, lbl.frame.size.height);

[UIView commitAnimations]; 
```

*注意：* 此代码用于从左到右更改 CGRectMake 参数，使其从右到左。

**编辑**：（第一条评论后）

将此动画代码放入每 5 或 6 秒运行一次的 NSTimer 方法中，在该方法中，
该方法看起来像这样：

*   更改标签文本
*   设置默认位置
*   动画代码

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:31:26.093

试试下面的代码

```
int i = 0;
float width = 0.0;
float origin_x = 0.0;

for (NSString *s in arrList)
{
    CGSize size;
    NSRange r;

    size = [s sizeWithFont:[UIFont fontWithName:@"*****" size:14.0] constrainedToSize:CGSizeMake(10000.0, 35.0) lineBreakMode:UILineBreakModeWordWrap];

    width = (size.width + 12.0 + 10.0);

    UIView *viewTopStory = [[[UIView alloc] initWithFrame:CGRectMake(origin_x, 0.0, width, 35.0)] autorelease];
    viewTopStory.backgroundColor = [UIColor clearColor];

    UIImageView *imgStar = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"star.png"] ] autorelease];
    imgStar.frame = CGRectMake(5, 8.0, 12, 12);
    [viewTopStory addSubview:imgStar];

    UILabel *lblTopstory = [[[UILabel alloc] initWithFrame:CGRectMake(22.0, 2.75, size.width, 30.0)] autorelease];
    lblTopstory.font = [UIFont fontWithName:@"*****" size:14.0];
    lblTopstory.backgroundColor = [UIColor clearColor];
    lblTopstory.text = s;
    [viewTopStory addSubview:lblTopstory];

    [_viewTopStory addSubview:viewTopStory];

    CGRect frame = _viewTopStory.frame;
    frame.size.width += width;
    _viewTopStory.frame = frame;

    origin_x += width;

    i++;
}

CAKeyframeAnimation *animation = [CAKeyframeAnimation
                                  animationWithKeyPath:@"transform"];
//NSMutableArray *marrframeValues = [[[NSMutableArray alloc]init] autorelease];
CATransform3D Translation0 = CATransform3DMakeTranslation(0.0, 0.0, 0.0);
CATransform3D Translation4 = CATransform3DMakeTranslation(_viewTopStory.frame.size.width, 0.0, 0.0);

NSArray *frameValues = [NSArray arrayWithObjects:[NSValue valueWithCATransform3D:Translation0], [NSValue valueWithCATransform3D:Translation4],
                        nil];

[animation setValues:frameValues];

NSArray *frameTimes = [NSArray arrayWithObjects: [NSNumber numberWithFloat:0.0], [NSNumber numberWithFloat:1.0], nil];

[animation setKeyTimes:frameTimes];

animation.fillMode = kCAFillModeBackwards;
//animation.autoreverses = YES;
animation.repeatCount = 10000;
animation.removedOnCompletion = NO;
animation.duration = 200.0;

[_viewTopStory.layer addAnimation:animation forKey:@"popup"]; 
```

我已经放置了带有初始固定框架的 _viewTopStory，然后我根据文本修改了框架。

希望它会帮助你。

# windows-phone-7 - How to use multilingual in Windows Phone 7

> ID：14214652
> 
> 赞同：0
> 
> 时间：2013-01-08T12:10:17.177
> 
> 标签：windows-phone-7

I want to create multilingual app in Windows Phone 7\. I am doing it from the help of one example but it is not giving me perfect solution. This is the [link](http://social.msdn.microsoft.com/Forums/en-US/wphowto/thread/6932dc75-5763-477e-abd4-1701c2df7909/).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:41:12.507

[This link](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff637520%28v=vs.105%29.aspx) gives you a good description on how to go about it. Also, check the [best practices](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff967552%28v=vs.105%29.aspx).

For my own app i used [this guide](http://www.windowsphonegeek.com/articles/Localizing-a-Windows-Phone-app-Step-by-Step). Goodluck!

After following that guide, you can use your localized strings in a listpicker (as requested in your comment):

```
 <toolkit:ListPicker.Items>
                    <ListBoxItem Content="{Binding Path=AppResources.ListPickerOption1, Source={StaticResource LocalizedStrings}}" />
                    <ListBoxItem Content="{Binding Path=AppResources.ListPickerOption2, Source={StaticResource LocalizedStrings}}" />
                    <ListBoxItem Content="{Binding Path=AppResources.ListPickerOption3, Source={StaticResource LocalizedStrings}}" />
  </toolkit:ListPicker.Items> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:32:04.347

You could check the following link:

[Windows Phone Localization](http://www.silverlightshow.net/items/Windows-Phone-8-Localization.aspx)

And you can set the Culture in your code too:

```
Thread.CurrentThread.CurrentUICulture = new CultureInfo("en-US"); 
```

# iis-7 - HTTP 错误 500.52 - URL 重写模块错误。

> ID：14214657
> 
> 赞同：7
> 
> 时间：2013-01-08T12:10:33.827
> 
> 标签：iis-7, reverse-proxy, url-rewrite-module

我正在尝试使用 IIS 7.5 设置反向代理。我希望 Tomcat 提供与某个 URL 模式匹配的传入请求。我已经使用这里的教程来配置它。

[http://www.iis.net/learn/extensions/url-rewrite-module/reverse-proxy-with-url-rewrite-v2-and-application-request-routing](http://www.iis.net/learn/extensions/url-rewrite-module/reverse-proxy-with-url-rewrite-v2-and-application-request-routing)

我的设置如下：

```
<rewrite>
        <rules>                
            <rule name="ReverseProxyInboundRule1" stopProcessing="true">
                <match url=".*/(Locations|FacetedSearch|LocationPage)/.*" />
                <action type="Rewrite" url="http://search.xxx.com/{R:1}" />
                 <serverVariables>
                    <set name="HTTP_ACCEPT_ENCODING" value="" replace="true" /> 
                </serverVariables>
            </rule>
        </rules>
        <outboundRules>
            <rule name="ReverseProxyOutboundRule1" preCondition="ResponseIsHtml1">
                <match filterByTags="A, Form, Img" pattern="^http(s)?://search.xxx.com/(.*)" />
                <action type="Rewrite" value="http{R:1}://dev.xxx.com/{R:2}" />
            </rule>
            <preConditions>
                <preCondition name="ResponseIsHtml1">
                    <add input="{RESPONSE_CONTENT_TYPE}" pattern="^text/html" />
                </preCondition>
            </preConditions>
        </outboundRules>
    </rewrite>
    <tracing> 
```

HTTP 错误 500.52 - URL 重写模块错误。当 HTTP 响应的内容被编码（“deflate”）时，不能应用出站重写规则。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-11-29T06:01:20.390

我也遇到了这个问题，我发现这个解决方案很有帮助：[https ://www.saotn.org/iis-outbound-rules-with-gzip-compression/](https://www.saotn.org/iis-outbound-rules-with-gzip-compression/)

基本上，在入站请求中，HTTP_ACCEPT_ENCODING 标头被隐藏到临时标头中，然后根据出站重写规则恢复。

如果链接失效，请执行以下步骤：

1.  通过左侧窗格中服务器节点上的 IIS 管理器 GUI，导航到 URL 重写
2.  单击右窗格中的*查看服务器变量*
3.  添加两个*允许的服务器变量*：

> ```
> HTTP_ACCEPT_ENCODING
> HTTP_X_ORIGINAL_ACCEPT_ENCODING 
> ```

4.  返回服务器的 URL 重写选项，单击右侧窗格中的*查看前提条件。*添加一个新的前提条件（我将其命名为*NeedsRestoringAcceptEncoding*）
5.  将条件输入设置为*{HTTP_X_ORIGINAL_ACCEPT_ENCODING}*并将模式设置为“.+”（无引号）。
6.  在导致错误的*入站*重写规则中，将以下内容添加到*服务器变量*（您将在*条件*部分下方找到它）：

> ```
> Server Variable Name: HTTP_X_ORIGINAL_ACCEPT_ENCODING
> Value: {HTTP_ACCEPT_ENCODING}
> 
> Server Variable Name: HTTP_ACCEPT_ENCODING
> Value: "" 
> ```

7.  在*出站*重写规则中，将步骤 4-5 创建的前提条件添加到规则的*前提条件*部分（应填充在下拉框中）

如果您只需要在单个站点上使用此功能，则可以在站点级别而不是服务器级别添加前置条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-20T15:32:53.827

将此添加到您的网络配置中

```
 <serverVariables>
    <set name="HTTP_ACCEPT_ENCODING" value="" />          
 </serverVariables> 
```

或在 iis 中禁用动态压缩

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-08T19:58:57.973

从负责反向代理请求的站点和被代理的站点禁用动态和静态内容压缩为我修复了此错误。

换句话说 - 如果服务器 X 将请求路由到服务器 Y，则在服务器 X 和 Y 上的站点上禁用动态和静态内容压缩。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-04T02:33:03.460

在IIS中找到“compress”，然后去掉动态内容压缩和静态内容压缩。

# python - 带有 python 的桌面 GUI 中的 MVC 模式

> ID：14214664
> 
> 赞同：6
> 
> 时间：2013-01-08T12:11:05.497
> 
> 标签：python, model-view-controller, user-interface, view, controller

我的问题如下。来自网络背景，我这样做没有问题，但在 Python 桌面应用程序中，我真的看不出根据 MVC 模式组织代码的最佳方法是什么。

我想根据用户输入创建一个窗口，当按下按钮时，它会显示数据库中可用的类似条目。窗户是我的风景。

所以基本上这些是关系：

![在此处输入图像描述](../Images/3024190a93cacaf049ee937d7680a3c9.png)

1)**通讯控制器 --> 视图**

控制器有一个视图实例，并且可以使用其公开的方法，例如 view.show_data()。我认为这是要走的路。

```
# Controller
my_view = View()
...
my_view.show_data(whatever_data) 
```

2）**通讯视图-->控制器**

当用户插入一些文本时，必须触发控制器中的一个方法，以便它可以向模型询问数据库中的必要数据。问题是我不知道视图告诉控制器它必须触发该方法的最佳方式是什么。

我的第一个想法是将控制器的引用传递给视图，并将事件绑定到视图上，如下所示：

```
# Controller
my_view = View(self)
my_model = Model()
...

def on_user_input(self):
     # process the input
     user_input = ...
     self.my_model.method_to_get_info(user_input) 
```

和观点：

```
# View
def __init__(self, controller):
    self.controller_reference = controller
    self.launch_gui()
    self.config_binds()

def launch_gui(self):
    # ... configure all the GUI itself
    self.button = ...

def config_binds(self):
    self.button.Bind(wx.EVT_BUTTON, self.controller_reference.on_user_input()) 
```

但我认为这种“闭环”关系并不是一个非常干净的解决方案。视图在控制器中被引用，控制器在视图中。我认为它在视图和控制器之间建立了紧密的关系。

这样做的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T12:28:08.463

该视图应该触发事件。通常，您不会将事件直接发送到控制器，而是 GUI 的框架通用事件处理程序。所讨论的事件通常是诸如“已按下键”和“有人移动鼠标”之类的事件。

在您的情况下，更“高级”的 MVC 可以很好地让各个部分相互了解。你告诉视图它的控制器是什么对象是非常好的。重要的部分是所有部件都使用定义良好的接口，因此部件是可更换的。

如您所见，这与模型-视图-控制器的常见 Web 概念完全不同，模型-视图-控制器实际上根本不是模型-视图-控制器，而是用词不当，应该称为模型-视图-模板。

# c - 连接：客户端的c程序中的连接被拒绝

> ID：14214665
> 
> 赞同：2
> 
> 时间：2013-01-08T12:11:08.683
> 
> 标签：c, sockets

我正在使用以下代码在某个端口连接到服务器，这些端口作为命令行参数提供......

```
#include <stdio.h>
#include <sys/socket.h>
#include <sys/types.h>
#include <unistd.h>
#include <arpa/inet.h>
#include <netdb.h>
#include <errno.h>
#include <stdlib.h>
#include <strings.h>

int main(int argc,char *argv[])
{
   struct sockaddr_in serverAddr;
   int clientSocketFd ;
   char buffer[1024];

 if((clientSocketFd = socket(AF_INET, SOCK_STREAM, 0))==-1)
    perror("socket");

//get the server IP address and PORT
bzero(&serverAddr, sizeof serverAddr);
printf("ip address :- %s\n",argv[1]);
inet_pton(AF_INET, argv[1], &(serverAddr.sin_addr));
serverAddr.sin_family=AF_INET;
serverAddr.sin_port = atoi(argv[2]);

printf("PORT :- %d\n",serverAddr.sin_port);
//connect to server
if(connect(clientSocketFd,(struct sockaddr *) &serverAddr, sizeof(serverAddr)) == -1)
    perror("connect");

printf("Connecting to the server %s on port %s \n",argv[1],argv[2]);

while (1)
{
    //receive incoming data
    if(recv(clientSocketFd, buffer,1023, 0)==-1)
    {
    printf("buffer : %s\n" ,buffer);
    printf("Received from Server : %s \n",buffer);
        break;
    }

}
close(clientSocketFd); 
```

}

但在客户端，它显示“连接：连接被拒绝”......

如果我使用telnet，那么它显示已连接，但无法通过上面的client.c代码连接，请帮助

另外我将允许的最大挂起连接数更改为 100 ，然后问题也没有解决...... :( ...help plz

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T12:12:07.150

您连接到错误的端口。改变：

```
serverAddr.sin_port = atoi(argv[2]); 
```

到：

```
serverAddr.sin_port = htons(atoi(argv[2])); 
```

把这些结构想象成用来与另一个星球交流，在那里他们以不同的方式写下他们的数字。你必须在你写数字的方式和他们写数字的方式之间来回转换，否则你会胡说八道。

The `htons` function converts ports numbers from the way your computer stores them to the way they are used on the network. The `ntohs` function converts port numbers from the way they are used on the network to the way your computer stores them. Socket addresses are in network byte order.

# javascript - 在现有代码中使用 EaselJS 精灵表

> ID：14214668
> 
> 赞同：0
> 
> 时间：2013-01-08T12:11:20.680
> 
> 标签：javascript, sprite-sheet, easeljs

我想修改使用图像进行动画处理的现有代码，并改用精灵表。我为此使用 EaselJS 库。

为动画创建对象的代码：

```
function initStageObjects(){

    car = new Car('img/car.png',canvas.width()/2,canvas.height()/2);

} 
```

这是完整的代码：

```
$(window).load(function(){
$(document).ready(function(){

// Canvas Variables
var canvas = $('#canvas');
var context = canvas.get(0).getContext('2d');
var canvasWidth = canvas.width();
var canvasHeight = canvas.height();

// Keyboard Variables
var leftKey = 37;
var upKey = 38;
var rightKey = 39;
var downKey = 40;

// Keyboard event listeners
$(window).keydown(function(e){
    var keyCode = e.keyCode;

    if(keyCode == leftKey){
        car.left = true;
    } else if(keyCode == upKey){
        car.forward = true;
    } else if(keyCode == rightKey){
        car.right = true;
    } else if (keyCode == downKey){
        car.backward = true;
    }
});
$(window).keyup(function(e){
    var keyCode = e.keyCode;
    if(keyCode == leftKey){
        car.left = false;
    } else if(keyCode == upKey){
        car.forward = false;
    } else if(keyCode == rightKey){
        car.right = false;
    } else if (keyCode == downKey){
        car.backward = false;
    }
});

// Start & Stop button controlls
var playAnimation = true;

var startButton = $('#startAnimation');
var stopButton = $('#stopAnimation');

startButton.hide();
startButton.click(function(){
    $(this).hide();
    stopButton.show();
    playAnimation = true;
    updateStage();
});
stopButton.click(function(){
    $(this).hide();
    startButton.show();
    playAnimation = false;
});

// Resize canvas to full screen
function resizeCanvas(){
    canvas.attr('width', $(window).get(0).innerWidth);
    canvas.attr('height', $(window).get(0).innerHeight);
    canvasWidth = canvas.width();
    canvasHeight = canvas.height();
}
resizeCanvas();
$(window).resize(resizeCanvas);

function initialise(){
    initStageObjects();
    drawStageObjects();
    updateStage();
}

// Car object and properties
function Car(src, x, y){        
    this.image = new Image();
    this.image.src = src;

    this.x = x;
    this.y = y;
    this.vx = 0;
    this.vy = 0;
    this.angle = 90;

    this.topSpeed = 5;
    this.acceleration = 0.1;
    this.reverse = 0.1;
    this.brakes = 0.3;
    this.friction = 0.05;
    this.handeling = 15;
    this.grip = 15;
    this.minGrip = 5;
    this.speed = 0;
    this.drift = 0;

    this.left = false;
    this.up = false;
    this.right = false;
    this.down = false;
}

// Create any objects needed for animation        
function initStageObjects(){

    car = new Car('img/car.png',canvas.width()/2,canvas.height()/2);

}

function drawStageObjects(){
    context.save();
    context.translate(car.x,car.y);
    context.rotate((car.angle + car.drift) * Math.PI/180);    

    context.drawImage(car.image, -25 , (-47 + (Math.abs(car.drift / 3))));    

    // context.fillRect(-5, -5, 10, 10);
    context.restore();

}

function clearCanvas(){
    context.clearRect(0, 0, canvasWidth, canvasHeight);  
    context.beginPath();
}

function updateStageObjects(){

    // Faster the car is going, the worse it handels
    if(car.handeling > car.minGrip){
        car.handeling = car.grip - car.speed;
    }
    else{
        car.handeling = car.minGrip + 1;
    }

    // Car acceleration to top speed
    if(car.forward){
        if(car.speed < car.topSpeed){
            car.speed = car.speed + car.acceleration;
        }            
    }        
    else if(car.backward){
        if(car.speed < 1){
            car.speed = car.speed - car.reverse;    
        }
        else if(car.speed > 1){
            car.speed = car.speed - car.brakes;
        }
    }

    // Car drifting logic
    if(car.forward && car.left){
        if(car.drift > -35){
            car.drift = car.drift - 3;    
        }
    }
    else if(car.forward && car.right){
        if(car.drift < 35){
            car.drift = car.drift + 3;    
        }
    }
    else if(car.forward && !car.left && car.drift > -40 && car.drift < -3){
        car.drift = car.drift + 3;
    }
    else if(car.forward && !car.right && car.drift < 40 && car.drift > 3){
        car.drift = car.drift - 3;
    }

    if(car.drift > 3){
        if(!car.forward && !car.left){
            car.drift = car.drift - 4;
        }
    }

    else if(car.drift > -40 && car.drift < -3){
        if(!car.forward && !car.right){
            car.drift = car.drift + 4;
        }
    }

    // General car handeling when turning    
    if(car.left){
        car.angle = car.angle - (car.handeling * car.speed/car.topSpeed);

    } else if(car.right){
        car.angle = car.angle + (car.handeling * car.speed/car.topSpeed);    

    }

    // Use this div to display any info I need to see visually
    $('#stats').html("Score: 0");

    // Constant application of friction / air resistance
    if(car.speed > 0){
        car.speed = car.speed - car.friction;
    } else if(car.speed < 0) {
        car.speed = car.speed + car.friction;
    }

    // Update car velocity (speed + direction)
    car.vy = -Math.cos(car.angle * Math.PI / 180) * car.speed;
    car.vx = Math.sin(car.angle * Math.PI / 180) * car.speed;    

    // Plot the new velocity into x and y cords
    car.y = car.y + car.vy;
    car.x = car.x + car.vx;
}

// Main animation loop
function updateStage(){
    clearCanvas();
    updateStageObjects();
    drawStageObjects();        

    if(playAnimation){
        setTimeout(updateStage, 25);
    }
}

// Initialise the animation loop
initialise();

});
});//]]>  
// JavaScript Document 
```

我如何替换我创建的精灵使用的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:49:16.657

即使您可能可以将`createjs.SpriteSheet`a 实现到非 Createjs/非 EaselJS 项目中，我**强烈**建议您**不**要这样做，EaselJS 类不设计为在任何类型的项目中用作单个模块化类，它们最好一起工作在框架中。最后，您可能需要更多的时间，并且可能会通过尝试让一切正常工作而最终获得更多的代码，而不是仅仅将您的（但仍然很小）项目全部转换为 EaselJS。所以今天学习一些新东西并将你的项目重构为 EaselJS ;-)

* * *

**但如果您想要更多工作，请继续阅读：**
A`createjs.SpriteSheet`基本上只处理 SpriteSheet 数据，您可以使用它`mySpriteSheet.getFrame(int);`来获取该帧的图像和源矩形，以便您可以将其绘制到画布上。**但是**单独的 SpriteSheet 不会为您处理动画，因此您必须自己推进每一帧的“播放头”（如果在最后等则返回第 0 帧），或者您可以实现另一个名为 createjs-class `createjs.BitmapAnimation`- 但是，将其绘制到您的画布上将再次需要额外的代码或额外的 createjs-class：您会看到它的位置。

# javascript - 上传超过 1 个文件后启用提交按钮

> ID：14214669
> 
> 赞同：1
> 
> 时间：2013-01-08T12:11:21.290
> 
> 标签：javascript, jquery

所以我在这里找到了部分答案，我需要的是启用提交按钮，但只有在上传超过 1 个文件之后。当我只上传 1 个时，它会自动启用，但我需要的是在我提交第二个文件之前不会启用提交。

```
$(document).ready(
function(){
    $('input:submit').attr('disabled',true);
    $('input:file').change(
        function(){
            if ($(this).val()){
                $('input:submit').removeAttr('disabled'); 
            }
            else {
                $('input:submit').attr('disabled',true);
            }
        });
}); 
```

[http://jsfiddle.net/2Ayu5/49/](http://jsfiddle.net/2Ayu5/49/) 谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T12:17:13.810

请参阅此[链接与演示](http://jsfiddle.net/2Ayu5/51/)

用于：`id`_`file`

```
$(document).ready(
    function(){
        $('input:submit').attr('disabled',true);
        $('input:file').change(
            function(){
                if ($("#1").val() && $("#2").val()){
                    $('input:submit').removeAttr('disabled'); 
                }
                else {
                    $('input:submit').attr('disabled',true);
                }
            });
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T12:14:37.753

试试这个：http: [//jsfiddle.net/arvind07/2Ayu5/50/](http://jsfiddle.net/arvind07/2Ayu5/50/)

```
$(document).ready(
    function(){
        $('input:submit').attr('disabled',true);
        $('input:file').change(
            function(){
                if ($("#file1").val() && $("#file2").val()){
                    $('input:submit').removeAttr('disabled'); 
                }
                else {
                    $('input:submit').attr('disabled',true);
                }
            });
    }); 
```

HTML：

```
<form action="#" method="post">
    <fieldset>
        <input type="file" id="file1"/>
    </fieldset>
   <fieldset>
        <input type="file" id="file2"/>
    </fieldset>
    <fieldset>
        <input type="submit" />
    </fieldset>
</form> 
```

# java - 取消长轮询循环的并发问题

> ID：14214672
> 
> 赞同：9
> 
> 时间：2013-01-08T12:11:27.220
> 
> 标签：java, android, multithreading, synchronization

我有一个问题，我希望通过写这个问题来解决，但如果没有，我会发帖看看是否有人可以提供帮助。

我正在使用客户端库（我觉得写得不好）与实时聊天服务器交互，该服务器使用 COMET 风格的 HTTP 长轮询。在某些情况下，我在取消长轮询时遇到问题，我怀疑我可能需要添加一些并发处理代码，但由于以下原因，我发现很难找到最佳方法。

**订阅代码**（启动长轮询）被实现为一个大循环，具有以下内容

```
doLongPoll()
{
    while(true)
    }
        //IF channel field boolean unsubscribe == TRUE, if so BREAK;
        //perform GET request (and store channel HTTPClient used for this call)
        //remove HTTPClient used for this call
        //IF channel field boolean unsubscribe == true, if so BREAK;
        //IF connection problem sleep(1500) then CONTINUE
        //post received data to listeners
    }
} 
```

**取消订阅调用**（将在另一个线程上调用）

```
unsubscribe()
{
    //set channel field boolean unsubscribe == FALSE
    //get channel HTTPClient and shutdown
} 
```

我已经隔离了操作交错的问题案例。对我来说，这似乎是代码是多线程的并且客户端代码不是线程安全的结果。管理不善和不重用`httpClient`也无济于事。

我遇到的问题之一是取消订阅调用不会阻止下一个 getRequest 发生。

```
THREAD 1 (polling)                      THREAD 2
--------                                --------
do unsubscribe check (pass)
                                        unsubscribe called
                                        set unsubscribe = true
                                        check if httpClient saved (none)
perform getRequest (save HttpClient first) 
```

我想知道人们认为解决这个问题的最佳方法是什么（时间也有限，所以我不能重写太多代码！）

为了解决这个问题，我认为我可以使用从线程 1 的第一次取消订阅检查到在执行实际获取请求之前保存的**同步块，并使用相同的锁同步取消订阅方法。**`httpClient`目前这是不切实际的，因为提到的第一个同步块将在一个方法调用中开始并在方法调用链的下游完成（由于 lib 的编写方式）——这感觉非常错误，因此需要进行一些重构。

或者我可以只为**每个通道而不是每个请求创建****一个`httpClient`**，然后它总是可以关闭，我可能会忽略同步（我认为）。

或者如下所示，我可以将**中断**用于相同目的

欢迎任何建议 - 如果我有任何进展，我会编辑！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T10:23:42.937

由于这个问题，我购买了[Java Concurrency in Practice](http://www.amazon.co.uk/Java-Concurrency-Practice-Brian-Goetz/dp/0321349601)，发现他们在第 7 章中讨论了一个非常相似的问题**：取消和关闭**，可以通过引用来概括

> 中断通常是实现取消的最成功方式

由于 HttpClient 阻塞了不支持中断的套接字 IO，所以我有两种方法。我分配我的`httpClient`，我在实际调用之前检查中断，`httpClient.execute()`并在我的`unsubscribe()`方法中中断线程然后调用`httpClient.getConnectionManager().shutdown();`。这似乎解决了我的问题，并且是一个非常简单的更改。没有更多的交错问题！

我还将布尔`unsubscribe`字段设置`volatile`为我之前应该做的建议 - 但是仅此一项并不能解决问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T13:40:20.640

1) 将取消订阅设置为 volatile

2）为了更大的保证，保护访问（读/写）以取消订阅，例如，信号量

# wpf - 如何更改 WPF 功能区菜单 AuxiliaryPaneContent 宽度

> ID：14214673
> 
> 赞同：0
> 
> 时间：2013-01-08T12:11:27.830
> 
> 标签：wpf, ribboncontrolslibrary

在 WPF 功能区菜单中，AuxiliaryPaneContent（在 RibbonApplicationMenu 中）的宽度不可用。如何根据其中存在的项目更改其宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:46:14.680

没有直接的属性来设置 AuxiliaryPaneContent 的宽度或高度。此处给出的解决方案可能会有所帮助：[AuxilaryPane Size](https://stackoverflow.com/questions/6766168/ribbon-applicationmenu-auxilarypane-size)。

# perl - DESTROY和undef？

> ID：14214676
> 
> 赞同：0
> 
> 时间：2013-01-08T12:11:38.320
> 
> 标签：perl, memory-management

我正在编写一个脚本来销毁或释放变量和对象的内存

```
#!/usr/bin/perl
package Mem;
sub new{
   my ($class,$args)=@_;
   my $self={};
   bless($self,$class);
   $self->{first}=$args->{first};
   print "In new \n";
   print "Values : ".$self->{first};

   return $self;
}
sub DESTROY{
   my $self=shift;
   print "In DESTROY \n";
   #undef $self;
   print "Values : ".$self->{first};
}

package main;

my $m=new Mem({first=> '2'}); 
```

如果我不在 DESTROY 中使用 undef 语句，我仍然会得到值。你如何使用 DESTROY 和 undef？你什么时候用哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:27:48.887

这是因为当控制处于**DESTROY**时，对象拆除正在发生，并且直到控制到达**DESTROY结束才结束**

如果您在明确销毁对象后访问它，那么它会很清楚。*请注意undef $m*未定义后的打印。

```
package Mem;
sub new{
   my ($class,$args)=@_;
   my $self={};
   bless($self,$class);
   $self->{first}=$args->{first};
   print "In new \n";
   print "Values : ".$self->{first};

   return $self;
}
sub DESTROY{
   my $self=shift;
   print "In DESTROY \n";
   #undef $self;
   print "Values : ".$self->{first};
}

package main;

my $m=new Mem({first=> '2'});

undef $m;
print "in package main" , $m->{'first'}, "\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:26:32.347

仅当您想在对象被销毁时采取一些明确的操作时，您才定义一个 DESTROY 过程。一个常见的用途是确保打开的文件已关闭。在调用 DESTROY 时，对象仍然存在，因此您可以引用它的内容，但它正在被系统清理。

在您的示例`$self->{first}`中，DESTROY 中仍然有一个值，因为该对象仍然存在。当您`undef`在程序中使用时，您将完全清除它。

在变量上使用`undef`将是可能导致对象有资格被销毁的事情之一（如果它包含对该对象的最后引用）。如果已定义，这将导致调用 DESTROY 过程。

# css - 我们可以把焦点放在没有 tabindex attr 的 div 上吗？

> ID：14214677
> 
> 赞同：1
> 
> 时间：2013-01-08T12:11:38.783
> 
> 标签：css, firefox, html, focus, tabindex

我在关注 FF 17 时遇到了一个奇怪的问题。我有一个没有 tabindex 属性的 div 和一个 tabindex="0" 的 div。我是 Shift+TAB 从第二个 div（带 tabindex）到第一个 div（没有 tabindex）。奇怪的是，第一个 div 正在接收焦点，整个 div 用虚线突出显示。谁能告诉我为什么即使没有 tabindex 属性，FF 也将重点放在第一个 div 上？

如果有兴趣，第一个 div 有以下 CSS

```
clear: both;
min-width: 1010px;
left: 7px;
right: 7px;
top: 141px;
bottom: 10px;
overflow: auto;
position: absolute;
-webkit-box-shadow: 0 5px 4px #DDD;
box-shadow: 0 5px 4px #DDD;
background: none repeat scroll 0 0 #FDFDFD;
border: 1px solid #AAA;
border-top: 0; 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T12:15:52.253

调用 css 属性`outline`，它将勾勒页面上的元素，因此当您使用键盘进行选项卡时，您可以看到您在哪些元素上。

如果你想`outline:0;`在你的css类中禁用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T05:11:45.293

它之所以受到关注，是因为它有`overflow: auto`。发生这种情况的原因是`overflow:auto`，根据它们的内容，可以有滚动条的东西，当它们有滚动条时，你希望它们按 Tab 顺序排列，这样你就可以对它们进行 Tab 并用箭头键滚动，对于不使用鼠标的用户. 但是到那时，您要么必须`overflow:auto`始终将内容放在标签顺序中，要么在更改字体大小或调整浏览器窗口大小或诸如此类时更改标签顺序。后者让用户很困惑，所以 Gecko 是前者。

# c# - 2 个 Web 服务在同一台服务器上，但在不同的文件夹中

> ID：14214681
> 
> 赞同：-1
> 
> 时间：2013-01-08T12:12:06.720
> 
> 标签：c#, web-services

所以我有 j 查询调用一个 Web 服务，它工作正常。然后我想创建一个副本，以便我可以一直保持一个并使用第二个进行测试。原来的位于根目录中，新的位于名为 test 的文件夹中。test 文件夹与 config 和 bin 文件夹一起引入 asmx 文件。调用 jquery 的 html 文件也位于 test 文件夹中，并且已被修改为调用 test/service.asmx 而不仅仅是 service.asmx。但是，当我要求运行测试服务时，正在运行根目录中的网络服务而不是测试服务。chrome 说正在调用测试服务，我什至将测试服务重命名为 servicefortests 以区分它们。

任何线索？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:34:57.317

这对我来说似乎有点奇怪。如果您有这种能力，我建议您将其完全设置在不同的服务器上。如果没有，我至少会在 IIS 中将其设置为不同的 Web 应用程序。就目前而言，如果您要在测试中运行工作进程，它也会影响生产。这也可以解决您的问题，因为它可能引用了同一个 bin。

# c# - 左连接条件在右

> ID：14214686
> 
> 赞同：1
> 
> 时间：2013-01-08T12:12:22.620
> 
> 标签：c#, linq, entity-framework

使用 Linq 和 EF

一个`User`可以有很多`RoleUserLinks`。

如果 a`User`的`RoleUserLink`表包含 2 条记录 - 一条具有 a `LinkStatusID`of `Deleted`，一条具有 a `LinkStatusID`of `Added`，则下面的查询将返回`User`。我不想要这个。

如何不返回`user`如果有任何关联`LinkStatusID`的，`Added`请参阅下面的案例 3

```
IEnumerable<User> z =
    (from users in listOfUsersForReviewer
     join roleUserLinks in context.RoleUserLinks
        on users.UserID equals roleUserLinks.UserID into roleUserLinksJoin
     // left join
     from roleUserLinks in roleUserLinksJoin.DefaultIfEmpty()
     where
         // case 1 - has never been added to a role ie record isn't there
         roleUserLinks.LinkStatus == null
         // case 2 - has been soft deleted from a role so we want this record
         || roleUserLinks.LinkStatusID == (byte)Enums.LinkStatus.Deleted
     select users).Distinct(); 
```

案例 1) 用户没有关联`RoleUserLink`记录。用户按预期返回

案例 2) 用户有 1 条关联`RoleUserLink`记录与`LinkStatusID`已删除。用户按预期返回

案例 3) 用户有 2 条关联`RoleUserLink`记录。1 有一个`LinkStatusID`已删除。用户不应该被退回

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:56:19.077

如果我理解得很好，它应该是：

```
IEnumerable<User> z =
    (from users in listOfUsersForReviewer
     join roleUserLinks in context.RoleUserLinks
        on users.UserID equals roleUserLinks.UserID into roleUserLinksJoin
     // left join
     from roleUserLinks in roleUserLinksJoin.DefaultIfEmpty()
     where
         (roleUserLinks == null
         || roleUserLinks.LinkStatusID == (byte)Enums.LinkStatus.Deleted)
         && !roleUserLinksJoin.Where(x=> roleUserLinks.LinkStatusID == (byte)Enums.LinkStatus.Added && x.UserID == roleUserLinks.UserID).Any()
     select users).Distinct(); 
```

我添加了这个子查询：

```
&& !roleUserLinksJoin.Where(x=> roleUserLinks.LinkStatusID == (byte)Enums.LinkStatus.Added && x.UserID == roleUserLinks.UserID).Any() 
```

它将从结果中删除不需要的行，其中包含有记录的`RoleUserLinks`用户`LinkStatusId` `Added`。

我也将其更改`roleUserLinks.LinkStatus == null`为`roleUserLinks == null`避免`NullReferenceException`在没有匹配的情况`RoleUserLink`下`User`

**我测试代码的示例代码**

```
static void Main(string[] args)
{
    var usersList = new List<User>()
                    {
                        new User() {UserID = 1},
                        new User() {UserID = 2},
                        new User() {UserID = 3}
                    };

    var userLinksList = new List<RoleUserLink>()
                        {
                            new RoleUserLink() {UserID = 1, State = "del"},
                            new RoleUserLink() {UserID = 2, State = "add"},
                            new RoleUserLink() {UserID = 2, State = "del"}
                        };

    IEnumerable<User> z = (from users in usersList 
                           join roleUserLinks in userLinksList
                           on users.UserID equals roleUserLinks.UserID into roleUserLinksJoin
                           // left join
                           from roleUserLinks in roleUserLinksJoin.DefaultIfEmpty()
                           where
                            // has never been added to a role ie record isn't there
                                roleUserLinks == null
                            // has been soft deleted from a role so we want this record
                                || roleUserLinks.State == "del"
                            // has been added to role so we don't want this record
                                && !roleUserLinksJoin.Where(x=> x.State == "add" && x.UserID == roleUserLinks.UserID).Any()
                            select users).Distinct();
    var res = z.ToList();

}

public class User
{
    public int UserID { get; set; }
}

public class RoleUserLink
{
    public int UserID { get; set; }
    public string State { get; set; }
} 
```

它返回 id 为 1 和 3 的用户。正如我所料。`UserId:1`仅与 status 有联系`delete`。`UserId:3`没有任何链接。并且`UserId:2`不会返回，因为它也与 status 链接`add`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T17:21:54.180

我通过原始查询解决了这个问题：

```
IEnumerable<User> z =
    (from users in listOfUsersForReviewer
     join roleUserLinks in context.RoleUserLinks
        on users.UserID equals roleUserLinks.UserID into roleUserLinksJoin
     // left join
     from roleUserLinks in roleUserLinksJoin.DefaultIfEmpty()
     where
         // case 1 - has never been added to a role ie record isn't there
         roleUserLinks.LinkStatus == null
         // case 2 - has been soft deleted from a role so we want this record
         || roleUserLinks.LinkStatusID == (byte)Enums.LinkStatus.Deleted
     select users).Distinct().Include(b => b.RoleUserLinks).ToList(); 
```

并在最后添加了 Include 和 ToList。

然后：

```
var list = new List<User>();

    foreach (var user in z)
    {
        bool shouldReturnUser = true;
        //get roleLinks
        foreach (var rul in user.RoleUserLinks)
        {
            if (rul.LinkStatusID == (byte) Enums.LinkStatus.Added)
                shouldReturnUser = false;
        }
        if (shouldReturnUser)
            list.Add(user);
    } 
```

然后返回此列表。

我知道这样做会产生性能影响，并在网络服务器上进行处理，但恕我直言，这很容易理解，并且有效:-)

# cocos2d-iphone - Sprite 的动画不更新物理

> ID：14214688
> 
> 赞同：0
> 
> 时间：2013-01-08T12:12:32.480
> 
> 标签：cocos2d-iphone, box2d-iphone

我使用 Level Helper 和 SpriteHelper 来创建我的精灵、图像、关卡，更重要的是动画和物理。

请注意，我所说的物理是指您可以在用于碰撞检测的模拟器上看到的调试绘图。

我创建了一个游泳者并为此添加了物理学。完成代码，这样物理就可以在游泳者移动时跟随游泳池周围的游泳者。我现在已经开始为游泳者设置动画，让腿踢等等。现在，当我加载我的游戏时，只有动画的第一个精灵是物理的轮廓。所以我可以看到游泳者的腿在踢，但物理的 debugdraw 网格也没有动画。现在这不是一个真正的问题，直到例如我的游泳者失去双腿（我知道奇怪的游戏）。我将动画更改为现在没有腿的游泳者，但物理网格仍然显示腿。因此，任何与东西的碰撞仍然会发生在腿所在的地方，但它们不应该发生。这有意义吗？

有没有办法更新新动画的物理特性，还是我需要移除我的整个游泳者并画一个新的？

任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:17:07.190

这是有道理的，因为您的精灵在两种状态下都使用相同的 box2d 网格。如果您希望在更改 Sprite 后具有不同的碰撞行为，则应指定另一个（较小的）网格体。

请注意，即使在 cocos2d 端，您的精灵仍然具有与新动画相同的容器框。

为了继续使用 SpriteHelper 功能，您可能需要创建 2 个不同的 sprite-body 集：一个带有完整的身体，然后在“意外”之后将其替换为无腿的 sprite。

现在，就游戏玩法而言，我的观点是无论如何都不应该有任何腿部碰撞。由于它们在移动，玩家不会觉得它们不碰撞很奇怪。您可以使用没有腿的网格体并将其用于两个精灵。除非您想将不同的碰撞作为游戏功能（例如让玩家选择割断腿以适应较小的洞穴等）

# asp.net - 当我在 Asp.net App 中使用 web 服务时，如何解决 Opeara 中的跨域问题？

> ID：14214691
> 
> 赞同：0
> 
> 时间：2013-01-08T12:12:33.377
> 
> 标签：asp.net, jquery

```
 jQuery.ajax({
                type: "POST",
                url: 'myserviceurl/GetName.ashx',
                data: { name:"naresh"},
                dataType: "text/plain",
                xhrFields: {
                        withCredentials: true
                     },
                beforeSend: function () {
                    alert("before send");
                },
                success: function (msg) {
                    alert("Success :  " +msg);
                },
                error: function (err) {
                alert("Error" +err);
                }
            }); 
```

我正在使用上面的源代码在我的 Asp.Net 应用程序中使用 WebService。我的服务处理程序返回一个字符串消息。上面的代码在 IE9 中使用成功消息。但是当我在 Chrome / Opera 中运行应用程序时，我收到的成功消息为空，有时显示未定义的成功。在提琴手中显示成功消息，但不在浏览器（Chrome/Opera）中。 *** *现在我收到以下错误：“XMLHttpRequest 无法加载 MYSERVICEURL。Access-Control-Allow-Origin 不允许来源 MYASP.NETAPPLICATIONURL。”

现在我的问题是：我需要在哪里更改我的代码才能在 Chrome/opera 中运行？

笔记：

1）当我将 ServiceHandler 和 Asp.Net WebApplication 托管到我的 IIS 中时，它可以在所有浏览器中运行。

2）现在我没有将我的 Asp.Net WebApplication 托管到 iis 中，只是我遇到了浏览器（Chrome 和 Operar）然后我遇到了上述错误。

任何人的建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:19:50.490

您必须使用 JSONP 而不是 JSON。

你也应该试试

跨域：真

# c# - 在套接字失败的情况下确保消息顺序的正确性？

> ID：14214693
> 
> 赞同：-1
> 
> 时间：2013-01-08T12:12:36.730
> 
> 标签：c#, sockets

通过套接字传输消息时如何确保消息顺序的正确性？有什么具体的设计可以遵循吗？请推荐一些方法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:16:53.490

如果它是 TCP 套接字，那么对丢弃的数据包等的支持会自动内置到 TCP 堆栈中。您无需执行任何操作，但请注意，丢弃的数据包可能会在重新发送数据包时导致短暂的信号中断。这种情况一直在发生：没有人注意到（除了写开关的人等）。

如果您尝试处理完全中断的连接：这取决于您的协议。如果您正在对每条消息进行请求/响应，那么这很简单 - 但您需要支付大量延迟开销。一些协议在请求/响应方面完全独立工作（您不会在每次发送请求时都停止响应 - 您只是继续发送请求，并且响应将在将来的某个时候返回）。在该设置中，您将不得不围绕它进行设计：也许到最后一个*已知*的响应，但这仍然意味着有些事情可能已经在您没有收到回音的情况下进行了处理。所以：你可能想让所有的动作安全地重复，所以如果你发送了它，你可以再次发出它，但不知道它是否完成。

如果您使用的是 UDP，那么答案是“完全是您；那是您的问题；您需要弄清楚”，这通常意味着在每个数据包中嵌入一个序列号。当然，如果您使用的是 UDP，您可能只是设计为*允许*丢弃的数据包，并在不久的将来重新同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:16:46.030

TCP 按照发送的顺序传递数据。UDP 没有。如果你有一个错误导致 TCP 失败，这是非常罕见的，你必须重新开始。UDP 不保证传送，因此您需要在其之上添加一个协议来请求重传并应用排序。使用 TCP 或进行自己的序列检查。

# jquery - jQuery validate + AJAX 电子邮件可用性检查

> ID：14214696
> 
> 赞同：0
> 
> 时间：2013-01-08T12:12:55.813
> 
> 标签：jquery, ajax, jquery-validate

**更新** 我正在使用 jQuery 验证插件和远程方法来检查 ajax 的电子邮件可用性，但我不明白为什么 ajax 只调用一次。当输入电子邮件时，ajax 进行呼叫并在控制台中打印输入的电子邮件，但如果我删除它并在另一封电子邮件中写入，则没有任何反应。

HTML

```
<input type="text" name="on0" value="Your e-mail" class="form-field no-mr check-email"> 
```

jQuery

```
jQuery.validator.addMethod('defaultInvalid', function(value, element) {
    return !(element.value == element.defaultValue);
}, 'Custom Error Message for this field');

$('.checkout-form').validate({
    rules: {
        on0 : 'required defaultInvalid email'
    }
});

$('.check-email').rules("add", {
    "remote" : {
        url: 'c/',
        type: "post",
        dataType: 'html',
        data: {
            check: function() {
                return $('.check-email').val();
            }
        },
        success: function(data){
            console.log(data);
        },
        error: function(data){
            console.log(data);
        }
    }
}); 
```

ajax发帖的PHP

```
<?php 

echo $_POST['check'];

 ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T15:54:25.067

ajax 只触发一次的原因是你覆盖了 jQuery validate 远程方法的成功回调。保持简单并尝试这样的事情：

```
<input name="email_address"/> 
```

带脚本

```
<script>
$(function () {
    $('form').validate({
        rules: {
            email_address: {
                required:true,
                remote: {
                    url: "your_script.php"
                }
            }
        },
        debug: true,
        submitHandler: function () { alert('ok'); }
    });

});
</script> 
```

和php之类的

```
<?php 

echo $_GET['email_address'] == "bob";

 ?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T12:33:49.040

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">

    $(document).ready(function(){

        $('.checkout-form').validate({
            rules: {
                on0 : {
                    required : true,
                    remote : {
                        url: YOUR_HOST,
                        type: "post",
                        data: {
                            email_address: function()
                            {
                                return $("#email_address").val();
                            }
                        }
                    }
                },
            },
            messages : {
                required:"message",
                remote: "message"
            }
        });
    });
</script>
```

**在 HTML 中**

```
<input type="text" name="on0" value="Your e-mail" class="form-field no-mr check-email" id="email_address"/>
```

**并在 php 代码中**

```
<?php 

echo $_POST['email_address'];

 ?>
```

# jsf-2 - JSF 和 PrimeFaces 自定义组件以及内部的其他组件

> ID：14214701
> 
> 赞同：0
> 
> 时间：2013-01-08T12:13:22.150
> 
> 标签：jsf-2, primefaces, custom-component

**描述：**

我正在 JSF 中创建一个**电子商店**。在右侧，我想拥有我商店的所有类别。我使用递归方法遍历所有类别（类别可以有父类别）。

所以我选择这样做的方式是创建我自己的组件。 *这种想法正确吗？* 如何做到这一点，或者我应该尝试其他方法？

我解决这个问题的尝试：

*   创建自定义**组件**`extends UIComponentBase`（也许我应该扩展其他东西）。
*   然后在此组件内创建另一个组件 ( **CommandButtons** )，将添加该组件以托管该组件。

另一个问题是如何启动`actionListener`我的按钮？因为它们不会自动启动？有人创建过这类组件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:06:39.730

您基本上是在寻找可以呈现树层次结构的 UI 组件。[PrimeFaces](http://primefaces.org)已经提供了两个开箱即用的基于树的组件，即[`<p:tree>`](http://www.primefaces.org/showcase/ui/data/tree/basic.xhtml)和[`<p:treeTable>`](http://www.primefaces.org/showcase/ui/data/treetable/basic.xhtml)。单击链接可查看几个展示示例。

如果您打算完全自由地标记树层次结构，那么您可能会发现[OmniFaces](http://omnifaces.org) [`<o:tree>`](http://showcase.omnifaces.org/components/tree)更有用。它不呈现任何 HTML，因此您可以在 HTML 中自由地相应地标记树节点。

或者，如果您真的坚持自己开发并因此重新发明轮子，请查看这些组件的源代码。它们是开源的。

# html - 用过的在 HTML 中浏览和选择图像。但它只选择图像。但我想选择它在 HTML 中的完整路径位置

> ID：14214705
> 
> 赞同：1
> 
> 时间：2013-01-08T12:13:34.070
> 
> 标签：html

> **可能重复：**
> [如何从文件输入中获取文件的完整路径](https://stackoverflow.com/questions/4176377/how-to-get-the-full-path-of-the-file-from-a-file-input)

我曾经在 HTML 中浏览和选择图像文件。但它只选择图像。但我想在 HTML 中选择其完整路径位置。怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:23:26.967

从 serve-let 可以这样尝试

```
<form action="upload-script-url" method="post" enctype="multipart/form-data">
    <input type="file" name="file">
    <input type="submit">
</form> 
```

并从 httpRequest 您可以获取该格式的文件。PS：当使用 input type=file 对象选择文件时，value 属性的值取决于“将文件上传到服务器时包含本地目录路径”安全设置的值，用于显示包含输入对象的网页。

仅当启用此设置时，才会返回所选文件的完全限定文件名。禁用该设置时，Internet Explorer 8 将本地驱动器和目录路径替换为字符串 C:\fakepath\，以防止不适当的信息泄露。

检查这个问题[链接](https://stackoverflow.com/questions/3489133/full-path-from-file-input-using-jquery)

# javascript - 每隔几分钟刷新一次 div - rails

> ID：14214711
> 
> 赞同：0
> 
> 时间：2013-01-08T12:13:51.677
> 
> 标签：javascript, refresh

我有一个页面的一部分需要每隔几分钟刷新一次，我之前在 php 中完成了此操作，并将其调整为以下 Rails：

```
:javascript
  $(document).ready(function() {
       setInterval(function() {
        $("#welcome2").load("floor7.haml #welcome2");
    }, 500);
  }); 
```

但这在我的 Rails 应用程序中不起作用，我不确定我是否放入了正确的文件路径？

我明白了：`ReferenceError: $ is not defined`

**更新**

```
<body style="background: #000; font-family: 'Trebuchet MS'; overflow-x: hidden; margin:0;">
<script>
  //<![CDATA[
    $(document).ready(function() {
             setInterval(function() {
              $("#welcome2").load("/screen/floor7.haml #welcome2");
          }, 500);
    });
  //]]>
</script>
<div id='welcome2'>
  <span>Welcome</span>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:15:51.957

尝试这个

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js"
    type="text/javascript"></script>

 <script>
 $(document).ready(function() {
           setInterval(function() {
            $("#refresh").load("welcome.php #refresh");
        }, 5000);
});
</script> 
```

# qt - QWebView 重装。contextMenuEvent(QContextMenuEvent*)

> ID：14214712
> 
> 赞同：1
> 
> 时间：2013-01-08T12:13:53.707
> 
> 标签：qt, contextmenu, qwebview

我重装了 QWebView::contextMenuEvent(QContextMenuEvent*) 并且右键单击小部件无效。

这是我的代码：

```
void ExtendedWebView::contextMenuEvent(QContextMenuEvent *event)
{
    qDebug() << "called";
    m_copyAction->setEnabled(!selectedHtml().isEmpty());
    m_contextMenu->setVisible(true);
    m_contextMenu->exec(event->globalPos());
} 
```

当我右键单击小部件时，它不起作用 - 没有显示菜单。我究竟做错了什么？

**UPD**： http: [//paste.kde.org/640508/](http://paste.kde.org/640508/) - 完整代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T14:08:50.950

运行此 QWebView 的 Marble 的 PopupItem 的当前版本不转发 contextMenuEvent。更改其 eventFilter 以执行此操作，您将收到该事件。

# java - 如何在android中比较两个日期和时间

> ID：14214713
> 
> 赞同：0
> 
> 时间：2013-01-08T12:13:57.267
> 
> 标签：java, android

我有一个问题。如何比较2个日期和时间

```
enter code here
if(fromdate<=nowdt.now() && todate>= nowdt.now()){
////

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-08T12:15:08.590

java.util.Date 对象包含用于比较日期的方法 .before()、.after 和 .equals()。

```
if((fromdate.before(nowDt) || fromDate.equals(nowDt)) 
    && ((todate.after(nowDt) || toDate.equals(nowDt))
////

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:19:09.177

**-**用来`Joda Time library`做这个......

**例如：**

```
Date ds = new Date();
DateTime d = new DateTime(ds);

DateTime e = new DateTime(2012,12,07, 0, 0);
System.out.println(d.isEqual(e));

System.out.println(d.toDateMidnight().isEqual(e.toDateMidnight())); 
```

**///////////////////////////// 或者**

```
System.out.println(d.withTimeAtStartOfDay().isEqual(e.withTimeAtStartOfDay())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T12:19:12.343

试试这个找出时差

```
 Calendar Day = Calendar.getInstance();
  Day.set(Calendar.DAY_OF_MONTH,25);
  Day.set(Calendar.MONTH,7); 
  Day.set(Calendar.YEAR, 1985);

  Calendar today = Calendar.getInstance();

  long diff = today.getTimeInMillis() - Day.getTimeInMillis(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T11:53:16.650

使用这个答案

```
if((options.FromDate.before(now_Date)||options.FromDate.equals(now_Date)) && (options.ToDate.after(now_Date)|| options.ToDt.equals(now_Date)) ){

do some processs........
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T12:23:35.387

你可以写

```
long nowTime = System.currentTimeMillis();
if(fromdate.getTime() <= nowTime && nowTime <= todate.getTime()) { 
```

或者你可以写

```
Date nowDate = new Date();
if(fromdate.compareTo(nowDate) * nowDate.compareTo(todate) >= 0) { 
```

或者

```
if(!fromdate.after(nowDate) && !todate.before(nowDate)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T12:17:11.673

比较两个日期和时间的函数：

```
public static int compareTwoDates(Date date1, Date date2) {
        if (date1 != null && date2 != null) {
            int retVal = date1.compareTo(date2);

            if (retVal > 0)
                return 1; // date1 is greatet than date2
            else if (retVal == 0) // both dates r equal
                return 0;

        }
        return -1; // date1 is less than date2
    } 
```

你可以在你想用的地方使用它。如果 date1 > date2，则结果将 > 0，如果 date1 = date2，则 = 0，如果 date1 < date2，则 < 0。希望能帮助到你。

# emacs - Cedet - 错误的类型参数，stringp，1

> ID：14214714
> 
> 赞同：3
> 
> 时间：2013-01-08T12:14:04.117
> 
> 标签：emacs, cedet

我正在使用来自 bzr 的最新 cedet 版本。我的 cedet 配置如下（取自 Alex Ott 的文件）。

```
(setq cedet-root-path (file-name-as-directory "~/cedet"))  
(load-file (concat cedet-root-path "cedet-devel-load.el"))  
(add-to-list 'load-path (concat cedet-root-path "contrib"))  

;; select which submodes we want to activate

(add-to-list 'semantic-default-submodes 'global-semantic-mru-bookmark-mode)  
(add-to-list 'semantic-default-submodes 'global-semanticdb-minor-mode)  
(add-to-list 'semantic-default-submodes 'global-semantic-idle-scheduler-mode)  
(add-to-list 'semantic-default-submodes 'global-semantic-stickyfunc-mode)  
(add-to-list 'semantic-default-submodes 'global-cedet-m3-minor-mode)  
(add-to-list 'semantic-default-submodes 'global-semantic-highlight-func-mode)  
(add-to-list 'semantic-default-submodes 'global-semanticdb-minor-mode)  

;; Activate semantic

(semantic-mode 1) 
```

每当我打开 C 源代码时，我总是收到错误“错误类型参数，stringp 1”。
看起来 (semantic-mode 1)
是导致问题的原因。任何帮助表示赞赏。

我正在使用 emacs 24，如果我使用 emacs 附带的 cedet，我没有看到这个问题。

编辑：附加堆栈跟踪。也会将此发送到 cedet-delevel 邮件列表。.~/.semanticdb 尚未创建（新笔记本电脑）。

```
Debugger entered--Lisp error: (wrong-type-argument stringp 1)
string-match("\n" 1 0)
split-string(1 "\n")
semantic-cpp-defs(1)
semantic-gcc-setup()
semantic-default-c-setup()
semantic-new-buffer-fcn()
semantic-mode(1)
eval-buffer(#<buffer  *load*> nil "/home/sudheesh/Dropbox/cedet_new.el" nil t)  ;     Reading at buffer position 898
load-with-code-conversion("/home/sudheesh/Dropbox/cedet_new.el" "/home/sudheesh/Dropbox /cedet_new.el" nil nil) 
```

load("/home/sudheesh/Dropbox/cedet_new.el" nil nil t) 加载文件("~/Dropbox/cedet_new.el")

**已解决：此问题现已解决。我还没有安装 g++ 编译器。问题是因为这个。安装 g++ 编译器解决了这个问题。感谢来自 cedet-dlevel 邮件列表的 David Engster 的支持。**

# c++ - 以编程方式迭代 iOS 应用程序中的所有窗口/视图

> ID：14214716
> 
> 赞同：3
> 
> 时间：2013-01-08T12:14:08.423
> 
> 标签：c++, objective-c, ios

我是一名 C++/Windows 开发人员，正在掌握 iOS 和 OBJ-C ... 谁能提供示例代码我如何遍历属于我的应用程序的所有窗口/视图并将一些重要信息记录/打印到调试器每个的大小，位置，状态等。我正在使用第 3 方库，我并没有真正理解它代表我创建的确切内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T12:31:08.643

在调试器中，您可以尝试：

```
po [[[UIApplication sharedApplication] keyWindow] recursiveDescription] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T12:41:40.587

尝试这个：

```
po [[UIApplication sharedApplication] windows] 
```

# iphone - CoreData：从 xcdatamodel 版本 n 到 n+5 的轻量级迁移

> ID：14214722
> 
> 赞同：2
> 
> 时间：2013-01-08T12:14:34.020
> 
> 标签：iphone, ios, core-data, core-data-migration

假设用户在他们的 iPhone 上安装了**MyApp2.xcdatamodel**并且他们有一段时间没有升级他们的应用程序。现在应用程序的当前版本使用**MyApp7.xcdatamodel**。轻量级迁移机制能否将数据平滑迁移到当前模型？

只要**MyApp3** .xcdatamodel、**MyApp4** .xcdatamodel、**MyApp5** .xcdatamodel 和**MyApp6** .xcdatamodel 可用，我的假设是肯定的。

谁能证实这个假设？

提前致谢，

乔斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:59:35.607

你的假设是正确的。只要您在项目中拥有所有模型，这将起作用。

# xml - XSLT 通过 XML 循环检查值是否存在

> ID：14214733
> 
> 赞同：1
> 
> 时间：2013-01-08T12:14:56.583
> 
> 标签：xml, xslt

XML:

```
<amenities>
  <record>
    <thekey>77</thekey>
    <thevalue>Balcony</thevalue>
  </record>
  <record>
    <thekey>75</thekey>
    <thevalue>Cable</thevalue>
  </record>
  <record>
    <thekey>35</thekey>
    <thevalue>High Speed Internet</thevalue>
  </record>
  <record>
    <thekey>16</thekey>
    <thevalue>Fireplace</thevalue>
  </record>
  <record>
    <thekey>31</thekey>
    <thevalue>Garage</thevalue>
  </record>
  <record>
    <thekey>32</thekey>
    <thevalue>Phone</thevalue>
  </record>
</amenities> 
```

我需要检查设施中的每条记录，以确定是否存在“35”（高速互联网）。便利设施的记录可能会有所不同。有时它会有 35 个（高速互联网），有时它不会。我需要能够在 XSLT 中检查这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:29:41.203

在 XSLT 中有多种编写条件的方法，听起来好像您只是想编写一个匹配您的条件而另一个不匹配它的模式：

```
<xsl:template match="amenities[record[thekey = 35 and thevalue = 'High Speed Internet']]">high speed internet exists</xsl:template>

<xsl:template match="amenities[not(record[thekey = 35 and thevalue = 'High Speed Internet'])]">high speed internet does not exist</xsl:template> 
```

当然，您也可以编写一个与`amenities`元素匹配的模板，然后在内部使用`xsl:if`or`xsl:choose`

```
<xsl:template match="amenities">
  <xsl:choose>
     <xsl:when test="record[thekey = 35 and thevalue = 'High Speed Internet']">exists</xsl:when>
     <xsl:otherwise>does not exist</xsl:otherwise>
  </xsl:choose>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:11:38.527

**在最简单的形式中，这个问题的解决方案是一个单一的、纯 XPath 表达式**：

```
/*/record[thekey = 35 and thevalue = 'High Speed Internet'] 
```

这将选择`record`作为 XML 文档顶部元素的子元素并且`thekey`具有字符串值的子元素（当转换为数字时等于 35 并且具有`thevalue`字符串值为字符串“高速互联网”的子元素）的所有元素.

**所有*不*具有此属性的`record`元素***：*

 *```
/*/record[not(thekey = 35 and thevalue = 'High Speed Internet')] 
```

**您可以通过简单地将相应的 XPath 表达式指定为（推荐的）或指令的`select`参数**来处理这些节点。**`xsl:apply-templates``xsl:for-each`**

 **```
<xsl:apply-templates select="/*/record[thekey = 35 and thevalue = 'High Speed Internet']"/> 
```

**请注意，仅`xsl:template`使用从该 XPath 表达式派生的匹配模式指定 an 并不能保证选择执行该模板**——这取决于是否应用了模板（显式或隐式）。

**访问所有感兴趣的节点的一种有效的、仅限 XSLT 的方法是使用*key*：**

```
<xsl:key name="kRecByKeyAndVal" match="record" use="concat(thekey,'+',thevalue)"/> 
```

以上为所有元素指定了一个索引`record`，基于它们`thekey`和`thevalue`子元素的连接（通过合适的分隔符字符串 ('+') 消除歧义，保证不会出现在这些值中）。

**然后，引用具有字符串值为“35”的子元素和字符串值为“高速互联网”的子元素的所有`record`元素`thekey``thevalue`**的方法是：

```
key('kRecByKeyAndVal', '35+High Speed Internet') 
```

每当要多次计算表达式时，使用键给我们带来了极大的效率（速度）。***

# android - 如何在安卓手机上运行.pl文件

> ID：14214735
> 
> 赞同：0
> 
> 时间：2013-01-08T12:14:58.167
> 
> 标签：android, perl

我想在 android moble 上运行 perl 脚本文件（包含 adb 命令）。任何人都可以建议我如何在 android mobile 上运行 perl 文件。

如果我们不能直接在手机上运行，​​有没有办法将perl文件转换为apk。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T12:52:25.297

[您可以结合使用Scripting Layer for Android (SL4A)](http://code.google.com/p/android-scripting/)和[Perl for Android](http://code.google.com/p/perl-android-apk/)在 Android 设备上运行 Perl 。

但是`adb`（Android Debug Bridge）是一个客户端-服务器工具，用于通过与附加的 Android 设备或模拟器通信来调试 Android 应用程序。直接在安卓平台上运行是没有意义的。

# qt - Qt中的命名属性和方法

> ID：14214736
> 
> 赞同：1
> 
> 时间：2013-01-08T12:15:00.173
> 
> 标签：qt, properties, naming-conventions

我想要这个：

```
class Test {
  private:
    int a;

  public:
    int a();
    int setA(int val);
} 
```

在我看来，Qt 图书馆一直在这样做。但我得到一个“声明blabla”编译器错误。这是为什么？我真的必须命名方法**getA()**吗？

我什至尝试过使用 Q_PROPERTY：

```
class Test : public QObject {
  Q_OBJECT
  Q_PROPERTY(int a READ a WRITE setA)

  public:
    int a(){return a}
    int setA(int val){a=val;}
} 
```

这也行不通。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T12:36:22.613

在 Qt 本身中，数据成员通常位于 Private 类（[Pimpl idiom](http://en.wikipedia.org/wiki/Pimpl)）中，所以这不是问题。如果您不使用 Pimpl（这有点乏味，并且只有在您必须保证二进制兼容性时才真正需要，或者有一个非常大的项目，其中减少包含具有足够显着的效果），最常见的方法是预先添加成员带有前缀，例如 m_：

```
 Q_PROPERTY(int a READ a WRITE setA)

public:
    void setA( int a ) { m_a = a; }
    int a() const { return m_a; }

private:
    int m_a; 
```

另一个优点是成员变量和局部变量总是很容易相互区分。

备择方案：

*   通过`this->a`（比 m_a 更繁琐）访问变量
*   使用 getA() （制作丑陋的 API，恕我直言，但当然取决于您的 API 风格 - 如果其他所有内容都使用 get*，则应该效仿）

# javascript - 如何从服务器端脚本读取真/假响应以将真/假返回给 jQuery 函数？

> ID：14214738
> 
> 赞同：2
> 
> 时间：2013-01-08T12:15:06.413
> 
> 标签：javascript, php, jquery, ajax

我有一个想要运行的 jQuery 进程，但前提是来自 PHP 脚本的响应是`true`.

我想每 2 秒检查几个不同 PHP 脚本的输出，这将确定我的 jQuery 进程是否可以继续。

怎么可能呢？

当需要使用[ajax()](http://api.jquery.com/jQuery.ajax/)函数时，我遇到了困难，因为来自 PHP 的结果数据将被传递给`success`回调函数。我不知道如何让我的`check_php_script_A_returns_false()`函数返回`true`或`false`.

这是我的想法：

```
$(document).ready(function()
{
    $('#switch').prop('checked', false);

    // Listen event: turn process off/on
    // Every 2 seconds, call is_trigger_met() to see if process can be kicked off.
    var intervalId = null;
    $('#switch').change(function(){
      if ($(this).is(':checked'))
        intervalId = setInterval(is_trigger_met, 2000);
      else
        clearInterval(intervalId);
    });
}

function is_trigger_met() {
    if ( check_php_script_A_returns_false() )
        return false;

    if ( check_php_script_B_returns_false() )
        return false;

    // ... run my process here ...

    return true;
} 

function check_php_script_A_returns_false() {
    // What do I do here to check php script?
    // Do I use jQuery.ajax() function with async = false? 
    // If so, an the PHP response is TRUE, how do I make that 
    // 'return true/false' for THIS check_php_script_A_returns_false() function?
    return true/false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:16:12.003

在 PHP 中，您必须将`TRUE`OR`FALSE`作为字符串返回。

在Javascript中你必须匹配

```
if( response == 'TRUE' ){
 retrun true;
} else {
 return false;
} 
```

# ios - 存档期间不存在 Xcode 环境变量

> ID：14214741
> 
> 赞同：21
> 
> 时间：2013-01-08T12:15:15.960
> 
> 标签：ios, xcode, environment-variables

我有一个具有 TestFlight 构建方案的 iOS 应用程序。在这个方案中，我设置了一个名为 TESTFLIGHT 的环境变量，在“运行”选项卡中设置了值 1。此外，在构建方案的“配置文件”选项卡中，它选中了“使用运行操作的参数和变量”选项，我在列表中看到了适当的 EV。

这在从 Xcode 运行应用程序时工作得很好，但是当我制作存档并在我的设备上运行应用程序时，环境变量 TESTFLIGHT 不存在。我的问题是我在这里缺少一个选项/方案选项卡吗？

EV 在“运行”选项卡上设置，并被选中用于调试构建配置。我需要更改它才能发布吗？

谢谢你们！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-08T12:26:29.057

仅当您从 Xcode 运行应用程序时才会设置环境变量。如果您通过点击图标直接从设备运行相同的应用程序，它们将不会被设置。它们不是应用程序的一部分。正如它们的名字所暗示的，它们是 Xcode 在运行它们之前专门设置的环境的一部分。（如果您在 Mac 上开发，您可以在启动可执行文件之前将它们设置在 shell 中，但这在 iPhone 上是不可能的。）

# javascript - 意外的标识符 javascript

> ID：14214743
> 
> 赞同：0
> 
> 时间：2013-01-08T12:15:21.617
> 
> 标签：javascript, slider

在这里我有一个问题，我想做一个滑块，我`window.clearTimeout(timer)`在函数`nextSlide()`和`prevSlide()`. 你能帮助我吗 ？

```
var timer = new Object;

function slider(){
nextSlide();
window.setTimeout(slider, 5000);
}

function nextSlide(){
var $Slides = $(".contenu");
$Slides.animate(
    {left: "-=213px"},
    1000,
    function(){
        $Slides.data("currentSlide",$Slides.data("currentSlide")+1);
        if($Slides.data("currentSlide") > $Slides.data("nbSlides")) {
            $Slides.data("currentSlide",1).css({left:"-213px"});
        }
    }
    window.clearTimeout(timer);
    timer = window.setTimeout(slider, 5000);
  );
}

function prevSlide(){
var $Slides = $(".contenu");
$Slides.animate(
    {left:"+=213px"},
    1000,
    function(){
        $Slides.data("currentSlide", $Slides.data("currentSlide")-1);
        if($Slides.data("currentSlide") == 0) {
            $Slides.data("currentSlide",$Slides.data("nbSlides")).css({left:-(213*$Slides.data("currentSlide"))});
        }
    }
    window.clearTimeout(timer);
    timer = window.setTimeout(slider, 5000);
);
} 
```

这里加载：

```
$(function(){

slider();

$('#slider').addClass('slider');
var $Slides = $('.contenu');
var _step = $Slides.find(".slide:first").width();

$Slides.data("currentSlide",1).data("nbSlides",$Slides.find('.slide').size());

$Slides.find(".slide:last").clone().prependTo(".contenu");

$Slides.find(".slide:first").next().clone().appendTo('.contenu');

$Slides.find(".slide:first").addClass("clone").end().css({left:-_step});

$Slides.width($Slides.find(".slide").size()*_step);

$('.next').bind("click", nextSlide);
$('.prev').bind("click", prevSlide);
}); 
```

谢谢帮助。;)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:22:45.190

你还在`.animate()`通话中，你应该向上`);`移动`window.clearTimeout(timer)`。

**此答案假设您想在启动动画后直接设置 timeOut，如果您想在动画的回调中设置 timeOut，您应该按照 David 的回答将其移至 above `}`。**

*编辑：*
根据您的评论，我为您制作了此功能：

```
function nextSlide(){
    var $Slides = $(".contenu");
    $Slides.animate(
        {left: "-=213px"},
        1000,
        function(){
            $Slides.data("currentSlide",$Slides.data("currentSlide")+1);
            if($Slides.data("currentSlide") > $Slides.data("nbSlides")) {
                $Slides.data("currentSlide",1).css({left:"-213px"});
            }
            window.clearTimeout(timer);
            timer = window.setTimeout(slider, 5000);
        }
    );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:23:19.900

函数调用参数应该用逗号分隔，`,`但是在你的情况下，你用分号分隔它们`;`- 该行以分号而不是逗号结尾。也是下一行。这不是一个包含多个语句的函数体，而是一个函数调用 (to `animate`)，因此您需要使用逗号。

另一方面 - 这些可能不是参数，因此您需要将结束`);`部分移到这些行上方，以便它们成为单独的语句而不是函数参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T12:22:17.787

此代码片段：

```
window.clearTimeout(timer);
timer = window.setTimeout(slider, 5000); 
```

被断章取义。您需要将其放置在函数内或全局范围内以使其工作，f.ex：

```
function(){
    $Slides.data("currentSlide", $Slides.data("currentSlide")-1);
    if($Slides.data("currentSlide") == 0) {
        $Slides.data("currentSlide",$Slides.data("nbSlides")).css({left:-(213*$Slides.data("currentSlide"))});
    }
    window.clearTimeout(timer);
    timer = window.setTimeout(slider, 5000);
} 
```

# perl - 无法使用以下代码将连续的 Net::Ping 输出写入日志文件

> ID：14214751
> 
> 赞同：0
> 
> 时间：2013-01-08T12:15:52.817
> 
> 标签：perl, debugging, ping, continuous

我已经编写了以下代码来连续记录带有时间戳的 ping RTT 服务器。脚本是命令行中的工作文件但是我的痛苦日志文件 Ping_10.112.114.11.txt 是空的，我在代码中看不到任何错误或警告或语法错误。

下面是我的代码：

```
#!/user/bin/perl

use Net::Ping;
use Time::HiRes;
use strict;

open (LOG , ">Ping_10.112.114.11.txt") || die "Cannot create log file :$!";

print LOG "File is ready to write\n\n";
my $host ="10.112.114.11";
my $p = Net::Ping->new();       #tcp echo request for ping check
$p->hires();

do  
{   my ($ret, $duration, $ip) = $p->ping($host);
my $time = localtime;
my $dur = (int(1000*$duration))/1000;
print "$time\t$host is alive (packet RTT: $dur ms)\n";
print LOG "$time\t$host is alive (packet RTT: $dur ms)\n";
}   while(1);

#END 
```

我还尝试将输出保存到一个变量，然后将其发送到文件句柄进行打印，但不幸的是，我的努力似乎都没有正常工作。

```
my $output = ""$time\t$host is alive (packet RTT: $dur ms)\n";
print LOG "$output"; 
```

任何人都可以帮助我突出我的愚蠢错误，因为我编写了许多使用相同 perl 语法但工作正常的脚本。

我的总体要求是编写一个脚本，该脚本运行以在日志文件中连续记录服务器的 RTT 和连接性，并带有时间戳。就像 Ping -t 的输出带有额外的时间戳值一样。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:05:59.953

问题很可能是文件的输出被缓冲了，而您等待的时间不够长，以至于缓冲区被填充并刷新到文件中。启用自动刷新将为您解决此问题，并且您的代码还有一些其他问题。这种重构应该做你想做的事。

```
use strict;
use warnings;

use Net::Ping;
use Time::HiRes;

my $host = '10.112.114.11';

STDOUT->autoflush;

open my $log, '>', "Ping_$host.txt" or die "Cannot create log file: $!";
$log->autoflush;

my $p = Net::Ping->new;
$p->hires;

while () {
  my ($ret, $duration, $ip) = $p->ping($host);
  my $event = sprintf "%s\t%s is alive (packet RTT: %.3fms)\n",
      scalar localtime, $host, $duration;
  print STDOUT $event;
  print $log $event;
} 
```

# c++ - 如何读取直到从 C++ 中的 cin 按下 ESC 按钮

> ID：14214753
> 
> 赞同：6
> 
> 时间：2013-01-08T12:16:09.193
> 
> 标签：c++, escaping, getline

我正在编写一个直接从用户输入读取数据的程序，并且想知道在按下键盘上的 ESC 按钮之前如何读取所有数据。我发现只有这样的东西：

```
std::string line;
while (std::getline(std::cin, line))
{
    std::cout << line << std::endl;
} 
```

但需要添加一种可移植的方式（Linux/Windows）来捕捉按下的 ESC 按钮，然后中断一个 while 循环。这该怎么做？

编辑：

我写了这个，但即使我按下键盘上的 ESC 按钮仍然可以工作：

```
#include <iostream>
#include <string>
using namespace std;

int main()
{
    const int ESC=27;
    std::string line;
    bool moveOn = true;

    while (std::getline(std::cin, line) && moveOn)
    {
        std::cout << line << "\n";
        for(unsigned int i = 0; i < line.length(); i++)
        {
            if(line.at(i) == ESC)
            { 
                moveOn = false;
                break;

            }
        }
    }
    return 0;
} 
```

编辑2：

伙计们，这个解决方案也不起作用，它吃掉了我线路中的第一个字符！

```
#include <iostream>
#include <string>
using namespace std;

int main()
{
    const int ESC=27;
    char c;
    std::string line;
    bool moveOn = true;

    while (std::getline(std::cin, line) && moveOn)
    {
        std::cout << line << "\n";
        c = cin.get();
        if(c == ESC)
            break;

    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T12:56:32.517

```
int main() {
  string str = "";
  char ch;
  while ((ch = std::cin.get()) != 27) {
    str += ch;
  }

 cout << str;

return 0;
} 
```

这会将输入输入到您的字符串中，直到遇到转义字符

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:23:41.927

在你读完这行之后，检查你刚刚读到的所有字符并寻找转义 ASCII 值（十进制 27）。

* * *

这就是我的意思：

```
while (std::getline(std::cin, line) && moveOn)
{
    std::cout << line << "\n";

    // Do whatever processing you need

    // Check for ESC
    bool got_esc = false;
    for (const auto c : line)
    {
        if (c == 27)
        {
            got_esc = true;
            break;
        }
    }

    if (got_esc)
        break;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-10T12:32:58.410

我发现这适用于获取转义键的输入，您还可以在 while 函数中定义和列出其他值。

```
#include "stdafx.h"
#include <iostream>
#include <conio.h> 

#define ESCAPE 27

int main()
{
    while (1)
    {
        int c = 0;

        switch ((c = _getch()))
        {
        case ESCAPE:
            //insert action you what
            break;
        }
    }
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-11T17:22:28.037

```
#include <iostream>
#include <conio.h>

using namespace std;

int main()
{
    int number;
    char ch;

    bool loop=false;
    while(loop==false)
    {  cin>>number;
       cout<<number;
       cout<<"press enter to continue, escape to end"<<endl;
       ch=getch();
       if(ch==27)
       loop=true;
    }
    cout<<"loop terminated"<<endl;
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-09T04:08:02.537

我建议不仅对于 C++ 中的 ESC 字符，而且对于任何语言的键盘的任何其他字符，读取您输入到整数变量中的字符，然后将它们打印为整数。

或者在线搜索 ASCII 字符列表。

这将为您提供密钥的 ASCII 值，然后就很简单了

```
if(foo==ASCIIval)
   break; 
```

> 对于 ESC 字符，ASCII 值为 27。

# c# - EF Code 1st 多对多，主键由 3 个字段组成

> ID：14214755
> 
> 赞同：2
> 
> 时间：2013-01-08T12:16:13.383
> 
> 标签：c#, entity-framework, ef-code-first

我正在使用 EF5（代码 1st）并使用 Fluent API 进行所有配置。我的模型如下所示：

```
public class AddressType    
{
    public int    AddressTypeID { get; set; }
    public string Name          { get; set; }
}
public class Address
{
    public int    AddressID  { get; set; }
    public int    StateID    { get; set; }

    public string Street     { get; set; }
    public string City       { get; set; }
    public string PostalCode { get; set; }

    public State State                { get; set; }
    public ICollection<Person> People { get; set; }
}
public class Person
{
    public int      PersonID    { get; set; }
    public string   Name        { get; set; }

    public ICollection<Address> Addresses { get; set; }
} 
```

我的数据库包含上述类的表 + 下面的 Many:Many 表：

```
Person.Person2Address
(
    PersonID      INT NOT NULL,
    AddressID     INT NOT NULL,
    AddressTypeID INT NOT NULL,
) 
```

上面的 3 个字段都是外键，这 3 个字段共同构成了表的主键。

通常我的 M:M 设置只涉及 PK 中的 2 个字段。我会这样映射它：

```
var addressCfg = mb.Entity<Address>();
addressCfg.ToTable("Address", "Geo");
addressCfg.HasMany(a => a.People)
          .WithMany(p => p.Addresses)
          .Map(mmc =>
          {
             mmc.ToTable("Person2Address", "Person");
             mmc.MapLeftKey("AddressID");
             mmc.MapRightKey("PersonID");
          }); 
```

但我不知道如何在 PK 中配置第三个字段，或者在这种情况下 CRUD 甚至在 EF 中如何工作。

任何应该如何处理的例子都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T20:02:35.850

您不能将此映射为多对多关系。您需要*三个一对多关系*以及一个中间附加实体，该实体`Person2Address`表示具有三个键的链接表。`Person`和中的集合`Address`必须都引用此中间实体（并且还可以选择引用 中的集合`AddressType`）。

该模型将是这样的：

```
public class AddressType
{
    public int AddressTypeID { get; set; }
    public string Name { get; set; }

    // public ICollection<Person2Address> Person2Addresses { get; set; }
    // optionally you can include this collection or not
}

public class Address
{
    public int AddressID { get; set; }
    public int StateID { get; set; }

    public string Street { get; set; }
    public string City { get; set; }
    public string PostalCode { get; set; }

    public State State { get; set; }
    public ICollection<Person2Address> Person2Addresses { get; set; }
}

public class Person
{
    public int PersonID { get; set; }
    public string Name { get; set; }

    public ICollection<Person2Address> Person2Addresses { get; set; }
}

public class Person2Address
{
    public int PersonID { get; set; }
    public int AddressID { get; set; }
    public int AddressTypeID { get; set; }

    public Person Person { get; set; }
    public Address Address { get; set; }
    public AddressType AddressType { get; set; }
} 
```

以及使用 Fluent API 的映射：

```
modelBuilder.Entity<Person2Address>()
    .HasKey(p2a => new { p2a.PersonID, p2a.AddressID, p2a.AddressTypeID });

modelBuilder.Entity<Person2Address>()
    .HasRequired(p2a => p2a.Person)
    .WithMany(p => p.Person2Addresses)
    .HasForeignKey(p2a => p2a.PersonID);

modelBuilder.Entity<Person2Address>()
    .HasRequired(p2a => p2a.Address)
    .WithMany(a => a.Person2Addresses)
    .HasForeignKey(p2a => p2a.AddressID);

modelBuilder.Entity<Person2Address>()
    .HasRequired(p2a => p2a.AddressType)
    .WithMany()
    .HasForeignKey(p2a => p2a.AddressTypeID); 
```

或者`WithMany(at => at.Person2Addresses)`，如果您想将集合包含在`AddressType`.

# c# - 找不到 ASP.net ListView 控件

> ID：14214756
> 
> 赞同：2
> 
> 时间：2013-01-08T12:16:14.477
> 
> 标签：c#, asp.net

我想扩展`ListView`控制：

```
using System;
using System.Data;
using System.Collections;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.ComponentModel;
using System.Resources;
using System.ComponentModel.Design;
using System.Globalization;

namespace My.WebControls
{
  /// <summary>
  /// my ListView
  /// </summary>
  [Designer(typeof(System.Web.UI.Design.WebControls.DataBoundControlDesigner))]
  public class MyListView : ListView
  {
  }
} 
```

但是编译器看不到这个控件。我包括命名空间`system.web.ui.webcontrols`。我还需要检查什么吗？我使用框架 3.5。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T12:33:44.127

该`ListView`文档[可以在 MSDN 上找到](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.aspx)，您可以看到该控件存在于**`System.Web.Extensions.dll`**

![在此处输入图像描述](../Images/fe743450f4f9e8f87f9ddfbae4087774.png)

重新检查您的参考文献中是否有此程序集。

`MyList`这是一个工人阶级的完整命名空间

```
[System.ComponentModel.Designer(typeof(System.Web.UI.Design.WebControls.DataBoundControlDesigner))]
public class MyCustomListView : System.Web.UI.WebControls.ListView
{
    // ...
} 
```

因为[`DataBoundControlDesigner`](http://msdn.microsoft.com/en-us/library/system.web.ui.design.webcontrols.databoundcontroldesigner.aspx)我也不得不参考**`System.Design.dll`**，验证你是否也有这样的参考。

# scala - 在scala中使用Futures而不是并行集合有什么好处？

> ID：14214757
> 
> 赞同：15
> 
> 时间：2013-01-08T12:16:28.180
> 
> 标签：scala, parallel-processing, actor

在并行处理项目列表时，是否有充分的理由增加 Futures（与并行集合相比）的复杂性？

```
List(...).par.foreach(x=>longRunningAction(x)) 
```

对比

```
Future.traverse(List(...)) (x=>Future(longRunningAction(x))) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T12:22:35.983

我认为主要优点是您可以在计算出每个未来的结果后立即访问它，而您必须等待整个计算通过并行集合完成。一个缺点可能是你最终会创建很多期货。如果你后来最终调用 Future.sequence，真的没有任何优势。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-17T15:31:02.403

当我们接近处理所有项目时，并行集合将杀死一些线程。所以最后几项可能由单线程处理。有关此行为的更多详细信息，请参阅我的问题[Using ThreadPoolTask​​Support as tasksupport for parallel collections in scala](https://stackoverflow.com/questions/55703332/using-threadpooltasksupport-as-tasksupport-for-parallel-collections-in-scala)

Future 不会做这样的事情，并且在处理所有对象之前，您的所有线程都在使用中。因此，除非您的任务非常小，以至于您不关心最后几个任务的并行性损失，并且您正在使用大量线程，而这些线程必须尽快杀死，否则 Futures 会更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T23:24:46.880

一旦你想组合你的延迟/并发计算，期货就会变得有用。Futures（无论如何都是好的，比如 Akka 的）是一元的，因此允许您构建任意复杂的计算结构，并由 Futures 库正确处理所有并发和同步。

# c - 为什么此代码在释放指针时会给出运行时异常

> ID：14214761
> 
> 赞同：2
> 
> 时间：2013-01-08T12:16:35.673
> 
> 标签：c, runtime

我有简单的代码，

```
#include "stdafx.h"
#include <malloc.h>
int main()
{
  char *p = (char*) malloc(10);
  p = "Hello";

  free(p);

  return 0;
} 
```

此代码在终止时给出运行时异常。下面是最简单的错误，

* * *

## Microsoft Visual C++ 调试库

调试断言失败！

程序：...\我的文档\visual studio 2010\Projects\samC\Debug\samC.exe 文件：f:\dd\vctools\crt_bld\self_x86\crt\src\dbgheap.c 行：1322

表达式：_CrtIsValidHeapPointer(pUserData)

有关您的程序如何导致断言失败的信息，请参阅有关断言的 Visual C++ 文档。

## （按重试调试应用程序）

## 中止 重试 忽略

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T12:18:04.987

`p = "Hello";``p`指向一个字符串文字并丢弃先前分配的值。您不能`free`使用字符串文字。你不能修改它。

如果您想`p`保留该字符串，只需使用

```
char* p = "Hello"; 
```

或者

```
char p[] = "Hello"; 
```

如果你打算修改它。

两者都不需要`free`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T12:21:39.410

这就是在 malloc 分配的内存中将字符串写入 char 指针的方式。

```
strcpy(p, "Hello"); 
```

换行

```
p = "Hello"; 
```

与`strcpy`你的程序将正常工作。

你还需要

```
#include <string.h> 
```

`malloc`返回一个指向已分配内存的指针。假设地址是 95000（只是我取出的一个随机数）。

所以在 malloc - p 之后将保存地址`95000` p 包含`95000`的是内存地址，当你完成内存时需要传递给 free 。

但是，下一行将`p = "Hello";`字符串文字“Hello”（即存在于 address 处`25000`）的地址放入 p 中。

因此，当您执行时，`free(p)`您试图释放`25000`不是由 malloc 分配的。

OTOH，当 you 时`strcpy`，您将字符串“Hello”复制到从 p 开始的地址中（即`95000`）。在 strcpy 之后`p`仍然存在。`95000`

并`free(p)`释放正确的内存。

你也可以避免`malloc`和使用

```
char *p = "Hello"; 
```

但是，在此方法中，您不能修改字符串。

即，如果在此之后您`*p = 'B'`将字符串更改为`Bello`，它将成为未定义的操作。情况并非如此`malloc`。

如果相反，您使用

```
char p[] = "Hello"; 
```

或者

```
char p[10] = "Hello"; 
```

你得到一个不需要`free`d 的可修改字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T12:18:44.987

```
p = "Hello";
free(p); 
```

由于`Hello`是静态分配的，因此您不能`free`这样做。我不确定你为什么分配一些内存只是为了通过将指针更改为另一个指针来丢弃指针，但这没有任何效果。如果你这样做：

```
int i = 1;
i = 2; 
```

`i`没有记忆它曾经持有 a `1`，它`2`现在持有 a 。同样，`p`没有内存，它曾经持有指向您分配的某些内存的指针。它现在拥有一个指向不可变常量的指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T12:23:35.397

这是一个不错的。字符序列“hello”是恒定的，因此既不在堆上也不在堆栈上，而是在 .bss/.data 段中。当你这样做时，`p="hello"`你让 p 指向该段中字符串 hello 的地址，而不是你在堆上分配的内存`malloc`。当您转到`free`p 时，它会尝试释放 .bss/.data 段中的内存，并且自然会失败。

您可能想要的是`strcpy(p,"hello");`遍历“hello”中的每个字符并将其放置在 p 指向的内存中。本质上是在内存地址 p 处创建字符串“hello”的副本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T13:51:29.210

如果要将字符串“Hello”的内容复制到分配的内存中，则需要使用`strcpy`：

```
strcpy(p, "Hello"); 
```

线

```
p = "Hello"; 
```

将字符串文字“Hello”的*地址*`p`分配给指针，覆盖从返回的指针值`malloc`，因此在调用时崩溃`free`。

# jquery - 显示带有删除按钮的图像

> ID：14214762
> 
> 赞同：0
> 
> 时间：2013-01-08T12:16:42.360
> 
> 标签：jquery

我有选择文件后显示图像的代码。但是，我不知道如何删除显示图像。所以，我想在每张图片上都有一个删除按钮，这样用户就可以很容易地删除它。该怎么办？

```
<div id="list" style="width:800px;border:1pt solid black"></div>
  <script>
        var x = 0;
        var y = 0;
        function handleFileSelect(evt) {

        var files = evt.target.files; // FileList object

        // Loop through the FileList and render image files as thumbnails.
        for (var i = 0, f; f = files[i]; i++) {

        if(x > 9)
        {
            alert('Total of 10 Images are acceptable');
        }
        else
        {

          // Only process image files.
          if (!f.type.match('image.*')) {
            continue;
          }

          var reader = new FileReader();

          // Closure to capture the file information.
          reader.onload = (function(theFile) {
            return function(e) {
              // Render thumbnail.
              var span = document.createElement('span');
              span.innerHTML = ['<div id="image"><img class="thumb" src="', e.target.result,
                                '" title="', escape(theFile.name), '"/></div>'].join('');
              document.getElementById('list').insertBefore(span, null);   
            };
          })(f);

          // Read in the image file as a data URL.
          reader.readAsDataURL(f);
        }
        }
        y = i + x;
        x = 0 + y;
        i = 0;  
    }
      document.getElementById('files').addEventListener('change', handleFileSelect, false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:28:31.653

如果你想做ajax：

1.  添加 1onclick="deleteImg('img id 或其他')";1

2.  创建 JavaScript 函数`deleteImg`

    ```
    function deleteImg(par){
       // do ajax POST to delete image from db
    } 
    ```

3.  根据您可以`.hide()`对图像做出的回应

# sql - Sql Server：锁定select语句返回的所有记录

> ID：14214763
> 
> 赞同：0
> 
> 时间：2013-01-08T12:16:44.793
> 
> 标签：sql, sql-server

我有一种情况，我需要从表中选择一些记录，将这些记录的主键存储在临时表中，并对记录应用排他锁，以确保没有其他会话处理这些记录。我通过锁定提示完成此操作：

```
begin tran
insert into #temp
select pk from myTable with(xlock)
inner join otherTables, etc
(Do something with records in #temp, after which they won't be candidates for selection any more)
commit 
```

问题是更多的记录被锁定而不是必要的。我**只想**锁定实际插入临时表的记录。我最初在表上设置了一个标志以指示该记录正在使用中（而不是使用锁定提示），但这有问题，因为如果情况阻止处理一个或多个记录，数据库将处于无效状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:29:03.430

也许您正在寻找设置不同的隔离级别并使用行锁表提示？

```
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE 
```

和

```
WITH (ROWLOCK) 
```

或者也许结合 XLOCK 和 ROWLOCK 可能会成功？

文档说：

> XLOCK
> 
> 指定在事务 > 完成之前获取并保持排他锁。如果使用 ROWLOCK、PAGLOCK 或 TABLOCK 指定，则排他锁适用于 > 适当的粒度级别。

虽然我自己没有尝试过。

# css - 将容器缩小到 svg 高度

> ID：14214765
> 
> 赞同：1
> 
> 时间：2013-01-08T12:16:50.473
> 
> 标签：css, svg, webkit, height, containers

我有一个任务，用户必须单击嵌入在 svg 中的固定纵横比图像（比较可点击的图像映射）。单击右侧区域可激活链接。不知何故，我总是得到一个 100% 的窗口高度 svg，隐藏反馈文本。

在 Safari 中显示，[这个小提琴](http://jsfiddle.net/jdbDs/)显示了我的问题；在 Firefox 中，事情按预期工作。在左侧，您会看到作业（“一些文本”表示“单击圆圈”）或跨越右侧 svg 高度的说明性图像。

滚动条应该不可见，并且反馈（“更多文本”）应该出现在窗口中，因为还有足够的空间：

```
.w50{width:50%}
.w30{width:30%}

<div class="w50">
    <image /> <!-- image height is 500 px -->
    <p> image with assignment</p>
</div>
<div class="w30 left">
  <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewbox="0 0  341 455" preserveAspectRatio="xMinYMin">
    <image width="341" height="455" xlink:href="" />
    <a xlink:href="?cell1" id="a3776">
        <path d="m 127.72277,283.21783 a 9.9009905,11.386139 0 1 1 -19.80198,0 9.9009905,11.386139 0 1 1 19.80198,0 z" id="path2984" style="opacity:0.23275865;fill:#74d600;fill-opacity:0.22222224;stroke:#000000;stroke-opacity:1" />
    </a><!-- etc -->
  </svg>
</div>
<div class="w30"> <!--height is 400 px -->
    <p>feedback text</p>
</div> 
```

# jquery - JQGrid“内联”插入功能

> ID：14214768
> 
> 赞同：0
> 
> 时间：2013-01-08T12:16:53.873
> 
> 标签：jquery, backbone.js, jqgrid, insert, inline-editing

我是 JQGrid 的新手。我正在使用 Jqgrid 的内联编辑。我想要实现的功能是 1\. 在 JQGrid 中添加新行 2\. 然后按“enter”键。3\. 这应该调用 .cs 页面（服务器端代码）中的方法。问题是我尝试了 Keydown 事件，addRow 功能，但我只能**设置** editurl:"\ \functionname" 但在按下“enter”键后无法调用方法。例如当我们编辑一些数据onrow click它允许我们在按下“Enter”键后调用服务器端方法。在插入按钮上，我需要实现相同的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:54:42.130

尝试这个

键：真

阅读 wiki 以了解使用情况

[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing)

# php - 从 Android 上的浏览 器打开 iCalendar 文件（或其他文件格式）？

> ID：14214772
> 
> 赞同：3
> 
> 时间：2013-01-08T12:16:57.907
> 
> 标签：php, android, web, calendar, icalendar

我已经搜索了很多，但我找到的所有结果都涉及日历应用程序、如何将应用程序注册为 ics 文件处理程序等。

相反，我遇到的问题如下：我们的页面上有一个事件列表。我们使用 PHP 为每个事件动态创建一个 *.ics 文件，这样就可以直接导入到用户的日历软件中。这适用于 Outlook 和 iOS（PC 上的下载提示以便我可以在 Outlook 中打开，iPhone 会显示一个文件符号和名称，并给我一个“在日历中打开”选项），但是当我从 Android 设备单击链接时（ Galaxy S3)，浏览器只是将 .ics 文件显示为原始文本，而不是在日历中打开它或至少让我下载它。

有什么方法可以让浏览器打开用户日历中的文件或至少下载它，以便用户 1）看不到难看的文本和 2）可以使用他自己的某些应用程序导入文件？或者是否有我可以使用的不同文件格式或任何其他方式，以便可以实现类似的功能？

要求用户更改某些设置或使用这个或那个应用程序并不是一个真正的选项，所以如果有一种方法可以仅使用链接来触发这种行为，那就太好了。

编辑：或者，现在我考虑一下 - 是否有一种标准格式可以在所有（或至少大多数）Android设备上使用？据我所知，他们不共享任何标准的内置日历，是吗？

**更新：**我现在已经设法让它下载文件：我的标题信息中有错误（文本/x-vCalendar 而不是正确的文本/日历），PC 浏览器和 iOS 似乎没有注意到，但 Android 做到了）。然后我遇到了一些解析错误，但这似乎来自有时进入文件的空行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:45:21.577

抱歉，已经让一切正常了。这是我自己的愚蠢和Android比其他系统严格得多的混合体。

我现在已经设法让它下载文件：我的标题信息中有错误（内容类型`text/x-vCalendar`而不是正确的`text/calendar`），PC 浏览器和 iOS 似乎没有注意到，但 Android 注意到了）。然后我遇到了一些解析错误，但这似乎来自有时进入文件的空行，其他两个系统都没有抱怨，所以没有人注意到这一点。

# iphone - 使用graph api iphone sdk在facebook墙上发布图像

> ID：14214774
> 
> 赞同：0
> 
> 时间：2013-01-08T12:17:12.313
> 
> 标签：iphone, ios, facebook-graph-api

我一直在尝试使用 facebook graph API 在 facebook 上发布照片。验证用户身份后，我正在执行以下操作

```
 NSMutableDictionary *variables = [[NSMutableDictionary alloc]init];
        [variables setObject:@"some text" forKey:@"message"];
        [variables setObject:@"some link" forKey:@"link"];
        [variables setObject:[UIImage imageNamed:@"icon@2x.png"] forKey:@"picture"];

        NSString *str = @"me/feed";
        NSLog(@"str: %@", str);
        FbGraphResponse *resp = [self.fbGraph doGraphPost:str withPostVars:variables];
        NSLog(@"resp: %@", resp.htmlResponse); 
```

但是我的应用程序因抛出异常而崩溃：

```
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', 
reason: -[UIImage dataUsingEncoding:]: unrecognized selector sent to instance 0x11545140' 
```

所以有人可以帮助我如何使用图形 API 在 Facebook 墙上发布图像以及一些消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:23:21.970

使用下面给出的代码

```
NSMutableDictionary *variables = [NSMutableDictionary dictionaryWithCapacity:3];

//create a UIImage (you could use the picture album or camera too)
//UIImage *picture =selectimage.image;
UIImage *picture =[self scaleAndRotateImage:selectimage.image];

FbGraphFile *graph_file = [[FbGraphFile alloc] initWithImage:picture];

    [variables setObject:graph_file forKey:@"file"];

    [variables setObject:myPost.text forKey:@"message"];

    FbGraphResponse *fb_graph_response = [fbGraph doGraphPost:@"me/photos" withPostVars:variables]; 
```

# android - google play 徽章语言

> ID：14214778
> 
> 赞同：-1
> 
> 时间：2013-01-08T12:17:36.500
> 
> 标签：android, google-play, badge

我刚刚将我的应用上传到 Google Play，现在我想将 Google Play 徽章添加到我的网站。

但我只找到这个 [英文徽章：](http://developer.android.com/intl/es/distribute/googleplay/promote/badges.html)

它是否存在于任何其他语言中？如果没有，我可以更改文本以将其翻译成我的语言吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:34:18.033

你的意思是“Android 应用程序开启” - 文字？我看不出您有任何理由无法更改它以匹配您的语言。除非您没有声称任何 google 名称和/或徽标是您自己的，否则您没有违反任何规则

# c - 发送 udp 数据的空源端口（lwip、Cortex M3、Stellaris LM3S6965 评估板）

> ID：14214782
> 
> 赞同：1
> 
> 时间：2013-01-08T12:17:41.983
> 
> 标签：c, sockets, udp, port, lwip

我正在使用 Cortex M3、Stellaris® LM3S6965 评估板。我正在向我的电脑发送一个 UDP 数据包。那行得通，因为我用wireshark检查了它。但我看到的是我没有源端口。我不知道如何解决这个问题。

我调用这个函数来发送一个 udp 数据包

```
void send_udp(){
    RIT128x96x4Enable(1000000);
    RIT128x96x4StringDraw("UDP data verzonden..", 0, 40, 15);

    struct ip_addr  serverIp;
    IP4_ADDR(&serverIp,192,168,1,100);

    u16_t port;
    port = 64000;
    struct udp_pcb * pcb;
    pcb = udp_new();

    udp_bind(pcb, &serverIp, port);
    udp_recv(pcb, udp_echo_recv, NULL);
    struct pbuf *p;
    char msg[]="request";

    //Allocate packet buffer
    p = pbuf_alloc(PBUF_TRANSPORT,sizeof(msg),PBUF_RAM);
    memcpy (p->payload, msg, sizeof(msg));
    udp_sendto(pcb, p, &serverIp, port);
    pbuf_free(p); //De-allocate packet buffer
} 
```

Wireshark 数据包示例：（[点此放大）](https://i.stack.imgur.com/q1Rk6.png) ![这里](../Images/12b43e843bc0b2c660f6e2a7d6a05275.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:24:08.997

调用`[udp_bind()](http://www.ecoscentric.com/ecospro/doc/html/ref/lwip-api-raw-udp-bind.html)`应该分配本地端口，但它似乎对你来说失败了。

您使用的数字 (64000) 在称为[动态、私有或临时端口](http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers#Dynamic.2C_private_or_ephemeral_ports)的范围内，这可能是它无法按预期工作的原因。

从文档看，`udp_bind()`支持端口号0获取动态分配的号码；如果源端口不重要，这通常是要走的路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:39:22.570

我还看到 ipv4 pcb 中的“生存时间”为 0。所以我添加了这一行，

```
pcb->ttl = UDP_TTL; // Time to live 
```

这解决了我的问题

# dokuwiki - 如何使 dokuwiki 显示为 PC 模式而不是移动模式？

> ID：14214787
> 
> 赞同：0
> 
> 时间：2013-01-08T12:17:57.933
> 
> 标签：dokuwiki

我已经安装`dokuwiki`到我的服务器上。
当我使用 Android 或 iPhone 访问它时，它会以移动模式显示。
但我想将其显示为 PC 模式。
我怎样才能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T20:44:06.717

你用的是哪个模板？

如果它是默认的“ dokuwiki ”模板，只需`css/mobile.css`从.`style.ini``./lib/tpl/dokuwiki/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:50:06.680

Dokuwiki 的 API 让我们确定客户端[是否是移动](https://github.com/splitbrain/dokuwiki/blob/master/inc/common.php#L663)的。然后由模板决定是否使用这些信息。

您可以尝试`grep -rn ismobile .`使用您的模板代码，看看它是如何使用的。

理想情况下，我会添加评论以询问您使用哪个模板，但恐怕我还没有足够的声誉来发表评论。

# c++ - 检索 boost 侵入式列表钩子的原始指针

> ID：14214792
> 
> 赞同：1
> 
> 时间：2013-01-08T12:18:11.517
> 
> 标签：c++, boost

我有一个`CNode`继承 boost 的类，`list_base_hook`以便我可以在 boost 侵入列表中使用它。

```
class CNode
   //Base hook with default tag, raw pointers and safe_link mode
   :public list_base_hook<>
{
   // Suppose the linked pointers inherited from list_base_hook
   // are "m_prev", "m_next".
}; 
```

当节点从列表中弹出时，它将被推入另一个 FIFO。该 FIFO 计划重用`m_prev`,`m_next`将节点链接在一起，同时实现单读取器-单写入器线程安全语义。

在我的 FIFO 中：

```
class CFIFO
{
public:
  void push_back(CNode *node)
  {
     // Is there any way to update the "m_next"/"m_prev" fields?
     // SetNextLink is faked here..
     m_tail->SetNextLink(node);
     ..
  }
}; 
```

有没有办法得到`m_prev`,的`m_next`领域`CNode`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:23:35.910

您可以使用[iterator_to](http://www.boost.org/doc/libs/1_40_0/doc/html/intrusive/obtaining_iterators_from_values.html)从 const 引用转到迭代器。然后，您可以递减或递增迭代器。您实际上可以使用`s_iterator_to`双向链接的侵入式列表。

**更新**：哦，你不想“得到”它们，你想改变它们。在这种情况下，您必须像实现其他侵入式容器一样实现自己的侵入式容器。就个人而言，我只是在内部使用侵入性列表。使双向链表像 FIFO 一样工作基本上是微不足道的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T04:38:04.460

链接字段`prev_`和`next_`继承自`list_base_hook`，我可以直接访问它们，因为它们在基础中是公共的。

```
class MyNode: public list_base_hook<>
{
   //..
};

list<MyNode> myList;
for (list<MyNode>::iterator it = myList.begin(); it != myList.end(); ++it)
{
   // The type of the pointer is list<MyNode>::node_ptr
   cout << it->prev_ << it->next_ << endl;
} 
```

# facebook - Facebook 点赞按钮在文章页面上显示主要域，例如计数

> ID：14214801
> 
> 赞同：0
> 
> 时间：2013-01-08T12:18:52.920
> 
> 标签：facebook, facebook-like

Facebook Like Buttons 遇到了一个奇怪的问题。**在某些情况下在文章页面**上实现它之后，但大多数情况下，它会显示**主页**的点赞数。

**文章页面示例：** [http ://www.men.hu/a-legnepszerubb-gyogyteak/eletmod/gasztro/225](http://www.men.hu/a-legnepszerubb-gyogyteak/eletmod/gasztro/225)

这篇文章应该有 0 到 5 个赞，而不是 200+。主 URL 有 200 多个赞。用 Facebook 的**Linter**工具解析后，效果很好！显示 0 个赞，Facebook 赞按钮也开始在文章页面上工作。似乎它清除了某种缓存，或重新解析 URL 并更正其数据。

调试已解析的 Facebook 按钮，`data-href`标签似乎是正确的，显示当前页面 URL，而不是主页。

问题可能出在哪里，我该如何解决？欢迎任何想法，因为我觉得我已经尝试了一切......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:01:01.507

我在某些页面上遇到了这个问题，结果发现这些页面已经发布，然后有人禁用了它们，后来又重新激活了它们。当页面被禁用时，Facebook 检查页面（他们说他们每 24 小时检查一次页面以确保页面标题和其他详细信息是最新的）并重定向到主页，因此使用该页面的“喜欢”计数. 然而，Facebook 缓存了重定向，因此再也没有发现该页面已重新启用。正如您已经完成的那样，我们通过使用 Facebook 调试器手动重新检查页面来解决问题。您的页面现在似乎确实有正确的点赞数 (3)，所以看起来您现在可能已经解决了这个问题。

# zope - Zope 2：如何正确地“浏览器：页面”以使页面随处可用？

> ID：14214808
> 
> 赞同：0
> 
> 时间：2013-01-08T12:19:15.283
> 
> 标签：zope

假设我有一个包含以下类的示例应用程序：

```
##
## impelementation/SampleApp.py
##
class SampleApp: # inherits from required classes
    """ """
    implements(ISampleApp)
    # ...
    index_html = PageTemplateFile('templates/index.pt')

##
## implementation/SampleAppUser.py
##
class SampleAppUser: # inherits from required classes
    """ """
    implements(ISampleAppUser)
    # ...
    index_html = PageTemplateFile('templates/user_index.pt')

manage_addSampleAppUserForm = PageTemplateFile('manage_addSampleUserUserForm.pt') 
```

现在我希望能够从应用程序中的**任何位置**`manage_addSampleUserUserForm.pt`链接到登录表单 ( ) ，包括其索引页 ( )。**`index.pt`**

 **我尝试了以下方法，但它不起作用：

`index.pt`：

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns="http://xml.zope.org/namespaces/tal">
  <head><title>SampleApp</title></head>
  <body>
     <h2>Title</h2><hr/>
     <a href="#" title="Sign In"
         tal:attributes="href here/signin.html">Sign In</a>
  </body>
</html> 
```

`configure.zcml`：

```
<configure
    xmlns="http://namespaces.zope.org/zope"
    xmlns:five="http://namespaces.zope.org/five"
       xmlns:browser="http://namespaces.zope.org/browser">

  <five:registerPackage package="." initialize=".initialize" />

  <browser:page
          name="signin.html"
          class="bahmanm.sampleapp.implementation.SampleAppUser.SampleAppUser"
          template="templates/manage_addSampleUserForm.pt"
          permission="zope.Public"
  />

</configure> 
```

在实例启动期间，Zope 抱怨：

```
ZopeXMLConfigurationError: File "/home/bahman/sampleapp/sampleapp.devistan/src/bahmanm/sampleapp/configure.zcml", line 10.2-15.5
    TypeError: page() takes at least 4 arguments (5 given) 
```

我也尝试添加`for="*"`，但 Zope 在导航到应用程序索引页面时弹出以下错误：

```
2013-01-08 15:43:26 ERROR Zope.SiteErrorLog 1357647206.080.27220840385 http://localhost:8080/sampleapp/index_html
Traceback (innermost last):
  Module ZPublisher.Publish, line 126, in publish
  Module ZPublisher.mapply, line 77, in mapply
  Module ZPublisher.Publish, line 46, in call_object
  Module Shared.DC.Scripts.Bindings, line 322, in __call__
  Module Shared.DC.Scripts.Bindings, line 359, in _bindAndExec
  Module Products.PageTemplates.PageTemplateFile, line 130, in _exec
  Module Products.PageTemplates.PageTemplate, line 79, in pt_render
  Module zope.pagetemplate.pagetemplate, line 113, in pt_render
  Module zope.tal.talinterpreter, line 271, in __call__
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 405, in do_startTag
  Module zope.tal.talinterpreter, line 482, in attrAction_tal
  Module Products.PageTemplates.Expressions, line 225, in evaluateText
  Module zope.tales.tales, line 696, in evaluate
   - URL: index_html
   - Line 7, Column 3
   - Expression: <PathExpr standard:'here/signin.html'>
   - Names:
      {'container': <SampleApp at /sampleapp>,
       'context': <SampleApp at /sampleapp>,
       'default': <object object at 0x7fa1499cf4c0>,
       'here': <SampleApp at /sampleapp>,
       'loop': {},
       'nothing': None,
       'options': {'args': ()},
       'repeat': <Products.PageTemplates.Expressions.SafeMapping object at 0x7fa134030ba8>,
       'request': <HTTPRequest, URL=http://localhost:8080/sampleapp/index_html>,
       'root': <Application at >,
       'template': <PageTemplateFile at /sampleapp/index>,
       'user': <User 'admin'>}
  Module zope.tales.expressions, line 217, in __call__
  Module Products.PageTemplates.Expressions, line 147, in _eval
  Module zope.tales.expressions, line 124, in _eval
  Module Products.PageTemplates.Expressions, line 74, in boboAwareZopeTraverse
  Module OFS.Traversable, line 317, in restrictedTraverse
  Module OFS.Traversable, line 275, in unrestrictedTraverse
   - __traceback_info__: ([], 'signin.html')
  Module zope.component._api, line 120, in queryMultiAdapter
  Module zope.component.registry, line 238, in queryMultiAdapter
  Module zope.interface.adapter, line 532, in queryMultiAdapter
TypeError: __init__() takes at most 2 arguments (3 given) 
```

我究竟做错了什么？老实说，我相信我做错了很多事情 :-) 因为我只是盲目地阅读[Zope 3 apidoc](http://apidoc.zope.org/++apidoc++/ZCML/http_co__sl__sl_namespaces.zope.org_sl_browser/page/index.html)和阅读其他产品的代码（如 SilvaForum）。

我真的很感激任何提示/帮助。TIA,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:40:58.103

浏览器页面完全是独立的组件。它们不是目标内容类型的一部分，而是完全独立的组件。

如果您只需要一个模板（没有视图），只需完全省略 class 指令：

```
<browser:page
    name="signin.html"
    for="*"
    template="templates/manage_addSampleUserForm.pt"
    permission="zope.Public"
    /> 
```

无需为此`PageTemplateFile`手动创建实例。

目前尚不清楚您想对模板中的链接做什么。``here/signin.html"`看起来不像是一个有效的 TALES 表达式。在普通的 Zope 中，没有简单的工具可以生成相对于站点根目录的绝对 URL。也许您只是想要`/signin.html`而不使用 TAL 表达式？**

# sql-server-2008 - 错误：操作数数据类型 varchar 对于 sqlServer 中的减法运算符无效

> ID：14214809
> 
> 赞同：-2
> 
> 时间：2013-01-08T12:19:21.053
> 
> 标签：sql-server-2008

下面是我的查询，我在其中尝试组合多个列值

```
SELECT DISTINCT  CONVERT(varchar, Em.ADDR1) - CONVERT(varchar, Em.ADDR2) - CONVERT(varchar, Em.ADDR3) - CONVERT(varchar, Dm.DIST_NAME) - CONVERT(varchar,Sm.STATE_NAME)
- CONVERT(varchar, Cm.COUNTRY_NAME) AS Expr1
FROM            EMP_MST AS Em INNER JOIN
  DESIG_MST AS Dsgm ON Em.DESIG_NO = Dsgm.DESIG_NO AND Dsgm.COMPANY_NO = Em.COMPANY_NO INNER JOIN
  DEPT_MST AS Dptm ON Em.DEPT_NO = Dptm.DEPT_NO AND Dptm.COMPANY_NO = Em.COMPANY_NO INNER JOIN
  COUNTRY_MST AS Cm ON Em.COUNTRY_NO = Cm.COUNTRY_NO INNER JOIN
  STATE_MST AS Sm ON Em.STATE_NO = Sm.STATE_NO AND Em.COUNTRY_NO = Sm.COUNTRY_NO INNER JOIN
  DIST_MST AS Dm ON Em.DIST_NO = Dm.DIST_NO AND Em.STATE_NO = Dm.STATE_NO AND Em.COUNTRY_NO = Dm.COUNTRY_NO LEFT OUTER JOIN
  EMP_MST AS MEm ON Em.MANAGER = MEm.EMP_NO
WHERE        (1 = 1) AND (Em.EMP_NO LIKE '%%') AND (Em.COMPANY_NO = 1) 
```

当我执行 Query 时，我得到

错误：

> 操作数数据类型 varchar 对 sqlServer 中的减法运算符无效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:20:29.760

正如人们所说，要遵循确切的查询有点困难，但具体问题，如错误所述，是您在列上使用`-`运算符。`varchar`

如果您尝试连接`varchar`值，则应该使用`+`运算符，例如：

```
SELECT DISTINCT  CONVERT(varchar, Em.ADDR1) + CONVERT(varchar, Em.ADDR2) + CONVERT(varchar, Em.ADDR3) + CONVERT(varchar, Dm.DIST_NAME) + CONVERT(varchar,Sm.STATE_NAME)
+ CONVERT(varchar, Cm.COUNTRY_NAME) AS Expr1 
```

如果这些列都`varchar`已经存在，那么您可能也不需要这些`CONVERT`功能。

# android - 带有自定义适配器的Android自定义列表视图不清楚

> ID：14214815
> 
> 赞同：0
> 
> 时间：2013-01-08T12:19:39.643
> 
> 标签：android, android-arrayadapter

我想要一个带有自定义数组适配器的自定义列表视图。我找到了这篇博文，但 customadapter.java 不清楚。我可以用默认的 simple_list_1 来做这件事。

这是博客文章[http://sogacity.com/how-to-make-a-custom-arrayadapter-for-listview/](http://sogacity.com/how-to-make-a-custom-arrayadapter-for-listview/)

如何调用构造函数。如何调用静态类。完全，我无法理解程序的流程。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:24:16.033

getview() 方法将为您将添加的每个列表自动调用。

[在这里](http://sudarmuthu.com/blog/using-arrayadapter-and-listview-in-android-applications)查看有关阵列适配器的更多说明。希望它会有所帮助。

# build - 在 Dojo 构建中包含依赖项

> ID：14214817
> 
> 赞同：1
> 
> 时间：2013-01-08T12:19:49.657
> 
> 标签：build, dojo

尽管使用了 Dojo 构建系统，但我的应用程序仍然包含大量我希望构建覆盖的 javascript 文件。

这是我的构建配置文件：

```
var profile = (function(){
    return {
        basePath: "./",
        releaseDir: "release",
        action: "release",
        selectorEngine: "acme",
        cssOptimize: "comments.keepLines",

        packages:[{
            name: "dojo",
            location: "dojo"
        },{
            name: "dijit",
            location: "dijit"
        },{
            name: "dojox",
            location: "dojox"
        },{
            name: "my",
            location: "my"
        }],

        layers: {
            "my/admin": {
                include: ['dojo/ready', 'dojo/dom', 'dojo/query', 'dojo/request/xhr', 'my/Form', 'my/Tree/Radio']
            }
        }
    };
})(); 
```

该应用程序仍然在每个请求中包含以下 JS 文件：（`my/Form.js`即使这已在配置文件中列出）, `dojo/fx/Toggler.js`, `dijit/_base.js`, `dijit/WidgetSet.js`, `dijit/_base/focus.js`, `dijit/_base/place.js`, `dijit/place.js`, `dijit/_base/popup.js`, `dijit/popup.js`, `dijit/BackgroundIframe.js`, `dijit/_base/scroll.js`, `dijit/_base/sniff.js`, `dijit/_base/typematic.js`, `dijit/typematic.js`, `dijit/_base/wai.js`, `dijit/_base/window.js`.

`my/Tree/Radio`extends `dijit/Tree`，所以我假设上面的很多文件都是由`dijit.Tree`. 但是构建工具肯定应该解决这样的依赖关系并将它们包含在“构建”文件中吗？

我正在使用 Dojo 1.8.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:24:32.620

在`dojo/fx`中，它会动态查找带有注释的 Toggler

```
use indirection so modules not rolled into a build 
```

不知道为什么，但如果你添加`dojo/fx/Toggler`到`include`你的构建脚本中，它不应该发出额外的 xhr 请求。

编辑：显然`dijit/Widget`与 做类似的事情`dijit/_base`，因此您也需要将其添加到包含中。

[http://trac.dojotoolkit.org/ticket/14262](http://trac.dojotoolkit.org/ticket/14262)

# git - 没有“--prune”选项

> ID：14214822
> 
> 赞同：0
> 
> 时间：2013-01-08T12:20:08.473
> 
> 标签：git, github

我想删除**本地存储库**中不存在的所有**远程分支**。

 **我试过命令：

```
git push --prune origin 
```

但我的 git 抱怨以下错误：

```
error: unknown option `prune'
usage: git push [<options>] [<repository> [<refspec>...]]

    -v, --verbose         be more verbose
    -q, --quiet           be more quiet
    --repo <repository>   repository
    --all                 push all refs
    --mirror              mirror all refs
    --delete              delete refs
    --tags                push tags (can't be used with --all or --mirror)
    -n, --dry-run         dry run
    --porcelain           machine-readable output
    -f, --force           force updates
    --thin                use thin pack
    --receive-pack <receive-pack>
                          receive pack program
    --exec <receive-pack>
                          receive pack program
    -u, --set-upstream    set upstream for git pull/status
    --progress            force progress reporting 
```

为什么我的 git 没有`--prune`选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:22:52.647

该`--prune`选项在 1.7.10 版本中被引入 git。您可能只是安装了旧版本。

作为参考，将[1.7.9](http://kernel.org/pub/software/scm/git/docs/v1.7.9/git-push.html)的文档与[1.7.10](http://kernel.org/pub/software/scm/git/docs/v1.7.10/git-push.html)的文档进行比较。**

# image - wpf CroppedBitmap 将图像裁剪为双精度像素值

> ID：14214827
> 
> 赞同：0
> 
> 时间：2013-01-08T12:20:22.930
> 
> 标签：image, crop

我在 WPF 中使用 CroppedBitmap 方法裁剪图像。必需的输入参数是 int32Rect。但是，我的图像高度和宽度值是双倍（像素）。因此，如果不将 Double 截断为 Int，我想通过使用 double 值（像素）来裁剪图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:37:19.693

您需要使用**PixelWidth**和**PixelHeight**属性，如果看不到它们（*Intellisense*找不到它们），您可以使用**as**运算符将其转换为**BitmapSource**。例如：

```
BitmapSource src = yourImage as BitmapSource;
CroppedBitmap chunk = new CroppedBitmap(src, new Int32Rect(src.PixelWidth / 4, src.PixelHeight / 4, src.PixelWidth / 2, src.PixelHeight / 2)); 
```

顺便说一句，如果无法执行转换， **as**运算符将返回**null**`src` （因此您可能需要检查上述示例中的转换是否不在`null`，除非您确定它`yourImage`是从*BitmapSource*派生的）。

* * *

**编辑 ：**

我不确定这是否是您需要的，但这是一个接受**Rect**（浮点值）作为输入并返回*CroppedBitmap*的方法：

```
 public static CroppedBitmap GetCroppedBitmap(BitmapSource src, Rect r)
    {
        double factorX, factorY;

        factorX = src.PixelWidth / src.Width;
        factorY = src.PixelHeight / src.Height;
        return new CroppedBitmap(src, new Int32Rect((int)Math.Round(r.X * factorX), (int)Math.Round(r.Y * factorY), (int)Math.Round(r.Width * factorX), (int)Math.Round(r.Height * factorY)));
    } 
```

例子：

```
 BitmapImage bmp = new BitmapImage(new Uri(@"c:\Users\Public\Pictures\Sample Pictures\Koala.jpg", UriKind.Relative));
    CroppedBitmap chunk = GetCroppedBitmap(bmp, new Rect(bmp.Width / 4, bmp.Height / 4, bmp.Width / 2, bmp.Height / 2));
    JpegBitmapEncoder jpg = new JpegBitmapEncoder();
    jpg.Frames.Add(BitmapFrame.Create(chunk));
    FileStream fp = new FileStream("chunk.jpg", FileMode.Create, FileAccess.Write);
    jpg.Save(fp);
    fp.Close(); 
```

# c# - c#字符串中的换行符

> ID：14214828
> 
> 赞同：5
> 
> 时间：2013-01-08T12:20:28.133
> 
> 标签：c#, string, newline

我在 C# 字符串中有一些 html 代码。如果我使用 Visual Studio 的文本可视化器查看，我可以看到其中有许多换行符。但是，在我应用此代码之后

```
string modifiedString = originalString.Replace(Environment.NewLine, "<br />"); 
```

然后我在 modifiedString 处使用文本可视化器查看，我可以看到它除了 3 个位置之外没有任何换行符。除了类似于换行符之外还有其他字符类型而我失踪了吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-08T12:29:12.167

他们可能只是一个`\r`或一个`\n`。我刚刚检查过，VS 2010 中的文本可视化器显示为换行符和`\r\n`.

这个字符串

```
string test = "blah\r\nblah\rblah\nblah"; 
```

显示为

```
blah
blah
blah
blah 
```

在文本可视化器中。

所以你可以试试

```
string modifiedString = originalString
    .Replace(Environment.NewLine, "<br />")
    .Replace("\r", "<br />")
    .Replace("\n", "<br />"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-10T23:42:46.843

处理这个问题的一个好方法是使用正则表达式。

```
string modifiedString = Regex.Replace(originalString, @"(\r\n)|\n|\r", "<br/>"); 
```

这将用 html 标记替换 3 种合法类型的换行符中的任何一种。

# liferay - 在 Liferay 中禁用我的公共页面功能

> ID：14214830
> 
> 赞同：2
> 
> 时间：2013-01-08T12:20:41.130
> 
> 标签：liferay, liferay-6

我正在使用 Liferay 6.1.1 CE。

如何禁用用户的“我的公共页面”和“我的私人页面”的添加、管理和编辑控件（Dockbar）？

请给我一些想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:56:17.250

[http://vir-liferay.blogspot.in/2012/05/how-to-configure-dockbar-based-on-roles.html](http://vir-liferay.blogspot.in/2012/05/how-to-configure-dockbar-based-on-roles.html)

这对我有用....我修好了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T04:56:55.540

试试这个东西。**在你的portal-ext.properties**中写下这段代码

 **```
layout.user.public.layouts.enabled=false
layout.user.public.layouts.modifiable=false
layout.user.public.layouts.auto.create=false 
```

同样，您也找到了其他选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-11T17:21:47.737

我有同样的问题，我寻找禁用对公共和私人页面的访问。解决方案是在您的 portal-ext.properties 中添加这些行：

要禁用对私人页面的访问：

```
layout.user.private.layouts.enabled=false
layout.user.private.layouts.modifiable=false
layout.user.private.layouts.auto.create=false 
```

禁用公共页面：

```
layout.user.public.layouts.enabled=false
layout.user.public.layouts.modifiable=false
layout.user.public.layouts.auto.create=false 
```

PS：这也禁用了对默认 portlet（目录用户列表） [http://yoursite/web/yourusername/home的访问](http://yoursite/web/yourusername/home)

[http://yoursite/user/yourusername/home](http://yoursite/user/yourusername/home)**

# javascript - 无法检查 for 循环内的复选框

> ID：14214833
> 
> 赞同：0
> 
> 时间：2013-01-08T12:20:54.163
> 
> 标签：javascript, html

1.  我正在尝试检查 for 循环内的复选框，代码
    `<div id="div_filterctrl_<?php echo $row['id'];?>"
    class="jfmfs-friend gmail" onclick="javascript: togglediv(this,'filterctrl_<?php echo $row['id'];?>');"> <span class="ggl-icn"></span> <img alt="User Picture" class="pro-pic" src="<?php echo $imageurl;?>" border="0" height="40" width="50">
    <div class="friend-name"> <?php echo $name;?> </div> <span style="display: none;"> <input name="allcontact[]" id="filterctrl_<?php echo $row['id'];?>" class="email_invited" value="<?php echo $row['id'];?>" type="checkbox" /> </span> </div>`

2.  现在我正在使用我的 javascript 来检查复选框，我的代码是，

    ```
     function selectall()    {
          <?php     
       foreach ($this->arrcontacts as $res)     
       {     ?>
          document.getElementById("filterctrl_<?php echo $res['id'];?>").checked = true;               <?          }    ?>   } 
    ```

    但这并不是所有的工作。任何人都可以告诉我 wat 是错的。

# php - 使用 $match 使用 PHP MongoDB 聚合框架按日期过滤

> ID：14214835
> 
> 赞同：2
> 
> 时间：2013-01-08T12:21:09.780
> 
> 标签：php, mongodb, date, aggregation-framework

我一直在尝试使用带有聚合框架的 PHP MongoDB 驱动程序来过滤几个日期，然后再通过管道传输到 $group 中，但是匹配并没有对日期进行任何过滤，但是在过滤字符串和整数时它可以完美地工作.

这是我的管道数组和代码：

> ```
>  $date = new DateTime();
>     $date->sub(new DateInterval('PT' . $hours . 'H'));
>     $mdate = new MongoDate($date->getTimestamp());
>     $ops = array(
>         array('$match') => array(
>             'whenField' => array(
>                 '$gt' => $mdate
>             )
>         )
>     ); 
> ```
> 
> $results = $this->collection->aggregate($ops);

这应该返回我的集合中过去 3 小时内“whenField”所在的所有文档，但它会返回我集合中的每个文档。然后我可以将“$gt”切换为“$lt”，它还返回集合中的每个文档。我已经将这个完全相同的匹配数组作为过滤器使用`find($filter)`并正确过滤。日期比较是否与聚合框架 $match 不兼容，还是我犯了某种错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T13:38:08.620

这里`$ops`是错误的，请尝试：

```
$ops = array(
    array('$match' => array(
        'whenField' => array(
            '$gt' => $mdate
        )
    )
); 
```

反而

# php - 使用 CodeKit 和 haml/PHP

> ID：14214836
> 
> 赞同：2
> 
> 时间：2013-01-08T12:21:10.643
> 
> 标签：php, haml

在我最新的项目中，我使用了 Rails。现在我必须在 PHP 中做一些事情（我实际上讨厌或喜欢太多 Ruby 语法）。

所以现在我非常习惯使用 Sass 和 haml，我也很喜欢。所以我买了[CodeKit](http://incident57.com/codekit/)来做 Rails 框架之外的事情。

只想知道是否有在 PHP 文件中使用 haml 或在 haml 文件中使用 PHP 的任何选项，并且该文件使用 CodeKit 编译，甚至具有 PHP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-07T08:25:24.543

我知道这是一个很晚的回复，只是在搜索自己时发现了这个问题。

**除了上面凯文的回复：**

您可以通过简单地设置该特定文件的输出路径，然后指定扩展名来自动将 html 转换为 php。

1.  右键单击您的 HAML 或 HTML
2.  “设置输出路径……”
3.  “输出文件名和扩展名”

将其从`index.html`或更改`index.haml`为`index.php`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T03:12:45.493

您可以使用`:plain`过滤器来保留 php，它不会解析过滤后的文本。当您需要保留多行 php.ini 时，这很有用。

前任：

```
:plain
  <?php foreach ($es as $e) {
    echo $e;
  } ?> 
```

我还没有听说过 Sublime Text 2 的任何 haml/php 颜色语法。

还有另一个设置对使用 php 很有用：检查 Codekit 上 HAML 配置中的不要转义 HTML 字符：http: [//d.pr/i/4pmv](http://d.pr/i/4pmv)

这将解决这个问题

```
%form#booking_log{:name => "booking_log", :method => "post", :action => "<?=$this->action('bookingGetLog')?>"} 
```

# java - 传递 TextView 值时出错

> ID：14214838
> 
> 赞同：0
> 
> 时间：2013-01-08T12:21:13.187
> 
> 标签：java, android, textview

几天前我问了这个问题，但我刚刚意识到我包含了错误的 logcat 错误，现在包含了正确的 logcat ...

我正在编写一个允许用户输入值的应用程序，它们将用于在图表上绘图。在过去的几天里，我一直被困在一个特定的问题上，似乎无法克服它。用户将输入 2 个值，并从这 3 个值中计算并传递给内部类以绘制在图表上。这些值是 TextView 形式的。我知道大多数代码在我一直在测试它时都可以正常工作，而且我很确定该错误与 TextView 值有关。下面是用于计算和绘制图表的代码。

```
package com.example.ballanimation;

import java.math.BigDecimal;

import android.app.Activity;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.RectF;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class calculations extends Activity {

EditText firstVal, secondVal;
TextView resultA, resultB, resultC;
Button button3;
BigDecimal firstNum, secNum;

@Override
protected void onCreate(Bundle savedInstanceState) {
// TODO Auto-generated method stub
super.onCreate(savedInstanceState);
setContentView(R.layout.calculations_page);

button3 = (Button) findViewById(R.id.button3);

firstVal = (EditText) findViewById(R.id.editTXT1);
secondVal = (EditText) findViewById(R.id.editTXT2);

resultA = (TextView) findViewById(R.id.result1);
resultB = (TextView) findViewById(R.id.result2);
resultC = (TextView) findViewById(R.id.result3);

button3.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub
        firstNum = new BigDecimal(firstVal.getText().toString());
        secNum = new BigDecimal(secondVal.getText().toString());
        resultA.setText(firstNum.add(secNum).toString());
        resultB.setText(firstNum.subtract(secNum).toString());
        resultC.setText(firstNum.multiply(secNum).toString());

    }
});

}

class TestA1 extends View{

public TestA1(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
}

public void onDraw(Canvas canvas){
    super.onDraw(canvas);

    String TestA = resultA.getText().toString();
    String TestB = resultB.getText().toString();
    String TestC = resultC.getText().toString();

    int A = Integer.parseInt(TestA);
    int B = Integer.parseInt(TestB);
    int C = Integer.parseInt(TestC);

    Paint red = new Paint();
    red.setColor(Color.RED);
    red.setStyle(Paint.Style.STROKE);

    Paint black = new Paint();
    black.setColor(Color.BLACK);
    black.setStyle(Paint.Style.STROKE);

    canvas.drawCircle(A, B, C, black);
    canvas.drawCircle(canvas.getWidth()*1/2, canvas.getHeight()*3/8,    canvas.getWidth()*475/1000, black);
    canvas.drawCircle(canvas.getWidth()*5/8, canvas.getWidth()*5/8, canvas.getWidth()*349/1000, black);
    canvas.drawCircle(canvas.getWidth()*6/8, canvas.getWidth()*5/8, canvas.getWidth()*228/1000, black);
    canvas.drawCircle(canvas.getWidth()*7/8, canvas.getWidth()*5/8, canvas.getWidth()*103/1000, black);

    canvas.drawLine((canvas.getWidth()-canvas.getWidth()) + 10, (canvas.getHeight()*3)/8, canvas.getWidth() - 10, (canvas.getHeight()*3)/8, black);

    float a, b, c, d, e, f, g, h, i, j, k, l;

    a = 90;   //degrees
    b = 90;
    c = 90;
    d = 50;
    e = 90;
    f = 134;
    g = -90;
    h = -90;
    i = -90;
    j = -50;
    k = -90;
    l = -134;

    RectF arc0 = new RectF();
    RectF arc1 = new RectF();
    RectF arc2 = new RectF();
    RectF arc3 = new RectF();
    RectF arc4 = new RectF();
    RectF arc5 = new RectF();

    /*left  The X coordinate of the left side of the rectangle 
    top  The Y coordinate of the top of the rectangle 
    right  The X coordinate of the right side of the rectangle 
    bottom  The Y coordinate of the bottom of the rectangle  */

    arc0.set(canvas.getWidth()*1/2, canvas.getHeight()*-139/700, canvas.getWidth()*100/69, canvas.getHeight()*3/8); 
    arc1.set(canvas.getWidth()*-6/112, canvas.getHeight()*-80/100, canvas.getWidth()*195/100, canvas.getHeight()*72/192);   
    arc2.set(canvas.getWidth()*7/10, canvas.getHeight()*70/700, canvas.getWidth()*125/100, canvas.getHeight()*3/8); 
    arc3.set(canvas.getWidth()/2, canvas.getHeight()*3/8, canvas.getWidth()*100/69, canvas.getHeight()*91/96);
    arc4.set(canvas.getWidth()*-8/112, canvas.getHeight()*3/8, canvas.getWidth()*195/100, canvas.getHeight()*150/100);
    arc5.set(canvas.getWidth()*7/10, canvas.getHeight()*3/8, canvas.getWidth()*125/100, canvas.getHeight()*65/100);

    /*oval  The bounds of oval used to define the shape and size of the arc 
    startAngle  Starting angle (in degrees) where the arc begins 
    sweepAngle  Sweep angle (in degrees) measured clockwise 
    useCenter  If true, include the center of the oval in the arc, and close it if it is being stroked. This will draw a wedge 
    paint  The paint used to draw the arc  */

    canvas.drawArc(arc0, a, b, false, red);
    canvas.drawArc(arc1, c, d, false, red);
    canvas.drawArc(arc2, e, f, false, red);
    canvas.drawArc(arc3, g, h, false, red);
    canvas.drawArc(arc4, i, j, false, red);
    canvas.drawArc(arc5, k, l, false, red);

}
}
} 
```

我得到的 Logcat 错误是：

```
01-08 11:54:05.436: D/dalvikvm(714): GC_FOR_ALLOC freed 42K, 3% free 8053K/8259K, paused 66ms, total 69ms
01-08 11:54:05.436: I/dalvikvm-heap(714): Grow heap (frag case) to 8.305MB for 412064-byte allocation
01-08 11:54:05.596: D/dalvikvm(714): GC_FOR_ALLOC freed 1K, 3% free 8455K/8711K, paused 55ms, total 55ms
01-08 11:54:05.647: D/dalvikvm(714): GC_FOR_ALLOC freed 0K, 3% free 8455K/8711K, paused 48ms, total 48ms
01-08 11:54:05.666: I/dalvikvm-heap(714): Grow heap (frag case) to 9.189MB for 928216-byte allocation
01-08 11:54:05.836: D/dalvikvm(714): GC_CONCURRENT freed 0K, 4% free 9361K/9671K, paused 98ms+9ms, total 173ms
01-08 11:54:05.836: D/dalvikvm(714): WAIT_FOR_CONCURRENT_GC blocked 3ms
01-08 11:54:06.186: D/gralloc_goldfish(714): Emulator without GPU emulation detected.
01-08 11:54:07.856: I/Choreographer(714): Skipped 79 frames!  The application may be doing too much work on its main thread.
01-08 11:54:25.786: D/AndroidRuntime(714): Shutting down VM
01-08 11:54:25.816: W/dalvikvm(714): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
01-08 11:54:25.866: E/AndroidRuntime(714): FATAL EXCEPTION: main
01-08 11:54:25.866: E/AndroidRuntime(714): java.lang.NullPointerException
01-08 11:54:25.866: E/AndroidRuntime(714):  at com.example.ballanimation.calculations$TestA1.onDraw(calculations.java:83)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.view.View.draw(View.java:13458)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.view.View.draw(View.java:13342)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.view.ViewGroup.drawChild(ViewGroup.java:2929)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2799)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.view.View.draw(View.java:13461)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.widget.FrameLayout.draw(FrameLayout.java:467)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.view.View.draw(View.java:13342)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.view.ViewGroup.drawChild(ViewGroup.java:2929)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2799)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.view.View.draw(View.java:13340)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.view.ViewGroup.drawChild(ViewGroup.java:2929)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2799)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.view.View.draw(View.java:13461)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.widget.FrameLayout.draw(FrameLayout.java:467)
01-08 11:54:25.866: E/AndroidRuntime(714):  at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2183)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.view.ViewRootImpl.drawSoftware(ViewRootImpl.java:2256)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.view.ViewRootImpl.draw(ViewRootImpl.java:2151)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2019)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1830)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4212)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.view.Choreographer.doCallbacks(Choreographer.java:555)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.view.Choreographer.doFrame(Choreographer.java:525)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.os.Handler.handleCallback(Handler.java:615)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.os.Looper.loop(Looper.java:137)
01-08 11:54:25.866: E/AndroidRuntime(714):  at android.app.ActivityThread.main(ActivityThread.java:4745)
01-08 11:54:25.866: E/AndroidRuntime(714):  at java.lang.reflect.Method.invokeNative(Native Method)
01-08 11:54:25.866: E/AndroidRuntime(714):  at java.lang.reflect.Method.invoke(Method.java:511)
01-08 11:54:25.866: E/AndroidRuntime(714):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-08 11:54:25.866: E/AndroidRuntime(714):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-08 11:54:25.866: E/AndroidRuntime(714):  at dalvik.system.NativeStart.main(Native Method)
01-08 11:54:28.535: I/Process(714): Sending signal. PID: 714 SIG: 9 
```

我很确定错误包含在该行中：

```
 String TestA = resultA.getText().toString();
        String TestB = resultB.getText().toString();
        String TestC = resultC.getText().toString(); 
```

我传递 TextView 值的方式一定有问题，但我看不出问题出在哪里。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:29:39.707

你的类名“calculations”以小写字母开头，假设它应该以大写“C”开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:29:53.077

```
String TestA = resultA.getText().toString();
String TestB = resultB.getText().toString();
String TestC = resultC.getText().toString(); 
```

将此代码放在您的 TestA1 类之外，并在您的类中使用此变量。你完成了。希望它会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T12:33:58.353

试试这个：

```
 String TestA="",TestB="",TestC="";

        if(!resultA.getText().toString().equals("")) 
            TestA = resultA.getText().toString();
        if(!resultB.getText().toString().equals("")) 
            TestB = resultB.getText().toString();
        if(!resultC.getText().toString().equals("")) 
            TestC = resultC.getText().toString(); 
```

代替 ：

```
 String TestA = resultA.getText().toString();
        String TestB = resultB.getText().toString();
        String TestC = resultC.getText().toString(); 
```

谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T13:15:09.300

嗨，这里有几个 NullPointerException 可能的原因

1）首先文本视图中的字符串可能没有输入和。

`R.id.result1, R.id.result2, R.id.result3`2) 其次，各个文本视图的 id ( ) 可能不会出现在`R.layout.calculations_page`您在活动中使用的相同布局 () 中

对于第一种情况，您可以参考 Pratik Sharma 的建议

第二次检查是否为空`resultA, resultB, resultC`

例如

```
if(resultA!=null){
} 
```

# php - CodeIgniter mod_rewrite 给出 404 错误

> ID：14214842
> 
> 赞同：0
> 
> 时间：2013-01-08T12:21:24.273
> 
> 标签：php, .htaccess, codeigniter, mod-rewrite, codeigniter-url

我已经编写了一个 CodeIgniter 应用程序，我想使用 mod_rewrite 来清理我的 URL。我已经在 htdocs/ci-intro/ 中安装了 CodeIgniter 应用程序

这是我的 .htaccess 文件：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /ci_intro/

#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#When your application folder isn't in the system folder
#This snippet prevents user access to the application folder
#Submitted by: Fabdrol
#Rename 'application' to your applications folder name.
RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
# If we don't have mod_rewrite installed, all 404's
# can be sent to index.php, and everything works as normal.
# Submitted by: ElliotHaughin

ErrorDocument 404 /index.php
</IfModule> 
```

我将 CodeIgniter 中的 config.php 更改为以下内容：

```
$config['base_url'] = '';
$config['index_page'] = ''; 
```

每当我使用我的链接转到 about 页面时，我都会收到来自 CodeIgniter 的 404 消息。不过，我浏览器中的 URL 似乎已“清理”（index.php 已删除）。这是网址：

'http://localhost:8888/ci_intro/about'

任何人都可以帮助我摆脱 404 错误并实际将使用定向到 about 页面吗？

操作系统：MAC OS X 10.8.2（最新）
服务器软件：MAMP
PHP：5.2.17
浏览器：Chrome 和 Safari（在两种浏览器中都会出现此问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:02:11.863

在查看您的服务器配置之前，请尝试以下代码：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /ci_intro/

#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
# If we don't have mod_rewrite installed, all 404's
# can be sent to index.php, and everything works as normal.
# Submitted by: ElliotHaughin

ErrorDocument 404 /index.php
</IfModule> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T06:53:45.337

尝试这个...

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /Your_folder_Name/index.php?/$1 [L]

RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /Your_folder_Name/index.php?/$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ Your_folder_Name/index.php?/$1 [L]
</IfModule> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T14:02:01.730

```
RewriteCond %{REQUEST_URI} ^system.* 
```

可能不会触发，因为 REQUEST_URI 以 / 开头。尝试

```
RewriteCond %{REQUEST_URI} ^/system 
```

同上

```
RewriteCond %{REQUEST_URI} ^application.* 
```

你的系统真的想要 /index.php?/blah blah 吗？在 ? 之后会出现一个 URL 查询字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T05:52:28.953

巧合的是，我正在使用与您相同的配置，最终无论我如何更改它都无法正常工作。

所以我放弃了改变它并尝试了另一个最简单的设置。试试这个，它对我有用！:)

```
<IfModule mod_rewrite.c>

RewriteEngine on

# If the start of the URL doesn't match one of these...
RewriteCond $1 !^(index\.php|robots\.txt|assets|cache|images|uploads)

# Route through index.php
RewriteRule ^(.*)$ index.php/$1 [L] 
```

# android - 为什么要为不同的密度提供多个可绘制对象？

> ID：14214843
> 
> 赞同：3
> 
> 时间：2013-01-08T12:21:25.443
> 
> 标签：android, drawable, screen-resolution

我的应用支持从 ldpi 到 xhdpi 的各种屏幕密度。它包含一些需要在所有密度上正确显示的可绘制对象（图像）。我想知道实际上需要提供多少种不同分辨率的drawable，考虑到Android运行时在找不到合适密度的资源时会缩放资源。

如果您只提供 mdpi 可绘制对象，它们将在 hdpi/xhdpi（模糊）上按比例放大，在 ldpi 屏幕上按比例缩小。

但是，如果您只提供 xhdi 资源，那么它们将在所有低密度屏幕上按比例缩小。缩小不会使它们变得模糊，它们看起来会很好。

那么，为什么还要为 xhdpi 以外的其他密度提供可绘制对象呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T12:26:50.367

使用预缩放可绘制对象有几个原因：

1.  缩小到较低的分辨率会占用资源（CPU 时间、内存，并且会更快地耗尽电池），尤其是如果您有很多图像，这可能是不受欢迎的。

2.  缩小大图像可能会导致比使用“预先调整”的小图像更差的质量。特别是如果您的图像基于矢量原件。或者它们包含非常精细的线条或细节，当缩放时会丢失。
    例如：
    ![原始图像](../Images/eca4d75814f10bb2f46e5f0802139b4d.png)变为![缩放图像](../Images/2dc4819fe7d618678379de9c3194d666.png)
    See [here](http://www.glennchan.info/broadcast-monitors/scaling-artifacts/scaling-artifacts.htm)以获取这些图像的来源以及有关缩放伪影的更多信息。

3.  在较低分辨率下，图像像素较大（或图像变小），因此可能需要删除图像的某些方面以保持清晰/易于理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:26:51.770

您关于扩展资源的假设是不正确的。一些大图像在按比例缩小后可能仍然看起来不错，但这不是一般情况。如果图像有平滑的过渡并且没有渐变，它会很好地按比例缩小。例如，包含急剧过渡或包含文本的图像在较低分辨率下会看起来很丑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T12:27:32.983

如果您自己进行缩放，那么与自动缩放相比，结果可能会更好，而且如果准备好可绘制对象，您的应用程序不会消耗用于缩放的资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T12:29:12.857

不是必需的，但例如，您可以针对不同的屏幕分辨率使用具有不同可绘制对象的不同布局。您可以选择这样做。如果您和您的用户对结果感到满意，那就太酷了。如果您需要不同密度和分辨率的不同行为，那么此功能非常有用。

# objective-c - 检测嵌套自定义精灵图层上的触摸时遇到问题

> ID：14214846
> 
> 赞同：1
> 
> 时间：2013-01-08T12:21:40.870
> 
> 标签：objective-c, cocoa-touch, cocos2d-iphone

我在`HelloWorldLayer`下面有一个图层，触摸可以在任何地方工作，但我希望它仅在触摸图层中的精灵时才起作用 -`turtle`下方。

如果我尝试添加`self.isTouchEnabled = YES;`到`CCTurtle`它说的图层

> `isTouchEnabled`在对象类型 CCTurtle 上找不到属性

我的输出如下

2013-01-08 20:30:14.767 FlashToCocosARC[6746:d503] cocos2d：解除分配

2013-01-08 20:30:15.245 FlashToCocosARC[6746:d503] 播放行走动画2

这是我的 HelloWorldLayer 代码：

```
#import "HelloWorldLayer.h"
#import "CCTurtle.h"

@implementation HelloWorldLayer

+(CCScene *) scene
{
    CCScene *scene = [CCScene node];
    HelloWorldLayer *layer = [HelloWorldLayer node];
    [scene addChild: layer];
    return scene;
}

-(id) init
{
    if( (self=[super init])) {
        turtle= [[CCTurtle alloc] init];
        [turtle setPosition:ccp(300, 100)];
        [self addChild:turtle];
        ///addChild:child z:z tag:aTag;
        self.isTouchEnabled = YES;
        turtle. tag=4;
    //

    }
return self;
}

//- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
//{
//    // Processing all touches for multi-touch support
//    UITouch *touch = [touches anyObject];
//    if ([[touch view] isKindOfClass:[turtle class]]) {
//        NSLog(@"[touch view].tag = %d", [touch view].tag);
//        [self toggleTurtle];
//    }
//}
-(BOOL)containsTouch:(UITouch *)touch {
    CGRect r=[turtle textureRect];
    CGPoint p=[turtle convertTouchToNodeSpace:touch];
    return CGRectContainsPoint(r, p );
}
- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    //////GENERAL TOUCH SCREEN
    for (UITouch *touch in touches) {
        CGPoint touchLocation = [touch locationInView:[touch view]];
        touchLocation = [[CCDirector sharedDirector] convertToGL:touchLocation];
        [self toggleTurtle];
        /////
    }

}
-(void) toggleTurtle
{
    NSLog(@"playing walk animation2");
   [turtle playAnimation:@"walk_in" loop:NO wait:YES];
}

@end 
```

//你好世界.h

```
 #import "cocos2d.h"
    #import "CCTurtle.h"

    @interface HelloWorldLayer : CCLayer 
    {
    CCTurtle                *turtle;
    }

    +(CCScene *) scene;

    @end 
```

//CC乌龟

```
 #import <Foundation/Foundation.h>
    #import "FTCCharacter.h"

    @interface CCTurtle : FTCCharacter <FTCCharacterDelegate, CCTargetedTouchDelegate>
    {

    }
    @end 
```

我正在使用 Cocos2D cocos2d v1.0.1（启用了拱门），并且正在 ipad 4.3 模拟器上进行测试。感谢娜塔莉

我试图将触摸直接放入 ccturtle.m 以便它可以使用 CCTargetedTouchDelegate 处理自己的触摸，但使用

CCturtle/// 我把文件改成这个，尝试用不同的方式找到被触摸的区域...

```
 - (CGRect)rect
   {
   CGSize s = [self.texture contentSize];
   return CGRectMake(-s.width / 2, -s.height / 2, s.width, s.height);
   }

   -(BOOL) didTouch: (UITouch*)touch {
   return CGRectContainsPoint(self.rect, [self convertTouchToNodeSpaceAR:touch]);
   //return CGRectContainsPoint( [self rect], [self convertTouchToNodeSpaceAR: touch] );
   }

   -(BOOL) ccTouchBegan:(UITouch*)touch withEvent: (UIEvent*)event {
   NSLog(@"attempting touch.");
   if([self didTouch: touch]) {
   return [self tsTouchBegan:touch withEvent: event];
   }
   return NO;
   } 
```

但仍然不会编译，因为仍然返回错误**“在对象类型'CCTurtle *'上找不到属性'is TouchEnabled'**

我真的不确定我能做些什么来让它现在运行......并且真的需要让它工作（我想我可以制作隐形按钮，但能够正确找到 ccturtle 并了解什么会更好我做错了...希望有人可以提供帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:28:05.740

首先，我看不到任何`containsTouch:`方法调用。这里有几个建议：

使用`boundingBox`而不是`textureRect`获取节点的本地矩形（在这种情况下是您的海龟）。或者只是将`containsTouch:`方法替换为您的海龟类以封装它。例如，如果您想让乌龟的触摸区域更大/更小，这可能会有所帮助。你只需要在你的龟类中改变一个小方法。

在您的`ccTouchesBegan:withEvent:`方法中，只需检查每只海龟是否被此触摸击中。然后，例如，您可以创建字典，以 touch 作为键，并以对应的海龟数组作为值。然后你只需要在你的`ccTouchesMoved:withEvent:`方法中更新所有海龟的位置来移动触摸，并从字典中删除这个海龟数组`ccTouchesEnded:withEvent:`和 ccTouchCancelled:withEvent: 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:29:00.117

如果您希望您的 CCTurtle 对象接受目标触摸，您可以通过指定它符合 CCTargetedTouchDelegate 协议来实现。在您的 CCTurtle @interface 中，您可以这样声明：

```
@interface CCTurtle : CCNode <CCTargetedTouchDelegate> 
```

然后在实现中，告诉它接受触摸并实现 ccTouch 方法：

```
@implementation CCTurtle

-(id) init {
.
.
    [[CCDirector sharedDirector].touchDispatcher addTargetedDelegate:self priority:1 swallowsTouches:YES];
    return self;
}

-(void) onExit {
    [[CCDirector sharedDirector].touchDispatcher removeDelegate:self];
}

-(BOOL) ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event { 
    CGPoint location = [[CCDirector sharedDirector] convertToGL:[touch locationInView:[touch view]]];
    if (CGRectContainsPoint([self boundingBox], location] {
        // some code here
    }
}

-(void)ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event { // code here }
-(void)ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event { // code here}
-(void)ccTouchCancelled:(UITouch *)touch withEvent:(UIEvent *)event { // code here} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T08:25:42.860

多亏了 Prototypical，问题得到了解决，尽管 CCTurtle 是一个带有一种精灵类型的图层，但它是嵌套精灵，这意味着 cocos2d 在为我的“包含触摸方法”创建正确的边界框时遇到问题

所以他用一点魔法将他的“[获取完整边界框](https://stackoverflow.com/questions/14076037/need-a-bounding-box-for-ccsprite-that-includes-all-children-subchildren)”方法结合到包含触摸方法中来解释精灵的孩子，并且代码现在依赖于碰撞检测来处理触摸。目前我很高兴为他制作一些漂亮的图标作为回报

但想对所有帮助过的人说声谢谢，并希望这种方法对遇到同样问题的人有用！

# c - 使用 ap_parse_form_data 从 C 中的 apache 模块检索 POST 数据时出错

> ID：14214849
> 
> 赞同：2
> 
> 时间：2013-01-08T12:21:56.580
> 
> 标签：c, apache2

我想使用“C”从 Apache 模块中的浏览器解析 POST 数据。根据 Apache API 文档，函数 ap_parse_form_data 可用于此目的。该函数在 httpd.h 中声明，我已将其包含在我的模块中：

```
...
#include <httpd.h>
#include <apr_tables.h>
#include "http_config.h"
#include "http_protocol.h"
#include "ap_config.h"
...
keyValuePair* readPost(request_rec* r) {
    ...
    apr_array_header_t *pairs=NULL;
    int res;
    ...
    res = ap_parse_form_data(r, NULL, &pairs, -1, 8192); 
```

该程序使用 apxs2 命令成功编译，并且模块安装在正确的路径中。但是，当我启动 Apache 服务器时，它会抛出如下错误：

> apache2：/etc/apache2/apache2.conf 第 204 行的
> 语法错误：/etc/apache2/mods-enabled/apache_post.load 第 1 行的语法错误：
> 无法加载 /usr/lib/apache2/modules/mod_apache_post.so进入服务器：
> /usr/lib/apache2/modules/mod_apache_post.so：未定义符号：
> ap_parse_form_data

`undefined symbol:ap_parse_form_data`

有什么提示可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-14T19:27:10.213

我更新了这个帖子，因为有人想要回答这个问题，这会有所帮助。

```
 #include "httpd.h"
    #include "http_core.h"
    #include "http_protocol.h"
    #include "http_request.h"

    #include "apr_strings.h"
    #include "apr_network_io.h"
    #include "apr_dbd.h"
    #include <apr_file_info.h>
    #include <apr_file_io.h>
    #include <apr_tables.h>
    #include "util_script.h"

    typedef struct {
    const char* key;
    const char* value;
    } keyValuePair;

    /* Define prototypes of our functions in this module */
    static void register_hooks(apr_pool_t *pool);
    static int example_handler(request_rec *r);
    keyValuePair* readPost(request_rec* r);
    /* Define our module as an entity and assign a function for registering hooks  */

    module AP_MODULE_DECLARE_DATA   example_module =
    {
    STANDARD20_MODULE_STUFF,
            NULL,            // Per-directory configuration handler
            NULL,            // Merge handler for per-directory configurations
            NULL,            // Per-server configuration handler
            NULL,            // Merge handler for per-server configurations
            NULL,            // Any directives we may have for httpd
    register_hooks   // Our hook registering function
    };

    /* register_hooks: Adds a hook to the httpd process */
    static void register_hooks(apr_pool_t *pool) 
    {

            /* Hook the request handler */
            ap_hook_handler(example_handler, NULL, NULL, APR_HOOK_LAST);
    }

    /* The handler function for our module.
            * This is where all the fun happens!
    */

    keyValuePair* readPost(request_rec* r) {
            apr_array_header_t *pairs = NULL;
            apr_off_t len;
            apr_size_t size;
            int res;
            int i = 0;
            char *buffer;
            keyValuePair* kvp;

    res = ap_parse_form_data(r, NULL, &pairs, -1, HUGE_STRING_LEN);
    if (res != OK || !pairs) return NULL; /* Return NULL if we failed or if there are is no POST data */
    kvp = apr_pcalloc(r->pool, sizeof(keyValuePair) * (pairs->nelts + 1));
    while (pairs && !apr_is_empty_array(pairs)) {
    ap_form_pair_t *pair = (ap_form_pair_t *) apr_array_pop(pairs);
    apr_brigade_length(pair->value, 1, &len);
    size = (apr_size_t) len;
    buffer = apr_palloc(r->pool, size + 1);
    apr_brigade_flatten(pair->value, buffer, &size);
    buffer[len] = 0;
    kvp[i].key = apr_pstrdup(r->pool, pair->name);
    kvp[i].value = buffer;
    i++;
    }
    return kvp;
    }

    static int example_handler(request_rec *r)
    {
    /*~~~~~~~~~~~~~~~~~~~~~~*/
    keyValuePair* formData;
    /*~~~~~~~~~~~~~~~~~~~~~~*/

            formData = readPost(r);
            if (formData) {
             int i;
            for (i = 0; &formData[i]; i++) {
            if (formData[i].key && formData[i].value) {
                    ap_rprintf(r, "%s = %s\n", formData[i].key, formData[i].value);
            } else if (formData[i].key) {
                    ap_rprintf(r, "%s\n", formData[i].key);
            } else if (formData[i].value) {
                    ap_rprintf(r, "= %s\n", formData[i].value);
            } else {
                    break;
            }
            }
    }
    return OK;
    } 
```

所以在用一些名字（mod_example.c）保存上面的代码之后，你可以像这样使用**apxs编译它**

```
 apxs -i -a -c mod_example.c 
```

然后在 apache2.conf(etc/apache2/) 文件中添加这个。

```
 <Location "/exampleDir">
                   SetHandler example-handler
             </Location> 
```

然后尝试将发布请求发送到目录 /exampleDir。请按照本教程[http://httpd.apache.org/docs/2.4/developer/modguide.html](http://httpd.apache.org/docs/2.4/developer/modguide.html)获取更多信息。

# c# - 我在 DataGrid 中的用户控件不断重置

> ID：14214850
> 
> 赞同：0
> 
> 时间：2013-01-08T12:21:58.173
> 
> 标签：c#, wpf, xml

我是 WPF 的新手，所以也许我在做一些非常愚蠢的事情。但是..
也是我的第一个问题。

我制作了一个自定义 ProgressBar UserControl 以在 DataGrid 中使用。除了每次 DataGrid 刷新（重新排序列）UserControl 重置时，所有属性和依赖项属性都更改为它们的默认值并且再次调用构造函数，所有看起来都可以正常工作。看起来我的控件在每次 DataGrid 刷新时都被破坏并重新创建。

无论如何要避免这种行为？

我需要保留更改历史记录。编辑：

```
<DataGridTemplateColumn Header="Progress" Width="*">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <local:SegmentedProgressBar HorizontalAlignment="Stretch" SegmentedProgressCustomUpdate="{Binding SegmentedProgressCustomUpdate}"/>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
 </DataGridTemplateColumn> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:38:30.133

听起来好像 DataGrid 又是数据绑定了。这将导致行可能被重新创建，因此，用户控件被重置。也就是说，如果您从某些外部数据中拉出进度条，您可以在行创建事件中动态设置进度条控件的所有属性。

# google-plus - Google Plus 共享按钮未在企业页面上共享

> ID：14214851
> 
> 赞同：3
> 
> 时间：2013-01-08T12:21:58.697
> 
> 标签：google-plus, share-button

假设我有一个在线购物系统，并且注册了许多用户。我想要一个功能，当我添加新产品或对特定产品进行促销时，我的 Google+ 页面会更新，因为产品的详细信息会自动在那里发布。它将仅用于后台用途。

问题是我无法在业务页面上共享，它会发布在我的用户个人资料中。

如何通过网络应用程序在 google plus 页面上发帖？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T18:22:29.550

目前，您需要使用[第三方社交媒体管理工具](http://www.google.com/+/business/3rdpartytools.html)以自动方式实现此目的。我已经尝试过 Hootsuite，它似乎可以与标准帐户一起使用。

如果您添加的产品数量不多，您可以使用[https://plus.google.com](https://plus.google.com)网站手动分享并切换到使用您的页面作为海报。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-20T23:33:10.823

# 将页面*免费*设置为*独立*帐户

*显然*，Pages 现在可能（因为我不知道）他们的脐带被切断，并可以自由地用自己的两只脚站立。

该过程涉及为页面设置密码（通过页面的设置），允许其登录和退出而不是简单地管理。

这*应该允许在网络***上作为主页**而不是作为创建它的个人资料进行分享（以及其他 G+ 操作，例如 +1） 。

有关详细信息，请参阅[plusyourbusiness.com 上 2014 年 10 月](https://www.plusyourbusiness.com/share-blog-post-website-google-plus-page-profile/)[的文章，以及 2014 年 3 月在 blogger-hints-and-tips.blogspot.de 上的文章](http://blogger-hints-and-tips.blogspot.de/2014/03/set-login-id-and-password-for-a-google-plus-page.html)（由前者引用）了解更多信息。

PS *“显然”*和*“应该”*是由于我自己还没有完成这个过程。

PPS（现在完成）简单且有效。

# java - 在 MySQL 中检索大型结果集而不影响速度

> ID：14214855
> 
> 赞同：1
> 
> 时间：2013-01-08T12:22:12.897
> 
> 标签：java, mysql, resultset, mib

在我的应用程序中，我的结果集包含超过 20000 行。我想将其保存到数组列表中。我为此使用下面的代码。

```
Class.forName("com.mysql.jdbc.Driver") ;
Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/Data",     "root", "root") ;
  Statement stmt = conn.createStatement() ;
  String query = "select * from temp ;" ;
  ResultSet rs = stmt.executeQuery(query) ;

  ArrayList<String> varList = new ArrayList<String>();
  while(rs.next()){
  varList.add(rs.getString(1));
  } 
```

当我使用查询时，从结果集中获取数据需要更多时间，如果表包含超过 20000 个条目，则速度太慢。如何解决？任何建议都会非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:43:29.557

就数据库行而言，20000 并不是一个大数字。

您的问题可能在 ArrayList 中。

默认情况下，ArrayList 有一个默认大小，我不确定有多少，比如 100。当插入的项目超过该数字时，Java 将创建一个新的 arraylist，其大小增加一些值，我不太清楚确定有多少，也说100。然后将先前列表中的内容复制到新列表中。在您的情况下，这些都是字符串操作。所以你可以看到为什么它很慢。执行以下操作可能会解决您的问题。

```
int rsSize = getResultSetSize(connection,query);  //return the size of the result set first
ArrayList<String> varList = new ArrayList<String>(rsSize); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:29:34.087

我强烈怀疑您正在尝试解决错误的问题。无论您对这 20,000 行做什么，都应该*在数据库中*执行，并且只将操作的结果（希望这将占用更少的空间）返回给客户端。

如果您确切地告诉我们您要如何处理这些数据，我们或许可以就如何做到这一点提供更具体的建议。

（或者，如果您确实*需要*客户端的所有 20,000 行，您可能希望完全跳过数据库并将它们存储在客户端。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T12:33:39.213

我怀疑您的问题不在于数据库，而可能是列表中的项目连接。您应该为 java 提供更多内存。如果它是 list.add ，那么您可以通过分配结果大小的数组然后使用索引将数据插入数组来加快速度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T12:40:17.083

获取后你想对这 20000 条记录做什么。？无论您想做什么，看看您是否可以使用 PL-SQL 代码在 DB 级别完成它。许多程序员不使用 PL-SQL 的强大功能。无论您可以使用其他高级编程语言做什么，其中大多数事情也可以使用 PL-SQL 完成。

# vim - 单击进入时如何始终清除 hlsearch？

> ID：14214857
> 
> 赞同：1
> 
> 时间：2013-01-08T12:22:17.600
> 
> 标签：vim, mapping

现在我正在使用：

```
nnoremap <cr> :nohlsearch<cr><cr>k 
```

但是在我按下后，`Enter`我的光标会转到行首。

我还有额外`<cr>k`的，因为我想使用默认`<Enter>`行为，例如当我尝试在 Ack 结果快速查看中打开文件时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T13:09:54.610

如果您希望 Enter 保持默认行为，那么这个映射应该处理它。

```
nnoremap <CR> :nohlsearch<CR><CR> 
```

它关闭搜索突出显示，向下移动光标，并且仅适用于正常模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T01:02:21.403

另一种方法是在本地覆盖 quickfix 窗口和命令行窗口中的新行为，其中`<CR>`具有特殊含义：

```
:nnoremap <CR> :nohlsearch<CR>
:autocmd BufReadPost quickfix nnoremap <buffer> <CR> <CR>
:autocmd CmdwinEnter * nnoremap <buffer> <CR> <CR> 
```

# javascript - jQuery-Enter键事件功能反复提醒

> ID：14214860
> 
> 赞同：2
> 
> 时间：2013-01-08T12:22:27.337
> 
> 标签：javascript, jquery, jsp

`newVal`如果和`oldVal`相等，我必须阻止表单提交。否则我需要执行 Javascript 函数。-`Enter`从键盘上按下动态生成的文本框的键。

对于这种情况，当按下回车键时，警报会反复出现。即，第一次发出警报。第二次发出两次警报。并且没有得到预期的结果。

预期：如果我输入的值等于`curValue`然后表单不必提交。否则需要调用函数`myFun();`我有什么问题？

```
function pressEnter(id,newValue,i)
{
var newId = '#'+id;
$(newId).keydown(function(event) {
var curValue= '<%=currentVal%>';

   var keycode = (event.keyCode ? event.keyCode : event.which);
    if(keycode == '13'){
    alert(newValue+"-"+curValue);
      if(newValue== curValue)
      {
      event.preventDefault();
      }
      else
      {
      myFun(i);
      }

     }
});
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T12:25:19.183

您必须取消绑定以前的 keydown 处理程序：

```
$(newId).off('keydown').keydown(function(event) {...}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:38:42.720

您可以在表单提交事件上进行此比较，而不是按回车键。因为用户可以使用鼠标点击提交按钮。

限制用户提交表单如下，

```
$("#your_form_id").submit(function() {
var newValue = $(".your_textbox").val();
var curValue= '<%=currentVal%>';
if(newValue== curValue)
{
event.preventDefault();
//Or use return false;
} else{
myFun();
}
}); 
```

在这里，我们可以避免不必要的绑定和取消绑定操作。

我们可以在回车上实现这个，只需写下没有函数，如下所示，

```
$("#your_text_box_id").keydown(function(event) {
var newValue = $(".your_textbox").val();
var curValue= '<%=currentVal%>';

var keycode = (event.keyCode ? event.keyCode : event.which);
if(keycode == '13'){
alert(newValue+"-"+curValue);
if(newValue== curValue)
{
event.preventDefault();
}else{
 myFun();
}
}
}); 
```

注意：如果您将此 jQuery 代码限定在一个函数内，则 javascript 会在每个函数调用上为同一事件添加处理程序。结果是您的代码（“keydown”回调中的代码）多次运行。为避免您必须取消绑定事件。

# puppet - 使用 puppet 在生产环境中自动部署

> ID：14214864
> 
> 赞同：0
> 
> 时间：2013-01-08T12:22:38.130
> 
> 标签：puppet, continuous-deployment, continuous-delivery

我想知道如何使用 puppet 自动部署到生产环境。

我的生产服务器上需要 puppet-slave 吗？如果是这样，那是不安全的吗？ puppet 有什么权利？

一个用例可能是从存储库管理器获取包，然后将其部署到生产服务器。puppet 这种方式的主要步骤是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-17T17:56:06.583

Puppet 可以在单独模式下运行，您可以在运行它的主机上的配置文件中应用一组配置，只要 puppet（客户端/代理）已经安装在那里。

您还可以在客户端-服务器模式下运行 puppet，其中代理在生产服务器上运行并从 puppet 服务器（或 puppet master）获取配置详细信息

`If you run in client-server mode, how do you ensure security?`

好吧，在客户端-服务器模式下，您将客户端/代理预先注册到您指定的服务器并交换 ssl 证书，然后才能对该代理应用任何操作。同样，您必须（在您的 pupper 服务器或主服务器上）将一组操作或清单与运行代理的生产服务器相关联。我想这提供了足够的安全性，假设您已经在第一个实例中处理了两个系统的标准操作系统安全性。

此外，puppet 文件服务器可以提供额外的安全性，如 bagheera 建议的链接中所建议的那样。如果您比这更偏执，那么您将需要考虑将[puppet 图书馆员](http://librarian-puppet.com/)与在运行时组装和使用的 Puppetfile 一起使用。

`In either case, the bigger challenge for you is that the set of instructions (or manifests) applied have undergone testing (on a test or staging server) before being applied to a production system.`

因此，当您开始尝试将 puppet 清单应用于生产服务器时，您需要确定自己在做什么。我不建议只下载 puppet 模块并在没有深入了解您正在做什么以及清楚了解您打算使用的每个模块的情况下使用它们。

[Puppetlabs](http://docs.puppetlabs.com/)有很好的使用 puppet 的介绍文档，这将是一个开始学习更多关于 puppet 的好地方。一本好书也会很有用。

# image - 如何阻止 Unity3d 中的图像失真？

> ID：14214874
> 
> 赞同：1
> 
> 时间：2013-01-08T12:23:19.660
> 
> 标签：image, unity3d

我正在 Unity 中制作应用程序，但是当我添加图形时，它们会变形且不成比例。我可以使用它们，但它们看起来不太好。我如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T07:19:01.750

导入时，图像默认为纹理格式，这将使它们成为 2 的幂*（用作 3D 空间中的纹理。）*如果您打算将它们用作 2D 纹理，则必须将[纹理导入设置面板](http://docs.unity3d.com/Documentation/Manual/Textures.html)中的值更新为图形用户界面。如果需要更高的质量，您还可以更改甚至禁用压缩。

# .htaccess - 将 Drupal 6 重定向到子域

> ID：14214877
> 
> 赞同：0
> 
> 时间：2013-01-08T12:23:30.777
> 
> 标签：.htaccess, url-rewriting, drupal-6

我的 Drupal 6 安装是通过服务器安装配置文件安装的。我需要将基本 URL 从 example.com 更改为 dev.example.com。

我已经在 settings.php 和 baseurl.php 中更改了它。该站点没有单独的 .htaccess 文件。我在这里做什么？我应该创建一个新的 .htaccess 文件还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:12:06.120

是的，您必须创建新的 .htaccess 文件并在底部包含此代码

重写引擎开启

RewriteCond %{HTTP_HOST} !oldexample.com$ [NC]

重写规则 ^(.*)$ [http://www.newexample.com/](http://www.newexample.com/) $1 [L,R=301]

希望对你有帮助！！

# progress-4gl - 在 4GL 中添加 HourGlass 光标

> ID：14214887
> 
> 赞同：0
> 
> 时间：2013-01-08T12:24:12.963
> 
> 标签：progress-4gl, openedge

我正在尝试在我的代码中添加 HourGlass 光标。我尝试了此代码会话：set-wait-state('HourGlass')。

但我没有得到 HourGlass 光标。请帮我得到光标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:02:28.440

您不会在 Windows Vista 或更高版本中获得沙漏；你得到圆形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:59:27.863

尝试

```
session:set-wait-state("general"). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T13:12:17.337

打开沙漏光标：

```
SESSION:SET-WAIT-STATE("wait":U). 
```

将其关闭：

```
SESSION:SET-WAIT-STATE("":U). 
```

# binary - 为什么 leveldb DB::Get API 使用 std::string 作为值类型？

> ID：14214890
> 
> 赞同：3
> 
> 时间：2013-01-08T12:24:15.550
> 
> 标签：binary, leveldb

我想在 leveldb 中存储键（url）和值（jpg 图像）。据说，

> 键和值是任意字节数组。

如何使用 DB::Get API？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-04T18:08:19.693

Slice 不拥有内存（只是指向它），因此返回 Slice 意味着调用者应该释放内存。

所以需要一个具有值语义的类型。

`std::vector<uint8_t>`正如它所暗示的那样，二进制数组的自然值是。但`std::string`也可以代替使用（正如您在回答中指出的那样），如果您希望读取真正的字符串（不需要强制转换），它会更有用。

不过，主要问题是原因没有记录在案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T02:29:15.903

I finally got it! c++ std::string use size() method to get the data length, use .data() get the data value. c++ std::string is not terminated by '\0', but specified by the size() function!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-08T13:36:55.433

或者，如果您使用迭代器，您可以直接从`iter->Value()`返回切片的函数中提取数据。这避免了复制到中间字符串中。

# oracle - 如何在 vb6 中设置 DTPicker 的格式？

> ID：14214892
> 
> 赞同：0
> 
> 时间：2013-01-08T12:24:21.163
> 
> 标签：oracle, vb6

```
<code>
private sub save_click()
SQL = SQL + "DATE_OF_BIRTH=('" & TO_CHAR(TO_DATE(DTPicker1.Value, "DD-MM-YYYY")) & "'),"
end sub
</code> 
```

它显示错误，例如：未定义子或函数。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:49:27.047

尝试这样的事情：

```
SQL = SQL & "DATE_OF_BIRTH between " & Format(DTPicker1(count).value, "DD-MM-YYYY") & " and " & Format(DateAdd("d", 1, DTPicker1(count).value), "DD-MM-YYYY")) 
```

至少我是这样为 MSSQL 和 Postgresql 做的

# ios - 带有 NSAttributedString 的首字下沉

> ID：14214900
> 
> 赞同：19
> 
> 时间：2013-01-08T12:24:59.807
> 
> 标签：ios, uilabel, core-text, typography, nsattributedstring

我想在仅`UILabel`使用该`attributedText` `NSAttributedString`属性的情况下做一个首字下沉。像这样：

[![](../Images/6159f61e495554f787ee2bcdbadee4f8.png)](https://i.stack.imgur.com/U2w5B.gif)
[（来源：[interpretationbydesign.com](http://www.interpretationbydesign.com/wp-content/uploads/2009/02/drop_caps.gif)）]

我已经尝试将第一个字符范围的基线调整为负值，它适用于将第一个字符的顶部与第一行其余部分的顶部对齐。但我还没有找到任何方法让其他行流到下垂字符的右侧。

这可以使用解决`NSAttributedString only`，还是我必须拆分字符串并使用 Core Text 自己呈现它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-01T04:42:37.277

正如其他所有人所提到的，仅使用`NSAttributedString`. Nikolai 有正确的方法，使用`CTFrameSetters`. 然而，**可以**告诉框架设置器在特定区域（即由 CGPath 定义）呈现文本。

您必须创建 2 个框架设置器，一个用于首字下沉，另一个用于其余文本。

然后，您抓住首字下沉的框架并构建一个`CGPathRef`围绕首字下沉框架的空间运行。

然后，您将两个框架设置器渲染到您的视图中。

我创建了一个示例项目，其中包含一个名为 DropCapView 的对象，它是 UIView 的子类。此视图呈现第一个字符并将剩余的文本环绕在它周围。

它看起来像这样：

![ios上的dropcap](../Images/52141a34e13759059d4d2be2cc2c812a.png)

有很多步骤，所以我添加了一个指向托管该示例的 github 项目的链接。项目中有一些评论可以帮助您。

[GitHub 上的 DropCap 项目](https://github.com/C4Code/DropCap)

您必须使用`textBox`元素的形状（即 CGPathRef）来填充视图边缘，并将其收紧到首字母下沉。

以下是绘图方法的要点：

```
- (void)drawRect:(CGRect)rect {
    //make sure that all the variables exist and are non-nil
    NSAssert(_text != nil, @"text is nil");
    NSAssert(_textColor != nil, @"textColor is nil");
    NSAssert(_fontName != nil, @"fontName is nil");
    NSAssert(_dropCapFontSize > 0, @"dropCapFontSize is <= 0");
    NSAssert(_textFontSize > 0, @"textFontSize is <=0");

    //convert the text aligment from NSTextAligment to CTTextAlignment
    CTTextAlignment ctTextAlignment = NSTextAlignmentToCTTextAlignment(_textAlignment);

    //create a paragraph style
    CTParagraphStyleSetting paragraphStyleSettings[] = { {
            .spec = kCTParagraphStyleSpecifierAlignment,
            .valueSize = sizeof ctTextAlignment,
            .value = &ctTextAlignment
        }
    };

    CFIndex settingCount = sizeof paragraphStyleSettings / sizeof *paragraphStyleSettings;
    CTParagraphStyleRef style = CTParagraphStyleCreate(paragraphStyleSettings, settingCount);

    //create two fonts, with the same name but differing font sizes
    CTFontRef dropCapFontRef = CTFontCreateWithName((__bridge CFStringRef)_fontName, _dropCapFontSize, NULL);
    CTFontRef textFontRef = CTFontCreateWithName((__bridge CFStringRef)_fontName, _textFontSize, NULL);

    //create a dictionary of style elements for the drop cap letter
    NSDictionary *dropCapDict = [NSDictionary dictionaryWithObjectsAndKeys:
                                (__bridge id)dropCapFontRef, kCTFontAttributeName,
                                _textColor.CGColor, kCTForegroundColorAttributeName,
                                style, kCTParagraphStyleAttributeName,
                                @(_dropCapKernValue) , kCTKernAttributeName,
                                nil];
    //convert it to a CFDictionaryRef
    CFDictionaryRef dropCapAttributes = (__bridge CFDictionaryRef)dropCapDict;

    //create a dictionary of style elements for the main text body
    NSDictionary *textDict = [NSDictionary dictionaryWithObjectsAndKeys:
                                 (__bridge id)textFontRef, kCTFontAttributeName,
                                 _textColor.CGColor, kCTForegroundColorAttributeName,
                                 style, kCTParagraphStyleAttributeName,
                                 nil];
    //convert it to a CFDictionaryRef
    CFDictionaryRef textAttributes = (__bridge CFDictionaryRef)textDict;

    //clean up, because the dictionaries now have copies
    CFRelease(dropCapFontRef);
    CFRelease(textFontRef);
    CFRelease(style);

    //create an attributed string for the dropcap
    CFAttributedStringRef dropCapString = CFAttributedStringCreate(kCFAllocatorDefault,
                                                                   (__bridge CFStringRef)[_text substringToIndex:1],
                                                                   dropCapAttributes);

    //create an attributed string for the text body
    CFAttributedStringRef textString = CFAttributedStringCreate(kCFAllocatorDefault,
                                                                (__bridge CFStringRef)[_text substringFromIndex:1],
                                                                   textAttributes);

    //create an frame setter for the dropcap
    CTFramesetterRef dropCapSetter = CTFramesetterCreateWithAttributedString(dropCapString);

    //create an frame setter for the dropcap
    CTFramesetterRef textSetter = CTFramesetterCreateWithAttributedString(textString);

    //clean up
    CFRelease(dropCapString);
    CFRelease(textString);

    //get the size of the drop cap letter
    CFRange range;
    CGSize maxSizeConstraint = CGSizeMake(200.0f, 200.0f);
    CGSize dropCapSize = CTFramesetterSuggestFrameSizeWithConstraints(dropCapSetter,
                                                                      CFRangeMake(0, 1),
                                                                      dropCapAttributes,
                                                                      maxSizeConstraint,
                                                                      &range);

    //create the path that the main body of text will be drawn into
    //i create the path based on the dropCapSize
    //adjusting to tighten things up (e.g. the *0.8,done by eye)
    //to get some padding around the edges of the screen
    //you could go to +5 (x) and self.frame.size.width -5 (same for height)
    CGMutablePathRef textBox = CGPathCreateMutable();
    CGPathMoveToPoint(textBox, nil, dropCapSize.width, 0);
    CGPathAddLineToPoint(textBox, nil, dropCapSize.width, dropCapSize.height * 0.8); 
    CGPathAddLineToPoint(textBox, nil, 0, dropCapSize.height * 0.8);
    CGPathAddLineToPoint(textBox, nil, 0, self.frame.size.height);
    CGPathAddLineToPoint(textBox, nil, self.frame.size.width, self.frame.size.height);
    CGPathAddLineToPoint(textBox, nil, self.frame.size.width, 0);
    CGPathCloseSubpath(textBox);

    //create a transform which will flip the CGContext into the same orientation as the UIView
    CGAffineTransform flipTransform = CGAffineTransformIdentity;
    flipTransform = CGAffineTransformTranslate(flipTransform,
                                               0,
                                               self.bounds.size.height);
    flipTransform = CGAffineTransformScale(flipTransform, 1, -1);

    //invert the path for the text box
    CGPathRef invertedTextBox = CGPathCreateCopyByTransformingPath(textBox,
                                                                   &flipTransform);
    CFRelease(textBox);

    //create the CTFrame that will hold the main body of text
    CTFrameRef textFrame = CTFramesetterCreateFrame(textSetter,
                                                    CFRangeMake(0, 0),
                                                    invertedTextBox,
                                                    NULL);
    CFRelease(invertedTextBox);
    CFRelease(textSetter);

    //create the drop cap text box
    //it is inverted already because we don't have to create an independent cgpathref (like above)
    CGPathRef dropCapTextBox = CGPathCreateWithRect(CGRectMake(_dropCapKernValue/2.0f,
                                                               0,
                                                               dropCapSize.width,
                                                               dropCapSize.height),
                                                    &flipTransform);
    CTFrameRef dropCapFrame = CTFramesetterCreateFrame(dropCapSetter,
                                                       CFRangeMake(0, 0),
                                                       dropCapTextBox,
                                                       NULL);
    CFRelease(dropCapTextBox);
    CFRelease(dropCapSetter);

    //draw the frames into our graphic context
    CGContextRef gc = UIGraphicsGetCurrentContext();
    CGContextSaveGState(gc); {
        CGContextConcatCTM(gc, flipTransform);
        CTFrameDraw(dropCapFrame, gc);
        CTFrameDraw(textFrame, gc);
    } CGContextRestoreGState(gc);
    CFRelease(dropCapFrame);
    CFRelease(textFrame);
} 
```

PS 这有一些灵感来自：[https ://stackoverflow.com/a/9272955/1218605](https://stackoverflow.com/a/9272955/1218605)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-15T06:42:34.717

CoreText 不能使用首字下沉，因为它由字形运行组成的行组成。首字下沉将覆盖不支持的多行。

要达到这种效果，您必须单独绘制帽子，然后在围绕它的路径中绘制其余文本。

长话短说：在 UILabel 中不可能，但可能，但在 CoreText 中进行了相当多的工作。

使用 CoreText 执行此操作的步骤是：

*   为单个角色创建一个框架设置器。
*   得到它的界限
*   创建一条路径，以避开首字下沉的框架
*   使用此路径为其余字符创建框架设置器
*   绘制第一个字形
*   休息

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-11-20T14:25:20.553

如果您使用的是 UITextView，您可以`textView.textContainer.exclusionPaths`按照[Dannie P](https://stackoverflow.com/users/1675788/dannie-p)[在此处](https://stackoverflow.com/a/20033752/672989)的建议使用。

斯威夫特的例子：

```
class WrappingTextVC: UIViewController {
  override func viewDidLoad() {
    super.viewDidLoad()

    let textView = UITextView()
    textView.translatesAutoresizingMaskIntoConstraints = false
    textView.text = "ropcap example. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris aliquam vulputate ex. Fusce interdum ultricies justo in tempus. Sed ornare justo in purus dignissim, et rutrum diam pulvinar. Quisque tristique eros ligula, at dictum odio tempor sed. Fusce non nisi sapien. Donec libero orci, finibus ac libero ac, tristique pretium ex. Aenean eu lorem ut nulla elementum imperdiet. Ut posuere, nulla ut tincidunt viverra, diam massa tincidunt arcu, in lobortis erat ex sed quam. Mauris lobortis libero magna, suscipit luctus lacus imperdiet eu. Ut non dignissim lacus. Vivamus eget odio massa. Aenean pretium eget erat sed ornare. In quis tortor urna. Quisque euismod, augue vel pretium suscipit, magna diam consequat urna, id aliquet est ligula id eros. Duis eget tristique orci, quis porta turpis. Donec commodo ullamcorper purus. Suspendisse et hendrerit mi. Nulla pellentesque semper nibh vitae vulputate. Pellentesque quis volutpat velit, ut bibendum magna. Morbi sagittis, erat rutrum  Suspendisse potenti. Nulla facilisi. Praesent libero est, tincidunt sit amet tempus id, blandit sit amet mi. Morbi sed odio nunc. Mauris lobortis elementum orci, at consectetur nisl egestas a. Pellentesque vel lectus maximus, semper lorem eget, accumsan mi. Etiam semper tellus ac leo porta lobortis."
    textView.backgroundColor = .lightGray
    textView.textColor = .black
    view.addSubview(textView)

    textView.leadingAnchor.constraint(equalTo: view.safeAreaLayoutGuide.leadingAnchor, constant: 20).isActive = true
    textView.trailingAnchor.constraint(equalTo: view.safeAreaLayoutGuide.trailingAnchor, constant: -20).isActive = true
    textView.topAnchor.constraint(equalTo: view.safeAreaLayoutGuide.topAnchor, constant: 20).isActive = true
    textView.bottomAnchor.constraint(equalTo: view.safeAreaLayoutGuide.bottomAnchor, constant: -40).isActive = true

    let dropCap = UILabel()
    dropCap.text = "D"
    dropCap.font = UIFont.boldSystemFont(ofSize: 60)
    dropCap.backgroundColor = .lightText
    dropCap.sizeToFit()
    textView.addSubview(dropCap)

    textView.textContainer.exclusionPaths = [UIBezierPath(rect: dropCap.frame)]
  }
} 
```

结果：

![文字环绕首字母大写](../Images/22e5237941724ff661079c9ce348585a.png)

[github上的完整示例](https://github.com/teameh/SwiftCodeSamples)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-25T11:31:58.480

不，这不能仅通过`NSAttributedString`标准字符串绘图来完成。

由于首字下沉是段落的属性，`CTParagraphStyle`因此必须包含有关首字下沉的信息。`CTParagraphStyle`影响段落开头缩进的唯一属性是`kCTParagraphStyleSpecifierFirstLineHeadIndent`，但这仅影响第一行。

只是没有办法告诉`CTFramesetter`如何计算第二行和更多行的开始。

唯一的方法是定义您自己的属性并编写代码以使用`CTFramesetter`并`CTTypesetter`确认此自定义属性来绘制字符串。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-25T10:48:36.017

这不是一个完美的解决方案，但您应该尝试[DTCoreText](https://github.com/Cocoanetics/DTCoreText)并将您的法线渲染`NSString`为`formatted HTML`. 在 HTML 中，可以“首字母大写”一个字母。

# nhibernate - NHibernate.MappingException：无法编译映射文档

> ID：14214902
> 
> 赞同：6
> 
> 时间：2013-01-08T12:25:06.700
> 
> 标签：nhibernate, c#-4.0, .net-4.0, nhibernate-mapping

我是NHibernate的新手。我正在尝试将此 ORM 与 SQLite 一起使用。我有以下内容： ![项目](../Images/b9dbb2f0c7e059b2abe1244818dfec7d.png)

**产品.cs**

```
namespace Stock.Models.Classes
{
    class Product
    {
        public virtual string Name {get; set;}
        public virtual int Id { get; set; }
        public virtual decimal Price { get; set; }
        public virtual decimal Quantity { get; set; }
    }
} 
```

**产品.hbm.xml**

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                  assembly="Stock.Models"
                  namespace="Stock.Models.Classes">
  <class name="Product" table="products">
    <id name="Id">
      <generator class="int" />
    </id>
    <property name="Name" />
    <property name="Price" />
    <property name="Quantity" />
  </class>
</hibernate-mapping> 
```

**休眠.cfg.xml**

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
  <session-factory>
    <property name="connection.provider">NHibernate.Connection.DriverConnectionProvider</property>
    <property name="connection.driver_class">NHibernate.Driver.SQLite20Driver</property>
    <property name="connection.connection_string">Data Source=nhibernate.db;Version=3</property>
    <property name="dialect">NHibernate.Dialect.SQLiteDialect</property>
    <property name="query.substitutions">true=1;false=0</property>
    <property name="proxyfactory.factory_class">NHibernate.ByteCode.Castle.ProxyFactoryFactory, NHibernate.ByteCode.Castle</property>
    <property name="show_sql">true</property>
  </session-factory>
</hibernate-configuration> 
```

我正在尝试在 Program.cs 中进行测试。 **程序.cs**

```
namespace Stock
{
    static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            //Application.Run(new Form1());
            var cfg = new Configuration();
            cfg.Configure();
                cfg.AddAssembly(typeof(Product).Assembly);
        }
    }
} 
```

在运行时，应用程序会在`cfg.AddAssembly(typeof(Product).Assembly);`弹出窗口`Could not compile the mapping document: Stock.Models.Mappings.Product.hbm.xml`和控制台中显示消息：

```
The thread 'vshost.LoadReference' (0x10a8) has exited with code 0 (0x0).
'Stock.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\...\Projects\WindowsFormsApplication1\WindowsFormsApplication1\bin\Debug\Stock.exe', Symbols loaded.
'Stock.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\...\Projects\WindowsFormsApplication1\WindowsFormsApplication1\bin\Debug\NHibernate.dll'
'Stock.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Configuration\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Configuration.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'Stock.vshost.exe' (Managed (v4.0.30319)): Loaded 'jsw3tdap'
'Stock.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\...\Projects\WindowsFormsApplication1\WindowsFormsApplication1\bin\Debug\Iesi.Collections.dll'
A first chance exception of type 'NHibernate.MappingException' occurred in NHibernate.dll 
```

**如果我在Program.cs**添加一个 try/catch ：

```
 try
    {
        cfg.AddAssembly(typeof(Product).Assembly);
    }
 catch (Exception e) { Console.WriteLine(e); } 
```

我得到（控制台）：

```
A first chance exception of type 'NHibernate.MappingException' occurred in NHibernate.dll
NHibernate.MappingException: Could not compile the mapping document: Stock.Models.Mappings.Product.hbm.xml ---> NHibernate.MappingException: persistent class Stock.Models.Classes.Product, Stock.Models not found ---> System.IO.FileNotFoundException: Could not load file or assembly 'Stock.Models' or one of its dependencies. El sistema no puede encontrar el archivo especificado.
   at System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
   at System.Reflection.RuntimeAssembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
   at System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection, Boolean suppressSecurityChecks)
   at System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection)
   at System.Reflection.Assembly.Load(String assemblyString)
   at NHibernate.Util.ReflectHelper.TypeFromAssembly(AssemblyQualifiedTypeName name, Boolean throwOnError)
   at NHibernate.Util.ReflectHelper.ClassForName(String name)
   at NHibernate.Cfg.XmlHbmBinding.Binder.ClassForFullNameChecked(String fullName, String errorMessage)
   --- End of inner exception stack trace ---
   at NHibernate.Cfg.XmlHbmBinding.Binder.ClassForFullNameChecked(String fullName, String errorMessage)
   at NHibernate.Cfg.XmlHbmBinding.Binder.ClassForNameChecked(String name, Mappings mappings, String errorMessage)
   at NHibernate.Cfg.XmlHbmBinding.ClassBinder.BindClass(IEntityMapping classMapping, PersistentClass model, IDictionary`2 inheritedMetas)
   at NHibernate.Cfg.XmlHbmBinding.RootClassBinder.Bind(HbmClass classSchema, IDictionary`2 inheritedMetas)
   at NHibernate.Cfg.XmlHbmBinding.MappingRootBinder.AddRootClasses(HbmClass rootClass, IDictionary`2 inheritedMetas)
   at NHibernate.Cfg.XmlHbmBinding.MappingRootBinder.AddEntitiesMappings(HbmMapping mappingSchema, IDictionary`2 inheritedMetas)
   at NHibernate.Cfg.XmlHbmBinding.MappingRootBinder.Bind(HbmMapping mappingSchema)
   at NHibernate.Cfg.Configuration.AddDeserializedMapping(HbmMapping mappingDocument, String documentFileName)
   --- End of inner exception stack trace ---
   at NHibernate.Cfg.Configuration.LogAndThrow(Exception exception)
   at NHibernate.Cfg.Configuration.AddDeserializedMapping(HbmMapping mappingDocument, String documentFileName)
   at NHibernate.Cfg.Configuration.AddValidatedDocument(NamedXmlDocument doc)
   at NHibernate.Cfg.Configuration.ProcessMappingsQueue()
   at NHibernate.Cfg.Configuration.AddDocumentThroughQueue(NamedXmlDocument document)
   at NHibernate.Cfg.Configuration.AddXmlReader(XmlReaThe thread 'vshost.RunParkingWindow' (0x1700) has exited with code 0 (0x0).
The thread '<No Name>' (0x5d4) has exited with code 0 (0x0).
The program '[4428] Stock.vshost.exe: Managed (v4.0.30319)' has exited with code 0 (0x0).
The program '[4428] Stock.vshost.exe: Program Trace' has exited with code 0 (0x0).
der hbmReader, String name)
   at NHibernate.Cfg.Configuration.AddInputStream(Stream xmlInputStream, String name)
   at NHibernate.Cfg.Configuration.AddResource(String path, Assembly assembly)
   at NHibernate.Cfg.Configuration.AddAssembly(Assembly assembly)
   at Stock.Program.Main() in C:\Users\Cristhian\documents\visual studio 2010\Projects\WindowsFormsApplication1\WindowsFormsApplication1\Program.cs:line 25 
```

XML 文件设置为`Embedded Resource`和`Copy Always`。为什么不编译映射文件Stock.Models.Mappings.Product.hbm.xml？是文件格式问题还是库dll问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-08T12:28:22.983

好吧，该`Stock.Models`程序集不存在。唯一存在的程序集是`Stock`，因此您需要相应地更改映射文件：

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                  assembly="Stock"
                  namespace="Stock.Models.Classes"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-13T11:35:40.843

尽管我的映射文件是正确的，但我得到了同样的错误。

结果发现文件夹中不存在更新的程序集`C:\inetpub\wwwroot\wss\VirtualDirectories\<port>\bin`。当我手动复制它们时，它起作用了。

我没有解释为什么他们还没有被复制，或者即使他们应该被复制，我只是发布这个作为答案，因为它解决了我的问题，我还没有看到它记录在其他任何地方在线.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-26T15:53:31.357

您应该在 hbm.xml file.for 中添加程序集和命名空间，以查找 typeof(yourModel).Assembly 使用的程序集名称并检查 fullName。程序集和类的名称不相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-04T23:26:16.730

我有同样的问题。它在“程序集”和“命名空间”中。我为解决它所做的就是在您的示例中将两者命名为“Stock”。

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                  assembly="Stock"
                  namespace="Stock"> 
```

# iphone - Facebook SDK 在弹出视图中更改为登录

> ID：14214903
> 
> 赞同：4
> 
> 时间：2013-01-08T12:25:07.873
> 
> 标签：iphone, ios, xcode, facebook

我正在尝试使用 Facebook 登录我的应用程序。因此我已经安装了`Facebook SDK`。现在的问题是我正在尝试从 SDK 的 SAMPLEs 代码开始，即。`SessionLoginSample`问题是，登录它需要我`SAFARI`输入凭据。是否可以像 PopUP View 一样打开登录页面（图 2）...

![输入图片](../Images/3a1d527a7e8178151d2b08ba5689fe91.png) ![输入](../Images/377f62fbad967aa0a9e11c86b6af2753.png) 图 1 直接来了（SAFARI）..打开它需要什么更改（图 2）弹出。

```
 - (IBAction)buttonClickHandler:(id)sender {

SLAppDelegate *appDelegate = [[UIApplication sharedApplication]delegate];

if (appDelegate.session.isOpen) {

    [appDelegate.session closeAndClearTokenInformation];

} else {
    if (appDelegate.session.state != FBSessionStateCreated) {

        appDelegate.session = [[FBSession alloc] init];
    }

    [appDelegate.session openWithCompletionHandler:^(FBSession *session, 
                                                     FBSessionState status, 
                                                     NSError *error) {
        // and here we make sure to update our UX according to the new session state
        [self updateView];
    }];
} 
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:53:19.747

使用 FBConnect 看这个下面的教程......

[iPhone-fbconnect-facebook-connect 教程](http://www.mobisoftinfotech.com/blog/iphone/iphone-fbconnect-facebook-connect-tutorial/)

请参阅下面的登录对话框...

![在此处输入图像描述](../Images/a2914503bee1ca027f6575623d90a98b.png)

只需按照说明创建您的 id 并使用它..

相同，但另一个示例教程参见...

[这](http://viksiphoneblog.blogspot.in/2010/10/iphone-fbconnect-facebook-connect.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:31:12.823

尝试使用 UIWebView。以下链接可能会有所帮助。

[http://www.raywenderlich.com/1488/how-to-use-facebooks-new-graph-api-from-your-iphone-app](http://www.raywenderlich.com/1488/how-to-use-facebooks-new-graph-api-from-your-iphone-app)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-10T09:13:59.967

您可以将其用于您的会话：

```
FBSession setActiveSession:[[FBSession alloc]initWithAppID:nil permissions:@[@"email", @"user_friends"] urlSchemeSuffix:@"foo" tokenCacheStrategy:nil]]; 
```

更多信息：[开发者 Facebook](https://developers.facebook.com/docs/ios/troubleshooting)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-18T11:15:45.597

在文件 info.plist 中的 XCode 项目中，使用键“FacebookUrlSchemeSuffix”和字符串值查找或创建行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-02T12:03:06.950

试试这个它对我来说很好::

```
loginView.loginBehavior=FBSessionLoginBehaviorForcingWebView; 
```

这里 loginView 是我的 FBLoginView。这是你右侧的屏幕截图。

对于屏幕截图 1，请使用以下代码：

```
loginView.loginBehavior=FBSessionLoginBehaviorForcingSafari; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-10T02:36:49.023

```
 let loginView : FBSDKLoginButton = FBSDKLoginButton()

  loginView.loginBehavior = FBSDKLoginBehavior.Web 
```

它对我有用，这是 FBSDKLoginManager 类中的源代码：

```
public enum FBSDKLoginBehavior : UInt {

/*!
 @abstract Attempts log in through the native Facebook app. If the Facebook app is
 not installed on the device, falls back to \c FBSDKLoginBehaviorBrowser. This is the
 default behavior.
 */
case Native
/*!
 @abstract Attempts log in through the Safari browser
 */
case Browser
/*!
 @abstract Attempts log in through the Facebook account currently signed in through Settings.
 If no Facebook account is signed in, falls back to \c FBSDKLoginBehaviorNative.
 */
case SystemAccount
/*!
   @abstract Attemps log in through a modal \c UIWebView pop up

   @note This behavior is only available to certain types of apps. Please check the Facebook
   Platform Policy to verify your app meets the restrictions.
   */
case Web 
```

}

# png - 使用 Alpha 通道打开的 PNG 文件

> ID：14214906
> 
> 赞同：3
> 
> 时间：2013-01-08T12:25:12.440
> 
> 标签：png

我必须编辑客户提供的图像。问题是，当我使用 Adob​​e Photoshop、Gimp 或 Corel Draw 打开它时，它会打开错误。图像本身似乎使用 alpha 通道，但我在 Photoshop 中看不到它。而不是那个阴影看起来很差，当我保存它时，问题仍然存在。请看一下图像和 Photoshop 屏幕截图。请告诉我我应该尝试（windows 或 linux）正确打开、编辑和保存它的工具或技巧。

![在此处输入图像描述](../Images/cc2f694c59b3a1a78433c39d2570f88d.png)

![在此处输入图像描述](../Images/ddbd34027903be73bc66e938519b1878.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:36:59.717

这是 Photoshop 中的一个错误，已在 CS6 中修复。

你有[带 alpha 的 PNG-8](http://calendar.perfplanet.com/2010/png-that-works/#8bit+alpha)，Photoshop CS5 无法读取，没有版本可以写入。

要解决此问题，请在完全支持 PNG 的应用程序中打开文件（在 Mac 上可以是 Preview.app）并重新保存。

# c# - 如何使用 Prism 和 Unity 显示视图的多个实例

> ID：14214911
> 
> 赞同：2
> 
> 时间：2013-01-08T12:25:38.357
> 
> 标签：c#, .net, wpf, prism, unity-container

我正在开发一个使用 WPF、Unity 和 Prism 4 的 .Net 应用程序。该应用程序将包含一个在选项卡页上具有多个视图的 shell。该应用程序严重依赖名为 SystemTreeModule 的模块，该模块包含`SystemTreeView`将出现在许多地方的模块。

我刚刚完成了我的第一个视图，其中我定义了一个名为“SystemTreeRegion”的区域。在 SystemTreeModule 中，我`SystemTreeView`在该区域注册了我的实例。奇迹般有效！该`SystemTreeView`类型是使用 Unity 的自动发现功能发现的（因此它没有显式注册）：

```
public void Initialize()
{
    _regionManager.RegisterViewWithRegion("SystemTreeRegion", () => _container.Resolve<SystemTreeView>());
} 
```

现在是时候开始我要使用`SystemTreeView`. 当我在新视图中创建一个名为“SystemTreeRegion”的区域时，我感到非常自信，但它失败了，出现以下异常：

> 创建名为“SystemTreeRegion”的区域时发生异常。例外是：System.ArgumentException：具有给定名称的区域已注册：SystemTreeRegion

所以我用谷歌搜索并搜索了 StackOverflow 的答案，但我无法弄清楚你应该如何做到这一点！

我什至无法判断我是否只是遗漏了一些细节，或者我是否在概念上偏离了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:37:40.873

从概念上讲，您并不遥远。通过模块提供视图是完全可以的。但请记住，您的应用程序中只能有一个名为“SystemTreeRegion”的视图，否则 Prism 的区域管理器将不知道您要访问哪个视图。

考虑到这一点 - 如果您尝试将视图注册到区域名称并希望该视图将出现在带有该名称的每个区域中，那么您在概念上是错误的。您只能将视图注册到区域。

因此，只需确保每个区域都有自己唯一的名称，然后注册该区域所需的视图，就可以了。

# asp.net - 是否可以使用 Web 服务而不是 WCF 将客户端图像保存在服务器上？

> ID：14214912
> 
> 赞同：0
> 
> 时间：2013-01-08T12:25:42.283
> 
> 标签：asp.net, wcf, web-services, silverlight-5.0

我正在做银光应用。我需要保存`client Images`。`server folder`为此，我正在使用`WCF Service`它，它工作正常。

```
But what I required is instead of `WCF`. can use Web services ?. 
```

如果有人知道，请给我建议。谢谢提前..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:35:02.553

您可以通过以 bytearray 作为参数的 Web 服务函数将图像作为字节数组发送。

[http://www.codeproject.com/Questions/163276/upload-image-to-web-service-using-c](http://www.codeproject.com/Questions/163276/upload-image-to-web-service-using-c)

# java - 在播放框架 2.0 中使用 jquery

> ID：14214913
> 
> 赞同：4
> 
> 时间：2013-01-08T12:25:43.360
> 
> 标签：java, jquery, playframework-2.0

我想使用 jQuery 打开一个灯箱，但它导致了问题。这是我的**Application.java**代码：

```
 @(products: List[Products])

    @import helper._

        <script type="text/javascript" src="../public/javascripts/jquery-1.7.2.min.js"></script>
        <!-- Add mousewheel plugin (this is optional) -->
        <script type="text/javascript" src="../public/javascripts/jquery.mousewheel-3.0.6.pack.js"></script>

        <!-- Add fancyBox main JS and CSS files -->
        <script type="text/javascript" src="../public/javascripts/jquery.fancybox.js?v=2.0.6"></script>
        <link rel="stylesheet" type="text/css" href="../public/stylesheets/jquery.fancybox.css?v=2.0.6" media="screen" />

        <script type="text/javascript">
        $(document).ready(function() {

$('.fancybox').fancybox();

// my code
           });
// rest of the code 
```

它给了我错误

**ReferenceError: $ is not defined**在萤火虫中显示。我什至尝试使用 jQuery 更改 $ ，但它仍然无法正常工作。我还看到 jQuery 被加载到 head 部分。请帮我解决这个问题。

conf/路由文件：

```
# Routes
# This file defines all application routes (Higher priority routes first)
# ~~~~

# Home page
#GET     /                           controllers.Application.index()

# Map static resources from the /public folder to the /assets URL path
GET     /assets/*file               controllers.Assets.at(path="/public", file)

# Products list (to fetch the list of all the products)
GET     /products                controllers.Application.list

GET     /products/:id           controllers.Application.findAll1(id:Integer) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T12:28:34.497

我认为你的 JS 路径是错误的。

如果您使用默认的 Play 配置，您的 Javascript 路径应如下所示：

```
<script type="text/javascript" src="/assets/javascripts/jquery-1.7.2.min.js"></script>
... 
```

更好的是，使用反向路由，您应该使用：

```
<script type="text/javascript" src="@routes.Assets.at("/javascripts/jquery-1.7.2.min.js")"></script>
... 
```

静态资产是通过`conf/routes`文件中定义的特殊路径提供的：

```
# Map static resources from the /public folder to the /assets URL path
GET     /assets/*file               controllers.Assets.at(path="/public", file) 
```

此路由只是在您的本地`public`文件夹和`/assets`URL 之间进行绑定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-11T02:16:13.880

这是引用资产的新方法：

```
@routes.Assets.versioned("javascripts/jquery-3.1.1.js") 
```

更多信息： [https ://www.playframework.com/documentation/2.5.x/Assets](https://www.playframework.com/documentation/2.5.x/Assets)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-16T07:23:06.870

这是在播放框架中使用 ajax 的 Jquery 的简单示例...配置 Route 1st

# 路线

# 此文件定义所有应用程序路由（优先级较高的路由）

# ~~~~

# 主页 GET / controllers.Application.index GET /newUser controllers.Application.newUserSign GET /login

controllers.Application.signInUser GET /newUserSignUP
controllers.Application.newUserSignUP1 POST /newUserSignUP
controllers.Application.newUserSignUP POST /signIn
controllers.Application.signIn POST /userDetail
controllers.Application.userDetail GET /logout
controllers.Application.logout POST /sendRequest
控制器。 Application.sendRequest POST /friendDetail
controllers.Application.friendList POST /requestList
controllers.Application.requestList POST /acceptRequest
controllers.Application.acceptRequest GET /shwUserDetail controllers.Application.shwUserDetail

应用程序如下

包控制器

import models.User import play.api._ import play.api.mvc._ import net.liftweb.json._ import net.liftweb.json.JsonDSL import net.liftweb.json.Serialization.write import

> scala.collection.mutable.ListBuffer
> 
> 对象应用程序扩展控制器 { 隐式 val 格式 = DefaultFormats def index = Action { Ok(views.html.index()) } def newUserSign = Action { Ok(views.html.newUserSignUpForm()) } def newUserSignUP = Action { 隐式请求 = > val a = request.body.asFormUrlEncoded val id = a.get("id").head val fnm = a.get("fnm").head val lnm = a.get("lnm").head val email = a.get("email").head val res = a.get("res").head val num = a.get("num").head val pwd = a.get("pwd").head
> 
> ```
> val obj = User(id, fnm, lnm, email, res, num, pwd);
> if (models.UserModel.create(obj) > 0) {
>   Ok(views.html.newUserWlcmPage())
> } else {
>   Ok(views.html.Error())
> }
> 
> //Ok(" congratulation u r finally registered.. your  id is " + id + "  & your name is => " + fnm + " And you lives in ::" + res)   }   def newUserSignUP1 = Action {
> Ok(views.html.newUserWlcmPage())   }
> def signIn = Action { implicit request =>
> val a = request.body.asFormUrlEncoded
> val id = a.get("id").head
> val pwd = a.get("pwd").head
> val data = models.UserModel.userDetail(id, pwd) 
> ```
> 
> 重定向(routes.Application.shwUserDetail).withSession("id" -> id)
> 
> // 好的(views.html.userInfoPage(data)).withSession("id" -> id) }
> 
> def signInUser = Action { Ok(views.html.login()) } def shwUserDetail = Action { 隐式请求 => val id = request.session.get("id").get val usrDetail = models.UserModel.userDetail(id ) Ok(views.html.userInfoPage(usrDetail)) } def userDetail = Action { 隐式请求 => val b = request.body.asFormUrlEncoded if (!session.get("id").isEmpty) { val id = session. get("id").get //val 密码 = b.get("pwd").head
> 
> ```
>  val data = models.UserModel.getAllUserDetail(id)
>   Ok(write(data))
> } else {
>   Ok("")
> }   }   def sendRequest = Action { implicit request =>
> val b = request.body.asFormUrlEncoded.get
> val receiver_id = b.get("receiver_id").get(0)
> val sender_id = request.session.get("id").get
> val data = models.UserModel.friendRequest(sender_id, receiver_id)
> Ok(write(Map("sucess"->true)))   }   def logout() = Action {
> println("You are successfully logout")
> Ok(views.html.logout()).withNewSession   }   def friendList = Action { implicit request =>   val b = request.body.asFormUrlEncoded 
> ```
> 
> val sender_id = request.session.get("id").get val data = models.UserModel.friendList(sender_id)
> 
> ```
> Ok(views.html.requestConfirmation()) 
> ```
> 
> } def requestList = Action { 隐式请求 => val sender_id = request.session.get("id").get val data = models.UserModel.requestList(sender_id) Ok(write(data))
> 
> ```
>  }
> def acceptRequest = Action { implicit request =>
> val b = request.body.asFormUrlEncoded.get
> val friend_id = b.get("friend_id").get(0)
> val user_id = request.session.get("id").get
> val data = models.UserModel.acceptRequest(friend_id, user_id)
> Ok(write(Map("sucess"->true)))   }    } 
> ```
> 
> 痣就像
> 
> 包模型 import play.api.db._ import play.api.Play.current
> 
> 导入 anorm._ 导入 anorm.SqlParser._
> 
> case class User(id: String, fnm: String,lnm: String, email: String, res: String,num: String, pwd: String) case class User1(sender_id:String, receiver_id:String) object UserModel {
> 
> def 创建（obj：用户）= {
> 
> ```
> DB.withConnection { implicit Connection =>
> 
>   val data = SQL("insert into user_detail values({id},{fnm},{lnm},{email},{res},{num},{pwd})").on("id" -> 
> ```
> 
> obj.id，“fnm”-> obj.fnm，“lnm”-> obj.lnm，“email”-> obj.email，“res”-> obj.res，“num”-> obj.num，“密码”-> obj.pwd).executeUpdate()
> 
> ```
>  data
> }   }   def userDetail(id: String, pwd: String): List[User] = {
> DB.withConnection { implicit Connection =>
>   val dat = SQL("select * from user_detail where id='" + id + "' and pwd='" + pwd +"'")
>   var data = dat().map(row =>
>     User(row[String]("id"),row[String]("fnm"), row[String]("lnm"), row[String]("email"),row[String]("res"),row[String]("num"),row[String]("pwd"))).toList
>   data
> }   }   def userDetail(id: String): List[User] = {
> DB.withConnection { implicit Connection =>
>   val dat = SQL("select * from user_detail where id='" + id + "'")
>   var data = dat().map(row =>
>     User(row[String]("id"),row[String]("fnm"), row[String]("lnm"), row[String]("email"),row[String]("res"),row[String]("num"),row[String]("pwd"))).toList
>   data
> }   }   def friendRequest(sender_id:String,receiver_id:String)={
> DB.withConnection{ implicit c=>
>   val result=SQL("insert into request_table values ({sender_id},{receiver_id})").on("sender_id"->sender_id,"receiver_id"->receiver_id).executeInsert()
>   println("------------------------------------\n"+result);     
>   result
> }
>   }   def getAllUserDetail(id: String) = {
> DB.withConnection { implicit Connection =>
> val dat = SQL("select * from user_detail where id!='" + id +"'")
> var data = dat().map(row =>
>  User(row[String]("id"),row[String]("fnm"), row[String]("lnm"), row[String]("email"),row[String]("res"),row[String]("num"),row[String]("pwd"))).toList
> data
> }    }
>  def friendList(user_id: String) = {
> DB.withConnection { implicit Connection =>
> val dat = SQL("select * from friend_tbl where id!='" + user_id +"'")
> var data = dat().map(row =>
>  User(row[String]("id"),row[String]("fnm"), row[String]("lnm"), row[String]("email"),row[String]("res"),row[String]("num"),row[String]("pwd"))).toList
> data
> }    }   def requestList(sender_id: String) = {
> DB.withConnection { implicit Connection =>
> val dat = SQL("select receiver_id from request_table where sender_id='" + sender_id +"'")
> var data = dat().map(row =>
>  row[String]("receiver_id")).toList
>  data
> }    }   def acceptRequest(friend_id:String, user_id:String)={
> DB.withConnection{ implicit c= 
> ```
> 
> > 块引用
> 
> ```
>  val result=SQL("insert into friend_tbl values ({friend_id},{user_id})").on("friend_id"->friend_id,"user_id"->user_id).executeInsert()
>   println("------------------------------------\n"+result);     
>   result
> }
>   } } 
> ```
> 
> 然后配置查看页面`enter code here`
> 
> # 将 /public 文件夹中的静态资源映射到 /assets URL 路径 GET /assets/*file controllers.Assets.at(path="/public", file)

# android - 谷歌网络字体加载器无法在默认的安卓浏览器上运行

> ID：14214915
> 
> 赞同：3
> 
> 时间：2013-01-08T12:25:45.357
> 
> 标签：android, css, google-webfonts

我正在[为客户创建一个基本站点](http://balmainplumber.net.au/)。我正在使用漂亮的[Slabtext](http://www.frequency-decoder.com/demo/slabText/)来制作响应式标题。

我正在使用 Google 的[网络字体加载器](https://developers.google.com/webfonts/docs/webfont_loader)加载 League Gothic 字体（由 Slabtext 的创建者使用） 。一切都很好，我可以在使用回调加载字体*后触发slabtext启动。*`.active()`

```
$(function() {
    WebFont.load({
     custom: {
                families: ['League Gothic'], // font-family name
                urls : ['/templates/joomstrap/css/webfonts/stylesheet.css'] 
      },
      active: function() {
                jQuery('.do-slab-text').slabText();
            }
        });
    }); 
```

不幸的是，这似乎不适用于 Android 的默认浏览器。它适用于 Android 上的 Chrome。它也可以在 iOS 上完美运行。以及所有桌面浏览器。

# c# - 如何检查文本框中的文本？

> ID：14214917
> 
> 赞同：0
> 
> 时间：2013-01-08T12:25:51.273
> 
> 标签：c#

我正在尝试制作一个 VideoClub 应用程序。我有一个名为 的文本框`txtMovieDuration`，我想在其中输入电影时长 ofc。
我所做的是，我允许用户以这种格式（hh：mm：ss）只写数字。点会自动出现。但是，有这个问题，逻辑上 ss（秒）和 mm（分钟）不能大于`59`（因为它们只从 0 到 59）。如何检查秒和分钟`< 60`？

```
private void txtMovieDuration_TextChanged(object sender, EventArgs e)  
        {  
            txtMovieDuration.MaxLength = 8;

            if (txtMovieDuration.Text.Length == 2)
            {
                txtMovieDuration.Text += ":";
            }

            if (txtMovieDuration.Text.Length == 5)
            {
                txtMovieDuration.Text += ":";
            }

            txtMovieDuration.SelectionStart = txtMovieDuration.Text.Length;
         } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T12:31:20.300

您可以使用[`TimeSpan.TryParse`](http://msdn.microsoft.com/en-us/library/3z48198e.aspx)来验证用户输入：

```
TimeSpan duration;
if (!TimeSpan.TryParse(txtMovieDuration.Text, out duration))
{
    MessageBox.Show("Please use correct format 'hh:mm:ss'!)");
} 
```

您应该考虑使用[SWeko](https://stackoverflow.com/a/14215014/284240)提到的可选[`DateTimePicker`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.aspx)控件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T12:31:08.640

简短回答：使用[DateTimePicker](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.aspx)控件，其格式属性设置为时间。

但是，如果您无法使用文本框，您可以

*   使用正则表达式检查格式（如@David Aleu 的回答）
*   在分隔符 ( ) 上拆分字符串`:`并手动验证这些部分，例如：

    ```
    string[] parts = txtMovieDuration.Text.Split(':');
    if (parts.Length !=3) //there must be a hh:mi:ss parts
    {
       MessageBox.Show("invalid time string");
       return;
    }
    int hours;
    if (int.TryParse(parts[0], out hours))
    {
       MessageBox.Show("the hours part is not a number");
       return;
    }
    //if you want to check the value of hours as sensible you could do it here
    //as there are very few movies longer than 10 hours
    int minutes;
    if (int.TryParse(parts[1], out minutes))
    {
       MessageBox.Show("the minutes part is not a number");
       return;
    }
    if ((minutes < 0) || (minutes > 59)
    {
       MessageBox.Show("the minutes part is out of range");
       return;
    }

    int seconds;
    if (int.TryParse(parts[2], out seconds))
    {
       MessageBox.Show("the seconds part is not a number");
       return;
    }
    if ((seconds < 0) || (seconds > 59)
    {
       MessageBox.Show("the seconds part is out of range");
       return;
    }
    //you can now make a TimeSpan object for the duration
    TimeSpan duration = new TimeSpan(hours, minutes, seconds); 
    ```

    您也可以不检查小时/分钟/秒变量的范围，但（ab）使用`TimeSpan`构造函数的功能。由于这些值只是转换为刻度，并且刻度用于初始化`TimeSpan`，因此这样做是合法的`new TimeSpan(1000,2000,3000)`。它将创建 1000 小时、2000 分钟（又名 33 小时 20 分钟）和 3000 秒（又名 50 分钟）的时间跨度，从而产生 43 天 2 小时 10 分钟的时间跨度。这一切都意味着你可以这样做：

    ```
    TimeSpan duration = new TimeSpan(hours, minutes, seconds);
    if ((duration .Hours != hours)
         || (duration .Minutes != minutes) 
         || (duration .Seconds != seconds))
    {
       MessageBox.Show("the seconds part is out of range");
       return;
    } 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T12:28:54.040

如果你这样做呢？

```
public bool ValidateTime(string time)
{
     Regex regExp = new Regex(@"(([0-1][0-9])|([2][0-3])):([0-5][0-9]):([0-5][0-9])");

     return regExp.IsMatch(time);
} 
```

[在这里找到](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/b7fa0fa0-3f74-4fe0-b3c8-43ac646da63d)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T12:30:51.260

您可以从文本框中读取字符串值并将其转换为 Int 或您使用的任何数据类型。更多关于转换的帮助可以在[这里找到](http://msdn.microsoft.com/en-us/library/bb397679.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T13:10:37.550

您可以将 a`MaskedTextBox`与掩码一起使用，`00:00:00`而不是使用法线`TextBox`，它会自动添加`:`s 并且只允许输入数字。

要检查它的值是否是有效的时间跨度值，请将其设置`ValidatingType`为`TimeSpan`。

```
this.maskedTextBox1.ValidatingType = typeof(TimeSpan); 
```

然后您可以侦听该`MaskedTextBox.TypeValidationCompleted`事件并使用它`e.IsValidInput`来确定用户是否输入了正确的时间跨度值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T12:37:02.797

创建秒的子字符串。

```
String sub = txtMovieDuration.Text.Substring(6);
if(Convert.ToInt32(sub) < 60)
//Do something here 
```

做同样的几分钟或一起做。例如：

```
if(Convert.ToInt32(txtMovieDuration.Text.Substring(3,2)) && Convert.ToInt32(txtMovieDuration.Text.Substring(6)) > 60)
{ 
   //Error handling code

} 
```

注意：我假设 : 是字符串的一部分。如果没有，只需更改子字符串的开始和结束值。

# ruby-on-rails - 收到带有意外参数的 :update_attributes

> ID：14214918
> 
> 赞同：2
> 
> 时间：2013-01-08T12:25:54.050
> 
> 标签：ruby-on-rails, rspec, mongoid, factory-bot

我对 rspec 和工厂女孩很陌生，我遇到了一个奇怪的问题。我在控制器中有一个动作，例如：

```
 def update
      @property = current_user.properties.find params[:fee][:property_id]
      @fee = @property.fees.find(params[:id])
     if @fee.update_attributes(params[:fee])
       redirect_to fee_path(:prop=>@property), :notice => "fee updated successfully!"
     else
       render action: "edit"
     end
   end 
```

和一个测试示例：

```
 describe "with valid params" do
      before do
        @property = FactoryGirl.create(:property)
        @property.users << subject.current_user
      end
      it "updates the requested fee" do
        fee = @property.fees.create! valid_attributes
        Fee.any_instance.should_receive(:update_attributes).with({ "name" => "MyString","property_id"=>@property.id})
        put :update, {:id => fee.to_param, :fee => { "name" => "MyString","property_id"=>@property.id }}, valid_session
      end
    end 
```

但我收到一个奇怪的错误：

```
 #<Fee:0xb8c4884> received :update_attributes with unexpected arguments
     expected: ({"name"=>"MyString", "property_id"=>"50ec0b3fa7c320ee53000002"})
          got: ({"name"=>"MyString", "property_id"=>"50ec0b3fa7c320ee53000002"}) 
```

如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T03:31:27.493

所以我可以看到一些原因，但我最好的选择是，尝试将哈希冻结在一个单独的 var 中，看看它是否有效，如下所示：

```
 describe "with valid params" do

      let(:property) { FactoryGirl.create(:property) }

      let(:params) do
        {"name" => "MyString","property_id"=> property.id}
      end

      before do
        property.users << subject.current_user
      end

      it "updates the requested fee" do
        fee = property.fees.create! valid_attributes
        Fee.any_instance.should_receive(:update_attributes).with(params)
        put :update, {:id => fee.to_param, :fee => params}, valid_session
      end
    end 
```

# c++ - MSVC 11 支持 std::thread 吗？

> ID：14214921
> 
> 赞同：4
> 
> 时间：2013-01-08T12:26:26.607
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, std

我想实现一个跨平台多线程程序并通过 std::thread 类读取 std 确实支持多线程，但我不确定 MSVC 11 是否在此页面上支持它 [http://blogs.msdn.com/b/vcblog/存档/2011/09/12/10209291.aspx](http://blogs.msdn.com/b/vcblog/archive/2011/09/12/10209291.aspx)

它说关于并发内存模型

> 内存模型：N2429 使核心语言认识到多线程的存在，但编译器实现似乎无事可做（至少，已经支持多线程的编译器）。所以它在表中是 N/A

但同时线程头确实包含在 Visual Studio 2012 中

所以任何人都可以帮助我了解 MSVC11 中支持的 std::thread 上下文是什么

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T19:21:49.757

> 它说关于并发内存模型

“并发内存模型”*不是* `std::thread`. 并发内存模型是标准中的语言，用于解释变量在存在线程时的行为方式。*任何*线程，无论它们来自`std::thread`操作系统线程还是其他线程。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T12:27:51.317

它基本上说的是 MSVC 之前已经支持线程，所以除了添加标准包装器之外别无他法。所以用起来还是蛮不错的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T12:46:40.333

是的，但有已知的错误：
[http ://www.justsoftwaresolutions.co.uk/news/just-thread-v1.8.0-released.html](http://www.justsoftwaresolutions.co.uk/news/just-thread-v1.8.0-released.html)

# amazon-web-services - Amazon RDS 是否支持 EBS 以外的其他存储类型？

> ID：14214924
> 
> 赞同：0
> 
> 时间：2013-01-08T12:26:29.550
> 
> 标签：amazon-web-services, amazon-rds

在 RDS 常见问题解答中说，“Amazon RDS 使用 EBS 卷进行数据库和日志存储”。有没有办法让 RDS 将其数据存储在另一种存储上？我之所以这么问，是因为 EBS 以速度慢着称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:10:49.027

将数据库与临时存储一起使用没有多大意义，因为丢失您的实例将意味着丢失您的数据。因此，优选使用耐久性更好的EBS。

您可以为您的 EBS 使用预置 IOPS，并将多个 EBS 上的 RAID0 与“EBS 优化”实例上的 P-IOPS 相结合，您可以获得高达 10,000 的 IOPS，这对于大多数数据库应用程序来说已经足够了。在此处查看有关 RDS 中预置 IOPS 的更多信息：http: [//docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Overview.ProvisionedIOPS.html](http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Overview.ProvisionedIOPS.html)

在此处查看如何提高 EBS 的性能：http: [//docs.amazonwebservices.com/AWSEC2/latest/UserGuide/EBSPerformance.html](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/EBSPerformance.html)

# python - 自定义 admin.py

> ID：14214928
> 
> 赞同：0
> 
> 时间：2013-01-08T12:26:32.683
> 
> 标签：python, django, django-admin, mezzanine, cartridge

我正在使用夹层 + 墨盒制作购物车应用程序。每当管理员将订单状态从未处理更改为已处理时，我都想调用自定义函数。

自定义功能可能包括发送邮件，添加跟踪订单号。等等

但我不知道如何仅在更改一个字段时调用此函数以及在哪里调用此函数 admin.py 或 models.py

请给我一些提示，我在哪里做了这个，它只在数据库中的一个字段发生变化时调用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:51:24.033

`models.py`：

```
class MyModel(models.Model):
    ...

    def save(self):
        super(DocumentTemplate, self).save(*args, **kwargs)

        # retrieve the old version of the object
        try:
           old = DocumentTemplate.objects.get(id=self.id)
        except MyModel.DoesNotExist:
           # object is being created
           customize_function_create(self)

        # check if something has changed
        if self.interesting_field != old.interesting_field:
            # the field has been changed
            customize_function_update(self)

        return 
```

# ruby-on-rails-3 - 如果在 rails 中检查了某些条件，则分页失败

> ID：14214930
> 
> 赞同：-1
> 
> 时间：2013-01-08T12:26:38.993
> 
> 标签：ruby-on-rails-3, pagination, will-paginate

想要在 Ruby on rails 中**从数据库中检索到满足某些条件的记录后显示该记录。**

问题是：

目前我正在使用**will_paginate** gem 显示记录，而在从数据库中检索到它之后没有检查条件。

**如果我检查**条件；**部分记录不符合条件将被淘汰**

**编辑**

```
@result=MyRecord.paginate(:per_page => @perpage, :page => params[:page]).all
 #process records for conditions, if i eliminate records from @result that much records will be less for pagination
 @result #modified sent to view 
```

那么如何为此显示分页。

他们在检索记录后是否有任何替代方法来进行分页？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:10:49.653

如果我理解正确，如果您获得的记录较少而没有给出分页，那么您可以使用属性明确定义您想要的记录数的分页`:per_page`。因此，如果您仅从数据库中获取五条记录，则`:per_page => 5`在查询中定义以获取分页。

这样你就可以走了——

```
@result=MyRecord.paginate(:per_page => 5, :page => params[:page]).all 
```

对于不同的结果，WillPaginate::Collection 也将有所帮助 -

检查这篇文章 SO - [rails pagination - different per_page value page 1 from later pages](https://stackoverflow.com/questions/4829604/rails-pagination-different-per-page-value-page-1-from-subsequent-pages/4854443#4854443)

# java - 使用 asmack 接收带有损坏字符串的 xmlstring

> ID：14214931
> 
> 赞同：0
> 
> 时间：2013-01-08T12:26:40.080
> 
> 标签：java, xmpp, smack

我用 Java 客户端作为订阅者和发布者构建了一个 XMPP 服务器，这个东西使用原始的 Smacklib。另一部分是一个带有名为 asmack7 和 asmack-beem(testet both) 的库的 Android 客户端。Androidlibs 似乎工作但不完全。

我所做的是使用“testname”之类的有效负载创建一个节点。如果计算机或手机发送此信息并且 PC 接收到节点，则一切正常。如果 Androidphone 接收到节点，它看起来像这个“nulltestnamenull”，所以看起来 nodeget 的 xml 文件中的元素有问题。

我的代码似乎正确，我没有收到任何错误。

这里有没有人有同样的问题并找到了解决方法或解决方案？

# vba - 在 Worksheets() 中设置变量

> ID：14214933
> 
> 赞同：0
> 
> 时间：2013-01-08T12:26:48.667
> 
> 标签：vba, excel

我想从文本框中获取一个字符串，用字符串名称制作一个工作表，然后设置变量`WS`并使用它将工作表的名称放在第一个单元格中。

```
Dim WS As Worksheet
Dim nazov As String

nazov = Me.NazovReceptu
Sheets.Add.Name = nazov

Set WS = Worksheets(nazov)

With WS
.Cells(lRow, 1).Value = nazov
End With

'find first empty row in database
lRow = WS.Cells.Find(What:="*", SearchOrder:=xlRows, _
    SearchDirection:=xlPrevious, LookIn:=xlValues).Row + 1
... 
```

我设法从文本框中获取字符串，以字符串为名称制作一张工作表，但其余部分不起作用。我知道那`Set WS = Worksheets("nazov")`很糟糕。我想制作更多不同名称的工作表并使用变量 WS。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T12:39:15.660

尝试这样的事情 - 添加工作表时定义 WS ：

```
Dim ws As Worksheet
Dim nazov As String
Dim lRow as integer

nazov = "testsheet"
lRow = 1    
Set ws = Worksheets.Add
ws.Name = nazov
ws.Cells(lrow, 1).Value = nazov

[...] 
```

# c++ - 用零初始化类成员

> ID：14214937
> 
> 赞同：1
> 
> 时间：2013-01-08T12:27:03.107
> 
> 标签：c++

我的代码中有一个类，它有一些整数数据成员但没有方法。当我使用 new() 创建它的新对象时，是否有一种方法可以用 0 初始化所有数据项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T12:37:23.207

```
class A
{
    int x_; 
    int y_; 

    public: 
        A() 
           : 
             x_(0),
             y_(0)
        {} 
}; 
```

A() 构造函数中括号“{}”之前的部分称为“初始化器列表”，在上述情况下，您可以使用它来将变量初始化为默认值 0，或者其他一些可能传递给一个可以将这些值作为参数的构造函数。但是，您初始化 A 类型的对象（例如，使用“new”），属性将被初始化为这些值。按照声明的相同顺序初始化属性是一种很好的编码风格，它使代码更具可读性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T12:33:31.063

值初始化：

```
struct X
{
    int i, j;
};

X* x = new X(); // The '()' are required.
// 0 == x->i && 0 == x->j 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T12:30:14.503

```
class clasName{
 int x1= 0;
 int x2= 0;
 int x3= 0;
 int x4= 0;
 int x5= 0;
} 
```

仅在 C++11 中。

# python - Jinja2 简写条件

> ID：14214942
> 
> 赞同：238
> 
> 时间：2013-01-08T12:27:33.313
> 
> 标签：python, jinja2, conditional-operator

说我有这个：

```
{% if files %}
    Update
{% else %}
    Continue
{% endif %} 
```

比如说，在 PHP 中，我可以编写一个速记条件，例如：

```
<?php echo $foo ? 'yes' : 'no'; ?> 
```

那么有没有一种方法可以将其翻译为在 jinja2 模板中工作：

```
'yes' if foo else 'no' 
```

* * *

## 回答 #1

> 赞同：459
> 
> 时间：2013-01-08T12:32:08.050

是的，可以使用[内联 if 表达式](http://jinja.pocoo.org/docs/templates/#if-expression)：

```
{{ 'Update' if files else 'Continue' }} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-11-20T12:13:07.587

另一种方式（但它不是python风格。它是JS风格）

```
{{ files and 'Update' or 'Continue' }} 
```

# sql - 在我的 SQL 逻辑上需要帮助（组合列和 Distincts）

> ID：14214944
> 
> 赞同：1
> 
> 时间：2013-01-08T12:27:37.650
> 
> 标签：sql

我希望这不会违反任何规则（我是新手，是的，我确实检查了常见问题解答）。

但我有以下代码

```
SELECT DISTINCT PO_NUMBER, PO_TRACKING_NO, SUPPLIER, MIN(PO_QUANTITY),    
      SUM(SHIPPED_WT), PO_SHIPMENT_TO 
FROM VW_TRAFFIC_PO_SIDE
WHERE SYSDATE > PO_SHIPMENT_TO AND
      (PO_QUANTITY > SHIPPED_WT OR PO_TRACKING_NO IS NULL) 
GROUP BY PO_NUMBER, PO_TRACKING_NO, SUPPLIER, PO_SHIPMENT_TO
HAVING PO_QUANTITY > SUM(SHIPPED_WT) 
```

假设执行以下操作：每个跟踪编号显示 1 个 PO#，[这是不同的，它是正确的，我能够成功编译代码]...下一步，这是棘手的部分（这是SUM、MIN、GROUP BY 和 HAVING 部分）：我需要组合任何 PO_NUMBER（显示的）的 SHIPPED_WT，如果它小于 PO_Quantity，则显示该组合数字

where语句也是正确的，因为我编译成功了，只是当我添加了上面的部分时，我遇到了麻烦。

编辑：上面的代码现在编译（感谢下面的答案）

但是，我的逻辑是错误的，它没有做我希望它做的事情。它正确做的一件事是用 1 个 PO_TRACKING_NO 抓取 1 个 PO_NUMBER（只要 PO_tracking_no 不同，就可以有重复的 po_numbers，并且只要号码不同就可以有重复追踪）

编辑：下面是相关列的样子，我将解释它有什么问题（以及我试图对修改后的代码做什么

```
PO_NUMBER    PO_TRACKING_NO      MIN(PO_QUANTITY)  SUM(SHIPPED_WT)
123          C100                1000              750
123          C101                1000              250 
```

该代码假设采用这样的记录，并将 SHIPPED_WT 组合成一个数字（1000），并且因为该新数字是 PO_QUANTITY 的=，所以它不应该出现在查询中......此外，PO_TRACKING_NO 的 WHERE ISNULL 不起作用（应显示该字段中具有空值的所有记录，假设它不是 PO_NUMBER 和 PO_TRACKING_NO 的重复项）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:30:21.780

您不能在 group by 子句中包含聚合值，例如 min、max、sum ......等等......

```
SELECT PO_NUMBER, PO_TRACKING_NO, SUPPLIER, 
MIN(PO_QUANTITY), SUM(SHIPPED_WT), PO_SHIPMENT_TO 
FROM VW_TRAFFIC_PO_SIDE WHERE SYSDATE > PO_SHIPMENT_TO 
AND (PO_QUANTITY > SHIPPED_WT OR PO_TRACKING_NO IS NULL) 
GROUP BY PO_NUMBER, PO_TRACKING_NO, SUPPLIER, PO_SHIPMENT_TO
HAVING MIN(PO_QUANTITY) > SUM(SHIPPED_WT) 
```

参考阅读错误：[ORA-00934: Group function not allowed here || 选择最高薪部门的 MIN(Salary)](https://stackoverflow.com/questions/9707565/ora-00934-group-function-not-allowed-here-selecting-minsalary-of-highest-p)。

* * *

**编辑：添加 sqlfiddle 演示作为 OP 仍然有疑问的评论。**

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!3/03662/3)

上面的示例演示是`SQL Server`因为它是我可以更接近 SQL 的最接近的示例，因为我没有看到您指定 RDBMS...因为在 MYSQL 中我们有点`loose behaviou towards group_by`...与 SQL Server、TSQL、Oracle 和 MS ACCESS SQL 比较. 所以上面的查询或多或少是一个`ANSI`标准，但你可能需要改变一些事情，比如如何将日期插入表中，`GetDate()`函数。

但坦率地说，您查询中的某些条件并没有真正意义。

例如 `AND PO_QANTITY > SHIPPED_WT`，然后你做`HAVING MIN(PO_QUANTITY) > SUM(SHIPPIED_WT)`......无论如何它认为你的要求;）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:29:30.053

我认为您不想按 PO_TRACKING_NO 分组。此外，您的 WHERE 子句可能会意外排除您想要的行；它是您要检查的聚合（HAVING 子句）。如果使用 COALESCE 将 NULL 替换为 0，则 HAVING 子句应涵盖所有情况：

```
SELECT PO_NUMBER, MIN(PO_QUANTITY) AS PO_QUANTITY, SUM(COALESCE(SHIPPED_WT, 0)) AS SHIPPED_WT
FROM VW_TRAFFIC_PO_SIDE
WHERE SYSDATE > PO_SHIPMENT_TO
GROUP BY PO_NUMBER
HAVING MIN(PO_QUANTITY) > SUM(COALESCE(SHIPPED_WT, 0)) 
```

# mysql - 是否可以从常规 MySQL 设置中调用外部程序？

> ID：14214945
> 
> 赞同：0
> 
> 时间：2013-01-08T12:27:41.813
> 
> 标签：mysql, call, external

是否可以从常规 MySQL 设置中调用外部程序？（并得到它的输出）

像这样的东西：

```
UPDATE users SET something = CALL('/path/program', 'params') WHERE id = 1; 
```

我想将表中的值用作程序参数，例如`users.name`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:35:52.513

用一些shell命令构建查询并以这种方式运行呢？

```
# build query
echo -n "UPDATE users SET something = '" > query.sql
echo -n `/path/your_command` >> query.sql
echo -n "' WHERE id = 1;" >> query.sql

# run it!
mysql db_name < query.sql 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T21:00:08.357

您可以使用自定义的用户定义函数。[这是一篇](http://crazytechthoughts.blogspot.com/2011/12/call-external-program-from-mysql.html)关于它的博客文章。

# php - php 内置网络服务器错误日志（Zend Framework 2 App）

> ID：14214950
> 
> 赞同：3
> 
> 时间：2013-01-08T12:27:55.297
> 
> 标签：php, zend-framework2

我使用 php 内置网络服务器在本地调试我的网站。

```
php -S localhost:8080 
```

有时，如果出现问题，我在标准输出中有一个通用的 500 错误，我不明白问题出在哪里。

```
 127.0.0.1:51936 [500]: /dashboard 
```

有没有像error.log这样的更具描述性的错误的方法？

编辑：

我的错误是

```
$this->userDisplayName() 
```

代替

```
$this->zfcUserDisplayName() 
```

在我的 Zend Framework 2 应用程序的 PHTML 视图中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:31:13.410

老实说，我还没有使用过 php 内置功能，所以我没有经验，也没有太多线索，但是......在 apache 中，您将`LogLevel`指令设置为`debug`......那么如何尝试这些设置`php.ini`

```
display_errors: On
error_reporting: E_ALL
log_errors: On 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:04:58.507

解决了！

这是当前 Zend Framework 稳定版本的错误 ( `2.0.6`)

我已将我的项目更新到开发人员分支 ( `dev-master`)，现在它可以正常工作。对于每个错误，我都有一个正确的堆栈跟踪。

问题链接： [https ://github.com/zendframework/zf2/issues/2991](https://github.com/zendframework/zf2/issues/2991)

谢谢大家

# joomla - 加载组件时出错：组件，joomla 中的 1

> ID：14214964
> 
> 赞同：2
> 
> 时间：2013-01-08T12:28:39.323
> 
> 标签：joomla, components

我在我的 2 个组件**com_guru**和**com_easydiscuss**上遇到了这个错误。

```
Error loading component: com_guru, 1
Error loading component: com_easydiscuss, 1 
```

表中也有对这两个组件的引用`#__extensions`。

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:14:44.643

尝试从 Joomla 后端卸载组件，检查数据库以查看是否仍有对这些组件的任何引用，如果有，请删除必要的表或行。然后重新安装这两个组件，请确保您的 Joomla 版本是最新的，并且这些组件与您的 Joomla 版本兼容。我假设您使用的是 Joomla 2.5

# java - 如何在 JSF（Primefaces）中以编程方式设置咆哮生活？

> ID：14214973
> 
> 赞同：2
> 
> 时间：2013-01-08T12:29:10.667
> 
> 标签：java, jsf, primefaces

是否可以在我的 Bean 中以编程方式设置咆哮寿命？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T03:59:37.587

你可以

1.  将客户端咆哮组件绑定到同一组件的服务器端实例

    ```
    Growl growl = new Growl(); //Growl is from org.primefaces.component.growl.
    growl.setLife(6000);
    //getter & setter 
    ```

    在您看来：

    ```
    <p:growl binding="#{myBean.growl}" autoUpdate="true" globalOnly="true" id="theGrowl" widgetVar="aGrowl"/> 
    ```

2.  或使用以下 javascript 调用（`RequestContext`如果您愿意，可以使用）

    ```
     aGrowl.setRemovalTimeout(600); 
    ```

    您将在 JSF 视图中的组件上配置`aGrowl`的值在哪里`widgetVar``<p:growl/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:36:19.527

Growl 类为`life`属性提供了一个设置器：[Growl#setLife(int)](http://www.primefaces.org/docs/api/3.4/org/primefaces/component/growl/Growl.html#setLife%28int%29)

# objective-c - 需要对最后一个空格进行子串化

> ID：14214976
> 
> 赞同：1
> 
> 时间：2013-01-08T12:29:13.810
> 
> 标签：objective-c, ios, ios4, nsstring

我有字符串

```
“印第安诺波利斯大道，1000”
```

我需要得到“Avenida Indianopolis, 1000”

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:44:15.530

您可以使用正则表达式将所有包含两个或多个空格的内容替换为一个空格：

```
 {2,} 
```

例子：

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@" {2,}" options:0  error:NULL];

NSMutableString *string = [NSMutableString stringWithString:@"Avenida Indianopolis      , 1000"];
[regex replaceMatchesInString:string options:0 range:NSMakeRange(0, [string length]) withTemplate:@" "]; 
```

但是，在您的示例中，这将导致逗号前有一个空格，因此您实际上可能希望用空替换空格（或对字符串运行第二遍并清理空格+逗号，具体取决于输入字符串的方式形成）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:32:15.233

尝试

```
NSString *str = "Avenida Indianopolis &nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp, 1000";
str = [str stringByReplacingOccurrencesOfString:@"&nbsp" withString:@""]; 
```

如果存在空格而不是  ，请尝试此操作

```
NSString *str = "Avenida Indianopolis    , 1000";
str = [str stringByReplacingOccurrencesOfString:@"     " withString:@""]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T12:33:16.553

尝试这个

```
NSString *string = @"Avenida Indianopolis &nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp, 1000";
string = [string stringByReplacingOccurrencesOfString:@"&nbsp" withString:@""];
string = [string stringByReplacingOccurrencesOfString:@"&nbsp " withString:@""]; 
```

希望对你有帮助。。

编辑

```
NSString *string = @"Avenida Indianopolis &nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp, 1000";
string = [string stringByReplacingOccurrencesOfString:@"     " withString:@" "]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T12:56:28.810

我认为关键是您需要删除“，”之前的所有空格。

为此，请使用正则表达式 @" +,"：一个或多个空格，后跟一个逗号。

```
NSRegularExpression *re = [NSRegularExpression regularExpressionWithPattern:@" +," options:0 error:NULL];

NSMutableString *data = [NSMutableString stringWithString:@"Avenida Indianopolis      , 1000"];
[re replaceMatchesInString:data options:0 range:NSMakeRange(0, data.length) withTemplate:@","];

STAssertEqualObjects(data, @"Avenida Indianopolis, 1000", nil); 
```

# facebook-graph-api - Facebook API - 上传照片而不在相册中分组

> ID：14214980
> 
> 赞同：0
> 
> 时间：2013-01-08T12:29:28.067
> 
> 标签：facebook-graph-api, facebook-c#-sdk

我使用此代码在 Facebook 页面中上传照片，它可以工作！

```
 dynamic parameters = new ExpandoObject();
            parameters.message = message;
            parameters.name = name;
            parameters.url = photoUrl;

            dynamic result = fbClient.Post(fbPageId + "/photos", parameters); 
```

问题是 Facebook 不会在页面的日记中显示所有单独的照片，但它会显示分组在相册中的照片。

[http://img827.imageshack.us/img827/7033/41802615.png](http://img827.imageshack.us/img827/7033/41802615.png)

它看起来像什么。

[http://img600.imageshack.us/img600/5474/40129748.png](http://img600.imageshack.us/img600/5474/40129748.png)

应该如何。

# objective-c - 如何使用 Objective-C 将存档文件发送和保存到服务器

> ID：14214983
> 
> 赞同：2
> 
> 时间：2013-01-08T12:29:32.007
> 
> 标签：objective-c, file, webserver, save, archive

我在 NSDocumentDirectory 有一个归档（.zip）文档的本地路径，并希望将其保存在网络服务器上。

```
NSString *documentDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
NSString *archivePath = [documentDirectory stringByAppendingPathComponent:@"CreatedArchive.zip"]; 
```

**我需要将该文件保存在服务器上**，然后从服务器获取 .json 文档，更改它（写入保存的存档 url）并上传回来。我猜这是使用 ASIFormDataRequest 和 PHP 完成的。也许有人有工作代码可以在服务器上保存存档文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:28:54.893

我找到了如何做到这一点。您可以使用[asi-http-request](https://github.com/pokeb/asi-http-request)上传任何文件。

使用此代码：

```
// Upload archive
NSString *documentDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
NSString *archivePath = [documentDirectory stringByAppendingPathComponent:@"CreatedArchive.zip"];

ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:@"http://your.url/uploadfile.php"]];
[request setPostValue:@"uploadfilefromapp" forKey:@"action"];
[request setFile:archivePath forKey:@"arch"];
[networkQueue addOperation:request];
[networkQueue go]; 
```

上传文件.php

```
<?php
if(isset($_POST['action']) && isset($_FILES['arch'])) {
    if($_POST['action']==='uploadfilefromapp') {
        $newfile = basename($_FILES['arch']['name']);
        if(move_uploaded_file($_FILES['arch']['tmp_name'], $newfile))  {
            echo 'ok!';
        } else {
            echo 'fail!';
        }
    } else {
        echo 'Go away cheater';
    }
}
?> 
```

它正在工作，但如果您知道更好的解决方案，请在此处发布。

# symfony-2.1 - FosFacebookBundle 登录按钮

> ID：14214986
> 
> 赞同：1
> 
> 时间：2013-01-08T12:29:41.797
> 
> 标签：symfony-2.1, fosfacebookbundle

如何在 FOSFacebookBundle 中设置带有翻译字符串的自定义登录按钮？我需要在按钮内添加类似 {{ 'FOS.please_login'|trans }} 的内容，因为我使用多种语言。

# javascript - 打印InnerHtml

> ID：14214988
> 
> 赞同：1
> 
> 时间：2013-01-08T12:29:45.670
> 
> 标签：javascript, domdocument

有人可以告诉我为什么 Javascript 中的“printArea”是未定义的。

```
<html>
<head>
    <script language="text/javascript">
    function printArea(areaName)
    {
        var printContents = document.getElementById(areaName).innerHTML;
        var originalContents = document.body.innerHTML;

        document.body.innerHTML = printContents;

        window.print();

        document.body.innerHTML = originalContents;
    }   
</script>
</head>
<body>
<div id="printThis">
  Hello I am a printable area
 </div>
 <input type="button" onclick="printArea('printThis');" Value="Print">
</body>
</html> 
```

这是 JS Fiddle [http://jsfiddle.net/cFeNp/](http://jsfiddle.net/cFeNp/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T12:36:58.563

替换`language="text/javascript"`为 `type="text/javascript"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:44:41.767

如果你想获取 printThis Div 的 HTML，这里是相同的 java 脚本代码

```
<script type="text/javascript">
function printArea(areaName)
{
   var html =  document.getElementById('printThis').innerHTML; alert(html);
} 
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T12:38:50.477

你的javascript声明不正确。一定是：

> `<script type="text/javascript">`

# silverlight - 从代码隐藏中获取价值到 Silverlight MVVM 中的另一个视图

> ID：14214989
> 
> 赞同：0
> 
> 时间：2013-01-08T12:29:45.733
> 
> 标签：silverlight, entity-framework, mvvm

在我的项目（带有 MVVM 模式的 Silverligth）中，我有 2 个视图（客户和客户详细信息页面）。在客户页面中，我有一个`ListView`和一个`Button`用于打开已在`ListView`.

`ListView`XAML 编码：（Customer.xaml）

```
 <ListBox ItemsSource="{Binding Projects,Mode=TwoWay}"       
             SelectedItem="{Binding Project,Mode=TwoWay}" SelectionMode="Single">
       <ListBox.ItemsPanel>
          <ItemsPanelTemplate>
          </ItemsPanelTemplate>
       </ListBox.ItemsPanel>
       <ListBox.ItemTemplate>
         <DataTemplate>
               <TextBlock Text="{Binding ProjectName,Mode=OneWay}" />
         </DataTemplate>
       </ListBox.ItemTemplate>
  </ListBox>

    <TextBlock Name="CustomerName" Text="{Binding Customer.CustomerName}" />
      <TextBlock Name="ProjectName"  Text="{Binding Project.ProjectName,Mode=OneWay}"/>
      <TextBlock Name="Description" Text="{Binding Project.Description}" />
      <HyperlinkButton Content="Open" Click="HyperlinkButton_Click"></HyperlinkButton> 
```

实际上，如果我从中选择任何 projectFile Name`ListView`然后单击 Hyberlink`Button`意味着我将获得`TextBlock`完美绑定到客户视图中的值。

但我的要求是：当我导航到 CustomerDetails 页面时，要绑定相同的（绑定）值。

客户（代码隐藏）页面：

```
private void HyperlinkButton_Click(object sender, RoutedEventArgs e)
   {
    iRegionManager.RegisterViewWithRegion("RootRegion", typeof(View.CustomerDetails));
    iRegionManager.RequestNavigate("RootRegion", new Uri("CustomerDetails",   
                                                         UriKind.Relative));
   } 
```

客户视图模型.cs

```
private IEnumerable<Project> projects;
private Project project;
private Customer customer;
SampleDomainContext _context;
public IEnumerable<Project> Projects
{
    get { return projects; }
    set
    {
        projects = value;
        if (projects != null)
        {
            Project = projects.FirstOrDefault();
            OnPropertyChanged("Project");
        }
    }
}
public Customer Customer
{
    get
    {
        return customer;
    }
    set
    {
        customer = value;
    }
}

public Project Project
{
    get
    {

        return project;
    }
    set
    {
        project = value;
        OnPropertyChanged("Project");
        if (project != null)
        {
            Customer = project.CustomerProjects.FirstOrDefault().Customer;
            OnPropertyChanged("Customer");
        }
    }
}
  public CustomerViewModel()
    {

       int s =Common.ActiveData.Instance.userid;
       if(s!=0)
       {
         UserName = Common.ActiveData.Instance.UserName;
         OnPropertyChanged("UserName");
         GetProjectList(Common.ActiveData.Instance.userid);

       }
    }

    public void GetProjectList(int userid)
    {
        _context = new PartsDomainContext();
       _context.Load(_context.GetProjectListQuery(ActiveData.Instance.userid), Param =>
        {
            if (!Param.HasError)
            {

                Projects = Param.Entities;
                OnPropertyChanged("Projects");

            }
        }, null);
    } 
```

在我的 CustomerDetailsview 页面上，我有以下控件：

文本块 文本块 文本块

[保存按钮] [取消按钮]

我需要将选定的`ListBox`值绑定到 TextBlocks。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:45:35.347

将要绑定在多个视图模型上的数据提取到一个新类中，例如：

```
public class CustomerCommonDataViewModel : INotifyPropertyChanged
{
    public Project SelectedProject {get; set;} // Implement it notifying the change.
} 
```

将通知属性添加到两个视图模型（Customer 和 CustomerDetails）到此单例，**并将相同的 CustomerCommonDataViewModel 实例传递**给两者。

```
public class CustomerViewModel : INotifyPropertyChanged
{
    public CustomerCommonDataViewModel CommonData {get; set;} // Implement it notifying the change.
}

public class CustomerDetailsViewModel : INotifyPropertyChanged
{
    public CustomerCommonDataViewModel CommonData {get; set;} // Implement it notifying the change.
} 
```

在 xaml 中将绑定更改为这个新属性：

```
{Binding CommonData.Projects}
{Binding CommoData.SelectedProject} 
```

# android - 以编程方式打开 Android 安装的应用程序屏幕（应用程序抽屉）

> ID：14214997
> 
> 赞同：3
> 
> 时间：2013-01-08T12:30:09.747
> 
> 标签：android

有没有办法（也许是一种解决方法）以编程方式打开 Android 安装的应用程序屏幕？不仅如此，我还想打开小部件页面，但不确定是否可行。我试过这样：

```
Intent pickIntent = new Intent(Intent.ACTION_ALL_APPS);
pickIntent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
pickIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(pickIntent); 
```

但`Intent.ACTION_ALL_APPS`实际上列出了所有可用的应用程序并使用它正在关闭我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:26:20.183

您可以尝试像[链接](http://impressive-artworx.de/2011/list-all-installed-apps-in-style/)一样打开已安装的应用程序页面，如列表..

也可以在[这里查看答案表格](https://stackoverflow.com/questions/4421527/start-android-application-info-screen)

# python - 使用 Quickly for Ubuntu 创建的应用程序可以在其他 Linux 发行版中使用吗？

> ID：14214998
> 
> 赞同：3
> 
> 时间：2013-01-08T12:30:13.153
> 
> 标签：python, linux, ubuntu, canonical-quickly, linux-distro

我需要编写一个小程序来更新我的 mongodb。我目前在 ubuntu 上，但我需要在其他 linux 发行版上使用它。

我只想确保使用[此方法](http://developer.ubuntu.com/get-started/)的应用程序可以在其他发行版上运行。

真的吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T14:12:19.887

# 是的你可以

ubuntu 应用程序的默认快速模板使用[pyGOBJECT](https://live.gnome.org/PyGObject)，它在所有现代发行版中都可用，因此您不必担心。但是如果使用了 ubuntu 特定的功能，比如[appindicator](http://unity.ubuntu.com/projects/appindicators/)、unity 集成等，在移植到另一个发行版之前，你必须对源代码进行微小的更改