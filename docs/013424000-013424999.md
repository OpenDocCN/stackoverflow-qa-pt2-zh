# StackOverflow 问答 13424000-13424999

# c++ - 从父类调用继承的函数

> ID：13424001
> 
> 赞同：1
> 
> 时间：2012-11-16T20:33:08.297
> 
> 标签：c++, inheritance

我有一个仅处理 Node 类型的对象的链表类（List）。假设它们具有正确重载的布尔比较，它可以对这些节点执行各种操作。问题是，我想将此 List 类与一种称为 Term 的特殊节点（具有系数和指数或度数的代数项）一起使用。我如何告诉我的 List 类使用 Term 函数（Term 具有特殊版本的 Print() 函数和比较运算符），即使它使用节点指针处理术语？例如，我的 Print() 类似于：

```
Node* walker=head;
while(walker)
{
     walker->Print();
     walker=walker->next;
} 
```

除了没有 Node::Print() 之外，我希望它调用 Term::Print()！我是否必须创建一个全新的 List 类来处理 Term 类对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:34:10.863

这是多态性的一个经典例子。您可以像 WhozCraig 建议的那样将函数 Print() 添加到您的 Node 类。（请阅读 C++ 中的虚拟函数和抽象类。）您可以使 Print() 成为虚拟函数。您可以决定是否要将 Print() 设为纯虚函数。如果是纯虚函数，会在基类中这样声明。

```
class Node{
  virtual void Print() = 0;
  // If you don't want this to be pure virtual 
  // You can give a generic definition
} 
```

在这种情况下，由于您没有在基类中定义 Print()，因此每个不意味着抽象的派生类都必须实现此方法。因此， Term 类可以从 Node 类派生并相应地实现它的 Print() 方法:) 你可以使用基类指针来调用这个函数。如果将来您决定继承 Node 并添加 Print() 的不同实现，则根本不必更改 Node :)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T20:52:12.180

您已经偏离了通常的列表设计 - 建议使用模板而不是从`Node`类派生。然后，您需要一种`foreach`方法，该方法将在每个节点上执行操作，在这种情况下为`print`. 强烈建议使用 C++ 标准库容器，而不是编写所有这些“原始”代码。

另一种选择（不那么标准且存在设计缺陷）是派生出一个`PrintList`将调用该函数的`Print`函数，并且它需要被模板化或根据`Term`节点来完成，因为编译器会期望这个函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T21:32:31.523

三个选择：-

在现实世界中，您将使用[std::list](http://www.cplusplus.com/reference/stl/list/)或类似的容器类

或者，您可以将 Print() 作为虚拟方法添加到 Node，（并可能使其抽象）

```
class Node {
  ...
  virtual void Print() = 0;
} 
```

或者，您可以使用将 Node* 转换为 Term*

```
 Term *t = boost::polymorphic_cast<Term*>(walker);
    t->Print(); 
```

# android - 不明白如何在 ListView 中更新 View

> ID：13424003
> 
> 赞同：1
> 
> 时间：2012-11-16T20:33:13.713
> 
> 标签：android

有以下适配器：

```
private class RepeatingAdapter extends ArrayAdapter<Repeatable> {

    private List<Repeatable> items;
    private LayoutInflater inflater;
    private int resource;

        public RepeatingAdapter(Context context, int resource,
                List<Repeatable> items) {
            super(context, resource, items);
            this.items=items;
            this.resource=resource;
            inflater=LayoutInflater.from(context);
        }

        @Override
        public View getView(int position, View view, ViewGroup group) {
            View item=(view==null) ? inflater.inflate(resource, null) : view;
            TextView title=(TextView)item.findViewById(R.id.listItemRepeatingTypeTitle);
            title.setText(items.get(position).getTitle());
            items.get(position).setCommand(new RedRectangleCommand(item));
            Log.e("view", item.toString());
            return item;
        }

        @Override
        public Repeatable getItem(int position) {
            return items.get(position);
        }
} 
```

请注意，我们创建了新的 RedRectangleCommand 并将创建的 View 发送给它。所以，我们还做了以下事情：

```
 repeatingList.setAdapter(new RepeatingAdapter(this, 
        R.layout.list_item_repeating_type, types));
    repeatingList.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            ((Repeatable)parent.getItemAtPosition(position)).mark();
        }

    }); 
```

请注意，我们对选定的项目执行 mark() 方法（可重复的 Mark 方法执行命令的 mark() 方法）。一切都很好。最后的命令代码：

```
private class RedRectangleCommand extends Command {

    private View view;
    public RedRectangleCommand(View view) {
        this.view=view;
    }

        @Override
        public void mark() {
            ImageView image=(ImageView)view.findViewById(R.id.listItemRepeatingTypeImage);
            image.setBackgroundColor(Color.RED);
            image.invalidate();
        }

        @Override
        public void unmark() {
            ImageView image=(ImageView)view.findViewById(R.id.listItemRepeatingTypeImage);
            image.setBackgroundColor(Color.BLACK);
        }       
} 
```

我需要通过单击从选定的视图中更改 ImageView 的颜色。但它不起作用！另外，我的日志显示，从 Command 中选择的项目和项目是不同的。这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:58:05.517

也许你可以试试这个，看看有什么不同。它所做的是尝试通过将 RedRectangleCommand 对象设为自定义适配器的方法来直接引用它：

```
 RepeatingAdapter rAdapter = new RepeatingAdapter(this, 
            R.layout.list_item_repeating_type, types);

    repeatingList.setAdapter(rAdapter);
    repeatingList.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            rAdapter.markCommand(position);
        }

    }); 
```

然后在您的适配器中：

```
private class RepeatingAdapter extends ArrayAdapter {

        private List<Repeatable> items;
        private LayoutInflater inflater;
        private int resource;

        public RepeatingAdapter(Context context, int resource,
                List<Repeatable> items) {
            super(context, resource, items);
            this.items=items;

            // .... some code

        public void markCommand(int position) {
            items.get(position).mark();
        }
    } 
```

我也认为一个真正的问题是你的getView中的那部分：

```
items.get(position).setCommand(new RedRectangleCommand(item)); 
```

因为到目前为止，它正在创建这些对象中的一个新对象，一遍又一遍地重新实例化，不管它是否被使用，只要 listView 行从视图中消失并再次出现。您可以想象这可能是多么浪费和麻烦，尤其是在尝试引用特定实例时。应该有几种方法可以解决这个问题。例如，如果该Repeater 还没有，您只能执行setCommand。也许制作一个布尔方法来检查它是否具有那些 RedRectangleCommand 之一或类似检查 convertView 是否为空的东西。我试图巩固的另一个想法是做一些构造函数，但需要一个参数`View`似乎很麻烦：

```
private View item;
public RepeatingAdapter(Context context, int resource,
            List<Repeatable> items) {
        super(context, resource, items);
        this.items=items;
        this.resource=resource;

        inflater=LayoutInflater.from(context);
        item = inflater.inflate(resource, null);

        for (int i = 0; i < items.size; i++) {
            items.get(i).setCommand(new RedRectangleCommand(item));
        } 
```

# javascript - 打印 pdf 嵌入/iframe IE8+

> ID：13424004
> 
> 赞同：0
> 
> 时间：2012-11-16T20:33:18.293
> 
> 标签：javascript, internet-explorer, iframe

我有一个 iframe，在 iframe 正文中嵌入了 pdf，我想专注于 iframe 并打印其内容。iframe 是可见性的：以 1px 的高度和宽度隐藏。

```
 window.frames["iframeId"].focus();
                    window.frames["iframeId"].print(); 
```

这似乎不适用于 IE8。发生的情况是我看到了一个打印对话框 - 但打印的不是我所期望的 - 它试图打印整个浏览器窗口而不是 iframe 的内容。似乎 focus() 在 IE 中不起作用？有没有办法解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T20:46:54.233

浏览器无法以这种方式打印 PDF。打印 PDF 的代码来自插件内部，而不是浏览器。

# php - 更新 SQL 列

> ID：13424009
> 
> 赞同：1
> 
> 时间：2012-11-16T20:33:29.340
> 
> 标签：php, mysql, sql, database, pdo

所以我有一个有 6 列的表，每列对应一个特定的产品类型。每列都有一个数字，对应于人们选择该产品类型的次数。

```
A | B | C | D | E | F
---------------------
0 | 0 | 0 | 0 | 0 | 0 
```

因此，如果用户选择类型`A`，那么我想将列`A`的编号从更新`0`为`1`。所以这是我写的SQL代码：

```
$link = new PDO('***;dbname=***;charset=UTF-8','***','***');
$stmt = $link->prepare("UPDATE table SET :column=:num");
$stmt->bindParam(':column', $column);
$stmt->bindParam(':num', $num);
$stmt->execute(); 
```

但它根本没有更新任何东西。所以我猜 SQL 代码有问题，很可能与 column placeholder 有关`:column`。谁能告诉我*正确*的SQL 代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T20:35:30.087

首先确保，`$column`在可接受的值列表中。接下来，您无法绑定，`:column` 您将像这样分配它：

```
$stmt = $link->prepare('UPDATE table SET ' . $column .' = :num'); 
$stmt->bindParam(':num', $num);
$stmt->execute(); 
```

如果您要检查是否有效`$column`，我会使用

`$valid_column = preg_match('/[a-z0-9_]/i, $column);`

或充分的替换 ( `preg_replace`)。尽管您可能会将其包装在 try/catch 中并设置要在您的 PDO 实例中抛出的异常，以确保它甚至是合法的。

# css - GWT：将样式属性设置为元素

> ID：13424012
> 
> 赞同：3
> 
> 时间：2012-11-16T20:33:36.203
> 
> 标签：css, gwt, zooming

为了在我的 div 中缩放元素，我使用了这个 css（[此处为 JSFiddle 示例](http://jsfiddle.net/BWPCX/)）：

```
.scaled {
    transform: scale(0.5);
    -ms-transform: scale(0.5); /* IE 9 */
    -webkit-transform: scale(0.5); /* Safari and Chrome */
    -o-transform: scale(0.5); /* Opera */
    -moz-transform: scale(0.5); /* Firefox */
    filter: progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand',
        M11=0.5, M12=0,
        M21=0, M22=0.5);
} 
```

所有主流浏览器（包括 IE8）都支持这一点。

现在，当我尝试在 GWT 中动态应用这个 css 时：

```
public void setZoom(double val) {
    if (val != 1) {
        surface.getElement().getStyle().setProperty("transform", "scale(" + val + ")");
        surface.getElement().getStyle().setProperty("-ms-transform", "scale(" + val + ")");
        surface.getElement().getStyle().setProperty("-webkit-transform", "scale(" + val + ")");
        surface.getElement().getStyle().setProperty("-o-transform", "scale(" + val + ")");
        surface.getElement().getStyle().setProperty("-moz-transform", "scale(" + val + ")");
        surface.getElement().getStyle()
                .setProperty("filter", "progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand',M11=" + val + ", M12=0,M21=0, M22=" + val + ")");
    }

} 
```

我收到以下错误：

```
Caused by: java.lang.AssertionError: The style name '-ms-transform' should be in camelCase format
    at com.google.gwt.dom.client.Style$.assertCamelCase$(Style.java:1603)
    at com.google.gwt.dom.client.Style$.setProperty$(Style.java:1512) 
```

如何在 GWT 中动态设置这些依赖于浏览器的样式？（尤其是 IE 的过滤器..）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T23:40:03.697

这是 GWT 的问题跟踪器条目，其中讨论了限制和解决方法。

[http://code.google.com/p/google-web-toolkit/issues/detail?id=5152&q=assertCamelCase&colspec=ID%20Type%20Status%20Owner%20Milestone%20Summary%20Stars](http://code.google.com/p/google-web-toolkit/issues/detail?id=5152&q=assertCamelCase&colspec=ID%20Type%20Status%20Owner%20Milestone%20Summary%20Stars)

这是另一篇用 Javascript 讨论它的文章；[http://www.javascriptkit.com/javatutors/setcss3properties.shtml](http://www.javascriptkit.com/javatutors/setcss3properties.shtml)

基本上，将破折号 (-) 后的那个字母转换为大写，所以 -moz-transform 是 'MozTransform'

所以这应该有效；

```
 surface.getElement().getStyle().setProperty("MozTransform", "scale(" + val + ")"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T20:49:16.743

您可以在 CSS ResourceBundle 或条件 CSS 中使用值函数：

[https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#Value_function](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#Value_function)

但我从你的代码中不明白为什么你需要使用 transform: scale 。您可以直接设置此元素的大小，例如

```
surface.setSize("100px", "200px") 
```

如果您设置相对于某物的尺寸，您可以先测量该物（窗口或元素），然后计算您需要的尺寸。此解决方案适用于所有浏览器，您不必依赖支持的 CSS3。

编辑：

您可以拥有一个不会改变其大小的 div （在您的示例中为“表面”）。此 div 将包含另一个 div（例如，“wrapper”），其中包含所有内部内容。所有内容都可以设置为相对于包装器 div 的百分比或 em。当您需要缩放您的内容时，您只需更改包装器 div 的大小 - 它的所有内容都会相应地缩放。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T11:50:55.977

为什么要尝试使用 java 代码设置属性。虽然 GWT 通过编码支持它，但它有很多限制。尝试给 CSS 类名，然后在 CSS 中做你想做的事。

要通过 GWT 添加类名，您可以使用以下命令。

```
getElement().setClassName( "className" );
getElement().addClassName( "className" ); 
```

这里提供 CSS 类名（可以是任何名称）。在您的 CSS 文件中使用相同的 className 并执行您需要的所有操作。

# php - 使用 LAMP 服务器安装 PHP

> ID：13424016
> 
> 赞同：2
> 
> 时间：2012-11-16T20:34:07.247
> 
> 标签：php, ubuntu, apache2, localhost

我正在尝试通过此[链接](http://www.linuxcandy.com/2011/11/how-to-install-lamp-in-ubuntu-1110.html)中显示的方法在我的 Ubuntu 12.04 上安装 LAMP 。运行以下代码后

```
 sudo apt-get install php5 mysql-server apache2 
```

我应该安装 php，但是当我输入“localhost/info.php”时，它没有显示应该显示的 PHP 窗口，而是将文件下载到 Downloads 文件夹中

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:42:50.933

重启阿帕奇。

```
sudo service apache2 restart 
```

我建议您以不同的顺序安装软件包：

```
sudo apt-get install apache2 php5 mysql-server 
```

我的意思是，先安装 apache，所以当安装 php 时，会自动启用 mod_php apache 模块。但是因为你先安装了 php5 包，可能是 mod_php 还没有启用。仔细检查一下。

# android - PreferenceEditText 到字符串

> ID：13424020
> 
> 赞同：1
> 
> 时间：2012-11-16T20:34:35.137
> 
> 标签：android, android-edittext, android-preferences

因此，我的首选项中有 EditText，我想获取文本并将其用作字符串。然后我想每次单击按钮时都使用该字符串，它将我的另一个 EditText 文本设置为首选项中的字符串。代码：

```
<EditTextPreference android:title="Uredi Text"
    android:key="ime"
    android:summary="ime pjesme"
    /> 
```

Java代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this); 
    String b1t = preferences.getString("ime", "DEFAULT");
 et1 = (EditText) findViewById(R.id.editText1);
//Button Click
public void button(View view) {
        et1.setText(b1t);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:15:49.007

> **编辑：**约翰在我之前发布了他的答案，他的答案反映了大多数用例，例如在标准`Activity`. 我的回答仅针对使用`PreferenceActivity`.

以下是如何`Preference`在. 抱歉，如果有任何错误，我正在手机上打字。`Preference``PreferenceActivity`

您的`XML`-defined `Preference`s 将自动将其值保存到 SharedPreferences ，但代码创建`Preference`的 s 将需要手动保存/持久化。

`PreferenceActivity`'s`onConfigurationChange()` *通常*保存代码创建的首选项的状态（嵌套的 PreferenceScreens 有点奇怪。）

而且，当然，你会想要做空检查（为了节省我的大拇指而省略了。）

**activity_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
    android:title="Preferences"
    android:key="root">
    <EditTextPreference android:title="Default Pref Text"
        android:key="ime"
        android:summary="ime pjesme"
    />
    <Preference android:title="Click to add a preference."
        android:key="add"
        android:summary=""
    />
</PreferenceScreen> 
```

**我的活动.class**

```
public class MyActivity extends PreferenceActivity {
    public void onCreate(Bundle inState) {
        super.onCreate(inState);
        setContentView(R.layout.activity_main);
        getPreferenceScreen.findPreference(PREFERENCE_BUTTON).
          setOnPreferenceClickListener(new OnNewPrefClickListener());
    }
    private class OnNewPrefClickListener implements OnPreferenceClickListener {
        public boolean onPreferenceClick(Preference preference) {
            PreferenceScreen rootScreen = getPreferenceScreen();
            EditTextPreference defaultPref = 
                      (EditTextPreference)rootScreen.findPreference("ime");
            String defaultText = defaultPref.getText();
            EditTextPreference newPref = new EditTextPreference(getApplicationContext());
            newPref.setText(defaultText);
            rootScreen.addPreference(newPref);
            return true;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T20:43:10.797

根据开发人员文档，您可以使用`edittextpreference.getText().toString()`

*   [http://developer.android.com/reference/android/preference/EditTextPreference.html](http://developer.android.com/reference/android/preference/EditTextPreference.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T03:06:57.637

I'm not sure where your error is so I'll just give you my code for doing this.

```
 SharedPreferences sharedPreferences = PreferenceManager
            .getDefaultSharedPreferences(getBaseContext();

         String string = sharedPreferences
                .getString("key", "default"); 
```

And in my preferences

```
 <EditTextPreference
        android:defaultValue="default"
        android:key="key"
        android:summary="I'm a summary"
        android:title="I'm a title" /> 
```

For the onCLick method to modify the edit text

```
 EditText editText = (EditText) 
        findViewById(R.id.editText);

  editText.setText(String.valueOf(string)); 
```

This code works. If your application still crashes then your issue is either with your onClick event or something else. I personally prefer onClickListeners for buttons.

Heres the code for an onClickListener.

```
 Button button = (Button)
      findViewById(R.id.button);

 button.setOnClickListener(new OnClickListener() 
 {
     @Override
     public void onClick(View v) 
     {

          //Do some awesome stuff

     }
 }); 
```

# jquery - $.when 并延迟到控制功能流

> ID：13424023
> 
> 赞同：0
> 
> 时间：2012-11-16T20:34:38.523
> 
> 标签：jquery, animation, controls, deferred

我正在玩`$.when`并推迟控制几个功能的流程。我需要弄清楚为什么某些东西不工作以及它应该如何编码才能工作。

这个人为示例的最终目标可以通过内联回调来实现，但这不是我正在寻找的解决方案，因为每个单独的函数都比示例更复杂。最终代码应执行以下操作：

*   动画框 2
*   等一下
*   在框 2 完成后动画框 3 并且有一个短暂的暂停
*   等一下
*   然后在框 3 完成后为框 1 设置动画并且有一个短暂的停顿
*   最后提醒说一切都完成后一切都完成了

我已经尝试了很多变体，但我会尝试展示那些让我最悲伤的变体。[在这里找到了一个令人沮丧的小提琴](http://jsfiddle.net/twinturbotom/XEBeg/)

我从最简单的部分开始，在完成动画的 3 个框后提示一条消息：

```
var a = $('.box1').animate({top: '100px'}, 2000),
    b = $('.box2').animate({top: '100px'}, 1000),
    c = $('.box3').animate({top: '100px'}, 2000);

$.when( a, b, c )
    .done( function(){ alert( 'all done' )} );​ 
```

没问题...我实际上开始认为我知道我在做什么...不！

我接下来想，我应该能够将每个变量分离成它自己的函数......但是这使得警报首先发生，然后动画通过忽略它们的动画持续时间而突然结束！

```
function a(){
    $('.box1').animate({top: '100px'}, 2000);
}
function b(){
    $('.box2').animate({top: '100px'}, 1000);
}
function c(){
    $('.box3').animate({top: '100px'}, 2000);
}

a();
b();
c();
$.when( a(), b(), c() )
    .done( alert('all done') ); 
```

看起来像一个范围的东西？那么，如果我将 移动`$.when`到相应的函数中以调用下一个函数会怎样......再次在现实世界中发生的不仅仅是单个元素动画。

那没有用！为什么？警报再次首先弹出！嗯？然后所有框的动画速度都比指定的快到它们的最终位置：

```
function a(){
    a = $('.box1').animate({top: '100px'}, 2000);
    $.when( a ).done( alert( 'all boxes moved down' ) );
}
function b(){
    b = $('.box2').animate({top: '100px'}, 1000);
    $.when( b ).done( c() );
}
function c(){
    c = $('.box3').animate({top: '100px'}, 2000);
    $.when( c ).done( a() );
}

b(); 
```

通过 jsfiddle 更新 100，我处于堆栈溢出状态......但我想，让我们让它变得更简单，`$.when`从每个函数中删除所有函数，然后在我调用`b()`触发后添加一个`c()`......不幸的是`b()`，`c()`同时触发了！我在这里想念什么？

```
function a(){
    a = $('.box1').animate({top: '100px'}, 2000);
}
function b(){
    b = $('.box2').animate({top: '100px'}, 1000);
}
function c(){
    c = $('.box3').animate({top: '100px'}, 2000);
}      

$.when( b() ).done( c() ); 
```

别介意我认为我可以的事实

```
$.when( b() ).delay(1000).done( c() ); 
```

我正疯狂地试图理解这一点，何时，完成和延迟的东西（如果需要，我可以发布更多内容:)！）在观看了一个小时长的 jquery 开发人员演示文稿之后，我认为我可以在这种情况下实现它。 ..最后我有一个简单的任务，显然我错过了一些东西！我将不胜感激提供的任何方向/解释。

html和css

```
<div class='boxes'>
    <div class='box box1'></div>
    <div class='box box2'></div>
    <div class='box box3'></div>
</div>​

.box{width: 40px; height: 40px; background-color: green; position:absolute;}
.box1{left: 0px;}
.box2{left: 60px;}
.box3{left: 120px;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:54:43.250

我想这就是你要找的？？？

[http://jsfiddle.net/XEBeg/91/](http://jsfiddle.net/XEBeg/91/)

从方法中取出*调用*`done`。IE。`done(func)` *不是* `done(func())`

我还用`alert`匿名函数包装了调用。

我应该注意，这不是我解决这个问题的方法，但我相信这至少是一种使用*你的方法解决它的方法*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T20:55:09.770

当您开始将动画包装在函数中时，您需要确保该函数返回一个包含 promise 方法的对象。例如，

```
function a() {
    return $('.box1').animate({top: '100px'}, 2000);
} 
```

现在你可以这样做：

```
$.when( a(), b(), c() ).done(function() {
    alert("all done!");
}); 
```

现在您可以拆分它来控制顺序：

```
// run b and wait one second, when done run c and wait 1 second, then run a
b().delay(1000).promise().done(function(){
    c().delay(1000).promise().done(a);
}); 
```

由于您一次不会处理多个承诺，因此您根本不需要`$.when`。

# serialization - 是什么让 Smalltalk 能够进行图像持久化，为什么像 Ruby/Python 这样的语言不能序列化自己？

> ID：13424027
> 
> 赞同：19
> 
> 时间：2012-11-16T20:34:43.010
> 
> 标签：serialization, persistence, smalltalk, interpreted-language

在 smalltalk 中，您可以将世界状态保存到图像文件中。我认为这与 Smalltalk 自身“序列化”的能力有关——也就是说，对象可以生成它们自己的源代码。

1）这是一个准确的理解吗？

2）将这种能力添加到现代语言（显然是非lisp）中的挑战是什么？

3）“序列化”是正确的词吗？什么是正确的行话？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-16T21:05:07.860

它比“序列化”简单得多。Smalltalk 图像只是对象内存的快照。它获取整个 RAM 内容（在垃圾收集之后）并将其转储到文件中。启动时，它将快照从磁盘加载到 RAM 中，并从中断处继续处理。有一些钩子可以在快照和恢复时执行特殊操作，但基本上这就是它的工作原理。

（补充：请参阅下面 Lukas Renggli 的评论，了解与其他环境相比使其如此简单的关键设计选择）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-17T00:03:30.200

扩展 Bert Freudenberg 的出色回答。

> 1）这（即对象序列化自己的源代码的能力）是准确的理解吗？

没有。正如 Bert 指出的，Smalltalk 映像只是内存快照。Smalltalk 对象和 Smalltalk 程序的唯一真实来源是它们的内存表示。这与将程序表示为文本文件的其他语言有很大的不同。

> 2）将这种能力添加到现代语言（显然是非lisp）中的挑战是什么？

从技术上讲，对于大多数语言来说，从内存快照引导应用程序应该是可能的。如果我没记错的话，有一些解决方案可以使用这种方法来加快 Java 应用程序的启动时间。不过，您必须就规范的内存表示达成一致，并且您需要注意在重新启动程序时重新初始化本机资源。例如，在 Smalltalk 中，打开的文件和网络连接被重新打开。而且，还有一个启动钩子来修复数字的字节顺序。

> 3）“序列化”是正确的词吗？什么是正确的行话？

*休眠*是一个术语。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T08:09:06.603

关键区别在于 Smalltalk 将 Program 视为一堆对象。IDE 只是一堆编辑这些对象的编辑器，所以当你保存加载图像时，你所有的代码都在那里，就像你离开时一样。

对于其他语言，可能会这样做，但我想会有更多的摆弄，这取决于有多少反射。在大多数其他语言中，反射是附加的，甚至是事后才想到的，但在 Smalltalk 中，它是系统的核心。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T21:33:23.330

当您让计算机进入睡眠状态时，这已经以某种方式发生了，对吧？内核将正在运行的程序写入磁盘并稍后再次加载它们？假设内核可以通过网络将正在运行的程序移动到新机器上，假设另一端的架构相同？Java 可以序列化所有对象也是因为 JVM，对吧？也许障碍只是暗示不同内存布局的架构？

**编辑：**但我猜你有兴趣从程序本身使用这个功能。所以我认为这只是在 Python/Ruby 解释器和 stdlib 中实现该功能的问题，如果您希望能够迁移到不同的硬件架构，则拥有某种虚拟机。

# autoit - 自动小键盘“8”与“常规”8

> ID：13424028
> 
> 赞同：0
> 
> 时间：2012-11-16T20:34:47.123
> 
> 标签：autoit

我打破了笔记本电脑键盘上的字母“I”，并依靠破解输入 i：

```
HotKeySet("8", "_b")
HotKeySet("9", "_bb")

While 1
     Sleep(100)
WEnd

Func _b()
     Send("i")
  EndFunc

  Func _bb()
     Send("I")
  EndFunc 
```

但是，我注意到输入“Numpad” 8 结果为 8，而不是“i”。

如何更新上面的脚本以使“Numpad”8 结果为“I”？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T12:50:46.947

正如 VixinG 所说的 {NUMPAD8}

您可以在 Autoitv3 文档的附录“发送密钥列表”中查找 Autoit 支持的密钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T17:39:25.610

```
HotKeySet("8", "_b")
HotKeySet("9", "_bb") 
```

它不是“数字键盘 8”，而是标准的“8”。数字键 8 是“{NUMPAD8}”。

尝试：

```
HotKeySet("{NUMPAD8}", "_b")
HotKeySet("{NUMPAD9}", "_bb")

While 1
    Sleep(100)
WEnd

Func _b()
    Send("i")
EndFunc

Func _bb()
    Send("I")
EndFunc 
```

# php - 提交按钮不通过 AJAX/JQuery 将值返回到自处理表单

> ID：13424034
> 
> 赞同：0
> 
> 时间：2012-11-16T20:35:14.137
> 
> 标签：php, jquery, ajax, forms

我有一个在 Colorbox 中打开并通过 Ajax/JQuery 提交给自身的表单。但是，似乎传递的数据不包括提交按钮本身的值。无论我使用多个提交还是只提交一个，$_POST['submitButton'] 中没有数据，并且它不响应 isset() 或 empty()。

不过，表格的其余部分都很好。我可以回显 $_POST['name'] 和 $_POST['email']，而不是 $_POST['submitButton']

这是我的表格（精简版）：

```
<form id="sub-process" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
<input name="name" type="text" value="">
<input name="email" type="text" value="">
<input name="submitButton" type="submit" value="Submit">
</form> 
```

这是处理要通过 AJAX 提交的表单的 jquery，而不是 HTTP 请求。

```
jQuery(function(){
jQuery('.cbox-form').colorbox({maxWidth: '75%', onComplete: function(){
cbox_submit();
}});
});

function cbox_submit()
{
jQuery("#sub-process").submit(function(){
jQuery.post(
  jQuery(this).attr('action'),
  jQuery(this).serialize(),
  function(data){
    jQuery().colorbox({html: data, onComplete: function(){
      cbox_submit();
    }});
  }
);
return false;
  });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-08T19:32:28.420

我知道这是一个老问题，但看起来人们不明白@itachi 有正确的答案。

serialize 方法永远不会从提交按钮返回值。它不会在帖子中返回提交按钮。您最好只使用隐藏的表单字段并向按钮添加点击事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T20:38:22.513

Try using `$_POST['submitButton']`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T21:03:11.983

jQuery 的 serialize() 函数有点古怪和特殊。我发现它在许多情况下都不是那么有用。您可能想尝试[serializeObject](http://danheberden.com/jquery-plugin-serializeobject-2011-04-01/)插件。当 serialize() 对我不起作用时，我发现它在很多情况下都有效。

# operating-system - 中断向量。位置/谁设置的？

> ID：13424035
> 
> 赞同：3
> 
> 时间：2012-11-16T20:35:19.133
> 
> 标签：operating-system, interrupt

知道中断向量是中断处理程序的内存地址，或者是称为中断向量表的数组的索引，该数组包含中断处理程序的内存地址。产生中断时，操作系统通过上下文切换保存其执行状态，并在中断向量处开始执行中断处理程序。

我有一些问题，我一直在搜索，但还没有答案。

中断向量是否存储在 RAM 中？如果它存储在 RAM 中，谁将它设置为 ram？操作系统？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:49:52.777

`interrupt vector is the memory address of an interrupt handler`

内存是 RAM 的同义词，因此是存储在 RAM 中的中断向量。如果设备驱动程序想要注册中断处理程序函数，则需要调用适当的操作系统调用（如果是 linux 的话`request_irqs`），它会在中断向量表。此条目将指向您中断处理函数驻留在内存/RAM 中的任何位置。**负责管理中断向量表的是操作系统。**

因此，无论何时发生该特定中断，都会调用您的中断处理函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T00:20:45.800

它在闪存中。不在内存中。寄存器在 RAM 中。因为 RAM 是用来存储所有数据的。但是FLASH是存储所有程序的。中断向量由 Compiler 生成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T20:52:51.393

这取决于硬件。

如果 CPU 只能在中断时跳转到一个地址，那么该地址是 ROM 还是 RAM 取决于系统围绕 CPU 构建的内存映射。预定义的中断向量表同上。如果 CPU 允许为中断表设置基地址，那么这显然取决于操作系统。

一般来说，完全从磁盘加载的操作系统（如 Windows）显然会将其保存在 RAM 中。

部分或全部存储在 ROM 中的操作系统通常将向量表保存在 RAM 中，以便在运行时对其进行修改。在像 8 位 Acorn MOS 这样非常受限且定义明确的系统上，这是因为软件可能想要完全控制硬件——如果内存服务，那么由于内存映射的基础，特定系统在 ROM 中具有硬件向量但在那里放置一个例程，然后通过 RAM 进行软向量。所以这是一个非常慎重的决定。

在相对更宽敞的系统（如经典 Mac OS）上，这是因为它允许在事后修补 ROM。如果在机器出厂后在特定中断例程中发现错误，则可以发出操作系统更新，该更新将为例程加载 RAM 替换并仅更改向量表。这在 Mac OS 中特别有用，因为对系统的所有调用都使用类似于中断的陷阱机制。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-19T20:59:59.937

在现代 Windows 操作系统下的 PC 上，中断向量存储在中断描述符表 (IDT) 中。您可以使用 LIDT 指令（加载中断描述符表）找到该表的位置。但是你不能在那里改变一个值，除非你可以让你的代码在特权级别零（环 o）下运行，并且微软和英特尔已经密谋使这在 Windows 下几乎不可能，因为所有的指令都会改变代码段寄存器（ CS) 到响铃 0 被阻止对用户程序。这就是为什么 WINTEL 和南方古猿一样，在进化方面可能被证明是一条死胡同（我希望如此）。基本上，PC 无非是一个智能终端；你必须把它们当作你自己机器上的终端来做真正的工作，比如控制一些东西。

# javascript - 仅在单击链接时执行一些 XSLT

> ID：13424036
> 
> 赞同：1
> 
> 时间：2012-11-16T20:35:21.287
> 
> 标签：javascript, html, xml, xslt

我有一个元素菜单，`a`所有这些元素都使用 xslt 从 xml 文件中获取文本：

```
<nav>
  <xsl:for-each select="package">
        <a href="#" onclick="generateContent('{@name}', this);"><xsl:value-of select="@name"/></a>
  </xsl:for-each>
</nav> 
```

现在我想生成一个`div`（并在单击链接时将其附加到网站），其内容是从我的 xml 文件生成的（使用上面的 xslt）。

最好的方法是什么？我的猜测是从 JS 来做 - 从`generateContent(..)`函数；但我不知道这是否可能以及我是否不会以这种方式使事情过于复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:44:23.490

我认为你把一件简单的事情复杂化了。以我的方式，您应该生成所有 html 内容，包括菜单和子项。然后做一些 javascript 的东西来隐藏和显示应该显示的子项目。它要求您使用一些 CSS 和 javascript（可能是 Jquery）来完成您的工作。

从 onclick 委托再次调用 xslt 不是一个好主意，因为如果您一次又一次地生成所有子项，每次用户都想看到它们，所以无论多么困难，您都不会一直拥有状态可以实施。但是，以我理解您的代码的方式，做这样的事情似乎是不可能的（或非常困难的）。

希望能帮助到你。

干杯

# javascript - Javascript基于具有相同属性删除重复的JSON记录

> ID：13424038
> 
> 赞同：-5
> 
> 时间：2012-11-16T20:35:30.550
> 
> 标签：javascript, json

我有一个 JSON 对象

```
[{id:1,name:a, cat:1},{id:1, name:a, cat:2},{id:2, name:b, cat:8}] 
```

我需要它，这样我才能得到第一个重复的 id

```
[{id:1,name:a, cat:1},{id:2, name:b, cat:8}] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T20:38:01.903

I think you would need to create a loop and a new array for names, loop through each of the items, if its name doesn't already exist in the new array, add it to a new object for distinct values, and then add its name to the new array to make a comparison with later.

I'm not writing that code for you though, maybe you can have a crack at it yourself now you have a concept to work with. :)

# android - Android Preferences：如何验证它们的值？特别是 EdiBoxPreference

> ID：13424044
> 
> 赞同：1
> 
> 时间：2012-11-16T20:36:10.863
> 
> 标签：android, sharedpreferences

我们如何验证输入到 EditBoxPrefence 的值？

例如，用户输入一个目录名称，如

我的文件夹// 或 /myfolder 或

我想修剪任何斜线，然后存储首选项的值这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:45:53.677

您可以测试该值并告诉用户有问题：或做任何您想做的事情

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.preferences);

    Your_Pref = (EditTextPreference) getPreferenceScreen().findPreference("Your_Pref");

    Your_Pref.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {

        @Override
        public boolean onPreferenceChange(Preference preference, Object newValue) {
            Boolean rtnval = true;
            if (Your_Test) {
                final AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
                builder.setTitle("Invalid Input");
                builder.setMessage("Something's gone wrong...");
                builder.setPositiveButton(android.R.string.ok, null);
                builder.show();
                rtnval = false;
            }
            return rtnval;
        }
    });
} 
```

# facebook - Facebook授权和登录

> ID：13424045
> 
> 赞同：0
> 
> 时间：2012-11-16T20:36:16.677
> 
> 标签：facebook, authentication, login

基本上我是使用 facebook api 的新手，我在尝试让我的代码正常工作时遇到问题，如果用户尚未登录，以下代码应该会提供提示，但我不确定它有什么问题。 [http://apps.facebook.com/biographyscribe/](http://apps.facebook.com/biographyscribe/)

```
 <html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US"
          xmlns:fb="https://www.facebook.com/2008/fbml"> 
    <head>
      <title></title>
    </head>
    <body>
    <p>hello</p>
    <script type="text/javascript">
      window.fbAsyncInit = function() {
        FB.init({
          appId      : '490455294310717', // App ID from the App Dashboard
          channelUrl: 'channel.php',
          status     : true, // check the login status upon init?
          cookie     : true, // set sessions cookies to allow your server to 
          xfbml      : true  // parse XFBML tags on this page?
        });

        // Additional initialization code such as adding Event Listeners goes here

        FB.getLoginStatus(function(response) {
            if (response.status === 'connected') {
                var uid = response.authResponse.userID;
                accessToken = response.authResponse.accessToken;
            } else if (response.status === 'not_authorized'){

                FB.login();

                } else {
                    window.top.location = 'https://www.facebook.com/index.php';
                }
        });

      };

      // Load the SDK's source Asynchronously
      (function(d, debug){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
         ref.parentNode.insertBefore(js, ref);
       }(document, /*debug*/ false));
    </script>

    <div id="fb-root"></div>

    </body>

</html

> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T04:03:07.777

正如@CBroe 在其中一条评论中提到的那样，由于弹出窗口阻止程序，`FB.login`无法在用户交互之外调用。

相反，提供一个按钮/链接，并进行此调用`FB.login`。

# c - __restrict 是否允许忽略严格的别名规则？

> ID：13424046
> 
> 赞同：0
> 
> 时间：2012-11-16T20:36:29.937
> 
> 标签：c, restrict-qualifier

假设我有一个字符缓冲区，我想避免使用 memcpy，并通过 int* 变量访问它：

```
char buffer[100];
strcpy(buffer,"Hello");
int* __restrict ptr=(int*)buffer;
*ptr= 97;
printf("%s",buffer); 
```

现在这当然会打印“a”。
我可以在不遇到未定义行为的情况下执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:42:46.220

> 现在这当然会打印“a”。

好吧，只在小端机器上。

并且严格的别名与您的示例无关，因为其中一种类型是`char`并且`char`如果目标`restrict`不是**增加**编译器可能假设没有别名的情况的数量，则可能会为任何东西加上别名，即即使键入信息也不会不要阻止它。

显然，如果您想了解`__restrict`哪些在实现域中，您应该指定实现。

# javascript - 如何从 sqlite 数据库中填充 html5 中的下拉列表？

> ID：13424048
> 
> 赞同：0
> 
> 时间：2012-11-16T20:36:47.693
> 
> 标签：javascript, html, sqlite

我已经启动并运行了数据库，并且我有一个下拉列表，我想用数据库中的条目填充。

我还没有找到办法，所以任何朝着正确方向的轻推都会很棒。我根本不是 Web 开发人员，但我得到了一个 Web 项目。：秒

我正在使用 html5 和 javascript。

```
<!DOCTYPE html>
<html>
<head>
    <title>TestTest</title>
    <script>var newdb = openDatabase('mydb3', '1.02', 'Test DB1', 100 * 1024 * 1024);
var msg;
newdb.transaction(function (tx) {
tx.executeSql('CREATE TABLE IF NOT EXISTS LOGS (id unique, log)');
tx.executeSql('INSERT INTO LOGS (id, log) VALUES (1, "Item 1")');
tx.executeSql('INSERT INTO LOGS (id, log) VALUES (2, "Item 2")');
tx.executeSql('INSERT INTO LOGS (id, log) VALUES (4, "Item 3")');
tx.executeSql('INSERT INTO LOGS (id, log) VALUES (5, "Item 4")');
msg = '<p>Log message created and row inserted.</p>';
document.querySelector('#status').innerHTML =  msg;
});

newdb.transaction(function (tx) {
tx.executeSql('SELECT * FROM LOGS', [], function (tx, results) {
var len = results.rows.length, i;
msg = "<p>Found rows: " + len + "</p>";
document.querySelector('#status').innerHTML +=  msg;
for (i = 0; i < len; i++){
  msg = results.rows.item(i);
  document.querySelector('#status').innerHTML +=  msg;
  document.getElementById("Select1").options.add(msg);
 }
}, null);
});

<div id="list" style="margin-top:5px;margin-left:5px;width:100px;">
   <select name="drop1" form="List" id="Select1" size="13" onchange="playAlert(this)">
       <option value="1111111">Field Number item 1</option>
   </select>

</div> 
```

# wcf - WCF MSMQ DllNotFoundException

> ID：13424050
> 
> 赞同：1
> 
> 时间：2012-11-16T20:36:52.217
> 
> 标签：wcf, msmq, wcf-binding

我正在尝试访问托管在 Windows 服务中的远程 WCF 服务（使用 netMsmqBinding）并收到错误消息：

```
Message: System.TypeInitializationException: The type initializer for 'System.ServiceModel.Channels.Msmq' threw an exception. ---> System.DllNotFoundException:     Unable to load DLL 'mqrt.dll': A dynamic link library (DLL) initialization routine failed. (Exception from HRESULT: 0x8007045A)
at System.ServiceModel.Channels.UnsafeNativeMethods.MQGetPrivateComputerInformation(String computerName, IntPtr properties) 
```

我已经读到如果没有安装 msmq 可能会出现这个错误，但是 msmq 不应该安装在本地机器上......它安装在它试图与之交谈的远程机器上。

还有什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:21:10.407

任何希望参与消息传输的机器都需要安装 MSMQ。

这是因为 MSMQ 使用一种称为[Store and forward](http://en.wikipedia.org/wiki/Store_and_forward)的消息传递模式，这使得 MSMQ 对传输失败具有鲁棒性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-01T02:14:53.607

转到**程序和功能**，然后**打开或关闭 Windows 功能**。找到**Microsoft 消息队列 (MSMQ) 服务器**并启用它。

归功于：[https ://stackoverflow.com/a/26705197/782856](https://stackoverflow.com/a/26705197/782856)

# java - 尝试打开 wmv 文件时出现 Java Swing PrivilegedActionException

> ID：13424058
> 
> 赞同：1
> 
> 时间：2012-11-16T20:37:33.427
> 
> 标签：java, windows, swing, security, native

我正在使用 java`Desktop`类尝试使用其本机应用程序启动视频，启动它的代码是：

```
Desktop.getDesktop().open(myVideoFile); 
```

视频文件是一个 wmv 文件，但每当我尝试启动它时，都会出现以下异常

```
Unexpected Error

Message:
    java.security.PrivilegedActionException: java.security.PrivilegedActionException: java.io.IOException: Failed to open file:/C:/Users/me/desktop/video.wmv. Error message: Unspecified error
Level:
    SEVERE
Stack Trace:
null
    java.security.AccessController.doPrivileged(Native Method)
    java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    java.awt.EventQueue.dispatchEvent(EventQueue.java:618)
    java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
null
    java.security.AccessController.doPrivileged(Native Method)
    java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
    java.awt.EventQueue$2.run(EventQueue.java:621)
    java.awt.EventQueue$2.run(EventQueue.java:619)
    java.security.AccessController.doPrivileged(Native Method)
    java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    java.awt.EventQueue.dispatchEvent(EventQueue.java:618)
    java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
Failed to open file:/C:/Users/me/desktop/video.wmv. Error message: Unspecified error
    sun.awt.windows.WDesktopPeer.ShellExecute(WDesktopPeer.java:59)
    sun.awt.windows.WDesktopPeer.open(WDesktopPeer.java:36)
    java.awt.Desktop.open(Desktop.java:254)
    java_awt_Desktop$open.call(Unknown Source) 
```

使用相同的代码打开 jpg 文件是可行的。关于在这里做什么的任何想法？

# jquery - Jquery .load() 不工作

> ID：13424059
> 
> 赞同：1
> 
> 时间：2012-11-16T20:37:37.040
> 
> 标签：jquery

我正在尝试在单击 div 时将 php 页面加载到数据容器中。但它没有显示任何东西。甚至没有显示错误。这是我的代码。

```
$(".Element").live("click",function(){

        alert("Loading Starts");

        var file = $(this).find(".file").text();

        $("#Viewer").show();

        var full = 'directory/file.php?curFile=' + file;
        alert(full);
        $("#Data").load( full , function(status){ if(status== "error") alert("There is an error");});
        alert("Loading Ends");

}); 
```

它在#Data 容器中没有显示任何内容。任何人都可以帮忙吗？

编辑：这是html

```
<div class="Element">
    <div class="file" style="display:none">
         myfile.xml
    </div>
    <div>Some Text</div>
</div>

<div id="Viewer"> 
<p style="position:absolute; right:0px; top:0px;"onclick='$("#Viewer").hide();'>X</p>
<div id="Data"></div>
</div> 
```

并且文件变量的返回是正确的。我已经通过警报（）进行了检查。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-16T21:25:47.947

不完全确定（在阅读了所有这些评论之后）究竟是什么不起作用，但我没有看到你在代码中附加了数据。

要将数据附加到元素，请使用

```
 $('#data').append(full); 
```

（我猜你想要显示的数据是完整的）如果你想替换 div 中已经存在的数据，请像这样使用 html：

```
 $('#data').html(full); 
```

我真的觉得我错过了一些东西，但这些是使用 jquery 和 .text() 在元素中添加数据的方法。

当我编辑这篇文章的大小写原因时，我会提醒你它是区分大小写的。;)

我看到你使用加载功能。对此感到抱歉..看起来还不错。大部头书..

# sql-server - 智能多对多查询

> ID：13424061
> 
> 赞同：1
> 
> 时间：2012-11-16T20:37:40.123
> 
> 标签：sql-server, sql-server-2008

我在 ac# 应用程序中有一个项目描述列表。我想要的是当我选择该列表（复选框列表）的 1 个或 2 个或多个项目描述以通过 sql 查询预测多对多表我的项目是什么（每次最小化可能的预测）；

例如

```
item 1: white,green,blue
item 2: white,red,cyan
item 3: red,blue,purple 
```

*   用户应从检查列表中选择
*   white->query 将返回项目 1,2
*   white&green->query 将只返回项目 1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:51:08.527

根据您对问题的谦虚描述，我想您想要这样的东西：

```
 CREATE TABLE items (
    item_id INT NOT NULL PRIMARY KEY IDENTITY(1,1),
    name VARCHAR(100) NOT NULL
)

CREATE TABLE colors (
    color_id INT NOT NULL PRIMARY KEY IDENTITY(1,1),
    name VARCHAR(100) NOT NULL
)

CREATE TABLE items_colors (
    item_id INT NOT NULL FOREIGN KEY REFERENCES items(item_id),
    color_id INT NOT NULL FOREIGN KEY REFERENCES colors(color_id),
    PRIMARY KEY(item_id, color_id),
)

INSERT INTO items(name) VALUES ('item 1')
INSERT INTO items(name) VALUES ('item 2')
INSERT INTO items(name) VALUES ('item 3')

INSERT INTO colors(name) VALUES ('white')
INSERT INTO colors(name) VALUES ('green')
INSERT INTO colors(name) VALUES ('blue')
INSERT INTO colors(name) VALUES ('red')
INSERT INTO colors(name) VALUES ('cyan')
INSERT INTO colors(name) VALUES ('purple')

INSERT INTO items_colors(item_id, color_id) VALUES (1, 1)
INSERT INTO items_colors(item_id, color_id) VALUES (1, 2)
INSERT INTO items_colors(item_id, color_id) VALUES (1, 3)

INSERT INTO items_colors(item_id, color_id) VALUES (2, 1)
INSERT INTO items_colors(item_id, color_id) VALUES (2, 4)
INSERT INTO items_colors(item_id, color_id) VALUES (2, 5)

INSERT INTO items_colors(item_id, color_id) VALUES (3, 3)
INSERT INTO items_colors(item_id, color_id) VALUES (3, 4)
INSERT INTO items_colors(item_id, color_id) VALUES (3, 6)

SELECT i.* 
FROM items i 
WHERE 2 = (
    SELECT COUNT(*)
    FROM items_colors ic
    JOIN colors c
    ON ic.color_id = c.color_id
    WHERE i.item_id = ic.item_id
    AND c.name IN ('white', 'green')
) 
```

在“IN”子句中，您应该提供用户在 UI 中选择的值列表（您必须动态构建参数列表）。您还必须提供用户选择的元素数量（在我的示例解决方案中为“2”）。

所以应用程序中的查询将如下所示：

```
SELECT i.* 
FROM items i 
WHERE @count = (
    SELECT COUNT(*)
    FROM items_colors ic
    JOIN colors c
    ON ic.color_id = c.color_id
    WHERE i.item_id = ic.item_id
    AND c.name IN (@color1, @color2, ..., @colorN)
) 
```

（其中@count 是@colorX 参数的数量。）

# javascript - simple option script for chrome

> ID：13424064
> 
> 赞同：0
> 
> 时间：2012-11-16T20:37:45.337
> 
> 标签：javascript, google-chrome, google-chrome-extension

I'm trying to made a options site for my Chrome Extension. I want just that if checkbox 1 is enable script is runs etc... I searched around but I found only outdated threads for this topic. This is the `manifest.json` from my extension:

```
{
  "name": "My First Extension",
  "version": "1.0",
  "manifest_version": 2,
  "options_page": "options.html",
  "description": "The first extension that I made.",
  "content_scripts": [
    {
      "matches": ["http://*.example.com/*"],
      "all_frames": true,
      "js": ["script1.js", "script2.js"]
    }
  ],
  "browser_action": {
    "default_icon": "icon.png"
  },
  "permissions": [
    "tabs", "http://*.example.com/*"
  ]
} 
```

The `options.html`:

```
<!DOCTYPE html>
<html>
<body class="uber-frame" i18n-values=".style.fontFamily:fontfamily;.style.fontSize:fontsize" style="font-family: &#39;Segoe UI&#39;, Tahoma, sans-serif; font-size: 125%">
<div id="main-content" align="center">
  <div id="mainview">
    <section id="scripts">
<h3>Scripts</h3>
      <label>
        <input type="checkbox" class=script1 >
        <span>Enable Script 1</span>
     </label>
    <div>
     <label>
        <input type="checkbox" class=script2>
        <span>Enable Script 2</span>
     </label>
    </div>
    </section>
  </div>
</div>
</body></html> 
```

I don' t know how can i say the extension wich script shout be activ and which not. I think I need a other script to get the values from the classes of the checkboxes and probably I should set the content scripts to backgrond scripts. Would be great if someone could help me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T00:59:35.910

# 更新：

**我已经更新了使两个脚本同时运行的所有代码。**

好的，首先您应该将选项数据保存在本地存储中，以便您可以访问所有页面的数据。这使您的工作变得轻松。

为了处理数据，我创建了一个名为`global.js`.

此文件必须包含在开头`options.html`和`content.js`手动或`manifest.json`.

## global.js

```
var localStoragePrefix = "myextension_";
var LS_options  = localStoragePrefix + "options";
var Options = {
    Scripts : [
        {
            name : "script 1",
            path : "script1.js",
            enable : false
        },
        {
            name : "script 2",
            path : "script2.js",
            enable : false
        }
    ]
};

function DB_setValue(name, value, callback) {
    var obj = {};
    obj[name] = value;
    console.log("ayarlar kaydedildi");
    console.log(obj);
    chrome.storage.local.set(obj, function() {
        if(callback) callback();
    });
}

function DB_load(callback) {
    chrome.storage.local.get(LS_options, function(r) {
        if ($.isEmptyObject(r[LS_options])) {
            DB_setValue(LS_options, Options, callback);
        } else {
            Options = r[LS_options];
            callback();
        }
    });
}

function DB_save(callback) {
    DB_setValue(LS_options, Options, function() {
        if(callback) callback();
    });
}

function DB_clear(callback) {
    chrome.storage.local.remove(LS_options, function() {
        if(callback) callback();
    });
} 
```

这里是更新的 options.html，你会看到一些包含的 js 文件。

*   jquery.min.js （你不需要使用这个，我只是想让它更有用）
*   global.js
*   选项.js

## 选项.html

```
<!DOCTYPE html>
<html>
<head>
  <script type="text/javascript" src="jquery.min.js"></script>
  <script type="text/javascript" src="globals.js"></script>
  <script type="text/javascript" src="options.js"></script>
</head>
<body class="uber-frame" i18n-values=".style.fontFamily:fontfamily;.style.fontSize:fontsize" style="font-family: &#39;Segoe UI&#39;, Tahoma, sans-serif; font-size: 125%">
<div id="main-content" align="center">
  <div id="mainview">
    <section id="scripts">
      <h3>Scripts</h3>
      <div id="scriptTemplate" style="display:none">
       <label>
          <input type="checkbox" data-script = "script.js" />
          <span>Enable Script</span>
       </label>
      </div>
    </section>
  </div>
</div>
</body>
</html> 
```

事件处理程序附件在`options.js`文件中。

## 选项.js

$(function(){ DB_load(startOptionsPage); });

```
function startOptionsPage() {

    $.each(Options.Scripts, function(index, script) {
       var $scriptTemplate = $("#scriptTemplate").clone().show();
       $scriptTemplate.find("label span").html("Enable " + script.name);

       $scriptTemplate.find("label input[type='checkbox']")
       .data("script", script.path)
       .click(function() {
          if ($(this).is(":checked")) {
              script.enable = true; 
          } else {
              script.enable = false;
          }
          DB_save(function() {
              console.log("DB saved");
          });
       })
       .prop('checked', script.enable);

       $("#scripts").append($scriptTemplate);
    });    
} 
```

在`content.js`文件中，我们得到选项，如果有一个选定的脚本，则包括脚本。

## 内容.js

```
DB_load(function() {    
    $.each(Options.Scripts, function(index, script) {
        if (script.enable) {
            $.getScript(chrome.extension.getURL(script.path), function() {
                console.log(script.name + " was loaded!");
            });
        }
    });
}); 
```

## script1.js

```
alert("Hello from script1"); 
```

## script2.js

```
alert("Hello from script2"); 
```

对于所有这些，您应该更新`manifest.json`文件。

*   包括`global.js`进入`content_script`
*   许可`localstorage`
*   包括 script1.js 和 script2.js 的 web_accessible_resources（[为什么？](http://developer.chrome.com/extensions/manifest.html#web_accessible_resources)）

最后这里是更新的`manifest.json`

## 清单.json

```
{
  "name": "My First Extension",
  "version": "1.0",
  "manifest_version": 2,
  "options_page": "options.html",
  "description": "The first extension that I made.",
  "content_scripts": [
    {
      "matches": ["http://stackoverflow.com/*"],
      "all_frames": true,
      "js": ["jquery.min.js","globals.js","content.js"],
      "run_at": "document_end"
    }
  ],
  "browser_action": {
    "default_icon": "icon.png"
  },
  "permissions": [
    "tabs", "http://stackoverflow.com/*", "storage"
  ],
   "web_accessible_resources": [
    "script1.js",
    "script2.js"
  ]
} 
```

你的脚本文件夹应该是这样的，

![在此处输入图像描述](../Images/e8fa9edc67805572e25b631ae09ed350.png)

## 如何添加更多脚本？

你必须做的只有两个改变，

您将像其他 script1.js 和 script2.js 一样将脚本添加到主文件夹，并且还将其添加 `web_accessible_resources`到`manifest.json`.

您还将更新“global.js”，只需将新脚本对象添加到 Options.Scripts 数组。像这样。

```
var Options = {
    Scripts : [
        {
            name : "script 1",
            path : "script1.js",
            enable : false
        },
        {
            name : "script 2",
            path : "script2.js",
            enable : false
        },
        {
            name : "script 3",
            path : "script3.js",
            enable : false
        }
    ]
}; 
```

**就这样。但是不要忘记在加载新的更新之前从 chrome 中删除扩展，因为旧选项将保留在那里，如果不这样做，它将无法按预期工作。**

# java - 如何在 ImageIcon 中模拟视频？

> ID：13424069
> 
> 赞同：0
> 
> 时间：2012-11-16T20:38:12.523
> 
> 标签：java, multithreading, swing, video, imageicon

我有 JToggleButton 和这个方法捕获事件：

```
tgl_playMouseClicked(java.awt.event.MouseEvent evt) {                                             
            new Thread() {
                public void run() {
                    int i = 0;
                    String outputName = null;
                    while ((i <= 99)) {
                        ImageIcon imgThisImg = new ImageIcon("images/" + outputName + i + ".png");
                        lbl_image.setIcon(imgThisImg);
                        i++;
                    }
                    tgl_play.setSelected(!tgl_play.isSelected());

                }
            }.start();
} 
```

我尝试通过在 imageIcon 中读取和显示单个图像来模拟视频。当我第一次点击 JToggleButton 时，一切正常。视频正在运行。但是当我再次按下时，什么也没有发生。该事件被捕获，因为打印显示在输出中，但 ImageIcon 上没有刷新。

我在那里使用线程以便能够在帧之间设置一些延迟。

怎么了？请帮帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T22:41:52.570

我认为你最好的镜头之一是用来`javax.swing.Timer`调整你的“视频”。这将确保您使用 Swing EDT 正确执行所有操作。

（如果毫秒不够，那么我会看一下：`java.util.concurrent.Executors.newScheduledThreadPool(int)`并`java.util.concurrent.ScheduledThreadPoolExecutor.scheduleAtFixedRate(Runnable, long, long, TimeUnit)`添加`Runnable`立即调用所有代码的 's `SwingUtilities.invokeLater()`）

在这里，我制作了一个小型演示示例，其中包含一个显示不断扩大和缩小的圆圈的图像列表（这些图像是使用一些 JPanel 动态创建的，但这仅用于演示）。

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.GraphicsEnvironment;
import java.awt.Image;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.util.ArrayList;
import java.util.List;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.Timer;
import javax.swing.UnsupportedLookAndFeelException;

public class TestAnimation {
    private static final int NB_OF_IMAGES = 50;
    private static final int NB_OF_IMAGES_PER_SECOND = 25;
    private static final int WIDTH = 300;
    private static final int HEIGHT = 300;

    protected void initUI() {
        final JFrame frame = new JFrame(TestAnimation.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setResizable(false);
        // the label on which I will set images
        final JLabel label = new JLabel();
        // By adding to the frame, it is set as the central component of the 
        // BorderLayout of the JFrame. Eventually, the label will have the size of the content pane
        frame.add(label);
        frame.setSize(WIDTH, HEIGHT);
        // Creating a list of images (just for demo purposes)
        final List<Image> images = new ArrayList<Image>(NB_OF_IMAGES);
        for (int i = 0; i < NB_OF_IMAGES; i++) {
            CirclePanel circle = new CirclePanel(WIDTH / 2, WIDTH / 2, 2 * WIDTH * (NB_OF_IMAGES / 2 - Math.abs(i - NB_OF_IMAGES / 2))
                    / NB_OF_IMAGES);
            circle.setSize(WIDTH, HEIGHT);
            BufferedImage image = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().getDefaultConfiguration()
                    .createCompatibleImage(WIDTH, HEIGHT, BufferedImage.TRANSLUCENT);
            circle.print(image.getGraphics());
            images.add(image);
        }
        // Here is the timer logic
        Timer t = new Timer(1000 / NB_OF_IMAGES_PER_SECOND, new ActionListener() {
            private int i = 0;

            @Override
            public void actionPerformed(ActionEvent e) {
                if (i == images.size()) {
                    i = 0;
                }
                label.setIcon(new ImageIcon(images.get(i++)));
            }
        });
        frame.setVisible(true);
        t.start();
    }

    // Simple class that draws a red circle centered on x,y and given radius
    public static class CirclePanel extends JPanel {

        private int x;
        private int y;
        private int radius;

        public CirclePanel(int x, int y, int radius) {
            super();
            this.x = x;
            this.y = y;
            this.radius = radius;
            setOpaque(false);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            g.setColor(Color.RED);
            g.drawArc(x - radius / 2, y - radius / 2, radius, radius, 0, 360);
        }
    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestAnimation().initUI();
            }
        });
    }
} 
```

# javascript - Javascript regex Replace doesn't work

> ID：13424070
> 
> 赞同：0
> 
> 时间：2012-11-16T20:38:18.533
> 
> 标签：javascript, regex

I can't, for the life of me, figure out how to replace all `[` with `<` and all `]` with `>` in a value in JavaScript.

Here's what I've tried and it just doesn't work:

```
function SwitchDialog(NextDialog)
{
    if (NextDialog=='SCHEDULE') {
        $('.popup1').smart_modal_hide();
    } else if (NextDialog=='LICENSEE') {
        gotoLicensee(licenseeLink);
    } else if (NextDialog=='REVIEWCART') {
        window.location = CART_URL;
    } else if (NextDialog=='RFO') {
        window.location = REGISTER_FOR_OTHERS_URL;
    } else {
        if (NextDialog=='PREREG') {
            var msgtxt = gk_text.replace(//[/g, '<');
            msgtxt     = msgtxt.replace(//]/g, '>');
            DialogTemps[NextDialog].msgtext = msgtxt; // error occurs on this line
        }
        RenderDialog(NextDialog);
    }
} 
```

I get a `Syntax error: "missing ) after argument list` at the ; on the line that assigns the `msgtext`.

What the heck am I doing wrong?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T20:41:52.610

您需要使用反斜杠 (\)*转义*表达式中的 [ 和 ] 字符，如下所示：

```
 var msgtxt = gk_text.replace(/\[/g, '<');
        msgtxt     = msgtxt.replace(/\]/g, '>'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T20:38:59.733

You commented out the closing `)`, hence the error.

You need to escape a `/` in a regex, and not a bad idea to escape the `[` and `]` as well, ~~even though it's likely not needed here~~.

```
var msgtxt = gk_text.replace(/\/\[/g, '<');
msgtxt     = msgtxt.replace(/\/\]/g, '>'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T21:12:42.477

您需要转义`[`和`]`字符`\`，因为 then[在正则表达式中有特殊含义](http://www.regular-expressions.info/charclass.html)。

```
var msgtxt = gk_text.replace(/\[/g, '<').replace(/\]/g, '>'); 
```

# php - PHP - Symfony2 - Passing a url with the request

> ID：13424075
> 
> 赞同：0
> 
> 时间：2012-11-16T20:38:46.880
> 
> 标签：php, symfony

I am working with some code originally written by someone else, using the Symfony2 framework to create routes in the form:

```
http://my_site.com/account/add
http://my_site.com/account/delete, etc. 
```

The problem is that if I have something like this:

```
http://my_site.com/account/add/{"account_id":"test","web_site":"http://www.another_site.com"} 
```

I am urlencoding the JSON string before sending it, but I am getting a 404 (route not found)

if I remove the http:// it works fine

Even if I do something like:

```
http://my_site.com/account/add/{"account_id":"test","web_site":"www.another_site.com/funstuff"} 
```

I also get a 404 , with a message about route not found, which I assume comes from the symfony2 framework. Any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T20:46:20.340

我将在这里猜测一下，并建议尝试在请求正文中通过 POST 发送 JSON。我从未见过需要将 JSON 放入 URL 的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T20:46:24.127

你为什么要传递 GET 而不是 POST。当数据发送到服务器导致服务器上的数据发生变化时，通常使用 post。

# asp.net-mvc - 如何在 Visual Studio 2012 或 Visual Studio 2013 中打开旧的 MVC 项目？

> ID：13424079
> 
> 赞同：153
> 
> 时间：2012-11-16T20:39:05.927
> 
> 标签：asp.net-mvc, visual-studio, visual-studio-2012, project, visual-studio-2013

我有一个旧的 ASP.NET MVC 2 项目，我不想升级到 MVC 3 或 MVC 4。我正在运行 Windows 8、Visual Studio 2012 和 Visual Studio 2013 的新机器上工作。当我尝试打开 MVC VS 2012 或 VS 2013 中的 2 项目我收到错误：

> 此项目与当前版本的 Visual Studio 不兼容

然后该项目在解决方案资源管理器中被卸载并显示为灰色。我不想安装另一个 Visual Studio 副本。如何在新版本的 Visual Studio 中打开旧的 MVC 项目？

* * *

## 回答 #1

> 赞同：292
> 
> 时间：2012-11-16T20:39:05.927

[在Visual Studio 2012](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2012)或 Visual Studio 2013 中打开不受支持的 MVC 项目实际上很容易通过两个步骤完成。事实上，正如[bytebender 的评论所表明的那样](https://stackoverflow.com/questions/13424079/how-do-i-open-an-mvc-2-project-in-visual-studio-2012/13424080#comment18796578_13424080)，这些相同的步骤***应该***适用于 MVC 1 项目并适用于 MVC 1 项目。但是，我没有对它们进行测试，因此不能保证它们确实有效。

假设您尚未这样做，第一步是下载并安装[MVC 1](http://www.microsoft.com/en-us/download/details.aspx?id=5388)、[MVC 2](http://www.microsoft.com/en-us/download/details.aspx?id=22079)或[MVC 3](http://www.microsoft.com/en-us/download/details.aspx?id=1491)（在开始安装之前关闭 Visual Studio）。

一旦您安装了适当的 MVC 风格，该项目仍不会在 VS 2012 中加载。这是因为 ASP.NET MVC 项目是Web 应用程序项目类型的项目子类型[。](http://msdn.microsoft.com/en-us/library/bb166488.aspx)这意味着该项目在 Visual Studio 中使用时具有其他可用的加载项和功能。

Visual Studio 2012 和 Visual Studio 2013 在与 ASP.NET MVC 和其他项目类型的向后兼容性方面受到限制。不幸的是，安装旧的 MVC 位并没有改变这一点。[Visual Studio 2012](http://msdn.microsoft.com/en-us/library/vstudio/hh266747%28v=vs.110%29.aspx)与 ASP.NET MVC 3 和 4 项目风格兼容。[Visual Studio 2013](http://msdn.microsoft.com/en-us/library/vstudio/hh266747.aspx)与 MVC 4 和 MVC 5 兼容。

要加载项目，您必须修改项目文件。为此，请右键单击已卸载的项目并选择编辑。这会将项目文件作为 XML 文本文件打开。找到`ProjectTypeGuids`应该如下所示的节点：

```
<ProjectTypeGuids>
    {F85E285D-A4E0-4152-9332-AB1D724D3325};{349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}
</ProjectTypeGuids> 
```

从列表中删除相应的项目指南：

*   ASP.NET MVC 1：`{603c0e0b-db56-11dc-be95-000d561079b0}`
*   ASP.NET MVC 2：（`{F85E285D-A4E0-4152-9332-AB1D724D3325}` *如上例所示）*
*   ASP.NET MVC 3：`{E53F8FEA-EAE0-44A6-8774-FFD645390401}`
*   ASP.NET MVC 4：`{E3E379DF-F4C6-4180-9B81-6769533ABE47}`

删除适当的 GUID 后，`ProjectTypeGuids`应类似于以下内容：

```
<ProjectTypeGuids>
    {349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}
</ProjectTypeGuids> 
```

保存文件并关闭 Visual Studio 项目文件编辑器。右键单击项目并选择重新加载。如果项目未重新加载，请关闭并重新打开 Visual Studio。您现在应该能够在新版本的 Visual Studio 中使用旧的 ASP.NET MVC 项目。

需要注意的一件重要事情是，在这些修改之后，Visual Studio 不知道这是一个 ASP.NET MVC 项目。因此，特定于项目的功能，如“添加控制器、视图等”。不会出现在菜单中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T11:58:51.590

我使用了@ahsteele 的方法（感谢和 2x+1s！），但又出现了一个错误：-

> .csproj：错误：操作无法完成。无效的类字符串

我找不到任何关于其真正原因的引用，但我能够通过更改`<ProjectGuid>`. （不知道这是怎么发生的——它是大型解决方案的一部分，VS08、VS10、VS11 Beta 和 VS2012RC 都随着时间的`.csproj`推移进行了升级`.sln`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-12T12:27:38.327

在 VS2017 中，解决方案就是让它像`<ProjectTypeGuids></ProjectTypeGuids>`这样。

女士们和先生们之间不要有空格，否则会浪费您 48 小时的时间。

问候

# hyperlink - Negative margin covering links underneath

> ID：13424092
> 
> 赞同：0
> 
> 时间：2012-11-16T20:39:55.863
> 
> 标签：hyperlink, z-index, margin

I have two divs, neither floated, and the bottom one has a negative margin on top (pulling it upwards). That bottom div is ‘covering’ some of the links in the div underneath. **I need links to work in both divs**, and z-index doesn’t seem to be working at all.

Again, neither div is floated, just the bottom div pulled up a bit with a negative margin on top and it’s ‘covering’ links in the div below it.

Any thoughts? Thanks!

The site in question is here: [http://dawsondental.ca](http://dawsondental.ca) (see the footer)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T00:27:53.270

所以，我不相信实际上有可能允许两个分层 div 中的链接工作。我将 div 相对定位，以便 z-index 起作用，但无论如何，分层是分层的。在分层 div 中不可能有可用的内容。正确的？如果有人知道我错过了什么，我会全力以赴。

谢谢

# vba - VBA 如果找不到文件

> ID：13424094
> 
> 赞同：2
> 
> 时间：2012-11-16T20:40:00.510
> 
> 标签：vba, excel, excel-2007

我不做很多VBA。我有一些代码：

```
If Target.Address = "$H$1" Then
    Range("A13").Comment.Shape.Fill.UserPicture Range("H2").Value
End If 
```

简单的。根据单元格 A13 中的标准更改注释 BG 图像，插入由 H2 生成的文件/路径。然而...

有时 H2 中的文件/路径不存在（因为 H2 是根据用户输入/选择创建的）。

我试过这个：

```
If Target.Address = "$H$1" Then
    Range("A13").Comment.Shape.Fill.UserPicture Range("H2").Value
Else
    Range("A13").Comment.Shape.Fill.UserPicture Range("H6").Value
End If 
```

其中 H6 是“NOIMAGE.jpg”的另一个生成文件/路径，对于没有关联图像的任何条目，这将是一个常量。它也不喜欢那样。

在该方法尝试运行/查找 H2 中的内容之前，我找不到可以满足其需要的 else 表达式。

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T20:44:14.320

试试这个

```
If Target.Address = "$H$1" Then
    On Error Resume Next
    Range("A13").Comment.Shape.Fill.UserPicture Range("H2").Value
    If Err.Number <> 0 Then
        Range("A13").Comment.Shape.Fill.UserPicture Range("H6").Value
    End If
    On Error GoTo 0

End If 
```

# vb.net - Contact form is not sending email to my gmail acount

> ID：13424096
> 
> 赞同：2
> 
> 时间：2012-11-16T20:40:06.687
> 
> 标签：vb.net, gmail, imap

I have created a simple form using Visual Studio 2012 but it's not sending email to my gmail account, the page runs fine but when I hit send button I get error:

> The SMTP server requires a secure connection or the client was not authenticated. The server response was: 5.7.0 Must issue a STARTTLS command first. j8sm1567623paz.30
> 
> Description: An unhanded exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.
> 
> Exception Details: System.Net.Mail.SmtpException: The SMTP server requires a secure connection or the client was not authenticated. The server response was: 5.7.0 Must issue a STARTTLS command first. j8sm1567623paz.30

```
Source Error: 
Line 14: 
Line 15:         
Line 16:         mailClient.Send(message)
Line 17:         
Line 18:    

Source File: C:\Website SVN II\test\contact.aspx.vb    Line: 16 
```

Sources:

```
Imports System.Net.Mail

Partial Class contact
 Inherits System.Web.UI.Page

Protected Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    sendMail(txtEmail.Text, txtMessage.Text)
End Sub

Protected Sub sendMail(ByVal From As String, ByVal body As String)
    Dim mailservername As String = "smtp.gmail.com"
    Dim message As MailMessage = New MailMessage(From, "nabeel.f@gmail.com", "feedback", body)
    Dim mailClient As SmtpClient = New SmtpClient

    mailClient.Host = mailservername
    mailClient.Send(message)
    message.Dispose()
End Sub

End Class 
```

**HTML.**

```
 first name
        <asp:TextBox ID="txtFName" runat="server"></asp:TextBox>

        <br />
        <br />

        last name 
        <asp:TextBox ID="txtLName" runat="server"></asp:TextBox>

        <br />
        <br />

        email
        <asp:TextBox ID="txtEmail" runat="server"></asp:TextBox>

        <br />
        <br />            

        message: 
        <asp:TextBox ID="txtMessage" runat="server" TextMode="MultiLine"></asp:TextBox>

        <br />

        <asp:Button ID="Button1" runat="server" Text="Send" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:08:08.227

两件事情：

1.  您需要使用 HTTPS。
2.  您需要为您的帐户提供凭据。

[这是来自此处](https://stackoverflow.com/questions/32260/sending-email-in-net-through-gmail)的 C# 示例：

```
using System.Net;
using System.Net.Mail;

var fromAddress = new MailAddress("from@gmail.com", "From Name");
var toAddress = new MailAddress("to@example.com", "To Name");
const string fromPassword = "fromPassword";
const string subject = "Subject";
const string body = "Body";

var smtp = new SmtpClient
           {
               Host = "smtp.gmail.com",
               Port = 587,
               EnableSsl = true,
               DeliveryMethod = SmtpDeliveryMethod.Network,
               UseDefaultCredentials = false,
               Credentials = new NetworkCredential(fromAddress.Address, fromPassword)
           };
using (var message = new MailMessage(fromAddress, toAddress)
                     {
                         Subject = subject,
                         Body = body
                     })
{
    smtp.Send(message);
} 
```

vb.net 版本：

```
Private Sub Button1_Click(ByVal sender As System.Object, _
    ByVal e As System.EventArgs) Handles Button1.Click
    Dim SmtpServer As New SmtpClient()
    SmtpServer.Credentials = New Net.NetworkCredential
                ("xyz@gmail.com", "password")
    SmtpServer.Port = 587
    SmtpServer.Host = "smtp.gmail.com"
    SmtpServer.EnableSsl = True

    mail = New MailMessage()
    Dim addr() As String = TextBox1.Text.Split(",")
    Try
        mail.From = New MailAddress("xyz@gmail.com",
            "Web Developers", System.Text.Encoding.UTF8)

        Dim i As Byte
        For i = 0 To addr.Length - 1
            mail.To.Add(addr(i))
        Next
        mail.Subject = TextBox3.Text
        mail.Body = TextBox4.Text
        If ListBox1.Items.Count <> 0 Then
            For i = 0 To ListBox1.Items.Count - 1
                mail.Attachments.Add(New Attachment
                    (ListBox1.Items.Item(i)))
            Next
        End If
        mail.DeliveryNotificationOptions =
                DeliveryNotificationOptions.OnFailure
        mail.ReplyTo = New MailAddress(TextBox1.Text)
        SmtpServer.Send(mail)
    Catch ex As Exception
        MsgBox(ex.ToString())
    End Try
End Sub 
```

# javascript - jquery done() 下的代码在 when() 之前执行

> ID：13424098
> 
> 赞同：0
> 
> 时间：2012-11-16T20:40:08.730
> 
> 标签：javascript, jquery, jquery-deferred

为什么`done()`语句下的代码在调用下的其他 3 个函数之前执行`when()`？它立即进行。我认为 when 用于对函数进行排队，而 done 用于在何时代码完成时执行某些事情......

```
$(document).on('click', '.ajax', function() {
    $.when(func1('<p>first</p>'), func2('<p>second</p>'), func3('<p>third</p>')).done(function() {
        $('body').append('all done');
    });
});

function func1(first) {

    var t = setTimeout(function() {
        $('body').append(first);
    }, 800);
    return "success";

}

function func2(second) {

    var t = setTimeout(function() {
        $('body').append(second);
    }, 2700);
    return "success";
}

function func3(third) {

    var t = setTimeout(function() {
        $('body').append(third);
    }, 200);
    return "success";
}​ 
```

[http://jsfiddle.net/loren_hibbard/NhAFN/](http://jsfiddle.net/loren_hibbard/NhAFN/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T20:47:36.660

您需要使用 $.Deferred() 并返回承诺。

```
function func1(first) {
    var dfd = $.Deferred();

    var t = setTimeout(function() {
        $('body').append(first);
        dfd.resolve();
    }, 800);
    return dfd.promise();

} 
```

[http://jsfiddle.net/NhAFN/2/](http://jsfiddle.net/NhAFN/2/)

# android - Cannot ever get my android app to run?

> ID：13424099
> 
> 赞同：-3
> 
> 时间：2012-11-16T20:40:18.840
> 
> 标签：android

I have spent almost two weeks now just trying to run my android game. Every time I run it on my phone from Eclipse it crashes and says "The process closed unexpectedly, please try again" or something like that. I created a new project with just an activity and other basic classes to see what the problem was, and I still get the message. I am not new to Java but am new to android, and I am having a very hard time debugging. I always get this error:

```
11-16 14:15:55.613: D/AndroidRuntime(9468): Shutting down VM
11-16 14:15:55.613: W/dalvikvm(9468): threadid=1: thread exiting with uncaught exception (group=0x4001d570)
11-16 14:15:55.613: E/AndroidRuntime(9468): FATAL EXCEPTION: main
11-16 14:15:55.613: E/AndroidRuntime(9468): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.stickman.revolution/com.example.stickman.revolution.MainActivity}: java.lang.ClassNotFoundException: com.example.stickman.revolution.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.example.stickman.revolution-2.apk]
11-16 14:15:55.613: E/AndroidRuntime(9468):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
11-16 14:15:55.613: E/AndroidRuntime(9468):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
11-16 14:15:55.613: E/AndroidRuntime(9468):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-16 14:15:55.613: E/AndroidRuntime(9468):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
11-16 14:15:55.613: E/AndroidRuntime(9468):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-16 14:15:55.613: E/AndroidRuntime(9468):     at android.os.Looper.loop(Looper.java:130)
11-16 14:15:55.613: E/AndroidRuntime(9468):     at android.app.ActivityThread.main(ActivityThread.java:3683)
11-16 14:15:55.613: E/AndroidRuntime(9468):     at java.lang.reflect.Method.invokeNative(Native Method)
11-16 14:15:55.613: E/AndroidRuntime(9468):     at java.lang.reflect.Method.invoke(Method.java:507)
11-16 14:15:55.613: E/AndroidRuntime(9468):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-16 14:15:55.613: E/AndroidRuntime(9468):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-16 14:15:55.613: E/AndroidRuntime(9468):     at dalvik.system.NativeStart.main(Native Method)
11-16 14:15:55.613: E/AndroidRuntime(9468): Caused by: java.lang.ClassNotFoundException: com.example.stickman.revolution.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.example.stickman.revolution-2.apk]
11-16 14:15:55.613: E/AndroidRuntime(9468):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
11-16 14:15:55.613: E/AndroidRuntime(9468):     at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
11-16 14:15:55.613: E/AndroidRuntime(9468):     at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
11-16 14:15:55.613: E/AndroidRuntime(9468):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
11-16 14:15:55.613: E/AndroidRuntime(9468):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
11-16 14:15:55.613: E/AndroidRuntime(9468):     ... 11 more 
```

Here is the manifest:

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.stickman.revolution"
android:versionCode="1"
android:versionName="1.0">

<uses-sdk 
    android:minSdkVersion="8" 
    android:targetSdkVersion="15" />

<application 
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:44:20.380

您正在获取`ClassNotFoundException`MainActivity，因此无法启动 Activity。检查您的 Android Manifest 并查看您的 Activity 是否已注册。

# jquery - jquery加载变量

> ID：13424102
> 
> 赞同：0
> 
> 时间：2012-11-16T20:40:34.753
> 
> 标签：jquery, jquery-load

使用以下脚本，我将 HTML 文档加载到 div 容器中并显示它。使用变量“x”，我可以避免每次单击按钮都重新加载文档。

这里缺少隐藏容器的功能，因为它与我的问题无关。

```
x = 0;
$('.button').click(function () {
    if (x == 0){
        $('.box').load('article.html', function () {
            x = 1;
            $('.box').fadeIn();
        });
    }else{
        $('.box').fadeIn();
    }
}); 
```

我的问题是，如果我有更多按钮可以加载不同的文档，我该如何更改脚本？

变量“x”必须为所有按钮单独工作。有没有像“this.variable”这样的东西，还是我错了，我必须想出完全不同的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:46:21.420

我将定义要加载到数据属性中的文档。例如：

```
<span class="button" data-doc="article.html">Load article</span> 
```

然后：

```
$('.button').click(function(){
    var $this = $(this),
        $box = $('.box'),
        loaded = $this.data('loaded'),
        doc;

    if (loaded) { 
        $box.fadeIn();
        return; 
    }

    doc = $this.data('doc');

    $box.load(doc, function () {
        // mark it as being loaded
        $this.data('loaded', true);
        $box.fadeIn();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T21:31:04.640

使用 jQuery one() 事件处理程序，您只使用一次事件处理程序。

```
$('.button').one('click', function () {
    $('.box').load('article.html');
});
$('.button').click(function () {
   $('.box').fadeIn();
}); 
```

# batch-file - Hiding putty terminal while running in Batch script

> ID：13424103
> 
> 赞同：2
> 
> 时间：2012-11-16T20:40:35.970
> 
> 标签：batch-file, putty

I am running my shell script connecting to remote server through putty, in a batch script as:

```
putty.exe -ssh -2 user@sever.com -pw password -m command.cmd 
```

where, command.cmd contains

```
cd /path/to/the/script
./name.ksh 
```

It is running 100% correct, as I needed.But here, the putty terminal is appearing while the batch script is running, which I donot want.

Is there any way to hide the putty terminal?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T04:36:15.357

无法使用批处理，请使用 vbscript：

```
Set WshShell = WScript.CreateObject("WScript.Shell")
WshShell.Run "putty.exe -ssh -2 user@sever.com -pw password -m command.cmd", 0
' 0 => hide 
```

# windows - WCF windows service not reading from MSMQ

> ID：13424104
> 
> 赞同：1
> 
> 时间：2012-11-16T20:40:38.980
> 
> 标签：windows, wcf, service, msmq

I have a WCF service hosted as a windows service.

The WCF service reads from an MSMQ and does some processing.

It is running fine when installed locally on my windows 7 machine and reads properly from a public queue on my machine and does some action.

However when the service and the public queue is set up on a Windows 2008 server, the public queue has entries, but the WCF service is not picking it up.

Made sure all features are turned on the server machine as it is on my windows 7 machine and still no luck.

Not sure if there are any settings that I need to enable on the server machine for the WCF service to read from the queue.

# ms-access - Access 2003 - 根据选择查询结果运行更新查询

> ID：13424110
> 
> 赞同：0
> 
> 时间：2012-11-16T20:41:03.800
> 
> 标签：ms-access, sql-update, ms-access-2003

我目前有一个显示选择查询的子表单。我想用表单中的信息更新子表单中显示的表 B 的所有记录。子表单不是必需的。我只是用它来确保我的选择查询正确显示。

表 A 有 3 列（OID、Project_Number、Landowner）
表 B 有 4 列（OID、PhoneNum、地址、年份）

这些表具有一对多的关系。表 A 中的一个 OID 与表 B 中的多个 OID 相关

```
Table A
1          A10          Bill
2          B10          Sally
3          A10          Bill

Table B
1          555          123 blah st           2012
1                                             2013
2          111          456 aaa st            2012
3                                             2012 
```

该表单允许用户输入填充表 B 的信息。子表单显示一个记录列表，其中 Project_Number、Landowner 和 Year 等于表单上显示的记录

```
For example.  If the form is showing
1         A10          Bill

the subform is showing
1         A10          Bill        2012
3         A10          Bill        2012 
```

当我单击保存命令按钮时，我希望它运行更新查询，但我遇到了 SQL 命令问题。

我的选择查询如下：

```
SELECT B.Project_Number, A.LANDOWNER, B.Year
FROM A INNER JOIN B ON A.OBJECTID = A.OBJECTID; 
```

子表单是设置
链接子字段：Project_Number；年; 土地所有者
链接主字段：B.Project_Number；年; A.地主

我想：

```
UPDATE B.PhoneNum, B.Address, B.Year
WHERE items found in my subform
WITH information from my form 
```

忘记子表单并通过单个更新查询完成所有操作是否更容易？

```
UPDATE B SET B.phonenum = [New_Info]![PhoneNumCtrl], B.Address = [New_Info]![AddressCtrl]
WHERE [A]![Landowner] = The same landowner as the OID selected, [A]![Project_Number] = The same project number as the OID selected, [New_Info]![Year] = [B]![Year] 
```

提前感谢您的帮助！

现在一切正常。我想添加到 djphatic 的答案。
执行此操作时，请确保添加 [Forms]![formname]![controlname]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:46:04.737

根据控件在表单上的位置，您可能需要更改控件引用。

使用查询构建器 GUI 创建一个选择查询，其中包含您希望更新的列，并使用表单上的控件过滤记录。一旦你有了这个，你可以将查询更改为更新查询并设置表单上的控件的值。

```
UPDATE  B
SET B.phonenum = [formname]![controlname], ...
FROM B JOIN A ON B.OID = A.OID
WHERE A.PROJECTID = [formname]![controlname]
AND B.YEAR = [formname]![controlname] 
```

# c++ - 我的 Z 缓冲区计算有什么问题？

> ID：13424114
> 
> 赞同：0
> 
> 时间：2012-11-16T20:41:13.627
> 
> 标签：c++, depth-buffer, zbuffer

我正在实现一个 Z 缓冲区来确定应该在一个充满三角形的简单场景中绘制哪些像素。我有一个三角形、一个顶点、一个向量（当然是数学的 (x, y, z) 类型）的结构表示，以及一个将单个像素绘制到屏幕上的函数。这是我拥有的结构：

```
struct vertex{
  float x, y, z; 
  ... //other members for lighting, etc. that will be used later and are not relevant here 
}; 

struct myVector{
  float x, y, z; 
}; 

struct triangle{
  ... //other stuff 
  vertex v[3]; 
}; 
```

不幸的是，当我扫描将我的三角形转换为屏幕时，它依赖于计算深度来确定可见和要绘制的内容，我得到了不正确/不切实际的 Z 值（例如，三角形中某个点的深度超出了所有 3 个顶点的深度范围）！我一遍又一遍地查看我的代码，无法弄清楚我的数学是否有问题或者我在某个地方有粗心的错误，所以我将尝试准确地展示我正在尝试做的事情，希望其他人可以看到一些我不。（而且我仔细研究过确保浮点值仍然是浮点值，我正确地传递了参数等等，所以这真的令人困惑！）

总的来说，我的扫描转换算法会像这样（伪代码）在扫描线上填充像素：

```
for all triangles{  
  ... //Do edge-related sorting stuff, etc...get ready to fill pixels 

  float zInit;      //the very first z-value, with a longer calculation 
  float zPrev;      //the "zk" needed when interpolating "zk+1" across a scan line 

  for(xPos = currentX at left side edge; xPos != currentX at right side edge; currentX++){

    *if this is first pixel acorss scan line, calculate zInit and draw pixel/store z if depth is less   
     than current zBuffer value at this point. Then set zPrev = zInit. 

    *otherwise, interpolate zNext using zPrev. Draw pixel/store z if depth < current zBuffer value at 
     this point. Then set zPrev = zNext. 

  }
... //other scan conversion stuff...update x values, etc. 
} 
```

为了获得每条扫描线的 zInit 值，我考虑平面方程 Ax + By + Cz + D = 0 并重新排列它以获得 z = -1*(Ax + By + D)/C，其中 x 和 y 是分别作为跨扫描线的当前 x 值和当前扫描线值本身插入。

对于扫描线上的后续 z 值，我内插为 zk+1 = zk - A/C，其中 A 和 C 来自平面方程。

为了获得这些 z 计算的 A、B 和 C，我需要由`vertex v[3]`当前三角形的 3 个顶点（数组）定义的平面的法线向量。为了得到这个法线（我在代码中命名为 planeNormal），我定义了一个叉积函数：

```
 myVector cross(float x1, float y1, float z1, float x2, float y2, float z2)
 {
   float crX = (y1*z2) - (z1*y2);
   float crY = (z1*x2) - (x1*z2);
   float crZ = (x1*y2) - (y1*x2);

   myVector res;
   res.x = crX;
   res.y = crY;
   res.z = crZ;
   return res;   
 } 
```

为了获得平面方程/我的 z 计算的 D 值，我使用平面方程 A(x-x1) + B(y-y1) + C(z-z1) = 0，其中 (x1, y1, z1)只是平面中的一个参考点。我只是选择了三角形顶点 v[0] 作为参考点并重新排列：

Ax + By + Cz = Ax1 + By1 + Cz1 因此，D = Ax1 + By1 + Cz1

所以，最后，为了得到用于 z 计算的 A、B、C 和 D，我对每个三角形都这样做了，其中`trianglelist[nt]`是场景的整个三角形数组中当前索引 nt 处的三角形：

```
float pA = planeNormal.x;
float pB = planeNormal.y;
float pC = planeNormal.z;
float pD = (pA*trianglelist[nt].v[0].x)+(pB*trianglelist[nt].v[0].y)+(pC*trianglelist[nt].v[0].z); 
```

从这里，在我描述的扫描转换算法中，我计算了 zs：

```
zInit = -1*((pA*cx)+(pB*scanLine)+(pD))/(pC);  //cx is current x value; scanLine is current y value
...
...
float zNext = zPrev - (pA/pC); 
```

唉，在所有这些仔细的工作之后，有些事情发生了！在某些三角形中，深度值是真实的（符号除外）。对于由顶点 (200, 10, 75)、(75, 200, 75) 和 (15, 60, 75) 给出的三角形，所有深度都为 -75。对于所有顶点都在相同深度的其他三角形，情况也是如此。但是对于顶点 (390, 300, 105), (170, 360, 80), (190, 240, 25)，所有的 z 值都超过 300！第一个是 310.5，其余的只是变大，最大值在 365 左右。当最深的顶点位于 z = 105 时，不应该发生这种情况！！！那么，在所有的漫无边际，任何人都可以看到可能导致这种情况的原因吗？如果这是与符号相关的事情，我不会感到惊讶，但是在哪里（毕竟，绝对值在恒定深度情况下是正确的）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:01:57.530

正确的方程式是：

```
n = cross (v[2] - v[0], v[1] - v[0]);
D = - dot (n, v[0]); 
```

注意减号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T21:25:47.237

you should have a look at www.scratchapixel.com, particularly this lesson:

[http://scratchapixel.com/lessons/3d-advanced-lessons/perspective-and-orthographic-projection-matrix/](http://scratchapixel.com/lessons/3d-advanced-lessons/perspective-and-orthographic-projection-matrix/)

It contains a self-contained program that shows you how to project vertices.

# python - 为什么unittest找不到我的tests.py？

> ID：13424116
> 
> 赞同：3
> 
> 时间：2012-11-16T20:41:20.333
> 
> 标签：python, unit-testing

我很高兴为我正在使用的 API 编写和测试模块，并使用以下命令：

```
python -m unittest myAPI.tests.APITests.test_mod_to_test 
```

正如预期的那样，我的测试存在于`tests.py`模块中`myAPI`。这工作得很好，我发现我必须重构我的`api.py`文件中包含我正在测试的函数的一些代码。我更改了需要更改的内容，然后返回命令行并通过按下键盘以保存输入来运行完全相同的命令。我收到了这个错误：

```
AttributeError: 'module' object has no attribute 'tests' 
```

当我什至没有更改目录或`tests.py`. 我没有移动文件或更改命令，我可以使用以下命令`tests.py`在 python shell 中导入文件：

```
from myAPI import tests 
```

在此之后我输入：

```
print tests 
```

输出是预期的：

```
<module 'myAPI.tests' from '/path/to/myAPI/tests.pyc'> 
```

我在 virtualenv 中使用 python 2.7 并没有真正安装它。该应用程序适用于 django 1.2.1 应用程序，但不相关，因为我在测试期间没有接触 django（除了它安装在我的环境中）。

这让我很难过，我想如果我不更改目录或 tests.py 中的一些内容，它是如何从工作良好变为不工作的。任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T02:18:59.230

我可以提出这个错误的两个可能原因，但如果没有更多信息，就不可能知道。

1.  您从错误的地方运行测试。您没有说明您在哪里运行“python -m unittest myAPI.tests.APITests.test_mod_to_test”。如果您从 myAPI 目录中运行它，您可能会遇到奇怪的失败，因为您无权访问`__init__.py`myAPI 目录中的文件。因此，您要确保从包含 myAPI 测试的目录运行该调用。

2.  您的“测试”目录中没有`__init__.py`文件。创建新目录时很容易忘记放一个。没有它，您将无法从目录中导入任何内容。

# objective-c - MacRuby：打开 popUpContextMenu

> ID：13424121
> 
> 赞同：0
> 
> 时间：2012-11-16T20:41:56.393
> 
> 标签：objective-c, ruby, cocoa, macruby

我试图在我的 NSView 的 mouseDown 事件上打开一个上下文菜单，但该菜单从未出现。我认为可能很好，但我一定错过了一些东西。

这是我的看法：

```
class MyCustomView < NSView
  attr_accessor :menu

  def initWithFrame(frame)
    super(frame)  
    return self
  end

  def mouseDown(event)
    puts "---"
    puts menu.class.to_s
    NSMenu.popUpContextMenu(menu, withEvent:event, forView:self)
    puts "---"
  end
end 
```

这是我单击时的输出：

```
---
NSMenu
--- 
```

有谁知道为什么菜单不显示？谢谢，格雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:57:40.983

我已经能够通过使用 NSPopupButton 解决我的问题。

# mysql - 2种用户的数据库设计

> ID：13424125
> 
> 赞同：3
> 
> 时间：2012-11-16T20:42:24.837
> 
> 标签：mysql, database, database-design, single-table-inheritance, class-table-inheritance

我有两种方法让用户在我的网站上创建帐户。

一种。普通登记表（电子邮件、密码） b．通过 Facebook Connect 注册（fb_userid、电子邮件）

使用 MySQL（InnoDB 引擎）实现这一点的最佳实践是什么？

我的做法：

```
[USER]
user_id
user_type (normal/facebook)

[USER_NORMAL]
user_normal_id
user_id
email
password

[USER_FACEBOOK]
user_facebook_id
user_id
email
fb_userid 
```

你有什么建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T20:46:21.840

这个单表会更简单（在我看来）：

> **用户**（user_id、user_email、user_password、user_fbid）

您不需要“类型”，因为您可以使用 a`CASE`来确定是否`user_fbid`为`NULL`“普通”帐户，否则`user_password`为`NULL`Facebook 帐户。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T20:51:49.080

我会有两张桌子。

一张表应包含基本用户信息：

> **用户**（user_id、user_email、user_password）

另一个表应该是通用的，并将第 3 方帐户链接到这些用户。例子：

> **user_ext**（类型，user_id，uid）

type 字段应包含服务的类型（在本例中为 Facebook）和服务的唯一标识符（在本例中为 Facebook 用户 ID）。然后它应该链接回 user_id。

然后，此策略将允许您添加用户将来可以对其进行身份验证的其他服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T20:47:23.013

我会把所有东西都放在一张桌子上，并通过他们是否有 Facebook ID 来区分它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T20:46:27.690

我可能更愿意将所有用户保留在 1 个表中。如果该用户的类型没有该字段，则您可以拥有为空的字段。例如，如果用户正常，fb_userid 可以为空。

```
[USER]
user_id
user_type (normal/facebook)
email
password    
fb_userid (can be null: yess) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T20:49:01.457

如果这些是唯一的字段，那么将所有字段放在一个表中并酌情使用 NULL 可能是最简单的。

但是，如果你想要一个标准化的设计，你会选择这样的东西：

```
[USER]
user_id (PK)
email
(Other fields common to both)

[USER_NORMAL]
user_id (PK, FK to USER.user_id)
password
(Other fields specific to 'normal')

[USER_FACEBOOK]
user_id (PK, FK to USER.user_id)
fb_userid
(Other fields specific to FB) 
```

如果“密码”是“普通”用户特有的唯一字段，并且有许多 FB 用户特有的字段，那么折衷方案可能是有两个表：USER（如上，但包含“密码”）和 USER_FACEBOOK

# javascript - 从 Chromeframe 中检测浏览器

> ID：13424126
> 
> 赞同：4
> 
> 时间：2012-11-16T20:42:34.573
> 
> 标签：javascript, internet-explorer, bookmarklet, google-chrome-frame

> **可能重复：**
> [Chrome Frame 条件注释是否可能？](https://stackoverflow.com/questions/11908896/is-chrome-frame-conditional-comments-possible)

我有一个书签，我希望用户能够在所有浏览器中安装它。只是一个简单的链接，后面有一些javascript，可以像pintrest或evernote一样使用......它适用于所有浏览器（2个版本），除了在chromeframe运行时的IE（我们需要chromeframe用于旧版本的IE）。

在 chromeframe 中，您不能将链接拖动到收藏夹工具栏，但我可以在本机 IE 中打开一个弹出窗口并显示链接（然后可以安装/拖动到工具栏）。

我只是不知道如何检测我是否在 chromeframe 实例中运行（在没有运行 chromeframe 的情况下检测 IE 非常容易使用`CFInstall`或自己编写）。据`userAgent`我所知，我从 chromeframe 中看到的`Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11`是没有用的。我还尝试了几十种组合，`<!--[if IE]>`这些组合似乎也都失败了。

我现在唯一的解决方案是让服务器捕获初始值`userAgent`并在渲染过程中反馈它。我不介意修改服务器代码，但感觉很脏，无法通过仅客户端的测试器进行检查。

# php - 无法在 Joomla 3.0 Magic Quotes 问题中保存文章

> ID：13424131
> 
> 赞同：0
> 
> 时间：2012-11-16T20:43:06.353
> 
> 标签：php, joomla, joomla-extensions

我无法在 Joomla 3.0 中保存任何文章/模块等。当我尝试保存时，`" "`替换为`"\&quot;\&quot;"`. 这弄乱了我所有的代码。我尝试关闭`magic_quotes_gpc`php.ini 中的但没有帮助。

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T09:45:26.260

我想你做了 Joomla！3 安装通过在安装目录中添加带有magic_quotes_gpc = off 的.htaccess，成功安装平台，对吗？

如果您的服务器运行 php 5.3+，您需要**将服务器 php 配置设置**为 magic_quotes_gpc = off。它应该这样配置，因为 magic_quotes_gpc 在 php 5.3 中已弃用，并将在 5.4 中删除。

总之，你只能通过在服务器上配置php来克服这个问题。没有 .htaccess 将解决您的问题，除非您在 Joomla 上的每个目录中放置一个 .htaccess！安装 - 这是海事组织不可想象的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T05:44:31.227

修复`\&quot;`在管理员面板中添加文章帖子的问题：

```
magic_quotes_gpc = Off
magic_quotes_runtime = Off
magic_quotes_sybase = Off 
```

从您的 php.ini 文件中禁用这些选项。

您也可以覆盖 php.ini。

请检查使用 .htaccess 覆盖 php.ini 的链接

[如何关闭共享主机上的魔术引号？](https://stackoverflow.com/questions/517008/how-to-turn-off-magic-quotes-on-shared-hosting/10533989#10533989)

# iphone - 删除 2 个不同字符串中的常见字符

> ID：13424137
> 
> 赞同：1
> 
> 时间：2012-11-16T20:43:35.780
> 
> 标签：iphone, xcode, nsstring, uitextfield

我是 Xcode 和 iPhone 开发的新手。我陷入了一个问题。

我有两个文本字段，我想比较这些字符串。如果有任何常见字符，则应将其省略/删除，并将新字符串显示在另一个文本字段中。

公共字符可以在字符串中的任何位置，并且一次只能省略一个字符（在 for 循环中）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T02:02:21.503

我刚写了这个！我还没有发现它不起作用的情况！告诉我它是否适合你！

```
 NSMutableString *shortString; //put your shortest string in here
    NSMutableString *longString; //put your longest string in here

    //index for characters to be removed in short string
    int characterIndexesShort[shortString.length], characterIndexesLong[longString.length];
    int commonCharactersShort = 0, commonCharactersLong = 0;
    int cut = 0;

    for(int i = 0; i < shortString.length; i++)
    {
        int oldLongCharCount = commonCharactersLong;
        char currentLetter = [shortString characterAtIndex:i];

        for(int j = 0; j < longString.length; j++)
        {
            if(currentLetter  == [longString characterAtIndex:j])
                characterIndexesLong[commonCharactersLong++] = j;
        }

        if(commonCharactersLong != oldLongCharCount)
            characterIndexesShort[commonCharactersShort++] = i;
    }
    //At this point you will have arrays containing the indexes of the common characters in both strings

    for(int i = 0; i < commonCharactersLong; i++)
    {
        NSRange range;
        range.location = characterIndexesLong[i];
        range.length = 1;
        [longString replaceCharactersInRange:range withString:@""];
    }

    for(int i = 0; i < commonCharactersShort; i++)
    {
        NSRange range;
        range.location = characterIndexesShort[i] - cut;
        range.length = 1;
        [shortString replaceCharactersInRange:range withString:@""];
        cut++;
    } 
```

# actionscript-3 - FLEX 的 Coverflow 布局

> ID：13424141
> 
> 赞同：2
> 
> 时间：2012-11-16T20:44:11.280
> 
> 标签：actionscript-3, apache-flex, layout, coverflow

我寻找好的 CoverFlow 组件/布局。这个看起来很不错的[3d 水平覆盖流](http://www.flexdownloads.com/preview_source/113/index.html)，但我没有找到它的任何来源。我还发现[tink coverflowlayout](http://www.tink.ws/blog/coverflowlayout/)它看起来像我需要的，但是没有 swc 库（它可以与源代码一起下载，但在这种情况下，应该将很多类复制到项目中）。Cover Flow 还有其他好的 FLEX 库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:27:42.643

流画廊怎么样？但它看起来使用 Flex SDK3。

[http://activeden.net/item/flowgallery/68292/](http://activeden.net/item/flowgallery/68292/)

# javascript - jQuery语法未设置对象属性

> ID：13424145
> 
> 赞同：1
> 
> 时间：2012-11-16T20:44:28.490
> 
> 标签：javascript, jquery

我相信我的 jQuery 问题非常简单，这让我发疯了，我无法理解。

我有一个具有属性“内容”的对象，我希望能够获取该对象，使用 jQuery 操作属性“内容”，然后用 jQuery 创建的新值覆盖该值。

例子：

```
o.content = "<div><span>hello</span></div>";
$('div', o.content).addClass('test'); 
```

此时我希望 o.content 等于`<div class='test'><span>hello</span></div>`

我无法为我的生活弄清楚语法。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:50:58.313

在 中解析 html `o.content`，添加类，将解析后的 html 追加到 new`<div>`中，获取新 div 的 html：

```
o.content = "<div><span>hello</span></div>";
var el = $(o.content).addClass('test');
o.content = $("<div>").append(el).html(); 
```

**编辑：**这假设您`o.content`仍然想要包含一个字符串，而不是一个 jQuery 对象。在这种情况下，它更简单：

```
o.content = $(o.content).addClass('test'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T20:51:55.640

`<div class="test"><span>hello</span></div>`如果这是您想要的，这将为您提供一个字符串：

```
$(o.content).addClass('test').wrap('<div>').parent().html(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T20:51:30.357

我不认为你可以从这样的字符串中查找元素。我宁愿像下面那样做，

```
var content = "<span>hello</span>";
content = $('<div/>', {class: 'test'}).html(content) 
```

**演示：http:** [//jsfiddle.net/k4e5z/](http://jsfiddle.net/k4e5z/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T20:54:21.727

从[jquery 函数的文档中](http://api.jquery.com/jQuery/)，`context`必须是

> 用作上下文的 DOM 元素、文档或 jQuery

您的上下文 ( `o.content`) 是一个字符串。此外，jQuery 函数不能选择整个上下文，它只能选择该上下文中的元素。

试试这个：

```
// make o.content a jquery element, not a string
o.content = $("<div><span>hello</span></div>");

// select on something inside the context (inside the div), not the div itself
$('span', o.content).addClass('test'); 
```

[http://jsfiddle.net/JfW4Q/](http://jsfiddle.net/JfW4Q/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-16T20:58:39.570

你想要以下

```
o.content = "<div><span>hello</span></div>";
// Create a jQuery object you can call addClass on
var docFragment = $(o.content);
docFragment.addClass('test');
// Since there's no outerHTML in jQuery, append it to another node
var wrapper = $('div');
docFragment.appendTo(wrapper);
// The HTML of the wrapper is the outerHTML of docFragment
console.log(wrapper.html()); // outputs <div class='test'><span>hello</span></div> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-16T20:59:43.733

为什么不在一行中完成所有操作：

```
var o = {};
o.content = $( "<div></div>" )     // create element
    .addClass('test')              // add class
    .html( '<span>hello</span>' ); // append content 
```

小提琴：http: [//jsfiddle.net/kboucher/eQmar/](http://jsfiddle.net/kboucher/eQmar/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-16T21:00:32.630

```
o.content = $("<div><span>hello</span></div>");
o.content.addClass('test'); 
```

在这个例子中，o.content 是一个 jQuery 对象，而不仅仅是一个字符串。这是关于 jsfiddle 的演示：http: [//jsfiddle.net/cvbsm/1/](http://jsfiddle.net/cvbsm/1/)

# ruby-on-rails - 如何在 Rails 引擎中创建会话表？

> ID：13424146
> 
> 赞同：0
> 
> 时间：2012-11-16T20:44:34.290
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rake

我们想在我们的 rails (3.2.9) 引擎中创建会话表。但`rake db:sessions:create`不适用于 rails 引擎根目录（仅适用于虚拟目录下）。有没有办法在 Rails 引擎中创建会话？或者我们可以在引擎的 Rakefile 中添加 rake db:sessions:create 以便我们可以使用 rake 命令？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:53:36.560

由于引擎不是 Rails 应用程序，它没有与数据库链接，您无法创建会话表，只能为此添加迁移。

您不能将迁移从 dummy 复制到引擎的迁移文件夹吗？

# java - 捕获 android 屏幕并以编程方式创建视频

> ID：13424149
> 
> 赞同：12
> 
> 时间：2012-11-16T20:44:42.573
> 
> 标签：java, android, screenshot, video-capture

在 Android/Java 中，是否有任何代码示例可以以编程方式以每秒良好的帧数捕获计算机的屏幕截图并创建视频？

我想要一个教程或完整的源代码来做到这一点。我希望该程序可以在设备已“植根”的情况下使用和不使用。

Play商店中有一个应用程序`Screencast Video Recorder`可以做到这一点。但是你需要ROOT设备才能工作，所以我知道它可以完成。

在无根设备上以编程方式捕获 android 屏幕截图和创建视频的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T20:12:35.127

检查以下链接 [https://code.google.com/p/java-remote-control/](https://code.google.com/p/java-remote-control/)

在这个项目中，所有者创建了一个 java 遥控器，即他已经从远程计算机捕获图像并将其传输到服务器并将其转换为具有不同格式的电影，您需要了解他所做的一切并为您的所有需求实施相同的操作. 您可以从以下 URL 使用 SVN 客户端访问完整的源代码

[http://java-remote-control.googlecode.com/svn/trunk/](http://java-remote-control.googlecode.com/svn/trunk/)

您也可以在 java 中查找提供 createScreenCapture 方法的 Remote 类

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-21T00:11:21.527

有一个名为 Telecine 的应用程序是开源的，可让您录制屏幕 - 代码可以在[https://github.com/JakeWharton/Telecine](https://github.com/JakeWharton/Telecine)找到。所有功劳都归功于杰克·沃顿。

如果您需要示例，可以在 Commonsware 的 github 页面上找到一个示例 - Mark Murphy 提供了一个示例应用程序，用于使用 MediaProjection API 进行屏幕捕获和屏幕录制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-27T11:57:39.050

As of Android 4.4, there is a screen recording feature accessible via adb.

[http://developer.android.com/tools/help/adb.html#screenrecord](http://developer.android.com/tools/help/adb.html#screenrecord)

> The screenrecord command is a shell utility for recording the display of devices running Android 4.4 (API level 19) and higher. The utility records screen activity to an MPEG-4 file, which you can then download and use as part of a video presentation. This utility is useful for developers who want to create promotional or training videos without using a separate recording device.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T12:51:59.753

您可以在 adb 运行时使用 DDMS 来捕获屏幕，并且对帧缓冲区具有权限：

点击此链接了解更多详情：

[http://thetechjournal.com/electronics/android/how-to-capture-screenshots-and-record-video-on-android-device.xhtml](http://thetechjournal.com/electronics/android/how-to-capture-screenshots-and-record-video-on-android-device.xhtml)

还

检查这个链接可能会得到一些关于你需要什么的想法：

[http://answers.oreilly.com/topic/951-how-to-capture-video-of-the-screen-on-android/](http://answers.oreilly.com/topic/951-how-to-capture-video-of-the-screen-on-android/)

[http://www.mightypocket.com/2010/09/installing-android-screenshots-screen-capture-screen-cast-for-windows/](http://www.mightypocket.com/2010/09/installing-android-screenshots-screen-capture-screen-cast-for-windows/)

并检查这个项目：

[http://sourceforge.net/projects/ashot/](http://sourceforge.net/projects/ashot/)

希望这有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T20:48:53.310

从市场上试试这个应用程序

[https://play.google.com/store/apps/details?id=com.ms.screencastfree](https://play.google.com/store/apps/details?id=com.ms.screencastfree)

** 尚不适用于 Galaxy Nexus 或 Tegra 2/3 **

编辑 28/11/2014

Lollipop 已发布并提供新的屏幕录制 API

[http://developer.android.com/about/versions/android-5.0.html#UI](http://developer.android.com/about/versions/android-5.0.html#UI)

> 截屏和分享
> 
> Android 5.0 允许您使用新的 android.media.projection API 为您的应用添加屏幕捕获和屏幕共享功能。此功能很有用，例如，如果您想在视频会议应用程序中启用屏幕共享。
> 
> 新的 createVirtualDisplay() 方法允许您的应用程序将主屏幕（默认显示）的内容捕获到 Surface 对象中，然后您的应用程序可以通过网络发送该对象。该 API 仅允许捕获非安全屏幕内容，而不是系统音频。要开始截屏，您的应用必须首先通过使用通过 createScreenCaptureIntent() 方法获得的 Intent 启动截屏对话框来请求用户的许可。
> 
> 有关如何使用新 API 的示例，请参阅示例项目中的 MediaProjectionDemo 类。

# node.js - node.js 在变量中表达 mvc 方法名称

> ID：13424156
> 
> 赞同：1
> 
> 时间：2012-11-16T20:45:15.757
> 
> 标签：node.js, model-view-controller, express

我在为控制器命名以加载我的模型时遇到问题：

我的 app.js

```
var express = require('express');
var app = express();
app.everyauth = require('everyauth');
app.mongoose = require('mongoose');

var fs = require('fs');

var config = require('./config.js')(app, express);

//Include models
var models = {};
fs.readdir(__dirname + '/models', function(err, files){
    if (err) throw err;
    files.forEach(function(file){
        var name = file.replace('.js', '');
        models.name = require('./models/' + name)(app.mongoose).model;
    });
});

//Include controllers
fs.readdir(__dirname + '/controllers', function(err, files){
    if (err) throw err;
    files.forEach(function(file){
        var name = file.replace('.js', '');
        require('./controllers/' + name)(app, models);
    });
});

app.listen(process.env.PORT || 3000); 
```

例如，我在模型中有 test.js

如果我想在我的数据库中找到一些东西，我想做：

```
models.test.find({}, function(err, docs){}); 
```

但它不起作用，因为测试是未知的，我应该做

```
models.name.find({}, function(err, docs){}); 
```

所以我会用模型的名称替换名称

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T21:02:15.063

试试这个;

```
models[name] = require('./models/' + name)(app.mongoose).model; 
```

如果要读取目录同步模式，可以使用

```
var models = {};
var files = fs.readdirSync(__dirname + '/models');
for(var i in files) {
  var name = files[i].replace('.js', '');
  models[name] = require('./models/' + name)(app.mongoose).model;
}

// Now, you can use
models.test 
```

# algorithm - 分布式限速算法

> ID：13424157
> 
> 赞同：6
> 
> 时间：2012-11-16T20:45:20.157
> 
> 标签：algorithm, distributed-computing, rate-limiting

我正在一个定价平台上工作，我必须实现一个分布式速率限制算法。我有*k*个提供*x*服务的网关。任何网关都可以提供任何服务（通过负载均衡器）。客户每秒向服务购买多个呼叫，其呼叫可以通过任何网关路由。那么，是否有人知道一种好的算法来更新所有网关上的呼叫计数器以限制客户呼叫？

关于该算法的两个重要指标是网络开销以及接受呼叫数与速率限制之间的偏差。

谢谢！

**编辑** 我只想知道是否有“知名”算法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T08:30:41.653

我已经根据这篇[文章](https://web.archive.org/web/20131220125148/https://chris6f.com/rate-limiting-with-redis)(archive.org) 实现了一个解决方案。我认为该算法称为[Leaky Bucket](http://en.wikipedia.org/wiki/Leaky_bucket)，但它工作正常。它并不完美，因为它允许一次性使用整个配额，但总体而言，它使用 node.js 和 Redis 非常快。接受的请求和速率之间的差异可能非常大，并且取决于样本窗口和存储桶大小之间的比率。

# android - 如何使 ListView 的行的 TextView 加粗

> ID：13424159
> 
> 赞同：0
> 
> 时间：2012-11-16T20:45:28.527
> 
> 标签：android, listview, textview, bold

我有一个列表视图。当我尝试使它的行的 textview 加粗时-它会掉下来。我尝试：

```
ListView list = (ListView) findViewById(R.id.my_list);

list.setAdapter(someListAdapter);

((TextView) list.getChildAt(0).findViewById(R.id.first_name)).setTypeface(null, Typeface.BOLD); 
```

我只需要使用一个（标题）行的文本视图来执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T20:48:44.850

> 我只需要使用一个（标题）行的文本视图来执行此操作。

在调用之前尝试调用它`addHeaderView(view)`：

```
((TextView) view.findViewById(R.id.first_name)).setTypeface(null, Typeface.BOLD); 
```

* * *

如果您不使用`addHeaderView()`，请扩展您的适配器并将这样的代码片段添加到`getView()`：

```
if(position == 0)
    ((TextView) convertView.findViewById(R.id.first_name)).setTypeface(null, Typeface.BOLD);
else
    ((TextView) convertView.findViewById(R.id.first_name)).setTypeface(null, Typeface.NORMAL); 
```

（我建议使用 ViewHolder，而不是`findViewById()`重复调用。这只是一个简单的示例。）

# extjs - ExtJS 3.4 :: 带有所有 NumberField 编辑器的网格无法更新存储

> ID：13424160
> 
> 赞同：0
> 
> 时间：2012-11-16T20:45:36.793
> 
> 标签：extjs, grid

我有一个网格，只要至少其中一列有一个 Ext.form.TextField 编辑器，然后在商店的 beforewrite 中编辑网格结果，beforesave 事件按预期触发。

但是，如果*所有*列 Ext.form.NumberField 编辑器，那么对它们的编辑*不会*触发这些存储事件。

我没有看到任何错误。

有谁知道我可能会看什么来了解这一点？

# entity-framework - 生成 EntityTypeConfiguration 的动态方式：类型“TResult”必须是不可为空的值类型

> ID：13424165
> 
> 赞同：0
> 
> 时间：2012-11-16T20:45:56.200
> 
> 标签：entity-framework, code-first, fluent-interface

我正在考虑从运行时动态生成 EntityTypeConfiguration 并且我不希望模型中有任何 EF 依赖项[这就是我避免数据注释的原因]。

所以我声明了一个自定义属性（或者以后可以是任何配置文件）

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple=true )]
public class PersistableMemberAttribute : Attribute
{
    public bool Iskey;
    public bool IsRequired;
    public bool IsIgnored;
    public bool IsMany;
    public string HasForeignKey;
    public bool PropertyIsRequired;
    public bool PropertyIsOptional;
} 
```

这是我的一个模型的样子：

```
 public class Blog
{
    [PersistableMember(Iskey=true)]
    public Guid BlogId { get; set; }

    [PersistableMember(PropertyIsRequired = true)]
    public string Name { get; set; }

    public string Url { get; set; }

    [PersistableMember(IsIgnored=true)]        
    public int Rating { get; set; }

    [PersistableMember(IsMany =true)]
    public ICollection<Post> Posts { get; set; }
} 
```

现在我要编写一个通用的 EntityTypeConfiguration ，它将根据属性值在运行时动态创建配置：

```
 public class GenericEntityConfiguration<T> : EntityTypeConfiguration<T> where T : class
{
    public GenericEntityConfiguration()
    {
        var members = typeof(T).GetProperties();
        if (null != members)
        {
            foreach (var property in members)
            {
                var attrb= property.GetCustomAttributes(typeof( PersistableMemberAttribute ),false).OfType<PersistableMemberAttribute>();
                if (attrb != null && attrb.Count() > 0)
                {
                    foreach (var memberAttributute in attrb)
                    {
                        if (memberAttributute.Iskey || memberAttributute.IsIgnored)
                        {
                            var entityMethod = this.GetType().GetMethod("Setkey");
                            entityMethod.MakeGenericMethod(property.PropertyType)
                              .Invoke(this, new object[] { property, memberAttributute });
                        }

                        if (memberAttributute.IsRequired)
                        {
                            var entityMethod = this.GetType().GetMethod("SetRequired");
                            entityMethod.MakeGenericMethod(property.PropertyType)
                              .Invoke(this, new object[] { property, memberAttributute });
                        }

                        if (memberAttributute.PropertyIsRequired || memberAttributute.PropertyIsOptional)
                        {
                            var entityMethod = this.GetType().GetMethod("SetPropertyConfiguration");
                            entityMethod.MakeGenericMethod(property.PropertyType)
                              .Invoke(this, new object[] { property, memberAttributute });
                        }
                    }
                }
            }
        }

    }

    public void SetPropertyConfiguration<TResult>(PropertyInfo propertyInfo, PersistableMemberAttribute attribute)
    {
        var functorParam = Expression.Parameter(typeof(T));
        var lambda = Expression.Lambda(
            Expression.Property(functorParam, propertyInfo)
        , functorParam);

        if (attribute.PropertyIsRequired)
        {
            this.Property<TResult>((Expression<Func<T, TResult>>)lambda).IsRequired();
        }
        if (attribute.PropertyIsOptional)
        {
            this.Property<TResult>((Expression<Func<T, TResult>>)lambda).IsOptional();

        }
    }

    public void Setkey<TResult>(PropertyInfo propertyInfo, PersistableMemberAttribute attribute)
    {
        var functorParam = Expression.Parameter(typeof(T));
        var lambda = Expression.Lambda(
            Expression.Property(functorParam, propertyInfo)
        , functorParam);

        if (attribute.Iskey)
        {
            this.HasKey<TResult>((Expression<Func<T,TResult>>)lambda);
        }
        if (attribute.IsIgnored)
        {
            this.Ignore<TResult>((Expression<Func<T, TResult>>)lambda);
        }
    }

    public void SetRequired<TResult>(PropertyInfo propertyInfo, PersistableMemberAttribute attribute) where TResult : class
    {
        var functorParam = Expression.Parameter(typeof(T));
        var lambda = Expression.Lambda(
            Expression.Property(functorParam, propertyInfo)
        , functorParam);
        if (attribute.IsRequired)
        {
            this.HasRequired<TResult>((Expression<Func<T, TResult>>)lambda);
        }
    }

} 
```

但我得到了编译错误

错误 1 ​​类型“TResult”必须是不可为空的值类型，才能在泛型类型或方法“System.Data.Entity.ModelConfiguration.Configuration.StructuralTypeConfiguration.Property(System.Linq. Expressions.Expression>)' D:\R&D\UpdateStorePOC\UpdateStorePOC\Data\GenericEntityConfiguration.cs 63 17 UpdateStorePOC

这对于这两个语句：

```
 this.Property<TResult>((Expression<Func<T, TResult>>)lambda).IsRequired();

        this.Property<TResult>((Expression<Func<T, TResult>>)lambda).IsOptional(); 
```

这意味着我需要对我的方法施加约束以将其限制为值类型。在 C# 中，这是通过 'struct' 关键字完成的。

```
public void SetPropertyConfiguration<TResult>(PropertyInfo propertyInfo, PersistableMemberAttribute attribute) Where TResult : struct 
```

但它不是解决方案，因为我的属性类型可以是一个类，例如 string 或 int、bool double 等。所以完全不清楚我是否可以将它们发送到这种方法中。请帮助我解决这个问题是否有任何其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T01:14:08.323

> 我不希望模型中有任何 EF 依赖项。

有了流畅的映射，您就快到了，而且您不会再靠近了。您的属性，即使打算移动到配置文件，也不会使您的模型不再有任何 EF 占用空间。¹更糟糕的是，他们只在您的模型和 EF 的映射之间添加了第二个映射层（如果您愿意）。我只看到缺点：

*   您仍然需要维护模型的元数据，可能不亚于常规的流畅映射和（可能）在没有编译时检查的情况下手动编辑的笨拙 XML。
*   您将继续扩展您的代码以涵盖 EF 的映射涵盖但您的尚未涵盖的情况。²所以这是浪费精力：到头来你基本上会重写 EF 的映射方法。
*   当你想升级 EF 时，你必须保持双手交叉。
*   遇到错误/问题，您只能靠自己：很难获得社区的支持。

所以我对你的问题的回答可以*帮助我解决这个问题*：使用开箱即用的流畅映射。把事情简单化。

* * *

¹例如，您仍然必须使用`virtual`修饰符来启用代理以进行延迟加载。

²像对继承的支持、未映射的外键、最大长度、db 数据类型……这可能会持续一段时间。

# ruby-on-rails - 在环境/*.rb 中如何解析配置符号

> ID：13424178
> 
> 赞同：8
> 
> 时间：2012-11-16T20:46:34.293
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这是典型`config/environments/*.rb`文件的开始方式：

```
MyApp::Application.configure do
  config.cache_classes = false
  ...
end 
```

传递给的块`configure`取消引用`config`显然未绑定的符号。这在技术上是如何工作的？块/Proc/lambda 中使用的符号应该在其声明的上下文中绑定，而不是在调用站点的动态范围内解析。

一个相关的问题是，该`Application.configure`方法究竟是在哪里声明的？它不在[`application.rb`](https://raw.github.com/rails/rails/b04ec2764f62d5734c57959e2f00f9ef4345d52e/railties/lib/rails/application.rb),[`engine.rb`](https://raw.github.com/rails/rails/b04ec2764f62d5734c57959e2f00f9ef4345d52e/railties/lib/rails/engine.rb)或[`railtie.rb`](https://raw.github.com/rails/rails/b04ec2764f62d5734c57959e2f00f9ef4345d52e/railties/lib/rails/railtie.rb)中。也许如果我设法找到这种方法，我就会找到我主要问题的答案。

同样相关的是，我已经非常详细地研究了[Rails 初始化过程](http://guides.rubyonrails.org/initialization.html)，我什至找不到`config/environments/*.rb`文件的提及。如果我知道初始化过程如何处理这些文件，那可能会对此有所了解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T21:03:52.403

它是 railties gem 中`config`的一个方法，它返回一个实例，定义在.`Rails::Application``lib/rails/application.rb``Application::Configuration``lib/rails/application/configuration.rb`

该方法`configure`由ed 模块, ,`Railtie`提供, 并定义为`autoload``Configurable``lib/rails/railtie/configurable`

```
def configure(&block)
  class_eval(&block)
end 
```

这解释了为什么`configure`接受的块可以解析`config`符号。请注意，这`class_eval`是使这项工作发挥作用的另一个 ruby​​ist 魔法：它将传入块的`self`符号重新绑定到调用站点的类。

检查引导过程部分的第一个文件中的注释，其中解释了所有这些优点的来源、方式和顺序，包括如何`/config/environments`处理目录。

# connection-string - 我可以以编程方式实例化一个命名的 LocalDb 实例吗？

> ID：13424179
> 
> 赞同：6
> 
> 时间：2012-11-16T20:46:45.020
> 
> 标签：connection-string, dbcontext, localdb

我有一个使用 LocalDb 的 WinForms 应用程序。当然，在我的开发箱上，这很好用。当我将应用程序部署到另一个盒子时，我收到以下错误消息：

“建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。”

关于这个问题，我浏览了 Stackoverflow 上的许多帖子——大多数似乎与连接字符串有关。

我遇到的问题之一是在我的开发框中，我启动了一个名为 LocalDb 的实例。在我的安装目标上，我正在运行 LocalDb 安装 MSI。

对于已安装的实例，有没有办法以编程方式实例化命名的 LocalDb 实例或连接到默认的 LocalDb 实例？

是否可以以编程方式实例化一个命名的 LocalDb 实例？

或者我可以使用 (localdb)\v11.0 创建一个可用于打开我的 LocalDb 数据库的连接字符串吗？

我也在开发中使用 DbContext - 再次在开发框中，LocalDb 和 DbContext 工作正常。使用 DbContext 和 EF 会影响目标框上的 LocalDb 连接字符串吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T21:17:17.670

其实有两种方式：

1.  [来自 LocalDB API 的LocalDBCreateInstance](http://msdn.microsoft.com/en-us/library/hh214784.aspx)函数，用于本机 C/C++ 代码并通过 PInvoke
2.  [应用程序的 app.config 中的system.data.localdb / localdbinstances 元素](http://msdn.microsoft.com/en-us/library/hh309441.aspx)（仅限 .NET 应用程序，需要 .NET 4.0.2 或更高版本）

# html5-audio - 在黑莓网络上使用广播的互联网广播

> ID：13424182
> 
> 赞同：1
> 
> 时间：2012-11-16T20:47:05.733
> 
> 标签：html5-audio, blackberry-webworks, shoutcast

我的问题很简单：

如何在黑莓网络应用程序中播放广播网址。我的目标是 OS6 及更高版本。

谢谢

# jquery - goToNext 动画

> ID：13424183
> 
> 赞同：0
> 
> 时间：2012-11-16T20:47:16.967
> 
> 标签：jquery, animation, anchor, smooth-scrolling

我正在创建一个导航锚点的链接，但想为滚动添加动画

IE...`1000,'easeInOutExpo'`

但似乎无法弄清楚如何让它工作。

这是它的原始代码：

```
<a href="#" onclick="goToNext();return false;">===></a>

<script>
    var max = 5;

    function goToNext() {
        var hash = String(document.location.hash);
        if (hash && hash.indexOf(/box/)) {
            var newh = Number(hash.replace("#box",""));
            (newh > max-1) ? newh = 0 : void(null);
            document.location.hash = "#box" + String(newh+1); 
        } else {
            document.location.hash = "box1";        
        }
    }
</script> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:21:44.280

对于动画滚动尝试 -

[http://www.sycha.com/jquery-smooth-scrolling-internal-anchor-links](http://www.sycha.com/jquery-smooth-scrolling-internal-anchor-links)

更新：

试试这个...

```
<a href="#" onclick="goToNext();return false;">===></a>

<script>
    var max = 5;

    function goToNext() {
        var hash = String(document.location.hash);
        if (hash && hash.indexOf(/box/)) {
            var newh = Number(hash.replace("#box",""));
            (newh > max-1) ? newh = 0 : void(null);
            $('html,body').animate({scrollTop:$("#box" + String(newh+1)).offset().top}, 500);
        } else {
            $('html,body').animate({scrollTop:$("#box1").offset().top}, 500);
        }
    }
</script> 
```

# uitabbarcontroller - 使用情节提要获取 UIActionSheet showFromTabBar 的 TabBar 参考

> ID：13424186
> 
> 赞同：3
> 
> 时间：2012-11-16T20:47:32.833
> 
> 标签：uitabbarcontroller, storyboard, uitabbar, uiactionsheet

我有一个带有初始启动视图控制器的情节提要，然后是标签栏控制器、导航控制器和表格视图控制器。我需要从我的一个 tableview 控制器中展示一个操作表。

[UIActionSheet showInView:self.view] 不起作用，因为没有检测到落在标签栏区域的触摸，所以我必须使用 [UIActionSheet showInTabBar:tabBar]。

我的问题是如何获得对标签栏或 UITabBarController 的引用。Xcode 不允许我将 UITabBarController 或 UITabBar 的引用出口连接到我的任何自定义视图控制器（可能是因为情节提要上的视图控制器不是静态对象，而是仅在必要时创建并由 segues 关联（？） ，所以你不应该那样做），但这让我无法直接进入标签栏。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-21T20:34:56.540

这个问题可能有更好的答案： [Storyboard - UITabBarController](https://stackoverflow.com/questions/8336997/storyboard-uitabbarcontroller)

简而言之，将根视图控制器从您的 appdelegate 窗口中拉出。

我只是在 viewWillAppear 中执行了以下操作来隐藏该特定视图的标签栏：

```
AppDelegate *ap = (AppDelegate *)[[UIApplication sharedApplication] delegate];
UITabBarController *tc = (UITabBarController *)[[ad window] rootViewController];
[[tc tabBar] setHidden:YES]; 
```

# css - 表格 td 宽度被内部文本覆盖

> ID：13424192
> 
> 赞同：0
> 
> 时间：2012-11-16T20:48:20.797
> 
> 标签：css, less

我有一个 td 表字段，其指定宽度为 20px，高度为 200px。我在这个 td 中有“以前”这个词。此文本旋转 90 度。吨

```
<table id="next-arrow">
    <tr>
        <td><a href="#"><span>Previous</span></a></td>
    </tr>
</table> 
```

我的CSS（少）如下：

```
#previous-arrow
    {
        position: absolute;
        top: 600px;
        left: @vert-out + 10;

        td
        {
            height: @carousel-height;
            width: 20px;
            background-color: @yellow;

            span
            {
                display: block;
                -webkit-transform: rotate(-90deg);

            }
        }
    } 
```

td 的宽度似乎被其文本的长度所覆盖——文本越长，td 越宽。看起来好像水平记录了文本的长度，然后设置了 td 宽度，然后旋转了文本。我尝试将 !important 添加到 td 的宽度，但 td 仍会根据文本的长度进行调整。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:49:40.997

哇！这很快......在 div 中设置一个最大宽度，问题就解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T20:54:09.653

用这个替换你的**CSS**

```
#next-arrow{
    position: absolute;
    top: 600px;
    left: @vert-out + 10;
}

#next-arrow td{
    height: @carousel-height;
    max-width: 20px;
    background-color: yellow;
}

#next-arrow span{
    display: block;
    -webkit-transform: rotate(-90deg);
} 
```

**演示** [http://jsfiddle.net/ddxVM/](http://jsfiddle.net/ddxVM/)

# c# - 使用asp的gridview RowUpdating事件：命令字段类型按钮

> ID：13424194
> 
> 赞同：0
> 
> 时间：2012-11-16T20:48:27.547
> 
> 标签：c#, asp.net, ajax, gridview, commandfield

我正在使用 asp 命令字段类型按钮来编辑 gridview 行。每当用户更新记录时，假设网格中不会显示一行。ShowAllClasses() 方法假设从 sql db 中获取记录，不包括最近更新的行。

现在“更新”命令字段按钮的行为。

**本地主机**：当我单击按钮时，它会隐藏该行（意味着再次完成绑定）。在这种情况下，记录会更新一次。（按要求）

**在已部署的应用程序上**：用户单击该行时，该行不会隐藏，并且用户可以多次单击该按钮（好像功能不起作用）。但是当用户停止单击按钮时，在稍有延迟后，gridview 的编辑模式就会消失，并且会在触发更新后绑定。

不好的是每次单击按钮时 sql 表都会更新。帮助我如何解决这个问题。

这是我正在使用的代码

**GridView1 内命令字段的标记**：

```
<asp:CommandField ButtonType="Button" HeaderText="Edit/Update" ShowEditButton="True"
                            ShowHeader="True" UpdateText="Set Class" ItemStyle-HorizontalAlign="Center" /> 
```

**GridView 行更新事件**：

```
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{

        lblError.Text = string.Empty;

        int iTutorID = Convert.ToInt32(Session["EID"]);

        DropDownList ddlTime = GridView1.Rows[e.RowIndex].FindControl("ddlClassTime") as DropDownList;
        string sClassTime = ddlTime.SelectedItem.Text;

        HiddenField hf = GridView1.Rows[e.RowIndex].FindControl("sIdHidden") as HiddenField;
        int iSID = Convert.ToInt32(hf.Value);

        hf = GridView1.Rows[e.RowIndex].FindControl("cIdHidden") as HiddenField;
        int iCID = Convert.ToInt32(hf.Value);

        hf = GridView1.Rows[e.RowIndex].FindControl("hfClassTime") as HiddenField;
        string sOriginalClassTime = hf.Value.ToString();

        if (sOriginalClassTime.Length < 8)
            sOriginalClassTime = "0" + sOriginalClassTime;

        DropDownList ddlDate = GridView1.Rows[e.RowIndex].FindControl("ddlClassDate") as DropDownList;
        DateTime dNewDate = Convert.ToDateTime(ddlDate.SelectedValue);

        Label lblLesson = GridView1.Rows[e.RowIndex].FindControl("lblLesson") as Label;
        string sLesson = lblLesson.Text;

        DateTime dClassDate = Convert.ToDateTime(ddlAdvDay.SelectedValue);

        //cond: same date and same time set
        if (sOriginalClassTime == sClassTime && dNewDate == dClassDate.Date)
        {
            //show error
            lblError.Text = "Same class date and time cannot be set as Advanced class";
            return;
        }

        lblError.Text = string.Empty;

        BLClass blClass = new BLClass();
        //1\. insert in makeup table today's class
        //2\. insert in classdetails table

        //1\. insert in makeup table with today's date
        blClass.InsertAdvancedClass(iTutorID, iSID, iCID, dClassDate, dNewDate);

        //2\. insert in classdetails table
        blClass.InsertClassDetails(iTutorID, iSID, iCID, dNewDate, sClassTime, "Advanced", sLesson);           

        GridView1.EditIndex = -1;
        ShowAllClasses();
} 
```

**使用 DataSource 绑定网格的方法**：

```
private void ShowAllClasses()
{
        lblError.Text = string.Empty;

        int iTutorID = Convert.ToInt32(Session["EID"]);    

        BLClass blClass = new BLClass();

        DateTime dClassDate = Convert.ToDateTime(ddlAdvDay.SelectedValue);

        DataTable dtClass = blClass.GetAdvancedClasses(iTutorID, dClassDate.Date);            

        //temp method for date display format
        FixDateFormat(dtClass);
        dtClass.AcceptChanges();

        GridView1.DataSource = dtClass;
        GridView1.DataBind();
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:42:46.723

在行更新事件结束时禁用更新链接按钮。然后在行编辑事件中将控件设置为活动。这将阻止用户单击该按钮两次。听起来与生产服务器的连接不好。

```
 this.mybutton.enabled = false: 
```

# linux - 如何以编程方式检测 Linux 或 OS X 中的可用实用程序

> ID：13424196
> 
> 赞同：3
> 
> 时间：2012-11-16T20:48:36.797
> 
> 标签：linux, macos, bash, shell, cygwin

> **可能重复：**
> [找出 POSIX 系统上是否存在命令](https://stackoverflow.com/questions/762631/find-out-if-a-command-exists-on-posix-system)
> [如何在 bash 中找到可用的可执行文件](https://stackoverflow.com/questions/8401863/how-to-find-a-usable-executable-file-in-bash)

在命令行上我会输入（例如）`type vimdiff`（或者`which vimdiff`如果`type`在机器上不可用）。但是在脚本中，检查实用程序然后根据其可用性采取一些操作的最可靠方法是什么。

`thediff`手头的目的（如果有帮助的话）是我正在编写一个函数（对于 OS X 和 Windows/Cygwin 环境），如果不可用，则尝试`vimdiff`使用它，如果不可用，则默认`diff`使用我的首选选项（例如`--side-by-side --suppress-common-lines --ignore-space-change`'）。

由于`which`它给出的反馈形式是出了名的不可靠，我不确定如果没有安装相关实用程序，我是否可以指望`$?`它。`1`但另一方面，我不确定我是否可以依赖`type`安装。

看起来很笨拙，但是尝试第一个实用程序怎么样，如果`$?`不为零，那么尝试下一个，等等。

这个一般是怎么处理的？

***更新***：

尽管我确实用“bash”标记了这个，但这只是为了引起关注 bash 标记的人的注意，因为他们很可能知道答案。我*并不是*要暗示我只使用过 bash，或者我可以假设 bash 将出现在我使用的所有系统上。事实上，我不得不在脾气暴躁的系统管理员使除了 Korn shell 之外的任何东西都难以使用的系统上工作。并且（只要可用）我使用 zsh 而不是 bash。所以这*不是*[如何在 bash 中找到可用的可执行文件](https://stackoverflow.com/questions/8401863/how-to-find-a-usable-executable-file-in-bash)的完全相同的副本，因为这需要 bash。所以问题是不同的。此外，*我明确表示我必须使用`type`不可*用的系统。所有的关闭者显然都忽略了这个事实。

如果我提到的所有系统实际上都符合 POSIX ，*那么*这个问题可能是另一个问题的重复。我不知道他们是不是。

# php - 使用 WinJS.xhr() 检索 JSON：

> ID：13424198
> 
> 赞同：1
> 
> 时间：2012-11-16T20:48:39.787
> 
> 标签：php, javascript, json, windows-runtime

我在 winjs.xhr 中检索聊天消息时遇到问题：

```
 function getMessage() {
        var time = MESSAGE_RETURNED.unixtime;
        if (time == 0) {
            time= window.parent.SESSION.unixtime;
        }

        WinJS.xhr({
            url: "http://www.example.com/scripts/default.php?"
               + "action="+ACTIONS.GET_MESSAGE
               + "&username=" + window.parent.SESSION.username
               + "&session_id=" + window.parent.SESSION.session_id
               + "&unixtime=" + time
        }).done(
           function fulfilled(result) {
               console.log("action=" + ACTIONS.GET_MESSAGE
               + "&username=" + window.parent.SESSION.username
               + "&session_id=" + window.parent.SESSION.session_id
               + "&unixtime=" + time);//CHECK INPUTS , ALL GREEN

               if (result.status === 200) {

                   if (result.response.toString.length === 0) {
                       return false;
                   }//ALWAYS TRUE;
                   else {
                       console.log(JSON.parse(result.response));

                  }
               } else {
                   document.getElementById("messagelogarea").value += result.status + "\r\n";
               }
           });
    } 
```

我正在尝试从 php 中检索 JSON。但是，使用 WinJS.xhr 时，我返回的响应始终为空。如果将直接链接放在我的浏览器中，我将得到如下结果：（一个包含 3 条聊天消息的数组）

```
{
    "message": [
        {
            "_id": "428",
            "from_TBonlineusers_id": "00477",
            "fromTBonlineusers_username": "GUEST_477",
            "fromTBonlineusers_type": "GUEST",
            "messagetype": "PUBLIC",
            "message": "wat?xxwiii",
            "chatmessagetime": "2012-11-16 15:36:06",
            "unixtime": "1353098166"
        },
        {
            "_id": "429",
            "from_TBonlineusers_id": "00477",
            "fromTBonlineusers_username": "GUEST_477",
            "fromTBonlineusers_type": "GUEST",
            "messagetype": "PUBLIC",
            "message": "wat?xxwiii",
            "chatmessagetime": "2012-11-16 15:42:42",
            "unixtime": "1353098562"
        },
        {
            "_id": "430",
            "from_TBonlineusers_id": "00477",
            "fromTBonlineusers_username": "GUEST_477",
            "fromTBonlineusers_type": "GUEST",
            "messagetype": "PUBLIC",
            "message": "wat?xxwiiir",
            "chatmessagetime": "2012-11-16 15:42:48",
            "unixtime": "1353098568"
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:09:57.597

`toString`是大多数对象的方法。

你的线`result.response.toString.length`应该是`result.response.toString().length`

# c# - 从方法返回的值有多安全？

> ID：13424204
> 
> 赞同：4
> 
> 时间：2012-11-16T20:48:59.350
> 
> 标签：c#, security, .net-3.5

我正在为应用程序做一些基本的安全工作。当用户登录时，他们的凭据通过 Active Directory 进行验证。有时，用户请求更改导致程序重新启动。由于此应用程序不是单实例程序，因此我只需启动另一个实例并关闭当前实例。应用程序中的一切都很好。

但是，用户对每次重新启动时都必须重新登录感到不满。所以我拼凑了一些基本的安全性，使用 SecureString 将密码存储在应用程序中。如果应用程序重新启动，密码会被解密，然后使用 CodeProject 中 Rijndael 算法的基本实现重新加密。应用程序将用户名和加密密码作为命令行参数传递给新实例。应用程序需要加密密码，因为任何进一步的调用`wmic process`都会显示密码。新实例解密密码，静默地针对 Active Directory 验证它，并像往常一样将其存储为 SecureString。

我对一般的安全实践不太熟悉。从解密方法返回密码我有点紧张。它本身没有存储在任何变量中，因为调用是在 Active Directory 验证请求中进行的。我仍然不确定返回的密码是否可以在内存中的某个地方访问，或者它是否存储在寄存器中。

这个过程不需要是有史以来最大的安全性。如果人们可以轻松访问内存内容，它只需要阻止人们以明文形式获取密码。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T20:52:57.607

你的攻击模型是什么？

1.  如果您假设服务器归攻击者所有，那么您在所有情况下都会丢失。
2.  如果您假设服务器是安全的，则根本不需要任何加密。

所以我想我的建议是放弃你正在做的所有服务器端加密，因为你假设服务器无论如何都是安全的。没有人可以访问您服务器的内存，如果有人可以，您无论如何都会被拥有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T23:10:30.293

在 .NET 应用程序中，函数返回值被推送到“评估堆栈”上，该堆栈驻留在进程内的受保护内存中。但是，您正在谈论的是一个字符串，这是一个引用类型，因此评估堆栈上的内容是指向该字符串在堆上的位置的指针。堆内存相对不安全，因为它可以共享，而且只要 GC 认为不需要收集它，它就会存在，这与高度易失的评估或调用堆栈不同。但是，要访问堆内存，该内存必须是共享的，并且您的攻击者必须拥有一个获得操作系统和 CLR 许可的应用程序才能访问该内存，并且该应用程序知道在哪里查找。

如果攻击者具有这种访问权限，则有*更简单的方法可以从计算机获取明文密码。*键盘记录器可以查看输入的密码，或者另一个窥探者可以查看 GDI UI 的非托管端的实际句柄，并查看实际显示在 Windows GUI 中的文本框获取明文值（它仅在显示器上被混淆）。所有这一切都无需尝试破解 .NET 的代码访问安全性或受保护的内存。

如果你的攻击者有这种控制，你就输了。因此，这应该是第一道防线；确保客户端计算机上没有此类恶意软件，并且用户尝试登录的客户端应用程序实例没有被破解的相似对象替换。

至于实例之间的模糊密码存储，如果您担心内存窥探，那么像 Rijndael 这样的对称算法是无法防御的。如果您的攻击者可以看到客户端计算机的内存，他就知道用于加密它的密钥，因为您的应用程序需要知道它才能解密它；因此，它将被硬编码到客户端应用程序中，或者将存储在安全字符串附近。同样，如果您的攻击者拥有这种控制权，那么如果您在客户端进行身份验证，您就输了。

相反，我会在物理和电子安全的机器上使用服务层来提供您的应用程序的任何功能，如果被攻击者滥用（主要是数据检索/修改）会对您造成伤害。该服务层可用于验证和授权用户执行客户端应用程序允许的任何操作。

考虑以下：

*   用户将他们的凭据输入到您的客户端应用程序中。这些凭据可以与 AD 凭据相同，但不会照此使用。防止键盘记录器或其他恶意软件看到这一点的唯一方法是通过强制执行良好的 AV 软件来确保计算机上不存在此类恶意软件。
*   客户端应用程序通过 WCF 连接到您的服务终结点。端点可以使用 X.509 证书进行签名；不是 NSA 级别的安全性，但至少您可以确信您正在与您控制的服务器通信。
*   然后，客户端应用程序使用生成大摘要的东西（如 SHA-512）对您的用户密码进行哈希处理。这本身并不安全；它太快并且用户密码的熵太低，无法防止攻击者破解哈希。然而，同样，他们必须控制计算机才能看到哈希，我们将进一步混淆它。
*   客户端应用程序通过 WCF 通道传输客户端计算机的用户名、密码和硬件 ID。
*   服务器获取这些凭据。请注意，服务器没有得到明文密码；这是有原因的。
*   服务器将散列密码分成 256 位的一半。然后对前半部分进行 BCrypted（使用配置为适当慢的实现；通常需要 10 或 11 个“轮”），并与用户数据库中的散列值进行比较。如果它们匹配，则数据库返回用户的 AD 凭据，这些凭据已使用另一半密码哈希进行对称加密。这就是为什么永远不会发送明文密码的原因；服务器不必知道它，但攻击者会为了从被盗的用户数据库副本中获取任何有意义的东西。
*   服务器解密 AD 凭据，将它们提交给 AD，并接收代表该用户身份和安全上下文的 IPrincipal。IPrincipal 实现将包含可用于破解用户帐户的零信息。
*   服务器生成一个加密随机的 128 位值，连接 128 位硬件 GUID，并使用 SHA512 对其进行哈希处理。它使用该哈希的一半来对称加密用于解密 AD 凭据的密钥值。然后它对另一半进行加密，并将该哈希存储在加密密钥旁边。
*   然后，服务器通过安全 WCF 通道传回三条信息；AD 生成的 IPrincipal、未散列的 128 位随机值（“传输令牌”）和另一个任意长度的加密随机值（“会话令牌”）。
*   客户端应用程序现在在客户端进行了身份验证，这意味着您可以通过询问 IPrincipal 以获得 AD 角色成员身份来控制用户对代码的访问，并且服务器现在也确信拥有会话令牌的用户是真实用户。在对服务进行任何进一步调用（数据检索/持久性）时，客户端应使用已协商的 WCF 通道，并传递其会话令牌。WCF 通道和会话令牌的组合是一次性且唯一的；在新通道上使用旧令牌，或在同一通道上传递错误令牌，表明会话已被破坏。最重要的是，无论何时何地，存储在客户端或服务器中的任何持久数据都不能用于获取 AD 凭据并进行身份验证。

现在，当您的客户端应用程序关闭时，客户端和服务器之间的所有“会话状态”都会丢失；会话令牌对任何其他协商通道均无效。所以，你失去了身份验证；下一个连接的客户可能是任何人，无论他们说自己是谁。这就是“转移令牌”的用武之地：

*   “转移令牌”是返回系统的免费通行证。它是一次性的，如果在发行后 18 小时内未使用，则会过期。
*   客户端应用程序在关闭时将两条信息传递给新实例（不管它选择这样做）；登录人的用户名，以及“转账令牌”。
*   客户端应用程序的新实例获取这两条信息，并且还获取客户端计算机的硬件 ID。它与 WCF 服务协商安全连接，并传递这三个信息。
*   如果用户最后一次登录是在 18 小时前（不是 24 小时，所以他们不能比昨天早一分钟出现并重新启动应用程序），或者如果你想非常偏执，超过 8 小时前，该应用程序立即返回该帐户的转移令牌已过期的错误。
*   该服务获取传输令牌，连接硬件 ID、SHA-512s、BCrypts 一半，并将结果与​​存储的第二个验证值进行比较。只有传输令牌和最后登录的机器的正确组合才会产生正确的哈希值。如果匹配，则使用哈希的另一半解密密钥，然后解密 AD 信息。
*   然后服务继续进行，就像用户提供了应用程序密码哈希一样，解密 AD 信息，检索 IPrincipal，生成新的传输令牌、会话令牌，并重新加密 AD 数据的密钥。
*   如果此过程的任何部分失败（尝试使用不正确的令牌，包括两次使用相同的令牌，或者使用来自不同机器或不同用户的令牌），服务会报告凭据无效。然后，客户端应用程序将回退到标准的用户密码验证。

这就是问题所在；这个系统依靠一个除了用户的头脑之外不存在任何地方的秘密密码，没有后门；管理员无法找回丢失的客户端应用密码。此外，必须更改 AD 凭据时，只能从客户端应用程序中更改；用户不能在 Windows 登录时被 AD 本身强制更改其密码，因为这样做会破坏他们进入客户端应用程序所需的身份验证方案（加密的凭据将不再有效，并且客户端应用程序凭据是需要重新加密新的）。如果您能够以某种方式在 AD 中拦截此验证，并且客户端的应用程序凭据是 AD 凭据，您可以自动更改用户应用程序中的凭据，但现在您'

最后，这个安全系统的这个变体仅在一个原则上起作用；服务器当前没有被攻击者入侵。有人可以进去，下载离线数据，然后他们就卡住了；但是如果他们可以安装一些东西来监控内存或流量，你就会被淹没，因为当凭据（用户名/密码哈希或传输令牌/硬件 ID）进入并经过验证时，攻击者现在拥有解密用户的密钥AD 凭据。通常情况下，客户端从不发送解密密钥，只发送哈希密码的验证一半，然后服务器发回加密的凭据；但是，您认为客户端比服务器具有更大的安全风险，所以只要这是真的，它'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T22:23:13.033

看看这个： [密码盐（维基百科）](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)

总结一下方法：

1.  当您想将密码 P 存储到磁盘时，生成一个随机字符串 S（称为 salt），然后存储元组 (S, SHA1Hash(P + S))。
2.  当您想根据存储的密码检查密码尝试 P' 时，请将 SHA1Hash(P' + S) 与存储的哈希值进行比较。
3.  当您传递这个密码尝试时，只传递散列版本，即 SHA1Hash(P' + S)。

# cakephp - 关联仅适用于 $scaffold

> ID：13424211
> 
> 赞同：0
> 
> 时间：2012-11-16T20:49:36.433
> 
> 标签：cakephp

Cake 的新手，正在尝试建立模型关联。我正在创建一个执行计划器，供多个团队使用，也就是“组”，其中计划的基本单元是“事件”。每个活动由一个团队拥有，但它可以有多个支持团队。

当我在控制器中使用 $scaffold 时，模型关联按预期工作，当添加新事件时，我会得到一个包含所有组的选择框，以选择谁拥有事件。但是，当我使用控制台烘焙控制器时，选择框为`group_id`空白。我已经包含了`add()`来自控制器和烘焙添加视图的烘焙代码。我也试过`debug($this)`了`add.ctp`，发现组列表确实正在传递给视图。因此，我很困惑为什么它可以与 $scaffold 一起使用，但不是。

任何正确方向的建议或指示将不胜感激。

**表：**

```
CREATE TABLE IF NOT EXISTS `events` (
  `id` int(5) NOT NULL AUTO_INCREMENT,
  `group_id` int(5) NOT NULL COMMENT 'Group that owns event',
  `version` int(5) NOT NULL,
  `type` varchar(5) NOT NULL,
  `stime` time NOT NULL,
  `etime` time NOT NULL,
  `description` text NOT NULL,
  `comment` text NOT NULL,
  PRIMARY KEY (`id`)
);

CREATE TABLE IF NOT EXISTS `events_groups` (
  `id` int(5) NOT NULL AUTO_INCREMENT,
  `event_id` int(5) NOT NULL,
  `group_id` int(5) NOT NULL,
  PRIMARY KEY (`id`)
) ;

CREATE TABLE IF NOT EXISTS `groups` (
  `id` int(5) NOT NULL AUTO_INCREMENT,
  `code` varchar(4) NOT NULL,
  `name` varchar(25) NOT NULL,
  `liveversion` int(4) NOT NULL,
  `lastupdated` date NOT NULL,
  PRIMARY KEY (`id`)
); 
```

**楷模：**

事件：

```
public $belongsTo = array(
    'Prigroup' => array(
        'className' => 'Group',
        'foreignKey' => 'group_id',
        )
    );

public $hasAndBelongsToMany = array(
    'Secgroup' => array(
        'className' => 'Group',
        'joinTable' => 'events_groups',
        'foreignKey' => 'event_id',
        'associationForeignKey' => 'group_id',
    )
); 
```

团体：

```
public $hasMany = array(
    'Prievent' => array(
        'className' => 'Event',
        'foreignKey' => 'group_id',
        )
    );

public $hasAndBelongsToMany = array(
    'Secevent' => array(
        'className' => 'Event',
        'joinTable' => 'events_groups',
        'foreignKey' => 'group_id',
        'associationForeignKey' => 'event_id',
    )
); 
```

**事件控制器片段：**

```
public function add() {
    if ($this->request->is('post')) {
        $this->Event->create();
        if ($this->Event->save($this->request->data)) {
            $this->Session->setFlash(__('The event has been saved'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The event could not be saved. Please, try again.'));
        }
    }
    $prigroups = $this->Event->Prigroup->find('list');
    $secgroups = $this->Event->Secgroup->find('list');
    $this->set(compact('prigroups', 'secgroups'));
} 
```

**添加视图：**

```
<?php echo $this->Form->create('Event'); ?>
    <fieldset>
        <legend><?php echo __('Add Event'); ?></legend>
    <?php
        echo $this->Form->input('group_id');
        echo $this->Form->input('version');
        echo $this->Form->input('type');
        echo $this->Form->input('stime');
        echo $this->Form->input('etime');
        echo $this->Form->input('description');
        echo $this->Form->input('comment');
        echo $this->Form->input('Secgroup');
    ?>
    </fieldset>
<?php echo $this->Form->end(__('Submit')); ?> 
```

**添加 HTML 输出**

```
<div class="input select"><label for="EventGroupId">Group</label><select name="data[Event][group_id]" id="EventGroupId">
</select></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:24:40.233

你可以帮我试试吗？将 $prigroups 变量重命名为“groups”并将其传递给视图。看看这是否有效。否则，将其与旧代码一起使用：

```
echo $this->Form->input(
    'group_id',
    array(
        'options' => $prigroups
    )
); 
```

我还建议您对所有这些 PriGroups 和 SecGroups 使用驼峰式大小写。这是英语中的两个词，因此建议使用驼峰式。

问候 func0der

# c - 新的 C11 标准是否支持 lambda？

> ID：13424215
> 
> 赞同：-3
> 
> 时间：2012-11-16T20:49:42.247
> 
> 标签：c, standards, lambda

我们知道 C++11 确实有 lambda，但 C11 有吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T20:54:04.647

不，不是，您可以在 wiki中查看[C99 的更改](http://en.wikipedia.org/wiki/C11_%28C_standard_revision%29#Changes_from_C99)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T20:54:03.397

不，不，它没有。一点也不。没有。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-16T20:56:00.863

不，它没有。这是 C++11 独有的功能。

# position - 从行中查找位置并用另一个表标记？

> ID：13424219
> 
> 赞同：-4
> 
> 时间：2012-11-16T20:50:07.177
> 
> 标签：position

我有一个表，其中一个字段长 40 个字符，值是这样的

```
00A000GB000C000000000F000000D0000000000E 
```

现在我需要找出每个填充字符的位置并加入另一个表，另一个表有字段调用位置。例如

从上面的字段中，A 是第 3 位，G 是第 7 位，B 是 8，所以我必须找到填充的字段（<>0）的位置，然后加入另一个表。

请让我知道我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T20:59:52.020

我认为社区需要更多信息来帮助解决这个问题。

我在看这个时有几个问题是：

1.  您使用的是什么类型的数据库？
2.  您是在寻找与另一个表实际联接还是在谈论用数据填充另一个表？如果是连接，您使用什么类型的数据来链接 2 个表？
3.  你想用 SQL 来做这件事吗？
4.  您正在使用哪种编程语言？

在我看来，您将需要进行一些编程来处理这个问题。不知道上述问题的答案，我正在尝试一些事情，并建议从数据库中提取数据，处理数据以找到位置，然后根据您处理的数据从第二个表中进行选择。

# http - IIS http响应标头内容过期未显示

> ID：13424220
> 
> 赞同：2
> 
> 时间：2012-11-16T20:50:15.893
> 
> 标签：http, iis, header

我正在尝试为内容过期设置 http 响应标头。我会假设来自服务器的响应头会显示这个，但是我无法弄清楚它是如何传输回调用应用程序的。

当我将“Web 内容过期”设置为 30 分钟后过期时，响应仍然显示以下内容。

```
Content-Length: 4691
Cache-Control: private, max-age=0
Content-Type: text/html; charset=utf-8
Date: Fri, 16 Nov 2012 20:38:39 GMT
Server: Microsoft-IIS/7.5
X-AspNet-Version: 2.0.50727
X-Powered-By: ASP.NET 
```

我期待的是类似于以下内容：

```
Connection: close
Accept-Ranges: bytes
Content-Length: 689
Cache-Control: max-age=1800
Content-Type: text/html
Date: Thu, 08 Nov 2012 00:36:19 GMT
ETag: "f94ce92e467cc1:0"
Last-Modified: Wed, 31 Aug 2011 13:43:48 GMT
Server: Microsoft-IIS/7.5
X-Powered-By: ASP.NET 
```

# php - 如何组合两个关联数组，在保留键的同时删除重复值，以及按字母顺序排序

> ID：13424223
> 
> 赞同：0
> 
> 时间：2012-11-16T20:50:42.080
> 
> 标签：php, associative-array, array-merge, array-unique

所以我有两个带有家庭成员和姓名的关联数组。每个数组都有相同的索引键，但值不同。我需要组合这两个数组，删除重复值，而不是重复键，然后按字母顺序对其进行排序。

到目前为止我有

```
Array1 = array(
    "Grandma"=>"Laurie", 
    "Grandpa"=>"John",
     "Uncle"=>"Jeff", 
     "Aunt"=>"Julie", 
     "Cousin1"=>"Julie",
     "Cousin2"=>"Anna");
$Array2 = array(
    "Grandma"=>"Shannon", 
    "Grandpa"=>"Phillip",
     "Uncle"=>"Mike", 
     "Aunt"=>"Laurie", 
     "Cousin1"=>"Anna",
     "Cousin2"=>"Jeff",
     "Cousin3"=>"Kate"); 
//Combine the arrays
$array = array_merge_recursive($Mother_side, $Father_side); 
```

到目前为止一切顺利，但后来我尝试：

```
 $Distinct_names = array_unique($array); 
```

我得到错误注意：数组到字符串的转换。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:52:59.977

你不能`array_unique()`在多维数组上做；array_unique() 会将每个值转换为字符串并对它们进行比较，但它不能将数组转换为字符串 - 它不会产生预期的结果。

我认为你必须比你希望的更聪明一点；如果你给我五分钟，我也许能想出一些办法。:P

这将实现您想要的输出（按字母顺序排列的唯一名称数组），但它是非常快速和肮脏的解决方案：

```
$names = array();
foreach ($Array1 as $name) $names[] = $name;
foreach ($Array2 as $name) $names[] = $name;
$names = array_unique($names);
asort($names);
print_r($names); 
```

输出：

```
Array
(
    [0] => Laurie
    [1] => John
    [2] => Jeff
    [3] => Julie
    [5] => Anna
    [6] => Shannon
    [7] => Phillip
    [8] => Mike
    [12] => Kate
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T20:56:46.640

尝试：

```
 $array1 = array(
"Grandma"=>"Laurie", 
"Grandpa"=>"John",
 "Uncle"=>"Jeff", 
 "Aunt"=>"Julie", 
 "Cousin1"=>"Julie",
 "Cousin2"=>"Anna");

$array2 = array(
"Grandma"=>"Shannon", 
"Grandpa"=>"Phillip",
 "Uncle"=>"Mike", 
 "Aunt"=>"Laurie", 
 "Cousin1"=>"Anna",
 "Cousin2"=>"Jeff",
 "Cousin3"=>"Kate"); 

 //Combine the arrays
 $array = array_merge_recursive($array1, $array2);

 function multi_arr_unique($array)
{
$distinct = array_map("unserialize", array_unique(array_map("serialize", $array)));

foreach ($distinct as $k => $v)
{
 if ( is_array($v) )
 {
  $distinct[$k] = multi_arr_unique($v);
 }
}

return $distinct;
}

 multi_arr_unique($distinct); 
```

# arrays - 标准输入/文件输入

> ID：13424227
> 
> 赞同：1
> 
> 时间：2012-11-16T20:51:09.297
> 
> 标签：arrays, file, input, pascal

我可能有一个基本问题。我一直在尝试从文件中读取一个数组，然后从 Pascal 语言的标准输入中读取一个字符串。它不会发送错误消息，只是不会等到我在屏幕上写下输入字符串。我该怎么办？

这是我的代码：

```
Procedure beolvas(var x:rangsor; var n:byte; fajl:string);
var i:byte;

Begin
  Assign(input,fajl);
  Reset(input);
Readln(n);
for i:=1 to n do begin
   Readln(x[i].diak);
   Readln(x[i].atlag);
end;
close(input)
End;

Procedure beolvasnev(var s:string; x:rangsor; n:byte);
var i:byte;
Begin
Write('Kerem a diak nevet: ');
Readln(s);
End; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T23:12:52.950

完成文件变量后尝试`Assign(input, '');`（空文件名），即在您调用`close(input)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:20:02.760

您没有告诉程序从哪个文件中读取；在没有文件名的情况下，程序会尝试从控制台读取，这解释了你写“它只是不等到我在屏幕上写输入字符串”（不应该是“它等到我写输入字符串“？）。

我不知道这是不是故意的，但文件的第一行应该是一个整数值。最好从文件中读取一个字符串变量，然后在将其用作循环计数器之前检查该字符串是否为数字。

# memory-leaks - 完成导致内存泄漏的方法？

> ID：13424233
> 
> 赞同：0
> 
> 时间：2012-11-16T20:51:39.637
> 
> 标签：memory-leaks, javafx-2

我无法解决问题，需要您的帮助。当我点击菜单时，我打电话给客户帐户，然后我关闭它。每次我打电话给客户帐户时，内存都会增加。当我关闭帐户时它应该会减少，但它不会发生。

**班级菜单**

```
mnItemCL_Cust.setOnAction(new EventHandler<ActionEvent>() {
  @Override
  public void handle(ActionEvent t) {
    try {
      panCenterPrev = (Pane) root.getCenter();
      panCenterAct = Customer.listCustomer();
      root.setCenter(null);
      root.setCenter(panCenterAct);
      Customer.btCanc.setOnAction(new EventHandler<ActionEvent>() {
        @Override public void handle(ActionEvent e) {
          try {
            Customer.Fim();
            panCenterAct.getChildren().clear();
            panCenterAct = null;
            root.setCenter(null);
            root.setCenter(panCenterPrev);
          } catch (Throwable ex) {
            Logger.getLogger(Customer.class.getName()).log(Level.SEVERE, null, ex);
          }
        }             
}); 
```

**类客户**

```
public class Customer
{

  public static Pane listCustomer() throws SQLException, ClassNotFoundException
  {
    ...
    final ObservableList<MyCustomer> data = FXCollections.observableArrayList();
    ...
  }

  public static class MyCustomer {
    private final SimpleIntegerProperty idcl;
    private MyCustomer(Integer pIdcl ) {
      this.idcl = new SimpleIntegerProperty(pIdcl);  
    }

    public Integer getIdcl() {
         return idcl.get();
    }

    public void setIdcl(Integer pIdcl) {
        idcl.set(pIdcl);
    }
  }  

  public static void Fim() throws Throwable {
    ...
    rs = null;

    tbViewCL.getItems().clear();
    tbViewCL = null;
    colIDCL.getColumns().clear();
    colIDCL = null;
  }

  ...

  protected void finalize() throws Throwable {
    try{
      ...
      rs.close();
      ...// Never happens... why??  
    } catch(Throwable t) {
        throw t;
    } finally {
        JOptionPane.showMessageDialog(null,"End?");
        super.finalize();
    }
  } 
```

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:00:37.387

Java 通常会在它认为合适时回收您使用的内存，因此即使您最终确定了对象，内存可能仍然存在。但是，如果`rs.Close()`从不执行，可能是因为在它抛出和异常之前的某些东西，我建议您在之前检查代码以确保没有这样做，此外，如果您捕获异常是记录它的好习惯所以你可以知道发生了什么。

# asp.net - 在 IIS url 重写模块中设置规则

> ID：13424240
> 
> 赞同：3
> 
> 时间：2012-11-16T20:52:08.670
> 
> 标签：asp.net, iis, iis-7, url-rewriting

我正在寻求帮助制定 URL 重写规则以重定向所有以

http://localhost:13080/saCore/ws/messagebroker[这里有一些变化]

到

http://localhost:13080/saCore/ws/messagebroker/MessageBroker.asmx[这里有一些变化]

我只需要在消息代理部分之后将 MessageBroker.asmx 推送到路径中间。

感谢帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T21:10:06.443

这应该可以完成这项工作，您可以将其直接添加到`applicationHost.config`或使用 IIS 管理器来创建规则：

```
<rule name="RedirectBroker" stopProcessing="true">
    <match url="^saCore/ws/messagebroker(.*)" />
    <conditions>
        <add input="{HTTP_HOST}" pattern="^localhost$" />
        <add input="{SERVER_PORT}" pattern="^13080$" />
    </conditions>
    <action type="Rewrite" url="/saCore/ws/messagebroker/MessageBroker.asmx{R:1}" appendQueryString="true" />
</rule> 
```

# javascript - 如何将 json 或 geojson 映射到骨干模型中，然后如何将该模型映射到传单层

> ID：13424249
> 
> 赞同：0
> 
> 时间：2012-11-16T20:53:04.707
> 
> 标签：javascript, json, backbone.js, leaflet, backbone-model

我正在创建可以单独添加到集合中的图层定义，然后我将在其中渲染视图或从传单 api 渲染到 L.LayerGroup，但我不确定如何映射属性或是否有映射函数？我对 JavaScript 比较陌生。

我正在创建一个地图，并希望有一种简单的方法来通过 json 格式应用和加载叠加层。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:16:58.497

假设您的 geojson 中有这样的数据：

```
{"type":"Feature","properties":{"name":"Ireland"},"geometry":
{"type":"Polygon","coordinates":[[[-6.197885,53.867565],[-6.032985,53.153164], 
[-6.788857,52.260118],[-8.561617,51.669301],[-9.977086,51.820455],
[-9.166283,52.864629], [-9.688525,53.881363],[-8.327987,54.664519], 
[-7.572168,55.131622],[-7.366031,54.595841],[-7.572168,54.059956],[-6.95373,54.073702],
[-6.197885,53.867565]]]},"id":"IRL"}, 
```

您将获取对象的属性并在模型定义中定义并行属性。

然后，您可以轻松地将 geosjsonobject 放入模型构造函数中：

```
var Ireland = new MyCountryModel(my_geojson_object); 
```

为了处理您可能从服务器获取的解析 JSON，您`parse(response)`在模型和/或集合定义中定义了一个方法，该方法将您的服务器响应对象（字符串）作为参数，并且应该返回`JSON`准备好在集合初始化中使用的对象/模型

# document - autoCrat 命名谷歌文档

> ID：13424252
> 
> 赞同：0
> 
> 时间：2012-11-16T20:53:50.660
> 
> 标签：document

可以将独裁者设置为在合并时使用列标题来命名文档。我有一个表格，可以在电子表格中创建学生信息和最终成绩，我使用 autocrat 将电子表格中的数据合并到谷歌文档，但是每个合并的文档都有相同的名称，除非我在合并过程中或合并后更改它已经完成。似乎我们可以`<<Student>>`在“设置合并类型”步骤中的“要使用的文件命名约定”中使用，这将解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T22:43:08.500

如果我猜对了，你只需要在 autocrat 配置的第五步使用正确的标签。它可能类似于 $student。

# twitter-bootstrap - 客户端验证不适用于设计的简单表单

> ID：13424257
> 
> 赞同：2
> 
> 时间：2012-11-16T20:54:03.340
> 
> 标签：twitter-bootstrap, devise, ruby-on-rails-3.2, simple-form, client-side-validation

客户端验证在我的其他 simple_forms 上运行良好。我以其他形式使用的代码是：

```
 <%= simple_form_for @group, :validate => true , :html => { :class => 'form-horizontal' } do |f| %> 
```

在设计注册表单的情况下，代码为：

```
<%= simple_form_for(resource, :validate => true, :as => resource_name, :url => registration_path(resource_name)) do |f| %> 
```

我什至尝试过：

```
 <%= simple_form_for(@user, :validate => true, :url => registration_path(resource_name)) do |f| %> 
```

但它不起作用:(

我的宝石文件是：

```
gem 'simple_form'
gem "client_side_validations"
gem 'client_side_validations-simple_form' 
```

版本：

```
 client_side_validations (3.2.0)
   client_side_validations-simple_form (2.0.0)
    client_side_validations (~> 3.2.0)
    simple_form (~> 2.0.3) 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:56:21.250

首先，我建议升级到大约一个月前的 client_side_validations 3.2.1，尽管我在此版本中没有看到任何特定于设计的错误修复。

其次，它们都是很棒的包，但要知道 devise 和 client_side_validations 之间的历史充满了不兼容。在已关闭的问题中查看[此搜索以](https://github.com/bcardarella/client_side_validations/issues?page=1&state=closed)了解 csv 的含义。

第三，确保您在文档中查看[此页面](https://github.com/bcardarella/client_side_validations/wiki/Using-Devise)，该页面解释了如何解决 javascript 与电子邮件验证正则表达式不兼容的问题。

最后，查看[这个新的示例应用程序](https://github.com/dockyard/client_side_validations-devise_example)以确保您遵循相同的模式和实践。

# django - lighttpd 域重定向

> ID：13424259
> 
> 赞同：0
> 
> 时间：2012-11-16T20:54:06.860
> 
> 标签：django, redirect, lighttpd, http-redirect

我无法将多个域和关联的子域重定向到另一个域。继续陷入301无限循环。

我有 3 个域，代理到同一个 lighttpd 进程，比如：

```
dom.co
dom.info
dom.net 
```

dom.net 是我选择的域，我想要的是让每个人，包括 www.*，都进入我选择的域。（dom.net 正在运行）

我的 lighttpd.conf 有趣的部分：

```
$HTTP["host"] =~ "(^|\.)dom\.net$" {
    /* working */
}

$HTTP["host"] =~ "(^|\.)dom\.co$" {
    url.redirect = ( "^/(.*)" => "dom.net/$1" )
} 
```

日志：

```
IP dom.co - [16/Nov/2012:20:51:33 +0100] "GET /dom.net/ HTTP/1.0" 301 0 "-" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11"
IP dom.co - [16/Nov/2012:20:51:33 +0100] "GET /dom.net/dom.net/dom.net/ HTTP/1.0" 301 0 "-" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11"
et caetera. 
```

我了解正在发生的事情，而不是如何解决它。请帮忙 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:28:59.530

我和这个一起去了：

```
$HTTP["host"] =~ "^dom\.co" {
    /* ... */
}

# some redirections to dom.co
$HTTP["host"] =~ "dom.net|dom.info|www.dom.net|www.dom.info|www.dom.co" {
    url.redirect = ( "^/(.*)" => "http://dom.co/$1" )
} 
```

我认为目标网址前面没有 http:// 是造成麻烦的原因，虽然没有调整和尝试，但它现在可以工作了。

想法来自[https://serverfault.com/questions/105920/how-do-i-redirect-multiple-domains-to-a-single-domain-in-lighttpd](https://serverfault.com/questions/105920/how-do-i-redirect-multiple-domains-to-a-single-domain-in-lighttpd)

# jquery - 单个 div 触发切换

> ID：13424261
> 
> 赞同：0
> 
> 时间：2012-11-16T20:54:19.013
> 
> 标签：jquery, html

大家好，我正在尝试创建一个场景，每次单击“切换”时，我都会在“#one”、“#two”和“#three”之间切换

我不知道如何启动 jquery

```
<div class="switch">swicth</div>
<div id="one">1</div>
<div id="two">2</div>
<div id="three">3</div>

<style>
#one, #two, #three{
    display:none;
}
</style> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T20:57:14.570

试试这个：

```
$(".switch").toggle(
    function() { hideAll(); $("#one").show(); },
    function() { hideAll(); $("#two").show(); },
    function() { hideAll(); $("#three").show(); }
);

function hideAll() {
    $("#one, #two, #three").hide();
} 
```

[**示例小提琴**](http://jsfiddle.net/9XQJG/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T21:01:21.970

我会使用类选择器，它允许您拥有任意数量的此类`div`'s。

**演示：http:** [//jsfiddle.net/m7gSn/2/](http://jsfiddle.net/m7gSn/2/)

```
<div class="switch">swicth</div>
<div id="one" class="myc">1</div>
<div id="two" class="myc">2</div>
<div id="three" class="myc">3</div>  
<style> .myc { display:none; } </style> 
```

**JS：**

```
var $myc= $('.myc');
var cp = 0;

$('.switch').click (function () {       
   $myc.hide().eq(cp++).show();       
   if (cp == $myc.length) cp = 0;        
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T21:08:44.080

我想出了这个。将一个类添加`toggle`到要在以下之间旋转的 div 之后：

```
$(".switch").click(function() {
    var toggle = $(".toggle:visible");
    if (toggle[0]) {
       $(toggle[0]).hide();
       var next = $(toggle[0]).next(".toggle");
       if (next[0]) {
         $(next[0]).show();   
       }
       else {
         $(".toggle").first().show();
       }
    }
    else {
        $(".toggle").first().show();
    }        
}); 
```

[演示](http://jsfiddle.net/3QuHF/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T21:31:00.053

一个小魔术：

```
$('.switch').click(function() {
    var c = $.data(this, 'index', ($(this).data('index') || 1) % 3 + 1);
    $('div').hide().eq(c-2).show();
}); 
```

演示：[https ://tinker.io/0d614](https://tinker.io/0d614)

# google-chrome - 清单 2.0 版扩展是否适用于旧版本的 chrome？

> ID：13424263
> 
> 赞同：1
> 
> 时间：2012-11-16T20:54:29.790
> 
> 标签：google-chrome, google-chrome-extension

我似乎无法在任何地方找到明确的答案。

它向后兼容有多远？我是否必须担心创建扩展的多个版本？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T21:04:34.527

`"manifest_version": 2` **本身**不会导致任何不兼容问题**。**

[但是通过使用 Chrome 18 或更高版本中引入的功能/API（清单 v2随 Chrome 18 提供](http://developer.chrome.com/extensions/whats_new.html#18)） ，您很容易犯错并创建一个向后不兼容的扩展程序。

我建议不要再担心旧的清单版本，因为只有 Chrome 17- 受到影响。在撰写本文时，当前的稳定版本是 23。几乎没有人再使用 Chrome 17。

### 也可以看看

*   [如何将扩展升级到清单 v2 并保持向后兼容？](https://stackoverflow.com/questions/12525896/how-to-upgrade-extension-to-manifest-v2-and-remain-backwards-compatible/12526703#12526703)（堆栈溢出答案）
*   [教程：迁移到 Manifest V2](http://developer.chrome.com/extensions/tut_migration_to_manifest_v2.html)（官方文档，以相反的顺序应用提示）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:40:21.770

Manifest 版本 2 扩展程序必须使用“background”而不是“background_page”（并且清单不能包含它或 Chrome 拒绝加载扩展程序），但旧版本的 Chrome 不支持“background”。这是主要问题。我能想到的唯一解决方法是发布多个版本的扩展并要求用户下载并安装正确的版本。

# c - 将 char 转换为 double

> ID：13424265
> 
> 赞同：16
> 
> 时间：2012-11-16T20:54:37.193
> 
> 标签：c

好的，我有`char`一个数字。我怎么能把它转换成一个`double`？

```
char c; 
```

我试过`(double)c`了，但它转换为零。

有任何想法吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-16T21:02:17.543

如果您有一个希望转换为双重使用的*空终止*`atof`字符串：

```
const char *str = "3.14";
double x = atof(str);
printf("%f\n", x); //prints 3.140000 
```

如果您只有一个角色，则投射应该有效：

```
char c = 'a'; //97 in ASCII
double x = (double)c; 
printf("%f\n", x); //prints 97.000000 
```

如果字符为零，那么它当然会打印零：

```
char c = '\0';
double x = (double)c; 
printf("%f\n", x); //prints 0.000000 
```

注意：`atof`和类似的函数不会检测溢出并在错误时返回零，因此无法知道它是否失败（不确定它是否设置`errno`），另请参阅 Keith 关于某些值的*未定义行为*的评论，所以重点是你应该用于`strtol`从字符串转换为`int`和`strtod`转换为`double`那些具有更好的错误处理：

```
const char *str = "3.14";
double x = strtod(str, NULL); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T21:42:08.187

要回答您提出的问题：

```
#include <stdio.h>
int main(void) {
    char c = 42;
    // double d = (double)c; The cast is not needed here, because ...
    double d = c;    // ... the conversion is done implicitly.
    printf("c = %d\n", c);
    printf("d = %f\n", d);
    return 0;
} 
```

`char`是整数类型；它的范围通常是`-128`to`+127`或`0`to `+255`。它最常用于存储字符值，例如`'x'`，但也可用于存储小整数。

但我怀疑你真的很想知道如何将*字符串*转换为带有数值`"1234.5"`的类型。有几种方法可以做到这一点。 `double``1234.5`

该`atof()`函数接受一个`char*`指向字符串的a，并返回一个`double`值； `atof("1234.5")`返回`1234.5`。但它并没有真正的错误处理；如果参数太大，或者不是一个数字，它可能会表现得很糟糕。（我不确定其中的细节，但我相信它的行为在某些情况下是未定义的。）

该`strtod()`函数做同样的事情并且更健壮，但使用起来更复杂。请查阅您系统的文档（`man strtod`如果您使用的是类 Unix 系统）。

正如 Coodey 在评论中所说，您需要使您的问题更加精确。一个带有实际代码的例子会让你更容易弄清楚你在问什么。

# django - 在两个不同的 EC2 实例上设置 Django 和 PostgreSQL

> ID：13424267
> 
> 赞同：4
> 
> 时间：2012-11-16T20:54:44.753
> 
> 标签：django, postgresql, amazon-ec2, django-settings, pgadmin

你好 StackOverFlowers :) 到目前为止，我一直在同一个微型 EC2 实例上运行我的 Django 后端和我的 PostgreSQL 数据库。

我设置了两个 EC2 实例，一个带有我的 django 后端，另一个带有我使用 pgadminII 管理的 PostgreSQL 数据库的实例。两个实例使用相同的安全组并打开所有相同的端口。我已将一个弹性 IP 附加到我的 Django 实例，并将另一个弹性 IP 附加到我的 Postgresql 实例。

现在我知道在 settings.py 中我需要将“HOST”更改为 PostgreSQL 实例的地址。但我不太确定该放什么。我要放PostgreSQL实例的弹性IP吗？

我做了一些研究，许多消息来源说我需要输入 PostgreSQL 实例的内部服务器 IP 地址。如果是这种情况，我怎样才能找到内部服务器 IP 地址并将其输入到“主机”中？为了清楚起见，我复制并粘贴了下面的 settings.py 代码。

```
DATABASES = {
'default': {
'ENGINE': 'django.db.backends.postgresql_psycopg2', 
'NAME': 'django_db', 
'USER': 'django_login',
'PASSWORD': 'password', 
'HOST': '', # Set to empty string for localhost. Not used with sqlite3.
'PORT': '', # Set to empty string for default. Not used with sqlite3.
} 
```

感谢您的帮助，如果我不够清楚，请发表评论并让我知道，以便我可以为您和其他人更清楚:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-17T18:45:36.427

# 亚马逊支持

因此，在 David Wolever 回复之后，我最终也与亚马逊的人进行了交谈。以防万一你们中的任何人再次遇到这个帖子。仅使用内部服务器 IP 是不够的，但这是一个好的开始。如果您正在为 Postgresql 实例（最好是 Natty Narwhal）运行 Ubuntu，请确保编辑 pg_hba.conf 和 postgresql.conf 文件。

您通常可以在以下位置找到这两个文件：/etc/postgresql/8.4/main/(pg_hba.conf 或 postgresql.conf)

请注意，我们在堆栈中使用 Postgresql 8.4，在我们的测试中，它被证明是在 Natty Narwhal 上运行的最一致和最可靠的 Postgresql 版本。

对于不同版本的 Postgresql（9.1、9.0 等），您可以找到这两个文件的目录与上面列出的不同。确保您知道这些文件的正确目录。

# 步骤1

转到 Amazon 管理控制台并确保两个实例都在同一个安全组下。Postgresql 和 Django 默认使用 5432 和 8000，所以请确保你打开了这两个端口！

# 第2步

**（在 postgresql 实例的终端上执行此操作）**

须藤 vim postgresql.conf

按键盘上的“i”开始进行更改。使用向下箭头键，直到遇到

**LISTEN_ADDRESSES: '本地主机'**

去掉前面的哈希标签，而不是'localhost'，添加你的postgresql实例的私有IP **（你可以在你的EC2管理控制台上找到私有IP）**，你**还必须添加127.0.0.1。**

**例子：**

LISTEN_ADDRESSES: '私有 ip，127.0.0.1'

确保**用逗号分隔私有 ip 和本地主机地址，并将其全部放在一个引号内。**

完成更改后，**按 ESC 并按 ZZ（大写两次以保存更改）**

# 第 3 步

须藤 vim pg_hba.conf

使用向下箭头键，直到遇到如下所示的内容：

```
 Database administrative login by UNIX sockets
  local   all         postgres                          ident

  # TYPE  DATABASE    USER        CIDR-ADDRESS          METHOD

  # "local" is for Unix domain socket connections only
  local   all         all                               md5
  # IPv4 local connections:
  host    all         all         127.0.0.1/32          trust
  # IPv6 local connections:
  host    all         all         ::1/128               md5
  local   django_db   django_login                      md5
  host    replication postgres    127.0.0.1/32          md5
  host    replication postgres    ::1/128               md5 
```

再一次，按键盘上的“i”并按照我上面的方式对其进行更改。

**您会注意到在 IPv6 下，我有 django_db 和 django_login，将其更改为您的 postgresql 数据库的名称和您分别用于您的 postgresql 数据库的用户登录名。**

完成更改后，**按 ESC 并按 ZZ（大写两次以保存更改）**

# 第 4 步（几乎完成 Hi5！）

在终端中使用以下命令重新启动 postgresql 服务器：

**sudo /etc/init.d/postgresql 重启**

恭喜！服务器已启动并正在运行，但是还有最后一步。

# 第 5 步

启动您的 Django EC2 实例，转到您的 settings.py 并查找以下内容：

```
 DATABASES = {
 'default': {
 'ENGINE': 'django.db.backends.postgresql_psycopg2', 
 'NAME': 'django_db', 
 'USER': 'django_login',
 'PASSWORD': 'password', 
 'HOST': '', # Set to empty string for localhost. Not used with sqlite3.
 'PORT': '', # Set to empty string for default. Not used with sqlite3.
 } 
```

在 'HOST': ' ' 下，将其更改为 'HOST': '无论 Postgresql 实例的私有 IP 是什么'

保存更改。打开终端并找到 manage.py 文件所在的目录。进入该目录后，运行以下命令：**./manage.py syncdb**

这些将为您在 Django 中创建的模型创建所有必要的表。恭喜，您已成功创建数据库实例和 Django 实例之间的链接。

如果您有任何问题，我将非常乐意提供帮助！在下面发表评论，我会尽快回复您！:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T20:58:51.473

您的 Postgres 实例不需要弹性 IP。只需使用其内部 IP。内部 IP 可从管理控制台获得，或通过运行`ifconfig`.

# html - PhoneGap SqlLite 达到 5mb 左右的限制

> ID：13424271
> 
> 赞同：1
> 
> 时间：2012-11-16T20:55:15.647
> 
> 标签：html, sqlite, cordova, cordova-2.0.0

我有一个关于如何绕过 phonegap 中 sqllite 的 5mb 限制的问题。Stack 上的大多数答案都不能满足我的需求，所以这就是我问这个的原因。

基本上，我想知道您是否可以将您的数据拆分为 2 个数据库并将限制加倍 -10MB。这个 phonegap 应用程序将在 Android 2.3+ 和 IOS 5+ 上运行，因此我们不能对更高的设备特定限制做出任何假设。此外，我们没有时间将代码转换为使用 SQLite Phonegap 插件，否则我知道这将是一个解决方案。

将数据拆分为 2 个 DB 似乎是一种快速的解决方案，但我不确定嵌入式浏览器是否仍然查看应用程序使用的总存储空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:35:58.783

我不知道绕过该限制的任何直接方法-您是否尝试过拆分数据库选项？- 但无论如何它可能无济于事 - 对于大量数据，您可能会遇到备份系统问题，尝试在应用程序关闭时的少量可用时间内复制数据库文件。

你看过哪个 SQLite 插件？有些版本比其他版本更接近 web sql api - 我正在使用[https://github.com/chbrody/Cordova-SQLitePlugin](https://github.com/chbrody/Cordova-SQLitePlugin)并且我自己的应用程序中的以下代码是使用插件时唯一不同的部分.

```
if (app.isPhonegap) {
    console.log("using native db");
    db = sqlitePlugin.openDatabase("ExampleDb", "", "Example local database", 1000000);

} else {
    console.log("Using web db");
    db = openDatabase("ExampleDb", "", "Example local database", 1000000);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T04:32:17.953

设备上 HTML5 存储的问题，它不允许您增加大小。看看这个解决方案：

[解决了 5MB 的 iOS 数据库大小限制（使用插件）](http://blog.heldes.com/html5/solved-ios-database-size-limitation-of-5mb-using-plugin/)

他正在使用一个插件来解决移动端 5 mb 数据库的限制，但这个插件使用的是 PhoneGap 框架。

希望这将帮助您解决您的问题。

干杯

# c# - 代表 Asp.net gridview 绑定的不同数据源？（设计帮助）

> ID：13424272
> 
> 赞同：0
> 
> 时间：2012-11-16T20:55:16.897
> 
> 标签：c#, asp.net, .net, design-patterns

我遇到了一些设计问题，而且似乎总是遇到各种相同的问题。虽然我意识到存在设计问题，但我不能说问题是什么，也不能说我该如何纠正它。

我特别遇到的一个问题是在抽象 DAO 访问的代码中。我喜欢这个想法，因为我可以转移到影响最小的基于服务的数据检索（我相信）。并且可以通过现有方法添加和访问更多报告。

此外，由于每个报告都包含自己的一组列，我不知道允许 GridView 加载它们的方法（由于接口为空，我发布的代码无法运行）。

我的目标是能够从列表中选择“报告”，然后根据报告填充网格视图。

```
 public void LoadReportFor(string reportName)
    {
        GridView1.DataSource = RetrieveReportDataFor(reportName, DateTime.Now);
        GridView1.DataBind();
    }

    private List<IReportRecord> RetrieveReportDataFor(string reportName, DateTime date)
    {
        List<IReportRecord> records;
        switch (reportName)
        {
            case "Timesheet":
                records = reportSDAO.GetTimeSheetReport(date);
                break;

            case "Salary":
                records = reportsDAO.GetSalaryReport(date);
                break;
            default:
                records = new List<IReportRecord>();
        }
        return records;
    }

    public class TimeSheetRecord : IReportRecord
    {
        public string DayOfWeek { get; set; }

        public int EmpID { get; set; }

        public DateTime Start { get; set; }

        public DateTime End { get; set; }

        public double HoursWorked { get; set; }
    }

    public class SalaryRecord : IReportRecord
    {
        public int EmpID { get; set; }

        public double Salary { get; set; }
    }

    public interface IReportRecord
    {
    }
} 
```

更新。

我决定合并 LoadReportFor 和 RetrieveReportDataFor 方法。在给我的麻烦一些想法之后，我没有理由有两种方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T00:07:24.543

GridView 有一个名为 Columns 的 Readonly 属性，它是一组列。它是只读的，但它的元素不是只读的，您可以从中添加/修改/删除元素。

如果您想购买轮子而不是重新发明它，我可以推荐 Telerik。

# android - 在 Eclipse 中支持 Google Maps API 的虚拟设备

> ID：13424274
> 
> 赞同：1
> 
> 时间：2012-11-16T20:55:21.133
> 
> 标签：android, eclipse, sdk, maps

我的设置与我看到的 Android SDK 教程不同。我正在尝试设置与 Google Maps API 兼容的虚拟设备。我需要填写三个区域：设备和目标（教程仅显示目标）和 CPU。

我已将 Google API - API 级别 17 作为目标，但我不知道该为设备放置什么才能使其正常工作。

我不知道要为设备和 CPU 放什么才能让它工作。

这是我的日志输出： 11-17 00:12:38.403: W/ActivityManager(163): No content provider found for permission revoke: file:///data/local/tmp/GoogleMapsWithAndroid.apk 11-17 00:12 ：38.443：W / ActivityManager（163）：未找到用于权限撤销的内容提供者：file：///data/local/tmp/GoogleMapsWithAndroid.apk 11-17 00：12：38.633：I/PackageManager（163）：删除非-系统包：com.example.googlemapswithandroid 11-17 00:12:38.633: I/ActivityManager(163): 强制停止包 com.example.googlemapswithandroid uid=10044 11-17 00:12:38.794: I/dalvikvm(163 ): Jit: 将 JitTable 的大小从 4096 调整为 8192 11-17 00:12:38.904: E/PackageManager(163): 包 com.example.googlemapswithandroid 需要不可用的共享库 com.google.android.maps；失败！11-17 00:12:38.913：W/PackageManager(163)：无法在 /data/app/com.example 中安装包。

这是布局文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <com.google.android.maps.MapView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/mapview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:clickable="true"
        android:apiKey="0DGP89WIBvLjp6nNjqHdbvaaS71ITKsLNbPZV_g"
    />

</RelativeLayout> 
```

这是我的清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.googlemapswithandroid"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <uses-library android:name="com.google.android.maps"/>
        <activity
            android:name="com.example.googlemapswithandroid.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".HelloGoogleMaps" android:label="@string/app_name"
     android:theme="@android:style/Theme.NoTitleBar">
         </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:10:24.903

由于 AVD 创建器的错误使用，我刚刚遇到了这个问题。

如果您在选择设备之前选择了 AVD 目标，则目标将被设备默认目标覆盖。

我以为我创建了一个 Google APIs 17 目标，而实际上它是一个没有谷歌地图的 Android 14。

我会仔细检查 AVD 配置，以确保您没有遇到同样的问题。

![在此处输入图像描述](../Images/92860dd331938046737ffd6d0fede00a.png)

# c# - 如何从 ASP.NET 应用程序中连接到服务器端 USB (HID) 设备？

> ID：13424275
> 
> 赞同：8
> 
> 时间：2012-11-16T20:55:24.320
> 
> 标签：c#, asp.net, usb, hid

我正在尝试为 USB 设备编写自己的控制器，而不是使用产品附带的 SDK（我觉得 sdk 低于标准）。

**USB 设备已插入运行此应用程序的同一服务器。**

所以我决定前往 Nuget 并获取 HidLibrary

> PM> Install-Package hidlibrary

然后我继续按照[GitHub 上](https://github.com/mikeobrien/HidLibrary/blob/master/examples/MagtekCardReader/Program.cs)的示例进行操作。

首先我进入我的控制面板来验证 VendorID 和 ProductID

![供应商 ID 和产品 ID](../Images/daa8ba4b9ab56eb0fa3ccef3a4ade79a.png)

我把它放到我的代码中。

然后我在抓取设备的行上设置了一个断点，但不幸的是它总是回来`null`。

```
using HidLibrary;
public class MyController : ApiController
{

    private const int VendorId = 0x0BC7;
    private const int ProductId = 0x0001;

    private static HidDevice _device;

    // POST api/<controller>
    public string Post(CommandModel command)
    {

        _device = HidDevices.Enumerate(VendorId, ProductId).FirstOrDefault();

        if (_device != null)
        {
            // getting here means the device exists
        }
        else
        {
            // ending up here means the device doesn't exist
            throw new Exception("device not connected");
        }
        return null;
    } 
```

我希望这是一些愚蠢的事情，而不是关于直接从 IIS 工作人员连接到 USB 设备的一些破坏性权限问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T15:20:46.643

尽管您希望变得愚蠢，但事实并非如此。您有一些破坏交易的权限问题。如果您从 Hid 库的 GitHub 浏览 Mike O'Brien 的代码，您会看到它调用位于以下位置的 Win32 API 函数：kernel32.dll、setupapi.dll、user32.dll、hid.dll ( [Native.cs](https://github.com/mikeobrien/HidLibrary/blob/master/src/HidLibrary/NativeMethods.cs) )。

枚举本身是通过 setupapi.dll 函数完成的。它浏览所有已安装的设备并过滤它需要的东西。

所以...我认为通过匿名身份验证直接从 IIS 中的 Web 应用程序执行 kernel32.dll 代码是一个安全问题，不是吗？

如果您确实需要与该 HID 通信（谁知道它可能是温度传感器或其他东西），我会做一个单独的 Windows 服务，而 IIS 托管的 Web 应用程序将通过 WCF 与该服务进行通信。该服务需要一个代理。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T00:00:14.870

将相同的代码放入控制台应用程序并运行它。这将帮助您验证它是您的代码还是环境。

如果是环境，请尝试使用进程监视器查看是否有任何隐藏的访问错误。还可以尝试枚举所有设备，而不仅仅是寻找您所追求的设备，只是看看您是否可以在 ASP.NET 中做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T21:20:59.560

@Chase，除非这是一个实验 - 最好不要尝试从 IIS 进程连接到设备。[如果你从这条路开始，这是一个潘多拉的盒子]。

最好的方法是让另一个 (WCF) 服务作为设备的代理，并从服务中公开您需要的内容，将其与您的应用程序挂钩。如果您认为这会有所帮助，请随时询问示例。

我 +1 @garzanti。

# windows - 如何使用 VBS 脚本从 .ini 文件中删除一行

> ID：13424278
> 
> 赞同：3
> 
> 时间：2012-11-16T20:55:34.413
> 
> 标签：windows, batch-file, vbscript, hta

我正在尝试编写一个 VBS 脚本来从 .ini 文件中删除一行。但是，当我运行它时，新文件（以及备份）被创建并重命名，但我想要删除的行仍然存在？我怎样才能解决这个问题？

这是我的代码：

```
Const ForReading = 1
Const ForWriting = 2
Const OpenAsASCII = 0
Const CreateIfNotExist = True

Set objFSO = CreateObject("Scripting.FileSystemObject")
Const OverwriteExisting = True

'Making a backup of the file
objFSO.CopyFile "C:\notes.ini" , "C:\notesBACKUP.ini"

'Setting input of file
strInput = "C:\notes.ini"
Set objInput = objFSO.OpenTextFile(strInput, ForReading)

'Setting temp output for new file with omitted line
strOutput = "C:\notes2.ini"

Set objOutput = objFSO.OpenTextFile(strOutput, _
ForWriting, CreateIfNotExist, OpenAsASCII)

Do Until objInput.AtEndOfStream

strLine = objInput.ReadLine

'Line with EXTMGR to be replaced when copying to new file
If (InStr(LCase(strLine), "EXTMGR") > 0) Then

'New line replacing old one
strLine = "#Deleted"
End If

objOutput.WriteLine strLine
Loop

objInput.Close
objOutput.Close

'Deleting the original file
objFSO.DeleteFile(strInput)

'Renaming the new file (with line removed) to the original filename
objFSO.MoveFile "C:\notes2.ini" , "C:\notes.ini" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T21:29:47.837

您正在`LCASE`对字符串进行转换，然后在所有大写字母中查找字符串。

将代码更改为：
`If (InStr(strLine, "EXTMGR_ADDINS") > 0)`

# string - VBA：循环为范围内的每个单元格创建命令按钮，使用特定于单元格的参数调用.OnAction过程

> ID：13424282
> 
> 赞同：0
> 
> 时间：2012-11-16T20:55:59.803
> 
> 标签：string, vba, button, parameters, arguments

我需要帮助编写一些循环来为范围内的每个单元格创建一个命令按钮。
我实现了根据需要创建尽可能多的按钮。我的问题是为每个人设置 .OnAction 属性。
每个按钮都会通过 Lotus Notes 向指定地址发送一封电子邮件，邮件的主题和正文存储在相邻的单元格中。该代码已经有效，这是发送电子邮件的过程：

```
Sub Send(ByVal MailAddress, Subject, Message As String)

Dim Maildb As Object
Dim MailDoc As Object
Dim Body As Object
Dim Session As Object

    Set Session = CreateObject("Lotus.NotesSession")
    Call Session.Initialize
    'Call Session.Initialize("password")
    UserName = Session.UserName
    Set Maildb = Session.GetDatabase("", "C:\Lotus\Notes\Data\names.nsf")
    'Set Maildb = Session.GetDatabase("", MailDbName)
    If Not Maildb.IsOpen = True Then Call Maildb.Open
    Set MailDoc = Maildb.CreateDocument
    Call MailDoc.ReplaceItemValue("Form", "Memo")
    Call MailDoc.ReplaceItemValue("SendTo", MailAddress)
    Call MailDoc.ReplaceItemValue("Subject", Subject)
    Set Body = MailDoc.CreateRichTextItem("Body")
    Call Body.AppendText(Message)
    MailDoc.SaveMessageOnSend = True
    Call MailDoc.ReplaceItemValue("PostedDate", Now())
    Call MailDoc.Send(False)

    Set Maildb = Nothing
    Set MailDoc = Nothing
    Set Body = Nothing
    Set Session = Nothing
End Sub 
```

现在，我想做的是在工作簿打开时创建按钮，遍历工作表的第一个编译列。接下来，我将在向工作表添加/删除行时添加/删除按钮。为此，我目前有以下代码：

```
Private Sub Workbook_Open()

   Dim L As Integer
   Dim t As Range
   Dim btn As Button
   Dim arg As String

   Application.ScreenUpdating = False
   ActiveSheet.Buttons.Delete
   Sheets(1).Activate
   L = Application.WorksheetFunction.CountA(Range("C:C"))
   For i = 2 To L
        Set t = ActiveSheet.Range(Cells(i, 1), Cells(i, 1))
        Set btn = ActiveSheet.Buttons.Add(t.Left, t.Top + 5, t.Width, 20)
        'arg = "'Invia  Range("J1").Value , Cells(i, t.Column + 2).Value , Cells(i, t.Column+3).Value '"
        With btn
           .OnAction = arg
           .Caption = "Invia"
           .Name = "Btn" & i
        End With
   Next i
End Sub 
```

我的问题是我无法以正确的方式编写要传递给 OnAction 属性的字符串。那应该是使用 3 个参数调用程序发送：1）邮件地址：在单元格 J1（静态）中找到 2）主题：在循环的当前行（i）的 C 列中找到 3）正文：在 D 列中找到循环的当前行 (i)

无法让它工作。我对 VBA 很陌生，我对所有这些引号、单引号和双引号都感到疯狂。
有人可以帮助我吗？
提前 Mhanks，
马可

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T21:51:20.450

```
arg = "'Send ""{1}"", ""{2}"", ""{3}"" '" 

arg = Replace(arg,"{1}", Range("J1").Value)
arg = Replace(arg,"{2}", Cells(i, t.Column + 2).Value)
arg = Replace(arg,"{3}", Cells(i, t.Column+3).Value)

.OnAction = arg 
```

# c# - PowerShell 和 Google 协议缓冲区技术

> ID：13424293
> 
> 赞同：2
> 
> 时间：2012-11-16T20:57:09.450
> 
> 标签：c#, powershell, protobuf-net

我需要使用 PowerShell 来使用 Google 协议缓冲区。尚未找到特定于语言的转换器，并且使用 protobuf-net (C#) 来生成 .cs 代码和后来的 .dll 文件。

所有找到的方法都涉及 New-Object 构造，但在 protobuf-net.dll 中定义了公共静态类 Serializer，因此无法创建对象（类实例）-> New-Object : Constructor not found。找不到类型 ProtoBuf.Serializer 的合适构造函数。

```
$memory_stream = New-Object System.IO.MemoryStream
#######
$obj = new-object ControlInterface.EnableGate
$obj.GateId = 2
$obj.Day = 7
#######
$method = [ProtoBuf.Serializer]
$Serialize = $method.GetMethods() | Where-Object {
                                 $_.Name -eq "Serialize" -and
                                 $_.MetadataToken -eq "110665038"
                                  }
$massive = @($memory_stream,$obj)
$closedMethod = $Serialize.MakeGenericMethod([ControlInterface.EnableGate])
$closedMethod.Invoke($method,$massive) 
```

当前错误如下：使用“2”参数调用“Invoke”的异常：“'System.Management.Automation.PSObject' 类型的对象无法转换为'System.IO.Stream' 类型。”

是否可以避免使用 C# 额外代码并仅使用 PowerShell 方法来解决该问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-21T03:26:49.160

这是由于 PowerShell 将新创建的对象转换为动态 PSObject 类型，而不是实际的 .NET 类型。

您所要做的就是**对对象变量声明应用强制​​转换**，然后您的麻烦就消失了。（我花了很长时间才知道）

要修复您的示例：

```
[IO.MemoryStream] $memory_stream = New-Object IO.MemoryStream
#######
[ControlInterface.EnableGate] $obj = new-object ControlInterface.EnableGate
$obj.GateId = 2
$obj.Day = 7
#######
$method = [ProtoBuf.Serializer]
$Serialize = $method.GetMethods() | Where-Object {
                                 $_.Name -eq "Serialize" -and
                                 $_.MetadataToken -eq "110665038"
                                  }
$massive = @($memory_stream,$obj)
$closedMethod = $Serialize.MakeGenericMethod([ControlInterface.EnableGate])
$closedMethod.Invoke($method,$massive) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:51:24.177

我不知道您要问什么，但这里有一些先行者，在 PowerShell 中，您使用`::`.

例如：

```
[System.IO.Path]::GetFileName("C:\somefile.jpg") 
```

但无论如何，如果您想在 C# 中执行此操作，您可以执行以下操作：

```
$source = @"
public class SampleClass
{
    public static int Add(int a, int b)
    {
        return (a + b);
    }

    public int Multiply(int a, int b)
    {
        return (a * b);
    }
}
"@

 Add-Type $source
 $obj = New-Object SampleClass 
```

# sql-server - 使用内部网络服务而不是直接访问数据库

> ID：13424297
> 
> 赞同：0
> 
> 时间：2012-11-16T20:57:29.860
> 
> 标签：sql-server, wcf, firewall

我正在设计网络的各个部分。我目前对未来软件项目设计的想法：

DMZ 中的网络服务器。这个网络服务器有一个穿过防火墙的洞（在 sql 端口上）与 MSSQL 数据库对话，该数据库是所有数据管理的内部。

问题：与其在防火墙中设置一个孔来与数据库服务器通信，不如让一个内部 Web 服务器托管 DMZ 中的应用程序可以使用的 Web 服务，并在 Web 服务后面使用数据库逻辑（打了一个洞，只能与该网络服务器交谈。）

Web 服务实现将只允许在一个地方更新任何 API 更改——这就是我考虑它的原因——尽管它可能比直接数据库和查询访问要慢。

关于哪个更好的任何想法？

编辑：意识到除非我将所有应用程序/业务逻辑放在应用程序层中，否则我仍然需要在 sql 防火墙上打一个洞。由于我只想为 API 函数（影响所有应用程序的函数 - 例如“GetEmployeeByName”）添加一个层，我仍然需要从 DMZ 访问数据库......

倾向于最佳答案是：托管 Web 服务的内部 Web 服务 API 服务器 - 这些服务可由 DMZ 中的所有 Web 服务器或通过 DMZ 中的代理服务器使用。（因此只有一台服务器需要通过防火墙的 ssl 端口。）（当然所有内部服务器都可以访问。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T21:02:17.393

关于三层架构何时是更好的模型有很多讨论（[这里是一个](http://www.codingthearchitecture.com/2012/07/20/when_do_you_need_a_3_tier_architecture.html)）。您应该可以在 Google 上找到更多信息。

简短回答：如果您的目标是安全性和可扩展性，那么使用应用层服务可能会更好。在开发所有层级和层级时，请务必专注[于深度防御。](http://en.wikipedia.org/wiki/Defense_in_depth_%28computing%29)

长答案：这取决于您的需求。

编辑以响应您的编辑：如果这样做有意义的话，我建议您将大部分业务逻辑放在应用程序层中。您的网络服务器应该主要用于演示。不管你把业务逻辑放在哪里，你都应该把所有的数据访问放到服务中——Web层应该只和应用层对话。

[这](http://www.google.com/search?q=when+is+three-tier+architecture+better&sourceid=ie7&rls=com.microsoft%3aen-us%3aIE-Address&ie=&oe=&safe=active)是深入研究三层方面的开始搜索。 [这](http://www.codeproject.com/Articles/10746/Dude-where-s-my-business-logic)是关于分层和诸如此类的一个不错的介绍。

# javascript - javascript运行总计添加不正确

> ID：13424298
> 
> 赞同：0
> 
> 时间：2012-11-16T20:57:48.837
> 
> 标签：javascript, asp.net, asp.net-mvc-3

大家好，我正在尝试使用 javascript 进行非常简单的计算以找到运行总数。我似乎错过了什么。我确实查看了 SO 并发现了一些非常相似的场景，但是，我似乎与我自己的代码无关。

这是我用来计算运行总数的脚本。

```
 var total = 0;

    function GetTotal(txtBox) {
        total += parseInt(txtBox.value) || 0;
        $("#chkTotal").html(total);
    } 
```

这是我认为的一些代码：

```
 <div class="editor-field">
        @Html.TextBox("FirstDemo", String.Empty, new { id = "firstdemo", onchange =     "GetTotal(this)" })
        @Html.ValidationMessageFor(model => model.FirstDemo)
    </div>

<div>
        <h3>Total Checked</h3>
    </div>
    <div id="chkTotal"></div> 
```

总计计算完美，直到文本框中的值发生更改，在这种情况下，文本框中输入的任何内容都会再次添加到运行总计中。

谁能帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T21:07:47.340

问题是`total`变量的全局范围：我想您在表单中有几个文本字段，您可以在其中设置它们以以`onchage`相同的方式处理事件。第一次输入某些内容时，该值会正确添加到总计中，但是当您在任何文本字段中更改某些内容时，它会再次添加新值。同样，因为`total`具有全局范围。

您应该真正`total`在函数内部移动并重新解析您感兴趣的输入元素中的所有值。

由于您使用的是 jquery，因此您可以执行以下操作：

```
function GetTotal(txtBox) {
    var total = 0;
    $('input:text').each(function(index, value) {
        total += parseInt($(value).val() || 0);
    });

    $("#chkTotal").html(total);
}​ 
```

这是一个[jsfiddle](http://jsfiddle.net/CF74T/)为您演示它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T21:01:31.463

最简单的解决方案，遍历所有表单元素并重做计算。

我在您的代码中看到了 jQuery，因此它是一个获取元素和每个循环的基本选择器。

```
function GetTotal(txtBox) {
    var total = 0;
    $(".calculationClass").each(
        function() {
            total += parseInt(this.value,10) || 0;
        }
    );
    $("#chkTotal").html(total);
} 
```

# c# - 能否为 Windows 8 Surface RT 创建本地 Web 服务器

> ID：13424299
> 
> 赞同：4
> 
> 时间：2012-11-16T20:57:50.850
> 
> 标签：c#, visual-studio-2012, windows-8, windows-rt

我的目标是在 Windows Surface RT 平板电脑上本地运行 flash。通过研究，我发现网站要运行 Flash，必须将它们列入微软网站的白名单。通过进一步研究，我发现了如何破解白名单以添加任何域： [http ://www.redmondpie.com/how-to-enable-flash-for-any-site-in-windows-8-rt-metro -internet-explorer-10/](http://www.redmondpie.com/how-to-enable-flash-for-any-site-in-windows-8-rt-metro-internet-explorer-10/)。

但是，我不能添加本地文件系统（即`C:\`或`file:\\`），因为它们不是域。我有一个解决方案是使用 localhost。如何编写 Web 服务器以在 Windows 8 Surface RT 上运行，或者可以完成？

在 C# 中，我知道您可以使用`System.Net.HttpListener`： http: [//www.codehosting.net/blog/BlogEngine/post/Simple-C-Web-Server.aspx](http://www.codehosting.net/blog/BlogEngine/post/Simple-C-Web-Server.aspx)。Surface RT是否`System.Net.HttpListener`支持？如果没有，在本地播放 flash 的替代解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T10:31:50.563

从理论上讲，这是可能的。你需要使用`StreamSocketListener`来获得一个`StreamSocket`. 然后您处理来自该套接字的 http 输入（大量工作），然后发回您的响应。我已经完成了我的协议。您可能需要注意的一件事是您可能需要第二台机器来发送 http 请求。我使用另一台 PC 的 IE 发送测试请求。Win8网络隔离不允许同一台机器的2个应用程序之间的tcp连接...

# signalr - 获取 SignalR 服务器调用客户端的正确语法

> ID：13424300
> 
> 赞同：0
> 
> 时间：2012-11-16T20:57:52.037
> 
> 标签：signalr, signalr-hub

我正在用 SignalR 组合一个非常基本的“hello world”应用程序，但需要注意的是它是自托管的，这会带来一两个额外的问题。基本上，我试图找出从服务器调用客户端方法的正确方法。

例如，在我的客户端上，我有一个如下所示的方法：

```
 roomHub.onEcho = function (msg) {
        console.log("onEcho called: " + msg);
    }; 
```

我可以像这样从我的服务器端集线器成功调用它：

```
public class RoomHub : Hub
{
    public void Echo(string echo)
    {
        Clients.onEcho(echo);
    }
} 
```

它可以工作，但当然，它会调用*所有*客户端，而不仅仅是一个。在我在网上看到的各种示例中（例如，[https://github.com/SignalR/SignalR/blob/master/samples/Microsoft.AspNet.SignalR.Hosting.AspNet.Samples/Hubs/Benchmark/HubBench.cs](https://github.com/SignalR/SignalR/blob/master/samples/Microsoft.AspNet.SignalR.Hosting.AspNet.Samples/Hubs/Benchmark/HubBench.cs)，我看到各种各样的命令，看起来我应该能够指定谁被调用，例如：

```
public void Echo(string echo)
{
    Clients.Caller.onEcho(echo);
    Clients.Caller(Context.ConnectionId).onEcho(echo);
    Clients.All.onEcho(echo);
} 
```

但是我无法使上述任何语法起作用。对于`Clients.All.onEcho()`和`Clients.Caller.onEcho()`，绝对没有任何反应。对于`Clients.Caller(Context.ConnectionId).onEcho()`，Firebug 告诉我它实际上是在尝试调用`Caller()`我的 JavaScript roomHub 实例上的一个方法，而这当然不存在。

不过，这有点奇怪。如果我查看 Hub 类，我会明白为什么这些都不起作用 - 因为 Hub 构造函数用 NullClientProxies 覆盖了它的“Clients”对象的一堆属性：

```
protected Hub()
{
    Clients = new HubConnectionContext();
    Clients.All = new NullClientProxy();
    Clients.Others = new NullClientProxy();
    Clients.Caller = new NullClientProxy();
} 
```

但我有点困惑为什么它会这样做 - 或者为什么样本似乎仍然有效 - 或者预期的方法*应该*是什么。

有什么想法吗？我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T08:38:55.337

我们最近一直在更新文档，因此您可能已经看到很多不一致的数据。SignalR 的最新版本是 1.0 alpha2 ( [http://weblogs.asp.net/davidfowler/archive/2012/11/11/microsoft-asp-net-signalr.aspx](http://weblogs.asp.net/davidfowler/archive/2012/11/11/microsoft-asp-net-signalr.aspx) )。所有文档都已更新以显示新语法，因此如果您使用的是旧版本，请升级。查看 wiki 中的示例[https://github.com/SignalR/SignalR/wiki/Hubs](https://github.com/SignalR/SignalR/wiki/Hubs)

# java - Java - 多项式项的 toString 方法

> ID：13424302
> 
> 赞同：3
> 
> 时间：2012-11-16T20:57:54.890
> 
> 标签：java, tostring, polynomial-math

我创建了一个多项式类而不使用多项式，我使用我自己的`Term(coefficient, exponent)`来创建多项式表达式。

我有一些条件如下：

```
coefficient = 0 -> Term(0,2) -> 0x^2 -> "0"
coefficient = 1 -> Term(1,2) -> 1x^2 -> "x^2"
coefficient = -1 -> Term(-1,2) -> -1x^2 -> "-x^2"
exponent = 1 = -> Term(5,1) -> 5x^1 -> "5x"
exponent = 0 = -> Term(5,0) -> 5x^0 -> "5" 
```

但是实现所有这些以在彼此内部和周围发挥作用让我非常头疼，例如，如果我有`Term(-1,1)`我想`"-x"`出现，并且`"x"`为`Term(1,1)`. 任何人都可以帮助考虑某种逻辑来将所有这些“规则”组合在一起以形成 toString 方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:08:26.057

顺序在这里很重要。如果您仔细考虑，您会发现`coefficient = 0`应该先行，因为当它为零时，其他任何事情都不重要。接下来是当`exponent`等于`1`或时的特殊情况`0`。然后你有当`coefficient`是`-1`。剩下的就是默认情况下的负数`coefficient`或`-1`正数`coefficient`。所以 if 语句应该如下所示：

```
public String toString() {
    if(coefficient == 0){
      return "0";
    } else if ( coefficient == 1 && exponent != 0){
        return "x^"+exponent; 
    } else if ( exponent == 1){
      return coefficient+"x"; 
    } else if ( exponent == 0){
      return ""+coefficient; 
    } else if ( coefficient == -1){
      return "-x^"+exponent; 
    } else {
      return coefficient+"x^"+exponent; 
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T21:09:56.937

您可以将第一个特殊情况与最后一个特殊情况结​​合起来。您还可以通过查看`abs`系数的值来组合第二种和第三种情况。

```
// If the coefficient is zero or the exponent is zero,
// the result is simply the coefficient:
if (c == 0 || e == 0) {
    return ""+c;
}
StringBuilder res = new StringBuilder();
// Do not print the number for the coefficient of +/- 1
if (Math.abs(c) == 1) {
    // For +1 do not print the sign either
    if (c == -1) {
        res.append("-");
    }
} else {
    res.append(c);
}
res.append("x");
// For exponent of 1, do not print ^1
if (e != 1) {
    res.append("^");
    res.append(e);
}
return res.toString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T21:14:37.920

这是尽可能接近的，我要说清楚

```
public class Term { 
    private final int coefficient;
    private final int exponent;

    public Term (final int coefficient,final int exponent) {
        this.coefficient = coefficient;
        this.exponent = exponent;           
    }

    @Override
    public String toString() {
        final String sign = getSign (coefficient);
        final String number = getNumber (coefficient);
        final String exponentStr = getExponentStr (coefficient, exponent);

        return String.format ("%s%s%s",sign, number, exponentStr);
    }

    private String getExponentStr(final int coefficient, final int exponent) {
        if (coefficient == 0 || exponent == 0) {
            return "";
        }
        if (exponent == 1) {
            return "x";
        }
        return "x^" + exponent;
    }

    private String getNumber(final int value) {
        final int absValue = Math.abs(value);

        return absValue == 1 ? "" : Integer.toString (absValue);
    }

    private String getSign(final int value) {
        return value < 0 ? "-" : "";
    }

    public static void main(String[] args) throws Exception {
        System.out.println(new Term (0, 2));
        System.out.println(new Term (1, 2));
        System.out.println(new Term (-1, 2));
        System.out.println(new Term (5, 1));
        System.out.println(new Term (5, 0));
    }
} 
```

和一个[小提琴](http://ideone.com/MeYB3E)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T21:16:47.620

我想，你不博览会不会是负面的。尝试如下：

```
@Override
public String toString() {
    if(coef ==0){
        return "0";
    }else if(expo ==0){
        return ""+coef;
    }else{
        String pref = coef==1? "": coef==-1?"-":""+coef; 
        String suff = expo>1? "^"+expo:""; 
        return pref+"x"+suff;
    }
} 
```

**编辑：**要使用`StringBuilder`，将最后一条语句更改如下（虽然我没有看到太多好处）

```
 return new StringBuilder(pref).append("x").append(suff).toString(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T21:08:32.830

嗯，你真的没有什么可以做的来让它更容易。您基本上有以下情况：

系数 = 0 --> 显示 0（与指数无关）
系数 = +/- 1 --> 显示 - 如果为 -1（(-1,0) 的特殊情况），否则没有
其他系数 --> 显示为存储

Exponent = 0 --> 不显示
否则，显示 x^exponent...

所以.....

```
public String toString() {
  String term = "";

  if (coefficient == 0) {
    return "0";
  } elseif (coefficient == -1) {
    if (exponent == 0) {
      return "-1";
    } else {
      term += "-";
    }
  } elseif (coefficient != 1) {
    term += String.valueOf(coefficient);
  } else {
    if (exponent == 0) {
      return "1";
    }
  }

  if (exponent != 0) {
    if (exponent == 1) {
      term += "x";
    } else {
      term += "x^" + String.valueOf(exponent);
    }
  }

  return term;
} 
```

我认为这涵盖了它？我没有通过 UnitTest 来确定它。

# jquery - jQuery图表/图表/绘图插件或方法来创建生命之轮图

> ID：13424304
> 
> 赞同：0
> 
> 时间：2012-11-16T20:58:12.353
> 
> 标签：jquery, html, css, charts, diagram

![我需要在 jquery 中创建以下图表](../Images/4a510587c91f4a2bdcf3ca2792785d10.png)

我想在 jquery、html 和 css 中创建上面的图表。我想知道是否有任何现有的 jquery 库或函数可以轻松完成。如果我想自己制作一个，可能哪个是最好的 jquery 绘图库来获取图表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T21:26:45.303

我会查看精彩的 d3.js 库[http://d3js.org/](http://d3js.org/)

编辑：我记得图表类型的名称。极性。

这是 d3.js 的精彩介绍

[http://kreese.net/blog/2012/08/26/d3-js-creating-a-polar-area-diagram-radial-bar-chart/](http://kreese.net/blog/2012/08/26/d3-js-creating-a-polar-area-diagram-radial-bar-chart/)

# macos - 如何获取端口的所有可用安装选项？

> ID：13424305
> 
> 赞同：0
> 
> 时间：2012-11-16T20:58:15.677
> 
> 标签：macos, opencv, macports

基本上我想安装 opencv 以便它使用 tbb 并使用完整的源代码进行提升。但是我想我需要知道如何显示端口的所有可用安装选项。（安装选项我的意思是端口名称后面的“+sth”，你是这么称呼它的吗？）

在我的具体例子中，我的行开始像

```
sudo port install opencv +tbb +python27 
```

但我不确定如何获得开发和增强选项......

任何想法如何显示选项？还是专门针对opencv？
谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-02T17:49:01.727

除了 Barnabas Szabolcs 提供的答案之外，我还发现**info**命令有助于查找有关端口的更多信息，包括可用的变体，而且还提供其他有趣的信息，例如软件许可证、维护人员等.

```
port info opencv 
```

上述命令产生以下输出（截至当前端口文件）：

```
opencv @3.0.0_1 (graphics, science)
Variants:             contrib, dc1394, debug, eigen, java, opencl, openni,
                      python27, python34, qt4, qt5, tbb, universal, vtk

Description:          OpenCV is a library that is mainly aimed at real time
                      computer vision. Some example areas would be
                      Human-Computer Interaction (HCI), Object Identification,
                      Segmentation and Recognition, Face Recognition, Gesture
                      Recognition, Motion Tracking, Ego Motion, Motion
                      Understanding, Structure From Motion (SFM), and Mobile
                      Robotics.
Homepage:             http://opencv.org

Extract Dependencies: unzip
Build Dependencies:   cmake, pkgconfig
Library Dependencies: zlib, bzip2, libpng, jpeg, jasper, tiff, ilmbase, openexr,
                      ffmpeg
Platforms:            darwin
License:              BSD
Maintainers:          stromnov@macports.org, openmaintainer@macports.org 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T21:38:39.103

对不起，我找到了：

端口安装选项**不是选项而是变体**。命令是：

```
port variants opencv 
```

就我而言。

对于那些关心的人——尽管在 opencv 的代码中我喜欢使用 USING_BOOST 标志——没有额外的变体来支持升压（也许它是自动的？）。
我的完整安装线是

```
sudo port install opencv +debug +python27 +qt4 +tbb 
```

# nose - 竹子怎么叫鼻子

> ID：13424306
> 
> 赞同：1
> 
> 时间：2012-11-16T20:58:19.593
> 
> 标签：nose, bamboo

在我的上下文中，我无法将头绕在 Bamboo 周围。我有功能测试，它们与正在构建的实际产品位于一个单独的存储库中。我们正在尝试使用 Bamboo 来检查和构建代码，运行单元/集成测试，如果都通过运行功能测试。这里的要求是功能测试在远程客户端上运行，该客户端与检查/构建代码并运行所有单元/集成测试的服务器通信。我安装了该服务器的远程代理，以通过在远程代理中设置命令功能来运行功能测试。问题是我需要从不同的工作目录开始调用我的测试。此外，一旦调用测试，我需要 Bamboo 来消耗这些结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-01T00:51:16.157

您还需要在计划中添加一个 JUnit Parser 任务，该任务将读取鼻子 xunit xml 输出并理解它。

所以步骤将是这样的：

1.  从回购中提取
2.  运行你的 nosetest --with-xunit 命令
3.  创建一个 JUnit 解析器任务来查找鼻子输出 xml。默认是nosetests.xml 我认为

一旦 Bamboo 到达第 3 步，它将知道测试是否通过并终止构建。

希望有帮助。

G

# google-provisioning-api - 谷歌配置 api 返回明显虚假的帐户创建错误

> ID：13424309
> 
> 赞同：5
> 
> 时间：2012-11-16T20:58:31.307
> 
> 标签：google-provisioning-api

我们使用 Google Python API 创建帐户。从太平洋标准时间 2012 年 11 月 8 日下午 1 点开始，我们开始收到以下间歇性错误消息：

```
errorCode="1301" invalidInput="loginname" reason="EntityDoesNotExist" 
```

当我们检查 Google 仪表板时，实际上已经创建了帐户，但是由于 google 发回的错误消息，我们的其余帐户创建任务没有完成。

有没有其他人注意到这个问题和/或知道为什么会发生这种情况？

我们的账户配置代码非常强大，在 11 月 8 日之前已经创建了 50,000 多个账户。

这是代码片段：

```
r = client.CreateUser(act.localpart, family_name, given_name, password, suspended='false', quota_limit=25600, password_hash_function="SHA-1",change_password=None ) 
```

这是完整的回溯：

```
Traceback (most recent call last):
  File "/usr/lib/python2.4/site-packages/cherrypy/_cphttptools.py", line 105, in _run
    self.main()
  File "/usr/lib/python2.4/site-packages/cherrypy/_cphttptools.py", line 254, in main
    body = page_handler(*virtual_path, **self.params)
  File "<string>", line 3, in create_accountgmail
  File "/usr/lib/python2.4/site-packages/turbogears/controllers.py", line 348, i  expose
    output = database.run_with_transaction(
  File "<string>", line 5, in run_with_transaction
  File "/usr/lib/python2.4/site-packages/turbogears/database.py", line 376, in s _rwt
    retval = dispatch_exception(e, args, kw)
  File "/usr/lib/python2.4/site-packages/turbogears/database.py", line 357, in s _rwt
    retval = func(*args, **kw)
  File "<string>", line 5, in _expose
  File "/usr/lib/python2.4/site-packages/turbogears/controllers.py", line 365, i  <lambda>
    mapping, fragment, args, kw)))
  File "/usr/lib/python2.4/site-packages/turbogears/controllers.py", line 393, in _execute_func
    output = errorhandling.try_call(func, *args, **kw)
  File "/usr/lib/python2.4/site-packages/turbogears/errorhandling.py", line 72, in try_call
    return func(self, *args, **kw)
  File "<string>", line 3, in create_accountgmail
  File "/usr/lib/python2.4/site-packages/turbogears/controllers.py", line 182, in validate
    return errorhandling.run_with_errors(errors, func, *args, **kw)
  File "/usr/lib/python2.4/site-packages/turbogears/errorhandling.py", line 115, in run_with_errors
    return func(self, *args, **kw)
  File "<string>", line 3, in create_accountgmail
  File "/usr/lib/python2.4/site-packages/turbogears/identity/conditions.py", line 235, in require
    return fn(self, *args, **kwargs)
  File "/usr/local/MYA/mya/account_controllers.py", line 1893, in create_accountgmail
    raise Exception('Could not create gmail account, %s: %s'%(result, act.format_address()))
Exception: Could not create gmail account, RequestError: Server responded with: 400, <?xml version="1.0" encoding="UTF-8"?>
<AppsForYourDomainErrors>
  <error errorCode="1301" invalidInput="LOGIN" reason="EntityDoesNotExist" />
</AppsForYourDomainErrors>: LOGIN@berkeley.edu 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:59:29.410

另一个有同样问题的人向谷歌提交了一张票，得到了这样的回复：

我们从 Google Enterprise 支持部门收到了以下关于“EntityDoesNotExist”配置错误的更新：

```
 It seems that it's the request to retrieve the user that is
  returning this exception. It's most likely due to a propagation
  delay in our servers: the user is correctly provisioned but the
  information isn't propagated quickly enough and the call to
  retrieve the user is made on a server where the user isn't
  provisioned yet so you get the error EntityDoesNotExist.

  As a temporary workaround until additional specialists can
  resolve the propagation issue, I suggest you ignore the requests
  that are failing with the error EntityDoesNotExist. I have added
  your case to an issue report and will be sure to update you with
  additional updates as they transpire. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:27:43.113

我在使用他们的 .NET 库时遇到了同样的问题，谷歌支持告诉我停止使用客户端登录并使用 OAuth2.0。客户端登录已弃用：[https ://developers.google.com/accounts/docs/AuthForInstalledApps](https://developers.google.com/accounts/docs/AuthForInstalledApps)

我目前正在与 OAuth 搏斗，所以我无法报告它是否工作得更好。然而，这个问题在此期间自行消失了。

# java - 这是在 Java/Swing 中创建流畅动画的好设计吗？

> ID：13424311
> 
> 赞同：2
> 
> 时间：2012-11-16T20:58:35.217
> 
> 标签：java, image, swing, buffer, paint

我有一个带有自定义 paintComponent() 实现的 JPanel 子类。它正在以 50fps 的速度刷新。它的大小通常在 500x300 像素范围内。我看到一些闪烁（不是太糟糕但很明显），并且我插入了一些调试代码，表明 Swing/EDT 正在跳过（大概）冗余绘制。我猜这是因为 EDT 没有给 paintComponent() 提供足够的时间来始终完成，或者 EDT 花费了太多时间。

我的想法是我需要获取当前实现 paintComponent() 的代码（这不是很复杂但也不是完全微不足道）并重构它，以便它在自己的线程（或至少不是 EDT）上执行并绘制到图像缓冲区。然后我在我的自定义 JPanel 上实现 paintComponent 并从 ImageBuffer 绘制（渲染）到屏幕（实际上是到 Swing 组件后面的缓冲区，因为我对解决方案的研究让我了解了一些关于 Swing 被（默认情况下）双缓冲的信息，尽管我'对此并不完全清楚）。如果从 ImageBuffer 到 JPanel 的渲染确实比我构建 ImageBuffer 的实现更快，那么我将朝着正确的方向前进。

这对我来说是正确的设计方向吗？

**更新**

我修改了我的实现，如下面的响应中所述：

1）创建一个缓冲图像

`BufferedImage myBufferedImage = new BufferedImage(mySize.width,mySize.height,BufferedImage.TYPE_INT_ARGB)`

2) 创建一个专用于执行处理以确定要绘制什么的线程。

3) 将之前在paintComponent() 中的代码移动到由专用线程执行的另一个方法中。在这个方法的最后，调用 repaint();

4）创建一个新的paintComponent（），它只是调用`g.drawImage(myBufferedImage,0,0,null);`

5) 在我之前调用 repaint() 的地方，触发 myThread 对 myBufferedImage 执行绘图。

正如预测的那样，这是一场灾难。更糟糕的闪烁和迟缓，部分绘画等。我相信这是由于争用读/写 myBufferedImage（如下所述）。因此，我在写入时（在专用绘图线程中）创建了一个锁并锁定 myBufferedImage，并在调用 Graphics2D.drawImage() 之前等待在 paintComponent() 中获得该锁；闪烁和部分绘制消失了——但性能并不比我在paintComponent（因此在EDT）中为绘图进行所有计算时更好（甚至可能更差）。

这让我在这一点上难住了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T21:33:54.230

如果您没有更新整个组件（即只有小区域正在更改），您可以使用[`JComponent#repaint(Rectangle r)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#repaint%28java.awt.Rectangle%29)指示已更改的区域。这将导致更新（可能）更小的区域的重绘周期。

前段时间我生成了一个“动画序列”库来拍摄一系列图像并将它们分层放置在每个图像之上，给定每个图层的“速度”，它会将它们从右到左转置。

整个序列将循环 10 秒，其中 1 的速度需要 10 秒才能完成。每一层都以不同的速度移动。

原始图像为 1024x256，序列由 5 个动画层和 2 个静态层设计...

我只希望我能向您展示这在我的 PC 和 Mac 上播放的流畅度。

![在此处输入图像描述](../Images/6022bbbc209f4acecd4086d8a7a92cce.png)

我必须克服的唯一重要问题是确保图像与屏幕设备颜色模型兼容。

**更新**

这些是我在加载或创建 s 时使用的一些实用程序类`BufferedImage`，尤其是对于动画。确保颜色模型与屏幕使用的颜色模型相同，这将使它们更快地更新/重绘

```
public static BufferedImage loadCompatibleImage(URL resource) {

    BufferedImage image = null;

    try {
        image = ImageIO.read(resource);
    } catch (IOException ex) {
    }

    return image == null ? null : toCompatibleImage(image);

}

public static BufferedImage toCompatibleImage(BufferedImage image) {

    if (image.getColorModel().equals(getGraphicsConfiguration().getColorModel())) {

        return image;

    }

    BufferedImage compatibleImage =
            getGraphicsConfiguration().createCompatibleImage(
            image.getWidth(), image.getHeight(),
            image.getTransparency());

    Graphics g = compatibleImage.getGraphics();
    g.drawImage(image, 0, 0, null);
    g.dispose();

    return compatibleImage;

}

public static GraphicsConfiguration getGraphicsConfiguration() {

    return GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().getDefaultConfiguration();

}

// Check out java.awt.Transparency for valid values
public static BufferedImage createCompatibleImage(int width, int height, int transparency) {

    BufferedImage image = getGraphicsConfiguration().createCompatibleImage(width, height, transparency);
    image.coerceData(true);
    return image;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T17:11:18.727

我认为这是您正在寻找有关双缓冲信息的内容：

[http://docs.oracle.com/javase/tutorial/extra/fullscreen/doublebuf.html](http://docs.oracle.com/javase/tutorial/extra/fullscreen/doublebuf.html)

如果您无法访问我不完全确定可以访问的底层缓冲区，您可以使用 setDoubleBuffered(false) 关闭双缓冲。

我认为您不能安全地从另一个线程绘制图像，因为当 EDT 在重绘时读取相同的图像时，您将进入写入图像的线程。如果您在它们之间共享图像，您将遇到必须同步的多线程问题。如果你同步，那么你的性能不会很好。如果您在每一帧都实例化一个新图像，那么您的内存将会猛增，而 GC 会得到您。您可能能够实例化 10 帧并使写入远离读取或类似的东西，但无论哪种方式，要使其高效和正确都非常棘手。

我的建议是从 EDT 进行所有绘图，并找出在另一个不涉及 ImageBuffer 共享的线程上进行计算（渲染）的方法。

**更新**虽然它用于全屏。那里的建议也适用于窗口模式：“将绘图代码与渲染循环分开，以便您可以在全屏独占模式和窗口模式下完全操作。” 请参阅此[http://docs.oracle.com/javase/tutorial/extra/fullscreen/rendering.html](http://docs.oracle.com/javase/tutorial/extra/fullscreen/rendering.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T02:32:33.587

我在尝试流畅地绘画时遇到了类似的问题。

尝试运行它，看看它有多流畅（对我来说它很流畅）。

profiler 说大部分时间都在油漆组件中。有趣的是没有提到绘制图像。

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import javax.swing.*;
class P extends JPanel {
    void init(Dimension d) {
        GraphicsConfiguration gc=getGraphicsConfiguration();
        bi=gc.createCompatibleImage(d.width,d.height);
    }
    @Override public void paintComponent(Graphics g) {
        //super.paintComponent(g);
        if(bi!=null)
            g.drawImage(bi,0,0,null);
    }
    BufferedImage bi;
}
public class So13424311 {
    So13424311() {
        p=new P();
    }
    void createAndShowGUI() {
        Frame f=new JFrame("so13424311");
        // f.setUndecorated(true);
        f.addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        });
        f.add(p);
        p.init(d);
        p.setSize(d);
        p.setPreferredSize(d);
        f.pack();
        // if(moveToSecondaryDisplay)
        // moveToSecondaryDisplay(f);
        f.setVisible(true);
    }
    void run() {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
        Timer t=new Timer(20,new ActionListener() {
            @Override public void actionPerformed(ActionEvent e) {
                Graphics g=p.bi.getGraphics();
                Color old=g.getColor();
                g.fillRect(0,0,d.width,d.height);
                g.setColor(Color.red);
                g.fillRect(n%(d.width/2),n%(d.height/2),20,20);
                g.setColor(Color.green);
                g.fillRect(n%(d.width/2)+20,n%(d.height/2),20,20);
                g.setColor(Color.blue);
                g.fillRect(n%(d.width/2),n%(d.height/2)+20,20,20);
                g.setColor(Color.yellow);
                g.fillRect(n%(d.width/2)+20,n%(d.height/2)+20,20,20);
                g.setColor(old);
                g.dispose();
                p.repaint();
                n++;
            }
            int n;
        });
        t.start();
    }
    public static void main(String[] args) {
        new So13424311().run();
    }
    final P p;
    Dimension d=new Dimension(500,300);
} 
```

# asp.net - 访问 IIS 开发。来自虚拟机的服务器

> ID：13424313
> 
> 赞同：0
> 
> 时间：2012-11-16T20:58:38.813
> 
> 标签：asp.net, visual-studio-2010, iis, iis-7, vmware

我在本地 Windows Server webdev 机器上运行 Visual Studio。当我运行我的网站时，这会启动一个 ASP.NET 开发服务器。

我需要在各种版本/浏览器/工具中对此进行测试，因此我想从 VM 访问它，而不必每次我想测试某些东西时都部署它。

因此：有没有办法从我的 VM 访问我的本地 ASP.NET 服务器？

我可以为此使用反向代理或其他东西吗？如果有怎么办？为什么我可以访问 IIS7 欢迎页面，但不能访问特定端口上的网络服务器实例？

干杯

编辑以区分 Cassini ASP.NET Dev。服务器和 IIS7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:33:15.540

[我找到了一种使用 Fiddler 的方法。](http://www.fiddler2.com/fiddler/help/reverseproxy.asp)

基本上你只需在开发者上创建一个反向代理。机器像这样：

if (oSession.host.toLowerCase() == "192.168.0.100:8888") oSession.host = "localhost:41111";

我的 ASP.NET 开发服务器（来自 VS2010）在 localhost:41111 上运行，我在浏览器中使用 192.168.0.100:8888 (mydevhostip:8888) 从本地网络（或 VM）上的其他机器访问它。

# android - 即使项目构建目标是 Google，MapActivity 类也无法解析

> ID：13424314
> 
> 赞同：0
> 
> 时间：2012-11-16T20:58:44.457
> 
> 标签：android, android-maps

我正在尝试将 Google 地图集成到我正在开发的应用程序中。我遵循了设置指南，并且已经确保项目的构建目标是 Google API 目标之一。但是，eclipse 仍然告诉我 MapActivity 不是一个类。

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:09:39.500

也许您缺少 AndroidManifest.xml 上的 Google 地图库声明

```
 <application ... 
     <uses-library android:name="com.google.android.maps" />
     ....
 </application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T21:45:55.033

您在编译或运行应用程序时遇到问题吗？

如果是在编译时，您是否导入了该类

```
import com.google.android.maps.MapActivity; 
```

您还需要覆盖 isRouteDisplayed() 方法

```
@Override
protected boolean isRouteDisplayed() {
    return false;
} 
```

正如 Robert Estivill 所说，需要更多信息！

# python - Python RabbitMQ 和 Kombu：心跳

> ID：13424316
> 
> 赞同：2
> 
> 时间：2012-11-16T20:58:57.577
> 
> 标签：python, twisted, rabbitmq, kombu

我有一个 Twisted 应用程序（Python 2.7），它使用 kombu 模块与 RabbitMQ 消息服务器进行通信。

我们在关闭连接时遇到问题（可能与防火墙相关），我正在尝试实现`heartbeat_check()`处理此问题的方法。我在连接上设置了 10 的心跳值，并且我有一个 Twisted ，它每 5 秒`LoopingCall`调用一次该方法。`heartbeat_check(rate=2)`

但是，一旦事情进展顺利，我就会在其他所有调用中抛出一个异常`heartbeat_check()`（基于我在`LoopingCall`调用的函数中获得的日志信息，其中包括对 的调用`heartbeat_check`）。我尝试了各种心跳和速率值的变化，但似乎没有任何帮助。当我调试它时，`heartbeat_call()`它看起来像是在来回发送一些次要的消息流量，我应该在我的消息使用者中对此做出响应吗？

任何提示或指示都会非常有帮助，在此先感谢！！

道格

# sql - 列安全的`INSERT INTO t1 SELECT * FROM ...`？

> ID：13424319
> 
> 赞同：4
> 
> 时间：2012-11-16T20:59:04.923
> 
> 标签：sql, postgresql

`INSERT INTO t1 SELECT * FROM...`如果列名不一致，是否有某种方法会失败？

我正在使用 Postgresql 9.x 列名事先不知道。

动机：我正在通过（相当标准的）PL/pgSQL 过程定期刷新物化视图：

```
CREATE OR REPLACE FUNCTION matview_refresh(name) RETURNS void AS 
$BODY$
DECLARE 
    matview ALIAS FOR $1;
    entry matviews%ROWTYPE;
BEGIN
    SELECT * INTO entry FROM matviews WHERE mv_name = matview;
    IF NOT FOUND THEN
        RAISE EXCEPTION 'Materialized view % does not exist.', matview;
    END IF;

    EXECUTE 'TRUNCATE TABLE ' || matview;
    EXECUTE 'INSERT INTO ' || matview  || ' SELECT * FROM ' || entry.v_name;

    UPDATE matviews SET last_refresh=CURRENT_TIMESTAMP WHERE mv_name=matview;
    RETURN;
END 
```

我更喜欢 a`TRUNCATE`后跟 a`SELECT * INTO`而不是 DROP/CREATE，因为它看起来更轻巧且对并发友好。如果有人从视图中添加/删除列（然后我会执行 DROP/CREATE），它将失败，但没关系，在这种情况下刷新不会完成，我们很快就会发现问题。重要的是今天发生的事情：有人更改了视图的两列（相同类型）的顺序，并且刷新插入了虚假数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T00:25:54.897

您可以查询 information_schema.columns 以按正确顺序获取列：

```
SELECT INTO cols array_to_string(array_agg(column_name::text), ',') 
FROM (
    SELECT column_name 
    FROM information_schema.columns 
    WHERE table_name = 'matview' 
    ORDER BY ordinal_position
) AS x;
EXECUTE 'INSERT INTO ' || matview  || ' SELECT ' || cols || ' FROM ' || entry.v_name; 
```

您可以直接从 pg_attribute 获取列列表——只需将内部替换`SELECT`为`information_schema.columns`：

```
SELECT attname AS column_name
FROM pg_attribute
WHERE attrelid = 'matview'::regclass AND attisdropped = false
ORDER BY attnum; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T00:38:50.400

将此构建到您的 plpgsql 函数中，以验证视图和表以相同的顺序完全共享相同的列名：

```
IF EXISTS (
    SELECT 1
    FROM (
       SELECT *
       FROM   pg_attribute
       WHERE  attrelid = matview::regclass
       AND    attisdropped = FALSE
       AND    attnum > 0
       ) t
    FULL OUTER JOIN (
       SELECT *
       FROM   pg_attribute
       WHERE  attrelid = entry.v_name::regclass
       AND    attisdropped = FALSE
       AND    attnum > 0
       ) v USING (attnum, attname) -- atttypid to check for type, too
    WHERE t.attname IS NULL
    OR    v.attname IS NULL
   ) THEN 
   RAISE EXCEPTION 'Mismatch between table and view!';
END IF; 
```

为列名列表之间的任何不匹配`FULL OUTER JOIN`添加一行`NULL`值。因此，如果`EXISTS`找到一行，则说明有问题。

`::regclass`如果表或视图不存在（或超出范围 - 不在且不符合模式），则转换为将立即引发异常`search_path`。

如果您还想检查列的数据类型，只需添加`atttypid`到`USING`子句中。

顺便说一句：查询`pg_catalog`表通常比查询臃肿的视图 int 快一个数量级`information_schema`- information_schema 仅对 SQL 标准合规性和代码的可移植性有好处。由于您正在编写 100 % Postgres 特定的代码，因此这里两者都不相关。

# arrays - 如何根据索引简洁地分配数组值？

> ID：13424320
> 
> 赞同：0
> 
> 时间：2012-11-16T20:59:07.220
> 
> 标签：arrays, syntax, pascal

```
Xaxis:array[1..10] of integer;
begin 
Xaxis[1] :=10;
Xaxis[2] :=20;
Xaxis[3] :=30;
Xaxis[4] :=40;
Xaxis[5] :=50;
Xaxis[6] :=60;
Xaxis[7] :=70;
Xaxis[8] :=80;
Xaxis[9] :=90;
Xaxis[10] :=100; 
```

有没有一种更简单、更快捷的方法来为这个在 pascal 中的数组声明值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:05:39.433

使用 for 循环：

```
for num := 1 to High(Xaxis) do 
begin
  Xaxis[num] := num * 10
end; 
```

但首先请务必将“num”声明为整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:05:45.613

您还可以通过编写预初始化数组

```
const
 Xaxis: array[1..10] of integer = (10, 20, 30, 40, 50, 60, 70, 80, 90, 100); 
```

当没有简单的算术函数来初始化数组时，这种方法会更好。如果您编写了 xaxis[1]:= 5、xaxis[2]:= 14、xaxis[3]:= 29 等，那么循环将不适合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T21:00:41.880

使用循环。我忘记了帕斯卡的语法，但类似`Xaxis[index] := index * 10;`循环内部的东西会起作用。

# asp.net-mvc - asp.net MVC4上同一文件夹上视图的不同控制器

> ID：13424321
> 
> 赞同：1
> 
> 时间：2012-11-16T20:59:08.857
> 
> 标签：asp.net-mvc, asp.net-mvc-4, split, controllers

我一直在研究这个。我找到了“MVC 区域”，但我仍然无法做我正在寻找的东西。

我的观点：观点/学生/课程学生/信息学生/状态学生/GeneralSituation等，等等...

控制器：

控制器/学生

我想做的是：

我不想在一个“学生”控制器中拥有来自很多视图的所有代码。关于如何将控制器“拆分”为多个文件的任何提示？我只是在看最简单的方法，我不想对我的项目进行大的修改。

我正在使用 MVC4。

提前致谢！..

即插即用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T21:02:12.343

为什么不只创建部分控制器类，从而将一个控制器拆分为一堆物理文件？

另外，“来自很多观点的代码”是什么意思？您是否使用单独的服务层并在其中执行业务逻辑，因为这是最佳实践。控制器应该是非常轻量级的，代码如下：

```
public ActionMethod DoSomething()
{
    StudentViewModel vm = _studentService.GetSomeData();
    return View(vm);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T21:06:11.447

你可以做一个部分类StudentController：

您的文件夹/文件如下所示：

```
Controllers
  StudentController
    StudentController.Status.cs
    StudentController.GeneralSituation.cs
    StudentController.Course.cs 
```

代码将是：

**StudentController.Status.cs：**

```
public partial class StudentController
{
    [Actions relevant for Status of a student]
} 
```

**StudentController.GeneralSituation.cs：**

```
public partial class StudentController
{
    [Actions relevant for General Situation of a student]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T21:35:56.503

区域不起作用的任何原因？从你描述的情况来看，我真的不明白他们为什么不这样做。

```
- Areas
    - Students
      - Controllers
          HomeController           Handles base /Students/ route
          InformationController    ~/Students/Information/{action}/{id} 
          StatusController         ~/Students/Status/{action}/{id}
          ...
      - Models
      - Views
          Home/
          Information/
          Status/
          ...
          Shared/        Stick common views in here 
```

如果你设置在一个怪物控制器（或部分）上，你的控制器应该只有很少的实际“查看代码”。将所有这些留给视图模型 - 控制器只是传递所需的资源来构建视图数据，从而使控制器保持精简。

IE，

```
public class StudentController
{
    ...

    // Actually I prefer to bind the id to a model and handle 404
    // checking there, vs pushing that boiler plate code further down 
    // into the controller, but this is just a quick example.

    public ActionResult Information(int id)
    {
        return View(new InformationPage(this.StudentService, id));
    }
} 
```

然后，`InformationPage`您的模型之一将处理构建适用于该视图的所有信息。

```
public class InformationPage
{
     public Student Student { get; set; }

     public InformationPage(StudentService service, int studentId)
     {
         Student = service.FindStudent(studentId);
         ... Other view data ...
     }
} 
```

# c# - 如何在列表视图中聚焦和移动滚动条

> ID：13424323
> 
> 赞同：3
> 
> 时间：2012-11-16T20:59:12.393
> 
> 标签：c#, winforms, listview, scroll, focus

我有一个**ListView**，我对选定的更改事件进行了一些选择

```
 private void seleccionarIndexEnLista(int i)
    {
        lstvClientes.Items[i].Selected = true;
        lstvClientes.Items[i].Focused = true;

    } 
```

但是如果所选项目不在视图中并被选中，则滚动条不会移动，因此在移动滚动条之前我看不到它被选中。

当我在代码中进行选择来解决这个问题时，我可以移动滚动条吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T22:45:54.617

```
lstvClientes.Items[i].EnsureVisible(); 
```

# python - Python 一种用不同 dtype 屏蔽两个数组的方法（单元 8 和单元 16）

> ID：13424330
> 
> 赞同：2
> 
> 时间：2012-11-16T20:59:56.840
> 
> 标签：python, arrays, optimization, numpy

我有 2 个数组：

掩码：值为 0 和 1，dtype=uint8

```
>>> mask
array([[0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0],
       [1, 1, 1, ..., 0, 0, 0],
       ..., 
       [1, 1, 1, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0]], dtype=uint8) 
```

和 prova_clip

```
>>> prova_clip
array([[289, 281, 271, ..., 257, 255, 255],
       [290, 284, 268, ..., 260, 260, 259],
       [294, 283, 264, ..., 265, 263, 257],
       ..., 
       [360, 359, 360, ..., 335, 338, 331],
       [359, 364, 369, ..., 337, 342, 339],
       [358, 363, 368, ..., 332, 331, 332]], dtype=uint16) 
```

我希望使用代码保存方法用掩码屏蔽 prova_clip 以便拥有

```
array([[0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0],
       [294, 283, 264, ..., 0, 0, 0],
       ..., 
       [360, 359, 360, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0]], dtype=uint16) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T21:02:15.767

我错过了什么吗？这看起来很简单：

```
prova_clip*mask 
```

这是一个例子：

```
>>> a = np.arange(10,dtype=np.uint16)
>>> mask = np.ones(10,dtype=np.uint8)
>>> mask[1:3] = 0
>>> a*mask
array([0, 0, 0, 3, 4, 5, 6, 7, 8, 9], dtype=uint16) 
```

* * *

你也可以用复杂的方式来修改数组。

```
>>> b = np.arange(10,dypte=np.uint16)
>>> b[~mask.astype(bool)] = 0
>>> b
array([0, 0, 0, 3, 4, 5, 6, 7, 8, 9], dtype=uint16) 
```

* * *

最后，有`numpy.where`：

```
>>> c = np.arange(10,dtype=np.uint8)
>>> np.where(mask==0,0,c)
array([0, 0, 0, 3, 4, 5, 6, 7, 8, 9], dtype=uint16) 
```

# scheduling - Perfmon - 每个线程的 L2 缓存未命中

> ID：13424331
> 
> 赞同：1
> 
> 时间：2012-11-16T21:00:15.000
> 
> 标签：scheduling, x86-64, perfmon

```
Architecture:
**AMD** Opteron quad-core using 2 CPUs --- Numa system
Each CPU has a shared L3 Cache ; Each Core has a private L1 and L2

Processor : x86_64 Operating System: GNU/Linux 
```

我是[Perfmon](http://perfmon2.sourceforge.net/)的新世界。我正在尝试获取性能计数器`Last level cache misses(LLCM)`和`IPS`.

当只有一个线程/核心时，我能够获取它们

当有多个时，是否也可以获取每个线程的性能计数器，如 IPS 和 LLCM `2 threads/core`？

根据我的研究 - 我意识到，当有多个线程时，不可能获得每个线程的 LCM/IPS，`thread/core`因为 AMD 不提供这些性能计数器。

所以，我的问题是，是否可以在 2 级缓存中获取 PC/线程。如果是 - 如何？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:40:56.677

我对此进行了更多研究，并询问了我的教授。

看起来 perfmon 确实允许我们这样做。

希望这可以帮助。如果我能以某种方式提供帮助，请告诉我。

# android - 无法暂停活动，尚未创建内容视图

> ID：13424332
> 
> 赞同：8
> 
> 时间：2012-11-16T21:00:25.490
> 
> 标签：android, android-fragments, commonsware

我抓住了[The Busy Coder's Guide to Android Development 4.2](http://commonsware.com/Android/)中演示的[EU4You 示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/LargeScreen/EU4You)（由 StackOverflow 上的 Mark Murphy aka [commonsware](https://stackoverflow.com/users/115145/commonsware)提供）。跟随这个示例项目可能更容易，但我会尝试在问题中发布相关的代码部分。您还需要导入[ActionBarSherlock](https://github.com/commonsguy/cw-omnibus/tree/master/external/ActionBarSherlock)项目。您还需要将 Java 编译器设置为 1.6（以允许使用 @Override 注释）。

**注意：我已将 min-sdk 更改为 8（2.3，Froyo），将 target-sdk 更改为 16（4.1，Ice Cream Sandwich）。**

**注意：我已将`countries`framelayout id更改为`left_pane`并将framelayout id 更改`details`为`right_pane`.**

主布局文件（layout-large-land）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="horizontal"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">
  <FrameLayout
    android:id="@+id/left_pane"
    android:layout_weight="30"
    android:layout_width="0px"
    android:layout_height="fill_parent"
  />
  <FrameLayout
    android:id="@+id/right_pane"
    android:layout_weight="70"
    android:layout_width="0px"
    android:layout_height="fill_parent"
  />
</LinearLayout> 
```

主要布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/left_pane"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
/> 
```

示例应用程序的原始版本有两个活动（确切地说是 SherlockFragmentActivities）。

1.  EU4You - 加载适当的布局（默认或横向大）。如果默认，则在 SherlockListFragment 中加载国家列表。如果横向大，加载列表和详细信息片段以显示所选国家。
2.  DetailsActivity - 在*不*使用横向大布局时通过 DetailsFragment 加载所选国家。

如果您单击列表片段中的国家/地区，EU4You（主要托管活动）会检查 DetailsFragment 的存在和可见性。如果存在，它会在该片段中加载国家网站。如果没有，它会触发 DetailsActivity，然后处理添加 DetailsFragment（然后加载给定国家/地区的网站）。

这很好用，就像在平板电脑和手机上支持多种屏幕布局的典型应用程序一样。

我的问题是我想删除 DetailsActivity 并坚持一个活动。每当我不在大横向布局中时（换句话说，我在平板电脑上的纵向布局或任何方向的手机上），我都想用详细信息片段交换（替换）列表片段。所以我所做的是在 EU4You SherlockFragmentActivity 中更改了以下内容：

**原始**（对注释中提到的框架布局名称进行了轻微的命名修改......国家是left_pane，细节是right_pane）：

```
@Override
public void onCountrySelected(Country c) {
    String url=getString(c.url);

    if (details != null && details.isVisible()) {
        details.loadUrl(url);
    }
    else {
        Intent i=new Intent(this, DetailsActivity.class);

        i.putExtra(DetailsActivity.EXTRA_URL, url);
        startActivity(i);
    }
} 
```

我修改后的**单一活动版本**：

```
@Override
public void onCountrySelected(Country c) {
    String url=getString(c.url);

    if (details != null && details.isVisible()) {
        details.loadUrl(url);
    } 
    else {
        details = new DetailsFragment();
        FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        ft.replace(R.id.left_pane, details);
        ft.addToBackStack(null);
        ft.commit();
        getSupportFragmentManager().executePendingTransactions();
        details.loadUrl(url);
    }
} 
```

这按预期工作。我单击列表中的网站（在平板电脑上以纵向模式，或在任何方向的手机上），详细信息显示在详细信息片段中，它替换了网站列表片段。但是，如果我在显示国家/地区详细信息时单击设备上的主页按钮，我会收到强制关闭错误，并显示以下 logcat 详细信息（仅使用默认布局，只有一个 left_pane 框架布局......我没有当存在 left_pane 和 right_pane 时，平板电脑上的横向方向存在此问题）：

```
11-16 15:04:33.525: E/AndroidRuntime(688): FATAL EXCEPTION: main
11-16 15:04:33.525: E/AndroidRuntime(688): java.lang.RuntimeException: Unable to pause activity {com.commonsware.android.eu4you/com.commonsware.android.eu4you.EU4You}: java.lang.IllegalStateException: Content view not yet created
11-16 15:04:33.525: E/AndroidRuntime(688):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3348)
11-16 15:04:33.525: E/AndroidRuntime(688):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3305)
11-16 15:04:33.525: E/AndroidRuntime(688):  at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:3288)
11-16 15:04:33.525: E/AndroidRuntime(688):  at android.app.ActivityThread.access$2500(ActivityThread.java:125)
11-16 15:04:33.525: E/AndroidRuntime(688):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2040)
11-16 15:04:33.525: E/AndroidRuntime(688):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-16 15:04:33.525: E/AndroidRuntime(688):  at android.os.Looper.loop(Looper.java:123)
11-16 15:04:33.525: E/AndroidRuntime(688):  at android.app.ActivityThread.main(ActivityThread.java:4627)
11-16 15:04:33.525: E/AndroidRuntime(688):  at java.lang.reflect.Method.invokeNative(Native Method)
11-16 15:04:33.525: E/AndroidRuntime(688):  at java.lang.reflect.Method.invoke(Method.java:521)
11-16 15:04:33.525: E/AndroidRuntime(688):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-16 15:04:33.525: E/AndroidRuntime(688):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-16 15:04:33.525: E/AndroidRuntime(688):  at dalvik.system.NativeStart.main(Native Method)
11-16 15:04:33.525: E/AndroidRuntime(688): Caused by: java.lang.IllegalStateException: Content view not yet created
11-16 15:04:33.525: E/AndroidRuntime(688):  at android.support.v4.app.ListFragment.ensureList(ListFragment.java:328)
11-16 15:04:33.525: E/AndroidRuntime(688):  at android.support.v4.app.ListFragment.getListView(ListFragment.java:222)
11-16 15:04:33.525: E/AndroidRuntime(688):  at com.commonsware.android.eu4you.CountriesFragment.onSaveInstanceState(CountriesFragment.java:64)
11-16 15:04:33.525: E/AndroidRuntime(688):  at android.support.v4.app.FragmentManagerImpl.saveFragmentBasicState(FragmentManager.java:1574)
11-16 15:04:33.525: E/AndroidRuntime(688):  at android.support.v4.app.FragmentManagerImpl.saveAllState(FragmentManager.java:1644)
11-16 15:04:33.525: E/AndroidRuntime(688):  at android.support.v4.app.FragmentActivity.onSaveInstanceState(FragmentActivity.java:499)
11-16 15:04:33.525: E/AndroidRuntime(688):  at com.actionbarsherlock.app.SherlockFragmentActivity.onSaveInstanceState(SherlockFragmentActivity.java:127)
11-16 15:04:33.525: E/AndroidRuntime(688):  at android.app.Activity.performSaveInstanceState(Activity.java:1036)
11-16 15:04:33.525: E/AndroidRuntime(688):  at android.app.Instrumentation.callActivityOnSaveInstanceState(Instrumentation.java:1180)
11-16 15:04:33.525: E/AndroidRuntime(688):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3330)
11-16 15:04:33.525: E/AndroidRuntime(688):  ... 12 more 
```

如果我从上面的代码中删除以下行，我可以阻止此错误的发生：

```
ft.addToBackStack(null); 
```

我确实需要能够将替换事务添加到后台堆栈，所以我不能删除这一行（这个示例应用程序是我真正的应用程序的基础，它有更多的东西，但我用它来简化我的问题）。

所以两个问题：

1.  为什么会这样？
2.  我该如何解决它（也许是另一种方法）？

需要注意的一点是，在我的实际应用程序中，此逻辑必须全部位于操作栏中的选项卡内（ActionBarSherlock，因为我必须支持回到版本 2.3 (Froyo)）。

* * *

**更新（2012 年 11 月 22 日 13:27 EST）**

我在[GitHub 上](https://github.com/jasondown/EU4You_Modified)发布了一个示例项目。我是 Eclipse 和 Android 开发的新手，所以我可能没有包含我需要的所有东西（工作空间不包括在内，我认为 ActionBarSherlock 项目不包括在内......它需要导入（可以在[这里](https://github.com/commonsguy/cw-omnibus/tree/master/external/ActionBarSherlock)找到） ）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T13:55:04.767

我无法评论您的具体崩溃，因为我没有看到该错误，除了推测它与/ 相关`replace()`而不是使用`attach()`/ `detach()`（只是猜测）。

但是，`getSupportFragmentManager().executePendingTransactions();`对我来说是一种代码味道。我的猜测是，您这样做是为了`details.loadUrl(url);`. 相反，请在 中添加一个数据成员`DetailsFragment`，例如`urlToBeApplied`，`loadUrl()`如果该值`WebView`尚不存在，则将值存储在那里。然后它可以将 URL 应用到`onCreateView()`. 我不能说这是否会对您的崩溃有所帮助。

您可能希望考虑发布一个完整的示例项目来演示该问题，因为您指望人们识别错误消息。

* * *

**更新**

基于示例应用程序，我能够更好地诊断问题。

`Content view not yet created`, on a `ListFragment`, 将意味着我们正在尝试调用`getListView()`尚未通过`onCreateView()`或*已经*通过的片段`onDestroyView()`。这通常表明存在时间问题。

在这种情况下，事实证明，无论如何，崩溃的工作是多余的。`onSaveInstanceState()`正在尝试保持选中项目的位置，因此我们可以稍后重新检查它（例如，在配置更改之后）。`normal`但是，当我们在显示器上时，我们甚至不需要首先处于检查模式。选中模式用于`activated`状态，当列表和详细信息并排时相关，但不相关时无关。因此，解决方法是如果我们不需要持久选择，则根本不用理会`onSaveInstanceState()`逻辑......我们可以通过调用`isPersistentSelection()`我们的`listener`.

不过，为了争论，让我们假设我们确实需要做这项工作。在这种情况下，我们有几个选择。最简单的可能是覆盖`onDestroyView()`和缓存选中的项目位置，在`onSaveInstanceState()`if `getListView()`returns中使用它`null`。

# php - PHP 中的 GeoIP 和 IP 到国家/地区

> ID：13424336
> 
> 赞同：5
> 
> 时间：2012-11-16T21:00:32.147
> 
> 标签：php, geoip

> **可能重复：**
> [如何使用 PHP 获取页面访问者国家/地区？](https://stackoverflow.com/questions/12965801/how-to-get-the-page-visitors-country-with-php)

我一直在到处寻找，我似乎找不到任何东西。我需要一个免费的 PHP GeoIP/IP 到国家。

我所能找到的只是它给了我国家和国家的小形式。我还想了解可能的街道或坐标、城市以及主机信息？

我需要这个，因为我正在创建一个 PHP CMS（为我自己和客户）并且我想跟踪 ips。

我真的不想要一个 API，我想要它就像一个数据库。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T21:26:11.480

MaxMind GeoLite 数据库：[http ://dev.maxmind.com/geoip/geolite](http://dev.maxmind.com/geoip/geolite) **或**付费购买完整版： http: [//www.maxmind.com/en/geolocation_landing](http://www.maxmind.com/en/geolocation_landing)

他们也有 php 库与之配套： http: [//dev.maxmind.com/geoip/downloadable](http://dev.maxmind.com/geoip/downloadable)

至于 PHP，请查看[GeoIP 库](http://php.net/manual/en/book.geoip.php)和[示例 geoip_record_by_name()](http://www.php.net/manual/en/function.geoip-record-by-name.php)

对于数据库，您可以让自己的数据库超时......并用缓存的收集数据填充它，但我怀疑这会像 MaxMind 的数据一样准确。

您可以使用**许多**其他方法并将它们与自定义数据库耦合，甚至将其与 GeoLite db 结合使用：[geoplugin](http://www.geoplugin.com/)、[ipinfodb](http://www.ipinfodb.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T21:16:38.600

谷歌是你最好的朋友:)。

您应该能够使用以下信息（API）自己制作：

[https://ipstack.com/](https://ipstack.com/)

# python - 由于在 Cygwin 中找不到合适的 Fortran 编译器，如何修复这个失败的 Python 扩展构建？

> ID：13424337
> 
> 赞同：3
> 
> 时间：2012-11-16T21:00:32.450
> 
> 标签：python, cygwin, fortran, sysadmin

我正在尝试安装一个 Python 扩展（hydroclimpy.sourceforge.net），它显然需要在安装之前将一些 Fortran 编译到自身中。当我为扩展运行构建命令时，我得到一个错误，告诉我没有找到合适的 Fortran 编译器：

```
$ c:/Python27/Python.exe setup.py build
non-existing path in 'scikits\\hydroclimpy': 'hydroclimpyrc.template'
running build
running config_cc
unifing config_cc, config, build_clib, build_ext, build commands --compiler options
running config_fc
unifing config_fc, config, build_clib, build_ext, build commands --fcompiler options
running build_src
build_src
building extension "scikits.hydroclimpy.stats._lmoments" sources
f2py options: []
  adding 'build\src.win32-2.7\fortranobject.c' to sources.
  adding 'build\src.win32-2.7' to include_dirs.
  adding 'build\src.win32-2.7\scikits\hydroclimpy\stats\_lmoments-f2pywrappers.f' to sources.
building data_files sources
build_src: building npy-pkg config files
running build_py
running build_ext
No module named msvccompiler in numpy.distutils; trying from distutils
customize MSVCCompiler
customize MSVCCompiler using build_ext
customize GnuFCompiler
Found executable C:\cygwin\bin\g77.exe
gnu: no Fortran 90 compiler found
gnu: no Fortran 90 compiler found
Found executable C:\cygwin\bin\g77.exe
customize IntelVisualFCompiler
Could not locate executable ifort
Could not locate executable ifl
customize AbsoftFCompiler
Could not locate executable f90
Found executable C:\cygwin\bin\f77.exe
absoft: no Fortran 90 compiler found
absoft: no Fortran 90 compiler found
customize CompaqVisualFCompiler
Found executable C:\cygwin\bin\DF.exe
Found executable C:\cygwin\bin\DF.exe
customize IntelItaniumVisualFCompiler
Could not locate executable efl
customize Gnu95FCompiler
Found executable C:\cygwin\bin\gfortran.exe
Found executable C:\cygwin\bin\gfortran.exe
customize G95FCompiler
Could not locate executable g95
customize IntelEM64VisualFCompiler
customize IntelEM64TFCompiler
Could not locate executable efort
Could not locate executable efc
don't know how to compile Fortran code on platform 'nt'
warning: build_ext: f77_compiler=None is not available.

building 'scikits.hydroclimpy.stats._lmoments' extension
error: extension 'scikits.hydroclimpy.stats._lmoments' has Fortran sources but no Fortran compiler found 
```

我的机器是带有 Cygwin 的 Windows XP 机器。安装工具已安装。我已经安装了 g95 以及我在 Cygwin 的安装列表中找到的任何其他东西，它们看起来与 Fortran 相关。/usr/local/bin 显示 g95 和 gfortran：

```
$ ls -l /usr/local/bin/
total 159
lrwxrwxrwx 1 James None     52 Nov 13 14:07 cc1 -> /usr/local/lib/gcc-lib/i686-pc-cygwin/4.1.2/f951.
exe
lrwxrwxrwx 1 James None     37 Nov 13 14:07 g95 -> /usr/local/bin/i686-pc-cygwin-g95.exe
lrwxrwxrwx 1 James None     36 Aug 23 11:54 gfortran -> /usr/local/gfortran/bin/gfortran.exe
-rwxr-xr-x 1 James None 158895 Nov 13 14:07 i686-pc-cygwin-g95.exe 
```

任何人都可以提出其他建议吗？我可以尝试以一种使该扩展的安装脚本按预期工作的方式对这台机器上的 Fortran 情况进行整理？

如果有帮助，此扩展的设置脚本在这里：

```
"""
:mod:`scikits.hydroclimpy`
--------------------------

A collection of tools to manipulate environmental and climatologic time series.

setuptools must be installed first. If you do not have setuptools installed
please download and install it from http://pypi.python.org/pypi/setuptools
"""

version = '0.67.1'

classifiers = ['Development Status :: 4 - Beta',
               'Intended Audience :: Science/Research',
               'Intended Audience :: Developers',
               'License :: OSI Approved :: BSD License',
               'Operating System :: Microsoft :: Windows',
               'Operating System :: POSIX',
               'Operating System :: Unix',
               'Operating System :: MacOS',
               'Programming Language :: C',
               'Programming Language :: Python',
               'Topic :: Education',
               'Topic :: Scientific/Engineering',
               'Topic :: Software Development',
              ]

distname = 'scikits.hydroclimpy'

long_description = """
The scikits.hydroclimpy module is a collection of tools for manipulating and 
plotting environmental time series of various frequencies. This package is 
an extension for scikits.timeseries, focusing on tools for the analysis of
hydroclimatologic datasets.
"""

import os
import sys
import setuptools
from numpy.distutils.core import setup, Extension

def configuration(parent_package='',top_path=None):
    from numpy.distutils.misc_util import Configuration
    config = Configuration(None, parent_package, top_path,
                           namespace_packages=['scikits'])

    config.set_options(ignore_setup_xxx_py=True,
                       assume_default_configuration=True,
                       delegate_options_to_subpackages=True,
                       quiet=True,
    )

    config.add_subpackage('scikits')
    config.add_subpackage('doc')
    config.add_subpackage('examples')
    config.add_subpackage(distname)
    config.add_data_files('scikits/__init__.py')

    return config

package_data = {'': 'hydroclimpyrc'}

def setup_package():

    setup(
          install_requires=['numpy > 1.2.5',
                            'scipy >= 0.7',
                            'scikits.timeseries >= 0.91'],
          namespace_packages=['scikits'],
          packages=setuptools.find_packages(),
          test_suite = 'nose.collector',
          name = distname,
          version = version,
          description = "Environmental time series manipulation",
          long_description = long_description,
          license = "BSD",
          author = "Pierre GF GERARD-MARCHANT",
          author_email = "pierregmcode_AT_gmail_DOT_com",
          maintainer = "Pierre GF GERARD-MARCHANT",
          maintainer_email = "pierregmcode_AT_gmail_DOT_com",
          url = "http://hydroclimpy.sourceforge.net",
          classifiers = classifiers,
          platforms = ["Windows", "Linux", "Solaris", "Mac OS-X", "Unix"],
          configuration = configuration,
    )

    return

if __name__ == '__main__':
    setup_package() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-25T12:26:18.103

您可能想尝试在[这个 python 错误](http://bugs.python.org/issue16296)中应用补丁，它允许我在遇到您描述的完全相同的错误后从源代码构建 numpy。

注意：我正在使用 VS2010 进行编译，您也应该将它用于所有 python 扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T06:50:57.400

来自不同观点的替代建议：避免 cygwin 之类的问题并尝试在 XP 机器上获得类似 *nix 的环境的一种方法是尝试使用 linux。有很多方法可以做到这一点，包括双启动、实时 linux，或者只是去做。

# javascript - D3 中的文本换行

> ID：13424341
> 
> 赞同：2
> 
> 时间：2012-11-16T21:00:39.093
> 
> 标签：javascript, css, d3.js

我一直在研究文本换行，但其中很多涉及使用 css 进行文本换行？

有什么方法可以使用 D3 来进行文本换行，如下所示：

```
 p.append("text")
   .attr("transform", "translate(-20, -30)")
   .text("Relevance")
   .style("font", "bold 12px Arial"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T07:17:07.210

我假设`p`这里还不是 xhtml 元素。如果它是像`g`您这样的一些 svg 元素，则可以附加`foreignObject`到它，然后在下面的代码中附加像 div 这样的 xhtml 元素。

```
p = svg.append('g');
p.append("foreignObject")
 .attr("x", 5)
 .attr("y", 5) 
 .attr("width", 100) // replace with width you want 
 .attr("height", 100)// replace with height you want
 .append("xhtml:div")// replace with html element you want
 .append("p")
 .text("Relevance"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-04T16:00:38.453

其他答案建议使用`svg:foreignObject`. 遗憾的是，没有任何版本的 IE 支持`foreignObject`，即使是最新版本（撰写本文时为 11）也不支持。跨其他浏览器的支持与一些不支持的转换不一致。因此，如果您不需要过渡并且不需要支持 IE，那么您可以使用`foreignObject`; 这是最简单的方法，因为它支持 HTML + CSS。

否则，如果您需要 IE 支持或转换...

Mbostock 有一个[包装长标签](http://bl.ocks.org/mbostock/7555321)的例子。它可以适用于在其他情况下换行文本，尽管它不是微不足道的。

[D3plus](https://github.com/alexandersimoes/d3plus)支持[文本换行](https://github.com/alexandersimoes/d3plus/wiki/Text%20Wrapping)，如下所示：

```
d3plus.textwrap()
  .container(d3.select("#rectWrap"))
  .draw(); 
```

我用过D3plus。它非常易于使用。但是 D3plus 具有您可能不想要的其他功能，因此您也可以考虑[d3textwrap](https://github.com/vijithassar/d3textwrap)，一个只添加文本换行的插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T21:34:17.403

您需要使用`svg:foreignObject`HTML`div`或类似的东西来完成这项工作。SVG 本身不会换行文本。

# xml - 根据名称列将格式应用于列表视图中的列

> ID：13424343
> 
> 赞同：1
> 
> 时间：2012-11-16T21:00:49.057
> 
> 标签：xml, visual-studio, listview, wpf-controls, listviewitem

我实际上是在 Visual Basic 上开发 WPF 桌面应用程序，我的问题是我一直在尝试将某些列的格式设置为 listView，但没有成功，所以我想知道是否有人可以帮助或引导我朝着正确的方向前进

我想为各个列设置文本对齐等格式，并且我试图根据列名通过 xml 界面执行此操作，也许我应该尝试通过 .vb 代码？

谢谢

# java - .jar 执行时“找不到主类”

> ID：13424345
> 
> 赞同：2
> 
> 时间：2012-11-16T21:01:05.047
> 
> 标签：java, user-interface, windows-7, jar

> **可能重复：**
> [在 Windows 中运行 Jar 文件](https://stackoverflow.com/questions/394616/running-jar-file-in-windows)

我使用 NetBeans 为一个小型 GUI Java 项目创建了一个 .jar 文件。它从命令行运行良好。我在 JRE 中有与 javaw.exe 关联的 .jar 文件。但是当我双击 .jar 文件时，我得到一个错误：

```
Could not find main class. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:27:50.033

双击表示找不到主类的事实意味着安装了JRE。那不是问题所在。这也意味着存在合适的捷径。这也不是问题......

问题是（我认为）JAR 文件没有被正确地创建为*可执行*的JAR 文件。可执行的 JAR 文件必须在其清单中有一个 Main-class 条目，该条目告诉`java.exe`或`javaw.exe`哪个类包含用于启动应用程序的“public static void main(String[])”方法。清单条目丢失，或者它引用了一个不存在的类。

由于这是您的程序，因此您需要仔细查看创建 JAR 文件的方式。您很可能需要*告诉*NetBeans 使用哪个类作为入口点/“主”类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T21:08:08.173

检查这个答案：[在 Windows 上运行 JAR 文件](https://stackoverflow.com/questions/394616/running-jar-file-in-windows)。

很可能，您需要以`javaw.exe" -jar "%1" %`快捷方式提供零件，这将解决问题。

# php - $_SESSION 帮助 如何在一页中使用它？（使用重定向？）

> ID：13424347
> 
> 赞同：1
> 
> 时间：2012-11-16T21:01:20.263
> 
> 标签：php, wordpress

我想知道以下是否可能？我的网站有一个秘密链接 (website.com/?secret=yes) 我想在他们输入后让网址看起来 (website.com) + 向他们展示特殊内容，因为它们来自秘密链接。

我想过这样的事情可能会奏效吗？1\. 用户导航到 (website.com/?secret=yes) 创建一个 $_SESSION 并使其为真 + 即时导航到 website.com 2\. 检查 $_SESSION = true if true 是否显示特殊内容？

我有以下代码：

```
<?php $secret = isset( $_GET[ 'secret' ] ) ? sanitize_text_field( $_GET[ 'secret' ] ) : false; ?>

<?php if( 'yes' === $secret ) : ?>
    <div>
        <p>My secret content</p>
    </div>
<?php endif; ?> 
```

如果可以使用这个 + $_SESSION 或者你有什么想法？我真的不知道 $_SESSION 是如何工作的，但我在 php.net 中读到了它，我认为这可能吗？

谢谢！

ps 我用wordpress。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T21:06:39.823

您可以在 index.php 页面中尝试此操作：

```
<?php
session_start();
if(isset($_GET['secret']) && $_GET['secret'] === 'yes') {
    $_SESSION['secret'] = true;
    header('Location: www.website.com');
}
if(isset($_SESSION['secret']) && $_SESSION['secret'] === true) {
    //Yay!  Display secret content
}
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T21:07:48.010

我已经重写了您的代码以完全无需重定向即可工作。机密部分可以与登录页面存在于同一页面中，也可以存在于不同页面中。我还修改了逻辑，这样如果他们返回到 URL 中没有“？secret=yes”的登录页面，它就不会“忘记”秘密状态。我还使用一些基本的 Javascript 更新了代码，这将允许您从 URL 中删除“？secret=yes”而无需重定向。

此代码将进入任何登录页面：

```
<?php
session_start();
if(isset($_GET['secret']) && 'yes' === $_GET[ 'secret' ])
{
    $_SESSION['secret'] = true;
}
?> 
```

如果您无法访问头部，则此代码将进入页面的头部部分或正文部分。

```
<?php
if(isset($_GET['secret']) && 'yes' === $_GET[ 'secret' ])
{
    echo '<script>history.pushState({},"","http://yourdomain.com/pageinurl/");</script>';
}
?> 
```

此代码将出现在任何带有密码的页面上：

```
<?php if(isset($_SESSION['secret']) && true === $_SESSION['secret']) { ?>
    <div>
        <p>My secret content</p>
    </div>
<?php } ?> 
```

# c - 使用零初始化数据使 ARM Fromelf 输出二进制

> ID：13424351
> 
> 赞同：0
> 
> 时间：2012-11-16T21:01:32.133
> 
> 标签：c, assembly, embedded, arm

我有一些零初始化的数据。

我在分散文件中为它们分配了一个执行区域。

```
Some_Execution_Region +0
{
    stuff.o (+RO, +RW, +RI)
} 
```

但是在使用 fromelf 将其从 axf 文件转换后，我在生成的二进制文件中看不到任何零初始化数据段。

二进制文件在零初始化数据应该开始的位置之前停止。

所以问题是如何让 fromelf 为二进制文件中的零初始化数据生成空白区域。

我在 ARM 网站上查找过，但没有运气。我只发现了一些**禁用**零初始化数据的选项。（这是否意味着因为我没有使用该选项，所以我应该在我的二进制文件中获取我的零初始化数据？）

我目前只是运行`fromelf.exe --bin --output=binary.bin elffile.axf`，它不会生成零数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:40:43.827

无需将所有零实际存储在二进制文件中。如果您使用的是 C，那么默认值是将未显式初始化为其他值的静态变量进行零初始化。C 运行时代码不会将零从可执行文件复制到 RAM，它只是获取需要归零的 RAM 部分的开始和结束地址。告诉链接器变量必须在启动时归零的典型方法是将它们放在`.bss`（空白静态存储）段中，但除非您正在编写汇编代码，否则您不需要显式执行此操作。

# storage - 连接到多个服务器的 DAS 驱动器上的文件的用户权限

> ID：13424356
> 
> 赞同：0
> 
> 时间：2012-11-16T21:02:11.850
> 
> 标签：storage

如果 DAS 驱动器安装在多台服务器上，我们是否仍然可以控制特定于服务器的用户帐户对 DAS 驱动器上的文件/文件夹的权限？

例如：在 Server1 和 Server2 上，DAS 驱动器已安装为 /data 现在 Server1 的 User1 写入 /data 一个名为 file1 的文件。

后来Server2上的User2查找file1的权限，当他执行“ls -al”时，他似乎会看到一些用户ID（一个数字）作为文件的所有者，有时它确实阻止他访问/写入文件。

我对如何在 DAS 中的文件应用/确保一致的权限感到困惑，尤其是当多个系统上的多个用户同时访问它时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T15:07:09.220

如果您有一个在多个服务器之间共享的 SAN 块级设备，那么您需要一个知道如何解决该问题并且不会导致问题的应用程序。

这可能是 VMWare 或 HyperV 等虚拟化软件、集群软件或知道如何处理它的文件系统。考虑到这一点，如果您在 SAN 驱动器上有正确的应用程序，您就可以控制权限。

您也可能在询问共享存储上已有文件系统的 NAS（网络附加存储）。在这种情况下，是的，您可以根据支持的 NAS 软件功能按用户控制特定权限。

# dotnetnuke - dotnetnuke 中的评论模块

> ID：13424361
> 
> 赞同：2
> 
> 时间：2012-11-16T21:02:16.047
> 
> 标签：dotnetnuke, dotnetnuke-module

Dotnetnuke 中是否有任何评论模块可以与日志模块一起使用？我的意思是，如果用户在页面上发表评论，他个人资料上的日志模块会显示该用户在该页面上发表过评论？或者，是否有一个项目具有指向该页面的链接？就像我们在 facebook 上的一样？我希望你能理解我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T13:13:50.493

没有这样的模块。你必须自己写

这是即将发布的公告模块中的一些示例代码：

```
 public static void AddAnnouncementToJournal(AnnouncementInfo announcement, int tabId)
    {
        JournalItem item2 = new JournalItem
        {
            PortalId = announcement.PortalID,
            ProfileId = announcement.LastModifiedByUserID,
            UserId = announcement.LastModifiedByUserID,
            ContentItemId = announcement.ContentItemID,
            Title = announcement.Title
        };
        ItemData data = new ItemData
        {
            Url = announcement.Permalink()
        };
        item2.ItemData = data;
        item2.Summary = HtmlUtils.Shorten(HtmlUtils.Clean(System.Web.HttpUtility.HtmlDecode(announcement.Description), false), 250, "...");
        item2.Body = null;
        item2.JournalTypeId = 33;
        item2.SecuritySet = "E,";
        JournalItem journalItem = item2;

        JournalController.Instance.SaveJournalItem(journalItem, tabId);

    } 
```

需要注意的重要一点：您需要定义自己的 JournalType（在上面的示例中，这还没有完全实现，并且使用硬编码值 33）。基本上，您需要的是 JournalTypes 表中的新记录，定义您自己的 journalType

# javascript - CSS 不适用于 Javascript 创建的元素

> ID：13424362
> 
> 赞同：2
> 
> 时间：2012-11-16T21:02:17.187
> 
> 标签：javascript, jquery, css

我使用 JQuery .html() 函数在我的页面上插入字段。这些字段具有类属性，但似乎在页面标题部分声明的 CSS 不适用于该元素。

我相信它只会影响类选择器，因为我有一个像魅力一样工作的#editZone 输入选择器。

这是一个代码示例：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />
<style type="text/css">
    #editZone input, #editZone textarea, #editZone select{
        border:0px;
    }

    #editZone .dependant {
        background-color:#CCC;
        border-bottom:1px solid #333;
    }
    #editZone .original {
        background-color:#FFF;
        border-bottom:1px solid #300;
    }
</style>

</head>
<body>

    <div id="headZone">
        Template:
        <select id="template">
        </select>
        <input type="button" id="generateTpl" value="Go" />
    </div>
    <div id="editZone" style="background-color:#ccc;">content will be filled here upon template selection</div>
    <div id="previewZone">final</div>
</body>
</html> 
```

这是一个内容示例（来自萤火虫）：

```
<div style="background-color:#ccc;" id="editZone"><br>
<br>
Name - <input type="" class="original" value="" name="first_name" id="first_name_1"> <input type="" class="original" value="" name="last_name" id="last_name_1"><br>
Title<br>
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:11:15.380

在样式声明中，我在类名和 { 之间有一个奇怪的空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T21:06:29.240

您应该关闭 html 标签，我认为它应该可以工作。关闭标签，如`"<tagname />"`或`"<tagname></tagname>"`。我的意思是输入，br 和所有打开的标签都没有关闭。

希望能帮助到你。

干杯

# python - python 类中的对象声明是什么意思，我应该使用它吗？

> ID：13424365
> 
> 赞同：11
> 
> 时间：2012-11-16T21:02:18.990
> 
> 标签：python, oop, inheritance

# 示例#1：

```
class Person(object):
    pass 
```

# 示例#2：

```
class Person:
    pass 
```

对象声明有什么作用？你应该使用它吗？我有一堆程序和他们两个，不知道它有什么不同。如果有人可以解释这个概念，请。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-16T21:04:17.200

在 Python2 中，声明`object`为基类使该类成为[新式类](http://www.python.org/doc/newstyle/)。否则，它是一个“经典”类。不同之处在于

*   属性仅适用于新式类

*   新式类有[`mro`方法](http://www.python.org/download/releases/2.3/mro/)

*   新式类有很多经典类所缺乏的属性

    ```
    In [288]: class Foo: pass
    In [289]: dir(Foo) 
    Out[289]: ['__doc__', '__module__']

    In [290]: class Bar(object): pass
    In [291]: dir(Bar) 
    Out[291]:  ['__class__',  '__delattr__',     '__dict__',  '__doc__',  '__format__',  '__getattribute__',     '__hash__',  '__init__',  '__module__',  '__new__',  '__reduce__',     '__reduce_ex__',  '__repr__',  '__setattr__',  '__sizeof__',     '__str__',  '__subclasshook__',  '__weakref__'] 
    ```

经典类保留在 Python2 中只是为了向后兼容。您定义的所有自定义类都应该是新样式的。

在 Python3 中，所有的类都是新式的，所以不需要在那里显式声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T21:04:23.497

在 Python 2 中，`object`它成为“新式类”。这意味着什么的细节并不太重要，但最重要的是您应该始终使用它，否则某些事情可能无法正常工作。

在 Python 3 中，一切都是新式的类，所以你不需要在`object`那里使用。

# c++ - 从 crt1.o 对 main 的未定义引用

> ID：13424370
> 
> 赞同：0
> 
> 时间：2012-11-16T21:02:45.060
> 
> 标签：c++, linker

错误信息：

```
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../lib64/crt1.o: In function `_start':
(.text+0x20): undefined reference to `main'
collect2: ld returned 1 exit status

struct node
{
  int key_value;
  node *left;
  node *right;
};

class btree
{
    public:
        btree();
        ~btree();

        void insert(int key);
        node *search(int key);
        void destroy_tree();

    private:
        void destroy_tree(node *leaf);
        void insert(int key, node *leaf);
        node *search(int key, node *leaf);

        node *root;
};

btree::btree()
{
  root=NULL;
}

void btree::destroy_tree(node *leaf)
{
  if(leaf!=NULL)
  {
    destroy_tree(leaf->left);
    destroy_tree(leaf->right);
    delete leaf;
  }
}

void btree::insert(int key, node *leaf)
{
  if(key< leaf->key_value)
  {
    if(leaf->left!=NULL)
     insert(key, leaf->left);
    else
    {
      leaf->left=new node;
      leaf->left->key_value=key;
      leaf->left->left=NULL;    //Sets the left child of the child node to null
      leaf->left->right=NULL;   //Sets the right child of the child node to null
    }
  }
  else if(key>=leaf->key_value)
  {
    if(leaf->right!=NULL)
      insert(key, leaf->right);
    else
       {
      leaf->right=new node;
      leaf->right->key_value=key;
      leaf->right->left=NULL;  //Sets the left child of the child node to null
      leaf->right->right=NULL; //Sets the right child of the child node to null
    }
  }
}

node *btree::search(int key, node *leaf)
{
  if(leaf!=NULL)
  {
    if(key==leaf->key_value)
      return leaf;
    if(key<leaf->key_value)
      return search(key, leaf->left);
    else
      return search(key, leaf->right);
  }
  else return NULL;
}

void btree::insert(int key)
{
  if(root!=NULL)
    insert(key, root);
  else
  {
    root=new node;
    root->key_value=key;
    root->left=NULL;
    root->right=NULL;
  }
}

node *btree::search(int key)
{
  return search(key, root);
}

void btree::destroy_tree()
{
  destroy_tree(root);
} 
```

谁能告诉我此错误消息来自哪里，以便我尝试修复它？我试图通过使用节点运行程序来更好地理解节点，并抛出此错误消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T21:09:09.630

正如错误消息所说，您缺少主要功能。每个程序都需要一个 main 函数，这是程序开始的地方（或多或少）。你期待这个程序做什么？

# neo4j - Spring Data Neo4j中的@Query shortestPath返回类型

> ID：13424372
> 
> 赞同：3
> 
> 时间：2012-11-16T21:03:05.020
> 
> 标签：neo4j, shortest-path, cypher, spring-data-neo4j, spring-data-graph

以下查询的返回类型是什么以及如何使用它？我尝试了几种方法，例如`Path`,`Iterable<Path>`和其他，但我总是遇到某种异常。它似乎是一个`LinkedHashMap`，但我可以使用其他更方便的对象类型吗？

```
@Query( "START u1=node:User(key= {0}), u2=node:User(key = {1}) " +
        "MATCH p = shortestPath(u1-[*]-u2) " +
        "RETURN p")
public ??? findShortestPath(String u1, String u2); 
```

我是否缺少任何依赖项？这是我唯一使用的一个：

```
<dependency>
    <groupId>org.springframework.data</groupId>
    <artifactId>spring-data-neo4j-rest</artifactId>
    <version>2.1.0.RELEASE</version>
</dependency> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:42:26.587

返回类型是`EndResult<EntityPath<S, E>`，其中 S 是路径的开始节点，E 是结束类型。

# python - 为什么动态语言在类（如目标 c 或 python）中没有私有成员定义功能？

> ID：13424373
> 
> 赞同：-3
> 
> 时间：2012-11-16T21:03:10.137
> 
> 标签：python, objective-c, dynamic-languages

为什么动态语言缺乏在类中定义私有成员的能力？此功能是否存在任何实施问题？是否可以为动态语言实现此功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T21:13:07.807

这种事情有无数的答案，“为什么语言 X 没有特征 Y？” 答案很简单，因为参与创建/发展语言的人没有把它放在那里。计算机语言就像`<insert anything here that has variations across members in the set>`，不是所有的都是一样的。（我们大多数人都对此表示感谢。;）

哦，移动目标问题...

我不是 Objective-C 方面的专家，但是快速谷歌搜索“动态语言中的私有成员函数”发现了一些似乎暗示 Objective-C 确实对类有私有成员支持的命中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T21:17:23.313

这可以为动态语言实现。事实上，在 Smalltalk 中，所有成员始终是私有的。

这不常见的原因是同时拥有公共和私人成员是没有意义的。作为设计问题，外部代码不应访问其他类的内部。这可以通过不这样做来实现——意外地做到这一点并不容易。

Python 通过将所有内容都公开并允许程序员在必要时这样做来解决这个问题，这创造了最大的灵活性。Smalltalk 通过将所有内容设为私有来解决这个问题，如果需要从其他代码访问，则强制程序员创建访问器。

就实现而言，访问检查的成本相对较高（至少对于某些属性访问，会有额外的操作，规则越微妙，检查就越复杂），所以全私有和全公有的模型比较多比任何具有中等访问级别的东西都更具吸引力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T21:13:11.157

您可以在 Objective-C 中使用类扩展来使其他类看不到某些内容。前任。

```
//at the top of MyClass.m
@interface MyClass ()
@property (strong, nonatomic) id myPrivateProperty;
@end 
```

除此之外，没有什么可说的，因为这是一个太宽泛的问题（仍然）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T21:17:52.800

或者，除了@Mettable 的答案：

```
@interface MyObject : NSObject {
    @private
    id _myIvar;
    id _myOtherIvar;
}

.
.
.

@end 
```

我不了解 Python，但我认为[这个 SO 答案](https://stackoverflow.com/a/2064212/620197)可能会有所帮助。

# mysql - 仅显示具有不同 pointTypes 的帐号

> ID：13424377
> 
> 赞同：0
> 
> 时间：2012-11-16T21:03:28.523
> 
> 标签：mysql, sql, database, sql-server-2008

我将尽我所能解释我被要求做的事情。

假设我们拥有对 DataBase **A 的**开发人员访问权限，其中包含许多表，但我们最关心的是两个表。第一个称为**Accounts**，第二个称为**Campaign**。现在，在 Campaign 表中，我们有很多字段，但最重要的是*CampaignTypeID*和*AccountID*。

在**Accounts**表中，最重要的字段是*AccountID*和*CustomerNumber*。在**Accounts**表中，我们有许多参与不同活动的客户；因此我们可以说一个客户可以在他们的帐户下拥有许多不同的 CampaignTypeID。

现在这是我被要求做的事情：**为每个 CampaignTypeID 显示一个 CustomerNumber**（总共 5 种类型）。（我认为重复的 CustomerNumbers 是可以接受的）（例如）

```
CampaignTypeID  CustomerNumber
1                   34535
2                   23525
3                   23423
4                   52355
5                   23525 
```

这是我使用的查询：

```
SELECT top 5 CustomerNumber[Customer Number],  CampaignTypeID , 
 FROM A.Account a
  JOIN A.Campaign c  ON a.AccountID = c.AccountID
  WHERE CampaignTypeID IN (5)
  GROUP BY CustomerNumber, CampaignTypeID 
```

此查询的结果将类似于：（例如）

```
CampaignTypeID  CustomerNumber
    5                34535
    5                23525
    5                23423
    5                52355
    5                23525 
```

不完全是我想要的，起初我将所有的 CampaignTypeID 插入到 WHERE 子句中，但这只会返回重复的 CampaignTypeID。（前任。）

```
CampaignTypeID  CustomerNumber
        3            34535
        3            23525
        4            23423
        5            52355
        5            56678
        3            23525 
```

如您所见，此时我唯一的选择是逐个输入每个 CampaignTypeID。然后我会将其中的每一个复制到电子表格中。我在上面向您展示的只是一个示例，但实际上我需要做的是 40 个不同的 CampaignTypeID。这是一项非常乏味的工作，我知道可以提高很多效率。

如果可能的话，我想知道一种更有效的方法来完成这项任务。

谢谢！

更新：好的，我应该添加一个小东西。CampaignTypeID 不是连续的，它们更像是 5,6,7,8,9,10,50,65,110,250,1104,1114。这会让事情变得复杂吗？

**架构**

```
CREATE TABLE Accounts 
    (
     AccountID int auto_increment primary key, 
     CustomerID int(20)NOT NULL
    );

INSERT INTO Accounts
(CustomerID)
VALUES
(24),(22),(35),(256),(1246),(11),(224),(55),(664),(773),(234),(568),(245),(986),(768);

CREATE TABLE Campaign 
    (
     CampaignID int auto_increment primary key, 
     CampaignTypeID int(20) NOT NULL,
     CONSTRAINT fk_AccountID FOREIGN KEY(AccountID)
     REFERENCES Accounts(AccountID) 
    );

INSERT INTO Campaign
(CampaignTypeID)
VALUES
(6),(7),(8),(9),(10),(245),(1140),(1150),(1160),(1170),(1180),(1190),(1240),(1250),(1260); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:52:30.090

```
Select
  CampaignTypeID,
  Min(CustomerNumber)
From
  A.Account a
    Inner Join
  A.Campaign c
    On a.AccountID = c.AccountID
Where
  CampaignTypeID Between 1 And 5
Group By
  CampaignTypeID 
```

# iis - 如何让浏览器信任自签名证书进行测试？网站地址与完全限定域名略有不同

> ID：13424379
> 
> 赞同：3
> 
> 时间：2012-11-16T21:03:38.150
> 
> 标签：iis, ssl, certificate, ssl-certificate, self-signed

我有一个使用 SSL 配置的网站，我现在使用自签名证书进行测试。该机器运行 Windows 2008 R2 和 IIs 7.5 和 Apache Tomcat 5.5。

问题是 FireFox 给出了连接不受信任的错误，因为它是一个自签名证书，并且它还说该站点使用了无效的安全证书。我尝试将证书导入 Firefox，以纠正这种情况，但没有帮助。但是，对于 IE，从 IIS 导出证书并将其导入浏览器的受信任的根证书颁发机构存储允许 IE 信任自签名证书。

需要注意的是，服务器的完全限定域名是 webdev.dev.mysite.com，而网站地址是 webdev.mysite.com，我在 HTTP 下的站点没有任何问题。[在此](http://blogs.iis.net/thomad/archive/2010/04/16/setting-up-ssl-made-easy.aspx)站点的帮助下，我设置了自签名证书，使其名称为 webdev.mysite.com。

如何让 Firefox 信任自签名证书？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T10:23:47.580

我相信这个页面应该可以帮助你：

在 FireFox 中，转到工具 -> 选项 单击高级选项卡，然后单击查看证书按钮 转到服务器选项卡并按添加例外按钮

注意：这可能取决于您的 Firefox 版本

来源：www.poweradmin.com/help/sslhints/FireFox.aspx

# eclipse - 将 Team Foundation Server 与 Eclipse 一起使用

> ID：13424384
> 
> 赞同：0
> 
> 时间：2012-11-16T21:04:00.393
> 
> 标签：eclipse, version-control, tfs

我的小组正在使用 Team Foundation Server 2010 和 Eclipse。有没有办法整合它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:15:12.677

您可以使用 Microsoft Visual Studio Team Explorer Everywhere 2010

[http://www.microsoft.com/en-us/download/details.aspx?id=4240](http://www.microsoft.com/en-us/download/details.aspx?id=4240)

# oracle - RAC 环境的 Oracle 连接字符串？

> ID：13424385
> 
> 赞同：1
> 
> 时间：2012-11-16T21:04:01.440
> 
> 标签：oracle, oracle11g, database-administration

我有一个 ORACLE RAC 环境访问权限。详细信息是

数据库名称：orcl 服务名称：orcl IP 地址：192.168.1.1 和 192.168.1.2

```
SQL> host srvctl status database -d orcl

Instance orcl1 is running on node orclnode1

Instance orcl2 is running on node orclnode2 
```

我担心的是我的连接，正在使用

```
(DESCRIPTION=(ADDRESS=
    (PROTOCOL=TCP)(HOST=192.168.1.1) (PORT=1521)
)(CONNECT_DATA=(SID=orcl1))) 
```

但提供者希望它通过 orcl 服务名称进行连接。

我没有与此相关的任何其他信息。我是否正确连接，或者我需要 orcl 服务名称的主机名或 IP 地址。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T23:19:23.403

您的连接字符串引用了一台服务器/节点上的一个实例。您应该改用通用服务名称，并识别它可用的所有服务器。

你的等价物是这样的（为了清楚起见，换行符）：

```
(DESCRIPTION=(ADDRESS_LIST=
    (ADDRESS=(PROTOCOL=TCP)(HOST=192.168.1.1)(PORT=1521))
    (ADDRESS=(PROTOCOL=TCP)(HOST=192.168.1.2)(PORT=1521))
)(CONNECT_DATA=(SERVICE_NAME=orcl))) 
```

只要它是可解析的，使用 DNS 名称或 IP 地址作为`HOST`参数都无关紧要。

您可能还需要`LOAD_BALANCE`or`FAILOVER`参数；请参阅[文档](http://docs.oracle.com/cd/E14072_01/rac.112/e10718/hafeats.htm#BABEFHAA)。

# php - 从 openID 获取数据

> ID：13424388
> 
> 赞同：1
> 
> 时间：2012-11-16T21:04:17.123
> 
> 标签：php, lightopenid

我正在尝试使用 LightOpenID 获取数据。照原样，下面的代码正在工作，但如果我取消注释这些行以获取更多信息，它会超时并且不会显示任何错误。我究竟做错了什么？

```
require_once('inc/func/_functions.php');
require ('inc/libs/openid.php');
initSession();
try {
$openid = new LightOpenID('tutordelphia.com');
if(!$openid->mode) {
    $openid->identity = 'https://www.google.com/accounts/o8/id';
    $openid->required = array (
       'contact/email',
//     'namePerson/first',
//     'namePerson/last'
    );
    header('Location: ' . $openid->authUrl());
} elseif($openid->mode == 'cancel') {
 echo 'User has canceled authentication!';
 } else {
$valid=$openid->validate();
if($valid)
{       
    $data=$openid->getAttributes();
    $_SESSION['user']=new userClass();
    $_SESSION['user']->userID=$_GET['openid_identity'];
    $_SESSION['user']->userEmail=$data['contact/email'];

//  $_SESSION['user']->firstName=$data['namePerson/first'];
//  $_SESSION['user']->lastName=$data['namePerson/last'];
//  $_SESSION['user']->userName=$data['namePerson/first'].$data['namePerson/last'];
    $_SESSION['user']->addUserToDB();
    $_SESSION['user']->createUserCookie();
    header('Location: index.php');
    }
}
   } catch(ErrorException $e) {
   echo $e->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:15:51.760

open id 是一个简单的http接口。我建议你为它构建自己的代码。

同样，谷歌在 open id 上也略有不同，并且不遵循标准。我建议您针对其他遵循该标准的提供商（如 OpenID）尝试使用此代码。该库可能无法正确处理谷歌。我很难弄清楚谷歌对我自己的图书馆的期望。

从那里你至少可以确定图书馆是否真的有效；）

# jruby - 使用 JRubyApplet 实例的未定义 图形方法

> ID：13424394
> 
> 赞同：1
> 
> 时间：2012-11-16T21:04:40.373
> 
> 标签：jruby

使用 JRubyApplet 实例时出现以下错误：

```
*Exception in thread "AWT-EventQueue-1"
org.jruby.exceptions.RaiseException: (NoMethodError) undefined method
'drawString' for  Java::SunJava2D::SunGraphics2D* 
```

使用以下 script.rb ：

```
include Java
JRUBY_APPLET.on_paint do |g|
  g.drawString("hello",0,0)
end 
```

我没有成功放置 AWT/Graphics 中的任何元素

我想我的代码是错误的，但我不知道在哪里。

# android - 在没有 Flash Builder 的情况下构建 Android 原生扩展

> ID：13424398
> 
> 赞同：0
> 
> 时间：2012-11-16T21:05:00.617
> 
> 标签：android, flash, native

好的，快速提问。. .

是否可以在不使用 Flash Builder 的情况下构建（编译）Android Native Extension (ANE)。

我试图在 Eclipse 中构建一个扩展，但在我看到的任何地方，它都说在整个过程中的某个地方使用 Flash builder。我没有 Flash Builder，只有 Flash CS6 和 Eclipse。有没有办法只使用 flash 和 eclipse 来打包和获取 ANE 文件？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:59:17.370

以下是有关如何将 .SWF 打包到 ANE 中的一些文档：http: [//help.adobe.com/en_US/air/extensions/WSf268776665d7970d-2482335412ffea65006-8000.html](http://help.adobe.com/en_US/air/extensions/WSf268776665d7970d-2482335412ffea65006-8000.html)

至于将您的 .AS 代码转换为 .SWF 和 .SWC，mxlmc（用于 .AS->.SWF）和 compc（生成 .SWC）都将在 flash builder 之外运行（并与 adt 一起在免费下载 flex sdk： http: [//www.adobe.com/devnet/flex/flex-sdk-download.html](http://www.adobe.com/devnet/flex/flex-sdk-download.html)）

（.as、.jpg、.swc 等）==mxmlc==> (.swf)

（.as、.jpg 等）==compc==> (.swc)

(.swc, .swf) ==adt==> (ANE)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T13:05:35.320

它不是答案，但我要说的内容不适合评论框。. .

好的，现在我真的很迷茫和困惑。

继承人 iv 做了什么，我在 eclipse 中创建了一个 android 项目。在这个项目中，我包含了 flashruntimeextensions.jar 文件并在 eclipse 项目中创建了所有必要的文件（我知道）（一个 TorchExtension.java 文件，它返回一个新的 Context.java 文件，我在其中使用 map.put(" torchy", new TorchFunction()); 然后显然是一个 torchFunction.java 文件，其中包含“打开手电筒”的代码。

我是否认为我需要将其导出为 SWC 或 ANE 文件，然后我可以通过 java 构建路径将其导入闪存？

还是我必须创建某种形式的动作脚本库来在 Flash 和本机代码之间进行对话？我经历了无数现有的 ANE，但我没有得到任何工作，我觉得我错过了一些重要的东西。

# iphone - NSString 怎么去掉正则\转义字符？

> ID：13424402
> 
> 赞同：2
> 
> 时间：2012-11-16T21:05:19.320
> 
> 标签：iphone, ios, ipad, nsstring, escaping

我需要一段有效的代码来去除转义字符。这是常规转义而不是 HTML 转义字符。

例子： ”\””， ”\\\\”， ”\”， ”\\”

我想要一个通用算法来去除任何类型的转义序列。

可以使用任何实用程序，如正则表达式。

```
 (NSString*) unescape:(NSString*) string {

      ....
  } 
```

这是我写的答案：

```
-(NSString*) unescape:(NSString*) string
{

    for(int i = 0; i < string.length; i++) {
        char a = [string characterAtIndex:i];
        if([string characterAtIndex:i] == '\\' ) {
            string = [string stringByReplacingCharactersInRange:NSMakeRange(i,1) withString:@""];
        }

    }
    return string;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T21:20:28.373

尝试使用以下代码进行 HTML 转义

```
(NSString*) unescape:(NSString*) string 
{
    return [string stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
} 
```

对于常规逃生

```
(NSString*) unescape:(NSString*) string 
{    
    return [string stringByReplacingOccurrencesOfString:@"\\\"" withString:@"\""];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T01:02:46.517

您应该使用的最佳方法是：

```
- (NSString *)stringByTrimmingCharactersInSet:(NSCharacterSet *)set 
```

您可以使用以下方式调用它：

```
string = [string stringByTrimmingCharactersInSet:[NSCharacterSet newlineCharacterSet]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:46:55.623

我为我的回答道歉...

```
NSString *_string = @"\\\\ dfsdg \\ tr\\\\t \\\\\\tw\\\\\\\\w\\ t\\ \\\\ \\ \\\\\\  rret\\    \\\\ \\\\\\\\";
NSLog(@"%@", [_string stringByReplacingOccurrencesOfString:@"\\" withString:@""]); 
```

* * *

结果是：

```
 dfsdg  trt tww t     rret 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T21:14:35.523

如果其 URL 编码，您可能正在寻找：

```
stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T00:57:07.047

如果你想使用正则表达式，你可以尝试使用正则表达式模式`\\[bntr\\\\"]`。或在此处使用任何所需的正则表达式模式。

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:
                              @"\\[bntr\\\\"]" options:0 error:nil];

[regex replaceMatchesInString:str options:0 range:NSMakeRange(0, [str length]) withTemplate:@""]; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-16T21:53:34.637

希望这可以帮助：

```
-(NSString *)unescape:(NSString *)string 
{
    if ([string rangeOfString:@"\\"].location != NSNotFound)
    {
        [string stringByReplacingCharactersInRange:@"\\" withString:@"\\"];
    }
    else if ([string rangeOfString:@"\\\\"].location != NSNotFound)
    {
        [string stringByReplacingCharactersInRange:@"\\\\" withString:@"\\"];
    }
    else if ([string rangeOfString:@"\\\\"].location != NSNotFound)
    {
        [string stringByReplacingCharactersInRange:@"\\\\" withString:@"\\"];
    }
} 
```

# xml - 通过将巨大的 xml 文件转换为 rdf 来填充 Ontology

> ID：13424404
> 
> 赞同：0
> 
> 时间：2012-11-16T21:05:36.130
> 
> 标签：xml, xslt, wiki, rdf, ontology

我尝试使用从奇迹数据库 wikia 中提取的数据填充本体（您可以提取包含 wiki 的所有信息的 xml）。我的问题是这个 xml 太重了，不能用它做任何事情（超过 500Mo）。我尝试使用 xslt 将其转换为非常简单的 rdf 文件，但由于 xml 文件的大小，这几乎是不可能的。

xml 文档由以下页面组成：

```
<page>
<title>Aeroika (Earth-616)</title>
<ns>0</ns>
<id>1035</id>
  <sha1>11t0be5viqp0vsj8zwglfu3wea8fou4</sha1>
<revision>
  <id>1786343</id>
  <timestamp>2011-10-04T17:49:37Z</timestamp>
  <contributor>
    <username>HamsterMan</username>
    <id>2082346</id>
  </contributor>
  <minor/>
  <text xml:space="preserve" bytes="1652">{{Marvel Database:Character Template
| Image                   = Aeroika (Earth-616).jpg
| RealName                = Aeroika
| CurrentAlias            = Aeroika
| Aliases                 = 
| Identity                = 
| Affiliation             = [[Defenders (Earth-616)|Defenders]]
| Relatives               = 
| Universe                = Earth-616
| BaseOfOperations        = [[Tunnelworld]]

| Gender                  = Male
| Height                  = 
| Weight                  = 
| Eyes                    = 
| Hair                    = Gold
| UnusualSkinColour       = Gold
| UnusualFeatures         = Wings growing out of his head.
}}
[[Category:Flight]]</text>
</revision>
</page> 
```

例如，在这种情况下，我做了一个 xslt，它在 rdf 中提取重要数据。

```
<xsl:template match="/">
<rdf:RDF
xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
xmlns:si="http://www.w3schools.com/rdf/">

<xsl:for-each select="page">
    <xsl:choose>
        <xsl:when test="contains(revision/text, 'Character Template')">
            <rdf:Description rdf:about="{title}">
                <Image><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'Image'),'|'),'=')" /></Image>
                <RealName><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'RealName'),'|'),'=')" /></RealName>
                <CurrentAlias><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'CurrentAlias'),'|'),'=')" /></CurrentAlias>
                <Aliases><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'Aliases'),'|'),'=')" /></Aliases>
                <Identity><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'Identity'),'|'),'=')" /></Identity>
                <Affiliation><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'Affiliation'),'|'),'=')" /></Affiliation>
                <Relatives><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'Relatives'),'|'),'=')" /></Relatives>
                <Universe><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'Universe'),'|'),'=')" /></Universe>
                <BaseOfOperations><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'BaseOfOperations'),'|'),'=')" /></BaseOfOperations>
                <Gender><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'Gender'),'|'),'=')" /></Gender>
                <Height><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'Height'),'|'),'=')" /></Height>
                <Weight><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'Weight'),'|'),'=')" /></Weight>
                <Eyes><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'Eyes'),'|'),'=')" /></Eyes>
                <Hair><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'Hair'),'|'),'=')" /></Hair>
                <UnusualSkinColour><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'UnusualSkinColour'),'|'),'=')" /></UnusualSkinColour>
                <UnusualFeatures><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'UnusualFeatures'),'|'),'=')" /></UnusualFeatures>
                <Citizenship><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'Citizenship'),'|'),'=')" /></Citizenship>
                <MaritalStatus><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'MaritalStatus'),'|'),'=')" /></MaritalStatus>
                <Occupation><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'Occupation'),'|'),'=')" /></Occupation>
                <Education><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'Education'),'|'),'=')" /></Education>
                <Origin><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'Origin'),'|'),'=')" /></Origin>
                <PlaceOfBirth><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'PlaceOfBirth'),'|'),'=')" /></PlaceOfBirth>
                <Creators><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'Creators'),'|'),'=')" /></Creators>
                <First><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'First'),'|'),'=')" /></First>
                <HistoryText><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'HistoryText'),'|'),'=')" /></HistoryText>
                <Powers><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'Powers'),'|'),'=')" /></Powers>
                <Abilities><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'Abilities'),'|'),'=')" /></Abilities>
                <Strength><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'Strength'),'|'),'=')" /></Strength>
                <Weaknesses><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'Weaknesses'),'|'),'=')" /></Weaknesses>
                <Equipement><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'Equipement'),'|'),'=')" /></Equipement>
                <Transportation><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'Transportation'),'|'),'=')" /></Transportation>      
                <Weapons><xsl:value-of select="substring-after(substring-before(substring-after(revision/text, 'Weapons'),'|'),'=')" /></Weapons>
            </rdf:Description>
        </xsl:when>
        <xsl:otherwise>
        </xsl:otherwise>
    </xsl:choose>
</xsl:for-each>
</rdf:RDF>
</xsl:template>

</xsl:stylesheet> 
```

你知道我该怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:53:50.977

您的 XSLT 样式表将“普通”XML 转换为 RDF/XML 语法——它们将同样大甚至更大，并且几乎同样难以处理。此外，RDF/XML 手工编写复杂，容易出错。调试 XSLT 将是一场噩梦。

如果您的目标是使您的数据集更紧凑且更易于处理，我建议您将 XML 转换为 RDF [Turtle](https://www.w3.org/TR/turtle/)或 RDF [N-Triples](https://www.w3.org/TR/n-triples/)语法。这些是非常简单、紧凑的基于文本的格式，非常适合流式处理，任何支持 RDF 的软件都可以读取和写入这些格式。

您可以使用 XSLT，或者如果这给您带来可伸缩性问题，请使用任何具有一些基本 XML 支持的编程/脚本语言 - 获取一个流式 XML 解析器并挂接到一个简单的脚本/程序中，该脚本/程序处理解析器输出并动态创建 RDF 数据。或者，鉴于您的输入 XML 是相当有规律的结构，您甚至可以完全跳过使用 XML 解析器，而只是将几个正则表达式组合在一起来读取数据——无论您最熟悉哪种技术。

当然，您也可以尝试使用一些内置支持此类功能的最终用户工具。例如，Topbraid Composer 为这种开箱即用的转换提供了一些花哨的功能。

# jquery - 使用jQuery根据父位置在子li上设置Margin

> ID：13424406
> 
> 赞同：0
> 
> 时间：2012-11-16T21:05:56.377
> 
> 标签：jquery, css

我正在做一个项目，我们正在抓取网站并提取内容，因此我无法控制 div 或 lis 的结构。

我遇到的问题是菜单上的下拉菜单没有与父菜单项左对齐。我正在寻找一些有助于解决此问题的 css/jquery，这[是小提琴的链接：http://jsfiddle.net/9gQCH/3/](http://jsfiddle.net/9gQCH/3/)

**CSS & HTML**

```
 #item1, #item2 {        
       background-color:#efefef;           
       display:inline;
       font-size:14px;
       margin-right:3px; 
       padding:5px; 
    }

    .Submenu {
        display: none;
        padding: 4px; 
        margin-top:18px;
        background-repeat:no-repeat;
    }  

    .Menu li:hover .Submenu{
        background-color:orange;
        display:inline;
        color: black;
        padding: 3px 5px;
        position:absolute;
    }

    <div class="Menu">
    <li id="item2">
        High level Item 1
        <div class="Submenu">
            <div>
                   Nested Item 1         
            </div> 
            <div>
                   Nested Item 2       
            </div>         
        </div>
    </li>  

    <li id="item2">
        High level Item 2
        <div class="Submenu">
            <div>
                   Nested Item 3         
            </div> 
            <div>
                   Nested Item 4       
            </div>         
        </div>
    </li> 
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:32:47.577

[http://jsfiddle.net/9gQCH/7/](http://jsfiddle.net/9gQCH/7/)

使用 jQuery

```
$(".Submenu").each(function(){
    $(this).css("left",$(this).parent().offset().left);
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T21:08:34.163

为此，您不需要 jQuery。只需将其添加到您的 CSS 中：

```
.Menu li { position: relative; } 
```

更新（添加`left: 0;`到您的`.Submenu`班级）：

```
.Menu li:hover .Submenu{
    background-color:orange;
    display:inline;
    color: black;
    padding: 3px 5px;
    position:absolute;

    left:0; // <------
} 
```

`top`（如果你觉得有必要，你也可以添加一个属性）

小提琴：http: [//jsfiddle.net/kboucher/gbhtC/](http://jsfiddle.net/kboucher/gbhtC/)

# machine-learning - 如何使用 Microsoft 贝叶斯网络编辑器评估给定概率？

> ID：13424407
> 
> 赞同：0
> 
> 时间：2012-11-16T21:06:09.380
> 
> 标签：machine-learning, bayesian-networks

我正在研究贝叶斯网络，微软有一个工具：[http ://research.microsoft.com/en-us/um/redmond/groups/adapt/msbnx/default.aspx](http://research.microsoft.com/en-us/um/redmond/groups/adapt/msbnx/default.aspx)

当我说评估程序时，它评估 P(X)。但是我想找到某事的给定概率。像 P(X|Y) 即

我如何使用 Microsoft 贝叶斯网络编辑器来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T18:37:21.510

在评估窗口右键单击变量并将其分配**是或否**，以便其他概率刷新给定它。

# ios - TestFlight 问题弹出窗口未出现

> ID：13424415
> 
> 赞同：3
> 
> 时间：2012-11-16T21:06:38.170
> 
> 标签：ios, testflight

TestFlight SDK 文档说，要向应用程序添加模式问题屏幕，您只需通过 Web 界面添加问题并将其与应用程序中已有的检查点相关联。几天前我这样做了，但还没有看到问题弹出。以前有没有其他人使用过 TestFlight 问题界面？我错过了一步吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T08:20:34.010

我遇到了同样的问题，但他们的支持团队告诉我，我的问题是他们平台中关于版本号的错误。如果您多次上传具有相同版本号的构建，他们会在版本附近加上“#”，这就是问题所在，sdk 在带有“#”版本的构建中无法正确显示问题。要解决此问题，您应该上传具有新版本号的版本或在上传新版本之前删除旧版本。

# binary-tree - 二叉树中所有节点的深度之和（路径长度）

> ID：13424416
> 
> 赞同：0
> 
> 时间：2012-11-16T21:06:37.637
> 
> 标签：binary-tree, depth

我正在尝试实现一个函数来计算二叉树的路径长度，但我无法得到正确的答案。你能检查我做错了什么吗？下面是我的代码：

```
public int pathLength() {
    int sum = 0;
    int c = 1;
    pathLength(root, sum);
    return sum;
}

public int pathLength(Node n, int sum) {
    if(n.isRoot())
        sum+= 0;
    if(n.left == null && n.right == null)
        return;
    c++;
    if(n.left != null)
        sum += c;
    if (n.right != null)
        sum+=c;
    pathLength(n.left, sum);
    pathLength(n.right, sum); 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T06:02:37.833

这段代码有很多问题。它甚至不会编译，因为 a）在第二个函数中 c 从未声明（它在第一个函数中是本地的）和 b）第二个函数从不返回值。

但最大的问题是你声明第二个函数的方式。“sum”按值传递。这基本上意味着每次调用函数时都会创建一个新的“sum”副本，并在函数结束时被丢弃。

你想要做的是通过引用传递。这样做时，实际的 sum 变量，而不是副本，被传递给函数。因此，您的代码可能如下所示：

```
public void pathLength(Node n, int& sum) {
    //if(n.isRoot())     <- not sure what this is for
    //    sum+= 0;

    sum += 1;   // Increment for this node

    //if(n.left == null && n.right == null)
    //    return;      // This conditional is not needed with next 2 if statements

    //c++;    <- Don't know what c is for

    // Recursively call for child nodes
    if(n.left != null)
        pathLength(n.left, sum);
    if (n.right != null)
        pathLength(n.right, sum); 
} 
```

请注意，这会计算树中的所有节点。我想这就是你想要的。如果你想找到最深的节点，那就不同了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-02T11:29:34.737

是不是因为你把c的初始值设置为1而不是0？root 的子节点应该在第 2 层，深度为 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-16T13:19:11.227

这是一个简单的方法时间：O（n）而空间将是O（h），其中h是二叉树的高度：

```
int sum(BinaryTree *node, int count){
    if(node == nullptr){
        return 0;
    }

    return count + sum(node->left, count+1)+sum(node->right, count+1);
}

int nodeDepths(BinaryTree *root) {
    int count=0;
    int ans=0;
    ans =sum(root, count);
  return ans;

    } 
```

# php - 在PHP中，是否可以将函数放入变量中并让字符串首先打印到变量中？

> ID：13424419
> 
> 赞同：0
> 
> 时间：2012-11-16T21:06:47.833
> 
> 标签：php, function, loops

我有一个问题：（我已经在谷歌上搜索过，但找不到任何答案）。变量中的字符串是否可以先运行？例如 ：

```
 <?php

function example($times) { 
for($i = 4; $i < $times; $i++)   echo $i; 
}
$var = example(10);
echo  "3$var";

?> 
```

这段代码打印：

> 4567893

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T21:10:34.887

收集结果作为函数内部的变量并返回它。

```
<?php

function example($times) { 
  $result='';
  for($i=4;$i<$times;$i++) $result.=$i; 
  return $result;
}
$var=example(10);
echo "$var"."3"; 
```

其他方式，**只有在你无法控制函数的输出或者它有很多 html 标记**的情况下才 使用输出缓冲区捕获：

```
<?php

function example($times) { 
  for($i=4;$i<$times;$i++) echo $i;
}

ob_start();
example(10);
$var=ob_get_clean;
echo "$var".3; 
```

[有关php.net](http://www.php.net/manual/en/ref.outcontrol.php)的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T21:09:26.460

尝试：

```
function example($times) { 
 $str='';
 for($i = 4; $i < $times; $i++)   
  $str .=$i; 
 return $str;
}

$var = example(10);   
echo  $var."3"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T21:17:25.760

`echo`您需要了解和之间的区别`return`。

您的函数`example`将直接*回显*输出。的值为，`$var`不`NULL`显示任何内容。

所以你在做的其实和这个是一样的：

```
echo 4; // in example()
echo 5; // in example()
echo 6; // in example()
echo 7; // in example()
echo 8; // in example()
echo 9; // in example()
echo "3"; // $var == ''; 
```

如果要*收集*输出，`example`可以这样写：

```
function example($times) {
    $numberstring = '';
    for($i = 4; $i < $times; $i++) {
        $numberstring .= $i; 
    }
    return $numberstring;
} 
```

# ios - 从字符串中提取图像的 URL

> ID：13424420
> 
> 赞同：1
> 
> 时间：2012-11-16T21:06:53.150
> 
> 标签：ios, url, nsstring, range

我正在尝试从一串文本中提取图像的 URL。它可能来自不同的网站，并且可以是任何形式的图像（jpg、png、gif 等）。什么是扫描字符串、找到任何匹配的图片扩展名并从中获取图形的好方法？

字符串可能是这样的：

```
Hello, I hope you like my picture located at http://www.website.com/picture1.png.  However, if you don't, I know you'll like this one http://www.website2.org/picture2.jpg.Please refer all comments to http://www.website5.com/ 
```

我希望能够仅扫描字符串以查找图像文件的 URL，并为第一个图像 URL 生成一个新字符串。所以在这个字符串中，我可以创建一个只有[http://www.website.com/picture1.png的新字符串](http://www.website.com/picture1.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T21:16:09.727

我来自 The Link [Objective-C - Find a URL within a string](https://stackoverflow.com/questions/5998969/objective-c-finding-a-url-within-a-string)

无需为此使用`RegexKitLite`，因为 iOS 4 Apple 提供`NSDataDetector`（的子类`NSRegularExpression`）。

您可以像这样简单地使用它（源是您的字符串）：

```
NSDataDetector* detector = [NSDataDetector dataDetectorWithTypes:NSTextCheckingTypeLink error:nil];
NSArray* matches = [detector matchesInString:source options:0 range:NSMakeRange(0, [source length])]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-17T12:17:43.273

```
Use below code after later finish with @Anup Kumar

   for (NSTextCheckingResult *match in matches) {
        NSRange matchRange = [match range];
        if ([match resultType] == NSTextCheckingTypeLink) {
            NSURL *url = [match URL];
        } else if ([match resultType] == NSTextCheckingTypePhoneNumber) {
            NSString *phoneNumber = [match phoneNumber];
        }
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T21:20:00.143

好吧，要获得扩展名，你可以使用 NSString 方法 pathExtension，这将产生一个只有扩展名的字符串，所以你会知道它是 jpg、gif、png 等。

```
NSString* path = @"http://location.com/pictures/image.jpg";
NSString* extension = [path pathExtension]; 
```

对于您的图形，您可以使用 UIImage imageWithData 方法，并将 NSData dataWithContentsOfUrl 方法的输出传递给它，一起使用这些方法将允许您创建一个 UIImage，然后您可以在 UIImageView 中显示它。

```
UIImage* image = [UIImage imageWithData:[NSData dataWithContentsOfURL:path]]; 
```

希望这会有所帮助。

# zsh - zsh 可以像 vim 的搜索那样做 smartcase 完成吗？

> ID：13424429
> 
> 赞同：9
> 
> 时间：2012-11-16T21:08:03.007
> 
> 标签：zsh, zsh-completion

Vim 有一个“smartcase”特性，它使搜索不区分大小写，但前提是搜索包含所有小写字母。当您搜索任何大写字母时，smartcase 会假定您需要区分大小写的搜索。有没有办法在 zsh 的选项卡完成中获得相同的行为？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T02:32:41.483

看看我的 zshrc 文件。

[https://github.com/martincanaval/arch-conf/tree/master/etc/zsh](https://github.com/martincanaval/arch-conf/tree/master/etc/zsh)

我有你要求的功能，我相信这条线做到了。

```
zstyle ':completion:*'  matcher-list 'm:{a-z}={A-Z}' 
```

# php - Mod_rewrite 规则不传递 PHP 变量

> ID：13424434
> 
> 赞同：0
> 
> 时间：2012-11-16T21:08:10.443
> 
> 标签：php, mod-rewrite

我正在尝试按照用户的要求重写 URL（使用 mod_rewrite）：

```
http://example.com/question/1/ 
```

要从服务器加载此 URL：

```
http://www.example.com/question.php?qid=1 
```

我目前正在使用重写规则：

```
RewriteEngine On
RewriteRule ^question/([^/\.]+)/?$ question.php?qid=$1 [L] 
```

但这不起作用。我在 .htaccess 中尝试了其他东西（例如重定向）并且这项工作，所以我知道 .htaccess 正在处理中。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T21:10:07.583

根据您的示例，您的重写规则应类似于：

```
RewriteRule ^question/(\d+)/?$ /question.php?qid=$1 [L] 
```

# audio - 将音频与网站的滚动文本同步

> ID：13424435
> 
> 赞同：1
> 
> 时间：2012-11-16T21:08:11.293
> 
> 标签：audio, text, web, sync

我有大约 5 段文本将在窗口中垂直滚动，我需要能够与它同步音频。它不一定需要在阅读时突出显示单词，而只需要准确的开始和结束时间。我尝试使用 ActionScript 在 Flash 中制作一些东西，但我对它不是很好，并且无法获得令人满意的结果。

我已经疯狂地在 Google 和 youtube 上搜索教程或帮助，但似乎真的找不到任何东西。如果有人可以帮助或指出我正确的方向，将不胜感激。

# powershell - 执行按位解码 syslog 优先级代码

> ID：13424436
> 
> 赞同：1
> 
> 时间：2012-11-16T21:08:13.550
> 
> 标签：powershell, bit-manipulation, syslog

我正在尝试如何在 powershell 中解码系统日志优先级代码。我知道优先级代码是消息的设施和严重性的组合，并且设施在添加到严重性代码之前被乘以 8，但我不确定如何在 Powershell 中对此进行编码。

所以 的优先级`37/8 = 4.625`，它给你一个**4=Facility**

和 的优先级`37-(4*8)=5`，这给你一个**5=Severity**

4 Facility 是安全/授权消息

5 严重性是一个通知：正常

[所有这些都在 RFC 3164 ( http://www.ietf.org/rfc/rfc3164.txt](http://www.ietf.org/rfc/rfc3164.txt) )中进行了概述，但我不确定如何在 Powershell 代码中进行解码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T21:21:20.500

试试这个（不按位）：

```
function get-syslog {
param($pri)

[int]$facility = [Math]::truncate([decimal]($pri/8))
$severity = $pri - ($facility *8 )

"Facility is $facility - Severity is $severity"
} 
```

采用：

```
get-syslog -pri 23
Facility is 2 - Severity is 7 
```

# wordpress - 如何下载我的 Appfog 应用程序的实时文件系统？

> ID：13424444
> 
> 赞同：6
> 
> 时间：2012-11-16T21:08:59.927
> 
> 标签：wordpress, appfog

您好我是 Appfog 初学者，我想问一下我是否通过 wordpress 管理员上传图片/插件/主题。因为 appfog 目前不支持持久化文件系统，所以所有不在源代码中的插件/图片/主题都将丢失。无论如何要备份当前的实时系统并将这些文件包含在我上传的源代码中？下载源代码按钮或“af pull”命令只会下载我上传的最后一个源代码，不会更改例如我安装插件时所做的更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T09:42:33.833

您可以像这样向您的应用程序添加辅助 php 脚本：

[https://gist.github.com/4134750](https://gist.github.com/4134750)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T05:13:11.940

您可以使用手动下载单个文件，`af files <appname> /app/<filename>`但这对于您的目的来说会很痛苦。

将您的 Wordpress 安装设置为使用 Mamp 或 Xampp 在本地运行会更好。从 AppFog 中提取您的应用程序，使用 Mamp 在本地托管它，更改您的文件系统，然后将这些更改推送到 AppFog。

以下是为什么在本地进行更改然后更新 AppFog 应用程序更好的几个原因：

*   如果您运行多个 wordpress 应用程序实例，则只有其中一个会获得已安装的插件。在本地安装插件并推送可确保所有实例都获得插件。
*   在本地开发和测试速度要快得多，您可以在影响实时站点之前查看更改的结果。
*   如果您的插件安装失败或以某种方式进行了意外更改，您的实时生产站点将不会关闭。**对于Wordpress 更新**也是如此，在本地进行然后推送到生产环境。
*   如果您在本地机器上有更改，您可以在更新生产之前使用版本控制来跟踪和标记版本。
*   蓝绿部署变得微不足道。有两个生产应用程序，一个主应用程序和一个从属应用程序。在本地更新您的代码，然后更新从属并对其进行测试，然后通过将域映射到它来将其提升为主要。然后通过取消映射域将以前的主节点降级为从节点。从站总是一个更新，如果您发现主站有问题，您可以切换回两个。

以这种方式管理您的 Wordpress 应用程序将使您能够利用 AppFog 平台提供的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-07T18:59:20.050

我发现这个脚本“zipit”甚至比 Sea Comet 提供的“ls”脚本更好。这将压缩整个实时应用程序目录，然后您下载它。这样，您可以通过 wordpress 管理员进行更改，使其以您想要的方式运行，然后使用 zipit，解压缩文件并将其推送到 appfog 上的应用程序，并且在重新启动时完全保存状态。

[https://github.com/zeroecco/zipit/blob/master/zipit.php](https://github.com/zeroecco/zipit/blob/master/zipit.php)

您可以在旧的 PhpFog 博客上的这篇博文中找到更多信息：http: [//blog.phpfog.com/2012/11/16/how-to-download-your-entire-application-not-just-code-从-php-雾/](http://blog.phpfog.com/2012/11/16/how-to-download-your-entire-application-not-just-code-from-php-fog/)

# lua - Lua：lua_resume 和 lua_yield 参数用途

> ID：13424445
> 
> 赞同：6
> 
> 时间：2012-11-16T21:09:07.617
> 
> 标签：lua, arguments, coroutine

将参数传递给 lua_resume 和 lua_yield 的目的是什么？

我知道在第一次调用 lua_resume 时，参数被传递给正在恢复的 lua 函数。这是有道理的。但是，我希望所有对 lua_resume 的后续调用都会“更新”协程函数中的参数。然而事实并非如此。

将参数传递给 lua_resume 以使 lua_yield 返回的目的是什么？协程下运行的lua函数能否访问lua_resume传递的参数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T21:28:00.693

尼科尔所说的。如果需要，您仍然可以保留第一次`resume`调用的值：

```
do
  local firstcall
  function willyield(a)
    firstcall = a
    while a do
      print(a, firstcall)
      a = coroutine.yield()
    end
  end
end

local coro = coroutine.create(willyield)
coroutine.resume(coro, 1)
coroutine.resume(coro, 10)
coroutine.resume(coro, 100)
coroutine.resume(coro) 
```

将打印

```
1 1
10 1
100 1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T21:19:20.613

Lua 不能神奇地赋予原始参数新的值。它们甚至可能不再在堆栈上，具体取决于优化。此外，没有迹象表明代码产生时的位置，因此它可能无法再看到这些参数。例如，如果协程调用了一个函数，则该新函数无法看到传递给旧函数的参数。

`coroutine.yield()`返回传递给`resume`继续协程的调用的参数，以便yield调用的站点可以根据需要处理参数。它允许执行恢复的代码与执行屈服的特定代码进行通信。`yield()`将其参数作为返回值传递给`resume`，`resume`并将其参数作为返回值传递给`yield`。这建立了沟通的途径。

你不能以任何其他方式做到这一点。当然不是通过修改网站上可能看不到的参数`yield`。它简单、优雅且有意义。

此外，戳别人的价值观被认为是非常粗鲁的。尤其是已经在运行的功能。请记住：参数只是填充了值的局部变量。用户不应该期望这些变量的内容会改变，除非它自己改变它们。`local`毕竟，它们是变量。它们只能在本地更改；由此得名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-06T12:16:30.213

一个简单的例子：

```
co = coroutine.create (function (a, b)
       print("First  args: ", a, b)
       coroutine.yield(a+10, b+10)
       print("Second args: ", a, b)
       coroutine.yield(a+10, b+10)
     end)
print(coroutine.resume(co, 1, 2))
print(coroutine.resume(co, 3, 4)) 
```

印刷：

```
First  args:    1       2
true    11      12
Second args:    1       2
true    11      12 
```

显示 args 的原始值`a`并`b`没有改变。

# ruby-on-rails-3 - 在 Rails 中结合 API 数据和本地数据

> ID：13424449
> 
> 赞同：3
> 
> 时间：2012-11-16T21:09:19.243
> 
> 标签：ruby-on-rails-3, api, controller, record

我正在我的 Rails 3 应用程序中使用 GoCardless API。我有一个订阅模型，它有一个与远程记录的 id 匹配的 resource_id 列。

我正在尝试从 API 获取本地订阅记录的额外信息。

**订阅索引视图**

```
<% @subscriptions.each do |subscription| %>
  <tr>
    <td><%= subscription.resource_id %></td>
    <td><%= subscription.resource_type %></td>
    <td><%= subscription.signature %></td>
    <td><%= subscription.state %></td>
    <td><%= @gocardless.next_interval_start %></td>
    <td><%= link_to 'Show', subscription %></td>
    <td><%= link_to 'Edit', edit_subscription_path(subscription) %></td>
    <td><%= link_to 'Destroy', subscription, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %> 
```

**订阅控制器**

```
def index
 @subscriptions = Subscription.all
 @gocardless = GoCardless::Merchant.find("XXXXXXXXXX").subscriptions

 respond_to do |format|
   format.html # index.html.erb
   format.json { render json: @subscriptions }
 end
end 
```

如您所见，我正在使用以下行来检索下一个间隔开始日期

```
<%= @gocardless.next_interval_start %> 
```

这不起作用并返回零。但是，如果我将其更改为以下所有记录，则会显示来自 API 的第一条记录的值。

```
<%= @gocardless.first.next_interval_start %> 
```

根据 GoCardless API[文档](https://sandbox.gocardless.com/docs/ruby/merchant_client_guide#retrieving-data-from-the-api)，您可以使用以下内容查找订阅：

```
GoCardless::Subscription.find("XXXXXXXXXX")  # =>  #<GoCardless::Subscription ...> 
```

所以，我的问题。如何将当前订阅 resource_id 传递给 API，以便查看每个本地订阅记录的 next_internal_start 值？

**更新**

使用下面亚当的示例，我得到了来自 GoCardless 的 404 响应。我认为这是由于我没有在请求中设置商家 ID。当我将方法更改为：

```
def gc_subscription
  @gc_subscription ||= GoCardless::Merchant.find("MERCHANTID").subscriptions.find(self.resource_id)
end 
```

`undefined method`对于我尝试使用以下代码请求的任何属性，我都会得到#` 的间隔'：

```
<% for subscription in @subscriptions %>
 <%= subscription.gc_subscription.amount
<% end %> 
```

当使用相同的代码获取本地内容时，它按预期工作：

```
<% for subscription in @subscriptions %>
 <%= subscription.resource_id %>
<% end %> 
```

我检查了我试图检索的值在 API 中是否可用。[https://sandbox.gocardless.com/docs/api_guide#resources-available](https://sandbox.gocardless.com/docs/api_guide#resources-available)

**更新二**

和之前使用 Adam 的方法调用第一个结果一样：

```
<%= subscription.gc_subscription.first.amount %> 
```

这将返回 2.5，这是第一个订阅的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T10:41:04.777

如果我有一个链接到远程数据源的本地订阅模型，我将在我的订阅模型上使用这样的方法，它提供对远程对象的访问：

```
def gc_subscription
  @gc_subscription ||= GoCardless::Subscription.find(self.resource_id)
end 
```

然后您可以根据需要访问此方法，而无需视图或控制器中的任何 GC 逻辑。例如：

```
for subscription in @subscriptions
   subscription.gc_subscription.some_method #=> "output"
end 
```

或者，如果您只使用一个订阅：

```
subscription = Subscription.find(id)
subscription                 #=> Your local Subscription instance
subscription.gc_subscription #=> GoCardless::Subscription instance 
```

像这样配置它，您将能够从控制器中删除 @gocardless 并将您的视图替换为：

```
<% @subscriptions.each do |subscription| %>
  <tr>
    <td><%= subscription.resource_id %></td>
    <td><%= subscription.resource_type %></td>
    <td><%= subscription.signature %></td>
    <td><%= subscription.state %></td>
    <td><%= subscription.gc_subscription.next_interval_start %></td>
    <td><%= link_to 'Show', subscription %></td>
    <td><%= link_to 'Edit', edit_subscription_path(subscription) %></td>
    <td><%= link_to 'Destroy', subscription, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %> 
```

我希望这会有所帮助。

# gwt - 地图中包含数据的 GWT Celltable

> ID：13424452
> 
> 赞同：0
> 
> 时间：2012-11-16T21:09:36.293
> 
> 标签：gwt

我有我的数据`Map<Key,ArrayList<Value>>`所以我希望我的 col1 代表我的键和其他列来代表我的值中的数据。这个值可以是或多行。所以我正在考虑将一个单元格表放在一个单元格表中，但它会影响我的标题（因为外部单元格表的列数仅为 2）以及排序。

而且，如果我将地图直接传递给`ListDataProvider`它，则假定行数是地图的行数，但事实并非如此。

那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:21:09.463

我建议使用这样的类 RowObject ：

```
class RowObject {
    private final Key key;
    private final Value value;

    RowObject(Key key, Value value) {
        this.key = key;
        this.value = value;
    }

    /* Getters omitted */
} 
```

然后将地图转换为 RowObjects 列表并将列表提供给数据提供者：

```
List<RowObject> rowObjects = new ArrayList<RowObject>();

for (Entry<Key, ArrayList<Value>> entry : map.entrySet()) {
    for (Value value : entry.getValue()) {
        rowObjects.add(new RowObject(entry.getKey(), value));
    }
}

ListDataProvider<RowObject> dataProvider = new ListDataProvider<RowObject>();
dataProvider.addDataDisplay(cellTable);
dataProvider.setList(rowObjects); 
```

添加这样的列：

```
Column column = new Column<RowObject, String>(new TextCell()) {

    @Override
    public String getValue(RowObject object) {
        return getStringValueFor(object);
    }
};

cellTable.addColumn(column); 
```

# android - 我的微调器以及如何获取所选项目的位置

> ID：13424456
> 
> 赞同：0
> 
> 时间：2012-11-16T21:09:43.450
> 
> 标签：android

我有一个由数组列表填充的微调器，在微调器上的每个“梯级”的每个索引处都有多个哈希图。所以当项目被选中时，我想获得被选中的单个键并用它做一些事情我在我的图片中这样做但是有一个问题我该如何解决它

[图片http://www.qzal.net/01/2012-10/13530999521.png](http://www.qzal.net/01/2012-10/13530999521.png)

这是代码的可用副本：

```
spinner2.setOnItemSelectedListener(new CustomOnItemSelectedListener() {
    @Override
    public void onItemSelected(AdapterView<?> adapterView, View view, int position, long id) {
        ArrayList<HashMap<String, String>> arrList = new ArrayList<HashMap<String,String>>();
        // for each key in the hashMap at this position..
        for (String key : arrList.get(position).get("SectionID"))
        {
        }
    }                                      

    @Override
    public void onNothingSelected(AdapterView<?> adapter) {}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:16:22.210

您必须一次完成一个级别。首先从您的 ArrayList 中获取每个 HashMap，然后询问您的特定密钥：

```
for (HashMap<String, String> map : arrList) {
    String value = map.get("SectionID");
    // Do something
} 
```

但是，如果您只是初始化`arrList`，则其中不会有任何内容...

# linux - nedit 命令别名导致功能损坏

> ID：13424463
> 
> 赞同：0
> 
> 时间：2012-11-16T21:10:31.117
> 
> 标签：linux, bash, alias

我正在使用 nedit 在我的工作站中编辑源代码。然而，它从以下错误开始：

```
Cannot convert string "-*-helvetica-medium-r-normal-*-*-120-*-*-*-iso8859-1" to type FontStruct
Cannot convert string "-*-helvetica-bold-r-normal-*-*-120-*-*-*-iso8859-1" to type FontStruct
Cannot convert string "-*-helvetica-medium-o-normal-*-*-120-*-*-*-iso8859-1" to type FontStruct
Cannot convert string "-*-courier-medium-r-normal-*-*-120-*-*-*-iso8859-1" to type FontStruct
Cannot convert string "-*-courier-bold-r-normal-*-*-120-*-*-*-iso8859-1" to type FontStruct
Cannot convert string "-*-courier-medium-o-normal-*-*-120-*-*-*-iso8859-1" to type FontStruct 
```

不知道如何修复这些错误，我使用别名开始编辑：ne='nedit &>/dev/null &'

就是抑制警告信息吐到stdout和stderr，让nedit在后台运行，这样我就可以在当前终端窗口输入下一条命令了。

然而，如果我使用这个别名直接打开一个文件，它会给我一个错误消息，例如：

```
[qxu@merlin:/home/qxu/work/src]# ne abc.c
[4] 24969304
-bash: ./abc.c: The file access permissions do not allow the specified action. 
```

然而，`nedit abc.c`工作，虽然有上述字体错误消息。

有没有办法让我使用上面的别名并给它一个文件名来直接打开？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T21:51:43.740

使用函数而不是别名。当我们必须处理参数时，它更易于使用。将以下函数放入您的`.bashrc`文件中：

```
function ne() {
    command nedit "$@" &>/dev/null &
} 
```

在这个例子中，当你运行时`ne file.txt`，你调用这个函数来执行`nedit`带有你传递的所有参数的命令（`"$@"`）。

看看这个[关于](https://unix.stackexchange.com/a/30950/24320)何时应该使用别名或函数的解释。这很棒

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T02:54:29.643

你的别名的问题是你`&`放错了地方。扩展别名时，您会得到

```
nedit &>/dev/null & abc.c 
```

`&`是一个[命令分隔符](http://www.gnu.org/software/bash/manual/bashref.html#Lists)，所以这相当于

```
nedit &>/dev/null &     # launch nedit in the background without a file to edit
abc.c                   # execute abc.c 
```

显然“abc.c”没有执行权限。

正如维克多所说，使用一个函数。

# xaml - 用户控件上的 WPF DataTrigger 不起作用

> ID：13424465
> 
> 赞同：1
> 
> 时间：2012-11-16T21:10:42.843
> 
> 标签：xaml, triggers, blend, datatrigger

我的项目是使用 Visual Studio 2012 的带有 4.5 框架的 WPF（Windows Presentation Foundation）。

我的窗口中有一个 UserControl，我想在将输入输入文本框后自动设置动画（移动）。

这是用户控件...

```
<nbcuc:Search x:Name="search" Grid.Row="1" HorizontalAlignment="Center" VerticalAlignment="Center" RenderTransformOrigin="0.5,0.5">
        <nbcuc:Search.RenderTransform>
            <TransformGroup>
                <ScaleTransform/>
                <SkewTransform/>
                <RotateTransform/>
                <TranslateTransform/>
            </TransformGroup>
        </nbcuc:Search.RenderTransform>
        <nbcuc:Search.Style>
            <Style>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding SearchAnimationState, UpdateSourceTrigger=PropertyChanged}" Value="New">
                        <Setter Property="nbcuc:Search.HorizontalAlignment" Value="Left"/>
                        <DataTrigger.EnterActions>
                            <BeginStoryboard Storyboard="{StaticResource StoryboardSearch}" />
                        </DataTrigger.EnterActions>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </nbcuc:Search.Style>
    </nbcuc:Search> 
```

我知道 Storyboard 动画有效，因为我让它在 Window.Load 事件触发器上工作。我希望将属性设置为某个值，然后触发触发器。我知道它工作的属性，因为我将值设置为窗口中的文本框。

我对 wpf 和 xaml 比较陌生，所以这对我来说真的没有什么意义，为什么它不起作用。

谢谢

# c# - 如何检查服务器是否在代码中运行？

> ID：13424466
> 
> 赞同：0
> 
> 时间：2012-11-16T21:10:47.253
> 
> 标签：c#, sql-server, entity-framework

我了解如何使用 来检查本地计算机上的 SQL 服务器上是否存在数据库`DbContext.Database.Exists()`，但是如何检查服务器是否已启动并正在运行？

我在“可能已经有你的答案的问题”下看到一个主题，建议检查`ServiceController`类[如何验证 Windows 服务是否正在运行](https://stackoverflow.com/questions/178147/how-can-i-verify-if-a-windows-service-is-running) 但是，当我在我的类中键入它时，Visual Studio Intellisense 没有检测到 System.ServiceProcess 命名空间。

此外，如果 ServiceController 类是这个问题的最佳答案，我如何向 ServiceController 类识别需要分配给该对象的服务是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:50:39.667

> 当我将它输入到我的类中时，Intellisense 没有检测到 System.ServiceProcess 命名空间

将 System.ServiceProcess.dll 的引用添加到您的项目中。

我会参考 MSDN 文档来了解如何使用[ServiceController](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicecontroller%28v=vs.100%29.aspx)类。它相当容易使用。

# debugging - 如何在 XCode 4.x 中设置默认断点范围？

> ID：13424467
> 
> 赞同：2
> 
> 时间：2012-11-16T21:10:49.137
> 
> 标签：debugging, xcode4, breakpoints

XCode 4 中的断点可以按项目、工作区或用户（通常在所有打开的项目之间共享）限定范围。我经常在多个项目之间进行调试，所以“用户”范围的断点基本上就是我所需要的。有没有办法在 XCode 4 中设置 bp 的默认范围？除了手动将每一个更改为用户之外的任何其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T02:59:01.820

只是为了回答我自己的问题，在 Xcode 4.x 中，默认情况下似乎没有办法做到这一点。管理多个 xcodeproj 之间的断点的最佳工作流程是：

*   创建工作区
*   将所有相关的 xcodeproj 添加到工作区

断点将限定在这些项目的工作区中，因此它们将在从此工作区启动或附加到的任何执行上下文中共享。

值得注意的是，工作区不需要有任何重要的组织意义——我经常有一个临时工作区，我添加和删除项目只是为了在我处理或调试这些项目时对符号索引和断点进行分组。

# objective-c - 计算 UIImageView 离屏幕右侧多远

> ID：13424470
> 
> 赞同：0
> 
> 时间：2012-11-16T21:11:18.997
> 
> 标签：objective-c, ios

我有一个可以移动的 UIImageView，我想做的是计算 UIImageView 从屏幕右侧拖出多少像素。左边很容易，因为您只需要将原点转换为正数。我需要和左边一样的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T21:19:17.660

如果您正在寻找视图的原点（左上角）与屏幕右侧的距离（假设没有多级偏移的子视图和父视图）：

```
float distRight = [[UIScreen mainScreen] size].width - view.origin.x; 
```

如果您想要视图右侧与屏幕右侧的距离，只需减去视图的宽度即可：

```
float distRight = [[UIScreen mainScreen] size].width - view.origin.x - view.frame.size.width; 
```

（不过来吧，这是*很基础*的几何图形，就算你想象不到，也应该能画出来，然后编码……）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T21:50:11.383

此代码未经测试，但应提供调用方法，您会发现右偏移或左偏移。

```
-(float)isOffScreenToLeft{
float distFromLeftEdge = [[UIScreen mainScreen] size].width - imgview.origin.x;

if(distFromLeftEdge < 0){
NSLog("Offscreen to left %f pixels.", fabs(distFromLeftEdge));
return fabs(distFromLeftEdge));
}

-(float)isOffScreenToRight{
float rightEdgePosition = ([[UIScreen mainScreen] size].width - imgview.origin.x) + imgview.frame.size.width;
float distFromRightEdge = [[UIScreen mainScreen] size].width - rightEdgePosition

//If ipad in portrait
if(distFromRightEdge < 0){
NSLog("Offscreen to right %f pixels.", fabs(distFromRightEdge));
return fabs(distFromLeftEdge);
} 
```

# iphone - 调用 wcf 服务时 iphone / ipad 应用程序的安全性

> ID：13424474
> 
> 赞同：0
> 
> 时间：2012-11-16T21:12:22.080
> 
> 标签：iphone, objective-c, wcf, wcf-data-services

我是客观 c 编程和 wcf 实现的新手，所以我的问题可能听起来像个白痴，也可能不像个白痴。想知道从目标 c 调用 Web 服务的最佳实践是什么。

我的登录计划是创建一个 wcf 服务来检查用户名和密码是否存在。如果它返回 TRUE，那么您创建一个“Cookie”，将会话存储在您的应用程序上？我还计划返回用户的 ID，以便每当用户从 iphone 应用程序请求某些数据更改时，它就可以知道它是哪个用户。**但**我对返回用户 ID 持怀疑态度。安全吗？或者我应该生成一种类型的 GUID 或令牌以从 WCF 返回到我的 iphone，存储它，然后每当他们请求交易时，WCF 就可以验证用户？

有人可以请我指出正确的方向，从目标 c 安全性的角度出发。

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:28:28.693

我认为你在正确的轨道上:-)

*   如果您的服务器支持会话 id 机制，那么作为登录的响应，向客户端发送一个唯一的会话 id，以便在后续请求中服务器可以将其与本地的进行比较。您可以同时使用 GET 或 POST，但我认为 POST 是更好的方式。
*   去HTTPS。
*   如果您想在应用程序端缓存凭据，请查找钥匙串。

# jquery - 使用jquery将一个html页面加载到另一个页面中

> ID：13424477
> 
> 赞同：1
> 
> 时间：2012-11-16T21:12:32.073
> 
> 标签：jquery, html

我想在另一个 html 页面（“index.html”）中加载一个 html 文件（“hello_world.html”），这两个文件位于同一位置。这是我写的代码。但它没有加载任何东西。两个警报都在工作（我故意给它检查 jquery 是否工作。没有其他用途）代码中的错误是什么？我不想使用ajax。

```
</head>
 <script type="text/javascript" src="../jquery-1.3.2.js"></script>
    <script type="text/javascript">
        $("document").ready(function() {
        alert("ya loaded");
        $('#container').load('hello_world.html');
    alert("finished");  
  });
</script>
</head>

<body>
<div id="container">
</div>

</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T21:22:07.010

好吧，我在一个目录中有以下文件：

helloworld.html

```
<p>hello!</p> 
```

测试.html

```
<html>
<head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script type="text/javascript">
        $("document").ready(function() {
            $('#container').load('helloworld.html');
        });
    </script>
</head>
<body>
    <div id="container"></div>
</body>
</html> 
```

在浏览器中加载 test.html 会产生“hello！”，因此请检查您的 jQuery 是否正确加载。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T21:29:19.467

使用您的 firebug 或 chrome 开发控制台检查可能的错误。

编辑：

使用 ajax 时，有时浏览器不会使用`file:///`协议加载它。您应该在本地使用 Web 服务器（例如 Windows 上的 xampp 或只是 apache），并以`http://`协议访问您的网站。

这很可能是您的问题的原因。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-12-12T14:05:11.180

解决方案非常简单：

您编写的就绪函数（行）不正确，因此您必须编写不带引号的文档工作，它将如下所示：

```
$(document).ready(function()({

}); 
```

# ruby - 如何使用 Ruby gem Mechanize 获取某些属性（例如 colspan）的 HTML 标记中的内容？

> ID：13424478
> 
> 赞同：0
> 
> 时间：2012-11-16T21:12:36.703
> 
> 标签：ruby, mechanize

这是 HTML 的示例：

```
<td colspan="3">TARGET</td>
<td>NOT TARGET</td> 
```

如何使用 Ruby 的 Mechanize gem 仅针对`<td>`with `colspan="3"`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:41:26.210

Mechanize 依靠 HTML/XML 解析器[Nokogiri](http://nokogiri.org/)来处理其繁重的工作。

通常我们将`agent`其用作 Mechanize 的变量。对 local 进行测试`gem server`，这将获得一个已解析文档的实例，并允许我提取节点及其参数：

```
page = agent.get('http://0.0.0.0:8808/')
page.at('a') 
```

如果我想要该节点的文本内容：

```
page.at('a').text
# => "abstract" 
```

在您的情况下，用于`page.at('td[colspan="3"]').text`获取内容。

# php - 在 PHP 中使用函数与包含作为“子例程”

> ID：13424479
> 
> 赞同：2
> 
> 时间：2012-11-16T21:12:38.327
> 
> 标签：php, function, subroutine

推荐的方法是什么？

**使用包括：**

// subroutine.php

`echo 'hello '.$a;`

// 用法.php

```
$a = 'foo';
include 'subroutine.php'; 
```

**使用功能：**

// subroutine.php

```
function subroutine ($a)
{
    echo 'hello '.$a
} 
```

// 用法.php

```
include 'subroutine.php';
$a = 'foo';
subroutine($a); 
```

由于两者在技术上都有效，并且 PHP 中没有“子例程”，这与 ASP 不同。模拟子程序的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T21:18:13.990

一个函数更适合这个目的。包含更广泛地用于模板或控制器调用视图时。

但是，您的函数不应回显连接的字符串。它应该返回它。

```
$a = "foo";
echo subroutine($a);

function subroutine($a) { return "hello " . $a; } 
```

这使您的代码可测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T21:17:17.953

这将取决于上下文，不是吗？如果您正在执行类似于 MVC 的操作，那么第一个示例将是首选，您将视图包含到代码中。但是第二个示例感觉更清晰，因为您可以看到程序流程中的函数调用。

在这个具体的例子中，我会说选项 2 是首选，因为它更清楚发生了什么。

然而，PHP 并没有像 ASP 那样拥有子例程。ASP 具有返回数据的函数和不返回数据的子例程。PHP只有函数，可以兼得。最好的办法是保存您需要的所有输出（通过函数调用和类）并在您需要的任何地方“手动”打印它。所以在 PHP 中做事的首选方式是。

```
<?php
    function subroutine($var) {
        return 'Hello '.$var;
    }

    $a = 'foo';
    echo subroutine($a);
?> 
```

但作为一项规则，includes 应该包含函数定义，并且被调用的脚本应该有对函数的调用。因为它最好地描述了调试时的程序流程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T21:18:29.920

取决于代码，但大多数时候您会创建一些函数并调用正确的函数：P。

# c# - 通用列表上的 Linq OrderBy 返回不完全按字母顺序排列的列表

> ID：13424481
> 
> 赞同：7
> 
> 时间：2012-11-16T21:12:40.060
> 
> 标签：c#, linq

我正在尝试使用 objects Name 属性对对象的通用列表进行排序。我正在使用 LINQ，但以下表达式不太适用：

```
var query = possibleWords.OrderBy(x => x.Name.ToLower()).ToList();
foreach (Word word in query) //possibleWords.OrderBy(word => word.Name))
   {
            listWords.Items.Add(word.Name);
   } 
```

如果我理解正确，“查询”现在应该包含一个有序项目的列表，并且项目应该添加到名为 listWords 的列表框中。

然而输出是这样的：

[http://screencast.com/t/s1CkkWfXD4](http://screencast.com/t/s1CkkWfXD4)（对不起，URL 链接，但 SO 以某种方式将我锁定在我的帐户之外，我显然无法使用这个新帐户发布图像）。

列表框几乎是按字母顺序排列的，但不完全是。出于某种原因，“aa”和“aaaa”排在最后。可能是什么原因，如何解决？

提前致谢。

**按要求详细说明**

此代码在 Visual Studio 中输入并执行时：

```
 List<Word> words = new List<Word>();

        words.Add(new Word("a"));
        words.Add(new Word("Calculator"));
        words.Add(new Word("aaa"));
        words.Add(new Word("Projects"));
        words.Add(new Word("aa"));
        words.Add(new Word("bb"));
        words.Add(new Word("c"));

        IEnumerable<Word> query = words.OrderBy(x => x.Name.ToLower()).ToList();

        foreach (Word word in query)
        {
            Console.WriteLine(word.Name);
        } 
```

给我以下输出：

```
a
bb
c
Calculator
ccc
Projects
aa
aaa 
```

这未正确排序：第一个“a”是正确的，但随后的“aa”和“aaa”条目被发送到列表的底部。

我对字符集和编码不太了解，所以我可能在这里犯了一个新手错误。但在那种情况下，我不知道那可能是什么，我会有点困惑为什么第一个“a”的顺序正确，但第二个和第三个“aa”和“aaa”却不是！

**进一步阐述 - Word 类**

```
[Serializable()]
public class Word
{
    [System.Xml.Serialization.XmlAttribute("Name")]
    public string Name { get; set; }

    public Word(string name)
    {
        Name = name;
    }

    public Word() { } //Parameter less constructor neccessary for serialization

} 
```

**原因和解决方法**

就像@Douglas 建议的那样，通过将 StringComparer.InvariantCultureIgnoreCase 比较器提供给 OrderBy 方法来解决问题。

在进一步的研究中，在使用丹麦文化 (da-DK) 时，FindAll 和 OrderBy 方法（可能还有其他方法）似乎都有问题。可能有其他方法或文化失败，但 da-DK 文化和 FindAll + OrderBy 方法肯定没有按预期工作。

OrderBy 方法存在此线程中描述的问题（错误排序）。FindAll 方法有一个类似的、非常奇怪的问题：假设我们有一个条目列表：a、aa、aaa 和 aaaa。当使用 FindAll(x => x.StartsWith("a")) 时，它只会返回 "a" 而不是 aa、aaa 和 aaaa。如果使用 StartsWith("aa")，它将正确找到 aa，以及 aaa 和 aaaa。使用 StartWith("aaa") 时，它将再次找不到 aaaa，只有 aaa！这似乎是框架中的一个错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T22:09:31.277

Could you try replacing:

```
IEnumerable<Word> query = words.OrderBy(x => x.Name.ToLower()).ToList(); 
```

…with:

```
IEnumerable<Word> query = words.OrderBy(x => x.Name, 
    StringComparer.InvariantCultureIgnoreCase); 
```

There's a very small chance that it's a weird culture issue.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T21:48:35.873

以下代码输出预期结果：

```
class Word
{
    public Word(string str)
    {
        Name = str;
    }

    public string Name { get; private set; }
}

public static void Main(string[] args)
{
    List<Word> words = new List<Word>();

    words.Add(new Word("a"));
    words.Add(new Word("Calculator"));
    words.Add(new Word("aaa"));
    words.Add(new Word("Projects"));
    words.Add(new Word("aa"));
    words.Add(new Word("bb"));
    words.Add(new Word("c"));

    IEnumerable<Word> query = words.OrderBy(x => x.Name.ToLower()).ToList();

    foreach (Word word in query)
    {
        Console.WriteLine(word.Name);
    }
} 
```

输出：

```
a
aa
aaa
bb
c
Calculator
Projects 
```

***更新：*** 好的，谜团解决了（有点）。如果您在代码之前执行以下操作：

```
var cultureInfo = new CultureInfo("da-DK");
Thread.CurrentThread.CurrentCulture = cultureInfo;
Thread.CurrentThread.CurrentUICulture = cultureInfo; 
```

你得到“不正确”的输出：

```
a
bb
c
Calculator
Projects
aa
aaa 
```

显然，丹麦语词典比较的规则是不同的。这是我在网上找到的解释（http://stackoverflow.com/questions/4064633/string-comparison-in-java）：

*请注意，这非常依赖于活动区域设置。例如，在丹麦，我们有一个字符“å”，过去拼写为“aa”，与两个单独的 a 非常不同。因此，丹麦排序规则将两个连续的 a 等同于“å”，这意味着它在 z 之后。这也意味着丹麦语词典的排序方式与英语或瑞典语词典不同。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T21:19:37.527

您最后的“a”很可能是一些不同的（非ASCII）字符。检查字符代码`(int)("a"[0])`是否与英文“a”相同。

如果是这种情况，排序并没有什么问题 - 没有什么可修复的（除了可能更好地理解您的数据）。

# c# - 调用包含yield的方法后不执行代码行

> ID：13424485
> 
> 赞同：1
> 
> 时间：2012-11-16T21:12:43.147
> 
> 标签：c#, yield

考虑以下方法：

```
IEnumerable<DateTime> GetTimes(int count)
{
 for (int i = 0; i < count; i++)
      yield return DateTime.Now;
 yield break;
} 
```

现在，我想称之为：

```
 var times = GetTimes(2);
 Console.WriteLine("First element:" + times.Take(1).Single().ToString());
 Console.WriteLine("Second element:" + times.Skip(1).Take(1).Single().ToString());
 Console.WriteLine("Third element:" + times.Skip(2).Take(1).Single().ToString());
 Console.WriteLine("Finished..."); 
```

但是最后一行代码永远不会运行。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T21:42:02.870

[由于interators](http://msdn.microsoft.com/en-us/library/dscyy5s0%28v=vs.80%29.aspx)的工作方式，这条线`yield break;`永远不会运行。

`GetTimes(int count)`执行时不执行迭代器方法

```
var times = GetTimes(2); 
```

相反，它会在您从中提取值时执行（例如，当您执行 时`times.Take(1).Single().ToString()`）。

这里有两件事会产生这种看似奇怪的行为：

1.  `yield return`每当命中一行时，迭代器就会停止。当您尝试从中获取另一个元素时，迭代器执行*从它离开的点恢复。*如果你不这样做，它将永远不会恢复执行。

2.  您实际上正在执行迭代器两次。你做了一些通常被称为[“IEnumerable 的多重枚举”的事情](http://confluence.jetbrains.net/display/ReSharper/Possible+multiple+enumeration+of+IEnumerable)

为了说明幕后实际发生的情况，让我们对您的`GetTimes`方法进行一个小改动：我们不要每次都返回相同的日期，但每次调用它时，我们都会返回前一个日期 + 1 天。让我们也添加一些`Console.WriteLine`来跟踪执行。因此，新方法体可能如下所示：

```
IEnumerable<DateTime> GetTimes(int count)
{
    for (int i = 0; i < count; i++)
    {
        Console.WriteLine("returning the value with index " + i);
        yield return DateTime.Now.AddDays(i);
    }

    Console.WriteLine("About to hit the `yield break`! Awesome!");
    yield break;
} 
```

现在运行您的代码会产生以下输出：

```
返回索引为 0 的值
第一个元素：2012 年 11 月 16 日晚上 11:34:46
返回索引为 0 的值
返回索引为 1 的值
第二个元素：2012 年 11 月 17 日晚上 11:34:46
完成的...

```

这说明了上面的两点：

1.  `GetTimes`一旦返回一个值，执行就会停止，一旦请求另一个值，它就会从相同的状态恢复。

2.  迭代器执行两次（第二次使用请求一个值，`times`请求下一个值并使用它）。`Skip``Take`

**好的，但是为什么不`yield break;`执行呢？那是因为您的迭代器可以产生 2 个值并且它只被调用 2 次，使其在第二个`yield return`被击中后冻结。如果您要从迭代器请求第三个元素，那么您的`break`行将被命中。**

现在，为了说明最后一行被命中的场景，让我们以通常的方式使用枚举器（使用`foreach`循环）。将您的`Console.WriteLine`行替换为：

```
foreach (var dateTime in times)
    Console.WriteLine(dateTime); 
```

此代码将产生以下输出：

```
返回索引为 0 的值
2012 年 11 月 17 日上午 12:05:20
返回索引为 1 的值
2012 年 11 月 18 日上午 12:05:20
即将达到“收益突破”！惊人的！

```

正如您所看到的，`foreach`一直消耗迭代器到最后并且该`yield break`行被命中。您也可以通过在其上设置断点来确认这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T21:14:27.723

假设您的意思是*枚举器中*的最后一行永远不会运行...该行

```
yield break; 
```

不会执行，因为您只从具有两个元素的序列中获取两个元素（使用您的代码的初始版本）。枚举器后面的状态机永远无法执行该行。

当`yield break;`您尝试从序列中获取 3 个元素时，确实会运行。

我看不出为什么不应该*调用调用代码中的最后一行（可能没有抛出异常）。*

```
Console.WriteLine("Finished..."); 
```

如果这就是您的意思，是否会抛出异常？如果是这样，异常的性质是什么？

**重写以前的错误更新**

最初编写的代码*确实*执行了该行

```
Console.WriteLine("Finished..."); 
```

它不执行

```
yield break; 
```

由于前面所述的原因。

随后添加到问题中的行

```
Console.WriteLine("Third element:" + times.Skip(2).Take(1).Single().ToString()); 
```

没有成功，并且确实抛出了 InvalidOperationException("Sequence contains no elements")，并且确实运行了该`yield break;`行，因为您尝试从只有 2 个的序列中获取 3 个元素。

**更新 2**

如果您想了解迭代器块和 Yield 关键字的工作原理，我强烈建议您从[Eric Lippert](https://stackoverflow.com/users/88656/eric-lippert)（Visual C# 团队的首席开发人员）的系列博文开始

[http://blogs.msdn.com/b/ericlippert/archive/2009/07/09/iterator-blocks-part-one.aspx](http://blogs.msdn.com/b/ericlippert/archive/2009/07/09/iterator-blocks-part-one.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T21:31:39.137

当您尝试获取“第三个元素”（序列中的两个元素）时，将引发异常，因为`.Single()`调用没有可返回的内容。

顺便问一下，你知道`.ElementAt(int)`方法吗？你为什么不用那个？

# java - Greedy Best First Search 是否使用队列或堆栈？

> ID：13424488
> 
> 赞同：1
> 
> 时间：2012-11-16T21:12:57.810
> 
> 标签：java, algorithm, stack, queue, greedy

我只是想实现最好的第一次搜索，我不确定这个算法是否有任何 LIFO 或 FIFO 属性。如果是这样，我应该使用哪一个？我需要使用它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T21:15:41.610

有关此伪代码，请参见[http://en.wikipedia.org/wiki/Best-first_search#Algorithm_.5B3.5D ：](http://en.wikipedia.org/wiki/Best-first_search#Algorithm_.5B3.5D)

```
OPEN = [initial state]
while OPEN is not empty or until a goal is found
do
 1\. Remove the best node from OPEN, call it n.
 2\. If n is the goal state, backtrace path to n (through recorded parents) and return path.
 3\. Create n's successors.
 4\. Evaluate each successor, add it to OPEN, and record its parent.
done 
```

第 1 步说“删除最佳节点” - 这意味着使用[Priority Queue](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/PriorityQueue.html)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-16T21:15:08.777

它使用队列，因此您应该使用 FIFO。

# javascript - 可以自动放弃使用 setTimeouts 排队的浏览器功能吗？

> ID：13424491
> 
> 赞同：1
> 
> 时间：2012-11-16T21:13:17.163
> 
> 标签：javascript, firefox, google-chrome, browser, settimeout

我有一个递归轮询函数，它做一些事情，然后以 100 毫秒的 setTimeout 调用自身。但是，如果我在递归轮询函数运行时调用另一个长时间执行某些操作的同步函数，我假设调用 setTimeout 为 100 毫秒的函数将排队，但如果该长函数未在指定数量内返回时间，浏览器会简单地丢弃排队功能吗？我问这个是因为递归轮询函数似乎在调用另一个长时间运行的函数后停止运行。我还检查`console.log`了递归函数到达并调用 setTimeout 但传递给 setTimeout 的函数在调用长同步函数后永远不会被调用。这一切都在 Chrome 23 和 Firefox 15 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:28:33.997

setTimeout(100, funct) 不会保证在 100 毫秒后您的函数将被执行。

如果在 100 毫秒后浏览器正在执行其他操作或挂起，它将等到它回来并执行它。

这里

```
function pausecomp(millis)
 {
  var date = new Date();
  var curDate = null;
  do { curDate = new Date(); }
  while(curDate-date < millis);
 }

var time = new Date();

setTimeout(function(){
    var lapse=new Date() -time;
    alert(lapse; 
},100);

pausecomp(300); 
```

​ 例如，当 100 毫秒 setTimeout 运行时，程序循环 300 毫秒。(http://jsfiddle.net/xX2b4/)

如果您运行它，输出将是 300+ 值，因为 300 毫秒系统被挂在循环中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T21:48:06.753

`setTimeout`函数不能“自动”取消 - 只要您允许浏览器返回其事件循环，它们*就会*被调用。

如果您*想要*一个自动取消的计时器功能，应该相对容易实现：

```
window.setTimeoutMaybe = function(f, t0, t1) {
    t1 = t1 || (t0 * 10);
    var then = new Date();
    return window.setTimeout(function() {
        var now = new Date();
        if (now - then < t1) {
            f();
        } 
    }, t0);
}; 
```

即`f`在 time 之后调用`t0`，但前提是 time`t1`还没有过去。

# javascript - 在移动设备上的 JQuery 移动应用程序中使用 Photoswipe 的空白页

> ID：13424492
> 
> 赞同：0
> 
> 时间：2012-11-16T21:13:49.150
> 
> 标签：javascript, jquery-mobile, jquery-plugins, cross-browser

我遇到了 Photoswipe 画廊的问题。我遇到的问题是，我单击缩略图，整个页面及其控件以及图像正在加载，然后只显示一个空白页面。

这只发生在我的移动设备（android 4.0.4）上，无论是在标准浏览器中还是在 chrome 中。但是我笔记本电脑上的 Firefox 和 chrome 都可以正常工作。

我附加了 chrome 远程调试器，一切似乎都正常。

在 chrome mobile 上，url-hash`#&ui-state=dialog`在 android 标准浏览器、桌面 chrome 和 firefox 中更改为 hash 不会改变并显示`#pageid`.

我试图调试代码，但我无法找出问题所在。

图库标记是在`pagebeforechange`事件中注入的。并且Photoswipe初始化如下：

```
(function(window, $, PhotoSwipe){
    $(document).ready(function(){
        console.log('document ready')

        $('div.gallery-page').live('pageshow', function(e){
            console.log('pageshow');
            var currentPage = $(e.target);
            var options = { enableMouseWheel: false , enableKeyboard: false };                    
            var photoSwipeInstance = $("ul.gallery a", e.target).photoSwipe(options,  currentPage.attr('id'));
            console.log(e.target);

            return true; 
        }).live('pagehide', function(e){

            var currentPage = $(e.target),
                photoSwipeInstance = PhotoSwipe.getInstance(currentPage.attr('id'));

            if (typeof photoSwipeInstance != "undefined" && photoSwipeInstance != null) {
                PhotoSwipe.detatch(photoSwipeInstance);
            }

            return true;
        });
    });

}(window, window.jQuery, window.Code.PhotoSwipe)); 
```

任何关于为什么页面变为空白的想法，仅在移动设备上？

//编辑我目前的解决方法是在 pagebeforechange 事件上这样做：

```
if(window.location.hash.search(/ui-state=dialog/) !== -1 ) {
    console.log('ui-state anomaly');
    e.preventDefault();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T18:42:01.143

我遇到了同样的问题，并在[https://github.com/codecomputerlove/PhotoSwipe/issues/375找到了解决方案](https://github.com/codecomputerlove/PhotoSwipe/issues/375)

还将您在上面发布的初始代码中的所有“.live”替换为“.on”。确保用您自己的 div 替换“YourGalleryDiv”。

```
$(document).bind('pagebeforechange', function(e) {
if ($('.ps-carousel').length) {
$('body').removeClass('ps-active');
$('#YourGalleryDiv').each(function(){
    var photoSwipe = window.Code.PhotoSwipe;
    var photoSwipeInstance = photoSwipe.getInstance($(this).attr('id'));
    if (typeof photoSwipeInstance != "undefined" && photoSwipeInstance != null) {
        photoSwipe.unsetActivateInstance(photoSwipeInstance);
    }
});
}
}); 
```

# extjs - 如何禁用网格的checkboxmodel的行选择保持先前的选择不变extjs

> ID：13424493
> 
> 赞同：2
> 
> 时间：2012-11-16T21:14:07.197
> 
> 标签：extjs, grid

锁定网格模型后，我无法继续选择。我的代码如下。

```
var sm = Ext.getCmp('loadFrameStateInfoTable').getSelectionModel(); // This select the rows which I want to
var stateStore = sm.store;
for (var ct in frameInfo) {
    var cd = frameInfo[ct].state_code;
    if (frameInfo[ct].st_flag == 'Y') {
        var index1 = stateStore.find('state_cd', cd);
        Ext.getCmp('loadFrameStateInfoTable').getSelectionModel().select(index1, true);
    }
}

// This lock the checkbox model
var sm = Ext.getCmp('loadFrameStateInfoTable').getSelectionModel();
if (frame_status == 'Pending' || frame_status == 'Failed' || frame_status == 'Generated') {

} else {
    Ext.getCmp('update_button').disabled = true;
    sm.setLocked(true);
} 
```

# list - 使用通配符比较列表

> ID：13424495
> 
> 赞同：0
> 
> 时间：2012-11-16T21:14:23.270
> 
> 标签：list, recursion, lisp

我正在尝试编写一个比较两个家庭作业列表的函数。当函数运行时，它应该是这样的 ;(cmp '(cat ?x mat ?x) '(cat bat mat bat)) => t ;(cmp '(cat ?x mat ?x) '(cat bat mat坐））=> 无。这意味着在第一个列表中等于 ?x 和第二个 ?x 如果两者都指向相同的值，则返回 true。当我现在运行程序时，出现“将参数解析为特殊形式时出错：如果元素数量无效”，如果您能给我一些反馈，这是我的代码。谢谢。

```
;cmp algorithm
;1 if the both lists are empty return true
;2 if only one of the lists is empty return fasle
;3 compare first of the list1 and the first of list2
;if equal go on to the rest of the list with recursive call else return false   

(defun cmp (list1 list2)
(setq y '())
(setq z '())
(defparameter *counter* 0)
  (cond 
   ((and (null list1) (null list2))
    t 
    )
   ((or (null list1) (null list2))
    nil
    )
    ((or (eq (first list1) (first list2)) 
         (eq (first list1) '?x)  )
     (cmp (rest list1) (rest list2) )

        ;if (first list is equal to '?x)
        ;set the counter to 1
        ;give the value of (first(rest list2)) to y 
        ;if (first list is equal to '?x) again
        ;set the counter to 2
        ;give the value of (first (rest list2)) to z
        ;i need to compare y and z if eq return true

     (if (eq (first list1) '?x) 
        (princ (first list1 ))
        (princ (first(rest list2)))

        (1+ *counter*)
        (set y (first(rest list2)))

        (if (= *counter* 2)
        (set z (first (rest list2)))    
            )       
        )

        (if (= y z) t)      
     )
   (t
    nil)
   )
  )

;(cmp ‘(cat ?x mat ?x) ‘(cat bat mat bat))  =>  t 
  ;(cmp ‘(cat ?x mat ?x) ‘(cat bat mat sat))  =>  nil 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T23:45:05.363

虽然阅读书籍或文档肯定会有所帮助，但有时查看示例代码，尤其是在您已经了解问题之后也会有所帮助。所以这是一个朴实无华的直接解决方案：

```
(defun compare-using-wildcards (pattern matched)
  (loop for p in pattern
     for m in matched
     with keys = (make-hash-table)
     do (unless (eql p m)               ; Doesn't matter
                                        ; if it starts with ?
                                        ; we still don't consider
                                        ; it a wildcart symbol, if
                                        ; it matches the symbol in
                                        ; the other list.
          (if (and (symbolp p)
                   (char= (aref (symbol-name p) 0) #\?))
              (multiple-value-bind (registered exists)
                  (gethash p keys)
                (if exists
                    (unless (eql registered m)
                      (return))
                    (setf (gethash p keys) m)))
              (return)))
     finally (return t)))

(compare-using-wildcards '(cat ?x mat ?x) '(cat bat mat bat)) ; T
(compare-using-wildcards '(cat ?x mat ?x) '(cat bat mat sat)) ; NIL
(compare-using-wildcards '(cat ?x mat ?y) '(cat bat mat sat)) ; T
(compare-using-wildcards '(cat ?x max ?y) '(cat bat mat sat)) ; NIL 
```

但是有很多很多方法可以做到这一点！例如，如果已知列表很短，则可以通过`destructuring-bind`. 或者，您可以编写一个“zip”函数（一个高阶函数，它将多个列表中的单元格提供给其他函数，直到它返回非零结果）等等。

* * *

还有一个有些人为的例子。好吧，它看起来应该可以工作，除非我错过了一些极端情况。它将使用通配符将多个列表与列表进行比较：

```
(every (let ((keys (make-hash-table)))
       #'(lambda (&rest elements)
           (let ((wildcard (car elements)))
             (if (and (symbolp wildcard)
                      (char= (aref (symbol-name wildcard) 0) #\?))
                 (let ((replacement (gethash wildcard keys))
                       (i -1))
                   (if replacement
                       (every #'(lambda (x)
                                  (eql x (aref replacement (incf i))))
                              (cdr elements))
                       (setf (gethash wildcard keys)
                             (coerce (cdr elements) 'vector))))
                 (every #'(lambda (x) (eql x wildcard)) elements)))))
     '(cat ?x mat ?x)
     '(cat bat mat bat)
     '(cat bar mat bar)
     '(cat bank mat bank)
     '(cat bass mat boss)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T00:48:03.190

您快到了。您缺少如何在第一个字符为的任何符号上进行一般匹配`?`以及如何将匹配传递给递归调用。

您需要在通话之间的某处保存匹配项。一种可能的方法是将它们传递到可选的匹配[关联列表中：](http://www.lispworks.com/documentation/HyperSpec/Body/14_aba.htm)

```
(defun cmp (list1 list2 &optional matches)
  (cond ((and (null list1) (null list2))
         t)
        ((or (null list1) (null list2))
         nil)
        ((and (symbolp (first list1))
              (plusp (length (symbol-name (first list1))))
              (eql (char (symbol-name (first list1)) 0) #\?))
         (let ((assoc (assoc (first list1) matches)))
           (cond ((null assoc)
                  (cmp (rest list1) (rest list2)
                       (list* (cons (first list1) (first list2))
                              matches)))
                 ((eql (cdr assoc) (first list2))
                  (cmp (rest list1) (rest list2) matches)))))
        ((eql (first list1) (first list2))
         (cmp (rest list1) (rest list2) matches)))) 
```

一种与使用[动态变量](http://www.lispworks.com/documentation/HyperSpec/Body/03_abaab.htm)的方法非常相似的方法：

```
(defvar *matches* '())

(defun cmp (list1 list2)
  (cond ((and (null list1) (null list2))
         t)
        ((or (null list1) (null list2))
         nil)
        ((and (symbolp (first list1))
              (plusp (length (symbol-name (first list1))))
              (eql (char (symbol-name (first list1)) 0) #\?))
         (let ((assoc (assoc (first list1) matches)))
           (cond ((null assoc)
                  (let ((*matches* (list* (cons (first list1) (first list2))
                                          *matches*)))
                    (cmp (rest list1) (rest list2))))
                 ((eql (cdr assoc) (first list2))
                  (cmp (rest list1) (rest list2))))))
        ((eql (first list1) (first list2))
         (cmp (rest list1) (rest list2))))) 
```

两者都可以这样调用：

```
> (cmp '(?x b ?x d ?y f ?y h)
       '(a  b c  d  e f g  h))
nil
> (cmp '(?x b ?x d ?y f ?y h)
       '(a  b a  d  e f e  h))
t 
```

但是，如果您已经从匹配的关联列表开始，则第一个匹配项的调用方式如下：

```
> (cmp '(?x ?y)
       '(a  b)
       '((?x . a)))
t 
```

而第二个是这样使用的：

```
> (let ((*matches* '((?x . a))))
    (cmp '(?x ?y)
         '(a  b)))
t 
```

* * *

练习：`cmp`总是匹配`'?`任何东西（一个名字只是问号的符号）。

如果您希望某个元素存在但您想忽略它，这可能很有用。

* * *

练习：`cmp`变得更有用并返回找到的关联列表，而不是`t`：

```
> (cmp '(?x ?y)
       '(a  b))
((?x . a)
 (?y . b))

;;; Assuming option one
> (cmp '(?x ?y)
       '(a  b)
       '((?x . a)
         (?z . c)))
((?x . a)
 (?y . b))
> (cmp '(?x ?y)
       '(c  b)
       '((?x . a)
         (?z . c)))
nil 
```

这个想法是只返回找到的关联，而不是未使用的关联。因此，即使第二个测试返回 non- `nil`，`?z`也不会出现在结果中。

# ruby-on-rails-3 - Rails，使用构建时获取对象关联（对象仍然不在数据库中），DRY

> ID：13424497
> 
> 赞同：0
> 
> 时间：2012-11-16T21:14:32.320
> 
> 标签：ruby-on-rails-3, dry

我正在构建一个使用一种元问题模型的报告系统。问题预先保存在数据库中，然后根据报告的类型从数据库中提取一些问题。

想要保持干燥，我试图找出一种方法将`Variable`模型的信息传递给我`report_header`，但无济于事。

在`new`我的行动中：

```
 reportBody = @report_head.report_bodies.build(:variable_id => a.id)
  @report_head.variables #modified, thx. 
```

我需要的只是以`Variable`某种`DRY`方式将属性从报告头传递给报告头。

如果您需要了解我的模型：

```
class Variable < ActiveRecord::Base
  attr_accessible :id,:break_point, :description, :name, :time_frequency, :v_type
  has_many :report_bodies
  has_many :report_heads, :through => :report_bodies   
end

class ReportHead < ActiveRecord::Base
  attr_accessible :email, :name , :report_bodies_attributes, :report_bodies, :variables_attributes
  has_many :report_bodies
  has_many :variables, :through => :report_bodies   
  accepts_nested_attributes_for :report_bodies
end

class ReportBody < ActiveRecord::Base
  attr_accessible :report_head_id, :variable_value, :variable_id, :variables_attributes, :report_heads
  belongs_to :report_head
  belongs_to :variable
end 
```

**更新**

我按照建议更新了模型，并修改了调用变量的方式。但是，如果我执行以下操作，我仍然对如何在视图中使用它感到困惑：

```
 <%= f.fields_for :variables do |variable| %>
       <%= variable.text_field :name, :value => :name, :class => 'text_field' %>  
   <% end %> 
```

它打印一个字符串而不是实际名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:34:11.287

您定义了错误的名称关联，您的 ReportBody 关联应该是：

```
belongs_to :report_head 
belongs_to :variable 
```

这是不正确的：

```
@report_head.report_bodies.build(:variable_id => a.id,:report_head_id =>@report_head.id) 
```

将其更改为：

```
@report_head.variables.build(:variable_id => a.id) 
```

更好的是，您不必设置report_head_id。这是错误的：

```
@report_head.report_bodies.variables 
```

如果你想得到所有变量属于@report_head，你只需要使用：

```
@report_head.variables 
```

# php - php.ini 影响所有子文件夹

> ID：13424502
> 
> 赞同：2
> 
> 时间：2012-11-16T21:14:50.173
> 
> 标签：php

我需要在我的服务器的特定文件夹中添加一个 php.ini 来设置`allow_url_fopen = true`网站。该网站的根文件夹有很多子文件夹，也有很多子文件夹。

如果我将 php.ini 放在网站的根目录中，它似乎只会影响该文件夹（我已经在那里和子文件夹中运行了 phpconfig()。

是否有可能以某种方式影响所有子文件夹，而不必为每个子文件夹放置 uno php.ini？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-18T15:33:04.880

关于马里奥的评论，我尝试了`php.ini`和`.user.ini`。正如他所说`php.ini`，它不是递归的，而是`.user.ini`递归地为我工作。我也在使用 PHP5 进行 1and1 共​​享 linux 托管。我只是把它`.user.ini`放在我的根目录中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-16T21:18:53.187

[您可以在.htaccess](http://php.net/manual/en/configuration.changes.php)中设置 PHP 配置选项。

```
php_flag allow_url_fopen on 
```

# unit-testing - 单元测试和模拟 nodeJS 网络/套接字事件

> ID：13424504
> 
> 赞同：5
> 
> 时间：2012-11-16T21:14:55.013
> 
> 标签：unit-testing, node.js, mocking, tdd, mocha.js

`net`我正在编写一个从模块连接到 Socket 的脚本。

对于测试，我使用 mocha 和模拟 sinonjs

现在我真的在模拟/伪造套接字的数据发射时遇到了问题。

例如：我想测试这段代码：

```
socket.on('data', function (data) {
    console.log(data);
} 
```

我怎样才能伪造“数据”的发射？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T03:57:51.113

您将希望以`socket`某种方式将变量公开给测试。我需要查看更多您的代码来推荐最好的方法。

然后在您的测试中，您可以调用`socket.emit()`.

# sql - 另一个左连接查询

> ID：13424505
> 
> 赞同：0
> 
> 时间：2012-11-16T21:15:00.707
> 
> 标签：sql, left-join, inner-join

我有表 LS_CLIENT_TRANS

```
CODE_CLIENT  OTHER_CLIENT
4444         4444
4444         8585 
```

和表 CLIENT

```
CODE_CLIENT  ADRESS
4444         RR
8585         GG 
```

我怎样才能得到：

```
 CODE_CLIENT  OTHER_CLIENT  ADRESS
    4444         4444         RR
    4444         8585         GG 
```

当我使用

```
 SELECT *
   FROM LS_CLIENT_TRANS
   LEFT JOIN CLIENT ON LS_CLIENT_TRANS.CODE_CLIENT = CLIENT.CODE_CLIENT 
```

我有：

```
CODE_CLIENT  OTHER_CLIENT  ADRESS
    4444         4444         RR
    4444         8585         RR 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:17:48.693

```
SELECT *
FROM LS_CLIENT_TRANS
LEFT JOIN CLIENT ON LS_CLIENT_TRANS.OTHER_CLIENT = CLIENT.CODE_CLIENT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T21:18:35.097

`JOIN`像`ON l.OTHER_CLIENT = c.CODE_CLIENT`这样：

```
SELECT
  l.CODE_CLIENT,
  l.OTHER_CLIENT, 
  c.Adress
FROM LS_CLIENT_TRANS l
LEFT JOIN CLIENT c ON l.OTHER_CLIENT = c.CODE_CLIENT 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/25b87/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T21:20:36.023

```
SELECT t.CODE_CLIENT, t.OTHER_CLIENT, c.ADDRESS
FROM LS_CLIENT_TRANS t 
JOIN CLIENT c ON t.OTHER_CLIENT = c.CODE_CLIENT 
```

# grails - 从引导程序调用 grails 控制器？

> ID：13424508
> 
> 赞同：2
> 
> 时间：2012-11-16T21:15:07.880
> 
> 标签：grails, bootstrapping

我有一个具有复杂逻辑的控制器动作来构建模型，我想在 BootStrap.groovy 期间构建一个。如何在引导期间使用所需的参数调用该控制器操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T21:17:57.323

Grails 的方式是将“复杂逻辑”移动到控制器调用的服务中，然后从引导程序调用相同的服务方法。`BootStrap`您可以像在服务和控制器中一样使用自动装配，

```
def myService 
```

在 init 闭包之外。

# mvvm-light - 为什么我们需要为 IMessenger.Subscribe() 显式设置接收者？

> ID：13424510
> 
> 赞同：1
> 
> 时间：2012-11-16T21:15:16.130
> 
> 标签：mvvm-light

这是该`Register`方法的签名：

```
IMessanger.Register<TMsg>(object recipient, Action<TMsg> action); 
```

如果 action 在其 Target 属性中包含引用，为什么我们需要接收者？当给定动作不使用定义它的类的实例成员时，Target 为空。
但这种情况很少发生。我的意思是这不是我们使用事件处理程序的一种非常常见的方式。

我想了解为什么没有`Register`没有收件人参数的附加方法签名？我错过了什么重要的东西吗？

```
IMessanger.Register<TMsg>(Action<TMsg> action); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:46:29.943

实际上，您可以从应用程序中的任何位置注册特定消息的收件人，而不仅仅是从作为收件人的类中注册。例如，考虑以下场景：

```
public class ClassA : ViewModelBase
{
    public ClassA()
    {
         Messenger.Default.Register<SomeMessage>(this, SomeAction);
         Messenger.Default.Register<SomeMessage>(ViewModelLocator.ClassB, SomeAction);
    }

    private void SomeAction(SomeMessage msg)
    {
        // do something
    }
}

public class ClassB : ViewModelBase
{
    public ClassB()
    {

    }
} 
```

在第二个`Registor`方法调用的情况下，Action 的 Target 属性将与接收者参数不同。因此，为了保持一致，总是需要收件人参数很可能更安全。

当然，您是正确的，这种情况可能比您简单地`this`作为收件人传递的情况不太常见。因此，在这种情况下，如果键入`this`对您来说变得很麻烦，那么您始终可以定义自己的`Register`扩展方法，该方法只需将 Target 属性传递给实际`Register`方法：

```
public static class MessengerHelper
{
    public static void Register<TMessage>(this IMessenger messenger, Action<TMessage> action)
    {
        messenger.Register<TMessage>(action.Target, action);
    }
} 
```

然后，您可以注册这样的消息：

```
public class ClassA : ViewModelBase
{
    public ClassA()
    {
         Messenger.Default.Register<SomeMessage>(SomeAction);
    }

    private void SomeAction(SomeMessage msg)
    {
        // do something
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:26:49.707

这样做是为了让您可以说`Messenger.UnregisterRecepient(recepient);`哪个然后取消订阅注册到此接收器的每个操作。

# javascript - HTML5 数据属性格式

> ID：13424511
> 
> 赞同：0
> 
> 时间：2012-11-16T21:15:33.353
> 
> 标签：javascript, json, html, attributes

我正在设置一个插件并遇到一个奇怪的问题......

我正在传递这样的设置：

```
data-plugin='{"setting1":false,"setting2":true,"setting3":false}' 
```

这工作正常，但希望具有以下更用户友好的格式：

```
data-plugin='{
    "setting1":false,
    "setting2":true,
    "setting3":false
    }' 
```

但是，当在里面放置回车或空格时，设置不再生效。我不完全确定我做错了什么......

# linux - 单击触控板时如何防止光标移动？（Macbook Pro + Ubuntu）

> ID：13424516
> 
> 赞同：2
> 
> 时间：2012-11-16T21:16:15.797
> 
> 标签：linux, ubuntu, mouse

我刚刚在我的 Macbook Pro 上安装了 Ubuntu 12.10。当我点击触控板时，它总是被注册为一个小的鼠标移动以及一个点击，所以它会拖动我点击的任何东西。有没有其他人遇到过这个？是否有任何突触设置可以提供帮助？目前，我启用了点击点击，因为正常点击非常困难。

在虚拟机中运行 Ubuntu 时我没有遇到这个问题，但我猜它有另一个抽象层，可以防止突触成为解释直接触摸板输入的那个。

谢谢！

# visual-studio-2010 - wpp.targets 中的 setAcl 未在 Publish - Web Deploy 时执行（但说是）

> ID：13424523
> 
> 赞同：4
> 
> 时间：2012-11-16T21:16:54.113
> 
> 标签：visual-studio-2010, msbuild, msdeploy

我有一个 Web 表单应用程序 (Visual Studio 2010)，其中包含一个现有的 wpp.targets 文件，它可以成功地执行 LESS 预处理、资源缩小/捆绑、web.config 加密等操作。

只需右键单击 Web 应用程序并选择“发布 - 文件系统”选项，我始终能够很好地进行部署。

我最近决定尝试自动设置应用程序中特定文件夹的 ACL 权限。这导致我从文件系统发布选项更改为 Web 部署选项（在服务器上安装和配置 Web Deploy 3 后也可以正常工作）。

我切换到 Web Deploy 的原因是因为我理解通过使用 Web Deploy 选项，我应该能够向我的 wpp.targets 文件添加额外的步骤来设置必要的文件夹权限。

我看过很多关于这个主题的文章、[博客](http://sedodream.com/2011/11/08/SettingFolderPermissionsOnWebPublish.aspx)、论坛[帖子](https://stackoverflow.com/questions/6861990/can-web-deploys-setacl-provider-be-used-on-a-sub-directory)等，而且看起来相当简单。

我正在尝试为名为“IDAutomation”的文件夹授予域用户的读/写/修改访问权限 - 所以我基本上只是在现有 wpp.targets 文件的末尾添加了以下内容：

```
<Target Name="SetupCustomAcls" AfterTargets="AddIisSettingAndFileContentsToSourceManifest">
    <ItemGroup>
        <MsDeploySourceManifest Include="setAcl">
            <Path>$(_MSDeployDirPath_FullPath)\IDAutomation</Path>
            <setAclAccess>Read,Write,Modify</setAclAccess>
            <setAclUser>Domain Users</setAclUser>
            <setAclResourceType>Directory</setAclResourceType>
            <AdditionalProviderSettings>setAclResourceType;setAclAccess</AdditionalProviderSettings>
        </MsDeploySourceManifest>
    </ItemGroup>
</Target>

<Target Name="DeclareCustomParameters" AfterTargets="AddIisAndContentDeclareParametersItems">
    <ItemGroup>
        <MsDeployDeclareParameters Include="IDAutomationSetAclParam">
            <Kind>ProviderPath</Kind>
            <Scope>setAcl</Scope>
            <Match>^$(_EscapeRegEx_MSDeployDirPath)\\IDAutomation$</Match>
            <Value>$(_DestinationContentPath)/IDAutomation</Value>
            <ExcludeFromSetParameter>True</ExcludeFromSetParameter>
        </MsDeployDeclareParameters>
    </ItemGroup>
</Target> 
```

但是我显然遗漏了一些东西，因为我单击了 Publish -> Web Deploy - 让它做它的事情，权限不会应用于文件夹。该应用程序已成功部署，一切看起来都很好 - 它只是没有为我设置文件夹的权限。

以下是部署输出末尾的一些摘录：

```
Target "Package" skipped, due to false condition; ($(_CreatePackage)) was evaluated as (false).
Target "MSDeployPublish" in file ..... from project .....
Start Web Deploy Publish the Application/package to....
...
Starting Web deployment task from source:manifest(.....) to Destination:auto().
Updating setAcl (Site/app).
Updating setAcl (Site/app).
Updating setAcl (Site/app/IDAutomation).     <--  Appears to be doing something??
Updating filePath......
....
Updating setAcl (Site/app).
Updating setAcl (Site/app).
Updating setAcl (Site/app/IDAutomation).     <--  Appears to be doing something??
Successfully executed Web deployment task.
Publish is successfully deployed.
Task "MSdeploy" skipped, due to false condition; ($(UseMsdeployExe)) was evaluated as (False).
Done building target "MSDeployPublish" in project ...
Done building project ... 
```

所以它似乎是在文件夹上设置 acl（由于某种原因两次），但是当我去查看远程服务器上的文件夹时，权限还*没有*被应用。

我在这里想念什么？

我不想为以后/手动部署或任何涉及构建服务器的东西构建一个包。我只是手动尝试发布-> Web 部署。

Web Deploy 3.0 也安装在我的机器 (win7) 以及 web 服务器 (Win2008R2/IIS7.5) 上。

**- 更新 -**

我发现无论我在 setAclUser 元素中设置什么，sitemanifest.xml 文件*总是*缺少文件夹的 setAclUser 属性（缩写路径）：

```
<sitemanifest>
    <IisApp path="C:\...\obj\...\Package\PackageTmp" managedRuntimeVersion="v4.0" />
    <setAcl path="C:\...\obj\...\Package\PackageTmp" setAclResourceType="Directory" />
    <setAcl path="C:\...\obj\...\Package\PackageTmp" setAclUser="anonymousAuthenticationUser" setAclResourceType="Directory" />
    <setAcl path="C:\...\obj\...\Package\PackageTmp\IDAutomation" setAclResourceType="Directory" setAclAccess="Read,Write" />
</sitemanifest> 
```

因此，您可以看到 IDAutomation 文件夹的 setAcl 元素上没有 setAclUser。希望这会成为某人的线索？

再次感谢-

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T15:48:45.503

*叹息*- 终于意识到我错过了 AdditionalProviderSettings 中的 setAclUser 属性：

```
<AdditionalProviderSettings>setAclUser;setAclResourceType;setAclAccess</AdditionalProviderSettings> 
```

# sql - 在一个查询中对一个表进行多选

> ID：13424525
> 
> 赞同：2
> 
> 时间：2012-11-16T21:16:55.690
> 
> 标签：sql, sql-server, subquery, multiple-select

我正在尝试构建一个选择语句，该语句将为我提供每个月和用户的百分比值。

我有一个表格，其中的行看起来像这样；表名：pytrans

```
tTransDate  tArtCode  tTime  tSignature
20120801    DKK       1      30JK
20120801    AD        1.5    30JK
20120802    DKB       3      40AK
20120903    MI        2      45TR
20120904    DKK       2      30JK
20120904    DKB       2      30JK 
```

选择应该给我每个签名在 tArtCode DKB 或 DKK 上花费的时间百分比以及在所有 tArtCode 上花费的所有时间的月份。所以从上面的例子中，选择应该在第 8 个月给我 40% 的签名 30JK 和 100% 的签名 30JK 在第 9 个月。

我尝试了不同类型的 sql select 语句，但它似乎没有 100% 正确。这就是我所拥有的；

```
select DATEPART(YY, tTransdatum) AS Year, DATEPART(mm, tTransdatum) AS Month, tSignatur,
   (select SUM(tAntal) AS SumPart from pytrans where tSignatur = '30JK' AND (tArtikelkod = 'DKK' OR tArtikelkod = 'DKB'))
    /(select DATEPART(YY, tTransdatum) AS Year, DATEPART(mm, tTransdatum) AS Month, SUM(tAntal) AS SumTot from pytrans where tSignatur = '30JK' GROUP BY Year, Month, SumTot) * 100
From pytrans where tSignatur = '30JK' GROUP BY DATEPART(mm, tTransdatum), DATEPART(YY, tTransdatum), tSignatur 
```

此 SQL 不起作用的错误是我无法对年、月、总和。我也得到错误；当不使用 EXISTS 引入子查询时，选择列表中只能指定一个表达式。

下一个 sql select 给了我我想要的东西，但我要具体说明我的要求......可以这么说。如果我使用这个 sql，那么我需要对每个签名和每个月都有一个 sql 查询，这并不是很有创意。

```
select TOP 1 DATEPART(YY, tTransdatum) AS Year, DATEPART(mm, tTransdatum) AS Month, tSignatur, 
SumProc = (select SUM(tAntal) from pytrans
          where tSignatur = '30JK' AND (tArtikelkod NOT LIKE 'FL' AND tArtikelkod NOT LIKE 'SEM' AND tArtikelkod NOT LIKE 'KOMPIN') AND (tArtikelkod = 'DKK' OR tArtikelkod = 'DKB') AND tTransdatum BETWEEN '20121101' AND '20121131')
          / (select SUM(tAntal) from pytrans 
          where tSignatur = '30JK' AND (tArtikelkod NOT LIKE 'FL' AND tArtikelkod NOT LIKE 'SEM' AND tArtikelkod NOT LIKE 'KOMPIN') AND tTransdatum BETWEEN '20121101' AND '20121131') * 100
from pytrans
Where tSignatur = '30JK' AND tTransdatum BETWEEN '20121101' AND '20121131'
group by tTransdatum, tSignatur 
```

我也尝试过 Union，但这似乎对我不起作用。

我真的需要帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:45:08.413

```
Create Table #pytrans(tTransdatum datetime,  tArtCode varchar(10), tAntal float,  tSignature varchar(10))

insert into #pytrans Values('20120801',    'DKK',       1      ,'30JK')
insert into #pytrans Values('20120801',    'AD',        1.5    ,'30JK')
insert into #pytrans Values('20120802',    'DKB',       3      ,'40AK')
insert into #pytrans Values('20120903',    'MI',        2      ,'45TR')
insert into #pytrans Values('20120904',    'DKK',       2      ,'30JK')
insert into #pytrans Values('20120904',    'DKB',       2      ,'30JK')

Select a.Year,a.Month,a.tSignature,a.SumPart as aAll,b.SumPart as bAll,Case when b.SumPart =0 then NULL else a.SumPart/b.SumPart * 100 end as [Percent]
 from
(select DATEPART(YY, tTransdatum) AS Year, DATEPART(mm, tTransdatum) AS Month, tSignature
,SUM(tAntal) AS SumPart
from #pytrans
where tSignature = '30JK' AND tArtCode in( 'DKK' ,'DKB')
Group by DATEPART(YY, tTransdatum) , DATEPART(mm, tTransdatum) , tSignature) a
Left Join
(select DATEPART(YY, tTransdatum) AS Year, DATEPART(mm, tTransdatum) AS Month, tSignature
,SUM(tAntal) AS SumPart
from #pytrans
where tSignature = '30JK' 
Group by DATEPART(YY, tTransdatum) , DATEPART(mm, tTransdatum) , tSignature) b
on a.Month=b.Month and a.Year =b.Year and a.tSignature = b.tSignature 
```

# css - 在 CSS 中为背景图像设置动画？

> ID：13424526
> 
> 赞同：0
> 
> 时间：2012-11-16T21:16:57.447
> 
> 标签：css

我试图使背景图像在添加类时平滑淡入，并在删除类时淡出（到 div）。

我当前的 CSS（仅在 Firefox 中测试）

```
background : url("/PmDojo/dojox/widget/Standby/images/loading.gif");
-moz-transition : background 0.5s ease-in-out;
background-repeat: no-repeat;
background-position: 65px center;
background-size: "contain"; 
```

但这样做是显示图像淡入并从左侧移动到中心。我希望它在淡入发生时已经就位。如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:26:45.417

[用这个答案](https://stackoverflow.com/questions/7319552/can-i-fade-in-a-background-image-css-background-image-with-jquery)试试这个链接。另请查看[此答案](https://stackoverflow.com/questions/12773529/jquery-background-image-fade-in-animation)，因为很可能使用 jquery 来执行此操作。

如果没有，最后的手段可能是将带有 z-index 的图像放置在所有其他图层下方，然后将其作为常规 DOM 元素进行动画处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T21:42:01.090

如果没有看到你的类和 javascript，很难说，但是，根据我对 css3 过渡和动画的经验 - 类中所有带有过渡/动画的元素都会生效。因此，您将需要两个类来将静态 css 属性与动画属性分开。将这些属性放在始终存在的 div 的另一个类上：-moz-transition : background 0.5s ease-in-out; 背景重复：不重复；背景位置：65px 中心；背景尺寸：“包含”；

然后只需切换具有动画属性的类： background : url("/PmDojo/dojox/widget/Standby/images/loading.gif");

因此，当您更改类时，您会说“defaultClass”类开始，然后将其更改为“default animationClass”以切换动画/过渡。希望有帮助吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-26T18:52:22.497

也许问题已结束，但我会尝试发布我的答案

此代码应该可以工作，只需使用您自己的 bg.jpg

```
<html>
<head>
    <title>some title</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"><style> 
        #bg {
            -moz-animation: bg 60s linear infinite;
            -webkit-animation: bg 60s linear infinite;
            -o-animation: bg 60s linear infinite;
            -ms-animation: bg 60s linear infinite;
            animation: bg 60s linear infinite;
            -moz-backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            -o-backface-visibility: hidden;
            -ms-backface-visibility: hidden;
            /*backface-visibility: hidden;*/  //ORIGIN
            backface-visibility: visible;
            -moz-transform: translate3d(0,0,0);
            -webkit-transform: translate3d(0,0,0);
            -o-transform: translate3d(0,0,0);
            -ms-transform: translate3d(0,0,0);
            transform: translate3d(0,0,0);
            /* Set your background with this */
            background: #348cb2 url("images/bg.jpg") bottom left;
            background-repeat: repeat-x;
            height: 100vh;
            left: 0;
            opacity: 1;
            position: fixed;
            top: 0;
        }
        @-moz-keyframes     bg { 0% { -moz-transform: translate3d(0,0,0); -webkit-transform: translate3d(0,0,0); -o-transform: translate3d(0,0,0); -ms-transform: translate3d(0,0,0); transform: translate3d(0,0,0); } 100% { -moz-transform: translate3d(-2250px,0,0); -webkit-transform: translate3d(-2250px,0,0); -o-transform: translate3d(-2250px,0,0); -ms-transform: translate3d(-2250px,0,0); transform: translate3d(-2250px,0,0); } }
        @-webkit-keyframes  bg { 0% { -moz-transform: translate3d(0,0,0); -webkit-transform: translate3d(0,0,0); -o-transform: translate3d(0,0,0); -ms-transform: translate3d(0,0,0); transform: translate3d(0,0,0); } 100% { -moz-transform: translate3d(-2250px,0,0); -webkit-transform: translate3d(-2250px,0,0); -o-transform: translate3d(-2250px,0,0); -ms-transform: translate3d(-2250px,0,0); transform: translate3d(-2250px,0,0); } }
        @-o-keyframes       bg { 0% { -moz-transform: translate3d(0,0,0); -webkit-transform: translate3d(0,0,0); -o-transform: translate3d(0,0,0); -ms-transform: translate3d(0,0,0); transform: translate3d(0,0,0); } 100% { -moz-transform: translate3d(-2250px,0,0); -webkit-transform: translate3d(-2250px,0,0); -o-transform: translate3d(-2250px,0,0); -ms-transform: translate3d(-2250px,0,0); transform: translate3d(-2250px,0,0); } }
        @-ms-keyframes      bg { 0% { -moz-transform: translate3d(0,0,0); -webkit-transform: translate3d(0,0,0); -o-transform: translate3d(0,0,0); -ms-transform: translate3d(0,0,0); transform: translate3d(0,0,0); } 100% { -moz-transform: translate3d(-2250px,0,0); -webkit-transform: translate3d(-2250px,0,0); -o-transform: translate3d(-2250px,0,0); -ms-transform: translate3d(-2250px,0,0); transform: translate3d(-2250px,0,0); } }
        @keyframes          bg { 0% { -moz-transform: translate3d(0,0,0); -webkit-transform: translate3d(0,0,0); -o-transform: translate3d(0,0,0); -ms-transform: translate3d(0,0,0); transform: translate3d(0,0,0); } 100% { -moz-transform: translate3d(-2250px,0,0); -webkit-transform: translate3d(-2250px,0,0); -o-transform: translate3d(-2250px,0,0); -ms-transform: translate3d(-2250px,0,0); transform: translate3d(-2250px,0,0); } }

        #bg {
            background-size: 2250px auto;
            width: 6750px;
        }</style>
</head>
<body>
    <div id="bg"></div>
</body></html> 
```

# google-maps-api-3 - Google Maps API v3 - 从 xml 文件加载标记并集成 markercluster

> ID：13424534
> 
> 赞同：1
> 
> 时间：2012-11-16T21:17:28.557
> 
> 标签：google-maps-api-3, xml-parsing, markerclusterer

大家好，感谢您的支持。我有一个加载 GoogleMaps API v3 并从 XML 文件放置标记的网站，我正在尝试将它与 MarkerCluster 集成。无论我尝试什么似乎都是错误的。有人可以帮忙吗？我将粘贴呈现地图并从 xml 加载数据的代码......有人可以解释在哪里添加 Markercluster 特定代码吗？谢谢你。

PS：如果你喜欢，请随意使用代码——我也可以通过网络上的几个示例来编写它。

```
<script type="text/javascript" >
$(document).ready(function() {
var myLatLng = new google.maps.LatLng(21.150272,-4.636016);
MYMAP.init('#map', myLatLng, 2);
MYMAP.placeMarkers('markers/markers.xml');
});

var styles = [ { "featureType": "water", "elementType": "geometry.fill", "stylers": [ { "saturation": -100 }, { "lightness": -61 } ] },{ "featureType": "road", "elementType": "labels", "stylers": [ { "saturation": -67 }, { "visibility": "off" } ] },{ "featureType": "poi", "stylers": [ { "lightness": 40 }, { "saturation": -73 } ] },{ "featureType": "poi", "elementType": "labels", "stylers": [ { "visibility": "off" } ] },{ "featureType": "administrative.land_parcel", "elementType": "labels", "stylers": [ { "visibility": "off" } ] },{ "featureType": "administrative.neighborhood", "elementType": "labels", "stylers": [ { "visibility": "off" } ] },{ "featureType": "administrative.country", "elementType": "geometry.stroke", "stylers": [ { "color": "#ffff80" }, { "weight": 1 } ] },{ "featureType": "landscape", "stylers": [ { "saturation": -89 }, { "lightness": 25 } ] },{ "featureType": "water", "elementType": "labels", "stylers": [ { "visibility": "off" } ] } ]

var MYMAP = {
map: null,
bounds: null
}

MYMAP.init = function(selector, latLng, zoom) {
var myOptions = {
zoom:zoom,
center: latLng,
mapTypeId: google.maps.MapTypeId.ROADMAP,
styles: styles,
mapTypeControl: false,
streetViewControl: false,
panControl: false,
zoomControl: true,
zoomControlOptions: {
style: google.maps.ZoomControlStyle.LARGE,
position: google.maps.ControlPosition.RIGHT_CENTER,
},
}
this.map = new google.maps.Map($(selector)[0], myOptions);
this.bounds = new google.maps.LatLngBounds();
}

MYMAP.placeMarkers = function(filename) {
$.get(filename, function(xml){
$(xml).find("marker").each(function(){
var name = $(this).find('name').text();
var facebook = $(this).find('facebook').text();
var linkedin = $(this).find('linkedin').text();
var twitter = $(this).find('twitter').text();
var photo = $(this).find('photo').text();
var ico = $(this).find('ico').text();
var city = $(this).find('city').text();
var country = $(this).find('country').text();
var email = $(this).find('email').text();
var lat = $(this).find('lat').text();
var lng = $(this).find('lng').text();
var point = new google.maps.LatLng(parseFloat(lat),parseFloat(lng));

MYMAP.bounds.extend(point);

var marker = new google.maps.Marker({
position: point,
map: MYMAP.map,
icon: 'img/'+ico+'marker.png'
});

var infoWindow = new google.maps.InfoWindow();

var html='<div class="img"><img src="markers/'+photo+'.jpg"></div><div          class="txt"><p>'+name+'</p><br /><p>'+city+',<br />'+country+'</p><br /><div style="margin-top:-4px"><a target="" href="'+facebook+'"><img src="img/gosocial16/facebook.png"></a><a target="" href="'+twitter+'"><img src="img/gosocial16/twitter.png"></a><a target="" href="'+linkedin+'"><img src="img/gosocial16/linkedin.png"></a><a target="" href="'+email+'"><img style="margin-left:3px" src="img/gosocial16/email.png"></a></div></div>';

google.maps.event.addListener(MYMAP.map, 'zoom_changed', function() {
if (MYMAP.map.getZoom() < 2) MYMAP.map.setZoom(2);
});
google.maps.event.addListener(MYMAP.map, 'zoom_changed', function() {
if (MYMAP.map.getZoom() > 18) MYMAP.map.setZoom(18);
});

google.maps.event.addListener(marker, 'click', function() {

$("#close").click(function() {
infoWindow.close();
});

infoWindow.setContent(html);
infoWindow.setOptions({maxWidth:350});
infoWindow.open(MYMAP.map, marker);
});

MYMAP.map.fitBounds(MYMAP.bounds);
});
});
}

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:40:49.587

这是一个基于 Mike Williams 的 v2 教程的[示例](http://www.geocodezip.com/v3_MW_example_map3_clustered.html)，移植到 v3。

如果您查看[MarkerClusterer](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/examples.html)的文档，它包括以下示例：

```
var markers = [];
for (var i = 0; i < 100; i++) {
  var latLng = new google.maps.LatLng(data.photos[i].latitude,
      data.photos[i].longitude);
  var marker = new google.maps.Marker({'position': latLng});
  markers.push(marker);
}
var markerCluster = new MarkerClusterer(map, markers); 
```

如果您将其添加到现有循环中，您应该能够在创建标记变量后执行此操作：

```
 markers.push(marker); 
```

然后在您当前调用 fitBounds 的位置创建标记聚类器。你试过了吗，它没有用？

[基于您的代码的工作示例](http://www.geocodezip.com/v3_SO_jquery_markerclusterer.html)，根据上述建议添加 MarkerClusterer；使用标记聚类器的样本数据的重大修改，因为不能使用你的。

# .net - OpenTK 的 Vector2.Length 是 Vector2.LengthFast 的两倍

> ID：13424546
> 
> 赞同：5
> 
> 时间：2012-11-16T21:18:26.423
> 
> 标签：.net, xamarin.ios, opentk, sqrt

这些`OpenTK`库，以及 MonoTouch 和 MonoDroid，包含方法`LengthFast`，它应该在不使用的情况下计算向量长度的近似值`Math.Sqrt`（这似乎被称为慢）。`LengthFast`使用`MathHelper.InverseSqrtFast`，一个非常有趣的方法，它应该给出平方根的快速近似值（参见[http://www.opentk.com/files/doc/_math_helper_8cs_source.html](http://www.opentk.com/files/doc/_math_helper_8cs_source.html)的第 172 和 196 行）。

我创建了一个小基准，它调用两个计算`100'000'000`时间，向量长度在 1 到 100 之间。

**在 Windows 7 / Intel i7-2600 3.40 GHz 上，我得到：**

`Length`：`2947 ms`

`LengthFast`：`4754 ms`

**在带有 MonoTouch 的 iPad 3 上，我得到：**

`Length`：`51575 ms`

`LengthFast`：`41252 ms`

因此，`LengthFast`在 Intel CPU 上要慢得多，在 iPad 的 ARM 上要快一些。

**对此有何解释？**这是英特尔 CPU 能够“本机”计算平方根（不使用软件近似）的结果吗？不`LengthFast`应该总是更快，至少一点点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T12:32:37.133

所有`Math`成员都非常快。不要试图加速 .NET 数学代码。在 ARM 处理器上它可能会更快，因为缺少一些 X86/X86_64 命令，这些命令在 ARM 处理器上进行相同的实现是必需的，因此代码是不同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T21:30:11.737

如果您查看它的来源，它与[Quake 3](http://en.wikipedia.org/wiki/Fast_inverse_square_root#Overview_of_the_code)`LengthFast`中的基本相同。

该算法针对 x86 指令进行了优化，而不是针对 ARM 指令进行了优化。据记载，这种算法在 ARM 上实际上要慢一些：

[http://omcfadde.blogspot.com/2011/02/math-function-micro-optimization.html](http://omcfadde.blogspot.com/2011/02/math-function-micro-optimization.html)

> 很明显可以看出，这种微优化对于 x86 和 x86_64 来说是非常好的。不要在 ARM 上尝试；它比仅仅在 1.0 / sqrt(x) 上受到打击要慢得多

**编辑**

原来我是倒着读的……可能是 JIT 弄乱了你的时间。在进入定时循环之前尝试调用`Length`and`LengthFast`一次，以确保方法和`MathHelper`类都被初始化和 JITted。它不应该有那么大的不同，但它是一个起点。MonoTouch 没有 JIT，所以它仍然是一个因素。

# c# - C# XNA 可拖动用户界面

> ID：13424548
> 
> 赞同：1
> 
> 时间：2012-11-16T21:18:31.683
> 
> 标签：c#, xna

我创建了一个包含纹理、标题和矩形的 GuiWindow 类，以便我可以绘制纹理和标题。我一直在尝试使它可拖动，尽管我遇到了一些麻烦。最初我将 GuiWindow 的边界矩形锁定到鼠标位置：

```
if(bounds.contains(MouseHandle.Update()) && MouseHandle.Pressed()) //checks if the bounds rectangle contains the mouse rectangle and the mouse left button is pressed
{
    bounds.X = MouseHandle.Update().X;
    bounds.Y = MouseHandle.Update().Y;
} 
```

这将允许我拖动，尽管只能在一个方向上。然后我尝试了

```
if(bounds.contains(MouseHandle.Update()) && MouseHandle.Pressed())
{
    int offx = bounds.X - MouseHandle.Update().X;
    int offy = bounds.Y - MouseHandle.Update().Y;
    bounds.X = MouseHandle.Update().X + offx;
    bounds.Y = MouseHandle.Update().Y + offy;
} 
```

这一次，当我尝试拖动时，窗口只是静止不动。我很确定我有下拉的基本概念。难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T23:00:37.097

好吧，这是我在一些 XNA 应用程序中使用鼠标移动对象的一些代码。希望这可以帮助您解决问题。

```
//Fields
Texture2D object;
Vector2 object_position;
Rectangle collisionRectangle;
MouseState preMouse;
bool moving = false;
Vector2 mouseOffset;

//initialize fields in LoadContent method
protected override void LoadContent()
{
    object = Content.Load<Texture2D>("nameOfYourImage");
    object_position = new Vector2((graphics.PreferredBackBufferWidth - object.Width)/2, graphics.PreferredBackBufferHeight - object.Height - 60);
    collisionRectangle = new Rectangle((int)object_position.X, (int)object_position.Y, (int)object.Width, (int)object.Height);
}

//add code to Update method

public void MouseInput(MouseState mouse)
{
    if (collsionRectangle.Contains(mouse.X, mouse.Y) && //mouse is over the object
        //the user is clicking the left mousebutton
        mouse.LeftButton == ButtonState.Pressed && 
        //in the previous Update() call the left mousebutton was released, 
        //meaning the user has just clicked the object
        preMouse.LeftButton == ButtonState.Released)
    {
        moving = true;

        //stores what the objects position should be offset by so it doesn't
        //snap to the mouse's position every time you click on it
        mouseOffset = new Vector2(Position.X - mouse.X, Position.Y - mouse.Y);
    }

    if (moving)
    {
        //if the player stops holding down the mousebutton i.e stops moving the object
        if (mouse.LeftButton == ButtonState.Released)  
            moving = false;

        //modifies the position
        Position.X = mouse.X + mouseOffset.X;
        Position.Y = mouse.Y + mouseOffset.Y;

        //prevents object from going off the screen and getting lost
        if (Convert.ToInt32(object_position.X) < 0)
            object_position.X = 0;
        if (object_position.X + object.Width > graphics.PreferredBackBufferWidth)
            object_position.X = graphics.PreferredBackBufferWidth - object.Width;
        if (Convert.ToInt32(object_position.Y) < 0)
            object_position.Y = 0;
        if (object_position.Y + object.Height > graphics.PreferredBackBufferHeight)
            object_position.Y = graphics.PreferredBackBufferHeight - object.Height;

        //updates the collision rectangle
        collisionRectangle = new Rectangle(Postion.X, Position.Y, WIDTH, HEIGHT);
    }

    preMouse = mouse; //stores the current mouseState for use in the next Update() call
} 
```

这将使您能够用鼠标拖动对象。现在当然这不会直接复制到您的应用程序，因为我不知道您的 GuiWindow 的代码如何，但它应该很容易转换为您的需求。希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T21:23:06.167

这是我的窗口基类的一部分，它在 XNA 中处理移动和调整大小。我对它在 VB.NET 中的应用感到满意，但您应该能够轻松地对其进行转换。您可能无法直接使用其中的任何一个，但希望它能为您指明正确的方向。

```
 Public Overrides Sub OnMouseDown(e As Ui.MouseEventArgs)
        MyBase.OnMouseDown(e)

        Dim localLoc As Point = ScreenToWindow(e.Location)
        'If Movable AndAlso localLoc.Y >= 0 AndAlso localLoc.Y <= mBackground.TopMargin Then
        If Closable AndAlso Me.CloseButtonBounds.Contains(e.Location) Then
            Me.OnCloseButton()
        ElseIf Movable AndAlso Me.DragArea.Contains(e.Location) Then
            mMouseAnchor = localLoc
            mDragType = DragType.Move
            ' ElseIf Resizable AndAlso localLoc.X > Me.Bounds.Width - mBackground.RightMargin AndAlso localLoc.Y > Me.Bounds.Height - mBackground.BottomMargin Then
        ElseIf Resizable AndAlso Me.ResizeArea.Contains(e.Location) Then
            mMouseAnchor = New Point(Me.Bounds.Right - e.Location.X, Me.Bounds.Bottom - e.Location.Y)
            mDragType = DragType.Resize
        End If
    End Sub

    Public Overrides Sub OnMouseUp(e As Ui.MouseEventArgs)
        MyBase.OnMouseUp(e)
        mDragType = DragType.None
    End Sub

    Public Overrides Sub OnMouseMove(e As Ui.MouseEventArgs)
        MyBase.OnMouseMove(e)

        If mDragType = DragType.Move Then
            Dim change As New Vector2((e.Location.X - mMouseAnchor.X) - Me.X, (e.Location.Y - mMouseAnchor.Y) - Me.Y)
            Me.Bounds = New Rectangle(e.Location.X - mMouseAnchor.X,
                                      e.Location.Y - mMouseAnchor.Y,
                                      Me.Bounds.Width,
                                      Me.Bounds.Height)
            UpdateControlLocations(change)
        ElseIf mResizable AndAlso mDragType = DragType.Resize Then
            Me.Bounds = New Rectangle(Me.Bounds.X,
                                      Me.Bounds.Y,
                                      Me.Bounds.Width - (Me.Bounds.Right - e.Location.X) + mMouseAnchor.X,
                                      Me.Bounds.Height - (Me.Bounds.Bottom - e.Location.Y) + mMouseAnchor.Y)
            System.Windows.Forms.Cursor.Current = System.Windows.Forms.Cursors.SizeNWSE
        ElseIf mDragType = DragType.None Then
            If mResizable AndAlso Me.ResizeArea.Contains(e.Location) Then
                System.Windows.Forms.Cursor.Current = System.Windows.Forms.Cursors.SizeNWSE
            Else
                System.Windows.Forms.Cursor.Current = System.Windows.Forms.Cursors.Default
            End If
        End If
    End Sub 
```

# performance - 剑道 - 网格 - 删除多行

> ID：13424551
> 
> 赞同：1
> 
> 时间：2012-11-16T21:19:06.193
> 
> 标签：performance, grid, kendo-ui

我有以下代码删除选中的行（每行都有一个复选框，我在工具栏中有一个过滤器按钮（和其他按钮））。

```
var grid = $("#resultsGrid").data("kendoGrid");
grid.tbody.find("input:checked").closest("tr").each( function(index) {
    grid.removeRow($(this));
}); 
```

但是，当删除超过 20 行时，性能开始成为问题。但是，剑道过滤（删除）20 行或更多行的速度要快得多。剑道过滤如何从视图中删除多行？还是有其他更好的方法从网格中删除多行？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T23:21:15.050

** 将 Fiddle 更新到新位置 - 与之前相同的代码 **

尝试直接处理数据。将复选框连接到行的 ID 并对其进行过滤。

我链接了一个删除数组元素然后重新创建网格的小提琴。网格顶部的 2 个文本框捕获您要删除的 Id 范围（这将与您的 checkboxIds 的数组相同）。然后我循环浏览那些“删除 ID”，将它们从数据数组中删除并重新制作网格。

我稍微修改了以前的小提琴，这就是我重新创建网格而不是直接处理 DataSource 对象的原因。但我希望你能明白我在做什么。

在这个例子中我有 1000 条记录（只有 3 列），但它会很快删除 950 条记录。

[Fiddle-从数据数组中删除](http://jsfiddle.net/vtocorleone/pw6D8/3/)

如果您需要 KendoUI DataSource 对象的示例，请告诉我。

我在下面包含了这段代码，因为没有它 StackOverflow 不会让我发帖。

```
function filterData() {

    var val1 = $("#val1").val();
    var val2 = $("#val2").val();

    var removeIndexes = new Array();

    for (var i = val1; i <= val2; i++) {
        removeIndexes.push(i);
    }    

    $(removeIndexes).each(function(removeIndex) {
        var removeItemId = this;
        $(randomData).each(function(dataIndex) {
            var continueLoop = true;
            if (this.Id == removeItemId) {
                randomData.splice(dataIndex, 1);
                continueLoop = false;
            }
            return continueLoop;
        });
    });

    createGrid();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-19T08:57:24.553

您应该使用批量更新：

```
$("#resultsGrid").kendoGrid({
    dataSource: {
        batch: true,
        ...
    }, ...});

var grid = $("#resultsGrid").data("kendoGrid");
grid.tbody.find("input:checked").closest("tr").each( function() {
    var dataItem = grid.dataItem(this);
    grid.dataSource.remove(dataItem);
});
grid.dataSource.sync(); // this applies batched changes 
```

# c# - 我需要帮助尝试使用 LINQ 从数据表访问的行

> ID：13424553
> 
> 赞同：0
> 
> 时间：2012-11-16T21:19:14.770
> 
> 标签：c#, linq, datatable, linq-to-objects

我正在尝试使用 LINQ 从数据表中获取一行。它似乎得到了记录，但我无法使用它。不知道我做错了什么。我的 LINQ 查询如下：

```
IEnumerable<DataRow> query = 
      from myRow in dataTable.AsEnumerable()
      where myRow.Field<int>("AM2MIN") <= Convert.ToInt32(minimumValue) &&
            myRow.Field<int>("AM2MAX") >= Convert.ToInt32(minimumValue)
      select myRow; 
```

当我执行以下操作以查看是否存在任何记录时，它会出错。

```
if (query.Any())
{

} 
```

`InvalidCastException`似乎是一致的错误。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:24:16.957

看起来您的某个字段不包含整数值。

验证`Data Type`这些列。还要验证它们是否允许 Null。如果数据类型为`int`，但允许为空，则转换为可为空的 int:`myRow.Field<int?>("AM2MIN")`并验证它是否具有值。

# opengl - 如何在使用 GL_LINE_STRIP opengl 绘制的形状内着色

> ID：13424554
> 
> 赞同：1
> 
> 时间：2012-11-16T21:19:14.793
> 
> 标签：opengl, bezier

我使用 GL_LINE_STRIP 使用贝塞尔曲线算法绘制了 2 个形状。我的形状喜欢月亮，我想为两条曲线之间的空间着色。我使用了 GL_POLYGON 但它没有产生我想要的结果。

这是我的代码：

```
float Points[4][3] = {
{275,356,0},
{ 395,353,0 },
{  435,325,0 },
{ 476,232,0 }
                     };
float SecendPoints[4][3] = {
{ 476,232,0},
{441,331,0},
{369,372,0},
{283,388,0}
                     };
void init()
    {
  glClearColor(0.0,0.0,0.0,0.0);
  glMatrixMode(GL_PROJECTION);
  gluOrtho2D(0.0,640,0.0,480.0);

    }
void Display(void)
    {
  int segment = 20;

   // clear the screen & depth buffer
   glClear(GL_DEPTH_BUFFER_BIT|GL_COLOR_BUFFER_BIT);

   glColor3f(1,1,1);

  glColor3f(1,0,1);

  // we will draw lots of little lines to make our curve

  glBegin(GL_LINE_STRIP);

for(int i=0;i!=segment;++i) {

    // use the parametric time value 0 to 1
    float t = (float)i/(segment-1);

    // nice to pre-calculate 1.0f-t because we will need it frequently
    float it = 1.0f-t;

    // calculate blending functions
    float b0 = t*t*t;
    float b1 = 3*t*t*it;
    float b2 = 3*t*it*it;
    float b3 =  it*it*it;

    // calculate the x,y and z of the curve point by summing
    // the Control vertices weighted by their respective blending
    // functions
    //
    float x = b0*Points[0][0] +
              b1*Points[1][0] +
              b2*Points[2][0] +
              b3*Points[3][0] ;

    float y = b0*Points[0][1] +
              b1*Points[1][1] +
              b2*Points[2][1] +
              b3*Points[3][1] ;

    float z = b0*Points[0][2] +
              b1*Points[1][2] +
              b2*Points[2][2] +
              b3*Points[3][2] ;

    // specify the point
    glVertex3f( x,y,z );
}

for(int i=0;i!=segment;++i) {

    // use the parametric time value 0 to 1
    float t = (float)i/(segment-1);

    // nice to pre-calculate 1.0f-t because we will need it frequently
    float it = 1.0f-t;

    // calculate blending functions
    float b0 = t*t*t;
    float b1 = 3*t*t*it;
    float b2 = 3*t*it*it;
    float b3 =  it*it*it;

    // calculate the x,y and z of the curve point by summing
    // the Control vertices weighted by their respective blending
    // functions
    //
    float x = b0*SecendPoints[0][0] +
              b1*SecendPoints[1][0] +
              b2*SecendPoints[2][0] +
              b3*SecendPoints[3][0] ;

    float y = b0*SecendPoints[0][1] +
              b1*SecendPoints[1][1] +
              b2*SecendPoints[2][1] +
              b3*SecendPoints[3][1] ;

    float z = b0*SecendPoints[0][2] +
              b1*SecendPoints[1][2] +
              b2*SecendPoints[2][2] +
              b3*SecendPoints[3][2] ;

    // specify the point
    glVertex3f( x,y,z );
}
glVertex3f( 476,232,0 );
glEnd();
glFlush();
} 
```

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T22:59:50.390

`GL_POLYGON`仅适用于凸多边形。

[将曲线之间的区域细分为三角形并渲染它们。](http://www.songho.ca/opengl/gl_tessellation.html)

# android - 一遍又一遍地点击 Home 按钮时，AsyncTask 会失步

> ID：13424556
> 
> 赞同：1
> 
> 时间：2012-11-16T21:19:18.783
> 
> 标签：android, concurrency, android-asynctask, runtimeexception

我有一个 AsyncTask 可以进行大量 JSON 计算。

```
public class InitializationTask extends AsyncTask<Void, Void, InitializationResult> {
    private ProcessController processController = new ProcessController();
    private ProgressDialog progressDialog;
    private MainActivity mainActivity;

    public InitializationTask(MainActivity mainActivity) {
        this.mainActivity = mainActivity;
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();

        progressDialog = new ProgressDialog(mainActivity);
        progressDialog.setMessage("Die Daten werden aufbereitet.\nBitte warten...");
        progressDialog.setIndeterminate(true); //means that the "loading amount" is not measured.
        progressDialog.setCancelable(false);
        progressDialog.show();
    };

    @Override
    protected InitializationResult doInBackground(Void... params) {
        return processController.initializeData();
    }

    @Override
    protected void onPostExecute(InitializationResult result) {
        super.onPostExecute(result);

        progressDialog.dismiss();

        if (result.isValid())  {
            mainActivity.finalizeSetup();
        }
        else  {
            AlertDialog.Builder dialog = new AlertDialog.Builder(mainActivity);
            dialog.setTitle("Initialisierungsfehler");
            dialog.setMessage(result.getReason());
            dialog.setPositiveButton("Ok",
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            dialog.cancel();

                            mainActivity.finish();
                        }
                    });

            dialog.show();
        }
    }
} 
```

processController.initializeData() 运行大约 20 秒。这一切都有效。它甚至可以在我安装应用程序并在应用程序初始化时按主页按钮时工作。AsyncTask 在后台工作。**当我在 AsyncTask 完成后**再次从 Android 设备重新启动应用程序时，应用程序仍然可以工作。
但是应用程序无法处理这种用例：当我部署应用程序时（或在没有数据初始化时启动它），因此初始化数据确实需要大约 20 秒，而当我在初始化时回家关闭应用程序时（AsyncTask ) 在后台运行并再次启动应用程序，它会导致 RuntimExceptions 等意外行为。设备似乎要加载应用程序两次，但都无法成功启动。如何处理？
我考虑过检查 MainActivity 中是否有正在运行的 AsyncTask 以避免再次启动它：

```
private InitializationTask initializationTask = new InitializationTask(this);

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    if (!AsyncTask.Status.RUNNING.equals(initializationTask.getStatus()))  {
        initializationTask.execute((Void[])null);
    }

    initializeMap();
} 
```

不幸的是，这并没有做任何事情。此外，我不确定这样的用例是否可行，因为当我两次启动同一个应用程序时，它们无法“共享”AsyncTask。我应该以某种方式避免两次启动应用程序吗？我不确定我有什么选择？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T14:04:13.480

我通常会更直言不讳地这样做。`AsyncTask`当我不使用它时，我将引用设置为 null。当`onClick`火灾发生时，我检查它是否不为空，这意味着我启动了它。如果它为空，我会在`AsyncTask`那里创建并执行一个新的。它速度很快，而且足够干净。这种方法的一个好处是 an`AsyncTask` *无论如何只能执行一次*，因此它非常适合。最后，如果您打算保持不变`onPostExecute`，您可以再次将引用设置回。`null``Activity`

在完善 AsyncTask 流程时，请确保它也能在[方向更改后继续存在](http://evancharlton.com/thoughts/rotating-async-tasks)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T17:40:30.417

我找到了解决方案：这实际上不是 AsyncTask 问题。问题是我在 processController.initializeData() 中调用的 JSONParser 解析方法（完成大部分工作）没有同步。

# java - 如何使用 JPA 加入列表

> ID：13424560
> 
> 赞同：0
> 
> 时间：2012-11-16T21:19:28.177
> 
> 标签：java, jpa-2.0, ejb-3.0

假设您有两个实体 Cats 和 Licks。每个都有另一个列表。给定另一个的 id，你如何编写 JPA 来找到一个。

我的问题是：为什么不让这更简单呢？这个界面令人困惑......但无论如何，这就是你如何做到的。

```
@PersistenceContext
protected EntityManager em;

@Test
public void testFindCatsByLickId() throws Exception
{
    CriteriaBuilder cb = em.getCriteriaBuilder();
    CriteriaQuery cq = cb.createQuery();

    Root<Cat> cats = cq.from( Cat.class );
    Root<Lick> licks = cq.from( Lick.class );
    ListJoin<Cat, Lick> joinCatL = cats.join(Cat_.lickList);

   // just creating the following ListJoin object will cause this query to fail!
   // ListJoin<Lick, Cat> joinLCat = lick.join(Lick_.catList);

    Predicate p = cb.and(  
                           cb.equal(licks.get(Lick_.lickId), new Integer(2))
                         , cb.equal(licks, joinCatL)
                        );

    cq.select(cats).where(p);

 TypedQuery query = em.createQuery(cq);

    List<Cat> list = query.getResultList();

    assertList( list );
    assertTrue(null != list && ! list.isEmpty() );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:52:34.037

当您需要从一组可选的搜索条件动态组合查询时，条件 API 很有用。在这种情况下，使用 JPQL 会产生更简单、更易读的代码：

```
String jpql = "select cat from Lick lick inner joinlick.cats cat where lick.id = :lickId";
List<Cat> cats = em.createQuery(jpql, Cat.class).setParameter("lickId", 2)
                   .getResultList(); 
```

甚至更简单，根本没有任何查询：

```
Lick lick = em.get(Lick.class, 2);
List<Cat> cats = lick.getCats(); 
```

# php - Zend Framework 和 phpunit 奇怪的错误

> ID：13424563
> 
> 赞同：1
> 
> 时间：2012-11-16T21:19:41.007
> 
> 标签：php, unit-testing, zend-framework

> **可能重复：**
> [Zend - 找不到 PHPUnit/framework.php](https://stackoverflow.com/questions/8215580/zend-cannot-find-phpunit-framework-php)

我收到一些奇怪的警告和错误，我不知道为什么，也许你也遇到了这个问题并找到了解决方案。

**我正在测试一个模型**

```
class UsersTest extends PHPUNit_Framework_TestCase {
    public function testCanCheckUser(){

        $user = Users::getInstance();
        $userNotFound = true;
        $this->assertFalse($userNotFound);
    } } 
```

**所以这是我得到的错误：**

```
PHP Strict Standards:  Creating default object from empty value in C:\Users\Lili
\Dropbox\www\_playground\myApp\application\Bootstrap.php on line 207
PHPUnit 3.7.9 by Sebastian Bergmann.

Configuration read from C:\Users\Lili\Dropbox\www\_playground\myApp\tests\phpuni
t.xml

←[41;37mF←[0m

Time: 0 seconds, Memory: 5.50Mb

There was 1 failure:

1) UsersTest::testCanCheckUser
PHP Warning:  include_once(PHP\Invoker.php): failed to open stream: No such file
 or directory in C:\Users\Lili\Dropbox\www\_playground\myApp\Zend\Loader.php on
line 146
PHP Warning:  include_once(): Failed opening 'PHP\Invoker.php' for inclusion (in
clude_path='C:\xampp\php\PEAR\PHPUnit;C:\Users\Lili\Dropbox\www\_playground\opun
y\application/../library;C:\Users\Lili\Dropbox\www\_playground\myApp\application
;C:\Users\Lili\Dropbox\www\_playground\myApp\application/models;C:\Users\Lili\Dr
opbox\www\_playground\myApp\application/../;.;C:\xampp\php\PEAR') in C:\Users\Li
li\Dropbox\www\_playground\myApp\Zend\Loader.php on line 146
PHP Warning:  include_once(PHPUnit\Extensions\SeleniumTestCase.php): failed to o
pen stream: No such file or directory in C:\Users\Lili\Dropbox\www\_playground\o
puny\Zend\Loader.php on line 146
PHP Warning:  include_once(): Failed opening 'PHPUnit\Extensions\SeleniumTestCas
e.php' for inclusion (include_path='C:\xampp\php\PEAR\PHPUnit;C:\Users\Lili\Drop
box\www\_playground\myApp\application/../library;C:\Users\Lili\Dropbox\www\_play
ground\myApp\application;C:\Users\Lili\Dropbox\www\_playground\myApp\application
/models;C:\Users\Lili\Dropbox\www\_playground\myApp\application/../;.;C:\xampp\p
hp\PEAR') in C:\Users\Lili\Dropbox\www\_playground\myApp\Zend\Loader.php on line
 146
PHP Warning:  include_once(PHPUnit\Extensions\Story\TestCase.php): failed to ope
n stream: No such file or directory in C:\Users\Lili\Dropbox\www\_playground\opu
ny\Zend\Loader.php on line 146
PHP Warning:  include_once(): Failed opening 'PHPUnit\Extensions\Story\TestCase.
php' for inclusion (include_path='C:\xampp\php\PEAR\PHPUnit;C:\Users\Lili\Dropbo
x\www\_playground\myApp\application/../library;C:\Users\Lili\Dropbox\www\_playgr
ound\myApp\application;C:\Users\Lili\Dropbox\www\_playground\myApp\application/m
odels;C:\Users\Lili\Dropbox\www\_playground\myApp\application/../;.;C:\xampp\php
\PEAR') in C:\Users\Lili\Dropbox\www\_playground\myApp\Zend\Loader.php on line 1
46
Failed asserting that true is false.

C:\Users\Lili\Dropbox\www\_playground\myApp\tests\application\models\UsersTest.p
hp:13

←[37;41m←[2KFAILURES!
←[0m←[37;41m←[2KTests: 1, Assertions: 1, Failures: 1.
←[0m←[2K 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:38:27.780

这是解决方案：[Zend - 找不到 PHPUnit/framework.php](https://stackoverflow.com/questions/8215580/zend-cannot-find-phpunit-framework-php)

或者只需复制/粘贴警告所需的文件，它就可以完成这项工作

# c++ - 返回静态局部变量作为引用

> ID：13424564
> 
> 赞同：15
> 
> 时间：2012-11-16T21:19:52.963
> 
> 标签：c++, memory-management, static, local

当作为引用返回并作为指针直接传递给另一个函数时，静态变量会发生什么？显然，该变量在函数返回后仍然存在，但是关于整个概念的某些事情让我感到困扰。数据序列上被静态变量占用的内存在哪一点被释放？当我不再需要它时，运行时是否会神奇地注意到它，比如某种垃圾收集？

举个例子：

```
SDL_Rect* XSDL_RectConstr(int x, int y, int w, int h)
{
    static SDL_Rect rect;
    rect.x = x;
    rect.y = y;
    rect.w = w;
    rect.h = h;

    return &rect;
}

void mainLoop()
{
    while(isRunning)
    {
        pollEvents();
        SDL_BlitSurface(someSurface, XSDL_RectConstr(0, 0, 100, 100), screen, NULL);
        SDL_Flip(screen);
    }
} 
```

`rect`SDL_BlitSurface() 返回后会发生什么？我看不到它什么时候会被释放。那这不是某种内存泄漏吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-16T21:22:26.190

> 数据序列上被静态变量占用的内存在哪一点被释放？当我不再需要它时，运行时是否会神奇地注意到它，比如某种垃圾收集？

它将在程序退出时被释放，而不是更早。此外，它保证会调用析构函数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-16T21:27:05.233

没有内存泄漏，但这是一个*非常非常糟糕的主意*。假设你写了一些这样的代码

```
SDL_someFunction(
    XSDL_RectConstr(0, 0, 100, 100), 
    XSDL_RectConstr(20, 20, 30, 30)
); 
```

因为你只有一个静态矩形，`SDL_someFunction`所以不会得到它看起来会得到的不同矩形。相反，您将获得两次相同的矩形。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-16T21:23:05.160

`rect`从 返回时不会被释放`SDL_BlitSurface`，但它也不会是内存泄漏：它在静态存储中，所以没有什么可以“泄漏”的。只要您的程序正在运行，该对象就会一直保留在内存中。

当您开始多线程时，最大的缺点会发生：您的静态变量存在被多个线程同时修改的风险，这是您宁愿避免的。

[静态存储持续时间（在块范围或命名空间范围声明）的初始化对象的析构函数作为从 main 返回的结果和调用 exit 的结果被调用。](https://stackoverflow.com/a/2204628/335858)

# java - 在 jython 中使用枚举

> ID：13424565
> 
> 赞同：5
> 
> 时间：2012-11-16T21:19:53.980
> 
> 标签：java, python, jython

尝试在 Jython 中使用 Java 枚举，但我不知道如何使用它们。

导入时，我看到列出的枚举是这样的，`BotInterface$MOVE`所以我已经放下了

```
from amazebot2012.BotInterface import MOVE 
```

在 Java 中，我通常会将其用作

```
bot.move(MOVE.FORWARD);
bot.move(MOVE.BACKWARD); 
```

导入后的 Jython 等效项是什么？

尝试`bot.move(MOVE.FORWARD)`给了我错误：

> 来自导入的未定义变量：FORWARD

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:05:28.067

您的导入和参考似乎正确。

如果您使用的是 PyDev/Anapta，我怀疑这是您的编辑环境中的一个错误：

[http://jira.appcelerator.org/browse/APSTUD-7502](http://jira.appcelerator.org/browse/APSTUD-7502)

# visual-studio-2012 - Visual Studio 2012 + SQL Server 2012 Express 表已删除

> ID：13424567
> 
> 赞同：1
> 
> 时间：2012-11-16T21:19:57.213
> 
> 标签：visual-studio-2012, sql-server-2012-express

我有一个大问题。我正在运行 Visual Studio 2012 和 SQL Server 2012 Express。

我在 VS 中成功连接到 SQL Server，然后继续创建表。我创建表格并单击`Update`按钮。现在，在服务器资源管理器中，该表显示了它应有的所有组件，但是，在我关闭计算机后这些表被删除（如果我只是关闭 VS 并重新打开它，表就在那里）所以我必须重新- 一直创建它们。

有人知道这件事吗？每次关闭计算机后都必须重新创建表，这非常令人沮丧。

# css - 拍摄快照 - 有没有办法让 drawImage 和 toDataURL 保留过滤器？

> ID：13424570
> 
> 赞同：2
> 
> 时间：2012-11-16T21:20:07.300
> 
> 标签：css, html5-video, html5-canvas

我有一个视频元素，其中应用了用户选择的过滤器。当我尝试对其进行快照时，应用于视频的过滤器不会应用于快照：

```
// live is a video element and snapshot is a canvas
function onTakeSnapshot() {

    // Make the canvas the same size as the video
    snapshot.width = live.clientWidth;
    snapshot.height = live.clientHeight;
    // Draw a frame of the live video onto the canvas
    var c = snapshot.getContext("2d");
    c.drawImage(live, 0, 0, snapshot.width, snapshot.height);
    snapshot.style.opacity = 1;
} 
```

例如，我意识到我可以对快照应用相同的过滤器，`snapshot.className='';snapshot.classList.add('grayscale');`但是在将其保存到磁盘时遇到了同样的问题，即`var img = snapshot.toDataURL();`生成的图像没有应用任何过滤器。我目前使用单独操作图像，`getImageData()\putImageData()`但结果通常与画布+过滤器不同。我是画布的新手，想知道是否有一种方法可以绘制和保存已应用过滤器的图像。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T13:17:07.430

无法在您的问题所暗示的浏览器中截取网页的屏幕截图。

`<canvas>`如果您需要保存结果，我建议您推送所有过滤代码。

# android - 适用于 Android 的 Mono：GCMBaseIntentService 在哪里？

> ID：13424573
> 
> 赞同：4
> 
> 时间：2012-11-16T21:20:15.333
> 
> 标签：android, mono, xamarin.android

我正在尝试将 GCM 与 Mono for Android 一起使用。

根据[Google Cloud Messaging](http://developer.android.com/guide/google/gcm/gs.html)入门指南，我应该继承`com.google.android.gcm.GCMBaseIntentService`.

但我在 Mono for Android 中找不到这个。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T01:01:01.823

您需要使用第三方库。我已经使用 PushSharp 成功完成了这项工作。关于如何开始的说明可以在这个页面上找到

[https://github.com/Redth/PushSharp#pushsharpclientsamplemonoforandroid-](https://github.com/Redth/PushSharp#pushsharpclientsamplemonoforandroid-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T16:33:00.017

为了扩展[这个答案](https://stackoverflow.com/a/13426602/1796714)，**目前 Mono for Android 中没有官方的 GCM 库。**GCM 库是 Android SDK 中的一个 Extra，该 Extra 在 Mono for Android 中没有正式版本。

既然 C2DM 已被弃用，这怎么可能？两个原因：

首先，**有一个用于 Android 的 Mono的*非官方***GCM 库。它是[Push#](https://github.com/Redth/PushSharp)的一部分，包括Java GCM 库附带的`GCMBaseIntentService`和的端口。`GCMRegistrar`这些类是 Android SDK 版本的直接移植，因此如果您使用它们，您可以按照 GCM 入门指南进行操作。

其次，**即使没有实际的 GCM 库，GCM 也是可行的**。在幕后，它非常像 C2DM，只是对使用的意图和权限进行了一些修改。Android SDK 中的 GCM 库只是处理 GCM 注册和 GCM 消息的一堆助手。

# wpf - 如何在 Silverlight 5 Out of Browser 应用程序中启动应用程序并从中获取结果

> ID：13424575
> 
> 赞同：2
> 
> 时间：2012-11-16T21:20:17.007
> 
> 标签：wpf, com, silverlight-5.0, silverlight-oob

让我对我的场景进行一个完整的解释：

我们需要在我们的应用程序中使用签名板，该应用程序是在 Silverlight 5 中开发的，在浏览器外模式下，具有更高的信任度，问题始于设备制造商不提供任何类型的 API 的事实或用于 Silverlight 的 SDK，它们的 .NET 程序集实际上是用于 WinForms 应用程序的，但通过将控件放在[WindowsFormHost](http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.windowsformshost.aspx)中，它仍然可以在 WPF 中使用。

我一直在寻找选项，到目前为止，我们有 2 个备选方案，这两个备选方案都涉及创建一个小型 WPF 应用程序来使用控件并在那里捕获签名，从 Silverlight 调用它：

1.  创建一个“侦听器”，检查将签名保存为图像的文件夹并将其发送到 silverlight 应用程序。
2.  让 Silverlight 应用程序自己获取文件，用户必须为此单击一个按钮。

我宁愿通过从 WPF 应用程序本身检索结果来做到这一点，我尝试使用 COM 来做到这一点，但做不到。

我可以一次做其中一件事情（启动或从另一个程序集获取结果），但不能同时做。

我按照这篇文章[在 Silverlight 中使用 COM，](http://www.c-sharpcorner.com/uploadfile/dbd951/how-to-use-com-in-silverlight-oob-application/)这篇文章[给程序集起一个强名称](http://www.codeguru.com/csharp/.net/net_general/article.php/c4643/Giving-a-NET-Assembly-a-Strong-Name.htm)，以及[使用 COM 互操作性启动另一个应用程序](http://www.devcurry.com/2011/07/silverlight-40-open-exe-files-using-com.html)。

WPF 应用程序按照上面链接中的描述启动（使用 WScript.Shell Run 方法），我在同一个 .exe 文件中有以下类

```
namespace WpfSignatureCapture
{
  [ProgId("WpfSignatureCapture")]
  [ClassInterface(ClassInterfaceType.AutoDual)]
  static public class ImageExport
  {
    private static byte[] image;
    public static byte[] Image { get; set; }

    [ComVisible(true)]
    public static byte[] ImageAsByteArray()
    {
        return image;
    }
  }
} 
```

作为参考，在捕获签名后，用户应该单击一个按钮将其保存为图像，执行下一个方法：

```
 private void SaveToImage_Click(object sender, RoutedEventArgs e)
    {
        var img = sigPlusNET.GetSigImage();
        var ms = new MemoryStream();
        img.Save(ms, System.Drawing.Imaging.ImageFormat.Bmp);
        byte[] array = ms.ToArray();

        ImageExport.Image = array;
    } 
```

当我尝试从仍在运行的 WPF 应用程序中获取该字节数组时，即使我签署并注册了 WPF 应用程序的 exe，似乎也无法找到 ProgId。

这就是我试图得到它的方式：

```
 private void GetSignatureClick(object sender, RoutedEventArgs e)
    {
        byte[] image;

        if (Application.Current.HasElevatedPermissions && AutomationFactory.IsAvailable)
        {
            dynamic getImage = AutomationFactory.GetObject("WpfSignatureCapture");

            image = getImage.ImageAsByteArray();
            var file = new FileStream(@"C:\signature.bmp", FileMode.Create);
            file.Write(image, 0, image.Length);
            file.Flush();
            file.Close();
        }
    } 
```

这是我得到的错误：

![在此处输入图像描述](../Images/91815f25ca75d79a5629e691abc75508.png)

所以我有三个问题：

1.  我正在尝试做的事情可能吗？
2.  我应该采取什么方法才能使它起作用？
3.  有没有其他更简单/更有效的方法来做到这一点？如果是这样，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:32:57.017

在 Silverlight 应用程序之间，我建议使用本地进程间通信 - 请参阅[http://msdn.microsoft.com/en-us/library/dd833063%28v=VS.95%29.aspx](http://msdn.microsoft.com/en-us/library/dd833063%28v=VS.95%29.aspx) - 但它可能不起作用在 Silverlight 和 WPF 之间。

因此，剩下的选择是拥有一个两个应用程序都知道的文件/目录，并且由应用程序轮询或监视更改 - 请参阅[http://msdn.microsoft.com/en-us/library/system.io .filesystemwatcher%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher%28v=vs.110%29.aspx)用于监控。

# php - 让 Javascript True/False 测验在 WordPress 网站上运行

> ID：13424576
> 
> 赞同：2
> 
> 时间：2012-11-16T21:20:25.147
> 
> 标签：php, javascript, jquery, wordpress

我正在为客户将静态 HTML 网站转换为 WordPress。在他们现有的网站上，他们有这个测验[http://www.virginiauranium.com/quiz](http://www.virginiauranium.com/quiz)。我已经将所有内容从他们的原始站点复制到 WordPress 安装，但是正如您在回答问题时所看到的那样，在问题 2 之后它会将您踢回第一个问题[http://www.virginiauranium.com/wp/quiz/](http://www.virginiauranium.com/wp/quiz/)

我完全被这个难住了，希望这里有人能给我一些指导。我将包括所有相关的代码。

模板：

```
<?php
require_once( ABSPATH . 'wp-content/themes/virginiauranium/includes/quiz.questions.php');

$question = $questions[$currQuestion-1];
?>

<div id="body" class="quiz">
    <h1>Uranium 101 <em>Would you pass? Take the quiz!</em></h1>
    <hr />

    <div class="quiz_header">
        <?php if($currQuestion == sizeof($questions)) { ?>
            <h4>Final Score: <?=$numCorrect?> out of <?=sizeof($questions)-1?></h4>
        <?php } else { ?>
            <h4>Question <?=$currQuestion?> of <?=sizeof($questions)-1?></h4>
            <a href="http://www.virginiauranium.com/wp/quiz" class="quiz_next">Next</a>
        <?php } ?>
    </div>

    <div class="quiz_body">
        <?php if($question['image'] != "") { ?>
        <p class="alignright<?=(($currQuestion == 7) ? " nomargin" : "")?>">
            <img src="<?php bloginfo('stylesheet_directory'); ?>/images/quiz/<?=$question['image']?>" alt="" /><br />
            <span class="caption"><?=$question['caption']?></span>
        </p>
        <?php } ?>

        <div class="question"><?=$question['question']?></div>

        <?php if($currQuestion < sizeof($questions)) { ?>
        <div class="quiz_buttons">
            <a href="javascript:void(0);" class="quiz_button_true">True</a>
            <a href="javascript:void(0);" class="quiz_button_false">False</a>
        </div>

        <div class="answer">
            <p><strong><?=ucfirst($question['shortanswer'])?>.</strong></p>
            <p><?=$question['answer']?></p>
            <span class="hide"><?=$question['shortanswer']?></span>
        </div>
        <?php } ?>
    </div>
    <input type="hidden" name="currentQuestion" value="<?=$currQuestion?>">
</div>
    </div><!-- #main .wrapper -->
    <footer id="colophon" role="contentinfo">
        <div class="site-info">
            <p>Virginia Uranium, Inc., P.O. Box 399, 231 Woodlawn Heights, Chatham, VA 24531 USA. Tel: 434.432.1065 Copyright &copy; <?php echo the_date('Y'); ?> Virginia Uranium, Inc. All rights reserved.</p>
        </div><!-- .site-info -->
    </footer><!-- #colophon -->
</div><!-- #page -->
<?php wp_reset_query(); ?>
<?php wp_footer(); ?>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="<?php bloginfo('stylesheet_directory'); ?>/js/jquery.cycle.js"></script>
<script type="text/javascript" src="<?php bloginfo('stylesheet_directory'); ?>/js/sitenew.js"></script>
</body>
</html> 
```

quiz.questions.php

```
<?php
$questions = array(
    array(
        "question" => "Uranium is a common element which occurs in the soil of most backyards, most rocks, and seawater.", 
        "answer" => "Uranium is found nearly everywhere in small concentrations. Although used primarily as fuel for nuclear power plants, uranium is also used for weights in airplanes, military armor, and various advanced medical procedures and treatments.", 
        "shortanswer" => "true", 
        "image" => "Q1---core-samples.jpg",
        "caption" => "Ore samples from Coles Hill"
    ), array(
        "question" => "It is standard practice to install waste-water treatment plants at uranium mines and mills today.", 
        "answer" => "If Virginia Uranium’s enterprise moves forward, the company will build a wastewater treatment plant at the mine/mill site.  Water used in the mill process will be recycled and re-used in the mill process. Any water used or collected on site will be cleaned to standards set by the Environmental Protection Agency before it is released on site.  The treatment plant will be capable of cleaning water to E.P.A. drinking-water standards.", 
        "shortanswer" => "true", 
        "image" => "Q2---Ranger2005.jpg",
        "caption" => "Key Lake uranium facility, Canada"
    ), array(
        "question" => "Tailings are a radioactive waste product from mining.", 
        "answer" => 'Actually, "tailings" is the term for the crushed rock that remains once the uranium has been removed from the ore in the milling process. The uranium is separated out by a heated sodium bicarbonate leach (basically soda water). The ore at Coles Hill is unique from other uranium ores from the Western U.S or Canada in that it does NOT contain significant quantities of heavy metals or sulfides, which could be of environmental concern.  Yes, there is some radioactivity, but is it important to note that the tailings are less radioactive than the naturally occurring rock in the ore deposit.  Industry best practices recommend the addition of a binding agent to the tailings so that they will harden back into solid rock once they are placed into a below-grade tailings containment structure. The addition of a binding agent and the placement below grade remove any risk that the tailings could be swept away in a flood or hurricane and affect water quality.', 
        "shortanswer" => "true", 
        "image" => "Q3---tailings-pic.jpg",
        "caption" => "Tailings management facilities at JEB mine, Canada"
    ), array(
        "question" => "A mining operation at Coles Hill would pollute the air for miles.", 
        "answer" => "Water is used in the mining and milling process to keep down the dispersion of dust.  Moreover, Virginia Uranium’s plan to build an underground mine would eliminate dust emissions outside of the Coles Hill property, and tailings, the crushed rock from which the uranium is removed, are stored as a heavy liquid slurry under water.  They are not susceptible to wind dispersion.  While radon gas is associated with uranium, improved ventilation practices have minimized worker exposure to radon gas over the past forty years.  In fact, according to Canadian regulators, many uranium miners in Saskatchewan, Canada, receive more radon exposure in their homes than in the mines.", 
        "shortanswer" => "false", 
        "image" => "Q4---air-quality.jpg",
        "caption" => ""
    ), array(
        "question" => "Radiation from uranium mines and mills has not increased the cancer rates of communities living near mines and mills.", 
        "answer" => "Highly-respected studies confirm that cancer rates of communities living in the vicinity of uranium mining operations are no higher than those of the general population. Dr. John Boice, an epidemiologist from Vanderbilt University’s School of Medicine, studied four populations who lived near uranium mines in the western United States for decades and found no increased rates of cancer.", 
        "shortanswer" => "true", 
        "image" => "Q4---Gartempe-River-2.jpg",
        "caption" => ""
    ), array(
        "question" => "The drastic changes in the spot-market price of uranium will subject Virginia Uranium to boom-and-bust cycles.", 
        "answer" => "Most uranium is sold under long-term price contracts between mining companies and utilities such as Dominion Power.  Contracts lasting up to twenty years are conceivable.  Only about 25% of global uranium mine production is sold on the spot market, because it is in the best interest of utilities to ensure a stable supply of uranium to power their reactors. Long-term supply contracts benefit uranium mining companies by ensuring a stable uranium selling price for long periods of time.", 
        "shortanswer" => "false", 
        "image" => "Q6---surry-reactors.jpg",
        "caption" => "Nuclear reactors at Surry Power Station, Virginia"
    ), array(
        "question" => "Virginia Uranium could draw all the water it would need to operate a uranium mine and mill at Coles Hill from its site.", 
        "answer" => "Virginia Uranium would require approximately 300,000 gallons of water per day, all of which would come from the 3,500-acre Coles Hill site.  That sounds like a lot of water, but it is slightly less than the Town of Chatham, a nearby town of 1,200 residents, uses. It is far less than other industrial operations in the area have used; for example, Dan River Mills’ textile plant in Danville used 8.2 million gallons of water per day.", 
        "shortanswer" => "true", 
        "image" => "Q7---water-graphic.jpg",
        "caption" => ""
    ), array(
        "question" => "Yellowcake, the commodity a mining company like Virginia Uranium would produce, is dangerous in the hands of terrorists.", 
        "answer" => "Yellowcake is harmless in the hands of terrorists.  This natural uranium produced at uranium mines and mills must go through the three major processing steps of conversion, enrichment, and fuel rod fabrication before it can even be used in the nuclear reactors that power our world.  Commercial-grade uranium fuel for reactors is usually enriched up to 3.5-5% uranium-235.", 
        "shortanswer" => "false", 
        "image" => "Q8---yellowcake.jpg",
        "caption" => "Barrel of yellowcake"
    ), array(
        "question" => "The uranium that mining companies produce is a very hazardous and explosive material.", 
        "answer" => "Yellowcake, the form of natural uranium produced in the mining and milling process, is not flammable and cannot explode.  It is far safer to transport than common fuels like gas and propane.  Like lead, it is only harmful if ingested in significant quantities.", 
        "shortanswer" => "false", 
        "image" => "Q9---gas-truck.jpg",
        "caption" => "Gas is explosive.  Uranium is far safer for transport"
    ), array(
        "question" => "If Virginia’s legislature lifts the moratorium on uranium mining, mines will open up all over the state.", 
        "answer" => "Uranium, a common element, exists in virtually any rock and in seawater in very small concentrations, but companies do not extract uranium from seawater. The process required to do so is far more expensive than the price of uranium, which means that it is not currently possible to profit from such means of uranium production. Likewise, uranium occurs in Virginia outside of Coles Hill, but, as the National Academy of Sciences has written, it is not worth mining at prevailing prices.", 
        "shortanswer" => "false", 
        "image" => "Q10---state-capitol.jpg",
        "caption" => ""
    ), array(
        "question" => "Strict federal regulations govern the disposals of tailings, the byproduct of uranium mining. Under federal regulations, tailings management facilities must be designed to last for 1,000 years and withstand severe weather events, including hurricanes and floods.", 
        "answer" => "The Nuclear Regulatory Commission, the federal agency regulating uranium mills and tailings disposal, has designated below-grade disposal as the prime option for tailings disposal.  Tailings disposal cells must have impermeable liners.  They cannot be located in areas at all prone to flooding. In fact, current industry best practices recommend that tailings be returned to the same geologic structure which held the uranium ore for millions of years prior to mining.", 
        "shortanswer" => "true", 
        "image" => "Q11---Puy-de-L'Ages,-Now-a-Trout-Fishing-Lake,-June-2009.jpg",
        "caption" => "Former open pit mine at Puy de L’Ages, France, now a trout fishing pond"
    ), array(
        "question" => "Pittsylvania County and Virginia taxpayers will be expected to pay for mine reclamation and monitoring when the mine closes.", 
        "answer" => "The Nuclear Regulatory Commission requires uranium mill operators to post surety bonds to cover reclamation and long-term monitoring costs. Operations cannot begin before these bonds are posted, and the amount of the bonds is determined by the NRC during the permitting process and reviewed annually.   For example, Pinion Ridge Mill in Colorado is required to post $11 million in bonds and Homestake Grants in New Mexico $33 million.", 
        "shortanswer" => "false", 
        "image" => "Q12---elliotlakepic.jpg",
        "caption" => "Elliot Lake, Canada, the former “Uranium Capital of the World.”"
    ), array(
        "question" => "<p>So, would you have passed Uranium 101?  If not, don’t fear.  You may find plenty of general information about uranium and the mining industry in our <a href='http://www.virginiauranium.com/reference-library/'>Reference Library</a>, and you’ll be able to learn more about Virginia Uranium and our plans <a href='http://www.virginiauranium.com/who-we-are/'>here</a>.</p>
        <p><a href='http://www.virginiauranium.com/contact/'>Click here</a> to tell us a little about yourself and send us any questions you may have about Virginia Uranium and our plans.</p>"
    )
);

function isNumeric($num="") {
    if(is_numeric($num) && $num = round($num) && $num >= 0)
        return true;
    return false;
}

/* sets default question and score, then checks the session to see if one is already set */
$currQuestion = 1;
$numCorrect = 0;
if(isset($_SESSION['uQuiz_Question']) && isNumeric($_SESSION['uQuiz_Question']) && $_SESSION['uQuiz_Question'] > 0 && $_SESSION['uQuiz_Question'] <= sizeof($questions))
    $currQuestion = intval($_SESSION['uQuiz_Question']);
if(isset($_SESSION['uQuiz_Score']) && isNumeric($_SESSION['uQuiz_Score']) && $_SESSION['uQuiz_Score'] >= 0 && $_SESSION['uQuiz_Score'] < sizeof($questions))
    $numCorrect = intval($_SESSION['uQuiz_Score']);

/* if user has answered, test answer and alter score, go to next question */
if(isset($_GET['val']) && isNumeric($_GET['val'])) {
    $testVal = "";

    if(intval(($currQuestion."tru"), 36) == $_GET['val']) 
        $testVal = "true";
    else if(intval(($currQuestion."fal"), 36) == $_GET['val'])
        $testVal = "false";

    if($testVal != "") {
        if($questions[$currQuestion]['shortanswer'] == $testVal)
            $numCorrect++;
        $currQuestion++;
    }
}

/* 
if on last page of quiz, delete the session so the next visit will start the quiz again
otherwise just store the updated info in the session 
*/
if($currQuestion == sizeof($questions)) {
    unset($_SESSION['uQuiz_Question']);
    unset($_SESSION['uQuiz_Score']);
} else {
    $_SESSION['uQuiz_Question'] = $currQuestion;
    $_SESSION['uQuiz_Score'] = $numCorrect;
}
?> 
```

站点new.js

```
jQuery(document).ready(function() {
    jQuery(".quiz_button_true,.quiz_button_false")
        .click(function() {
            var $sibling = jQuery(this).siblings();
            var $answer = jQuery(this).parent().siblings(".answer");
            var correct = false;

            if(!jQuery(this).hasClass("active") && !$sibling.hasClass("active")) {
                jQuery(this).addClass("active");

                $sibling
                    .addClass("inactive")
                    .animate({ "opacity": .4 }, 300)
                .end();

                if(($answer.find(".hide").html() == "true" && jQuery(this).hasClass("quiz_button_true")) || ($answer.find(".hide").html() == "false" && jQuery(this).hasClass("quiz_button_false")))
                    correct = true;

                $answer.each(function() {
                    if(!correct)
                        jQuery(this).find("strong").css("color", "#af0000");

                    jQuery(this)
                        .css({ "opacity": 0, "display": "block" })
                        .animate({ "opacity": 1 }, 300)
                    .end();
                });

                var currQ = jQuery("#body").find("input[name='currentQuestion']").val();

                jQuery(".quiz_next")
                    .attr("href", ("?val=" + intval(currQ + ((jQuery(this).hasClass("quiz_button_true")) ? "tru" : "fal"), 36)))
                    .addClass("active")
                .end();
            }
        })
    .end();

    jQuery(".quiz_next")
        .click(function(e) {
            if(jQuery(this).hasClass("active"))
                window.location.href = jQuery(this).attr("href");

            return false;
            e.preventDefault();
        })
    .end();
});

function intval(mixed_var, base) {
    var tmp;
    var type = typeof(mixed_var);

    if(type === 'boolean')
        return +mixed_var;
    else if(type === 'string') {
        tmp = parseInt(mixed_var, base || 10);
        return (isNaN(tmp) || !isFinite(tmp)) ? 0 : tmp;
    } else if(type === 'number' && isFinite(mixed_var))
        return mixed_var | 0;

    return 0;
} 
```

我真的希望这里有人能够帮助我克服这个困难。我不想编写一个全新的测验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:09:31.120

声明 session_start()！:)

xoxo

# xml - xml 的 xsl 语法

> ID：13424581
> 
> 赞同：1
> 
> 时间：2012-11-16T21:21:08.233
> 
> 标签：xml, xslt

我有以下电影 xml 文件的结构

```
<movies>
 <movie>
    <genre>Drama</genre>
    <genre>Thriller</genre>
 </movie>
 ....
</movies> 
```

这个片段不应该为每个电影标签选择每个类型的值吗？

```
<xsl:template match="/">
<html>
<body>
<h2>MOVIES</h2>
<table border="1">
<tr bgcolor="#9acd32">
  <th>Genre</th>
</tr>
<xsl:for-each select="movies/movie">
<tr>
  <td>
  <xsl:for-each select="movies/movie/genre">

          <xsl:value-of select="genre"/>

</xsl:for-each>
  </td>

</tr>
</xsl:for-each>
</table>
</body>
</html>
</xsl:template>

</xsl:stylesheet> 
```

它没有显示任何输出。谁能指出错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T21:33:05.543

它不起作用，因为嵌套中的选择器`xsl:for-each`：外部的迭代器`movies/movie`，所以在内部的你已经在一个`movie`元素中，但是你正在选择`movies/movie/genre`；这意味着您正在寻找`/movies/movie/movies/movie/genre`. 也使用`xsl:value-of`了不正确的选择器。

代码应该是（未经测试）：

```
<xsl:for-each select="movies/movie">
<tr>
  <td>
  <!-- context element here is movie -->
  <xsl:for-each select="genre">
      <!-- context element here is genre -->
      <xsl:value-of select="."/>
      <!-- Separate genres with a comma -->
      <xsl:if test="not(position() = last())">, </xsl:if>
  </xsl:for-each>
  </td>
</tr>
</xsl:for-each> 
```

顺便说一下（题外话），该`bgcolor`属性在 HTML 4 中已被弃用（很久以前）:) 您应该`style`改用：

```
<tr style="background-color: #9acd32;"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T21:50:59.540

虽然 sierrasdetandil 的回答已经为您提供了解决您手头问题的方法，但我想提供一个替代方法，`apply-templates`而不是`for-each`：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" />

    <xsl:template match="/">
        <html>
            <body>
                <h2>MOVIES</h2>
                    <table>
                        <tr><th>Genre</th></tr>
                        <xsl:apply-templates />
                    </table>
            </body>
        </html>
    </xsl:template>

    <xsl:template match="movies">
        <xsl:apply-templates />
    </xsl:template>

    <xsl:template match="movie">
        <tr>
            <td>
                <xsl:apply-templates />
            </td>
        </tr>
    </xsl:template>

    <xsl:template match="genre">
        <xsl:value-of select="." />
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T03:09:03.637

**就这么简单**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
  <table><xsl:apply-templates/></table>
 </xsl:template>
 <xsl:template match="movie">
     <tr>
       <xsl:apply-templates select="node()|@*"/>
     </tr>
 </xsl:template>
 <xsl:template match="genre"><td><xsl:apply-templates/></td></xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<movies>
 <movie>
    <genre>Drama</genre>
    <genre>Thriller</genre>
 </movie>
</movies> 
```

**产生了想要的正确结果：**

```
<table>
   <tr>
      <td>Drama</td>
      <td>Thriller</td>
   </tr>
</table> 
```

# c++ - BlockingQueue的QWaitCondition：在线程还在等待的时候销毁

> ID：13424586
> 
> 赞同：4
> 
> 时间：2012-11-16T21:21:36.937
> 
> 标签：c++, qt, exception, qthread

我在 Qt 中建立了自己的阻塞队列，但遇到了一些问题。如果我不关闭队列，则会在控制台“ `QWaitCondition: Destroyed while threads are still waiting`”中收到错误消息。另一方面，我在关闭队列后遇到访问冲突异常（无论它是在构造函数中还是来自另一个线程）。异常发生在等待条件的等待方法中。

这是我的阻塞队列：

```
#ifndef BLOCKING_QUEUE_H
#define BLOCKING_QUEUE_H

#include <QObject>
#include <QSharedPointer>
#include <QWaitCondition>
#include <QMutex>
#include <queue>

namespace Concurrency
{
    template<typename Data>
    class BlockingQueue
    {
    private:
        QMutex _mutex;
        QWaitCondition _monitor;
        volatile bool _closed;
        std::queue<QSharedPointer<Data>> _queue;

    public:
        BlockingQueue()
        {
            _closed = false;
        }

        ~BlockingQueue()
        {
            Close(); // When this is enabled, I get an access violation exception in TryDequeue
        }

        void Close()
        {
            QMutexLocker locker(&_mutex);
            if(!_closed)
            {
                _closed = true;
                _queue.empty();
                _monitor.wakeAll();
            }
        }

        bool Enqueue(QSharedPointer<Data> data)
        {
            QMutexLocker locker(&_mutex);

            // Make sure that the queue is not closed
            if(_closed)
            {
                return false;
            }

            _queue.push(data);

            // Signal all the waiting threads
            if(_queue.size()==1)
            {
                _monitor.wakeAll();
            }

            return true;
        }

        bool TryDequeue(QSharedPointer<Data>& value, unsigned long time = ULONG_MAX)
        {
            QMutexLocker locker(&_mutex);

            // Block until something goes into the queue
            // or until the queue is closed
            while(_queue.empty())
            {
                if(_closed || !_monitor.wait(&_mutex, time)) // <-- Access violation if I call close in the destructor
                {
                    return false;
                }
            }

            // Dequeue the next item from the queue
            value = _queue.front();
            _queue.pop();
            return true;
        }
    };
}
#endif BLOCKING_QUEUE_H 
```

我假设正在发生这种情况，因为在队列已经被销毁并且互斥体随后也被销毁之后，正在等待的线程得到了信号。当线程在 中唤醒时`TryDequeue`，不再分配互斥锁，因此会导致访问冲突异常。避免这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:31:49.117

我遇到的问题与线程方法有关，有关更多信息，请查看以下问题：[为什么没有发出 QThread::finished 信号？](https://stackoverflow.com/questions/13460096/why-is-qthreadfinished-signal-not-being-emitted/13460276#13460276)

使用 的服务`BlockingQueue`未正确关闭在队列中等待的线程，随后导致队列被销毁，而线程仍在`TryDequeue`方法内等待。

# clojure - Clojure中的符号矩阵库，需要建议

> ID：13424587
> 
> 赞同：4
> 
> 时间：2012-11-16T21:21:37.703
> 
> 标签：clojure, computer-algebra-systems

虽然有很多用于线性代数的 Java 库，但 Clojure 目前没有包含对符号数学支持的惯用计算机代数系统。作为开始，我想我可以开始做一些简单的事情。

作为第一步，我认为正确的数据结构将是一个好的开始。

第 1 步：实现持久矩阵

我将使用`deftype`（或`reify`），现在，为了便于实施，我将使用哈希图进行存储（如果认为它更好但状态权衡，请提出替代方案）。（可以根据您的性能要求想象许多不同的实现，例如使用数组或委托给外部 java 库并实现某种瞬态接口。）

我的问题是，**我应该考虑实现哪些接口/协议？（一般来说，clojure 使用的所有协议/接口的一个好的列表是什么？）还有关于如何实现这些的建议吗？**

我要实施的事情清单：

-Assoc'ing 会很有用，可以以不可变的方式修改矩阵的各个部分

- 将矩阵视为一个函数作为元素的访问器，我在想你可以传递一个二元组来返回一个元素、一个值（按宽度 * y + x 索引）、哈希图来获取列、行、或次要，通过自定义查询哈希图/语言。

**请注意，我目前的目标是设计良好的抽象，以便能够灵活地选择实现。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T13:41:53.233

我或多或少地管理[SymPy](http://sympy.org/en/index.html)中的线性代数模块，这是一个主要的 Python 符号包。我将从传统的计算机代数系统给你我的观点。

我们为三个重要的用例提供了三个单独的实现

1.  可变矩阵——尽管在 Python SymPy 中，默认情况下是不可变的。我们实际上已经打破了矩阵的这条规则。矩阵算法是出于性能原因真正需要切换到可变性的标准示例。
2.  不可变矩阵——但您希望可以选择切换回来。我们预期的工作流程如下

    1.  构建不可变矩阵
    2.  切换到可变性并执行一些算法
    3.  切换回不变性并将其呈现给用户
3.  矩阵符号——通常你不需要处理矩阵中的显式条目，而是处理矩阵的概念。请参阅此[scicomp.stackexchange 帖子](https://scicomp.stackexchange.com/questions/74/symbolic-software-packages-for-matrix-expressions)。这是[我目前的工作](http://matthewrocklin.com/blog/)，我觉得它非常令人兴奋。

还有其他分裂，例如密集表示与稀疏表示。符号线性代数是一个大而重要的领域。我期待看到 Clojure 社区的集体解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T10:06:54.703

尽管它是一个 Java 库，但我设计了从 Clojure 使用的[vectorz 。](https://github.com/mikera/vectorz)

它为高性能向量和矩阵数学提供了许多数据结构和算法。你可能会发现它很有用。我目前将它用于 Clojure 中的计算机图形和机器学习。

矩阵和向量是可变的，但我发现这是一个必要的弊端：使用不可变向量和矩阵对于许多算法来说太慢了。

如果有足够多的人发现这很有用和/或想要参与，我会对构建一个惯用的 clojure 包装器（包括向量和矩阵的不可变版本）感兴趣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-14T03:10:40.867

***Gerry Sussman 的scmutils***系统被移植到 Clojure可能会让本主题的读者感兴趣。这是一个非常先进的 CAS，提供诸如自动微分、文字函数等功能，非常类似于*Maple*。它在麻省理工学院用于动力学和微分几何的高级程序，以及相当多的电气工程材料。它也是 Sussman&Wisdom 的*SICP*、***SICM***（经典力学的结构和解释）的“续集”（LOL）中使用的系统。虽然最初是一个 Scheme 程序，但这不是直接翻译，而是为了利用 Clojure 的最佳特性而进行的彻底重写。它被命名为*sicmutils*, 既是为了纪念原著，也是为了纪念这本书。这项出色的工作是 Colin Smith 的作品，您可以在[https://github.com/littleredcomputer/sicmutils](https://github.com/littleredcomputer/sicmutils)找到它。

我相信这可以构成一个惊人的 Clojure 计算机代数系统的基础，与其他任何可用的东西竞争。尽管它是一个巨大的野兽，正如你可以想象的那样，还有大量的东西有待移植，但基本的东西已经差不多了，系统会区分，并且可以很好地处理字面量和字面量函数。这是一项正在进行的工作。该系统还使用了 Sussman 倡导的“通用”方法，从而可以将操作应用于函数，从而创建一个极大的抽象来简化符号。

这是一个品尝者：

```
> (def unity (+ (square sin) (square cos)))
> (unity 2.0)  ==>  1.0
> (unity 'x)   ==> 1 ;; yes we can deal with symbols
> (def zero (D unity))  ;; Let's differentiate
> (zero 2.0)   ==> 0 
```

SicmUtils 引入了两种新的向量类型“向上”和“向下”（称为“结构”），它们的工作方式与您期望的向量非常相似，但具有一些特殊的数学（协变、逆变）属性，以及一些编程属性，在它们是可执行的！

```
> (def fnvec (up sin cos tan))  => fnvec
> (fnvec 1)   ==> (up 0.8414709848078965 0.5403023058681398 1.5574077246549023)
> ;; differentiated
> ((D fnvec) 1)  ==>  (up 0.5403023058681398 -0.8414709848078965 3.425518820814759) 
> ;; derivative with symbolic argument
> ((D fnvec) 'θ) ==> (up (cos θ) (* -1 (sin θ)) (/ 1 (expt (cos θ) 2))) 
```

完全支持偏微分

```
> (defn ff [x y] (* (expt x 3)(expt y 5)))
> ((D ff) 'x 'y) ==> (down (* 3 (expt x 2) (expt y 5)) (* 5 (expt x 3) (expt y 4))) 
> ;; i.e. vector of results wrt to both variables 
```

该系统还支持 TeX 输出、多项式分解和许多其他好东西。然而，许多可以轻松实施的东西并不是纯粹因为缺乏人力资源而完成的。图形输出和“记事本/工作表”界面（使用 Clojure 的 Gorilla）也正在开发中。

我希望这已经在某种程度上激发了您的胃口，足以让您访问该网站并试一试。你甚至不需要 Clojure，你可以从提供的 jar 文件中运行它。

=========

PS。顺便说一句，要直接回答原始问题，是的，**sicmutils**确实支持符号结构：您可以设置一个矩阵表示，其中条目是公式，例如旋转矩阵，然后针对给定坐标评估（乘以）它。它以这种方式非常灵活。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T05:35:12.517

这可能无法回答您的问题，但我在使用 Incanter 时发现的一件事是我需要能够访问带有环绕的元素。向量也是如此，有时能够提供负索引以从末尾反向访问元素，或者提供超出范围的索引以从头开始访问元素。自然地计算偏移量会增加开销，但有时这是您愿意为之付费的功能

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-09T04:56:41.947

[MPL](https://github.com/dharmatech/mpl)是一个用可移植 R6RS 方案编写的简单符号数学库。这里有一个[简短的介绍](https://github.com/dharmatech/mpl/blob/master/mpl.org)。

由于 Scheme 是一个 Lisp，MPL 应该很容易移植到 Clojure。

# c# - 类错误数组

> ID：13424591
> 
> 赞同：0
> 
> 时间：2012-11-16T21:21:43.697
> 
> 标签：c#

所以我有这门课

```
namespace WindowsFormsApplication2
{ 
    public class Records
    {
        public string name, surname;

        public int num;
    }
} 
```

我想创建一个此类的数组，尝试了一切，但它仍然不起作用，我开始认为这是一个错误，我使用的是 Visual Studio 2012，这是我的代码。任何帮助将不胜感激。

（表单上有一个记录数据网格，我从文本框中读取，信息用制表符分隔）

```
namespace WindowsFormsApplication2
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        Records[] userRecs = new Records[20];

        public int count = 0;

        private void Form1_Load(object sender, EventArgs e)
        {
            getText();
        }

        public void getText() 
        {
            FileStream fs = new FileStream("D:\\filestr.txt",FileMode.Open);

            StreamReader sr = new StreamReader(fs);

            for (string readed = sr.ReadLine(); readed != null; readed = sr.ReadLine())
            {
                string[] tempStr = readed.Split('\t');

                userRecs[count].num = Convert.ToInt32(tempStr[0]);

                userRecs[count].name = tempStr[1];

                userRecs[count].surname = tempStr[2];

                count++;
            }

            for (int i = 0; i < count; i++)
            {
                dataGridView1.Rows.Add(userRecs[count].num, userRecs[count].name, userRecs[count].surname);
            }

            sr.Close();
            fs.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T21:27:26.863

这会为数组分配内存，但不会创建 Record 实例：

```
Records[] userRecs = new Records[20]; 
```

现在，当您遍历文件行时，您需要实例化您的类：

```
userRecs[count] = new Records();
userRecs[count].num = ...
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T21:25:35.683

```
 dataGridView1.Rows.Add(userRecs[count].num, userRecs[count].name, userRecs[count].surname); 
```

可能应该是

```
dataGridView1.Rows.Add(userRecs[i].num, userRecs[i].name, userRecs[i].surname); 
```

# scala - Scala 中的简单 Web 服务器

> ID：13424595
> 
> 赞同：5
> 
> 时间：2012-11-16T21:22:14.720
> 
> 标签：scala, webserver, embeddedwebserver

我需要一个 Scala 库来为我提供一个非常简单的 Web 服务器。

我需要它为我正在开发的应用程序的 Web 用户界面提供 json 内容，因此它应该能够返回静态页面和生成的 JSON 数据。

我看到有很多 Web 框架，但对于我需要做的事情来说，它们似乎有点矫枉过正。

# python - tkinter 窗口在没有窗口顶部的情况下获取 x、y、几何/坐标

> ID：13424598
> 
> 赞同：8
> 
> 时间：2012-11-16T21:22:27.320
> 
> 标签：python, user-interface, python-3.x, tkinter, tk

我在 python (3) 中使用 tk，尽管我假设这适用于任何语言。我正在寻找标题栏外的 tk 窗口的当前 x、y 坐标：

```
import tkinter  
root = tkinter.Tk() 
```

但是， using`root.winfo_y()`给了我坐标，包括标题栏的深度。对于屏幕左上角的窗口：

```
root.winfo_x(), root.winfo_y()          # returns (0, 22) 
```

换句话说，运行：

```
root.geometry('+{}+{}'.format(root.winfo_x(), root.winfo_y())) 
```

每次我调用它时都会将窗口向下移动 22 像素（标题栏的高度）。如何获取整个窗口的实际坐标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T08:27:57.033

在 Tkinter 中，大多数配置函数在不使用新值参数时返回当前值。因此`root.geometry()`（加上一些字符串解析）可以满足您的目标。

# php - 加载一千个 Cron 脚本的最佳方法

> ID：13424600
> 
> 赞同：1
> 
> 时间：2012-11-16T21:22:54.610
> 
> 标签：php, mysql, scripting, cron, hosting

我一直在做一些研究，并试图找出运行我们网站之一的最佳方法。简而言之，将有大约 100 个子域，每个子域有 21 个需要运行的 cron 脚本。我通过使用一些可以使用的 fopen 函数将它缩短到 11 个。每个子域使用相同的 API 来提取数据并将其存储在本地 mysql 数据库中的次数更少。所有子域都有自己的数据库，并且它不共享，并且这些数据库之间的信息永远不会重叠，因为它们都是独特的数据片段。

我们打算将它托管在 VPS 托管上，我不确定这是否是最好的主意，但它应该可以按照我们的预期完成工作。这 11 个脚本的间隔是以下之一：

5 分钟、8 分钟、10 分钟、15 分钟、30 分钟、45 分钟、1 小时、3 小时、8 小时、12 小时和24 小时

以 10 分钟间隔运行的那些通常加载速度非常快（低于 20 秒/脚本）

我的问题是，打开这么多脚本而不...的最佳方法/最佳实践是什么...

我对一种方法的想法：1）总共创建 11 个 cron 脚本并运行 fopen 函数，每个脚本之间可能有一个 sleep() 函数。问题是每个脚本可能需要打开 100 个文件。2) 创建 1100 个 cron 作业以在设定的时间运行。3) 创建大约 110 个 fopen cron 脚本，每个文件将运行 10 个脚本。

如果有人可以提供提示或技巧，将不胜感激！

另外，对于服务器使用，是否需要专用或 VPS？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T21:32:53.007

如果我理解正确，您可能想要设置 11 个 cron 脚本，并且每个 cron 脚本都会依次调用其他需要的脚本。您可能不需要 sleep() 中间，因为它们将按顺序运行，而不是并行运行。为了减少服务器负载，您还可以使用“nice”命令使脚本以低优先级运行。

专用或 VPS 完全取决于您在服务器上施加的负载量。VPS 的性能也可能因提供商而异。从提供的信息中确实无法衡量。如果您想省钱，那么我会说只是在 VPS 上尝试一下。您以后可以随时移至更昂贵的专用服务器。

# jquery - Highcharts 不适用于 jQuery 1.8，有什么解决方法吗？

> ID：13424610
> 
> 赞同：0
> 
> 时间：2012-11-16T21:23:23.667
> 
> 标签：jquery, highcharts

我有一个需要使用 jquery 1.8 的场景，但我面临 2 个关于 highcharts 的问题，图表线不可见，缩放功能也无法正常工作。我已经下载了最新的hightcharts js，即2.3.3版，有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T08:51:47.240

您可以使用**[`jQuery.noConflict()`](http://api.jquery.com/jQuery.noConflict/)**

您需要以特定顺序对 jQuery 脚本标签进行排序，您首先包含的标签将被引用`$`，后一个标签可以被引用，`jQuery`或者您也可以给出您想要的名称，如`jq172`. 由于 highcharts 内部使用`jQuery`您希望稍后使用 highchart 友好版本。

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.js" ></script>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.js" ></script>
<script type="text/javascript">
window.jq172=$.noConflict();
</script> 
```

您现在可以使用`$`1.8.0 功能和`jQuery`或`jq172`使用 1.7.2

```
console.log("$: " + $().jquery);
console.log("jQuery: " + jQuery().jquery);
console.log("window.jq172: " + jq172().jquery); 
```

打印到控制台

> $：1.8.0
> jQuery：1.7.2
> window.jq172：1.7.2

**[jQuery 版本冲突 | Highchart & Highstock @ jsFiddle](http://jsfiddle.net/jugal/Af8yP/)**

# scala - playframework 2.0，子项目和路线

> ID：13424611
> 
> 赞同：1
> 
> 时间：2012-11-16T21:23:27.210
> 
> 标签：scala, playframework, routes, playframework-2.0, subproject

我有一个 PlayfFamework 2.x' (PF2) 默认 scala 项目 (htc-sample) 和依赖的默认 PF2 scala 项目 (htc)，如下所示：

[http://www.playframework.org/documentation/2.0/SBTSubProjects](http://www.playframework.org/documentation/2.0/SBTSubProjects)

但是在尝试启动主项目时，我遇到了一个路线错误。像这样：

> [信息] 将 5 个 Scala 源代码和 1 个 Java 源代码编译到 ~/projects/sample-htc/modules/htc/target/scala-2.9.1/classes ... [错误] ~/projects/sample-htc/modules/htc /target/scala-2.9.1/src_managed/main/views/html/main.template.scala:23: not found: value routes [error] Any),format.raw/*8.94*/("""">

处理与路线有关的子项目的程序是什么？

--

我想我找到了答案：在play v.2.0中这是不可能的。因为这个说法：

“您可能希望将一个大型项目拆分为几个较小的应用程序，或者甚至将一些逻辑提取**到与 Play 应用程序无关**的标准 Java 或 Scala 库中”。但这是否意味着子项目不能是带有路由文件的播放项目？它可以依赖于另一个 Play 应用程序。

但是还有另一种说法：**“它可以依赖于另一个 Play 应用程序。”**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T21:57:00.563

目前，关于路线和子项目的游戏框架 2 存在限制

看看这些线程

[https://groups.google.com/forum/#!msg/play-framework/O-lI0PsxM0U/fwHWylZoPpoJ](https://groups.google.com/forum/#!msg/play-framework/O-lI0PsxM0U/fwHWylZoPpoJ)

[https://groups.google.com/d/msg/play-framework/Tr8NhKaHmiw/0_kY1z3OfAAJ](https://groups.google.com/d/msg/play-framework/Tr8NhKaHmiw/0_kY1z3OfAAJ)

它已经在 play 2.1 trunk 中解决了

# jquery - 动态调整大小在 Chrome 中失败（在 IE/Firefox 中有效）

> ID：13424612
> 
> 赞同：1
> 
> 时间：2012-11-16T21:23:33.373
> 
> 标签：jquery, html, resize

我有一个输入框，当左侧的过滤器下拉更改时，它会动态调整大小以显示相同的长度。

我有一些 jQuery 计算每次用户从下拉列表中更改过滤器时的宽度偏移量。它可以在 IE 和 Firefox 中正常工作。但由于某种原因，它在 Chrome 中失败并继续缩小输入框。

知道为什么会这样吗？

**[这是一个现场版本。](http://jonathonmoore.com/proto/)**

这是重新调整大小的代码：

```
$('#refineDropdown li').click(function() {
        var tmp = $('#refine').width();
        $('#refine').html($(this).text()); // sets the text of the button to the new selection
        $('#refine').removeClass('refineClicked'); // temp css restyling
        $("#refineDropdown").hide(); // hides the dropdown
        testLength(); // adjusts the width of the input box suggestions drop down
        $('#search').css('width', $('#search').width() + (tmp - $('#refine').width())); // calculates the new width offset and makes the adjustment
    });

function testLength() {
        if ($('#refine').text().length > 7) {
            $('#refine').html($('#refine').text().substring(0, 6) + "...");
        }
        $('#dropdown').css('width', $('#search').width() + 1);
        $('#dropdown').css('margin-left', $('#refine').width() + 13);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T21:35:10.620

我能够通过改变来解决这个问题

```
type="search" 
```

到

```
type="text" 
```

在你的`#search`

搜索是 webkit 唯一的输入，因此不符合您的样式，[请参见此处](http://css-tricks.com/webkit-html5-search-inputs/)

从上面的链接：

> WebKit 对您可以在搜索输入中更改的内容有很大的时间限制。我猜这个想法是一致性。特别是在 Safari 中，搜索字段看起来就像浏览器右上角的搜索框。下面的 CSS 在 WebKit 中“无论如何”都会被忽略，例如，你甚至不能用 !important 规则来对抗它。

# fonts - 自定义字体覆盖 Firefox 和 IE 中的显式行高

> ID：13424615
> 
> 赞同：1
> 
> 时间：2012-11-16T21:23:54.573
> 
> 标签：fonts, font-face, fontforge

我有一个在 FontForge 中构建的自定义图标字体。我遇到了一些不寻常的事情，因为它改变了 HTML 中块级元素的高度，但在 Chrome 中没有。

**例子：**

```
<html>
    <head>
        <style>
            html { font-family: Arial, Helvetica, sans-serif; }
            .double { font-size: 200%; }
            div { margin-bottom: 1.5em; }

            @font-face {
                font-family: iconfont;
                src: url('http://cheesefish.net/techchoicesymbol-webfont.eot');
                src: url('http://cheesefish.net/techchoicesymbol-webfont.eot?#iefix') format('embedded-opentype'),
                     url('http://cheesefish.net/techchoicesymbol-webfont.woff') format('woff'),
                     url('http://cheesefish.net/techchoicesymbol-webfont.ttf') format('truetype'),
                     url('http://cheesefish.net/techchoicesymbol-webfont.svg#techchoicesymbolmedium') format('svg');
                font-weight: normal;
                font-style: normal;
            }

            .action {
                display: inline-block;
                line-height: 1.5;
                background-color: orange;
                padding: 0 0.5em;
            }

            .iconfont { font-family: iconfont; }
        </style>
    </head>
    <body>
        <div>
            <span class="action"><span class="iconfont">&#xE013;</span> Go for a drive</span>
            <span class="action">&#x2603; Have a snowman</span>
        </div>

        <div class="double">
            <span class="action"><span class="iconfont">&#xE013;</span> Go for a drive</span>
            <span class="action">&#x2603; Have a snowman</span>
        </div>
    </body>
</html> 
```

**直播： http:** [//jsfiddle.net/aGHxw/2/](http://jsfiddle.net/aGHxw/2/) 或[http://cheesefish.net/symbol-test.html](http://cheesefish.net/symbol-test.html)如果您的浏览器不支持 CORS

（注意：确保您的结果窗格足够宽，以便 2x 大小的按钮并排排列）。

如您所见，每个黄色按钮上都有明确的 1.5 行高。这应该会覆盖字体中任何奇怪的指标，实际上在 Chrome 中确实如此——内容是 24px 高（或者在 2x 大小的按钮的情况下是 48px 高）。

但在 Firefox 和 IE 中，结果略有不同。在 Firefox 中，带有我的自定义 webfont 的按钮放大到 25px 高（或者 2x 大小的按钮为 49px 高）。在 IE 中，大小还可以，但对于 2x 大小的按钮，带有我的字体的按钮向上偏移了一个像素。

这种字体有一些稍微奇怪的垂直度量；一些字形是 1.5em 高（在基线下方延伸 0.375em，在上方延伸 1.125em。上升为 1024（em 为 1024 个单位），下降为 0，在 OS/2 表中，所有上升和下降都设置为包含最大字形（上升 1152 和下降 -384，或者在“Win Descent”的情况下，+384）。

我在做什么可怕的事情吗？我已经通过 FontSquirrel @font-face 生成器运行了这个字体，你在上面的示例中看到的结果是关闭了“修复垂直度量”。打开该设置会产生同样奇怪但不同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T16:17:17.840

我认为您正在经历楼梯缩放：

> 当文本被放大或缩小时，浏览器会计算文本的最终大小（即指定的字体大小和应用的比例），并从平台的字体系统请求计算出的字体大小。但是，如果您请求字体大小为 9 且比例为 140%，则生成的 12.6 字体大小不会明确存在于字体系统中，因此浏览器会将字体大小四舍五入为 12。这导致文本的阶梯式缩放。

来源：[https ://developer.mozilla.org/en-US/docs/Web/CSS/text-rendering](https://developer.mozilla.org/en-US/docs/Web/CSS/text-rendering)

作为修复，您可以添加`text-rendering: geometricPrecision;`到样式表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T22:38:23.983

在金属字体中，点的大小以字母上升的金属体的高度来衡量。这个概念使它变成了数字类型。
浏览器按基线对齐同一文本行中的字体。但字母形状在身体上的位置各不相同。这与 x 高度、上升和下降的变化有关。

您的两个块级元素具有不同高度的原因：

*   这辆车来自@font-face 字体。
*   雪人在@font-face 字体中不可用，因此来自默认浏览器字体。
*   不同的字体！因此不同的 x 高度、上升和下降比率。

将我的[小提琴](http://jsfiddle.net/allcaps/MST8U/4/)视为身体和轮廓位置变化的证据。JS：

```
* {
    font-size: 48px;
}
@font-face {
    font-family: iconfont;
    src: url('http://cheesefish.net/techchoicesymbol-webfont.ttf') format('truetype');
}
span {
    background-color: gray;
    color: white;
}
.iconfont {
    font-family: iconfont;
}
.arial {
    font-family: Arial;
}
.times {
    font-family: Times;
}
.helvetica {
    font-family: Helvetica;
} 
```

HTML：

```
<!-- All fonts are 48px but still have diffrent body size. -->
<!-- Iconfont doens't have a-z, A-Z, 0-9 but does display a snowman! :/ -->
<span class="iconfont">&#xE013; a-z, A-Z, 0-9 &#x2603;</span>

<span class="arial">Hx</span> 
<span class="times">Hx</span>

<span class="helvetica">Hx</span> 
<!-- Snowman isn't an iconfont glyph. -->
&#x2603; 
```

铬合金：

![铬屏幕截图](../Images/aff9d9ac400f43c2500743fa99760f2b.png)

火狐：

![火狐截图](../Images/ffe9c1f816b631e8cffce1f6bcac7ed9.png)

你的车很大，因为有些值是错误的。如果您在 FontForge 中创建新字体，默认值为 em 1000、ascent、800 和 descent 200。

![FontForge 字体信息对话框](../Images/506ae7a473447f42e913702f4320e26e.png)

小事：汽车不在正确的 Unicode 插槽中。但在私人使用区的某个地方。它应该在AUTOMOBILE (U+1F697)。

结论：字体的主体不同。没关系，因为字体是按基线对齐的。当一个图标进入字体世界时，它应该表现得像一个字母，并且有一个合理的基线位置、x 高度、上升和下降。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-13T15:31:22.087

我通过 FontSquirrel 处理的客户自定义字体遇到了类似的挑战。在桌面版 Chrome 中，浏览器将使用在 FontForge 中的 Element > Font Info > OS/2 > Metrics 中找到的“Win Ascent”值，但移动版 Chrome 使用的是在 Element > Font Info > General 选项卡中找到的 Ascent 值。这导致两个浏览器中的行高看起来不同。

我的解决方案是显式覆盖 CSS 中的 ascent 值，在您的示例中如下所示：

```
@font-face {
  font-family: iconfont;
  src: url('http://cheesefish.net/techchoicesymbol-webfont.eot');
  src: url('http://cheesefish.net/techchoicesymbol-webfont.eot?#iefix') format('embedded-opentype'),
    url('http://cheesefish.net/techchoicesymbol-webfont.woff') format('woff'),
    url('http://cheesefish.net/techchoicesymbol-webfont.ttf') format('truetype'),
    url('http://cheesefish.net/techchoicesymbol-webfont.svg#techchoicesymbolmedium') format('svg');
  font-weight: normal;
  font-style: normal;
  ascent-override: 100%;
} 
```

# wpf - 如何在运行时更改颜色主题

> ID：13424621
> 
> 赞同：1
> 
> 时间：2012-11-16T21:24:37.727
> 
> 标签：wpf, styles

我正在开发一个 WPF 应用程序，我正在尝试在运行时更改颜色。我尝试了在此线程中发布的解决方案：[WPF：在运行时从 App.xaml 更改资源（颜色）](https://stackoverflow.com/questions/786183/wpf-changing-resources-colors-from-the-app-xaml-during-runtime)；但是，该解决方案似乎不起作用。

我定义了 3 个资源字典

颜色1.xaml

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <Color x:Key="BaseColor">#ffaa01</Color>
  <SolidColorBrush x:Key="BackgroundColorBrush" Color="{DynamicResource BaseColor}" />
</ResourceDictionary> 
```

颜色2.xaml

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
<Color x:Key="BaseColor">#aaff01</Color>
<SolidColorBrush x:Key="BackgroundColorBrush" Color="{DynamicResource BaseColor}" />
</ResourceDictionary> 
```

颜色3.xaml

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
<Color x:Key="BaseColor">#aa01ff</Color>
<SolidColorBrush x:Key="BackgroundColorBrush" Color="{DynamicResource BaseColor}" />
</ResourceDictionary> 
```

所有 3 个资源字典都位于我的应用程序根目录中的一个名为“Resources”的子文件夹中。

我已将 Colors1 资源字典添加到应用程序资源（在 Application.xaml 文件中），以便默认加载它。

这是我的 Application.xaml：

```
<Application x:Class="Application"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
StartupUri="Window1.xaml">
   <Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary x:Name="Colors1" Source="Resources/Colors1.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
   </Application.Resources>
</Application> 
```

我的应用程序中有一个名为“Window1”的窗口，其中包含一个网格和一个允许您在资源字典之间切换的组合框。

这是 Window1 的 xaml 代码：

```
<Window x:Class="Window1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="Picture Orders" Height="600" Width="600"
xmlns:myProj="clr-namespace:TryingWPF">
<Window.Resources>
    <x:Array x:Key="ResourceNames" Type="sys:String"
             xmlns:sys="clr-namespace:System;assembly=mscorlib">
        <sys:String>Colors1</sys:String>
        <sys:String>Colors2</sys:String>
        <sys:String>Colors3</sys:String>
    </x:Array>
</Window.Resources>
<Grid x:Name="VisualRoot" Background="{DynamicResource BackgroundColorBrush}">
    <ComboBox x:Name="ResourceOptions" 
              ItemsSource="{StaticResource ResourceNames}" 
              SelectedIndex="0"
              VerticalAlignment="Top"
              HorizontalAlignment="Center"
              SelectionChanged="ResourceOptions_SelectionChanged"/>
</Grid>
</Window> 
```

这是处理 ComboBox 的 Selection Changed 事件的 VB.NET 代码，该事件应更改窗口中网格的背景颜色：

```
Public Class Window1

   Private Sub ResourceOptions_SelectionChanged(sender As System.Object, e As System.Windows.Controls.SelectionChangedEventArgs)
    Dim resourceSource As String = String.Format("pack://application:,,,/Resources/{0}.xaml", ResourceOptions.SelectedValue)
    Dim newResourceDictionary As New ResourceDictionary()
    newResourceDictionary.Source = New Uri(resourceSource)
    Application.Current.Resources.MergedDictionaries.RemoveAt(0)
    Application.Current.Resources.MergedDictionaries.Insert(0, newResourceDictionary)

   End Sub
End Class 
```

我不确定我做错了什么。

如何让颜色改变？

***编辑：*** 好吧，在发布这个问题之后，我发现如果我将画笔从颜色资源文件中移出并移到窗口资源中，颜色会在切换资源时发生变化。

但是，如果我将画笔移动到另一个名为 ColorBrushes 的 ResourceDictionary，并简单地切换 Color ResourceDictionaries，它不会改变颜色。

在我的主应用程序中，我所有的画笔都在 ResourceDictionaries 中定义，而不是在窗口或用户控件本身中定义......所以这对我来说仍然是一个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:02:35.363

我通过更改 Colors 字典然后将 Brushes 字典更改为 Brushes 字典解决了这个问题。

像这样：

```
Public Class Window1

 Private Sub ResourceOptions_SelectionChanged(sender As System.Object, e As System.Windows.Controls.SelectionChangedEventArgs)
   Dim resourceSource As String = String.Format("pack://application:,,,/Resources/{0}.xaml", ResourceOptions.SelectedValue)
   Dim newResourceDictionary As New ResourceDictionary()
   newResourceDictionary.Source = New Uri(resourceSource)
   Application.Current.Resources.MergedDictionaries.RemoveAt(0)
   Application.Current.Resources.MergedDictionaries.Insert(0, newResourceDictionary)

   Dim brushesResourceSource As String = "pack://application:,,,/Resources/ColorBrushes.xaml"
   Dim newBrushesResourceDictionary As New ResourceDictionary()
   newBrushesResourceDictionary.Source = New Uri(brushesResourceSource)
   Application.Current.Resources.MergedDictionaries.RemoveAt(1)
   Application.Current.Resources.MergedDictionaries.Insert(1, brushesResourceSource)
 End Sub
End Class 
```

-弗林尼

# php - 登录时从 mysql 数据库中获取用户数据并存储在 $_SESSION 中

> ID：13424625
> 
> 赞同：1
> 
> 时间：2012-11-16T21:24:59.080
> 
> 标签：php, mysql

当用户登录到会员的唯一区域时，我试图提取其他数据，例如他们的名字以及他们的登录凭据，即电子邮件和密码，但似乎无法让查询成功输出数据。它成功登录，但我无法将其他任何内容传递到会话中

```
<?php

    session_start();

   @$db = new mysqli("localhost", username, password, table);

   if ($db->connect_errno !=0)  {
       exit;
   }

   $usern = $_POST['username'];
   $passw = $_POST['passw'];

   $query = "SELECT * FROM cf_users WHERE(firstname='".$firstName."' and email='".$usern."' and password='".$passw."')"; 

   $db->query($query); 

    $result = $db->query($query);

    $row = mysqli_fetch_array($result, MYSQLI_BOTH);

    if($row[0]>0)  {
        $_SESSION['email'] = $usern;
        $_SESSION['firstName'] = $row['firstName'];  // Modified after suggestion
        header("location: page.php");
        exit();
    }
    else {
        exit("Login Failed.<br/>'.
       'Please fill them in and try again. <a href='javascript:history.go(-1)'>Go back</a>");
    }

    $closed = $db->close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:35:14.590

您也应该将其添加`session_start();`到您的开头`page.php`。小心那条线

```
$_SESSION['firstName'] = $firstName; 
```

因为`$firstName`没有定义。

# networking - 需要从 IPVS 中删除所有连接

> ID：13424629
> 
> 赞同：0
> 
> 时间：2012-11-16T21:25:16.910
> 
> 标签：networking, tcp, connection

我有一个定向路由 IPVS，我正在对其进行一些测试。为了准确起见，我需要能够在开始测试之前断开所有活动和非活动连接。

非活动 TCP 连接超时相当长，但我不允许更改它。有谁知道我可以用来关闭所有现有连接的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T13:19:15.510

关闭linux中的以太网接口

# python - Python 集合和交互

> ID：13424632
> 
> 赞同：2
> 
> 时间：2012-11-16T21:25:35.703
> 
> 标签：python

我正在使用 Python 2.5.4。从这里开始：[Python - 多个列表的交集？](https://stackoverflow.com/questions/3852780/python-intersection-of-multiple-lists)

我有这个：

```
def intersect(*d):
    sets = iter(map(set, d))
    result = sets.next()
    for s in sets:
        result = result.intersection(s)
    return result 
```

以下按预期工作：

```
intersect([1,2,3,4], [2,3,4], [3,4,5,6,7]) 
```

但是，我有一些看起来更像下面的东西：

```
d=[ [1,2,3,4], [2,3,4], [3,4,5,6,7] ] 
```

如果我这样称呼它：

```
intersect(d) 
```

我得到：

```
TypeError: list objects are unhashable 
```

我如何将`d`上述内容转换为`intersect()`可以接受的内容？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T21:27:32.380

您需要将列表的*内容*作为单独的参数传递：

```
intersect(*d) 
```

否则会发生*整个*列表被用作一组而不是。该`*d`语法向 Python 表明您希望将其`d`用作函数的一系列参数，而不是将整个`d`列表仅用作一个参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T21:41:05.773

Martijn 的回答是正确的。我只想补充一点，这可以以更简单且可能更有效的方式完成：

```
s = set(d[0]).intersection(*d[1:]) 
```

例子：

```
>>> d = [ [1,2,3,4], [2,3,4], [3,4,5,6,7] ]
>>> set(d[0]).intersection(*d[1:])
set([3, 4]) 
```

*免责声明*——这是在 python 2.7 上测试的。不知道2.5

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T22:33:16.777

这是实现它的另一种方法：

```
d = [ [1,2,3,4], [2,3,4], [3,4,5,6,7] ]

reduce((lambda x, y: x & y), map(set, d)) 
```

或者

```
reduce(operator.and_, map(set, d)) 
```

这在 2.5 和以前的版本中也有效。

# cakephp - 无法在 Dreamweaver 中编辑 CakePHP 网站

> ID：13424634
> 
> 赞同：0
> 
> 时间：2012-11-16T21:25:40.270
> 
> 标签：cakephp, dreamweaver, edit, mamp

我刚刚在 MAMP 中设置好我的 CakePHP 网站，并修改了数据库和访问文件。此外，我进入 Dreamweaver 并修改了它的配置设置，以便它可以打开 CTP 文件。在浏览器中，它正确显示。但是，我无法让 Dreamweaver 正确链接，并给出错误：

> 由于内部服务器错误，无法解析动态相关文件。

我应该在 Dreamweaver 中专门做些什么吗？

任何帮助表示赞赏！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:49:04.353

我按照@func0der 所说的做了，并试图找到一个更好的 IDE 来更好地支持 CakePHP 网站，最终选择了 Aptana，并且到目前为止运行良好。

祝那些想要编辑他们的 CakePHP 网站的人好运！:)

# javascript - 使用 jQuery 获取 Google+ 订阅数

> ID：13424640
> 
> 赞同：0
> 
> 时间：2012-11-16T21:26:02.530
> 
> 标签：javascript, jquery, counter, google-plus, subscription

[是否有可能以与http://www.tomanthony.co.uk/google_plus_one_api_example.php](http://www.tomanthony.co.uk/google_plus_one_api_example.php)相同的方式获得 Google+ 订阅的总数？没有php？

谢谢

更新：我尝试使用这段代码但不工作

```
函数getplusone（网址）{
     var plusones;
     $.getJSON('https://clients6.google.com/rpc?key=AIzaSyCKSbrvQasunBoV16zDH9R33D88CeLr9gQ' + 'callback=?',
        {
           “方法”：“pos.plusones.get”，
           “id”：“p”，
           “参数”：{
              “nolog”：真，
              “身份证”：网址，
              “来源”：“小部件”，
              "userId":"@viewer",
              "groupId":"@self"
           },
           "jsonrpc":"2.0",
           “键”：“p”，
           “api版本”：“v1”
        },
        功能（数据）{           
        plusones = data.count;
        $('#feed').html(plusones);
     });
  }

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-09T09:26:31.933

首先，您需要从 Google 控制台创建一个 API 密钥 - [https://console.developers.google.com](https://console.developers.google.com)

然后，您需要获取您需要获取关注者/订阅者数量的页面或个人资料 ID。

之后，您需要向此网址发送请求 - [https://www.googleapis.com/plus/v1/people/](https://www.googleapis.com/plus/v1/people/) {PROFILE_ID}?key={APIKEY}

使用下面的代码 -

```
var profileid = 'YOUR_PROFILE_ID';
var apikey = 'YOUR_API_KEY';
var url = 'https://www.googleapis.com/plus/v1/people/' + profileid + '?key=' + apikey;
$.ajax({
    type: "GET",
    dataType: "json",
    url: url,
    success: function (data) {
        var googlefollowcount = data.circledByCount;
        $(".googlefollowercount").html(googlefollowcount);
    }
}); 
```

该请求将像上面这样发送，但请确保您替换了您的个人资料 ID 和 API 密钥。

您可以从此网址查看并跟踪整个过程 - [http://www.bloggerever.com/2014/05/how-can-you-get-google-plus-follower.html](http://www.bloggerever.com/2014/05/how-can-you-get-google-plus-follower.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T22:14:32.657

这应该有效：

```
$.ajax({
    cache: false,
    type: "POST",
    url: "https://clients6.google.com/rpc?key=AIzaSyCKSbrvQasunBoV16zDH9R33D88CeLr9gQ",
    data: [{"method":"pos.plusones.get","id":"p","params":{"nolog":true,"id":"http://www.test.com","source":"widget","userId":"@viewer","groupId":"@self"},"jsonrpc":"2.0","key":"p","apiVersion":"v1"}],
    dataType: "jsonp",
    success: function (data) {
        console.log(data);
    },
    error: function(data){
        console.log(data);
    }
}); 
```

这是标准的 jQuery [ajax 请求](http://api.jquery.com/jQuery.ajax/)。您需要 dataType: "jsonp" 因为它是一个跨域请求，并且您需要 type: "POST" ，如您提供的示例中的[博客文章中所示。](http://www.tomanthony.co.uk/blog/google_plus_one_button_seo_count_api/)但是，当我尝试它时，它返回一个 state = "rejected" 的对象，我想这是因为密钥不再有效。如果您有自己的有效密钥，它应该可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T21:37:46.857

响应数据通常以 JSON 格式表示。通常，您可以通过服务器的 API 方法接收所需的数据，jQuery 具有发送此类请求的能力。它应该看起来像这样

```
$.ajax({
    cache: false,
    type: "GET",
    url: "https://example.org/method/getInformation",
    data: { uid: "1232", fields: name,lastname,photo,subscriptions, access_token: "1224beca124"},
    dataType: "jsonp",
    success: function (result) {
        console.log(result);
    }
}); 
```

所有数据仅作为示例。请注意，如果您将请求从您的服务器发送到 Google+ 的服务器，您需要使用属性 dataType:"jsonp"，因为这是一种处理跨域请求的方式。另请注意，对于某种信息，您可能需要也可能不需要令牌（通过身份验证系统授予，如 OAuth）。

# xcode - XCode 第一个教程中的非调整大小滑块

> ID：13424641
> 
> 赞同：0
> 
> 时间：2012-11-16T21:26:04.490
> 
> 标签：xcode, cocoa, slider, xcode4.5, autolayout

我刚刚完成了OS X 的[你的第一个应用程序](https://developer.apple.com/library/mac/#referencelibrary/GettingStarted/RoadMapOSX/books/RM_YourFirstApp_Mac/Articles/Introduction.html)教程。除了我注意到在“波兰语”的最后一节中，调整窗口大小的效果与预期的屏幕截图完全不同。![皱皱巴巴的窗户](../Images/a6d776a24344634f282afd5b8e2f3866.png)

该镜头顶部有一个文本字段，底部有一个按钮，中间有一个垂直滑块。我的滑块有一个固定高度的不可删除（？）约束，这是我第一次将它放在表单上时所做的高度。所以当我缩小窗口时，我会被截断

![截断窗口](../Images/546bdc41b7513f5d77a5859c71b3cc04.png)

正如我所说，我不能删除或切换到“小于或等于”垂直滑块上的约束。我该怎么做才能获得智能自动布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T05:49:48.113

好的，Apple 在更新他们的教程方面似乎有点慢。如果您正在部署到 [Mountain] Lion，则调整大小与教程中所暗示的约束不同。我得到了想要的效果

1.  在 Push Button 和视图底部之间创建约束。（顶部已经有这样的约束；这似乎与您最初将其拖到表单上时悬停的位置有关。如果没有，我会创建它。）
2.  在 Push Button 和 Slider 之间创建约束。同样，表单顶部已经存在这样的约束。
3.  **将滑块的高度约束的优先级设置为远低于其他约束的 1000 值的数字。**修改值不起作用，但修改优先级可以。

观察到的行为现在符合预期。希望这对其他人有帮助。

# postgresql - 为什么这个查询会导致顺序扫描？

> ID：13424650
> 
> 赞同：1
> 
> 时间：2012-11-16T21:27:01.523
> 
> 标签：postgresql, postgresql-performance

我对 PostgreSQL 很陌生，如果我不清楚一些明显的事情，请原谅我。我有一个数据库，其中约 4.5 亿行分布在 6 个表中（每个表都有主键）。当我运行以下查询时：

```
SELECT * FROM "Payments" AS p
JOIN "PaymentOrders" AS po ON po."Id" = p."PaymentOrderId"
WHERE po."Id" = 1000 
```

po."Id" 是主键。我只是 VACUUM ANALYZED 整个数据库。您可以**[在此处](http://explain.depesz.com/s/CrrS)**查看解释分析详细信息。PaymentOrders 表包含 4000 万行，而 Payments 包含 3.5 亿行。我在 Windows 8 机器、I5 CPU（4 核 3.3GHz）、8GB RAM 上运行 x64 PostgreSQL 9.2。你也可以[在这里](https://dl.dropbox.com/u/3055964/postgresql.conf)看到我的 postgresql.conf 文件。

任何人都知道为什么此查询会导致对 Payments 表进行顺序扫描？是我做错了什么还是 PostgreSQL 有一些严重的缺陷？我开始严重怀疑 PostgreSQL 查询计划器...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T21:30:54.430

您是否索引了 FOREIGN KEY 关系的两边？特别是，是否有索引`Payments.PaymentOrderID`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T01:15:50.050

po."Id" = p."PaymentOrderId" 是同一类型吗？它们需要匹配，以便规划器使用索引加入它们。

# jquery - jquery不从javascript函数调用Web方法

> ID：13424651
> 
> 赞同：5
> 
> 时间：2012-11-16T21:27:02.477
> 
> 标签：jquery, asp.net, ajax

长期在这里的 WinForm 程序员，但对 Web 编程场景很陌生。我有 Visual Studio 2010，并创建了一个新的网站项目。**我似乎无法让 ajax 调用我创建的网络方法。**当我点击页面上的按钮时，什么也没有发生。

当我创建一个网站项目时，看起来 jquery 1.4.1 会自动添加到 Scripts 文件夹中。

在 Default.aspx 中，我添加了 2 个脚本标签：

```
<script src="Scripts/jquery-1.4.1.js" type="text/javascript"></script>
<script language="javascript" type="text/javascript" src="Scripts/Process.js"> 
```

我在 Process.js 中定义 onclick 函数的页面上放置了一个按钮：

```
<input id="btnTest" type="button" value="Test" onclick="btnTest_onclick()" /> 
```

在 Process.js 我有以下代码：

```
function btnTest_onclick() {

    var strData = JSON.stringify({
        userid: 5
    });

    alert(strData);

    $.ajax({
        url: 'Default.aspx/GetData',
        type: "POST",
        data: strData,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: Success,
        failure: Failure,
        async: true
    });
}

function Success(data) {
    alert("success");
}

function Failure(data) {
    alert("failure");
} 
```

在 Default.aspx.cs 中：

```
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    [WebMethod()]
    public static string GetData(int id)
    {
        return "hello, my id is " + id;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T19:47:30.603

我不知道您是否需要使用 JQuery 发出 Ajax 请求，但您可以更轻松地使用 ASP.NET ajax 的功能对页面方法进行 ajax 请求。

首先我要注意，要使用 PageMethods，您需要将脚本管理器控件添加到页面并指定 EnablePageMethods="True"。

当您这样做时，ScriptManager 将呈现 PageMethods 客户端定义，该定义代表页面上已定义页面方法的代理，您可以使用 Ajax 请求轻松调用此方法。

因此，您可以尝试以下代码：

```
<asp:ScriptManager ID="ScriptManager" runat="server" EnablePartialRendering="true" EnablePageMethods="True" />
<input id="btnTest" type="button" value="Test" onclick="btnTest_onclick()" />
<script type="text/javascript">
    function btnTest_onclick() {

        PageMethods.GetData(5, Success, Failure);
    }

    function Success(data) {
        alert("success");
        alert(data);
    }

    function Failure(data) {
        alert("failure");
    }

</script> 
```

如您所见，此代码的代码行数较少，并且可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T21:53:16.140

数据项名称必须与页面方法参数匹配：

```
 var strData = JSON.stringify({
                id_MATCH: 5
            });

    [WebMethod()]
    public static string GetData(int id_MATCH)
    {
        return "hello, my id is " + id_MATCH;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T10:13:09.893

下面是 Ajax 帖子和处理的 web 方法

```
<input id="btnTest" type="button" value="Test" onclick="btnTest_onclick()" />
<script type="text/javascript" >
function btnTest_onclick() {

var strData = JSON.stringify({
    userid: 5
});

alert(strData);

$.ajax({
    url: 'Default.aspx/GetData',
    type: "POST",
    data: strData,
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: Success,
    failure: Failure,
    async: true
});
}

function Success(data) {
alert("success");
}

function Failure(data) {
alert("failure");
}</script>

[System.Web.Services.WebMethod()]
    public static string GetData(int userid)
    {
        return "hello, my id is " + userid;
    } 
```

您能否检查上面的代码，其中从 $.ajax 发送的数据名称与 web 方法中的相同。

谢谢

# java - 预印带缩进的二叉树

> ID：13424656
> 
> 赞同：0
> 
> 时间：2012-11-16T21:27:25.223
> 
> 标签：java, binary-tree

如何为每个后续级别预先打印带有缩进（3 个空格）的二叉树。此时，我正在使用辅助方法递归地打印出树，但我不确定如何编写缩进代码。这是我到目前为止所拥有的：

```
public void print() {
      printPreorder(root);
      System.out.println();
}

private void printPreorder(BinaryTreenode<E> node) {
      System.out.println(node.getData() + " ");
      if (node.getLeft() != null) {
            printPreorder(node.getRight());
      }
      if (node.getRight() != null) {
            printPreorder(node.getRight());
      }
} 
```

我的直接想法是放入一个计数器并在每次递归调用该方法时使其递增，然后为每个递增缩进三个空格，但我不确定这是执行此操作的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:30:39.173

你正朝着正确的方向前进。这是一些通用的伪代码：

```
void print(node) {
  print(node, "")
}

private void print(node, indent) {
  if(node is null) return
  output(indent + node.data)
  print(node.left, indent + "  ")
  print(node.right, indent + "  ")
} 
```

# r - R + httr 和 EC2 api 身份验证问题

> ID：13424660
> 
> 赞同：5
> 
> 时间：2012-11-16T21:27:48.680
> 
> 标签：r, amazon-ec2, ec2-ami, ec2-api-tools, httr

我想使用 R 包`httr`通过他们的 API 访问 EC2 服务。但我有点不确定如何开始，因为它不属于通常的“Oauth2.0”身份验证格式，在这种格式中你有通常的：密钥、秘密、令牌和签名系统。我认为 EC2 使用“签名版本 2”方法，但我不清楚它是如何工作的。

查看 EC2 提供的关于在[http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/using-query-api.html提出查询请求的文档](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/using-query-api.html)

我想我需要签名的价值....但不知道如何获得它

我尝试使用一些给定的命令`httr`，如下所示。我可以调整 URL 字符串中的大多数参数来代表我和我想做的事情，例如，`AWSAccessKeyId`等等……但只是不知道去哪里获取签名值。`ImageId``endpoint``Action`

同样在给出的一些示例中，它们似乎也没有提供秘密访问密钥......

因此，尝试过的命令如下，改变了一些代表我的值，但得到了以下结果：

```
require(httr)
GET("https://ec2.amazonaws.com/
?Action=RunInstances
&ImageId=ami-60a54009
&MaxCount=3
&MinCount=1
&Placement.AvailabilityZone=us-east-1b
&Monitoring.Enabled=true
&AWSAccessKeyId=0GS7553JW74RRM612K02EXAMPLE
&Version=2012-10-01
&Expires=2010-10-10T12:00:00Z
&Signature=lBP67vCvGlDMBQ1dofZxg8E8SUEXAMPLE
&SignatureVersion=2
&SignatureMethod=HmacSHA256") 
```

我得到了回应：

```
Response [http://aws.amazon.com/ec2/]
  Status: 200
  Content-type: text/html; charset=UTF-8

  <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>

<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <link rel="icon" type="image/ico" href="//d36cz9buwru1tt.cloudfront.net/favicon.ico">
  <link rel="shortcut icon" type="image/ico" href="//d36cz9buwru1tt.cloudfront.net/favicon.ico">
  <meta name="description" content="Amazon Elastic Compute Cloud delivers scalable, pay-as-you-go compute capacity in the cloud. " /><meta name="keywords" content="" /> ... 
```

有没有人对 EC2 api 及其身份验证过程有任何经验，使用 R 来设置和运行带有我选择的 AMI 的 linux 实例是否足够容易（其中加载了 R 和其他相关包），然后在这些实例中运行一些 R 命令，然后返回输出？

不要认为它与我的 sessionInfo 真正相关，但以防万一：

```
sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_GB.UTF-8/en_GB.UTF-8/en_GB.UTF-8/C/en_GB.UTF-8/en_GB.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] httr_0.2

loaded via a namespace (and not attached):
[1] digest_0.5.2   plyr_1.7.1     RCurl_1.95-1.1 stringr_0.6.1  tools_2.15.1 
```

**编辑：**

因此，在进一步尝试遵循@hadley 建议的文档时，这就是我尝试并得到的……任何关于我哪里出错的有用提示将不胜感激……：

```
require(httr)

aws.key <- "xxxxxxx"
aws.secret <- "xxxxxxxxxxxx"

verb <- "GET"
zone <- "ec2.amazonaws.com"
func <- "DescribeImages"

ami.number <- "ami-xxxxxxxxx"

params <- list(paste0("ImageId.1=",ami.number),
    "Version=2012-10-01",
    "Expires=2012-11-20T12%3A00%3A00Z")

# adding in method and key parameters for creation of string to sign
orig.len.params <- length(params)
params.w.method.key <- params
params.w.method.key[[orig.len.params+1]] <- "SignatureVersion=2"
params.w.method.key[[orig.len.params+2]] <- "SignatureMethod=HmacSHA1"
params.w.method.key[[orig.len.params+3]] <- paste0("AWSAccessKeyId=",aws.key)

# String to sign (s2s)
s2s <- paste(c(paste0(verb,"\n",zone,"\n","/\n","AWSAccessKeyId=",aws.key),paste0("Action=",func),paste(sort(unlist(params.w.method.key)),collapse="&")),collapse="&")

# Signature(sig)
sig <- hmac_sha1(aws.secret, s2s)

# adding in signature, method and key parameters for signed request url generation
params.w.sig.method.key <- params
params.w.sig.method.key[[orig.len.params+1]] <- paste0("Signature=",sig)
params.w.sig.method.key[[orig.len.params+2]] <- "SignatureVersion=2"
params.w.sig.method.key[[orig.len.params+3]] <- "SignatureMethod=HmacSHA1"
params.w.sig.method.key[[orig.len.params+4]] <- paste0("AWSAccessKeyId=",aws.key)

# Signed request (sr)
sr <- paste(c(paste0("https://",zone,paste0("?Action=",func)),paste(unlist(params.w.sig.method.key),collapse="&")),collapse="&")

# GET signed request
GET(sr) 
```

我得到了回应：

```
 Response [https://ec2.amazonaws.com?Action=DescribeImages&ImageId.1=[ami.number.from.before]&Version=2012-10-01&Expires=2012-11-20T12%3A00%3A00Z&Signature=[sig.value.from.before]&SignatureVersion=2&SignatureMethod=HmacSHA1&AWSAccessKeyId=[aws.key.from.before]/]
  Status: 401
  Content-type: 
 <?xml version="1.0" encoding="UTF-8"?>
 <Response><Errors><Error><Code>AuthFailure</Code><Message>AWS was not able to validate the provided access credentials</Message></Error></Errors><RequestID>5e10fb0b-f304-4677-9c64-98b4537c659a</RequestID></Response> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T12:37:56.780

这是我逐步将算法转换为 R 代码的尝试。根据我的经验，您确实希望单独执行每个步骤，以便您可以在每个阶段检查结果是否正确。

```
require("httr")
require("RCurl")
require("stringr")

# 0: get key and secret from envvars, and set up request parameters

aws.key <- Sys.getenv("AWS_KEY")
aws.secret <- Sys.getenv("AWS_SECRET_KEY")

verb <- "GET"
zone <- "ec2.amazonaws.com"

ami.number <- "ami-xxxxxxxxx"

params <- list(
  Action = "DescribeImages",
  ImageId.1 = ami.number,
  Version = "2012-10-01",
  Expires = "2012-11-20T12:00:00Z",
  SignatureVersion = 2,
  SignatureMethod = "HmacSHA1",
  AWSAccessKeyId = aws.key)

# 1a: Sort the UTF-8 query string components by parameter name
params <- params[order(names(params))]

# 1b: URL encode the parameter name and values
params_e <- lapply(params, curlEscape)
names(params_e) <- curlEscape(names(params_e))
params_str <- str_c(names(params_e), "=", unlist(params_e), collapse = "&")
params_str <- gsub("%2E",".",gsub("%2D","-",params_str))

# 2: Create the string to sign
string_to_sign <- str_c(
  toupper(verb), "\n",
  tolower(zone), "\n",
  "/", "\n",
  params_str
)

# 3: Calculate an RFC 2104-compliant HMAC
# 4: Convert the resulting value to base64.
hmac <- hmac_sha1(aws.secret, string_to_sign)

params$Signature <- hmac

GET(paste0("https://",zone),query=params) 
```

# sql-server-2008 - 如何为插入/选择中的每一行增加变量

> ID：13424664
> 
> 赞同：4
> 
> 时间：2012-11-16T21:28:19.917
> 
> 标签：sql-server-2008, variables, insert

我有一张带有主键的表`event_id`。我需要将`Plant`from更改`IM17`为`SG18`.

我不想删除这些行（出于历史原因保留）。执行以下 SQL 时出现 PK 违规。

```
DECLARE @plant CHAR(4)
DECLARE @l_event_id INT

SELECT @plant = 'SG18'
SET @l_event_id = (SELECT MAX(cast(event_id as int)) FROM dbo.event_header) 

INSERT INTO dbo.event_header (
            event_id, scenario_name, actor_code, method_code,
            SAP_plant_code, object_id,serial_no
            )
    SELECT @l_event_id + 1 , eh.scenario_name, eh.actor_code,
           eh.method_code, @plant, eh.object_id, eh.serial_no
    FROM dbo.event_header eh
    WHERE eh.SAP_plant_code = 'IM17'; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T21:34:09.773

您的方法不起作用，因为您`MAX(cast(event_id as int))`只评估一次 - 然后尝试插入所有 n 具有相同值的新行`event_id`....

你需要使用这样的东西来完成你的工作：

```
DECLARE @plant CHAR(4) = 'SG18'

DECLARE @l_event_id INT
SELECT @l_event_id = MAX(CAST(event_id AS INT)) FROM dbo.event_header) 

;WITH CTE AS
(
    SELECT 
        eh.scenario_name, 
        eh.actor_code,
        eh.method_code, 
        eh.object_id, 
        eh.serial_no,
        RowNum = ROW_NUMBER() OVER (ORDER BY eh.serial_no)
    FROM dbo.event_header eh
    WHERE eh.SAP_plant_code = 'IM17';
)
INSERT INTO 
    dbo.event_header (event_id, scenario_name, actor_code, method_code, SAP_plant_code, object_id,serial_no)
    SELECT
        @l_event_id + RowNum,
        scenario_name, actor_code, method_code, 
        @plant, 
            object_id, serial_no
    FROM
        CTE 
```

基本上，这个 CTE（公用表表达式）获取您需要的所有值，加上它用于`ROW_NUMBER()`生成序列号（从 1 到为 选择的行数`@plant = 'IM17'`）。

当您将其添加`RowNum`到先前的最大值中，并且现在没有其他任何数据插入该目标表时 - 那么您就有成功的机会！

# c++ - VBO 照明和索引

> ID：13424668
> 
> 赞同：1
> 
> 时间：2012-11-16T21:28:38.497
> 
> 标签：c++, opengl, lighting

既然我正在使用索引，我很难让我的 VBO 正确渲染法线。我很确定我的普通指针的偏移量有问题，但数学似乎加起来了。

我如何存储数据：

```
struct MyVertex
{
    float x, y, z;        //Vertex
    float nx, ny, nz;     //Normal
}; 
```

以下是我设置 VBO 的方法：

```
GLuint VertexVBOID, IndexVBOID;
glGenBuffers(1, &VertexVBOID);
glBindBuffer(GL_ARRAY_BUFFER, VertexVBOID);
glBufferData(GL_ARRAY_BUFFER, sizeof(MyVertex)*NumOfV, &ModelV[0].x, GL_STATIC_DRAW);

glGenBuffers(1, &IndexVBOID);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, IndexVBOID);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(unsigned int)*NumOfF*3, &ModelI[0], GL_STATIC_DRAW); 
```

我的渲染代码：

```
if(UsingVBO == false)
{
    glRotatef(Timer.getElapsedTime().asSeconds() * 10, 0, 1, 0);
    glBegin(GL_TRIANGLES);
        for(int i = 0; i < NumOfF*3; i+=3)
        {
            glNormal3f(ModelV[ModelI[i]].nx, ModelV[ModelI[i]].ny, ModelV[ModelI[i]].nz);
            glVertex3f(ModelV[ModelI[i]].x, ModelV[ModelI[i]].y, ModelV[ModelI[i]].z);

            glNormal3f(ModelV[ModelI[i+1]].nx, ModelV[ModelI[i+1]].ny, ModelV[ModelI[i+1]].nz);
            glVertex3f(ModelV[ModelI[i+1]].x, ModelV[ModelI[i+1]].y, ModelV[ModelI[i+1]].z);

            glNormal3f(ModelV[ModelI[i+2]].nx, ModelV[ModelI[i+2]].ny, ModelV[ModelI[i+2]].nz);
            glVertex3f(ModelV[ModelI[i+2]].x, ModelV[ModelI[i+2]].y, ModelV[ModelI[i+2]].z);
        }
    glEnd();
}
else
{
    glRotatef(Timer.getElapsedTime().asSeconds() * 10, 0, 1, 0);

    glEnableClientState(GL_VERTEX_ARRAY);
    glEnableClientState(GL_NORMAL_ARRAY);

    glBindBuffer(GL_ARRAY_BUFFER, VertexVBOID);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, IndexVBOID);

    glVertexPointer(3, GL_FLOAT, sizeof(MyVertex), 0);
    glNormalPointer(GL_FLOAT, sizeof(MyVertex), (void*)(NumOfV*sizeof(float)));//Number of vertices times size of float
    glDrawElements(GL_TRIANGLES, NumOfF*3, GL_UNSIGNED_INT, 0);//number of indices

    glDisableClientState(GL_VERTEX_ARRAY);
    glDisableClientState(GL_NORMAL_ARRAY);
} 
```

没有 VBO 的渲染：

![图1](../Images/d8210c39ee72bd0a703d308ec12272bd.png)

使用 VBO 渲染：

![图2](../Images/4f02ea81ade22ddf7ddc9038ece85f9c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T22:24:27.827

```
glNormalPointer(GL_FLOAT, sizeof(MyVertex), (void*)(NumOfV*sizeof(float)));//Number of vertices times size of float 
```

您的[偏移量](http://www.opengl.org/wiki/Vertex_Specification#Vertex_buffer_offset_and_stride)在这里是错误的。您正在提供交错的顶点数据，因此前三个浮点数是您的位置，接下来的三个浮点数是法线。因此，法线的基本偏移量是 3 个浮点数字节（跳过该位置）。*是整个模型*`NumOfV`中的顶点数，而不是数据结构中位置的浮点数。*`MyVertex`*

 *最好使用[宏`offsetof`来](http://en.cppreference.com/w/cpp/types/offsetof)完成：

```
glVertexPointer(3, GL_FLOAT, sizeof(MyVertex), (void*)offsetof(MyVertex, x));
glNormalPointer(GL_FLOAT, sizeof(MyVertex), (void*)offsetof(MyVertex, nx)); 
```*

# java - 如何使用 Dozer 为深层（或嵌套）对象属性进行映射？

> ID：13424673
> 
> 赞同：1
> 
> 时间：2012-11-16T21:29:02.050
> 
> 标签：java, mapping, clone, javabeans, dozer

我需要将具有嵌套对象（深）的对象的属性映射到 DTO 对象。实际上，我想将复杂对象压缩为具有甚至嵌套对象的所有属性的简单 DTO。我试过 BeanUtils 但这也不能做深拷贝。所以我正在探索 Dozer 来实施该解决方案。但即使是 Dozer 也在映射第一级属性，而不是深层嵌套对象属性。

这是我的课程：

```
 public class Child1  {
    private String name = "MyName";
    private String address = "ABC";

    public TestDTO dto = new TestDTO("50", "USA");

    public TestDTO getDto() {
        return dto;
    }

    public void setDto(TestDTO dto) {
        this.dto = dto;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getAddress() {
        return address;
    }
    public void setAddress(String address) {
        this.address = address;
    }   
}

    public class TestDTO {

    public TestDTO(){}

    public TestDTO(String age, String country) {
        super();
        this.age = age;
        this.country = country;
    }

    private String age = "27";

    private String country = "Canada";

    public String getAge() {
        return age;
    }

    public void setAge(String age) {
        this.age = age;
    }

    public String getCountry() {
        return country;
    }

    public void setCountry(String country) {
        this.country = country;
    }

} 
```

这是我想要缩小所有 te 属性的目的地（即使是嵌套对象 TestDTO ：

```
 public class TestFacade {

    public String name ;
    public String address;
    private String age ;
    private String country ;

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getAddress() {
        return address;
    }
    public void setAddress(String address) {
        this.address = address;
    }
    public String getAge() {
        return age;
    }
    public void setAge(String age) {
        this.age = age;
    }
    public String getCountry() {
        return country;
    }
    public void setCountry(String country) {
        this.country = country;
    }

} 
```

我的映射文件（我也尝试过没有配置文件，但它不起作用，所以我添加了一个映射文件：

```
<?xml version="1.0" encoding="UTF-8"?>

<mappings xmlns="http://dozer.sourceforge.net" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://dozer.sourceforge.net http://dozer.sourceforge.net/schema/beanmapping.xsd">

   <mapping>
    <class-a>Child1</class-a>
    <class-b>TestFacade</class-b>
</mapping>
<mapping>
    <class-a>TestDTO</class-a>
    <class-b>TestFacade</class-b>
    <field>
        <a is-accessible="true">country</a>
        <b is-accessible="true">country</b>
    </field>
    <field>
        <a>age</a>
        <b is-accessible="true">age</b>
    </field>
</mapping> 
```

最后是我的测试文件：

```
 public class QuickTest {

    public static void main(String[] args) {
        Child1 ch = new Child1();
        System.out.println("Get" + ch.getDto().getCountry());

        List myMappingFiles = new ArrayList();
        myMappingFiles.add("dozerMapping.xml");
        DozerBeanMapper mapper = new DozerBeanMapper(myMappingFiles);
        TestFacade f =  mapper.map(ch, TestFacade.class);
        System.out.println(ToStringBuilder.reflectionToString(f));

    }

} 
```

这是输出：

```
TestFacade@13adc56[name=MyName,address=ABC,age=<null>,country=<null>] 
```

嵌套对象的年龄和国家属性没有映射？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-18T07:26:11.837

接受的答案不正确。这里是正确答案

```
 <mapping>
    <class-a>Child1</class-a>
    <class-b>TestFacade</class-b>
    <field>
        <a>dto.country</a>
        <b>country</b>
    </field>
    <field>
        <a>dto.age</a>
        <b>age</b>
    </field>
 </mapping> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T16:35:12.210

我自己找到了解决方案...

我的映射文件的内容是错误的。我应该使用“。” 嵌套对象的符号。

映射文件的正确内容：

```
<mapping>
<class-a>Child1</class-a>
<class-b>TestFacade</class-b>
</mapping>
<mapping>
<class-a>TestDTO</class-a>
<class-b>TestFacade</class-b>
<field>
    <a>dto.country</a>
    <b>country</b>
</field>
<field>
    <a>dto.age</a>
    <b >age</b>
</field> 
```

```
output :

TestFacade@13adc56[name=MyName,address=ABC,age=50,country=USA] 
```

# oracle - 使用 NHibernate 在 Oracle 数据库中更新日期时出现“无效月份”异常

> ID：13424675
> 
> 赞同：0
> 
> 时间：2012-11-16T21:29:15.760
> 
> 标签：oracle, nhibernate, fluent-nhibernate

我正在尝试使用 nhibernate 更新我在 oracle 中的日期列，但我不断收到“Not a valid month”异常

```
 private static void InitializeSessionFactory()
    {
        _sessionFactory = Fluently.Configure().Database(OracleClientConfiguration.Oracle10.ShowSql().ConnectionString("Data Source="")
           ).Mappings(m =>
              m.FluentMappings.AddFromAssemblyOf<Status>())

           .BuildSessionFactory();
    } 
```

我使用的变量是 DateTime 对象，列是日期类型。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:19:02.600

表结构有问题

# ios - 呈现视图控制器后我的自动布局会发生什么？

> ID：13424679
> 
> 赞同：1
> 
> 时间：2012-11-16T21:29:47.303
> 
> 标签：ios, ruby, layout, rubymotion

我试图了解关闭呈现的视图控制器后视图布局会发生什么。任何人都能够解释为什么我的布局在以下情况下会中断： 1 个包含 1 个子视图控制器的主视图控制器。主视图控制器成功呈现了第三个视图控制器，但是在关闭呈现的 vc 后，子视图控制器已经改变了它的布局。这是演示我的困境的示例 RubyMotion 代码：

```
class AppDelegate
    def application(application, didFinishLaunchingWithOptions:launchOptions)
    @presenting = false

    window.rootViewController = main_vc

    main_vc.addChildViewController(content_vc)
    main_vc.view.addSubview(content_vc.view)

    constraints = NSLayoutConstraint.constraintsWithVisualFormat("H:|[content]|",
                                                             options: NSLayoutAttributeLeft,
                                                             metrics: nil,
                                                             views: { 'content' => content_vc.view })
    window.addConstraints(constraints)

    constraints = NSLayoutConstraint.constraintsWithVisualFormat("V:|[content]|",
                                                             options: NSLayoutAttributeTop,
                                                             metrics: nil,
                                                             views: { 'content' => content_vc.view })
    window.addConstraints(constraints)

    [ content_vc.view.subviews.first ].each do |item|
      main_vc.view.addConstraint(NSLayoutConstraint.constraintWithItem(item,
                                                              attribute: NSLayoutAttributeCenterX,
                                                              relatedBy: NSLayoutRelationEqual,
                                                              toItem: main_vc.view,
                                                              attribute: NSLayoutAttributeCenterX,
                                                              multiplier: 1, constant: 0))
      main_vc.view.addConstraint(NSLayoutConstraint.constraintWithItem(item,
                                                              attribute: NSLayoutAttributeCenterY,
                                                              relatedBy: NSLayoutRelationEqual,
                                                              toItem: main_vc.view,
                                                              attribute: NSLayoutAttributeCenterY,
                                                              multiplier: 1, constant: -40))
    end

    brand_vc.view.when_tapped do
      puts "tapped brand_vc"
      main_vc.dismissViewControllerAnimated(true, completion: lambda { })
    end

    content_vc.view.when_tapped do
      puts "tapped content_vc"
      main_vc.presentViewController(brand_vc, animated: true, completion: lambda { })
    end

    true
  end

  def window
    @window ||= UIWindow.alloc.initWithFrame(UIScreen.mainScreen.bounds).tap do |w|
      w.backgroundColor = UIColor.greenColor
      w.makeKeyAndVisible
    end
  end

  def main_vc
    @main_vc ||= UIViewController.alloc.initWithNibName(nil, bundle: nil).tap do |vc|
      vc.view.translatesAutoresizingMaskIntoConstraints = false
      vc.view.backgroundColor = UIColor.redColor
      vc.view.addSubview(MyLabel.alloc.init_with_text("Main VC - (red color)"))
    end
  end

  def content_vc
    @content_vc ||= UIViewController.alloc.initWithNibName(nil, bundle: nil).tap do |vc|
      vc.view.translatesAutoresizingMaskIntoConstraints = false
      vc.view.backgroundColor = UIColor.blueColor
      vc.view.addSubview(MyLabel.alloc.init_with_text("Content VC (blue color)"))
    end
  end

  def brand_vc
     @brand_vc ||= UIViewController.alloc.initWithNibName(nil, bundle: nil).tap do |vc|
       vc.view.translatesAutoresizingMaskIntoConstraints = false
       vc.view.backgroundColor = UIColor.yellowColor
     end
  end

end

class MyLabel < UILabel

  def init_with_text(str)
    self.init

    self.translatesAutoresizingMaskIntoConstraints = false
    self.text = str
    self
  end

end 
```

# symfony - Doctrine 2 将布尔值设置为空

> ID：13424680
> 
> 赞同：3
> 
> 时间：2012-11-16T21:29:48.043
> 
> 标签：symfony, doctrine-orm

我有一个 Doctrine2 实体，其类型为 boolean，在 mysql 中使用 tinyint 来存储结果。在初始添加一个值时，我可以将其设置为 null。如果我将除 0 或 1 以外的任何新值保存为 0 或 1，则将其保存为 0。

下面是带有 get 和 set 方法的变量。我已经完成了一个 var_dump 以确认该值在保存为 0 之前被设置为 null。

```
 /**
 * @var string $completed
 *
 * @ORM\Column(name="is_completed", type="boolean", length=1, nullable=true)
 * @Api(type="field")
 */
private $completed;

 /**
 * Set completed
 *
 * @param boolean $value
 */
public function setCompleted($value = null)
{
    if ($value=='') {
        $value = null;
    }
    $this->completed = $value;
}

/**
 * Get completed
 *
 * @return boolean
 */
public function getCompleted()
{
    if (is_null($this->completed)) {
        $this->completed = '';
    }
    return $this->completed;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:35:40.193

尝试这个：

```
public function setCompleted($value = null)
{
    if ('' === $value) {
        $value = null;
    }
    $this->completed = $value ? true : false;
} 
```

假设，当传递一个你想要的空字符串`null`，否则你想要`true`或者`false`基于 PHP 的默认行为`$value`。

正如建议的那样，吸气剂没有副作用！`getCompleted`只要您使用上述设置器，这应该与您的完全相同：

```
public function getCompleted()
{
    if (null === $this->completed)) {
        return '';
    }

    return $this->completed;
} 
```

# git - 升级 Symfony2 标准版时解决 Composer 合并冲突

> ID：13424681
> 
> 赞同：4
> 
> 时间：2012-11-16T21:29:53.777
> 
> 标签：git, symfony, composer-php

我的项目基于我从[原始 Symfony SE 存储库克隆](https://github.com/symfony/symfony-standard/tree/2.1)的 Symfony 标准版。Symfony 当然会分发它自己的文件`composer.json`和记录`composer.lock`其依赖关系的文件。

我使用该`master`分支进行项目开发，并且自从启动项目以来，我已将我自己项目的依赖项添加到`composer.json`并将它们锁定为`composer.lock`.

但现在是时候更新我的项目以使用 Symfony SE 2.1.3。

我将 Symfony 标准版存储库添加为 git 远程：

```
git remote add symfonyse git://github.com/symfony/symfony-standard.git 
```

我可以合并来自`symfonyse`存储库 2.1 分支的最新更改以获得最新的 2.1 开发：

```
git pull symfonyse 2.1 
```

拉到那里之后当然是合并冲突，因为我已经`composer.json`用自己的依赖项进行了修改，并且`composer.lock`之前被锁定到我的旧依赖项。

但是`composer.lock`现在的冲突是试图将最新的 Symfony2 SE 锁定依赖项合并到我自己项目的锁定依赖项中（包括我的部门和 Symfony 2.1.0 的部门）。手动合并这将非常繁琐！

解决这些冲突的最佳方法是什么`composer.lock`？

我是否应该`composer.lock`通过在启动合并之前`git checkout -- composer.lock`恢复`composer.lock`其内容来忽略合并冲突？我想我可以为 Symfony2 SE 需要的每个依赖项运行，这些依赖项在我刚刚合并`composer update`的新更改中已更新。`composer.json`

或者我应该接受与合并的所有更改`composer.lock`，提交它们，然后通过运行简单地更新我的所有项目依赖项`composer update`？无论如何，这基本上会生成一个全新的锁文件，其中包含 Symfony 2.1.3 和我自己的依赖项的锁。如果我还获得最新的`composer.json`更改，我只是不确定是否需要对锁定文件进行上游更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T11:20:44.307

我想说最好/理想的情况是，如果您有一些稳定的需求（没有充满 dev-master ..），那么您只需 rm composer.lock（或 git checkout）并运行更新以确保您获得最新的依赖项一切。

如果这是不可能的，那么您也可以从上游恢复更改，`composer update <specific packages>`并使它们加快速度。然而，这容易出错且乏味，所以我认为最好的办法是确保您的项目中有足够严格的依赖项，以便您可以毫无顾忌地运行 composer update。

# scroll - 如果 Direct2D 设置为 Graphics3D，TeeChart Scroller 会导致 RedCross 错误

> ID：13424683
> 
> 赞同：1
> 
> 时间：2012-11-16T21:29:59.067
> 
> 标签：scroll, pager, teechart, direct2d, graphics3d

我正在尝试 TeeChart .Net 组件，我专注于财务图表。当我尝试使用 PageScroller 工具来管理图表滚动时，它在 GDI 中运行良好，但在我设置 D2D 渲染时会导致红十字。

有人知道这是一个已知问题还是我在这段代码中做错了什么？

这是我添加寻呼机的方法：

```
public teeChartTestCtl()
    {
        InitializeComponent();

        tool = new Steema.TeeChart.Tools.ScrollPager(tChart1.Chart);
        black.Apply(tool.SubChartTChart.Chart);

        tChart1.Aspect.View3D = false;

        seriesMain.Clear();                       

        for (int i = 0; i < frmMain.tradingClient.chartData.Count; i++)
            {
                BarData bar = frmMain.tradingClient.chartData[i];
                seriesMain.Add(bar.Date, bar.Open,bar.High,bar.Low,bar.Close);
            }

        clonedSeries.DataSource = seriesMain;
        tool.Series = clonedSeries;
        tool.DivisionRatio = 6;

    } 
```

这是我设置 D2D 绘图的方法（如果图表上没有寻呼机，它工作正常）

```
 tChart1.Graphics3D = new Graphics3DDirect2D(tChart1.Chart); 
```

最好的，萨尔瓦多·罗西托。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:35:36.340

抱歉耽搁了。我在 TeeChart2D2 中使用 ScrollPager Tool 进行了许多测试，我们发现它产生了异常。我们已将其添加到编号为 [ **TD29016423** ] 的错误列表报告中，我们将尝试将其修复到即将发布的 TeeChartFor.Net 版本中。

谢谢，

# c# - Javascript 对象传递给 ASP.NET 处理程序

> ID：13424687
> 
> 赞同：2
> 
> 时间：2012-11-16T21:30:16.090
> 
> 标签：c#, javascript, asp.net, json, httphandler

如何将 JavaScript 对象传递给 ASP.NET 处理程序并解析值？

我创建了一个复杂类型的对象，例如：

```
function AccountObjCreate() {
var AccountsView = {};
AccountsView.Username = null;
AccountsView.Email = null;
AccountsView.Password = null;

return AccountsView;
} 
```

并像这样填充该对象：

```
var aView = AccountObjCreate();
aView.Username = $('#tbUserName').val().trim();
aView.Email = $('#tbEmail').val().trim().toLowerCase();
aView.Password = $('#tbPassword').val().trim(); 
```

然后我打电话：

```
$.post("/Handlers/AccountHandler.ashx", { obj: aView },
        function (results) {
            if (results.isSuccess) {
                alert(results.msg);
            } else {
                alert(results.msg);
            }
        }, "json"); 
```

当我在控制台中查看它时，我将**aView**中的所有数据都视为 json。

我的 ASP.NET 处理程序页面是

```
context.Response.ContentType = "application/json";
context.Response.ContentEncoding = Encoding.UTF8;
string obj = context.Request["obj"]; 
```

但是**obj**是NULL。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T21:41:28.097

为了将对象传递到服务器，您应该将其序列化为字符串（您可以使用此处描述的方法[或在](https://github.com/douglascrockford/JSON-js)[此处](https://stackoverflow.com/questions/3593046/jquery-json-to-string)包含用于 javascript 的 JSON 库），然后使用 .NET类对其进行反序列化。`JavaScriptSerializer`

JS 代码。

```
var data = {
    obj: JSON.stringify(aView)
};
$.post("/Handlers/AccountHandler.ashx", data, function(results) {
    if (results.isSuccess) {
        alert(results.msg);
    } else {
        alert(results.msg);
    }
}, "json");​ 
```

然后在服务器处理程序上，您可以使用提到的`JavaScriptSerializer`类解析 JSON 字符串。

```
public class AccountsView {
    public string Username;
    public string Email;
    public string Password;
}

public void ProcessRequest(HttpContext context)
{
    JavaScriptSerializer serializer = new JavaScriptSerializer();
    string value = context.Request["obj"];
    var aView = serializer.Deserialize(value, typeof(AccountsView));

    context.Response.ContentType = "application/json";
    context.Response.ContentEncoding = Encoding.UTF8;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T21:43:29.503

jQuery 不会自动为您字符串化对象。你必须自己做。

下载：[https ://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)

将脚本引用添加到您的 HTML 并将您的`$.post`调用更改为：

```
$.post("/Handlers/AccountHandler.ashx", { obj: JSON.stringify(aView, null, 2) }... 
```

ContentType 也不正确。我只是将其保留为默认值。虽然您将以这种方式提交 JSON 数据，但 ContentType 本身不是 JSON。内容类型将是常规发布数据。这是发布数据：

```
obj={"Username":"MyUsername", "Password":"MyPassword"... 
```

这是 JSON

```
{"obj":{"Username":"MyUsername", "Password":"MyPassword"... 
```

有时它会让人感到困惑。

更好的方法是研究 ASP.Net MVC。控制器方法能够自动将 JSON 对象反序列化为 .Net 模型，因此您可以在客户端代码上执行此操作：

```
$.post("/Handlers/AccountHandler.ashx", JSON.stringify({ view: aView }, null, 2) }... 
```

编写一个与 aView 的结构匹配的 .Net 类：

```
class Account { 
    public string Username { get; set; } 
    public string Password { get; set; }
    public string Email { get; set; }
} 
```

然后像这样定义一个控制器方法：

```
public JsonResult SaveAccount(Account view) 
```

让事情变得简单多了。:)

# java - 通过 ThreadGroupContext 注册的 Java7 PropertyEditors

> ID：13424690
> 
> 赞同：37
> 
> 时间：2012-11-16T21:30:35.027
> 
> 标签：java, java-7

我发现`PropertyEditorManager`每个基础注册/查找编辑器`ThreadGroupContext`，而不是 Java7 之前的每个全局注册表。

Java7 每次都会为新的`ThreadGroup`. 因此，PropertyEditorFinder（实际上注册/查找编辑器）又是新的。

Java 对某些类（ 、 等）使用预定义的编辑器，`Byte`并将`Long`它们注册到`PropertyEditorFinder`at `ctor`）。假设我想`PropertyEditor`为一些预定义的类（即 Long）注册我自己的。在 Java6 中很容易做到，但在 Java7 中，每次在 new 中创建线程时，`ThreadGroup`我都会丢失编辑器。

那么您能否告诉我有什么解决方案可以很好地处理哪些编辑器是为`ThreadGroup`Java7 中的新创建的？如果遇到一些问题，你如何克服它？

PS我想我应该为我的英语道歉=）

PPS`ThreadGroupContext`是`AppContext`. 而且我希望创建上下文的实现是相似的：两者都使用`ThreadGroup`到上下文之间的映射（`AppContext`在 java 6 中，`ThreadGroupContext`在 java 7 中）。java 6`AppContext`对 new使用相同的方法`ThreadGroup`作为其父级。换句话说`AppContext`，用于`ThreadGroup`jvm 中的整个树。但不幸的是，创造`ThreadGroupContext`是不同的——它只是一个新群体的新背景。因此，如果有一天`ThreadGroupContext`会使用相同的创建技术，这个问题就会自动解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-28T21:02:44.763

如果您有一个 FQPN 为 java.lang.Long 的类，您只需实现一个名为 java.lang.LongEditor 的类并将其与您的应用程序一起分发。一般来说，只需实现一个类，该类的名称是您要编辑的类的名称，并在其末尾附加 Editor，Java 应该会自动找到它

# xpages - 动态隐藏面板？

> ID：13424693
> 
> 赞同：0
> 
> 时间：2012-11-16T21:30:49.480
> 
> 标签：xpages

除了在面板的计算渲染属性中使用诸如范围变量之类的显而易见的东西之外，还有其他方法可以隐藏面板吗？

`getCompoent("panel1").hide()` 我尝试过但似乎没有用的东西，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T22:35:38.270

正确的方法是 getComponent("id").setRendered(false)。您可以通过 getComponent("id").setRendered(true) 再次显示它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T13:26:21.937

如果 extlib 可用，请检查 xe:dynmaicPanel 控件...非常有效，因为仅将显示的面板添加到组件树中...使用渲染属性方法，即使在 render=false 时面板仍会添加到组件树中。

还可以使用简单操作、客户端或服务器端 JavaScript 对动态内容显示进行编码。

... 通过 CSJS ...

```
 XSP.showContent("#{id:dynamicContent1}","keyToPanel1") 
```

... 通过 SSJS ...

```
 var dc=getComponent("dynamicContent1");
    dc.show("keyToPanel1") 
```

还是SS简单的动作...

```
 <xe:changeDynamicContentAction
         for="dynamicContent1" facetName="keyToPanel1">
    </xe:changeDynamicContentAction> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T22:15:43.247

您可以使用以下代码实现此目的：

```
var c = getComponent("YOURPANELNAMEHERE")
c.toggle() 
```

切换是您正在寻找的（而不是显示/隐藏）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T23:41:51.153

你试过扩展库中的 Switch 控件吗？不确定这是否对您要完成的工作有所帮助。

# python - Zodb 防止字段自动保存

> ID：13424700
> 
> 赞同：0
> 
> 时间：2012-11-16T21:31:05.130
> 
> 标签：python, pyramid, zodb

我有一个让我担心的问题。我有一个几乎只使用遍历的应用程序。

为了获得我的管理路径，我有一个连接到根的节点。on `__getitem__`，它返回`parent.__getitem__`这是我的实际根。与`containment`我的看法。我可以检查是否包含此管理节点。

问题发生在重新生根时。当我这样做时

```
class AdminRoot(object):

    __acl__ = [
                (Allow, 'g:admin', ALL_PERMISSIONS),
                (Deny, 'system.Everyone', ALL_PERMISSIONS),
              ]

    def __init__(self, parent, name):
        self.__parent__ = parent
        self.__name__ = name

    def __getitem__(self, name):
        item = Mapping.__getitem__(self.__parent__, name)
        item.__parent__ = self                                                                                                                                                              
        return item 
```

什么时候`self`影响到`item.__parent__`。它有时会保存为父节点。出于这个原因，当做`request.resource_url`. 它将从管理员根或真正的根输出。

我希望这种矫揉造作永远不会被挽救。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:41:30.717

每当您在`Persistent`对象上设置属性时，它都会保存到 ZODB（前提是没有异常触发事务中止）。

在 ZODB 中，对象实际上应该只有*一个*父级，因此只有一个规范 URL。不建议您尝试使此类对象看起来具有多个 URL，至少不要通过操作`__parent__`属性。

相反，您应该提供一种[`__resource_url__()`](http://pyramid.readthedocs.org/en/latest/narr/resources.html#overriding-resource-url-generation)方法来提供替代 URL。您可以使用 volatile 属性在对象上存储非持久性信息，以便使用这种方法。

易失性属性是任何以持久性引擎开头`_v_`并被持久性引擎忽略的属性。

# macos - OSX 视觉差异工具，仅显示带有上下文的更改行

> ID：13424701
> 
> 赞同：2
> 
> 时间：2012-11-16T21:31:17.580
> 
> 标签：macos, diff

我正在寻找一个 OSX 视觉差异工具，它只给我变化加上上下文中的一些前后行。本质上是你使用[unix diff context format](http://en.wikipedia.org/wiki/Diff#Context_format)得到的，但是在一个可视化的 diff 工具中。

SourceTree 在这方面做得很好，只显示了发生变化的部分（[示例](http://www.sourcetreeapp.com/img/screenshots/st_feature_diff_thumbnail.png)）。，但我想比较任意目录，然后比较它们的文件。

我知道关于 OSX 差异工具有几个 SO 问题，但我似乎无法在其中任何一个中找到这个关键功能。或者，也许我在其中一个中缺少查看选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:49:00.717

为什么我总是在提出问题后找到答案：/？

我发现 DiffMerge 的功能接近我想要的。它被称为“显示与上下文的差异”，但在您切换到“参考视图”之前它不会启用。仅供参考，您可以在使用 -ro2（以只读方式打开文件 2）标志打开时默认为“参考视图”，但是您稍后将无法切换到编辑视图。

也就是说，我想要一个像 diff 和 SourceTree 这样的线性视图给你（DiffMerge 有一个并排的视图）。如果有人知道具有该功能的视觉差异工具，那就太好了。

# java - Java：为什么我的 JButton 被绘制在背景图像后面？

> ID：13424702
> 
> 赞同：3
> 
> 时间：2012-11-16T21:31:24.063
> 
> 标签：java, swing, button, paintcomponent

这是有问题的 JPanel 类：

```
public class EntryDialog extends JPanel{

private static final long serialVersionUID = 1L;

MainWindow         mainWindow;
Image              background;
JButton            continueresume;
JButton            newresume;
JButton            settings;
JButton            exit;

public EntryDialog(MainWindow mainWindow){

    continueresume            = new JButton("Continue resume");
    newresume                 = new JButton("New resume");
    settings                  = new JButton("Settings");
    exit                      = new JButton("Exit");
    this.mainWindow           = mainWindow;
    this.background           = Utilities.getImage("images\\entryDialogBackground.jpg", true);

    this.setLayout(null);

    //continueresume button
    continueresume.setBounds(Utilities.getScaledWidth(1150), 
            Utilities.getScaledHeight(150), 
            Utilities.getScaledWidth(500), 
            Utilities.getScaledHeight(50));

    //newresume button
    newresume.setBounds(Utilities.getScaledWidth(1150), 
            Utilities.getScaledHeight(220), 
            Utilities.getScaledWidth(500), 
            Utilities.getScaledHeight(50));

    //settings button
    settings.setBounds(Utilities.getScaledWidth(1150), 
            Utilities.getScaledHeight(290), 
            Utilities.getScaledWidth(500), 
            Utilities.getScaledHeight(50));
    //exit button
    exit.setBounds(Utilities.getScaledWidth(1150), 
            Utilities.getScaledHeight(360), 
            Utilities.getScaledWidth(500), 
            Utilities.getScaledHeight(50));

    this.add(continueresume);
    this.add(newresume);
    this.add(settings);
    this.add(exit);

}

@Override
public void paintComponent(Graphics g){
    super.paintComponent(g);
    Graphics2D g2d = (Graphics2D) g;
    if(background != null){
        g2d.drawImage(background, 0, 0, this);
    }
    g2d.dispose();
} 
```

此 JPanel 正在绘制到另一个类的主框架上。正在发生的事情是“背景”被画得很好，但按钮却没有。一旦我用鼠标悬停在按钮上，按钮就会出现，但在那之前它们是不可见的。我已经搜索了几个小时并没有找到解决方案，因此我们将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T21:45:30.810

我不得不猜测它发生在您的 paintComponent 方法中。您正在调用 super.paintComponent() 将像往常一样绘制所有内容，包括按钮。然后你用 g2d.drawImage() 绘制它。你应该先画背景。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T23:10:12.450

```
/*Use this code as an example first run this and then use it for your requirements*/
package mypack;

import javax.swing.*;
import java.awt.*;

public class backgroundClass extends JPanel {

//Initializing the class Image
Image background;

//Setting up GUI
public backgroundClass(interfaceAndImage iai) {

 //Constructing the class "Toolkit" which will be used to manipulate our images.
 Toolkit kit = Toolkit.getDefaultToolkit();

 //Getting the "background.jpg" image we have in the folder
 background = kit.getImage("d:\\123.jpg");
}

//Manipulate Images with JAVA2D API. . creating a paintComponent method.
 public void paintComponent(Graphics comp) {

  //Constructing the class Graphics2D. Create 2D by casting the "comp" to Graphics2D
 Graphics2D comp2D = (Graphics2D)comp;

 //creating a graphics2d using the images in the folder and place it in a specific coordinates.
     comp2D.drawImage(background, 0, 0, this);
 }
} 
```

/*另一个类*/包mypack；

```
//Java Core Package
import javax.swing.*;
//Java Extension Package
import java.awt.*;

public class interfaceAndImage extends JFrame {

//Constructing the class we created called "backgroundClass" so we can
//use it here in our main program as a parent panel.
backgroundClass bc;

//Initializing our JComponents and the labels of our JButton and JLabel
JPanel panel1, panel2;
JLabel labels[];
JButton choices[];
JTextField inputs[];
String lebelName[] = {"Name:","Age:","Sex:","Address:","Tel. No.:"};
String buttonChoice[] = {"Register","Reset","Cancel"};

//Setting up GUI
public interfaceAndImage() {

 //Setting up the Title of the Window
 super("How to put a JTextField, JLabel, and JButton above image");

 //Set Size of the Window (WIDTH, HEIGHT)
 setSize(310,170);

 //Exit Property of the Window
 setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

 //Constructing the class "backgroundClass" and call the keyword "this" so it can
 //be recognizable by our main program.
 bc = new backgroundClass(this);

 //Constructing JPanel 1 and set its layout property including the background property
 //which is transparent
panel1 = new JPanel();
panel1.setLayout(new GridLayout(5,2));

//Constructing the class Color and set its property to 0,0,0,0 means no color.
Color trans = new Color(0,0,0,0);
panel1.setBackground(trans); //Setting JPanel 1 background to transparent

 //Constructing JPanel 2 and set its layout property
panel2 = new JPanel();
panel2.setLayout(new GridLayout());

//Constructing our JComponents setting its specific array size
 labels = new JLabel[5];
 inputs = new JTextField[5];
 choices = new JButton[3];

 //Adding our JPanel 1 and 2 to our class "backgroundClass" which is our parent panel
 bc.add(panel1, BorderLayout.NORTH);
 bc.add(panel2, BorderLayout.SOUTH);

 //Setting up the container ready for the components to be added.
 Container pane = getContentPane();
 setContentPane(pane);

 //Constructing JLabel and JTextField using "for loop" in their desired order
 for(int count=0; count<inputs.length && count<labels.length; count++) {
  labels[count] = new JLabel(lebelName[count], JLabel.RIGHT);
  inputs[count] = new JTextField(30);

  //Adding the JLabel and the JTextFied in JPanel 1
  panel1.add(labels[count]);
  panel1.add(inputs[count]);
 }

//Constructing all 4 JButtons using "for loop" and add them in the panel 1
 for(int count=0; count<choices.length; count++) {
  choices[count] = new JButton(buttonChoice[count]);
  panel2.add(choices[count]);
 }

//Adding the class "backgroundClass" to our container as parent panel
pane.add(bc);

 /**Set all the Components Visible.
  * If it is set to "false", the components in the container will not be visible.
  */
 setVisible(true);

 //Disable window size
 setResizable(false);
}

//Main Method
public static void main (String[] args) {
 interfaceAndImage iai = new interfaceAndImage();
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T21:43:03.957

我想你也有一个 JFrame 来放置这个面板。在将要包含在其中的所有内容都已初始化之后，尝试最后调用框架。

去年我遇到了同样的问题，这为我解决了这个问题。

# java - Java Netbeans 错误找不到符号，符号：class out，位置：class System， 预期的，类型的非法开始

> ID：13424703
> 
> 赞同：2
> 
> 时间：2012-11-16T21:31:24.617
> 
> 标签：java, netbeans

我在这一行的驱动程序类中遇到 Netbeans 错误：

```
System.out.print("Time waited is: " + (serializedTime - System.currentTimeMillis())/1000 + " secs."); 
```

错误是：“找不到符号，符号：类出，位置：类系统，预期，类型的非法开始。

```
import domain.PersistentObject;
import domain.PopulationRecord;
import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.FileReader;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import utilities.MiniProj2Utilities;

    public class MiniProj2Driver {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {

        // Make sure that you develop your main() method with reduced code as shown below. 
        // Not the use of private static methods in the driver called from main() method.

        // Read the CSV file records into a list of PopulationRecord objects...
        List<PopulationRecord> popList = MiniProj2Utilities.getDataRecords();

        // Display the list contents and size...
        MiniProj2Utilities.displayRecordsFromList(popList);

        // Create and populate the PersistentObject...
        PersistentObject po = MiniProj2Utilities.getPersistentObject(popList);
        try {
            ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("./data/population-record.ser"));
            oos.writeObject(po);
        } catch (IOException ex) {
        }

           long serializedTime = System.currentTimeMillis();

        System.out.println(po);

         try {
            Thread.sleep(5000);
        } catch (InterruptedException ex) {
            System.out.println("Sleep Error");
        }
        try {
            ObjectInputStream oos = new ObjectInputStream(new FileInputStream("./data/population-record.ser"));
            PersistentObject po1 = (PersistentObject)oos.readObject();
        } catch (IOException ex) 
        {
        } catch (ClassNotFoundException ex) {
        }
        }
        System.out.print("Time waited is: " + (serializedTime - System.currentTimeMillis())/1000 + " secs.");

    // Read the CSV file records into a list of PopulationRecord objects...
    private static List<PopulationRecord> getDataRecords() {
        BufferedReader br = null;
        String line = null;
        List<PopulationRecord> list = new ArrayList<PopulationRecord>();
        try {
            br = new BufferedReader(new FileReader("data/NST_EST2011_ALLDATA.csv"));
            br.readLine(); // Remove header line from file...
            while ((line = br.readLine()) != null) {
                String[] tokens = line.split(",");
                //System.out.println(line);            
                PopulationRecord pr = new PopulationRecord(
                    tokens[0], tokens[1], tokens[2], tokens[3], tokens[4],
                    Integer.parseInt(tokens[5]), Integer.parseInt(tokens[6]),
                    Long.parseLong(tokens[7]), Long.parseLong(tokens[8]),
                    Long.parseLong(tokens[9]), Long.parseLong(tokens[10]),
                    Long.parseLong(tokens[11]), Long.parseLong(tokens[12]),
                    Long.parseLong(tokens[13]), Long.parseLong(tokens[14]),
                    Long.parseLong(tokens[15]), Long.parseLong(tokens[16]),
                    Long.parseLong(tokens[17]), Long.parseLong(tokens[18]),
                    Long.parseLong(tokens[19]), Long.parseLong(tokens[20]),
                    Long.parseLong(tokens[21]), Long.parseLong(tokens[22]),
                    Long.parseLong(tokens[23]), Long.parseLong(tokens[24]),
                    Long.parseLong(tokens[25]), Long.parseLong(tokens[26]),
                    Long.parseLong(tokens[27]), Long.parseLong(tokens[28]),
                    Long.parseLong(tokens[29]));
                list.add(pr);
            }
        } catch (FileNotFoundException ex) {
            Logger.getLogger(MiniProj2Driver.class.getName()).log(Level.SEVERE, null, ex);
        } catch (IOException ex) {
            Logger.getLogger(MiniProj2Driver.class.getName()).log(Level.SEVERE, null, ex);
        }
        return list;
    }

    // Display the list contents and size...
    private static void displayRecordsFromList(List<PopulationRecord> list) {
        for (PopulationRecord record : list) {
            System.out.println(record);
        }
        System.out.println("Population records processed: " + list.size() + list.get(9));

    }

    private static PersistentObject getPersistentObject(List<PopulationRecord> list) {
        PersistentObject po = new PersistentObject();
        po.setSerializedTime(new Date());
        po.setPopulationList(list);
        return po;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T21:32:52.707

一个问题是，您的`System.out`陈述是外部方法。

```
 }
        System.out.print("Time waited is: " + (serializedTime - System.currentTimeMillis())/1000 + " secs."); 
```

把它移到大括号里面

```
 System.out.print("Time waited is: " + (serializedTime - System.currentTimeMillis())/1000 + " secs.");
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-05T11:39:17.893

```
public class potpie {

    private int day   = 0;
    private int month = 0;
    private int year  = 0;

    public potpie(int d, int m, int y){
        day   = d;
        month = m;
        year  = y;

        /* 
        No error of symbol: class out --------> SINCE IT IS INSIDE METHOD
        */
        System.out.printf("This is today's date = %d %d %d", month, day, year);
    }
    /* 
    Cannot find symbol: class out     --------> SINCE IT IS OUTSIDE METHOD
    */
    System.out.printf("This is today's date     = %d %d %d", month, day, year);   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-19T06:19:05.597

基本的事情是Java在封装上工作，即将代码和数据包装在一起，因此有了类的概念。现在要对类的实例变量进行操作，只能通过某种方法来实现。您的位置，即“System.out.print("your data");" 松散地躺在类的主体中，它具有类的实例变量。同样如前所述，要对实例变量进行操作，您可以仅使用方法或构造函数来执行此操作，因此由于此代码松散且没有调用它的方法，您会收到错误消息。因此，将其放入上面用户 Nambari 建议的方法中。

# c++ - 插入后使用 set::begin() 迭代器

> ID：13424711
> 
> 赞同：3
> 
> 时间：2012-11-16T21:32:22.487
> 
> 标签：c++, iterator, set, containers

考虑以下代码：

```
std::set<int> s;
auto it = s.begin();
s.insert(1);
s.insert(2);
std::cout << *it << std::endl; 
```

输出（至少对我而言）是`2`. 这里发生了什么事？`it`我取消引用它时的状态是什么？

我知道当我调用`begin()`一个空集时，我得到一个等效于`end()`. 我也知道调用`insert`a`set`不会使其迭代器无效。`end()`即使我现在已将元素插入到中，迭代器是否以某种方式保持等效`set`，所以现在我得到了未定义的行为？这是标准定义的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T21:37:02.617

当你`s.begin()`在这里调用时，它返回一个结束迭代器，因为容器是空的。此迭代器不会因插入而失效：每次插入后，此迭代器仍是结束迭代器。

取消引用此迭代器会导致您的程序表现出未定义的行为（无法取消引用结束迭代器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T21:37:43.737

迭代器`it`仍然等于`s.end()`。取消引用结束迭代器是未定义的行为。这就是你所看到的。试试这个例如

```
if (it == s.end())
{
    cout << "at end\n";
} 
```

这是法律代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T21:45:28.683

第一种情况下的“it”指向 s.end()，它是 fantom 元素的地址。fantom 元素的地址只不过是容器中最后一个元素之后的“不存在”元素的地址。一旦修改了集合，在插入之前最初指向 s.end() 的“it”可能与插入之后的 s.end() 不同。

因此，取消引用“它”会导致未定义的行为。

# sql-server-2008 - t sql - 子查询到变量

> ID：13424714
> 
> 赞同：0
> 
> 时间：2012-11-16T21:32:35.210
> 
> 标签：sql-server-2008, tsql

我似乎无法弄清楚如何将以下表达式/子查询返回的值加载到变量中：

```
declare @var int
set @var = null

  IF @var IS NULL
SELECT @var = t.col_one
    FROM my_table t
    WHERE t_datetime = (SELECT MAX(t_datetime) FROM t WHERE t.col_two = 1) 
```

如何将表达式的结果加载到变量中？

我已经更新了代码以反映下面的答案，但是问题仍然存在。没有错误，但稍后在我调用`@var`变量时在我的存储过程中仍然为空。这意味着这仍然不起作用。稍后在我使用的代码中：

```
t.col_three = @var 
```

此外，我没有使用`t.col_three = @var or @var is null`，因为变量不能为空：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T22:17:56.100

尝试将查询更改为以下内容。我将在不使用子查询的情况下实现您的需求，并且与您的查询不同，它将始终返回最多 1 个结果。

```
Select Top 1 @var = t.col_one
From my_table t
Where t.col_two = 1
Order By t.t_datetime Desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T21:34:34.387

尝试

```
SELECT @var = table.col from table ... 
```

还要确保查询只返回一行。

例如，在您的查询之前添加类似这样的内容：

```
DECLARE @count INT
SELECT @count = COUNT(*) FROM t WHERE t.col_two = 1
IF (@count = 0) RAISERROR('no rows found',16,1) 
```

看看它是否抛出错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T21:44:14.977

只要您的查询只返回一行，SET 或 SELECT 都可以正常工作。您可以使用诸如 MAX 之类的聚合函数来确保只有一行，或者您可以使用 SELECT TOP 1 来确保只返回一行。但是，如果您确实使用 TOP 1，请注意也以一种可以为您提供所需行的方式对查询进行排序。

以这种方式设置变量时，我更喜欢将 TOP 1 仅用作保护措施——这样的操作实际上是在寻找离散值，并且您的查询也应该以这种方式编写。

# windows - rsa 安全令牌命令行窗口

> ID：13424718
> 
> 赞同：0
> 
> 时间：2012-11-16T21:33:03.917
> 
> 标签：windows, rsa

是否可以运行 RSA SecureID Token (4.1) 并从 Windws (Window7) 上的命令行获取密码？我知道在 UNIX 上你可以[https://superuser.com/questions/353547/can-i-use-an-rsa-securid-software-token-on-ubuntu-linux](https://superuser.com/questions/353547/can-i-use-an-rsa-securid-software-token-on-ubuntu-linux)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T05:16:57.203

我找到了答案......使用 AutoHotKey（也可以使用 AutoIt）......无论如何我已经自动化了脚本 - [http://code.google.com/p/get-rsa-token-cli/](http://code.google.com/p/get-rsa-token-cli/)

另外，如果您想知道我是如何实现它的，请使用 autohotkey 脚本生成器

# php - jquery ui对话框打不开

> ID：13424720
> 
> 赞同：0
> 
> 时间：2012-11-16T21:33:07.087
> 
> 标签：php, jquery, jquery-ui, jquery-ui-dialog

我正在尝试在我的网络应用程序中实现一个 jquery ui 对话框，但它似乎根本不起作用。我正在使用 PHP。

我有一个**PHP**代码，它定义了 for 对话框和一个单击时将打开对话框的按钮。

```
 <div id="dialog">This should show up </div> 
<button id="opener">Open Dialog</button> 
```

我有一个单独的 JS 文件，在 ready 函数中，我有以下代码

```
$("#dialog").dialog({autoOpen:false}); 

$("#opener").click(function()
{
    $("#dialog").dialog("open");
}); 
```

单击按钮时，对话框似乎没有打开。我在用

*   jQuery V1.7.1
*   jQuery UI V 1.8.20

谁能帮我解释为什么它不起作用。

此外，我尝试将 autoOpen 设置为 true，并且该对话框在页面加载时似乎可以正常工作，但在单击时却不行。

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:42:15.460

确保在页面加载后运行点击代码，否则可能无法找到并附加。可以肯定的是，我将您的 JS 代码包装在 jQuery 的[.ready()中。](http://api.jquery.com/ready/)

以下示例应该按照您的要求进行。如果您需要进一步的帮助，我建议您发布一个我们可以查看和调试的 URL。

```
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Test</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <script>
    //Wait until the document is ready to be processed.
    jQuery(document).ready(function()
    {
        //Init your dialog box.
        $("#dialog").dialog({autoOpen:false}); 

        //Attach you click handler to the button.
        $("#opener").click(function(event)
        {
            //Stop any default actions on the button.
            event.preventDefault();
            //Open your dialog.
            $("#dialog").dialog("open");
        });
    });
    </script>
</head>
<body>

<div id="dialog">This should show up </div> 
<button id="opener">Open Dialog</button> 

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T21:41:29.110

这应该有效：

```
$("#opener").on('click', function(){
    $("#dialog").dialog("open");
});​ 
```

这是工作的[JSFiddle](http://jsfiddle.net/x3Wjj/)

# javascript - javascript / jquery - 选择两个数字中较大的一个

> ID：13424721
> 
> 赞同：30
> 
> 时间：2012-11-16T21:33:07.963
> 
> 标签：javascript, jquery, math, comparison, comparison-operators

我正在尝试使用 javascript 来选择两个数字中的较大者。我知道我可以写一个 if 语句，但我想知道是否有某种数学运算或其他东西可以提高效率。这是我使用 if 语句的方法：

```
if (a > b) {
    c = a;
}  
else {
    c = b;
} 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-11-16T21:34:59.267

您正在寻找我认为的 Max 函数....

```
var c = Math.max(a, b); 
```

这个函数也需要两个以上的参数：

```
console.log(Math.max(4,76,92,3,4,12,9));
//outputs 92 
```

如果您有一个任意长度的数组要遍历最大值，您可以使用`apply`...

```
var arrayOfNumbers = [4,76,92,3,4,12,9];
console.log(Math.max.apply(null, arrayOfNumbers));
//outputs 92 
```

或者，如果您使用的是 ES2015+，则可以使用扩展语法：

```
var arrayOfNumbers = [4,76,92,3,4,12,9];
console.log(Math.max(...arrayOfNumbers);
//outputs 92 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-16T21:34:53.813

```
c = (a > b) ? a : b; 
```

这将做同样的事情。这可能非常有用并且可以节省时间。

# mysql - 当 WHERE 条件不成立时，MySql Select 查询返回记录

> ID：13424725
> 
> 赞同：3
> 
> 时间：2012-11-16T21:33:40.630
> 
> 标签：mysql, select, conditional-statements

MySQL 查询返回一条记录，即使条件不满足。

```
SELECT * FROM `orders` WHERE order_id = '10000R' 
```

没有与此处给出的 WHERE 条件相匹配的记录。但是 MySQl 返回一条 order_id = 10000 的记录

看起来 WHERE 条件忽略了引号内的 alpha。如果查询中有任何问题或者这是 MySql 错误，请帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T21:36:27.767

我假设这`order_id`是一个`int`，并且 MySql 隐式转换 varchar`'10000R'`以匹配列的数据类型，从而去除尾随`'r'`.

请参阅MySql 文档中的“[表达式评估中的类型转换”。](http://dev.mysql.com/doc/refman/5.5/en//type-conversion.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T21:36:22.637

order_id 可能是某种类型的整数字段。MySQL 会将字符串 '1000R' 转换为整数 1000。这就是为什么您要返回结果。这不是一个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T21:37:19.170

确保您的 order_id 字段不是整数或其他数字字段。如果是，它可能会忽略尾随的 alpha。

[MySQL整数比较忽略尾随字母字符](https://stackoverflow.com/questions/5574807/mysql-integer-comparison-ignores-trailing-alpha-characters)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-21T10:15:06.827

MySql 表数据类型是 VARCHAR。请更改您的数据类型。

# domain-driven-design - DDD 实体、值对象和数据库映射和更新。不变的矛盾？

> ID：13424728
> 
> 赞同：2
> 
> 时间：2012-11-16T21:33:58.113
> 
> 标签：domain-driven-design, entity, value-objects

我一直在做 DDD 的一个小项目。我到处都看到**值对象是不可变的**，因此，你**不能修改**它。只有实体。

我将使用每个人都使用的示例。地址。假设**Address 是**Customer 实体的 VO（也是根聚合）。如果用户**更新他的 Address**，这在任何购物车场景中都有效，那么我应该怎么做？我必须修改那个 VO 地址才能将其保存到数据库中。意思是，这个 VO 必须以某种方式具有身份，以便我在数据库中识别它。除非 NHibernate 使用映射来处理它，对。LinqToSql 你不是这种情况。或者我想我必须创建一个新的聚合，其中地址是一个实体？然后几乎在我的聚合中需要地址的任何地方都有一个地址副本？

然而。我仍然无法包装整个 Entity/VO 概念。在我看来，就像在数据库中有表示的所有内容一样，即使您将其用作模型中的 VO，它在某种程度上也是一个实体，因为为了让您持久保存它，您需要某种 KEY 来在数据库中识别它.

归根结底，所有值对象的数据（大部分）都来自数据库。所以我仍然不明白在数据更新的情况下如何使它们不可变。

经过两个月的紧张阅读，我发现整个 DDD 是一个巨大的矛盾问题。阅读所有这些博客，你会明白我在说什么。不幸的是，那里有零演示应用程序，您可以将其用作榜样或指导。它们都受到开发者偏好的影响。然后他们最终攻击了对方的博客。一夜之间-DDD-Guru 的博客确实有助于解决整个社区的困惑。

感谢您的光临。期待建设性的讨论。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T03:15:22.660

我相信您的困惑在于数据库行标识和与 DDD 中的实体相关联的标识概念之间的人为耦合。它们肯定是相关的，因为实体将具有在数据库中表示为标识列的相应标识。但是，仅仅因为某物具有作为数据库行的身份，并不意味着该对象具有 DDD 意义上的身份。

在您的地址示例中，包含地址 VO 的值通常与客户实体存储在同一行中。通过这种方式，地址是一个值对象，因为它没有存储在自己的行中并且没有标识。更新地址时，您会更改客户实体上的地址属性值，这反过来会反映在数据库行中。

在某些情况下，值对象将存储在自己的行中。例如，在典型的销售订单模型中，订单是一个实体（聚合根），而行项目是值对象。虽然行项目是 VO，但在关系模型中，它们存储在自己的表中，并且很可能具有主键。然而，在域模型中，VO 与订单实体相关联，并且在该实体之外没有身份。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T06:43:08.500

实际上，周围有很多演示，可能在您想象的每一种技术中，从 Java 中的[原始 DDDSample](http://dddsample.sourceforge.net/)开始。此示例至少有两个 .NET 端口：[NDDD](http://code.google.com/p/ndddsample/)和[DDDSample.Net](https://github.com/SzymonPobiega/DDDSample.Net)。

至于 VO 和持久性，如果您将 VO 视为一个对象，它包含代表实体的表中的几列，那么这很容易（例如 Money VO 包装金额和货币）。当您想要在 SQL 级别规范化数据并为 VO 创建表（而不是将它们嵌入实体表中）时，问题就开始了。我不知道该问题的好的解决方案，但幸运的是，在使用关系存储实现 DDD 时，这不是一个好的做法。为什么？最重要的原则之一是聚合应尽可能相互独立。使用此规则在对象模型中共享 VO**类是可以的，但在数据存储中共享 VO****表**则不行，因为此单个表可能会成为例如锁定瓶颈。

简而言之：当使用 SQL 数据库存储域模型时，请考虑不要对聚合之间的模型进行规范化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-21T12:33:57.203

您也可以尝试从现实世界（或领域）的角度来看这些问题。地址很少改变。更常见的情况是客户更改了他的地址（例如他正在搬到另一个公寓），而地址本身也发生了变化。

考虑到这一点，地址必须是一个值对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-17T13:37:40.993

嘿，我看到这是一个非常古老的问题，但我正在寻求 DDD 并且有一些类似的问题。

我使用 DDD 找到的解决方案的最佳途径是忘记数据库并考虑模型。因此，在上述情况下，您有一个客户和一个地址 VO，并且您想要一个客户的地址列表，例如在电子商务网站的场景中，客户有多个送货地址可供选择。好吧，在域模型的真实上下文中，这些地址不仅仅是地址 VO，它们是 CustomerShippingAddress 实体。

因此，您的 CustomerShippingAddress 实体有一个身份，并且它有一个地址 VO。也许它还有一些其他的东西，比如 IsDefault 和 DateAdded 等

我建议您只能从传入地址 VO 的客户实体实例化 CustomerShippingAddress，然后您会返回 CustomerShippingAddress 的聚合根，其中包含对客户的 ID 引用。

这样您就可以维护您的 AddressVO，但可以在多个场景中重用该 VO。

当客户选择地址作为订单的送货地址时，他们选择的 AddressVO 将应用于订单聚合。这意味着该订单上的送货地址被及时锁定到当时的地址 VO。CustomerShippingAddress 稍后可能会被修改，但送货地址VO 在订单上将永远保持不变。

# sql-server - SQL Server如何将一个表中用户的权限分配给另一个表

> ID：13424739
> 
> 赞同：1
> 
> 时间：2012-11-16T21:34:39.270
> 
> 标签：sql-server, permissions

我正在尝试解决有关作业中用户权限的问题。

考虑一下，我有这些表：

```
User(UserName, Password, GroupID) -- Stores User account
Group(GroupID, GroupName) -- could be Admin, User 
```

我有一张桌子：

```
Product(ProductID, ProductName) -- Stores products info 
```

我可以将表 User 中的用户权限设置为表 Product 吗？

例如：表用户有两个用户帐户：John，Joan John 可以在表 Product 上插入、更新、删除，但 Joan 只能选择表 Product 上的产品。

# facebook - 无需用户访问应用程序即可获取新的 access_token

> ID：13424741
> 
> 赞同：0
> 
> 时间：2012-11-16T21:34:52.970
> 
> 标签：facebook, oauth, facebook-apps

（假设用户已授予我的应用程序必要的权限。）有没有办法在当前长期令牌到期之前或之前获取新的 access_token 而无需用户导航到我的应用程序页面，无论我使用基于 Canvas 的应用程序还是非基于 Canvas 的应用程序基于画布的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T22:50:13.703

没有用户似乎没有办法获得这个 access_token（offline_access 将在 12 月 5 日之前被弃用）。但这是获得更长寿命的 acccess_token （最长 60 天）的方法。您可以在这里阅读有关它的信息：http: [//developers.facebook.com/docs/howtos/login/extending-tokens/](http://developers.facebook.com/docs/howtos/login/extending-tokens/)

# c# - 如何将另一个项目（程序集）从我的解决方案添加到 CompilerParameters.ReferencedAssemblies 集中？

> ID：13424751
> 
> 赞同：2
> 
> 时间：2012-11-16T21:35:19.207
> 
> 标签：c#, codedom

假设我在我的主项目中编译了如下的一串代码。但是我想在CustomClass中实现一个接口。该界面位于我的解决方案中的另一个项目中（我的主项目中的部分引用）当我这样做时

**公共类 CustomClass : 接口类型**

我收到这样的错误。我如何引用另一个项目，以便我可以在我的动态代码中使用接口和属于它的其他类？

**c:\Users\xxx\AppData\Local\Temp\m8ed4ow-.0.cs(1,32: error CS0246: The type or namespace name 'InterfaceType' could not be found (您是否缺少 using 指令或程序集引用?)**

```
string code2 =
"    public class CustomClass : InterfaceType " +
"    {" +
"    }";
        // Compiler and CompilerParameters
        CSharpCodeProvider codeProvider = new CSharpCodeProvider();

        CompilerParameters compParameters = new CompilerParameters();
        compParameters.GenerateInMemory = false; //default
        //compParameters.TempFiles = new TempFileCollection(Environment.GetEnvironmentVariable("TEMP"), true);
        compParameters.IncludeDebugInformation = true;
        //compParameters.TempFiles.KeepFiles = true;
        compParameters.ReferencedAssemblies.Add("System.dll");

        CodeDomProvider compiler = CSharpCodeProvider.CreateProvider("CSharp");

        // Compile the code
        CompilerResults res = codeProvider.CompileAssemblyFromSource(compParameters, code2);

        // Check the compiler results for errors
        StringWriter sw = new StringWriter();
        foreach (CompilerError ce in res.Errors)
        {
            if (ce.IsWarning) continue;
            sw.WriteLine("{0}({1},{2}: error {3}: {4}", ce.FileName, ce.Line,     ce.Column, ce.ErrorNumber, ce.ErrorText);
        }

        string error = sw.ToString();
        sw.Close();

        // Create a new instance of the class 'CustomClass'
        object myClass = res.CompiledAssembly.CreateInstance("CustomClass"); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-16T22:15:44.960

底线是您需要将其他项目添加到您的 CompilerParameters.ReferencedAssemblies 集合中。这可能很棘手，因为 CodeDOM 需要能够访问程序集，因此程序集要么需要位于 GAC 中，要么您需要将程序集的完整路径添加到 ReferencedAssemblies 位置。

如果您在执行 CodeDOM 编译器的项目中引用包含“InterfaceType”的项目，那么一种简单的方法是执行以下操作`compilerParameters.ReferencedAssemblies.Add(typeof(InterfaceType).Assembly.Location);`：如果没有，您将不得不想出一些其他方法来确保 CodeDOM 可以找到您想要引用的程序集。

# python - 给定一个大的 url 列表，有什么方法可以检查哪些是活动的/非活动的？

> ID：13424753
> 
> 赞同：0
> 
> 时间：2012-11-16T21:35:44.477
> 
> 标签：python

假设我给出了这个 url 列表：

> website.com/thispage
> 
> website.com/thatpage
> 
> website.com/thispageagain
> 
> website.com/thatpageagain
> 
> website.com/morepages

... 可能超过 1k 个网址。

遍历此列表并检查页面是否已启动的最佳/最简单方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T22:41:07.097

这是 Python 中的一个示例

```
import httplib2

h = httplib2.Http()
listUrls = ['http://www.google.com','http://www.xkcd.com','http://somebadurl.com']
count = 0

for each in listUrls:
    try:
        response, content = h.request(listUrls[count])
        if response.status==200:
            print "UP"
    except httplib2.ServerNotFoundError:
        print "DOWN"
    count = count + 1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T21:38:22.443

对它们中的每一个执行 HEAD 请求。

使用这个库：[http ://docs.python-requests.org/en/latest/user/quickstart/#make-a-request](http://docs.python-requests.org/en/latest/user/quickstart/#make-a-request)

```
requests.head('http://httpbin.org/get').status_code 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T21:42:20.437

有一个 SO 答案显示了如何在 Python 中执行 HEAD 请求：

[如何在 Python 2 中发送 HEAD HTTP 请求？](https://stackoverflow.com/questions/107405/how-do-you-send-a-head-http-request-in-python)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T21:39:43.033

打开一个线程池，为每个线程打开一个 Url，等待 200 或 404。冲洗并重复。

# jquery - jquery 鼠标悬停

> ID：13424755
> 
> 赞同：2
> 
> 时间：2012-11-16T21:35:55.397
> 
> 标签：jquery

在 Jquery 中，有一种方法可以阻止该功能在您确定它也不是孩子`mouseout()`时停止激活。`div`我的html代码。

```
 <div class="featured">
            <div class="featured_top">
                    <p><span class="theme">Theme</span> Transparent </p>                                        
            </div>
            <div class="pic" style="background: blue">
                <!-- image -->                              
            </div>
            <div class="featured_des">
                <p> this is awesome theme </p>
            </div>                                  
  </div> 
```

我的 js(jQuery)

```
$(document).ready(function(){
      $(".pic").mouseover(function(){
        $(this).animate({
            width: 0                        
            });
        });

        $(".pic").mouseout(function(){
            $(this).animate({
                width: 214                      
            });

             });
       }); 
```

**所以我的问题**是，当它是div时，你能阻止该`mouseout()`功能激活吗？`featured_des`atm 它会为类的宽度设置动画`.pic`，效果很好，但是当它完成时`animate`，光标在它上面，`featured_des`它会激活`mouseout`并再次隐藏描述

**示例::** [http://www.grubber.co.nz/developer/_social_development/market.html](http://www.grubber.co.nz/developer/_social_development/market.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:52:07.607

`pic`在你的and周围添加一个包装器`featured_des`。

```
 <div class="picwrapper">
        <div class="pic" style="background: blue">
            <!-- image -->                              
        </div>
        <div class="featured_des">
            <p> this is awesome theme </p>
        </div>
    </div> 
```

然后JS：

```
$('.picwrapper').hover(function() {
    $(this).find('.pic').animate({ width: 0 });
}, function() {
    $(this).find('.pic').animate({ width: 214 });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:11:45.573

I think you're looking for `mouseenter` and `mouseleave` so the events don't bubble up:

```
$(document).ready(function() {
    $(".pic").width($(".pic .container img").width());
    $(".pic").height($(".pic .container img").height());
    $(".pic").mouseenter(function() {
        $(".pic .container").animate({
            width: 0
        }, function() { $(".pic .container img").hide(); });
    });

    $(".pic").mouseleave(function() {
        $(".pic .container img").show();
        $(".pic .container").animate({
            width: 214
        });

    });
}); 
```

[Here's the fiddle](http://jsfiddle.net/vseXP/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T21:52:25.060

当鼠标离开特定元素时，'mouseout' 将触发..不管是什么原因导致它离开。在您的情况下，重新调整大小会使 pic 太小以至于鼠标无法再悬停在它上面。

修改您的 HTML 以将功能描述和图片都包含在分类为“容器”的 div 中，这样您悬停的对象就不会消失而导致鼠标移出。

```
<div class="featured">
        <div class="featured_top">
                <p><span class="theme">Theme</span> Transparent </p>                                        
        </div>
        <div class="container">
             <div class="pic" style="background: blue">
                 <!-- image -->                              
             </div>
             <div class="featured_des">
                 <p> this is awesome theme </p>
             </div>                 
        </div>                 
</div> 
```

还有你的 jQuery

```
$(document).ready(function(){
      $(".container").mouseover(function(){
          $(this).find('.pic').animate({
                 width: 0                        
          });
      });

      $(".container").mouseout(function(){
          $(this).find('.pic').animate({
                 width: 214                      
          });
      });
}); 
```

# iphone - 在视图中添加/删除视图的问题

> ID：13424761
> 
> 赞同：3
> 
> 时间：2012-11-16T21:36:17.847
> 
> 标签：iphone, ios, animation, view, ios6

我正在尝试将视图（_countdown）添加/删除到下面的视图中，添加视图没有问题。但是当我试图删除它时，什么也没有发生。我所有的 NSLog() 都被调用了，所以一切都应该工作。但是当它到达 -(void)removeAnimation （尝试使用动画删除时钟视图，因此它不再在主视图中可见）时，什么也没有发生。为什么？我真的不明白为什么。我已经尝试了几个小时来解决这个问题，但我找不到任何让它工作的方法......

```
@implementation MainViewController {
    ClockView *_clock;
    ClockView *_countdown;
} 
```

viewDidLoad：

```
-(void)viewDidLoad{
timerAddClock = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(checkNotificationExist) userInfo:nil repeats:NO];
} 
```

checkNotification存在：

```
 -(void)checkNotificationExist {
        NSUserDefaults *userDef = [NSUserDefaults standardUserDefaults];

        if ([userDef boolForKey:@"NotificationExist"]) {
            NSDate *notificationDate = [[NSUserDefaults standardUserDefaults] valueForKey:@"NotificationDate"];
            NSDate *now = [NSDate date];

            NSTimeInterval interval = [notificationDate timeIntervalSinceDate:now];

            if (interval > 0) {
            if (_clock == nil) {
                _countdown = [[ClockView alloc] initWithCountdownToTime:[NSDate dateWithTimeIntervalSinceNow:interval]];

                [self.view addSubview:_countdown];

                    [UIView animateWithDuration:0.5f
                                     animations:^{
                                    [_countdown setFrame:CGRectMake((self.view.frame.size.width - _countdown.frame.size.width) / 2, (self.view.frame.size.height), _countdown.frame.size.width, _countdown.frame.size.height)];  
}];
                            }
                    self.timeIntervalTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(checkTime) userInfo:nil repeats:YES];
                }
} 
```

检查时间

```
-(void)checkTime {
    NSLog(@"running");

    [timerAddClock invalidate];
    self.timerAddClock = nil;

    NSDate *notificationDate = [[NSUserDefaults standardUserDefaults] valueForKey:@"NotificationDate"];
    NSDate *now = [NSDate date];

    NSTimeInterval interval = [notificationDate timeIntervalSinceDate:now];

    if (interval < 1) {
    NSUserDefaults *userDef = [NSUserDefaults standardUserDefaults];
    [userDef setBool:NO forKey:@"NotificationExist"];

    [[NSUserDefaults standardUserDefaults] removeObjectForKey:@"NotificationDate"];

    self.addAnimation = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(removeAnimation) userInfo:nil repeats:YES];
    } 
```

移除动画

```
-(void)removeAnimation {
    NSLog(@"Removing animation...");

    [UIView animateWithDuration:0.5f
                     animations:^{
                         [_countdown setFrame:CGRectMake((self.view.frame.size.width - _countdown.frame.size.width) / 2, (self.view.frame.size.height - 800), _countdown.frame.size.width, _countdown.frame.size.height)];

                     } completion:^(BOOL finished) {
                         [_countdown removeFromSuperView];
                     }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:09:54.573

One possible explanation is that you might be adding more of one of that _countdown views. So if checkNotifications is called several times (there is a timer with an interval, so I assume that is possible) and the line where to add the _countdown view is run more than once, then if you only remove on of the views you won't see anything because the repeated view would be on top.

Just an idea.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T22:13:09.537

首先，你应该调用`[super viewDidLoad];`你的`- (void)viewDidLoad;`方法。此外，您可能已将`_countdown`视图添加为某处的子视图，这可能会导致问题？

您可能还想再次检查所有的`NSTimer`，并确保它们被正确调用。你的`addAnimation`计时器对我来说似乎很可疑。

您可以尝试仅隐藏视图而不是将其从超级视图中删除。那肯定行得通。

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T22:41:16.757

根据您最后的评论，当您调用 removeFromSuperview 时，似乎有一个动画正在进行中。因此，视图不会被删除。

我认为问题出在您的 checkNotificationExists 方法中：您创建了一个动画，但在完成块之外启动了计时器。尝试将其移动到完成块内

# ms-access - 如何更新 ms access vba 中的多值组合框？

> ID：13424766
> 
> 赞同：0
> 
> 时间：2012-11-16T21:36:25.970
> 
> 标签：ms-access, vba, ms-access-2007

我需要知道如何更新 MS Access 中多值组合框的值？我有一个连续的表格，其中每条记录都包含一个多选组合框。我需要做的是在`AfterUpdate()`该组合框的 proc 中对表单上的所有类似记录进行更新。

我目前正在使用 UPDATE sql 在具有常规组合框的表单上执行此操作。但是，我收到一条错误消息，指出“UPDATE 或 DELETE 查询不能包含多值字段”。所以我需要另一种选择。

我可以简单地循环遍历记录集中的记录，但我希望有一个更有说服力的解决方案。:-)

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:59:14.620

哇，我找到答案了......

不要使用多值组合框！！！

...现在重新设计....

# sql - 在另一个表 Postgres 中转换 int[] 元素中的 id

> ID：13424768
> 
> 赞同：2
> 
> 时间：2012-11-16T21:36:35.723
> 
> 标签：sql, arrays, postgresql, postgis

我有一个包含整数数组的表（我们称之为 lineTable）。该 int 数组表示另一个表 (pointTable) 中的唯一 id 数组。点表又包含 3 列（id、x、y）。

我希望能够将 lineTable.points 中的每一个整数转换为整数数组的数组。

```
lineTable              pointTable
| id | points |        | id | x | y |
| int| int[]  |        | int|int|int|

lineTable
| 1 | {1, 2, 3, 4, 5} |
| 2 | {4, 7, 5, 2, 3} |
| 3 | {8, 1}          |
etc

pointTable
| 1 | 1 | 0 |
| 2 | 2 | 1 |
| 3 | 5 | 6 |
| 4 | 7 | 0 |
| 5 | 2 | 4 |
| 6 | 5 | 2 |
| 7 | 4 | 4 |
| 8 | 5 | 9 | 
```

所以我想要的最终输出是

```
lineValues
| {{1, 0}, {2, 1}, {5, 6}, {7, 0}, {2, 4}} |
| {{7, 0}, {4, 4}, {2, 4}, {2, 1}, {5, 6}} |
| {{5, 9}, {1, 0}}                         | 
```

注意：ID 可以是任意数字，并且不是连续模式（可能是 1、2、5、10、11、18）

我正在使用 Postgre 9.2。

感谢您的任何帮助。如果您需要/想要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:40:53.717

如果您想在数组中使用复合类型（例如本机 Point 类型），这非常简单。像这样的东西：

```
select dt.id, array_agg(point(p.x, p.y))
from pointtable p
join (
    select id, unnest(points) as p
    from linetable
) as dt on p.id = dt.p
group by dt.id
order by dt.id; 
```

会给你这种输出：

```
 id |                 array_agg                 
----+-------------------------------------------
  1 | {"(1,0)","(2,1)","(5,6)","(7,0)","(2,4)"}
  2 | {"(2,4)","(4,4)","(7,0)","(5,6)","(2,1)"}
  3 | {"(1,0)","(5,9)"} 
```

然后你可以处理这些点。

如果你真的想要一个二维数组，那么你可以[创建自己的聚合函数](http://www.postgresql.org/docs/current/static/sql-createaggregate.html)：

```
create aggregate
array_cat_agg(int[])
(sfunc = array_cat, stype = int[], initcond = '{}'); 
```

进而：

```
select dt.id, array_cat_agg(array[[p.x, p.y]])
from pointtable p
join (
    select id, unnest(points) as p
    from linetable
) as dt on p.id = dt.p
group by dt.id
order by dt.id; 
```

得到这个：

```
 id |          array_cat_agg          
----+---------------------------------
  1 | {{1,0},{2,1},{5,6},{7,0},{2,4}}
  2 | {{2,1},{5,6},{7,0},{2,4},{4,4}}
  3 | {{1,0},{5,9}} 
```

请注意`array[[...]]`诡计，您需要确保获得正确版本的`array_cat`，如果您只是`array[...]`这样，您最终会得到一个扁平的数组，这会让您感到难过。您不能只[`array_agg`](http://www.postgresql.org/docs/current/static/functions-aggregate.html#FUNCTIONS-AGGREGATE-TABLE)在此处使用，因为没有数组数组之类的东西，并且`array_agg(array[p.x, p.y])`想要创建数组数组。因此自定义聚合。

# jquery - 删除在父页面正文中找到的 Head 内容和/或正文标签

> ID：13424776
> 
> 赞同：0
> 
> 时间：2012-11-16T21:37:22.787
> 
> 标签：jquery, head

由于我的 cms 工具，我需要在我的站点上的一些包含文件中添加`<head>`和。`<body>`出于显而易见的原因，我不希望父页面看到包含页面的 <`head>`区域或`<body>`标签。cms 有一个标准 if，else 规则我正在使用 on.ready 来应用基于登录/退出 cms 的规则。

我想知道 jquery 是否有办法在父母体内：（1）删除所有`<head>`标签和其中的所有内容，以及（2）删除`<body>`标签，但保留它们的内容。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T21:43:37.067

是的，它被称为 .load()。很多人似乎对此有疑问，因此您可能需要稍微研究一下这个问题。但基本上，它允许您加载文档并仅返回其中的一部分..

如果您在构建代码方面需要帮助，请告诉我，但这应该包含您需要的所有信息。 [http://api.jquery.com/load/](http://api.jquery.com/load/)

示例显示在链接中

```
$('#b').load('article.html #target'); 
```

基本上，我将阅读 arctile.html 以找到 id #traget，并在 #b 元素中返回此数据。简单的。;)

如果另一方面，您想从当前页面中删除，您也可以使用 .remove() 函数

要从您的当前页面中删除头部，您只需要做

```
 $('head').remove(); 
```

请注意，它也会删除其中的孩子。

# java - 为什么在检查数组字符串是否为空时出现空指针异常？

> ID：13424779
> 
> 赞同：0
> 
> 时间：2012-11-16T21:37:28.930
> 
> 标签：java, android, arrays, string, nullpointerexception

为什么在下面的第二个 if 语句中出现空指针错误？

如果数组字符串为空，我正在检查该 if 语句`scores`，但它总是崩溃说空指针异常。如果有帮助，我还添加了 LogCat。

```
String[] scores;
String times = "";

public void Read() {
    FileInputStream inputStream = null;

    try {

        inputStream = openFileInput("timesfile");

        byte[] reader = new byte[inputStream.available()];

        while (inputStream.read(reader) != -1) {
        }
        times = new String(reader);

    } catch (IOException e) {
        e.printStackTrace();

    } finally {
        if (inputStream != null) {
            try {
                    inputStream.close();
            } catch (IOException e) {
                    e.printStackTrace();
            }

        }

    }

    if (!times.isEmpty() && times != null && times != ""
                    && times.length() != 0) 
    {
        scores = new String(times).split(",");
        Arrays.sort(scores);
    }
    if (scores.length != 0 && scores != null && scores.length >= 4) { //I get a nullpointer exception here!

        better = false;
        if (Integer.parseInt(endTime.split(":")[0]) > Integer
                        .parseInt(scores[0].split(":")[0])) {
            better = true;
        } else if (Integer.parseInt(endTime.split(":")[1]) > Integer
                        .parseInt(scores[0].split(":")[1])) {
            better = true;
        } else if (Integer.parseInt(endTime.split(":")[2]) > Integer
                        .parseInt(scores[0].split(":")[2])) {
            better = true;
        } else {
            better = false;
        }

    }

} 
```

日志猫：

```
11-16 22:32:21.195: E/AndroidRuntime(28584): FATAL EXCEPTION: Thread-2278
11-16 22:32:21.195: E/AndroidRuntime(28584): java.lang.NullPointerException
11-16 22:32:21.195: E/AndroidRuntime(28584):    at com.example.app.TestActivity$TestView.scoreRead(TestActivity.java:426)
11-16 22:32:21.195: E/AndroidRuntime(28584):    at com.example.app.TestActivity$TestView.over(TestActivity.java:303)
11-16 22:32:21.195: E/AndroidRuntime(28584):    at com.example.app.TestActivity$TestView.run(TestActivity.java:267)
11-16 22:32:21.195: E/AndroidRuntime(28584):    at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T21:46:46.217

你能试着把它 `times != null` 放在最左边吗？操作顺序是从左到右。

> if (times != null && !times.isEmpty() && times != "" && times.length() != 0)

编辑：是的@Simon是对的..`times != ""`应该是 `!times.equal("")`

但无论如何，你已经在检查`!times.isEmpty()`，所以你根本不需要那块。

这应该这样做：

> if (times != null && !times.isEmpty() )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T17:27:53.647

代替

```
if (scores.length != 0 && scores != null && scores.length >= 4) { 
```

和

```
if (scores != null && scores.length >= 4) { 
```

代替

```
if (!times.isEmpty() && times != null && times != "" && times.length() != 0) 
```

和

```
if (times != null && !times.isEmpty()) 
```

即在条件前面放置空检查并删除不必要的警卫。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T21:41:09.337

先做`if(times!= null)`_

然后嵌套在那做`!times.isEmpty()`

isEmpty() 检查字符串的长度是否为零。不为空或不为空。0 的长度是`""`，而不是 null

如果它是另一个正在检查的字符串，则同样的原则适用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T22:55:19.877

变量**times** not 为空。她没有用空值初始化，而是用空值初始化。

NullPointerException 可以在 TestActivity 类的第 426 行中找到。我认为那一行是：

```
if (scores.length != 0 && scores != null && scores.length >= 4) { 
```

因此，如果您更好地查看您的代码，**分数**变量为空，因为上述条件是错误的。

为此更改您的代码：

```
if (!times.isEmpty()) 
{
     scores = times.split(",");
     Arrays.sort(scores);
}
if (scores != null && scores.length > 0) {

   ...

}
else {

   System.err.println("There isn't score");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T21:47:37.457

这不是安全检查。

```
times != "" 
```

String 的相等运算符测试 2 个 String 是否是同一个对象。相反，使用

```
!times.equal("") 
```

`!=`有时可能工作的是“”，因为Java“实习生”字符串并且偶然地，它们可能是同一个对象，但你不应该依赖它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-16T22:14:35.547

实际上，您的分数数组仅在以下情况下才被初始化

!times.isEmpty() && times != null && times != "" && times.length() != 0

是真的。它发生了，所以它不是真的:)。并且在时间上调用方法并将其比较为空是没有意义的。然而，这里没有 NPE，所以让我们省略它。

!times.isEmpty 与 times.legth != 0; 相同

times != "" 只要用 'new' 操作初始化并且没有被实习，它总是为真。

所以所有条件都等于（你可以看到时间不为空）

!times.isEmpty

无论如何，您应该在涉及对已检查对象的方法调用的其他检查之前检查 null 。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-16T21:52:51.133

您的问题和您的评论不匹配，但无论您是检查`scores`还是`times`必须检查它们是否**是**`null` *first*。（否则你会看到 NPE。）

利用：

```
if (times != null && !times.isEmpty() && times != "" && times.length() != 0) 
```

和：

```
if (scores != null && scores.length != 0 && scores.length >= 4) { 
```

* * *

> 为什么在下面的第二个 if 语句中出现空指针错误？

当您尝试对变量调用方法时会发生 NullPointerException `null`。因此，如果`scores`是`null`，则此代码`scores.length`正在尝试调用`null.doSomething()`. 你不能要求什么都不做。

# facebook - Facebook 多个 og:image 标签 - 哪个是默认标签？

> ID：13424780
> 
> 赞同：36
> 
> 时间：2012-11-16T21:37:34.130
> 
> 标签：facebook, facebook-opengraph

我的网站指定了多个 og:image 标签，我想控制哪一个是默认标签。它与指定它们的顺序有关吗？

现在，图像以 #3、#1、#2 的顺序出现在链接帖子选择器中（#3 是默认值），这似乎很不寻常。

感谢您提供的任何见解。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-20T17:47:35.693

我很好奇，所以我四处寻找“默认图像”问题的答案。从字面上看，这是我能找到的唯一一个关于这个问题的研究的链接，他们建议高分辨率图像将获得最高优先级：

[如何为评论中插入的链接设置打开图形图像的优先顺序。（不分享或墙贴。）](https://stackoverflow.com/questions/8365156/how-to-set-priority-order-to-open-graph-images-for-links-that-are-inserted-in-co/12726245#12726245)

但是，基于该示例，FB 可能只是选择列表中的最后一个 og:image 标记。之前的 SO 回答得出了类似的结论：

[Facebook sharer.php，如何拥有多个 og:image 标签？](https://stackoverflow.com/questions/3944268/facebook-sharer-php-how-to-have-multiple-ogimage-tags/5568462#5568462)

如果我用更多问题回答了你的问题，我深表歉意，但也许这至少会给你一个很好的线索。如果您添加更多标签并且 FB 始终选择最后一个标签，那么您有望获得解决方案。:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-02-19T05:15:45.690

来自[开放图协议](http://ogp.me/#array)：

> **数组**
> 
> 如果一个标签可以有多个值，只需`<meta>`在您的页面上放置同一个标签的多个版本。第一个标签（从上到下）在冲突期间优先。
> 
> `<meta property="og:image" content="http://example.com/rock.jpg" />`
> 
> `<meta property="og:image" content="http://example.com/rock2.jpg" />`

当我在[Facebook 共享调试器](https://developers.facebook.com/tools/debug/)中进行测试时，我只看到预览的第一张图片。但是当我开始在 Facebook 上分享我的 URL 时，我看到预览的第一张图片以及用于选择第二张图片的左/右按钮，如下所示：

[![Facebook 左/右图像分享按钮。](../Images/df0b433c100efeb62479744392631efa.png)](https://i.stack.imgur.com/urxJC.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-24T21:10:50.427

这对我有用。在页面的标题中，插入此代码

```
<meta property="og:image" content="http://yourdomain.com/yourimage.png" /> 
```

这使我选择的图像优先。它应该是您页面上分辨率最高的照片之一。

[然后，用这个](https://developers.facebook.com/tools/debug/og/object/)强制 Facebook 清除它的缓存。此调试器工具还将向您显示 Facebook 偏爱的图像。

# php - 向 API 提交表单变量并打印结果

> ID：13424784
> 
> 赞同：0
> 
> 时间：2012-11-16T21:38:03.343
> 
> 标签：php, xml, forms, api

我正在尝试创建一个表单，用户可以在其中检查他们的礼品卡余额。我们使用的公司有可用的 API。我希望能够创建一个表单，用户输入他们的姓名和礼品卡号，点击提交，然后返回他们的卡余额。

我创建了表单，但不熟悉将变量传递给 api 并将 xml 结果解析到网页。

**API地址：** [http ://apps.card9.com/api/?cmd=balance&](http://apps.card9.com/api/?cmd=balance&card=) **card=卡号**&key=**我的api密钥**

我创建了一个基本表单：

```
<form action="balance.php" method="post">
    Name: <input type="text" name="fname" />
    Card #: <input type="text" name="cardId" />
    <input type="submit" value="submit" name="submit">
</form> 
```

我尝试使用的 PHP 脚本遇到了：

```
if(isset($_POST['cardId'])){
    $userId = $_POST['cardId'];
    $obj = simplexml_load_file('http://apps.card9.com/api/?cmd=balance&card=' . $cardId . '&key=**my api Key**');
}else{
    // failed to load the xml
} 
```

如果有人可以帮助或指出我正确的方向，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:40:38.787

使用[simplexml_load_file()](http://php.net/manual/en/function.simplexml-load-file.php)您应该首先查看`$obj`返回的内容

```
print_r($obj); 
```

然后你可以确定你需要拉出哪些节点：

```
$node = $obj->node; 
```

或者如果节点名称中有连字符

```
$node = $obj->{'node-name'}; 
```

# html - 到桌子上，网格线都很漂亮

> ID：13424786
> 
> 赞同：0
> 
> 时间：2012-11-16T21:38:11.303
> 
> 标签：html, css, asp.net-mvc

我在 asp.net MVC 3 项目中有一个视图。到目前为止一切都很好，但是所有的上下文都打包在一起了。我只希望这张桌子有坚实的边界。

有简单的 CSS（内联）吗？

```
 <table>
    <thead>
        <tr>
            <td>ID</td>
            <td>PIN</td>
            <td>First Name</td>
            <td>Middle Name</td>
            <td>Last Name</td>
        </tr>
    </thead>
    @foreach (var r in ViewBag.collections)
    { 
        <tr>
            <td>@r.IDNumber</td>
            <td>@r.PIN</td>
            <td>@r.FirstName</td>
            <td>@r.MiddleName</td>
            <td>@r.LastName</td>
        </tr>
    }
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T21:41:55.537

您可以在 CSS 规则中对表格应用一些边框样式：

```
table tr {
    border: 1px solid black;
}
table td, table th {
    border-right: 1px solid black;
} 
```

大多数浏览器仍然支持`<table border="1">`，但不建议再做

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T21:56:56.080

坚实的边界在哪里？围绕每个单元格，行，整个表格，以上所有？不确定您在寻找什么。其他人回答了关于表格边框的问题。

如果您正在寻找斑马剥离，有几种方法可以做到这一点：

**CSS 3**

在 IE <= 8 中不支持

```
<style>
    tbody > tr:nth-child(odd) { background-color: #eee; }
    tbody > tr:nth-child(even) { background-color: #eee; }
<style> 
```

**在代码中**

```
Just add two css classes: `tr.odd` and `tr.even`

<style>
    .odd { background-color: #eee; }
    .even { background-color: #eee; }
<style> 
```

那么在你看来：

```
var i = 0;
@foreach (var r in ViewBag.collections)
{ 
    var rowClass = i++ % 2 == 0 ? "even" : "odd"
    <tr class="@rowClass">
        ...
    </tr>
} 
```

**使用 jQuery**

添加上述奇数/偶数 css 类。

```
<script>
    $(function() {
        $('tbody > tr:odd').addClass('odd');
        $('tbody > tr:even').addClass('even');
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T21:42:13.297

内联会很糟糕，在外部样式表中更好，或者至少在头部有：

```
​td{padding:5px 8px;border:1px solid #CCC;}​ 
```

如果它必须是内联的，那么

```
<td style="padding:5px 8px;border:1px solid #CCC;"> 
```

演示：http: [//jsfiddle.net/calder12/YTVzM/](http://jsfiddle.net/calder12/YTVzM/)

# ruby-on-rails - 如何重构此方法以返回最近的日期？

> ID：13424787
> 
> 赞同：0
> 
> 时间：2012-11-16T21:38:12.597
> 
> 标签：ruby-on-rails

我正在尝试查找联系人被标记为“完成”的最近时间。联系人属于用户。我的用户模型中有这种方法，但我知道它可能会得到改进。

```
 def last_contact_done_days
      date_array = self.contacts.find(:all, :select => "date_done").to_a
      most_recent = date_array.max
      last_done_days_ago = Date.today - most_recent[:date_done]
      return last_done_days_ago
  end 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T21:46:53.793

你可以使用这个方法：

```
def last_contact_done_days # => date_done of the most recent contact if it exists
  contact = self.contacts.order('date_done DESC').first
  return contact.date_done if contact
  nil
end 
```

或（使用[try方法的](http://rubydoc.info/docs/rails/Object%3atry)**较短版本**）：

```
def last_contact_done_days
  self.contacts.order('date_done DESC').first.try(:date_done)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T21:51:07.957

你可以这样重新定义它：

```
def last_contact_done_days
  Date.today - contacts.order('date_done DESC').first.date_done
end 
```

# ios - 如何在界面生成器中呈现自定义 UINavigationBar

> ID：13424792
> 
> 赞同：0
> 
> 时间：2012-11-16T21:38:51.100
> 
> 标签：ios, xcode

在 Interface Builder 中，我已将导航栏设置为自定义 UINavigationBar，但它不会使用我的 drawRect 覆盖呈现。我正在使用带有 XCode 4.5.1 的情节提要。

# ruby - 实例变量继承

> ID：13424793
> 
> 赞同：18
> 
> 时间：2012-11-16T21:38:53.143
> 
> 标签：ruby, inheritance, instance-variables

有人可以解释一个类如何访问其超类的实例变量以及这不是继承吗？我说的是“Ruby 编程语言”和示例

```
class Point
  def initialize(x,y) # Initialize method 
     @x,@y = x, y      # Sets initial values for instance variables
  end

end

class Point3D < Point
 def initialize(x,y,z)
   super(x,y)
   @z = z
 end
 def to_s
   "(#@x, #@y, #@z)"  # Variables @x and @y inherited?
 end
end

Point3D.new(1,2,3).to_s => "(1, 2, 3)" 
```

如果它们没有被继承，类如何`Point3D`访问`x`和`y`内部？`to_s`书上说：

> “它们有时看起来被继承的原因是实例变量是由首先为它们赋值的方法创建的，而这些方法通常是继承或链接的。”

但我无法弄清楚它的真正含义。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-16T22:14:08.587

### 你是对的，这本书是错的，或者至少措辞不好

* * *

我会争辩说，这本书完全是错误的，或者充其量只是做出了一个相当混乱的解释。

在所有 OO 语言中，超类和派生类没有单独的对象。当您创建派生类的实例时，它*也是*超类的实例。有一个对象，它同时是两个类。

由于只有一个对象，因此只有一组实例变量。

这与所有其他 OO 系统相同。这本书关于运行哪个方法以及方法本身是如何真正继承的重要性的奇怪论点并没有增加清晰度。

术语的问题在于，当然，在动态类型系统中，首先没有声明，因此子类的定义当然不会继承任何字段声明......因为当然没有任何. 但是仅仅因为没有要继承的类型不会使相反的陈述（“实例变量不被继承”）变得更加正确，并且它增加了相当多的混乱，因为它暗示了父级将以某种方式具有*不同*的实例变量，这是试图以他们的方式谈论对象的荒谬结果。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-16T21:42:51.743

`super(x,y)`调用基类的构造函数，也就是initialize方法。如果取`super(x,y)`出来，那么变量`@x`并`@y`不会出现在派生类中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T21:43:31.703

它的措辞令人困惑。@x、@y 和 @z 都是该 Point3D 实例上的实例变量。如果该 super(x,y) 不存在，Point3D 实例将没有@x 或@y。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-19T03:21:36.887

您可以比较这两个示例。

示例 1：似乎 B 继承`@i`自 A。

```
class A
  def initialize()
    @i = "ok"
  end
end

class B < A
  def print_i()
    p(@i)
  end
end

B.new().print_i()   # Shows "ok" 
```

示例 2：如果 B 有自己的`initialize()`，则找不到`@i`。

```
class A
  def initialize()
    @i = "ok"
  end
end

class B < A
  def initialize()
  end

  def print_i()
    p(@i)
  end
end

B.new().print_i()   # nil, print nothing 
```

`class B`示例 1 中的`@i`，实际上是`A#initialize()`在您调用 时隐式创建的`B.new()`。

在您的情况下，`@x`并且`@y`in`Point3D`实际上是由创建的`Point#initialize()`，而不是继承自`Point`

# sql - SQL：可以在 where 子句中使用输入数组吗？

> ID：13424796
> 
> 赞同：8
> 
> 时间：2012-11-16T21:39:18.993
> 
> 标签：sql

> **可能重复：**
> [参数化 SQL IN 子句？](https://stackoverflow.com/questions/337704/parameterizing-an-sql-in-clause)

假设我有一个学校表，其中 school_name, school_enrolment

作为对我的程序的输入，有人键入了他们希望查看其注册的学校列表。而不是生成如下的 sql 查询：

```
SELECT * FROM school_table
WHERE
school_name = 'program_input_1' or school_name = 'program_input_2' or school_name = 'program_input_3' 
```

是否有可能或直接做类似的事情

```
SELECT * from school_table
WHERE
school name in [array of program inputs] 
```

作为一种更简洁的写作方式？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T21:40:37.770

是的，这`IN`是为了：

```
SELECT col1, col2, ..., coln
FROM school_table
WHERE school_name IN ('program_input_1', 'program_input_2', 'program_input_3') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T21:43:34.283

您可以使用该`IN(...)`子句：

```
WHERE School_name in ('school 1','school 2') 
```

在传递数组方面，它取决于您用于生成 SQL 的编程语言。

您必须编写一个循环遍历数组的自定义函数，动态生成 IN 子句

# c - 使用 GCC 向量内在函数计算 x^y

> ID：13424800
> 
> 赞同：6
> 
> 时间：2012-11-16T21:39:54.077
> 
> 标签：c, performance, optimization, gcc, sse

假设我有一个 2 元素向量定义如下（使用打包向量的 GCC 语法）

```
// packed vector of 2-elements
typedef double v2d __attribute__((vector_size(sizeof(double)*2)));

v2d x = ...;
double y = ...;

x[0] = pow(x[0], y)
x[1] = pow(x[1], y) 
```

我想知道是否有更快的方法来使用向量运算进行两次幂计算。架构是 x86-64 上的 GCC，平台特定代码是可以的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T00:32:50.530

是的，如果您没有特殊情况（负数、0、1、NaN 等），这应该是可能的，因此代码路径是线性的。

[这](http://www.netlib.org/fdlibm/e_pow.c)是 IEEE754 双精度函数的通用代码`pow`，它没有循环结构，所以如果你充实所有的特殊情况，向量化似乎很简单。玩得开心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-18T13:15:51.853

您可以直接循环元素并使用正确的选项 GCC 和 ICC 将使用矢量化`pow`函数

```
#include <math.h>
typedef double vnd __attribute__((vector_size(sizeof(double)*2)));

vnd foo(vnd x, vnd y) {
    #pragma omp simd
    for(int i=0; i<2; i++) x[i] = pow(x[i], y[i]); 
    return x;
} 
```

只需`-O2`ICC 即可轻松生成`call __svml_pow2`。[SVML](https://software.intel.com/en-us/node/524289)（短向量数学库）是英特尔的向量化数学库。[使用`-Ofast -fopenmp`](https://sourceware.org/glibc/wiki/libmvec)GCC 生成简单`call _ZGVbN2vv___pow_finite`的 .

Clang 不会对其进行矢量化。

[https://godbolt.org/g/pjpzFX](https://godbolt.org/g/pjpzFX)

# mysql - 获取与相同标签sql匹配的实体列表

> ID：13424803
> 
> 赞同：0
> 
> 时间：2012-11-16T21:40:04.950
> 
> 标签：mysql, sql, database-design, select

我有 2 个实体，比如实体 [x] 和 [y]。这两个实体都与一些标签相关联。实体 [y] 用于搜索相似的 [x] 实体。例如。如果实体 [y] 由标签“书”和“博客”组成，我想要一个包含这两个标签的所有 [x] 实体的列表。

我的表架构是：

```
[x] 
entity_id int    // its a foreign key from entity table  
tag varchar      // this is the tag to be matched
(one entity can have multiple tags hence multiple rows of same entity
id will be inserted)

[y]
entity_id int    // again a foreign key from entity2 table
tag varchar      // tags again
(same comment comes here too) 
```

再举一个例子，假设我有一个 [y] entity_id 10，而这 10 个 entity_id 与 3 个标签相关联，比如“bus”、“train”和“plane”，当我想使用这个 entity_id 10 进行查找时，我想要与所有这 3 个标签关联的 [x] entity_ids 列表。[x] entity_id 也可以有额外的标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:00:54.203

给定 a`y.entity_id`作为参数，`10`在此示例中，此查询返回`x`没有实例的每条记录，其中存在`y`没有对应记录的`x`记录：

```
SELECT
    *
FROM
    x
WHERE NOT EXISTS (
    SELECT *
    FROM 
        y LEFT JOIN
        x subX 
            ON subX.tag = y.tag
            AND subX.entity_id = x.entity_id
    WHERE 
        y.entity_id = 10
        AND subX.entity_id IS NULL  
) 
```

# ruby-on-rails - 每当 => cron 作业不访问我的模型/数据库时

> ID：13424810
> 
> 赞同：2
> 
> 时间：2012-11-16T21:40:52.390
> 
> 标签：ruby-on-rails, cron, whenever

我正在使用 gem 来创建一个 cron 作业。这个 cron 作业需要定期在我的 rails 应用程序上运行一个辅助方法。这个辅助方法检查我的模型的每个实例并决定是否更新它。

/app/helpers/auctions_helper.rb：

```
module AuctionsHelper

  def self.checkForExpiredAuction
    # method to update each auction that has expired
    puts "There are currently #{Auction.count} auctions."

    @auctions = Auction.all
    @auctions.each do |auction|
      if auction.end_time > Time.now.utc
        auction.price = 1000000
        auction.save
        puts "just updated #{auction.product} auction"
      end
    end
    puts "just updated any auctions that had expired"
  end
end 
```

时间表.rb：

```
set :output, "log/cron_log.log"
every 1.minute do
  runner "AuctionsHelper.checkForExpiredAuction"
end 
```

这将创建以下 cronjob：

```
# Begin Whenever generated tasks for: bestBay
            * * * * * /bin/bash -l -c 'cd /home/bestbay && script/rails runner -e production '\''AuctionsHelper.checkForExpiredAuction'\'' >> log/cron_log.log 2>&1'
#    End Whenever generated tasks for: bestBay 
```

我遇到的问题是辅助方法无法访问表“拍卖”。从我的 cron_log.log 中：

```
Could not find table 'auctions' (ActiveRecord::StatementInvalid) 
```

这似乎不是辅助方法本身的问题。如果我从终端运行：

```
rails runner AuctionsHelper.checkForExpiredAuction 
```

我从 puts 消息中得到了一组不错的输出。那么为什么我的 cronjob 不能访问我的模型/表呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:03:09.433

基本问题是 cron 没有像我刚刚打开 shell 提示时那样设置相同的环境变量。我还有一个 .rvm 文件，它正在加载我的 ruby​​ 环境，并且每次我 cd 进入主应用程序目录时都会设置。我终于不得不这样做：

```
# set the cron log location
set :output, {:error => '/home/jason/bestbay/log/cron_error.log', :standard => '/home/jason/bestbay/log/cron_status.log'}
set :job_template, "bash -i -c ':job'"
env :PATH, ENV['PATH']

every 1.minute do
  #command "echo $PATH"                             # confirm shell variable PATH was loaded
  #command "cd #{path}"                             # this is not needed
  #command "pwd"                                    # visualize current directory
  #command "rvm current"                            # visualized default ruby version and gemset
  command "rvm use ruby-1.9.3-p194@cmucourse"       # set desired gemest
  #command "rvm current"                            # visualize proper gemset load

  runner "AuctionsHelper.checkForExpiredAuction", :environment => 'development' # run method
end 
```

我将注释掉的命令包括在内，因为它们确实帮助我可视化了 cron 运行时发生的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T21:51:31.270

我认为默认情况下，跑步者将在`RAILS_ENV=development`cron 线路连接到“生产”环境时运行。

试试这个：

```
RAILS_ENV=production rails runner AuctionsHelper.checkForExpiredAuction 
```

如果你得到同样的错误，那就是问题所在

对于测试，将您的生产环境指向您的开发，在 database.yml

```
production:
  development 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-11T12:29:13.687

`whatever`默认为生产，默认情况下会查找生产数据库。要更改此行为，您可以更新 crontab 并将其设置为开发，如下所示：

```
whenever --update-crontab --set environment='development' 
```

希望这可以节省一些时间，因为它让我有一段时间。

# java - Jsoup 从 .text() 中排除孩子

> ID：13424816
> 
> 赞同：21
> 
> 时间：2012-11-16T21:41:15.357
> 
> 标签：java, css-selectors, jsoup

我有类似的问题：

1.  [jQuery：从 .text() 中排除子级](https://stackoverflow.com/questions/11347779/jquery-exclude-children-from-text)

是否有可能在 JSoup 中实现它？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-16T21:55:06.200

您可能正在寻找调用[ownText](http://jsoup.org/apidocs/org/jsoup/nodes/Element.html#ownText())：

```
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;

public class Main {
    public static void main(String[] args) throws Exception {
        final Document document = Jsoup.parse("<html><head/><body><a href=\"#\" class=\"artist\">Soulive<span class=\"create-play\">Play</span></a></body></html>");
        final Element elem = document.getElementsByAttributeValue("class", "artist").first();
        System.out.println(elem.ownText());
    }
} 
```

# asp.net-mvc - 将更新从 vs2010 发布到 Server 2008 上的 IIS 7 后，ActionLink 不起作用

> ID：13424821
> 
> 赞同：0
> 
> 时间：2012-11-16T21:41:32.777
> 
> 标签：asp.net-mvc

我有一个现有的 ASP MVC3 Web 应用程序在我们的本地 Web 服务器上运行，它是一个带有 IIS 7 的 Server 2008 单元。该应用程序在服务器上运行良好。我对应用程序进行了更新，并尝试从 VS2010 Ultimate 发布它。应用程序加载，新菜单项位于主页上，但是当我单击菜单按钮（这是一个 Html.ActionLink）时，我得到的是“未找到页面”页面。在调试模式下运行时，该站点在我的计算机上运行良好。

我看过一些关于必须更改 global.asax 中的 maproute 的帖子，但我使用的路线与已经存在且正在工作的路线完全相同，除了我的路线转到不同的控制器。

这些是主页上的菜单链接，新的是第二个（NewAPPlicants）：

```
<td>
    <span><%: Html.ActionLink("Home", "Index", "Home")%></span>
</td>
<td>
    <span><%: Html.ActionLink("New Applicants", "Index", "NewApplicant") %></span>
</td>
<td>
    <span><%: Html.ActionLink("Volunteer Search", "DistrictStaff", "Home")%></span>
</td>
<td>
    <span><%: Html.ActionLink("Reports", "ReportList", "Home")%></span>
</td>
<td>
    <span><%: Html.ActionLink("Admin", "Index", "Admin") %></span>
</td> 
```

这是我全局中的 maproute 数据：

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "_AppStart", id = UrlParameter.Optional } // Parameter defaults
        );

    } 
```

您的帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T19:38:58.247

从我所看到的情况来看，这可能是您的 IIS 配置的问题。

*   确保您在集成管道模式下运行您的应用程序

尝试这些帖子中的建议：

*   [ASP.Net MVC 控制器在部署到 IIS 7 时导致未找到错误](https://stackoverflow.com/questions/1108704/asp-net-mvc-controller-causing-not-found-error-when-deployed-to-iis-7?rq=1)
*   [http://blogs.dovetailsoftware.com/blogs/kmiller/archive/2008/10/07/deploying-an-aspnet-mvc-web-application-to-iis7](http://blogs.dovetailsoftware.com/blogs/kmiller/archive/2008/10/07/deploying-an-aspnet-mvc-web-application-to-iis7)

# php - strpos 不识别字符串

> ID：13424823
> 
> 赞同：0
> 
> 时间：2012-11-16T21:41:39.443
> 
> 标签：php

我编写了一个简短的小函数，用于读取 CSS 文件并返回属性值。问题是它读取的值正好超过了我想要的值，并将一个值进一步返回到错误的文件中。

这是功能；

```
function get_css($f, $tag, $el) {
$css = fopen($f, "r");
$line = fgets($css);
while ( !feof($css) ) {
    if(strpos($line, $tag) > 0) {
        while ( !feof($css) ) {
            $line = fgets($css);
            if (strpos($line, $el) > 0) {
                return substr(substr($line, strpos($line, ":")+1), 0, -1);
            }
        }
    }
    $line = fgets($css);
}
} 
```

我是这样称呼它的；

```
$ew = get_css("1688_style.css", "elevations", "width"); 
```

这是它正在读取的 CSS 文件的示例；

```
Body {
margin:0;
color:black;
width:100%;
height:100%;
margin-left:auto;
margin-right:auto;
padding:0px;
font-family:arial,sans-serif;
background-color:#FFFFFF;
}

#Content {
position:relative;
display:inline-block;
background-color:#FFFFFF;
margin-top:30px;
margin-left:80px;
width:1520px;
}

#elevations {
position:relative;
display:inline-block;
width:250px;
text-align:center;
}                   

#views {
 display:inline-block;
 cursor:pointer;
 margin-top:20px;
 margin-left:15px;
}

#help {
 position:absolute;
 width:50px;
 text-align:center;
 font-size:12px;
 top:18px;
 right:20px;
} 
```

我期望的是 250 像素，但我得到的是来自 #help 标签的 50 像素。我已经没有关于在这里尝试什么的想法了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T21:44:34.133

`strpos`如果搜索字符串位于内容的开头，并且`false`根本不存在，则将返回 0。所以...

```
if(strpos($line,$tag) > 0) 
```

应该...

```
if(strpos($line,$tag) !== false) 
```

您使用的其他地方也是如此`strpos`，最后您可以删除它，`+1`因为它不需要。

# ruby-on-rails - Rails 多个控制器动作

> ID：13424824
> 
> 赞同：1
> 
> 时间：2012-11-16T21:41:44.093
> 
> 标签：ruby-on-rails

Rails 处理“多个控制器动作”的方式是什么？在我的应用程序中，我有一个特殊的“购物车”流程，它影响了几个模型。基本上，当他/她登录时，该流程可供特殊类型的用户使用，如下所示：

1.  添加用户。
    *   在这里可以“添加用户”。如果您了解 Basecamp，这一步有点像在项目中添加人员。所以在这一步我正在考虑用户资源。
2.  在这里，可以为之前添加的每个用户“购买”东西。
    *   这有点像一个基本的购物车。因此，就资源而言，我正在考虑“商店”或“购物车”。
3.  这是一个确认步骤。我再次认为这是购物车的一部分。

确认后，应该会发生几件事。

1.  在步骤 1 中添加的用户应该以某种方式被激活。也就是说，他们将无法在激活之前登录。
2.  应该从第 2 步中的购买中下订单。
3.  您在第 2 步中购买的“东西”是某种虚拟产品。即产品在用户登录时以“邀请”的形式出现。这个细节并不太重要，而且有点难以解释。关键是，确认后，应在数据库中创建与用户相关联的邀请。

同样，系统的细节有点难以解释，但我的主要问题是如何在 Rails 中最好地实现这类东西。In 涉及多个步骤，并在所有步骤中影响多个模型。

我一直在考虑用某种状态机来做这件事。然后状态机将负责在步骤或状态之间进行转换，并执行所需的操作。所以我想我会有一个 StateMachineController 或其他东西，没有模型，可以实现主要逻辑。这是可以使用的吗？似乎 Rails 确实偏向于 RESTfull 资源，但我似乎想不出类似上述的 RESTfull 方法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:51:43.653

将控制器操作视为用户引发的事件。之后发生的是通常应该与一个或多个模型相关联的逻辑。

所以下订单是 Order 模型中的东西，激活用户是 User 模型中的东西，发送邀请是 Invitation 模型中的东西等等。让模型彼此了解并没有错。当一个事件跨越多个模型时，我将一个方法放在与用户引发的事件最密切相关的一个中，可能是 Order 中的“purchase”之类的方法，这就是您将从 Order 控制器调用的方法。

因此，如果在其他模型中存在对状态的依赖关系，请在其中创建一些方法来测试（如果需要），例如`activated?`在 User 中，以及其他人来完成工作，例如`activate`（更新用户状态），然后在 Invitation 中“邀请”保存与用户关联的新邀请，依此类推。如果它们失败，请确保它们引发异常。

一旦你有了一堆很好的细粒度方法，你就可以将它们捆绑在一起，甚至将它们包装在你`Order#purchase`方法中的一个事务中。就像是

```
def purchase(user, stuff, invitee)
  Order.transaction do
    begin
      invitee.activate
      invitation = Invitation.create! {:invitee => invitee, :stuff => stuff, :invited_by => user }
      # You can't roll back an email, so do this after the others have worked without exception
      invitation.send
    rescue
      ActiveRecord::Rollback
    end
  end
end 
```

通过在事务中完成所有操作，您的数据要么全部正确，要么不正确。

有这样的吗？

# c# - 输入字符串的格式不正确

> ID：13424826
> 
> 赞同：0
> 
> 时间：2012-11-16T21:41:45.200
> 
> 标签：c#, asp.net, infragistics

以下是我的代码，其中我将列声明为私有字符串，并且我正在使用该值将值绑定到网格但我收到错误输入字符串在“PolicyRenewalGracePeriodDays”附近的格式不正确..请参阅突出显示的文本请在下面告诉我

```
/// </summary>
private const string COL_UNDERWRITER_DISPLAY_NAME = "UnderwriterDisplayName";
/// <summary>
/// 
/// </summary>
private const string COL_UNDERWRITER_INITIALS = "UnderwriterInitials";
/// <summary>
/// 
/// </summary>
private const string COL_UA_DISPLAY_NAME = "UADisplayName";
/// <summary>
/// 
/// </summary>
private const string COL_UA_INITIALS = "UA";
**private const string COL_RENEWAL_GRACE_PERIOD_DAYS = "PolicyRenewalGracePeriodDays";**
#endregion

    protected void grdAction_DataBound(object sender, EventArgs e)
        {
            foreach (UltraGridRow row in this.grdAction.DisplayLayout.Rows)
            {
                TemplatedColumn col;
                CellItem item;
                HyperLink docLink;
                HyperLink letterLink;
                HyperLink actionLink;
                Label actionLabel;
                var policyClassId = Utility.GetCurrentPolicyClassId();
             PolicyClass policyClass = Utility.GetCurrentPolicyClassEntity();
                var accountId = (int) row.DataKey;
                var insuredName = row.Cells.FromKey(COL_INSURED_NAME_HIDDEN).Text;
                var referenceNumber = row.Cells.FromKey(COL_REFERENCE_NUMBER).Text;
                var statusId = int.Parse(row.Cells.FromKey(COL_STATUS_ID).Text);

                var optionNames = string.Empty;
                if (!string.IsNullOrEmpty(row.Cells.FromKey(COL_OPTION_NAMES).Text))
                    optionNames = row.Cells.FromKey(COL_OPTION_NAMES).Text;

                var optionCount = int.Parse(row.Cells.FromKey(COL_OPTION_COUNT).Text);
                var isVoidable = (row.Cells.FromKey(COL_IS_VOIDABLE).Text == "1");
                bool renewalFlag;
                bool doNotRenewFlag;
                bool hasRenewingReferenceNumber;
                var currentUser = (User) Session[AppConstants.SK_CURRENT_USER];
                var expirationDate = DateTime.MinValue;
                bool convertedFlag;
                var documentCount = int.Parse(row.Cells.FromKey(COL_DOCUMENT_COUNT).Text);
                var allowAddLayer = bool.Parse(row.Cells.FromKey(COL_ALLOW_ADD_LAYER).Text);
                var renewableLayers = row.Cells.FromKey(COL_RENEWABLE_LAYERS).Text;
                int renewalGracePeriodDays = 0;

                **renewalGracePeriodDays = int.Parse(row.Cells.FromKey(COL_RENEWAL_GRACE_PERIOD_DAYS).Text);** 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T21:49:01.520

很可能`row.Cells.FromKey(COL_RENEWAL_GRACE_PERIOD_DAYS).Text`没有返回您所期望的。如果它有 0-9 以外的任何值或大于`int.MaxValue`你的值，你会得到一个异常。另外`null`或`System.String.Empty`将导致异常。

您可以改用`TryParse`它将返回一个布尔值，指示解析是否有效。如果有效，您传入的 int 将设置为您传入的字符串。

给出一些实际的代码；

```
if(!int.TryParse(row.Cells.FromKey(COL_RENEWAL_GRACE_PERIOD_DAYS).Text, out renewalGracePeriodDays))
         renewalGracePeriod = MyDefaultValue; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T21:56:19.357

除了上述答案之外，您还可以轻松创建一个小扩展方法来优雅地处理这些情况：

```
public static class ExtensionUtils
{
    public static int ToZeroIfNotInt(this string valueToConvert)
    {
        int number =0;
        int.TryParse(valueToConvert,out number);
        return number;
    }
} 
```

然后这样称呼它：

```
renewalGracePeriodDays = row.Cells.FromKey(COL_RENEWAL_GRACE_PERIOD_DAYS).Text.ToZeroIfNotInt(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T21:48:22.453

如果单元格不包含有效数字（例如空字符串）会怎样？
你得到你的问题中提到的例外。
一个简单的解决方法是使用[TryParse](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)方法

```
int renewalGracePeriodDays;
string temp = row.Cells.FromKey(COL_RENEWAL_GRACE_PERIOD_DAYS).Text;
Int32.TryParse(temp, out renewalGracePeriodDays); 
```

来自 MSDN 文档

> 当此方法返回时，如果转换成功，*[第二个参数]包含与 s* *[第一个参数]*中包含的数字等效的 32 位有符号整数值，如果**转换失败，则为零**。如果 s 参数为空、格式不正确或表示小于 MinValue 或大于 MaxValue 的数字，则转换失败。此参数未初始化传递

我添加了方括号中的粗体和文本。因此，如果您的默认值应为零，则您不必对 TryParse 方法的结果进行任何测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T22:12:19.600

It's possible that the column you are checking is either an empty string, or contains non-integer data. I recommend using the TryParse method.

```
int renewalGracePeriodDays;
if (!int.TryParse(row.Cells.FromKey(COL_RENEWAL_GRACE_PERIOD_DAYS).Text), out renewalGracePeriodDays)
{
    renewalGracePeriodDays = 0;
    // Inside here, you can log the exception, alert the user, or end processing
} 
```

If the TryParse fails, your grace period will default to 0\. It's a good idea to use this method when dealing with user inputs, because there's no telling what people will enter, even when properly prompted...

# java - 如何在 AWS Java 上为访问的 EC2 对象设置可用区

> ID：13424838
> 
> 赞同：1
> 
> 时间：2012-11-16T21:42:27.690
> 
> 标签：java, amazon-ec2, amazon-web-services, availability-zone

我正在尝试使用以下代码描述正在使用的运行 ec2 实例：

```
DescribeInstancesResult describeInstancesRequest = ec2.describeInstances();
            List<Reservation> reservations = describeInstancesRequest.getReservations();
            Set<Instance> instances = new HashSet<Instance>();

            for (Reservation reservation : reservations) {
                instances.addAll(reservation.getInstances());
            }

            System.out.println("You have " + instances.size() + " Amazon EC2 instance(s) running."); 
```

我得到的返回结果为 0。我猜这是因为默认 AZ 设置为美国东部。

我的实例在美国西部运行。

如何更改 AZ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:47:45.460

您可以像这样设置端点：

ec2.setEndpoint("ec2.us-west-1.amazonaws.com");

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-22T19:34:18.103

对于那些遇到这篇文章的人来说，目前的做法是：

```
 AmazonEC2 ec2 = new AmazonEC2Client(new StaticCredentialsProvider(new BasicAWSCredentials("your-aws-access-key-here", "your-aws-secret-here")));
    DescribeInstancesRequest request = new DescribeInstancesRequest();

    Filter filter = new Filter()
            .withName("availability-zone")
            .withValues("us-east-1a");

    request.withFilters(filter);

    DescribeInstancesResult result = ec2.describeInstances(request);
    List<Reservation> reservations = result.getReservations(); 
```

# c++ - 使用 OpenGL 和 GLU 在 NURB 上查找点

> ID：13424839
> 
> 赞同：0
> 
> 时间：2012-11-16T21:42:30.657
> 
> 标签：c++, opengl, window, glu

我试图通过围绕轴旋转 NURB 以使用 OpenGL 生成点来绘制形状。我可以使用 渲染 NURB `gluNurbsCurve`，但我想找到沿 NURB 的插值点以用于旋转。

我一直无法找到一种方法来做到这一点，我发现[回调接口](http://www.cs.sfu.ca/~haoz/teaching/htmlman/nurbscallback.html)应该公开我正在寻找的内容，但[windows 不支持](http://msdn.microsoft.com/en-us/library/windows/desktop/dd368669%28v=vs.85%29.aspx)。

似乎[其他人](http://www.opengl.org/discussion_boards/showthread.php/161433-Windows-GLU-Implementation-NURBS)已经提出了解决方案，但从未发布过。

是否有已知的解决方法或直接访问数据结构以获取我需要的信息的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:04:28.350

剖析[Mesa 的 NURBS 实现](http://cgit.freedesktop.org/mesa/glu/tree/src/libnurbs)。

或者使用（已弃用的）[GL 反馈机制](http://www.glprogramming.com/red/chapter13.html#name2)来消除生成的几何图形。

# java - 如何在不冻结 GUI 的情况下调用 SwingWorker .get()？

> ID：13424842
> 
> 赞同：4
> 
> 时间：2012-11-16T21:42:49.177
> 
> 标签：java, swing, swingworker

我做了一个样本来说明问题：

```
public class Worker extends SwingWorker<Integer, Integer> {
    private GeneralUserInterface gui;

    public Worker(GeneralUserInterface gui){
        this.gui = gui;
    }

    @Override
    protected Integer doInBackground() throws Exception {
        int someResultToReturn = 10;

        for(int i=0; i<100; i++){
            Thread.sleep(50);//The Work
            publish(i+1);//calls process, which updates GUI
        }

        return someResultToReturn;
    }

    @Override
    protected void process(List<Integer> values) {
        for (Integer val : values) {
            gui.updateProgressBar(val);
        }
    }
}

private void jButtonDoWorkActionPerformed(java.awt.event.ActionEvent evt) {
    Worker worker = new Worker(this);
    worker.execute();

    try {
        int resultToGet = worker.get();//Obviously freezes the GUI
    } catch (InterruptedException | ExecutionException ex) {}

    //NEXT LINE NEEDS THE RESULT TO CONTINUE
}

public void updateProgressBar(int value){
    this.jProgressBar1.setValue(value);
} 
```

正如您所猜测的，对 worker.get() 的调用使 UI 无响应，这是正常的，因为它等待线程完成。这类问题一般是怎么解决的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T21:48:23.187

> 这类问题一般是怎么解决的？

通常你所做的是覆盖该`Swingworker.done()`方法。当后台线程完成时，在 GUI 线程中执行 Done。然后，您可以安全地调用 get 而不会阻塞并做任何您需要做的事情。

这是执行此操作的一种方法：

```
public class Worker extends SwingWorker<Integer, Integer> {
    private GeneralUserInterface gui;

    // omitted...

    @Override
    protected Integer doInBackground() throws Exception {
        int someResultToReturn = 10;

        for(int i=0; i<100; i++){
            Thread.sleep(50);//The Work
            publish(i+1);//calls process, which updates GUI
        }

        return someResultToReturn;
    }

    // omitted...

    @Override
    protected void done() {

        try {
           int resultToGet = worker.get();//Obviously freezes the GUI
        } catch (InterruptedException | ExecutionException ex) {}

       //NEXT LINE NEEDS THE RESULT TO CONTINUE
   }
}

private void jButtonDoWorkActionPerformed(java.awt.event.ActionEvent evt) {
    Worker worker = new Worker(this);
    worker.execute();
} 
```

然而，这可能不是最方便的设计。我发现最好让 GUI 的东西成为公共类，然后将 swing worker 创建为非静态内部类。这样，“完成”方法可以轻松访问所有 GUI 私有变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-25T20:56:43.050

更好的解决方案是为 SwingWorker 提供由 GUI 实现的接口实例。这样你就可以让你的 Worker 更新 GUI。

```
public class GUI implements GUI_INTERFACE{
....
new foo(this);

@Override
public void INTERFACE_METHOD(Object info){
//Update Gui variables here.
}

} 
```

对于您的 SwingWorker：

```
class foo extends SwingWorker{
GUI_INTERFACE int
public foo(GUI_INTERFACE bar){
int=bar
}

} 
```

# mysql - 为什么我的存储过程中会出现这个 MySQL 错误 1146（没有这样的表）？

> ID：13424844
> 
> 赞同：0
> 
> 时间：2012-11-16T21:42:53.010
> 
> 标签：mysql, exception, variables, stored-procedures

这是我的 MySQL 存储过程：

```
CREATE PROCEDURE myStoredProc(DB_NAME varchar(30)) 
BEGIN 
    DECLARE NO_EXAM_TABLE BOOLEAN;

    /*This one throws 'No Such Table' exception*/
    SELECT IF(count(*) = 0, TRUE, FALSE) 
    FROM information_schema.COLUMNS cols 
    WHERE cols.TABLE_SCHEMA = DB_NAME 
    AND cols.TABLE_NAME = 'exam' 
    INTO NO_EXAM_TABLE;

    /*But this one works fine (removed the INTO clause)*/
    SELECT IF(count(*) = 0, TRUE, FALSE) 
    FROM information_schema.COLUMNS cols 
    WHERE cols.TABLE_SCHEMA = DB_NAME 
    AND cols.TABLE_NAME = 'exam';
END; 
```

MySQL是否认为`NO_EXAM_TABLE`是表而不是变量？

**编辑**

这就是我用来捕获错误的方法：

```
DECLARE EXIT HANDLER FOR 1146 BEGIN SELECT "42S02 (ER_NO_SUCH_TABLE) Table doesn't exist" as 'ERROR_NO SQLSTATE'; ROLLBACK; END; 
```

**编辑2**

我已将问题缩小到此条款：

```
AND cols.TABLE_NAME = 'exam'; 
```

如果我将其更改为此，它将起作用：

```
AND cols.TABLE_NAME LIKE 'exam'; 
```

我不明白为什么`=`操作员会导致错误并且`LIKE`操作员工作正常。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-17T01:19:02.490

您需要将 INTO 放在正确的位置：

```
select ...
into var
from table
where ... 
```

# magento - Magento 显示没有 ChildHtml 的块

> ID：13424846
> 
> 赞同：2
> 
> 时间：2012-11-16T21:42:58.173
> 
> 标签：magento, layout

我使用自定义 phtml 文件创建了一个简单的块（只是一个核心/模板），以在不修改其他 phtml 文件的情况下进行扩展。

但我不能让它显示，除非通过修改原始模板来添加`$this->getChildHtml('myblock')`东西。

我想在不更改任何其他 phtml 的情况下添加我的块。如何做到这一点，如何使块自动显示没有`getChildHtml`方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T03:44:13.907

如果您的块是类型`core/text_list`，`page/html_wrapper`那么它将显示所有子节点。请参阅`core/text_list`块的 toHtml() 函数：http: [//svn.magentocommerce.com/source/branches/1.7/app/code/core/Mage/Core /块/文本/List.php](http://svn.magentocommerce.com/source/branches/1.7/app/code/core/Mage/Core/Block/Text/List.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:51:08.300

我想出了如何做到这一点，

我使用自己的布局和模板创建自己的模块。

在布局中，我更新了调用父块的部分，首先插入我的新块，然后在我的模板中我通过 getChildHtml() 调用父块，这样我就不必触摸任何客户的文件。

最好的问候，给大家

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-11T14:29:44.770

您可以在根块下定义您的块，如下所示：

```
 <reference name="root">
        <block type="core/template" name="custom_block" output="toHtml" template="custom/custom_block.phtml"/>
    </reference> 
```

诀窍是使用 output="toHtml" 使您的块作为输出块，只有输出块会自动呈现。将块放在根目录下很重要，因为默认情况下主题根块是唯一负责渲染其所有子块的输出块。

有关更多详细信息，请查看： http: [//magebase.com/magento-tutorials/digging-deeper-into-magentos-layout-xml-part-2/](http://magebase.com/magento-tutorials/digging-deeper-into-magentos-layout-xml-part-2/)

希望这会对某人有所帮助。干杯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-29T10:34:51.663

*   使用**核心/文本**类型。这些块将自动呈现自己。但是，当您的块使用自己的类时，此方法不适合。
*   任何**core/text_list**类型的块都会自动渲染它的所有子块。只要让你的块是 core/text_list 的孩子。

查看这篇文章了解更多信息 - [http://nwdthemes.com/2015/05/29/render-layout-block-automatically-in-magento/](http://nwdthemes.com/2015/05/29/render-layout-block-automatically-in-magento/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-16T21:48:10.923

只有某些文件具有显示所有子节点的能力。话虽如此，绝大多数人都没有内置这种能力。

您可以通过在 phtml 文件中添加一行来启用此功能，该文件要呈现附加到它的任何块。

```
<?php echo $this->getChildHtml() ?> 
```

# shell - 用户键盘输入结束while循环

> ID：13424847
> 
> 赞同：1
> 
> 时间：2012-11-16T21:43:01.590
> 
> 标签：shell, keyboard-events

我正在尝试编写一个脚本，将命令历史记录到临时 PID.cmd 文件中。当键盘上的组合键被击中时，我被困在如何结束脚本上。

```
until [ <CTRL+C> ]
do
    read -p "$PWD\$" cmd;
    echo "$cmd" >> $$.cmd
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:50:26.460

```
while read -p "$PWD\$" cmd; do
    echo "$cmd" >> $$.cmd
    ...
done 
```

当输入流结束时，循环将终止。如果 stdin 来自 tty，则在用户键入 ctrl-D 时会发生这种情况。 `SIGINT`也应该终止循环，因为读取将失败。（`SIGINT`响应 ctrl-C 发送。）

# javascript - 堆叠 JS 滑块的问题

> ID：13424849
> 
> 赞同：0
> 
> 时间：2012-11-16T21:43:07.743
> 
> 标签：javascript, jquery, slider

我试图有 3 个堆叠的 JS 滑块，但最后两个没有出现。知道为什么吗？:(

[http://pastebin.com/ic8VYpXS](http://pastebin.com/ic8VYpXS)

# windows - 通过 Windows 8 Metro 应用程序邀请 Facebook 应用程序

> ID：13424850
> 
> 赞同：3
> 
> 时间：2012-11-16T21:43:10.670
> 
> 标签：windows, facebook, windows-8, microsoft-metro

我创建了一个地铁应用程序。在这个应用程序中，我挑选朋友参加一个活动，并通过我的 Facebook 应用程序自动向他们发送 Facebook 通知，该应用程序连接到我的 Metro 应用程序。

问题是 Facebook 不允许我向没有安装我的 Facebook 应用程序的用户发送通知。

我读到我可以向他们发送 Facebook 邀请而不是通知。

我使用了 Facebook 提供的代码，但它不起作用。

FacebookInvitationTest.js：

```
 <div id="fb-root"></div>
     <script>
         FB.init({
             appId: 'XXXXXXXXXXX',
             oauth: true,
             frictionlessRequests: true,
             status: true,
             cookie: true,
             xfbml: true
         });

         function sendRequestToRecipients(user_ids) {
             FB.ui({
                 method: 'apprequests',
                 message: 'My Great Request',
                 to: user_ids
             }, requestCallback);
         }

         function sendRequestViaMultiFriendSelector() {
             FB.ui({
                 method: 'apprequests',
                 message: 'My Great Request'
             }, requestCallback);
         }

         function requestCallback(response) {
             // Handle callback here
         }

        window.addEventListener('message', recievedMessage, false);

        function recievedMessage(e) {
            var friendIds = e.data;
            sendRequestToRecipients(friendIds);
        } 
```

我到了这里，但什么也没发生。我将此文件作为 iframe 放在其他文件中。我必须在 Windows 8 中执行此操作。

如何获得发送邀请的弹出窗口？

# windows - 如何设置 git 以使我的文件保持同步？

> ID：13424858
> 
> 赞同：0
> 
> 时间：2012-11-16T21:43:47.847
> 
> 标签：windows, git, tortoisegit, git-remote, git-checkout

我无法让我的 Git 存储库按照我想要的方式运行。我确信它可以做我想做的事，但我只是没有自己弄清楚。这是我的设置...

*   PC1：这是我创建存储库并对其进行更改的开发机器。
*   SERVER1：这是我的远程 Git 存储库所在的位置，所有更改都从 PC1 推送到它。
*   PC2：这是我的 QA 机器。我从 SERVER1 克隆了 Git 存储库。我希望从远程存储库中签出我想测试的任何分支，并能够进行拉取以获取最新代码。

我在两台 PC 上都使用 TortoiseGit。我在 PC1 上创建了一个分支 (2012_2_2)，提交了更改，然后推送到了 SERVER1。在 PC2 中，我选择了“Switch/Checkout”，并签出了 remotes/orgin/2012_2_2。

可悲的是，这不起作用。当我查看 PC2 存储库的属性时，当前分支说“致命：ref HEAD 不是符号链接”。此外，我无法提取对分支 2012_2_2 所做的更改。当我从菜单中选择 pull 时，唯一可以从中提取的分支是 origin/master。

我哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:43:29.790

我得到了它。当您执行 Switch/Checkout 以创建分支时，Tortoise 中有一个复选框。我取消了认为我不需要创建分支的想法。让它检查解决了我的问题。

# javascript - 使用绝对像素位置在条形上方显示工具提示？

> ID：13424860
> 
> 赞同：0
> 
> 时间：2012-11-16T21:43:59.183
> 
> 标签：javascript, charts, d3.js

我想调整这个[分组条形图](http://bl.ocks.org/3887051)D3.js 示例，以便在用户将鼠标悬停在其中一个条形上时显示工具提示。

我已经研究出如何显示相对于用户鼠标指针的工具提示，如下所示：

```
var tooltip = d3.select("body").append("div")
  .attr("class", "tooltip")
  .style("opacity", 1e-6);
state.selectAll("rect")
  .data(function(d) { return d.ages; })
  ...
  .on("mouseover", function(d, i) {
    tooltip.transition()
      .duration(100)
      .style("opacity", 1);
    tooltip.html("hello world")
     .style("left", x + "px")
     .style("top", y + "px");
  });

// CSS
div.tooltip {
  position: absolute;
  width: 130px;
  height: 60px;
  background: #ddd;
} 
```

但这并不理想，因为它部分掩盖了条形图。我真正想做的是在所选栏的顶部显示一个工具提示 - 谷歌图表的方式：[https ://developers.google.com/chart/interactive/docs/gallery/columnchart#Example](https://developers.google.com/chart/interactive/docs/gallery/columnchart#Example)

有谁知道我不能得到鼠标的绝对 x/y 坐标，而是当前被鼠标悬停的块的绝对 x/y 像素坐标？然后我可以使用这些坐标来定位工具提示。

这是 jsfiddle 的开始（但由于访问控制，我无法加载数据）：http: [//jsfiddle.net/YGjHT/1/](http://jsfiddle.net/YGjHT/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:32:27.140

当您创建矩形（并附加`mouseover`处理程序）时，您可以访问这些坐标，因为您正在设置它们。您需要做的就是在处理程序中使用它们。只需使用您在处理程序中设置矩形的坐标即可。

# clojure - 了解 Clojure 中延迟斐波那契实现的执行

> ID：13424865
> 
> 赞同：6
> 
> 时间：2012-11-16T21:44:36.163
> 
> 标签：clojure, lazy-evaluation, lazy-sequences

我试图了解以下代码的执行：

```
(def fibs 
  (concat (lazy-seq [0 1]) (lazy-seq (map + fibs (rest fibs))))) 
```

这就是我希望执行的样子

```
[0 1 : (map + [0 1] [1]) => 1
[0 1 1 : (map + [0 1 1] [1 1]) => 1 2
[0 1 1 1 2 : (map + [0 1 1 2] [1 1 2]) => 1 2 3
[0 1 1 1 2 1 2 3 : (map + [0 1 1 2 3] [1 1 2 3]) => 1 2 3 5
[0 1 1 1 2 1 2 3 1 2 3 5 .... 
```

这显然是不正确的，因为结果是错误的。我能想到的唯一产生正确结果的执行是：

```
[0 1 : (map + [0 1] [1]) => 1
[0 1 1 : (map + [1 1] [1]) => 2
[0 1 1 2 : (map + [1 2] [2]) => 3
[0 1 1 2 3 : (map + [2 3] [3]) => 5
[0 1 1 2 3 5 .... 
```

这是执行过程中头部和尾部状态的正确“表示”吗？如果是这样，为什么`(rest fibs)`返回单个项目？是因为像 (rest (rest (rest [1 1 2 3]))) 这样的递归调用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T21:53:17.400

Fibs 是`(0 1 ...)`（因为`(concat [0 1] ... )`在开头）。`(rest fibs)`是`(1 ...)`。然后`(map + fibs (rest fibs))`是

```
((+ 0 1) ...) => (1 ...) 
```

所以fibs是`(0 1 1 ...)`。由于我们得到了下一项，我们可以计算另一个：

```
(1 (+ 1 1) ...) => (1 2 ...) 
```

它继续...

```
(1 2 (+ 1 2) ...) 
```

将 fibs 想象*成它已经存在*，并且将状态`(map + fibs (rest fibs)`视为在已经存在的 fibs 列表上移动（这很好，因为它最终会计算出我们在途中需要的所有内容）。

写下这两个序列也可能会有所帮助：

```
 (0 1 1 2 3 5 ...)
+(1 1 2 3 5 ...)
=(1 2 3 5 8 ...) 
```

（我会在这里画箭头来指示我们已经得到了什么以及结果的去向，但我不能在这里做得那么好）。

# asp.net - asp.net 收不到邮件

> ID：13424867
> 
> 赞同：0
> 
> 时间：2012-11-16T21:44:37.380
> 
> 标签：asp.net, email

我创建了一个注册页面，在注册后通知用户。下面的代码适用于同一域名下的用户，但无法使用外部域电子邮件帐户。它不会返回任何错误，并且接收者也不会收到电子邮件。

```
 ...some codes here...
    string bodymsg="test email";       

    MailMessage mMailMsg = new MailMessage();
    mMailMsg.From = new MailAddress("applications@mydomain.com");
    mMailMsg.To.Add(new MailAddress(mailto));

    mMailMsg.Subject = "test email";
    mMailMsg.Body = bodymsg;
    mMailMsg.IsBodyHtml = true;
    mMailMsg.Priority = MailPriority.Normal;

    SmtpClient msmtpclient = new SmtpClient();

    msmtpclient.Send(mMailMsg); 
```

网页配置

```
<mailSettings>
  <smtp>        
    <network host="mail.mydomain.com" password="pwd" userName="applications@mydomain.com" defaultCredentials="false" port="25"/>
  </smtp>
</mailSettings> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:12:05.957

I think you have to specify the Server

For example :

```
mMailMsg.Server = [name of your mail server]; 
```

For example my server IP address is : 192.168.1.137

so I specify :

```
mMailMsg.Server = 192.168.1.137; 
```

specify before sending email.

# python - Princexml 不能与 python 一起使用？

> ID：13424868
> 
> 赞同：0
> 
> 时间：2012-11-16T21:44:38.077
> 
> 标签：python, princexml

我正在使用 Windows 并想用 python 对princexml 进行子处理。

文档说（[http://www.princexml.com/doc/8.1/python/](http://www.princexml.com/doc/8.1/python/)）：

```
import subprocess

subprocess.call(["prince","foo.xml","bar.pdf"]); 
```

我用我的二进制 exe 的路径替换了“prince”......并且我在同一目录中有一个 foo.xml。带有生成器的窗口闪烁了一下，就是这样......没有生成pdf。

即使我只是在 cmd 上使用 Prince 和“prince foo.xml foo.pdf”，也没有任何反应......有什么帮助吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:26:25.510

我自己发现的...这是windows中的权限设置...只需将引擎安装到c：\ users \ somwhere就可以了！

# python - Django基于类的视图可用的方法和参数列表？

> ID：13424875
> 
> 赞同：0
> 
> 时间：2012-11-16T21:45:17.230
> 
> 标签：python, django

在概述基于类的视图可用的方法/参数/属性时，我阅读了文档及其含糊不清的内容，是否有一些网站的列表提供诸如任何地方的列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T21:48:12.027

您可以查看`View`类的源代码：

*   [看法](https://github.com/django/django/blob/master/django/views/generic/base.py#L27)
*   [模板视图](https://github.com/django/django/blob/master/django/views/generic/base.py#L144)
*   [重定向视图](https://github.com/django/django/blob/master/django/views/generic/base.py#L154)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T21:47:45.000

您应该使用您的`python manage.py shell`并简单地导入您的视图并使用`dir(my_view)`和`help(my_view)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T23:17:14.460

您可以使用`python manage.py shell`和导入您想要的视图然后使用`dir()`，`dir(TemplateView)`或者您可以阅读源代码或使用`help()`方法来快速概述。例如，`help(TemplateView)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-06T15:46:13.977

我发现[Classy Class-based Views](http://ccbv.co.uk/)网站非常有用。它还显示了继承顺序、类层次结构等等。

# javascript - Javascript 无法识别 Asp Checkbox Checked 属性

> ID：13424879
> 
> 赞同：1
> 
> 时间：2012-11-16T21:45:34.297
> 
> 标签：javascript, asp.net, checkbox

我有一个 ASP 表单中的单个复选框列表：

```
<asp:UpdatePanel runat="server" ID="FiltersUpdPnl">
    <ContentTemplate>
        <div class="filters">
            Show: 
            <asp:DropDownList runat="server" ID="CapNumProjectsDDL" AutoPostBack="true" OnSelectedIndexChanged="GenericFiltersChanged" >
                <%--<asp:ListItem Value="0" Text="" Selected="True"></asp:ListItem>--%>
                <asp:ListItem Value="1" Text="Capacity"></asp:ListItem>
                <asp:ListItem Value="2" Text="Number of Projects"></asp:ListItem>
            </asp:DropDownList>
        </div>
        <div id="filterlist" class="filters">
            <span style="font-size:13pt;display:none;">Filters:<asp:Button runat="server" 
                ID="ApplyFilters1Btn" Text="Apply New Filters" Visible="false" OnClick="ApplyFilters" /> </span>
            <br />
            <span style="font-size:10pt;">Project Type:</span>
            <ul>
                <li>
                    <asp:CheckBox AutoPostBack="true" runat="server" ID="ShowAllChkBx" Text="(check/uncheck all)" 
                        Checked="false" oncheckedchanged="ShowAllChkBx_CheckedChanged" />
                </li>
            </ul>
            <div id="filterchks" runat="server">
                <ul>
                    <li><asp:CheckBox AutoPostBack="true" runat="server" ID="BiomassChkBx" Text="Biomass" Checked="true" Value="7" OnClick="JavaScript:ParentCheck(parent, 'Biomasschks')"/></li>
                        <div runat="server" id="Biomasschks">
                            <ul>
                                <li><asp:CheckBox AutoPostBack="true" runat="server" ID="BiomassUnspChkBx" Text="Biomass" Checked="true" Value="18" OnClick="JavaScript:uncheckParent(this,'BiomassChkBx')"/></li>
                                <li><asp:CheckBox AutoPostBack="true" runat="server" ID="BiomassLandfillGasChkBx" Text="Biomass - Landfill Gas" Checked="true" Value="29" OnClick="JavaScript:uncheckParent(this,'BiomassChkBx')"/></li>
                            </ul>
                        </div>
                    <li><asp:CheckBox AutoPostBack="true" runat="server" ID="CSPChkBx" Text="CSP" Checked="true" Value="11" OnClick="JavaScript:ParentCheck(parent, 'CSPchks')" /></li>
                        <ul>
                            <div runat="server" id="CSPchks">
                                <li><asp:CheckBox AutoPostBack="true" runat="server" ID="CheckBox2" Text="CSP" Checked="true" Value="5" OnClick="JavaScript:uncheckParent(this,'CSPChkBx')" /></li>
                                <li><asp:CheckBox AutoPostBack="true" runat="server" ID="CSPTroughChkBx" Text="CSP - Trough" Checked="true" Value="35" OnClick="JavaScript:uncheckParent(this,'CSPChkBx')" /></li>
                                <li><asp:CheckBox AutoPostBack="true" runat="server" ID="CSPLensChkBx" Text="CSP - Lens" Checked="true" Value="36" OnClick="JavaScript:uncheckParent(this,'CSPChkBx')" /></li>
                                <li><asp:CheckBox AutoPostBack="true" runat="server" ID="CSPTowerChkBx" Text="CSP - Tower" Checked="true" Value="37" OnClick="JavaScript:uncheckParent(this,'CSPChkBx')" /></li>
                                <li><asp:CheckBox AutoPostBack="true" runat="server" ID="CSPDishEngineChkBx" Text="CSP - Dish Engine" Checked="true" Value="38" OnClick="JavaScript:uncheckParent(this,'CSPChkBx')" /></li>
                                <li><asp:CheckBox AutoPostBack="true" runat="server" ID="CSPLinearFresnelChkBx" Text="CSP - Linear Fresnel" Checked="true" Value="39" OnClick="JavaScript:uncheckParent(this,'CSPChkBx')" /></li>
                            </div>
                        </ul>
                    <li><asp:CheckBox AutoPostBack="true" runat="server" ID="GeothermalChkBx" Text="Geothermal" Checked="true" Value="8"/></li>
                    <li><asp:CheckBox AutoPostBack="true" runat="server" ID="HydroChkBx" Text="Hydro" Checked="true" Value="13"/></li>
                    <li><asp:CheckBox AutoPostBack="true" runat="server" ID="OceanChkBx" Text="Ocean" Checked="true" Value="9" OnClick="JavaScript:ParentCheck(parent, 'OceanChks')"/></li>
                        <ul>
                            <div runat="server" id="OceanChks">
                                <li><asp:CheckBox AutoPostBack="true" runat="server" ID="CheckBox1" Text="Ocean" Checked="true" Value="3" OnClick="JavaScript:uncheckParent(this,'OceanChkBx')"/></li>
                                <li><asp:CheckBox AutoPostBack="true" runat="server" ID="OceanWaveChkBx" Text="Ocean - Wave" Checked="true" Value="45" OnClick="JavaScript:uncheckParent(this,'OceanChkBx')" /></li>
                                <li><asp:CheckBox AutoPostBack="true" runat="server" ID="OceanTidalCurrentChkBx" Text="Ocean - Tidal/Current" Checked="true" Value="46" OnClick="JavaScript:uncheckParent(this,'OceanChkBx')" /></li>
                            </div>
                        </ul>
                    <li><asp:CheckBox AutoPostBack="true" runat="server" ID="SolarPVChkBx" Text="Solar PV" Checked="true" Value="10"/></li>
                    <li><asp:CheckBox AutoPostBack="true" runat="server" ID="WindChkBx" Text="Wind" Checked="true" Value="12" OnClick="JavaScript:ParentCheck(parent, 'WindChks')"/></li>   
                        <ul>
                            <div runat="server" id="WindChks">
                                <li><asp:CheckBox AutoPostBack="true" runat="server" ID="WindOnshoreChkBx" Text="Wind - Onshore" Checked="true" Value="6" OnClick="JavaScript:uncheckParent(this,'WindChkBx')" /></li>
                                <li><asp:CheckBox AutoPostBack="true" runat="server" ID="WindOffshoreChkBx" Text="Wind - Offshore" Checked="true" Value="21" OnClick="JavaScript:uncheckParent(this,'WindChkBx')" /></li>
                            </div>
                        </ul>                             
                </ul>
            </div>
        </div>
        <div runat="server" id="StatusDiv" class="filters">
                <span style="font-size:10pt;">Status:</span>
                <ul>
                    <li><asp:CheckBox AutoPostBack="true" runat="server" Value="1" ID="OperatingChkBx" Text="Operating" Checked="true" OnCheckedChanged="GenericFiltersChanged" /></li>
                    <li><asp:CheckBox AutoPostBack="true" runat="server" Value="2" ID="UnderConstructionChkBx" Text="Under Construction" Checked="true" OnCheckedChanged="GenericFiltersChanged" /></li>
                    <li><asp:CheckBox AutoPostBack="true" runat="server" Value="3" ID="PreConstructionChkBx" Text="Pre-Construction" Checked="true" OnCheckedChanged="GenericFiltersChanged" /></li>
                </ul>
            <br />
        </div>
    </ContentTemplate>
</asp:UpdatePanel> 
```

“UncheckParent”功能正常工作，但是当父级被选中/取消选中时，它应该将其相应 div 内的所有复选框更改为其选中状态（即父级选中，子级选中，反之亦然）：

```
function uncheckParent(checkbox, parentcheckboxid) {
    var Parentcheckbox = document.getElementById(parentcheckboxid);

    if (!checkbox.checked) {
        Parentcheckbox.checked = false;
    }
}

function ParentCheck(parent, aId) {
    if (parent.checked == false) {
        checkByParent(aId, false);
        alert("false");
    }
    else if (parent.checked == true) {
        checkByParent(aId, true);
    }

}

function checkByParent(aId, aChecked) {
    var collection = document.getElementById(aId).getElementsByTagName('INPUT');
    for (var x = 0; x < collection.length; x++) {
        if (collection[x].type.toUpperCase() == 'CHECKBOX')
            collection[x].checked = aChecked;
    }

} 
```

按照编码，该函数始终返回父复选框的选中属性 == false，正如“错误”警报所证明的那样（仅用于调试）。

为什么无论父复选框的选中属性处于什么状态，这都会返回 false？我尝试从所有复选框中删除 "Checked="true"" 属性，看看这是否是问题所在，但是，功能保持不变。

（起初我有这个编码的服务器端，效果很好，但我不得不重新排列页面并更改回发事件，并且服务器在事件处理程序有机会触发之前读取 Page_Load 上的选中属性。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T23:19:07.263

我将专注于一条线，其余的类似。
因此，在这一行中，您有一些主要问题。

```
<asp:CheckBox AutoPostBack="true" runat="server" ID="CSPChkBx" Text="CSP" 
 Checked="true" Value="11" OnClick="JavaScript:ParentCheck(parent, 'CSPchks')" /> 
```

1.  你发错了身份证。要使 id 起作用，您必须将 ClientID 作为静态放在 asp.net 4 上，或在函数上发送`this`关键字`parent()`
2.  您的 javascript 将无法正常工作，因为您进行了回帖，而您所做的一切都消失了。所以删除以太自动回发，以太删除javascript。
3.  此外，asp.net 检查控件将输入与跨度一起呈现。所以onclick可能是引用span，而不是输入控件上的，需要看源码才能知道去哪里了。

所以你需要在这里重新设计你喜欢做的事情。

# r - 在 R 中访问 kernlab::gausspr 函数中的估计 var

> ID：13424882
> 
> 赞同：3
> 
> 时间：2012-11-16T21:45:40.333
> 
> 标签：r, kernlab

我正在查看用于高斯过程回归`gausspr`的包中的 R 函数。`kernlab`该过程由核函数的超参数和数据中的噪声定义。我在可以指定的文档中看到

> var：初始噪声方差，（仅用于回归）（默认值：0.001）

但我看不到在回归运行后如何访问*估计值。*例如，考虑我有一些观察到的点，并想预测 y 给出的位置的值`X`：

```
obs <- data.frame(x = c(-4, -3, -1,  0,  2),
                  y = c(-2,  0,  1,  2, -1))
X <- seq(-5,5,len=50) 
```

我可以这样做`kernlab::gausspr`：

```
gp <- gausspr(obs$x, obs$y, kernel="rbfdot", scaled=FALSE, var=.09)
Ef <- predict(gp, X) 
```

我可以得到内核超参数的估计值：

```
gp@kernelf@kpar 
```

但是我看不到如何返回噪声参数的估计值，`var`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T00:57:04.900

我可能忽略了一些东西，但我不认为初始噪声方差`var`“适合”任何东西。我不认为它是一个参数（尽管我同意使用“初始”这个词会让你不这么认为）。

噪声方差只是添加到训练点的相关矩阵的对角线上，如[本页](http://scikit-learn.org/dev/modules/gaussian_process.html)关于其他一些软件的描述。查看函数定义，看起来这正是它正在做的事情`kernlab`：

```
# The only relevant line where 'var' is used
alpha(ret) <- solve(K + diag(rep(var, length = m))) %*% y 
```

如果您想通过噪声方差获得误差（或任何拟合度量），您可以执行以下操作：

```
error.fun<-function(x) error(gausspr(obs$x, obs$y, kernel="rbfdot", scaled=FALSE, var=x))
noises<-seq(0.1,1,by=0.1)
y<-sapply(noises,error.fun)
plot(noises,y,type='l') 
```

`var`据我所知，内置的交叉验证不以任何方式“适合” 。交叉验证中唯一相关的行在这里：

```
cret <- gausspr(x[cind, ], y[cind], type = type(ret), 
                scaled = FALSE, kernel = kernel, var = var, 
                tol = tol, cross = 0, fit = FALSE) 
```

你可以看到它`var`只是被放进去，没有任何改变。

# javascript - 无法从 AJAX (dataType:"jsonp") 调用 Web 服务读取数据

> ID：13424884
> 
> 赞同：0
> 
> 时间：2012-11-16T21:46:04.217
> 
> 标签：javascript, jquery, jsonp

我正在使用 ajax 调用从托管在某个服务器上的 WebService 执行 POST 和 GET 操作。

由于跨域问题，我正在使用 dataType:"jsonp"。我可以在 fiddler 上看到 Web 服务发送的数据。我想访问从服务中获得的数据，但我不知道该怎么做。

这是我的ajax调用：

```
 $.ajax({
        type: method,
        url: "url",
        contentType: "application/json; charset=utf-8",
        dataType: "jsonp",
        jsonp: false,
        jsonpcallback:function(data){},            //What am I supposed to write here so that I can get the JSON data from Padded json
        success: successHandler,
        error: errorHandler
    }); 
```

这是我从服务收到的 json 响应的近似值：

```
 {"Ideas":[
               {"Message":null,"IdeaId":1},
               {"Message":null,"IdeaId":1}
             ]
    } 
```

任何形式的帮助将不胜感激。我搜索了很多帖子，但无法通过。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:13:14.193

> `jsonpcallback:function(data){},`//我应该在这里写什么，以便我可以从 Padded json 获取 JSON 数据

通常，什么都没有。如果您的 JSONP 服务真的不典型，您只需要指定回调。如果你指定它，它需要是一个**字符串**。

同样，您不应设置`jsonp: false`，因为那样会阻止生成回调参数。

您确实需要一个成功处理程序来处理数据。拥有一个错误处理程序也是一个好主意。

```
function successHandler(data) {
    console.log(data)
}

function errorHandler(jqXHR, errorType, exception) {
    console.log(errorType, exception);
}

$.ajax({
    url: "url", // Make this the real URL!
    dataType: "jsonp",
    success: successHandler,
    error: errorHandler
}); 
```

然后 JSONP 处理程序需要实际返回 JSONP

服务器返回的`Content-Type`标头应该是`application/javascript`

身体应该是：

*   `callback`查询字符串中键的值
*   `(`
*   一些 JSON
*   `);`

例如

```
jqueryCallback123u54yiyioeuioey8({ "foo": "bar" }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T21:51:59.913

我不是一个出色的脚本编写者，但我在我的项目中使用了 AJAX。试试这个，这就是它对我的工作方式。

```
$.ajax({
    type: method,
    url: "url",
    dataType: "jsonp",
    success: function(data){
        console.log(data);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T22:05:12.493

你需要使用你的**控制台**。例如`firebug`，如果您使用`firefox`, 或`chrome's development console`.

在那里，您应该会看到代码中的错误。

```
ajax() 
```

jquery 中的函数需要`success: function(data){ // do something with the data }` 回调。

```
console.log(//some data) 
```

用于在脚本的不同点记录各种数据。

所以

```
$.ajax({
    type: method,
    url: "url",
    dataType: "jsonp",
    success: function(data){
    console.log(data);
}

}); 
```

这不是一个坏主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T22:07:12.217

我以这种方式启动并运行它：

```
<script type="text/javascript">

  var jsonpCallback;

  function checkDocId() {
    // AJAX request
    $.ajaxSetup({ cache: false });

    jsonpCallback = function(data) {
      $("#result").html(data.html);
    };

    $.ajax({
      type: "GET",
      url: "/secudok/ws/rest/checkdocid/jsonp/" + encodeURIComponent($("#docId").val()),
      dataType: "jsonp",
      jsonpCallback: "jsonpCallback",
      crossDomain: true
    });
  }

</script> 
```

服务器返回包装到回调函数中的数据：function({JSON})。

```
jsonpCallback({"html":"<table>data</table>\n"}) 
```

在我的示例中，我们使用 HTML，但也可以是 JSON

```
yourCallbackName({"a":"1"; "b":"2"}) 
```

# javascript - 在浏览器窗口之间拖动内容

> ID：13424886
> 
> 赞同：1
> 
> 时间：2012-11-16T21:46:18.453
> 
> 标签：javascript, web-applications

这是一个远射，我很确定这是不可能的，但我想我会问一下，以防有人知道一些我不知道的巫术。

在任何情况下，是否有可能使用任何浏览器，即使需要某种插件，将元素从一个浏览器窗口拖到另一个浏览器窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T22:00:39.113

这有点过时了，但这里有一个令人讨厌的设置，通过一些调整可能对你有用。

Flash 有一个类`LocalConnection`，它使用 IPC 与其他 Flash 实例进行通信。虽然这通常在同一页面上的 Flash 电影之间使用，但它确实可以在其他浏览器窗口中的 Flash 电影之间使用，甚至完全可以在其他浏览器之间使用。例如，您可以将消息从 Chrome 页面上的 Flash 电影发送到 Internet Explorer 页面上的 Flash 电影。

现在，这个沟通渠道应该是您最需要的。流程应该和他的一样：

1.  检测页面 A 上的开始拖动
2.  检测鼠标离开页面A
3.  广播事件 1/2 已经发生的消息，以及描述被拖动对象的任何所需数据。
4.  在 B 页上检测到该广播，然后稍等片刻。
5.  检测鼠标进入页面B
6.  检测页面 B 上的鼠标上移
7.  对先前广播的数据采取行动。

不漂亮，而且容易出错，但取决于你需要这个有多严重，可能会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T21:59:11.537

由于 JavaScript 的工作方式，很难将数据从一个窗口移动到另一个窗口。即使您使用的是框架（在同一个域上）。

如果您`DOMElement`在一个框架中制作一个，则不允许将其添加到另一个框架的 DOM 中，因为它们不具有相同的祖先。同样`instanceof`，如果您在帧之间发送对象等等，检查也会失败。

但是，您可以模拟它，但这需要两个窗口彼此非常同步（通过服务器？滞后？）。如果您在到达边缘后结束窗口上的拖动事件，让它向服务器发送一个信号，该信号在另一个窗口上使用适当的数据启动一个拖动开始事件等，您*可以*使其工作。

# c# - 使用实体框架转换为 IQueryable 时的空值

> ID：13424888
> 
> 赞同：1
> 
> 时间：2012-11-16T21:46:27.547
> 
> 标签：c#, linq, entity-framework, linq-to-entities, entity-framework-5

我正在使用 EF5，并且我有一个带有 GetById 方法的通用存储库，该方法可以接收所需的包含属性，如下所示：

```
public virtual T GetByIdIncluding(long id, params Expression<Func<T, object>>[] includeProperties)
{
    IQueryable  <T> query = DbContext.Set<T>().Find(id) as IQueryable<T>;

    foreach (var includeProperty in includeProperties)
    {
        query = query.Include(includeProperty);
    }

    return query.FirstOrDefault();
} 
```

`DbContext.Set<T>().Find(id)`返回正确的对象，但是当我将其转换为 IQueryable 时，变量查询的值变为空。

为什么？如何仅选择具有由参数发送的 Id 的实体以及由参数发送的所有包含项？

使用示例：

```
var houses = Uow.Types.GetByIdIncluding(id, tt => tt.Houses); 
```

提前致谢！吉列尔莫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:52:47.400

`DbContext.Set<T>().Find(id)`返回单个实体。

`IQueryable<T>`是一个`DbContext.Set<T>()`。

* * *

通过 id 选择单个实体后，您不能包含某些属性。包含一些属性后也不能使用`DbSet<T>.Find`，因为结果将是`IQueryable<T>`. 您可以做什么 - 稍后按 id 包含属性和过滤结果：

```
public static IQueryable<T> Including(
                          params Expression<Func<T, object>>[] includeProperties)
{            
    IQueryable<T> query = DbContext.Set<T>();

    foreach (var includeProperty in includeProperties)    
        query = query.Include(includeProperty);    

    return query;
} 
```

然后：

```
var types = Uow.Types.Including(tt => tt.Houses)
                     .SingleOrDefault(tt => tt.Id == id); 
```

您还可以`GetByIdIncluding`在具体的存储库类中创建方法（而不是在通用存储库中）：

```
public static Foo GetByIdIncluding(long id, 
                 params Expression<Func<Foo, object>>[] includeProperties)
{
    return Including(includeProperties).SingleOrDefault(f => f.Id == id);
} 
```

**顺便说一句**，考虑使用延迟加载（默认情况下启用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T21:54:50.410

[http://msdn.microsoft.com/en-us/library/gg696418%28v=vs.103%29.aspx](http://msdn.microsoft.com/en-us/library/gg696418%28v=vs.103%29.aspx) `DbSet.Find`方法返回一个实体，而不是`IQueryable`您的实体。`Set`在调用`Find`方法之前尝试设置 Include 。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-16T22:01:21.043

您需要`Find`在循环之后移动 to：

```
public virtual T GetByIdIncluding(long id, params Expression<Func<T, object>>[] includeProperties)
{
    var query = DbContext.Set<T>();

     foreach (var includeProperty in includeProperties)
     {
         query = query.Include(includeProperty);
     }

    return query.Find(id);
} 
```

# variables - 无法在 IF 语句中获取正确的 NSString 值

> ID：13424889
> 
> 赞同：0
> 
> 时间：2012-11-16T21:46:29.277
> 
> 标签：variables, if-statement, nsstring

下面显示的 IF 语句不起作用，我想知道是否有人知道为什么？

```
 NSString *tagString = [NSString stringWithFormat:@"%@",_buttonTag];

if (tagString = @"%f",1) {
    NSLog(@"started with button TAG %@",_buttonTag); 
```

我的 NSLog 每次都会带回正确的变量。但是我的代码不符合我认为的条件，因为我没有正确编写 if 语句。希望这是有道理的？有谁知道我错过了什么或做错了什么？

基本上，我希望字符串中的变量等于“1”（以及我在此下面的其他 if 语句），因此它在那个特定的 If 语句中运行我的代码。我已经尝试了 %f、%d 和 %@，但没有任何效果。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:07:39.033

我想到了！我必须像这样将 NSString 转换为 NSInteger：

```
NSString *tagString = [NSString stringWithFormat:@"%@",_buttonTag];
NSInteger value = [tagString intValue];

if (value == 1) {
    NSLog(@"Tag 1 button TAG %d",value); 
```

完美运行！！！

# ruby-on-rails - 缺少 Internet Explorer 的引导程序图标

> ID：13424897
> 
> 赞同：3
> 
> 时间：2012-11-16T21:47:04.690
> 
> 标签：ruby-on-rails, internet-explorer, twitter-bootstrap

使用引导程序。下面是 Internet Explorer 7/8 中的代码截图。输入前置图标丢失

```
 <div class="input-prepend">
      <span class="add-on">
        <i class="icon-envelope"></i>
      </span>
      <input id="user_email" name="user[email]" type="text" placeholder="Email" class="span3 inputfield" />
    </div>
    <div class="input-prepend">
      <span class="add-on">
        <i class="icon-key"></i>
      </span>
      <input id="user_password" name="user[password]" type="password"  placeholder="Password"  class="span3 inputfield" />
    </div>
    <div class="controls">
      <div class="top10" style="overflow:hidden;">
        <span class="pull-left checkbox" for="user_remember_me">
          <label><input id="user_remember_me" name="user[remember_me]" type="checkbox" value="1" />Remember me</label>
        </span>
        <button class="btn btn-success pull-right right20" name="commit" type="submit" />
          Login
        </button>
      </div>
    </div> 
```

![在此处输入图像描述](../Images/c48d9d37e6aa428725f00c1cb70c24d1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T22:15:20.643

```
<!--[if IE 7]>
<link rel="stylesheet" href="assets/css/font-awesome-ie7.css">
<![endif]--> 
```

解决它

# api - Zend Framework 模块化应用程序？

> ID：13424903
> 
> 赞同：0
> 
> 时间：2012-11-16T21:47:58.993
> 
> 标签：api, zend-framework, module

我是 Zend 模块化应用程序的新手。我有一个 api 控制器，我想从这个控制器调用其他模块。例如将数据发布到此地址：

```
http://localhost/api/addTask 
```

我添加了一个自定义路由来将所有请求重定向到 api/index
现在，如何通过 indexAction 调用模块或其他方法？
例如：

```
function indexAction()
{
    $params = $this->getRequets()->getParams();
    $controller = $params[0];//I know that there is issues with this line but keep going...
    //module name is addTask

    //call to module or controller addTask
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T06:03:12.880

您可以使用`_forward()`从控制器调用其他操作
`_forward($action, $controller = null, $module = null, array $params = null):`
这是 ZF 手册[Zend Action Helpers的链接](http://framework.zend.com/manual/1.12/en/zend.controller.action.html#zend.controller.action.utilmethods)

# meta-tags - 如何使用 javascript 更改元内容

> ID：13424910
> 
> 赞同：0
> 
> 时间：2012-11-16T21:48:34.420
> 
> 标签：meta-tags

我正在尝试使用 javascript 更改元标记的内容。下面的代码不适用于我：

```
metatags = document.getElementsByTagName("meta"); 
```

请提出您的建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:50:10.177

`metatag1 = document.getElementsByTagName("meta")[0]`, 如果您要更改的元标记是页面中的第一个，如果您想更改第二个使用`metatag2 = document.getElementsByTagName("meta")[1]`，则使用此

`metatag1.setAttribute("content", "new content")`;

但是您最好按名称获取元素，例如

```
metatagDescription = document.getElementsByName("description")[0], 
```

（当然，如果您确定没有任何其他元素具有例如“描述”名称）知道您将要更改的元标记，我认为它更可靠，而不是基于页面上的元标记顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T21:52:16.597

如果你使用**jquery**，你可以简单地使用`$("meta")`和执行你想要的东西。 **可链式**。

# c# - 重复导出

> ID：13424913
> 
> 赞同：2
> 
> 时间：2012-11-16T21:48:47.277
> 
> 标签：c#, mef

我一直在试验 MEF，我注意到我偶尔会得到重复的导出。我创建了这个简化的示例：

我创建了以下接口，以及元数据的属性：

```
public interface IItemInterface
{
    string Name { get; }
}

public interface IItemMetadata
{
    string TypeOf { get; }
}

[MetadataAttribute]
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Property, AllowMultiple = false)]
public class ItemTypeAttribute : ExportAttribute, IItemMetadata
{
    public ItemTypeAttribute(string typeOf)
    {
        TypeOf = typeOf;
    }

    public string TypeOf { get; set; }
} 
```

然后我创建了以下导出：

```
public class ExportGen : IItemInterface
{
    public ExportGen(string name)
    {
        Name = name;
    }

    public string Name
    {
        get;
        set;
    }
}

[Export(typeof(IItemInterface))]
[ItemType("1")]
public class Export1 : ExportGen
{
    public Export1()
        : base("Export 1")
    { }
}

public class ExportGenerator
{
    [Export(typeof(IItemInterface))]
    [ExportMetadata("TypeOf", "2")]
    public IItemInterface Export2
    {
        get
        {
            return new ExportGen("Export 2");
        }
    }

    [Export(typeof(IItemInterface))]
    [ItemType("3")]
    public IItemInterface Export3
    {
        get
        {
            return new ExportGen("Export 3");
        }
    }
} 
```

执行此代码：

```
AggregateCatalog catalog = new AggregateCatalog();
CompositionContainer container = new CompositionContainer(catalog);
catalog.Catalogs.Add(new AssemblyCatalog(Assembly.GetExecutingAssembly().CodeBase));

var exports = container.GetExports<IItemInterface, IItemMetadata>();

foreach (var export in exports)
{
    Console.WriteLine(String.Format("Type: {0} Name: {1}", export.Metadata.TypeOf, export.Value.Name));
} 
```

这输出：

```
类型：1 名称：出口 1
类型：2 名称：出口 2
类型：3 名称：出口 3
类型：3 名称：出口 3

```

当我调用 GetExports() 时，我得到了 Export3 的副本，出口 1 和 2 没有重复。（请注意，当我使用 ItemTypeAttribute 时，我得到了副本。）

如果我删除类型 1 和 2，并调用“GetExport”，它会抛出异常，因为有超过 1 个导出。

谷歌搜索得到了一年前的[一篇博](http://imapcgeek.blogspot.com/2011/11/i-just-discovered-that-managed.html)文，但没有解决方案或后续行动

我在这里做错了什么，或者可能错过了一些愚蠢的事情吗？

（所有这些都使用 VS2010 和 .NET 4.0。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T00:52:24.410

将构造函数更改`ItemTypeAttribute`为：

```
public ItemTypeAttribute(string typeOf)
    : base(typeof(IItemInterface)) 
{
    TypeOf = typeOf;
} 
```

并删除

```
[Export(typeof(IItemInterface))] 
```

因为您的自定义属性派生自`ExportAttribute`. 这解释了你的双重出口。

可以在 CodePlex 中[MEF 文档的“使用自定义导出属性”部分找到指南。](http://mef.codeplex.com/wikipage?title=Exports%20and%20Metadata)

# spring - 资源包和 SessionLocaleResolver

> ID：13424915
> 
> 赞同：2
> 
> 时间：2012-11-16T21:48:49.533
> 
> 标签：spring, spring-mvc

我已经搜索了这个站点（和其他站点），但无法找到解决方案。或者，我找到的解决方案看起来与我的做法相似。

无论如何，在用户登录后，我会根据他们的个人资料偏好更新他们的语言环境。在这种情况下，我需要将用户更新为“fr_FR”法语。有趣的是，用户登录后第一页是英文的，但是如果您离开页面，页面会变为法语，如果您返回原来的页面，则现在是法语。

当用户登录时，他们通过 HomeController 将 SessionLocaleResolver 设置/更新为应该是法语的，但下一页没有反映这一点！！。

```
final LocaleResolver localeResolver = RequestContextUtils.getLocaleResolver(request);

   if (localeResolver != null) {
  // get the new locale name from the request param, if possible
  final String newLocaleName = userProfile.getDefaultLocaleId();
  if (newLocaleName != null) {
    final LocaleEditor localeEditor = new LocaleEditor();

        localeEditor.setAsText(newLocaleName);
        // set the new locale
        localeResolver.setLocale(request, response,
            (Locale) localeEditor.getValue());                                                                          
  }
    } 
```

配置类="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">

```
<bean id="messageSource"  class="
     com.ecommerce.web.util.MyResourceBundleMessageSource" >        
        <property   name="basenames" >
    <util:list>
      <value>resourcebundles.mybundles-ui</value>
      </util:list>
    </property>
</bean>

<bean id="localeResolver"        
 class="org.springframework.web.servlet.i18n.SessionLocaleResolver" > 
   <property name="defaultLocale" value="en" />
</bean> 
```

这是一个类似于我的问题，但除非我读错了，否则我认为我做的事情是正确的。

[http://forum.springsource.org/showthread.php?36339-Multilanguage-in-Session-with-SessionLocaleResolver](http://forum.springsource.org/showthread.php?36339-Multilanguage-in-Session-with-SessionLocaleResolver)

我不确定我在这里缺少什么......

# php - 在 CakePHP 中使用 JSON 设置 Content-Type 标头

> ID：13424922
> 
> 赞同：0
> 
> 时间：2012-11-16T21:49:13.890
> 
> 标签：php, http, cakephp, header

我需要`Content-Type: application/json; charset=UTF-8`在 CakePHP 的数据视图中进行设置。我已经尝试设置`$this->response->header('Content-Type', 'application/json; charset=UTF-8');`，但这并没有改变任何东西。它仍然只是输出`Content-Type: application/json`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:36:44.487

它在代码中（CakeResponse，第 447 行）：

```
if (strpos($this->_contentType, 'text/') === 0) {
    $this->header('Content-Type', "{$this->_contentType}; charset={$this->_charset}");
} else {
    $this->header('Content-Type', "{$this->_contentType}");
} 
```

所以只有“text/...”才会附加字符集。我不知道为什么，虽然...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T04:37:38.537

有趣的是，我昨晚也遇到了同样的问题。似乎 UTF-8 是默认的 JSON 编码，这可能是 Cake 不发送标头的原因（但我无法找到对这个决定的引用）。

我的解决方案是使用 php——`json_decode()`它应该正确解码字符串。我有很多法语口音显示为 java/C unicode，例如`\u00E9`，我认为这是一个标题问题。但是在通过`json_decode()`重音字符运行字符串后，所有显示都正确。

Marks 的评论链接也有很好的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T12:57:59.370

为此，您可以将其放在控制器/功能中：

```
json_encode($updown_rs); 
```

并在视图文件（views/check_json）中：

```
var json_object = $.parseJSON(response); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-21T13:33:22.177

application/json 没有字符集参数。试图设置一个是没有意义的。请参阅[http://rfc7159.net/rfc7159#ianacons](http://rfc7159.net/rfc7159#ianacons)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-15T15:35:38.803

我正在使用 cake 2.10.11 并且只是在 json 布局中使用了这段代码：

```
$this->response->charset('utf-8'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-08T16:06:22.557

您可以`$this->RequestHandler->ext = 'json';`在 beforefilter 方法中使用

查看以下示例

```
public function beforeFilter(){
    parent::beforeFilter();
    $this->RequestHandler->ext = 'json';
}

public function index()
{
    $this->autoRender = false;
    $output = array(
      array('value' =>'first value'),
      array('value' =>'second value'),
    );
    $json = json_encode($output);
    $this->response->body($json);
} 
```

# django - Django + s3 gzip 上传图片

> ID：13424923
> 
> 赞同：3
> 
> 时间：2012-11-16T21:49:20.520
> 
> 标签：django, amazon-s3, gzip

收集静态文件时，我可以成功使用 django-storages 对图像进行 gzip 压缩，但是当用户使用表单上传图像时，图像保持未压缩状态。有没有办法在 django 中压缩这些图像？

# cmake - 无论平台如何，都为动态库选择正确的文件结尾

> ID：13424924
> 
> 赞同：0
> 
> 时间：2012-11-16T21:49:20.393
> 
> 标签：cmake

我正在使用 CMake 2.8.8 和`ExternalProject`模块。CMake 检索项目的源文件并正确构建它们（导致unix 上`project.a`的`project.so`文件）。我想总是使用动态库。我怎样才能做到这一点并且仍然是跨平台的？

我试过了

```
list(
    APPEND foo_LIBRARIES
    ${binary_dir}/${CMAKE_FIND_LIBRARY_PREFIXES}project${CMAKE_FIND_LIBRARY_SUFFIXES}
) 
```

但这不起作用，因为`{CMAKE_FIND_LIBRARY_SUFFIXES}`它是一个`.a;.so`.

```
list(
    APPEND foo_LIBRARIES
    ${binary_dir}/${CMAKE_FIND_LIBRARY_PREFIXES}project.so
) 
```

有效，但仅适用于 Unix 系统。有没有一种干净的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T22:29:28.210

鉴于is just ，您可以执行以下操作`WIN32`：`${CMAKE_FIND_LIBRARY_SUFFIXES}``.lib`

```
set(ProjectSuffix ${CMAKE_FIND_LIBRARY_SUFFIXES})
list(REMOVE_ITEM ProjectSuffix .a)
list(APPEND foo_LIBRARIES
    ${binary_dir}/${CMAKE_FIND_LIBRARY_PREFIXES}project${ProjectSuffix}) 
```

# python - 如果文件不存在，则优雅退出

> ID：13424926
> 
> 赞同：27
> 
> 时间：2012-11-16T21:49:23.653
> 
> 标签：python, python-idle

我在 Python 3.2.3 中有以下脚本：

```
try:
    file = open('file.txt', 'r')
except IOError:
    print('There was an error opening the file!')
    sys.exit()

#more code that is relevant only if the file exists 
```

如果文件不存在（或者打开它时出错），我如何优雅地退出？

我可以使用`exit()`，但这会打开一个对话框面板，询问我是否要终止该应用程序。

我可以使用`sys.exit()`，但这会引发 SystemExit 异常，该异常在输出中看起来不太好。我明白了

```
Traceback (most recent call last):   
File "file", line 19, in <module>
    sys.exit() SystemExit 
```

我可以使用`os.exit()`，但这会在 C 级别杀死 Python，而我可能不会执行任何清理。

我可以使用布尔变量并将所有后续代码包装在 if... 中，但这很难看，而且这不是我正在执行的唯一检查。所以我想要六个嵌套的 if ......

我只想打印 'There was an error...' 并退出。我在 IDLE 工作。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-16T22:20:35.947

这是一种非常优雅的方式。SystemExit 回溯不会在 IDLE 之外打印。或者，您可以使用`sys.exit(1)`来向 shell 指示脚本因错误而终止。

或者，您可以在“主”函数中执行此操作并用于`return`终止应用程序：

```
def main():
    try:
        file = open('file.txt', 'r')
    except IOError:
        print('There was an error opening the file!')
        return

    # More code...

if __name__ == '__main__':
    main() 
```

这里应用程序的主要执行代码被封装在一个名为“main”的函数中，**只有当**脚本直接由 Python 解释器执行时才会执行，或者换句话说，如果脚本**没有**被另一个脚本导入。（`__name__`如果脚本直接从命令行执行，则变量设置为“__main__”。否则，它将设置为模块的名称。）

这具有将所有脚本执行逻辑收集到一个函数中的优点，使您的脚本更清晰，并使您能够使用`return`语句干净地退出脚本，就像在大多数编译语言中一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T08:55:51.857

使用 sys.exit() 很好。如果您非常关心输出，您可以随时在错误处理部分添加一个额外的 try/except 块来捕获 SystemExit 并阻止它被定向到控制台输出。

```
try:
    file = open('file.txt', 'r')
except IOError:
    try:
        print('There was an error opening the file!')
        sys.exit()
    except SystemExit:
        #some code here that won't impact on anything 
```

# ios - Xcode 4.5 - CopyPNGFile 仍然存在。需要新想法

> ID：13424927
> 
> 赞同：12
> 
> 时间：2012-11-16T21:49:26.933
> 
> 标签：ios, xcode, ios6, ios-simulator, xcode4.5

我正在制作一个 iPad 应用程序，它在模拟器上运行，但是当我尝试为设备构建它时失败了。

错误如下：

![在此处输入图像描述](../Images/78bfd56a2df24ff50b4f6ea93cfae5c2.png)

这些是我试图纠正这个问题的事情：

*   用 Photoshop 浏览每一个 PNG 文件，然后再次保存它们，不用隔行扫描
*   删除了我的资源文件夹中的所有图像，并通过再次拖放图像再次添加它们
*   删除了所有 PNG 图像（保留了 JPG）并且它可以工作......当我添加一个 PNG 时，Xcode 会发出嘶嘶声。
*   删除了我的 ~Library/Developer/Xcode 中的derivedData
*   退出 Xcode 并再次尝试
*   重新启动我的计算机并再次尝试。

我尝试检查路径，但我不确定。任何想法都会很棒。

*附录* 我还想补充一点，Xcode 正在针对它自己的 Default@2x.png 和 Default.png 抛出错误！

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-08-18T08:21:35.800

在我的情况下，错误是通过去解决的

构建阶段 -> 复制捆绑资源

并删除所有午餐图像 Def​​aultXX.png 的重复条目

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-25T10:32:10.693

您必须将 PNG 文件保存为 NOT INTERLACED。例如，通过使用 Photoshop，转到菜单 File->Save For Web and Devices。取消选中“隔行扫描”框并保存文件。通常交错框已经取消选中。希望有帮助

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-28T14:18:50.303

这与丢失的 png 文件无关，而是与您链接的动态库有关，而该动态库在 ios 上不可用

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-11T09:02:09.797

Build Settings -> Search for Compress PNG Files 并设置为 NO 。这对我有帮助

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-17T11:09:58.350

嗯，我想通了。错误日志有点误导，因为它在红色突出显示之前显示“原因：未找到图像”。

原来“图像”不是PNG或JPG，而是上面明确提到的liberal.dylib。不知道我的 perl 库是如何消失的......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-13T20:49:13.503

`copy bundle resources`对我来说，当 png 在选项卡上的阶段中列出时，就会发生此错误`build phases`。见[https://stackoverflow.com/a/5659415/287403](https://stackoverflow.com/a/5659415/287403)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-03T07:59:49.703

如果您以意外的格式保存文件，也可能会发生错误。例如，您保存 *.png 但使用 .jpg 编码。确保文件格式是您真正想要的格式。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-30T12:43:20.563

只需尝试删除给您带来麻烦的文件的 .png 扩展名。不知道如何，但为我工作！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-24T13:15:55.567

看看[这个](http://www.marbleblue.co.uk/xcode-build-copypngfile-error-file-directory/)，这可能对你有帮助。或者从你的项目中删除 bkg1.png。

# javascript - 如何将一组颜色传递到 highcharts.js 上的系列条中

> ID：13424928
> 
> 赞同：0
> 
> 时间：2012-11-16T21:49:38.847
> 
> 标签：javascript, jquery, html, jquery-ui

我已经处理这个脚本很长时间了，我不知道如何为两个系列数据数组中的每个条提供不同的背景颜色，我可以这样做：

```
 data: [{
                y: 88,
                color: {
                    linearGradient: {
                        x1: 0,
                        y1: 0,
                        x2: 1,
                        y2: 0
                    },
                    stops: [
                        [0, 'rgb(66, 121, 54)'],
                        [.50, 'rgb(86, 146, 71)'],
                        [.50, 'rgb(97, 159, 79)'],
                        [1, 'rgb(120, 182, 98)']]
                }

                } 
```

但我需要这样的数据数组：

```
 series: [{
            name: 'Previous',
            data : [145, 180, 199, 244]
        }, {
            name: 'Current',
            data : [145, 180, 199, 244]
        }] 
```

并使用颜色数组给出不同的颜色，例如：

```
 colors: [ 

            { linearGradient: { x1: 0, y1: 0, x2: 1, y2: 0 },
                    stops: [ [0, 'orange'], [1, '#fff']] },

            { linearGradient: { x1: 0, y1: 0, x2: 1, y2: 0 },
                    stops: [ [0, 'gray'], [1, '#fff']] },

            { linearGradient: { x1: 0, y1: 0, x2: 1, y2: 0 },
                    stops: [ [0, 'fushia'], [1, '#fff']] },

            { linearGradient: { x1: 0, y1: 0, x2: 1, y2: 0 },
                    stops: [ [0, 'green'], [1, '#fff']] },

            { linearGradient: { x1: 0, y1: 0, x2: 1, y2: 0 },
                    stops: [ [0, 'pink'], [1, '#fff']] },

            { linearGradient: { x1: 0, y1: 0, x2: 1, y2: 0 },
                    stops: [ [0, 'purple'], [1, '#fff']] },

        ], 
```

我创建了一个[http://jsfiddle.net/creativestudio/R4CmJ/](http://jsfiddle.net/creativestudio/R4CmJ/)

这是我正在尝试做的快照，基本上每组的第一列有不同的颜色，第二个栏有相同的纯色。![在此处输入图像描述](../Images/6d2295a3ee710ca55567f8039c6519f3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:58:54.467

我能够使用将其添加到 plotOptions 系列“colorByPoint：true”来解决问题，现在代码如下所示：

```
 series: {
                borderWidth: 0,
                shadow: false,
                borderRadius: 2,
                pointWidth: 16,
                shadow: false,
                colorByPoint: true 
```

// groupPadding: 0.001 }

然后颜色数组看起来像这样：颜色：[

```
 { linearGradient: { x1: 0, y1: 0, x2: 1, y2: 0 },
                stops: [ [0, 'rgb(62, 131, 161)'], [.50, 'rgb(45, 94, 119)'], [.50, 'rgb(51, 107, 134)'], [1, 'rgb(34, 72, 91)']] },

        { linearGradient: { x1: 0, y1: 0, x2: 1, y2: 0 },
                stops: [ [0, 'rgb(62, 131, 161)'], [.50, 'rgb(45, 94, 119)'], [.50, 'rgb(51, 107, 134)'], [1, 'rgb(34, 72, 91)']] },

        { linearGradient: { x1: 0, y1: 0, x2: 1, y2: 0 },
                stops: [ [0, 'rgb(62, 131, 161)'], [.50, 'rgb(45, 94, 119)'], [.50, 'rgb(51, 107, 134)'], [1, 'rgb(34, 72, 91)']] },

        { linearGradient: { x1: 0, y1: 0, x2: 1, y2: 0 },
                stops: [ [0, 'rgb(62, 131, 161)'], [.50, 'rgb(45, 94, 119)'], [.50, 'rgb(51, 107, 134)'], [1, 'rgb(34, 72, 91)']] },

        { linearGradient: { x1: 0, y1: 0, x2: 1, y2: 0 },
                stops: [ [0, 'rgb(66, 121, 54)'], [.50, 'rgb(86, 146, 71)'], [.50, 'rgb(97, 159, 79)'], [1, 'rgb(120, 182, 98)']]},

        { linearGradient: { x1: 0, y1: 0, x2: 1, y2: 0 },
                stops: [ [0, 'rgb(167, 195, 100)'], [.50, 'rgb(183, 206, 128)'], [.50, 'rgb(192, 213, 145)'], [1, 'rgb(207, 223, 170)']]},

        { linearGradient: { x1: 0, y1: 0, x2: 1, y2: 0 },
                stops: [ [0, 'rgb(211, 127, 39)'], [.50, 'rgb(220, 151, 52)'], [.50, 'rgb(224, 163, 57)'], [1, 'rgb(232, 186, 72)']]},

        { linearGradient: { x1: 0, y1: 0, x2: 1, y2: 0 },
                stops: [ [0, 'rgb(190, 63, 36)'], [.50, 'rgb(203, 83, 48)'], [.50, 'rgb(208, 94, 53)'], [1, 'rgb(220, 116, 66)']]}
    ], 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T00:03:32.530

我找到了一种不同的方法来解决它，但它需要将颜色嵌入到数据中，因此您必须对数据进行后处理才能达到此目的。

```
series: [
  {
    data: [{y: 145}, {y: 180},{y: 199}, {y: 244},]
  },

  {
    data: [
     {
       color: 'green',
       y: 145
     }, {
       color: 'fuchsia',
       y: 180
     },
     {
       color: 'blue',
       y: 199
     }, {
       color: 'orange',
       y: 244
     },
    ]
  },
 ] // end series 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T19:14:57.763

另请记住，您可以将 colorByPoint 单独应用于一个系列。

# php - 仅加载唯一行查询 XML/JSON API

> ID：13424930
> 
> 赞同：1
> 
> 时间：2012-11-16T21:49:49.880
> 
> 标签：php, mysql, xml, json, api

我正在尝试使用我创建的一些脚本来最小化加载时间。我正在通过开发人员的 API 资源或通过 RSS 提要连接到多个 JSON 或 XML API，并且我正在尝试找到一种仅将新行插入 mysql 数据库的方法。

我使用了 INSERT IGNORE 函数，它工作得很好，但问题是它仍然加载所有不同的行并且如果 UNIQUE 键是重复的则忽略插入它。我想做的是创建一个运行速度更快的脚本，如果它不同，它只会尝试插入一行。

我曾考虑过使用 in_array() 函数来查询数据库中的唯一键，但最终，数组将变得太大而无法处理（即 1,000,000 条记录），以查看它是否在插入唯一键之前的数组中。

有一个更好的方法吗？我已经在 mysql 中通过使用 WHERE 子句对数据库中已有的记录轻松地完成了它，但是从 XML API 中提取有点困难，我发现考虑到数据库将如何变得非常大。

# .net - 在同一张表上组合两个查询

> ID：13424935
> 
> 赞同：2
> 
> 时间：2012-11-16T21:50:25.563
> 
> 标签：.net, sql, vb.net, sql-server-2008, tsql

我已经查看了之前的几个问题，但我正在努力将解决方案应用于我的具体示例。

我在组合查询 1 和查询 2 时遇到问题。

我的查询最初返回（以及其他详细信息）当月所有成员/用户的值“ **SpentTotal** ”*和*“ *UnderSpent* ” 。

 **我的问题是在这个原始查询中添加了两列额外的列，这将只返回这两列（已花费和超支），但对于**前**几个月的数据

原始查询 #1：

```
set @BPlanKey = '##CURRENTMONTH##'
EXECUTE @RC = Minimum_UpdateForPeriod @BPlanKey

SELECT cm.clubaccountnumber, bp.Description , msh.PeriodMinObligation,  msh.SpentTotal, msh.UnderSpent, msh.OverSpent, msh.BilledDate, msh.PeriodStartDate, msh.PeriodEndDate, msh.OverSpent 
FROM MinimumSpendHistory msh 
     INNER JOIN BillPlanMinimums bpm ON msh.BillingPeriodKey = @BPlanKey and bpm.BillPlanMinimumKey = msh.BillPlanMinimumKey 
     INNER JOIN BillPlans bp ON bp.BillPlanKey = bpm.BillPlanKey 
     INNER JOIN ClubMembers cm ON cm.parentmemberkey is null and cm.ClubMemberKey = msh.ClubMemberKey 
order by cm.clubaccountnumber asc, msh.BilledDate asc 
```

查询 #2，查询 PREVIOUS 月份的所有列，但我只需要两个（已花费和超额），从上面添加到查询中，加入客户编号：

```
set @BPlanKeyLastMo = '##PREVMONTH##'
EXECUTE @RCLastMo = Minimum_UpdateForPeriod @BPlanKeyLastMo

SELECT cm.clubaccountnumber, bp.Description , msh.PeriodMinObligation, msh.SpentTotal, msh.UnderSpent, msh.OverSpent, msh.BilledDate, msh.PeriodStartDate, msh.PeriodEndDate, msh.OverSpent 
FROM MinimumSpendHistory msh 
     INNER JOIN BillPlanMinimums bpm ON msh.BillingPeriodKey = @BPlanKeyLastMo and bpm.BillPlanMinimumKey = msh.BillPlanMinimumKey 
     INNER JOIN BillPlans bp ON bp.BillPlanKey = bpm.BillPlanKey 
     INNER JOIN ClubMembers cm ON cm.parentmemberkey is null and cm.ClubMemberKey = msh.ClubMemberKey 
order by cm.clubaccountnumber asc, msh.BilledDate asc 
```

非常感谢所有愿意提供帮助和时间的人。

干杯!

*   阿杰

* * *

```
CREATE TABLE MinimumSpendHistory(
        [MinimumSpendHistoryKey] [uniqueidentifier] NOT NULL,
        [BillPlanMinimumKey] [uniqueidentifier] NOT NULL,
        [ClubMemberKey] [uniqueidentifier] NOT NULL,
        [BillingPeriodKey] [uniqueidentifier] NOT NULL,
        [PeriodStartDate] [datetime] NOT NULL,
        [PeriodEndDate] [datetime] NOT NULL,
        [PeriodMinObligation] [money] NOT NULL,
        [SpentTotal] [money] NOT NULL,
        [CurrentSpent] [money] NOT NULL,
        [OverSpent] [money] NULL,
        [UnderSpent] [money] NULL,
        [BilledAmount] [money] NOT NULL,
        [BilledDate] [datetime] NOT NULL,
        [PriorPeriodMinimum] [money] NULL,
        [IsCommitted] [bit] NOT NULL,
        [IsCalculated] [bit] NOT NULL,
        [BillPeriodMinimumKey] [uniqueidentifier] NOT NULL,
        [CarryForwardCounter] [smallint] NULL,
        [YTDSpent] [money] NOT NULL,
        [PeriodToAccumulateCounter] [int] NULL,
        [StartDate] [datetime] NOT NULL, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:28:26.410

```
SELECT cm.clubaccountnumber, bp.Description , msh.PeriodMinObligation,  msh.SpentTotal, msh.UnderSpent, msh.OverSpent, msh.BilledDate, msh.PeriodStartDate, msh.PeriodEndDate, 
mshp.SpentTotal, mshp.UnderSpent
FROM MinimumSpendHistory msh 
     INNER JOIN BillPlanMinimums bpm ON msh.BillingPeriodKey = @BPlanKey 
                                    and bpm.BillPlanMinimumKey = msh.BillPlanMinimumKey 
     INNER JOIN BillPlans bp ON bp.BillPlanKey = bpm.BillPlanKey 
     INNER JOIN ClubMembers cm ON cm.parentmemberkey is null 
                              and cm.ClubMemberKey = msh.ClubMemberKey
     LEFT OUTER JOIN ClubMembers cmp on cm.ClubMemberKey = msh.ClubMemberKey
     LEFT OUTER JOIN MinimumSpendHistory mshp on cmp.ClubMemberKey = mshp.ClubMemberKey
                              and mshp mshp.BillingPeriodKey = @BPlanKeyLastMo
order by cm.clubaccountnumber asc, msh.BilledDate asc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:15:01.860

几乎可以肯定有更直接的方法可以做到这一点，但这可能会奏效：

如果 ClubAccountNumber 在 ClubMembers 上不是唯一的，您还需要选择该表的主键，然后加入两个子选择。

```
Select
  a.ClubAccountNumber, 
  a.Description,
  a.PeriodMinObligation,
  a.SpentTotal,
  a.UnderSpent, 
  a.OverSpent, 
  a.BilledDate, 
  a.PeriodStartDate, 
  a.PeriodEndDate, 
  a.OverSpent, -- this second instance of overspent is from the question...
  b.SpentTotal As LastMonthSpentTotal, 
  b.UnderSpent As LastMonthUnderspent
From (
  Select
    cm.ClubAccountNumber, 
    bp.Description,
    msh.PeriodMinObligation,
    msh.SpentTotal,
    msh.UnderSpent, 
    msh.OverSpent, 
    msh.BilledDate, 
    msh.PeriodStartDate, 
    msh.PeriodEndDate
  From
    MinimumSpendHistory msh 
      Inner Join
    BillPlanMinimums bpm 
      On msh.BillingPeriodKey = @BPlanKey And bpm.BillPlanMinimumKey = msh.BillPlanMinimumKey 
      Inner Join
    BillPlans bp 
      On bp.BillPlanKey = bpm.BillPlanKey
      Inner Join
    ClubMembers cm 
      On cm.ParentMemberKey Is Null And cm.ClubMemberKey = msh.ClubMemberKey 
  ) a Left Outer Join (
  Select 
    cm.ClubAccountNumber,
    msh.SpentTotal,
    msh.UnderSpent
  From
    MinimumSpendHistory msh 
      Inner Join
    BillPlanMinimums bpm 
      On msh.BillingPeriodKey = @BPlanKeyLastMo and bpm.BillPlanMinimumKey = msh.BillPlanMinimumKey
      Inner Join
    BillPlans bp 
      On bp.BillPlanKey = bpm.BillPlanKey 
      Inner Join
    ClubMembers cm 
      On cm.ParentMemberKey Is Null And cm.ClubMemberKey = msh.ClubMemberKey 
  ) b On a.ClubAccountNumber = b.ClubAccountNumber -- this should probably join on cm.clubmemberkey, but we are guessing
Order By
  a.ClubAccountNumber, 
  a.BilledDate 
```**

# asp.net-mvc - 遍历数组并与实体对象进行比较

> ID：13424937
> 
> 赞同：0
> 
> 时间：2012-11-16T21:50:44.317
> 
> 标签：asp.net-mvc, razor

我试图在数据库对象的一对多关系中获取各种项目。所以我让实体框架创建我的位置对象，并且表中的一列有一个逗号分隔的位置可用服务列表。我用：

```
var data = pubDB.Locations.Include("Branch_Ameneties"); 
```

在模型中获得两个表之间的关系。然后在视图中，我尝试遍历数组中的功能并获取相关的分支设施：

```
@foreach (var Location in Model.LocationListings())
{
@if (Location.Features != null)
                {
                    string[] featureset = Location.Features.Split(',');
                    foreach (var item in featureset)
                    {
                        var feature = Location.Branch_Ameneties.Amenity.Where(x => Location.Branch_Ameneties.FID = Convert.ToInt32(item);
                        @feature
                    }
                } 
```

而且我似乎无法让数组与 amentiites 的参考表相关联。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:35:01.800

而不是使用 where 子句，尝试使用：

```
 var feature = Location.Branch_Ameneties.Amenity.Single(x => Location.Branch_Ameneties.FID == Convert.ToInt32(item)); 
```

此外，您有“..FID = Convert.ToInt32(item)”而不是“..FID **==** Convert...”

# php - 基于当前日期php构建选择列表

> ID：13424938
> 
> 赞同：1
> 
> 时间：2012-11-16T21:50:52.100
> 
> 标签：php, javascript, html

我创建了一个下拉选择列表，它根据当前日期生成日期列表，

4 天前和 7 天前，我尝试了几个较短的脚本，但都失败了，我一直在使用以下脚本，但它有一些限制......谢谢！

```
<option value=""> select </option>
<option value="<?php echo date ("m/d/Y", mktime (0,0,0,date("m"),(date("d")-4),date("Y")));?>" style="color:red;"><?php echo date ("m/d/Y", mktime (0,0,0,date("m"),(date("d")-4),date("Y")));?></option>
<option value="<?php echo date ("m/d/Y", mktime (0,0,0,date("m"),(date("d")-3),date("Y")));?>" style="color:red;"><?php echo date ("m/d/Y", mktime (0,0,0,date("m"),(date("d")-3),date("Y")));?></option>
<option value="<?php echo date ("m/d/Y", mktime (0,0,0,date("m"),(date("d")-2),date("Y")));?>" style="color:red;"><?php echo date ("m/d/Y", mktime (0,0,0,date("m"),(date("d")-2),date("Y")));?></option>
<option value="<?php echo date ("m/d/Y", mktime (0,0,0,date("m"),(date("d")-1),date("Y")));?>" style="color:red;"><?php echo date ("m/d/Y", mktime (0,0,0,date("m"),(date("d")-1),date("Y")));?></option>
<option value="<?php echo date ('m/d/Y');?>"><?php echo date ('m/d/Y');?> TODAY </option>
<option value="<?php echo date ("m/d/Y", mktime (0,0,0,date("m"),(date("d")+1),date("Y")));?>" style="color:green;font-weight:bold;"><?php echo date ("m/d/Y", mktime (0,0,0,date("m"),(date("d")+1),date("Y")));?></option>
<option value="<?php echo date ("m/d/Y", mktime (0,0,0,date("m"),(date("d")+2),date("Y")));?>" style="color:green;font-weight:bold;"><?php echo date ("m/d/Y", mktime (0,0,0,date("m"),(date("d")+2),date("Y")));?></option>
<option value="<?php echo date ("m/d/Y", mktime (0,0,0,date("m"),(date("d")+3),date("Y")));?>" style="color:green;font-weight:bold;"><?php echo date ("m/d/Y", mktime (0,0,0,date("m"),(date("d")+3),date("Y")));?></option>
<option value="<?php echo date ("m/d/Y", mktime (0,0,0,date("m"),(date("d")+4),date("Y")));?>" style="color:green;font-weight:bold;"><?php echo date ("m/d/Y", mktime (0,0,0,date("m"),(date("d")+4),date("Y")));?></option>
<option value="<?php echo date ("m/d/Y", mktime (0,0,0,date("m"),(date("d")+5),date("Y")));?>" style="color:green;font-weight:bold;"><?php echo date ("m/d/Y", mktime (0,0,0,date("m"),(date("d")+5),date("Y")));?></option>
<option value="<?php echo date ("m/d/Y", mktime (0,0,0,date("m"),(date("d")+6),date("Y")));?>" style="color:green;font-weight:bold;"><?php echo date ("m/d/Y", mktime (0,0,0,date("m"),(date("d")+6),date("Y")));?></option>
<option value="<?php echo date ("m/d/Y", mktime (0,0,0,date("m"),(date("d")+7),date("Y")));?>" style="color:green;font-weight:bold;"><?php echo date ("m/d/Y", mktime (0,0,0,date("m"),(date("d")+7),date("Y")));?></option> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T22:01:41.433

这应该可以满足您的要求。我已经重写了您的代码，使其尽可能简单易读。

```
<?php
echo '<select>';
echo '<option value="">select</option>';

for($i = -4; $i <= 7; ++$i)
{
    $date = date('m/d/Y', strtotime($i.' days'));
    echo '<option value="'.$date.'" style="color:red;">'.$date.'</option>';
}

echo '</select>';
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T21:59:11.393

这应该足够了：

```
echo '<select><option> select </option>';

for($x=-4;$x<=7;$x++){
    $date = date("m/d/Y",(time() + (86400 * $x)));
    if($x<0){
        $color='red';
    }elseif($x==0){
        $color = 'black;font-weight:bold';
    }else{
        $color = 'green';
    }
    echo '<option style="color:'.$color.'" value="'.$date.'">'.($x==0 ? 'TODAY':$date).'</option>';
}

echo '</select>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T21:59:30.667

您应该做的是为您的计算创建一个函数，以便您可以在代码中使用`mydate(+1)`,`mydate(-2)`而不是那个意大利面条。

不要在你的 html 中混合（**和重复**）这么多 php 代码，这是非常糟糕的做法并且难以维护。

**其次**，在您的函数中，您可以使用适当的函数将时间转换为**unix 时间戳**，添加毫秒数并将其转换回您需要的任何时间格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T22:00:54.853

你试过了吗

```
<?php
    for($i = -4; $i <= 7; $i++) {
        $date = date ("m/d/Y", mktime (0,0,0,date("m"),(date("d")-$i),date("Y")));

        $date_txt = $date;

        if($i == 0) {
            $date_txt = "Today";
        }

        printf("<option value=\"%s\" style=\"color: red\">%s</option>", $date, $date_txt);
    }
?> 
```

# c++ - 为什么宏扩展跟随模板扩展？

> ID：13424946
> 
> 赞同：1
> 
> 时间：2012-11-16T21:51:38.807
> 
> 标签：c++, templates, c-preprocessor

通常，代码示例首先：

```
void f1(int)
{}

#define f2(a) f1(a)

template<class F>
void f3(F f)
{
    f(0);
}

int main()
{
    f3(f2); // error C2065: 'f2' : undeclared identifier
    return 0;
} 
```

由 VC++ 2012 编译。

**我的问题是：**

为什么宏扩展跟随模板扩展？我认为这是非常违反直觉且容易出错的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T21:54:19.650

> 为什么宏扩展跟随模板扩展？

嗯，它没有。宏扩展由预处理器完成，模板扩展由解析器/编译器阶段完成（仅*在*预处理后运行）。

您在这里缺少的是宏的样式。`f2()`是一个函数式宏。因此，如果您编写`f2`（不带括号），预处理器不会将其替换为`f1`. 如果您想要这样的替换，只需将其定义为

```
#define f2 f1 
```

旁注：就目前而言，此代码没有多大意义。即使您使用括号并编写了`f2()`，您也会收到编译器错误，因为`f2()`宏只接受一个参数。如果它是具有参数且不是可变参数的函数式宏，则应为其提供参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T21:54:21.787

它没有。

问题是您已经`f2`使用函数式宏定义进行了定义，例如

```
#define f2(foo) bar 
```

但是在您的源代码中，您仅将`f2`其用作令牌，而不是将其用作函数调用，例如

```
f3(f2) 
```

由于您没有将它用作函数调用，因此它与函数样式的宏定义不匹配，因此不会被替换。

# hadoop - Apache Pig：在另一个元组上过滤一个元组？

> ID：13424947
> 
> 赞同：0
> 
> 时间：2012-11-16T21:51:40.903
> 
> 标签：hadoop, apache-pig

我想通过拆分两个元组（或在 Pig 中调用的任何内容）来运行 Pig 脚本，基于 中的标准`col2`，并在操作之后`col2`，进入另一列，比较两个操作的元组并进行额外的排除。

```
REGISTER /home/user1/piggybank.jar;

log = LOAD '../user2/hadoop_file.txt' AS (col1, col2);

--log = LIMIT log 1000000;
isnt_filtered = FILTER log BY (NOT col2 == 'Some value');
isnt_generated = FOREACH isnt_filtered GENERATE col2, col1, RANDOM() * 1000000 AS random, com.some.valueManipulation(col1) AS isnt_manipulated;

is_filtered = FILTER log BY (col2 == 'Some value');
is_generated = FOREACH is_filtered GENERATE com.some.calculation(col1) AS is_manipulated;
is_distinct = DISTINCT is_generated; 
```

拆分和操作是容易的部分。这就是复杂的地方。. .

```
merge_filtered = FOREACH is_generated {FILTER isnt_generated BY (NOT isnt_manipulated == is_generated.is_manipulated)}; 
```

如果我能弄清楚这条线，其余的就会到位。

```
merge_ordered = ORDER merge_filtered BY random, col2, col1;
merge_limited = LIMIT merge_ordered 400000;

STORE merge_limited into 'file'; 
```

以下是 I/O 的示例：

```
col1                col2            manipulated
This                qWerty          W
Is                  qweRty          R
An                  qwertY          Y
Example             qwErty          E
Of                  qwerTy          T
Example             Qwerty          Q
Data                qWerty          W

isnt
E
Y

col1                col2
This                qWerty
Is                  qweRty
Of                  qwerTy
Example             Qwerty
Data                qWerty 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:36:51.743

我仍然不太确定您需要什么，但我相信您可以使用以下内容（未经测试）重现您的输入和输出：

```
data = LOAD 'input' AS (col1:chararray, col2:chararray);
exclude = LOAD 'exclude' AS (excl:chararray);

m = FOREACH data GENERATE col1, col2, YourUDF(col2) AS manipulated;
test = COGROUP m BY manipulated, exclude BY excl;

-- Here you can choose IsEmpty or NOT IsEmpty according to whether you want to exclude or include
final = FOREACH (FILTER test BY IsEmpty(exclude)) GENERATE FLATTEN(m); 
```

使用`COGROUP`，您可以通过分组键对每个关系中的所有元组进行分组。如果元组包`exclude`为空，则意味着分组键不存在于排除列表中，因此您可以`m`使用该键保留元组。相反，如果分组键存在于 中`exclude`，则该包不会为空，并且`m`带有该键的元组将被过滤掉。

# relaxng - 如何在Relax NG 中写出“anything going”？

> ID：13424960
> 
> 赞同：0
> 
> 时间：2012-11-16T21:52:41.347
> 
> 标签：relaxng

有没有办法写出对 Relax NG 中元素的内容完全没有限制？

在 XML Schema 中，这样的事情显然是可能的

```
<xs:sequence>
   <xs:any namespace="##targetNamespace" processContents="lax"
       minOccurs="0" maxOccurs="unbounded"/>
</xs:sequence> 
```

我可以在 Relax NG 中做同样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:38:35.470

我提出这个解决方案，划分属性和元素声明，并使用`mixed`元素来允许混合内容。

```
<?xml version="1.0" encoding="UTF-8"?>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
    <start>
        <ref name="anyElement"/>
    </start>
    <define name="anyElement">
        <element>
            <anyName/>
            <ref name="anyAttributes"/>
            <mixed>
                <zeroOrMore>
                    <ref name="anyElement"/>
                </zeroOrMore>
            </mixed>
        </element>
    </define>
    <define name="anyAttributes">
        <zeroOrMore>
            <attribute>
                <anyName/>
            </attribute>
        </zeroOrMore>
    </define>
</grammar> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:03:23.630

好的，我不知道这是否是最好的方法，但我已经从 Relax NG 规范中的“任何”定义中改编了这个。

```
<?xml version="1.0" encoding="UTF-8"?>
<grammar xmlns="http://relaxng.org/ns/structure/1.0"
    xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0"
    datatypeLibrary="http://www.w3.org/2001/XMLSchema-datatypes">
    <start>
        <ref name="Anything"/>
    </start>
    <define name="Anything">
        <zeroOrMore>
            <choice>
                <element>
                    <anyName/>
                    <ref name="Anything"/>
                </element>
                <attribute>
                    <anyName/>
                </attribute>
                <text/>
            </choice>
        </zeroOrMore>
    </define>
</grammar> 
```

# c# - 大规模：更新对象：无法更新标识列

> ID：13424963
> 
> 赞同：1
> 
> 时间：2012-11-16T21:52:55.830
> 
> 标签：c#, dynamic, massive

我有以下情况......

*   海量微ORM
*   .NET 框架 4.0
*   SQL Server 2008R2

模型：

```
public class sUser : DynamicModel
{
    public sUser() : base(Model.strConnection, "Users", "UserId") { }
}

public class Test
    {
        public void UpdateUser(string user)
        {
            dynamic User = GetUser(user);

            //Dynamically generated User object has many columns
            // I Update following fields...
            User.Address1 = "123 Main Street";
            User.Address2 = "Suite# 456";
            User.CityName = "Princeton";
            User.State = "NJ";
            User.Zipcode = "08540";
            //And update some more fields in Users object

           //I could do this...
            //var upd = new { Address1 = "123 Main Street", Address2 = "Suite# 456", ...};
            //User.Update(upd, User.UserID);

            //But would like to pass entire object, so I do not have to form all updated name/value in the update statement
            User.Update(User, User.UserID);

            //But Users table has a column with IDENTITY SEED,
            //And if I pass entire object for update it errors out
            //Cannot update identity column 'RefNo'
        }

        public dynamic GetUser(string userName)
        { 
            dynamic table = new sUser();
            var objUser = table.First(UserName: userName);

            return objUser;
        }
    } 
```

用户表有一个 RefNo 列`IDENTITY SEED=1`，当我更新整个用户对象时，它会出错，无法更新标识列“RefNo”。我想传递整个对象进行更新，而不是形成长更新语句。

我该如何处理？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T09:47:53.313

如果您的 Users 表有一列`RefNo`带有`IDENTITY SEED = 1`，那么这意味着它是您的主键。在您`sUser`的班级中，您正在调用基本构造函数：

```
base(Model.strConnection, "Users", "UserId") 
```

这个调用告诉 Massive 主键列是`UserId`- 如果你改为传递它会发生什么`RefNo`？

**编辑：**

我想我看到了您遇到的问题：Massive 将生成一个更新语句，其中包括您对象的所有属性，包括`RefNo`. 由于数据库正在处理此列（通过`IDENTITY SEED`），因此您无法修改或设置此值。

相反，我建议利用`User`以`ExpandoObject`. 你可以做的是：

```
((IDictionary<string, object>)User).Remove("RefNo");
User.Update(User, User.UserID); 
```

这将做的是`RefNo`从对象中删除属性，这意味着它不会包含在创建的更新语句中，这反过来会导致`Update`调用成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T00:08:47.267

**修改 Massive.cs - 在****DynamicModel**类 下添加以下内容

```
private string IdentityColumn { get; set; }

 private string GetIdentityColumn()
 {
    return (string)Scalar("SELECT C.name AS IdentityColumn FROM sys.columns C Inner Join sys.tables T ON T.object_id = C.object_id WHERE C.is_identity = 1 And T.name = '" + TableName + "'");
 } 
```

并在**CreateUpdateCommand**方法下添加以下...

```
IdentityColumn = GetIdentityColumn(); 
```

并在**foreach**循环下将**if 语句**修改为以下...

```
if (!item.Key.Equals(PrimaryKeyField, StringComparison.OrdinalIgnoreCase) && item.Value != null && item.Key != IdentityColumn) 
```

以上更改为 Massive 库将允许我们使用标识列更新模型。限制：适用于具有一个 IDENTITY 列的表。

# java - 在这种情况下如何避免 instanceof 运算符

> ID：13424974
> 
> 赞同：4
> 
> 时间：2012-11-16T21:53:54.063
> 
> 标签：java, oop, design-patterns, polymorphism

我正在用单元格编写简单的游戏，这些单元格可以处于**免费**和被玩家**采取两种状态。**

```
interface Cell {
    int posX();
    int posY();
}

abstract class BaseCell implements Cell {

    private int x;
    private int y;

    public int posX() {
        return x;
    }

    public int posY() {
        return y;
    }

    ...
}

class FreeCell extends BaseCell {
}

class TakenCell extends BaseCell {
    private Player owningPlayer

    public Player owner() {
        return owningPlayer;
    }

} 
```

在每一轮中，我需要检查所有单元格以使用以下方法计算下一个单元格状态

```
// method in class Cell
public Cell nextState(...) {...} 
```

并收集（在`Set`）所有尚未采取的细胞。上面的方法返回`Cell`是因为单元格可能会从 Free 变为 Taken 或相反。我正在做类似下面的事情来收集它们：

```
for (Cell cell : cells) {
    Cell next = cell.futureState(...);
    if(next instanceof FreeCell) {
        freeCells.add(currentCell);
    }
    ...
} 
```

它很丑。如何做到这一点以避免这种instanceof hacks？我不是在谈论另一个 hack，而是想找到合适的 OOP 解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T22:14:01.503

听起来您正在与[“状态”模式](http://en.wikipedia.org/wiki/State_pattern)调情，但您并不完全在那里。使用状态模式，您将拥有 Cell 对象和“Cell State”类的层次结构。

Cell 对象将使用组合而不是继承。换句话说，一个 Cell 会有一个 current state 属性。当您有一个当前状态属性为 FreeState 对象的单元时，它就是一个空闲单元。当你有一个当前状态属性是 TakenState 对象的 Cell 时，它就是一个自由状态。

> 如何做到这一点以避免这种instanceof hacks？

每当您遇到需要执行 instanceof 的情况时，您都可以向 Cell 类添加一个方法并调用它。Cell 代表当前状态。Cell 中委托给当前状态的代码实际上并不知道该状态是什么。它只是相信国家会做正确的事。在您的 FreeState 和 TakenState 中，您提供了每个方法的实现，这些方法根据它们的状态做正确的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T22:13:28.230

我认为这里的设计问题是你有两个不同的类，它们本质上可能是同一个单元的两种不同状态。

当一个以前空闲的单元被占用时，你现在怎么办？创建一个具有相同坐标的新对象并丢弃旧对象？但从概念上讲，它仍然是同一个单元格！（或者是否可以同时存在具有相同 x 和 y 的空闲单元和占用单元？）

从 OOP 的角度来看，您应该有一个具有“已采用”属性的单元类，或者正如另一个答案所建议的那样，“所有者信息”。如果您觉得无论出于何种原因这不应该成为单元类的一部分，那么如何将所有者信息单独保存在一个`Map<Cell,Owner>`?

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T22:06:43.623

好的，这是您可以采取的另一种方法。

```
 public class Cell {

     private int x;
     private int y;
     private OccupationInfo occupationInfo;

     public int posX() {
         return x;
     }

     public int posY() {
        return y;
     }

     public OccupationInfo getOccupationInfo() {
        return occupationInfo;
     }

     public boolean isFree() {
        return occupationInfo == null;
     }
  } 
```

进而...

```
 public class OccupationInfo {
      private Player owningPlayer;
      // any other data you would've put in `TakenCell`
  } 
```

这可能对您的确切目的有利也可能不利，但它是一个干净简单的设计。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T22:01:22.527

**我认为这是使用Factory Pattern**或**Abstract Factory Pattern**的好地方。

工厂模式返回几个（产品层次结构）子类（如 FreeCell 、 TakenCell 等）的实例，但调用代码不知道实际的实现类。
例如，调用代码调用接口上的方法，`FreeCell`并使用多态性调用正确的 doSomething() 方法。

而不是使用`instanceof`（如切换），您可能只是调用相同的方法，但每个类将根据本地覆盖实现它。这是许多框架中非常强大且常见的功能。

而是写：

```
for (Cell cell : cells) {
Cell next = cell.futureState(...);
if(next instanceof FreeCell) {
    freeCells.add(currentCell);
}
...
} 
```

您可以键入：

```
for (Cell cell : cells) {
Cell next = cell.futureState(...);
 cell.doSomething(); // and no matter what class is FreeCell or TakenCell 
... 
```

}

工厂模式返回几个产品子类之一。您应该使用工厂模式如果您有一个超类和许多子类，并且根据提供的一些数据，您必须返回其中一个子类的对象。

![在此处输入图像描述](../Images/6f70dab1633a72a8697ea4d13d9cdaed.png)

链接：

[抽象工厂模式](http://www.oodesign.com/abstract-factory-pattern.html)

[工厂模式](http://www.oodesign.com/factory-pattern.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-16T22:07:07.560

您可以向 Cell 接口添加方法，该方法将判断单元是否空闲：

```
interface Cell {
    int posX();
    int posY();
    boolean isFree();
}

class FreeCell extends BaseCell {
    public boolean isFree() { return true; }
}

class TakenCell extends BaseCell {
    private Player owningPlayer

    public boolean isFree() { return false; }

    public Player owner() {
        return owningPlayer;
    }
} 
```

但我认为这并不比使用 instanceof 好多少

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-16T22:00:21.017

你可以有两个集合并在它们被占用时将单元格从一个移动到另一个？例如，在开始时，您将拥有`freeSet`完整的单元格和`takenSet`空的单元格。当单元格被占用时，它们会从 freeSet 移动到 takeSet。如果您在 TakenCell 和 FreeCell 之上有一个界面，您可以使用相同的界面键入每个集合。

或者...

`FreeCell`查看您对and的定义会很有帮助，`TakenCell`但我认为您可以将它们建模为具有可空字段的相同对象，该字段被填充以指示它已被采用。然后，您可以对同一类使用两个集合类型。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-16T22:18:46.107

你的代码并不难看，它读起来很好，它清楚地表达了应用程序逻辑。

`instanceof`通常无需担心单个测试。它的使用很常见。“标记接口”由`instanceof`. 您的示例是一种标记界面。

而且`instanceof`速度非常快，显然 JVM 认为值得对其进行很好的优化。

但是，一连串的`instanceof`测试可能是问题的征兆。添加警卫以确保枚举完整。

```
if(o instanceof A)
    ...
else if(o instanceof B)
    ...
else if ...
...
else // huh? o is null or of unknown type
    throw new AssertionError("unexpected type: "+o); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-24T20:35:03.607

你可以使用[访客模式](http://www.oodesign.com/visitor-pattern.html)，这些 FreeCell 和 TakenCell 应该实现

> 可访问的界面

```
interface Visitable {
    void accept(Visitor visitor);
}

interface Visitor {
    void visit(FreeCell freeCell);
    void visit(TakenCell takenCell);
} 
```

在执行Visitor's visit(FreeCell freecCell) 方法时将是：

```
public void visit(FreeCell freeCell) {
    freeCells.add(freeCell);
} 
```

在Visitor的visit(TakenCell takeCell)方法的实现中什么都不会

和两个类：FreeCell 和 TakenCell，在方法 accept(Visitor visitor) 中应该有：

```
public void accept(Visitor visitor) {
    visitor.visit(this);
} 
```

在 for 循环中你应该有：

```
for (Cell cell : cells) {
Cell next = cell.futureState(...);
next.accept( someConcreteVisitor )
...
} 
```

someConcreteVisitor 是访问者的实现者的实例。

这个for循环所在的类也可以是可访问的。

# java - Apache HttpClient 多轮询连接到服务器策略

> ID：13424975
> 
> 赞同：8
> 
> 时间：2012-11-16T21:53:55.500
> 
> 标签：java, apache-httpclient-4.x

我正在为我定期轮询并根据特定响应向其发送消息的服务器设置 Java 客户端。我在课堂上使用的策略如下：

```
public class PollingClient {
    private HttpClient client = getHttpClient(); // I get a DefaultHttpClient this way so it's easier to add connection manager and strategy etc to the client later
    private HttpPost httpPost = getHttpPost(); // same idea, I set headers there

    public String poll () {
        List<NameValuePair> formparams = new ArrayList<NameValuePair>();
        formparams.add(new BasicNameValuePair("id", someId));

        String responseString = null;

        try {
            UrlEncodedFormEntity formEntity = new UrlEncodedFormEntity(formparams, "UTF-8");        
            httppost.setURI(polluri));
            httppost.setEntity(formEntity);
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();

            if (entity != null) {
                responseString = EntityUtils.toString(entity); 
            }

            EntityUtils.consume(entity);

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public void send(String msg) {
        List<NameValuePair> formparams = new ArrayList<NameValuePair>();
        formparams.add(new BasicNameValuePair("msg", msg));
        formparams.add(new BasicNameValuePair("id", someId));

        String responseString = null;

        try {
            UrlEncodedFormEntity formEntity = new UrlEncodedFormEntity(formparams, "UTF-8");

            httppost.setURI(new URI(URL + "send"));
            httppost.setEntity(formEntity);

            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();

            if (entity != null) {
                responseString = EntityUtils.toString(entity); 
            }

            EntityUtils.consume(entity);

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

我启动一个线程，在 3 秒左右进行轮询。我可以根据轮询结果从主线程发送消息。该代码有效，但一直给我以下两个例外，但在两者之间继续工作。

```
java.lang.IllegalStateException: Invalid use of BasicClientConnManager: connection still allocated.
Make sure to release the connection before allocating another one.

org.apache.http.NoHttpResponseException: The target server failed to respond. 
```

我可以忽略异常，但我想知道发生了什么。我无法通过 Google 找到任何解决方案。我尝试过使用内容，`HttpPost`在 send 方法中创建一个新对象，诸如此类的东西，但到目前为止没有任何帮助。

对于这种情况有什么好的策略。我目前`keep-alive`在对象中设置标题`HttpPost`以防万一。除此之外，我不认为有什么我做的。我认为这与整体战略有关。我不想为每个连接创建新对象，但我也不知道推荐的重用级别。谢谢你的帮助。哦.. 这是 HttpClient 4.2.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-08T09:53:14.077

@Saad 的回答非常有帮助，但是我在尝试加载具有许多并发请求的单个 url 时遇到了延迟。

这是解决问题的更新版本。

```
 DefaultHttpClient client = new DefaultHttpClient();
    ClientConnectionManager mgr = client.getConnectionManager();
    HttpParams params = client.getParams();
    int maxConnections = 100;
    params.setParameter(ConnManagerPNames.MAX_CONNECTIONS_PER_ROUTE, new ConnPerRouteBean(maxConnections));
    params.setIntParameter(ConnManagerPNames.MAX_TOTAL_CONNECTIONS, maxConnections);
    ThreadSafeClientConnManager conman = new ThreadSafeClientConnManager(params, mgr.getSchemeRegistry());
    client = new DefaultHttpClient(conman, params); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:28:45.530

我最终使用了下面的代码。它有效......不知道为什么。

```
DefaultHttpClient client = new DefaultHttpClient();
ClientConnectionManager mgr = client.getConnectionManager();
HttpParams params = client.getParams();
client = new DefaultHttpClient(new ThreadSafeClientConnManager(params, mgr.getSchemeRegistry()), params); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T01:13:50.077

这些方法不同步，您从不同的线程调用。当 poll() 操作正在进行时，您的代码是否有可能尝试调用 send()？如果您尝试使用同一个对象同时发出两个请求，我想 HttpClient 不会喜欢它。

（如果这是问题所在，一个简单的解决方法是将 synchronized 关键字添加到这两个方法中，假设您不介意阻塞调用它们的线程。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T04:48:52.763

这可能是矫枉过正，但您可能会考虑有一个专用于 http 连接处理的线程。该线程将一直处于睡眠状态，直到轮询或发出信号发送。这样做的好处是只使用一个连接。

# python - 意外的 HTML 输出

> ID：13424979
> 
> 赞同：2
> 
> 时间：2012-11-16T21:54:18.837
> 
> 标签：python, html, python-2.7

我正在尝试根据下面显示的 xml 文件输入生成 HTML 代码，预期如下所示，在某处我弄乱了逻辑，我得到了不同的输出..有人能指出问题所在吗？

```
Input :-cr_fixes.xml file

<Fixes>
CR  FA  CL  Title
409452  WLAN    656885  Age out RSSI values from buffer 
409452,  12345          To Record HAL and SLM FW Event Logging
</Fixes> 
```

预期输出：-

```
<table cellspacing="1" cellpadding="1" border="1">
<tr>
<th bgcolor="#67B0F9" scope="col">CR</th>
<th bgcolor="#67B0F9" scope="col">FA</th>
<th bgcolor="#67B0F9" scope="col">CL</th>
<th bgcolor="#67B0F9" scope="col">Title</th>
</tr>
<tr>
 <td><a href="http://prism/CR/409452">409452</a></td>
<td>WLAN</td>
<td>656885</td>
<td>Age out RSSI values from buffer </td>
</tr>
<tr>
<td><a href=http://data/409452>409452</a>,<a href=http://data/12345>12345</a></td>
<td></td>
<td></td>
<td>To Record HAL and SLM FW Event Logging</td>
</tr>
</table> 
```

实际输出：-

```
<table cellspacing="1" cellpadding="1" border="1">
<tr>
<th bgcolor="#67B0F9" scope="col">CR</th>
<th bgcolor="#67B0F9" scope="col">FA</th>
<th bgcolor="#67B0F9" scope="col">CL</th>
<th bgcolor="#67B0F9" scope="col">Title</th>
</tr>
<tr>
<td><a href="http://prism/CR/409452">409452</a></td>
<td><a href="http://prism/CR/409452">409452</a></td>
<td><a href="http://prism/CR/409452">409452</a></td>
<td><a href="http://prism/CR/409452">409452</a></td>
<td>WLAN</td>
<td>656885</td>
<td>Age out RSSI values from buffer </td>
</tr>
<tr>
 <td><a href="http://prism/CR/409452,  12345">409452,  12345</a></td>
 <td><a href="http://prism/CR/409452,  12345">409452,  12345</a></td>
 <td><a href="http://prism/CR/409452,  12345">409452,  12345</a></td>
 <td><a href="http://prism/CR/409452,  12345">409452,  12345</a></td>
 <td></td>
 <td></td>
 <td>To Record HAL and SLM FW Event Logging</td>
 </tr>
</table> 
```

蟒蛇代码：-

[http://pastie.org/5390010](http://pastie.org/5390010)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T21:55:14.683

```
TR_TEMPLATE.append('    <td>{}</td>'.format(cols[0]))
TR_TEMPLATE = '\n'.join(TR_TEMPLATE)       #<--converts TR_TEMPLATE to a string 
```

在第二行中，您将`TR_TEMPLATE`列表转换为字符串。在循环的后续迭代中，您尝试`.append`在字符串上使用。您可能希望将第二行移出循环并`join`在最后。

请注意，您的代码中的几个点有同样的错误......

# excel-2007 - 如何通过询问该行的名称从excel中读取特定行的数据？

> ID：13424984
> 
> 赞同：0
> 
> 时间：2012-11-16T21:54:30.083
> 
> 标签：excel-2007

我有以下excel文件：

```
W1000x554   1032    408 52.1    29.5    70700   12300   
W1000x539   1030    407 51.1    28.4    68700   12000   
W1000x483   1020    404 46      25.4    61500   10700   
W1000x443   1012    402 41.9    23.6    56400   9670    
W1000x412   1008    402 40      21.1    52500   9100    
W1000x371   1000    400 36.1    19      47300   8140    
W1000x321   990     400 31      16.5    40900   6960    
W1000x296   982     400 27.1    16.5    37800   6200    
W1000x584   1056    314 64      36.1    74500   12500 
```

我想定义一个函数，它可以向用户询问第一列的名称之一，然后稍后读取该行的所有相关数据。例如，如果用户定义`W1000x412`然后读取：`1008 402 40 21.1 52500 9100`。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:13:25.210

我怀疑@Marc 的意思是像`J2`下面这样的公式（必要时上下复制）将“挑选”出你想要的值。从您的问题中我不清楚这些是否应该分开（如`Row2`示例）或串在一起（CONCATENATE [&] 如`J7`示例，其中这些是空格 [" "] 分隔）：

![SO13424984 示例](../Images/e87a73b2765b056a5f73b7c64100a089.png)

我也不完全确定您的“定义函数”，但假设您不需要 UDF。

我曾经`Row1`为 VLOOKUP 提供偏移量，以保存手动调整每列的公式。

`ColumnI`是预期的用户输入，最好从数据验证列表中进行选择，源为 $A$2:$A$10。

# tridion - 在没有页面的情况下发布 tridion 组件演示文稿

> ID：13424985
> 
> 赞同：6
> 
> 时间：2012-11-16T21:54:45.900
> 
> 标签：tridion

我可以在不将其添加到页面的情况下发布组件演示文稿吗？答案似乎是肯定的。我有一个不在任何页面上的组件。我只发布了那个组件，组件演示最终到达了我的目的地，但是组件在哪里获取模板？它是通过模板中的 LinkedSchema 选项卡获取的吗？我确实将用于组件的架构链接到模板。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T22:05:44.647

你猜对了。如果有一个或多个组件模板，则组件将作为动态组件演示文稿（因此没有页面）发布：

一个。链接到组件所基于的架构

湾。标记为“作为动态组件发布”

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-16T22:09:39.393

Yes, that's right. When you create a component template, you specify the linked schemas which can use this template. Publishing a component with out adding to a page is called dynamic component presentation. In component template general tab, you could specify this as "Published as dynamic component" for the field component presentations based on this template. If you have value as "Publish embedded on a page", your component presentation is static meaning you have to associate this component with page to get it published. Dynamic component presentations makes use of content broker database to query the data and to display it in website. However components embedded on a page would be static and would be served from file system (instead of database). Hope it helps!

# php - 无论超时多低，stream_set_timeout 都不会起作用

> ID：13424989
> 
> 赞同：1
> 
> 时间：2012-11-16T21:54:55.337
> 
> 标签：php, sockets, fsockopen

在 PHP 中，我打开一个流，写入它，然后从中读取。我想在读取流时设置超时，但无论我设置多低（0 微秒、10 微秒），元数据都不会显示“timed_out”！

相关代码：

```
//open the socket
if ( $fp = fsockopen( gethostbyname(host), port, $errno, $errstr, $timeout ) ) {

    //Send command to the host
    if ( fwrite( $fp, $requestCommand ) ) {
        //Set timeout and blocking
        stream_set_blocking( $fp, FALSE );
        stream_set_timeout( $fp, 0, 10 ); 

        //Check for timeout
        $info = stream_get_meta_data( $fp );
        echo $info[ 'timed_out' ];

        //Read and check for timeout
        while ( !$info['timed_out'] && !feof( $fp ) ) {
            $response .= fread( $fp, 4096 );

            //Get meta data (which has timeout info)
            $info = stream_get_meta_data( $fp );
        }
    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:23:48.620

我找到的关键是`stream_set_blocking($fp, TRUE )`.

如果`FALSE`，那么`$status['timed_out']`似乎没有任何实际效果。 `TRUE`[PHP 默认] 有效。

# javascript - 无声的 javascript 错误

> ID：13424993
> 
> 赞同：5
> 
> 时间：2012-11-16T21:55:14.840
> 
> 标签：javascript, mootools, runtime-error

这可能是一个糟糕的问题，但我注意到，当我使用 mootools 编写代码时，当我有一些通过回调、绑定的代码时，如果有错误它不会被 Firebug 或 Chrome 的控制台接收到它只是默默地失败，我不得不使用 try 来追踪错误，这样就不会给你方便的信息，比如失败的代码行。这就像为 IE6 编写代码一样，您所要做的只是一些不透明的消息，例如“无法读取未定义的 'x'”。

我意识到这个问题不够具体，无法问“我该如何避免这种情况”，但其他人是否遇到过这个问题，如果是这样，你如何解决它？我也有点困惑 try/catch 块如何拾取错误，而不是 javascript 控制台。

编辑：

好的，我想出了一些重现错误的方法

说你有一个功能

```
function foo(){
   var x = value.blah;
} 
```

`foo()`如果我像在控制台中正确地得到参考错误一样调用该函数。但是，如果我这样称呼它

```
(function(){
   foo.attempt();
})() 
```

我在控制台中没有错误，但是如果我将 foo 更改为

```
function foo(){
   try{
   var x = value.blah;
   } catch(e){console.log(e)}
} 
```

控制台将记录 e 但当然没有句柄'line：whatever'信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T22:15:09.503

我在处理 JavaScript 中的错误方面拥有丰富的经验。我主要使用 Chrome 来建立我的理解，但其中大部分也适用于 Firefox 和 Internet Explorer。

我可以立即揭穿你关于静默 JavaScript 错误的假设。它们不存在，错误总是出现。Firefox 或 Chrome 的 webdev 中可能存在错误，但错误仍然存​​在。

不出现错误的最常见方法是您自己发现了它们。也许为时过早。

我已经想出了我认为捕获错误的最佳策略：

**1\. 总是扔掉`Error`s 或继承自`Error`s 的东西。**

例如：不是：`throw "Precondition failed"`但是`throw new Error("Precondition failed")`。

这是因为错误在 JavaScript 中很奇怪（我没有别的词）。如果你想要一个堆栈跟踪（天堂是的，你想要一个堆栈跟踪），你需要抛出一个`Error`（而不是字符串）。

**2.不要使用window.onerror**这里不多说。没用的。您无法控制向此函数发送的内容。它可能是您的代码，也可能是访问者使用的损坏插件。此外，没有堆栈跟踪。

**3\. 拥有一个（全局）错误处理程序/何时捕获错误**

JavaScript 是事件驱动的。这会产生一些意想不到的后果。观察以下代码：

```
try {
    setTimeout(function () {
        throw new Error("nope! :D");
    }, 1);
} catch (e) {
    console.log(e);
} 
```

您不会看到此错误。（萤火虫/控制台会捕捉到它）

这是因为内部函数在它自己的事件中运行，而 try-catch 语句不再适用于它。正确的方法是：

```
try {
    setTimeout(function () {
        try {
            throw new Error("nope! :D");
        } catch (e) {
            console.log("Hell yea!", e);
        }
    }, 1);
} catch (e) {
    console.log(e);
} 
```

或者只是制作一个将函数包装在 try-catch 中的函数：

```
function wrap(wrap_dat_func) {
    return function () {
        try {
            wrap_dat_func.apply(wrap_dat_func, arguments);
        } catch (e) {
            // send to error handler
        }
   }
} 
```

像这样使用：

```
setTimeout(wrap(function () {
    // etc
}), 1); 
```

所以基本上**每当你生成一个新事件时，将回调包装**在你的全局 try catch 函数中。所以包装对所有与 DOM 相关的事件（如AJAX 调用）`setTimeout`的调用。`setInterval``onclick` `onload` `ondocumentready``onreadystatechanged`

如何获得正确的堆栈跟踪（通过事件！）是另一个冗长的解释。

# jquery - JQuery 代码适用于 IE 和 Chrome，但不适用于 Firefox

> ID：13424995
> 
> 赞同：0
> 
> 时间：2012-11-16T21:55:23.170
> 
> 标签：jquery, firefox, checkbox

我已经编写了这段代码（我是 jquery 的新手），它拒绝在 chrome 中工作。我首先在 jsfiddle 中对其进行操作，然后将其添加到 js 代码中。

当我使用萤火虫时，我收到以下错误：警告：不推荐使用属性的指定属性。它总是返回 true。源文件：[http ://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js)

它运行正常，直到点击功能。

基本上我想要实现的是在选中其他复选框时禁用某些复选框（选中安全时，启用介绍，单击介绍时启用两个高级）。

所以这是错误的Jquery代码：

```
 $(document).ready(function() {

    $(".safetyARC").click(function() {
    $(".advancedARC1, .advancedARC2, .advancedGAS1, .advancedGAS2, .advancedMIG1,
    .advancedMIG2, .introGAS, .introMIG").attr("disabled", true);
    $("#Notification").text("*You must enrol on the INTRO course before selecting the    
    ADVANCED");
    });

    $(".safetyGAS").click(function() {
    $(".advancedGAS1, .advancedGAS2, .advancedARC1 .advancedARC2, .advancedMIG1,
    .advancedMIG2, .introARC, .introMIG ").attr("disabled", true);
    $("#Notification").text("*You must enrol on the INTRO course before selecting the 
    ADVANCED");
    });

    $(".safetyMIG").click(function() {
    $(".advancedGAS1, .advancedGAS2, .advancedARC1,.advancedARC2, .advancedMIG1,  
    .advancedMIG2, .introARC, .introGAS  ").attr("disabled", true);
    $("#Notification").text("*You must enrol on the INTRO course before selecting the
    ADVANCED");
    });

    $(".introARC").click(function() {
    $(".advancedGAS1, .advancedGAS2, advancedMIG1, .advancedMIG2, .introGAS, 
    .introMIG").attr("disabled", true);
    $("#Notification").text("*Now you may chose from the ADVANCED courses");
    });

    $(".introGAS").click(function() {
    $(".advancedARC1, .advancedARC2, .advancedMIG1, .advancedMIG2, .introARC, 
    .introMIG").attr("disabled", true);
    $("#Notification").text("*Now you may chose from the ADVANCED courses");
    });

    $(".introMIG").click(function() {
    $(".advancedGAS1, .advancedGAS2, .advancedARC1, .advancedARC2, .introGAS, .introARC
    ").attr("disabled", true);
        $("#Notification").text("*Now you may chose from the ADVANCED courses");
    });
    }); 
```

和 HTML：

```
<div id="wrapper">
    <div id="header-wrapper">
        <div id="header" class="container">
            <div id="logo">
                <h1>WeldingCourses</h1>
            </div>

        </div>
        <div id="banner">
            <div class="content">

<div id="white">

<form name="myform" action="enrole.php" method="get" >
<div id="mainForm">

<h3>Have you had any welding experience?</h3>
<input type="radio" name="experience" id="radioYes"value="yes">Yes<br>
<input type="radio" name="experience" id="radioNo" value="no">No

<div id="weldingCourse">

    <div id="section1">
        <h3>Please select a Welding course and a Module?</h3>
        <select id="typeWeld">
         <option>Please Select...</option>
            <option id= "section2" value="1">ARC</option>
            <option id="section3" value="2">GAS</option>
            <option id="section4"value="3">MIG</option>
             <option id="section5"value="4">ANY</option>
        </select>
    </div>

<span id="Notification"></span>

   <div id="div4">     
    <div id="div1">
     <table id="arc">
 <tr class="odd">
 <td>CODE</td>
 <td>TYPE</td>
  <td>LEVEL</td>
 <td>DESCRIPTION</td>
  <td>SELECT</td>
 </tr>
 <tr>
 <td>AS</td>
 <td>ARC</td>
  <td>Safety</td>
 <td>ARC Welding Saftey</td>
   <td><input id="saftey" type="checkbox"  class="safetyARC"></td>

 </tr>
 <tr>
 <td>A1</td>
 <td>ARC</td>
  <td>Intro</td>
 <td>Bead control and simple butt welds in mild steel.</td>
 <td><input type="checkbox"  id="intro" class="introARC" ></td>

 </tr>
 <tr>
 <td>A2</td>
 <td>ARC</td>
  <td>Advanced</td>
 <td>Vertical Welding</td>
  <td><input type="checkbox" class="advancedARC1"></td>
 </tr>
 <tr>
 <td>A3</td>
 <td>ARC</td>
  <td>Advanced</td>
 <td>Specialised Electrodes</td>
  <td><input type="checkbox" class="advancedARC2"></td>
 </tr>
 </table>
    </div>
    <div id="div2">
        <table id="gas">
  <tr class="odd">
 <td>CODE</td>
 <td>TYPE</td>
  <td>LEVEL</td>
 <td>DESCRIPTION</td>
   <td>SELECT</td>
 </tr>
 <tr>
 <td>GS</td>
 <td>GAS</td>
  <td>Safety</td>
 <td>The safe use of oxyacetylene welding equipment</td>
     <td><input id="saftey" type="checkbox" class="safetyGAS"></td>

 </tr>
 <tr>
 <td>G1</td>
 <td>GAS</td>
  <td>Intro</td>
 <td>Bead control and simple butt welds in mild steel.</td>
  <td><input type="checkbox" id="intro" class="introGAS"></td>

 </tr>
 <tr>
 <td>G2</td>
 <td>GAS</td>
  <td>Advanced</td>
 <td>Positional welds and weld testing</td>
  <td><input type="checkbox" class="advancedGAS1"></td>
 </tr>
 <tr>
 <td>G3</td>
 <td>GAS</td>
 <td>Advanced</td>
 <td>Gas welding of aluminium</td>
  <td><input type="checkbox" class="advancedGAS2"></td>
 </tr>

 </table>
    </div>
    <div id="div3">
       <table id="mig">
  <tr  class="odd">
 <td>CODE</td>
 <td>TYPE</td>
  <td>LEVEL</td>
 <td>DESCRIPTION</td>
   <td>SELECT</td>
 </tr>
 <tr>
 <td>MS</td>
 <td>MIG</td>
  <td>Safety</td>
 <td>The safe use of MIG welding equipment</td>
     <td><input id="saftey" type="checkbox" class="safetyMIG" value="safety"></td>

 </tr>
 <tr>
 <td>M1</td>
 <td>MIG</td>
  <td>Intro</td>
 <td>Bead control and simple horizontal welds of mild steel</td>
  <td><input type="checkbox" id="intro" class="introMIG"></td>

 </tr>
 <tr>
 <td>M2</td>
 <td>MIG</td>
  <td>Advanced</td>
 <td>MIG auto-mobile body welding</td>
  <td><input type="checkbox" class="advancedMIG1"></td>
 </tr>
 <td>M3</td>
 <td>MIG</td>
 <td>Advanced</td>
 <td>MIG welding aluminium and stainless steel</td>
  <td><input type="checkbox" class="advancedMIG2"></td>
 </tr>
 </table>
    </div>
    </div>
    </div>

     <input type="submit" value="Submit">
    </form>
            </div>
            </div> 
```

提前感谢任何回答的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:41:30.250

而不是真正使用“禁用”。

$(".advancedGAS1,
.advancedGAS2,.advancedARC1,.advancedARC2,.advancedMIG1,.advancedMIG2,.introARC,.introGAS").attr("disabled", "disabled");

# php - 从数组中获取值

> ID：13424996
> 
> 赞同：1
> 
> 时间：2012-11-16T21:55:30.080
> 
> 标签：php, arrays

如果我有一个像下面这样`ListingCategory`的数组，那么从数组中取出所有项目的最佳方法是什么，以便我可以在 foreach 中的 if 语句中使用它们？

**大批：**

```
Array ( 
    [0] => Array ( 
        [ListingId] => SimpleXMLElement Object ([0] => 532712629) 
        [ListingCategory] => SimpleXMLElement Object ( [0] => 0350-5748-3400- ) 
    ) [1] => 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T22:06:24.120

这将循环遍历所有数组项，以及每个 ListingCategory 中的所有子项。

```
foreach($array as $item)
{
    foreach($item["ListingCategory"]->children() as $val)
    {
        doSomething($val);
    }
} 
```

# sql-server - 使用变更表跟踪

> ID：13424999
> 
> 赞同：0
> 
> 时间：2012-11-16T21:56:02.793
> 
> 标签：sql-server, sql-server-2008

我需要使用 sql server 2008 的更改表跟踪功能。我已在许多表上启用了此功能。现在我必须编写一个同步程序来将此数据传输到另一个位置。我的问题是如何只获取那些数据已更改的表，而不必遍历所有已更改的表列表并检查每个表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-28T22:15:41.980

尝试`sys.CHANGE_TRACKING_TABLES`（[在 MSDN 上](http://msdn.microsoft.com/en-us/library/bb895362.aspx)记录）。

您必须使用`OBJECT_NAME`从第一列获取表名。