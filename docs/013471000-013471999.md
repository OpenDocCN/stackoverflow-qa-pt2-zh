# StackOverflow 问答 13471000-13471999

# c# - 如何在 ASP.net 中启用和禁用 jQuery 中的文本框

> ID：13471007
> 
> 赞同：4
> 
> 时间：2012-11-20T10:16:43.040
> 
> 标签：c#, jquery, asp.net

我有一个文本框，我需要在某些条件下禁用或启用它。

```
var stat = "any interger"
    if (statId != 1) {
     $('#<%=txt1.ClientID %>').attr("disabled", "disabled");
     } 
    else {
    $('#<%=txtBQty.ClientID %>').attr("enabled", "enabled");
     } 
```

这将起作用，但如果条件返回 false 则禁用后也意味着它不会启用文本框。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-20T10:19:09.047

`enabled`不是`textbox`es 的有效属性。因此，以下内容将无效：

```
$('#<%=txtBQty.ClientID %>').attr("enabled", "enabled"); 
```

而是使用

```
$('#<%=txtBQty.ClientID %>').removeAttr("disabled"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-20T10:22:28.493

禁用

```
$('#<%=txt1.ClientID %>').attr("disabled", "disabled"); 
```

启用

```
$('#<%=txt1.ClientID %>').removeAttr("disabled"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T10:19:21.793

要禁用使用：

```
$('#<%=txt1.ClientID %>').attr("disabled", "disabled"); 
```

启用只是清除值

```
$('#<%=txt1.ClientID %>').attr("disabled", ""); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T10:18:44.320

如果它是在最新版本的 jQuery 中，你可以这样做

```
var stat = "any interger";
if (statId != 1) {
     $('#<%=txt1.ClientID %>').prop("disabled", true);
} 
else {
    $('#<%=txtBQty.ClientID %>').prop("disabled", false);
} 
```

如果必须使用`.attr()`，可以禁用 with`$(selector).attr('disabled','disabled')`并启用 with`$(selector).removeAttr('disabled')`

# http - post和get的区别

> ID：13471008
> 
> 赞同：1
> 
> 时间：2012-11-20T10:16:45.130
> 
> 标签：http, https

> **可能重复：**
> [POST 和 GET 有什么区别？](https://stackoverflow.com/questions/3477333/what-is-the-difference-between-post-and-get)

post和get request(http)有什么区别？好吧，发布可能更安全，但 google(searcihig)、yandex(searcihig)、facebook、youtube(searcihig) 和其他人一直在使用 Get。尽管存在安全漏洞，为什么他们一直在使用 Get 请求？

# asp.net - 将端口号传递给响应重定向

> ID：13471010
> 
> 赞同：1
> 
> 时间：2012-11-20T10:16:51.320
> 
> 标签：asp.net, vb.net

我有下一个用于从表单接收元素的代码，但问题是我想使用特定端口来检索 url。但是当我在响应重定向中键入域和端口时

```
Response.Redirect("http://mydomain:8888/MyApplication/default.aspx") 
```

浏览器中的响应是：[http](http://mydomain.com/MyApplication/default.aspx) ://mydomain.com/MyApplication/default.aspx ，没有端口号。那么，有谁知道如何将端口号传递到 url 中？

此致。

```
<script runat="server">

 Private Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs)

     Response.Redirect("MyApplication/default.aspx")

 End Sub
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:30:57.957

The `Response.Redirect` is passing the url from qualification, and they correct the url if its not in the form of `http://server/path`

You can ether disable this qualification using the [`useFullyQualifiedRedirectUrl` property](http://msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection.usefullyqualifiedredirecturl.aspx), ether make a custom redirect.

So ether `UseFullyQualifiedRedirectUrl=false`, as MSDN says, ether just use this function for redirect:

```
public static void CustomRedirect(string url, bool endResponse)
{
    HttpResponse cResponce = HttpContext.Current.Response;

    cResponce.Clear();
    cResponce.TrySkipIisCustomErrors = true;
    cResponce.StatusCode = 302;
    cResponce.Status = "302 Temporarily Moved";
    cResponce.RedirectLocation = url;

    cResponce.Write("<html><head><title>Object moved</title></head><body>\r\n");
    cResponce.Write("<h2>Object moved to <a href=\"" + url + "\">here</a>.</h2>\r\n");
    cResponce.Write("</body></html>\r\n");

    if (endResponse){
        cResponce.End();
    }
} 
```

This function is a cut off version of the Redirect function of asp.net

# php - 在 php 中点击 url 时发送 xml 响应

> ID：13471014
> 
> 赞同：5
> 
> 时间：2012-11-20T10:16:56.093
> 
> 标签：php, xml, response

我想在使用[http://gmail.com/cb/send/send.php?user_name=admin1&password=test123&subscriber_no=1830070547&mask=Peter&sms=](http://gmail.com/cb/send/send.php?user_name=admin1&password=test123&subscriber_no=1830070547&mask=Peter&sms=) 'Test SMS'等参数点击 url 时发送 xml 响应

当一个人点击此链接时，将给出一个回复，如下所示

```
 public function sendResponse($type,$cause) {
    $response = '<?xml version="1.0" encoding="utf-8"?>';
    $response = $response.'<response><status>'.$type.'</status>';
            $response = $response.'<remarks>'.$cause.'</remarks></response>';
            return $response;
 } 
```

我正在从我的控制器文件中调用此方法并仅回显该值。击球手会得到这个回应吗？

```
<?php
......
......
  echo $sendResponse($type,$cause);
 ?> 
```

用户会对此回声产生共鸣吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-20T10:21:53.227

`return`单独不会向客户发送任何内容。如果您正在回显`sendResponse()`then yes 的结果，客户端将收到 XML：

```
echo sendResponse($type,$cause); 
```

请注意，我`$`从 sendResponse 调用中删除了 - 如果您使用 .php，PHP 将假定它是一个变量`$`。

建议添加一个标头来告诉客户端正在发送 XML 和编码，但这对于 XML 的传输不是必需的：

```
header("Content-type: text/xml; charset=utf-8"); 
```

`.`您可以在声明 XML 标头后使用连接字符：

```
 public function sendResponse($type,$cause) {

    $response = '<?xml version="1.0" encoding="utf-8"?>';
    $response .= '<response><status>'.$type.'</status>';

            $response = $response.'<remarks>'.$cause.'</remarks></response>';
            return $response;
 }

 ....
 ....

 header("Content-type: text/xml; charset=utf-8");
 echo sendResponse($type,$cause); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-20T10:19:37.370

您只需要在脚本中指定一些标题，告诉浏览器/客户端正确处理此内容！除此之外，您必须连接而不是重新分配您的 $response var ;)

**在 php 中，这应该可以完成工作：**

```
header("Content-type: text/xml;charset=utf-8"); 
```

# java - 如何使用 apache.commons.net.ftps 配置客户端身份验证？

> ID：13471015
> 
> 赞同：4
> 
> 时间：2012-11-20T10:16:58.837
> 
> 标签：java, ssl, apache-commons-net, ftps, authentication

*我使用apache.commons.net* -framework在 java 中实现了一个 FTPS 客户端（基于 SSL/TLS 的 FTP） 。它被配置为在默认端口 21 上执行显式安全性。

```
ftpsClient = new FTPSClient(false);
ftpsClient.setTrustManager(getConfiguration().getCertificatesManager());
ftpsClient.connect(getConfiguration().getHostName(), getConfiguration().getPort()); 
```

只要我不在服务器上强制执行客户端身份验证，一切正常。但是我需要启用客户端身份验证，因此我在服务器上强制执行它并配置了客户端系统属性：

```
-Djavax.net.ssl.keyStore="D:/.../ftps-client-auth.keystore"
-Djavax.net.ssl.keyStorePassword="*****"
-Djavax.net.ssl.keyStoreType=JKS 
```

我得到的和我没有设置系统属性一样：

```
javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure
    at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:174)
    at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:136)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.recvAlert(SSLSocketImpl.java:1806)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:986)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1170)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1197)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1181)
    at org.apache.commons.net.ftp.FTPSClient.sslNegotiation(FTPSClient.java:265)
    at org.apache.commons.net.ftp.FTPSClient._connectAction_(FTPSClient.java:207)
    at org.apache.commons.net.SocketClient.connect(SocketClient.java:172)
    at org.apache.commons.net.SocketClient.connect(SocketClient.java:192) 
```

服务器日志说：

```
DEBUG: Client "<my ip address>", "SSL_accept failed: error:140890C7:SSL routines:SSL3_GET_CLIENT_CERTIFICATE:peer did not return a certificate" 
```

似乎正确 - 我启用了*-Djavax.net.debug=all*，这表明服务器发送了它接受的 CN 列表，但客户端发送了一个空的证书链。

*   **我做错了什么？**
*   **我需要以编程方式进行一些配置吗？**
*   **证书或私钥是否需要支持 SSL/TLS 的任何特殊内容？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T17:58:59.443

想通了：您需要以编程方式设置一个`KeyManager`. 设置系统属性 ( `-Djavax.net.ssl.keyStore`, ...) 是不够的，因为该框架不使用 Suns `SSLSocketFactory`。

例子：

```
ftpsClient = new FTPSClient(false);
ftpsClient.setTrustManager(TrustManagerUtils.getAcceptAllTrustManager());
KeyManager keyManager = org.apache.commons.net.util.KeyManagerUtils.createClientKeyManager(new File(keystorePath), keystorePass);
ftpsClient.setKeyManager(keyManager);
ftpsClient.connect(getConfiguration().getHostName(), getConfiguration().getPort()); 
```

您可能想要选择不同的信任管理器，例如基于 Java 密钥库的信任管理器。实用程序也为此提供了一种方法：[`TrustManagerUtils.getDefaultTrustManager(keystore)`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/util/TrustManagerUtils.html#getDefaultTrustManager(java.security.KeyStore))

# android - Android GridLayout.Spec

> ID：13471018
> 
> 赞同：3
> 
> 时间：2012-11-20T10:17:01.937
> 
> 标签：android, android-layout, grid-layout

我正在开发一个应用程序并使用[GridLayout.Spec](http://developer.android.com/reference/android/widget/GridLayout.Spec.html)以编程方式设置行和列跨度。但是有一个问题：如果我在使用 API 16 的 AVD 上启动应用程序，一切正常。如果我使用 API 15 在 AVD 或 Handy 上启动它，则行和列跨度不会改变。

GridLayout.Spec 应该从 API 14 开始可用，那么问题出在哪里？

```
FrameLayout container = (FrameLayout) widget.getParent();
GridLayout.LayoutParams params = (android.widget.GridLayout.LayoutParams) container
        .getLayoutParams();
(...)
params.columnSpec = GridLayout.spec(widget.getPosition().x, columnSpan);
params.rowSpec = GridLayout.spec(widget.getPosition().y, rowSpan);
container.setLayoutParams(params); 
```

小部件是我自己的类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T18:15:43.270

有包含 GridLayout 的支持库，也许你可以尝试使用它。

# html - 创建动态文本框在 IE 中不起作用

> ID：13471020
> 
> 赞同：2
> 
> 时间：2012-11-20T10:17:07.717
> 
> 标签：html, dynamic

创建动态文本框在 IE 中不起作用

```
 // Create a new text input
        var newText = document.createElement('input');
        newText.type = "input"; 
```

它适用于所有其他浏览器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:22:31.163

在 setAttribute 方法的帮助下试试这个。

另外请设置正确的类型，如“文本”或“提交”等

```
 var newText = document.createElement('input');
        newText.setAttribute("type", "text"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T10:24:47.020

IE 不会让你“改变”输入元素的类型。您将不得不使用类似的解决方法`document.createElement("<input type=\"text\" name=\"textBox\" >");`

# iphone - UIL标签问题

> ID：13471024
> 
> 赞同：-1
> 
> 时间：2012-11-20T10:17:16.283
> 
> 标签：iphone, objective-c, ios, ios5, storyboard

我`UILabel`在故事板中创建了一个。

我的.h 文件

```
@interface EditAndControll : UIViewController

@property (strong, nonatomic) id detailItem;
@property (strong, nonatomic) IBOutlet UILabel *deviceDetailLabel;

- (void)configureView;
@end 
```

我的.m 文件

```
@implementation EditAndControll
@synthesize detailItem = _detailItem;
@synthesize deviceDetailLabel = _deviceDetailLabel;

- (void)setDetailItem:(id)newDetailItem
{
if (_detailItem != newDetailItem) {
    _detailItem = newDetailItem;

    // Update the view.
    [self configureView];
}
}

- (void)configureView
{

    if (self.detailItem)
{
    DeviceCoreInfo *detailDevice = [DeviceCoreInfo alloc];
    detailDevice = self.detailItem;
    _deviceDetailLabel.text = detailDevice.deviceIP;
    self.deviceDetailLabel.text=detailDevice.deviceIP;
    NSLog(@"Device Label %@",_deviceDetailLabel);
    NSLog(@"self Device LaBel %@", self.deviceDetailLabel);
} 
```

}

NSLog 告诉我：

```
Device Label (null)

self Device LaBel (null) 
```

我从主视图调用的所有内容：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([[segue identifier] isEqualToString:@"showDetail"]) {
    NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
    NSManagedObject *selectedObject = [[self fetchedResultsController]      objectAtIndexPath:indexPath];
    [[segue destinationViewController] setDetailItem:selectedObject];
}
} 
```

我做错了什么？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:30:11.907

Hey Check Form 你在哪里调用这个`- (void)configureView`方法。

您需要将该方法称为

```
- (void)viewDidLoad {
   // configureView method From here.
} 
```

谢谢

# java - 如何使用过滤器来衡量性能？

> ID：13471025
> 
> 赞同：6
> 
> 时间：2012-11-20T10:17:17.197
> 
> 标签：java, servlets, servlet-filters, timing

我想知道是否可以使用过滤器（在我的情况下是 CorsFilter）来测量时间并将所花费的时间放在消息本身上。我知道以下工作正常：

```
public void doFilter(ServletRequest request, ServletResponse response,FilterChain chain) throws IOException, ServletException {
  long startTime = System.nanoTime();
  chain.doFilter(request, response);
  long endTime = System.nanoTime();
  System.out.println("Time: " + (endTime - startTime) );
} 
```

这当然会以秒为单位输出总时间。我想将时间放入返回响应的标头中，以便接收者可以查看标头并查看处理时间。以下代码不起作用：

```
public void doFilter(ServletRequest request, ServletResponse response,FilterChain chain) throws IOException, ServletException {
  long startTime = System.nanoTime();
  if(response instanceof HttpServletResponse) {
    HttpServletResponse httpResp = (HttpServletResponse)response;
    httpResp.addHeader("Start-time", Long.toString(startTime));
  }

  chain.doFilter(request, response);
  long endTime = System.nanoTime();
  if(response instanceof HttpServletResponse) {
    HttpServletResponse httpResp = (HttpServletResponse)response;
    httpResp.addHeader("End-time", Long.toString(endTime));
  }
} 
```

标头仅包括开始时间而不包括结束时间。我假设这是因为消息已经发送，所以修改对象将无效。

有没有人有一个优雅/聪明的解决方案来通过使用过滤器将时间放入标题中？

谢谢，菲尔

**更新**

我研究了使用 HttpServletResponseWrapper 来解决此解决方案。这仍然无法在响应标头上输出 XXX-EndTime 或 YYY-EndTime。

```
@Override
public void doFilter(ServletRequest request, ServletResponse response,FilterChain chain) throws IOException, ServletException {
  long startTime = System.nanoTime();

  if(response instanceof HttpServletResponse) {
    HttpServletResponse httpResp = (HttpServletResponse)response;
    httpResp.addHeader("Access-Control-Allow-Origin", "*");
    httpResp.addHeader("Access-Control-Allow-Methods", "GET, HEAD, OPTIONS");
    httpResp.addHeader("Allow", "GET, HEAD, OPTIONS");
    httpResp.addHeader("Access-Control-Allow-Headers", "*");
    httpResp.addHeader("A-Runtime", Long.toString(startTime));
  }

  OutputStream out = response.getOutputStream();

  GenericResponseWrapper wrapper = new GenericResponseWrapper((HttpServletResponse) response);

  chain.doFilter(request,wrapper);

  out.write(wrapper.getData());

  if(response instanceof HttpServletResponse) {
HttpServletResponse httpResp = (HttpServletResponse)response;
httpResp.addHeader("XXX-EndTime", Long.toString(System.nanoTime() - startTime));

    wrapper.addHeader("YYY-EndTime", Long.toString(System.nanoTime() - startTime));
  }

  out.close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:28:28.453

看看[HttpServletResponseWrapper](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponseWrapper.html)。

* * *

***好的，然后代码：***

此代码缓冲输出（以两种方式），因此在伪输出之后添加标题。实际上 addHeader 可以通过输出来实现，所以我们很*幸运*它可以工作。边界案例代码。如果不走运， addHeader 将不得不被覆盖。

请注意，当我尝试时，我的测试应用程序中只调用了 getOutputStream 。可以选择 getPrintWriter 或 getOutputStream。

```
private static class PostponingResponseWrapper extends HttpServletResponseWrapper {

    private ByteArrayOutputStream bos;
    private ServletOutputStream outputStream;
    private StringWriter sw;
    private PrintWriter printWriter;
    private boolean usingOutputStream;
    private boolean usingWriter;

    public PostponingResponseWrapper (HttpServletResponse response) {
        super(response);
        bos = new ByteArrayOutputStream();
        outputStream = new ServletOutputStream() {
            @Override
            public void write(int b) throws IOException {
                bos.write(b);
            }
        };
        sw = new StringWriter();
        printWriter = new PrintWriter(sw);
    }

    @Override
    public PrintWriter getWriter() throws IOException {
        usingWriter = true;
        LOGGER.info("getWriter usingWriter {}, usingOutputStream {}", usingWriter, usingOutputStream);
        return printWriter;
    }

    @Override
    public void flushBuffer() throws IOException {
        LOGGER.info("flushBuffer");
    }

    @Override
    public ServletOutputStream getOutputStream() throws IOException {
        usingOutputStream = true;
        LOGGER.info("getOutputStream usingWriter {}, usingOutputStream {}", usingWriter, usingOutputStream);
        ServletOutputStream out = new ServletOutputStream() {
            @Override
            public void write(int b) throws IOException {
                outputStream.write(b);
            }
        };
        return out;
    }

    public void finish() throws IOException {
        LOGGER.info("finish");
        if (usingWriter) {
            super.getWriter().print(sw.toString());
        } else if (usingOutputStream) {
            super.getOutputStream().write(bos.toByteArray());
        }
    }
}

public void doFilter(ServletRequest request, ServletResponse response,
        FilterChain chain) throws IOException, ServletException {
    HttpServletResponse httpServletResponse = (HttpServletResponse) response;
    PostponingResponseWrapper responseWrapper =
            new PostponingResponseWrapper (httpServletResponse);
    responseWrapper.addHeader("Before", "Already-Worked");
    chain.doFilter(request, responseWrapper);
    responseWrapper.addHeader("After", "And-Now-This");
    responseWrapper.finish(); // Writes the actual response
} 
```

# actionscript-3 - 如何获取 Flex 对象的（静态）类名？

> ID：13471029
> 
> 赞同：0
> 
> 时间：2012-11-20T10:17:33.217
> 
> 标签：actionscript-3, apache-flex

考虑

```
var s: String = null; 
```

在这种情况下，是否有一个函数接受一个对象，例如`s`并产生静态类型名称（声明对象时使用的名称）`String`？

到目前为止我一直在使用[`getQualifiedClassName()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/package.html#getQualifiedClassName%28%29)，但只是注意到它不适用于`null`值 - 我想知道是否有类似的东西不会尝试确定动态类型而是“静态”类型（以防 Flex 做出这种区分...）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:27:52.007

You cannot get "static" type once you compile your project, because every type at runtime is dynamic, and coercion is widely used to determine which type is this object. Null objects are just that, you cannot get anything out of a null value. So, either assign a kind of default value for such objects you need to be checked for type at runtime, or store a proper type (a variable of type Class) alongside such an object.

# java - Android LinearLayout 空异常

> ID：13471031
> 
> 赞同：0
> 
> 时间：2012-11-20T10:17:38.793
> 
> 标签：java, android, android-layout

我为我的但得到空指针异常创建了一个`id`in 。我不明白发生了什么，因为我没有收到任何语法错误。`XML``LinearLayout`

这是我的`java`代码

```
private OnClickListener onClick() {
       return new OnClickListener() {           
           public void onClick(View v) {
            System.out.println("layout 1");
            newBtnLayout();
            System.out.println("layout 2");
            System.out.println(newBtnLayout());
            nBtnLayoutList = (LinearLayout)findViewById
            (R.id.newBtnLayoutList);
            System.out.println("layout 3");
            nEntriesButton = (Button) findViewById(R.id.newEntriesBtn);
            System.out.println("layout 4");
            System.out.println(nBtnLayoutList);
            nBtnLayoutList.addView(createBtnAddEntries());               
            System.out.println("layout 5");             
          }
      };
  }

private LinearLayout newBtnLayout(){
LinearLayout nBtnLayout = new LinearLayout(this);
final LayoutParams lparams = new LayoutParams
(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
nBtnLayout.setOrientation(LinearLayout.VERTICAL);
nBtnLayout.setLayoutParams(lparams); 
nBtnLayout.setWeightSum(100);
nBtnLayout.setId(R.id.newBtnLayoutList);
    return nBtnLayout;
}

private Button createBtnAddEntries(){
    System.out.println("button 1");
    final LayoutParams lparams = new LayoutParams
    (LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT, 30);
    final Button addEntiresBtn = new Button(this);
    addEntiresBtn.setLayoutParams(lparams);
    addEntiresBtn.setText("Add Entries");
    addEntiresBtn.setId(R.id.newEntriesBtn);        
        return addEntiresBtn;
} 
```

这是`Logcat`输出

```
11-20 10:02:02.295: I/System.out(1077): layout 0    
11-20 10:02:02.305: I/System.out(1077): layout 1    
11-20 10:02:02.305: I/System.out(1077): layout 2    
11-20 10:02:02.305: I/System.out(1077): android.widget.LinearLayout@412376c0    
11-20 10:02:02.315: I/System.out(1077): layout 3    
11-20 10:02:02.346: I/System.out(1077): layout 4    
11-20 10:02:02.346: I/System.out(1077): null    
11-20 10:02:02.346: I/System.out(1077): button 1    
11-20 10:02:02.356: I/System.out(1077): button 2    
11-20 10:02:02.356: I/System.out(1077): button 3    
11-20 10:02:02.365: I/System.out(1077): button 4    
11-20 10:02:02.365: I/System.out(1077): button 5    
11-20 10:02:02.365: I/System.out(1077): button 6    
11-20 10:02:02.365: D/AndroidRuntime(1077): Shutting down VM    
11-20 10:02:02.365: W/dalvikvm(1077): threadid=1: thread exiting with uncaught exception (group=0x40a13300)    
11-20 10:02:02.375: E/AndroidRuntime(1077): FATAL EXCEPTION: main    
11-20 10:02:02.375: E/AndroidRuntime(1077): java.lang.NullPointerException    
11-20 10:02:02.375: E/AndroidRuntime(1077):     at com.daryl.jcu_project1_creditscoreform.Credit_score_form$1.onClick(Credit_score_form.java:66)    
11-20 10:02:02.375: E/AndroidRuntime(1077):     at android.view.View.performClick(View.java:4084)    
11-20 10:02:02.375: E/AndroidRuntime(1077):     at android.view.View$PerformClick.run(View.java:16966)    
11-20 10:02:02.375: E/AndroidRuntime(1077):     at android.os.Handler.handleCallback(Handler.java:615)    
11-20 10:02:02.375: E/AndroidRuntime(1077):     at android.os.Handler.dispatchMessage(Handler.java:92)    
11-20 10:02:02.375: E/AndroidRuntime(1077):     at android.os.Looper.loop(Looper.java:137)    
11-20 10:02:02.375: E/AndroidRuntime(1077):     at android.app.ActivityThread.main(ActivityThread.java:4745)    
11-20 10:02:02.375: E/AndroidRuntime(1077):     at java.lang.reflect.Method.invokeNative(Native Method)    
11-20 10:02:02.375: E/AndroidRuntime(1077):     at java.lang.reflect.Method.invoke(Method.java:511)    
11-20 10:02:02.375: E/AndroidRuntime(1077):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)    
11-20 10:02:02.375: E/AndroidRuntime(1077):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)    
11-20 10:02:02.375: E/AndroidRuntime(1077):     at dalvik.system.NativeStart.main(Native Method)    
11-20 10:07:02.445: I/Process(1077): Sending signal. PID: 1077 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:39:52.600

明显的 NullPointerException。请检查您是否`activity_credit_score_from.xml`实际包含具有该 ID 的布局。如果一切正常，请清理您的项目（Project => Clean）。Eclipse 是一个糟糕的 IDE，并且喜欢受苦的开发人员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T10:50:01.030

activity_credit_score_from.xml 中没有@id

这是我在 IDs.xml 中创建的

```
 <?xml version="1.0" encoding="utf-8"?>
<resources>

        <item
            name="newBtnLayoutList"
            type="id"/>
        <item
            name="newEntriesBtn"
            type="id"/>
    </resources> 
```

# java - 根据搜索文本显示多行 jtable

> ID：13471034
> 
> 赞同：0
> 
> 时间：2012-11-20T10:17:44.680
> 
> 标签：java, swing, jtable

1.  我有一张员工考勤记录表，例如：
2.  列标题将是一个月的日期，从 1/11,2/11,3/11 到 30/11
3.  第 0 行 --> 员工姓名 - 员工 ID
4.  第 1 行 --> 开始时间
5.  第 2 行 --> 结束时间
6.  第 3 行 --> 闯入
7.  第 4 行 --> 突破
8.  第 5 行 --> 员工姓名 - 员工 ID
    ...

9.  如果我在搜索框中输入员工姓名，员工姓名所在的行

10.  出现在上面的情况下它是第 0 行。但我需要显示四个连续的
11.  行也是该员工的详细信息。

12.  我们有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:47:04.983

如果我理解正确的话。如果您搜索具有员工姓名（例如）的员工，则显示与该员工相关的行必须发生。

AFAIK 只有在它们之间保持某种链接时才能显示这些行。因为表行中的每个 Employee 数据只是与其他行一样的一行。`Employee class`因此，使用属性创建一个，当用户使用 查询时`EmpName`，检索该员工的所有详细信息。

但就设计而言，我认为您应该更喜欢为每个员工提供每一行，而不是在一行中给出所有员工姓名或在一行中给出所有开始时间。因为在不知道它们究竟代表什么的情况下查看细节会令人困惑。

这只是我的理解和建议。如果我错了，请纠正我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T18:56:04.913

以下是如何进行的概述：

*   创建和`JTable`的两个实例。`employee``detail`

*   让它`employee`用作`SINGLE_SELECTION`它的[`ListSelectionModel`](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#selection)via `setSelectionMode()`。

*   让`TableModel`of`detail`包含`ListSelectionListener`从 接收事件的a `employee`，如相关[示例](https://stackoverflow.com/a/12306104/230513)所示。

*   要在中显示所选`employee`数据`detail`，可以扩展和。`TableModel``detail``AbstractTableModel``fireTableDataChanged()`

例如，

```
employee.getSelectionModel().addListSelectionListener(
        new ListSelectionListener() {

    @Override
    public void valueChanged(ListSelectionEvent e) {
        if (!e.getValueIsAdjusting()) {
            // update the detail table model based on the selected employee
            fireTableDataChanged();
        }
    }
}); 
```

# html - 隐藏一个 div 并显示另一个 div onclick

> ID：13471035
> 
> 赞同：0
> 
> 时间：2012-11-20T10:17:47.253
> 
> 标签：html, hide

我有两个 div，其中 DIV 1 默认可见，如果任何用户点击“点击我”链接，DIV 1 应该隐藏，DIV 2 应该可见，之后我不想在任何上显示 DIV 1点击。DIV 1 应该永久隐藏，直到页面刷新。

我处理了一个代码，但我无法永久隐藏 DIV 1。

请查看此代码。

```
<script>
function showDivs(start)
{
 var div;
 while((div = document.getElementById('div' + start)) !== false)
 {
  div.style.display = (div.style.display == 'none') ? '' : 'none';
  start ++;
 }
}
</script> 
<div class="expressBox"><div class="expressBtn"><a href="javascript:;" onclick="showDivs(1);" id="displayText">Click ME</a></div>
              <div class="txtStyle expressTxt" id="div1">Use saved addresses and payment options to expendite your purchase.</div>
              <div id="div2" style="display:none">
                <div class="existUserBox">
                  <div class="userHD"><strong>New User</strong></div>

                    <form name="ZB_ZipForm" action="$field{site_url_secure}/expresscheckout/index.html" method="post">
                    <div class="txtShipping">
                      <input type="text" size="13" maxlength="10" name="txt_zip" id="zipcode" placeholder="Zip Code" class="inputSpace" value="" />
                     <div class="clr"></div>
                      Required for Express Checkout</div>
                      <div class="btnSubmit">
                        <input type="image" name="btn_ExpressZip" src="$field{path_images}/global/btn-express-submit.png" />
                      </div>
                    </form>

                </div>
                <div class="orDivider"><span>or</span></div>
                <div class="existUserBox">
                  <form name="ZB_LoginForm" action="$field{site_url_secure}/expresscheckout/login.html" method="post">
                    <div class="userHD"><strong>Existing User</strong></div>
                    <div class="txtShipping">
                      <input type="text" name="username" size="20" id="username"  placeholder="User Name" value="" class="inputSpace userSpace" />
                    </div>
                    <div class="txtShipping">
                      <input type="password" name="password" id="password"  placeholder="Password" size="20" class="inputSpace userSpace nomargBott" />
                    </div>
                    <div class="reqExpChk"><a class="smallcolor" href="$field{site_url}/reminder/index.html" onMouseOver="status='Click for password help.'; return true;" onMouseOut="status=''; return true;">Forgot Password ?</a></div>
                    <div class="btnSubmit">
                      <input type="image" name="btn_Login" src="$field{path_images}/global/btn-express-submit.png" />
                    </div>
                  </form>
                </div>
              </div>
              </div> 
```

我试图找到这种解决方案，但没有得到任何解决方案。请帮我。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:42:58.490

**案例1：** 如果你只处理两个div，你可以直接进行更改，而不是使用循环 `document.getElementById('div1).style.display = 'none';
document.getElementById('div2).style.display = 'block';`

**案例 2：** 如果您正在处理多个 div，您可以从文档中删除 div 元素
`var div = document.getElementById('div1'); div.parentNode.removeChild(div);`

**案例 3：** 如果您正在处理多个 div 并且您不想永久删除元素，那么 `Use an array to store the id of div elements which are previously made invisible. Use the array everytime to make sure that divs in the array are not made visible again`

# java - AtomicInteger 不当行为

> ID：13471036
> 
> 赞同：0
> 
> 时间：2012-11-20T10:17:51.607
> 
> 标签：java, multithreading, atomic

我有一个练习：给定一个 AtomicIntegers 矩阵（初始化为 0），我必须为每行运行一个线程，为每列运行一个线程，在我减去 1 的行上，在我加 1 的列上，所以在结束矩阵应该保持原样。问题是矩阵改变了！下面是代码：对象接受矩阵，一个布尔值，告诉他对列或行进行操作，以及它必须操作的列/行的索引。

```
import java.util.concurrent.atomic.AtomicInteger;

public class FifthExerciseSafe implements Runnable{
    private Thread thread;
    private boolean onRows;//tells if the object operates on the rows or on the columns
    private AtomicInteger[][] matrix;
    private int index;

public FifthExerciseSafe(AtomicInteger[][] matrix, boolean onRows, int index){
    this.matrix = matrix;
    this.onRows = onRows;
    this.index = index;
}

public void start(){
    thread = new Thread(this);
    thread.start();
}

public boolean isOnRows() {
    return onRows;
}

public void setOnRows(boolean onRows) {
    this.onRows = onRows;
}

public AtomicInteger[][] getMatrix() {
    return matrix;
}

public void setMatrix(AtomicInteger[][] matrix) {
    this.matrix = matrix;
}

@Override
public void run() {
    if (this.onRows){
        for(int i = 0; i < matrix[index].length; i++){
            matrix[index][i].decrementAndGet();
        }
    } else {            
        for(int i = 0; i < matrix.length; i++){
            matrix[i][index].incrementAndGet();
        }
    }
}//run

public static void main(String args[]){
    AtomicInteger[][] m = new AtomicInteger[3][3];
    for (int i = 0; i < m.length; i++){
        for(int j = 0; j < m.length; j++){
            m[i][j]= new AtomicInteger(0);
        }
    }

    for(int i = 0; i < 3; i++){//I create 6 objects, 3 for columns and 3 for rows
        FifthExerciseSafe fes1 = new FifthExerciseSafe(m, true, i);
        FifthExerciseSafe fes2 = new FifthExerciseSafe(m, false, i);
        fes1.start();
        fes2.start();
    }
    for(int i = 0; i < m.length; i++){
        for(int j = 0; j < m.length; j++){
            System.out.print(m[i][j]+" ");
        }
    }
}//main
} 
```

输出应该是：000000 但有时是：-100-100-1-10

它只发生在带有 Intel Atom 的上网本上，在带有 Core Duo 的台式机上我还没有看到它，但我想知道它是否也会发生在那里。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T10:20:15.120

You have started the threads, but you never wait for them to finish before going on to print out the matrix. You need to use `Thread.join` for each started thread, which will block until the thread is done. Only then will it be safe to print out the results. For example, introduce an `ArrayList` into which you `add` all the instances of `Thread` you start, and then have a separate `for` loop that invokes `join` on each instance.

# xsd - 记录 XSD。有什么想法吗？

> ID：13471042
> 
> 赞同：0
> 
> 时间：2012-11-20T10:18:15.360
> 
> 标签：xsd

在我们使用 xsd 验证我们的 xml 模式的项目中工作。

老板希望每个领域都记录在案/有描述​​，不用说他不想在工具上花任何钱。

在我重新发明轮子之前，是否有任何免费工具可以从 xsd 生成和编辑文档。

我做了谷歌，但他们似乎都是付费的，而免费的似乎并没有做我所追求的

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T14:06:27.590

放弃，只是要手动向模式添加注释。任何试用版都不好，因为它需要不断升级

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T14:19:42.630

您应该使用[xsd:annotation](http://msdn.microsoft.com/en-us/library/ms256102.aspx)在字段级别记录架构。几乎所有主要的 XML IDE 都可以在上下文中显示此文档（即，当专注于特定元素或属性时），还可以为您的整个架构生成您想要的任何格式的文档（pdf、html 等）。

# java - 安卓： 标签

> ID：13471047
> 
> 赞同：4
> 
> 时间：2012-11-20T10:18:36.053
> 
> 标签：java, android, android-manifest, google-play

我希望我的应用程序适用于所有平板电脑，例如从三星 Galaxy TAb 7 英寸到任何其他平板电脑尺寸。

当我在 google play 上发布我的应用程序时，它出现在 HTC Sensation XE 和三星 Galaxy S3 等相同的手机上！，这是我在清单中的标签：

```
<supports-screens
    android:largeScreens="true"
    android:normalScreens="false"
    android:requiresSmallestWidthDp="600"
    android:smallScreens="false"
    android:xlargeScreens="true" /> 
```

我想我不完全理解每个子标签对应的大小是什么。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:41:19.760

我的猜测是这些设备被认为是大屏幕，如此处所述：http: [//developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)

看看这里配置：http: [//developer.android.com/guide/topics/manifest/supports-screens-element.html](http://developer.android.com/guide/topics/manifest/supports-screens-element.html)

我会尝试将 largeScreen 设置为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:38:39.440

如果您打算支持 Galaxy Tab 7（带有 Gingerbread 的原始版本），我想说可能无法仅支持 Gingerbread 下的平板电脑。因为姜饼没有区分平板电脑和手机。

只有 Honeycomb 才能用最小的 Width dp 来分辨宽度的不同。

所以，我认为这个答案可能会对您有所帮助：

[设计一个仅限安卓平板电脑的应用程序](https://stackoverflow.com/questions/10540646/designing-an-android-tablet-only-app/10540882#10540882)

基本上，您需要添加 min SDK 标签以仅限制 Honeycomb（仅限平板电脑，没有使用蜂窝的手机），并且可以下载您的应用程序

# c++ - Xcode - 如何控制 Macbook 的 USB 端口的电源？

> ID：13471048
> 
> 赞同：0
> 
> 时间：2012-11-20T10:18:38.113
> 
> 标签：c++, objective-c, c, macos, usb

我有一个 USB LED 灯，我想打开和关闭它。当我将 LED 连接到 macbook 的 USB 端口时，它会打开，但 IO Registry Explorer 无法检测到 LED 灯。

所以我想直接控制USB端口的电源。控制（关闭/打开）Mac 上 USB 端口电源的最简单方法是什么？我更喜欢使用 C 或 Objective-C。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T10:53:29.357

说真的，[去读 USB](http://en.wikipedia.org/wiki/Universal_Serial_Bus)。它不是一个可以从用户空间逐个引脚控制的“哑端口”，它是一个共享总线。

您需要更多硬件来实现实际的 USB 设备。也许看看 Arduino，或者任何更专注的“I/O over USB”解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:50:48.193

作为@unwind，您应该首先研究有关 USB 的知识，并且正如他所写的那样，USB 是多个外围设备共享的总线，因此为了与正确的总线（在您的情况下是 LED 设备）进行通信，您需要正确识别它。该设备将提供一些信息，如 PID、VID、序列号和其他信息，以及您的计算机将如何知道与谁说话的方式。因此，USB从设备本身必须具有某种形式的智能，而不仅仅是一个哑设备。换句话说，它不只是切断 USB 集线器的电源，您可以连接多个不同的设备，您必须选择合适的设备。

您需要一个带有 USB 堆栈的微控制器，它应该与计算机通信，然后打开或关闭 LED。一个好的起点当然可以是 Arduino，或者我会推荐来自 Atmel 的不同芯片：http: [//www.atmel.com/products/microcontrollers/8051architecture/usb_mcus.aspx](http://www.atmel.com/products/microcontrollers/8051architecture/usb_mcus.aspx)他们有很多例子，包括 LED 的。当然你可以找到很多其他的 USB 芯片。

# mysql - 使用设备开/关状态更改创建时间线

> ID：13471050
> 
> 赞同：1
> 
> 时间：2012-11-20T10:18:44.647
> 
> 标签：mysql, excel, timeline

我有一张表格，其中包含设备开启和关闭的日期/时间列表。这是举行的：

```
date-time   |  equipment id  | state (1 or 0) 
```

我正在尝试创建一个时间线，以显示设备何时运行的时间线或条形图，当它打开时，什么都没有。我没有使用 SQL 的经验，所以我不知道如何处理这个问题。我可以尝试使用下一次状态更改的开始来创建结束日期/时间，但我不确定这在 MySQL 中是否可行。我曾尝试仅使用查询列表在 excel 中执行此操作，但它仅绘制为单个日期/时间点。我想我需要某种持续时间。我不知道如何进行。任何建议或指示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T19:31:37.873

```
CREATE TABLE `status` (
  `id` int(11) DEFAULT NULL,
  `date` datetime DEFAULT NULL,
  `state` int(11) DEFAULT NULL
)

set @last_date = NULL;
select @last_date as start_date,
  date as end_date,
  case when state = 1 then @last_date := date end as ignore_me,
  case when state = 0 then (unix_timestamp(date) - unix_timestamp(@last_date)) / 60 end as duration
from status
where id = 1
order by date 
```

给你这样的输出：

```
+---------------------+---------------------+---------------------+----------+
| start_date          | end_date            | ignore_me           | duration |
+---------------------+---------------------+---------------------+----------+
| 2012-11-20 01:16:00 | 2012-11-20 01:00:00 | 2012-11-20 01:00:00 |     NULL |
| 2012-11-20 01:00:00 | 2012-11-20 01:15:00 | NULL                |  15.0000 |
| 2012-11-20 01:00:00 | 2012-11-20 01:16:00 | 2012-11-20 01:16:00 |     NULL |
| 2012-11-20 01:16:00 | 2012-11-20 01:20:00 | NULL                |   4.0000 |
+---------------------+---------------------+---------------------+----------+ 
```

只取具有持续时间的行来表现出色：

```
select * from (
  ...
) foo
where duration is not null

+---------------------+---------------------+-----------+----------+
| start_date          | end_date            | ignore_me | duration |
+---------------------+---------------------+-----------+----------+
| 2012-11-20 01:00:00 | 2012-11-20 01:15:00 | NULL      |  15.0000 |
| 2012-11-20 01:16:00 | 2012-11-20 01:20:00 | NULL      |   4.0000 |
+---------------------+---------------------+-----------+----------+ 
```

# linux - Shell 脚本中的多处理 (BASH)

> ID：13471056
> 
> 赞同：0
> 
> 时间：2012-11-20T10:18:59.990
> 
> 标签：linux, multithreading, bash, shell, multiprocessing

我已经编写了一个脚本，我想要做的是通过使用子处理或后台处理或我需要使用什么来加速计算，让它尽可能快地运行。

所以我正在考虑在我的脚本中使用 & 符号来尽可能地加快处理速度，但是当我把它放在这里时，我没有得到结果。

这是我编写并正在尝试改进 apon 的功能。

```
InTri(){
    while read line
    do
        V1X=$(echo "$line" | awk '{print $1}') &
        V1Z=$(echo "$line" | awk '{print $2}') &
        V2X=$(echo "$line" | awk '{print $3}') &
        V2Z=$(echo "$line" | awk '{print $4}') &
        V3X=$(echo "$line" | awk '{print $5}') &
        V3Z=$(echo "$line" | awk '{print $6}') &
        run=$(echo "$line" | awk '{print $7}') &
        wait
        echo "$V1X $V1Z $V2X $V2Z $V3X $V3Z $run"
    done < <(mysql -u root -ppassword LightCycle -N -e "SELECT V1X, V1Z, V2X, V2Z, V3X, V3Z, ID FROM Temp3 WHERE (V1X <= $x OR V2X <= $x OR V3X <= $x) AND (V1X >= $x OR V2X >= $x OR V3X >= $x) AND (V1Z <= $z OR V2Z <= $z OR V3Z <= $z) AND (V1Z >= $z OR V2Z >= $z OR V3Z >= $z);")
} 
```

我已经阅读了“man bash”（或者我能理解的内容），但我不明白为什么这不起作用。

帮助！:)

感谢任何可以的人，非常感谢您的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:27:15.550

无论`&`在线上发生什么都发生在子进程中，它不能修改父进程的环境。您可能需要打开管道并在父进程中读取它们。对于与您的示例具有可比执行成本的任务，不值得付出努力。

在这个例子中，你可以做

```
cat <(echo "$line" | awk '{print $1}') <(echo "$line" | awk '{print $1}') ... 
```

而不是整个循环体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T10:33:30.937

如果您觉得由于这 7 个 awk 命令而使您的程序变慢，您可以在没有任何 awk 的情况下执行以下操作：

```
$ line="1 2 3 4 5 6 7"
$ a=($line)
$ echo ${a[0]}
1
$ echo ${a[1]}
2
$ echo ${a[@]}
1 2 3 4 5 6 7 
```

其中“a”是一个数组，其中包含行变量的所有元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T10:52:28.530

您可能认为创建更多进程会使其更快，但实际上可能会因为创建新进程和所有管道的开销而使其变慢。

为什么不简单地执行以下操作？

```
mysql -u root -ppassword LightCycle -N -e "SELECT V1X, V1Z, V2X, V2Z, V3X, V3Z, ID FROM Temp3 WHERE (V1X <= $x OR V2X <= $x OR V3X <= $x) AND (V1X >= $x OR V2X >= $x OR V3X >= $x) AND (V1Z <= $z OR V2Z <= $z OR V3Z <= $z) AND (V1Z >= $z OR V2Z >= $z OR V3Z >= $z);" | awk '{print $1" "$2" "$3" "$4" "$5" "$6" "$7}' 
```

或者，如果您想将它们读入变量：

```
while read V1X V1Z V2X V2Z V3X V3Z run
do
  echo "$V1X $V1Z $V2X $V2Z $V3X $V3Z $run"
done < <(mysql -u root -ppassword LightCycle -N -e "SELECT V1X, V1Z, V2X, V2Z, V3X, V3Z, ID FROM Temp3 WHERE (V1X <= $x OR V2X <= $x OR V3X <= $x) AND (V1X >= $x OR V2X >= $x OR V3X >= $x) AND (V1Z <= $z OR V2Z <= $z OR V3Z <= $z) AND (V1Z >= $z OR V2Z >= $z OR V3Z >= $z);") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T11:15:02.200

In order to get the script above working as it should, I just needed to remove the & before the "wait"

```
InTri(){
    while read line
    do
        V1X=$(echo "$line" | awk '{print $1}') &
        V1Z=$(echo "$line" | awk '{print $2}') &
        V2X=$(echo "$line" | awk '{print $3}') &
        V2Z=$(echo "$line" | awk '{print $4}') &
        V3X=$(echo "$line" | awk '{print $5}') &
        V3Z=$(echo "$line" | awk '{print $6}') &
        run=$(echo "$line" | awk '{print $7}') 
        wait
        echo "$V1X $V1Z $V2X $V2Z $V3X $V3Z $run"
    done < <(mysql -u root -ppassword LightCycle -N -e "SELECT V1X, V1Z, V2X, V2Z, V3X, V3Z, ID FROM Temp3 WHERE (V1X <= $x OR V2X <= $x OR V3X <= $x) AND (V1X >= $x OR V2X >= $x OR V3X >= $x) AND (V1Z <= $z OR V2Z <= $z OR V3Z <= $z) AND (V1Z >= $z OR V2Z >= $z OR V3Z >= $z);")
} 
```

# java - 如何将 security.krb5.EncryptionKey 对象存储到密钥库或将其转换为 SecretKey 对象？

> ID：13471058
> 
> 赞同：0
> 
> 时间：2012-11-20T10:19:07.190
> 
> 标签：java, security, kerberos, keystore

我正在使用本指南[http://thejavamonkey.blogspot.com/2008/05/how-to-decrypt-kerberos-gss-ap-req.html](http://thejavamonkey.blogspot.com/2008/05/how-to-decrypt-kerberos-gss-ap-req.html)从 Kerberos 票证中提取密钥。

现在我想将获得的密钥存储到密钥库或另一个安全等效项中，问题是我得到的 Key 对象是 security.krb5.EncryptionKey 类型，并且密钥库只接受 SecretKey 对象。我不拘泥于如何存储密钥或将其转换为更常见的格式如果有人对此有任何想法，我将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:34:17.217

重读了几遍代码，发现key原来是SecretKey对象格式，后来博主改成EncryptionKey，我就通过了，得到了我需要的信息

# android - 安卓用户界面

> ID：13471061
> 
> 赞同：-1
> 
> 时间：2012-11-20T10:19:12.713
> 
> 标签：android, dialog

![在此处输入图像描述](../Images/4b8cbf6c1733cf205fc7320094b73416.png)

嗨朋友，我想要像图像中一样的警报对话框（只有文本而不是单选按钮），但我不想要单选按钮，我只需要文本，我该怎么做，请建议我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:22:48.117

```
 final CharSequence[] items = {"One", "Two", "Three"};

    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("Title");
    builder.setItems(items, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int item) {
             // Do something with the selection
        }
    });
    builder.setPositiveButton("Ok",new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog,int id) {
            // Do something when ok pressed
        }
    });
    builder.setNegativeButton("Cancel",new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog,int id) {
            // Do something when cancel pressed
        }
    });
    AlertDialog alert = builder.create();
    alert.show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T10:31:26.707

试试这个代码

```
final CharSequence[] version = {"Jelly Bean", "IceCream Sandwich", "Honey Comb", "Ginger Bread"};
AlertDialog.Builder ad = new AlertDialog.Builder(this);
ad.setTitle("Choose your version");
ad.setMessage("You can set messag here");
ad.setItems(version, new DialogInterface.OnClickListener() 
{
public void onClick(DialogInterface dialoginterface, int intVersion) 
{

}
ad.setPositiveButton("OK", new OnClickListener() 
{
public void onClick(DialogInterface dialoginterface, int arg1)          
{

}
}
ad.setNegativeButton("Cancel", new OnClickListener() 
{
public void onClick(DialogInterface dialoginterface, int arg1) 
{
}
});
ad.setCancelable(false);
ad.show(); 
```

# java - 如何本地化自定义的 JFileChooser？

> ID：13471063
> 
> 赞同：1
> 
> 时间：2012-11-20T10:19:20.810
> 
> 标签：java, swing, localization, jfilechooser

我创建了扩展 JFileChooser 的 MyFileChooser。所以我想本地化它的 UI。[此代码](http://www.java2s.com/Code/Java/Swing-JFC/LocalizeaJFileChooser.htm)不起作用 - 所有标签仍为英文。我试图以这种方式做到这一点： `UIManager.put("MyFileChooser.lookInLabelText", rb.getString("lookInLabelText"));` 但它没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:07:19.573

您需要在创建 JFileChooser 之前设置这些属性（例如，在 MyFileChooser 构造函数中进行设置为时已晚，因为此时已经调用了超级构造函数）。

在设置属性后，您可以通过在文件选择器上调用 updateUI() 来解决（尚未测试）。

# ruby - 有没有一种简单的方法可以在 Ruby 中组合两个 JSON 文件或拆分一个 JSON？

> ID：13471066
> 
> 赞同：1
> 
> 时间：2012-11-20T10:19:29.693
> 
> 标签：ruby

我的问题的第一部分是，如果我有两个 JSON 文件（file_a.json、file_b.json），其中的记录按日期排序。我怎样才能轻松地将两者结合起来？

文件_a.json：

```
[

    {
        "Date": "2012-11-19",
        "Open": 8.27,
        "High": 8.35,
        "Low": 8.21,
        "Close": 8.34,
        "Volume": 14606500,
        "Adj Close": 8.34
    },
    {
        "Date": "2012-11-15",
        "Open": 8.11,
        "High": 8.19,
        "Low": 8.02,
        "Close": 8.05,
        "Volume": 14798900,
        "Adj Close": 8.05
    }
] 
```

文件_b.json：

```
[
    {
        "Date": "2012-11-14",
        "Open": 8.33,
        "High": 8.36,
        "Low": 8.1,
        "Close": 8.13,
        "Volume": 14175500,
        "Adj Close": 8.13
    },
    {
        "Date": "2012-11-13",
        "Open": 8.36,
        "High": 8.44,
        "Low": 8.3,
        "Close": 8.31,
        "Volume": 11103900,
        "Adj Close": 8.31
    }
] 
```

我考虑过阅读第一个 JSON，收集所有字段，然后尝试将它们写入第二个 JSON（类似于我在下面开始的内容），但是有没有更好/更简单的方法来简单地加入两个按日期排序的 JSON，假设第二个从第一个停止的地方开始？

```
json = File.read("file_a.json")
quotes = JSON.parse(json)
$close = quotes.collect {|quote| quote['Adj Close']} 
```

其次，如果我确实有一个 JSON（与上述相同的键） - master.json 并且想在某个指定日期拆分它，有没有一种简单的方法可以做到这一点？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:52:24.377

您可以读取这两个文件并将它们合并：

```
master = %w[a b].map { |f| JSON.parse File.read("file_#{f}.json") }.flatten 
```

`master`现在将包含来自两个文件的数据。

按某个日期将其拆分：

```
require 'date'

start_date = Date.parse("2012-11-15") - 365
master_updated = master.select {|h| Date.parse(h["Date"]) >= start_date } 
```

`master_updated`将仅包含日期 >= 2011-11-15 的项目

要将其转换回 json 使用`master.to_json`

## [这](http://cibox.org/slivu/stackoverflow?path=is-there-an-easy-way-of-combining-two-json-files-or-splitting-one-json-in-ruby&lang=ruby&file=app.rb&run=true#)是一个现场演示

（链接不再有效）

# android - appwidget appWidgetIds 问题（小部件的真实和虚拟实例）

> ID：13471067
> 
> 赞同：9
> 
> 时间：2012-11-20T10:19:32.267
> 
> 标签：android, android-widget, instance, android-appwidget

同事！我的问题是：我有一个带有配置活动的 App Widget（min SDK - 2.1），它工作正常，但有时它开始工作得更慢。我登录并发现在更新我的 App Widget 方法之前 onUpdate 收到了一组 App Widget Id

```
 @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
            int[] appWidgetIds) {
        Log.d("onUpdate", Arrays.toString(appWidgetIds)); 
```

但事实是，我在主屏幕上只有两个 App Widget 实例，但数组的长度超过 2（两个）：4，有时是 5 或 6。怎么会这样？我的 AppWidget 更新缓慢的原因是我必须为所有 id 调用 onUpdate-method，但某些 id（正如人们所说的“幻像小部件”）不是真实和正确的。

也许，有人遇到过这样的问题，并会帮助我弄清楚如何只处理真正的应用小部件 ID。

PS卸载然后重新安装应用程序小部件（之后所有幽灵小部件都消失了） - 不是我问题的正确解决方案。我想以编程方式控制幽灵和真实小部件。

有人知道如何解决这个错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T19:03:11.073

此代码将删除小部件（全部，甚至是屏幕上的小部件），因此不是理想的解决方案

```
ComponentName cn = new ComponentName(getApplicationContext(), YourWidget.class);
AppWidgetManager appWidgetManager =  AppWidgetManager.getInstance(getApplicationContext());
int[] appWidgetIds1 = appWidgetManager.getAppWidgetIds(cn);
AppWidgetHost host = new AppWidgetHost(getApplicationContext(), 0);
for (int appWidgetId : appWidgetIds1) {
    host.deleteAppWidgetId(appWidgetId);
} 
```

在 4.2 上删除锁定屏幕小部件仍然存在问题（从未调用过 onReceive）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T11:39:43.437

好的，我在网上搜索了一下，发现这似乎是一个全面的 android 错误，现在还没有修复。如果可以，请尝试清除缓存。转到设置-> 应用程序-> 管理应用程序。然后转到您的家庭启动器应用程序并清除缓存。然后请重新启动您的应用程序并查看是否仍有旧的应用程序小部件。我在网上发现了一些有趣的事情：

[http://forum.xda-developers.com/showthread.php?t=1030804](http://forum.xda-developers.com/showthread.php?t=1030804)

[http://eagle.phys.utk.edu/guidry/android/appWidget.html](http://eagle.phys.utk.edu/guidry/android/appWidget.html)

甚至在 Android 开发者页面和 Group-Post 上也讨论了这一点：

[http://developer.android.com/guide/topics/appwidgets/index.html#AppWidgetProvider](http://developer.android.com/guide/topics/appwidgets/index.html#AppWidgetProvider)

[https://groups.google.com/forum/?fromgroups=#!msg/android-developers/Nl0e06rDCRY/4nAh3xnKBeQJ](https://groups.google.com/forum/?fromgroups=#!msg/android-developers/Nl0e06rDCRY/4nAh3xnKBeQJ)

他们谈论 1.5 中的一个问题，但我认为即使是更高的系统也是一个问题。在小组帖子中有一个如何解决此问题的示例：

```
 @Override
        public void onReceive(Context context, Intent intent) {
         final String action = intent.getAction();
         if (AppWidgetManager.ACTION_APPWIDGET_DELETED.equals(action)) {
         final int appWidgetId = extras.getInt
       (AppWidgetManager.EXTRA_APPWIDGET_ID,
            AppWidgetManager.INVALID_APPWIDGET_ID);
       if (appWidgetId != AppWidgetManager.INVALID_APPWIDGET_ID) {
        this.onDeleted(context, new int[] { appWidgetId });
          }
       } else {
          super.onReceive(context, intent);
       }
      } 
```

似乎并非每个应用小部件都会自动删除，即使用户从主屏幕删除应用或替换小部件也是如此。如果这是正确的方向，请给我一些反馈。如果是，我们需要另一种方法来解决这个问题。对我来说这也很有趣，但目前我没有笔记本电脑来检查它。谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T12:42:58.823

我在一个月前编写的应用程序中遇到了同样的问题，就我而言，这并不重要。我找到了如何删除“幻像小部件”的教程。我从来没有测试过，试试吧：

[http://blog.fiziksphreak.com/2011/07/28/remove-phantom-widgets-in-android/](http://blog.fiziksphreak.com/2011/07/28/remove-phantom-widgets-in-android/)

但是，您确定这会减慢您的应用程序的速度吗？我无法想象这在资源上会很昂贵吗？

## 编辑

而不是杀死旧应用程序，这可能会有所帮助：

```
 Bundle extras = intent.getExtras();
     int appWidgetId = extras.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID); 
```

或者

```
 Bundle extras = intent.getExtras();
     int[] appWidgetIds = extras.getIntArray(AppWidgetManager.EXTRA_APPWIDGET_IDS); 
```

我不知道这是否是您搜索的内容。

# winapi - 使用 Native WiFi API 计算接收到的 MAC 层帧？

> ID：13471072
> 
> 赞同：1
> 
> 时间：2012-11-20T10:19:43.057
> 
> 标签：winapi, sockets, wireless

我正在尝试使用 Windows Native WiFi API 来获取我在一段时间内收到的数据包和帧的数量。

例如，如果数据包大小设置为小于 MTU（例如 1000 字节），则接收数据包的理想数量等于接收帧的数量。

我使用**WLAN_MAC_FRAME_STATISTICS**结构及其成员**ullReceivedFrameCount**和**ullDecryptSuccessCount**来获取值，[请参阅此网站](http://msdn.microsoft.com/en-us/library/windows/desktop/ms706894%28v=vs.85%29.aspx)。

但结果不是我想的那样，我认为有更多的帧可能是路由器和我的计算机在 MAC 层之间的消息，比如信标或其他东西。

我的问题是，是否有任何方法可以获取 MAC 层信息而不是 Native API 或任何方法来处理此问题以使信息更准确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T07:33:22.107

我不认为这样`API`的存在。您正试图`MAC Layer`从上面的图层中获得分辨率。我相信允许这样的事情会违反层的区别。每一层对其他人来说都是一种黑盒，具有严格定义的暴露操作和数据集。如果要计算实际数据包，则应查找`API`in `IP or transport layer`，而不是 in `MAC layer`。

# android - android mapview 气球 - 总是显示所有气球

> ID：13471079
> 
> 赞同：0
> 
> 时间：2012-11-20T10:20:03.337
> 
> 标签：android, android-mapview, android-overlay

我正在使用 android [mapview balloons 开源](https://github.com/jgilfelt/android-mapviewballoons)

我该如何调整它，使其始终显示叠加层上的所有气球？ **更新：** 我想要实现的是在地图上有一个叠加层列表，每个叠加层都包含顶部的气泡，以及该叠加层的地址。我希望所有图标（及其气球）始终可见，无论是否点击特定项目。这样，地址始终可见，您无需点击项目即可查看其地址气球。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T16:08:58.463

我假设您有一个扩展 BalloonItemizedOverlay 的类。

您可以以编程方式调用***onTap( int indexOfOverlay )***以使气球弹出。

如果您没有与每个气球相关联的任何功能，您可以重写 onTap 方法以迭代覆盖项目列表并为每个气球调用 onTap，以一次显示所有气球。然后，您可以在将 BalloonItemizedOverlay 添加到地图视图叠加层时调用此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:50:50.453

尝试：

```
overlay.setShowDisclosure(true);
overlay.setSnapToCenter(true); 
```

# python - 如何使用 django-rest-framework 在序列化程序级别扩展模型

> ID：13471083
> 
> 赞同：6
> 
> 时间：2012-11-20T10:20:22.167
> 
> 标签：python, django-rest-framework

我的模型如下所示：

```
class MenuItem(models.Model):
    name = models.CharField(max_length=500)
    components = models.ManyToManyField(Component, through=MenuItemComponent)

class Component(models.Model):
    name = models.CharField(max_length=500)

class MenuItemComponent(models.Model):
    menuItem = models.ForeignKey('MenuItem')
    component = models.ForeignKey(Component)
    isReplaceable = models.BooleanField() 
```

我想做的是在给定的 MenuItem 中公开一个包含 isReplaceable 字段的组件列表（不是 MenuItemComponents）。到目前为止，我有：

```
#views.py

class MenuItemComponentList(generics.ListAPIView):
    """
    Displays components for given MenuItem
    """
    model = MenuItemComponent
    serializer_class = MenuItemComponentSerializer

    def get_queryset(self):
        itemId = self.kwargs['itemId']
        return MenuItemComponent.objects.filter(menuItem__pk=itemId)

#serializers.py

class MenuItemComponentSerializer(serializers.HyperlinkedModelSerializer):
    class Meta:
        model = MenuItemComponent 
```

它公开了一个 MenuItemComponents 列表并强制客户端进行多次调用以检索所有组件。使用 isReplaceable 字段中的附加数据公开组件列表将解决问题。

**编辑**
最后，我想获得一个列出 Component 元素的列表，但这些元素是用 MenuItemComponent 模型中的 isReplaceable 字段扩展的：

```
{
    "count": 2, 
        "next": null, 
        "previous": null, 
        "results": [
        {
            "url": "http://localhost:8000/api/component/1/", 
            "name": "component 1", 
            "isReplaceable": true
        }, 
        {
            "url": "http://localhost:8000/api/component/2/",  
            "name": "component 2",
            "isReplaceable": false
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T12:57:51.017

首先，创建一个返回您感兴趣的 MenuItemComponent 实例的视图。

```
class ListComponents(generics.ListAPIView):
    serializer_class = MenuItemComponentSerializer

    def get_queryset(self):
        """
        Override .get_queryset() to filter the items returned by the list.
        """
        menuitem = self.kwargs['menuitem']
        return MenuItemComponent.objects.filter(menuItem=menuitem) 
```

然后你需要创建一个序列化器来给你你想要的表示。你的例子比典型案例更有趣/更复杂，所以它看起来像这样......

```
class MenuItemComponentSerializer(serializers.Serializer):
    url = ComponentURLField(source='component')
    name = Field(source='component.name')
    isReplaceable = Field() 
```

'name' 和 'isReplaceable' 字段可以简单地使用默认的只读`Field`类。

这里没有完全符合您的“url”案例的字段，因此我们将为此创建一个自定义字段：

```
class ComponentURLField(serializers.Field):
    def to_native(self, obj):
        """
        Return a URL, given a component instance, 'obj'.
        """

        # Something like this...
        request = self.context['request']
        return reverse('component-detail', kwargs=kwargs, request=request) 
```

我认为这一切都应该是正确的。

那是针对只读序列化的——如果你想要一个可写的序列化，你需要考虑覆盖`restore_object`序列化器上的方法，并使用`WritableField`, 或类似的东西。

# java - 无法从java中的ArrayList中获取元素

> ID：13471084
> 
> 赞同：0
> 
> 时间：2012-11-20T10:20:27.037
> 
> 标签：java, arraylist, multidimensional-array

一个while循环遍历一个字符串，一次接受8个字符的子字符串，获取每个字符的ASCII码并将每个字节转换为其二进制表示，作为8个字符所以（8 * 8）数组，每8个字符，这里是代码：

消息文件包含：1234567800000008

所以 while 循环运行两次，因为有 16 个字符，代码运行正确，直到在最后一个 for 循环的输入块中输入二进制值。当我在数组列表中添加输入块时，当我再次从数组列表中获取（）它们时，它们不是相同的值

```
 while(Message.length() != 0){
            substr=Message.substring(0, 8);
            bytes = substr.getBytes("ASCII");
            int[][] inputblock = new int[bytes.length][bytes.length];

                for(int i=0; i<bytes.length;i++){
                    binString =Integer.toBinaryString(bytes[i]);

                        while (binString.length() < 8) {binString = "0" + binString;}

                      for(int j=0; j<bytes.length;j++){
                           int x=Character.digit(binString.charAt(j), 2);
                                inputblock[i][j] = x;

                            }
                          }     
             input.add(inputblock);  //// This is supposed to add each 64 bit (8*8) 
          Message=Message.replace(substr, "");        //Array to arraylist input. 
    System.out.print(substr + "+");

    } 
```

出于某种原因，当我打印arraylist 的内容时，它打印出不是二进制表示的实际字符.. 我不知道为什么？

输出内容

```
for (int i =0;i<input.size();i++){
     int[][] tmp = input.get(i);

     for(int j=0;j<input.size();j++){
         System.out.print(tmp[i][j]); }
       System.out.print("\n");
    } 
```

输出：12345678+00000008+00 00

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:26:41.650

You mention "getting elements from an ArrayList" in your question, but I can't see you reading from `input` anywhere (assuming that's the list in this case).

The value printed out will always be `substr` followed by a literal `+` character, as this is the only thing you ask your program to print out (in the final line of the while loop). The value of `substr` is set at the start of the loop to be the eight actual characters, so this behaviour seems appropriate.

If you want to print out the binary values, you'll need to convert `input` into a string in whatever format you're after, and pass *that* to `System.out.println()`.

* * *

**EDIT** with the extra information of how you're displaying the relevant output, there is a bug in your `input`-printing method.

You're declaring both for loops as:

```
for(int i=0;i<input.size();i++) 
```

(and the same for `j`). So both counter variables go from 0 to `input.size` - which is 2, as there are 2 characters. As a result, you print out the first two bits of the first two bytes - `00` and `00`.

What you ought to be doing AIUI is iterating fully over both dimensions of the `tmp` array:

```
for(int i = 0; i < input.size(); i++) {
   int[][] tmp = input.get(i);

   for(int j = 0; j < tmp.length; j++) {
      for (int k = 0; k < tmp[j].length; k++) {
         System.out.print(tmp[j][k]);
      }
      System.out.println();
   }
   System.out.println();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:20:27.137

一切都很好，除了下面的代码......

```
for (int i =0;i<input.size();i++){
     int[][] tmp = input.get(i);

     for(int j=0;j<input.size();j++){
         System.out.print(tmp[i][j]); }
       System.out.print("\n");
} 
```

将此代码替换为以下代码...

```
for (int[][] tmp :input.size();){

    for(int i=0; i< tmp.length; i++)
        for(int j=0;j<tmp.length;j++){
            System.out.print(tmp[i][j]); 
        }
       System.out.print("\n");
    }
} 
```

其他一切都是正确的

# sql - 我的 SQL Server 中的 Domain\UserName.DATABLE 是什么

> ID：13471085
> 
> 赞同：0
> 
> 时间：2012-11-20T10:20:29.303
> 
> 标签：sql, sql-server

我正在研究一个遗留系统，我有一堆表，开头是

```
Domain\UserName.DATETABLE 
```

我对这些表没有依赖关系，任何想法，为什么以及如何生成这些表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:00:31.793

这些表是在用户执行`CREATE TABLE DATETABLE (...)`DDL 语句时创建的。

默认情况下，如果用户不是 DBO，但确实具有 CREATE TABLE 权限，他们将在以自己命名的单独模式中创建表。因此，它不是被调用`dbo.DATETABLE`，而是被调用`[DOMAIN\UserName].DATETABLE`。

# php - 针对高延迟（？）用户的长时间 PHP 执行

> ID：13471087
> 
> 赞同：7
> 
> 时间：2012-11-20T10:20:36.340
> 
> 标签：php, apache

我最近在我的访问者日志中添加了 PHP 执行时间，以发现代码或数据库中可能存在的问题。时间测量为脚本开始和结束之间的 microtime() 差异。

平均执行时间（包括我自己对站点调试版本的测试）为 2-15 毫秒。然后我随机看到一些用户执行 +300ms。这些可能是由负载峰值、未缓存的数据库查询或文件系统访问引起的。

我无法理解的是时不时出现的用户，执行时间为 5-30 秒（！）。根据我的测试，它们出现在看似随机的页面上，并且在这些时间访问日志上没有任何请求峰值，代码或数据库查询中也没有任何可能导致性能下降的内容。这些请求中有 90% 来自中国，并且似乎是某种爬虫或机器人。

那么：延迟会影响 PHP 脚本的执行时间吗？将前一个缓冲区发送给用户时，PHP 执行是否暂停？

我发现这个看似相似的问题的另一个线程但没有答案：[PHP的执行时间基于互联网/连接延迟而变化？](https://stackoverflow.com/questions/12127792/phps-execution-time-changes-based-upon-internet-connection-latency)

**编辑：**
我最终将 PHP output_buffering 从 4k 增加到 128k 字节。现在典型的执行时间下降到 2-6 毫秒，并且不再有随机的、荒谬的长时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:22:18.263

我认为延迟会影响 PHP 执行时间，具体取决于服务器配置，尤其是[output_buffering 和 implicit_flush](http://php.net/manual/en/outcontrol.configuration.php)。

此外，还有一些类似`gethostsbyaddr`的函数会减慢 PHP 脚本的速度。

也许您可以使用 XDebug 生成执行跟踪并查看脚本执行的“时间线”。

# sql-server-2008 - SQL 数据库中的数据搜索

> ID：13471090
> 
> 赞同：0
> 
> 时间：2012-11-20T10:20:48.220
> 
> 标签：sql-server-2008

我必须从我的数据库中创建一张发票。该数据库有大约 500 个表。

我不知道数据在数据库中的实际位置。我尝试了搜索数据过程，执行存储过程。

请让我知道我现在怎么能得到它。我的客户不是技术人员，所以除了他有一个数据库之外没有任何信息。

我所拥有的是他们将数据插入数据库的软件。但是通过前端形式的命名约定，我无法做到这一点。

有没有办法完成它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:24:47.507

您可以使用 sql server profiler 检查生成的语句以存储数据并从那里工作

如果数据库仅用于该程序，如果找不到该程序正在使用的数据库用户并将其设置为过滤器，您应该能够快速获取信息...

# vaadin - Vaadin TextChangeListener，表格和失去焦点

> ID：13471094
> 
> 赞同：1
> 
> 时间：2012-11-20T10:21:09.157
> 
> 标签：vaadin

我需要一些帮助来解决由 TextChangeListener 更新的计算问题。

所以我有一个包含数量和单价的 DTO。在我的表中，我添加了一个额外的列，其值为数量 * 单价。

![截屏](../Images/17e37e10272c9c970fdce8c914960227.png)

使用 TextChangeListener 我想更新“Montant Total”列的值。在听众中，我这样做：

```
// I commit the change
myTable.commit();
// I need to refresh the row cache
myTable.refreshRowCache(); 
```

如果我调用“refreshRowCache()”，更改将完成**但**我失去了该字段的焦点......如果我不调用该方法，显然该列的值不会改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:21:59.600

在 vaadin 论坛中[，这篇](https://vaadin.com/forum/-/message_boards/view_message/250088)文章解释了您需要做什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:26:13.457

我使用 myTextField.getCursorPosition() 和 myTextField.setCursorPosition 来解决问题。

# visual-studio-2012 - 在 Visual Studio 2012 中重新启动 (XAML-)Designer 的更好方法

> ID：13471097
> 
> 赞同：8
> 
> 时间：2012-11-20T10:21:13.227
> 
> 标签：visual-studio-2012, designer, restart, xaml-designer

目前，当我在 Visual Studio 2012 中使用 XAML-Designer 遇到问题（如错误和警告，已解决但仍存在于 ErrorList 中或重新加载设计器使用的程序集）并且我需要重新启动它时，我打开 ProcessExplorer并杀死正在运行的 Visual Studio 2012 实例的子进程`XDesProc.exe`。这导致 Visual Studio 2012 显示未处理的异常`Designer process terminated unexpectedly!`，并为我提供了重新加载设计器的选项。

Visual Studio 2012 中是否有更好或内置的方式来重新启动设计器。重新打开 XAML 文件通常无助于解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:24:46.637

我的解决方案（归功于 Ellistraee）

*   关闭 VS 并混合
*   删除解决方案中的 bin 和 obj 文件夹
*   删除任何 .user 文件
*   删除任何 .suo 文件
*   打开与混合
*   打开会使设计器崩溃的违规页面 - 您应该收到“请构建项目”消息
*   F6 重建解决方案

它应该工作！

# visual-c++ - 使用 fstream 打开仅在运行时创建的文件

> ID：13471099
> 
> 赞同：0
> 
> 时间：2012-11-20T10:21:12.910
> 
> 标签：visual-c++, file-io, fstream, stdstring

我正在使用 Visual C++ 6.0，我正在尝试使用 fstream 打开和读取仅在运行时创建的文件。这个文件是由另一个线程上运行的另一个函数编写的，我的程序将继续尝试“打开”文件，直到它可以打开，即在它被创建之后，然后从中读取 3 个数字并执行它的其余代码。

该文件`test.txt`有内容

```
1
3
4 
```

我的轮询和打开文件的程序如下：

```
ifstream fin;
std::string tfile, snum1, snum2, snum3;
long int num2, num3;

tfile.assign(argv[1]);
printf("Begin prog %s\n", tfile.c_str());

fp: fin.open(tfile.c_str(), ifstream::in);
if (fin.is_open())
{
   printf("fin is open\n");
   getline(fin, snum1);
   getline(fin, snum2);
   getline(fin, snum3);
   num2 = atol(snum2.c_str());
   num3 = atol(snum3.c_str());
   printf("snum1 = %s\n", snum1.c_str());
   printf("num2 = %ld num3 = %ld\n", num2, num3);
   fin.close();
}
else
{
   printf("Cannot open file %s\n", tfile.c_str());
   fin.close();
   Sleep(500);
   goto fp;
}

remove(tfile.c_str());
printf("End of prog\n"); 
```

我执行了程序

```
test_prog.exe "C:\test.txt" 
```

`test.txt`并在将文件放入之前等待了大约 3 秒`C:\`

我的输出是

```
Begin prog C:\test.txt
Cannot open file C:\test.txt
Cannot open file C:\test.txt
Cannot open file C:\test.txt
Cannot open file C:\test.txt
Cannot open file C:\test.txt
Cannot open file C:\test.txt
fin is open
snum1 = 
num2 = 0 num3 = 0
End of prog 
```

`test.txt`刷新`C:\`文件夹后文件消失。

所以 snum1、num2 和 num3 的值都是错误的，就好像文件没有被正确读取一样。

如果我在整个块`while fin.good()`之后放置一个循环`printf("fin is open\n");`（直到打印 num2 和 num3 的值），那么我得到

```
Begin prog C:\test.txt
Cannot open file C:\test.txt
Cannot open file C:\test.txt
Cannot open file C:\test.txt
Cannot open file C:\test.txt
Cannot open file C:\test.txt
Cannot open file C:\test.txt
fin is open
End of prog 
```

如何正确读取仅在运行时创建的文件？

ETA：我还添加了一个

```
if (fin.rdstate() & ifstream::failbit) != 0)
   printf("failbit set\n"); 
```

在该`printf("fin is open\n");`行之后检查，并`failbit`在运行时将文件放入文件夹时设置。

当文件在执行前就位时，一切都运行正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T04:05:31.880

我终于找到了问题所在。

是在第`failbit`一次`fin.open`失败后设置的，并且在`fin.open`成功时从不重置。一旦我在循环中做了一个`fin.clear()`之后，程序就成功运行了。`fin.close()``else`

# mysql - 带有附加模式的 tee 命令从 mysql 命令行给出错误

> ID：13471103
> 
> 赞同：1
> 
> 时间：2012-11-20T10:21:15.707
> 
> 标签：mysql, linux

当我尝试从 linux 机器上的 mysql 命令行客户端执行以下命令时

```
mysql> tee -a /data/lib/rc.txt; 
```

即使文件 rc.txt 已经存在，它也会给我以下错误

> mysql：无法创建/写入文件'-a /data/lib/rc.txt'（错误代码：2）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:32:41.600

MySQL`tee`总是附加：`-a`标志既不需要也不支持（因此`mysql`被`-a /data/lib/rc.txt`视为您的文件名，因此错误）。

请参阅[mysql 命令](http://dev.mysql.com/doc/en/mysql-commands.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T10:47:17.467

尝试使用此日志记录在此处完美运行`mysql`

```
mysql> tee /data/lib/rc.txt; 
```

执行此命令后，您可以找到该文件，`location`然后尝试简单的命令，您可以找到登录`rc.txt`文件的输出，`appending` 并将在下一步自动发生`commands`，工作正常`mysql 5.1` 。注意不需要在命令中传递参数来追加使用简单的相同。

要禁用日志记录，您应该使用`notee`

[文档](http://dev.mysql.com/doc/refman/5.5/en/mysql-command-options.html#option_mysql_tee)

# hibernate - Hibernate & spring 无法将数据库状态与会话同步

> ID：13471107
> 
> 赞同：0
> 
> 时间：2012-11-20T10:21:41.850
> 
> 标签：hibernate

我收到以下异常

```
org.hibernate.util.JDBCExceptionReporter - SQL Error: 1, SQLState: 23000
org.hibernate.util.JDBCExceptionReporter - ORA-00001: unique constraint (DBNAME.ConstraintName) violated

org.hibernate.event.def.AbstractFlushingEventListener - Could not synchronize database state with session
org.hibernate.exception.ConstraintViolationException: Could not execute JDBC batch update
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:71)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:253)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:266)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:167)
    at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)
    at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)
    at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000) 
```

session.flush() 中指出了错误

请帮助我

我正在使用带有休眠的spring webflow

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:01:26.977

异常清楚地表明您违反了给定列的唯一约束，这意味着您在受架构限制的 2 条记录中插入相同的值。

每个 RDBMS 都可以通过 DB Dump 来显示您的约束。或者他们可能有一些额外的语法，比如在 MySQL 中你会写`show create table TABLE_NAME`. 我不知道 Oracle 中的确切语法。

此外，您需要为您的约束提供有意义的名称，我希望`DBNAME.ConstraintName`这是您为了示例而更改的名称，它不是您真正的约束名称。在 hbm.xml 文件中，您可以设置`unique="true" unique-key="meaningfull_uk"`简单属性，以便知道实际的约束失败（您必须重新运行 hbm2ddl 才能使用新名称重新创建它）。

此外，`Session#flush`这也是 Hibernate 开始的地方，但您需要检查调用此操作的代码并检查已保存实体的哪些可能值可能导致此问题。

# sharepoint - 将主数据服务集成到 SharePoint

> ID：13471111
> 
> 赞同：0
> 
> 时间：2012-11-20T10:21:52.010
> 
> 标签：sharepoint, master-data-services

是否有任何 SharePoint 组件允许将 MDS 数据集成到 SharePoint 中？我正在寻找一个 Web 部件或 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:28:44.290

页面查看器 Web 部件将包括 Web 界面。

[http://social.technet.microsoft.com/wiki/contents/articles/5734.display-the-master-data-services-web-application-in-sharepoint.aspx](http://social.technet.microsoft.com/wiki/contents/articles/5734.display-the-master-data-services-web-application-in-sharepoint.aspx)

# https - 如何在 Tornado 中使用 HTTPS 协议处理请求？

> ID：13471115
> 
> 赞同：11
> 
> 时间：2012-11-20T10:22:14.693
> 
> 标签：https, python-2.7, tornado

我是龙卷风的新手。我从这样的“Hello World”代码开始学习：

```
import tornado.ioloop
import tornado.web
import tornado.httpserver

class HelloHandler(tornado.web.RequestHandler):
    def get(self):
        self.write("Hello, world!")

application = tornado.web.Application([
    (r"/", HelloHandler)
])

http_server = tornado.httpserver.HTTPServer(application)

if __name__ == "__main__":
    http_server.listen(80)
    # http_server.listen(443)
    tornado.ioloop.IOLoop.instance().start() 
```

当我在浏览器中输入“http://localhost”时，它可以工作并打印

```
"Hello, world!" 
```

但是如果我尝试了请求“https://localhost”，它会返回：

```
Error 102 (net::ERR_CONNECTION_REFUSED): The server refused the connection. 
```

网上关于Tornado的文档太少了，谁能告诉我如何处理Https协议请求？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-20T11:39:48.667

根据[`tornado.httpserver`文档](http://www.tornadoweb.org/documentation/httpserver.html#tornado.httpserver.HTTPServer)，您需要将`ssl_options`字典参数传递给其构造函数，然后绑定到 HTTPS 端口（443）：

```
http_server = tornado.httpserver.HTTPServer(applicaton, ssl_options={
    "certfile": os.path.join(data_dir, "mydomain.crt"),
    "keyfile": os.path.join(data_dir, "mydomain.key"),
})

http_server.listen(443) 
```

`mydomain.crt`应该是您的 SSL 证书和`mydomain.key`您的 SSL 私钥。

# ios - iOS 的 ZipArchive 替代品？

> ID：13471116
> 
> 赞同：0
> 
> 时间：2012-11-20T10:22:17.780
> 
> 标签：ios, unzip

寻找适用于 iOS 的 ZipArchive 替代方案，让我可以查看大文件的解压缩进度。查看了 ZipKit 和 Objective-Zip，但似乎都没有给我任何形式的解压缩过程的进展。我必须自己推出还是有一些我错过的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:40:34.680

当然，在发布此消息后不久，我遇到了[SSZipArchive](https://github.com/soffes/ssziparchive)，它正是我所需要的。

# iphone - 如何在 iOS 中设置与 RemoteIO 音频单元连接的效果音频单元？

> ID：13471117
> 
> 赞同：1
> 
> 时间：2012-11-20T10:22:17.607
> 
> 标签：iphone, ios, audio, core-audio, audiounit

我是音频单元的新手，不知道如何配置它们。有人可以指导我如何将 RemoteIO (kAudioUnitType_Output) 单元与效果单元 (kAudioUnitType_Effect) 连接以播放具有效果的音频文件。提前致谢。

# php - “this”对于从 PHP 中的类主体内部进行成员访问是强制性的吗？

> ID：13471121
> 
> 赞同：1
> 
> 时间：2012-11-20T10:22:29.850
> 
> 标签：php, this, member

来自 C++，我习惯于能够直接在类的主体中访问类成员，但是，这在 php 中似乎不起作用——简单的 setter 和 getter 无法工作，除非明确使用`$this->`来访问它们。Setter 似乎设置为一个被丢弃的临时对象，而 getter 会在尝试访问不存在的对象时产生错误。

有没有办法直接访问类体内的成员而无需`this`php 中的关键字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T10:24:52.203

不，那里没有。设置一个未定义的变量将为当前范围创建它，这就是您所观察的。（虽然这不是成员变量） - 您甚至可以从未定义的变量中读取，在这种情况下，该值将为空。这会产生一个`E_NOTICE`虽然，所以它不被认为是好的风格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T10:25:07.363

请阅读[http://php.net/manual/en/language.oop5.php](http://php.net/manual/en/language.oop5.php)给出代码片段以查看您面临的确切问题

# java - 如何指示 Jersey 在动态 bean 中查找属性？

> ID：13471123
> 
> 赞同：0
> 
> 时间：2012-11-20T10:22:46.403
> 
> 标签：java, dynamic, jersey, javabeans

这是我的资源类：

**DynamicBeanResource.java**

```
@Path("/")
public class DynamicBeanResource {
    @GET
    @Path("/{entity}.xml/{id}")
    @Produces(MediaType.APPLICATION_XML)
    public DynamicBean getAsXML(@PathParam("entity") String entity, @PathParam("id") String id) {
       //Retrieve bean
       DynamicBean b=getDynamicBean();

       // How can I tell Jersey how to find the properties of the bean ?
    }

    @GET
    @Path("/{entity}.json/{id}")
    @Produces(MediaType.APPLICATION_JSON)
    public DynamicBean getAsJSON(@PathParam("entity") String entity, @PathParam("id") String id) {
       //Retrieve bean
       DynamicBean b=getDynamicBean();

       // How can I tell Jersey how to find the properties of the bean ?
    }
} 
```

**动态Bean.java**

```
public class DynamicBean {
    Map<String,String> properties;

    // Contructor...

    public String getProperty(String name) throws UnknownPropertyException {
       // Get the property from the Map and returns it
    }

    public void setProperty(String name, String value) throws UnknownPropertyException {
       // Updates the property into the Map
    }
} 
```

**编辑**

为了解决这个问题，我编写了自己的 MessageBodyWriter ：

**动态BeanProvider.java**

```
@Provider
@Produces({ MediaType.APPLICATION_XHTML_XML })
public class DynamicBeanProvider implements MessageBodyWriter<DynamicBean> {

    @Override
    public boolean isWriteable(Class<?> clazz, Type paramType, Annotation[] paramArrayOfAnnotation, MediaType paramMediaType) {
        return DynamicBean.class.isAssignableFrom(clazz);
    }

    @Override
    public long getSize(DynamicBean paramT, Class<?> paramClass, Type paramType, Annotation[] paramArrayOfAnnotation,
            MediaType paramMediaType) {
        return -1;//-1 indicates it's not possible to determine the size in advance
    }

    @Override
    public void writeTo(DynamicBean bean, Class<?> paramClass, Type paramType, Annotation[] paramArrayOfAnnotation,
            MediaType mt, MultivaluedMap<String, Object> paramMultivaluedMap, OutputStream out) throws IOException,
            WebApplicationException {
        if (bean == null) {
            throw new WebApplicationException(Status.NOT_FOUND);
        }

        String ret = null;

        if (mt.equals(MediaType.APPLICATION_XHTML_XML_TYPE)) {
            ret = convertDynamicBeanToXHTML(bean);
        }

        if (ret != null) {
            out.write(ret.getBytes(Charset.forName("UTF-8")));
        } else {
            throw new WebApplicationException(Status.INTERNAL_SERVER_ERROR);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:38:52.443

MessageBodyWriter 将起作用，或者您可以尝试使用 JAXB 注释对 DynamicBean 进行注释。但是您仍然必须有一些机制来发现属性。

更新：

我撤回了使用 JAXB 的建议：这可能比仅使用 MessageBodyWriter 涉及更多。将 Map 转换为 JSON 非常[简单](https://discursive.atlassian.net/wiki/display/CJCOOK/Converting+a+Map+to+JSON)

# javascript - jQuery Table sorter 浮点距离排序

> ID：13471126
> 
> 赞同：1
> 
> 时间：2012-11-20T10:22:55.580
> 
> 标签：javascript, jquery, tablesorter

我正在使用 tablesorter 对表格内容进行排序。我的表如下。

```
<table class="results" border="1">
<thead>
    <tr>
        <th class="header">No</th> 
        <th class="header">Distance</th>
        <th class="header">Diagnostic Fee</th>
        <th class="header">Regular Price </th>
        <th class="header">Company Price</th>
        <th class="">&nbsp;</th>
    </tr>
</thead>

<tbody>
    <tr>
        <td>1</td>
        <td class="distance"><a>16.50 kms.</a></td>
        <td class="brand"><a>Credited</a></td>
        <td><a>$5</a></td>
        <td><a>$5<small>after 5% cash back</small></a></td>
    </tr>
    <tr>
           <td>2</td>
        <td class="distance"><a>6.30 kms.</a></td>
        <td class="brand"><a>Credited</a></td>
        <td><a>$8</a></td>
        <td><a>$8<small>after 5% cash back</small></a></td>
    </tr>
    <tr>
        <td>3</td> 
        <td class="distance"><a>10.25 kms.</a></td>
        <td class="brand"><a>Credited</a></td>
        <td><a>$2</a></td>
        <td><a>$2<small>after 5% cash back</small></a></td>
    </tr>
</tbody>
</table>​ 
```

我想使用距离和价格对表格进行排序。我面临的困难是解决距离表，因为距离以字母数字显示，如“12 公里”。因此，该表未排序。

谁能建议如何只用数字来解析内容？

这是[jsfiddle 演示](http://jsfiddle.net/umeshpatil86/wx6dU/4/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T10:35:13.417

Tablesorter 提供了一种为无法正确获取数据的单元格定义附加解析器的方法。您需要为您感兴趣的 2 列定义 2 个解析器。

所以你可能有：

```
$.tablesorter.addParser({
  id: 'distance',
  is: function(s) {
    return false;
  },
  format: function(text, table, cell) {
    return parseFloat(text.replace('kms.', ''));
  },
  type: 'numeric'
}); 
```

对于距离，并且：

```
$.tablesorter.addParser({
   id: 'price',
   is: function(s) {
     return false;
   },
   format: function(text, table, cell) {
     return parseFloat(text.replace('$', ''));
   },
   type: 'numeric'
 }); 
```

价格。然后你告诉 tablesorter 哪些列使用解析，所以：

```
$("table").tablesorter({
  debug:false,  
  sortList: [[0, 0], [2, 0]],
  headers: {
    1: {
      sorter: 'distance'
    },
    3: {
      sorter: 'price'
    }
  }
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T10:34:58.677

Tablesorte 有一个选项“textExtraction”，因此您可以定义一个函数来在排序之前遍历文本。例子：

```
$("table").tablesorter({
        debug:false,  
        sortList: [[0, 0], [2, 0]],
        textExtraction: function(node) {  
            var $node = $(node)
            var text = $node.text();
            if ($node.hasClass('distance')) {
                text = text.replace('kms', '');
            };

            return text;
        }
}); 
```

[更新的小提琴](http://jsfiddle.net/wx6dU/3/ "更新的小提琴")

# javascript - ng-repeat 完成事件

> ID：13471129
> 
> 赞同：210
> 
> 时间：2012-11-20T10:23:01.553
> 
> 标签：javascript, jquery, angularjs, angularjs-ng-repeat, document-ready

我想用表调用一些针对 div 的 jQuery 函数。该表填充有`ng-repeat`.

当我调用它时

```
$(document).ready() 
```

我没有结果。

还

```
$scope.$on('$viewContentLoaded', myFunc); 
```

没有帮助。

在 ng-repeat 填充完成后，有什么方法可以立即执行功能？我已经阅读了有关使用 custom 的建议`directive`，但我不知道如何将它与 ng-repeat 和我的 div 一起使用...

* * *

## 回答 #1

> 赞同：243
> 
> 时间：2012-11-20T11:51:09.967

实际上，您应该使用指令，并且没有与 ng-Repeat 循环结束相关的事件（因为每个元素都是单独构建的，并且有自己的事件）。但是 a) 使用指令可能是您所需要的，并且 b) 您可以使用一些 ng-Repeat 特定属性来制作“on ngRepeat finished”事件。

具体来说，如果您只想为整个表设置样式/添加事件，则可以在包含所有 ngRepeat 元素的指令中使用。另一方面，如果您想专门处理每个元素，您可以在 ngRepeat 中使用指令，它会在创建后对每个元素起作用。

然后，您可以使用 、 和 属性来触发`$index`事件。所以对于这个 HTML：`$first``$middle``$last`

```
<div ng-controller="Ctrl" my-main-directive>
  <div ng-repeat="thing in things" my-repeat-directive>
    thing {{thing}}
  </div>
</div> 
```

您可以使用如下指令：

```
angular.module('myApp', [])
.directive('myRepeatDirective', function() {
  return function(scope, element, attrs) {
    angular.element(element).css('color','blue');
    if (scope.$last){
      window.alert("im the last!");
    }
  };
})
.directive('myMainDirective', function() {
  return function(scope, element, attrs) {
    angular.element(element).css('border','5px solid red');
  };
}); 
```

在这个[Plunker](http://plnkr.co/edit/or5mys?p=preview)中查看它的实际效果。希望能帮助到你！

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2012-12-08T06:36:04.657

如果您只是想在循环结束时执行一些代码，这里有一个稍微简单的变体，不需要额外的事件处理：

```
<div ng-controller="Ctrl">
  <div class="thing" ng-repeat="thing in things" my-post-repeat-directive>
    thing {{thing}}
  </div>
</div> 
```

```
function Ctrl($scope) {
  $scope.things = [
    'A', 'B', 'C'  
  ];
}

angular.module('myApp', [])
.directive('myPostRepeatDirective', function() {
  return function(scope, element, attrs) {
    if (scope.$last){
      // iteration is complete, do whatever post-processing
      // is necessary
      element.parent().css('border', '1px solid black');
    }
  };
}); 
```

* * *

[**观看现场演示。**](http://plnkr.co/edit/icWaAW)

* * *

## 回答 #3

> 赞同：65
> 
> 时间：2016-06-17T10:42:55.547

不需要创建指令，尤其是为了有一个`ng-repeat`完整的事件。

`ng-init`为你施展魔法。

```
 <div ng-repeat="thing in things" ng-init="$last && finished()"> 
```

确保只有在最后一个元素被渲染到 DOM 时才会触发`$last`。`finished`

不要忘记创建`$scope.finished`事件。

编码快乐！！

**编辑：2016 年 10 月 23 日**

如果您还想`finished`在数组中没有项目时调用该函数，那么您可以使用以下*解决方法*

```
<div style="display:none" ng-init="things.length < 1 && finished()"></div>
//or
<div ng-if="things.length > 0" ng-init="finished()"></div> 
```

`ng-repeat`只需在元素顶部添加上述行。它将检查数组是否没有任何值并相应地调用函数。

例如

```
<div ng-if="things.length > 0" ng-init="finished()"></div>
<div ng-repeat="thing in things" ng-init="$last && finished()"> 
```

* * *

## 回答 #4

> 赞同：41
> 
> 时间：2013-04-21T18:18:30.527

这是一个重复完成指令，它在为真时调用指定的函数。我发现被调用的函数必须在进行 DOM 操作之前使用间隔 = 0 的 $timeout，例如在渲染元素上初始化工具提示。jsfiddle：http: [//jsfiddle.net/tQw6w/](http://jsfiddle.net/tQw6w/)

在 $scope.layoutDone 中，尝试注释掉 $timeout 行并取消注释“不正确！” 行以查看工具提示中的差异。

```
<ul>
    <li ng-repeat="feed in feedList" repeat-done="layoutDone()" ng-cloak>
    <a href="{{feed}}" title="view at {{feed | hostName}}" data-toggle="tooltip">{{feed | strip_http}}</a>
    </li>
</ul> 
```

JS：

```
angular.module('Repeat_Demo', [])

    .directive('repeatDone', function() {
        return function(scope, element, attrs) {
            if (scope.$last) { // all are rendered
                scope.$eval(attrs.repeatDone);
            }
        }
    })

    .filter('strip_http', function() {
        return function(str) {
            var http = "http://";
            return (str.indexOf(http) == 0) ? str.substr(http.length) : str;
        }
    })

    .filter('hostName', function() {
        return function(str) {
            var urlParser = document.createElement('a');
            urlParser.href = str;
            return urlParser.hostname;
        }
    })

    .controller('AppCtrl', function($scope, $timeout) {

        $scope.feedList = [
            'http://feeds.feedburner.com/TEDTalks_video',
            'http://feeds.nationalgeographic.com/ng/photography/photo-of-the-day/',
            'http://sfbay.craigslist.org/eng/index.rss',
            'http://www.slate.com/blogs/trending.fulltext.all.10.rss',
            'http://feeds.current.com/homepage/en_US.rss',
            'http://feeds.current.com/items/popular.rss',
            'http://www.nytimes.com/services/xml/rss/nyt/HomePage.xml'
        ];

        $scope.layoutDone = function() {
            //$('a[data-toggle="tooltip"]').tooltip(); // NOT CORRECT!
            $timeout(function() { $('a[data-toggle="tooltip"]').tooltip(); }, 0); // wait...
        }

    }) 
```

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2014-07-18T05:34:05.397

这是一个简单的方法`ng-init`，甚至不需要自定义指令。它在某些情况下对我来说效果很好，例如需要在页面加载时将 ng 重复项的 div 自动滚动到特定项目，因此滚动功能需要等到`ng-repeat`完成对 DOM 的渲染才能触发。

```
<div ng-controller="MyCtrl">
    <div ng-repeat="thing in things">
        thing: {{ thing }}
    </div>
    <div ng-init="fireEvent()"></div>
</div> 
```

* * *

```
myModule.controller('MyCtrl', function($scope, $timeout){
    $scope.things = ['A', 'B', 'C'];

    $scope.fireEvent = function(){

        // This will only run after the ng-repeat has rendered its things to the DOM
        $timeout(function(){
            $scope.$broadcast('thingsRendered');
        }, 0);

    };
}); 
```

请注意，这仅对您需要在 ng-repeat 最初呈现后调用一次的函数有用。如果您需要在更新 ng-repeat 内容时调用一个函数，那么您必须使用该线程上的其他答案之一和自定义指令。

* * *

## 回答 #6

> 赞同：28
> 
> 时间：2015-07-02T14:38:59.790

作为 Pavel 的[回答](https://stackoverflow.com/questions/13471129/ng-repeat-finish-event/27058748#27058748)的补充，更具可读性和易于理解的内容是：

```
<ul>
    <li ng-repeat="item in items" 
        ng-init="$last ? doSomething() : angular.noop()">{{item}}</li>
</ul> 
```

为什么你认为`angular.noop`首先存在......？

**优点：**

您不必为此编写指令...

* * *

## 回答 #7

> 赞同：21
> 
> 时间：2014-11-21T10:06:14.250

`ngInit`使用Lodash 的方法可能更简单一些[`debounce`](https://lodash.com/docs#debounce)，不需要自定义指令：

控制器：

```
$scope.items = [1, 2, 3, 4];

$scope.refresh = _.debounce(function() {
    // Debounce has timeout and prevents multiple calls, so this will be called 
    // once the iteration finishes
    console.log('we are done');
}, 0); 
```

模板：

```
<ul>
    <li ng-repeat="item in items" ng-init="refresh()">{{item}}</li>
</ul> 
```

* * *

### 更新

使用三元运算符还有更简单的纯 AngularJS 解决方案：

模板：

```
<ul>
    <li ng-repeat="item in items" ng-init="$last ? doSomething() : null">{{item}}</li>
</ul> 
```

请注意，*ngInit*使用预链接编译阶段 - 即在处理子指令之前调用表达式。这意味着可能仍需要异步处理。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-09-20T19:43:28.460

当您检查`scope.$last`变量以用`setTimeout(someFn, 0)`. A`setTimeout 0`是 javascript 中公认的技术，我`directive`必须正确运行。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-05-25T21:41:13.687

```
<div ng-repeat="i in items">
        <label>{{i.Name}}</label>            
        <div ng-if="$last" ng-init="ngRepeatFinished()"></div>            
</div> 
```

如果项目是重复中的最后一个，我的解决方案是添加一个 div 来调用函数。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2016-05-17T04:32:12.590

我是这样做的。

创建指令

```
function finRepeat() {
    return function(scope, element, attrs) {
        if (scope.$last){
            // Here is where already executes the jquery
            $(document).ready(function(){
                $('.materialboxed').materialbox();
                $('.tooltipped').tooltip({delay: 50});
            });
        }
    }
}

angular
    .module("app")
    .directive("finRepeat", finRepeat); 
```

将其添加到此 ng-repeat 的标签上后

```
<ul>
    <li ng-repeat="(key, value) in data" fin-repeat> {{ value }} </li>
</ul> 
```

并且准备好将在 ng-repeat 结束时运行。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-01-23T18:21:59.957

这是对其他答案中表达的想法的改进，以展示在使用声明性语法和隔离范围时如何访问 ngRepeat 属性（$index、$first、$middle、$last、$even、$odd）（谷歌推荐的最佳实践）带有元素指令。注意主要区别：`scope.$parent.$last`.

```
angular.module('myApp', [])
.directive('myRepeatDirective', function() {
  return {
    restrict: 'E',
    scope: {
      someAttr: '='
    },
    link: function(scope, element, attrs) {
      angular.element(element).css('color','blue');
      if (scope.$parent.$last){
        window.alert("im the last!");
      }
    }
  };
}); 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-12-28T15:39:51.700

我想添加另一个答案，因为前面的答案认为在 ngRepeat 完成后需要运行的代码是一个角度代码，在这种情况下，上面的所有答案都提供了一个伟大而简单的解决方案，其中一些比其他答案更通用，如果摘要生命周期阶段很重要，您可以查看[Ben Nadel 的博客](http://www.bennadel.com/blog/2592-hooking-into-the-complete-event-of-an-ngrepeat-loop-in-angularjs.htm)，但使用 $parse 而不是 $eval 除外。

但根据我的经验，正如 OP 所述，它通常在最终编译的 DOM 上运行一些 JQuery 插件或方法，在这种情况下，我发现最简单的解决方案是创建一个带有 setTimeout 的指令，因为 setTimeout 函数被推送到浏览器队列的末尾，它总是在一切都以角度完成之后，通常是 ngReapet，它在其父 postLinking 函数之后继续

```
angular.module('myApp', [])
.directive('pluginNameOrWhatever', function() {
  return function(scope, element, attrs) {        
    setTimeout(function doWork(){
      //jquery code and plugins
    }, 0);        
  };
}); 
```

对于想知道在这种情况下为什么不使用 $timeout 的人，它会导致另一个完全没有必要的摘要循环

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-10-03T17:43:18.810

在 ng-repeat 结束后，我不得不使用 MathJax 渲染公式，以上答案都没有解决我的问题，所以我做了如下。这**不是一个很好的解决方案**，但对我有用......

```
<div ng-repeat="formula in controller.formulas">
    <div>{{formula.string}}</div>
    {{$last ? controller.render_formulas() : ""}}
</div> 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-04-20T16:32:10.913

[我在这里](https://www.linkedin.com/pulse/20140822090331-106754325-execute-code-after-ng-repeat-renders-the-items/)找到了一个很好实践的答案，但是仍然需要添加延迟

创建以下指令：

```
angular.module('MyApp').directive('emitLastRepeaterElement', function() {
return function(scope) {
    if (scope.$last){
        scope.$emit('LastRepeaterElement');
    }
}; }); 
```

将其作为属性添加到中继器，如下所示：

```
<div ng-repeat="item in items" emit-last-repeater-element></div> 
```

据拉杜说：

```
$scope.eventoSelecionado.internamento_evolucoes.forEach(ie => {mycode}); 
```

对我来说它有效，但我仍然需要添加一个 setTimeout

```
$scope.eventoSelecionado.internamento_evolucoes.forEach(ie => {
setTimeout(function() { 
    mycode
}, 100); }); 
```

* * *

## 回答 #15

> 赞同：-4
> 
> 时间：2015-04-20T04:35:51.423

如果您只是想更改类名以使其呈现方式不同，那么下面的代码就可以解决问题。

```
<div>
<div ng-show="loginsuccess" ng-repeat="i in itemList">
    <div id="{{i.status}}" class="{{i.status}}">
        <div class="listitems">{{i.item}}</div>
        <div class="listitems">{{i.qty}}</div>
        <div class="listitems">{{i.date}}</div>
        <div class="listbutton">
            <button ng-click="UpdateStatus(i.$id)" class="btn"><span>Done</span></button>
            <button ng-click="changeClass()" class="btn"><span>Remove</span></button>
        </div>
    <hr>
</div> 
```

当我有类似的要求以 Strick trough 字体呈现购物清单中的购物项目时，此代码对我有用。

# java - 逐字逐句遍历

> ID：13471134
> 
> 赞同：2
> 
> 时间：2012-11-20T10:23:15.967
> 
> 标签：java, algorithm, logic

如何逐字遍历任何给定的句子？java中有内置函数吗？我不知道如何开始。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T10:26:05.853

像这样的东西：

```
String sentence = "Your sentence here.";
String[] words = sentence.split("\\s+"); // splits by whitespace
for (String word : words) {
    System.out.println(word);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T10:51:35.080

很多人建议按空格分割，但即使是这句话也包含逗号等。你应该分割的不仅仅是空格；也分割标点符号：

```
String words = sentence.split("([\\s.,;:\"?!,.…(){}[\\]%#/]|(- )|( -))+"); 
```

此正则表达式拆分所有合理预期的标点符号。请注意，单词中的连字符和撇号*不是*“标点符号”；它们是这个词的一部分。

这种方法或类似的方法也将处理非英语字符句子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T10:25:49.170

```
String[] array = input.split(" "); 
```

这样，字符串就被转换成一个由空格分隔的数组（您可以更改 split() 的参数中的分隔符），然后您可以根据需要循环遍历该数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T10:25:54.180

`StringTokenizer`例如开始或使用`String.split(" ")`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-20T10:25:56.833

尝试按空格字符拆分句子。

```
String sentence = "This is a sentence.";

for(String word: sentence.split("\\s+"){
  System.out.println(word);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-20T10:26:36.503

```
String s="sfgasdfg  jhsadfkjashfd sajdfhjkasdfh hjskafhasj";
String wordArray[] =s.split("\\s+");
for(String sT :wordArray)
{
System.out.println(st);
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-20T10:26:58.093

看看这里的字符串拆分功能[http://www.tek-tips.com/viewthread.cfm?qid=1167964](http://www.tek-tips.com/viewthread.cfm?qid=1167964)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-20T10:27:28.980

假设您已经将句子存储为字符串，您可以使用该[`String.replaceAll("[./,]"," ")`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)方法删除停用词，然后使用[`String.split("\\s+")`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)获取组成短语的各个单词。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-20T10:28:39.540

我会说[StringTokenizer](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html)可能会帮助你。

```
 String str = "This is String , split by StringTokenizer, created by mkyong";
        StringTokenizer st = new StringTokenizer(str);

        System.out.println("---- Split by space ------");
        while (st.hasMoreElements()) {
            System.out.println(st.nextElement());
        }

        System.out.println("---- Split by comma ',' ------");
        StringTokenizer st2 = new StringTokenizer(str, ",");

        while (st2.hasMoreElements()) {
            System.out.println(st2.nextElement());
        } 
```

也`String.split()`可以帮助您：

```
 String[] result = "this is a test".split("\\s");
     for (int x=0; x<result.length; x++)
         System.out.println(result[x]); 
```

输出：

```
this
 is
 a
 test 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-11-20T10:29:46.567

您可以使用 StringTokenizer 类，它将字符串分成单词。

```
 public static void main(String ae[]){
    String st = "This is Java";
    StringTokenizer str= new StringTokenizer(st);
    while(str.hasMoreTokens()){
        System.out.println(str.nextToken());
    }
} 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-11-20T10:51:39.930

```
System.out.println(Arrays.toString(
    "Many words//separated.by-different\tcharacters"
        .split("\\W+")));
//[Many, words, separated, by, different, characters] 
```

# excel - 大写单词的第一个字母而不改变当前大写

> ID：13471146
> 
> 赞同：1
> 
> 时间：2012-11-20T10:24:33.603
> 
> 标签：excel, vba, capitalization

我在 Excel 中有一些文本项，并且我喜欢将每个单词的第一个字母大写。但是，很多文本都包含短语“IT”，并且使用当前的大写方法（PROPER）将其更改为“It”。有没有办法只将每个单词的第一个字母大写而不将每个单词中的其他字母大写？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:16:02.177

这是一种VBA方式，将其添加到模块中&`=PrefixCaps("A1")`

```
Public Function PrefixCaps(value As String) As String
    Dim Words() As String: Words = Split(value, " ")
    Dim i As Long
    For i = 0 To UBound(Words)
        Mid$(Words(i), 1, 1) = UCase$(Mid$(Words(i), 1, 1))
    Next
    PrefixCaps = Join(Words, " ")
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:08:53.647

使用网站[http://www.textfixer.com/tools/capitalize-sentences.php](http://www.textfixer.com/tools/capitalize-sentences.php)并将其全部粘贴

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T13:46:51.730

这有点复杂，但我确实发现如果您的电子表格非常简单，您可以将其复制并粘贴到 word 中并使用它的编辑功能，然后将其复制并粘贴回 Excel。对我来说效果很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-06T16:06:42.047

修复文本中的双空格：

```
 Public Function PrefixCaps(value As String) As String
    Dim Words() As String: Words = Split(value, " ")
    Dim i As Long
    For i = 0 To UBound(Words)
        If Len(Words(i)) > 0 Then
            Mid$(Words(i), 1, 1) = UCase$(Mid$(Words(i), 1, 1))
        End If
    Next
    PrefixCaps = Join(Words, " ")
End Function` 
```

# oracle - 在 Oracle 中导入 .sql 文件？

> ID：13471150
> 
> 赞同：13
> 
> 时间：2012-11-20T10:24:45.623
> 
> 标签：oracle, oracle-sqldeveloper

我有 .sql 文件。我需要将它导入到 oracle 11g。.sql 文件包含所有表的 ddl 查询。我如何将 .sql 文件导入到 oracle 11g。我有 sqldeveloper 工具。

提前致谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-20T10:43:30.397

来自 SQL Developer 或 Toad

```
Open --> File --> /locationofyourfile/yourfile.sql. 
```

在 SQL Developer 或 Toad 中打开文件后，

执行者`F5`

从 SQLPlus

```
@/locationofyourfile/yourfile.sql 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-07T04:55:11.763

@ sql 文件的物理路径。例如。如果我的文件在 c: 上并且文件名为 beckup.sql。然后命令将如下（在控制台 - sqlplus）：

@c:\backup.sql

# java - WordNet 获得上位词的深度

> ID：13471155
> 
> 赞同：1
> 
> 时间：2012-11-20T10:25:17.677
> 
> 标签：java, nlp, wordnet, jwi

我对 WordNet 很陌生。我需要一些帮助来理解 WordNet 的结构。目前，我使用 MIT JWI WordNet 包来实现我的系统。

到目前为止，我能够检索一个单词的同义词和上位词。我的问题是：有没有办法在 WordNet 中检索下一级上位词？

例如：单词“dog”有“canine”和“canid”（第一级）的上位词。如何提取“carnivore”的二级上位词？然后是下一个。这可以使用 JWI 吗？

我想根据这篇[论文](http://www.ifets.info/journals/14_1/11.pdf)找到单词的深度。

我希望我能正确理解这篇论文，我也在这里解释一下。

请有人帮助澄清。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:35:58.603

一个 WordNet 词可以有多种含义，这意味着对象的不同含义。例如，当我们在 WordNet 浏览器中输入“canine”作为查询时，我们可以看到该名词有 2 个含义：“犬齿”和“犬齿”（就像动物本身一样）。

因此，在第一层，我们可以获得一些上位词，但是当我们上升到另一个层时，我认为我们需要确定我们所说的单词的“意义”。特别是，如果一个词 w 有一级上位词 A 和 B 怎么办。A 实际上有 5 个意义。那么我们会选择使用哪种意义上去寻找二级上位词呢？B也类似。

所以我认为总而言之，它归结为你对哪些感官感兴趣，然后你可以上去数数。

# php - 如何使用 php 更改 Joomla 用户组

> ID：13471157
> 
> 赞同：3
> 
> 时间：2012-11-20T10:25:25.283
> 
> 标签：php, joomla2.5

在 Joomla 2.5 站点中，我想在注册用户完成表单后将其分配到另一个组。用户将在完成将在 Fabrik 中创建的表单时登录，以便我可以添加一个 PHP 脚本以在保存时运行。我的php技能很初级。将当前用户添加到组的 php 中的行是什么样的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T16:26:47.773

您可以使用[JUserHelper::setUserGroups](http://api.joomla.org/Joomla-Platform/User/JUserHelper.html#setUserGroups)来设置用户的组。

要检索当前用户，您可以使用[JFactory::getUser](http://api.joomla.org/Joomla-Platform/JFactory.html#getUser)。

当您拥有该用户时，您可以（我尚未确认）可能立即[获得该 ID](http://api.joomla.org/Joomla-Platform/User/JUser.html#$id)。一些未经测试的代码有望让您上路：

```
 $user = JFactory::getUser();
 $userId = $user->id;
 JUserHelper::setUserGroups($userId, 3); 
```

或者简而言之：

```
 JUserHelper::setUserGroups(JFactory::getUser()->id, 3); // 3 Is the group number 
```

您可以通过进入`table-prefix_usergroups`表并检索主键来找到组 ID。我还没有找到一种无需进入数据库即可检索组列表的方法，但这[可能](https://stackoverflow.com/a/13325261/1271566)会有所帮助。

带有用户组的（未编辑）数据库的屏幕截图：

![用户组 joomla 2.5](../Images/1b0995542dd47fcd3f65ab6f01e88758.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-27T14:19:58.100

在这里，我使用了一种不同的方法，因为 JUserHelper::setUserGroups 方法在我的 Joomla 3.3.1 安装中总是失败。

```
$user = JFactory::getUser();//get current user
$g = array('2'=>2,'3'=>3);//2 for registered user, 3 for author
$user->groups = $g;
$user->save(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-06T17:18:35.363

我正在使用 Joomla 3.7.5，这个方法对我有用：

```
JUserHelper::setUserGroups($joomlaId, array(10)); 
```

其中，$joomlaId 是我要更改的用户的 ID。这将用户设置为仅组 10 的成员，并立即将更改保存到用户数据库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-28T20:54:34.390

您可能还想查看**addUserToGroup**方法（自 Joomla Platform 11.1 起）

```
JUserHelper::addUserToGroup (JFactory::getUser()->id, 3); // 3 Is the group number 
```

因此，例如，如果您的用户之前属于“已注册”组 (id=2)，那么此后他/她也将被分配到组 3。

同样，还有**removeUserFromGroup**方法，它做相反的事情。

**根据文档，请注意setUserGroups**方法支持组的数组，而我在这里提到的其他 2 种方法支持整数可能很有用。

> setUserGroups(integer $userId, array $groups) : boolean
> 
> addUserToGroup(integer $userId, integer $groupId) : boolean
> 
> removeUserFromGroup(integer $userId, integer $groupId) : boolean

[https://api.joomla.org/cms-3/classes/JUserHelper.html](https://api.joomla.org/cms-3/classes/JUserHelper.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-28T19:01:52.570

我在 joomla 3 中找不到任何有用的方法来做到这一点，所以这里有一个快速帮助那些只需要它工作的人：

```
$db = JFactory::getDbo();
$db->setQuery("replace into xo6uf_user_usergroup_map values ($user_id, $group_id)");
$db->query(); 
```

# sql - 在SQL中将多行表合并为单行

> ID：13471159
> 
> 赞同：0
> 
> 时间：2012-11-20T10:25:34.513
> 
> 标签：sql, sql-server, sql-server-2008

我有严格的表格如下：

```
Ticket   Comment   UpdatedBy

100      Text 1     23
100      Text 2     24
100      Text 3     25
100      Text 4     26 
```

我可以在一个行表中得到它吗**（所有行的票都是一样的）**

```
Ticket   Comment

100      23 Said Text 1 - 24 Said Text 2 -  25 Said Text 3 - 26 Said Text 4 
```

通过一些 SQL 查询？（Sql Server 2008）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:30:23.877

您可以使用`FOR XML PATH`：

```
SELECT Ticket, 
  STUFF((SELECT distinct ' - ' + cast(UpdatedBy as varchar(20)) + ' ' + comment
              from yourtable t2
              where t1.Ticket = t2.Ticket
            FOR XML PATH(''), TYPE

            ).value('.', 'NVARCHAR(MAX)') 
        ,1,2,'') comments
from yourtable t1
group by ticket 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/60a26/8)

结果：

```
| TICKET |                                       COMMENTS |
-----------------------------------------------------------
|    100 |  23 Text 1 - 24 Text 2 - 25 Text 3 - 26 Text 4 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T10:47:35.560

你可以这样做：

```
SELECT ticketno
     ,  STUFF((SELECT ' - ' + CAST(updateby AS VARCHAR) + ' said ' + comment  
         FROM tickets 
         WHERE (ticketno = t.ticketno) 
         FOR XML PATH ('')
      ),1,3,'') AS Comments
FROM tickets t
GROUP BY ticketno 
```

[小提琴示例](http://www.sqlfiddle.com/#!6/fd52a/7/0)

# xpages - 谁能给我举例说明如何使用 xPages Social Enabler 创建新的 IBM Connections 活动？

> ID：13471161
> 
> 赞同：2
> 
> 时间：2012-11-20T10:25:39.080
> 
> 标签：xpages

谁能给我一个示例，如何使用 xPages Social Enabler 创建新的 IBM Connections 活动？我在文档中找不到任何有用的信息，所以我改编了 Niklas Heidloff 关于如何在 Connections 中创建新书签的示例。我有以下用于创建新活动的代码：

```
try { 
   var svc = new sbt.ConnectionsService("/activities/service/atom2/activities"); 

   var sb = new java.lang.StringBuilder(); 
   sb.append("<?xml version=\"1.0\" encoding=\"UTF-8\"?>"); 
   sb.append("<entry xmlns:snx=\"http://www.ibm.com/xmlns/prod/sn\" xmlns:opensearch=\"http://a9.com/-/spec/opensearch/1.1/\" xmlns:thr=\"http://purl.org/syndication/thread/1.0\" xmlns=\"http://www.w3.org/2005/Atom\">"); 
   sb.append("<title type=\"text\">"); 
   sb.append("test activity from xpages"); 
   sb.append("</title>"); 
   sb.append("<content type=\"html\">"); 
   sb.append("</content>"); 
   sb.append("</entry>");                 

   var msg = svc.post(null, sb.toString(), "xml"); 
} catch(e) { 
    print(e) 
} 
```

但是上面的代码不会创建任何东西，只会在 Domino 控制台上引发错误。这是由 svc.post() 命令返回的：

```
[31726:00075-3041917840] 11/19/2012 01:03:59 PM  HTTP JVM: Client service request to: http://vhost1279.site1.compute.ihost.com:81/activities/service/atom2/activities did not return OK status. Status returned: 415, reason: Unsupported Media Type, expected:information, please consult error-l 

[31726:00075-3041917840] 11/19/2012 01:03:59 PM  HTTP JVM: g-0.xml located in /local/opt/ibm/lotus/notesdata/domino/workspace/logs 

[31726:00075-3041917840] 11/19/2012 01:03:59 PM  HTTP JVM: com.ibm.xsp.extlib.sbt.services.client.ClientServicesException: HTTP Status 415, Unsupported Media Type. HTTP error response code received in response to request to url: http://vhost1279.site1.comties/service/atom2/activities 
```

谁能给我一个提示如何正确使用它或指向我一些有用的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:38:03.833

不要使用 StringBuilder 创建 XML。至少使用[SAX](http://www.wissel.net/blog/d6plinks/SHWL-8B3G7U)或更好的[Apache Abdera](http://abdera.apache.org/)来创建 XML（[Tutorial here](http://www.ibm.com/developerworks/library/x-atompp3/)）。这确保了您的 XML 是有效的，并且在 Abdera 的情况下也是有效的 ATOM。

**使用这种方法**很重要**`Node`，因为您会得到一个对象作为回报，它会自动触发所需的内容类型。**

 **然后检查如何在[Connections 文档 wiki中](http://www-10.lotus.com/ldd/lcwiki.nsf/xpDocViewer.xsp?lookupName=Lotus+Connections+3+documentation#action=openDocument&res_title=Lotus_Connections_API_overview_lc3&content=pdcontent)[创建](http://www-10.lotus.com/ldd/lcwiki.nsf/xpDocViewer.xsp?lookupName=Lotus+Connections+3+documentation#action=openDocument&res_title=Creating_activities_lc3&content=pdcontent)Activity （是的 - 令人困惑）。在[本文中](http://www.ibm.com/developerworks/lotus/library/connections-deploy-pt6/)，您可以找到检索活动的代码 - 我实际上建议使用[CURL](http://curl.haxx.se/)来获取有效格式作为示例。一些 CURL URL 在[这里](http://www-10.lotus.com/ldd/lcwiki.nsf/xpDocViewer.xsp?lookupName=IBM+Connections+3.0.1+documentation#action=openDocument&res_title=Getting_started_ic301&content=pdcontent)。最接近完整示例的是 Luis 的[状态更新](http://www.lbenitez.com/2009/11/updating-your-lotus-connections.html)演示。

为了探索连接，我使用以下批处理文件：

```
set server=[server] 
set HOME=c:\work
curl %server%%1 –-netrc -G --basic -k -v -L -o %2 %3 %4 %5 %6 %7 
```

带有 .netrc 文件（参见[CURL 文档](http://curl.haxx.se/docs/manpage.html)）

```
 machine [server] login [user] password [password] 
```

这是活动所需的 XML 格式：

```
<?xml version="1.0" encoding="utf-8"?> 
<entry xmlns="http://www.w3.org/2005/Atom"> 
   <category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="activity" label="Activity"/> 
   <title type="text">Posted activity</title> 
   <content type="html"> 
  This is an activity that has been automatically uploaded from the cURL command line
   </content> 
</entry> 
```

并像这样发布：

```
post activities/service/atom2/activities newactivity.xml activityresult.xml 
```

打开 activityresult.xml 并找到 app:collection 元素的 href 属性 - 您需要它来添加操作。使用以下 XML：

```
<?xml version="1.0" encoding="utf-8"?> 
<entry xmlns="http://www.w3.org/2005/Atom" xmlns:snx="http://www.ibm.com/xmlns/prod/sn"> 
   <category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="todo"/> 
   <category term="Connection4.0"/> 
   <category term="Test"/> 
   <title type="text">Some things that need to be done</title> 
   <content type="html"> 
This is an &lt;b&gt;action&lt;/b&gt; in an activity that has been automatically uploaded from the cURL command line.
   </content> 
   <snx:assignedto>noreply@ibm.com</snx:assignedto> 
</entry> 
```

这个命令：

```
post [the-url-you-found-above] newaction.xml actionresult.xml 
```

一旦 CURL 版本工作，您可以尝试使用 Abdera 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:50:52.483

这是 Firefox 中 REST 客户端的工作示例：

[https://vhost1279.site1.compute.ihost.com/activities/service/atom2/activities](https://vhost1279.site1.compute.ihost.com/activities/service/atom2/activities)

标头：Content-Type application/atom+xml

```
<?xml version="1.0" encoding="UTF-8"?>
<entry xmlns:snx="http://www.ibm.com/xmlns/prod/sn" xmlns:opensearch="http://a9.com/-/spec/opensearch/1.1/" xmlns:thr="http://purl.org/syndication/thread/1.0" xmlns="http://www.w3.org/2005/Atom">
<category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="activity" label="Activity" />
<content type="html"/>
<title type="text">
test
</title>
</entry> 
```

上面代码的问题是您将字符串传递给 post 方法。然而，这并没有设置正确的内容类型。请使用 Stephan 建议的 API 创建一个带有 XML 的 org.w3c.dom.Node 并将其传入。这将在标题中自动设置正确的内容类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T09:01:53.467

解决了！！！我查看了来源，问题很明显。这是一个错误或至少是误解，但很容易解决。根据文档和我的测试证明，此 Connections 在请求中需要以下标头： Content-Type = application/atom+xml .... 但在 Social Enabler 的源代码中，我发现了这两种相关方法：

protected void prepareRequest(HttpClient httpClient, HttpRequestBase httpRequestBase, Options options) throws ClientServicesException { // TODO: 添加对 gzip 内容的支持 //httpClient.addRequestHeader("Accept-Encoding", "gzip");

```
 if(options.getHeaders()!=null) {
            addHeaders(httpClient, httpRequestBase, options);
        }
        if (options.content != null) {
            String contentType = null;
            HttpEntity entity = null;
            Object content = options.content;
            try {
                //If a subclass overrides com.ibm.xsp.extlib.services.client.Service.processRequestContent(HttpRequestBase, Object, Options)
                //the the subclass must set the content type of the request, and also set the request's entity!
                if(processRequestContent(httpClient, httpRequestBase, options)){
                    if (content instanceof IValue) {
                        JsonFactory jsFactory = new JsonJavaScriptFactory(DesignerRuntime.getJSContext());
                        entity = new StringEntity(JsonGenerator.toJson(jsFactory, content, true));
                        contentType = "application/json";
                    }
                    else if (content instanceof JsonObject) {
                        JsonFactory jsFactory = JsonJavaFactory.instanceEx;
                        entity = new StringEntity(JsonGenerator.toJson(jsFactory, content, true));
                        contentType = "application/json";
                    }
                    else if (content instanceof Node) {
                        entity = new StringEntity(DOMUtil.getXMLString((Node) content, true));
                        contentType = "application/xml";
                    }
                    else {
                        entity = new StringEntity(content.toString());
                        contentType = findRequestTextContentType(options);
                    }
                }
            } catch (Exception ex) {
                if(ex instanceof ClientServicesException) {
                    throw (ClientServicesException)ex;
                }
                throw new ClientServicesException(ex, "Error while parsing request content");
            }
            if (entity != null && (httpRequestBase instanceof HttpEntityEnclosingRequestBase)) {
                httpRequestBase.setHeader("Content-type", contentType);
                ((HttpEntityEnclosingRequestBase) httpRequestBase).setEntity(entity);
            }
        }
    }

protected String findRequestTextContentType(Options options) {
        return "text/plain";
    } 
```

如您所见，在任何情况下都没有这样的标头（application/atom+xml）。但是，如果您将 XML 内容作为字符串提供，则代码使用“findRequestTextContentType”方法返回默认内容类型，即“文本/纯文本”，这不适合我们的情况。它是硬编码的，因此无法设置默认编码。但是，至少，'findRequestTextContentType' 是类型保护的，因此它可以被覆盖。因此，我创建了自己的 ConnectionsService 类，该类扩展了前一个类并覆盖了 findRequestTextContentType 方法以针对我的案例返回正确的内容类型。这工作正常并解决了问题！

```
import sbt.ConnectionsService;

public class ConnectionsServiceCustom extends ConnectionsService {

    public ConnectionsServiceTcl(String serviceUrl) {
        super(serviceUrl);
        // TODO Auto-generated constructor stub
    }

     @Override
     protected String findRequestTextContentType(Options options) {
            return "application/atom+xml";
        }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T15:08:49.327

正如 Niklas 和 Stephen 指出的那样，您需要使用 Dom 对象（节点、文档等）。如果您在创建此类对象时遇到错误，则很可能是因为文档/节点的内容格式不正确或不正确.. 有一个内置的 XPages 实用程序类，允许您从字符串创建文档

`com.ibm.commons.xml.DOMUtil`

查看

```
com.ibm.commons.xml.DOMUtil.createDocument(String, String) 
```

例如

```
com.ibm.commons.xml.DOMUtil.createDocument("my xml string", null); 
```

第一个参数是 XML 文档的内容，第二个是格式。

此类提供了几种用于解析和构造 DOM 文档的实用方法。**

# c# - FTP 未检索到完整文件

> ID：13471163
> 
> 赞同：0
> 
> 时间：2012-11-20T10:25:43.407
> 
> 标签：c#, ftp

我有以下代码；

```
/// <summary>
///   Gets a file
/// </summary>
/// <param name="filename"> The filename to get. </param>
/// <returns> A list, containing each line of the file </returns>
public IEnumerable<string> GetFileLines(string filename)
{
  var list = new List<string>();

  var uri = BuildUri(filename);

  var request = (FtpWebRequest)WebRequest.Create(uri.Uri);
  request.Method = WebRequestMethods.Ftp.DownloadFile;

  using (var resp = (FtpWebResponse)request.GetResponse())
  {
    using (var stream = resp.GetResponseStream())
    {
      Thread.Sleep(10000);
      if (stream != null)
      {
        using (var responseStream = new StreamReader(stream))
        {
          // If we still have characters to process
          while (responseStream.Peek() >= 0)
          {
            var line = responseStream.ReadLine();
            list.Add(line);
          }
        }
      }
    }
  }

  return list;
} 
```

然而，它并没有从 FTP 中提取整个文件——它似乎在文件末尾完成下载之前就被切断了。

我可以添加什么来延长它允许检索数据的时间吗？

谢谢，

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:31:21.713

而不是`responseStream.Peek`，使用下面的代码（您也可以`Thread.Sleep`安全地删除）

```
string line;
while((line = responseStream.ReadLine())!=null)
{

    list.Add(line);
} 
```

# javascript - How to limit characters on mouse paste event in javascript

> ID：13471174
> 
> 赞同：0
> 
> 时间：2012-11-20T10:26:15.017
> 
> 标签：javascript, jquery

> **Possible Duplicate:**
> [How do you handle oncut, oncopy, and onpaste in jQuery?](https://stackoverflow.com/questions/237254/how-do-you-handle-oncut-oncopy-and-onpaste-in-jquery)

```
$(document).ready(function() {
    $('#Description').bind('keyup', function() {   
        var characterLimit = 350;
        var charactersUsed = $(this).val().length;
        if (charactersUsed > characterLimit) {
            charactersUsed = characterLimit;
            $(this).val($(this).val().substr(0, characterLimit));
            $(this).scrollTop($(this)[0].scrollHeight);
        }
    });
}); 
```

[http://jsfiddle.net/qCasN/](http://jsfiddle.net/qCasN/)

This is my code. I am trying to paste some content in description box using mouse right click paste, but it is not handled by the code. I don't know where it goes wrong, can anybody help on fixing this for me.

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:32:00.217

You should use `change` or `input` events instead of `keyup`. If you don't mind little performance loss you could do:

```
$('#Description').bind('keyup change input', function () { .. }); 
```

[http://jsfiddle.net/3HdAd/](http://jsfiddle.net/3HdAd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T10:32:01.357

You'll need to use the `mouseup` event, instead of the `keyup` event. `keyup` is for keyboard actions. I am not sure if the page will receive a `mouseup` event from a context menu, though. (right-click -> "paste" makes you click a "paste" button on a non-DOM element.

* * *

Or the events Miszy suggested would be a better choice.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T10:33:13.123

你可以使用 onpaste 事件来处理这个：-

```
$("#Description").bind("paste", function(){} ); 
```

检查此链接：-[您如何在 jQuery 中处理 oncut、oncopy 和 onpaste？](https://stackoverflow.com/questions/237254/how-do-you-handle-oncut-oncopy-and-onpaste-in-jquery)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T10:52:49.060

您可以使用默认的 jquery keyup 事件，如下所示：

```
var characterLimit = 360; 
$("#Description").keyup(function(){
  if($("#Description").val().length > characterLimit){
    $("#Description").val($("#Description").val().substring(0,characterLimit));
   }
}); 
```

或者您可以使用 keydown 事件作为

```
var characterLimit = 360; 
    $("#Description").keydown(function(){
      if($("#Description").val().length > characterLimit){
        return false;
       }
    }); 
```

# php - Same multi-domain session but session values lost

> ID：13471179
> 
> 赞同：3
> 
> 时间：2012-11-20T10:26:31.463
> 
> 标签：php, session, subdomain, session-variables, session-cookies

i've a problem with session on my multi-domain website.

In fact, i've :

*   www.website.com

and

*   my-account.website.com

In the php.ini, i've set : `session.cookie_domain = ".website.com"`

I check if it correctly change with `phpinfo();` and it's ok, i've well the same value for both website (domaine and sub-domain) :

*   the same `session.cookie_domain`, `session.save_path`, `session.cookie_path`.

*   `session.cookie_lifetime` = 0 and `session.cookie_secure` is off

Well, now, when i try some test :

*   Define a session_name on www.website.com, start the session, define un session value like `$_SESSION["test"] = "myvalue";` and i display the session_id.
*   Go to my-account.website.com and open the session with the same session name, i check the session id and i found the same id with www.website.com, but i have lost the session value that i defined. S_SESSION["test"] is lost.

Conclusion, the session id is kept, but sessions values are lost.

Any idea ? I have check to change with `session_set_cookie_params(0, '/', '.website.com');` on each website. And also try to use the htaccess `php_value session.cookie_domain ".website.com"`

HELP, THAT MADE ME CRAZY.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:56:39.617

搜索不成功后，我在我的 Debian 上重新安装了 apache2。问题已解决，会话值已成功共享。

我认为我的 apache2 在 2 个月前被插件安装损坏了。

# asp.net - 如何检查是否为空？

> ID：13471184
> 
> 赞同：0
> 
> 时间：2012-11-20T10:26:39.063
> 
> 标签：asp.net, null, isnull, isnullorempty

我在 aspx 文件中有以下代码。当我的查询返回 0 行或 null 时，我想显示一条消息。我如何检查这个是否正确，因为我的示例没有捕获空值。

```
 protected void search_Click(object sender, EventArgs e)
    {
        string searchItem;
        searchItem = "Select * FROM test WHERE (name like '%"+searchTxt.Text.ToString()+"%')";
        SqlDataSource.SelectCommand = searchItem;    
        if (SqlDataSource.SelectCommand == null)
            hiddenMsg.Visible = true;
        else
            SqlDataSource.SelectCommand = searchItem;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:37:20.173

```
int count = Convert.ToInt32(cmd.ExecuteScalar());
        if (count == 0)
        {
             display your message that no rows returned
        }
        else {
           display rows returned
       } 
```

请享用

# javascript - Google Street View API v3：如何避免在 Firefox 上出现“鱼眼”效果？（鱼眼效果）

> ID：13471195
> 
> 赞同：1
> 
> 时间：2012-11-20T10:27:20.547
> 
> 标签：javascript, firefox, google-chrome, google-api, google-street-view

我正在使用谷歌地图 API V3，但无法在 Firefox 中正确显示街景。我总是得到“鱼眼”视图（谷歌浏览器不会发生）。

所以我认为问题来自Firefox。

我看了看街景选项，但一无所获。

我想知道是否可以选择平坦的街景，或者是因为 Firefox 不支持这种功能。

如果有人可以向我解释，我将不胜感激。

下面，它在 Firefox 中的外观：

![光学的](../Images/b61c3f1b4541a26fb5f6b0148a1c50bd.png)

它在 Chrome 中的外观：

![Chrome 没问题](../Images/57a0623c161d8d15e51768de7389cb66.png)

自从我从事这个项目一周以来，我没有找到解决方案。即使是最小的建议/想法也会受到赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:22:36.957

我找到了一种答案：

*法语论坛，对不起*- 看到这个： http: [//www.developpez.net](http://www.developpez.net/forums/d1094371/webmasters-developpement-web/javascript/bibliotheques-frameworks/apis-google/differences-streetview-v2-v3-fish-eye/)

V3 似乎遇到了麻烦，使用特定的 Chrome/Safari API 或类似的东西。

使用 V2，一切正常。

我们使用 IE8/9、Opera、Chrome、FF 和 Safari 进行了测试，只有 Chrome 和 Safari 能够正确呈现。

如果该项目继续进行并收集到更多信息，我将完成此“帖子”。

编辑

请参阅标题为“Provide an API to report when Street View has HTML4 fisheye”的[Google 问题](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4041)，它解释了这是一个 HTML5 到 HTML4 渲染问题。

因此，除了仅使用特定浏览器或仅使用 V2 之外，没有解决此问题的方法，这就是我们在这里要做的。

感谢所有查看此问题的人，如果您发现不同之处，请在此处告诉它以帮助需要它的人:)

# jsf - FileDownload 和 FileUpload JSF Primefaces 不工作

> ID：13471199
> 
> 赞同：8
> 
> 时间：2012-11-20T10:27:34.067
> 
> 标签：jsf, primefaces

我正在使用 PrimeFaces 3.1.2、NetBeans 7.2、JSF 2.1 和 GlassFish 3.1.2。

我正在使用从[http://www.primefaces.org/showcase/ui/fileUploadAuto.jsf](http://www.primefaces.org/showcase/ui/fileUploadAuto.jsf) 和[http://www.primefaces.org/showcase/ui/fileDownload.jsf](http://www.primefaces.org/showcase/ui/fileDownload.jsf)获得的实际代码。

当我运行文件上传代码时，它根本不起作用。该文件没有上传，也没有显示成功消息。但是如果文件大小超过提到的大小，则会显示文件大小太大的消息。

这是我的看法：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
    <h:head>
    </h:head>
    <h:body>
        <h:form enctype="multipart/form-data">
            <p:fileUpload fileUploadListener="#{fileUploadController.handleFileUpload}"
                mode="advanced"
                update="messages"
                auto="true"
                sizeLimit="100000" 
                allowTypes="/(\.|\/)(gif|jpe?g|png)$/"/>
            <p:growl id="messages" showDetail="true"/>
        </h:form>
    </h:body>
</html> 
```

这是我的支持bean：

```
package com;

import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.context.FacesContext;
import org.primefaces.event.FileUploadEvent;

@ManagedBean
@SessionScoped
public class FileUploadController {
    public void handleFileUpload(FileUploadEvent event) {
        FacesMessage msg = new FacesMessage("Succesful",   event.getFile().getFileName() + " is uploaded.");
        FacesContext.getCurrentInstance().addMessage(null, msg);
    }
} 
```

它与 PrimeFaces 展示页面中的代码基本相同。

与文件下载代码类似；当我点击下载时没有任何反应。一个弹出窗口在我注意到它之前打开和关闭。如获取资源流（用于下载部分）中所述，我已准备好图像文件，但我不知道问题出在哪里。代码也与 PrimeFaces 展示页面中的代码基本相同。

我在 Netbeans 的 Glassfish 下看不到任何日志或错误。如果需要，我也不知道如何启用日志记录。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T11:19:55.147

您需要的第一件事是将一些库添加到您的应用程序中。事实上，PrimeFaces 文件上传依赖于 Apache commons-file-upload 和 commons-io 库。所以下载它们并将它们添加到您的 WEB-INF/lib 路径：

您可以从以下链接下载它。

[http://commons.apache.org/io/](http://commons.apache.org/io/)

[http://commons.apache.org/fileupload/](http://commons.apache.org/fileupload/)

此外，您必须将其配置到 web.xml

```
<filter>
  <filter-name>PrimeFaces FileUpload Filter</filter-name>
  <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
  <init-param>
    <param-name>thresholdSize</param-name>
    <param-value>51200</param-value>
  </init-param>
  <init-param>
    <param-name>uploadDirectory</param-name>
    <param-value>C:\etc</param-value>
   </init-param>
</filter>
<filter-mapping>
  <filter-name>PrimeFaces FileUpload Filter</filter-name>
  <servlet-name>Faces Servlet</servlet-name>
</filter-mapping> 
```

此外，如果您想以编程方式设置更改上传文件的目标，请查看：

[PrimeFaces FileUpload 文件保存目的地](https://stackoverflow.com/questions/4358493/j2ee-primefaces-fileupload-file-saving-destination)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T10:38:29.517

为了能够使用 xhtml 中的 bean，您需要将控制器注释为 @ManagedBean 并设置一些范围。在这种情况下，最好使用 @ViewScoped 或 @RequestScoped。

例子：

```
@ManagedBean
@ViewScoped
public class FileUploadController {

    public void handleFileUpload(FileUploadEvent event) {
        FacesMessage msg = new FacesMessage("Succesful",     event.getFile().getFileName() + " is uploaded.");
        FacesContext.getCurrentInstance().addMessage(null, msg);
    }
} 
```

在此处了解有关 jsf 托管 bean 如何工作的更多信息：[http ://www.mkyong.com/jsf2/configure-managed-beans-in-jsf-2-0/](http://www.mkyong.com/jsf2/configure-managed-beans-in-jsf-2-0/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T13:08:35.463

我注意到的一件事是，如果您没有在标签“allowTypes”内正确放置正则表达式，“fileupload”元素不会触发该操作，给人的印象是该操作无法访问。

I know that this is not your problem right now, but I think it is important to share this information.

# php - Error in showing configurable product

> ID：13471203
> 
> 赞同：-1
> 
> 时间：2012-11-20T10:27:43.083
> 
> 标签：php, magento, e-commerce, magento-1.7

Am creating magento configurable products as in the below link

[http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-configurable-product](http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-configurable-product)

But when am clicking the drop down list (in my figure)

![enter image description here](../Images/46cdfce2ff00b34e4fee880342e03a79.png)

ie when clicking the dropdown it will only show the **choose an option**

**But am adding colors as red ,blue and size as small,meadium in back end**

please help me

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:51:02.160

尝试在您的系统上执行此操作，它应该是相同的：

```
grep -RTi 'Choose an Option...' ./app/
./app/code/local/Couturelab/Configurable/Block/Product/View/Type/Configurable.php  : 
    'chooseText'        => Mage::helper('catalog')->__('Choose an Option...'),
./app/code/core/Mage/Catalog/Block/Product/View/Type/Configurable.php  :
    'chooseText'        => Mage::helper('catalog')->__('Choose an Option...'),
./app/design/frontend/base/default/template/catalog/product/view/type/options/configurable.phtml  :
    <option><?php echo $this->__('Choose an Option...') ?></option> 
```

更改值的最佳方法是通过 Javascript，但您也可以直接更改值，如果这对您有用，那么您可以将文件扩展/移动到您自己的命名空间。

# symfony - implement impersonate in symfony2 without editing security.yml

> ID：13471205
> 
> 赞同：0
> 
> 时间：2012-11-20T10:27:49.370
> 
> 标签：symfony, impersonation

I want to implement impersonate in symfony2 without editing `security.yml` file. How can I do that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:48:15.960

不知道为什么需要这样做，但如果需要，我会看看 SecurityBundle 如何实现此功能并实现我自己的版本。

[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Security/Http/Firewall/SwitchUserListener.php](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Security/Http/Firewall/SwitchUserListener.php)

创建您自己的内核侦听器，使用您自己的自定义入口点模仿此功能。

# c# - How to run process of internet connected computer?

> ID：13471210
> 
> 赞同：0
> 
> 时间：2012-11-20T10:27:57.340
> 
> 标签：c#

is it possible to run process of internet connected (not connected locally) computer using psexec or WMI or any other way? i have IP address username and password of remote computer. psexec or WMI works fine in local network.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:40:12.170

要使用 Windows Management Instrumentation 或 PSEXEC 服务等功能，您必须尝试连接到在同一域/网络上运行的远程计算机。

# javascript - Using iframe in windows 8 metro app

> ID：13471217
> 
> 赞同：3
> 
> 时间：2012-11-20T10:28:30.087
> 
> 标签：javascript, iframe, windows-8

I'm trying to use iframe in windows 8 metro style app built using java-script. iframe url is a different domain url. The following errors I'm getting:

```
APPHOST9603: Can’t load the ActiveX plug-in
that has the class ID '{D27CDB6E-AE6D-11CF-96B8-444553540000}'.
Apps can't load ActiveX controls. File: www.trendstagram.com 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:17:50.780

看起来您在 iframe 中引用的页面包含插件。您无法在包含插件的 Windows 应用商店应用中显示页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:25:31.093

尝试在 javascript 中创建 iframe 并以编程方式分配 src 属性。这往往有助于 WinJS 允许将动态元素注入到您的 DOM 中。

# c# - 使用正则表达式获取括号中的文本

> ID：13471223
> 
> 赞同：0
> 
> 时间：2012-11-20T10:28:43.617
> 
> 标签：c#, .net, regex

我必须解析一些可能如下所示的字符串：

```
"some text {{text in double brackets}}{{another text}}..." 
```

如何使用正则表达式从双括号中提取文本作为 C# 中的字符串数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T10:31:50.143

使用这个字符串

```
@"\{\{([^}]*)\}\}" 
```

对于你的正则表达式

```
var inputText = "some text {{text in double brackets}}{{another text}}...";

Regex re = new Regex(@"\{\{([^}]*)\}\}");

foreach (Match m in re.Matches(inputText))
{
    Console.WriteLine(m.Value);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T10:36:00.123

```
string input = @"some text {{text in double brackets}}{{another text}}...";
var matches = Regex.Matches(input, @"\{\{(.+?)\}\}")
                    .Cast<Match>()
                    .Select(m => m.Groups[1].Value)
                    .ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T10:38:39.953

要从括号内获取实际文本，请使用命名组

```
var r = new Regex(@"{{(?<inner>.*?)}}", RegexOptions.Multiline);
foreach(Match m in r.Matches("some text {{text in double brackets}}{{another text}}..."))
{
    Console.WriteLine(m.Groups["inner"].Value);
} 
```

# iphone - 应用程序是否需要询问用户偏好才能使用 iCloud 获取简单数据？

> ID：13471224
> 
> 赞同：1
> 
> 时间：2012-11-20T10:28:50.617
> 
> 标签：iphone, ios, ipad, core-data, icloud

我们目前正在开发一个应用程序，并希望使用 iCloud 跨设备同步收藏夹。收藏夹相当轻巧，只有文字。我们是否需要征求用户使用 iCloud 的许可，或者我们是否可以直接继续使用 iCloud（如果可用）？

我已经设置了所有 iCloud 同步代码。所以更多的是关于AppStore提交规则的问题。有什么经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:35:53.073

Apple 指南规定您应该邀请用户使用 iCloud，并让他们选择是否要使用它。（[文档](https://developer.apple.com/library/ios/#documentation/General/Conceptual/iCloudDesignGuide/Chapters/iCloudFundametals.html#//apple_ref/doc/uid/TP40012094-CH6-SW1)，请参阅“准备您的应用程序以使用 iCloud”）。

根据[App Store Review Guidelines](https://developer.apple.com/appstore/resources/approval/guidelines.html)，没有具体的规则说明您**需**要这样做，它更多的是指导和礼貌。不过，我建议您这样做，它可以提供更好的用户体验和满意的客户。

**为什么我仍然需要许可？**

用户只有有限的存储空间（通常是 5GB 限额），如何使用取决于他们。如果所有应用程序都决定在未经许可的情况下使用 iCloud，那将是免费的，而且空间会很快被吃掉。

# javascript - IE 6.0 'could not set the selected property' bug worked around but item disappearing from autocomplete list

> ID：13471226
> 
> 赞同：1
> 
> 时间：2012-11-20T10:28:57.143
> 
> 标签：javascript, jquery, internet-explorer-6, jquery-autocomplete

I'm using the standard JQuery Autocomplete with jquery-1.7.2.js in a .net site When on IE 6.0 the known bug 'Could not set the selected property. Unspecified error.' is hit.

One of the many workarounds is in place for this i.e. on select :

```
select: function (event, ui) {

//-------------- [ IE 6 Fixes ] ------------------
if ($.browser.msie && (jQuery.browser.version == '6.0')) {
   var id = $(select).attr('id');
   $.each(select.children(), function (index, val) {
   if ($(val).attr('value') == ui.item.option.value) {
 document.getElementById(id).selectedIndex = index;
                                }
                            });
                        }
                        try { ui.item.option.selected = true; } catch (e) { }
                        try { self._trigger("selected", event, { item: ui.item.option }); } catch (e) { }
                        //--------------------------------------------------- 
```

However when the error is hit in an IE 6.0 browser I'm losing the top item in my drop down list (364 items becomes 363 and the 1st item is notthere). It seems to be related to hitting this bug although nothing I've read has mentioned this kind of side effect.

Anyone know about this?

$('select#Tests').children().length gives me my list 364 long. After I hit the error (code above catches and ignores it) it returns 363 and the first item is missing.

# structuremap - 将缓存模式从 Structuremap 转换为 AutoFac

> ID：13471230
> 
> 赞同：1
> 
> 时间：2012-11-20T10:29:18.373
> 
> 标签：structuremap, autofac

我正在从结构图切换到 Autofac。我使用了 Scott Millett 的书 ASP.net Design Patterns 中的缓存模式，它实现了 Cache 和 Repository 的接口，并根据构造函数参数名称在适当的对象中切换

界面看起来像这样

```
public interface ISchemeRepository
{
        List<Scheme> GetSchemes();
} 
```

缓存对象如下所示

```
public class SchemeRepository : BaseRepository, ISchemeRepository
{
/***************************************************************
 *  Properties
 ***************************************************************/ 
```

私有只读 ISchemeRepository 方案存储库；

```
/***************************************************************
 *  Constructors
 ***************************************************************/
public SchemeRepository()
    : this(ObjectFactory.GetInstance<ISchemeRepository>(), ObjectFactory.GetInstance<IConfigurationSetting>())
{
}

public SchemeRepository(ISchemeRepository realSchemeRepository, IConfigurationSetting configurationSetting)
{
    schemeRepository = realSchemeRepository;
    this.configurationSetting = configurationSetting;
}

/**************************************************************
 *  Methods
 ***************************************************************/
public List<Scheme> GetSchemes()
{
    string key = Prefix + "Schemes";

    if (!MemoryCache.Default.Contains(key))
    {
        MemoryCache.Default.Add(key, schemeRepository.GetSchemes(), new CacheItemPolicy());
    }

    return (List<Scheme>)MemoryCache.Default.Get(key);
} 
```

}

存储库看起来像这样

```
 public class SchemeRepository : BaseLocalRepository, ISchemeRepository
    {
        /***************************************************************
         *  Properties
         ***************************************************************/
        private readonly IConnectionSetting connectionSetting;

        /***************************************************************
         *  Constructors
         ***************************************************************/
        public SchemeRepository()
            : this(ObjectFactory.GetInstance<IConnectionSetting>())
        {
        }

        public SchemeRepository(IConnectionSetting connectionSetting)
        {
            this.connectionSetting = connectionSetting;
        }

        /**************************************************************
         *  Methods
         ***************************************************************/
        public List<Scheme> GetSchemes()
        {
            var response = new List<Scheme>();

            var conn = new SqlConnection(connectionSetting.CQBConnectionString);
            var command = new SqlCommand("proc_GetSchemes", conn) { CommandType = CommandType.StoredProcedure };

            conn.Open();
            var reader = command.ExecuteReader();
            while (reader.Read())
            {
                response.Add(
                        new Scheme
                        {
                            SchemeId = reader["Scheme_Id"].ToString().Trim(),
                            GuaranteeText = reader["Guarantee_Text"].ToString().Trim()
                        }
                    );
            }
            conn.Close();

            return response;         
        }

    } 
```

结构图调用如下

```
 InstanceOf<Repository.Local.Contract.IProviderRepository>().Is.OfConcreteType<Repository.Local.Core.ProviderRepository>().WithName("RealProviderRepository");

ForRequestedType<Repository.Local.Contract.IProviderRepository>().TheDefault.Is.OfConcreteType<Repository.Local.Cache.ProviderRepository>().CtorDependency<Repository.Local.Contract.IProviderRepository>().Is(x => x.TheInstanceNamed("RealProviderRepository")); 
```

结构映射查看构造函数，如果它包含一个名为“realSchemeRepository”的参数，则它实现连接到数据库的对象，如果没有，它实现检查缓存的缓存对象，如果缓存中没有任何内容，则调用数据库并填充缓存。

如何在 Autofac 中执行此操作？在 Autofac 中有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:50:59.173

我相信您要问的是如何在两个存储库类之间设置一个装饰器。我会假装这两个类名是 CacheSchemeRepository 和 RealSchemeRepository 因为将它们命名为完全相同会令人困惑和可怕。无论如何...

```
builder.Register(c => new RealSchemeRepository(c.Resolve<IConnectionSetting>())
       .Named<ISchemeRepository>("real");

builder.RegisterDecorator<ISchemeRepository>(
    (c, inner) => new CacheSchemeRepository(inner, c.Resolve<IConfigurationSetting>()),
    "real"); 
```

# memory - memory leaks in Corona Apps

> ID：13471231
> 
> 赞同：0
> 
> 时间：2012-11-20T10:29:19.077
> 
> 标签：memory, memory-management, memory-leaks, coronasdk

I have released all the display objects and my every scene got destroyed after executing. I have multiple screens in app and I am using storyboard for transactions. When I made transaction from one to another very slightly memory usage increased, but if I run my app for a long time , it starts hanging and sometimes respond very slowly.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:23:16.387

运行故事板示例时会发生这种情况吗？如果是这样，您应该提交错误报告并同时考虑使用 Director 作为替代方案。如果不是，您应该仔细检查您的代码，以确保您正确处理精灵表、音频等，并且您没有使用全局变量。

# svn - How to manage your SVN branch for a website?

> ID：13471236
> 
> 赞同：0
> 
> 时间：2012-11-20T10:29:33.390
> 
> 标签：svn, web-applications

We have a web app and we are 10 developers working on it.

This is our current branching strategy :

*   A trunk branch connected to TeamCity for deploying in our Q&A server
*   A release branch connected to TeamCity for deploying to our live server.

Where we want to take our change from Q&A to live we to a revision merge and we select our revisions.

And this is working most of the times. But in bigger project we have a lot of conflict and we don't really understand why.

I think the main problem behind these conflicts is the revision merging.

So I'd prefer a branch merging but I can't find something that is appropriate to our situation. A Branch per development effort wouldn't resolve our problem :

*   we code in the "FeatureXXX" branch then merge it to the trunk. Q&A does its job. But what happens when we want to merge Q&A to Live ? revision merging again (because we don't want to merge every Feature to the live branch only the XXX)!
*   we code in the featureXXX branch then merge it to live but this remove the Q&A stage ...

Maybe there is a nice tool for merging revision without pain.

Env : c#.net , tortoisesvn, windows 7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:18:19.960

也许这对你来说是全新的，但是：

**您可以在任意时间将一个源合并到不同的目标**

即之后

`svn merge ^/branches/FeatureA ; commit -m "Merged FeatureA intro trunk"`在主干-WC

和 QA 游戏

`svn merge ^/branches/FeatureA ; commit -m "FeatureA pass QA-tests"`在 ReleaseBranch-WC

完全有效

# c# - Add user to Active Directory group with start and end date

> ID：13471237
> 
> 赞同：1
> 
> 时间：2012-11-20T10:29:35.963
> 
> 标签：c#, .net, active-directory, activedirectorymembership, active-directory-group

I'm searching for a solution for **adding a user account to a security group or to a distribution list in Active Directory** but with a **membership start and end date**. We are managing the AD through a 3rd party console called Quest Active Roles console and this can add a user temporary to a security group but i have to do this **from a .NET application**. As i can see the .NET directory services can not do this.

Any idea?

# ios - 是否可以在 .IPA 中提供用户文件？

> ID：13471238
> 
> 赞同：0
> 
> 时间：2012-11-20T10:29:41.127
> 
> 标签：ios, permissions, ipa, ad-hoc-distribution, nsdocumentdirectory

我有一个想要分发给用户的 IPA。IPA 包含一些用户数据，应在首次安装时将其移至文档目录。

我的问题是我可以从资源目录复制文件但不能删除它，这意味着数据将在设备上出现两次。

是否有可能将数据包含在安装时放入文档文件夹的 IPA 中？或者是否有任何文件夹可以添加到 IPA 中，我可以使用写入权限访问而无需越狱设备？

我查看了文档，但找不到有关该主题的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:38:44.390

你不能那样做。我相信你想多了。如果数据量小于设备上的两倍，则不会有任何问题。如果数据量大，应该放在服务器上，安装后下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T10:38:06.180

不，这是不可能的。应用程序包中的所有数据都是只读的，因此不能修改。

# xml - OSM export to XML

> ID：13471239
> 
> 赞同：-1
> 
> 时间：2012-11-20T10:29:42.437
> 
> 标签：xml, export, converter, openstreetmap

I have looked through all 144 (at time of post) OSM related questions on stack-overflow and cannot find what im looking for.

I Have a very specific set of .osm files i would like to export to XML format, i have looked through the tools offered on Wikipedia and maybe I am understanding them wrong.

(Importing it to SQL, or any readable format is also perfect)

Could anybody be of assistance in pointing me to an extractor/converter and if possible a small example of the command-line needed?

Thank you in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:09:30.517

我不确定，我理解你的问题，因为 osm 也是一个 xml 文件。如果你用一个简单的文本编辑器打开它，你会看到。如果你想连接它们（正如你提到的，你有一组 osm 文件）你应该使用一个叫做 osmosis 的工具。（详情：[http](http://wiki.openstreetmap.org/wiki/Osmosis) ://wiki.openstreetmap.org/wiki/Osmosis ）

# c++ - rand() 函数 C++

> ID：13471241
> 
> 赞同：0
> 
> 时间：2012-11-20T10:29:45.603
> 
> 标签：c++, class, random, srand, beam-search

我需要生成 4 个随机数，每个随机数在 [-45 +45] 度之间。如果 rand%2 = 0 那么我想要结果（生成的随机数等于 -angle）。一旦生成了 4 个随机数，就需要扫描这些角度并找到一个锁（角度相交的点）。if 语句中循环中的 -3,-2,-1,... +3 表示锁定发生在 6 度波束宽度内。代码有效。但是可以简化吗？目标也是通过扫描两个点的仰角和方位角在两个点之间建立锁定。

```
 #include <iostream>
  #include <conio.h>
  #include <time.h>
  using namespace std;

  class Cscan
  {
    public:
    int gran, lockaz, lockel;

  };

  int main()
  {
     srand (time(NULL));
    int az1, az2, el1, el2, j, k;

    BS1.lockaz = rand() % 46;
    BS1.lockel = rand() % 46;
    BS2.lockaz = rand() % 46;
    BS2.lockel = rand() % 46;

    k = rand() % 2;
    if(k == 0)
            k = -1;
    BS1.lockaz = k*BS1.lockaz;

    k = rand() % 2;
    if(k == 0)
            k = -1;
    BS1.lockel = k*BS1.lockel;

            k = rand() % 2;
    if(k == 0)
            k = -1;
    BS2.lockaz = k*BS2.lockaz;

    k = rand() % 2;
    if(k == 0)
            k = -1;
    BS2.lockel = k*BS2.lockel;

    for(az1=-45; az1<=45; az1=az1+4)
    {
            for(el1=-45; el1<=45; el1=el1+4)
            {
                    for(az2=-45; az2<=45; az2=az2+4)
                    {
                            for(el2=-45; el2<=45; el2=el2+4)
                            {

           if((az1==BS1.lockaz-3||az1==BS1.lockaz-2||az1==BS1.lockaz-1||az1==BS1.lockaz||az1==BS1.lockaz+1||az1==BS1.lockaz+2||az1==BS1.lockaz+3)&&

           (az2==BS2.lockaz-3||az2==BS2.lockaz-2||az2==BS2.lockaz-1||az2==BS2.lockaz||az2==BS2.lockaz+1||az2==BS2.lockaz+2||az2==BS2.lockaz+3)&&

           (el1==BS1.lockel-3||el1==BS1.lockel-2||el1==BS1.lockel-1||el1==BS1.lockel||el1==BS1.lockel+1||el1==BS1.lockel+2||el1==BS1.lockel+3)&&

            (el2==BS2.lockel-3||el2==BS2.lockel-2||el2==BS2.lockel-1||el2==BS2.lockel||el2==BS2.lockel+1||el2==BS2.lockel+2||el2==BS2.lockel+3))
                                    {      
             cout << "locked \n" << BS1.lockaz << " " << BS1.lockel << " " << BS2.lockaz << " " << BS2.lockel <<endl
              < az1 << " " << el1 << " " << az2 << " " << el2 << endl;
                                                    k = 1;
                                            break;
                                    }
                                    if(k==1)
                                            break;
                            }
                            if(k==1)
                                    break;
                    }
                    if(k==1)
                            break;
            }
            if(k==1)
                    break;
    }
    _getch();
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:39:08.897

```
BS1.lockaz = rand() % 91 - 45;
BS1.lockel = rand() % 91 - 45;
BS2.lockaz = rand() % 91 - 45;
BS2.lockel = rand() % 91 - 45; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:38:06.673

以度为单位的整数角？非常值得怀疑。像角度这样“物理”的东西通常最好用浮点数表示，所以我先改变

```
typedef double angle;

struct Cscan {  // why class? This is clearly POD
  int gran; //I don't know what gran is. Perhaps this should also be floating-point.
  angle lockaz, lockel;
}; 
```

乍一看，这似乎使它变得更加困难，因为带有随机范围选择的随机范围选择`%`不再有效，也没有太多用处来比较浮点数是否相等。*然而，这是一件好事*，因为所有这些实际上都是非常糟糕的做法。

如果您想继续`rand()`用作随机数生成器（尽管我建议`std::uniform_real_distribution`），请编写一个函数来执行此操作：

```
const double pi = 3.141592653589793;  // Let's use radians internally, not degrees.
const angle rightangle = pi/2.;      //  It's much handier for real calculations.

inline angle deg2rad(angle dg) {return dg * rightangle / 90.;}

angle random_in_sym_rightangle() {
  return rightangle * ( ((double) rand()) / ((double) RAND_MAX) - .5 );
} 
```

现在你就做

```
BS1.lockaz = random_in_sym_rightangle();
BS1.lockel = random_in_sym_rightangle();
BS2.lockaz = random_in_sym_rightangle();
BS2.lockel = random_in_sym_rightangle(); 
```

然后你需要做这个范围检查。这又是一个专门的功能

```
bool equal_in_margin(angle theta, angle phi, angle margin) {
  return (theta > phi-margin && theta < phi+margin);
} 
```

然后你对锁进行详尽的搜索。这绝对可以更有效地完成，但这是一个算法问题，与语言无关。坚持`for`循环，您仍然可以通过避免这种显式的中断检查来使它们看起来更好。一种方法很老`goto`，我建议你把它放在一个额外的函数中，完成后返回

```
#define TRAVERSE_SYM_RIGHTANGLE(phi) \
  for ( angle phi = -pi/4.; phi < pi/4.; phi += deg2rad(4) )

int lock_k  // better give this a more descriptive name
      ( const Cscan& BS1, const Cscan& BS2, int k ) {
  TRAVERSE_SYM_RIGHTANGLE(az1) {
    TRAVERSE_SYM_RIGHTANGLE(el1) {
      TRAVERSE_SYM_RIGHTANGLE(az2) {
        TRAVERSE_SYM_RIGHTANGLE(el2) {
          if( equal_in_margin( az1, BS1.lockaz, deg2rad(6.) )
               && equal_in_margin( el1, BS1.lockel, deg2rad(6.) )
               && equal_in_margin( az2, BS1.lockaz, deg2rad(6.) )
               && equal_in_margin( el2, BS2.lockel, deg2rad(6.) ) ) {
            std::cout << "locked \n" << BS1.lockaz << " " << BS1.lockel << " " << BS2.lockaz << " " << BS2.lockel << '\n'
               << az1 << " " << el1 << " " << az2 << " " << el2 << std::endl;
            return 1;
          }
        }
      }
    }
  }
  return k;
} 
```

# jquery - JQuery Sortable 不适用于 div 和图像

> ID：13471244
> 
> 赞同：0
> 
> 时间：2012-11-20T10:29:52.700
> 
> 标签：jquery, html, jquery-ui

我有一个固定布局的网页。这是我的HTML，

**html**

```
<div id="sortable" style="display: block;">   
    <fieldset style="float: left;">
         <table>
             <tbody>
                 <tr>               
                     <td><a href="#"><img src="Data/Images/2012_08_12_00_47_53_4753.jpg" style="border-color:#DDDDDD;border-width:2px;border-style:solid;width:50px;margin-left: 10px"></a></td>
                     <td><a href="#"><img src="Data/Images/2012_08_12_00_47_54_4754.png" style="border-color:White;border-width:2px;border-style:solid;width:50px;margin-left: 10px"></a></td>
                     <td><a href="#"><img src="Data/Images/2012_08_12_00_47_55_4755.jpg" style="border-color:White;border-width:2px;border-style:solid;width:50px;margin-left: 10px"></a></td>
                     <td><a href="#"><img src="Data/Images/2012_08_12_00_47_56_4756.jpg" style="border-color:White;border-width:2px;border-style:solid;width:50px;margin-left: 10px"></a></td>
                </tr>
            </tbody>
        </table>
    </fieldset>
</div>​ 
```

现在在我的页面上，我想包含 jquery 可排序选项。我试过但失败了。这是我尝试过的：

**jQuery**

```
$( "#sortable" ).sortable();​ 
```

[http://jsfiddle.net/JXqst/9/](http://jsfiddle.net/JXqst/9/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:37:02.663

这是你想要的哥们。

参考[这个](http://jsfiddle.net/JXqst/2/)。

当您排序时，`td`您`tr`的 id 应为`sortable`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T10:31:46.580

你必须像这样改变你的js

```
$( "#sortable table tr" ).sortable();​ 
```

[演示](http://jsfiddle.net/JXqst/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T10:50:21.723

您也可以使用列表代替表格。然后你可以使用这个：

```
function setSortableDefault(list) 
{
    $(list).sortable({ opacity: 0.6, cursor: 'move', update: function() {
        var order = $(this).sortable("serialize") + '&action=updateRecordsListings'; 
        $.post("sortDefault.php", order, function(theResponse){
            //$("#result").html(theResponse);
        });                                                              
    }                                 
    });
} 
```

这个函数设置列表定义为*列表*排序，当你移动元素时，它变得有点透明，准备订单并做一些PHP脚本（这里是sortDefault.php）。它是用于对界面和数据库中的元素进行排序的脚本的典型示例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T10:59:55.533

`Sortable`有可以传递的 som 参数。

你可以通过定位`tr`元素来做到这一点

```
$("tr", "#sortable" ).sortable(); 
```

或者为了获得更高的性能和对`td`元素的限制

```
$("tr", "#sortable" ).sortable({
    items: "td"
});​ 
```

我已经更新了你的 jsfiddle [http://jsfiddle.net/DoubleYo/JTmrT/](http://jsfiddle.net/DoubleYo/JTmrT/)

# ruby-on-rails - RSpec/Mongoid 继承的默认值完全不同导致测试/开发

> ID：13471246
> 
> 赞同：0
> 
> 时间：2012-11-20T10:30:04.013
> 
> 标签：ruby-on-rails, inheritance, rspec, mongoid

这是让您认为自己要发疯的那些之一...

我有一个类 Section，以及一个从它继承的 DraftSection：

*（为简洁起见）*

```
class Section
  include Mongoid::Document

  belongs_to :site

  field :name, type: String
end 
```

和

```
class DraftSection < Section
  field :name, type: String, default: "New Section"
end 
```

所有简单的东西......控制台证明*（再次，为简洁起见）*：

```
004 > site = Site.first
 => #<Site _id: initech, name: "INITECH"> 
005 > site.sections.build
 => #<Section _id: 1, site_id: "initech", name: nil> 
006 > site.draft_sections.build
 => #<DraftSection _id: 2, site_id: "initech", name: "New Section"> 
```

如您所见 - 草稿部分名称正确默认为“新部分”，因为它在子类中被覆盖。

现在当我运行这个规范时：

```
describe "#new" do
  it "should return a draft section" do
    get 'new', site_id: site.id, format: :json
    assigns(:section).should == "Something..."
  end
end 
```

哪个测试这个控制器方法：

```
def new
  @section = @site.draft_sections.build
  respond_with @section
end 
```

失败了（如预期的那样），但是这样：

```
Failure/Error: assigns(:section).should == "Something..."
   expected: "Something..."
        got: #<DraftSection _id: 1, site_id: "site-name-4", name: nil> (using ==) 
```

是什么赋予了？？？

更新：

我认为这可能是不同环境设置的问题，所以我查看了 mongoid.yml 配置文件并在选项中看到了这一点：

```
# Preload all models in development, needed when models use
# inheritance. (default: false)
preload_models: true 
```

我也将它添加到测试环境设置中，但仍然没有乐趣:(

更新 2 - 情节变厚...

以为我会尝试在测试环境中加载控制台并尝试与以前相同的方法：

```
001 > site = Site.first
 => #<Site _id: initech, name: "INITECH"> 
002 > site.draft_sections.build
 => #<DraftSection _id: 1, site_id: "initech", name: "New Section"> 
```

怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:40:23.317

好的，没有人在听，但无论如何我都会在这里发布解决方案以供将来参考......

出于某种原因，前段时间我有一个调试会话，这意味着我把这段代码留在了我的 Spork.each_run 块中

```
 # Reload all model files when run each spec
  # otherwise there might be out-of-date testing
  # require 'rspec/rails'
  Dir["#{Rails.root}/app/controllers//*.rb"].each do |controller|
    load controller
  end
  Dir["#{Rails.root}/app/models//*.rb"].each do |model|
    load model
  end
  Dir["#{Rails.root}/lib//*.rb"].each do |klass|
    load klass
  end 
```

这导致模型在每次运行规范时重新加载。毫不奇怪，这搞砸了在规范运行时在内存中设置类的方式。

绝对解释了为什么调试起来如此困难......

因此，对于未来仅在 Rspec 中存在类似继承问题的谷歌用户 - 确保测试堆栈中的任何地方都没有重新加载模型。

# ajax - Ajax POST with DOJO 1.8.1

> ID：13471250
> 
> 赞同：0
> 
> 时间：2012-11-20T10:30:24.997
> 
> 标签：ajax, dojo

I'm try to POST data with ajax by using [DOJO(v. 1.8.1)](https://dojotoolkit.org/documentation/tutorials/1.8/ajax/)

```
request.post("http://someweb.com/service", {
    headers: {
        "Content-Type": "application/x-www-form-urlencoded"
    },
    handleAs: "text",
    sync: false
}).then(function (text) {
       console.log("The server returned: ", text);
}); 
```

When POST a data it doesn't show a log message in Tab Console of FireBug but shows in Tab Net instead.

![enter image description here](../Images/dafe1985848292f6270191f806df413b.png)

**NOTE** : I'm already require `"dojo/request"` and log `on dojo ready` it's working OK. No any error.

Why it shows in Tab Net and how can I fix it? I have no idea what wrong with my code.

# python - /tmp/python.cache_root 中的多个文件

> ID：13471251
> 
> 赞同：3
> 
> 时间：2012-11-20T10:30:26.790
> 
> 标签：python, caching

在 Raspberry Pi 上运行 Python，我发现我的 /tmp 文件夹随着时间的推移变得满了。经过调查，我发现它充满了 /tmp/python.cache_root/<1>/<2>/ 形式的文件，其中 <1> 和 <2> 是八进制数字。这些文件是在我运行预定的（自行编写的）Python 脚本时创建的。

谷歌搜索“Python 缓存”和相关术语只能找到来自 Maya 或 Django 等框架或产品的结果，这对我没有好处。如果我错过了一个明显的结果，请道歉！

这是草率编码的标志（例如未关闭的资源），还是仅仅是 Python 作为运行脚本的副产品所做的事情？有没有公​​认的方法来处理这个问题？运行`rm -rf /tmp/*`“解决”了问题，重启 Pi 也是如此，但显然这些不是理想的解决方案。

编辑：有人建议`python-twitter`图书馆可能是罪魁祸首，根据[这个错误](http://code.google.com/p/python-twitter/issues/detail?id=232)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T10:53:36.483

您可能正在使用[该`python-twitter`项目](http://python-twitter.googlecode.com)；它创建一个名为 的临时目录`python.cache_<username>`，具有该精确结构（基于 md5 哈希）。

在 Raspberry 上，您通常以 root 身份运行您的代码，所以这很合适。

另一个使用完全相同结构的 python 库是[python-lastfm](http://code.google.com/p/python-lastfm/)；代码显然是在项目之间复制的。这两个项目都出现了一些分叉，因此该方法可能会更加普遍。

# ruby - stdlib Pathname#relative_path_from does not support mixed directory separators on windows

> ID：13471253
> 
> 赞同：1
> 
> 时间：2012-11-20T10:30:28.767
> 
> 标签：ruby, windows

The support for mixing backslashes and forward slashes in the pathname module in the standard library seems to be broken on windows

```
require 'pathname'
base = Pathname.new("c:\\")
filepath = Pathname.new("c:/foo/bar/file.ext")
base.relative_path_from(filepath) 
```

raises `ArgumentError: different prefix: "c:\\" and "c:/foo/bar/file.ext"`

Changing filepath to contain backslashes fixes the problem

```
filepath = Pathname.new("c:\\foo\\bar\\file.ext")
base.relative_path_from(filepath) 
```

`=> #<Pathname:../../..>`

# shell - 从路径中获取文件名

> ID：13471254
> 
> 赞同：4
> 
> 时间：2012-11-20T10:30:37.040
> 
> 标签：shell, unix, awk, cut

我有一个`file.txt`具有以下结构的文件：-

```
./a/b/c/sdsd.c
./sdf/sdf/wer/saf/poi.c
./asd/wer/asdf/kljl.c
./wer/asdfo/wer/asf/asdf/hj.c 
```

如何从路径中仅获取 c 文件名。即，我的输出将是

```
sdsd.c
poi.c
kljl.c
hj.c 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T10:33:17.703

您可以使用 awk 轻松完成此操作。

设置字段分隔符 FS="/" 和 $NF 将打印每条记录的最后一个字段。

```
awk 'BEGIN{FS="/"} {print $NF}' file.txt 
```

或者

```
awk -F/ '{print $NF}' file.txt 
```

或者，您可以像这样使用 cut 和 unix 命令 rev

`rev file.txt | cut -d '/' -f1 | rev`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T10:33:20.070

您可以使用`basename`命令：

```
basename /a/b/c/sdsd.c 
```

会给你sdsd.c

对于 中的文件列表`file.txt`，这将执行以下操作：

```
while IFS= read -r line; do basename "$line"; done < file.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T10:31:59.610

最简单的一个（`$NF`是当前行的最后一列）：

```
awk -F/ '{print $NF}' file.txt 
```

或使用[bash](/questions/tagged/bash "显示标记为“bash”的问题") &[*参数扩展*](http://wiki.bash-hackers.org/syntax/pe)：

```
while read file; do echo "${file##*/}"; done < file.txt 
```

或`bash`与`basename`：

```
while read file; do basename "$file"; done < file.txt 
```

**输出**

```
sdsd.c
poi.c
kljl.c
hj.c 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T10:34:43.007

Perl 解决方案：

```
perl -F/ -ane 'print $F[@F-1]' your_file 
```

您也可以使用 sed：

```
sed 's/.*[/]//g' your_file 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-20T10:37:13.607

使用`sed`：

```
$ sed 's|.*/||g' file
sdsd.c
poi.c
kljl.c
hj.c 
```

# wix - 从二进制文件启动 EXE

> ID：13471256
> 
> 赞同：0
> 
> 时间：2012-11-20T10:30:50.310
> 
> 标签：wix

嗨，我有这两个二进制文件：

```
<Binary Id="Sentinel" SourceFile="sentinel_setup.exe"/>
<Binary Id="Hasp" SourceFile="HASPUserSetup.exe"/> 
```

我想像这样点击按钮来启动它们：

```
<CustomAction Id="LaunchHasp" BinaryKey="Hasp" ExeCommand="" Return="asyncWait" />
<CustomAction Id="LaunchSentinel" BinaryKey="Sentinel" ExeCommand="" Return="asyncWait"/>

<Publish Event="DoAction" Value="LaunchHasp">1</Publish> 
```

但它不起作用，它仅在我以提升的权限从命令行运行安装程序时才起作用。我究竟做错了什么？谢谢

或者有人可以告诉我如何使用 c++ 自定义操作从二进制表中提取文件，因为我根本无法让它工作..:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T15:28:31.870

**即时自定义操作没有提升的权限。**您应该使用**延迟自定义操作**来满足此类需求。应该推迟对估计环境进行更改的任何操作。有关更多详细信息，请阅读本文：[http ://bonemanblog.blogspot.com/2005/10/custom-action-tutorial-part-i-custom.html](http://bonemanblog.blogspot.com/2005/10/custom-action-tutorial-part-i-custom.html)

```
<CustomAction Id="LaunchHasp" Impersonate="no" Execute="deferred" BinaryKey="Hasp" ExeCommand="" Return="asyncWait" /> 
```

尽管延迟的自定义操作是在安装阶段执行的，而不是在按钮单击时执行的。修改您的安装程序逻辑。据我了解，您的 exe 文件“sentinel_setup.exe”会更改系统，因此应在[InstallExecuteSequence中的 InstallInitialize 和 InstallFinalize 事件之间安排](http://msdn.microsoft.com/en-us/library/aa372038%28v=vs.85%29)

我建议添加一个复选框，该用户应标记以安装您的“Hasp”（或用户应在功能树中选择的安装程序功能）。并在此复选框状态上添加带有条件的延迟自定义操作。

有时确实需要在安装程序 UI 序列期间或之前启动管理操作。在这种情况下，您需要创建一个设置引导程序，它要求提升权限并在运行 MSI 进程之前执行所需的操作。要请求权限，您需要将应用程序清单添加到您的引导程序项目中。我的引导程序非常简单，但在许多情况下都有效。它是仅包含图标、应用程序清单和小代码文件的 Windows 应用程序（尽管没有任何 Windows 窗体 - 它允许隐藏控制台窗口）：

```
using System;
using System.Diagnostics;
using System.IO;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace SetupBootstrapper
{
    class Program
    {
        [STAThread]
        static void Main(string[] args)
        {
            var currentDir = AppDomain.CurrentDomain.BaseDirectory;
            var parameters = string.Empty;
            if (args.Length > 0)
            {
                var sb = new StringBuilder();
                foreach (var arg in args)
                {
                    if (arg != "/i" && arg != "/x" && arg != "/u")
                    {
                        sb.Append(" ");
                        sb.Append(arg);
                    }
                }
                parameters = sb.ToString();
            }

            bool isUninstall = args.Contains("/x") || args.Contains("/u");

            string msiPath = Path.Combine(currentDir, "MyMsiName.msi");

            if(!File.Exists(msiPath))
            {
                MessageBox.Show(string.Format("File '{0}' doesn't exist", msiPath), "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
                return;
            }

            string installerParameters = (isUninstall ? "/x" : "/i ") + "\"" + msiPath + "\"" + parameters;

            var installerProcess = new Process { StartInfo = new ProcessStartInfo("msiexec", installerParameters) { Verb = "runas" } };

            installerProcess.Start();
            installerProcess.WaitForExit();
        }
    }
} 
```

# javascript - How to onload two javascript files?

> ID：13471263
> 
> 赞同：0
> 
> 时间：2012-11-20T10:31:04.437
> 
> 标签：javascript

I have two different javascripts. I would like to start a function only after both of those js files or scripts have loaded, because they need to access each other's functions and/or variables.

I don't know which one will load first.

What is the proper way of doing it?

NOTE: one of the scripts (A) loads data asynchronously and the script (B) needs to wait till all the data is loaded and started before it can continue (ex youtube video is loaded from (A) and needs to start playing before (B) can execute)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:33:11.040

`<script>`一般都是同步加载的。文档的评估停止等待，直到脚本被加载并执行。它是这样处理的，因为脚本可能会通过使用类似的东西来干扰文档`document.write()`，因此解析器不能确定文档的其余部分是否保持当时的显示方式。

因此，要在加载脚本后执行您的脚本，只需在`<script>`加载脚本的那两个后面放置一个包含启动代码的第三个标签。

```
<script src="scriptA.js"></script>
<script src="scriptB.js"></script>
<script>
  // start something of scriptB
  scriptB.start();
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T10:39:14.573

由于脚本是同步加载的，只需在这两个文件之后加载执行其功能的脚本即可。无论如何，如果您有依赖项的脚本，我会鼓励您使用模块加载器，例如[RequireJS](http://requirejs.org/)。这样，您可以定义在执行开始之前应该加载哪些模块/文件。

# sql - 我们可以在 AND 条件下执行 select 语句吗（得到错误缺少表达式）

> ID：13471271
> 
> 赞同：0
> 
> 时间：2012-11-20T10:31:19.080
> 
> 标签：sql, oracle10g

我正在构建一个复杂的查询。首先这是我的查询

```
select LOSA_APP.app_ref_no AS "App.Ref.No." 
from losa_app LOSA_APP, 
     losa_app_z LOSA_APP_Z
where 
    LOSA_APP.app_status='A' 
and 
    trunc(sysdate) between (nvl(LOSA_APP_Z.li_dt, LOSA_APP_Z.li_collect_dt)) AND ((trunc(sysdate))) 
and
    (trunc(sysdate) - nvl(losa_app_z.li_dt,losa_app_z.li_collect_dt)) > 90  
and
    (select losa_app_z.app_ref_no 
     from losa_app_z 
     where (trunc(sysdate) - nvl(losa_app_z.li_dt, losa_app_z.li_collect_dt)) > 90
    ) 
```

问题是如果我单独运行最后一个查询或者我省略最后一个查询那么它运行良好，就像我只运行

```
 (select losa_app_z.app_ref_no 
  from losa_app_z 
  where (trunc(sysdate) - nvl(losa_app_z.li_dt, losa_app_z.li_collect_dt)) > 90) 
```

但是如果我运行整个查询，那么我会收到错误

```
ORA-00936: missing expression
00936\. 00000 -  "missing expression"
*Cause:    
*Action:
Error at Line: 7 Column: 128 
```

第 7 行是我的最后一个查询`and (select losa_app_z.app_ref_no from losa_app_z....`所在的行。我做错了什么？请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:38:19.593

您应该比较此查询的结果

```
 and
 (select losa_app_z.app_ref_no 
  from losa_app_z 
  where (trunc(sysdate) - nvl(losa_app_z.li_dt, losa_app_z.li_collect_dt)) > 90
 ) = something_here 
```

对某事。

对于未来，请始终尝试正确管理您的括号。必要时数一数。

# c# - C#如何根据<>字符分割字符串

> ID：13471274
> 
> 赞同：0
> 
> 时间：2012-11-20T10:31:27.923
> 
> 标签：c#, regex

我想用 <> 字符分割我的文本。
示例假设我有一个字符串

```
 string Name="this <link> is my <name>"; 
```

现在我想拆分它，以便我有一个字符串数组

```
ar[0]="this "
ar[1]="<link>"
ar[2]=" is my "
ar[3]="<name>" 
```

我正在尝试使用拆分功能，例如

```
string[] ar=Name.Split('<'); 
```

我也试过

```
 string[] nameArray = Regex.Split(name, "<[^<]+>"); 
```

但这并没有给我

```
 "<link>"
 and "<name>" 
```

但这不是一个好方法。
我可以在这里使用**正则表达式**吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T10:39:35.650

这

```
Regex r = new Regex(@"(?<=.)(?=<)|(?<=>)(?=.)");
foreach (var s in r.Split("this_<link>_is_my_<name>"))
{
    Console.WriteLine(s);
} 
```

给

```
this_
<link>
_is_my_
<name> 
```

（下划线用于清楚）

正则表达式在零宽度点上拆分（因此它不会删除任何内容），即：

*   在某事之前和之后`<`
*   在某事之前`>`和之后

如果您的字符串以括号中的内容开头或结尾，则“某事”检查是必要的，以避免在开头或结尾出现空字符串。

注意类似`"<link<link>>"`会给你的东西，`{ "<link", "<link>", ">" }`所以尽量让你的尖括号平衡。

如果您*想要*空字符串（如果字符串以开头`<`或结尾），`>`您可以使用`(?=<)|(?<=>)`. 如果遇到*中间*`><`要空字符串，我*认为*您需要先拆分`(?=<)`，然后拆分所有结果`(?<=>)`-我*认为*您不能一口气完成。

# javascript - 我们如何只计算一个用户点击链接到给定所有链接的时间

> ID：13471277
> 
> 赞同：1
> 
> 时间：2012-11-20T10:31:37.193
> 
> 标签：javascript, html

我们如何只计算一个用户点击链接到给定所有链接的时间，以及如果他完成 10 次点击给定链接以打开另一个窗口为他接受一些文本数据并保存，我们如何显示该用户的总点击量.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:51:56.817

试试这个代码：

```
<html>
<head>
</head>
<body>
<a href="javascript:void(0)" onclick="countTenClicks()">Click 10 times to open window
</a>
<script>

    var counter = 0;
    function countTenClicks() {
        if (counter > 9) {
            window.open('http://www.google.com');
        }
        else {
            counter++;
        }

    }

</script> 
```

**编辑**

```
<html>
 <head>
<title></title>
 </head>
 <body>
<a href="javascript:void(0)" onclick="countTenClicks(this)" id='link1'>Click 10 times
    to open window link1</a> <a href="javascript:void(0)"    onclick="countTenClicks(this)"
        id='link2'>Click 10 times to open window link2 </a>
<script type="text/javascript">

var link1_counter=0;
var link2_counter=0;
/*
  repeate for 10 links

   var for each link
*/
function countTenClicks(sender){

  var linkID = sender.id;
 switch(linkID)
  {
  case link1:
  if (link1_counter>9)
 {
 window.open('http://www.google.com');
 }
  else
 {
 link1_counter++;
 }
  break;
 case link1:
  if (link2_counter>9)
  {
   window.open('http://www.google.com');
  }
else
 {
 link2_counter++;
 }
  break;
/*
 repeate for 10 links
*/

default:
code to be executed if n is different from case 1 and 2
}

}

</script> 
```

# html - Inserting Div element into TinyMCE in the same line with other text inside

> ID：13471278
> 
> 赞同：1
> 
> 时间：2012-11-20T10:31:43.563
> 
> 标签：html, tinymce, execcommand

I'm trying to insert a div element inside the tinyMCE editor, but each time I insert one it's inserted in a separate line! what I want is to insert the div inline with the text already existing! Can anyone help?

P.S: text is included directly in the editor's body (I've eliminated p elements)

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:38:36.297

Tinymce 需要这些根元素才能对文本行进行样式设置。有几种方法可以消除 onSubmit 上不需要的标签，但这取决于用例。

# android - android.os.Build.SERIAL 是唯一的吗？

> ID：13471283
> 
> 赞同：29
> 
> 时间：2012-11-20T10:31:57.513
> 
> 标签：android, unique

我想为适用于手机和平板电脑的 android 设备使用唯一 ID。（IMEI 不适用于没有 SIM 卡设备，有时 MAC 地址返回 null）

我不确定 android.os.Build.SERIAL 是否唯一。

有人知道吗？

感谢和问候。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-20T10:35:23.140

是的，但请注意，它仅在 API 级别 9 中添加，并且可能不会出现在所有设备上。要在早期平台上获得唯一 ID，您需要读取 MAC 地址或 IMEI 等信息。

通常，尝试阅读*所有*可能的 ID，并使用可用的 ID。[请参阅这篇文章以获得指导](http://android-developers.blogspot.co.uk/2011/03/identifying-app-installations.html)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-10-14T02:58:09.883

您可以使用 Build serial 和 android ID 来制作您自己的唯一 ID。

```
String serial =    Build.SERIAL;
String android_id =Secure.getString(context.getContentResolver(),
                   Secure.ANDROID_ID);

String myKey=serial +android_id ; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-28T13:30:19.660

序列号仅在 API:9 中公开。但是您可以使用反射在旧版本中获得它。但是文档提到“如果可用”，所以我想不要依赖它。

```
String deviceSerial = (String) Build.class.getField("SERIAL").get(
                    null); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-26T08:44:57.067

我认为对于唯一 ID，您应该使用 android ID。以下是获取 Android Id 的代码。

```
String android_id = Secure.getString(this.getContentResolver(),
            Secure.ANDROID_ID);
Log.d("Android","Android ID : "+android_id); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-20T11:38:01.857

**如果**它在那里，那么它应该**是**独一无二的。但不能保证已设置此属性。它也是 API 9。不幸的是，没有简单的方法来唯一地识别设备。像所说的SERIAL这样的一些属性**可以**存在，像ANDROID_ID这样的其他属性不是唯一的，像MAC这样的其他一些属性取决于WIFI的存在或其状态（如果wifi模块关闭，您可能无法读取它的MAC）。即使设备有电话模块，也无法读取 IMEI 等一些设备。所以最好的方法是收集尽可能多的数据，并尝试构建一些你**最有可能**考虑唯一设备 ID 的东西

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-20T10:41:54.567

MAC、IMEI 和 SERIAL 的组合呢？

您只需要处理它们都可能不存在的事实。在没有 SIM 卡的旧手机上。

~~我只是觉得 MAC 会返回 null 很奇怪。恕我直言，这应该是不可能的，因为移动设备没有 MAC 是没有意义的。~~

可能有 2 个 MAC 地址，但在某些情况下它们可能无法访问。

# gnuplot - gnuplot 4.6.1 中的图片质量差

> ID：13471291
> 
> 赞同：0
> 
> 时间：2012-11-20T10:32:18.233
> 
> 标签：gnuplot

我刚刚从 gnuplot 4.4 转移到 4.6.1。不幸的是发现x11终端中的所有图片质量都损失了很多（低分辨率）。在我看来，gnuplot 的配置是错误的（我从源代码编译了 4.6，并且没有应用任何配置选项）。

有没有人遇到过这样的问题？

最好的问候，亚历山大

更新：这里分别是 4.2 和 4.6 的截图： [https ://picasaweb.google.com/102562667690948164683/212012?authkey=Gv1sRgCPj9s7CH1Z3LgAE#5813182842354188578](https://picasaweb.google.com/102562667690948164683/212012?authkey=Gv1sRgCPj9s7CH1Z3LgAE#5813182842354188578)

[https://picasaweb.google.com/102562667690948164683/212012?authkey=Gv1sRgCPj9s7CH1Z3LgAE#5813182919536461282](https://picasaweb.google.com/102562667690948164683/212012?authkey=Gv1sRgCPj9s7CH1Z3LgAE#5813182919536461282)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:49:03.403

wxt 终端确实是您想要的。

它在“配置”脚本中默认启用，因此我假设您在运行它时缺少一个或多个它所依赖的库。[我刚刚使用sourceforge](http://sourceforge.net/projects/gnuplot/files/gnuplot/4.6.1/)的 4.6.1 版本进行了尝试。该`confgiure`脚本为您提供了启用 wxt 终端的要求列表。寻找线

```
wxt terminal: no (requires C++, wxWidgets>2.6, cairo>0.9, pango>1.10) 
```

你需要 C++（我假设你有那个）。对于其他人，在我几乎干净的 Ubuntu 12.10 64 位安装中，我需要安装 3 个附加软件包及其依赖项以启用 wxt 终端选项。你要：

```
libcairo2-dev
libpango1.0-dev
libwxgtk2.8-dev 
```

在基于 debian 的发行版上，您可以执行以下操作：

```
sudo apt-get install libcairo2-dev libpango1.0-dev libwxgtk2.8-dev 
```

或在其他系统上手动安装它们。如果您在存储库中找不到它们，您总是可以从[wxWidgets](http://www.wxwidgets.org/)、[cairo](http://www.cairographics.org/)和[pango](http://www.pango.org/)获得最新版本。安装库后，重新运行`./configure`并检查 wxt 终端行是否读取

```
wxt terminal: yes 
```

`make`如果是这样，请通过and重新编译您的 gnuplot `make install`，您可以像以前一样使用 gnuplot，并在屏幕上显示漂亮的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T16:19:09.610

尝试“设置术语 wxt”。它可以替代 x11 术语，并且可能具有更好的质量。

# c - 给定两个整数 A 和 B。如何找到不小于 A 的 B 的下一个倍数？

> ID：13471292
> 
> 赞同：-3
> 
> 时间：2012-11-20T10:32:20.230
> 
> 标签：c

假设你输入A = 15，B = 6，答案是18。我需要什么算法？

这是我尝试的，但它不起作用：

```
#include <stdio.h>

int main() {
int a, b;

scanf("%d %d", &a, &b);

for (  ; a % b != 0; a++ ) {
    if ( a % b == 0 ) {
        printf("%d\n", a);
        return a;
    }
}
return 0;
} 
```

我得到无限循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:39:53.200

问题（现在）要求：

> b 的下一个不小于 a 的倍数？

使用你的符号`a`and `b`，你可以直接写成这样：

```
int NextMultipleUp(int a, int b)
{
    int r = a % b;
    if (r == 0)
        return a;
    else
        return a + b - r;
} 
```

* * *

最初问的问题

> a的下一个不大于b的倍数

为此，答案是

```
int NextMultipleDown(int a, int b)
{
    return b - b % a;
} 
```

这是原始评论适用的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:18:36.760

```
return (((a-1) / b )+1) * b; 
```

总是返回 b 的倍数。增加整数除数以获得大于原始 a 的倍数 - 从原始值中减去一个，因为我们想要“不小于”而不是“大于”a

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T10:58:40.990

```
int nextMultiple(int a,int b)
{
  if(a%b == 0) return a;
  return a+(b-(a%b));
} 
```

所以如果 a=15 b=6

答案是

```
=15+(6-(15%6))
=15+(6-(3))
=15+3
=18 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T11:00:48.250

我认为你想要一个`do - while`迭代循环，所以我会给出一个替代答案。

> 如何找到不小于 A 的 B 的下一个倍数？

显然这段代码比大卫的慢。

```
int main ( void ){

    int a, b, c;
    long int result;

    scanf("%d %d", &a, &b);
    c = 0;

    do {
        result = b * c;
        c++;
    } while ( result < a );

    printf( " The number is: %d \n", result );
} 
```

# javascript - How to add twitter tweet functionality on my website?

> ID：13471293
> 
> 赞同：3
> 
> 时间：2012-11-20T10:32:23.583
> 
> 标签：javascript, jquery, html

I'm following this [Site](http://thomasbillenstein.com/jTweetsAnywhere/demo/A-customized-Tweet-Box/) which is a easy way to add a customised tweet box and button on my site and will help in update of post.

As per its functionality, once we write any messages in the textbox and click on tweet button we will get the twitter login pop up window, once we are authenticated our message will be posted on our twitter account wall.

But when i run this code, i'm getting the pop up window and once i provide my credentials the window closes but no message is posted in the twitter account. When i checked on my javascript console im getting error:

> Unsafe JavaScript attempt to access frame with [https://api.twitter.com/xd_receiver.html](https://api.twitter.com/xd_receiver.html) from frame with URL about:blank. The frame requesting access has a protocol of 'http', the frame being accessed has a protocol of 'https'. Protocols must match.

I dont know what this error means as my site through which im running the form is clorderdev2.uvacha.com

Below is my code :

```
 <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
<script type="text/javascript" src="http://platform.twitter.com/anywhere.js?id=YOURCONSUMERKEY&v=1"></script>
   <script type="text/javascript" src="Scripts/jquery.jtweetsanywhere-1.3.1.min.js"></script>
    <script type="text/javascript" src="Scripts/jtweetsanywhere-de-1.3.1.min.js"></script>

<div id="jTweetsAnywhereSample"></div>
<script type="text/javascript">
$('#jTweetsAnywhereSample').jTweetsAnywhere({
showTweetBox:{
    counter: true,
    width: 380,
    height: 65,
    label: '<span style="color: #A4A4A4">What\'s happening?</span>',
    defaultContent: '#jTweetsAnywhere',
    onTweet: function(textTweet, htmlTweet){
        alert('You tweeted: ' + textTweet);
    }
}
});</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:08:01.630

有一个更好的插件来获取`Twitter`推文，它被称为`livetwitter`. 您需要的所有信息都在这里：

[https://github.com/elektronaut/jquery.livetwitter](https://github.com/elektronaut/jquery.livetwitter)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T10:41:45.757

问题是某个脚本试图在 http:// 和 https:// 协议之间进行通信。出于安全原因，JavaScript 不能这样做。这很可能是您正在使用的某个库中的错误。

我建议使用[官方 twitter implementation](https://dev.twitter.com/docs/tweet-button)，如果这是一个可能的选择。

# php - 在 wordpress 中为这个 foreach 循环添加逗号

> ID：13471303
> 
> 赞同：0
> 
> 时间：2012-11-20T10:33:01.130
> 
> 标签：php, wordpress

我想分隔这些由逗号输出的链接，但最后一个链接上没有逗号。实现这一目标的最佳方法是什么？

```
<p class="favs">Favourite Courses: 
                <?php 
                    $user_id = bp_get_member_user_id();
                    $array = get_user_meta($user_id, 'wpfp_favorites', true); 

                    foreach ($array as $key => $value) {
                    $queried_post = get_post($value); ?>

                    <a href="http://publicaccessgolf.com.au/<?php echo $queried_post->post_name; ?>" title="<?php echo $queried_post->post_title; ?>" ><?php echo $queried_post->post_title; ?></a>

                 <?php } ?>
                </p> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T10:35:29.997

最好的方法通常是这样的：

```
$links = array();
foreach (...) {
    $links[] = '<a ...';
}

echo join(', ', $links); 
```

酌情适应你的情况。

# ruby-on-rails - 资产后没有路线匹配：预编译

> ID：13471305
> 
> 赞同：2
> 
> 时间：2012-11-20T10:33:03.633
> 
> 标签：ruby-on-rails, asset-pipeline

我在生产模式下运行 Rails 3.2.8 应用程序。完成“rake assets:precompile”后，我遇到了路由问题。

我的日志消息是：

```
ActionController::RoutingError (No route matches [GET] "/corp/assets/application-cf24b2a92e88a02835248f85a9f3c462.css"): 
```

此文件存在且位于当前位置。我的路线在“corp”范围内。

我的配置`"config/application.rb"`有选项`"config.assets.enabled = true"`。

我的配置`"config/environments/production.rb"`有以下选项：

```
config.serve_static_assets = true
config.assets.compress = true
config.assets.compile = true
config.assets.digest = true 
```

应用程序在开发模式下工作正常。在那之前 assets:precompile 一切都很好。经过几个小时的帖子搜索，我找不到任何解决问题的方法。请帮我解决这个问题！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T10:39:37.480

在生产模式下，Rails 将不负责提供静态资源。因此，您会收到此错误。这由`config/environment/production.rb`您的应用程序中的此设置控制：

```
config.serve_static_assets = false 
```

您可以设置为该值，也可以`true`使用像 Apache 或 Nginx 这样的真实服务器来为静态资产提供服务。我怀疑 Pow 也可能这样做。

**更新**

试试这个

```
 # Don't fallback to assets pipeline if a precompiled asset is missed
  config.assets.compile = true
  # Generate digests for assets URLs
  config.assets.digest = false 
```

# c++ - 命名空间“std”中的“ostream”未命名类型

> ID：13471314
> 
> 赞同：6
> 
> 时间：2012-11-20T10:33:29.503
> 
> 标签：c++, linux, gcc, g++

正如标题所示，我遇到了一个相当奇怪的问题。当我尝试编译示例源代码（使用 libotb）时，我不断收到类似标题中的错误。奇怪的是，`#include <iostream>`它存在于报告错误的所述源/标头中。

另一方面，如果我从所述文件中提取代码并创建一个单独的源并使用`g++ <source_file>`它进行编译，但如果我使用它进行编译，`g++ -I<path_to_libotb_headers> <source_file>`我会得到相同的错误，尽管源文件不包含来自所述路径的任何内容。

如以下评论所述，此问题仅发生在

```
#include <iostream>   

int main                                                                                
{
    std::cerr << "Test";
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T13:10:39.923

```
#include <ostream> 
```

应该修复它。在 C++11 下，`#include <iostream>`应该拉入所有的`<ostream>`，但在 C++11 之前，你必须做单独`#include`的 s.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-16T03:15:17.737

它应该是：

主函数（）

*   你错过了 () :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T10:38:34.980

验证您的包含是否都关闭了它们的命名空间——如果先前的标头没有关闭其命名空间，您的包含可能会意外地在命名空间中声明。

您还可以尝试通过将 std 包含移到包含列表中的更早位置来定位此问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-25T17:07:59.050

如果您是 Arduino 程序员，请不要忘记 Arduino 没有内置任何正常的“ostream”内容。
但也有提供类似功能的库。

PS。请记住，不包括流式传输类型的东西是有充分理由的。

# asp-classic - CDOSYS：如何检查它是否工作？

> ID：13471316
> 
> 赞同：0
> 
> 时间：2012-11-20T10:33:32.087
> 
> 标签：asp-classic, cdo.message

在客户端服务器上，我们有一个小脚本，可以在订单结束时发送一封电子邮件，就在关闭它之前。

直到昨天一切正常，但突然间，页面给出了一个通用的 500 错误。所以我从页面底部开始发现，如果我将 response.end 放在 cdo 邮件功能的 .send 之前，则页面可以正常工作：

```
Set iMsg = CreateObject("CDO.Message")
Set iConf = CreateObject("CDO.Configuration")
Set Flds = iConf.Fields

Flds(cdoSendUsingMethod) = cdoSendUsingPort
Flds(cdoSMTPServer) = "mail.theserver.com" 
Flds(cdoSMTPServerPort) = 25
Flds(cdoSMTPAuthenticate) = cdoAnonymous '0
Flds.Update             

With iMsg
    Set .Configuration = iConf                        
         .To = "mymail@mail.com"
         .From = "amail@mail.gov"
         .Sender = ""
         .Subject = "test"                   
         .HTMLBody = "TEST"
         RESPONSE.END()
         .Send
End With 
```

在页面的开头也有两行：

```
<!--METADATA TYPE="typelib" UUID="CD000000-8B95-11D1-82DB-00C04FB1625D" NAME="CDO for Windows 2000 Type Library" -->
<!--METADATA TYPE="typelib" UUID="00000205-0000-0010-8000-00AA006D2EA4" NAME="ADODB Type Library" --> 
```

好吧，我已经做了一些测试，将一些脚本用于发送与这个略有不同的电子邮件，但似乎没有任何效果。有人知道测试 cdosys 的方法吗？一些东西。我不知道，返回版本......或选项列表......好吧，这让我知道错误在服务器上（所以我可以打电话给他们并告诉他们“嘿，这不是我的错“）……？

编辑：由于页面只给出 500 错误，有没有办法让服务器返回更具体的错误代码？我无法访问服务器，但只能访问 ftp（所以只有经典的 asp）

编辑2：我添加了这个代码：

```
on error resume next
.Send
If Err.Number <> 0 Then
Response.write(Err.Number)
response.write("<br>")
response.write(Err.description)
end if 
```

它给出了这个信息：

*-2147220975 邮件服务器 SMTP 不可能。Codice errore di trasporto: 0x800ccc6f。Risposta del server: 554 由于发送 MTA 的声誉不佳，您对该邮件系统的访问已被拒绝。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:28:30.753

根据您的错误消息，CDO 组件正在工作，但您的 SMTP 服务器 (MTA) 拒绝该消息。也许是因为 .gov 域？无论如何，您在垃圾邮件方面的 SMTP 声誉都很差。您需要使用不同的 SMTP 服务器。如果您使用的是 IIS 服务器的 ip，则该 IP 不再好，并且已被垃圾邮件服务器列入黑名单。

Mailchimp 有很多关于邮件可交付的信息。看看它。您可以使用托管 SMTP 服务（mailgun、sendgrid、mandrill），如果您发送垃圾邮件，所有这些都会立即阻止您。

# php - 不使用表单无法通过 php 发布数据（尤其是贝宝付款）

> ID：13471320
> 
> 赞同：1
> 
> 时间：2012-11-20T10:33:50.557
> 
> 标签：php, post, http-request

我想通过php（不使用ajax）将一个php文件（1.php）中的变量值发布到另一个文件（3.php）而不使用表单。我怎样才能做到这一点 ？
假设，在 '1.php' "$a=10;" 我想在不使用任何形式的情况下将此值发布到“3.php”，并且我希望没有人能在浏览器的地址栏上看到该值。（注意：如果有人建议我使用“httprequest”，请在 php 中编写一个简单的代码这样做。我可以通过使用 ajax 但不能通过 php 来做到这一点。请告诉我如何将卖家的贝宝帐户 ID 发送到贝宝以处理付款，因为它需要得到保护。）
我得到了一些代码，但它不工作，不知道怎么回事。

**1.php**

```
<?php
$data = array(); $data['first_name'] = 'hello'; $data['last_name'] = 'Thind'; $data['password'] = 'secret'; $data['email'] = 'me@abc.com';
$post_str =''; foreach($data as $key=>$val) { $post_str .= $key.'='.urlencode($val).'&'; } $post_str = substr($post_str, 0, -1);
$ch = curl_init(); curl_setopt($ch, CURLOPT_URL, '3.php' );
curl_setopt($ch, CURLOPT_POST, TRUE); 
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_str);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE); $result = curl_exec($ch); curl_close($ch); echo $result;
?> 
```

**3.php**

```
<?php
$host="localhost";       
$dbname="mr"; 
// mysql code for table= create table m(name varchar(10));
$username="";            
$password="";
$con=mysql_connect("$host","$username","$password")or die("cannot connect");
mysql_select_db($dbname) or DIE('cannot select db');
if(isset($_POST['first_name'])){
$name=$_POST['first_name'];
$sql="insert into m
values($name)";
$sq=mysql_query($sql);  
}
mysql_close($con);
?> 
```

[***注意：***请在不使用 SESSION 或“来自外部文件的数据”的情况下告诉我] 有人可以帮帮我吗？

-谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:35:38.070

您可以在第一个 PHP 中设置会话中的值，然后当第二个 PHP 页面加载时，您可以从会话中读取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T10:42:17.307

使用

> 文件获取内容（）

您可以执行此操作的功能 这是关于此[http://phptechworld.blogspot.in/2012/09/how-to-call-external-url-and-print.html的一篇文章](http://phptechworld.blogspot.in/2012/09/how-to-call-external-url-and-print.html)

# mootools - Mootools和three.js冲突

> ID：13471321
> 
> 赞同：1
> 
> 时间：2012-11-20T10:33:54.400
> 
> 标签：mootools, three.js

有没有人有使用 mootools 和three.js 的经验？现在它似乎有冲突，因为 mootools 似乎从我的 three.js 项目中删除了动画、鼠标功能等。

我最初使用 jQuery 没有任何问题，但后来将其转换为纯 javascript。但是现在我必须确保代码与 Mootools 兼容。我唯一要做的就是包含 mootool (1.4.5) 库，但这足以造成一些冲突。

那么有没有人有任何关于 mootools 和three.js 不能很好地一起玩的经验？

提前致谢。

# objective-c - 反串错误

> ID：13471322
> 
> 赞同：2
> 
> 时间：2012-11-20T10:33:54.357
> 
> 标签：objective-c, c, char, reverse

我正在自己编写 reverseString 函数。（供测试使用）而且我使用iOS平台运行我的c代码，这听起来很奇怪，但再次用于测试......

这是我的代码：

```
-(char *) reverseString:(char *)str
{
    char *end = str;
    char tmp;

    if (str)
    {
        while (*end) { end++; }
        --end;
        NSLog(@"%c", *end);
        while (end>str)
        {
            tmp = *str;
            *str = *end;
            str++;
            *end = tmp;
            end--;
        }
    }
    NSLog(@"%s", str);
    return str;
} 
```

通过调用运行函数后：

```
char *testChar = "abcd";
[self reverseString:testChar]; 
```

我在线收到错误：

```
*str = *end;
Thread 1: EXC_BAD_ACCESS(code=2, address=0x2de4) 
```

我真的不知道这里的指针有什么问题......有人知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T10:35:37.470

您不能修改字符串文字。请改用 char 数组。

```
char testChar[] = "abcd"; 
```

# javascript - 如何创建用户交互式弹出式表单

> ID：13471324
> 
> 赞同：0
> 
> 时间：2012-11-20T10:33:57.337
> 
> 标签：javascript, html, web-applications

我正在寻找单击链接或按钮时弹出的内容，但它必须不仅仅是弹出窗口。它必须是一个要求输入的交互式表单，当提供输入时，它会将输入返回到父窗口。我不是要代码。我只是不知道它是哪种技术。你知道我在说什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:13:05.377

1，通过 2 将 jQuery 包含到您的 HTML 中`<script src=..>` ，有关如何通过 jQuery 创建模态叠加层的教程，请参阅本教程：

[http://jquerytools.org/demos/overlay/modal-dialog.html](http://jquerytools.org/demos/overlay/modal-dialog.html)

[http://www.jacklmoore.com/notes/jquery-modal-tutorial](http://www.jacklmoore.com/notes/jquery-modal-tutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:31:27.250

我可以建议执行以下操作。在 JS 中：

```
$container = $("#container");
$("<div class=\"popup\" id=\"popup-id\"><!--html code of form here--><div>").hide().appendTo($container);
....
function showPopup() {
    $("#popup-id").show().offset({
    left : yourX,
    top : yourY
});

} 
```

在 HTML 中：

```
<!-- container of popup -->
<div id="container">
    ...
<div>
...
<a onclick="showPopup()">Show Pop Up</a> 
```

在 CSS 中

```
div.popup {
    display: inline-block 
} 
```

那应该行得通。

**UPD。**甚至更多。而不是`div`用`$("<div class=\"popup\" id=\"popup-id\"><!--html code of form here--><div>")`. 你可以使用`jquery.tmpl()`函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T10:43:19.413

使用 jQuery，在子窗口（弹出窗口）中，您可以调用父窗口（打开器）并在其中定位一个字段，如下所示：

```
$("#fieldInParent", opener.window.document).val("new value"); 
```

opener.window.document 告诉 jquery ID 在打开弹出窗口的窗口中。

# php - 我们如何在 php 中使用正则表达式获取 HTML 标签之间的数据

> ID：13471326
> 
> 赞同：1
> 
> 时间：2012-11-20T10:34:15.060
> 
> 标签：php, html, regex

> **可能重复：**
> [正则表达式匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

我是正则表达式的新手，我想在使用正则表达式之间获取数据（地址）这是我的代码

```
<th align="left" valign="top">Billed To:</th>
<th align="left" valign="top">Shipped To:</th>
</tr>
<tr>
<td height="107" valign="top">
Logmet<br>
Wayne Rankin<br>
1400 Lake Bluff Cove <br>
Round Rock TX US 78665<br>
512-924-5437<br>
admin@logmet.com<br></td>
<td valign="top">
Logmet<br>
Wayne Rankin<br>
1400 Lake Bluff Cove <br>
Round Rock TX US 78665<br>
512-924-5437<br>
admin@logmet.com    </td>
</tr> 
```

有谁知道我怎样才能得到这些标签之间的地址......提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:39:35.073

我不知道正则表达式方法，但是在解析 html 时我使用这个[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

它又好又干净，对我来说效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:09:46.553

正如一些人所说，正则表达式不是在这里使用的最佳工具......但如果你必须使用它：

```
$chars=array("\r\n", "\n", "\r");
$html=str_replace($chars, '', $html);
preg_match_all('/<td.*?>(.*?)<br>(.*?)<br>(.*?)<br>(.*?)<br>(.*?)<br>(.*?)<br><\/td>/', $html,$hits);
print_r($hits); 
```

那一个可以让你得到每一个的一切`td`，基于`br`. 如果您只想获得其中一些，请删除`()`您不需要的那些

# qt - 如何创建自定义软键

> ID：13471329
> 
> 赞同：2
> 
> 时间：2012-11-20T10:34:28.793
> 
> 标签：qt, symbian

我想创建一个类似于屏幕截图的应用程序，使用 Qt Widgets 框架（不是屏幕截图上的 QML）。

不幸的是，我无法删除默认的 CBA 区域。如果我进入全屏模式

```
QApplication::setAttribute(Qt::AA_S60DontConstructApplicationPanes); 
```

顶部的状态区域也被删除，这不是我需要的。

![在此处输入图像描述](../Images/91d29ca6571a4fc2fb2968619a1de8ef.png)

# php - 从术语名称中检索分类术语 ID？

> ID：13471330
> 
> 赞同：1
> 
> 时间：2012-11-20T10:34:30.907
> 
> 标签：php, wordpress, taxonomy

我正在使用以下代码从我的页面模板中使用`term_taxonomy_id`我从 URL 末尾检索的内容对我的数据库进行查询。

当使用这个模板时，我的 URL 看起来像这样，`http://mysite.com/county/18`在这种情况下 18 是`term_taxonomy_id`

我的代码如下：

```
 <?php
 /*
 Template Name: County
 */
 $ex = explode("/",$_SERVER['REQUEST_URI']);
 //print_r($ex);

get_header(); 

// Global query variable
 global $woo_options; 
 global $wp_query;
 global $wpdb;
 $all_terms = $wpdb->get_results("SELECT *  FROM wp_term_taxonomy,wp_terms WHERE wp_term_taxonomy.parent='{$ex[2]}' AND wp_term_taxonomy.term_id=wp_terms.term_id ORDER BY wp_terms.name");

 //echo "SELECT name   FROM wp_terms WHERE term_id='{$ex[2]}'";
 $taxName = $wpdb->get_results("SELECT name   FROM wp_terms WHERE term_id='{$ex[2]}'");
 foreach ( $taxName as $tx ) {

 $nameTaxnaomy = $tx->name;
 }

 $getPostID = $wpdb->get_results("SELECT object_id   FROM wp_term_relationships WHERE term_taxonomy_id='{$ex[2]}'");
 foreach ( $getPostID as $tx1 ) {

  $post = $tx1->object_id;
 }

 ?> 
```

**问题：** 但是，我需要更改我的 URL 结构以使用 URL 末尾的 term_name 而不是上面的 taxonomy_id。

所以现在我的网址看起来像这样`http://mysite.com/county/London`

当我这样做时，数据库查询不起作用，因为它正在爆炸 URL 以获取最后的 taxonomy_id（在我上面的示例中为 18），然后使用该字符串查询数据库。

**实际问题：**有没有办法`term_taxonomy_id`从术语名称中获取，以便我可以在我的数据库查询中使用它？

我在想类似的东西

```
//explode the url to get the term name
$dx = explode("/",$_SERVER['REQUEST_URI']);

//now get the id from the term name
$ex = //get the term_taxonomy_id from $dx 
```

任何帮助表示赞赏

干杯

**更新**- 通过下面的一些提示，我使字符串看起来像这样。我的分类名称叫做`location`

```
//define $ex byt ge_term_by
$ex = get_term_by('slug',explode("/",$_SERVER['REQUEST_URI']),'location'); 
```

当我回声时，`$ex`我什么也没得到，所以还是有问题:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:43:27.247

我认为您需要使用 Wordpress 中的 get_term_by 函数。你可以在这里看到它的完整文档[http://codex.wordpress.org/Function_Reference/get_term_by](http://codex.wordpress.org/Function_Reference/get_term_by)。

前 3 个值是必需的，因此您需要类似 get_term_by('slug',explode("/",$_SERVER['REQUEST_URI']),'your_term_category_here');

希望这有助于您入门！

# .net - 使用实体框架在 C# 中映射固定的有限数组

> ID：13471332
> 
> 赞同：0
> 
> 时间：2012-11-20T10:34:36.903
> 
> 标签：.net, arrays, entity-framework, dayofweek

我正在尝试将属性映射到数据库。然而，它是一个列表/数组，我知道它的固定长度。所以我希望将这些项目映射到同一个数据库表中，而无需映射到不同的数据库表中。

```
public class Recurrency{

    public int Id { get; set; }

    public DateTime BeginDate { get; set; }

    public DateTime EndDate { get; set; }

    public Boolean[] IsRecurrent { get; set; } 
} 
```

我当前使用的布尔数组与星期几一样长，应该使用`DaysOfWeek`已经提供的枚举器访问。

有什么办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:53:03.710

数组根本无法映射。如果你有固定的长度，你可以做一些丑陋的黑客攻击，比如：

```
internal bool FirstIsRecurrent {
    get { return IsRecurrent[0]; }
    set { IsRecurrent[0] = value; }
} 
```

您将需要为数组的每个成员提供属性并映射这些属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:51:23.397

您可以使用枚举，而不是使用布尔数组。

```
public class Recurrency
{
    public int Id { get; set; }
    public DateTime BeginDate { get; set; }
    public DateTime EndDate { get; set; }
    public DaysOfWeek IsRecurrent { get; set; }
}

[Flags]
public enum DaysOfWeek
{
    Sunday = 1,
    Monday = 2,
    Tuesday = 4,
    Wednesday = 8,
    Thursday = 16,
    Friday = 32,
    Saturday = 64
} 
```

在您的数据库中 DaysOfWeek 将存储为整数。该整数将映射到一周中每一天的真/假。

例如 DaysOfWeek == 22，将是（星期一、星期二和星期四）。或者，如果您将其视为布尔数组（假（1），真（2），真（4），假（8），真（16），假（32），假（64））

要设置 IsRecurrent，您可以使用按位 (|) 来组合天数。

```
var recurrency = new Recurrency();
recurrency.IsRecurrent = DaysOfWeek.Monday | DaysOfWeek.Friday; 
```

然后查询您可以使用的值是 HasFlag 方法。

```
var recurrency = db.Recurrencies.Find(1);
if (recurrency.IsRecurrent.HasFlag(DaysOfWeek.Monday | DaysOfWeek.Sunday) 
{
    // do something
} 
```

# android - URL 验证工作正常，但保持连接并限制任何进一步的请求

> ID：13471333
> 
> 赞同：5
> 
> 时间：2012-11-20T10:34:37.560
> 
> 标签：android, http, http-headers, url-validation

```
public class UrlVarificationTask extends AsyncTask<Void, Void, Integer> {

    private String url;
    private UrlVarificationDelegate delegate;
    private HttpURLConnection huc;

    public UrlVarificationTask(String url, UrlVarificationDelegate delegate) {
        this.url = url;
        this.delegate = delegate;
    }

    @Override
    protected void onPreExecute() {

        super.onPreExecute();
    }

    @Override
    protected Integer doInBackground(Void... params) {
        int responseCode = 0;
        try {
            System.setProperty("http.keepAlive", "false");
            URL u = new URL(url);
            huc = (HttpURLConnection) u.openConnection();
            huc.setRequestMethod("HEAD");
            huc.connect();
            responseCode = huc.getResponseCode();

        } catch (MalformedURLException mal) {
            responseCode = -555;
        } catch (IOException io) {
            responseCode = -444;
        } catch (Exception ex) {
            responseCode = -333;
            ex.printStackTrace();
        }

        if (huc != null) {
            try {
                huc.getInputStream().close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            huc.disconnect();
        }

        Logger.debug("Response Code==" + responseCode);
        return responseCode;
    }

    @Override
    protected void onPostExecute(Integer responseCode) {
        delegate.urlVarificationResponseCode(responseCode);
        super.onPostExecute(responseCode);
    }

} 
```

我用上面的 dode 来验证 url，

如果 HEAD 给我响应代码 200，那么只有我打开 webview 的 url。

但是一旦我称之为它保持连接并且即使在关闭之后也不允许任何其他http请求，该怎么办？

[安全使用 HttpURLConnection](https://stackoverflow.com/questions/4767553/safe-use-of-httpurlconnection)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T11:03:47.270

```
huc.setRequestProperty("keep-alive", "false"); 
```

这是因为 HttpURLConnection 保持连接处于活动状态，因此我们无法发出进一步的请求，因此将 keep-alive 设置设置为 false 可以解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T07:50:36.990

为了正确关闭`HttpURLConnection`转到[链接](https://stackoverflow.com/questions/11774744/how-to-properly-close-httpurlconnection-on-android)

通过这个 URL 被关闭。

# eclipse - Eclipse Juno 键盘快捷键构建项目

> ID：13471334
> 
> 赞同：1
> 
> 时间：2012-11-20T10:34:40.013
> 
> 标签：eclipse

我在 OpenSuSE 11.4 上运行 eclipse Juno (4.2.1)。

我将快捷方式分配给`ctrl+b`具有“在 Windows 中”上下文的操作“构建项目”。

在 C/C++ 编辑器中编辑代码时，快捷方式没有任何作用，项目将不会被构建。

这在以前版本的 eclipse 中工作得很好。

有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T20:17:19.530

我在朱诺也遇到过这种情况。我读过这是一个引入的错误。它显然在这里描述： [https ://bugs.eclipse.org/bugs/show_bug.cgi?id=383497](https://bugs.eclipse.org/bugs/show_bug.cgi?id=383497)

...这似乎表明 4.2.2 将有一个修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:52:46.650

作为部分解决方法，您可以将“制作目标”对话框与 ctrl+b 快捷方式相关联。这就是我所做的。

# php - 使用 PHP 按名称查找重复文件

> ID：13471336
> 
> 赞同：0
> 
> 时间：2012-11-20T10:34:41.450
> 
> 标签：php, performance, duplicates, filesystems

项目中有一些模块正在被重命名或新创建或直接复制。现在我想删除旧的目录文件。所以我想找到所有具有相同名称的文件及其路径以进行清理。（计数 > 2）。可以是 css、tpl、php 或 js 文件。

IE

```
Main\Games\troy.php
Main\Games\Child Games\troy.php
Main\Games\Sports\troy.php 
```

如果在主目录上进行搜索，则搜索应返回所有 3 个文件及其路径。如何通过 PHP 查找重复文件。

这对于在驱动器中查找具有相同名称的重复文件（如 mp3、3gp 文件）也很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:34:41.450

```
function find_duplicate_files() {
    $names = scandir_recursive( 'D:\Main' );
    $files = array();
    foreach( $names as $name ) {
        if( count( $name ) > 1 ) {
            $files[] = $name;
        }
    }
    print_r( $files );
} 
```

函数 scandir_recursive() 递归解析指定的目录树并创建一个关联数组，其键是在所有子目录中找到的文件名，其值是相应的路径。

```
function scandir_recursive( $dir, &$result = array() ) {
    $dir = rtrim($dir, DIRECTORY_SEPARATOR);

    foreach ( scandir($dir) as $node ) {
        if ($node !== '.' and $node !== '..') {
            if (is_dir($dir . DIRECTORY_SEPARATOR . $node)) {
                scandir_recursive($dir . DIRECTORY_SEPARATOR . $node, $result);
            } else {
                $result[$node][] = $dir . DIRECTORY_SEPARATOR . $node;
            }
        }
    }
    return $result;
} 
```

// 它会像这样输出

```
Array
(
    [0] => Array
        (
            [0] => D:\Main\Games\troy.php
            [1] => D:\Main\Games\Child Games\troy.php
            [2] => D:\Main\Games\Sports\troy.php 
        )

    [1] => Array
        (
            [0] => D:\Main\index.php
            [1] => D:\Main\Games\index.php
        )
) 
```

我们可以从中识别哪些是重复文件。当您的代码库有大量文件时，它很有用。（而且我经常用它来查找重复的音乐 mp3 文件：P）

# backbone.js - Requirejs 将项目优化为单个文件

> ID：13471343
> 
> 赞同：2
> 
> 时间：2012-11-20T10:35:05.243
> 
> 标签：backbone.js, requirejs, minify, requirejs-text

使用如下构建配置，为什么我在运行下面指定的部署命令时会看到源目录中的所有文件 + 缩小的应用程序文件。我只需要一个 js 文件来启动我的主干应用程序

### 构建配置

```
({
    appDir: "../",
    baseUrl: 'Comment',
    dir: './deploy',
    optimize: 'uglify',
    paths: {
        text: '../../amd/plugins/text',
        CommentView: 'views/feedback',
        Feedback: 'models/feedback',
        templates: 'templates'
    },
    modules: [
        {
            name: "app"
        }
    ]
}) 
```

### 应用程序.js

```
require.config({
    urlArgs: "bust=" + (new Date()).getTime(),
    baseUrl: 'scripts/apps/feedback',
    paths: {
        text: '../../amd/plugins/text',
        CommentView: 'views/feedback',
        Feedback: 'models/feedback',
        templates: 'templates'
    }
});

require(["Feedback", "CommentView"], function (feedbackModel, commentView) {
}); 
```

### 优化命令

`node amd/plugins/r.js -o apps/feedback/build.config.js`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T17:33:51.327

默认情况下，requirejs 优化器不会从输出中删除模块。检查你构建的 app.js 的内容，我猜它里面有你所有的模块。单个模块不应该引起任何问题并且不会被使用，但是如果你真的要摆脱它们，请尝试`removeCombined: true`在你的构建配置中进行设置。

# xcode - XCode：在故事板编辑器中移动 UI 元素

> ID：13471348
> 
> 赞同：14
> 
> 时间：2012-11-20T10:35:26.177
> 
> 标签：xcode, xcode-storyboard

是否可以在情节提要编辑器中锁定或冻结元素，以便在单击和拖动时忽略它们？

我的问题是我在覆盖整个窗口的两个大 UIView 下有几个元素。因此，例如为了在它们下方移动一个按钮，我首先必须将大视图移开，移动按钮，然后将它们移回。

有没有更好的办法？

当我在左侧的树视图中选择元素时，只要单击情节提要，它就会被取消选择。也许有一个键盘快捷键可以在拖动时保持选择？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-20T10:42:12.803

我不害怕，至少我从来没有意识到。

您可以使用左侧的对象导航器/树视图来选择您的项目，然后您可以使用尺寸检查器上的 x/y/w/h 属性来移动对象。

另一种解决方案可能是在拖动其他元素时将不想拖动的项目设置为隐藏。

# php - 复选框值显示两次

> ID：13471349
> 
> 赞同：2
> 
> 时间：2012-11-20T10:35:27.270
> 
> 标签：php, javascript, jquery, arrays, jquery-selectors

我正在使用 jquery 来获取复选框的值。但是，正在发生的事情是该值被重复，并且似乎正在获取 while 循环中所有复选框的值。如果有人能指出我的错误，我将不胜感激。谢谢你。

更新：当前代码。现在只选择第一个条目。进一步单击复选框时没有输出。

PHP 代码

```
while($row = mysql_fetch_array($result)) 
{
    $ticket = $row['ticket_frm'];
    $rowdate = date("d/m/Y",strtotime($row['date_frm']));
    $id = $row['id_frm'];
    $from = $row['from_frm'];
    $subject = $row['subject_frm'];
    $message = $row['message_frm'];

    $myString = <<<EOF
    <span><input id="check" type="checkbox" name="delete" value="<?php echo $ticket ?>"></span>
    <div class='msgTrue buttonMailTrue' data-message='%s' data-subject='%s' data-rowdate='%s' data-from='%s'>

    <img src="images/sml_new_mail_icon.gif" class="mailIcon" alt="" />$subject;
    <div class="rowdate">$rowdate</div><br />
    <span class="mailFrom">$from</span>
    </div>
    <p class="checked"></p>
    <!-- The following end tag need to be at the start of the line -->
    EOF;
    printf($myString, $message, $subject, $rowdate, $from);
}   echo '<p class="checked">'.'</p>'; 
```

jQuery 代码

```
$(function() {
    $("#check").click(function() {
       var isChecked = $(this).prop("checked");  // or $(this).prop("checked")
         if (isChecked) {
           $("p.checked").html("Checkbox is checked: <b>True</b>");
       } else {
           $("p.checked").html("Checkbox is checked: <b>False</b>");
} 
```

}); });

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:38:33.003

`input class="check"`根据您的代码和选择器，您的页面上有很多元素。
您可以通过类名找到它们，所以这就是它们重复的原因。

使用`id`-attribute 和`$("#id")`语法来获取正确的值，或`this`在代码中使用关键字：

```
//var isChecked = $('.check').is(':checked'); - wrong
var isChecked = $(this).is(':checked'); // right 
```

**更新：**
您没有`id`为您的元素提供唯一性。因为这行不通。您的错误与之前相同。
试试这个代码：

```
<input id="check$ticket" type="checkbox" name="delete" value="<?php echo $ticket ?>"> 
```

javascript 也一样 - 你必须通过它的独特性来找到元素`id`

```
 $("#check" + TICKET_NUMBER_HERE).click(function() {
   var isChecked = $(this).prop("checked");  // or $(this).prop("checked")
     if (isChecked) {
       $("p.checked").html("Checkbox is checked: <b>True</b>");
   } else {
       $("p.checked").html("Checkbox is checked: <b>False</b>"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T10:36:32.587

您应该使用`this`当前*复选框*：

```
$(".check").click(function() {
    var isChecked = this.checked;  // or $(this).prop("checked")
    if (isChecked) {
        $("p.checked").html("Checkbox is checked: <b>True</b>");
    } else {
        $("p.checked").html("Checkbox is checked: <b>False</b>");
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T10:38:09.147

将您的 jquery 代码更改为。由于 $('.check') 返回对象数组，因此默认情况下仅检查第一个对象的属性

```
$(function() {
  $('.check').click(function(){
    var isChecked = $(this).is(':checked');
    alert(isChecked);
    if(isChecked)
      $('p.checked').html('Checkbox is checked: <b>True</b>');
    else
      $('p.checked').html('Checkbox is checked: <b>False</b>');
  });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T10:45:15.367

尝试

```
$(".check").click( function() { 
    $("p.checked").html( 
        "Checkbox is checked: <b>" + $(this).is(":checked") + "</b>" );
} 
```

# mysql - Mysql查询文章相关评论数量

> ID：13471352
> 
> 赞同：1
> 
> 时间：2012-11-20T10:35:31.853
> 
> 标签：mysql, codeigniter, join, count, sum

我正在尝试运行查询以选择与文章 ID 相关的评论最多的文章。

我有一个文章表和一个评论表，评论表有一个链接它们的 article_id 字段，我想在这里做一个左连接是希望我到目前为止。

```
SELECT *, SUM(`comments`.`article_id`) AS total FROM (`articles`) JOIN `comments` ON `comments`.`article_id` = `articles`.`id` GROUP BY `comments`.`article_id` ORDER BY `total` asc 
```

我正在使用 CodeIgniter，上面是下面我的活动记录的输出。

```
$this->db->select('*');
        $this->db->from('articles');
        $this->db->join('comments', 'comments.article_id = articles.id');
        $this->db->group_by('comments.article_id');
        $this->db->select_sum('comments.article_id', 'total');
        $this->db->order_by('total', 'asc'); 
        $query = $this->db->get();
        return $query->result(); 
```

好的，这工作我似乎得到了正确的输出，但我没有得到评论的数量作为我需要工作的值。

所以我想得到

id 为 1 的文章有 23 条评论

id 为 2 的文章有 3 条评论

等等等等

目前我正在获得文章 ID 的总和，我认为我的总字段值非常高，但不正确可以对此有所帮助吗？？？

谢谢

抱歉，我使用 SUM 而不是计数 AARRRRRGGGGHHHH 回答了我自己的问题，这很有效

```
SELECT *, COUNT(`comments`.`article_id`) AS total FROM (`articles`) JOIN `comments` ON `comments`.`article_id` = `articles`.`id` GROUP BY `comments`.`article_id` ORDER BY `total` asc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:51:13.570

这是答案..

SELECT article.*, count( `comments`. `article_id`) AS total1 FROM `articles`JOIN `comments`ON `comments`。`article_id`= `articles`。`article_id` 分组依据`articles`。`article_id`按升序`total1`排序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T10:43:02.513

这是因为您在查询中对文章 ID 进行了总和。您需要计算评论的总和。删除 sum 函数中的文章 ID，如下所示 SUM(comments.comments_column_name)。我的意思是您在哪一列中针对评论表中的每个 id 保存评论。

# android - django，第一次在 web 中使用 session

> ID：13471359
> 
> 赞同：0
> 
> 时间：2012-11-20T10:35:47.977
> 
> 标签：android, django, session, login

客户端访问登录视图，

```
//user is properly set here  
user = auth.authenticate(username=email, password=password)  
auth.login(request,user) 
```

请求登录视图的同一个客户端请求另一个视图

```
// I expect the same user I logged in previously here. But I see anonymous user here.   
user = request.user 
```

我不知道 Web 服务器如何准确识别来自同一个用户的两个不同的 http 请求（因为 http 是无连接的）。但我知道这`session`是使它成为可能的概念。

我`MIDDLEWARE_CLASSES = ('django.contrib.sessions.middleware.SessionMiddleware',...)`在我的`settings.py`

还有什么我需要检查才能完成这项工作吗？

-编辑

我调试了一下，
django/contrib/auth/ **init** :login 确实 request.session[SESSION_KEY] = user.id django/contrib/auth/ **init** :get_user 尝试在下次运行时查找 request.session[SESSION_KEY] 并失败。

我需要了解 request.session 是什么。
我认为请求是客户端根据 http-request 发送的东西。（所以它不是持久的）

**以下是我的理解，如有错误请指正**

> 1.  当用户登录时，服务器为用户分配一个唯一的 id 并将其发送给用户。
> 2.  服务器还将 id 的相关数据存储在某个持久的地方。
> 3.  用户为每个后续的 http 请求发送唯一的 id。（这是 cookie）
> 4.  Django 使用给定的 id 查找存储在第 2 步（或在其他情况下）中的数据。
> 5.  Django 将数据放入 request.session 并提供给查看。

我跟着[Django，request.user 总是匿名用户](https://stackoverflow.com/questions/5376985/django-request-user-is-always-anonymous-user)

我怀疑这一切都是由于我从[http://www.micahcarrick.com/django-email-authentication.html复制的自定义身份验证后端](http://www.micahcarrick.com/django-email-authentication.html)

我的第一视角。

```
@csrf_exempt
def login(request):
    # import pdb                                                                                                                                                                                                                                                                
    # pdb.set_trace()                                                                                                                                                                                                                                                           

    email = request.POST['email']
    password = request.POST['password']

    user = auth.authenticate(username=email, password=password)
    # auth.logout(request)                                                                                                                                                                                                                                                      

    if user is not None and user.is_active:
        auth.login(request, user)

        profile = user.get_profile()
        user_dict = profile.to_dict()

        jsonUser = json.dumps(user_dict, ensure_ascii=False, cls=DjangoJSONEncoder)
        return HttpResponse(jsonUser)
    else:
        raise Http404 
```

我的第二种看法。

```
@csrf_exempt
def user_update(request):
    import pdb
    pdb.set_trace()

    user = request.user

=>  if not user.is_authenticated():
        raise Http404  // always ends up here

    print 'in user_update'
....... 
```

> MIDDLEWARE_CLASSES = ('django.middleware.common.CommonMiddleware', 'django.contrib.sessions.middleware.SessionMiddleware', 'django.middleware.csrf.CsrfViewMiddleware', 'django.contrib.auth.middleware.AuthenticationMiddleware', 'django. contrib.messages.middleware.MessageMiddleware', # 取消注释下一行以获得简单的点击劫持保护：
> # 'django.middleware.clickjacking.XFrameOptionsMiddleware', )

我的后端

```
from django.contrib.auth.models import User, check_password

class EmailAuthBackend(object):
    """                                                                                                                                                                                                                                                                         
    Email Authentication Backend                                                                                                                                                                                                                                                

    Allows a user to sign in using an email/password pair rather than                                                                                                                                                                                                           
    a username/password pair.                                                                                                                                                                                                                                                   
    """

    supports_inactive_user = False

    def authenticate(self, username=None, password=None):
        """ Authenticate a user based on email address as the user name. """
        try:
            user = User.objects.get(email=username)
            if user.check_password(password):
                return user
        except User.DoesNotExist:
            return None

    def get_user(self, user_id):
        """ Get a User object from the user_id. """
        print 'getting an user for user_id: ', user_id
        try:
            return User.objects.get(pk=user_id)
        except User.DoesNotExist:
            return None 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:26:05.017

你对http是无状态的是正确的。但是，使用 cookie 可以帮助您维护请求的状态。当您调用*登录*函数时，Django 会将用户 ID（加密值）保存在名为*sessionid*的 cookie 中。所以下次你收到用户的请求时，浏览器也会在请求头中发送这个cookie。

如果您查看名为 *django_session* 的表，您应该会看到 session_key 与 cookie *sessionid*具有相同值的条目。

**AuthenticationMiddleware**跟踪用户身份验证并将用户对象分配给*request.user*

**SessionMiddleware**跟踪用户的会话数据

这就是 Django 跟踪用户及其会话的方式。

如果您真的想查看详细信息，可以查看身份验证中间件代码（django.contrib.auth.middleware），尤其是 process_request 以检查用户是如何添加到请求对象中的。

也许这对调试您的问题很有用？

编辑：

基于评论中对尤金的帮助。

当它是与会话相关的问题（登录或会话数据）时，最好检查 cookie 是否在客户端设置正确。如果它是桌面浏览器，通过阅读 Firebug 的“Net”选项卡中的 http 标头，像 Firebug 这样的工具会很有帮助。

在 Eugene 的情况下，它是一个 Android 客户端，因此一种选择是调试 Django 中间件以检查 request.COOKIE 的值。如果您在 Django 端没有收到正确的 cookie，则 cookie 在客户端设置不正确。在浏览器上出现这种情况的原因之一是 cookie 可能被禁用。

因此，检查客户端设置以确保正确存储和发送 cookie 是个好主意。

# joomla - Joomla 组件 - SEF 链接和 JRequest::getVar 不从编码的 URL 返回变量

> ID：13471360
> 
> 赞同：1
> 
> 时间：2012-11-20T10:35:50.823
> 
> 标签：joomla, joomla2.5, joomla-sef-urls

我的组件和 Joomla 的 SEF 链接有问题。我正在尝试使用`JRequest::getVar`从原始 URL 获取变量（用 指定`JRoute::_`）

我的**router.php**文件如下所示：

```
function PortfolioBuildRoute(&$query)
{
    $segments = array();

    if (isset($query['category'])) {
        $segments[] = $query['category'];
        unset($query['category']);
    }
    if (isset($query['subcategory'])) {
        $segments[] = $query['subcategory'];
        unset($query['subcategory']);
    }
    return $segments;
}

function PortfolioParseRoute($segments)
{
    $vars = array();
    $count = count($segments);

    if ($count) {
        $count--;
        $segment = array_shift($segments);
        if (is_numeric($segment)) {
            $vars['subcategory'] = $segment;
        } else {
            $vars['category'] = $segment;
        }
    }
    if ($count) {
        $count--;
        $segment = array_shift($segments) ;
        if (is_numeric($segment)) {
            $vars['subcategory'] = $segment;
        }
    }
    return $vars;
} 
```

我正在编码的 URL 最初看起来像： `index.php?option=com_portfolio&category=x&subcategory=y`并将`JRoute::_`其转换为`/portfolio/x/y`. 我现在需要的是在 url 编码后获取变量*x*和*y的某种方法？*

- - 编辑 - -

好的，所以我想通了 - 我将 router.php 文件的 ParseRoute 部分更改为：

```
function PortfolioParseRoute($segments)
{
    $vars = array();
    $vars['category'] = str_replace(":", "-", $segments[0]);
    $vars['subcategory'] = str_replace(":", "-", $segments[1]);
    return $vars;
} 
```

我觉得我现在对 router.php 文件有了更好的理解。事实证明，JRoute 将您 url 中的连字符转换为冒号！不太清楚为什么它会选择可怜的连字符，大 JRoute 恶霸。我可以在 URL 中使用下划线，它可以正常工作，但连字符比下划线更好。

我在 ParseRoute 的每个段上都使用了 str_replace 来解决这个问题。

我不确定这是否是解决此问题的正确和标准方法，但我是 Joomla 和 PHP 菜鸟，所以在收到其他建议之前必须这样做。

至少它有效！

:)

# java - Selenium Web 驱动程序：MalformedByteSequenceException 2 字节 UTF-8 序列的第 2 字节无效

> ID：13471369
> 
> 赞同：1
> 
> 时间：2012-11-20T10:36:06.083
> 
> 标签：java, selenium, testng

我正在运行一个硒 Web 驱动程序项目。我正在使用一个 Excel 表作为我的测试用例的输入。我收到以下错误

```
org.testng.TestNGException: com.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException: Invalid byte 2 of 2-byte UTF-8 sequence.
at org.testng.TestNG.initializeSuitesAndJarFile(TestNG.java:340)
at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:88)
at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:204)
at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:175) Caused by: com.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException: Invalid byte 2 of 2-byte UTF-8 sequence.
at com.sun.org.apache.xerces.internal.impl.io.UTF8Reader.invalidByte(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.io.UTF8Reader.read(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLEntityScanner.load(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLEntityScanner.arrangeCapacity(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLEntityScanner.skipString(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLVersionDetector.determineDocVersion(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl.parse(Unknown Source)
at javax.xml.parsers.SAXParser.parse(Unknown Source)
at org.testng.xml.SuiteXmlParser.parse(SuiteXmlParser.java:17)
at org.testng.xml.SuiteXmlParser.parse(SuiteXmlParser.java:10)
at org.testng.xml.Parser.parse(Parser.java:172)
at org.testng.TestNG.initializeSuitesAndJarFile(TestNG.java:310)
... 3 more 
```

有人可以帮我解决这个错误。谢谢

Excel工作表驱动程序的代码是

```
package com.bigMachines.TCL.ExcelShhetDataProvider;
import java.io.File;
import java.io.IOException;
import java.util.HashMap;
import java.util.Set;
import org.testng.Assert;
import jxl.Sheet;
import jxl.Workbook;
import jxl.read.biff.BiffException;

public class ExcelSheetDriver {

    private Sheet wrksheet;
    private Workbook wrkbook =null;
    private HashMap<String, Integer> dict= new HashMap<String, Integer>();
    //Create a Constructor
    public ExcelSheetDriver(String ExcelSheetPath){ 
        try {
            wrkbook = Workbook.getWorkbook(new File(ExcelSheetPath));
            wrksheet = wrkbook.getSheet(0);
            columnDictionary();
        } catch (BiffException e) {
            Assert.fail(e.getMessage());
        } catch (IOException e) {
            Assert.fail(e.getMessage());
        }
    }

    //Returns the Number of Rows
    public int rowCount()
    {
        return wrksheet.getRows();
    }

    //Returns the Cell value by taking row and Column values as argument
    public String readCell(int column,int row)
    {
        return wrksheet.getCell(column,row).getContents();
    }

    public String readCell(String columnName,int row)
    {
        return readCell(getColumnNo(columnName), row);
    }

    //Create Column Dictionary to hold all the Column Names
    private void columnDictionary()
    {
        //Iterate through all the columns in the Excel sheet and store the value in Hashtable
        for(int col=0;col<wrksheet.getColumns();col++)
        {
            dict.put(readCell(col,0), col);
        }
    }

    //Read Column Names
    public int getColumnNo(String colName)
    {
        try {
            int value;
            value = ((Integer) dict.get(colName)).intValue();
            return value;
        } catch (NullPointerException e) {
            return (0);

        }
    }
    public Set<String> getColumnNameList(){
        return dict.keySet();
    }

} 
```

**编辑**

测试 XML 的链接在[这里](http://dl.dropbox.com/u/46023159/testng.xml)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:09:55.347

鉴于堆栈跟踪，看起来问题实际上与您的代码无关。看起来它位于您用来设置测试套件的 TestNG XML 文件中。

检查那个 XML 文件——我的猜测是它声明自己是 UTF-8，但*实际上是*其他一些编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:25:20.807

尽管您的 XML 文件有正确的声明：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

这不够。XML 文件仍然可以进行不同的编码。这是您应该尝试的：

1.  下载[记事本++](http://notepad-plus-plus.org/)（开源）

2.  打开您的 XML 文件

3.  单击格式 - 以 UTF-8 编码。见屏幕： ![在此处输入图像描述](../Images/39a7d8966acd01c9eaccdf2f07e505b8.png)

4.  保存文件并重试

当然，您可以跳过 1 并使用您喜欢的 trext 编辑程序。我知道如何在 Notepad++ 中做到这一点，所以这就是我提出这个解决方案的原因

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T11:47:20.130

尝试用其他 jar 替换项目中现有的 testng jar。

看起来 xml 解析器在解析 TestNG XML 文件时导致了这个异常。

**更新：**

如果您使用的是日食：

```
Right click on xml file and go to Properties.
There will be an option for Text File Encoding.
Check that it is set as UTF-8.
If not then made it as UTF-8. 
```

希望这会对你有所帮助。

# magento - iframe 和再营销代码疯狂

> ID：13471372
> 
> 赞同：1
> 
> 时间：2012-11-20T10:36:25.813
> 
> 标签：magento, iframe, footer

所以我几乎已经完成了与 Magento 的电子商务平台的工作，我们现在正在通过 Google 的广告展示网络运行再营销活动。

现在...

如果你看这里：http: [//img211.imageshack.us/img211/8859/52447256.jpg](http://img211.imageshack.us/img211/8859/52447256.jpg)

我已将再营销标签放在页脚链接下方，这导致这些链接在底部和中心移动，与之前一样，它在右侧齐平且整齐，与时事通讯选择加入表格一致。

造成这种情况的是 iframe 宽度。如果我将“300”设置为“0”，那么它会恢复到应有的状态并且完全符合要求。

现在问题...

我将此再营销标签放在 magento 中，并且该代码不提供任何 iframe html 代码。我通过以下方式检查了页脚：

\我的网站\html\app\design\frontend\base\default\template\page\html\footer.phtml

我发现了什么？几乎没有什么哈哈。所以现在我很困惑这个 iframe 是在哪里创建的以及如何解决它。任何想法将不胜感激！

史蒂夫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T09:32:40.940

我昨天在一个糟糕的 Comarch Aurum CMS 中工作时遇到了同样的问题，并且正在寻找一个不会让我被禁止的安全解决方案：

[Google 再营销代码 - iframe 高度问题](https://stackoverflow.com/questions/18467529/google-remarketing-tag-iframe-height-issue)

所以如果其他人有这个问题，最常见的解决方案是将conversion.js脚本标签插入隐藏的div：

```
<div style="display: none">
    <script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js">  </script>
</div> 
```

来源： [keanrichmond.com/google-remarketing-messing-with-my-design.html](http://keanrichmond.com/google-remarketing-messing-with-my-design.html)

# sql - Linq 查询头痛

> ID：13471373
> 
> 赞同：1
> 
> 时间：2012-11-20T10:36:28.180
> 
> 标签：sql, linq, entity-framework

对于一个项目，我们不得不将现有的表与实体框架一起使用。这解决了搜索功能的 1 个大型 linq 查询。目前，此功能需要 3 秒才能获得 10 个结果。

问题是是否有人知道改进此 linq 的要点？

这是 linq 查询：

```
var result = (from o in db.Objects
                                  join omsc in db.Omschrijvingen on o.Omschrijving_Identifier equals omsc.Identifier
                                  join a in db.Adressen on o.Adres_Id equals a.Adres_Id
                                  join oa in db.Object_Abonnement on o.Object_Id equals oa.Object_ID
                                  join oaf in db.Object_Afbeeldingen on o.Object_Id equals oaf.Object_Id
                                  where o.Enabled && oaf.StandaardAfbeelding == true &&
                                        (!iType.Any() || iType.Contains(o.Type_Id)) &&
                                        (iProvince < 1 || a.Provincie_Id == iProvince) &&
                                        (iDepartement < 1 || a.Departement_Id == iDepartement) &&
                                        o.Object_Logs.All(
                                            ol => ol.Log_Type != (int) ApplicationDefinitions.LogTypes.Deleted) &&
                                        (oa.Betaald && oa.Tot >= DateTime.Now) &&
                                        (!kenmerken.Any() ||
                                         db.Object_Kenmerken.Count(
                                             ken =>
                                             kenmerken.Contains(ken.Kenmerk_Id) && ken.Object_Id == o.Object_Id &&
                                             ken.Waarde.ToUpper() != "FALSE" && ken.Waarde != "0") == kenmerken.Count()) &&
                                        (search.Length < 1 || omsc.Naam.ToLower().Contains(search.ToLower()) ||
                                         omsc.Omschrijving.ToLower().Contains(search.ToLower()) ||
                                         a.Woonplaats.ToLower().Contains(search.ToLower()))
                                  select new FullObject
                                             {
                                                 Object_Id = o.Object_Id,
                                                 Adres_Id = a.Adres_Id,
                                                 DepartmentId = a.Departement_Id,
                                                 Department = (a.Departementen != null) ? a.Departementen.Naam : "",
                                                 ProviciesId = a.Provincie_Id,
                                                 Provicie = (a.Provicies != null) ? a.Provicies.Naam : "",
                                                 Contact_Id = o.Contact_Id,
                                                 Naam = omsc.Naam,
                                                 Omschrijving = omsc.Omschrijving,
                                                 Prijs =
                                                     (((db.Prijs_Periode.Where(pp => pp.Object_Id == o.Object_Id).Min(
                                                         pp => pp.Prijs_Dag) > 0)
                                                           ? db.Prijs_Periode.Where(pp => pp.Object_Id == o.Object_Id).
                                                                 Min(pp => pp.Prijs_Dag)
                                                           : db.Prijs_Periode.Where(pp => pp.Object_Id == o.Object_Id).
                                                                 Min(pp => pp.Prijs_Week)) > 0)
                                                         ? (db.Prijs_Periode.Where(pp => pp.Object_Id == o.Object_Id).
                                                                Min
                                                                (pp => pp.Prijs_Dag) > 0)
                                                               ? db.Prijs_Periode
                                                                     .Where(
                                                                         pp => pp.Object_Id == o.Object_Id)
                                                                     .Min(pp => pp.Prijs_Dag)
                                                               : db.Prijs_Periode
                                                                     .Where(
                                                                         pp => pp.Object_Id == o.Object_Id)
                                                                     .Min(pp => pp.Prijs_Week/7)
                                                         : (db.Prijs_Periode
                                                                .Where(pp => pp.Object_Id == o.Object_Id)
                                                                .Min(pp => pp.Prijs_Weekend) > 0)
                                                               ? db.Prijs_Periode
                                                                     .Where(
                                                                         pp => pp.Object_Id == o.Object_Id)
                                                                     .Min(pp => pp.Prijs_Weekend/3)
                                                               : (db.Prijs_Periode
                                                                      .Where(
                                                                          pp => pp.Object_Id == o.Object_Id)
                                                                      .Min(pp => pp.Prijs_Midweek) > 0)
                                                                     ? db.Prijs_Periode
                                                                           .Where(
                                                                               pp =>
                                                                               pp.Object_Id == o.Object_Id)
                                                                           .Min(pp => pp.Prijs_Midweek/14)
                                                                     : (db.Prijs_Periode
                                                                            .Where(
                                                                                pp =>
                                                                                pp.Object_Id == o.Object_Id)
                                                                            .Min(pp => pp.Prijs_Langweekend) >
                                                                        0)
                                                                           ? db.Prijs_Periode
                                                                                 .Where(
                                                                                     pp =>
                                                                                     pp.Object_Id == o.Object_Id)
                                                                                 .Min(
                                                                                     pp =>
                                                                                     pp.Prijs_Langweekend)
                                                                           : 0,
                                                 SPrijs = (((db.Prijs_Periode
                                                                 .Where(
                                                                     pp =>
                                                                     pp.Object_Id == o.Object_Id &&
                                                                     pp.Aanbieding == false)
                                                                 .Min(pp => pp.Prijs_Dag) > 0)
                                                                ? db.Prijs_Periode
                                                                      .Where(
                                                                          pp =>
                                                                          pp.Object_Id == o.Object_Id &&
                                                                          pp.Aanbieding == false)
                                                                      .Min(pp => pp.Prijs_Dag)
                                                                : db.Prijs_Periode
                                                                      .Where(
                                                                          pp =>
                                                                          pp.Object_Id == o.Object_Id &&
                                                                          pp.Aanbieding == false)
                                                                      .Min(pp => pp.Prijs_Week)) > 0)
                                                              ? (db.Prijs_Periode
                                                                     .Where(
                                                                         pp =>
                                                                         pp.Object_Id == o.Object_Id &&
                                                                         pp.Aanbieding == false)
                                                                     .Min(pp => pp.Prijs_Dag) > 0)
                                                                    ? db.Prijs_Periode
                                                                          .Where(
                                                                              pp =>
                                                                              pp.Object_Id == o.Object_Id &&
                                                                              pp.Aanbieding == false)
                                                                          .Min(pp => pp.Prijs_Dag)
                                                                    : db.Prijs_Periode
                                                                          .Where(
                                                                              pp =>
                                                                              pp.Object_Id == o.Object_Id &&
                                                                              pp.Aanbieding == false)
                                                                          .Min(pp => pp.Prijs_Week/7)
                                                              : (db.Prijs_Periode
                                                                     .Where(
                                                                         pp =>
                                                                         pp.Object_Id == o.Object_Id &&
                                                                         pp.Aanbieding == false)
                                                                     .Min(pp => pp.Prijs_Weekend) > 0)
                                                                    ? db.Prijs_Periode
                                                                          .Where(
                                                                              pp =>
                                                                              pp.Object_Id == o.Object_Id &&
                                                                              pp.Aanbieding == false)
                                                                          .Min(pp => pp.Prijs_Weekend/3)
                                                                    : (db.Prijs_Periode
                                                                           .Where(
                                                                               pp =>
                                                                               pp.Object_Id == o.Object_Id &&
                                                                               pp.Aanbieding == false)
                                                                           .Min(pp => pp.Prijs_Midweek) > 0)
                                                                          ? db.Prijs_Periode
                                                                                .Where(
                                                                                    pp =>
                                                                                    pp.Object_Id == o.Object_Id &&
                                                                                    pp.Aanbieding == false)
                                                                                .Min(pp => pp.Prijs_Midweek/14)
                                                                          : (db.Prijs_Periode
                                                                                 .Where(
                                                                                     pp =>
                                                                                     pp.Object_Id == o.Object_Id &&
                                                                                     pp.Aanbieding == false)
                                                                                 .Min(pp => pp.Prijs_Langweekend) >
                                                                             0)
                                                                                ? db.Prijs_Periode
                                                                                      .Where(
                                                                                          pp =>
                                                                                          pp.Object_Id == o.Object_Id &&
                                                                                          pp.Aanbieding == false)
                                                                                      .Min(
                                                                                          pp =>
                                                                                          pp.Prijs_Langweekend)
                                                                                : 0,
                                                 Personen =
                                                     (db.Object_Kenmerken.Any(
                                                         iok =>
                                                         iok.Kenmerk_Id == iAantalPersonenId &&
                                                         iok.Object_Id == o.Object_Id))
                                                         ? db.Object_Kenmerken.Where(
                                                             iok =>
                                                             iok.Kenmerk_Id == iAantalPersonenId &&
                                                             iok.Object_Id == o.Object_Id).Select(
                                                                 iok => EntitiesFunctions.ParseInt(iok.Waarde)).
                                                               FirstOrDefault()
                                                         : 0,
                                                 Slaapkamers =
                                                     (db.Object_Kenmerken.Any(
                                                         iok =>
                                                         iok.Kenmerk_Id == iAantalSlaapkamersId &&
                                                         iok.Object_Id == o.Object_Id))
                                                         ? db.Object_Kenmerken.Where(
                                                             iok =>
                                                             iok.Kenmerk_Id == iAantalSlaapkamersId &&
                                                             iok.Object_Id == o.Object_Id).Select(
                                                                 iok => EntitiesFunctions.ParseInt(iok.Waarde)).
                                                               FirstOrDefault()
                                                         : 0,
                                                 UrlKey = omsc.UrlKey,
                                                 Title = omsc.Title,
                                                 Plaats = a.Woonplaats,
                                                 Enabled = o.Enabled,
                                                 GoogleMap_Url = o.GoogleMap_Url,
                                                 InkoopPrijs = o.InkoopPrijs,
                                                 Type_Id = o.Type_Id,
                                                 Website = o.Website,
                                                 Adressen = o.Adressen,
                                                 Thumb = oaf.Tumbnial
                                             }
                                 )
                    .Where(item => (item.Prijs >= minPrice || minPrice == 0) &&
                                   (item.Prijs <= maxPrice || maxPrice == 0) &&
                                   (bOffersOnly == false || item.Prijs < item.SPrijs) &&
                                   (item.Personen >= personen || personen == 0) &&
                                   (item.Slaapkamers == slaapkamers || slaapkamers == 0))
                    .Distinct(); 
```

**为了更清楚：**

我们需要得到以下对象：

```
public class FullObject
        {
            public int Object_Id { get; set; }
            public int? Adres_Id { get; set; }
            public int Contact_Id { get; set; }
            public string Naam { get; set; }
            public string Omschrijving { get; set; }
            public decimal? Prijs { get; set; }
            public decimal? SPrijs { get; set; }
            public int Personen { get; set; }
            public int Slaapkamers { get; set; }
            public string UrlKey { get; set; }
            public string Title { get; set; }
            public string Plaats { get; set; }
            public int ProviciesId { get; set; }
            public string Provicie { get; set; }
            public int? DepartmentId { get; set; }
            public string Department { get; set; }
            public bool Enabled { get; set; }
            public string GoogleMap_Url { get; set; }
            public decimal? InkoopPrijs { get; set; }
            public int Type_Id { get; set; }
            public string Website { get; set; }
            public List<Data.Object_Kenmerken> ItemKenmerken { get; set; }
            public Data.Adressen Adressen { get; set; }
            public string Thumb { get; set; }
        } 
```

我们必须过滤以下内容

```
int[] iType
string search
int[] kenmerken
int iProvince
int iDepartement
decimal minPrice
decimal maxPrice
int personen
int slaapkamers
bool bOffersOnly 
```

这是（一点）表结构：

[http://i.stack.imgur.com/3Y0Tf.jpg](http://i.stack.imgur.com/3Y0Tf.jpg)

我们试图单独获取所有内容，但由于数据库中有许多对象，我们总共得到了 12 秒（并且还在增长），然后由于过滤，我们需要全部获取它们。

我希望有人认为这是一个挑战，并看到我忽略的东西。

提前致谢。

克里斯蒂安

**因为这张票是关闭的，所以我的回答是：**

感谢所有的答复。

最好的是来自@Daniel-Hilgarth 的那个。不要将计算放在查询中。为了解决这个问题，我们选择在每 15 分钟运行一次的 SQL 作业中进行计算，并将结果直接放入 Object 表中。

接下来，我们将连接更改为数据库逻辑。感谢@Micheal-Samteladze。

所有这些更改都为我们提供了以下查询。

```
var result = (from o in db.Objects
                join omsc in db.Omschrijvingen on o.Omschrijving_Identifier equals omsc.Identifier
                where o.Enabled &&
                    (!iType.Any() || iType.Contains(o.Type_Id)) &&
                    (o.Prijs >= minPrice || minPrice == 0) &&
                    (o.Prijs <= maxPrice || maxPrice == 0) &&
                    (bOffersOnly == false || o.Prijs < o.SPrijs) &&
                    (o.Personen >= personen || personen == 0) &&
                    (o.Kamers == slaapkamers || slaapkamers == 0) &&
                    (iProvince < 1 || o.Adressen.Provincie_Id == iProvince) &&
                    (iDepartement < 1 || o.Adressen.Departement_Id == iDepartement) &&
                    o.Object_Logs.All(ol => ol.Log_Type != (int) ApplicationDefinitions.LogTypes.Deleted) &&
                    o.Object_Abonnement.Any(oa => oa.Betaald && oa.Tot >= DateTime.Now) &&
                    (!kenmerken.Any() || o.Object_Kenmerken.Count(ken => kenmerken.Contains(ken.Kenmerk_Id) && ken.Object_Id == o.Object_Id && ken.Waarde.ToUpper() != "FALSE" && ken.Waarde != "0") == kenmerken.Count()) &&
                    (search.Length < 1 || omsc.Naam.ToLower().Contains(search.ToLower()) || omsc.Omschrijving.ToLower().Contains(search.ToLower()) || o.Adressen.Woonplaats.ToLower().Contains(search.ToLower()))
                select new FullObject
                {
                    Object_Id = o.Object_Id,
                    Adres_Id = o.Adressen.Adres_Id,
                    DepartmentId = o.Adressen.Departement_Id,
                    Department = (o.Adressen.Departementen != null) ? o.Adressen.Departementen.Naam : "",
                    ProviciesId = o.Adressen.Provincie_Id,
                    Provicie = (o.Adressen.Provicies != null) ? o.Adressen.Provicies.Naam : "",
                    Contact_Id = o.Contact_Id,
                    Naam = omsc.Naam,
                    Omschrijving = omsc.Omschrijving,
                    Prijs = o.Prijs ?? 0,
                    SPrijs = o.SPrijs ?? 0,
                    Personen = o.Personen,
                    Slaapkamers = 0,
                    UrlKey = omsc.UrlKey,
                    Title = omsc.Title,
                    Plaats = o.Adressen.Woonplaats,
                    Enabled = o.Enabled,
                    GoogleMap_Url = o.GoogleMap_Url,
                    InkoopPrijs = o.InkoopPrijs,
                    Type_Id = o.Type_Id,
                    Website = o.Website,
                    Adressen = o.Adressen,
                    Thumb = o.Object_Afbeeldingen.FirstOrDefault(af => af.StandaardAfbeelding).Tumbnial
                }
            ) 
.Distinct(); 
```

这需要大约 1 秒半的时间才能给出前 10 个结果，而旧的结果至少需要 3 个。

但我仍然愿意接受建议。

谢谢

克里斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:02:58.270

当我查看您的查询时，我可以确定您正在查询查询中的数据库对象。

如果将逻辑推送到数据库中并在 LINQ 中获取结果，速度会快得多。

# iphone - ipad ios 5.1 中的界面方向问题

> ID：13471382
> 
> 赞同：0
> 
> 时间：2012-11-20T10:36:52.443
> 
> 标签：iphone, ipad, orientation, uiinterfaceorientation

我为 iPhone 和 iPad 创建了一个通用应用程序。在这个应用程序中，iPhone 是`navigation`类型，iPad 是`tab bar`类型。iPhone 支持横向和纵向，iPad 应用程序仅支持横向。

在 iPad 中，我`TabBarController`在登录窗口（当前模型视图）之后显示，当我第一次运行 iPad 应用程序时，它总是以纵向模式运行。即使我将方向模式设置为横向，也应该自动旋转横向。

所以请任何人都可以建议我哪里错了，或者我如何在横向模式下强制显示视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:50:21.737

我使用下面的代码强行改变了方向。它对我来说很好用：

```
if ([[UIDevice currentDevice] respondsToSelector:@selector (setOrientation:)]) {
  SEL selector = NSSelectorFromString (@" setOrientation:");
  NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:[UIDevice instanceMethodSignatureForSelector:selector]];
  [invocation setSelector:selector];
  [invocation setTarget:[UIDevice currentDevice]];
  int Val = UIInterfaceOrientationLandscapeRight;
  [invocation setArgument:& val atIndex:2];
  [invocation invoke];
 } 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:35:54.273

只需在 applicationdelegate.m 文件中添加以下代码

```
self.window.rootViewController = self.navController;

and also remove [self.window addSubview:self.navController.view];

this will definitely working.. 
```

# magento - $_request 参数的布局 xml 条件

> ID：13471385
> 
> 赞同：3
> 
> 时间：2012-11-20T10:37:03.863
> 
> 标签：magento, layout

我知道理论上可以使用系统配置来确定页面的布局（使用`ifconfig`选项），是否可以对 get 或 post 传递的变量做类似的事情？或者是 cookie 值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T12:02:44.303

这在标准 Magento 中是不可能的。

根据您的用例，有一些方法：

1.  实现一个自己的 XML 属性，例如[Aoe_LayoutConditions](https://github.com/fbrnc/Aoe_LayoutConditions)`<action method="foo" ifrequestvar="...">`模型可以为您提供一个起点：

2.  添加自己的布局句柄。即，您检查在普通 PHP 代码中应满足的条件（如果条件有效，即`$_REQUEST`var 的值始终相同），然后您可以在布局 XML 中使用此布局句柄。您可以在观察者中添加布局句柄，如[N98_CustomLayoutHandles](https://github.com/netz98/N98_CustomLayoutHandles/blob/master/src/app/code/community/N98/CustomLayoutHandles/Model/Observer.php)所示。

# jquery - 如何将 onChange 事件添加到 JQuery.DatePicker 的下拉框

> ID：13471386
> 
> 赞同：0
> 
> 时间：2012-11-20T10:37:03.060
> 
> 标签：jquery, jquery-ui, datepicker, jquery-ui-datepicker

我有以下情况：[小提琴](http://jsfiddle.net/ff6Ex/)

我想要的是`onChange`在下拉框中添加一个事件，`datepicker`以便我能够在上面的文本框中捕获选定的月份/年份，因为从日历中选择了一个新值。

PS：检查相关的下拉框，已经`onChange`分配了一个命令，看起来像

```
onchange="DP_jQuery_1353406309923.datepicker._selectMonthYear('#datepicker', this, 'M');" 
```

我不想覆盖这个。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:44:11.047

使用[`onChangeMonthYear`](http://api.jqueryui.com/datepicker/#option-onChangeMonthYear)选项：

> **onChangeMonthYear**
> 
> > 当日期选择器移动到新的月份和/或年份时调用。该函数接收选定的年、月 (1-12) 和 datepicker 实例作为参数。这指的是关联的输入字段。

```
$(function() {
    $( "#datepicker1" ).datepicker({
      changeMonth: true,
      changeYear: true,
      dateFormat: 'MM yy',
      altField: "#id",
      altFormat: "mm/yy",
      onChangeMonthYear: function(year, month, oDatepicker) {
        alert('Year: ' + year + ', Month: ' + month);
      }
    });
});​ 
```

你的小提琴，更新：http: [//jsfiddle.net/ff6Ex/1/](http://jsfiddle.net/ff6Ex/1/)

# android - java.lang.OutOfMemoryError 在android中使用Base64从相机拍照

> ID：13471387
> 
> 赞同：0
> 
> 时间：2012-11-20T10:37:08.410
> 
> 标签：android, camera, imageview

我正在使用 Base64 从相机拍照以及从 SD 卡中挑选图像，同时在 imageview 中保存图像时出现 OutOfMemoryError。下面是错误日志。请帮忙。

错误日志

```
11-20 15:58:50.098: E/AndroidRuntime(4790): FATAL EXCEPTION: main
11-20 15:58:50.098: E/AndroidRuntime(4790): java.lang.OutOfMemoryError
11-20 15:58:50.098: E/AndroidRuntime(4790):     at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
11-20 15:58:50.098: E/AndroidRuntime(4790):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:500)
11-20 15:58:50.098: E/AndroidRuntime(4790):     at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:306)
11-20 15:58:50.098: E/AndroidRuntime(4790):     at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:331)
11-20 15:58:50.098: E/AndroidRuntime(4790):     at com.Infoicon.KidsBSafeNew.MainActivity.onActivityResult(MainActivity.java:606)
11-20 15:58:50.098: E/AndroidRuntime(4790):     at android.app.Activity.dispatchActivityResult(Activity.java:4649)
11-20 15:58:50.098: E/AndroidRuntime(4790):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2996)
11-20 15:58:50.098: E/AndroidRuntime(4790):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3043)
11-20 15:58:50.098: E/AndroidRuntime(4790):     at android.app.ActivityThread.access$1100(ActivityThread.java:127)
11-20 15:58:50.098: E/AndroidRuntime(4790):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1188)
11-20 15:58:50.098: E/AndroidRuntime(4790):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-20 15:58:50.098: E/AndroidRuntime(4790):     at android.os.Looper.loop(Looper.java:137)
11-20 15:58:50.098: E/AndroidRuntime(4790):     at android.app.ActivityThread.main(ActivityThread.java:4441)
11-20 15:58:50.098: E/AndroidRuntime(4790):     at java.lang.reflect.Method.invokeNative(Native Method)
11-20 15:58:50.098: E/AndroidRuntime(4790):     at java.lang.reflect.Method.invoke(Method.java:511)
11-20 15:58:50.098: E/AndroidRuntime(4790):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-20 15:58:50.098: E/AndroidRuntime(4790):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-20 15:58:50.098: E/AndroidRuntime(4790):     at dalvik.system.NativeStart.main(Native Method)
11-20 15:58:50.118: E/System(4790): java.lang.IllegalStateException: Don't have database lock!
11-20 15:58:50.118: E/System(4790):     at android.database.sqlite.SQLiteDatabase.verifyLockOwner(SQLiteDatabase.java:2090)
11-20 15:58:50.118: E/System(4790):     at android.database.sqlite.SQLiteDatabase$1.entryRemoved(SQLiteDatabase.java:2182)
11-20 15:58:50.118: E/System(4790):     at android.database.sqlite.SQLiteDatabase$1.entryRemoved(SQLiteDatabase.java:2178)
11-20 15:58:50.118: E/System(4790):     at android.util.LruCache.trimToSize(LruCache.java:197)
11-20 15:58:50.118: E/System(4790):     at android.util.LruCache.evictAll(LruCache.java:285)
11-20 15:58:50.118: E/System(4790):     at android.database.sqlite.SQLiteDatabase.deallocCachedSqlStatements(SQLiteDatabase.java:2143)
11-20 15:58:50.118: E/System(4790):     at android.database.sqlite.SQLiteDatabase.closeClosable(SQLiteDatabase.java:1126)
11-20 15:58:50.118: E/System(4790):     at android.database.sqlite.SQLiteDatabase.finalize(SQLiteDatabase.java:1914)
11-20 15:58:50.118: E/System(4790):     at java.lang.Daemons$FinalizerDaemon.doFinalize(Daemons.java:182)
11-20 15:58:50.118: E/System(4790):     at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:168)
11-20 15:58:50.118: E/System(4790):     at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:40:58.140

用这个..

在 onActivityresult..

```
 @Override
 protected void onActivityResult(int requestCode, int resultcode, Intent intent)
 {
     super.onActivityResult(requestCode, resultcode, intent);
if(requestCode == 1)
     {
File out = new File(Environment.getExternalStorageDirectory(), "newImage.jpg");

         if(!out.exists())
         {
          Log.v("log", "file not found");
          Toast.makeText(getBaseContext(),

          "Error while capturing image", Toast.LENGTH_LONG)

          .show();

        return;

       }

         Log.v("log", "file "+out.getAbsolutePath());
         File f = new File(out.getAbsolutePath());

         try {

    ExifInterface exif = new ExifInterface(out.getAbsolutePath());
     orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, 1);
    //Toast.makeText(getApplicationContext(), ""+orientation, 1).show();
    Log.v("log", "ort is "+orientation);

   } catch (IOException e)
   {
    e.printStackTrace();
   }
          Bitmap photo =decodeFile(f,400,400);////after this use base64 to convet image because this function will do your file size in very normal size..so, outofMemory error not occured..

 }
} 
```

这是解码功能..

```
public static Bitmap decodeFile(File f,int WIDTH,int HIGHT){
     try {
         //Decode image size
         BitmapFactory.Options o = new BitmapFactory.Options();
         o.inJustDecodeBounds = true;
         BitmapFactory.decodeStream(new FileInputStream(f),null,o);

         //The new size we want to scale to
         final int REQUIRED_WIDTH=WIDTH;
         final int REQUIRED_HIGHT=HIGHT;
         //Find the correct scale value. It should be the power of 2.
         int scale=1;
         while(o.outWidth/scale/2>=REQUIRED_WIDTH && o.outHeight/scale/2>=REQUIRED_HIGHT)
             scale*=2;

         //Decode with inSampleSize
         BitmapFactory.Options o2 = new BitmapFactory.Options();
         o2.inSampleSize=scale;
         return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
     } catch (FileNotFoundException e) {}
     return null;
 } 
```

# java - Maven EAR 编译

> ID：13471390
> 
> 赞同：0
> 
> 时间：2012-11-20T10:37:13.240
> 
> 标签：java, maven, ear

我有这种依赖（以及许多其他类似的）：

```
<dependency>
    <groupId>jShrink</groupId>
    <artifactId>jShrink</artifactId>
    <version>3.0.2</version>
    <scope>system</scope>
    <systemPath>${project.basedir}/../kladr-ear/lib/jShrink-3.0.2.jar</systemPath>
</dependency> 
```

那么如何在打包时使用 MAVEN 将此 JAR 添加到 EAR/LIB 文件夹中呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:40:31.507

查看可用的 Maven[范围](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)，我希望您将其标记为

```
<scope>compile</scope> 
```

并将 jar 文件上传到您的存储库（本地或远程）。Maven 应该为您提供适当的命令行来执行该上传。

编辑：如下所述，此范围是*default*，因此您可以省略它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:44:55.180

进入 EAR 的依赖项通常应该基于 EJB 模块所需的依赖项。如果您在编译范围内有一个带有库 X 的 EJB 模块，那么这将触发 Maven 想要将该库打包到 EJB 所属的耳朵中。无需在耳机中管理任何范围。

如果您没有任何 EJB 而只有 WAR，我不会在 EAR 中打包库，而只是将它们部署为 WAR 的一部分（因此它们最终位于 WEB-INF/lib 中）。保持良好的网络依赖关系并包含在每个模块中，即使这意味着您会得到重复。

compile 也是默认范围，因此您不需要手动声明它，除非您这样做是为了覆盖为依赖项设置的另一个范围。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-22T09:36:51.270

所以我找到了将 jar 库放入 ear/lib 路径的方法。我已将它们添加`<jarModule>`到`maven-ear-plugin`. 同样在`<jarModule>`我添加的每个`<bundle>`- 将复制此 jar 的路径。

# hibernate - " 找不到 " 错误的吸气剂

> ID：13471401
> 
> 赞同：3
> 
> 时间：2012-11-20T10:37:53.993
> 
> 标签：hibernate

> **可能重复：**
> [Hibernate - PropertyNotFoundException：找不到 getter](https://stackoverflow.com/questions/921239/hibernate-propertynotfoundexception-could-not-find-a-getter-for)

当我尝试运行我的代码时出现错误。可以请各位帮忙。我附上了我的映射文件。这里的问题是，正在低于错误。“ org.hibernate.PropertyNotFoundException：在类 bean.Employee 中找不到 eployeedetail 的吸气剂”

这是我的员工班

```
 package bean;

   import bean.EployeeDetails;

   public class Employee {

    int             EmpId;
    String          name;
    String          phone;
    EployeeDetails          Edetails;

   public EployeeDetails getEdetails() {
        return Edetails;
    }
    public void setEdetails(EployeeDetails eDetails) {
        Edetails = eDetails;
    } 
```

和其他吸气剂和二传手。

员工详细信息.hbm.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC
       "-//Hibernate/Hibernate Mapping DTD//EN"
       "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

       <hibernate-mapping>
        <class name="bean.EployeeDetails" table="eployeedetail">
            <id name="EmpId">
                <column name="employee_id"/>
                <generator class="foreign" >
                <param name="property">eployee</param>
                </generator>
            </id>
            <one-to-one name="eployee" class="bean.Employee" constrained="true"></one-to-one>
            <property name="Address" column="ADDRESS"/>
        </class>
       </hibernate-mapping> 
```

员工.hbm.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC
       "-//Hibernate/Hibernate Mapping DTD//EN"
       "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

       <hibernate-mapping>
        <class name="bean.Employee" table="eployee">
            <id name="EmpId" column="employee_id">
                <generator class="native" />
            </id>
            <one-to-one name="eployeedetail" class="bean.EployeeDetails"/>
            <property name="name" column="NAME"/>
            <property name="phone" column="PHONE"/>
        </class>
       </hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:07:13.877

更改您的代码

```
 EployeeDetails   Edetails; 
```

这

```
 EployeeDetails    Edetails = new EployeeDetails(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T06:00:35.177

问题出在`Employee.hbm.xml`. 每当您指定**一对一**标签时，您需要指定 2 个基本属性：

1.  **name**表示属性的名称。在你的情况下，它应该是`Edetails`& not `eployeedetail`。**这就是你得到例外的原因。**
2.  **class**表示与该类一对一关联的类名。在您的情况下，它应该是`EployeeDetails`.

更改`Employee.hbm.xml`，将一对一的标签属性**名称**更改为`Edetails`&您的问题将得到解决。

# django - django-compressor + less 压缩文件但链接到原始文件

> ID：13471405
> 
> 赞同：4
> 
> 时间：2012-11-20T10:38:16.473
> 
> 标签：django, less, django-compressor

我有一个带有 django-compressor 1.2 的 django 1.4.2 应用程序，用于压缩较少的文件。

**我在app/static/css/home.less**中有我的 less 文件。**它在static/CACHE/css/5208013a00a2.css** 下输出一个 less 文件

 **在本地运行时（Debug=True，文件由 django 提供）我得到了正确的响应。我的 html（模板）文件中的以下输出：

```
<link rel="stylesheet" href="/static/CACHE/css/5208013a00a2.css" type="text/css"> 
```

在部署中运行时（Apache 提供文件）我的响应很糟糕。我的 html 文件中的以下输出：

```
<link type="text/less" rel="stylesheet" href="/adduplicator/static/css/home.less" charset="utf-8"> 
```

这些文件是在**static/CACHE/css/5208013a00a2.css**下的部署中创建的，所以我假设没有权限问题。我在日志中没有任何问题。

settings.py 中的一些设置：

```
COMPRESS_PRECOMPILERS = (
    ('text/coffeescript', 'coffee --compile --stdio'),
    ('text/less', 'lessc {infile} {outfile}'),
)

STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
    'compressor.finders.CompressorFinder',
) 
```

部署是通过结构进行的，它在虚拟环境下创建应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T06:26:11.670

这可能适用于原始海报，也可能不适用，但我遇到了完全相同的错误（.less 文件被链接而不是被生成的 CSS 替换），这是因为我最近将 Django 设置为作为普通用户运行，而不是root，因此无权写入它以 root 身份创建的缓存文件夹。`chown -R myuser:mygroup static/cache`解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:01:15.060

我相信

`('text/less', 'lessc {infile} {outfile}'),`

应该

`('text/less', 'lessc {infile} > {outfile}'),`

因为没有重定向，lessc 将编译为标准输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-18T17:41:58.247

我遇到了类似的问题，我的设置与您的几乎相同（使用 apache、debug=False 等），但尚未解决。我发现如果我手动运行压缩（python manage.py compress），它会解决这个问题，但它只会暂时解决它。6-12 小时后问题会再次出现。

我正在压缩的 .css/.js 文件中没有任何动态 - 我使用 django 压缩器作为预编译我的lessc 和咖啡脚本的一种方式。

我希望您在去年秋天遇到此问题时找到了解决方法 - 对于遇到相同问题的其他人，请尝试手动运行 compress。我不知道为什么这会有所帮助，因为文件已经存在于缓存中，但出于某种原因（暂时）它确实如此。解决后我会更新。

编辑：过去 12 天没有再次出现问题。我仍然有点粗略地指出存在问题并且我不理解解决方案，但现在它正在工作，所以我专注于其他事情。如果您有这种性质的问题，请发表或评论。

如果您遇到此问题，建议的步骤：

1.  验证文件是否在 CACHE 目录中生成
2.  查看文件的所有权和 CACHE 目录，并在必要时对它们进行 chown
3.  查看缓存中文件的时间戳，验证它们是否合理
4.  运行 collectstatic 并手动压缩，然后重新启动服务器（如果您使用的是 python runserver 或 sudo service apache2 restart 或其他等效项，则终止并重新启动）**

# web-applications - 如何从 web.xml 指向tiles.xml

> ID：13471409
> 
> 赞同：1
> 
> 时间：2012-11-20T10:38:27.807
> 
> 标签：web-applications, struts2, tiles2

我是 struts2 的新手，实际上 Web 应用程序开发的新手刚刚开始开发示例应用程序。目前我在我的项目中使用 struts tile 概念。这是我在应用程序中引用tiles.xml 的方式。

```
 <listener>
            <listener-class>
                org.apache.struts2.tiles.StrutsTilesListener
            </listener-class>
    </listener>
    <context-param>
            <param-name>tilesDefinitions</param-name>
            <param-value>/WEB-INF/tiles.xml</param-value>
    </context-param> 
```

我想将tiles.xml 放到应用程序的资源文件夹中，尽管将它放在web-inf 文件夹中。我如何在 web.xml 中引用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:02:40.220

将配置文件从其原始位置移动是危险的，应逐个检查。

但通常你可以使用一个技巧：将一个 stub xml 配置文件放在它预期的位置，它只包含`include`真实文件的，位于 WEB-INF 之外（或在它内部但在另一个位置）：

```
<struts>
   <include file="..\struts.xml"/>
</struts> 
```

如此处所述：http: [//struts.apache.org/2.x/docs/struts-1-solutions.html](http://struts.apache.org/2.x/docs/struts-1-solutions.html)

对于属性，它更难......小心

# c# - 找不到方法：'MyProject.MvcApplication.RegisterRoutes'

> ID：13471418
> 
> 赞同：3
> 
> 时间：2012-11-20T10:38:48.407
> 
> 标签：c#, asp.net, apache, mono

我用 MonoDevelop 构建了一个简单的 ASP.NET MVC 2 项目，它在 MonoDevelop 的调试服务器上运行就可以了。

[然后我在http://go-mono.com/config-mod-mono/Default.aspx](http://go-mono.com/config-mod-mono/Default.aspx)生成虚拟主机 conf 文件并尝试在 apache 上运行，它抛出异常：

> System.MissingMethodException：找不到方法：'MyProject.MvcApplication.RegisterRoutes'

我应该如何解决这个问题？（单声道版本：2.10.8，apache 版本：2.2.23，mod_mono 版本：2.10）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:37:10.047

You are using mod-mono-server2 which is for asp.net 2.0, but you need support for asp.net 4.0

Change your host conf file to use mod-mono-server4

I also needed to install it which on ubuntu required the following command.

```
sudo apt-get install mono-apache-server4 
```

# extjs - 在 Chrome 中超时 Ext.Ajax.request 后未捕获的异常

> ID：13471419
> 
> 赞同：5
> 
> 时间：2012-11-20T10:38:50.003
> 
> 标签：extjs, extjs4, extjs4.1

我正在使用 ExtJS 4.1，当发生超时时，我在 Google Chrome 中遇到了一个未捕获的异常。

```
Ext.Ajax.timeout = 10000; // 10 seconds
Ext.Ajax.method = "GET";
Ext.Ajax.request({
    url:'rest/dataloggerset.json',
    params:{
           sessionGuid:Ext.getStore("User").getAt(0).get("sessionGuid"),
            loggerId:this.availableLogFiles.loggerId,
            logSet:this.currentLog
    },
    success:this.processReceivedLogData,
    failure:this.failureDuringResourceLoad,
    scope:this
}); 
```

请求以超时结束，并且尝试在对象中解析到目前为止接收到的数据。因此，我在开发人员控制台中看到的未捕获异常如下所示：

**未捕获的错误：INVALID_STATE_ERR：DOM 异常 11 Connection.js:914 Ext.define.createResponse Connection.js:914 Ext.define.onComplete Connection.js:859 Ext.define.abort Connection.js:767 request.timeout**

这个问题在FF中没有出现。由于未捕获的异常，我的方法 failureDuringResourceLoad 没有被调用。

值得一提的是，当定义的超时时间过去时，数据仍在传输。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T15:20:30.117

经过一些研究，我发现 xhr.abort() 行为在 Chrome 和 FF 中有所不同。在 Chrome 中，xhr.status 保持不变 200，而 FF 中的状态在调用 xhr.abort() 后设置为 0。

这种差异会在 ExtJS 4.1 中产生影响，即超时请求被误认为是有效响应。我使用以下覆盖来处理超时情况。在 ExtJS 4.1 中，请求对象上的变量标记是否发生超时。覆盖替换了 onComplete 方法。

```
Ext.define('Df.data.Connection', {
    override: 'Ext.data.Connection',

    onComplete : function(request) {
        var me = this,
            options = request.options,
            result,
            success,
            response;

        try {
            result = me.parseStatus(request.xhr.status);
        } catch (e) {
            // in some browsers we can't access the status if the readyState is not 4, so the request has failed
            result = {
                success : false,
                isException : false
            };
        }

        success = result.success && !request.timedout;

        if (success) {
            response = me.createResponse(request);
            me.fireEvent('requestcomplete', me, response, options);
            Ext.callback(options.success, options.scope, [response, options]);
        } else {
            if (result.isException || request.aborted || request.timedout) {
            response = me.createException(request);
            } else {
                response = me.createResponse(request);
            }
            me.fireEvent('requestexception', me, response, options);
            Ext.callback(options.failure, options.scope, [response, options]);
        }
        Ext.callback(options.callback, options.scope, [options, success, response]);
        delete me.requests[request.id];
        return response;
    }
}); 
```

更改可以在 Connection.js 中原始位置的第 856 行找到。我已经延长

```
success = result.success; 
```

至 ：

```
success = result.success && !request.timedout; 
```

如果有更方便的方法来解决这个问题，请告诉我！

# php - 在 yii 中如何编写插入查询

> ID：13471428
> 
> 赞同：3
> 
> 时间：2012-11-20T10:39:21.277
> 
> 标签：php, yii, insert

在 yii 中，我正在创建登录模块。成功登录后，我必须检索当前登录用户的用户 ID，并希望将该用户 ID 插入另一个“logintransLog”表中，该表将用户 ID 作为具有外键关系的属性。那么在 yii 中，如何检索当前的用户 ID 并将其插入到另一个表中呢？请帮我.....

* * *

如果只有用户 ID 正确且密码错误，我想将用户 ID 插入表“loginAttempt”，以维护用户尝试登录的时间记录。那么我该如何实现呢？我有 actionlogin 方法：

```
public function actionLogin()
{
    $model=new LoginForm;
    $command = Yii::app()->db->createCommand();

    // if it is ajax validation request
    if(isset($_POST['ajax']) && $_POST['ajax']==='login-form')
    {
        echo CActiveForm::validate($model);
        Yii::app()->end();
    }

    // collect user input data
    if(isset($_POST['LoginForm']))
    {
        $model->attributes=$_POST['LoginForm'];
        // validate user input and redirect to the previous page if valid
        if($model->validate() && $model->login())
        {
                $command->insert('trans', array(
                    'id'=>Yii::app()->user->getId(),
                //'Ipaddress'=>Yii::app()->user->getIpaddress(),
                ));
            $this->redirect(Yii::app()->user->returnUrl);
        }

    }
    // display the login form
    $this->render('login',array('model'=>$model));
} 
```

请帮我

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-20T10:55:18.103

1、简单正确：制作模型`logintransLog`表并使用：

```
$log = new logintransLog();
$log->user_id = $user->id;
$log->created = date('Y-m-d H:i:s');
$log->save(); 
```

第二，快速 - 使用 createCommand ：

```
$sql = "insert into logintransLog (user_id, created) values (:user_id, :created)";
$parameters = array(":user_id"=>$user->id, ':created' => date('Y-m-d H:i:s'));
Yii::app()->db->createCommand($sql)->execute($parameters); 
```

* * *

```
// try this, if any validation failed it was count as login attempt
if ($model->validate() && $model->login()) {
        $command->insert('trans', array(
           'id'=>Yii::app()->user->getId(),
         //'Ipaddress'=>Yii::app()->user->getIpaddress(),
        ));
        $this->redirect(Yii::app()->user->returnUrl);
} else {
        $command->insert('loginAttempt', array(
           'username'=>$model->username,
           'Ipaddress'=>$_SERVER['REMOTE_ADDR'],
        ));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:12:37.110

还有另一种方式使用 `$log->insert();` 而不是 `$log->save();`

# java - 使用 Spring 的 Java EE 服务器中的 web.xml 文件的目的是什么？

> ID：13471431
> 
> 赞同：-1
> 
> 时间：2012-11-20T10:39:26.750
> 
> 标签：java, spring, web.xml, deployment-descriptor

我是 spring 新手，我想了解有关 Spring 的概念。我正在开发一个具有 web.xml 文件的 spring 项目，如下所示：

```
<servlet>
<servlet-name>spring</servlet-name>
<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
<init-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
</init-param>
<load-on-startup>1</load-on-startup> 
```

```
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>*.do</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>*.vxml</url-pattern>
</servlet-mapping>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
</context-param> 
```

我想知道这个 web.xml 是做什么的？请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:54:59.107

在一个论坛上提出问题，而这个问题的答案填满了整本书的章节，这并不是很有效。我建议您阅读免费的在线书籍[http://pdf.coreservlets.com](http://pdf.coreservlets.com)，在我看来，这是关于 Servlet 的最佳书籍之一。它很旧，因此缺少一些信息，但仍然是一个很好的资源，可以帮助您理解这一切的含义。

简短的回答是：web.xml 用于配置 Web 应用程序的某些方面。在上一个 servlet 规范 (3.0) 中，它已经基本过时了。您仍然可以使用它，但是对于大多数事情（例如 servlet），您现在可以只使用注释。

如果您使用的容器不支持 Servlet 3.0 规范，那么您仍然有义务使用它。

# ruby - 修改 ruby 中的活动记录关系

> ID：13471437
> 
> 赞同：0
> 
> 时间：2012-11-20T10:39:50.120
> 
> 标签：ruby, json, controller, split

我的@albums 运行良好；使用 albums.json 提取数据。我想做的是将这个@albums 分成三个部分。我在想像 { "ownAlbums" : [ ... ], "friendSubscriptions" : [ ... ], "otherSubscriptions" : [ ... ] } 但我遇到了几个错误，例如

```
syntax error, unexpected tASSOC, expecting kEND @albums["own"] => @albums 
```

当我尝试

```
@albums["own"] => @albums 
```

或者

```
TypeError (Symbol as array index): 
```

当我尝试时：

```
@albums[:otherSubscriptions] = 'others' 
```

等等。我以前从未尝试过这样的事情，但这个 .json 只是一个简单的数组？我怎样才能把它分成三部分？还是我必须修改活动记录才能这样做？因为如果是这样，我会找到另一种方法而不是分裂。

**第二次编辑** 我尝试了这样的事情，它实际上正在工作：

```
@albums = [*@albums]
own = []
cnt = 0
@albums.each do |ownAlbum|
cnt = cnt.to_int
  own[cnt] = ownAlbum
  cnt=cnt+1
end

subs = Subscription.where(:user_id => @user.user_id)

@albums[0] = own
@albums[1] = subs 
```

但是在我有 [0] 和 [1] 的地方，我更喜欢字符串。但后来我收到错误：TypeError（无法将字符串转换为整数）：

如何解决这个问题？

# javascript - JavaScript 函数之间的区别

> ID：13471439
> 
> 赞同：1
> 
> 时间：2012-11-20T10:39:52.530
> 
> 标签：javascript, jsp

我有一些疑问，如果一个jsp页面`onclick()`调用一个JavaScript方法。

我有两种情况

1.  `onclick="return validatePage();"`
2.  `onclick="validatePage();"`

这两种类型的 JavaScript 方法调用有什么区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:45:44.133

首先，通过返回函数的返回值，您将取消函数返回时事件的默认操作`false`。类似于调用[`event.preventDefault()`](https://developer.mozilla.org/en-US/docs/DOM/event.preventDefault)。特别是在检查表单有效性时使用它，返回`false`将取消表单提交。

附言。在表单验证的情况下`onclick`，您应该将其附加到表单的`onsubmit`事件中，而不是绑定按钮的验证函数。这样，如果用户通过在输入上按 Enter 触发提交，在提交之前仍会检查表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T10:44:59.730

如果您从 javascript 函数返回 false，则**onclick = "return validatePage();"** 不会提交表单值。

其中，在**onclick = "validatePage();"的情况下** 即使您从 Javascript 函数返回 false，也会提交表单值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T10:45:10.233

对于 onclick 事件，这两种情况本质上是等价的。您使用“return”的原因与表单的 onsubmit 事件而不是 onclick 更密切相关。当您将它与 onsubmit 一起使用时，如果函数返回 false，它将阻止提交表单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T10:45:41.310

数字 1 将返回由`validatePage();`函数返回的值。这可用于中断按键操作，例如（返回输入字段的 ），或将锚点 ( `false`)用作 JavaScript 按钮。数字 2 将简单地执行该功能。`onkeyup``<a href="....`

# c# - 如何在每个组之前的分组项目页面中插入图像列表？

> ID：13471442
> 
> 赞同：2
> 
> 时间：2012-11-20T10:39:52.400
> 
> 标签：c#, xaml, gridview, windows-8

我目前正在使用 XAML 和 C# 开发 Windows 8 应用程序。我开发了动态生成数据组的分组项目页面。我有一个社交媒体图标列表，我需要将它们放在每个组标题旁边，但在左侧对齐，如屏幕截图所示！

当我在 XAML 代码中添加列表时，它会在第一组的开头生成！我怎样才能为每个组拥有它？有任何想法吗？如果有人可以为我提供非常有用的代码。

![在此处输入图像描述](../Images/83311a6e70a88b804925dde260a59b52.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:20:20.883

在页面资源部分定义 GroupItemStyle 如下：

```
<Style x:Key="GroupItemStyle1" TargetType="GroupItem">
            <Setter Property="IsTabStop" Value="False"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="GroupItem">
                        <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="431*"/>
                                    <ColumnDefinition Width="429*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>
                                <ContentControl x:Name="HeaderContent" ContentTemplate="{TemplateBinding ContentTemplate}" ContentTransitions="{TemplateBinding ContentTransitions}" ContentTemplateSelector="{TemplateBinding ContentTemplateSelector}" Content="{TemplateBinding Content}" IsTabStop="False" Margin="{TemplateBinding Padding}" TabIndex="0" Grid.Column="1"/>
                                <ItemsControl x:Name="ItemsControl" IsTabStop="False" ItemsSource="{Binding GroupItems}" Grid.Row="1" TabIndex="1" TabNavigation="Once" Grid.Column="1">
                                    <ItemsControl.ItemContainerTransitions>
                                        <TransitionCollection>
                                            <AddDeleteThemeTransition/>
                                            <ContentThemeTransition/>
                                            <ReorderThemeTransition/>
                                            <EntranceThemeTransition IsStaggeringEnabled="False"/>
                                        </TransitionCollection>
                                    </ItemsControl.ItemContainerTransitions>
                                </ItemsControl>
                                <!-- ***** Put your social icon list here **** Start-->
                                <Button Content="Button" HorizontalAlignment="Left" Margin="0,194,0,0" Grid.Row="1" VerticalAlignment="Top"/>
                                <!-- ***** Put your social icon list here **** End -->
                            </Grid>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

将此样式应用于 GridView 为：

```
<!-- Horizontal scrolling grid used in most view states -->
        <GridView
            x:Name="itemGridView"
            AutomationProperties.AutomationId="ItemGridView"
            AutomationProperties.Name="Grouped Items"
            Grid.RowSpan="2"
            Padding="116,137,40,46"
            ItemsSource="{Binding Source={StaticResource groupedItemsViewSource}}"
            ItemTemplate="{StaticResource Standard250x250ItemTemplate}"
            SelectionMode="None"
            IsSwipeEnabled="false"
            IsItemClickEnabled="True"
            ItemClick="ItemView_ItemClick">

            <GridView.ItemsPanel>
                <ItemsPanelTemplate>
                    <VirtualizingStackPanel Orientation="Horizontal"/>
                </ItemsPanelTemplate>
            </GridView.ItemsPanel>
            <GridView.GroupStyle>
                <GroupStyle ContainerStyle="{StaticResource GroupItemStyle1}">
                    <GroupStyle.HeaderTemplate>
                        <DataTemplate>
                            <Grid Margin="1,0,0,6">
                            .......
                  </GroupStyle>
        </GridView.GroupStyle>
    </GridView> 
```

您将在此处看到每个组之前的示例按钮 -![在此处输入图像描述](../Images/753280b2307a46e2e4ebbdbda11c8b10.png)

**更新：**

使用以下组样式：例如：

```
 <Style x:Key="GroupItemStyle3" TargetType="GroupItem">
        <Setter Property="IsTabStop" Value="False"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="GroupItem">
                    <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="431*"/>
                                <ColumnDefinition Width="429*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <ContentControl x:Name="HeaderContent" ContentTemplate="{TemplateBinding ContentTemplate}" ContentTransitions="{TemplateBinding ContentTransitions}" ContentTemplateSelector="{TemplateBinding ContentTemplateSelector}" Content="{TemplateBinding Content}" IsTabStop="False" Margin="{TemplateBinding Padding}" TabIndex="0" Grid.ColumnSpan="2"/>
                            <ItemsControl x:Name="ItemsControl" IsTabStop="False" ItemsSource="{Binding GroupItems}" Grid.Row="1" TabIndex="1" TabNavigation="Once" Grid.Column="1">
                                <ItemsControl.ItemContainerTransitions>
                                    <TransitionCollection>
                                        <AddDeleteThemeTransition/>
                                        <ContentThemeTransition/>
                                        <ReorderThemeTransition/>
                                        <EntranceThemeTransition IsStaggeringEnabled="False"/>
                                    </TransitionCollection>
                                </ItemsControl.ItemContainerTransitions>
                            </ItemsControl>

                            <StackPanel Background="Red" Grid.Row="1">
        <!-- ***** Put your social icon list here **** Start-->                 
            <Button Content="Button" HorizontalAlignment="Left" Margin="0" VerticalAlignment="Top"/>
                            <!-- ***** Put your social icon list here **** End -->
                            </StackPanel>

                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

这会给你：

![在此处输入图像描述](../Images/c8016517980e3dbcd22660a03743da58.png)

而这个将：

```
 <Style x:Key="GroupItemStyle2" TargetType="GroupItem">
            <Setter Property="IsTabStop" Value="False"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="GroupItem">
                        <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="431*"/>
                                    <ColumnDefinition Width="429*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>
                                <ContentControl x:Name="HeaderContent" ContentTemplate="{TemplateBinding ContentTemplate}" ContentTransitions="{TemplateBinding ContentTransitions}" ContentTemplateSelector="{TemplateBinding ContentTemplateSelector}" Content="{TemplateBinding Content}" IsTabStop="False" Margin="{TemplateBinding Padding}" TabIndex="0" Grid.Column="1"/>
                                <ItemsControl x:Name="ItemsControl" IsTabStop="False" ItemsSource="{Binding GroupItems}" Grid.Row="1" TabIndex="1" TabNavigation="Once" Grid.Column="1">
                                    <ItemsControl.ItemContainerTransitions>
                                        <TransitionCollection>
                                            <AddDeleteThemeTransition/>
                                            <ContentThemeTransition/>
                                            <ReorderThemeTransition/>
                                            <EntranceThemeTransition IsStaggeringEnabled="False"/>
                                        </TransitionCollection>
                                    </ItemsControl.ItemContainerTransitions>
                                </ItemsControl>

                                <StackPanel  Grid.RowSpan="2" Background="Red">
                                    <!-- ***** Put your social icon list here **** Start-->
                                    <Button Content="Button" HorizontalAlignment="Left" Margin="0" VerticalAlignment="Top"/>
                                    <!-- ***** Put your social icon list here **** End -->
                                </StackPanel>

                            </Grid>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

![在此处输入图像描述](../Images/170e24aa474216068bffdf555dbd0be5.png)

# asp.net-mvc - 在包管理器控制台中运行 enable-migrations 时出现错误

> ID：13471444
> 
> 赞同：13
> 
> 时间：2012-11-20T10:39:55.523
> 
> 标签：asp.net-mvc, entity-framework

我正在制作一个 ASP.NET MVC 项目......当我输入 enable-migrations 我得到以下错误：

```
More than one context type was found in the assembly 'eManager.Web'.
To enable migrations for eManager.Web.Infrastructure.DepartmentDb, use Enable-Migrations -ContextTypeName eManager.Web.Infrastructure.DepartmentDb.
To enable migrations for eManager.Web.Models.UsersContext, use Enable-Migrations -ContextTypeName eManager.Web.Models.UsersContext. 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-20T17:48:36.017

错误消息准确地说明了问题所在以及需要做什么——包括需要发出的命令。显然，您的项目中存在多个上下文（Web.Infrastructure.DepartmentDb 和 Web.Models.UsersContext），并且迁移不知道应该启用这些迁移中的哪一个。您需要指向上下文类型。根据错误消息使用：

```
Enable-Migrations -ContextTypeName eManager.Web.Infrastructure.DepartmentDb. 
```

为 eManager.Web.Infrastructure.DepartmentDb 或启用迁移

```
Enable-Migrations -ContextTypeName eManager.Web.Models.UsersContext. 
```

为 eManager.Web.Models.UsersContext 启用迁移

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-17T21:13:27.130

对于那些可能希望在项目中保持单一上下文的人。在这种情况下，它将是 DepartmentDb 上下文。

将以下代码移动到您的 DepartmentDb 上下文中：

```
public DepartmentDb() 
: base("DefaultConnection")
{

}

public DbSet<UserProfile> UserProfiles { get; set; }
```

下一步：访问您的 AccountModels.cs 并删除/注释掉 UsersContext 类。你会得到构建错误 - 所以用 DepartmentDb 替换 UsersContext 引用。

再次构建，它应该会成功。

现在转到包管理器控制台并运行 PM> enable-migrations

您应该获得“为项目 eManager.Web 启用代码优先迁移”。

# java - 创建 Android 应用程序的正确方法是什么？

> ID：13471445
> 
> 赞同：3
> 
> 时间：2012-11-20T10:39:59.423
> 
> 标签：java, javascript, android, google-maps

我对 Android 应用程序有一个好主意，但由于我只熟悉 php/js，我不确定应该选择哪种方法来创建它。该应用程序将基于带有大量位置标记的谷歌地图。不会有任何花哨的动画或其他需要大量资源的活动。

在我看来，有三种不同的选择：

1.  阅读 Java 并用 Java 编写整个程序
2.  在 Java 中将地图活动创建为地图视图，然后将网络视图用于其他活动（可以轻松地将其编写为 html5 网页的脚本。）
3.  将所有内容编写为 web 应用程序（不是一个真正的选项，因为这不是一个真正的移动应用程序恕我直言。

我最热衷于使用否。2 因为我对 html/php/js/mysql 非常熟悉。不过，必须阅读 html5 的细节。问题：

1.  我需要访问 GPS 和相机硬件。这在网络视图中可以实现吗？
2.  在 webview 活动中的 js 和其他活动中的 java 之间传递变量有多复杂？
3.  如果我使用选项 1 和选项 2，我可以预期性能会有多大差异？
4.  其他想法？

亲切的问候，安德斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T10:47:58.947

您可以选择数字 2，但是当我们谈论的是 Android 手机时，您可能希望获得真正准确的地图坐标，而您只能通过访问手机 GPS 来实现这一点，通过网络视图，您可以获得的最佳位置是位置浏览了设备的互联网 IP 地址，这不会导致非常准确的地理位置。在我看来，最好的选择是 100% java 应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T11:02:08.197

1）是的，这是可能的，但正如评论的那样，它会不太准确并且可能很慢。

2) 不复杂。如果您需要在 webview 和本机应用程序之间进行大量交互，那会很痛苦。使用可以从本机应用程序设置的 Javascript 接口。您基本上可以在 webview 的 html 中注入 javascript。

3) 性能的异质性取决于设备。因为您的实现将基于设备的浏览器，所以您可以预期旧设备的行为会非常缓慢。根据我的经验，与 HTML 事件（拖动、Tabbing ......）有关的任何事情都会对大多数设备产生影响。

4) 正如@vodich 评论的那样，还有其他方框架。我对 PhoneGap 和其他基于 js 的选项的基准测试是，如果您正在考虑开发专业应用程序，它们是在浪费时间。我没有在 Adob​​e AIR 上进行开发，但发现需要安装插件以获得本机功能（访问传感器、摄像头等）很痛苦 移动就是快速、响应式行为。HDI 是你的手指，用户很快，所以应用程序需要快速。

编辑：是啊！Java FTW！

阿尔伯特。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T10:47:49.210

> 4.其他的强项？

是的，如果你真的想制作一个出色的`Android`应用程序，你应该只使用`Android`特定`Android`的 UI 组件，并赋予它原生的外观和感觉。关于 1,2 是的，这是可能的，我想说只是整合它们并不复杂，但我认为你最终会遇到大问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T10:52:04.160

学习 Java 并以本机方式编写您的应用程序。

Webviews 可能允许您使用您的 php 技能向用户展示某些内容，但这完全是单向的——您将无法与里面的内容进行交互。

Android 开发者网站提供了出色的[文档](http://developer.android.com/index.html)，从 PHP 跳转到 Java 并不是很困难，尽管您需要习惯严格的类型和“真正的”OOP。

其他想法？不要走PhoneGap/跨平台工具包的道路——它可能允许你为多个平台编写应用程序并使用你当前的技能，但最终你会得到一个在任何一个平台上都感觉不对并且不合适的应用程序。不错，iOS 和 Android 的未来版本已经发布。

# java - 动态加载和启动 Java 类

> ID：13471448
> 
> 赞同：-1
> 
> 时间：2012-11-20T10:40:06.220
> 
> 标签：java, class

```
Class<? extends Runnable> theClass = 
    Class.forName("C:\Myclass.class").asSubclass(Runnable.class);
Runnable instance = theClass.newInstance();
new Thread(instance).start(); 
```

我想这样写`C:\\Myclass.class`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:46:22.303

`Class.forName()`采用类名，例如`java.lang.Thread`参数，而不是文件路径。您必须使用动态加载您的课程`ClassLoader`

参见：[动态加载java类文件的方法](https://stackoverflow.com/questions/6219829/method-to-dynamically-load-java-class-files)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T10:47:44.283

您的`Class.forName()`.

您必须为此方法提供完全限定的类名 (FQCN)。

如果要从外部源加载某个类，则必须编写自己的`ClassLoader`.

# android - 为什么在 android 2.3 中显示错误 OutOfMemoryError

> ID：13471450
> 
> 赞同：0
> 
> 时间：2012-11-20T10:40:18.657
> 
> 标签：android, json, ksoap2

我使用 ksoap2 从服务器获取数据（我的数据大约 6MB） 我的代码：

```
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);
            // envelope.dotNet=true;
            envelope.setOutputSoapObject(request);
            HttpTransportSE androidhttpTranport = new HttpTransportSE(URL,
                    ContantSystem.TimeOut);
            androidhttpTranport.call(SOAP_ACTIONS, envelope);

            Object responseBody = null;
            try {
                responseBody = envelope.getResponse();
            } catch (SoapFault e2) {
                // TODO Auto-generated catch block

            } 
```

当我同步数据时，我的应用程序显示异常：

```
11-20 17:16:02.271: E/AndroidRuntime(431): FATAL EXCEPTION: Thread-10
11-20 17:16:02.271: E/AndroidRuntime(431): java.lang.OutOfMemoryError
11-20 17:16:02.271: E/AndroidRuntime(431):  at org.kxml2.io.KXmlParser.push(KXmlParser.java:626)
11-20 17:16:02.271: E/AndroidRuntime(431):  at org.kxml2.io.KXmlParser.pushEntity(KXmlParser.java:794)
11-20 17:16:02.271: E/AndroidRuntime(431):  at org.kxml2.io.KXmlParser.pushText(KXmlParser.java:849)
11-20 17:16:02.271: E/AndroidRuntime(431):  at org.kxml2.io.KXmlParser.nextImpl(KXmlParser.java:354)
11-20 17:16:02.271: E/AndroidRuntime(431):  at org.kxml2.io.KXmlParser.next(KXmlParser.java:1378)
11-20 17:16:02.271: E/AndroidRuntime(431):  at org.kxml2.io.KXmlParser.nextText(KXmlParser.java:1432)
11-20 17:16:02.271: E/AndroidRuntime(431):  at org.ksoap2.serialization.DM.readInstance(DM.java:34)
11-20 17:16:02.271: E/AndroidRuntime(431):  at org.ksoap2.serialization.SoapSerializationEnvelope.readInstance(SoapSerializationEnvelope.java:462)
11-20 17:16:02.271: E/AndroidRuntime(431):  at org.ksoap2.serialization.SoapSerializationEnvelope.read(SoapSerializationEnvelope.java:420)
11-20 17:16:02.271: E/AndroidRuntime(431):  at org.ksoap2.serialization.SoapSerializationEnvelope.readUnknown(SoapSerializationEnvelope.java:289)
11-20 17:16:02.271: E/AndroidRuntime(431):  at org.ksoap2.serialization.SoapSerializationEnvelope.read(SoapSerializationEnvelope.java:422)
11-20 17:16:02.271: E/AndroidRuntime(431):  at org.ksoap2.serialization.SoapSerializationEnvelope.parseBody(SoapSerializationEnvelope.java:149)
11-20 17:16:02.271: E/AndroidRuntime(431):  at org.ksoap2.SoapEnvelope.parse(SoapEnvelope.java:137)
11-20 17:16:02.271: E/AndroidRuntime(431):  at org.ksoap2.transport.Transport.parseResponse(Transport.java:100)
11-20 17:16:02.271: E/AndroidRuntime(431):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:195)
11-20 17:16:02.271: E/AndroidRuntime(431):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:95)
11-20 17:16:02.271: E/AndroidRuntime(431):  at jp.osaka.APPLIActivity.getMSConditionSupportTime1(APPLIActivity.java:534)
11-20 17:16:02.271: E/AndroidRuntime(431):  at jp.osaka.APPLIActivity.access$2(APPLIActivity.java:517)
11-20 17:16:02.271: E/AndroidRuntime(431):  at jp.osaka.APPLIActivity$myrunable.run(APPLIActivity.java:358)
11-20 17:16:02.271: E/AndroidRuntime(431):  at java.lang.Thread.run(Thread.java:1019)
11-20 17:16:06.960: E/WindowManager(431): Activity jp.osaka.APPLIActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40571980 that was originally added here
11-20 17:16:06.960: E/WindowManager(431): android.view.WindowLeaked: Activity jp.osaka.APPLIActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40571980 that was originally added here
11-20 17:16:06.960: E/WindowManager(431):   at android.view.ViewRoot.<init>(ViewRoot.java:258)
11-20 17:16:06.960: E/WindowManager(431):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
11-20 17:16:06.960: E/WindowManager(431):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
11-20 17:16:06.960: E/WindowManager(431):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
11-20 17:16:06.960: E/WindowManager(431):   at android.app.Dialog.show(Dialog.java:241)
11-20 17:16:06.960: E/WindowManager(431):   at jp.osaka.APPLIActivity.showProccess(APPLIActivity.java:338)
11-20 17:16:06.960: E/WindowManager(431):   at jp.osaka.APPLIActivity.startProgram(APPLIActivity.java:306)
11-20 17:16:06.960: E/WindowManager(431):   at jp.osaka.APPLIActivity.onCreate(APPLIActivity.java:172)
11-20 17:16:06.960: E/WindowManager(431):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-20 17:16:06.960: E/WindowManager(431):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1586)
11-20 17:16:06.960: E/WindowManager(431):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1638)
11-20 17:16:06.960: E/WindowManager(431):   at android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-20 17:16:06.960: E/WindowManager(431):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:928)
11-20 17:16:06.960: E/WindowManager(431):   at android.os.Handler.dispatchMessage(Handler.java:99)
11-20 17:16:06.960: E/WindowManager(431):   at android.os.Looper.loop(Looper.java:123)
11-20 17:16:06.960: E/WindowManager(431):   at android.app.ActivityThread.main(ActivityThread.java:3647)
11-20 17:16:06.960: E/WindowManager(431):   at java.lang.reflect.Method.invokeNative(Native Method)
11-20 17:16:06.960: E/WindowManager(431):   at java.lang.reflect.Method.invoke(Method.java:507)
11-20 17:16:06.960: E/WindowManager(431):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-20 17:16:06.960: E/WindowManager(431):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-20 17:16:06.960: E/WindowManager(431):   at dalvik.system.NativeStart.main(Native Method) 
```

设置 `android:largeHeap="true"`后如果我在 android 4.0.3 上运行我的应用程序，我的应用程序运行正常。但是我在 android 2.3 上运行我的应用程序，我的应用程序死掉并显示异常：`java.lang.OutOfMemoryError` 为什么？如何解开这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:47:32.750

这是什么数据？

也许您或库正在读取单个块中的数据，这可能不是一个好主意，请尝试在小缓冲区中读取它，然后将其存储在文件缓存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T10:47:55.093

您可以使用 ActivityManager.getMemoryClass() 和 ActivityManager.getLargeMemoryClass() 来确保分配了更多内存。试试看。

# android - resolveUri 在错误的位图 uri 上失败：android.graphics.Bitmap@40566318...in android listview

> ID：13471451
> 
> 赞同：2
> 
> 时间：2012-11-20T10:40:19.760
> 
> 标签：android, hashmap

当我在 hashmap 中添加位图图像以在 listview 中显示它时出现此错误有什么帮助吗？

```
 hm = new HashMap<String, Object>();
            hm.put(IMAGE, ops);
            hm.put(TITLE, text);
            hm.put(CARDS_COUNT, cardsCount +" Stampii");
            items.add(hm);
    }

    final SimpleAdapter adapter = new SimpleAdapter(this, items, R.layout.main_listview,
            new String[]{TITLE, CARDS_COUNT, IMAGE}, new int[]{ R.id.main_name, R.id.main_info, R.id.main_img});
    listView.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:52:29.010

听起来您正在将`Bitmap`对象添加到地图中，但您应该添加的是指向位图的 uri（例如文件 uri、内容 uri，...），而不是其自身的位图。您还可以添加一个整数资源 ID（例如 R.drawable.my_bitmap）。

# jquery - 使用 jquery Flot 显示大量数据

> ID：13471454
> 
> 赞同：1
> 
> 时间：2012-11-20T10:40:38.850
> 
> 标签：jquery, flot

我正在使用 Jquery/Flot 插件开发一个 Web 应用程序，我需要显示一些 30.000 个数据点的时间序列。由于大量数据，我遇到了性能问题（所有浏览器）。当然，我不需要显示所有数据点，使用 400 像素的图表是不可能的。我的总体想法是只显示“最重要的数据”，所以我需要一个最佳实践/建议来保持良好的性能和不错的图表准确性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:37:30.760

如果您的图表是 400 像素宽，那么您的服务器端代码不应向浏览器发送超过 400 个点。

因此，例如，如果您有每分钟一个点的时间序列数据，那么一个解决方案是将所有值平均一个小时，将您的 30k 点降低到 500。如果数据出来，那将非常容易一个数据库；您的查询可能大致如下所示：

```
SELECT truncate_to_hour(data_time) as sample_time, avg(data_value)
FROM values
GROUP BY sample_time 
```

但显然没有单一的最佳实践。这取决于您的数据。

# c++ - 查找“找不到指定模块”的dll

> ID：13471457
> 
> 赞同：10
> 
> 时间：2012-11-20T10:40:52.707
> 
> 标签：c++, .net, windows, 64-bit, windows-installer

我有一个调用 C++ dll 的 32 位 .Net 应用程序 winform。我们将应用程序打包到一个安装程序中，它可以在至少 20 台左右的机器上安装和运行良好。该应用程序最初是在 Win 7 x64 机器（我的）上开发并运行良好。

但是，当我在老板桌面（Win 7 x64）上运行它时，应用程序将无法启动。哦耶...

当我尝试启动应用程序时，我得到一个 JIT 对话框

System.IO.FileNotFoundException：找不到指定的模块。（来自 HRESULT 的异常：0x8007007E）

当我运行依赖于老板机器上的 exe 时，它​​说应用程序 exe 是 x86，但所有依赖的 dll 都是 x64 并将其标记为错误。当我运行取决于我机器上的应用程序时，exe 和 dll 都标记为 x86。

这怎么会在机器之间发生变化？安装程序只是以正常方式解压缩和复制，并且可以在许多其他 x64 机器上正常工作......

自然它只会在两个小时外的他的机器上坏掉，我们还有一个贸易展。叹。很困惑...

=================解决==================

所以我们修复了它。找到丢失的 dll 有点棘手。

首先，我们搞砸了，我们为 x64机器运行了错误版本的[依赖。](http://www.dependencywalker.com/)所以它错误地报告应用程序正在寻找 x64 dll。如果我们运行了正确的版本，我想我们会更快地发现问题。

为我们解决的问题是从 System Internals中查看[Process Monitor的日志。](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)它记录每个文件访问和注册表读取。日志很快显示 Direct X 11 dll 读取失败。

事实证明，以前来自其他应用程序的安装程序已经安装**了一些**DX11 dll。这愚弄了我们的安装程序，它跳过了 DirectX 11 步骤，因此我们丢失了 dll。

谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T15:02:33.000

这是一个简单的“找不到文件”类型的错误，但具有非常尴尬的行为，它没有告诉您找不到*哪个DLL。*这可能是 C++ DLL，但也可能是它可能具有的任何隐式 DLL 依赖项。像运行时支持 DLL 一样，很容易错过，您可以使用 vcredist 安装程序部署它们。或者部署 DLL 的 Debug 版本，这是行不通的。

获得体面的诊断需要打开加载程序快照和调试器。在没有安装工具的机器上总是很难做到。SysInternals 的 ProcMon 实用程序是一个很好的替代方案，您将看到该程序正在搜索 DLL。尽管您会淹没在它生成的大量跟踪数据中。从跟踪的底部向后工作。

# mysql - Magento 捆绑产品 SQLSTATE[HY000]：一般错误：2006 MySQL 服务器已消失

> ID：13471458
> 
> 赞同：3
> 
> 时间：2012-11-20T10:40:54.023
> 
> 标签：mysql, magento, bundle

当我修改属于捆绑包的 Magento 1.7.0.2 简单产品时，有时我会收到错误消息：

```
SQLSTATE[HY000]: General error: 2006 MySQL server has gone away. 
```

在 mysql.slowquery.log 中出现了这个可怕的查询：

```
Query_time: 30.408723  Lock_time: 0.000463 Rows_sent: 0  Rows_examined: 128
SET timestamp=1353399962;

INSERT INTO `catalog_product_index_price_bundle_tmp` SELECT `e`.`entity_id`, `cg`.`customer_group_id`, `cw`.`website_id`, 0 AS `tax_class_id`, 0 AS `price_type`, IF(IF(IF(IFNULL(tas_special_from_date.value_id, -1) > 0, tas_special_from_date.value, tad_special_from_date.value) IS NULL, 1, IF(IF(IFNULL(tas_special_from_date.value_id, -1) > 0, tas_special_from_date.value, tad_special_from_date.value) <= cwd.website_date, 1, 0)) > 0 AND IF(IF(IFNULL(tas_special_to_date.value_id, -1) > 0, tas_special_to_date.value, tad_special_to_date.value) IS NULL, 1, IF(IF(IFNULL(tas_special_to_date.value_id, -1) > 0, tas_special_to_date.value, tad_special_to_date.value) >= cwd.website_date, 1, 0)) > 0 AND ta_special_price.value > 0 AND ta_special_price.value < 100 , ta_special_price.value, 0) AS `special_price`, tp.min_price AS `tier_percent`, IF(ta_price.value IS NULL, 0, ta_price.value) AS `orig_price`, 0 AS `price`, 0 AS `min_price`, 0 AS `max_price`, IF(tp.min_price IS NOT NULL, 0, NULL) AS `tier_price`, IF(tp.min_price IS NOT NULL, 0, NULL) AS `base_tier`, IF(IF(gp.price IS NOT NULL AND gp.price > 0 AND gp.price < 100, gp.price, 0) > 0, IF(gp.price IS NOT NULL AND gp.price > 0 AND gp.price < 100, gp.price, 0), NULL) AS `group_price`, IF(IF(gp.price IS NOT NULL AND gp.price > 0 AND gp.price < 100, gp.price, 0) > 0, IF(gp.price IS NOT NULL AND gp.price > 0 AND gp.price < 100, gp.price, 0), NULL) AS `base_group_price`, gp.price AS `group_price_percent` FROM `catalog_product_entity` AS `e`
 CROSS JOIN `customer_group` AS `cg`
 CROSS JOIN `core_website` AS `cw`
 INNER JOIN `core_store_group` AS `csg` ON csg.group_id = cw.default_group_id
 INNER JOIN `core_store` AS `cs` ON cs.store_id = csg.default_store_id
 INNER JOIN `catalog_product_website` AS `pw` ON pw.product_id = e.entity_id AND pw.website_id = cw.website_id
 INNER JOIN `catalog_product_index_website` AS `cwd` ON cw.website_id = cwd.website_id
 LEFT JOIN `catalog_product_index_tier_price` AS `tp` ON tp.entity_id = e.entity_id AND tp.website_id = cw.website_id AND tp.customer_group_id = cg.customer_group_id
 LEFT JOIN `catalog_product_index_group_price` AS `gp` ON gp.entity_id = e.entity_id AND gp.website_id = cw.website_id AND gp.customer_group_id = cg.customer_group_id
 INNER JOIN `catalog_product_entity_int` AS `tad_status` ON tad_status.entity_id = e.entity_id AND tad_status.attribute_id = 89 AND tad_status.store_id = 0
 LEFT JOIN `catalog_product_entity_int` AS `tas_status` ON tas_status.entity_id = e.entity_id AND tas_status.attribute_id = 89 AND tas_status.store_id = cs.store_id
 LEFT JOIN `catalog_product_entity_int` AS `tad_tax_class_id` ON tad_tax_class_id.entity_id = e.entity_id AND tad_tax_class_id.attribute_id = 115 AND tad_tax_class_id.store_id = 0
 LEFT JOIN `catalog_product_entity_int` AS `tas_tax_class_id` ON tas_tax_class_id.entity_id = e.entity_id AND tas_tax_class_id.attribute_id = 115 AND tas_tax_class_id.store_id = cs.store_id
 INNER JOIN `catalog_product_entity_int` AS `ta_price_type` ON ta_price_type.entity_id = e.entity_id AND ta_price_type.attribute_id = 117 AND ta_price_type.store_id = 0
 LEFT JOIN `catalog_product_entity_decimal` AS `ta_price` ON ta_price.entity_id = e.entity_id AND ta_price.attribute_id = 69 AND ta_price.store_id = 0
 LEFT JOIN `catalog_product_entity_decimal` AS `ta_special_price` ON ta_special_price.entity_id = e.entity_id AND ta_special_price.attribute_id = 70 AND ta_special_price.store_id = 0
 LEFT JOIN `catalog_product_entity_datetime` AS `tad_special_from_date` ON tad_special_from_date.entity_id = e.entity_id AND tad_special_from_date.attribute_id = 71 AND tad_special_from_date.store_id = 0
 LEFT JOIN `catalog_product_entity_datetime` AS `tas_special_from_date` ON tas_special_from_date.entity_id = e.entity_id AND tas_special_from_date.attribute_id = 71 AND tas_special_from_date.store_id = cs.store_id
 LEFT JOIN `catalog_product_entity_datetime` AS `tad_special_to_date` ON tad_special_to_date.entity_id = e.entity_id AND tad_special_to_date.attribute_id = 72 AND tad_special_to_date.store_id = 0
 LEFT JOIN `catalog_product_entity_datetime` AS `tas_special_to_date` ON tas_special_to_date.entity_id = e.entity_id AND tas_special_to_date.attribute_id = 72 AND tas_special_to_date.store_id = cs.store_id WHERE (e.type_id='bundle') AND (IF(IFNULL(tas_status.value_id, -1) > 0, tas_status.value, tad_status.value)=1) AND (ta_price_type.value=0) AND (e.entity_id IN(2399, 2400, 2401, 2402)) ON DUPLICATE KEY UPDATE `tax_class_id` = VALUES(`tax_class_id`), `price_type` = VALUES(`price_type`), `special_price` = VALUES(`special_price`), `tier_percent` = VALUES(`tier_percent`), `orig_price` = VALUES(`orig_price`), `price` = VALUES(`price`), `min_price` = VALUES(`min_price`), `max_price` = VALUES(`max_price`), `tier_price` = VALUES(`tier_price`), `base_tier` = VALUES(`base_tier`), `group_price` = VALUES(`group_price`), `base_group_price` = VALUES(`base_group_price`), `group_price_percent` = VALUES(`group_price_percent`); 
```

在数据库中，表**catalog_product_index_price_bundle_tmp**为空。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:24:09.173

我有同样的问题。尝试将此行添加到**my.cnf**：

```
优化器搜索深度 = 5
```

[MySQL Doc - 控制查询优化器](http://dev.mysql.com/doc/refman/5.0/en/controlling-optimizer.html)

# php - 点击浏览器后退按钮时提交表单

> ID：13471461
> 
> 赞同：1
> 
> 时间：2012-11-20T10:41:01.917
> 
> 标签：php, javascript

我有一个页面用于询问对 SQL 数据库的查询。它的唯一目的是让学生锻炼身体。根据学生的活动，页面会用新内容重写自身，以便学生可以输入查询、显示结果表或收到错误消息。

所有人都在处理将数据发布到同一页面的表单。

但是，如果学生使用后退按钮或前进按钮（在按下后退按钮后）数据会丢失，因为我清理 $_POST 变量内容以准备新操作。

但是，有一个“返回”按钮，通过 POST 所需的数据来组合数据以恢复上一页。是否可以使用某种技术（javascript、html5、PHP 或其他任何技术）在点击浏览器后退按钮时实际提交发布组装数据的表单？

我正在使用 HTML 5、PHP 5 和一些 JavaScript（不是 JQuery，但如果它给了我一个选项...）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:45:17.877

您可以使用 html5 存储，因为如果用户未填写完整表单或关闭浏览器，则数据将在关闭浏览器时丢失且不提交表单未填写

检查 html5 存储

```
 function supports_html5_storage() {
          try {
            return 'localStorage' in window && window['localStorage'] !== null;
          } catch (e) {
            return false;
          }
        } 
```

使用 onkeyup 来存储

```
 $("#title").keyup(function(){

            var articel_title =  $("#title").val();
            localStorage.setItem("articel_title",articel_title);
             localStorage.getItem("articel_title");
        }); 
```

下次用户打开表单时，只显示存储的内容

清除使用

```
localStorage.removeItem("articel_title"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T10:46:51.857

正如评论中所建议的，您可以将帖子数据存储在会话中，例如，每次发布新查询时，您都可以添加它：

```
$_SESSION['queries'][] = $_POST; 
```

然后你可以允许用户通过某种形式的循环来回退/前进：

```
<ul>
<?php foreach($_SESSION['queries'] as $k => $v) : ?>
    <li>Some link structure</li>
<?php endforeach; ?>
</ul> 
```

# android - jquery mobile div ui-grid内容相互折叠

> ID：13471462
> 
> 赞同：0
> 
> 时间：2012-11-20T10:41:08.090
> 
> 标签：android, jquery, css, jquery-mobile

我创建了一个动态 jqm 列表元素附加到 ul 。列表看起来像这样

```
 var html_sec = $('<li data-theme=c><div class=ui-grid-b><div class=ui-block-a>
         <a class="ui-link-inherit" href="link.html"><img src="'
        +imageurl+
        '" /></a></div><div class=ui-block-b><a class="ui-link-inherit" href="'
        +link_url+
        '"><span>'
        +name+
        '</span></a><br /><a class="ui-link-inherit" href="'
        +link_url+
        '"><span>'
        +name2+
        '</span></a></div><div class=ui-block-c><a class="ui-link-inherit" href="'
        +link url+'"><img src="'
        +image_url+
        '" /></a></div></div></li>');
html_sec.appendTo('ul');
$("#list").listview("refresh"); 
```

如您所见，该列表包含 2 张图片，并在中间添加了两个名称。我在这里面临的问题是当我动态地将这些 div 附加到内容时

1.名称在 ui-block-c 上重叠 2.图像未在 div 的中心对齐，必须使它们适合 div

我尝试了大多数基本的 css 和 jqm 功能，当我在模拟器上查看它时它不起作用。所以我必须做的是使这些内容位于相应的 div 中。提前致谢。

基本上，如果它像这样意味着内容在android移动模拟器中相互重叠

```
<div class="ui-grid-b">
   <div class="ui-block-a">asdfasdfadsfadfadfasdfadf</div>
   <div class="ui-block-b">asdfasdfadsfadfadfasdfadf</div>
   <div class="ui-block-c">asdfasdfadsfadfadfasdfadf</div>
</div> 
```

# c# - 在拆分页面模板中加载状态无法正常工作？

> ID：13471464
> 
> 赞同：0
> 
> 时间：2012-11-20T10:41:14.163
> 
> 标签：c#, windows-8, microsoft-metro

我在我的 Windows 8 应用程序（C#）中使用拆分页面模板，根据它的代码，当我们从列表视图中选择任何项目然后终止应用程序或按下后退按钮时，它应该记住当前选定的项目并在调试后我认为它保存pageState 中的当前选定值。但是在重新加载同一页面后，它无法重新加载（选择）相同的选定项目。我尝试使用拆分应用程序以及将拆分页面添加到我的应用程序。分页模板中是否有任何错误？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T05:59:19.520

您应该设置 SplitPage `NavigationCacheMode="Enabled"`。

并且还要确保每个项目在

```
if (selectedItem != null) pageState["SelectedItem"] = selectedItem.UniqueId; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T05:20:21.427

默认的拆分页面模板应用程序适合我。如果您在第一页 (ItemsPage) 上选择一个组，然后从列表中选择一个项目以访问 SplitPage，则该项目将*在您位于 SplitPage 时*暂停或终止。

但是，如果您点击后退按钮，应用程序不会记住您选择了该项目。一旦您返回 ItemsPage，即使您选择相同的组，它也会加载页面的“新”版本并选择默认的第一个元素。如果要恢复每个组的最后一个选定项目，则必须添加自己的代码。

请注意，还有一个名为[NavigationCacheMode](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.page.navigationcachemode.aspx)的属性将允许应用缓存 ItemsPage；但是，如果您这样做，您将看到最后一个选定组的 ItemsPage（和选定项），即使您从 ItemsPage 中选择了不同的组（换句话说，这在此处不起作用）。

最后，请注意，要测试“终止”状态，您需要通过 Visual Studio 中的模拟器运行应用程序并选择暂停和关闭。如果您只是退出应用程序（Alt+F4 或向下滑动），应用程序状态为“ClosedByUser”，在这种情况下默认不会恢复状态。

# objective-c - DOM 何时准备就绪以及如何枚举其元素？

> ID：13471466
> 
> 赞同：1
> 
> 时间：2012-11-20T10:41:16.000
> 
> 标签：objective-c, macos, dom, webview

使用 Webview，我想在此页面内找到链接。

```
-(void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame *)frame {
    DOMDocument *myDOMDocument = [[self.webview mainFrame] DOMDocument]; 
```

看起来是一个很好的起点，但我发现 WebScriptObject 类参考有点神秘。显然我不想评估一些 Javascript 来获取链接。我想直接读取 DOM。

如何找到 DOM 中的哪些节点是链接，并获取它们指向的地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:50:50.467

查找图像的 DOMNode

见 walkNodeTree @ [http://cocoadev.com/wiki/DOMCore](http://cocoadev.com/wiki/DOMCore)

-- 完成示例以查找图像节点、获取它们的 src 并制作 nsimages

```
@implementation DDAppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    [self.webview.mainFrame loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://dominik.pich.info/Home.html"]]];
}

-(void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame *)frame {
    DOMDocument *myDOMDocument = [[self.webview mainFrame] DOMDocument];

    NSMutableArray *imgs = [NSMutableArray array];
    [self walkNodeTree:myDOMDocument imgsCollected:imgs];

    //bad code, demo
    NSMutableArray *nsImages = [NSMutableArray array];
    for (DOMNode *img in imgs) {
        for(int i = 0; i < img.attributes.length; i++) {
            DOMNode *attr = [img.attributes item:i];
            NSLog(@"%@", attr.nodeName);
            if([attr.nodeName.lowercaseString isEqualToString:@"src"]) {
                NSString *urlstring = [attr nodeValue];
                NSURL *url = [NSURL URLWithString:urlstring relativeToURL:[NSURL URLWithString:@"http://dominik.pich.info/"]];
                NSImage *nsimg = [[NSImage alloc] initWithContentsOfURL:url];
                if(nsimg)
                    [nsImages addObject:nsimg];
            }
        }
    }

    NSLog(@"%@", nsImages);
}

- (void)walkNodeTree:(DOMNode*)parent imgsCollected:(NSMutableArray*)imgs {
    DOMNodeList *nodeList = [parent childNodes];
    unsigned i, length = [nodeList length];
    for (i = 0; i < length; i++) {
        DOMNode *node = [nodeList item:i];

        NSLog(@"%@", node.nodeName);
        if([node.nodeName.lowercaseString isEqualToString:@"img"]) {
            [imgs addObject:node];
        }
        else {
            //recurse
            [self walkNodeTree:node imgsCollected:imgs];
        }
    }
}
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-20T23:06:59.307

我一直在使用 [xpath](http://en.wikipedia.org/wiki/XPath)规范 [XPath 介绍](http://www.w3schools.com/xpath/xpath_intro.asp)

通过将 HTML 从 URL 传递到[NSXMLDocument](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CC4QFjAA&url=https://developer.apple.com/library/mac/documentation/cocoa/reference/foundation/Classes/NSXMLDocument_Class/Reference/Reference.html&ei=E2FkUu7RFYrP0QXqn4GgAQ&usg=AFQjCNH_zCoDbl6-nwDywT4Uxi8PqbbMxg&bvm=bv.54934254,d.d2k)，然后使用[NSXMLNode 的](https://developer.apple.com/library/mac/Documentation/Cocoa/Reference/Foundation/Classes/NSXMLNode_Class/Reference/Reference.html) [nodesForXPath:error 获取我想要的值：](https://developer.apple.com/library/mac/Documentation/Cocoa/Reference/Foundation/Classes/NSXMLNode_Class/Reference/Reference.html#//apple_ref/occ/instm/NSXMLNode/nodesForXPath:error:)

在这种情况下，我使用大型机的 URL。但是任何有效的 URL 都应该没问题。

两个 NSXML 类似乎都可以像解析 xml 一样解析 html

您可以搜索大量 xpath 查询字符串语法示例，我发现一旦您知道 HTML 标记和类语法是什么，就很容易深入了解 DOM 树。

我在这里对整个页面使用了一个非常简单**的 href查询。**

但是我已经包含了一个注释掉的例子来显示更多。

```
-(void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    [theWebView setFrameLoadDelegate:self];

    NSURL* fileURL = [NSURL URLWithString:@"http://example.com"];

    NSURLRequest* request = [NSURLRequest requestWithURL:fileURL];
     [[theWebView mainFrame] loadRequest:request];
}

-(void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame *)frame {
    NSError *err_p = nil;

    NSXMLDocument * xmlDoc = [[NSXMLDocument alloc] initWithContentsOfURL:[NSURL   URLWithString:[theWebView mainFrameURL]]
                                                                  options:(NSXMLNodePreserveWhitespace|
                                                                           NSXMLNodePreserveCDATA)
                                                                    error:&err_p];

    if (xmlDoc == nil) {

        xmlDoc = [[NSXMLDocument alloc] initWithContentsOfURL:[NSURL   URLWithString:[theWebView mainFrameURL]]
                                                      options:NSXMLDocumentTidyXML
                                                        error:&err_p];

    }

    NSError * error2;

      NSString *xpathQueryTRTest =@"//a";//--query string for all <a href tags
//--   for example 2 --NSString *xpathQueryTRTest =@"//div/p[1]";//--query string for all <a href tags
NSArray *newItemsNodesTRTEST = [xmlDoc nodesForXPath:xpathQueryTRTest error:&error2];//--xpath node results returned in an array

[xmlDoc release];

if (error2)
{
    [[NSAlert alertWithError:error2] runModal];
    return ;
}

for (NSXMLElement *node in newItemsNodesTRTEST)//--parse the nodes in the array
{

    NSLog(@"\nThe Node = %@\nThe node href value = %@", node, [[node attributeForName:@"href"]stringValue]);
    //--for example 2  --  NSLog(@"\nThe Node value = %@\n", [node stringValue]);
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T10:48:37.110

[以上两个](https://stackoverflow.com/a/13471616/766570) [答案](https://stackoverflow.com/a/19483933/766570)都是 MAC 独有的，而不是 iOS 独有的。如果您偶然发现此页面正在寻找 iOS 解决方案，请查看[本](http://www.raywenderlich.com/14172/how-to-parse-html-on-ios)教程，它基本上使用[hpple](https://github.com/topfunky/hpple)库进行 DOM 节点遍历。其余的很简单。

# mysql - 如何在 MySQL 中获取 SQL 查询对象或解析树？

> ID：13471467
> 
> 赞同：4
> 
> 时间：2012-11-20T10:41:14.563
> 
> 标签：mysql

我需要分析针对 MySQL 数据库运行的查询，以查看正在访问哪些表、列等。可能我也可能会进行查询重写。

MySQL 是否提供回调/挂钩，它可以将查询信息作为解析对象提供给我，而不是记录到文件中的原始字符串。

我阅读了有关[审核插件 API](http://dev.mysql.com/doc/refman/5.5/en/writing-audit-plugins.html)的信息，但它也将查询作为字符串而不是结构化格式传递。

任何帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:46:02.117

```
Does MySQL provide a callback/hook where it can give me the query information as a parsed object, instead of the raw string that gets logged to the files. 
```

No, there is no such interface.

There is no abstract syntax tree either, the parser produces structures that are very coupled with the server runtime.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-30T15:32:34.307

听起来您需要的是 AQT：[https](https://dev.mysql.com/worklog/task/?id=4533) ://dev.mysql.com/worklog/task/?id=4533 。但它只将 MySQL 查询转换为树，并没有考虑到您的数据库

# ios6 - ios 6 prepareForSegue 导致黑屏

> ID：13471468
> 
> 赞同：2
> 
> 时间：2012-11-20T10:41:18.110
> 
> 标签：ios6, storyboard, segue, uistoryboardsegue

我在使用情节提要时遇到问题。

我通过 push segue（其标识符为）将按钮（在 custom 内`uiviewcell`）正确连接到场景（）。除了在管理单元格的表视图控制器（）中，我实现了该方法：`ProfileVC``pic2profile``HomeVC``prepareForSegue`

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

    if([segue.identifier isEqualToString:@"pic2profile"]){
        ProfileVC *profile = (ProfileVC *)segue.destinationViewController;
        NSLog(@"%@", [segue identifier]);
        Tweet *tweet = [tweets objectAtIndex:0];
        profile.user = tweet.user;  
    }
} 
```

如文档中所述，一旦`segue.destinationViewController`在末尾调用，`prepareForSegue`应该在 segue 末尾显示视图控制器（`ProfileVC`在本例中）。发生的事情是我得到（没有错误！）一个黑屏，尽管对象“配置文件”不为空，但没有调用`viewDidLoad`in方法。`ProfileVC`

在情节提要中，ProfileVC 场景链接到其视图控制器 (ProfileVC)，并且还设置了情节提要 ID。

我已经尝试过[了](https://stackoverflow.com/questions/8945292/ios-5-black-screen-after-segue)，但是没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-22T21:17:03.510

您是否使用您拥有的代码对视图控制器执行 segue，但在两者之间有一个导航控制器？如果是这样，您必须使用不同的方式，在两者之间指定导航控制器。

如果您不需要导航控制器，您可以删除它并将单元格连接到视图控制器并保留您拥有的代码。否则你必须改变它。

# ember.js - Ember.js 绑定数组元素以查看

> ID：13471473
> 
> 赞同：2
> 
> 时间：2012-11-20T10:41:40.637
> 
> 标签：ember.js

我在 ember.js 模板中有以下代码。userController 是一个 ArrayController，其中包含多个“用户”。

```
{{#each CollaborativeEditor.userController}}
    {{#view CollaborativeEditor.OnlineUserView userBinding="this"}}
        <div class="avatar">
            <div class="avatar_name">{{name}}</div>
            <div class="avatar_status">{{status}}</div>
        </div>
        <div id="dropdown-1">
            <ul>
                <li><a href="#" {{action startChat target="onlineUser"}}>Talk to </a></li>
            </ul>
        </div>
    {{/view}}
{{/each}} 
```

这是各自视图的代码：

```
CollaborativeEditor.OnlineUserView = Ember.View.extend({
    tagName: 'li',
    startChat : function() {
        console.log(this.get('user'));
    }       
}); 
```

尽管为每个用户正确设置了名称和状态，但附加到链接的 startChat 操作始终将数组的第一个用户打印到控制台。绑定有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:48:07.247

非常感谢您的要求，把它放在一个 jsfiddle 中！

当我试图在那里重现错误时，我意识到了这个问题，它与 ember 无关。

id="dropdown-1" 的 div 是从另一个链接调用的，它始终是相同的 id，因此与其用户绑定始终相同。

现在我已经将 Id 绑定到用户对象并且它工作得很好。

# javascript - 替换已粘贴到字段中的换行符 - 经典 ASP

> ID：13471480
> 
> 赞同：1
> 
> 时间：2012-11-20T10:41:58.213
> 
> 标签：javascript, html, asp-classic

我遇到了一些代码问题。我浏览了整个网络并查看了 stackoverflow，但我看不出我还能做些什么来解决**经典 asp**的问题。

问题是我试图从输入 XML 字符串中删除大小写返回和换行，但是我的代码中遇到了一个缺陷，但不确定如何阻止这种情况发生。

```
function DisableEnter()
{
    if (window.event.keyCode == 13) 
        {
        event.returnValue=false; 
        event.cancel = true;
        }
} 
```

这会阻止用户输入“return”键，这很好但是当您复制并粘贴已输入的文本时会发生什么？在我的例子中，它绕过了这个检查并将它输入到数据库中。

```
Server.URLEncode(Replace(Replace(Replace(other_info,","," "),"\n",""),"\r","")) 
```

我已输入此替换以尝试解决我在很多帖子中注意到的 \n\r 是回车符和换行符的符号，但它仍然提交？

```
<td><textarea name="other_info" cols="30" rows="5" id="other_info" onkeypress="DisableEnter()" onkeyup="DisableEnter()"><%=Request("other_info")%></textarea></td> 
```

因此，基本上问题是我如何消除新行/回车/换行输入到已复制和粘贴的数据库中，因此，当我们将数据导出到 CSV 电子表格以供另一个应用程序读取时，这必须是在单元格中的 1 行。

如果您需要任何其他信息，请告诉我。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:29:52.963

嗨，这里是一个使用 javascript 的示例。

代码已准备好复制粘贴和测试

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
    <style>

    </style>
</head>
<body>
    <div id="container">
    <textarea id="data" cols="30" rows="5"></textarea>
    <button id="submit">submit</button>
    <textarea id="output" cols="30" rows="5"></textarea>
    </div>
</body>
<script>
    $(document).ready( function (){
        $('#submit').click(function(event){
            var txt = $('#data').val();
            var newstr = txt.replace(/\s/g, '');
            $('#output').val(newstr);
        });
    });

</script>
</html> 
```

# perl - 如何配置 LWPx::ParanoidAgent 以使用 /etc/hosts

> ID：13471481
> 
> 赞同：2
> 
> 时间：2012-11-20T10:41:58.820
> 
> 标签：perl, dns, hosts, lwp, lwp-useragent

最近我从使用 LWP::UserAgent 切换到 LWPx::ParanoidAgent 来获取第 3 方提供的 URL。

一切都很好，除了有时需要在 /etc/hosts 中查找来解析域。LWP::UserAgent 会自动执行此操作，但 LWPx::ParanoidAgent 只查询真实的 DNS 服务器。

如何配置 LWPx::ParanoidAgent 来搜索 /etc/hosts 呢？

更新：该模块让我设置一个 DNS 解析器（Net::DNS::Resolver）。有没有办法让 DNS 解析器也可以查看 /etc/hosts ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:54:11.840

我查看了模块的源代码。它不能被配置为这样做。

顺便说一句，它没有使用正常的名称解析系统，因为它想知道主机是否解析为另一个主机名（即当它是 CNAME 时），因此它也可以根据主机黑白名单检查该主机名。

如果你想添加这个功能，我建议在回`LWPx::ParanoidAgent::_resolve`退到原来的. 提供一个看起来相似的 Net::DNS::Resolver 将需要更多的工作。`/etc/hosts``!$depth``_resolve`

# tridion - 在 GUI 扩展中访问“自定义配置”

> ID：13471483
> 
> 赞同：10
> 
> 时间：2012-11-20T10:42:11.150
> 
> 标签：tridion, tridion-2011

我正在通过覆盖其中一个 javascript 文件的行为来执行用户界面 (SiteEdit) 的 GUI 扩展，以添加一些功能。javascript 文件是**“/Scripts/Components/ExtComponentField.js”**，目标是“ **SiteEdit** ”扩展：

> Tridion.Web.UI.Editors.SiteEdit.Views.Content

一切都适用于扩展，我有我想要的，但现在我正在尝试使用

> 设置/自定义配置/客户端配置

扩展配置的节点，使用一些初始化参数，但是没有办法访问javascript中的**$config**元素，并且**Tridion.Core.Configuration.Editors["myExt"].configuration**为空。

我已经看到在“仪表板”或“足迹”等各种 javascript 中使用此自定义配置，但是否可以在“内容”上使用它？我在扩展配置上遗漏了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:39:20.210

“内容”组中包含的代码在托管您发布的网页的 IFRAME 内运行。可以想象，其中包含的文件数量应该最小化，因此很多功能不可用。

我的建议是仅在主窗口中读取配置，然后通过使用 Tridion.Utils.CrossDomainMessaging 实用程序类 ($xdm) 将所需的设置传递给 IFRAME 中运行的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T22:09:38.310

恐怕我没有对此进行测试，但您应该可以使用：

```
Extensions.YourExt.getConfigurationItem = function (itemName, editorName)
{
    var editor = $config.Editors[editorName].configuration;
    if (editor)
    {
        var confXml = $xml.getNewXmlDocument(editor);
        var confObj = $xml.toJson(confXml);

        if (confObj[itemName])
            return confObj[itemName];
        else
            return "";
    }
} 
```

然后，您可以通过以下方式使用它：

```
$this.getConfigurationItem("YOUR_CONFIG_ITEM_NAME", "YOUR_EDITOR_NAME").toString(); 
```

在您的扩展配置（节点下方`<theme>`）中，您可以输入自己的配置值：

```
<customconfiguration>
  <clientconfiguration xmlns="http://www.sdltridion.com/2009/GUI/Configuration/Merge">
  <YOUR_CONFIG_ITEM_NAME>The value</YOUR_CONFIG_ITEM_NAME> 
```

你确定吗 ：）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-21T14:30:03.120

我通常使用带有以下内容的单独 JS 文件：

```
Type.registerNamespace("Extensions.Namespace");

Extensions.Namespace.getEditorConfigSection = function Editor$getEditorConfigSection() {
    if (this._settings === undefined) {
        var editor = $config.Editors["ThisEditorName"];
        if (editor && editor.configuration && !String.isNullOrEmpty(editor.configuration)) {
            var configSectionXmlDoc = $xml.getNewXmlDocument(editor.configuration);
            this._settings = $xml.toJson(configSectionXmlDoc.documentElement);
        }
    }
    return this._settings;
}; 
```

并在配置中将其添加到单独的组中：

```
<cfg:group name="Extensions.Namespace" merge="always">
    <cfg:fileset>
        <cfg:file type="script">/Scripts/Definitions.js</cfg:file>
    </cfg:fileset>
</cfg:group> 
```

然后在需要的地方，你可以添加以下依赖：

```
<cfg:dependency>Extensions.Namespace</cfg:dependency> 
```

然后我通常使用这样的函数来获取某个配置值：

```
Extensions.Namespace.Something.prototype._getMyConfigValue = function Something$_getMyConfigValue() {
    var configSection = Extensions.Namespace.getEditorConfigSection();
    if (configSection) {
        return configSection.myconfigvalue;
    }
}; 
```

# oracle - 在 oracle 中连接绑定变量

> ID：13471488
> 
> 赞同：0
> 
> 时间：2012-11-20T10:42:21.583
> 
> 标签：oracle, oracle10g

我有一个要求，我必须从表中选择 DB 链接的名称（有很多 DB 链接）到绑定变量中，然后从所有 DB 链接中可用的表中获取数据，但是数据因使用的 DB 链接而异。我没有得到使用绑定变量值作为数据库链接的解决方案。

这是我的代码：

`select`将 DB 链接提取到绑定变量的语句

```
SELECT DB_LINK into :v_db_link from reagions_db_links; 
```

然后我必须用它从表中获取数据

```
SELECT reagion_id, region_name from Table_details@:v_db_link 
```

我试图像下面这样连接，但它不起作用

```
SELECT reagion_id, region_name from Table_details@||:v_db_link 
```

请建议我一个解决方案，因为我可以有许多数据库链接，具体取决于用户选择的区域，我将它放入绑定变量中，然后想用它从表中获取数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:05:00.043

为此可以使用替代变量。这是如何完成的一个简单示例：（Sql*plus 环境）。

```
-- set-up table that stores db_links
SQL> create table db_links(
  2    dblink_name varchar2(31)
  3  );

Table created.

--add a test dblink 
SQL> insert into db_links(dblink_name) values ('TEST_DB_LINK');

1 row created.

SQL> commit;

Commit complete.

-- defining of  a substitution variable dblink 
SQL> column dblink_name new_value dblink noprint;

-- the value of the dblink_name column will be placed into the dblink 
-- substitution variable declared previously
SQL> select dblink_name from db_links;

-- now we query a table using db link name stored
-- in the dblink substitution variable
-- prefacing it with ampersand.

SQL> select count(*) from dbusers@&dblink;
old   1: select count(*) from dbusers@&dblink
new   1: select count(*) from dbusers@TEST_DB_LINK

  COUNT(*)                                                                      
----------                                                                      
       351                                                                      

SQL> spool off; 
```

# c - 从多线程进程调用 system(3) 是否安全？

> ID：13471489
> 
> 赞同：9
> 
> 时间：2012-11-20T10:42:25.520
> 
> 标签：c, linux, multithreading, fork

`system()`函数是通过使用`fork()`,`execve()`和`wait()`函数实现的。我听说这个`fork()`函数在多线程程序中很危险。那么，该`system()`函数在多线程程序中是否也很危险？

它可能会导致什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-11-02T12:07:14.773

该`system()`函数不一定是线程安全的。

[POSIX.1-2008 指定](http://pubs.opengroup.org/onlinepubs/9699919799/functions/system.html#tag_16_597_03)（以及 POSIX.1-2001）：

> system() 函数不必是线程安全的。

例如，[Solaris 10 文档`system()`为 thread-unsafe](https://www.freebsd.org/cgi/man.cgi?query=system&apropos=0&sektion=0&manpath=SunOS+5.10&arch=default&format=html#end)：

> system() 函数处理 SIGINT、SIGQUIT 和 SIGCHLD 的信号处理程序。因此，在多线程进程中调用 system() 是不安全的，因为操作这些信号处理程序的其他线程和同时调用 system() 的线程可能会以破坏性方式相互干扰。

该手册页还建议`popen()`作为线程安全的解决方法。请注意，`popen()`这不会更改任何信号处理程序。

在 Linux 上，[`system()`是线程安全的](http://man7.org/linux/man-pages/man3/system.3.html)。

请注意，`system()`不一定调用`fork()`. 一个实现可以使用`vfork()`, 代替。或者，在 Linux 上，它可以直接调用`clone()`. 它甚至可以使用`posix_spawn()`.

尽管[在多线程程序中分叉可能具有挑战性](http://www.linuxprogrammingblog.com/threads-and-fork-think-twice-before-using-them)，但通常情况下，直接跟在 exec 之后的分叉是安全的（以打开文件描述符为模）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T10:49:26.850

`fork`在线程程序中是危险的，**除非**后面跟着`execve`. 由于只有当前线程是分叉的，所以在分叉的多线程程序中除了`execve`. 您可能应该确保在`fork`.

既然`system()`做`fork`+ `exec`，它应该是安全的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T10:44:10.237

Fork 在多线程程序中很危险，因为它不会复制所有正在运行的线程。系统应该没问题，但是如果您有信号处理程序和多个线程等待（），您可能会再次陷入混乱。

# asp.net - 某些文件的 URL 错误，在此服务器上找不到请求的文档

> ID：13471494
> 
> 赞同：0
> 
> 时间：2012-11-20T10:42:44.550
> 
> 标签：asp.net, asp.net-mvc

大家好，我有一个有趣的问题。我想从数据库中读取一个 URL，但它给了我一些视频的这个错误！不是全部！（错误是`The requested document was not found on this server.`）在本地网络中它工作正常并且所有电影都在播放！但是当我在互联网上上传网站时，会发生错误。任何想法？这是很好的网址： [http](http://babakpirmoradi.ir/User/videos/Ostadpirmoradi2.flv) ://babakpirmoradi.ir/User/videos/Ostadpirmoradi2.flv 这是给出错误的网址：http: [//babakpirmoradi.ir/User/videos/418619301525735_21489.mp4](http://babakpirmoradi.ir/User/videos/418619301525735_21489.mp4)

这是我的代码：（GetUrl() 动态传递 URL）

```
<div style="width: 650px">
<video id="example_video_1" align="center" class="video-js" controls="controls" 
       height="442" preload="auto" width="590">
<source src=<%=GetURL()%> type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'/>    
</video></div> 
```

这是我的网址代码：

```
public string GetURL()
    {
        string connStr = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
        SqlConnection sqlconn = new SqlConnection(connStr);
        SqlCommand sqlcmd = new SqlCommand();
        sqlconn.Open();
        sqlcmd = new SqlCommand("SELECT Video FROM AddVideo where ID=@ID", sqlconn);
        sqlcmd.Parameters.AddWithValue("@ID", Request.QueryString["ID"]);
        string URL = ((string)sqlcmd.ExecuteScalar()).ToString();
        return URL;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:59:52.033

发生这种情况是因为视频实际上不存在或者我们无权访问它：

![视频不存在](../Images/7e49fbeda6ca899a62d500efc5b7467c.png)

# ruby-on-rails - Michael Hartl 的 ROR 3.2 教程 - 第 9.4.2 章 - 测试失败并出现错误“NameError: uninitialized constant Admin”

> ID：13471502
> 
> 赞同：2
> 
> 时间：2012-11-20T10:43:28.657
> 
> 标签：ruby-on-rails, rspec-rails, spork

遵循 MH 教程（第 2 版）一切顺利（使用 Rspec 和 Spork 进行开发和测试），直到我在第 9 章末尾运行 Rspec，测试失败并出现以下错误：“NameError: uninitialized constant Admin”日志是

```
NameError: uninitialized constant Admin
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/inflector/methods.rb:230:in `block in constantize'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/inflector/methods.rb:229:in `each'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/inflector/methods.rb:229:in `constantize'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/core_ext/string/inflections.rb:54:in `constantize'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/factory_girl-4.1.0/lib/factory_girl/factory.rb:26:in `build_class'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/factory_girl-4.1.0/lib/factory_girl/factory.rb:37:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/factory_girl-4.1.0/lib/factory_girl/factory_runner.rb:23:in `block in run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/notifications.rb:125:in `instrument'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/factory_girl-4.1.0/lib/factory_girl/factory_runner.rb:22:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/factory_girl-4.1.0/lib/factory_girl/strategy_syntax_method_registrar.rb:19:in `block in define_singular_strategy_method'
C:/Users/asdemoulin/Documents/Work/dummy/spec/requests/user_pages_spec.rb:35:in `block (5 levels) in <top (required)>' 
```

我在第 35 行的 user_pages_spec.rb 是

```
require 'spec_helper'

describe "User Pages" do
  subject { page }

  describe "index" do
    let(:user) { FactoryGirl.create(:user) }

    before(:each) do
      sign_in user
      visit users_path
    end 

    it { should have_selector('title', text: 'All users') }
    it { should have_selector('h1', text: 'All users') }

    describe "pagination" do
      before(:all) { 30.times { FactoryGirl.create(:user) } }
      after(:all) { User.delete_all }

      it { should have_selector('div.pagination') }

      it "should list each user" do
        User.paginate(page: 1).each do |user|
          page.should have_selector('li', text: user.name)
        end
      end
    end

    describe "delete links" do
      it { should_not have_link('delete') }

      describe "as an admin user" do
        let(:admin) { FactoryGirl.create(:admin) }
        before do
          sign_in admin
          visit users_path
        end
        it { should have_link('delete', href: users_path(User.first)) }
        it "should be able to delete another user" do
          expect { click_link('delete')}.to change(User, :count).by(-1)
        end
        it { should_not have_link('delete'), href: users_path(admin)}
      end
    end
  end
  ... 
```

我四处搜索，但没有找到任何相关的答案......我不明白为什么会出现这个错误以及如何解决它......任何帮助将不胜感激，在此先感谢。

干杯

**编辑（在 Dipak 建议之后）**

为了方便起见，我禁用了 Spork（以防它是罪魁祸首）并运行 RSpec 现在错误消息有所不同：

```
C:\RailsInstaller\Ruby1.9.3\bin\ruby.exe -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) C:\RailsInstaller\Ruby1.9.3\bin\rake spec
Testing started at 12:54 ...
NOTICE:  CREATE TABLE créera des séquences implicites « users_id_seq » pour la colonne serial « users.id »
NOTICE:  CREATE TABLE / PRIMARY KEY créera un index implicite « users_pkey » pour la table « users »
C:/RailsInstaller/Ruby1.9.3/bin/ruby.exe -S rspec ./spec/models/user_spec.rb ./spec/requests/authentication_pages_spec.rb ./spec/requests/static_pages_spec.rb ./spec/requests/user_pages_spec.rb

expected link "delete" to return something
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-expectations-2.12.0/lib/rspec/expectations/fail_with.rb:33:in `fail_with'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-expectations-2.12.0/lib/rspec/expectations/handler.rb:33:in `handle_matcher'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/subject.rb:64:in `should'
C:/Users/asdemoulin/Documents/Work/dummy/spec/requests/user_pages_spec.rb:40:in `block (5 levels) in <top (required)>'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example.rb:114:in `instance_eval'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example.rb:114:in `block in run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example.rb:254:in `with_around_each_hooks'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example.rb:111:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:388:in `block in run_examples'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:384:in `map'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:384:in `run_examples'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:369:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:370:in `block in run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:370:in `map'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:370:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:370:in `block in run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:370:in `map'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:370:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:370:in `block in run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:370:in `map'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:370:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/command_line.rb:28:in `block (2 levels) in run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/command_line.rb:28:in `map'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/command_line.rb:28:in `block in run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/reporter.rb:34:in `report'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/command_line.rb:25:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/runner.rb:69:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/runner.rb:8:in `block in autorun'
WARNING: ignoring the provided expectation message argument ({:href=>"/users.57"}) since it is not a string.

{:href=>"/users.57"}
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-expectations-2.12.0/lib/rspec/expectations/fail_with.rb:33:in `fail_with'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-expectations-2.12.0/lib/rspec/expectations/handler.rb:57:in `handle_matcher'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/subject.rb:78:in `should_not'
C:/Users/asdemoulin/Documents/Work/dummy/spec/requests/user_pages_spec.rb:44:in `block (5 levels) in <top (required)>'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example.rb:114:in `instance_eval'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example.rb:114:in `block in run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example.rb:254:in `with_around_each_hooks'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example.rb:111:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:388:in `block in run_examples'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:384:in `map'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:384:in `run_examples'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:369:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:370:in `block in run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:370:in `map'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:370:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:370:in `block in run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:370:in `map'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:370:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:370:in `block in run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:370:in `map'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:370:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/command_line.rb:28:in `block (2 levels) in run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/command_line.rb:28:in `map'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/command_line.rb:28:in `block in run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/reporter.rb:34:in `report'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/command_line.rb:25:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/runner.rb:69:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.0/lib/rspec/core/runner.rb:8:in `block in autorun'
rake aborted!
C:/RailsInstaller/Ruby1.9.3/bin/ruby.exe -S rspec ./spec/models/user_spec.rb ./spec/requests/authentication_pages_spec.rb ./spec/requests/static_pages_spec.rb ./spec/requests/user_pages_spec.rb failed
-e:1:in `load'
-e:1:in `<main>'
Tasks: TOP => spec
(See full trace by running task with --trace)

Process finished with exit code 1 
```

如您所见，它似乎试图达到“{:href=>”/users.57"}" ...我想它应该是“{:href=>”/users/57"}" 而不是，我不明白是为什么

```
it { should_not have_link('delete'), href: users_path(admin)} 
```

似乎产生 {:href=>"/users.57"}...

我错过了什么重要的东西吗？

**编辑 2：工厂.rb**

```
FactoryGirl.define do
  factory :user do
    sequence(:name)  { |n| "Person #{n}" }
    sequence(:email) { |n| "person_#{n}@example.com"}
    password "foobar"
    password_confirmation "foobar"
  end

  factory :admin do
    admin true
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:19:25.863

像这样改变你`factories.rb`：

```
FactoryGirl.define do 
  factory :user do 
    sequence(:name) { |n| "Person #{n}" }
    sequence(:email) { |n| "person_#{n}@example.com" }
    password "foobar"
    password_confirmation "foobar"

    factory :admin do
      admin true
    end
  end
end 
```

并像这样创建管理员用户：

```
let(:admin) { FactoryGirl.create(:admin) } 
```

我在您的 中发现了两个错误语法`describe "delete link"`：

```
it { should have_link('delete', href: users_path(User.first)) }
...
it { should_not have_link('delete', href: users_path(admin))} 
```

它应该是：

```
it { should have_link('delete', href: user_path(User.first)) }
...
it { should_not have_link('delete', href: user_path(admin))} 
```

**更新**

此代码`_user.html.erb`将检查用户是否不是管理员，他们将有一个删除链接：

```
<% if current_user.admin? && !current_user?(user) %>
    | <%= link_to "delete", user, method: :delete, data: { confirm: "You sure?" } %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:11:01.097

试试这个

```
describe "as an admin user" do
  let(:admin) { FactoryGirl.create(:user, admin: true) }
  ...
...
end 
```

# wcf - 第二个 wcf 轮询双工服务调用太长

> ID：13471508
> 
> 赞同：1
> 
> 时间：2012-11-20T10:43:47.353
> 
> 标签：wcf, silverlight, timeout, pollingduplexhttpbinding

我对 WCF 服务有奇怪的问题。我使用 pollingDuplexBinding 和 Silverlight 客户端。此代码在 web.config 中注册了绑定

```
<bindingElementExtensions>
   <add name="pollingDuplex" type="System.ServiceModel.Configuration.PollingDuplexElement, System.ServiceModel.PollingDuplex" />
</bindingElementExtensions> 
```

在第一次调用时一切正常 - 服务快速返回数据。但是第二次调用执行超过 5 次。如果我设置了大超时，结果将返回给客户端，否则它会抛出 TimeoutException。我正在调用的 WCF 方法什么都不做 - 只返回短字符串。

WCF 跟踪说，第二个服务调用仅比客户端调用此方法晚 5 分钟，并且执行速度很快。我使用这些服务属性：

```
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple, InstanceContextMode = InstanceContextMode.Single)]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)] 
```

这是客户端代码

```
 var binding = new PollingDuplexHttpBinding(PollingDuplexMode.SingleMessagePerPoll);            

        var address = new EndpointAddress("/SportService.svc");
        _proxy = new SportDuplexClient(binding, address); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T10:57:19.953

我有同样的问题，我是这样解决的：

只需在 web.config 文件中将 aspNetCompatibilityEnabled="false" 设置为 false

```
<system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="false" multipleSiteBindingsEnabled="true" />
</system.serviceModel> 
```

或在 web.config 中设置 sessionState mode="Off"

```
<system.web>
    <sessionState mode="Off" />
</system.web> 
```

两种方式我的问题都会解决...

# objective-c - 将视图添加到滚动视图

> ID：13471510
> 
> 赞同：2
> 
> 时间：2012-11-20T10:43:54.813
> 
> 标签：objective-c, ios, uiscrollview, ios4

我的 Viewcontroller 中有一个滚动视图。我还创建了一个视图并将其连接到一个 IBOutlet 变量。我需要向滚动视图添加许多视图。

将视图添加到 ScrollView 的代码：

在 .h 文件中

```
UIView *customView_;

@property (nonatomic, retain) IBOutlet UIView *customView; 
```

在 .m 文件中：

```
@synthesize customView = customView_;

    for (int i = 0; i < 2; i++) {

        UIView *tempView = customView;
        tempView.frame = CGRectMake(i * 187, 0, 187, 133);
        [scrollView addSubview:tempView];
    } 
```

但是使用上面的代码，我只能在位置看到一个：187,0,187,133。如果我将代码更改为 for，`(int i = 0; i < 3; i++) {`我只能在 374,0,187,133 中看到视图。谁能帮我解决这个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T10:49:07.897

## 为什么会这样？

[文档`addSubview:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)

> 视图只能有一个超级视图。如果视图已经有一个超级视图并且该视图不是接收者，则此方法会在使接收者成为其新的超级视图之前删除先前的超级视图。

使用此代码

```
UIView *tempView = customView;
tempView.frame = CGRectMake(i * 187, 0, 187, 133);
[scrollView addSubview:tempView]; 
```

您正在尝试添加**相同**的视图两次/三次。使用文档中的注释，这将删除前一个，并将其添加到新位置。（虽然在您的情况下，超级视图是接收者，但这并不意味着它会复制您的视图并再次添加它）。

## 解决方案

不幸的是，`UIView`不遵循`NSCopying`协议。因此，您无法使用`copy`. 您将需要创建一个工厂方法来为您创建视图，如下所示：

```
-(UIView)createCustomView {
    ...
} 
```

`for`然后在你的循环中调用它：

```
UIView *tempView = [self createCustomView];
tempView.frame = CGRectMake(i * 187, 0, 187, 133);
[scrollView addSubview:tempView]; 
```

这可能会超出 .xib 文件的范围。请参阅[此答案](https://stackoverflow.com/questions/3019257/how-do-i-programmatically-duplicate-uiviews-built-in-interface-builder)以了解如何使其与 Interface Builder 配合使用。

# css - SVG中的左对齐字母

> ID：13471511
> 
> 赞同：2
> 
> 时间：2012-11-20T10:43:55.290
> 
> 标签：css, svg

我在 SVG 图中有两个文本标签：

```
<svg width="960" height="500"><g transform="translate(20,20)">
    <text class="title" dx="0px" dy="39px">1980-2012</text>
    <text class="cantontitle" dx="0px" dy="78px">Graubünden</text>
</svg>​ 
```

我使用以下 CSS 样式：

```
svg {                                                                                       
    font: 10px sans-serif;                                                                  
}                                                                                           

.title {                                                                                    
    font: 300 78px Helvetica Neue;                                                          
    fill: #666;                                                                             
}                                                                                           

.cantontitle {                                                                              
    font: 300 40px Helvetica Neue;                                                                                                     
    fill: #666;                                                                             
}                                                                                          ​ 
```

不幸的是，这些字符没有正确左对齐。

![截屏](../Images/c24746a768b3de95d8676656664b96e4.png)

是否可以正确左对齐两个`<text>`元素的第一个字符？

这是一个便于测试的 jsfiddle：http: [//jsfiddle.net/UMnnP/1/](http://jsfiddle.net/UMnnP/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:38:43.700

文本左对齐。偏移量是由字体中字形的度量引起的。与简单路径不同，字形具有额外的度量定义，定义了它“居住”在其中的矩形。这个矩形的左端独立于字形图形的左端，它可以有一个负偏移和正偏移。除了字体度量之外，字距调整还添加到特殊的字形对中。

要将字形完全准确地对齐到左侧，您需要将文本转换为路径，或者您可以尝试通过检查字形的度量来获取偏移量，如果您有 svg 格式的字体，这很容易实现。但总而言之，这可能会变得非常乏味，并且需要一点手写偏移来纠正，这可以节省您数小时的编码时间，但如果您真的需要它，我强烈建议您联系字体及其指标。

问候……</p>

**编辑：**

你的CSS不起作用！只是看到太晚了……</p>

一定是：

```
font-family : Helvetica Neue 
```

代替

```
font : Helvetica Neue 
```

有了这个，它就更左对齐了……</p>

# javascript - 如何找到页面外的元素

> ID：13471515
> 
> 赞同：0
> 
> 时间：2012-11-20T10:44:10.980
> 
> 标签：javascript, css, google-chrome-extension, firefox-addon

我正在尝试修复滑出式 javascript 菜单。问题是，第三级子菜单虽然应该显示，但没有显示。我确信它与错误的定位有关，并且元素显示在页面之外的某个地方。

现在我的问题是：是否有浏览器扩展或其他方式来勾勒超出页面边界的元素？

谢谢！

编辑：好的，这很奇怪..根据坐标，它似乎处于正确的位置，它也有适当的尺寸，可见但我看不到它..我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:50:02.077

是的，使用[firebug](http://getfirebug.com/)（在 Firefox 中）或 Chrome 开发者控制台（CTRL+SHIFT+C）（在 Chrome 中），在 html 选项卡上找到您的菜单并检查该元素的*计算样式*以查看它在哪里。您还可以键入您喜欢的任何样式，看看它如何影响您的菜单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T10:50:39.547

对于 Firefox，[Firebug](http://getfirebug.com/)允许您检查 DOM；您可以使用 HTML 选项卡来查找缺少的元素。当您单击该元素时，Firebug 将突出显示它并覆盖指南向您显示它的位置。它还会在右侧的“布局”选项卡中为您提供定位信息，您可以使用“样式”选项卡更改元素的样式来重新定位元素。

Chrome 开发者工具已经内置了这个功能；转到 Settings->Tools->Developer Tools（或使用键盘快捷键`Ctrl-Shift-I`）来激活它。它与 Firebug 非常相似。

# jsf - Omnifaces：使用 CombinedResourceHandler 和 Richfaces

> ID：13471516
> 
> 赞同：1
> 
> 时间：2012-11-20T10:44:26.523
> 
> 标签：jsf, richfaces, omnifaces, combinedresourcehandler

在 Richfaces 应用程序中使用时`CombinedResourceHandler`，仅将样式表和用户定义脚本组合在一起。标准 JavaScript 资源和所有 Richfaces 特定资源保持为单独的资源。

Omnifaces 文档指出：

> RichFaces 对几个 JS 文件有同样的问题，但到目前为止，这对于解决方法来说并不是微不足道的

所以我的问题是这个“重要的解决方法”会是什么？

据我所知，退货`CombinedResourceHandler`时不会处理资源。然后由.`getRendererType()``org.richfaces.renderkit.ResourceLibraryRenderer``org.richfaces.renderkit.html.ResourceLibraryRenderer`

我不确定在这里将 RichFaces 行为与 OmniFaces 结合起来的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:45:02.807

我能够通过修改 OmniFaces 创建解决方案`CombinedResourceHandler`。

简而言之：

Richfaces 利用了一个名为 ResourceLibrarys 的概念，这意味着资源可能不仅是单个文件，而是这些文件的集合。例如，RichFaces 使用名为*base-component.reslib*的资源。RichFaces`ResourceHandler`将此资源依赖解释为对

*   javax.faces:jsf.js
*   jQuery.js
*   富脸.js
*   richfaces-base-component.js

因此，CombinedResourceHandler 需要一些额外的功能来从 Richfaces ResourceLibraries 中分离出对普通资源的依赖。后者需要根据从 RichFaces 来源获得的规范来解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:59:46.197

在不修改`CombinedResourceHandler`自身的情况下解决这个问题并非易事。`CombinedResourceHandler`必须对其本身进行修改以使用从 RichFaces' 中提取资源的反射黑客`org.richfaces.resource.ResourceLibraryFactoryImpl`。为了使 OmniFaces 不受 RichFaces 依赖项的影响，反射 hack 是必要的，这样它就可以与 PrimeFaces 等其他组件库一起使用。

根据[issue 107](http://code.google.com/p/omnifaces/issues/detail?id=107)，这是在 1.3-20121206 中实施的。

# wcf - WCF 服务中的 Lync、Skype 和 msn

> ID：13471517
> 
> 赞同：0
> 
> 时间：2012-11-20T10:44:39.673
> 
> 标签：wcf, skype, lync

我有一个 WCF 服务，允许用户连接到不同的协议帐户（如 Yahoo）我现在有兴趣在这个 WCF 中添加“microsoft”功能，以便用户可以连接到他们的 msn/skype/lync 帐户。

我在网上搜索并找到了关于 lync 和 LCS 如何不一起工作的好信息，但对于微软重组 API 的计划并没有真正清楚。（现在是自己的Skype）

2个问题：

我] 有没有我错过的东西（比如一个很好的统一微软 API）或者我真的应该使用不同的和单独的 API 吗？（Skype API 提到：Skype Public API 不再改进，但仍在维护中）

II] Lync API 需要在计算机上安装 Lync 客户端：它重用了 lync 服务器连接。如果我尝试在 WCF 上实现它，恐怕我会遇到问题。（如果他在 Outlook 中使用 lync，则“真实”客户端的多重连接、授权、断开连接）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:42:49.997

不知道所有问题，但 Lync 绝对允许单个用户进行多个连接。我正在使用受信任的服务器应用程序（在托管服务中），在该应用程序中，我为通过服务连接的人创建用户端点。这对用户可能拥有的任何其他连接没有影响。

# asp.net - 表单身份验证：如何在 web.config 中存储用户名密码？

> ID：13471518
> 
> 赞同：1
> 
> 时间：2012-11-20T10:44:45.773
> 
> 标签：asp.net, forms-authentication

我习惯于将表单身份验证与数据库一起使用，但我正在编写一些内部实用程序，并且该应用程序没有数据库，因此我想将用户名和密码存储在 web.config 中。但是由于某种原因，表单身份验证仍在尝试访问 SQL Server，我看不到如何阻止它这样做并从 web.config 中获取凭据。我究竟做错了什么？我只是收到错误“由于模拟客户端失败，无法生成 SQL Server 的用户实例。连接将被关闭。”

以下是我的 web.config 的相关部分：

```
<configuration>
    <system.web>
        <authentication mode="Forms">
            <forms loginUrl="~/Login.aspx" timeout="60" name=".LoginCookie" path="/"  >
                <credentials passwordFormat="Clear">
                    <user name="user1" password="[pass]" />
                    <user name="user2" password="[pass]" />
                </credentials>
            </forms>
        </authentication>
        <authorization>
            <deny users="?" />
        </authorization>
    </system.web>
</configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T10:57:25.187

默认[MembershipProvider](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.aspx)是 [SqlMembershipProvider](http://msdn.microsoft.com/en-us/library/system.web.security.sqlmembershipprovider%28v=vs.100%29.aspx)，它将尝试使用 SqlServer 数据库。

看看[这个](https://stackoverflow.com/questions/1583262/asp-net-authentication-use-credentials-from-web-config-problem)类似的问题。

# jakarta-ee - 使用 exec-maven-plugin 运行守护程序，避免 `IllegalThreadStateException`

> ID：13471519
> 
> 赞同：40
> 
> 时间：2012-11-20T10:44:49.143
> 
> 标签：jakarta-ee, maven, jboss, exec-maven-plugin

我想运行一个应该在 Maven 包阶段开始的守护线程。这就是我在 pom.xml 中的内容：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.2.1</version>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>java</goal>
                    </goals>
                </execution>                                
            </executions>
            <configuration>
                 <mainClass>com.test.Startup</mainClass>
                 <cleanupDaemonThreads>true</cleanupDaemonThreads>
            </configuration>
       </plugin>
  </plugins>
</build> 
```

这是 Startup 类的内容：

```
public class Startup {

    public static class Testing extends Thread {
        @Override
        public void run() {
            while(true) {
                System.out.println("testing..");
            }
        }
    }

    public static void main(String[] list) throws Exception {
        Testing t = new Testing();
        t.setDaemon(true);
        t.start();
    }
} 
```

线程开始运行，但编译在线程运行时停止。一段时间后（超时或其他时间），线程停止并继续编译。无论如何我可以让这个线程在后台启动并让编译自行继续吗？

Maven的一些输出：

```
[WARNING] thread Thread[Thread-1,5,com.test.Startup] was interrupted but is still alive after waiting at least 15000msecs
[WARNING] thread Thread[Thread-1,5,com.test.Startup] will linger despite being asked to die via interruption
[WARNING] NOTE: 1 thread(s) did not finish despite being asked to  via interruption. This is not a problem with exec:java, it is a problem with the running code. Although not serious, it should be remedied.
[WARNING] Couldn't destroy threadgroup org.codehaus.mojo.exec.ExecJavaMojo$IsolatedThreadGroup[name=com.test.Startup,maxpri=10]
java.lang.IllegalThreadStateException
    at java.lang.ThreadGroup.destroy(ThreadGroup.java:754)
    at org.codehaus.mojo.exec.ExecJavaMojo.execute(ExecJavaMojo.java:334)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352) 
```

我计划为此线程创建一个套接字侦听器，并让它在后台运行，只要 maven 关闭 JVM，但目前看来套接字只会在编译期间打开一段时间。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2014-08-06T16:58:34.433

发布问题的评论部分中讨论的答案。这个解决方案对我有用！谢谢[安德鲁·洛格维诺夫](https://stackoverflow.com/users/966590/andrew-logvinov)

> cleanupDaemonThreads = false

配置标签中的类似内容

`<configuration> <mainClass>com.test.Startup</mainClass> <cleanupDaemonThreads>false</cleanupDaemonThreads> </configuration>`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-05-07T10:07:28.850

您也可以`cleanupDaemonThreads`使用命令行参数传递：

```
#!/bin/bash

PARAMS="$*"

export MAVEN_OPTS=-Dfile.encoding=utf-8

mvn exec:java \ 
     -Dexec.cleanupDaemonThreads=false \ 
     -Dexec.mainClass="org.mu.App" -Dexec.args="$PARAMS" 
```

# jmeter - JMeter - 使用 POST 变量发送 HTTP 请求时遇到问题？

> ID：13471521
> 
> 赞同：8
> 
> 时间：2012-11-20T10:44:55.977
> 
> 标签：jmeter, load-testing

我正在尝试加载测试从存档数据库中获取记录的 java servlet。

servlet 的工作方式如下：

*   1-从 HTTP 标头读取 post 变量
*   2-使用变量查询数据库
*   3-返回 XML

我已经设置了一个测试，我想用 post 变量触发 HTTP 请求，但是测试不起作用，J Meter 出现错误。

**屏幕截图 1 - 显示测试的结构** ![在此处输入图像描述](../Images/3d8316cb4efa395867474e37f1dc19d3.png)

**屏幕截图 2 - 显示我正在读取的 CSV 文件** ![在此处输入图像描述](../Images/cd4dda101af1b2f6e2a3934bc2dd6c38.png)

我已将 CSV 文件放在保存我的测试计划的同一文件夹中！

**屏幕截图 3 - 显示 HTTP 请求** ![在此处输入图像描述](../Images/16876a28a87ae68c95cea0f26a055557.png)

**这是错误输出：**

> 线程名称：线程组 1-1 样本开始：格林威治标准时间 2012 年 11 月 20 日 10:35:27 加载时间：0 延迟：0 字节大小：1113 标头大小（字节）：0 正文大小（字节）：1113 样本计数：1错误计数：1 响应代码：非 HTTP 响应代码：java.net.URISyntaxException 响应消息：非 HTTP 响应消息：索引 13 处 IPv6 地址的预期右括号： [http://[http://sophos1.testserver.co。英国/servlet/存档]:61061/](http://[http://sophos1.testserver.co.uk/servlet/archive]:61061/)
> 
> 响应标头：
> 
> HTTPSampleResult 字段：ContentType：DataEncoding：null

**POST 请求**

```
POST http://[http://sophos1.testserver.co.uk/servlet/archive]:61061/

POST data:

[no cookies] 
```

**返回数据**

```
java.net.URISyntaxException: Expected closing bracket for IPv6 address at index 13: http://[http://sophos1.testserver.co.uk/servlet/archive]:61061/
        at java.net.URI$Parser.fail(Unknown Source)
        at java.net.URI$Parser.failExpecting(Unknown Source)
        at java.net.URI$Parser.parseServer(Unknown Source)
        at java.net.URI$Parser.parseAuthority(Unknown Source)
        at java.net.URI$Parser.parseHierarchical(Unknown Source)
        at java.net.URI$Parser.parse(Unknown Source)
        at java.net.URI.<init>(Unknown Source)
        at java.net.URL.toURI(Unknown Source)
        at org.apache.jmeter.protocol.http.sampler.HTTPHC4Impl.sample(HTTPHC4Impl.java:232)
        at org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy.sample(HTTPSamplerProxy.java:62)
        at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1075)
        at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1064)
        at org.apache.jmeter.threads.JMeterThread.process_sampler(JMeterThread.java:426)
        at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:255)
        at java.lang.Thread.run(Unknown Source) 
```

请帮忙！

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-20T10:59:23.163

从HTTP 请求采样器的服务器名称/IP 字段中删除（在[HTTP 请求字段描述](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request)`http://`中指出）。

在描述中查看上面生成的 POST 请求：

```
POST Request
POST **http://[http://**sophos1.testserver.co.uk/servlet/archive]:61061/ 
```

改为如下配置您的 HTTP 请求：

```
Server Name: sophos1.testserver.co.uk
Path: /servlet/archive
Implementation: Java 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-23T04:47:07.627

最简单的方法是您可以将服务器名称留空并将路径设置为

> [http://sophos1.testserver.co.uk/servlet/archive](http://sophos1.testserver.co.uk/servlet/archive)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-13T08:51:32.593

`ServerName`检查或`IP`字段中是否有空格。

这给了我这个错误：

> 响应消息：非 HTTP 响应消息：索引 7 的权限中的非法字符：

当开始时修剪额外的空间时，它运作良好。

# wordpress - 不要在永久链接结构 Wordpress 中包含媒体

> ID：13471531
> 
> 赞同：1
> 
> 时间：2012-11-20T10:45:33.700
> 
> 标签：wordpress, media, permalinks

有没有办法从 wordpress 永久链接结构中排除所有上传的媒体？目前，wordpress 默认在永久链接结构中添加所有媒体（图像、文档等）。但是，当上传名称为 logo.png 的徽标并在永久链接结构中创建具有相同名称“徽标”的新页面时，wordpress OR 无法获取它，OR 显示 404 OR 显示图像。我不希望我的图片有永久链接，所以我想排除它们。有什么建议么？

# php - PHP表单确认调用ajax脚本失败

> ID：13471534
> 
> 赞同：1
> 
> 时间：2012-11-20T10:45:37.103
> 
> 标签：php, ajax, forms

我有以下 PHP/Ajax 问题，目前似乎找不到相关的类似问题。我有一个从表单成功发送电子邮件的站点，但是脚本的 Ajax 部分未正确调用。当一切正常时，应该发生的是用户单击提交，调用 Ajax 脚本进行表单验证。这部分工作，然后发送电子邮件，但是失败是在发送电子邮件后没有调用 Ajax 脚本以关闭提交窗口并表示感谢等。

我认为我的问题是我在 PHP 中的某处缺少一行代码来调用 Ajax 脚本的成功部分。

脚本附在下面：

**PHP 代码**

> ```
> <?php 
>  $emailTo = myemail@gmail.com';
>  $subject=$_REQUEST['subject'];
>  $name=$_REQUEST['name'];
>  $email=$_REQUEST['email'];
>  $msg=$_REQUEST['message'];
> 
>  $body = "Name: $name \n\nEmail: $email \n\nMessage: $msg";
>  $headers = 'From: '.$name.' <'.$email.'>' . "\r\n" . 'Reply-To: ' . $email;
> 
>  mail($emailTo, $subject, $body, $headers); 
> 
> ?> 
> ```

**阿贾克斯代码**

```
$.ajax({
   type: "POST",
   url: "email.php",
   data: params,
   success: function(response){
    if(response){
     var responseObj = jQuery.parseJSON(response);
     if(responseObj.ResponseData)
      alert(responseObj.ResponseData);
    }
    ResetInput();
    $('#submitButton').removeAttr('disabled');
    ClosePopupWindow();
   }, 
```

如果需要，完整的 Ajax 代码位于以下要点 - [https://gist.github.com/4117065](https://gist.github.com/4117065)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:54:15.547

我建议您这样做以跟踪错误：

在 php 中：

```
if (mail($emailTo, $subject, $body, $headers)){
    echo "success";
} else {
    echo get_last_error();
} 
```

在 jq 中：

```
if(response == "success"){
   //do your stuff
} else {
   //track the error
   alert(response);
   console.log(response); // you can chose either way, console.log() is the new black xD
} 
```

我最近经常使用 ajax/php，在大多数情况下，ajax 不起作用是因为 php 抛出了某种愚蠢的错误：P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T10:50:17.193

在 .php 文件中测试邮件是否已发送 witought 错误（返回 bool [http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)）`$response = mail(...`然后`json_encode($response['ResponseData'] = $success);` 在 js 中您指的是不存在的成员: 响应数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T10:51:17.940

php 脚本不回显任何内容，因此响应为空。您可以在 php 中回显某些内容作为响应，代码将起作用

# magento - Magento 不支持 Paypal 网关拒绝货币

> ID：13471536
> 
> 赞同：2
> 
> 时间：2012-11-20T10:45:42.587
> 
> 标签：magento, paypal

我的基础货币是管理端的人民币。我不想改变基础货币，我的显示货币也是人民币。我的付款方式是 PayPal 标准。当我在前端通过 PayPal 订购时，会发生以下错误。

`PayPal gateway has rejected request. Currency is not supported (#10605: Transaction refused because of an invalid argument. See additional error messages for details). Internal Error (#10001: Transaction failed due to internal error).`

谁能告诉我如何在不更改基础货币的情况下解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-10T20:42:09.190

此拒绝来自 PayPal，因为它不接受人民币。您需要更改为 PayPal 接受的货币。在此处查找PayPal[接受的货币。](https://developer.paypal.com/docs/classic/api/currency_codes/)

# matlab - 如何在 Matlab GUI Deploytool 包中添加在特定过期日期后过期的功能？

> ID：13471538
> 
> 赞同：1
> 
> 时间：2012-11-20T10:45:43.007
> 
> 标签：matlab, matlab-deployment

> **可能重复：**
> [如何制作 matlab GUI 的“试用版”](https://stackoverflow.com/questions/13260256/how-can-i-make-a-trial-version-of-a-matlab-gui)

如何在 Matlab GUI Deploytool 包中添加在特定过期日期后过期的功能？例如，我制作了一个包，并将其提供给用户以供试用，因此我希望包在用户机器上的 15 天后过期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:43:38.357

[如何制作 matlab GUI 的“试用版”中](https://stackoverflow.com/questions/13260256/how-can-i-make-a-trial-version-of-a-matlab-gui)发布的答案或多或少是正确的。如果您想设置硬性截止日期，请使用此处发布的解决方案。

但是，如果您想定义取决于安装日期的截止日期，这将变得更加棘手。基本上，您需要以用户无法操纵的方式确定安装日期。如果您使用程序的安装日期来定义用户可以卸载然后重新安装您的程序的截止日期，瞧，他们将再使用 15 天。

执行此操作的正确方法是为您的软件颁发许可证密钥。然后设置一个响应来自您的软件的许可请求的 Web 服务器。服务器接收请求，查找指定的密钥是否有效，然后返回是或否。这比上面提供的解决方案需要更多的工作，但它为开发人员提供了更多的控制权。此外，由于您的程序正在打电话回家，您可以收集有用的信息，您的程序是如何使用的。

# objective-c - 从 IOS 中的特定日历获取事件

> ID：13471540
> 
> 赞同：0
> 
> 时间：2012-11-20T10:45:46.003
> 
> 标签：objective-c, ios, calendar, ekeventkit, ekeventstore

我正在尝试仅从特定日历中获取事件。在我的 iPhone 上，我添加了一个日历“CalendarTest”。我想要做的是在我的应用程序中只从该日历中获取事件。我正在做以下事情。

```
self.defaultCalendar = [eventStore calendarWithIdentifier:@"CalendarTest"];
 NSArray *calendarArray = [NSArray arrayWithObject:defaultCalendar];
                 // asynchronous callback on the main thread
                 [events removeAllObjects];
                 NSLog(@"Fetching events from EventKit between %@ and %@ on a GCD-managed background thread...", fromDate, toDate);
                 dispatch_async(eventStoreQueue, ^{
                     NSDate *fetchProfilerStart = [NSDate date];
                     NSPredicate *predicate = [eventStore predicateForEventsWithStartDate:fromDate endDate:toDate calendars:calendarArray];
                     NSArray *matchedEvents = [eventStore eventsMatchingPredicate:predicate];
                     dispatch_async(dispatch_get_main_queue(), ^{
                         NSLog(@"Fetched %d events in %f seconds", [matchedEvents count], -1.f * [fetchProfilerStart timeIntervalSinceNow]);
                         [events addObjectsFromArray:matchedEvents];
                         [delegate loadedDataSource:self];
                     });
                 }); 
```

但是当我构建并运行时，我收到以下错误，它会因以下错误而崩溃。

```
2012-11-20 11:45:35.445 CalendarApp[2685:1d03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSPlaceholderArray initWithObjects:count:]: attempt to insert nil object from objects[0]' 
```

有人有想法吗？亲切的问候！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-25T10:50:47.810

我认为您应该将 self.defaultCalendar 添加到您的 calendarArray。这可能会奏效。

# c# - linq中字符串比较的错误结果

> ID：13471543
> 
> 赞同：0
> 
> 时间：2012-11-20T10:46:02.853
> 
> 标签：c#, linq

我对 linq 中的字符串比较查询感到困扰。我想要哪个状态类型的 statusid 作为我想要的字符串说“草稿”。下面是查询

```
var result = (from Roaster_RequestStatus status in statuses
                        where status.StatusName.Equals("Draft")
                        select status).ToList<Roaster_RequestStatus>(); 
```

但是`result`显示计数为 0，即使我的列表`statuses`包含`StatusName`为“草稿”，我也在下面尝试了提供值 0 的查询`i`。

```
var i = (from Roaster_RequestStatus status in statuses
                         where status.StatusName.Equals("Draft")
                         select status.StatusID).Distinct().FirstOrDefault(); 
```

如果代码中存在任何语法或逻辑错误，请提供帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:13:21.067

这将起作用：-

```
var result = (from Roaster_RequestStatus status in statuses
                        where status.StatusName.Contains("Draft")
                        select status).ToList<Roaster_RequestStatus>(); 
```

# xcode - UIsearchBar 显示结果，但是当我按下不存在的应用程序时

> ID：13471544
> 
> 赞同：0
> 
> 时间：2012-11-20T10:46:05.453
> 
> 标签：xcode, core-data, storyboard, uisearchbar

我尝试从一些教程中了解发生了什么，但不幸的是我没有找到答案。我认为问题可能是我没有**IF**以防万一我在搜索结果中得到 nil 。

**错误是：** 'NSRangeException'，原因：' *** -[__NSArrayM objectAtIndex:]: index 0 beyond bounds for empty array'

我使用这种方法：

```
- (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope
{
    //removes previos search result
    [[self searchResults]removeAllObjects];

    for (Books *book in [self.fetchResultsController fetchedObjects])
    {
            if([self searchResults] != nil)
            {
                NSComparisonResult result = [book.title compare:searchText
                                                   options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch)
                                                     range:NSMakeRange(0, [searchText length])];
                if (result == NSOrderedSame )
                {
                        [self.searchResults addObject:book];
                }
            }
        }
} 
```

也可以在 git 上找到我的完整项目： [https ://github.com/dennis87/git_bookList](https://github.com/dennis87/git_bookList)

**编辑：** 当我尝试 put if like this

if ([scope isEqualToString:@"All"] || [book.title isEqualToString:scope])

应用程序迷恋不让我按任何东西..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:03:32.907

您可能想在从中删除所有对象之前检查数组是否包含对象..

```
if(dataSourceArray){  //use your datasource array instead
    [[self searchResults]removeAllObjects];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T18:51:08.850

问题是 `numberOfSectionsInTableView`总是返回`1`搜索结果表，即使没有搜索结果。崩溃发生在`titleForHeaderInSection`：

```
return [[[self searchResults] objectAtIndex:section] author]; 
```

因为从空数组访问索引 0 处的对象。

因此，如果搜索结果数组为空，则更改为返回，或者更改`numberOfSectionsInTableView`为为搜索结果表返回不同的内容。`0``titleForHeaderInSection`

# javascript - 使用 javascript/dojo 使用 svg 遍历 arcGis 地图的不同元素

> ID：13471545
> 
> 赞同：0
> 
> 时间：2012-11-20T10:46:06.183
> 
> 标签：javascript, dojo, svg, arcgis

我正在使用具有不同图层和元素的特定地图。地图是使用`arcGis`创建的，它创建了一个`<svg></svg>`标签，其中包含所有元素（建筑物、道路等）。

我的问题是，我可以使用 javascript/dojo 遍历框架内地图的不同对象吗？

主要思想是改变地图客户端内的建筑物或正方形的颜色。任何的想法？

HTML：

Javascript：

```
basemap = new esri.layers.ArcGISTiledMapServiceLayer("http://...", {});
map.addLayer(basemap); 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:00:24.590

假设您的 SVG 已经在 DOM 中可用，那么您的问题的答案将是......

```
 var elements = document.querySelectorAll("svg *");
  for (var i = 0; i < elements.length; ++i) {
     if(condition) elements[i].setAttribute("fill", "red");
  } 
```

但是，这是非常浪费的，因为您正在遍历所有内容。如果元素“名称”是`id`s 那么你可以做......

```
 ["B45","K56","L67"].forEach(function(name){
    var element = document.getElementById(name);
    if (element) element.setAttribute("fill", "red");
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T14:46:00.573

我设法创建了一个可以遍历所有元素的空查询，如下所示：

```
 //initialize query task
      queryTask = new esri.tasks.QueryTask("https://...");

      //initialize query
      query = new esri.tasks.Query();
      query.returnGeometry = true;
      query.outFields = ["SPAT_NAME"];
      query.where = "1=1";

      //execute query
      queryTask.execute(query,function(results){
        console.log(results);
        console.log(elements);
        for (var i=0, il=results.features.length; i<il; i++) {
          var featureAttributes = results.features[i].attributes;
          //do stuff
          }
        }
      }); 
```

# c# - 如何通过 lambda 表达式进行优化

> ID：13471546
> 
> 赞同：0
> 
> 时间：2012-11-20T10:46:08.907
> 
> 标签：c#

我有一个非常相似的功能，只有一个以前的报告和另一个未来，我怎样才能优化和写漂亮？

```
public bool AnyPreviousReportByGroup(int groupID)
        {
            if(this.GroupID == groupID)
            {
                return true;
            }
            else
            {
                return PreviousReport.AnyPreviousReportByGroup(groupID);
            }
        }

        public bool AnyNextReportByGroup(int groupID)
        {

            if (this.GroupID == groupID)
            {
                return true;
            }
            else
            {
                return NextReport.AnyNextReportByGroup(groupID);
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:50:08.160

以下代码是实现相同目的的更简洁的方法：

```
public bool AnyPreviousReportByGroup(int groupID)
{
    return this.GroupID == groupID ||
           this.PreviousReport != null &&
           this.PreviousReport.AnyPreviousReportByGroup(groupID);
} 
```

如果你真的想使用 lambda 表达式，这里有一个可能的方法：

```
public bool AnyReportByGroup(int groupID, Func<Report, Report> getOtherReport)
{
    if (this.GroupID == groupID)
        return true;

    Report other = getOtherReport(this);
    return other != null &&
           other.AnyReportByGroup(groupID, getOtherReport);
} 
```

然后，您可以使用 lambda 表达式调用此辅助方法：

```
bool anyPrevious = this.AnyReportByGroup(groupID, report => report.PreviousReport);
bool anyNext = this.AnyReportByGroup(groupID, report => report.NextReport); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T10:56:07.627

```
private bool AnyReportByGroup(int groupID, Func<int, bool> callback)
{

    if (this.GroupID == groupID)
    {
        return true;
    }
    else
    {
        return callback(groupID);
    }
}

public bool AnyPreviousReportByGroup(int groupID)
{
    return AnyReportByGroup(groupID, gid => PreviousReport.AnyPreviousReportByGroup(gid));
}

public bool AnyNextReportByGroup(int groupID)
{
    return AnyReportByGroup(groupID, gid => NextReport.AnyNextReportByGroup(gid));
} 
```

但是，我希望这些方法只是一个示例，在您的真实代码中它们更复杂。
否则，我无法理解，您尝试优化什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T10:51:36.677

可能是这样的

```
public enum ReportType{ Next, Previous }

public bool AnyReportByGroup(int groupID, ReportType type)
{
  if(this.GroupID == groupID)
      return true;
  else
  {
      switch(type)
      {
          case ReportType.Next:
            return NextReport.AnyNextReportByGroup(groupID);
          case ReportType.Previous:
            return NextReport.AnyPreviousReportByGroup(groupID);
      }
      return false;
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T11:11:04.343

遍历链表的标准方法如下：

```
 public bool AnyPreviousReportByGroup(int groupID)
    {
        var item = this;
        do
        {
            if (item.GroupId == groupID)
            {
                return true;
            }
            item = item.PreviousReport;
        } while (item != null);
        return false;
    }

    public bool AnyNextReportByGroup(int groupID)
    {
        var item = this;
        do
        {
            if (item.GroupId == groupID)
            {
                return true;
            }
            item = item.NextReport;
        } while (item != null);
        return false;
    } 
```

这样做的好处是不会像递归方法那样创建潜在的大量调用堆栈。

这也修复了您的代码，它从不返回错误，它只是 NPE。

现在我们可以按照您的要求进行重构：

```
 private bool AnyReportByGroup(int groupID, bool searchForward)
    {
        var item = this;
        do
        {
            if (item.GroupId == groupID)
            {
                return true;
            }
            item = searchForward ? item.NextReport : item.PreviousReport;
        } while (item != null);
        return false;
    }

    public bool AnyPreviousReportByGroup(int groupID)
    {
        return AnyReportByGroup(groupID, false);
    }

    public bool AnyNextReportByGroup(int groupID)
    {
        return AnyReportByGroup(groupID, true);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T11:13:49.110

这是一个非递归解决方案，假设您想在`false`报告用完时返回：

```
public bool AnyPreviousReportByGroup(int groupID)
{
    return GetEventualValue(groupID, r => r.PreviousReport);
}

public bool AnyNextReportByGroup(int groupID)
{
    return GetEventualValue(groupID, r => r.NextReport);
}

public bool GetEventualValue(int groupID, Func<Report, Report> nextReport)
{
    Report report = this;
    while (report != null && report.GroupID != groupID)
    {
        report = nextReport(report);
    }
    return report != null;
} 
```

# javascript - 内联代码的 Javascript 垃圾收集

> ID：13471550
> 
> 赞同：1
> 
> 时间：2012-11-20T10:46:44.457
> 
> 标签：javascript, jquery, sql, garbage-collection

我们有内嵌的 Javascript 数据，比如数千行。我观察到它也占用了大量内存，这是移动浏览器中的一个问题。将此代码移动到某个 JSON 文件并对其进行解析是否有帮助。我只希望此代码在执行后立即进行 GC。

```
 db.transaction(function(tx) {
     transaction.executeSql("INSERT INTO TABLE VALUES(111,'xxx','2012-11-09 18:48:12')");
     ..... Another 10K Lines of above String .............
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:00:42.310

大约 10k 的这些行，你有大约半 MB 的原始文本通过你的 js，更不用说你调用`transaction.executeSql()`了大约 10k 次的事实。

`INSERT INTO`您可以通过将多个 (/all)语句组合成一个语句来减少这一点：

```
INSERT INTO
    TABLE
VALUES
    (111,'xxx','2012-11-09 18:48:12'),
    (222,'yyy','2012-11-09 18:48:12'),
    (333,'zzz','2012-11-09 18:48:12')
    etc... 
```

# python - 从集合中获取唯一值“哈希码”

> ID：13471556
> 
> 赞同：0
> 
> 时间：2012-11-20T10:47:00.400
> 
> 标签：python, python-2.7, set

我想将一组两个 int 值表示为一个值，所以我可以拥有：

`x = f(a,b) = f(b,a)`

所以 x 不应代表多个集合。

请提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:26:18.673

该`frozenset`类型是可散列的，您可以从任何可迭代对象中创建一个。要获取哈希值，只需使用内置`hash`函数：

```
x = hash(frozenset([a, b])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:06:13.100

如果您不希望将整数作为 x 的值，我认为返回有序元组应该没问题（它适用于所有数量的值）：

```
>>> s = {1, 2}
>>> s2 = {2, 1}
>>> f = lambda s: tuple(sorted(s))
>>> f(s)
(1, 2)
>>> f(s2)
(1, 2)
>>> f(s) == f(s2)
True 
```

# rest - 使用 Extbase (Typo3) 实现 REST 服务

> ID：13471557
> 
> 赞同：4
> 
> 时间：2012-11-20T10:47:01.243
> 
> 标签：rest, service, typo3, extbase, typo3-flow

我正在寻找一种在 for 中实现 a`REST-Service`的`extbase extension`方法`Typo3`。我只发现旧的或未维护的扩展，它们不使用`extbase`.

那么我怎样才能得到一个为外部请求提供 API 的扩展呢？就像是：

```
GET www.somedoma.in/service/item/1 
```

我找到了[Typo3 Flow](http://www.networkteam.com/blog/post/soap-webservices-mit-typo3-flow.html)的教程。那么如何在 extbase 中使用 Flow 包呢？

我还找到了一种方法来定义自己的页面类型，例如`?type=23123145`可以操作响应的位置。但我认为实施`REST-Service extension`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-17T06:22:27.310

我开始创建一个扩展，因为我对这个话题很感兴趣。当前状态可以在 [https://github.com/cundd/rest](https://github.com/cundd/rest)下找到。它需要安装 cundd_composer 并且正在进行中；-)

更新 1：广告：;-) 扩展用于生产并且正在继续开发中。列举一些特性： - 支持 Extbase - 表映射 - 身份验证

更新 2：项目网站上线：[http ://rest.cundd.net](http://rest.cundd.net)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T09:06:12.253

你不能在 TYPO3 中使用 FLOW3 包。

AFAIK，TYPO3 还没有原生 REST 支持，使用 PUT 或 DELETE 等 RESTful 方法可能会很棘手。但是，您可以使用通用的 Extbase ext 和 RealURL 创建一个 API，该 API 将能够发送 GET 或 POST 请求的响应。

顺便说一句，如果您实现的唯一目标是创建 RESTful API，我建议在其之上使用一些轻量级框架。TYPO3 的主要目的是提供通用且舒适的 CMS 系统，但其性能有时无法与专用解决方案相比。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T15:15:05.427

I can recommend the symfony 2 serializer component! I use it as standalone version as lib. Here is a [tutorial](http://php-and-symfony.matthiasnoback.nl/2012/01/the-symfony2-serializer-component-create-a-normalizer-for-json-class-hinting/)

# actionscript-3 - 在全屏运行时禁用多点触控应用程序的 Windows 8 边缘手势/热角

> ID：13471561
> 
> 赞同：13
> 
> 时间：2012-11-20T10:47:17.450
> 
> 标签：actionscript-3, windows-8, gestures, charms-bar

我有一个在 Windows 7 中运行的带有 Adob​​e AIR 的全屏 AS3 游戏。在这个游戏中，退出可能并不容易（想想 kiosk 模式，只能通过按下`esc`并输入密码退出）。

现在我希望这个游戏在 Windows 8 中运行。游戏运行正常，但令人讨厌的是这些边缘手势/热角（左、上、右、下）和快捷方式。

我读过文章，但没有一个对我有帮助。人们谈论注册编辑，但我没有得到这个工作+用户需要重新启动他/她的计算机。

我想打开我的游戏，关闭手势/热角，当游戏关闭时，手势/热角需要再次可用。

我已经看到一些应用程序在做我想要完成的事情。

我发现[了这一点](https://stackoverflow.com/questions/12269725/detect-simple-touch-gestures)，因此我能够检测到手势。但是如何忽略他们的行为呢？

我还阅读了[华硕智能手势](http://support.asus.com/Troubleshooting/detail.aspx?SLanguage=en&p=3&m=A53E&s=299&hashedid=pNhYyNnFj0hhaQb2&os=&no=1776)，但这是针对触摸板的。

而且我已经尝试过[Classic Shell](http://classicshell.sourceforge.net/)，但我需要在没有此类程序的情况下禁用边缘手势/热角，只是在运行中。

我也发现[了这一点](http://msdn.microsoft.com/en-us/library/windows/desktop/jj553591%28v=vs.85%29.aspx)，但我不知道如何实现这一点。

```
HRESULT SetTouchDisableProperty(HWND hwnd, BOOL fDisableTouch)
{
    IPropertyStore* pPropStore;
    HRESULT hrReturnValue = SHGetPropertyStoreForWindow(hwnd, IID_PPV_ARGS(&pPropStore));
    if (SUCCEEDED(hrReturnValue))
    {
        PROPVARIANT var;
        var.vt = VT_BOOL;
        var.boolVal = fDisableTouch ? VARIANT_TRUE : VARIANT_FALSE;
        hrReturnValue = pPropStore->SetValue(PKEY_EdgeGesture_DisableTouchWhenFullscreen, var);
        pPropStore->Release();
    }
    return hrReturnValue;
} 
```

有谁知道我该怎么做？或者指出我正确的方向？

我在 C# 和 C++ 中尝试过一些，但我不是一个熟练的 C#/C++ 开发人员。此外，该游戏是用 AS3 制作的，因此很难用 C#/C++ 实现这一点。

我在使用 Windows 8的[联想 aio（一体机）上工作。](http://cdn.arstechnica.net/wp-content/uploads/2012/09/A720-press.jpeg)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T09:13:28.237

我正在使用 C# 为 Windows 8 制作一个信息亭应用程序，我通过在程序启动时终止资源管理器进程成功地禁用了滑动手势。我不知道它是如何在 C++ 中完成的，但在 C# 中是这样的。

```
var explorers = Process.GetProcessesByName("explorer");
            foreach (var explorer in explorers) {
                explorer.Kill();
            } 
```

在我的程序结束时，我只是再次开始这个过程。

```
Process.Start("explorer.exe"); 
```

在此工作之前，您可能必须编辑您的寄存器以防止资源管理器在您杀死它后重新启动。

在注册表中转到

> HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon

将 AutoRestartShell 设置为 0。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-29T02:30:56.387

（只要你跑掉 AIR - 听起来像）你可以使用 AIR 2.0 的[NativeProcess](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/desktop/NativeProcess.html)来执行它。

从那里我可以想到两个解决方案：

1.  如果 Classic Shell 中有命令行选项，请从您的 AS3 中调用它并通过它打开/关闭手势。

2.  编写一个手动打开/关闭手势的 C++ 应用程序。

如果您可以让该示例在 C++ 中运行，请在 C++ 中添加一点以处理开/关命令行参数，并在初始化和退出 AS3 应用程序时调用 C++ exe 进行切换。

我没有在此处安装 C++（在工作中），但看起来 C++ 函数只需要您的应用程序的窗口句柄（hWnd）。[本教程](http://msdn.microsoft.com/en-us/library/windows/desktop/ff381409%28v=vs.85%29.aspx)应该让您编译并运行，但您看到的窗口句柄将用于 C++ 应用程序的窗口。

访问 Flash 窗口的句柄会稍微困难一些：

*   直接解决方案；您需要使用 .NET - [Process.MainWindowHandle](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.mainwindowhandle.aspx)，
*   或者没有.NET - [如何从进程ID获取主窗口句柄？](https://stackoverflow.com/questions/1888863/how-to-get-main-window-handle-from-process-id)

无论哪种方式，您都需要使用流程名称或 ID 将其标识为您的 AS3 流程。

此解决方案还取决于您在客户端 PC 上安装 AIR 应用程序以外的其他东西的能力。（即 .NET 运行时、C++ 运行时、经典 Shell 安装程序）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-09T00:48:11.770

我正在尝试做同样的事情。下面的 C++ 在*每个*正在运行的应用程序/窗口上禁用 Win8 手势。正如 JonoRR 所提到的，下一步将只在您想要定位的 HWND 上调用它。如果目标应用程序关闭，然后重新打开，则手势将返回。

```
#include "stdafx.h"
#include <windows.h>
#include <iostream>
#include <propsys.h>
#include <propkey.h>

using namespace std;

HWND windowHandle;

HRESULT SetTouchDisableProperty(HWND hwnd, BOOL fDisableTouch)
{
    IPropertyStore* pPropStore;
    HRESULT hrReturnValue = SHGetPropertyStoreForWindow(hwnd, IID_PPV_ARGS(&pPropStore));
    if (SUCCEEDED(hrReturnValue))
    {
        PROPVARIANT var;
        var.vt = VT_BOOL;
        var.boolVal = fDisableTouch ? VARIANT_TRUE : VARIANT_FALSE;
        hrReturnValue = pPropStore->SetValue(PKEY_EdgeGesture_DisableTouchWhenFullscreen, var);
        pPropStore->Release();
    }
    return hrReturnValue;
}

BOOL CALLBACK MyEnumProc(HWND hWnd, LPARAM lParam)
{
    TCHAR title[500];
    ZeroMemory(title, sizeof(title));    

    GetWindowText(hWnd, title, sizeof(title)/sizeof(title[0]));
    SetTouchDisableProperty(hWnd,true);

    _tprintf(_T("Value is %s\n"), title);

    return TRUE;
}

int _tmain(int argc, _TCHAR* argv[])
{   
    EnumWindows(MyEnumProc, 0);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-26T07:17:32.510

下面的答案基于[Dovogja 的精彩答案](https://stackoverflow.com/a/15543351/209427)，但它使用批处理文件来完成。这样你只需要启动`launch.bat`

Windows 魅力栏由`explorer.exe`. 因此，如果您的应用程序可以在没有它的情况下运行，那么您可以通过首先禁用 explorer.exe 的自动重启来绕过它（以管理员身份运行）：

```
reg add "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon" /v "AutoRestartShell" /t REG_DWORD /d 0 
```

然后下面的行代表我的`launch.bat`- 最终按预期工作：

```
;; kill explorer (this disables all windows functionalities
taskkill /f /im explorer.exe

;; start your kiosk app - should block the batch execution (so explorer.exe doesn't get executed at the end)
"\path\to\your\app.exe"

;; after you close both the app window and the opened chrome window relaunch explorer.exe to give back the functionality to windows
explorer.exe 
```

我使用上述方法让无键盘信息亭应用程序运行。因为使用键盘您仍然可以使用`alt`+关闭应用程序`f4`。

# javascript - 按钮隐藏功能不正常

> ID：13471562
> 
> 赞同：0
> 
> 时间：2012-11-20T10:47:25.407
> 
> 标签：javascript, jquery, jsfiddle

HTML 代码：

```
<div id="slick-slidetoggle">wxyz</div>           
<div id="slickbox" >abcd</div>​ 
```

JavaScript：

```
var hoverVariable=false;
var hoverVariable2=false;

$('#slickbox').hide();
$('#slick-slidetoggle').mouseover(function() {
    hoverVariable2=true;
    $('#slickbox').slideToggle(600);
    return false;
})
$('#slick-slidetoggle').mouseleave(function() {
    hoverVariable2=false;
    setTimeout(function (){
    if(!hoverVariable && !hoverVariable2){
    $('#slickbox').slideToggle(600);
    return false;}
    }, 1000);
})
$('#slickbox').mouseleave(function() {                    
    hoverVariable=false;
    setTimeout(function (){
    if(!hoverVariable && !hoverVariable2){                    
    $('#slickbox').slideToggle(600);
    return false;}
    return false;
    }, 1000); 
})
$('#slickbox').mouseover(function() {
        hoverVariable2=false;

    hoverVariable=true;

})​ 
```

CSS 代码：

```
#slickbox {
    background: black;
    width:100px;
    height: 135px;
    display: none; 
    cursor:pointer;
    color:white;
}
#slick-slidetoggle{
 background: yellow;
    width:100px;
    height: 135px;
    cursor:pointer;
    color:black;

}
​ 
```

现在所需的行为是，当鼠标滑过黄色 div("wxyz") 黑色 div("abcd") 应该向下滑动，如果鼠标移出黄色而不移动到黑色 div，黑色 div 应该在两个之后隐藏秒。

这正在发生。如果鼠标移出黄色 div 后立即移到黑色 div 上，只要鼠标在黑色 div 上，黑色 div 就不会隐藏。这也在发生。

接下来的步骤有点难以解释，但我会尝试，当鼠标移到黄色 div 并且黑色 div 出来时，鼠标移到黑色 div 上，如果它移出它（黑色 div），则在两秒钟内整个动画失控了。它的行为是相反的。但是，如果鼠标在黑色 div 上停留超过两秒钟，然后将其移出，则整个脚本运行良好。

这是更好解释的链接。[http://jsfiddle.net/HAQyK/381/](http://jsfiddle.net/HAQyK/381/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:55:29.990

您的问题似乎是由于您重复的超时功能，slideToggle 快速连续触发两次。处理超时或间隔的最简洁方法是将它们存储在一个变量中，以便您可以控制在不需要时删除它们：

```
// Defined in global scope
var timer;

$('#slick-slidetoggle').mouseleave(function() {
    hoverVariable2=false;
    // Timer set as function
    timer = setTimeout(function (){
    if(!hoverVariable && !hoverVariable2){
        $('#slickbox').slideToggle(600);
        // Timer no longer need and so cleared
        clearTimeout(timer);
    return false;}
 }, 1000);
}); 
```

**编辑：**根据上面的正确答案，忽略添加 slideUp/slideDown 而不是 Toggle。请参阅更新后的 jsFiddle，它现在是正确的：http: [//jsfiddle.net/HAQyK/390/](http://jsfiddle.net/HAQyK/390/)

处理脚本的另一种方法是使用 jQuerys 延迟功能和`stop();`动画方法。将 div 包装在一个容器中，您将得到一个更简单的代码块：

```
$('#slick-container').mouseenter(function() {
    $('#slickbox').stop().slideDown(600);
}).mouseleave(function(){        
    $('#slickbox').stop().delay(1000).slideUp(600);
}); 
```

在这里查看：http: [//jsfiddle.net/HAQyK/387/](http://jsfiddle.net/HAQyK/387/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:12:58.743

尝试用适当的 slideUp() 和 slideDown() 调用替换 slideToggle()。[http://jsfiddle.net/tppiotrowski/HAQyK/386/](http://jsfiddle.net/tppiotrowski/HAQyK/386/)

```
var hoverVariable = false;
var hoverVariable2 = false;

$('#slickbox').hide();
$('#slick-slidetoggle').mouseover(function() {
    hoverVariable2 = true;
    $('#slickbox').slideDown(600);
    return false;
})
$('#slick-slidetoggle').mouseleave(function() {
    hoverVariable2 = false;
    setTimeout(function() {
        if (!hoverVariable && !hoverVariable2) {
            $('#slickbox').slideUp(600);
            return false;
        }
    }, 1000);
})
$('#slickbox').mouseleave(function() {
    hoverVariable = false;
    setTimeout(function() {
        if (!hoverVariable && !hoverVariable2) {
            $('#slickbox').slideUp(600);
            return false;
        }
        return false;
    }, 1000);
})
$('#slickbox').mouseover(function() {
    hoverVariable2 = false;
    hoverVariable = true;
})​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T11:30:47.410

我重新编码了一个解决方案。[**在这里**](http://jsfiddle.net/bruno/HAQyK/389/)检查小提琴[](http://jsfiddle.net/bruno/HAQyK/389/)

 **```
 var hideB;
        var $black = $('#slickbox');
        var $yellow = $('#slick-slidetoggle');

        function showBlack() {
            if( hideB ) window.clearTimeout( hideB );
            $black.stop( true, true );
            $black.slideDown(600);
        }

        function hideBlack() { 
            hideB = setTimeout( function( ) {
                $black.stop( true, true );
                $black.slideUp( 600 ); }
                , 1000 );
        }

        $black.hide();

        $yellow.mouseenter(function() {
            showBlack();
        })

        $yellow.mouseleave(function() {
            hideBlack();
        });

        $black.mouseleave( function( ) {
            hideBlack();
        });

        $black.mouseenter( function( ) {
            showBlack();
        }); 
```**

# dhtml - Openlaszlo DHTML 自定义光标问题

> ID：13471570
> 
> 赞同：1
> 
> 时间：2012-11-20T10:47:56.800
> 
> 标签：dhtml, openlaszlo, lzx

我目前正在将我的 swf 10 OL 5.0 代码迁移到 DHTML 运行时，我正面临这个问题。

我无法为正在拖动的视图设置自定义光标。然后我发现文档中给出的代码也不起作用。以下代码在 swf 10 运行时运行良好，但在 DHTML 运行时不运行。

我附上了示例代码

```
<canvas height="30">
   <resource name="waitcursor" src="wait.png"/>
   <view bgcolor="yellow" cursor="waitcursor">
     <text>Roll over to change the cursor</text>
      <handler name="onmouseover">
       lz.Cursor.showHandCursor(false);
      </handler>
   </view>
 </canvas> 
```

我只能看到一个普通的光标。我尝试通过 javascript 更改光标，但也没有用。我发现精灵事件类正在管理这个，它不可能用 javascript 来解决。

我目前正在 5.0 版本中对此进行测试，并使用 Firefox 16.0 Windows。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T14:55:28.413

您为资源使用了错误的名称。在 DHTML 中操作鼠标光标时，资源的名称直接用作 CSS 属性的值`cursor`。

此代码按预期工作：

```
<canvas height="500">

    <!-- The name attribute used here is directly set as a CSS property
         cursor: {value of name property}. -->
    <resource name="wait" src="cursor_wait.png"/>

    <view bgcolor="yellow" cursor="wait">
        <text>Roll over to change the cursor</text>
        <handler name="onmouseover">
            lz.Cursor.showHandCursor(false);
        </handler>
    </view>

</canvas> 
```

查看 W3C Wiki 文档中的[CSS 属性光标和允许的值](http://www.w3.org/wiki/CSS/Properties/cursor)。允许的值为：

> [ [ ,]* [ 自动 | 十字准线 | 默认 | 指针 | 搬家 | 电子调整大小 | 调整大小 | nw 调整大小 | n-调整大小 | 调整大小 | sw-调整大小 | 调整大小 | w-调整大小 | 正文 | 等待 | 帮助 | 进展] ] | 继承

您的代码将光标值设置为`cursor: waitcursor`，而浏览器无法识别该值。[开发人员指南第 31 章：输入设备和手势](http://www.openlaszlo.org/lps4.9/docs/developers/input-devices.html)中也提到了此限制：

> 使用 OpenLaszlo 4，您可以在 DHTML 和 SWF 中设置自定义光标。如果您计划在 DHTML 和 SWF 中使用自定义光标，请确保您为 DHTML 使用了适当的光标 ID（请参阅 [http://www.quirksmode.org/css/cursor.html](http://www.quirksmode.org/css/cursor.html)了解更多信息），并确保“已包含以 SWF 的这些 ID 命名的资源。

# c# - 从 C# 中的 XML 序列化中删除父 XML 元素？

> ID：13471573
> 
> 赞同：0
> 
> 时间：2012-11-20T10:48:07.247
> 
> 标签：c#, .net, xml, xml-serialization

我有一个名为 Node 的类，在里面我有类型文档类的属性。

当我将它序列化为 XML 时，我得到的输出为

```
<Node>
<DocumentType>
<File></File>
</DoumentType>
<Node> 
```

但我希望输出为

```
<Node>
<File></File>
<Node> 
```

对象代码

```
public class Document
{
    [XmlElement(ElementName = "file")]
    public string File { get; set; }
}

public class Node
{
    public Document NodeDocument
    {
        get;
        set;
    }
} 
```

如何使用 C# xml 序列化来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:30:29.137

按照 Kami 的建议，这里是供您参考的代码。所有功劳都归功于 Kami。

```
public class Node : IXmlSerializable {

    public Node() {
        NodeDocument = new Document();
    }

    public Document NodeDocument { get; set; }

    public System.Xml.Schema.XmlSchema GetSchema() {
        return null;
    }

    public void ReadXml(XmlReader reader) {            
        reader.ReadStartElement();
        NodeDocument.File = reader.ReadString();
        reader.ReadEndElement();
    }

    public void WriteXml(XmlWriter writer) {
        writer.WriteStartElement("file");
        writer.WriteString(NodeDocument.File);
        writer.WriteEndElement();
    }
}

public class Document {
    public String File { get; set; }
}

class Program {
    static void Main(string[] args) {
        var node = new Node();
        node.NodeDocument.File = "bbb.txt";

        Serialize<Node>("a.xml", node);

        node = Deserialize<Node>("a.xml");
        Console.WriteLine(node.NodeDocument.File);

        Console.Read();
    }

    static T Deserialize<T>(String xmlFilePath) where T : class {
        using (var textReader = File.OpenText(xmlFilePath)) {
            using (var xmlTextReader = new XmlTextReader(textReader)) {
                var serializer = new XmlSerializer(typeof(T));
                return (T)serializer.Deserialize(xmlTextReader);
            }
        }
    }

    static void Serialize<T>(String xmlFilePath, T obj) where T : class {
        using (var textWriter = File.CreateText(xmlFilePath)) {
            using (var xmlTextWriter = new XmlTextWriter(textWriter)) {
                var serializer = new XmlSerializer(typeof(T));
                serializer.Serialize(xmlTextWriter, obj);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T10:53:18.373

您是否考虑过实现`IXmlSerializable`接口 - [http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.aspx)。

然后，您应该能够编写自定义序列化/反序列化以方便上述操作。

# spring - 如何使用输入参数测试 Grails webflow？

> ID：13471579
> 
> 赞同：2
> 
> 时间：2012-11-20T10:48:33.190
> 
> 标签：spring, testing, grails, spring-webflow

我正在为 webflow 编写测试，并且我有一个 webflow (A)，它在执行过程中调用另一个 webflow (sub-webflow) (B)。如果 A 调用 B，它总是在调用中声明一个必需的参数/输入。单独测试 A 不是问题，但我如何单独测试 B？输入参数状态为：

```
input {
    station(required: true)
} 
```

我尝试从 startFlow() 开始，但这给了我以下异常：

```
Failure: testCreateWizardSubSubFlow(com.lstelcom.spectraweb.data.EquipmentFlowTests)
org.springframework.webflow.engine.FlowInputMappingException: 
Errors occurred during input mapping on startup of the 'createWizardSubSub' flow;
    errors = [[RequiredError@51a9e7fc mapping = station -> station, code = 'required', error = true, errorCause = [null], originalValue = [null], mappedValue = [null]]]    
at grails.test.WebFlowTestCase.startFlow(WebFlowTestCase.groovy:130)
at com.lstelcom.spectraweb.data.EquipmentFlowTests.testCreateWizardSubSubFlow(EquipmentFlowTests.groovy:38) 
```

`WebFlowTestCase`当我收到错误消息时，不存在带有输入参数（例如 startFlow(new Station()) ）的 startFlow 方法调用：

```
groovy.lang.MissingMethodException: No signature of method: com.lstelcom.spectraweb.data.EquipmentFlowTests.startFlow() is applicable for argument types: (com.lstelcom.spectraweb.data.stations.Station) values: []
Possible solutions: getFlow(), getFlow()
    at com.lstelcom.spectraweb.data.EquipmentFlowTests.testCreateWizardSubSubFlow(EquipmentFlowTests.groovy:38) 
```

所以问题是如何使用输入参数测试 webflow？

# android - Android片段 - 不同的布局进入片段

> ID：13471580
> 
> 赞同：0
> 
> 时间：2012-11-20T10:48:37.813
> 
> 标签：android, android-layout, android-fragments

我正在尝试开发与智能手机（一个窗格布局）和平板电脑（两个窗格布局）兼容的应用程序。我的应用显示如下：

[![分段](../Images/abf7edc8466a80d8f9faccb9e06227f0.png)](https://i.stack.imgur.com/82VGb.png)
[（来源：[android10.org](http://android10.org/images/stories/develoment_1/working_with_fragments_android10_02.png)）]

我使用了[Google 开发者网站上](https://developer.android.com/guide/components/fragments)提供的示例。

该示例工作正常。但是对于我的应用程序，我需要在`WebView fragment`. 中选择的每个元素都会在`ListView fragment`正确的片段中显示特定的布局。

这是我在单击元素时调用的代码：

```
public void onArticleSelected(int position) {
    // The user selected the headline of an article from the
    // HeadlinesFragment

    // Capture the article fragment from the activity layout
    BodyFragment articleFrag = (BodyFragment) getSupportFragmentManager().findFragmentById(R.id.body_fragment);

    if (articleFrag != null) {
        // If article frag is available, we're in two-pane layout...

        // Call a method in the ArticleFragment to update its content
        articleFrag.updateArticleView(position);

    } else {
        // If the frag is not available, we're in the one-pane layout and
        // must swap frags...

        // Create fragment and give it an argument for the selected
        // article
        BodyFragment newFragment = new BodyFragment();

        Bundle args = new Bundle();
        args.putInt(BodyFragment.ARG_POSITION, position);
        newFragment.setArguments(args);
        FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();

        // Replace whatever is in the fragment_container view with this
        // fragment,
        // and add the transaction to the back stack so the user can
        // navigate back
        transaction.replace(R.id.fragment_container, newFragment);
        transaction.addToBackStack(null);

        // Commit the transaction
        transaction.commit();
    }
} 
```

我该怎么做？我想将布局动态替换到片段中，但这是不可能的。

有人有解决方案吗？

提前致谢

# python - 在 Python 的内置数字类型上， repr 和 str 是否总是相同的？

> ID：13471581
> 
> 赞同：5
> 
> 时间：2012-11-20T10:48:39.460
> 
> 标签：python, representation

在 Python 的内置数字类型（、、、和）上是否相同，`repr`或者是否存在（深奥？）两者可能产生不同结果的情况？`str``int``bool``float``complex`

关于 SO 的相关问题（例如[这个](https://stackoverflow.com/q/1436703/974555)）集中在如何`__repr__`以及`__str__`可能以不同的方式实现，并为字符串返回不同的值，但我在数字的实际实现中找不到任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T10:59:20.640

您的主要信息来源是[http://hg.python.org/cpython/file/tip/Objects](http://hg.python.org/cpython/file/tip/Objects) 例如，在`boolobject.c`：

```
PyTypeObject PyBool_Type = {
    ...stuff...

    bool_repr,                                  /* tp_repr */

    ...stuff...

    bool_repr,                                  /* tp_str */ 
```

所以是的，它们保证是相同的。

对于浮点数，`float_repr`不同于`float_str`并取决于`sys.float_repr_style`.

# java - 一个 Activity 中包含几个列表的 ListView

> ID：13471584
> 
> 赞同：2
> 
> 时间：2012-11-20T10:48:49.303
> 
> 标签：java, android

我尝试在只有一个 Activity 的 ListView 中放置菜单选择器之类的东西。只有一个 XML 文件，一个 Activity 一个 ListAdapter，但很少有包含项目的列表来填充它。

我正在尝试这样做：根据我们的选择，在**OnItemClickListener**上，我获取项目位置，保存并打开另一个列表。它的工作，但只有在第一次点击。当我尝试选择第一个选项 2 次时，OnClick 方法会从第一个列表跳转到最后一个。当我尝试选择第一个选项然后任何其他选项时，它的工作都是完美的

但是，如果列表中的所有选项都有可用的所有选项，那就太好了 :)

还有其他方法可以制作这样的东西吗？或解决这个问题？当然，我可以为每个列表创建 xml 文件和活动，但是当你有 20 种不同的组合时，这不是一个好的选择：D

# java - JFileChooser 没有打开默认的 Win 7 文件资源管理器

> ID：13471587
> 
> 赞同：3
> 
> 时间：2012-11-20T10:48:56.120
> 
> 标签：java, swing, swt, jfilechooser

我正在使用`JFileChooser`在 WIN 7 中打开文件资源管理器并意识到它打开了旧的 UI，但相同的 SWT`FileDialog`仅打开了 WIN 7 文件资源管理器。

有没有什么具体原因。

`JFileChooser`： ![在此处输入图像描述](../Images/c9ad812b075c65d8eb909a9d03fdb305.png)

SWT `FileDialog`： ![在此处输入图像描述](../Images/2999b9367cde9575b069743ee1c4b286.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:26:05.250

*   AFAIK 这对于 AWT / Swing 是不可能的，Java 6 / 7 错过了这一点，对于 WinXP 的一些实现（也许对于 Vista，从未使用过这个“middle_Win”版本）

*   [关于同一问题的问题](https://stackoverflow.com/questions/5703825/does-swing-support-windows-7-style-file-choosers)，包括。测试代码

*   有一些关于更新到后来的 Java7 的承诺（不是现在）

# sitecore - sitecore 发布初始化

> ID：13471591
> 
> 赞同：1
> 
> 时间：2012-11-20T10:49:13.767
> 
> 标签：sitecore

当我想在 sitecore 后端发布一个项目时，我遇到了一个问题。发布弹出窗口冻结，消息显示“正在初始化”。

我已经尝试回收网站应用程序池，但问题仍然存在。

站点核心版本是 6.3。

这里有一些日志：

异常：System.Exception 消息：列名“序列”无效。资料来源： Sitecore.Data.DataProviders.Sql.DataProviderCommand.ExecuteReader() 的 Sitecore.Kernel.Data.DataProviders.Sql.SqlDataApi.CreateReader(String) 的 Sitecore.Data.DataProviders.Sql.DataProviderReader..ctor(DataProviderCommand 命令) sql, Object[] 参数）在 Sitecore.Data.DataProviders.Sql.SqlDataApi.d__0 `1.MoveNext() at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 源）在 Sitecore.Data.Eventing.SqlEventQueue.GetTimestampForLastProcessing() 在 Sitecore.Eventing.EventQueue.GetQueuedEvents(String targetInstanceName) 在 Sitecore.Eventing .EventQueue.ProcessEvents(Action`2 handler) at Sitecore.Eventing.EventProvider.RaiseQueuedEvents() at Sitecore.Services.AlarmClock.Heartbeat_Beat(Object sender, EventArgs e)

嵌套异常

异常：System.Data.DataException 消息：执行 SQL 命令时出错：SELECT MAX([Created]), MAX([Sequence]) FROM [EventQueue]

任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:27:42.650

正如我在评论中提到的，我认为您在升级到 6.3 期间错过了一些东西。因此，除了这个 EventQueue 表之外，可能还有很多其他的问题，但是要修复这个表问题，您可以重新创建它：

首先在每个 Sitecore 数据库（核心、主数据库和 Web）中删除 EventQueues 表。

然后用这个脚本重新创建它：

```
CREATE TABLE [EventQueue]
(
    [Id] UNIQUEIDENTIFIER NOT NULL,
    [EventType] NVARCHAR(256) NOT NULL,
    [InstanceType] NVARCHAR(256) NOT NULL,
    [InstanceData] NVARCHAR(MAX) NOT NULL,
    [InstanceName] NVARCHAR(128) NOT NULL,
    [RaiseLocally] INT NOT NULL,
    [RaiseGlobally] INT NOT NULL,
    [UserName] NVARCHAR(128) NOT NULL,
    [Sequence] BIGINT IDENTITY(1,1) NOT NULL,
    [Created] DATETIME NOT NULL
)
ON [PRIMARY];

ALTER TABLE [EventQueue]
ADD CONSTRAINT [DF_EventQueue_Created]
DEFAULT (GETUTCDATE())
FOR [Created]

CREATE CLUSTERED INDEX [IX_Sequence] ON [dbo].[EventQueue] ([Created] ASC,[Sequence] ASC)
ON [PRIMARY] 
```

如果你很幸运，这是唯一的问题，你很高兴。如果运气不好，EventQueue 问题会得到修复，但会弹出下一个问题 :)

# jquery - HTML DOM 和 JQuery 哪个更高效

> ID：13471596
> 
> 赞同：2
> 
> 时间：2012-11-20T10:49:30.313
> 
> 标签：jquery, html, dom

我正在尝试`document.createElement`通过**Javascript**在 HTML 页面正文中添加新元素，我正在使用少量`if`/ `else`case 和函数调用来执行此操作。一切正常。
最近我知道我也可以用 JQuery 来做到这一点。我还没有做太多的编码，所以我想知道哪种方式在效率方面最好？使用原生 DOM 方法还是使用 JQuery 在页面上动态添加元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T10:51:52.787

使用本机 JavaScript 应该更快，因为 jQuery 将在所有填充下使用它。

jQuery 给你的是浏览器的抽象。谁说一个浏览器没有实现`document.createElement`？然后你必须为你的 DOM 操作写很多`if-then-else`代码。

jQuery 以效率为代价，但比编写自己的原生 JS 节省了很多心痛并提供了很多实用程序。

# internet-explorer-8 - 再次超大+ ie8/7

> ID：13471598
> 
> 赞同：0
> 
> 时间：2012-11-20T10:49:37.040
> 
> 标签：internet-explorer-8, modernizr, supersized

我遇到了一个老问题，但常见的解决方案不起作用。我将超大型插件与 modernizr 媒体查询相结合。

在所有普通浏览器甚至 IE 9 中一切正常。但 IE8/IE7 无法加载超大插件。我什至删除了图像列表后的逗号。

代码如下。有什么建议么？

```
 Modernizr.load([
            {
                test:Modernizr.mq('only screen and (min-width: 600px)'),
                yep:['/js/supersized/js/supersized.core.3.2.1.min.js','/js/supersized/css/supersized.core.css'],
                complete: function() {
                    if(Modernizr.mq('only screen and (min-width:600px)')) {
                        jQuery(function($){
                            $.supersized({
                                fit_portrait: true,
                                slides  : [
                                    {image : '/img/sample.jpg', title : 'sample'}
                                ]
                                });
                        }); 
                    };
                }
            }
        ]); 
```

亲切的问候，阿雷克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:46:35.020

是在您的modernizr 构建中添加的html5 shiv。我在 ie8 及以下版本中遇到了最新版本的 supersized 问题，因为插件试图将元素附加到备用元素。但是在 ie8(& below) 中，当没有 html5-shiv 时，在您的 javascript 中无法正确识别旁边的元素，在附加功能上出错并惨遭失败。

# python - 合并 numpy 数组（将额外的值插入现有数组）

> ID：13471600
> 
> 赞同：1
> 
> 时间：2012-11-20T10:49:37.980
> 
> 标签：python, numpy, merge, plot

用例：比如在 Matplotlib 中绘图。

```
import numpy as np
orig = np.arange(0, 30 + 0.5, 0.5)
extra = orig - 0.01  # I'm interested in a few extra values

x = np.???(orig, extra) 
```

我想要的是以某种方式合并（我猜当前用例也需要排序）这两个数组（并不总是具有相同的大小），以便我可以将它用于后续绘图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:53:40.273

如果我理解正确，您正在寻找

```
x = np.sort(np.hstack((orig, extra))) 
```

在这里，[`hstack()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.hstack.html)合并两个数组，并对[`sort()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.sort.html)结果进行排序。

# android - 哪个第三方库用于在 android 中创建 3d 视图条形图？

> ID：13471603
> 
> 赞同：1
> 
> 时间：2012-11-20T10:49:56.187
> 
> 标签：android, 3d, bar-chart

是否有任何第三方库可用于在 android 中创建 3d 条形图。如果是这样，任何人都可以给我一个示例程序吗？

感谢您宝贵的时间！..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T10:52:36.907

1) [AChartEngine](http://code.google.com/p/achartengine/)是 Android 应用程序的图表库。

2）您还可以使用另一个名为[ChartDroid](http://code.google.com/p/chartdroid/)的库。

# python - 概念：模拟 DB python

> ID：13471604
> 
> 赞同：0
> 
> 时间：2012-11-20T10:49:58.300
> 
> 标签：python, mocking

我正在使用 postgresql 并使用 MagicMock 进行测试，但我不确定我是否理解了 mock 的概念。这是我的示例代码（我有一个 dbname=test、table=py_test 和 user = simone）：

```
 import psycopg2
    import sys
    from mock import Mock, patch
    import unittest
    from mock import MagicMock 
    from collections import Counter
    import doctest

    class db(object):
        def __init__(self,database, user):
            self.con = None
            self.database = database
            self.user = user

        def test_connection(self):
            """Connection DB"""
            try:
                self.con = psycopg2.connect(database=self.database, user=self.user)
                return True
            except psycopg2.DatabaseError, e:
                print 'Error %s' % e    
                return False

        def test_empty_table(self,table):
            """empty table?"""
            try:
                cur = self.con.cursor()
                cur.execute('SELECT * from ' + table )
                ver = cur.fetchone()
                return ver
            except psycopg2.DatabaseError, e:
                print 'Error %s' % e    

        def test_data_type(self, table, column):
            """data type"""
            try:
                cur = self.con.cursor()
                cur.execute("SELECT data_type from information_schema.columns where table_name = '"+ table + "' and column_name= '"+column+"'")
                ver = cur.fetchone()
                return ver
            except psycopg2.DatabaseError, e:
                print 'Error %s' % e    

        def __del__(self):
            if self.con:
                self.con.close()

    class test_db(unittest.TestCase):

        def testing(self):
            tdb = db('test','simone')
            self.assertTrue(tdb.test_connection(), 1)
            self.assertTrue(tdb.test_empty_table('py_test'), 1)
            self.assertTrue(tdb.test_data_type('py_test','id'), int)

    class test_mock(object):
        def __init__(self, db):
            self.db = db
        def execute(self, nomedb, user, table, field):
            self.db(nomedb, user)
            self.db.test_connection()
            self.db.test_empty_table(table)
            self.db.test_data_type(table, field)

    if __name__ == "__main__":
        c = MagicMock()
        d = test_mock(c)
        d.execute('test','simone','py_test','id')
        method_count = Counter([str(method) for method in c.method_calls])
        print c.method_calls
        print method_count
        print c.mock_calls 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:05:17.613

也许我会给你一些使用 Mockito 包进行模拟的其他示例：

```
import sphinxsearch
import unittest
from mockito import mock, when, unstub, verify

class SearchManagerTest(unittest.TestCase):

    def setUp(self):
        self.sphinx_client = mock()
        when(sphinxsearch).SphinxClient().thenReturn(self.sphinx_client)

    def tearDown(self):
        unstub()

    def test_search_manager(self):
        # given
        value = {'id': 142564}
        expected_result = 'some value returned from SphinxSearch'

        # when
        search_manager = SearchManager()
        result = search_manager.get(value)

        # then
        verify(self.sphinx_client).SetServer('127.0.0.1', 9312)
        verify(self.sphinx_client).SetMatchMode(sphinxsearch.SPH_MATCH_ALL)
        verify(self.sphinx_client).SetRankingMode(sphinxsearch.SPH_RANK_WORDCOUNT)
        self.assertEqual(result, expected_result) 
```

主要概念是替换一些在其他地方测试过的模块（模拟）（它有自己的 unittest 模块）并记录一些行为。

替换您使用模拟的模块：

```
self.sphinx_client = mock() 
```

然后在这个模拟上记录，如果你调用特定的方法，这个方法将返回一些数据——如果你需要检查行为，简单的值，比如字符串或模拟数据：

```
when(sphinxsearch).SphinxClient().thenReturn(self.sphinx_client) 
```

在这种情况下，您告诉如果您导入**sphinxsearch**模块并在其上调用**SphinxClient()** ，您将获得模拟对象。

然后是主要测试。您调用方法或对象进行测试（此处为 SearchManager）。它的身体用一些**给定**的值进行了测试：

```
self.search_manager = SearchManager() 
```

**当**部分验证是否进行了某些操作：

```
verify(self.sphinx_client).SetServer('127.0.0.1', 9312)
verify(self.sphinx_client).SetMatchMode(sphinxsearch.SPH_MATCH_ALL)
verify(self.sphinx_client).SetRankingMode(sphinxsearch.SPH_RANK_WORDCOUNT) 
```

这里 - 如果在**self.sphinx_client**上使用参数**'127.0.0.1'**和**9312调用****SetServer**。另外两行像上面一样是不言自明的。

 ******在这里我们进行常规检查：

```
self.assertEqual(result, expected_result) 
```******

# mysql - 在查询具有内部联接的 mysql 中替代 NOT IN

> ID：13471606
> 
> 赞同：0
> 
> 时间：2012-11-20T10:50:00.750
> 
> 标签：mysql, sql, outer-join, notin

我遇到了一种情况，我想从一个数据库表中获取不在其他数据库表中的数据。为此，我使用 NOT IN 子句。这适用于少量数据。当表有大量数据时，会花费大量时间。我检查了 2000 行，这需要 8 多分钟。我认为巨大的时间是因为 NOT IN 子句。请任何人建议尽快执行此操作的替代方法。

**编辑**：架构有很小的变化。在 dept_project_tasks 我有关联表的 ID。（我正在使用带有默认 ID 的 Rails）

DB和查询详细信息如下：（Sqlfiddle链接相同：[点击](http://sqlfiddle.com/#!2/591e1/5)这里。请不要在同一个sqlfiddle页面修改）

数据库 1：

```
 create table TASKS(task_code VARCHAR(20), task_name VARCHAR(20), project_name VARCHAR(20),dept_code VARCHAR(20));

 insert into TASKS(task_code, task_name, project_name, dept_code) VALUES("task1", "task1", "project1", "dept1");
 insert into TASKS(task_code, task_name, project_name, dept_code) VALUES("task1", "task1", "project1", "dept2");
 insert into TASKS(task_code, task_name, project_name, dept_code) VALUES("task2", "task2", "project2", "dept1");
 insert into TASKS(task_code, task_name, project_name, dept_code) VALUES("task2", "task2", "project2", "dept3");
 insert into TASKS(task_code, task_name, project_name, dept_code) VALUES("task3", "task3", "project3", "dept2");
 insert into TASKS(task_code, task_name, project_name, dept_code) VALUES("task3", "task3", "project3", "dept1");
 insert into TASKS(task_code, task_name, project_name, dept_code) VALUES("task4", "task4", "project4", "dept1");
 insert into TASKS(task_code, task_name, project_name, dept_code) VALUES("task4", "task4", "project4", "dept3"); 
```

数据库 2：

```
 create table depts(dept_code VARCHAR(20), dept_name VARCHAR(20));
 create table project_tasks(task_code VARCHAR(20), task_name VARCHAR(20));
 create table dept_project_tasks(dept_code VARCHAR(20), task_code VARCHAR(20));

 insert into depts(dept_code, dept_name) values("dept1", "dept_one");
 insert into depts(dept_code, dept_name) values("dept2", "dept_two");

 insert into project_tasks(task_code, task_name) values("task1", "task1");
 insert into project_tasks(task_code, task_name) values("task2", "task2");
 insert into project_tasks(task_code, task_name) values("task3", "task3");

 insert into dept_project_tasks(dept_code, task_code) values("dept1", "task1");
 insert into dept_project_tasks(dept_code, task_code) values("dept2", "task1");
 insert into dept_project_tasks(dept_code, task_code) values("dept1", "task2");
 insert into dept_project_tasks(dept_code, task_code) values("dept3", "task2"); 
```

查询是：

```
 SELECT distinct task_code 
 from TASKS as TS 
 where TS.dept_code="dept1"  
   AND TS.task_code NOT IN (SELECT `project_tasks`.task_code 
                            FROM `project_tasks` 
                            INNER JOIN `dept_project_tasks` ON `project_tasks`.task_code = `dept_project_tasks`.task_code 
                            WHERE `dept_project_tasks`.dept_code = "dept1"
                           ); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:00:22.153

`LEFT JOIN`像这样使用：

```
SELECT distinct ts.task_code t1
from TASKS as TS 
LEFT JOIN `project_tasks` pt ON ts.task_code = pt.task_code
LEFT JOIN `dept_project_tasks` dpt ON pt.task_code = dpt.task_code 
WHERE dpt.task_code IS NULL; 
```

## [更新的 SQL Fiddle 演示](http://sqlfiddle.com/#!2/591e1/12)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:33:50.580

首先，你不需要带入`project_tasks`，只要有一个强制的外键

```
SELECT distinct task_code 
from TASKS as TS 
where TS.dept_code="dept1" 
AND    TS.task_code NOT IN (
    SELECT `dept_project_tasks`.task_code 
    FROM `dept_project_tasks` WHERE `dept_project_tasks`.dept_code = "dept1"
); 
```

其次，您需要一个`dept_project_tasks.dept_code`包含 task_code 的索引。

# import - Drupal 7 内容复制

> ID：13471610
> 
> 赞同：0
> 
> 时间：2012-11-20T10:50:09.867
> 
> 标签：import, drupal-7, copy

我想将特定内容类型的所有节点从一个 Drupal 站点复制到另一个 Drupal 站点（两个完全不同的站点 | 不同的数据库 | 不同的文件系统）...请建议最佳方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:29:59.983

我发现的最好方法是使用[node_export](http://drupal.org/project/node_export)和[VBO](http://drupal.org/project/views_bulk_operations)

希望能帮助到你

公关

# c - 如何从 JobObject 中分离进程

> ID：13471611
> 
> 赞同：1
> 
> 时间：2012-11-20T10:50:13.247
> 
> 标签：c, windows

有没有办法从 JobObject 中分离进程？我的问题是，如果我使用 RunAs 创建一个新进程，例如 cmd.exe，那么它将自动分配给 JobObject。如果我想从这个 cmd 运行我的应用程序，它也会被分配给这个 jobobject。问题从这里开始，因为我的应用程序会创建一个新的jobobject并创建一个新进程，然后将其分配给我的新JobObject，但它无法关联，因为第一个以runas开头的cmd已经分配给了一个jobobject，并且所以我创建的新进程也分配给了这个jobobject。

所以我的问题是，如何将第一个 cmd 从将自动创建的 jobobject 中分离出来，或者我还能如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T03:35:09.940

考虑以标准用户身份运行父应用程序并使用提升权限，而不是使用 runas [`CreateProcessWithLogonW`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682431%28v=vs.85%29.aspx)。

或者，您可以使用[`psexec`](http://technet.microsoft.com/en-us/sysinternals/bb897553)which 虽然设计用于远程执行命令，但通常可以用于转义本地计算机上的当前上下文。您可以使用 psexec 作为 runas 的替代方案：

```
psexec -i \\%COMPUTERNAME% -u adminuser cmd.exe 
```

（系统将提示您输入密码）或者您可以使用 runas 然后

```
psexec -s -i \\%COMPUTERNAME% parent.exe 
```

`parent.exe`在本地系统上下文中运行。这将转义现有的作业对象，因为新进程是从系统服务启动的。

请注意，在 Vista 及更高版本中使用`psexec`标志`-i`会更棘手，因为它更广泛地使用多个终端服务器会话；在那种情况下，您最好还是坚持使用 runas。幸运的是，您的问题仅适用于 XP。:-)

# functional-programming - “期权价值”的简明符号是什么？

> ID：13471617
> 
> 赞同：0
> 
> 时间：2012-11-20T10:50:51.263
> 
> 标签：functional-programming

是否有数学符号或其他简洁的符号来表示选项值（OCaml 的`option`类型，Haskell 的`Maybe`......）？

它在函数式编程中经常出现，以至于我希望为这种类型找到一个简洁的语法，就像列表有一些标准`[]`的符号，函数有`->`符号等等一样。

我知道在更正式的上下文中，可能会使用部分函数表示法，但在大多数情况下，它不如 Some/None（或 Just/Nothing）的某些显式符号那么合适。

理想情况下，我想写一些类似的东西：

`This function returns #42 if the input is valid, @ otherwise.`

其中`#42`代表`Some 42`和`@`代表`None`，但以标准方式，大多数读者（或至少具有一定数学背景的读者）易于理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:29:11.543

我还没有看到任何这样的具体符号。我知道的最接近的是使用数学符号来表示类型：`α ⊕ 1`. 这里⊕代表类型的直接和（不相交），1代表单元类型。

这种表示法用于范畴论或类型系统。

# iphone - 全屏UIWebView隐藏状态栏

> ID：13471621
> 
> 赞同：0
> 
> 时间：2012-11-20T10:51:04.930
> 
> 标签：iphone, objective-c, uiwebview, uistatusbar

我正在使用以下代码在 UIWebView 中打开视频。

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSLog(@"Navigatin Type %d %@",navigationType, request);
    if (navigationType == 0) {
        self.navigationItem.leftBarButtonItem = backBarBtn;
        [self showVideoInWebView:[request.URL absoluteString]];
        return NO;
    }

    return YES;
}

-(void)showVideoInWebView:(NSString *)urlStr
{
    [mainWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlStr]]];
} 
```

但是当我的 mainWebView 全屏打开时，它会隐藏我的状态栏。

我不想隐藏状态栏

那我怎样才能显示我的状态栏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:07:50.787

您可以设置通知以使状态栏可见。设置全屏进入和退出通知的通知，以便您可以根据需要显示和隐藏状态栏。

```
// For FullSCreen Entry 

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(videoFullScreen:) name:@"UIMoviePlayerControllerDidEnterFullscreenNotification" object:nil];

// For FullSCreen Exit
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(videoExitFullScreen:) name:@"UIMoviePlayerControllerDidExitFullscreenNotification" object:nil];

- (void)videoFullScreen:(id)sender
   {
     [[UIApplication sharedApplication] setStatusBarHidden:NO animated:NO];

   }

- (void)videoExitFullScreen:(id)sender
 {
  //Here do WHat You want
 } 
```

我相信它会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T10:56:18.013

这是内置电影播放器​​ AFAIK 的行为，您无法更改它......也许可以使用替代 HTML5 控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T10:56:36.780

当你当时`UIWebView`开始全屏时写下这一行..

试试这条线..

```
-(void)moviePlayerEvent:(NSNotification*)aNotification{

     [[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:NO];
     NSLog(@"%i", [UIApplication sharedApplication].statusBarHidden);

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-27T09:30:16.143

其他方式：

```
[[NSNotificationCenter defaultCenter] addObserver:self                                             
selector:@selector(VideoFullScreenExit:) name:UIWindowDidBecomeHiddenNotification object:self.view.window];

- (void)VideoFullScreenExit:(id)sender {
    [[UIApplication sharedApplication] setStatusBarHidden:NO];
} 
```

# python - 使用哈希访问方法向 BerkeleyDB 添加键值对

> ID：13471622
> 
> 赞同：0
> 
> 时间：2012-11-20T10:51:06.660
> 
> 标签：python, berkeley-db

我正在尝试使用哈希访问方法创建一个 BerkeleyDB，如下所示：

```
>>> from bsddb3 import db
>>> dben = DB()
>>> dben.open("filename", None, db.DB_HASH, db.DB_CREATE) 
```

但是，当我尝试插入一个条目时，没有任何效果：

```
>>> dben.put(3,2) 
```

结果是

> Traceback（最近一次调用最后一次）：文件“”，第 1 行，在 dben.put(3,2) 类型错误：整数键只允许用于 Recno 和 Queue DB

尝试

```
>>> dben[2] = 1 
```

它给出了同样的错误。

如何向我的哈希 BerkeleyDB 添加条目？

使用 cntrl-space 进行自动完成，我看不到相关方法。文档也是如此：[PyBSDDB v5.3.0 文档](http://www.jcea.es/programacion/pybsddb_doc/db.html#db-methods)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:13:03.053

Python 3+ 上唯一（丑陋的）解决方法是首先将字符串编码为字节：

```
dben.put(bytes(str(3), "ascii"), bytes(str(2), "ascii")) 
```

或者，更方便的是：

```
dben.put(str(3).encode("ascii"), str(2).encode("ascii"))

>>> dben.exists(bytes(2, "ascii"))
False
>>> dben.exists(bytes(3, "ascii"))
True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-28T10:32:53.130

bsddb 仅将字节存储为键和值。所以你必须先将你的值转换为字节。首选方法是使用 struct python 模块。

# c++ - Impossible to be const-correct when combining data and it's lock?

> ID：13471628
> 
> 赞同：7
> 
> 时间：2012-11-20T10:51:16.600
> 
> 标签：c++, multithreading, c++11, thread-safety, mutable

I've been looking at ways to combine a piece of data which will be accessed by multiple threads alongside the lock provisioned for thread-safety. I think I've got to a point where I don't think its possible to do this whilst maintaining const-correctness.

Take the following class for example:

```
template <typename TType, typename TMutex>
class basic_lockable_type
{

public:
    typedef TMutex lock_type;

public:
    template <typename... TArgs>
    explicit basic_lockable_type(TArgs&&... args)
        : TType(std::forward<TArgs...>(args)...) {}

    TType& data() { return data_; }
    const TType& data() const { return data_; }

    void lock() { mutex_.lock(); }
    void unlock() { mutex_.unlock(); }

private:
    TType           data_;
    mutable TMutex  mutex_;

};

typedef basic_lockable_type<std::vector<int>, std::mutex> vector_with_lock; 
```

In this I try to combine the data and lock, marking `mutex_` as `mutable`. Unfortunately this isn't enough as I see it because when used, `vector_with_lock` would have to be marked as `mutable` in order for a read operation to be performed from a `const` function which isn't entirely correct (`data_` should be `mutable` from a const).

```
void print_values() const
{
    std::lock_guard<vector_with_lock> lock(values_);
    for(const int val : values_)
    {
        std::cout << val << std::endl;
    }
} 

vector_with_lock values_; 
```

Can anyone see anyway around this such that const-correctness is maintained whilst combining data and lock? Also, have I made any incorrect assumptions here?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T11:04:54.460

Personally, I'd prefer a design where you don't have to lock manually, and the data is properly encapsulated in a way that you cannot actually access it without locking first.

One option is to have a friend function `apply` or something that does the locking, grabs the encapsulated data and passes it to a function object that is run with the lock held within it.

```
//! Applies a function to the contents of a locker_box
/*! Returns the function's result, if any */
template <typename Fun, typename T, typename BasicLockable>
ResultOf<Fun(T&)> apply(Fun&& fun, locker_box<T, BasicLockable>& box) {
    std::lock_guard<BasicLockable> lock(box.lock);
    return std::forward<Fun>(fun)(box.data);
}
//! Applies a function to the contents of a locker_box
/*! Returns the function's result, if any */
template <typename Fun, typename T, typename BasicLockable>
ResultOf<Fun(T const&)> apply(Fun&& fun, locker_box<T, BasicLockable> const& box) {
    std::lock_guard<BasicLockable> lock(box.lock);
    return std::forward<Fun>(fun)(box.data);
} 
```

Usage then becomes:

```
void print_values() const
{
    apply([](std::vector<int> const& the_vector) {
        for(const int val : the_vector) {
            std::cout << val << std::endl;
        }
    }, values_);
} 
```

Alternatively, you can abuse range-based for loop to properly scope the lock and extract the value as a "single" operation. All that is needed is the proper set of iterators¹:

```
 for(auto&& the_vector : box.open()) {
    // lock is held in this scope
    // do our stuff normally
    for(const int val : the_vector) {
        std::cout << val << std::endl;
    }
 } 
```

I think an explanation is in order. The general idea is that `open()` returns a RAII handle that acquires the lock on construction and releases it upon destruction. The range-based for loop will ensure this temporary lives for as long as that loop executes. This gives the proper lock scope.

That RAII handle also provides `begin()` and `end()` iterators for a range with the single contained value. This is how we can get at the protected data. The range-based loop takes care of doing the dereferencing for us and binding it to the loop variable. Since the range is a singleton, the "loop" will actually always run exactly once.

The `box` should not provide any other way to get at the data, so that it actually enforces interlocked access.

Of course one can stow away a reference to the data once the box is open, in a way that the reference is available after the box closes. But this is for protecting against Murphy, not Machiavelli.

The construct looks weird, so I wouldn't blame anyone for not wanting it. One one hand I want to use this because the semantics are perfect, but on the other hand I don't want to because this is not what range-based for is for. On the gripping hand this range-RAII hybrid technique is rather generic and can be easily abused for other ends, but I will leave that to your imagination/nightmares ;) Use at your own discretion.

* * *

¹ Left as an exercise for the reader, but a short example of such a set of iterators can be found in my own [locker_box implementation](https://bitbucket.org/martinhofernandes/wheels/src/default/include/wheels/concurrency/locker_box.h%2B%2B).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T10:57:06.693

What do you understand by "const correct"? Generally, I think that there is a consensus for logical const, which means that if the mutex isn't part of the logical (or observable) state of your object, there's nothing wrong with declaring it `mutable`, and using it even in const functions.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T11:05:01.380

In a sense, whether the mutex is locked or not is part of the observable state of the object -- you can observe it for example by accidentally creating a locking inversion.

That is a fundamental issue with self-locking objects, and I guess one aspect of it does relate to const-correctness.

Either you can change the "lockedness" of the object via a reference-to-const, or else you can't make synchronized accesses via reference-to-const. Pick one, presumably the first.

The alternative is to ensure that the object cannot be "observed" by the calling code while in a locked state, so that the lockedness isn't part of the observable state. But then there's no way for a caller to visit each element in their `vector_with_lock` as a single synchronized operation. As soon as you call the user's code with the lock held, they can write code containing a potential or guaranteed locking inversion, that "sees" whether the lock is held or not. So for collections this doesn't resolve the issue.

# windows - Windows Server 2003 权限 - 受限的 Web 目录

> ID：13471632
> 
> 赞同：0
> 
> 时间：2012-11-20T10:51:30.047
> 
> 标签：windows, permissions, iis-6, windows-server-2003

我对 Windows 服务器不是很好，所以不确定描述这一点的最佳方式。我有一个运行 IIS 6 的 Windows 2003 Server 机器。我将设计器 FTP 提供给根目录上的特定文件夹并允许读/写访问。这样他们就无法触及网站的其余部分。

不过，他的剧本就一定能做到吗？例如他可以创建一个上传脚本？“自包含”此文件夹的最佳方法是什么？

干杯， RJ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:48:01.617

如果可能的话，我会做的是删除 IIS 中该文件夹的执行权限

```
In IIS MMC expand the website, select the folder and open the properties windows. 
On the Home Directory tab, Change the execute permissions to **NONE** 
```

这将允许他们上传文件（任何文件），但该文件夹中的脚本将不会执行/运行

希望这可以帮助。

# sql - 两个左外连接

> ID：13471638
> 
> 赞同：3
> 
> 时间：2012-11-20T10:51:44.420
> 
> 标签：sql

我有两个这种形式的表：

存货：

```
Units   InDate OutDate

1000     11/4   12/4

2000     13/4   14/4 
```

价格：

```
Date Price
11/4    5
12/4    4
13/4    6
14/4    7 
```

我想建立下表：

```
Units   InDate OutDate InPrice   OutPrice

1000     11/4    12/4     5       4

2000     13/4    14/4     6       7 
```

我想我应该使用类似的东西：

```
Select *
FROM Inventory
LEFT OUTER JOIN Prices ON Inventory.InDate = Prices.Date
LEFT OUTER JOIN Prices ON Inventory.OutDate = Prices.Date 
```

但是第二个 OUTER JOIN 似乎把事情搞砸了。

我怎样才能达到这个结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T10:58:36.410

```
Select
  Units,   
  InDate,
  OutDate,
  P1.Price as InPrice,
  P2.Price as OutPrice
FROM Inventory
LEFT OUTER JOIN Prices as P1 ON Inventory.InDate = P1.Date
LEFT OUTER JOIN Prices as P2 ON Inventory.OutDate = P2.Date 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T10:59:48.270

尝试这个。

```
SELECT Inventory.Units, Inventory.InDate, Inventory.OutDate, InPrices.Price AS InPrice, OutPrices.Price AS OutPrice
FROM Inventory
LEFT OUTER JOIN Prices AS InPrices ON Inventory.InDate = InPrices.Date
LEFT OUTER JOIN Prices AS OutPrices ON Inventory.OutDate = OutPrices.Date 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T11:02:21.070

您当前的查询非常接近正确。如果您在桌子上放置不同的别名，`prices`那么它会起作用。由于您在同一张表上加入`prices`两次，因此您需要使用不同的别名来区分它们：

```
select i.units,
  i.indate,
  i.outdate,
  inPrice.price,  
  outPrice.price
from inventory i
left join prices inPrice  -- first join with alias
  on i.indate = inPrice.date
left join prices outPrice  -- second join with alias
  on i.outdate = outPrice.date 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/16a64/2)

# paypal - 成功结帐时的贝宝重定向

> ID：13471639
> 
> 赞同：0
> 
> 时间：2012-11-20T10:51:48.080
> 
> 标签：paypal, paypal-sandbox, paypal-ipn, paypal-subscriptions

我正在尝试让我的 Paypal 订阅在成功结帐后重定向到自定义页面。

在提交到 Paypal 之前，我重载了提交处理程序，运行我自己的函数（以存储详细信息）并返回一个唯一的 ID。我想将该 ID 附加到我的返回 URL。（可以说是 GET 或 POST var）

我已在我的 Paypal 沙盒卖家偏好设置中“打开”自动重定向，但它似乎只重定向到我必须放入的 URL。

使用`<input type="hidden" name="return" value="someurl" />`似乎没有工作。

我想要这种方式，以便在使用“非付费”标志输入时捕获用户信息，然后通过 IPN 我可以使用“付费”标志更新该记录，并且我想使用唯一 ID 来绑定可以这么说。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:56:53.097

您的隐藏字段名称需要符合 PayPal 要求的可接受的变量名称。ReturnUrl（不区分大小写）不起作用吗？

```
<input type=hidden name="RETURNURL" value="https://www.YourReturnURL.com"> 
```

**注意：**我只调查并实施了快速结帐，因此这可能不适用于您的实施：[https ://cms.paypal.com/en/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ECGettingStarted](https://cms.paypal.com/en/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ECGettingStarted)

# r - 将 R 字符转换为日期

> ID：13471645
> 
> 赞同：0
> 
> 时间：2012-11-20T10:52:18.107
> 
> 标签：r, date

> **可能重复：**
> [将年份和月份转换为 R 中的日期？](https://stackoverflow.com/questions/6242955/converting-year-and-month-to-a-date-in-r)

我有以下字符串：

```
date <- "Feb 1964" 
```

我正在尝试使用以下代码将其转换为日期：

```
new.date <- as.Date(date, format="%b %Y") 
```

**NA**在这里返回。有人可以解释一下我如何做到这一点，并解释我做错了什么..

提前谢谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:03:28.857

我认为这可能会做你想要的。

```
date <- "Feb 1964"
date <- "1 Feb 1964"
new.date <- as.Date(date, format="%d %b %Y")
new.date 
```

# internet-explorer-8 - css3pie 不适用于所有元素

> ID：13471646
> 
> 赞同：0
> 
> 时间：2012-11-20T10:52:17.663
> 
> 标签：internet-explorer-8, css3pie

我遇到了 pie.htc 和 IE8 的奇怪问题。我在页面上有许多圆角元素，但饼图仅适用于一个元素。我的 CSS 是正确的 - 我的意思是选择器已正确分配给饼图行为。还有什么可能是错的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:08:44.863

我有一些使用 css3 pie 的经验，但它们并不是很好。以下是我使用的修复：

*   您正在应用行为库的元素也需要是**position: relative**作为开始，所以首先检查一下。它可能会修复它。

*   如果您希望它在 IE6 和 7 中工作，您需要添加**zoom: 1**。我知道您说您使用的是 IE8，但我的客户过去曾说过，它一直处于兼容模式，所以最好添加该设置。

*   CSS 3 Pie 不支持浏览器缩放背景图像，因此请检查您是否以 100% 视图查看网站，而不是其他视图。

希望有帮助。如果您可以发布一个 jsfiddle，那么我可以尝试进一步提供帮助。如果没有检查 css3pie 已知问题[http://css3pie.com/documentation/known-issues/](http://css3pie.com/documentation/known-issues/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:29:38.023

找到了解决方案。问题是这些元素使用了带有过滤器的背景。css3pie 也为这些元素设置背景。删除此过滤器后，一切正常。

# c# - 绑定到 ActualSize

> ID：13471648
> 
> 赞同：1
> 
> 时间：2012-11-20T10:52:19.827
> 
> 标签：c#, silverlight, windows-phone-7, xaml, binding

对于给定的宽度，我想实现[![这个](../Images/d78903edf2fb16ea8c7c6f261fd1c21f.png)](https://i.stack.imgur.com/hzUqD.png)

我正在构建这个 xaml 树：

```
<ContentPresenter x:Name="CardContentPresenter"
                  Height="{Binding ActualWidth,
                                   ElementName=CardContentPresenter,
                                   Converter={StaticResource WidthToHeightConverter},
                                   Mode=OneWay}"
                  VerticalAlignment="Center">
    <Border x:Name="CardBorder">
        <Border x:Name="ContentBorder"
                Width="{Binding ActualWidth,
                                ElementName=CardBorder,
                                Converter={StaticResource WidthToContentWidthConverter},
                                Mode=OneWay}"
                Height="{Binding ActualHeight,
                                 ElementName=CardBorder,
                                 Converter={StaticResource WidthToContentWidthConverter},
                                 Mode=OneWay}"
                HorizontalAlignment="Center"
                VerticalAlignment="Center">
            <Grid>
                <ContentPresenter x:Name="CardContentContentPresenter"
                                  Height="{Binding ActualWidth,
                                                   ElementName=CardContentContentPresenter,
                                                   Converter={StaticResource HeightToWidthConverter},
                                                   Mode=OneWay}"
                                  VerticalAlignment="Center">
                    <Grid />
                </ContentPresenter>
            </Grid>
        </Border>
    </Border>
</ContentPresenter> 
```

但正如我通过转换器内部的断点看到的那样，高度/宽度的计算顺序很混乱（例如，内部内部高度在内部宽度之前计算，因此该值不正确）。

如何控制属性计算的顺序？或者我的整个方法都是错误的，还有另一种方法来处理它？

# asp.net - 如何配置 IIS 以允许在同一域内的 http 页面中将 https 页面设置为 iframe？

> ID：13471656
> 
> 赞同：1
> 
> 时间：2012-11-20T10:52:37.047
> 
> 标签：asp.net, http, iis, iframe, http-headers

我有一个托管在 IIS 6.0 中的站点（我还使用 IIS 7.0 对其进行了测试，结果相同），并且我已经配置了我的页面，以便它只接受使用以下内容托管在同一源域中的 iframe：[http://support。 microsoft.com/kb/2694329](http://support.microsoft.com/kb/2694329)

我在 IIS 的 HTTP 标头选项卡中添加了“X-Frame-Options”字段名称和“SAMEORIGIN”值。

这意味着“页面只能显示在与页面本身同源的框架中”。

现在我的页面不能托管在任何其他网站/域中，这很好并且可以预期。

问题是我有一个 https 页面，其父页面是一个 http 页面，两者都在同一个域中。我希望这可以工作，但我收到以下错误：

```
This content cannot be displayed in a frame 

   To help protect the security of information you enter into this website, the publisher of this content does not allow it to be displayed in a frame.

   What you can try: 
    Open this content in a new window 
```

如何配置我的网站或添加什么 HTTP 标头以允许 https 页面在 http 页面中进行 iframe？

我还尝试使用“ALLOW-FROM”标头名称并专门添加我的域名：

```
"http://mydomain.com" and "https://mydomain.com" 
```

但它说

```
"The custom header already exists in the list". 
```

那么“起源”是指域和协议吗？如果是这样，这似乎是一个设计问题？或者有什么解决方法吗？

谢谢，

# windows-phone-8 - Windows Phone 8：如何动态设置图像

> ID：13471657
> 
> 赞同：1
> 
> 时间：2012-11-20T10:52:41.117
> 
> 标签：windows-phone-8

**视窗电话 8：**

我有一个 HTML 设计要绑定到 webbrowser 控件中。

在该 HTML 中，我需要从我的 Windows 8 手机应用程序本身（例如：MyApp/Images/Done.png）动态设置 image()。

如何在我的 HTML 中动态设置此图像？

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:59:50.770

在 Zen 方面，WP8 试图将 Uris 尽可能接近[Win8 Uris](http://msdn.microsoft.com/en-us/library/windows/apps/hh781229.aspx)对齐。所以每当你问自己“WP8 Uris 是如何工作的？” 一个好的起点是 Win8 和 WP7 的表现。例如，您会在 WP8 周围看到很多“ *ms-appx:///* ”和“ *ms-appdata:/// ”。*

具体来说，为了从 WebBrowser 访问应用程序的图像资源，只需指定本地文件路径。例如，启动一个新的 WP8 项目并在 MainPage.xaml 添加：

```
<phone:WebBrowser Source="myPage.html" /> 
```

并创建 myPage.html 并添加：

```
<html>
    <body>
        <img src="Assets/AlignmentGrid.png"/>
    </body>
</html> 
```

这会将正确的图像呈现为 WebBrowser 的一部分。见附件![图片](../Images/49a8d11ad3241465086e3f58f9caab82.png)。

# spring - Spring MVC 控制器使用 @RequestParam 和 Apache tile 2

> ID：13471659
> 
> 赞同：0
> 
> 时间：2012-11-20T10:52:45.990
> 
> 标签：spring, spring-mvc, apache-tiles

我的 Spring MVC + Apache tile 2 项目有以下配置。

**瓷砖配置**

```
<definition name="test1" extends="mymain">
    <put-attribute name="main">
        <定义模板="/WEB-INF/views/tiles/template/generictemplate.jsp">
            <put-attribute name="headerstyle" value="./resources/css/header.css" type="string" />
            <put-attribute name="genericcontent" value="/WEB-INF/views/tiles/test.jsp" />                 
        </定义>
    </put-属性>
</定义>
<definition name="test2" extends="mymain">
    <put-attribute name="main">
        <定义模板="/WEB-INF/views/tiles/template/generictemplate.jsp">
            <put-attribute name="headerstyle" value="./resources/css/header.css" type="string" />
            <put-attribute name="genericcontent" value="/WEB-INF/views/tiles/test.jsp" />                 
        </定义>
    </put-属性>
</定义>

```

**控制器**

```
@RequestMapping(value="/test1", method=RequestMethod.GET)
    公共字符串 test1(@RequestParam(value="id", required=true) 字符串 id){
        返回“测试1”；
    }
@RequestMapping(value="/test2", method=RequestMethod.GET)
    公共字符串 test2(){
        返回“测试2”；
}

```

**视图 generictemplate.jsp**

```
<%@ 包含文件="include.jsp" %>
<tiles:importAttribute name="headerstyle" />
<link href="${headerstyle}" rel="stylesheet" type="text/css" />

<div role="main" class="main clearfix">
        <section class="通用">
            <div class="post">
                <tiles:insertAttribute name="genericcontent"/>
            </div>
        </节>
    <!-- 结束主要 -->
</div>

```

**我的问题是** 当我调用 test2（不带参数）时，可以读取 header.css。但是当调用 test1 时，我得到header.css 的**404 Not Found**。我注意到视图正在尝试使用路径访问 css

```
http://localhost:8080/myproject/test1/resources/css/header.css
```

代替

```
http://localhost:8080/myproject/resources/css/header.css
```

当 test1 调用时。那么为什么@RequestParam 会产生这种影响呢？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:17:37.863

这是因为 css 是相对于当前 URL 加载的。对于 test1，您有一个在 test1 之后添加斜杠的参数。其中 test2 没有参数，因此它相对于父目录。

您可以尝试使用 css 的绝对路径。

# css - 为什么我的 GWT 对话框是透明的

> ID：13471661
> 
> 赞同：1
> 
> 时间：2012-11-20T10:52:51.510
> 
> 标签：css, gwt, user-interface

我想在我的 GWT 应用程序中使用一个对话框，但它是透明的！我需要做什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:37:00.000

您可以将 CSS 中的样式设置为不透明，类喊为 gwt-DialogBox。

```
.gwt-DialogBox {
  background-color: #FFFFFF //White
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T19:45:34.723

您是否在模块中包含了默认的 gwt 主题？默认 gwt 主题包括某些小部件的一些默认 css-ing。

```
 <inherits name="com.google.gwt.user.theme.standard.Standard"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-25T12:35:40.940

它真的是透明的还是那些看起来可以通过它看到的字段实际上是在前景中？即，您可以单击其他字段吗？

那么它可能与对话框的z-index有关。作为一个快速而肮脏的修复，尝试在 css 文件中设置 z-index 或使用如下代码：mydialog.getElement().getStyle().setZIndex(1000);

# python-3.x - UnicodeDecodeError: 'utf-8' 编解码器无法在位置解码字节 0xc7

> ID：13471665
> 
> 赞同：4
> 
> 时间：2012-11-20T10:53:27.390
> 
> 标签：python-3.x

当我使用打开和读取语法在 Python 3 中打开和读取文件并更改文件编码时，发生了这个错误。我想将任何编码的文本转换为 UTF-8 并保存。

“sin3”的编码未知，

```
fh= open(sin3, mode="r", encoding='utf8')
ss= fh.read() 
```

> 文件“/usr/lib/python3.2/codecs.py”，第 300 行，在 decode
> (result, used) = self._buffer_decode(data, self.errors, final)
> UnicodeDecodeError: 'utf-8' codec can't解码位置 34 中的字节 0xc7：无效的继续字节

我使用编解码器并收到此错误：

```
fh= codecs.open(sin3, mode="r", encoding='utf8')
ss= fh.read() 
```

> 文件“/usr/lib/python3.2/codecs.py”，第 679 行，在读取
> 返回 self.reader.read(size)
> 文件“/usr/lib/python3.2/codecs.py”，第 482 行，在读取
> newchars，decodedbytes = self.decode(data, self.errors)
> UnicodeDecodeError: 'utf-8' codec can't decode byte 0xc7 in position 34: invalid continuation byte

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-02-17T19:30:07.760

尝试这个：

> fh = codecs.open(sin3, "r",encoding='utf-8', errors='ignore')

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-04T14:49:14.550

**尝试这个：**

*   在 Sublime 文本编辑器中打开 csv 文件。
*   以 utf-8 格式保存文件。
*   在 sublime 中，点击 File -> Save with encoding -> UTF-8

然后，您可以像往常一样读取文件：

> 我会推荐使用熊猫。

在 Pandas 中，您可以使用以下命令读取它：

```
import pandas as pd
data = pd.read_csv('file_name.csv', encoding='utf-8') 
```

# c# - 如何在 WP7-8 中实现自动加载列表框

> ID：13471667
> 
> 赞同：0
> 
> 时间：2012-11-20T10:53:29.497
> 
> 标签：c#, windows-phone-7, xaml, data-binding

请告诉我如何实现自动加载列表框。向下滚动时，应将元素添加到前一个元素。不幸的是我没有找到这样的列表的例子，我看到在网络中建议使用 ObservalableCollection，但我不明白如何向集合中添加元素。这是我的大量测试应用程序。

我需要连接到 web 服务并来自 xml 解析。这里是一个使用 Web 服务的示例，如果像这样的请求[http://beta.sztls.ru/mapp/eps/?count=10服务会在这样的请求](http://beta.sztls.ru/mapp/eps/?count=10)[http://beta](http://beta.sztls.ru/mapp/eps/?count=10&skip=10)上使用最新的十个新闻构造 xml 。 [sztls.ru/mapp/eps/?count=10&skip=10](http://beta.sztls.ru/mapp/eps/?count=10&skip=10)，它返回带有以下十个新闻的xml 我有一个类

```
public class Item
    {
        public string Description { get; set; }
        public string Title { get; set; }
        public string Image { get; set; }
    } 
```

在代码隐藏中

```
public partial class MainPage : PhoneApplicationPage
    {
        private ObservableCollection<Item> _collection;
        public ObservableCollection<Item> Collection
        {
            get
            {
                if (_collection == null)
                {
                    _collection = new ObservableCollection<Item>();
                }
                return _collection;
            }
        }

        private int endIndex = 0;

        // Конструктор
        public MainPage()
        {
            InitializeComponent();
            this._collection = new ObservableCollection<Item>();

            this.listBox1.ItemsSource = Collection;
            this.listBox1.Loaded += new RoutedEventHandler(listBox1_Loaded);

        }

        void listBox1_Loaded(object sender, RoutedEventArgs e)
        {
            try
            {
                LoadItems(10);
            }
            catch (Exception exception)
            {
                MessageBox.Show(exception.StackTrace);

            }
        }

        private void LoadItems(int count)
        {
            WebClient webClient = new WebClient();
            webClient.DownloadStringCompleted += new DownloadStringCompletedEventHandler(webClient_DownloadStringCompleted);
            webClient.DownloadStringAsync(
                new Uri(String.Format("http://beta.sztls.ru/mapp/eps/" + "?count={0}" + "&skip={1}" + "&ticks={2}",
                                      count, this.endIndex, DateTime.Now.Ticks)));
                 this.endIndex+=count
        }

        void webClient_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
        {
            if (e.Error == null)
            {
                ParseResult(e.Result);
            }
        }

        private void ParseResult(string result)
        {
            XElement element = XElement.Parse(result);

            var res = from part in element.Descendants("news")
                      select new Item
                                 {
                                     Image = part.Element("image_url").Value,
                                     Title = part.Element("title").Value,
                                     Description = part.Element("description").Value
                                 };

           //Here,as far as I understand, I need like this Collection.Add(res)
        }
    } 
```

在 Xaml 中

```
<toolkit:LongListSelector Grid.Row="1" IsFlatList="True" x:Name="listBox1">
                <toolkit:LongListSelector.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                        <Image Source="{Binding Image}" Width="100" Height="100"/>
                            <StackPanel>
                                <TextBlock Text="{Binding Title}" FontSize="22" Foreground="Red"/>
                                <TextBlock Text="{Binding Decription}" FontSize="26" Foreground="Blue"/>
                            </StackPanel>
                        </StackPanel>
                    </DataTemplate>

                </toolkit:LongListSelector.ItemTemplate>
                <toolkit:LongListSelector.ListFooterTemplate>
                    <DataTemplate>
                        <TextBlock x:Name="footer"/>
                    </DataTemplate>
                </toolkit:LongListSelector.ListFooterTemplate>
            </toolkit:LongListSelector> 
```

以及如何跟踪我应该发送加载新项目的请求的时间？

提前感谢您的帮助，并为我的英语感到抱歉。我用过[http://www.bing.com/translator](http://www.bing.com/translator) =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:43:44.833

好的。如果我正确理解了所有内容，您希望从 xml 文件生成项目集合。我想，对你来说最好的选择是创建一个实体类，其中包含“图像”、“标题”、“描述”等字段（你已经完成了），并在你的 ParseResult() 方法中创建这个实体的集合. 它看起来像：

```
List<Entity> list = ParseResult(xdoc); 
```

在 ParseResult 中，您可以使用某些表达式从 xml 文件中获取数据，例如：

```
return (from node in xdoc.Descendants("something") select new Entity(node.Attribute("Title").Value, node.Attribute("Image").Value,... ).ToList(); 
```

现在您将拥有一组项目。接下来你想对他们做什么？我想，创建一个用户界面，使用它。我想，会有一些控件是使用这个集合生成的。因此，如果您想更新此页面并添加一些新控件，您应该检查哪些已添加到页面中。在这种情况下，我宁愿在用户控件中创建一个字段，它会检查这一点。它应该是唯一的，所以让我们把它设为“标题”。（在这些文档中，“标题”似乎是唯一的）所以，当你想在你的页面上添加一个控件时，你应该检查是否没有一个控件具有相同的“标题”作为一个，你要添加。

希望，我理解的都是正确的。

* * *

Alexandr，您只需要为您的项目实体创建一个构造函数，例如

```
public Item(string desc, string title, string image)
        {
            this.Description = desc;
            this.Title = title;
            this.Image = image;
        } 
```

然后你可以更容易地填写列表：

```
List<Item> list = (from node in xdoc.Descendants("news") select new Item(node.Element("description").Value, node.Element("title").Value, node.Element("image_url").Value)).ToList(); 
```

那应该行得通。

# php - 在最后一根针之前得到弦片

> ID：13471672
> 
> 赞同：11
> 
> 时间：2012-11-20T10:53:57.187
> 
> 标签：php, string, function

给定

```
 $str = "asd/fgh/jkl/123 
```

如果我们想在最后一个斜杠之后获取字符串片段，我们可以使用函数`strrchr()`对吗？在 php 中不起作用，要在最后一个 slah 之前获取字符串片段，即`asd/fgh/jkl`？

我知道这可以通过正则表达式或其他方式进行，我在问内部功能？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-20T11:08:12.910

您可以使用

```
$str = "asd/fgh/jkl/123";
echo substr($str, 0,strrpos($str, '/')); 
```

输出

```
asd/fgh/jkl 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T10:58:23.290

```
$str = "asd/fgh/jkl/123";

$lastPiece = end(explode("/", $str));

echo $lastPiece; 
```

输出：123；

[explode()](http://php.net/manual/en/function.explode.php)使用“/”作为分隔符将字符串转换为数组（您可以选择分隔符）

[end()](http://php.net/manual/en/function.end.php)返回数组的最后一项

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T10:54:46.507

您可以通过以下方式做到这一点：

`explode`— 逐个字符串拆分（[文档](http://php.net/manual/en/function.explode.php)）

```
$pieces = explode("/", $str ); 
```

例子

```
$str = "asd/fgh/jkl/123";
$pieces = explode("/", $str );
print_r($pieces);

$count= count($pieces);
echo $pieces[$count-1]; //or
echo  end($pieces); 
```

[**键盘**](http://codepad.org/sFTvYkcp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T11:12:34.153

使用这个强大的自定义功能

```
 /* $position = false and $sub = false show result of before first occurance of $needle */
 /* $position = true and $sub false show result of before last occurance of $needle     */
 /* $position = false and $sub = true show result of after first occurance of $needle   */  
 /* $position = true and $sub true show result of after last occurance of         $needle       */

function CustomStrStr($str,$needle,$position = false,$sub = false)
{
$Isneedle = strpos($str,$needle);
if ($Isneedle === false)
return false;

    $needlePos =0;
    $return;
    if ( $position === false )
        $needlePos = strpos($str,$needle);
    else
        $needlePos = strrpos($str,$needle);

    if ($sub === false)
        $return = substr($str,0,$needlePos);
    else
        $return = substr($str,$needlePos+strlen($needle));

return $return;         
} 
```

# html - IE浏览器无法点击链接

> ID：13471674
> 
> 赞同：0
> 
> 时间：2012-11-20T10:54:09.703
> 
> 标签：html, css

**更新：**针对此问题的 JS Fiddle：http: [//jsfiddle.net/Ey4aH/2/](http://jsfiddle.net/Ey4aH/2/)，在 IE 中运行它并查看问题。

我正在使用下面的代码，它是一组菜单的一部分。

```
<div class="profile-menu">
              <ul>
                <li><a class="current" href="javascript:void('0');">
                  <table width="153" border="0" cellspacing="0" cellpadding="0">
                  <tr>
                      <td width="22"><img src="images/about-icon.png" width="16" height="16" /></td>
                      <td width="135">About</td>
                    </tr>
                </table>
                  </a> </li>
                <li><a href="/friend/viewfriends/<%=temp.getString("user_id")%>">
                  <div><table width="153" border="0" cellspacing="0" cellpadding="0">
                  <tr>
                      <td width="22"><img src="images/friends-icon.png" width="16" height="16" /></td>
                      <td width="135">Friends</td>
                    </tr>
                </table></div>
                </a>
                </li></ul></div> 
```

这适用于其他浏览器，但在 IE 中，当我尝试单击好友文本链接时，它不起作用。但是当我点击图标时，它工作正常。谁能帮我找出问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:01:09.383

最好不要在`<a>`tag 中使用 table。
但在每个元素`<a>`内使用标签。`<td>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:04:25.977

当表格仅用于显示表格数据时，看起来好像您正在使用表格来显示内容。

“A”标签不能包含表格或其他块级元素，并且可以在所有浏览器中正常运行。

最好的解决方案是在不使用表格的情况下重新创建您的设计。

或者，您可以通过使用 javascript 在桌子上启用点击来实现您想要做的事情。

HTML5 允许将块级元素包装在“a”标签中：

[http://davidwalsh.name/html5-elements-links](http://davidwalsh.name/html5-elements-links)

# excel - 轴标题设置

> ID：13471679
> 
> 赞同：1
> 
> 时间：2012-11-20T10:54:29.440
> 
> 标签：excel, applescript, excel-2008

如何使用 AppleScript 在 Excel 2008 中将垂直轴标题应用为旋转标题、水平标题、垂直标题。

```
tell application "Microsoft Excel"
  tell worksheet 1 of active workbook 
     set ochart to chart of chart object "chartname"
       tell ochart
         set cattitle to gat axis of ochart axis type category axis which axis primary axis
               tell cattitle 
                   set has title to 1
                    ----- how to apply a title position (Horizontal,Rotated,Vertical title)
               end tell
          end tell
   end tell 
```

我在苹果 excel 字典中找不到有用的苹果脚本命令。 ![在此处输入图像描述](../Images/18d51ea38c61feac18a9e0c1be4eb021.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:54:47.683

尝试：

```
tell application "Microsoft Excel"
    tell worksheet "Sheet1" of active workbook
        set ochart1 to chart of chart object 1
        tell ochart1
            set valueA to get axis axis type value axis which axis primary axis
            tell valueA
                set it's has title to true
                set axis title text of it's axis title to "Rotated"
            end tell
        end tell
    end tell
end tell 
```

# udp - UDP 多播客户端看不到 tcpreplay 生成的 UDP 多播流量

> ID：13471680
> 
> 赞同：10
> 
> 时间：2012-11-20T10:54:29.570
> 
> 标签：udp, multicast, tcpdump

我有两个程序：

*   服务器...它在选定的多播上生成 UDP 流量
*   侦听器...它在选定的多播上打印 UDP 流量（它订阅多播并打印它接收到的任何内容）。

当我在一台机器上运行服务器并在某些（其他）机器上运行侦听器时，侦听器会看到 UDP 流量并正确打印它。因此，这些程序应该处于良好状态。

但是，当我尝试在任何机器上使用 tcpdump 捕获流量时：

```
sudo tcpdump -i eth0 'dst 233.65.120.153' -w 0.pcap 
```

当我后来尝试在任何机器上使用 tcpreplay 重播它时：

```
sudo tcpreplay -i eth0 0.pcap 
```

没有一个侦听器看到那些捕获的数据包：

```
09:38:40.975604 IP (tos 0x0, ttl 1, id 0, offset 0, flags [DF], proto UDP (17), length 32)
    172.27.6.176.53507 > 233.65.120.153.64968: [udp sum ok] UDP, length 4
    0x0000:  4500 0020 0000 4000 0111 6527 ac1b 06b0  E.....@...e'....
    0x0010:  e941 7899 d103 fdc8 000c 579c 6162 6364  .Ax.......W.abcd
    0x0020:  0000 0000 0000 0000 0000 0000 0000       ..............
09:38:41.975709 IP (tos 0x0, ttl 1, id 0, offset 0, flags [DF], proto UDP (17), length 32)
    172.27.6.176.53507 > 233.65.120.153.64968: [udp sum ok] UDP, length 4
    0x0000:  4500 0020 0000 4000 0111 6527 ac1b 06b0  E.....@...e'....
    0x0010:  e941 7899 d103 fdc8 000c 579c 6162 6364  .Ax.......W.abcd
    0x0020:  0000 0000 0000 0000 0000 0000 0000       ..............
09:38:42.975810 IP (tos 0x0, ttl 1, id 0, offset 0, flags [DF], proto UDP (17), length 32)
    172.27.6.176.53507 > 233.65.120.153.64968: [udp sum ok] UDP, length 4
    0x0000:  4500 0020 0000 4000 0111 6527 ac1b 06b0  E.....@...e'....
    0x0010:  e941 7899 d103 fdc8 000c 579c 6162 6364  .Ax.......W.abcd
    0x0020:  0000 0000 0000 0000 0000 0000 0000       .............. 
```

请注意，即使没有一个侦听器看到 UDP 多播流量，我仍然可以在任何机器上使用 tcpdump 看到它：

```
sudo tcpdump -i eth0 'dst 233.65.120.153' -X 
```

**我的问题：**如果我想 tcpreplay 我正在创建的 UDP 多播流量以便我可以在应用程序级别（例如我的侦听器程序）看到它，而不仅仅是 tcpdump，我应该怎么做（不同的）？

$猫发件人.c

```
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <time.h>
#include <string.h>
#include <stdio.h>
#include <stdlib.h>

#define PORT 64968
#define GROUP "233.65.120.153"

main(int argc, char *argv[])
{
     struct sockaddr_in addr;
     int fd, cnt;
     struct ip_mreq mreq;
     char *message="abcd";

     /* Create what looks like an ordinary UDP socket:
        AF_INET    ... IPv4
        SOCK_DGRAM ... UDP
        0          ... required constant
      */
     if ((fd=socket(AF_INET, SOCK_DGRAM, 0)) < 0) {
      perror("socket");
      exit(1);
     }

    /* Set up destination address:
        AF_INET ... IPv4
        GROUP   ... the IP-address of the multicast group
                    to which we want to multicast
        PORT    ... the UDP port that on which we want to multicast
      */
     memset(&addr, 0, sizeof(addr));
     addr.sin_family=AF_INET;
     addr.sin_addr.s_addr=inet_addr(GROUP);
     addr.sin_port=htons(PORT);

     /* now just sendto() our destination! */
     while (1) {
      if (sendto(fd, message, strlen(message), 0, (struct sockaddr *) &addr, sizeof(addr)) < 0) {
           perror("sendto");
           exit(1);
      }
      sleep(1);
     }
} 
```

$猫监听器.c

```
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <time.h>
#include <string.h>
#include <stdio.h>
#include <stdlib.h>

#define PORT 64968
#define GROUP "233.65.120.153"
#define MSGBUFSIZE 1000000

char msgbuf[MSGBUFSIZE];

main(int argc, char *argv[])
{
     struct sockaddr_in addr;
     int fd, nbytes,addrlen;
     struct ip_mreq mreq;

     u_int yes=1;

    /* Create what looks like an ordinary UDP socket:
       AF_INET ... IPv4
       SOCK_DGRAM ... UDP
       0 ... required constant
      */
    if ((fd=socket(AF_INET, SOCK_DGRAM, 0)) < 0) {
         perror("socket");
         exit(1);
    }

    /* Allow multiple sockets to use the same PORT number:
       SOL_SOCKET ... manipulate properties of the socket API itself
       SO_REUSEADDR ... Allow reuse of local addresses for bind
     */
    if (setsockopt(fd, SOL_SOCKET, SO_REUSEADDR, &yes, sizeof(yes)) < 0) {
       perror("Reusing ADDR failed");
       exit(1);
       }

     /* set up destination address */
     memset(&addr,0,sizeof(addr));
     addr.sin_family=AF_INET;
     addr.sin_addr.s_addr=htonl(INADDR_ANY); /* N.B.: differs from sender */
     addr.sin_port=htons(PORT);

     /* bind to receive address */
     if (bind(fd,(struct sockaddr *) &addr,sizeof(addr)) < 0) {
      perror("bind");
      exit(1);
     }

     /* use setsockopt() to request that the kernel join a multicast group */
     mreq.imr_multiaddr.s_addr=inet_addr(GROUP);
     mreq.imr_interface.s_addr=htonl(INADDR_ANY);
     if (setsockopt(fd,IPPROTO_IP,IP_ADD_MEMBERSHIP,&mreq,sizeof(mreq)) < 0) {
      perror("setsockopt");
      exit(1);
     }

     /* now just enter a read-print loop */
     while (1) {
      addrlen=sizeof(addr);
      memset(msgbuf, 0, MSGBUFSIZE);
      if ((nbytes=recvfrom(fd, msgbuf, MSGBUFSIZE,0,
                           (struct sockaddr *) &addr, &addrlen)) < 0) {
           perror("recvfrom");
           exit(1);
      }
      printf("Incoming message size = %d\n", nbytes);
      int i;
      for (i=0; i < nbytes; i++)
              printf("%02x ", ((unsigned char) msgbuf[i]));
      printf("\n");
     }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-26T07:40:52.480

我们遇到了同样的问题。`tcpdump`我们看到了数据；但是，多播客户端/侦听器没有拾取数据。然后我们意识到**反向路径过滤器**（rp_filter）正在拒绝数据包。

禁用 rp-filter 后，客户端/侦听器应用程序开始接收数据包。使用以下命令禁用 rp_filter：

`echo 0 > /proc/sys/net/ipv4/conf/eth0/rp_filter`

在上面，如果不是 eth0，则将“eth0”替换为接收多播的接口

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-11T22:46:18.397

在我的情况下，我需要通过设置正确的目标 MAC 地址来调整 pcap 文件。还应重新计算校验和。是的，“tcpreplay”需要 2 个主机。没有这些，我打了很长时间，但只有“tcpdump”显示了重播的流，而不是我的多播监听应用程序:(

这是我的文章的链接：[Dump/Replay Multicast feed 的分步说明](https://alexapps.net/#/post/step-step-instructions-dumpreplay-multic)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T07:08:54.357

据我所知，你不能在同一个盒子上这样做，tcpreplay 绕过主机的路由表并将流量发送*到*接口。

你必须在不同的盒子上开始你的听众。并确保启用了多播。因为默认情况下，交换机会丢弃多播流量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-22T01:00:26.837

这只是一个理论，但可能是由于校验和错误，数据包被接收方丢弃。

如果您运行 tcpdump 的机器启用了 IP 或 UDP 校验和卸载，则可能会发生这种情况。这意味着您在本地捕获的包还没有计算出它们的校验和，而硬件在发送它们之前会这样做。然后，当您 tcpreplay 这些数据包时，不会计算校验和，因为 tcpreplay 的工作级别低于您用于生成数据包的套接字 API。

为了验证校验和的正确性（转储文件的校验和以及后续 tcpreplay 吐出的数据包的校验和），`tcpdump -v ...`将警告您校验和错误。wireshark 也会以不同的方式为错误的校验和帧着色（除非在 wireshark 设置中关闭）。

您是否尝试仅在发送主机上或在接收主机上 tcpdump 数据包？如果这确实是您的问题，后者将删除校验和错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-24T05:07:57.407

在 Windows 中（我写它是因为在主题名称中您没有指定不是 Windows）在不同的程序中存在这样的问题。但是这个程序运行良好[Colaso​​ft Packet Player](https://www.colasoft.com/packet_player/)。第一次您应该以管理权限启动它。

或者（对于所有可能的系统）您可以尝试检查此[列表](https://wiki.wireshark.org/Tools#Traffic_generators)。

# java - 如何将新对象分配给现有对象

> ID：13471681
> 
> 赞同：1
> 
> 时间：2012-11-20T10:54:29.967
> 
> 标签：java, assign

我从文件中读取对象时遇到问题..

主要是，我让eshop end 调用了一个方法loadshop。

```
MyShop eshop = new MyShop();
eshop.loadShop("eshop.txt"); 
```

而且我正在从文件中获取商店对象。

```
@Override
public void loadShop(String filename) {

    try{
         ObjectInput out = new ObjectInputStream(new FileInputStream(filename));
         MyShop shop = (MyShop)out.readObject();
         out.close();

    } catch (Exception e) {
           e.printStackTrace();
    }
} 
```

但我就是不知道如何将“shop”分配给“eshop”

谢谢你的任何回答..:-)（对不起我的英语）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:57:04.337

只需编辑所有`eshop`的字段，以匹配`shop`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T10:58:58.693

只需重新设计，您无需编写

```
MyShop eshop = new MyShop(); 
```

相反，写

```
MyShop eshop = MyShop.loadShop("eshop.txt"); 
```

并使`loadShop`方法静态。并让它返回`MyShop`实例，如果它还没有这样做的话。

如果这不是一个选项，那么通过 hack 获取该实例仍然比编写手动复制代码更好：

```
public class MyShop {
  private MyShop readShop;

  public MyShop getReadShop() { return readShop; }

  public void loadShop(String fName) {
    try {
       ObjectInput out = new ObjectInputStream(new FileInputStream(filename));
       this.readShop = (MyShop)out.readObject();
       out.close();

    } catch (Exception e) {
      throw new RuntimeException(e);
    }
} 
```

你会像这样使用它

```
MyShop tempShop = new MyShop();
tempShop.loadShop();
MyShop eshop = tempShop.getReadShop(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T10:59:18.270

在您的 MyShop 类中创建您的`loadShop`静态方法并返回您的对象。

```
public static MyShop loadShop(String something){
// do some thing

return (MyShop)out.readObject();     
} 
```

在你的代码中

```
MyShop eshop = MyShop.loadShop("eshop.txt"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T11:00:04.180

让你的`loadShop`方法成为一种`static`方法。使方法返回`MyShop`对象。`MyShop`在课堂上调用它。将返回值分配给`eshop`。例子：

```
public class MyShop {
    public static MyShop loadShop(String filename) {
        // ...
        MyShop shop = (MyShop)out.readObject();

        // ...
        return shop;
    }
} 
```

在哪里调用该方法：

```
MyShop eshop = MyShop.loadShop("eshop.txt"); 
```

# ruby-on-rails - Rails delay_job 启动和停止

> ID：13471684
> 
> 赞同：0
> 
> 时间：2012-11-20T10:54:45.383
> 
> 标签：ruby-on-rails, ruby, delayed-job

我在我的项目中使用了delayed_job，直到现在在它工作的控制台中调用rake jobs:work。

但是现在我试图在具体事件之后停止处理作业，并在其他事件之后继续处理。

为了模拟这种行为，我创建了一个脚本 config/initializers/delayed_jobs.rb

```
puts "START DELAYED JOB PRE"
`script/delayed_job start`
puts "START DELAYED JOB POST" 
```

并且只调用了第一个 puts，服务器陷入了指令中，并且没有显示 web。

如何调用 stop 和 start delay_jobs 以获得正确的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:29:12.410

您可以将其移动到自己的线程中：

```
puts "START DELAYED JOB PRE"
Thread.new do
    `script/delayed_job start`
end
puts "START DELAYED JOB POST" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:10:05.240

我建议使用负责让您的工作人员保持正常运行的外部守护程序。我有很好的经验，`resque-pool`这是专为`resque`队列设计的。通常，这样的守护进程将允许您通过向主进程发送信号来暂停工作人员。它还使部署重新启动和管理变得非常容易。

# android - Android，有什么方法可以禁用使用键盘在日期选择器内写入？

> ID：13471688
> 
> 赞同：14
> 
> 时间：2012-11-20T10:54:52.997
> 
> 标签：android, datepicker

有什么方法可以禁用使用键盘在日期选择器内写入？因为我只想使用加号和减号来设置日期。提前致谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-20T11:00:35.563

```
myDatePicker.setDescendantFocusability(DatePicker.FOCUS_BLOCK_DESCENDANTS); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T09:16:15.243

```
dp.setDescendantFocusability(DatePicker.FOCUS_BLOCK_DESCENDANTS); 
```

是最好的方法。

你也可以检查这个

[ListView 内的可聚焦 EditText](https://stackoverflow.com/questions/2679948/focusable-edittext-inside-listview)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T08:10:55.403

```
Calendar start = Calendar.getInstance();

            int Year = DatePicker.getYear();
            int Month = DatePicker.getMonth();
            int Day = DatePicker.getDayOfMonth();

            start.set(Year, Month, Day);
    //      DayDatePicker.setDescendantFocusability(DatePicker.FOCUS_BLOCK_DESCENDANTS);

            Date periodDate = start.getTime();
            int daysToAdd = 280;
            Calendar cal = Calendar.getInstance();

cal.add(Calendar.DAY_OF_MONTH,daysToAdd );
            System.err.println("-----" +cal.getTime());
            int AfterCalc = cal.getTime().getYear()+1900;
            System.err.println("-----" + AfterCalc);
            int AfterCalc2 = cal.getTime().getMonth();
            System.err.println("----" + AfterCalc2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-21T05:09:11.750

**在DatePickerDialog**项目中停止手动编辑的最佳选择是使用 set the **descendantFocusability**。您可以在代码或对话框样式文件中添加它。

[这是使用样式的实现](https://stackoverflow.com/a/63516738/4661315)

# intellij-idea - IntelliJ Idea 11 - 没有从 WSDL 生成 Java 代码的菜单

> ID：13471691
> 
> 赞同：6
> 
> 时间：2012-11-20T10:55:00.360
> 
> 标签：intellij-idea, wsdl2java

尽管我启用了 Web 服务支持，但在**Tools -> WebServices中看不到“****从 WSDL 生成 Java 代码**”菜单项。我需要为此安装任何插件或其他东西吗？

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T16:55:50.857

看一下这个。 [http://www.jetbrains.com/idea/webhelp/generate-java-code-from-wsdl-or-wadl-dialog.html](http://www.jetbrains.com/idea/webhelp/generate-java-code-from-wsdl-or-wadl-dialog.html)

有用的教程在这里 [http://wiki.jetbrains.net/intellij/Developing_a_simple_JaxWS_WebService](http://wiki.jetbrains.net/intellij/Developing_a_simple_JaxWS_WebService)

希望这可以帮助。**

# ios - 静态库和 XCode 4.x

> ID：13471693
> 
> 赞同：0
> 
> 时间：2012-11-20T10:55:13.187
> 
> 标签：ios, ipad

我们已经实现了一个静态库并尝试在项目中使用它。该库已编译/构建良好，但是当我们分别导入 .a 和 .h 文件后尝试运行项目时，遇到以下错误：

```
ld: warning: ignoring file Lib.a, file was built for archive which is not the architecture being linked (i386)

Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_MFourInOneStaticLib", referenced from:
      objc-class-ref in MAppDelegate.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我已经检查了架构。此外，我们正在使用模拟器进行测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:00:15.413

看起来你的库不包含正确的架构。

对于 ios，您需要 armv7，对于模拟器，您需要 i386

测试它

```
lipo -info %NAME% 
```

* * *

通常 lipo 仅适用于 arm 或 x86

为两个拱门构建它，然后合并两个文件

```
lipo ./build/Release-iphoneos/%NAME% ./build/Release-iphonesimulator/%NAME% -output ./Dist/lib/%NAME% -create 
```

# eclipse - Lotus Domino Designer 中的源代码管理

> ID：13471700
> 
> 赞同：3
> 
> 时间：2012-11-20T10:55:38.153
> 
> 标签：eclipse, svn, mercurial, lotus-notes, lotus-domino

多年来，我们一直在一个大型项目中使用 Domino，但没有任何真正的源代码控制（除了服务器备份）。因此，当我注意到最新的 Designer 8.5.3 可能与 SVN 集成时，我感到非常高兴。

[正如Stackoverflow 上](https://stackoverflow.com/questions/9128812/installing-source-control-with-lotus-notes-designer-8-5-3-gef-sdk-missing)已经指出的更新站点已移动的[原始说明](http://heidloff.net/home.nsf/dx/09152011024951AMNHEA28.htm)，我无法让 SVN 正常工作。[发布在 OpenNTF 上](http://www.openntf.org/blogs/openntf.nsf/d6plinks/NHEF-8RJASZ)的解决方案只奏效了一半，Domino 仍在 GEF、Mylyn 和其他一些缺失的插件上喋喋不休。找到并安装它们后，我似乎仍然没有源代码控制集成。

我现在拥有的是创建磁盘项目的能力，但我似乎没有任何源代码控制功能。我期待看到提交、更新、恢复等的菜单项——这就是它在 Domino 中的工作方式吗？

我当然可以创建一个存储库来提交磁盘上的项目，但我希望在 Domino 内部进行集成。虽然有多年的编程经验，但我是 Eclipse 的新手。我假设我在安装插件时做错了什么？寻找丢失的插件当然是一个复杂的过程。

有没有人最近尝试过并且成功了？我需要安装哪些文件、设置调整等，以确保其正常工作？我很高兴重新安装我的 Designer 并按照说明进行操作。

另外，我是否了解集成的工作原理？我会在 Designer 中获得命令集成，还是必须单独处理磁盘上的项目？我真的希望这很容易集成到正常的工作流程中，以便我可以将团队转换为使用它（添加太多额外或复杂的步骤不太可能创建转换）。

我发布了我已安装插件的屏幕截图，以防万一。

![在此处输入图像描述](../Images/1e9d18314c9070389c2e238fdccf405d.png)

**水银？**顺便说一句，有没有人在 Designer 中使用 Mercurial 而不是 SVN？我宁愿使用 Hg，因为我将它用于相关的 Dojo 项目，并且团队更容易使用一个系统。但是，我会选择 SVN，因为任何源代码控制都比非源代码控制要好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T14:44:45.790

**更新：** *这个答案现在已经过时了。它很有用，因为它应该为用户指明正确的方向，但它不再是一个真正有效的答案。我不再在 Lotus Notes 上进行开发，因此无法将其更新为当前解决方案。*

我最终设法解决了这个问题，但会发布解决方案，以防其他人遇到同样的麻烦。

[Per Henrik Lausten](https://stackoverflow.com/users/785061/per-henrik-lausten)的[回答](https://stackoverflow.com/questions/13471700/source-control-in-lotus-domino-designer/13477058#13477058)非常有帮助，因为它向我展示了通过菜单遵循的路线。主要问题是我不习惯 Eclipse 的工作方式，所以我没有意识到在创建磁盘项目后必须转到*“团队”*菜单和*“共享项目” 。*当我这样做时，我发现 SVN 和 CVS 都已经可用。

 **我发现 SVN 不喜欢**file://**协议（可能是 Windows 问题？）因为我无法在我们的网络上安排 SVN 服务器，所以我决定走 Mercurial 路线。这对我们来说更好，因为我们的其他项目都存储在 Mercurial 中。

**使用 Lotus Designer 8.5.3 设置 Mercurial：**

1.  在 Domino 首选项（文件 -> 首选项）中，将 Domino Designer 部分中的*Enable Eclipse Plugins设置为***勾选**。

2.  同样在首选项集中：*使用二进制 DXL 进行源代码控制操作*以**取消勾选**（文件 -> 首选项，Domino Designer -> 源代码控制）。如果没有勾选此选项，我将无法为我的 Lotusscript 代理获取文本，并且很难比较更改。

3.  转到文件-> 应用程序-> 安装：
    *   选择*Search for new features to install*并单击**Next**。
    *   单击**添加远程位置**按钮
    *   添加 url： http: [//mercurialeclipse.eclipselabs.org.codespot.com/hg.wiki/update_site/stable/](http://mercurialeclipse.eclipselabs.org.codespot.com/hg.wiki/update_site/stable/)并给它一个合适的名字
    *   添加后，确保在位置列表中勾选它，然后单击**完成**
    *   然后设计会搜索更新并给你一个列表。取消勾选*“仅显示每个更新站点的最新版本功能”*
    *   从 MercurialEclipse 稳定版本中勾选**MercurialEclipse 1.6 。**我发现最新版本不起作用，但是之前的[Stackoverflow 对话](https://stackoverflow.com/questions/10359476/mercurial-setup-for-lotus-domino-designer-8-5-3)表明版本 1.6 确实起作用。

    *   单击完成并允许它安装。
    *   您将被要求批准各种插件，然后重新启动。
    *   MercurialEclipse，现在应该安装了！

4.  要开始将 Mercurial 与 Domino 应用程序一起使用：
    *   右键单击 Applications 选项卡中的应用程序，选择：Team Development -> Set Up Source Control for this Application。
    *   为项目命名并选择要存储的项目的位置。
    *   然后，Designer 会将数据库进行 DXL 导出到您选择的位置。**导航器选项卡**将出现在应用程序旁边。
    *   在导航器中右键单击您的新磁盘项目并选择：团队 -> 共享项目...
    *   从存储库类型中选择 Mercurial 并允许 Designer 创建存储库。
    *   您现在应该可以通过团队菜单访问各种 Mercurial 功能。（您需要进行第一次提交。

5.  当您进行要提交到源代码控制的更改时，您需要：
    *   右键单击应用程序并选择：团队开发 -> 与磁盘项目同步...
    *   转到导航器选项卡并右键单击您的磁盘项目，选择团队。

上面的大部分步骤应该是显而易见的，但决定发布完整的细节，以防有人像我在 Eclipse 上所做的那样挣扎，以及如何正确使用它。一旦我弄清楚了，这真的很容易。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-20T15:58:24.217

Keith Strickland 创建了一系列关于将源代码控制与 DDE 结合使用的博客文章。他们可能会帮助您：

*   Keith Strickland：DDE 第 1 部分中的源代码控制：  [http ://www.keithstric.com/A55BAC/keithstric.nsf/default.xsp?documentId=B236F39DEAF6C52F85257A72001157BF](http://www.keithstric.com/A55BAC/keithstric.nsf/default.xsp?documentId=B236F39DEAF6C52F85257A72001157BF)
*   Keith Strickland：DDE 第 2 部分中的源代码控制：  [http ://www.keithstric.com/A55BAC/keithstric.nsf/default.xsp?documentId=B5D76A6DA163DCB585257A7C004802B6](http://www.keithstric.com/A55BAC/keithstric.nsf/default.xsp?documentId=B5D76A6DA163DCB585257A7C004802B6)
*   Keith Strickland：DDE 第 3 部分中的源代码控制：  [http ://www.keithstric.com/A55BAC/keithstric.nsf/default.xsp?documentId=C2C46D278948A24985257A7D0055D25E](http://www.keithstric.com/A55BAC/keithstric.nsf/default.xsp?documentId=C2C46D278948A24985257A7D0055D25E)**

# c# - 如何检查UNC路径是否为DFS路径？

> ID：13471701
> 
> 赞同：3
> 
> 时间：2012-11-20T10:55:42.133
> 
> 标签：c#, unc, microsoft-distributed-file-system

假设我有三个 UNC 路径：

```
\\it\may\be\samba\on\linux.txt
\\maybe\its\on\windows\fileserver.txt
\\and\that\one\is\dfs.txt 
```

如何检查（在 c# 中）哪个是 dfs 映射，哪个不是？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T12:11:41.847

找到了解决方案，但它有一个缺点。[如果我传入 dfs 根（或链接），对NetDfsGetInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/bb524812.aspx)的调用将返回有关 dfs 根（或链接）的信息。如果它是不在 dfs 上的 UNC 路径，它将返回错误。

唯一的缺点是返回该错误大约需要一秒钟，返回 dfs 信息会产生即时结果。

如果有人想使用此解决方案：
NetDfsGetInfo 上的文档说您必须在返回的缓冲区上调用[NetApiBufferFree](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370304.aspx)，即使您收到错误消息。

# html - 如何更改图像上的文本？

> ID：13471704
> 
> 赞同：-1
> 
> 时间：2012-11-20T10:56:00.527
> 
> 标签：html, photoshop

下面是图片，我在图片上有文字。我想知道如何更改图像上的文本。实际上是其他人编写了代码，而我没有得到。请朋友帮帮我。 ![在此处输入图像描述](../Images/e4b07eb4713b5033af58b479987fffe1.png)

这是正在处理的代码。

```
 <div class="TabsV">
        <div id="Tab0" class="TabV Selected" style="height: 86px;">
            <a style="background-position: -8px -12px; padding-bottom: 70px;" href="javascript: SelectTab(0)"></a>
        </div>
        <div id="Tab1" class="TabV" style="height: 116px;">
            <a style="background-position: -40px 0px; padding-bottom: 100px;" href="javascript: SelectTab(1)"></a>
        </div>
        <div class="TabVEmpty" style="height: 50px;"></div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:59:55.063

看起来文本是图像的一部分。

因此，您需要编辑实际图像并更改那里的文本。

如果您查看该页面中使用的样式表，您会发现类似于

```
.TabV a{
   /*in here you will see the url of the image being used
   background:...
   or background-image: url('..');
   */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:05:00.020

看起来图像本身包含文本，它是通过 TabV 类应用的——注意背景位置坐标在一个选项卡和另一个选项卡之间是如何变化的。

如果您查看您的 CSS 文件，您应该会看到如下内容：

```
.TabV 
{
    background-image: url(...)
} 
```

因此，您需要做的是操作用作背景的现有图像并将您想要的文本添加到该图像。然后你需要修改相应锚元素的背景位置。用 jQuery 做到这一点的一种方法是：

```
$('#Tab0').attr("background-position","-16px 20px;"); //-16px and 20px are just an example 
```

`#Tab0`第一个选项卡的 css 选择器在哪里。#Tab1 将是第二个选项卡的 css 选择器...`"#<something>"`映射到`id="<something>"`html 标记中。

该技术本身被称为 CSS sprites。[您可以在此处](http://www.w3schools.com/css/css_image_sprites.asp)阅读有关此技术的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T10:58:23.110

你不能！您必须在图像编辑器中编辑这些图像文件。选项卡中的文本未在 html 代码中编码。

# c# - 如何创建到成员变量的 XAML 绑定？

> ID：13471705
> 
> 赞同：6
> 
> 时间：2012-11-20T10:56:04.770
> 
> 标签：c#, xaml

我是 XAML 和数据绑定的新手。我想定义一个 GUI 控件`MainWindow.xaml`，它从`MainWindow.xaml.cs`. 为简单起见，我只是制作了一个显示计数器和递增计数器的按钮的程序。

根据我查找的[早期线程](https://stackoverflow.com/questions/13325617/i-cant-data-bind-to-a-local-variable-in-wpf-xaml)，我想出了以下代码：

**主窗口.xaml.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace XAMLBindingTest
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        private int Counter
        {
            get { return (int)GetValue(CounterProperty); }
            set { SetValue(CounterProperty, value); }
        }
        public static readonly DependencyProperty CounterProperty = 
            DependencyProperty.Register("Counter", typeof(int), typeof(MainWindow), new PropertyMetadata(null));

        public MainWindow()
        {
            Counter = 0;
            InitializeComponent();
        }

        private void incrementCounter(object sender, RoutedEventArgs e)
        {
            ++Counter;
        }
    }
} 
```

**主窗口.xaml**

```
<Window x:Class="XAMLBindingTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="140" Width="180">
    <Grid>
        <StackPanel HorizontalAlignment="Left" VerticalAlignment="Top">
            <TextBlock x:Name="txbCounter" HorizontalAlignment="Left" TextWrapping="Wrap" Text="{Binding Counter}" VerticalAlignment="Top"/>
            <Button x:Name="btnIncrement" Content="Increment" Width="75" Click="incrementCounter"/>
        </StackPanel>
    </Grid>
</Window> 
```

此示例编译，但未`TextBlock`显示计数器值。如何以正确的方式`TextBlock`连接到会员？`Counter`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T08:21:47.730

尝试将“名称”添加到您的窗口并使用“元素名称”进行绑定

```
<Window x:Class="XAMLBindingTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Name="UI">
    <Grid>
        <StackPanel HorizontalAlignment="Left" VerticalAlignment="Top">
            <TextBlock x:Name="txbCounter" HorizontalAlignment="Left" TextWrapping="Wrap" Text="{Binding ElementName=UI, Path=Counter}" VerticalAlignment="Top"/>
            <Button x:Name="btnIncrement" Content="Increment" Width="75" Click="incrementCounter"/>
        </StackPanel>
    </Grid>

</Window> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:36:24.777

如果我理解正确：

```
ItemSource="{Binding Path=TestData, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type common:LayoutAwarePage}}}" 
```

`TestData``ObservableCollection`是在 .xaml.cs 文件中声明的类型的属性。`ItemSource`- 是您要绑定到的示例属性。

UPD2：

```
<ItemsControl ItemSource="{Binding Path=TestData, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type common:LayoutAwarePage}}}">
      <ItemsControl.ItemTemplate>
          <DataTemplate>
              <TextBlock Text="{Binding}" />
          </DataTemplate>
      </ItemsControl.ItemTemplate>
</ItemsControl> 
```

# jquery - 表单提交，但在使用 button.click 时通过表单验证

> ID：13471707
> 
> 赞同：1
> 
> 时间：2012-11-20T10:56:07.453
> 
> 标签：jquery, html

我正在使用表单验证插件以及 html5 属性=recquired 输入类型=按钮或提交和fancybox。单击按钮时，两个验证程序都有效（出现空输入通知），但不是此通知，而是提交表单。

如果我不使用 button.click 功能而是使用简单的 submit.then 验证工作完美

**插件**==http://validatious.org/

javascript函数

```
 $(document).ready(function() {

    $('#send').click(function() {

    $(this).attr("value", 'Applying...');

    var id = getParam('ID');
    $.ajax({
        type:'POST',
        url:"send.php",

        data:{option:'catapply', tittle:$('#tittle').val(), aud:aud, con:con, adv:adv, mid:$('#mid').val(), aud2:aud, cid:$('#cid').val(), scid:$('#scname option[selected="saa"]').val(), gtt:$('input[name=gt]:radio:checked').val(), sr:$(":input").serialize() + '&aud=' + aud},

        success:function(jd) {
            $('#' + id).fadeOut("fast", function() {
                $(this).before("<strong>Success! Your form has been submitted, thanks :)</strong>");
                setTimeout("$.fancybox.close()", 1000);
            });
        }
    });
  });
 }); 
```

和 HTML 在这里

```
 <form id="form2" class="validate" style="display: none" >

        <input  type='button'  value='Apply' id="send" class="sendaf validate_any"                              name="jobforming"/>
     </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:00:16.723

要么有一个 type="button" 而不是 type="submit" 或者我非常喜欢，在表单提交而不是点击时运行。preventDefault（或在函数末尾返回 false）将停止正常的表单提交，除非代码中存在语法错误！例如什么是 aud 和 con？

尝试

```
$(document).ready(function() {

  $("#form2").on("submit",function(e) {
    e.preventDefault(); // stop normal submission

    $('#send').attr("value", 'Applying...');

    var id = getParam('ID');
    $.ajax({
      type:'POST',
      url:"send.php",
      data:{option:'catapply', tittle:$('#tittle').val(), aud:aud, con:con, adv:adv, mid:$('#mid').val(), aud2:aud, cid:$('#cid').val(), scid:$('#scname option[selected="saa"]').val(), gtt:$('input[name=gt]:radio:checked').val(), sr:$(":input").serialize() + '&aud=' + aud},

      success:function(jd) {
        $('#' + id).fadeOut("fast", function() {
          $(this).before("<strong>Success! Your form has been submitted, thanks :)</strong>");
          setTimeout("$.fancybox.close()", 1000);
        });
      }
    });
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:15:04.887

此解决方案可能适用于您的验证插件。在我看来，即使*mplungjan*的答案在大多数情况下是一个更好的解决方案（监听提交事件而不是监听提交按钮单击）。

```
$(document).ready(function() {
    $('#send').click(function(e) {

       e.preventDefault();

       $(this).attr("value", 'Applying...');

       var id = getParam('ID');

       $.ajax({
           type:'POST',
           url:"send.php",
           data:{option:'catapply', tittle:$('#tittle').val(), aud:aud, con:con, adv:adv, mid:$('#mid').val(), aud2:aud, cid:$('#cid').val(), scid:$('#scname option[selected="saa"]').val(), gtt:$('input[name=gt]:radio:checked').val(), sr:$(":input").serialize() + '&aud=' + aud},
           success:function(jd) {
               $('#' + id).fadeOut("fast", function() {
                   $(this).before("<strong>Success! Your form has been submitted, thanks :)</strong>");
                   setTimeout("$.fancybox.close()", 1000);
               });
           }
        });
    });
}); 
```

# c# - 如何将 COM 参数编组为 VT_RECORD 的 VT_ARRAY

> ID：13471714
> 
> 赞同：2
> 
> 时间：2012-11-20T10:56:31.827
> 
> 标签：c#, com, marshalling, com-interop

我已经做了一些广泛的搜索，但我似乎找不到任何与我的问题相匹配的东西。

我目前正在处理的任务是为一些 DCOM-Objects 创建一个 WCF-Wrapper。这在大多数情况下已经很有效了，但是现在我被一个需要`VT_ARRAY`包含`VT_RECORD`-Objects 的调用所困扰。

编组 as`VT_ARRAY`不是问题，但我如何告诉 COM 这个数组中的元素是`VT_RECORD`s？

这是我当前使用的调用。

```
InitTestCase(testCaseName, parameterFileName, testCase, cellInfos.ToArray()); 
```

我说的参数是最后一个。它被定义为`List<CellInfo>`，`CellInfo`它本身已经被赋予`Guid("7D422961-331E-47E2-BC71-7839E9E77D39")`和`ComVisible(true)`。它*不是*一个结构，而是一个类。

这是本机方面失败的条件：`if (VT_RECORD == varCellConfig.vt)...`

由于使用这些接口的旧软件，更改本机端不是一种选择

任何想法？

# android - 哪个更好地添加标志或设置标志关于全屏和屏幕上

> ID：13471715
> 
> 赞同：10
> 
> 时间：2012-11-20T10:56:35.000
> 
> 标签：android, screen, android-activity, fullscreen

我想知道以下实现方式之间的**性能**和**行为哪个更好：**

1.  全屏。

2.  屏幕开启。

或两者相同

第一的：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
            WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

或者

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN |
WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

也许这是一个简单的问题，但我仍在学习 android 开发，

任何帮助将不胜感激，

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T10:58:40.060

我认为这两种情况都不会对性能产生很大影响，但是在现代开发环境中，我们更喜欢直接在

```
 getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN |
      WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

所以我绝对会投票

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T14:26:53.467

尝试这个

```
 getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);  
    getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

更多请[关注此链接](http://glorious-arvind.blogspot.in/2012/11/full-screen-in-android.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-16T08:19:28.970

这适用于 Kotlin 开发人员

```
@Suppress("DEPRECATION")
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.R) {
        window.insetsController?.hide(WindowInsets.Type.statusBars())
    } else {
        window.setFlags(
            WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN
        )
    } 
```

# c++ - c++简单地用自己的线程启动一个函数

> ID：13471722
> 
> 赞同：1
> 
> 时间：2012-11-20T10:57:19.237
> 
> 标签：c++, multithreading

我曾经有一个非常简单的一两行代码，它可以用自己的线程启动一个函数并继续运行直到应用程序关闭，C++ 控制台应用程序。丢失了它所在的项目，记住它很难找到。现在网上找不到了。大多数示例说明了复杂的多线程情况。但我只需要在它自己的线程中打开这个函数。希望有人知道我在说什么，或类似的解决方案。

例如。在自己的线程中启动 void abc，无参数

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T11:06:19.657

使用[C++11 线程支持](http://en.cppreference.com/w/cpp/thread/thread)的示例：

```
#include <thread>

void abc(); // function declaration

int main()
{
  std::thread abcThread(abc); // starts abc() on a separate thread

  ....

  abcThread.join(); // waits until abcThread is done.
} 
```

如果您没有 C++11 支持，也可以使用[`boost::thread`](http://www.boost.org/doc/libs/1_52_0/doc/html/thread.html)，只需替换`std::thread`为`boost::thread`.

# python - 如何创建局部动态变量

> ID：13471724
> 
> 赞同：1
> 
> 时间：2012-11-20T10:57:27.310
> 
> 标签：python, dynamic, python-3.x, eval

这是我的代码，我想用来`eval()`获取规则状态但`eval()`需要局部变量，有很多类继承了基类，所以我需要`get_stat()`在每个类中重写。

我想避免这种情况，一个想法是在`get_stat()`例如创建动态变量。类 b 在 func 中动态创建变量 a 和 b`get_stat()`

我应该如何在函数中创建动态变量？或任何其他方式来避免这个愚蠢的想法。我使用 python 3.2.3，`locals()`不起作用

```
class base(object):
    def check(self):
        stat = get_stat()
    def get_stat(self):
        pass

class b(base):
    rule = 'a > 5 and b < 3'
    a = 0
    b = 0

    def update_data(self, a, b):
        self.a = a
        self.b = b

    def get_stat(self):
        a = self.a
        b = self.b
        return eval(rule)

class b(base):
    rule = 'd > 5 and e < 3'
    d = 0
    e = 0

    def update_data(self, d, e):
        self.d = d
        self.e = e

    def get_stat(self):
        d = self.d
        e = self.e
        return eval(rule) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:14:19.210

您可以将字典传递给`eval()`包含变量以评估表达式的函数：

```
>>> eval("a + b", {"a": 2, "b": 3})
5 
```

通过`self.__dict__`以访问对象的属性：

```
>>> class MyClass(object):
...     def __init__(self):
...             self.a = 2
...             self.b = 3
... 
>>> obj = MyClass()
>>> obj.__dict__
{'a': 2, 'b': 3}
>>> eval("a + b", obj.__dict__)
5 
```

链接：

*   [评估](http://docs.python.org/3/library/functions.html#eval)
*   [`__dict__`](http://docs.python.org/3/library/stdtypes.html#object.__dict__)

# asp.net-mvc - DotNetOpenAuth / WebSecurity 基本信息交换

> ID：13471727
> 
> 赞同：0
> 
> 时间：2012-11-20T10:57:46.497
> 
> 标签：asp.net-mvc, oauth, openid, dotnetopenauth

我现在已经在我的网站上进行了大量的 OAuth 登录。我的实现基于 WebSecurity 类，并对代码进行了修改以满足我的需要（我将 WebSecurity 源代码提取到我的代码中）。

然而，我现在面临着一系列新的问题。在我的应用程序中，我选择将用户电子邮件地址作为选择的登录标识符。它自然是独一无二的，适合这个用例。

然而，OAuth“标准”又来了。

有些提供商会将您的电子邮件地址作为“用户名”（Google）返回，有些提供商会返回显示名称（Facebook）。就目前而言，鉴于我的特定情况，我看到了两个选项：

**选项 1** 将更多框架源代码拉入我的解决方案，直到我可以追查 OpenIdRelyingParty 类实际交互的位置（通过 DotNetOpenAuth.AspNet 外观）并从 OpenID 提供程序发出附加信息请求。

**选项 2** 当用户首次使用 OpenID 提供商登录时，我可以显示一种“完整注册”表单，该表单根据所选的提供商请求缺失信息。*

选项 2 是最直接的，也可能是最快的实现方式，但也包含一些代码异味，因为必须根据所选的提供者执行不同的操作。

选项 1 将花费更长的时间，但最终会使事情更具未来性。我将需要执行更丰富的交互，因此这在这方面也具有优势。

我对代码的了解越多，WebSecurity 类本身似乎实际上非常有限，因为它以简化集成的名义隐藏了许多有用的 DotNetOpenAuth 功能。

Andrew（DNOA 的作者）说过，属性交换的东西发生在 OpenIdRelyingParty 类中，但我无法从 DotNetOpenAuth.AspNet 源代码中看到使用该类的位置，所以我不确定需要将什么源引入我的代码以启用我需要的功能。

有没有人完全类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:57:21.763

AttributeExchange 仅适用于 OpenID 提供程序（[Google](https://github.com/DotNetOpenAuth/DotNetOpenAuth/blob/master/src/DotNetOpenAuth.AspNet/Clients/OpenID/GoogleOpenIdClient.cs)和[Yahoo!](https://github.com/DotNetOpenAuth/DotNetOpenAuth/blob/master/src/DotNetOpenAuth.AspNet/Clients/OpenID/YahooOpenIdClient.cs)），您可以看到在它们各自的源文件中使用的扩展名。

我建议不要使用电子邮件地址作为用户名。电子邮件地址可以回收（帐户可以过期或关闭/取消，并且可以将电子邮件地址重新分配给新用户）。如果发生这种情况，您的基于电子邮件地址的站点会将旧用户的所有数据“泄露”给新用户。大规模的隐私侵犯和诉讼可能在那里发生。在 OpenID 案例中使用声明标识符或在 OAuth 案例中使用服务提供商特定的用户 ID 号作为用户表中的主要标识符要好得多。*当然，您可以*捕获并在网站上显示用户名的任何地方显示电子邮件地址，只要用户知道那是用户名 - 只是在内部您使用的东西比这更精确。

# c++ - 此代码是否会导致内存泄漏（Arduino）

> ID：13471729
> 
> 赞同：0
> 
> 时间：2012-11-20T10:57:49.633
> 
> 标签：c++, memory, memory-leaks, arduino, avr-gcc

我有一个 arduino 项目，我创建了这个结构：

```
struct Project {
  boolean         status;
  String          name;
  struct Project* nextProject;
}; 
```

在我的应用程序中，我解析一些数据并创建`Project`对象。要将它们放在列表中`nextProject`，每个`Project`对象中都有一个指向最后一个对象的指针。这是我添加新项目的代码：

```
void RssParser::addProject(boolean tempProjectStatus, String tempData) {
  if (!startProject) {
    startProject = true;

    firstProject.status      = tempProjectStatus;
    firstProject.name        = tempData;
    firstProject.nextProject = NULL;

    ptrToLastProject = &firstProject;
  } else {

    ptrToLastProject->nextProject = new Project();

    ptrToLastProject->nextProject->status      = tempProjectStatus;
    ptrToLastProject->nextProject->name        = tempData;
    ptrToLastProject->nextProject->nextProject = NULL;

    ptrToLastProject = ptrToLastProject->nextProject;
  }
} 
```

`firstProject`是一个私有实例变量，在头文件中定义如下：

```
Project firstProject; 
```

因此，如果实际上没有添加项目，我使用`firstProject`, 添加一个新项目，如果`firstProject`设置了我使用`nextProject`指针。

我还有一个`reset()`方法可以删除指向项目的指针：

```
void RssParser::reset() { 
  delete ptrToLastProject;
  delete firstProject.nextProject;

  startProject = false;
} 
```

每次解析运行后，我称`reset()`问题是未释放使用的内存。如果我注释掉该`addProject`方法，则我的记忆没有问题。有人可以告诉我什么可能导致内存泄漏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:18:33.717

首先，您不需要变量`startProject`- 只需使用 NULL 初始化`firstProject`指针，然后像这样编写您的条件：

```
if (firstProject)
{
    // There is a project, so append the new one.
}
else
{
    // There is no project, so we need to create a new list.
} 
```

该值`FALSE`定义为 0，就像 NULL。如果`firstProject`为 NULL，则表达式看起来像并在-block`if (FALSE)`内继续执行。`else`

所以现在你的`reset`-Method 需要释放分配给**所有**项目的内存，不仅仅是最后一个和第二个，就像你的代码一样。

```
delete ptrToLastProject; // Free last project
delete firstProject.nextProject; // Free the project following to the first one. 
```

这里的问题是：

*   如果`ptrToLastProject == firstProject.nextProject`？第二`delete`条语句将释放已释放的内存。
*   `firstProject`永远不会被释放
*   第二个和最后一个之间的项目永远不会发布。

释放单链表的最好方法是这样的：

```
Project* pProject = firstProject;
Project* pProjectToDelete;

while (pProject)  // As long as the pointer points to something (see the first comment)
{
    pProjectToDelete = pProject;
    pProject = firstProject->nextProject;
    delete pProjectToDelte;
} 
```

在这个实现中，你正在“遍历”列表，释放前面的元素，只要后面有一个元素。如果下一个元素是`NULL`，则最后一个元素已被释放并且循环中断。

最后但并非最不重要的一点是，您需要将指针重置为第一个元素（在数据结构方面也称为“锚”）：

```
firstProject = NULL; 
```

这确保`addProject`不会尝试将项目附加到`NULL`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:01:00.527

您的`reset`函数需要遍历项目链，而不仅仅是删除第一个和最后一个

# radio-button - QML 中的刷新元素

> ID：13471732
> 
> 赞同：1
> 
> 时间：2012-11-20T10:58:12.580
> 
> 标签：radio-button, refresh, desktop, reload, qml

我的 QML 桌面应用程序中有一个 RadioButton，当我将其设置为未选中时，它确实变为未选中，但在它包含鼠标之前我看不到它。我尝试了很多方法来解决它，但没有找到任何好的方法。所以我决定刷新页面，甚至只刷新 RadioButton，以便将 RadioButton 设置为它的真实状态，我希望在刷新后按钮将显示为未选中的按钮。您知道如何刷新或重新加载它吗？先谢谢了！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:11:33.860

似乎您刚刚被桌面的 QML 组件（或您使用的是哪种单选按钮组件？）的错误所困扰。毫不奇怪，这仍然是未发布的代码，不适合生产使用。

刷新单选按钮，就像卸载它一样，然后在[`Loader`](http://qt-project.org/doc/qt-4.8/qml-loader.html)元素的帮助下重新加载它。只是暂时清除`source`属性。

# c# - 在登录 Windows 之前显示网站

> ID：13471733
> 
> 赞同：0
> 
> 时间：2012-11-20T10:58:18.350
> 
> 标签：c#, windows-7

最近有人问我是否可以帮助开发/部署一个解决方案，让他们的员工先登录到他们的网站，然后才能在他们的系统上做任何事情。他们担心他们的员工不访问他们的网站，并且愿意这样做，以便员工在使用他/她的桌面之前看到的第一件事就是他们的网站。

请问任何机构可以给我任何指示吗？

欢迎任何与 .net 相关的代码文章，以及可能已经构建的解决方案。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:01:52.843

在登录之前没有真正的桌面......做你所描述的可能在技术上是可能的（可能需要一些“黑客”）......但是这样做违反了任何安全措施......

一个选项可能是设置 Windows 自动启动，以使用该网站启动浏览器...

根据评论：

[您可以在此处](http://blogs.msdn.com/b/powershell/archive/2006/04/25/how-to-access-or-modify-startup-items-in-the-window-registry.aspx)和[此处](http://www.dreamincode.net/forums/topic/94010-running-your-program-on-windows-startup-either-the-current-user-or-the/)找到有关如何处理“启动项”的一些想法。

# javascript - 正则表达式中的变量在jquery中不起作用

> ID：13471744
> 
> 赞同：-1
> 
> 时间：2012-11-20T10:58:47.627
> 
> 标签：javascript, jquery, regex

我想在表达式中使用变量以在添加更多时自动递增 id。但是当我在表达式中添加变量时它不起作用，当我在表达式中静态输入字符串“_1”时它起作用了
这是代码

```
$(document).ready(function() {

    var row_number_current  = 1;
    var row_number_increment = Number(row_number_current);
    row_number_increment += 1;

    var addMore = '<div id="data_box_1"><label for="chart-pie-text_1">Chart Text</label></div>';

    var row1 = addMore.replace("/_"+row_number_current+"/g", '_'+row_number_increment);
    var row2 = addMore.replace(/_1/g, '_'+row_number_increment);

    alert(row1);
    alert(row2);
}); 
```

row1 的结果是

```
<div id="data_box_1"><label for="chart-pie-text_1">Chart Text</label></div> 
```

第 2 行结果是

```
<div id="data_box_2"><label for="chart-pie-text_2">Chart Text</label></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:00:32.307

为了在正则表达式中使用变量，您必须创建新[`RegExp`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)对象并将表达式作为第一个字符串参数传递：

```
var regex = new RegExp("_" + row_number_current, "g");
row1 = addMore.replace(regex, "_" + row_number_increment); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:01:05.047

`"/_"+row_number_current+"/g"`是一个字符串，而不是一个正则表达式。您需要使用此字符串构造一个正则表达式，然后将*其*作为`pattern`替换中的参数传递：

```
var regex1 = new RegeExp("_"+row_number_current,"g");
var row1 = addMore.replace(regex1, '_'+row_number_increment); 
```

但是，在您的特定情况下，您实际上并不需要正则表达式。只需使用一个字符串：

```
var row1 = addMore.replace(row_number_current, row_number_increment, "g"); 
```

# magento - 我的 magento 模块未被批准为扩展

> ID：13471745
> 
> 赞同：0
> 
> 时间：2012-11-20T10:58:48.763
> 
> 标签：magento

我的免费社区扩展未经 magento commerce 批准。

您可以从以下 url 获取我的扩展的打包 zip 文件：

202.65.129.178/jungleextn/Junglee_Exports-1.0.0.tgz

当我在 magento admin 连接管理器中使用打包的 zip 文件安装此扩展程序时，它会启动并正常工作。所以我将它发布在magento connect中。但他们不接受。我认为扩展密钥、频道、版本号存在问题。

请任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:35:02.983

您可以询问 Magento 支持团队，他们可能会帮助您。
( [http://www.magentocommerce.com/support/overview](http://www.magentocommerce.com/support/overview) ) 否则 ( [http://www.magentocommerce.com/bug-tracking](http://www.magentocommerce.com/bug-tracking) )

编辑：

找到了一些东西...为您的上传使用不同的名称。创建包时使用的包信息名称应与上传时的扩展名相同。

# python - 将拆分值分配给多个变量

> ID：13471746
> 
> 赞同：10
> 
> 时间：2012-11-20T10:58:53.303
> 
> 标签：python, arrays, variable-assignment

我目前正在编写一个 Python 脚本来处理一些日志并重新格式化某些部分。部分脚本使用以下代码（作为示例）：

```
var1,var2,var3=foo.split("|") 
```

哪个工作正常。但是，如果有 39 个值，这可能看起来不太好（去掉 Python 的可读性因素），例如：

```
var1,var2,var3,...,var39=foo.split("|") 
```

有没有更好的方法来格式化这个结构？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-08-12T00:28:20.297

您可以分配给不同的变量。就像在 Perl 中一样，您只需将它们定义在一个数组中，因此通过匹配变量和结果的位置来完成分配。

这是我在交互式 python 中尝试过的东西：

```
>>> # this is a grep result, btw
... foo = 'config/some.conf:12:   title = "Super Me"'
>>> [ filename, line, text ] = foo.split(':')
>>> print text
   title = "Super Me" 
```

我喜欢这个而不是字典或数组，尤其是在`for`循环工作时。它使变量名更有意义，即使是循环本地的或临时的。

**编辑**
*第二次编辑以整合 codeforester 的注释（谢谢）。*

为避免搜索变量使用情况，可以对不需要的值进行虚拟化以明确声明不会使用它。虚拟变量是`_`python linter所期望的

```
>>> [ _, line, text ] = foo.split(':') 
```

如果您不确定令牌数量，请使用[扩展的可迭代](https://www.python.org/dev/peps/pep-3132/)

```
>>> [ filename, line, text, *_ ] = foo.split(':') 
```

如果您的变量不需要 List 属性，则只需删除方括号（然后将变量作为元组进行管理）。

**编辑结束**

可读性取胜！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-20T11:00:58.680

```
lst = foo.split("|")
lst[0]
lst[1]
... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-20T11:02:23.007

你可以使用字典：

```
In [29]: strs="foo|bar|spam|eggs"

In [31]: d=dict(("var{0}".format(i),x) for i,x in enumerate(strs.split("|")))

In [32]: d
Out[32]: {'var0': 'foo', 'var1': 'bar', 'var2': 'spam', 'var3': 'eggs'}

In [33]: d['var1']
Out[33]: 'bar'

In [34]: d['var2']
Out[34]: 'spam' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-20T11:01:31.650

使用 a`list`存储获得的令牌：-

```
>>> my_str = "Python|Splitting|the|string"
>>> my_tokens = my_str.split("|")
>>>
>>> my_tokens
['Python', 'Splitting', 'the', 'string']
>>> my_token[0]
'Python' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-01T14:24:43.587

这可能对您有帮助：

```
strings = "python,splitting,the,string"

var1,var2,var3,var4 = [str(i) for i in strings.split(",")] 
```

# c - 释放一个 NULL 指针

> ID：13471749
> 
> 赞同：-2
> 
> 时间：2012-11-20T10:59:06.900
> 
> 标签：c, free

> **可能重复：**
> [ptr 为 NULL 的 free(ptr) 是否会损坏内存？](https://stackoverflow.com/questions/1938735/does-freeptr-where-ptr-is-null-corrupt-memory)
> [在 C 中释放 NULL 指针是一种好习惯吗？](https://stackoverflow.com/questions/6084218/is-it-good-practice-to-free-a-null-pointer-in-c)

我有一个关于释放空指针的问题。

```
char *p = NULL;
free(p); 
```

会不会`free(NULL)`导致崩溃？

还是取决于编译器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:01:11.290

来自免费的手册页

```
void  free(void *ptr); 
```

> free() 函数释放 ptr 指向的内存分配。如果 ptr 是 NULL 指针，则不执行任何操作。

如果您想从 C 手册本身获得确认

> free 函数会导致 ptr 指向的空间被释放，也就是说，可用于进一步分配。如果 ptr 是空指针，则不会发生任何操作。

请参阅[本](http://www.open-std.org/JTC1/SC22/wg14/www/docs/n1124.pdf)文档的第 313 页。

# ruby-on-rails - 为什么 simple_form 生成一个不存在的路由？

> ID：13471750
> 
> 赞同：1
> 
> 时间：2012-11-20T10:59:09.270
> 
> 标签：ruby-on-rails, associations, simple-form

我有...

**/config/routes.rb：**

```
Testivate::Application.routes.draw do
  resources :areas do
    resources :heuristics    
  end
end 
```

**/app/models/heuristic.rb：**

```
class Heuristic < ActiveRecord::Base
  attr_accessible :area_id
  belongs_to :area
end 
```

**/app/models/area.rb：**

```
class Area < ActiveRecord::Base
  has_many :heuristics
end 
```

**/app/controllers/heuristics_controller.rb：**

```
class HeuristicsController < ApplicationController
  def new
    @area = Area.find(params[:area_id])
    @heuristic = @area.heuristics.build
    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @heuristic }
    end
  end
end 
```

**/app/views/heuristics/new.html.haml：**

```
%h1 New heuristic
= render 'form'
= link_to 'Back', area_heuristics_path(@area) 
```

**/app/views/heuristics/_form.html.haml：**

```
= simple_form_for @heuristic do |f|
  = f.input :foo
  = f.button :submit 
```

我绝不会明确调用`heuristics_path`，因为这当然不存在。

那为什么我会收到以下错误`http://localhost:3000/areas/1/heuristics/new`？

```
NoMethodError in Heuristics#new
Showing /Users/steven/Dropbox/testivate/app/views/heuristics/_form.html.haml where line #1 raised:
undefined method `heuristics_path' for #<#<Class:0x007fea3b2ac1a0>:0x007fea3d027608>
Extracted source (around line #1):
1: = simple_form_for @heuristic do |f| 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T13:32:16.977

您可以在此处阅读有关为嵌套资源生成 url 的更多信息 - [http://edgeguides.rubyonrails.org/routing.html#creating-paths-and-urls-from-objects](http://edgeguides.rubyonrails.org/routing.html#creating-paths-and-urls-from-objects)

```
simple_form_for [@area, @heuristic] do |f| 
```

我认为这比`url`选项更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T11:28:44.533

您使用的是嵌套路由，因此路径不会像单个资源一样。您可以运行`rake routes`以检查启发式资源的路径。

尝试改变：

```
simple_form_for @heuristic do |f| 
```

至：

```
simple_form_for @heuristic, url: area_heuristics_path do |f| 
```

# sql - PostgreSQL - 将查询结果分成五分位数

> ID：13471751
> 
> 赞同：2
> 
> 时间：2012-11-20T10:59:10.003
> 
> 标签：sql, postgresql

有一个 PostgreSQL SQL SELECT 结果。我需要将行分成五分位数并将 quintil 值更新到特定行。

是否有可能在 SELECT 中执行此要求而无需在应用程序中执行此要求？我想避免需要为应用程序选择数据并在 PostgreSQL 服务器之外进行排名的情况。

数据示例 - 第一列是值，第二列是 quintil

```
4859 - 5
4569 - 5
4125 - 4
3986 - 4
3852 - 3
3562 - 3
3452 - 2
3269 - 2
3168 - 1
3058 - 1
```

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T11:03:33.573

有一个称为“ntile”的窗口函数来产生这个：你给它一个参数，指定它所覆盖的输出应该分成多少个“tiles”（在这种情况下是 5 个）。

例如：

```
select t.id, ntile(5) over (order by t.id)
from t 
```

有关窗口函数的介绍，请参阅[窗口函数教程](http://www.postgresql.org/docs/current/static/tutorial-window.html)，有关提供的标准函数列表，[请参阅窗口函数。](http://www.postgresql.org/docs/current/static/functions-window.html)

# html - 屏幕中间的中心 div

> ID：13471756
> 
> 赞同：3
> 
> 时间：2012-11-20T10:59:31.120
> 
> 标签：html, css

我在这里有“主”div：http: [//tallevi.net/daniel/?page_id=5](http://tallevi.net/daniel/?page_id=5) 如果我更改屏幕分辨率，div 不在中间，目前“主”div 的 css 是：

```
.#main {
width: 680px;
position: absolute;
right: 35%;
padding: 0 40px 5px 40px;
font: normal 14px Verdana, Arial, sans-serif;
line-height: 20px;
display: inline-block;
z-index: 2;
background: url(images/content_back.png) repeat-y;
} 
```

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:00:59.180

使元素居中的最佳方法是使用`margin: 0 auto;`，尝试将代码更改为：

```
#main {
  width: 680px;
  margin: 0 auto;
  padding: 0 40px 5px 40px;
  font: normal 14px Verdana, Arial, sans-serif;
  line-height: 20px;
  z-index: 2;
  background: url(images/content_back.png) repeat-y;
} 
```

Margin: 0 auto 为左右设置一个“自动”边距，本质上是居中。（这仅在您指定设置宽度时才有效）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:24:18.520

设置 Div 的边距`margin:0 auto;`并根据需要应用其他必需的属性。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-20T11:11:50.487

从 div 中删除所有样式并应用以下 css：

```
.centerdiv
{
  display: block;
  margin-left: auto;
  margin-right: auto;
  padding: 0 40px 5px 40px;
  font: normal 14px Verdana, Arial, sans-serif;
  line-height: 20px;
  z-index: 2;
  background: url(images/content_back.png) repeat-y;
} 
```

# php - 动态模板css的mysql结构（模板框架）

> ID：13471757
> 
> 赞同：2
> 
> 时间：2012-11-20T10:59:44.683
> 
> 标签：php, html, mysql, css, templates

我正在尝试创建一个从数据库中检索内容的动态 cssFile.php。使用这个框架，我应该能够更改一些全局 css 属性和一些其他属性，例如使用 html 表单定位和调整它们的大小，但我不知道如何在数据库中构造数据，甚至不知道如何创建一个好的布局。数据库表应该是这样的：

```
+-------+------------+---
| color | background | ...
+-------+------------+---
| red   | #fff       |
+-------+------------+--- 
```

或者像这样：

```
+--------+----------+-------+
| class  | property | value |
+--------+----------+-------+
| .class | color    | red   |
+--------+----------+-------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:54:07.317

像这样的布局会很好。

**CSS_type - 表格**

```
+--------+----------+
| id     | type     |
+--------+----------+
| 1      | .class   |
+--------+----------+ 
```

**CSS_main - 表**

```
+--------+----------+-------+------------+
| type   | property | value |  type_name |......
+--------+----------+-------+------------+
| 1      | color    | red   | container  |......
+--------+----------+-------+------------+ 
```

...

# ios - '.' 和有什么不一样？和'->' iOS？

> ID：13471758
> 
> 赞同：2
> 
> 时间：2012-11-20T10:59:45.033
> 
> 标签：ios, objective-c, xcode, syntax, member-access

好吧，我很困惑！我曾经在访问我的实例对象时使用 ->，但现在我看到在我的应用程序中设置它们之后：didFinishLaunching 如下所示：

```
self->counter = [NSNumber numberWithFloat:0.0f]; 
```

在路上我被抛出异常，检查我的调试器并看到计数器指向一个`<non objective c object>`

我将行更改为：

```
self.counter = [NSNumber numberWithFloat:0.0f]; 
```

现在我在调试器中看到我有另一个变量。

那么，这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:05:09.147

`self->counter = [NSNumber numberWithFloat:0.0f];`使用对 ivar 的直接访问。，`self`它等于`counter = [NSNumber numberWithFloat:0.0f];`where `counter`is an ivar。也就是说，是`self->`实例方法内的冗余范围限定。

`self.counter = [NSNumber numberWithFloat:0.0f];`是 . 的语法糖`[self setCounter:[NSNumber numberWithFloat:0.0f]];`。具体来说，声明动态地向对象的设置器发送消息以获取计数器。[尽管有例外](https://stackoverflow.com/questions/9086736/why-would-you-use-an-ivar/9086811#9086811)，但您应该倾向于在不处于部分构造/破坏状态时使用访问器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T11:01:34.333

您在询问 iVar 和属性之间的区别。这个问题已经有很好的答案[了](https://stackoverflow.com/questions/4172810/what-is-the-difference-between-ivars-and-properties-in-objective-c)。

# ios - 'NSInvalidArgumentException'，添加导航栏后发送到实例的无法识别的选择器

> ID：13471769
> 
> 赞同：0
> 
> 时间：2012-11-20T11:00:15.710
> 
> 标签：ios, uiviewcontroller, compiler-errors, uinavigationbar

我有两个viewController，都带有一个表，应用程序可以工作，然后我在第二个viewController 中添加了导航栏，让他有机会在第一个viewController 中返回。导航栏可以工作，但是当我想进入之前完美加载的第二个视图控制器时，我收到了这个错误。

```
 Terminating app due to uncaught exception 'NSInvalidArgumentException', 
  reason: '-[ChinaDatabaseTable descrizione]: unrecognized selector sent to 
  instance 0x8670140' 
```

导航栏是刚刚添加的吗？

在第一个 viewController 中：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

   ChinaDatabaseMenu *currow =[self.mutableArray objectAtIndex:indexPath.row];
  /* The second time it loads this line gives the error, after going in the 
     second viewController and then went back*/

    //.....open the second viewController

   if(UI_USER_INTERFACE_IDIOM()== UIUserInterfaceIdiomPhone){
        ListViewController * list =[[ListViewController alloc]initWithNibName:@"ListViewController~iPhone" bundle:nil];

        list.titoloList = currow.descrizione;
        list.labelTitle.font = [UIFont fontWithName:@"Future" size:15];
        [self.navigationController pushViewController:list animated:YES];
    }else{
        ListViewController * list =[[ListViewController alloc]initWithNibName:@"ListViewController~iPad" bundle:nil];
        list.titoloList = currow.descrizione;
        list.labelTitle.font = [UIFont fontWithName:@"Future" size:30];
        [self.navigationController pushViewController:list animated:YES];

    }

    //.....

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:20:06.483

该问题与导航无关，该问题与您的第二个视图控制器有关（请指定您在哪个控制器上使用了“ChinaDatabaseTable”）。现在，在 SecondView Controller 中，您只需注释所有 UITableViewCode 并检查数据源和委托必须指向 nil 这种情况。

# objective-c - 正确用法：NSOperation 和 NSInvocationOperation

> ID：13471772
> 
> 赞同：0
> 
> 时间：2012-11-20T11:00:20.747
> 
> 标签：objective-c, ios, nsoperation, nsoperationqueue, nsinvocationoperation

我正在研究 NSOperation 并且我对根据我的情况实施它的正确方法有疑问。

在我的应用程序中，我想在后台执行很多操作。由于我的应用程序可以从桌面软件导入数据，因此我的数据库可能会根据情况变得非常大。有了这个，读取和分析数据可能需要几秒钟，我不希望我的 UI 在这段时间内冻结。

假设我有一堂课：

```
ClassX 
- (void) heavyOp1
- (void) heavyOp2
- (void) heavyOp3 
```

每个 heavyOp 都与 相关`ClassX`，因此它们属于同一类是有道理的。

我的问题和我的选择：

1）应该`ClassX`是一个子类`NSOperation`？

我知道操作应该代表一项任务，但我的班级提供了 3 个不同的任务。我可以尝试使用一些自定义构造函数来控制执行，但我认为我可能打破了一个概念。

2）使用`NSInvocationOperation`是否正确？我不能取消它！

我知道我可以做这样的事情：

```
ClassX *myClassX = [[ClassX alloc] init];
NSInvocationOperation *myOp = [[NSInvocationOperation alloc] initWithTarget:myClassX selector:@selector(heavyOp1) object:nil];
NSOperationQueue *myQueue = [[NSOperationQueue alloc] init];
[myQueue myOp]; 
```

但是如果我打电话`[myQueue cancelAllOperations];`给`ClassX`将不会响应，`self.isCancelled`因为它不存在于`NSInvocationOperation`.

用这样的代码强制类识别是可行的`[myOp addObserver:myClassX forKeyPath:@"isCancelled" options:NSKeyValueObservingOptionNew context:nil];`，但我再次认为我正在打破概念。

`NSOperation`3）为我的每个heavyOp方法创建一个子类`ClassX`？

那会产生很多子类并且很难管理它，我不知道它是否正确。

那么，解决问题的正确方法是什么？任何人都可以给我建议吗？也许我对我解释的选项之一有误。如果有不清楚的地方，请询问，我会尽力解释得更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:07:08.527

我倾向于考虑`NSInvocationOperation`用于改造现有代码的操作和队列。如果我从头开始，或者即使我想要更细粒度的控制（您提到的取消能力），我肯定会创建`NSOperation`.

如果不确切知道您的繁重操作是什么，很难确定地说，但我也倾向于将它们创建为三个独立的类。取消每个操作可能需要完成不同的事情，因此很明显有代码在单独的类中执行取消操作。

# eclipse - 代理背后的cloudfoundry eclipse插件

> ID：13471784
> 
> 赞同：2
> 
> 时间：2012-11-20T11:00:51.153
> 
> 标签：eclipse, plugins, proxy, cloud-foundry

当我在代理后面时，如何使用 STS 插件连接到 cloudfoundry？该插件似乎不知道我的 Network Eclipse 代理设置，当我验证我的帐户或连接时，我收到 I/O 错误或无法连接到 api.cloudfoundry.com。

我很确定它是它不知道的代理（它在某种程度上是任何类型的开发、Maven、Grails 和 consorts 的问题）。

有任何想法吗？

非常感谢！托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:04:52.140

作为替代方案，您是否尝试在 Eclipse 中配置系统代理并选择直接连接？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T14:02:19.843

所以我不知道实际的代理支持，但是在我们的 JIRA 搜索“代理”时，我遇到了这两个：[https](https://issuetracker.springsource.com/browse/STS-2975) ://issuetracker.springsource.com/browse/STS-2975和[https://issuetracker.springsource .com/browse/STS-2872](https://issuetracker.springsource.com/browse/STS-2872)。

您可能会看一下它们，因为它们似乎暗示以某种方式支持它。

由此，[我](https://github.com/SpringSource/eclipse-integration-cloudfoundry/blob/master/org.cloudfoundry.ide.eclipse.server.tests/src/org/cloudfoundry/ide/eclipse/server/tests/sts/util/ProxyHandler.java)假设也有代理支持。我只是没有时间弄清楚。

抱歉回复了这么半，希望对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:47:51.227

在**Eclipse 首选项 > 常规/网络首选项中，**

使用手动代理提供程序（非本机），并为 HTTP 和 HTTPS 设置您的代理。

# c++ - 傅里叶域中的去模糊算法

> ID：13471790
> 
> 赞同：0
> 
> 时间：2012-11-20T11:01:04.047
> 
> 标签：c++, opencv, fft

我正在尝试在傅里叶变换域中实现反卷积算法。我自己在 Matlab 中有一个工作实现，我想使用 OpenCV 库将它翻译成 C++。

基本上我所做的是从输入图像中提取梯度，我在转换域中做一些事情，然后我回到空间域。

对我来说有问题的部分是执行这个（元素明智的）划分：

```
DFT(im) = ( conj( DFT(f) ) * DFT(image) + L2 * conj( DFT( gradKernel-x ) ) * DFT(mux) )+ ... ) / ( norm( DFT(f) )^2 + L2 * norm(gradKernel-x)^2 + ... ) 
```

`f`是在代码中定义的高斯核。 `DFT( gradKernel-x )`是梯度内核在 x 方向的 FFT，即`DFT([1,-1])`零填充到模糊图像的大小。mux 是执行反卷积的辅助变量。

在执行逆 DFT 之前，我决定在变换域中分别执行幅度和相位除法。

我不知道我的代码中的错误在哪里，可能在除法中，可能在我的变量的正向/逆变换中，在高斯内核中......

如果有人可以帮助我，我将非常感激。

这是代码的关键部分（请注意，我在发布之前对其进行了简化，因此如果您尝试它，请不要期望获得良好的去模糊效果，基本上我期望这是一个视觉上令人愉悦的输出图像）：

```
imH00=imread("Cameraman256.png",0);
if(!imH00.data)                             
{
    std::cout<<  "Could not open or find the image" << std::endl ;
    return -1;
}

imH00.convertTo(imH00,CV_32F,1.0/255.0,0.0);

// Gaussian Kernel
Mat ker1D=getGaussianKernel(ksize,sigma,CV_32F);
fkernel.create(imH00.size(),CV_32F);
// zero-padding
fkernel.setTo(Scalar::all(0));
temp=ker1D*ker1D.t();
temp.copyTo(fkernel(Rect(0,0,temp.rows,temp.cols)));

// Fourier transform
Mat planes[] = {Mat_<float>(fkernel), Mat::zeros(fkernel.size(), CV_32F)};
Mat ffkernel;
merge(planes, 2, ffkernel);
dft(ffkernel, ffkernel,DFT_COMPLEX_OUTPUT);

// Gradient filter in frequency domain, trying to do something similar to psf2otf([1;-1],size(imH00)); in Matlab.
dx=Mat::zeros(imH00.size(),CV_32F);
dx.at<float>(0,0)=1;
dx.at<float>(0,1)=-1;
Mat dxplanes[] = {Mat_<float>(dx), Mat::zeros(dx.size(), CV_32F)};
Mat fdx;
merge(dxplanes, 2, fdx);
dft(fdx, fdx,DFT_COMPLEX_OUTPUT);

dy=Mat::zeros(imH00.size(),CV_32F);
dy.at<float>(0,0)=1;
dy.at<float>(1,0)=-1;
Mat dyplanes[] = {Mat_<float>(dy), Mat::zeros(dy.size(), CV_32F)};
Mat fdy;
merge(dyplanes, 2, fdy);
dft(fdy, fdy,DFT_COMPLEX_OUTPUT);

// Denominators

Mat den1;
Mat den2;
Mat den21;
Mat den22;

// ||fdx||^2 and ||fdy||^2
mulSpectrums(fdx,fdx,den21,DFT_COMPLEX_OUTPUT,true); 
mulSpectrums(fdy,fdy,den22,DFT_COMPLEX_OUTPUT,true); 
add(den21,den22,den2);

mulSpectrums(ffkernel,ffkernel,den1,0,true);

imHk=imH00.clone();

mux=Mat::zeros(imH00.size(),CV_32F);
muy=Mat::zeros(imH00.size(),CV_32F);

// FFT imH00 
    Mat fHktplanes[] = {Mat_<float>(imH00), Mat::zeros(imH00.size(), CV_32F)};
    Mat fHkt;
    merge(fHktplanes, 2, fHkt);
    dft(fHkt, fHkt,DFT_COMPLEX_OUTPUT);

std::cout<<"starting deconvolution"<<std::endl;
for (int j=0; j<4; j++)
{
    // Deconvolution 

    // Gradients 

    Mat ddx(1,2,CV_32F,Scalar(0));
    ddx.at<float>(0,0)=1;
    ddx.at<float>(0,1)=-1;
    filter2D(imHk,dHx,CV_32F,ddx);

    Mat ddy(2,1,CV_32F,Scalar(0));
    ddy.at<float>(0,0)=1;
    ddy.at<float>(1,0)=-1;
    filter2D(imHk,dHy,CV_32F,ddy);

    mux=Scalar((float)-0.5*L1/L2);
    add(mux,dHx,mux);

    muy=Scalar((float)-0.5*L1/L2);
    add(muy,dHy,muy);

    // FFT mux, muy
    Mat fmuxplanes[] = {Mat_<float>(mux), Mat::zeros(mux.size(), CV_32F)};
    Mat fmux;
    merge(fmuxplanes, 2, fmux);
    dft(fmux, fmux,DFT_COMPLEX_OUTPUT);

    Mat fmuyplanes[] = {Mat_<float>(muy), Mat::zeros(muy.size(), CV_32F)};
    Mat fmuy;
    merge(fmuyplanes, 2, fmuy);
    dft(fmuy, fmuy,DFT_COMPLEX_OUTPUT);

    Mat num1,num2,num3,num,den;

    // Spectrums multiplication, complex conjugate
    mulSpectrums(fHkt,ffkernel,num1,DFT_COMPLEX_OUTPUT,true);
    mulSpectrums(fmux,fdx,num2,DFT_COMPLEX_OUTPUT,true);
    mulSpectrums(fmuy,fdy,num3,DFT_COMPLEX_OUTPUT,true);

    add(num2,num3,num2);
    add(num1,L2*num2,num);
    add(den1,L2*den2,den);

    // Division in polar coordinates

    Mat auxnum[2];
    split(num,auxnum);
    Mat auxden[2];
    split(den,auxden);

    Mat numMag,numPhase;
    magnitude(auxnum[0],auxnum[1],numMag);
    phase(auxnum[0],auxnum[1],numPhase);

    Mat denMag,denPhase;
    magnitude(auxden[0],auxden[1],denMag);
    phase(auxden[0],auxden[1],denPhase);

    Mat division[2];
    divide(numMag,denMag,division[0]);
    division[1]=numPhase-denPhase;

    polarToCart(division[0],division[1],division[0],division[1]);
    Mat fHk;
    merge(division,2,fHk);

    Mat imHkaux;
    Mat planesfHk[2];
    dft(fHk, imHkaux, DFT_INVERSE+DFT_SCALE);
    split(imHkaux,planesfHk);
    imHk=planesfHk[0]; // imHk is the Real part
}
imHk.convertTo(imHk,CV_8U,255);
imshow( "Deblurred image", imHk); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:11:48.977

问题在于滤波器的傅里叶变换。我们需要在转换之前移动过滤器内核。这与 psf2otf 函数在 Matlab 中的作用相同。如果有人感兴趣，这个简单的代码应该执行不受居中影响的高斯核的 DFT（如 psf2otf）：

```
float sigma=1.0;
short int ksize=13; // always odd

Mat ker1D=getGaussianKernel(ksize,sigma,CV_32F); //1D gaussian kernel
fkernel.create(myImage.size(),CV_32F); //

// zero-padding
fkernel.setTo(Scalar::all(0));
temp=ker1D*ker1D.t(); // 2D gaussian kernel, (Gaussian filter is separable)

int r=(ksize-1)/2; //radius

// shifting

temp(Rect(r,r,r+1,r+1)).copyTo(fkernel(Rect(0,0,r+1,r+1))); // q1
temp(Rect(r,0,r+1,r)).copyTo(fkernel(Rect(0,fkernel.cols-r,r+1,r))); // q2
temp(Rect(0,r,r,r+1)).copyTo(fkernel(Rect(fkernel.rows-r,0,r,r+1))); // q3
temp(Rect(0,0,r,r)).copyTo(fkernel(Rect(fkernel.rows-r,fkernel.cols-r,r,r))); // q4
// DFT
Mat planes[] = {Mat_<float>(fkernel), Mat::zeros(fkernel.size(), CV_32F)};
Mat ffkernel;
merge(planes, 2, ffkernel);
dft(ffkernel, ffkernel,DFT_COMPLEX_OUTPUT); 
```

# c# - 为什么 ("abc"+char.MaxValue).CompareTo("abc")==0？

> ID：13471797
> 
> 赞同：5
> 
> 时间：2012-11-20T11:01:27.693
> 
> 标签：c#

我有一个排序的字符串数组。给定一个标识前缀的字符串，我执行两次二进制搜索以查找数组中包含以该前缀开头的单词的第一个和最后一个位置：

```
string [] words = {"aaa","abc","abcd","acd"};
string prefix = "abc";
int firstPosition = Array.BinarySearch<string>(words, prefix);
int lastPosition = Array.BinarySearch<string>(words, prefix + char.MaxValue);
if (firstPosition < 0)
    firstPosition = ~firstPosition;
if (lastPosition < 0)
    lastPosition = ~lastPosition; 
```

运行这段代码，我得到 firstPosition 和 lastPosition 都等于 1，而正确的答案是让 lastPosition 等于 3（即，指向第一个不匹配的单词）。BinarySearch 方法使用 CompareTo 方法来比较对象，我发现

```
("abc"+char.MaxValue).CompareTo("abc")==0 
```

这意味着这两个字符串被认为是相等的！如果我更改代码

```
int lastPosition = Array.BinarySearch<string>(words, prefix + "z"); 
```

我得到正确答案。此外，我发现

```
("abc"+char.MaxValue)==("abc") 
```

正确（就我的需要而言）返回 false。

你能帮我解释一下 CompareTo 方法的行为吗？

我想让 CompareTo 方法的行为类似于 ==，以便 BinarySearch 方法为 lastPosition 返回 3。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T11:15:00.597

`string.CompareTo()`进行当前文化比较。它在内部使用`StringComparer.CurrentCulture`，而字符串 equals-operator 进行文化不变比较。

例如，如果当前文化是“DE”，您将得到与“ss”和“ß”相同的结果：

```
Console.WriteLine("ss".CompareTo("ß")); // => 0
Console.WriteLine("ss" == "ß"); // => false 
```

你想要的是一个文化不变的比较，你可以使用`StringComparer.Ordinal`：

```
StringComparer.Ordinal.Compare("ss", "ß"); // => -108
StringComparer.Ordinal.Compare("abc"+char.MaxValue, "abc"); // => 65535 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-20T11:10:58.470

根据 MSDN，[`string.CompareTo`](http://msdn.microsoft.com/en-us/library/fkw3h78a.aspx)不应该用于检查两个字符串是否相等：

> CompareTo 方法主要设计用于排序或字母排序操作。当方法调用的主要目的是确定两个字符串是否等价时，不应使用它。要确定两个字符串是否等价，请调用 Equals 方法。

要获得您想要的行为，您可以使用接受 的重载`IComparer<T>`：

```
int lastPosition = Array.BinarySearch<string>(words, prefix + char.MaxValue, 
                                              StringComparer.Ordinal); 
```

这将返回`-4`，`lastPosition`因为数组中没有带有该前缀的字符串。我不明白你为什么期望`3`在那种情况下......

# extjs - ExtJS PropertyGrid 高频更新

> ID：13471801
> 
> 赞同：2
> 
> 时间：2012-11-20T11:01:47.040
> 
> 标签：extjs, extjs4

是否有一种每秒多次更新 ExtJS 4 PropertyGrid 中显示的值的好方法？

调用`setSource`有效，但它会触发组件的完全重新渲染，影响组件布局并使滚动条等内容无响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:29:29.363

我必须说我从来没有使用过propertyGrids，但是如果频繁更改，我会直接写入dom，并确保（以及每次写入或触发器）没有事件被冒泡到ExtJS。

无论如何，我很确定对绑定商店的任何更改也会影响价值。`setSource`只是一种应用数据的方法，这些数据也插入到存储中。但这总是会改变一切，我猜会覆盖任何现有数据（最后一个我不确定）

但您也可以使用**[setProperty](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.property.Grid-method-setProperty)**更改单个属性。愿那一个就够了。值得一试。

# jquery - jQuery .hover 鼠标输入不起作用

> ID：13471803
> 
> 赞同：0
> 
> 时间：2012-11-20T11:01:59.650
> 
> 标签：jquery

我编写了以下功能，该功能部分有效。鼠标进入悬停动画不起作用，但鼠标离开动画起作用。据我从文档中可以看出，它是正确编写的，但我看不出有什么问题。有任何想法吗？:)

```
function hoveranim (){

        $(this).hover(function() {

             $(this).animate({left: '+=260px'}, '6000');

        },

        function() {

            $(this).animate({left: '-=260px'}, '6000');

             }
         )};

        $('div#feedback-form-container').on('hover', hoveranim); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:09:34.543

您正在`hover`事件中调用您的函数。这意味着一旦`hoveranim()`函数生效，`hover`事件已经过去了，这意味着它不会起作用，而 mouseout*会*。

我建议你将它重写为一个扩展 jQuery 的函数（它也允许链接，可能会派上用场）

```
jQuery.fn.hoveranim = function () {
    $(this).hover(function() {
         $(this).animate({left: '+=260px'}, '6000');

    },
    function() {
        $(this).animate({left: '-=260px'}, '6000');
         }
     )}; 
```

然后像这样绑定到它，在文档就绪事件（' `$(document).ready`）中

```
$('div#feedback-form-container').hoveranim(); 
```

请参阅此[Fiddle](http://jsfiddle.net/Ledpq/)以获取演示。

PS：请注意，当您为**移动**元素设置动画时，当您将元素从光标下方移开时，您会自动触发 mouseout 事件。请参阅我的小提琴以获得（可能不需要的）效果。

为了避免这种情况，我建议引入第二个元素，该元素将保持静态，最好是不可见的（尽管它仍然应该是块元素）并且位于要移动的元素**上方。**然后重写函数以接受可选`elem`参数，指定悬停该元素时要移动的元素。

我已经在[另一个 Fiddle](http://jsfiddle.net/aUuWj/)中解决了这个问题（[这里有一个不可见的 hover_check](http://jsfiddle.net/wz8Cz/)）

# css - 我不明白为什么在 phplist 中看不到 css 和图像

> ID：13471806
> 
> 赞同：-1
> 
> 时间：2012-11-20T11:02:06.500
> 
> 标签：css, image, loading, phplist

我已经在我网站的 public_html 文件夹中的文件夹中安装了 phplist

```
http://www.parcuri.ro/news/ 
```

它正在工作，但图像和 css 没有“使用”

配置文件中的路径是

```
$pageroot = '/news';
$adminpages = '/news/admin'; 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:04:54.460

当我尝试访问您的[css](http://www.parcuri.ro/news/styles/phplist.css)或[图像](http://www.parcuri.ro/news/images/masthead.png)时，我会被重定向到您的主页。我假设这是您的 404 页面，因此 CSS 和图像不“存在”。这意味着您的文件路径错误，或者您没有将 css/图像保存在正确的区域。

也许您的图像/css 存储在`http://www.parcuri.ro/styles`而不是`http://www.parcuri.ro/news/styles`.

# php - php preg 匹配 a-zA-Z 并且两个或多个单词之间只有一个空格

> ID：13471808
> 
> 赞同：1
> 
> 时间：2012-11-20T11:02:14.600
> 
> 标签：php, preg-replace, preg-match

对于我的 PHP 脚本，我有以下代码：

```
if (!preg_match("/[^A-Za-z]/", $usersurname))
   $usersurname_valid = 1; 
```

这一直有效，直到我意识到一个姓氏可以是两个或更多的词...... *doh*。

如果我想在两个世界之间允许 1 个空间，任何人都可以告诉我如何编写此代码？例如：

Jan Klaas 现在错了，应该允许 Jan Klaas 和 Jan Klaas Martijn 等等。

更好的是 preg 替换，用 1 替换两个或多个空格，所以当你写：
Jan(space)(space)Klaas 或 Jan(space)(space)(space)(space)Klaas 时，它会返回 Jan （空格）克拉斯。

我搜索了一段时间，但不知何故我无法让这个空间匹配工作..

PS：当我得到这个工作时，我当然也会将这个应用于中间名和姓氏。

============================================

**编辑：**在你帮助我之后，我将我的代码重新编写为：

```
// validate usersurname
$usersurname = preg_replace("/\s{2,}/"," ", $usersurname);
if (!preg_match("/^[A-Za-z]+(\s[A-Za-z]+)*$/",$usersurname))
    $usersurname_valid = 1; 
// validate usermidname
$usermidname = preg_replace("/\s{2,}/"," ", $usermidname);
if (!preg_match("/^[A-Za-z]+(\s[A-Za-z]+)*$/",$usermidname))
    $usermidname_valid = 1;
// validate userforename
$userforename = preg_replace("/\s{2,}/"," ", $userforename);
if (!preg_match("/^[A-Za-z]+(\s[A-Za-z]+)*$/",$userforename))
    $userforename_valid = 1; 
```

和错误通知

```
elseif ($usersurname_valid !=1)
    echo ("<p id='notification'>Only alphabetic character are allowed for the last name. $usersurname $usermidname $userforename</p>");
// usermidname character validation
elseif ($usermidname_valid !=1)
    echo ("<p id='notification'>Only alphabetic character are allowed for the middle name. $usersurname $usermidname $userforename</p>");
// userforename character validation
elseif ($userforename_valid !=1)
    echo ("<p id='notification'>Only alphabetic character are allowed for the (EDIT) first name. $usersurname $usermidname $userforename</p>"); 
```

替换空格效果很好，我需要这个 preg_match 来检查 A-Za-z + 空格。我认为在这种情况下，它是否匹配超过 1 个空格并不重要，因为它无论如何都会被替换，对吧？

**编辑：**

我的情况的解决方案：

```
$usersurname = preg_replace("/\s{2,}/"," ", $usersurname);
if (!preg_match("/[^A-Za-z ]/", $usersurname)) 
```

这完成了工作。感谢您的帮助，J0HN

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:07:40.997

好吧，解决您想到的问题：

```
if (!preg_match("/^[A-Za-z]+(\s[A-Za-z]+)*$/",$usersurname)) { ... } 
```

但是，好吧，这只是解决方案的一部分，它不是防弹的。查看处理名称时[的常见错误列表。](http://www.kalzumeus.com/2010/06/17/falsehoods-programmers-believe-about-names/)

因此，您最好重新考虑您的验证方法。

将多个空格替换为单独的指令更容易实现，例如

```
$processed_usersurname = preg_replace("/\s{2,}/"," ", $usersurname); 
```

这将匹配并将任何两个或多个后续空白字符（空格、制表符、换行符和回车符）替换为单个空格

# excel - Excel VBA 输入框 - 选择范围（类型 8）但不是固定范围，即 A1 不是 $A$1

> ID：13471809
> 
> 赞同：5
> 
> 时间：2012-11-20T11:02:17.780
> 
> 标签：excel, vba, lookup, inputbox

我目前在我的`VBA`代码中有以下行`Inputbox`：

`Set myValues = Application.InputBox("Please select on the spreadsheet the first cell in the column with the values that you are looking for:", Type:=8)`

但是，当我选择单元格时，它会自动输入例如`$A$1`. 可以更改此设置，而无需用户手动删除 $，以便`Inputbox`自动将单元格引用设为`A1`？

它是自动`VLookup`宏的一部分，除了`VLookup`在整个列中固定值之外，它可以完美地工作。

提前致谢。

**更新 - 这是完整的代码：**

```
Dim FirstRow As Long
Dim FinalRow As Long
Dim myValues As Range
Dim myResults As Range
Dim myCount As Integer

Sub VlookupMacroNew()  

Set myValues = Application.InputBox("Please select on the spreadsheet the first cell in the column with the values that you are looking for:", Default:=Range("A1").Address(0, 0), Type:=8)

Set myResults = Application.InputBox("Please select on the spreadsheet the first cell where you want your lookup results to start:", Type:=8)

myCount = Application.InputBox("Please enter the column number of the destination range:", Type:=1)

On Error Resume Next
myResults.EntireColumn.Insert Shift:=xlToRight
Set myResults = myResults.Offset(, -1)
FirstRow = myValues.Row
FinalRow = Cells(65536, myValues.Column).End(xlUp).Row

Range(myResults, myResults.Offset(FinalRow - FirstRow)).Formula = _
"=VLOOKUP(" & Cells(FirstRow, myValues.Column).Address & ", " & _
"'S:\Payroll\CONTROL SECTION\[Latest Data.xls]Sheet1'!$A$1:$B$100" & ", " & myCount & ", False)" 
```

myValues 将从单元格 A2 开始，但是当我们使用动态列表时，我需要将查找值更改为 A3、A4、A5 等，因为公式被复制到列表中。通过使用 $A$2 的输入框，查找公式仅查看该单元格引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:20:16.553

您的问题不在于 InputBox，而在于`Address()`方法的行为。

默认情况下，`Address()`不带参数返回绝对地址。

```
Cells(FirstRow, myValues.Column).Address(False,False) 
```

将返回“非固定”范围地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T18:12:16.093

正如蒂姆所说，您的问题不在于 InputBox。相反，当您一次为整个范围设置公式时，它会`FirstRow`用于每个单元格的公式。理想情况下，您将`.FormulaR1C1`用于设置公式。这将允许您一次性使公式相对。

下面的解决方案只是修改您的代码以在第一个单元格中放置一个非相对地址，然后将其余单元格中的公式设置为等于第一个单元格中的公式。当您分配这样的公式时，它会使它们相对：

```
Sub VlookupMacroNew()

Set myValues = Application.InputBox("Please select on the spreadsheet the first cell in the column with the values that you are looking for:", Default:=Range("A1").Address(0, 0), Type:=8)
Set myResults = Application.InputBox("Please select on the spreadsheet the first cell where you want your lookup results to start:", Type:=8)
myCount = Application.InputBox("Please enter the column number of the destination range:", Type:=1)

On Error Resume Next
myResults.EntireColumn.Insert Shift:=xlToRight
Set myResults = myResults.Offset(, -1)
FirstRow = myValues.Row
FinalRow = Cells(65536, myValues.Column).End(xlUp).Row

Range(myResults, myResults.Offset(FinalRow - FirstRow)).Cells(1).Formula = _
"=VLOOKUP(" & Cells(FirstRow, myValues.Column).Address(False, False) & ", " & _
"'S:\Payroll\CONTROL SECTION\[Latest Data.xls]Sheet1'!$A$1:$B$100" & ", " & myCount & ", False)"
Range(myResults, myResults.Offset(FinalRow - FirstRow)).Formula = _
Range(myResults, myResults.Offset(FinalRow - FirstRow)).Cells(1).Formula
End Sub 
```

# jquery - 使用 JQuery 查找图像类并附加其来源

> ID：13471813
> 
> 赞同：0
> 
> 时间：2012-11-20T11:02:29.167
> 
> 标签：jquery

我有很多图像标签，如下所示

```
<img class="vCSS_img_alternate_product_photo" id="alternate_product_photo_6" style="border-color:#666666;" src="/v/vspfiles/photos/ChiWahGuitar-6S.jpg" border="1" onmouseover='javascript:change_product_photo(6);return false;'> 
```

使用 Jquery 我想做的是找到类名为**vCSS_img_alternate_product_photo**的所有 Source (SRC tag )，并将 SRC 附加到[http://www.mydomain.com](http://www.mydomain.com)

所以在上面的例子中，图像 src 将是[http://www.mydomain.com/v/vspfiles/photos/ChiWahGuitar-6S.jpg](http://www.mydomain.com/v/vspfiles/photos/ChiWahGuitar-6S.jpg)

或者它会是

```
<img class="vCSS_img_alternate_product_photo" id="alternate_product_photo_6" style="border-color:#666666;" src="http://www.mydomain.com/v/vspfiles/photos/ChiWahGuitar-6S.jpg" border="1" onmouseover='javascript:change_product_photo(6);return false;'> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:05:30.893

像这样？

```
$('.vCSS_img_alternate_product_photo').each(function() {
    $(this).attr('src', 'http://www.mydomain.com' + $(this).attr('src'));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:05:51.980

```
$(document).ready(function(){
    $(".vCSS_img_alternate_product_photo").each(function(){
        var current_src = $(this).attr("src");
        var new_src = "http://www.mydomain.com/"+current_src;

        $(this).attr("src",new_src);
    });
}) 
```

# java - 有没有可以为空的选项？

> ID：13471815
> 
> 赞同：2
> 
> 时间：2012-11-20T11:02:35.627
> 
> 标签：java

> **可能的重复：**
> [“this”在 Java 中可以为空吗？](https://stackoverflow.com/questions/3789528/can-this-ever-be-null-in-java)

我有这个代码的线程：

```
 @Override
  public void run() {
    try {
      process();
    } finally {
      Factory.close(this);
    }
  } 
```

有没有`this`可以的选择`null`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T11:03:41.767

```
is there option that this can be null 
```

**号** `this`参考不能`null`。它总是指向当前执行该代码的线程实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:05:14.443

没有什么至少是错的。这在 JAVA 中永远不会为空。可能是您的问题在其他地方。尝试提交更多代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T11:05:27.720

`this`不能`null`在 Java 中的任何地方，`null`意味着它不指向任何对象，（它只是一个垃圾*变量*）。`this`意味着，**在您现在正在实施的对象中**，它应该指向自身。

# google-chrome-extension - Chrome 扩展徽章 - 文本颜色

> ID：13471816
> 
> 赞同：6
> 
> 时间：2012-11-20T11:02:39.520
> 
> 标签：google-chrome-extension

关于 Chrome 徽章/浏览器操作 API 的快速问题。有没有设置徽章文字颜色的方法？（就像你可以用背面颜色一样）。我确定我记得在 Internet 上的某处看到了对诸如 SetBadgeTextColor() 之类的方法的引用（不知道在哪里，请注意）。

编辑：[Chromium Wiki - 浏览器操作提案](https://code.google.com/p/chromium/wiki/BrowserActions)

上面的链接是我看到设置徽章文本颜色的方法的地方。这个提议曾经实施过吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T21:25:19.130

您不能直接更改文本颜色。

您*可以*做的是在[画布](https://developer.mozilla.org/en/docs/Canvas_tutorial)上绘制基础图像，然后使用您想要的颜色绘制文本，最后用于[`chrome.browserAction.setIcon`](http://developer.chrome.com/extensions/browserAction.html#method-setIcon)更新徽章。

# jquery - 使用 jquery 使用一个提交按钮验证两个表单

> ID：13471817
> 
> 赞同：0
> 
> 时间：2012-11-20T11:02:41.937
> 
> 标签：jquery, forms, jquery-validate

我在 1 页中有 2 个表格`form.php`。在第一种形式中，我有 1 个输入字段和 1 个文本字段。第二个表单我有一个上传图片按钮，我用它来上传而不重定向，所以`onchange`我提交了那个表单。

但是，如果用户没有选择任何图像，则最终表单不应提交。

这是我的代码：

```
$("#storyform").validate({
  rules: {
    story: {
      required: true,
      maxlength: 250
    },
    place: "required"

  },
  messages: {
    story: {
      required: "Please write your story",
      maxlength: $.format("At Max {0} characters !")
    },

    place: "Please write your place"

  },
  errorElement: "span",
  wrapper: "span" // a wrapper around the error message

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:31:11.913

`.validate()`分别在每个表单上初始化。然后只需测试以查看第一个表单在第二个表单中使用是否`.valid()`有效`submitHandler`。

```
$(document).ready(function(){

    $("#firstForm").validate({  // initialize form validation on form 1
        // rules & other options
    });

    $("#secondForm").validate({ // initialize form validation on form 2
        // rules & other options,

        errorPlacement: function(error, element) {
            $("#firstForm").valid();  // forces test on form 1 when form 2 has errors
            error.insertAfter(element); // default error placement
        },
        submitHandler: function(form) {
            if ($("#firstForm").valid()) {  // test to see if form 1 is valid before submitting form 2
               form.submit;
            }
            return false;
        }
    });

}); 
```

`$("#firstForm").valid()`上面在两个位置使用了以下两种情况：

1) 表格#2**有效**；`submitHandler:`所以我们必须在提交表单的条件下测试表单 #1 的有效性。

2) 表格#2**无效**；所以我们必须在`errorPlacement:`. 由于我们使用的是`errorPlacement:`，所以我们必须指定它，否则不会出现错误。在示例中，我只是使用了默认的错误放置代码。

* * *

**编辑**：

为了让第二个表单与第一个表单同时显示错误，还要添加`.valid()`到第二个表单的`errorPlacement:`选项，当表单2有错误时强制对表单1进行测试。请参阅上面的编辑代码。

**工作演示：http: [//jsfiddle.net/eLsDs/1/](http://jsfiddle.net/eLsDs/1/)**

* * *

**编辑 2**：

我看不到您的 HTML，因为您没有包含它，但我修改了我的演示以包含您的 OP 中的代码。

**使用 OP 的代码演示：http: [//jsfiddle.net/eLsDs/2/](http://jsfiddle.net/eLsDs/2/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T15:20:28.150

你必须有你的理由使用两个表格，所以调用这个来检查另一个表格是否有效

```
$('#otherform').validate().valid() 
```

# objective-c - 在选择器视图上未按下按钮

> ID：13471818
> 
> 赞同：0
> 
> 时间：2012-11-20T11:02:52.297
> 
> 标签：objective-c, ios, uibutton, uipickerview

我在选择器的委托方法中添加一个按钮作为行方法的视图。但是在 iOS4.0 中按钮没有被按下，它在 iOS5.0 及更高版本上工作正常。

```
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view 
{ 
NSArray *__autoreleasing views = [[NSBundle mainBundle] loadNibNamed:@"PickerRowView" owner:self options:nil]; 
self.pickerDataView = [views lastObject]; 
self.labelBtn = (UIButton *) [pickerDataView viewWithTag:101]; 
[self.labelBtn addTarget:self action:@selector(labelBtnPressed:)forControlEvents:UIControlEventTouchUpInside]; 
return pickerDataView;

} 
```

此代码在 iOS5 及更高版本上运行良好，但在 iOS4.0 上运行良好。谁能告诉它为什么会发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:31:29.040

只需检查没有其他视图与您的按钮视图重叠，这是您面临的唯一问题。因此，请尝试找出重叠的透明视图，如果可能，请将代码发送给我们，以便我们为您提供最好的服务。

# c# - MVVMCross - BaseActivity 和 OnViewModelSet()

> ID：13471819
> 
> 赞同：2
> 
> 时间：2012-11-20T11:02:57.187
> 
> 标签：c#, android, android-activity, xamarin.android, mvvmcross

我有一个小问题，我无法解决..

好吧，我建立了一个**BaseActivity.cs**类：

```
public class BaseActivity<T> : MvxBindingTabActivityView<T> where T : class, IMvxViewModel
{
    protected override void OnViewModelSet()
    { }

    public override bool OnCreateOptionsMenu(IMenu menu)
    {
        // GroupId, ItemId, OrderId
        menu.Add(0, 0, 0, "Einstellungen").SetIcon(Android.Resource.Drawable.IcMenuManage);
        menu.Add(0, 1, 1, "Info").SetIcon(Android.Resource.Drawable.IcMenuInfoDetails);
        return true;
    }

    public override bool OnOptionsItemSelected(IMenuItem item)
    {
        var id = item.ItemId + 1; // (Id is zero-based :)
        if (id == 1) // First Item
        {
            StartActivity(typeof(SettingsShowActivity));
        }
        else if (id == 2) // Second Item
        {
            Android.App.AlertDialog.Builder builder = new AlertDialog.Builder(this);
            AlertDialog ad = builder.Create();
            ad.SetTitle("Information");
            ad.SetIcon(Android.Resource.Drawable.IcDialogAlert);
            ad.SetMessage("Version: 0.1");
            ad.SetButton("OK", (s, e) => { Console.WriteLine("OK Button clicked, alert dismissed"); });
            ad.Show();
        }
        return true;
    }
} 
```

这个类的目标是，我可以把我将在所有其他活动中使用的东西放入其中，就像这里的 OptionsMenu，或多或少在所有活动中一样。

然后是从 BaseActivity.cs 继承的另外两个活动：

**MainScreenActivity.cs**：_

```
[Activity]
public class MainScreenActivity : BaseActivity<MainScreenViewModel>
{
    protected override void OnViewModelSet()
    {
        SetContentView(Resource.Layout.MainScreenLayout);

        TabHost.TabSpec spec;    
        Intent intent;

        intent = base.CreateIntentFor<AddressesSearchViewModel>();
        intent.AddFlags(ActivityFlags.NewTask);

        spec = TabHost.NewTabSpec("adressen");
        spec.SetIndicator("Adressen");
        spec.SetContent(intent);
        TabHost.AddTab(spec);

        intent = base.CreateIntentFor<ContactsSearchViewModel>();
        intent.AddFlags(ActivityFlags.NewTask);

        spec = TabHost.NewTabSpec("kontaktpersonen");
        spec.SetIndicator("Kontaktpersonen");
        spec.SetContent(intent);
        TabHost.AddTab(spec);
    }

    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);
    }
} 
```

和**LoginActivity.cs**：

```
[Activity]
public class LoginActivity : BaseActivity<LoginViewModel>
{
    protected override void OnResume()
    {
        base.OnResume();
        App.IsLoggedIn = false;
    }

    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);
    }

    protected override void OnViewModelSet()
    {
        SetContentView(Resource.Layout.Login);
        //App.MessageHub.Subscribe<ErrorMessage>((m) => { ErrorMessageAlert(m.Message, m.Title); });
    }
} 
```

它编译得很好，但是当我启动它时应用程序崩溃了，这就是我得到的错误消息：`Your content must have a TabHost whose id attribute is 'android.R.id.tabhost`'。我建议，这是因为我“需要”在**BaseActivity.cs**中实现抽象接口：

```
protected override void OnViewModelSet()
{ } 
```

所以也许他走进了“假” `OnViewModelSet()`，（在空的而不是正在构建 Tabhost 的那个）.. 但我实际上不确定.. 顺便说一句，这来自：`MvxBindingTabActivityView`..

嗯，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:17:05.220

我认为这是一个非常简单的问题......

`MvxBindingTabActivityView`继承自`TabActivity`（参见[源代码](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Droid/Views/MvxTabActivityView.cs)），正是这个类需要内容 -`Your content must have a TabHost whose id attribute is 'android.R.id.tabhost'`

如果您不想使用 Tabs，则只需继承自`MvxBindingActivityView`- 这是会议示例所做的 - [https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20CirriousConference/Cirrious.Conference .UI.Droid/Views/BaseView.cs](https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20CirriousConference/Cirrious.Conference.UI.Droid/Views/BaseView.cs)

如果您的一项活动需要执行制表符，而另一项则不需要，那么他们需要使用不同的继承树进行继承。如果您想在两个基类之间共享代码，那么在 C# 中执行此操作的最佳方法似乎是使用扩展方法 - 例如，请参阅会议示例中[BaseViewExtensionMethods.cs在](https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20CirriousConference/Cirrious.Conference.UI.Droid/Views/BaseViewExtensionMethods.cs)[BaseView.cs](https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20CirriousConference/Cirrious.Conference.UI.Droid/Views/BaseView.cs)、[BaseTabbedView.cs](https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20CirriousConference/Cirrious.Conference.UI.Droid/Views/BaseTabbedView.cs)和[BaseMapView.cs](https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20CirriousConference/Cirrious.Conference.UI.Droid/Views/BaseMapView.cs)之间共享.

# jquery - 获取所有禁用的复选框

> ID：13471820
> 
> 赞同：2
> 
> 时间：2012-11-20T11:02:57.883
> 
> 标签：jquery, jquery-selectors

我希望能够检索所有禁用的复选框并将样式/背景添加到包含 TD 表单元格。我可以选择所有复选框并更改背景，如下所示：

```
$(':checkbox').closest("td").css('background-color', '#FF0000'); 
```

我只需要更新它，使其仅适用于禁用的项目。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T11:07:42.817

您可以使用`:disabled`选择器：

```
$('input[type=checkbox]:disabled').closest("td") // .addClass('disabled'); 
```

请注意，`:checkbox`选择器已被弃用，替代方案是属性选择器。

您还可以使用`has`方法：

```
$('td').has('input[type=checkbox]:disabled').css('background-color', '#FF0000') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T11:04:55.850

除非我误解了`disabled`，否则我认为您需要：

`$(':checkbox:not(:checked)').closest("td").css('background-color', '#FF0000');`

如果你不能内联，你总是可以迭代：

```
$(':checkbox').each(function() {
  var cb = $(this);
  if(cb.is(':disabled')) {
    cb.closest("td").css('background-color', '#FF0000');
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T11:07:06.153

尝试这个 ：

```
$(':checkbox:disabled').closest("td").css('background-color', '#FF0000'); 
```

# android - 为什么不直接将android连接到数据库？

> ID：13471822
> 
> 赞同：8
> 
> 时间：2012-11-20T11:03:06.420
> 
> 标签：android, mysql, sql, sql-server, security

我看到很多人试图直接在 SQL Server 或 MySql 等数据库中连接 Android 设备，但答案总是相同的：使用 Web 服务。为什么不直接将 Android 设备与数据库连接？我在我的 Android 应用程序中使用本地网络。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-20T11:06:05.713

有很多原因。

1.  安全性- 如果用户有直接访问权限，他们可以从您的数据库中获取任何内容。另外，他们将有一个密码进入您的数据库。因此，如果您使用的 SQL 服务器有缺陷，那么他们可以利用它。此外，如果您的权限设置错误，可能会擦除您的数据库。
2.  速度 - 如果用户经常使用大型查询，那么它可能会快速而不必要地使您的系统陷入困境。如果您通过 Web 界面，您可以限制它。
3.  可访问性——几乎所有东西都支持 Web 查询。它需要特殊的客户端直接访问 SQL 数据库。

但是，如果您完全信任您的用户，拥有正确的库/驱动程序，那么您可以允许直接查询，甚至可能会更快一些。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T11:09:46.913

如果您的应用程序直接连接到数据库服务器，您必须硬编码用户名/密码，这是非常不安全的。使用某些工具，攻击者可以反编译您的 apk 并以这种方式访问​​用户名/密码，并且可以在不使用您的应用程序的情况下通过读（+写）访问权限连接到您的数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T11:08:18.393

原因是连接

你不确定你需要多少时间来保持这个连接，如果它是稳定的，如果你不会失去它

其次，Web 服务经过优化，可以检索信息并通过标准提供精美的服务。您还可以缓存信息以节省数据库

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-08T16:50:48.233

**不直接访问数据库的另一个原因**

**问题**如果您更改了数据库架构。你有两个解决方案。

1-在直接访问中，您需要更新每个客户端应用程序
2-使用服务，您只需要升级服务。

# php - 超时后重新启用提交按钮

> ID：13471831
> 
> 赞同：0
> 
> 时间：2012-11-20T11:03:42.640
> 
> 标签：php, javascript, submit

submit_pdf 按钮将信息保存到数据库中并避免多次单击，我最初在单击后禁用了提交按钮，但是现在我想在超时 10 秒后重新启用该按钮。直到提交按钮被禁用的部分工作正常，但如果我尝试添加 10 秒的延迟，它似乎不起作用。如果你能帮助我解决这个问题，那将非常有帮助。

```
 echo '  <script language="JavaScript" type="text/javascript">
        //<![CDATA[
        window.open(\'./index_pdf.php?'.$query_string.'\',\'Warehouse_ST\',\'location=no,menubar=no,resizable=yes,scrollbars=yes,status=yes,toolbar=no\');
        id_form.submit_pdf.disabled=true;
        window.alert("Data is stored in the database, Please do no click on Submit again without changing any information");

        window.addEvent(\'domready''\',function() 
        {
        var subber = $_REQUEST["submit_pdf"];
        subber.addEvent( \'click'  ,function() ' 
        {
         subber.set( \'value','Submitting...''\' ).disabled = true;
        (function() { subber.disabled = false; subber.set(\'value','submit_pdf'\'); }).delay(10000); // how much time?  10 seconds
        });
        });

        //]]>
        </script>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:09:05.900

尝试使用[setTimeout()](http://www.w3schools.com/js/js_timing.asp)

定义一个函数来启用按钮，然后设置一个 setTimeout()：

```
function enableButton(){
    $('#myButton').attr("disabled", false);
}

setTimeout(enableButton, 10000); 
```

确保将函数名称放在不带引号且不带“（）”的位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:01:32.053

我建议编写 JS 代码（aleation 的代码是正确的）和这个 PHP 代码。

PHP（将时间存储在会话变量中）：

```
session_start(); //At the beginning of the PHP file

define("TIMEOUT", 10); //10 sec

//Check timeout
if (isset($_SESSION['expire'])) {
    if ($_SESSION['expire']-time()>TIMEOUT) {
        unset($_SESSION['expire']);
    }   
}

//Allow to do submit after 10 sec
if (!isset($_SESSION['expire'])) {
    $_SESSION['expire']=time();

    //Your submit code
} 
```

这是因为用户可以操作 JavaScript 和 HTTP 消息，但他/她不能操作 php 代码。

# c# - 如何在不安装 Visual Studio 2010 的情况下使用 MSTest.ese 运行编码的 UI 测试

> ID：13471835
> 
> 赞同：4
> 
> 时间：2012-11-20T11:04:03.897
> 
> 标签：c#, visual-studio-2010, testing, mstest, coded-ui-tests

我正在使用编码的 UI 自动化。问题是自定义测试用例执行。我不能使用 TFS 或 Lab 代理或任何其他工具。测试组件 (DLL) 通过使用 C# 在装有 Win7 的 64 位计算机上开发的自定义 UI 执行。我现在可以通过以下代码运行测试用例：

```
string str = "C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\Common7\\IDE\\MSTest.exe"; 
        ProcessStartInfo startInfo = new ProcessStartInfo(str);
        startInfo.Arguments = " /testcontainer:TestProject1.dll";
        Process.Start(startInfo); 
```

但是当我想将此应用程序安装到另一台机器上时，我需要安装 VS2010。这是我不想要的。我在互联网上浏览了几个文档，但没有一个有清晰的图片。如果有人可以帮助我解决问题。如何使它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-03T11:30:23.290

我正在使用 Visual Studio Agents 2012 在没有安装 Visual Studio 的情况下执行编码的 UI 测试，它对我来说很好。您可以通过 bat 文件指定测试容器、测试方法、结果文件名甚至测试设置文件，并在测试代理中调用 MStest.exe。请参考此 [链接](https://stackoverflow.com/questions/13482796/executing-coded-ui-test-from-a-standalone-application/19220990#19220990)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:22:50.873

下载并安装[Visual Studio 代理 2010](http://www.microsoft.com/en-us/download/details.aspx?id=1334)。这也将安装`MSTest`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-26T15:00:21.263

我已经完成了你的要求。见下文

```
public void test()
    {
        string testcase = "/testcontainer:\"D:\\testcase\\s\\CodedUITest.dll\"";
        string Path = "C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\Common7\\IDE\\mstest.exe";

        Process myProcess = new Process();
        ProcessStartInfo myProcessStartInfo = new ProcessStartInfo(Path, testcase);
        myProcessStartInfo.UseShellExecute = false;
        try
        {
            myProcess.StartInfo = myProcessStartInfo;
            myProcess.Start();
        }
        catch (Exception ex)
        {

            MessageBox.Show(ex.Message);
        }
    } 
```

# javascript - 如何从html字符串中获取头部和身体标签作为字符串？

> ID：13471840
> 
> 赞同：2
> 
> 时间：2012-11-20T11:04:31.750
> 
> 标签：javascript, jquery, regex

嘿，我有一个 html 字符串，我无法从中获取标签。

我尝试了很多东西，这里有一些：

```
var head = $("head",$(htmlString)).html();
var body = $("body",$(htmlString)).html();
var head = $("head",htmlString).html();
var body = $("body",htmlString).html();
var head = $("head",$(htmlString).html()).html();
var body = $("body",$(htmlString).html()).html();
var head = htmlString.match(/<head[^>]*>([^<]+)<\/head>/);
var body = htmlString.match(/<body[^>]*>([^<]+)<\/body>/);
var head = jQuery('<div/>').append(htmlString).find('head').html();
var body = jQuery('<div/>').append(htmlString).find('body').html(); 
```

除此之外的任何其他尝试。当我尝试将其记录到控制台时，所有这些都返回“未定义”或“”或 jquery 对象。

谁能告诉我如何将身体和头部标签作为字符串？

**首选 jQuery/JS 而不是正则表达式**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-20T11:36:17.653

**试试下面的代码：**

```
var head = htmlString.match(/<head[^>]*>[\s\S]*<\/head>/gi);
var body = htmlString.match(/<body[^>]*>[\s\S]*<\/body>/gi); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-20T11:17:35.787

由于您的 HTML 格式良好，您可以创建一个文档并从中选择节点：

```
var doc = (new DOMParser()).parseFromString(htmlstring,"text/html");
console.log(doc.head.outerHTML);
console.log(doc.body.outerHTML); 
```

这是一个演示：http: [//jsfiddle.net/X3Uq2/](http://jsfiddle.net/X3Uq2/)

在 Chrome 中，您不能使用`"text/html"`内容类型，因此您必须制作 XML 文档并使用`getElementsByTagName`：

```
var s = new XMLSerializer();
var doc = (new DOMParser()).parseFromString(data,"text/xml");
console.log(s.serializeToString(doc.getElementsByTagName("head")[0]));
console.log(s.serializeToString(doc.getElementsByTagName("body")[0])); 
```

[http://jsfiddle.net/X3Uq2/2/](http://jsfiddle.net/X3Uq2/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-01T14:45:19.427

您可以通过这种方式使用 javascript [slice](https://stackoverflow.com/questions/2243824/what-is-the-difference-between-string-slice-and-string-substring)方法：

```
var html = '<!DOCTYPE html>'+
'<html>'+
  '<head>' +
    '<meta name="viewport" content="width=device-width" /> '+
    '<title></title>' +
  '</head>' +
  '<body>Some Text!</body>' +
'</html>'
var bEnd, bStart;
bStart = html.indexOf("<body");
bEnd = html.indexOf("</body");
var body = html.slice(bStart, bEnd);
console.log(body);
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T11:21:26.827

可能这可以帮助你

```
var head = jQuery('<div/>').append(htmlString).find('head').html();

var body = jQuery('<div/>').append(htmlString).find('body').html(); 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-11-20T11:15:44.107

这真的很简单：

> jQuery: $(head)
> 原生 js: document.head

如果您想获取此标签的 html：

> 在 JQuery 中： $(head).html();
> 原生js：document.head.innerHtml

您可以在这里找到很好的 JQuery 参考：http: [//visualjquery.com](http://visualjquery.com)

# .net - JSON序列化 - 删除空键

> ID：13471841
> 
> 赞同：8
> 
> 时间：2012-11-20T11:04:33.203
> 
> 标签：.net, json, serialization, asp.net-web-api

我正在使用 .Net Web API 技术创建一个 HTTP 服务，我创建了一些 DTO 类，当只需要某个数据子集时，我计划只用该数据填充 DTO 以最小化数据量转移。

有没有办法让 JSON 序列化器忽略那些为空的数据成员？我意识到有 [JsonIgnore] 和 [ScriptIgnore] 属性将忽略特定成员，但我只想在它们为空或为空时忽略它们。

[编辑]

感谢下面的LB

我将以下内容添加到 WebApiConfig.cs 以在 Web API 中启用此功能：

```
var json = GlobalConfiguration.Configuration.Formatters.JsonFormatter;
json.SerializerSettings.NullValueHandling = Newtonsoft.Json.NullValueHandling.Ignore; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-20T11:24:17.117

[Json.Net 对此](http://json.codeplex.com/)有一个设置

```
var str = JsonConvert.SerializeObject(obj, 
    new JsonSerializerSettings() { NullValueHandling = NullValueHandling.Ignore }); 
```

# javascript - Javascript 正则表达式匹配失败

> ID：13471842
> 
> 赞同：0
> 
> 时间：2012-11-20T11:04:43.733
> 
> 标签：javascript, regex, match

有人可以解释为什么这不起作用吗？（我正在使用 Chrome 开发者控制台）

```
pattern  
-> "/Xmp\.MP\.RegionInfo\/MPRI:Regions/"
key
-> "Xmp.MP.RegionInfo/MPRI:Regions[1]"
key.search(pattern)
-> -1
key.search(/Xmp\.MP\.RegionInfo\/MPRI:Regions/)
-> -1
"Xmp.MP.RegionInfo/MPRI:Regions[1]".search(pat)
-> -1
"Xmp.MP.RegionInfo/MPRI:Regions[1]".search(/Xmp\.MP\.RegionInfo\/MPRI:Regions/)
-> 0 
```

如果我使用变量，搜索不匹配对我来说绝对没有意义....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:06:39.777

在您的第一个示例中，它看起来像是`pattern`一个字符串，它必须是一个`RegExp`对象：

```
var pattern = /Xmp\.MP\.RegionInfo\/MPRI:Regions/
var key = "Xmp.MP.RegionInfo/MPRI:Regions[1]"

key.search(pattern); // equals 0 
```

如果要将字符串转换为正则表达式，请使用`RegExp`构造函数（但删除斜杠）：

```
var pattern = new RegExp("Xmp\.MP\.RegionInfo\/MPRI:Regions"); 
```

[http://jsfiddle.net/CpEjA/](http://jsfiddle.net/CpEjA/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:07:55.640

在第一种情况下，您的模式用引号括起来，所以它是字符串。在第二种情况下，它没有引号 -> 它是 RegExp 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T11:06:47.317

在您的示例中，模式似乎是一个字符串。你需要它是一个 RegExp 对象。

# php - 高级 MySQL 数据库关系

> ID：13471845
> 
> 赞同：-1
> 
> 时间：2012-11-20T11:04:54.010
> 
> 标签：php, mysql, database

这是一个有点愚蠢的问题（可能），但我不太确定究竟要搜索什么，或者在 MySQL 数据库中这将被称为什么。

基本上我想在 MySQL 数据库方面迈出下一步。我想做的（例如）假设我有一个带有文章的表格，然后是另一个带有用户的表格。每个用户都可以（为了示例）“喜欢”或“关注”一篇文章。就 MySQL 而言，我将如何做到这一点？这可以通过做普通的关系数据库来实现吗？我能想到的最好的情况是有一个名为 article_likes 的单独数据库，其中包含用户 ID 和文章 ID，但看起来很笨拙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:27:39.637

您有两个实体：文章和用户。而且因为每篇文章可以被很多用户“点赞”，每个用户可以“点赞”很多文章，这就是规范化中的多对多关系（也称为 n:m）。

在关系数据库中，你不能有这种关系。要解决此问题，您需要创建一个将两个表链接在一起的额外表。它类似于 users_articles ，您可以在其中放置用户的密钥（标识符）、文章的密钥（标识符）以及任何其他信息，例如遵循日期等。

```
id_users_articles id_user   id_articles   date_added  status ....
1                 1         1             2012/11/01 ....
2                 1         2             2012/11/01 ....
3                 2         1             2012/11/01 .... 
```

有了这样的结构，用户和文章之间的多对多就变成了两个多对一的关系：

1.  users和users_articles之间
2.  在文章和 user_articles 之间。

请注意，新创建的表有两个外键（用户、文章），但好的做法是它们自己有一个 id（自动递增）。

# python - python：带冒号的lxml xpath标签名称

> ID：13471850
> 
> 赞同：1
> 
> 时间：2012-11-20T11:04:55.993
> 
> 标签：python, tags, lxml, colon

我必须解析一些提要，但元素（标签）之一是`colon` `<dc:creator>leemore23</dc:creator>`

我如何使用它来解析它`lxml`？所以我这样做了

```
r = requests.get('http://www.site.com/feed/')
foo = (r.content).replace("dc:creator","dc")
tree = lxml.etree.fromstring(foo)
for article_node in tree.xpath('//item'):
    data['dc'] = article_node.xpath('.//dc')[0].text.strip() 
```

但我认为有更好的方法，比如

```
data['dc'] = article_node.xpath('.//dc:creator')[0].text.strip() 
```

或者

```
data['dc'] = article_node.xpath('.//dc|creator')[0].text.strip() 
```

所以无需更换

你有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:10:10.750

`dc:`前缀表示一个[XML 命名](http://www.w3.org/TR/1998/NOTE-xml-names-0119)空间。使用[elementtree API 命名空间支持](http://lxml.de/tutorial.html#namespaces)来处理它，而不仅仅是从输入中删除它。碰巧，`dc`通常是指[都柏林核心元数据](http://dublincore.org/documents/dc-xml-guidelines/)。

您需要确定完整的命名空间 URL，然后在 XPath 查询中使用该 URL：

```
DCNS = 'http://purl.org/dc/elements/1.1/'
creator = article_node.xpath('.//{{{0}}}creator'.format(DCNS)) 
```

`http://purl.org/dc/elements/1.1/`在这里，我为都柏林核心前缀使用了推荐的命名空间 URL。

您通常可以从`.nsmap`属性中确定 URL；您的根元素*可能*具有以下`.nsmap`属性：

```
{'dc': 'http://purl.org/dc/elements/1.1/'} 
```

因此您可以将代码更改为：

```
creator = article_node.xpath('.//{{{0}}}creator'.format(article_node.nsmap['dc'])) 
```

`nsmap`这可以通过将字典`xpath()`作为关键字传递给方法来进一步简化`namespaces`，此时您可以在 xpath 表达式中使用前缀：

```
creator = article_node.xpath('.//dc:creator', namespaces=article_node.nsmap) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T11:22:16.467

`dc:`表示命名空间。使用`lxml`'s`xpath`方法时，使用[`namespaces`参数](http://lxml.de/xpathxslt.html#namespaces-and-prefixes)搜索命名空间中的元素。

因此，在您的情况下，使用@MartijnPieters 提供的都柏林核心前缀，

```
r = requests.get('http://www.site.com/feed/')
tree = lxml.etree.fromstring(r.content)
ns = {'dc':'http://purl.org/dc/elements/1.1/'}
for article_node in tree.xpath('//item'):
    data['dc'] = article_node.xpath('.//dc:creator', namespaces = ns)[0].text.strip() 
```

# sql - 在 SQL Server 2008 中执行大型脚本

> ID：13471852
> 
> 赞同：1
> 
> 时间：2012-11-20T11:05:00.597
> 
> 标签：sql, sql-server, sql-server-2008

我有一个非常大的带有`UPDATE`语句的脚本（大约 1GB）。就像是

```
UPDATE Table1 SET Col1 = 'Some text 1' WHERE ID = 1
UPDATE Table1 SET Col1 = 'Some text 2' WHERE ID = 2
-- and so on 
```

执行此脚本的最佳方法是什么？我想我不能简单地在文本编辑器中打开它并运行查询......

额外感谢。

更新

我需要在远程 SQL Server 实例上运行此脚本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T11:06:53.363

使用 osql 实用程序[参考执行它](http://msdn.microsoft.com/en-us/library/aa213088%28v=sql.80%29.aspx)

例子：

```
osql -E -i C:\MyFolder\MyScript.sql -o C:\MyFolder\MyOutput.rpt 
```

您也可以键入以供参考：

```
osql -?

usage: osql              [-U login id]          [-P password]
  [-S server]            [-H hostname]          [-E trusted connection]
  [-d use database name] [-l login timeout]     [-t query timeout]
  [-h headers]           [-s colseparator]      [-w columnwidth]
  [-a packetsize]        [-e echo input]        [-I Enable Quoted Identifiers]
  [-L list servers]      [-c cmdend]            [-D ODBC DSN name]
  [-q "cmdline query"]   [-Q "cmdline query" and exit]
  [-n remove numbering]  [-m errorlevel]
  [-r msgs to stderr]    [-V severitylevel]
  [-i inputfile]         [-o outputfile]
  [-p print statistics]  [-b On error batch abort]
  [-X[1] disable commands [and exit with warning]]
  [-O use Old ISQL behavior disables the following]
      <EOF> batch processing
      Auto console width scaling
      Wide messages
      default errorlevel is -1 vs 1
  [-? show syntax summary] 
```

对于远程服务器，但您需要在运行它的机器上安装 sql 实用程序。

```
osql -S <instance name> -U <username> -P <password> -i C:\MyFolder\MyScript.sql -o C:\MyFolder\MyOutput.rpt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:16:03.653

**这会对你有所帮助，对我来说非常有用**

[批量更新数据](http://blogs.cametoofar.com/post/Bulk-data-InsertUpdateDelete-in-Sql-Server.aspx)

# ajax - Trigger.io Ajax 请求 - 使用 Parse Facebook 用户身份验证

> ID：13471859
> 
> 赞同：0
> 
> 时间：2012-11-20T11:05:14.513
> 
> 标签：ajax, rest, trigger.io, parse-platform

我正在尝试对来自 Trigger.io 的用户进行身份验证，最好是通过 Facebook。

我通过 Facebook（使用 Parse Facebook 模块）对用户进行身份验证，并将他们的访问令牌、访问到期日期和 facebook Id 传递给我对 Parse 的调用。

就是这里出了问题。每当我尝试通过 Ajax 将此数据发布到 Parse REST API 时，我的 forge/Trigger 控制台读取错误：

> { type: 'EXPECTED_FAILURE', content: '{"code":107,"error":"此端点只支持 Content-Type: application/json 请求，不支持 application/x-www-form-urlencoded."}', statusCode: '400', message: 'HTTP error code received from server: 400' }

我用来尝试发布这些数据的代码是......

```
function auth(facebookId,accessToken,expirationDate) {
    forge.logging.log('auth started');
    forge.request.ajax({
        url: 'https://api.parse.com/1/users',
        headers: {
            'X-Parse-Application-Id': config.parseAppId,
            'X-Parse-REST-API-Key': config.parseRestKey,
            'Content-Type': 'application/json'
        },
        type: 'POST',
        dataType: 'json',
        data: {
            "authData": {
                "facebook": {
                    "id" : facebookId,
                    "access_token": accessToken,
                    "expiration_date": expirationDate
                  }
            }
        },
        success: function (data) {
            forge.logging.log('auth finished 1');
            forge.logging.log(data);
        },
        error: function(error){
            forge.logging.log('auth finished 2');
            forge.logging.log(error);
        }
    })//success
} //auth 
```

我不知道如何以正确的格式将其作为 JSON 对象发送。如果有人有任何想法，他们将不胜感激。谢谢。乔希。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T16:04:43.980

每当`data`传递给的选项`forge.requests.ajax`是您的示例中的对象时，实际发布的是表示该对象的查询字符串。该`contentType`选项仅允许您设置`Content-Type`标头，它不会影响对象为请求编码的方式。

但是，如果`data`选项只是一个字符串，那么这个字符串将用作请求的主体。您可以生成一个 JSON 字符串以用作正文，`JSON.parse`如下所示：

```
forge.request.ajax({
    ...
    contentType: 'application/json',
    data: JSON.stringify({
        "authData": {
            "facebook": {
                "id" : facebookId,
                "access_token": accessToken,
                "expiration_date": expirationDate
              }
        }
    })
}); 
```

# javascript - jQuery自动完成：在运行时自动完成对象

> ID：13471864
> 
> 赞同：0
> 
> 时间：2012-11-20T11:05:27.703
> 
> 标签：javascript, debugging, jquery-autocomplete

也许是一个微不足道的问题，但我想知道是否可以*检查*绑定到元素的当前自动完成对象。

假设自动完成绑定了一个输入元素：

```
<input id="myInput" />
<script>
$( "#myInput" ).autocomplete({
    source: [/* whatever */]
});
</script> 
```

例如，我在`Chrome debugger`：

```
$('#myInput').autocomplete.source
$('#myInput').autocomplete.delay 
```

但是每个项目都会返回`undefined`。

**问题**

是否可以在运行时访问**整个**自动完成对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:50:51.050

它应该是相当微不足道的：

```
var autocompleteObject = $( "#myInput" ).autocomplete({
    source: [/* whatever */]
}); 
```

您应该能够检查 autocompleteObject 对象。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:16:33.987

您想访问传递给自动完成的数组吗？

为什么不先把它放在一个全局变量中呢？

如果我误解了，那么这可能很有用：

[自动完成源](https://stackoverflow.com/questions/10834688/autocomplete-source)

# forms - 使用未选中的复选框自动更新数据库 (false)

> ID：13471865
> 
> 赞同：0
> 
> 时间：2012-11-20T11:05:30.033
> 
> 标签：forms, codeigniter, codeigniter-2

我目前使用这样的输入更新我的数据库记录

```
$this->my_model->update($id, $this->input->post())); 
```

（这是在我对所有输入执行验证之后。“模型”还有一个期望的数据白名单。）

**问题：**如果我正在更新一个复选框，并且它是“未选中”（即“假”） - 那么该字段不会被浏览器“发布”。

例如 - 如果我勾选 checkbox_two - 但未勾选 checkbox_one，$_POST 显示：

```
[field_one] = "some value"
[field_two] = "some value"
[checkbox_two] = 1 
```

因此，我的模型不会更新该字段 - 因为它不是帖子的一部分。

反过来也不会发生同样的情况——因为“勾选”复选框被发布为“1”——因此被正确更新。

```
[field_one] = "some value"
[field_two] = "some value"
[checkbox_one] = 1
[checkbox_two] = 1 
```

**问题：**除了必须始终专门检查每个复选框之外，有没有人有一个优雅的解决方案来处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:28:21.927

```
<input type="hidden" name="example" value="FALSE" />
<input type="checkbox" name="example" value="TRUE" /> 
```

这种做法既简单又合乎逻辑。如果复选框被选中，`$this->input->post('example') == 'TRUE'`否则，`$this->input->post('example') == 'FALSE'`。

a 的最新给定值`name=""`覆盖了先前的值，因此 givin prio `checkbox`> `hidden`。

**编辑：**此解决方案等于 Rick Calder 评论中给出的最受好评的答案。不过，我自己也得出了这个结论。

# css - Prestashop 1.5 - 不能覆盖顶部菜单 css

> ID：13471867
> 
> 赞同：1
> 
> 时间：2012-11-20T11:05:30.167
> 
> 标签：css, prestashop

我是 Presta Shop 的新手，正在尝试创建自定义主题。我已经阅读了通过在必要时扩展当前模块 css/模板文件来执行此操作的文档化方法：http: [//doc.prestashop.com/display/PS15/Overriding+default+behaviors](http://doc.prestashop.com/display/PS15/Overriding+default+behaviors)

这一切似乎都是直截了当的。到目前为止，我已经轻松地为 2 个模块使用了模板和 CSS，但是在我第三次尝试时遇到了一些问题。我试图覆盖以下 CSS 文件：

```
/modules/blocktopmenu/css/superfish-modified.css 
```

有了这个

```
/themes/newtheme/css/blocktopmenu/superfish-modified.css 
```

但它没有用。出于兴趣，我也尝试过用这条路径覆盖：

```
/themes/newtheme/css/blocktopmenu/blocktopmenu.css 
```

但这也没有用？

希望那里有人可以帮助或阐明导致此问题的原因或解决方案？

谢谢，马特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:24:09.077

该路径中是否缺少“模块”？难道不是……</p>

/themes/newtheme/css/modules/blocktopmenu/css/superfish-modified.css

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T11:28:52.450

实际上我刚刚发现了这个问题，superfish-modified.css 在实际模块中它自己的 css 文件夹中，所以正确的覆盖路径应该是：

```
/themes/newtheme/css/blocktopmenu/css/superfish-modified.css 
```

给我10分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-08T09:46:14.493

似乎是与此模块相关的问题。[这里的解决方案](http://nemops.com/editing-prestashop-top-menu/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-05T07:40:17.813

对我来说，应该是

/themes/newtheme/modules/blocktopmenu/css/superfish-modified.css

并且您必须将 blocktopmenu 从 /modules 复制到 /themes/newtheme/modules/

# wpf - 使用wpf动态数据显示在代码下绘制区域的贝塞尔曲线

> ID：13471872
> 
> 赞同：4
> 
> 时间：2012-11-20T11:05:54.550
> 
> 标签：wpf, charts, bezier, dynamic-data-display

我有一个程序可以创建带有动态数据显示的图表。我需要填充曲线下的指定区域（不是整个曲线，只是一部分，例如，如果我在 x 轴上有一个从 0 到 1 的窦，则只是曲线下对应于 x 中 0.2 和 0.5 之间的区域-轴）。

有谁知道如何做到这一点？我一直在想，也许我可以用对应于这一段正弦曲线的 Y 值做一个贝塞尔曲线并填充它，但我没有得到绘制东西的命令。

```
<d3:ViewportPolyBezierCurve x:Name="vpbc" BuildBezierPoints="True" BezierPoints="0.1,1,0.3,0.4,5,0.5" Fill="Red"></d3:ViewportPolyBezierCurve> 
```

有谁知道如何用动态数据显示绘制贝塞尔曲线？

我也可以使用路径几何图形实现贝塞尔曲线，但是，当我将它插入我的绘图并进行缩放时，绘图会改变大小，但贝塞尔曲线不会！

任何帮助将非常感激！

# javascript - 滑动干涉拖动

> ID：13471877
> 
> 赞同：0
> 
> 时间：2012-11-20T11:06:10.340
> 
> 标签：javascript, css

我正在使用[iosSlider](http://iosscripts.com/iosslider/)插件来允许用户在元素之间滑动。
我还想在每张幻灯片上放置一个可拖动的文本。为此，我正在使用 jquery UI（仅可拖动包）。
问题是当我拖动文本时，滑块启动并干扰拖动。为什么我可以在拖动时禁用滑动？

这是 jsfiddle： http: [//jsfiddle.net/Uy4Gp/](http://jsfiddle.net/Uy4Gp/)
HTML 代码：

```
<div class="iosSlider">
    <div class="slider">
        <div style="background-color: green;" class="item">
            <div class="drag">text1</div>
        </div>

        <div style="background-color: yellow;" class="item">
            <div class="drag">text2</div>
        </div>

        <div style="background-color: red;" class="item">
            <div class="drag">text3</div>
        </div>

        <div style="background-color: blue;" class="item">
            <div class="drag">text4</div>
        </div>
    </div>
</div> 
```

JavaScript 代码：

```
 $(document).ready(function() {

        $( ".drag" ).draggable({ containment: "parent" });

        $('.iosSlider').iosSlider({
            desktopClickDrag: true,
            snapToChildren: true
        });
    }); 
```

CSS 代码：

```
.iosSlider {
  width: 400px;
  height: 100px;
}
.iosSlider .slider {
  width: 100%;
  height: 100%;
}
.iosSlider .slider .item {
  position: relative;
  top: 0;
  left: 0;
  width: 400px;
  height: 100px;
  background: #fff;
  margin: 0 0 0 0;
} 
```

**更新：**
我尝试在可拖动元素上添加事件：当拖动开始时 -> 禁用滑块，当拖动结束时 -> 启用滑块：

```
$( ".drag" ).draggable({
    containment: "parent",
    start: function(event, ui) { $('.iosSlider').iosSlider('lock'); },
    stop: function(event, ui) { $('.iosSlider').iosSlider('unlock'); }
}); 
```

我开始看起来很正常，但是当拖动文本并单击鼠标时，滑块开始移动。这是一个示例：http: [//jsfiddle.net/Uy4Gp/1/](http://jsfiddle.net/Uy4Gp/1/)。
关于如何锁定滑块直到文本拖动结束的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:09:16.507

这个问题的解决方案是在 mousedown 和 mouseup 事件中锁定和解锁滑块：

```
$( ".drag" )
    .mousedown(function(event) { $('.iosSlider').iosSlider('lock');})
    .mouseup(function(event) { $('.iosSlider').iosSlider('unlock');}); 
```

这是jsfiddle：http: [//jsfiddle.net/Uy4Gp/2/](http://jsfiddle.net/Uy4Gp/2/)

# php - 仅在一个动态 php 表单上的 Next 和 Before 按钮

> ID：13471881
> 
> 赞同：0
> 
> 时间：2012-11-20T11:06:37.383
> 
> 标签：php, html, sql, button, submit

我正在使用一个 php 文件做一个动态表单，它只显示和保存来自/在 sql DB 中的数据。现在我想添加 2 个按钮 NEXT 和 BEFORE 。我正在尝试这样的事情，但不显示按钮或不去下一个/之前的屏幕。

```
if($inpageNew>0){
$url = "QUESTIONARECORRECT.php?screen=" . $onpageNew - 1;
   echo <input class="botonsend" name="submit" type="submit"  value="Before &#8592"  >\n";
}
else if{

 $url = "QUESTIONARECORRECT.php?screen=" . $onpageNew + 1;
  echo "<input class="botonsend" name="submit" type="submit"  value="Nest &#8594"  >\n";
} 
```

并将网址放在`<form id= "form1" method="post" action= "<?= $url; ?>" >`.

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:43:01.070

尝试这个

```
<form method="post">
    <?php
    if (isset($_REQUEST['next']))
    {
        echo "<input class='botonsend' name='prev' type='submit'  value='Before &#8592'  >\n";
    } else
    {
        echo "<input class='botonsend' name='next' type='submit'  value='Nest &#8594'  >\n";
    }
    ?>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:44:58.463

如果您正在使用会话，则可以根据选择的按钮添加和减去计数。这样您就不需要将 $_GET 参数传递到您的 POST

```
<?php
session_start();

if(!isset($_SESSION['page'])){ $_SESSION['page']=0; }
if(isset($_POST['forward'])){  $_SESSION['page']++; }
if(isset($_POST['back'])){     $_SESSION['page']--; }

$form['f_disbled'] = null;
$form['b_disbled'] = null;

handle_post();

switch($_SESSION['page']){
    case 0:
        $page = 'Page 1';
        $form['b_disbled']='disabled="disabled"';
        break;

    case 1:
        $page = 'Page 2';
        break;

    case 2:
        $page = 'Page 3';
        break;

    case 3:
        $page = 'Page 4';
        break;

    case 4:
        $page = 'Page 5';
        $form['f_disbled']='disabled="disabled"';
        break;

    default:
        $page='Page Default';
        $form['f_disbled']='disabled="disabled"';
        unset($_SESSION['page']);
    break;
}

function handle_post(){
    if($_SERVER['REQUEST_METHOD']=='POST'){
        if(!empty($_POST['question'])){
            //Do somthing
        }
    }
}
?>

<form method="POST" action="">
  <p><?php echo $page;?> </p>
  <p>Question: <input type="text" name="question" size="20"></p>

  <p><input type="submit" name="back" value="&#8592 Before" <?php echo $form['b_disbled'];?>/><input type="submit" value="Next &#8594" name="forward" <?php echo $form['f_disbled'];?>/></p>
</form> 
```

# iphone - iphone - 如何将 rfc3399 格式的日期字符串转换为 NSDate 对象？

> ID：13471887
> 
> 赞同：1
> 
> 时间：2012-11-20T11:06:49.667
> 
> 标签：iphone, objective-c, datetime, nsdate, nsdateformatter

我通过谷歌日历网络服务获取 rfc3399 格式的日期字符串。我想将此字符串转换为 NSDate 对象，以便可以将有关此的事件添加到本地日历中。我在 Apple 的有关 NSDateFormatter 的文档中找到了以下方法，但它不起作用

**日期字符串**- **2012-05-23T18:30:00.000-05:00**

```
 - (NSString *)userVisibleDateTimeStringForRFC3339DateTimeString:(NSString *)rfc3339DateTimeString {
/*
 Returns a user-visible date time string that corresponds to the specified
 RFC 3339 date time string. Note that this does not handle all possible
 RFC 3339 date time strings, just one of the most common styles.
 */

NSDateFormatter *rfc3339DateFormatter = [[NSDateFormatter alloc] init];
NSLocale *enUSPOSIXLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];

[rfc3339DateFormatter setLocale:enUSPOSIXLocale];
[rfc3339DateFormatter setDateFormat:@"yyyy'-'MM'-'dd'T'HH':'mm':'ss'Z'"];
[rfc3339DateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];

// Convert the RFC 3339 date time string to an NSDate.
NSDate *date = [rfc3339DateFormatter dateFromString:rfc3339DateTimeString];

NSString *userVisibleDateTimeString;
if (date != nil) {
    // Convert the date object to a user-visible date string.
    NSDateFormatter *userVisibleDateFormatter = [[NSDateFormatter alloc] init];
    assert(userVisibleDateFormatter != nil);

    [userVisibleDateFormatter setDateStyle:NSDateFormatterShortStyle];
    [userVisibleDateFormatter setTimeStyle:NSDateFormatterShortStyle];

    userVisibleDateTimeString = [userVisibleDateFormatter stringFromDate:date];
}

return userVisibleDateTimeString;
} 
```

请帮助我，我已经尝试过很多次更改日期格式但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:39:03.900

试试这个方法。。

```
-(NSDate *)convertStringToDate:(NSString *) date {
        NSDateFormatter *formatter = [[[NSDateFormatter alloc] init] autorelease]; 
        NSDate *nowDate = [[[NSDate alloc] init] autorelease];
        [formatter setDateFormat:@"YYYY-MM-DD'T'HH:mm:ssZ"];// set format here which format in string date
        /// also try this format @"yyyy-MM-dd'T'HH:mm:ss.fffK" 
        date = [date stringByReplacingOccurrencesOfString:@"+0000" withString:@""];
        nowDate = [formatter dateFromString:date];
        // NSLog(@"date============================>>>>>>>>>>>>>>> : %@", nowDate);
        return nowDate;
} 
```

像下面这样调用这个方法..

```
NSDate *date = [self convertStringToDate:rfc3339DateTimeString]; 
```

也可以尝试使用一些 rfc 日期格式，`fffK`对于这种格式，请参阅下面的内容。关联..

[我如何解析和转换日期时间到 rfc-3339 日期时间格式](https://stackoverflow.com/questions/17017/how-do-i-parse-and-convert-datetimes-to-the-rfc-3339-date-time-format)

我希望这个答案有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T06:11:18.707

问题是日期包含 (-05:00 )':' 在时区值中...您必须将其从字符串中删除，然后上述方法将正常工作......新的日期字符串应如下所示以下

2012-05-23T18:30:00.000-0500 - 这应该是正确的格式。

# regex - .htaccess 中的 url 重写

> ID：13471889
> 
> 赞同：1
> 
> 时间：2012-11-20T11:07:02.660
> 
> 标签：regex, .htaccess

我正在尝试使用 mod_rewrite 提供不同的网址，但无论我尝试什么，它都不起作用。

一个示例网址是 [http://www.site.com/country/tours/dynamic-part/?&city=new-york,los-angeles](http://www.site.com/country/tours/dynamic-part/?&city=new-york,los-angeles)

我正在尝试使用 .htaccess 将 url 更改为：

[http://www.site.com/country/tours/dynamic-part/new-york,los-angeles](http://www.site.com/country/tours/dynamic-part/new-york,los-angeles)

```
RewriteEngine on
RewriteBase /

RewriteCond %{QUERY_STRING} (^|&)city=([^&]*)(&|$)
RewriteRule ^country\/tours\/([a-zA-Z0-9]*)\/.+city=([^\/]*)$ http://www.site.com/country/tours/$1/$2 [L,R=301]

RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ /index.php/$1 [L]

RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

有任何想法吗？我虽然我很接近但不再是了：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:13:28.643

RewriteRule 与查询字符串不匹配，请参阅 [http://httpd.apache.org/docs/current/mod/mod_rewrite.html#what_is_matched](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#what_is_matched)

所以`.+city`规则的一部分永远不会匹配。

这应该可以工作...

```
RewriteCond %{QUERY_STRING} (^|&)city=([^&]*)(&|$)
RewriteRule ^country\/tours\/([a-zA-Z0-9]*)\/ http://www.site.com/country/tours/$1/%2 [L,R=301] 
```

替代可以读回 RewriteCond 模式的引用。

# vim - 命令“>”标识两次

> ID：13471892
> 
> 赞同：0
> 
> 时间：2012-11-20T11:07:11.110
> 
> 标签：vim

当我使用`>`命令缩进某些东西时，它会缩进两次，我的意思是：

```
This is a code
This is too
Me either 
```

应用`>`命令：

```
This is a code
        This is too
Me either 
```

预期结果：

```
This is a code
    This is too
Me either 
```

是的，我的`ts=4`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:10:53.150

你应该设置：

```
set shiftwidth=4 
```

# extjs - 无法在 ext.js 中触发 itemclick

> ID：13471894
> 
> 赞同：1
> 
> 时间：2012-11-20T11:07:15.607
> 
> 标签：extjs

我无法在 ext.js [4.1..1a GPL] 中的 cellclick 上触发 itemclick 事件。我的 app.js 是这样的：

```
Ext.application({
    name: 'HelloExt',
    launch: function() {
 var k =  Ext.create('Ext.panel.Panel', {
        title: 'Tic Tac Toe',
        width: 300,
        height: 300,
    layout: {
            type: 'table',
            // The total column count must be specified here
            columns: 3
        },
        defaults: {
            // applied to each contained panel
            bodyStyle:'padding:20px'
        }
    ,
        items: [{
            html: '',
        },{
            html: '',
        },{
            html: ''
        },{
            html: ''
        },
    {
            html: ''
        },
    {
            html: ''
        },
    {
            html: ''
        },
    {
            html: ''
        },
    {
            html: ''
        },
        ],
        renderTo: Ext.getBody(),
    listeners :
    {
        itemclick: function(dv, record, item, index, e) {
           alert(record);
       }
    }
   });
}
}); 
```

任何人请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:29:48.247

面板不存在此侦听器。你至少需要一个视图。下面的示例捕获每个“字段”的点击事件。

```
Ext.application({
    name: 'HelloExt',
    launch: function() {
 var k =  Ext.create('Ext.panel.Panel', {
        title: 'Tic Tac Toe',
        width: 300,
        height: 300,
    layout: {
            type: 'table',
            // The total column count must be specified here
            columns: 3
        },
        defaults: {
            // applied to each contained panel
            bodyStyle:'padding:20px',
            listeners: {
                afterRender: function(p) {
                    p.body.on('click', function() { alert(p.id) });
                }
            }
        }
    ,
        items: [{
            html: ''
        },{
            html: '',
        },{
            html: ''
        },{
            html: ''
        },
    {
            html: ''
        },
    {
            html: ''
        },
    {
            html: ''
        },
    {
            html: ''
        },
    {
            html: ''
        },
        ],
        renderTo: Ext.getBody()
   });
}
}); 
```

# mysql - 将多个删除查询组合成更少？

> ID：13471895
> 
> 赞同：0
> 
> 时间：2012-11-20T11:07:18.447
> 
> 标签：mysql, sql, query-optimization

我有一个不满意的功能，该功能从表中删除产品。

然后，这还会删除该产品的所有类别、标签和变体，并为每个变体删除其所有图像、文档和值。

这归结为两个选择查询和六个删除查询。

有没有办法可以减少数据库密集度？

```
delete from $this->table where id = $id
delete from $this->clink where product_id = $id
delete from $this->tlink where product_id = $id

$variants = select id from $this->vlink where product_id = $id //e.g. (1,2) 

delete from $this->vlink where product_id = $id
delete from cart_variant_values where variant_id in $variants
delete from cart_variant_images where variant_id in $variants
delete from cart_variant_documents where variant_id in $variants 
```

我希望我可以做类似的事情：

```
variants = select id from $this->vlink where product_id = $id //e.g. (1,2) 

delete from $this->table where id = $id
delete from $this->clink, $this->tlink, $this->vlink where product_id = $id
delete from cart_variant_values, cart_variant_images, cart_variant_documents  
where variant_id in $variants 
```

但显然这行不通！

* * *

编辑（2012 年 11 月 21 日）：

这行得通吗？

```
DELETE vi, vv, vd, v, p, pc, pt
FROM cart_variant_images vi 
INNER JOIN cart_variant_values vv 
INNER JOIN cart_variant_documents vd 
INNER JOIN cart_product_variants v ON vd.variant_id = v.id
INNER JOIN cart_products p ON v.product_id = p.id
INNER JOIN cart_products_categories pc ON p.id = pc.product_id
INNER JOIN cart_products_tags pt ON p.id = pt.product_id
WHERE p.id = $id; 
```

该查询没有给我带来任何错误，但我想知道它是否会做我想要的？

请注意，每个表中会有不同数量的行，那么内连接是右连接吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:09:01.680

使用外键`ON DELETE CASCADE`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T11:12:43.623

无论如何，最后数据库必须做同样的事情。

但是您可以通过编写一个存储过程来最小化连接，该过程在您调用一次并传递给他 $id 和 $variants 之后删除所有的东西

[http://msdn.microsoft.com/en-us/library/aa174792%28v=sql.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa174792%28v=sql.80%29.aspx)

# jquery - jquery live click 但不是特定的类

> ID：13471907
> 
> 赞同：0
> 
> 时间：2012-11-20T11:08:08.030
> 
> 标签：jquery

有时我有以下链接

```
<a href="#" class="next_link ">Next</a>

<a href="#" class="next_link no_more">Next</a> 
```

但我只是想选择其中没有 no_more 的 a 标签。我尝试了以下但无济于事

```
$('a.next_link.not(.no_more)').live('click', function (){
    $('html,body').animate({scrollTop: $("#dp-products-con").offset().top},'slow');
}); 
```

[jsFiddle](http://jsfiddle.net/mynameisdonald/Wvggk/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:11:12.540

它应该是`$('a.next_link:not(.no_more)')`

注意`:`之前用过的`not`。这是使用它的正确方法。你在`.not`课堂上使用 which 手段`not`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:21:49.287

这也应该工作

```
$('a.next_link').not('.no_more').live('click', function (){
    $('html,body').animate({scrollTop: $("#dp-products-con").offset().top},'slow');
}); 
```

也许您应该使用 '.on' 事件而不是 'live' 以获得更好的性能。

# jquery - JQuery 从一个 td 获取值到另一个

> ID：13471908
> 
> 赞同：3
> 
> 时间：2012-11-20T11:08:10.223
> 
> 标签：jquery, input, get, html-table

我有这个代码

```
<table class="X">
  <tr>
    <td class="Y">Value</td>
  </tr>
</table>

<table class="Z">
  <tr>
    <td><input class="edit-Y" type="text"></td>
  </tr>
</table> 
```

我需要使用类“Y”从 td 获取值，然后使用 jQuery 使用类“edit-Y”进行输入。我尝试以不同的方式编写脚本，但每当我得到空字段或 [Object Object]。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:11:53.067

更通用的方法：

```
$(".Z input").val(function() {
    return $(".X td." + this.className.split("-").pop()).text();
}); 
```

**演示：http:** [//jsfiddle.net/G3tBT/](http://jsfiddle.net/G3tBT/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:12:43.583

**试试这个，**

```
$('.edit-Y').val($('.Y').html()); 
```

***评论的附加答案***

如果您有如下 html 并且您想选择 td 中的每个值并将其插入特定的输入框，

```
<table class="X">
  <tr>
    <td class="Y1">Value1</td>
    <td class="Y2">Value2</td>
    <td class="Y3">Value3</td>
  </tr>
</table>

<table class="Z">
  <tr>
    <td><input class="edit-Y1" type="text">
    <input class="edit-Y2" type="text">
    <input class="edit-Y3" type="text"></td>
  </tr>
</table> 
```

jquery会这样做，

```
$(function(){
 $('td[class^=Y]').each(function(){ 
    var tdValue = $(this).html();
    var id = $(this).attr('class');
    $('.edit-'+id).val(tdValue);
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T11:09:30.737

`$('.edit-Y').val( $('td.Y').text() );`

# css - 使用溢出时无填充：自动

> ID：13471910
> 
> 赞同：68
> 
> 时间：2012-11-20T11:08:13.113
> 
> 标签：css, firefox, overflow, padding

当我在盒子上使用时，我无法`padding-bottom`上班。`overflow-y: auto`

**HTML：**

```
<div id="container">
    <div id="some_info"></div>
</div> 
```

**CSS：**

```
#container {
    padding: 3em;
    overflow-x: hidden;
    overflow-y: auto;
    width: 300px;
    height: 300px;
    background: red;
}

#some_info {
    height: 900px;
    background: #000;
} 
```

[小提琴。](http://jsfiddle.net/rwgZu/)

**编辑：**我使用火狐

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2014-02-26T11:47:32.710

无需额外 DIV 的另一种解决方案。

```
#container:after {
  content: "";
  display: block;
  height: 50px;
  width: 100%;
} 
```

在 FF、Chrome、IE8-10 中工作。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-07-04T05:47:26.430

我迟到了，但我认为值得添加一个不同的解决方案来解决上面提出的一些问题。

我来到这里正是因为@Philip 针对 Alexandre Lavoie 的解决方案提出的那种情况：我在容器内动态生成了内容，所以我不能只将样式应用于特定的 div 名称，例如`#some_info`.

令人高兴的是，对于支持 CSS3 的浏览器，有一个简单的解决方案：不是对容器应用底部填充，而是对容器内的最后一个子元素应用底部边距。

```
#container > :last-child {
    margin-bottom: 3em;
} 
```

只要容器 div 中的最后一个子元素是块级元素，这应该可以解决问题。

演示：http: [//jsfiddle.net/rwgZu/240/](http://jsfiddle.net/rwgZu/240/)

PS 如果 Firefox 无法滚动到填充的底部确实是一个错误（正如@Kyle 所建议的那样），那么它在 Firefox 47.0 中仍未得到修复。令人沮丧！Internet Explorer 11.0.9600.17843 表现出相同的行为。（相比之下，谷歌浏览器按预期显示底部填充。）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-08-14T15:37:19.697

上面的解决方案不能满足我的需要，我想我偶然发现了一个简单的解决方案。

如果您的容器和溢出的内容共享相同的背景颜色，您可以**添加颜色与背景颜色匹配的顶部和底部边框**。要在四周创建相等的填充，请将边框宽度设置为等于容器的左右填充。

链接到 OP 小提琴的修改版本：http: [//jsfiddle.net/dennisoneil/rwgZu/508/](http://jsfiddle.net/dennisoneil/rwgZu/508/)

下面是一个简单的例子。

**注意**： Stack Overflow 将片段结果*放入溢出滚动*中，这使得查看发生了什么变得有点困难。小提琴可能是您最好的预览选项。

```
#container {
  background: #ccc;
  overflow-y: scroll;
  height: 190px;
  padding: 0 20px;
  border-top: 20px solid #ccc;
  border-bottom: 20px solid #ccc;
}
#overflowing {
  background: #ccc;
}
```

```
<div id="container">
  <div id="overflowing">
    This is content<br/>
    This is content<br/>
    This is content<br/>
    This is content<br/>
    This is content<br/>
    This is content<br/>
    This is content<br/>
    This is content<br/>
    This is content<br/>
    This is content<br/>
    This is content<br/>
    This is content<br/>
    This is content<br/>
    This is content<br/>
    This is content<br/>    
  </div>
</div>
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-20T11:13:16.903

这是一种可以完美运行的可能方法：

```
#container {
    overflow-x: hidden;
    overflow-y: auto;
    width: 300px;
    height: 300px;
}

#some_info {
    height: 900px;
    background: #000;
    border: 3em solid red;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-30T00:21:11.790

正常样式父 div 并使内部 div 做你想做的事。

删除`overflow-x`并`overflow`打开，`#container`更改`height`为`100%` 并添加`overflow-y:scroll;``#some_info`

```
#container {
    padding: 3em;
    width: 300px;
    height: 300px;
    background: red;
}

#some_info {
    height: 100%;
    background: #000;
    overflow-y:scroll;
    width:100%;
} 
```

工作演示：http: [//jsfiddle.net/9yuohxuh/](http://jsfiddle.net/9yuohxuh/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-11-12T12:05:25.597

对于那些正在寻找一个简单的解决方案并且可以更改 DOM 的人，请将`overflow`放在外部元素和`padding`内部元素上。

```
.scroll {
    overflow-x: hidden;
    overflow-y: auto;
}

.scroll__inner {
    padding: 3em;
} 
```

在原始问题的示例中，它看起来像这样：

```
#container {
    overflow-x: hidden;
    overflow-y: auto;
    width: 300px;
    height: 300px;
    background: red;
}

#some_info {
    height: 900px;
    background: #000;
    padding: 3em;
    box-sizing: border-box; /* only needed if wanting padding to not be added to height */
} 
```

请注意`box-sizing: border-box`这里的使用，它仅在 OP 具​​有硬编码高度时才需要（通常是不好的做法，但在边缘情况下可能需要），因此添加它`border-box`可以使`3em`填充不会增加高度，而是在`900px`.

最后一点，我建议避免使用 ID 进行样式设置，主要是因为它们具有极高的特异性，[请参阅这篇文章以获取更多信息](https://csswizardry.com/2011/09/when-using-ids-can-be-a-pain-in-the-class/)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-20T11:16:25.253

***[演示](http://jsfiddle.net/rwgZu/1/)***

嗨，现在习惯了这个 css

```
#container {
    padding: 3em;
    overflow-x: hidden;
    overflow-y: auto;
    width: 300px;
    height: 300px;
    background: red;
    padding-bottom:0; // add this line in your css
}

#some_info {
    height: 900px;
    background: #000;
    margin-bottom:3em; // add this line in your css
} 
```

***[演示](http://jsfiddle.net/rwgZu/1/)***

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-07-04T21:14:26.223

它不仅具有底部填充。右填充/边框/间距也被忽略（您在示例中看不到它，因为它没有内容，并且宽度不滚动）

以上所有答案都在 chrome 43 中失败，最多生成 3 个滚动条！或者如果内容溢出#some_info。

示例：http: [//jsfiddle.net/LwujL3ad/](http://jsfiddle.net/LwujL3ad/)

如果它对您有用，可能是因为内容没有滚动元素那么宽，或者是固定大小。

**正确的解决方案是：**

将**#some info**设置为 display:table，并为其添加填充或边框，而不是滚动容器。

```
#container {
    overflow: scroll;
    width: 300px;
    height: 300px;
    background: red;
    padding-bottom:0;
}

    #some_info {
    display:table;
    border: solid 3em red;
    height: 900px;
    background: #000;
    margin-bottom:3em;
    color: white;
} 
```

演示：http: [//jsfiddle.net/juh7802x/](http://jsfiddle.net/juh7802x/)

唯一不会失败并尊重您添加的任何边框和填充作为分隔符的元素是 TABLE。

我试过了，无论它是下一个直接子级还是嵌套了许多项，任何非内容样式都不会扩展以包裹内容，并且会保持父级的 100% 宽度。这是胡说八道，因为内容比父级大正是需要滚动 div 的场景！

对于动态解决方案（容器和内容），将滚动容器内的元素容器设置为 display:table。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-08-28T11:37:55.227

基于[isHristov 的回答](https://stackoverflow.com/a/22040425/1940710)：

```
#container {
    padding: 3em 3em 0 3em; /* padding-bottom: 0 */
    overflow-x: hidden;
    overflow-y: auto;
    width: 300px;
    height: 300px;
    background: red;
}

#container:after {
    content: "";
    display: block;
    height: 0;
    width: 100%;
    margin-bottom: 3em; /* length you wanted on padding-bottom */
} 
```

但是，他的解决方案在能够正确处理这种情况的浏览器中增加了额外的空间。

除非您在#container 中有多个动态显示/隐藏的元素，否则[Dan Robinson 的回答也很棒。](https://stackoverflow.com/a/38177668/1940710)在这种情况下 :last-child 可能会针对隐藏元素而没有效果。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-30T23:31:31.077

最重要的答案在 FireFox 89 中不起作用。我能想到的唯一明智的解决方案是使用 a`div`只包含一个不间断的空间并设置一个固定的高度。

HTML

```
<div className="spacer">&nbsp;</div> 
```

CSS

```
.spacer {
    height: 30px;
} 
```

这是有效的，因为它不使用边距或填充。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-08-06T05:20:51.417

我认为`@-moz-document url-prefix()`是你需要的。

```
#container {
    padding: 3em;
    overflow-x: hidden;
    overflow-y: auto;
    width: 300px;
    height: 300px;
    background: red;
}

#some_info {
    height: 900px;
    background: #000;
}

@-moz-document url-prefix() {
  #container > :last-child {
    margin-bottom: 3em;
  }
}
```

```
<div id="container">
  <div id="some_info"></div>
</div>
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-04-06T11:13:06.830

您只需添加`box-sizing: border-box`到应用`overflow`规则的相同元素。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-10-19T20:55:59.013

我刚刚遇到这个问题，即使在 2021 年发布的 Firefox 87 版本中也存在。

但它终于在最近得到修复。更新到 Firefox 93 后，带有滚动的底部填充正常工作。

# magento - 篮子价格规则 - Magento

> ID：13471911
> 
> 赞同：1
> 
> 时间：2012-11-20T11:08:16.200
> 
> 标签：magento, shopping-cart

我试图建立一个篮子价格规则：当您在特定产品上花费 300 英镑或更多时，可以节省 25 英镑。

**条件：** 小计等于或大于300 产品属性组合：类别包含“特定产品” 整个篮子的**操作** 固定数量：25

但是，当客户花费超过 300 英镑并包含特定产品时，该规则始终适用。它不要求他们在特定产品上花费超过 300 英镑。

任何人都知道如何设置这种规则？我希望客户在特定产品上花费 300 英镑，并且购物篮可以包含几种不同的产品？

谢谢

# php - 更多关于 PHP OOP - 类中的类

> ID：13471913
> 
> 赞同：2
> 
> 时间：2012-11-20T11:08:18.463
> 
> 标签：php, oop, variables, callback, scope

我被告知不能在 PHP 的类中定义一个类。但是，在我自己的示例中，这似乎使我感到困惑：

**类测试.php：**

```
require('class_1.php');
new class_1
//Need $missing_variable here. 
```

**class_1.php**

```
class class_1{
    public function function_1(){
        function callback_function(){
            echo "A Callback";
            $missing_variable = "Where Did I Go?";
        }
        require('class_2.php');
        new class_2('callback_function');
    }
    public function __construct(){
        $this->function_1();
    }
} 
```

**class_2.php**

```
class class_2{
    public function __construct($callback){
        echo "Hello World - ";
        call_user_func($callback);
    }
} 
```

**加载 class_test.php 打印出来**

```
Hello World - A Callback 
```

**问题**：我如何定义`$missing_variable`以便我可以在需要的地方得到它？

* * *

万一将来有人遇到类似的问题，尽管不太可能，我想从下面链接到显示来自类外部的 $missing_variable 回显的键盘：

[http://codepad.org/tRk0XWG7](http://codepad.org/tRk0XWG7)

再次感谢大家。

* * *

^(*注意*：这是一个[后续](https://stackoverflow.com/questions/13468754/about-scope-and-oop-in-php)。)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:27:52.680

*您可以在函数*中声明一个类。这就是所谓的*条件声明*，即只有当函数被调用时，类才会被声明。`include`无论您是带有类声明的文件还是在函数内键入代码，这都没有太大区别。

然而，这并不意味着这些类共享任何类型的范围或数据。[只有声明是有条件嵌套的，它仍然具有与之前解释](https://stackoverflow.com/a/13469110/476)的相同的功能和范围。

您对回调的困惑可以用同一件事来解释。`class_1::function_1`第一次执行时，正在`function callback_function`定义。这是一个可以从任何地方调用的常规全局函数。它不以任何方式绑定到类。您还会注意到您无法再次执行，当您尝试再次声明它`class_1::function_1`时，PHP 会抱怨已经存在。`callback_function`

至于源代码中的评论`//How do I declare this variable so that it is available where I need it?`：你没有。该变量是函数内的局部变量。它仅在函数内部的范围内。如果你愿意，你可以`return`像任何其他返回值一样从函数中获取它的值。[（你可以做到`global`，但看在上帝的份上，不要！）]如果你在其他地方需要那个值，不要将它声明为函数内的变量，因为那时只有函数可以访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:13:44.707

你会`$missing_variable`在几个地方回来。见下文。（这不是唯一的方法，请注意）

[http://codepad.org/tf08Vgdx](http://codepad.org/tf08Vgdx)

```
<?
class class_2{
    public function __construct($callback){
        echo "Hello World - ";
        $missing = $callback();
        $this->missing = $missing;
    }
}
class class_1{
    public function function_1(){
        function callback_function(){
            echo "A Callback. ";
            $missing_variable = "Where Did I Go?";
            return $missing_variable;
        }
        $class2 = new class_2('callback_function');
        return $class2->missing;
    }
    public function __construct(){
        $this->missing = $this->function_1();
    }
}

$class = new class_1();

echo $class->missing; 
```

# java - form:errors 值被拒绝时不显示错误消息

> ID：13471914
> 
> 赞同：0
> 
> 时间：2012-11-20T11:08:18.977
> 
> 标签：java, spring, validation, spring-mvc, forms

完整代码在github： [https ://github.com/cuipengfei/MPJSP/tree/master/tmp](https://github.com/cuipengfei/MPJSP/tree/master/tmp)

在控制器中，有一个处理提交的方法：

```
@RequestMapping(value = "/home", method = RequestMethod.POST)
    public void handleSubmit(Customer model, BindingResult result) {
        System.out.println(model.getUserName());
        result.rejectValue("userName", "required.userName", "user name invalid");
    } 
```

而在jsp中，有这样一种形式：

```
<form:form method="POST" action="home" modelAttribute="Customer">

    <table>
        <tr>
            <td>Username :</td>
            <td><form:input path="userName" /></td>
            <td><form:errors path="userName" cssClass="error" /></td>
        </tr>
        <tr>
            <td colspan="3"><input type="submit" /></td>
        </tr>
    </table>
</form:form> 
```

控制器每次都拒绝值，但不显示错误消息。

完整代码可以在这里找到： [https ://github.com/cuipengfei/MPJSP/tree/master/tmp](https://github.com/cuipengfei/MPJSP/tree/master/tmp)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:16:10.843

尝试在表单标签中设置 commandName 属性

```
<form:form method="POST" action="home" commandName="Customer"> 
```

# listview - 为 Metro 设计一个类似 Excel 的可排序列表？

> ID：13471915
> 
> 赞同：0
> 
> 时间：2012-11-20T11:08:27.953
> 
> 标签：listview, sorting, windows-8

我知道这不是设计问答，但我想我还是试试看。在 Excel 中实现列表的推荐方法是什么，您可以在 Windwos 8 Store (Metro) 应用程序中进行排序和过滤？

我能找到的大多数例子都使用瓷砖，但我真的不认为这对我的情况来说是一个很好的解决方案。我只需要显示链接及其社交媒体计数。

这是应用程序的屏幕截图：http:
[//apptivate.ms/apps/1276/super-social-media-tracker](http://apptivate.ms/apps/1276/super-social-media-tracker)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T13:23:49.543

在 Windows 8 应用程序中，解决问题的推荐方法是磁贴（例如，查看 Bing 应用程序）。您可以在磁贴上放置您需要的任何信息，这样您就可以放置链接和您的社交媒体计数。Windows 8 的用户（将）习惯于使用磁贴，因此用户体验应该没有问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T15:13:24.293

附上关于如何构建视图的建议。希望有帮助。![首页](../Images/87d69430b7c23f731c3c5847f9557e6c.png) ![详细视图](../Images/3a7156766214d52a9e6cae49e3c35413.png)

# search-engine - AWSStats 无法识别任何搜索引擎

> ID：13471917
> 
> 赞同：6
> 
> 时间：2012-11-20T11:08:34.077
> 
> 标签：search-engine, keyword, awstats

AWStats 似乎将 Google 视为外部页面而不是搜索引擎。

因此，它不会报告热门搜索关键词和关键词。

网页上的输出：

```
...
Links from an Internet Search Engine - Full list

Links from an external page (other web sites except search engines) - Full list
- http://www.google.com/url     1,427   1,427
- http://www.google.com/imgres  960     1,025
- http://www.google.com/search  332     367
... 
```

我应该在哪里寻找解决方案？

# c# - 如何使用 C# 自动化从访问数据库（.accdb）中读取所有记录

> ID：13471918
> 
> 赞同：0
> 
> 时间：2012-11-20T11:08:33.700
> 
> 标签：c#, ms-access

我正在尝试使用 C# 中的自动化（使用 Microsoft.Office.Interop.Access）从 MS 访问数据库中读取所有记录。

我能够在 C# 中使用 ADO.net 读取记录，但不能使用自动化。

请帮忙..谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:24:02.623

除非您特别需要在此任务中涉及 Access 用户界面，否则我建议您不要这样做。相反，使用[`OdbcConnection`](http://msdn.microsoft.com/en-us/library/system.data.odbc.odbcconnection.aspx)or[`OleDbConnection`](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbconnection%28v=vs.110%29.aspx)来直接访问和操作数据库。

# php - php中的JQXdropdown问题

> ID：13471919
> 
> 赞同：0
> 
> 时间：2012-11-20T11:08:39.910
> 
> 标签：php, jquery

我在 PHP 中使用 jqxdropdownlist.js 进行下拉。在更改时，我需要重定向相应的页面。

例如，探针在我的下拉列表中，我有以下值。

```
$(document).ready(function () {
                var source = [
                    "Affogato",
                    "Americano",
                    "Bicerin",
                    "Breve",
                    "Café Bombón",
                    "Café au lait",
                    "Caffé Corretto",
                    "Café Crema",
                    "Caffé Latte",
                ];
                // Create a jqxDropDownList
                $("#jqxdropdownlist").jqxDropDownList({ source: source, selectedIndex: 0, width: '200px', height: '25px' }); 
```

在那我想选择“ **Café au lait** ”它应该在C系列的2中。单击 C 字母时，下拉菜单会转到 Café Bombón 的第一个系列 C，之后它将重定向到**Café** **Bombón**页面。但我需要重定向到下一个系列。

我将以下代码用于 Onchage 功能。

```
$("#jqxWidget").change(function(){
    var val1=$("#jqxWidget").jqxDropDownList('getItem', args.index);
    window.location.href=val1.value;

    }); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:53:45.403

尝试使用这种方式，看看这是否适合您：

```
// i think this will be your hidden input's id change event so
$("#jqxWidget").change(function(){ 
    var val1=$(this).val();
    window.location.href=val1;
}); 
```

# visual-studio-2008 - 如何打印代码的结果？

> ID：13471920
> 
> 赞同：1
> 
> 时间：2012-11-20T11:08:47.373
> 
> 标签：visual-studio-2008, printing, telerik, justcode

我使用[Telerik JustCode](http://www.telerik.com/help/justcode/introduction.html)来促进编码现在我使用该属性`Just Find All Dependent Code`并且我得到了所有我不知道如何打印结果的结果！Visual Studio 中禁用了打印按钮。

* * *

如何获得打印文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:10:13.047

Unfortunately, JustCode does not currently support printing of navigation results. I recommend posting it as a feature request on the JustCode feedback portal: [http://feedback.telerik.com/Project/100](http://feedback.telerik.com/Project/100)

# entity-framework - 如何首先为EntityFramework代码创建一对一关系T-SQL

> ID：13471924
> 
> 赞同：1
> 
> 时间：2012-11-20T11:08:57.437
> 
> 标签：entity-framework, tsql

我有两张桌子

```
CREATE TABLE Company (
    Id uniqueidentifier primary key not null, 
    CompanyName nvarchar(100) not null)
GO

CREATE TABLE Feature (
    Id uniqueidentifier primary key not null, 
    CompanyId uniqueidentifier not null, 
    Feature1 bit not null, 
    Feature2 bit not null)
GO 
```

如何通过数据库上的 CompanyId 字段和 EF Code First 端与配置文件建立一对一的关系

课程：

```
 public class Company
{
    private Guid id = Guid.NewGuid();

    public virtual Guid Id
    {
        get { return id; }
        set { id = value; }
    }

    public virtual string CompanyName { get; set; }
}

public class Feature
{
    private Guid id = Guid.NewGuid();

    public virtual Guid Id
    {
        get { return id; }

        set { id = value; }
    }

    public virtual Company Company { get; set; }

    public virtual bool Feature1 { get; set; }

    public virtual bool Feature2 { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:49:13.580

您无法在 EF 中与这些表建立真正的一对一关系，因为它需要`CompanyId`列上的唯一索引，而 EF 还不支持唯一索引。目前，获得真正的一对一关系的唯一方法是使用依赖表的主键（在您的情况下`Feature.Id`）作为主表的外键。

你可以作弊。只需将其用作一对多（公司可以有许多功能），如果您在数据库中有唯一索引，如果另一个功能尝试与已使用的公司关联，您将收到异常。

# ruby - 如何在表单标签导轨中使用（yml）字符串进行国际化？

> ID：13471931
> 
> 赞同：0
> 
> 时间：2012-11-20T11:09:35.000
> 
> 标签：ruby, ruby-on-rails-3, forms, internationalization

我想在 'es'、'en'、'de' 和许多其他文件中显示一个**名称**，因此，我使用了该字符串`:name`并将其存储在**en.yml**、**es.yml**和其他文件中。为了操纵它们，我这样做了（见下文）：

```
<%= form.label :name %> 
```

**在 en.yml**

```
#contact form 
helpers:
  label:
  message:
    name: Name123
    email: Email
    subject: Subject
    body: Body 
```

**这是行不通的。所以请帮忙！因为我不知道如何实际实施它。**

**谢谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:04:29.547

**已识别的错误：**文件中的缩进问题`.yml`。

**描述性解决方案：**使用正确的缩进。

**更正的源代码：**见下文

```
#contact form 
helpers:
  label:
    message: #name of the variable
      name: Name123
      email: Email
      subject: Subject
      body: Body 
```

# android - Pinch Zoom And Scroll 多点触控源代码

> ID：13471937
> 
> 赞同：0
> 
> 时间：2012-11-20T11:09:50.313
> 
> 标签：android, licensing, pinchzoom

今天，我谈到了一个严重的问题。我刚刚创建了一个应用程序，包括完全使用的这个库[https://github.com/sephiroth74/ImageViewZoom](https://github.com/sephiroth74/ImageViewZoom) 源代码。现在我想把它上传到谷歌支付，但我很困惑这个许可证将来会在我的应用程序中产生任何影响[https://github.com/sephiroth74/ImageViewZoom/blob/master/LICENSE](https://github.com/sephiroth74/ImageViewZoom/blob/master/LICENSE)

我需要先购买吗？在这里做任何其他方式，所以我会自由地使用它。请高手帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:16:16.897

此软件使用[MIT 许可证](http://en.wikipedia.org/wiki/MIT_License)，这意味着您可以完全免费使用和转售（作为您开发的软件的一部分）但是，您需要将上述链接的许可证文本包含在您的应用程序源代码中（例如文件 xy.js 包含内容在 MIT 下获得许可，因此您需要在此处添加（或留下）许可和版权信息）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:27:42.507

你可以毫无风险地上传这个......别担心兄弟......因为我已经使用了这个演示......并在谷歌播放中上传了应用程序。

# .net - .NET Frameworks 从 3.5 到 2.0 的向前兼容性

> ID：13471939
> 
> 赞同：1
> 
> 时间：2012-11-20T11:09:50.377
> 
> 标签：.net, .net-3.5, .net-2.0, compatibility, forward-compatibility

我正在寻找有关 .NET 框架特定版本之间前向兼容性的可靠建议。

为清楚起见，假设我们谈论的是仅支持 .NET 2.0 的 SQL Server 2008，并且我们在其中加载了一个带有存储过程的 v3.5 程序集，以及它的所有 v3.5 依赖项。

*   一方面，我们知道 .NET 框架[大多是向后兼容](http://msdn.microsoft.com/en-us/library/ff602939.aspx)的。
    我们还知道，[仅框架 1.1 支持前向兼容性](http://msdn.microsoft.com/en-us/library/47a587hk%28v=vs.90%29.aspx)，而不是超出此范围。

*   但是，[框架 2.0、3.0 和 3.5 的 CLR 版本是相同的](http://msdn.microsoft.com/en-us/library/bb822049.aspx)：CLR 2.0。

这些事实如何结合？
“CLR 相同”的事实能否获胜？是否可以说，由于三个固件版本之间的 CLR 版本相同，只要还引入了所有依赖项，就可以安全地将 v3.5 代码引入 v2.0 环境？在哪种情况下，我们可以将“不支持前向兼容性”通知视为在一般情况下正确，但在 v3.5-v2.0 关系的特定情况下不正确？

*（我们实际上已经尝试将具有所有依赖项的 v3.5 程序集导入 SQL Server 2008。它有效。但我想知道它是因为它应该有效，还是因为脆弱的魔法。）*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T12:58:05.040

没有“.NET 3.5 程序集”之类的东西。印在程序集上的唯一版本是它所需的运行时版本。对于由 .NET 2.0 到 3.5 SP1 包含的编译器构建的任何程序集，它是 v2.0.50727。进一步扭曲，这确实指定了程序集中元数据的格式。只有 CLR 版本 2 或更高版本可以读取程序集中的清单。这种格式在 4.0 中发生了变化，这是您需要 CLR 版本 4 来执行以 4 为目标的程序集的核心原因。

框架版本 2.0 到 3.5 SP1 之间的唯一区别在于包含的程序集集。当您面向 3.0 或更高版本时，您只能添加对 WPF PresentationFramework 程序集的程序集引用。您只能在以 3.5 为目标时添加 System.Core。

在 SQL 项目中避免这些新程序集并不困难。如果你弄错了，你会得到一个快速的例外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:28:22.450

我认为您第一个假设“SQL Server 2008 仅支持 .NET 2”是错误的，因此以下所有讨论都将毫无意义。

如果你看一下这篇文章，你可以看到支持 .NET 3.5，因为 System.Core 仅支持 .NET 3.5，

[http://msdn.microsoft.com/en-us/library/ms403279(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms403279(v=sql.100).aspx)

现在您可以放心地使用您的 .NET 3.5 程序集了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T12:09:15.393

SQL Server 加载与 3.x 兼容的 2.0 CLR。所以，是的，“CLR 版本相同”获胜。

# c# - 为什么十进制不是原始类型？

> ID：13471941
> 
> 赞同：21
> 
> 时间：2012-11-20T11:10:02.370
> 
> 标签：c#, .net, vb.net

为什么`decimal`不是原始类型？

```
Console.WriteLine(typeof(decimal).IsPrimitive); 
```

输出`false`。

它是基本类型，是语言规范的一部分，但不是原始类型。`decimal`什么原始类型在框架中代表 a ？`int`例如，有一个类型`m_value`为的字段`int`。A`double`有一个`m_value`类型为 的字段`double`。情况并非如此`decimal`。它似乎由一堆`int`s 代表，但我不确定。

为什么它看起来像原始类型，[表现得像原始类型](https://docs.microsoft.com/en-us/dotnet/visual-basic/reference/language-specification/types#primitive-types)（除了在[几种情况下](https://stackoverflow.com/questions/3192833/why-decimal-is-not-a-valid-attribute-parameter-type)）但不是原始类型？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-20T11:13:33.720

虽然不是直接的答案，但文档`IsPrimitive`列出了原始类型是什么：

[http://msdn.microsoft.com/en-us/library/system.type.isprimitive.aspx](http://msdn.microsoft.com/en-us/library/system.type.isprimitive.aspx)

这里问了一个类似的问题：

[http://bytes.com/topic/c-sharp/answers/233001-typeof-decimal-isprimitive-false-bug-feature](http://bytes.com/topic/c-sharp/answers/233001-typeof-decimal-isprimitive-false-bug-feature)

引用 Jon Skeet 的回答：

> CLR 不需要对小数类型有任何内在知识——它将它视为恰好具有重载运算符的另一种值类型。例如，没有 IL 指令可以直接对小数进行运算。

对我来说，这似乎`decimal`是一种语言/运行时必须存在的类型，希望符合 CLS/CLI（因此被称为“原始”，因为它是支持关键字的基本类型），但实际实现确实不需要它是真正的“原始”（因为在 CLR 中不认为它是原始数据类型）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-20T11:22:14.673

十进制是 128 位数据类型，不能在计算机硬件上本地表示。例如，64 位计算机体系结构通常具有 64 位宽的整数和寻址寄存器，允许直接支持 64 位数据类型和地址。

维基百科说

> 根据语言及其实现，原始数据类型可能与计算机内存中的对象一一对应，也可能不一一对应。然而，人们通常认为对基本原始数据类型的操作是最快的语言结构。

在十进制的情况下，它只是一种在内部使用整数的复合数据类型，因此它的性能比与计算机内存直接相关的数据类型（整数、双精度数等）要慢。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-01-06T11:43:50.553

考虑下面的例子，

```
 int i = 5;
    float f = 1.3f;
    decimal d = 10; 
```

如果您放置一个调试器并验证本机指令集，它将是

[![在此处输入图像描述](../Images/bf83515cde7bb30dfb1ddf781dee3922.png)](https://i.stack.imgur.com/66XJP.png)

正如您所看到的**int**，作为原始类型的**float**都需要一条指令来执行分配操作，而作为非原始类型的**十进制、字符串**需要多条本机指令来执行此操作。

# c# - 合并两个表并使用 linq 连接值

> ID：13471942
> 
> 赞同：1
> 
> 时间：2012-11-20T11:10:02.900
> 
> 标签：c#, linq

我的表数据如下所示：

```
 table 1:
 Id   CId   Message
 1     1    E:MMM
 1     1    E:NNN
 1     1    E:OOO
 1     2    E:PPP 
 1     2    E:PPP

table 2:
 Id   CId   Message
 1     1    W:NNN
 1     1    W:OOO 
```

使用 linq 合并两个表后，我的输出表应如下所示： 结果表：

```
 Id   CId    ErMessage              WrMessage
 1     1     E:MMM*E:NNN*E:OOO      W:NNN*W.OOO
 1     2     E:PPP*E:PPP 
```

请帮助我如何实现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:50:08.310

```
 var q =
    from t1 in
        table1.GroupBy(g => g.ID).Select(g => new
        {
            ID = g.Key,
            Message = string.Join("*", g.Select(v => v.Message).ToArray())
        })
    join
        t2 in
        table2.GroupBy(g => g.ID).Select(g => new
        {
            ID = g.Key,
            Message = string.Join("*", g.Select(v => v.Message).ToArray())
        }) on t1.ID equals t2.ID
    select new
    {
        ID = t1.ID,
        ErMessage = t1.Message,
        WrMessage = t2.Message
    }; 
```

# java - Apache骆驼多播FreeMarker

> ID：13471945
> 
> 赞同：1
> 
> 时间：2012-11-20T11:10:09.080
> 
> 标签：java, apache-camel, freemarker, multicast, endpoints

我需要将两个不同的 XML（通过 FreeMarker）发送到两个不同的端点。IE

```
.to("freemarker:templates/xml1.ftl").to("file://C:\\testXmls1") 
```

和

```
.to("freemarker:templates/xml2.ftl").to("file://C:\\testXmls2") 
```

我查看了该`multicast()`功能，但是当有两个 .to 时我不知道如何应用它

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:37:53.777

是的，您可以在同一个 .to(uri1, uri2, ...) 中指定多个端点，然后它变成一个“eip”。

```
multicast()
  .to(uri1a, uri1b)
  .to(uri2a, uri2b)
.end() // to end multicast 
```

否则，您将不得不使用管道 eip 将其封装起来。

```
multicast()
  .pipeline().to(uri1a).to(uri1b).end() // to end this pipeline
  .pipeline().to(uri2a).to(uri2b).end() // to end this pipeline
.end() // to end multicast 
```

# php - 使用 PHP 的 SSH 连接

> ID：13471947
> 
> 赞同：9
> 
> 时间：2012-11-20T11:10:12.827
> 
> 标签：php, linux, ssh

我目前正在做一个项目，用 PHP 对系统进行更改（例如更改 Nginx 的配置文件/重新启动服务）。

PHP 脚本在 localhost 上运行。在我看来，最好的（阅读：最安全的）方法是使用 SSH 建立连接。我考虑以下选项之一：

**选项 1：在 php 会话中存储用户名/密码并提示输入 sudo**

使用带有用户名/密码的 phpseclib，将这些值保存在 php 会话中，并为每个命令提示输入 sudo。

**选项 2：使用 root 登录**

在登录脚本中使用带有 root 用户名和密码的 phpseclib。在这种情况下，您不必向用户询问 sudo。（不是真正安全的解决方案）

```
<?php
include('Net/SSH2.php');

$ssh = new Net_SSH2('www.domain.tld');
if (!$ssh->login('root', 'root-password')) {
    exit('Login Failed');
}
?> 
```

****选项 3：使用从文件中读取的公钥进行身份验证****

 **使用带有公钥的 PHP SSHlib 进行身份验证并将公钥放在 www 根目录之外。

```
<?php

    $connection = ssh2_connect('shell.example.com', 22, array('hostkey' => 'ssh-rsa'));
    if (ssh2_auth_pubkey_file($connection, 'username', '/home/username/.ssh/id_rsa.pub', '/home/username/.ssh/id_rsa', 'secret')) {
        echo "Public Key Authentication Successful\n";
    } else {
        die('Public Key Authentication Failed');
    }
?> 
```

**选项 4：？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T15:05:42.913

我建议您通过 3 个简单的步骤执行此操作：

**第一的。** 创建另一个用户（例如`runner`）并使您的敏感数据（如用户/通行证、私钥等）仅供该用户访问。换句话说，拒绝您的 php 代码访问这些数据。

**第二。** 之后，创建一个简单的阻塞 fifo 管道并授予您的 php 用户写入权限。

**最后的。** 最后编写一个简单的守护进程来从 fifo 读取行并执行它，例如通过 ssh 命令。使用用户运行此守护程序`runner`。

要执行命令，您只需将命令写入文件（fifo 管道）。如果需要，可以将输出重定向到另一个管道或一些简单的文件中。

要使 fifo 使用这个简单的命令：

```
mkfifo "FIFONAME" 
```

runner 守护进程将是一个简单的 bash 脚本，如下所示：

```
#!/bin/bash
while [ 1 ]
do
    cmd=$(cat FIFONAME | ( read cmd ; echo $cmd ) )
    # Validate the command
    ssh 192.168.0.1 "$cmd"
done 
```

在此之后，您可以信任您的代码，如果您的 php 代码完全被黑，您的上游服务器仍然是安全的。在这种情况下，攻击者根本无法访问您的敏感数据。他可以向您的`runner`守护进程发送命令，但如果您正确验证命令，则无需担心。

:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:45:44.030

**方法一**

我可能会使用[suid 标志](http://en.wikipedia.org/wiki/Setuid)。用 C编写一个小[suid 包装器，](http://linuxshellaccount.blogspot.ch/2007/12/securing-suid-programs-using-simple-c.html)并确保它执行的所有命令都是预定义的，并且**不能**由您的 php 脚本控制。因此，您创建包装器并从 ARGV 获取命令。所以一个电话可能看起来像这样：

```
./wrapper reloadnginx 
```

Wrapper 然后执行`/etc/init.d/nginx reload`.

确保你`chown`包装到 root 和`chmod +s`. 然后它将以 root 身份生成命令，但由于您预定义了所有命令，因此您的 php 脚本不能以 root 身份执行任何其他操作。

**方法二**

使用 sudo 并将其设置为对某些命令进行[无密码执行](http://www.davidverhasselt.com/2008/01/27/passwordless-sudo/)。这样您就可以达到相同的效果，并且只能以 root 身份生成某些应用程序。但是，您无法控制参数，因此请确保这些二进制文件中没有特权升级。

您真的不想为 PHP 脚本提供完全的 root 访问权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T11:24:43.577

如果您在同一台主机上运行，​​我建议直接编写配置文件并（重新）启动服务或编写包装脚本。

第一个选项显然需要非常高的权限级别，我不建议这样做。但是，这将是最简单的实现。您使用 ssh 的其他命名选项没有多大帮助，因为可能的攻击者仍然可以轻松获得 root 权限

第二种选择更安全，涉及编写具有高级访问权限的程序，该程序仅接受指定的输入文件，例如来自目录。php-script 只是用户的前端，将编写所述输入文件，因此只需要非常低的权限。这样，您就可以将高权限和低权限分开，从而降低风险，因为保护程序更容易，可能的攻击者只能通过文本文件间接使用该程序。此选项需要更多工作，但更安全。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T15:05:08.660

您可以扩展选项 3 并在没有任何库的情况下使用 SSH 密钥

```
$command = sprintf('ssh -i%s -o "StrictHostKeyChecking no" %s@%s "%s"',
                $path, $this->getUsername(), $this->getAddress(), $cmd );
return shell_exec( $command ); 
```

我在我的项目中经常使用它。您可以查看我创建的[SSH 适配器。](https://github.com/lukaszkujawa/Beehive/blob/master/application/modules/beehive/models/Connection/Adapter/Ssh.php)

上面的问题是您无法做出实时决策（连接到服务器时）。如果您需要实时尝试名为[SSH2](http://php.net/manual/en/book.ssh2.php)的 PHP 扩展。

附言。我同意你的看法。SSH 接缝是最安全的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T18:17:42.410

您可以使用`setcap`允许 Nginx 绑定到端口 80/443，而无需以 root 身份运行。Nginx 只需以 root 身份运行即可绑定端口 80/443（任何小于 1024 的端口）。[此答案](https://stackoverflow.com/questions/413807/is-there-a-way-for-non-root-processes-to-bind-to-privileged-ports-1024-on-l)`setcap`中有详细说明。

不过有一些注意事项。您必须将`chown`日志文件发送给正确的用户 ( )，并将 pid 文件配置为( )`chown -R nginx:nginx /var/log/nginx`以外的其他位置。`/var/run/``pid /path/to/nginx.pid`

lawl0r 为 setuid/sudo 提供了一个很好的答案。

作为最后的恢复，如果配置已更改，您可以使用 cron 作业定期重新加载配置。

无论哪种方式，当它在同一个系统上时，您都不需要 SSH。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-27T18:09:47.940

哥们，这完全错了。

**您不想更改任何要创建新文件的配置文件，然后将它们包含在默认配置文件**中。

apache 的示例，您有 *.conf 文件和包含指令。更改默认配置文件是完全疯狂的。我就是这样做的。

您不需要 ssh 或类似的东西。

相信我，如果你愿意，它会更好、更安全。**

# python - eclipse下matplotlib无法显示绘图

> ID：13471949
> 
> 赞同：4
> 
> 时间：2012-11-20T11:10:26.880
> 
> 标签：python, eclipse, matplotlib, drawing, pydev

我在 Eclipse 下对 matplotlib 有一个奇怪的问题我已经测试了这段代码，这在命令行中运行良好：

```
import matplotlib.pyplot as plt
import matplotlib.pylab as pylab
plt.plot([1,2,3,4])
plt.ylabel('some numbers')
plt.show() 
```

但是当我在 Eclipse 下执行这段代码时，没有任何显示。我看到 pydev 理解了我所有的导入并且没有错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T21:56:12.437

使用 Ubuntu 12.04 并且我已经安装了 python3.3 这对我有用。

你需要有freetype。sudo apt-get install freetype*

你需要有freetype。sudo apt-get install python3.3-dev

你需要有 g++。sudo apt-get install g++

你需要有 libevent-dev sudo apt-get install libevent-dev

你需要有 libpng-dev sudo apt-get install libpng-dev

你需要有 libjpeg8-dev sudo apt-get install libjpeg8-dev

你需要有 python3.3-tk sudo apt-get install python3.3-tk

你需要 tk-dev sudo apt-get install tk-dev

你需要有 python-gtk2-dev sudo apt-get install python-gtk2-dev

从网站获取 tar 文件并将其解压到 dist-packages /usr/local/lib/python3.3/dist-packages/matplotlib-1.3.1。sudo python3.3 setup.py clean（这可能是可选的） sudo python3.3 setup.py install

注意：我必须更改 mpl-data 目录中 dist-packages 中的 matplotlibrc 文件。后端行从 agg 更改为 TkAgg，并且 interactive 设置为 True。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-13T01:19:15.110

就我而言，Python 解释器无法识别 matplotlib 安装。尝试再次应用 Python 解释器。

**窗口 -> 首选项 -> PyDev -> 解释器 -> Python 解释器 -> 应用 -> 选择 python 解释器 -> 确定 -> 应用并关闭。**

希望它有效。

# .net - Winforms 中预先编写的进度指示器？

> ID：13471951
> 
> 赞同：0
> 
> 时间：2012-11-20T11:10:30.153
> 
> 标签：.net, winforms, progress-indicator

在`.NET`（Winforms）中，它们是否是任何预先编写的进度指示器，以指示进程正在等待未知时间完成？

我意识到`hour-glass`指针总是可以使用的，但是有什么更详细的可用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:17:20.587

也许您在询问[ProgressBar 控件](http://msdn.microsoft.com/en-us/library/system.windows.forms.progressbar.aspx)。

# javascript - dart 中生成代码的可读性

> ID：13471954
> 
> 赞同：2
> 
> 时间：2012-11-20T11:10:44.310
> 
> 标签：javascript, dart

Darts 目前生成复杂的 JavaScript 代码。我认为这是一个主要缺点，实际上我更喜欢使用 TypeScript 方法来解决这个问题。

我想知道当时是否有人知道 Dart 的战略计划。Dart 会在未来生成 - 有点 - 可以理解的 javascript 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T17:51:37.270

问题是：你为什么会对查看编译后的代码感兴趣？

dart2js为编译后的代码生成[源映射。](https://wiki.mozilla.org/DevTools/Features/SourceMap)

当您编译为 JavaScript 时，您应该会看到“地图文件”。这些源映射允许您在 Web 浏览器中查看和调试您的代码（目前在 Chrome 中工作，在工作中支持 Firefox）作为 Dart 代码，即使它正在执行 JavaScript。

即使您没有源映射，您也不需要调试 JavaScript 代码。如果你的代码没有运行，要么是 dart2js 的问题，要么是你的代码有问题，如果是你的代码，你可以在 Dartium 或 Chrome 中使用源映射进行调试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T02:52:43.180

我实际上喜欢以“问题是：您为什么有兴趣查看已编译的代码？”开头的答案，但是，我想补充一下：

*   我认为生成的 JavaScript 并没有那么糟糕。一旦你明白 foo$2 意味着 foo 是一个接受 2 个参数的函数，它就没有那么糟糕了。

*   dart2js 团队并没有尝试以简单的方式编译成 JavaScript。实际上，他们的目标之一是他们生成的 JavaScript 应该比您可以手动编写的更好，最好更快。这类似于 C 编译器生成的代码比您手动编写的汇编代码要快的事实，因为 C 编译器可以执行对于有限的人脑而言难以完成的优化。当 dart2js 内联某些函数时，您已经可以看到这种情况发生了。

但是，正如第一个答案指出的那样，真正的答案是我们有源映射，因此您应该很少需要查看 JavaScript。

# r - 在 R 中使用具有多个条件的 gsub 函数

> ID：13471955
> 
> 赞同：0
> 
> 时间：2012-11-20T11:10:44.670
> 
> 标签：r, search, copy, gsub

跟进问题[在数据框中搜索唯一值并使用它们创建表](https://stackoverflow.com/questions/13456376/searching-for-unique-values-in-dataframe-and-creating-a-table-with-them)

这是我的数据的样子

```
 UUID    Source
1   Jane    http//mywebsite.com44bb00?utm_source=ADW&utm_medium=banner&utm_campaign=Monk&gclid1234
2   Mike    http//mywebsite.com44bb00?utm_source=Google&utm_medium=cpc&utm_campaign=DOG&gclid1234
3   John    http//mywebsite.com44bb00?utm_source=Yahoo&utm_medium=banner&utm_campaign=DOG&gclid1234
4   Sarah   http//mywebsite.com44bb00?utm_source=Facebookdw&utm_medium=cpc&utm_campaign=CAT&gclid1234
5   Michael http//mywebsite.com44bb00?utm_source=Twitter&utm_medium=GDNr&utm_campaign=CAT&gclid1234
6   Bob     http//mywebsite.com44bb00?utm_source=ADW&utm_medium=GDN&utm_campaign=DOG&gclid1234
7   Mark    http//mywebsite.com44bb00?utm_source=Twitter&utm_medium=banner&utm_campaign=MONK&gclid1234
8   Anna    http//mywebsite.com44bb00?utm_source=Facebook&utm_medium=banner&utm_campaign=MONK&gclid1234 
```

这是我想要实现的期望输出

```
 NAME    UTM_SOURCE  UTM_MEDIUM  UTM_CAMPAIGN
1   Jane    ADW             banner     Monk
2   Mike    Google          cpc        DOG
3   John    Yahoo           banner     DOG
4   Sarah   Faceboo         cpc        CAT
5   Michael Twitter         GDN        CAT
6   Bob     ADW             GDN        DOG
7   Mark    Twitter         banner     MONK
8   Anna    Facebook        banner     MONK 
```

所以换句话说，我想要的是根据标准获取特定的信息。示例：在数据框中搜索值“utmsource=”，找到后复制在“=”和“&”符号之间找到的任何信息。在用户 no1 (Jame) 的情况下，如果您查看原始文件，她的源 URL 包含值“utm_source=ADW”。在输出文件中，“ADW”位被提取并归入一个名为“utm_source”的新列中。所有其他用户和其他维度的相同原则（utm_medium 和 utm_campaign）

我知道该功能`gsub`可以帮助我。这是我到目前为止所尝试的：

```
> file1 <- read.csv("C:/Users/Dumitru Ostaciu/Desktop/Users.csv")
> file1 <- transform(file1, Source = as.character(Source))
> file2 <- gsub(".*\\?utm_source=", "", file1$Source) 
```

这就是我得到的结果

```
 UUID  SOURCE
    1   ADW&utm_medium=banner&utm_campaign=Monk&gclid1234
    2   Google&utm_medium=cpc&utm_campaign=DOG&gclid1234
    3   Yahoo&utm_medium=banner&utm_campaign=DOG&gclid1234
    4   Facebookdw&utm_medium=cpc&utm_campaign=CAT&gclid1234
    5   Twitter&utm_medium=GDNr&utm_campaign=CAT&gclid1234
    6   ADW&utm_medium=GDN&utm_campaign=DOG&gclid1234
    7   Twitter&utm_medium=banner&utm_campaign=MONK&gclid1234
    8   Facebook&utm_medium=banner&utm_campaign=MONK&gclid1234 
```

我对此有两个问题：

1) 在我得到的输出中，该函数复制了值 "utm_source-" 后面的所有内容。如何添加另一个维度以使公式仅复制“=”和“&”之间的内容

2) 我如何保留最初在第一列 (UUID)、Jane、Mike、John 等中的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:09:01.560

你需要做两件事：

1.  用于`gsub`从您的来源中删除网站名称
2.  用于`strsplit`在每次出现时分隔剩余的字符串`?`

读入数据：

```
x <- read.table(text="
UUID    Source
1   Jane    http//mywebsite.com44bb00?utm_source=ADW&utm_medium=banner&utm_campaign=Monk&gclid1234
2   Mike    http//mywebsite.com44bb00?utm_source=Google&utm_medium=cpc&utm_campaign=DOG&gclid1234
3   John    http//mywebsite.com44bb00?utm_source=Yahoo&utm_medium=banner&utm_campaign=DOG&gclid1234
4   Sarah   http//mywebsite.com44bb00?utm_source=Facebookdw&utm_medium=cpc&utm_campaign=CAT&gclid1234
5   Michael http//mywebsite.com44bb00?utm_source=Twitter&utm_medium=GDNr&utm_campaign=CAT&gclid1234
6   Bob     http//mywebsite.com44bb00?utm_source=ADW&utm_medium=GDN&utm_campaign=DOG&gclid1234
7   Mark    http//mywebsite.com44bb00?utm_source=Twitter&utm_medium=banner&utm_campaign=MONK&gclid1234
8   Anna    http//mywebsite.com44bb00?utm_source=Facebook&utm_medium=banner&utm_campaign=MONK&gclid1234", header=TRUE, stringsAsFactors=FALSE) 
```

用于`strsplit`在每个分隔源字符串`?`：

```
z <- matrix(
  unlist(strsplit(gsub(".*\\?", "", x$Source), "\\&")), 
  ncol=4, byrow=TRUE)
cbind(x$UUID, gsub(".*=", "", z))

     [,1]      [,2]         [,3]     [,4]   [,5]       
[1,] "Jane"    "ADW"        "banner" "Monk" "gclid1234"
[2,] "Mike"    "Google"     "cpc"    "DOG"  "gclid1234"
[3,] "John"    "Yahoo"      "banner" "DOG"  "gclid1234"
[4,] "Sarah"   "Facebookdw" "cpc"    "CAT"  "gclid1234"
[5,] "Michael" "Twitter"    "GDNr"   "CAT"  "gclid1234"
[6,] "Bob"     "ADW"        "GDN"    "DOG"  "gclid1234"
[7,] "Mark"    "Twitter"    "banner" "MONK" "gclid1234"
[8,] "Anna"    "Facebook"   "banner" "MONK" "gclid1234" 
```

* * *

然后转换为数据框并添加名称：

```
z <- matrix(
  unlist(strsplit(gsub(".*\\?", "", x$Source), "\\&")), 
  ncol=4, byrow=TRUE)
z <- cbind(x$UUID, gsub(".*=", "", z))
z <- as.data.frame(z[, -5])
names(z) <- c("UUID", "UTM_SOURCE", "UTM_MEDIUM", "UTM_CAMPAIGN")
z

     UUID UTM_SOURCE UTM_MEDIUM UTM_CAMPAIGN
1    Jane        ADW     banner         Monk
2    Mike     Google        cpc          DOG
3    John      Yahoo     banner          DOG
4   Sarah Facebookdw        cpc          CAT
5 Michael    Twitter       GDNr          CAT
6     Bob        ADW        GDN          DOG
7    Mark    Twitter     banner         MONK
8    Anna   Facebook     banner         MONK 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:42:34.500

这是我的做法

```
> file1 <- read.csv("C:/Users/Dumitru Ostaciu/Desktop/Users.csv")
> file1 <- transform(file1, Source = as.character(Source))
> z <- matrix(
     unlist(strsplit(gsub(".*\\?", "", file1$Source), "\\&")), 
     ncol=4, byrow=TRUE)
> file2 <- cbind(file1$UUID, gsub(".*=", "", z)) 
```

这是我得到的结果

```
 V1  V2          V3      V4      V5
1   3   ADW         banner  Monk    gclid1234
2   7   Google      cpc     DOG     gclid1234
3   4   Yahoo       banner  DOG     gclid1234
4   8   Facebookdw  cpc     CAT     gclid1234
5   6   Twitter     GDNr    CAT     gclid1234
6   2   ADW         GDN     DOG     gclid1234
7   5   Twitter     banner  MONK    gclid1234
8   1   Facebook    banner  MONK    gclid1234 
```

我需要指出，我的真实数据将有 500.000 行，并且在第一列中会有一个唯一的名称。

如何解决此问题以使名称显示在 V1 中？我的错误是什么？

# mysql - CASCADE DELETE 如何删除子行

> ID：13471957
> 
> 赞同：0
> 
> 时间：2012-11-20T11:10:54.537
> 
> 标签：mysql, innodb, cascade

我有 3 张桌子

`player`, `goal`,`card`

我应该如何构建我的数据库，以便它自动删除`goal`并`card`包含行`player id`？

我的表声明我想我应该添加删除级联但我不太了解它所以你们能帮我吗？

```
CREATE TABLE IF NOT EXISTS `#__footsal_players` (
`id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT,

`ordering` INT(11)  NOT NULL ,
`state` TINYINT(1)  NOT NULL DEFAULT '1',
`checked_out` INT(11)  NOT NULL ,
`checked_out_time` DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00',
`created_by` INT(11)  NOT NULL ,
`id_team` INT(11)  NOT NULL ,
`first_name` varchar(255)  NOT NULL ,
`last_name` varchar(255)  NOT NULL ,
`birth_date` DATE  NOT NULL DEFAULT '0000-00-00',
`email` varchar(255)  NOT NULL ,

 PRIMARY KEY (`id`)
 ) ENGINE=InnoDB DEFAULT COLLATE=utf8_polish_ci

CREATE TABLE IF NOT EXISTS `#__footsal_goals` (
`id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT,

`state` TINYINT(1)  NOT NULL DEFAULT '1',
`checked_out` INT(11)  NOT NULL ,
`checked_out_time` DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00',
`created_by` INT(11)  NOT NULL ,
`id_player` INT(11)  NOT NULL ,
`id_resault` INT(11)  NOT NULL ,
`id_game` INT(11) NOT NULL ,
`goals_number` VARCHAR(255)  NOT NULL ,
`id_session` VARCHAR(11)  NOT NULL ,
PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT COLLATE=utf8_polish_ci;

CREATE TABLE IF NOT EXISTS `#__footsal_yellow_cards` (
`id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT,

`state` TINYINT(1)  NOT NULL DEFAULT '1',
`checked_out` INT(11)  NOT NULL ,
`checked_out_time` DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00',
`created_by` INT(11)  NOT NULL ,
`id_player` INT(11)  NOT NULL ,
`id_game` INT(11) NOT NULL ,
`id_resault` INT(11)  NOT NULL ,
PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT COLLATE=utf8_polish_ci; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:27:47.873

我没有运行 atm 的 MySQL，但下面的代码应该可以实现目标。这个想法是，当您定义外键时，您分配删除和更新规则。这些适用于修改主键（播放器中的 id）时。因此，当播放器中的主键被删除（即播放器被删除）时，具有相应外键的行按照它们的规则运行。Cascade 的意思是“跟随”，所以在这种情况下也将其删除。

```
CREATE TABLE IF NOT EXISTS `#__footsal_goals` (
`id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT,

`state` TINYINT(1)  NOT NULL DEFAULT '1',
`checked_out` INT(11)  NOT NULL ,
`checked_out_time` DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00',
`created_by` INT(11)  NOT NULL ,
`id_player` INT(11)  NOT NULL ,
`id_resault` INT(11)  NOT NULL ,
`id_game` INT(11) NOT NULL ,
`goals_number` VARCHAR(255)  NOT NULL ,
`id_session` VARCHAR(11)  NOT NULL ,
PRIMARY KEY (`id`),
FOREIGN KEY goals_player_fk (`id_player`) 
REFERENCES `#__footsal_players` (`id`)
ON DELETE CASCADE
ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT COLLATE=utf8_polish_ci; 
```

# wordpress - 在 wordpress 中设置多个页面的内容

> ID：13471962
> 
> 赞同：0
> 
> 时间：2012-11-20T11:11:13.943
> 
> 标签：wordpress

嗨，我想做的是在 page.php 文件中为每个页面设置一堆 if 语句，例如 if page == aboutus 显示关于我们的内容等等。目前，无论我在哪个页面上，它都会显示 page.php 文件中的所有内容，我确信它只是我编写它的方式。有谁知道我做错了什么？

这是我到目前为止所拥有的

```
<?php get_head(); ?>

<?php is_page($page); ?>

<?php is_page('about-us'); ?> {

    <div id="container">
    <?php get_header(); ?>
    <?php get_banner(); ?>

        <div class=" center content" role="main">
            <div id="posts">
                <span class="title">About Us</span>     

                <div class="msghead">
                <?php query_posts('cat=7&showposts=1&orderby=date'); while (have_posts()) : the_post(); the_content(); 
                endwhile;?>
                </div>

             </div>

                   <div id="sidebardiv">
                <?php get_sidebar(); ?> </div>
                <div class="clear"> </div>

          </div>

       </div>
    <?php get_footer(); ?>

    </div>

}

<?php is_page('classes'); ?> {

    <div id="container">
    <?php get_header(); ?>
    <?php get_banner(); ?>

        <div class=" center content" role="main">
            <div id="posts">
                <span class="title">Classes</span>     

                <div class="msghead">
                <?php query_posts('cat=7&showposts=1&orderby=date'); while (have_posts()) : the_post(); the_content(); 
                endwhile;?>
                </div>

             </div>

                   <div id="sidebardiv">
                <?php get_sidebar(); ?> </div>
                <div class="clear"> </div>

          </div>

       </div>
    <?php get_footer(); ?>

    </div>

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:16:13.450

一种更简单的方法是用于`is_page('about-us')`检查您的当前页面。

法典：[http ://codex.wordpress.org/Function_Reference/is_page](http://codex.wordpress.org/Function_Reference/is_page)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T11:53:25.590

您实际上并没有检查页面，您只是在运行该`is_page()`功能，然后显示内容。

此外，当您使用 The Loop 时，您应该首先检查是否有要显示的帖子，以避免错误。

并且作为一个提示 - 如果页面中唯一的区别是显示的帖子，您可以在循环之前设置您的参数，这样您就可以删掉很多代码。这是一个带有该方法示例的[Pastebin链接，如下所示。](http://pastebin.com/agx4LQaj)此外，如果模板是 page.php，那么您正在查看的页面已经在循环中，因此您可以利用它来显示页面标题。这是未经测试的，但应该让你开始。

```
<?php get_head(); ?>

<?php if(is_page('about-us')) : ?>

    <div id="container">
    <?php get_header(); ?>
    <?php get_banner(); ?>

        <div class=" center content" role="main">
            <div id="posts">
                <span class="title">About Us</span>     

                <div class="msghead">
                <?php
                query_posts('cat=7&showposts=1&orderby=date');
                if(have_posts()) : while (have_posts()) : the_post();
                        the_content(); 
                    endwhile;
                endif;
                ?>
                </div>

             </div>

                   <div id="sidebardiv">
                <?php get_sidebar(); ?> </div>
                <div class="clear"> </div>

          </div>

       </div>
    <?php get_footer(); ?>

    </div>

<?php elseif(is_page('classes')) : ?>

    <div id="container">
    <?php get_header(); ?>
    <?php get_banner(); ?>

        <div class=" center content" role="main">
            <div id="posts">
                <span class="title">Classes</span>     

                <div class="msghead">
                <?php
                query_posts('cat=7&showposts=1&orderby=date');
                if(have_posts()) : while (have_posts()) : the_post();
                        the_content(); 
                    endwhile;
                endif;
                ?>
                </div>

             </div>

                   <div id="sidebardiv">
                <?php get_sidebar(); ?> </div>
                <div class="clear"> </div>

          </div>

       </div>
    <?php get_footer(); ?>

    </div>

<?php endif; ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T11:58:46.363

你错过了一个`if`声明。

例如

```
<?php if( is_page('about-us') ): ?>
  <p>about-us page here</p>
<?php elseif( is_page('classes') ): ?>
  <p>classes page here</p>
<?php endif; ?> 
```

更直接的方法是为`page-about-us.php`和`page-classes.php`

# android - onBackPressed() 方法在android中无法正常工作

> ID：13471963
> 
> 赞同：1
> 
> 时间：2012-11-20T11:11:17.690
> 
> 标签：android, exception, visibility

我正在做类似的事情。

```
@Override
    public void onBackPressed() {
        homeTabLayout = findViewById(R.id.rel_HomeLayout);
        reviewLayout = findViewById(R.id.scroll_ReviewLayout);

        if (reviewLayout.getVisibility() == View.VISIBLE) {
            reviewLayout.setVisibility(View.GONE);
        } else {

        }
    } 
```

但它引发了以下异常（当我按下 backKey 时）

```
java.lang.NullPointerException 
```

和

```
my.package.name.MainActivity.onBackPressed(MainActivity.java:303) 
```

这是我的 XML 文件，其中不包含此 reviewLayout 和 reviewLayout。

```
 <?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <RelativeLayout
            android:id="@+id/Rel_ScreenFirst"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/top_header_gradient"
            android:paddingBottom="8dp"
            android:paddingTop="8dp" >

            <TextView
                android:id="@+id/txt_Login"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="6dp"
                android:layout_toLeftOf="@+id/txt_Register"
                android:layout_alignParentRight="true"
                android:clickable="true"
                android:text="Login/Register"
                android:textColor="@color/White"
                android:textSize="12sp" />

            <TextView
                android:id="@+id/txt_Shia"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@+id/txt_islamicLibrary"
                android:layout_alignParentLeft="true"
                android:paddingLeft="5dp"
                android:text="Shia"
                android:textColor="@color/White"
                android:textSize="15sp"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/txt_islamicLibrary"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/txt_Shia"
                android:text="IslamicLibrary"
                android:textColor="@color/White"
                android:textSize="23sp"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/txt_dotCom"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@+id/txt_islamicLibrary"
                android:layout_toRightOf="@+id/txt_islamicLibrary"
                android:text=".com"
                android:textColor="@color/White"
                android:textSize="12sp"
                android:textStyle="bold" />
        </RelativeLayout>

        <RelativeLayout
            android:id="@+id/Rel_Spinner"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/Rel_ScreenFirst"
            android:background="@drawable/bottom_header"
            android:padding="5dp" >

            <Spinner
                android:id="@+id/spnrLanguage"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_marginBottom="5dp"
                android:layout_marginLeft="2dp"
                android:paddingLeft="5dp" >
            </Spinner>

            <FrameLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_toLeftOf="@+id/spnrBrowseBy"
                android:layout_toRightOf="@+id/spnrLanguage" >

                <EditText
                    android:id="@+id/EditTxt_Search"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:hint="Search Here..."
                    android:inputType="text"
                    android:selectAllOnFocus="true"
                    android:singleLine="true"
                    android:textSize="12sp"
                    android:textStyle="bold" >
                </EditText>

                <Button
                    android:id="@+id/btn_GO"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="right|center_vertical"
                    android:text="GO" />
            </FrameLayout>

            <Spinner
                android:id="@+id/spnrBrowseBy"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_marginRight="2dp"
                android:paddingLeft="5dp"
                android:text="Browse By" >
            </Spinner>
        </RelativeLayout>

        <RelativeLayout
            android:id="@+id/rel_01"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_below="@+id/Rel_Spinner"
            android:layout_gravity="bottom" >

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="60dp"
                android:layout_alignParentBottom="true"
                android:tabStripEnabled="false" />

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_above="@android:id/tabs"
                android:layout_alignParentLeft="true"
                android:layout_margin="0dp"
                android:background="@drawable/background" >
            </FrameLayout>
        </RelativeLayout>
    </RelativeLayout>

</TabHost> 
```

是的，没错，它不存在于内容布局中。我怎样才能得到这个观点的参考。而实际视图存在于我的 Home.java 文件中。我在 Main.java 文件中执行所有这些代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:13:47.413

我猜你设置的 View 没有 R.id.scroll_ReviewLayout 。所以检查它是否存在于布局xml中或添加一个空检查

```
if (reviewLayout != null && reviewLayout.getVisibility() == View.VISIBLE) {
            reviewLayout.setVisibility(View.GONE);
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:14:36.497

我不知道。但请尝试以下更改

```
homeTabLayout = (RelativeLayout) findViewById(R.id.rel_HomeLayout); //(Relativelayout) is object of rel_HomeLayout. So ,use name of rel_HomeLayout control

 reviewLayout = (RelativeLayout) findViewById(R.id.scroll_ReviewLayout); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T11:13:43.733

只需在该行下方放置一个日志

```
reviewLayout = findViewById(R.id.scroll_ReviewLayout); 
```

并查看 reviewLayout 是否为空

```
 Log.i("Log","reviewLayout " + reviewLayout); 
```

# java - 中介和 CustomEventBanner java

> ID：13471966
> 
> 赞同：0
> 
> 时间：2012-11-20T11:11:46.143
> 
> 标签：java, admob

我想创建一个 CustomEventBanner 但有一些问题。我不确定我是否在正确的地方做正确的事情。我应该在哪里将横幅添加到我的布局中？我必须调用 CustomEventBannerListener 的每个方法吗？哪些是绝对必要的？我怎么知道是否没有广告可显示（没有播音员）？

我实际上可以使用 admob 显示广告，但不能使用我的 CustomAd :(

这是我的代码：

```
public class CustomAd implements CustomEventBanner, AdResponseHandler {
private CustomEventBannerListener bannerListener;
protected SASBannerView mBannerView;

@Override
public void requestBannerAd(final CustomEventBannerListener listener,
        final Activity activity, String label, String serverParameter,
        AdSize adSize, MediationAdRequest mediationAdRequest, Object extra) {
    // Keep the custom event listener for use later.
    this.bannerListener = listener;
    // Determine the best ad format to use given the adSize. If the adSize
    // isn't appropriate for any format, an ad will not fill.
    // Create banner instance
    mBannerView = new SASBannerView(activity);

    // Set the listener to register for events.
    this.mBannerView.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            try {
            listener.onClick();
            } catch (Throwable t) {
            }
        }
    });

    // Load the ad with the ad request giving an AdResponseHandler
    mBannerView.loadAd(42295, "286177", 18008, true, "",  this);
}

@Override
public void destroy() { // The destroy method gets called when the mediation
                        // framework refreshes
    // and removes the custom event. Perform any necessary cleanup here.
    if (this.mBannerView != null) {
        this.mBannerView.onDestroy();
    }
}

@Override
public void adLoadingCompleted(SASAdElement arg0) {
    this.bannerListener.onReceivedAd(this.mBannerView);
}

@Override
public void adLoadingFailed(Exception arg0) {
    this.bannerListener.onFailedToReceiveAd();
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:25:11.247

代码看起来很不错。尽管您的横幅广告似乎在点击时除了通知之外没有做任何事情`onClick()`。如果您的横幅最终到达外部 Web 浏览器或 Play 商店，您也可以在 onClickListener 中调用`onPresentScreen()`和。`onLeaveApplication()`

请注意，这只是您的应用程序中用于实现 SAS 网络的自定义事件组件。您的主要活动仍然需要创建一个 AdView（设置中介 ID 以定位您的自定义事件）并将广告加载到其中。

只有`onReceivedAd`和`onFailedToReceiveAd`对调解运行是绝对必要的。其他的很有用，以便您的主 AdView 的 AdListener 可以监听这些事件。

# sql - 从 SQL Server 中的表中使用连接和求和进行选择

> ID：13471974
> 
> 赞同：0
> 
> 时间：2012-11-20T11:12:11.453
> 
> 标签：sql, algorithm

```
Id       Item
--------------
1        ItemA 
2        ItemB
3        ItemC

itemid     Price
----------------
1          4
1          3
1          9
2          2
2          4
2          3 
```

如何从 2 个表中选择总和？像：

```
ItemA 16
ItemB 9
ItemC 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:16:00.663

您可以`JOIN`使用 a 表格`LEFT JOIN`并将聚合函数`SUM()`应用于该`price`字段：

```
select t1.item, IsNull(sum(t2.price), 0) total
from table1 t1
left join table2 t2
  on t1.id = t2.itemid
group by t1.item 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/a8425/3)

这`LEFT JOIN`将允许不在第二个表中的记录包含在最终结果中。我添加了`IsNull()`以用零`sum()`替换任何值。`null`

结果：

```
|  ITEM | TOTAL |
-----------------
| ItemA |    16 |
| ItemB |     9 |
| ItemC |     0 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:16:00.860

请试试：

```
select a.Item, ISNULL(SUM(b.Price), 0) AS TOTALSum
from Table1 a LEFT JOIN Table2 b on a.Id=b.ItemId
Group by a.Item 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T11:17:34.057

试试这个

```
select item,sum(price) from table1 left outer join table2 
 on table1.id=table2.itemid
 group by item 
```

# sharepoint - SharePoint 2010 内容编辑器 Web 部件不支持 iframe

> ID：13471975
> 
> 赞同：3
> 
> 时间：2012-11-20T11:12:23.987
> 
> 标签：sharepoint, iframe, sharepoint-2010, content-editor

我正在尝试使用 SharePoint 2010 中的 iframe 在内容编辑器 Webpart 中嵌入 SharePoint 网站页面。保存并关闭内容编辑器后，iframe 将被删除。有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:20:46.727

内容编辑器 Web 部件旨在将 HTML 内容添加到 Web 部件页，它并非旨在链接到网站。如果您需要链接到网站，请考虑使用页面查看器 Web 部件。-Microsoft- [参考此链接](https://support.office.com/en-us/article/Display-a-Web-page-on-a-SharePoint-page-by-adding-the-Page-Viewer-Web-Part-7f61feec-9b3d-4805-a960-07636ba59527)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T08:38:03.210

不确定这是否对您有帮助，但我写了一篇关于将 iframe 等视频嵌入富文本字段的博文。

简而言之，它是您通过内容编辑器 Web 部件添加到页面的脚本，之后用户只需将 iframe 代码直接粘贴到富文本字段中，内容就会显示出来。

您还可以将脚本嵌入到您的母版页中。

无论如何，看看它，也许您可​​以根据需要修改脚本

[使用脚本嵌入视频](http://jesper-simonsen.blogspot.dk/2012/11/embed-video-in-sharepoint-2010-blog.html)

# regex - 如何检测python字符串中的最后一位数字

> ID：13471976
> 
> 赞同：3
> 
> 时间：2012-11-20T11:12:30.870
> 
> 标签：regex, string, python-2.7

我需要检测字符串中的最后一位数字，因为它们是我的字符串的索引。它们可能是 2^64，所以不方便只检查字符串中的最后一个元素，然后尝试第二个...等。字符串可能类似于`asdgaf1_hsg534`，即字符串中也可能是其他数字，但中间有某处并且它们与我想要获取的索引不相邻。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T12:51:01.393

这是一种使用方法`re.sub`：

```
import re

input = ['asdgaf1_hsg534', 'asdfh23_hsjd12', 'dgshg_jhfsd86']

for s in input:
    print re.sub('.*?([0-9]*)$',r'\1',s) 
```

**输出：**

```
534
12
86 
```

**解释：**

该函数采用 a `regular expression`、 a`replacement string`和`string`您要在以下位置进行替换的 the：`re.sub(regex,replace,string)`

正则表达式`'.*?([0-9]*)$'`匹配整个字符串并捕获字符串末尾之前的数字。括号用于捕获我们感兴趣的匹配部分， `\1`指的是第一个捕获组和`\2`第二个等。

```
.*?      # Matches anything (non-greedy) 
([0-9]*) # Upto a zero or more digits digit (captured)
$        # Followed by the end-of-string identifier 
```

所以我们用我们感兴趣的捕获的数字替换整个字符串。在python中，我们需要为此使用原始字符串`r'\1'`：如果字符串不以数字结尾，则返回空白字符串。

* * *

```
twosixfour = "get_the_numb3r_2_^_64__18446744073709551615"

print re.sub('.*?([0-9]*)$',r'\1',twosixfour)

>>> 18446744073709551615 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:25:04.360

一个简单的正则表达式可以检测字符串末尾的数字：

```
'\d+$' 
```

`$`匹配字符串的结尾。`\d+`匹配一位或多位数字。默认情况下，该`+`运算符是贪婪的，这意味着它匹配尽可能多的数字。所以这将匹配字符串末尾的*所有数字。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-06T23:16:54.553

如果要使用`re.sub`并确保行尾至少有一个数字，则可以使用量词`+`匹配 1 个或多个数字`\d+`，以在没有数字或没有数字的情况下不删除整行仅在行尾。

```
^.*?(\d+)$ 
```

*   `^`线的开始
*   `.*?`尽可能少地匹配除换行符以外的任何字符（非贪婪）
*   `(\d+)`捕获组 1，匹配 1+ 位
*   `$`行结束

或使用负面的后视

```
^.*(?<!\d)(\d+)$ 
```

*   `^`线的开始
*   `.*`尽可能匹配除换行符以外的任何字符
*   `(?<!\d)(\d+)`直接向左侧断言没有数字，然后在第 1 组中捕获 1+ 个数字
*   `$`行结束

[正则表达式演示](https://regex101.com/r/jqGF9A/1)

使用[re.match](https://docs.python.org/3/library/re.html#re.match)时，您可以省略`^`锚点，也可以使用`\A`and`\Z`来声明字符串的[开头和结尾](https://stackoverflow.com/questions/22519318/regex-differences-between-and-a-z)。

[正则表达式演示](https://regex101.com/r/QyYg0c/1)

```
import re

strings = ['asdgaf1_hsg534', 'asdfh23_hsjd12', 'dgshg_jhfsd86', 'test']

for s in strings:
    print (re.sub(r".*?(\d+)$", r'\1',s)) 
```

输出

```
534
12
86
test 
```

* * *

[如果在匹配此注释](https://stackoverflow.com/questions/13471976/how-can-i-detect-last-digits-in-python-string#comment18432253_13473178)中的数字之前应该存在非数字，则可以使用带有单个捕获组的[否定字符类。](https://www.regular-expressions.info/charclass.html#negated)

```
^.*[^\d\r\n](\d+) 
```

*   `^`线的开始
*   `.*`尽可能匹配除换行符以外的任何字符
*   `[^\d\r\n]`否定字符类，匹配除数字或换行符以外的任何字符
*   `(\d+)`捕获组 1，匹配 1+ 位

[正则表达式演示](https://regex101.com/r/tgLaDT/1)

* * *

获取字符串中的最后一位数字（不一定在字符串的末尾）

```
^.*?(\d+)[^\r\n\d]*$ 
```

*   `^`线的开始
*   `.*?`尽可能少地匹配除换行符以外的任何字符（非贪婪）
*   `(\d+)`捕获组 1，匹配 1+ 位
*   `[^\r\n\d]*`否定字符类，匹配除换行符或数字以外的任何字符 0+ 次
*   `$`行结束

[正则表达式演示](https://regex101.com/r/aUNeWe/1)

# c# - 另一个类中的 DownloadStringCompletedEventHandler 回调

> ID：13471983
> 
> 赞同：0
> 
> 时间：2012-11-20T11:12:52.777
> 
> 标签：c#, callback

我有两节课，下面是在我继续问我的问题之前发生的事情的分解......

**我的班级1：**

```
myClass1(){

    myClass2 c2 = new myClass2();
    c2.service();

}

public void myFunction1(){

    Console.Write("Function returned!");

} 
```

**我的班级2：**

```
public void service(){

    callWebService(myFunction1); // The parameter you pass here is the function that control 
                      // will pass back to once the called function is done.

}

public void callWebService(DownloadStringCompletedEventHandler callback){

    //Calls web service and does some other operations

} 
```

最后是问题。正如你在上面看到的，我有 2 个类，class1 调用了 class2 中的一个函数。该函数调用另一个调用 web 服务的类 2 中的函数。一旦该网络服务完成，控制流就会返回到您在函数调用中传递的任何函数。

但这意味着你被困在一个类中，因为回调函数应该在同一个类中。所以问题是，我怎样才能将另一个类中的函数传递为回调函数？

希望所有这些都是有道理的，请不要犹豫，要求任何事情来澄清一下。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:11:10.030

Instead of passing a delegate, use an event:

```
class MyClass1
{
    public MyClass1()
    {
        var c2 = new MyClass2();

        c2.ActionwebServiceCalled += MyCallBack; //register for the event
        c2.CallWebService();
    }

    public void MyCallBack(object sender, DownloadStringCompletedEventArgs e)
    {
        Console.Write("Function returned!");
    }
}

class MyClass2
{
    public event DownloadStringCompletedEventHandler ActionwebServiceCalled;

    public void CallWebService()
    {
        DownloadStringCompletedEventArgs e = null;

        //Calls web service and does some other operations...

        var handler = ActionwebServiceCalled;
        if (handler != null)
            handler(this, e);
    }
} 
```

Having said that, you'd might want to introduce asynchrony to the web service call, in which case the [Task-based Asynchronous Pattern (TAP)](http://www.microsoft.com/en-us/download/details.aspx?id=19957) is the way to go, provided that you have .NET 4 ([or Rx](https://stackoverflow.com/questions/2987439/can-i-use-the-task-parallel-library-in-a-net-3-5-project)). For .NET 3.5 and lower, you'll want to follow the [Asynchronous Programming Model (APM)](http://blogs.msdn.com/b/pfxteam/archive/2009/06/09/9716439.aspx).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:38:55.267

您可以修改`Service`类并将`MyClass1's`方法传递给它。例如，在下面的代码中，函数 `ServiceCallComplete`作为参数传递给`Service`类构造函数。

该函数可以保存为[Action](http://msdn.microsoft.com/en-us/library/system.action.aspx)或[Func](http://msdn.microsoft.com/en-us/library/bb534960.aspx)委托类型（取决于您的回调函数定义）。一旦服务工作完成，调用委托（`_callBack()`）将调用回调函数`MyClass1`。

```
public class MyClass1
{
    //The callback Function
    public void ServiceCallComplete()
    {
        Console.WriteLine("Function returned.");
    }

}

public class Service
{
    //delegate to store the callback function.
    private readonly Action _callBack;

    public Service(Action callBack)
    {
        //store the callback function
        _callBack = callBack;
    }

    public void Method()
    {
        //long running operation
        .
        .
       //Invoke the callback
        _callBack();
    }
}

MyClass1 obj = new MyClass1();
Service svc = new Service(obj.ServiceCallComplete);
svc.Method(); 
```

# sed - sed 在行尾创建 ^M

> ID：13471985
> 
> 赞同：0
> 
> 时间：2012-11-20T11:12:58.850
> 
> 标签：sed, centos

我在 centos 服务器上有一个脚本，我使用 VIM 在服务器上编写了脚本。该脚本用于编辑配置文件。当我在编辑后检查配置文件时，每行未编辑的行末尾都有一个 ^M。编辑的行很好。

```
 cat hibernate.properties | 
    sed -i.bk \
    -e 's%\(^hibernate\.connection\.url\=ristor:jdbc:postgresql:\/\/127\.0\.0\.1/\).*%\'1$dbname'%' \
    -e 's/\(^hibernate\.connection\.username\=\).*/\'1$dbuser'/' \
    -e 's/\(^hibernate\.connection\.password\=\).*/\'1$pws'/' hibernate.properties 
```

这是用于编辑配置文件的代码。为什么将 ^M 放在未编辑的每一行的末尾？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:18:43.947

显示的`^M`可能是某些行上的窗口样式的行尾。在运行脚本之前尝试运行文件[`dos2unix`](http://linuxcommand.org/man_pages/dos2unix1.html)。

例如：

```
dos2unix hibernate.properties 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:19:30.873

这不太可能添加`\r`，更像是文件*已经有了*它们，但`dos`被`vim`. 您的脚本实际上*从*它接触过的每一行中删除了它，`vim`并且不再考虑该文件，因此显示仍然留在其中的`dos`回车符。一旦删除它们（应该这样做），它就不太可能再次发生。`%s/<Ctrl-V><Ctrl-M>$//``vim`

# oracle - Oracle PL/SQL：将字符串分配给原始变量时出现 ORA-06502 错误

> ID：13471988
> 
> 赞同：3
> 
> 时间：2012-11-20T11:13:07.900
> 
> 标签：oracle, plsql

我尝试将一些文本信息加载到 clob 字段中。我将遇到问题的代码简化为以下代码段：

```
DECLARE
    WS_MAIN_CHUNK RAW(12001);
BEGIN
    WS_MAIN_CHUNK := 'Do';
END;
/ 
```

它给了我错误*ORA-06512 PL/SQL: numeric or value error: hex to raw conversion error*。为什么字符串'Do'是一个十六进制值，我该如何修复它->只需将字符串分配给原始变量？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T11:19:26.937

在 Oracle 中，`RAW`数据类型用于存储二进制数据和任何面向字节的数据。您不能直接将字符串值分配给`RAW`数据类型的变量。如果有这样的需要，你可以使用`utl_raw`包和`cast_to_raw`函数来做到这一点：

```
SQL> DECLARE
  2      WS_MAIN_CHUNK raw(12001);
  3  BEGIN
  4      WS_MAIN_CHUNK :=  utl_raw.cast_to_raw('Do');
  5  END;
  6  /

PL/SQL procedure successfully completed 
```

# windows-phone-7 - MvvmCross 动态文本值转换

> ID：13471994
> 
> 赞同：3
> 
> 时间：2012-11-20T11:13:41.620
> 
> 标签：windows-phone-7, xamarin.ios, xamarin.android, xamarin, mvvmcross

据我所知，MvvmCross 本地化插件提供“静态”引擎。我使用以下绑定作为 Conference 中的示例：

```
local:MvxBind="{'Text'{'Path':'TextSource','Converter':'Language','ConverterParameter':'SQLBitsXApp'}}" 
```

`SQLBitsXApp`我希望能够`SQLBitsXApp2`动态更改。目标是找到与天数枚举相关的本地化文本。

有没有办法动态地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:38:42.380

你是对的 - 该绑定中使用的默认 MvxLanguageConverter 实际上仅适用于简单的静态文本。

对于更多涉及的情况，您需要为每种情况构建自己的转换器 - 但希望其中一些可以重复使用。

作为一个起始示例，查看 Conference 示例如何使用[TimeAgoConverter.cs显示推文时间](https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20CirriousConference/Cirrious.Conference.Core/Converters/TimeAgoConverter.cs)

```
public class TimeAgoValueConverter
    : MvxBaseValueConverter
      , IMvxServiceConsumer<IMvxTextProvider>
{
    private IMvxTextProvider _textProvider;
    private IMvxTextProvider TextProvider
    {
        get
        {
            if (_textProvider == null)
            {
                _textProvider = this.GetService<IMvxTextProvider>();
            }
            return _textProvider;
        }
    }

    public override object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var when = (DateTime)value;

        string whichFormat;
        int valueToFormat;

        if (when == DateTime.MinValue)
        {
            whichFormat = "TimeAgo.Never";
            valueToFormat = 0;
        }
        else
        {
            var whenUtc = when.ToUniversalTime();
            var difference = (DateTime.UtcNow - whenUtc).TotalSeconds;
            if (difference < 30.0)
            {
                whichFormat = "TimeAgo.JustNow";
               valueToFormat = 0;
            }
            // ... etc
        }

        var format = TextProvider.GetText(Constants.GeneralNamespace, Constants.Shared, whichFormat);
        return string.Format(format, valueToFormat);
    }
} 
```

这在 Android axml 中使用，如[https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20CirriousConference/Cirrious.Conference.UI.Droid/Resources/Layout/ListItem_Tweet.xml](https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20CirriousConference/Cirrious.Conference.UI.Droid/Resources/Layout/ListItem_Tweet.xml)：

```
<TextView
 android:id="@+id/TimeTextView"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:textSize="10dip"
 android:textColor="@color/icongrey"
  local:MvxBind="{'Text':{'Path':'Item.Timestamp','Converter':'TimeAgo'}}"
   /> 
```

# java - 无需创建 dsn 的 jdbc odbc 连接

> ID：13471997
> 
> 赞同：0
> 
> 时间：2012-11-20T11:13:46.087
> 
> 标签：java, netbeans, jdbc, dsn, jdbc-odbc

我试图在不建立 DSN 的情况下建立 jdbc-Odbc 连接，但抛出异常。我正在使用以下代码，它抛出数据源名称未找到没有默认驱动程序指定的异常。

```
try
{
    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    Connection con=DriverManager.getConnection(
        "Jdbc:Odbc:Driver={Microsoft Access Driver(*.mdb)}; Dbq=d:/new folder/db1.mdb;");
}
catch(Exception ex)
{   
    ex.printStackTrace();
} 
```

建议我这段代码有什么问题。提前谢谢