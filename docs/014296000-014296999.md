# StackOverflow 问答 14296000-14296999

# sql - 需要在 SQL 中查找按 ID 分组的前 3 条记录的平均值

> ID：14296002
> 
> 赞同：2
> 
> 时间：2013-01-12T17:39:40.567
> 
> 标签：sql, postgresql, greatest-n-per-group, average

我有一个包含客户 ID、日期和整数的 postgres 表。我需要找到日期在去年的每个客户 ID 的前 3 条记录的平均值。我可以使用下面的 SQL 使用单个 ID 来执行此操作（id 是客户 ID，周末是日期，maxattached 是整数）。

一个警告：最大值是每月，这意味着我们只查看给定月份中的最大值来创建我们的数据集，因此我们从日期中提取月份。

```
SELECT 
  id,
  round(avg(max),0) 
FROM 
  (
   select 
     id,
     extract(month from weekending) as month,
     extract(year from weekending) as year,
     max(maxattached) as max 
   FROM 
     myTable 
   WHERE
     weekending >= now() - interval '1 year' AND 
     id=110070 group by id,month,year 
   ORDER BY
     max desc limit 3
   ) AS t 
GROUP BY id; 
```

如何扩展此查询以包含所有 ID 和每个 ID 的单个平均数？

以下是一些示例数据：

```
ID     | MaxAttached | Weekending
110070 | 5           | 2011-11-10
110070 | 6           | 2011-11-17
110071 | 4           | 2011-11-10
110071 | 7           | 2011-11-17
110070 | 3           | 2011-12-01
110071 | 8           | 2011-12-01
110070 | 5           | 2012-01-01
110071 | 9           | 2012-01-01 
```

因此，对于此示例表，我希望收到以下结果：

```
ID     | MaxAttached

110070 | 5           
110071 | 8 
```

这会平均每个 ID 在给定月份中的最高值（110070 为 6、3、5，110071 为 7、8、9）

注意：postgres 版本 8.1.15

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T18:09:57.620

首先 -`max(maxattached)`为每个客户和每个月获取：

```
SELECT id,
       max(maxattached) as max_att         
FROM myTable 
WHERE weekending >= now() - interval '1 year' 
GROUP BY id, date_trunc('month',weekending); 
```

接下来 - 为每个客户排名他的所有价值观：

```
SELECT id,
       max_att,
       row_number() OVER (PARTITION BY id ORDER BY max_att DESC) as max_att_rank
FROM <previous select here>; 
```

接下来 - 为每位客户获得前 3 名：

```
SELECT id,
       max_att
FROM <previous select here>
WHERE max_att_rank <= 3; 
```

接下来 - 获取`avg`每个客户的值：

```
SELECT id,
       avg(max_att) as avg_att
FROM <previous select here>
GROUP BY id; 
```

接下来 - 只需将所有查询放在一起并根据您的情况重写/简化它们。

更新：这是一个带有您的测试数据和查询的 SQLFiddle：[SQLFiddle](http://sqlfiddle.com/#!12/a81e6/4)。

UPDATE2：这是适用于 8.1 的查询：

```
SELECT customer_id,
       (SELECT round(avg(max_att),0)
        FROM (SELECT max(maxattached) as max_att         
              FROM table1
              WHERE weekending >= now() - interval '2 year' 
                AND id = ct.customer_id
              GROUP BY date_trunc('month',weekending)
              ORDER BY max_att DESC
              LIMIT 3) sub 
        ) as avg_att
FROM customer_table ct; 
```

这个想法 - 获取您的初始查询并为每个客户运行它（`customer_table`- 对客户来说都是唯一的表`id`）。

这是带有此查询的 SQLFiddle：[SQLFiddle](http://sqlfiddle.com/#!10/a36a6/4)。

仅在 8.3 版上测试（8.1 太旧，无法在 SQLFiddle 上使用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:34:15.353

**8.3版本**

8.3 是我可以访问的最旧版本，所以我不能保证它会在 8.1 中工作

我正在使用一个临时表来计算最好的三个记录。

```
CREATE TABLE temp_highest_per_month as
   select 
     id,
     extract(month from weekending) as month,
     extract(year from weekending) as year,
     max(maxattached) as max_in_month,
     0 as priority
   FROM 
     myTable 
   WHERE
     weekending >= now() - interval '1 year' 
   group by id,month,year;

UPDATE temp_highest_per_month t
SET priority = 
 (select count(*) from temp_highest_per_month t2
  where t2.id = t.id and 
   (t.max_in_month < t2.max_in_month or
     (t.max_in_month= t2.max_in_month and
      t.year * 12 + t.month > t2.year * 12 + t.month)));

select id,round(avg(max_in_month),0)
from temp_highest_per_month
where priority <= 3
group by id; 
```

年份和月份包含在计算优先级中，因此如果两个月的最大值相同，它们仍将正确包含在编号中。

**9.1版本**

与 Igor 的回答类似，但我使用 With 子句来拆分步骤。

```
with highest_per_month as
  ( select 
     id,
     extract(month from weekending) as month,
     extract(year from weekending) as year,
     max(maxattached) as max_in_month
   FROM 
     myTable 
   WHERE
     weekending >= now() - interval '1 year' 
   group by id,month,year),
  prioritised as
  ( select id, month, year, max_in_month,
    row_number() over (partition by id, month, year
                       order by max_in_month desc)
    as priority
    from highest_per_month
   )
select id, round(avg(max_in_month),0)
from prioritised
where priority <= 3
group by id; 
```

# jquery - 如何使用 jquery 运行表单处理？

> ID：14296007
> 
> 赞同：0
> 
> 时间：2013-01-12T17:40:04.907
> 
> 标签：jquery, forms

```
<form id="formReg" action="reg.php" method="post">
. . . 
<button id="sub">Register</button>
</form> 
```

这可行，但我想将按钮`#sub`放在表单标记之外，并使用 jquery 运行表单处理：

```
$("#sub").click( function() {
    $.post( $("#formReg").attr("action")),
    $("#formReg :input").serializeArray();      
}); 
```

它不起作用。有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:44:22.243

你为什么不把按钮放在外面（如你所说）并调用这个：

```
$("#formReg").submit(); 
```

顺便说一句：你应该用它来绑定事件

```
$("#sub").on("click", function(){
... your code ...
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T17:45:08.563

好吧，它可能不起作用，因为表单提交取消了对任何进一步事件侦听器的调用。您应该像这样进行表单处理：

```
$("#formReg").on('submit', function() {
    // process form
    // You can even stop the form submission here,
    // just return 'false' and it will stop.
    // That's very useful for form validation etc.
}); 
```

如果您需要该按钮来提交表单，您可以这样做：

```
$("#sub").on('click', function() {
    $("#sub").submit(); // This will submit the form AND call the event listener. Nice, eh?
}); 
```

无论按钮在页面上的哪个位置，这都应该有效。

**编辑：**
谢谢，fiberFoX，让我想起了`.click()`and的弃用`.submit()`！

**编辑2：**
穆萨是对的，你用`$.post()`错了。但我不知道如果用户被表单提交抛出页面，AJAX 请求是否真的完成。如果您不希望用户转到表单提交到的页面，您应该从提交侦听器返回 false。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T17:45:11.013

如果您尝试通过 ajax 发布表单，则您使用[$.post](http://api.jquery.com/jQuery.post/)错误

```
$("#sub").click( function() {
    $.post($("#formReg").attr("action"), $("#formReg").serialize());    
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T17:45:39.383

试试这个

```
$("#sub").click( function() {
    $.post( $("#formReg").attr("action"), $("#formReg").serialize());
}); 
```

请注意，我在 serialize 方法之后删除了分号，并在表单元素上调用 serialize()。这是如果您想使用 Ajax 来实现的。

如果您只想提交表单，请使用此

```
$("#sub").click( function() {
    $("#formReg").submit();      
}); 
```

# html - 是否可以让 Chrome、FF 和 IE9 将显示值 tableXXX 视为相同？

> ID：14296012
> 
> 赞同：1
> 
> 时间：2013-01-12T17:40:22.340
> 
> 标签：html, css, google-chrome, firefox, internet-explorer-9

请注意以下简单的 jsFiddle - [http://jsfiddle.net/mark69_fnd/DaYCa/28/](http://jsfiddle.net/mark69_fnd/DaYCa/28/)

HTML：

```
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.7.3/build/cssreset/reset-min.css">
  </head>
  <body>
    <div class="container table">
      <div class='thead'>
        <div class='tr'>
          <div class='td'>
            <div class='header'>header</div>
          </div>
        </div>
      </div>
      <div class='tbody'>
        <div class='tr'>
          <div class='td'>
            <div class='content'>content</div>
          </div>
        </div>
      </div>
      <div class='tfoot'>
        <div class='tr'>
          <div class='td'>
            <div class='footer'>footer</div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html> 
```

CSS：

```
html, body {
  height: 100%;
  width: 100%;
  font-family: sans-serif;
}
.container {
  height: 100%;
  width: 100%;
  background-color: #ddd;
  display: table;
}
.thead {
  display: table-header-group;
}
.tbody {
  display: table-row-group;
}
.tfoot {
  display: table-footer-group;
}
.tr {
  display: table-row;
}
.td {
  display: table-cell;
}
.content {
  background-color: #bbb;
  border: solid 1px;
  height: 100%;
}
.header {
  background-color: #999;
  border: solid 1px red;
}
.footer {
  background-color: #999;
  border: solid 1px green;
} 
```

铬合金：

![在此处输入图像描述](../Images/532721ae0d957346cc0bda41291056ee.png)

火狐和 IE9：

![在此处输入图像描述](../Images/53b3f952bb42786bdde784a2d5cd7e57.png)

如何更改代码，使其在所有三种浏览器上看起来都与 Chrome 相同？

PS 固定高度可用于页眉和页脚，但不能用于内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:27:43.683

我玩弄了您的示例，并在表格中重新创建了它，以查看浏览器的行为方式。完全一样： http: [//jsfiddle.net/scheinercc/hXYVm/](http://jsfiddle.net/scheinercc/hXYVm/)
*（在 Mac OS Firefox Aurora/20 和 Chrome 最新稳定版上测试）*

所以我猜 Chrome 所做的有点花招，假设这个结果是开发人员通常想要的。

但是我如何阅读代码：

*   `td`s 高度仅由其子项的字体大小和行高定义。孩子100%的身高是由父母决定的。
*   向 中添加高度`td`将为您`td`提供 100% 的高度，指的是视口（在 Firefox 中 - 我猜在 IE 中），这意味着如果您滚动到页面中间，页脚和页眉将不可见。

Chrome 再次假设，这实际上不是我们（开发人员）所希望的，并通过以下计算得出与以前相同的结果。

我会说，你想要的实际上是：

```
containerHeight = 100% of page height - (headerContainerHeight + footerContainerHeight) 
```

请在这个小提琴中找到一个小的 JS 示例：http:
[//jsfiddle.net/scheinercc/DaYCa/35/](http://jsfiddle.net/scheinercc/DaYCa/35/)
*（在 Mac OS Firefox Aurora/20 和 Chrome 最新稳定版上测试）*

我知道拥有 HTML/CSS 解决方案会更好，但我想不出任何 atm。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:50:51.043

只需将此代码添加到您的 .content Css

```
vertical-align:top; 
```

像这样在 .footer css

```
vertical-align:bottom; 
```

然后测试你的火狐浏览器。它将显示类似于 chorme。

# php - 用户可以看到会话信息吗

> ID：14296014
> 
> 赞同：0
> 
> 时间：2013-01-12T17:40:46.493
> 
> 标签：php

如果我使用 php 开始会话，用户可以看到带有 cookie 的会话变量吗？

我想在会话中保留一些用户信息设置，但我不想让用户知道它们。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T17:41:56.443

会话数据存储在服务器上，而不是 cookie 中。cookie 仅存储一个 ID 以允许服务器查找正确的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T17:43:35.987

不会。会话数据存储在服务器上，相应的`session id`将存储在`Cookie`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T17:42:19.240

不，SESSION 变量位于服务器端，因此从客户端的角度来看，它们无法更改它们。这是我们使用 Sessions 而不是 cookie 的主要原因之一。

有关 SESSION 变量的更多信息可以从[PHP.net的官方文档中找到](http://php.net/manual/en/session.examples.basic.php)

> 会话是根据唯一会话 ID 为单个用户存储数据的简单方法。这可用于在页面请求之间保持状态信息。会话 ID 通常通过会话 cookie 发送到浏览器，并且 ID 用于检索现有的会话数据。ID 或会话 cookie 的缺失让 PHP 知道要创建一个新会话，并生成一个新的会话 ID。
> 
> 默认情况下，PHP 使用由 session.save_handler 设置的内部文件保存处理程序。这会将会话数据保存在服务器上 session.save_path 配置指令指定的位置。
> 
> 可以使用 session_start() 函数手动启动会话。如果 session.auto_start 指令设置为 1，会话将在请求启动时自动启动。
> 
> 会话通常在 PHP 完成执行脚本时自动关闭，但可以使用 session_write_close() 函数手动关闭。

我仍然将其留在这里只是因为我认为这是合法信息，但我同意如果可用，请首先参考官方文档。如果有人可以证明以下陈述是错误的，我将删除它。来自[W3schools](http://www.w3schools.com/php/php_sessions.asp)：

> PHP 会话通过允许您将用户信息存储在服务器上供以后使用（即用户名、购物项目等）来解决这个问题。但是，会话信息是临时的，将在用户离开网站后被删除。如果您需要永久存储，您可能希望将数据存储在数据库中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T17:48:09.647

那么用户可以很容易地获得会话是否已创建或网站是否有会话的信息。但是用户永远无法知道会话中设置的变量。

# mysql - LEFT JOIN 在 MATCH (...) AGAINST (... IN BOOLEAN MODE) 后不起作用

> ID：14296021
> 
> 赞同：0
> 
> 时间：2013-01-12T17:41:39.693
> 
> 标签：mysql, left-join, match-against

这个查询：

```
$user_mail_all=mysql_query("SELECT * 
FROM `mailing` WHERE MATCH (resp) 
AGAINST ('$user_resp' IN BOOLEAN MODE) 
OR `cor`='$username' ORDER BY `id` DESC  LIMIT ".$start.",".$per_page ) 
```

运行良好，但下一个查询：

```
$user_mail_all=mysql_query("SELECT * 
FROM `mailing`WHERE MATCH (resp) 
AGAINST ('$user_resp' IN BOOLEAN MODE) 
OR `cor`='$username' 
LEFT JOIN `mail_views` 
ON mailing.id=mail_views.lid 
AND mail_views.uid=".$_SESSION['uid']." 
ORDER BY `id` DESC  LIMIT ".$start.",".$per_page) 
```

导致错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“LEFT JOIN mail_views ON mailing.id=mail_views.lid AND mail_views.uid=12 ORDER”附近使用正确的语法

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:44:38.897

先加入再匹配

```
$user_mail_all=mysql_query("SELECT * 
FROM `mailing`
LEFT JOIN `mail_views` 
ON mailing.id=mail_views.lid 
WHERE MATCH (resp) 
AGAINST ('$user_resp' IN BOOLEAN MODE) 
OR `cor`='$username' 
AND mail_views.uid=".$_SESSION['uid']." 
ORDER BY `id` DESC  LIMIT ".$start.",".$per_page) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:03:09.123

在您的左连接查询实现中是错误的......它应该是：

select * from `Table1` **left join** `table2` where .....

所以用这个：

```
 $user_mail_all=
                mysql_query(
                             "SELECT * 
                                FROM `mailing`
                           LEFT JOIN `mail_views` 
                                 ON ( mailing.id=mail_views.lid 
                                     AND mail_views.uid=".$_SESSION['uid']".)
                              WHERE MATCH (resp) 
                                    AGAINST ('$user_resp' IN BOOLEAN MODE) 
                                 OR `cor`='$username'
                           ORDER BY `id` DESC  LIMIT ".$start.",".$per_page); 
```

# c++ - 命名空间中类的前向声明

> ID：14296026
> 
> 赞同：1
> 
> 时间：2013-01-12T17:42:17.693
> 
> 标签：c++, namespaces

我如何转发在命名空间中声明一个类。例如下面是一个库的头文件，用户不需要知道私有 myPtr 所以在包含下面的头文件时不需要包含 boost 头文件。那么如何转发声明 boost::shared_ptr 以启用用户代码编译？

**我的类.h**

```
class MyClass
{

private:

  boost::shared_ptr<Mytype> myPtr;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:25:02.130

**TL;DR**`<boost/shared_ptr.hpp>`此处需要包含。没有（智能）方式解决它。`MyType`本身可以前向声明。

当然，您可以只写`#include <boost/shared_ptr.hpp>`在标题的顶部，这样您的用户就不必自己做。提供*自治*标头（即可以首先包含而没有错误的标头）实际上是一种很好的做法。

* * *

前向编译的规则稍微复杂一些。理解它们的原因比尝试记住所有案例更容易。

有两个因素：

*   语义
*   内存属性（大小和对齐）

*语义*：为了访问对象的方法、属性或基类，您需要了解它们。当然，看起来很明显，除了构造函数、赋值运算符和析构函数，即使是自动生成的，也是方法。很容易忘记它们。

*内存属性*：与大多数语言不同，C++ 尝试尽可能高效，这意味着它将在此处为对象分配内存，*而*不是在某处分配内存，并且只在使用点使用指针，除非您指示它这样做当然是这样（通过使用*指针*或*引用*）。为了知道要分配多少，编译器需要查看对象的内部结构，即引擎盖下的内容*。*这意味着即使无法访问确切的详细信息（`private`/ `protected`stuff），它们也需要可见，因此可以看到需要在 8 字节边界上对齐的 24 字节（`shared_ptr`顺便说一下不相关）。

在标准中，我们说对象的*定义*对于这两种需求（方法和内存布局）中的任何一种都是必需的。如果需要定义，那么它必须是显而易见的。

* * *

好的，既然我们知道了原因，我们就可以检查各种事情了。在以下情况下是否需要定义：

*   使用对象作为`sizeof`or`alignof`的参数 **是**（显然，需要内存属性）
*   使用对象作为属性？**是**（需要内存属性）
*   使用对象作为静态属性？**没有**(1)
*   使用指向对象的指针或引用作为属性？**没有**(2)
*   在函数声明中使用对象作为参数？**没有**(3)
*   在函数声明中使用对象作为返回类型？**没有**(3)
*   传递指向对象的指针或引用？**没有**(4)
*   铸造到基类？**是**（对基类的存在和可访问性进行语义检查）
*   转换为另一种类型？*取决于*(5)

(1) 声明不需要任何东西，但是静态属性的定义将需要对象的定义。

(2) 指针是 32 位或 64 位大（取决于您如何编译，...），与对象无关。引用具有实现定义的表示。

(3) 即使按值取/返回！函数定义（如果在其中使用）或函数调用站点可能需要它。

(4) 当然，如果您尝试使用它 (`p->foo()`或`p.foo()`) 那就另当别论了。

(5) 如果需要使用对象的转换运算符，那么显然是必须的；否则，如果您使用其他类型的构造函数，则适用与函数相同的规则（尽管需要其他类型定义）。

我希望现在情况更清楚了。

# visual-studio-2012 - 通过需要身份验证的 Web 代理通过 WebPi 获取软件

> ID：14296028
> 
> 赞同：4
> 
> 时间：2013-01-12T17:42:21.390
> 
> 标签：visual-studio-2012, web-platform-installer

我在公司防火墙后面，我工作的公司有 VS 2012 Ultimate。我想开始使用 VS 2012 为 SharePoint 2013 开发。后来我发现默认安装不包括 SP 2013 的项目模板，但需要安装“Microsoft Office Developer Tools for Visual Studio 2012”，可以在[@http: //msdn.microsoft.com/en-US/office/apps/fp123627](http://msdn.microsoft.com/en-US/office/apps/fp123627)。

此工具通过 Web 平台安装程序安装。MS WebPi 在需要代理身份验证的地方不起作用并引发错误。

是否有“Microsoft Office Developer Tools for Visual Studio 2012”的离线安装程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T23:50:25.067

尝试创建或编辑现有的应用程序配置文件`%ProgramFiles%\Microsoft\Web Platform Installer\WebPlatformInstaller.exe.config`。

[创建一个程序集以提供代理凭据并在](https://stackoverflow.com/questions/2873292/enable-proxy-authentication-for-normal-windows-application)[模块元素](http://msdn.microsoft.com/en-us/library/aa903368%28v=vs.71%29.aspx)中指定该程序集：

```
<configuration>
  <system.net>
    <defaultProxy enabled="true" useDefaultCredentials="false">
      <module type="ProxyCredProvider.DefProxy, ProxyCredProvider, Version=1.0.0.0, Culture=neutral, PublicKeyToken=5e3bf8f3a8a14cca" />
    </defaultProxy>
  </system.net>
</configuration> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-19T16:09:01.550

我有一个更简单的建议对我有用。我建议这是一个**临时**解决方案，因为您的密码是明文。

**1、创建两个Windows环境变量：**

**名称：** *HTTP_PROXY*
**值：** *[http://（您](http://(YOUR)的用户名）：（您的密码）@（代理服务器的 IP 地址）：（代理的端口号）*
**示例：** [http://joe:password123@192.168.1.1:9090](http://joe:password123@192.168.1.1:9090)

**名称：** *HTTPS_PROXY*
**值：** *[https://（您](https://(YOUR)的用户名）：（您的密码）@（代理服务器的 IP 地址）：（代理端口号）*
**示例：** [https://joe:password123@192.168.1.1:9090](https://joe:password123@192.168.1.1:9090)

**2.退出然后重新进入服务器**

**3\. 再次尝试运行 Web Platform Installer**

**如何创建一个 WINDOWS 环境变量**

1.  转到控制面板\系统和安全\系统
2.  选择高级系统设置
3.  选择高级选项卡
4.  单击环境变量.. 按钮
5.  顶部用于当前登录的用户。单击 NEW 按钮添加新的环境变量

# macos - 让 Mac Hazel 通过电子邮件将 .lnk、doc 和 .xls 文件发送到我的印象笔记帐户

> ID：14296032
> 
> 赞同：1
> 
> 时间：2013-01-12T17:42:36.913
> 
> 标签：macos, automation, applescript, email

我正在尝试自动化和简化我的生活。我是榛树和苹果脚本的新手..

我有很多文件，我从网上提取了很多东西。我只需将链接拖到我的桌面上，它会在其中生成一个 .lnk 文件。

我想创建一个 hazel + apple 脚本来查找这些 .lnk 文件并发送一封电子邮件，其中包含附加到我的印象笔记电子邮件地址的链接文件。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T01:46:23.923

在 Hazel 中创建一个新规则。

**我摔倒 ..**

1、扩展-是-*墨水*

**请执行下列操作：**

2、运行AppleScript-*嵌入式脚本*。

单击信息图标以编辑脚本。将此脚本粘贴到其中。使用正确的电子邮件地址、主题、内容集。

```
set theAttachment1 to (POSIX path of theFile)
set subject_ to "subject"
set the_content to "the_content"
tell application "Mail"
    set newMessage to make new outgoing message with properties {subject:subject_, content:the_content & return & return}
    tell newMessage

        set visible to false
        set sender to "my1@mac.com"
        make new to recipient at end of to recipients with properties {address:"their@mac.com"}
        make new attachment with properties {file name:theAttachment1} at after the last paragraph

        (* change save to send to send*)
        send --<<<<---------------- change save to send to send or send to save to save to drafts
        (* change save to send to send*)
    end tell
end tell 
```

3，添加第二个动作以将文件移动到文件夹。如果不是，您可能会一遍又一遍地收到相同的文件。

![在此处输入图像描述](../Images/171dcb0475553e7396d6f33fa5ab448f.png)

# c - 如何教 Eclipse 自定义预处理器指令？

> ID：14296035
> 
> 赞同：1
> 
> 时间：2013-01-12T17:42:43.573
> 
> 标签：c, eclipse, eclipse-cdt, pic

我正在尝试使用 eclipse CDT IDE 使用[CCS C Compiler](http://www.ccsinfo.com/)进行 Microchip PIC 开发。主要是我想使用 eclipse CDT 作为编辑器，所以我创建了一个 makefile 项目。makefile 只是像 makefile 一样调用编译器。这工作得很好。

CCS C 编译器使用了一些非标准的预处理器指令，如, ,`#device`等`#fuses`。编辑器在该指令中添加黄色卷曲下划线和问号，并带有提示：“无效的预处理器指令”。我能做些什么来教 Eclipse 这些自定义预处理器指令吗？正如我所说，通过 makefile 编译工作正常，但卷曲下划线困扰着我。`#asm``#org`

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:09:17.177

使用该`#pragma`指令可以解决问题。因为我使用的指令与编译器高度相关，所以这`#pragma`是要走的路。不是我最初想要的，但它有效。不再显示警告和卷曲下划线。

```
 #pragma device 16F688
      #pragma fuses INTRC_IO,WDT,PUT,MCLR, ... 
```

代替

```
 #device 16F688
      #fuses INTRC_IO,WDT,PUT,MCLR, ... 
```

# c++ - 将参数传递为 std::string 或 const std::string&?

> ID：14296036
> 
> 赞同：2
> 
> 时间：2013-01-12T17:42:50.737
> 
> 标签：c++, string, reference, arguments, pass-by-reference

> **可能重复：**
> [在 C++ 中通过值传递还是通过常量引用传递更好？](https://stackoverflow.com/questions/270408/is-it-better-in-c-to-pass-by-value-or-pass-by-constant-reference)

我在编写文件系统时考虑了这一点。

```
vector<string> getFiles(string path);
vector<string> getFiles(const string& path); 
```

哪个更快？哪个更优雅？

显然`path`永远不会改变`getFiles`方法。

奖励：我使用的是 C++11。有没有办法移动语义可以加快一切？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T17:44:56.030

**黄金法则：**

***“默认情况下总是通过 const 引用传递。”***

这应该是您传递函数参数时的默认选择。您根据情况需要选择其他选项。

*   对于自定义类，它总是更有效。
*   它对用户来说更直观。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T17:47:51.283

在您的情况下，规范的答案是通过 传递参数`const&`，这既是出于性能原因（保证避免复制字符串），也是因为您记录了*意图*。前者仅在您分析了代码并确定传递字符串是瓶颈时才重要 - 如果不是，您主要关注“最佳实践”而不是产生很大的性能差异。

但是对我来说，如果我查看您的函数的签名，则第二个明确指出“我只会读取您的参数而不对它做任何事情”，而第一个则几乎表明您将对参数做一些事情，即使您在处理参数副本时所做的更改对外部不可见。

还有一个额外的好处是，通过 const 引用传递参数可以避免内存分配，如果您在没有无限内存（即所有内存）的系统上工作，这很方便。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T17:47:30.820

使用 by-value 参数可能会更好。看到这篇文章，[想要速度吗？Pass by Value](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)，详细原因。基本上，您在调用函数的方式上为调用者和/或编译器提供了更大的灵活性。Using`const&`强制执行过去是 C++98 的最佳实践，但可能与 C++11 中的移动语义相悖。

# ios - ios arc UILabel.text 内存不断增加

> ID：14296040
> 
> 赞同：1
> 
> 时间：2013-01-12T17:43:02.293
> 
> 标签：ios, memory, label, automatic-ref-counting

我使用**ARC**。我发现内存不断增加。

在 .h 文件中

```
@property (weak, nonatomic) IBOutlet UILabel* contentALabel;
@property (weak, nonatomic) IBOutlet UILabel* contentBLabel; 
```

在 .m 文件中

```
-(void)refreshContent:(NSInteger) itemID
{
    sqlite3 *database;

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docsPath = [paths objectAtIndex:0];
    NSString* databasePath = [docsPath stringByAppendingPathComponent: @"Database.sqlite"];
    if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK) {

        NSString  *sql = [NSString stringWithFormat:@"select contentA,contentB from tableA where  itemID = %d ",itemID,nil];

        char *sqlStatement = (char *)[sql cStringUsingEncoding:NSASCIIStringEncoding];
        sqlite3_stmt *compiledStatement;

        if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK) {

            while(sqlite3_step(compiledStatement) == SQLITE_ROW) {

                NSString *contentA = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 0)];
                NSString *contentB = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 1)];

                contentALabel.text = contentA;
                contentBLabel.text = contentB;
            }
        }

        sqlite3_finalize(compiledStatement);
    }
    sqlite3_close(database);
} 
```

我不断地调用这个函数，我发现我的**内存**在“个人资料”窗口的“生活字节”列中也增加了。

但如果我评论

```
contentALabel.text = contentA;
contentBLabel.text = contentB; 
```

内存不会再增加了。

' **Label.text** ' 有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T06:33:59.523

最重要的是，为 a 设置`text`属性`UILabel`并不能解释这种行为。我倾向于浏览一下[这里](https://stackoverflow.com/a/14105056/1271826)提到的一系列建议。具体来说，寻找泄漏，如果你没有找到任何泄漏，使用分配工具来识别正在创建的内容（并且显然没有发布）。我还设置了一个断点，然后`po [[UIWindow keyWindow] recursiveDescription]`在调试器中键入“”，并确保您没有将其他视图/控件添加到您的窗口层次结构中。

我知道这不会是一个令人满意的答案，但您只需要在 Instruments 上花一点时间，寻找泄漏，如果不明显，只需识别显然没有释放的分配。

# java - Java Servlet 和 JDBC 驱动程序问题

> ID：14296042
> 
> 赞同：2
> 
> 时间：2013-01-12T17:43:19.833
> 
> 标签：java, servlets, driver, loading, classnotfoundexception

从测试 servlet 加载我的驱动程序时出现问题，错误只是

> java.lang.ClassNotFoundException: com.mysql.jdbc.Driver

通过 tomcat 运行 servlet - 由于 localhost:8080 页面显示在浏览器中，因此运行没有问题。servlet 正在尝试连接到 MySQL 工作台中运行的数据库。

我的 servlet 类中的代码，它尝试加载驱动程序：

```
 String driver = "com.mysql.jdbc.Driver";    
        Class.forName(driver).newInstance();
        // Make db connection
        con = DriverManager.getConnection(url, USERNAME, PASSWORD);   
        st  = con.createStatement(); 
```

系统变量设置如下：

> JAVA_HOME: C:\Program Files\Java\jdk1.7.0_02\
> 
> 类路径：C:\apache-tomcat-6.0.35\lib\servlet-api.jar；C:\ProgramFiles\Java\jre7\lib\mysql-connector-java-5.1.22-bin；
> 
> 路径：C:\Program Files\Java\jdk1.7.0_02\bin

现在，据我所见，一切看起来都已正确设置。我将不胜感激有关可能导致问题的任何输入，因为我对如何解决此问题一无所知。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:47:06.423

环境变量`CLASSPATH`仅由命令控制台中的`java`and命令使用`javac`，即使这样也仅在您不使用任何`-cp`,`-classpath`或`-jar`参数时使用。在部署到 Tomcat 的 web 应用程序运行时未使用它。

相反，webapp 的默认类路径包括`/WEB-INF/lib`文件夹。您需要确保将 JDBC 驱动程序 JAR(!) 文件放入其中（*绝对不是*Servlet API JAR 文件！）。

您也不应该将任意 JAR 文件放入JRE`/lib`或文件夹中。`/lib/ext`这将使您的（Web）应用程序不可移植，因为它们不会在`/lib`JRE 文件夹中没有 JDBC 驱动程序 JAR 文件的环境中运行。对于 Web 应用程序，它确实需要放在`/WEB-INF/lib`文件夹中，以便它可以作为 webapp 的一部分分发。

* * *

**与具体问题**无关**`newInstance()`，调用在 MySQL JDBC 驱动程序上是多余的。仅在具有相关错误的旧 MM 驱动程序上才需要。另请参阅[“Class.forName()”和“Class.forName().newInstance()”有什么区别？](https://stackoverflow.com/questions/2092659/what-is-difference-between-class-forname-and-class-forname-newinstance/2093236#2093236)**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T17:47:43.023

类路径的这一部分很奇怪：

```
C:\ProgramFiles\Java\jre7\lib\mysql-connector-java-5.1.22-bin 
```

我本来希望`jar`这里有一些带有驱动程序类的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T17:49:06.630

您的 MySql 驱动程序的类路径似乎是错误的：

应该：

```
/path/mysql-connector-java-ver-bin.jar 
```

[更多信息](http://dev.mysql.com/doc/refman/5.0/en/connector-j-installing-classpath.html)**

# linux - 如何在“screen”中设置日志文件的名称？

> ID：14296043
> 
> 赞同：3
> 
> 时间：2013-01-12T17:43:25.150
> 
> 标签：linux, logging, debian, gnu-screen

是否可以设置`screen`日志文件的名称？通常它被称为`screenlog.n`，但我需要知道我正在编写的脚本的日志的确切名称。我希望有人能帮助我。我在手册页中没有找到任何内容`screen`！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:47:05.080

它有一个`logfile`命令，在手册页中有描述（从 4.01 版开始）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-15T15:21:59.897

当您在 时`screen`，进入命令模式 ( `Ctrl`+ `A`) 并使用以下`:logfile`命令：

> 命令：**logfile** *文件名*
> 命令：**logfile** *flush secs*
> 
> 定义日志文件将获得的名称。默认值为`screenlog.%n`. 第二种形式更改屏幕在将日志文件缓冲区刷新到文件系统之前将等待的秒数。默认值为 10 秒。

日志记录默认是关闭的，所以要打开它，使用命令`:log on`启用日志记录。

> 命令：**日志**[*状态*]
> 
> 开始/结束将当前窗口记录到`screenlog.n`窗口默认目录中的文件，其中 n 是当前窗口的编号。可以使用`logfile`命令更改此文件名。如果没有给出参数，则切换记录状态。如果文件已经存在，则会话日志将附加到文件的先前内容中。当前内容和回滚历史的内容不包含在会话日志中。默认为`off`。

来源：[https ://www.gnu.org/software/screen/manual/html_node/Log.html](https://www.gnu.org/software/screen/manual/html_node/Log.html)

# c# - Mersenne Twister 随机算法我如何播种 init_genrand，随机数总是相同的 C#

> ID：14296049
> 
> 赞同：0
> 
> 时间：2013-01-12T17:43:48.017
> 
> 标签：c#, random, random-sample, mersenne-twister

我正在为 MT19937 使用 A C 程序，初始化改进了 2002/1/26。由 Takuji Nishimura 和 Makoto Matsumoto 编码。在复制源文件并运行随机函数后取自[Codeproject 链接](http://www.codeproject.com/Articles/5147/A-C-Mersenne-Twister-class) ，我总是得到相同的数字。在提到的文件说明中

> 使用前，使用 init_genrand(seed)
> 或 init_by_array(init_key, key_length) 初始化状态。

我怎样才能初始化种子，

构造函数以这种方式初始化它，这导致随机数始终相同：

```
 ulong [] init = new ulong[4];
        init[0]= 0x123;
        init[1]= 0x234;
        init[2]= 0x345;
        init[3] =0x456;
        ulong length = 4;
        init_by_array(init, length); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:50:29.863

要为随机生成器播种，每次执行都需要一个不同的数字。通常使用基于系统时钟的数字，例如：

```
init_genrand((ulong)DateTime.UtcNow.Ticks); 
```

或者：

```
ulong[] init = { (ulong)DateTime.UtcNow.Ticks };
ulong length = init.Length;
init_by_array(init, length); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T17:49:26.810

这似乎对我有用：

```
var rng = new RNGCryptoServiceProvider();
var buffer = new byte[4];

rng.GetBytes(buffer);
uint result = BitConverter.ToUInt32(buffer, 0);

var random = MersenneTwister(result).Next(min, max); 
```

我的一个朋友对类似代码进行了大约一百万次模拟（不是开玩笑），并且在最小/最大范围内得到了很好的数字分布。

**编辑：**不确定你使用的是什么版本，但我的实现有这个重载的构造函数：

```
/// <summary>
/// Initializes a new instance of the <see cref="MersenneTwister"/> class.
/// </summary>
/// <param name="seed">The NONZERO seed.</param>
public MersenneTwister( uint seed )
{
    /* Setting initial seeds to mt[N] using the generator Line 25 of Table 1 in [KNUTH 1981, The Art of Computer Programming Vol. 2 (2nd Ed.), pp102] */
    mt[0] = seed & 0xffffffffU;
    for ( mti = 1; mti < N; ++mti )
    {
        mt[mti] = ( 69069 * mt[mti - 1] ) & 0xffffffffU;
    }
} 
```

# ios - iOS：在状态栏顶部动画启动屏幕

> ID：14296050
> 
> 赞同：0
> 
> 时间：2013-01-12T17:43:51.450
> 
> 标签：ios, uikit, splash-screen

好的，我得到了`UIImageView`应用程序一启动就添加 a 的概念，并对其进行动画处理以伪造启动动画。但是，状态栏会干扰。

我需要一个`UIImageView`最重要的东西，包括状态栏，当它消失时，应用程序会与状态栏一起显示。因此，将状态栏设置为最初隐藏，然后对其进行动画处理不是一个可行的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:03:55.353

你需要的是一秒`UIWindow`或`windowLevel`更高`UIWindowLevelStatusBar`。您将在应用程序委托中创建两个`UIWindow`对象，一个具有常规视图层次结构，另一个具有图像，并为第二个设置动画以淡出（或者您需要设置动画）。两个窗口都应该可见，并且启动窗口位于顶部。

这种方法很复杂，因为您可能会遇到旋转问题，具体取决于您的常规视图层次结构。我们已经在我们的软件中做到了这一点，而且效果很好。

* * *

**编辑：**

适应解决方案（*窗口方法，非常简单*）：

```
UIImageView* splashView = [[UIImageView alloc] initWithImage:[UIImage imageWithBaseName:@"Default"]];
[splashView sizeToFit];

UIViewController* tmpVC = [UIViewController new];
[tmpVC.view setFrame:splashView.bounds];
[tmpVC.view addSubview:splashView];

// just by instantiating a UIWindow, it is automatically added to the app.
UIWindow *keyWin = [UIApplication sharedApplication].keyWindow;
UIWindow *hudWindow = [[UIWindow alloc] initWithFrame:CGRectMake(0.0f, -20.0f, keyWin.frame.size.width, keyWin.frame.size.height)];

[hudWindow setBackgroundColor:[UIColor clearColor]];
[hudWindow setRootViewController:tmpVC];
[hudWindow setAlpha: 1.0];
[hudWindow setWindowLevel:UIWindowLevelStatusBar+1];
[hudWindow setHidden:NO];

_hudWin = hudWindow;

[UIView animateWithDuration:2.3f animations:^{
    [_hudWin setAlpha:0.f];
} completion:^(BOOL finished) {
    [_hudWin removeFromSuperview];
    _hudWin = nil;
}]; 
```

最后，功劳归于[这个家伙](https://stackoverflow.com/a/2664863/456434)。

* * *

更简单的方法是在隐藏状态栏的情况下启动您的应用程序，在视图层次结构的顶部放置您想要动画的视图，并在动画完成后，使用显示状态栏`[[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationSlide]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T10:01:28.020

您可以将子视图添加到 App 的 UIWindow。将 UIImageView 框架的 Y 坐标设置为 -20 像素，以便处理状态栏。

将默认 PNG 图像添加到您的窗口并标记它：

```
static const NSInteger kCSSplashScreenTag = 420; // pick any number!
UIImageView *splashImageView;

// Careful, this wont work for iPad!
if ( [[UIScreen mainScreen] bounds].size.height > 480.0f ) // not best practice, but works for detecting iPhone5.
{
    splashImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Default-568h"]];
}
else
{
    splashImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Default"]];
}

splashImageView.frame = CGRectMake(0.0f, -20.0f, splashImageView.image.size.width, splashImageView.image.size.height);
splashImageView.tag = kCSSplashScreenTag;
[self.window addSubview:splashImageView];
[splashImageView release];

[self _fadeOutSplaceImageView]; 
```

然后淡出

```
- (void)_fadeOutSplashImageView
{
    UIView *splashview = [self.window viewWithTag:kCSSplashScreenTag];
    if ( splashview != nil )
    {
        [UIView animateWithDuration:0.5
                              delay:0.0
                            options:0
                         animations:^{
                             splashview.alpha = 0.0f;
                         }
                         completion:^(BOOL finished) {
                             [splashview removeFromSuperview];
                         }];
    }
} 
```

# java - 通过制作有关灰度值的统计信息，自动从扫描图像中裁剪黑色边框（Java）

> ID：14296051
> 
> 赞同：3
> 
> 时间：2013-01-12T17:44:01.223
> 
> 标签：java, image-processing, crop

我正在编写一段代码来自动检测扫描图像上的黑色嘈杂边框并将其裁剪掉。我的算法基于 2 个变量：灰度平均值（行/列中的像素）和位置（图像中的行/列）。

灰度平均值 图像是灰度的：这意味着任何像素的灰度值都在 0（黑色）、255（白色）范围内。
对于每一行/列像素，我估计该行/列中所有像素的平均灰度值。
如果结果是暗的，则当前行/列是要切断的边框的一部分。

POSITION
位置是行/列距图像左上角的距离（以像素为单位）。

请查看以下图片以获得更好的想法。
扫描图像的缩略图：
![扫描图像的缩略图](../Images/9e8a89b064267c4ecd9eab9c1e16e11f.png)
结果图表：
![产生的字符](../Images/a5cfca4860caa5c8856b27e644834935.png)

通过查看图表很容易估计裁剪点的位置，因为以下规则：大多数样本在实际纸张的白色窄范围（150-200）内，然后在尾部暗值快速变化。
那些快速的变化是裁剪点（还要注意，在尾巴的真正末端仍然可以有几个像素的白色，但这种情况很少发生）。

我想自动完成，有什么统计数据可以帮助我吗？
PS：我是一名计算机工程师，我研究过一些统计数据，但是……太多年前了！！

在最好的情况下，代码应该适用于受黑色边框问题影响的任何扫描图像，但是，真正做到这一点，我会很高兴让它适用于这些示例：
[https ://docs.google.com/folder/ d/0B8ubCWBwsuOON3d1VVo4Z1AxWDA/编辑](https://docs.google.com/folder/d/0B8ubCWBwsuOON3d1VVo4Z1AxWDA/edit)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T05:27:13.443

预处理图像使统计数据更容易。对于您的情况，带有宽水平线的形态闭合，然后是 Otsu 阈值（统计上最优）使任务变得更加容易。形态开口在这里很有趣，因为它会特别使纸张区域更轻。您有两个边界区域模糊的示例，即它也包含浅色部分，但这并不会使这一步毫无用处。之后，只需按列按行求和，根据均值和标准差划定边界即可。如果值低于`mean - x*stddev`，那么它就在纸之外。通过这种方式，您可以定义用于裁剪图像的纸张的左上角和右下角。定义这些角的最简单方法是向前和向后线性遍历找到的总和，当不满足较早的条件时停止。

对于您的图像，`x`在 [-1.5, -1] 范围内有效（以及其他，我在那里测试过）。我将关闭运算符的水平线大小固定为 101 点。以下是结果（如果需要比较，可以包括角坐标）：

![在此处输入图像描述](../Images/b592c5467b670a19aca59ffb14154c3a.png) ![在此处输入图像描述](../Images/5d4d4b4dfb293a86586646ae010f4f49.png)

![在此处输入图像描述](../Images/f0b4bd824ba24b1599137206c0a32ea5.png) ![在此处输入图像描述](../Images/85937aaab1680d71db7e5cfb4f78a621.png)

正如已经指出的那样，问题在于这些图像中的一些还包含白色边框，就像在下一个案例中一样（它们与纸张相连）。为了处理这个问题，在图像是二进制图像之后，考虑应用形态学开口，因为这有望断开组件。你可以使用一个大的结构元素，我使用了 51 x 51 的尺寸之一，这对于你的图像尺寸来说并不是那么大。主要限制是您正在使用的库的实现，因为如果实现不好，这可能会变慢（具体来说，scipy 没有快速实现）。之后，只保留最大的组件并照常进行。

![在此处输入图像描述](../Images/523aa73477eba929f3345ea83f5db108.png) ![在此处输入图像描述](../Images/c4e37fef7654525e54c3b132f7edb745.png)

示例代码：

```
import sys
import numpy
import cv2 as cv
from PIL import Image, ImageOps, ImageDraw
from scipy.ndimage import morphology, label

img = ImageOps.grayscale(Image.open(sys.argv[1]))
im = numpy.array(img, dtype=numpy.uint8)

im = morphology.grey_closing(img, (1, 101))
t, im = cv.threshold(im, 0, 1, cv.THRESH_OTSU)

# "Clean noise".
im = morphology.grey_opening(im, (51, 51))
# Keep largest component.
lbl, ncc = label(im)
largest = 0, 0
for i in range(1, ncc + 1):
    size = len(numpy.where(lbl == i)[0])
    if size > largest[1]:
        largest = i, size
for i in range(1, ncc + 1):
    if i == largest[0]:
        continue
    im[lbl == i] = 0

col_sum = numpy.sum(im, axis=0)
row_sum = numpy.sum(im, axis=1)
col_mean, col_std = col_sum.mean(), col_sum.std()
row_mean, row_std = row_sum.mean(), row_sum.std()

row_standard = (row_sum - row_mean) / row_std
col_standard = (col_sum - col_mean) / col_std

def end_points(s, std_below_mean=-1.5):
    i, j = 0, len(s) - 1
    for i, rs in enumerate(s):
        if rs > std_below_mean:
            break
    for j in xrange(len(s) - 1, i, -1):
        if s[j] > std_below_mean:
            break
    return (i, j)

# Bounding rectangle.
x1, x2 = end_points(col_standard)
y1, y2 = end_points(row_standard)

#img.crop((x1, y1, x2, y2)).save(sys.argv[2]) # Crop.
result = img.convert('RGB')
draw = ImageDraw.Draw(result)
draw.line((x1, y1, x2, y1, x2, y2, x1, y2, x1, y1),
        fill=(0, 255, 255), width=15)
result.save(sys.argv[2]) # Save with the bounding rectangle. 
```

# c# - C#如何创建对象数组？

> ID：14296059
> 
> 赞同：-6
> 
> 时间：2013-01-12T17:44:37.220
> 
> 标签：c#, arrays

我有以下问题。如何在 C# 中创建对象数组？我正在考虑我通常在 PHP 中使用的这种方法：

```
$obj1 = new stdClass();
$obj1->first = "first-str";

$obj2 = new stdClass();
$obj2->second = "second-str";

$objarray = array();

$objarray['first'] = $obj1;
$objarray['second'] = $obj2;

echo $objarray['second']->second; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T17:46:43.143

尝试这个

```
object[] objs = new object[] {obj1, obj2}; 
```

有关数组[http://msdn.microsoft.com/en-us/library/9b9dty7d.aspx的更多详细信息](http://msdn.microsoft.com/en-us/library/9b9dty7d.aspx)

您还可以在[http://www.dotnetperls.com/object-array上找到更多信息](http://www.dotnetperls.com/object-array)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T13:26:38.233

您可以使用 List 类，如果您愿意，也可以使用 Linq 库进行扩展，变得更像查询/PHP。首先，实例化一个列表：

```
List<Object> objects = new List<Object>(); 
```

要填充它，您必须向其中添加对象：

```
objects.Add(obj1);
objects.Add(obj2);
... 
```

然后你可以像这样访问对象实例：

```
// First object:
Object objFirst = objects[0];
// Second object:
Object objSecond = objects[1]; 
```

或者使用 Linq First()、Last() 等等……当然，要使用这些函数（[这里](http://msdn.microsoft.com/en-us/library/bb341635.aspx)是完整列表），您必须将 System.Linq 添加到源文件顶部的 using 指令中，并确保您在项目中引用 System.Core 库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T17:49:53.233

请参阅下面的链接。它很容易

[http://msdn.microsoft.com/en-us/library/aa288453(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa288453(v=vs.71).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T17:50:25.073

[来自 MSDN：](http://msdn.microsoft.com/en-us/library/aa288453%28v=vs.71%29.aspx)

```
string[] names = new string[3] {"Matt", "Joanne", "Robert"};

names[1] == "Joanne" 
```

从您的示例中，也许您想创建[Dictionary](http://www.dotnetperls.com/dictionary)？

```
Dictionary<string, string> dictionary = new Dictionary<string, string>();
dictionary.Add("first", "first-str");
dictionary.Add("second", "second-str");

dictionary["first"] == "first-str" 
```

# spring - RestTemplate - 对“https://api.twitter.com/oauth/request_token”的 POST 请求导致 406（不可接受）；调用错误处理程序

> ID：14296060
> 
> 赞同：3
> 
> 时间：2013-01-12T17:44:38.307
> 
> 标签：spring, code-signing, spring-social

从早上开始，我一直在努力了解如何在我的 webApp (Spring-MVC) 和 Spring-Social 之间实现登录功能。我正在使用 XML 配置，它似乎工作得很好。我在登录时遇到了麻烦，例如 twitter。我向您展示我的堆栈跟踪打印结果：

```
InvocableHandlerMethod - Invoking [signIn] method with arguments [twitter, ServletWebRequest: uri=/SitiPreventivi/signin/twitter;client=127.0.0.1;session=6EE8AE04F40C32C823646844BF36378B]
2013-01-12 18:21:16,168 DEBUG [http-bio-8080-exec-7] HttpAccessor - Created POST request for "https://api.twitter.com/oauth/request_token"
2013-01-12 18:21:16,169 DEBUG [http-bio-8080-exec-7] RestTemplate$AcceptHeaderRequestCallback - Setting request Accept header to [application/x-www-form-urlencoded, multipart/form-data]
2013-01-12 18:21:17,317 WARN [http-bio-8080-exec-7] RestTemplate - POST request for "https://api.twitter.com/oauth/request_token" resulted in 406 (Not Acceptable); invoking error handler
2013-01-12 18:21:17,326 DEBUG [http-bio-8080-exec-7] InvocableHandlerMethod - Method [signIn] returned [org.springframework.web.servlet.view.RedirectView: unnamed; URL [/signin?error=provider]]
2013-01-12 18:21:17,326 DEBUG [http-bio-8080-exec-7] DispatcherServlet - Rendering view [org.springframework.web.servlet.view.RedirectView: unnamed; URL [/signin?error=provider]] in DispatcherServlet with name 'SitiPreventivi Servlet'
2013-01-12 18:21:17,326 DEBUG [http-bio-8080-exec-7] AbstractView - Rendering view with name 'null' with model {} and static attributes {} 
```

我只向您展示有关我的问题的相关部分。如您所见，发出了对正确 url 的发布请求，但我收到了 406 错误，我无法解释。有没有办法解决问题？

提前致谢。

克劳迪奥

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:26:20.867

我通过在 Twitter 应用程序设置中设置回调 URL 解决了这个问题。

您可以[在此处](http://forum.springsource.org/showthread.php?119888-twitter-406-error)找到更多详细信息：

值得注意的是，twitter 不接受回调 URL 为 localhost:8080... 因此，如果您希望回调 URL 为 localhost，您可以在计算机上编辑 Host 文件并添加 localhost 名称解析。例如：

127.0.0.1 local.your-domain.com

然后，您可以将回调 URL 设置为`http://local.your-domain.com:8080/`

# python - matplotlib 是否仍在维护

> ID：14296062
> 
> 赞同：0
> 
> 时间：2013-01-12T17:44:46.690
> 
> 标签：python, matplotlib, maintenance

由于 matplotlib 维护者最近过去了，我怀疑这个库是否仍在维护？我在它的主页上，但那里没有这样的信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T17:48:58.250

是的，图书馆仍在维护中。John Hunter 是库的创建者，而不是唯一的维护者。

例如，[GitHub 存储库](https://github.com/matplotlib/matplotlib/commits/master)有很多最近的提交。也有[至少 100 个贡献者](https://github.com/matplotlib/matplotlib/graphs/contributors)（在 jdh2358 旁边，John 的 GitHub 帐户）。GitHub matlibplot 组织列出了[除 John 之外的 12 个成员](https://github.com/matplotlib?tab=members)；这些人都帮助维护项目。

# java - 有关在 Spring MVC 中使用 @ModelAttribute 注释方法参数的一些信息

> ID：14296064
> 
> 赞同：0
> 
> 时间：2013-01-12T17:44:47.767
> 
> 标签：java, spring, spring-mvc, annotations

我正在研究 Spring MVC Showcase 项目，可从 STS 仪表板下载

我有以下情况对我来说并不完全清楚：

我有以下表格：

```
<form id="readForm"action="<c:url value="/messageconverters/form" />" method="post">
        <input id="readFormSubmit"type="submit"value="Read Form Data"/>             
</form> 
```

与具有 id="readForm" 的表单的提交操作相关，**我有以下 Jquery 函数，它简单地执行一个 AJAX 调用 hadding 到请求的 body 字段两个 valorized 文本变量：**foo=bar**和**fruit=apple**

```
$("#readForm").submit(function() {
    var form = $(this); // Contiene il riferimento all'elemento form submittato 

    // Contiene il riferimento all'emento input all'interno del form (il bottone)
    var button = form.children(":first");

    $.ajax({ 
        type: "POST",               // Tipo di Request: POST 
        // URL specificato dall'attributo "action" del form: "/messageconverters/form" 
        url: form.attr("action"),   
        // Dati che vengono passati all'interno del campo body dell'HTTP Request, 2 variabili
        data: "foo=bar&fruit=apple", 

        // Tipo di media type accettabile dalla response
        contentType: "application/x-www-form-urlencoded", 
        dataType: "text", // Tipo di dati passato dalla HTTP Request 

        success: function(text) {       // Caso di successo: 
            MvcUtil.showSuccessResponse(text, button); 
        }, 

        error: function(xhr) {          // Caso di errore:
            MvcUtil.showErrorResponse(xhr.responseText, button); 
        }
    });
    return false;
}); 
```

我的控制器类处理这个请求的方法如下：

```
@RequestMapping(value="/form", method=RequestMethod.POST)
public @ResponseBody String readForm(@ModelAttribute JavaBean bean) {
    return "Read x-www-form-urlencoded: " + bean;
} 
```

**好的，该方法将带有@ModelAttribute**注释的 JavaBean 对象作为输入参数。

查看示例定义的 JavaBean 类，我有：

```
@XmlRootElement
public class JavaBean {

    @NotNull
    private String foo;
    @NotNull
    private String fruit;

    public JavaBean() {
    }

    public JavaBean(String foo, String fruit) {
        this.foo = foo;
        this.fruit = fruit;
    }

    // GETTER e SETTER METHOD
} 
```

因此，JavaBeans 包含两个与表单变量同名的属性，这些属性在我提交表单时生成的 HTTP 请求中传递

阅读**@ModelAttribute**注释文档（[http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/bind/annotation/ModelAttribute.html](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/bind/annotation/ModelAttribute.html)）我发现我可以使用它**既要注释方法，又要注释方法参数**。

我的情况是第二种情况，对于这种情况，我可以阅读：**将方法参数或方法返回值绑定到命名模型属性的注释，暴露给 Web 视图**

那么具体是什么意思呢？

我认为，如果我用这个注释注释一个方法参数，这意味着如果在 HTTP 请求的正文中传递的变量名称与我的注释对象的变量匹配，Spring 会自动复制这个变量的值在具有相同属性的属性中注释对象中的名称

但我不确定这...

有人可以帮我理解这件事吗？

Tnx安德烈亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-21T07:45:03.083

我的回答可能会迟到，但我正在研究相同的内容并发现这个链接很有趣。

它提供了在方法级别使用 @ModelAttribute() 的理解，这与 @SessionAttribute 注释配合得很好。 [http://www.intertech.com/Blog/understanding-spring-mvc-model-and-session-attributes/](http://www.intertech.com/Blog/understanding-spring-mvc-model-and-session-attributes/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T08:05:21.063

我不这么认为。@ModelAttribute 与 HTTP 请求参数无关。当您注释方法参数时，例如：

```
public String foo(@ModelAttribute ("petKey") Pet pet){
} 
```

您将拥有一个来自控制器***模型***对象的“宠物”对象。***Spring 将在模型***映射对象中搜索“petKey” 。

当你注释你的方法时：

```
@ModelAttribute ("petKey")
public Pet foo(){
   return new Pet;
} 
```

在执行方法并从方法返回后，Spring会将“ *new Pet* ”作为值，将“petKey”作为***模型***对象（map）中的键。

# java - 向局域网上的所有人广播

> ID：14296070
> 
> 赞同：6
> 
> 时间：2013-01-12T17:45:16.717
> 
> 标签：java, udp, thrift, zeromq

我正在尝试联系 LAN 上的每个人，以了解哪些设备当前正在使用该 ip 并运行我的服务。运行该服务的每台设备都会在它们上线时知道哪些其他设备已连接。我有基本的网络经验（tcp/udp），但我对更复杂的通信包做得不多。我想发布我迄今为止研究/尝试过的内容，并获得一些专家的回复，以限制我在未来潜在解决方案上的试错时间。

**要求：**

*   目前使用java，但需要跨语言通信。
*   必须在可接受的时间范围内（最多几秒）完成，最好是可靠的。
*   我想在广播和以后的通信中使用类似的技术，以避免引入多个包/技术的额外复杂性。
*   目前我正计划对已知 ip 进行心跳以提醒仍然连接，但我可能希望稍后继续广播到 lan。
*   我有兴趣为这项服务使用跨语言 rpc 通信，但这种技术不一定必须使用它。
*   后期通信（非广播）必须可靠。

**研究和尝试的事情：**

*   UDP - 担心跨语言通信，缺乏可靠的交付，并会添加另一种通信方式，而不是使用像下面这样的解决方案。如果可以找到另一个更完整的解决方案，我宁愿避免它。

*   Apache Thrift - 目前我已经尝试遍历所有潜在的 ip 并尝试连接到每一个。这太慢了，因为每次尝试连接的超时都很长（当我调用 open 时）。我还没有找到任何广播选项。

*   ZeroMQ - 用基本的 zeromq 做了很少的测试，但我过去只使用过它的包装器。pub/sub 功能似乎对这种情况很有用，但我担心订阅局域网中的每个 ip。还担心尝试订阅尚未在其上运行服务的ip时会发生什么。

考虑到我的要求，这些建议中的任何一个似乎比其他建议更有效吗？您对可能更好的技术有任何其他建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T20:39:59.420

您指定的基本上是两个独立的问题；发现/监控和服务提供者。由于这两个问题有些正交，我将使用两种不同的方法来实现这一点。

## 发现/监控

让每个设备在预定义端口上通过 UDP 在 LAN 上连续广播（小）心跳/状态消息。此心跳应包含设备的 IP/端口（发送方）以及其他有趣的数据，例如该设备提供的服务的地址（URL）。如果您需要降低带宽利用率，请选择紧凑的消息格式，例如 Protocol Buffers（提供多种语言）或 JSON 以提高可读性。这些消息应定期发布，例如每 5 秒发布一次。

现在，让每个设备监听广播地址上的传入消息，并保留所有已知设备的内存映射 [发送者，最后记录时间 + 其他数据]。每秒迭代一次地图，并删除已沉默 x 个心跳间隔（例如 3 x 5 秒）的发件人。这样每个节点都会知道所有其他响应节点。

您不必知道任何 IP:s，不需要任何额外的目录服务器，也不需要迭代所有可能的 IP 地址。此外，通过 UDP 发送/接收数据比通过 TCP 简单得多，并且不需要任何连接。它还产生更少的开销，这意味着更少的带宽利用率。

## 服务提供者

我假设你会在这里想要某种请求-响应。为此，我会选择一个简单的基于 REST 的基于 HTTP 的 API，即 JSON。如果您的有效负载相当大，则为 Protocol Buffers 切换 JSON 有效负载，但在大多数情况下，JSON 可能工作得很好。

总而言之，这将为您提供一个可靠、高性能、可靠、跨平台且简单的解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T00:20:54.727

查看 ZeroMQ 指南（第 8 章）中的 Zyre 项目。这是一个相当完整的本地网络发现和消息传递框架，逐步开发。您绝对可以重用 UDP 广播和发现，也许其他的也可以。还有一个完整的 Java 实现，[https://github.com/zeromq/zyre](https://github.com/zeromq/zyre)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T17:53:21.670

我会使用 JMS，因为它可以跨平台（至少对于客户端）。您仍然必须决定如何编码数据，除非您有特定的想法，否则我会使用 XML 或 JSON，因为它们易于阅读和检查。

您可以使用 ZeroMQ 来获得更高的性能和更低级别的访问。除非你知道你需要这个，否则我怀疑你不需要。

您可能会受益于 JMS 的更高级别的功能。

顺便说一句：这些服务隐式地进行服务发现。没有特别需要（监控除外）了解 IP 地址或服务是否启动或关闭。他们的设计假设你想保护你不必知道这些细节。

# javascript - 如何为 HTML5 画布制作未知大小的背景？

> ID：14296071
> 
> 赞同：0
> 
> 时间：2013-01-12T17:45:23.720
> 
> 标签：javascript, jquery, html, html5-canvas, image

我希望用户上传图像或指定图像的 URL，然后看起来就像他们在图像之上绘图。所以我可以`<canvas>`用背景图像制作一个元素。但是我事先不知道该图像有多大（如果他们上传了图像，我可以弄清楚）。如何使用 jQuery 处理这个问题？

我知道我可以`$('img#id_name').width`根据该宽度调用并创建一个画布（并以相同的方式获得高度）。但我希望它成为背景图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:59:21.277

您可以在加载后获取图像的原始宽度/高度值，然后使用`css()`定义值的方法。

```
var img = $('img#id_name')[0]; // Get my img elem
var pic_real_width, pic_real_height;
$("<img/>") // Make in memory copy of image to avoid css issues
    .attr("src", $(img).attr("src"))
    .load(function() {
        iWidth = this.width;   // Note: $(this).width() will not
        iHeight = this.height; // work for in memory images.

   $('#canvasEle').css({'width': iWidth + 'px', 'height': iHeight + 'px'});
}); 
```

[计算图像源。](https://stackoverflow.com/a/670433/1428241)

# javascript - 在 Wicket 中使用 javascript (bootstrap)

> ID：14296074
> 
> 赞同：3
> 
> 时间：2013-01-12T17:45:35.423
> 
> 标签：javascript, twitter-bootstrap, wicket

1.  首先，我使用 JavaScript 资源引用在 Wicket 中正确添加了 JavaScript。

    ```
    response.renderJavaScriptReference("http://code.jquery.com/jquery-latest.js");
    response.renderJavaScriptReference(new JavaScriptResourceReference(JSAccessor.class,"bootstrap.js"));
    response.renderJavaScriptReference(new JavaScriptResourceReference(JSAccessor.class,"bootstrap.min.js")); 
    ```

2.  其次，我将引导 CSS 添加到带有 CSS 资源参考的检票口。

    ```
    response.renderCSSReference(new CssResourceReference(CssAccessor.class,
            "bootstrap.css"));
    response.renderCSSReference(new CssResourceReference(CssAccessor.class,
            "bootstrap-responsive.css")); 
    ```

    到目前为止有效。为什么 ？

    我可以在源代码中看到通过浏览器打开的 JavaScript 文件。当我点击文件时

    ```
    <script type="text/javascript" src="./wicket/resource/blablabla.JSAccessor/bootstrap-ver-1357907592544.js"></script> 
    ```

    它显示了浏览器中的 JavaScript 文件。所以它被加载了。

3.  我将所需的标签添加到我的 Html 页面中，如下所述：http: [//twitter.github.com/bootstrap/javascript.html#tabs](http://twitter.github.com/bootstrap/javascript.html#tabs)

    ```
     <ul class="nav nav-tabs">
            <li><a href="#" data-toggle="tab" wicket:id="as2">AS2</a></li>
            <li><a href="#" data-toggle="tab" wicket:id="ftp">FTP</a></li>
            <li><a href="#" data-toggle="tab" wicket:id="long">Long-Running</a></li>
        </ul> 
    ```

并且 JavaScript 不工作...活动选项卡不会显示为活动的。

javascript 调试器控制台向我显示：

```
Error: Syntax error, unrecognized expression: ./wicket/bookmarkable /blablabla.AS2Page  

throw new Error( "Syntax error, unrecognized expression: " + msg ); 
```

当我想访问页面时。

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T12:30:15.587

我建议不要直接绑定到 Twitter Bootstrap，而是使用 wicket-bootstrap 集成。这允许您在 Java 代码中使用更 Wicket 样式的 Bootstrap 组件，而不是用 Javascript 摆弄它们。

该项目可以在以下位置找到：[https](https://github.com/l0rdn1kk0n/wicket-bootstrap) ://github.com/l0rdn1kk0n/wicket-bootstrap 。它有很好的入门说明。对于更高级的用法，我建议研究示例项目。

# file - Clojure 比较文件中的行

> ID：14296079
> 
> 赞同：0
> 
> 时间：2013-01-12T17:46:04.673
> 
> 标签：file, hash, clojure, compare, lines

我必须编写一个 clojure 函数来比较文件中的行。我的文件包含如下信息：

```
{:something1 1
    :something2 2
    :something2 2
    :something3 3
    :something4 4
    :something4 4
} 
```

您可以看到它是为定义哈希而编写的。我想在我的程序中导入哈希，但在这样做之前，我需要删除与其他行相等的每一行。我的线条必须是独一无二的。我怎样才能做到这一点？我尝试了几件事，但它们完全失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:22:49.817

```
(defn read-map-wo-dups [fname]
  (into {}
   (with-open [r (reader fname)]
     (doall (distinct
             (map #(read-string
                    (str "[" (replace % #"[{}]" "") "]"))
                  (line-seq r))))))) 
```

测试：

`data.dat`包含：

```
{:something1 1
 :something2 2
 :something2 2
 :something3 3
 :something3 3
 :something4 4} 
```

结果：

```
(read-map-wo-dups "data.dat")
=> {:something1 1, :something2 2, :something3 3, :something4 4} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T19:38:27.250

这可以分解成更简单的步骤，然后穿入一个简单的“单线”

```
(->> (slurp "data")         ; read the data from the file.
     (re-seq #"[^{} \n]+")  ; split it into strings ignoring \n and { }.
     (partition 2)          ; group it into key, value pairs
     (map vec)              ; turn the pairs into vectors because into wants this.
     (into {}))             ; mash them in turn into a single map.

{":something1" "1", ":something2" "2", ":something3" "3", ":something4" "4"} 
```

或者，如果您更喜欢嵌套形式，您可以编写相同的代码，如下所示：

```
user> (into {} (map vec (partition 2 (re-seq #"[^{} \n]+" (slurp "data")))))
{":something1" "1", ":something2" "2", ":something3" "3", ":something4" "4"} 
```

# javascript - 从集合中获取json以在backbone.js中查看

> ID：14296083
> 
> 赞同：1
> 
> 时间：2013-01-12T17:46:30.820
> 
> 标签：javascript, json, backbone.js

我是backbone.js 的新手，我的应用程序有一些问题。我有一个依赖于 json 数据源的集合。我能够在我的 parse 方法中 console.log json。这足以将集合绑定到我的视图吗？我不明白 fetch 方法的使用。

我的收藏如下所示，

```
(function (collections,model) {
collections.Directory = Backbone.Collection.extend({
        initialize : function(){
            console.log('we are here');
            },
        model:model.item,
        url:'collections/json/data.json',
        parse:function(response){
                console.log(response);
                return response;
            }
    });
})(app.collections,app.models); 
```

我的主视图看起来像这样，

```
(function(views,collections){

views.masterView = Backbone.View.extend({
         el : $("#contacts"),
        initialize : function(){
            console.log('view initialize inside render');
            this.render();
            this.$el.find("#filter").append(this.createSelect());
            this.on("change:filterType", this.filterByType, this);
            this.collection.on("reset", this.render, this);
            this.collection.on("add", this.renderContact, this);
            //console.log('we are here'+app.collections.CollectionItems.fetch());
            console.log('view initialize');
        },

        render : function(){

            this.$el.find("article").remove();
            _.each(this.collection.models,function(item){

                this.renderContact(item);
               },this);

            },
             renderContact: function (item) {
            views.contactView = new app.views.ContactView({
                model: item
            });
            this.$el.append(contactView.render().el);
        },
            getTypes : function () {
            return _.uniq(this.collection.pluck("Qno"));
        },
    createSelect : function () {

        var select = $("<select/>", {
                    html: "<option value='all'>All</option>"
                });
    _.each(this.getTypes(), function (item) {
        var option = $("<option/>", {
            value: item.toLowerCase(),
            text: item.toLowerCase()
        }).appendTo(select);
    });
    return select;
    },
     events: {
            "change #filter select": "setFilter",
            "click #add": "addContact",
            "click #showForm": "showForm"
        },
    setFilter : function(e){
        this.filterType = e.currentTarget.value;
        this.trigger("change:filterType");

    },
    filterByType: function () {
    if (this.filterType === "all") {
        this.collection.reset(contacts);
        routerURL.navigate("filter/all");
    } else {
        this.collection.reset(contacts, { silent: true });
        var filterType = this.filterType,
            filtered = _.filter(this.collection.models, function (item) {
            return item.get("type").toLowerCase() === filterType;
        });
        this.collection.reset(filtered);
        routerURL.navigate("filter/"+filterType);
    }
},
    addContact : function(e){
        e.preventDefault();
        var contModel = {};
        $("#addContact").children("input").each(function(i, el){
            if($(el).val() !== "")
                contModel[el.id] = $(el).val();

        });
        contacts.push(contModel);
        if (_.indexOf(this.getTypes(), contModel.type) === -1) {
                this.collection.add(new Contact(contModel));
                this.$el.find("#filter").find("select").remove().end().append(this.createSelect());
            } else {
                this.collection.add(new Contact(contModel));
            }
    },
    showForm : function(){
        this.$el.find("#addContact").slideToggle();   
    }

        });
      })(app.views,app.collections); 
```

我的模型很简单，看起来像这样，

```
(function ( models ) {
    models.Item = Backbone.Model.extend({
        defaults :{Qno:'1',Desc:'hello'}
        });
})( app.models ); 
```

我有一个 js 文件实例化视图和集合

```
 (function () {

        window.app = {};
        app.collections = {};
        app.models = {};
        app.views = {};
        app.mixins = {};

       $(function(){
                app.collections.CollectionItems = new app.collections.Directory();
                //app.collections.CollectionItems.fetch();
                //console.log(app.collections.CollectionItems.fetch());

                app.collections.CollectionItems.fetch({
                    success: function (collection,response) {
                        console.log(response);
                    }
                });
                //console.log(app.collections.CollectionItems.toJSON());
                console.log('coll started');
                app.views.app = new app.views.masterView({collection: app.collections.CollectionItems});
                console.log('view is jus about fine!!');
                //app.views.pagination = new app.views.PaginatedView({collection:app.collections.paginatedItems});
        });

    var ContactsRouter = Backbone.Router.extend({
    routes: {
        "filter/:type": "urlFilter"
    },
    urlFilter: function (type) {
        master.filterType = type;
        master.trigger("change:filterType");
    }
});

    var routerURL = new ContactsRouter();

    Backbone.history.start();
})(); 
```

我的登陆页面看起来像这样，里面有一个模板

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Backbone.js Web App</title>
        <link rel="stylesheet" href="css/screen.css" />
    </head>
    <body>

        <div id="contacts">

</div>

        <script id="contactTemplate" type="text/template">

            <h1><%= Qno %></h1>

        </script>
        <script src="js/jquery.js"></script>
        <script src="js/underscore-min.js"></script>
        <script src="js/backbone-min.js"></script>
        <script src="app.js"></script>
        <script src="collections/Directory.js"></script>
        <script src="models/item.js"></script>
        <script src="views/masterView.js"></script>
         <script src="views/simpleView.js"></script>
        <!--<script src="js/backbone.paginator.js"></script>-->
    </body>
</html> 
```

我只是无法理解这一点。视图不使用集合数据呈现。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T01:50:47.770

我认为这是因为您的集合上的 fetch 方法是异步执行的，因此在您创建视图时尚未完成（如果您查看控制台，我希望成功回调中的日志语句显示在下面的日志语句之后）。这意味着在填充集合之前调用您的视图渲染方法，并且永远不会触发重置事件（您在视图中绑定到该事件）。

尝试更新实例化所有内容的代码，如下所示：

```
 $(function(){
            app.collections.CollectionItems = new app.collections.Directory();
            //app.collections.CollectionItems.fetch();
            //console.log(app.collections.CollectionItems.fetch());

            app.collections.CollectionItems.fetch({
                success: function (collection,response) {
                    console.log(response);
                    app.views.app = new app.views.masterView({collection: app.collections.CollectionItems});
                }
            });
    }); 
```

# javascript - 谷歌地理编码 API

> ID：14296084
> 
> 赞同：2
> 
> 时间：2013-01-12T17:46:32.320
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在尝试学习如何使用 Google 地理编码 API，但我似乎无法让最简单的示例生成地图。我在 Google 上搜索了替代教程，但一切似乎都井井有条。

显然我一定错过了什么。这是我到目前为止所拥有的：

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=thisstuffisprivate&sensor=false">
        </script>
        <script>
            var map;
            var mapOptions;
            function initialize() {
                try {
                    document.write("Initialize entered");
                    mapOptions = {
                        center: new google.maps.LatLng(-34.397, 150.644),
                        zoom: 8,
                        mapTypeId: google.maps.MapTypeId.ROADMAP
                    };
                    document.write("<br>Map options created");
                    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
                    document.write("<br>Initialize exited");
                } catch (err) {
                    document.write("<br>Error: " + err.message);
                }
            }
        </script>
    </head>
    <body onload="initialize()">
        <div id="map_canvas" style="width:500px;height:300px;">
        </div>
    </body>
</html> 
```

这会产生一个空白页。请注意，我在我的计算机上使用此代码并使用 Firefox 检查结果。这尚未托管在外部服务器上。

谁能帮我弄清楚我犯了什么错误？这将使我能够继续学习如何使用这个 API！

非常感谢 ！

编辑： - 我做了一个小测试，在开头和结尾添加了写入，`initialize()`它似乎没有到达最后一行（在地图创建之后），所以它一定在某个地方失败了。将尝试对此进行调查。

*   修改以考虑宽度和高度。感谢Leftium。

*   经过进一步测试，它似乎在地图创建步骤上失败了。

*   该代码在我的计算机上的 IE、Firefox 或 Chrome 上都不起作用，但似乎适用于其他用户。我使用的是 Windows 8 和所有浏览器的相对较新版本。Javascript 已启用，我已尝试关闭 Windows Defender（以防万一..）。仍然只是一个空白页。

*   我也使用了 API 密钥，但它仍然会产生一个空白页面。

*   对于上面的更新代码，我得到以下输出：

`Initialize entered Map options created Error: a is null`

*   它还会在我的 Windows 7 笔记本电脑上生成一个空白页面，因此这不是与 Windows 8 的兼容性问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:54:08.733

您需要提供“map_canvas” <div> 尺寸：

```
<div id="map_canvas" style="width:500px;height:300px"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T18:34:50.003

Google API 密钥由域名分配，而域名又通过`HTTP_REFERER`标头进行检查。当您在本地计算机上进行测试时，您的请求*将与您为其注册密钥的实时域不*匹配（他们会说`localhost`什么）。

1.  您可以注册一个`http://localhost`密钥并在 localhost 测试期间使用它。
2.  或者——你可以欺骗`HTTP_REFERER`它，让它看起来像是来自你的网站。我不知道 Google 许可协议是否允许这种欺骗。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T01:29:40.037

通过进一步测试，我找到了确切的错误消息和另一个 SO 问题的解决方案。本质上，问题在于 div 实际上没有完全构建，并且 initialize() 调用在它进入 DOM 之前搜索这个元素（如果命名错误，请原谅我）。

解决方案是将调用移到创建 div 的下方。

[Google MAP API 未捕获类型错误：无法读取 null 的属性“offsetWidth”](https://stackoverflow.com/questions/11740663/google-map-api-uncaught-typeerror-cannot-read-property-offsetwidth-of-null)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T18:15:08.030

您可能需要[获取 api 密钥](https://developers.google.com/maps/documentation/javascript/tutorial#api_key)。匿名用户可以提出的请求数量可能会受到限制，这可以解释为什么除了您之外的其他人都能够使用上面的示例加载地图。

您需要像这样更改脚本标签：

```
 <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=SET_TO_TRUE_OR_FALSE">
  </script> 
```

[加载地图 api](https://developers.google.com/maps/documentation/javascript/tutorial#Loading_the_Maps_API)

# c# - 将字符串拆分为自定义列表

> ID：14296086
> 
> 赞同：0
> 
> 时间：2013-01-12T17:46:37.963
> 
> 标签：c#, linq, split

我需要使用 C# 将自定义字符串拆分为以下格式。

以下字符串：`AD=Demo,OU=WEB,OU=IT,L=MyCity,C=MyCountry`，我想以逗号将其拆分为

> List<CustomDictionary> myList = new List<CustomDictionary>();

根据上面的文字和拆分后的内容，**myList**列表应该包含 5 个 CustomDictionary 类型的对象。

```
 object1.Key = AD
 object1.Value = Demo

 object2.Key = OU
 object2.Value = WEB

 object3.Key = OU
 object3.Value = IT

 object4.Key = L
 object4.Value = MyCity

 object5.Key = C
 object5.Value = MyCountry 
```

这是 CustomObject 类

```
 public class CustomDictionary
 {
     public string Key { get; set; }
     public string Value { get; set; }

     public CustomDictionary(string key, string value)
     {
         this.Key = key;
         this.Value = value;
     }
 } 
```

到目前为止，我试过这个：

我在这里卡住了！

```
 List<CustomDictionary> keyVal = new List<CustomDictionary>val.Split(',').Select(x=>x.Split('=')).Select(x=>x.)); 
```

其中**val**是实际的字符串...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T17:53:34.163

使用 linq：

```
var query = from x in str.Split(',')
            let p = x.Split('=')
            select new CustomDictionary(p[0], p[1]);

var list = query.ToList(); 
```

结果，您似乎也想获得一本字典。如果是这样，请尝试以下代码：

```
var dict = str.Split(',').Select(x => x.Split('='))
                         .ToDictionary(x => x[0], x => x[1]); 
```

要处理重复键，您可以将对象存储在[Lookup](http://msdn.microsoft.com/en-en/library/bb460184.aspx)中。只需调用`ToLookup`而不是`ToDictionaty`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T18:01:09.687

第二次拆分后，您`CustomDictionary`从该数组中的项目创建 a ，然后用于`ToList`制作结果列表。

```
List<CustomDictionary> keyVal =
  val.Split(',')
  .Select(x => x.Split('='))
  .Select(a => new CustomDictionary(a[0], a[1]))
  .ToList(); 
```

框架中已经有一个类具有键和值，您可以使用它们来代替：

```
List<KeyValuePair<string, string>> keyVal =
  val.Split(',')
  .Select(x => x.Split('='))
  .Select(a => new KeyValuePair<string, string>(a[0], a[1]))
  .ToList(); 
```

您还可以使用 a`Dictionary<string, string>`而不是键值对列表。它根据键的哈希码存储值，因此通过键获取值比查看列表要快得多（但它不保留项目的顺序）：

```
Dictionary<string, string> keyVal =
  val.Split(',')
  .Select(x => x.Split('='))
  .ToDictionary(a => a[0], a => a[1]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T18:03:09.503

由于您有 2 `OU`s，因此您无法使用`Dictionary`. 而是使用`Lookup`

```
string input = "AD=Demo,OU=WEB,OU=IT,L=MyCity,C=MyCountry";

var dict = Regex.Matches(input, @"(\w+)=([^,$]+)").Cast<Match>()
            .ToLookup(m => m.Groups[1].Value, m => m.Groups[2].Value); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T17:50:29.640

你会这样做：

```
var parts = theString.Split(',');

var myList = new List<CustomDictionary>();
foreach(string part in parts)
{
  var kvp = part.Split('=');
  myList.Add(new CustomDictionary(kvp[0], kvp[1]));
} 
```

这也可以使用 LINQ 完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T17:52:41.353

你`MyString.split(',');`得到的每个字符串怎么样？

```
CO.key = SubString.split('=')[0];
CO.value = SubString.split('=')[1]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-12T17:56:50.323

使用 LINQ：

```
List<CustomDictionary> myList = (from x in input.Split(new char[] { ',' })
                                 select
                                 new CustomDictionary (x.Substring(0, x.IndexOf('=')), x.Substring(x.IndexOf('=') + 1))
                                ).ToList(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-12T18:08:58.617

```
string str = "AD=Demo,OU=WEB,OU=IT,L=MyCity,C=MyCountry";

var result = str.Split(',').Select(s =>
{
    var tmp = s.Split('=');
    return new CustomDictionary(tmp[0], tmp[1]);
}).ToList(); 
```

# macos - rbp / rsp / leave 这个汇编函数序言/尾声代码是做什么的？

> ID：14296088
> 
> 赞同：11
> 
> 时间：2013-01-12T17:46:59.307
> 
> 标签：macos, gcc, assembly, stack, x86-64

我刚刚开始学习使用 GCC 编译器来组装我的代码的 mac 程序集。不幸的是，如果您是初学者，学习如何做到这一点的资源非常有限。我终于设法找到了一些简单的示例代码，我可以开始琢磨它，并且我得到了它的组装和正确运行。这是代码：

```
.text                                           # start of code indicator.
.globl _main                                    # make the main function visible to the outside.
_main:                                          # actually label this spot as the start of our main function.
    push    %rbp                            # save the base pointer to the stack.
    mov     %rsp, %rbp                      # put the previous stack pointer into the base pointer.
    subl    $8, %esp                        # Balance the stack onto a 16-byte boundary.
    movl    $0, %eax                        # Stuff 0 into EAX, which is where result values go.
    leave                                   # leave cleans up base and stack pointers again.
    ret 
```

注释解释了代码中的一些内容（我有点理解第 2 - 5 行的作用），但我不明白其中大部分是什么意思。我确实了解寄存器是什么以及每个寄存器（`rbp`、和）用于什么以及它们有多大的基础知识`rsp`，我也（通常）了解堆栈是什么，但这仍然让我头疼。谁能告诉我这是在做什么？另外，任何人都可以为我指出一个适合初学者的好教程的方向吗？`esp``eax`

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-12T21:34:35.090

Stack是一种遵循[LIFO原则](http://en.wikipedia.org/wiki/LIFO_(computing))的数据结构。日常生活中的堆栈（我的意思是在计算机之外）向上增长，而 x86 和 x86-64 处理器中的堆栈向下增长。请参阅[有关 x86 堆栈的 Wikibooks 文章](http://en.wikibooks.org/wiki/X86_Disassembly/The_Stack)（但请注意代码示例是 Intel 语法中的 32 位 x86 代码，而您的代码是 AT&T 语法中的 64 位 x86-64 代码）。

所以，你的代码做了什么（我在这里的解释是英特尔语法）：

```
push %rbp 
```

推`rbp`入堆栈，实际上减去 8 `rsp`（因为 的大小`rbp`是 8 个字节），然后存储`rbp`到`[ss:rsp]`.

因此，在 Intel 语法中`push rbp`实际上是这样做的：

```
sub rsp, 8
mov [ss:rsp], rbp 
```

然后：

```
mov     %rsp, %rbp 
```

这是显而易见的。只需存储`rsp`into的值`rbp`。

```
subl    $8, %esp 
```

减去 8`esp`并将其存储到`esp`. 实际上这是您的代码中的一个错误，即使它在这里没有引起任何问题。在 x86-64 中，任何以 32 位寄存器（`eax`、`ebx`、`ecx`、`edx`、`ebp`、或）作为目标的指令都会将相应 64 位寄存器（、、、、、或）的最高 32 位设置为零，从而导致堆栈指向低于 4 GiB 限制的指针，有效地执行此操作（在 Intel 语法中）：`esp``esi``edi``rax``rbx``rcx``rdx``rbp``rsp``rsi``rdi`

```
sub rsp,8
and rsp,0x00000000ffffffff 
```

**编辑：**添加以下后果`sub esp,8`。

但是，这在内存小于 4 GiB 的计算机上不会出现问题。在内存超过 4 GiB 的计算机上，可能会导致分段错误。`leave`在您的代码下面进一步返回一个合理的值到`rsp`. 通常在 x86-64 代码中，您`esp`永远不需要（可能不包括一些优化或调整）。要修复此错误：

```
subq    $8, %rsp 
```

到目前为止的指令是标准的进入顺序（`$8`根据堆栈使用情况替换）。[Wikibooks 有一篇关于 x86 函数和堆栈帧的有用文章](http://en.wikibooks.org/wiki/X86_Disassembly/Functions_and_Stack_Frames)（但请再次注意，它使用 Intel 语法的 32 位 x86 汇编，而不是 AT&T 语法的 64 位 x86-64 汇编）。

然后：

```
movl    $0, %eax 
```

这是显而易见的。将 0 存储到`eax`. 这与堆栈无关。

```
leave 
```

这相当于`mov rsp, rbp`跟随`pop rbp`。

```
ret 
```

最后，设置`rip`为存储在的值`[ss:rsp]`，有效地将代码指针返回到调用此过程的位置，并将 8 添加到`rsp`.

# android - VideoVideo - 视频宽度 x 高度 - MediaPlayer 问题

> ID：14296093
> 
> 赞同：5
> 
> 时间：2013-01-12T17:47:09.683
> 
> 标签：android, android-fragments, media-player, android-videoview

我编写了一个重现该问题的示例应用程序：

[https://github.com/blundell/VideoRatioProblemPerDevice](https://github.com/blundell/VideoRatioProblemPerDevice)

[VideoView](http://developer.android.com/reference/android/widget/VideoView.html)文档指出：

> 显示视频文件。... 负责从视频中计算其测量值，以便可以在任何布局管理器中使用，并提供各种显示选项，例如缩放

**问题是三星 Galaxy S3 对视频做了奇怪的事情，不尊重视频的比例。**（也发生在 HTC 设备上）。

全屏片段的活动：

我发现当视频在三星 Galaxy S3 上播放时，它会以不正确的比例播放。看起来它已经被拉伸到视图的高度，而不考虑原始视频的比例。

这里： ![s3](../Images/aaf696f929675590ce67ca1b820a5888.png)

但是，如果我在三星 Galaxy Nexus 上播放视频，则视频的比例正确。

这里： ![n](../Images/636e884d78487422cfa992a8c1e96f69.png)

如果我强制视频占据片段的完整大小，它在 S3 上看起来没问题（因为屏幕的比例就是视频的比例）。但是我不想这样做，因为它**搞砸了在其他地方使用的片段，即 tablet**。

代码是：

带有带有 VideoView 的 Fragment 的 Activity。可以在这里看到：[GITHUB CODE LINK](https://github.com/blundell/VideoRatioProblemPerDevice/tree/master/src/com/example/videotest)

如果你想要一些代码在这里是hte VideoPlayerFragment：

```
public class VideoPlayerFragment extends Fragment {

    private static final String TAG = "VideoPlayer";

    private FitVideoView videoView;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View root = inflater.inflate(R.layout.fragment_video_player, container, false);

        videoView = (FitVideoView) root.findViewById(R.id.surface);

        return root;
    }

    public void playVideo() {
        Uri uri = Uri.parse("android.resource://" + getActivity().getPackageName() + "/" + R.raw.test_vid);
        Log.d(TAG, "Uri is: " + uri);
        setVideoLocation(uri);
        if (!videoView.isPlaying()) {
            videoView.start();
        }
    }

    private void setVideoLocation(Uri uri) {
        try {
            videoView.setVideoURI(uri);
        } catch (Exception e) {
            Log.e(TAG, "VideoPlayer uri was invalid", e);
            Toast.makeText(getActivity(), "Not found", Toast.LENGTH_SHORT).show();
        }
    }

    public void pauseVideo() {
        if (videoView.isPlaying()) {
            videoView.pause();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T11:50:11.173

所以这个问题`VideoView`与`MediaPlayer`+一起出现`SurfaceView`。

**当系统询问视频的宽度 x 高度时，它返回 640x480，而它应该返回 852x480。**

IE

```
@Override
public void onPrepared(MediaPlayer mp) {
    mp.getVideoWidth();
    mp.getVideoHeight();
} 
```

这要么是`MediaPlayer`视频容器/编解码器处理中的错误，要么是视频文件本身的问题。

![GSpot 详细信息](../Images/1a0348270d3c15e38c943d7dea4baea2.png)

无论哪种方式，我都通过将我知道的视频宽度和高度添加到我的代码中来规避它。我已经用这个修复更新了[Git Repo 。](https://github.com/blundell/VideoRatioProblemPerDevice)**黑客警报**

这是我发现[视频的不同尺寸详细信息](https://video.stackexchange.com/questions/5819/how-does-gspot-calculate-recommended-display-size)的问题的链接。

您可以将此修复应用于`VideoView`或直接应用于`MediaPlayer`您`SurfaceView`的选择。这是`VideoView`答案：

```
public class FitVideoView extends VideoView {

    private final int mVideoWidth = 853;
    private final int mVideoHeight = 480;
    private boolean applyFix = true;

    public FitVideoView(Context context) {
        super(context);
    }

    public FitVideoView(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public FitVideoView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        if (applyFix) { // A Toggle so I can see both results
            // This doesn't ask the video for it's size, but uses my hardcoded size
            applyFix(widthMeasureSpec, heightMeasureSpec);
        } else {
            // This asks the video for its size (which gives an incorrect WxH) then does the same code as below
            super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        }
    }

    private void applyFix(int widthMeasureSpec, int heightMeasureSpec) {
        int width = getDefaultSize(mVideoWidth, widthMeasureSpec);
        int height = getDefaultSize(mVideoHeight, heightMeasureSpec);
        if (mVideoWidth > 0 && mVideoHeight > 0) {
            if (mVideoWidth * height > width * mVideoHeight) {
                Log.d("TAG", "image too tall, correcting");
                height = width * mVideoHeight / mVideoWidth;
            } else if (mVideoWidth * height < width * mVideoHeight) {
                Log.d("TAG", "image too wide, correcting");
                width = height * mVideoWidth / mVideoHeight;
            } else {
                Log.d("TAG", "aspect ratio is correct: " + width + "/" + height + "=" + mVideoWidth + "/" + mVideoHeight);
            }
        }
        Log.d("TAG", "setting size: " + width + 'x' + height);
        setMeasuredDimension(width, height);
    }
} 
```

# javascript - 让 socket.io 在 Windows 7 x64 位平台上工作

> ID：14296094
> 
> 赞同：1
> 
> 时间：2013-01-12T17:47:20.230
> 
> 标签：javascript, node.js, express, socket.io

在 Express 3.x 上的 Windows 7 x64 位环境中安装 socket.io 包给我带来了很大的困难。

我不得不理清几十个或编译错误，我必须安装以下 Windows 7 包，安装过程输出没有错误：

*   Cygwin C++ 编译器
*   Cygin C++ 额外库
*   Microsoft Visual Studio 2010 速成版
*   微软 .NET 框架 v2.0
*   Microsoft 性能工具包 Microsoft Windows SDK 7.1
*   适用于 Windows SDK 7.1 的 Microsoft Visual C++ 2010 SP1 编译器更新。

（Visual Studio 编译器给了我一个警告 C4267（见下文））

尽管安装正确，但我仍然有客户端错误：

```
Error: io is not defined
var socket = io.connect('/'); 
```

我遵循了`socket.io.js`使用 app.js 由 nodejs 服务器提供服务的建议：

```
var express = require('express')
    , http = require('http');

var app = express();
var server = http.createServer(app);
var io = require('socket.io').listen(server); 
```

玉文件中的客户端声明是：

```
script(src='/socket.io/socket.io.js') 
```

我的 socket.io 客户端脚本部分是：

```
var socket = io.connect('/'); 
```

socket.io 安装到我和目录`node-login`所在的目录中。`app/public``app/server`

socket.io 安装日志：

```
D:\dev\node-login>npm install socket.io
npm http GET https://registry.npmjs.org/socket.io
npm http 304 https://registry.npmjs.org/socket.io
npm http GET https://registry.npmjs.org/socket.io-client/0.9.11
npm http GET https://registry.npmjs.org/policyfile/0.0.4
npm http GET https://registry.npmjs.org/base64id/0.1.0
npm http GET https://registry.npmjs.org/redis/0.7.3
npm http 304 https://registry.npmjs.org/socket.io-client/0.9.11
npm http 304 https://registry.npmjs.org/base64id/0.1.0
npm http 304 https://registry.npmjs.org/policyfile/0.0.4
npm http 304 https://registry.npmjs.org/redis/0.7.3
npm http GET https://registry.npmjs.org/uglify-js/1.2.5
npm http GET https://registry.npmjs.org/ws
npm http GET https://registry.npmjs.org/xmlhttprequest/1.4.2
npm http GET https://registry.npmjs.org/active-x-obfuscator/0.0.1
npm http 304 https://registry.npmjs.org/active-x-obfuscator/0.0.1
npm http 304 https://registry.npmjs.org/uglify-js/1.2.5
npm http 304 https://registry.npmjs.org/xmlhttprequest/1.4.2
npm http 304 https://registry.npmjs.org/ws
npm http GET https://registry.npmjs.org/zeparser/0.0.5
npm http GET https://registry.npmjs.org/commander
npm http GET https://registry.npmjs.org/options
npm http 304 https://registry.npmjs.org/zeparser/0.0.5
npm http 304 https://registry.npmjs.org/commander
npm http 304 https://registry.npmjs.org/options

> ws@0.4.25 install D:\dev\node-login\node_modules\socket.io\node_modules\socket
.io-client\node_modules\ws
> (node-gyp rebuild 2> builderror.log) || (exit 0)

D:\dev\node-login\node_modules\socket.io\node_modules\socket.io-client\node_modu
les\ws>node "C:\Program Files\nodejs\node_modules\npm\bin\node-gyp-bin\\..\..\no
de_modules\node-gyp\bin\node-gyp.js" rebuild
  bufferutil.cc
..\src\bufferutil.cc(55): warning C4267: 'initializing' : conversion from 'size
_t' to 'unsigned int', possible loss of data [D:\dev\node-login\node_modules\so
cket.io\node_modules\socket.io-client\node_modules\ws\build\bufferutil.vcxproj]
..\src\bufferutil.cc(66): warning C4267: 'initializing' : conversion from 'size
_t' to 'unsigned int', possible loss of data [D:\dev\node-login\node_modules\so
cket.io\node_modules\socket.io-client\node_modules\ws\build\bufferutil.vcxproj]
C:\Users\Vivaldi\.node-gyp\0.8.17\deps\v8\include\v8.h(183): warning C4506: no
definition for inline function 'v8::Persistent<T> v8::Persistent<T>::New(v8::Ha
ndle<T>)' [D:\dev\node-login\node_modules\socket.io\node_modules\socket.io-clie
nt\node_modules\ws\build\bufferutil.vcxproj]
          with
          [
              T=v8::Object
          ]
     Creating library D:\dev\node-login\node_modules\socket.io\node_modules\soc
  ket.io-client\node_modules\ws\build\Release\bufferutil.lib and object D:\dev\
  node-login\node_modules\socket.io\node_modules\socket.io-client\node_modules\
  ws\build\Release\bufferutil.exp
  Generating code
  Finished generating code
  bufferutil.vcxproj -> D:\dev\node-login\node_modules\socket.io\node_modules\s
  ocket.io-client\node_modules\ws\build\Release\\bufferutil.node
  validation.cc
C:\Users\Vivaldi\.node-gyp\0.8.17\deps\v8\include\v8.h(183): warning C4506: no
definition for inline function 'v8::Persistent<T> v8::Persistent<T>::New(v8::Ha
ndle<T>)' [D:\dev\node-login\node_modules\socket.io\node_modules\socket.io-clie
nt\node_modules\ws\build\validation.vcxproj]
          with
          [
              T=v8::Object
          ]
     Creating library D:\dev\node-login\node_modules\socket.io\node_modules\soc
  ket.io-client\node_modules\ws\build\Release\validation.lib and object D:\dev\
  node-login\node_modules\socket.io\node_modules\socket.io-client\node_modules\
  ws\build\Release\validation.exp
  Generating code
  Finished generating code
  validation.vcxproj -> D:\dev\node-login\node_modules\socket.io\node_modules\s
  ocket.io-client\node_modules\ws\build\Release\\validation.node
socket.io@0.9.13 node_modules\socket.io
+-- base64id@0.1.0
+-- policyfile@0.0.4
+-- redis@0.7.3
+-- socket.io-client@0.9.11 (xmlhttprequest@1.4.2, uglify-js@1.2.5, active-x-obf
uscator@0.0.1, ws@0.4.25)

D:\dev\node-login> 
```

**为什么客户端找不到socket.io.js？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T08:44:03.747

在这里回答：[https ://github.com/LearnBoost/socket.io/issues/944](https://github.com/LearnBoost/socket.io/issues/944)

改变这个

```
var server = http.createServer(app); 
```

进入这个

```
var server = http.createServer(app).listen( 3000 ); 
```

此外，我真的很惊讶你安装它这么痛苦。我同意在 windows 上安装各种与 web 相关的东西比在 linux 上更痛苦，但是 node 和它附带的所有包都不是其中之一。至少我对它没有任何问题，简单的安装和包管理通过`nmp`使它像在 linux 上一样简单。

# shell - 如何防止emacs硬换行

> ID：14296095
> 
> 赞同：-1
> 
> 时间：2013-01-12T17:47:24.770
> 
> 标签：shell, unix, emacs

我正在从 UNIX shell 开发 emacs，而 emacs 始终是硬包装行而不是软包装。我怎样才能改变这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:31:56.237

尝试以下操作：

```
M-x auto-fill-mode RET 
```

# mongodb - MongoDB - 使用 python 更新

> ID：14296096
> 
> 赞同：0
> 
> 时间：2013-01-12T17:47:27.463
> 
> 标签：mongodb, python-2.7

我想尝试向数组添加更多值，但因此两个值必须匹配。我让它与一个值一起工作，但不是两个。这就是我所拥有的：

```
 { "_id" : ObjectId( "50f1a05d00bf6832b03a01cb" ),
  "app" : "494258956",
  "keywords" : [ 
    { "data" : [ 
        { "device" : "software",
          "date" : Date( 1358012509633 ),
          "rank" : 1,
          "shop" : "143443" } ],
      "keyword" : "test" } ] } 
```

当我有关键字“test”和应用程序“494258956”的新“数据”时，应该将一个新集合添加到“数据”中，如下所示：

```
 { "_id" : ObjectId( "50f1a05d00bf6832b03a01cb" ),
  "app" : "494258956",
  "keywords" : [ 
    { "data" : [ 
        { "device" : "software",
          "date" : Date( 1358012509633 ),
          "rank" : 1,
          "shop" : "143443" }
 , { "device" : "software",
          "date" : Date( 1358012599633 ),
          "rank" : 2,
          "shop" : "143443" }],
      "keyword" : "test" } ] } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T06:46:20.690

这似乎符合您的要求（JavaScript 语法）：

```
 coll.update({
        "app": "494258956", 
        "keywords": {
            "$elemMatch": { "keyword": "test" }
        }
    },
    {
        "$push": {
            "keywords.$.data": {
                "device" : "software",
                "date" : new Date( 1358012599633 ),
                "rank" : 2,
                "shop" : "143443" 
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:23:58.020

目前不支持此功能 - 因为位置运算符`$`当前不适用于 upsert。请投票给[SERVER-3326](https://jira.mongodb.org/browse/SERVER-3326)

解决方法可能是重新访问不使用 upsert 的架构设计或多个操作 - 并检查更新的项目数。您必须注意不要达到比赛条件，例如：

1.  在哪里更新`{keywords: {$exists: true}}`
2.  如果 update 返回 0 - 没有关键字执行 upsert： where`{keywords: {$exists: false}}`
3.  如果更新返回 0 - 有一场比赛并且有人添加了关键字现在可以执行第 1 步。

# c++ - 如何在 C++ Builder 6 中将 SQL 计数放入变量中？

> ID：14296101
> 
> 赞同：0
> 
> 时间：2013-01-12T17:47:47.517
> 
> 标签：c++, sql, c++builder

我有这个查询

```
SELECT COUNT (*) FROM Carti WHERE TITLU='" + this->Titlu +"' 
```

我需要将结果放入一个变量中，并且我需要它是整数。这是代码：

```
AnsiString ttl="SELECT COUNT(TITLU) as NR FROM Carti WHERE TITLU='" + this->TitluC +"'";
CarteQuery -> Close();
CarteQuery -> SQL -> Clear();
CarteQuery -> SQL -> Add(ttl); 
CarteQuery -> Transaction -> StartTransaction(); 
CarteQuery -> Open; 
CarteQuery -> FieldByName("NR")->AsInteger; 
```

但是我的程序在这一行迷恋

```
CarteQuery -> FieldByName("NR")->AsInteger; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T10:12:30.193

问题是您没有从多个字段访问单个字段。你需要这样做：

```
CarteQuery->Fields->FieldByName("NR")->AsInteger; 
```

请提供反馈并让我知道这是否有帮助..

# android - Android 向 ArrayAdapter 添加额外的视图，这些视图不是来自正在调整的数组

> ID：14296110
> 
> 赞同：0
> 
> 时间：2013-01-12T17:48:34.203
> 
> 标签：android, listview, android-arrayadapter

我想在 a 中显示一个项目列表`ListView`，并在列表底部显示一个额外的视图（一个“获取更多”按钮），它不是来自原始数组。我想我可以重写`getCount()`以返回我的数组的大小加一作为额外的项目，然后`getView()`如果位置参数大于元素的数量，我将构建自定义视图，但`Choreographer.doCallbacks()`如果计数我会崩溃return 高于列表中的项目数。

有什么我想念的吗？还是一般有更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T17:56:53.297

`ListView.addFooterView()`正是您所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:50:29.117

不要为此使用阵列适配器。您需要编写一个自定义适配器。做起来相当简单，只需要3个方法来写。

# python - 类对象的字典理解

> ID：14296111
> 
> 赞同：0
> 
> 时间：2013-01-12T17:48:34.297
> 
> 标签：python

我正在尝试创建一个员工姓名字典作为具有 FullTime 类对象值的键。我认为我需要的一行代码是：

```
staffClassDict = {employee: FullTime(employee) for employee in staffList} 
```

但是，当我使用此代码时，并没有创建字典，导致整个程序出现很多关键错误。如果我将 替换为`FullTime(employee)`0，则列表将顺利完成。有什么方法可以使用对象实现 dict 理解，还是我应该坚持使用更传统的 for 循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:56:54.373

对我来说很好：

```
>>> class FullTime(object):
...     def __init__(self, name):
...         self.name = name
...     def __repr__(self):
...         return "FullTime(%r)" % self.name
...
>>> staffList = ["Alice", "Bob", "Eve"]
>>> staffClassDict = {employee: FullTime(employee) for employee in staffList}
>>> staffClassDict 
{'Bob': FullTime('Bob'), 'Alice': FullTime('Alice'), 'Eve': FullTime('Eve')} 
```

# hibernate - 嵌入式地图上的 HQL 选择

> ID：14296113
> 
> 赞同：6
> 
> 时间：2013-01-12T17:48:39.477
> 
> 标签：hibernate, localization, hql

我想在我的模型中使用（可搜索的）本地化，我想出了以下模型：

```
@Entity
public class Category {
    ...
    @ElementCollection
    //key = language code (e.g. 'en') and value = localized label
    private Map<String, String> name;
    ...
} 
```

我不想做的是查询在特定本地化中包含不区分大小写的针的类别（例如，英文名称中带有“%abc%”）

我尝试了类似的东西

```
from Category where name.key = :locale and lower(name.value) like :text 
```

但是由于无法*取消引用标量集合元素*异常而失败。

现在休眠文档说，我必须使用 elements() 和 indices() 作为值和键。对于密钥，这将很容易使用`:locale in indices(name)`，但是我如何以不区分大小写的方式匹配此语言环境的一部分值？

以防万一这不适用于我的模型的 hql，我还能如何建模可搜索的本地化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T19:41:59.293

我终于想出了以下解决方案（实际上我很确定它也可以使用平面图而不是可嵌入对象）

```
@Entity
public class Category {
    ...
    @ElementCollection
    @CollectionTable(name = "locale_category_name", joinColumns=@JoinColumn(name="id"))
List<Localization> name;
    ...
}

@Embeddable
public class Localization {
    @NotNull
    public String locale;
    @NotNull
    public String label;
} 
```

和查询（使用 join ... with ...）

```
from Category c join c.name l with (l.locale = :locale and lower(l.label) like :text) 
```

**编辑：**实际上我无法让它与地图一起使用，所以我毕竟使用了@Embeddable 解决方案

# android - 有没有办法扫描我的资产文件夹？

> ID：14296115
> 
> 赞同：2
> 
> 时间：2013-01-12T17:48:42.363
> 
> 标签：android, assets

Android 允许您通过`getAssets()`. 但是，我没有看到任何方法来反省那里的内容，并获得资产的动态列表。

这不可能吗？如果没有，是否有备用位置来保存字体等内容，以便我可以在运行时拉出动态列表？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T17:53:29.343

您可以使用`AssetManager.list(String path)`返回指定路径中所有文件的方法。

# php - 在 PHP 中读取文件时忽略大写字母

> ID：14296124
> 
> 赞同：1
> 
> 时间：2013-01-12T17:49:08.120
> 
> 标签：php, if-statement, letters, capslock

我正在开发一个读取文本文件的程序，查找一个单词，然后根据是否找到该单词显示不同的结果。

有没有办法忽略大写字母？因此，例如，当我在寻找一个词响应时，它会抓取响应、响应、响应、响应等。

代码是：

```
<?php
//1 email;
$file = "1.txt";
$fh = fopen($file, 'r');
$theData = fread($fh, filesize($file));
fclose($fh);

echo "<strong>Email 1 - correct outcome: reply needed <br /></strong>"; 

if (preg_match("/dota(.*?)dota1/s", $theData, $matches))
{
    echo $matches[1]."<br />";
}

$respond   = 'Respond';

$pos = strpos($matches[1], $respond);

if ($pos === false) {
    echo "Reply not needed";
} else {
    echo "Reply needed";

}

echo "<HR>"; 
?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T17:51:12.370

```
$pos = strpos($matches[1], $respond); 
```

应该：

```
$pos = stripos($matches[1], $respond); 
```

[`strpos()`](http://us3.php.net/manual/en/function.strpos.php)区分大小写，而不[`stripos()`](http://us3.php.net/manual/en/function.stripos.php)区分大小写。

# javascript - Wordpress W3C 验证错误

> ID：14296130
> 
> 赞同：0
> 
> 时间：2013-01-12T17:49:47.463
> 
> 标签：javascript, css, wordpress, validation

我正在尝试通过 W3C 上的验证来运行一个站点。

这是它为我提供的错误：

```
<script type="text/javascript" src="http://run-time.co.za/testing/wp-content/themes/AGLj5/script.js"></script>. 
```

您在不允许出现的地方使用了字符数据。

我知道错误是“。” 在结束“标签之后，但是我无法在我的任何wordpress代码文件中找到它以删除“。”

我尝试在“header.php”、“index.php”、“page.php”、“single.php”和“home.php”文件中进行搜索，但找不到。

如果我检查 Google Chrome 中的元素，它会显示没有“。”的那行代码。

但是，如果我在 Chrome 中的检查元素选项中检查 .css 文件，那么它会将该行显示为 .css 的一部分，但是如果我在 Wordpress 中查看，则不存在引用 .js 的那一行。

请有人可以帮助我在我的 wordpress 文件中找到这行代码，以便我可以解决问题

谢谢

[网站链接](http://www.run-time.co.za/testing)

# ios - Phonegap 确认警报

> ID：14296131
> 
> 赞同：0
> 
> 时间：2013-01-12T17:49:48.577
> 
> 标签：ios, cordova, alert, confirmation

我尝试将以下代码放入 html 并运行它，然后将其上传到我的服务器中，并在我的 iPhone 的 Safari 浏览器中打开链接，然后单击显示确认并没有弹出窗口！有人可以帮忙吗。

```
<!DOCTYPE html>
<html>
  <head>
    <title>Notification Example</title>
    <script type="text/javascript" charset="utf-8" src="http://mobile-web-development-with-phonegap.eclipselabs.org.codespot.com/svn-history/r99/trunk/com.mds.apg/resources/phonegap/js/phonegap-1.0.0.js"></script>
    <script type="text/javascript" charset="utf-8">
        // Wait for PhoneGap to load
        document.addEventListener("deviceready", onDeviceReady, false);
        // PhoneGap is ready        
        function onDeviceReady() {
            // Empty
        }
        // process the confirmation dialog result
        function onConfirm(button) {
            alert('You selected button ' + button);
        }
        // Show a custom confirmation dialog
                function showConfirm() {
            navigator.notification.confirm(
            'You are the winner!',  // message
            onConfirm,              // callback to invoke with index of button pressed
            'Game Over',            // title
            'Restart,Exit'          // buttonLabels
        );
        }
    </script>
  </head>
  <body>
    <p><a href="#" onclick="showConfirm(); return false;">Show Confirm</a></p>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T22:41:45.180

您使用的代码 ( `navigator.notification.confirm`) 专门用于移动平台，它旨在在 PhoneGap 移动应用程序中运行。如果您想在将浏览器编译到应用程序之前测试其对话框/确认消息，我建议使用一种混合方法来检测应用程序的环境并使用本机`confirm(message)`或 PhoneGap 特定的通知 API。下面是一个一直为我工作的示例对象：

```
/**
 * The object encapsulates messaging functionality to work both in PhoneGap and 
 * browser environment. 
 * @author Zorayr Khalapyan
 * 
 */
var MessageDialogController = (function () {

    var that = {};

    /**
     * Invokes the method 'fun' if it is a valid function. In case the function
     * method is null, or undefined then the error will be silently ignored.
     *
     * @param fun  the name of the function to be invoked.
     * @param args the arguments to pass to the callback function.
     */
    var invoke = function( fun, args ) {
        if( fun && typeof fun === 'function' ) {
            fun( args );
        }
    };

    that.showMessage = function( message, callback, title, buttonName ) {

        title = title || "DEFAULT_TITLE";
        buttonName = buttonName || 'OK';

        if( navigator.notification && navigator.notification.alert ) {

            navigator.notification.alert(
                message,    // message
                callback,   // callback
                title,      // title
                buttonName  // buttonName
            );

        } else {

            alert( message );
            invoke( callback );
        }

    };

    that.showConfirm = function( message, callback, buttonLabels, title ) {

        //Set default values if not specified by the user.
        buttonLabels = buttonLabels || 'OK,Cancel';
        var buttonList = buttonLabels.split(',');

        title = title || "DEFAULT TITLE";

        //Use Cordova version of the confirm box if possible.
        if (navigator.notification && navigator.notification.confirm) {

                var _callback = function (index) {
                    if ( callback ) {
                        //The ordering of the buttons are different on iOS vs. Android.
                        if(navigator.userAgent.match(/(iPhone|iPod|iPad)/)) {
                            index = buttonList.length - index;
                        }
                        callback( index == 1 );
                    }
                };

                navigator.notification.confirm(
                    message,      // message
                    _callback,    // callback
                    title,        // title
                    buttonLabels  // buttonName
                );

        //Default to the usual JS confirm method.
        } else {
            invoke( callback, confirm( message ) );
        }

    };

    return that;

})(); 
```

希望这可以帮助！如果您有任何问题，请告诉我。

# ios - 为什么我在正确的时区得到错误的时间输出？

> ID：14296135
> 
> 赞同：4
> 
> 时间：2013-01-12T17:49:59.973
> 
> 标签：ios, objective-c, xcode, timezone, output

为什么我得到这个输出时间：

2013-01-12 18:24:37.783 代码测试[10328:c07] 0001-01-01 17:12:52 +0000

当我运行此代码时：

```
NSCalendar *calendar = [NSCalendar currentCalendar];
calendar.timeZone = [NSTimeZone localTimeZone];

NSDateComponents *components = [calendar components:NSHourCalendarUnit fromDate:[NSDate date]];
components.hour   = 17;
components.minute = 47;
components.second = 0;

NSDate *fire = [calendar dateFromComponents:components];
NSLog(@"%@", fire); 
```

我试过默认时区，系统时区。它总是给我不同的分钟和秒的输出！加上错误的日期 0001-01-01!!!! 知道为什么吗？

附加测试：

运行此代码时：

```
NSCalendar *calendar = [NSCalendar currentCalendar];
calendar.timeZone = [NSTimeZone localTimeZone];
NSDateComponents *components = [calendar components:NSHourCalendarUnit fromDate:[NSDate date]];
components.hour   = (components.hour + 1) % 24;
components.minute = 0;
components.second = 0;
NSDate *fire = [calendar dateFromComponents:components];
NSLog(@"%@", fire); 
```

它给了我这个输出：

2013-01-12 18:41:41.552 代码测试[10648:c07] 0001-01-01 18:25:52 +0000

2013-01-12 18:42:16.274 代码测试[10648:c07] 0001-01-01 18:25:52 +0000

2013-01-12 18:42:30.310 代码测试[10648:c07] 0001-01-01 18:25:52 +0000

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T17:56:25.760

您缺少年、月和日组件。

做：

`NSDateComponents *components = [calendar components:NSUIntegerMax fromDate:[NSDate date]];`

现在这应该给你正确的日期。

旁注：由于`NSCalendarUnit`是 的位域类型定义`NSUInteger`，我传入`NSUIntegerMax`以检索所有可能的日历单位。这样我就不必有大量的按位 OR 语句。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T17:58:32.607

您还需要使用该`calendar components:`方法请求年、月和日。

来自苹果文档：

> NSDateComponents 的实例不负责回答有关超出其初始化信息的日期的问题。

```
NSDateComponents *components = [calendar components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit fromDate:[NSDate date]]; 
```

日期的 NSLog 将使用默认时区显示时间。

# python - numpy矩阵乘法到三角形/稀疏存储？

> ID：14296136
> 
> 赞同：8
> 
> 时间：2013-01-12T17:50:20.217
> 
> 标签：python, numpy, combinatorics, sparse-matrix, matrix-multiplication

我正在处理一个非常大的稀疏矩阵乘法（matmul）问题。例如，让我们说：

*   A 是一个二进制 (75 x 200,000) 矩阵。它很稀疏，所以我使用 csc 进行存储。我需要执行以下 matmul 操作：

*   B = A.transpose() * A

*   输出将是一个大小为 200Kx200K 的稀疏对称矩阵。

不幸的是，B 将在我*的*笔记本电脑上存储在 RAM（或“核心”）中。另一方面，我很幸运，因为 B 有一些属性可以解决这个问题。

由于 B 将沿对角线对称且稀疏，因此我可以使用三角矩阵（上/下）来存储 matmul 操作的结果，并且稀疏矩阵存储格式可以进一步减小大小。

我的问题是......是否可以提前告诉 numpy 或 scipy 输出存储要求是什么样的，以便我可以使用 numpy 选择存储解决方案并避免几次后出现“矩阵太大”运行时错误分钟（小时）的计算？

换句话说，矩阵乘法的存储需求是否可以通过使用近似计数算法分析两个输入矩阵的内容来近似？

*   [https://en.wikipedia.org/wiki/Approximate_counting_algorithm](https://en.wikipedia.org/wiki/Approximate_counting_algorithm)

如果没有，我正在寻找一个蛮力解决方案。来自以下 Web 链接的涉及 map/reduce、核外存储或 matmul 细分解决方案（strassens 算法）的内容：

一对 Map/Reduce 问题细分解决方案

*   [http://www.norstad.org/matrix-multiply/index.html](http://www.norstad.org/matrix-multiply/index.html)
*   [http://bpgergo.blogspot.com/2011/08/matrix-multiplication-in-python.html](http://bpgergo.blogspot.com/2011/08/matrix-multiplication-in-python.html)

核外 (PyTables) 存储解决方案

*   [使用 Python 和 NumPy 的非常大的矩阵](https://stackoverflow.com/questions/1053928/python-numpy-very-large-matrices)

matmul细分解决方案：

*   [https://en.wikipedia.org/wiki/Strassen_algorithm](https://en.wikipedia.org/wiki/Strassen_algorithm)
*   [http://facultyfp.salisbury.edu/taanastasio/COSC490/Fall03/Lectures/FoxMM/example.pdf](http://facultyfp.salisbury.edu/taanastasio/COSC490/Fall03/Lectures/FoxMM/example.pdf)
*   [http://eli.thegreenplace.net/2012/01/16/python-parallelizing-cpu-bound-tasks-with-multiprocessing/](http://eli.thegreenplace.net/2012/01/16/python-parallelizing-cpu-bound-tasks-with-multiprocessing/)

提前感谢您的任何建议、评论或指导！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T09:27:26.260

由于您是在矩阵及其转置的乘积之后，因此 at 的值`[m, n]`基本上将是列`m`和`n`原始矩阵中的点积。

我将使用以下矩阵作为玩具示例

```
a = np.array([[0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
              [0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0],
              [0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1]])
>>> np.dot(a.T, a)
array([[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
       [0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0],
       [0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1],
       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
       [0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0],
       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
       [0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0],
       [0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 2]]) 
```

它有形状`(3, 12)`并且有 7 个非零条目。它与它的转置的乘积当然是有形状的`(12, 12)`，并且有 16 个非零条目，其中 6 个在对角线上，所以它只需要存储 11 个元素。

您可以通过以下两种方式之一很好地了解输出矩阵的大小：

**企业社会责任格式**

如果您的原始矩阵有`C`非零列，那么您的新矩阵将最多有`C**2`非零条目，其中`C`在对角线上，并确保不为零，而其余条目您只需要保留一半，所以最多是`(C**2 + C) / 2`非零元素。当然，其中许多也将为零，所以这可能是一个严重的高估。

如果您的矩阵以`csr`格式存储，则`indices`相应`scipy`对象的属性具有一个数组，其中包含所有非零元素的列索引，因此您可以轻松地将上述估计计算为：

```
>>> a_csr = scipy.sparse.csr_matrix(a)
>>> a_csr.indices
array([ 2, 11,  1,  7, 10,  4, 11])
>>> np.unique(a_csr.indices).shape[0]
6 
```

所以有 6 列具有非零条目，因此估计最多有 36 个非零条目，比实际的 16 多得多。

**CSC 格式**

如果我们有行索引而不是非零元素的列索引，我们实际上可以做一个更好的估计。为了使两列的点积不为零，它们必须在同一行中有一个非零元素。如果`R`给定行中有非零元素，它们将为`R**2`乘积贡献非零元素。当你对所有行求和时，你一定会多次计算一些元素，所以这也是一个上限。

矩阵的非零元素的行索引位于`indices`稀疏 csc 矩阵的属性中，因此可以按如下方式计算此估计：

```
>>> a_csc = scipy.sparse.csc_matrix(a)
>>> a_csc.indices
array([1, 0, 2, 1, 1, 0, 2])
>>> rows, where = np.unique(a_csc.indices, return_inverse=True)
>>> where = np.bincount(where)
>>> rows
array([0, 1, 2])
>>> where
array([2, 3, 2])
>>> np.sum(where**2)
17 
```

这与真正的16非常接近！而且这个估计实际上与以下内容相同并非巧合：

```
>>> np.sum(np.dot(a.T,a),axis=None)
17 
```

无论如何，下面的代码应该可以让您看到估计非常好：

```
def estimate(a) :
    a_csc = scipy.sparse.csc_matrix(a)
    _, where = np.unique(a_csc.indices, return_inverse=True)
    where = np.bincount(where)
    return np.sum(where**2)

def test(shape=(10,1000), count=100) :
    a = np.zeros(np.prod(shape), dtype=int)
    a[np.random.randint(np.prod(shape), size=count)] = 1
    print 'a non-zero = {0}'.format(np.sum(a))
    a = a.reshape(shape)
    print 'a.T * a non-zero = {0}'.format(np.flatnonzero(np.dot(a.T,
                                                                a)).shape[0])
    print 'csc estimate = {0}'.format(estimate(a))

>>> test(count=100)
a non-zero = 100
a.T * a non-zero = 1065
csc estimate = 1072
>>> test(count=200)
a non-zero = 199
a.T * a non-zero = 4056
csc estimate = 4079
>>> test(count=50)
a non-zero = 50
a.T * a non-zero = 293
csc estimate = 294 
```

# c# - Winforms 位置

> ID：14296137
> 
> 赞同：10
> 
> 时间：2013-01-12T17:50:23.720
> 
> 标签：c#, winforms

我有一个带有 2 `forms`、主窗口和第二个的应用程序`Form`。

我想要的是`Form`在 a 上打开第二个`button click`，它的位置必须在主窗体旁边*（所以如果主窗体很`600px`宽，`X`新的`Form`将是`main.X + 600`）*

已经尝试过了，但似乎没有，它仍然在主窗体的顶部打开：

```
private void button1_Click(object sender, EventArgs e)
{
    var form = new SecondForm();
    var main = this.Location;
    form.Location = new Point((main.X + 600), main.Y);
    form.Show(); 
} 
```

是`Location`不是属性正确？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-12T17:54:29.013

将您的表单设置`StartPosition`为`FormStartPosition.Manual`. 您可以在设计器中或从构造器中执行此操作：

```
StartPosition = FormStartPosition.Manual; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-12T18:38:03.487

显然，您没有指望 StartPosition 属性。然而，将其更改为手动并不是正确的解决方法，您加载的第二种形式很可能会在另一台具有不同视频 DPI 设置的机器上重新调整自身。这几天很常见。这反过来又可以改变它的 Location 属性。

正确的方法是等待 Load 事件触发，然后重新缩放并且窗口尚不可见。这是将其移动到正确位置的最佳时间。StartPosition 现在不再重要。像这样：

```
 var frm = new SecondForm();
        frm.Load += delegate {
            frm.Location = new Point(this.Right, this.Top);
        };
        frm.Show(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-12T17:54:45.943

`Location`是正确的属性，但你必须设置

```
Form.StartPosition = FormStartPosition.Manual; 
```

也。

# ruby - “初始化程序 = 新配置”有什么作用？

> ID：14296152
> 
> 赞同：0
> 
> 时间：2013-01-12T17:51:15.477
> 
> 标签：ruby

做什么`initializer = new configuration`？

```
def self.run(configuration = Configuration.new)
  yield configuration if block_given?
  initializer = new configuration
  initializer.
  initializer
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:08:05.727

让我们逐步了解这些线路。

```
# It is a definition of a class method which takes one argument
# with a default value.    
def self.run(configuration = Configuration.new)
  # It passes the argument to a block if one was given.
  yield configuration if block_given?
  # It calls method `new` passing the `configuration` as
  # an argument. The returned value is saved in the local
  # variable.
  initializer = new configuration
  # Two following lines are a single expression: a call
  # to method `initializer` of the object pointed to by the
  # variable `initializer`, i.e.
  # 
  #   initializer.send :initializer
  # 
  # No idea why one would break this expression into two lines.
  # The value returned from the call to `initializer` becomes
  # the return value of the analysed method.
  initializer.
  initializer
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:58:44.863

该代码的上下文可能类似于：

```
class MyClass
  def self.run
  .... 
```

所以 self 是 MyClass。写作`new`是一种捷径，`self.new`它意味着`MyClass.new`简单地创建一个类的新实例。

# java - Web Service 或一个简单的 url，可以给我最新的 Java 版本

> ID：14296159
> 
> 赞同：2
> 
> 时间：2013-01-12T17:51:47.027
> 
> 标签：java

我有一个应用程序有一些 java 旧版本的问题，我想知道是否有一个 URL（这不是人类的网页），我可以检查和解析以了解是否有新版本的 java。

我想通知用户每次发布新版本时都会有新版本的 java。我的应用程序是为 Windows 和 Mac 完成的，所以如果这个 URL 可以给我关于不同平台的信息，那就太好了。

非常感谢。

PS是的，我用谷歌搜索了这个问题，但没有找到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T19:52:28.653

答案很简单但不能令人满意：不，没有。如果您嵌入一个`JEditorPane`（可能是隐藏的），将其指向[http://java.com/en/download/testjava.jsp](http://java.com/en/download/testjava.jsp)，解析内容并查找“已在您的系统。” 或者。

**更新**

我从 监控网络流量`testjava.jsp`。原来它请求这个 URL [http://java.com/applet/JreCurrentVersion2.txt](http://java.com/applet/JreCurrentVersion2.txt)，它当前返回 1.7.0_10 ......这确实是最新和最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T19:12:29.240

Java 可以告诉您客户端机器正在运行的 Java 版本。我不认为浏览器可以在不运行小程序的情况下发现这一点。Web 服务正在某个远程服务器上运行；如果该服务器可以告诉您本地机器正在运行的 Java 版本，我会感到不安。

如果用户使用的是较旧版本的 java，您的应用程序可能会显示错误消息。否则，JNLP 是最好的开箱即用解决方案。见[http://javatester.org/version.html](http://javatester.org/version.html)

确定您的 java 版本的代码很简单： `System.getProperty("java.version")`

# r - winbugs中tapply的对应物

> ID：14296160
> 
> 赞同：0
> 
> 时间：2013-01-12T17:51:50.133
> 
> 标签：r, tapply, winbugs

我需要计算每个状态的平均值。在 R 中，我通过使用

`tapply(y,state,mean)`.

这是一个例子：

```
state <- rbinom(10,4,0.6)
y <- rnorm(10)
tapply(y,x,mean) 
```

其中 y 表示拟合值的向量，state 表示作为因子的因变量。

我想知道如何在 Winbugs 中做到这一点。有人对此有任何想法吗？

# javascript - 使用backbone.js 跟踪用户会话

> ID：14296166
> 
> 赞同：0
> 
> 时间：2013-01-12T17:52:38.843
> 
> 标签：javascript, jquery, backbone.js, basic-authentication

我有一个在前端使用backbone.js 的应用程序。所以我有一个问题是它如何处理用户会话？每次我发送 GET、PUT、POST 请求时，都必须对用户进行身份验证，否则我会从服务器端收到错误消息。因此，我使用了 Backbone.basicauth.js 插件，该插件在通过服务器发送任何请求之前启用基本身份验证。我只需要调用 Backbone.BasicAuth.set('username', 'password');

但这里的问题是我每次都需要硬编码我的用户名和密码。因此，我想知道一种可以动态执行此操作的方法，或者一种可以跟踪用户是否已经登录或者我需要将他重定向到登录页面的方法。

如果用户输入一个随机 url 而不是主页，我将如何跟踪他是否登录以及如何保存会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:20:27.827

在 www.TheLadders.com，我们使用表单身份验证，然后删除一个带有加密令牌的 cookie，我们使用它来验证后续请求。我们比传统的服务器端会话方法更喜欢它，因为我们可以无状态地运行所有服务器。

# sql-server - SQL Server 2008如何选择顶部[列值]和随机记录？

> ID：14296169
> 
> 赞同：1
> 
> 时间：2013-01-12T17:53:03.330
> 
> 标签：sql-server, select, random

我使用的是 SQL Server 2008，我想选择随机行记录，记录的总数取决于另一个表的列值，如何做到这一点？

我的 SQL 语句是这样的，但是错误..

```
select top b.number a.name, a.link_id 
from A a 
left join B b on b.link_id = a.link_id 
order by newid() 
```

这是我的表格和预期的结果。

**表 A**：

```
name   link_id 
james  100
albert 100
susan  100
simon  101
tom    101    
fion   101 
```

**表 B**：

```
link_id   number
100       2
101       1 
```

预期结果：

*   第一次运行时，结果可能是：

    ```
    name   link_id
    james  100
    susan  100
    fion   101 
    ```

*   第二次结果可能是：

    ```
    albert 100
    susan  100
    simon  101 
    ```

*   第三次可能是：

    ```
    james  100
    albert 100
    fion   101 
    ```

解释

参考表B，link_id：100，编号：2

这意味着表 A 应该选择 2 个随机记录`link_id = 100`

并且需要选择 1 个随机记录`link_id=101`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:03:50.877

您可以使用 ROW_NUMBER() 函数：

```
SELECT A.name, A.link_id
FROM(
SELECT name,link_id, ROW_NUMBER()OVER(PARTITION BY link_id ORDER BY NEWID()) rn
FROM dbo.tblA
) AS A
JOIN dbo.tblB AS B
ON A.link_id = B.link_id
WHERE A.rn <= B.number; 
```

这是一个 SqlFiddle 来展示这一点：[http ://sqlfiddle.com/#!3/92eac/2](http://sqlfiddle.com/#!3/92eac/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:05:48.003

试试这个：

```
SELECT  a.*
FROM    b
CROSS APPLY
        (
        SELECT  TOP (b.number) a.*
        FROM    a
        WHERE   a.link_id = b.link_id
        ORDER BY
                NEWID()
        ) a 
```

另请参阅：[SQLFiddle](http://sqlfiddle.com/#!3/1ac3a/3)

# maven - 如何跳过 maven repo 中的版本或特定模块

> ID：14296170
> 
> 赞同：28
> 
> 时间：2013-01-12T17:53:04.583
> 
> 标签：maven, deployment, jenkins, repository

嘿嘿，

我有一个具有这种结构的 Maven 项目：

家长：

*   项目清单
*   API 模块
*   模块2
*   ...
*   模块5
*   测试
*   分销/组装

所以首先我运行父模块，然后我运行构建 api 的模块，然后是依赖于 api 的模块，然后是一个包含测试工具的测试模块，最后我运行一个组装/分发，我在其中打包了一些存档中的模块。由于一些问题，我无法真正改变方式，到目前为止它工作得非常完美。

使用 jenkins，我将它发布到 maven repo，但我只想发布 API 和一些模块，而不是测试模块和分发模块。有没有办法跳过它们？不想发布我并不真正需要的东西：/

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-12T19:52:55.913

为了正确理解你，你仍然想运行测试模块，但你不想部署/发布它们。maven [-deploy-plugin](http://maven.apache.org/plugins/maven-deploy-plugin/)来救援！工件仍将被构建，但不会被部署。

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-deploy-plugin</artifactId>
    <version>2.7</version>
    <configuration>
        <skip>true</skip>
    </configuration>
  </plugin> 
```

但是，jenkins 发布插件仍然会发布所有工件。与其使用 jenkins 发布插件，不如考虑使用[maven-release-plugin 发布](http://maven.apache.org/maven-release/maven-release-plugin/index.html)，这很容易做到：

```
mvn release:prepare
mvn release:perform 
```

由于[默认目标](http://maven.apache.org/maven-release/maven-release-plugin/perform-mojo.html#goals)是`deploy`and `site`，所以一切都应该没问题。

只要确保你`scm`的根 pom 中有一个标签：

```
<scm>
    <connection>scm:svn|git:https://...</connection>
    <developerConnection>scm:svn|git:https://...</developerConnection>
</scm> 
```

并且您的版本控制工具命令（git、svn、...）在 PATH 上可用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T00:12:23.357

您可以添加一个 Maven 命令行选项来指定要在 jenkins 中构建的模块。

```
-pl,--projects <arg>                   Comma-delimited list of specified
                                       reactor projects to build instead
                                       of all projects. A project can be
                                       specified by [groupId]:artifactId
                                       or by its relative path. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T13:06:03.237

聚合器项目的目的是结合简单项目的构建要求。如果您的基本项目有不同的构建要求，请考虑添加一个新的聚合器项目。

在您当前的聚合器项目中禁用部署到您的 Maven 存储库，并创建一个仅包含您希望部署的模块的新聚合器项目。

将这个新项目添加到 Jenkins，使其依赖于您的原始项目并将其配置为部署到您的存储库。

# javascript - 如何隐藏/编码书签中的 JavaScript 代码？

> ID：14296171
> 
> 赞同：1
> 
> 时间：2013-01-12T17:53:11.630
> 
> 标签：javascript, bookmarklet

我有一个书签，我想隐藏/编码其中的 JavaScript 代码，就像编译的代码一样，以便书签的用户无法使用原始代码；

我可以这样做吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:04:54.913

也许这个网站可以帮助你：[http ://www.javascriptobfuscator.com/](http://www.javascriptobfuscator.com/)

关于它：

> Free Javascript Obfuscator 是一个专业的 javascript 混淆工具。它将 JavaScript 源代码转换为**乱码**且完全**不可读**的形式，防止其被分析和窃取。

我给了它这个输入测试：

```
alert("Hello World") 
```

输出：

```
var _0x7d3e=["\x48\x65\x6C\x6C\x6F\x20\x57\x6F\x72\x6C\x64"];alert(_0x7d3e[0]); 
```

您可以在 Firefox Scratchpad ( `Shift`+ `F4`) 或 Google Chrome 控制台 ( `F12`) 中对其进行测试。

# php - 2个脚本之间的PHP参数

> ID：14296172
> 
> 赞同：0
> 
> 时间：2013-01-12T17:53:15.690
> 
> 标签：php

脚本1：

```
<?php
/*
$file_url, $referer, $file_title are initialized in some way
*/
...
echo '<a href="download.php?url='.$file_url.'&referer='.$referer.'&name='.$file_title.'">Download</a>';

?> 
```

脚本2：

```
<?php

$file_url = $_GET['file_url'];
$referer = $_GET['referer'];
$file_name = $_GET['file_name']

?> 
```

由于 script1 中的变量可能是长字符串。通过 GET 方法传递它们时会出现问题。我在 php 中有哪些替代方案可以在脚本之间传递参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:05:02.310

使用表单，并将方法设置为 post ，并为您要发布的值设置一个隐藏的表单字段。link(href) 要么成为链接按钮，要么在刚刚提交表单的链接上具有 onclick 操作。

希望这对你有帮助

```
<form id="form_s" method="post" action="#">
  <input type="hidden" name="id" value="value">
  <input type="hidden" name="Of your choice " value="Some Value">
  <!-- more stuff you want to post -->
</form>
<a href="#" onclick="form_s.submit()">click to post values</a> 
```

# ssl - 识别安全 html 请求中的不安全内容

> ID：14296173
> 
> 赞同：0
> 
> 时间：2013-01-12T17:53:17.433
> 
> 标签：ssl, https, mixed-code, httpfox

嗨，我正在`https`用 httpFox 调试一个页面，寻找不安全的内容。整个页面只有一个不安全的请求，但我不知道它是做什么用的？

httpFox 正在标记此请求...这是页面上的唯一`"http"`请求（其余为`"https"`）：

> 00:00:57.444 0.378 970 113575 GET 200 文本/html (NS_IMAGELIB_ERROR_NO_DECODER) http://[thebaseURL]/

其中`"thebaseURL"`只是根域，后面没有任何内容（没有子路径或文件请求）

响应标头中是否存在问题？当我单击上面的行时，我看到响应标头包括`"set-coookie"`两个 cookie...在没有设置安全标志的情况下设置 cookie 会导致问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:36:10.997

我只是想添加评论。即使您的页面可能使用 SSL，如果您在 Apache 访问日志中记录服务器端的敏感数据，您的内容仍然可能不安全。

SSL 只会加密从浏览器到 Web 服务器的通道。内容本身未加密，因此如果您发送敏感数据并且不使用 HTTP POST，那么所有敏感数据都将存储在访问日志中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T02:00:53.853

我能够通过将页面的原始 HTML 源代码剪切并粘贴到一个新页面（一个接一个地复制 HTML 代码块）并测试 SSL-certificate-validation 何时中断来识别问题。

事实证明，1x1 像素 shim gif 的图像路径损坏。一旦我更正了图像路径，页面就会正确显示（没有“不安全内容”错误）。

奇怪的是，丢失的图像会导致浏览器显示“页面包含安全和不安全内容的混合”错误，但希望这将在未来对其他人有所帮助。

# java - 使用 spring-mongodb 清除 mongodb

> ID：14296180
> 
> 赞同：5
> 
> 时间：2013-01-12T17:53:46.583
> 
> 标签：java, spring, mongodb

正如我之前在stackoverflow上的很多人一样，我想为我的mongodb应用程序做junit-tests。为此，我让一个实例运行，以便我的测试可以连接。但是我想确保在开始测试时数据库处于空状态。

由于我使用的是 spring-mongodb、spring-test 和所有有趣的 spring-things，我希望找到一个为我做这件事的配置，直到现在都没有成功。

任何人都可以给我一个提示如何以干净的方式实现这一点。我的想法是为我做这件事的 InitializingBean。但我对这个解决方案并不满意。有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-02T12:40:26.260

尝试这个：

```
@Autowired
org.springframework.data.mongodb.core.MongoTemplate mongoTemplate;

.....
mongoTemplate.getDb().dropDatabase(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-07T16:59:43.647

`mongoTemplate.getDb().dropDatabase();` 如果您不使用索引，可以提供帮助。

如果通过 spring-data-mongodb 使用索引，例如`@Index`注释，`dropDatabase()`也会删除索引。

我的解决方案是清理文件：

```
private void cleanUp() {
        for (String collectionName : mongoTemplate.getCollectionNames()) {
            if (!collectionName.startsWith("system.")) {
                mongoTemplate.getCollection(collectionName).remove(new BasicDBObject());
            }
        }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-16T15:56:12.583

这是未弃用的答案： `mongoTemplate.getDb().drop();`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-22T07:52:40.617

第一的

```
private @Autowired Mongo mongo;
private @Autowired MongoDbFactory mongoDbFactory; 
```

然后

```
mongo.dropDatabase(mongoDbFactory.getDb().getName()); 
```

# c# - 为什么我的映射适用于 IList 而不是 LIst

> ID：14296182
> 
> 赞同：2
> 
> 时间：2013-01-12T17:53:50.480
> 
> 标签：c#, nhibernate

真正大师的简单问题。我浪费了很多时间来弄清楚如何在 nhib 中映射集合。通过代码映射，我现在有疑问，为什么我的映射适用于类型集合`IList`而不是`List`?

这是代码

```
public class Account {
    private IList<Term> Terms; // When I use List it does not work
    public Account()
    {
       Terms = new List<Terms>(); 
    }
    public virtual IList<Term> Terms // When I use List it does not work
    {
       get { return _Terms; }
       set 
       { if (_Terms == value) return;
           _Terms = value;
       }
    }
} 
```

AccountMap.cs（一个账户有很多条款）

```
Bag(x => x.Terms,
         m =>{},
         x => x.OneToMany()
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:32:50.077

文档说：[6.1。永久收藏](http://nhforge.org/doc/nh/en/index.html#collections)：

> NHibernate 要求将持久集合值字段声明为接口类型

以及支持的接口列表：

> 实际的界面可能是`Iesi.Collections.ISet`, `System.Collections.ICollection`, `System.Collections.IList`, `System.Collections.IDictionary`, `System.Collections.Generic.ICollection<T>`, `System.Collections.Generic.IList<T>`, `System.Collections.Generic.IDictionary<K, V>`, `Iesi.Collections.Generic.ISet<T>`

或者......任何你喜欢的东西！（“你喜欢的任何东西”意味着你必须编写一个实现`NHibernate.UserType.IUserCollectionType`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:58:21.167

NHibernate 与 IList 和 IList<T> （以及一些其他集合接口类型）一起使用，因为 NHibernate 在内部使用这些接口的自己的实现来跟踪更改等。

从对象设计的角度来看，在域类中公开集合接口类型而不是具体的集合实现也是合理的。

# jquery - 工具提示中的浏览器兼容性问题

> ID：14296184
> 
> 赞同：0
> 
> 时间：2013-01-12T17:53:59.347
> 
> 标签：jquery, css

我正在研究一个工具提示（在输入时显示其中的内容）。它在 chrome 上运行良好，但只是在我在 Mozilla Firefox 上测试它之前。工具提示位于 Chrome 浏览器中文本区域框的底部（这是我想要的），但在 Mozilla Firefox 中，它显示在某个随机位置，但所有文本区域的工具提示显示在同一随机位置聚焦文本区域。我知道这是一个 CSS 问题，但仍附上所有相关代码。

**CSS**

```
.tooltip
{
    color:#0D776e;
    font-size:15px;
    font-family:calibri;
    min-height:25px;
    border-radius:4px;
    margin:0 0.5%;
    word-wrap:break-word;
    display:none;
    z-index:500;
    width:200px;
    position:absolute;
    top:32px;
} 
```

**jQuery**

```
$(document).ready(function()
{
    $("textarea").focus(function()
    {
        var targetArea = $(this);
        targetArea.siblings('div').fadeIn(400).css({"background-color":"#E7F1F0","border":"1px solid #86BBB6"}).html(targetArea.val());
    });

    $("textarea").blur(function()
    {
        var targetArea = $(this);
        targetArea.siblings('div').fadeOut(400).css({"background-color":"#E7F1F0","border":"1px solid #86BBB6"});
    });

    $("textarea").keyup(function()
    {
        var targetArea = $(this);
        targetArea.siblings('div').html(targetArea.val());
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:02:37.140

如果我从之前的帖子中记得你在`TD`. `TD`将不接受位置，因此将所有内容包装在`DIV`with中，`position:relative`以便工具提示可以从`DIV`

# c# - 如何在asp.net中使用线程？

> ID：14296188
> 
> 赞同：1
> 
> 时间：2013-01-12T17:54:13.487
> 
> 标签：c#, asp.net, multithreading, c#-4.0

我有网络表单应用程序。在一种形式上，我有几个功能。这被称为同步并需要一些时间。所以我需要在不同的线程中调用它们。

这是我正在做的示例：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        Thread t1 = new Thread(new ThreadStart(Function1));
        t1.Start();
        Thread t2 = new Thread(new ThreadStart(Function2));
        t2.Start();
    }

    private void Function1()
    {
        Thread.Sleep(5000);
        lbl1.Text = "Function1 completed";
    }

    private void Function2()
    {
        Thread.Sleep(5000);
        lbl2.Text = "Function2 completed";
    } 
```

如果我调试（设置断点）`lbl1.Text = "Function1 completed";`并被`lbl2.Text = "Function2 completed";`调用，但最终 html 页面上的文本没有改变。

页面加载也不需要 5 秒。

ps我知道asp网络的工作方式不同，但我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T17:59:26.717

在页面被渲染和返回之前，没有任何东西在等待你的线程完成——这就是问题所在。

在`Page_Load()`函数的末尾（或在页面渲染生命周期的最后可能点），添加：

```
t1.Join();
t2.Join(); 
```

另外：您不应该在线程 proc 中更新 lbl1 和 lbl2 - 您应该将结果存储在变量中并在主渲染线程中反映计算值（即一旦`Join`返回）。

编辑：虽然这解决了问题中的问题，但请查看Vano 的回答所推荐的[PageAsyncTask 。](http://msdn.microsoft.com/en-us/library/system.web.ui.pageasynctask.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T18:01:09.400

如果要异步执行函数，则需要执行一些步骤：

1）。您需要设置 Async="true" 页面指令。

```
<%@ Page Language="C#" Async="true" ... %> 
```

2）。您需要创建[PageAsyncTask](http://msdn.microsoft.com/en-us/library/system.web.ui.pageasynctask.aspx)对象并使用[Page.RegisterAsyncTask()](http://msdn.microsoft.com/en-us/library/system.web.ui.page.registerasynctask.aspx)函数注册它。

RegisterAsyncTask 函数在[同步上下文](http://msdn.microsoft.com/en-us/library/system.componentmodel.asyncoperationmanager.synchronizationcontext.aspx)中注册您的函数，因此 ASP.NET 将异步运行您的函数，并等待所有注册的函数完成，然后继续页面处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T18:02:32.373

您启动新线程但不要等待它们完成。因此，您的 page_load 运行完成，因为 thread.start() 是非阻塞的。

查看最新 .NET 版本中的 async/wait。它使事情变得更容易和可预测

# asp.net - 多种语言的站点地图 seo

> ID：14296191
> 
> 赞同：0
> 
> 时间：2013-01-12T17:54:37.247
> 
> 标签：asp.net, seo, sitemap

我正在开发 4 种语言的 asp.net 4.0 网站。所以我使用了 URL 重写器。

我在数据库中有一个映射表，我说 home.aspx 代表英语 Home，另一种语言 AnotherLanguageHome 等等。

因此，当页面启动时，它会检查它是什么页面以及什么文化语言，并将 *.aspx 替换为来自数据库的正确页面名称。如果网址是 www.mysite.com/Home.aspx，它将变成 www.mysite.com/Home 或 www.mysite.com/FrenchHome 或 www.mysite.com/DutchHome 等等。

所以我的问题是，当我创建站点地图 xml 文件（或 robots.txt）时，我是否必须在其中包含所有可能的页面（www.mysite.com/Home；www.mysite.com/FrenchHome；www. mysite.com/DutchHome 等）还是只是 www.mysite.com/Home.aspx？

或者有另一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:55:48.770

是的。您应该包括您希望被搜索引擎索引的每个页面。如果您有不同语言的不同 URL，那么这些 URL 也必须包含在内。

# perl - 如何在 Perl 程序中使用 sed？

> ID：14296199
> 
> 赞同：-1
> 
> 时间：2013-01-12T17:55:15.887
> 
> 标签：perl

如何在*Perl*程序中使用以下命令？

```
cat file| sed -n '/Later/p' | 
sed -n '/A character range is written as two characters separated by{}/!p' | 
sed -n '/ range is not specified{}/!p' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T00:10:41.640

最好根本没有。Perl 为您提供的不仅仅是普通的 sed，如果您可以在 Perl 本身中做同样的事情，您就不会为了使用 sed 而付出额外的开销：

```
use strict;
use warnings;

open my $filehandle, '<', 'file' or die "could not open file: $!\n";

while (<$filehandle>) {
    if ( /pattern one/ and not /pattern two/ and not /pattern three/ ) { print }
} 
```

# mamp - mamp pro 上的虚拟主机，带和不带 www 的域

> ID：14296204
> 
> 赞同：1
> 
> 时间：2013-01-12T17:55:50.833
> 
> 标签：mamp

在 Mamp pro 中，我希望将 www.test.com 和 test.com 域都重定向到本地主机上的同一个文件夹，我是否必须同时输入它们，或者是否有一些选项可以自动将一个设置应用于另一个所以我不必同时输入它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:58:20.533

`ServerAlias`在虚拟主机配置中使用 a 。对于 MAMP PRO，您应该可以将其添加`ServerAlias test.com`到选项卡`Customized virtual host general settings`上的框中`Advanced Virtual Hosts Configuration`。

否则，找到虚拟主机声明`/Applications/MAMP/conf/apache`并手动添加。

```
<VirtualHost *>
  DocumentRoot /Applications/MAMP/htdocs/test.com/
  ServerName www.test.com
  ServerAlias test.com
  <Directory "/Applications/MAMP/htdocs/test.com/">
    Order allow,deny
    allow from all
  </Directory>
</VirtualHost> 
```

您将需要重新启动 Apache 以激活配置。

[阿帕奇文档](http://httpd.apache.org/docs/2.2/mod/core.html#serveralias)

# java - 泛型构造函数（类 clazz) 不支持 T 其中 T 是另一个泛型

> ID：14296208
> 
> 赞同：7
> 
> 时间：2013-01-12T17:56:10.323
> 
> 标签：java, generics

想象一下这个类：

```
public class ObjectCreator<T> {
    private Class<T> persistentClass;

    public ObjectCreator(Class<T> persistentClass) {
        this.persistentClass = persistentClass;
    }

    public T create() {
        T instance = null;
        try {
            instance = persistentClass.newInstance();
        } catch (Exception e) {
            e.printStackTrace();
        } 

        return instance;
    }
} 
```

现在我用域对象对它进行子类化：

```
public class PersonCreator extends ObjectCreator<Person>{

    /**
     * @param persistentClass
     */
    public PersonCreator() {
        super(Person.class);

    }

} 
```

一切都很好......但是如果我尝试使用另一个通用域对象对其进行子类化，编译器会抱怨：

```
public class MessageCreator extends ObjectCreator<Message<String>>{

    /**
     * @param persistentClass
     */
    public MessageCreator() {
        super(Message.class);
    }

} 
```

> 构造函数`ObjectCreator<Message<String>>(Class<Message>)`是未定义的 MessageCreator.java

我认为这是一个很大的限制：为什么这是被禁止的？

知道如何解决吗？

马西莫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T18:18:34.163

试试这个：

```
super((Class<Message<String>>) ((Object) Message.class)); //compiles with warning 
```

如果您将基类的构造函数更改为

```
public ObjectCreator(Class<? extends T> persistentClass) 
```

然后在派生类中使用它：

```
super(new Message<String>(){}.getClass()); //compiles without warning 
```

它将在没有警告的情况下编译

**编辑**

根据`getClass()` [http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#getClass](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#getClass) ()的定义

返回`Class<? extends X>`，其中 X 是调用 getClass 的表达式的静态类型的擦除。这意味着将为匿名类`getClass()`返回和返回`Class<? extends Message>``new Message<String>()``Class<? extends Message<String>>``new Message<String>(){}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T18:08:52.563

泛型类没有“.class”变体 - 该信息在运行时不可用，但是为了使上述代码编译，您可以简单地将表达式转换为所需的类型。

```
super ((Class<Message<String>>)((Class<?>)Message.class)); 
```

请注意，这也不会使信息在运行时可用（即用于反射等），但是它应该在编译时带有未经检查的警告 - 就是这样 - 警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T18:12:13.840

如果你只使用它就可以了

```
public class MessageCreator extends ObjectCreator<Message>{

    /**
     * @param persistentClass
     */
    public MessageCreator() {
        super(Message.class);
    }

} 
```

这会创建正确的对象，但仍会为类定义发出警告，如果您这样做

```
Message<String> m = creator.create(); 
```

# asp.net - ASP.NET 角色类抛出 SQL 网络接口，错误：26

> ID：14296209
> 
> 赞同：0
> 
> 时间：2013-01-12T17:56:21.313
> 
> 标签：asp.net, sql-server, sql-server-2008

我的家用计算机运行 Visual Studio 2012 和 SQL Server 2008 R2。该网站一直在我运行 VWD10/SQLEXPRESS 的工作计算机上运行。我可以访问和运行除我的 admin.aspx 页面之外的所有页面。

登录成功后，点击我的Admin,aspx页面，里面只有一个loginview控件，后面没有代码。该网站挂起然后我收到错误：

建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

我删除了 loginview 控件，然后再试一次。页面没有代码和控件正确加载。我的下一个尝试是添加到页面加载：

```
string str = Roles.GetRolesForUser("Admin").First(); 
```

这导致了同样的错误，我已经将我的页面恢复为没有代码和一个 loginview 控件。

我不确定为什么 Role 类不能访问数据库，但 member 类可以。

这是我的 web.config，我怀疑这是问题所在

```
 <?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <location path="~/Admin.aspx">
    <system.web>
      <authorization>
        <allow roles="Admin,Maintainer,Manager,Supervisor" />
        <deny users="*" />
      </authorization>
    </system.web>
  </location>
  <location path="~/Admin_Machines.aspx">
    <system.web>
      <authorization>
        <allow roles="Admin,Maintainer,Manager" />
        <deny users="*" />
      </authorization>
    </system.web>
  </location>
  <location path="~/Admin_Workcenters.aspx">
    <system.web>
      <authorization>
        <allow roles="Admin,Maintainer,Manager" />
        <deny users="*" />
      </authorization>
    </system.web>
  </location>
  <location path="~/Admin_Procedure.aspx">
    <system.web>
      <authorization>
        <allow roles="Admin,Maintainer,Manager,Supervisor" />
        <deny users="*" />
      </authorization>
    </system.web>
  </location>
  <location path="~/Admin_Users.aspx">
    <system.web>
      <authorization>
        <allow roles="Admin,Manager" />
        <deny users="*" />
      </authorization>
    </system.web>
  </location>
  <location path="~/Admin_Section.aspx">
    <system.web>
      <authorization>
        <allow roles="Admin,Maintainer,Manager" />
        <deny users="*" />
      </authorization>
    </system.web>
  </location>
  <location path="~/Admin_Tensile.aspx">
    <system.web>
      <authorization>
        <allow roles="Admin,Maintainer,Manager" />
        <deny users="*" />
      </authorization>
    </system.web>
  </location>
  <location path="~/Procedures">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location>
  <system.web>
    <roleManager enabled="true" />
    <authentication mode="Forms" />
    <membership defaultProvider="myProvider">
      <providers>
        <add name="myProvider"  type="System.Web.Security.SqlMembershipProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
        connectionStringName="userdb" enablePasswordRetrieval="false" 
        enablePasswordReset="true" requiresQuestionAndAnswer="false" applicationName="/" 
        requiresUniqueEmail="True" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6"
        minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
        passwordStrengthRegularExpression="" />
      </providers>
    </membership>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Data.Entity.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Security, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
      </assemblies>
      <buildProviders>
        <add extension=".edmx" type="System.Data.Entity.Design.AspNet.EntityDesignerBuildProvider" />
      </buildProviders>
    </compilation>
  </system.web>
  <connectionStrings>
    <!--Home/School connection(SQLSERVER 2008 R2-->
    <add name="QualityEntities" connectionString="metadata=res://*/App_Code.Model.csdl|res://*/App_Code.Model.ssdl|res://*/App_Code.Model.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.;initial catalog=QUALITY.MDF;user id=sa;password=****;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
    <add name="userdb" connectionString="Data Source=.;Initial Catalog=ASPNETDB;uid=sa;Password=****" />
    <!--Work Connection(SQLEXPRESS)-->
    <!--<add name="QualityEntities" connectionString="metadata=res://*/App_Code.Model.csdl|res://*/App_Code.Model.ssdl|res://*/App_Code.Model.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.\SQLEXPRESS;attachdbfilename=|DataDirectory|\Quality.mdf;integrated security=True;connect timeout=30;user instance=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />-->
    <!--<add name="userdb" connectionString="data source=.\SQLEXPRESS;attachdbfilename=|DataDirectory|\ASPNETDB.mdf;integrated security=True;connect timeout=30;user instance=True;multipleactiveresultsets=True;" />-->
  </connectionStrings>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T05:13:14.180

所以问题是我没有定义角色提供者，所以它使用了 sqlexpress 角色提供者。我的家用电脑没有 sqlexpress，这就是为什么数据库可以在我的工作电脑上运行，而不是在我的家用电脑上运行。我可以登录的原因是我配置了会员提供程序。

解决我改变的问题

```
<roleManager enabled="true" /> 
```

到

```
<roleManager defaultProvider="myRoleProvider" enabled="true">
  <providers>
    <clear/>
    <add
      name="myRoleProvider"
      type="System.Web.Security.SqlRoleProvider"
      connectionStringName="userdb"
      applicationName="/" />
  </providers>
</roleManager> 
```

# java - 为什么 Java 方法中不允许静态变量，因为它们在 C/C++ 函数中？

> ID：14296211
> 
> 赞同：1
> 
> 时间：2013-01-12T17:56:37.453
> 
> 标签：java, c++, c, variables

在**C**和**C++**中，您可以执行以下操作：

```
void foo()
{
   static int i = 0;
   ++i;
} 
```

但是，在**Java**中你会得到一个`'Illegal modifier for parameter'`错误：

```
public void foo()
{
    static int i =0;
   ++i;
} 
```

我不是在寻找为什么或为什么不是这是一个好/坏主意的原因。我只是好奇为什么这在**C/C++**中是合法的，但在**Java**中不合法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T18:01:43.717

Java 是一种功能较差的语言。除了可以让您编写好的程序的最简单的集合之外，不愿意添加其他功能。这意味着许多晦涩难懂的功能，甚至一些其他语言中可用的非常有用的功能在 Java 中都不可用，因为通常有另一种方法可以做同样的事情，或者更好的方法，或者他们已经决定没有它会更好的功能.

在这种情况下，我怀疑这是因为您可以将字段放在方法之外并做很多相同的事情。

顺便说一句：Java 确实有方法本地命名类，它们很少使用，如果它们是极简的，Java 也不需要。;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T18:08:41.963

`static`函数范围变量在 C++ 中很有用，可以避免“静态初始化顺序失败”。在 Java 中这不是必需的，因为它具有明确指定的静态初始化顺序。

我想最好避免这些变量，因为它会导致令人困惑的行为：

```
some_code();
static int x = something();
some_code(); 
```

where`something()`仅在第一次调用时调用，而其他指令在您使用此函数时调用。

此外，默认情况下不实现功能。

# android - android maps v2设置边界错误

> ID：14296216
> 
> 赞同：1
> 
> 时间：2013-01-12T17:57:22.643
> 
> 标签：android, latitude-longitude, android-maps-v2

我正在尝试让我的地图缩放到给定的边界。但我得到一个错误。

这是我的代码

```
 @Override
     public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

       try {
           MapsInitializer.initialize(this);
       } catch (GooglePlayServicesNotAvailableException e) {
           e.printStackTrace();
       }

       mapFragment = new SupportMapFragment();

       FragmentManager fragmentManager = getSupportFragmentManager();
       FragmentTransaction transaction = fragmentManager.beginTransaction();
       transaction.replace(R.id.map, mapFragment);
       transaction.commit();
       mMap = mapFragment.getMap();

       LatLngBounds boundsBucuresti = new LatLngBounds;

       mMap.animateCamera(CameraUpdateFactory.newLatLngBounds(boundsBucuresti, 20)); 
```

和错误：

```
01-12 19:52:53.077: ERROR/AndroidRuntime(13173): FATAL EXCEPTION: main
        java.lang.RuntimeException: Unable to start activity     ComponentInfo{com.mobileit.android.transport_noapte/com.mobileit.android.transport_noapte.M    yActivity}: java.lang.NullPointerException
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1768)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
        at android.app.ActivityThread.access$1500(ActivityThread.java:123)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:130)
        at android.app.ActivityThread.main(ActivityThread.java:3835)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:507)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
        at dalvik.system.NativeStart.main(Native Method)
        Caused by: java.lang.NullPointerException
        at com.mobileit.android.transport_noapte.MyActivity.onCreate(MyActivity.java:42)
        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
        ... 11 more 
```

这`(MyActivity.java:42)`指的是这个

> mMap.animateCamera(CameraUpdateFactory.newLatLngBounds(boundsBucuresti, 20));

# javascript - 使用 Derby.js 进行客户端模型过滤

> ID：14296217
> 
> 赞同：0
> 
> 时间：2013-01-12T17:57:49.567
> 
> 标签：javascript, client-side, derbyjs

我正在创建一个网页，将一些模型显示为表格，并允许用户按标签过滤该模型的项目。

我是 Derby.js 的新手，目前可以使用它将数据从服务器发送到客户端`model.set('items', items);`

并且在视图中

```
{#each :items}
    {.title} - {.description}
{/} 
```

所有的项目也有一个`tags`属性。我想给用户一个这些标签的列表，并允许他通过点击他感兴趣的标签来过滤显示的项目。我该怎么做呢？

据我了解，我可能必须在客户端而不是当前方式进行模板化 - 如果是这样，我如何在 Derby.js 的客户端 JS 中访问模型对象

或者，有没有办法在 Derby.js 中为模型动态指定过滤器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-17T07:05:04.780

```
model.filter('items').ref('_page.items');

{#each _page.items}
  {.title} - {.description}
{/} 
```

# iphone - 如何在 YouTube 视频框架内显示活动指示器？

> ID：14296219
> 
> 赞同：0
> 
> 时间：2013-01-12T17:57:55.167
> 
> 标签：iphone, ios, xcode, youtube

在我的应用程序中，我正在使用以下代码嵌入 YouTube 视频：

```
- (void)playVideo:(NSString *)urlString frame:  (CGRect)frame
{

NSString *embedHTML = @"<body style=\"margin:0\"> <iframe height=\"110\" width=\"110\" src=\"http://www.youtube.com/embed/video id\" frameborder=\"0\"/></iframe> </body> ";

NSString *html = [NSString stringWithFormat:embedHTML, urlString, frame.size.width, frame.size.height];
UIWebView *videoView = [[UIWebView alloc] initWithFrame:frame];

[videoView loadHTMLString:html baseURL:nil];
[self.scrollView addSubview:videoView];
[videoView release];
NSLog(@"%@",html);

} 
```

在 viewWillAppear 方法中：

```
-(void) viewWillAppear:(BOOL)animated {

[self playVideo:@"http://www.youtube.com/watch?video id" frame:CGRectMake(5, 20, 110, 110)];

} 
```

但是当我的视图加载时，我的视频需要一段时间才能显示出来，这可能会让用户觉得什么都没有发生，所以我想在这些框架内显示一个活动指示器。你们能帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:03:36.567

看看你是如何将“ `videoView`”添加到你的滚动视图中的？为什么不以类似的方式将“ `UIActivityIndicator`”视图作为子视图添加到您的 videoView 或您的 scrollView 中？

确保为该活动指示器保留一个手柄/插座，并在视频开始播放时将其移除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:06:57.033

为了使用`UIWebview`更好的性能使用这种方式

在`ViewController.h`文件中

第一个 SET`UIWebViewDelegate`作为代表

```
@interface ViewController : UIViewController<UIWebViewDelegate> {

        UIWebView *videoView;
} 
```

将`override`所有这些方法都放入您的`ViewController.m`文件中

```
– webView:shouldStartLoadWithRequest:navigationType:
– webViewDidStartLoad:
– webViewDidFinishLoad:
– webView:didFailLoadWithError: 
```

编写您的代码显示活动指标代码相应地显示您的指标

有关更多详细信息，请参阅此[链接](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html)

**编辑：**

1.  在`– webViewDidStartLoad:`方法中显示和启动 Activityindicator 的动画

2.  `– webViewDidFinishLoad:`在方法中停止Activityindicator的动画

3.  不要忘记设置`Delegate`。

# jquery - 需要多个 jQuery 循环滑块来使用不同的上一个/下一个按钮

> ID：14296221
> 
> 赞同：0
> 
> 时间：2013-01-12T17:58:03.077
> 
> 标签：jquery, cycle

我正在使用 jQuery 循环在投资组合页面上构建 4 个单独的缩略图幻灯片。每个幻灯片都有它自己的下一个/上一个按钮。但是每个下一个/上一个按钮只会推进第一个幻灯片，我不知道如何解决这个问题。

HTML 代码：（重复 4 次）

```
<div class="slider">
<div class="slides">
    <div>
    <img src="images/portfolio/ident1.jpg" alt=""/>
    <img src="images/portfolio/ident2.jpg" alt=""/>
    <img src="images/portfolio/ident3.jpg" alt=""/>
    <img src="images/portfolio/ident4.jpg" alt=""/>
            </div>
     </div><!--end of slides-->
 </div><!--end of slider-->
 <img src="images/arrow-L.png" alt="Left" class="slider-arrow-left"/>
 <img src="images/arrow-R.png" alt="Right" class="slider-arrow-right"/> 
```

jQuery代码：

```
$(document).ready(function(){
     $(".call-button").toggle(
function() {
$(this).animate({ left: "0" }, 1000 );
}, 
function() { 
$(this).animate({ left: "-225px" }, 1000 );
});

    $('.slides').cycle({ 
        fx:      'scrollHorz', 
        speed:  'slow', 
        timeout: 0, 
        nowrap: true,
        pause:   1,
        prev: $('.slider-arrow-left'),
        next: $('.slider-arrow-right'),
        cssBefore:{ 
            top: 0,
            opacity: 1,
            display: 'block'
        }, 
        animOut: {  
            top: 360
        },
        before: function(curr, next, opts){
            var $curr = $(curr);
            var $next = $(next);
        },
        pause: 1,
        pager: '.slider-controls',
        pagerAnchorBuilder: function (idx, slide) {
            return '.slider-controls li:eq(' + idx + ') a';
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:20:32.907

为了隔离每个节目的控件，您需要遍历每个节目并在每个实例中定义控件：

```
/* assumes you have "slider" DIV (parent() in code below) wrapped around each show*/
$('.slides').each(function(){
   /* look for controls only within this instance*/
  var nextBtn=$(this).parent().find('.slider-arrow-left');
   $(this).cycle({ 
       next: nextBtn
       /* do same for pager and prev*/
   })
}) 
```

# php - 哪种方式是关于 php 中会话的正确方式？

> ID：14296224
> 
> 赞同：-1
> 
> 时间：2013-01-12T17:58:25.113
> 
> 标签：php, session

哪种方式是关于 php 中会话的正确方式？

哪种方式是正确的方式，A 还是 B？：

A：

```
<html>
<body>
<?php
       session_start();
?>
        ... 
```

或者

乙：

```
<?php
       session_start();
?>
<html>
<body>
        ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T18:01:12.693

B总是更好

从[文档](http://php.net/manual/en/function.session-start.php)中：

```
Note: To use cookie-based sessions, session_start() must be called before
outputing anything to the browser. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T17:59:26.607

它的 B 总是更好的选择。到目前为止，我已经尝试过 A 甚至无法工作。

您甚至可以查看[http://www.w3schools.com/php/php_sessions.asp](http://www.w3schools.com/php/php_sessions.asp)他们也推荐了相同的。

# hibernate - 如何在 Hibernate 中使用 setParameterList() 方法？

> ID：14296234
> 
> 赞同：9
> 
> 时间：2013-01-12T17:59:03.377
> 
> 标签：hibernate, hql

我需要根据`ids`作为数组提供的 Oracle 数据库中的选定行，例如`SELECT ... FROM table_name WHERE id IN()`查询。

在我尝试这样做时，我试图[`org.hibernate.setParameterList(String name, Object[] values)`](https://docs.jboss.org/hibernate/orm/5.1/javadocs/org/hibernate/Query.html#setParameterList-java.lang.String-java.lang.Object:A-)在我的 DAO 中使用该方法，如下所示。

```
@Service
@Transactional(readOnly = true, propagation=Propagation.REQUIRES_NEW)
public final class ProductImageDAO implements ProductImageService {

    @SuppressWarnings("unchecked")
    public List<Object[]> getFileName(String[] list) {
        return sessionFactory
                .getCurrentSession()
                .createQuery("SELECT prodImageId, prodImage FROM ProductImage WHERE prodImageId=:list")
                .setParameterList("list", list).list();
    }
} 
```

`String[]`给定方法中的类型参数由各自的 Spring 控制器类提供。

它会导致引发以下异常。

> org.hibernate.hql.ast.QuerySyntaxException：意外令牌：，靠近第 1 行，第 78 列 [select prodImageId, prodImage from model.ProductImage where prodImageId=:id0_, :id1_, :id2_, :id3_, :id4_, :id5_]

`ids`根据使用 Hibernate的列表检索所选行的方法是什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-12T18:15:04.677

```
String queryString = "select acc from cgix.trust.domain.PtbnAccount as acc where acc.accountId IN (:accountdIds)";
Query query = session.createQuery (queryString);
query.setParameterList("accountIds", accountFilter); 
```

假设`accountFilter`是一个`List`对象。请记住，您不应传递空列表，因为这将导致以下 SQL（不起作用）：（ `... WHERE xyz IN () ...`注意空的子句）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-05-25T11:47:00.127

大多数人在这里遇到的问题是他们仍然想使用，

```
query.setParameter("accountIds", accountFilter); 
```

代替

```
query.setParameterList("accountIds", accountFilter); 
```

`setParameterList()`处理列表时使用

# c - 如何在不使用 stdio.h 或任何其他库头文件的情况下将字符写入 C 中的标准输出？

> ID：14296235
> 
> 赞同：14
> 
> 时间：2013-01-12T17:59:04.673
> 
> 标签：c, macos

`putchar(char)`将字符写入标准输出，通常由`stdio.h`.

如何在*不*使用`stdio.h`或任何其他标准库文件的情况下将字符写入标准输出（即：*不允许* `#include`：s）？

`putchar(char)`或者措辞不同，我如何用零`#include`语句实现我自己的？

这就是我想要实现的目标：

```
/* NOTE: No #include:s allowed! :-) */ 

void putchar(char c) {
  /*
   * Correct answer to this question == Code that implements putchar(char).
   * Please note: no #include:s allowed. Not even a single one :-)
   */
}

int main() {
  putchar('H');
  putchar('i');
  putchar('!');
  putchar('\n');
  return 0;
} 
```

说明：

*   请注意：`#include`不允许。甚至没有一个:-)
*   该解决方案不必*是*可移植的（因此内联汇编器是可以的），但它必须在 MacOS X 下使用 gcc 编译。

正确答案的定义：

*   一个工作`putchar(char c)`函数。仅此而已，仅此而已:-)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T18:02:54.353

在 POSIX 系统上，例如 Linux 或 OSX，您可以使用[`write`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/write.html)系统调用：

```
/*
#include <unistd.h>
#include <string.h>
*/

int main(int argc, char *argv[])
{
    char str[] = "Hello world\n";

    /* Possible warnings will be encountered here, about implicit declaration
     * of `write` and `strlen`
     */
    write(1, str, strlen(str));
    /* `1` is the standard output file descriptor, a.k.a. `STDOUT_FILENO` */

    return 0;
} 
```

在 Windows 上也有类似的功能。您可能必须使用 打开控制台，[`OpenFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365430%28v=vs.85%29.aspx)然后使用[`WriteFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365747%28v=vs.85%29.aspx).

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-12T18:58:23.137

```
void putchar(char c) {
  extern long write(int, const char *, unsigned long);
  (void) write(1, &c, 1);
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-12T18:02:31.623

没有独立于平台的方式来做到这一点。

当然，在任何**指定**的平台上，您都可以通过重新实现/复制和粘贴`stdio.h`（以及这反过来依赖的任何东西）的实现来轻松实现这一点。但这不会是便携式的。也不会有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T18:39:57.387

由于提供完整的解决方案可能是不合理的，这是下一个最好的事情......这是[Apple实施](http://www.opensource.apple.com/source/Libc/Libc-825.24/)的源代码- 它是开源的。

我认为将其减少到最低限度是 OP 的一项练习。Apple 甚至还提供了一个 XCode 项目文件。

# c - 在 C 中从文件中读取

> ID：14296236
> 
> 赞同：0
> 
> 时间：2013-01-12T17:59:15.650
> 
> 标签：c, file, binary

我正在尝试从文件中读取一些整数。该程序编译没有错误，但它不打印整数。

```
int main(int argc,char *argv[]){
if(argc != 2){
    printf("Use %s file_name", argv[0]);
}
else{
    char file_name[255];
    int df,n=0,v[1000],tmp,i;
    strcpy(file_name,argv[1]);
    df=open(file_name,O_RDONLY);
    while(read(df,tmp,sizeof(n))>0){
        v[n++] = tmp;
    }
    for(i=0;i<n;i++){
        printf("%d ",v[i]);
    }
}
return 0;} 
```

新代码：

```
 int main(int argc,char *argv[]){
if(argc != 2){
printf("Use %s file_name", argv[0]);
}
else{
char file_name[255];
int df,n=0,v[1000],tmp,i;
strcpy(file_name,argv[1]);
if ((df=open(file_name,O_RDONLY) ) < 0) {
perror("Cannot open output file\n"); exit(1);
}
while( n != 1000 && ( read(df,&v[n++],sizeof(*v)) > 0) ){}
for(i=0; i!=n; i++){
printf("%c ",(char)v[i]);
}
}
return 0;
} 
```

甚至在它只显示其中 2 个而不是 3 个位模式之前，即使我的文件中有 3 个字符

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:03:53.397

[Read 需要一个指向缓冲区的指针，因为它是第二个 arg](http://linux.die.net/man/2/read)：

```
int main(int argc,char *argv[]){
if(argc != 2){
    printf("Use %s file_name", argv[0]);
}
else{
    char file_name[255];
    int df,n=0,v[1000],tmp,i;
    strcpy(file_name,argv[1]);
    if ((df=open(file_name,O_RDONLY) ) < 0) {
    perror("Cannot open output file\n"); exit(1);
    }
    while( n != 1000 && ( read(df,&v[n++],sizeof(*v)) > 0) ){}
    for(i=0; i!=n; i++){
        printf("%d ",v[i]);
    }
}
return 0;
} 
```

我实际上很惊讶您的程序没有段错误-您使用未初始化的 int 作为指针值。您需要检查文件是否已成功打开。您还需要确保不会溢出缓冲区，因此您需要在每次迭代时检查 n 。此外，无需使用临时变量，您可以直接写入缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:39:19.430

read 需要一个 void* ，因此您需要传递要用于存储值的变量的地址

试试这个

```
int main(int argc,char *argv[]){
    if(argc != 2){
        printf("Use %s file_name", argv[0]);
    }
    else{
        char file_name[255];
        int df,n=0,v[1000],tmp,i;
        strcpy(file_name,argv[1]);
        df=open(file_name,O_RDONLY);
        while(read(df,&tmp,sizeof(n))>0){
            v[n++] = tmp;
        }
        for(i=0;i<n;i++){
            printf("%d ",v[i]);
        }
    }
    return 0;
} 
```

我只是用 &temp 改变了温度

# angularjs - 动态改变过滤器表达式

> ID：14296241
> 
> 赞同：2
> 
> 时间：2013-01-12T17:59:40.053
> 
> 标签：angularjs

我有一系列记录。该数组将根据用户的权限显示不同的记录。

因此，我必须根据用户使用不同的过滤器。我如何创建这样一个表达式，它根据用户的许可采用变量函数 -

```
<div ng-repeat="r in records | filter:{isVisible:true}" 
```

上面有一个过滤器表达式 {isVisible:true}。我想根据用户动态分配不同的过滤器表达式。所以 user2 将有 {isCommon: 'M2'}。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-12T19:57:38.527

过滤器表达式也可以是变量：

```
<li ng-repeat="item in items | filter:filterExpr">{{item.name}}</li> 
```

在范围上定义表达式的位置：

```
$scope.filterExpr = { tester: true }; 
```

这是一个更完整地展示了这一点的 Plunker：[http ://plnkr.co/edit/Au8KFg?p=preview](http://plnkr.co/edit/Au8KFg?p=preview)

PS：请注意@MarkRajcok 对您的帖子的评论，因为这**非常**重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-20T08:27:39.030

2Terry Drozdowski - 绝对正确：过滤器不适用于最新版本（1.1.7）的布尔值。感谢您指出这一点 - 您必须使用引号：

```
<div ng-repeat="r in records | filter:{isVisible:'true'}" 
```

# python - 如何将 Memcache 与 ProtoRPC 一起使用（Google App Engine - Python）

> ID：14296243
> 
> 赞同：4
> 
> 时间：2013-01-12T17:59:40.833
> 
> 标签：python, google-app-engine, python-2.7

我正在尝试将 memcache 与 ProtoRPC 一起使用来加速某些过程（带有 Python 的 Google App Engine）。为了简化问题，我使用了[Hello World](https://developers.google.com/appengine/docs/python/tools/protorpc/overview#The_Hello_World_of_ProtoRPC)示例，并对其进行了一些修改。这是我的版本：

```
from protorpc import messages
from protorpc import remote
from protorpc.wsgi import service

from google.appengine.api import memcache

class HelloRequest(messages.Message):
  my_name = messages.StringField(1, required=True)

class ElementOfArrayResponse(messages.Message):
  value=messages.IntegerField(1)

class HelloResponse(messages.Message):
  hello = messages.StringField(1, required=True)
  list = messages.MessageField(ElementOfArrayResponse, 2, repeated=True)

class HelloService(remote.Service):
  @remote.method(HelloRequest, HelloResponse)
  def hello(self, request):
    response = memcache.get(request.my_name)

    if response is None:
      list = []
      for i in range(7):
        list.append(SomeElementResponse(value=i))
      response = HelloResponse(hello='Hello there, %s!' % request.my_name, list=list)
      memcache.set(request.my_name,response)
    return response

app = service.service_mappings([('/hello.*', HelloService)]) 
```

但是，不幸的是，此代码返回一个错误，即：`ERROR 2013-01-12 17:17:31,081 service.py:196] Encountered unexpected error from ProtoRPC method implementation: PicklingError (Can't pickle <type 'weakref'>: attribute lookup __builtin__.weakref failed)`.

但是，当我使用与 original 几乎相同的代码时`HelloResponse`，memcache 效果很好。

那么，我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T02:38:15.233

两件事，看起来你的 memcache 键是一个 List 对象（想确保你知道这一点）。在您的代码旁边，您必须`message`在放入/退出`memcache`api 时序列化对象。

这是一个重写：

```
from protorpc import remote
from protorpc import messages
from protorpc import protojson
from protorpc.wsgi import service
from google.appengine.api import memcache

class HelloRequest(messages.Message):
  my_name = messages.StringField(1, required=True)

class ElementOfArrayResponse(messages.Message):
  value=messages.IntegerField(1)

class HelloResponse(messages.Message):
  hello = messages.StringField(1, required=True)
  list = messages.MessageField(ElementOfArrayResponse, 2, repeated=True)

class HelloService(remote.Service):
  @remote.method(HelloRequest, HelloResponse)
  def hello(self, request):
    response = memcache.get(request.my_name)
    if response:
      # decode the value to a message..
      response = protojson.decode_message(HelloResponse, response)
    else:
      list = []
      for i in range(7):
        list.append(SomeElementResponse(value=i))
      response = HelloResponse(hello='Hello there, %s!' % request.my_name, list=list)
      # encode the message to a serializable format..
      value = protojson.encode_message(message)
      memcache.set(request.my_name, value)
    return response

app = service.service_mappings([('/hello.*', HelloService)]) 
```

# c++ - 您还在 Windows 8 中使用 DXSDK_DIR 吗？

> ID：14296246
> 
> 赞同：3
> 
> 时间：2013-01-12T17:59:52.197
> 
> 标签：c++, directx

我知道在 Windows 7 中，安装 DirectX SDK 后，您可以通过添加**$(DXSDK_DIR)Include; 在项目中添加对此的引用；**到项目属性对话框中**VC++ 目录下的****包含目录**文本框。

 **我也知道在 Windows 8 上，不再有 Direct X SDK。您需要的一切都捆绑到 Windows 8 SDK 中，所以我的问题是在 Windows 8 上，我需要在项目属性对话框中的**VC++ 目录下的****包含目录**文本框中添加什么才能使用 DirectX？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T18:16:40.123

平台 SDK 已经在 VC++ 列表中，因此无需添加任何内容。如果它没有编译，您可能已经在旧的 SDK 旁边安装了新的 SDK，而没有在 VC++ 中更新位置。****

# python - reduce() 似乎没有返回数字，否则 .index() 无法正常工作

> ID：14296249
> 
> 赞同：0
> 
> 时间：2013-01-12T17:59:58.403
> 
> 标签：python, list

我有一个应该执行以下操作的函数：获取列表列表和数字权重列表。然后，取列表列表中每个底层项的加权平均值，权重列表中的第一项用于加权第一个事物列表，权重列表中的第二项用于加权第二个列表，等等。它就像一个函数，只取列表中项目的加权平均值，但项目被分组，以便将特定权重应用于每个组。如果很多东西的重量相同，这很有用。这是代码：

```
def getAverage(x,wts=[0.1,0.3,0.6]):
    """Get weighted average of partitioned list."""
    xsum = 0
    i = 0
    for item in x:
        xsum += reduce(lambda x,y:x+y,item)*wts[i]
        i += 1
    return xsum/reduce(lambda x,y:x+y,wts) 
```

但是，当我尝试编译时，该行出现以下错误：

```
TypeError: unsupported operand type(s) for +=: 'int' and 'list' 
```

什么？为什么？为什么这个乘法会返回一个列表？这是没有意义的。`reduce()`返回一个数字（准确地说是整数），其中的元素`wts`是浮点数。怎么不允许加到xsum？是我用错`lambda`了还是怎么的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T18:22:37.723

您的函数主要是合理的（尽管我认为它要么命名错误，要么您也想除以最后的项目数 - 否则它不是平均值），所以您必须传入不正确的参数。最有可能的是，您的第二个参数实际上是列表列表，而不是整数列表。

这就是说，我们可以改进功能。这里有几个问题。首先，当[内置](http://docs.python.org/3.3/library/functions.html#sum)可以更有效地完成这项工作时[，](http://docs.python.org/3.3/library/functions.html#sum)`reduce()`您正在使用汇总项目。[`sum()`](http://docs.python.org/3.3/library/functions.html#sum)

接下来，循环计数使用`i`- 这是一个不好的做法，相反，我们应该使用[内置](http://docs.python.org/3.3/library/functions.html#enumerate)[的`enumerate()`](http://docs.python.org/3.3/library/functions.html#enumerate). 但是，这里我们使用它同时循环两个列表，在 Python 中，最好使用[内置](http://docs.python.org/3.3/library/functions.html#zip)[的`zip`](http://docs.python.org/3.3/library/functions.html#zip).

随着结果的积累，我们可以将整个事情变成一个[生成器表达式](http://www.youtube.com/watch?v=pShL9DCSIUw)并对其进行求和。这意味着我们最终可以通过一种简单的方式来执行此操作：

```
def weighted_average(items, weights):
    total = sum(sum(item)*weight for item, weight in zip(items, weights))
    return total/sum(weights) 
```

我还省略了权重的默认值 - 除非默认值是特定于域的，否则我建议这里没有好的默认值，因为它取决于`items`. 一个好的默认值的唯一可能是假设相等的权重。例如：

```
def weighted_average(items, weights=None):
    if not weights:
        weights = [1]*len(items)
    total = sum(sum(item)*weight for item, weight in zip_longest(items, weights))
    return total/sum(weights) 
```

# jquery - 有没有更好的方法来格式化多个事件？

> ID：14296250
> 
> 赞同：0
> 
> 时间：2013-01-12T18:00:12.070
> 
> 标签：jquery

好的，所以我一键在这里发生了多件事，但我想知道是否有更好的格式化或执行方式？

```
<ul><li>Hello</li><li>Welcome</li><li>Howdy</li></ul>
<div class="first">Goodbye</div><div class="second">See ya</div><div class="third">Later Gator</div>

$('li:first-child').click(function(){
$('li:nth-child(2)').removeClass('this');
$('li:nth-child(3)').removeClass('this');
$('.second').hide();
$('.third').hide();
$('li:first-child').addClass('this');
$('.first').show(); }); 
```

分别以这种方式执行此操作时，我需要在单击另一个时执行相同的过程。

[jsfiddle](http://jsfiddle.net/thatrockz/5EYBf/16/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:05:22.320

您可以使用`this`引用单击元素的关键字。当然，您的页面中还有其他 div 或 li 元素，您可以将类添加到您的元素中，以将这些元素与其他元素区分开来。

```
$('li').click(function(){
    var $this = $(this), ind = $this.index();
    $this.addClass('this').siblings().removeClass('this');
    $('div').hide().eq(ind).show()
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:14:41.617

How about this?

```
$('li:first-child').click(function(){
    $(this).addClass('this').next().removeClass('this').next().removeClass('this');
    $('.second, .third').hide();
    $('.first').show(); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T18:08:44.200

```
$('ul').on('li','click', function(ev) {
    // your code
}); 
```

因为这种方法避免了多个事件绑定。jQuery 只是在 UL 元素上查找使 dom 冒泡的单击事件，但如果我错了，请纠正我。

# apache-flex - 如何在 Flex 中获取和设置动态对象？

> ID：14296254
> 
> 赞同：0
> 
> 时间：2013-01-12T18:00:41.020
> 
> 标签：apache-flex, adobe

我发现该函数`"getChildByName"`只能获取`mxml`. 当我必须添加一个 id 为`"dynamic_id"`动态的元素时。

我怎样才能得到这个元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T10:01:42.943

MXML 中使用的 id 将被解析为对组件的简单引用。`public var contentGroup:Group;`例如。因此，您只需向组件添加新字段。

# iphone - UINavigationController 的子视图中调用的旋转方法？

> ID：14296255
> 
> 赞同：0
> 
> 时间：2013-01-12T18:00:47.297
> 
> 标签：iphone, ios, ipad, uinavigationcontroller, rotation

我在导航控制器中嵌入了一个视图层次结构。当视图旋转时，子视图控制器中会调用哪些方法？此代码位于导航控制器的其中一个子视图中，并且这些方法都没有被调用！

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{
    NSLog(@"1");
    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad){
        return true;
    }else{
        if(toInterfaceOrientation == UIInterfaceOrientationPortrait){
            return YES;
        }
    }

    return false;

}

-(void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration{
    [self loadCorrectElements];
    NSLog(@"2");
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:03:21.503

你应该得到两个

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation

- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 
                                duration:(NSTimeInterval)duration 
```

所以你的设置有其他问题。

要清楚，正如你提到的“子视图” - 你的意思是最顶层的 UIViewController？那就是在轮换期间拦截这些消息的那个。

# python - 将包含整数的列表转换为字符串

> ID：14296256
> 
> 赞同：1
> 
> 时间：2013-01-12T18:00:48.760
> 
> 标签：python, string, list

我想将列表转换为字符串，但它包含整数。它现在可以工作了，无论如何这就是代码：

```
for player in basicPlayers:
  say('Name' + str(player['name']) + 'score' + str(player['score'])) 
```

Sooo是的，我想让它像

```
Player1 (2), Player2 (4), Player3 (6) 
```

不是

```
Player1 (2) 
Player2 (4)
Player3 (6) 
```

获取数据的代码：

```
def getBasicPlayers(self): # Finished
        """Returns a list containing a dictionary for each player:
        [
            {
                'name' : string,
                'score' : integer,
            },
            {
                'name' : string,
                'score' : integer,
            },
        ]
        Note: This will return an empty list if the player count is above 100."""
        packet = self.assemblePacket("c")
        self.send(packet)

        reply = self.receive()
        reply = reply[11:] # Clean up bytes
        players = []

        strLen = struct.unpack("<h", reply[0:2])
        playerCount = strLen[0]

        reply = reply[2:] # Clean up bytes

        for i in range(playerCount):
            players.append({'name' : '', 'score' : 0})

        pointer = 0

        for player in players:
            strLen = ord(reply[pointer:(pointer + 1)])

            name = reply[(pointer + 1):(pointer + (strLen + 1))]

            temp = struct.unpack("<i", reply[(pointer + (strLen + 1)):(pointer + (strLen + 5))])
            pointer += (strLen + 5)

            player['name'] = name
            player['score'] = temp[0]

        return players 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:05:06.660

怎么样

```
', '.join('Name %(name)s Score %(score)d' % player for player in basicPlayers) 
```

请注意，`join`它将任何*可迭代对象*作为其参数，在这种情况下，我们将生成器表达式传递给它。

* * *

例如：

```
basicPlayers = [{'name' : 'Bob','score' : 42}, {'name' : 'Joe','score' : 24}]

print ', '.join('Name %(name)s Score %(score)d' % 
                                           player for player in basicPlayers) 
```

```
名字 Bob 得分 42，名字 Joe 得分 24

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T18:19:05.967

我认为最好使用该`format`功能。

```
>>> basicPlayers = [{'name': 'John', 'score': 1}, {'name': 'Mary', 'score': 2}]
>>> ', '.join(('{name} ({score})'.format(**player) for player in basicPlayers))
'John (1), Mary (2)' 
```

# php - session 和 PHP（本地主机上的两个站点）

> ID：14296258
> 
> 赞同：0
> 
> 时间：2013-01-12T18:00:56.810
> 
> 标签：php

我在一个网站上工作，一切都很好，但是我复制了我的网站（我在本地主机上运行）

当我在新站点登录时，会话已创建，但是对于旧站点！我可以使用新站点轻松登录旧站点 =))

我的问题是这里的新站点不存储（或查找）会话，当我使用 firebug 检查时，成功创建了一个新的 cookie。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:03:32.103

`session_name(String)`对每个站点和之前使用不同的`session_start()`.

更多信息： http: [//php.net/manual/en/function.session-name.php](http://php.net/manual/en/function.session-name.php)

# node.js - 如何获取猫鼬模型的各个属性？

> ID：14296264
> 
> 赞同：1
> 
> 时间：2013-01-12T18:01:25.917
> 
> 标签：node.js, coffeescript, express, mongoose

读完 The Little MongoDB 书后，我今天才开始玩 mongoose。我对此很陌生，到目前为止，我已经知道如何从 mongoose 查询我的集合并根据它们的属性查找文档，但我想知道的实际上是如何为每个文档只显示文档的一个属性例如，在 Express res.send() 中的集合。就像一个学习实验，如果你愿意的话。

我在 CoffeeScript 中编写了这段代码：

```
express = require 'express'
app = express()
http = require 'http'
server = http.createServer app
mongoose = require 'mongoose'

mongoose.connect 'localhost', 'linkreferrers'

# ## Ignore these configurations for now
# app.configure ->
#   app.set 'views', __dirname + '/views'
#   app.set 'view engine', 'jade'

linkSchema = new mongoose.Schema {
    referer: 'string'
}

Link = mongoose.model 'Link', linkSchema

app.get '/', (req, res) ->
    # Fetch the HTTP Referer from the visitor's browser, store it in the database, display a list of referers
    refererdata = req.get 'Referer'
    if refererdata?
        link = new Link {referer: refererdata}
        do link.save
    Link.find (err, links) ->
        console.log err if err
        res.send links

server.listen 5000 
```

这会将以下数据发送到用户的浏览器：

```
[
  {
    "referer": "http://fiddle.jshell.net/_display/",
    "_id": "50f0fdcb75d2543b38000001",
    "__v": 0
  },
  {
    "referer": "http://fiddle.jshell.net/_display/",
    "_id": "50f18b0c95e3182a3a000001",
    "__v": 0
  },
  {
    "referer": "http://fiddle.jshell.net/_display/",
    "_id": "50f18b58040ac5413a000001",
    "__v": 0
  }
] 
```

我将如何仅将`referer`每个文档的参数发送到浏览器？我试过用 替换`links`，`links.referer`但那会发送`undefined`. 有时它会抛出一个错误，指出链接没有“引用者”属性。我已经坚持了几个小时了......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T18:10:45.390

第二个参数`find`让您选择要包含的字段。尝试将该行替换为：

```
Link.find {}, '-_id referer', (err, links) -> 
```

`_id`必须使用`-`前缀明确排除，但其余字段是可选的。

# php - 打开授权文件并将其流式传输到输出

> ID：14296265
> 
> 赞同：0
> 
> 时间：2013-01-12T18:01:26.487
> 
> 标签：php

我正在尝试在 stackoverflow 上使用示例，但找不到任何可以在 PHP 中使用的东西。我正在尝试从服务器流式传输一个大文件，然后将其实时流式传输到 PHP 中的输出。问题是我似乎无法完成它，因为该文件需要授权。我有凭据，因为它是我的家庭服务器。有没有人做到这一点？

```
$ch = curl_init();
$writefunc = function($ch, $chunk) {
    print $chunk;
    ob_flush();
    flush();
    return len($chunk);
};
curl_setopt($ch, CURLOPT_BUFFERSIZE, 8096);
curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
curl_setopt($ch, CURLOPT_BINARYTRANSFER, true);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($ch,CURLOPT_WRITEFUNCTION , $writefunc);
curl_exec($ch); 
```

# c# - 如何从 RavenDB 数据库中获取所有实体名称（集合名称）？

> ID：14296266
> 
> 赞同：2
> 
> 时间：2013-01-12T18:01:28.253
> 
> 标签：c#, collections, metadata, document, ravendb

我需要检索数据库中存在的所有 RavenDB 集合名称。有没有办法做到这一点？如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T23:12:44.397

如果您使用过该工作室，您会看到它创建了一个名为`Raven/DocumentsByEntityName`. 如果你不使用工作室，或者你想确保它在那里，你可以自己构建它：

```
documentStore.ExecuteIndex(new RavenDocumentsByEntityName()); 
```

Raven Studio 构建其“集合”列表的方式是`Tag`从该索引中获取字段的术语。你可以做同样的事情：

```
var results = documentStore.DatabaseCommands
                           .GetTerms("Raven/DocumentsByEntityName", "Tag", "", 1024); 
```

*（如果您出于某种原因期望超过 1024 种不同的实体类型，请分页。）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T19:34:26.457

最后，我通过尝试使用我之前获得的学习文档的知识得到了一个解决方案。我想给人们做个广告，我只有在我厌倦了试探性的时候才来这里。

```
public string[] getCollectionNames()
        {
            using (var session = this.store.OpenSession())
            {
                return session.Advanced.LuceneQuery<dynamic>()
                           .SelectFields<dynamic>("@metadata")
                           .Select<dynamic, string>(x => x["@metadata"]["Raven-Entity-Name"])
                           .Distinct()
                           .ToArray();

            }
        } 
```

# c++ - C++ 插入运算符 (<<) 是否修改了值？

> ID：14296269
> 
> 赞同：0
> 
> 时间：2013-01-12T18:01:30.543
> 
> 标签：c++

我有一个返回双精度数组的函数。在我的调试器中，我检查了数组，发现它的值为 {6.5, 1.5}。但是，当我将数组打印到 cout 时，我看到“6.5,3.30525e+230”。我的猜测是 << 正在改变我的值或者我没有正确格式化

```
double *result;

result = haar1d(series, 2, seriesAverage); 
```

--> 在断点处，我看到了 result[0] == 6.5 和 result[1] == 1.5

```
for(int i = 0; i < 2; i++)
{
    cout << result[i] << ",";
} 
```

**固定**：这就是我最终得到的。

```
vector<double> haar1d(vector<double> vec, double seriesAverage)
{
vector<double> transVec(vec.size(), 0);
vector<double>::size_type length = vec.size();

if(vec[0] == seriesAverage)
{
    return vec;
}

int diffFromAvgs = length / 2;

for(int i = 0; i < length; i += 2)
{
    double pairAverage = (vec[i] + vec[i + 1]) / 2;
    transVec[i] = pairAverage;
    transVec[diffFromAvgs+i] = vec[i] - pairAverage;
}

return haar1d(transVec, seriesAverage);
} 
```

主要：

```
vector<double> result = haar1d(series, avg);

for(vector<double>::iterator it = result.begin(); it != result.end(); ++it)
{
    cout << *it << ",";
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T18:15:40.307

No, `operator<<` does not modify its arguments. It prints them as is. However, I bet your function looks something like this:

```
double* haar1d(/* ... */)
{
  double arr[N];
  // Fill this array
  return arr;
} 
```

The point being that the array `arr` is local to the function. It will be destroyed when the function ends. However, you're returning a pointer to its first element. That pointer will be invalid outside the function, because the array it points to has been destroyed. To use this pointer now will invoke undefined behaviour, so you shouldn't be surprised if values start changing seemingly randomly.

I recommend using either `std::array<double, N>` or `std::vector<double>`, depending on whether your array size is a compile time constant or not. Returning either of these will copy its contents to the calling function.

If I'm guessing correctly, you might be using the argument that you gave as `2` as the size of the array. If this is compiling, you are using a compiler with a variable length arrays extension, and your code is not standard C++.

# javascript - 是否可以在没有内容溢出的情况下进行 onscroll 事件？

> ID：14296270
> 
> 赞同：0
> 
> 时间：2013-01-12T18:01:33.497
> 
> 标签：javascript, html

我有一个页面，其格式完全适合它呈现的窗口。当用户时`"scrolls"`，我想捕获它并更改某些元素的不透明度+大小......创建`"scrolling IN"`效果，而不是向上/向下或侧面滚动边。

那可能吗？从我一直在阅读的内容来看，似乎`"onscroll"`触发事件的唯一方法是页面的内容溢出窗口。

我觉得这里可能有一个简单的解决方案，我只是忽略了它。`>_<`

我很想只用 JavaScript 就能做到这一点，但如果有一个插件我可以使用它来实现很酷的效果。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:03:02.853

我想你正在寻找[`onmousewheel`](https://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference/mousewheel)或[`onwheel`](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/wheel?redirectlocale=en-US&redirectslug=DOM%2FDOM_event_reference%2Fwheel)

# objective-c - 安全地将 NSString 中的内存归零

> ID：14296271
> 
> 赞同：8
> 
> 时间：2013-01-12T18:01:39.670
> 
> 标签：objective-c, security, cocoa, cocoa-touch, memory-management

在 iOS 上，我想知道，如果我这样读取用户提供的密码值：

```
NSString* strPwd = UITextField.text;

//Check 'strPwd'
...

//How to clear out 'strPwd' from RAM? 
```

我只是不喜欢让敏感数据“悬空”在 RAM 中。知道如何将其归零吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T18:14:13.620

Basically you really can't. There are bugs filed with Apple over this exact issue. Additionally there are problems with `UITextField` and `NSString` at a minimum.

To reiterate the comment in a now deleted answer by @Leo Natan:

> Releasing the enclosing NSString object does not guarantee the string bytes are zeroes in memory. Also, if a device is jailbroken, all the sandboxing Apple promises will be of no use. However, in this case, there is little one can do, as it is possible to swap the entire runtime in the middle of the application running, this getting the password from the memory.

Please file another bug with apple requesting this, the more the better.

[Apple Bug Reporter](http://bugreporter.apple.com)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-12-01T00:48:48.803

虽然`NSString`没有此功能（出于其他地方提到的封装原因），但让您的应用程序使用常规的旧 C 字符串应该不会*太难*，它们只是指向内存的指针。一旦你有了那个指针，当你完成后就很容易清除东西。

这对用户输入的文本字段（使用`NSString`-s 并且我们无法更改它们）没有帮助，但您当然可以*将应用程序的*所有敏感数据保存在基于指针的内存中。

我没有尝试过它（我没有当前的越狱设备），但尝试一下也可能很有趣`NSMutableString`——比如：

```
// Code typed in browser; may need adjusting
// keep "password" in an NSMutableString
NSInteger passLength = password.length;
NSString *dummy = @"-";
while (dummy.length < passLength)
{
    dummy = [dummy stringByAppendingString: @"-"];
}

NSRange fullPass = NSMakeRange(0, passLength);
[password replaceOccurancesOfString: password
                         withString: dummy
                            options: 0
                              range: fullPass]; 
```

注意：我不知道这是否符合您的要求；这只是我在输入之前的答案时想到的。即使它*现在*确实有效，我想这取决于实现，它是脆弱的（意思是：将来可能会破坏），所以不应该使用。

不过，这可能是一个有趣的练习！:)

# html - CSS，创建下拉菜单

> ID：14296279
> 
> 赞同：0
> 
> 时间：2013-01-12T18:02:41.930
> 
> 标签：html, css, menu, hover

我不知道这是否可以通过纯 CSS 实现。请检查我的例子。

[http://jsfiddle.net/fantill/72xjU/](http://jsfiddle.net/fantill/72xjU/)

我希望当菜单的第 2 级悬停时将显示第 3`'inline'`级和第 1 级，同时显示每个第 3 级下方的所有第 4 级菜单和`'block'`第 2 级。

```
-------------------------------------------
|      MENU                               |
|      Level 1                            |
-------------------------------------------
| Level2|           Level 3  Inline       |
|       |----------------------------------
|       | Level4  | Level4 | Level4|Level4|
--------|         |        |       |      |
        |         |        |       |      |
        |---------------------------------- 
```

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T19:36:20.017

小提琴：http : [//jsfiddle.net/4CGwe/1/](http://jsfiddle.net/4CGwe/1/)

标记应该尊重这个方案：

```
#BLABLA > ul > li > a
#BLABLA > ul > li > ul > li > ul > li > ul > li > a 
```

（每个都`<LI>`应该包含`<A>`和可选`<UL>`）

这是CSS：

```
 #BLABLA ul
        {list-style:none;margin:0;padding:0;display:none;}
    #BLABLA li
        {position:relative;}
    #BLABLA a
        {border:2px red outset;padding:10px 30px;display:block;}

    /* by default only the first level menu is visible */
    #BLABLA > ul
        {display:block;}

    /* by default hovering a item will try to show its own sub-menu */
    #BLABLA li:hover > ul
        {display:block;}

    /* any submenu (2,3,4 level) is absolute */
    #BLABLA ul ul
        {position:absolute;}

    /* FIRST LEVEL MENU */
    #BLABLA > ul > li
        {float:left;}
    #BLABLA > ul > li > a
        {background:orange;}

    /* SECOND LEVEL MENU */
    #BLABLA > ul > li > ul
        {top:100%;left:0;}
    #BLABLA > ul > li > ul > li > a
        {background:pink;}

    /* THIRD LEVEL MENU */
    #BLABLA > ul > li > ul > li > ul
        {left:100%;top:0;width:900px;} /* sadly here you have to set manually a huge width */
    #BLABLA > ul > li > ul > li > ul > li
        {float:left;}
    #BLABLA > ul > li > ul > li > ul > li > a
        {background:gold;}  

    /* FOURTH LEVEL MENU */
    #BLABLA > ul > li > ul > li > ul > li > ul > li > a
        {background:lightblue;} 
```

PS：告诉我你是否对设置 width:900px 的替代方案感兴趣

# python - Python apply_async 在 args 中传递一个字典

> ID：14296294
> 
> 赞同：1
> 
> 时间：2013-01-12T18:03:54.480
> 
> 标签：python, python-2.7, multiprocessing

我在将字典传递`multiprocessing.poll.apply_async`给子处理时遇到问题。

```
pool = mp.Pool(processes=cores) #Create a pool of workers, one for each core
for job in range(cores): #Prep to assign each core a job
    pool.apply_async(initialize, args=(job,z,w,floor,p,))
pool.close()
pool.join() 
```

w 是具有`.neighbors`属性的对象。这个属性是一个`dict`存储 id 的拓扑结构（即它的邻居）。当我尝试在子进程中访问此属性时，我返回一个空的`dict`. 当我尝试直接传递 dict 时，我返回一个空的`dict`：

```
neighbor_dict = w.neighbors
...
pool.apply_async(initialize, args=(job,z,w,neighbor_dict,floor,p,)) 
```

我认为我不需要使用经理来访问字典，因为我从不写信；我只需要读取权限。

此外，这个[问题](https://stackoverflow.com/questions/7353973/python-passing-dictionary-to-process-in-multiprocessing)的相似之处在于 OP 正在使用多处理。与使用池相反，他们使用的是 Process。我也在 POSIX 系统上，所以应该受到 fork() 的影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:35:35.150

已解决：似乎无法从另一个模块传递一个类实例。在`print w.neighbors`返回 a`dict`时，`type(w.neighbors)`是一个类实例。转换为 a`dict`解决了这个问题。

# video - 获取 youtube 视频直接链接的最新方法

> ID：14296296
> 
> 赞同：2
> 
> 时间：2013-01-12T18:04:12.607
> 
> 标签：video, hyperlink, youtube, download

我在获取 youtube 直接视频方面做了一些谷歌（就像 keepvid 所做的那样），似乎这种方式给出了响应（作为 HTML）： http://youtube.com/get_video_info? [video_id](http://youtube.com/get_video_info?video_id=) = {v_part} 但是，签名从那个 HTML 是错误的（与 keepvid 得到的相比）。

那么，您如何找到该签名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:17:09.063

我为此制作了一个 JavaScript 小书签

[`svnpenn.github.io/bm`](http://svnpenn.github.io/bm)

# c# - modelstate.isvalid 总是假的

> ID：14296297
> 
> 赞同：-2
> 
> 时间：2013-01-12T18:04:18.087
> 
> 标签：c#, asp.net-mvc, entity-framework-4.1, dropdownlistfor

我正在填写一个下拉列表，如下所示：

```
@Html.DropDownListFor(model => model.Department.Id, new SelectList(db.PhoenixIKDepartments.ToList(), "Id", "Name")) 
```

我希望有 Id、Code 和 Name，但只有 Id 和 ModelState 是假的。

```
public class Phoenix_IK_Persons
{      
    [Key]
    public int Id { get; set; }

    [StringLength(50)]
    public string Name { get; set; }

    [StringLength(500)]
    public string Surname { get; set; }

    [StringLength(50)]
    public string Registry { get; set; }

    public Phoenix_IK_Departments Department { get; set; }
}

public class Phoenix_IK_Departments
{
    [Key]
    public int Id { get; set; }

    [StringLength(50)]
    [Required(AllowEmptyStrings=false, ErrorMessage="Lütfen Kod Giriniz!")]
    public string Code { get; set; }

    [Required(AllowEmptyStrings = false, ErrorMessage = "Lütfen Ad Giriniz!")]
    [StringLength(500)]
    public string Name { get; set; }        
} 
```

您能帮我用 ID、名称和代码正确填写下拉列表吗？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:56:48.343

`Code`模型上没有填充的原因`Name`是因为这些字段没有包含在任何地方的标记中***并***没有填充。`<form>`这行代码：

```
model => model.Department.Id 
```

将该下拉列表绑定到该字段。如果您查看生成的 HTML，您会注意到`name`和`id`属性表明了这一点。

但是，如果您只是像这样放入两个隐藏字段：

```
@Html.HiddenFieldFor(model => model.Department.Code);
@Html.HiddenFieldFor(model => model.Department.Name); 
```

他们会被带回价值。如果您需要它们具有值，您可以简单地在 JavaScript 中分配它们，当它们被回发时，它们将被分配给模型。

# android - 连接到 Web 服务时 AndroidClient 中的 NullPointerException

> ID：14296298
> 
> 赞同：1
> 
> 时间：2013-01-12T18:04:26.843
> 
> 标签：android, jax-ws

连接到 Web 服务时，我的 Android 客户端出现 NullPointerException。我真的不知道为什么...

日志猫：

```
01-12 18:46:55.062: E/AndroidRuntime(831): FATAL EXCEPTION: main
01-12 18:46:55.062: E/AndroidRuntime(831): java.lang.RuntimeException: Unable to start activity ComponentInfo{pl.webcentral.androidclient1/pl.webcentral.androidclient1.MainActivity}: java.lang.NullPointerException
01-12 18:46:55.062: E/AndroidRuntime(831):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
01-12 18:46:55.062: E/AndroidRuntime(831):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
01-12 18:46:55.062: E/AndroidRuntime(831):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
01-12 18:46:55.062: E/AndroidRuntime(831):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
01-12 18:46:55.062: E/AndroidRuntime(831):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-12 18:46:55.062: E/AndroidRuntime(831):  at android.os.Looper.loop(Looper.java:137)
01-12 18:46:55.062: E/AndroidRuntime(831):  at android.app.ActivityThread.main(ActivityThread.java:4745)
01-12 18:46:55.062: E/AndroidRuntime(831):  at java.lang.reflect.Method.invokeNative(Native Method)
01-12 18:46:55.062: E/AndroidRuntime(831):  at java.lang.reflect.Method.invoke(Method.java:511)
01-12 18:46:55.062: E/AndroidRuntime(831):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-12 18:46:55.062: E/AndroidRuntime(831):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-12 18:46:55.062: E/AndroidRuntime(831):  at dalvik.system.NativeStart.main(Native Method)
01-12 18:46:55.062: E/AndroidRuntime(831): Caused by: java.lang.NullPointerException
01-12 18:46:55.062: E/AndroidRuntime(831):  at pl.webcentral.androidclient1.GameAndroidUtil.callGameStatus(GameAndroidUtil.java:106)
01-12 18:46:55.062: E/AndroidRuntime(831):  at pl.webcentral.androidclient1.GameAndroidUtil.testGameWS(GameAndroidUtil.java:21)
01-12 18:46:55.062: E/AndroidRuntime(831):  at pl.webcentral.androidclient1.MainActivity.onCreate(MainActivity.java:24)
01-12 18:46:55.062: E/AndroidRuntime(831):  at android.app.Activity.performCreate(Activity.java:5008)
01-12 18:46:55.062: E/AndroidRuntime(831):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
01-12 18:46:55.062: E/AndroidRuntime(831):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
01-12 18:46:55.062: E/AndroidRuntime(831):  ... 11 more 
```

GameAndroidUtil:

```
package pl.webcentral.androidclient1;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.SoapFault;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

public class GameAndroidUtil {
    private static final String NAMESPACE = "http://game.webcentral.pl/";
    private static final String SOAP_ACTION = "";
    private static final String WSDL_URL = "http://10.0.2.2:8080/ReversiGameWS/services/GameWS?wsdl";

    public static void testGameWS() throws SoapFault {

        String session1 = callGameLogin("Marcin 1");

        GameStatus gameStatus = callGameStatus(session1);
        System.out.println("Status gracza 1 " + gameStatus.getLastMove() + " " + gameStatus.isYourMove());

        String session2 = callGameLogin("Marcin 2");

        gameStatus = callGameStatus(session2);
        System.out.println("Status gracza 2 " + gameStatus.getLastMove() + " " + gameStatus.isYourMove());

        gameStatus = callGameStatus(session1);
        System.out.println("Status gracza 1 " + gameStatus.getLastMove() + " " + gameStatus.isYourMove());

        try {
            callGameAddMove(session1, 5);
        } catch (Exception e) {
            System.out.println("Złapaliśmy wyjątek zgodnie z założeniem");
        }

        callGameAddMove(session2, 5);

        gameStatus = callGameStatus(session2);
        System.out.println("Status gracza 1 " + gameStatus.getLastMove() + " " + gameStatus.isYourMove());

        gameStatus = callGameStatus(session1);
        System.out.println("Status gracza 2 " + gameStatus.getLastMove() + " " + gameStatus.isYourMove());
    }

    private static String callGameLogin(String userName) {
        String METHOD_NAME = "login";

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11); 

        PropertyInfo propInfo=new PropertyInfo();
        propInfo.setName("arg0");
        propInfo.setType(PropertyInfo.STRING_CLASS);
        propInfo.setValue(userName);

        request.addProperty(propInfo);

        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(WSDL_URL);

        try {
            androidHttpTransport.call(SOAP_ACTION, envelope);

            SoapPrimitive resultsRequestSOAP = (SoapPrimitive) envelope.getResponse();

            return resultsRequestSOAP.toString();

        } catch (Exception e) {
            throw new RuntimeException("Unexpected exception", e);
        }
    }
    private static GameStatus callGameStatus(String sessionId) throws SoapFault {
        String METHOD_NAME = "getGameStatus";

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11); 

        PropertyInfo propInfo=new PropertyInfo();
        propInfo.setName("arg0");
        propInfo.setType(PropertyInfo.STRING_CLASS);
        propInfo.setValue(sessionId);

        request.addProperty(propInfo);

        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(WSDL_URL);

        try {
            androidHttpTransport.call(SOAP_ACTION, envelope);
        } catch (Exception e) {
            throw new RuntimeException("Unexpected exception", e);
        }

        try {
            SoapObject response = (SoapObject)envelope.getResponse();

            GameStatus gameStatus = new GameStatus();
            if (response.hasProperty("lastMove")) {
                gameStatus.setLastMove(Integer.parseInt(response.getProperty("lastMove").toString()));
            }
            gameStatus.setYourMove(Boolean.parseBoolean(response.getProperty("yourMove").toString()));

            return gameStatus;
        } catch (SoapFault e) {
            System.out.println("Error adding move: " + e.faultstring);//można to ładnie jakoś pokazać na ekranie
            throw e;
        }

    }
    private static void callGameAddMove(String sessionId, Integer move) throws SoapFault {
        String METHOD_NAME = "addMove";

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11); 

        PropertyInfo propInfo=new PropertyInfo();
        propInfo.setName("arg0");
        propInfo.setType(PropertyInfo.STRING_CLASS);
        propInfo.setValue(sessionId);

        request.addProperty(propInfo);

        propInfo=new PropertyInfo();
        propInfo.setName("arg1");
        propInfo.setType(PropertyInfo.INTEGER_CLASS);
        propInfo.setValue(move);

        request.addProperty(propInfo);

        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(WSDL_URL);

        try {
            androidHttpTransport.call(SOAP_ACTION, envelope);
        } catch (Exception e) {
            throw new RuntimeException("Unexpected exception", e);
        }

        try {
            SoapPrimitive resultsRequestSOAP = (SoapPrimitive) envelope.getResponse();
        } catch (SoapFault e) {
            System.out.println("Error adding move: " + e.faultstring);//można to ładnie jakoś pokazać na ekranie
            throw e;
        }
    }

} 
```

问题就在这里：

```
 gameStatus.setLastMove(Integer.parseInt(response.getProperty("lastMove").toString()); 
```

为什么会这样？仅当响应具有此属性时才执行此行。如果有，为什么是 NullPointer？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:15:32.320

```
 gameStatus.setLastMove(Integer.parseInt(response.getProperty("lastMove").toString())); 
```

The below line is null, thats why null pointer exception, pls add log n check it out
response.getProperty("lastMove").toString()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T19:51:57.680

> 似乎 Log.d("lastMove", response.getProperty("lastMove").toString()); 现在正在导致 NullPointerException ...

很明显，这`response.getProperty("lastMove")`就是问题所在。这意味着它`response`有一个键，`"lastMove"`但值本身是`null`......只需使用：

```
if (response.hasProperty("lastMove") && response.getProperty("lastMove") != null) {
    gameStatus.setLastMove(Integer.parseInt(response.getProperty("lastMove").toString()));
} 
```

（如果您控制 SOAPObject 的创建方式，您应该首先找出为什么要保存空值。）

# html - 如何使用 OpenOffice API 将 HTML 文本放入 OpenOffice 电子表格

> ID：14296299
> 
> 赞同：1
> 
> 时间：2013-01-12T18:04:29.190
> 
> 标签：html, openoffice-calc, openoffice-api

**如何使用 OpenOffice API 将 HTML 文本放入 OpenOffice 电子表格**

我找到了 ODT-Textdocuments 的解决方案.. **（但没有针对 SpreadsheetDocment）**：

> 1.  在我们想要放置 HTML 文本的地方加载 odt 文档。
> 2.  转到要放置 HTML 文本的位置。
> 3.  将 HTML 文本保存在系统的临时文件中（也许可以不使用 http URL 保存，但我没有测试它）。
> 4.  按照此说明将 HTML 插入 odt 并将 URL 传递给临时 HTML 文件（请记住将系统路径转换为 ​​OO 路径）。

那里使用了方法：insertDocumentFromURL。

我不知道如何将这种方法与电子表格一起使用.. 还是有其他解决方案？例如：`cellText.setHtml("....");`？？？你或有人能帮帮我吗？？？

**OpenOffice TextDocument 的完整代码示例：**

```
IDocumentService documentService = OOConnection.getDocumentService();
            IDocument document = documentService.constructNewDocument(IDocument.WRITER, new DocumentDescriptor());

            textDocument = (ITextDocument) document;
            String htmlText = "<P></P>" + "<P>Paragraph1</P>" + "NOA HTML Insert Test" + "<b>Bold</b>"
                    + "<H1>Header 1</H1>" + "<P>Paragraph2</P>" + "<CENTER>Center</CENTER>" + "<TABLE>"
                    + "<TR><TD bgcolor=#336699>Cell 1</TD><TD bgcolor=#663399>Cell 2</TD></TR>"
                    + "<TR><TD bgcolor=#123456>the third cell</TD><TD bgcolor=#654321>Cell 4</TD></TR>" + "</TABLE>";
            textDocument.getTextService().getText().setText(htmlText);
            textDocument.getPersistenceService().export(new FileOutputStream("C:/SfH/html.html"), new TextFilter());

            XController xController = textDocument.getXTextDocument().getCurrentController();
            XTextViewCursorSupplier xTextViewCursorSupplier = (XTextViewCursorSupplier) UnoRuntime.queryInterface(
                    XTextViewCursorSupplier.class, xController);
            XTextViewCursor xViewCursor = xTextViewCursorSupplier.getViewCursor();
            XTextCursor xTextCursor = xViewCursor.getText().createTextCursorByRange(xViewCursor.getStart());
            XDocumentInsertable xDocumentInsertable = (XDocumentInsertable) UnoRuntime.queryInterface(
                    XDocumentInsertable.class, xTextCursor);

            xDocumentInsertable.insertDocumentFromURL(
                    URLAdapter.adaptURL(new File("C:/SfH/html.html").getAbsolutePath()), new PropertyValue[0]);
            textDocument.update(); 
```

和我

# iphone - 管理自己的令牌缓存崩溃 ios

> ID：14296301
> 
> 赞同：1
> 
> 时间：2013-01-12T18:04:43.860
> 
> 标签：iphone, facebook, caching, token, facebook-ios-sdk

当用户在我的应用程序上通过 Facebook 登录时，我已按照步骤管理我自己的令牌缓存，但是按下登录按钮时它总是崩溃。它调用：

```
NSDictionary *data = [[NSDictionary alloc] initWithContentsOfFile:self.tokenFilePath]; 
```

然后崩溃。如果我改变初始化

```
_tokenFilePath = [self filePath]; 
```

到

```
self.tokenFilePath = [self filePath]; 
```

那么它不会崩溃，但有时登录按钮必须在登录之前多次按下。我该如何解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:21:35.573

如果您不使用 ARC，则将存在保留差异。

`self.tokenFilePath`调用 setter 并且该 setter 正在增加`filePath`.

没有 ARC 直接分配给 ivar 不会增加保留计数。采用：

```
_tokenFilePath = [[self filePath] retain]; 
```

使用 ARC，直接分配会增加保留计数。

# compiler-errors - 虽然放在mingw文件夹中，但找不到包含的库头文件

> ID：14296304
> 
> 赞同：1
> 
> 时间：2013-01-12T18:04:54.443
> 
> 标签：compiler-errors, include, g++, mingw, static-libraries

我有一个用户定义的 C++ 库，我们称之为*库*。它的文件夹中有几个*头*文件，我已将它们放入**mingw**包含目录（***mingw\include***）。我还将获得的***liblibrary.a***文件放入 mingw lib 目录（***mingw\lib***）。

在 main.cpp 文件中，我包含了一个遵循规则的头文件，例如当您包含 openGL 头文件时；这就是我们所做的

```
#include <GL/glut.h> 
```

所以我的包含看起来像这样

```
#include <library/header.h>
int main (){
   /*
    ** blah blah
    */

} 
```

并在编译时，

```
g++ -c main.cpp 
```

编译器抱怨它找不到 library/header.h 文件，我可能做错了什么？

这样我就无法链接它..

```
g++ -llibrary main.o -o main 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:11:30.990

你可以试试这个

```
g++ main.cpp -llibrary -o main 
```

[**参考**](https://stackoverflow.com/a/2487723)

# javascript - 冻结力定向网络图并在 D3 中实现可拖动

> ID：14296309
> 
> 赞同：3
> 
> 时间：2013-01-12T18:05:06.363
> 
> 标签：javascript, d3.js, force-layout

我正在尝试完全冻结 d3 中的强制定向网络！我尝试将摩擦值设置为 0，但网络变得更加紧凑，节点仍然略微悬停。

```
var force = d3.layout.force()
.charge(-220)
.linkDistance(70)
.friction(0); 
```

我还希望我的节点是可拖动的，即当它们被拖动时移动位置。

最终，我试图得到类似于 Cytoscape js 的东西，看起来像[这样](http://cytoscape.github.com/cytoscape.js/)。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T16:04:19.807

首先，如果你想在某个时间“冻结”图形，你可以使用layout的[stop](https://github.com/mbostock/d3/wiki/Force-Layout#wiki-stop)命令：`force`

```
force.stop() 
```

一个很好的用途是首先让图形自组织（使用[tick](https://github.com/mbostock/d3/wiki/Force-Layout#wiki-tick)）然后停止强制：

```
// include in beginning of script
force.start();
for (var i = 0; i < n; ++i) force.tick();
force.stop(); 
```

然后，如果你想拖放节点，一个好主意是`drag`在 d3 示例页面上搜索，你会找到以下链接：[拖放支持将节点设置为放置时的固定位置，](http://bl.ocks.org/2883411)这有你想要的一切。顺便说一句，它也与你可能会发现有趣的stackoverflow问题有关：[D3 forcedirected graph with drag and drop support to make selected node position fixed when drops](https://stackoverflow.com/questions/10899725/d3-js-force-directed-graph-with-support-for-drag-and-drop-to-make-selected-node)

这是用于拖放的有趣代码，适用于力已经停止的图形（我只是评论了一些行，但不确定，因此请通过取消注释来验证它是否按预期工作）

```
var node_drag = d3.behavior.drag()
    .on("dragstart", dragstart)
    .on("drag", dragmove)
    .on("dragend", dragend);

function dragstart(d, i) {
    //force.stop() // stops the force auto positioning before you start dragging
}

function dragmove(d, i) {
    d.px += d3.event.dx;
    d.py += d3.event.dy;
    d.x += d3.event.dx;
    d.y += d3.event.dy; 
    tick(); // this is the key to make it work together with updating both px,py,x,y on d !
}

function dragend(d, i) {
    //d.fixed = true; // of course set the node to fixed so the force doesn't include the node in its auto positioning stuff
    //tick();
    //force.resume();
}

function tick() {
  link.attr("x1", function(d) { return d.source.x; })
      .attr("y1", function(d) { return d.source.y; })
      .attr("x2", function(d) { return d.target.x; })
      .attr("y2", function(d) { return d.target.y; });

  node.attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });
}; 
```

# multithreading - 运行一个产生 N 个线程的进程还是运行 N 个进程更快？

> ID：14296316
> 
> 赞同：6
> 
> 时间：2013-01-12T18:05:34.137
> 
> 标签：multithreading, parallel-processing

我意识到这在很大程度上取决于所讨论的流程，但有经验法则吗？

假设我有一个名为的多线程程序`progX`，它提供了一个命令行开关 ( `--cpu`) 来控制它可以使用的 CPU 数量。`progX --cpu 1`启动 40 个并行实例每个使用一个 CPU ( ) 还是启动单个实例并告诉它使用 40 个 CPU ( )更快`progX --cpu 40`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:48:08.093

一般规则是：在您的任务之间没有任何关系的情况下，多进程版本的性能将趋向于多线程版本之一（某些操作系统使用进程实现线程，因此性能将严格等效）。

您将支付更多来初始化您的流程，特别是如果您使用一些托管环境（例如 Java 或 .Net），但随着时间的推移，初始启动费用将变得可以忽略不计。

因此，如果您有小任务，差异可能会很大，但如果您在几个小时内运行任务，则差异可以忽略不计。

当您的线程之间有一些交互时，事情变得有趣：

*   **共享数据**：在进程之间共享内存比线程之间更复杂且成本更高

*   **同步**：同步进程太麻烦了，特别是如果您可以使用语言结构进行透明线程同步

性能不适合多进程，但还有其他很好的理由使用它，比如**可靠性**：如果你使用一些可能会破坏和崩溃进程的组件，如果你有一个多线程应用程序，失败将导致损失在您的所有任务中，而对于多进程应用程序，只有一个会失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T18:08:31.710

很大程度上取决于操作系统，但通常线程比进程更轻量级（实际上每个进程至少由一个线程组成），因此通过启动一个具有 40 个线程的进程，您将减少压力（尤其是在内存消耗方面）系统上。

还要记住，线程与进程根本不同，因为它们在共享地址空间上运行。但是，如果他们相互交流，这无关紧要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T18:12:46.123

到目前为止，启动单个实例更快。线程是为此目的而创建的，它们比进程更轻。事实上的规则是：让操作系统来做调度和内存管理，除非你需要自己做脏活。这样你的代码会更简单、更干净。操作系统有一堆较低级别的工具来更有效地处理进程和内存。当然，这取决于操作系统，但这是现代操作系统的一般规则，至少是我使用的操作系统（Linux）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T18:22:47.013

最准确的答案是执行一项小任务，并使用各种设置为您的应用程序计时。您可以通过每个启动 N 个 M cpus 进程

```
#!/bin/bash
M=$1
N=$2
for ((i=0; i<$N; i++)) ; do ( echo $i && time progX --cpu $M & ) ; done 
```

重要的时间是最后一个打印的时间（所有进程应该或多或少同时并行启动）。

# image - 从图像帧动画。Pygame (python3)

> ID：14296320
> 
> 赞同：2
> 
> 时间：2013-01-12T18:05:56.533
> 
> 标签：image, animation, python-3.x, frame, pygame

我有带动画的文件 (*.png)。每个文件- 框架。所以 10 个文件 - 10 帧。完整动画重复 4 次。所以我需要渲染图像 20 次。

```
DiceAnim1=pygame.image.load('Gfx/Dices/dice0042.png').convert_alpha()
DiceAnim2=pygame.image.load('Gfx/Dices/dice0043.png').convert_alpha()
DiceAnim3=pygame.image.load('Gfx/Dices/dice0044.png').convert_alpha()
DiceAnim4=pygame.image.load('Gfx/Dices/dice0045.png').convert_alpha()
DiceAnim5=pygame.image.load('Gfx/Dices/dice0046.png').convert_alpha()
DiceAnim6=pygame.image.load('Gfx/Dices/dice0047.png').convert_alpha()
DiceAnim7=pygame.image.load('Gfx/Dices/dice0048.png').convert_alpha()
DiceAnim8=pygame.image.load('Gfx/Dices/dice0049.png').convert_alpha()
DiceAnim9=pygame.image.load('Gfx/Dices/dice0050.png').convert_alpha()
DiceAnim10=pygame.image.load('Gfx/Dices/dice0051.png').convert_alpha() 
```

任何人都可以建议具有最小代码长度的功能。在主程序循环中启动：

```
if event.type == pygame.MOUSEBUTTONDOWN:
    if gameState==7:
        if 165<pointer_coord[0]<424 and 249<pointer_coord[1]<607 : 
            gameState=9
            rolling=1 
```

这意味着用户点击区域（x = 165，y = 249，长度= 424-165，高度= 607-249），然后游戏进入状态9。状态9 - 为播放动画而创建。

```
if gameState==9:
        RollingAnimation(166,253)
        RollingAnimation(210,278)
        RollingAnimation(166,303)
        RollingAnimationControl() 
```

这个函数 RollingAnimation 是：

```
def RollingAnimation(tx,ty):
    global diceTikTac
    screen.blit(DiceAnimShadow,[tx,ty])
    if diceTikTac==1: screen.blit(DiceAnim1,[tx,ty])
    if diceTikTac==2: screen.blit(DiceAnim2,[tx,ty])
    if diceTikTac==3: screen.blit(DiceAnim3,[tx,ty])
    if diceTikTac==4: screen.blit(DiceAnim4,[tx,ty])
    if diceTikTac==5: screen.blit(DiceAnim5,[tx,ty])
    if diceTikTac==6: screen.blit(DiceAnim6,[tx,ty])
    if diceTikTac==7: screen.blit(DiceAnim7,[tx,ty])
    if diceTikTac==8: screen.blit(DiceAnim8,[tx,ty])
    if diceTikTac==9: screen.blit(DiceAnim9,[tx,ty])
    if diceTikTac==10: screen.blit(DiceAnim10,[tx,ty]) 
```

为了控制动画，我使用了一个控制函数 RollingAnimationControl：

```
def RollingAnimationControl():
    global radiobuttonPos,diceTikTac,round1,gameState
    diceTikTac=diceTikTac+1
    if diceTikTac==11: 
        round1=round1+1
        diceTikTac=1
    if round1>4: # how much need loops animation.
        gameState=11
        diceTikTac=1            
        rolling=0
        round1=0 
```

问题是：我怎样才能最小化这个功能。如果动画使用 100 个带帧的文件，你能想象这个函数的外观吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:42:48.620

一种方法是使用精灵表来制作动画。

# 动画加载：

```
def load_anim(start=42, stop=52):
    # loads array of many frames
    files = [ "Gfx/Dices/dice00{}.png".format(i) for i in range(start, stop) ]
    frames = []

    for file in files:
        surf = pygame.image.load(file).convert_alpha()
        frames.append(surf)
    return frames 
```

我不确定你是如何制作动画的。如果是基于时间的，还是什么？

# 点击

```
if event.type == pygame.MOUSEBUTTONDOWN:
    if gameState==7:
        # I'm assuming this is the rect of a sprite.
        # Otherwise you can still create the Rect
        if dice_sprite.get_rect.collidepoint(event.pos)
            gameState = 9
            rolling = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T20:08:01.727

为了加载动画，您可以使用 for 循环来遍历需要加载的内容，因为它们的命名很方便（做得很好）：

```
frames=[]
for i in range(42, 52):
    frames.append(pygame.image.load('Gfx/Dices/dice00'+str(i)+'.png').convert_alpha()) 
```

现在这些帧都在一个列表中，它可以更容易地对它们进行 blit。

```
for frame in frame:
    screen.blit(frame, ???) 
```

通过这种方式，您可以在没有任何冗长或重复的情况下对动画进行 blit 和加载

# java - Eclipse 通知的 android 中未处理的异常

> ID：14296324
> 
> 赞同：0
> 
> 时间：2013-01-12T18:06:30.627
> 
> 标签：java, android, eclipse

尝试使用 Eclipse 和 Android。然而，当我保存我的文件时，eclipse 尖叫着说有一个未处理的异常。但是，当尝试添加 catch 位时，Eclipse 告诉我必须删除 try 中的代码！

任何人都可以告诉我发生了什么事吗？我是 Java 和 Eclipse 的新手。

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        try
        {       
            setContentView(R.layout.activity_main);
            todo_source = new ToDoListFile("todo.json" );
        }
        finally
        {

        }
    } 
```

谢谢！

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:07:41.310

您应该捕获异常：

```
try{
    myStuff();
catch(Exception e){
    e.printStackTrace();
} 
```

另请参见[此处](http://docs.oracle.com/javase/tutorial/essential/exceptions/)。如果这没有帮助，请说明您是如何尝试捕获异常的，以及 Eclipse 给您的确切消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:45:20.533

只要`try`块内的代码不引发异常，您的声明就有效。可能会引发您需要`new ToDoListFile("todo.json" );`的异常`catch`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T18:19:25.903

请注意，您需要在 try 块之外输出 serContentView。它可以预防

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T18:12:38.737

当您选择在代码中处理异常时，您必须在 catch 块中处理它，目前您没有处理异常。您只有一个 try 块，其中放置了可能引发异常的代码段和一个不执行任何操作的 finally 块。在 catch 块中捕获异常并处理它（打印异常的堆栈跟踪）。

```
 try
 {       
   setContentView(R.layout.activity_main);
  todo_source = new ToDoListFile("todo.json" );
 }
 catch(WhatEverException ex){
 ex.printStackTrace()
 } 
```

# mysql - MySQL 使用连接排除较新的记录会导致性能下降

> ID：14296325
> 
> 赞同：0
> 
> 时间：2013-01-12T18:06:30.890
> 
> 标签：mysql

我在 MySQL 表中查询为特定 x/y/z 坐标记录的事件（对于游戏插件，仅供参考）。此查询是使用右连接编写的，以排除在完全相同坐标处具有*较新条目的记录。*

然而，这是一个性能杀手。

例如，一个查询返回大约 32k 个结果（它们通常不会这么高，但我需要解决根本问题） -*如果没有*正确的连接比较，它需要：33373 行集合（0.19 秒）。

使用正确的连接，它需要 32955 行集合（3 分 7.99 秒）

3分钟太长了。

这是一个包含右连接的示例查询：

```
SELECT prism_actions.id, prism_actions.action_time, prism_actions.action_type, prism_actions.player, prism_actions.world, prism_actions.x, prism_actions.y, prism_actions.z, prism_actions.data, DATE_FORMAT(prism_actions.action_time, '%c/%e/%y') display_date, DATE_FORMAT(prism_actions.action_time, '%l:%i%p') display_time
FROM prism_actions
RIGHT JOIN (SELECT action_type, x, y, z, max(action_time) as action_time FROM prism_actions GROUP BY action_type, x, y, z) latest 
ON prism_actions.action_time = latest.action_time
AND prism_actions.x = latest.x
AND prism_actions.y = latest.y
AND prism_actions.z = latest.z
AND prism_actions.action_type = latest.action_type
WHERE world = 'world'
AND (prism_actions.action_type = 'creeper-explode' OR prism_actions.action_type = 'entity-explode' OR prism_actions.action_type = 'tnt-explode' OR prism_actions.action_type = 'block-burn')
AND LEFT(prism_actions.action_type,5) != 'prism'
AND (prism_actions.x BETWEEN 2412.0286793077976 AND 2612.0286793077976)
AND (prism_actions.y BETWEEN -25.5 AND 174.5)
AND (prism_actions.z BETWEEN -2650.697295131335 AND -2450.697295131335)
ORDER BY prism_actions.action_time ASC, x ASC, z ASC, y ASC, id ASC
LIMIT 0,1000000 
```

没有，就是简单地删除正确的连接。

**所以我的问题是：**

*   这是处理排除具有较新条目的记录的最佳方法吗？
*   如果是这样，我可以做些什么来提高性能吗？

我使用这样的查询的原因是我的软件需要按时间戳排序的结果，但应该始终只知道每个 x/y/z 的最新活动，否则会发生冲突。

表结构：

```
CREATE TABLE IF NOT EXISTS `prism_actions` (
  `id` int(11) unsigned NOT NULL auto_increment,
  `action_time` datetime NOT NULL,
  `action_type` varchar(25) NOT NULL,
  `player` varchar(16) NOT NULL,
  `world` varchar(255) NOT NULL,
  `x` int(11) NOT NULL,
  `y` int(11) NOT NULL,
  `z` int(11) NOT NULL,
  `data` varchar(255) NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1; 
```

解释上述查询的非常减少的区域的结果：

```
+----+-------------+---------------+------+---------------+------+---------+------+------+----------------------------------------------+
| id | select_type | table         | type | possible_keys | key  | key_len | ref  | rows | Extra                                        |
+----+-------------+---------------+------+---------------+------+---------+------+------+----------------------------------------------+
|  1 | PRIMARY     | <derived2>    | ALL  | NULL          | NULL | NULL    | NULL | 1870 | Using where; Using temporary; Using filesort | 
|  1 | PRIMARY     | prism_actions | ALL  | NULL          | NULL | NULL    | NULL | 1970 | Using where                                  | 
|  2 | DERIVED     | prism_actions | ALL  | NULL          | NULL | NULL    | NULL | 1970 | Using temporary; Using filesort              | 
+----+-------------+---------------+------+---------------+------+---------+------+------+----------------------------------------------+
3 rows in set (0.04 sec) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:35:27.337

我的猜测是下面的工作会稍微好一些。假设它为您提供了正确的答案，但对性能没有太大帮助，请考虑为相关表提供 SHOW CREATE TABLE 语句，并在此查询上发布 EXPLAIN 的输出......

```
SELECT pa.id
     , pa.action_time
     , pa.action_type
     , pa.player
     , pa.world
     , pa.x
     , pa.y
     , pa.z
     , pa.data
     , DATE_FORMAT(pa.action_time, '%c/%e/%y') display_date
     , DATE_FORMAT(pa.action_time, '%l:%i%p') display_time
  FROM prism_actions pa 
  JOIN 
     ( SELECT action_type
            , x
            , y
            , z
            , MAX(action_time) max_action_time 
         FROM prism_actions 
        GROUP 
           BY action_type
            , x
            , y
            , z
     ) latest 
    ON latest.max_action_time = pa.action_time 
   AND pa.x = latest.x
   AND pa.y = latest.y
   AND pa.z = latest.z
   AND pa.action_type = latest.action_type
 WHERE world = 'world'
   AND pa.action_type IN('creeper-explode','entity-explode','tnt-explode','block-burn')
   AND pa.action_type NOT LIKE 'prism%'
   AND pa.x BETWEEN 2412.0286793077976 AND 2612.0286793077976
   AND pa.y BETWEEN -25.5 AND 174.5
   AND pa.z BETWEEN -2650.697295131335 AND -2450.697295131335
 ORDER 
    BY pa.action_time ASC
     , x ASC
     , z ASC
     , y ASC
     , id ASC
 LIMIT 0,1000000; 
```

# c++ - 如何在 Qt5 中播放声音（Qt4 迁移）？

> ID：14296326
> 
> 赞同：5
> 
> 时间：2013-01-12T18:06:40.170
> 
> 标签：c++, qt, multimedia, phonon, qt5

在 Qt4 我曾经使用

```
QT += multimedia phonon
//...
#include <Phonon>
//...
        Phonon::MediaObject *mediaObject = Phonon::createPlayer(Phonon::NoCategory, Phonon::MediaSource(QUrl("./assets/audio/window_appear.wav")));
        //   "\"" + Qdir().absolutePath() + "/audio/click.wav" + "\""
        mediaObject->play(); 
```

一切都很好。但是现在[Qt 5 不支持 Phonon。](https://bugreports.qt-project.org/browse/QTBUG-26471)所以我想知道 - 如何在 Qt5 中播放诸如声音之类的媒体文件？

使用 WebKit？（这完全有可能，但从很多角度来看看起来有点糟糕）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T18:12:39.790

Qt 开发人员在 Qt4 的后期版本中已经开始减少他们对 Phonon 集成的努力，而是专注于 Qt Multimedia 和 Qt Mobility 模块。尽管他们仍然支持 Phonon。

正如您所说，从 Qt5 开始，不再支持 Phonon。因此，请改用[Qt Multimedia](http://qt-project.org/doc/qt-5.0/qtmultimedia/multimediaoverview.html)，尤其是[QAudioOutput](http://qt-project.org/doc/qt-5.0/qtmultimedia/qaudiooutput.html)。

[正如他们在“详细说明”下的文档](http://qt-project.org/doc/qt-5.0/qtmultimedia/qaudiooutput.html)中列出的那样，播放音频文件看起来像这样：

```
QFile inputFile;     // class member.
QAudioOutput* audio; // class member.
inputFile.setFileName("/tmp/test.raw");
inputFile.open(QIODevice::ReadOnly);

QAudioFormat format;
// Set up the format, eg.
format.setFrequency(8000);
format.setChannels(1);
format.setSampleSize(8);
format.setCodec("audio/pcm");
format.setByteOrder(QAudioFormat::LittleEndian);
format.setSampleType(QAudioFormat::UnSignedInt);

QAudioDeviceInfo info(QAudioDeviceInfo::defaultOutputDevice());
if (!info.isFormatSupported(format)) {
    qWarning()<<"raw audio format not supported by backend, cannot play audio.";
    return;
}

audio = new QAudioOutput(format, this);

connect(audio,SIGNAL(stateChanged(QAudio::State)),SLOT(finishedPlaying(QAudio::State)));
 audio->start(&inputFile); 
```

# c# - 接口实现错误

> ID：14296328
> 
> 赞同：2
> 
> 时间：2013-01-12T18:06:51.670
> 
> 标签：c#

我是 c# 编程的新手，我知道这是一个业余问题，所以请不要笑我！

我是声明这些接口

```
class derived : iInterface3
{
    double[] d = new double[5];
    public override int MyProperty
    {
        get
        {
            return 5;
        }
        set
        {
            throw new Exception();
        }
    }
    int iProperty
    {
        get
        {
            return 5;
        }
    }
    double this[int x]
    {
        set
        {
            d[x] = value;
        }
    }
}
class derived2 : derived
{

}
interface iInterface
{
    int iProperty
    {
        get;
    }
    double this[int x]
    {
        set;
    }
}
interface iInterface2 : iInterface
{ }
interface iInterface3 : iInterface2
{ } 
```

即使我将 iInterface 的所有成员都实现为派生类，但我仍然收到此错误。

> “final_exam_1.derived”没有实现接口成员“final_exam_1.iInterface.this[int]”。'final_exam_1.derived.this[int]' 无法实现接口成员，因为它不是公共的。

和这个

> “final_exam_1.derived”没有实现接口成员“final_exam_1.iInterface.iProperty”。“final_exam_1.derived.iProperty”无法实现接口成员，因为它不是公共的。

为什么？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T18:08:52.473

您需要将`public` [访问修饰符](http://msdn.microsoft.com/en-us/library/ms173121.aspx)添加到从该类派生的所有成员。

默认[情况下](https://stackoverflow.com/questions/2521459/what-are-the-default-access-modifiers-in-c)，他们的访问权限较低。

此外，您需要删除`override`，因为在实现接口时没有需要覆盖的内容。覆盖是当您希望覆盖一个*虚拟方法时。*

```
class derived : iInterface3
{
    double[] d = new double[5];

    public int MyProperty
    {
        get
        {
            return 5;
        }
        set
        {
            throw new Exception();
        }
    }

    public int iProperty
    {
        get
        {
            return 5;
        }
    }

    public double this[int x]
    {
        set
        {
            d[x] = value;
        }
    }
} 
```

您的代码还有其他问题，但这些都是无法编译的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:09:37.697

使`iProperty`索引器公开或使用显式接口实现。显式实现的声明如下所示：`int iInterface3.iProperty`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T18:11:01.810

你不能`override`property `int MyProperty`，因为没有什么可以覆盖的。没有`int MyProperty`在基地`class/interface`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T18:12:38.037

哟确实有很多愚蠢的问题

```
 public override int MyProperty
    {
        get
        {
            return 5;
        }
        set
        {
            throw new Exception();
        }
    } 
```

因为您是从接口实现的，而不是已经具有虚拟成员的基类/抽象类，因此**覆盖**是没有意义的。

第二题。

```
 int iProperty
    {
        get
        {
            return 5;
        }
    } 
```

继承的属性不能是私有类型。

固定代码：

```
class derived : iInterface3
{
    readonly double[] d = new double[5];
    public int MyProperty
    {
        get
        {
            return 5;
        }
        set
        {
            throw new Exception();
        }
    }

    public int iProperty
    {
        get
        {
            return 5;
        }
    }

    public double this[int x]
    {
        set
        {
            d[x] = value;
        }
    }
}
class derived2 : derived
{

}
interface iInterface
{
    int iProperty
    {
        get;
    }
    double this[int x]
    {
        set;
    }
}
interface iInterface2 : iInterface
{ }
interface iInterface3 : iInterface2
{ } 
```

# php - 使用 PHP 从 DOM 中的表中提取值

> ID：14296332
> 
> 赞同：0
> 
> 时间：2013-01-12T18:07:15.347
> 
> 标签：php, dom

我使用 curl 获取 HTML 文件，并尝试使用 DOM 从中获取我需要的内容。

我已经尝试了一切（从我的角度来看），但它并没有像我想要的那样工作。

假设我有这个：

```
html = '<table cellpadding="0" cellspacing="0" id="uniq">
        <tr>
            <th>text</th>
            <td class="1_th">a1</td>
            <td class="1_td">b1</td>
        </tr>
        <tr>
            <th rowspan="3">text1</th>
            <td class="1_th">a2</td>
            <td class="1_td">b2</td>
        </tr>
        <tr>
            <td class="1_th">a3</td>
            <td class="1_td">b3</td>
        </tr>
        <tr>
            <td class="1_th">a4</td>
            <td class="1_td">b4</td>
        </tr>
        <tr>
            <th rowspan="2">text2</th>
            <td class="1_th">a5</td>
            <td class="1_td">b5</td>
        </tr>
        <tr>
            <td class="1_th">a6</td>
            <td class="1_td">b7</td>
        </tr>
    </table>' 
```

我希望能够用 PHP 回应这一点：

```
text - a1 -b1
text1 - a2 -b2
text1 -a3 -b3
text1 -a4 -b4
text2 -a5 -b5
text2 -a6 -b6 
```

该表很大，并且`th`具有 15 到 20 之间的可变行跨度。我想这样做`echo`是因为我想在 MySQL 中插入这些值。

我试过这个：

```
$dom = new DOMDocument();
@$dom->loadHTML($html);
$x = new DOMXPath($dom);
$table = $x->query('//*[@id="uniq"]')->item(0);
$rows = $table->getElementsByTagName("tr");
foreach ($rows as $row) {
    $tds = $row->nodeValue;
    echo $th;
} 
```

没关系，我找到了我需要的解决方案，感谢您尝试帮助我

这是我做的，对我来说没问题：

```
$dom = new DOMDocument();
    @$dom->loadHTML($html);
    $x = new DOMXPath($dom); 

$table = $x->query("//*[@id='item_specification']/tr");
$rows = $table;
foreach ($rows as $row) {
 $atr_name = $row -> getElementsByTagName('td')->item(0)->nodeValue;
 $atr_val = $row -> getElementsByTagName('td')->item(1)->nodeValue;
 $cell1 = $row -> getElementsByTagName('th');
`$ifth = $cell1->length;
`if ($ifth == 1) {
$atr_cat = $row->getElementsByTagName('th')->item(0)->nodeValue;
}
  echo "{$atr_cat} - {$atr_name} - {$atr_val} <br \>";  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:23:14.307

尝试[`strip_tags()`](http://php.net/manual/en/function.strip-tags.php)像这样使用：

```
<?php
$html = '<table cellpadding="0" cellspacing="0" id="uniq">
<tr>
<th>text</th>
<td class="1_th">a1</td>
<td class="1_td">b1</td>
</tr>
<tr>
<th rowspan="3">text1</th>
<td class="1_th">a2</td>
<td class="1_td">b2</td>
</tr>
<tr>
<td class="1_th">a3</td>
<td class="1_td">b3</td>
</tr>
<tr>
<td class="1_th">a4</td>
<td class="1_td">b4</td>
</tr>
<tr>
<th rowspan="2">text2</th>
<td class="1_th">a5</td>
<td class="1_td">b5</td>
</tr>
<tr>
<td class="1_th">a6</td>
<td class="1_td">b7</td>
</tr>
</table>';
$html = strip_tags($html);
echo $html;
?> 
```

[这是这个函数的一个 PHPFiddle](http://phpfiddle.org/main/code/et8-phr)。

输出：

```
text a1 b1 text1 a2 b2 a3 b3 a4 b4 text2 a5 b5 a6 b7 
```

# html - Foundation 3 中的 Google 自定义搜索显示问题

> ID：14296337
> 
> 赞同：4
> 
> 时间：2013-01-12T18:07:41.377
> 
> 标签：html, css, responsive-design, zurb-foundation, google-custom-search

我正在尝试包含 Google 自定义搜索，但它一直显示不正确。按钮上的搜索图标不见了，看起来好像文本框的底部被切断了。

新成员，所以我不能发布图像。

代码

```
<div id="header">
  <div class="row">
    <div class="four columns">
      <h1><img src="images/QEFLogo.JPG" /></h1>
    </div>
    <div class="four offset-by-two columns">
      <div id="iso" class="hide-for-small">
        <h1>
          <img src="images/ISO9001.jpg" />
          <img src="images/ISO14001.jpg" />
        </h1>
      </div>
      <div id="gcsearch" class="hide-for-small">
        <gcse:searchbox-only></gcse:searchbox-only>
      </div>
    </div>
  </div>
</div> 
```

没有真正的 CSS 可言...

```
#gcsearch {
    width:300px;
    position:relative;
    left:-5px;
} 
```

该脚本与 Google 生成的代码无关。

编辑现在发现这是问题所在。Google 元素在其服务器上使用 CSS 文件 default.css。这会生成宽度和高度。

在它定义的 CSS 表的第 126 行...

```
.cse .gsc-search-button input.gsc-search-button-v2, 
input.gsc-search-button-v2 {
    height: 13px;
    margin-top: 2px;
    min-width: 13px;
    padding: 6px 27px;
    width: 13px;
} 
```

请记住，我根本没有太多 Javascript 知识，为什么会发生这种情况，我该如何解决？

我在非 Foundation 页面上测试了代码，它可以正确呈现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T11:40:19.533

这是 Foundation 框架的问题。将以下内容添加到按钮并解决。提到的类是由谷歌生成的，这就是为什么它们没有显示在我上面的代码中。

```
input.gsc-search-button, input.gsc-search-button:hover, input.gsc-search-button:focus {
background-image: inherit;
box-sizing: content-box;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T20:08:18.283

我现在有同样的问题。使用 Google 类的第 2 版，我添加了以下 css

```
<style>
 .cse .gsc-search-button input.gsc-search-button-v2, input.gsc-search-button-v2 {
   background-image: inherit;
   box-sizing: content-box;
   -moz-box-sizing: content-box;
 }
</style> 
```

现在可以在 Chrome 和 Firefox 中使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T18:28:11.783

您的代码中有一个太多的`</div>`结束标记。这使它成为无效的 HTML，并且可能是它显示错误的原因。

# javascript - 如何在 onload 函数上定位匹配输入

> ID：14296338
> 
> 赞同：0
> 
> 时间：2013-01-12T18:07:45.603
> 
> 标签：javascript, jquery

我坚持使用如果输入具有类“错误”则必须执行的函数，那么它旁边的 div 应该会出现，但是当我运行该函数时，它会显示所有 div。在不使用每个功能的情况下是否有解决方案。这是我的代码

```
<head>
<script type="text/javascript">
$(function(){
if($('input').hasClass('inerror')){
$('input', this).next().show();
} 
})
</script>
<style>
.inerror{border:solid 1px #F00}
.error{ display:none}
</style>
</head>
<body>
<input type="button" value="submit" />
<div class="error">error</div> <br />
<input type="button" value="submit" />
<div class="error">error</div> <br />
<input type="button" class="inerror"  value="submit"/>
<div class="error">error</div> <br />
<input type="button" value="submit"/>
<div class="error">error</div> <br />
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:12:43.967

```
$('input', this).next().show() 
```

*这匹配所有* 元素的下一个兄弟`<input>`，不管它之前的检查。

试试这个：

```
$("input.inerror").next().show(); 
```

# django - 在 Django 的模型表单中包含相关对象的表单

> ID：14296350
> 
> 赞同：2
> 
> 时间：2013-01-12T18:08:36.603
> 
> 标签：django, django-forms

我有两个这样的模型：

```
class Person(models.Model):
    name = models.CharField(max_length=100)
    house = models.ForeignKey('House')

class House(models.Model):
    address = models.TextField() 
```

有没有办法为它创建一个模型表单`Person`并让它包含内联表单以编辑相关`House`对象？`House`根据我对内联表单集的了解，如果我有一个编辑 a 的表单并且我想显示所有相关`Person`s的表单，我只会使用它。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-06-03T00:09:57.323

只需将 HouseForm 粘贴到 PersonForm 中，将其作为 clean() 过程的一部分进行评估，然后将其保存为 save() 过程的一部分。也可以在模型集中工作。

```
class HouseForm(forms.modelForm):
    """ Edit a house """
    class Meta:
        model = House
        exclude = ()

class PersonForm(forms.ModelForm):
    """ Edit a person and her house """
    class Meta:
        model = Person
        exclude = ()

    def __init__(self, *args, **kwargs):
        super(PersonForm, self).__init__(*args, **kwargs)
        self.fields['house'].required = False
        data = kwargs.get('data')
        # 'prefix' parameter required if in a modelFormset
        self.house_form = HouseForm(instance=self.instance and self.instance.house, 
                                    prefix=self.prefix, data=data)

    def clean(self):
        if not self.house_form.is_valid():
            raise forms.ValidationError("House not valid")

    def save(self, commit=True):
        obj = super(PersonForm, self).save(commit=commit)
        obj.house = self.house_form.save()
        obj.save() 
```

然后在您的标记中：

```
<form ...>
    {{ person_form }}
    {{ person_form.house_form }}
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T01:59:42.777

我不确定这是否是解决它的最佳方法，但我会做这样的事情：

`ModelForm`从每个模型中定义一个：

```
class PersonForm(ModelForm):
    class Meta:
        model = Person

class HouseForm(ModelForm):
    class Meta:
        model = House 
```

定义一个像这样的模板，输出两种形式：

```
<form action="" method="post">
    <table>
        {{ form1 }}
        {{ form2 }}
    </table>
    <input type="submit">
</form> 
```

用于创建表单以编辑来自两个模型的信息的视图。

```
def edit(request):
    # You could grab the id from the request that calls the edit form
    p = models.Person.objects.get(pk=request.GET.get('id'))
    h = models.House.objects.get(pk=p.house.id)
    return render_to_response('template.html',
        RequestContext(request, 
            {'form1': PersonForm(instance=p), 'form2': HouseForm(instance=h)}
        )
    ) 
```

等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T21:06:21.890

您可以通过 Person 访问相关的 House 对象。因此，我将使用房屋对象作为 Modelform 的实例。

```
HouseForm(ModelForm):
    class Meta:
        model = House 
```

假设你有一个 Paul 的 Person 对象和一个相关的 House。

```
house_form = HouseForm(instance=Paul.house) 
```

这就是你的意思吗？

# javascript - 将 jPlayer 功能分配给自定义按钮

> ID：14296356
> 
> 赞同：1
> 
> 时间：2013-01-12T18:08:47.507
> 
> 标签：javascript, jquery, html, jplayer

我正在尝试将 jPlayer 的播放/暂停功能附加到自定义 css 按钮。

功能：

```
$("#jquery_jplayer_1").jPlayer({
        ready: function(event) {
            $(this).jPlayer("setMedia", {
                mp3: server
            }).jPlayer("play");
        },
        swfPath: "js/",
        wmode: "window",
        solution: "flash,html",
        supplied: "mp3",
        preload: "none",
        volume:0.75,
        cssSelectorAncestor: "",
        cssSelector: {
                play: "#play",
                pause: "#pause"
        }
    });

    $("#jquery_jplayer_1").bind($.jPlayer.event.pause, function(event) {
        $(this).jPlayer("clearMedia");
        $(this).jPlayer("setMedia", {
                mp3: server
        });
    }); 
```

jPlayer.min.js 中的控制器：

```
play:".jp-play",pause:".jp-pause",stop:".jp-stop" 
```

按钮：

```
<script type="text/javascript">
    $(document).ready(function(){
        $('#button').on('click', function(){
            $(this).toggleClass('on');
        });
    });
</script>

<div id="jquery_jplayer_1" class="jp-jplayer"></div>
        <section>
        <a class="cssbutton" href="#" id="button">&#xF011;</a>
        <span></span>
    </section> 
```

如何将这些功能添加到按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:21:46.303

要么为你的按钮提供 ID `play`，要么将播放按钮的 CSS 选择器更改为你当前的 ID：

```
$("#jquery_jplayer_1").jPlayer({
    ...
    cssSelector: {
            play: "#button",
            ...
    }
}); 
```

请记住，您在构建时引用的选择器`$("...").jPlayer({...});`应该映射到页面上的元素，如[Docs](http://jplayer.org/latest/developer-guide/#jPlayer-predefined-css-selectors)中所述。

# objective-c - 制作停靠栏

> ID：14296363
> 
> 赞同：-2
> 
> 时间：2013-01-12T18:09:15.173
> 
> 标签：objective-c, cocoa

我想制作一个包含应用程序图标的停靠栏。如果我单击任何图标，则该应用程序应该午餐，我如何隐藏该停靠栏？

我是可可的新手，我对此一无所知。所以任何人都可以给我基本的想法。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T20:20:50.063

这里有几个关键要素：

*   就像屏幕上的几乎所有其他内容一样，您的 Dock 必须位于窗口中。据推测，您并没有想象一个带有标准框架（标题栏、交通灯和调整大小手柄）的窗口，因此您需要一个无边框的窗口。它必须在一个特定的[窗口级别](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWindow/setLevel%3a)，即[这个](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/c/macro/NSDockWindowLevel)。
*   每个图标都是一个[以 开头](http://c2.com/cgi/wiki?DoTheSimplestThingThatCouldPossiblyWork)的按钮。您可以将其演变为能够弹跳、显示运行状态（就像 Dock 使用其 LED 一样）等的自定义视图。
*   Dock 使用三种项目填充自身：正在[运行的应用程序](http://developer.apple.com/library/mac/documentation/AppKit/Reference/NSRunningApplication_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40008799)、已添加书签的应用程序（即使在运行时仍保留在 Dock 中的应用程序）和已添加书签的文件（文档、文件夹等）。应用程序位于分隔线的左侧；书签文件和垃圾箱在右侧。
*   说到垃圾箱，如果需要，您需要使用[FSEvents](http://developer.apple.com/library/mac/documentation/Darwin/Conceptual/FSEvents_ProgGuide/)来检测任何垃圾箱何时变为非空，NSWorkspace 或 Finder 的 Apple 事件来打开垃圾箱，以及 Finder 的 Apple 事件来清空它.
*   当用户单击未运行的已添加书签的应用程序时，您将使用[NSWorkspace](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40004153)启动该应用程序。
*   对于已经在运行的应用程序，您需要激活它们（如果尚未激活）或“重新打开”它们（如果已经激活）。我首先尝试启动它们，看看这是否在所有三种情况下都是正确的；如果没有，那么您可以在必要时自己发送 Apple 事件。
*   书签文件夹可以在 Dock 中使用以下三个 UI 之一进行浏览：列表（菜单）、网格（集合视图）和“风扇”。菜单很容易制作，但我不确定如何制作弹出式菜单。网格 UI 将是HUD 样式的[popover中的](http://developer.apple.com/library/mac/documentation/AppKit/Reference/NSPopover_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40010720)[集合视图](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSCollectionView_Class/Introduction/Introduction.html#//apple_ref/doc/uid/TP40005036)。“风扇”完全是自定义的，在弹出窗口中。
*   您需要检测应用程序何时启动和终止，以便将它们添加到您的 Dock（如果还没有作为书签存在）并从中删除它们（如果它们没有添加书签）。NSWorkspace 对此有通知。
*   您可能无法获得应用程序的自定义 Dock 菜单。这都是 Apple 的 Dock 和 AppKit 之间的私有内容。
*   同样，祝您好运实现“分配到桌面”菜单项。
*   每个应用程序的 Dock 菜单中的其他命令对应于 NSRunningApplication 方法。
*   您还需要处理 Dock 图标视图中的拖放，以启用重新排序和处理用户将项目拖出 Dock 以取消标记它们。记住要处理取消对正在运行的应用程序添加书签的情况（Dock 确实取消了对它的书签，但因为它仍在运行，所以将应用程序重新定位到原位）。取消书签时，当用户放下它时播放[噗的效果。](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Miscellaneous/AppKit_Functions/Reference/reference.html#//apple_ref/c/func/NSShowAnimationEffect)
*   当用户 ⌘ 将任何项目拖出 Dock 时，拖动该项目所代表的文件。这不适用于 Finder（在 Apple 的 Dock 中——如果需要，您可以这样做）或 Trash（它不代表单个项目）。不要从 Dock 中移除该项目。
*   而且，另一方面，当且仅当由图标表示的项目可以接收该拖动时，您应该在用户拖动图标时突出显示该图标。
    *   当用户将文件拖到应用程序时，如果所有文件的类型都在应用程序的文档类型中，则突出显示它。通过使用 NSWorkspace 以使用该应用程序打开文件 URL 来完成拖动。
    *   当用户将非文件 URL 拖到应用程序时，如果所有 URL 的方案都在应用程序的 URL 方案中，则突出显示它。通过使用 NSWorkspace 打开该应用程序的 URL 来完成拖动。
    *   当用户将内容拖动到应用程序时，如果该应用程序具有可以处理拖动粘贴板上任何内容类型的服务，则突出显示该内容。通过调用该服务来完成它。（我不知道有一个公共 API 可以对特定的应用程序执行此操作——您只需要使用服务名称并希望获得最好的结果。）
    *   当用户将文件拖到文件夹时，如果该文件夹可写或包含任何文件夹，则突出显示该文件夹。如果用户在此处停留了一定时间，请在 Finder 中打开文件夹（此功能称为弹簧加载文件夹）。如果用户将文件放在 Dock 中的文件夹上，则通过将文件移动或复制到文件夹中来完成拖动，或者通过在文件夹中为它们创建别名来完成拖动，具体取决于修饰键的状态。
    *   垃圾箱的文件也是如此，但您需要为每个文件确定正确的垃圾箱。如果文件位于主文件夹中，则正确的废纸篓是主文件夹的废纸篓。否则，它是文件所在卷的卷级垃圾箱。
    *   当用户将任何卷拖到废纸篓时，将其图标更改为“弹出”图标（`kEjectMediaIcon`与 一起使用`iconForFileType:`）。通过弹出卷来完成拖动。如果用户完成拖拽、取消拖拽或拖离垃圾箱，则将垃圾箱的图标变回来。
*   哦，您需要处理项目*之间*的拖动，包括在分隔线之前和之后，以添加项目。这将与我上面提到的拖动重新排序重叠。
*   对于自动隐藏，您需要在承载 Dock 的屏幕边缘（通常是第一个[屏幕](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSScreen_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40004099)，如果有的话）。当用户将鼠标悬停在此窗口上时，显示 Dock（它应该覆盖薄窗口）。当用户将鼠标移出 Dock 时，将其隐藏。
*   Dock 有一个上下文菜单，其中包含在其分隔符上的各种选项。
*   理想情况下，您应该期待在某个时候支持主题，因为 Dock 已经至少有两个主题（默认的“玻璃”主题和 2D HUD 风格的主题）。

如果我错过了什么，请告诉我。

# spark-view-engine - 使用 Spark 从子模板更新主模板

> ID：14296366
> 
> 赞同：1
> 
> 时间：2013-01-12T18:09:42.693
> 
> 标签：spark-view-engine

我的主模板中有以下导航部分。我想将活动类设置为子模板中正确的导航元素。

```
<ul class="nav nav-pills pull-right">
    <li class="active"><a href="/">Home</a></li>
    <li><a href="/browser">Browse</a></li>
    <li><a href="/commision">Create</a></li>
    <li><a href="/contact">Contact</a></li>
    <li><a href="/about">About</a></li>
</ul> 
```

是否可以在子模板的主模板中的正确导航选项上设置活动类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T21:38:29.540

我可能会尝试通过 ViewModel 属性来执行此操作，而不是在页面呈现时读取该属性，但是如果您正在寻找一种方法让主视图可以看到子级设置的变量，那么您始终可以声明并使用[全局](https://github.com/SparkViewEngine/spark/wiki/global-element)例如：

```
<global activeItem="Home" /> 
```

可以在 master 中声明，然后：

```
<set activeItem="Contact" /> 
```

在子视图中。

# iphone - 带有自定义单元格的 UITableView 滚动缓慢

> ID：14296367
> 
> 赞同：2
> 
> 时间：2013-01-12T18:09:48.337
> 
> 标签：iphone, ios, objective-c, tableview, custom-cell

我有三个不同的细胞。Cell01、Cell02 和 Cell03。Cell01 必须只出现一次，在 tableview 的顶部，其余的 02 和 03 必须插入 (02, 03, 02, 03 (...))。

问题是滚动 TableView 时存在一些“滞后”。我正在从文档文件夹中加载图像，并且我也在调整它的大小以不需要太多处理，但它仍在缓慢滚动。它正在重用单元格（我检查了`if(!cell)`）。

这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    int row = indexPath.row;

    if (row == 0) {
        Cell01 *cell = nil;
        cell = [tableView dequeueReusableCellWithIdentifier:@"Cell01ID"];
        if (!cell) {
            cell = (Cell01*)[[[NSBundle mainBundle] loadNibNamed:@"Cell01" owner:self options:nil] objectAtIndex:0];
            cell.someLabel.text = @"First";
            cell.someImage.image = [self imageInDocumentsDirectoryWithName:@"mainimage" andSize:CGSizeMake(200, 200)];
        }

    } else if (row % 2 == 0) {
        Cell02 *cell = nil;
        cell = [tableView dequeueReusableCellWithIdentifier:@"Cell02ID"];
        if (!cell) {
            cell = (Cell02 *)[[[NSBundle mainBundle] loadNibNamed:@"Cell02" owner:self options:nil] objectAtIndex:0];
            cell.randomLabel.text = @"Second";
            cell.someImage.image = [self imageInDocumentsDirectoryWithName:@"secondimage" andSize:CGSizeMake(200, 200)];
        }
    } else {
        Cell03 *cell = nil;
        cell = [tableView dequeueReusableCellWithIdentifier:@"Cell03ID"];
        if (!cell) {
            cell = (Cell03 *)[[[NSBundle mainBundle] loadNibNamed:@"Cell03" owner:self options:nil] objectAtIndex:0];
            cell.anotherLabel.text = @"Third";
            cell.someImage.image = [self imageInDocumentsDirectoryWithName:@"thirdimage" andSize:CGSizeMake(200, 200)];

        }
    }
}

- (UIImage *)imageInDocumentsDirectoryWithName:(NSString *)fileName andSize:(CGSize)size
{    
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString* path = [documentsDirectory stringByAppendingPathComponent:fileName];
    UIImage *image = [UIImage imageWithContentsOfFile:path];
    image = [image resizedImageToFitInSize:size scaleIfSmaller:YES];

    return image;
} 
```

知道如何改进这个 tableview（并让它滚动得更快）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:16:26.157

我认为滚动缓慢是由于从文档目录加载单元格上的图像。从 Doc dir 获取图像需要一些时间，当您滚动您的表格视图时，会创建一个新单元格并从 doc dir 加载图像，这需要一些时间。尝试在单元格上使用延迟加载图像。还将图像加载到不在主线程中的新线程中..

有一个 Apple 的示例项目可以帮助您。[延迟加载表格视图](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

我希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:43:06.857

考虑异步加载图像。您可以将所有的引用保存`UIImageView`在可变数组中，开始在异步块中加载图像，例如使用 GCD，然后在加载图像视图时更新它们。

这是一个粗略的示例，说明它的外观（假设您有一个 ivar `NSMutableArray *_imageViews`，使用正确大小的元素进行初始化，并用 nil 填充）。我在这里从头开始编码，但我希望你能明白。顺便说一句，您可以通过插入它来用 nils 填充可变数组`[NSNull null]`。

我保证，如果你正确地实现这一点，你会看到滚动速度的显着提高:)

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    int row = indexPath.row;
    if (row == 0) {
        Cell01 *cell = nil;
        cell = [tableView dequeueReusableCellWithIdentifier:@"Cell01ID"];
        if (!cell) {
            cell = (Cell01*)[[[NSBundle mainBundle] loadNibNamed:@"Cell01" owner:self options:nil] objectAtIndex:0];
            cell.someLabel.text = @"First";
            [_imageViews replaceObjectAtIndex:row withObject:cell.someImage];
            dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
            dispatch_async(queue, ^{
                UIImage *image = [self imageInDocumentsDirectoryWithName:@"thirdimage" andSize:CGSizeMake(200, 200)];

                // because UI needs to be updated on the main thread,
                // dispatch yet another block.
                dispatch_async(dispatch_get_main_queue(), ^{
                   UIIMageView *imageView = [_imageViews objectAtIndex:row];
                   ImageView.image = image;
                 });
            });
      }
     // et cetera
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T19:00:16.853

我刚刚完成了类似的实现，如果您确保文档目录中的所有图像都已经是正确的大小（200 x 200），那么这将可以正常工作而无需异步加载。

如果您需要更大的图像，则在保存原始文件时生成正确大小的缩略图，因为它**实际上**需要太多的处理来“实时”调整图像大小。

但是，在这种情况下，您只有三个图像。 **如果您只是在调整大小后缓存图像并继续重复使用它（而不是制作新的），那么它会**比这更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T20:58:41.023

您当前的实现存在两个潜在的性能问题。第一个是使用`NSBundle`而不是`UINib`加载 nib 文件。`NSBundle`每次从文件系统重新加载 nib 文件，而`UINib`读取 nib 文件一次并将其内容缓存在内存中。由于不需要每次都从文件系统中重新读取 nib，因此使用`UINib`.

因此，与其这样做...

```
cell = [[[NSBundle mainBundle] loadNibNamed:@"Cell02" owner:self options:nil] objectAtIndex:0]; 
```

...做这个：

```
cell = [UINib loadNibNamed:@"Cell02" owner:self] objectAtIndex:0]; 
```

第二个问题类似；当前的实现是每次从文件系统重新加载相同的图像，而不是将它们缓存在内存中并重用它们。`NSArray`为了解决这个问题，您可以添加一个或类型的实例变量`NSDictionary`（取决于您更喜欢如何检索图像），然后在加载图像之前检查它是否已经在集合中。如果没有，请在使用之前加载图像并将其存储在集合中。否则，使用缓存的图像而不是再次加载它。

因此，与其这样做...

```
cell.someImage.image = [self imageInDocumentsDirectoryWithName:@"thirdimage" andSize:CGSizeMake(200, 200)]; 
```

...做这样的事情：

```
// Note: Consider defining constants for the keys/filenames.

UIImage *image = [self.cachedImages objectForKey:@"thirdimage"];
if (image == nil) {
    image = [self imageInDocumentsDirectoryWithName:@"thirdimage" andSize:CGSizeMake(200, 200)];
    [self.cachedImages setObject:image forKey:@"thirdimage"];
}

cell.someImage.image = image; 
```

如果您需要以这种方式缓存大量图像，请考虑使用`NSCache`代替`NSDictionary`来帮助防止缓存变得太大。

# qt - 如何在放置期间接收 QGraphicsItems 上的悬停事件？

> ID：14296369
> 
> 赞同：0
> 
> 时间：2013-01-12T18:09:52.537
> 
> 标签：qt, qt4

我使用两个不同的 QGraphicView，并在它们之间进行拖放。到目前为止，拖放确实工作得很好。在我的 QGraphicView 之一中，我有接收悬停事件的项目，以便在鼠标移动时点亮它们。问题是在放置期间以及在物品上移动期间，不会调用悬停事件。是否有可能以某种方式克服这种行为？悬停事件标记了在我的视图中可能发生放置的位置，然后必须将项目相应地放置在正确的位置（它们只能插入特定位置，用户应该得到一些反馈）。

我希望我能描述我的问题......我现在没有发布任何代码，因为我不知道这是否可能。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:06:17.427

我对图形视图框架还不太熟悉，但您可能需要继承 QGraphicsView（如果还没有的话）并覆盖 QWidget::DragEnterEvent。根据您对对象进行编码的方式，它们可能还具有您可以使用的 DragEnterEvent。

无论哪种情况，您都会接受 QDragEnterEvent 并让它触发悬停事件。希望这会为您指明正确的方向。

# vb.net - 从总跟踪时间中减去当前跟踪时间

> ID：14296373
> 
> 赞同：0
> 
> 时间：2013-01-12T18:10:27.323
> 
> 标签：vb.net, math, datetime

嘿，我有一首歌正在播放，显示时间如下：

0:00 / 4:47

第一次是曲目当前时间。第二个是该歌曲播放的总曲目时间。

我像这样拆分它：

```
Dim tmpTimes As Array = lblSongTime.Text.Split("/") 
```

所以**tmpTimes(0)**给我 0:00 和**tmpTimes(1)**给我 4:47。

现在我试图从**tmpTimes(0)中减去****tmpTimes(1 )**

 **```
Debug.Print(CDbl(tmpTimes(1).replace(":", "") - tmpTimes(0).replace(":", ""))) 
```

我得到：**447.. 446... 445... 等等**

为了返回递减计数，我需要什么样的计算？

示例：**4:47...4:46.....4:45...etc**使用当前时间**tmpTimes(0)**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:14:30.990

You need to split the text MM:SS into Minutes and Seconds, then convert that to total seconds (m * 60 + s). Then you can do the math on seconds. Then you will need to convert it back into Minutes and Seconds for display.

You may also be able to use the [Timespan](http://msdn.microsoft.com/en-us/library/system.timespan.aspx) class to do this.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T01:50:03.560

解决了：

```
Dim times As String() = lblSongTime.Text.Split("/"c)
Dim elapsedTime As TimeSpan = TimeSpan.ParseExact(times(0).Trim(), "m\:ss", Nothing)
Dim totalTime As TimeSpan = TimeSpan.ParseExact(times(1).Trim(), "m\:ss", Nothing)
Dim remainingTime As TimeSpan = totalTime - elapsedTime

Debug.WriteLine(remainingTime.ToString("m\:ss")) 
```**

# c++ - 恒定大小的向量类？

> ID：14296379
> 
> 赞同：2
> 
> 时间：2013-01-12T18:10:57.703
> 
> 标签：c++, c++03

是否有用于保存具有恒定大小的向量的 C++ 标准类型？例如，所有元素类型都相同的元组之类的东西，所以我只需提供大小作为模板参数？

我希望具有与使用时相同/相似的行为`std::vector`，但该类型应该与原始数组一样紧凑和高效（因此没有动态分配，没有运行时大小信息等）

我更喜欢**C++03 兼容的解决方案**，所以重用 a`std::tuple`不是我想要的。

下面的课程做我想要的吗？

```
template<typename T, int N>
struct vec
{
    T component[N];

    // (+ some logic and accessors like operator[]...)
};

// concrete example:
vec<int,3> myVector; 
```

它真的与仅仅说`T myVector[N]`（具体例子`int myVector[3]`）不同吗？因为这就是我目前正在做的事情，但我遇到了几个问题，因为原始数组是“只是指针”（+大小信息），不能用作返回值，也不能真正按值传递（没有发生深拷贝）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-12T18:13:45.110

C++11 has `std::array`; which is basically the same as you wrote.

For C++03, use `boost::array` which is basically compatible to `std::array`.

# python - 当它们的类型由 ini 文件设置时创建一组对象（Python）

> ID：14296380
> 
> 赞同：1
> 
> 时间：2013-01-12T18:10:58.010
> 
> 标签：python, class, dynamic

我正在做一个智能家居项目。我有很多东西，比如一些 XBee readios、LED、GPS 同步时钟、水计数器等。我尝试使用 OOP 方法，所以我创建了许多类和子类。现在您在代码中所要做的就是定义硬件，通过类内置函数将其连接到父级并享受。要获得一个想法：

```
coordinator = XBee24ZBCoordinator('/dev/ttyS1', 115200,
    "\x00\x13\xA2\x00\x40\x53\x56\x23", 'coord')
spalnya = XBee24ZBRemote('\x00\x13\xA2\x00\x40\x54\x1D\x12', 'spalnya')
spalnya.connectToCoordinator(coordinator)
vannaya = XBee24ZBRemote('\x00\x13\xA2\x00\x40\x54\x1D\x17', 'vannaya')    
vannaya.connectToCoordinator(coordinator)
led = LED()
led.connectTo(spalnya.getPin('DO4'), 'DO')
led.on()
led.off() 
```

但是，我不想在代码中这样做。我想要一个ini文件来定义这个“网络”的拓扑。因此，我希望这个文件可以被人类阅读和编辑。逻辑选择是 ini （在手动编辑配置文件时，与 ej json 相比，json 至少对我来说不是超级友好）。现在，我得到了：

```
[xbee-coordinator]
type = XBee24ZBCoordinator
name = coord
comport = COM4
comspeed = 115200 
```

我可以创建一个函数 BuildNetwork('my.ini')，它将读取并创建所需的对象实例和它们之间的连接。我该怎么做？有一个类 XBee24ZBCoordinator，但我从 ini 得到的只是一个字符串......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:15:41.523

You have two options:

*   Define all these classes in a module. Modules are just objects, so you can use `getattr()` on them:

    ```
    import types

    instance = getattr(types, typename)(arguments) 
    ```

*   Store them all in a dictionary and look them up by name; you don't have to type out the name in a string, the class has a `__name__` attribute you can re-use:

    ```
    types = {}

    class XBee24ZBCoordinator():
        # class definition

    types[XBee24ZBCoordinator.__name__] = XBee24ZBCoordinator 
    ```

If these are defined in the 'current' module, the `globals()` function returns a dictionary too, so `globals()['XBee24ZBCoordinator']` is a reference to the class definition as well.

# angularjs - 如何根据用户的操作编辑数组的特定元素

> ID：14296383
> 
> 赞同：0
> 
> 时间：2013-01-12T18:11:21.053
> 
> 标签：angularjs

我有一个我正在数据绑定的对象数组 -

```
$scope.records = [
    {field: "Full Name", value: "Joe Hanigan", isVisible: true},
    {field: "Age", value: "52 Years", isVisible: true},
    {field: "Diagnosis", value: "Common Cold", isVisible: true},
    {field: "Hospital Elum", value: "Alpha Lopus Epsum", isVisible: false},
    {field: "Hospital Code", value: "CKD34-23", isVisible: false}
  ]; 
```

我只是将“字段”和“isVisible”显示为复选框。当用户选中/取消选中浏览器中的框时，我想切换“isVisisble”的值。

我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T18:15:37.747

I assume you use your array in a `ng-repeat`, where you will define an input field of type checkbox. You use `ng-model` to bind the field to the model:

```
<div ng-repeat="record in records">
   <input type="checkbox" name="isVisible" ng-model="record.isVisible">
</div> 
```

# ios - 带有 TextField 的 UITableViewCell 在 reloadData 时没有更新

> ID：14296384
> 
> 赞同：0
> 
> 时间：2013-01-12T18:11:28.620
> 
> 标签：ios, objective-c, uitableview

我有一个包含单元格的表格，每个单元格中都有一个 UITextField。我将这些文本字段的委托设置为 self 并在编辑结束时进行一些计算。

我的问题是文本字段，每当我输入第一个字段以外的字段时，除第一个字段外的所有文本字段都会更新。当我输入第一个时，其他的会完美更新。

这让我检查了哪些数据得到了更新，虽然我设置`cell.textLabel.text`为等于数组中的特定位置，但它没有显示该位置的值。

这是我的`cellForRowAtIndex`方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    UITextField *tf;

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryNone;
        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        tf = [[UITextField alloc] initWithFrame:CGRectMake(self.view.frame.size.width/2 + 25,
                                                           5,
                                                           cell.contentView.frame.size.width/2 - 25 - 25,
                                                           cell.contentView.frame.size.height - 10)];
        tf.font = [UIFont fontWithName:@"Helvetica" size:16];
        tf.textAlignment = NSTextAlignmentLeft;
        tf.backgroundColor = [UIColor clearColor];
        tf.textColor = [UIColor blueColor];
        tf.tag = indexPath.row;
        tf.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
        tf.returnKeyType = UIReturnKeyDone;
        tf.delegate = self;
        tf.keyboardType = UIKeyboardTypeNumbersAndPunctuation;
        cell.textLabel.text = [_titles objectAtIndex:indexPath.row];
        tf.placeholder = cell.textLabel.text;

        [cell.contentView addSubview:tf];
    }
    else
    {
        tf = (UITextField *)[cell viewWithTag:indexPath.row];
    }

    tf.text = [NSString stringWithFormat:@"%.2f", [[_data objectAtIndex:indexPath.row] floatValue]];
    NSLog(@"Value at index %i is %.2f", indexPath.row, [[_data objectAtIndex:indexPath.row] floatValue]);

    cell.textLabel.text = [_titles objectAtIndex:indexPath.row];

    return cell;
} 
```

当我尝试这个时，经过计算，这是记录的内容：

> 索引 0 处的值是 1.20
> 索引 1 处的值是 1.00
> 索引 2 处的值是 4.55

然而，第一个文本字段仍然显示 0 而不是 1.20

添加这些文本字段我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:17:33.333

每次您创建文本字段并将其放在同一个位置时......因此，您的新文本字段是在先前创建的文本字段的后面创建的。

您需要检查此声明

`UITextField *tf;`

和

```
tf = [[UITextField alloc] initWithFrame:CGRectMake(self.view.frame.size.width/2 + 25, 5,
                                                       cell.contentView.frame.size.width/2 - 25 - 25,
                                                       cell.contentView.frame.size.height - 10)]; 
```

仅当前一个不存在时才分配 + init。类似于您为`cell`.

编辑

检查标签。如果我没记错的话，默认标签是 0，因此在使用`viewWithTag`它时可能会选择 textLabel 而不是文本字段。将文本字段的标签设置为`indexPath.row + 5`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:19:38.127

这行代码看起来有问题：

```
tf = (UITextField *)[cell viewWithTag:indexPath.row]; 
```

因为如果您重用 TableViewCell，则该行将不匹配。
例如，单元格被创建为第 0 行，并在第 10 行得到重用。所以`tf`将是 nil 并且不会更新。

每个单元格都是它自己的小生态系统，因此您不需要在每个单元格中为您的文本字段添加不同的标签。它可能只是 `tf.tag = SOME_CONSTANT;`

另外我假设您要求表格视图重新加载它的数据。

# css - 什么 CSS 框架仅用于控件（按钮、输入等），而不用于页面布局？

> ID：14296387
> 
> 赞同：0
> 
> 时间：2013-01-12T18:11:53.200
> 
> 标签：css, frameworks, web-controls

我需要设计一些网站的样式，但我不需要响应式设计、列和其他布局功能。我只想拥有非默认按钮、输入、复选框和其他控件，并在 IE、FF 和 WebKit 中具有相同的外观。

我应该使用什么？这个任务有什么框架吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:42:45.720

您可以使用 jQuery UI。只需将此添加到您的网站

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script> 
```

# 如何使用

* * *

**HTML**

```
<input type="submit" value="Submit" /> 
```

**jQuery**

```
$(document).ready(function(){
    $("input").button()
}) 
```

检查这个[**演示**](http://jsfiddle.net/xJRc3/)

[**在这里**](http://jqueryui.com/button/)阅读更多[](http://jqueryui.com/button/)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T20:03:55.633

twitter 的 bootstrap 看起来更好，更有前途：http: [//twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)**

# c# - 如何在 Windows 窗体的 DataGridView 中将高度设置为自动

> ID：14296389
> 
> 赞同：0
> 
> 时间：2013-01-12T18:12:01.423
> 
> 标签：c#, datagridview, windows-forms-designer

我现在正在处理这种情况。如您所知，`WPF`您可以将控件设置为 Auto its size *(Width or Height)*，因此当您这样做时，控件不会出现其垂直滚动条。

我希望在 Windows 窗体中的一个中具有相同的行为`DataGridView`，该控件有很多行，我想知道该控件在没有垂直滚动条的情况下表达其实际大小。我该怎么做这个功能？

![在此处输入图像描述](../Images/b833414cbf8f93837a65c6905c20525d.png)

目前，它`DataGridView`具有固定大小（600px）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:38:08.900

假设您的初始高度设置为滚动条不可见，添加这些事件处理程序将允许您在添加或删除行时缩放您的高度：

```
private void dataGridView_RowsAdded(object sender, DataGridViewRowsAddedEventArgs e)
{
    int height = 0;
    for (int i = e.RowIndex; i < (e.RowIndex + e.RowCount); i++)
        height += dataGridView.Rows[i].Height;

    dataGridView.Height += height;
}    

private void dataGridView_RowsRemoved(object sender, DataGridViewRowsAddedEventArgs e)
{
    int height = 0;
    for (int i = e.RowIndex; i < (e.RowIndex + e.RowCount); i++)
        height += dataGridView.Rows[i].Height;

    dataGridView.Height -= height;
} 
```

作为旁注，我建议*不要*在您的程序中使用此功能。自动调整大小的列表框通常是一个糟糕的 UI 设计选择。你想用这个控件来完成什么？可能有一种更有效的方法来执行您在此处尝试执行的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:17:54.237

尝试设置它的`Dock`属性。假设它的调用如下：

```
dataGridView1.Dock = DockStyle.Left; 
```

显然，网格仍将显示滚动条，但其高度将适应其容器的高度。

# xcode - .xib 文件位置

> ID：14296391
> 
> 赞同：0
> 
> 时间：2013-01-12T18:12:06.060
> 
> 标签：xcode, xcode4.5

我实际上是在关注一本 iOS 编程书（iOS5）。它说导航器中有一个 xib 文件，但我找不到它。我正在使用 xcode 4.5。我真的很困惑，因为这是我第一次尝试 iPhone 开发或 xCode 中的任何东西，如果这很重要的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:17:18.310

这取决于您正在创建的项目类型。例如，从“单一视图应用程序”模板创建的项目将创建一个 xib 文件。

# machine-learning - 二进制特征和局部敏感散列 (LSH)

> ID：14296394
> 
> 赞同：8
> 
> 时间：2013-01-12T18:12:20.427
> 
> 标签：machine-learning, computer-vision, nearest-neighbor

我正在研究 FLANN，一个用于近似最近邻搜索的库。

对于 LSH 方法，它们将一个对象（搜索空间中的点）表示为一个无符号整数数组。我不确定他们为什么这样做，而不是简单地将一个点表示为一个双数组（这将表示多维向量空间中的一个点）。也许是因为 LSH 用于二进制特征？有人可以分享更多关于在这种情况下可能使用 unsigned int 的信息吗？如果每个功能只需要 0 和 1，为什么要使用 unsigned int？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-13T20:24:13.247

*请注意，我将参考最新的 FLANN 版本，即`flann-1.8.3`在撰写本文时。*

> 对于 LSH 方法，它们表示一个对象（搜索空间中的点），作为一个无符号整数数组

不：这是错误的。该类`LshIndex`包括一个`buildIndexImpl`实现 LSH 索引的方法。由于 LSH 基本上是哈希表的集合，因此有效的索引发生在`LshTable`类上。

基本索引方法，即一次索引一个特征向量（又名描述符或点）的方法是：

```
/** Add a feature to the table
 * @param value the value to store for that feature
 * @param feature the feature itself
 */
void add(unsigned int value, const ElementType* feature) {...} 
```

*注意：该`buildIndexImpl`方法使用了简单地迭代特征的替代版本，并在每个特征上调用上述方法。*

如您所见，此方法有 2 个参数，它们是一对`(ID, descriptor)`：

1.  `value`它`unsigned int`表示特征向量唯一的数字标识符（又名特征索引）
2.  `feature`表示特征向量本身

如果您查看实现，您可以看到第一步包括对描述符值进行哈希处理以获取相关的桶键（= 指向将存储此描述符 ID 的桶的槽的标识符）：

```
BucketKey key = getKey(feature); 
```

在实践中，`getKey`散列函数**仅**用于二进制描述符，即可以表示为数组的描述符`unsigned char`：

```
// Specialization for unsigned char
template<>
inline size_t LshTable<unsigned char>::getKey(const unsigned char* feature) const {...} 
```

> 也许是因为 LSH 用于二进制特征？

是的：如上所述，FLANN LSH 实现在二进制描述符的[汉明空间中工作。](http://en.wikipedia.org/wiki/Hamming_space)

如果您要使用具有实值 (in `R**d`) 的描述符，您应该参考[原始论文](https://www.vldb.org/conf/1999/P49.pdf)，其中包含有关如何将特征向量转换为二进制字符串以使用汉明空间和哈希函数的详细信息。

> 有人可以分享更多关于在这种情况下可能使用 unsigned int 的信息吗？如果每个功能只需要 0 和 1，为什么要使用 unsigned int？

见上：该`unsigned int`值仅用于存储每个特征向量的相关ID。

# php - 有没有办法将 Pygame 添加到本地 PHP 文件中？

> ID：14296401
> 
> 赞同：0
> 
> 时间：2013-01-12T18:12:44.090
> 
> 标签：php, python, pygame

有没有一种方法可以将带有图像的 python pygame 添加到 PHP 并在本地浏览器中显示？做这样的事情有什么必要的要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:15:29.603

If I got you right, then answer is: no, it's impossible. I think — Flash is most acceptable choice for you, or Unity3D with browser plugin.

# python - 创建具有积极元素的新列表

> ID：14296403
> 
> 赞同：2
> 
> 时间：2013-01-12T18:12:46.637
> 
> 标签：python, list, loops, python-3.x

我正在尝试在循环中创建一个新列表（不更改名称），它将削减所有负数或零元素，最终改变其长度。谁是最快的方法？我失去了最后几天试图做...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T18:30:35.297

尝试使用过滤器：

`newlist = filter(lambda a: a>0, [1,2,3])`

或者

`[i for i in original_list if i > 0]` *（如上面评论中所述）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:35:10.457

我知道这是 python 中的一种宗教，无论是否使用 lambda，但对于这个简单的示例，我不会使用过滤器。

我个人更喜欢带有列表和集合的解决方案：

```
a = [1,2,-1,0,-1,...] # some list
for i in set(a):
    if (i <= 0): 
         while (a.count(i)>0): a.remove(i) 
```

# http - get know if request is subrequest of opening site or independent request to site

> ID：14296406
> 
> 赞同：0
> 
> 时间：2013-01-12T18:13:10.573
> 
> 标签：http

Is there any way to recognize (by process `http` packet or filtering `tcp` connections) does several requests belong to one opening url or another?

Try to explain in more detail. When we open any page in browser it also initializes different requests to download images, resources, scripts. I d like to get know that some scope of requests was invoked by opening site (call it main site). I can get `referer` property but in that case how to distinguish request to resorce from request to different site link on which was clicked on main site. In both cases `referer` will be the same. I suspect that this problem could not be resolved, but I hope that I'm mistaken. Or you can offer some workaround.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:54:41.993

如果您控制该站点，请设置 cookie 或 URL 参数并检查它是否存在于后续请求中。

# facebook - How to set Facebook's hideFlashCallback from graphapi_web_1_8_1.swc

> ID：14296407
> 
> 赞同：1
> 
> 时间：2013-01-12T18:13:32.803
> 
> 标签：facebook, actionscript-3, flash, facebook-graph-api, actionscript

graphapi_web_1_8_1.swc has a `Facebook.init()` function that takes pretty much the same arguments as the `FB.init()` JavaScript version. However, what I'm interested in setting is Facebook's hideFlashCallback parameter, via the `"options"` argument passed into both `Facebook.init()` and `FB.init()`. The JavaScript SDK takes a value of type `"Object"` as shown here:

> [http://developers.facebook.com/docs/reference/javascript/FB.init/](http://developers.facebook.com/docs/reference/javascript/FB.init/)

However, if I'm already calling graphapi_web_1_8_1.swc's `Facebook.init()` from ActionScript, how can I pass in a JavaScript function as the hideFlashCallback?

I tried using `ExternalInterface.call()` to call a `"GetHideFlashCallback()"` JS function whose return value was the callback function as an object, but it comes back as null in ActionScript, even when the ActionScript variable was typed as `"Object"` or `"*"`.

My next test is to avoid calling graphapi_web_1_8_1.swc's `Facebook.init()` and just do something like `ExternalInterface.call("FB_init_proxy(args)")` which would just use Facebook's JavaScript SDK directly.

But is there a way to pass JavaScript functions back and forth with ActionScript as Object variables? If not, why? Is it a security concern?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-09T15:59:12.470

您可以在此处查看问题的原因：[https ://developers.facebook.com/blog/post/637/](https://developers.facebook.com/blog/post/637/)

所以在 facebook 的 javascript init 中你必须添加 hideFlashCallback：

```
FB.init({
    appId:appId,
    status:true,
    cookie:true,
    oauth:true,
    frictionlessRequests: true,
    hideFlashCallback : displayFlash
}); 
```

在 displayFlash 功能中你可以做你想做的事

```
function displayFlash( a )
{
    if( a.state == 'opened' )
    {
        // do what you want when a chat or notification is open
    }
    else
    {
        // do what you want when a chat or notification is closed
    }
} 
```

# ruby-on-rails - Rails 3.2.11 突然需要重新启动以“确认”控制器中的任何更改？

> ID：14296412
> 
> 赞同：7
> 
> 时间：2013-01-12T18:14:00.077
> 
> 标签：ruby-on-rails, ruby

标题说明了一切。

请注意，这与模型或初始化程序的更改**无关。**我可以删除控制器中的一个实例变量（比如@user），然后重新加载一个视图，它就会工作——直到我重新启动服务器，在这种情况下它会抱怨变量为零。

我工作正常，然后切换到一组完全不同的控制器和视图上工作，现在它无缘无故地发生了。

该应用程序位于开发环境中。

development.rb 内容：

```
Dashboard::Application.configure do
  config.cache_classes = false
  config.whiny_nils = true
  config.consider_all_requests_local       = true
  config.action_controller.perform_caching = false
  config.action_mailer.raise_delivery_errors = false
  config.active_support.deprecation = :log
  config.action_dispatch.best_standards_support = :builtin
  config.assets.compress = false
  config.assets.debug = true
end 
```

我怎样才能知道它是如何发生的以及如何解决它？

**编辑：** **这可能是相关的，但我似乎无法使用在部分运行“rake routes”时存在的任何路径，例如dashboards_path**

**情节扭曲：** 添加

```
config.reload_classes_only_on_change = false 
```

到 development.rb 似乎已经改善了这个问题。我仍然想知道为什么会发生这种情况，为什么会突然发生，以及为什么会发生在一个控制器上而不是另一个控制器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:13:34.603

Rails 使用自动加载路径配置来确定要自动加载和重新加载的文件：

```
module YourApp
  class Application < Rails::Application
    config.autoload_paths += %W( #{config.root}/lib #{config.root}/lib/**/ #{config.root}/app/traits )

    ...

  end
end 
```

如您所见，我添加了一个自定义目录，即 app/traits 目录，其中存储了一些定义共享行为的模块。

如果您开始使用的控制器位于不受 rails 监视的子目录中，或者具有阻止 rails 附加文件系统更改事件的权限，您会遇到此问题。

“解决”问题的原因`config.reload_classes_only_on_change = false`是整个应用程序在每次请求时都会重新加载，而不是依赖于检测文件的更改。

控制器很可能不在监视文件列表中，这就是为什么 rails 不会在更改时重新加载它。它不在列表中的确切原因可能会有所不同，我需要有关应用程序的文件夹结构和配置的更多详细信息，然后才能在那里给出一个好的答案......

# asp.net-mvc - Error when Uploading image in ASP.NET MVC 3.0

> ID：14296413
> 
> 赞同：0
> 
> 时间：2013-01-12T18:14:01.320
> 
> 标签：asp.net-mvc, asp.net-mvc-3

On the local machine the code below works fine, but when hosted on remote server it doesn't seem to find the image file. I created the Image folder and gave it read/ write permissions as well

// --------------------------------------------
Error

```
Server Error in '/' Application.  
Could not find file 'IdImage.jpg'. 
```

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

`Exception Details: System.IO.FileNotFoundException: Could not find file 'IdImage.jpg'.`

Code is as below
// ---------------------------------------------

```
[HttpPost]  
public ActionResult Index(HttpPostedFileBase file)  
{  
    if (file != null && file.ContentLength > 0)   
    {  
       var fileName = Path.GetFileName(file.FileName);  
       var path = Path.Combine(Server.MapPath("~/Images/Photo"), fileName);  
       file.SaveAs(path);  
    }  

    return RedirectToAction("Index");          
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T09:36:12.610

这看起来很像权限问题。您说您已经创建了该`Images`文件夹并授予了它读/写权限，但是从我在您的代码中看到的内容来看，您正试图将图像存储在一个名为`Photo`. 因此，请确保您也已创建此文件夹并为其授予读/写权限。还要确保将这些权限授予正确的帐户 - 在 IIS 中配置为运行托管应用程序的应用程序池的帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T15:51:38.387

我使用此代码

```
[HttpPost]
public ActionResult Upload(System.Web.HttpPostedFileBase file)
{
       string filename = Server.MapPath("~/files/somename");
       file.SaveAs(filename);
       return RedirectToAction("Index");
} 
```

在视野中

```
@{
    ViewBag.Title = "Upload";
}
<h2>
    Upload</h2>
@using (Html.BeginForm(actionName: "Upload", controllerName: "User", 
                       method: FormMethod.Post,
                       htmlAttributes: new { enctype = "multipart/form-data" }))
{
    <text>Upload a photo:</text> <input type="file" name="photo" />
    <input type="submit" value="Upload" />
} 
```

# graph-algorithm - What's the complexity of going from one graph representation to another?

> ID：14296415
> 
> 赞同：0
> 
> 时间：2013-01-12T18:14:13.607
> 
> 标签：graph-algorithm

There are different ways one can represent a simple undirected graph on a computer:

*   **[Adjacency lists](http://en.wikipedia.org/wiki/Adjacency_list)**: Vertices are stored as records or objects, and every vertex stores a list of adjacent vertices. This data structure allows the storage of additional data on the vertices.
*   **[Incidence list](http://en.wikipedia.org/wiki/Incidence_list)**: Vertices and edges are stored as records or objects. Each vertex stores its incident edges, and each edge stores its incident vertices. This data structure allows the storage of additional data on vertices and edges.
*   **[Adjacency matrix](http://en.wikipedia.org/wiki/Adjacency_matrix)**: A two-dimensional matrix, in which the rows represent source vertices and columns represent destination vertices. Data on edges and vertices must be stored externally. Only the cost for one edge can be stored between each pair of vertices.
*   **[Incidence matrix](http://en.wikipedia.org/wiki/Incidence_matrix)**: A two-dimensional Boolean matrix, in which the rows represent the vertices and columns represent the edges. The entries indicate whether the vertex at a row is incident to the edge at a column.

Two questions:

1.  What are the efficient algorithms to go from one representation to another?
2.  What are the complexities in going from one representation to another?

# mysql - 如何在 MySQL 中使用触发器维护一定数量的行？

> ID：14296423
> 
> 赞同：0
> 
> 时间：2013-01-12T18:14:59.797
> 
> 标签：mysql

例如，我有一个用于记录的表。所以非常旧的数据是无用的，没有理由将其留在表中。例如，如果现有行数超过 10，我想创建一个触发器，它将删除旧行。我已经拥有的：

```
CREATE TABLE log (
    logId INT UNSIGNED NOT NULL AUTO_INCREMENT,
    firstLogin DATETIME NOT NULL,
    lastLogin DATETIME NOT NULL,
    fingerprint VARCHAR(64) CHARACTER SET BINARY,
    ip VARCHAR(24) NOT NULL,
    accountId INT UNSIGNED NOT NULL,
    FOREIGN KEY (accountId)
        REFERENCES accounts (accountId)
        ON UPDATE CASCADE ON DELETE CASCADE,
    PRIMARY KEY (logId)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

DELIMITER |

CREATE TRIGGER logbeforeinsert BEFORE INSERT ON log
    FOR EACH ROW 
        BEGIN
            SET @rowcount = (SELECT COUNT(*) FROM log WHERE accountId = NEW.accountId);
            IF @rowcount > 9 THEN
                DELETE FROM log WHERE accountId = NEW.accountId LIMIT 1;
            END IF;
        END;
|

DELIMITER ; 
```

但是在行数达到 10 之后，使用此触发器插入完全停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:19:56.107

您的触发器尝试写入`DELETE`它正在插入的同一个表（是写访问权限） - 这是不支持的。

由于您有`BEFORE INSERT`触发器，触发器的失败意味着`INSERT`.

您需要从不写入的操作中触发删除`log`，或者重新考虑您的模型。

# iis-7 - Joomla/IIS7 url 重写不显示 Joomla 模板

> ID：14296437
> 
> 赞同：0
> 
> 时间：2013-01-12T18:15:45.737
> 
> 标签：iis-7, joomla, url-rewriting

我有一个问题，在 IIS7 中重写的 URL 加载组件内容很好，但不是站点模板。

这在哪里：

[http://125valleywood.nexthometown.com/](http://125valleywood.nexthometown.com/)

应该是这样的：

[http://www.nexthometown.com/index.php?option=com_singleprop&view=singleprop&mlsnum=4200072](http://www.nexthometown.com/index.php?option=com_singleprop&view=singleprop&mlsnum=4200072)

如果我使用“重定向”而不是“重写”，一切都很好。我认为这与 joomla 绑定的域有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:46:20.260

我对此的解决方案是不使用 URL 重写。相反，我使用 Windows Server 2008 上的 DNS 管理器模仿了盲 URL 重定向。我认为这与 Joomla 安装无法识别子域有关。我没有调查的是 Joomla 是否会为站点名称使用通配符，即`*.mysite.com`. 但由于我从一开始就没有确定这是否是问题所在，我不确定这是否是一个解决方案。

# python - 瓶子文件上传和处理

> ID：14296438
> 
> 赞同：10
> 
> 时间：2013-01-12T18:15:55.237
> 
> 标签：python, file-upload, bottle

我正在使用 Bottle 上传相当大的文件。这个想法是，当文件上传时，网络应用程序运行（并忘记）一个系统命令，其中上传的文件路径作为参数。除了使用正确的文件路径作为参数启动系统命令外，我不需要保存文件，但我需要确定文件在进程完成处理之前可用。

我使用此处描述的确切代码：http: [//bottlepy.org/docs/dev/tutorial.html#post-form-data-and-file-uploads](http://bottlepy.org/docs/dev/tutorial.html#post-form-data-and-file-uploads)

我的问题是：

*   瓶子是否将上传的文件存储在内存中或磁盘上的特定位置（或者可能像 Flask 一样，两者兼而有之）？
*   上传的文件是否可以在没有 .read() 的情况下直接供其他工具使用，然后手动将字节保存到磁盘上的指定文件中？
*   以文件作为参数启动系统命令的最佳方法是什么？是否可以直接将路径传递给现有文件？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-12T18:45:55.603

好的，让我们分解一下。

完整的代码是：

### HTML：

```
<form action="/upload" method="post" enctype="multipart/form-data">
  <input type="text" name="name" />
  <input type="file" name="data" />
</form> 
```

## 蟒蛇代码：

```
from bottle import route, request
@route('/upload', method='POST')
def do_upload():
    name = request.forms.name
    data = request.files.data
    if name and data and data.file:
        raw = data.file.read() # This is dangerous for big files
        filename = data.filename
        return "Hello %s! You uploaded %s (%d bytes)." % (name, filename, len(raw))
    return "You missed a field." 
```

（来自您提供的文档）

所以，首先我们可以看到，我们首先从 html 表单中的`name`和`data`中拉取信息，并将它们赋值给变量`name`和`data`。这很简单。但是，接下来我们将变量分配`raw`给`data.file.read()`。这基本上是将*所有*文件上传到变量`raw`中。话虽如此，整个文件都在内存中，这就是为什么他们将“这对大文件很危险”作为注释放在该行旁边。

话虽这么说，如果您想将文件保存到磁盘，您可以这样做（但*要小心*）使用类似的东西：

```
with open(filename,'w') as open_file:
    open_file.write(data.file.read()) 
```

至于你的其他问题：

1.“以文件作为参数启动系统命令的最佳方法是什么？是否可以直接将路径传递给现有文件？”

您应该看到该`subprocess`模块，特别是`Popen`： http: [//docs.python.org/2/library/subprocess.html#popen-constructor](http://docs.python.org/2/library/subprocess.html#popen-constructor)

2.“上传的文件是否可以在没有.read()的情况下直接提供给其他工具使用，然后手动将字节保存到磁盘上的指定文件中？”

是的，您可以在不将其保存到磁盘的情况下传递文件数据，但是，请注意内存消耗是值得关注的。但是，如果这些“工具”不在 python 中，您可能正在处理管道或子进程以将数据传递给这些“工具”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-09T06:32:03.493

```
 with open(filename,'w') as open_file:
    open_file.write(data.file.read()) 
```

不工作

您可以使用

```
data = request.files.data
data.save(Path,overwrite=True) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-08T12:10:22.750

该文件将由您使用的例程处理。这意味着您的读取处理了连接（根据 wsgi 规范，该文件不应该存在）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-15T03:26:19.537

```
with open(filename, "wb") as file:
  Data = data.file.read()
  if type(Data) == bytes: file.write(Data)
  elif type(Data) == str: file.write(Data.encode("utf-8")) 
```

容易：D

# php - clear or reset options of dropdown after refresh in JQuery/Ajax

> ID：14296439
> 
> 赞同：1
> 
> 时间：2013-01-12T18:15:57.720
> 
> 标签：php, javascript, jquery, ajax, json

How can I clear the options of select box after refresh ... I have two select boxes and both of their values after refresh didn't clear or reset i am working in code igniter here is my code.

```
 <?php echo form_dropdown('cat_id', $records2, '#', 'class="cho" id="category"');?>

 <script type="text/javascript">// 
 $(document).ready(function(){       
    $('#category').change(function(){        
        $("#items > option").remove(); //it is not working
        var category_id = $('#category').val();  
        $.ajax({
            type: "POST",
            url: "testController/get_items/"+category_id,

            success: function(items)
            {
                $.each(items,function(item_id,item_name) 
                {
                    var opt = $('<option />'); 
                    opt.val(item_id);
                    opt.text(item_name);
                    $('#items').append(opt); 
                });
            }

        });

    });
});
// ]]> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:26:25.497

代替

```
$("#items > option").remove(); //it is not working 
```

尝试这个

```
$("#items).html(""); 
```

[这](http://jsfiddle.net/pmatseykanets/HUzzV/)是给你的简单 jsFiddle

**更新：**

您也可以考虑先构建您的选项标记，然后立即替换它，而不是按顺序附加项目。

```
$("#category").change(function(){        
    var category_id = $("#category").val();  
    $.ajax({
        type: "POST",
        url: "testController/get_items/" + category_id,
        success: function(items)
        {
            var options = "";
            $.each(items, function(item_id, item_name) 
            {
                options += "<option value=\"" + item_id + "\">" + item_name + "</option>";
            });
            $("#items").html(options);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T18:28:06.417

尝试

```
 $("#items").empty(); 
```

`empty()`方法将清除所有 html

API 参考[http://api.jquery.com/empty](http://api.jquery.com/empty)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T18:34:43.560

document.ready 事件处理程序中没有任何内容。一切都包含在 $('#category').change(function(){ 意味着页面刷新时不会发生任何事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T18:24:49.990

```
$('#items')
    .find('option')
    .remove()
    .end(); 
```

IE6

```
$('#items')
    .empty(); 
```

# ruby - 浮点指令如何在 Ruby 打包（）/解包（）中工作？

> ID：14296440
> 
> 赞同：-5
> 
> 时间：2013-01-12T18:15:58.423
> 
> 标签：ruby, ruby-1.9.3

这里的任何人都可以帮助我了解以下浮点指令如何在 Ruby 中使用`packing() and unpacking()`方法工作吗？

*   `D and d`
*   `F and f`
*   `g and G`
*   `e and E`

***我在下面尝试过：***

```
irb(main):001:0> [2,44,43].pack('D')
=> "\x00\x00\x00\x00\x00\x00\x00@"
irb(main):002:0> [2,44,43].pack('d')
=> "\x00\x00\x00\x00\x00\x00\x00@"
irb(main):004:0> [2,44,43].pack('ddd')
=> "\x00\x00\x00\x00\x00\x00\x00@\x00\x00\x00\x00\x00\x00F@\x00\x00\x00\x00\x00\
x80E@"
irb(main):005:0> [2,44,43].pack('fff')
=> "\x00\x00\x00@\x00\x000B\x00\x00,B"
irb(main):006:0> [2,44,43].pack('FFF')
=> "\x00\x00\x00@\x00\x000B\x00\x00,B"
irb(main):007:0> [2,44,43].pack('ggg')
=> "@\x00\x00\x00B0\x00\x00B,\x00\x00"
irb(main):008:0> [2,44,43].pack('GGG')
=> "@\x00\x00\x00\x00\x00\x00\x00@F\x00\x00\x00\x00\x00\x00@E\x80\x00\x00\x00\x0
0\x00"
irb(main):009:0> 
```

输出是怎么来的？这种计算的逻辑是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:49:19.713

这些指令将数组中的数字转换为浮点字节表示。

如果您想了解正在发生的事情，可以观看此视频：

**浮点表示：示例**
[https://www.youtube.com/watch?v=t-8fMtUNX1A](https://www.youtube.com/watch?v=t-8fMtUNX1A)

并阅读这篇文章：
[http ://www.geeksforgeeks.org/floating-point-representation-basics/](http://www.geeksforgeeks.org/floating-point-representation-basics/)

[通过谷歌，我通过搜索“浮点表示”](https://www.google.com/search?q=floating+point+representation)为您找到了上述答案。

* * *

只是给你一个例子：

```
> [2.0].pack('f').bytes.map(&:to_i)
=> [0, 0, 0, 64] 
```

这是一个浮点数，以十六进制表示为：

```
0x40000000 
```

你可以在哪里看到它`64`是`0x40`十六进制的。

为了理解为什么`2.0`会变成`0x40000000`你必须了解计算机如何将浮点数转换为二进制表示。

您可以使用此页面对其进行测试：
[http ://www.h-schmidt.net/FloatConverter/IEEE754.html](http://www.h-schmidt.net/FloatConverter/IEEE754.html)

例如，这里是这样的`2.0`：

![http://i.imgur.com/qWqFM.png](../Images/69a472981879aaa2ced0bd983f89deaa.png)

# ios - iOS后台下载失败

> ID：14296443
> 
> 赞同：0
> 
> 时间：2013-01-12T18:16:26.207
> 
> 标签：ios

我正在创建一个 iOS 应用程序，我需要在其中下载 100 多个视频，每个视频大小约为 5-10 MB。有5天，每天有多个视频。我将视频和 URL 列表存储在数据库中。问题是我不能使用[AFNetworking](http://afnetworking.com)，所以我试图`NSData`通过创建后台进程来下载视频。

这一直工作正常，但几次后，它会暂停，我必须重新启动应用程序才能再次开始下载。我不明白到底出了什么问题。

以下是我的代码：

```
-(void)downloadVideos{

    Database * database = [[Database alloc]init];

    if ([[UIDevice currentDevice] respondsToSelector:@selector(isMultitaskingSupported)]) {
        //Check if our iOS version supports multitasking I.E iOS 4
        if ([[UIDevice currentDevice] isMultitaskingSupported]) {
            //Check if device supports mulitasking
            UIApplication *application = [UIApplication sharedApplication];
            //Get the shared application instance
            __block UIBackgroundTaskIdentifier background_task;
            //Create a task object
            background_task = [application beginBackgroundTaskWithExpirationHandler: ^ {
                [application endBackgroundTask: background_task];
                //Tell the system that we are done with the tasks
                background_task = UIBackgroundTaskInvalid;
                //Set the task to be invalid
                //System will be shutting down the app at any point in time now
            }];
            //Background tasks require you to use asyncrous tasks
            dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
                //Perform your tasks that your application requires
                NSLog(@"\n\nRunning in the background!\n\n");

                for (int j = 1; j <= 5; j++) {

                    NSArray * filesGYM = [database getVideoURLsFromDBToDownloadVideos:j vType:@"gym" advWeekNum:1];
                    NSArray * filesGYMIDs = [database getVideoIDsFromDBToDownloadVideos:j vType:@"gym" advWeekNum:1];

                    for (int i = 0; i < [filesGYM count]; i++) {
                        NSString * tempFile = [filesGYM objectAtIndex:i];
                        NSString *file = [tempFile stringByReplacingOccurrencesOfString:@" " withString:@"%20"];

                         NSData * theVideo = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:file]];

                         NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
                         NSString *documentsDirectory = [paths objectAtIndex:0];
                         if ([theVideo writeToFile:[documentsDirectory   stringByAppendingPathComponent: [NSString stringWithFormat:@"%@.mp4",[filesGYMIDs objectAtIndex:i] ]] atomically:YES]) {
                         NSLog(@"File No.- %@ Downloaded",[filesGYMIDs objectAtIndex:i]);
                         [database setVideoDownloaded:tempFile];

                         } else {
                         NSLog(@"File  No.- %d - %@ - Downloading Failed",i+1,[filesGYMIDs objectAtIndex:i]);

                         }
                    }
                }

                [application endBackgroundTask: background_task];
                //End the task so the system knows that you are done with what you need to perform
                background_task = UIBackgroundTaskInvalid;
                //Invalidate the background_task
            });
        }
    }
} 
```

# c# - 为 WinRT 和 Windows x86 批量编译 C# 代码

> ID：14296446
> 
> 赞同：1
> 
> 时间：2013-01-12T18:17:03.690
> 
> 标签：c#, visual-studio-2012, windows-runtime

我最近发布了一个针对 .Net4.5 构建的库。现在 Windows 8 已经发布，我也想为该平台构建。

不幸的是，我在原始库中使用的一些代码没有进入 RT 核心，但是我今天大部分时间都在使用代码副本进行调整和测试。

本质上，我现在有两个代码文件，一个原始文件和一个副本，其中更新了大约 5 行并使用不同的命名空间。我已经为 Debug/Release 进行了条件编译，但是我从未进行过批量编译。

我的理想目标是组合这些文件，也许使用编译器标志和`#if`，以使代码更易于管理。然后编译成 Library.WinRT.dll 和 Library.x86.dll。我不介意有两个不同的项目，象征性地链接文件，但我真的不想要重复的代码。

关于我如何去做这件事的任何建议？有人有经验想分享吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T20:18:57.467

我想你回答了你自己的问题。使用编译器标志，链接到项目之间的文件（不使用文件系统的符号链接，而是将现有文件从一个项目添加到另一个项目作为链接 - 使用打开文件对话框中“添加”按钮旁边的下拉菜单）。批量编译是什么意思？你想从命令行构建吗？然后你可以做这样的事情：

```
msbuild /verbosity:quiet /fl /t:Rebuild /p:Configuration=Release Library.WinRT\Library.WinRT.csproj
msbuild /verbosity:quiet /fl /t:Rebuild /p:Configuration=Release Library.NET45\Library.NET45.csproj 
```

# java - PANIC：无法打开：¨8W

> ID：14296447
> 
> 赞同：1
> 
> 时间：2013-01-12T18:17:04.473
> 
> 标签：java, android, eclipse, adt, panic

首先让我说我已经查看了 stackoverflow 上的解决方案，但没有找到一个有效的解决方案。这些包括：

*   链接文件夹（但这对我来说是荒谬的）
*   为计算机和 Eclipse 创建环境（系统）变量。

仍然当我在 Eclipse 上运行 Android 虚拟设备管理器并启动 AVD 时，我得到：

> AVD 'AVD_for_4_65in_720p_Galaxy_Nexus' 的启动模拟器
> 
> PANIC：无法打开：¨8W

我试过其他设备还是不行。我有两个硬盘，但 AVDM 说正确的路径是 D:\Users\User.android\avd

有人有解决方案吗？

非常感谢。

PS：它说 AVD 是“有效的 Android 虚拟设备”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T21:22:33.447

您必须添加一个新的用户环境变量（Windows 7）：

开始菜单 > 控制面板 > 系统 > 高级系统设置（左侧）> 环境变量

添加指向您的主用户目录的新用户变量（在顶部）： 变量名：ANDROID_SDK_HOME 变量值：C:\Users>User Name<

此外，将用户目录中的 .android 文件夹移动到 SDK 所在的同一目录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:53:59.597

也许你的配置出了点问题。

关闭 eclipse 和 adt ，然后从安装它的驱动器和用户文件夹中删除“.android”文件夹。

另外，尝试从sdk管理器中卸载sdk工具，然后重新安装。另外，尽量使用稍旧的安卓版本的模拟器。

另一种解决方案是设置系统的环境参数：

```
ANDROID_SDK_HOME = C:\users\my.username 
```

如果没有任何帮助，请尝试完全卸载与 android 相关的任何内容，然后安装在不同的驱动器（或默认驱动器）上。

不管怎样，这个问题已经被[这里](http://code.google.com/p/android/issues/detail?id=19084)的一些用户报告和处理了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-22T17:12:59.830

尝试以“管理员身份”运行 eclipse。当然在添加路径和用户主页之后。

它每次都对我有用。当我简单地“运行”日食时，它给了我

```
PANIC: Could not open: ¨8W //or something similar, almost different each time 
```

当我“以管理员身份运行”时，它每次都能完美运行。

# iphone - 如何在 App 中保存和加载图像？

> ID：14296453
> 
> 赞同：-1
> 
> 时间：2013-01-12T18:17:38.697
> 
> 标签：iphone, ios, xcode, ipad, ios6

我需要制作倒数第二个应用程序。应该有一个画廊，用户可以在其中保存图片，而不是相机胶卷。我已经制作了绘图功能，但无法将图像保存到应用程序中。我不知道该怎么做。我已经在堆栈溢出中看到了所有类似的问题。我不想使用核心数据和表格视图。所以，如果你知道怎么做，请帮助我）））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:36:39.223

如果您不想使用任何数据库。然后可以选择将图像保存在您的应用程序文档目录中，并在需要时从文档目录中检索它。

我已经编写了一些方法来将图像保存到 doc director 并在我的应用程序中检索它。

它们如下：在 FileHandler.h 我已经声明了这些方法

```
#import <Foundation/Foundation.h>

@interface FileHandler : NSObject
{

}

/* Property */
@property (nonatomic, retain) NSString *dirPath;
//@property (nonatomic, retain) NSString *fileName;

/* init method */

-(id)init;

/* Other Contents */
-(void)createImageFilterDirectory;

-(void)createDirectoryAtPath:(NSString*)folderPath;

-(NSString*)getFilteredImageFilePathWithFileName:(NSString*)fileName;

-(void)saveImageToDocDir:(UIImage*)aImage  withFileName:(NSString*)file;

-(UIImage*)getImageWithFileName:(NSString*)imageFileName;

-(BOOL)removeImageWithFileName:(NSString*)fName;

-(void)deleteAllDirContents;

-(NSArray*)getAllDirContents;

-(NSArray*)getAllImageFromDir;

-(BOOL)deleteDir;

@end 
```

并在 FileHandler.mi 中定义了这些方法：

```
#import "FileHandler.h"

#define ImageFilterDir   @"ImageFilterDir"

@implementation FileHandler
@synthesize dirPath;//, fileName;

/* int implementation */
-(id)init
{
    self = [super init];

    if(self) {
        //Custom Initialization
        self.dirPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
        [self createDirectoryAtPath:self.dirPath];

    }

    return self;
}

/* Create Dir of Name ImageFilterDir */
-(void)createImageFilterDirectory
{
    self.dirPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
    [self createDirectoryAtPath:self.dirPath];
}

/* Creating Director if not exists */
-(void)createDirectoryAtPath:(NSString *)folderPath
{
    NSString *dPath = [folderPath stringByAppendingPathComponent:ImageFilterDir];
    NSError *error=nil;

    if(![[NSFileManager defaultManager] fileExistsAtPath:dPath])
    {
        [[NSFileManager defaultManager]  createDirectoryAtPath:dPath withIntermediateDirectories:NO attributes:nil error:&error];
        NSLog(@"Directory %@ Created..",dPath);

    }
    else
    {
        NSLog(@"Directory Exists Already..");
    }

}

/* Get File Path with File Name */
-(NSString*)getFilteredImageFilePathWithFileName:(NSString *)fileName
{
    NSString *documentDir = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
    NSString *filterImageDir = [documentDir stringByAppendingPathComponent:ImageFilterDir];
    NSString *filePath=nil;

    if([[NSFileManager defaultManager] fileExistsAtPath:filterImageDir])
    {
        filePath = [filterImageDir stringByAppendingPathComponent:fileName];
    }
    else
    {
        filePath=@"";
    }

    return filePath;
}

/* Save Image to Dir */
-(void)saveImageToDocDir:(UIImage *)aImage withFileName:(NSString *)file
{
    NSString *filePath = [self getFilteredImageFilePathWithFileName:file];
    NSData *imageData = UIImagePNGRepresentation(aImage);
    [imageData writeToFile:filePath atomically:YES];

    NSLog(@"Writing File => %@ .... ",file);
}

/* Get Image With File Name */
-(UIImage*)getImageWithFileName:(NSString *)imageFileName
{
    NSString *path = [self getFilteredImageFilePathWithFileName:imageFileName];
    NSData *fData = [NSData dataWithContentsOfFile:path];

    UIImage *image = [UIImage imageWithData:fData];

    return image;
}

/* Remove Image With File Name */
-(BOOL)removeImageWithFileName:(NSString *)fName
{
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSString *path = [self getFilteredImageFilePathWithFileName:fName];
    NSError *error=nil;
    if([fileManager fileExistsAtPath:path])
        return [fileManager removeItemAtPath:path error:&error];
    else
        return NO;
}

/* Delete All Dir Contents */
-(void)deleteAllDirContents
{
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSString *imgFilterDir = [self.dirPath stringByAppendingPathComponent:ImageFilterDir];
    NSError *error=nil;
    NSArray *arr = [fileManager contentsOfDirectoryAtPath:imgFilterDir error:&error];

    for (NSString *file in arr) {
        NSString *p = [self getFilteredImageFilePathWithFileName:file];
        if([fileManager fileExistsAtPath:p])
        {
            [fileManager removeItemAtPath:p error:&error];
        }

    }

}

/* Get All Dir Contents. Returns an Array of Filenames */
-(NSArray*)getAllDirContents
{
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSString *imgFilterDir = [self.dirPath stringByAppendingPathComponent:ImageFilterDir];
    NSError *error=nil;
    NSArray *arr = [fileManager contentsOfDirectoryAtPath:imgFilterDir error:&error];

    return arr;
}

/* Get All Dir Contents. Returns an Array of Image */
-(NSArray*)getAllImageFromDir
{
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSString *imgFilterDir = [self.dirPath stringByAppendingPathComponent:ImageFilterDir];
    NSError *error=nil;
    NSArray *arr = [fileManager contentsOfDirectoryAtPath:imgFilterDir error:&error];

    NSMutableArray *imgArr = [[NSMutableArray alloc]init];

    for (NSString *file in arr)
    {
        NSString *p = [self getFilteredImageFilePathWithFileName:file];
        if([fileManager fileExistsAtPath:p])
        {
            NSData *imgData = [NSData dataWithContentsOfFile:p];
            UIImage *image =[UIImage imageWithData:imgData];
            [imgArr addObject:image];
        }

    }

    return [imgArr autorelease];
}

/* Delete Dir */
-(BOOL)deleteDir
{
    [self deleteAllDirContents];

    NSString *f = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
    f=[f stringByAppendingPathComponent:ImageFilterDir];
    NSError *error=nil;
    if([[NSFileManager defaultManager] fileExistsAtPath:f])
    {
       return [[NSFileManager defaultManager] removeItemAtPath:f error:&error];
    }
    else
    {
        return NO;
    }

}

-(void)dealloc
{
   // [fileName release];
    [dirPath release];

    [super dealloc];
}

@end 
```

在我想保存图像 tomy 文档目录的地方我使用 save 方法和检索图像我使用 getImageFrom..... 方法。

我希望这对你有更多帮助

# c# - C# 中的类访问

> ID：14296454
> 
> 赞同：1
> 
> 时间：2013-01-12T18:17:47.033
> 
> 标签：c#, c#-4.0

在 C# (4+) 中，`class A`( `instanceOfClassA`) in的实例是否可以在不公开 x的情况下`class B`访问变量 x （如 in ）（参见下面的代码示例）？`SomeMethodInClassA`

```
    A级
    {
    B 链接到ClassB；

    无效的 SomeMethodInClassA()
    {
    链接到ClassB.x = 1；
    }
    };

    B类
    {
    公共整数 x；// 这应该可以从类 A 访问而不是公开的

    A instanceOfClassA;
    ...
    };

```

我想知道，因为 as`instanceOfClassA`的成员`class B`可能有一种方法可以允许类访问其成员类的特定方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T18:21:44.183

有两个选项可以在类不属于同一层次结构的情况下`A`进行访问：`x`

### 嵌套类

如果`A`是一个嵌套类，`B`那么`A`可以访问`x`：

```
class B {
    private int X;
    A instanceOfClassA;

    private class A {
        B linkToClassB;
        void SomeMethodInClassA() { linkToClassB.x = 1; }
    }
} 
```

### `internal`使用权

如果这两个类在同一个程序集中并且`x`是，`internal`那么就可以`A`访问它。当然，在这种情况下，也可以`x`从同一程序集中的所有其他类进行访问，这可能是不可取的。

```
class A
{
    B linkToClassB;

    void SomeMethodInClassA() { linkToClassB.x = 1; }
}

class B
{
    internal int x;
    A instanceOfClassA;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T18:22:13.360

您可以声明`x`为

```
internal int x; 
```

只要`A`和`B`在同一个程序集中，它就可以工作。`internal`正是针对这种情况提供的，在 C# 中它是唯一的机制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T18:20:43.387

如果您被允许访问其他类的私有成员，那么`Encapsulation`in的目的`OOP`将被破坏..

`private`除非您使用（`Property`需要公开）或`Reflection`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T18:53:20.910

`internal`关键字会做你想做的事。它只允许从**同一个程序**集中访问（想想*DLL*或*EXE*）。

然而，更重要的是，您应该考虑*为什么*需要这种类型的功能。最好的做法是**避免耦合**（两个类相互依赖）。可以在对象*A*或*B的**构造函数*中传递允许它们共享数据的东西吗？也许是在*A*或*B*上有访问器的属性？**`public``set`**

 ***在某些情况下，`internal`最好的选择是，但就像螺丝刀可以用来敲钉子一样，它并不是所有事情的最佳方法。`internal`如果其他所有选项都不可行，我建议您将其用作最后的手段。

为了让您了解`internal`关键字的用途，让我们考虑从*C#中调用平台 (* *pInvoke* ) Win32 函数：

 *```
[Flags]
internal enum ProcessAccessFlags : uint
{
  None = 0x0,
  VmOperation = 0x8,
  VmRead = 0x10,
  VmWrite = 0x20,
  QueryInformation = 0x400
}

internal static class NativeMethods
{
  [DllImport("kernel32")]
  internal static extern IntPtr OpenProcess(ProcessAccessFlags desiredAccess,
                                            bool inheritHandle,
                                            int processId);
  [DllImport("kernel32")]
  internal static extern bool ReadProcessMemory(IntPtr hProcess, 
                                                IntPtr baseAddress,
                                                byte[] buffer,
                                                int count, 
                                                out int numberOfBytesRead);

  [DllImport("kernel32")]
  internal static extern bool WriteProcessMemory(IntPtr hProcess, 
                                                 IntPtr baseAddress,
                                                 byte[] buffer,
                                                 int count, 
                                                 out int numberOfBytesWritten);

  [DllImport("kernel32")]
  internal static extern int ResumeThread(IntPtr hThread);

  [DllImport("kernel32")]
  internal static extern bool CloseHandle(IntPtr handle);
} 
```

这里的`internal`关键字很有意义，因为我的库中的各种类可能需要访问`NativeMethods.CloseHandle()`等。但是，我不希望可能使用我的类库的人访问`NativeMethods`该类，因为它严格用于底层实现细节。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-12T18:29:36.773

您可以使用接口的显式实现来公开该属性。这样，使用对接口的引用可以访问该属性，但使用对类的引用无法访问该属性：

```
public class A {

  private AccessB linkToB;

  void SomeMethodInClassA() {
    linkToB.X = 1;
  }

}

public interface AccessB {

  int X { get; set; }

}

public class B : AccessB {

  private int x;

  int AccessB.X { get { return x; } set { x = value; } }

}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-12T18:22:46.867

您可以制作它`internal`，因此只有该程序集/DLL 中的类可以访问它，包括 A。但可能有更好的模式，具体取决于您想用它做什么。****

# ruby - 一种从数组中选择最大值的方法

> ID：14296457
> 
> 赞同：3
> 
> 时间：2013-01-12T18:17:56.933
> 
> 标签：ruby, arrays

这将返回数组中最长字符串的第一个实例：

```
["abcd","efgh","ijk"].max_by { |x| x.length } # => "abcd" 
```

与此类似，是否有一种很好的方法来获取具有最大长度的所有字符串的数组？

```
["abcd","efgh","ijk"].some_trick ... # => ["abcd","efgh"] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-12T18:25:24.377

开始了 ：

```
["abcd","efgh","ijk"].group_by(&:size).max.last #=> ["abcd","efgh"] 
```

解释 ：

*   [Enumerable#group_by](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-group_by)给出一个哈希，其中包含数组中包含的每个唯一大小的字符串作为键，匹配的字符串作为值 =>`{4=>["abcd", "efgh"], 3=>["ijk"]}`
*   [应用于哈希的Enumerable#max](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-max)将为我们提供具有匹配值的最高键，在这样的数组中：`[key, values]`=>`[4, ["abcd", "efgh"]]`
*   [Array#last](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-last)将为我们提供数组的最后一个元素 ... =>`["abcd", "efgh"]`

# android - 无法让片段回栈工作，我做错了什么？

> ID：14296458
> 
> 赞同：1
> 
> 时间：2013-01-12T18:18:03.377
> 
> 标签：android, android-fragments, back-stack

我有一个布局由两个片段组成的应用程序。左侧一个菜单片段，右侧一个内容片段。当用户按下菜单片段中的菜单项时，内容片段会发生变化。

在小型设备（电话）上，我最初只显示菜单片段。当用户按下菜单项时，整个菜单片段被内容片段替换。然而，当用户想要通过按后退按钮返回菜单时，应用程序将关闭（好像后退堆栈中没有任何内容）。

以下是我的代码的修剪版本，我做错了什么？

```
public class MainActivity extends FragmentActivity implements IMenuListener {

    private static final String TAG = MainActivity.class.getName();

    private Fragment menuFragment = null;
    private Fragment contentFragment = null;

    private FragmentManager fm;
    private ActionBar actionBar;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        if(fm == null) fm = getFragmentManager();
        if(actionBar == null)  actionBar = getActionBar();

        menuFragment = (MenuFragment) fm.findFragmentById(R.id.menuFragment);       
        contentFragment = (Fragment) fm.findFragmentById(R.id.contentFragment);

        if(menuFragment == null) {
            menuFragment = new MenuFragment();
            replaceFragment(R.id.menuFragment, menuFragment);
        }

        // If the content fragment has not been initiated, initiate it, as the view exists in XML.
        if(contentFragment == null && findViewById(R.id.contentFragment) != null) {
            actionBar.setSubtitle(getResources().getString(R.string.actionbar_subtitle_home));
            contentFragment = new HomeFragment();
            replaceFragment(R.id.contentFragment, contentFragment);
        } 
        // If the content fragment has not been initiated and the view does not exist in XML, don't initiate it.
        else if(contentFragment == null && findViewById(R.id.contentFragment) == null) {
             // Basically do nothing.
             actionBar.setSubtitle(getResources().getString(R.string.actionbar_subtitle_menu));
        }
    }

    // Menu item clicked, change fragment
    @Override
    public void onMenuItemSelected(MenuItem item) {
        if(contentFragment != null && contentFragment.isVisible()) {
            // Custom MenuItem class has a Fragment field
            replaceFragment(R.id.contentFragment, item.getFragment()); 
            contentFragment = item.getFragment();
        } else {
            if(deviceIsPhoneInPortaitOrientation()) {
                replaceFragment(R.id.menuFragment, item.getFragment());
            }
        }
    }

    /**
    * Replace current fragment
    * @param container The resource id of the container view
    * @param newFragment The new fragment which should be placed in the given container
    */
    private void replaceFragment(int container, Fragment newFragment) {
        FragmentTransaction ft = fm.beginTransaction();
        ft.addToBackStack(null); // TODO Not working as expected
        ft.replace(container, newFragment);

        ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
        ft.commit();
    }

    /**
    * Determines whether the current device is a phone with current orientation
    * set to portrait or not.
    * @return true if it is, false otherwise
    */
    public boolean deviceIsPhoneInPortaitOrientation() {
            return (!getResources().getBoolean(R.bool.isTablet) &&
                   getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T21:47:20.723

已经很好地演示了您正在寻找的内容。

在“布局”演示中检查[actionBarSherlock 片段示例](http://actionbarsherlock.com/download.html)（或谷歌提供的，它们大致相同）。

还可以查看[本教程](http://developer.android.com/training/basics/fragments/fragment-ui.html)和[本讲座](http://www.google.com/events/io/2011/sessions/designing-and-implementing-android-uis-for-phones-and-tablets.html)

# meteor - 从部署中排除目录（如测试）

> ID：14296459
> 
> 赞同：2
> 
> 时间：2013-01-12T18:18:05.153
> 
> 标签：meteor

我想要一个没有部署到服务器的目录，也没有打包发送给客户端。我阅读了“测试”目录的行为方式，但我不想将所有不需要部署的文件存储在测试目录中。测试只是为了测试......

我想在我的项目中包含我的 sass 文件（.scss），但只需要部署已编译的 css（我编译为 client/style.css）。所有的 sass 源文件和 compass 配置文件都不需要部署在任何地方。

这个怎么做？我希望我不需要将所有内容都存储在测试目录中...

谢谢！彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-05T08:35:57.787

正如[其他 SO](https://stackoverflow.com/questions/10423430/ignoring-files-in-a-meteor-js-project-directory)中所述，名称以点开头的目录（Unix 隐藏目录）不包含在流星中。我将它用于我较少的部分：`client/css/.partials/_<partial_name>.less`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-12T20:51:00.623

您可以修改 Meteor 的 app/lib/bundler.js，第 37 行以包含您的扩展：

```
var ignore_files = [
    /~$/, /^\.#/, /^#.*#$/,
    /^\.DS_Store$/, /^ehthumbs\.db$/, /^Icon.$/, /^Thumbs\.db$/,
    /^\.meteor$/, /* avoids scanning N^2 files when bundling all packages */
    /^\.git$/, /* often has too many files to watch */
    /*.scss$/
]; 
```

或者你可以为你的 sass 文件制作 package.js，以[stylus](https://github.com/meteor/meteor/blob/master/packages/stylus/package.js)为例。

# c# - 文件夹/文件比较

> ID：14296462
> 
> 赞同：0
> 
> 时间：2013-01-12T18:18:16.660
> 
> 标签：c#, comparison

我想编写一个函数来比较两个**文件**/**文件夹**以检查其中一个是否已更改。

如果文件中添加/删除或更改了某些内容，则意味着其中一个发生了一些更改。因此该函数返回提供的文件不相同。这很容易。

困难的部分（如果是文件夹）：我想检查两个文件夹是否具有**相同的材料**。例如：

> *文件夹 1：*
> 
> *   测试文件夹（里面有一个.txt）
> *   测试文件.txt
> *   测试文件2.txt
> 
> *文件夹 2：*
> 
> *   testfolder（其 a.txt 的文本与另一个不同） - 已更改
> *   testfile.txt（相同） - 没有变化
> *   testfile2.txt（相同） - 没有变化

*输出*：函数返回这两个文件夹（文件夹 1 和 2）不相同。（因为*文件夹 2*中的*testfolder*的文件与文件*夹 1中的**testfolder*中的文件不同）

 ***我怎样才能创建这样的控件，最好的方法是什么？我应该在所有文件夹中进行递归搜索并一一检查所有文件吗？（希望没有）像文件这样的文件夹有 MD5 控件吗？我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:44:19.770

我认为你应该对文件夹进行递归比较。这应该不难。

正如在这个[问题](https://stackoverflow.com/questions/1358510/how-to-compare-2-files-fast-using-net)中所写的，文件比较的最佳方法是逐字节比较。本文[展示](http://support.microsoft.com/kb/320348/en-us)了如何做到这一点。***

# jgrapht - 受保护？JGraphT DefaultEdge 类上的 getSource 和 getTarget 方法

> ID：14296463
> 
> 赞同：16
> 
> 时间：2013-01-12T18:18:17.000
> 
> 标签：jgrapht

*org.jgrapht.graph.DefaultEdge*上的*DefaultEdge*方法`getSource()`和方法受到保护。`getTarget()`

 ***我应该如何访问org.jgrapht.graph.SimpleGraph*`edgeSet()`返回的每个边的源顶点和目标顶点？

 *下面的代码显示了正在发生的事情。

```
import java.util.Set;

import org.jgrapht.UndirectedGraph;
import org.jgrapht.graph.DefaultEdge;
import org.jgrapht.graph.SimpleGraph;

public class TestEdges
{
    public static void main(String [] args)
    {
        UndirectedGraph<String, DefaultEdge> g =
            new SimpleGraph<String, DefaultEdge>(DefaultEdge.class);

        String A = "A";
        String B = "B";
        String C = "C";

        // add the vertices
        g.addVertex(A);
        g.addVertex(B);
        g.addVertex(C);

        g.addEdge(A, B);
        g.addEdge(B, C);
        g.addEdge(A, C);

        Set<DefaultEdge> edges = g.edgeSet();

        for(DefaultEdge edge : edges) {
            String v1   = edge.getSource(); // Error getSource() is protected method
            String v2   = edge.getTarget(); // Error getTarget() is protected method
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-13T14:36:53.563

根据[JGraphT 邮件列表](http://jgrapht-users.107614.n3.nabble.com/help-on-using-getSource-and-or-getTarget-for-edge-td1784423.html)，访问边源和目标的“正确”方法是使用方法`getEdgeSource(E)`并`getEdgeTarget(E)`从*org.jgrapht*`Interface Graph<V,E>`的接口

 *然后修改代码

```
for(DefaultEdge edge : edges) {
   String v1   = g.getEdgeSource(edge);
   String v2   = g.getEdgeTarget(edge);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-06T19:02:40.647

在尝试提取边缘的值时，我遇到了类似的问题，虽然不是 OP 的情况，但可能对其他面临此问题的人有所帮助。

当我实例化我的图并将其传递给边缘类时：

```
DirectedGraph graph = new SimpleDirectedGraph(DefaultEdge.class); 
```

Netbeans 为我提供了要导入的**DefaultEdge.class文件的选项，我选错了。**我使用了**org.jgraph**库而不是**org.jgrapht**。

如果您使用的是 DefaultEdge 类，请确保您使用的是来自 jgrapht 的类。

```
import org.jgrapht.graph.DefaultEdge; 
```****

# objective-c - 根据 C/Objective-C 中的 Z 分数找到非常精确的百分位数？

> ID：14296466
> 
> 赞同：-2
> 
> 时间：2013-01-12T18:18:28.337
> 
> 标签：objective-c, c, xcode, math, statistics

我正在创建一个程序，该程序需要找到数千个单独的百分位数，其中大部分小于 0.00005。目前，为此我使用

0.5 * erfc(-zScore * M_SQRT1_2)

然而，这似乎略微四舍五入（在我的程序的其余部分我使用双打和长双打，所以它必须是这个）。我相信这是因为最后，当我将所有百分位数相加时，我得到 1.835468。这告诉我它正在四舍五入，因为它应该加起来 1，或者至少是一个非常接近 1 的数字。此外，当我记录每个单独的百分位数时，我得到相同的数字（比如 0.000036）几个百分位数，并且然后它下降到 0.000035。每次都应该下降，因为每个数字都比上一个数字离平均值更远。

我需要一种方法来根据 Z 分数找到非常精确的百分位数，这并没有给我，因为它舍入得太早了，在小数点后 6 位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:55:30.317

当你看到它从 0.000036 跳到 0.000035 时，这是因为你需要使用`NSLog(@"Value is: %0.36f", yourPercentile);`. 您应该会发现它实际上并没有以 6 位四舍五入，但这就是它的记录方式。

现在，您的错误来自您使用双精度数的事实，它不能很好地存储精确值。**首先，您需要知道您需要**多少精度，然后使用可以处理该精度级别的类型。

假设您决定需要 12 位精度。

long long 是一个很好的单位，因为它可以存储 19 位数字。当您计算原始值时，您需要将**原始**值乘以 100,000,000,000 并将它们存储为 long long。然后使用大值进行您需要的数学运算。最终，当您得到结果时，只需除以相同的值（如果您想将其视为整数，则减去 2 位）即可得到您的百分比。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:27:58.997

我相信这是格式化数字的问题：如果两个值（long double）彼此非常接近但仍然不同，您会看到它们相等，请使用“%.12Lf”之类的格式指定格式。

# vim - VIM - ctags 支持黄瓜/小黄瓜

> ID：14296467
> 
> 赞同：3
> 
> 时间：2013-01-12T18:18:32.590
> 
> 标签：vim, cucumber, ctags, gherkin

在 VIM 中，有没有办法从 .feature 文件导航到 Cucumber 步骤定义？我希望 exuberant-ctags 库能得到支持，但我还没有弄清楚。有人有这方面的经验吗？

谢谢！

# c++ - 在构造函数中而不是在初始化列表中初始化对象

> ID：14296469
> 
> 赞同：1
> 
> 时间：2013-01-12T18:18:41.033
> 
> 标签：c++, constructor, initialization, destructor

我有以下类包含 3 种数据类型：

```
 class CentralBank{
    MaxHeap richestBanks;
    HashTable banks;
    AccountTree accounts;

public:
    CentralBank(int numAccounts, Account* accounts, int numBanks, Bank* bankArr);
    void AddAccount(Account account);
    void RemoveAccount(int accountID);
    void AddBank(Bank bank);
    int GetAccountsNumber(int bankID);
    void GetKRichestBanks(unsigned int K, Bank* banks);
    int GetSumBalance (int low, int high);

}; 
```

这是构造函数：

```
CentralBank::CentralBank(int numAccounts, Account* accounts, int numBanks,
        Bank* bankArr): accounts(numAccounts,accounts){
    int** locs = new int*[numBanks];
    richestBanks = MaxHeap(numBanks,bankArr, locs);
    banks = HashTable(numBanks,bankArr,locs);
    delete[] locs;
} 
```

我的问题是堆和哈希表的析构函数是在它们的构造函数之后调用的。如果我把它们都变成指针，它就不会发生。为什么会这样？有没有办法让它们不是指针，也没有在初始化后立即调用析构函数？我没有正确初始化它们吗？

PS：它们不在初始化列表中，因为它们的构造函数需要需要初始化的“locs”参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T18:40:30.853

一旦进入构造函数的主体，C++ 的规则保证该类的所有基类和该类的所有*成员*都已初始化。这就是为什么初始化列表在构造函数体之外的原因；因为它在您的构造函数主体之前被调用。如果您没有在构造函数的初始化列表中指定构造函数和参数，那么它将被默认初始化。

所以`richestBanks`并且`banks`此时已经被初始化了。而且你不能*两次*初始化一个对象。

```
richestBanks = MaxHeap(numBanks,bankArr, locs); 
```

这样做是临时创建一个*新* `MaxHeap`对象，然后调用复制赋值运算符（或适当的移动赋值）将新数据复制到`richestBanks`. 之后，必须销毁临时对象。这就是您看到的析构函数调用。

正确的解决方案是停止做任何你需要`locs`的事情，并找到更好的方法来构造你的数据，这样你就可以正确使用初始化列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:23:59.580

```
richestBanks = MaxHeap(numBanks,bankArr, locs) 
```

我记得，这意味着您创建一个临时对象，运行复制构造函数将其复制到 richestBanks 变量，然后销毁这个临时变量。

更好的解决方案是引用对象 (MaxHeap&) 而不是对象本身或指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T21:14:51.210

*我的问题是堆和哈希表的析构函数是在它们的构造函数之后调用的。*

为在 CentralBank 构造函数的主体中构造的 MaxHeap 和 HashTable 的临时实例调用析构函数，最终超出范围。这些临时变量被*复制*到成员变量`richestBanks`and`banks`中，这些变量在进入此构造函数的主体时*已经初始化。*

假设您确实需要 int 指针数组，您可以根据正常的 RAII 指南设置一个辅助类来处理其生命周期。像这样的东西：

```
class IntPointerArray
{
public:
    IntPointerArray( int num )
    : array_(new int*[num])
    {}
    ~IntPointerArray()
    { delete [] array_; }
    operator int** ()
    { return array_; }
private:
    int** array_;
}; 
```

现在，扩展您的类以将 this 的实例作为成员：

```
 class CentralBank{
    IntPointerArray locs;
    MaxHeap richestBanks;
    HashTable banks;
    AccountTree accounts;
    // rest omitted 
```

观察成员按声明顺序初始化的规则，您的构造函数现在看起来像这样：

```
CentralBank::CentralBank(int numAccounts, Account* accounts, int numBanks, Bank* bankArr)
: locs(numBanks)
, richestBanks(numBanks,bankArr, locs) // exploits operator int**
, banks(numBanks,bankArr, locs) // ditto
, accounts(numAccounts,accounts)
{} 
```

这样，所有成员都直接初始化，根本不需要带有临时的构造函数体。

您是否应该使用这样的外部数组也值得研究。我猜你真的需要被称为[treap](http://en.wikipedia.org/wiki/Treap)的数据结构。

# c++ - 内联汇编代码无法在 Visual C++ 2010 Express 中编译

> ID：14296470
> 
> 赞同：2
> 
> 时间：2013-01-12T18:18:57.593
> 
> 标签：c++, visual-c++, assembly, inline-assembly

我有一些从 Github 获得的程序集合并排序代码，我正在尝试将其嵌入到 C++ 中的内联程序集中，但它不会编译并不断返回这些错误：

> 1>c:\users\mayank\desktop\assembly\assembly\main.cpp(147): 错误 C2415: 不正确的操作数类型

我试图运行的代码是这样的：

```
#include <iostream>
#include <cmath>
#include <stdio.h>

using namespace std;
const int ARRAYSIZE = 30;

int main()
{
    int arr[ARRAYSIZE];
    int temp_arr[ARRAYSIZE];
    int number;

    for(int x = 0; x < ARRAYSIZE; x++)
    {
        number = (rand() % 99) + 1;
        arr[x] = number;
    }
/*  
READ_ARR_LEN:
    __asm
    {
        // Read the length of the array
        //GetLInt [30]      // Size of input array
        //PutLInt [30]
    }

GET_ARRAY:
    __asm
    {
         //intel_syntax
         // Get values in arr from the user
         mov   EAX, arr
         mov   ECX, ARR_LEN
         call  Read_Arr

         // Run Merge Sort on the array
         mov   EAX, arr
         mov   EBX, temp_arr
         mov   ECX, ARR_LEN
         call  Merge_Sort

        // EXIT
    };;
*/
Merge_Sort:
    __asm
    {
        // EAX - Array start
        // ECX - array length

        // Arrays of size 0 or 1 are already sorted
        cmp   ARRAYSIZE, 2
        jl    Trivial_Merge_Sort

        // Merge_Sort (first half)
        // Length of the first half
        // ECX /= 2
        push  ARRAYSIZE
        shr   ARRAYSIZE, 1
        call  Merge_Sort
        pop   ARRAYSIZE

        // Merge_Sort (second half)
        push  arr
        push  EBX
        push  ARRAYSIZE

        // Length of the second half
        // ECX = ECX - ECX/2
        mov   EDX, ARRAYSIZE
        shr   EDX, 1
        sub   ARRAYSIZE, EDX
        imul  EDX, 4
        // Start index of the second half
        // EAX = EAX + (ECX/2) * 4
        add   arr, EDX
        push  EDX
        call  Merge_Sort
        pop   EDX

        pop   ARRAYSIZE
        pop   EBX
        pop   arr

        pushad
        // Merge (first half, second half)
        // Length of first half = ECX/2
        // Length of second half = ECX - ECX/2
        mov   EDX, ECX
        shr   ECX, 1
        sub   EDX, ECX

        // Start of second half = EAX + (ECX/2) * 4
        mov   EBX, EAX
        mov   EDI, ECX
        imul  EDI, 4
        add   EBX, EDI
        // Index of temp array = 0
        sub   EDI, EDI
        call  Merge
        popad

        // Copy back the merged array from temp_arr to arr
        call  Merge_Copy_Back_Temp

        ret
    };

Trivial_Merge_Sort:
    __asm
    {
        // In case of arrays of length 0 or 1
        ret
    };
Merge:
    __asm
        {
        // Merge two arrays contents.
        // The final merged array will be in temp_arr
        // Merging is done recursively.

        // Arguments:
        // EAX - First array's start
        // EBX - Second array's start
        // ECX - Length of first array
        // EDX - Length of second array
        // EDI - Index in temp array
        pushad

        // Handle the cases where one array is empty
        cmp   ARRAYSIZE, 0
        jz    First_Array_Over
        cmp   EDX, 0
        jz    Second_Array_Over

        // Compare first elements of both the arrays
        push  ARRAYSIZE
        push  EDI
        mov   ARRAYSIZE, [arr]
        mov   EDI, [ARRAYSIZE]
        cmp   ARRAYSIZE, EDI
        pop   EDI
        pop   ARRAYSIZE

        // Pick which ever is the least and update that array
        jl    Update_First_Array
        jmp   Update_Second_Array
    };

Update_First_Array:
   __asm
   {
        // min_elem = min (first elements of first array and second array)
        // Put min_elem into the temp array
        push  dword ptr [EAX]
        pop   dword ptr [temp_arr + EDI * 4]
        add   EAX, 4
        dec   ECX
        inc   EDI

        // Recursively call Merge on the updated array and the
        // other array
        call  Merge
        popad
        ret
   };

Update_Second_Array:
   __asm
   {
       // min_elem = min (first elements of first array and second array)
        // Put min_elem into the temp array
        push  dword ptr [EBX]
        pop   dword ptr [temp_arr + EDI * 4]
        add   EBX, 4
        dec   EDX
        inc   EDI

        // Recursively call Merge on the updated array and the
        // other array
        call  Merge
        popad
        ret
   };

Merge_Copy_Back_Temp:
   __asm
   {
        // Copy back the temp array into original array
        // Arguments:
        // EAX - original array address
        // ECX - original array length
        pushad

        // For copying back, the destination array is EAX
        mov   EBX, EAX
        // Now, the source array is temp_arr
        mov   EAX, temp_arr
        call  Copy_Array
        popad
        ret
   };

Trivial_Merge:
   __asm
   {
        // Note: One array is empty means no need to merge.
        popad
        ret
   };

First_Array_Over:
   __asm
   {
        // Copy the rest of the second array to the temp arr
        // because the first array is empty
        pushad
        mov   EAX, EBX
        mov   ECX, EDX
        mov   EBX, temp_arr
        imul  EDI, 4
        add   EBX, EDI
        call  Copy_Array
        popad
        popad
        ret
   };

Second_Array_Over:
   __asm
   {
    // Copy the rest of the first array to the temp arr
    // because the second array is empty
    pushad
    mov   EBX, temp_arr
    imul  EDI, 4
    add   EBX, EDI
    call  Copy_Array
    popad
    popad
    ret
   }; 
Copy_Array:
   __asm
   {
    // Copy array to destination array
    // EAX - Array start
    // EBX - Destination array
    // ECX - Array length

    // Trivial case
    cmp   ECX, 0
    jz    Copy_Empty_Array

    push  ECX
    sub   EDI, EDI
   };
copy_loop:
   __asm
   {
    // Copy each element
    push  dword ptr [EAX + EDI * 4]
    pop   dword ptr [EBX + EDI * 4]
    inc   EDI
    loop  copy_loop

    pop   ECX
    ret
   };

Copy_Empty_Array:
   __asm
   {
    ret
   };

Read_Arr:
   __asm
   {
        // EAX - array start
        // ECX - array length
        mov   ESI, EAX
        sub   EDI, EDI
   };
loop1:
   __asm
   {
        // Read each element
        lea eax,[esi+edx*4]
        inc   EDI
        loop  loop1
        ret
   };

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T18:29:45.477

（**更新：**在问题中发布的原始代码中，有人尝试将内存寻址为`DWORD [address]`，这与我在下面的回答中指出的 Visual C++ 内联汇编器使用的语法不兼容。）

Visual C++ 对其内联程序集使用 MASM 语法，因此您需要使用`DWORD PTR`而不是仅使用`DWORD`. 这就是导致这些编译错误的原因。

例如，参见The Art of Assembly 中的[这张表](http://cs.smith.edu/~thiebaut/ArtOfAssembly/CH08/CH08-5.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T18:19:32.057

看起来代码来自[这个 github 存储库](https://github.com/pradeep90/CSD-Lab/tree/master/Merge-Sort)。

在该代码中，`GetLInt`实际上是一个 NASM 宏，它包含在外部宏定义文件中并调用一个函数`proc_GetLInt`，该函数又在目标文件中提供`io.o`，源代码不存在。因此，问题很简单

*   您没有意识到这`GetLint`是您缺少的外部代码

*   即使您从该存储库中获取所有文件，它也可以工作，因为 NASM 宏不能直接在 VC++ 内联汇编中工作

*   即使您修复了宏问题，您仍然没有该`GetLInt`功能，因为它仅作为 linux 目标文件提供，您必须自己编写

* * *

你如何解决这个问题？

该代码旨在提供一个独立的汇编程序，可以自行处理所有输入/输出。由于您在 VC++ 中内联它，因此您已经拥有了更强大的 I/O 处理功能。改用它们，即确保`arr`在内联汇编开始之前您要排序的值已经存在。

然后，查看代码：`Merge_Sort`期望数组的开头为`EAX`，其长度为`ECX`。您可以从您的 C++ 代码中获取两者。当您这样做时，您不再需要汇编代码中的`READ_ARR_LEN`and`GET_ARRAY`块。

我不太愿意通过修改来重现部分代码，因为我在 github 上找不到可以说我可以这样做的许可证文件。让我试着描述一下：您需要在汇编程序的一开始就手动将指针移动到in 和`arr`into`EAX`的内容。(*) 如我所见，您已经用数字填充了数组，因此您无需在此处进行任何操作。`ARRAYSIZE``EBX`

然后你需要删除所有不必要的汇编函数和对它们的调用。您还应该将所有单独的`__asm`块压缩为一个块，或者使用外部变量来保存和恢复块之间的寄存器（[或阅读此处的教程](http://msdn.microsoft.com/en-us/library/k1a8ss06.aspx)，但只使用一个块即可，并且不那么麻烦）。

最后，您必须小心堆栈帧：每个`call`都必须有一个匹配的`ret`. 由于合并排序过程是递归的，因此很容易出错。

(*) 小心 VC++ 在 asm 块中处理变量的方式，确保在需要时实际使用指针。

所以总而言之，将它移植到 VC++ 并不是一件容易的事。

# jquery - 加载jquery完成后如何隐藏加载图像

> ID：14296477
> 
> 赞同：0
> 
> 时间：2013-01-12T18:19:49.017
> 
> 标签：jquery, ajax

我有这个 jquery 代码

```
else if ($(this).val() === "5") {
        var codefaqs = $(this).val();
        $('#imgloadfaqs').show();
        $("#faqsmain").attr("disabled", "disabled");
        $('#faqsanswer').load('http://royta.org/somefolder/get.php',{codedgive:codefaqs},function(applycode){
            $('#faqsanswer').html(applycode);
            $('#imgloadfaqs').hide(2000);
            $("#faqsmain").removeAttr("disabled");
        });
    } 
```

并显示加载图像并禁用
我想要的选择框，当 get.php 完成它的工作并完成发送 resault
加载图像消失
但这段代码在 php show resault 之前很快就消失了，
谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:23:25.900

在函数中移动隐藏方法，您将从 php 文件中获取结果：

```
...,codedgive:codefaqs},function(applycode){
            $('#faqsanswer').html(applycode);
            $("#faqsmain").removeAttr("disabled");
            $('#imgloadfaqs').hide(500);
        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T18:23:37.163

尝试将隐藏图像的代码放入 done 函数中。我相信这将是正确的方法：

```
$('#faqsanswer').load('http://royta.org/module/faqs/get.php',{codedgive:codefaqs},function(applycode){
        $('#faqsanswer').html(applycode);
        $("#faqsmain").removeAttr("disabled");
        $('#imgloadfaqs').hide(500);
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T18:28:25.567

使用以下代码片段显示和隐藏。

```
 $(document).ready(function() {

// Setup the ajax indicator

$('body').append('<div id="ajaxBusy"><p><img src="images/loading.gif"></p></div>');

$('#ajaxBusy').css({

display:"none",

margin:"0px",

paddingLeft:"0px",

paddingRight:"0px",

paddingTop:"0px",

paddingBottom:"0px",

position:"absolute",

right:"3px",

top:"3px",

width:"auto"

});

});

// Ajax activity indicator bound to ajax start/stop document events

$(document).ajaxStart(function(){

$('#ajaxBusy').show();

}).ajaxStop(function(){

$('#ajaxBusy').hide();

}); 
```

要阅读有关相同内容的更多信息，请遵循[http://skfox.com/2008/04/28/jquery-example-ajax-activity-indicator/](http://skfox.com/2008/04/28/jquery-example-ajax-activity-indicator/)

如果您在所有 ajax 请求上使用此方法，您将获得旋转图像，因此您不需要为所有请求编码，这将节省额外的工作量。

对于工作示例，请遵循 jsfiddle 链接[http://jsfiddle.net/re57j/](http://jsfiddle.net/re57j/)

# php - 空白配置页面

> ID：14296480
> 
> 赞同：-1
> 
> 时间：2013-01-12T18:20:36.603
> 
> 标签：php, mysql, web-services, web-applications, phpfox

我想安装`phpfox`，但经过两步后，我看到一个空白页面，而不是配置页面。

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:43:10.247

我有这个问题当你使用没有许可证的phpfox时发生了这个问题。据我所知，没有办法。你必须购买许可证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T18:32:38.607

这通常是由于隐藏的错误造成的。需要检查的几件事...其中大部分是在您的 php.ini 文件中定义的，您可以对其进行修改以全局更改它。您将不得不重新启动 apache。

1.  检查你的`error_log`文件
    *   在 index.php 上添加`ini_set('error_log', '/path/to/log');`指定日志文件
2.  开启错误显示`display_errors`
    *   在 index.php 上添加`ini_set('display_errors', true);`
3.  回显您的放置方式`echo __LINE__ . "<br />";`，以查看您进入脚本的程度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T14:17:33.383

您在没有许可证的情况下安装了 phpfox。因此，您的安装过程无法正常工作。请在您的本地系统上安装它`server.sett.php`并在线上传文件和数据库。`server.sett.php`并在上传后更改文件中的凭据

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-03T16:57:38.940

您可以通过在文件中插入以下行来跳过 Phpfox 许可证密钥检查`define('PHPFOX_SKIP_INSTALL_KEY', true);`： install/index.php

然后你可以开始安装 Phpfox 没有许可证密钥。

请注意，您只能将其用于实验目的。

# ruby-on-rails-3 - 单击菜单项后立即折叠 Twitter 引导下拉菜单

> ID：14296485
> 
> 赞同：0
> 
> 时间：2013-01-12T18:21:00.550
> 
> 标签：ruby-on-rails-3, jquery-ui, twitter-bootstrap

我有一个带有 AJAX 链接（即带有 的链接）的 twitter 引导下拉菜单`data-remote="true"`。当我单击一个链接时，菜单保持打开状态，直到 AJAX 调用完成。有没有办法在用户点击链接后立即折叠菜单？

这是一个 jsFiddle[示例](http://jsfiddle.net/rGV2j/)来演示该问题。（请忽略我在示例代码中冻结线程的事实。我想用几行代码模拟场景。）

**注意：**我使用的是 Twitter bootstrap v 2.2.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:09:07.917

我最近建立的单页网站也有类似的问题。您可以通过单击以下链接关闭导航：

```
$('.nav a').click(function () {
    $(".nav-collapse").collapse("hide")
}); 
```

更多信息可以在[Bootstrap 文档](http://twitter.github.com/bootstrap/javascript.html#collapse)中找到，请参阅方法部分。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-01T03:05:29.567

使用它来排除下拉切换

```
$(".nav a[class!='dropdown-toggle']").click(function () {
 $(".navbar-collapse").collapse("hide")
}): 
```

# asp.net-mvc - 如何使用VB为DropDownListFor实现htmlAttributes MVC

> ID：14296493
> 
> 赞同：3
> 
> 时间：2013-01-12T18:21:38.050
> 
> 标签：asp.net-mvc, asp.net-mvc-2, asp.net-3.5

我的 Register.Aspx 视图页面中有以下代码

```
<div class="FieldDropDown">
  <%: Html.DropDownListFor(Function(m) m.Question, ViewData("Questions"), New With {.style = "margin-bottom: 24px; font-family: Tahoma; font-size: 12pt; color: #333333;"})%>
  <%: Html.ValidationMessageFor(Function(m) m.Question)%>
</div> 
```

问题是它不断弹出一个错误，我似乎无法确定如何准确地实现代码。

我没有自己定义的任何自定义或额外的 HTML 帮助程序，并假设它应该可以正常工作，而无需扩展默认的内置 MVC 下拉列表用于帮助程序（？）方法。

出现的错误是...

```
Overload resolution failed because no accessible 'DropDownListFor' can be called without a narrowing conversion:
Extension method 'Public Function DropDownListFor(Of String)(expression As System.Linq.Expressions.Expression(Of System.Func(Of MvcApplication1.RegisterModel, String)), selectList As System.Collections.Generic.IEnumerable(Of System.Web.Mvc.SelectListItem), htmlAttributes As System.Collections.Generic.IDictionary(Of String, Object)) As System.Web.Mvc.MvcHtmlString' defined in 'System.Web.Mvc.Html.SelectExtensions': Argument matching parameter 'selectList' narrows from 'Object' to 'System.Collections.Generic.IEnumerable(Of System.Web.Mvc.SelectListItem)'.
Extension method 'Public Function DropDownListFor(Of String)(expression As System.Linq.Expressions.Expression(Of System.Func(Of MvcApplication1.RegisterModel, String)), selectList As System.Collections.Generic.IEnumerable(Of System.Web.Mvc.SelectListItem), htmlAttributes As System.Collections.Generic.IDictionary(Of String, Object)) As System.Web.Mvc.MvcHtmlString' defined in 'System.Web.Mvc.Html.SelectExtensions': Argument matching parameter 'htmlAttributes' narrows from '<anonymous type> (line 149)' to 'System.Collections.Generic.IDictionary(Of String, Object)'.
Extension method 'Public Function DropDownListFor(Of String)(expression As System.Linq.Expressions.Expression(Of System.Func(Of MvcApplication1.RegisterModel, String)), selectList As System.Collections.Generic.IEnumerable(Of System.Web.Mvc.SelectListItem), htmlAttributes As Object) As System.Web.Mvc.MvcHtmlString' defined in 'System.Web.Mvc.Html.SelectExtensions': Argument matching parameter 'selectList' narrows from 'Object' to 'System.Collections.Generic.IEnumerable(Of System.Web.Mvc.SelectListItem)'. 
```

当我将 HTMLATTRIBUTES 删除到下面的代码中时，它可以正常工作并且没有出现错误，但是 DropDownList 也没有样式，而且它看起来很普通，没有我想要的 CSS 格式......

```
<div class="FieldDropDown">
  <%: Html.DropDownListFor(Function(m) m.Question, ViewData("Questions"))%>
  <%: Html.ValidationMessageFor(Function(m) m.Question)%>
</div> 
```

我试图理解的是......

我需要为下拉列表扩展 htmlhelper 吗？我需要在我的控制器代码中添加一些东西吗？

我的控制器代码如下...

```
<Required()> _
Public Property Question() As String
  Get
    Return _Question
  End Get
  Set(value As String)
    _Question = value
  End Set
End Property 
```

任何指向正确方向的指针或参考链接都会有所帮助。谢谢你

# 编辑

下面的代码在我的 ACCOUNT 控制器中的 Reagister ACTION 中。

```
'-> Okay
Item0 = NewQuestion("0", "Please select an option", True)
Item1 = NewQuestion("1", "What was your mothers maiden name?", False)
Item2 = NewQuestion("2", "Where were you born?", False)
Item3 = NewQuestion("3", "What was the name of your first love?", False)
Item4 = NewQuestion("4", "What was the name of your favourite pet?", False)
Item5 = NewQuestion("5", "What is the name of your favourite song?", False)
Item6 = NewQuestion("6", "What is the name of your idol/mentor?", False)
Item7 = NewQuestion("7", "What model of your first car?", False)
Item8 = NewQuestion("8", "What model was your first motorcycle?", False)
Item9 = NewQuestion("9", "Who is your favourite sports-person?", False)
Item10 = NewQuestion("10", "What was your last ACTIVATION KEY?", False)
SQuestions = Nothing
SQuestions = New SelectList({Item0, Item1, Item2, Item3, Item4, Item5, Item6, Item7, Item8, Item9, Item10}, Item0)
Session("Website_Guest") = ThisGuest
ViewData("VisitorName") = ThisGuest.Username
'ViewData("Questions") = New SelectList(SQuestions.Items) <- TRIED IT LIKE THIS TOO
'ViewData("Questions") = New SelectList(SQuestions) <- TRIED IT LIKE THIS TOO
ViewData("Questions") = sQuestions
ViewData("PasswordLength") = MembershipService.MinPasswordLength
Return View() 
```

这是输出选择列表项的 NEWQUESTION 函数

```
Private Function NewQuestion(NewValue As String, NewData As String, NewSelected As Boolean) As SelectListItem
Dim Item As SelectListItem = Nothing
  Item = Nothing
  If Trim(NewValue) <> "" Then
    If Trim(NewData) <> "" Then
        Item = New SelectListItem()
        Item.Value = NewValue
        Item.Text = NewData
        Item.Selected = NewSelected
    End If
  End If
  Return Item
  Item = Nothing
End Function 
```

所以从本质上讲，我在第一个实例中传递了一个选择列表，这就是为什么我没有放入另一个选择列表 - 尽管就像我在评论中所说的那样，它确实修复了样式但给我留下了另一个问题：下面的照片显示了我得到..

![在此处输入图像描述](../Images/3b93114203908f5629a05401a1c51896.png)

# 关闭

谢谢所有帮助我解决这个问题的人，我已将其中一个标记为答案，因为该人的回答帮助我查明了问题，这并不一定意味着另一个答案是错误的，这可能是我缺乏理解比什么都重要。

为了解决这个问题，我再次查看了传递 viewdata 的方式，虽然我确实传递了一个 SELECTLIST，但我恢复为传递一个 SELECTLIST.ITEMS 集合，然后在 VIEW 中我将传递的数据重新定义为一个选择列表，现在数据是可见的，而不是选择列表对象，并且它在 HTML.DROPDOWNLISTFOR 方法中附加了 HTMLATTRIBUTES。

感谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T19:06:03.593

我不知道为什么只有在包含属性对象时才会出现错误，但我认为问题在于 ViewData("Questions") 返回 an `Object`，而不是 an `IEnumerable(Of SelectListItem)`，因此请尝试：

```
<%: Html.DropDownListFor(Function(m) m.Question,
  TryCast(ViewData("Questions"), SelectList),
  New With {.style = "margin-bottom: 24px; font-family: Tahoma; font-size: 12pt; color: #333333;"}) %> 
```

类似的东西在[http://forums.asp.net/t/1466151.aspx/1](http://forums.asp.net/t/1466151.aspx/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T21:58:13.750

**对于原始问题**

`Html.DropDownListFor`需要`IEnumerable<SelectListItem>`所以你需要`object`从`ViewData`to 转换`SelectList`。

**用于编辑**

使用 的重载构造函数`SelectList`，在其中指定`dataValueField`and `dataTextField`(最终`selectedItem)`.

```
new SelectList(collection, "DataValueFieldName", "DataTextFieldName", "SelectedItemValue"); 
```

# towerjs - “forever server.js”之后的错误

> ID：14296497
> 
> 赞同：1
> 
> 时间：2013-01-12T18:21:47.897
> 
> 标签：towerjs, forever

我是第一次使用 Tower.js，我正在遵循 README.md 的说明。当我尝试使用“forever server.js”命令启动服务器时，结果如下：

> $ 永远 server.js
> 
> 信息：socket.io 启动 Tower 开发服务器在端口 3000 上侦听类型错误：对象 Mac OS X 10.8.2 在 Object.Tower.MiddlewareAgent [as handle] (...)/node_modules/tower/lib/tower- 处没有方法“匹配” middleware/server/agent.js:13:21) 在下一个 (...)/node_modules/tower/node_modules/connect/lib/proto.js:199:15) 在 Object.handle (...)/app/config/server/ bootstrap.coffee:23:14) 在下一个 (...)/node_modules/tower/node_modules/connect/lib/proto.js:199:15) 在 Object.methodOverride [作为句柄] (...)/node_modules/tower/node_modules/ connect/lib/middleware/methodOverride.js:37:5) 在下一个 (...)/node_modules/tower/node_modules/connect/lib/proto.js:199:15) 在 multipart (...)/node_modules/tower/node_modules/ connect/lib/middleware/multipart.js:64:37) 在模块。导出 (...)/node_modules/tower/node_modules/connect/lib/middleware/bodyParser.js:57:9) 在 urlencoded (...)/node_modules/tower/node_modules/connect/lib/middleware/urlencoded.js:51:37 ) 在 module.exports (...)/node_modules/tower/node_modules/connect/lib/middleware/bodyParser.js:55:7) 127.0.0.1 - - [星期六，2013 年 1 月 12 日 18:10:11 GMT] "GET / HTTP/1.1" 500 1718 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.26.17 (KHTML, like Gecko) Version/6.0.2 Safari/536.26.17"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.26.17 (KHTML, like Gecko) 版本/6.0.2 Safari/536.26.17"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.26.17 (KHTML, like Gecko) 版本/6.0.2 Safari/536.26.17"

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:49:17.520

两天前已经设置了一个问题[https://github.com/viatropos/tower/issues/375](https://github.com/viatropos/tower/issues/375)。

似乎已修复，并且拉取请求 #376[刚刚合并](https://github.com/viatropos/tower/commit/a6a6bd9fa9d83d9b7311ec3c7e2c58b7f94c8d1f)（5 小时前）。

下一个版本应该很好。

# java - 如何在 JDialog 中添加完整图像此对话框由 JOptionPane 创建

> ID：14296504
> 
> 赞同：1
> 
> 时间：2013-01-12T18:22:19.857
> 
> 标签：java, swing

我的问题是我想添加完整的背景图片`JDialog`，如果这`JDialog`是由`JOptionPane`. 这张图片没有完全覆盖`Dialog`。

如果您有任何解决方案，请告诉我。

```
public class BrowseFilePath {

    public static final String DIALOG_NAME = "what-dialog";
    public static final String PANE_NAME = "what-pane";
    private static JDialog loginRegister;
    private static String path;
    private static JPanel Browse_panel = new JPanel(new BorderLayout());
    private static JLabel pathLbl = new JLabel("Please Choose Folder / File");  
    private static JTextField regtxt_file = new JTextField(30);

    private static JButton browse_btn = new JButton("Browse");
    private static JButton ok_btn = new JButton("Ok");
    private static JButton close_btn = new JButton("Cancel");

    /*public static void main(String [] arg){
        showFileDialog();
    }*/
    public static void showFileDialog() {

        JOptionPane.setDefaultLocale(null);
        JOptionPane pane = new JOptionPane(createRegInputComponent());
        pane.setName(PANE_NAME);
        loginRegister = pane.createDialog("ShareBLU");
       /* try {
        loginRegister.setContentPane(new JLabel(new ImageIcon(ImageIO.read(AlertWindow.getBgImgFilePath()))));
        } catch (IOException e) {
            e.printStackTrace();
        }*/

        loginRegister.setName(DIALOG_NAME);
        loginRegister.setSize(380,150);
        loginRegister.setVisible(true);
        if(pane.getInputValue().equals("Ok")){
            String getTxt = regtxt_file.getText();
            BrowseFilePath.setPath(getTxt);
        }
        else if(pane.getInputValue().equals("Cancel")){
            regtxt_file.setText("");
            System.out.println("Pressed Cancel Button =======********=");
            System.exit(0);
        }
    }
    public static String getPath() {
        return path;
    }

    public static void setPath(String path) {
        BrowseFilePath.path = path;
    }

    private static JComponent createRegInputComponent() {
        Browse_panel = new JBackgroundPanel();

        Browse_panel.setLayout(new BorderLayout());

        Box rows = Box.createVerticalBox();
         Browse_panel.setBounds(0,0,380,150);

         Browse_panel.add(pathLbl);
         pathLbl.setForeground(Color.white);
         pathLbl.setBounds(20, 20, 200, 20);

         Browse_panel.add(regtxt_file);
         regtxt_file.setToolTipText("Select File/Folder..");
         regtxt_file.setBounds(20, 40, 220, 20);
         Browse_panel.add(browse_btn);
         browse_btn.setToolTipText("Browse");
         browse_btn.setBounds(250, 40, 90, 20);
         Browse_panel.add(ok_btn);
         ok_btn.setToolTipText("Ok");
         ok_btn.setBounds(40, 75, 80, 20);
         Browse_panel.add(close_btn);
         close_btn.setToolTipText("Cancel");
         close_btn.setBounds(130, 75, 80, 20);
        ActionListener chooseMe = createChoiceAction();
        ok_btn.addActionListener(chooseMe);
        close_btn.addActionListener(chooseMe);
        browse_btn.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                JFileChooser fileChooser = new JFileChooser();
                int selection = JFileChooser.FILES_AND_DIRECTORIES;
                fileChooser.setFileSelectionMode(selection);
                fileChooser.setAcceptAllFileFilterUsed(false);
                int rVal = fileChooser.showOpenDialog(null);
                if (rVal == JFileChooser.APPROVE_OPTION) {
                    path = fileChooser.getSelectedFile().toString();
                    regtxt_file.setText(path);
                }
            }

        });
         rows.add(Box.createVerticalStrut(105));
         Browse_panel.add(rows,BorderLayout.CENTER);
        return Browse_panel;
    }

    public  static ActionListener createChoiceAction() {
        ActionListener chooseMe = new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                JButton choice = (JButton) e.getSource();

                // find the pane so we can set the choice.
                Container parent = choice.getParent();
                while (!PANE_NAME.equals(parent.getName())) {
                    parent = parent.getParent();

                }

                JOptionPane pane = (JOptionPane) parent;
                pane.setInputValue(choice.getText());

                // find the dialog so we can close it.
                while ((parent != null) && !DIALOG_NAME.equals(parent.getName()))
                { 
                    parent = parent.getParent();
                //parent.setBounds(0, 0, 350, 150);
                }

               if (parent != null) {
                    parent.setVisible(false);
                }
            }
        };
        return chooseMe;
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T19:31:21.357

不要使用`JOptionPane`，而是使用成熟的`JDialog`. 将内容窗格设置为`JComponent`覆盖`paintComponent()`并返回适当的`getPreferredSize()`.

下面的示例代码：

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.Frame;
import java.awt.Graphics;
import java.net.MalformedURLException;
import java.net.URL;

import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class TestBackgroundImage {

    private static final String BACKHGROUND_IMAGE_URL = "http://cache2.allpostersimages.com/p/LRG/27/2740/AEPND00Z/affiches/blue-fiber-optic-wires-against-black-background.jpg";

    protected void initUI() throws MalformedURLException {
        JDialog dialog = new JDialog((Frame) null, TestBackgroundImage.class.getSimpleName());
        dialog.setModal(true);
        dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
        final ImageIcon backgroundImage = new ImageIcon(new URL(BACKHGROUND_IMAGE_URL));
        JPanel mainPanel = new JPanel(new BorderLayout()) {
            @Override
            protected void paintComponent(Graphics g) {
                super.paintComponent(g);
                g.drawImage(backgroundImage.getImage(), 0, 0, getWidth(), getHeight(), this);
            }

            @Override
            public Dimension getPreferredSize() {
                Dimension size = super.getPreferredSize();
                size.width = Math.max(backgroundImage.getIconWidth(), size.width);
                size.height = Math.max(backgroundImage.getIconHeight(), size.height);

                return size;
            }
        };
        mainPanel.add(new JButton("A button"), BorderLayout.WEST);
        dialog.add(mainPanel);
        dialog.setSize(400, 300);
        dialog.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                try {
                    new TestBackgroundImage().initUI();
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });
    }

} 
```

不要忘记提供合适的父母`Frame`

# css - float:left 表示宽度为 100% 的元素

> ID：14296512
> 
> 赞同：1
> 
> 时间：2013-01-12T18:22:51.657
> 
> 标签：css, grid, css-float

在 Andy Taylor [https://github.com/andytlr/cssgrid](https://github.com/andytlr/cssgrid)`float:left`的 1140px Grid V2 中使用元素的原因是什么`width:100%`

```
.row .twelvecol {
    width: 100%;
    float: left;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:53:47.353

如果没有其他原因，可能是一致性。由于所有其他列号都必须浮动（以将它们作为跨行的列组），因此可能只是为了使全宽列`.twelvecol`具有相同的`float`应用，因此不太可能导致其行为不同的问题与其他列分组相比，它的包装器或内容。

[即使在现代浏览器（Firefox 18）中也可以查看这个小提琴](http://jsfiddle.net/KRS5a/1/)，并注意第二个全宽行（示例的第三行）没有显示其黄色背景颜色，因为浮动已从其中删除，但它包含一个浮动元素它。这将是通过在其上放置浮动来避免的问题类型。

# html - 将我的页面分成 2 个垂直列（html 或 css）

> ID：14296516
> 
> 赞同：1
> 
> 时间：2013-01-12T18:23:17.270
> 
> 标签：html, css, layout

这是我第一次设计网站，所以我需要帮助将我的页面分成 2 个垂直部分。

基本上，我想要这个页面：[http](http://elishaabargel.com/denim) ://elishaabargel.com/denim和这个页面[http://elishaabargel.com/denim2](http://elishaabargel.com/denim2)结合。我的意思是我想要左侧的 Flash 动画和右侧的技术图纸和草图的链接，在页面下方。

第一个页面已经包含右侧部分的 html 和 css 代码，但它只是没有出现。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T19:04:38.100

有很多方法可以将页面分成两部分，您可以使用 iframe、div 或表格。最简单的就是一张桌子。

```
<table width=100% height=100%><tr><td width=50%>Put page1 here</td><td width=50%>Put page2 here</td></tr></table> 
```

此外，如果您要加载两个完整的页面，最好使用 iframe。

```
<iframe src="pg1.html" style="position:absolute;top:0;left:0;width:50%;height:100%;"></iframe>
<iframe src="pg2.html" style="position:absolute;top:0;left:50%;width:50%;height:100%;"></iframe> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-27T19:49:41.393

我想我应该在这里添加对我有用的最简单的模板（使用`div`s）：

```
<div id="container" style="width:100%;">                                   
  <div id="left" style="float:left; width:50%;"> This is left panel </div>                     
  <div id="right" style="float:right; width:50%;"> This is right panel </div>                   
</div> 
```

您可以适当地更改 css 样式选项（如`width`）以满足您的需要。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-29T13:18:53.443

您可以使用引导程序来划分页面。

```
<div class="container">
    <div class="row">
        <div class="col-xs-6"></div>
        <div class="col-xs-6"></div>
    </div>
</div> 
```

如果你需要 100% 的宽度，你可以使用 container-fluid 和 row-fluid.. 我希望这会对你有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-12T19:15:41.560

我做的有点匆忙，我确定有些位是不正确的，比如你的图片在右边的对齐是在顶部而不是底部，而且弹出窗口的大小与你原来的弹出窗口的大小不同......但是它确实解决了两个面板的原始问题。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title>Elisha Bargel</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="fashion, design, student, shenkar, college, portfolio, creation, mode">
<meta name="description" content="Fashion designer Elisha Abargel: projects, pictures, contact.">
<style type="text/css">
    #flashContent { width:100%; height:100%; }
    body {background-color: #FFFFFF;}
    h1 {font-family:Cursive; color: #000000;}
    p {font-family:Cursive; font-size: 14pt; font-style: normal; font-weight: normal; color: #000000;}
    .link {color: #000000;}
    .alink {color: #000000;}
    .vlink {color: #000000;}
</style>
</head>
<body>
<form id="form1" runat="server">
    <div>
        <div id="MainTitle" style="text-align: center;"><img alt="" src="http://elishaabargel.com/photos/logo2.jpg"></div>
        <div id="MainLinks" style="text-align: center;"><a href="http://elishaabargel.com/projects.html" style="font-size: 3; font-family: 'courier new'; text-decoration: none;">projects</a> - <a href="http://elishaabargel.com/contact.html" style="font-size: 3; font-family: 'courier new'; text-decoration: none;">contact</a></div>
        <div id="LeftPanel" style="width: 800; height: 100%; float: left;">
            <h1>Denim Project</h1>
            <div id="flashContent">
                <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="800" height="612" id="denimproject" align="middle">
                    <param name="movie" value="http://elishaabargel.com/photos/flashgalleries/denimproject.swf" />
                    <param name="quality" value="high" />
                    <param name="bgcolor" value="#ffffff" />
                    <param name="play" value="true" />
                    <param name="loop" value="true" />
                    <param name="wmode" value="window" />
                    <param name="scale" value="showall" />
                    <param name="menu" value="true" />
                    <param name="devicefont" value="false" />
                    <param name="salign" value="" />
                    <param name="allowScriptAccess" value="sameDomain" />
                    <!--[if !IE]>-->
                    <object type="application/x-shockwave-flash" data="http://elishaabargel.com/photos/flashgalleries/denimproject.swf" width="800" height="612">
                        <param name="movie" value="http://elishaabargel.com/photos/flashgalleries/denimproject.swf" />
                        <param name="quality" value="high" />
                        <param name="bgcolor" value="#ffffff" />
                        <param name="play" value="true" />
                        <param name="loop" value="true" />
                        <param name="wmode" value="window" />
                        <param name="scale" value="showall" />
                        <param name="menu" value="true" />
                        <param name="devicefont" value="false" />
                        <param name="salign" value="" />
                        <param name="allowScriptAccess" value="sameDomain" />
                    <!--<![endif]-->
                        <a href="http://www.adobe.com/go/getflash">
                            <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
                        </a>
                    <!--[if !IE]>-->
                    </object>
                    <!--<![endif]-->
                </object>
            </div>

        </div>
        <div id="RightPanel" style="width: 200; height: 100%; text-align: left; vertical-align: bottom; float: right;">
            <a href="http://elishaabargel.files.wordpress.com/2012/12/sketchesdenim.jpg" target="_blank"><img alt="technical drawings of the denim project" style="width: 349px; height: 150px; vertical-align: bottom;" src="http://elishaabargel.files.wordpress.com/2012/12/sketchesdenim.jpg"></a><br />
            <a href="http://elishaabargel.files.wordpress.com/2012/12/technicaldrawingsdenim.jpg" target="_blank"><img alt="technical drawings of the denim project" style="width: 349px; height: 150px; vertical-align: bottom;" src="http://elishaabargel.files.wordpress.com/2012/12/technicaldrawingsdenim.jpg"></a>
        </div>
</div>
</form> 
```

我确信你可以把你的 JQuery 代码块放回去，以解决弹出窗口大小不正确的问题。

# c# - Mono XBuild 发布 MVC 站点

> ID：14296517
> 
> 赞同：6
> 
> 时间：2013-01-12T18:23:19.330
> 
> 标签：c#, mono, xbuild

我已经让 Monoserve 和 Nginx 在 Ubuntu 中完美运行，但是我仍然必须使用 MSBuild 在 Windows 机器上本地发布网站，然后将文件复制过来。

最好我希望有一个 Linux CI 服务器来执行此操作，而不是使用 XBuild 但是我只能让它将项目构建到 .dll 中，我如何使用 js、css、视图等发布和部署它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T02:30:07.970

通常，“构建 dll”部分是最难的部分。如果你已经解决了这个问题，那么你就完成了 80%。另一半是发布内容。在最基本的方面，您将部分文件从源目录复制到网站文件夹。MSDeploy 是微软的解决方案，它太复杂了。我构建了一个执行此操作的 NAnt 任务，尽管这也不适用于您的特定场景。但是，一般方法可以：

1.  爬取 sln 文件以查找 Web 项目。是什么造就了一个 Web 项目？csproj 文件中的技术指南或 sln 文件中的项目类型 ID。我作弊并将其定义为“目标文件夹包含一个 web.config 文件”。如果您的解决方案中只有一个网站项目，则可以跳过此步骤，只需对 .csproj 文件进行硬编码。

2.  爬取 csproj 文件以查找`<Content Include="some\file.ext" />`节点。XPath 可以做到这一点，Linq to XML 也可以做到。这将为您提供所有 .aspx、.cshtml、.js、.css、.png、.config 等，同时小心地留下所有 .cs 文件。您需要为 .csproj 文件的路径添加前缀以获取真正的原始文件位置，并且您希望确保将文件夹结构保留在目标位置。但这与收获文件列表相比是微不足道的。

3.  现在您已经获得了文件列表，循环遍历它，从源文件夹复制到目标文件夹。（您可能想先清空目标文件夹，或者然后从以前的部署中删除多余的文件。我发现前者更容易。） csproj 文件抓取没有给您的是 bin 文件夹内容，但这就是小菜一碟：复制bin 文件夹的所有内容。:D （关于是否复制 .pdb 文件存在一个健康的争论，但我说是的。）

形成一个脚本来执行上述 3 个步骤，然后从 XBuild 任务中调用它，或者从 CI 过程中同时调用 XBuild 和此脚本。噗。你有一个部署目标。快乐编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T01:14:10.003

**Preferably I'd like to have a Linux CI server that does this instead using XBuild** The good news is that you CAN do this with a workaround I found in [this](http://codebetter.com/codebetter-ci/) article. Here is an excerpt and the workaround link from the above article:

> The build server does not have Microsoft MVC (any version) installed. However, this is very easy to work around-Microsoft MVC is available on NuGet at [http://nuget.org/packages/Microsoft.AspNet.Mvc](http://nuget.org/packages/Microsoft.AspNet.Mvc) if you need to install an older version, click on the older version at the bottom of the page and you’ll reach instructions on how to install that version of the framework.

Hope this make it easy for you!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-24T08:54:54.730

@DHarun 的想法很棒！我只是根据@Dharun 的想法写了一个小脚本，希望它可以帮助别人。 [https://github.com/z-ji/MonoWebPublisher](https://github.com/z-ji/MonoWebPublisher)

# android - 完成另一个人的活动

> ID：14296521
> 
> 赞同：0
> 
> 时间：2013-01-12T18:23:52.007
> 
> 标签：android, android-activity

我的菜单事件有一个活动：

```
public class GlobalMenu extends Activity{

    private MenuItem item;

    public boolean event(MenuItem item){
        this.item = item;
        // Handle item selection
        switch (this.item.getItemId()) {
            case R.id.menu_stop:
                finish();
                return true;
        }
        return true;
    }
} 
```

我像这样使用它

```
GlobalMenu gm = new GlobalMenu();

@Override
public boolean onCreateOptionsMenu(Menu menu) {

    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    return gm.event(item);
} 
```

但是完成没有用，我想我需要将它与应用程序链接，但我不知道该怎么做

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:30:34.850

首先，您不能制作 Android Activity 的对象或实例。像这样

```
GlobalMenu gm = new GlobalMenu(); 
```

您必须将 GlobalMenu Activity 的 Context 传递给其他 Activity 或 Class，然后对此调用完成。

喜欢，

```
((GlobalMenu)mContext).finish(); 
```

这里**mContext**是`GlobalMenu Activity`.

# objective-c - 有没有办法以编程方式突出显示状态栏项目？

> ID：14296522
> 
> 赞同：5
> 
> 时间：2013-01-12T18:23:57.273
> 
> 标签：objective-c, macos, cocoa, highlight, nsstatusitem

我想执行以下操作：
当我单击状态栏项目 ( `NSStatusItem`) 时，我想无限期地突出显示它（无菜单），当应用程序失去焦点时，我想停止突出显示它。

有没有办法做到这一点？找不到了，呵呵

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T19:59:51.750

您可以使用[向状态项发送`drawStatusBarBackgroundInRect:withHighlight:`消息](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSStatusItem_Class/Reference/Reference.html#//apple_ref/occ/instm/NSStatusItem/drawStatusBarBackgroundInRect%3awithHighlight%3a)的自定义视图来执行此操作。

我怀疑没有自定义视图是否有任何方法可以做到这一点，因为正如我在对该问题的评论中提到的那样，当用户没有将鼠标放在它上面时保持该项目突出显示看起来很糟糕。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-01T12:19:06.370

*老问题，但我认为值得添加这个替代答案。*

当应用程序失去焦点时，这不会自动取消突出显示，但这允许您在不使用自定义视图的情况下突出显示（正如[其他答案](https://stackoverflow.com/a/14297383/377384)所要求的那样）：

```
NSStatusItem *statusItem = [self getStatusItem];
[statusItem.button setHighlighted:YES]; 
```

您可以使用相同的方法手动取消突出显示它：

```
[statusItem.button setHighlighted:NO]; 
```

注意我从一个类似的问题[这里](https://stackoverflow.com/questions/24854217/highlight-nsstatusitem-when-triggered-programmatically#comment40719513_24854217)得到了这个答案。

# java - Ehcache 配置问题（键 **** 的元素为空）

> ID：14296524
> 
> 赞同：2
> 
> 时间：2013-01-12T18:24:01.113
> 
> 标签：java, hibernate, ehcache

我对 Ehcache 配置有很大的问题。

我用：

*   ehcache 2.6.2
*   休眠 3.3.1 GA

我当前的配置是下一个：

1) 休眠

```
<bean id="hibernateProperties" class="org.springframework.beans.factory.config.PropertiesFactoryBean"> 
  <property name="properties">
    <props> 
       <prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</prop> 
       <prop key="hibernate.default_schema">@db.schema@</prop> 
       <prop key="hibernate.show_sql">false</prop> 
       <prop key="connection.pool_size">10</prop> 
       <prop key="hibernate.jdbc.batch_size">30</prop> 
       <prop key="hibernate.default_batch_fetch_size">30</prop> 
       <prop key="hibernate.max_fetch_depth">30</prop> 
       <prop key="hibernate.cache.use_second_level_cache">true</prop> 
       <prop key="hibernate.cache.use_query_cache">true</prop> 
       <prop key="hibernate.cache.region.factory_class"> 
          net.sf.ehcache.hibernate.SingletonEhCacheRegionFactory 
       </prop> 
       <prop key="net.sf.ehcache.configurationResourceName"> 
         /ehcache-config.xml 
       </prop> 
       <prop key="hibernate.generate_statistics">true</prop> 
     </props> 
  </property> 
</bean> 
```

2) ehcache-config.xml

```
<ehcache name="xxxx"> 

<diskStore path="java.io.tmpdir"/> 

<defaultCache 
  maxElementsInMemory="10000" 
  eternal="false" 
  timeToIdleSeconds="120" 
  timeToLiveSeconds="120" 
  overflowToDisk="true" 
  maxElementsOnDisk="10000000" 
  diskPersistent="false" 
  diskExpiryThreadIntervalSeconds="120" 
  memoryStoreEvictionPolicy="LRU" 
 /> 

 <cache name="org.hibernate.cache.UpdateTimestampsCache" 
   maxEntriesLocalHeap="5000" 
   eternal="true"> 
   <persistence strategy="localTempSwap"/> 
 </cache> 

 <cache name="org.hibernate.cache.StandardQueryCache" 
   maxElementsInMemory="10000" 
   eternal="false" 
   timeToIdleSeconds="120" 
   timeToLiveSeconds="120" 
   overflowToDisk="false" 
   diskExpiryThreadIntervalSeconds="120"> 
   <persistence strategy="localTempSwap"/> 
 </cache> 

 </ehcache> 
```

所有 java 对象都实现了 Serializable 并且我使用读写缓存，所有查询都是 setCacheable(true)，但我仍然看不到性能改进。

首先，我有很多这样的消息：

```
 19:30:51,829 DEBUG [Segment] fault added 0 on disk 
 19:30:51,829 DEBUG [Segment] put added 0 on heap 
 19:30:51,829 DEBUG [Segment] fault removed 0 from heap 
 19:30:51,829 DEBUG [Segment] fault added 0 on disk 
 19:30:51,829 DEBUG [Segment] put added 0 on heap 
 19:30:51,830 DEBUG [Segment] fault removed 0 from heap 
 19:30:51,830 DEBUG [Segment] fault added 0 on disk 
```

我注意到的最重要的事情：所有使用缓存的尝试都以：

```
 1) 19:30:47,396 DEBUG [EhcacheGeneralDataRegion] Element for key sql: **** is null

 2) 20:26:31,939 DEBUG [EhcacheGeneralDataRegion] key: ****
    20:26:31,939 DEBUG [EhcacheGeneralDataRegion] Element for key **** is null 
```

谢谢您的帮助。

此致。

# java - Java 小数部分被忽略

> ID：14296526
> 
> 赞同：0
> 
> 时间：2013-01-12T18:24:11.050
> 
> 标签：java, eclipse

考虑代码：

```
public double calculatePrice()
    { 
      int discount = 0 ;
      double totalPrice=itemCount*itemPrice;
      double netPrice;
      for(int i=0;i<NOOFITEMS.length;i++)
      {
        /*  if(i==0)
          {
              if(itemCount<NOOFITEMS[i])
               { discount=0;
                 break;
               }
          }
          /*if(i==NOOFITEMS.length-1)
          {  
        if(itemCount>NOOFITEMS[i])
           {  discount=50;
             break;
           }
          }
          if(itemCount<NOOFITEMS[i]&&itemCount>NOOFITEMS[i+1])
          {
            discount=DISCOUNTPERCENTAGE[i];  
          }*/
          discount=10;
      }
     System.out.println("discount "
             +discount);  
     System.out.println("totalprice "
             +totalPrice); 
      netPrice=totalPrice-(totalPrice*(discount/100));
      return netPrice;
    } 
```

输出：：

```
Bill  ID:   501
Item NAME: grocery
 NO of Item: 11
 Price of Item: 250.0
discount 10
totalprice 2750.0
net price          2750.0
TRAINEE ID:   502
TRAINEE NAME: fruits
 Price of Item: 300.0
Item NO: 15
discount 10
totalprice 4500.0
net price         4500.0 
```

的值`"netprice"`应该`4050 [4500-(4500*(10/100)]` 按照给定的语句。但该值`4500`始终输出..`discount/100`计算不正确。总是忽略小数部分。无法弄清楚错误..！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T18:25:50.267

罪魁祸首是：

```
totalPrice*(discount/100) 
```

`discount`是一个整数，所以`discount/100`整数除法和小数被截断。例如，`10/100`为 0。

要解决此问题，您可以强制使用双打：

```
totalPrice*(discount/100d) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T18:26:40.627

discount/100 是整数除法。当折扣小于 100 时，这将始终为 0。

我想给出一个更好的答案。作为在我的一些 Java 课程中分配这个问题的教授，找到你的编码错误的方法......

当您的代码没有达到您的预期时。设置断点并观察每一行代码的行为。这听起来很乏味，但它变得更快。

当你发现这条线正在做你不期望的事情时，请仔细查看这条线。有时您仍然可以看到它，并且需要将线条分成更小的部分。在这种情况下，您可以分多个步骤进行数学运算。

温度 = 折扣 / 100；

然后在较长的表达式中使用 temp 。这是比寻求他人帮助更好的调试方式。你会学得更快，成为一个更自信的程序员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T18:34:31.717

当使用`double`type 并且您希望输出也是`double`如此时，让您的所有变量`double`代替`int`. 操作`int`s 将导致`int`s。将其更改为 double 不会导致任何问题，因为所有`int`数字也是`double`数字。

就您的示例而言，将变量“折扣”更改为加倍：

```
double discount = 0; 
```

此外，您正在除以 100，它也是一个 int，也将其更改为 double：

```
netPrice = totalPrice - (totalPrice * (discount / 100d)); 
```

或者要进行更安全的操作，请为所有数字定义变量以更清晰地查看它们：

```
double divider = 100;
netPrice = totalPrice - (totalPrice * (discount / divider)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T18:26:33.143

试试这个：

```
netPrice=totalPrice-(totalPrice*(discount/100.)); 
```

您使用了整数算术。

# php - 如何计算从查询返回的多个数组，

> ID：14296527
> 
> 赞同：0
> 
> 时间：2013-01-12T18:24:10.670
> 
> 标签：php, mysqli

我有这个查询。where 子句是一个数组，它工作正常。

我需要计算返回的单独数组的数量，有什么办法可以做到这一点，

输出为：
数组（[0] => 64）数组（[0] => 64 [1] => 65）。

```
 ////////////////////////////////////////////////////
   $message = explode(",", $message_arrayME);
  ////////////////////////////////////////////////////
   $i = 0;
   foreach ($message as $key => $value) { 
   $i++; // increment $i by one each loop pass 
  ////////////////////////////////////////////////////

   $q = mysqli_prepare($conn, ' SELECT member_id FROM members WHERE message_id=? ');
   mysqli_stmt_bind_param($q, 's', $value);
   mysqli_stmt_execute($q);
   mysqli_stmt_store_result($q);
   //$friendNumResult =mysqli_stmt_num_rows($q);    
    mysqli_stmt_bind_result($q, $memberId);

   while($row = mysqli_stmt_fetch($q)):

   $messageArrayNumResult[] = '
   '.$memberId.' 
   ';
   endwhile; mysqli_stmt_close($q);

   //echo $memberIdArray;
   //$friendCount = count($memberIdArray);
   //print_r($memberId);

    $messageArray2 = implode(",",$messageArrayNumResult);

    print_r( $messageArrayNumResult);

   } 
```

解决它：

```
 $friendNum1 = implode(",", $messageArrayNumResult);
    $friendNum2 = explode(",", $friendNum1 );
    $friendCount= count($friendNum2);} 
```

傻我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:48:36.143

根据您取出数据的方式，您可以通过几种不同的方式对其进行计数...如果您已经有一个用户数组是一个用户“朋友列表”，您可以只计算该数组...例如：

```
$num_friends = count($friend_array); 
```

此外，如果每个朋友连接都在一行中，而不是所有朋友被你用来爆炸的东西隔开的一行，那么取决于你如何从数据库中取出数据，你可以只计算行数。前任：

```
 $q = mysqli_prepare($conn, ' SELECT member_id FROM members WHERE message_id=? ');
$num_friends = $q->get_result(); 
```

第二排的解释[在这里](https://stackoverflow.com/questions/8722295/mysqli-num-rows-returns-0)。

# python - “错误：无法识别选项--single-version-externally-managed”表示什么？

> ID：14296531
> 
> 赞同：115
> 
> 时间：2013-01-12T18:24:33.110
> 
> 标签：python, pip, distribute

`error: option --single-version-externally-managed not recognized`在使用`pip install`各种包（包括`PyObjC`and `astropy`）时，我似乎突然开始遇到错误。

我以前从未见过这个错误，但它现在也出现在 travis-ci 构建中，但没有任何改变。

此错误是否表示分发过时？

中的一些错误指定的选项`setup.py`？

完全不同的东西？

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2013-10-31T02:54:15.627

添加`--egg`选项

```
pip install --egg SCons 
```

我使用`pip`版本 1.4.1

* * *

## 回答 #2

> 赞同：110
> 
> 时间：2013-03-06T21:41:47.380

**新更新：**

安装最新版本的`setuptools`. 如果仍然出现错误，请`wheel`同时安装。

```
pip install -U setuptools
pip install -U wheel 
```

* * *

**原始答案/更多详细信息：**

`--single-version-externally-managed`是一个用于 Python 包的选项，指示 setuptools 模块创建一个 Python 包，如果需要，它可以由主机的包管理器轻松管理，如 Yum 或 Apt。

如果您看到此消息，则可能是旧版本的 setuptools 或 Python。尝试使用 Distribute，它是 setuptools 的较新版本，并且向后兼容。这些软件包可能期望您已经拥有它。

[https://pypi.python.org/pypi/distribute](https://pypi.python.org/pypi/distribute)

编辑：此时，distribute 已合并到主`setuptools`项目中。只需安装最新版本的`setuptools`. 正如@wynemo 所指出的，您可能希望改用该`--egg`选项，因为它更适合那些不打算创建系统包进行分发的手动安装。

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2016-03-24T18:50:54.633

安装`wheel`解决了最近的这个问题`pip`（我使用的是 8.1.2）：

```
pip install wheel 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-10-29T14:03:23.037

尝试像这样升级 setuptools：

`pip install --upgrade setuptools`

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-11-03T04:23:56.763

我遇到了这个问题。原来这是我的 pip 缓存上的文件权限有问题。

如果您在 pip 输出的开头看到一条消息，例如

```
The directory '/home/ubuntu/.cache/pip/http' or its parent directory is not owned by the current user and the cache has been disabled. Please check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag.
The directory '/home/ubuntu/.cache/pip' or its parent directory is not owned by the current user and caching wheels has been disabled. check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag. 
```

你可能有同样的问题。您可以通过确保您对 pip 缓存（类似`chown -R $(whoami) /home/ubuntu/.cache/pip`）具有适当的文件权限来解决它，或者，如果您在 UNIX 上，您可以使用`XDG_CACHE_HOME`env var 将 pip 缓存位置设置为您拥有的某个文件夹。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-07-24T09:59:08.467

我尝试了上述解决方案。但是，我只能解决问题，直到我这样做：

`sudo pip3 install -U pip`（对于python3）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-24T06:42:13.553

当我尝试升级一个 python 包时，我的 macbook 也有这个问题。我在 OS X 中检查 pip 版本，它太旧了：1.1。我使用follow cmd将pip升级到1.5.6

```
easy_install -U pip 
```

然后这个错误是固定的。

# javascript - 实现字符串标记器的好方法（或使用已经建立的）

> ID：14296533
> 
> 赞同：0
> 
> 时间：2013-01-12T18:24:39.713
> 
> 标签：javascript, regex, parsing, tokenize

发现自己陷入了两个新手错误之一的境地：

1.  编写我应该从库中取出的代码
2.  编写超级复杂的代码，使用更好的模式可以大大简化

我要做的很简单，我需要向一些 JavaScript 代码发送指令，这些代码将字段从对象打印到页面。事情开始很好，以下字符串：

```
message, tags, date 
```

使用轻松指示代码从对象中获取这些元素

```
field_array = instruction_string.split(',')

obj['message'], obj['tags'], obj['date'] 
```

然后我意识到我想修改该日期字段以反映我所在的时区。启用字符串以携带字段的特殊指令增加了正则表达式的一些复杂性，但仍然不是太复杂：

```
message, tags, date(GMT-5) 
```

使用代码：

```
var special_instruction = /\(.*\)/ig.exec('date(GMT-5)')[2]
RESULT: special_instruction = 'GMT-5' 
```

当我意识到我还想告诉输出调整日期以便它反映从现在开始的时间增量而不是打印实际日期时，我意识到我已经陷入了困境：

```
message, tags, date(GMT-5_)(SINCE_NOW) 
```

我写的正则表达式不起作用：

```
var special_instruction =  /\((.*)\)/ig.exec('last_updated(GMT-5)(since_now)')
RESULT: special_instruction = 'GMT-5)(since_now' 
```

尽管可能有一种方法可以修复正则表达式，但这表明我应该使用工具或已建立的模式来执行此操作，而不是在风口浪尖上编写自定义代码并用它来搞砸太久。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:45:31.233

您确定要为此使用字符串和正则表达式吗？

另一种方法是使用数组和对象来定义应打印的字段。

像这样的东西：

```
var fields = [{
   name: 'message'
}, {
   name: 'tags'
}, {
   name: 'date',
   timezone: 'GMT-5',
   since: new Date() // now
}]; 
```

要从中获取确定要打印的值，您可以遍历数组并查找该`name`字段。如果您找到一个具有名称的对象，`date`您可以查找其他属性。您还可以非常轻松地添加新属性。

# java - Java Web Start 是否缓存资源或曾经使用过 If-Modified-Since？

> ID：14296538
> 
> 赞同：1
> 
> 时间：2013-01-12T18:25:38.003
> 
> 标签：java, browser-cache, java-web-start, if-modified-since

浏览器可以缓存图片等资源，并发送标头，`If-Modified-Since`以便 servlet 可以检查并在未修改时返回 304。

那么 Java Web Start 呢？它曾经这样做过吗？`If-Modified-Since`我检查了我的 java web start甚至对于启动画面也没有标题。这是否意味着 Java Web Start 没有像浏览器那样的缓存？

# php - 阿贾克斯和交换机

> ID：14296540
> 
> 赞同：0
> 
> 时间：2013-01-12T18:25:57.607
> 
> 标签：php, javascript, jquery, ajax

我有这个问题。

索引.php

```
<script type="text/javascript">
        function edit(str){
            var xmlhttp;
            if (window.XMLHttpRequest)
              {
              xmlhttp=new XMLHttpRequest();
              }
            else
              {
              xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
              }
          xmlhttp.onreadystatechange=function()
              {
              if (xmlhttp.readyState==4 && xmlhttp.status==200)
document.getElementById("editdialog").innerHTML=conection.responseText;                
$( "#editdialog" ).dialog({
                autoOpen: true,
                width: 425
                });
              }
          xmlhttp.open("GET","edit.php?id="+str,true);
            xmlhttp.send();
        }
    </script>

$query=mysql_result(SELECT * FROM paises)

while ($row = mysql_fetch_assoc($query)) {
      echo $row['pais'];
      echo "<a href=\"#\" onclick=\"edit('".$row["ICAO"]."')\">Edit</a>";
}

?>
<div id="editdialog" title="Edit"></div> 
```

和 edit.php 文件：

```
 <script src="./jquery.js"></script>
    <script src="./ui/jquery.ui.widget.js"></script>
    <script src="./ui/jquery.ui.button.js"></script>
    <script src="./ui/jquery.ui.core.js"></script>
    <script src="./ui/jquery.ui.widget.js"></script>
    <script src="./ui/jquery.ui.mouse.js"></script>
    <script src="./ui/jquery.ui.button.js"></script>
    <script src="./ui/jquery.ui.draggable.js"></script>
    <script src="./ui/jquery.ui.position.js"></script>
    <script src="./ui/jquery.ui.resizable.js"></script>
    <script src="./ui/jquery.ui.dialog.js"></script>
    <script src="./ui/jquery.ui.effect.js"></script>

<script>
    $(function() {
        $("#editaircraft")
            .button()
            .click(function(event) {
        });
    });
</script>

<?php
require_once ('config.php');
$icao = $_REQUEST["icao"];

echo '<tr><td class="forms">Number Classes:</td><td><select id="numberclasses" name="numberclasses">';
        echo "<option value='0'>Select Number of Classes</option>";
        echo "<option value='1'>One Classes (Economy)</option>";
        echo "<option value='2'>Two Classes (Business & Economy)</option>";
        echo "<option value='3'>Three Classes (First, Business & Economy)</option>";
echo '</select></td></tr>';

echo '<tr><td class="forms">First Class Seats:</td><td><input disabled="disabled" type="text" id="firstclassseats" name="firstclassseats" size="30" value=';
echo $row["FirstClassSeats"] . "></td></tr>";

echo '<tr><td class="forms">Business Class Seats:</td><td><input disabled="disabled" type="text" id="businessclassseats" name="businessclassseats" size="30" value=';
echo $row["BusinessClassSeats"] . "></td></tr>";

echo '<tr><td class="forms">Economy Class Seats:</td><td><input disabled="disabled" type="text" id="economyclassseats" name="economyclassseats" size="30" value=';
echo $row["EconomyClassSeats"] . "></td></tr>";

?>

<script>

$("#numberclasses").change(function() {
value = $(this).val();

str = parseInt(value);

switch(str)
  {
    case 0:
    $(document).ready(function() {
        $("#firstclassseats").attr("disabled","disabled");
        $("#businessclassseats").attr("disabled","disabled");
        $("#economyclassseats").attr("disabled","disabled");
});
    break;

    case 1:
    $(document).ready(function() {
        $("#economyclassseats").removeAttr('disabled');
        $("#firstclassseats").attr("disabled","disabled");
        $("#businessclassseats").attr("disabled","disabled");
});
    break;

     case 2:
    $(document).ready(function() {
        $("#businessclassseats").removeAttr('disabled');
        $("#economyclassseats").removeAttr('disabled');
        $("#firstclassseats").attr("disabled","disabled");
});
    break;

    case 3:
    $(document).ready(function() {
        $("#firstclassseats").removeAttr('disabled');
        $("#businessclassseats").removeAttr('disabled');
        $("#economyclassseats").removeAttr('disabled');
});
    break;

  }
});

</script>

<?php

echo "<tr><td><input id='editaircraft' type='submit' value='Edit Aircraft'></td></tr>";

echo "</table>";
?>

</form> 
```

问题是这个脚本：

```
$("#numberclasses").change(function() {
value = $(this).val();

str = parseInt(value);

switch(str)
  {
    case 0:
    $(document).ready(function() {
        $("#firstclassseats").attr("disabled","disabled");
        $("#businessclassseats").attr("disabled","disabled");
        $("#economyclassseats").attr("disabled","disabled");
});
    break;

    case 1:
    $(document).ready(function() {
        $("#economyclassseats").removeAttr('disabled');
        $("#firstclassseats").attr("disabled","disabled");
        $("#businessclassseats").attr("disabled","disabled");
});
    break;

     case 2:
    $(document).ready(function() {
        $("#businessclassseats").removeAttr('disabled');
        $("#economyclassseats").removeAttr('disabled');
        $("#firstclassseats").attr("disabled","disabled");
});
    break;

    case 3:
    $(document).ready(function() {
        $("#firstclassseats").removeAttr('disabled');
        $("#businessclassseats").removeAttr('disabled');
        $("#economyclassseats").removeAttr('disabled');
});
    break;

  }
});

</script> 
```

该脚本必须在函数中激活和停用选择的选择。但如果我在文件中这样做，一切都会完美。但是如果我想通过 index.php 和 Edit 链接来做，Ajax 会打开对话框，但脚本不起作用。我选择了该选项，但输入没有改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:42:11.413

尝试这个

```
$(document).ready(function() {
$("#numberclasses").change(function() {
value = $(this).val();

str = parseInt(value);

switch(str)
  {
    case 0:

        $("#firstclassseats").attr("disabled","disabled");
        $("#businessclassseats").attr("disabled","disabled");
        $("#economyclassseats").attr("disabled","disabled");

    break;

    case 1:

        $("#economyclassseats").removeAttr('disabled');
        $("#firstclassseats").attr("disabled","disabled");
        $("#businessclassseats").attr("disabled","disabled");

    break;

     case 2:

        $("#businessclassseats").removeAttr('disabled');
        $("#economyclassseats").removeAttr('disabled');
        $("#firstclassseats").attr("disabled","disabled");

    break;

    case 3:

        $("#firstclassseats").removeAttr('disabled');
        $("#businessclassseats").removeAttr('disabled');
        $("#economyclassseats").removeAttr('disabled');

    break;

  }
});

});
</script> 
```

# json - jQuery 移动/JSON

> ID：14296543
> 
> 赞同：-2
> 
> 时间：2013-01-12T18:26:18.050
> 
> 标签：json, jquery-ui, jquery-mobile, jquery-plugins

总之，我有几个关于 jQuery Mobile/JSON 的问题，我想为没有 JSON 插件的现有网站创建一个移动应用程序，并且有以下两个问题：

1.  如何将 JSON 插件添加到不是使用 Wordpress 构建的现有网站？
2.  在我正在创建的移动应用程序中，当我添加下面的锚点并单击按钮时，我得到“错误加载页面”，很困惑为什么会这样。有没有办法将锚点指向现有页面（例如指向 yahoo.com）？

`<a href="www.leparisien.fr" data-role="button" data-icon="arrow-r">Home</a>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T02:28:12.240

1.  尚不清楚 JSON 插件与您构建 JQM 应用程序的意图有什么关系。您可以为 JQM 应用程序使用哪些工具取决于许多因素，其中一些是用于构建当前站点的平台、技术、工具、您的移动内容策略等。

2.  `href`您的锚标记的属性有错误。

的可能值`href`：

*   绝对 URL - 指向另一个网站（例如 href="http://www.example.com/default.htm"）
*   相对 URL - 指向网站内的文件（如 href="default.htm"）
*   锚点 URL - 指向页面中的锚点（如 href="#top"）

[资源](http://www.w3schools.com/tags/att_a_href.asp)

这样就可以了

```
<a href="http://www.leparisien.fr" data-role="button" data-icon="arrow-r">Home</a> 
```

这是给你的[jsFiddle](http://jsfiddle.net/pmatseykanets/jnK5T/)

# mysql - MYSQL GROUP BY 具有特定列的多个不同值

> ID：14296545
> 
> 赞同：2
> 
> 时间：2013-01-12T18:26:30.953
> 
> 标签：mysql, sql, select, group-by

MYSQL结构：

```
 ID | USERID | FRIENDID | Type
-------------------------------
 1  |   10   |    20    | Gold
 2  |   20   |    10    | Gold

 3  |   30   |    40    | Silver
 4  |   40   |    30    | Silver

 5  |   50   |    60    | Gold
 6  |   60   |    50    | Gold

 7  |   70   |    80    | Bronze
 8  |   80   |    70    | Bronze

 9  |   90   |   100    | Bronze
10  |  100   |    90    | Bronze 
```

我想要的是 GROUP (ID 1 & ID 2) 和 (ID 5 & ID 6) 因为它们是“黄金”类型，而**不是 GROUP BY TYPE**。

返回结果：

```
 1\. 10 & 20, type:gold. (GROUP)

 3\. 30 & 40, type:silver.
 4\. 40 & 30, type:silver.

 5\. 50 & 60, type:gold. (GROUP)

 7\. 70 & 80, type:bronze.
 8\. 80 & 70, type:bronze.

 9\. 90 & 100, type:bronze.
10\. 100 & 90, type:bronze. 
```

如何使用 php 查询来做到这一点？

演示：[http ://sqlfiddle.com/#!2/13bd3/1](http://sqlfiddle.com/#!2/13bd3/1)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T18:45:30.760

您需要做的是根据类型添加额外的分组子句。当它是“黄金”时，你会得到一个常数。否则，您使用 id：

```
select least(userid, friendid), greatest(userid, friendid), type
from t
group by least(userid, friendid), greatest(userid, friendid),
         (case when type = 'gold' then 0 else id end) 
```

这确实重新排列了非黄金类型的 ID 顺序。如果排序很重要，那么 SQL 会稍微复杂一些：

```
select (case when type = 'gold' then least(userid, friendid) else userid end),
       (case when type = 'gold' then greatest(userid, friendid) else friendid end),
       type
from t
group by least(userid, friendid), greatest(userid, friendid),
         (case when type = 'gold' then 0 else id end) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T18:30:16.483

```
SELECT GROUP_CONCAT(friend_id) , type FROM mytable GROUP BY type 
```

[演示](http://sqlfiddle.com/#!2/13bd3/9)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T18:49:55.187

试试这个：

```
SELECT id, userid, friendid, type 
FROM (SELECT id, userid, friendid, type, 
             IF(LOWER(type) = 'gold', IF(@lasttype=(@lasttype:=TYPE), @auto, @auto:=@auto+1), @auto:=@auto+1)  indx 
      FROM tablename, (SELECT @auto:=1, @lasttype:=0) a 
      ORDER BY id) a 
GROUP BY indx; 
```

# python - 如何在python中保存文件内容？

> ID：14296551
> 
> 赞同：4
> 
> 时间：2013-01-12T18:26:46.890
> 
> 标签：python, file, matrix, python-2.7

我刚开始工作`python`，这是一个非常基本的问题：

我有一个`input.txt`包含以下测试用例：

```
b---d
-d--d
--dd-
--d--
----d 
```

`5 X 5` `Matrix`现在我想在python 代码的帮助下保存上述内容。这样当我想返回时`matrix[0][2]`它返回`-`。

我该怎么做？我试过了，但它打印出错误的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T18:28:18.950

这很容易，因为字符串和文件也是可迭代的：

```
with open('input.txt') as matrixfile:
    matrix = [list(line.strip()) for line in matrixfile] 
```

`list()`on a string 将其转换为单个字符的列表；我们`.strip()`用来删除任何额外的空格，包括换行符。打开的`matrixfile`文件对象是一个可迭代对象，因此我们可以遍历它来处理所有行。

结果：

```
>>> matrix
[['b', '-', '-', '-', 'd'], ['-', 'd', '-', '-', 'd'], ['-', '-', 'd', 'd', '-'], ['-', '-', 'd', '-', '-'], ['-', '-', '-', '-', 'd']]
>>> matrix[0][2]
'-' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T18:29:03.240

因此，由于 Martijn 发布明显答案的速度更快，所以这里有另一个想法：

您实际上根本不需要创建嵌套列表（“矩阵”）：

```
with open("input.txt") as infile:
    matrix = [line.rstrip() for line in infile] 
```

给你一个可以被索引的五个字符串的列表（这样做时会返回一个字符），就像嵌套列表可以：

```
>>> matrix
['b---d', '-d--d', '--dd-', '--d--', '----d']
>>> matrix[0][2]
'-' 
```

# sorting - 按列排序后未执行 DataTable 实时滚动

> ID：14296555
> 
> 赞同：1
> 
> 时间：2013-01-12T18:27:18.463
> 
> 标签：sorting, primefaces, datatable, scroll

在按列排序后，我一直在寻找解决 DataTable 实时滚动问题的方法。

首先我发现“列”应该有固定的宽度：

[http://code.google.com/p/primefaces/issues/detail?id=1333](http://code.google.com/p/primefaces/issues/detail?id=1333)

然后我发现应该使用scrollRows而不是rows

[http://code.google.com/p/primefaces/issues/detail?id=1236](http://code.google.com/p/primefaces/issues/detail?id=1236)

尽管我已经进行了这些更改，但我无法在按列排序后放置实时滚动。

任何人都可以帮助我吗？

感谢和问候。

```
<p:dataTable  id="simulationProductDtId" emptyMessage="#{msgs.notFoundSimulationDetail}" var="item"
         value="#{SimulationResultProductBean.simulationSummaryDetailList}"
         scrollable="true"
         scrollRows="25"
         scrollHeight="350" 
         liveScroll="true"
          resizableColumns="true" 
         style="border-bottom:1px solid #427CC7; overflow:scroll;position: relative;max-width: 100%;overflow-x: hidden"
         rowStyleClass="#{(SimulationResultProductBean.collapseSuperCode and item.gam) ? 'row' : null}"
          selection="#{SimulationResultProductBean.selectedSimulationDetail}" selectionMode="multiple"
         rowKey="#{item.id}">
          <f:facet name="header">
                                                  ...
          </f:facet>
          <p:column sortBy="#{item.productCode}" width="40"
                          rendered="#{DynamicSimulationTableBean.columnRenderedMap['productCode']}">
                         <f:facet name="header">
                               <h:outputLabel value="#{msgs.code}"/>
                          </f:facet>
                          <h:outputText value="#{item.productCode}" >
                                 <f:convertNumber type="number" integerOnly="true" groupingUsed="false"/>
                         </h:outputText>
           </p:column>

           <p:column sortBy="#{item.productName}" style="width:100px"
                           rendered="#{DynamicSimulationTableBean.columnRenderedMap['productName']}">
                          <f:facet name="header">
                             <h:outputLabel value="#{msgs.description}"/>
                          </f:facet>
           </p:column>
          //Other columns with fixed widths... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-25T10:01:29.133

也许现在回答为时已晚，但我想分享一个我已经实现的解决方案，因为我没有找到任何使用 primefaces 5.2 解决问题的代码。

```
<p:dataTable id="entitiesTable" ...widgetVar="wtable" scrollRows="3" scrollable="true" liveScroll="true"... >
    <p:ajax event="filter" update="entitiesTable" oncomplete="resetScrollPos();" />
    <p:ajax event="sort" update="entitiesTable" oncomplete="resetScrollPos();" />
</p:dataTable>

<script type="text/javascript">
    function resetScrollPos(){
        PF('wtable').scrollOffset=0;    
        PF('wtable').scrollBody.scrollTop(1);   
        PF('wtable').allLoadedLiveScroll = false;               
    } 
</script> 
```

键将参数 allLoadedLiveScroll 设置为 false，以便在过滤器响应或排序操作后再次获取所有数据。Ajax 事件被配置为重置 dataTable 滚动小部件的参数。

希望这对有同样问题的人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:54:32.827

检查您的 primefaces 版本，primefaces 中的数据表似乎是一个非常不稳定的组件。

我正在使用带有排序列的 3.4 版，但我从未尝试过进行实时滚动。我使用页面滚动。还要检查您的浏览器，Internet Explorer 非常不稳定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:54:17.813

我在数据表顶部找到了一个带有提醒的 LAZY 解决方案：

```
 <script> 
    function liveScroll(){
         simulationProductDt. scrollOffset = 25;
     }
    </script>
     <!-- UPDATE scrollOffset value in the liveScroll method when scrollRows is changed!-->
    <p:dataTable  id="simulationProductDtId" emptyMessage="#{msgs.notFoundSimulationDetail}" 
                         scrollable="true" scrollRows="25" scrollHeight="350"  liveScroll="true" 
                        ...other properties

         <p:ajax  event="sort" update="simulationProductDtId" onstart="liveScroll()" onerror="alert('ERROR!')" />
     </p:dataTable> 
```

希望这对某人有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-14T19:08:23.550

SerhatTR 的 anwser 几乎做到了。:) 客户端 scrollOffset 需要在排序之前在 liveScroll 表上重置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-29T07:08:11.293

正如它在接受的答案中提到的那样，`scrollOffset`是客户端 Datatable 小部件对象上的一个属性，即`widgetVar`在`id`.

```
<p:dataTable id="tableId" widgetVar="tableWidget" >
   <p:ajax event="sort" update="tableId" onstart="resetScrollPos()" />
   ...
</p:dataTable>

<script type="text/javascript">
    fucntion resetScrollPos(){
        tableWidget.scrollOffset = 25;
    }
</script> 
```

# android - 如何获取所有“快捷方式小部件”应用程序的列表？

> ID：14296556
> 
> 赞同：3
> 
> 时间：2013-01-12T18:27:24.270
> 
> 标签：android, android-widget

在抽屉中，有一些小部件可以像某些预定义操作的快捷方式一样工作，例如：直接拨号、快速消息、方向和导航等。我想获取安装在我的设备上的所有此类小部件的列表。`AppWidgetManager.getInstalledProviders()`函数不返回这种类型的小部件。我也尝试过`PackageManager.getInstalledApplications()`，`PackageManager.getInstalledPackages(int flags)`但没有成功。

编辑：我找到了解决方案。我不得不使用`PackageManager.queryIntentActivities(Intent intent, int flags)`意图设置为`Intent.ACTION_CREATE_SHORTCUT`.

# c# - 下载 .ics 文件并通过日历访问数据

> ID：14296557
> 
> 赞同：1
> 
> 时间：2013-01-12T18:27:26.283
> 
> 标签：c#, windows-phone-7, icalendar

我正在使用 C# 创建一个移动应用程序*（Windows Phone）*并且我正在处理日历数据，该数据当前存储为一个`.ics`可以下载然后导入到您的日历中的数据。

我正在寻找一种方法，我可以下载`.ics`文件并将其导入手机上的日历，然后`(Month/Week/Day/Location/Time/Event)`根据当前时间在我的应用程序中使用数据。

例如：

> 人 A 在 2012 年 1 月 13 日上午 9 点 13:00 开会，数据存储在服务器上，可以下载为 .ics 文件，其中可以导入手机日历，然后让应用程序访问此数据因此可以在约会时（通过应用程序）提示他。

这在我使用的语言和平台上可行吗？如果是这样，任何人都可以推荐任何关于我如何实现这一目标的教程。

# javascript - 使用 javascript 验证表单的正确方法（简单）

> ID：14296564
> 
> 赞同：0
> 
> 时间：2013-01-12T18:28:11.463
> 
> 标签：javascript, validation

我有一个包含五个字段的表单；`first name`, `last name`,和. `username`_`password``passwordConfirmation`

我首先想说的是我不想要最复杂的方法，这是一个非常简单的网站，永远不会上线，纯粹是为了演示目的，我不担心错误捕获的意义有害的用户输入。

到目前为止，我有这个：

```
function validateRegistrationForm(firstName, lastName, username, password, passwordConfirmation) {
alert("validate form function has been called");
//alert("function has been called");

//---

var firstName = firstName;
//alert(firstName);
var lastName = lastName;
//alert(lastName);
var username = username;
//alert(username);
var password = password;
//alert(password);
var passwordConfirmation = passwordConfirmation;
//alert(passwordConfirmation);

//---

//**The code that I have sectioned off here, I am unsure whether I need it or not, could someone please explain to me why I would do this, and not just reference the parameters in the function directly?**

// Check here if all the fields in the registeration form have been filled.

if ( firstname == null || firstname == "" ) {
    //firstname hasn't been filled out
}

if ( lastName == null || lastName == "" ) {
    //lastname hasn't been filled out
}

if ( username == null || username == "" ) {
    //username hasn't been filled out
}

if ( password == null || password == "" ) {
    //password hasn't been filled out
}

if ( passwordConfirmation == null || passwordConfirmation == "" ) {
    //passwordconfirmation hasn't been filled out
}
} 
```

我想有一种方法来检查每个字段是否已填写（我认为我在这里填写），如果没有，则生成通知，例如相关输入元素周围的红色边框和/或消息以及如何解决问题的说明。我知道这可以用 css 完成，但我不确定最有效的方法。

目前我已经创建了这两个功能：

```
function generateError(messageText, elementIdentifier) {
alert("error generator called");    
//var element = document.getElementById(elementID);
//var error = document.createTextNode(message);
//element.innerHTML = message;
alert("Element: " + elementIdentifier + ", Reason: " + messageText);
}

function validatePassword(password, passwordConfirmation) {
alert("password check called");
if (password == passwordConfirmation) {
    if (password.length < 8) {
        //password too short
        //alert("password\'s match but they are too short");

        return false;
    } else {
        //passwords match and the right length
        //alert("password\'s match and they are 8 characters or longer");
        return true;
    }
} else {
    //the two do not match
    //alert("they don\'t match")
    generateError("Passwords don\'t match", "password");
    return false;
}
} 
```

该`validatePassword()`函数将密码和密码确认作为两个参数，我认为这已经有效，我想要将生成的错误传递给`generateError()`将它们全部存储在数组中的函数，然后逐个循环显示以显示用户有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T00:44:25.277

定义复杂。我认为您的代码已经太复杂了。赠品是有重复。每当你看到重复时，问问自己是否有办法将所有重复组合成一个循环。结果是更少的代码，但通常还有更易于更改的代码。例如，如果要添加电话号码，则必须再添加四行代码以及另一个参数，这将破坏函数的向后兼容性，除非您添加更多代码以允许未定义的电话号码。您可能会说“我绝对不会再添加任何字段，所以这不是问题。” 我不知道我说过多少次，我自己和我最终不得不吃掉我的话并为我的功能做手术。此外，它只是更好的工程。

另外，让我们重新审视一下您的 validateRegistrationForm 函数。你现在拥有它的方式，我猜它是由 onsubmit 触发的，但为什么不通过给用户在每个字段上的即时反馈来利用 JavaScript 的敏捷性呢？我将把它改成 validateRegistrationElement，它会被称为 onchange。我们只会传入一个参数，即正在评估的文本框。这样我们就可以使用“this”。所以每个文本框看起来像：

```
 <input type="text" id="firstname" onchange="validateRegistrationElement(this)" /> 
```

此外，在每个文本框旁边，让我们在每个文本框旁边放置一个反馈框，并摆脱那些烦人的警报弹出窗口。我们甚至可以使用 CSS 类名“error”和“success”来设置反馈框的样式，并将它们分别设为红色或绿色。

```
 <div id="firstnameFeedback"></div> 
```

……等等。

CSS：

```
 .error {background-color: pink; border: 1px dashed red; color: white} 
 .success {border: 1px dashed green;} 
```

与其在函数中加载每个表单元素的详细信息，不如将指令分离为一种配置变量，一个对象数组。数组的每个成员将代表一个表单元素，因此在您的情况下，数组将有四个成员。这些将是包含函数需要知道的所有内容以报告错误的对象。我的建议是让每个对象包含表单元素的 id、一个标签、一个要求（一组正则表达式与它们自己的反馈消息配对是理想的，但让我们用字符串长度保持简单）和一个特殊条件用于匹配的密码。

```
 var myFields =
  [
   {
    "id": "firstname",
    "label": "first name",
    "minLength": 1 //in other words, the field is required
   },
  {
    "id": "lastname",
    "label": "last name", 
    "minLength": 1
   }, 
  {
    "id": "password1",
    "label": "first password", 
    "minLength": 6,
    "maxLength": 8,
    "mustMatch": "password2"
   },
  {
    "id": "password2",
    "label": "second password", 
    "minLength": 6,
    "maxLength": 8,
    "mustMatch": "password1"
   }, 
  ] 
```

这太复杂了吗？我不这么认为。现在我们有一堆乐高积木，我们的验证器功能可以使用它。我们可以轻松地添加或减去元素。如果需要，我们甚至可以为以后添加功能，并且不会破坏功能（例如密码 maxlength，我已将其排除在功能之外）。我会给你看。这是新的验证器功能。请记住，只要用户更改字段中的值，就会调用它。该函数将知道是哪一个，因为我们在 html 中使用了“this”。

```
 function validateRegistrationElement(field) {
  var message = ""; //declare an empty string literal for the message
  for (i=0;i<myFields.length; i++){ //loop through each array element until we find the object
   if(myFields[i].id == field.id){ //once we've found the config object
    if(myFields[i].minLength > field.value.length){ //if the field is shorter than what's allowed
     message += myFields[i].label + " must be longer than " + myFields[i].minLength;
    }
    if (typeof(myFields[i].mustMatch) != 'undefined'){ //if the field must match another...
     if(field.value != document.getElementById(myFields[i].mustMatch)){ //...does it match
      message += myFields[id].label +" must match "+myFields[id].mustMatch;
     }
    }
   document.getElementById(field.id + "Feedback").innerText = message;
   if (message.length > 0) {setClass(field.id, "error")} //if there an error message, highlight red
   else{setClass(field.id, "success")}//otherwise, highlight green
   }
  }
 } 
```

请注意，这也会处理密码，因此您不需要额外的功能。

该函数管理 CSS 并由上述函数调用。

```
 function setClass(id, className) {
    document.getElementById(id).className = "";
    document.getElementById(id).className = className;
    document.getElementById(id+"Feedback").className = "";
    document.getElementById(id+"Feedback").className = className; 
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T00:53:08.097

试试很棒的[jQuery 验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)。

您将需要更多标记（请参阅演示和文档），只需`$("#yourForm").validate();`.

# api - 如何使用外部 API（例如 Facebook Graph）保证我的网站的持续功能

> ID：14296566
> 
> 赞同：-1
> 
> 时间：2013-01-12T18:28:16.510
> 
> 标签：api, facebook-graph-api, usability

随着像 Facebook 这样的 Web API 不断更新和更改，任何给定的更改都可能需要我一段时间来实施，以找出发生了什么变化，然后更新/纠正它。

例如，如果在此期间用户无法登录，他们就不会信任我的网站。

那么，您如何管理对其他服务的依赖关系，以确保如果它现在可以工作，它将永远工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T18:33:41.423

沟通是关键。

大多数受人尊敬的 Web API 提供商（如 Facebook Graph）都有一个开发者博客，以及提供有关 API 即将发生的更改的反馈的邮件列表。很有可能，他们不想破坏您的应用程序，就像您不希望它破坏一样。因此，请阅读博客和/或订阅邮件列表。并注意即将到来的*“重大变化”*（正如他们所说的那样。）

此外，应注意他们的警告和建议。如果他们说某个特定的 API 调用已被弃用，那么它很有可能在下一次更新后不会出现。如果您正在拨打的电话已被弃用，请尽早寻找替代方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T18:34:49.890

好吧，坦率地说，你要求的是 Facebook 冻结他们的整个 API 和 Graph 实现。这根本不会发生。在一个不断变化的技术世界中，事情将会发生变化。作为第 3 方平台的开发人员，我们有责任及时了解第 3 方平台所做的任何更改。

如果您想跟踪 Facebook 对其 API 所做的所有更改，那么您应该查看[Developers Roadmap](https://developers.facebook.com/roadmap/)。他们在此处列出了所有计划中的更改。

对于严重的更改，那些本质上会“破坏”当前功能的更改，Facebook 保证在更改之前至少 90 天通知。

取自[Facebook 开发者路线图](https://developers.facebook.com/roadmap/)-

> 本着开放和透明的精神并遵守我们 的重大[变更政策](https://developers.facebook.com/roadmap/change-policy/)，我们发布此路线图以帮助开发人员规划可能需要修改代码的变更。与所有路线图一样，它可能会略有变化，但随着细节的出现，我们将分享对正在发生的事情的见解。我们鼓励开发人员订阅我们的[博客](https://developers.facebook.com/blog)，我们会在其中宣布推出计划和时间安排。

* * *

鉴于所有这些信息，您仍然可以采取一些措施来确保您的用户始终可以访问您的网站。一件事是提供一种替代登录方法。能够搭上 Facebook 身份验证的便车并将您的网站登录与他们的登录无缝集成是非常有用的，但是如果有一天 Facebook（出于某种原因）出现故障会发生什么？这意味着**您的**用户也将被锁定在您的网站之外！如果它适用于您的情况，请考虑提供替代方案。

# java - 在java中运行二进制文件获取异常错误

> ID：14296572
> 
> 赞同：0
> 
> 时间：2013-01-12T18:29:00.537
> 
> 标签：java

执行二进制文件时如何获取错误消息`Runtime`？

我的代码是：

```
Runtime localRuntime = Runtime.getRuntime();
String strExec = "myBinary -s -a myconfigbinary.conf";
try {
    localRuntime.exec(strExec);
    System.out.println("Success execute."); 
} catch (IOException e) {
    System.out.println(e.getMessage().toString());      
} 
```

我的代码在上面，我只在文件不存在时得到异常错误。但是如果我在计算机上使用控制台运行时由于配置文件中的错误或导致二进制文件未运行的任何原因而无法正常工作，但我仍然收到消息`Success execute.`。

我的问题是我想收到错误消息，例如当我在计算机的控制台上收到错误消息时。在这种情况下如何使用正确的异常？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:39:00.580

您还应该在 中捕获该`ErrorStream`过程`java`的

```
try {
   Process proc = localRuntime.exec(strExec);
   InputStream stderr = proc.getErrorStream();
   InputStreamReader is = new InputStreamReader(stderr);
   BufferedReader br = new BufferedReader(is);
   String line = null;
   while ( (line = br.readLine()) != null)
          System.out.println(line);
   int exitVal = proc.waitFor();
   System.out.println("Process exitValue: " + exitVal);
} catch (Throwable t) {
    t.printStackTrace();
} 
```

如果来自 exec'd 进程的错误变为`stdout`，则您可能还需要对 stdout 执行上述操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T18:38:11.467

您可以检查错误流，例如

```
Process process=localRuntime.exec(strExec);
process.waitFor();
InputStream errorStream = process.getErrorStream(); 
```

# android - 用对话框覆盖后退按钮

> ID：14296576
> 
> 赞同：1
> 
> 时间：2013-01-12T18:29:17.067
> 
> 标签：android, back-button

我有一个单一的活动。当用户想使用后退按钮关闭此活动时，我想显示一个对话框，用户是否确定以及其他一些选项。

覆盖按钮不是问题，但真正从对话框中完成应用程序才是问题所在。

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub

    if ((keyCode == KeyEvent.KEYCODE_BACK)) {
        Log.i(tag, "Pushed BACK button by onKeyDown");
    }

    try {
        showFinishDialog();
        return super.onKeyDown(keyCode, event);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return super.onKeyDown(keyCode, event);
    }
} 
```

这将打开对话框 (showFinishDialog())，但我不知道在对话框中调用什么来最终真正完成我的活动。我尝试了诸如 onBackPressed 和 onDestroy 之类的公共功能，但没有成功。

提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:35:02.483

覆盖`onBackPressed()`。您可以通过以下覆盖后退按钮并弹出对话框的代码来实现您的目标。

```
public void onBackPressed() {
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage("Are you sure you want to exit?")
            .setCancelable(false)
            .setPositiveButton("Yes",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) { 
                        //Do your coding here. For Positive button

                        }
                    })
            .setNegativeButton("No", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
                }
            });
    AlertDialog alert = builder.create();
    alert.show();

} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:40:38.383

就写下来

```
finish(); 
```

无论您想在哪里完成您的活动。

就像如果你想完成一个按钮点击

```
@Override
public void onClick(DialogInterface dialog, int id) {
finish();
} 
```

# listener - 如何在没有侦听器的情况下获取 javafx 媒体元数据

> ID：14296577
> 
> 赞同：5
> 
> 时间：2013-01-12T18:29:19.863
> 
> 标签：listener, media, javafx

所以我已经找了一个星期了，虽然每个问题都相似，但似乎没有一个问题与我的问题完全相同（尝试逆向工程其他类似于我想要的解决方案但没有成功。

解释穴居人风格：我正在尝试使用元数据创建列表。

1.  我打开一个多对话框并选择多个 mp3
2.  我把文件放在一个`ArrayList<File>`
3.  我使用增强的 for 循环遍历文件并使用媒体变量提取元数据
4.  例如，元数据的信息（如“艺术家”）是我想要保存在 ArrayList 中的信息

问题是侦听器仅在增强循环完成后才能工作，这导致 `ArrayList<String>`一个对象中没有任何内容

这是一个示例：

```
ArrayList<String> al;
String path;
public void open(){
    files=chooser.showOpenMultipleDialog(new Stage());
    for( File f:files){             
        path=f.getPath();
        Media media = new Media("file:/"+path.replace("\\", "/").replace(" ", "%20"));
        al= new ArrayList<String>();
        media.getMetadata().addListener(new MapChangeListener<String, Object>() {                 
            public void onChanged(Change<? extends String, ? extends Object> change) {
                if (change.wasAdded()) {
                    if (change.getKey().equals("artist")) {
                        al.add((String) change.getValueAdded());
                     }
                }
            }
        });
    }//close for loop
    //then i want to see the size of al like this
    system.out.println(al.size());
    //then it returns 1 no matter how much file i selected
    //when i system out "al" i get an empty string 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:18:16.540

通过添加侦听器来读取媒体源元数据的另一种方法是在 mediaplayer .setOnReady() 中提取该信息；这是java控制器类的一个示例部分

公共类 uiController 实现 Initializable {

```
@FXML private Label label;
@FXML private ListView<String> lv;
@FXML private AnchorPane root;
@FXML private Button button;

private ObservableList<String> ol= FXCollections.observableArrayList();
private List<File> selectedFiles;
private final Object obj= new Object();

@Override
public void initialize(URL url, ResourceBundle rb) {
    assert button != null : "fx:id=\"button\" was not injected: check your FXML file 'ui.fxml'.";
    assert label != null : "fx:id=\"label\" was not injected: check your FXML file 'ui.fxml'.";
    assert lv != null : "fx:id=\"lv\" was not injected: check your FXML file 'ui.fxml'.";
    assert root != null : "fx:id=\"root\" was not injected: check your FXML file 'ui.fxml'.";

    // initialize your logic here: all @FXML variables will have been injected
    lv.setItems(ol);
}  

@FXML private void open(ActionEvent event) {
    FileChooser.ExtensionFilter extention= new FileChooser.ExtensionFilter("Music Files", "*.mp3","*.m4a","*.aif","*.wav","*.m3u","*.m3u8");
    FileChooser fc= new FileChooser();
    fc.setInitialDirectory(new File(System.getenv("userprofile")));
    fc.setTitle("Select File(s)");
    fc.getExtensionFilters().add(extention);
    selectedFiles =fc.showOpenMultipleDialog(root.getScene().getWindow());
    if(selectedFiles != null &&!selectedFiles.isEmpty()){
        listFiles();
    }
}
/**
 * Convert each fie selected to its URI
 */
private void listFiles(){ 
    try {
        for (File file : selectedFiles) {
            readMetaData(file.toURI().toString());
            synchronized(obj){
               obj.wait(100);
            }
        }
    } catch (InterruptedException ex) {
    }
    System.gc();
}
/**
 * Read a Media source metadata 
 * Note: Sometimes the was unable to extract the metadata especially when 
 * i have selected large number of files reasons i don't known why
 * @param mediaURI Media file URI
 */
private void readMetaData(String mediaURI){
    final MediaPlayer mp= new MediaPlayer(new Media(mediaURI));
    mp.setOnReady(new Runnable() {

        @Override
        public void run() {
            String artistName=(String) mp.getMedia().getMetadata().get("artist");
            ol.add(artistName);
            synchronized(obj){//this is required since mp.setOnReady creates a new thread and our loopp  in the main thread
                obj.notify();// the loop has to wait unitl we are able to get the media metadata thats why use .wait() and .notify() to synce the two threads(main thread and MediaPlayer thread)
            }
        }
    });
} 
```

}

所做的一些更改是使用 ObservableList 来存储元数据中的艺术家姓名

在代码中你会发现这个

```
同步（对象）{
                    obj.wait(100);
                }
```

我这样做是因为媒体播放器 .setOnReady() 创建了一个新线程并且循环位于主应用程序线程中，循环必须等待一段时间才能创建另一个线程并且我们能够提取元数据，并且在.setOnReady() 有一个

```
同步（对象）{
                    对象通知；
                }
```

唤醒主线程，因此循环能够移动到下一个项目

我承认这可能不是最好的解决方案，但欢迎任何有更好方法从文件列表中读取 JavaFx 媒体元数据的人可以在这里找到完整的 Netbeans 项目[https://docs.google .com/file/d/0BxDEmOcXqnCLSTFHbTVFcGIzT1E/edit?usp=sharing](https://docs.google.com/file/d/0BxDEmOcXqnCLSTFHbTVFcGIzT1E/edit?usp=sharing)

另外还使用 JavaFX 创建了一个小型 MediaPlayer 应用程序，该应用程序利用元数据[https://docs.google.com/file/d/0BxDEmOcXqnCLR1Z0VGN4ZlJkbUU/edit?usp=sharing](https://docs.google.com/file/d/0BxDEmOcXqnCLR1Z0VGN4ZlJkbUU/edit?usp=sharing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-06T16:27:52.577

您可以使用以下函数来检索给定 Media 对象的元数据：

```
public static void initializeMetaData(Media media) {
    final Ref<Boolean> ready = new Ref<>(false);

    MediaPlayer mediaPlayer = new MediaPlayer(media);
    mediaPlayer.setOnReady(() -> {
        synchronized (ready) {
            ready.set(false);
            ready.notify();
        }
    });

    synchronized (ready) {
        if (!ready.get()) {
            try {
                ready.wait();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

但是，不要`initializeMetaData`从 JavaFX 线程调用，否则线程会陷入死锁。

PS：必须建立这样的解决方法真的很荒谬。我希望将来 Media 将提供一个完成这项工作的 initialize() 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-22T14:06:32.827

我对这个问题的解决方案是：

```
public class MediaListener implements MapChangeListener<String, Object>
{
    public String title = null;
    public String artist = null;
    public String album = null;

    private final Consumer<MediaListener> handler;
    private boolean handled = false;

    public MediaListener(Consumer<MediaListener> handler)
    {
        this.handler = handler;
    }

    @Override
    public void onChanged(MapChangeListener.Change<? extends String, ?> ch)
    {
        if (ch.wasAdded())
        {
            String key = ch.getKey();
            switch (key)
            {
                case "title":
                    title = (String) ch.getValueAdded();
                    break;
                case "artist":
                    artist = (String) ch.getValueAdded();
                    break;
                case "album":
                    album = (String) ch.getValueAdded();
                    break;
            }

            if (!handled && title != null && artist != null && album != null)
            {
                handler.accept(this);
                handled = true;
            }
        }
    }
} 
```

这可能不是最好的方法，但它比为每个文件创建一个新的 MediaPlayer 更干净。

示例用法：

```
Media media = Util.createMedia(path);
media.getMetadata().addListener(new MediaListener((data) ->
{
    // Use the data object to access the media
})); 
```

# python - 对流程的顺序感到困惑

> ID：14296578
> 
> 赞同：-1
> 
> 时间：2013-01-12T18:29:31.913
> 
> 标签：python

我正在尝试使用猪拉丁式设置。辅音的规则是取字符串的第一个字母，将其移到末尾并添加ay。我的问题是我要删除第一个字母并将其移到末尾...我不确定如何同时执行此操作。谢谢你。

```
pyg = 'ay'

   original = raw_input('Enter a word:')
   word = original.`enter code here`lower()
   first = original[0]
   if len(original) > 0 and original.isalpha():
    if first == "a" or "e" or "i" or "o" or "u" or "A" or "E" or "I" or "O" or "U":
        print("vowel")
        new_word = original.append(pyg)
    else:
        print("consonant")
        new_word = (word.pop[0] and word.append(word[0]) + str(pyg)
    print original
   else:
    print 'empty' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:33:28.133

像这样？

```
new_word = word[1:] + word[0] + pyg 
```

# java - java泛型中的通配符

> ID：14296579
> 
> 赞同：-4
> 
> 时间：2013-01-12T18:29:33.007
> 
> 标签：java

我得到了 Pair.java 类，并且必须实现 PairTools.java 类。

对.java

```
import java.util.Objects;

public class Pair<A, B> {

    public final A a;
    public final B b;

    public Pair(A a, B b) {
        this.a = a;
        this.b = b;
    }

    @Override
    public String toString() {
        // appending things to the empty string prevents us from having to worry about null
        // and calling toString explicitly, Objects.toString(a) + " " + Objects.toString(b)
        // would also work
        return "" + a + " " + b;
    }

    @Override
    public boolean equals(Object obj) {
        // `obj instanceof Pair` will automatically return false if obj is null
        if (!(obj instanceof Pair)) {
            return false;
        }

        // some warnings with generics are unavoidable
        @SuppressWarnings("unchecked")
        Pair<A, B> p = (Pair<A, B>) obj;

        // we use Objects.equals() to handle nulls easily
        return Objects.equals(a, p.a) && Objects.equals(b, p.b);
    }

    @Override
    public int hashCode() {
        // we use Objects.hashCode() to handle nulls easily, 
        // the operation ^ is XOR, not exponentiation
        return Objects.hashCode(a) ^ Objects.hashCode(b);
    }
} 
```

在 PairTools.java 我必须实现以下方法：

```
public class PairTools {

    /**
     * this is how you can use wildcards in generics
     * 
     * @param pair (assume never null)
     * @return a pair containing two references to a of the given pair
     */
    public static <A> Pair<A, A> copyA(Pair<A, ?> pair) {
        return null;
    }

} 
```

我不明白实现。我需要一个解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:35:52.217

一个可能的实现看起来像这样。

```
public class PairTools {

    /**
     * this is how you can use wildcards in generics
     * 
     * @param pair (assume never null)
     * @return a pair containing two references to a of the given pair
     */
    public static <A> Pair<A, A> copyA(Pair<A, ?> pair) {
        return new Pair<A, A>(pair.a, pair.a);
    }

} 
```

这将忽略`b`给定对的值并返回一个具有两个引用的新对`a`。

你不能简单地这样做

```
return new Pair<A, A>(pair.a, pair.b); 
```

因为你必须返回一个`Pair<A, A>`. 你得到一个`Pair<A, ?>`as 参数，所以你只能确定给定对的第一个值是 type `A`。你不知道的类型`pair.b`。

# eclipse - 解释器与代码生成器 Xtext

> ID：14296582
> 
> 赞同：5
> 
> 时间：2013-01-12T18:29:58.830
> 
> 标签：eclipse, interpreter, dsl, xtext

我有一个使用 Xtext 编写的 DSL。我想要的是执行那个 DSL 来执行一些好的事情。

我在 xtend 中编写了实现接口 IGenerator 的 myDslGenerator 类来生成 java 代码，它工作正常。

我有两个问题；

1.  解释器和代码生成器有什么区别？不是都用于执行 DSL 吗？
2.  如何编写解释器？有分步教程链接吗？我找到了许多使用 xtend 生成代码的教程，但找不到任何用于编写解释器的教程。

谢谢，

萨尔曼

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T14:46:12.463

基本上，解释器和代码生成器的工作方式完全不同。代码生成器就像一个编译器：它们用另一种语言创建你的 DSL 的可执行代码；另一方面，解释器用于遍历您的 DSL 并在您自己的环境中执行它们。这意味着，生成的代码不必（但当然可以）依赖于您的 DSL，可以更快/更优化；虽然解释器需要了解您的语言的结构，但可以在您的开发 IDE 中执行，而不需要运行其他应用程序。

AFAIK Xtext 不支持编写解释器，它有点超出了他们的范围（不完全——对于 Xbase 表达式，有一个 XbaseInterpreter 实例，可以重用——只要你正确设置它的类路径），因为它们是非常特定于语言的。

我也不知道任何关于解释 Xtext DSL（甚至不是 XbaseInterpreter）的分步教程，但它基本上归结为 AST 的遍历，并且随着节点的遍历，相应的语句被动态执行. 为了使这种遍历按预期工作，解释器必须维护变量和其他引用的（可能是分层的）上下文。

# php - 为 MySQL 解析大型 XML 文件

> ID：14296585
> 
> 赞同：4
> 
> 时间：2013-01-12T18:30:31.387
> 
> 标签：php, sql, xml, dom

我有一个非常大的 XML 文件（1.5GB），我需要对其进行解析，然后将特定值插入 MySQL 表中。

现在我通常在 DOM 上进行解析的方式是使用 jQuery 或 PHP Simple Dom Parser，但在这种情况下，考虑到文件大小，我认为两者都不合适。我需要强调性能。我已经阅读了一些关于 PHP 的 SimpleXML 和 XML Parser 的内容，它们似乎各有优势，但我不确定它们中的任何一个是否适合 1.5GB 大小的文件。

我也看到提到过 Pear 的 XML 解析器，但我不知道这是否适合这种情况。从我读过的内容来看，我似乎只需要将所需的节点而不是整个树本身加载到内存中。即使是现在，由于文件的大小，我在实际查看文档时也遇到了麻烦。VIM 似乎是唯一可以处理它的编辑器，但即使这样滚动文档也会导致崩溃。

如果有人可以推荐其中一个，或者甚至是完全不同的解决方案，那就太好了。

然后，这将把我带到我将要即时执行的 SQL 插入 - 所以在我解析一个节点并提取我需要的值之后，我会将这些插入到数据库中。同样，任何建议都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:46:17.180

对于如此庞大的 XML 文件，建议使用基于[SAX](http://en.wikipedia.org/wiki/Simple_API_for_XML)的 XML 解析器。在 PHP 中，您可以使用“ [XML Parser](http://bd1.php.net/manual/en/book.xml.php) ”来完成。它消耗的内存比[同类](http://bd1.php.net/manual/en/refs.xml.php)产品少。它也非常快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T18:51:44.673

SimpleXml 和 DOM 不适用于大型 XML 文件

尝试：

*   XMLReader： http: [//php.net/manual/en/book.xmlreader.php](http://php.net/manual/en/book.xmlreader.php)

甚至更好/更快（但使用起来稍微复杂一些）

*   XMLParser： http: [//php.net/manual/en/book.xml.php](http://php.net/manual/en/book.xml.php)

# php - 无法从表单中检索帖子值

> ID：14296592
> 
> 赞同：-2
> 
> 时间：2013-01-12T18:31:39.670
> 
> 标签：php, forms

在页面 test.php 我有一个类似于

```
<form action="test.php" method="post">   

<a href="test.php?id=5" name="test_name1">click me</a> 
<a href="test.php?id=5" name="test_name2">click me</a>
<a href="test.php?id=5" name="test_name3">click me</a>

</form> 
```

如果有人点击这些链接，那么我必须检查类似

```
if (isset($_POST['test_name1'])) {  

    //do my work
} 
```

但这对我不起作用。我必须检查所有链接，该表格有大约 10 个这样的链接。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:39:59.697

看起来像你想要的复选框，你可以试试

```
<form   method="post">
    <input type="checkbox" name="check_list[]" value="value 1">value one<br>
    <input type="checkbox" name="check_list[]" value="value 2">value tow<br>
    <input type="checkbox" name="check_list[]" value="value 3">value three<br>
    <input type="submit" />
</form>
<?php
if(!empty($_POST['check_list'])) {
    foreach($_POST['check_list'] as $check) {
            echo $check;  
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T18:34:13.970

这不是表单的工作方式。您在表单中有一个`GET`链接。`POST`

示例`POST`（`script.php`）：

```
<?php

  if( isset($_POST[submit]) ) {
     //do
  }

?>

<form method="post" action="script.php">
<input type="submit" name="submit" />
</form> 
```

示例`GET`（`script2.php`）：

```
<?php

  if( isset($_GET[id]) ) {
    //do
  }

?>

<a href="script2.php?id=2">Click me</a> 
```

这可能是您想要完成的更多内容（`script3.php`）：

```
<?php

  if( isset($_GET[id]) && isset($_GET[name]) ) {
    //do
  }

?>

<a href="script3.php?id=5&name=test_name1">click me</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T18:36:22.267

**$_POST**方法仅适用于***FORM***元素，不适用于***Anchor***元素。但是在您的情况下，您将***Anchor***元素链接到 php 文件。您可以检查***isset***的 id 但不能检查***Anchor***元素名称。***id***也将通过以下方式检查：

```
if(isset($_GET['id'])) {

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T18:36:22.643

您不能将链接用作表单参数...您可以做的是隐藏值并具有三种不同的形式。尽管此方法使用按钮传输的数据对用户来说不太明显，但在使用 $_POST 而不是 $_GET 时会显示链接中的数据。

```
<form action="test.php" method="post">
<input type="hidden" name="id" value="5">
<input type="input" name="test_name1">
</form>
<form action="test.php" method="post">
<input type="hidden" name="id" value="5">
<input type="input" name="test_name2">
</form>
<form action="test.php" method="post">
<input type="hidden" name="id" value="5">
<input type="input" name="test_name3">
</form> 
```

然后在页面顶部，您可以检查...

```
<?php
if(isset($_POST['test_name1'])){
//they clicked button 1.
}
?> 
```

如果您只想使用链接获取数据，您可以执行此操作并使用 $_GET 检索数据...

```
<a href="test.php?id=5">click me</a>

<?php
if(isset($_GET['id']){
//they clicked your link.
}
?> 
```

# ios - 使用 SwipeGester 交换视图（同一实例的） - 内部截图

> ID：14296594
> 
> 赞同：1
> 
> 时间：2013-01-12T18:31:46.770
> 
> 标签：ios, uiview, uiviewcontroller, uiswipegesturerecognizer

这是我设备上的视图的屏幕截图。

![Ipad 截图](../Images/2f6e251ca3903e8f56b4c13055fc5072.png)

我在这里遇到的设计问题是屏幕的顶部始终是静态的——就其位置而言。屏幕的其余部分是以编程方式添加到此视图的一排按钮。箭头表示您可以在 4 个方向（从顶部、从底部、从左侧和从右侧）滑动的想法，这会将新视图动画化到屏幕上。此视图与之前的视图相同。事实上，所有这些视图都是相同的实例，但按钮会有所不同。（我不想在这里太具体。）

我现在的设计要求提前预加载视图。每个视图的每个按钮的数据将在核心数据中。我不会提前知道有多少视图。一个视图可能只有一个右侧视图，您可以从右侧滑入，并且该视图可能有一个顶部和底部箭头 - 这将允许您从底部或顶部滑动，这将是另一个视图（相同的 UIView 子类）。所以基本上是一棵视图树。

我想我正在尝试找出我的选择。NavigationController 并不是我真正想要的，因为我不需要导航栏，尽管在我看来，这里有一个视图控制器数组是有道理的，每个视图控制器的视图属性指向每个分配的视图，然后作为我滑动我会通过使用视图控制器索引来引入适当的视图。（通过一些动画代码）

另一个可能的选择是 UIScrollView ，但这看起来很麻烦，可能不是我真正想要的。

最简单的设置之一是创建一个 XIB 文件，该文件将包含屏幕的顶部和底部的空 UIView，我将以编程方式填充按钮（及其唯一数据）。我对此感到困惑的问题是，我将如何以这种方式交换视图。我想我可以让 rootViewcontroller 成为第一个视图的第一个 viewcontroller 实例，然后交换它们。

我想我想看看是否有人有任何问题或建议来提出最简单（最模块化）的方法来在不同的视图中滑动。使用视图控制器数组是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:58:23.050

一个 Xib 对您来说就足够了（无论如何，对于您应用程序的这一部分）。

不要使用 UINavigation 控制器。NavController 比喻是一堆卡片中的一张。你没有那个数据结构。

一般的想法是一个 ViewController 用于一屏内容。如果您觉得需要两个视图控制器（一个用于顶部，一个用于底部），那么您将不得不查看自定义容器控制器，以确保包含的控制器正确接收它们的实例方法（viewDidLoad、viewWillAppear、 ETC）。管理一对 viewController 的示例容器控制器是 iPad splitViewController。但我认为你不需要这样做。

我建议在屏幕的下半部分放置一个 scrollView 并使用它来管理您的数据视图。如果屏幕的上部也需要改变（在其他条件下），你甚至可以有两个滚动视图，一个在顶部，另一个在下面。它们可以分页，并包含与相应屏幕部分精确大小的视图。他们可以共享他们的单个包含 viewController 作为其委托方法的公共位置。

我真的无法为您提供更多详细信息，因为我对您想要实现的目标没有足够的了解。也许您应该尝试其中一种方式来实现它，并在您的想法变得具体时带着更多问题回到这里。从最简单的想法开始（例如，在单个 viewController 中的滚动视图），只有当你发现你必须打破它时才把它扔掉！

**根据您的评论进行更新**
，我认为 scrollView 可能对您有用。我认为使用自定义容器控制器（正如 Rob 建议的那样）管理一堆视图控制器可能会变得过于复杂。您将必须创建自己的自定义容器控制器，诸如 UINavigationController 之类的预先存在的容器控制器*不*适合您的数据结构（无论如何我都可以收集）。

您不需要管理大量的 UIView，实际上您只需要 5 个 - 一个用于滚动视图的屏幕部分，一个用于屏幕的左右两侧，同样用于上方和下方的一个。您可以在滑动时重用这些视图，就像 tableView 重用它们的单元格一样。剩下的部分将是关于操作您的数据，以便正确的内容在它们出现在屏幕上时排列在视图中。

有关此问题的更多想法，请参阅我对这个问题的回答：[UICollectionView 水平连续循环](https://stackoverflow.com/questions/14249525/uicollectionview-horizontal-continuous-loop/14249823#14249823)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T20:02:15.977

几个想法：

1.  这对我来说是自定义容器视图控制器（如果是 iOS 5 及更高版本）。请参阅*iOS 视图控制器编程指南*中的[创建自定义容器视图控制器。](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html#//apple_ref/doc/uid/TP40007457-CH18-SW6)

**   你谈到了使用`UISwipeGestureRecognizer`. 你也可以一直考虑`UIPanGestureRecognizer`。有连续的手势很好。考虑阅读一本书，其中页面滑动会跟踪您的手指，但您可以停止并返回，中间手势。当然，现在从滑动手势开始，但如果您的用户体验适合它，您可以随时考虑在未来使用连续手势。

    *   您说您计划“提前预加载视图”。通常，鉴于移动设备的内存容量有限，您会希望比这更保守。也许加载当前视图，以及您可能会在四个方向中的每一个方向上访问的四个视图（以便您可以立即呈现它们），但不要这样做。一旦您到达四个可能的目的地之一，然后继续释放当前无法到达的目的地，并准备好那些可以到达的目的地。*

# wcf - 如何使用 WcfSvcHost.exe 使用两个端点启动主机和启动服务

> ID：14296595
> 
> 赞同：0
> 
> 时间：2013-01-12T18:31:56.173
> 
> 标签：wcf

我有一个带有两个端点的服务。一个端点用于 wsdual 绑定，另一个用于 tcp 绑定。当我使用 wcfsvchost.exe 启动我的 wcf 服务时

```
WcfSvcHost.exe /service:"C:
\Users\TRIDIP\Documents\Visual Studio 2010\Projects\BBAChatService\BBAChatService\bin
\BBAChatService.dll" /config:"C:\Users\TRIDIP\documents\visual studio 2010\Projects
\BBAChatService\BBAChatService\Web.config" 
```

然后我的服务开始了，但它只显示一个 mex 端点。它应该显示两个 mex 端点，因为我在 web.config 文件中声明了两个端点。这是我的配置文件条目。

```
<service name="BBAChatService.ChatService" behaviorConfiguration="BBAChatService.ChatServiceBehavior" >
        <host>
          <baseAddresses>
            <add baseAddress ="http://localhost:8732/ChatService.svc/"/>
            <add baseAddress ="net.tcp://localhost:7998/ChatService/"/>
          </baseAddresses>
        </host>

        <endpoint name="dual_bind"
                  address="dual"
                  binding="wsDualHttpBinding" 
                  bindingConfiguration="WSDualHttpBinding_IChatService" 
                  contract="BBAChatService.IChatService">
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>

        <endpoint name="tcp_bind"
              address="tcp"
              binding="netTcpBinding"
              bindingConfiguration="tcpBinding"
              contract="BBAChatService.IChatService">
        </endpoint>

        <endpoint address="net.tcp://localhost:7996/ChatService/mex"
                          binding="mexTcpBinding"
                          contract="IMetadataExchange"/>

      </service> 
```

配置文件中有什么我想念的吗？请指导我需要做什么，因此 wcfsvchost 将为我的服务显示两个不同的端点。谢谢

# android - 如何完全过滤频率范围android

> ID：14296596
> 
> 赞同：4
> 
> 时间：2013-01-12T18:31:55.860
> 
> 标签：android, audio, signal-processing, fft

我知道`android.media.audiofx.Equalizer`可以增益/降低频带。我需要做的是完全过滤掉一个频率范围。这是用于增益/降低频率的代码：

```
 Equalizer mEqualizer = new Equalizer(0,audioSessionId);
        mEqualizer.setEnabled(true);

        short bands = mEqualizer.getNumberOfBands();
        final short minEQLevel = mEqualizer.getBandLevelRange()[0];
        final short maxEQLevel = mEqualizer.getBandLevelRange()[1];
        mEqualizer.setBandLevel((short) 0, (short) (maxEQLevel));
        mEqualizer.setBandLevel((short) 1, (short) (maxEQLevel));
//the following code wont work because setting levels.lower than minimum level is not acceptable
        mEqualizer.setBandLevel((short) 2, (short) (-1000000)); 
```

如果我的要求是不可能的，那么你会建议什么？从头开始编写 FFT 类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-06T21:38:34.960

Android 的均衡器和过滤器存在严重问题。它们在设备之间不一致（在一些根本不可用的设备上），并且它们可能表现不佳（高 CPU 负载）。

尽管滤波器是 IIR，但陷波或参数滤波器类型可以配置为非常陡峭的切割。在我的联合创始人的 DJ 应用程序 djplayerapp.com 中，他可以使用它们减少 -100 分贝。

文档：[http ://superpowered.com/docs/class_superpowered_filter.html#details](http://superpowered.com/docs/class_superpowered_filter.html#details)

使用 Superpowered Audio SDK，您可以拥有专为移动设备设计的最高性能过滤器，并且它们可以在具有相同音频质量的所有 Android 设备上工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T22:47:12.610

好的，经过大量研究，我发现没有用于 DSP 的本地 FIR 方法，我将不得不使用 android 内置的均衡器或实现我自己的 FIR 滤波器。Android 的均衡器只能过滤频率范围，您无法设置低通滤波器。

# python - 跟踪 PDB 中发出的任意 Python 命令？

> ID：14296603
> 
> 赞同：4
> 
> 时间：2013-01-12T18:32:45.743
> 
> 标签：python, debugging, pdb

我知道我可以使用 PDB 来跟踪一个模块，并且我可以通过在它前面加上一个 ! 从 pdb 执行任意命令。（例如`!"foo".upper()`）。

有没有办法结合这些功能来跟踪在当前上下文中执行的任意命令？例如，这样的事情`step !"foo".upper()"`会让我单步执行该`upper`方法，然后返回到之前的上下文？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T20:02:08.130

采用`pdb.runcall`

```
(Pdb) pdb.runcall(func, *args, **kwds)   # e.g. pdb.runcall(myfunc, arg1, arg2) 
```

并通过 (n 或 s) 单步执行或在其中设置断点

```
(Pdb) b my_module.py:123    # b ([file:]lineno | function) [, condition] 
```

并按“c”运行到断点。

您无法跟踪示例中使用的 str.upper 等内置函数。

**编辑**：您还询问**了当前上下文**：
您可以在当前上下文中使用用户定义的函数评估和调试表达式。例子：

```
pdb.runeval("[myfunc(x) for x in range(3)]", globals(), locals())
# or with ... some_module.globals()) 
```

参数`globals(), locals()`很重要，因为没有它们，表达式将在`__main__`模块上下文中计算，或者如果不使用 locals() 则直接在当前模块上下文中计算，但不会在当前全局和本地上下文中进行计算，就像通常使用`!expression`.

# android - Android 2.3.3 touch by explore

> ID：14296612
> 
> 赞同：0
> 
> 时间：2013-01-12T18:33:38.190
> 
> 标签：android, accessibility, talkback

我正在为盲人社区开发应用程序。我想为用户提供一个选项，让用户通过在屏幕上刮擦手指来探索屏幕（通过触摸进行探索）。我找不到任何 api 来构建此功能。我正在尝试在 android 2.3.3（api 级别 10）中实现这一点。

我知道在 Android 4.1 中默认带有“通过探索触摸”功能的对讲，但我想将此功能提供给使用低于 android 4.1 设备的用户。任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:56:29.107

您可能想尝试使用 Eyes-Free Project 中的[AccessibilityShim](http://code.google.com/p/eyes-free/source/browse/trunk/libraries/widgets/access-shim/src/com/googlecode/eyesfree/widget/AccessibilityShim.java)库。它为 Gingerbread 及以下的单个活动实现了 ICS 风格的触摸探索。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main_activity);

    // This call must occur after setContentView().
    AccessiblityShim.attachToActivity(this);
} 
```

它也可以应用于对话框。

```
AccessiblityShim.attachToDialog(dialog); 
```

# matlab - 如何更改 Simulink 中的默认创建者？

> ID：14296615
> 
> 赞同：1
> 
> 时间：2013-01-12T18:33:50.820
> 
> 标签：matlab, simulink

我的问题是，当我尝试保存 Simulink 模型时，它会给出错误消息，即模型中的某些字符无法使用 Windows-1250 进行编码。它还指定了无效字符所在的行号和字节偏移量，恰好是“Creator：”行，并且无效字符在我的名字中。这是字符“á”。我尝试使用 google 和 matlab 帮助找到解决方案，但找不到更改作者姓名的方法。

谢谢！

编辑：在模型属性中更改我的名字没有帮助，最后修改的行仍然包含我原来的名字。

# jquery - 从输入字段读取 url 查询并将每个 var 放入新的输入字段

> ID：14296617
> 
> 赞同：0
> 
> 时间：2013-01-12T18:34:13.190
> 
> 标签：jquery, url, input

有没有办法可以将输入字段的查询部分拆分为变量，并将其关联值拆分为新的输入字段？

假设我有一个输入字段，例如：

```
<input type="text" name="sUrl" value="http://site.com/index.php?var1=1&var2=1&var3=foo" /> 
```

我想要实现的是 jQuery 将查询变成：

```
<input type="text" name="var1" value="1" />
<input type="text" name="var2" value="1" />
<input type="text" name="var3" value="foo" /> 
```

在 PHP 中，我可以对查询部分进行爆炸，但遗憾的是 php!=jquery，完成此操作的最佳方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:48:25.577

试试这个：

```
<script>
function myfunction() {
    var target = $('body');
    var input = $('#myinput');
    var pathname = input.val();

    pathname = pathname.replace('?','');
    pathname = pathname.split('&');

    $(pathname).each(function() {
        var request = this.split('=');
        $('<input>',{type:'text',name:request[0],value:request[1]}).appendTo(target);
    });

    return false;
}
</script>

<form onsubmit='return myfunction();'>
   <input type='text' id='myinput'>
</form> 
```

替换为`$('body')`您的实际目标和`$('#myinput')`您的输入。

# qt - 在 C++ 中使用 Qt 读取无符号短数组

> ID：14296620
> 
> 赞同：0
> 
> 时间：2013-01-12T18:34:22.220
> 
> 标签：qt, binary

我正在尝试使用 Qt API 读取一组无符号短裤。不幸的是，我没有得到想要的结果。

以下代码

```
 QFile in(fileName);
        int len = in.size();
        QDataStream d(&in);

        quint16 *data = new quint16[len];
        qDebug() << data[0];
        qDebug() << data[1];
        d >> data[0];
        qDebug() << data[0];
        qDebug() << data[1]; 
```

输出

```
 52685 
         52685 
         13109 
         52685 
```

暗示数据仅在第一个数组位置更改。另外，我一直认为数组是零初始化的？在这里使用 a`QByteArray`似乎不起作用，这就是我尝试使用一组`quint16`（=无符号短裤）的原因。使用循环可能是一种选择，但我试图尽可能避免代价高昂的循环。

那么，如何用文件中的所需数据填充所述数组（数据）？是否可以使用 a 携带数据`QByteArray`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T19:18:53.990

首先，`in.size()`以字节为单位返回文件的大小，并且由于您使用的是无符号短裤（每个 2 个字节），因此数据数组的大小应该是`len/2`.

此外，提供 QDataStream 用于序列化目的。这意味着它主要用于一次提取单个对象。[有关详细信息，请参阅QDataStrean](http://doc.qt.digia.com/4.7/qdatastream.html)的文档。

您可以使用以下代码提取整个数组而无需循环或复制：

```
QFile in(fileName);
in.open(QFile::ReadOnly);
QByteArray byteArray = in.readAll();

quint16 *data = (quint16*) byteArray.data(); 
```

如果您只想读取数据但从不修改它，您可以通过将最后一行更改为：

```
const quint16* data = (const quint16*) byteArray.constData(); 
```

但是请记住，使用这个（有些丑陋的）代码，指针只会在 QByteArray 对象的生命周期内有效。这通常意味着您只能使用`data`到函数结束。

如果您希望您的数据持续更长的时间，您必须分配数组并直接读入它：

```
QFile in(fileName);
in.open(QFile::ReadOnly);
int len = in.size();

quint16 *data = new quint16[len/2];
in.read((char*)data, len); 
```

这样，您可以访问数据，直到您`delete[] data`.

最后，要回答您的子问题，只有在全局定义数组时才将数组初始化为零（您甚至不应该依赖它）。出于性能原因，分配有`new`或`malloc`永远不会进行零初始化的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:54:00.847

如果您查看 的文档[`QDataStream`](http://doc.qt.digia.com/qt/qdatastream.html)，您会发现如果您不想使用循环，还有两种其他方法可供您考虑：

*   [`QDataStream::readBytes`](http://doc.qt.digia.com/qt/qdatastream.html#readBytes)- 这将为您分配一个`char[]`缓冲区。或者，
*   [`QDataStream::readRawData`](http://doc.qt.digia.com/qt/qdatastream.html#readRawData)- 这会将数据读入您提供的缓冲区。

这些问题是它们使用`char`（字节），而不是`quint16`你想要的。

我建议使用循环来读取`quint16`s. 这将是最清晰的代码。并且任何可敬的底层流实现都将从硬件预读到缓冲区中，这样您的许多连续`>>`调用就不会那么昂贵。

# c# - Lucene.Net 多次权衡同一个词的描述，得分更高

> ID：14296621
> 
> 赞同：1
> 
> 时间：2013-01-12T18:34:24.843
> 
> 标签：c#, lucene, lucene.net

我试图弄清楚如何为`lucene.net`在 c# 中多次出现相同单词的描述添加更多权重。

示例：
前置条件：

假设我有一个这样的项目列表：

1.  恢复交换
2.  备份交换
3.  exchange是一个非常棒的工具，exchange可以有很多邮箱

设想：

我搜索`exchange`.

该列表将按以下顺序返回：

1.  （它的权重与2相同，并首先添加到索引中）
2.  （它与1具有相同的权重，并且它被添加到第二个索引中）
3.  （里面有交换的参考，但长度大于1和2）

所以我试图`#3`首先出现，因为它在描述中交换了不止一次。

这是一些显示我设置相似度的代码：

```
// set up lucene searcher
            using (var searcher = new IndexSearcher(directory, false))
            {
                var hits_limit = 1000;
                var analyzer = new StandardAnalyzer(Version.LUCENE_29);

                searcher.Similarity = new test();

                // search by single field
                if (!string.IsNullOrEmpty(searchField))
                {
                    var parser = new QueryParser(Version.LUCENE_29, searchField, analyzer);
                    var query = parseQuery(searchQuery, parser);

                    var hits = searcher.Search(query, hits_limit).ScoreDocs;
                    var results = mapLuceneToDataList(hits, searcher);
                    analyzer.Close();
                    searcher.Dispose();
                    return results;
                }
                // search by multiple fields (ordered by RELEVANCE)
                else
                {
                    var parser = new MultiFieldQueryParser
                        (Version.LUCENE_29, new[] { "Id", "Name", "Description" }, analyzer);

                    var query = parseQuery(searchQuery, parser);
                    var hits = searcher.Search
                    (query, null, hits_limit, Sort.RELEVANCE).ScoreDocs;
                    var results = mapLuceneToDataList(hits, searcher);
                    analyzer.Close();
                    searcher.Dispose();
                    return results;
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T21:42:55.403

免责声明：我只能谈论 Lucene（而不是 Lucene.NET），但我相信它们是使用相同的原则构建的。

文档 #1 和 #2 首先出现的原因是字段权重（#1 为 1/2，#2 为 1/2）高于 #3 的 2/11（假设您没有使用停用词）。这里的要点是，前两个文档中的“交换”一词的权重远大于第三个文档中的权重。这就是默认[相似度算法](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/package-summary.html#scoring)的工作原理。实际上，这*有点*复杂，您可以在给定的链接中观察到。

所以你要求的是另一种相似性算法。[这里](http://www.gossamer-threads.com/lists/lucene/java-user/38967)有一个类似的讨论`MySim`，我相信，试图实现接近你想要的东西。只是不要忘记将这个相似性实例设置为索引编写器和搜索器。

# google-chrome - 铬定制

> ID：14296623
> 
> 赞同：2
> 
> 时间：2013-01-12T18:34:33.433
> 
> 标签：google-chrome

我想编辑 chrome 实时 CSS 文件（*C:\Users\YourUsername\AppData\Local\GoogleChromeUser\DataDefaultUser\StyleSheetsCustom.css*）。

有没有办法编辑一个页面的 css 属性？在 Mozilla 中有一种方法，它工作正常：

```
@-moz-document domain("cnn.com"),domain("bbc.com") 
    {
        A:visited { color: #990000 ! important } 
    } 
```

但这在 chrome 中不起作用。如果我将`@-moz-document...`线路更改为`@-webkit-document...`它仍然不起作用。

你可以帮帮我吗？

# firebase - 使用安全规则限制子/字段访问

> ID：14296625
> 
> 赞同：56
> 
> 时间：2013-01-12T18:34:36.157
> 
> 标签：firebase, firebase-realtime-database

我正在编写一个应用程序，允许用户提交提名，这些提名在显示给其他用户之前会经过审核。这需要一些限制，到目前为止，我在使用安全规则方面未能成功实施：

1.  隐藏任何尚未获得批准的提名
2.  隐藏提交时的私有字段（电话、批准状态、创建日期等）

我目前的规则如下：

```
{
    "rules": {
        "nominations": {
            ".read": true,

            "$nominationId": {
                ".read": "data.child('state').val() == 'approved' || auth != null", // Only read approved nominations if not authenticated
                ".write": "!data.exists()", // Only allow new nominations to be created

                "phone": {
                    ".read": "auth != null" // Only allow authenticated users to read phone number
                },

                "state": {
                    ".read": "auth != null", // Only allow authenticated users to read approval state
                    ".write": "auth != null" // Only allow authenticated users to change state
                }
            }
        }
    }
} 
```

子规则（例如`$nomination`）不会阻止从父级读取整个子级。`child_added`如果我在[https://my.firebaseio.com/nominations](https://my.firebaseio.com/nominations)上收听，即使有上述安全规则，它也会愉快地返回所有孩子及其所有数据。

我目前的解决方法是保留一个单独的节点`approved`，并在有人批准或拒绝提名时简单地在列表之间移动数据，但这似乎是一种非常糟糕的方法。

**更新**

根据[Michael Lehenbauer](https://stackoverflow.com/questions/14296625/restricting-child-field-access-with-security-rules/14297061#14297061)的出色评论，我以最小的努力重新实现了最初的想法。

新的数据结构如下：

```
my-firebase
    |
    `- nominations
        |
        `- entries
        |   |
        |   `- private
        |   `- public
        |
        `- status
            |
            `- pending
            `- approved
            `- rejected 
```

每个提名都`entries`与私人数据（例如电话号码、电子邮件等）一起存储在 下，`private`而公开数据则存储在 下`public`。

更新后的规则如下：

```
{
    "rules": {
        "nominations": {
            "entries": {
                "$id": {
                    ".write": "!data.exists()",

                    "public": {
                        ".read": true,
                    },

                    "private": {
                        ".read": "auth != null"
                    }
                }
            },

            "status": {
                "pending": {
                    ".read": "auth != null",

                    "$id": {
                        ".write": "root.child('nominations/entries').child($id).exists() && (auth != null || newData.val() == true)"
                    }
                },

                "approved": {
                    ".read": true,

                    "$id": {
                        ".write": "root.child('nominations/entries').child($id).exists() && auth != null"
                    }
                },

                "rejected": {
                    ".read": "auth != null",

                    "$id": {
                        ".write": "root.child('nominations/entries').child($id).exists() && auth != null"
                    }
                }
            }
        }
    }
} 
```

和 JavaScript 实现：

```
var db = new Firebase('https://my.firebaseio.com')
var nominations = db.child('nominations')

var entries = nominations.child('entries')

var status = nominations.child('status')
var pending = status.child('pending')
var approved = status.child('approved')
var rejected = status.child('rejected')

// Create nomination via form input (not shown)
var createNomination = function() {
    var data = {
        public: {
            name: 'Foo',
            age: 20
        },

        private: {
            createdAt: new Date().getTime(),
            phone: 123456
        }
    }

    var nomination = entries.push()
    nomination.setWithPriority(data, data.private.createdAt)

    pending.child(nomination.name()).set(true)    
}

// Retrieve current nomination status
var getStatus = function(id, callback) {
    approved.child(id).once('value', function(snapshot) {
        if (snapshot.val()) {
            callback(id, 'approved')
        } else {
            rejected.child(id).once('value', function(snapshot) {
                callback(id, snapshot.val() ? 'rejected' : 'pending')
            })
        }
    })
}

// Change status of nomination
var changeStatus = function(id, from, to) {
    status.child(from).child(id).remove()
    status.child(to).child(id).set(true)
} 
```

我正在努力实现的唯一部分是处理状态更改，我目前的方法肯定可以改进：

```
_.each([pending, approved, rejected], function(status) {
    status.on('child_added', function(snapshot) {
        $('#' + snapshot.name()).removeClass('pending approved rejected').addClass(status.name())
    })
}) 
```

我打算使用`child_changed`on`nominations/status`但我无法让它可靠地工作。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-12T22:19:15.820

加藤是对的。重要的是要了解安全规则从不*过滤*数据。对于任何位置，您要么能够读取所有数据（包括其子数据），要么无法读取。因此，就您的规则而言，在“提名”下具有“.read”：true 会否定您的所有其他规则。

所以我在这里推荐的方法是有 3 个列表。一个包含提名数据，一个包含批准的提名列表，一个包含待定提名的列表。

你的规则可能是这样的：

```
{
  "rules": {
    // The actual nominations.  Each will be stored with a unique ID.
    "nominations": {
      "$id": {
        ".write": "!data.exists()", // anybody can create new nominations, but not overwrite existing ones.
        "public_data": {
          ".read": true // everybody can read the public data.
        },
        "phone": {
          ".read": "auth != null", // only authenticated users can read the phone number.
        }
      }
    },
    "approved_list": {
      ".read": true, // everybody can read the approved nominations list.
      "$id": {
        // Authenticated users can add the id of a nomination to the approved list 
        // by creating a child with the nomination id as the name and true as the value.
        ".write": "auth != null && root.child('nominations').child($id).exists() && newData.val() == true"
      }
    },
    "pending_list": {
      ".read": "auth != null", // Only authenticated users can read the pending list.
      "$id": {
        // Any user can add a nomination to the pending list, to be moderated by
        // an authenticated user (who can then delete it from this list).
        ".write": "root.child('nominations').child($id).exists() && (newData.val() == true || auth != null)"
      }
    }
  }
} 
```

未经身份验证的用户可以添加新的提名：

```
var id = ref.child('nominations').push({ public_data: "whatever", phone: "555-1234" });
ref.child('pending_list').child(id).set(true); 
```

经过身份验证的用户可以通过以下方式批准消息：

```
ref.child('pending_list').child(id).remove();
ref.child('approved_list').child(id).set(true); 
```

要呈现已批准和待处理的列表，您可以使用以下代码：

```
ref.child('approved_list').on('child_added', function(childSnapshot) {
  var nominationId = childSnapshot.name();
  ref.child('nominations').child(nominationId).child('public_data').on('value', function(nominationDataSnap) {
    console.log(nominationDataSnap.val());
  });
}); 
```

通过这种方式，您可以将approved_list 和pending_list 用作可以枚举的轻量级列表（分别由未经身份验证和经过身份验证的用户），并将所有实际提名数据存储在提名列表中（没有人可以直接枚举）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-12T19:25:34.507

如果我完全理解安全规则的工作方式（我只是自己学习它们），那么当任何一个规则允许访问时，就会授予访问权限。因此，它们被解读如下：

*   提名“.read”：真实，访问权限
*   其他规则：未读

此外，如果删除该规则，`$nominationId`如果记录被批准，“.read”将授予访问权限；因此，只要它被批准， `.read`in`phone`和就变得多余了。`state`

将其分解为`public/`和`private/`子级可能是最简单的，如下所示：

```
nominations/unapproved/          # only visible to logged in users
nominations/approved/            # visible to anyone (move record here after approval)
nominations/approved/public/     # things everyone can see
nominations/approved/restricted/ # things like phone number, which are restricted 
```

**更新**

仔细考虑一下，我认为您仍然会遇到`approved/`公开的问题，这将允许您列出记录并拥有`approved/restricted/`私有。在此用例中，受限数据可能也需要自己的路径。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-08-03T21:49:12.317

这个线程有点过时了，它可能通过规则有一个解决方案，但正如视频所说，它是一个巧妙的技巧： [https ://youtu.be/5hYMDfDoHpI?t=8m50s](https://youtu.be/5hYMDfDoHpI?t=8m50s)

这可能不是一个好习惯，因为 firebase 文档说规则不是过滤器： [https ://firebase.google.com/docs/database/security/securing-data](https://firebase.google.com/docs/database/security/securing-data)

我不是安全专家，但我测试了这个技巧，它对我来说效果很好。:)

所以我希望能更好地理解围绕这个实现的安全问题。

# c - 在 C 中解释这个“静态变量”的行为

> ID：14296626
> 
> 赞同：-4
> 
> 时间：2013-01-12T18:34:40.097
> 
> 标签：c, debugging, static-variables

我正在阅读“hacking, The Art of Exploitation”一书，这个代码示例真的让我很困惑。

它在全局变量范围的上下文中：

```
#include <stdio.h>

void function() { // An example function, with its own context
    int var = 5;
    static int static_var = 5; // Static variable initialization
    printf("\t[in function] var = %d\n", var);
    printf("\t[in function] static_var = %d\n", static_var);
    var++; // Add one to var.
    static_var++; // Add one to static_var.
}

int main() { // The main function, with its own context
    int i;
    static int static_var = 1337; // Another static, in a different context
    for(i=0; i < 5; i++) { // Loop 5 times.
        printf("[in main] static_var = %d\n", static_var);
        function(); // Call the function.
    }
} 
```

这是输出：

```
reader@hacking:~/booksrc $ gcc static.c
reader@hacking:~/booksrc $ ./a.out
[in main] static_var = 1337
    [in function] var = 5
    [in function] static_var = 5
[in main] static_var = 1337
    [in function] var = 5
    [in function] static_var = 6
[in main] static_var = 1337
    [in function] var = 5
    [in function] static_var = 7
[in main] static_var = 1337
    [in function] var = 5
    [in function] static_var = 8
[in main] static_var = 1337
    [in function] var = 5
    [in function] static_var = 9
reader@hacking:~/booksrc $ 
```

问题是，为什么`[in function] var = 5`保持稳定？我们定义`var++;`了以及`static_var++;`在局部函数内。怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T18:36:40.763

之后

```
var++; 
```

在 中`function()`，不再使用该局部变量。当函数返回时，它超出范围并不再存在。`function()`下次调用时，分配一个新的`var`并初始化为`5`.

这两个`static_var`s具有静态存储持续时间，它们存在于程序的整个生命周期中。对这些的任何修改都会持续存在，并且它们只会被初始化一次。

因此，当`function()`下次调用时，前一次调用中完成的增量仍然有效，除了第一次调用外，不会执行初始化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T18:36:16.583

因为`var`不是静态的。每次调用该函数时，它都是一个不同的实例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T18:38:32.320

这正是静态变量与非静态变量的区别所在。静态变量具有静态存储持续时间，这意味着该变量在程序运行期间*保持活动状态。*非静态变量具有自动存储期限；这意味着它将在创建它的范围的末尾消失（在这种情况下，在 的末尾`function`）。释放变量后，下次调用该函数时，将创建该变量的新实例。

# java - Java中的优先级信号量

> ID：14296634
> 
> 赞同：2
> 
> 时间：2013-01-12T18:35:11.537
> 
> 标签：java, multithreading

我有一个多线程程序，每个线程计算两个数字的 GCD 并打印出结果。我现在遇到的问题是我必须按升序打印结果。我不知道该怎么做。这是学校作业。我们不允许使用任何额外的线程对结果和输出进行排序，也不能在主线程中进行打印。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T18:49:48.857

我了解您需要按升序打印 GCD。

如果是这种情况，您可以根据需要简单地生成尽可能多的线程并将结果放入共享集合中，然后在所有其他生成的线程完成后从其中一个线程中打印集合。

例如，让第一个线程启动其他线程，然后加入并打印。或者您可以使用 CountDownLatch 来了解集合何时已满。

确保集合是线程安全的或受锁保护。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T20:15:30.053

*由于您希望对结果进行排序，一个事实是显而易见的：在收集所有*结果之前，您不能这样做。

更重要的是，一些数字可能会返回相同的 GCD（9 和 3、18 和 3）......

由于不清楚您可以使用什么，这里有一个使用 Java 的示例实现`FutureTask`（而且`Callable`，我们必须这样做）

请注意，没有异常检查或任何东西，因此不适合任何生产目的......它甚至遵守“也不能在主线程中进行打印”的约束。

```
public final class GCDExcercise
{
    /*
     * Method returning a Callable<Integer>. The .call() implementation returns
     * the GCD of the two numbers given as arguments. Left to implementers.
     *
     * n1 and n2 MUST be declared final, as they are used from an anonymous
     * class returned from that function.
     */
    private static Callable<Integer> gdc(final int n1, final int n2)
    {
        return new Callable<Integer>()
        {
            @Override
            public Integer call()
            {
                // Calculate gdc of n1 and n2 here, return it
            }
        };
    }

    /*
     * One worker. The only thing it does is delegate calculation to the task
     * above, we let FutureTask handle the rest (and there is a lot).
     */
    private static class GCDComputation
        extends FutureTask<Integer>
    {
        GCDComputation(int n1, int n2)
        {
            super(gdc(n1, n2));
        }
    }

    /*
     * IMPLEMENTATION SPECIFIC. Here, Guava's ImmutableList is used to return a
     * very small subset of values. In "real life", will return something from
     * a file or something else. Left as an exercise to the reader.
     */
    private static Collection<GCDComputation> getComputations()
    {
        // Shuffle, add, etc -- results will be consistent anyway
        return ImmutableList.of(
            new GCDComputation(18, 17), // 1
            new GCDComputation(12, 3),  // 3
            new GCDComputation(9, 180), // 9
            new GCDComputation(8921830, 989280), // 10
            new GCDComputation(8723, 982) // 1
        );
    }

    // Main program, with obligatory throws
    public static void main(String... args)
        throws ExecutionException, InterruptedException
    {
        // Our list of threads
        List<GCDComputation> threads = new ArrayList<GCDComputation>();

        /*
         * Add each FutureTask to the list -- and run it. We MUST do so, since
         * those are not daemon threads.
         */
        for (GCDComputation result: getComputations()) {
            threads.add(result);
            result.run();
        }

        /*
         * Collect the list of result: create the list, add elements to it, and
         * sort it.
         */
        final List<Integer> ret = new ArrayList<Integer>();

        for (final GCDComputation result: threads)
            ret.add(result.get());

        Collections.sort(ret);

        /*
         * Print results! In a separate thread since this is what is asked...
         */
        new Runnable() {
            @Override
            public void run()
            {
                for (int i : ret)
                    System.out.println(i);

            }
        }.run();

        // Outta here 
        System.exit(0);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T19:34:11.627

计算 GCD，然后按 GCD secs 休眠线程

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T00:32:43.717

根据您问题的标题，如果不是其措辞，听起来您需要使用计数信号量。您可以使用每个线程的 GCD 值作为其倒计时值来做一些聪明的事情。留给读者练习的细节:-)

# java - 如何在 java 中将字符串复制到系统剪贴板？

> ID：14296638
> 
> 赞同：0
> 
> 时间：2013-01-12T18:35:48.097
> 
> 标签：java, swing, awt, clipboard

我有一个`JTextArea`并且想要一个按钮，单击该按钮时会将其全部内容复制`JTextArea`到`System`剪贴板，以便我可以在任何其他程序中执行 Ctrl-V。我试过这个，但没有运气。这是我尝试过的一个例子：

```
StringSelection stringSelection = new StringSelection("This is a clipping");
Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();
clipboard.setContents( stringSelection, null ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T18:44:28.043

`ClipBoard`需要[ClipboardOwner](http://docs.oracle.com/javase/7/docs/api/java/awt/datatransfer/ClipboardOwner.html)才能使复制操作生效。这个接口通常由当前的“粘贴”类实现：

```
clipboard.setContents( stringSelection, myClipboardOwner); 
```

[例子](http://www.javapractices.com/topic/TopicAction.do?Id=82)

# c# - 如何使用线程或计时器从 WPF 客户端应用程序定期执行方法

> ID：14296644
> 
> 赞同：11
> 
> 时间：2013-01-12T18:36:17.023
> 
> 标签：c#, wpf, multithreading, timer, client-applications

我正在开发一个`WPF`客户端应用程序。这个应用程序会定期将数据发送到`webservice`. 当用户登录到应用程序时，我希望每 5 mts 运行一次特定方法以将数据发送到`.asmx`服务。

我的问题是我是否需要使用线程或计时器。此方法执行应该在用户与应用程序交互时发生。即在此方法执行期间不阻塞 UI

有什么要找的资源吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-12T19:40:04.840

我会推荐`System.Threading.Tasks`使用新`async/await`关键字的命名空间。

```
// The `onTick` method will be called periodically unless cancelled.
private static async Task RunPeriodicAsync(Action onTick,
                                           TimeSpan dueTime, 
                                           TimeSpan interval, 
                                           CancellationToken token)
{
  // Initial wait time before we begin the periodic loop.
  if(dueTime > TimeSpan.Zero)
    await Task.Delay(dueTime, token);

  // Repeat this loop until cancelled.
  while(!token.IsCancellationRequested)
  {
    // Call our onTick function.
    onTick?.Invoke();

    // Wait to repeat again.
    if(interval > TimeSpan.Zero)
      await Task.Delay(interval, token);       
  }
} 
```

然后你会在某个地方调用这个方法：

```
private void Initialize()
{
  var dueTime = TimeSpan.FromSeconds(5);
  var interval = TimeSpan.FromSeconds(5);

  // TODO: Add a CancellationTokenSource and supply the token here instead of None.
  RunPeriodicAsync(OnTick, dueTime, interval, CancellationToken.None);
}

private void OnTick()
{
  // TODO: Your code here
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-12T18:41:59.787

你需要使用`Timer`类。有多个内置计时器，这取决于使用哪个计时器的要求。

1.  [System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)：这个更适合多线程访问。此计时器的实例是线程安全的。

2.  [System.Threading.Timer](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)：此计时器的实例不是线程安全的。

3.  [System.Windows.Threading.DispatcherTimer](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx) -> 它将事件发送到`Dispatcher`线程（并且不是多线程的）。如果您需要更新 UI，这很有用。

4.  [System.Windows.Forms.Timer](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx) -> 此计时器在 UI 线程中引发事件。这是针对 Windows 窗体优化的，不能在 WPF 中使用。

以下是有趣的阅读。
[比较 .NET Framework 类库中的计时器类](http://msdn.microsoft.com/en-us/magazine/cc164015.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T18:39:06.623

如果您希望该方法在与 UI 线程不同的线程上执行，请使用`System.Threading.Timer`. 否则（但我不认为这是你的情况），使用`System.Windows.Threading.DispatcherTimer`.

# css - 用于 moz 浏览器的 CSS -webkit- 透视属性

> ID：14296648
> 
> 赞同：0
> 
> 时间：2013-01-12T18:36:45.233
> 
> 标签：css, cross-browser, transformation, mozilla

使用 CSS3 变换和过渡，我创建了一个翻转动画。

Moz 无法识别透视 CSS3 属性，因此不会像使用 webkit 那样在 3D 中翻转。

反正有没有做`-moz`翻转`-webkit`

样本：：

[http://jsfiddle.net/L9wDd/91/](http://jsfiddle.net/L9wDd/91/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T18:47:14.423

我刚刚更新到 Firefox 18 并将其应用于`px`属性`-moz-perspective`，并获得了与 Chrome 相同的效果：

```
.container {
    position:relative; display:block;
    -webkit-perspective:1000px; -moz-perspective:1000px;
} 
```

您也可以应用标准`perspective`属性，这也会产生相同的效果。

```
 perspective: 1000px; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T18:42:32.847

您不需要`-moz`属性透视图中的前缀。请注意，它仅适用于 Firefox 10+。您可以在以下链接中看到适用于 Firefox 的示例：[https](https://gist.github.com/4346505) ://gist.github.com/4346505 。

# windows-phone-7 - PositionChanged 事件在应用程序重新启动时提供旧的位置详细信息

> ID：14296650
> 
> 赞同：0
> 
> 时间：2013-01-12T18:36:48.703
> 
> 标签：windows-phone-7, windows-phone-8, bing-maps

我有以下代码可以正常工作，只是它提供了重新启动应用程序时跟踪的最后位置详细信息。

在我单击 btnGetLocationDetails 按钮 2 或 3 次后，它会提供正确的位置详细信息。知道如何解决此问题，以便每次启动应用程序时，用户都无需单击此按钮 2 或 3 次即可获得正确的当前位置？

代码：

```
public partial class MainPage : PhoneApplicationPage
{

    GeoCoordinateWatcher watcher = null; 
    Location location=null;

    private void btnGetLocationDetails_Click_1(object sender, RoutedEventArgs e)
    {
        watcher = new GeoCoordinateWatcher(GeoPositionAccuracy.High);
        if (watcher.Permission == GeoPositionPermission.Granted)
        {
            watcher.MovementThreshold = Convert.ToDouble("100");
        }
        watcher.PositionChanged += new EventHandler<GeoPositionChangedEventArgs<GeoCoordinate>(watcher_PositionChanged);

        //   PositionChanged events occur whenever your position changes     
        watcher.StatusChanged += new EventHandler<GeoPositionStatusChangedEventArgs>(watcher_OnStatusChanged);
        watcher.Start();
   }

   void watcher_PositionChanged(object sender, GeoPositionChangedEventArgs<GeoCoordinate> e)
   {
        //get the coordinates
        location = new Location();
        location.Latitude = e.Position.Location.Latitude;
        location.Longitude = e.Position.Location.Longitude;
        location.Altitude = e.Position.Location.Altitude;
   }

   void watcher_OnStatusChanged(object sender, GeoPositionStatusChangedEventArgs e)
   {            
        if (e.Status == GeoPositionStatus.Disabled)
           MessageBox.Show("The location service is turned off.");
        else if (e.Status == GeoPositionStatus.NoData)
     MessageBox.Show("No location data is available. ");
   }       
 } 
```

# c - c函数不返回结果

> ID：14296651
> 
> 赞同：2
> 
> 时间：2013-01-12T18:37:05.933
> 
> 标签：c, function, return

我最近开始学习 C，所以我意识到我的问题是非常基础的，但任何帮助将不胜感激。

我试图让函数 fact 将 res 值返回给 main，但是当我在 main 中打印出结果时，我只得到 0。通过插入一些打印语句，我可以看到 res 在 fact 例程中正确计算，但是结果没有正确返回到 main。

我确定我在这里遗漏了一些非常基本的东西。

谢谢

```
#include <stdio.h>

unsigned long fact (int n){
    unsigned long res = 1;

    while ( n >= 0 )
    {
        res *= n;
        n--;
    }

    return res;
}

int main (void){
    int n;
    unsigned long res;

    printf("Insert number:\n");
    scanf("%d", &n );

    res = fact (n);

    printf("The factorial number is %lu", res);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T18:39:25.000

您的循环条件是`n >= 0`，这意味着`res`在函数返回之前将乘以 0。因此结果将始终为 0。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-12T18:40:00.603

你的循环条件是错误的。最后一次运行`while (n>=0)`将有`n=0`。乘以`res`它会将其重置为 0。

您可以通过将循环更改为来解决此问题`while (n > 1)`

为了将来参考，您可以使用调试器（例如 GDB 或 Visual Studio Express）调查此类问题。或者通过`printf`在代码中添加语句来跟踪流程，并查看`res`程序中的值是如何变化的。

# node.js - 内存存储中的expressjs

> ID：14296652
> 
> 赞同：1
> 
> 时间：2013-01-12T18:37:09.133
> 
> 标签：node.js, express

我正在寻找一个示例程序/说明如何在 express 中使用内存存储。我想存储有效用户的 sessionid，这样我就不需要重复进行身份验证。我知道，因为它在内存中，所以数据在重新启动时消失了。

请告诉我 ..

# git - 寻找一种方法来计算两次提交之间未更改的行数

> ID：14296657
> 
> 赞同：2
> 
> 时间：2013-01-12T18:37:39.807
> 
> 标签：git, version-control, diff

我正在开发一个受旧版权保护的项目，我正在努力提出一个放弃版权的好案例，因为多年来该项目发生了重大变化。

（别担心，不偷东西，我正在收集一个案例让版权所有者同意我的观点）。

因此，真正有帮助的是准确统计项目的两个版本之间没有变化的内容。

我正在使用 git，但我无法找到解决方案..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T20:27:48.197

我找到了一种方法，但它不是本机 git。它使用标准的**diff**命令和 bash 扩展。反正

如果对于一个文件，您可能需要编写脚本来为每个文件执行此操作。它不处理文件重命名，它依赖命令 diff 来整理差异。

*获取文件originalfile*的原始行数。在我的示例中，原始文件只有两次提交，但任何 refspec 都可以，也许确切的哈希值是最好的。

```
git show HEAD^^:originalfile | wc 
```

然后用这条神奇的线得到仍然没有改变的线数

```
diff --unchanged-group-format='%<' --old-group-format='' --new-group-format='' --changed-group-format='' <(git show HEAD^^:original_file) <(git show HEAD:original_file) | wc 
```

我会解释的。首先，我们将未更改组格式的格式设置为实际行 (%<) 并将所有其他组（旧的、新的和更改的）设置为空（甚至不是新行）。

然后我们使用 bash 扩展名 <(command) 首先将原始版本通过管道传输，然后将文件的当前版本通过管道传输到 diff。也可以比较两个结帐。它通过管道传输到**wc**以计算行数。

更改的行数只是我们已经得到的减法。

# python - 循环 Python 拆分函数

> ID：14296658
> 
> 赞同：0
> 
> 时间：2013-01-12T18:37:39.920
> 
> 标签：python

我正在尝试从文本文件中的大量域列表中删除子域。该脚本有效，但仅适用于列表中的最后一个域。我知道问题出在循环中，但无法查明确切的问题。感谢您的帮助:)

```
with open ("domainlist.txt", "r") as datafile:
s = datafile.read()
for x in s:
    t = '.'.join(s.split('.')[-2:])

print t 
```

这将采用“example.test.com”和“return test.com”。唯一的问题是它不会对列表中的每个域都执行此操作 - 只有最后一个域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:39:47.850

您在每次循环迭代中覆盖 t，因此自然只有最后一次迭代的值保留在 t 中。而是将字符串放入带有 list.append 的列表中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T18:40:06.120

您想要的是通过修改旧列表的元素来构建一个新列表，幸运的是，Python 具有[列表理解](http://www.youtube.com/watch?v=pShL9DCSIUw)- 非常适合这项工作。

```
with open("domainlist.txt", "r") as datafile:
    modified = ['.'.join(x.split('.')[-2:]) for x in datafile] 
```

这与创建列表并在 for 循环中向其中添加项目的行为完全相同，除了更快更好地阅读。我建议观看上面链接的视频，以获取有关如何使用它们的更多信息。

请注意，`file.read()`将整个内容作为一个大字符串读取，您想要的可能是循环遍历文件的行，这只是通过循环遍历文件本身来完成。您当前的循环循环文件的各个*字符*，而不是行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T18:54:40.920

试试这个。更好的可读性。

```
with open ("domainlist.txt", "r") as datafile:
s = datafile.readlines()

t = []

for x in s:
    t.append('.'.join(x.split('.')[-2:]))

print t 
```

# jquery - 为 div 居中的所有边添加指针箭头类

> ID：14296664
> 
> 赞同：0
> 
> 时间：2013-01-12T18:38:14.800
> 
> 标签：jquery, html, css

我想向我的 div 添加箭头，类似于您在工具提示上看到的那样，我需要可以添加到主 div 的单独类，然后将箭头放在 div 的中心，左、右、顶部或底部。

无论 div 的宽度/高度如何，我都需要将箭头居中。

这是我到目前为止所拥有的：http: [//jsfiddle.net/hRMgk/1/](http://jsfiddle.net/hRMgk/1/)

小提琴上的完整 CSS、HTML 和 jQuery

```
<div id="theHover" class="therequest">
 <div class="noprint">
    <button  id="closetheHover">Close Window</button>
 </div>
        You need to start here on the website.
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T19:21:54.107

我认为您在谈论聊天气泡中的三角形，这在许多应用程序中非常常见...这是我认为您感兴趣的小提琴[链接..我刚刚将其添加到您的 css 中：](http://jsfiddle.net/Cg7k9/)

```
 #theHover.arrow::before
 {
content:'';
position:absolute;
left:50%;
top:100%;
border:12px solid black;
border-color:Blue transparent transparent transparent;
}
#theHover.arrow::after{
content:'';
position:absolute;
left:51%;
top:100%;
border:10px solid black;
 border-color:white transparent transparent transparent; 
} 
```

这基本上是通过使用 CSS 中的 before content 和 after content 属性来完成的......您可以从这个[网站](http://forrst.com/posts/How_to_Make_a_Pure_CSS_Speech_Bubble_With_a_Drop-PU1)获得更多信息......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T19:30:43.390

凯利先生，

在 CSS 中添加代码 (#hover)

```
 text-align:center;
    margin-top:auto;
    margin-bottom:auto; 
```

检查此链接[http://jsfiddle.net/hRMgk/18/](http://jsfiddle.net/hRMgk/18/)

祝你好运 ！

# joomla2.5 - 重定向菜单中的外部链接，使其在模板的位置而不是在新选项卡中打开

> ID：14296667
> 
> 赞同：0
> 
> 时间：2013-01-12T18:38:32.503
> 
> 标签：joomla2.5

我只是写了一个 php 文件，然后我把它放在网站的文件管理器中，这样你就可以使用这样的 url 访问它：[http](http://www.eatwizard.com/project081113/) ://www.eatwizard.com/project081113/ ... select.php

现在我在主页面的菜单中创建了一个链接，我想将页面传递到大型机（到模板的位置），而不是在新选项卡中打开链接，任何关于如何更改的想法它？谢谢！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:27:57.923

您应该使用标签的“目标”属性。

句法 ：

```
<a target="_blank|_self|_parent|_top|framename"> 
```

在您的情况下，请指定目标框架名。

例如 ：

```
<a target="my_rightupper_frame" href="http://....." >Here's a link</a> 
```

查看详情：[http ://www.w3schools.com/tags/att_a_target.asp](http://www.w3schools.com/tags/att_a_target.asp)

# php - CakePHP：元素或助手

> ID：14296672
> 
> 赞同：0
> 
> 时间：2013-01-12T18:39:01.200
> 
> 标签：php, cakephp

我正在使用 CakePHP (2.2.x) 构建一个博客，博客的一部分是侧边栏。像 wordpress 这样的侧边栏，其中包含最近的帖子、档案和元数据。我不确定是否应该为侧边栏使用元素或助手。

目前我正在使用一个元素。一些代码片段：

**控制器/PostsController.php**

```
public function index() {
    $this->set('posts', $this->Post->find('all'));
}

public function show($id) {
    $this->set('posts', $this->Post->find('all'));
    $this->set('post', $this->Post->findById($id));
} 
```

**查看/帖子/index.ctp**

```
<div class="span8">
    <?php foreach ($posts as $post) { ... } ?>
</div>
<?php echo $this->element('sidebar', array('posts' => $posts)); ?> 
```

**查看/帖子/show.ctp**

```
<div class="post">
   ... render the post using $post ...
</div>
<?php echo $this->element('sidebar', array('posts' => $posts)); ?> 
```

**查看/元素/sidebar.ctp**

```
<?php foreach ($posts as $post) { ... render the recent posts ... } ?> 
```

如您所见，两者`show.ctp`和`index.ctp`包含`sidebar.ctp`元素都需要`$posts`变量。所以我需要同时调用`$this->Post->find('all')`和`index`操作`show`。我`$this->Post->find('all')` **只想打一次**电话，我想知道使用 Helpers 是否可以提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:18:38.413

你会想要使用`requestAction()`：

> 您可以使用 requestAction() 充分利用元素。requestAction() 函数从控制器操作中获取视图变量并将它们作为数组返回。这使您的元素能够以真正的 MVC 风格执行。创建一个控制器动作，为你的元素准备视图变量，然后在 element() 的第二个参数中调用 requestAction() 来为元素提供来自控制器的视图变量。

你可以在这里阅读更多关于它们的信息：http: [//book.cakephp.org/2.0/en/views.html#passing-variables-into-an-element](http://book.cakephp.org/2.0/en/views.html#passing-variables-into-an-element)

基本上，您只需指定您希望元素在何处检索其数据。当元素加载时（无论在哪个页面上），它将运行指定的操作来检索您希望它拥有的任何数据。

# c++ - 将 Visual Studio“Watch”与 ref 类引用一起使用

> ID：14296678
> 
> 赞同：1
> 
> 时间：2013-01-12T18:39:39.340
> 
> 标签：c++, windows-8, windows-phone-8, c++-cx

我正在尝试使用 VS2012 调试 Windows Phone 8 本机应用程序。

我已经将事件处理程序连接到*PointerPressed*事件。

当试图查看传递给处理函数的*参数*时，我看不到编辑器中的任何成员作为工具提示，或者在 Watch 窗口中：

![在此处输入图像描述](../Images/14d7145a59f4f3ee450834313f10fbb0.png)

有没有办法查看这些论点？在体裁中，这是 ref 类类型参数的问题吗？

# c# - 使用 FileUpload 控件上传文件时遇到 System.IO.FileNotFoundException

> ID：14296682
> 
> 赞同：1
> 
> 时间：2013-01-12T18:39:54.677
> 
> 标签：c#, asp.net, file, file-upload, filenotfoundexception

我有以下代码用于将图像上传到我的网站。图像首先上传到一个临时文件夹，然后在新图像上传到主图像文件夹后调整大小。

```
FileUpload1.SaveAs(Server.MapPath("~/TEMP/tmpimg.jpg"));
System.Drawing.Image originalImage = System.Drawing.Image.FromFile(Server.MapPath("~/TEMP/tmpimg.jpg"));
System.Drawing.Image MainImg = new SPCL().ResizeImage(originalImage, 700, 600, false);
MainImg.Save(Server.MapPath("~/Images/Home/Home1.jpg")); 
```

这给出了以下例外：

```
System.IO.FileNotFoundException: C:\site\wwwroot\TEMP\tmpimg.jpg at System.Drawing.Image.FromFile(String filename, Boolean useEmbeddedColorManagement) at Settings.saveImages() at Settings.saveSettings()
at System.Drawing.Image.FromFile(String filename, Boolean useEmbeddedColorManagement) at Settings.saveImages() at Settings.saveSettings() 
```

我已经在文件夹上设置了所有写权限，甚至尝试在网站的所有文件夹上启用所有权限（当我被激怒时；））

错误出现在这一行`System.Drawing.Image.FromFile(Server.MapPath("~/TEMP/tmpimg.jpg"));`

未在指定路径创建文件。请任何人知道为什么会发生这种情况，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T19:26:42.163

我不确定您为什么要从 FileUpload.SaveAs() 方法对名称或文件进行硬编码尝试这样的事情

```
FileUpload1.SaveAs(Path.Combine(Server.MapPath("~/TEMP/"), FileUpload1.FileName)); 
```

如果服务器根目录上有一个文件夹..您需要将其添加到 Temp/someFolderName/ 尝试设置一个虚拟目录以及写入该文件夹。

你也可以这样

```
FileUpload1.PostedFile.SaveAs(Path.Combine(Server.MapPath("~/TEMP/"), FileUpload1.FileName)); 
```

[HttpPostedFile类](http://msdn.microsoft.com/en-us/library/system.web.httppostedfile%28v=vs.100%29.aspx)

从 MSDN 引用，这已经过测试，因此您可以遵循类似的内容。请记住，如果此代码不起作用，则可能是您的权限问题。

```
protected void Page_Load(object sender, EventArgs e)
{
    if(IsPostBack)
    {
        Boolean fileOK = false;
        String path = Server.MapPath("~/UploadedImages/");
        if (FileUpload1.HasFile) 
        {
            String fileExtension = 
                System.IO.Path.GetExtension(FileUpload1.FileName).ToLower();
            String[] allowedExtensions = 
                {".gif", ".png", ".jpeg", ".jpg"};
          for (int i = 0; i < allowedExtensions.Length; i++)
          {
               if (fileExtension == allowedExtensions[i])
               {
                    fileOK = true;
               }
          }
        }

        if (fileOK)
        {
            try
            {
                FileUpload1.PostedFile.SaveAs(path 
                    + FileUpload1.FileName);
                Label1.Text = "File uploaded!";
            }
            catch (Exception ex)
            {
                Label1.Text = "File could not be uploaded.";
            }
        }
        else
        {
            Label1.Text = "Cannot accept files of this type.";
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T12:10:32.800

好吧，我终于找到了解决问题的方法。并发布答案，希望它可以在将来解决其他人的同样问题。

**我通过删除包含 FileUpload Control 的更新面板解决了这个问题**。

您也可以通过文件上传查看此链接[更新面板](https://stackoverflow.com/questions/7042632/update-panel-with-file-upload)[Refered by: Shadow Wizard] 以在不删除更新面板的情况下解决此问题。

# php - 我应该使用 htmlentities 还是 mysql_real_escape_string

> ID：14296687
> 
> 赞同：-4
> 
> 时间：2013-01-12T18:40:05.970
> 
> 标签：php, mysql, sql, html-entities

我只是将用户数据传递到 SQL 数据库并仅为管理员视图收集数据，我使用 mysql_real_escape_string() 来转义数据，今天有人告诉我 htmlentities 更好用，我一直听到相反的声音。可以和我一起深入一点。另外作为一个旁注，如果有人可以为 PDO 提供一个非常好的教程，那就太好了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:45:52.573

两者做完全不同的事情。一个转义数据以放入 SQL 语句（这通常很糟糕：请参阅[http://bobby-tables.com](http://bobby-tables.com)），另一个转义数据以放入 HTML 文档。你基本上是在问“我应该用勺子还是叉子？”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:45:18.403

htmlentities 不会去掉引号，所以我建议不要使用它。

# c# - 从不同的表单访问控件

> ID：14296690
> 
> 赞同：-5
> 
> 时间：2013-01-12T18:40:16.797
> 
> 标签：c#, winforms, controls

我有一个带有一些按钮、文本框、标签等的主表单。在第二个表单上，我想将主表单文本框中的文本复制到第二个表单上。

试过：

```
var form = new MainScreen();
TextBox tb= form.Controls["textboxMain"] as TextBox;
textboxSecond.Text = tb.Text; 
```

但这只会导致异常。主屏幕文本框已初始化并包含文本。当我将鼠标悬停在上面时，`form`我可以看到所有控件都在那里。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:55:56.100

凤凰重生是正确的。问题是您正在创建一个新的 MainScreen，这意味着创建了新控件，因此除非控件中的文本在表单构造函数中初始化，否则它们将为空。通常，处理这种情况的方法是将第一个表单实例传递给第二个表单，如下所示：

```
SecondForm second = new SecondForm(this); 
```

在第二种形式中：

```
public SecondForm (MainForm form)
{
    // do something with form, like save it to a property or access it's controls
} 
```

这样，第二个表单将可以访问第一个表单的控件。您可能会考虑将需要使用的属性设为公共（在设计器属性窗格中）。这样你就可以做到`form.textboxMain.Text`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T19:18:39.117

查看原始代码，`NullReferenceException`您得到的可能有两个原因。首先，`tb`在您提供的代码中没有定义，所以我不确定那是什么。

其次，如果控件未`TextBox textbox = form.Controls["textboxMain"] as TextBox`找到*或*不是. 默认情况下，控件标记有访问器，这使我怀疑它会返回成员。`null`*`TextBox``private``form.Controls[...]``null``private`*

 *虽然将控件标记为`internal`可能会解决此问题，但这确实不是解决这种情况的最佳方法，并且只会导致将来不良的编码习惯。`private`控件上的访问器非常好。

在表单之间共享数据的更好方法是使用`public`属性。例如，假设您`TextBox`在主屏幕上有一个调用`usernameTextBox`并希望将其公开公开给其他表单：

```
public string Username
{
  get { return usernameTextBox.Text; }
  set { usernameTextBox.Text = value; }
} 
```

那么您在代码中所要做的就是：

```
var form = new MainForm();
myTextBox.Text = form.Username; // Get the username TextBox value
form.Username = myTextBox.Text; // Set the username TextBox value 
```

这个解决方案的重要之处在于，您可以更好地控制通过属性存储数据的方式。您的`get`和`set`操作可以包含逻辑、设置多个值、执行验证和各种其他功能。

如果您使用的是*WPF*，我建议您查看*MVVM*模式，因为它允许您对对象状态进行类似操作。*

# javascript - 无论我使用什么 CSS，画布 onmousedown 都会导致文本光标

> ID：14296691
> 
> 赞同：2
> 
> 时间：2013-01-12T18:40:17.640
> 
> 标签：javascript, css, html, canvas, dhtml

有趣的故障。事实证明，如果您尝试使用 CSS 设置光标样式（例如隐藏或使用十字光标），当您触发`onmousedown`事件时，光标将更改为文本光标。

这是我注意到这一点的实验中的代码片段：

```
mouse=[[0,0],false];
snap_mouse_by=10;
canvas.onmousedown=function(evt){
    var X=evt.clientX,Y=evt.clientY;
    mouse[0]=[X-X%snap_mouse_by,Y%Y-snap_mouse_by];
    //set mouse coordinates
    mouse[1]=true;
    //set mouse is down to true
} 
```

与此同时，一个自执行函数会运行并检查鼠标坐标以及鼠标是否按下。根据这些数据，它绘制了一个框。

当然，当我点击鼠标按钮时，光标的样式会变为文本，而不是什么都不做。

这个问题不用回答，答案如下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:40:17.640

我做了一个快速的谷歌搜索，看看我是否做错了 CSS，或者是否有记录的错误。

我什么也没找到，但后来有了一个看起来应该很明显的想法。

```
canvas.onmousedown=function(evt){
    ...
    evt.preventDefault();
    return false;
} 
```

我测试了它是否是导致 CSS 不一致的浏览器功能，它就像一个魅力，我现在可以完全控制光标的样式。

[这是链接](http://codesocialist.com/#/?s=cj)，如果有人好奇。

只是想我会分享这个，以防其他人遇到这个故障。

# asp.net - ASP.NET MVC Entity Framework - 实体更新 - 用空值覆盖数据库值

> ID：14296695
> 
> 赞同：2
> 
> 时间：2013-01-12T18:40:33.700
> 
> 标签：asp.net, asp.net-mvc, entity-framework

我目前正在寻找一种设计模式，或者说是一种最佳实践，用于实现使用实体框架 5 和代码优先方法`Repository<Entity>.Update()`的应用程序的方法。`ASP.NET MVC 4`

**问题：** 我遇到的问题是，当从数据库中查询实体并显示在视图上时，它可能没有填充所有属性。因此，当`repository.Update(entity)`调用该方法时，传递给该`Update()`方法的实体可能具有具有空值的未绑定属性。但是，它们可能在数据库中有一些值。作为`Customer.Misc`下面代码中的示例。

所以问题就来了。根据这种方法，所有未绑定在视图上的属性在第一次`Update()`方法调用后在数据库中设置为 Null。

```
class Customer
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Misc { get; set; }
}

[HttpGet]
public ActionResult Update(int id)
{
    Repository<Customer> repo = new Repository<Customer>();
    return View(repo.GetById(id)); // View only binds Customer.Name
}

[HttpPost]
public ActionResult Update(Customer customer)
{
    Repository<Customer> repo = new Repository<Customer>();
    repo.Update(customer); // Customer.Misc is null
    ...
}

public void Update(TEntity entity)
{
    var entry = DbContext.Entry<TEntity>(entity);
    if (entry.State == EntityState.Detached)
    {
        ObjectContext.ApplyCurrentValues(EntitySetName, entity);
    }
    DbContext.SaveChanges();
} 
```

我能想到的解决方案：

*   绑定视图上的所有实体属性：

    *   我认为这是不可行的，同时它可能会导致性能问题，因为所有属性都会被填充。
*   实现自定义方法来复制属性值以避免复制空值。

    *   `EntityHelper.CopyNotNullValues(source, target)`并忽略源实体中的空值。如果我们这样做，我们可能无法在需要时将任何值设置为 null。
*   实施视图模型并使用域模型来回转换数据。

    *   这是迄今为止我能想到的最好的方法。绑定到视图模型的所有属性将始终被填充，在更新 POST 上，将所有视图模型值复制到域模型。

非常感谢您对此的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:37:45.353

在 Entity Framework 中，使用 ChangeObjectState 或 ApplyCurrentValues 会导致数据丢失。在这种情况下，解决此问题的唯一方法是附加输入实体并标记要更新的属性。请参见下面的示例：

```
 public void Update(TEntity entity, string[] updatedProperties)
    {
        DbContext.Entities.Attach(entity);
        var entry = DbContext.Entry<TEntity>(entity);
        for (int i = 0; i < updatedProperties.Length; i++)
        {
            entry.SetModifiedProperty(updatedProperties[i]);
        }
        DbContext.SaveChanges();
    }

    [HttpPost]
    public ActionResult Update(Customer customer)
    {
        Repository<Customer> repo = new Repository<Customer>();
        repo.Update(customer, new string[]{ "Name" }); // Only update name
        ...
    } 
```

这是我能想到的最好的解决方案。你想要最少的代码和良好的性能。这就像找到一份简单而高薪的工作一样困难。

# .net - 当一个常量被引用时，这个值是在内存中重复的，还是像任何其他变量一样只是指针？

> ID：14296701
> 
> 赞同：0
> 
> 时间：2013-01-12T18:41:21.690
> 
> 标签：.net, constants

在 .NET 中，如果我定义一个常量（比如类中的私有常量），引用该常量会导致该值在内存中重复，无论它被引用，还是 .NET 只是使用指向常量存储位置的指针，与使用任何普通变量一样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:43:58.910

这取决于您指的是哪种内存：常量不会在*数据*内存中复制，但它将成为嵌入在编译的 IL 代码中的*代码内存的一部分。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T18:44:10.087

它包含在 IL 中（即“重复”）。另一种方法是使用*readonly*关键字。

请注意，这是使公共*const*非常危险的原因。错误修复版本可能会更改该值，但使用 const 的任何其他程序集仍使用旧值。只声明常量内部或私有。对公共声明使用*readonly*。除非它是一个需要改变宇宙结构的“明显常数”。像 Math.Pi

# php - FFMPEG - 图像到视频

> ID：14296703
> 
> 赞同：0
> 
> 时间：2013-01-12T18:41:42.253
> 
> 标签：php, linux, ffmpeg

```
ffmpeg -f image2 -r 15 -i images/img%03d.jpg -vcodec libx264 video.mp4 
```

我在 php 中使用 exec 运行此代码。

我没有得到输出。video.mp4 为空白。

但是，如果我将这个逗号修改为这样的东西，

```
ffmpeg -f image2 -i i.jpg -vcodec libx264 -t 15 video.mp4 
```

视频播放 15 秒。

我试过**-r 1/15**。它也不起作用。我在哪里做错了？

```
<?php
$command = "/usr/bin/ffmpeg -f image2 -r 15 -i images/img%03d.jpg -vcodec libx264 video.mp4";
exec($command);
?> 
```

图片文件夹有 img001.jpg img002.jpg ... img005.jpg

```
Array
(
[0] => ffmpeg version N-48645-gf3c9d8d Copyright (c) 2000-2013 the FFmpeg developers
[1] =>   built on Jan  9 2013 04:08:32 with gcc 4.7 (Debian 4.7.2-5)
[2] =>   configuration: --extra-cflags=-I../static/include --extra-ldflags='-L../static/lib -static' --enable-gpl --enable-version3 --enable-static --disable-shared --disable-debug --enable-runtime-cpudetect --disable-x11grab --enable-libmp3lame --enable-libx264 --enable-libspeex --enable-libvorbis --enable-libvpx --enable-libfreetype --enable-libxvid --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libxavs --enable-libtheora --enable-libvo-aacenc --enable-libvo-amrwbenc --enable-gray --enable-libopenjpeg --disable-ffserver
[3] =>   libavutil      52\. 13.100 / 52\. 13.100
[4] =>   libavcodec     54\. 86.100 / 54\. 86.100
[5] =>   libavformat    54\. 59.106 / 54\. 59.106
[6] =>   libavdevice    54\.  3.102 / 54\.  3.102
[7] =>   libavfilter     3\. 32.100 /  3\. 32.100
[8] =>   libswscale      2\.  1.103 /  2\.  1.103
[9] =>   libswresample   0\. 17.102 /  0\. 17.102
[10] =>   libpostproc    52\.  2.100 / 52\.  2.100
[11] => Input #0, image2, from 'images/img%03d.jpg':
[12] =>   Duration: 00:00:45.00, start: 0.000000, bitrate: N/A
[13] =>     Stream #0:0: Video: mjpeg, yuvj420p, 200x300 [SAR 1:1 DAR 2:3], 0.07 fps, 0.33 tbr, 0.07 tbn, 0.07 tbc
[14] => [libx264 @ 0x3283080] using SAR=1/1
[15] => [libx264 @ 0x3283080] using cpu capabilities: MMX2 SSE2Fast SSSE3 FastShuffle SSE4.2 AVX
[16] => [libx264 @ 0x3283080] profile High, level 1.2
[17] => [libx264 @ 0x3283080] 264 - core 129 r2230 1cffe9f - H.264/MPEG-4 AVC codec - Copyleft 2003-2012 - http://www.videolan.org/x264.html - options: cabac=1 ref=3 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=7 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=6 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=2 keyint=250 keyint_min=1 scenecut=40 intra_refresh=0 rc_lookahead=40 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00
[18] => Output #0, mp4, to 'videos/video.mp4':
[19] =>   Metadata:
[20] =>     encoder         : Lavf54.59.106
[21] =>     Stream #0:0: Video: h264 ([33][0][0][0] / 0x0021), yuvj420p, 200x300 [SAR 1:1 DAR 2:3], q=-1--1, 16384 tbn, 0.07 tbc
[22] => Stream mapping:
[23] =>   Stream #0:0 -> #0:0 (mjpeg -> libx264)
[24] => Press [q] to stop, [?] for help
[25] => Input stream #0:0 frame changed from size:200x300 fmt:yuvj420p to size:200x300 fmt:yuvj444p
[26] => frame=    3 fps=0.0 q=-1.0 Lsize=      43kB time=00:00:15.00 bitrate=  23.2kbits/s
[27] => video:42kB audio:0kB subtitle:0 global headers:0kB muxing overhead 1.912722%
[28] => [libx264 @ 0x3283080] frame I:1     Avg QP:18.97  size: 13250
[29] => [libx264 @ 0x3283080] frame P:2     Avg QP:18.68  size: 14368
[30] => [libx264 @ 0x3283080] mb I  I16..4:  0.8% 81.4% 17.8%
[31] => [libx264 @ 0x3283080] mb P  I16..4:  0.0% 84.8% 15.2%  P16..4:  0.0%  0.0%  0.0%  0.0%  0.0%    skip: 0.0%
[32] => [libx264 @ 0x3283080] 8x8 transform intra:83.7%
[33] => [libx264 @ 0x3283080] coded y,uvDC,uvAC intra: 96.4% 99.2% 97.6%
[34] => [libx264 @ 0x3283080] i16 v,h,dc,p:  0%  0% 100%  0%
[35] => [libx264 @ 0x3283080] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 19% 18% 13%  5%  8% 11%  8% 10%  7%
[36] => [libx264 @ 0x3283080] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 27% 14%  9%  7%  9% 13%  8%  7%  7%
[37] => [libx264 @ 0x3283080] i8c dc,h,v,p: 45% 17% 26% 12%
[38] => [libx264 @ 0x3283080] Weighted P-Frames: Y:0.0% UV:0.0%
[39] => [libx264 @ 0x3283080] kb/s:7.46 
```

)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T03:47:11.933

尝试使用

-循环 1

和

-r 1/4

看看你会得到什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T15:37:06.653

强制输入（在 -i 之前）和输出（在输出文件名之前）的帧速率只有在您使用原始输入文件（例如 h.264 比特流）时才能可靠地工作，您明确需要告诉 FFmpeg 您期望的帧速率.

您应该为 image2 使用的实际选项是 -framerate：

ffmpeg -framerate 25 -i thum-%04d.jpg -r 25 -c:v libx264 out1.mp4

# objective-c - 包下载的神奇记录

> ID：14296705
> 
> 赞同：1
> 
> 时间：2013-01-12T18:42:00.473
> 
> 标签：objective-c, cocoa-touch, magicalrecord

我想做以下事情：

*   当有人第一次打开应用程序时，默认的服务列表会添加到服务实体中。
*   然后我`AFNetworking`用来下载新服务并更新表格。但这是在后台完成的。
*   如果服务有任何更改，则会在实体数据库中更新。
*   新服务被添加到实体数据库中。

我有一个包含以下字段的服务实体：

```
@implementation Service

@dynamic name;
@dynamic image;
@dynamic sid;
@dynamic date;
@dynamic parent;
@dynamic machine_name;
@dynamic desc;
@end 
```

我如何使用 Magical Record 来做我上面提到的事情？

# python - 在 Mac 中使用 scapy 嗅探 UDP 数据包

> ID：14296709
> 
> 赞同：2
> 
> 时间：2013-01-12T18:42:30.320
> 
> 标签：python, sockets, packet-sniffers, scapy

我正在尝试使用 scapy 嗅探功能嗅探 UDP 数据包，我在 Looback 接口中发送数据包，发送代码很简单如下：

```
from socket import *

IPv4 = "127.0.0.1"
Port = 45943

ClientSock = socket(AF_INET, SOCK_DGRAM) 

while True:
    MESSAGE = raw_input()
    ClientSock.sendto(MESSAGE, (IPv4, Port)) 
```

但是，当我运行时（在导入 scapy 后在另一个终端选项卡中）：

```
a = sniff(iface="lo0", count = 5) 
```

我得到以下结果：

```
>>> a.nsummary()
0000 Raw
0001 Raw
0002 Raw
0003 Raw
0004 Raw 
```

而我应该得到 UDP 数据包！，任何人都可以指出我在这里遗漏的任何东西。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T00:54:44.363

> 无法猜测数据链路类型（interface=lo0 linktype=0）

该消息翻译为“Scapy 不理解 DLT_NULL 链路层标头类型，如在 *BSD 和 OS X 中的环回设备上使用的那样，因此它不支持 *BSD 和 OS X 上的环回设备”。

因此，如果您想在 OS X 上使用 Scapy 在环回设备上进行捕获，那么您就不走运了，除非并且直到 Scapy 被增强以处理 DLT_NULL。（DLT_NULL 并没有*那么*难处理，所以大概*没有*处理它的唯一原因是大多数在环回设备上使用它的人都是在 Linux 上这样做的，其中环回设备上的链路层标头类型值为 DLT_EN10MB，即以太网，所以没有人会费心去修复它。我会看看我能不能让它工作，如果能，给他们发一个补丁。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T18:33:14.250

一些建议。

代替 a.nsummary()，您可以使用类似的东西打印出有关单个数据包的更多信息

```
a[1].show()
a[1].show2()
hexdump(a[1]) 
```

检查第一个数据包。2）您可以强制协议解码为特定类型的数据包格式。例如，RAW_IP 数据包捕获（链路层标头类型 = 101）可以强制使用 IPv6

```
conf.l2types.register(101, IPv6) 
```

如果你想在 UDP 之上添加一个新层，你可以根据使用的端口添加一个新的解析器。

# c# - jPlayer在按钮单击后保持播放

> ID：14296711
> 
> 赞同：0
> 
> 时间：2013-01-12T18:42:34.813
> 
> 标签：c#, jquery, asp.net, visual-studio-2012, jplayer

我有一个 asp 按钮：

```
<asp:ImageButton CssClass="button" ID="ImageButtonLogin" runat="server" Text="Login" OnClick="ImageButtonLogin_Click" ImageUrl="upload.jpg" /> 
```

CodeBehind 只是创建一个新的 div，将其添加到 PlaceHolder，然后使一些 asp 控件可见。

我也实现了jPlayer。问题是，当我单击上面的按钮（或任何其他按钮/链接）时，音乐停止，然后我无法恢复播放（如暂停后），似乎 jPlayer 卸载了歌曲。

似乎按钮单击会重新加载整个站点或其他内容，因此：

1.  有没有办法强制按钮不重新加载整个页面？或
2.  我可以将我的 jPlayer 放在某个地方，它会“安全”并且我网站的其他部分不会影响它吗？

感谢您的回答，这是我的第一个 asp.net 网站，感谢您提供的所有帮助：)

# php - 从 PHP 发送 HTML 邮件未按预期工作

> ID：14296712
> 
> 赞同：0
> 
> 时间：2013-01-12T18:42:42.207
> 
> 标签：php, html, email

从 PHP 发送时，我的 HTML 有一个奇怪的问题。超链接没有按应有的方式显示。这是它在我的电子邮件客户端上呈现的方式：

[链接到图片](http://dl.dropbox.com/u/2939835/temp/Inbox%20%287727%20messages%29.jpg)

如您所见，有 2 个变量将字符串发送到电子邮件正文：

```
 $texto_msg = 'HOLA <a href="http://vendoan.com">ANCHOR</a>';
    $url_anuncio = 'Sal bien!!: <a href="'.get_permalink($post_tmp).'">Título: '.get_the_title($post_tmp).'</a>';

    $e_subject = __('Alguien se ha interesado por tu anuncio en VendoAndroid','jigowatt');

    // Advanced Configuration Option.
    // You can change this if you feel that you need to.
    // Developers, you may wish to add more fields to the form, in which case you must be sure to add them here.

    $msg  = __('¡Hola! Un usuario de VendoAndroid se ha interesado en tu anuncio:'). PHP_EOL . PHP_EOL;
    //$msg .= __('<a href="'.get_permalink($post_tmp).'">Título: '.get_the_title($post_tmp).'</a>') . PHP_EOL . PHP_EOL;
    $msg .= __($texto_msg) . PHP_EOL;
    $msg .= __($url_anuncio) . PHP_EOL;
    $msg .= implode(PHP_EOL, $comments) . PHP_EOL . PHP_EOL;
    $msg .= "-------------------------------------------------------------------------------------------\r\n";
    $msg .= 'Mensaje enviado desde <a href="http://vendoandroid.com" ><strong>VendoAndroid.com</strong></a>';

    $msg = wordwrap( $msg, 70 ); 
```

我不明白为什么第一个链接效果很好，而不是第二个。

有任何想法吗？

谢谢

更新：

@Joachim Isaksson，这是原始来源：

```
<p>Â¡Hola! Un usuario de VendoAndroid se ha interesado en tu anuncio:</p>
<p>TÃ­tulo: <strong>Puto Firefox jodio</strong><br />
<a href="http://vendoandroid.com/mis-anuncios/"><strong>Ã¡rea de<br />
usuario.</strong></a><br />
Puedes ver, editar o eliminar tu anuncios accediendo a tu <a<br />
href="http://vendoandroid.com/mis-anuncios/"><strong>Ã¡rea de<br />
usuario.</strong></a><br /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:10:28.310

如果在翻译表中找到一个，__($text) 函数可能会返回翻译后的 $text。使用 HTML 和原始文本时不应混合使用它。

尝试 ：

```
$url_anuncio = __("Sal bien!!:").' <a href="'.get_permalink($post_tmp).'"> '.__("Título: ").get_the_title($post_tmp)."</a>"; 
```

进而 ：

```
$msg .= $url_anuncio . PHP_EOL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T13:15:21.007

我的错。Wordpress 核心存在某种问题。

[http://codex.wordpress.org/Function_Reference/make_clickable](http://codex.wordpress.org/Function_Reference/make_clickable)

现在正在尝试修复它。谢谢

# php - 使用 php 从浏览器执行 word/excel 文件

> ID：14296715
> 
> 赞同：0
> 
> 时间：2013-01-12T18:43:08.823
> 
> 标签：php, excel, ms-word

我正在创建一个 Web 应用程序，用户可以在其中使用浏览器执行`word/excel/pdf`文件。

我曾经`scandir()`显示文件夹的文件列表。现在，当用户单击链接时，即文件名（.doc、.xls、.pdf 等），该文件应使用相应的应用程序打开。

该文件不应**在**浏览器中打开。它应该与相应的应用程序正常打开。

我怎样才能做到这一点？

如果我能得到任何指导，我将不胜感激。

谢谢

# php - Joomla 网站在包含自定义代码文件时中断

> ID：14296716
> 
> 赞同：0
> 
> 时间：2013-01-12T18:43:09.913
> 
> 标签：php, joomla, include, joomla2.5

我在我的网站上发布了一个问题（http://stackoverflow.com/questions/14263141/joomla-website-not-working-after-moving-to-new-server）。并注意到问题只有在我在网站上插入一些我拥有和需要的代码时才会发生。在代码中我有一个类并在我的文件周围使用它。

事情工作了大约 2 个月，现在不起作用。我没有更改代码上的任何内容，并且过去曾在以前的模板中使用过它。

我想我没有按照 Joomla 喜欢的方式正确地包含它，但是，无法理解发生了什么。

这是一个简单的数据库连接和链接 ID 的类：

```
// Class db: Connects to database and returns linkid.
class MY_DB{

  var $sqlhost; 
  var $sqluser;
  var $sqlpass;
  var $sqldb;
  var $err;
  var $status;
  var $num_rows;
  var $result;
  var $linkid;
  var $query;
  var $rows     = Array();
  var $last_insert_id;

  function MY_DB( $query="", $db="" ){

    if( $db != "" ){ $this->sqldb = $db; }
    else{ $this->sqldb = "dbase"; }

    $this->sqlhost  = "localhost";
    $this->sqluser  = "root";
    $this->sqlpass  = "pass";

    $this->query    = $query;

    if( $this->query == "" ){
      $this->__Connect__();
    }
    else{
      $this->__Connect__();
      $this->__TalkToDB__();
    }

  }// end constructor Session

///////////////////////////////////////// 
  function __Connect__(){
      //connect to mysql
      $this->linkid = mysql_connect( $this->sqlhost, $this->sqluser, $this->sqlpass );

      if( $this->linkid ){
        $this->result = mysql_select_db( $this->sqldb, $this->linkid );
      }
      else
        $this->err = "Could not connect to MySQL server";
    }// end Connect function
/////////////////////////////////////////    
  function __TalkToDb__(){

      $this->result = mysql_query( $this->query, $this->linkid );

      if( !$this->result ){
        echo ( "Query: '" . $this->query . "', failed with error message: -- " . mysql_error() . " --" );
      }     
  }// end TalkToDb function
//////////////////////////////////////////

  function __CountRows__(){
      $this->num_rows = mysql_num_rows( $this->result );

      return $this->num_rows;

  }

//////////////////////////////////////////  
  function __LastInsertedId__()
  {
    return mysql_insert_id( $this->linkid );
  }

}// end class definition

?> 
```

这是我包含的另一个文件：

```
<?php
// select random activity
$num_acts_display = 2;

$query = "select id from activity where enabled='Y'";
$all_ids  = array();

$act_id   = new MY_DB( $query ); 

while( $all = mysql_fetch_array($act_id->result,MYSQL_BOTH) ){

    $all_ids[] = $all['id'];

}

// shuffle it
shuffle( $all_ids );
// re-shuffle it
shuffle( $all_ids );

?>
<div class="random-figureo">
    <ul>  
<?

for( $i = 0; $i < $num_acts_display; $i++ ){

  $query = "select * from activity where id=".$all_ids[$i];
  $act = new MY_DB( $query ); 
  $a = mysql_fetch_array($act->result,MYSQL_BOTH)

?>

  <li>
    <div class="random_img">
     <a href="<?=$this->baseurl?>/index.php?option=com_content&view=article&id=537&Itemid=194&page=thumbnails&amp;act_id=<?=$a['id']?>">
     <?
      $portada = get_portada($a['id'], "", true);

      if( $portada == "none" ){
     ?>
      <div style="background:#666; width:100px; height:65px; padding:0px; margin:0px;"></div>
     <?}
        else{// "templates/" . $this->template .
     ?> 
       <img src="<?= "templates/" . $this->template . substr( $a['directory'],1,strlen($a['directory']) ) . "/" . $portada ?>" width="100" height="65" alt="<?=$a['act_name']?>" />
     <?}?>
     </a>
    </div>
    <br />
    <div class="random_title">
      <a href="<?=$this->baseurl?>/index.php?option=com_content&view=article&id=537&Itemid=194&page=thumbnails&amp;act_id=<?=$a['id']?>"><?=$a['act_name']?></a>
    </div>
  </li>   
<?
}
?>      
  </ul>
</div> 
```

以下是我包含它的方式：

```
include( "templates/" . $this->template . "/includes/db.class" );

include( "templates/" . $this->template . "/random-figureo.php" ); 
```

我究竟做错了什么？我正在使用 J!2.5.8 和 PHP 版本：5.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T21:44:05.337

我刚刚发现了问题：

> Blockquote 自 PHP 5.5.0 起，该扩展已被弃用，未来将被删除。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。

因此，我将文件的 mysql 扩展名更改为 mysqli，现在一切正常...

我仍在使用 php 5.3，看起来它不喜欢 mysql_fetch_array ...

谢谢大家的时间。希望这对将来的其他人有所帮助。我花了三天的挫折、时间和我的网站离线。

# jquery-mobile - 在 iPhone 中运行 JQuery 移动应用程序

> ID：14296718
> 
> 赞同：0
> 
> 时间：2013-01-12T18:43:33.907
> 
> 标签：jquery-mobile

我有一个 JQuery 移动应用程序。我很好奇它在 iPhone 中的外观/运行方式。我没有 iPhone。我也是，没有MAC。我可以在 Windows 7 机器上使用任何可下载的工具来查看应用程序在 iPhone 中的外观吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:02:07.410

您不能在 Windows 环境中执行此操作。

但是您可以使用您的计算机创建一个 hackinntosh。hackintosh 就是任何为运行 Mac OS X 而制造或“破解”的非 Apple 硬件。这适用于任何硬件，无论是制造商制造的还是个人制造的计算机。

您可以使用它在 XCode iPhone 模拟器中测试 iPhone jQM 应用程序。这种方法的唯一缺点是您不能使用它来将 final all 部署到 Apple 应用商店中。

这是关于什么是 hackintosh 以及如何在计算机上部署它的简短教程：http: [//lifehacker.com/5841604/the-always-up+to+date-guide-to-building-a-hackintosh](http://lifehacker.com/5841604/the-always-up+to+date-guide-to-building-a-hackintosh)

这是一个 youtube“如何”视频：[http ://www.youtube.com/watch?v=pEW6d7m5Zc0](http://www.youtube.com/watch?v=pEW6d7m5Zc0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T04:54:34.490

如果您只需要查看您的 JQM 应用程序在 iPhone 上的外观，您可以尝试[iphonetester.com](http://iphonetester.com)。

您也可能对更高级的基于 Web 的工具[BrowserStack](http://www.browserstack.com)感兴趣。

最后，如果您需要的不止这些（例如附加到 iOS Safari 实例来调试您的移动应用程序代码），那么您需要真实或虚拟化的 OSX 和 xCode iOS 模拟器。

# vim - Vim clang 在没有 cygwin 的 Windows 上完成（它也必须是可移植的；在 USB 驱动器上）？

> ID：14296720
> 
> 赞同：1
> 
> 时间：2013-01-12T18:43:45.973
> 
> 标签：vim, usb, llvm, clang, portability

我在谷歌上找遍了，但我只能用 cygwin 找到 unix 系统或 windows 的答案。我希望能够在没有 cygwin 的 Windows 上使用 clang_complete。

是否可以让 clang_complete 在没有 cygwin 的情况下在 Windows 上工作？我已经安装了带有病原体的 clang_complete。但我知道我需要 clang 和 llvm 本身，但我不知道如何安装 clang 和 llvm 并使其可移植，以便它可以在任何地方工作。（例如 USB 驱动器等）我已经让 vim 和 gvim 在 USB 驱动器上工作，只需复制 vim 安装到的文件夹并将其放在驱动器上，但我需要帮助让 clang_complete 工作。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:13:06.453

在这个阶段，您可能需要自己从 MinGW/MSys 环境或通过 MSVC 编译 Clang。目前它可能仍然有很多错误。请注意，Clang 的 C++ 运行时 libc++ 尚未移植到 Windows，因此您只能使用 gcc 4.2 的 libstdc++ 的 C++11 之前的旧版本。

此外，我认为目前无法重新定位 Clang——它使用固定路径来存储诸如包含和库之类的东西。

# ios - 对 textFieldDidEndEditing 的操作

> ID：14296721
> 
> 赞同：0
> 
> 时间：2013-01-12T18:43:47.340
> 
> 标签：ios, objective-c, cocoa-touch

当以下文本字段收到代码第二部分中的条件时，我想要一个警报

```
self.circuit.rcdAtIan = [ICUtils nonNilString:self.rcdAtIan.text];
self.circuit.rcdAt5an = [ICUtils nonNilString:self.rcdAt5an.text]; 
```

上面的代码工作正常，所以现在我需要启动它。使用以下方法是我的第一个想法，但这会在每次键盘退出时触发警报。我只希望警报显示一次。

```
- (void)textFieldDidEndEditing:(UITextField *)textField {
    if ([_rcdAtIan.text intValue]> 200) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Warning" message:@"my message" delegate:nil cancelButtonTitle: @"Ok" otherButtonTitles: nil];
        [alert show];     
    }

    if ([_rcdAt5an.text intValue]> 40) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Warning" message:@"my message" delegate:nil cancelButtonTitle: @"Ok" otherButtonTitles: nil];
        [alert show];
    }
} 
```

我想也许我需要一个布尔值`NSUserDefaults` ？但不确定如何实施以检查警报是否已显示。通常，如果我想显示一次警报，我会这样做

```
 if (![@"1" isEqualToString:[[NSUserDefaults standardUserDefaults] objectForKey:@"alert"]]){
    [[NSUserDefaults standardUserDefaults] setValue:@"1" forKey:@"alert"];
    [[NSUserDefaults standardUserDefaults] synchronize];
    [alert show];

} 
```

但是在这种情况下，当页面重新加载时，我希望再次显示警报，无论如何我不确定这是否是解决此问题的有效方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:54:12.127

“一次”到底是什么意思？每个应用程序运行一次，每个编辑步骤一次？

或者可以简单地添加两个 BOOL 标志，您可以随时重置它们，并且只需

```
- (void)textFieldDidEndEditing:(UITextField *)textField {
  if ([_rcdAtIan.text intValue]> 200 && !alert1shown) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Warning" message:@"my message" delegate:nil cancelButtonTitle: @"Ok" otherButtonTitles: nil];
    alert1shown = YES;
    [alert show];
  }

  if ([_rcdAt5an.text intValue]> 40 && !alert2shown) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Warning" message:@"my message" delegate:nil cancelButtonTitle: @"Ok" otherButtonTitles: nil];
    alert2shown = YES;
    [alert show];
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T18:54:56.637

不要使用 NSUserDefaults，那是不合适的

在你的@interface...

```
 @property (assign) BOOL freshAlert1;
    @property (assign) BOOL freshAlert2; 
```

然后是这样的......（假设“页面已重新加载”等同于您的 viewController 回到屏幕上）

```
- (void)viewDidAppear
{
     self.freshAlert1 = YES;
     self.freshAlert2 = YES;

}

if (([_rcdAtIan.text intValue]> 200) && self.freshAlert1) {
    self.freshAlert1 = NO;
    ...
   }

 if (([_rcdAt5an.text intValue]> 40) && self.freshAlert2) {
    self.freshAlert2 = NO;

     ...
     } 
```

# javascript - 在 JavaScript 中未正确设置对象参数

> ID：14296722
> 
> 赞同：1
> 
> 时间：2013-01-12T18:43:51.810
> 
> 标签：javascript, console

我的网站上有以下代码：

```
function GroupObject(GroupID, GroupColor, GroupName, CalendarID, UserEnable, IrcChannel) {
  this.uid = GroupID;
  this.color = GroupColor;
  this.groupname = GroupName;
  this.calendarid = CalendarID;
  this.userenable = UserEnable;
  this.ircchannel = IrcChannel;
}

function GetGroupObjects(callback) {
  var GlobalDB = [];
  $.getJSON("Some Data From Google Docs",

  function (data) {

    $.each(data.feed.entry, function (i, entry) {
      GlobalDB.push(new GroupObject(entry.gsx$uid.$t,
        "000000",
      SanitizeInputText(entry.gsx$group.$t),
      SanitizeInputCalID(entry.gsx$calendarid.$t),
      true,

      SanitizeInputText(entry.gsx$ircchannel.$t)))
    });

    console.log(GlobalDB[0]);
    console.log(GlobalDB[0].color);
    callback(GlobalDB);
  });
}; 
```

新创建的 GlobalDB 的所有参数都是正确的，唯一的例外是参数“颜色”。console.log(GlobalDB[0]) 返回：

```
GroupObject
calendarid: "CalOfTNG"
color: "AB8B00"
groupname: "Austin TNG"
ircchannel: "AustinTNG"
uid: "TNG"
userenable: true
__proto__: GroupObject 
```

它在 Chrome 和 Firefox 中为颜色“AB8B00”带来相同的值。知道为什么吗？从上面的代码来看，它应该是 0。console.log(GlobalDB[0].color) 确实返回 000000。但是当我从回调返回时使用 GlobalDB 时，我再次得到 AB8B00。

用户启用，另一方面工作得很好。我只是找不到参数 .color 的问题所在，因为它在 Chrome 和 Firefox 中都失败了。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:48:03.360

您似乎遇到了`console.log`我经常遇到的一个问题：您在登录时看不到该对象，而是在稍后看到的，因为浏览器在您登录时不会立即对其进行深度克隆，而只是存储它的引用.

这种效果不会影响原始类型，如字符串，这就是为什么在您登录时颜色最初看起来很好的原因`GlobalDB[0].color`。

登录时颜色为“000000”。之后它会发生变化，可能是当你打电话时`callback(GlobalDB)`。

另请参阅[此相关问题（和答案）](https://stackoverflow.com/questions/13766973/weird-behaviour-of-javascript-with-arrays)。

# python - TypeError：列表索引必须是整数，而不是 pygame.Surface - Python，Pygame 错误

> ID：14296725
> 
> 赞同：0
> 
> 时间：2013-01-12T18:44:06.537
> 
> 标签：python, list, pygame

我正在尝试在 Pygame（使用 Python）中制作一个破砖游戏，但我遇到了一个错误。

代码：

```
import pygame, sys, time, random
from pygame.locals import *
pygame.init()
fpsclock = pygame.time.Clock()

WINDOWWIDTH = 450
WINDOWHEIGHT = 650
mainwindow = pygame.display.set_mode((WINDOWWIDTH, WINDOWHEIGHT), 0, 32)
pygame.display.set_caption('Luzion - Brick Breaker')

paddle = pygame.image.load('Brick Breaker - Paddle.png')
paddlerect = paddle.get_rect()
paddlerect.topleft = (190, 575)

ball = pygame.image.load ('ball.png')
ballrect = ball.get_rect()
ballrect.topleft = (195, 565)

cooltext = pygame.image.load('cooltext1.png')
cooltextrect = cooltext.get_rect()
cooltextrect.topleft = (0, 0)

BLACK = (0, 0, 0)
WHITE = (255, 255, 255)
RED = (255, 0, 0)
GREEN = (0, 128, 0)
BLUE = (0, 0, 255)
LIME = (0, 255, 0)
TEXTCOLOR = WHITE

font = pygame.font.SysFont(None, 48)

def displaytext(text, font, surface, x, y):
    text = font.render(text, 1, TEXTCOLOR)
    textrect = text.get_rect()
    textrect.topleft = (x, y)
    surface.blit(text, textrect)

def waitforplayer():
    while True:
        for event in pygame.event.get():
            if event.type == QUIT:
                pygame.quit()
                sys.exit()
            if event.type == KEYDOWN:
                if event.key == K_ESCAPE:
                    pygame.quit()
                    sys.exit()
                return

rb = pygame.image.load('redblock.png')
rb2 = rb1 = rb
level1blocks = [rb, rb1, rb2]
rbrect = rb.get_rect().topleft = (0, 0)
rb1rect = rb1.get_rect().topleft = (40, 0)
rb2rect = rb2.get_rect().topleft = (80, 0)
level1rects = [rbrect, rb1rect, rb2rect] 

moveleft = False
moveright = False
SPEED = 7

bmoveup = bmovedown = bmoveleft = bmoveright = False
BALLSPEED = 8

mainwindow.blit(cooltext, cooltextrect)
pygame.display.update()
time.sleep(1)

displaytext('Level 1', font, mainwindow, 150, 100)
pygame.display.update()
time.sleep(1)

displaytext('Press any key to begin...', font, mainwindow, 22, 200)
pygame.display.update()
waitforplayer()

while True:
    number = random.randint(0, 1)
    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit()
        if event.type == KEYDOWN:
            if event.key == ord('a') or event.key == K_LEFT:
                moveleft = True
                moveright = False
            if event.key == ord('d') or event.key == K_RIGHT:
                moveleft = False
                moveright = True
            if event.key == ord('g'):
                bmoveup = True
                if number == 1:
                    bmoveleft = True
                else:
                    bmoveright = True
        if event.type == KEYUP:
            if event.key == ord('a') or event.key == K_LEFT:
                moveleft = False
            if event.key == ord('d') or event.key == K_RIGHT:
                moveright = False

    if moveleft and paddlerect.left > 0:
        paddlerect.left -= SPEED
    if moveright and paddlerect.right < WINDOWWIDTH:
        paddlerect.right += SPEED

    if bmovedown and ballrect.bottom < WINDOWHEIGHT:
        ballrect.top += BALLSPEED
    if bmoveup and ballrect.top > 0:
        ballrect.top -= BALLSPEED
    if bmoveleft and ballrect.left > 0:
        ballrect.left -= BALLSPEED
    if bmoveright and ballrect.right < WINDOWWIDTH:
        ballrect.right += BALLSPEED

    if ballrect.top <= 0:
        bmovedown = not bmovedown
        bmoveup = not bmoveup
    if ballrect.left <= 0:
        bmoveleft = not bmoveleft
        bmoveright = not bmoveright
    if ballrect.right >= WINDOWWIDTH:
        bmoveleft = not bmoveleft
        bmoveright = not bmoveright
    if ballrect.bottom >= WINDOWHEIGHT:
        bmovedown = not bmovedown
        bmoveup = not bmoveup

    mainwindow.fill(WHITE)
    mainwindow.blit(paddle, paddlerect)
    mainwindow.blit(ball, ballrect)

    for b in level1blocks[:]:
        mainwindow.blit(level1blocks[b], level1rects[b])

    for x in level1blocks[:]:
        if ballrect.colliderect(x.get_rect()):
            level1blocks.remove(x)
            bmovedown = not bmovedown
            bmoveup = not bmoveup
            bmoveleft = not bmoveleft
            bmoveright = not bmoveright

    if ballrect.colliderect(paddlerect):
        bmovedown = not bmovedown
        bmoveup = not bmoveup
        bmoveleft = not bmoveleft
        bmoveright = not bmoveright

    pygame.display.update()
    fpsclock.tick(35) 
```

错误：

```
Traceback (most recent call last):
  File "C:/Python32/brick breaker", line 136, in <module>
    mainwindow.blit(level1blocks[b], level1rects[b])
TypeError: list indices must be integers, not pygame.Surface 
```

我有很多不同的事情要尝试解决这个问题，但我还没有成功。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:18:27.820

当你有线路时

```
for b in level1blocks[:]: 
```

您正在浏览每个项目，`level1blocks`而不是浏览所有可能的索引。将此行替换为

```
for b in range(len(level1blocks)): 
```

这应该可以解决您的问题。

# jquery - 链接到内容切换容器中的锚点

> ID：14296730
> 
> 赞同：1
> 
> 时间：2013-01-12T18:44:20.717
> 
> 标签：jquery, hyperlink, anchor, content-management

我的“关于”页面使用 div 内容切换方法（由[Bill Posters](http://www.htmlforums.com/client-side-scripting/t-change-div-content-from-link-73349.html)提供），它允许我将任务、联系人等放在同一个容器中。在我尝试从另一个页面链接到特定选项卡之前，它的效果非常好。例如，我有 '/about/#mission' 或 '/about/#contact' 最终链接到内容切换框的第一个 'about' 选项，而不是正确的选项。我希望用户能够从主页单击“联系我们”并直接进入联系选项卡。

我已经尝试并尝试调整 html 和 jquery（甚至尝试了双锚，我很确定这不是一件事），我添加了 cookie 识别（如果用户没有访问，则不太有效该页面尚未...），并且我已经广泛搜索了论坛。任何想法我做错了什么，或者是否有更好的方法来做到这一点？我猜我让问题变得比必要的复杂得多，但我对编码很陌生，除其他外，可能没有使用正确的搜索语言。

我真的很感激任何帮助！我不喜欢这种特定的内容切换方法，我很乐意尝试其他方法。非常感谢！

萨拉

```
function switchContent(obj) {

    obj = (!obj) ? 'sub1' : obj;

    var contentDivs =    document.getElementById('container').getElementsByTagName('div');
    for (i=0; i<contentDivs.length; i++) {
        if (contentDivs[i].id && contentDivs[i].id.indexOf('sub') != -1) {
            contentDivs[i].className = 'hide';
        }
    }
    document.getElementById(obj).className = '';

}

<div id="container">

<div id="sub1">content 1</div>
<div id="sub2" class="hide">content 2</div>
<div id="sub3" class="hide">content 3</div>

<div id="navigation">
    <a href="#" class="mininav" onclick="switchContent('sub1');   return false;">link 1</a>
    <a href="#" class="mininav" onclick="switchContent('sub2'); return false;">link 2</a>
    <a href="#" class="mininav" onclick="switchContent('sub3'); return false;">link 3</a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:18:46.930

只需检查位置字符串中的片段标识符值。根据一些条件参数传递我们想要更改的对象。

```
if(window.location.hash){
    //fragment identifier such as '#mission', or '#about' has been found
    var sub = '',
        hsh = window.location.hash.split('#')[1]; // get string without # sign

    switch(hsh){
        case 'mission' :
            sub = 'sub1';
            break;
        case 'contact' :
            sub = 'sub2';
            break;
    }
    switchContent(sub);
} 
```

在上面，我们检查片段标识符。如果找到，我们构建一个 switch 语句来准备一个字符串。完成切换后，我们将字符串传递给函数，该函数将依次触发内容加载器。

确保此代码在内部运行，`$(document).ready(function(){ }):`否则 DOM 元素可能不可用。

*注意*：我建议更改此设置以构建对关系更友好的设计模式。where`fragment identifier`和 the`element containing the markup`共享一些公共字符串，例如数据属性。`<div data-rel="contact" id="sub1">`. 如果这样做了，那么我们不再需要构建一个我们必须手动分配给变量的 switch 语句。如果您愿意接受一种更加动态和流畅的方法，我很乐意为您构建一个示例，只需在下面回复即可。

**这是一种更流畅的方法**。

我们应该建立关系，这样我们才能让事情变得更加理智。让我们看看我们应该如何更改内容 div。

```
<div class="info" id="mission">content 1</div>
<div class="info" id="about">content 2</div>
<div class="info" id="contact">content 3</div> 
```

您会看到我们修改了 ，`ids`因此它们不仅与内部内容有特殊关系，而且与我们尝试使用的片段标识符有特殊关系。这样，我们可以在检查`hash`存在的条件语句中引用该信息。我们还添加了一个新类，`info`这将使我们能够使代码更简洁。

现在，让我们清理一下内容切换器功能。之前，我们使用三元运算符来检查 obj 是否存在，如果不存在，则为其分配一些任意字符串；我们不要那样做。

```
function switchContent(did){
    $('.info').hide(0); //hide all the elements.
    $('div[id='+did+']').show();  //show only what we want!
} 
```

这就是我们的内容切换器！现在让我们为哈希标签的存在构建我们的条件语句。

```
$(function(){
    if(window.location.hash){
        switchContent(window.location.hash.split('#')[1]);
    }  
}); 
```

我们缩短了代码，使其更加流畅。在上面，我们将条件检查包装在`ready`函数中，以便我们知道元素存在，并且页面将按预期工作。

现在让我们清理我们的锚点，这样即使没有启用 javascript，它们也能正常工作。

```
<a href="#mission" class="mininav">link 1</a>
<a href="#about" class="mininav">link 2</a>
<a href="#contact" class="mininav">link 3</a> 
```

伟大的。现在干净多了。没有凌乱的内联点击函数或随机字符串标识符。让我们让它发挥作用。

```
$('#navigation a').click(function(e){
    e.preventDefault(); //we don't want the default jumping behavior
    switchContent($(this).prop('href').split('#')[1]);
}); 
```

简单又干净！我们捕获点击事件，停止默认行为，然后传递`href without the # sign`给函数来切换我们的内容！就是这样！

# windows - 到 USB 驱动器的 ATA 命令

> ID：14296733
> 
> 赞同：1
> 
> 时间：2013-01-12T18:44:40.910
> 
> 标签：windows, ide, scsi, ata, miniport

Windows 7
C 编程
Visual C++ 2008（在 VMWare 中）

我想用`DeviceIOContro`l 向 USB 硬盘驱动器发送一些 ATA 命令（IDENTIFY DEVICE、READ NATIVE MAX ADDRESS、SET MAX ADDRESS）。因此我有一些问题。

据我了解，USBSTOR 无法直接处理 ATA 命令（使用`IOCTL_ATA_PASS_THROUGH`）。我试过这个，它适用于本机 IDE 硬盘，但不适用于 USB。

1.  应用程序将 SCSI 命令发送到设备并将它们转发到设备是否正确？所以我需要创建一个封装了相应 ATA 命令的 SCSI 命令？

2.  我`dwIoControlCode`能用什么来做到这一点？我试过了，`IOCTL_SCSI_MINIPORT`但错误是`ERROR_NOT_SUPPORTED`. 它可以与 minport 一起使用吗？微型端口是否仍然是最新的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:50:12.567

Look at this link:

[http://www.mombu.com/microsoft/windows-programmer-nt-kernel-mode/t-howto-send-ata-spec-command-to-usb-hdd-1646752.html](http://www.mombu.com/microsoft/windows-programmer-nt-kernel-mode/t-howto-send-ata-spec-command-to-usb-hdd-1646752.html)

> Q: howto send ATA spec. command to USB HDD?

A: You are limited to whatever the USB->ATA tailgate (bridge) chip supports. If you control the bridge, you can implement whatever you want. If you don't, you'll have to ask the bridge vendor to reveal what they do support. See my replies in the thread on 1394->ATA on NTDEV for more information.

> Q: Once more question: whether probably to get access to everyone disk in SCSI RAID?

A: No.

You can only send SCSI commands to the bridge/enclosure at the end of the USB cable. How they are translated to ATA commands - is not under your control.

I assume El Cheapo enclosures to only translate the essential SCSI commands. In this case, you will only have 1) SCSI INQUIRY emulated by ATA IDENTIFY 2) SCSI READ CAPACITY emulated by ATA IDENTIFY 2) READ and WRITE 3) VERIFY.

And that's all. In this case, you will have zero chances sending any non-trivial ATA commands, since the USB-to-ATA bridge on other side provides no ways of doing such.

# string - 在特定字符处拆分字符串但忽略某些情况 C# LINQ

> ID：14296739
> 
> 赞同：0
> 
> 时间：2013-01-12T18:45:40.603
> 
> 标签：string, linq, split, comma

我需要用逗号分割一个字符串，但忽略某些情况。

例如这个字符串（每个逗号后面是一个空格字符）：

**我的话 1，我的话 2，我的话 3，“我的话 x，我的话 y，我的话 z”，我的话 4，我的话 5**

应该拆分，以便显示：

**我的话 1**

**我的话 2**

**我的话 3**

**“我的话 x，我的话 y，我的话 z”**

**我的话 4**

**我的话 5**

基本上所有的单词都应该在逗号之后分开，除了双引号中的单词应该像引号一样显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:56:21.660

```
string text = @"my word 1, my word 2, ""my word x, my word y"", my word 3";
string pattern = @"[^,""]+|""([^""]*)""";
IEnumerable<string> result = Regex.Matches(text, pattern).Cast<Match>()
                                  .Select(m => m.Value.Trim())
                                  .Where(s => !String.IsNullOrWhiteSpace(s)); 
```

结果：

```
my word 1     
my word 2    
"my word x, my word y"    
my word 3 
```

# windows-phone-7 - 无法在 Windows Phone 浏览器中打开地图？

> ID：14296744
> 
> 赞同：0
> 
> 时间：2013-01-12T18:46:03.433
> 
> 标签：windows-phone-7, windows-phone-8, bing-maps

我无法在我的 Windows 手机中打开下面的 bingmap 网址。它显示“此国家或地区没有结果。请更改您的区域设置并重试。”。此 Windows 手机区域属于印度。

[http://maps.live.com/default.aspx?cp=37.814692~-122.477339&style=o&lvl=1&tilt=-90&dir=0&alt=-1000&scene=1140291](http://maps.live.com/default.aspx?cp=37.814692~-122.477339&style=o&lvl=1&tilt=-90&dir=0&alt=-1000&scene=1140291)

它确实在我的真实帐户区域为美国的其他 Windows 手机中打开。

任何线索如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:45:33.407

我认为您无法解决此问题，因为这是帐户的区域限制。您唯一能做的就是更改您的电话帐户区域。

# maven - 我可以制作一个生成项目然后构建该项目的 Maven 插件吗？

> ID：14296747
> 
> 赞同：0
> 
> 时间：2013-01-12T18:47:06.980
> 
> 标签：maven, maven-plugin

是否可以将原型和普通 Maven 插件的功能组合到一个插件中？

我有一种可以编译成 Java 源代码的自定义语言。我已经编写了一个 Maven 插件，它在`generate-sources`阶段执行此操作，将 Java 源代码添加到项目中，然后构建项目。它按我的预期工作。

但是，要使用它，我需要先写出一个`pom.xml`引用我的插件并描述输入文件所在位置的文件。我希望能够在单个 maven 命令中直接从原始输入文件到编译代码。

例如，假设我有这个目录结构：

```
my-project/
    some-input-file.dsl 
```

我想跑

```
bash$ mvn com.waisbrot.plugin:generate -DgroupID=com.waisbrot package 
```

并且在 Maven 完成运行后有：

```
my-project/
    some-input-file.dsl
    pom.xml
    target/
        generated-sources/
            plugin/
                SomeInputFile.java
        classes/
            com/
                waisbrot/
                    SomeInputFile.class
        some-input-file-1.0.jar 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:48:59.800

实际上，原型的集成测试允许您声明参数和目标。所以这样做：

1.  选择您要创建的模板项目
2.  mvn 原型：从项目创建。它将创建一个新的原型
3.  查看 src/test/resources/projects，尤其是 target.txt 和 archetype.properties（来源：[http](http://maven.apache.org/archetype/maven-archetype-plugin/integration-test-mojo.html) ://maven.apache.org/archetype/maven-archetype-plugin/integration-test-mojo.html ）。调整所以安装将是隐含的
4.  mvn verify 将能够构建原型、运行它并安装它

希望能帮助到你

# javascript - 与猫鼬一起保存

> ID：14296749
> 
> 赞同：1
> 
> 时间：2013-01-12T18:47:15.683
> 
> 标签：javascript, node.js, mongodb, express, mongoose

我尝试简单地将我的 mongodb 库中的新用户保存到控制器文件中：

```
var mongoose = require('mongoose');
var UserModel = mongoose.model('User');

// signup
exports.create = function (req, res) {

    console.log(req.body);

    var user = new UserModel({
        username: req.body.username,
        password: req.body.password,
        email: req.body.email
    });

    user.save(function (err) {
        if (!err) {
            return console.log("created");
        }
        else {
            return console.log(err);
        }
    });
} 
```

在调试模式下，我可以看到 user.save() 没有执行没有错误......

我不知道为什么，因为我在用户名/密码/电子邮件字段中得到了正确的值。

这是我的模型文件：

```
var mongoose = require('mongoose');
var Schema = mongoose.Schema;
var objectId = Schema.ObjectId;

var userSchema = mongoose.Schema({
    username: String,
    password: String,
    email: String
});

var userModel = mongoose.model('User', userSchema); 
```

编辑 ：

在我的 app.js 中，我有到 mongodb 的连接：

```
 mongoose.connect('mongodb://localhost/mydb', function(err){
        if(err) {
            console.log(err);
        }
    });

    var  userModel = require('./models/user'),
        userController = require('./controllers/users'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:11:25.070

我将所有（控制器+模型）分组到一个文件中进行测试：

```
var express = require('express')
  , routes  = require('./routes')
  , userRoute    = require('./routes/user')
  , http    = require('http')
  , path    = require('path')
  , io      = require('socket.io')
  , mongoose = require('mongoose');

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 8080);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'ejs');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(require('stylus').middleware(__dirname + '/public'));
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

mongoose.connect('mongodb://127.0.0.1/mydb', function(err){
    if(err) {
        console.log(err);
    }
    else {
        console.log("Connected to mongo DB")
    }
});

/*var userModel = require('./models/user'),
    tchatMessageModel = require('./models/tchatMessage'),
    userController = require('./controllers/users'),
    tchatMessageController = require('./controllers/tchatMessages');       */

app.get('/', routes.index);
app.get('/signup', userRoute.signup);
app.get('/signin', userRoute.signin);
//app.post('/signup', userController.create);
//app.get('/users', userRoute.list);

var Schema = mongoose.Schema;
var userSchema = Schema({
    username: String,
    password: String,
    email: String
});
var UserModel = mongoose.model('User', userSchema);
app.post('/signup', function (req, res) {

    console.log(req.body);

    var user = new UserModel({
     username: req.body.username,
     password: req.body.password,
     email: req.body.email
     });

    user.save(function (err) {
        if (!err) {
            return console.log("created");
        }
        else {
            return console.log(err);
        }
    });

});

var server = http.createServer(app);

server.listen(app.get('port'), function(){
    console.log("Express server listening on port " + app.get('port'));
}); 
```

我也遇到了同样的问题……不明白。可能是 Express 配置中的问题？

编辑 ：

问题解决了：

应用程序.js

```
mongoose.model("User", require("./models/user").userModel); 
```

模型.js

```
exports.userModel = userSchema; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-21T21:42:02.360

当您创建猫鼬模式时，您应该使用关键字“new”：

```
var userSchema = new mongoose.Schema({
    /*...*/
}); 
```

# java - 连接到外部 mongo 数据库（java）

> ID：14296750
> 
> 赞同：1
> 
> 时间：2013-01-12T18:47:38.227
> 
> 标签：java, mongodb, database-connection, mlab

我正在尝试连接到我通过 mongolab 创建的 mongo 数据库

我在 mongolab 的数据库页面中提到了标准 uri：![在此处输入图像描述](../Images/308adf740f50d34f81808e1914f53fab.png)

我试试这段代码：

```
String uriString = "mongodb://user:password@ds047037.mongolab.com:47037/db_test_01";
MongoURI uri = new MongoURI(uriString);
try {
    DB db = uri.connectDB();
    db.authenticate(uri.getUsername(), uri.getPassword());
    Set<String> colls = db.getCollectionNames();
    for (String s : colls) {
        System.out.println(s);
    }
    System.out.println("done");
    } catch (UnknownHostException e) {
        System.out.println("UnknownHostException: " + e);
    } catch(MongoException me) {
        System.out.println("MongoException: " + me);
    } 
```

但是，我得到`UnknownHostException: java.net.UnknownHostException: ds047037.mongolab.com`

文档`UnknownHostException`说：“抛出表明无法确定主机的IP地址。”

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T21:30:43.550

在堆栈中的某个位置看起来像 DNS 解析问题。[`java.net.UnknownHostException`](http://docs.oracle.com/javase/7/docs/api/java/net/UnknownHostException.html)是“抛出以指示无法确定主机的 IP 地址”。

**Java 的问题**

问题可能出在 Java 本身。[Java 和 IPv6](https://stackoverflow.com/questions/1608503/domain-name-resolution-not-working-in-java-applications-on-ubuntu64-9-04-machine)存在一个已知问题。您可以尝试设置`java.net.preferIPv4Stack`系统属性以`true`查看是否可以解决问题。

作为`java`启动 JVM 时命令的参数：

```
java -Djava.net.preferIPv4Stack=true YourMainClass 
```

或以编程方式：

```
System.setProperty("java.net.preferIPv4Stack" , "true"); 
```

您还可以尝试升级到最新版本的 Java 以获取它附带的所有错误修复。

**您的 DNS 服务器或配置有问题**

问题也可能与您的笔记本电脑/机器上的 DNS 配置有关。您可以使用`dig`来查看 DNS 查找返回的内容。以下是我从笔记本电脑获得的输出。你也可以使用[这个网络版本的 dig](http://www.digwebinterface.com/?hostnames=ds047037.mongolab.com&type=&showcommand=on&colorize=on&stats=on&ns=resolver&useresolver=8.8.4.4&nameservers=)来看看你应该得到什么。

```
% dig ds047037.mongolab.com

; <<>> DiG 9.8.3-P1 <<>> ds047037.mongolab.com
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 20375
;; flags: qr rd ra; QUERY: 1, ANSWER: 4, AUTHORITY: 0, ADDITIONAL: 0

;; QUESTION SECTION:
;ds047037.mongolab.com.     IN  A

;; ANSWER SECTION:
ds047037.mongolab.com.  120 IN  CNAME   ds047037-a.mongolab.com.
ds047037-a.mongolab.com. 120    IN  CNAME   h000432.mongolab.com.
h000432.mongolab.com.   120 IN  CNAME   ec2-46-51-159-130.eu-west-1.compute.amazonaws.com.
ec2-46-51-159-130.eu-west-1.compute.amazonaws.com. 300 IN A 46.51.159.130

;; Query time: 23 msec
;; SERVER: 192.168.1.1#53(192.168.1.1)
;; WHEN: Sat Jan 12 13:22:24 2013
;; MSG SIZE  rcvd: 162 
```

如果您确认您的 DNS 配置/服务器是问题所在，您将需要[确定您正在使用哪些 DNS 服务器](http://www.cyberciti.biz/faq/how-to-find-out-what-my-dns-servers-address-is/)，然后联系所有者/管理员或联系您的 ISP 以确保它们已按照应有的方式进行配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T19:09:51.067

尝试使用**host**和**port**，所以：

```
Mongo mongo = new Mongo("ds047037.mongolab.com", 47037);
DB db = mongo.getDB("db_test_01");
db.authenticate(user, password); 
```

# git - 将 git repo 添加到 Jenkins

> ID：14296754
> 
> 赞同：0
> 
> 时间：2013-01-12T18:48:04.790
> 
> 标签：git, jenkins

似乎开箱即用，`Jenkins`不支持`git`：

![在此处输入图像描述](../Images/690670bd1b59047a1a5f199b3c0b2429.png)

请问我该如何添加`git`？`Jenkins`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T18:50:35.187

您需要安装一个插件才能在`Jenkins`. 在主页中，单击`manage jenkins`和`magage plugins`。单击可用选项卡并搜索`git`。

# .htaccess - .htaccess 重定向某些虚拟目录

> ID：14296756
> 
> 赞同：0
> 
> 时间：2013-01-12T18:48:07.623
> 
> 标签：.htaccess, redirect, conditional-statements

*/podcast/wp/*是一个文件夹，其他都是 RewriteEngine 已经生成的虚拟目录。这是WordPress提供的代码：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /podcast/wp/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /podcast/wp/index.php [L]
</IfModule> 
```

我想重定向*wp/目录中的***所有**请求（现有文件夹除外）

 ***不包括**以下可能的路径（也是虚拟目录）：

```
/podcast/wp/ANYSTRING1/ANYSTRING2/feed 
```

到另一个域：

```
example.com 
```

使用 .htaccess，而排除的路径保持原样工作。目标是“隐藏”（重定向）除提要之外的整个 WordPress 博客。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:31:13.057

将 wordpress 生成的规则更改为：

```
RewriteEngine On
RewriteBase /podcast/wp/

# new stuff
RewriteCond %{REQUEST_URI} ![^/]+/[^/]+/feed$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ http://example.com/ [L,R]

# original wordpress stuff
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /podcast/wp/index.php [L] 
```

根据您要如何处理重定向，您可以调整重定向到`http://example.com/`. 如果您想要 301 永久重定向，请添加`301`：

```
RewriteRule ^(.*)$ http://example.com/ [L,R=301] 
```

如果要在重定向中保留相对 URI，请使用反向引用：

```
RewriteRule ^(.*)$ http://example.com/$1 [L,R] 
```

如果要保留整个 URI（包括`/podcast/wp/`部分，请使用 URI：

```
RewriteRule ^(.*)$ http://example.com%{REQUEST_URI} [L,R] 
```*

# apache2 - apache2 ubuntu 目录下的文件列表

> ID：14296760
> 
> 赞同：0
> 
> 时间：2013-01-12T18:48:41.653
> 
> 标签：apache2, installation, localhost, ubuntu-12.04

大家好，我已经在我的 ubuntu 12.04 系统上安装了 apache2 服务器，现在我想要它而不是在输入时显示它自己的页面，而不是 在它的默认目录中输入`http://localhost`它。 请帮助我实现这一点 提前谢谢`display the list of files``/var/www`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:10:47.720

您可以删除名为 index.html 的文件或`Options +Indexes`在您的 apache 站点设置文件中设置选项 :)

# java - 盲文编码器

> ID：14296764
> 
> 赞同：0
> 
> 时间：2013-01-12T18:49:39.227
> 
> 标签：java, netbeans

我必须用Java制作一个盲文编码器解码器，但是在选择方法时我遇到了麻烦（用户选择他想要做什么，编码或解码以及他想要编码哪个文件。/de-cod ）。这是到目前为止的程序（选择并打开文件）：

```
public static void main (String []args) throws Exception {  
    System.out.println("Escriba 'c' para codificar o 'd' para decodificar: ");  
    char e=(char) System.in.read();  
        switch (e){  
            case 'd':  
                System.out.println("Introduzca nombre del fichero a decodificar sin    <.txt>. Por defecto, <Entrada>: ");  
                break;  
            case 'c':  
                System.out.println("Introduzca nombre del fichero a codificar sin <.txt>. Por defecto, <Entrada>: ");  
                break;  
        }
        }
    } 
```

第一次 println 翻译：`Enter c to codify or d to de-codify`

2nd-3rd println 翻译：`Enter file's name to de-codify/codify without ".txt". By default, 'entrada'`

我不知道如何让程序继续运行，等待用户输入文件名（或直接按“enter”并默认打开“entrada”文件），打开它，将其发送到另一个类对其进行编码/反编码，然后将其写回文件中，并完成程序。

我正在使用 Netbeans IDE 7.2.1

对不起，因为我的语法不好，我尽力做到最好。如果有不明白的地方，请回复，我会进一步解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:41:35.923

当您需要从用户那里获取输入时，请使用扫描器 (java.util.Scanner)。代码看起来像这样：

```
Scanner scanner = new Scanner(System.in); // Creates a scanner that reads the System.in stream
String filepath = scanner.nextLine(); // Reads until it reaches a line break and returns what was read. 
```

# java - 计算符合 GC 条件的对象数

> ID：14296767
> 
> 赞同：2
> 
> 时间：2013-01-12T18:49:54.080
> 
> 标签：java, garbage-collection, scjp

晚上好，请看这段代码示例，它演示了符合 GC 条件的对象数量：

```
public class CardBoard {

Short story = 5;

CardBoard go(CardBoard cb) {
    cb = null;
    return cb;
}

public static void main(String[] args) {
    CardBoard c1 = new CardBoard();
    CardBoard c2 = new CardBoard();
    CardBoard c3 = c1.go(c2);
    c1 = null;
   // do Stuff

   }
} 
```

我看到有四个对象在达到 Stuff 时符合 GC 条件，即 c3 及其关联的故事对象和 c1 及其关联的故事对象，你看到了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T18:55:28.430

恰好有**1 个**对象符合 GC 条件 - 之前由`c1`. `c3`指向`null`（`CardBoard.go()`总是返回`null`）。

还要记住，`c1`变量`c2`只是引用，而不是对象。因此它们不需要被垃圾收集。它们生活在堆栈上，而不是堆上。

最后不要被愚弄：

```
CardBoard go(CardBoard cb) {
  cb = null;
  return cb;
} 
```

这只会使`cb`参考（参数）无效，而不是`c2`参考。

* * *

```
Short story = 5; 
```

是一个单独的问题。如果是，`short story`那么它就不会被视为一个单独的对象。But`Short`是一个对象，所以技术上`CardBoard`指向另一个符合 GC 条件的对象。然而！由于原始包装器缓存`5`实际上是`Short`静态缓存的一部分，并且永远不适合 GC。换句话说，`Short`表示类型的对象`5`总是被`static`缓存引用`Short`。

最好的部分来了。如果它是：

```
Short story = 5000; 
```

那么答案将是... **2**。那是因为总是返回（符合 GC 条件）`Short.valueOf((short)5000)`的新实例，而总是返回相同的实例。`Short``Short.valueOf(5)`

哇，这很棘手！

# asp.net-mvc-3 - 绑定到对象的列表属性不返回任何内容 mvc3

> ID：14296769
> 
> 赞同：2
> 
> 时间：2013-01-12T18:49:57.687
> 
> 标签：asp.net-mvc-3, list, binding, properties

上下文：ASP MVC 3/4，VB.net

我正在尝试绑定到具有复杂类型列表属性的对象。
**问题陈述：**在回发时，我在除复杂类型属性之外的所有属性中获取值，它被返回为空。我做错了什么，因为默认模型绑定器无法绑定我的属性，这是一个复杂类型的列表。

我究竟做错了什么？

* * *

我的视图模型类：

```
Public Class Customer  
    Public Property ID As Integer  
    Public Property FirstName As String  
    Public Property LastName As String          
    Public Appointments As IList(Of Appointment)  
End Class  

Public Class Appointment
    Public Property ClientName As String
    Public Property [Date] As DateTime
    Public Property TermsAccepted As Boolean
End Class 
```

我在控制器中的操作方法如下所示

```
 Function CreateCusotmerWithMultipleBookings() As ActionResult
        Dim Modeldata As New Customer With {.ID = 1, .FirstName = "First Name", .LastName = "Last Name"}
        Modeldata.Appointments = New List(Of Appointment) From {New Appointment, New Appointment, New Appointment}
        Return View(Modeldata)
    End Function

    <HttpPost()> _
    Function CreateCusotmerWithMultipleBookings(FormData As Customer) As ActionResult
        Return View(FormData)
    End Function 
```

我的观点是这样的：

```
@ModelType Customer
@Using Html.BeginForm  
@Html.EditorForModel 
If Model.Appointments IsNot Nothing AndAlso Model.Appointments.Count > 0 Then
    For i As Integer = 0 To Model.Appointments.Count - 1
        @:<b >Appointment @i</b><br />
        @Html.TextBoxFor(Function(x) x.Appointments(i).ClientName) @:<br />
        @Html.TextBoxFor(Function(x) x.Appointments(i).Date) @:<br />
        @Html.TextBoxFor(Function(x) x.Appointments(i).TermsAccepted)@:<br />            
    Next
End If
End Using 
```

从这个视图生成的 HTML 类似于：（我删除了不必要的标记以方便阅读）

```
<body>
<form action="/testarea/Appointment/CreateCusotmerWithMultipleBookings" method="post">    
    <input id="ID" name="ID" type="number" value="1" />
    <input class="text-box single-line" id="FirstName" name="FirstName" type="text" value="First Name" />
    <input class="text-box single-line" id="LastName" name="LastName" type="text" value="Last Name" />
    <input id="Appointments_0__ClientName" name="Appointments[0].ClientName" type="text" value="" />
    <input id="Appointments_0__Date" name="Appointments[0].Date" type="text" value="1/1/0001 12:00:00 AM" />
    <input id="Appointments_0__TermsAccepted" name="Appointments[0].TermsAccepted" type="text" value="False" />
    <input id="Appointments_1__ClientName" name="Appointments[1].ClientName" type="text" value="" />
    <input id="Appointments_1__Date" name="Appointments[1].Date" type="text" value="1/1/0001 12:00:00 AM" />
    <input id="Appointments_1__TermsAccepted" name="Appointments[1].TermsAccepted" type="text" value="False" />
    <input id="Appointments_2__ClientName" name="Appointments[2].ClientName" type="text" value="" />
    <input id="Appointments_2__Date" name="Appointments[2].Date" type="text" value="1/1/0001 12:00:00 AM" />
    <input id="Appointments_2__TermsAccepted" name="Appointments[2].TermsAccepted" type="text" value="False" />
    <input type="submit" value="Create customer with multiple appointments" />
</form> 
```

**再次提问：**
为什么下面控制器中的 formdata.Appointments 没有任何价值？

```
 <HttpPost()> _
    Function CreateCusotmerWithMultipleBookings(FormData As Customer) As ActionResult
        Return View(FormData)
    End Function 
```

# regex - 匹配特定文件名

> ID：14296770
> 
> 赞同：0
> 
> 时间：2013-01-12T18:50:03.940
> 
> 标签：regex

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:54:07.410

尝试这个：

```
(^.*)\.(jpg|png|gif)$ 
```

# html - Center div contents when pushed to the next line

> ID：14296772
> 
> 赞同：1
> 
> 时间：2013-01-12T18:50:17.610
> 
> 标签：html, center, screen-size, css

I have a containing div with a max-width set. This div has left and right margins set to auto, so it centers when the user's screen is larger than the max-width. It contains several other divs inside it that float to the left so that they all line up nicely. I set it up this way so that if the user's screen is smaller than the max-width it will push some of the divs to the next line.

This all works great, except that I'd like to be able to center each line. Right now, when some of the divs are pushed to the next line, they all float to the left.

The html:

```
<div id="main_links">
  <div class="main_btn"><a href="about.html"><img src="images/about_btn.png" width="174" height="464" alt="Contact Us" /></a></div>
  <div class="main_btn"><a href="products.html"><img src="images/products_btn.png" width="174" height="464" alt="Products" /></a></div>
  <div class="main_btn"><a href="prom.html"><img src="images/prom_btn.png" width="174" height="464" alt="Prom" /></a></div>
  <div class="main_btn"><a href="weddings.html"><img src="images/weddings_btn.png" width="174" height="464" alt="Wedding Gallery" /></a></div>
  <div class="main_btn"><a href="receptions.html"><img src="images/receptions_btn.png" width="174" height="464" alt="Receptions" /></a></div>
  <div class="main_btn"><a href="flowers.html"><img src="images/flowers_btn.png" width="174" height="464" alt="Flowers" /></a></div>
</div> 
```

and the css:

```
.main_btn   {
float: left;
height: 536px;
width: auto;
background-image: url(../images/btn_reflection.png);
background-repeat: no-repeat;
background-position: center bottom;
margin-right: 30px;
}

#main_links {
height: auto;
max-width: 1250px;
margin-right: auto;
margin-left: auto;
position: relative;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:55:23.887

你可以试试这个css在所有浏览器中都适合你

```
.main_btn   {
    display:inline-block;    
    height: 536px;
    width: auto;
    background-image: url(../images/btn_reflection.png);
    background-repeat: no-repeat;
    background-position: center bottom;
    margin: 0px 10px;
}
#main_links {
    height: auto;
    text-align: center;    
    max-width: 1250px;
    margin: 0px auto;
} 
```

# r - 将多个条件语句应用于一对列表或向量以分配单个字符属性

> ID：14296774
> 
> 赞同：2
> 
> 时间：2013-01-12T18:50:36.237
> 
> 标签：r, if-statement

关于具有多个测量变量的条件语句，我遇到了一些障碍。简而言之，我有两个以向量形式测量的栖息地梯度，一个基于两个栖息地梯度值的栖息地类型分类方案，我想编写一些代码，允许我将所有 5K 样本分类为一个使用两次测量的栖息地类型。如果我一次给它一个样本，我可以生成一些代码，给我一个很好的输出：

（简化版）

```
hab.assign<-function(HabA,HabB){
if(HabA < 5 & HabB < 5){
habitat<-c("Habitat Type 1")} else
if(HabA > 5 & HabB < 5){
habitat<-c("Habitat Type 2")} else
if(HabA < 5 & HabB > 5){
habitat<-c("Habitat Type 3")} else
if(HabA < 5 & HabB < 5){
habitat<-c("Habitat Type 4")}
habitat
} 
```

现在，如果我编写一段代码将该函数应用于整个 5K 样本中的两个向量，可以这样说：

```
all.habs<-function(HabA,HabB){
n<-length(HabA)
hab.units<-vector("character",n)

hab.assign<-function(HabA,HabB){
if(HabA < 5 & HabB < 5){
habitat<-c("Habitat Type 1")} else
if(HabA > 5 & HabB < 5){
habitat<-c("Habitat Type 2")} else
if(HabA < 5 & HabB > 5){
habitat<-c("Habitat Type 3")} else
if(HabA < 5 & HabB < 5){
habitat<-c("Habitat Type 4")}
habitat
}

for(i in 1:n){
ind.hab<-hab.assign()
hab.units[i]<-ind.hab
}
hab.units
} 
```

如果我只给它一个样本，它当然仍然会输出一个有意义的答案，但是完整的向量会给我一个错误消息：

> 警告消息：在 if (HabA < 5 & HabB < 5) { ：条件的长度 > 1 并且只使用第一个元素

有谁知道如何克服这个特殊的障碍？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T18:57:44.793

也许

```
hab.assign <- function(HabA,HabB){
  ifelse(HabA < 5 & HabB < 5,
            "Habitat Type 1",
   ifelse(HabA > 5 & HabB < 5,
            "Habitat Type 2",
   ifelse(HabA < 5 & HabB > 5,
            "Habitat Type 3",
   ifelse(HabA < 5 & HabB < 5,
            "Habitat Type 4","weird habitat"))))
} 
```

对于这个特定问题，可能有更聪明/更快的解决方案，基于基于组合推导整数代码，例如

```
code <- 1+as.numeric(habA>5)+as.numeric(habB>5)*2 
```

对于两个 <= 5 的栖息地，它应该评估为 1，对于`habA<=5`和，应该评估为 2 `habB>5`，依此类推。然后，您可以使用`switch`语句来分配代码，或相应地分配因子的级别。但这种`ifelse`方法可能更具可读性。

# javascript - 移动 Safari 的 onbeforeunload 解决方法？

> ID：14296776
> 
> 赞同：2
> 
> 时间：2013-01-12T18:50:54.453
> 
> 标签：javascript, mobile-safari, onbeforeunload

我需要用户确认她/他真的想离开并且他们的数据没有保存。onbeforeunload 非常适合这种情况，但我刚刚发现它不支持移动 safari。是否可以在 iPhone/iPad 上以任何其他方式达到相同的效果？

# php - 提交点击更改隐藏字段值

> ID：14296777
> 
> 赞同：0
> 
> 时间：2013-01-12T18:50:56.107
> 
> 标签：php, javascript

我有一个包含多个项目和每个项目的 id 的表单，在提交时我希望能够获取被点击的项目的 id - 我尝试使用 js，例如：

```
<form method="post" action="add_item_cart.php">
    <input type="hidden" id="item_id" name="item_id">
    <input name="submit_item" id="btn_sub" onclick="document.getElementById('item_id').value = <?php echo '3'; ?>" type="submit" value="Add">
</form> 
```

我希望能够获取这个值：`$item_id = $_POST["item_id"];`在**add_item_cart.php**上，但这似乎不起作用。

这是我的 js 语法的问题还是我的逻辑无法解决这个问题？是否在更改值之前提交？

编辑：让我们看看我是否可以更好地解释自己，我想动态分配隐藏的值，假设我的表单有 3 个提交按钮（每个显示的项目一个）。根据点击的那个，我想将项目的 id 传递给我的隐藏字段，所以如果我点击 button1 - $_POST["item_id"]=1, button2 - $_POST["item_id"]=2... ETC

这是我的实际形式（非简化示例）

```
<form method="post" action="add_item_cart.php">
                <table style="width:600px">
                    <tr>
                        <?php foreach ($items as $item): ?>
                            <td>
                        <center>
                            <span style="font-size:20px"><?php echo $item["item_name"] ?></span><br/>
                            €&lt;?php echo $item["price"] ?><br/>
                            Quantidade: <input type="text" value="1" style="width:30px"><br/>
                            <input type="hidden" id="item_id" name="item_id">
                            <input name="submit_item" id="btn_sub" onclick="document.getElementById('item_id').value = <?php echo $item["id"]; ?>" type="submit" value="Adicionar">
                        </center>
                        </td>
                    <?php endforeach; ?>
                    </tr>
                </table> 
            </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:54:44.800

**更新**

使用普通按钮而不是提交按钮，并使用 javascript 提交表单。

```
<form method="post" name="f1" action="add_item_cart.php">
<input type="hidden" id="item_id" name="item_id">
<input name="submit_item" id="btn_sub" onclick="document.getElementById('item_id').value = <?php echo '3'; ?>; document.f1.submit();" type="button" value="Add"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:54:45.100

当您的表单发布并且您想首先在 add_item_cart.php 上收集 item_id 值时，您需要实际为 id 分配一个值，如（假设 item_id 是一个 php 变量）。id 仅用于设置 css 编辑而不是值...

```
<input type="hidden" id="item_id" value="<?php echo $item_id; ?>" name="item_id"> 
```

您不能将 id='' 作为值，因为 'value' 是值。

然后，您可以通过以下方式在其他页面上获取该值：

```
<?php
if(isset($_POST['item_id'])){
$item_id = $_POST['item_id'];
}
?> 
```

如果您想在发布后根据您点击的按钮编辑变量，您可以尝试。

```
<input name="submit_item1" id="btn_sub" name="button1" type="submit" value="Add">
<input name="submit_item2" id="btn_sub" name="button1" type="submit" value="Add">
<input name="submit_item3" id="btn_sub" name="button1" type="submit" value="Add"> 
```

然后在您的页面顶部，您可以执行此操作。

```
<?php
if(isset($_POST['submit_item1'])){
$item_id = 1;
}
if(isset($_POST['submit_item2'])){
$item_id = 2;
}
if(isset($_POST['submit_item3'])){
$item_id = 3;
}
?> 
```

如果您从一组项目创建表单，您可以执行类似的操作（假设您以某种方式有一个与这些项目关联的 id；我需要了解有关您如何制作项目列表的更多信息。但它通常会喜欢这个。

```
<?php
foreach($item_array as $item){
?>
<form method="post" action="add_item_cart.php">
    <input type="hidden" id="item_id" name="item_id" value="<?php echo $item['id']; ?>">
    <input name="submit_item" id="btn_sub" type="submit" value="Add">
</form>

<?php
}
?> 
```

然后在您的页面顶部，您可以获得 $_POST['item_id'] 并且由于该值是动态设置的，您不需要任何条件，您可以获取该值并运行任何查询。

# ios - NSCoreData 基类

> ID：14296779
> 
> 赞同：0
> 
> 时间：2013-01-12T18:51:01.630
> 
> 标签：ios, objective-c

我正在制作一个应用程序，我想创建一个数据库，我可以在其中为我的许多不同实体添加注释。为此，我创建了一个基类并将其标记为抽象。然后，我从我的笔记实体到我的基类建立了一对多的关系。然后我创建了我的基类的许多子类。一切都很完美。但是，我查看了创建的数据库，并且...我的所有子类都有一张表（我有很多）。所以我有两个问题

1.  我做对了吗？
2.  如果我所有的托管对象都存储在一张表中，这对性能有影响吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:55:38.707

当您使用核心数据时，您不应该过多关注幕后创建的表。

如果您拥有的数据模型是正确的，那么提取将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:59:10.443

它是一个映射类，有点相似，但当然不同于 ORM（对象关系模型）。

它的表供内部使用，您只处理类和对象。

不用担心它的性能。

# asp.net - CommandArgument 输入字符串的格式不正确

> ID：14296783
> 
> 赞同：1
> 
> 时间：2013-01-12T18:51:20.313
> 
> 标签：asp.net

当我想阅读 e.CommandArgument 时，我收到错误消息“输入字符串的格式不正确。”。我的标记部分如下所示：

```
<asp:GridView ID="GridViewAllProducts" runat="server" 
    AutoGenerateColumns="False" GridLines="None"
             AllowPaging="True" Width="100%"
             EmptyDataText="هیچ محصولی پیدا نشد" 
            onrowcommand="GridViewAllProducts_RowCommand" 
    onrowdeleting="GridViewAllProducts_RowDeleting"
    OnPageIndexChanging="GridViewAllProducts_PageIndexChanging">
            <Columns>
                <asp:TemplateField>
                    <ItemTemplate>
                        <div class='rowTableDiv rowAllNewsUC'>
                            <asp:HiddenField ID="hiddenId" runat="server" Value='<%# Bind("Id") %>' />
                            <img id="imgImage" src='<%# Bind("Image") %>' class="imgNewsAllNewsUC noBorder" alt="" runat="server" />
                            عنوان محصول:&nbsp;<asp:Label ID="lblTitle" runat="server" Text='<%# Bind("Title") %>'></asp:Label><br />
                            گروه:&nbsp;<asp:Label ID="lblCategory" runat="server" Text='<%# ProductC.GetProductCategoryName(Convert.ToInt32(Eval("CategoryId"))) %>'></asp:Label><br />
                            کد:&nbsp;<asp:Label ID="lblCode" runat="server" Text='<%# Bind("Code") %>'></asp:Label><br />
                            ابعاد:&nbsp;<asp:Label ID="lblDimention" runat="server" Text='<%# Bind("Dimention") %>'></asp:Label><br />
                            تعداد رنگ:&nbsp;<asp:Label ID="lblNumberOfColors" runat="server" Text='<%# Bind("NumberOfColors") %>'></asp:Label><br />
                            قیمت:&nbsp;<asp:Label ID="lblPrice" runat="server" Text='<%# nmsPublicClass.PublicClassC.ThousandSeparator(Convert.ToDecimal(Eval("Price"))) %>'></asp:Label>
                            <asp:LoginView ID="LoginView1" runat="server">
                                <RoleGroups>
                                    <asp:RoleGroup Roles="Administrator">
                                        <ContentTemplate>
                                            <div class='rowTableDiv rowInfoAllNewsUC'>
                                                <asp:Panel ID="pnlEdit" CssClass='colTableDiv' runat="server">
                                                    <div class='colTableDiv colInfoAllNewsUC'>
                                                        <asp:LinkButton ID="lbEdit" 
                                                            CommandArgument='<%# Bind("Id") %>' 
                                                            PostBackUrl='<%# String.Format("~/Page/Admin/InsertProduct.aspx?Mode=Edit&Id={0}", Eval("Id"))%>' 
                                                            Font-Underline="false" 
                                                            CommandName="edit" 
                                                            runat="server">
                                                            <img id='img2' class='noBorder imgEditAllNewsUC' src="../../image/note_edit.png" alt="ویرایش" />
                                                        ویراش</asp:LinkButton>
                                                         <asp:LinkButton ID="lbDelete" CommandArgument='<%# Bind("Id") %>' Font-Underline="false" CommandName="delete" runat="server">
                                                            <img id='img1' class='noBorder imgEditAllNewsUC' src="../../image/delete.png" alt="حذف" />
                                                        حذف</asp:LinkButton>
                                                    </div>
                                                </asp:Panel>
                                            </div>
                                        </ContentTemplate>
                                    </asp:RoleGroup>
                                </RoleGroups>
                            </asp:LoginView>
                            <div class="divHidden">
                                <asp:Label ID="lblID" runat="server" Text='<%# Eval("ID") %>'></asp:Label>
                            </div>
                        </div>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
            <EmptyDataRowStyle CssClass="lblError" />
            <PagerStyle CssClass="pagerGridView" />
        </asp:GridView> 
```

我背后的代码如下：

```
protected void GridViewAllProducts_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "delete")
    {
        int productId = Convert.ToInt32(e.CommandArgument);

        string image = new ProductC().GetProductBy_Id(productId).Image;

        Result r = new ProductC().DeleteBy_Id(productId);
        if (r.IsSuccess)
        {
            File.Delete(Server.MapPath(image));
        }

        GridViewAllProducts.DataSource = new ProductC().GetAllProducts();
        GridViewAllProducts.DataBind();
    }
} 
```

我在以下行收到错误“*输入字符串的格式不正确。 ”：*

```
int productId = Convert.ToInt32(e.CommandArgument); 
```

问题是什么。请帮我。谢谢你。

# iphone - 应用内购买弹出文本

> ID：14296784
> 
> 赞同：2
> 
> 时间：2013-01-12T18:51:28.960
> 
> 标签：iphone, ipad, ios5, ios6, in-app-purchase

我面临一个奇怪的问题。当用户在应用内购买中按下取消按钮时，弹出窗口会隐藏，但当他再次按下取消按钮时，弹出窗口会出现两次。这正在被 100% 复制。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T05:02:47.663

它可能正在实施中的某个地方

```
[[SKPaymentQueue defaultQueue] finishTransaction:transaction]; 
```

在调用 SKPaymentTransactionStatePurchased 之后。如果您期待更多帮助，也许您应该首先显示您的代码。

# arrays - FORTRAN 95，数组必须有恒定的形状错误

> ID：14296787
> 
> 赞同：5
> 
> 时间：2013-01-12T18:52:35.327
> 
> 标签：arrays, fortran

我是 Fortran95 的绝对初学者，所以我为这个问题的简单性道歉。我希望能够用整数定义数组的维度，但我得到了错误

'（1）处的模块或主程序数组'arrayx'必须具有恒定的形状'

并且“变量 'y' 不能出现在 (1) 处的表达式中”（x 的错误相同）。是根本不可能根据变量来定义维度，还是我只是遗漏了一些明显的东西。

```
program arrayForm
    implicit none
    integer, save :: x=40, y=2
    real, dimension(x,y) :: arrayX
end program arrayForm 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T18:57:54.260

具有属性的变量`save`不是常量，编译器会抱怨。在您的代码段中，将该属性替换为`parameter`使它们保持不变的属性，并且在编译时，数组的大小可以固定，编译器不应该抱怨。

当您使用它时，该`save`属性是多余的。当应用于可能超出范围的变量时，例如在子例程或函数范围内的变量，它要求将变量的值从子范围的一次调用保存到下一次调用。但是由于您的变量是在程序范围内声明的，因此它们在执行期间永远不会超出范围。

另请注意，Fortran 对新（和旧）程序员的问题之一是在其声明中初始化的变量会`save`自动获取属性。所以，在一个子程序中你的行

```
integer, save :: x=40, y=2 
```

可以简单地写成

```
integer :: x=40, y=2 
```

就我个人而言，我倾向于使用该`save`属性，以便以后我在编写子例程时的意图对我来说很清楚。

# java - java sql语法错误与createStatement

> ID：14296788
> 
> 赞同：1
> 
> 时间：2013-01-12T18:52:38.520
> 
> 标签：java, sql, jdbc

我有一个`sysuser`如下所示的 sql 表：

`id (pk)` `email` `password` `role`

我想将值插入表中。我得到数据`ArrayList<String>`：

```
cell 0 no value,
cell 1 ID,
cell 2 email,
cell 3 password,
cell 4 role, 
```

这是我写的代码：

```
stmt.executeUpdate("INSERT INTO sysuser VALUES ('"+string.get(1)+"', '"+ string.get(2) +"','"+ string.get(3) +"','"+string.get(4)+"'"); 
```

其中字符串是`ArrayList<String>`.

代码不起作用，我不知道为什么。它与另一个查询完美配合。我收到以下错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '' 附近使用正确的语法

我阅读了有关准备好的语句，但我不理解语法。我知道直接插入数据是不安全的，但是对于这个特定的查询，这并不重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T18:54:17.270

你忘了一个`)`

```
stmt.executeUpdate("INSERT INTO sysuser " + 
                    "VALUES ('" + string.get(1) + "','"+ 
                                  string.get(2) + "','"+ 
                                  string.get(3) + "','"+
                                  string.get(4) + "')");
                                                    ^------------here 
```

如果您没有填写表格的所有列，则应提供您要插入的列列表，如下所示

```
INSERT INTO sysuser (col_name_1, col_name2, col_name5, col_name7)
VALUES (1, 2, 3, 4) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:59:12.187

尝试首先打印此语句生成的 sql。

```
String sql = "INSERT INTO sysuser VALUES ('"+string.get(1)+"', '"+ string.get(2) +"','"+ string.get(3) +"','"+string.get(4)+"'";
System.out.println(sql);
stmt.executeUpdate(sql); 
```

然后在您最喜欢的 SQL 工具中运行并检查它给出的错误。并在此处发布两个结果。:)

稍后检查此链接：[Preventing_SQL_Injection_in_Java](https://www.owasp.org/index.php/Preventing_SQL_Injection_in_Java)

# python - python scipy leastsq 适合复数

> ID：14296790
> 
> 赞同：1
> 
> 时间：2013-01-12T18:53:19.203
> 
> 标签：python, scipy, least-squares, cmath

我有一个复数数据集，我希望能够找到最适合数据的参数。你能用 Python 中的 scipy 实现的 minimumsq 来拟合复数中的数据吗？

例如，我的代码是这样的：

```
 import cmath
 from scipy.optimize import leastsq
 def residuals(p,y,x):
      L,Rs,R1,C=p
      denominator=1+(x**2)*(C**2)*(R1**2)
      sim=complex(Rs+R1/denominator,x*L-(R1**2)*x*C/denominator)
      return(y-sim)

 z=<read in data, store as complex number>
 x0=np.array[1, 2, 3, 4]
 res = leastsq(residuals,x0, args=(z,x)) 
```

但是，`residuals`不喜欢使用我的复数，我收到错误：

```
File "/tmp/tmp8_rHYR/___code___.py", line 63, in residuals
    sim=complex(Rs+R1/denominator,x*L-(R1**_sage_const_2 )*x*C/denominator)
  File "expression.pyx", line 1071, in sage.symbolic.expression.Expression.__complex__ (sage/symbolic/expression.cpp:7112)
TypeError: unable to simplify to complex approximation 
```

我猜我只需要使用浮点数/双精度数而不是复数。在这种情况下，我如何分别评估真实和复杂的部分，然后将它们重新组合成一个单一的错误度量`residuals`以返回？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:35:38.393

scipy 中的最小二乘函数希望返回一个真实的残差，因为它很难比较复杂的值（例如，1+2j 是大于还是小于 2+1j？）。请记住，残差本质上是对传入参数集质量的衡量，它告诉 leastsq 它与真实拟合的接近程度。

您可以做的是在正交中添加误差（y-sim），在您在残差函数中计算“sim”之后附加这些行：

```
a = y-sim
return a.real**2 + a.imag**2 
```

只要 y 和 sim 都是 np.array 的复数，那么这将起作用并且相对有效。

# django - Haystack/Whoosh 搜索带有 at 符号的电子邮件地址？

> ID：14296792
> 
> 赞同：0
> 
> 时间：2013-01-12T18:53:22.133
> 
> 标签：django, autocomplete, django-haystack, whoosh

我正在使用一个简单的开箱即用的 Django/Haystack/Whoosh 设置，仅用于自动完成目的，除了尝试搜索电子邮件地址外，一切正常。如果我输入`joe`，我将获得名称/电子邮件地址以 开头的所有对象`joe`，但如果我输入`joe@`，我不会只获得具有`joe@`电子邮件地址的对象。就好像`@`符号被忽略了，无论我是否逃避它。我在 Haystack 帮助或网络上的任何地方都找不到任何东西。如何让 Haystack（或者是 Whoosh？）识别`@`符号？

```
...
class ContactIndex(indexes.SearchIndex):
    text = indexes.EdgeNgramField(document=True, use_template=True)
    full_name = indexes.CharField(model_attr='full_name', null=True)
    email = indexes.CharField(model_attr='email', null=True)
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:31:34.687

您需要在[whoosh/qparser/default.py中查看 QueryParser](https://bitbucket.org/mchaput/whoosh/src/74dc6350fbcad97eae278bea4ec5dcafd2a308c2/src/whoosh/qparser/default.py?at=default#cl-38)

haystack 自身不解析查询字符串 [whoosh_backend.py#L370](https://github.com/toastdriven/django-haystack/blob/master/haystack/backends/whoosh_backend.py#L370)

# css - W3C 验证 - Wordpress 文档类型

> ID：14296795
> 
> 赞同：0
> 
> 时间：2013-01-12T18:53:29.623
> 
> 标签：css, wordpress, validation, w3c

我提交了以下站点进行验证，并收到此错误：

[网站链接](http://run-time.co.za/testing)

错误：

```
No DOCTYPE found! Checking with default XHTML 1.0 Transitional Document Type.

No DOCTYPE Declaration could be found or recognized in this document. This generally means that the document is not declaring its Document Type at the top. It can also mean that the DOCTYPE declaration contains a spelling error, or that it is not using the correct syntax.

The document was checked using a default "fallback" Document Type Definition that closely resembles “XHTML 1.0 Transitional”. 
```

我尝试将 DOC 类型更改为：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

但是它仍然会发现错误？

任何建议将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T19:00:46.083

我在您的源代码顶部看不到文档类型。我添加了一个并通过[W3 检查器](http://validator.w3.org/check)手动验证了代码，并且它在没有警告的情况下通过了与文档类型相关的代码。

这是我添加的文档类型

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

# android - 水平可滚动的 TextView

> ID：14296804
> 
> 赞同：0
> 
> 时间：2013-01-12T18:54:00.887
> 
> 标签：android, android-layout

当输入文本不适合它时，我有 TextView 会自动从左到右滚动。现在，当文本不适合它时，我需要添加在 TextView 中水平滚动文本的功能 - 这样用户就可以查看 TextView 的内容。我将 TextView 添加到 Horizo​​ntalScrollView：

```
<HorizontalScrollView
        android:id="@+id/horizontalScrollView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@+id/btnBackspace"
        android:layout_toRightOf="@+id/textViewLeftIndent"
        android:fillViewport="true" >

        <TextView
            android:id="@+id/calculateField"
            android:layout_width="534dp"
            android:layout_height="wrap_content"
            android:background="@color/lightgray"
            android:focusable="true"
            android:focusableInTouchMode="true"
            android:gravity="center_vertical|right"
            android:inputType="textImeMultiLine"
            android:overScrollMode="ifContentScrolls"
            android:scrollHorizontally="true"
            android:text=""
            android:textSize="80sp" >

        </TextView>

    </HorizontalScrollView> 
```

但是现在我可以通过虚拟键盘 TextView 进行编辑，并且无法滚动全文，只能滚动其中的一部分（当文本很大时）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:00:09.233

将此添加到您的 TextView 小部件

```
android:ellipsize="marquee" 
```

并检查它现在是否有效

更新

它不起作用添加这个

```
android:singleLine=”true” 
```

# c# - 无法从写入为 BackgroundWorker 的列表中读取元素

> ID：14296810
> 
> 赞同：0
> 
> 时间：2013-01-12T18:54:37.370
> 
> 标签：c#, list

读取字符串列表时遇到问题，这是我的代码。

```
public partial class form : Form
{
    public static List<String> errores = new List<String>();

   private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e){

        BackgroundWorker bw = sender as BackgroundWorker;

        // Extract the argument. 
        string arg = (string)e.Argument;

        // Start the time-consuming operation.
        //  e.Result =
        if (tags.prog2(arg) == false)
        {
            //guardar en lista de no completadas
            form.errores.Add("a");

        }
  //some code here
        }

    private void buscar()
    {

    //Some code here
        foreach (string i in rutas)
            {
                backgroundWorker1 = new System.ComponentModel.BackgroundWorker();

                backgroundWorker1.WorkerSupportsCancellation = true;
                backgroundWorker1.DoWork += new System.ComponentModel.DoWorkEventHandler(this.backgroundWorker1_DoWork);
                backgroundWorker1.RunWorkerCompleted += new System.ComponentModel.RunWorkerCompletedEventHandler(this.backgroundWorker1_RunWorkerCompleted);
                backgroundWorker1.RunWorkerAsync(i);                    

            }
          foreach (string prime in form.errores)
            {
                MessageBox.Show(prime);
            }
    }
} 
```

但是列表中没有元素，为什么会发生这种情况？

显然我调用了这两个函数

**Aclaration** function1它是一个backgroundWorker，所以它被调用了太多次，我不知道这是否与错误有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:06:18.177

> Aclaration function1它是一个backgroundWorker，所以它调用了太多次，我不知道这是否与错误有关

似乎`read()`在调用之前`function1()`调用。由于 function1 被调用`BackgroundWorker`它是很有可能的。

您应该保留一个标志来指示是否`function1`被调用。如果没有调用，您应该采取预防措施。

作为参考，以下代码运行良好（并产生`"aaa"`输出）

```
form f = new form(); 
f.Test(); 
```

* * *

```
public partial class form 
{
    public static List<String> errores = new List<String>();

    private void function1()
    {
        form.errores.Add("aaa");
    }

    //Now I try to read it in other function.

    private void read()
    {
        foreach (string i in form.errores)
        {
            Console.WriteLine(i);
        }
    }

    public void Test()
    {
       function1();
       read();
    }
} 
```

# java - java.security.InvalidAlgorithmParameterException：在 RC6 和 RC2 中

> ID：14296815
> 
> 赞同：-1
> 
> 时间：2013-01-12T18:54:58.843
> 
> 标签：java, encryption, cryptography

我是安全新手，我尝试了很多来删除异常（在代码下方）。RC2 和 RC6 密码都给出了这个例外。输入应该是 128 位`String`和 128 位的密钥，输出应该是 128 位密文。

```
import java.security.spec.AlgorithmParameterSpec;
import javax.crypto.Cipher;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;
import java.util.*;

public class RC2Encrypt
{
    public static void main(String args []) throws Exception
    {
        Scanner s=new Scanner(System.in);
        System.out.println("Enter PlainTextString:");
        String input=s.nextLine();

        System.out.println();
        System.out.println("Enter 16 digit key:");
        String strPassword=s.nextLine();

        SecretKeySpec key = new SecretKeySpec(strPassword.getBytes(), "RC2");
        AlgorithmParameterSpec paramSpec = new IvParameterSpec(strPassword.getBytes());
        Cipher cipher =  Cipher.getInstance("RC2");
        cipher.init(Cipher.ENCRYPT_MODE, key, paramSpec);

        byte[] encrypted = cipher.doFinal(input.getBytes());

        String b1 = new String(encrypted);
        System.out.println("Original string: " + input);
        System.out.println("Encrypted string: " + b1);
    }
} 
```

* * *

这将产生以下异常：

```
Exception in thread "main" java.security.InvalidAlgorithmParameterException: Wrong IV    length: must be 8 bytes long
    at com.sun.crypto.provider.SunJCE_f.a(DashoA13*..)
    at com.sun.crypto.provider.RC2Cipher.engineInit(DashoA13*..)
    at javax.crypto.Cipher.a(DashoA13*..)
    at javax.crypto.Cipher.a(DashoA13*..)
    at javax.crypto.Cipher.init(DashoA13*..)
    at javax.crypto.Cipher.init(DashoA13*..)
    at RC2Encrypt.main(RC2Encrypt.java:40) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:41:15.150

我当然会推荐一种不同的算法，因为 RC2 非常弱。据我所知，JRE 没有捆绑 RC6 支持。

您可以按如下方式使用 TDES：

```
SecretKeySpec key = new SecretKeySpec(keyBytes, "DESede");
IvParameterSpec ivSpec = new IvParameterSpec(ivBytes);
Cipher cipher = Cipher.getInstance("DESede/CBC/PKCS5Padding");
cipher.init(Cipher.ENCRYPT_MODE, key, ivSpec);
byte[] encrypted = cipher.doFinal(input.getBytes()); 
```

请注意，您确实需要指定一个由随机字节组成的[初始化向量](http://en.wikipedia.org/wiki/Initialization_vector)，当然*不是*您的密钥（就像在您的代码中一样）。此外，TDES 需要 128 位或 192 位密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T13:10:44.693

您的代码存在多个问题。

最重要的是你混淆了字符和字节。您将必须了解[字符编码](/questions/tagged/character-encoding "显示标记为“字符编码”的问题")- 这是关于将文本编码为二进制并返回 - 和[编码](/questions/tagged/encoding "显示标记为“编码”的问题")- 这是关于将二进制编码为可读文本。

如果您期望 8 个字节由 16 个字符编码，那么这意味着您需要执行十六进制解码（每个字节使用两个字符）。最好的方法是使用 Apache 通用编解码器库或 Bouncy Castle 库。我建议使用后者，因为它包含更多的加密算法——包括 RC6。最好的方法是将 Bouncy Castle 提供程序用于加密功能。

好的，这样就解决了带有密钥和 IV 的部分，现在是纯文本。纯文本必须是二进制编码的。不幸的是，您现在使用的是平台默认字符集。这意味着如果您想与另一个系统（或其他应用程序，即使在您自己的 PC 上，如果它使用另一个字符集）交换它，您将遇到兼容性问题。要消除此问题，您应该自己指定编码，例如`String.getBytes(Charset.forName("UTF-8"))`在 Java 7 及更高版本上使用 或`String.getBytes(StandardCharsets.UTF_8)`。对构造函数执行相同的操作。

此外，您真的不应该为密钥和 IV 使用相同的字节。IV 用于使用相同的密钥加密多个密文，而不会引入安全漏洞。例如，攻击者可以知道第一个不那么秘密的密文包含单词“yes”。然后下一个密码块出现并包含完全相同的字节；显然，发件人再次发送了“是”这个词。如果 IV 被更改，攻击者将看到一个完全不同的密文——尽管对于流密码来说它仍然是 3 个字节长。

最后，密钥和 IV 应该是随机生成的——可能在过去的某个时间。如果需要密码而不是密钥，则应使用 PBKDF（基于密码的密钥派生函数）作为次优替代。但我认为这可能是一个更高级的话题。

# android - 如何在 Android 中正确输出日期格式

> ID：14296816
> 
> 赞同：0
> 
> 时间：2013-01-12T18:55:04.487
> 
> 标签：android, sqlite

我正在学校开发一个安卓应用程序。我目前正在构建一个记事本。我想知道是否有任何方法可以获取日期并将其作为日期格式存储到 sqlite 数据库中，然后，当我从数据库中检索它并将其写入我的文本视图时，我可以显示`hh::mm`注释是否是今天写/修改，或者`dd/mm/yy`如果它是（假设）昨天写的。为了更清楚：

1.  我写笔记
2.  我知道日期
3.  我将所有内容都插入到我的数据库表中
4.  将数据检索到 ListView
5.  对于每个注释，我想以正确的格式显示日期，（如果日期是同一天，则只显示 hh:mm，如果是昨天写的，则显示昨天，否则显示 dd/mm/yy

此外，哪种方式更好地将日期存储到数据库中，作为日期格式？我在网上搜索，似乎有几种方法可以做到这一点，哪一种最好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T19:12:10.093

日期可以转换为`long`值（从 1970 年 1 月 1 日 00:00:00 UTC+0000 开始的毫秒数）。

这肯定是最方便的日期表示：

1.  `System.currentTimeMillis()`以这种格式返回当前日期；
2.  此格式用于设置警报，使用`AlarmManager`;
3.  易于确定哪个日期更早（只需比较两个长值 - 越少越早）；
4.  易于存储在数据库中或使用`SharedPreferences`.

`Calendar`Java中日期操作的标准类也支持这种格式-它具有`setTimeInMillis()`和`getTimeInMillis()`功能。

有关更多详细信息，请参阅有关[`Calendar`](http://developer.android.com/reference/java/util/Calendar.html)类的文档。

至于不同的日期格式，请查看[`SimpleDateFormat`](http://developer.android.com/reference/java/text/SimpleDateFormat.html)课程。

# wpf - 动画未在 WPF 3D 中运行

> ID：14296823
> 
> 赞同：0
> 
> 时间：2013-01-12T18:55:32.940
> 
> 标签：wpf, animation, 3d, transformation

有人可以帮我找出为什么这不起作用：

```
var story = new Storyboard {Duration = TimeSpan.FromSeconds(10)};

var meshBuilder = new MeshBuilder();
meshBuilder.AddCone(new Point3D(0, 0, 0), new Vector3D(0, 0, 1), 15, 10, 50, false, false, 20);

var mesh = meshBuilder.ToMesh();
var geometryModel = new GeometryModel3D
{
    Geometry = mesh,
    Material = new DiffuseMaterial(new SolidColorBrush(Colors.DeepSkyBlue)),
    BackMaterial = new DiffuseMaterial(new SolidColorBrush(Colors.LightBlue)),
};
var modelVisual = new ModelVisual3D { Content = geometryModel };
helixViewport.Children.Add(modelVisual);

var scaleAnimation = new DoubleAnimation
{
    BeginTime = TimeSpan.FromSeconds(1),
    From = 1,
    To = 2,
    Duration = new Duration(TimeSpan.FromSeconds(10))
};
var scaleTransform3D = new ScaleTransform3D(1, 1, 2);

var transform3DGroup = new Transform3DGroup();
transform3DGroup.Children.Add(scaleTransform3D);

modelVisual.Transform = transform3DGroup;

story.Children.Add(scaleAnimation);
Storyboard.SetTargetProperty(scaleAnimation, new PropertyPath(ScaleTransform3D.ScaleZProperty));
Storyboard.SetTarget(scaleAnimation, modelVisual);

story.Begin(); 
```

首先，我只是使用 HelixToolkit 创建一个圆锥体，然后我想对其进行缩放。动画将持续 10 秒，从第 1 秒开始，持续 10 秒。但是动画没有执行，视口只显示了缩放后的最终结果。 **注意**：这是整个代码的简化部分，实际代码将多个动画应用于多个模型，每个动画将在不同的时间开始。这就是为什么我想在这里使用故事板和 BeginTime。请帮我找出我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:51:14.510

您正在尝试为不具有该属性`ScaleTransform3D.ScaleZProperty`的 type 对象设置动画。`ModelVisual3D`你应该改变

```
var path = "Transform.Children[0].ScaleZ";
Storyboard.SetTargetProperty(scaleAnimation, new PropertyPath(path));
Storyboard.SetTarget(scaleAnimation, modelVisual); 
```

您还可以通过省略 Storyboard 来简化代码。打电话

```
scaleTransform3D.BeginAnimation(ScaleTransform3D.ScaleZProperty, scaleAnimation) 
```

`scaleTransform3D`此外，您应该使用值 1 进行初始化`ScaleZ`，因为您希望将动画`ScaleZ`从 1 变为 2。

```
var scaleTransform3D = new ScaleTransform3D(1, 1, 1); 
```

或使用默认构造函数，因为所有比例值默认为 1。

```
var scaleTransform3D = new ScaleTransform3D(); 
```

# c# - 如何将图像 URL 设置为绝对物理路径？

> ID：14296825
> 
> 赞同：0
> 
> 时间：2013-01-12T18:55:39.657
> 
> 标签：c#, asp.net, relative-path, imageurl

我在网格视图中有图像按钮控件我的客户需要在另一个页面中输入文件夹路径我将此路径存储在我需要的数据库中因为客户将图像存储在外部硬盘中无法将图像从硬盘传输到网站图像因为它有巨大的尺寸

当用户显示网格视图时，我的图像表包含图像名称我将数据库中的图像名称和数据库中的路径连接起来我该怎么做

```
 <asp:TemplateField HeaderText="photo">
           <ItemTemplate >

               <asp:ImageButton ID="ImageButton1" runat="server" ImageUrl='<%# GetImagePath()+Eval("ImageName")  %>'  Width="100px" Height="100px" Style="cursor: pointer" OnClientClick = "return LoadDiv(this.src);" /> 
           </ItemTemplate>
           </asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T19:02:28.757

你需要在你的函数中写下这样的

```
public string GetImage(string name)
{
  string path = Path.Combine(Server.MapPath(("~/Admin/Images/" , name)); 
  return path;
} 
```

或者

你也可以这样做

```
void GrdVw_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if(e.Row.RowType == DataControlRowType.DataRow)
    {
        Image rowImage = (Image) e.Row.FindControl("currentDocFile");
        rowImage.ImageUrl = whatever;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T19:44:54.433

I suggest pass the image name as parameter to GetImagePath Try this:

```
public string GetImagePath(string imageName)
{
   return VirtualPathUtility.ToAbsolute("~/images/" + imageName);
} 
```

VirtualPathUtility.ToAbsolute(string) converts a virtual path to an application absolute path. So you will get something like "/images/yourimage.jpg".

# python - 如何在循环中过滤 Python 3 中的数字列表并更改列表长度

> ID：14296826
> 
> 赞同：1
> 
> 时间：2013-01-12T18:55:44.957
> 
> 标签：python, list, loops, filter, python-3.x

使用 PYTHON 3。我想在 LOOP 内创建一个新列表（浮点数），而不更改列表的名称，这将删除所有负数或零元素，最终改变其长度。谁是最快的方法？我一直在努力做最后几天......

（更新）

**一个例子：**

```
import math

l= [0.]*10

for i in range(1,10):

l[i] = math.sin(i)

l = [x for  x in l if x > 0]

print(i, l[i]) 
```

仍然无法正常工作...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T19:01:19.337

我可以给你的一种方法：

```
new_list = [x for x in yourlist if not x <= 0 ] 
```

我试过像：

```
>>> yourlist = [1, -2 , 0 , 3.9 , 4 , -5.8, -3.0 ]
>>> new_list = [x for x in yourlist if not x <= 0 ] 
>>> print new_list
[1, 3.9, 4] 
```

**编辑：**

第二种方法：

```
L = [1, -2 , 0 , 3.9 , 4 , -5.8, -3.0 ]
out = []
for i in L[:]:
 if i > 0:
  out.append(i)

print out 
```

**EDIT2：**
正如您对我的回答所评论的那样，您可能需要这个：
第三种方式：

```
L = [1, -2 , 0 , 3.9 , 4 , -5.8, -3.0 ]
for obj in L[:]:
 if obj <= 0:
  del L[L.index(obj)]

print L 
```

**EDIT3** 您的*（更新的）*代码 中的错误

在您的代码中：

```
import math
l= [0.]*10

for i in range(1,10):
 l[i] = math.sin(i)

l = [x for  x in l if x > 0]
print(i, l[i]) 
```

你到`IndexError`了这`print(i, l[i])`条线。因为之后`for-loop`的值`i`变成`9`。并且在打印语句之前，您从列表中删除了一些元素，`l = [x for x in l if x > 0]`因此列表的大小`l`尖叫到小于 < 的值`i`。并且`print(i, l[i])`您正试图在`i`错误的位置建立索引！

你想要什么？如果要打印列表中的最后一个元素，请执行以下操作：

```
print(i, l[len(l)-1]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T19:01:06.973

```
my_list = [i for i in my_list if i>0] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T19:18:00.817

假设我们有一个列表`l = [-2, -1.4, 0, 1, 2.2, 3]`

第一种方法是简单地使用列表推导，并将列表名称设置为引用创建的新列表。

```
l = [i for i in l if i > 0] 
```

另一种方法是遍历列表的副本，并删除小于或等于 0 的元素：

```
for i in l[:]:
    if i <= 0:
        l.remove(i) 
```

无论结果如何`[1, 2.2, 3]`

* * *

**编辑**您的更新：

```
import math
l = []
for i in range(1, 10):
    v = math.sin(i)
    if v > 0:
        l.append(i)

for v in l:
    print(v) 
```

将忽略所有带有 0 或负罪的数字，导致：

```
0.841470984808
0.909297426826
0.14112000806
0.656986598719
0.989358246623
0.412118485242 
```

* * *

**EDIT2**如果您还需要原始号码，我会使用**字典**：

```
import math
d = {}
for i in range(1, 10):
    v = math.sin(i)
    if v > 0:
        d[i] = v

for k in d:
    print(k, d[k]) 
```

或**元组**：

```
import math
l = []
for i in range(1, 10):
    v = math.sin(i)
    if v > 0:
        l.append((i, v))

for t in l:
    print(t[0], t[1]) 
```

这将导致：

```
1 0.8414709848078965
2 0.9092974268256817
3 0.1411200080598672
7 0.6569865987187891
8 0.9893582466233818
9 0.4121184852417566 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T19:05:35.037

有两种方法可以轻松地从可迭代对象中过滤元素：

```
output = [i for i in input if i > 0] 
```

或者：

```
output = filter(lambda i: i > 0, input) 
```

请注意， [ `filter(function, iterable)`][1] 返回一个迭代器，所以`output = list(output)`如果您需要一个列表对象，只需执行类似的操作。

# c# - 如何使用 ProgressRing 显示进度文本

> ID：14296830
> 
> 赞同：0
> 
> 时间：2013-01-12T18:56:17.557
> 
> 标签：c#, windows-runtime, winrt-xaml

如何使用`ProgressRing`控件显示有关进度的文本（不一定是 %）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:17:44.990

您应该创建从 ProgressRing 继承的自定义控件并更改标准 ProgressRing [ControlTemplate](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj709924.aspx)。

[示例](http://shreychouhan.blogspot.ru/2011/04/extend-functionality-to-wpf-control.html)你怎么能做到。WinRT 的另一个[示例](http://brianlagunas.com/2012/03/06/create-your-first-winrt-watermarktextbox-control/)。

**更新** `ProgressRing`已密封。

您可以尝试将`TextBlock`您的`ProgressRing`并直接写入您的进度信息`TextBlock`。

# python - Pyinstaller onefile 找不到数据文件

> ID：14296833
> 
> 赞同：3
> 
> 时间：2013-01-12T18:56:52.407
> 
> 标签：python, exe, executable, pyinstaller

我也是第一次尝试构建一个简单的 --onefile exe，其中包含数据文件，但是 Pyinstaller 在构建 .exe 时似乎没有找到它们。一个 --onedir 构建似乎工作正常。

此时我也在使用 --debug 开关。我能够运行 onefile 可执行文件，并且可以看到它似乎开始工作了。程序找到 (sys._MEIPASS) 临时目录正常（按指示打印所需的目录名称），但在从临时目录中查找第一个数据文件时报告“没有此类文件或目录”错误。我在 .exe 上使用了 archiveviewer.py 并没有在那里找到所需的数据文件——这似乎是问题所在，但我不知道为什么。构建的数据文件位于规范文件描述的目录中。我完整的规格文件是

```
# -*- mode: python -*-

a = Analysis(['develop6.py'],
         pathex=['C:\\PYINST20'],
         hiddenimports=[],
         hookspath=None)

a.datas += [ ('conlist.txt', 'C:\\pyinst20\\conlist.txt', 'DATA'), ('imageblank.gif', 'C:\\pyinst20\\imageblank.gif', 'DATA')]

pyz = PYZ(a.pure)

exe = EXE(pyz,
      a.scripts,
      a.binaries,
      a.zipfiles,
      a.datas,
      name=os.path.join('dist', 'develop6.exe'),
      debug=True,
      strip=None,
      upx=True,
      console=True ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-01-17T04:51:43.590

（这个问题很老，但它是我发现解决同一问题的唯一来源之一，我将在这里分享我的解决方案，以防它可以帮助某人）

在 --onefile 模式下将数据文件添加到脚本中需要做两件事。

## 1.调整路径

在您的脚本中，调整您的路径以在包中查找数据文件。根据[此处](https://pythonhosted.org/PyInstaller/runtime-information.html#using-file-and-sys-meipass)的 PyInstaller 文档，可执行文件是从临时文件启动的，因此您的路径必须处理此动态部分：

对于具有以下相对路径的文件：./your/file/is/here.ext

代码将是：

```
import sys
wd = sys._MEIPASS
file_path = os.path.join(wd,<your>,<file>,<is>,<here>) 
```

注意：要使您的代码也适用于其他上下文，您可以执行以下操作：

```
import sys
import os
try:
   wd = sys._MEIPASS
except AttributeError:
   wd = os.getcwd()
file_path = os.path.join(wd,<your>,<file>,<is>,<here>) 
```

## 2\. 在 PyInstaller 规范中添加数据文件路径

根据[此处](https://pythonhosted.org/PyInstaller/spec-files.html#adding-files-to-the-bundle)的 PyInstaller 文档，有两种方法可以将数据文件添加到包中：

1.  从脚本目录`--add-files`运行时将选项和文件作为参数传递`pyinstaller <yourscript.py>`

2.  首先通过导航到您的脚本目录并运行来生成一个规范文件`pyi-makespec <yourscript.py>`，然后将您的文件添加到元组列表中`data=[]`。元组包含文件的实际路径和包中的路径。如果您遵循第一点，这应该看起来像 `datas = [('/your/file/is/here.ext','/your/file/is/')]`

然后`PyInstall <yourscript.spec>`根据您的规范文件运行以构建捆绑包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-09T11:45:27.317

使用像 AutoPyToExe 这样的应用程序可以解决您在使用 PyInstaller 时遇到的大部分挑战。该界面允许您解决您在此处列出的大部分挑战。通过简单地选择文件的位置而不是移动它们，查看附件，了解如何隐藏文件、数据文件、干净构建等等。

[![在此处输入图像描述](../Images/09d6e00192e1eb887e916d212f12e590.png)](https://i.stack.imgur.com/a1XAq.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-27T06:12:58.910

在[令人困惑的堆栈溢出线程](https://stackoverflow.com/a/13963480/5994618)和[Pyinstaller](https://pythonhosted.org/PyInstaller/runtime-information.html)文档之间来回走动之后，我终于能够捆绑我的应用程序。

### 一步步：

1.  在您的应用程序根目录和`. venv/bin/activate`d:

    ```
    ➜  ~ pip install pyinstaller
    ➜  ~ pyi-makespec --windowed --onedir --i ./resources/img/icn.icns \
          --osx-bundle-identifier "com.myname.macOS.myappname" app.py 
    ```

2.  现在，稍微修改`app.spec`一下：

    ```
    added_files = [
     ('resources/img', 'resources/img'),
     ( 'README.md', '.' )
     ] 
    ```

    使用资源的相对路径初始化[字典](http://www.tutorialspoint.com/python/python_dictionary.htm) `added_files`并设置`datas = added_files`. 在我的应用程序中，我使用了`./resources/img`相对于我的 main.py 文件的图像。

3.  最后，这可能是最容易忘记的一步，而且不那么明显：

    ```
    ➜  ~ pyinstaller --onefile app.spec 
    ```

请注意，这最后一步取自[此处](https://stackoverflow.com/a/14309576/5994618)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T23:43:26.613

我相信我发现了问题，它与规范文件的正文无关。使用规范文件运行 pyinstaller 时，我的命令行语法似乎错误。正常运行时：

```
pyinstaller.py [options] <my_specfile.spec> 
```

似乎工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-31T01:17:02.277

当脚本作为包运行时，我们可以按照[文档设置不同的文件路径。](https://pythonhosted.org/PyInstaller/runtime-information.html#run-time-information)但是，我的解决方法是建立一个稳定的顶级目录，所有非脚本文件都在其中，并与所有模块共享这个顶级目录。然后在每个模块中，我可以根据顶级目录创建文件路径。

例如，在此布局中，所有模块代码都位于`src`文件夹中。这些模块需要访问`conf`文件夹、`database`文件夹和`otherconfig.yaml`.

```
├── conf
│   └── config.ini
├── database
├── entry_point.py
├── otherconfig.yaml
├── root_path.py
└── src
    ├── pkg1
    └── pkg2 
```

`root_path.py`看起来像这样：

```
import os

path = os.getcwd() 
```

在每个模块中，我可以为配置文件创建文件路径，如下所示：

```
import root_path

config_path = f"{root_path.path}/conf/config.ini"
otherconfig_path = f"{root_path.path}/otherconfig.yaml" 
```

然后，在通过创建单文件可执行文件后`pyinstaller -F entry_point.py`（不添加任何文件），我们只需要重新创建相同的布局，每个模块中的文件路径仍然可以工作。

```
├── bundled_executable
├── conf
│   └── config.ini
├── database
└── otherconfig.yaml 
```

当然，这种变通办法不能隐藏配置文件。但是对于我的用例，我需要让用户自由修改配置文件，所以不隐藏文件实际上对我有用。

# php - Magento 优惠券折扣

> ID：14296834
> 
> 赞同：0
> 
> 时间：2013-01-12T18:56:53.230
> 
> 标签：php, magento, coupon

我正在建立从客户那里购买东西的magento商店。我不想降低产品的价格，而是想使用优惠券代码提高产品的价格。我需要在哪个文件中对此进行更改。

更新1：

谢谢阿米特。我有另一个问题。我喜欢在购物车和单页结帐中将“折扣”更改为“促销”。但是，我找不到任何文件位置。我已经从配置中打开了模板路径提示。谁能帮我吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T20:16:34.497

如果您只需要固定金额的折扣，那么您可以删除验证折扣金额字段，以便您可以在此字段中添加负值，因此当您尝试应用此优惠券时，它会自动添加该金额而不是减少。所以你需要覆盖以下两个类。

有关 Magento 覆盖的更多详细信息，请参阅[此](http://ka.lpe.sh/2011/06/08/overriderewrite-magento-core-blocks-and-controllers/)链接。

```
Mage_Adminhtml_Block_Promo_Quote_Edit_Tab_Actions 
```

找到这个代码

```
$fieldset->addField('discount_amount', 'text', array(
            'name' => 'discount_amount',
            'required' => true,
            'class' => 'validate-not-negative-number',
            'label' => Mage::helper('salesrule')->__('Discount Amount'),
        )); 
```

并将其更改为

```
$fieldset->addField('discount_amount', 'text', array(
            'name' => 'discount_amount',
            'required' => true,
            'label' => Mage::helper('salesrule')->__('Discount Amount'),
        )); 
```

并删除以下代码

```
if ($this->hasDiscountAmount()) {
            if ((int)$this->getDiscountAmount() < 0) {
                Mage::throwException(Mage::helper('rule')->__('Invalid discount amount.'));
            }
        } 
```

从

```
Mage_Rule_Model_Abstract::_beforeSave() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T20:21:03.757

查看 Mage/Checkout/Controllers 中的 CartController.php 和 Mage_Sales_Model_Quote 模型及其方法 -collectTotals()。

您需要创建一个新模块，在其中覆盖模型或创建观察者。

# php - PHP foreeach删除数组元素

> ID：14296838
> 
> 赞同：5
> 
> 时间：2013-01-12T18:57:55.993
> 
> 标签：php, foreach, unset

今天在为博客开发文本分析工具时，我发现 PHP 的行为对我来说很奇怪，我无法理解它。在规范化文本时，我试图删除最小长度以下的单词，所以我在规范化方法中写了这个：

```
if ($this->minimumLength > 1) {
    foreach ($string as &$word)
    {
        if (strlen($word) < $this->minimumLength) {
            unset($word);
        }
    }
} 
```

奇怪的是，这会在我的数组中留下一些低于允许长度的单词。在全班搜索错误后，我试了一下：

```
if ($this->minimumLength > 1) {
        foreach ($string as $key => $word)
        {
            if (strlen($word) < $this->minimumLength) {
                unset($string[$key]);
            }
        }
    } 
```

瞧！这非常有效。现在，为什么会发生这种情况？我检查了[PHP 文档](http://php.net/manual/en/function.unset.php)，它指出：

> 如果通过引用传递的变量在函数内部是 unset()，则只有局部变量被破坏。调用环境中的变量将保留与调用 unset() 之前相同的值。

是否因为它有自己的范围而`foreach`在这里充当？`calling environment`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T19:02:24.633

不，这里没有函数调用，也没有通过引用传递变量（您只是在迭代期间通过引用捕获）。

当您通过引用进行迭代时，迭代变量是原始变量的*别名。*当您使用此别名来引用原始别名并修改其值时，更改将在被迭代的数组中保持可见。

但是，当您`unset`使用别名时，原始变量不会“被破坏”；*别名*只是从符号表中删除。

```
foreach ($string as $key => &$word)
{
    // This does not mean that the word is removed from $string
    unset($word);

    // It simply means that you cannot refer to the iteration variable using
    // $word from this point on. If you have captured the key then you can
    // still refer to it with $string[$key]; otherwise, you have lost all handles
    // to it for the remainder of the loop body
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T19:00:14.930

当您`unset($word)`在 if 语句中调用时，您正在删除`$word`变量本身，而不对 array 进行任何更改`$string`。

# android - 如何为 ViewPager 设置不同的适配器？

> ID：14296843
> 
> 赞同：0
> 
> 时间：2013-01-12T18:58:25.373
> 
> 标签：android

我读了这个教程

[http://blog.stylingandroid.com/archives/542](http://blog.stylingandroid.com/archives/542)

ViewPager 中有 3 个页面，它们在 ListView 中具有相同的数据。

如何让每个页面都有不同的适配器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T19:00:38.493

如果您遵循该博客文章中的代码`instantiateItem()`，请根据提供的`position`.

# rabbitmq - RabbitMQ - 查看保持内存打开的内容

> ID：14296848
> 
> 赞同：0
> 
> 时间：2013-01-12T18:59:10.313
> 
> 标签：rabbitmq

有谁知道确定rabbitmq内存中有哪些对象的方法？

这是在服务器端。

谢谢，弗兰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T16:29:02.967

运行“rabbitmqct status”应该可以为您解决问题。

[查看 rabbitmq 页面以了解每个部分的含义](http://www.rabbitmq.com/memory-use.html)

# hibernate - Hibernate - 每个引用指向实体的不同表

> ID：14296851
> 
> 赞同：1
> 
> 时间：2013-01-12T18:59:26.760
> 
> 标签：hibernate, one-to-many

我正在尝试使用 hibernate 进行本地化，并且由于我坚持使用 @ElementCollection（请参阅[嵌入式地图上的 HQL 选择](https://stackoverflow.com/questions/14296113/hql-select-on-embedded-map)），我想尝试使用真实实体的不同方法：

```
@Entity
public class Category {
  ..
  @OneToMany(fetch = FetchType.EAGER) 
  @Cascade(...) 
  List<Localization> name;
}

@Entity
public class Localization {
  @Id
  @GeneratedValue
  private long id;
  @NotNull
  public String locale;
  @NotNull
  public String label;
} 
```

现在我知道这不是很好，因为实际上它允许一个类别有多个英文翻译，但这对我来说很好。

**我的问题：**
由于我将在我的数据库中使用这种可本地化的结构，并且会有很多本地化日期，本地化表会变得非常大。由于我想急切地获取本地化关系，这可能会成为性能问题。

是否可以为每个 ManyToOne 映射创建一个单独的表（所以基本上是 @ElementCollection 隐式完成的，我不能使用，请参见上面的链接）。所以结果应该是许多具有相同结构的表，例如：

```
locale_category_name (id : long, locale : string, label : string)
locale_category_description (id : long, locale : string, label : string)
locale_product_name (id : long, locale : string, label : string) 
```

等等

# diff - 递归差异创建补丁并递归应用补丁

> ID：14296852
> 
> 赞同：7
> 
> 时间：2013-01-12T18:59:41.240
> 
> 标签：diff, patch

我在使用补丁时遇到了麻烦。我有 2 个包含许多子文件夹和文件的文件夹。

`diff -ur backup/www/ www/ > sync.patch`

接下来，我正在尝试应用补丁。

`patch < sync.patch`

`File to patch:`如你所见，它问我。

```
|diff -ur ./backup/www/members/categorize.php ./www/members/categorize.php
|--- ./backup/www/members/categorize.php   2012-12-13 15:19:41.000000000 -0500
|+++ ./www/members/categorize.php   2012-10-15 23:32:12.000000000 -0400
--------------------------
File to patch: 
```

文件 ./www/members/categorize.php 存在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T19:02:14.970

您可能需要调查 的`-p`标志`patch`，它控制处理目录前缀的方式。请参阅[手册页](http://linux.die.net/man/1/patch)。

# java - 如何将 nginx 连接到我的 java 模块

> ID：14296853
> 
> 赞同：4
> 
> 时间：2013-01-12T18:59:47.540
> 
> 标签：java, web-services, rest, nginx

我是这个主题的真正初学者，我需要一些有用的文章和你的指导。我想构建`RESTFul`API Web 服务。作为http服务器选择`nginx`。但我不知道（找不到任何文章）任何关于如何将查询重定向到我的 java 模块的信息，该模块处理请求并返回`JSON`到`nginx`. 如果我对后端类型的想法不正确，请帮助我弄清楚这一点......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T19:14:51.317

您需要在自己的应用服务器中构建您的 Java 服务——Tomcat 将是一个不错的选择。`nginx`从那里开始，配置为 Tomcat 的代理就很简单了。您的`nginx`配置将如下所示：

```
user www-data;
worker_processes 4;
pid /var/run/nginx.pid;

events {
    worker_connections 4096;
    # multi_accept on;
}

http {

    server {
        listen 80; #incoming port for nginx
        server_name localhost;
        location / {
            proxy_pass http://127.0.0.1:8080;
        }
    }

#...and other things, like basic settings, logging, mail, etc. 
```

这里的重要部分是设置`proxy_pass`。这说明`nginx`接受端口 80 上的请求并将它们重定向到端口 8080（Tomcat 的标准端口）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-08T04:00:18.887

使用[nginx-clojure](http://nginx-clojure.github.io)，我们可以在 java、clojure 或 groovy 中编写内容处理程序、重写处理程序、访问处理程序和标头过滤器。例如

在 nginx.conf

```
 location /java {
      content_handler_type 'java';
      content_handler_name 'mytest.HelloService';
   } 
```

HelloService.java

```
package mytest;

import java.util.Map;

import nginx.clojure.java.ArrayMap;
import nginx.clojure.java.NginxJavaRingHandler;
import static nginx.clojure.MiniConstants.*;

public  class HelloService implements NginxJavaRingHandler {

@Override
public Object[] invoke(Map<String, Object> request) {
    return new Object[] { 
            NGX_HTTP_OK, //http status 200
            ArrayMap.create(CONTENT_TYPE, "text/plain"), //headers map
            "Hello, Java & Nginx!"  //response body can be string, File or Array/Collection of string or File
                };
    }
} 
```

# mongodb - MongoDB 覆盖查询没有复合索引的两个字段

> ID：14296854
> 
> 赞同：1
> 
> 时间：2013-01-12T18:59:56.800
> 
> 标签：mongodb, mongodb-query

您能否对两个字段执行 MongoDB 覆盖查询，例如

```
db.collection.find( { _id: 1, a: 2 } ) 
```

**没有**复合索引，例如

```
db.collection.ensureIndex( { _id: 1, a: 1 } ) 
```

而是只有一个 _id 索引（默认情况下你会得到它）和字段“a”的另一个索引，如

```
db.collection.ensureIndex( { a: 1 } ) 
```

换句话说，我想知道为了对两个字段执行覆盖查询，我是否需要一个复合索引而不是只需要两个单个（即不是复合）索引，每个字段一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:39:59.457

查询只使用一个[索引](http://docs.mongodb.org/manual/applications/indexes/)。

您的示例显示`_id`为索引的元素之一？`_id`需要在集合中是唯一的，因此对`_id`其他内容进行复合索引是没有意义的。

如果你有：

```
db.collection.ensureIndex( { a: 1, b: 1 }) 
```

然后，您可以`a`根据需要单独使用该索引，也可以将其用作带有`b`.

# python - Flask中有多个CSS文件？

> ID：14296866
> 
> 赞同：0
> 
> 时间：2013-01-12T19:00:55.583
> 
> 标签：python, flask

你如何让你的模板在 Flask 中使用特定的 css 文件？

```
admin.html = admin.css  
user.html = user.css 
```

我看过 Flask 文档，它们没有意义吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T19:22:18.757

您可以在子模板中覆盖基本模板中的 <head> 部分。所以每个用户页面都使用 base.html 模板中的 css 文件，只有 admin.html 使用其他文件。这记录在[http://flask.pocoo.org/docs/patterns/templateinheritance/#template-inheritance](http://flask.pocoo.org/docs/patterns/templateinheritance/#template-inheritance)

编辑：也许你可以使用这个：所有页面都派生自 base.html 并使用 base.css。只有 user.html 和 admin.html 会覆盖 head 部分并包含 base.css 和特定的 admin.css / user.css。

例子 ：

base.html：

```
 <!doctype html>
     <html>
     <head>
      {% block head %}
        <link rel="stylesheet" href="{{ url_for('static', filename='base.css') }}">
      {% endblock %}
      </head>
      <body>
      <div id="content">{% block content %}{% endblock %}</div>

     </body>
     </html> 
```

管理员.html：

```
 {% extends "base.html" %}
    {% block head %}
      <link rel="stylesheet" href="{{ url_for('static', filename='base.css') }}">
      <link rel="stylesheet" href="{{ url_for('static', filename='admin.css') }}">
    {% endblock %}
    {% block content %}
     content goes here
    {% endblock %} 
```

用户.html：

```
 {% extends "base.html" %}
    {% block head %}
      <link rel="stylesheet" href="{{ url_for('static', filename='base.css') }}">
      <link rel="stylesheet" href="{{ url_for('static', filename='user.css') }}">
    {% endblock %}
    {% block content %}
     content goes here
    {% endblock %} 
```

编辑：如果您将 css 文件存储在 static/ 的子目录中，则必须编写如下链接：

```
 <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T19:08:06.523

您可以将要使用的 css 文件作为变量传递给模板。

```
{'css_file': 'admin.css'} 
```

然后在模板中使用它：

```
<link rel="stylesheet" href="/css/{{ css_file }}" /> 
```

# c#-4.0 - 搜索“依赖项间谍工具”

> ID：14296870
> 
> 赞同：0
> 
> 时间：2013-01-12T19:01:08.820
> 
> 标签：c#-4.0, installation, copy, dependencies

我的问题：我有 2 件。首先我安装了一个`C#, .Net4.0 desktop application`.

是否可以在 pc2 上运行相同的应用程序 - 无需安装文件？仅从 pc1 复制目标文件夹（包括 .exe、.dlls 等）而无需安装文件是不够的。

那么，可以请有人推荐一个好的工具，它可以找到所有依赖的文件来构建让我们说一个可移动的 zip 吗？

提前致谢。席尔瓦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:03:32.190

ILSpy [http://ilspy.net/](http://ilspy.net/)和 Checkasm [http://www.amberfish.net/](http://www.amberfish.net/)在这方面都做得很好。

# css - HTML5 样板背景图像不显示

> ID：14296871
> 
> 赞同：0
> 
> 时间：2013-01-12T19:01:12.860
> 
> 标签：css, html, background, background-image, html5boilerplate

我正在使用 HTML5Boilerplate 制作网站，但每次使用 css`background`或`background-image`属性时，图像都不会显示。

文件夹：
root/css/style.css
root/img_files/logo.png

我的 CSS 代码如下所示：

```
#logo {
    position: absolute;
    left: 20px;
    top: 10px;
    width: 164px;
    height: 42px;
    background: url(../img_files/logo.png);
    background-repeat: none;
} 
```

我的样式表已正确添加到页面中：

我无法向页面上的对象添加单个背景图像。HTML5Boilerplate 已经安装，所以也许这不是问题，我不确定。你知道为什么正确的 CSS 和 HTML 不显示图像吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:30:18.913

我刚刚遇到同样的问题，发现如果您将 ID 从 #logo 更改为其他任何内容（当然是在 HTML 和 CSS 中），那么相同的代码将开始工作。无法说出要使用的“阻止”#logo 是什么，但现在我没有足够的时间来发现问题出在哪里。

目前的解决方案是使用#logo 以外的任何其他内容，例如。#logoTop 或 #siteLogo

希望有帮助。

编辑：这是一个选择器错字问题，导致浏览器忽略了这一点。Weird was it had not happened when selector was changed to some other name than #logo. 请注意#logo：**可见**的错字（而不是访问过）

```
#logo, #logo:link, #logo:visited,
#logo:active, #logo:focus, #logo:hover
{
    display: block;
    width: 340px;
    height: 150px;
    background: url(../images/design-elements.png) 0 -300px no-repeat;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T19:02:33.597

改变

```
background-repeat: none; 
```

至

```
background-repeat: no-repeat; 
```

或者只是使用

```
background: url(../img_files/logo.png) no-repeat; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T02:20:01.050

我遇到了同样的问题，发现如果没有宽度和高度属性，图像将不会显示。

# python - 可以在没有数据库的情况下评估 sqlalchemy 子句吗？

> ID：14296873
> 
> 赞同：8
> 
> 时间：2013-01-12T19:01:37.353
> 
> 标签：python, sqlalchemy

我在 sqlalchemy 中广泛使用了 ORM 功能，因此在许多情况下，我已经从数据库中加载了数据，并且想要检查条件或对已加载的 python 对象执行计算；我还希望/需要做更多的面向批处理的任务，这些任务可以通过对数据库执行 sql 来更好地表达（并且根本不加载数据）。我想使用相同的代码来表达两种用途的相同计算，这样我就不必为数据库连接向后弯腰或将每个计算写两次（一次在常规 python 中，再次作为查询）并运行他们*不同意*的风险。

假设我有：

```
from sqlalchemy import Integer, Column
from sqlalchemy.ext.declarative import declarative_base

Base = declarative_base()

class Foo(Base):
    __tablename__ = 'foo'
    id = Column(Integer, primary_key=True)
    bar = Column(Integer)

bool_clause = Foo.bar > 10
int_clause = Foo.bar + 10

a_foo = Foo(bar=5) 
```

有没有办法得到

```
>>> something(bool_clause, a_foo)
False
>>> something(int_clause, a_foo)
15 
```

没有先持久`a_foo`化到数据库然后执行查询？我特别想要一种表达子句的方法，以便它*也*可以在数据库查询的上下文中使用，但没有它仍然有用。

一种选择是将子句更改为函数：

```
bool_clause = lambda foo=Foo: foo.bar > 10
int_clause = lambda foo=Foo: foo.bar + 10 
```

```
>>> bool_clause(a_foo)
False
>>> int_clause(a_foo)
15 
```

但我发现这比表达条款的原始方式可读性差。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T20:13:04.553

有几种方法可以处理这种事情。

一种方法是正面的，Query.update() 和 Query.delete() 方法使用 SQLAlchemy 中的一个模块，该模块称为 sqlalchemy.orm.evaluator。它只能表达一组非常有限的表达式运算符：

```
>>> from sqlalchemy.orm.evaluator import EvaluatorCompiler
>>> print EvaluatorCompiler().process(bool_clause)(a_foo)
False
>>> print EvaluatorCompiler().process(int_clause)(a_foo)
15 
```

它不会执行更复杂的表达式，例如，`in_()`如果您愿意，我们愿意将任何数量的合理操作添加到此模块中。

现在，您*通常*使用的用例方式是使用[混合属性和方法](http://docs.sqlalchemy.org/en/rel_0_8/orm/extensions/hybrid.html)。在这个用例中，我们利用了 Python 的优势，当我们拥有 时`<anything>.someattr <some operator> <somethingelse>`，我们可以换出`self`和`cls`for `<anything>`。所以你的例子是：

```
class Foo(Base):
    __tablename__ = 'foo'
    id = Column(Integer, primary_key=True)
    bar = Column(Integer)

    @hybrid_method
    def bool_clause(self, other):
        return self.bar > other

    @hybrid_method
    def int_clause(self, other):
        return self.bar + other

>>> a_foo = Foo(bar=5)
>>> print a_foo.bool_clause(10)
False
>>> print a_foo.int_clause(10)
15 
```

这实际上与您使用 lambdas 的建议相同，只是表达得更好。

这两种方法也可以结合使用。求值器的一个好处是它可以处理像`or_()`and之类的连词`and_()`。没有这个，如果您需要使用“and”或“or”之类的东西，混合要求您将方法分解为“实例”和“表达式”方法。

# php - 调用未定义函数 openssl_pkey_new()？

> ID：14296890
> 
> 赞同：0
> 
> 时间：2013-01-12T19:03:45.013
> 
> 标签：php, openssl

我正在尝试在 WAMP 下使用 phpwebsoket Wrench，使用 php 5.3.13，但未定义 openssl_pkey_new 函数。我已经启用了 php open ssl 扩展和 apache ssl 模块，但肯定我错过了更多的东西。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:17:11.237

制作一个包含以下内容的 PHP 脚本：

```
<?php
echo '<pre>';
var_dump(get_loaded_extensions()); 
```

然后在服务器上运行它并检查输出数组中是否有关于 SSL 扩展的通知，以确保它可能已经加载。

# java - 如何暂停while循环，直到按下按钮

> ID：14296891
> 
> 赞同：3
> 
> 时间：2013-01-12T19:03:59.600
> 
> 标签：java, android

如何暂停while循环，直到按下按钮？

我想要一个while循环，每次按下按钮时都会重新启动。这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T19:24:07.887

## 答案 1

您可以有一个按钮，当它被按下时将退出循环，然后在它退出后立即调用该方法。

```
public void process(){
boolean done = false;
while(!done) {
        // do stuff
        if (buttonPress) done = true;  // ends loop
        else buttonPress = false;  // insures buttonPress is false, not needed
    }
} 
```

## 答案 2

您也可以只让线程休眠一段时间，然后当线程“唤醒”时它会自动继续。

```
Thread thread = new Thread() {
boolean isRunning = true;
        public void run() {
             while(isRunning){
                 // do stuff
                 if(buttonPress) Thread.sleep(4000); // or however long you want
             }
        }
    };
    thread.start(); 
```

## 答案 3

在循环中有一个循环

```
while(listening) {
    while(!buttonPress) {
    }
    buttonPress=false;
    // do stuff
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T10:43:04.350

您可以使用以下代码：

`(System.in.available() == 0){ //Do whatever you want }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-17T05:30:32.363

```
while (button.isPressed()) {
    break;
} 
while (!button.isPressed()) {
    // do your things...
} 
```

# ios - NSObjectInaccessibleException'，原因：'CoreData 无法完成故障

> ID：14296892
> 
> 赞同：8
> 
> 时间：2013-01-12T19:04:01.223
> 
> 标签：ios, multithreading, core-data, crash, nsmanagedobject

我的 iOS 应用程序通过多个线程使用核心数据。我收到一些带有以下消息的崩溃报告：“'NSObjectInaccessibleException'，原因：'CoreData 无法满足'0x1e07a9b0''的错误”

我了解导致此问题的原因 - 该对象已被删除，但另一个线程正在尝试访问它。我正在努力解决问题，但我想在后台线程中添加一个检查，以查看对象是否会以这种方式出现故障。

我目前的代码与`myObject.myValue`. 是否可以进行一些检查，例如：

```
if (!myObject.myValue) {
    return;
} 
```

...以便在执行任何可能导致此类崩溃的操作之前退出该方法？或者会简单地调用`myObject.myValue`，甚至查看它是否为空，导致抛出这样的异常？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-12T20:36:09.150

您可以尝试使用[`existingObjectWithID:error:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html#//apple_ref/occ/instm/NSManagedObjectContext/existingObjectWithID:error:)：

> 返回指定 ID 的对象。
> 
> ```
>  - (NSManagedObject *)existingObjectWithID:(NSManagedObjectID *)objectID error:(NSError **)error 
> ```
> 
> 讨论
> 
> 如果已在上下文中注册了具有给定 ID 的托管对象，则直接返回该对象；否则相应的对象将错误地进入上下文。
> 
> 如果数据未缓存，此方法可能会执行 I/O。
> 
> 与 objectWithID: 不同，此方法从不返回错误。

你可以这样做：

```
if ([myMOC existingObjectWithID:myObject.objectID error:&error])
    ... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T12:58:05.363

如果您遇到可能在另一个线程上删除对象的问题，您应该在访问它的变量之前验证该对象是否存在。

两种方法：

1.  每当您的数据被删除时，刷新视图数据源。您可以通过注册`NSManagedObjectContextObjectsDidChangeNotification`通知然后解析该`userInfo`通知以查看哪个对象被删除来做到这一点。
2.  当您将数据传递给多个线程时，请使用类似于下面的代码。

例子：

```
// Cache and pass the object's ID off to another thread to do work on
// You can just store it as a property on the class
@try {
    NSManagedObject *theObject = [managedObjectContext objectWithID:self.theObjectID];

    // do stuff with object
}
@catch (NSException * e) {
    // An entity with that object ID could not be found (maybe they were deleted)
    NSLog(@"Error finding object: %@: %@", [e name], [e reason]);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-06T02:03:08.143

您可以在使用 NSManagedObject 时检查 NSManagedContext 是否存在。像这样：

```
if (obj.managedObjectContext)
{
    //do things
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-02T14:25:42.763

您可以检查实例在`[myObject isFault]`哪里`myObject``NSManagedObject`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-29T10:10:04.697

您可以尝试使用：

> shouldDeleteInaccessibleFaults

托管对象上下文的属性。正如本文所说，它应该改变已删除对象的错误行为。

[https://cocoacasts.com/what-are-core-data-query-generations/](https://cocoacasts.com/what-are-core-data-query-generations/)

编辑：自 iOS 9（添加时）以来，此属性默认值为 YES。

# apache - 如何连接到本地主机上的特定网站？

> ID：14296895
> 
> 赞同：0
> 
> 时间：2013-01-12T19:04:25.543
> 
> 标签：apache

我有一个在网络上运行的本地 Apache 服务器，并且我有许多测试机器。我希望能够连接到本地主机上的特定网站，目前它只是连接到第一个网站。

例如：192.168.1.125/mywebsite。

我环顾四周，找不到连接的方法，我知道这很简单，但是我到处都在回答不同的问题。（也许这太简单了）。

所以基本上我在问，我如何通过浏览器访问其他服务器名。（设置是这样的：）

```
<VirtualHost *:80>
  DocumentRoot c:/vhosts/website1
  ServerName website1
</VirtualHost>

<VirtualHost *:80>
  DocumentRoot c:/vhosts/website2
  ServerName website2
</VirtualHost> 
```

我试过 192.168.1.125~mywebsite 192.168.1.125:80/mywebsite。192.168.1.125-我的网站。

有人能帮我一下吗？还有这个的英文是什么？命名空间？名称服务器之类的？

*我收到错误“找不到对象”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:19:40.623

apache 的基于名称的服务基于请求中的实际主机名。要完成这项工作，您必须能够以您需要的任何名称引用该 IP。您必须能够做到`http://hostname/`而不是`http://IP`让基于名称的虚拟主机工作。

您可以使用主机文件（对于单个主机）或通过 DNS 执行此操作。不过，两者都不是编程问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T19:28:18.977

使用虚拟主机。即文件中有这样的`httpd.conf`内容：

```
NameVirtualHost *:80

<VirtualHost *:80>
  ServerName <make up a hostname here e.g. example.com>
  DocumentRoot "<path to the web site files>"
</VirtualHost>

<Directory "<path to the web site files>">
    Options Indexes FollowSymLinks
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory> 
```

然后将以下内容添加到hosts文件中`C:\Windows\System32\drivers\etc`

```
127.0.0.1 <made up hostname as above> 
```

然后您可以访问该网站`http://<hostname as above>`

猜猜它对于 Linux 来说是一样的，除了文件是`/etc/hosts`. 您可以根据需要经常重复此操作。

**编辑**`/etc/hosts`在运行服务器的机器和运行浏览器的机器上使用以下它

```
192.168.1.125 website2.example.com
192.168.1.125 website1.example.com 
```

`website1.example.com`然后使用and编辑上面虚拟主机的两个副本`website2.example.com`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T19:19:52.503

在黑暗中拍摄

将您的测试机器映射到您的服务器

> ```
> ~/test_machines/web_1
> ~/test_machines/web_2
> ~/test_machines/web_3 
> ```

然后将站点条目添加到您的 vhost.conf。使用 mod_vhost_alias 中的 VirtualDocumentRoot。您可以在此处查看示例：[http ://httpd.apache.org/docs/2.2/mod/mod_vhost_alias.html](http://httpd.apache.org/docs/2.2/mod/mod_vhost_alias.html)

# mysql - 模块 VDB1.exe 中的异常 EZSQLExeption 位于 002A7A5C。SQL 错误：Host'Gareth-PC' is not allowed to connect to this MySQL server

> ID：14296896
> 
> 赞同：-1
> 
> 时间：2013-01-12T19:04:31.930
> 
> 标签：mysql, database, windows, delphi, networking

我正在使用Delphi xe2，我想知道这个错误是什么，我需要通过什么方式解决这个问题，我试图通过LAN连接将我的数据库应用程序连接到wamp服务器，我似乎有主机名用户名密码和端口正确，但是当我尝试登录 MySQL 数据库时出现此错误：

> *（异常 EZSQLExeption 在模块 VDB1.exe 在 002A7A5C。SQL 错误：不允许主机'My-PC' 连接到此 MySQL 服务器）*

你能给我一个解决这个问题的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:25:37.203

错误消息指出：

> 主机 'My-PC' 不允许连接到这个 MySQL 服务器

这表明 SQL 服务器正在根据其主机名“My-PC”阻止您的客户端。因此，您需要配置 MySQL 服务器以允许来自该主机的连接。

# windows-8 - Windows 8 中的屏幕保护程序

> ID：14296903
> 
> 赞同：1
> 
> 时间：2013-01-12T19:05:04.777
> 
> 标签：windows-8, screensaver

我有一个用 C# 编写的屏幕保护程序，它截取桌面的屏幕截图并将其显示为，猜猜看，屏幕保护程序。

这工作得很好，除了在屏幕保护程序启动的 Windows 8 中，看起来像一个带有纯色背景的单独桌面，因此我只截取这个纯色背景而不是实际桌面的屏幕截图。

这仅在屏幕保护程序由 windows 本身超时启动时才计算在内，而不是在您直接执行屏幕保护程序（通过双击 *.scr）或在预览面板（/p 开关）中或如果您使用预览它时“测试”按钮（恕我直言调用 /s 开关）。

根据 Microsoft-Answer 的版主的说法，到目前为止，我发现的唯一信息是：

“在 Windows 8 中进行了一项设计更改，以防止屏幕保护程序覆盖桌面图像。” - 来源：[http ://answers.microsoft.com/en-us/windows/forum/windows_8-desktop/bubbles-screensaver-has-black-background/e0807324-5ca6-4abe-b6ba-716848b41ff5](http://answers.microsoft.com/en-us/windows/forum/windows_8-desktop/bubbles-screensaver-has-black-background/e0807324-5ca6-4abe-b6ba-716848b41ff5)

tl；博士：我正在寻找一种方法来通过 Windows 8 中的屏幕保护程序截取实际桌面的屏幕截图。

先谢谢了。

# c# - 与 3 层设计混淆

> ID：14296904
> 
> 赞同：1
> 
> 时间：2013-01-12T19:05:08.297
> 
> 标签：c#, dataset, 3-tier

我一直在查看 3 层设计网络上的示例，我注意到大多数示例返回数据集或数据表。令我困惑的是，如果您宁愿返回一个通用类型列表，以便您可以利用列表所基于的类型中的属性或方法，该怎么办？例如，使用根据数据以特定方式连接各种字段的 Name 属性，如果 List 绑定到表单上的控件，则 Name 属性可以用作数据字段。如果您想在使用数据集或表时完成相同的事情，则必须从数据库中返回数据以达到相同的目的（我尽量不使用数据集或数据表，所以我可能对这个语句非常错误. :) )

真正让我困惑的部分是关于重用代码，对我来说，重用代码的唯一方法似乎是将数据检索到数据集或数据表中，然后遍历数据并将其添加到列表中，这通常是3 层的最佳实践，或者有没有办法在没有数据集和数据表的情况下做到这一点。

下面链接中的示例实质上演示了使用数据集或表，然后将其添加到对象中，但我不得不问这是否是最佳实践？

[http://www.codeproject.com/Articles/36847/Three-Layer-Architecture-in-C-NET](http://www.codeproject.com/Articles/36847/Three-Layer-Architecture-in-C-NET)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T19:10:55.870

使用`DataTable`s 是一种特定的网络主义。其背后的原因是它们包含有关数据结构的元数据，它可以让`DataGrid`（和其他此类组件）自动显示数据，而无需使用反射等。我的猜测是，这是对 RAD 的 MS Access 方法的继承，其目的是使“业务人员”能够通过直接从 SQL 模式生成用户界面来创建应用程序，基本上与分层设计相反。这种传承似乎已经渗入了主脑。

只要您愿意放弃 RAD 功能，使用“普通”数据结构并没有错，而且最近的趋势似乎也是摆脱这种权衡。（例如，使用 Web 窗体的强类型数据控件和 MVC 的模型绑定功能。）

此外，更一般地说，MVC 建立之前的代码项目文章并不是关于一般软件架构的真正智慧来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T19:14:19.830

您应该携带什么数据完全取决于您的需求。

如果您从数据库中检索数据并将其绑定到数据网格，数据集可能会为您提供完美的解决方案。如果您想要一些其他方法来跟踪数据自己的更新状态，您应该查看实体框架。如果您检索数据并通过 Web 服务发送数据以进行跨平台或跨域处理，您需要将数据加载到您自己的其他一些可序列化类中。

看看下面的文章。它有点老了，针对的是 EF4，但它很好地总结了不同策略的优缺点。（本系列共三篇，建议大家阅读）

[http://msdn.microsoft.com/en-us/magazine/ee335715.aspx](http://msdn.microsoft.com/en-us/magazine/ee335715.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T19:36:16.980

我认为您找到的示例使用了数据表和数据集，因为这是展示 3 层设计的一种简单方法。现在实体框架已经在很大程度上取代了示例中提到的“数据访问层”。

在实体框架之前，当我编写数据访问层时，我会返回一个从数据库构建的通用列表。要运行更新、删除或插入，我会将对象作为参数传递给方法，然后使用对象的属性作为 sql 语句中的值。出于您提到的原因，我更喜欢这样做，但也因为它允许我彼此独立地更改对象定义或数据库模式（甚至一起使用不同的数据库）。

# visual-studio-2012 - WPF 窗口设计器上的对齐网格

> ID：14296907
> 
> 赞同：3
> 
> 时间：2013-01-12T19:05:39.913
> 
> 标签：visual-studio-2012

在 Visual Studio 2012 中，我可以单击设计器窗口左下方的“显示对齐网格”按钮。**如何自定义该捕捉网格？**我跟随

工具 -> 选项... -> Windows 窗体设计器 -> 常规 -> GridSize (8;8)

但是（正如预期的那样），它无法更改 WPF 窗口设计器上的网格...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-21T16:42:35.027

您只能在 Microsoft Blend（或 Expression Blend）中执行此操作。

工具 -> 选项 -> XAML 设计器 -> 画板 -> 网格线间距

# extjs - Extjs hasOne 关联本地模式

> ID：14296908
> 
> 赞同：2
> 
> 时间：2013-01-12T19:05:46.183
> 
> 标签：extjs, extjs4, associations, relation, has-one

我尝试在 ExtJs 4 中实现 hasOne 关联。我使用 associationKey 加载相关模型。例如，我有 Person 模型。有些人可能有配偶，因此服务器端响应嵌套数据，例如：

```
...
spouse: {
  id: 5,
  name: ...
  ...
} 
```

现在，当我使用 gettername 函数时：

```
var spouse = person.getSpouse() 
```

如果 person 有像上面示例中的嵌套数据，它将返回 Person 模型对象，它是第一个配偶的对象。但是如果没有嵌套数据，ExtJs 会尝试动态加载它以请求服务器。我想阻止这个请求，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:27:44.063

好的，所以我想我自己解决这个问题。原因是 ExtJs 试图加载嵌套的 hasOne 相关数据是因为服务器发送

```
{
  ...
  spouse_id: null,
  spouse: null,
  ...
} 
```

代替：

```
{
  ...
  spouse_id: null,
  spouse: {},
  ...
} 
```

# linux - 当 linux 系统调用脚本时，某些命令不起作用（ cron / if-up.d ）

> ID：14296911
> 
> 赞同：0
> 
> 时间：2013-01-12T19:06:24.137
> 
> 标签：linux, cron, zenity, xclip

嗨，我正在尝试运行一个调用**xclip**的脚本，以便在我连接到互联网时准备好粘贴字符串。

我有一个脚本**/etc/network/if-up.d/script**在连接时会执行（我让他在文件中成功发布日期）但是**xclip**指令似乎不起作用，没有什么可以粘贴的。如果我通过在控制台中键入 /etc/network/if-up.d/script 手动调用此脚本，它会完美运行。

如果我尝试启动**zenity**消息，连接时它也不会出现。如果我手动做，它会再次出现。

然后我有一个调用matlab（控制台模式）的期望脚本，如果我手动执行它，它可以工作，但是如果我从**cron**调用它，它在调用脚本时会冻结。

这让我发疯，因为当系统自动调用它们时，似乎只有脚本中的某些命令可以执行。

**我试图用nohup 指令**来调用指令，但仍然错过

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-05T21:44:55.187

这是按设计工作的，您四处搜索并将看到解决此问题的复杂方法，或者您可以使用我在此处描述的 xmessage： [Using Zenity in a root incron job to display message to current login user](https://stackoverflow.com/questions/23706194/using-zenity-in-a-root-incron-job-to-display-message-to-currently-logged-in-user/24070682#24070682)

**简单的选项1：xmessage（在脚本中）**

```
MSSG="/tmp/mssg-file-${RANDOM}" 
echo -e " MESSAGE \n ==========\n Done with task, YEY. " > ${MSSG}
xmessage -center -file ${MSSG} -display :0.0 
[[ -s ${MSSG} ]] && rm -f ${MSSG} 
```

**简单的选项2：设置显示（然后应该工作）**

```
 export DISPLAY=:0 && /usr/bin/somedirectory/somecommand 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:11:26.737

此处为 cron 回答了问题：

[http://ubuntuforums.org/archive/index.php/t-105250.html](http://ubuntuforums.org/archive/index.php/t-105250.html)

这里是 if-up 网络：

[自动运行时 Bash 脚本无法正常工作](https://stackoverflow.com/questions/14092475/bash-script-not-working-properly-when-run-automatically)

# mysql - 两个表中的主 ID

> ID：14296914
> 
> 赞同：0
> 
> 时间：2013-01-12T19:06:55.903
> 
> 标签：mysql

我有两个表，其中包含各种字段和主要的 auto_increment 积分 ID。我想通过 id 将它们结合起来。我如何确定分配给一个表中特定字段行的 ID 与另一个表中另一行的 ID 相同？在发布 id 时，我们不知道实际分配了什么，因此两个表的 id 可能根本不匹配。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T19:09:24.260

这通常使用`FOREIGN KEY`关系来处理。我还假设你的意思是*结合*你想要`JOIN`的结果集。使用`FOREIGN KEY`约束，如果`id`父表发生变化，它将级联到子表。

[这是来自 SitePoint 的教程](http://www.sitepoint.com/mysql-foreign-keys-quicker-database-development/)

# php - 如何使用来自的新值更新我的数据库中的值和标签？

> ID：14296916
> 
> 赞同：0
> 
> 时间：2013-01-12T19:07:20.627
> 
> 标签：php, html, mysql

通过这种方式，我从数据库中获取结果并“打印”它们。但是我不知道当我按下提交按钮时我将如何更新这些结果！！！我只需要一个想法或下一步的东西。先感谢您！！！

这是我的代码示例...

```
<?php // DATABASE QUERY
      $query="SELECT countdown_module, hometeam_position
                FROM jos_gm_nextmatch
               WHERE id = 1";
      $result=mysql_query($query);

      // DATABASE VARIABLES
      $countdown_module = mysql_result($result,$i,"countdown_module");
      $hometeam_position = mysql_result($result,$i,"hometeam_position"); ?>

<form action="***.php" method="post" name="form">

<input name="countdown_module" value="<?php echo $countdown_module ?>" type="text" />

<select name="hometeam_position">
<option value="<?php echo $hometeam_position ?>"><?php echo $hometeam_position ?></option>
<option disabled="disabled" value="...">...</option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">3</option>
<option value="5">5</option>

<input name="submit" type="submit" value="UPDATE" />

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:28:49.613

您可以在从数据库中选择字段之前或之后简单地增加它们

```
...
if (isset($_POST['submit'])) {
    $stmt = "UPDATE jos_gm_nextmatch
             SET countdown_module = " . $_POST['countdown_module'] .
           " , hometeam_position =" . $_POST['hometeam_position'] . 
           " WHERE id=1";
    mysql_query($stmt);
}
mysql_close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T19:30:59.750

您将使用表单操作重定向到执行更新的脚本。在此脚本中，您可以使用 $_POST 数组访问表单输入元素。至于如何进行更新查询，一个例子可能是：

```
$query="UPDATE mytable 
        SET title = '".$title."', name = '".$name."', date = '".$date."' 
        WHERE id = ".$id;
$result=mysql_query($query); 
```

更新：

脚本的一个示例可能是：

```
$hometeam_position = $_POST['hometeam_position']; //access the selected option when submitting
$countdown_module = $_POST['countdown_module']; //access the text input

$query = "UPDATE jos_gm_nextmatch SET countdown_module = '".$countdown_module."', hometeam_position = '".$hometeam_position."' WHERE id = 1";
$result=mysql_query($query); 
```

# r - 复杂的长到宽数据转换（具有时变变量）

> ID：14296918
> 
> 赞同：1
> 
> 时间：2013-01-12T19:07:25.123
> 
> 标签：r, reshape

我目前正在研究“长”形式的多态分析数据集（每个人的观察一行；每个人重复测量最多 5 次）。

这个想法是每个人都可以在时变*状态变量* `s = 1, 2, 3, 4`的各个级别上反复转换。我拥有的所有其他变量（此处`cohort`）都固定在任何给定的`id`.

经过一些分析，我需要根据访问状态的特定顺序以“宽”形式重塑数据集。以下是初始长数据的示例：

```
 dat <- read.table(text = "

        id    cohort    s    
        1       1       2
        1       1       2
        1       1       1
        1       1       4
        2       3       1
        2       3       1
        2       3       3
        3       2       1
        3       2       2
        3       2       3
        3       2       3
        3       2       4", 

    header=TRUE) 
```

最终的“宽”数据集应考虑访问状态的特定个体序列，记录到新创建的变量`s1`, `s2`, `s3`, `s4`, 中`s5`，其中`s1`是个体访问的第一个状态，依此类推。

根据上面的例子，宽数据集看起来像：

```
 id    cohort    s1    s2    s3    s4    s5    
    1       1       2      2     1     4     0
    2       3       1      1     3     0     0
    3       2       1      2     3     3     4 
```

我尝试使用`reshape()`, 并且也专注于转置`s`，但没有达到预期的结果。实际上，我对 R 函数的了解非常有限。你能给点建议吗？谢谢。

## 编辑：获得不同类型的宽数据集

谢谢大家的帮助，如果可以的话，我有一个相关的问题。尤其是当长时间观察每个个体并且跨状态的转换很少时，`dat`以这种替代方式重塑初始样本非常有用：

```
 id    cohort    s1    s2    s3    s4    s5    dur1  dur2  dur3  dur4  dur5 
    1       1       2      1     4     0     0      2     1     1     0     0  
    2       3       1      3     0     0     0      2     1     0     0     0
    3       2       1      2     3     4     0      1     1     2     1     0 
```

现在在实践中`s1`-`s5`是*不同*的访问状态，以及`dur1`-`dur5`在每个相应的不同访问状态中花费的时间。

你能帮我实现这个数据结构吗？我认为有必要在使用之前在中间样本中`dur`创建所有变量。否则也许可以直接采用？`s``reshape()``-reshape2-`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T20:18:19.007

```
dat <- read.table(text = "
        id    cohort    s    
        1       1       2
        1       1       2
        1       1       1
        1       1       4
        2       3       1
        2       3       1
        2       3       3
        3       2       1
        3       2       2
        3       2       3
        3       2       3
        3       2       4", 
    header=TRUE)     

df <- data.frame(
    dat,
    period = sequence(rle(dat$id)$lengths) 
)

wide <- reshape(df, v.names = "s", idvar = c("id", "cohort"),
                timevar = "period", direction = "wide")

wide[is.na(wide)] = 0
wide 
```

给出：

```
 id cohort s.1 s.2 s.3 s.4 s.5
1  1      1   2   2   1   4   0
5  2      3   1   1   3   0   0
8  3      2   1   2   3   3   4 
```

然后使用以下行给出您的姓名：

```
names(wide) <- c('id','cohort', paste('s', seq_along(1:5), sep=''))

#   id cohort s1 s2 s3 s4 s5
# 1  1      1  2  2  1  4  0
# 5  2      3  1  1  3  0  0
# 8  3      2  1  2  3  3  4 
```

如果`sep=''`在`wide`语句中使用，则不必重命名变量：

```
wide <- reshape(df, v.names = "s", idvar = c("id", "cohort"),
                timevar = "period", direction = "wide", sep='') 
```

我怀疑有一些方法可以避免创建`period`变量并避免`NA`直接在`wide`语句中替换，但我还没有弄清楚这些。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T19:46:13.187

行...

```
library(plyr)
library(reshape2)

dat2 <- ddply(dat,.(id,cohort), function(x) 
       data.frame(s=x$s,name=paste0("s",seq_along(x$s))))

dat2 <- ddply(dat2,.(id,cohort), function(x) 
       dcast(x, id + cohort ~ name, value.var= "s" ,fill= 0)
       )

dat2[is.na(dat2)] <- 0

dat2

#    id cohort s1 s2 s3 s4 s5
#    1  1      1  2  2  1  4  0
#    2  2      3  1  1  3  0  0
#    3  3      2  1  2  3  3  4 
```

这看起来对吗？我承认第一个`ddply`并不优雅。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-12T22:13:25.907

试试这个：

```
library(reshape2)

dat$seq <- ave(dat$id, dat$id, FUN = function(x) paste0("s", seq_along(x)))
dat.s <- dcast(dat, id + cohort ~ seq, value.var = "s", fill = 0) 
```

这给出了这个：

```
> dat.s
  id cohort s1 s2 s3 s4 s5
1  1      1  2  2  1  4  0
2  2      3  1  1  3  0  0
3  3      2  1  2  3  3  4 
```

如果您不介意仅使用 1、2、...、5 作为列名，那么您可以将该`ave`行缩短为：

```
dat$seq <- ave(dat$id, dat$id, FUN = seq_along) 
```

**关于**稍后添加的第二个问题，请尝试以下操作：

```
library(plyr)
dur.fn <- function(x) {
  r <- rle(x$s)$length
  data.frame(id = x$id[1], dur.value = r, dur.seq = paste0("dur", seq_along(r)))
}
dat.dur.long <- ddply(dat, .(id), dur.fn)
dat.dur <- dcast(dat.dur.long, id ~ dur.seq, c, value.var = "dur.value", fill = 0)
cbind(dat.s, dat.dur[-1]) 
```

这使：

```
 id cohort s1 s2 s3 s4 s5 dur1 dur2 dur3 dur4
1  1      1  2  2  1  4  0    2    1    1    0
2  2      3  1  1  3  0  0    2    1    0    0
3  3      2  1  2  3  3  4    1    1    2    1 
```

# javascript - jQuery 保存上下文 onclick

> ID：14296926
> 
> 赞同：0
> 
> 时间：2013-01-12T19:08:30.543
> 
> 标签：javascript, jquery, html

无论如何要在元素的子元素上绑定单击侦听器，同时仍将`$(this)`上下文指向该子元素的固定父元素？例如，让我们说我有一个页面 -

HTML：

```
<p><div data-important="idthatisneeded1" class="fixedClass">
<div id="dynamicallygeneratedfirstchild">
<div id="dynamicallygeneratedsecondchild">
<a class="clickabblelinkfromtheparent" href="#">Link1</a>
</div>
</div>
</div></p>
<p><div data-important="idthatisneeded2" class="fixedClass">
<div id="dynamicallygeneratedfirstchild">
<a class="clickabblelinkfromtheparent" href="#">Link2</a>
</div>
</div></p> 
```

我想在点击时获取`data-important`from的值，而不使用或者因为它们都不可靠 -`.fixedClass``.clickabblelinkfromtheparent``.parent().parent()``.parent()`

JS：

```
$(".fixedClass .clickabblelinkfromtheparent").on("click",function(){alert($(this).parent().parent().data("important"));return false;}); 
```

[http://jsfiddle.net/zcdSw/](http://jsfiddle.net/zcdSw/)

我也试过：

```
$(".fixedClass .clickabblelinkfromtheparent").on("click",function(){alert($(this).context(".fixedClass").data("important"));return false;}); 
```

[http://jsfiddle.net/zcdSw/1/](http://jsfiddle.net/zcdSw/1/)

```
$(".clickabblelinkfromtheparent", ".fixedClass").on("click",function(){alert($(this).data("important"));return false;}); 
```

[http://jsfiddle.net/Q8a67/](http://jsfiddle.net/Q8a67/) 和

```
$(".clickabblelinkfromtheparent", ".fixedClass").on("click",function(){alert($(this).context);return false;}); 
```

[http://jsfiddle.net/Q8a67/1/](http://jsfiddle.net/Q8a67/1/)

这些似乎都不起作用.. 那么这究竟是如何用 jQuery 实现的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:23:52.700

你在尝试这样的事情吗？jsfiddle：http: [//jsfiddle.net/zKp3P/](http://jsfiddle.net/zKp3P/)

```
$(function(){
  $('.clickabblelinkfromtheparent').on('click', function(){
    //$(this).closest('.fixedClass').data('important');
    alert($(this).closest('.fixedClass').data('important'));
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T19:24:01.367

```
$('.clickabblelinkfromtheparent').on('click', function(){
    alert($(this).closest('.fixedClass').data('important'));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T19:29:26.587

要检索 DOM 树中祖先的第一个数据重要属性值，您可以基于以下代码段创建一些内容：

```
function searchDataInParentAxe($child, key) {
  var parent = $child.parent();
  return parent.data(key) || searchDataInParentAxe(parent, key);
}

$(".clickabblelinkfromtheparent").on("click", function () {
  alert(searchDataInParentAxe($(this), 'important'));
  return false;
}); 
```

[http://jsfiddle.net/zoom/2mhSQ/](http://jsfiddle.net/zoom/2mhSQ/)

请注意，使用此方法，您不再需要 fixedClass。

# android - 手机调试

> ID：14296928
> 
> 赞同：0
> 
> 时间：2013-01-12T19:08:56.340
> 
> 标签：android

我有一个应用程序，我已经使用了很长时间了。它是开源的，并且退出了开发。当它坏了时我开始修改它，它在我的 Epic Touch 上运行良好。我最近拿起了 Sprint Note 2 并安装了它。它强迫我关闭。我决定“好吧，让我们看看发生了什么以及为什么它的 FCing”。我在模拟器 4.1.2 中运行它，它运行良好。当我尝试使用真手机在 Eclipse 中调试它时，我的 logcat 显示问题并且从未加载：

```
D/dalvikvm( 1032): Added shared lib libnativehelper.so 0x0

D/dalvikvm( 1032): Note: class Landroid/app/ActivityManagerNative; has 153 ulemented (abstract) methods

D/AndroidRuntime( 1032): Calling main entry com.android.commands.pm.Pm

W/zipro   (30332): Unable to open zip '/data/local/tmp/BalanceWidget.apk': Permission denied

D/asset   (30332): failed to open Zip archive '/data/local/tmp/BalanceWidget'

I/ApplicationPolicy( 2487): isApplicationInstallationEnabled

W/zipro   (30332): Unable to open zip '/data/local/tmp/BalanceWidget.apk': Permission denied

D/asset   (30332): failed to open Zip archive '/data/local/tmp/BalanceWidget'

D/dalvikvm( 2487): WAIT_FOR_CONCURRENT_GC blocked 0ms

W/DefContainer(30332): Failed to parse package

W/PackageManager( 2487): verifying app can be installed or not

W/DefContainer(30332): Failed to parse package

D/dalvikvm( 2487): GC_EXPLICIT freed 329K, 14% free 44856K/51591K, paused 4ms, total 96ms

D/AndroidRuntime( 1032): Shutting down VM

D/dalvikvm( 1032): GC_CONCURRENT freed 128K, 87% free 568K/4096K, paused 0ms, total 2ms

 D/jdwp    ( 1032): Got wake-up signal, bailing out of select 
```

我尝试擦除缓存，chmoding 文件夹，但没有任何效果。我换了一个不同的项目，看看它是否是那个项目，但它做了同样的事情。

有没有人对问题可能是什么以及如何解决有任何想法？

**我的手机：**

扎根股票冲刺注 2

L900VPALJC

操作系统运行 - Android 4.1.1

谢谢

# javascript - 使用javascript将accessdb中的列总和填充到文本框中

> ID：14296929
> 
> 赞同：1
> 
> 时间：2013-01-12T19:09:00.780
> 
> 标签：javascript, ms-access, textbox, sum, where

我有一个带有几个文本框的网页；和一个访问数据库，其列包含数字数据、日期和用户 ID。

我需要帮助来汇总日期为 >= 2013 年 1 月 1 日的列。可以说我不能在当前设置中使用服务器端脚本。我只需要通过 JS 或 jquery 来完成。

这是我想出的用于检索总和的代码。但文本框返回此值“[object]”。

另外，我不确定如何编写“WHERE”条件。

我敢肯定，我缺少一些简单的东西。任何帮助将不胜感激！！

```
function retrieve_records() {
var adoconn = new ActiveXobject("ADODB.Connection");
var adoRS = new ActiveXobject("ADODB.Recordset");
adoconn.Open("Provider=Microsoft.Jet.OLEDB.4.0;Data Source='database.mdb'");
adoRS.Open("Select SUM(database_column_name) As Total FROM tablename", adoconn, 1, 3);
textbox1.value = adoRS;
adoRS.close();
adoconn.close();
} 
```

谢谢！马文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:37:16.667

这是从 ADO 和 Access 而不是 Javascript 的知识拼凑而成的。

```
var cmd = new ActiveXObject("ADODB.Command");
cmd.ActiveConnection = adoconn;

var strSQL = "Select SUM(database_column_name) As Total FROM tablename WHERE aDate=?";

cmd.CommandText = strSQL;
var param = cmd.CreateParameter("adate", 7, 1,, "2013/12/31");
cmd.Parameters.Append(param);
var adoRS = cmd.Execute();
textbox1.value = adoRS.Fields(0) 
```

Fields(0) 因为你只有一个字段，所以 Fields('Total') 也应该工作。日期是上面的字符串，它应该适用于 Access，但您可能希望使用正确的日期。

# javascript - JavaScript 全局设计模式

> ID：14296932
> 
> 赞同：0
> 
> 时间：2013-01-12T19:09:27.807
> 
> 标签：javascript, jquery, globals

> **可能重复：** [如何避免 JavaScript 中的全局变量？](https://stackoverflow.com/questions/1841916/how-to-avoid-global-variables-in-javascript)

我正在寻找一些关于如何最好地在 JavaScript 中管理全局变量的建议。

考虑以下：

```
foo = 1;
bar = 2;

// Update our global variable
function doStuff (newFooValue) {
    foo = newFooValue
}

// Update a global based on a condition
function doMoreStuff () {
    if (bar == 3) {
        foo = 1;
    }
} 
```

在这两种情况下，我们的函数都在内部访问全局变量，这让我觉得很难看。根据我的阅读，我们希望尽可能避免使用全局变量，以避免阻塞全局名称空间。

那么为我们的全局变量创建一个我们所需要的结构吗？

例如，

```
var myPage = {}
myPage.foo = 1;
myPage.bar = 2; 
```

我想这解决了全局命名空间冲突问题，但我仍然从我的方法中访问全局范围。

我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T19:15:26.847

为避免全局命名空间污染，您应该将代码包装在[立即调用函数表达式 (IIFE)](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)中。JavaScript 变量具有函数作用域，因此它们只存在于声明它们的函数中。

```
(function () {
    //these variables only exist within the outer function
    var foo,
        bar;
    foo = 1;
    bar = 2;

    //these functions only exist within the outer function
    function fizz() {
        return foo + bar;
    }
    function buzz() {
        return foo - bar;
    }
}()); 
```

上面的例子没什么用，因为所有的变量和函数都被封装了，不能在外部使用。任何*需要*全局的函数/变量都应该手动添加到全局对象中：

```
(function (g) {
    //not repeating code from above, pretend it's here

    //make the functions globally accessible
    g.fizz = fizz;
    g.buzz = buzz;
}(this)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T19:19:40.413

也许把它包在一个班级里？

```
var myPage = {}
myPage.foo = 1;
myPage.bar = 2;
myPage.doStuff = function(newFooValue) {
    this.foo = newFooValue;
} 
```

然后，您只需在全局范围内使用一个位置。您应该避免这种情况，但如果您需要解决全局范围，那么您将这样做。如果您要询问设计模式，则必须更精确。如果您有两个名为 doStuff 和 doMoreStuff 的函数，那么设计起来会非常困难。

# java - Java：交换两行 3 维数组

> ID：14296933
> 
> 赞同：1
> 
> 时间：2013-01-12T19:09:31.300
> 
> 标签：java, multidimensional-array

我有这个数组：

```
int[][][] D = new int[N][M][2]; 
```

我的问题是：我如何交换`D[N][M][0]`和`D[N][M][1]`（它不是交换两个元素，而是交换整个数组）。这可能看起来很傻，但我无法想象 3 维数组是如何组织的，所以我不知道复制它的最佳方法是什么。此外，我不确定内存`D[N][M][0]`中`D[N][M][1]`是否有两个连续的块？如果没有，那么我应该这样做：

```
int[][][] D = new int[2][N][M] 
```

对 ？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:17:52.577

`D[N][M][0]`只是一个单一的`int`。整行都在此参考之下`D[N][M]`，因此要交换行，请执行以下操作：

```
int[] tmp = D[N][M];
D[N][M] = D[N][M+1];
D[N][M+1] = tmp; 
```

# javascript - 搜索文本并用 JavaScript 替换

> ID：14296934
> 
> 赞同：-10
> 
> 时间：2013-01-12T19:09:36.127
> 
> 标签：javascript, jquery, text, replace

示例我有这段代码：

```
<div class="description"> I make you smile. </div> 
```

转换为：

```
<div class="description"> I make you think. </div> 
```

注：“微笑”改为“思考”

如何使用 javascript jQuery 替换它？可以换几个字吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T19:10:51.753

```
var ele = $("div.description");                     //Let ele be target element
ele.html(ele.html().replace(/smile/gi,"think"));    //Replace the word in string,
                                                    // then put it back in. 
```

*`.replace`*：[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)

演示：http: [//jsfiddle.net/DerekL/FdyEH/](http://jsfiddle.net/DerekL/FdyEH/)

# php - php数组与父数组的值合并

> ID：14296936
> 
> 赞同：-1
> 
> 时间：2013-01-12T19:09:49.997
> 
> 标签：php, arrays, merge

我需要将一个数组与父数组的值合并。

```
$testArr=unserialize('a:6:{s:5:"queue";a:2:{i:6;s:1:"5";i:5;s:1:"2";}s:3:"sum";a:2:{i:6;s:3:"765";i:5;s:3:"2.1";}s:7:"sumAccD";a:2:{i:6;s:3:"543";i:5;s:3:"3.1";}s:7:"sumAccC";a:2:{i:6;s:2:"54";i:5;s:3:"3.3";}s:7:"comment";a:2:{i:6;s:12:"test comment";i:5;s:6:"111222";}s:3:"yt0";s:0:"";}');

$ret = array();
foreach ($testArr as $pkey => $pval) {
if (is_array($pval)) {
    foreach ($pval as $pvkey => $pvval) {
        $ret[$pvkey] = array($pkey => $pvval);
    }
}
}
echo '<pre>', print_r($ret), '</pre>'; 
```

在这种情况下，它会打印出来

```
Array
(
[6] => Array
    (
        [comment] => test comment
    )

[5] => Array
    (
        [comment] => 111222
    )

)
1 
```

不幸的是，它只打印出评论。我需要添加其他行：queue、sum、sumAccD、sumAccC。数组必须如下所示：

```
Array
(
[6] => Array
    (
        [queue] => 5
        [sum] => ''
        ....
        [comment] => test comment
    )

[5] => Array
    (
        [queue] => 2
        [sum] => 2.1
        ....
        [comment] => 111222
    )

)
1 
```

请帮助合并它们。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:17:03.090

看看这一行：

```
$ret[$pvkey] = array($pkey => $pvval); 
```

您每次都将密钥分配给一个新数组，覆盖以前存在的内容。在您的情况下，'comment' 是最后一个被处理的键，所以这将是最终数组中的唯一键。

取而代之的是，您可以只在内部 for 之外定义一个新数组，如下所示：

```
$ret[$pvkey] = array(); 
```

然后像往常一样在内部 for 循环中将值分配给该数组（因此不再在那里创建数组！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T07:53:15.087

问题通过更换解决

```
$ret[$pvkey] = array($pkey => $pvval); 
```

和

```
$ret[$pvkey][$pkey] = $pvval; 
```

# objective-c - 对二进制表达式的无效操作（'id' 和 'id'）

> ID：14296938
> 
> 赞同：0
> 
> 时间：2013-01-12T19:10:14.167
> 
> 标签：objective-c, arrays, operations

我有一个从核心数据中获取的数组并尝试进行一些简单的计算，但是将无效操作错误转换为二进制表达式

```
pop_cum[i]= (pop_ln_array[i-1] + pop_ln_array[i]);
//getting error at this point of "Invalid operations to binary expression('id' and 'id') 
```

我知道我们必须将数组值的类型更改为 int 但如何？

```
NSManagedObjectContext *moc = [self managedObjectContext];

NSEntityDescription *entityDescription = [NSEntityDescription entityForName:@"Input_Details" inManagedObjectContext:moc];

NSFetchRequest *request = [[NSFetchRequest alloc] init];

[request setEntity:entityDescription];

// Set example predicate and sort orderings...
request.propertiesToFetch = @[ @"pop_Ln" ];

request.resultType = NSDictionaryResultType;
//if you change the sort order here, please change it to SDInputDetailsList also
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc]
                                    initWithKey:@"sewer_No" ascending:YES];
[request setSortDescriptors:@[sortDescriptor]];

NSError *error;
NSArray *pop_ln_array = [moc executeFetchRequest:request error:&error];
int arrayCount=[pop_ln_array count];
//Calculating cumulative population, flow & peak factor
NSLog(@"arrayCount is %d",arrayCount);
if (pop_ln_array == nil)
{
    NSLog(@"Cumilative population line array is nil");
}
else
{
   NSArray *pop_cum[arrayCount];
    for(int i=0;i<[pop_ln_array count];i++)
    {
        NSLog(@"Cumilative array at %d is %@",i,pop_ln_array[i]);
        if (i==0)
        {
            pop_cum[i]=pop_ln_array[i] ;
        }
        else
        {
            pop_cum[i]= (pop_cum[i-1] + pop_ln_array[i]);    //getting error at this point of "Invalid operations to binary expression('id' and 'id')
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:12:32.360

使用如下

```
for(int i=0;i<[pop_ln_array count];i++){
    NSLog(@"Cumilative array at %d is %@",i,pop_ln_array[i]);
    if (i==0){
            pop_cum[i]=pop_ln_array[i];
            NSLog(@"pop_cum[%d] %@",i,pop_cum[i]);

     }
     else {
            NSLog(@"Pop_cum %@",pop_cum[i-1]);
            [pop_ln_array[i]intValue]);
            NSInteger first=[pop_ln_array[i-1]intValue], second=[pop_ln_array[i]intValue];
            NSInteger sum=first+second;

            pop_cum[i]=[NSString stringWithFormat:@"%d",sum];

        }
} 
```

您正在添加两个`id`s。这是不可能的。

将其转换为 integerValue 或 intValue 或任何数字，然后添加。

# ios - iOS：RestKit 排队管理对象操作阻塞 UI 线程

> ID：14296940
> 
> 赞同：0
> 
> 时间：2013-01-12T19:10:30.380
> 
> 标签：ios, objective-c, restkit

我正在尝试通过加载对象集合`RestKit`并发现此操作阻塞了主线程。`UIViewController`具体来说，当消息中出现a 时会调用此功能`-(void)viewDidAppear:(BOOL)animated;`。只要请求正在加载，用户就无法与 UI 交互，必须等待操作完成。

如何指示 RestKit 异步执行请求（我认为它已经是）并停止阻塞主线程？

```
-(void)rtrvArtistsByStudio:(ISStudio *)studio
{
NSLog(@"Retrieving Artists for studio %ld", [studio studioID]);
NSNotificationCenter *notificationCenter = [NSNotificationCenter defaultCenter];

NSDictionary *params = [NSDictionary dictionaryWithObject:[NSString stringWithFormat:@"%ld", [studio studioID]] forKey:@"studioID"];

NSURLRequest *request = [restkit requestWithObject:nil method:RKRequestMethodGET path:@"/restAPI/rtrvArtistsByStudio" parameters:params];
RKManagedObjectRequestOperation *operation = [restkit managedObjectRequestOperationWithRequest:request managedObjectContext:restkit.managedObjectStore.persistentStoreManagedObjectContext success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
    NSArray *artists = [mappingResult array];
    [studio setArtists:artists];
    [notificationCenter postNotificationName:nStudioLoadedArtists object:studio];
} failure:^(RKObjectRequestOperation *operation, NSError *error) {
    NSLog(@"Failed to load artists for studio %ld due to %@", [studio studioID], error);
    [notificationCenter postNotificationName:nStudioFailedLoadingArtists object:studio];
}];
[restkit enqueueObjectRequestOperation:operation];
} 
```

编辑：我还应该注意，它`restkit`是一个指向`RKObjectManager`.

RestKit 版本为 0.20

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T21:20:33.380

请求肯定是异步分派的。如果在 Xcode UI 中按下暂停按钮并查看线程，请求期间主线程和后台线程发生了什么？这应该可以深入了解导致线程阻塞的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T14:24:52.520

事实证明，这实际上是我自己的错（当然）。我有一个`UIViewController`执行一些转换的类别。在过渡期间，我有`UIApplication`忽略触摸事件，直到过渡完成（0.2 秒，非常简短）。我完全忘记了它的存在。

因为我正在加载一些远程对象，`viewDidAppear`所以它仍然忽略触摸事件，直到完成。删除触摸忽略解决了这个问题。

# php - 通过php中的函数更新变量值

> ID：14296946
> 
> 赞同：1
> 
> 时间：2013-01-12T19:11:01.723
> 
> 标签：php, javascript

我是网页开发的新手，这似乎是一个基本问题，但我不知道如何解决。

通过一个按钮，我需要更改 php 中变量的值，特别是每次按下按钮时，变量的值都必须增加。

代码如下：

```
 <!DOCTYPE html>
     <html lang="en">
     <head>
        <meta charset="utf-8">
        <title>Test</title>
     </head>
     <body>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
        <script>
             function echoVal()
             {
                 alert("<?php val(); ?>");
             }
        </script>

        <?php
             function val() {
                static $a = 0;
                $a++;
                echo $a;
             } 
        ?>

        <button onclick="echoVal()"> Increase </button>
     </body>
     </html> 
```

主要问题是变量 $a 的值始终为 1，按下按钮时不会增加其值。我已经保存了扩展名为 .php 的文件（我不确定这是否会有所不同，但我只是提到它）。

有什么建议可以解决这个问题吗？

提前感谢您的任何建议。

编辑代码：

```
 <!DOCTYPE html>
     <html lang="en">
     <head>
        <meta charset="utf-8">
        <title>Test</title>
     </head>
     <body>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
        <script>
             function echoVal()
             {
                 alert("<?php val(); ?>");
             }
        </script>

        <?php
             function val() {
                static $a = 0;
                $a++;
                $filename ='infoX.txt';
                if (is_writable($filename)) {
                    if (!$handle = fopen($filename, 'w')) {
                        echo "Cannot open file";
                    } else {
                        if (fwrite($handle, $a) == FALSE) {
                            echo "Cannot write to file";
                        } else {
                            echo $a;
                        }
                        fclose($handle);
                    }  
               } else {
                    echo "The file is not writable";
               }
             } 
        ?>

        <button onclick="echoVal()"> Increase </button>
     </body>
     </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T19:21:21.893

更新：我认为这个例子： [https](https://stackoverflow.com/a/3410025/49251) ://stackoverflow.com/a/3410025/49251可能会向您展示您正在尝试做什么**。**我在下面的回答是试图提供有关您的第一次尝试为什么不起作用的背景信息。

* * *

PHP 中的静态变量仅在脚本执行期间“存在”。

该脚本仅在服务器上执行——只要服务器需要处理与请求关联的文件/脚本，脚本中的静态变量将仅是“活动的”。一旦处理了请求并发送了响应，PHP 就消失了。完毕。没活着。完成的。

浏览器端没有 PHP，并且在发送响应后，服务器不再针对您的请求运行任何内容（某些内存缓存策略可能是一个例外，但通常，我所描述的是正常的PHP 的工作方式）。

PHP 的 web 执行模型是：（1）请求，（2）服务器（通常是 Apache）运行 PHP 来处理请求的代码，发送响应（3）并完全完成。

做你想做的事：

1.  您可以完全使用浏览器端代码（javascript），或者
2.  您可以将按钮单击的结果发送到服务器，以便在数据库中持久化，并通过重新加载/重新生成页面或使用 ajax 在服务器上获取一些代码以运行并更新一部分来重新请求这些更新的结果相应的页面。

# sqlite - 使用“匹配”时是否可以忽略列？

> ID：14296947
> 
> 赞同：0
> 
> 时间：2013-01-12T19:11:31.990
> 
> 标签：sqlite

根据[SQLite 文档](http://www.sqlite.org/fts3.html#section_3)，我可以写：

```
SELECT * FROM docs WHERE docs MATCH 'title:linux problems'; 
```

其中 title 是列名。是否可以创建类似的东西：

```
SELECT * FROM docs WHERE docs MATCH 'ignore:linux problems'; 
```

要搜索除 linux 列之外的所有表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T22:54:35.073

您可以只搜索一列或所有列。

您可以尝试列出除要忽略的列之外的所有列：

```
SELECT * FROM docs WHERE docs MATCH 'col1:linux OR col2:linux OR ...' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T23:49:24.420

您可以使用 NOT 排除列，例如：

```
SELECT * FROM docs WHERE docs MATCH 'linux problems' NOT ignorecolumnname:'linux problems'; 
```

这将匹配除忽略 (NOT) 列之外的所有内容。

编辑：显然这取决于驱动程序，它适用于某些但不是全部。

# three.js - 为什么我墙上的灯光看起来很有趣？三.js

> ID：14296950
> 
> 赞同：3
> 
> 时间：2013-01-12T19:12:03.460
> 
> 标签：three.js

在我使用 Three.js (r52) 的游戏中，我在获得正确的照明时遇到了一些问题。

这个地牢级别使用简单的长方体作为墙壁和屋顶。出于某种原因，每个网格开始时灯光都很亮，但随后向另一侧逐渐变暗。

请注意，地板没有人工制品，这是因为它是一个巨大的四边形。 ![在此处输入图像描述](../Images/b08a51516e966c93db437ee5d6617ec9.png)

使用的光源是 PointLight。我的网格的材料是这样创建的：

```
 var texture  = new THREE.Texture( image,
    new THREE.UVMapping(),
    THREE.RepeatWrapping,
    THREE.RepeatWrapping,
    THREE.NearestFilter,
    THREE.NearestMipMapLinearFilter );

  return new THREE.MeshLambertMaterial({
    map : texture
  }); 
```

长方体是从 3ds max 导出的 OBJ 模型，使用 gw::OBJ-exporter 进行转换。这些是我的导出设置：

![在此处输入图像描述](../Images/bdaf62bd8eadec014ee288c606bdf144.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T20:27:43.383

显然您遇到了与此线程相同的问题：[https ://github.com/mrdoob/three.js/issues/1258](https://github.com/mrdoob/three.js/issues/1258)

您需要使用类似 material.shading = THREE.FlatShading;

# c# - 将 DateTime 转换为 UTC 并返回

> ID：14296951
> 
> 赞同：0
> 
> 时间：2013-01-12T19:12:04.057
> 
> 标签：c#, asp.net-mvc

也许这听起来有点奇怪，但我实际上知道这个问题的解决方案。我最初的解决方案没有用，我真的想知道为什么。它是一个 Asp.Net MVC 应用程序。

这没有用：

```
 public static DateTime ConvertToUTC(String userTimeZone, DateTime date)
    {
        var result = TimeZoneInfo.ConvertTimeToUtc(date, TimeZoneInfo.FindSystemTimeZoneById(userTimeZone));

        return result;
    }

    public static DateTime ConvertToUserTime(string userTimeZone, DateTime date)
    {
        var result = TimeZoneInfo.ConvertTimeFromUtc(date, TimeZoneInfo.FindSystemTimeZoneById(userTimeZone));

        return result;
    } 
```

我无法将时间转换回原来的时间。

这确实有效：

```
public DateTime ConvertToUTC(String userTimeZone, DateTime date)
    {

        var result = TimeZoneInfo.ConvertTimeToUtc(result, TimeZoneInfo.FindSystemTimeZoneById(userTimeZone));

        return result;
    }

    public DateTime ConvertToUserTime(string userTimeZone, DateTime date)
    {
        var userTimezoneInfo = TimeZoneInfo.FindSystemTimeZoneById(userTimeZone);
        var result = date.Add(userTimezoneInfo.BaseUtcOffset);

        return result;
    } 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:02:27.183

For this problem a special DataType is introduced in .NET 3.5: [DateTimeOffset](http://msdn.microsoft.com/en-us/library/system.datetimeoffset.aspx) it is functionally similar to [DateTime](http://msdn.microsoft.com/en-us/library/system.datetime.aspx) but it stores also a UTC offset.

# assembly - 从堆栈中获取过程参数

> ID：14296958
> 
> 赞同：1
> 
> 时间：2013-01-12T19:13:01.133
> 
> 标签：assembly, x86, procedure, callstack

我正在尝试学习如何用汇编语言调用程序。下面是一个显示我的问题的简单示例。我`7`压栈，调用程序；当程序从堆栈中弹出时，该值不是我推送的那个。有人可以帮我了解正在发生的事情以及我可以做些什么来完成这项工作吗？

```
PUSH 7
CALL FOOBAR
MOV AH, 4CH
INT 21H

FOOBAR PROC
    POP AX ; Not 7
    RET
FOOBAR ENDP 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T20:02:48.733

该`call`指令将返回地址放在堆栈上，因此当您`pop ax`在程序中时，它不会获得您推送的 7，而是返回地址。也不起作用（它希望在`ret`那里找到返回地址！）尝试类似...

```
FOOBAR proc
push bp ; save caller's reg
mov bp, sp
mov ax, [bp + 4]
; do something with it
; leave - equivalent to:
mov sp, bp
pop bp

ret 
```

这里有一个可能的“陷阱”。“远”过程在堆栈上同时具有段（cs）和偏移量，因此返回地址有 4 个字节，`push bp`第一个参数 at 有两个字节`[bp + 6]`。我想只是`proc`默认为`proc near`- 你可能想说，只是为了清楚起见。如果您需要`proc far`，可能是时候升级到 32 位代码（或 64 位）了。16 位代码就是这样一个 PITA - 我们真的很高兴忘记它！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T19:20:50.133

这是从 main 调用过程并传递两个参数值分别为 1 和 2 时的堆栈状态：

```
 Address    : Value
              ----------------------
              0xbffff3b0 : 0x0011e030
              0xbffff3b4 : 0x08049ff4
      esp --> 0xbffff3b8 : 0xbffff3e8
              0xbffff3bc : 0x08048419
              0xbffff3c0 : 0x00284324
              0xbffff3c4 : 0x00000003
      ebp --> 0xbffff3c8 : 0xbffff3e8 <-- old ebp
              0xbffff3cc : 0x080483e5 <-- return address
ebp + 0x8 --> 0xbffff3d0 : 0x00000001 <-- first parameter
ebp + 0xc --> 0xbffff3d4 : 0x00000002 <-- second parameter
              0xbffff3d8 : 0x0804840b
              0xbffff3dc : 0x00283ff4 
```

此代码取自 32 位程序，因此寄存器实际上是 bp 和 sp，相对偏移量是 0x4 和 0x6：

# ftp - Is a LAMP stack necessary on aws for a FTP server?

> ID：14296960
> 
> 赞同：-2
> 
> 时间：2013-01-12T19:13:22.647
> 
> 标签：ftp, amazon-web-services, lamp

I would like to setup an ftp site on AWS/EC2 and I have read in more than one that LAMP is recommended (including [here](https://stackoverflow.com/questions/9484062/how-to-use-ftp-on-amazon-aws) and don't understand why I need PHP and mySQL for an FTP site.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:28:13.337

You **do *not* need** a LAMP stack and I would strongly advice against its installation. A usual security rule is to run only as much software as required.

That you need is a FTP server. Install Ubuntu and configure FTP server as [described here](https://help.ubuntu.com/10.04/serverguide/ftp-server.html), for instance. Alternatively you can choose some other from many available FTP servers, free and commercial.

# objective-c - 在 OS X 上加载由 codesign 工具生成的字典属性列表

> ID：14296961
> 
> 赞同：1
> 
> 时间：2013-01-12T19:13:44.510
> 
> 标签：objective-c, xcode, macos, plist, nsdictionary

我正在做一个简单的项目，但我遇到了一个看似简单的任务。将基于字典的 plist 加载到 NSDirectory 中。这是我以前做过很多次的事情，所以我对为什么我现在被卡住有点困惑。

我正在尝试读取我在 OS X 上使用 codesign 工具创建的 plist。我正在使用的该工具的调用将应用程序权利转储到文件中。在 Safari 的情况下，它会这样做：

```
codesign --display --entitlements :<path to plist> /Applications/Safari.app 
```

这会在我指定的路径生成一个普通的 XML plist。您需要冒号前缀，这样它就不会在文件的开头插入一个神奇的二进制 blob。生成的 plist 的完整 XML 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>com.apple.private.accounts.allaccounts</key>
    <true/>
    <key>com.apple.developer.ubiquity-kvstore-identifier</key>
    <string>com.apple.Safari.SyncedTabs</string>
    <key>com.apple.private.tcc.allow</key>
    <array>
            <string>kTCCServiceAddressBook</string>
    </array>
</dict>
</plist> 
```

简单吧？所以现在我只想把它加载到一个 NSDictionary 中。我只是尝试以正常方式加载它：

```
NSDictionary *entitlementDict = [NSDictionary dictionaryWithContentsOfFile:tempFile]; 
```

但是会发生什么，它拒绝加载任何内容，我的内容为零：

```
Printing description of entitlementDict:
<nil>
(lldb) 
```

我觉得我在这里遗漏了一些明显的东西。我知道 NSDictionary 加载方法只有在所有内容都是 plist-objects 时才有效，但看起来它们确实如此，Xcode 和 QuickLook 会很高兴地向我展示文件的内容。此外，plutil 验证语法是否正确。

有任何想法吗？谢谢。

**更新：**

感谢到目前为止已经回答的人。有关更多信息，我正在使用正确的完整路径。

从调试器：

```
Printing description of tempFile:
/var/folders/yk/kvvzp89x03v896rqx4mc9rqw0000gq/T/FFF82FDD-0A01-4139-9719-00B447B2F907-60198-000284518B41D04F/BC54EEC8-5A0B-49FD-9BFD-44B7FFB29B73.plist 
```

从终端：

```
FatMan:~ macshome$ file /var/folders/yk/kvvzp89x03v896rqx4mc9rqw0000gq/T/FFF82FDD-0A01-4139-9719-00B447B2F907-60198-000284518B41D04F/BC54EEC8-5A0B-49FD-9BFD-44B7FFB29B73.plist
/var/folders/yk/kvvzp89x03v896rqx4mc9rqw0000gq/T/FFF82FDD-0A01-4139-9719-00B447B2F907-60198-000284518B41D04F/BC54EEC8-5A0B-49FD-9BFD-44B7FFB29B73.plist: XML  document text 
```

和：

```
FatMan:~ macshome$ ls -l /var/folders/yk/kvvzp89x03v896rqx4mc9rqw0000gq/T/FFF82FDD-0A01-4139-9719-00B447B2F907-60198-000284518B41D04F/BC54EEC8-5A0B-49FD-9BFD-44B7FFB29B73.plist
-rw-r--r--  1 macshome  staff  455 Jan 12 15:13 /var/folders/yk/kvvzp89x03v896rqx4mc9rqw0000gq/T/FFF82FDD-0A01-4139-9719-00B447B2F907-60198-000284518B41D04F/BC54EEC8-5A0B-49FD-9BFD-44B7FFB29B73.plist 
```

我可以发布生成我的临时路径的代码，但我认为这并不重要。也许我会尝试用更短的路径进行测试，但我认为这也不重要。这是一种非常典型的生成临时文件的方法。

**最后更新：** 我发现我做错了什么，尽管我希望这是一个更有趣的答案。

我正在使用 NSTask 调用代码设计工具，但在我的基本测试中，我忘记等到它完成后再尝试将 plist 加载到我的 NSDictionary 中。如果我只使用终止处理程序或 waitUntilExit 或终止通知，那么一切都会按预期工作。

非常感谢那些试图提供帮助的人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T19:34:30.090

遇到了同样的问题，我认为这是因为您没有正确获取文件的路径。当我将测试更改为执行以下操作时，它起作用了。

```
 NSDictionary *entitlementDict = [NSDictionary dictionaryWithContentsOfFile:[[[NSBundle mainBundle] bundlePath] stringByAppendingPathComponent:@"DictionaryTest.plist"]]; 
```

从文档：

```
+ (id) dictionaryWithContentsOfFile:(NSString *)path 
```

> 参数
> 
> 小路
> 
> 完整或相对路径名。由路径标识的文件必须包含其根对象是字典的属性列表的字符串表示形式。
> 
> 返回值
> 
> 一个新字典，包含路径中的字典，如果存在文件错误或文件的内容是字典的无效表示，则返回 nil。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:08:37.633

我弄清楚我做错了什么，尽管我希望这是一个更有趣的答案。

我正在使用 NSTask 调用代码设计工具，但在我的基本测试中，我忘记等到它完成后再尝试将 plist 加载到我的 NSDictionary 中。如果我只使用终止处理程序或 waitUntilExit 或终止通知，那么一切都会按预期工作。

非常感谢那些试图提供帮助的人！

# android - 如何在 SherlockListFragment 中使用上下文动作模式

> ID：14296963
> 
> 赞同：2
> 
> 时间：2013-01-12T19:14:09.793
> 
> 标签：android, android-actionbar, actionbarsherlock

我想在我的应用程序中使用上下文操作栏 (CAB)，但与旧版本的 Android 不兼容，所以我正在使用本教程： http: [//www.miximum.fr/tutos/849-porting-the-contextual- anction-mode-for-pre-honeycomb-android-apps](http://www.miximum.fr/tutos/849-porting-the-contextual-anction-mode-for-pre-honeycomb-android-apps) 我的代码是：

```
public class SongsFragment extends SherlockListFragment implements
    LoaderManager.LoaderCallbacks<Cursor>, OnLongClickListener{

...
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    activity = this.getActivity();
    ...
    mMode = null;
    mListView = getListView();
    mListView.setItemsCanFocus(false);
    mListView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    mListView.setOnLongClickListener(this);

}

@Override
public boolean onLongClick(View v) {
    SparseBooleanArray checked = mListView.getCheckedItemPositions();
    boolean hasCheckedElement = false;
    for (int i = 0; i < checked.size() && !hasCheckedElement; i++) {
        hasCheckedElement = checked.valueAt(i);
    }

    if (hasCheckedElement) {
        if (mMode == null) {
            mMode = activity.startActionMode(mActionModeCallback);
        }
    } else {
        if (mMode != null) {
            mMode.finish();
        }
    }
    return false;
}

 private ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {

    @Override
    public boolean onCreateActionMode(ActionMode mode, Menu menu) {
        // Create the menu from the xml file
        activity.getSupportMenuInflater().inflate(R.menu.cab_songs, menu);
        return true;
    }
    ... 
```

我有以下错误：

1.  -"activity.startActionMode(mActionModeCallback);"：Activity类型中的方法startActionMode(ActionMode.Callback)不适用于参数(ActionMode.Callback)
2.  -activity.getSupportMenuInflater().inflate(R.menu.cab_songs, menu);"：方法 getSupportMenuInflater() 对于 FragmentActivity 类型未定义

任何想法？使用 sherlock 的 CAB 是否有另一种解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T19:18:22.800

将您的导入更改为它们的 ActionBarSherlock 等效项（和`ActionMode`）。`MenuInflater``com.actionbarsherlock.view.ActionMode``com.actionbarsherlock.view.MenuInflater`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T12:10:49.773

我解决了使用：

```
getSherlockActivity().startActionMode(mActionModeCallback);
...
mode.getMenuInflater().inflate(R.menu.cab_songs, menu); 
```

现在，我想在用户执行“单击”时执行一个操作，并在用户执行“长按”时执行另一个操作。我有“onItemLongClick”和“onListItemClick”，但有时不会调用longClick，当我释放“onListItemClick”时会调用它。我该怎么做？

# jquery - 为什么我不能从元素中删除内联样式

> ID：14296964
> 
> 赞同：0
> 
> 时间：2013-01-12T19:14:14.143
> 
> 标签：jquery, html, css

在所有动画完成后，我需要完全从元素中删除不透明样式。
[http://jsfiddle.net/SthJy/1/](http://jsfiddle.net/SthJy/1/)

我尝试设置但没有效果`css('opacity', '')`，`removeAttr('style')`inilne 风格仍然存在。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T19:27:14.830

`delay`不适用于`css()`或`removeAttr()`因为它们不可排队。`delay()`在文档中阅读更多内容

您需要使用`css()`或`removeAttr()`在最终动画的完整调用中

```
 $("#helpCloud").animate({opacity: 1}, 200)
                .delay(2200)
                 .animate({  opacity: 0 }, 200, function(){
                      setTimeout(function(){
                          $(this).removeAttr('style');
                      }, 300);
                 }); 
```

由于元素的默认不透明度在 css 中为零，因此不确定您希望看到什么

API 参考：http: [//api.jquery.com/delay](http://api.jquery.com/delay)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T19:31:59.593

通过使用 .queue() 您可以保持与动画同步。

```
$("#helpCloud").animate({ opacity: 1 }, 200)
            .delay(2200)
            .animate({ opacity: 0 }, 200)
            .delay(300)
            .queue(function(next) {
              $(this).css('opacity', '');
              alert('happend only after .delay is over');
              next()
             }) 
```

现场演示：http: [//jsfiddle.net/SthJy/3/](http://jsfiddle.net/SthJy/3/)

另一种获得相同结果的方法是在 .dalay(300, function() {}); 上使用回调

```
$("#helpCloud").animate({ opacity: 1 }, 200)
                .delay(2200)
                .animate({ opacity: 0 }, 200)
                .delay(300, function() {
                  $(this).css('opacity', '');
                  alert('happend only after .delay is over');
                }); 
```

现场演示：http: [//jsfiddle.net/SthJy/4/](http://jsfiddle.net/SthJy/4/)

# php - 为什么 jQuery 不能在我的网站上运行？

> ID：14296965
> 
> 赞同：0
> 
> 时间：2013-01-12T19:14:17.923
> 
> 标签：php, javascript, jquery, html, slidetoggle

> **可能重复：**
> [jQuery 甚至没有被调用](https://stackoverflow.com/questions/3857608/jquery-not-even-being-called)

有趣的是，在 jsfiddle 上，如果我从左侧面板中选择最新的 jQuery 选项，它会完美运行。该网站基本上是一个运行此菜单功能的测试页面。HTML：

```
 <script src="http://code.jquery.com/jquery.min.js"></script>
<script>
  $('a.expand').hover(function() {
  $('#Menu').slideToggle();
});

</script>
<a href="" class="expand">
<p>hello!</p>
</a>
<div id="Menu">
wowtest
</div> 
```

如果有帮助，它是一个 PHP 文件。

jsfiddle：http: [//jsfiddle.net/txeD9/](http://jsfiddle.net/txeD9/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T19:15:29.600

那是因为执行脚本时没有`a.expand`元素，因为元素是在之后声明的。

将您的代码放在正文的末尾或通过将其更改为使用[准备好的回调](http://api.jquery.com/ready/)

```
<script>
   $(function(){
    $('a.expand').hover(function() {
      $('#Menu').slideToggle();
    });
   });
</script> 
```

编写`$(function(){ somecode });`要求 jQuery`somecode`在 DOM 准备好时执行。

# html - 为什么我的 div 不在页面中心？

> ID：14296967
> 
> 赞同：2
> 
> 时间：2013-01-12T19:14:21.660
> 
> 标签：html, css

我的结果： http: [//i.imgur.com/P50RS.png](http://i.imgur.com/P50RS.png) 我的 style.css

```
body {
background: url("img/bgs.png") repeat #cccccc;
color: #000000;
}

main {
margin-left: auto;
margin-right: auto;
} 
```

我的 index.html

```
<html>
<head>
<title>Progress</title>
<link rel="stylesheet" href="css3-progress-bar.css" />
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<link type="text/css" href="style.css" rel="stylesheet" />
</head>

<body>

<div id="main">
<p><b>215/160 LBS.</b></p>
<div class="bar_mortice rounded green_mortice">
      <div class="progress rounded green" style="width: 05%;"></div>
    </div>
</div>

</body>

</html> 
```

为什么文本不居中？此外，直到我添加进度条才居中

```
margin: 0 auto; 
```

我在 main 下尝试过，但没有运气。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T19:16:42.653

在 css 中，您需要使用`#main`而不仅仅是`main`.

此外，您需要给它一些宽度，否则它可能会占据整个宽度。尝试这个：

```
#main {
margin-left: auto;
margin-right: auto;
width: 50%;
} 
```

# python - Django：使用延迟查询时获取模型类型

> ID：14296972
> 
> 赞同：4
> 
> 时间：2013-01-12T19:14:38.797
> 
> 标签：python, django, django-models

当您使用`defer(...)`查询命令时，Django 返回的类与您的原始模型不同。使用 defer 字段时如何动态获取模型的名称？

在代码中：

```
obj_nodefer = model_class.objects.filter(title="foo")[0]
model_name = str(type(obj_nodefer)) # Works just fine

obj_defer = model_class.objects.filter(title="foo").defer("content")[0]
model_name = str(type(obj_defer)) # Does't return the right name because of defer above. 
```

如何从中获取模型的名称`obj_defer`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-11-24T15:19:44.720

在延迟类上，您还可以在不`__class__.__name__`使用字符串的情况下获取原始类：

```
obj._meta.concrete_model
'product.models.ProductModelName'

obj._meta.concrete_model._meta.app_label
'product'

obj._meta.concrete_model._meta.model_name
'productmodelname' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-09T23:00:29.923

要获得非延迟模型，请执行

```
t = type(obj)
if t._deferred:
  t = t.__base__ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T19:31:16.970

您可以访问，`obj.__class__`

```
 >>> print obj.__class__
  <class 'product.models.Product_Deferred_name'>
  >>> print obj.__class__.__name__
  Product_Deferred_name
  >>> print obj.__class__.__name__.split("_")[0]
  Product 
```

如果您的型号名称包含`_`,

```
 >>> print obj.__class__.__name__.replace("_Deferred_name","")
  Product 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T20:13:36.897

在 django 1.4 中，延迟类的构造如下：

```
def deferred_class_factory(model, attrs):
    """
    Returns a class object that is a copy of "model" with the specified "attrs"
    being replaced with DeferredAttribute objects. The "pk_value" ties the
    deferred attributes to a particular instance of the model.
    """
    class Meta:
        proxy = True
        app_label = model._meta.app_label

    # The app_cache wants a unique name for each model, otherwise the new class
    # won't be created (we get an old one back). Therefore, we generate the
    # name using the passed in attrs. It's OK to reuse an existing class
    # object if the attrs are identical.
    name = "%s_Deferred_%s" % (model.__name__, '_'.join(sorted(list(attrs))))
    name = util.truncate_name(name, 80, 32)

    overrides = dict([(attr, DeferredAttribute(attr, model))
            for attr in attrs])
    overrides["Meta"] = Meta
    overrides["__module__"] = model.__module__
    overrides["_deferred"] = True
    return type(name, (model,), overrides) 
```

所以，理论上你应该通过做

```
type(type(deferred)) 
```

# algorithm - 如何判断一个 3D 对象是否适合另一个 3D 对象（容器）？

> ID：14296974
> 
> 赞同：6
> 
> 时间：2013-01-12T19:15:01.327
> 
> 标签：algorithm, computational-geometry

给定两个 3d 对象，我怎样才能找到一个是否适合第二个（并找到对象在容器中的位置）。

对象应平移和旋转以适合容器 - 但不得进行其他修改。

其他并发症：

1.  相同的情况 - 但要寻找最合适的解决方案，即使它不是适当的匹配（最小化不适合容器的对象的体积）

2.  支持弹性物体 - 找到最佳配合，同时最大限度地减少物体中的“扭曲”

这是一个非常普遍的问题——我不希望有一个完整的解决方案。任何指向相关论文\文章\图书馆\工具的指针都会很有用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-03T23:08:25.743

考虑目标对象中的一个多边形（三角形）。对于这个多边形，在另一个几何（源）中找到等效的多边形，即。边长、边角、面积都应该相同。如果只有一个匹配项，请找到以这种方式改变顶点的刚性变换矩阵：`X' = M*X`。由于`X'`AND`X`对于匹配多边形上的所有点都是已知的，因此这应该可以通过线性代数实现。

如果要在多边形的顶点之间进行一对一映射，请以相同的顺序遍历多边形的边缘，并制作一个查找表，将每个顶点一个一个多边形映射到另一个多边形的一个顶点。如果您有 3d 对象的[半边数据结构](http://doc.cgal.org/latest/HalfedgeDS/index.html#Chapter_Halfedge_Data_Structures)，这将大大简化此过程。

如果找到多个匹配的多边形，则从这两个点遍历源多边形，并继续将它们的相邻多边形与目标多边形匹配。继续直到其中一个中断，之后您可以执行与单匹配版本相同的步骤。

[这里](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.173.2196&rep=rep1&type=pdf)列出了更严肃的解决方案，但我认为上面的方法也可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T13:21:04.103

这似乎是一个相当困难的问题。可能的方法是采用一些启发式方法来建议转换，然后检查它是否好。如果转换仅将对象稍微移出内部（例如在一个部分），则稍微调整以适应转换并对其进行测试。如果对象“大量”出局（例如，在同一/两侧的所有轴上），则进行新的启发式猜测。

只是启发式的一般想法。对具有相同像素大小的对象进行光栅化。它可以是对象体积的八叉树。制作像素之间的连接图。检查图之间的子图同构。如果有子图，则该位置用于测试。

这种方法还支持 90 度旋转。

甚至可以在图表上进行一些测试。如果子图的所有体积邻居都在更大的图中，则对象在其中。

一般来说，这是“改进的”边界框方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T00:07:18.550

这是一种可能不太理想的方法。

您可以尝试固定 1 个形状的位置（在 3D 空间中）。将另一个形状放在该形状的顶部。然后创建将形状中的一个点连接到另一个形状中的点的链接。然后模拟当链接同样拉紧时会发生什么。使不固定的点旋转并平移，直到它稳定为止。

如果配合足够松，您可以只使用 3 个链接（3D 链接的最低数量）并尝试所有可能的组合。但是，为了更紧密地配合，您需要更多的链接，也许足以将它们放置在形状的每个点上，并且点数最少。这意味着您将有一些方法来确定如何放置链接，这并非易事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-03T19:24:50.820

另一种解决方案是在两个对象上投影相同数量的点，并在点集上进行最小二乘最佳拟合。点集的排序可能不会相同，因此在最适合的最小二乘和点的重新排序之间进行迭代，以便两个对象上的点接近相同的顺序。这个方程的发展是很多代数，但在概念上并不复杂。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-29T01:51:08.673

多汁的问题！正如计算几何中的典型情况一样，这个问题可能非常复杂，因为几何抽象不匹配。对于各种 if-else 案例等。但是选择正确的抽象，解决方案变得微不足道，只有很少的子案例。

计算你的形状的[距离变换，瞧！](https://homepages.inf.ed.ac.uk/rbf/HIPR2/distance.htm)您的解决方案是微不足道的。请允许我详细说明。

网格（像素）上形状的距离图编码形状边界上最近点到该像素的距离。它可以在两个方向向外或向内计算到形状中。在这个问题中，向外的距离图就足够了。

*   步骤 1：计算两个形状 D_S1、D_S2 的距离图
*   第 2 步：减去距离图。差异 = D_S1-D_S2
*   第 3 步：如果 Diff 只有正值。然后您的形状可以相互包含（+ve => S1 大于 S2 -ve => S2 大于 S1）如果 Diff 具有正值和负值，则形状相交。

你有它。享受 ！

# php - 管理员登录表单

> ID：14296975
> 
> 赞同：0
> 
> 时间：2013-01-12T19:15:01.800
> 
> 标签：php, html

我正在尝试构建一个登录表单，以便我在数据库中指定的管理员可以将图像插入我的数据库。

我有一些错误：

1）我`<?php echo $_SERVER['PHP_SELF']; ?>`用来调用自己（调用Login.php），所以它会加载它下面的PHP代码（在同一个文件中）。每当我按下提交时，它不会转到 php 代码中的指定标头，而是返回到 homepage.php。

**Login.php：**管理员登录表单 html

```
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
<table>
    <tr>
        <td>Username: </td><td><input type="text" name="username"></td>
    </tr>
    <tr>
        <td>Password: </td> <td><input type="text" name="pw"></td>
    </tr>
</table>
<br />
<input type="submit" value="Log in">
</center> 
```

2) 第二个问题是...查看 php 代码，我试图找到一个函数，它可以让我获取关联数组的特定键。例如，我运行数据库查询并将其作为关联数组存储在 $result 中，然后返回。然后我想从 users 表中获取一个键（“用户名”和“密码”）并将它们与上述 html 表单的输入进行比较。

我试过使用array_keys，但这需要一个数组，而不是一个对象。所以我投了它，它仍然不起作用。

我`print_r(array_keys($userResult, "username"));`用来看看它是否会打印我想要的密钥。

**Login.php** php代码

```
<?php 

$username = isset($_POST['username']) ? $_POST['username'] : "";
$password = isset($_POST['pw']) ? $_POST['pw'] : "";

$userResult = verify($username, $password);
$array = (array)$userResult; //cast to array

print_r(array_keys($userResult, "username"));

if(array_keys($userResult, "username") == "dan" && array_keys($userResult, "password") == "12345") {
    header("Location: ?action=admin");
}
else {
    echo "<center>Incorrect credentials</center>";
}

function verify($user, $pw) {
    include './scripts/dbconnect.php';

    $result = $mysqli->query("SELECT username, password FROM users WHERE username='" . $user . "' AND password='" . $pw . "'"); 

    return $result; 
}

include 'include/footer.php';
?> 
```

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:23:44.283

对于第一部分，如果您只想刷新页面，您可以这样做。

```
<form action='' method=''> 
```

否则，硬编码从 login.php 到处理文件的路径可能更容易。

对于第二部分，我认为您错误地创建了数组。

```
$array = array();
$array[$username] = $password; // $username is the key and $password is the value aka.. array ($username => $password ) 
```

我不知道为什么，但似乎

```
$array = (array)$userResult; 
```

您正在尝试将数组设置为通过函数运行的元组，并且该方法似乎比仅设置键和值要清晰得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T19:25:56.680

您可以将操作保留为空白`action=""`，它将发布在同一页面中。我不记得`$_SERVER['PHP_SELF']`内部/外部返回的内容，但这一定是您的问题。

此外，您已经在查询中检查用户名和密码，那么您只需要知道它是否返回结果。检查行数:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T17:55:11.327

谢谢nimlhug，让它像这样工作......忘记了我检查数据库的主要原因是实际查看是否有匹配的结果......不知道为什么我要再次检查以查看是否有匹配我本来可以用`num_rows == 1`的，哈哈。

```
 <?php
            include 'include/header.php';
            ?>
            <center>

            <h2>Admin Log in</h2>
            <br/>

            <form action="" method="post">
                <table>
                    <tr>
                        <td>Username: </td><td><input type="text" name="username"></td>
                    </tr>
                    <tr>
                        <td>Password: </td> <td><input type="text" name="pw"></td>
                    </tr>
                </table>
                <br />
                <input type="submit" value="Log in">
                </center>
            <?php 

            $username = isset($_POST['username']) ? $_POST['username'] : "";
            $password = isset($_POST['pw']) ? $_POST['pw'] : "";

            if(verify($username, $password) == 1) {
                header("Location: ?action=admin");
            }
            else {
                echo "<center>Incorrect credentials</center>";
            }

            function verify($user, $pw) {
                include './scripts/dbconnect.php';

                $result = $mysqli->query("SELECT username, password FROM users WHERE username='" . $user . "' AND password='" . $pw . "'"); 

                return $result->num_rows;
            }

            include 'include/footer.php';
            ?> 
```

# google-chrome - 铬异常

> ID：14296977
> 
> 赞同：1
> 
> 时间：2013-01-12T19:15:13.320
> 
> 标签：google-chrome, google-chrome-extension

我总是在 Chrome 中遇到这个异常，这似乎与谷歌词典扩展有关。有没有办法过滤掉它一直出现？或者也许这只是一个修复？

```
Error in event handler for 'undefined': INDEX_SIZE_ERR: DOM Exception 1 Error: Index or size was negative, or greater than the allowed value.
    at J (chrome-extension://mgijmajocgfcbeboacabfgobmjgjcoja/content_js_min.js:14:142)
    at null.<anonymous> (chrome-extension://mgijmajocgfcbeboacabfgobmjgjcoja/content_js_min.js:16:393)
    at chrome-extension://mgijmajocgfcbeboacabfgobmjgjcoja/content_js_min.js:1:182
    at miscellaneous_bindings:286:9
    at chrome.Event.dispatchToListener (event_bindings:387:21)
    at chrome.Event.dispatch_ (event_bindings:373:27)
    at chrome.Event.dispatch (event_bindings:393:17)
    at Object.chromeHidden.Port.dispatchOnMessage (miscellaneous_bindings:253:22) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T19:27:59.827

刚刚禁用了谷歌词典扩展。

# windows - 在 Windows 上使用 git 时出现警告和致命错误？

> ID：14296983
> 
> 赞同：3
> 
> 时间：2013-01-12T19:15:47.027
> 
> 标签：windows, git, access-denied

当我想获取当前状态或使用任何 git 命令时，我会看到这两行错误：

```
warning: unable to access 'C:/Program Files (x86)/Git': Permissio
fatal: cannot use C:/Program Files (x86)/Git as an exclude file 
```

哪里有问题 ？
提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-12T22:32:15.007

## 使用存在的排除文件

正如@iltempo 的评论所指出的 - 发生此错误是因为有一个引用来读取`C:/Program Files (x86)/Git`不是文件或不存在的文件。

[全局 git 忽略文件](https://help.github.com/articles/ignoring-files)是一个好主意——在创建一个之后（如果你还没有）——更新 git 正在使用的位置以便使用它：

```
git config --global core.excludesfile C:/Users/me/global.gitignore 
```

或者只是删除错误，删除引用：

```
git config --global --unset core.excludesfile 
```

# formatting - 计算引号和格式化源代码

> ID：14296985
> 
> 赞同：0
> 
> 时间：2013-01-12T19:15:54.670
> 
> 标签：formatting, lua, code-formatting, double-quotes

我正在为我的 Lua 代码做一些基本的格式化。就像在数学操作数周围添加缺失的空格等。

现在我意识到如果我在引号之间进行这些格式化是一个非常糟糕的主意（即，我不想更改代码中的字符串）。

解决这个问题的最优雅的方法是什么。到目前为止我的想法：

*   像我到目前为止所做的那样做一个正则表达式来找到我想要编辑的地方，然后从字符串的开头计算引号到这个地方。如果有奇数个引号，我在一个带引号的字符串中。
*   将行预拆分为引号内和引号外的部分，并且仅格式化外部部分。

我错过了一些明显的东西吗？更好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T02:03:25.050

您所描述的通常被称为“漂亮的打印机”。

由于 Lua 的[语法](http://www.lua.org/manual/5.2/manual.html#9)非常简单，因此最稳健的方法是为 Lua 语法实现一个解析器，它只以标准样式发出已解析的代码。您可以将其破解到现有的解析器 (lparser.c) 中，或使用lua-users wiki 上的现有[语法之一。](http://lua-users.org/wiki/LuaGrammar)语法似乎是 LL(1)，因此简单的递归下降解析器或 LPEG 将是不错的选择。

尝试*仅使用*正则表达式执行此操作几乎总是会导致比仅使用真正的解析器更多的工作，因为越来越多的特殊情况和上下文信息（例如，计算嵌套括号）潜入正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T19:54:47.753

我将采取的方法如下：

1.  将代码中的所有字符串替换为编号模式，例如`$1$`, `$2$`...`$3$`您当然会将每个整数索引的原始字符串保存在表格中。
2.  制作您想要的任何格式（但请确保不要修改模式）。
3.  `$%n+$`用原始字符串替换后面的模式。

# javascript - 如果一个属性具有特定值，则删除整个对象

> ID：14296986
> 
> 赞同：3
> 
> 时间：2013-01-12T19:16:00.903
> 
> 标签：javascript, arrays, object

我有一个看起来像这样但更大一点的对象数组：

```
var total =   [{ cost="6.00",  descrip="tuna"},{ cost="5.50",  descrip="cod"}]; 
```

**我需要一种从数组中删除特定完整对象的方法。**是否可以根据属性的值来识别对象的索引？如果是这样，拼接方法看起来可以工作。

```
total.splice(x,1); 
```

否则，也许我可以以某种方式使用以下内容？可以给数组中的对象命名并以某种方式与它一起使用：

```
delete total[]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T19:27:01.347

不太确定你的问题是什么。您首先必须找到要删除的项目：

```
function findItem(arr) {
  for(var i = 0; i < arr.length; ++i) {
    var obj = arr[i];
    if(obj.cost == '5.50') {
      return i;
    }
  }
  return -1;
} 
```

该`findItem(total)`函数将返回一个元素匹配`cost == '5.50'`条件的索引（当然你可以使用另一个）。现在你知道该怎么做了：

```
var i = findItem(total);
total.splice(i, 1); 
```

我假设数组中至少有一个对象与条件匹配。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T00:10:36.973

对于 ES5 兼容的浏览器，您可以使用`filter()`. 例如，删除所有成本 < 6 的项目：

```
total = total.filter(function(item) {
  return item.cost < 6.0; 
}); 
```

编辑：或者更简洁的 ES6 环境版本：

```
total = total.filter(item => item.cost < 6.0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T19:30:03.967

此函数使用 object.keyName === value 删除数组中的第一个对象

```
function deleteIfMatches(array, keyName, value) {
    for (i=0; i<array.length; i++) {
        if (array[i][keyName] === value) {
           return array.splice(i, 1);
        }
    }
    // returns un-modified array
    return array;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T00:04:20.523

除非您使用冒号而不是等号，否则您的对象不会被初始化 -

您可以过滤一个数组，返回的数组不包含任何值，但那些通过了一些测试。

这将返回花费一美元或更多的项目数组：

```
var total= [{
    cost:"6.00", descrip:"tuna"
},{
    cost:"5.50", descrip:"cod"
},{
    cost:".50", descrip:"bait"
}
].filter(function(itm){
return Number(itm.cost)>= 1;
}); 
```

/* 返回值：

```
[{
        cost:'6.00',
        descrip:'tuna'
    },{
        cost:'5.50',
        descrip:'cod'
    }
] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T19:29:59.990

我可能理解错了，但这不是很简单，为什么要拼接？

```
var i = 0,
  count = total.length;

// delete all objects with descrip of tuna
for(i; i < count; i++) {
  if (total[i].descrip == 'tuna') { 
      delete total[i]
  }
} 
```

# javascript - js中的信息检索哪个更快？对象与计算

> ID：14296988
> 
> 赞同：0
> 
> 时间：2013-01-12T19:16:28.383
> 
> 标签：javascript, jquery, performance, object

从对象或简单计算中检索信息哪个更快？它们之间有显着区别吗？

语境：

*   Web开发
*   使用 js 和/或 jQuery
*   一个页面上受影响的项目多达数百个

这是我将从中检索信息的对象示例：

```
var pModel = {
    1 : {sire: 3, dam: 4, herdList: settings.sireList},
    2 : {sire: 5, dam: 6, herdList: settings.damList},
    3 : {sire: 7, dam: 8, herdList: settings.sireList},
    4 : {sire: 9, dam: 10, herdList: settings.damList},
    5 : {sire: 11, dam: 12, herdList: settings.sireList},
    6 : {sire: 13, dam: 14, herdList: settings.damList}
}; 
```

编写代码后，我注意到数据中固有的数学模式：

```
// Where x is a number
pModel[x].sire == 2x+1;
pModel[x].dam == 2x+2;
(x%2=0) ? settings.damList : settings.sireList; 
```

使用数学有明显的未来证明优势，但速度是这里的主要考虑因素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T19:26:30.837

至少对于这么简单的数学，事实证明数学更快：

[http://jsperf.com/object-vs-calc](http://jsperf.com/object-vs-calc)

![在此处输入图像描述](../Images/f806995888a6ce1c67948989123c08c4.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T19:19:48.133

数学应该更快，如果你知道算法，你甚至不需要对象文字。对象文字在您甚至需要它之前就立即被解释，而数学只占用您需要的处理器/时间。

对于对象文字，查找所需的时间可能比数学计算更多，因为它依赖于数学计算+与遍历对象相关的额外开销。

跟着数学走。

# string - 在 Haskell 中将 Data.Text 转换为 Int

> ID：14296989
> 
> 赞同：31
> 
> 时间：2013-01-12T19:16:39.770
> 
> 标签：string, haskell, type-conversion

在[另一个问题](https://stackoverflow.com/q/7357775/96233)中，其中一条评论说，“`[Data.]Text`正在成为事实上的文本实现。`String`由于遗留原因和简单的事情仍然存在，但对于严重的文本操作，你应该使用`Text`。”

将 a 转换为 a 的最简单方法是`Data.Text`什么`Int`？`read`将不起作用，因为该`read`函数总是需要一个`String`.

我能想到的最好的是：

```
let fortyTwo = Data.Text.pack "42"
read $ Data.Text.unpack fortyTwo :: Int 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-12T19:22:02.993

查看[包`text`，](http://hackage.haskell.org/package/text)我看到一个名为[`Data.Text.Read`](http://hackage.haskell.org/packages/archive/text/0.11.2.3/doc/html/Data-Text-Read.html). 它似乎工作：

```
λ> decimal (T.pack "99 bottles")
Right (99," bottles")
λ> decimal (T.pack "a digit")
Left "input does not start with a digit" 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-12T19:21:19.630

换句话说，您需要一个可以使用的解析器`Text`。hackage上有很多可以消费Text的解析器，我建议你试试[attoparsec](http://hackage.haskell.org/packages/archive/attoparsec/0.10.3.0/doc/html/Data-Attoparsec-Text.html)。

```
import Data.Attoparsec.Text
parseInt = parseOnly (signed decimal) 
```

# c# - 从 C# 代码发布 html 表单

> ID：14296991
> 
> 赞同：1
> 
> 时间：2013-01-12T19:16:47.727
> 
> 标签：c#, asp.net, httpwebrequest

所以我想完全从代码发布到同一域内的表单。我想我拥有我需要的一切，除了如何包含表单数据。我需要包含的值来自隐藏字段和输入字段，我们称之为：

```
<input type="text" name="login" id="login"/>
<input type="password" name="p" id="p"/>
<input type = hidden name="a" id="a"/> 
```

到目前为止我所拥有的是

```
WebRequest req = WebRequest.Create("http://www.blah.com/form.aspx")
req.ContentType = "application/x-www-form-urlencoded"
req.Method = "POST" 
```

如何在请求中包含这三个输入字段的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T19:21:29.180

```
NameValueCollection nv = new NameValueCollection();
nv.Add("login", "xxx");
nv.Add("p", "yyy");
nv.Add("a", "zzz");

WebClient wc = new WebClient();
byte[] ret = wc.UploadValues(""http://www.blah.com/form.aspx", nv); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T02:10:14.200

如上面我的评论中提供的链接所示，如果您使用的是 WebRequest 而不是 WebClient，则可能要做的事情是建立一个由 & 分隔的键值对字符串，并将值 url 编码：

```
 foreach(KeyValuePair<string, string> pair in items)
  {      
    StringBuilder postData = new StringBuilder();
    if (postData .Length!=0)
    {
       postData .Append("&");
    }
    postData .Append(pair.Key);
    postData .Append("=");
    postData .Append(System.Web.HttpUtility.UrlEncode(pair.Value));
  } 
```

当您发送请求时，使用此字符串设置 ContentLength 并将其发送到 RequestStream：

```
request.ContentLength = postData.Length;
using(Stream writeStream = request.GetRequestStream())
{
    UTF8Encoding encoding = new UTF8Encoding();
    byte[] bytes = encoding.GetBytes(postData);
    writeStream.Write(bytes, 0, bytes.Length);
} 
```

您可能能够根据您的需要提取功能，因此不需要将其拆分为这么多方法。

# windows-8 - WinRT如何检查StorageFolder中是否存在文件

> ID：14296994
> 
> 赞同：3
> 
> 时间：2013-01-12T19:17:22.873
> 
> 标签：windows-8, windows-runtime

> **可能重复：**
> [在 WinRT 中检查项目中是否存在文件](https://stackoverflow.com/questions/12121572/check-if-a-file-exists-in-the-project-in-winrt)

我正在使用 StorageFolder 并且需要在读取文件之前检查文件是否存在以避免异常。

我的代码如下所示：

```
StorageFolder storageFolder = ApplicationData.Current.LocalFolder;
StorageFile sampleFile = await storageFolder.GetFileAsync(myPath); 
```

问题是，我找不到检查文件是否存在的方法

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-12T20:10:32.530

上次我检查你必须捕获一个异常：（可能已经改变）

编辑：这是**一种**方法:)

像这样：

```
 static async Task<bool> DoesFileExistAsync(string fileName)
    {
        try
        {
            await ApplicationData.Current.LocalFolder.GetFileAsync(fileName);
            return true;
        }
        catch
        {
            return false;
        }
    } 
```

# amazon-web-services - 状态码 403：我使用 Amazon SES 时的 SignatureDoesNotMatch

> ID：14296999
> 
> 赞同：16
> 
> 时间：2013-01-12T19:18:05.397
> 
> 标签：amazon-web-services, amazon-ses

我创建了一个新的亚马逊帐户。创建 SMTP 凭证并使用 AWS Java SDK 发送电子邮件。但它失败并出现以下错误：

> 状态代码：403，AWS 服务：AmazonSimpleEmailService，AWS 请求 ID：xyz，AWS 错误代码：SignatureDoesNotMatch，AWS 错误消息：我们计算的请求签名与您提供的签名不匹配。检查您的 AWS 秘密访问密钥和签名方法。有关详细信息，请参阅服务文档。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-12T19:18:05.397

为发送电子邮件而提供的密钥不是“SMTP 凭据”。这些密钥是全局访问密钥，可以检索[http://docs.amazonwebservices.com/ses/latest/GettingStartedGuide/GetAccessIDs.html](http://docs.amazonwebservices.com/ses/latest/GettingStartedGuide/GetAccessIDs.html)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-06-26T14:42:57.463

SMTP 凭证不适用于 SES API (AWS Java SDK)。SMTP 凭证实际上与为 IAM 用户手动创建的凭证不同，即使这种不同在 AWS 控制台的任何地方都不可见。看看这里看看差异：[http ://docs.aws.amazon.com/ses/latest/DeveloperGuide/using-credentials.html](http://docs.aws.amazon.com/ses/latest/DeveloperGuide/using-credentials.html)

您实际上不需要创建全局访问凭证（这可能是安全漏洞），但您应该使用以下安全策略创建一个新的 IAM 用户，并为该用户创建新的凭证。

```
{
"Version": "2012-10-17",
"Statement":[{
   "Effect":"Allow",
   "Action":["ses:SendEmail", "ses:SendRawEmail"],
   "Resource":"*"
   }
]
} 
```

PS：也许，您可以向已为 SES 创建的 SMTP IAM 用户添加新凭证，但我尚未对此进行测试。