# StackOverflow 问答 13888000-13888999

# javascript - 嵌入 ActiveX 对象与 tag or creating one with new ActiveXObject() I've noticed that there are 2 ways we can create ActiveX object in JavaScript, one is by embedding: and then later on obtain object using DOM: var myControl = document.getElementById('TestControl'); Another way is to create instance of ActiveXObject: var myControl2 = new ActiveXObject('Test.TestControl'); What exactly is different from ActiveX object perspective? Is one approach better then the other? Are there any differences in performance? Thanks. java, calling a method after a modifiable delay I'd like to ask you about the best solution/idea how to solve a following situation. I'm developing an Android app which on one of screens has a set of buttons. After clicking on any of them a kind of config is posted to the server over http. To prevent multiple clicks one by one which could result in concurrency problems I decided that after each click on a particular button there'll be a waiting interval of 30 seconds before a config is sent to the server. If another click on the same button happens before this 30 seconds are exceeded, then the execution of method is delayed for another 30 seconds - as long as no new click is performed, then the config will be sent. I need an idea of an algorithm which would implement the mechanism above. What I know is that I don't want to start a separate thread for each click (too heavy for my app). A potential idea is to make a queue of events and send them in a loop but idea of a running endless loop in a thread (or Handler) also isn't my favourite. Maybe there's a kind of mechanism in Android or J2SE in general, that allows to schedule an execution of method to a given time in the future but still be able to postopone execution for some additional time before 30sec rolled out. thanks in advance! javascriptinternet-exploreractivexactivexobject 4 1 回答 1 This answer is useful 5 两者几乎是等价的。 符号是官方 HTML ；var myControl2 = new ActiveXObject('Test.TestControl');只能在 JScript 或 ASP 等脚本语言中使用；它不能直接用于 HTML。 此外：“对象”符号采用类 ID：您所需要的只是安装在系统上（或可通过 Internet 安装）的 ActiveX 对象。您提供的 Javascript 示例有一个 PROGID ...它要求 1) ActiveX 对象已经安装，并且 2) ActiveX 对象必须有一个 PROGID（ActiveX 是可选的，不是必需的）。 于 2012-12-15T00:14:56.717 回答 Related 4 matlab - matlab运算符“|”是什么意思 意思是？ 1 web2py - 如何在 web2py 中自定义个人资料页面 1 visual-studio-2012 - Visual Studio 的“打开上次关闭的文档”快捷方式？ 2 ios - 使用 ReactiveCocoa 每小时执行一次操作 1 r - R中列表的变量引用元素 4 c# - C#和反射的使用 3 arrays - BASH：如何在循环中创建动态数组名称 1 vim - Vim 和 NERDTree - 重新映射 Enter 功能 1 python - 更改 JSON 序列化外键的字符串表示 1 c++ - C++ smart pointers polymophism Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13888011
> 
> 赞同：4
> 
> 时间：
> 
> 标签：javascript, internet-explorer, activex, activexobject

I've noticed that there are 2 ways we can create ActiveX object in JavaScript, one is by embedding:

```
<object id="TestControl" classid="clsid:xxx-xx-xx-xx"></object> 
```

and then later on obtain object using DOM:

```
var myControl = document.getElementById('TestControl'); 
```

Another way is to create instance of ActiveXObject:

```
var myControl2 = new ActiveXObject('Test.TestControl'); 
```

What exactly is different from ActiveX object perspective? Is one approach better then the other? Are there any differences in performance?

Thanks.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T00:14:56.717

两者几乎是等价的。

`<object>`符号是官方 HTML ；`var myControl2 = new ActiveXObject('Test.TestControl');`只能在 JScript 或 ASP 等脚本语言中使用；它不能直接用于 HTML。

此外：“对象”符号采用类 ID：您所需要的只是安装在系统上（或可通过 Internet 安装）的 ActiveX 对象。您提供的 Javascript 示例有一个 PROGID ...它要求 1) ActiveX 对象已经安装，并且 2) ActiveX 对象必须有一个 PROGID（ActiveX 是可选的，不是必需的）。

# drawing - illustrator 中的俯视图

> ID：13888013
> 
> 赞同：0
> 
> 时间：2012-12-15T00:10:39.380
> 
> 标签：drawing, adobe, adobe-illustrator

我想创建一个城市的顶视图。例如，与这些图像类似的东西：

[http://image.shutterstock.com/display_pic_with_logo/73497/73497,1329086967,2/stock-photo-city-top-view-95061103.jpg](http://image.shutterstock.com/display_pic_with_logo/73497/73497,1329086967,2/stock-photo-city-top-view-95061103.jpg)
[http://www.bigcitypix.com/image/big-city-pictures -标志齿轮头城市建筑物交叉街道空中屋顶屋顶高角度头顶视图电影视频拍摄图形媒体公司品牌形象 700x460.gif](http://www.bigcitypix.com/image/big-city-pictures-logo-gearhead-city-buildings-cross-streets-aerial-rooftops-roof-top-high-angle-overhead-view-film-video-shoot-graphic-media-company-brand-image-700x460.gif)

我在 Adob​​e Illustrator 工作。请问，我怎样才能做顶视图的建筑？我可以在透视图中制作建筑物然后旋转到顶视图吗？或者怎么做？拜托，如果你知道一个很好的教程描述它，你能把链接发给我吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-14T07:33:17.960

对于第一张图片，我会使用 3ds Max/sketchup 之类的 3d 程序来获得该效果。

对于第二张图片，

您可以使用： - 绘制一些正方形 - 转到顶部菜单中的“效果”，“3D” - “挤出和斜角”

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T02:26:38.830

请检查是否只打开第一张图片。

这样做太容易了。只需在 illustrator 中点击“M”并开始制作正方形和矩形。

干杯!

# c - 使用ProjectEuler学习C，可能是一个简单的错误

> ID：13888016
> 
> 赞同：1
> 
> 时间：2012-12-15T00:10:55.913
> 
> 标签：c

这给出了 200003 的金额

```
#include <stdio.h>
int main(void){
int i = 0;
int x = 0, x15 = 0;
     for (i=0; i<1000; i++){
            if (i%3==0 || i%5==0){
                    x += i;
            }
            if (i%15==0){
                    x15 += i;
            }
    }
printf("%d'\n", x-x15);
return 0;
} 
```

这给出了金额 233168

```
#include <stdio.h>
int main(void){
int i = 0;
int x3 = 0, x5 = 0, x15 = 0;

    for (i=0; i<1000; i++){

            if (i%3==0){
                    x3 += i;
            }
            if(i%5==0){
                    x5 += i;
            }
            if (i%15==0){
                    x15 += i;
            }
    }
printf("%d\n", x3+x5-x15);
return 0;
} 
```

谁能解释两者之间有什么不同？我希望两者提供相同的输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T00:14:00.010

15 的倍数将被添加到底部代码中的 x3 和 x5 中，因此它们被计算两次。在顶级版本中，每个只计算一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T00:12:06.717

数字可以是 3 和 5 的倍数，例如 15

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T00:15:25.237

经过一番简化，这两个代码的区别是：

```
 if (i%3==0 || i%5==0){
                x += i;
        } 
```

和

```
 if (i%3==0){
                x += i;
        }
        if(i%5==0){
                x += i;
        } 
```

显然，他们不会做同样的事情。15 的乘法在第一个代码中计算一次，在第二个代码中计算两次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T00:16:13.470

```
 if (i%3==0 || i%5==0){
            x += i;
    } 
```

相当于

```
 if (i%3==0){
            x += i;
    }
    else if(i%5==0){
            x += i;
    } 
```

不

```
 if (i%3==0){
            x += i;
    }
    if(i%5==0){
            x += i;
    } 
```

# java - java，在可修改的延迟后调用方法

> ID：13888017
> 
> 赞同：0
> 
> 时间：2012-12-15T00:11:07.370
> 
> 标签：java, android, methods, execution, schedule

我想向您询问如何解决以下情况的最佳解决方案/想法。我正在开发一个 Android 应用程序，它在一个屏幕上有一组按钮。单击其中任何一个后，一种配置将通过 http 发布到服务器。为了防止多次单击可能导致并发问题，我决定每次单击特定按钮后，在将配置发送到服务器之前会有 30 秒的等待间隔。如果在超过 30 秒之前再次单击同一按钮，则方法的执行将再延迟 30 秒 - 只要没有执行新的单击，就会发送配置。

我需要一个可以实现上述机制的算法的想法。我所知道的是，我不想为每次点击启动一个单独的线程（对我的应用程序来说太重了）。一个潜在的想法是创建一个事件队列并在循环中发送它们，但在线程（或处理程序）中运行无限循环的想法也不是我最喜欢的。

也许在一般的 Android 或 J2SE 中有一种机制，它允许将方法的执行安排到未来的给定时间，*但*仍然能够在 30 秒推出之前将执行推迟一段时间。

提前致谢！

# php - PHP 问题 - 函数输出为 000

> ID：13888019
> 
> 赞同：1
> 
> 时间：2012-12-15T00:11:30.493
> 
> 标签：php, yahoo-messenger

我一直在尝试制作一个记录 Yahoo! 的 CLI 应用程序。某些使用第三方的用户的信使登录日期/时间，但这并没有真正到达任何地方。尽管单独使用时检查 iself 有效，但在使用 while 和 foreach 时似乎也不起作用。checkAvailability 输出“000”。任何人都可以解决这个问题并优化它吗？

```
<?php
error_reporting(E_ALL);
$users[0] = "|59|62|157|85|218|78|135|43|63|145|151|173|157|93|107|90|84|129|140|110|55|28|210|212|80|128|252|127|15|192|223|154|177|39|129|191|62|17|113|236|2|168&t=0.23704720849047";
$users[1] = "|70|255|229|124|194|244|242|223|73|250|184|237|222|251|8|243|104|4|70|125|205|177|229|255|178|244|123|251|13|157|220|47|88|247|15|0&t=0.04614829820959876";

function checkAvailability($user){
    $dataGot = file_get_contents("http://www.imvisible.ro/getstatus.php?id=".$user);
    $fullText = explode("|", $dataGot);
    $status_coded = $fullText[0];
    echo $status_coded;
    return $status_coded;
}

while(true) {
    foreach($users as $user) {
        $user['oldstatus'] = $user['status'];

        if (checkAvailability($user) == "1" and $user['oldstatus'] != "online") {
            $user['status'] = "online";
            echo "online";
        } elseif (checkAvailability($user) == "3" and $user['oldstatus'] != "invisible") {
            $user['status'] = "invisible";
            echo "invisible";
        } elseif (checkAvailability($user) == "2" and $user['oldstatus'] != "offline") {
            $user['status'] = "offline";
            echo "offline";
        } else {
            $user['status'] = "error";
            echo "error";
        }
        if ($user['status'] != $user['oldstatus']) {
            echo $user." a fost detectat ca ".$user['status']." la ".date(DATE_RFC822).".\n";
        }
    }
    sleep(60);
    sleep(60);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T01:43:53.217

在 PHP 中无休止地运行 CLI 应用程序并不是最佳解决方案。当您制作一个 cronjob 并每隔一分钟或每隔几分钟运行一次脚本时会更好。然后您可以将状态或您需要的内容存储在数据库或文件中。

我查看了您的脚本并测试了脚本：

```
<?php
error_reporting(E_ALL);
$users[0] = "|59|62|157|85|218|78|135|43|63|145|151|173|157|93|107|90|84|129|140|110|55|28|210|212|80|128|252|127|15|192|223|154|177|39|129|191|62|17|113|236|2|168&t=0.23704720849047";
$users[1] = "|70|255|229|124|194|244|242|223|73|250|184|237|222|251|8|243|104|4|70|125|205|177|229|255|178|244|123|251|13|157|220|47|88|247|15|0&t=0.04614829820959876";

function checkAvailability($user){
    $dataGot = file_get_contents("http://www.imvisible.ro/getstatus.php?id=".$user);
    $fullText = explode("|", $dataGot);
    $status_coded = $fullText[0];
    return $status_coded;
}

while(true) {
    foreach($users as $key => $user) {
        $userStatus[$key] = checkAvailability($user);     

        if(!isset($userStatusRet[$key]['oldstatus'])) {
            $userStatusRet[$key]['oldstatus'] = '';
        }

        if(!isset($userStatusRet[$key]['status'])) {
            $userStatusRet[$key]['status'] = '';
        }

        $userStatusRet[$key]['oldstatus'] = $userStatusRet[$key]['status'];

        if ($userStatus[$key] == "1" and $userStatusRet[$key]['oldstatus'] != "online") {
            $userStatusRet['status'] = "online";
            echo "User ".$key.": online\n";
        } elseif ($userStatus[$key] == "3" and $userStatusRet[$key]['oldstatus'] != "invisible") {
            $userStats['status'] = "invisible";
           echo "User ".$key.": invisible\n";
        } elseif ($userStatus[$key] == "2" and $userStatusRet[$key]['oldstatus'] != "offline") {
            $userStatusRet[$key]['status'] = "offline";
            echo "User ".$key.": offline\n";
        } else {
            $userStatusRet[$key]['status'] = "error";
            echo "User ".$key.": error\n";
        }
    }
    sleep(5);
} 
```

它不是最好的解决方案，但您的问题是，您无法在`$user`输出中写入。我在这里创建了一个以用户 ID 作为迭代器的新变量。运行脚本时，您可以看到输出：

```
User 0: online
User 1: offline
User 0: online
User 1: error
User 0: online
User 1: offline 
```

# sql - 表中 5 个最新行的聚合函数 (SUM)

> ID：13888020
> 
> 赞同：1
> 
> 时间：2012-12-15T00:11:31.003
> 
> 标签：sql

这是一个令人费解的 SQL 问题（至少对我而言），涉及`GROUP BY`和 AGGREGATES... 希望得到任何帮助。

我在一个记录有关自行车骑行和骑手信息的网站上工作。我们有一个表格，其中包含乘客 ID、骑行日期和骑行距离。我想显示一张表格，其中包含最新的游乐设施和距离，以及每个骑手的总距离。这是我的 sql 和输出（`id`骑手 id 在哪里）：

```
+--------+----------+----------+
| 编号 | 过时 | 距离 |
+--------+----------+----------+
| 101240 | 2012-11-30 00:00:00 | 250 |
| 101332 | 2012-11-22 00:00:00 | 31 |
| 101313 | 2012-11-21 00:00:00 | 15 |
| 101319 | 2012-11-21 00:00:00 | 25 |
| 101320 | 2012-11-21 00:00:00 | 56 |
+--------+----------+----------+

```

这很容易得到：

```
SELECT id, dated, distance FROM rides ORDER BY dated LIMIT 5 
```

我似乎无法弄清楚的是，这些最近的游乐设施的车手累计总数......基本上：

```
SELECT sum(distance) FROM rides GROUP BY id 
```

是否有可能在 SQL 中处理所有这些而无需进行编程？我试过做一些子查询和加入，但还没有成功！

在此先感谢 SO 社区。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T01:32:32.550

呃，我应该更好地了解我的数据模式。我一直在尝试使用错误的 id 列，它实际上是一个序列化的行 id，而不是车手 id。SQL 的工作版本（在 MYSQL 上）是：

```
SELECT r.rider, rr.dated, rr.distance, i.firstname, i.lastname, sum(r.distance) 
FROM rides r
INNER JOIN (SELECT rider, distance, dated FROM rides ORDER BY dated DESC LIMIT 5) rr ON r.rider = rr.rider 
INNER JOIN riders i ON r.rider = i.id 
GROUP BY r.rider ORDER BY rr.dated DESC; 
```

这将返回：

```
+--------+----------+----------+-------- ---+----------+------------------+
| 骑手 | 过时 | 距离 | 名字 | 姓氏 | 总和（r.距离）|
+--------+----------+----------+-------- ---+----------+------------------+
| 3304 | 2012-11-30 00:00:00 | 250 | 文卡特什 | 不锈钢 | 250 |
| 第647章 2012-11-22 00:00:00 | 31 | 拉尔夫 | 苏尔兹尔 | 22726 |
| 2822 | 2012-11-21 00:00:00 | 15 | 亨贝托 | 卡尔德隆| 10421 |
| 第2339章 2012-11-21 00:00:00 | 25 | 朱迪 | 拉特 | 8545 |
| 第1452章 2012-11-21 00:00:00 | 56 | 弗雷德 | 斯蒂尔利 | 64366 |
+--------+----------+----------+-------- ---+----------+------------------+

```

感谢您的回答！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T00:31:00.377

像这样的东西会起作用吗？顺便说一句，使用的是什么 sql server？

```
SELECT sum(distance) 
FROM (SELECT distance FROM rides ORDER BY dated DESC LIMIT 5) 
```

# python - 如何连接 PyUSB 和 OV534 传感器

> ID：13888024
> 
> 赞同：2
> 
> 时间：2012-12-15T00:11:57.613
> 
> 标签：python, usb

我的主要目标是能够通过我计算机上的 USB 与 Hercules Dualpix Exchange 网络摄像头对话，以便更好地了解协议及其需求。我做了一些研究，发现这个特定的网络摄像头使用了 OV534 图像处理器，它有自己的 USB 协议。似乎 OV534 使用了 USB 视频类/USB 音频类，这让我觉得这将很容易接口。但实际上恰恰相反...

我已经能够通过 USB 连接到设备并传输一些数据（我可以请求配置），但几乎没有其他任何工作。我现在的目标是打开内部 LED，但即使这样也行不通。我一直在尝试模仿 OV534 模块在 UVC 中的工作方式，但是我的读/写都没有做任何事情（除了超时和没有足够的 bmAttributes）。

有人对我的问题有任何见解吗？我可能没有正确使用 PyUSB，但我一直在尝试以与在此代码中完全相同的方式设置寄存器。我的读/写功能是

```
def reg_read(dev, reg):
    requestType=(0x01) | (usb.util.CTRL_IN) | (usb.util.CTRL_TYPE_STANDARD)#(0x80)|(0x02 << 5)|(0x01)
    request=0x1
    value=0x0
    index=reg
    byt=20
    timeout=2000

    #ret = dev.ctrl_transfer(requestType, request, value, index, byt, timeout)
    ret = dev.ctrl_transfer(requestType, request, value, index, byt, timeout)
    return ret

def reg_write(dev, reg, data):
    requestType=(0x01) | (usb.util.CTRL_OUT) | (usb.util.CTRL_TYPE_STANDARD) #(0x80)|(0x02 << 5)|(0x01)
    request=0x1
    value=0x0
    index=reg
    dat=data
    timeout=2000

    #ret = dev.ctrl_transfer(requestType, request, value, index, dat, timeout)
    ret = dev.ctrl_transfer(requestType, request, value, index, dat, timeout)
    return ret 
```

作为参考，这是 OV534.c 代码 (http://git.linuxtv.org/pinchartl/uvcvideo.git/blob/fbb4c6d20f29f2b10daad31cc6238d91f93d70d4:/drivers/media/video/gspca/ov534.c)

# asp.net - 使用 Active Directory 填充 Request.Credentials 以访问 Web 服务

> ID：13888025
> 
> 赞同：0
> 
> 时间：2012-12-15T00:12:03.707
> 
> 标签：asp.net, vb.net, web-services, active-directory

有没有办法检测用户的 AD 凭据并使用它们来创建可用于查询 Web 服务的 NetworkCredential 对象？下面是我的代码摘录，基本上我是通过 web 服务查询 GIS 数据库，并且 web 服务需要 Windows AD 身份验证。

目前这是一个手动过程，所以我们只是将我们自己的 AD 凭据硬编码到顶部的变量中，它工作正常，但我希望页面检测某人的 AD 凭据并使用它们来创建 NetworkCredential 对象，这样我们就可以拥有我们的内部客户也使用该页面。

```
Public Function getJSON(ByVal url As String) As String

    Dim HTMLSource As String = ""
    Dim Request As WebRequest = WebRequest.Create(url)
    Request.Credentials = New NetworkCredential(username, password, domain)
    Dim Response As WebResponse = Request.GetResponse
    Dim SR As StreamReader
    SR = New StreamReader(Response.GetResponseStream)
    HTMLSource = SR.ReadToEnd
    SR.Close()
    Return HTMLSource
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T21:44:30.277

让用户将他的 Kerberos 凭证委托给您的服务器/服务，在身份验证期间提取该凭证，模拟并代表用户执行您的请求。

# java - Java 时钟在 Swing 中不算数

> ID：13888026
> 
> 赞同：0
> 
> 时间：2012-12-15T00:12:04.657
> 
> 标签：java, swing, timer, stopwatch

我正在尝试使用 swing 制作秒表，但它不起作用。这是我的代码。Jlabel 时钟始终显示 -1，只有在它停止时才会发生。我是否正确使用了调用程序？

```
import javax.swing.*;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class sidePanel extends JApplet implements ActionListener{
    JPanel pane;
    JLabel clock;
    JButton toggle;

    Timer timer;
    StopWatch stopWatch;

    public void init()
    {
        pane = new JPanel();
        pane.setLayout(new BoxLayout(pane, BoxLayout.Y_AXIS));

        clock = new JLabel("00:00");

        toggle = new JButton("Start/Stop");
        toggle.addActionListener(this);

        pane.add(clock);
        pane.add(toggle);

        timer = new Timer(500, this);
        timer.setRepeats(true);

        stopWatch = new StopWatch();

        add(pane);

    }

    @Override
    public void actionPerformed(ActionEvent e) {
        if(e.getSource() == toggle)
        {

            if(timer.isRunning())
            {
                stopWatch.endTime = System.currentTimeMillis();
                timer.stop();
            }
            else
            {
                stopWatch.startTime = System.currentTimeMillis();
                timer.start();
            }
        }

        if(e.getSource() == timer)
        {
            long time = stopWatch.getElapsedTime();
            sidePanel.this.clock.setText(String.valueOf(time));
        }
    }

    private class StopWatch{

        private long startTime =0;
        private long endTime =0;
        public boolean isRunning = false;

        public void start(){
            startTime = System.currentTimeMillis();
            isRunning = true;
        }

        public void end(){
            endTime = System.currentTimeMillis();
            isRunning = false;
        }

        public long getElapsedTime()
        {
            long currentTime = System.currentTimeMillis();
            if(isRunning)
                return (currentTime - startTime)/1000;
            else
                return -1;
        }

    }

} 
```

**工作代码**

```
import javax.swing.*;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class sidePanel extends JApplet implements ActionListener{
    JPanel pane;
    JLabel clock;
    JButton toggle;

    Timer timer;
    //StopWatch stopWatch;

    boolean pressed = false;

    long startTime =0;
    long endTime =0;

    public void init()
    {
        pane = new JPanel();
        pane.setLayout(new BoxLayout(pane, BoxLayout.Y_AXIS));

        clock = new JLabel("00:00");

        toggle = new JButton("Start/Stop");
        toggle.addActionListener(this);

        pane.add(clock);
        pane.add(toggle);

        timer = new Timer(500, this);
        timer.setRepeats(true);

        //stopWatch = new StopWatch();

        add(pane);

    }

    long cur;
    long end;
    @Override
    public void actionPerformed(ActionEvent e) {
        if(e.getSource() == toggle)
        {

            if(!pressed)
            {
                timer.start();
                startTime = System.currentTimeMillis();
                pressed = true;
            }
            else
            {
                timer.stop();

                pressed = false;
            }
        }

            if(timer.isRunning())
            {
                endTime = System.currentTimeMillis();
                clock.setText(String.valueOf((endTime-startTime)/1000));

            }

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T00:23:27.820

您的`StopWatch`课程运行一次然后终止...

```
public void run() {
    // Start here
    SwingUtilities.invokeLater(new Runnable()
    {
        @Override
        public void run() {
            long time = getElapsedTime();
            sidePanel.this.clock.setText(String.valueOf(time));
        }
    });
    // End here...
} 
```

线程将在它的`run`方法存在时终止，在这种情况下，您`StopWatch`的`run`方法。

你需要做的是保持一个循环，直到`isRunning`变成`false`

```
public void run() {
    while (isRunning) {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run() {
                long time = getElapsedTime();
                sidePanel.this.clock.setText(String.valueOf(time));
            }
        });
        // Because we really don't want to bombboard the Event dispatching thread
        // With lots of updates, which probably won't get rendered any way,
        // We put in a small delay...

        // This day represents "about" a second accuracy...
        try {
            Thread.sleep(500);
        } catch (Exception exp) {
        }
    }
} 
```

虽然使用起来会简单得多`javax.swing.Timer`......

```
private Timer timer;
public void init()
{
    pane = new JPanel();
    pane.setLayout(new BoxLayout(pane, BoxLayout.Y_AXIS));

    clock = new JLabel("00:00");

    toggle = new JButton("Start/Stop");
    toggle.addActionListener(this);

    pane.add(clock);
    pane.add(toggle);

    timer = new Timer(500, new ActionListener() { 
        public void actionPerformed(ActionEvent evt) {
            long time = getElapsedTime();
            sidePanel.this.clock.setText(String.valueOf(time));        
        }
    });
    timer.setRepeats(true);
    add(pane);

}

@Override
public void actionPerformed(ActionEvent e) {
    if(e.getSource() == toggle)
    {
        if(timer.isRunning())
        {
            endTime = System.currentTimeMillis();
            timer.stop();
        }
        else
        {
            startTime = System.currentTimeMillis();
            timer.start();
        }
    }
} 
```

然后，您可以从您身上剥离功能`StopWatch`（即`getElapsedTime()`）

# jquery - 为最后选择的锚标记设置颜色 - jQuery、HTML

> ID：13888036
> 
> 赞同：0
> 
> 时间：2012-12-15T00:13:47.190
> 
> 标签：jquery, html

*问题已被改写。*

# 一个例子：

这是一个示例 HTML 页面：http: [//jsfiddle.net/mwMzD/2/](http://jsfiddle.net/mwMzD/2/)

# 问题：

选择`Third Page`链接并呈现页面后，所选内容`anchor tag`仍应保持颜色***"white"***，而不是恢复为***"grey"*** `(a:visited)`。

***注意：**请记住， a:visited 适用于每个访问过`anchor tag`的 ，而不仅仅是最后一个 selected `anchor tag`。*

jQuery 需要哪些`methods`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T00:23:07.093

`Third Page`呈现该页面时，您需要将 CSS 类应用于链接。

```
<%= link_to "Third Page", route_to_third_page_path, class: "active" if current_page?(route_to_third_page_path) %> 
```

然后，您将此类添加`.active`到您的`a:active`选择器

```
a:link { color: grey; }
a:visited { color: grey; }
a:hover { color: white; }
a:active, a.active { color: white; } 
```

现在，当`Third Page`渲染时，`.active`该类将应用于链接，使其具有与`a:active`.

* * *

**编辑** *现在您已经完全重写了您的问题*

请参阅：http: [//jsfiddle.net/h67Ec/](http://jsfiddle.net/h67Ec/)

这是 jQuery

```
$(function(){
    $('a').click(function(){
      $('a').removeClass('active');
      $(this).addClass('active')
    });        
});​ 
```

并且我原始答案的样式*（见上文）*仍然适用。

# windows-installer - 同时安装 x86 和 x64 VC++ 10 运行时？

> ID：13888038
> 
> 赞同：1
> 
> 时间：2012-12-15T00:13:52.220
> 
> 标签：windows-installer, installshield, visual-c++-2010

我有一个基本 MSI 项目，其先决条件刚刚从 VC++ 8 更改为 VC++ 10 SP1。它是一个 32 位安装程序，可安装带有几个 64 位组件的 32 位程序。（它使用 LSP 进行 Internet 监控，因此它需要 32 位和 64 位 LSP，以便可以监控两种应用程序。）因此，需要 32 位和 64 位 VC++ 运行时在 64 位系统上。

使用 VC++ 8 合并模块，这不是问题，因为 WinSxs（并排）文件夹。现在，MS 已经放弃了这一点，并重新将所有运行时都放在 C:\Windows\System32 中，安装两个 VC++ 10 运行时作为先决条件不起作用，因为它们会相互覆盖。（大概是因为 64 位运行时合并模块被重定向到 SysWow64，即使它不应该这样做。）

有没有办法安装这两个运行时？我不介意使用独立的 vcredist_x64 安装程序而不是 x64 合并模块，但是当我尝试启动时，出现“另一个安装过程正在运行”错误。也许可以暂时禁用重定向？

我还考虑了文件夹内运行时安装，DLL 与您的应用程序位于同一个文件夹中，但由于 LSP 必须位于系统文件夹中，因此我对在其中放置另一组运行时感到紧张。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T09:03:34.797

您不能一次运行 2 个 MSI（您的 MSI 和 vc_redist_x64），这就是您收到错误的原因。而且您不能在一次安装中使用 x86 和 x64 合并模块，因为您的主要 MSI 是 x86。
我建议您使用引导的 SETUP.EXE 和先决条件。您将 vc_redist_x64 作为先决条件包含在 InstallShield 中。它会在您的 MSI 之前安装所有需要的 VC Redists。

# javascript - apprequests 不适用于外部网站

> ID：13888053
> 
> 赞同：1
> 
> 时间：2012-12-15T00:15:21.860
> 
> 标签：javascript, facebook, api, apprequests

我正在开发一个使用 facebook api 的网站。我可以检索我的朋友，张贴到我的墙上，查看我的照片，一切都很好。但由于某种原因，当我尝试在多朋友选择器上向我选择的朋友发送应用请求时。邀请不起作用，它发送请求，但请求被破坏。

我的 Facebook 应用程序设置了“带有 Facebook 登录的网站”、“Facebook 上的应用程序”和“页面选项卡”。我的javascript是..

```
function multiFriendSelector(){
    FB.ui({
        method: 'apprequests', 
        message: 'You should learn more about this awesome site.'
    }, requestCallback);

}

function requestCallback(response) {
    console.log(response);
    if (response != null && response.request_ids && response.request_ids.length >0) {
        for(var i = 0; i < response.request_ids.length; i++) {
            console.log("Invited: " + response.request_ids[i]);
        }
    } else {
        console.log('No invitations sent');
    }
} 
```

我的控制台输出总是向我显示未发送任何邀请。

我不知道这是否有我遗漏的东西。你们中的任何人已经面临过这个问题吗？

谢谢

# mysql - 数据定义语言中的 MySQL 错误

> ID：13888056
> 
> 赞同：0
> 
> 时间：2012-12-15T00:15:28.380
> 
> 标签：mysql

> **可能重复：**
> [MySQL 忽略 NOT NULL 约束](https://stackoverflow.com/questions/2503712/mysql-ignores-the-not-null-constraint)

我将一列设置为不为空，但是在插入新行并将此字段值设置为空时，mysql会插入行我如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T00:54:57.183

您是否在数据库字段中插入了值，例如

```
insert into table
values(''); 
```

或者

```
 insert into table 
values(null); 
```

两者都将在数据库中插入一行，但该字段将具有空值。NULL 是一个关键字，表示字段值为空。如果您希望字段值为空，那么实际上这不是空的。你必须这样做

插入表值（''）；// ' ' 之间有一个空格键，所以不为空

# c++ - C++ 目标用简单语法 Tg 抛出错误

> ID：13888057
> 
> 赞同：6
> 
> 时间：2012-12-15T00:15:49.293
> 
> 标签：c++, antlr

我正在尝试使用简单的语法 Tg 以 Cpp 为目标，并使用树语法输出到 AST。

找不到源代码中不存在的 AST.stg。3.4 和 3.5 rc1 的错误相同。

谢谢你的帮助。

```
java -jar ../../../antlr-3.5-rc-1-complete.jar T.g TWalker.g

error(10):  internal error: T.g : java.lang.IllegalArgumentException: No such group file:   
    org/antlr/codegen/templates/Cpp/AST.stg
org.stringtemplate.v4.STGroupFile.<init>(STGroupFile.java:69)
org.stringtemplate.v4.STGroupFile.<init>(STGroupFile.java:48)
org.antlr.codegen.CodeGenerator.loadTemplates(CodeGenerator.java:222)
org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:283)
org.antlr.Tool.generateRecognizer(Tool.java:661)
org.antlr.Tool.process(Tool.java:474)
org.antlr.Tool.main(Tool.java:98) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T07:32:49.377

C++ 目标不支持 AST 创建（目前）。

请参阅：[https :](https://theantlrguy.atlassian.net/wiki/pages/viewpage.action?pageId=2687101) **//theantlrguy.atlassian.net/wiki/pages/viewpage.action** ?pageId=2687101中不支持的功能

# c++ - QSocketNotifier：只能与以 QThread 错误启动的线程一起使用

> ID：13888061
> 
> 赞同：7
> 
> 时间：2012-12-15T00:16:15.360
> 
> 标签：c++, multithreading, qt

我正在尝试使用 QLocalServer 作为 ipc 解决方案。qt的版本是4.6

这是我的 main.cpp：

```
int main(int argc, const char*argv[]) {  
  QServer test();

  while (true) {
  }
} 
```

这是我的 QServer 课程：

```
class QServer : public QObject
{
 Q_OBJECT

public :
 QServer ();

  virtual ~QServer();

private :  
  QLocalServer* m_server;
  QLocalSocket* m_connection;

private slots:
  void socket_new_connection();
};

QServer::QServer()
{
  m_server = new QLocalServer(this);
  if (!m_server->listen("DLSERVER")) {
    qDebug() << "Testing";
    qDebug() << "Not able to start the server";
    qDebug() << m_server->errorString();
    qDebug() << "Server is " << m_server->isListening();
  }

  connect(m_server, SIGNAL(newConnection()),
          this, SLOT(socket_new_connection()));
}

void
QServer::socket_new_connection()
{
  m_connection = m_server->nextPendingConnection();

  connect(clientConnection, SIGNAL(readyRead()),
          this, SLOT(newData(clientConnection)));
} 
```

这一切都可以编译，但是在运行时，当我尝试连接 newConnection() 时，我得到一个 QSocketNotifier: Can only be used with threads started with QThread error。

我曾尝试将整个事情包装在 QThread 中，但我仍然遇到同样的错误。

谁能解释我做错了什么或者为什么甚至涉及一个线程？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-20T17:19:03.723

错误消息具有误导性。您需要一个 Qt 事件循环才能使用 QSocketNotifier。在您的应用程序中执行此操作的适当方法是创建一个 QApplication（或者如果您不想要任何图形内容，则创建一个 QCoreApplication）。你的主要应该是这样的：

```
int main(int argc, char** argv)
{
    QCoreApplication app(argc, argv);
    QServer test();
    app.exec();
    return 0;
} 
```

QCoreApplication::exec() 启动事件循环（替换您的`while (true) {}`循环）。

# iphone - 谁的视图不在窗口层次结构问题中

> ID：13888062
> 
> 赞同：6
> 
> 时间：2012-12-15T00:16:32.443
> 
> 标签：iphone, ios, uinavigationcontroller

我已经设置了一个 navController，它在点击一个按钮后出现。但是，如果我点击按钮，我会收到以下错误：“ `Warning: Attempt to present <UINavigationController>: 0xab5d9d0 on <MyApp: 0xadaa320> whose view is not in the window hierarchy!`”

有谁知道如何解决这个问题？我也在 Stackoverflow 上尝试了一些东西，但这不是我的解决方案。

这是我打开导航控制器的代码：

我不知道是否有人知道这个相册，但如果你不知道，[这里](https://github.com/mwaterfall/MWPhotoBrowser)就是这个项目。

**我的代码（MyApp.m）：**

```
#import MyApp.h
...
//some stuff
- (void)launchGalleryView
{

    MWPhotoBrowser *browser = [[MWPhotoBrowser alloc] initWithDelegate:self];

    // Set browser options.
    browser.wantsFullScreenLayout = YES;
    browser.displayActionButton = NO;

    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:browser];

    NSMutableArray *photos = [[NSMutableArray alloc] init];
    MWPhoto *photo;
    photo = [MWPhoto photoWithFilePath:[[NSBundle mainBundle] pathForResource:@"callculator" ofType:@"jpg"]];
    photo.caption = @"The calculator is soo beateful...";
    [photos addObject:photo];

    self.photos = photos;

    [self presentModalViewController:navController animated:NO];
} 
```

提前致谢。

**编辑：**

它在资源和编译源中，但在资源中你可以看到它是红色的（故事板）。也许是这个原因造成的？

**第二个控制器.h：**

```
@class MyApp;

@interface Second : UIViewController <MWPhotoBrowserDelegate> {

}

@property (nonatomic, retain) MyApp* vC;

@end 
```

**Secnond 控制器 .m：**

```
#import "Second.h"
#import "MyApp.h"

@interface Second ()

@end

@implementation Second

@synthesize vC;
    //some stuff in here

//the action 
    - (IBAction)dothis:(id)sender {

        NSLog(@"launch the navcontroller");

        [self.vC launchGalleryView];

    } 
```

**我的应用程序.h：**

```
#import "Second.h"

@interface myApp : UIViewController  <MWPhotoBrowserDelegate> {
    }

-(void)launchGalleryView;

NSArray *_photos; 
```

![在此处输入图像描述](../Images/f79b14e91ce382240ff7ffae37cc97f8.png)

**新编辑：**

我发现我必须在 viewDidAppear 中调用方法“launchGalleryView”，但是如何在每次加载视图时不调用 navcontroller 来做到这一点？有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-16T15:53:50.393

我检查了你的项目..无法解决正确的问题..

但我尝试了一个黑客，它成功了..

将此行替换为

```
[self presentModalViewController:navController animated:YES]; 
```

**这**

```
[[[[[UIApplication sharedApplication] delegate] window] rootViewController] presentModalViewController:navController animated:YES]; 
```

# ios6 - 弹出 UIAlertView 时突出显示键盘上的 shift 按钮

> ID：13888069
> 
> 赞同：0
> 
> 时间：2012-12-15T00:18:24.090
> 
> 标签：ios6, uialertview, uikeyboard

我有一个 UIAlertView

```
UIAlertViewStylePlainTextInput 
```

我用来向 TableView 添加东西。没什么疯狂的，它只是用户可以添加的内容列表。首字母大写会更好看。我不想自动将文本字段中的内容大写。我只想让键盘弹出并突出显示 shift 键。我尝试将键盘切换到`UIKeyboardTypeNamePhonePad`. 但这没有用。我还注意到在我的 Iphone 上的应用商店中，他们使用相同的 UIAlertView 并且没有突出显示班次。所以也许不可能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T04:10:21.413

呃。抱歉，我不知道您必须通过文本字段进行操作，我以为这是某种键盘选项。

```
[alert textFieldAtIndex:0].keyboardAppearance = UIKeyboardAppearanceAlert;
[alert textFieldAtIndex:0].autocapitalizationType = UITextAutocapitalizationTypeWords; 
```

# mysql - ORDER BY 复杂

> ID：13888075
> 
> 赞同：0
> 
> 时间：2012-12-15T00:19:40.297
> 
> 标签：mysql, sql-order-by

我有一个 mysql_query：`select * from table ORDER BY v1, v2 ASC`

可以进行查询排序`v1`，`v2`如下？

```
+---------------+-----------------------+------+-----+
| id            | name                  | v1   | v2  | 
+---------------+-----------------------+------+-----+
| 1             | a                     | 1    |  A  |
| 2             | a                     | 2    |  B  |
| 3             | a                     | 3    |  C  |
| 4             | a                     | 1    |  A  |
| 5             | a                     | 2    |  B  |
| 6             | a                     | 3    |  C  |
| 7             | a                     | 1    |  A  |
| 7             | a                     | 2    |  B  |
| 7             | a                     | 3    |  C  |
+---------------+-----------------------+------+-----+ 
```

[SQL小提琴](http://sqlfiddle.com/#!2/54285/6/0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T00:42:13.223

你可以试试这个：

```
Select id, name, v1, v2, (v1 + ASCII(v2)) as mySum
from table
order by mySum 
```

ASCII [http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_ascii](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_ascii)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T01:29:37.533

您需要另一列进行这样的排序。你必须告诉 MySQL 为什么 ids 1,2,3 在 4,5,6 之前。如果您有另一列，例如 1 表示 1、2、3，2 表示 4、5、6 等，您可以使用以下命令进行排序：

```
ORDER BY missing_col, v1, v2 
```

# iphone - CLGeocoder reverseGeocodeLocation "kCLErrorDomain 错误 2"

> ID：13888076
> 
> 赞同：3
> 
> 时间：2012-12-15T00:19:46.690
> 
> 标签：iphone, objective-c, ios, clgeocoder

我正在开发一个具有反向地理编码功能的 iOS 应用程序。当我第一次调用该函数时，一切都很好。在第二次调用之后（使用完成调用的控制器的新实例）出现“Domain=kCLErrorDomain Code=2”错误。这发生在模拟器和设备上。坐标有效。我的代码：

```
CLGeocoder *geoCoder = [[CLGeocoder alloc] init];
CLLocation *loc = [[CLLocation alloc] initWithLatitude:cityCoords.latitude longitude:cityCoords.longitude];

self.displayedCity = [[Stadt alloc] init];
[geoCoder reverseGeocodeLocation:loc completionHandler:^(NSArray *placemarks, NSError *error) {

    if(!error){
        for (CLPlacemark * placemark in placemarks) {
            self.displayedCity.name         = [placemark locality];
            self.displayedCity.stadtCoord   = placemark.region.center;
        }

        [self loadCity:self.displayedCity.name];

    }
    else{
        NSLog(@"failed getting city: %@", [error description]);
    }

}]; 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-28T09:05:23.983

错误 2 通常意味着您过于频繁地调用地理定位服务器。通常，当您每次触发委托方法 didUpdateLocations 时向服务器发送反向地理编码请求时，就会发生这种情况。在文档中，Apple 表示这通常应该每分钟执行一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T15:10:31.133

有关此错误的更多信息，请参见 Apple 的 kCLErrorDomain 文档：[Core Location Constants Reference](https://developer.apple.com/library/IOS/#documentation/CoreLocation/Reference/CoreLocationConstantsRef/Reference/reference.html)和`CLError.h`：

> `kCLErrorNetwork` 网络不可用或发生网络错误。

# android - Android：强制线程关闭并显示警报对话框

> ID：13888077
> 
> 赞同：0
> 
> 时间：2012-12-15T00:19:59.083
> 
> 标签：android, multithreading, dialog, alert

我有一个线程，我在其中捕获了一个异常。我想要的是，当这种情况发生时，线程关闭/退出/死亡或我应该说的任何内容，并显示一个警报对话框（不像敬酒！）。

这是我的代码：

```
 t1 = new Thread(new Runnable()
    {   
        public void run() 
        {
            Looper.prepare();
            StringBuffer stringBuffer = new StringBuffer("");
            BufferedReader bufferedReader = null;
            URI uri = null;

            try
            {
                requestAndMakeSheet(stringBuffer, bufferedReader, uri);
            }
            catch (Exception e)
            {
                //Toast.makeText(getBaseContext(), "Web Request Error", Toast.LENGTH_LONG).show();
                //Log.e("Web Request Error", e.getMessage());
                t1.interrupt();
                AlertDialog.Builder parsingErrorBox = new AlertDialog.Builder(ReservationInfo.this);
                parsingErrorBox.setTitle("Login error");
                parsingErrorBox.setMessage("You may have to check your credentials and then try again.");
                parsingErrorBox.show();
            }
            finally
            {
                if (bufferedReader!=null)
                {
                    try
                    {
                        bufferedReader.close();
                    }
                    catch (IOException ioe)
                    {
                        Log.e("Web Request Error", ioe.getMessage());
                    }
                }
            }
        }           
    });
    t1.start();
    try 
    {
        t1.join();
        mWebview.loadUrl("file:///"+Environment.getExternalStorageDirectory()+"/MySheet.html");
        setContentView(mWebview);
    } 
    catch (InterruptedException e) 
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    //End of le thread
} 
```

这段代码崩溃了，我认为它与 t1.interrupt 有关（尝试停止，但也没有工作）。

如何修复此代码？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T02:17:54.547

为什么你有 t1.interrupt() 呢？似乎您的线程将被终止，那么将它放在那里的原因是什么？

# jquery - 通过单击 div 的表单发布

> ID：13888078
> 
> 赞同：0
> 
> 时间：2012-12-15T00:20:08.443
> 
> 标签：jquery, forms, html

我正在寻找一些关于如何通过表单发布一些点击的 div 的帮助。

```
<div class="btn btn-large btn-rb-space">Item 1</div>
<div class="btn btn-large btn-rb-space">Item 2</div>
<div class="btn btn-large btn-rb-space">Item 3</div>
<div class="btn btn-large btn-rb-space">Item 4</div>
<div class="btn btn-large btn-rb-space">Item 5</div>
<div class="btn btn-large btn-rb-space">Item 6</div>
<div class="btn btn-large btn-rb-space">Item 7</div>
<div class="btn btn-large btn-rb-space">Item 8</div>
<div class="btn btn-large btn-rb-space">Item 9</div> 
```

如何填充我的隐藏输入？

每个 div 都需要一个 id 吗？

打开以使用 jQuery 或 PHP 来完成。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T00:23:06.713

您可以使用 on() - [http://api.jquery.com/on/为 jQuery 中的所有 div 创建一个点击事件](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T00:33:50.517

嗯，不，你真的不需要给每个 div 一个 id。如果您只想发送点击了哪些 div，您可以将所有点击发送到一个字符串中，或​​者如您在隐藏的输入字段中所说的那样发送。

```
var clicks = [];
$(".btn")​.on('click',function(){
  clicks.push($(this).eq()); // returns the zero based index of the element
});
var clickSequence = ​​​​clicks.join(',');
$("form").append('<input type="hidden" name="clickSequence" value="'+clickSequence+'" />'); 
```

# sql-server-2008 - 链接服务器“（null）”的 OLE DB 提供程序“Microsoft.ACE.OLEDB.12.0”返回消息“书签无效。”

> ID：13888082
> 
> 赞同：5
> 
> 时间：2012-12-15T00:20:30.963
> 
> 标签：sql-server-2008, export-to-excel

**我想从 Excel 中导出 MSSQL SERVER 2008 中的数据，但我有错误**

```
OLE DB provider "Microsoft.ACE.OLEDB.12.0" for linked server "(null)" 
returned message "Bookmark is invalid.".

Msg 7343, Level 16, State 2, Line 1

The OLE DB provider "Microsoft.ACE.OLEDB.12.0" for linked server "(null)" 
could not INSERT INTO table "[Microsoft.ACE.OLEDB.12.0]". 
```

**它是我导出时的 excel 文件（文件以 97-2003 格式保存）** ![服务器上的 Excel 文件版本 97-2003](../Images/66ed218ee2be19f65cc73768e16fa12e.png)

**这是我的查询** ![SQL查询](../Images/5c98e78f755d6934b155bda343310ab0.png)

**请告诉我为什么我会出错？我需要做什么？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-08T11:23:48.660

经过多次与此问题的斗争，我找到了以下解决方案：

1.  在 64 位服务器和机器上，您需要首先卸载所有 32 位 Microsoft Office 应用程序和实例（Access 2007 安装、Office 10 32 位等）。否则，您将无法安装新的 64 位 Microsoft Access Database Engine 2010 Redistributable 组件。是的，它令人头疼，但这是我发现为需要在 64 位机器上运行的 JET 引擎组件安装新替代品的唯一方法。
2.  从 Microsoft 下载并安装新组件：http: [//www.microsoft.com/downloads/en/details.aspx?FamilyID=c06b8369-60dd-4b64-a44b-84b371ede16d &displaylang=en](http://www.microsoft.com/downloads/en/details.aspx?FamilyID=c06b8369-60dd-4b64-a44b-84b371ede16d&displaylang=en)
    *   这将安装设置链接服务器、OPENROWSET excel 文件等所需的访问和其他引擎。
3.  打开 SQL Server 并运行以下命令：

    ```
    sp_configure 'show advanced options', 1;
    GO
    RECONFIGURE;
    GO
    sp_configure 'Ad Hoc Distributed Queries', 1;
    GO
    RECONFIGURE;
    GO
    EXEC master.dbo.sp_MSset_oledb_prop N'Microsoft.ACE.OLEDB.12.0', N'AllowInProcess', 1
    GO
    EXEC master.dbo.sp_MSset_oledb_prop N'Microsoft.ACE.OLEDB.12.0', N'DynamicParameters', 1
    GO 
    ```

    *   这将设置访问和运行与组件相关的查询所需的参数。地址'空
4.  现在，如果您正在运行 OPENROWSET 调用，则需要放弃使用旧 JET 参数进行的调用并使用新调用，如下所示：

    ```
    (*Example, importing an EXCEL file directly into SQL):
    DONT DO THIS….
    SELECT * FROM OPENROWSET('Microsoft.Jet.OLEDB.4.0','Excel 8.0;HDR=YES;Database=c:\PATH_TO_YOUR_EXCEL_FILE.xls','select * from [sheet1$]')

    USE THIS INSTEAD…
    SELECT * FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0', 'Excel 12.0;Database=c:\PATH_TO_YOUR_EXCEL_FILE.xls','select * from [sheet1$]')

    *At this point resolved two SQL issues and ran perfectly 
    ```

5.  现在是有趣的部分……..找到您所有的 Office 磁盘并将所需的 Office 和/或应用程序重新安装到机器上。您可以通过进入磁盘并进入 64 位文件夹并运行它来安装 64 位版本的 Office 10，但请注意，在某些情况下，某些第三方应用程序尚未与该版本的 Office 交互。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-15T11:26:59.957

试试这个

```
INSERT INTO OPENROWSET('Microsoft.ACE.OLEDB.12.0',
                       'Excel 8.0;Database=C:\Export.xls;', 
                       'SELECT id_sale FROM [ExportSheet$]')
SELECT id_sale
FROM dbo.Sale 
```

或者

```
INSERT INTO OPENDATASOURCE('Microsoft.Jet.OLEDB.4.0',
'Data Source=C:\Export.xls;Extended Properties=EXCEL 8.0')...[ExportSheet$]
SELECT id_sale
FROM dbo.Sale 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-23T13:13:21.260

我安装了 Office 32 位版本并安装了 Sql server 2008 r2（64 位）。我尝试安装 64 位版本的 AccessDatabaseEngine 可再发行组件，但它不会让我这样做。然后我尝试安装 32 位版本，但随后 sql server 抱怨：

```
OLE DB provider 'Microsoft.ACE.OLEDB.12.0' cannot be used for distributed queries because the provider is configured to run in single-threaded apartment mode. 
```

所以后来我辞职到安装办公室 64 位。然后我注意到“Microsoft Sql server 2008 r2”启动菜单中的“导入和导出数据（32 位选项）”。所以我尝试了，它对我有用。

我一直在尝试通过右键单击“数据库->任务-导入数据..”来导入数据，这显然是打开了 64 位版本并让我很痛苦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-23T03:54:41.830

1- 如果您使用的是 32 位版本的 Windows，请安装 AccessDatabaseEngine_x64.exe 或 AccessDatabaseEngine.exe（需要重新启动）。

2- 如果您使用的是 SQL Management Studio，请以管理员身份运行 Management Studio。如果您不以管理员帐户运行它，则会出现此错误（无法为链接服务器“（null）”初始化 OLE DB 提供程序“MICROSOFT.ACE.OLEDB.12.0”的数据源对象。

3-运行此命令来配置您的数据库

```
EXEC sp_configure 'show advanced options', 1;
RECONFIGURE with override;
GO

EXEC sp_configure 'Ad Hoc Distributed Queries', 1;
RECONFIGURE with override;
GO

EXEC master . dbo. sp_MSset_oledb_prop N'Microsoft.ACE.OLEDB.12.0' , N'AllowInProcess' , 1
GO

EXEC master . dbo. sp_MSset_oledb_prop N'Microsoft.ACE.OLEDB.12.0' , N'DynamicParameters' , 1
GO 
```

4- 不要在 OPENROWSET 函数中使用 'select * from sheet1$'。试试这个代码。

```
select * from OPENROWSET('MICROSOFT.ACE.OLEDB.12.0', 'Excel 12.0;HDR=YES;DATABASE=D:\test.xlsx', sheet1$) 
```

如果您仍然有（32 位）错误，请尝试重新启动您的 SQL 服务并检查您的 C:\Windows\Temp 并查看您是否有权访问此目录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-15T14:57:19.337

**手动**检查/设置以下注册表项（具体路径取决于您的 SQL 服务器版本）：

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\MSSQLServer\Providers\Microsoft.ACE.OLEDB.12.0]
"AllowInProcess"=dword:00000001
"DynamicParameters"=dword:00000001 
```

同时使用 Jet 4.0 和 ACE.OLEDB.12 似乎是个问题。

# objective-c - 如何将图片包含为二进制 MIME 附件 - POST 请求 Ebay API？(iOS)

> ID：13888083
> 
> 赞同：1
> 
> 时间：2012-12-15T00:20:59.020
> 
> 标签：objective-c, ios, xcode, mime

大家好，我希望有人可以帮助我解决这个问题，因为我已经尝试了 6 个小时！

Ebay Docs 说：*“将图片作为二进制 MIME 附件包含在同一个 POST 请求中的 XML 输入之后发送”* [http://developer.ebay.com/DevZone/XML/docs/Reference/eBay/UploadSiteHostedPictures.html](http://developer.ebay.com/DevZone/XML/docs/Reference/eBay/UploadSiteHostedPictures.html)

在我的代码中，我使用'NSMutableURLRequest'，设置标题：

```
 NSString *requestEncoding = [NSString stringWithFormat:@"801"];
[request addValue:requestEncoding forHTTPHeaderField: @"X-EBAY-API-COMPATIBILITY-LEVEL"]; 
```

...等等。然后我正在设置身体；其中设置图片 URL 是其中的一部分：

```
[postBody appendData:[[NSString stringWithFormat:@"<PictureURL>%@</PictureURL></PictureDetails>", self.fullURLForEbayHostedPic]dataUsingEncoding:NSUTF8StringEncoding]]; 
```

如果我传入存储在另一台服务器上某处的图像的 URL，则可以正常工作。但是：我不知道如何将存储在设备上的文件传递到 Ebay 服务器。

根据我对 Ebay 文档的解释，我需要将二进制数据添加到 XML 的末尾（最后一件事），同时给出上面的“PictureURL”引用；虽然我完全坚持这一点。

我确实找到了这个 C# 示例：[https](https://ebay.custhelp.com/app/answers/detail/a_id/1093) ://ebay.custhelp.com/app/answers/detail/a_id/1093并试图适应其中的一些元素（针对objective-c对应物进行了修改），但无济于事.

任何人都可以帮忙吗？

谢谢

卡尔。

# jquery - jQuery .autocomplete 很粘

> ID：13888084
> 
> 赞同：1
> 
> 时间：2012-12-15T00:20:59.900
> 
> 标签：jquery, jquery-ui, autocomplete, widget

```
 $("input#lastname").autocomplete({
            source: "autocomplete.lastname.php"
        }); 
```

我遇到了一个问题，当我使用选项卡更改文本框时，下拉菜单卡在向下位置。可以做些什么来解决这类问题？我也已经有了这样的东西：

```
 $("input#firstname").autocomplete({
      source: "autocomplete.firstname.php"
    }).keyup(function(e) {
      if (e.which === 13) {
        $(".ui-menu-item").hide();
      }
    }); 
```

这不是我想要的，但也许可以修改？我还注意到在 .hide 上仍然显示在进入菜单的底部残余部分。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T00:24:17.400

它滞后是因为您`source`是一个 PHP 文件，它必须加载和处理那里的任何内容。

* * *

一个快速而肮脏的解决方案是加载 AJAX 调用。

```
$(function() {
    var lastnames;

    $.get("autocomplete.lastname.php", function(data) {
       lastnames = data;
    });

    $("input#lastname").autocomplete({
        source: lastnames
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:20:48.237

我遇到了同样的问题，但是对我来说，添加 AJAX 调用似乎有点过头了。因此，当用户关注下一个输入框时，我添加了一行来关闭表单上的所有自动完成功能：

```
$("#form input").on("focus", function(e) {
    $("#form autocomplete_input_1, #form autocomplete_input_2").autocomplete( "close" );
}); 
```

这样做的好处是在您需要时不会干扰自动完成功能，而是为那些可以快速浏览表单的用户快速隐藏它。

# sencha-touch - 为什么 Sencha Touch 中的 animateActiveItem 函数没有动画

> ID：13888085
> 
> 赞同：0
> 
> 时间：2012-12-15T00:21:00.697
> 
> 标签：sencha-touch, sencha-touch-2

我的应用程序类中有以下代码：

```
 switchMainView: function (newView, config) {
        if (this.currentView != false) {
            Ext.Viewport.remove(this.currentView);
        }

        this.currentView = Ext.create(newView, config);        
        Ext.Viewport.animateActiveItem(this.currentView, { type: 'slide', direction: 'right' })
    }, 
```

可以从任何控制器调用。但是，它没有显示动画。有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:19:10.697

这是因为“this.currentView”视图还不是视口的一部分。在 animateActiveItem 行之前使用此行：

```
Ext.Viewport.add(this.currentView); 
```

这应该使它工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T04:30:09.203

根据 sencha 伙计们的说法：

AnimateActiveItem(activeItem,animation ) 将

使用指定的动画对提供的 activeItem 进行动画处理。**目前这只适用于 Card layout**。此传递的动画将覆盖容器上的任何默认动画，用于单卡切换。动画完成后将被销毁。

```
viewport: {
layout: {
    type: 'card'
} 
```

}

在 app.js 中添加上述代码

# mapreduce - 为什么我不能在 CouchDB 中删除地图函数中的属性？

> ID：13888086
> 
> 赞同：2
> 
> 时间：2012-12-15T00:21:15.890
> 
> 标签：mapreduce, couchdb

我有一个`view`和一个`map`函数，在`CouchDB`. 我只是迭代数组中的一些值，然后单独发出它们。不过，我想排除我发出的文档的属性。我希望只是调用`delete`它，但这似乎没有做任何事情。该值仍随属性发出。这是为了保持快速索引的限制吗？我的地图功能如下所示：

```
function(doc) {
  if (doc.type == 'user' && doc.spaces) {
    doc.spaces.forEach(function (space) {
      if (space.tokens) {
        space.tokens.forEach(function (token) {
          emit(token.token, space);
        });
      }
    });
  }
} 
```

在我发出的地方`space`，我想在发出`tokens`之前删除它的属性。我不想在此数据中公开其他令牌。所以，我修改代码看起来像这样，没有运气。它仍然发出完整的文档，令牌完好无损：

```
function(doc) {
  if (doc.type == 'user' && doc.spaces) {
    doc.spaces.forEach(function (space) {
      if (space.tokens) {
        var tokens = space.tokens;
        delete space.tokens;
        tokens.forEach(function (token) {
          emit(token.token, space);
        });
      }
    });
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-06T08:56:32.953

现在对我来说也发生了同样的麻烦。我正在搜索这个话题。但不幸的是，另一个答案对我没有用。因为，CouchDB 不是 SQL，文档有不同的属性。因此我不能`emit`具有特定的属性。

思索之后，我想出了一个解决问题的办法。它在那里：

```
function( doc )
{
  // Remove a `seal` in the doc using a deep-copy technique.
  var tmp = JSON.parse( JSON.stringify( doc ) );

  // We can `delete` a property as we like!
  delete tmp._rev;

  // Emit `tmp`.
  emit( null, tmp );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T01:27:01.473

我们也被这个问题所困扰。

我们通过创建一个新对象并发出它来解决它：

```
emit(token.token, {
  name :  space.name,
  id : space.id
  etc : etc
} 
```

我们发现无论如何这是最好的方式，因为大多数时候不需要发出完整的（子）文件，只需要发出所需的文件。

# javascript - jquery选择父div下面的div

> ID：13888090
> 
> 赞同：3
> 
> 时间：2012-12-15T00:22:20.480
> 
> 标签：javascript, jquery

我有几个像这样设置的div：

```
 <div class="menu_options">
    <div class="parent_div">input field</div>
    <div class="children_div">
        <div class='something">field</div>
        <div class="something_else">field</div>
    </div>
 </div>

<div class="menu_options">
    <div class="parent_div">input field</div>
    <div class="children_div">
        <div class='something">field</div>
        <div class="something_else">field</div>
    </div>
 </div>

<div class="menu_options">
    <div class="parent_div">input field</div>
    <div class="children_div">
        <div class='something">field</div>
        <div class="something_else">field</div>
    </div>
 </div> 
```

在 jquery 我正在做

```
 $('.parent_options').each(function() {
            $(this).click(function() {

            });
        }); 
```

现在 $(this) 给了我点击的 parent_div，我需要能够向下移动到 children_div 并隐藏整个 children_div。有任何想法吗。我知道在原型中我使用了一个向下功能，但不确定 jquery 是否有它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T00:26:18.043

如果你想`.children_div`在点击`.parent_div`使用后隐藏

```
 $('.parent_div').click(function() {
        $(this).siblings(".children_div").hide();
  }); 
```

演示[**在这里**](http://jsfiddle.net/FBYah/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T00:26:51.717

```
$('.parent_div').each(function() {
            $(this).click(function() {
        $(this).next().hide();
            });
        });​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T00:28:43.673

如果您将函数绑定到 all `.menu-options`，则不需要`each()`. 如果我正确理解了您的查询，这应该可以工作：

```
$('.parent_div').click(function() {  
    $(this).siblings('.children_div').hide();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-20T09:22:24.973

尝试 `.next()`

```
 $( this ).next( ".tb-contents'" ).show(); 
```

这将起作用。

谢谢

# javascript - 如何在jquery中单击按钮时显示/隐藏表单？

> ID：13888093
> 
> 赞同：2
> 
> 时间：2012-12-15T00:22:25.467
> 
> 标签：javascript, jquery, html

我的页面中有两个表格。我使用 HTML 内联样式隐藏表单 2。

```
 <form id="productionForm" name="productionForm" method="POST" style="display:none;"> 
```

我在表格 1 上有输入按钮。

```
 <input id="buttonProductionSummary"  class="buttonProductionSummary" type="submit" value="Submit" /> 
```

我有 JQuery 代码在表单 1 的按钮单击时加载表单 2。我的 JQuery 代码如下。

```
 <script type="text/javascript">
    $(document).ready(function(){

        $("#buttonProductionSummary").click(function() {
            $("#productionForm").show();
        });
    });
</script> 
```

当我单击表单一中的按钮时，页面再次重新加载，因此表单 2 出现并再次消失。当我单击表单 1 上的按钮时，如何使表单 2 出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T00:24:51.567

您需要防止表单的默认行为：

```
$("#buttonProductionSummary").click(function(e) {
    $("#productionForm").show();

    e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T00:29:26.147

问题是单击表单 1 中的按钮会触发表单的提交（默认事件）......因此，页面重新加载。您应该通过使用提交事件作为触发器来防止这种情况，使用 AJAX 处理表单并将结果输出到`#productionForm`显示之前：

```
$("#form1").submit(function() {
    /* AJAX calls and insertion into #productionForm */
    $("#productionForm").show();
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-14T13:46:35.243

根据我的要求，我尝试使用以下方式显示要编辑的表单并隐藏所有剩余的表单；

```
<html>

<head>
<script>
$(document).ready(function(){   

    $("#what").click(function() { //event called

         $(".hello").hide(); // to hide all forms
          $('#ayyappa1').show();  //to dispaly needed form only
          return false //option to stop
 });

 });

</script>

</head>
<body>
<form id ="ayyappa1 " class ="hello"> // declare class for every form
<input type="check" class="what">   // trigger of click event 
</form>
<form id ="ayyappa2 " class ="hello">
<input type="check" class="what">
</form>
<form id ="ayyappa3 " class ="hello">
<input type="check" class="what">
</form>
<form id ="ayyappa4 " class ="hello">
<input type="check" class="what">
</form>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-07T20:25:14.940

上面的答案都不起作用，所以我自己想通了。这段代码就像一个魅力。

```
<button id="btn" class="editbutton" >Edit your Profile</button>
<form id="editForm"  action="" method="post" name="editForm">

<input type="text" name="txtname" placeholder="enter your name">

</form>` 
```

* * *

```
<script type="text/javascript">

    $(document).ready(function(){
        $("#editForm").hide();
        $("#btn").click(function(e) {
            $("#editForm").show();
            $("#btn").hide();

        });
    });
</script> 
```

# c# - FindNextPrinterChangeNotification 为 ppPrinterNotifyInfo 返回 null 是什么意思？

> ID：13888094
> 
> 赞同：0
> 
> 时间：2012-12-15T00:22:34.223
> 
> 标签：c#, pinvoke

我正在使用 FindFirstPrinterChangeNotification/FindNextPrinterChangeNotification 方法来监视使用 C# 中的 P/Invoke 的打印机。

我已经彻底阅读了有关此功能的[MSDN 文档。](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162723%28v=vs.85%29.aspx)

有时，我对 FindNextPrinterChangeNotification 的一次调用会导致非零（成功）返回值，但 ppPrinterNotifyInfo 指针为空。我在任何地方都找不到这种行为的记录，所以我不确定这表明了什么。我通常可以通过在我的机器上快速连续发送 20 或 30 个打印件来重现该问题。

我知道我从 FindFirstPrinterChangeNotification 收到的句柄是有效的，因为使用相同句柄的其他调用（在使用空指针的调用之前和之后）成功地按预期返回了通知数据。

这是我正在使用的定义：

```
[DllImport("winspool.drv", EntryPoint = "FindNextPrinterChangeNotification", SetLastError = true,
            CharSet = CharSet.Unicode, ExactSpelling = false, CallingConvention = CallingConvention.StdCall)]
public static extern int FindNextPrinterChangeNotification([In] IntPtr hChangeObject,
                                                           [Out] out Int32 pdwChange,
                                                           [In, MarshalAs(UnmanagedType.LPStruct)] PrinterNotifyOptions pPrinterNotifyOptions,
                                                           [Out] out IntPtr lppPrinterNotifyInfo); 
```

那么是什么导致了 null ppPrinterNotifyInfo，这种行为是否记录在我遗漏的任何地方，这是什么意思？

我可以安全地忽略它为空的情况并继续从同一个句柄接收通知吗？这是否意味着我错过了任何通知？

# javascript - 一系列不同的图像报告相同的宽度

> ID：13888099
> 
> 赞同：2
> 
> 时间：2012-12-15T00:23:18.243
> 
> 标签：javascript

JS：

```
function imgLoader(imgObj)
         {
          alert(imgObj.id + " : " + imgObj.src + " : " +imgObj.width);
        } 
```

的HTML：

```
<img id="img_1" src="image_1.png" onload="imgLoader(this)" />
<img id="img_2" src="image_2.png" onload="imgLoader(this)" />
<img id="img_3" src="image_3.png" onload="imgLoader(this)" />
<img id="img_4" src="image_4.png" onload="imgLoader(this)" />
<img id="img_5" src="image_5.png" onload="imgLoader(this)" /> 
```

相关 css（更新 css 评论/问题的 bc）

```
img {position:relative; height: 46px; display: inline-block; cursor:pointer; margin: 0px 10px 0px 0px; padding: 0px 10px 0px 10px;} 
```

注意没有其他的CSS。问题：是不是就在星期五和临近假期时，我遗漏了一些明显的东西？来自 onload 的警报都报告相同的值，但是与悬停相关的相同功能 - 准确报告宽度。

但是当它在初始图像加载时运行时，我的警报框看起来像（*这实际上是一个虚构的顺序，因为图像加载的顺序尚未控制并且取决于浏览器 - 但这很好地说明了我的问题*) :

“img_1：image_1.png：125”

“img_2：image_2.png：125”

“img_3：image_3.png：125”

“img_4：image_4.png：125”

“img_5：image_5.png：125”

这是非常愚蠢的，因为图像的宽度从 15 像素到 400 像素不等。是什么赋予了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T00:40:04.067

您的代码在 mozilla firefox 和 IE 6 上运行良好

```
<script type="text/javascript">
<!--
function imgLoader(imgObj)
         {
          alert(imgObj.id + " : " + imgObj.src + " : " +imgObj.width);
        }
-->
</script>

<img id="img_1" src="image_1.png" onload="imgLoader(this)" />
<img id="img_2" src="image_2.png" onload="imgLoader(this)" />
<img id="img_3" src="image_3.png" onload="imgLoader(this)" />
<img id="img_4" src="image_4.png" onload="imgLoader(this)" />
<img id="img_5" src="image_5.png" onload="imgLoader(this)" /> 
```

不同的宽度显示在 5 个警告框上。在Firefox中它很快，5个警报框在点击之前一个接一个地显示得如此之快。所以当所有警报框都显示出来时，第5个警报框在顶部。然后点击后，第四个出现在那个下面。

没有发现任何问题。检查您的图像是否具有不同的宽度。

# c - c 当函数中的值发生变化时，在 main 中打印 char 指针

> ID：13888100
> 
> 赞同：1
> 
> 时间：2012-12-15T00:23:24.030
> 
> 标签：c, function, pointers, parameters

**主要的**

```
...
            char coords;
            get_coords(1, &coords);
            printf("{%s}", coords);
... 
```

**获取坐标：**

```
void get_coords(int num, char *coords){
    if (num == 1){
        *coords = '0-0';
    }
} 
```

当代码尝试执行 printf 并简单地返回错误时，问题似乎发生了......如果我删除它`line of code`或者它`change` `%s`会`%c`正常工作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T00:24:56.127

```
char coords;

printf("{%s}", coords); 
```

`coords`是一个`char`而不是一个字符串。`%s`转换规范需要一个`char *`参数，而不是一个`char`. 传递一个类型的对象`char`是未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T00:24:47.070

`%s`是 C 字符串的格式说明符。你传递给它一个简单的`char`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T00:39:40.657

您想要的可能是这样的（请自行添加错误检查）：

```
#include <stdio.h>
#include <string.h>

void get_coords(int num, char *coords)
{
    if (num == 1) {
        coords[0] = '0';
        coords[1] = '-';
        coords[2] = '0';
        coords[3] = '\0';
    }
}

int main(void)
{
    char coords[4];
    memset(coords, 0, sizeof(coords));

    get_coords(1, coords);
    printf("{%s}\n", coords);

    return 0;
} 
```

# git - git merge pull 分支混乱

> ID：13888103
> 
> 赞同：2
> 
> 时间：2012-12-15T00:23:44.653
> 
> 标签：git, git-branch, bitbucket, git-merge, git-pull

我有 2 个分支（master 和 dev）。另一个工作人员已将一个名为 stage 的新分支推送到存储库中，因此该 stage 现在比 master 提前 1 个提交。我正在尝试拉下舞台，以便可以将其合并到 master 中（从而合并到 dev 中），但是我在拉下舞台时遇到了问题。如何下拉干净版本的舞台？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T00:29:06.980

我认为您在这里不了解 Git 的分支基础知识。通过示例阅读我的答案后，您可能会了解更多。

### 长篇大论

您应该获取所有更新

```
git fetch --all 
```

那么你应该看到现在仍然是远程分支：

```
git branch -a
[...]
remotes/origin/stage 
```

*（可选*）您可以通过检出此分支使其成为本地分支`stage`（不必具有相同的名称）

```
git checkout -b stage origin/stage 
```

你应该用这个切换到这个分支。

现在回到 master 并合并它：

```
git checkout master
git merge origin/stage # or just 'stage' if you have it local 
```

### 拉魔法

现在，可以将两者`fetch`和`merge`步骤组合在一起`pull`。但是，有时需要获取新的分支及其头部才能指定它们。

```
git pull origin stage 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T00:26:35.453

这应该有效：

```
git checkout master
git pull origin stage 
```

考虑`master`根本没有链接到`stage`，你需要指定你从哪里拉，以及你正在合并什么。
看：

*   “[`Git pull/fetch`与 refspec 差异](https://stackoverflow.com/questions/7169103/git-pull-fetch-with-refspec-differences)”
*   “ [`git - push current`vs. `push upstream`(tracking)](https://stackoverflow.com/questions/13751319/git-push-current-vs-push-upstream-tracking/13751847#13751847) ” 了解更多。

# android - HockeyApp Jenkins 插件是否适用于 Android？

> ID：13888104
> 
> 赞同：2
> 
> 时间：2012-12-15T00:23:58.917
> 
> 标签：android, jenkins, continuous-integration, jenkins-plugins, hockeyapp

我希望能够自动将我的 Android 应用程序二进制文件从 Jenkins 上传到 HockeyApp，但我不清楚这是否可能。

我看到有一个已发布的 Jenkins 插件：
[https ://wiki.jenkins-ci.org/display/JENKINS/HockeyApp+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/HockeyApp+Plugin)

只是不确定它是否适用于Android。看起来 API 专门调用“ipa”，但是，在 Hockeyapp 的网站上，他们说您可以在其中粘贴 .apk。有人试过这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T00:33:37.847

是的，它有效。

HockeyApp [API](http://support.hockeyapp.net/kb/api/api-upload-new-apps)`ipa`接受Jenkins 插件使用的参数中的 .apk 或 .ipa 文件。此外，该`dsym`参数接受来自 iOS 的 dSYM 符号或​​适用于 Android 的 ProGuard mapping.txt 文件。

从插件版本 1.0.4 开始，UI 和文档已更新，以阐明 iOS、Mac OS X 和 Android 应用程序都通过同一个插件得到支持。

# wordpress - 显示最受欢迎的标签？

> ID：13888113
> 
> 赞同：4
> 
> 时间：2012-12-15T00:24:56.513
> 
> 标签：wordpress

我得到了“最受欢迎的标签”wordpress 插件，所以我可以在我的网站上显示标签，但它会显示一堆通用标签。是否可以添加任何代码，让我可以在我的网站上显示最受欢迎的标签，并可以选择排除我不想要的标签？还是允许这样做的插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:57:16.950

此代码将返回过去 30 天内最常用的标签。使用一点 jQuery 和 CSS，您可以自定义，例如，在第一个字体上放一个大字体，在最后一个字体上放一个小字体。

```
<ul id="footer-tags">
    <?php $wpdb->show_errors(); ?> 
    <?php
        global $wpdb;
        $term_ids = $wpdb->get_col("
            SELECT term_id FROM $wpdb->term_taxonomy
            INNER JOIN $wpdb->term_relationships ON $wpdb->term_taxonomy.term_taxonomy_id=$wpdb->term_relationships.term_taxonomy_id
            INNER JOIN $wpdb->posts ON $wpdb->posts.ID = $wpdb->term_relationships.object_id
            WHERE DATE_SUB(CURDATE(), INTERVAL 30 DAY) <= $wpdb->posts.post_date");

if(count($term_ids) > 0){

  $tags = get_tags(array(
    'orderby' => 'count',
    'order'   => 'DESC',
    'number'  => 28,
    'include' => $term_ids,
  ));

foreach ( (array) $tags as $tag ) {
    echo '<li><a href="' . get_tag_link ($tag->term_id) . '" rel="tag">' . $tag->name . '</a></li>';
}
}
?>
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-24T17:11:18.973

我看到的解决方案涉及编写自定义查询或插件。当您询问特定插件时，请知道这可以通过纯 WP 完成。这里有两个选项：

首先，您可以使用 来创建标签云[`wp_tag_cloud`](https://codex.wordpress.org/Function_Reference/wp_tag_cloud)并对其进行排序`count`，如下所示：

```
$tags = wp_tag_cloud(array(
    'echo' => false,
    'orderby' => 'count',
    'order' => 'DESC'
)); 
```

`exclude`您可以从使用参数中排除某些标签。您还可以自定义字体大小输出，或者简单地使用 CSS 来忽略标签云字体大小。

另一种选择是使用[`get_terms`](https://developer.wordpress.org/reference/functions/get_terms/)，可以这样使用：

```
$tags = get_terms(array(
    'taxonomy' => 'post_tag',
    'orderby' => 'count',
    'order' => 'DESC',
)); 
```

我个人是第二种`get_terms`选择的粉丝。与 一样`wp_tag_cloud`，您可以通过`exclude`参数传递要排除的 id 列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-17T18:50:32.997

我认为 get_tags->count 并没有真正计算范围内的标签。我已经实施了这个解决方案，如果这对你有用，请告诉我：

```
<?php
global $wpdb;
$term_ids = $wpdb->get_col("
SELECT term_id , count(*) cont FROM $wpdb->term_taxonomy
INNER JOIN $wpdb->term_relationships ON $wpdb->term_taxonomy.term_taxonomy_id=$wpdb->term_relationships.term_taxonomy_id
INNER JOIN $wpdb->posts ON $wpdb->posts.ID = $wpdb->term_relationships.object_id
WHERE DATE_SUB(CURDATE(), INTERVAL 7 DAY) <= $wpdb->posts.post_date AND  $wpdb->term_taxonomy.taxonomy='post_tag'
GROUP BY term_id
ORDER BY cont DESC
LIMIT 5");

if(count($term_ids) > 0){
   $tags = get_tags(array(
   'orderby' => 'count',
   'order'   => 'DESC',
   'number'  => 5,
   'include' => $term_ids,
));
foreach ( (array) $tags as $tag ) {
   echo '<li><a href="' . get_tag_link ($tag->term_id) . '" rel="tag">' . $tag->name . '</a></li>';
}
}
?> 
```

# android - 通过 Oauth2.0 向 Google Latitude API 发送用户新位置

> ID：13888114
> 
> 赞同：0
> 
> 时间：2012-12-15T00:25:00.613
> 
> 标签：android, google-maps, android-location, google-latitude

我目前正在开发一个请求 GPS 位置更新的应用程序。我已经成功实现了它以及 latitude API 和 OAuth 2.0。似乎纬度 API 只读取用户上次谷歌纬度更新。我不知道如何将新更新插入纬度 API。

例如[https://play.google.com/store/apps/details?id=gaugler.backitude&hl=en](https://play.google.com/store/apps/details?id=gaugler.backitude&hl=en) 他们能够将新的 gps 更新直接插入谷歌纬度。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:54:29.550

这可以通过当前位置 insert() API 调用来完成：

[https://developers.google.com/latitude/v1/currentLocation/insert](https://developers.google.com/latitude/v1/currentLocation/insert)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T20:42:57.890

使用[oauth 游乐场](https://developers.google.com/oauthplayground)将以下内容发布到您询问的 api

IMO 在 {data，你真正需要的只是纬度，经度。你必须检查一下。

> POST /latitude/v1/location HTTP/1.1
> 
> 主机：www.googleapis.com 内容长度：244 内容类型：application/json 授权：OAuth ya29.AHES6ZTbG5HRDWduqeV60o_GWYagNg1BEk4c89V5ocSh0W2yc6FRYg {"data":{"kind": "latitude#location", "timestampMs": "1355601946",
> "纬度：“22”，“经度”：“22”，“准确度”：“40”，“速度”：“10”，“航向”：“180”，“高度”：“42”，“高度准确度” ：“50”，“activityId”：“xyzzzzzzz”}}

HTTP/1.1 200 OK 内容长度：

> 158 通过：HTTP/1.1 GWA X-content-type-options：nosniff Etag：“0UQtEv4nUExaO_EaPNLUB8rXY8M/mI3wNTFv​​wTjtI9TlZ9A9neseLn0”X-google-cache-control：remote-fetch-content-encoding：gzip 服务器：GSE 原因：OK X-xss-保护：1；mode=block Pragma: no-cache Cache-control: no-cache, no-store, max-age=0, must-revalidate Date: Sat, 15 Dec 2012 20:32:11 GMT X-frame-options: SAMEORIGIN Content -类型：应用程序/json；charset=UTF-8 过期时间：1990 年 1 月 1 日星期五 00:00:00 GMT {"data":{"kind":"latitude#location","timestampMs":"1355601946","latitude":22.0,"longitude ":22.0,"accuracy":40,"speed":10,"altitude":42,"altitudeAccuracy":50}}

对于针对这些 api 的开发，您应该考虑两件事：

在您的堆栈上进行调试将要求您检查 HTTP HEADERS、HTTP WIRE，以便查找它们并弄清楚如何显示

使用“oauth playground”来模拟您的应用将发布的内容。简而言之，如果它在 Playground 中与 CURL 客户端结合使用，您将确切地知道在您的应用程序中要做什么。

# sql - 当查询超出范围时返回范围中的最后一条记录

> ID：13888117
> 
> 赞同：0
> 
> 时间：2012-12-15T00:25:17.333
> 
> 标签：sql, sql-server

给定一张桌子

```
{ID, Code, OffSet, Amount},
{1, 1, 1, .30}
{2, 1, 2, .45}
{3, 1, 3, .50}
{4, 2, 1, .26} 
```

如果我知道确切的偏移量，我可以很容易地查询。但是如果偏移量不包含在表中怎么办？如何通过连接获取查询以返回给定代码的最后一条有效记录？

例如，如果我的查询包含 code = 1 和 offset = 4，它应该从 ID 为 3 的 Record 返回 Amount of .50

```
SELECT T1.Account, T2.Amount
  FROM Table1 T1
  LEFT JOIN Table2 T2 on T2.Code = T1.Code and T2.Offset = 4  --?? What goes here??
 WHERE T1.Account = 'ABCD' 
```

我正在使用 MSSQL 2008 R2。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T13:14:07.407

在这里，您的 ID 是唯一的，并假设插入新记录时它比现有 ID 多。

因此，您可以使用前 1 条记录轻松获取该记录并按 id desc 排序我正在使用您的查询来解决该问题

```
SELECT T1.Account, T2.Amount
  FROM Table1 T1
  LEFT JOIN Table2 T2 on T2.Code = T1.Code and T2.Offset = 4  
 WHERE T1.Account = 'ABCD' order by T1.Id desc Limit 1 
```

注意：top 在 sql server 中使用，limit 在 mysql 中使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T00:36:10.183

> 如何获取查询以返回给定代码的最后一条有效记录？

```
SELECT TOP 1 * FROM MyTbl WHERE Code = 1 AND OffSet <= 4 ORDER BY OffSet DESC 
```

假设该`ID`字段是自动递增的。

# java - JFrame中的错误

> ID：13888118
> 
> 赞同：1
> 
> 时间：2012-12-15T00:25:20.453
> 
> 标签：java, swing, jtable

我正在做一个项目，但我的框架有点问题，我的桌子有问题。

好吧，我有这个：

![我的框架](../Images/8764348d2b586e7276dc96a35dacf8b2.png)

上一张图片的来源是：

```
public class Geotools04 extends JFrame {
private JMapFrame mapFrame;
static StyleFactory styleFactory = CommonFactoryFinder.getStyleFactory(null);
static FilterFactory filterFactory = CommonFactoryFinder.getFilterFactory(null);

Geotools04(File[] files) throws IOException, CQLException {

        FileDataStore store = FileDataStoreFinder.getDataStore(files[0]);
        SimpleFeatureSource featureSource = store.getFeatureSource();

        Filter filter = CQL.toFilter("MAN_COD = '01'");
        SimpleFeatureCollection features = featureSource.getFeatures(filter);
        FeatureCollectionTableModel model = new FeatureCollectionTableModel(features);

        for(int i=0;i<model.getColumnCount();i++){
            System.out.println(model.getColumnName(i));
        }

        JFrame frame = new JFrame();

        JTable table = new JTable();

        frame.setLayout(new GridLayout(6, 2)) ;

        JLabel a = new JLabel("Capas existentes:");

        JComboBox layer = new JComboBox();
        for(int i=0; i < files.length ; i++){
            layer.addItem(files[i].getName());    
        }

        JLabel c = new JLabel("Atributos de capa:");

        JComboBox d = new JComboBox();
        d.addItem ("MAN_COD");

        JCheckBox e = new JCheckBox("Where");
        JTextField f = new JTextField("= '01'");
        JCheckBox g = new JCheckBox("Where igual");

        JTextField h = new JTextField("01");
        h.setEditable(false);

        JCheckBox i = new JCheckBox("Todos los registros");
        JButton j = new JButton("Consultar");

        frame.add(a);
        frame.add(layer);
        frame.add(c);
        frame.add(d);
        frame.add(e);
        frame.add(f);
        frame.add(g);
        frame.add(h);
        frame.add(i);
        frame.add(j);

        table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        table.setModel(new DefaultTableModel(5, 5));
        table.setPreferredScrollableViewportSize(new Dimension(500, 200));
        JScrollPane scrollPane = new JScrollPane(table);
        table.setModel(model);
        frame.add(scrollPane);

        frame.setSize(600, 600);
        frame.setVisible(true);
}
} 
```

但我需要我的框架看起来像这样：

![我的目标](../Images/9af2fd7635d876ff89b0395dee4a884f.png)

所以，你能帮我吗，我把所有东西都放在一个 GridLayout 中，但我需要最后一个表更大......但我不知道如何组织元素以按我想要的方式放置......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T00:56:43.307

试试这样：

1.  而不是直接添加组件`JFrame`创建单独`JPanel`并添加除`JScrollPane`（包含`JTable`）和“Salir”按钮之外的所有组件。

2.  为`BorderLayout`您的`JFrame`.

3.  设置`GridLayout`为`JPanel`添加组件并将其添加`JPanel`到`NORTH`of `JFrame`。

    ```
    frame.add(panel, BorderLayout.NORTH); 
    ```

4.  添加`JScrollPane`到`CENTER`您的`JFrame`

    ```
    frame.add(scrollPane, BorderLayout.CENTER); 
    ```

5.  您可以将“Salir”按钮直接添加到`SOUTH`框架中，也可以再创建一个`JPanel`添加“Salir”按钮，`JPanel`最后添加`JPanel`到`SOUTH`框架中：

    ```
    frame.add(salir, BorderLayout.SOUTH); 
    ```

    或者

    ```
    JPanel salirPanel = new JPanel();
    salirPanel.setLayout(new FlowLayout(FlowLayout.RIGHT,3,3));
    salirPanel.add(salirButton);
    frame.add(salirPanel); 
    ```

PS不要忘记调用`frame.pack();`而不是`frame.setSize();`调用之前的`frame.setVisible();`方法！

**编辑**

考虑为您的上层组件使用一些其他布局，例如[GridBagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html) 或[MiG Layout](http://www.miglayout.com/)而不是 GridLayout。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T00:47:58.653

我会尝试使用带有 GUI 编辑器的 NetBeans IDE。使用默认的免费设计布局而不是 GridBagLayout。

对于 eclipse 也应该有一个插件。

# java - 匹配时忽略 html 标记的正则表达式

> ID：13888123
> 
> 赞同：1
> 
> 时间：2012-12-15T00:26:14.063
> 
> 标签：java, regex

我有一个 java 程序，目前我正在使用正则表达式来替换 HTML 文档中的任何术语，并且工作正常。

```
Pattern p = Pattern.compile(links);
Matcher m = p.matcher(text);
RegexText = m.replaceAll("ReplacementString"); 
```

但是，如果单词被部分格式化为富文本标签，则不会匹配。例如。**测试**_

```
<b>tes</b>ting 
```

在这种情况下，单词“testing”不匹配，因为“tes”是粗体文本。

有什么方法可以替换被这样的标签破坏的单词。同样重要的是，我不会丢失单词上的富文本格式，因此仅剥离标签而不将它们插入回正确的位置不是一种选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T00:55:16.383

不幸的是，仅使用正则表达式无法可靠地将 HTML 匹配到这种程度。这是因为 HTML 是一种[上下文无关语言](http://en.wikipedia.org/wiki/Context-free_grammar)，而不是可使用正则表达式解析的[常规语言。](http://en.wikipedia.org/wiki/Regular_grammar)具体限制是正则表达式不能将开始 HTML 标记与结束标记相关联，它需要这样做才能在保持格式不变的情况下执行匹配。

考虑改用 HTML 解析器 - Java 有很多可用的选项。

# heroku - 在heroku中将jar依赖添加到JRuby on rails应用程序的方法是什么？

> ID：13888125
> 
> 赞同：3
> 
> 时间：2012-12-15T00:26:25.920
> 
> 标签：heroku, jar, jruby, jrubyonrails

我是 JRuby 新手，我正在尝试按照以下步骤在 Heroku 中进行部署： [https ://devcenter.heroku.com/articles/moving-an-existing-rails-app-to-run-on-jruby](https://devcenter.heroku.com/articles/moving-an-existing-rails-app-to-run-on-jruby)

但是我想不出添加jar依赖的方法。我正在使用 JFreeChart jar 和我自己的一个，我在我的 JRuby on Rails 应用程序中引用它们。

任何建议将被认真考虑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:17:48.193

简短的回答是，使用默认 Heroku 配置，您不能简单地添加自己的 jar。您可以通过构建一个带有 jar 的 gem 并在您的应用程序中使用它来解决此问题。

假设您在 lib 文件夹中有罐子。如果您尝试在您的应用程序上运行控制台：

```
heroku run console

irb(main):001:0> Dir["lib/*.jar"]
=> [] 
```

尽管您的存储库中提供了 jar，但您将在 Heroku 应用程序位置内找不到 jar。Heroku 似乎以排除 jar 的方式打包您的应用程序。

作为一种解决方法，我将 jar 提取到 gem 中，然后像往常一样在 Gemfile 中添加 gem。

一个合适的解决方案可能是在 Heroku 上创建一张票并要求他们修复 buildpack。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T04:20:32.643

我还没有尝试过，但是，将罐子放在 lib 目录中，然后

```
 require 'java'
    require 'lib/myjar.jar' 
```

# flot - 将数据作为变量传递时jQuery Flot数据的格式是什么

> ID：13888131
> 
> 赞同：1
> 
> 时间：2012-12-15T00:26:57.513
> 
> 标签：flot

我一直在尝试创建一个 jQuery Flot 饼图，但我无法让“数据”参数工作。我有 0..6 个值，总计应为 100(%)，这些值需要单独添加，一次添加一个标签值对。

我看到的所有示例都假设数据值是硬连接的，不幸的是这不是现实世界的工作方式。我需要一些真实世界的例子来说明如何构建 Flot 使用的标签 - 数据对。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:31:18.970

当我意识到数据应该采用 JSON 对象表示法时，我终于让它工作了。旧灯泡可能暗淡，但并非完全熄灭。这是代码：

```
function updatePieChart() {
    if ('#pieChart') {
        var total = 0;
        var data = new Array();
        var verb = "";
        var dataIndex = 0;
        var count = 0;

        for (var dataIndex = 0; dataIndex < 5; dataIndex++) {
            var duty = "DUTY_" + (dataIndex + 1);
            verb = getData(duty + "_SKILL");
            var d = getData(duty + "_PERCENTAGETIMESPENT");
            if (isNumeric(d)) {
                d = parseInt(d);
                if (d > 0) {
                    total += d;
                    if (verb == "") verb = duty + dataIndex;
                    var dataPoint = {
                        label: verb,
                        data: d
                    }
                    data[count++] = dataPoint;
                    log(dataPoint.label + ' = ' + dataPoint.data);
                }
            }
        }

        if (total != 100) {
            if (total < 100) {
                var missingDataNum = 100 - total;
                var dataPoint = {
                    label: '**MISSING**',
                    data: missingDataNum
                }
                data[count] = dataPoint;
                log(dataPoint.label + ' = ' + dataPoint.data);
            }
        }
        if ($.isFunction($.plot)) {
            log('Plot version: ' + $.plot.version);
            var pie = $.plot($('#pieChart'), data,
                {
                    series: {
                        pie: {
                            show: true,
                            label: {
                                show: true,
                                radius: 1,
                                formatter: function (label, series) {
                                    return '<div style="font-size:11px; text-align:center; padding:2px; color:black;">' + label + '<br />' + Math.round(series.percent) + '%</div>';
                                },
                                background: {
                                    opacity: 0.0
                                }
                            },
                            combine: {
                                color: '#999',
                                threshold: 0.05
                            }
                        }
                    },
                    legend: {
                        show: false,
                        labelFormatter: function (label, series) {
                            return '<b>' + label + '</b>';
                        }
                    }
                });
             }
        }
    }
} 
```

# google-chrome-extension - 使用现有站点身份验证的 Chrome 扩展身份验证

> ID：13888136
> 
> 赞同：3
> 
> 时间：2012-12-15T00:28:43.917
> 
> 标签：google-chrome-extension, forms-authentication

我正在开发一个 Chrome 插件，它需要访问托管在与我的网站相同的域上的 REST Web 服务。Web 服务要求用户登录。网站提供帐户注册和身份验证。我希望能够从插件访问网络服务，而无需用户在已经登录网站时再次从插件登录。我不知道该怎么做。我正在使用 ASP.NET MVC4 为网站提供的表单身份验证。当然，Chrome 插件使用 JavaScript 的 XMLHttpRequest 客户端来调用 Web 服务。

有很多插件可以做到这一点。“Delicious Bookmarks Extension”和“Add to Amazon.com Wishlist”就是几个例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T17:04:01.857

我没有找到按照我想要的方式做到这一点的方法。出于良好的安全原因，Chrome 不会将一个站点的 cookie 发送到另一个站点，即使其中一个“站点”在技术上只是一个 Chrome 扩展程序。

我最终将需要身份验证的插件部分转换为已登录网站提供的 iframe。这允许 Chrome 在请求 iframe 源时发送 cookie。这就是 Delicious 和 Amazon.com 插件的工作方式。扩展中几乎没有运行代码，它主要由 iframe 中的页面提供。

# c# - 循环遍历作为参数传递给某个方法的变量

> ID：13888137
> 
> 赞同：0
> 
> 时间：2012-12-15T00:28:56.200
> 
> 标签：c#, parameter-passing, string-comparison

这是我第一次使用这种动作......使用带有方法和类似东西的循环。

我希望能够遍历传递给的所有参数`ExcludeUsers()`

说我有几个字符串类型的值，

```
string user1 = "Anna";
string user2 = "Brenda";
string user3 = "John";
string user4 = "Warren";

      public bool ExcludeUsers(string OmittedUser1, string OmittedUser2, string OmittedUser3)
      {
          string userName = "John";

          //  i want to loop through all parameters passed in ...
          //  something like this 
          foreach (string param in params)
          {
              if(userName ==  param)
                return false;
          }
          return true;
     } 
```

然后我希望能够使用

```
if(ExcludeUsers(user1, user2, user3))
//do some work 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T00:30:48.550

将方法的签名更改为：

```
public bool ExcludeUsers(params string[] omittedUsers) 
```

然后通过`foreach`循环迭代参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T00:34:28.957

那么你应该将它作为 OmittedUsers[] 传递，而`Array`不是`string`值

```
public bool ExcludeUsers(string[] OmittedUsers)
{
          string userName = "John";

          bool ConditionMet = true;

              foreach (string userToOmmit in OmittedUsers)
              {
                  ConditionMet =  string.Compare(userName, userToOmmit) == 0;

                          if (ConditionMet)
                          return false;
              }

    return ConditionMet;
} 
```

然后你可能想像这样使用它：

```
if(ExcludeUsers(new string[]
                           {
                                user1,
                                user2,
                                user3,
                                user4
                           }
               )
  )
{

//do some work here...

} 
```

您还想考虑`string`您尝试比较的 s 是否也（可能）有大写字母，

所以你应该`.ToLower()`在一般比较字符串值时使用..

虽然这真的取决于字符串是否应该区分大小写。

例如

如果场景是“abc”有效为“ABC”或“Abc”（意味着您的**不**`string`区分大小写）

 **那么你应该在这种情况下使用：

```
//when "abc" = "ABC" is valid (case Insensitive)
ConditionMet =  string.Compare(userName.ToLower(), userToOmmit.ToLower())== 0; 
```

如果字符串值应该区分大小写：

```
//if the string "abc" = "Abc" is NOT the same for you, then
ConditionMet =  string.Compare(userName, userToOmmit) == 0; 
```

在您的情况下，在我看来，用户名**区分**大小写

...所以你知道你的选择。**

# android - Android 亚马逊应用内计费 - 验证/确认许可证

> ID：13888140
> 
> 赞同：0
> 
> 时间：2012-12-15T00:29:10.963
> 
> 标签：android, amazon, billing

我有一个相当简单的应用内购买设置——他的用户可以购买一次性许可证来禁用广告，仅此而已，没有订阅，没有消耗品——只是他们永久保留的一次性许可证。

显然，我希望在卸载/重新安装后永远包含在内 - 最新的 Google Billing (v3) 能够在启动时检查许可证是否存在，从而在卸载后刷新许可证（实际上，在之后取消它退款）但亚马逊似乎不支持任何重新查询购买状态！？

我能找到的唯一方法是重新购买——此时它会说“哦，你已经买了这个”，我可以拿起它并把许可证还给他们——但这不是自动的，他们必须'再次购买它以发现他们拥有它并且它永远不会知道退款......

是否有人使用过 Amazon Billing API 足以了解这是否可行？文档 - 坦率地说 - 很差（而且经常过时），论坛是鬼城，当他们回复时，往往没有帮助 - 他们自己的例子非常基础，根本没有这样做。 ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T00:36:56.323

根据这个网站，[https://developer.amazon.com/sdk/in-app-purchasing/documentation/developer-guide.html](https://developer.amazon.com/sdk/in-app-purchasing/documentation/developer-guide.html)，似乎你必须打电话`initiatePurchaseUpdatesRequest`，然后 `onPurchaseUpdatesResponse(PurchaseUpdatesResponse purchaseUpdatesResponse)`又会被打电话。purchaseupdatesresponse 中的信息应该有你需要的

# c# - 如何/资源来了解如何在 C# 中制作自定义控件

> ID：13888146
> 
> 赞同：3
> 
> 时间：2012-12-15T00:29:40.513
> 
> 标签：c#, .net, custom-controls, windows-phone-8

我想知道如何为应用程序制作自定义控件。到目前为止，我所知道的只是如何利用 Visual Studio 提供的控件（即组合框、按钮等）。那么我该如何超越呢？（我主要为 Windows Phone 8 开发）

以下面这张截图中的齿轮量规为例：

![平板电脑](../Images/6923db5d04e556d62d1f6dd5f1f89141.png)

继续这个例子，我该怎么做？在 OOP 术语中，这只是创建一个“仪表”类并使其继承自控件类并让图像成为仪表的问题吗？有什么好的资源来学习如何去做？

PS - 我知道这个例子显然是一个 iOS 应用程序，我正在使用 .NET 框架进行开发，我只是认为它说明了我想要问的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T00:42:42.803

首先，您是要为 Windows 窗体还是 WPF 开发自定义控件？这两种方案都提供了可以继承的基本 Control 类。我发现 WPF 更加通用，因为它可以很容易地将表示逻辑与业务逻辑分开。此外，WPF 的核心将负责控件的呈现，而 WinForms 则需要您处理绘画。

关于如何创建自定义用户控件的资源有很多，甚至是免费的。我建议您关注我提到的两种环境之间的差异，选择最适合您的环境，然后尝试一个简单的教程，了解如何制作像按钮一样的自定义控件。

# jquery - 如何让 div 滚动到具有特定类的下一个 div？

> ID：13888149
> 
> 赞同：-1
> 
> 时间：2012-12-15T00:30:11.280
> 
> 标签：jquery, scroll, find, scrollto, next

好的，我有这个代码：

```
$(document).ajaxComplete(function(){
            var a = $('.pipeHolder').height();
            var b = $('.container').first('#pip').height();
            var c = 0;  
            $("#scrollup").click(function() {
                scr = "-=600"
                $(".container").animate({
                    scrollTop: scr
                });
            });
            $("#scrolldown").click(function() {
                var scr = a+b+c;

                $('.container').animate({
                    scrollTop: scr
                      }, {
                        complete: function () {
                            a = 0
                            b = $('.container').children().next('#pip').height();
                            c = scr;
                            alert(b);

                        }
                      });

            });
}) 
```

我在具有类名“.pipeholder”的内容 div 中有多个 div。我想要发生的是，当您单击一个按钮时，它只会移动到页面下方的下一个按钮并停在最后一个按钮。

HTML：

```
 <div class="pipeHolder">
                <div class="pipeBottom">
                    <img class="pipe4" src="img/pipesBlue.png" alt="" />
                </div>
            </div>

            <div class="modLeft">

                <div class="project">
                    <div class="projectInfo"> 
                        <h1>Business Growth Enterprises</h1>           
                        <p>Technologies for this project:</p>
                            <ul>
                                <li>Adobe Creative Suite CS6</li>
                                <li>XHTML</li>
                                <li>CSS</li>
                                <li>JavaScript</li>
                                <li>JQuery</li>
                            </ul><br />
                    </div>
                    <div class="projectPic">            
                        <img src="scrn/bge1.jpg" width="300" height="250" class="" alt="" />
                        <div class="screenshots">

                        <a class="fancybox" href="img/bgeSS1.jpg" data-fancybox-group="gallery13" title="Business Growth Enterprises Home Page">111111111111111111111111111</a>

                        <a class="fancybox" href="img/bgeSS2.jpg" data-fancybox-group="gallery13" title="Profile Page">111111111111111111111111111</a>

                        <a class="fancybox" href="img/bgeSS3.jpg" data-fancybox-group="gallery13" title="Lightbox Form Submission">111111111111111111111111111</a>

                        </div>
                        <div class="liveSite" id="extLink"><a href="http://www.bizgrow.net" target="_blank" title="View Business Growth Enterprise's Live Website">View-Business-Growth-Enterprise's-Live-Website</a></div>
                    </div>
                    <div class="projectDesc">
                        <h1>Website Design and Development</h1>
                        <p>Another personal client of mine. This is a Business Development Consultant for legal Shield who wanted a personal website. She needed to have it where people could sign up for seminars that she put on at random places in Atlanta. also have a bio and information about her partners.</p>
                    </div>
                    <div class="clr"></div>
                </div>

            </div>

<!------------------------------------------ Project 14 - Pipe Right to Left -->

            <div class="pipeHolder">
                <div class="pipeLeft">
                    <img class="pipe3" src="img/pipesBlue.png" alt="" />
                </div>
            </div>

            <div class="modRight">

                <div class="project">
                    <div class="projectInfo"> 
                        <h1>Avoid Foreclosure Atlanta</h1>           
                        <p>Technologies for this project:</p>
                            <ul>
                                <li>Adobe Creative Suite CS6</li>
                                <li>XHTML</li>
                                <li>CSS3</li>
                                <li>JavaScript</li>
                                <li>JQuery</li>
                                <li>SharePoint</li>
                                <li>DreamWeaver Templates</li>
                                <li>Server Side Includes</li>
                            </ul><br />
                    </div>
                    <div class="projectPic">            
                        <img src="scrn/af1.jpg" width="300" height="250" class="" alt="" />
                        <div class="screenshots">

                        <a class="fancybox" href="img/placeHolder.jpg" data-fancybox-group="gallery" title="1">111111111111111111111111111</a>

                        <a class="fancybox" href="img/placeHolder.jpg" data-fancybox-group="gallery" title="2">111111111111111111111111111</a>

                        <a class="fancybox" href="img/placeHolder.jpg" data-fancybox-group="gallery" title="3">111111111111111111111111111</a>

                        <a class="fancybox" href="img/placeHolder.jpg" data-fancybox-group="gallery" title="4">111111111111111111111111111</a>

                        </div>
                        <div class="liveSite" id="extLink"></div>
                    </div>
                    <div class="projectDesc">
                        <p></p>
                        <p></p>
                    </div>
                    <div class="clr"></div>
                </div>

            </div>

<!------------------------------------------ Project 15 - Pipe Left to Right -->

            <div class="pipeHolder">
                <div class="pipeBottom">
                    <img class="pipe4" src="img/pipesBlue.png" alt="" />
                </div>
            </div>

            <div class="modLeft">

                <div class="project">
                    <div class="projectInfo"> 
                        <h1>Models Finder</h1>           
                        <p>Technologies for this project:</p>
                            <ul>
                                <li>Adobe Creative Suite CS6</li>
                                <li>XHTML</li>
                                <li>CSS3</li>
                                <li>JavaScript</li>
                                <li>JQuery</li>
                                <li>SharePoint</li>
                                <li>DreamWeaver Templates</li>
                                <li>Server Side Includes</li>
                            </ul><br />
                    </div>
                    <div class="projectPic">            
                        <img src="scrn/mf1.jpg" width="300" height="250" class="" alt="" />
                        <div class="screenshots">

                        <a class="fancybox" href="img/placeHolder.jpg" data-fancybox-group="gallery" title="1">111111111111111111111111111</a>

                        <a class="fancybox" href="img/placeHolder.jpg" data-fancybox-group="gallery" title="2">111111111111111111111111111</a>

                        <a class="fancybox" href="img/placeHolder.jpg" data-fancybox-group="gallery" title="3">111111111111111111111111111</a>

                        <a class="fancybox" href="img/placeHolder.jpg" data-fancybox-group="gallery" title="4">111111111111111111111111111</a>

                        </div>
                        <div class="liveSite" id="extLink"></div>
                    </div>
                    <div class="projectDesc">
                        <p></p>
                        <p></p>
                    </div>
                    <div class="clr"></div>
                </div>

            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T00:46:35.777

我想这就是你要找的。

```
 $(function(){
       $("#scrollup").click(function() {
         $(".container").stop().scrollTo( '+=600', 500 );
       });

       $("#scrolldown").click(function() {
         $(".container").stop().scrollTo( '-=600', 500 );
       });
    }); 
```

# directx-11 - 将 Direct2D 纹理转换为内存流会使应用程序崩溃

> ID：13888150
> 
> 赞同：1
> 
> 时间：2012-12-15T00:30:18.207
> 
> 标签：directx-11, easyhook

我正在尝试使用[Direct3DHook](https://github.com/spazzarama/Direct3DHook)库和[EasyHook来挂钩 Directx11](http://easyhook.codeplex.com/) [IDXGISwapChain.Present](http://msdn.microsoft.com/en-us/library/windows/desktop/bb174576%28v=vs.85%29.aspx)以获取屏幕截图。我猜 Direct3DHook 是为单个屏幕截图编写的，我正在尝试扩展它以获取屏幕截图流。在最初的几个屏幕截图之后，主机应用程序在随机渲染堆栈处获得异常。

我可以将错误隔离到文件 DXHookD3D11.cs 中的以下代码：

```
using (MemoryStream ms = new MemoryStream())
{
    // This line crashes the main program, removing this makes the program not crash               
    res = Texture2D.ToStream(textureDest.Device.ImmediateContext, textureDest, ImageFileFormat.Bmp, ms).Code;
    if (res != 0)
    {
        // this debugmessage never gets printed
        this.DebugMessage("PresentHook: ERror in Tostream " + res.ToString());
    }
    .......                                    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:34:25.960

我想我发现了错误。Direct3DHook 使用线程池来运行上面的代码。

```
ThreadPool.QueueUserWorkItem(delegate

                            {

                                
                               using (MemoryStream ms = new MemoryStream())

                                {

                                    Texture2D.ToStream(textureDest.Device.ImmediateContext, textureDest, ImageFileFormat.Bmp, ms);

                                    SendResponse(ms, requestId);

                                    this.DebugMessage("PresentHook: Send response time: " + (DateTime.Now - startSendResponse).ToString());

                                 }

                                 // Free the textureDest as we no longer need it.

                                textureDest.Dispose();

                                 textureDest = null;

                             }); 
```

但是 Texture.ToStream 调用需要是单线程的，因为它在内部可能会发出单线程的 GetRenderTarget 调用，如果两个调用异步启动，则会导致异常。我删除了 ThreadPool 调用，它工作正常。

# java - 使用 GET 参数传递 和 在 JSF 中

> ID：13888155
> 
> 赞同：1
> 
> 时间：2012-12-15T00:30:55.720
> 
> 标签：java, jsf

**已解决：**该问题是由**Visual Web**插件为**NetBeans**添加的库引起的。

我正在尝试使用以下代码测试通过支持 bean 将 GET 参数传递到同一页面：

```
<f:metadata>
        <f:viewParam name="link" value="#{testBean.link}"/>
 </f:metadata>
<h:body>
    <h:link value="Link 3" outcome="test" includeViewParams="true">
        <f:param name="link" value="3"/>
    </h:link>
    <h:outputText value="Parameter is #{testBean.link}"/>
    <h:outputText value="Param list: #{param}"/>

</h:body> 
```

*   第一个问题是呈现的链接标签没有预期的 url `test.xhtml?link=3`，但是`test.xhtml`.

*   第二个是我注意到即使我自己在浏览器中输入所需的 URL，`#{param}`表达式也会计算为预期的参数列表，但`testBean.setLink`不会被调用。

这是支持 bean 的代码：

```
@ManagedBean
@RequestScoped
public class TestBean implements Serializable {
    private String link = "";

    public String getLink() {
        return link;
    }

    public void setLink(String link) {
        this.link = link;
        System.out.println("LINK: " + link);
    }

} 
```

现在...我找到了一种通过添加`@ManagedProperty (value="#{param.link}")`到 bean 的字段（并`<f:metadata>`从 jsf 页面中删除该部分）来解决此问题的方法，但是从我在其他相关帖子中所读到的内容中，该`<f:viewParam>`方法应该也可以正常工作。

如果您对为什么会发生这些事情有任何想法，我将不胜感激……我已经花了足够的时间来解决像这样一个令人讨厌的问题:)

# ruby - Ruby：类实例化的快捷方式

> ID：13888159
> 
> 赞同：1
> 
> 时间：2012-12-15T00:32:02.823
> 
> 标签：ruby

是否可以为 Ruby 中的自定义类的实例化创建快捷方式？

例如，对于 Hash 的子类，如下所示：

```
class MyHash < Hash
  # some custom methods
end 
```

MyHash 实例可以像这样创建：

```
foo = MyHash[ :bar => 'baz' ] 
```

或者

```
foo = MyHash.new
foo[:bar] = 'baz' 
```

这很好，但我想知道是否有一种方法可以定义一个新的快捷方式，例如：

```
foo = my{ :bar => 'baz' } 
```

更新：

由于目标可能看起来不清楚，我在这里的主要考虑是了解 ruby​​ 如何在内部建立快捷方式（如`{}`and ）之间的链接`Hash.new`，以及是否可以创建新的快捷方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T02:38:30.557

```
class MyHash < Hash; end

module Kernel
  def my h; MyHash[h] end
end 
```

我认为您能做的最好的事情是使用括号而不是大括号，或者用括号将大括号括起来。

```
foo = my(bar: "baz") 
```

或者

```
foo = my({bar: "baz"}) 
```

不过，我不明白您的期望在什么意义上是捷径。我不认为`my{bar: "baz"}`（如果可能的话）或`my(bar: "baz")`短于`MyHash[bar: "baz"]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T02:30:42.927

您可以利用可以覆盖反引号运算符的事实来获得与您要求的解决方案有些相似的解决方案。但我真的不建议这样做:)

```
class MyHash < Hash
  def my_method
    # ...
  end
end

def `(hash)
  MyHash[eval(hash)]
end

foo = `{ :bar => "baz" }`
foo.respond_to? :my_method # => true 
```

语法高亮使代码看起来很糟糕，但事实并非如此。

# java - 键绑定不起作用

> ID：13888162
> 
> 赞同：2
> 
> 时间：2012-12-15T00:32:29.000
> 
> 标签：java, swing, key-bindings

我让 JButton 通过 ActionListener 执行一些操作。在我尝试使用 Action 绑定键盘快捷键后（在[此](https://stackoverflow.com/questions/4240740/shortcut-key-for-jbutton-without-using-alt-key)之后），鼠标单击按钮有效，但对键盘没有反应。

# 之前的代码

在面板中创建的按钮，添加了 actionListener。

```
private FooActionListener actionListener = new FooActionListener();

buttonLeft = new JButton("Left");
up.addActionListener(actionListener); 
```

然后，主类外的 FooActionListener 类中的 actionPerformed 方法：

```
public void actionPerformed(ActionEvent e) {
    Object source = e.getSource();
    if (source == buttonLeft) { thing.move(Direction.LEFT); }
} 
```

# 代码之后

```
final String leftText = "Left";
final Action left = new AbstractAction() {

    @Override
    public void actionPerformed(ActionEvent e) {
        thing.move(Direction.LEFT);
    }
};

buttonLeft = new JButton(left);
buttonLeft.setText(leftText);
KeyStroke keyLeft = KeyStroke.getKeyStroke(KeyEvent.VK_A, 0);
buttonLeft.getInputMap(buttonLeft.WHEN_IN_FOCUSED_WINDOW).put(keyLeft,
    "Left");
buttonLeft.getActionMap().put("Left", left ); 
```

**更新：**我不太确定新代码是否真的可以用鼠标执行。假设对象应该一键移动 25 个像素，并且在原始代码中是这样。但是对于新动作，它似乎每次点击移动两次甚至三次，这表明一个动作的一些奇怪的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T00:54:53.293

该按钮可能正在吸收您的映射，但是，我会稍有不同。

因为您已经`Action`（正确地）使用了，所以您的移动逻辑已经大部分集中化了。

我只是将映射应用到主容器。

```
public class TestKeybindings01 {

    public static void main(String[] args) {
        new TestKeybindings01();
    }

    public TestKeybindings01() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private JLabel label;
        private JButton left;
        private JButton right;

        public TestPane() {

            label = new JLabel("Make a choice");
            label.setHorizontalAlignment(JLabel.CENTER);

            LeftAction leftAction = new LeftAction(label);
            RightAction rightAction = new RightAction(label);

            InputMap im = getInputMap(WHEN_IN_FOCUSED_WINDOW);
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_A, 0), "left");
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_D, 0), "right");

            ActionMap am = getActionMap();
            am.put("left", leftAction);
            am.put("right", rightAction);

            left = new JButton(leftAction);
            right = new JButton(rightAction);

            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.gridwidth = 2;
            gbc.anchor = GridBagConstraints.CENTER;
            gbc.fill = GridBagConstraints.HORIZONTAL;
            add(label, gbc);

            gbc.gridy++;
            gbc.gridwidth = 1;
            add(left, gbc);
            gbc.gridx++;
            add(right, gbc);

        }

    }

    public abstract class AbstractDirectionAction extends AbstractAction {

        private JLabel label;

        public AbstractDirectionAction(JLabel label) {
            this.label = label;
        }

        public JLabel getLabel() {
            return label;
        }

        public void setDirection(String text) {
            getLabel().setText(text);
        }

    }

    public class LeftAction extends AbstractDirectionAction {

        public LeftAction(JLabel label) {
            super(label);
            putValue(NAME, "<<");
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            setDirection("Left");
        }

    }

    public class RightAction extends AbstractDirectionAction {

        public RightAction(JLabel label) {
            super(label);
            putValue(NAME, ">>");
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            setDirection("Right");
        }

    }

} 
```

# java - Ant 公然忽略 JAVA_HOME 环境变量

> ID：13888163
> 
> 赞同：4
> 
> 时间：2012-12-15T00:32:32.323
> 
> 标签：java, android, bash, ant, environment-variables

我刚刚拿起最新版本的 Android SDK 并开始尝试使用它。与提出这个问题的几乎所有其他人不同，我正在运行 Linux，即 Linux Mint 13。我目前正在尝试使用 ant 编译一个 Hello World 程序，通过安装

```
sudo apt-get install ant 
```

并在项目文件夹中运行：

```
ant debug 
```

但是，它完全无法编译，最终吐出一个与设置有关的错误`JAVA_HOME`。我`~/.bashrc`相应地修改了我的文件并重新启动，但我仍然收到错误：

```
Perhaps JAVA_HOME does not point to the JDK.
It is currently set to "/usr/lib/jvm/java-7-openjdk-amd64/jre"

Total time: 1 second
jamie@jamie-ThinkPad-E525 ~/Downloads/adt-bundle-linux/sdk/tools/projects/new $ echo $JAVA_HOME
/usr/java/jdk1.7.0_05/ 
```

正如你所看到的，它是通过它的牙齿撒谎。

我发现很多关于这个问题的参考资料，但大多数人要么错误地设置了他们的 JAVA_HOME，要么将其设置为 JRE。显然，我都没有做过。

我还修改了我的项目文件夹的`ant.properties`文件，添加了这一行

`java.home=/usr/java/jdk1.7.0_05/`

无济于事。

有没有其他人经历过/解决过这个问题，或者有什么想法？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T00:44:58.690

很有可能这`ant`是在说真话，并且没有设置环境变量。机会是：

*   您将错误的语句放入“.bashrc”文件中，或者
*   你没有*正确*重启。

无论如何，您可以通过`export`在运行命令之前在 shell 中运行来验证这一点`ant`……并查看是否`JAVA_HOME`列出了变量。

* * *

提示：

1）这是错误的：

```
JAVA_HOME=/usr/java/jdk1.7.0_05/ 
```

这只会创建一个本地 shell 变量，并且不会将本地 shell 变量传递给子进程（如`ant`命令）。它应该是：

```
export JAVA_HOME=/usr/java/jdk1.7.0_05/ 
```

2）尝试运行这个：

```
export JAVA_HOME=/usr/java/jdk1.7.0_05/
ant 
```

3）添加`java.home=/usr/java/jdk1.7.0_05/`到 ant.properties 将无济于事。Ant 需要环境变量中的设置。

4) 计算机程序不会说谎。他们说的是他们看到的真相。或者更准确地说，撒谎和说真话的整个概念是没有意义的，除非代理人有意图。但关键是，如果你开始怀疑计算机程序试图欺骗你，你将很难调试东西。

*（好吧，你是在开玩笑。但是许多面临故障排除问题的人采取了类似的非生产性方法；例如，假设每个棘手的 Java 问题都是编译器/语言/运行时损坏的证据。IMO - 值得提醒人们这种思考可能非常无用....）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T02:13:21.353

尝试：

```
$ ant -diagnostics | grep java\\.home 
```

如果这不是您所期望的，那么

```
$ JAVA_HOME=/path/to/jdk ant -diagnostics | grep java\\.home 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-16T14:02:05.367

我有一台装有 ant 1.9.1 的服务器。它需要一个环境变量 ANT_RESPECT_JAVA_HOME 集，否则它将公然忽略 JAVA_HOME 环境变量。在另一台装有 ant 1.9.6 的服务器上似乎并非如此。

因此，根据您的 ant 版本，您可能需要添加

```
export ANT_RESPECT_JAVA_HOME=true 
```

此外

```
export JAVA_HOME=/usr/java/jdk1.7.0_05/ 
```

希望这对某人有所帮助，因为我花了很长时间才发现...

# asp.net-mvc-3 - 编辑时出现奇怪的 TextBoxFor 映射问题

> ID：13888166
> 
> 赞同：1
> 
> 时间：2012-12-15T00:32:55.803
> 
> 标签：asp.net-mvc-3, entity-framework-4, model

当我编辑一个`Animal`项目时，我看到“ID”字段填充了“idAnimal”字段的值。通过作为参数传递的 id 从数据库中检索动物模型（使用 EF）。名为“id”的参数是数据库中名为“idAnimal”的键。

在控制器中调试，模型的值 OK（ID = null，idAnimal = some int）......并且在 Razor 视图中调试，我可以看到 using`@Model.ID`也是 null ......但是一旦视图被渲染我看到文本框中的值。

我的模型如下：

```
public class Animal
{
   public int idAnimal {get; set;}  //this is the id in database
   public int ID {get; set;}       //this is the id given at birth to the animal, a business concept 

   //The rest of the properties
} 
```

在我的控制器的 EDIT 操作中，我有：

```
public virtual ActionResult Edit(int id)
{
     Animal myA = db.Animals.Find(id);
     return PartialView(myA)
} 
```

在我看来：

```
@model MyApp.Model.Animal
    ....

    @Html.LabelForX(model => model.ID)
    <div class="input">
       @Html.TextBoxFor(model => model.ID, new { @class = "medium", size = 30 })
       @Html.ValidationMessageFor(model => model.ID)
    </div>

     .... 
```

奇怪的是，唯一可能发生的事情是名为“id”的参数（它保存字段“idAnimal”中的值）可能会干扰某些方式。

希望这所有的id汤都是可以理解的:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:47:51.510

尝试将 ID 属性更改为其他内容，例如 Tag。我怀疑有一个错误，model.ID 从模型中提取主键，而不是列 ID。

# php - 将 MySQL 中每一天的 INT 值相加

> ID：13888168
> 
> 赞同：0
> 
> 时间：2012-12-15T00:33:39.173
> 
> 标签：php, mysql

假设我的数据库中有这张表：

![在此处输入图像描述](../Images/634920c14586315132b6a2c380558bf8.png)

每个`time`都是 UNIX 时间戳，范围从 12 月 6 日到 12 月 14 日（今天）。有些行具有相同的日期但不同的时间（即：12 月 14 日晚上 8:39，12 月 14 日晚上 10:21）等。

但是，我正在尝试创建一个 mysql 查询，它将每天的所有`gained`积分相加。

我目前有一个`while`列表，该列表按排序顺序排列，`uid`因为`UID`它是`id`用户的。

这是我目前的`while`查询：

```
$get_statuses = mysql_query("SELECT * FROM `history` 
                             WHERE `uid` = '$logged[id]' 
                             ORDER BY `id` DESC LIMIT 50"); 
```

假设我`$fullDate = date("F j, Y", $status['4']);`对每个电流循环都使用它，因为我这样做了`while ($status = mysql_fetch_array($get_statuses)) {...}`，我该怎么做？

也许一个`SELECT(SUM)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T00:38:08.447

使用此查询。

```
SELECT Date(From_unixtime(`time`)) AS `Date`, 
       Sum(`gained`) 
FROM   `tbl` 
WHERE `uid` = '$logged_id'
GROUP  BY `Date` 
ORDER BY `id` DESC 
```

您可以在此处添加更多 where 条件。喜欢

```
From_unixtime(`time`) >= '2012-12-06' 
AND
From_unixtime(`time`) <= '2012-12-14' 
```

# parse-platform - parse.com request.object 和 request.params 的区别

> ID：13888171
> 
> 赞同：6
> 
> 时间：2012-12-15T00:34:19.913
> 
> 标签：parse-platform

我正在浏览 parse.com 教程，

[https://www.parse.com/docs/cloud_code_guide](https://www.parse.com/docs/cloud_code_guide)

它提到当我在做一些云代码时，我应该使用`request.params.someParam`

一切都很好，除了教程然后*立即*开始调用`request.object.get("someParam")`

request.object.get() 和 request.params.theParam 有什么区别？这个比那个好吗？这是我应该知道的标准 javascript 吗（我不知道 js 一大堆）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-15T01:37:42.030

它们是两个不同的概念。一个用于 Cloud Functions，另一个用于对象保存触发器。

*   `request.params`在 Cloud Functions 中用于访问 GET/POST 参数。

*   `request.object`在 beforeSave/afterSave 触发器中用于访问正在保存的对象。

# c++ - C++ 性能：模板与 boost.any

> ID：13888175
> 
> 赞同：5
> 
> 时间：2012-12-15T00:34:33.143
> 
> 标签：c++, templates, boost, boost-any

我想知道是否在任何可以使用模板的地方使用 boost.any（没有 RTTI）类会减慢程序的速度。由于 boost any 实际上是模板类的包装器，因此可以说使用现代编译器优化它会产生相同的效果，对吗？

## tpl_vs_any.hpp

```
#include <iostream>
#include <vector>

using namespace std;

template<class T> class tpl
{
    T content;
public:
    tpl(const T& value) : content(value) {}
    operator T() const
    {
        return content;
    }
};

class any
{
public:

    any() : content(0) {}

    any(const any& other) : content(other.content -> clone()) {}

    template<class T> any(const T& value) : content(new holder<T>(value))
    {
    }

    ~any() 
    {
        delete content;
    }

    class placeholder
    {
    public:
        placeholder() {}
        virtual placeholder* clone() const = 0;
    };

    template<class T> class holder : public placeholder
    {
    public:
        T content;

        holder(const T& value) : content(value) {}
        ~holder() {}

        placeholder* clone() const
        {
            return new holder<T>(content);
        }
    };

    template<class T> operator T () const
    {
        return dynamic_cast<holder<T>*>(content)->content;
    }

    placeholder* content;
};

template<class T> void test()
{
    for (int i = 0; i < 10000; ++i)
    {
        vector<T> a;
        a.push_back(23.23);
        a.push_back(3.14);

        double x = (double)a[0];
    }
} 
```

那么这样说是否正确：

```
test<any>(); 
```

完全一样快：

```
test<tpl<double>>(); 
```

假设您知道，就像编译器在第二个示例中所做的`boost::any`那样，在这种情况下仅用作 double 吗？（任何类都没有 RTTI）。

我更想知道支持和反对这个论点的论点。

此外，这些方法之间是否存在差异的特定情况？

**编辑：** 性能测试 2：

*   示例 1：1,966.57 毫秒
*   示例 2：1,320.37 毫秒

似乎有一个相对较大的差异。

**编辑2：** 由于将主要数据类型`double`与类进行比较是不公平的，因此`any`我进行了新测试：

```
#include "tpl_vs_any.hpp"

int main()
{
    test<any>();
    return 0;
} 
```

速度：1,794.54 毫秒

```
#include "tpl_vs_any.hpp"

int main()
{
    test<tpl<double>>();
    return 0;
} 
```

速度：1,715.57 毫秒

多次测试，几乎相同的基准。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T00:58:15.923

> 那么这样说是否正确：
> 
> ...
> 
> 完全一样快：
> 
> ...
> 
> 假设您知道，就像编译器在第二个示例中所做的那样， boost::any 在这种情况下仅用作双精度？

不，当前的编译器远远没有达到那种自省水平。`boost::any`会慢一些。

当然，您可以只运行代码并自己找出答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T01:15:39.673

`boost::any`内部保存一个指向对象的指针，它用`new`. `std::vector`比向量快得多的一件事`std::list`是，向量将其所有对象保存在单个分配中的连续存储中，除了显着减少内存分配开销之外，它对缓存也更加友好。

还有在分配中添加 RTTI 的细节，这通常是微不足道的开销，但对于非常小的类型，比如`double`显着增加存储开销。

`boost::any`不是标准的一部分；它是特定模板的特定实现。因此，您不妨对其进行基准测试；没有一堆其他竞争的“标准实现”。

# c# - 所有对象都应该解耦吗

> ID：13888178
> 
> 赞同：4
> 
> 时间：2012-12-15T00:34:57.217
> 
> 标签：c#, dependency-injection, decoupling

我有一个问题，我似乎无法在任何地方得到回答。这是关于将您的代码与接口解耦。问题是——是否应该将其他对象（正在创建和使用）中的所有对象重构为接口以遵循 SOLID 的依赖倒置原则？在均匀驱动的方法中新建对象怎么样？例如。当我按下按钮时调用的方法。对象是否应该通过构造函数传入？当然，这一切都适用于我的对象，而不适用于 BCL 对吧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T00:45:03.907

毫驼给出了很好的答案。它特别好，因为它是任何编程问题的正确答案:)

我想详细说明一下。在处理这样的场景时，以下条件成立：

1.  解耦需要付出自己的代价。
2.  没有代码是完美的，因为您可能不会有所有的时间来处理它。
3.  如果你的代码比它可能的耦合度更高，这不是世界末日。

因此，不要以全有或全无的命题来看待它，而应将其视为分数。你愿意忍受多少耦合？你愿意为脱钩付出多少？在某些时候，设计时间和感知的可维护性之间存在平衡——请记住，您甚至不知道您的代码将如何更改。

您是否听说过《基于事件的编程：将事件发挥到极致》一书？这都是关于耦合： http: [//books.google.com/books ?id=9CL446IzhuAC&pg=PR21&dq=taking+events+to+the+limit&hl=en&sa=X&ei=bcfLUMzRMcWLqgHi-oHoBw&ved=0CDUQ6wEwAA](http://books.google.com/books?id=9CL446IzhuAC&pg=PR21&dq=taking+events+to+the+limit&hl=en&sa=X&ei=bcfLUMzRMcWLqgHi-oHoBw&ved=0CDUQ6wEwAA)

作者声称你不能消除所有的耦合，但你可以转换它，耦合应该转移到更简单的类。也许你可以用它作为你努力的指南。

# php - 从 mysql php 请求加载数据

> ID：13888182
> 
> 赞同：0
> 
> 时间：2012-12-15T00:35:16.983
> 
> 标签：php, mysql, ajax, load

我需要按每个请求 50 行的限制请求数据并在搜索中找到。

这是我从 mysql 获取数据的函数：

```
 function index()
   {
      $data['message'] = (validation_errors()) ? validation_errors() : $this->session->flashdata('message');

      $this->load->library("pagination");

        $config = array();
        $config["base_url"] = base_url() . "products/index";
        $config["total_rows"] = $this->products_model->products_count();
        $config["per_page"] = ROWS_PER_PAGE;
        $config['num_links'] = 4;
        $config["uri_segment"] = 3;
        //$config['use_page_numbers'] = TRUE;
        $config['full_tag_open'] = '<div class="pagerSC">';
        $config['full_tag_close'] = '<div style="clear: left;"></div></div>';
        $config['cur_tag_open'] = '<span class="currentSC">';
        $config['cur_tag_close'] = '</span>';
        $config['prev_link'] = '&lt; Previous';
        $config['next_link'] = 'Next &gt;';

        $config['first_link'] = '&lt;&lt; First';
        $config['last_link'] = 'Last &gt;&gt;';

        $config['num_tag_open'] = '';
        $config['num_tag_close'] = '';
        $config['next_tag_open'] = '';
        $config['next_tag_close'] = '';
        $config['first_tag_close'] = '';
        $config['last_tag_open'] = '';

        $this->pagination->initialize($config);

        $page = ($this->uri->segment(3)) ? $this->uri->segment(3) : 0;
        $prods = $this->products_model->fetch_products($config["per_page"], $page);
        $data["links"] = $this->pagination->create_links();

        //$this->load->view("example1", $data);

      //$products = $this->products_model->getAllProducts();
      $warehouses = $this->products_model->getAllWarehouses();
      $warehouse = DEFAULT_WAREHOUSE;

      //if(!empty($products)) {
      foreach($prods as $product) {
      $id[] = $product->id;   
      $image[] = $product->image;   
      $code[] = $product->code;
      $name[] = $product->name;
      $size[] = $product->size;
      $cost[] = $product->cost;
      $price[] = $product->price;
      $qt = 0;
      foreach($warehouses as $house) {
          $warehouse_product = $this->products_model->getProductQuantity($product->id, $house->id);

                $qt += $warehouse_product['quantity'];

      }
      $quantity[] = $qt;
      $unit[] = $product->unit;
      $alert_quantity[] = $product->alert_quantity;
      }

      $keys = array("id","image","code","name","quantity","unit","size","cost","price","alert_quantity");

      $final = array();
      foreach ( array_map(null, $id, $image, $code, $name, $quantity, $unit, $size, $cost, $price, $alert_quantity) as $key => $value ) {
            $final[] = array_combine($keys, $value);
      }

      $data['rows'] = $final;
     // }
      $data['warehouses'] = $warehouses;
      $meta['page_title'] = $this->lang->line("products");
      $data['page_title'] = $this->lang->line("products");
      $this->load->view('commons/header', $meta);
      $this->load->view('content', $data);
      $this->load->view('commons/footer');
   } 
```

这是我的带有数据结果的 php，但都是来自 mysql 的数据，我需要像分页函数一样按需加载：

```
<table id="fileData" cellpadding=0 cellspacing=10 width="100%">
        <thead>
    <tr>
            <th style="width:45px;"><?php echo $this->lang->line("image"); ?></th>
            <th><?php echo $this->lang->line("product_code"); ?></th>
        <th><?php echo $this->lang->line("product_name"); ?></th>
        <th><?php echo $this->lang->line("quantity"); ?></th>
            <th><?php echo $this->lang->line("product_unit"); ?></th>
            <th><?php echo $this->lang->line("product_size"); ?></th>
        <th><?php echo $this->lang->line("product_cost"); ?></th>
         <th><?php echo $this->lang->line("product_price"); ?></th>
        <!-- <th><?php echo $this->lang->line("alert_quantity"); ?></th> -->
        <th style="width:45px;"><?php echo $this->lang->line("actions"); ?></th>
        </tr>
    </thead>
        <tbody>
        <?php foreach ($rows as $row):?>
            <tr>
            <td style="text-align:center;">
                <?php echo '<a class="ajax" href="uploads/' . $row['image'] .'"><img src="uploads/' . $row['image'] . '" alt="' . $row['image'] . '" width="24" height="24" /></a>'; ?></td>
                <td><?php echo $row['code']; ?></td>
            <td><?php echo $row['name']; ?></td>
            <td><?php echo $row['quantity']; ?></td>
            <td><?php echo $row['unit']; ?></td>
            <td><?php echo $row['size']; ?></td>
            <td><?php echo $row['cost']; ?></td>
            <td><?php echo $row['price']; ?></td>                
            </tr>
        <?php endforeach;?>
    </tbody>
    </table>
    <?php if($links) { echo $links; } else { echo "<div class=\"pagerSC\"></div>"; }?> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T17:11:17.177

由于您使用的是 MySQL，因此您可以使用[LIMIT 子句](http://dev.mysql.com/doc/refman/5.0/en/select.html)来获取结果。如链接页面所述：

> LIMIT 接受一个或两个数字参数，它们都必须是非负整数常量（使用准备好的语句时除外）。
> 
> 有两个参数，第一个参数指定要返回的第一行的偏移量，第二个参数指定要返回的最大行数。初始行的偏移量为 0（不是 1）：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T00:41:46.790

如果您需要获取 50 条记录，只需添加`LIMIT 50`到您的 SQL 查询的末尾（我在上面的代码中没有看到它）

# google-maps - 标记不会在点击时触发事件 - Google Maps Javascript API V3

> ID：13888184
> 
> 赞同：1
> 
> 时间：2012-12-15T00:35:27.543
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我有一个包含地图所有标记的数组。即使将 MarkerClusterer 与它们一起使用，我也可以毫不费力地将它们放在地图上。MarkerClusterer 的 addListener 工作得很好，但我只是无法让标记 addListener 触发事件。这是实际的代码：

```
function initializeMap(markerArray) {
var latlng = new google.maps.LatLng(0.0, 0.0);
var mapOptions = {
    zoom: 2,
    maxZoom: 21,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
}
map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

var length = markerArray.length,
    element = null;
for (var i = 0; i < length; i = i + 2) {
    var latlng = new google.maps.LatLng(markerArray[i],markerArray[i+1]);
    var marker = new google.maps.Marker({
        map: map,
        position: latlng,
        title:'Click to zoom'
    });
    markers.push(marker);
}

google.maps.event.addListener(marker, 'onclick', function() {
    alert("I have been clicked");
});

var markerCluster = new MarkerClusterer(map, markers);

google.maps.event.addListener(markerCluster, 'clusterclick', function(cluster) {
    alert("I have been clicked");
}); 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T00:46:22.717

您的最后一个标记上只有一个点击监听器（至少在您发布的代码中）。

[工作markerclusterer示例](http://www.geocodezip.com/v3_MW_example_map3_clustered.html)

# image - 未定义函数“conv2”，用于“double”类型的输入参数和“full 3d real”属性。- MATLAB

> ID：13888185
> 
> 赞同：7
> 
> 时间：2012-12-15T00:35:54.263
> 
> 标签：image, matlab

我正在尝试过滤空间域中的图像，所以我正在使用 conv2 函数。

这是我的代码。

```
cd /home/samuelpedro/Desktop/APIProject/

close all
clear all
clc

img = imread('coimbra_aerea.jpg');
%figure, imshow(img);

size_img = size(img);

gauss = fspecial('gaussian', [size_img(1) size_img(2)], 50);

%figure, surf(gauss), shading interp

img_double = im2double(img);

filter_g = conv2(gauss,img_double); 
```

我得到了错误：

```
Undefined function 'conv2' for input arguments of type 'double' and attributes 'full 3d
real'.

Error in test (line 18)
filter_g = conv2(gauss,img_double); 
```

现在我想知道，我不能使用 3 通道图像，即彩色图像。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-15T01:38:48.363

彩色图像是 3 维数组 (x,y,color)。 `conv2`仅针对 2 维定义，因此不能直接在 3 维数组上工作。

三个选项：

*   使用 n 维卷积，`convn()`

*   使用 转换为灰度图像`rgb2gray()`，并在 2D 中过滤：

    `filter_g = conv2(gauss,rgb2gray(img_double));`

*   在 2D 中分别过滤每种颜色 (RGB)：

    ```
    filter_g = zeros(size(im_double));
    for i = 1:3
      filter_g(:,:,i) = conv2(gauss, im_double(:,:,i);
    end 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T01:13:46.550

对于 nD 输入，您需要使用`convn`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-06T02:18:31.167

如果你有 R2015a 或更新版本，IPT 函数 imgaussfilt 处理这样的多平面二维卷积问题，只需传入你的 RGB 图像。

[http://www.mathworks.com/help/images/ref/imgaussfilt.html](http://www.mathworks.com/help/images/ref/imgaussfilt.html)

如果不这样做，imfilter 还会执行多平面 2-d 卷积。

对于高斯滤波器来说，两者都会更快，他们都知道如何为你做可分离的技巧。

# c++ - 读取注册表值并连接

> ID：13888186
> 
> 赞同：0
> 
> 时间：2012-12-15T00:36:00.913
> 
> 标签：c++, windows, string, registry, concatenation

在 C++ 中，读取注册表字符串值并将其与现有字符串连接的更简单方法是什么？

示例：阅读 HKCU\Software\Classes.wav 的（默认）

将其与“HKCU\Software\Classes\”连接以获得新的 LPWSTR？

谢谢！

# javascript - 如何将谷歌地图中的标记向下移动 5px？

> ID：13888190
> 
> 赞同：0
> 
> 时间：2012-12-15T00:36:24.697
> 
> 标签：javascript, google-maps-api-3, primefaces-gmap

我有一个简单的问题，也许有人知道是否有可能将谷歌地图中的所有标记向左或向右移动或其他什么？如果有人知道我如何拥有简单的代码：

```
(function() {PrimeFaces.cw('GMap','widget_j_idt21',{
        id:'j_idt21',
        mapTypeId:google.maps.MapTypeId.ROADMAP,
        center:new google.maps.LatLng(51.735512733,19.49804157),
        zoom:14,
        fitBounds:false
    });
}); 
```

为了更好地理解我过去的图像，我想在地图上从圆圈中间开始排列

![在此处输入图像描述](../Images/0e9d98b5fa1d3e0479f6a36e5441195a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T01:07:46.203

您需要定义一个自定义图标并用于`iconAnchor`指定偏移量...

```
var Icon = new GIcon();
    Icon.image = "icon.png";
    Icon.iconSize = new GSize(24, 24);
    Icon.iconAnchor = new GPoint(0, 5);
    Icon.infoWindowAnchor = new GPoint(5, 2); 
```

# html - 带有 html/css 的菜单栏

> ID：13888191
> 
> 赞同：2
> 
> 时间：2012-12-15T00:36:37.103
> 
> 标签：html, css

我想制作一个带有列表和研究栏的水平条，两者都用边距分隔（我只是不希望它们彼此相邻）。我希望所有的条都是一种颜色（在我的例子中它是蓝色的，但我不在乎它只是尝试）。但是，当我尝试添加边距或填充时，颜色会消失。我很确定这不是正确的方法。如果有人也可以告诉我如何摆脱酒吧上方的小白色层，那就太好了。我希望颜色从页面的最顶部开始。

谢谢你的帮助（我知道我不擅长编码）。

这是代码：

```
<html>

<head>
    <style>
        #bar {
            background-color: blue;
        }
        #menu ul li {
            display: inline;
            float: left;
        }
        #form {
            padding-left: 30px;
        }
    </style>
</head>

<body>
    <div id="bar">

        <div id="menu">
            <ul>
                <li id="current"><a href="index.html">Home</a>
                </li>
                <li><a href="index.html">Archives</a>
                </li>
                <li><a href="index.html">Profile</a>
                </li>
                <li><a href="index.html">Followers</a>
                </li>
                <li><a href="index.html">Support</a>
                </li>
            </ul>
        </div>

        <div id="form">
            <form method="get" action="http://www.google.com/custom">
                <input name="q" size="25" maxlength="255" value="" type="text" />
                <input name="sa" value="search" type="submit" />
                <input name="cof" value="" type="hidden" />
            </form>
        </div>
    </div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-17T18:49:20.093

你可以试试这个：

```
* {
    margin: 0;
    padding: 0;
}

#bar {
    background-color: blue;
}
#menu ul li {
    display: inline;
    float: left;
    padding: 0 10px 0 10px;
}
a {
    color: white;
}

#form {
    padding-left: 30px;
}
```

```
<div id="bar">
    <div id="menu">
        <ul>
            <li id="current"><a href="index.html">Home</a>

            </li>
            <li><a href="index.html">Archives</a>

            </li>
            <li><a href="index.html">Profile</a>

            </li>
            <li><a href="index.html">Followers</a>

            </li>
            <li><a href="index.html">Support</a>

            </li>
        </ul>
    </div>
    <div id="form">
        <form method="get" action="http://www.google.com/custom">
            <input name="q" size="25" maxlength="255" value="" type="text" />
            <input name="sa" value="search" type="submit" />
            <input name="cof" value="" type="hidden" />
        </form>
    </div>
</div>
```

要删除“页面顶部的额外空白”，您可以使用 css 全局选择器并将and`*`设置为 0(`padding``margin`[重置所有边距和填充](http://css-tricks.com/reset-all-margins-padding/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T10:41:48.477

也许像这样？

## 小提琴：http: [//jsfiddle.net/ujfLc/](http://jsfiddle.net/ujfLc/)

===== **HTML** =====

```
<div id="bar" class="clearfix">
    <div id="menu">
        <ul class="clearfix">
            <li id="current"><a href="index.html">Home</a></li>
            <li><a href="index.html">Archives</a></li>
            <li><a href="index.html">Profile</a></li>
            <li><a href="index.html">Followers</a></li>
            <li><a href="index.html">Support</a></li>
        </ul>
    </div>

    <div id="form">
        <form method="get" action="http://www.google.com/custom">
            <input name="q" size="25" maxlength="255" value="" type="text" />
            <input name="sa" value="search" type="submit" />
            <input name="cof" value="" type="hidden" />
        </form>
    </div>   
</div> 
```

===== **CSS** =====

```
*, *:before, *:after {
  -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box;
 }

.clearfix:before, .clearfix:after {
    content: " ";
    display: table;
}

.clearfix:after {
    clear: both;
}

.clearfix {
    *zoom: 1;
}

#bar {
    background-color: black;
    padding: 10px;
}

#menu {
    float: left;
}

#menu ul {
    display: inline;
    list-style-type: none;
    padding:0;
    margin:0;
}

#menu ul li {
    list-style-type: none;
    float:left;
    padding: 0 10px;
}

#menu ul li a {
    color: white;
    text-decoration: none;
}

#form {
    float:right;
    padding-left: 30px;

} 
```

=====**截图**=====

![在此处输入图像描述](../Images/7293a192eef22005916c944afaac8657.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T07:05:17.247

您可能想使用 reset.css 来摆脱空格...您可以在互联网上搜索文件或复制这些代码..

```
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
margin: 0;
padding: 0;
border: 0;
font-size: 100%;
font: inherit;
vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
display: block;
}
body {
line-height: 1;
}
ol, ul {
list-style: none;
}
blockquote, q {
quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
content: '';
content: none;
}
table {
border-collapse: collapse;
border-spacing: 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T02:33:21.860

在您的代码中正确使用浮点数并清除浮点数是缺失的。这可能会帮助您：

```
#bar {background: red; width: 100%;}
#menu {float: left;}
#menu ul {list-style-type:none;}
#menu li {display: inline-block;}

#form {float: right;}

.clearfix:after {
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
}

.clearfix {
    display: inline-block;
}

html[xmlns] .clearfix {
    display: block;
}

* html .clearfix {
    height: 1%;
} 
```

[http://jsfiddle.net/eHnn5/9/](http://jsfiddle.net/eHnn5/9/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-20T01:15:12.300

您的栏需要清除：两者，因此链接为其提供了适当的高度，您应该看到背景颜色

# javascript - 用下拉菜单覆盖 CSS

> ID：13888194
> 
> 赞同：1
> 
> 时间：2012-12-15T00:37:39.873
> 
> 标签：javascript, html, css

我希望仅在下拉菜单不等于排名或选择位置时才使用 CSS 覆盖值 #bigbox 和 #bigbox-window ...

这是我的第一篇文章，请原谅任何格式错误！谢谢！

```
<html>
  <style>
    #bigbox { height:680px; }
    #bigbox-window { height:680px; }
  </style>      
  <script language="javascript" type="text/javascript">

    function setIframeSource() { 
      var theSelect = document.getElementById('location');
      var theIframe = document.getElementById('myIframe');
      var theUrl;

      theUrl = theSelect.options[theSelect.selectedIndex].value;
      theIframe.src = theUrl;
    }

  </script>
  <body>
    <div class="page page-pick_em">
      <h1>College Hockey Pick 'Em League</h1>
      <form id="form1" method="post">
        <label>
          <select id="location" onchange="setIframeSource()"> 
            <option value="">Select a location ...</option> 
            <option value="page/pick_em/standings.html">Standings</option> 
            <option value="page/pick_em/week01.html">Week 01</option> 
            <option value="page/pick_em/week02.html">Week 02</option> 
          </select>
        </label>
      </form>
      <iframe SRC="page/pick_em/standings.html" width="100%" height="80%" id="myIframe" marginheight="0" frameborder="0" onLoad="autoResize('myIframe');"></iframe>
    </div>
  </body>
<html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T00:58:25.330

好吧，当下拉列表不是您在问题中指定的选项时，这会更改 CSS。

由于我不知道您在哪里使用`bigbox`and `bigbox-window`，以及您想在这些样式中更改什么，请按照我的示例进行调整以适应您的需求。

看到这个[小提琴](http://jsfiddle.net/fabio_silva/2Ew2M/1)

```
theOptText = theSelect.options[theSelect.selectedIndex].text;
if ((theOptText != "Select a location ...") && (theOptText != "Standings"))
{
    document.getElementById("bigbox").style.borderColor = "#f00";
} 
```

# ajax - dojo/request Ajax 错误数据

> ID：13888195
> 
> 赞同：0
> 
> 时间：2012-12-15T00:37:40.560
> 
> 标签：ajax, dojo

> **可能重复：**
> [如何检索 AMD 化 Dojo 的 XHR 响应代码（+时间戳）？](https://stackoverflow.com/questions/12154748/how-to-retreive-xhr-response-code-timestamp-of-amdized-dojo)

使用 dojo/request 进行 Ajax 调用时，有没有办法在错误回调中访问响应数据？错误响应数据通常包含格式化的调试信息，这些信息对显示非常有用。

我相信这曾经可以通过 Dojo 的 XHRget 和它的“处理程序”回调来实现。

# javascript - 获取一个 asp 单选按钮列表以通过 jquery 触发其 TextChanged 事件？

> ID：13888198
> 
> 赞同：2
> 
> 时间：2012-12-15T00:38:45.710
> 
> 标签：javascript, jquery, asp.net, radiobuttonlist, textchanged

我不明白为什么在使用 jquery 更改其值后无法在回发时触发 TextChanged 事件。

我的意思是我的网页上有一个 asp radiobuttionlist。它似乎有一个用于单选按钮的 TextChanged 事件。

假设我的单选按钮被称为 rblTest，如下所示：

```
<asp:RadioButtonList runat="server" ID="rblTest" ClientIDMode="Static" 
  OnTextChanged="rblTest_TextChanged"></asp:RadioButtonList> 
```

并且“背后的代码”是这样设置的：

```
protected void rblTest_TextChanged(object sender, EventArgs e)
{
    Response.Write("Yay it fired TextChanged Event");
} 
```

非常简单的测试，但我实际上希望它在放入一些代码之前触发。

* * *

但后来我尝试实际更改一些单选按钮项目的文本，如下所示：

```
 $('#rblTest_0').val("inputchanged");
        $("label[for='rblTest_0']").html("thislabelisalsochanged"); 
```

这有效（视觉上） - 我可以看到我的单选按钮列表上第一项的值发生变化，并且一切正常。

但是，当进行回发时，它不会触发 TextChanged 事件......无论我做什么。

* * *

那么是否不可能使用 jquery/javascript 在单选按钮列表上触发 TextChanged 事件？

如果我对文本框做同样的事情，这将起作用。

希望你们能解释我做错了什么或/以及为什么这是不可能的！

注意：只是试图让它在 rblTest 回发后打印出文本：

```
rblTest.Items[0].Text 
```

它只是给了我它的原始价值，而不是我改变它的价值。所以也许它只是不可能通过客户端更改文本，只能通过服务器端代码......或者是吗？也许你们中的一个人有一些想法......任何建议或想法都会有所帮助:)

提前谢谢:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T22:00:47.860

尝试模拟用户对您的 rbs 的点击。类似的东西

$('#rb').trigger('click');

[更多关于“触发器”的信息。](http://api.jquery.com/trigger/)

请注意， rb - 是您的单选按钮 () 元素，而不是标签。

# c# - Windows Phone - Web 客户端请求未执行

> ID：13888199
> 
> 赞同：1
> 
> 时间：2012-12-15T00:38:48.950
> 
> 标签：c#, windows-phone-7, windows-phone, windows-phone-8

/* 在写这个问题和测试东西时，我设法回答了这个问题，我正在分享我的发现，以便它们对其他一些可怜的灵魂有所帮助。请看下面的答案。*/

我正在尝试在后台任务中从我的 API 中获取 JSON 数据。我的后台任务很好并且正在运行，但是当我尝试获取数据时，什么也没发生？！？

这是我使用的代码：

```
 protected override void OnInvoke(ScheduledTask task)
    {

        string wurl = @"http://test.com/api/stuff/getdata";

        WebClient webClient = new WebClient();
        webClient.DownloadStringCompleted += new DownloadStringCompletedEventHandler(webClient_DownloadStringCompleted);
        webClient.DownloadStringAsync(new Uri(wurl));

        NotifyComplete();

    } 
```

仅此而已……`webClient_DownloadStringCompleted`永远不会被处决。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T00:38:48.950

这里的关键是***异步***`WebClient`执行其方法并在有机会获取数据 之前执行。*`NotifyComplete()``WebClient`*

 *当您调用 时`NotifyComplete()`，它会通知操作系统您已完成执行任务并且系统应该终止它。

`NotifyComplete()`解决方案是在 async 方法的末尾移动`webClient_DownloadStringCompleted`（在这种情况下），然后......哇！

***警告 1：***您有最多 25 秒的时间来完成您正在做的任何事情，否则任务将被终止。

***警告 2：***您的后台任务不能消耗超过（在某些手机上）6 MB（在我用 windows phone 8 测试的模拟器上）10 MB 内存！如果您的后台任务执行，它将被终止。

如果您的应用程序要消耗更多内存和时间（最多 10 分钟），最好考虑使用资源密集型后台任务，请注意这种类型的任务仅在手机充电时可用！*

# mysql - 如何根据mysql表中的existind数据对插入的行进行计算

> ID：13888203
> 
> 赞同：1
> 
> 时间：2012-12-15T00:39:15.610
> 
> 标签：mysql

下面是生成所需基本价格值的初始表创建查询 - 这不是问题并且工作正常。

```
CREATE TABLE Tablebaseprice
SELECT    @PrevBasePrice := CASE
            WHEN @prevITS = st.its AND st.ppc IS NOT NULL THEN
              round(((1+st.ppc)*@prevBaseprice),3)
            ELSE 100
          END Baseprice,
          st.Date AS Date,
          @prevITS := st.its its,
          st.PPC
FROM      stemp st
ORDER BY  st.its, st.date; 
```

但是当我将新行插入现有表时，我一直在弄清楚如何计算 Baseprice。Baseprice 的计算方法是将任何给定 ITS 的最后一行或前一行的 baseprice (prevBaseprice) 乘以 (1+ppc) - 所以我需要能够提取现有表中任何 ITS 的最后一个 baseprice 实例并相乘通过 PPC 为我要插入的行生成新的基本价格。

以下是现有表中的数据：

```
baseprice 日期其 ppp
114.401 2012 年 10 月 12 日上午 12:00:00 IBM -0.013
105.993 2012 年 10 月 19 日上午 12:00:00 IBM -0.073
105.94 2012 年 10 月 26 日上午 12:00:00 IBM -0.001
106.025 2012 年 11 月 2 日上午 12:00:00 IBM 0.001
104.403 2012 年 11 月 9 日上午 12:00:00 IBM -0.015
102.92 11/16/2012 12:00:00 AM IBM -0.014
106.522 2012 年 11 月 23 日上午 12:00:00 IBM 0.035

```

但我想插入以下内容：

```
2012 年 11 月 30 日上午 12:00:00 IBM -0.018
2012 年 12 月 7 日上午 12:00:00 IBM 0.01

```

还要计算基本价格，以便新行读取：

```
104.605 11/30/2012 12:00:00 AM IBM -0.018 /*(104.637=(1+ -0.018)*106.522*/
105.673 12/07/2012 12:00:00 AM IBM 0.01

```

# stream - Golang - 函数“执行”在哪里写入流？

> ID：13888204
> 
> 赞同：0
> 
> 时间：2012-12-15T00:39:28.327
> 
> 标签：stream, go

我是 Go 的初学者，我不明白在函数流中写入数据“home.html”的调用在哪里`Execute`。http.ResponseWriter 是很清楚但在函数中`Execute`我看不到像`write .. fmt.Fprint..`我这样的任何东西看递归`Execute`

[http://golang.org/src/pkg/html/template/template.go?s=1245:1315#L40](http://golang.org/src/pkg/html/template/template.go?s=1245:1315#L40)

```
//my Function
func homeHandler(c http.ResponseWriter, req *http.Request) {

var homeTempl = template.Must(template.ParseFiles("home.html"))

//here is my misunderstanding
homeTempl.Execute(c, req.Host)
//Thats consistent 
fmt.Fprint(c, "hallo")

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T01:02:51.900

这不是递归调用。它在“text/template”包中调用 Template.Execute（不是“html/template”中的 Template.Execute）。这也是您可以找到实际在 Writer 上写入字节的代码的地方。

[http://golang.org/src/pkg/text/template/exec.go?s=2630:2700#L95](http://golang.org/src/pkg/text/template/exec.go?s=2630:2700#L95)

# java - 结果集被重用

> ID：13888209
> 
> 赞同：0
> 
> 时间：2012-12-15T00:40:54.490
> 
> 标签：java, mysql, jdbc, resultset

好的，所以我有一段代码被多次调用。然而，在一些测试中，我注意到我的 ResultSet 根据数据库返回错误。经过进一步调查，我注意到它以某种方式被重复使用。值得一提的是，当我重新启动程序时，它会获取正确的结果。SQL 总是相同的。

我的代码：

```
PreparedStatement ps = connection.prepareStatement(sql);
ps.setInt(1, packet.getUserId());
ResultSet dbResult = ps.executeQuery();

while(dbResult.next())
{
    System.out.println("There were items!" );
    Item item = new Item();
    item.setItemType(dbResult.getInt(1));
    item.setFromUser(dbResult.getString(2));
    item.setItemMessage(dbResult.getString(3));
    toReturn.add(item);
} 
```

这是我的测试顺序：

*   一次从 ResultSet 中获取行并获得正确的结果 - OK
*   从表中删除上面特定 sql 使用的所有行，这意味着 ResultSet 下次不应该返回任何内容。
*   再次尝试获取（现在它应该返回 0 行）但它返回与步骤 1 中完全相同的行，即使数据库表是空的。

ResultSet 应该在使用后关闭还是关闭，或者我错过了什么？即使数据库中没有任何内容，我也会从 ResultSet 中获得结果。我可以保证 SQL 是合法的，但 ResultSet 似乎不是在第二次调用时从它创建的。

编辑（连接初始化代码）

```
public class DBFactory 
{
    protected String databaseName = null;
    protected String username = null;
    protected String password = null;
    protected Connection connection = null;
    protected Statement statement = null;

    protected DBFactory( String databaseName, String username, String password)
    {
        this.databaseName = databaseName;
        this.username = username;
        this.password = password;
    }

    protected void initConnection()
    {
        if (databaseName == null || username == null || password == null)
            throw new IllegalStateException();

        try 
        {
            Class.forName("com.mysql.jdbc.Driver").newInstance();
            this.connection = DriverManager.getConnection(this.databaseName, this.username, this.password);
            this.statement = this.connection.createStatement();
        } 
        catch (Exception e) 
        {
            System.out.println("DBFactory " + e.getMessage());
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T03:13:45.840

我希望您已关闭连接的自动提交。

据我所知，这个小代码示例将演示它。

```
package org.yi.happy.mysql;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

public class RepeatQuery {
    public static void main(String[] args) throws Exception {
        Class.forName("com.mysql.jdbc.Driver").newInstance();

        setupDatabase();

        System.out.println("opening database...");
        Connection connection = openConnection();
        connection.setAutoCommit(false);

        queryDatabase(connection);

        deleteRecords();

        queryDatabase(connection);

        connection.close();
    }

    private static Connection openConnection() throws SQLException {
        return DriverManager.getConnection("jdbc:mysql://localhost/test", null,
                null);
    }

    private static void setupDatabase() throws SQLException {
        Connection conn = openConnection();

        System.out.println("doing insert on another connection...");
        PreparedStatement stmt = conn
                .prepareStatement("insert into strings(id, value) values(?, ?)");

        stmt.setInt(1, 1);
        stmt.setString(2, "test");
        stmt.execute();

        stmt.setInt(1, 2);
        stmt.setString(2, "data");
        stmt.execute();

        stmt.close();
        conn.close();
    }

    private static void deleteRecords() throws SQLException {
        Connection conn = openConnection();
        System.out.println("doing delete on another connection...");
        PreparedStatement stmt = conn.prepareStatement("delete from strings");
        stmt.execute();

        stmt.close();
        conn.close();
    }

    private static void queryDatabase(Connection connection)
            throws SQLException {
        System.out.println("doing query...");
        PreparedStatement ps = connection
                .prepareStatement("select id, value from strings");
        ResultSet dbResult = ps.executeQuery();

        while (dbResult.next()) {
            int id = dbResult.getInt(1);
            String value = dbResult.getString(2);
            System.out.println(id + " <=> " + value);
        }
    }
} 
```

上面的输出是

```
doing insert on another connection...
opening database...
doing query...
2 <=> data
1 <=> test
doing delete on another connection...
doing query...
2 <=> data
1 <=> test 
```

如果我改变

```
 connection.setAutoCommit(false); 
```

读书

```
 connection.setAutoCommit(true); 
```

输出变成

```
doing insert on another connection...
opening database...
doing query...
2 <=> data
1 <=> test
doing delete on another connection...
doing query... 
```

这似乎是您所期望的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T03:15:20.040

您很可能在一个事务中，如果您提交或回滚当前事务，您将看到数据库的当前状态。

试一试

```
 connection.rollback(); 
```

或者

```
 connection.commit(); 
```

在查询之前，或打开自动提交。

# c++ - 极慢的双线性插值（与 OpenCV 相比）

> ID：13888210
> 
> 赞同：6
> 
> 时间：2012-12-15T00:41:11.237
> 
> 标签：c++, image, algorithm, opencv

```
template<typename T>
cv::Mat_<T> const bilinear_interpolation(cv::Mat_<T> const &src, cv::Size dsize,
                                     float dx, float dy)
{
    cv::Mat_<T> dst = dsize.area() == 0 ? cv::Mat_<T>(src.rows * dy, src.cols * dx) :
                                        cv::Mat_<T>(dsize);

    float const x_ratio = static_cast<float>((src.cols - 1)) / dst.cols;
    float const y_ratio = static_cast<float>((src.rows - 1)) / dst.rows;
    for(int row = 0; row != dst.rows; ++row)
    {
        int y = static_cast<int>(row * y_ratio);
        float const y_diff = (row * y_ratio) - y; //distance of the nearest pixel(y axis)
        float const y_diff_2 = 1 - y_diff;
        auto *dst_ptr = &dst(row, 0)[0];
        for(int col = 0; col != dst.cols; ++col)
        {
            int x = static_cast<int>(col * x_ratio);
            float const x_diff = (col * x_ratio) - x; //distance of the nearest pixel(x axis)
            float const x_diff_2 = 1 - x_diff;
            float const y2_cross_x2 = y_diff_2 * x_diff_2;
            float const y2_cross_x = y_diff_2 * x_diff;
            float const y_cross_x2 = y_diff * x_diff_2;
            float const y_cross_x = y_diff * x_diff;
            for(int channel = 0; channel != cv::DataType<T>::channels; ++channel)
            {
                *dst_ptr++ = y2_cross_x2 * src(y, x)[channel] +
                             y2_cross_x * src(y, x + 1)[channel] +
                             y_cross_x2 * src(y + 1, x)[channel] +
                             y_cross_x * src(y + 1, x + 1)[channel];
            }
        }
    }

    return dst;
} 
```

这是双线性插值的实现，我用它来将 512 * 512 图像（“lena.png”）放大到 2048 * 2048。完成这项工作需要 0.195 秒，但 cv::resize （不是 GPU 版本) OpenCV 只需要 0.026 秒。我不知道是什么让我的程序这么慢（OpenCV 比我快了将近 750%），我想看看 OpenCV 调整大小的源代码，但我找不到它的实现。

你知道为什么 OpenCV 的调整大小会这么快或者我的双线性太慢吗？

```
 {
        timeEstimate<> time;
        cv::Mat_<cv::Vec3b> const src = input;
        bilinear_interpolation(src, cv::Size(), dx, dy);
        std::cout << "bilinear" << std::endl;
    }

    {
        timeEstimate<> time;
        cv::Mat output = input.clone();
        cv::resize(input, output, cv::Size(), dx, dy, cv::INTER_LINEAR);
        std::cout << "bilinear cv" << std::endl;
    } 
```

编译器：mingw4.6.2 操作系统：win7 64bits cpu：英特尔® i3-2330M (2.2G)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T01:55:24.830

有两个主要因素使 OpenCV 的版本更快：

1.  OpenCV 将调整大小实现为“可分离操作”。即它分两步完成：图像水平拉伸，然后垂直拉伸。这种技术允许使用较少的算术运算来调整大小。

2.  手工编码的 SSE 优化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-10-19T15:27:45.503

最近在一些基于 CPU 的图形代码中添加双线性升级时，我遇到了同样的问题。

首先，我使用以下配置运行您的代码：

```
操作系统：虚拟机中的 Xubuntu 20
编译器：gcc 9.3.0
OpenCV 版本：4.2.0
CPU：i3-6100u (2.3 GHz)
源位图大小：512x512
目标位图大小：2048x2048

```

我发现**你的代码用了 92ms 而 OpenCV 用了 4.2ms**。所以现在的差异比你在 2012 年问这个问题时更大。我猜 OpenCV 从那时起优化得更多。

（此时我切换到在 Windows 中使用 Visual Studio 2013，为 x64 目标构建）。

将代码转换为使用**定点算法将时间减少到 30 毫秒。**定点算术很有帮助，因为将数据保持为整数。输入和输出数据是整数。必须将它们转换为浮动并再次返回是昂贵的。如果我坚持使用 GCC 9.3，我预计速度会更快，因为我通常发现它生成的代码比 VS 2013 更快。无论如何，这是代码：

```
typedef union {
    unsigned c;
    struct { unsigned char b, g, r, a; };
} DfColour;

typedef struct _DfBitmap {
    int width, height;
    DfColour *pixels;
} DfBitmap;

void bilinear_interpolation(DfBitmap *src, DfBitmap *dst, float scale) {
    unsigned heightRatio = (double)(1<<8) * 255.0 / scale;
    unsigned widthRatio = (double)(1<<8) * 255.0 / scale;
    int dstH = scale * src->height;
    int dstW = scale * src->width;

    // For every output pixel...
    for (int y = 0; y < dstH; y++) {
        int srcYAndWeight = (y * heightRatio) >> 8;
        int srcY = srcYAndWeight >> 8;

        DfColour *dstPixel = &dst->pixels[y * dst->width];
        DfColour *srcRow = &src->pixels[srcY * src->width];

        unsigned weightY2 = srcYAndWeight & 0xFF;
        unsigned weightY = 256 - weightY2;

        for (int x = 0; x < dstW; x++, dstPixel++) {
            // Perform bilinear interpolation on 2x2 src pixels.

            int srcXAndWeight = (x * widthRatio) >> 8;
            int srcX = srcXAndWeight >> 8;

            unsigned r = 0, g = 0, b = 0;
            unsigned weightX2 = srcXAndWeight & 0xFF;
            unsigned weightX = 256 - weightX2;

            // Pixel 0,0
            DfColour *srcPixel = &srcRow[srcX];
            unsigned w = (weightX * weightY) >> 8;
            r += srcPixel->r * w;
            g += srcPixel->g * w;
            b += srcPixel->b * w;

            // Pixel 1,0
            srcPixel++;
            w = (weightX2 * weightY) >> 8;
            r += srcPixel->r * w;
            g += srcPixel->g * w;
            b += srcPixel->b * w;

            // Pixel 1,1
            srcPixel += src->width;
            w = (weightX2 * weightY2) >> 8;
            r += srcPixel->r * w;
            g += srcPixel->g * w;
            b += srcPixel->b * w;

            // Pixel 0,1
            srcPixel--;
            w = (weightX * weightY2) >> 8;
            r += srcPixel->r * w;
            g += srcPixel->g * w;
            b += srcPixel->b * w;

            dstPixel->r = r >> 8;
            dstPixel->g = g >> 8;
            dstPixel->b = b >> 8;
        }
    }
} 
```

**切换到更好的算法将时间减少到 19.5 毫秒。**正如 Andrey Kamaev 的回答所说，更好的算法通过将垂直和水平调整大小分成两个单独的通道来工作。目标位图用作第一遍输出的临时存储空间。第二遍中的 X 遍历是向后的，以避免覆盖它即将需要的数据。这是代码：

```
void bilinear_interpolation(DfBitmap *src, DfBitmap *dst, float scale) {
    unsigned heightRatio = (double)(1<<8) * 255.0 / scale;
    unsigned widthRatio = (double)(1<<8) * 255.0 / scale;
    int dstH = scale * src->height;
    int dstW = scale * src->width;

    for (int y = 0; y < dstH; y++) {
        int srcYAndWeight = (y * heightRatio) >> 8;
        int srcY = srcYAndWeight >> 8;

        DfColour *dstPixel = &dst->pixels[y * dst->width];
        DfColour *srcRow = &src->pixels[srcY * src->width];

        unsigned weightY2 = srcYAndWeight & 0xFF;
        unsigned weightY = 256 - weightY2;

        for (int x = 0; x < src->width; x++, dstPixel++) {
            unsigned r = 0, g = 0, b = 0;

            // Pixel 0,0
            DfColour *srcPixel = &srcRow[x];
            r += srcPixel->r * weightY;
            g += srcPixel->g * weightY;
            b += srcPixel->b * weightY;

            // Pixel 1,0
            srcPixel += src->width;
            r += srcPixel->r * weightY2;
            g += srcPixel->g * weightY2;
            b += srcPixel->b * weightY2;

            dstPixel->r = r >> 8;
            dstPixel->g = g >> 8;
            dstPixel->b = b >> 8;
        }
    }

    for (int y = 0; y < dstH; y++) {
        DfColour *dstRow = &dst->pixels[y * dst->width];

        for (int x = dstW - 1; x; x--) {
            int srcXAndWeight = (x * widthRatio) >> 8;
            int srcX = srcXAndWeight >> 8;

            unsigned r = 0, g = 0, b = 0;
            unsigned weightX2 = srcXAndWeight & 0xFF;
            unsigned weightX = 256 - weightX2;

            // Pixel 0,0
            DfColour *srcPixel = &dstRow[srcX];
            r += srcPixel->r * weightX;
            g += srcPixel->g * weightX;
            b += srcPixel->b * weightX;

            // Pixel 0,1
            srcPixel++;
            r += srcPixel->r * weightX2;
            g += srcPixel->g * weightX2;
            b += srcPixel->b * weightX2;

            DfColour *dstPixel = &dstRow[x];
            dstPixel->r = r >> 8;
            dstPixel->g = g >> 8;
            dstPixel->b = b >> 8;
        }
    }
} 
```

**使用简单的便携式 SIMD 方案将时间减少到 16.5 毫秒。**SIMD 方案不使用 SSE/AVX 等专有指令集扩展。相反，它使用 hack 允许以 32 位整数存储和操作红色和蓝色通道。它不如 AVX 实现快，但它具有简单的优点。这是代码：

```
void bilinear_interpolation(DfBitmap *src, DfBitmap *dst, float scale) {
    unsigned heightRatio = (double)(1<<8) * 255.0 / scale;
    unsigned widthRatio = (double)(1<<8) * 255.0 / scale;
    int dstH = scale * src->height;
    int dstW = scale * src->width;

    for (int y = 0; y < dstH; y++) {
        int srcYAndWeight = (y * heightRatio) >> 8;
        int srcY = srcYAndWeight >> 8;

        DfColour *dstPixel = &dst->pixels[y * dst->width];
        DfColour *srcRow = &src->pixels[srcY * src->width];

        unsigned weightY2 = srcYAndWeight & 0xFF;
        unsigned weightY = 256 - weightY2;

        for (int x = 0; x < src->width; x++, dstPixel++) {
            unsigned rb = 0, g = 0;

            // Pixel 0,0
            DfColour *srcPixel = &srcRow[x];
            rb += (srcPixel->c & 0xff00ff) * weightY;
            g += srcPixel->g * weightY;

            // Pixel 1,0
            srcPixel += src->width;
            rb += (srcPixel->c & 0xff00ff) * weightY2;
            g += srcPixel->g * weightY2;

            dstPixel->c = rb >> 8;
            dstPixel->g = g >> 8;
        }
    }

    for (int y = 0; y < dstH; y++) {
        DfColour *dstRow = &dst->pixels[y * dst->width];

        for (int x = dstW - 1; x; x--) {
            int srcXAndWeight = (x * widthRatio) >> 8;
            int srcX = srcXAndWeight >> 8;

            unsigned rb = 0, g = 0;
            unsigned weightX2 = srcXAndWeight & 0xFF;
            unsigned weightX = 256 - weightX2;

            // Pixel 0,0
            DfColour *srcPixel = &dstRow[srcX];
            rb += (srcPixel->c & 0xff00ff) * weightX;
            g += srcPixel->g * weightX;

            // Pixel 0,1
            srcPixel++;
            rb += (srcPixel->c & 0xff00ff) * weightX2;
            g += srcPixel->g * weightX2;

            DfColour *dstPixel = &dstRow[x];
            dstPixel->c = rb >> 8;
            dstPixel->g = g >> 8;
        }
    }
} 
```

可以将 X 轴通道分开，但将 Y 轴通道组合起来。这提高了缓存的一致性并使代码更简单一些。**重新组合这两个通道将时间减少到 14.6 毫秒。**这是代码：

```
void bilinear_interpolation(DfBitmap *src, DfBitmap *dst, float scale) {
    unsigned heightRatio = (double)(1<<8) * 255.0 / scale;
    unsigned widthRatio = (double)(1<<8) * 255.0 / scale;
    int dstH = scale * src->height;
    int dstW = scale * src->width;

    for (int y = 0; y < dstH; y++) {
        int srcYAndWeight = (y * heightRatio) >> 8;
        int srcY = srcYAndWeight >> 8;

        DfColour *dstRow = &dst->pixels[y * dst->width];
        DfColour *srcRow = &src->pixels[srcY * src->width];

        unsigned weightY2 = srcYAndWeight & 0xFF;
        unsigned weightY = 256 - weightY2;

        for (int x = 0; x < src->width; x++) {
            unsigned rb = 0, g = 0;

            // Pixel 0,0
            DfColour *srcPixel = &srcRow[x];
            rb += (srcPixel->c & 0xff00ff) * weightY;
            g += srcPixel->g * weightY;

            // Pixel 1,0
            srcPixel += src->width;
            rb += (srcPixel->c & 0xff00ff) * weightY2;
            g += srcPixel->g * weightY2;

            dstRow[x].c = rb >> 8;
            dstRow[x].g = g >> 8;
        }

        for (int x = dstW - 1; x; x--) {
            unsigned rb = 0, g = 0;

            int srcXAndWeight = (x * widthRatio) >> 8;
            int srcX = srcXAndWeight >> 8;
            unsigned weightX2 = srcXAndWeight & 0xFF;
            unsigned weightX = 256 - weightX2;

            // Pixel 0,0
            DfColour *srcPixel = &dstRow[srcX];
            rb += (srcPixel->c & 0xff00ff) * weightX;
            g += srcPixel->g * weightX;

            // Pixel 0,1
            srcPixel++;
            rb += (srcPixel->c & 0xff00ff) * weightX2;
            g += srcPixel->g * weightX2;

            dstRow[x].c = rb >> 8;
            dstRow[x].g = g >> 8;
        }
    }
} 
```

此时代码仍然是单线程的。我的 CPU 总共有两个物理内核和 4 个线程。OpenCV 在我的机器上使用 2 个线程。**我希望将代码转换为使用 2 个线程会将时间减少到大约 8 毫秒。**

我不知道需要什么其他技巧才能将时间缩短到 4 毫秒，尽管可能需要转换为真正的 AVX SIMD 实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-05T17:49:59.050

也许有点晚了，但还要检查您是否在调试模式下运行您的应用程序。OpenCV 是一个库，很可能会被编译为发布 - 带有编译器优化。

# php - 如何覆盖 Magento 核心块？

> ID：13888213
> 
> 赞同：2
> 
> 时间：2012-12-15T00:41:43.723
> 
> 标签：php, magento

我正在尝试覆盖 Magento 审查系统并改用我自己的。

我创建了一个模块并将其激活（可在站点的配置区域中查看）。我已经创建了一个自定义布局，现在我正在尝试覆盖一些块。

我尝试了两种方法：

```
<review_product_list translate="label">

    <block type="reviewwidget/widget" name="product.info.product_additional_data" as="product_additional_data" template="reviewwidget/widget.phtml"></block> 

</review_product_list> 
```

和

```
<review_product_list translate="label">

    <reference name="content">
        <block type="reviewwidget/widget" name="product.info.product_additional_data" as="product_additional_data" template="reviewwidget/widget.phtml"></block> 
    </reference>   

</review_product_list> 
```

我期望第一种方法覆盖块并使用我的自定义块和模板。它没有效果。

第二种方法在我尝试替换的块之后呈现我的自定义模板中的内容。

谁能告诉我如何替换这个块？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T08:30:18.087

```
<blocks>
    <my_module>
        <class>My_Module_Block</class>
    </my_module>
    <review>
        <rewrite>
            <product_view_list>My_Module_Block_Widget</product_view_list>
        </rewrite>
    </review>
</blocks> 
```

Tag`<product_view_list>`表示你要重写 Mage_Review_Block_Product_View_List。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T05:57:31.130

试试这个：

```
<reference name="product.info">
    <action method="unsetChild"><alias>product_additional_data</alias></action>
    <!-- add your block here -->
</reference> 
```

# python - Python脚本头错误的过早结束

> ID：13888217
> 
> 赞同：1
> 
> 时间：2012-12-15T00:42:19.997
> 
> 标签：python, apache, ubuntu, cgi, wsgi

我正在运行一个新的 python 脚本，经过多次试验，我已经让它运行了（有点）。这是文件：

```
#!/usr/bin/python
import cgi
import cgitb

print "Content-type: text/html"
print

print "this is working" 
```

它在 SSH 中运行良好，但在浏览器中我收到 500 错误。查阅错误日志，我得到“脚本头过早结束”。我正在使用 mod_wsgi 运行 Ubuntu，并且我相信我已经正确设置了 apache2.conf，站点可用/默认设置正确，并且我拥有适当的权限并且没有正确设置。而且，就像我说的，python 在 SSH 中运行得很好——但我需要它作为 Web 应用程序运行。

任何人的任何想法吗？我已经为此工作了两天，但没有任何工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:39:24.557

谢谢各位的帮助。通过上面的 Liquid_Fire 链接（http://httpd.apache.org/docs/2.2/howto/cgi.html），我发现了一些关于 suexec 运行的信息。我检查了一下，我的盒子正在运行 suexec。我评论了它，万岁！有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:20:03.260

如果这是通过 mod_wsgi 编写的 wsgi 脚本，它应该如下所示：

```
def application (env, r):
    body = 'this is working'
    status = '200 OK'
    response_headers = [ ('Content-Type', 'text/html'), ('Content-Length', str (len (body) ) ) ]
    r (status, response_headers)
    return [body] 
```

# android - 尝试将数据库备份到 SD 卡时出现 FileNoFoundException

> ID：13888220
> 
> 赞同：1
> 
> 时间：2012-12-15T00:42:38.513
> 
> 标签：android

我正在尝试将我的数据库从我的应用程序备份到我的 sd 卡，但每次我尝试我得到 `FileNotFoundException`并且我不知道为什么当数据库的名称是正确的

备份数据库的代码

```
try{
        File dbFile = new File(Environment.getDataDirectory() + "/data/my.app.package/databases/Games.db");
        File exportDir = new File(Environment.getExternalStorageDirectory()+"/BCAData");
           if (!exportDir.exists()) {
              exportDir.mkdirs();
           }
           File file = new File(exportDir, dbFile.getName());

           file.createNewFile();
           FileChannel inChannel = new FileInputStream(dbFile).getChannel();  //fails here
           FileChannel outChannel = new FileOutputStream(file).getChannel();
           try {
              inChannel.transferTo(0, inChannel.size(), outChannel);
           } finally {
              if (inChannel != null)
                 inChannel.close();
              if (outChannel != null)
                 outChannel.close();
           }
    }catch(Exception e){
        e.printStackTrace();
    } 
```

在我的内容提供商中，我有这样的数据库名称

```
private static final String DATABASE_NAME = "Games";
private static final String GAMES_TABLE = "Games"; 
```

错误：

```
12-14 19:38:38.313: W/System.err(10452): java.io.FileNotFoundException: /data/data/com.tyczj.bowling/databases/Games.db: open failed: ENOENT (No such file or directory)
12-14 19:38:38.313: W/System.err(10452):    at libcore.io.IoBridge.open(IoBridge.java:416)
12-14 19:38:38.313: W/System.err(10452):    at java.io.FileInputStream.<init>(FileInputStream.java:78)
12-14 19:38:38.323: W/System.err(10452):    at com.tyczj.bowling.services.DatabaseExportService.onHandleIntent(DatabaseExportService.java:27)
12-14 19:38:38.323: W/System.err(10452):    at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:65)
12-14 19:38:38.333: W/System.err(10452):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-14 19:38:38.333: W/System.err(10452):    at android.os.Looper.loop(Looper.java:137)
12-14 19:38:38.343: W/System.err(10452):    at android.os.HandlerThread.run(HandlerThread.java:60)
12-14 19:38:38.343: W/System.err(10452): Caused by: libcore.io.ErrnoException: open failed: ENOENT (No such file or directory)
12-14 19:38:38.353: W/System.err(10452):    at libcore.io.Posix.open(Native Method)
12-14 19:38:38.353: W/System.err(10452):    at libcore.io.BlockGuardOs.open(BlockGuardOs.java:110)
12-14 19:38:38.353: W/System.err(10452):    at libcore.io.IoBridge.open(IoBridge.java:400)
12-14 19:38:38.353: W/System.err(10452):    ... 6 more 
```

我不明白为什么这是错误的路径，所以这不是数据库的名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T00:46:23.107

代替：

```
File dbFile = new File(Environment.getDataDirectory() + "/data/my.app.package/databases/Games.db"); 
```

尝试：

```
File dbFile = getDatabasePath(DATABASE_NAME); 
```

# r - ggplot 将颜色渐变缩放到数据范围之外

> ID：13888222
> 
> 赞同：40
> 
> 时间：2012-12-15T00:42:46.367
> 
> 标签：r, colors, ggplot2, data-visualization

我正在寻找一种方法来拉伸两个值之间的颜色渐变并标记图例，而不管数据集中的数据值范围如何。本质上，是否有与`ylim()` 颜色渐变等效的功能？

给定通常在 -1 和 1 之间绘制 az 值的代码，如果中断在数据范围内，我可以绘制和标记渐变：

```
library(ggplot2)

#generator from http://docs.ggplot2.org/current/geom_tile.html
pp <- function (n, r = 4) { 
  x <- seq(-r * pi, r * pi, len = n)
  df <- expand.grid(x = x, y = x)
  df$r <- sqrt(df$x^2 + df$y^2)
  df$z <- cos(df$r^2) * exp(-df$r / 6)
  return(df)
}

t <- pp(30)
summary(t)
b <- c(-.5, 0, .5)
colors <- c('navyblue', 'darkmagenta', 'darkorange1')
p <- ggplot(data = t, aes(x = x, y = y))+
  geom_tile(aes(fill = z))+
  scale_fill_gradientn(colors = colors, breaks = b, labels = format(b))
ggsave(plot = p, filename = <somefile.png>, height = 3, width = 4) 
```

![graham jeffries ggplot 比例填充示例](../Images/634c0bf480b1fc8bd383932287e0c426.png)

但是当我将中断更改为观察范围之外的值时，渐变颜色似乎没有调整，渐变标签也没有出现。

```
b <- c(-3, 0, 3) 
```

![graham jeffries ggplot 比例填充示例 2](../Images/15adef7674fd3c967bc39bcce5cf51fc.png)

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-12-15T02:22:39.313

重要的是要记住，在 ggplot 中，`breaks`基本上永远不会改变比例本身。它只会更改指南或图例中显示的内容。

您应该改为更改比例的限制：

```
ggplot(data=t, aes(x=x, y=y)) +
  geom_tile(aes(fill=z)) +
  scale_fill_gradientn(limits = c(-3,3),
  colours=c("navyblue", "darkmagenta", "darkorange1"),
  breaks=b, labels=format(b)) 
```

现在，如果您希望图例中出现的中断进一步扩展，您可以更改它们以设置刻度线出现的位置。

要记住的一个很好的类比始终是常规的 x 和 y 轴。在那里设置“中断”只会改变刻度线出现的位置。如果要更改 x 或 y 轴的*范围*，通常会更改设置，例如它们的“限制”。

# git - 用git打开文件的命令

> ID：13888223
> 
> 赞同：43
> 
> 时间：2012-12-15T00:42:46.673
> 
> 标签：git

*   我将 sublime text 作为 git 中的默认编辑器**（它可以工作）**
*   `git config --edit`以崇高的文本打开配置文件（真棒）

**我的问题：**

`index.html`打开say或`style.css`从项目目录中打开的命令是什么？

基本上，当我在做一个项目时，我希望能够从 git 打开一个文件。这个怎么做。每个教程似乎都涉及合并、克隆、提交，是的，我们都知道这些，如何执行这个简单的命令。或者这在 git 中是不可能的吗？

*   Windows 7的
*   msysgit 版本 1.8.0

**我了解 git 不是启动器，并且严格用于版本控制。只想知道我手头的工具有哪些选择。**

当我提交一个项目并意识到我需要对一个我已经关闭的 css 文件进行小编辑时，这个问题出现了，并且想知道我是否可以从 git 中打开以编辑该文件，因为我已经完成了它。

似乎这是不可能的*（不是世界末日）*我只是想用我使用的工具来了解我的所有选择

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-12-15T00:48:19.623

Git 与您在项目中打开/编辑文件的方式无关。在 git 中配置编辑器只是为了让需要编辑器的 git 内部事物（例如提交消息）可以使用您喜欢的编辑器。

如果您只想从命令行（cmd.exe）打开文件，就像在 Windows 资源管理器中双击它们一样，我认为您可以使用`start <filename>`.

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-10-29T06:38:59.917

我可以通过使用以下命令来做到这一点：

```
notepad .gitignore 
```

它会在记事本中打开 .gitignore 文件。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-06-05T17:43:42.090

我通过此[链接](https://danlimerick.wordpress.com/2014/01/07/git-for-windows-tip-opening-sublime-text-from-bash/)找到了解决方法。简而言之，您必须：

1.  创建一个名为 subl 的文件（或您希望命令调用 Sublime Text 的任何名称），不带扩展名
2.  将此命令放入上述文件中（如有必要，请替换可执行文件的路径）：

    ```
    #!/bin/sh
    "C:\Program Files\Sublime Text 2\sublime_text.exe" $1 & 
    ```

3.  根据您的操作系统和 Sublime Text 版本将该 subl 文件放在适当的命令目录中（如果您有疑问，请查看上面的链接注释部分）。就我而言，我在 Windows 10 64bit 上使用 Sublime Text 3，所以我将它放在：

    ```
    C:\Program Files (x86)\Git\usr\bin 
    ```

4.  现在，为了让您打开所需的文件，在 git bash 中使用（在文件夹中）

    ```
    subl filename 
    ```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-07-03T12:24:51.973

只需使用`vi`+`filename`命令。

例子：

```
vi stylesheet.css 
```

这将打开带有文件内容的 vi 编辑器。

要开始编辑，请按`I`

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-12-14T21:59:33.630

上面的 Brenton Alker 说 'start ' 有效——我要补充一点：它适用于所有已经与 sublime-text 关联的文件（正如他所说，它就像在 Windows 资源管理器中双击它们一样工作）。

但是，例如，如果您想将 .gitignore 文件从 shell 打开到 sublime_text 中，并且 .gitignore 与 sublime_text 没有关联，这就是我所做的：

我编辑了我的 PATH 环境变量以在程序文件中包含 Sublime Text 文件夹，该文件夹包含 sublime_text.exe。现在，在我的终端中（我使用 powershell，但它可以在任何终端上工作），当我输入“sublime_text .gitignore”时，我当前目录中的 .gitignore 会在 Sublime 中打开！

我试图制作一个名为 sublime.bat 的 .bat 文件，这样我就可以输入 sublime .gitignore，但这不起作用——它打开了 sublime 文本，但由于某种原因没有打开文件。我对 sublime_text 很满意（实际上，tab 补全为我简化了它——只需 'su[tab]' 就可以了！

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-12-06T13:52:39.863

您可以使用以下命令在 git bash 中打开文件：

```
vi <filename>               -- to open a file

i                           -- to insert into the file 

ESC button followed by :wq   -- to save and close the file 
```

希望能帮助到你。

任何其他基于终端的文本编辑器，如[vim](https://www.vim.org)、[nano](https://www.nano-editor.org)和许多也可以很好地完成这项工作。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-11-14T05:26:03.803

你可以使用 git 命令行作为终端我的家伙你只知道命令是 bash 来创建文件

```
touch file.txt 
```

打开文件

```
code file.py 
atom file.py
start file.py 
```

等

在文本编辑器中打开当前文件夹及其中的所有内容

```
code . 
```

制作文件夹

```
mkdir folder1 folder2 folder3 
```

您可以一次制作任意数量的作品

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-03-27T02:45:58.670

您可以通过将以下行附加到 .gitconfig 文件来创建别名以在默认编辑器中打开文件：

```
edit = "!f() { $(git config core.editor) -- $@; }; f" 
```

然后，`git edit foo.txt`将打开文件`foo.txt`进行编辑。

打开 .gitconfig 并粘贴该行要容易得多`git config --global --edit`，而不是弄清楚如何转义所有字符以直接从命令行输入别名`git config alias.edit "..."`

# 这个怎么运作

*   `!`启动 bash 命令，而不是内部 git 命令
*   `f() {...};`启动一个函数
*   `$(git config core.editor)`将从本地配置中获取编辑器的名称，如果未设置本地，则从全局获取。不幸的是，如果没有设置，它不会查找`$VISUAL`或查找此内容。`$EDITOR`
*   `--`将编辑器命令与文件列表分开。这适用于大多数命令行编辑器，因此安装起来更安全。如果跳过并且`core.editor`未设置，则可能会执行可执行文件而不是被编辑。有了它，命令就会失败。
*   `$@`将添加在命令行输入的文件。
*   `f`将在定义后执行该函数。

# 用例

其他答案对您为什么想要这个表示怀疑。我的用例是我想编辑文件作为我正在构建的其他 git 函数的一部分，并且我想在用户配置的同一个编辑器中编辑它们。例如，以下是我的别名之一：

```
reedit = "!f() { $(git config core.editor) -- $(git diff --name-only $1); }; f" 
```

然后，`git reedit`将打开我已经开始修改的所有文件，`git reedit --cached`并将打开所有暂存文件。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-01-26T08:46:43.813

当您在任何项目中工作并且想要进行较小的更改时，您可以使用 git 默认编辑器，但是您可能需要一个小脚本来解析由以下命令生成的文件

```
git config -l 
```

然后变量`code.editor`保存值`/Applications/Sublime_Text.app -n -w`

您可以使用它打开`os.system()`

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-02-14T19:35:44.813

假设您在存储库根文件夹中

```
alias notepad="/c/Program\ Files\ \(x86\)/Notepad++/notepad++.exe" 
```

然后您可以使用 Notepad++ 打开任何文件：

```
notepad readme.md 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-06-11T18:12:45.987

要在 Sublime Text 中打开文件，

这是在 Sublime Text 编辑器中打开示例文本文件的示例

```
subl <filename>.txt 
```

subl 之前使用 Git Bash shell 中的“echo”命令创建为别名，包含目录文件。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-01-11T19:46:07.017

我刚刚下载了 Git 2.7.0 并为 .bashrc 添加了一个别名，用于使用 VS Code 编辑文件：

```
alias code='/c/Program\ Files\ \(x86\)/Microsoft\ VS\ Code/bin/code.cmd' 
```

还应该与其他编辑合作...

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-06-01T16:17:48.923

我使用 Atom 打开文件，这对我有用

```
atom index.html 
```

希望这会有所帮助。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-11-16T01:50:19.810

我知道这是古老的，但我需要在 git helper 脚本（从模板创建别名的别名）末尾执行此操作，并找到我认为真正的答案：

有一个类似瓷器的助手叫做[`git-sh-setup`](https://git-scm.com/docs/git-sh-setup/)，当它被获取时，它会给你一个[`git_editor`](https://git-scm.com/docs/git-sh-setup/#git-sh-setup-giteditor)函数

> 在给定文件上运行用户选择的编辑器（GIT_EDITOR、core.editor、VISUAL 或 EDITOR），但如果没有指定编辑器并且终端是哑的，则会出错。

`git-sh-setup`文档[描述](https://git-scm.com/docs/git-sh-setup/#_description)基本上告诉你不要使用它，在这种情况下这可能是个好建议。

幸运的是，这`git-sh-setup`是一个 shell 脚本，`git_editor`它的部分很小，我们可以[复制它](https://github.com/git/git/blob/d166e6afe5f257217836ef24a73764eba390c58d/git-sh-setup.sh#L150)：

```
git_editor() {
    if test -z "${GIT_EDITOR:+set}"
    then
        GIT_EDITOR="$(git var GIT_EDITOR)" || return $?
    fi
    eval "$GIT_EDITOR" '"$@"'
} 
```

你应该可以把它放在你自己的脚本中，或者把它变成一个 bash 别名，然后像这样调用它`git_editor file1.txt file2.txt ...`

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-02-18T16:40:05.830

我们总是喜欢使用 vi -- 打开文件

```
vi <filename> -- to open a file 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-05-29T11:22:05.030

也许从 git 存储库中共享的脚本打开编辑器可能会很有用，无需假设哪个编辑器可以让任何人使用该脚本，但前提是他们有 git。

在这里您可以测试是否在 git config 中设置了编辑器，还可以打开与该编辑器无关的文件：

```
alias editor="$(git config core.editor)"
if [ "$(alias editor | sed -r "s/.*='(.*)'/\1/")" != "" ]; then
    editor <filename>
else
    start <filename>
fi 
```

在 Windows 上与我的 .gitconfig 配合使用非常好：

```
[core]
    editor = 'C:/Program Files/Notepad++/notepad++.exe' -multiInst -notabbar -nosession -noPlugin 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-12-16T06:02:45.870

该问题的一个简单解决方案是`nano index.html`git 或任何其他终端将在终端上打开文件，然后您从那里进行编辑。

您会在编辑页面底部看到有关如何保存的命令。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-11-19T01:39:58.440

您必须有一个与该文件类型关联的应用程序。您必须位于包含该文件的文件夹中。在 gitbash 中：`start file.extension`

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2019-08-13T13:12:13.323

要在 git 中打开文件，您将在 windows 中键入`explorer .` ，注意资源管理器和点之间的空格。在 mac 上，您可以使用 来打开它`open .`，在 Linux 中`nautilus .`，请注意每个末尾的句点。

# r - 我有置信区间的向量，但是如何将这些值添加到条形图中？

> ID：13888227
> 
> 赞同：1
> 
> 时间：2012-12-15T00:43:56.940
> 
> 标签：r

我有 3 个估计向量：

```
est1 <- c(0.0930, NA, NA, 0.0157, 0.0187, 0.0137, NA, NA, 0.0426, NA, NA, NA, 0.0129, 0.0075, 0.0131, 0.0194, 0.0129, 0.0435, 0.0338, 0.0276, 0.0382, -0.0070)
est2 <- c(0.0094, NA, NA, 0.0081, 0.0060, 0.0066, NA, NA, 0.0060, NA, NA, NA, 0.0067, 0.0061, 0.0043, 0.0067, 0.0060, 0.0092, 0.0101, 0.0118, 0.0133, -0.0011)
est3 <- c(0.0045, 0.0064, 0.0053, 0.0060, 0.0057, 0.0061, 0.0081, 0.0044, 0.0074, 0.0077,     0.0059, 0.0086, 0.0059, 0.0040, 0.0068, 0.0059, 0.0056, NA, NA, 0.0130, 0.0130, 0.0071) 
```

对于每个值，我都有上下置信区间值。因此，对于 est1[1]，我的置信区间为 2.5% = ci.low1[1], 97.5% = ci.upp1[1]：

```
ci.low1 <- c(0.0906, NA, NA, 0.0137, 0.0176, 0.0119, NA, NA, 0.0421, NA, NA, NA, 0.0099, 0.0060, 0.0100, 0.0180, 0.0117, 0.0413, 0.0322, 0.0253, 0.0352, -0.0093)
ci.upp1 <- c(0.0963, NA, NA, 0.0183, 0.0228, 0.0154, NA, NA, 0.0434, NA, NA, NA, 0.0148, 0.0101, 0.0160, 0.0222, 0.0139, 0.0481, 0.0349, 0.0318, 0.0413, -0.0050)

ci.low2 <- c(0.0075, NA, NA, 0.0052, 0.0051, 0.0056, NA, NA, 0.0042, NA, NA, NA, 0.0050, 0.0042, 0.0019, 0.0049, 0.0047, 0.0083, 0.0093, 0.0101, 0.0126, -0.0025)
ci.upp2 <- c(0.0117, NA, NA, 0.0099, 0.0076, 0.0088, NA, NA, 0.0077, NA, NA, NA, 0.0078, 0.0078, 0.0051, 0.0084, 0.0072, 0.0102, 0.0107, 0.0131, 0.0153, 0.0011)

ci.low3 <- c(0.0001, 0.0046, 0.0028, 0.0042, 0.0006, 0.0040, 0.0021, 0.0028, 0.0038, 0.0069, 0.0052, 0.0055, 0.0040, -0.0008, 0.0048, 0.0035, 0.0040, NA, NA, 0.0114, 0.0094, 0.0029)
ci.upp3 <- c(0.0066, 0.0108, 0.0092, 0.0084, 0.0087, 0.0077, 0.0102, 0.0066, 0.0112, 0.0115, 0.0095, 0.0141, 0.0107, 0.0068, 0.0079, 0.0086, 0.0079, NA, NA, 0.0155, 0.0157, 0.0087) 
```

我想为我的估计制作一个条形图。像这样的东西：

```
barplot(rbind(est1, est2, est3), beside = TRUE, col = c("blue", "red", "grey20"), ylim = c(-0.02,0.1), cex.names = 1.2, xpd = FALSE) 
```

对于散点图，我通常使用函数 arrows() 添加置信区间，设置 x0 = x1：

```
arrows(x0, y0, x1, y1, angle = 90, code = 3, lwd = 3, length = 0.1, col = 7) 
```

但我不知道如何将其应用于这种条形图结构。我需要获取 x 轴位置，并考虑一组条形之间的间距。任何人都可以提供一些帮助吗？感谢！

# xaml - MVVM、Xaml、命令绑定、异常处理和消息框

> ID：13888229
> 
> 赞同：0
> 
> 时间：2012-12-15T00:44:58.113
> 
> 标签：xaml, exception-handling, windows-phone-8, commandbinding

我目前正在开发一个 Windows Phone 应用程序。我对 MVVM 及其好处了解不少。所以我尽量将 UI 逻辑与业务逻辑分开。但我被这个难住了。

假设 ViewModel 中有一个命令，并且 UI 通过 xaml 绑定到该命令。因此我从不调用执行函数。假设这个命令实际上能够抛出异常。我想抓住这个并显示一个通知。以下是我想到的：

1.  将接口传递给命令，以便它可以在出现问题时通知。实现该接口的类可以保存显示消息框的逻辑。这可以正常工作，但会破坏应用程序全球化/本地化。我想将错误消息存储在 AppResources.resx 文件中，以便在更改默认语言时选择适当的错误消息。我不想从命令中调用 AppResources，因为如果我将它添加到视图模型中的命令中，我将无法测试它
2.  我们可以从后面的代码中调用命令，使用try catch，然后可以根据异常直接显示MessageBox。

我对这两种解决方案都不太满意。有没有一种好方法来处理绑定到 UI 的命令的异常？我看到了 DispatchedUnhandledException，但它会是特定于域的吗？我不希望在一个地方捕获所有异常以通知用户。我想要适当的视图来处理它。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T05:19:44.900

您可以使用某种信使，例如 mvvm light 的信使。View 可以侦听错误消息，然后显示 VM 发送的通知。

[请参阅此处](http://issuevision.codeplex.com/SourceControl/changeset/view/20228#22219)的示例。

# java - 从字符串中删除第 n 个字符

> ID：13888232
> 
> 赞同：0
> 
> 时间：2012-12-15T00:45:22.717
> 
> 标签：java, replace, char

有一个字符串“Saya”我想删除第 4 个字符，所以它将是“Say”

我已经这样做了

```
String word = "Saya";
char c = word.charAt(3);
String delete = Character.toString(c);
String newWord = word.replace(delete,"");
System.out.println(newWord); 
```

但结果是“Sy”。它删除所有与第四个相同的字符

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-15T00:48:22.800

您想使用[substring()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring%28int,%20int%29)。像这样：

```
i = 3;
String newWord = word.substring(0,i)+word.substring(i+1); 
```

确保检查原始字符串的长度，否则您可能会收到 IndexOutOfBoundsException

# ruby - Rails 嵌套静态页面

> ID：13888233
> 
> 赞同：2
> 
> 时间：2012-12-15T00:45:23.033
> 
> 标签：ruby, ruby-on-rails-3

我的问题是如何在 Rails 中创建嵌套的静态页面？我是 Ruby on Rails 的“自学”新手，一直在寻找这个答案。任何帮助将不胜感激，谢谢。

**例如：**

*   站点根目录
    --- 船舶 (http://wwww.example.com/ships)
    ------ 船舶类型 (http://wwww.example.com/ships/types-of-ships)

**目录结构：**

应用程序/视图/静态/船舶/船舶类型

**电流静态控制器**

class StaticController < ApplicationController def show render params[:pages] end end

**路线**

得到“/:pages”=>“静态#show”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T02:16:19.160

如果您想在 Rails 应用程序中创建静态页面，我会查看一些资源。

*   [Michael Hartl 的 Rails 教程 - 主要是静态页面](http://ruby.railstutorial.org/chapters/static-pages#top)
*   [Ruby on Rails 中的静态页面](https://stackoverflow.com/questions/4479233/static-pages-in-ruby-on-rails)

上面的最后一个链接确实是静态页面的首选，所以我将解决您关于嵌套问题的更具体部分。

如果你想将一个 url 映射到一个控制器动作（和一个视图），你可以简单地将它添加到你的路由文件中。如果您希望将其命名为命名空间，您只需在`:pages`将传递特定船名的符号前面添加命名空间即可。

```
get "ships/:pages" => "static#show"
# so going to www.example.com/ships/titanic
# will show your app/view/static/ships/titanic.html.erb page 
```

### 替代方案：用于静态页面的 Gem

或者，thoughtbot 创建了一个名为[high_voltage](https://github.com/thoughtbot/high_voltage)的 gem来处理一些设置。我没有使用它，但它可能值得一看。

### 路线警告

但是，对于您拥有的路由条目，我会提醒您它可能会产生意想不到的后果，因为如果有人输入的路由与您拥有的文件不匹配，它将引发错误。

如果你走这条路线，我建议你阅读一条包罗万象的路线。你可以：

*   [重定向到 404](https://stackoverflow.com/questions/7342851/catch-unknown-action-in-rails-3-for-custom-404)
*   重定向到主页

或者您认为对您的用户最有帮助的任何其他内容。

再一次，有一些警告，因为这将捕获所有错误并忽略其他项目，如 rails 引擎（据我了解）。

### 替代架构

我可以根据您在评论中的回答修改此部分，但您似乎想在此类别中添加大量页面。

由于这些都是船，我假设它们在每艘周围都有相似的数据点，您可以将这些信息保存在数据库中，然后创建一个 Ship 脚手架来像普通的 Rails 项目一样管理它。

这将允许您：

*   存储任意数量的船只
*   有一个模板`#show`页面
    *   这使您的视图保持干燥并使更改模板变得更加容易

# php - WordPress 更改特色图片默认大小

> ID：13888234
> 
> 赞同：0
> 
> 时间：2012-12-15T00:45:31.343
> 
> 标签：php, html, css, wordpress

我有一个 WordPress 网站，我想将每个帖子的“特色图片”的默认大小增加到 500 像素 x 500 像素。我尝试使用 CSS 简单地调整图像大小，但它们像素化了。

有任何想法吗？对不起，如果这是基本的 - 我有点 WordPress 新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T06:06:47.693

您需要创建一个functions.php 文件。并将其放在您的代码中：

```
if ( function_exists( 'add_theme_support' ) ) {
add_theme_support( 'post-thumbnails' );
    set_post_thumbnail_size( 500, 500 );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T01:00:18.367

在你的function.php中试试这个

```
if ( function_exists( 'add_theme_support' ) ) {
add_theme_support( 'post-thumbnails' );
    set_post_thumbnail_size( 150, 150 ); 
```

}

[http://codex.wordpress.org/Function_Reference/set_post_thumbnail_size](http://codex.wordpress.org/Function_Reference/set_post_thumbnail_size)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T01:01:33.573

您的图像模糊，因为它们的分辨率设置低于 500 像素 x 500 像素。您无法在不损失质量的情况下放大图像。

要解决此问题，请在 Photoshop 等图形编辑程序中将图像创建为所需大小

# android - 从 ContextMenu 抓取 TextView（在 ListVIew Row 中）

> ID：13888236
> 
> 赞同：0
> 
> 时间：2012-12-15T00:45:44.930
> 
> 标签：android, textview, contextmenu

我知道要在 a 中获取特定的字符串`TextView`，`ListView`我可以这样做：

```
ReviewUser = ((TextView) rowView.findViewById(R.id.labelUser))
                .getText().toString(); 
```

如果我想得到`TextView`它自己怎么办？

是`TextView`一个整数，我只是想得到`TextView`并添加`1`到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T01:35:50.900

所以你已经指定你知道如何从你的 ListView 中获取特定的文本。既然你想修改同一个 TextView，剩下的就很简单了。此代码较长，只是为了显示步骤。

```
TextView textView = (TextView) rowView.findViewById(R.id.labelUser)
String text = textView.getText().toString();
int num = Integer.valueOf (text).intValue() + 1;
textView.setText (""+num); 
```

此外，如果您正在使用 String ArrayAdapter 并且您知道要修改的行的索引，那么您可以做的是（假设 arrayAdapter 已初始化并且 index 是您的索引变量）：

```
String text = arrayAdapter.get(index);
arrayAdapter.remove (text);
arrayAdapter.insert ((Integer.valueOf (text).intValue() + 1 ) + "", index); 
```

# iphone - 使用 UISegmentedControl 在视图之间传递值

> ID：13888239
> 
> 赞同：0
> 
> 时间：2012-12-15T00:46:23.997
> 
> 标签：iphone, ios, mkmapview, uisegmentedcontrol

我试图在两个视图之间传递一个整数。当我从 View1 返回到 MainView 时，该值未传递，并且 NSLog(@"Changed map") 未显示在控制台中。我寻找答案并尝试了所有方法，但它不起作用！感觉代言人有问题……

有任何想法吗？

View1.h

```
@class FlipsideViewController;

@protocol FlipsideViewControllerDelegate
    - (void)flipsideViewControllerDidFinish:(FlipsideViewController *)controller;
    -(void)flipsideViewControllerSelectionChangedToIndex:(int)index;
    @end

@interface FlipsideViewController : UIViewController {
}

@property (weak, nonatomic) id <FlipsideViewControllerDelegate> delegate;
@property (nonatomic, retain) IBOutlet UISegmentedControl *mapType;

- (IBAction)valueChangedMap:(id)sender;

@end 
```

查看1.m

```
-(IBAction)valueChangedMap:(id)sender {
    [self.delegate flipsideViewControllerSelectionChangedToIndex:[sender selectedSegmentIndex]];
    NSLog (@"%d",[sender selectedSegmentIndex]);

    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

主视图.h

```
@interface MainViewController : UIViewController <FlipsideViewControllerDelegate, UIPopoverControllerDelegate, MKMapViewDelegate> {}

@property (weak, nonatomic) IBOutlet MKMapView *mapView;
@property(weak) id<FlipsideViewControllerDelegate> delegate;

@end 
```

主视图.m

```
-(void)flipsideViewControllerSelectionChangedToIndex:(int)index {
    NSLog(@"Changed map");

    if (index == 0) mapView.mapType = MKMapTypeStandard;
    if (index == 1) mapView.mapType = MKMapTypeHybrid;
    if (index == 2) mapView.mapType = MKMapTypeSatellite;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T05:12:00.187

您只需要 view1 上的实际委托属性，而您的 mainView 只需要响应该委托协议。这是您的委托协议应如下所示：

```
@property(nonatomic,unsafe_unretained) id delegate; 
```

现在在您的代码中，当 mainview 呈现或推送 view1 时，您需要像这样连接委托（伪代码）：

```
view1.delegate = self; 
```

还有一些挑剔......你永远不应该让视图控制器自行关闭，当“完成”委托方法触发时，mainView 应该关闭 view1。此外，您应该始终检查委托在触发之前是否响应了选择器：

```
if([self.delegate respondsToSelector:@selector(yourselectorname)]) {
    [self.delegate yourselectorname];
} 
```

# c++ - 将十六进制数转换为布尔数组

> ID：13888241
> 
> 赞同：1
> 
> 时间：2012-12-15T00:46:37.787
> 
> 标签：c++

嗨，我需要在 C++ 中将十六进制数转换为二进制数。它代表一个 4 x 8 的二进制图像。例如，下面的十六进制数 0xc00e90 代表图像：

```
00000000
11000000
00001110
10010000 
```

这是我的工作解决方案。u 是输入的 hex #，image 是 bool 数组 [4][8]。但我很确定这不是最佳解决方案，实现它的更好方法是什么？

```
 for(int i=0;i<4;i++)
{
    std::bitset<8> bit((u>>(3-i)*8)&0xFF);
    cout<<bit<<"\n";
    for (int j=0;j<8;j++)
    {
        image[i][j]=(bool) bit[7-j];    
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T00:58:23.597

实际上`u`不是十六进制数字，它只是一个没有基数的数字，直到你用一些基数的数字表示它们。您的解决方案很好，另一种无需创建位集的方式：

```
uint32_t uu = u;
uint32_t mask = 0x80000000;
for (uint8_t i = 0; i < 32; i++) {
  image[i / 8][i % 8] = (bool) (uu & mask == mask);
  mask >>= 1;
} 
```

# c++ - C++ - 无法从 Windows 中的网络路径打开文件

> ID：13888243
> 
> 赞同：2
> 
> 时间：2012-12-15T00:47:09.953
> 
> 标签：c++, windows

我在使用本机 C++ 打开位于 Windows 机器上的网络驱动器上的文件时遇到问题。如果文件是本地文件，我的代码可以正常工作，但如果文件在网络共享上，我的代码会失败。我可以很好地从 Windows 资源管理器中读取文件。

```
 ifstream ifs(cFilename);
  if(ifs.is_open())
  {
    // Read file here. (This never works for a network path)
  } 
```

我也试过这个：

```
struct stat sb;
if (stat(cFilename, &sb) == 0)
{
  // Read file here. (This never works for a network path)
} 
```

我的路径格式正确（例如“\\server\filename.ext”），但我仍然无法打开它。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T00:54:18.447

如果名称的格式为`\\server\filename`，那么它似乎可能不正确。我相信通常它也需要一个共享名称：

```
\\server\share\filename 
```

另外，请确保在代码中转义了反斜杠（例如，`\\\\server\\share\\filename`）。

# c# - 我究竟做错了什么？在构造函数中使用依赖属性的值

> ID：13888250
> 
> 赞同：2
> 
> 时间：2012-12-15T00:48:52.650
> 
> 标签：c#, xaml, microsoft-metro, windows-runtime, winrt-xaml

我在使用依赖属性时遇到了一些问题。我想使用 DP 的值来初始化构造函数中的一个对象。

问题是 Month 始终为 0（在构建期间），这会导致 ExpenseDetailPageDataModel 的初始化错误。在构造函数完成他的工作后，变量 Month 的值立即更改为正确的值（在本例中为 11）。

FinanceItemViewControl 是一个自定义用户控件。

```
<common:FinanceItemViewControl Grid.Column="2" Month="11"/> 
```

Month 是一个依赖属性，如下面的代码所示：

```
public sealed partial class FinanceItemViewControl : UserControl
    {
...

        public static readonly DependencyProperty MonthProperty = DependencyProperty.Register
        (
             "Month",
             typeof(int),
             typeof(FinanceItemViewControl),
             new PropertyMetadata(
             0, new PropertyChangedCallback(MonthProperty_Changed))
        );

        public int Month
        {
            get { return (int)GetValue(MonthProperty); }
            set { SetValue(MonthProperty, value); }
        }
        #endregion

        private static void MonthProperty_Changed(DependencyObject source, DependencyPropertyChangedEventArgs e)
        {
            //TODO: trigger data reload
        }

        public FinanceItemViewControl()
        {
            this.InitializeComponent();
...

            Debug.WriteLine("Constructor: " + Month);

            detailPageDataModel = new ExpenseDetailPageDataModel(Month);
...
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T00:54:02.527

您不能将该逻辑放在构造函数中，因为正如您所注意到的，数据上下文尚未加载。你可以做以下两件事之一：

1.  将逻辑放入`MonthProperty_Changed`事件中。
2.  使用控件的`Loaded`事件：

* * *

```
public FinanceItemViewControl()
{
    this.InitializeComponent();
    detailPageDataModel = new ExpenseDetailPageDataModel(Month);
    this.Loaded += UserControl_Loaded;
}

private void UserControl_Loaded(object sender, RoutedEventArgs e)
{
    Debug.WriteLine("Constructor: " + Month);
} 
```

# powershell - Powershell将一个长数组分成一行长度为N的数组？

> ID：13888253
> 
> 赞同：10
> 
> 时间：2012-12-15T00:50:09.007
> 
> 标签：powershell

例如，给定一个列表`1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8`和一个数字 4，它返回一个长度为 4 的列表列表，即 `(1, 2, 3, 4), (5, 6, 7, 8), (1, 2, 3, 4), (5, 6, 7, 8)`.

基本上我想在 Powershell 中实现以下 Python 代码。

```
s = 1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8
z = zip(*[iter(s)]*4)  # Here N is 4
# z is (1, 2, 3, 4), (5, 6, 7, 8), (1, 2, 3, 4), (5, 6, 7, 8) 
```

以下脚本返回 17 而不是 5。

```
$a = 1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8,0
$b = 0..($a.Length / 4) | % {  @($a[($_*4)..($_*4 + 4 - 1)]) } 
$b.Length 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2014-11-10T18:14:24.253

这有点老了，但我想我会加入用于将数组拆分为块的方法。您可以将 Group-Object 与构造属性一起使用：

```
$bigList = 1..1000

$counter = [pscustomobject] @{ Value = 0 }
$groupSize = 100

$groups = $bigList | Group-Object -Property { [math]::Floor($counter.Value++ / $groupSize) } 
```

`$groups`将是 GroupInfo 对象的集合；在这种情况下，每个组将恰好有 100 个元素（可通过`$groups[0].Group`、`$groups[1].Group`等访问。）我使用计数器的对象属性来避免 -Property 脚本块内的范围问题，因为简单`$i++`不会写回原变量。或者，您可以使用`$script:counter = 0`and`$script:counter++`并在没有自定义对象的情况下获得相同的效果。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-15T01:20:41.887

写于 2009 年[PowerShell Split-Every 函数](http://www.dougfinke.com/blog/index.php/2009/10/14/powershell-split-every-function/)

大概可以改进。

```
Function Split-Every($list, $count=4) {
    $aggregateList = @()

    $blocks = [Math]::Floor($list.Count / $count)
    $leftOver = $list.Count % $count
    for($i=0; $i -lt $blocks; $i++) {
        $end = $count * ($i + 1) - 1

        $aggregateList += @(,$list[$start..$end])
        $start = $end + 1
    }    
    if($leftOver -gt 0) {
        $aggregateList += @(,$list[$start..($end+$leftOver)])
    }

    $aggregateList    
}

$s = 1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8

$r = Split-Every $s 4

$r[0]
""
$r[1]
""
$r[2]
""
$r[3] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-15T10:35:31.453

```
PS> $a = 1..16
PS> $z=for($i=0; $i -lt $a.length; $i+=4){ ,($a[$i]..$a[$i+3])}
PS> $z.count
4    

PS> $z[0]
1
2
3
4

PS> $z[1]
5
6
7
8

PS> $z[2]
9
10
11
12

PS> $z[3]
13
14
15
16 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-18T12:56:03.310

@Shay Levy 答案：如果您将 a 的值更改为 1..15，那么您的解决方案将不再有效（Peter Reavy 评论）

所以这对我有用：

```
$a = 1..15
$z=for($i=0; $i -lt $a.length; $i+=4){if ($a.length -gt ($i+3)) { ,($a[$i]..$a[$i+3])} else { ,($a[$i]..$a[-1])}}
$z.count 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-15T03:15:46.403

```
$a = 1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8,0
$b = 0..([Math]::ceiling($a.Length / 4) - 1) | 
    % {  @(, $a[($_*4)..($_*4 + 4 - 1)]) } 
```

不知道为什么要在后面加逗号`(`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-07-15T07:45:47.320

```
Clear-Host

$s = 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18

$count = $s.Length

$split = $count/2

$split --

$b = $s[0..$split]

$split ++

$a = $s[$split..$count]

write-host "first array"

$b

write-host "next array"

$a

#clean up
Get-Variable -Exclude PWD,*Preference | Remove-Variable -EA 0 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-04-08T19:04:55.260

使用`select`. 不用担心是否`$list.Count`可以除以`$chunkSize`。

```
function DivideList {
    param(
        [object[]]$list,
        [int]$chunkSize
    )

    for ($i = 0; $i -lt $list.Count; $i += $chunkSize) {
        , ($list | select -Skip $i -First $chunkSize)
    }
}

DivideList -list @(1..17) -chunkSize 4 | foreach { $_ -join ',' } 
```

输出：

```
1,2,3,4
5,6,7,8
9,10,11,12
13,14,15,16
17 
```

# objective-c - Cocos2D - 自动设置精灵移动速度

> ID：13888256
> 
> 赞同：4
> 
> 时间：2012-12-15T00:50:46.577
> 
> 标签：objective-c, animation, cocos2d-iphone, ccsprite

我想知道如何立即让我的精灵`CCSprite *van`从一开始就以可控的速度自动移动，例如`int *speed = 1, 2, 3+`. 我环顾四周，但我发现的一切都不符合我的需要。这个问题有简单的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T01:20:20.470

您必须使用 CCSpeed 操作：

```
CCSpeed* speed= [CCSpeed actionWithAction: yourMoveAction speed: 1.0f];
// yourMoveAction is an action like CCMoveTo for example
[sprite runAction: speed]; 
```

然后您可以在精灵移动时使用 setSpeed 更改速度：

```
[speed setSpeed: 2.0f]; 
```

# javascript - 如何在一个 HTML 文档中使用多个 javascript 事件？

> ID：13888260
> 
> 赞同：0
> 
> 时间：2012-12-15T00:51:16.343
> 
> 标签：javascript, events, mouseevent, keyevent

我有一个包含 2 个 javascript 事件的页面，一个由鼠标触发，另一个由键盘触发。当我加载页面时，我可以让一个或另一个工作，但不能同时工作。如果我先按一个键，该功能将运行，但随后我无法进行鼠标单击或其他按键操作。反之亦然。我知道 jQuery 让这更容易，但我不想让我的用户为每个页面下载它，所以我试图用老式的方式来做这件事。我已经阅读了尽可能多的关于 javascript 事件的内容，但我被困在这里...

在此先感谢，布拉德。注意：在 Chrome 和 Safari 中我得到了上述结果，Firefox 和 Opera 只能使用按键功能

```
<html>
<head>
<script>
function create(event) {
var x=event.clientX-14;
var y=event.clientY-33;
var output = document.write("<p id=\"text\" style=\"background-color: white; position:    absolute; top:" + y + "px;left:" + x + "px;\";>You're Text, your M@jesty!</p>");
}
function type(event)
{
var letter_in = event.keyCode;
var letter = String.fromCharCode(letter_in);
//var shift = event.shiftKey;
//if (shift === false) {letter = String.toLowerCase;}
document.write(letter);
}
</script>
</head>

<body onmousedown="create(event)" onkeydown="type(event)">

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T00:55:53.513

这是因为您正在使用`document.write()`which 清除页面上的所有其他内容，包括您的处理程序。

在文档加载后调用`document.write()`会隐式调用`document.open()`，这会清除文档。

所以要解决这个问题，你想使用类似`innerHTML`的东西只更新页面中元素的内容。

看[这个例子](http://jsbin.com/uluweq/1)：

```
<html>
  <head>

  </head>

  <body onmousedown="create(event)" onkeydown="type(event)">
    <div id="foo"></div>

    <script>
      function create(event) {
        var x=event.clientX-14;
        var y=event.clientY-33;
        var output = document.getElementById("foo").innerHTML = "<p id=\"text\" style=\"background-color: white; position:    absolute; top:" + y + "px;left:" + x + "px;\";>You're Text, your M@jesty!</p>";
      }
          function type(event)
          {
            var letter_in = event.keyCode;
            var letter = String.fromCharCode(letter_in);
            //var shift = event.shiftKey;
            //if (shift === false) {letter = String.toLowerCase;}
            document.getElementById("foo").innerHTML = letter;
          }
    </script>
  </body>
</html> 
```

# android - Android 自定义列表视图中的 NullPointerException

> ID：13888263
> 
> 赞同：0
> 
> 时间：2012-12-15T00:52:23.033
> 
> 标签：android, android-listview

在我的应用程序中，我使用 Android 自定义视图来显示一些日志信息。在该视图中，我想根据某些标准更改项目的颜色。我尝试使用以下代码导致 getView 中出现 NullPointerException。

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    try {
        View row = convertView;
        ItemHolder holder = null;

        if( row == null ){
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(layoutResouceId, parent, false);

            holder = new ItemHolder();
            holder.imgIcon = (ImageView)row.findViewById(R.id.imgIcon);
            holder.txtPhoneno = (TextView)row.findViewById(R.id.lvphoneno);
            holder.txtDateTime = (TextView)row.findViewById(R.id.lvdatetime);
            holder.txtSerialno = (TextView)row.findViewById(R.id.lvserialno);
            holder.txtStatus = (TextView)row.findViewById(R.id.lvstatus);

            row.setTag(holder);
        }
        else {
            holder = (ItemHolder)row.getTag();
        }

        MyListViewItem item = items.get(position);
        holder.imgIcon.setImageResource(item.icon);
        holder.txtPhoneno.setText(item.phoneno);
        holder.txtDateTime.setText(item.datetime);
        holder.txtSerialno.setText(item.serialno);

        if( !item.status.isEmpty()){
            if( -1 != item.status.indexOf("OK"))
                holder.txtStatus.setTextColor(Color.GREEN);
            else
                holder.txtStatus.setTextColor(Color.RED);
        }

        holder.txtStatus.setText(item.status);
        return row;         
    }
    catch (Exception e) {
        Helper.Log(getContext(), e.toString());
    }
    return null;
} 
```

但有趣的是，当我删除下面的行时它工作正常

```
 if( !item.status.isEmpty()){
            if( -1 != item.status.indexOf("OK"))
                holder.txtStatus.setTextColor(Color.GREEN);
            else
                holder.txtStatus.setTextColor(Color.RED);
        } 
```

日志猫

```
 12-15 07:04:49.668: E/AndroidRuntime(331): FATAL EXCEPTION: main
    12-15 07:04:49.668: E/AndroidRuntime(331): java.lang.NullPointerException
    12-15 07:04:49.668: E/AndroidRuntime(331):  at android.widget.AbsListView.obtainView(AbsListView.java:1432)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at android.widget.ListView.makeAndAddView(ListView.java:1745)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at android.widget.ListView.fillDown(ListView.java:670)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at android.widget.ListView.fillSpecific(ListView.java:1302)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at android.widget.ListView.layoutChildren(ListView.java:1576)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at android.widget.AbsListView.onLayout(AbsListView.java:1260)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at android.view.View.layout(View.java:7175)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at android.view.View.layout(View.java:7175)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at android.view.View.layout(View.java:7175)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at android.view.View.layout(View.java:7175)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at android.view.View.layout(View.java:7175)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1140)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at android.os.Handler.dispatchMessage(Handler.java:99)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at android.os.Looper.loop(Looper.java:123)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at android.app.ActivityThread.main(ActivityThread.java:3683)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at java.lang.reflect.Method.invokeNative(Native Method)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at java.lang.reflect.Method.invoke(Method.java:507)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    12-15 07:04:49.668: E/AndroidRuntime(331):  at dalvik.system.NativeStart.main(Native Method) 
```

请帮我解决这个问题

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T00:53:25.857

我敢打赌那`status`是空的：

```
if( -1 != item.status.indexOf("OK")) 
```

`item`显然不是 null 并且假设它`holder.txtStatus.setText()`也不会抛出 NPE，这只会留下`status`......

（但如果没有更多信息，我无法帮助您。）

# mysql - MySQL，存储过程，如何从两个查询中获取结果，更新解决方案

> ID：13888266
> 
> 赞同：0
> 
> 时间：2012-12-15T00:53:02.393
> 
> 标签：mysql, stored-procedures, count, rowset

我的程序：（这是一个计划）

```
 delimiter //
  CREATE PROCEDURE get_random_data()
  BEGIN
  Declare Count_a INT;
      SELECT Floor(Count(`id_x`) * Rand()) INTO Count_a From `x_data`  Where `ok_w` = 1 And `active` = 2 And `time` >= Unix_timestamp();

   # Now We select Some Rows
   SELECT `id_x` From `x_data` Where `spec` = 1 Limit Count_a,3;

   # And if Count of this select is small than < 3

   IF(row_count() < 3) then
      SELECT `id_anonsu` From `x_data` Where `spec` = 0 Limit Count_a,2;
   END IF ;

  END//
  delimiter ; 
```

// 目标

如何从两个查询中获取结果？// 一个来自 if 语句之前的查询

// 第二个来自语句中的查询，如果第一个查询计数小于 3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T10:17:41.347

好的，我找到了答案。

原代码：

```
 IF(row_count() < 3) then
       SELECT `id_anonsu` From `x_data` Where `spec` = 0 Limit Count_a,2;
   END IF ; 
```

被替换为：

```
IF(FOUND_ROWS() < 3) THEN SELECT `id_anonsu` From `x_data` Where `spec` = 0 Limit Count_a,2;
END IF ; 
```

* * *

更好的版本：

使用查询很好（谁使用限制）并且我们需要知道存储过程中的（查询）返回的行数

带演出次数的版本

```
 DROP PROCEDURE IF EXISTS test;
    Delimiter //
    CREATE PROCEDURE test(OUT w INT)
    BEGIN
    Declare Counter_a INT DEFAULT 0;

        Set @id_counter = 0;

        SELECT Floor(Count(`id_x`) * Rand()) INTO Counter_a From `x_data`  Where `ok_w` = 1 And `active` = 2 And `time` >= Unix_timestamp();

        SELECT @id_counter := @id_counter + 1, `id_x` From `x_data` Where `spec` = 1 Limit Counter_a,3;

        IF @id_counter < 3 THEN 
            Set Counter_a = Counter_a + 1;
            SELECT `id_x` From `x_data` Limit Counter_a,2;

        END IF;

        Set w = @id_counter;

    END //
    Delimiter ; 
```

输出如下：

```
 mysql> Call test(@z); Select @z;
  +--------------------------------+-----------+
  | @id_counter := @id_counter + 1 |   id_x    |
  +--------------------------------+-----------+
  |                              1 |         7 |
  |                              2 |         8 |
  +--------------------------------+-----------+
  2 rows in set (0.00 sec)

  +-----------+
  |   id_x    |
  +-----------+
  |         8 |
  +-----------+
  1 row in set (0.01 sec)

  Query OK, 0 rows affected (0.01 sec)

  +------+
  | @z   |
  +------+
  |    2 |
  +------+
  1 row in set (0.00 sec) 
```

* * *

* * *

隐藏计数的版本

```
 DROP PROCEDURE IF EXISTS test;
    Delimiter //
    CREATE PROCEDURE test(OUT w INT)
    BEGIN
    Declare Counter_a INT DEFAULT 0;

        Set @id_counter = 0;

        SELECT Floor(Count(`id_x`) * Rand()) INTO Counter_a From `x_data`  Where `ok_w` = 1 And `active` = 2 And `time` >= Unix_timestamp();

        SELECT `id_x` From `x_data` Where @id_counter := @id_counter + 1 And `spec` = 1 Limit Counter_a,3;

        IF @id_counter < 3 THEN 
            Set Counter_a = Counter_a + 1;
            SELECT `id_x` From `x_data` Limit Counter_a,2;

        END IF;

        Set w = @id_counter;

    END //
    Delimiter ; 
```

输出如下：

```
 mysql> Call test(@z); Select @z;
  +-----------+
  |   id_x    |
  +-----------+
  |         7 |
  |         8 |
  +-----------+
  2 rows in set (0.00 sec)

  +-----------+
  |   id_x    |
  +-----------+
  |         8 |
  +-----------+
  1 row in set (0.01 sec)

  Query OK, 0 rows affected (0.01 sec)

  +------+
  | @z   |
  +------+
  |    2 |
  +------+
  1 row in set (0.00 sec) 
```

* * *

@小费

```
 @id_counter := @id_counter + 1 
```

它必须在 where 的所有条件之前。

例如：

```
[.....] Where @id_counter := @id_counter + 1 And `field_2` > 1 LIMIT 0, 5; 
```

将永远返回 1...

* * *

正确版本

```
[.....] Where `field_2` > 1 And  [Other conditions] And @id_counter := @id_counter + 1  LIMIT 0, 5; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T09:58:34.780

这取决于您使用的客户端界面。例如 JDBC 有 statement.getMoreResults()

有趣的是，查询同时包含分隔符 // 和 // 注释。

# c - 当变量超出范围时会发生什么？

> ID：13888268
> 
> 赞同：15
> 
> 时间：2012-12-15T00:53:10.727
> 
> 标签：c, memory-management

在大多数托管语言（即具有 GC 的语言）中，超出范围的局部变量是不可访问的，并且具有更高的 GC 优先级（因此，它们将首先被释放）。

现在，C 不是托管语言，这里超出范围的变量会发生什么？

我在 C 中创建了一个小测试用例：

```
#include <stdio.h>
int main(void){
    int *ptr;

    {
        // New scope
        int tmp = 17;
        ptr = &tmp; // Just to see if the memory is cleared
    }

    //printf("tmp = %d", tmp); // Compile-time error (as expected)
    printf("ptr = %d\n", *ptr);

    return 0;
} 
```

我用 GCC 4.7.3 编译，上面的程序打印出来了`17`，为什么？何时/在什么情况下会释放局部变量？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-15T00:57:36.067

代码示例的实际行为由两个主要因素决定：1) 行为*未*由语言定义，2) 优化编译器将生成与 C 代码物理上不匹配的机器代码。

例如，尽管行为未定义，GCC 可以（并且将）轻松地将您的代码优化为

```
printf("ptr = %d\n", 17); 
```

这意味着您看到的输出与代码中的任何变量发生的情况几乎没有关系。

如果您希望代码的行为更好地反映物理上发生的情况，您应该声明您的指针`volatile`。行为仍然是未定义的，但至少它会限制一些优化。

现在，关于局部变量超出范围时会发生什么。没有任何物理发生。一个典型的实现会在程序堆栈中分配足够的空间来存储当前函数中最深的块嵌套级别的所有变量。该空间通常在函数启动时一次性在堆栈中分配，并在函数退出时释放。

这意味着以前占用的内存`tmp`继续保留在堆栈中，直到函数退出。这也意味着相同的堆栈空间可以（并且将）被同级块中具有大致相同“局部深度”级别的不同变量重用。该空间将保存最后一个变量的值，直到在某个兄弟块变量中声明的其他变量覆盖它为止。在您的示例中，没有人覆盖以前占用的空间`tmp`，因此您通常会看到该值`17`在该内存中完好无损。

但是，如果你这样做

```
int main(void) {
  volatile int *ptr;
  volatile int *ptrd;

  { // Block
    int tmp = 17;
    ptr = &tmp; // Just to see if the memory is cleared
  }

  { // Sibling block
    int d = 5;
    ptrd = &d;
  }

  printf("ptr = %d %d\n", *ptr, *ptrd);
  printf("%p %p\n", ptr, ptrd);
} 
```

您将看到以前占用的空间`tmp`已被重新使用，`d`并且其以前的值已被覆盖。第二个`printf`通常会为两个指针输出相同的指针值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-15T00:55:28.477

自动对象的生命周期在它被声明的块的末尾结束。

在对象的生命周期之外访问对象是 C 中未定义的行为。

> （C99，6.2.4p2）“如果一个对象在其生命周期之外被引用，则行为是不确定的。当指针指向的对象到达其生命周期的末尾时，指针的值变得不确定。”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-15T00:57:26.343

局部变量在堆栈上分配。在您考虑 GC 语言或在堆上分配的内存的意义上，它们并没有“释放”。它们只是超出了范围，对于内置类型，代码不会做任何事情——对于对象，析构函数被调用。

超出范围访问它们是未定义的行为。您很幸运，因为还没有其他代码覆盖该内存区域。

# python - 不能使用单独的 .py 文件来包含 Flask 中的视图类

> ID：13888271
> 
> 赞同：0
> 
> 时间：2012-12-15T00:53:37.620
> 
> 标签：python, class, import, sqlite, flask

我试图通过将我的每个视图类放在一个单独的 .py 文件中，然后将主应用程序文件导入我的视图文件来保持我的代码干净。但是，当我尝试将某些内容发布到我的数据库时，我收到了这个错误：

**ValueError：信号仅在主线程中有效**

我玩了一段时间，最终，我通过简单地将视图放在我的主 app.py 文件中解决了这个问题。

我很想知道是否有人知道为什么会这样。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T07:07:38.893

Flask 如何帮助您在模块中更好地组织代码的方式是[蓝图](http://flask.pocoo.org/docs/blueprints/)

[这是一个使用蓝图](https://github.com/mitsuhiko/flask/wiki/Large-app-how-to)的应用程序的简单示例。使用蓝图将降低您的应用程序复杂性。但是，如果您的应用程序很小并且您不想在那里使用蓝图，为什么不将您的类编写在单独的文件中，然后导入它们并使用呢？当然，问题中的一些代码会有所帮助:)

# django - Django 中的任务队列回调

> ID：13888272
> 
> 赞同：1
> 
> 时间：2012-12-15T00:53:55.500
> 
> 标签：django, google-app-engine, callback, task-queue

我正在实现一个谷歌应用引擎网络服务，它可以裁剪非常大的图像。但是，裁剪可能需要超过 30 秒，这（出于某种原因）对于应用程序引擎来说是一个真正的问题。为了避免这种情况，我实施了 Taskques。但是，一旦在任务队列中裁剪了图像，我想更新发出原始请求的页面，向用户显示新裁剪的图像。

所以我的问题是，是否有某种任务队列回调？还是我只需要继续轮询服务器以查看我的任务队列是否已完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T01:01:25.233

你可以试试[Channel API](https://developers.google.com/appengine/docs/python/channel/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T17:51:10.420

转到此视频中的 16:00 标记（尽管我也绝对推荐前 16 分钟）：[http ://www.youtube.com/watch?v=AM0ZPO7-lcE](http://www.youtube.com/watch?v=AM0ZPO7-lcE)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-15T05:08:13.830

我更喜欢使用 django-celery，它更健壮，更适合处理异步任务。

它也有最终结果，默认情况下不存在，但您可以通过在设置中指定来使用它。任务完成后，您可以使用它来获取所需的任何类型的信息。[在这里](http://docs.celeryproject.org/en/latest/getting-started/introduction.html)检查

# php - 回显 foreach 循环

> ID：13888276
> 
> 赞同：2
> 
> 时间：2012-12-15T00:54:26.617
> 
> 标签：php, arrays

我有以下代码

```
 $contents = file_get_contents('folder/itemtitle.txt');
$fnamedata = file_get_contents('folder/fname.txt');
$fnamearray = explode("\n", $fnamedata);
    $contents = explode("\n", $contents);
    foreach ($contents as $key => $itemline)

    {
    }

    foreach ($fnamearray as $key2 => $fname)
    {

    echo ($fname);
    echo ($itemline);
    } 
```

我想要做的是让每个文件的第一行回显，所以输出看起来像

fname[0},itemline[0],fname[1],itemline[1]

我得到的只是这个 fname[0],fname[1],fname[2].... 等

H

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T00:57:43.477

假设索引将始终匹配：

```
$contents = file_get_contents('folder/itemtitle.txt');
$fnamedata = file_get_contents('/home/b1396hos/public_html/ofwgkta.co.uk/dd_folder/fname.txt');
$fnamearray = explode("\n", $fnamedata);
$contents = explode("\n", $contents);

for($i = 0; $i < count($contents); $i++)
{
    echo $fnamearray[$i];
    echo $contents[$i];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T00:57:01.347

由于两个数组都是简单的连续数字索引数组，因此您可以只使用`for`循环：

```
$l = max(count($fnamedata),count($contents));
for($i=0; $i<$l; $i++) {
  $itemline = $contents[$i];
  $fname = $fnamearray[$i];
  // do stuff
} 
```

# postgresql - ActionView::Template::Error (PG::Error: ERROR: column "recipes.id" 必须出现在 GROUP BY 子句中或在聚合函数中使用

> ID：13888277
> 
> 赞同：0
> 
> 时间：2012-12-15T00:54:36.870
> 
> 标签：postgresql, heroku

我无法让此方法与 heroku 一起使用，当我尝试加载页面时，我收到了上述错误消息。我在之前的帖子中得到了一些帮助，但似乎重构没有奏效。从我读过的内容来看，我需要在搜索和组中包含模型的所有列。这是正确的吗？方法和架构如下

方法

```
def self.popular_recipes
  select('recipes.*, count(*) AS dish_count').
  group('dish_name').
  order('dish_count DESC')
 end 
```

架构

```
create_table "recipes", :force => true do |t|
t.string   "dish_name"
t.string   "difficulty"
t.text     "preperation_time"
t.datetime "created_at",          :null => false
t.datetime "updated_at",          :null => false
t.integer  "user_id"
t.string   "avatar_file_name"
t.string   "avatar_content_type"
t.integer  "avatar_file_size"
t.datetime "avatar_updated_at"
t.integer  "country_id"
t.string   "category"
t.text     "description"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T02:42:05.277

问题是您正在选择`recipes.*`哪个混淆 PostgreSQL。

`recipes`假设您在一个包含 500 条记录的表中有 10 个唯一的菜名。一个`GROUP BY dish_name`子句将只返回 10 行。因此，如果您要求`recipes.*`，Postgres 应该如何知道如何填写 10 行的其他列？

改为这样做：

```
def self.popular_recipes
  select('dish_name, count(*) AS dish_count').
  group('dish_name').
  order('dish_count DESC')
 end 
```

请注意，MySQL 在这种情况下的行为不同（没有错误），并且会为每个返回`dish_name`一行，但本质上是未定义的行。

# java - JDBC 连接超时

> ID：13888278
> 
> 赞同：2
> 
> 时间：2012-12-15T00:54:46.807
> 
> 标签：java, mysql, jdbc

尝试创建一个基于 JDBC 的应用程序，该应用程序连接到允许用户编辑网站的数据库。

每次我从 eclipse 测试应用程序时，我都会收到连接超时错误并且不知道为什么。

抱歉，如果这是一个 n00by 问题，我是 JDBC 新手。任何帮助或建议将不胜感激。

下面是我的代码：

```
try 
{
    Class.forName("com.mysql.jdbc.Driver").newInstance(); 
    Connection con = DriverManager.getConnection(
        "jdbc:mysql://nkuwebdata.db.8750359.hostedresource.com",
        username,
        password);

    Statement stmt = con.createStatement();
    ResultSet rs = stmt.executeQuery("Select * FROM tbl_adminLogin");
    while(rs.next())
    {
        String s = rs.getString("name");
        System.out.println(s);
        break;
    }
} catch (SQLException e) 
{
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (InstantiationException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IllegalAccessException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (ClassNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

以下是在我的控制台中打印的错误消息：

```
com.mysql.jdbc.CommunicationsException: Communications link failure due to underlying exception: 

** BEGIN NESTED EXCEPTION ** 

java.net.ConnectException
MESSAGE: Connection timed out: connect

STACKTRACE:

java.net.ConnectException: Connection timed out: connect
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:256)
    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:271)
    at com.mysql.jdbc.Connection.createNewIO(Connection.java:2771)
    at com.mysql.jdbc.Connection.<init>(Connection.java:1555)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:285)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at uk.co.majorwebdesigns.ContentManager.connectToAndQueryDatabase(ContentManager.java:100)
    at uk.co.majorwebdesigns.ContentManager.createMenuBar(ContentManager.java:92)
    at uk.co.majorwebdesigns.ContentManager.launch(ContentManager.java:61)
    at uk.co.majorwebdesigns.ContentManager.main(ContentManager.java:133)

** END NESTED EXCEPTION **

Last packet sent to the server was 2 ms ago.
    at com.mysql.jdbc.Connection.createNewIO(Connection.java:2847)
    at com.mysql.jdbc.Connection.<init>(Connection.java:1555)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:285)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at uk.co.majorwebdesigns.ContentManager.connectToAndQueryDatabase(ContentManager.java:100)
    at uk.co.majorwebdesigns.ContentManager.createMenuBar(ContentManager.java:92)
    at uk.co.majorwebdesigns.ContentManager.launch(ContentManager.java:61)
    at uk.co.majorwebdesigns.ContentManager.main(ContentManager.java:133) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T06:01:26.937

连接超时通常发生在数据库服务器未运行时。我猜你的代码中缺少 dbname。只需检查[此链接](http://www.mkyong.com/jdbc/how-to-connect-to-mysql-with-jdbc-driver-java/)

```
Class.forName("com.mysql.jdbc.Driver");
Connection conn = null;
conn = DriverManager.getConnection("jdbc:mysql://hostname:port/dbname","username", "password");
conn.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-27T14:20:45.043

几件事：数据库不是通过本地`localhost:3306`而是通过网络必须通过防火墙。

端口可能是有序的，对于 MySQL，默认值为 3306，如`localhost:3306`.

这两件事都可能意味着没有联系，并且会解释你的错误。

事情应该关闭；否则可能会用完连接等。最好使用*try-with-resources*结构来完成。

然后几乎应该使用`PreparedStatement`s 来转义反斜杠和引号，并防止 SQL 注入。

```
try {
    Class.forName("com.mysql.jdbc.Driver").newInstance(); 
    try (Connection con = DriverManager.getConnection(
            "jdbc:mysql://nkuwebdata.db.8750359.hostedresource.com",
            username,
            password)) {

        String sql = "SELECT * FROM tbl_adminLogin";
        try (PreparedStatement stmt = con.prepareStatement(sql)) {
            try (ResultSet rs = stmt.executeQuery()) {
                if (rs.next()) {
                    String s = rs.getString("name");
                    System.out.println(s);
                }
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T06:41:31.483

检查您的连接凭据，然后检查您正在连接的服务器是否已启动并正在运行。

# php - 登录后会话未保存

> ID：13888281
> 
> 赞同：1
> 
> 时间：2012-12-15T00:54:56.663
> 
> 标签：php, mysql, login

设计用户成员资格的另一种尝试。必须登录成功，在数据库中找到数据。但是在我的索引文件中，登录后，它应该检查我是否已登录并显示指向我的帐户的链接，而不是注册和登录。这是代码：

```
<?php
session_start(); // Must start session first thing
// See if they are a logged in member by checking Session data
$toplinks = "";
if (isset($_SESSION['id'])) {
// Put stored session variables into local php variable
$userid = $_SESSION['id'];
$username = $_SESSION['username'];
$toplinks = '<a href="member_profile.php?id=' . $userid . '">' . $username . '</a>           &bull; 
<a href="member_account.php">Account</a> &bull; 
<a href="logout.php">Log Out</a>';
} else {
$toplinks = '<a href="join_form.php">Register</a> &bull; <a     href="login.php">Login</a>';
}
?> 
```

这是登录表单代码，我认为问题在于它没有存储我的会话ID：

```
<?php
if ($_POST['email']) {
//Connect to the database through our include 
include_once "connect_to_mysql.php";
$email = stripslashes($_POST['email']);
$email = strip_tags($email);
$email = mysql_real_escape_string($email);
$password = preg_replace("[^A-Za-z0-9]", "", $_POST['password']); 
// filter everything but numbers and letters
$password = md5($password);
// Make query and then register all database data that -
// cannot be changed by member into SESSION variables.
// Data that you want member to be able to change -
// should never be set into a SESSION variable.
$sql = mysql_query("SELECT * FROM users WHERE email='$email' AND password=
'$password'AND emailactivated='1'"); 
$login_check = mysql_num_rows($sql);
if($login_check > 0){ 
while($row = mysql_fetch_assoc($sql)){ 
    // Get member ID into a session variable
    $userid = $row["id"];   
    $_SESSION['id'] = $userid;
    // Get member username into a session variable
    $username = $row["username"];
    $_SESSION['username'] = $username;
    // Update last_log_date field for this member now
    mysql_query("UPDATE users SET lastlogin=now() WHERE id='$userid'"); 
    // Print success message here if all went well then exit the script
    header("location: member_profile.php?id=$userid"); 
    exit();
} // close while
} else {
// Print login failure message to the user and link them back to your login page
print '<br /><br /><font color="#FF0000">No match in our records, try again 
</font>  <br/>
<br /><a href="login.php">Click here</a> to go back to the login page.';
exit();
}
}// close if post
?> 
```

我再次遵循某人的教程并尝试将其实施到我的网站，如果它有效，这将是完美的。请告知为什么在登录后没有设置 $toplinks。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T01:05:48.560

我认为问题在于，您必须`session_start()`在要使用会话的每个文件中包含 。否则它像普通数组一样在文件中工作，但不是全局的。在您的表格中，我看不到您开始会话。

**编辑：**仅当您有 2 个文件时才需要此文件。当您只有一个文件并包含另一个页面时，当您在顶部包含一次时，它的工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T01:36:12.067

如果你想注销，那么你应该创建一个注销文件，并包括

`session_destroy();`

可能还添加一个 href 以通过执行以下操作来获取重定向链接：

`header('location:index.php'); // will return you to index as soon as you logout.`

# objective-c - libsqlite 和 dispatch_async

> ID：13888287
> 
> 赞同：0
> 
> 时间：2012-12-15T00:55:27.790
> 
> 标签：objective-c, sqlite, thread-safety, grand-central-dispatch

如果 libsqlite 不是线程安全的，那么类似的代码

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

__block NSArray *__albumsCollection = albumCollections;

dispatch_apply(count, queue, ^(size_t i) 
{ 
   MPMediaItem *albumObj = [[__albumsCollection objectAtIndex:i] representativeItem];

   ///// making some sqlite queries    
}); 
```

会引发 BAD_EXEC。

那么如何让这段代码线程安全呢？

我的解决方案是使用主队列

```
dispatch_apply(count, dispatch_get_main_queue(), ^(size_t i) 
{
   /// my sqllite queries
}); 
```

但我对此并不满意。如何让它变得更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T01:23:32.350

您可能希望在非主线程上创建一个单独的[**私有调度队列**](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html)，而不是使用`dispatch_get_main_queue()`获取主队列，如下所示：[](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html)

 **```
dispatch_queue_t queue = dispatch_queue_create("com.example.MyQueue", DISPATCH_QUEUE_SERIAL); // or NULL as last parameter if prior to OS X 10.7/iOS 5.0
dispatch_apply(count, queue, ^(size_t i) {
 /// your SQLite queries
}); 
```

* * *

或者，您可以使用`FMDatabaseQueue`Gus Mueller ( [@ccgus](https://stackoverflow.com/users/23326/ccgus) ) 出色的[FMDB](https://github.com/ccgus/fmdb) SQLite 包装器框架（我会这样做）：

```
FMDatabaseQueue *queue = [FMDatabaseQueue databaseQueueWithPath:aPath];

[queue inDatabase:^(FMDatabase *db) {

    // Your SQLite queries:
    [db executeQuery:@"...", ...];
    ...

}]; 
```

…它将您的查询块发送到串行调度队列，同步包装其执行。

还不相信？

```
[queue inTransaction:^(FMDatabase *db, BOOL *rollback) {
    // Your SQLite queries:
    [db executeQuery:@"...", ...];
    ...
}]; 
```

现在怎么样？

此外，[自定义的基于块的 SQLite 函数](https://gist.github.com/ccgus/3238464)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T05:08:56.287

```
dispatch_queue_t q=dispatch_queue_create("name", NULL);
dispatch_sync(q, ^{
//your code is here
});

dispatch_async(dispatch_get_main_queue(), ^(void) {
//as soon as above block is completed, this block executed and you will be notified that     
//work is completed

}); 
```**

# ruby-on-rails - Rails 3 使用 Apache 在不同域（相同 ip）上的两个应用程序？

> ID：13888289
> 
> 赞同：1
> 
> 时间：2012-12-15T00:55:32.097
> 
> 标签：ruby-on-rails, ruby-on-rails-3, apache, subdomain, passenger

我最初在 apache2 上使用 phusion 乘客将我的单个 Rails 应用程序部署到域上，比如`bar.com`. 现在我希望将我最近创建的一个附加应用程序推送到 bar 域上的一个子域，比如`foo.bar.com`. 我对如何在`httpd.conf`文件中设置虚拟主机以允许此设置感到有些困惑。我通过godaddy设置我的DNS，这样新的子域将指向与初始域相同的IP地址（它们都驻留在同一台服务器上）。

这是我的 httpd.conf 文件中的 VirtualHosts（注意两个文档根指向不同的应用程序）：

```
NameVirtualHost *:80
<VirtualHost *:80>
  ServerName bar.com
  ServerAlias www.bar.com
  DocumentRoot /home/me/app1/public
  <Directory /home/me/app1/public>
    AllowOverride all
    Options -MultiViews
  </Directory>
</VirtualHost>  

<VirtualHost *:80>
  ServerName foo.bar.com
  ServerAlias foo.bar.com www.foo.bar.com
  DocumentRoot /home/me/app2/public
  <Directory /home/me/app2/public>
    AllowOverride all
    Options -MultiViews
  </Directory>
</VirtualHost> 
```

使用此设置，我可以导航到，`www.bar.com`或者`bar.com`但似乎子域不起作用，导航`foo.bar.com`到此页面：

> ## **未找到**
> 
> 在此服务器上找不到请求的 URL /。
> 
> Apache/2.2.20 (Ubuntu) 服务器位于 foo.bar.com 端口 80

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:54:10.193

这涉及几个步骤。首先，我将我的虚拟主机移到了我的 httpd.conf 文件之外，并在 sites-available 文件夹下创建了新文件，每个文件都以相应的域`bar.com`和`foo.bar.com`. 接下来，我必须通过运行 apache 命令将每个站点添加到启用站点`sudo a2ensite`。最后我不得不调用命令`sudo service apache2 reload`。重要的是每个命令都以管理员访问权限运行，否则它不起作用。

另外值得一提的是，像 Firefox 这样的浏览器喜欢缓存旧的网站域名数据，所以如果 url foo.bar.com 以前不起作用并且您解决了问题，它似乎仍然无法正常工作，直到您清除缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T02:25:28.560

还记得添加第二个虚拟主机后重启 apache 吗？

# clojure - 我如何有条件地连接到 clojure 向量

> ID：13888290
> 
> 赞同：5
> 
> 时间：2012-12-15T00:55:34.950
> 
> 标签：clojure

在 clojure 中是否有更清洁的方法来执行以下操作？

```
(defn this [x] (* 2 x))
(defn that [x] (inc x))
(defn the-other [x] (-> x this that))

(defn make-vector [thing]
  (let [base (vector (this (:a thing))
                     (that (:b thing)))]
    (if-let [optional (:c thing)]
      (conj base (the-other optional))
      base)))

(make-vector {:a 1, :b 2}) ;=> [2 3]
(make-vector {:a 1, :b 2, :c 3}) ;=> [2 3 7] 
```

通过“更清洁”，我的意思是更接近于这个：

```
(defn non-working-make-vector [thing]
  (vector (this (:a thing))
          (that (:b thing))
          (if (:c thing) (the-other (:c thing)))))

(non-working-make-vector {:a 1, :b 2} ;=> [2 3 nil]  no nil, please!
(non-working-make-vector {:a 1, :b 2, :c 3} ;=> [2 3 7] 
```

请注意，我可能想在其中的任何键上调用一些任意函数（例如`this`, `that`, `the-other`）`thing`并将结果放入返回的向量中。重要的是，如果地图中不存在密钥，则不应将 a`nil`放入向量中。

这类似于[这个问题](https://stackoverflow.com/q/8992997/684888)，但输出是一个向量而不是一个地图，所以我不能使用`merge`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T16:52:21.437

```
(defn this [x] (* 2 x))
(defn that [x] (inc x))
(defn the-other [x] (-> x this that))

(def k-f-map {:a this
              :b that
              :c the-other})

(def m1 {:a 1 :b 2})
(def m2 {:a 1 :b 2 :c 3})

(defn make-vector [k-f-map m]
  (reduce (fn [res [fk fv]]
            (if (fk m)
              (conj res (fv (fk m)))
              res))
          [] k-f-map))

(make-vector k-f-map m1)
-> [2 3]

(make-vector k-f-map m2)
-> [2 3 7] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T02:48:56.810

```
;;; replace [:a :b :c] with a vector of arbitrary functions
;;; of your choice, or perhaps accept a seqable of functions
;;; as an extra argument
(defn make-vector [thing]
  (into [] (keep #(% thing) [:a :b :c])))

;;; from the REPL:
(make-vector {:a 1 :b 2})
; => [1 2]
(make-vector {:a 1 :b 2 :c 3})
; => [1 2 3] 
```

请注意，`keep`仅抛出`nil`; `false`将包含在输出中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-06T23:28:36.120

或使用`cond->`？

您`make-vector`在`cond->`版本中的功能：

```
(defn make-vector [thing]
  (cond-> [(this (:a thing))
           (that (:b thing))]
    (:c thing) (conj (the-other (:c thing))))) 
```

您可以有更多条件或将 :a 和 :b 更改为可选的。

# r - 将汇总输出存储在表或矩阵列表中

> ID：13888292
> 
> 赞同：0
> 
> 时间：2012-12-15T00:56:08.167
> 
> 标签：r

如何将以下字符串向量“c”读入表列表？最短的 read.table strsplit 是哪种方式？例如，我看不到如何在一个命令中读取表格*Edit:c[4:6]* a[4:6]。

```
require(car)
m<-matrix(rnorm(16),4,4,byrow=T)
a<-Anova(lm(m~1),type=3,idata=data.frame(treatment=factor(1:4)),idesign=~treatment)
c<-capture.output(summary(a,multivariate=F))
c 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T02:11:39.137

这将返回第 4:6 行

```
 c[4:6] 
```

现在，如果您想解析它，我将分两步完成。首先在第 5:6 行的列值上，然后添加回名称。

```
> vals <- read.table(text=c[5:6])
> txt <- "                \t    SS\t num Df\t  Error SS\t den Df\t       F\t  Pr(>F)"
> names(vals) <- names(read.delim(text=txt))
> vals
            X         SS num.Df  Error.SS den.Df       F  Pr..F.
1 (Intercept) 0.57613392      1 0.4219563      3 4.09616 0.13614
2   treatment 1.85936442      3 8.2899759      9 0.67287 0.58996 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T01:35:27.717

编辑——您可以查看`summary`函数的源代码并计算自己所需的数量

```
getAnywhere(summary.Anova.mlm) 
```

最初的想法似乎行不通。

```
c2 <- summary(a)
# find out what 'properties' the summary object has
# turns out, it is just the Anova object
class(c2) <- "list"
names(c2) 
```

这返回

```
 [1] "SSP"        "SSPE"       "P"          "df"         "error.df"  
 [6] "terms"      "repeated"   "type"       "test"       "idata"     
[11] "idesign"    "icontrasts" "imatrix"    "singular" 
```

我们可以访问它们

```
c2$SSP
c2$SSPE 
```

`c`使用 R 内部函数作为变量名似乎不是一个好主意

# jquery - jquery远程传递2个post数据

> ID：13888293
> 
> 赞同：1
> 
> 时间：2012-12-15T00:56:12.080
> 
> 标签：jquery

我有一个表格，要求提供某个日期、笔号和周期号。如果已经有该特定日期的条目，则循环编号和笔号。它应该返回 false。我已经使用 jquery 远程验证来做到这一点。我的问题是如何制作 2 个将传递给我的控制器的发布数据？

这是我的代码：

```
 pen_no: {
  required: true,
  remote:{
  url: "admin/val_pen_no_dr",
  type: "post",
  data:{
  cycle_no_trans:function(){
  return $("#cycle_no_trans").val();
  }
  }         
    }    
  }, 
```

问题是我只能将cycle_no_trans 变成post 数据。我想在我的帖子数据中添加日期字段。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T01:29:49.283

```
data: {
   cycle_no_trans: $("#cycle_no_trans").val(),
   date: (new Date).toDateString()
} 
```

`data`接受查询字符串或 JavaScript 对象；您可以放置​​任意数量的参数，甚至可以嵌套它们。

# ios - Cocos2D MenuLevel如何加锁、解锁

> ID：13888294
> 
> 赞同：0
> 
> 时间：2012-12-15T00:56:34.297
> 
> 标签：ios, cocos2d-iphone

我在我的游戏中使用 MenuLevel 来加载关卡.. [http://www.prioregroup.com/iphone/menulevel.aspx](http://www.prioregroup.com/iphone/menulevel.aspx)

目前，一个关卡是否被锁定，它正在加载。如果它被锁定，它不应该被加载。我该怎么做？谢谢..

// 创建菜单项

```
 [menu createMenuItemLevel:1 position:ccp(x, size.height / 2) life:0 locked:NO];  

- (void)menuLevel:(MenuLevel *)menuLevel buttonSelected:(id)source
{
    CCMenuItem *item = (CCMenuItem*)source;
    NSString *msg = [NSString stringWithFormat:@"You have pressed the button # %d", item.tag]; // retrieve level number.. 
            NSLog(@"MenuLevel Sample %@", msg);

// What I want is something like..  if (item.locked == YES) do something

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T05:03:16.387

You can use the userData property. In your `MenuLevel.m` file add the following lines in

```
- (CCMenuItem*)createMenuItemLevel:(NSInteger)level 
                          position:(CGPoint)position 
                              life:(NSInteger)life 
                            locked:(BOOL)locked
                            target:(id)target
                          selector:(SEL)selector 
```

method.

```
if (locked)
{
    item.userData = @"locked";
}
else
{
    item.userData = @"notLocked";
} 
```

And in your `buttonSelected:` method check that userData as given below:

```
NSString *lockString = (NSString *)item.userData;
if ([lockString isEqualToString:@"locked"])
{
    // Locked level
}
else
{
    // Unlocked
} 
```

# django - Django 在模板中获取派生形式 CHOICES

> ID：13888305
> 
> 赞同：2
> 
> 时间：2012-12-15T00:57:40.003
> 
> 标签：django, django-templates

嗨，我有一个 Django 表单：

```
BAR_CHOICES = (
    ('1', 'Cheers'),
    ('2', 'The Blue Oyster'),
    ...
)

class ProjectInfoForm(forms.Form):
    foo = forms.ChoiceField(
        CHOICES = BAR_CHOICES,
    )
    ... 
```

当然，当我将此数据保存到模型时，这些值将作为整数存储在数据库中。现在，当我从保存的数据中获取这些值时，它们是整数。获取与其关联的选择字符串的最佳方法是什么。我应该将 BAR_CHOICES 导入模板吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T01:14:00.070

Django 提供了一种直接获取相关字符串的方法。看看[这里](https://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.get_FOO_display)

**更新：**

例子：

```
BAR_CHOICES = (
    ('1', 'Cheers'),
    ('2', 'The Blue Oyster'),
    ...
)

class Project(models.Model):
   foo = models.PositiveIntegerField(choices=BAR_CHOICES)
   ... 
```

在模板中你可以简单地做`{{project.get_foo_display}}`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T01:26:52.847

如果要在模板中呈现选择，可以迭代`form.field.choices`.

如果您想要模板中所选值的字符串表示，您将不得不在您的视图或表单中编写一些可以获取该信息的内容。

你可以模仿`get_FOO_display`你的形式..

```
def get_foo_display(self):
    return dict(BAR_CHOICES)[self.foo] 
```

# google-apps-script - 服务调用次数过多（Google Apps 脚本）

> ID：13888307
> 
> 赞同：14
> 
> 时间：2012-12-15T00:57:43.487
> 
> 标签：google-apps-script, google-sheets, custom-function

我想使用 Google Apps 脚本为电子表格制作自定义函数。我做了一个非常简单的功能：

```
function foo(){
    return "bar";
}; 
```

问题是我需要在几百个单元格中使用此功能。当我将函数粘贴`=foo()`到所有这些单元格中时，该函数在一些单元格中工作，但在大多数情况下，我收到此错误：**“服务调用次数过多：电子表格。`Utilities.sleep(1000)`在调用之间尝试。”**

[[此处截图]](http://i.imgur.com/k4KGW.png)

我想我不明白为什么这个简单的函数被认为是对电子表格服务的调用。我什至没有请求任何数据（函数本身除外）。那是问题吗？如果是这样，是否有解决方法？自定义函数可以使 Google 电子表格功能无限强大，但这个问题阻碍了在多个单元格中使用自定义函数的可能性。建议？

（PS——`Utilities.sleep()`当所有单元格同时调用它们的函数时，使用错误消息建议的函数根本没有帮助；它只会减慢单个单元格重复调用函数的速率。）

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2015-04-15T18:29:35.847

根据Apps 脚本功能指南的[优化部分：](https://developers.google.com/apps-script/guides/sheets/functions#optimization)

> 每次在电子表格中使用自定义函数时，Google 表格都会单独调用 Apps 脚本服务器。如果您的电子表格包含数十个（或数百个或数千个！）自定义函数调用，则此过程可能会很慢。
> 
> 因此，如果您计划对大量数据多次使用自定义函数，请考虑修改该函数，使其接受二维数组形式的范围作为输入，然后返回一个二维数组，该数组可以溢出到适当的单元格。

为此，请传入一个表示您要返回的数组大小的输入。当你开始执行你的函数时，检查输入参数是否是一个带有`input.map`. 如果是，您可以在每个项目上调用该函数并返回整个集合。

所以在你的情况下是这样的：

```
function foo(){
    return "bar";
}; 
```

您可以像这样更新函数：

```
function foo(input){
  if (input.map) {         // Test whether input is an array.
    return input.map(foo); // Recurse over array if so.
  } else {
    // do actual function work here
    return "bar";
  }
}; 
```

然后这样称呼它：

![截屏](../Images/2ed7da403879d3d36ac1c5daf6ed9970.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T14:19:54.050

通过调用电子表格中的函数，您可以调用电子表格服务，要求它往返于服务器以运行函数的结果。结果，您在很短的时间内发出了几百个请求。

一种解决方法可能是一次添加几个单元格的函数。当然，当您随后再次打开工作表时，您可能会遇到同样的问题。

根据您的功能要完成的工作，可能值得使用内置的电子表格功能。那里有很多权力。编写一个作用于一系列值而不是单个单元格的函数可能是另一个更好的选择。它可以通过自定义菜单项或使用脚本管理器来触发。

请记住，在使用电子表格时，批处理操作是您最好的朋友。

# linux - Linux 终端 Nmap 一次映射多个 IP

> ID：13888308
> 
> 赞同：2
> 
> 时间：2012-12-15T00:57:50.463
> 
> 标签：linux

我有一个命令可以同时显示网络上的多个 IP，我们称之为“列表”。当我使用此命令时，它会显示以下内容，例如：

```
10.0.0.10        Server10                            
10.0.0.11        Server11                         
10.0.0.12        Server12                            
10.0.0.13        Server13 
```

我想一次对所有这些进行 Nmap，但只使用一个特定的端口，所以基本上是“nmap 10.0.0.10 -p22”，但我想提示用户使用哪个端口到 Nmap，并让 Linux 对每个端口执行此操作提到的服务器在给出“列表”时显示。

这可能吗？这是否需要 AWK 脚本或类似的脚本？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:28:57.810

Nmap 确实有一个不错的选项，可用于传递文件中包含的主机列表。它们应该是每行一个主机。您的输出看起来很像 nmap 的实际输入。您需要删除第二部分。您可以通过多种方式执行此操作，例如使用简单的剪切。

```
 list | cut -d ' ' -f1 
```

然后你需要让用户输入一个端口。为此，您可以简单地使用读取功能

```
 read -e 
```

为一整行。

因为我真的很喜欢一个班轮，所以这是一行中的所有内容：

```
 port=$(read -e);nmap -iL <(list | cut -d ' ' -f1) -p $port; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:06:12.910

如果我正确理解您的问题，您可以执行类似`nmap 10.0.0.10-13 -p22`（或从给定列表中提取的任何范围）之类的操作，或者如果您想要更精细地控制扫描的执行方式，则需要使用 nmap 的[脚本接口](http://nmap.org/book/nse.html "nmap 脚本")，它利用了[Lua](http://www.lua.org/pil/#1ed)。

对于后者，在大多数 nmap 发行版中都有**大量**可用的示例。例如，在 Ubuntu 上，签入`/usr/share/nmap/scripts`. 只需在该目录（或系统安装它的位置）中 grep 查找“线程”，您就会明白我的意思。（：

# android - 如何以编程方式创建带有 id 和 src 参数的 imageView？

> ID：13888315
> 
> 赞同：5
> 
> 时间：2012-12-15T00:59:00.930
> 
> 标签：android, android-layout, android-imageview, android-framelayout

以下工作，但我想消除 xml，以便我可以以编程方式更改图像：Java：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.p6_touch);
    ImageView floatImage = (ImageView) findViewById(R.id.p6_imageView);
    floatImage.setOnTouchListener(this);    
} 
```

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/background_black" >
    <ImageView
        android:id="@+id/p6_imageView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scaleType="matrix"
        android:src="@drawable/p6_trail_map" >
    </ImageView>
    <ImageView
          android:id="@+id/imageView1"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_gravity="bottom"
          android:onClick="showFlashlight"
          android:src="@drawable/legend_block24" />
</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T01:20:43.727

在文档中有一个将 XML 映射到 Java 的[表](http://developer.android.com/reference/android/widget/ImageView.html#lattrs)。

*   例如：`android:src`等价于`setImageResource()`。

您将需要检查[继承表](http://developer.android.com/reference/android/widget/ImageView.html#inhattrs)中的任何超类的属性。

*   例如：`android:id`等价于`setId()`。

`width`、`height`和`gravity`都设置在 LayoutParams 对象中并传递给`setLayoutParams()`.

了解并非每个 XML 属性都有匹配的 Java 方法（反之亦然），但您使用的所有属性都有。

* * *

一个例子，让我们称之为这个文件`activity_main.xml`：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/root"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/background_black" >
    <!-- We'll add this missing ImageView back in with Java -->
    <ImageView
          android:id="@+id/imageView1"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_gravity="bottom"
          android:onClick="showFlashlight"
          android:src="@drawable/legend_block24" />
</FrameLayout> 
```

现在在我们的活动中：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Let's create the missing ImageView
    ImageView image = new ImageView(this);

    // Now the layout parameters, these are a little tricky at first
    FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(
            FrameLayout.LayoutParams.MATCH_PARENT,
            FrameLayout.LayoutParams.MATCH_PARENT);

    image.setScaleType(ImageView.ScaleType.MATRIX);
    image.setImageResource(R.drawable.p6_trail_map);
    image.setOnTouchListener(this);    

    // Let's get the root layout and add our ImageView
    FrameLayout layout = (FrameLayout) findViewById(R.id.root);
    layout.addView(image, 0, params);
} 
```

# google-maps - 如何定制路线优化代码以显示完整的方向而不是路线摘要？

> ID：13888316
> 
> 赞同：0
> 
> 时间：2012-12-15T00:59:49.023
> 
> 标签：google-maps, google-maps-api-3

提前感谢您提供的任何帮助！

Google 在此网页上提供了一个关于路线优化的示例：[https](https://developers.google.com/maps/documentation/javascript/directions?hl=en#DirectionsRequests) ://developers.google.com/maps/documentation/javascript/directions?hl=en#DirectionsRequests 链接到 [https://developers.google.com/maps/文档/javascript/examples/directions-waypoints](https://developers.google.com/maps/documentation/javascript/examples/directions-waypoints)

我想创建此代码的变体。在我的版本中，我想展示完整的方向集，而不是简单的总结。我尝试在“//对于每条路线，显示摘要信息”之后简单地剪切代码，但这不起作用。我怎样才能调整它以显示完整的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T01:16:17.293

将方向渲染器的面板选项设置为应该接收结果的节点。

对于给定的示例，它将是：

```
directionsDisplay 
 = new google.maps
    .DirectionsRenderer({panel:document.getElementById('directions_panel')}); 
```

同一页面中有一个示例：[https ://google-developers.appspot.com/maps/documentation/javascript/examples/directions-panel](https://google-developers.appspot.com/maps/documentation/javascript/examples/directions-panel)

# ruby-on-rails - 我可以将表单发布到外部 URL 以及我自己的服务器吗？

> ID：13888317
> 
> 赞同：0
> 
> 时间：2012-12-15T01:00:07.387
> 
> 标签：ruby-on-rails, forms, post, submit, external-url

在 Rails 中，我可以通过用户一键将表单中的信息发送到外部 URL 并发布到我自己的服务器上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T01:08:28.360

在控制器的创建或更新操作中，保存操作之后：

```
require 'net/http'
Net::HTTP.get('www.example.com', '/index.html?'+params) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T02:24:00.900

您必须自己做，最好是在您完成程序后触发外部请求，希望使用消息队列。

# php - Prestashop 内容仅链接不起作用

> ID：13888321
> 
> 赞同：1
> 
> 时间：2012-12-15T01:00:34.170
> 
> 标签：php, prestashop

我有条款和条件链接并添加了 Fancybox，但是当您单击链接时，它会显示整个网页，而不仅仅是花式框容器中的内容。

链接格式为 site/online-store/au/content/3-terms-and-conditions-of-use?content_only=1

但是 content_only=1 似乎没有做任何事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-18T10:38:13.323

问题是此链接正在从 https 页面加载非 https 内容。

要修复它，请编辑 controllers/front/ParentOrderController.php

```
$this->link_conditions = $this->context->link->getCMSLink($cms, $cms->link_rewrite, false); 
```

并将最后一个参数更改为 true 以强制使用 https

```
$this->link_conditions = $this->context->link->getCMSLink($cms, $cms->link_rewrite, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-04T01:32:49.887

**这适用于 PrestaShop 1.6.x/1.7.x 并将在 Fancybox 中打开 ToS**

在您的控制器中：

```
$cms = new CMS(Configuration::get('PS_CONDITIONS_CMS_ID'), $this->context->language->id);
$conditions_link = $this->context->link->getCMSLink($cms, $cms->link_rewrite).'?content_only=1';
$this->addJqueryPlugin(array('fancybox'));
$this->context->smarty->assign(['conditions_link' => $conditions_link]); 
```

然后，在您的 .tpl 文件中：

```
<a class="fancybox-tos" href="{$conditions_link}">{l s='Terms of service' d='Shop.Theme.Checkout'}</a> 
```

最后，在您的 .js 文件中：

```
$(document).ready(function() {
        $('.fancybox-tos').fancybox({
            type: 'iframe',
            autoDimensions: false,
            autoSize: false,
            width: 600,
            height: 'auto',
            helpers: {
                overlay: {
                locked: false
            }
        }
    });
}); 
```

我希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-01T07:10:45.963

问题是因为您加载的 CMS 没有所需的参数。因此，条件在

> /controllers/front/CmsController.php

```
if (Configuration::get('PS_SSL_ENABLED') && Tools::getValue('content_only') && $id_cms && Validate::isLoadedObject($this->cms) && in_array($id_cms, array((int)Configuration::get('PS_CONDITIONS_CMS_ID'), (int)Configuration::get('LEGAL_CMS_ID_REVOCATION')))) 
{
  $this->ssl = true;
} 
```

返回假。只需将其替换为

```
 $this->ssl = true; 
```

田...

# php - 从 PHP SoapServer 返回一个 JSON 对象

> ID：13888322
> 
> 赞同：0
> 
> 时间：2012-12-15T01:00:34.870
> 
> 标签：php, json, soap, soapserver

如何强制我的 PHP SoapServer 发送 JSON 对象作为响应而不是 XML 文档？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T01:03:32.327

那不是`SOAP`，所以不是。它可以在某个 xml 节点中合并一个 jsonstring，仅此而已。您可能只需要一个`REST`服务于`json`.

不过，您可以将其混为一谈，根据定义使其*不是 SOAP*，而是一些奇怪的混合体：

```
<?php
class ThisIsNotASoapServer extends SoapServer {

}
function test(){
        //should have a return
        //return range(1,9);
        //but totally breaks it by:
        echo json_encode(range(1,9));
        //the exit here is needed
        exit;
}
$server = new ThisIsNotASoapServer(null, array('uri' => 'http://test-uri/','soap_version' => 1));
$server->addFunction("test");
$server->handle('<?xml version="1.0"?>
<SOAP-ENV:Envelope
   xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
   SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
    <SOAP-ENV:Body>
        <m:Test xmlns:m="Some-URI"/>
    </SOAP-ENV:Body>
 </SOAP-ENV:Envelope>');
?> 
```

...所以，从技术上讲，这是可能的，但我怀疑没有一个客户能理解这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T01:06:06.203

看看[http://www.sinatrarb.com](http://www.sinatrarb.com)它很容易创建一个安静的 Web 服务来返回一个 json 对象。

取决于您的要求 - SOAP 是一个 xml 请求，这并不意味着返回的格式也需要是 SOAP (XML)，您可以轻松地回发 JSON 字符串。

也许如果您能提供更多信息，我们可以提供更多帮助？

# javascript - JQuery 函数扭曲图像。怎么修？

> ID：13888323
> 
> 赞同：1
> 
> 时间：2012-12-15T01:00:45.607
> 
> 标签：javascript, html, css

你自己看。我不知道是否有可能摆脱那个奇怪的彩色边框。这段代码的重点是能够旋转图像并同时改变它的颜色。代码的方式是，图像的颜色和角度可以很容易地被编码为动态的。此代码使用白色的 png 图像，但具有爪印形状的透明层。这样，当您编辑背景颜色时，它会更改图像的颜色。如果不是因为添加到图像中的奇怪边框，它会很好用……请注意，如果您删除了旋转功能，则没有烦人的边框。

包括 JQuery 1.8.2，这里是 HTML/CSS 代码：

CSS：

```
.image {
display: inline-block;
margin-left:auto;
margin-right:auto;
background-color: blue;

transform: rotate(30deg);

} 
```

HTML：

```
<span class="icon"></span>​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T01:05:07.767

添加这个：`-webkit-backface-visibility:hidden;`为我解决了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T01:36:49.280

爪子是通过使其区域在 png 中透明并将背景设置为红色而将周围区域设置为白色来创建的。

我的建议，反其道而行之。在您的 png 中用红色填充爪子，并使其周围的空间保持透明。至少在您的小提琴中，它周围将不再有红线，因为背景颜色将设置为白色。

# asp.net-mvc-3 - C# MVC3 将对象中的数组传递给控制器

> ID：13888324
> 
> 赞同：2
> 
> 时间：2012-12-15T01:01:01.067
> 
> 标签：asp.net-mvc-3

我想知道为什么我的控制器不能识别整数数组，而是识别整数的对象文字。

c#：控制器：

```
[HttpGet]
public ActionResult Index(Model search) 
```

模型：

```
public class Model {
    public int[] MyList {get; set;}
} 
```

javascript:

```
model.myList = [0, 1]; //null at controller
model.myList = {0, 1}; //controller recognizes this 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T13:03:19.657

这可能有助于了解 MVC 如何翻译和处理数组、字典对象等[http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:20:12.443

通过更改`[HttpGet]`为解决`[HttPost]`

# mysql - mysql查询返回一个空的结果集

> ID：13888332
> 
> 赞同：0
> 
> 时间：2012-12-15T01:02:03.997
> 
> 标签：mysql

我的任务是处理我遇到问题的查询。这是查询：

> 给定用户 ID 和月份，生成一个包含学生姓名、他们拥有的文件列表（从大到小）的列表，包括文件总数和指定月份中使用的字节数。

这是我到目前为止所拥有的：

```
(Select * from htmp_cs368 
Join roster_cs368 ON htmp_cs368.userId =
 roster_cs368.lastName Where htmp_cs368.userId = 
(SELECT lastName FROM roster_cs368 WHERE userId = 'userId' AND htmp_cs368.monthIn = 'monthIn')) 
UNION 
(Select * from atmp_cs368 
JOIN roster_cs368 ON atmp_cs368.userId = 
roster_cs368.userId Where roster_cs368.userId = 
'userId' AND atmp_cs368.monthIn = 'monthIn') ORDER BY fileSize DESC; 
```

我得到一个空集的结果。我的桌子满了。我希望有人能纠正我的错误。

我已经包含了我的架构：

```
mysql> select * from roster_cs368
-> ;
+--------+-----------+-----------+
| userId | firstName | lastName  |
+--------+-----------+-----------+
| apn7cf | Allen     | Newton    |
| atggg3 | andrew    | goebel    | 
```

主键是 userId

```
mysql> select * from htmp_cs368;
+------------+----------+------------+----------+----------+-------+------+-------+----------------------+
| filePerms  | numLinks | userId     | idGroup  | fileSize | monthIn | day  | time  | fileName             |
+------------+----------+------------+----------+----------+-------+------+-------+----------------------+
| drwx------ |        2 | schulte    | faculty  |      289 | Nov   |    7 | 2011  | Java                 |
| -rw-r--r-- |        1 | schulte    | faculty  |      136 | Apr   |   29 | 2012  | LD                   |
| drwxr-xr-x |        3 | schulte    | faculty  |      177 | Mar   |   20 | 2012  | Upgrade              | 
```

这里没有主键

```
 select * from atmp_cs368;
+------------+----------+--------------+----------+----------+-------+------+-------+-----------------------------+
| filePerms  | numLinks | userId       | idGroup  | fileSize | monthIn | day  | time  | fileName                    |
+------------+----------+--------------+----------+----------+-------+------+-------+-----------------------------+
| drwxr-xr-x |        2 | remierm      | 203      |      245 | Sep   |   17 | 14:40 | 148360_sun_studio_12        |
| drwx---rwx |       31 | antognolij   | sasl     |     2315 | Oct   |   24 | 12:28 | 275                         |
| -rwx------ |        1 | kyzvdb       | student  |       36 | Sep   |   19 | 13:05 | 275hh                       | 
```

这里也没有主键。

我对mysql的经验很少。我还必须提出：如果未指定用户 ID，则所有文件，如果未指定月份，则所有用户，如果未指定，则所有月份和用户。我被困住了，不知所措。我很感激任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T01:25:43.940

您似乎在 SQL 中有许多问题。

第一的

```
Join roster_cs368 ON htmp_cs368.userId = roster_cs368.lastName 
```

您尝试将`userId`字段加入`lastName`字段，这绝对行不通。它应该`userId`在两个表中。

然后

```
WHERE userId = 'userId' AND htmp_cs368.monthIn = 'monthIn' 
```

假设这些确实是文字字符串，它们不会匹配表中的任何内容。您需要使用参数化查询，并在 SQL 中替换问号，如

```
WHERE userId = ? AND htmp_cs368.monthIn = ? 
```

并提供要在 Java 代码中使用的实际值。

我认为您正在寻找这些方面的东西（未经测试，但这会给您一个起点）

文件列表

```
select r.lastName, r.firstName, t.fileName, t.fileSize
    from htmp_cs368 t join roster_cs368 r on t.userId=r.userId
    where t.userId=? and t.monthIn=?
    order by fileSize desc 
```

概括：

```
select r.lastName, r.firstName, count(t.fileName), sum(t.fileSize)
    from htmp_cs368 t join roster_cs368 r on t.userId=r.userId
    where t.userId=? and t.monthIn=?
    group by t.userId 
```

这是一种简单的方法，它不考虑一个月内出现和消失的文件*，*但您的表中似乎没有为此的数据。

此外，不清楚是什么`atmp_cs368`，或者为什么`time`一个表中的列似乎有`year`值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T01:39:11.420

正如其他人指出的那样，您的 SQL 似乎存在许多问题。我不认为它也可以编译。

尝试：

```
SELECT   r.userId, files.* 
FROM     roster_cs368 AS r
JOIN     (
          Select * from htmp_cs368 WHERE userId = 'userId' AND monthIn = 'monthIn'
          UNION 
          Select * from atmp_cs368 Where userId = 'userId' AND monthIn = 'monthIn'
         ) AS files ON files.userId = r.userId
ORDER BY files.fileSize DESC; 
```

你只需要一个`JOIN`。这列出了用户及其所有文件。并注意将苹果等同于苹果（userId！= lastName）。

现在要计算文件和文件大小等，您需要一个`GroupBy`有效的。但是您不能“轻松”列出文件并一起计算文件数量。它必须是一种或另一种方式。只是为了计数，您可以使用 Jim 的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T01:29:55.990

这个 JOIN 看起来有点可疑......

```
JOIN roster_cs368 ON htmp_cs368.userId = roster_cs368.lastName 
```

即使`userId`in在 的列中`htmp_cs368`具有等效值，这也是非常糟糕的形式。JOINS 通常应该在同名列上完成。`lastName``roster_cs368`

如果这两列不相关（很难说什么时候`roster_cs368`也有一`userId`列），那么这至少是你问题的一部分。

还有，`htmp_cs368.monthIn = 'monthIn'`没有意义。这也不会匹配该列中的任何内容。

# java - 继承和私有实例变量

> ID：13888333
> 
> 赞同：1
> 
> 时间：2012-12-15T01:02:15.057
> 
> 标签：java, inheritance, equals, private

我无法弄清楚如何访问超类的私有实例变量。我在 Dog 类中编写了一个 equals 方法，用于比较名称和品种是否相同，但 name 是 Pet 内部的私有实例变量（Dog 继承）。

这是我的代码：

```
public class Pet {

    private String name;

    public Pet(){
        name = "";
    }
    public Pet(String name){
        this.name = name;
    }

    public boolean equals(Pet other){
        return this.name.equals(other.name);
    }
} 
```

和我的狗类：

```
public class Dog extends Pet {
    private String breed;
    public Dog(String name, String breed) {
        super(name);
        this.breed = breed;
    }

    public Dog(){
        breed = "";
    }

    @Override
    public boolean equals(Object obj){

        if(obj == null){
            return false;
        }

        if(obj.getClass() != this.getClass()){
            return false;
        }else{
            Pet p = (Pet)obj;
            Pet q = (Pet)this;
            Dog temp = (Dog)obj;
            boolean name = q.equals(p);
            boolean bred = breed.equals(temp.breed);
            return name && bred;
        }
    }
} 
```

在我的主要课程中：

```
Dog d1 = new Dog("Harry", "Puggle");
Dog d2 = new Dog("Harry", "Pug");
System.out.println(d1.equals(d2)); 
```

由于某种原因，它一直使用我的 Pet 类的 equal 方法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T01:10:18.927

@Pshemo 已确定您的问题的直接原因。您`Pet.equals(Object)`不会覆盖``Dog.equals(String)`，因为签名不匹配。而且您的`d1.equals(d2)`调用绑定到最匹配的方法签名，该方法签名具有`Pet`形式参数而不是`Object`形式参数。

但是，一旦您纠正了这一点，该`Dog.equals(String)`方法就会出现另一个问题：

```
 Pet p = (Pet)obj;
        Pet q = (Pet)this;
        boolean name = q.equals(p); 
```

当您修复 Pet.equals 的签名时，这将导致递归调用 Dog.equals ... 和一个`StackOverflowError`. （Dog.equals 将调用 Dog.equals，后者将调用 Dog.equals，其中 ...）。基本上，`q.equals`与当前正在执行的方法相同。类型转换没有做任何事情......

将其更改为：

```
 Pet p = (Pet)obj;
        boolean name = super.equals(p); 
```

以这种方式使用的`super`关键字调用该方法的覆盖版本`equals`。

* * *

> 我无法弄清楚如何访问超类的私有实例变量。

这与导致您的问题的原因不同。但答案是，如果您希望子类方法能够访问`private`父类中的变量，那么您需要向父类添加 getter 和/或 setter 方法，或者将变量的访问权限更改为 (通常）`protected`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T01:13:21.257

如果你仔细看你的 Dog 类有两种`equals`方法：

*   `equals(Pet other)`形成超类
*   `equals(Object obj)`来自 Dog 类。

由于您使用`d1.equals(d2)`where d1 和 d2 是`Dog`实例，Java 将使用`equals(Pet other)`超类中的方法，在该方法中您只检查`name`相等性。

# groovy - 使用 email-ext 插件从 Jenkins 发送 Cppcheck 结果/报告

> ID：13888338
> 
> 赞同：1
> 
> 时间：2012-12-15T01:03:55.607
> 
> 标签：groovy, jenkins, jelly, cppcheck, email-ext

我正在尝试使用来自 Jenkins 构建的 email-ext 插件在电子邮件中发送**cppcheck报告。**到目前为止，唯一的方法似乎是创建一个自定义模板——果冻或 groovy。从这篇文章——“[我可以配置詹金斯发送带有静态分析报告摘要的电子邮件吗？](https://stackoverflow.com/questions/8184944/can-i-configure-jenkins-to-send-an-email-with-a-static-analysis-report-summary) ”——看起来我应该能够实例化 CppcheckBuildAction 并使用它的方法，但由于某种原因，它似乎没有实例化（即对象为空）。这是我放在果冻模板中的代码来检查这个：

```
<j:set var="cppcBuildAction" value="${it.getAction('com.thalesgroup.hudson.plugins.cppcheck.CppcheckBuildAction')}"/>
<j:if test="${cppcBuildAction==null}">
<p><i>cppcBuildAction is null!</i></p>
</j:if> 
```

（我也试过 hudson.plugins.cppcheck.CppcheckBuildAction）而且，果然，我得到*cpppcBuildAction 为空！*在构建结果电子邮件中。（我不得不放入“if”子句在果冻上测试它，因为它不会抛出任何错误，否则。在 groovy 模板中，我实际上收到了类似“异常：javax.script.ScriptException：java.lang .NullPointerException：如果我尝试在对象上调用 getResult 方法，则无法在空对象上获取属性 'getResult'）。

有没有人尝试使用这个 email-ext 插件或其他方式通过电子邮件发送 Cppcheck 结果/报告？

顺便说一句，还有另一个帖子，其他人正在尝试做我想做的事情，但线程似乎没有激活或者那里没有真正的交互 - “[遵循 cppcheck 的果冻脚本模板有什么问题在 hudson 的 email-ext 插件中](https://stackoverflow.com/questions/13357670/whats-wrong-with-following-jelly-script-template-for-cppcheck-in-email-ext-plug?rq=1)“

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-17T08:25:04.407

你只是使用了错误的命名空间，正确的一个是：org.jenkinsci.plugins.cppcheck.CppcheckBuildAction。

对于调试，您可以使用以下代码：

```
<j:forEach var="a" items="${build.getActions()}">
action: ${a.getClass().getName()}
<BR/>
</j:forEach> 
```

最后，以下代码对我有用：

```
<!-- CppCheck TEMPLATE -->

<j:set var="cppcheckAction" value="${it.getAction('org.jenkinsci.plugins.cppcheck.CppcheckBuildAction')}" />
<j:if test="${cppcheckAction!=null}">
    <j:set var="cppcheckResult" value="${cppcheckAction.getResult()}" />
    <j:if test="${cppcheckResult!=null}">
        <TABLE width="100%">
            <TR><TD class="bg1" colspan="2"><B>CPPCHECK RESULT</B></TD></TR>
            <TR bgcolor="white"><TD class="test_failed" colspan="2"><B><li><a href="${rooturl}${build.url}cppcheckResult">Found: ${cppcheckResult.report.getNumberTotal()}</a></li></B></TD></TR>
        </TABLE>
        <BR/>
    </j:if>
</j:if> 
```

享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-25T18:39:05.590

我发现自己想做同样的事情：发送带有 cppcheck 分析结果的电子邮件分机电子邮件。

这个果冻脚本与上面提供的 Sergey 一起工作，并制作了一个类似于结果页面中的表格。

希望这会在某个地方为某人节省一个小时。

```
<j:jelly xmlns:j="jelly:core" xmlns:st="jelly:stapler" xmlns:d="jelly:define">
  <html>
    <j:set var="cppcheckAction" value="${it.getAction('org.jenkinsci.plugins.cppcheck.CppcheckBuildAction')}" />
      <j:if test="${cppcheckAction!=null}">
    <j:set var="cppcheckResult" value="${cppcheckAction.getResult()}" />
    <j:if test="${cppcheckResult!=null}">
      <h2>Summary</h2>
        <style type="text/css">
    #cppcheckStatistics { width: auto; }
    #cppcheckStatistics .number { text-align: right; }
        </style>
        <table class="pane sortable" id="cppcheckStatistics">
          <thead>
            <tr>
              <td class="pane-header">Severity</td>
              <td class="pane-header">Count</td>
              <td class="pane-header">Delta</td>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="pane">Error</td>
              <td class="pane number">${cppcheckResult.statistics.getNumberErrorSeverity()}</td>
              <td class="pane number">${cppcheckResult.getDiff().getNumberErrorSeverity()}</td>
            </tr>
            <tr>
              <td class="pane">Warning</td>
              <td class="pane number">${cppcheckResult.statistics.getNumberWarningSeverity()}</td>
              <td class="pane number">${cppcheckResult.getDiff().getNumberWarningSeverity()}</td>
            </tr>
            <tr>
              <td class="pane">Style</td>
              <td class="pane number">${cppcheckResult.statistics.getNumberStyleSeverity()}</td>
              <td class="pane number">${cppcheckResult.getDiff().getNumberStyleSeverity()}</td>
            </tr>
            <tr>
              <td class="pane">Performance</td>
              <td class="pane number">${cppcheckResult.statistics.getNumberPerformanceSeverity()}</td>
              <td class="pane number">${cppcheckResult.getDiff().getNumberPerformanceSeverity()}</td>
            </tr>
            <tr>
              <td class="pane">Portability</td>
              <td class="pane number">${cppcheckResult.statistics.getNumberPortabilitySeverity()}</td>
              <td class="pane number">${cppcheckResult.getDiff().getNumberPortabilitySeverity()}</td>
            </tr>
            <tr>
              <td class="pane">Information</td>
              <td class="pane number">${cppcheckResult.statistics.getNumberInformationSeverity()}</td>
              <td class="pane number">${cppcheckResult.getDiff().getNumberInformationSeverity()}</td>
            </tr>
            <tr>
              <td class="pane">No category</td>
              <td class="pane number">${cppcheckResult.statistics.getNumberNoCategorySeverity()}</td>
              <td class="pane number">${cppcheckResult.getDiff().getNumberNoCategorySeverity()}</td>
            </tr>
          </tbody>
          <tfoot>
            <tr class="sortbottom">
              <td class="pane-header">Total</td>
              <td class="pane-header number"><B><a href="${rooturl}${build.url}cppcheckResult">${cppcheckResult.report.getNumberTotal()}</a></B></td>
              <td class="pane-header number"><B><a href="${rooturl}${build.url}cppcheckResult/source.all/?before=5&amp;after=5&amp;states=new">${cppcheckResult.getDiff().getNumberTotal()}</a></B></td>
            </tr>
          </tfoot>
        </table>
      </j:if>
    </j:if>
  </html>
</j:jelly> 
```

# list - 为什么 Haskell 给出“模糊类型变量”错误？

> ID：13888339
> 
> 赞同：3
> 
> 时间：2012-12-15T01:04:05.193
> 
> 标签：list, function, haskell, recursion, quickcheck

一个过去的论文问题问我；定义一个函数 p :: [a] -> [a] 交换列表中的每两个项目。您的函数应该将第一个与第二个项目交换，第三个与第四个交换，依此类推。通过列表理解定义一个，另一个通过递归定义。

好吧，这就是我想出的：

```
import Test.QuickCheck
p :: [a] -> [a]
p [] = []
p xs = concat [ [y,x] | ((x,y),i) <- zip (zip xs (tail xs)) [1..], odd i]
q :: [a] -> [a]
q [] = []
q (x:y:zs) | even (length zs) = [y,x] ++ q zs
           | otherwise = error "The list provided is not of even length"
prop_2 xs = even (length xs) ==> p xs == q xs
check2 = quickCheck prop_2 
```

这些功能工作正常，但我想检查两者是否相同，所以我把 quickCheck 放在下面；但是由于某种原因，这给了我一个错误，说“使用prop_2引起的模糊类型变量[a0]”

我只是不明白这里出了什么问题，我看起来非常明智...... Haskell 到底在抱怨什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-15T01:46:49.810

让我们首先注释掉`check2`并询问 GHCi 的类型`prop_2`是什么：

```
*Main> :t prop_2
prop_2 :: Eq a => [a] -> Property 
```

好的，按照您编写的方式`prop_2`，它适用于相等类中任何元素类型的列表。

现在，您要传递`prop_2`给该`quickCheck`函数。我们来看看`quickCheck`next的类型：

```
*Main> :t quickCheck
quickCheck :: Testable prop => prop -> IO () 
```

这个函数实际上有一个非常通用的类型。它适用于`Testable`课堂上的任何内容。那么这个`Testable`类是如何工作的呢？这里有几个基本实例，例如：

```
instance Testable Bool
instance Testable Property  -- this is a simplification, but it's more or less true 
```

这些实例在 QuickCheck 库中定义，并告诉您可以快速检查常量布尔值以及属性类型的元素。

现在，测试不依赖于任何输入的属性并不是特别有趣。有趣的例子是这个：

```
instance (Arbitrary a, Show a, Testable prop) => Testable (a -> prop) 
```

这就是说，如果您知道如何生成特定类型的随机值 ( `Arbitrary a`) 以及如何显示该类型的值 ( `Show a`)，那么您还可以测试从该类型`a`到已经可测试的类型的函数`prop`。

为什么？因为这就是 QuickCheck 的运作方式。在这种情况下，QuickCheck 将咨询`Arbitrary`实例以提出类型的随机测试用例`a`，将函数应用于每个测试用例，并检查结果是否为正。如果任何测试失败，它将打印一条消息，通知您测试失败，并打印测试用例（这也是有`Show`要求的原因）。

现在，在我们的情况下，这意味着我们应该能够快速检查`prop_2`：它是一个导致`Property`. 重要的是函数参数（类型`[a]`只要`Eq a`持有）是 class`Arbitrary`的成员和 class 的成员`Show`。

在这里，我们到达了错误的根源。现有信息不足以得出这一结论。正如我在一开始所说，`prop_2`适用于任何承认相等的元素类型的列表。没有内置规则说所有这些类型都在`Arbitrary`and中`Show`。但即使有，QuickCheck 应该生成什么样的列表？它应该生成布尔列表、单元类型列表、函数列表、字符列表、整数列表吗？这么多的选项，元素类型的选择很可能会影响到你是否发现了一个bug。（考虑到 GHC 会选择`()`只有一个元素的单元类型。那么您的属性将适用于任何两个函数`p`和`q`保留输入列表的长度，无论它们是否具有您想要的交换属性。）

这就是为什么您需要向 GHC 提供额外的类型信息，以便它可以解析用于列表的元素类型。这样做很简单。您可以注释`prop_2`自己：

```
prop_2 :: [Integer] -> Property 
```

或者，如果您不希望这样（因为您可能希望在不重新实现的情况下在不同类型的列表上运行测试`prop_2`），您可以在调用时添加类型注释`quickCheck`：

```
check2 = quickCheck (prop_2 :: [Integer] -> Property) 
```

现在代码编译了，我们可以运行`check2`：

```
Main*> check2
+++ OK, passed 100 tests. 
```

# html - 在视频html5期间一次显示按钮

> ID：13888341
> 
> 赞同：0
> 
> 时间：2012-12-15T01:04:43.440
> 
> 标签：html, button, video, popup, timing

我试图在播放视频时显示一个按钮来选择不同的选项。现在我在页面加载时显示了按钮，这意味着它有时会导致按钮同步。我该如何解决？这是我网站的链接。您必须等到视频开始播放并且您会看到按钮出现。但它再次与页面加载而不是与视频同步，我试图让它与视频同步。

[http://preview.visiondesignstudio.net/WesternUniversity/Demo/](http://preview.visiondesignstudio.net/WesternUniversity/Demo/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:02:09.380

最简单的方法是根据 timeupdated 事件将事件监听器添加到您的视频元素中。在调用的代码中检查视频的 currentTime 并将其与您希望按钮可见的时间进行比较（例如，您可以有一个数组，其中包含列出 buttonid、开始时间和停止时间的元素并显示/隐藏按钮作为适当的）

# php - iOS推送通知我做错了什么？

> ID：13888342
> 
> 赞同：4
> 
> 时间：2012-12-15T01:04:59.260
> 
> 标签：php, ios, apple-push-notifications

我曾多次尝试向我的应用程序发送推送通知，但无济于事。我遵循了许多教程并遵循了所有步骤。我从 APNS 服务器收到了成功的消息，但没有消息到达设备。我已经使用成功到达的开发证书测试了发送，并且我已经生成了适当的生产证书并在 php 脚本中使用它们。我将在下面发布我的代码。如果您发现我做错了什么，请告诉我。我只是不知道它是什么...

任何帮助将不胜感激。

```
<?php
$link=mysqli_connect('****','****','****','***');
if(mysqli_connect_errno())
{
    header('HTTP/1.1 400');
    header('Content-type: text/html');
    echo 'Connection Error: %s\n',mysqli_connect_error();
    exit;
}
echo "Connected to Database<br />";
echo "Querying Database<br />";
switch ($_REQUEST['App'])
{
    case "O2":
        $query="SELECT Token FROM O2CalculatorPushTokens";
        break;
    case "LZA":
        $query="SELECT Token FROM LZAPushTokens";
        break;
    case "MorseCode":
        $query="SELECT Token FROM MorseCodePushTokens";
        break;
    default:
        echo "Unknown App.";    
        exit;
}
$result=mysqli_query($link,$query);
echo mysqli_num_rows($result)."<br />";
if ($result==false)
{
    echo "No tokens to send to.";
}
else
{
    //Set SSL context
    $ctx = stream_context_create();
    echo "Loading SSL Certificate...<br>";
    switch($_REQUEST['App'])
    {
        case "O2":
            stream_context_set_option($ctx, 'ssl', 'local_cert', 'SSL/O2CalculatorProductionSSL.pem');
            break;
        case "LZA":
            stream_context_set_option($ctx, 'ssl', 'local_cert', 'SSL/LandingZoneAssistantProductionSSL.pem');
            break;
        case "MorseCode":
            stream_context_set_option($ctx, 'ssl', 'local_cert', 'SSL/MorseCodeProductionSSL.pem');
            break;
        default:
            exit;
    }   
    echo "Unlocking SSL Certificate...<br><br>";
    stream_context_set_option($ctx, 'ssl', 'passphrase', '****');

    //Open a connection to the APNS server
    echo "Connecting to APNS server...<br>";
    $fp = stream_socket_client('ssl://gateway.push.apple.com:2195', $err, $errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);
    if(!$fp) exit("Failed to connect: $err $errstr<br><br>");
    else echo "Connected to APNS!<br />";

    //Create the payload body
    echo "Creating message...<br>";
    $body['aps'] = array('alert' => $_REQUEST['PushMessageTextArea']);
    echo $body."<br>";

    //Encode the payload as JSON
    echo "Encoding message...<br>";
    $payload = json_encode($body);
    echo $payload."<br>";

    while($row=mysqli_fetch_assoc($result))
    {
        //Build the binary notification
        echo "Sending message to ".$row['Token']."<br>";
        $msg = chr(0).pack('n',32).pack('H*',$row['Token']).pack('n',strlen($payload)).$payload;
        //Send it to the server
        $PushResult = fwrite($fp, $msg, strlen($msg));
        if (!$PushResult) echo "Message not delivered! <br />";
        else echo "Message successfully delivered! <br />";
    };

    //Close connection to the server
    echo "Closing APNS connection...<br><br>";
    fclose($fp);
    mysqli_free_result($result);
}
mysqli_close($link); 
```

还有我的 iPhone 脚本...

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
// Override point for customization after application launch.

//Register for push notifications
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeAlert)];
return YES;
}
- (void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken
{
if (![[NSUserDefaults standardUserDefaults] boolForKey:@"registeredForPush"])
{
    //Remove spaces and brackets from deviceToken
    NSString* token  = [deviceToken description];
    token = [token stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"<>"]];
    token = [token stringByReplacingOccurrencesOfString:@" " withString:@""];

    NSMutableString *params = [[NSMutableString alloc] initWithFormat:@"Token="];
    [params appendString:token];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://www.bluelineapps.net/****.php"] cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:100.0];
    [request setHTTPMethod:@"POST"];
    [request setHTTPBody:[params dataUsingEncoding:NSUTF8StringEncoding]];
    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    if (connection)
    {
    //Show alert
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Thank you!" message:@"Thank you for registering for updates. Please rate this app in the AppStore after you've had some time to use it. Feedback is welcome and can be sent using the 'Feedback' tab below. Enjoy!" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
    [alert dismissWithClickedButtonIndex:0 animated:TRUE];
    [alert show];
    }
    else
    {
        //Show Error
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Registration error!" message:@"Failed to register for updates. Please try again later in your 'Settings' app. Sorry for the inconvenience." delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [alert dismissWithClickedButtonIndex:0 animated:TRUE];
        [alert show];
    }
    [[NSUserDefaults standardUserDefaults] setBool:TRUE forKey:@"registeredForPush"];
    [[NSUserDefaults standardUserDefaults] synchronize];
}
}

- (void)application:(UIApplication*)application didFailToRegisterForRemoteNotificationsWithError:(NSError*)error
{
NSLog(@"Failed to get token, error: %@", error);
}

- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Landing Zone Assistant" message:[userInfo valueForKeyPath:@"alert"] delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
[alert show];
}

@end 
```

* * *

**更新：**

好的，所以在删除所有 Mobile Provisioning 配置文件、所有证书、所有 .pem 文件、所有内容并为开发和生产重新生成所有证书、密钥、权限和配置文件之后，我的问题仍然存在......

使用沙盒网关向设备上的调试版本发送消息，成功。使用主苹果网关发送消息以在测试设备上发布 Ad Hoc 版本，不成功....

有任何想法吗？

我没有收到来自 APNS 服务的错​​误消息，一切都成功了。没有构建错误。全新的最新证书...

* * *

**更新：**

[我在这里](https://developer.apple.com/library/ios/#technotes/tn2265/_index.html#//apple_ref/doc/uid/DTS40010376)从 Apple 技术支持处找到了这篇文章，并按照所有步骤检查了所有内容。据我所知，一切都检查完毕。我的生产版本确实包含生产的 aps_environment 。

我还发现[了这种](http://code.google.com/p/apns-php/wiki/CertificateCreation)生成 .pem 文件的方法，这与我之前的尝试有些不同，所以我尝试了这个，但它仍然不起作用。我的代码仍然与上面相同，因为问题似乎出在其他地方，但是如果有人在扫描时看到某些东西，请告诉我。我只是想让这个工作。

我很乐意在这个问题上悬赏，但我没有足够的声誉，我一直试图通过帮助别人解决问题来获得一些。

* * *

**更新：**

[在搜索时，我在此处](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html)找到了 Apple 的另一份文档，其中有一行说明“注意生产环境中的设备令牌和开发（沙盒）环境中的设备令牌的值不同。” 所以我想另一个问题是。

**开发和生产模式的 deviceToken 是否不同？**

* * *

**更新：**

我知道这会越来越长，但我试图展示我已经采取了哪些步骤来尝试自我解决这个问题。

我一直在文档中看到这个 Entrust CA 证书弹出。我已经使用它来验证与 APNS 网关的连接，但是在发送推送消息时我没有在我的连接中使用它，因为我所看到的示例都没有显示使用它。这是必需的吗？如果是这样，我该如何使用它？

* * *

**更新：**

我决定尝试使用 PhoneGap 重新开发我的应用程序并接触更多的受众，所以我现在将关闭它。感谢大家的帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-15T06:23:40.580

在你查看代码之前，打开生产配置文件并仔细检查它是否有条目：

```
 <key>ProvisionsAllDevices</key><true/> 
```

我猜该设备已在开发配置文件中注册，因此它在那里工作但不适用于 prod 的事实让我相信问题出在配置文件本身。您必须拥有 Apple 的 Enterprise Developer 帐户才能创建可配置任何设备的配置文件。

# android - Android 上 Sqlite 中的 strftime 错误？

> ID：13888344
> 
> 赞同：1
> 
> 时间：2012-12-15T01:05:19.273
> 
> 标签：android, sqlite, strftime

运行安卓 4.1.2。

以下应根据 SQLite[文档](http://www.sqlite.org/lang_datefunc.html)工作。

```
String sql = "SELECT strftime('%m', MyDate) FROM MyTable";
Cursor c = database.rawQuery(sql);
c.moveToFirst();
String s = c.getString(0); // returns null 
```

但是，返回的数据始终是`null`. 如果我将查询更改为`SELECT MyDate FROM MyTable`then 它确实返回一个有效日期，因此我可以向您保证我的数据库包含正确的数据。

**问：**我是否面临`rawQuery`方法中的错误或我做错了什么？

# c - 从 C 启动一个新的 shell

> ID：13888347
> 
> 赞同：0
> 
> 时间：2012-12-15T01:05:48.177
> 
> 标签：c, shell

如何从 C 启动新的非交互式 shell 进程？

目前我有以下内容：

```
system(cmdStr);
//system("/bin/sh -c"); 
```

cmdStr 是我要执行的命令。我在下面有对 shell 进程的引用......但是如何将 cmdStr 附加到它？如何让它启动一个新进程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T01:10:55.973

如果您不想连接字符串，可以执行以下操作：

```
if (fork())
{
    execl("/bin/sh", "sh", "-c", cmdStr, (char *) NULL);
    exit(EXIT_FAILURE);
} 
```

这`system`基本上就是这样做的。

否则要连接一个字符串，你应该看看标准函数`strcat`和`strncat`from `string.h`。

# extjs - 将侦听器分配给 xtemplate 中的不同 div - extjs 3.4

> ID：13888348
> 
> 赞同：1
> 
> 时间：2012-12-15T01:05:59.837
> 
> 标签：extjs, extjs3, dataview, listeners

我无法将侦听器添加到从 XTemplate 生成的不同元素中。

```
 var data = {
    users: [
        { id: 1, name: 'Ed Spencer' },
        { id: 2, name: 'Abe Elias'}
    ]
};

var store = new Ext.data.JsonStore({       
    autoLoad: true,
    data : data,
    root: 'users',
    fields: [
        {name: 'id',    type: 'int'},
        {name: 'name',  type: 'string'}
    ]
});

var template = new Ext.XTemplate(
    '<tpl for=".">',
        '<div class="holder">',
            '<div class="notclicked">foobar</div>',
            '<div class="name">{name}</div>',
            '<div class="id">{id}</div>',
        '</div>',
    '</tpl>'
);

var newPanel = new Ext.Panel({

    title: "test",
    items: new Ext.DataView({
        store: store,
        tpl: template,
        itemSelector: 'div.holder',
        emptyText: 'No foo to display'
    })
});

newPanel.render('targetDiv'); 
```

我想做的是为“name”div 上的点击创建一个“click”侦听器，为“id”div 创建一个不同的侦听器。但到目前为止，我只能为谁“持有者”div 制作一个“点击”监听器。作为扩展，我希望 div 'notclicked'... 不响应点击。我一直在反对这一点。谁能给我推动正确的方向？

我正在使用 3.4。我在 jsfiddle 上放了一个小提琴：http: [//jsfiddle.net/tatagatha/7SfCf/6/](http://jsfiddle.net/tatagatha/7SfCf/6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T02:20:06.723

将“代表”与紧密选择器一起使用

[http://www.sencha.com/blog/event-delegation-in-sencha-touch](http://www.sencha.com/blog/event-delegation-in-sencha-touch)

看起来 3.4 还没有事件委托。因此，您必须手动检查单击了哪个节点：这是您选择工作的小提琴。 [http://jsfiddle.net/dbrin/R29U5/](http://jsfiddle.net/dbrin/R29U5/)

这在数据视图上进行：

```
 listeners: {
            click: {
                fn: this.onClick,
                scope: this
            }
        },
        onClick: function(event, item, options) {
            console.log(arguments);
            if (item.className === "id") {
                console.log("Id clicked: " + item.innerHTML);
                alert("ID clicked: " + item.innerHTML);
            }
        } 
```

# visual-c++ - 显示地图的内容

> ID：13888351
> 
> 赞同：0
> 
> 时间：2012-12-15T01:06:25.093
> 
> 标签：visual-c++

如何显示这张名为索引的地图的内容？

```
map< string, vector< pair<string, int> > > index 
```

我制作了一个迭代器，并使用以下代码在地图的开头制作了它：

```
map< string, vector< pair<string, int> > >::iterator it;
it = index.begin(); 
```

...我使用这个 for 循环来显示地图内容，但它给了我错误：

```
for ( it =index.begin() ; it != index.end(); it++ )
    cout << (*it).first <<(*it).second <<endl; 
```

我知道错误是`(*it).second`因为它指的是向量，但我无法解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T18:44:40.937

`(*it).second` has no meaning by itself in this context. You need to use the vector public interface to extract data (see it in `vector` documentation) from it or do whatever manipulation that you need.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T18:45:29.177

Instead of a `map<string, vector<pair<string, int> > index;`, I'd at least consider starting with a `multimap<string, pair<string, int> > index;`. Both accomplish essentially the same thing: some arbitrary number of `pair<string, int>` associated with one key (a string, in this case).

To display that, I'd start by overloading `operator<<` for the types in the container:

```
// the type of the data being stored:
typedef pair<string, int> data_t;

// an overload for that:
ostream &operator<<(ostream &os, data_t> const &d) { 
    return os << d.first << d.second;
} 
```

But the value_type of a map or multimap is a pair of the key and the associated data, so we need to provide an overload for that too:

```
ostream &operator<<(ostream &os, pair<string, data_t> const &d) {
    return os << d.first << d.second;
} 
```

Then I'd use `std::copy` to copy the data to the stream:

```
copy(index.begin(), index.end(), ostream_iterator<data_t>(cout, "\n")); 
```

So what'll happen is that each for each object in the map, it'll do essentially `cout << object[i]`. That will print out the key and the associated data. The associated data is itself a `pair<string, int>`, so that'll be printed out with the other overload of `operator <<`.

# java - 我需要设置什么才能使 org.apache.http.client.HttpClient 的 execute() 工作？

> ID：13888354
> 
> 赞同：1
> 
> 时间：2012-12-15T01:06:32.277
> 
> 标签：java, android, apache-httpclient-4.x

我是 android 新手，我正在制作一个简单的应用程序，将 JSON 对象发送到服务器。我在互联网上找到的许多示例都有以下三行代码：

```
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost(prepai.host22.com/LoadStory.php);
HttpResponse httpResponse = httpClient.execute(httpPost); 
```

我试图运行它们，但是在执行 execute() 函数时，在 eclipse 模拟器中运行的应用程序崩溃了。我得到了这个日志：

```
Caused by: java.lang.IllegalStateException: Target host must not be null, or set in parameters. scheme=null, host=null, path=prepai.host22.com/LoadStory.php 
```

如何给主机一个值？我还必须在单独的线程中进行所有通信吗？或者还有什么我需要做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T01:56:36.633

您应该将完整的 url（包括 http 或 https）作为字符串传递，例如：

```
HttpPost httpPost = new HttpPost("http://prepai.host22.com/LoadStory.php"); 
```

# version-control - 如何查看谁创建/停用/关闭了 Mercurial 分支？

> ID：13888356
> 
> 赞同：2
> 
> 时间：2012-12-15T01:06:37.437
> 
> 标签：version-control, mercurial, branch, bitbucket

我们已经使用在 Bitbucket 托管的 Mercurial 一年了，现在团队已经扩展到 7 名开发人员，我决定开始使用带有命名分支的 SCM 策略，即按功能分支。分支可能会存活数天或数月（长话短说）。作为团队负责人，我经常负责合并分支。许多开发人员可能在一个分支上工作，并且很容易看到他们的提交信息，但是我如何才能看到谁创建/关闭了一个分支？另外，一个分支如何变得“不活跃”，我如何查看有关它的详细信息？

更新：使用 Mercurial 1.9.3，我们的一些分支显示为非活动状态。似乎 Mercurial 正在远离使用不活动，但也许我误解了？
$ hg 分支
默认 1538:a145e13ab06a
IIP-628 1510:3e48d51e7757
IIP-98 1528:17a57f033d3b（非活动）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T23:08:24.697

第一次提交到分支的作者是创建分支的人。

```
hg log -r "first(branch('branchname'))"
```

设置了关闭标志的提交的作者是关闭分支的人。分支机构可能会重新开放，因此可能会有不止一个“关闭者”。

```
hg log -r "branch('branchname') and closed()"
hg log -r "last(branch('branchname') and closed())"
```

如果一个分支没有活动的头，即所有变更集都已合并到某个其他分支，则该分支是非活动的。您可以构造一个[revset](http://www.selenic.com/hg/help/revsets)查询来返回您想要的特定信息，但通常用于`hg heads`查看所有磁头，包括非活动磁头。

```
hg heads
hg heads --closed
```

请注意，分支可能没有活动的头并且没有被关闭，或者被关闭但关闭的变更集是头（IIRC 只有关闭的变更集的分支是隐式不活动的 - 不是在安装了 Mercurial 的机器上检查）。

因此，如果您对“关闭”的定义是“没有活动的头”，那么您将寻找最后一个合并的变更集，这通常是分支中的最后一个变更集，但可能不是。以下 revset 将返回分支中最后一个关闭或合并的变更集，该变更集也是一个头变更集。

```
hg log -r "last(branch('branchname') and head() and (closed() or parents(merge())))"
```

# c++ - 尾随返回类型语法是否应该是所有函数的默认语法？

> ID：13888357
> 
> 赞同：5
> 
> 时间：2012-12-15T01:06:45.040
> 
> 标签：c++, c++11, auto, return-type, function-declaration

> **可能重复：**
> [替代函数语法](https://stackoverflow.com/questions/11215227/alternative-function-syntax)

在复杂的函数模板中，有时需要 C++11 尾随返回类型语法才能`decltype`在参数上使用，否则会为时已晚：

```
template<typename T, typename U>
auto add(const T& a, const U& b) -> decltype(a + b)
{
    return a + b;
} 
```

*从现在开始总是*使用这种新语法会不会更加一致，即使对于普通函数也是如此？

```
auto main() -> int; 
```

然后我们只需要处理一种函数语法而不是现代代码中的两种，我们可以弃用旧语法，就像我们弃用隐式 int 或隐式 using 声明一样。

为了使新语法更具吸引力，我们可以`auto`用一个更好的名称替换：

```
#define def auto 
```

突然之间`main`，函数式程序员的签名看起来非常有吸引力：

```
def main() -> int; 
```

我忽略了什么吗？尾随返回类型语法是否以某种我没有想到的方式较差？

# javascript - JQVMap - 将区域设置为禁用/不可选择

> ID：13888358
> 
> 赞同：4
> 
> 时间：2012-12-15T01:06:58.743
> 
> 标签：javascript, jquery, jqvmap

我想在地图中设置没有数据的区域，以禁用单击。有什么办法可以做到这一点...我已经成功禁用了对RegionOver的颜色更改，但是相同的区域仍然响应单击（并更改区域的颜色...）。我尝试从 onRegionOver 和 onRegionClick 事件中调用 preventDefault() 方法...但它没有帮助...不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:42:27.023

迟到的反应，但也许这可以帮助下一个人。

```
var states = 'ca,co,tx,ny,ks,mo';        
$('#vmap').vectorMap({
map: 'usa_en',
    selectedRegion: 'tx',
    backgroundColor: '#ffffff',
    color: '#E6E7E9',
    hoverColor: '#03235E',
    enableZoom: false,
    showTooltip: true,
    onRegionOver: function (event, code, region) {
    // if it's not in the approved list, do nothing, 
    // else allow normal behavior
    if (states.toLowerCase().indexOf(code) <= -1) {
        event.preventDefault();
    }
    },
    onRegionClick: function (event, code, region) {
    // if it's not in the approved list, do nothing, else handle it
    if (states.toLowerCase().indexOf(code) <= -1) {
        event.preventDefault();
    }
    else {
        //handle state click
    }
    }
}) 
```

# c++ - 需要在')'token'之前调试'expected unqualified-id'，第一次使用c++用户

> ID：13888360
> 
> 赞同：-2
> 
> 时间：2012-12-15T01:07:52.853
> 
> 标签：c++

我正在尝试 c++，仍然是大学的学生，无法发现错误来自哪里。有人可以帮忙吗？

```
class  M() {
    static  bool m() {  
        cout << "Hello, do you want to tell me your name (y or n)";
        char answer = 0;
        int  times = 1;
        while(times < 3) {
            cin >> answer;
            switch(answer){
                case 'y' : 
                    return true;
                case 'n' : 
                    return false;
                default :  
                    cout << "I am sorry, I don't understand that.";
                    times += 1;
            }
            cout << "Your time's up.";
            return false;
        }    
    }
}

int main() {
    M::m();
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T01:14:39.203

它在这条线上：

```
class M() { 
```

您不要在类名定义之后放置方括号。将其更改为：

```
class M { 
```

您的代码还有一些问题（类结束大括号后的分号等），工作代码如下所示：

```
class  M {
public:
    static bool m() {
        std::cout << "Hello, do you want to tell me your name (y or n)";
        char answer = 0;
        int  times = 1;
        while(times < 3) {
            std::cin >> answer;
            switch(answer){
                case 'y' :
                    return true;
                case 'n' :
                    return false;
                default :
                    std::cout << "I am sorry, I don't understand that.";
                    times += 1;
            }
            std::cout << "Your time's up.";
            return false;
        }
        // You need this so you won't get warnings.
        return false;
    }
}; // Don't forget this semicolon!

int main() {
    M SomeObject;
    SomeObject::m();
}; 
```

# login - 在 liferay 中创建一个“login.events.pre”钩子

> ID：13888365
> 
> 赞同：1
> 
> 时间：2012-12-15T01:08:58.393
> 
> 标签：login, hook, liferay, liferay-6

我对 liferay 很陌生，正在 login.events.pre 事件上创建一个钩子。我的用户将使用他们的电话号码登录网站，因此在让 liferay 为用户创建会话之前，我必须对其电话线路的状态进行一些验证。我已经创建了 portlet 并且能够在让 liferay 处理登录验证之前执行一些 java 代码，但是如果验证失败，我不确定如何停止整个过程。换句话说，如果我发现用户的电话线被暂停，我不希望 liferay 允许他们登录，即使用户提供了正确的登录信息。是否可以在 liferay 的 login.events.pre 事件中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T09:21:18.640

在这种情况下，您可以使 无效`Session`并将其重定向到您的`hook`.

下面的代码可能会有所帮助。

```
//Below code to get the current session
HttpSession session = null;
session=request.getSession(false);

//Below code to invalidate the session and to redirect to your customized error page
session.invalidate();
response.sendRedirect("/errorPage.html"); 
```

# android - android更改文件可执行属性

> ID：13888367
> 
> 赞同：0
> 
> 时间：2012-12-15T01:09:26.957
> 
> 标签：android, permissions, executable

我从带有Web服务的服务器下载一个pdf文件并将其保存在一个文件中然后我尝试通过PDFViwer打开文件但它没有打开然后我打开eclipse文件资源管理器我看到文件权限是“-rw-----”我尝试更改 exec 权限，但它没有

```
File myDir = new File(getFilesDir().getAbsolutePath() + "/aaa.pdf");
byte[] data = Base64.decode(evrakIcerikB64, 0);

boolean exec=myDir.setExecutable(true);
boolean read=myDir.setReadable(true);
boolean wri=myDir.setWritable(true); 
```

如何更改文件权限？

# c++ - OpenCV：相对于参考图像移动/对齐面部图像（图像配准）

> ID：13888368
> 
> 赞同：2
> 
> 时间：2012-12-15T01:10:12.310
> 
> 标签：c++, image-processing, opencv, translate, face-recognition

我是 OpenCV2 的新手，正在从事情感识别项目，并希望将面部图像与参考面部图像对齐。我想在转向旋转之前让图像翻译工作。当前的想法是在 x 和 y 坐标的有限范围内运行搜索，并使用平方差之和作为误差度量来选择最佳 x/y 参数来对齐图像。我正在使用 OpenCV face_cascade 函数来检测人脸图像，所有图像都被调整为固定的（128x128）。问题：我需要修改 Mat 图像的哪些参数才能在 x 和 y 轴上沿正/负方向移动图像？我相信 Mat 数据类型不再支持 setImageROI？我有两张脸的投资回报率，但我不确定如何使用它们。

```
void alignImage(vector<Rect> faceROIstore, vector<Mat> faceIMGstore)
{
  Mat refimg = faceIMGstore[1]; //reference image
  Mat dispimg = faceIMGstore[52]; // "displaced" version of reference image
  //Rect refROI = faceROIstore[1]; //Bounding box for face in reference image
  //Rect dispROI = faceROIstore[52]; //Bounding box for face in displaced image
  Mat aligned;

  matchTemplate(dispimg, refimg, aligned, CV_TM_SQDIFF_NORMED);
  imshow("Aligned image", aligned);
} 
```

这种方法的想法是基于[Richard Szeliski](http://research.microsoft.com/pubs/70092/tr-2004-92.pdf) Working on Windows with OpenCV 2.4 的图像对齐教程。任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T02:07:15.357

`cv::Mat`确实支持投资回报率。（但它不支持 COI - 感兴趣的渠道。）

要应用 ROI，您可以使用`operator()`或特殊构造函数：

```
Mat refimgROI  = faceIMGstore[1](faceROIstore[1]); //reference image ROI
Mat dispimgROI(faceIMGstore[52], faceROIstore[52]); // "displaced" version of reference image ROI 
```

要在位移图像中找到最佳位置，您可以使用[matchTemplate](http://docs.opencv.org/modules/imgproc/doc/object_detection.html#matchtemplate)函数。

* * *

根据您的评论，我可以建议以下代码，它将在第二个（置换的）补丁附近找到参考补丁的最佳位置：

```
Mat ref = faceIMGstore[1](faceROIstore[1]);
Mat disp = faceIMGstore[52](faceROIstore[52]);

disp = disp.adjustROI(5,5,5,5); //allow 5 pixel max adjustment in any direction
if(disp.cols < ref.cols || disp.rows < ref.rows)
    return 0;
Mat map;
cv::matchTemplate( disp, ref, map, CV_TM_SQDIFF_NORMED );

Point  minLoc;
cv::minMaxLoc( map, 0, &minLoc );

Mat adjusted = disp(Rect(minLoc.x, minLoc.y, ref.cols, ref.rows)); 
```

# git - git - 每次提交的成本

> ID：13888370
> 
> 赞同：3
> 
> 时间：2012-12-15T01:10:20.023
> 
> 标签：git

git中每次提交的成本是多少？例如，如果我一次提交更改 A 和 B，而不是分别提交，那么使用了多少（或更少）空间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T01:28:07.073

TLDR：我直观地预测，无需测试，实际用例的差异很小。如果您每天要进行数千次提交，也许您应该对此进行更多分析。

我的思考过程：每个提交都由提交消息、树和 blob 组成。请参阅[Git for Computer Scientists](http://eagain.net/articles/git-for-computer-scientists/)了解精彩的演练。将 blob 视为一个文件的差异。一般来说，平均而言，我不希望在两个 blob 而不是一个 blob 中进行更改。所以你剩下的是一个额外的树对象和一个额外的提交消息。（树对象是一个子目录和文件名，它告诉 git 在哪里应用 blob - 差异。提交消息就是你认为的那样。）

因此，对其进行一些猜测：

*   树对象可能是 10 到 100 个字节
*   提交消息可能是 10 到 200 个字节

根据这些估计，加倍意味着增加约 20 到 300 个字节。

（注意：这个分析没有考虑磁盘分配。所以它可能离基础太远了！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T01:23:45.843

新创建的对象通常是松散的对象。

每个松散对象在磁盘上占用最少 4K。

单个提交至少由一个提交对象、一个树对象和一个 blob 对象组成。

如果允许为空（不更改文件），则只有一个提交对象，但这并不常用。

因此，12K 是最小的！

# html - 匹配在一行中只出现一次的特定 html 标签

> ID：13888375
> 
> 赞同：0
> 
> 时间：2012-12-15T01:11:09.707
> 
> 标签：html, regex, html-parsing

这种线怎么搭配

```
<p><span class="font7" style="font-weight:bold;">text text text text </span></p>\r\n<p> 
```

同时避免这种线

```
<p><span class="font7" style="font-weight:bold;">text text text text </span><span class="font7"> text text text <br/> text text text </span></p>\r\n<p> 
```

问题是标签跨度在同一行出现两次，我想避免这种情况。只希望 if 在一行中出现一次。

```
</span> 
```

我试过这个正则表达式

```
<p><span class="font7" style="font-weight:bold;">.+?(?:(?!.+?</span>.+?$)){2}</p>\r\n<p> 
```

请帮助我，如果可能的话，使用 .net、perl 或 ruby​​ 风味

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T03:38:01.270

不要尝试使用正则表达式解析 HTML。你不能可靠地做到这一点。正则表达式不能胜任这项任务。

您需要一个合适的 HTML 解析器。它将是一个经过充分测试并被许多人使用的 HTML 解析器，而不是你试图拼凑的任何正则表达式。

下面是[Perl HTML 解析器](http://htmlparsing.com/perl.html)的一些选项。从那里开始。

# php - MySQL 错误与非唯一表/别名与连接

> ID：13888377
> 
> 赞同：0
> 
> 时间：2012-12-15T01:11:32.583
> 
> 标签：php, mysql, sql

```
SELECT `idstudii` 
FROM (`studii`) 
JOIN `studii` ON `mesaje`.`idstudii`=`studii`.`id` 
JOIN `users` ON `users`.`id`=`studii`.`idusers` 
WHERE `studii`.`idusers` = '1' 
```

我有这个 sql 查询，它给了我错误“不是唯一的表/别名”。情况并非如此，因为“studii”是唯一具有该名称的表。为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T01:16:29.690

```
FROM (`studii`) 
JOIN `studii` 
```

在这种情况下，您指的是具有相同别名（studii）的表的 2 个不同选择

```
FROM `studii` AS s1
JOIN `studii` AS s2 ON s2.something2 = s1.something1 
```

# c - malloc 问题和内存堆

> ID：13888379
> 
> 赞同：0
> 
> 时间：2012-12-15T01:12:22.803
> 
> 标签：c, windows, malloc, free, corruption

我在分配/释放内存方面遇到了一个奇怪的问题。我无法显示整个代码本身，所以请使用非常简单的部分代码：

```
#include <stdio.h>

int main(void)
{
     void *ptr;

     ptr = malloc(sizeof(node));

     /* making sure what the value is when it was initialized */
     printf("head_node: %p\n", ptr);

     /* i do a lot of things here, such as appending the node, sometimes truncating them */

     /* --------------------------------------------------------------------------------*/

     /* making sure what the value is still the same: */
     printf("head_node: %p\n", ptr);
     free(ptr);

     printf("done");
} 
```

节点在其他地方声明的地方。

在我释放ptr并且它的初始值在释放它之前它的初始值是相同的并且它不是NULL时，我在Windows中得到错误对话框。

现在这是奇怪的部分。当我在 MinGW 下编译它并在 MSYS（MinGW 控制台外壳）或外部运行它时，它不会遇到任何错误。当我在 MS Visual Express 2012 下构建它并在它下调试它时，它不会遇到任何错误。但是当我在 MS Visual 之外运行由 MS Visual Express 构建的相同程序时，我总是会出错。

更奇怪的是它首先打印出“完成”，这是在错误弹出之前程序的最后一点。在跟踪错误来源时不是很有帮助......

如果在正常的 Windows 环境中发现了任何错误，那么为什么不在 MS Visual 中呢？

这是显示的异常消息：

```
File: f:\dd\vctools\crt_bld\self_x86\crt\src\dbgheap.c
Line: 1322
Expression: _CrtIsValidHeapPointer(pUserData) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T02:50:15.607

您的症状表明您在丢失的代码中的某处损坏了堆。您可能正在写入无效指针或在某处向有效指针写入过多内容。仅在退出时出现崩溃的原因是堆损坏仅在程序清理时才注意到，并且不同的编译器在此阶段执行不同数量的检查。

这是您在整个程序中唯一的 malloc 吗？如果是这样，那可能是您的问题的一部分——您的“节点”（又名 head_node）意味着您正在使用列表做某事。如果您正在访问 node->next （或您调用链接指针的任何内容）而没有为此执行 malloc，那么您的错误。没有更多的代码，就不可能多说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:58:28.653

可能是一个问题的另一件微妙的事情，特别是因为随着不同的构建环境问题消失了，你没有包括 stdlib.h。可能是您只是将其排除在“最小”示例之外，但在 malloc() 范围内没有原型可能会导致一些非常奇怪的问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-15T04:30:03.687

可能是内存泄漏。您的指针可能指向无效位置。它称为悬空指针。所以检查你的指针是否指向一个有效的位置（你的指针也可能指向一个无效的垃圾位置）

# vb.net - 从 VB5 迁移到 VB.NET 并遇到 USB .dll 调用问题

> ID：13888380
> 
> 赞同：1
> 
> 时间：2012-12-15T01:12:30.217
> 
> 标签：vb.net

我正在尝试与使用 FDTI 232RL 的 USB 设备通信。我已经安装了驱动程序并将 .dll 调用集成到我的 VB5 代码中，它运行良好。我想让它在 VB.net 上工作，但我收到 PInvokeStackImballance 错误消息。在 VB5 中，我有以下代码序列：

```
Private Declare Function FT_ListDevices Lib "FTD2XX.DLL" (ByVal arg1 As Long, ByVal arg2 As String, ByVal dwFlags As Long) As Long
...
Dim strSerialNumber As String * 256
...
LoggerList.AddItem ("ListDevices by S/N")
If FT_ListDevices(0, strSerialNumber, FT_LIST_BY_INDEX Or FT_OPEN_BY_SERIAL_NUMBER) <> FT_OK Then
... 
```

在 VB.NET 中：

```
Private Declare Function FT_ListDevices Lib "FTD2XX.DLL" (ByVal arg1 As Long, ByVal arg2 As String, ByVal dwFlags As Long) As Long
...
Dim strSerialNumber As Stringbuilder new = stringbuilder (" ",256)
...
LoggerList.AddItem ("ListDevices by S/N")
If FT_ListDevices(0, strSerialNumber, FT_LIST_BY_INDEX Or FT_OPEN_BY_SERIAL_NUMBER) <> FT_OK Then
... 
```

错误发生在 if 语句中。我是否需要使用 import("FTD2XX.dll") 导入 Dll？我也试过`Dim strSerialNumber(256) as char`了，也不管用。我在解决错误的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T01:52:42.260

在 VB5 中，a`long`是 32 位，而在 VB.Net 中是 64 位。将函数中的参数从 VB.Net 上的 32 位更改`long`为`int`。

```
Private Declare Function FT_ListDevices Lib "FTD2XX.DLL" (ByVal arg1 As Integer, _
        ByVal arg2 As String, ByVal dwFlags As Integer) As Integer 
```

# ruby-on-rails - Ruby on Rails 错误“无法加载此类文件——更少”

> ID：13888381
> 
> 赞同：41
> 
> 时间：2012-12-15T01:12:32.930
> 
> 标签：ruby-on-rails, ruby, twitter-bootstrap, web

我是新手`ruby on rails`，我一直在尝试将其`twitter-bootstrap`用作资产，因此我已将其包含在我的 Gemfile 中，捆绑并成功安装。但是我注意到它依赖于我执行“捆绑”命令时未显示的某些依赖项。

它需要的依赖

```
(1) Libv8
(2) Less
(3) Less-rails 
```

错误信息：

```
cannot load such file -- less
  (in c:/Sites/todo/app/assets/stylesheets/bootstrap_and_overrides.css.less)

[code]

Extracted source (around line #8):

5:   <!--[if lt IE 9]>
6:     <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"     type="text/javascript"></script>
7:   <![endif]-->
8:   <%= stylesheet_link_tag    "application", :media => "all" %>
9:   <%= javascript_include_tag "application" %>
10:   <%= csrf_meta_tags %>
11:   <meta name="viewport" content="width=device-width, initial-scale=1.0">

[/code]

Trace
app/views/layouts/application.html.erb:8:in     `_app_views_layouts_application_html_erb__560528188_27183396'
app/controllers/lists_controller.rb:7:in `index' 
```

我已经注意到这个问题的很多答案，并选择了明显的解决方案，但不知何故我仍然卡住了，非常感谢一些指导。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-12-15T01:23:40.303

我猜你使用的是 sass 而不是 LESS。

您是否尝试过 twitter-bootstrap-rails gem？

```
gem "therubyracer"
gem "less-rails"
gem "twitter-bootstrap-rails" 
```

[https://github.com/seyhunak/twitter-bootstrap-rails](https://github.com/seyhunak/twitter-bootstrap-rails)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-08-08T03:35:34.423

我只需要重新启动我的服务器。

我在本地服务器运行时添加了上面列出的三个 gem（`less-rails`、`therubyracer`和`twitter-bootstrap-rails`, 以及*Rails 3.2.13*），导致上面看到的问题。因此，一旦我将其关闭并重新启动，一切都加载良好。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-15T01:28:42.263

您必须将 gem 更新`therubyracer`或降级`twitter-bootstrap-rails`到版本 2.1.7，这是最后一个没有此问题的已知版本。

运行`bundle update`以更新您的 gem 或`Gemfile`让您的 twitter-bootstrap-rails gem 看起来像这样：

```
gem 'twitter-bootstrap-rails', '2.1.7' 
```

看看这个问题：

[https://github.com/seyhunak/twitter-bootstrap-rails/issues/465](https://github.com/seyhunak/twitter-bootstrap-rails/issues/465)

此问题开始在 2.1.7 之后的版本上发生`twitter-bootstrap-rails`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-09T19:42:57.893

如果你在 Windows 下得到它，这应该可以帮助你 [therubyracer_for_windows](https://github.com/hiranpeiris/therubyracer_for_windows)

它帮助了我

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-09T15:49:01.303

也许您在 Windows 上……没有适用于 Windows 的 libv8，也没有二进制 therubyracer，因为它依赖于 libv8

# notepad++ - 在 sublime2 文本编辑器中突出显示 xml

> ID：13888383
> 
> 赞同：0
> 
> 时间：2012-12-15T01:12:55.017
> 
> 标签：notepad++, sublimetext2

是否有插件可以在 sublime2 文本编辑器中像 notepad++ 一样突出显示 xml 标签？

在记事本++中，只要我点击一个标签，结束标签就会突出显示。我喜欢这个功能，特别是对于非常大的 xml 文件。我在下面包含了我在 sublime text 和 notepad++ 中打开的文件的同一部分的示例。

记事本++中的示例： ![在此处输入图像描述](../Images/815d229d29296a41d0f0d602cfafd595.png)

sublime2 中的示例： ![在此处输入图像描述](../Images/f42be9fec347b7f1bc9d897ba371e59b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T04:46:06.563

我认为[BracketHighlighter](https://github.com/facelessuser/BracketHighlighter)插件应该做你想做的事。我知道他几乎准备好推出插件的第 2 版（链接中 github 页面的 BH2 分支）。不过它在包控制中，以便于安装。如果您对此有疑问，开发人员已经非常擅长回答问题，因此您也可以尝试在[Sublime Text 论坛](http://www.sublimetext.com/forum/viewtopic.php?f=5&t=3327)上发帖。

# android - 如何在 Android 中以编程方式检查平板电脑大小

> ID：13888384
> 
> 赞同：0
> 
> 时间：2012-12-15T01:13:02.110
> 
> 标签：android, layout

现在，我这样做：

```
 if ((getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) >= Configuration.SCREENLAYOUT_SIZE_LARGE) {
        actionBar.removeAllTabs();

    } else {  // other stuff to do 

    } 
```

但是，我希望仅当它是 10"+ 平板电脑或 XLarge 时才能证明这一点。不是 7 英寸（例如 Nexus 7）。我希望 7" 与手机的布局相同。我可以务实地做这个检查吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T01:24:17.023

您应该避免在代码中这样做，而是为定义的布局创建一个资源限定文件夹`sw720dp`（即，您应该在 下创建 10" 布局`res/layout-sw720dp`）。避免使用`large`和`xlarge`限定符，并依赖可用的与密度无关的像素数.

有关更多信息，请参阅[支持多个屏幕的本节。](http://developer.android.com/guide/practices/screens_support.html#NewQualifiers)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T01:29:22.903

替换`SCREENLAYOUT_SIZE_LARGE`为[`SCREENLAYOUT_SIZE_XLARGE`](http://developer.android.com/reference/android/content/res/Configuration.html#SCREENLAYOUT_SIZE_XLARGE)：

```
if ((getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) >= Configuration.SCREENLAYOUT_SIZE_XLARGE) {
    /* implementation */
} 
```

如果可能，请避免使用 deprecated`large`和`xlarge`限定符并使用 new`sw<N>dp`限定符。但是，根据您的目标受众和平台，您可能需要依赖较旧的方法，或者可能两者兼而有之。

# android - 在 Android 中按地址搜索 Google 地图

> ID：13888386
> 
> 赞同：3
> 
> 时间：2012-12-15T01:13:10.980
> 
> 标签：android, android-2.3-gingerbread

用于按地址实施 Google 地图搜索

我在stackoverflow中遵循了以下答案

[如何实现谷歌地图按地址搜索](https://stackoverflow.com/a/5375840/1904932)

我尝试了将近 2 天，并搜索了未找到的解决方案。

在这里我添加我的代码

activity_search_map.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="#3b3b3b">

     <LinearLayout
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:layout_marginTop="5dip"
         android:background="#2a2a2a"
         android:orientation="horizontal" >

         <EditText
             android:id="@+id/editText1"
             android:layout_width="450dp"
             android:layout_height="wrap_content"
             android:layout_weight="1"
             android:ems="10" >

             <requestFocus />
         </EditText>

  <Button 
      android:id="@+id/btnmapsites"
      android:layout_width="fill_parent" android:layout_height="wrap_content"
         android:text="Go" 
         android:padding="15dip" android:layout_weight="1"
         android:gravity="center"/>  

  </LinearLayout>

<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:apiKey="0Hy-jVRgYeXOLNcLWl8N7bFl4spAl7s4SX4cYSg"
/>

 </LinearLayout> 
```

SearchMapActivity.java（主 Activity 类）

```
package com.example.searchmap;

import java.io.IOException;
import java.util.List;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;

import android.location.Address;
import android.location.Geocoder;
import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class SearchMapActivity extends Activity {

    Geocoder geoCoder;
    EditText editText;
    GeoPoint p;
    MapController controller;
    MapView mapView;
    Button btngo;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_search_map);

        editText = (EditText) findViewById(R.id.editText1);
        mapView = (MapView) findViewById(R.id.mapView);
        btngo = (Button) findViewById(R.id.btnmapsites);

          btngo.setOnClickListener(new View.OnClickListener() {                             

            public void onClick(View arg0) {

        List<Address> addresses;
        try {
            addresses = geoCoder.getFromLocationName(editText.getText().toString(),1);
            if(addresses.size() > 0)
            {
                 p = new GeoPoint( (int) (addresses.get(0).getLatitude() * 1E6), 
                                  (int) (addresses.get(0).getLongitude() * 1E6));

                   controller.animateTo(p);
                   controller.setZoom(12);

                   MapOverlay mapOverlay = new MapOverlay();
                 List<Overlay> listOfOverlays = mapView.getOverlays(); 
                         listOfOverlays.clear();
                 listOfOverlays.add(mapOverlay);

                   mapView.invalidate();
                   editText.setText("");
            }
            else
            {
                    AlertDialog.Builder adb = new AlertDialog.Builder(SearchMapActivity.this);
                    adb.setTitle("Google Map");
                    adb.setMessage("Please Provide the Proper Place");
                    adb.setPositiveButton("Close",null);
                    adb.show();
            }

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
            }
            });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_search_map, menu);
        return true;
    }

} 
```

MapOverlay.java

```
package com.example.searchmap;

import java.util.List;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Point;
import android.location.Address;
import android.location.Geocoder;
import android.os.Bundle;
import android.app.Activity;
import android.content.res.Resources;
import android.view.Menu;
import android.widget.EditText;

class MapOverlay extends com.google.android.maps.Overlay
{
    public boolean draw(Canvas canvas, MapView mapView, 
    boolean shadow, long when) 
    {
     GeoPoint p = null;
            super.draw(canvas, mapView, shadow);                   

        //---translate the GeoPoint to screen pixels---
        Point screenPts = new Point();
        mapView.getProjection().toPixels(p, screenPts);

        //---add the marker---
        Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.red);            
        canvas.drawBitmap(bmp, screenPts.x, screenPts.y-32, null);         
        return true;
    }

    private Resources getResources() {
        // TODO Auto-generated method stub
        return null;
    }
} 
```

LogCat - 我在 LogCat 中遇到的错误 - 请通过这个

```
12-14 19:46:46.076: E/AndroidRuntime(1043): FATAL EXCEPTION: main
12-14 19:46:46.076: E/AndroidRuntime(1043): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.searchmap/com.example.searchmap.SearchMapActivity}: android.view.InflateException: Binary XML file line #35: Error inflating class com.google.android.maps.MapView
12-14 19:46:46.076: E/AndroidRuntime(1043):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
12-14 19:46:46.076: E/AndroidRuntime(1043):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
12-14 19:46:46.076: E/AndroidRuntime(1043):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-14 19:46:46.076: E/AndroidRuntime(1043):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
12-14 19:46:46.076: E/AndroidRuntime(1043):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-14 19:46:46.076: E/AndroidRuntime(1043):     at android.os.Looper.loop(Looper.java:130)
12-14 19:46:46.076: E/AndroidRuntime(1043):     at android.app.ActivityThread.main(ActivityThread.java:3683)
12-14 19:46:46.076: E/AndroidRuntime(1043):     at java.lang.reflect.Method.invokeNative(Native Method)
12-14 19:46:46.076: E/AndroidRuntime(1043):     at java.lang.reflect.Method.invoke(Method.java:507)
12-14 19:46:46.076: E/AndroidRuntime(1043):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-14 19:46:46.076: E/AndroidRuntime(1043):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-14 19:46:46.076: E/AndroidRuntime(1043):     at dalvik.system.NativeStart.main(Native Method)
12-14 19:46:46.076: E/AndroidRuntime(1043): Caused by: android.view.InflateException: Binary XML file line #35: Error inflating class com.google.android.maps.MapView
12-14 19:46:46.076: E/AndroidRuntime(1043):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
12-14 19:46:46.076: E/AndroidRuntime(1043):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
12-14 19:46:46.076: E/AndroidRuntime(1043):     at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
12-14 19:46:46.076: E/AndroidRuntime(1043):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
12-14 19:46:46.076: E/AndroidRuntime(1043):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
12-14 19:46:46.076: E/AndroidRuntime(1043):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
12-14 19:46:46.076: E/AndroidRuntime(1043):     at android.app.Activity.setContentView(Activity.java:1657)
12-14 19:46:46.076: E/AndroidRuntime(1043):     at com.example.searchmap.SearchMapActivity.onCreate(SearchMapActivity.java:38)
12-14 19:46:46.076: E/AndroidRuntime(1043):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-14 19:46:46.076: E/AndroidRuntime(1043):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
12-14 19:46:46.076: E/AndroidRuntime(1043):     ... 11 more
12-14 19:46:46.076: E/AndroidRuntime(1043): Caused by: java.lang.ClassNotFoundException: com.google.android.maps.MapView in loader dalvik.system.PathClassLoader[/data/app/com.example.searchmap-2.apk]
12-14 19:46:46.076: E/AndroidRuntime(1043):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
12-14 19:46:46.076: E/AndroidRuntime(1043):     at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
12-14 19:46:46.076: E/AndroidRuntime(1043):     at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
12-14 19:46:46.076: E/AndroidRuntime(1043):     at android.view.LayoutInflater.createView(LayoutInflater.java:471)
12-14 19:46:46.076: E/AndroidRuntime(1043):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
12-14 19:46:46.076: E/AndroidRuntime(1043):     ... 20 more 
```

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T02:43:01.030

日志消息——

> “由：java.lang.ClassNotFoundException：加载程序dalvik.system.PathClassLoader [/data/app/com.example.searchmap-2.apk]中的com.google.android.maps.MapView引起

暗示您似乎在没有 Google Maps API 的设备上运行。如果它是模拟器，请转到您的 AVD 管理器并创建一个新的 AVD，其目标为“Google APIs (Google Inc.) -- API Level X”，其中 X 是您的目标 API。

如果这是一个真实的设备，看起来你有一个不支持谷歌地图的设备，请在模拟器中尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T09:04:20.790

> 引起：java.lang.ClassNotFoundException: com.google.android.maps.MapView in loader dalvik.system.PathClassLoader[/data/app/com.example.searchmap-2.apk]

这里`data`指的是 SD 卡。如果 SD 卡已从设备中移除，并且应用程序存储在其上，则打开应用程序会如上所述崩溃，因为设备无法找到 APK。我可以在 HTC 感觉版本 2.3.4 再现。

# php - MYSQL父子同表；PHP 将子代嵌套在父代中作为多维数组

> ID：13888389
> 
> 赞同：0
> 
> 时间：2012-12-15T01:13:56.590
> 
> 标签：php, mysql, arrays, multidimensional-array, mysqli

MYSQL 返回一个数组，如下所示。我正在使用 column: 'id_parent' 来自引用表以创建层次结构。因此，“id”为 2 的条目可以是任何“id_parent”为 2 的条目的父项，依此类推。

```
Array 
  (

    [1] => Array
        (
            [id] => 2
            [name] => About
            [id_parent] => NULL
        )

    [2] => Array
        (
            [id] => 4
            [name] => About Child
            [id_parent] => 2
        )

    [3] => Array
        (
            [id] => 5
            [name] => About Child's Child
            [id_parent] => 4
        )
  ) 
```

如何将孩子嵌套到其父数组中的数组中

```
Array
  (

    [1] => Array
        (
            [id] => 2
            [name] => About
            [id_parent] => 
            [children] => Array
                      (
                          [id] => 4
                          [name] => About Child
                          [id_parent] => 2
                          [children] => Array
                                    (
                                        [id] => 5
                                        [name] => About Child's Child
                                        [id_parent] => 4
                                    )
                      )
        )
  ) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-15T01:33:38.850

参考，具有顺序无关紧要的优点（子节点可以在其父节点之前）：

```
 $tree = array('NULL' => array('children' => array()));
 foreach($array as $item){
    if(isset($tree[$item['id']])){
       $tree[$item['id']] = array_merge($tree[$item['id']],$item);
    } else {
       $tree[$item['id']] = $item;
    }

    $parentid = is_null($item['id_parent']) ? 'NULL' : $item['id_parent'];
    if(!isset($tree[$parentid])) $tree[$parentid] = array('children' => array());
    //this & is where the magic happens: any alteration to $tree[$item['id']
    //  will reflect in the item $tree[$parentid]['children'] as they are the same
    //  variable. For instance, adding a child to $tree[$item['id']]['children]
    //  will be seen in 
    //  $tree[$parentid]['children'][<whatever index $item['id'] has>]['children]
    $tree[$parentid]['children'][] = &$tree[$item['id']];
 }
 $result = $tree['NULL']['children'];
 //always unset references
 unset($tree); 
```

# android - 获取另一个应用程序的缓存目录

> ID：13888391
> 
> 赞同：1
> 
> 时间：2012-12-15T01:13:59.483
> 
> 标签：android

我正在开发一个 Android 应用程序，其中列出了所有应用程序的缓存目录的路径和大小。我已经写了一些代码，但现在它崩溃了，我不知道出了什么问题。

```
Context context = createPackageContext(p.applicationInfo.packageName, Context.CONTEXT_INCLUDE_CODE);
items.add(p.applicationInfo.loadLabel(getPackageManager()).toString() + ": " + context.getCacheDir().getName()); 
```

p 是 File 的 PackageInfo，items 是一个 ArrayList。NullPointerException 导致崩溃。我希望有一个人可以帮助我！

**编辑：这是LogCat：**

```
12-15 02:34:14.507: W/dalvikvm(10789): threadid=1: thread exiting with uncaught exception (group=0x40e34300)
12-15 02:34:14.511: E/AndroidRuntime(10789): FATAL EXCEPTION: main
12-15 02:34:14.511: E/AndroidRuntime(10789): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.alexnavratil.test/com.alexnavratil.test.MainActivity}: java.lang.SecurityException: Requesting code from app.test.com (with uid 10075) to be run in process com.alexnavratil.test (with uid 10104) 
```

我希望这已经足够了。完整的 LogCat 很长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T01:20:32.197

通常其他应用程序数据目录受 android 操作系统保护。如果允许无根的 android 应用程序读取其他应用程序应用程序缓存，我不放心。

要清除应用程序缓存，有清单权限[CLEAR_APP_CACHE](http://developer.android.com/reference/android/Manifest.permission.html#CLEAR_APP_CACHE)和[DELETE_CACHE_FILES](http://developer.android.com/reference/android/Manifest.permission.html#DELETE_CACHE_FILES)

# asp.net - 服务器返回有效的 json 和 200 但正在抛出错误函数

> ID：13888401
> 
> 赞同：1
> 
> 时间：2012-12-15T01:15:31.287
> 
> 标签：asp.net, ajax

好的，所以由于某种原因，即使服务器返回 200 和有效的 json，我的 ajax 调用仍然失败。这是ajax调用：

```
 $.ajax(
        {
            cache: false,
            type: "GET",
            url: "http://localhost:10590/api/entry",
            dataType: "application/json; charset=utf-8",
            success: function (result) {
                alert('HIT');
            },
            error: function (request, type, errorThrown) {
                alert('Fail' + type + ':' + errorThrown);
            }
        }); 
```

错误函数显示空白。类型说“错误”，但之后什么都没有。我试图弄清楚为什么会发生这种情况？？？

通过 fiddler 验证，这是从服务器返回的 json 字符串：

```
{
  "EntryId":0,
  "EntryDate":"2012-12-14T18:10:48.2275967-07:00",
  "BodyWeight":207.00,
  "Bmi":0.0,
  "Fat":0.0,
  "Visceral":0.0,
  "MuscleMass":0.0
} 
```

[http://jsonlint.com/](http://jsonlint.com/)同意这是有效的 json。

**更新**：在 ajax 调用之前添加以下内容使其可以在 IE 中工作，但不能在 chrome 中工作：

```
$.support.cors = true; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T01:30:10.050

当我从文件系统上的 html 页面测试对 Web 服务器的 ajax 调用时，我遇到了类似的问题。我想这算作“跨域”ajax。我有完全相同的症状。Wireshark 显示来自 Web 服务器的非常好的响应，但我收到了一个没有数据的错误事件。

一旦我将 HTML 文件移动到 Web 服务器 - 这样我的页面（ajax 客户端）和 ajax Web 服务就在同一个域中，它就开始工作了。

但是，如果提交 ajax 的网页是从那里提供的，`http://localhost:10590/`那么这不适用，并且您遇到了不同的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:53:39.357

我最终使用的解决方案是从服务器请求“jsonp”。为了让我的服务器返回 jsonp，我必须创建一个自定义格式化程序。我很难找到它的格式化程序，因为每篇文章都提到了 Thinktecture，它不会为我编译。所以这就是我最终的结果：

```
using System;
using System.IO;
using System.Net;
using System.Net.Http.Formatting;
using System.Net.Http.Headers;
using System.Threading.Tasks;
using System.Web;
using System.Net.Http;
using Newtonsoft.Json.Converters;

namespace MyDomain.Common.Web.CustomFormatters
{

    /// <summary>
    /// Handles JsonP requests when requests are fired with text/javascript
    /// </summary>
    public class JsonpFormatter : JsonMediaTypeFormatter
    {

        public JsonpFormatter()
        {
            SupportedMediaTypes.Add(new MediaTypeHeaderValue("application/json"));
            SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/javascript"));

            JsonpParameterName = "callback";
        }

        /// <summary>
        ///  Name of the query string parameter to look for
        ///  the jsonp function name
        /// </summary>
        public string JsonpParameterName { get; set; }

        /// <summary>
        /// Captured name of the Jsonp function that the JSON call
        /// is wrapped in. Set in GetPerRequestFormatter Instance
        /// </summary>
        private string JsonpCallbackFunction;

        public override bool CanWriteType(Type type)
        {
            return true;
        }

        /// <summary>
        /// Override this method to capture the Request object
        /// </summary>
        /// <param name="type"></param>
        /// <param name="request"></param>
        /// <param name="mediaType"></param>
        /// <returns></returns>
        public override MediaTypeFormatter GetPerRequestFormatterInstance(Type type, System.Net.Http.HttpRequestMessage request, MediaTypeHeaderValue mediaType)
        {
            var formatter = new JsonpFormatter()
            {
                JsonpCallbackFunction = GetJsonCallbackFunction(request)
            };

            // this doesn't work unfortunately
            //formatter.SerializerSettings = GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings;

            // You have to reapply any JSON.NET default serializer Customizations here    
            formatter.SerializerSettings.Converters.Add(new StringEnumConverter());
            formatter.SerializerSettings.Formatting = Newtonsoft.Json.Formatting.Indented;

            return formatter;
        }

        public override Task WriteToStreamAsync(Type type, object value,
                                        Stream stream,
                                        HttpContent content,
                                        TransportContext transportContext)
        {
            if (string.IsNullOrEmpty(JsonpCallbackFunction))
                return base.WriteToStreamAsync(type, value, stream, content, transportContext);

            StreamWriter writer = null;

            // write the pre-amble
            try
            {
                writer = new StreamWriter(stream);
                writer.Write(JsonpCallbackFunction + "(");
                writer.Flush();
            }
            catch (Exception ex)
            {
                try
                {
                    if (writer != null)
                        writer.Dispose();
                }
                catch { }

                var tcs = new TaskCompletionSource<object>();
                tcs.SetException(ex);
                return tcs.Task;
            }

            return base.WriteToStreamAsync(type, value, stream, content, transportContext)
                       .ContinueWith(innerTask =>
                       {
                           if (innerTask.Status == TaskStatus.RanToCompletion)
                           {
                               writer.Write(")");
                               writer.Flush();
                           }

                       }, TaskContinuationOptions.ExecuteSynchronously)
                        .ContinueWith(innerTask =>
                        {
                            writer.Dispose();
                            return innerTask;

                        }, TaskContinuationOptions.ExecuteSynchronously)
                        .Unwrap();
        }

        /// <summary>
        /// Retrieves the Jsonp Callback function
        /// from the query string
        /// </summary>
        /// <returns></returns>
        private string GetJsonCallbackFunction(HttpRequestMessage request)
        {
            if (request.Method != HttpMethod.Get)
                return null;

            var query = HttpUtility.ParseQueryString(request.RequestUri.Query);
            var queryVal = query[this.JsonpParameterName];

            if (string.IsNullOrEmpty(queryVal))
                return null;

            return queryVal;
        }
    }
} 
```

# php - Symfony2，生产中的空 GET 变量

> ID：13888403
> 
> 赞同：0
> 
> 时间：2012-12-15T01:15:48.187
> 
> 标签：php, symfony

我需要在此 url 中获取“名称”GET var：

```
www.mydomain.com/?n=me 
```

这就是我得到它的方式：

```
$request = Request::createFromGlobals();
$name = $request->query->get('n'); 
```

它适用于我的本地主机服务器，但在生产服务器上 $name var 为空。什么可能导致这种情况？

**编辑：**

我再次查看了我的代码，发现在使用 mysql_real_escape_string() 函数的过程中的某个地方。实际上，这是完成的：

```
$request = Request::createFromGlobals();
$name = $request->query->get('n');
$safeName = mysql_real_escape_string($name); 
```

这导致 $safeName 为 null 并且 $name 持有正确的值。所以真正的问题是为什么 mysql_real_escape_string() 正在删除该值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T01:22:51.367

请改用以下代码：

```
$request = $this->getRequest();
$name = $request->query->get('n'); 
```

[http://symfony.com/doc/current/book/controller.html#the-request-object](http://symfony.com/doc/current/book/controller.html#the-request-object)

# nunit - RhinoMock.BackToRecord 似乎不适用于异常

> ID：13888404
> 
> 赞同：2
> 
> 时间：2012-12-15T01:16:14.027
> 
> 标签：nunit, rhino-mocks

我已成功使用以下方法来重置测试之间的期望：

```
MyMock.BackToRecord(BackToRecordOptions.Expectations);
MyMock.Replay(); 
```

但是，在第二个测试尝试在模拟方法上抛出异常的情况下，这似乎不起作用：

```
[SetUp]    
public void Setup()
{
        //reset expectations for each test
        MockRestQuestionClient.BackToRecord(BackToRecordOptions.Expectations);
        MockRestQuestionClient.Replay();
}

[Test]
public void Test1() {
    MyMock.Expect(t => t.Something()).Returns(someObject);
}

[Test]
public void Test2() {
    //this works when run individually, but fails if run after Test1
    MyMock.Expect(t => t.Something()).Throw(new Exception());
} 
```

任何想法我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T19:30:46.957

似乎您对不同的测试用例使用相同的模拟。
你有什么特别的理由在测试之间分享模拟吗？

我认为如果您为每个测试实例化新的模拟对象（在`Setup()`method.

**更新请在**[此处](https://stackoverflow.com/questions/13856246/how-to-pass-values-across-test-cases-in-nunit-2-6-2/13857538#13857538)
阅读关于在测试之间共享数据的好评论。

**UPDATE2**
如果您使用基类来设置模拟，那么我建议在基类中有特定的方法来设置（例如`Init()`）。这个方法应该用属性标记`[SetUp]`。
结果`Init()`将在每次测试之前运行。每次测试都将使用新鲜的模拟。所以你不需要重置现有的模拟。

# jquery - jScrollPane 停止工作，我不明白为什么

> ID：13888406
> 
> 赞同：0
> 
> 时间：2012-12-15T01:16:19.710
> 
> 标签：jquery, jscrollpane, jquery-jscrollpane

在此页面上： [http](http://ally.alchemycs.com) ://ally.alchemycs.com 在页面中间有一个标有“屏幕”的框，带有滚动条。前段时间，我设置了 jScrollPane，使其具有与设计相匹配的漂亮滚动条。jScrollPane 神秘地停止了工作，而对于我的生活，我不明白为什么。有 jQuery，有 jScrollPane CSS 和 JS，我在 FireBug 中看不到任何错误消息。真正令人恼火的是，这在不久前还有效，我认为没有任何改变应该干扰它。

其他人可以看到为什么 jScrollPane 不能在这里工作吗？

# ruby-on-rails - 在 Rails 中，哪里是放置需要“随处”可用的方法的正确位置

> ID：13888409
> 
> 赞同：3
> 
> 时间：2012-12-15T01:16:44.340
> 
> 标签：ruby-on-rails, helper

我有很多小实用方法（例如用于重新格式化或解析字符串等简单对象）我一直在 ApplicationHelper 中。

但是，模型中的类方法显然不能访​​问 ApplicationHelper 方法。

有一个解决方法，就是在我的项目中洒水：

```
include ApplicationHelper # needed to use apphelper method in instance method
extend ApplicationHelper # needed to use apphelper method in class method 
```

它似乎工作。但这似乎是一个杂牌。

有没有更好的地方放置实用程序方法，以便可以从我的项目中的任何地方访问它们 - 视图、控制器方法、模型实例方法、模型类方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T01:23:45.073

这是`lib/`为了什么。我有一个`lib/deefour.rb`文件

```
require "deefour/core_ext"

module Deefour; end 
```

我将自定义方法放入`lib/deefour/helpers.rb`

```
module Deefour
  module Helpers
    extend self

    def some_method
      # ...
    end
  end
end 
```

和核心猴子补丁`lib/deefour/core_ext.rb`

```
class String
  def my_custom_string_method(str)
    # ...
  end
end 
```

在`config/initializers/deefour.rb`我放

```
require "deefour" 
```

在你`config/application.rb`确保你有

```
config.autoload_paths += Dir["#{config.root}/lib"] 
```

最后，在`ApplicationController` *(for controllers)*、`ApplicationHelper` *(for views)*以及我需要它的任何其他地方*（即这里和那里的特定模型）*我只是做

```
include ::Deefour::Helpers 
```

# c++ - 我不明白析构函数有什么问题？

> ID：13888414
> 
> 赞同：0
> 
> 时间：2012-12-15T01:17:42.347
> 
> 标签：c++, constructor, virtual-destructor

我有一个名为多边形的类，它是我的基类，其中我有面积和周长，我需要从中派生一个矩形类。现在下面的程序不起作用，它给了我以下错误：

```
GS_Inheritance_Program.obj : error LNK2019: unresolved external symbol "public: virtual
 __thiscall rectangle::~rectangle(void)" (??1rectangle@@UAE@XZ) referenced in function 
"public: virtual void * __thiscall rectangle::`scalar deleting destructor'(unsigned int)" 
(??_Grectangle@@UAEPAXI@Z) 
```

* * *

这是由于我添加到程序中的析构函数，但是当我删除它们时，它都可以工作。我做了一些研究，发现这可能是由于我没有正确编译程序 .cpp 文件。那是我的问题吗？如果没有，我的问题是什么？

```
#include <iostream>
using namespace std;

class polygon
{
protected:
    double area;
    double perimeter;

public:
    polygon(){}
    ~polygon();
    double printperimeter();
    double printarea();
};

double polygon::printperimeter()
{
    return perimeter;
}

double polygon::printarea()
{
    return area;
}

class rectangle:public polygon
{
protected:
    double length;
    double width;
public:
    rectangle(double = 1.0, double = 1.0);
    ~rectangle();
    double calcarea();
    double calcperimeter();
};

rectangle::rectangle(double l, double w)
{
    length = l;
    width = w;
}

double rectangle::calcarea()
{
    area = length*width;
    return printarea();
}

double rectangle::calcperimeter()
{
    perimeter = 2*(length+width);
    return printperimeter();
}

void main()
{
    rectangle rect_1 (9.0, 5.0);

    cout<<"The Area of Rect_1 is " <<rect_1.calcarea() <<endl;

    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T02:15:23.973

您在类中声明了析构函数。但是您从未定义它们。为什么你要声明函数然后又不能定义它们？你声明了`polygon::~polygon()`和`rectangle::~rectangle()`。两者都没有定义。

你基本上是在对编译器撒谎。你通过声明一个函数来做出一个承诺，然后你因为没有定义它而破坏了这个承诺。因此错误。

PS 那是`int main()`，不是`void main()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T01:28:01.933

你没有添加析构函数。您说您添加了它们，但实际上并没有添加它们。所以链接器正在寻找它们而不是找到它们。

你可以改变：

```
 ~rectangle(); 
```

至

```
 ~rectangle() { ; } 
```

# websocket - 如何让 square Cube collector.js 使用 wss 服务器？

> ID：13888415
> 
> 赞同：1
> 
> 时间：2012-12-15T01:17:47.047
> 
> 标签：websocket, socket.io

有人使用 Square [Cube](http://square.github.com/cube)进行分析吗？想看看是否有人成功地使其 websockets 与 https 一起工作（即作为 wss 服务器）。似乎底层的 websocket-server 库已被 socket.io 所取代，但想知道是否有人将其合并或找到了 SSL 连接的代理方法。

谢谢。

# php - 在 php 中使用“WHERE”和“AND”

> ID：13888416
> 
> 赞同：-3
> 
> 时间：2012-12-15T01:18:17.033
> 
> 标签：php, where

任何人都知道为什么这不起作用：

```
$no = $_GET['no'];
$findinterval = mysql_query("SELECT * FROM intervals ORDER BY id DESC LIMIT 1");
$result = mysql_fetch_array($findinterval);
$id = $result['id'];
$ip = $_SERVER['REMOTE_ADDR'];

$create_log = mysql_query("INSERT INTO visitors VALUES ('','$ip','$date','$no','$id')"); 
```

以上在插入时工作正常。

```
$uniquecheck = mysql_query("SELECT * FROM visitors WHERE no = '$no' AND interval = '$id' AND ip = '$ip'");` 
```

`var_dump`正在给`bool(false)`。

正如公认的答案所证实的那样，这个问题一点也不含糊。尽管如此，它是-4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T01:34:21.110

`interval`是mysql中的保留字，所以需要用反引号表示：

```
SELECT * FROM visitors WHERE no = '$no' AND `interval` = '$id' AND ip = '$ip' 
```

除此之外，这些`mysql_*`功能已被弃用，您应该移至 PDO / mysqli 和准备好的语句以关闭您现在拥有的 sql 注入孔。

# android - 使用 android 片段或调用活动？

> ID：13888417
> 
> 赞同：1
> 
> 时间：2012-12-15T01:18:29.013
> 
> 标签：android, android-sliding

在android中使用SlidingMenu库[https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)时使用片段作为侧视图更好吗？或者当视图被滑动时调用一个活动会起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T01:28:26.323

侧视图不一定会填满整个屏幕，并且不可能一次显示多个活动。所以我推荐使用片段。

# node.js - ExpressJs 会话在 IE / 服务器上不起作用

> ID：13888420
> 
> 赞同：3
> 
> 时间：2012-12-15T01:19:35.627
> 
> 标签：node.js, session, session-cookies, express

IE 资源管理器无法识别服务器上的 cookie/会话（代码在 localhost 上工作）

会话设置：

```
app.configure(function () {
    app.use(express.cookieParser());

    app.use(express.session({
        secret: 'secret',
        fingerprint: function(){ return ''; }
    }));

    app.use(app.router);

}); 
```

测试会话：

```
app.get('/session_get', function(req,res){    
    console.log (req.session);
    res.render("session",{
        user : req.session.user_name,
        userId : req.session.user_id,
        dt: req.session.dt
    });
}); 
app.get('/session_set', function(req,res){
    req.session.user_id = 1;
    req.session.user_name = "RG";
    req.session.admin = 1;
    req.session.dt = new Date();
    res.end();

}); 
```

浏览到 /session_get 设置会话，/session_get 显示会话变量。

它在 localhost 上运行良好，但在几个远程服务器（nodejitsu / appfog）上，/session_get 始终响应为空。在渲染（玉）以及使用 console.log

我尝试了几个建议，包括一个关于在 IE (TJ Holowaychuk) 上修改指纹和 cookie 的建议，但没有。

使用“快递”：“~3.0.4”

# java - 如何在应用程序的体系结构和类方面正确组织两个枚举的结构，它们之间存在多对多关系？

> ID：13888434
> 
> 赞同：7
> 
> 时间：2012-12-15T01:22:53.787
> 
> 标签：java, oop, architecture, enums, entity-relationship

我有枚举`CarBrand`：

```
public enum CarBrand {
    BMW, MERCEDES, VOLKSWAGEN, AUDI, FORD, OPEL
} 
```

和枚举`CarBodyType`：

```
public enum CarBodyType {
    SEDAN, MINIVAN, VAN
} 
```

他们之间的关系是**多对多的**。即一个汽车品牌可以有多个车身类型的变体，而一个车身类型有多个品牌。

如何用这些枚举在我的代码中定义这样的实体关系模型？

也许我需要将每个枚举中的字段作为另一个枚举参数化的集合？

```
public enum CarBrand {
    BMW, MERCEDES, VOLKSWAGEN, AUDI, FORD, OPEL;

    private Set<CarBodyType> bodyTypes;         

    public Set<CarBodyType> getBodyTypes() {
       return bodyTypes;
    }

    public void setBodyTypes(Set<CarBodyType> bodyTypes) {
       this.bodyTypes = bodyTypes;
    }
} 
```

和

```
public enum CarBodyType {
    SEDAN, MINIVAN, VAN;

    private Set<CarBrand> brands;

    // getter and setter
} 
```

这是一个好的解决方案吗？或者通过第三个联结实体来实现这种关系会更好吗？如果是这样，它应该是什么？这个实体应该如何设计，它应该包含哪些字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T01:28:50.750

几乎可以肯定，体型“拥有”品牌是不正确的。一个品牌“有一个”体型很可能是不正确的。您最可能想要建模的是每个品牌允许的身体类型的一组单独的交集。

那就是你最有可能想要一个`Vehicle`有体型和品牌的：

```
public class Vehicle 
{
    private CarBrand brand;
    private CarBodyType body;
    ...
} 
```

并创建车辆，每个车辆都对一个组合进行建模。

回应评论

> 例如[这个案子](http://en.wikipedia.org/wiki/Many-to-many_%28data_model%29)呢？如果 Book 和 Author 是枚举。

我认为这本书/作者的示例不适用于枚举（也许您对枚举的使用是问题的核心）。书籍和作者的数量不限；您不会使用封闭集枚举对书籍或作者进行建模。此外，确实每本书都有一个或多个作者，而每个作者都只是写过一本书或多本书的作者（否则他们只是一个渴望成为作家的人）。

在书籍和作者的关系建模中，您将有一个`Book`表、一个`Author`表和一个单独的关系表，其中和表`BookAuthor`的外键结合在一起。在对象术语中，将单词“table”更改为“object”，但在对象模型中，您可能会将“table”替换为每本书中的一组作者和/或每个作者的一组书籍。`Book``Author``BookAuthor`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T01:35:25.763

像这样具有循环依赖关系并不是一个好习惯。

如果您需要保持这种关系，请将其保存在单独的类中，以避免循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T16:57:11.817

那么你的`CarBrand`类似乎是一个比 Enum 更复杂的结构。它仍然可以是一个带有某种身份映射的值类型：

```
class CarBrand {

    static Set<CarBrand> AllBrands;  //replacement for CarBrand enum
    static Set<CarBodyType> GetTypes(CarBrand brand) { /* search this.AllBrands here */} 
    static Set<CarBrand> GetBrands(CarBodyType type) { /* search this.AllBrands here */} 

    /*specify types per brand */
    Set<CarBodyType> bodyTypes;
} 
```

如果您更喜欢继续使用 CarBrand 枚举，这也可以作为显式的第三关系结构来完成。引入关联类：

```
class CarBrandTypePair {
    CarBrand, CarBodyType,
} 
```

其余的应该作为`CarBrand`上面示例的静态部分。

第一种方式可能更具可扩展性：您将来会添加一些其他品牌的特定内容。使用第二种方法，您将添加越来越多的简单关联。

# eclipselink - 在 persistence.xml 中使用数据源运行独立 JPA

> ID：13888443
> 
> 赞同：1
> 
> 时间：2012-12-15T01:24:43.827
> 
> 标签：eclipselink

```
Below is my perisistence.xml, having the datasource.

<persistence-unit name="employee" transaction-type="RESOURCE_LOCAL">
    <non-jta-data-source>jdbc/MyDS</non-jta-data-source>
</persistence-unit> 
```

我正在尝试独立创建EntityManager，但无法执行示例查询，请帮助我。

```
public static void main(String[] args) {

Map<String, String> properties = new HashMap<String, String>();

        // Ensure RESOURCE_LOCAL transactions is used.
        properties.put("javax.persistence.transactionType",
            PersistenceUnitTransactionType.RESOURCE_LOCAL.name());

        // Configure the internal EclipseLink connection pool
        properties.put("javax.persistence.jdbc.driver" , "oracle.jdbc.OracleDriver");
        properties.put("javax.persistence.jdbc.url", "jdbc:oracle:thin:@localhost:1521:ORCL");
        properties.put("javax.persistence.jdbc.user", "scott");
        properties.put("javax.persistence.jdbc.password", "tiger");

        // Ensure that no server-platform is configured
        properties.put("eclipselink.target-server", TargetServer.None);

        entityManagerFactory = Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME,properties);
        entityManager = entityManagerFactory.createEntityManager();                 
        Query query = entityManager.createQuery(" select d from  XyzEntity d");
        List<XyzEntity> xyzEntityList = query.getResultList();
        System.out.println("size is"+xyzEntityList.size());
    } 
```

上面的代码仍在寻找数据源。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:40:23.707

删除<non-jta-data-source>标签，删除你放在类中的属性，添加到persistence.xml文件中，像这样：

```
<properties>
  <property name="javax.persistence.jdbc.driver" value="the.driver"/>
  <property name="javax.persistence.jdbc.url" value="the url"/>
  <property name="javax.persistence.jdbc.user" value="the user"/>
  <property name="javax.persistence.jdbc.password" value="the pass"/>
</properties> 
```

您还需要在 <persistence-unit> 标记下方添加持久性提供程序：

```
<provider>bla.bla.bla.bla.BlaProvider</provider> 
```

希望这可以帮助。

# c# - 在 catch 子句中禁止等待。在附近寻找工作

> ID：13888448
> 
> 赞同：9
> 
> 时间：2012-12-15T01:26:14.413
> 
> 标签：c#, exception-handling, async-await, c#-5.0

我知道 await 不能在 catch 子句中使用。但是我还没有真正遇到过与此相关的问题，直到现在......

基本上我有一个层负责接收传入的请求，处理它们，从它们构建消息并将消息传递给另一个负责发送消息的层。

如果在消息发送过程中出现问题，则会抛出自定义异常，并被消息发送层捕获。此时，该消息的失败记录应插入 DB（需要一些时间，因此异步），并将异常传播到负责向发出请求的客户端发送错误响应的上层.

下面是一些非常简化的代码，用于说明目的：

```
public async Task ProcessRequestAsync(Request req)
{
    int statusCode = 0;

    try
    {       
       await SendMessageAsync(new Message(req));        
    }
    catch(MyCustomException ex)
    {
       statusCode = ex.ErrorCode;
    }

    await SendReponseToClientAsync(req, statusCode);
}

public async Task SendMessageAsync(Message msg)
{
    try
    {           
       // Some async operations done here
    }
    catch (MyCustomException ex)
    {       
        await InsertFailureForMessageInDbAsync(msg, ex.ErrorCode); // CAN'T DO THAT
        throw;
    }
} 
```

当然，请求处理层对DB一无所知，它只是负责构建消息，将消息传递给消息处理层，并向客户端发送响应（肯定或否定）。

所以我认为这是有道理的......如果发生异常，我的“业务”层希望在数据库中插入失败记录并重新抛出异常，以便“请求”处理层可以做必要的事情（在这种情况下，发送一个对客户的否定响应）。

不应该以这种方式使用异常吗？这对我来说似乎很干净，但我不能在 catch 子句中执行此操作这一事实让我认为设计中可能存在代码异味（即使我想在一层中处理异常然后将其重新抛出）上层做一些不同的处理，在我看来，这正是例外的原因）。

有什么想法吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T03:55:32.223

我也遇到过几次。

正如拉斐尔评论的那样，您可以忽略以下结果`InsertFailureForMessageInDbAsync`：

```
public async Task SendMessageAsync(Message msg)
{
  try
  {           
    // Some async operations done here
  }
  catch (MyCustomException ex)
  {       
    var _ = InsertFailureForMessageInDbAsync(msg, ex.ErrorCode);
    throw;
  }
} 
```

请注意，`InsertFailureForMessageInDbAsync`默认情况下将忽略来自的任何异常。

您的另一个选择更复杂：

```
public async Task DoSendMessageAsync(Message msg)
{
  // Some async operations done here
}

public async Task SendMessageAsync(Message msg)
{
  var task = DoSendMessageAsync(msg);
  MyCustomException exception = null;
  try
  {
    await task;
    return;
  }
  catch (MyCustomException ex)
  {
    exception = ex;
  }

  await Task.WhenAll(task, InsertFailureForMessageInDbAsync(msg, exception.ErrorCode));
} 
```

这将异步处理异常并返回`Task`具有真实值的 a （如果确实抛出一个`AggregateExption`异常，则包含两个异常）。`InsertFailureForMessageInDbAsync`

不幸的是，`await`将忽略第二个异常。如果您真的希望传递所有异常，可以将最后一行 ( `await Task.WhenAll...`) 替换为以下内容：

```
Exception exception2 = null;
try
{
  await InsertFailureForMessageInDbAsync(msg, exception.ErrorCode);
}
catch (Exception ex)
{
  exception2 = ex;
}

if (exception2 == null)
  throw new AggregateException(exception);
else
  throw new AggregateException(exception, exception2); 
```

但这非常复杂，而且不完全是您想要重复的那种模式。如果可能的话，我会按照 Rafael 的建议忽略日志记录结果。

# eclipse-plugin - 如何找出是否在 ASTRewrite 中记录了任何更改

> ID：13888452
> 
> 赞同：1
> 
> 时间：2012-12-15T01:27:43.670
> 
> 标签：eclipse-plugin, eclipse-jdt

假设我有一个无法假设的 ASTRewrite 实例（即由可覆盖的方法返回）。我想测试重写是否实际上存储了对编译单元的任何修改，否则它仅仅是“身份”更改。怎么可能做到这一点？

我查看了[ASTRewrite](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/dom/rewrite/ASTRewrite.html)的方法，但找不到任何有用的方法。所以我想正确的方法并不简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T05:24:14.450

***您可以使用TextEdit***确定应用于 AST 的编辑。

```
 TextEdit edits = rewrite.rewriteAST(document, compUnit.getJavaProject().getOptions(true)); 
```

如果未对 AST 进行任何更改，则编辑将为空。否则它将包含对带有偏移量的 AST 的添加和删除。

您可以使用该`getLength()`方法检查 TextEdit 是否为空。

```
// If edits available, write them to the file.
if (edits.getLength() != 0) {
     // do something
} 
```

更多帮助可以从以下链接中找到：

[http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.jdt.doc.isv%2Fguide%2Fjdt_api_manip.htm](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.jdt.doc.isv%2Fguide%2Fjdt_api_manip.htm)

# c++ - 标准::线程 错误

> ID：13888453
> 
> 赞同：21
> 
> 时间：2012-12-15T01:27:50.083
> 
> 标签：c++, multithreading, c++11, std, stdthread

我试图从我的类中生成一个线程，并且该线程在我的类中执行一个特定的方法。代码如下所示：

```
class ThreadClass{
    int myThread(int arg){
     // do something
    }

    void createThread(){
        thread t = thread(myThread,10);
    }

} ; 
```

此编译代码引发错误说

```
std::thread::thread(_Callable&&, _Args&& ...) [with _Callable = int (ThreadClass::*)(int), _Args = {int}]
no known conversion for argument 1 from ‘&lt;unresolved overloaded function type>’ to ‘int (ThreadClass::*&&)(int)’ 
```

我不确定这里的实际错误是什么。有人可以帮我弄这个吗？

谢谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-15T01:31:24.273

问题是没有对象就不能调用成员函数。提供一个指向`this`以便使用当前对象的指针：

```
thread t(&ThreadClass::myThread, this, 10); 
```

您可以使用任何`ThreadClass`对象的实例，但在您的情况下，这似乎`this`是正确的做法。

注意：请记住，您需要对创建的线程的引用，以便`join()`稍后进行。

# ruby-on-rails-3 - 你会把 resque worker 和 rails 控制器共享的代码放在哪里？

> ID：13888454
> 
> 赞同：0
> 
> 时间：2012-12-15T01:27:56.993
> 
> 标签：ruby-on-rails-3, resque

我有一个 rails 控制器和一个 resque worker。两者都有几个功能。我应该把这些函数放在哪里，以便我可以遵循 DRY 原则和 Rails 约定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:47:22.277

对我来说，这听起来像是一个服务层的好案例。我的一位同事写了一个很好的概念总结：http: [//blog.carbonfive.com/2012/01/10/does-my-rails-app-need-a-service-layer/](http://blog.carbonfive.com/2012/01/10/does-my-rails-app-need-a-service-layer/)

> 在领域驱动设计中，Evans 将服务定义为作为独立于模型中的接口提供的操作。换句话说，服务是一个动作，而不是一个东西。我们应该将其封装在一个单独的无状态服务中，而不是强制对现有对象进行操作。
> 
> ...
> 
> 域服务编写一个涉及多个域对象的用例。将这种逻辑强制到域对象中是很尴尬的，因为这些用例通常涉及任何单个对象职责之外的规则。

服务层是许多其他 Web 应用程序 MVC 框架中的常见功能，并且当胖模型无法在其问题域中提供适当的职责封装时，许多 Rails 应用程序选择使用该功能。

如果不知道更多，恐怕我无法提供更具体的答案。我的下一步是尝试考虑应该为该服务命名。它是一个制造我们有名字的东西的工厂吗？是否履行了我们可以命名的特定角色？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T02:14:18.143

取决于这些方法的实际作用，但`/lib`可能是一个好地方。

# c# - 监控给定类的属性值变化的快速方法？

> ID：13888465
> 
> 赞同：3
> 
> 时间：2012-12-15T01:29:31.920
> 
> 标签：c#, properties

说，我写了一个类**ClassA**。它运行良好，直到有一天我希望监控属性值的变化并对变化做出反应。最快的方法是什么？

我能想到的一种方法：让**ClassA**继承 INotifyPropertyChanged，并修改属性 getter/setter 以触发 PropertyChanged 事件，并在事件触发时做一些事情。

**但是，如果ClassA**有 10 个要监控的属性，这可能意味着繁琐的代码更改。

有没有更优雅的方式来包装或修改**ClassA**，以便我可以连接一些反应逻辑？

幻想：属性能做到吗？也许完全是胡说八道，我写了一个属性，我只需要将这个属性添加到我希望监控的属性中。它比添加/修改 getter/setter 更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T08:29:59.017

您可能想要研究的是使用 AOP（面向方面​​编程）简而言之，这允许您在类方法和属性周围放置一个包装器，并在调用之前和之后做出反应。

在包装类中，您将拥有类似的东西

```
Invoke(Args[] Args, Aspect Aspect)
{
  //Do something like monitor something here 
  Aspect.Invoke //execution of method or property
 //Do other stuff here... maybe more monitoring
} 
```

这样做的美妙之处在于关注点分离。在您的 ClassA 中，您的代码可以继续关注之前关注的任何内容，而无需担心监控代码。包装器是处理监控的东西。

参考资料：

有关 AOP 的更多信息 [http://en.wikipedia.org/wiki/Aspect-oriented_programming](http://en.wikipedia.org/wiki/Aspect-oriented_programming)

可用于在应用程序中实现 AOP 的 C# 库。城堡项目/动态代理 [http://www.castleproject.org/projects/dynamicproxy](http://www.castleproject.org/projects/dynamicproxy)

# python - 从 MultiIndex 中的索引列获取唯一值

> ID：13888468
> 
> 赞同：50
> 
> 时间：2012-12-15T01:29:46.523
> 
> 标签：python, pandas

我知道我可以`DataFrame`通过重置索引来获取 a 的唯一值，但是有没有办法避免这一步并直接获取唯一值？

鉴于我有：

```
 C
 A B     
 0 one  3
 1 one  2
 2 two  1 
```

我可以：

```
df = df.reset_index()
uniq_b = df.B.unique()
df = df.set_index(['A','B']) 
```

有没有内置熊猫的方法来做到这一点？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-15T01:46:22.580

一种方法是使用[`index.levels`](http://pandas.pydata.org/pandas-docs/dev/indexing.html#some-gory-internal-details)：

```
In [11]: df
Out[11]: 
       C
A B     
0 one  3
1 one  2
2 two  1

In [12]: df.index.levels[1]
Out[12]: Index([one, two], dtype=object) 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2014-06-30T11:38:56.107

Andy Hayden 的答案 ( `index.levels[blah]`) 在某些情况下非常有用，但在其他情况下可能会导致奇怪的行为。我的理解是，Pandas 会尽可能地“重用”索引，以避免大量索引相似的 DataFrame 的索引占用内存空间。结果，[我发现了以下烦人的行为](https://stackoverflow.com/questions/24434724/dataframe-index-levels-shows-extra-values-after-paring-down-dataframe/)：

```
import pandas as pd
import numpy as np

np.random.seed(0)

idx = pd.MultiIndex.from_product([['John', 'Josh', 'Alex'], list('abcde')], 
                                 names=['Person', 'Letter'])
large = pd.DataFrame(data=np.random.randn(15, 2), 
                     index=idx, 
                     columns=['one', 'two'])
small = large.loc[['Jo'==d[0:2] for d in large.index.get_level_values('Person')]]

print small.index.levels[0]
print large.index.levels[0] 
```

哪个输出

```
Index([u'Alex', u'John', u'Josh'], dtype='object')
Index([u'Alex', u'John', u'Josh'], dtype='object') 
```

而不是预期的

```
Index([u'John', u'Josh'], dtype='object')
Index([u'Alex', u'John', u'Josh'], dtype='object') 
```

正如一个人在另一线程上指出的那样，一个看起来很自然且工作正常的成语是：

```
small.index.get_level_values('Person').unique()
large.index.get_level_values('Person').unique() 
```

我希望这可以帮助其他人避开我遇到的超级意外行为。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-01-20T05:54:47.327

另一种方法是使用`unique()`索引功能

```
df.index.unique('B') 
```

与`levels`此功能不同的是记录在案。

# java - 使用 JAVA 对字符串数组进行笛卡尔积

> ID：13888473
> 
> 赞同：0
> 
> 时间：2012-12-15T01:31:16.637
> 
> 标签：java

我不确定问题的标题，请随时编辑！

无论如何，这是问题描述：

我有一个数据结构，用于保存两对之间的关​​系信息：

```
Class Relation
{
    Public String Source;
    Public String Destination;
    Public String Relate;
} 
```

在我的程序中，我有以下初始化来编码两组实体之间的不同关系：

```
String []Subjects = new String [10]; // Consider having S1, S2, S3
String []Objects = new String [10]; // Consider having O1, O2
Relation []AllRelations = new Relation[100];
//Consider having the following rerlations in AllRelations array:
/*
S1 Read O1
S1 Write O1
O1 Delete S2
O1 Add S2
S2 Update S3
S3 Execute O3
*/ 
```

我需要遍历 AllRelations 数组，以找到所有可能的关系。输出应该是一个字符串数组，其中每个字符串包含两个给定实体之间的可能关系。输出数组中不需要有 Source 和 Destination。

在给出的示例中，输出应类似于：

```
Read-Delete-Update-Execute

Read-Add-Update-Execute

Write-Delete-Update-Execute

Write-Add-Update-Execute 
```

我试图用迭代方法“循环”来解决这个问题，但我失败了。另外，我正在尝试考虑递归，但我不知道如何开始。

欢迎任何建议！

# mysql - 时间戳..只需要第一个和最后一个

> ID：13888476
> 
> 赞同：1
> 
> 时间：2012-12-15T01:31:33.733
> 
> 标签：mysql

我有一个查询返回估计的日期和时间戳。每个估计可以有多个时间戳。我只需要第一个和最后一个印章。我怎样才能做到这一点？我的查询如下所示：

```
SELECT LogDateTime, Operator, Program, Explanation, TransactionCode
FROM SystemLog
WHERE Program = 'Estimating'
ORDER BY TransactionCode 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T01:42:42.200

使用`min()`和`max()`聚合函数：

```
SELECT
    min(LogDateTime) as first_LogDateTime,
    max(LogDateTime) as last_LogDateTime,
    Operator, Program, Explanation, TransactionCode
FROM SystemLog
WHERE Program = 'Estimating'
GROUP BY Operator, Program, Explanation, TransactionCode
ORDER BY TransactionCode 
```

# java - 替代已弃用的 java date.sethours

> ID：13888477
> 
> 赞同：2
> 
> 时间：2012-12-15T01:31:40.567
> 
> 标签：java, gwt, date, datepicker

我正在使用 2 个 GWT 日期选择器和一个 JAVA 日期对象。我想检查当前日期（来自 now() 函数）是否在日期选择器中选择的日期之间。我有两个问题：

1.  如何确保在第二个日期选择器中选择的日期至少与在第一个日期选择器中选择的日期相同或更晚？

2.  我想在两个日期选择器中设置相同的日期并对照它检查我的当前日期。我试图通过将第二个日期的时间设置为晚上 11:59:59 来做到这一点，但它说 Date.setHours 和 setMinutes 方法已被弃用。

有任何想法吗？感谢任何帮助。

ps 请不要告诉我使用日历或任何其他日期功能。我的限制是我需要使用 java.util.Date。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T22:09:51.123

尽管您的 IDE 对此有什么看法，但使用旧`java.util.Date`方法并没有那么糟糕。在常规的 Java 代码中，是的，请改用`Calendar`类，但由于历史原因，请三思而后行，不要使用那些“已弃用”的方法。

曾几何时，Java 是最酷的孩子——很奇怪，对吧？Web 浏览器没有这样的语言，有人说：“嘿，让我们给他们一种脚本语言，但是叫它什么，我不知道，很酷！” 因此，我们得到了 JavaScript——比 Java 更像是一种类似 Lisp 的语言，但没关系。

借用了一些 API，例如 Date 对象。然后，Java 决定它可以更好地处理日期和时间以及时区，弃用了`setHours`诸如

浏览器虽然有 JavaScript，但正在寻找自己的方式，并继续使用这些方法。有一些 JavaScript 库可以帮助处理日期，但在浏览器运行时中，Date 对象仍然看起来像旧的`java.util.Date`.

So when in GWT, write in Java where you like, but always remember that you are in a web browser - the underlying language just so happens to have native functionality that uses those deprecated methods - and they aren't going anywhere. Likewise, even though `Object.wait()` and `notify()` are legal, you can't use them, nor will your `finalize()` ever be invoked - these are just things you need to keep in mind when using Java to organize and maintain your library or application, and compiling to run in web browsers using JavaScript.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-15T02:18:51.847

要比较日期，只需使用

```
date2.getTime() >= date1.getTime(); 
```

请注意，您不能直接比较日期 - Java 允许这样做，但 JavaScript 存在问题。

要设置相同的日期，请从一个日期选择器中获取日期，然后将其设置为另一个。

另请注意，GWT (com.google.gwt.user.datepicker.client.CalendarUtil) 中有一个 CalendarUtil 类，它的功能有限，但在许多情况下它仍然非常有用。

您可以将不推荐使用的方法与 Date 对象一起使用 - 没有人计划很快将它们删除。我尽量使用毫秒来避免它们，但它更容易，例如，使用不推荐的方法检查一周中的某一天。

# bash - if elif then statment bash 脚本没有按预期工作

> ID：13888478
> 
> 赞同：0
> 
> 时间：2012-12-15T01:32:08.617
> 
> 标签：bash

我对编程很陌生。我正在尝试创建一个将在 3 个服务器上运行的脚本。该脚本应该获取主机名，然后运行相应的命令。我想我应该使用“案例”，尽管我不确定如何。下面是我的代码。

```
#!/bin/bash

#Get hostname
hostname="$HOSTNAME"

PATH_DEV="some_path"
PATH_PREPROD="some_path"
PATH_PROD="some_path"

if [ $hostname == "dev" ];
then 

    find $PATH_DEV -name '*.mysql.gz' -type f -mtime +7 -exec rm -rf '{}' \;

elif [ $hostname == "prod" ];

then 

    find $PATH_PROD -name '*.mysql.gz' -type f -mtime +7 -exec rm -rf '{}' \;

elif [ $hostname == "preprod" ];

then

    find $PATH_PREPROD -name '*.mysql.gz' -type f -mtime +7 -exec rm -rf '{}' \;

else 

echo "Unknown hostname!";

fi 
```

它只会在“dev”上运行。对于其他 2 种情况，它将返回“未知主机名！” 我做错了什么？:(

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T22:22:36.940

好吧，您的主要问题已经在评论中得到了回答。但是正如您提到的，您可能更好地使用`case`，事情是这样的：您的假设是正确的，您绝对应该使用`case`语句而不是`if`--`elif`构造。优点之一是，将主机名与模式匹配还将为您解决完全限定主机名的问题。这是我的解决方案：

```
#!/bin/bash
PATH_DEV="some_path"
PATH_PREPROD="some_path"
PATH_PROD="some_path"

case "$HOSTNAME" in
  dev|dev.*)
    PATH_TO_USE="$PATH_DEV"
    ;;
  prod|prod.*)
    PATH_TO_USE="$PATH_PROD"
    ;;
  preprod|preprod.*)
    PATH_TO_USE="$PATH_PREPROD"
    ;;
  *)
    echo "Unknown hostname: $HOSTNAME"
    exit 1
    ;;
esac
find "$PATH_TO_USE" -name '*.mysql.gz' -type f -mtime +7 -exec rm -rf '{}' \; 
```

case 语句评估 $HOSTNAME 中的值并检查它是“dev”还是以“dev.”开头，如果它是“prod”还是以“prod.”开头，如果它是“devprod”还是以“devprod”开头。” 分别。进行匹配时，变量 PATH_TO_USE 设置为相应 PATH_XXX 变量的值。如果未找到特定匹配，则 match-always-pattern`*)`将匹配并且脚本以错误消息终止（请注意，错误消息包含不匹配的主机名。这有时可以确保很多工作;-)）。

如果一切顺利，最后会执行 find 命令。（另一个注意事项：尽量避免重复。最后执行*一个*find 命令可以让您在一个地方更改其其他参数。）。

# java - 将对象 [] [] 转换为字符串？Java 摇摆

> ID：13888479
> 
> 赞同：1
> 
> 时间：2012-12-15T01:32:10.300
> 
> 标签：java, string, swing, object, jtextarea

我需要转换一个看起来像这样的 Object[][]：

```
Object[][] numbers =
  {"1", "12-22", "12-22"},
  {"2", "12-22", "11-14"},
  {"3", "12-22", "11-14"}; 
```

我试过：

```
m1.textArea.setText((b1.returnNumbers).toString()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T01:35:13.363

您可以使用以下[`deepToString`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#deepToString%28java.lang.Object%5B%5D%29)方法：

```
m1.textArea.setText(Arrays.deepToString(b1.returnNumbers)); 
```

# javascript - Javascript过滤Div中的文本

> ID：13888480
> 
> 赞同：0
> 
> 时间：2012-12-15T01:32:29.827
> 
> 标签：javascript, search, filter

我正在尝试过滤掉戏剧的台词。当您从左侧的选择框中单击一个字符时，它应该只显示它​​们的线条。我无法让它工作，因为 HTML 不会将每个部分分成 div（我无法编辑 HTML 文档，因为它是一个作业）。我想到的第一件事是找到其中包含角色名称的 H3，而其他所有内容都隐藏起来。但是由于其他所有东西都在块引用中，所以感觉就像我需要它匹配的 H3 和下一个 H3（无论它是否匹配）。任何帮助或方向将不胜感激。

为方便起见，我创建了一个[JSFiddle](http://jsfiddle.net/LUjhJ/)，因为这是很多 html 文本。

**HTML**

```
<div id="actList"><table><tr>
   <td>ACT I</td><td>ACT II</td><td>ACT III</td>
   <td>ACT IV</td><td>ACT V</td>
</tr></table></div>

<div id="characterList"></div>

<div id="sceneIntro">
<h2>Lines from Act V, Scene 1</h2>
</div>

<div id="scene">
<h3>PROSPERO</h3>
<blockquote><i>Enter PROSPERO in his magic robes, and ARIEL</i></blockquote>
<blockquote>Now does my project gather to a head:<br />
My charms crack not; my spirits obey; and time<br />
Goes upright with his carriage. How's the day?
</blockquote>

<h3>ARIEL</h3>
<blockquote>On the sixth hour; at which time, my lord,<br />
You said our work should cease.
</blockquote>

<h3>PROSPERO</h3>
<blockquote>I did say so,<br />
When first I raised the tempest. Say, my spirit,<br/>
How fares the king and's followers?
</blockquote>

<h3>ARIEL</h3>
<blockquote>Confined together<br />
In the same fashion as you gave in charge,<br />
Just as you left them; all prisoners, sir,<br />
In the line-grove which weather-fends your cell;<br />
They cannot budge till your release. The king,<br />
His brother and yours, abide all three distracted<br />
And the remainder mourning over them,<br />
Brimful of sorrow and dismay; but chiefly<br />
Him that you term'd, sir, 'The good old lord Gonzalo;<br />
His tears run down his beard, like winter's drops<br />
From eaves of reeds. Your charm so strongly works 'em<br />
That if you now beheld them, your affections<br />
Would become tender.
</blockquote>

<h3>PROSPERO</h3>
<blockquote>Dost thou think so, spirit?
</blockquote>

<h3>ARIEL</h3>
<blockquote>Mine would, sir, were I human.
</blockquote>

<h3>PROSPERO</h3>
<blockquote>And mine shall.<br />
Hast thou, which art but air, a touch, a feeling<br />
Of their afflictions, and shall not myself,<br />
One of their kind, that relish all as sharply,<br />
Passion as they, be kindlier moved than thou art?<br />
Though with their high wrongs I am struck to the quick,<br />
Yet with my nobler reason 'gaitist my fury<br />
Do I take part: the rarer action is<br />
In virtue than in vengeance: they being penitent,<br />
The sole drift of my purpose doth extend<br />
Not a frown further. Go release them, Ariel:<br />
My charms I'll break, their senses I'll restore,<br />
And they shall be themselves.
</blockquote>

<h3>ARIEL</h3>
<blockquote>I'll fetch them, sir.</blockquote>

<blockquote><i>Exit</i></blockquote>

<h3>PROSPERO</h3>
<blockquote>Ye elves of hills, brooks, standing lakes and groves,<br />
And ye that on the sands with printless foot<br />
Do chase the ebbing Neptune and do fly him<br />
When he comes back; you demi-puppets that<br />
By moonshine do the green sour ringlets make,<br />
Whereof the ewe not bites, and you whose pastime<br />
Is to make midnight mushrooms, that rejoice<br />
To hear the solemn curfew; by whose aid,<br />
Weak masters though ye be, I have bedimm'd<br />
The noontide sun, call'd forth the mutinous winds,<br />
And 'twixt the green sea and the azured vault<br />
Set roaring war: to the dread rattling thunder<br />
Have I given fire and rifted Jove's stout oak<br />
With his own bolt; the strong-based promontory<br />
Have I made shake and by the spurs pluck'd up<br />
The pine and cedar: graves at my command<br />
Have waked their sleepers, oped, and let 'em forth<br />
By my so potent art. But this rough magic<br />
I here abjure, and, when I have required<br />
Some heavenly music, which even now I do,<br />
To work mine end upon their senses that<br />
This airy charm is for, I'll break my staff,<br />
Bury it certain fathoms in the earth,<br />
And deeper than did ever plummet sound<br />
I'll drown my book.
</blockquote>

<blockquote><i>Solemn music</i></blockquote>

<blockquote><i>Re-enter ARIEL before: then ALONSO, with a frantic gesture, attended by GONZALO; SEBASTIAN and ANTONIO in like manner, attended by ADRIAN and FRANCISCO they all enter the circle which PROSPERO had made, and there stand charmed; which PROSPERO observes.</i></blockquote>

<h3>PROSPERO</h3>
<blockquote>A solemn air and the best comforter<br />
To an unsettled fancy cure thy brains,<br />
Now useless, boil'd within thy skull! There stand,<br />
For you are spell-stopp'd.<br />
Holy Gonzalo, honourable man,<br />
Mine eyes, even sociable to the show of thine,<br />
Fall fellowly drops. The charm dissolves apace,<br />
And as the morning steals upon the night,<br />
Melting the darkness, so their rising senses<br />
Begin to chase the ignorant fumes that mantle<br />
Their clearer reason. O good Gonzalo,<br />
My true preserver, and a loyal sir<br />
To him you follow'st! I will pay thy graces<br />
Home both in word and deed. Most cruelly<br />
Didst thou, Alonso, use me and my daughter:<br />
Thy brother was a furtherer in the act.<br />
Thou art pinch'd fort now, Sebastian. Flesh and blood,<br />
You, brother mine, that entertain'd ambition,<br />
Expell'd remorse and nature; who, with Sebastian,<br />
Whose inward pinches therefore are most strong,<br />
Would here have kill'd your king; I do forgive thee,<br />
Unnatural though thou art. Their understanding<br />
Begins to swell, and the approaching tide<br />
Will shortly fill the reasonable shore<br />
That now lies foul and muddy. Not one of them<br />
That yet looks on me, or would know me Ariel,<br />
Fetch me the hat and rapier in my cell:<br />
I will discase me, and myself present<br />
As I was sometime Milan: quickly, spirit;<br />
Thou shalt ere long be free.
</blockquote>

<blockquote><i>ARIEL sings and helps to attire him</i></blockquote>

<h3>ARIEL</h3>
<blockquote>Where the bee sucks. there suck I:<br />
In a cowslip's bell I lie;<br />
There I couch when owls do cry.<br />
On the bat's back I do fly<br />
After summer merrily.<br />
Merrily, merrily shall I live now<br />
Under the blossom that hangs on the bough.
</blockquote>

<h3>PROSPERO</h3>
<blockquote>Why, that's my dainty Ariel! I shall miss thee:<br />
But yet thou shalt have freedom: so, so, so.<br />
To the king's ship, invisible as thou art:<br />
There shalt thou find the mariners asleep<br />
Under the hatches; the master and the BOATSWAIN<br />
Being awake, enforce them to this place,<br />
And presently, I prithee.
</blockquote>

<h3>ARIEL</h3>
<blockquote>I drink the air before me, and return<br />
Or ere your pulse twice beat.
</blockquote>

<blockquote><i>Exit</i></blockquote>

<h3>GONZALO</h3>
<blockquote>All torment, trouble, wonder and amazement<br />
Inhabits here: some heavenly power guide us<br />
Out of this fearful country!
</blockquote>

<h3>PROSPERO</h3>
<blockquote>Behold, sir king,<br />
The wronged Duke of Milan, Prospero:<br />
For more assurance that a living prince<br />
Does now speak to thee, I embrace thy body;<br />
And to thee and thy company I bid<br />
A hearty welcome.
</blockquote>

<h3>ALONSO</h3>
<blockquote>Whether thou best he or no,<br />
Or some enchanted trifle to abuse me,<br />
As late I have been, I not know: thy pulse<br />
Beats as of flesh and blood; and, since I saw thee,<br />
The affliction of my mind amends, with which,<br />
I fear, a madness held me: this must crave,<br />
An if this be at all, a most strange story.<br />
Thy dukedom I resign and do entreat<br />
Thou pardon me my wrongs. But how should Prospero<br />
Be living and be here?
</blockquote>

<h3>PROSPERO</h3>
<blockquote>First, noble friend,<br />
Let me embrace thine age, whose honour cannot<br />
Be measured or confined.
</blockquote>

<h3>GONZALO</h3>
<blockquote>Whether this be<br />
Or be not, I'll not swear.
</blockquote>

<h3>PROSPERO</h3>
<blockquote>You do yet taste<br />
Some subtilties o' the isle, that will not let you<br />
Believe things certain. Welcome, my friends all!<br />
But you, my brace of lords, were I so minded,<br />
I here could pluck his highness' frown upon you<br />
And justify you traitors: at this time<br />
I will tell no tales.
</blockquote>

<h3>SEBASTIAN</h3>
<blockquote>[Aside] The devil speaks in him.
</blockquote>

<h3>PROSPERO</h3>
<blockquote>No.<br />
For you, most wicked sir, whom to call brother<br />
Would even infect my mouth, I do forgive<br />
Thy rankest fault; all of them; and require<br />
My dukedom of thee, which perforce, I know,<br />
Thou must restore.
</blockquote>

<h3>ALONSO</h3>
<blockquote>If thou be'st Prospero,<br />
Give us particulars of thy preservation;<br />
How thou hast met us here, who three hours since<br />
Were wreck'd upon this shore; where I have lost--<br />
How sharp the point of this remembrance is!--<br />
My dear son Ferdinand.
</blockquote>

<h3>PROSPERO</h3>
<blockquote>I am woe for't, sir.
</blockquote>

<h3>ALONSO</h3>
<blockquote>Irreparable is the loss, and patience<br />
Says it is past her cure.
</blockquote>

<h3>PROSPERO</h3>
<blockquote>I rather think<br />
You have not sought her help, of whose soft grace<br />
For the like loss I have her sovereign aid<br />
And rest myself content.
</blockquote>

<h3>ALONSO</h3>
<blockquote>You the like loss!
</blockquote>

<h3>PROSPERO</h3>
<blockquote>As great to me as late; and, supportable<br />
To make the dear loss, have I means much weaker<br />
Than you may call to comfort you, for I<br />
Have lost my daughter.
</blockquote>

<h3>ALONSO</h3>
<blockquote>A daughter?<br />
O heavens, that they were living both in Naples,<br />
The king and queen there! that they were, I wish<br />
Myself were mudded in that oozy bed<br />
Where my son lies. When did you lose your daughter?
</blockquote>

<h3>PROSPERO</h3>
<blockquote>In this last tempest. I perceive these lords<br />
At this encounter do so much admire<br />
That they devour their reason and scarce think<br />
Their eyes do offices of truth, their words<br />
Are natural breath: but, howsoe'er you have<br />
Been justled from your senses, know for certain<br />
That I am Prospero and that very duke<br />
Which was thrust forth of Milan, who most strangely<br />
Upon this shore, where you were wreck'd, was landed,<br />
To be the lord on't. No more yet of this;<br />
For 'tis a chronicle of day by day,<br />
Not a relation for a breakfast nor<br />
Befitting this first meeting. Welcome, sir;<br />
This cell's my court: here have I few attendants<br />
And subjects none abroad: pray you, look in.<br />
My dukedom since you have given me again,<br />
I will requite you with as good a thing;<br />
At least bring forth a wonder, to content ye<br />
As much as me my dukedom.<br /><br />
<i>Here PROSPERO discovers FERDINAND and MIRANDA playing at chess</i></blockquote>

<h3>MIRANDA</h3>
<blockquote>Sweet lord, you play me false.
</blockquote>

<h3>FERDINAND</h3>
<blockquote>No, my dear'st love,<br />
I would not for the world.
</blockquote>

<h3>MIRANDA</h3>
<blockquote>Yes, for a score of kingdoms you should wrangle,<br />
And I would call it, fair play.
</blockquote>

<h3>ALONSO</h3>
<blockquote>If this prove<br />
A vision of the Island, one dear son<br />
Shall I twice lose.
</blockquote>

<h3>SEBASTIAN</h3>
<blockquote>A most high miracle!
</blockquote>

<h3>FERDINAND</h3>
<blockquote>Though the seas threaten, they are merciful;<br />
I have cursed them without cause.<br />
<i>Kneels</i></blockquote>

<h3>ALONSO</h3>
<blockquote>Now all the blessings<br />
Of a glad father compass thee about!<br />
Arise, and say how thou camest here.
</blockquote>

<h3>MIRANDA</h3>
<blockquote>O, wonder!<br />
How many goodly creatures are there here!<br />
How beauteous mankind is! O brave new world,<br />
That has such people in't!
</blockquote>

<h3>PROSPERO</h3>
<blockquote>'Tis new to thee.
</blockquote>

<h3>ALONSO</h3>
<blockquote>What is this maid with whom thou wast at play?<br />
Your eld'st acquaintance cannot be three hours:<br />
Is she the goddess that hath sever'd us,<br />
And brought us thus together?
</blockquote>

<h3>FERDINAND</h3>
<blockquote>Sir, she is mortal;<br />
But by immortal Providence she's mine:<br />
I chose her when I could not ask my father<br />
For his advice, nor thought I had one. She<br />
Is daughter to this famous Duke of Milan,<br />
Of whom so often I have heard renown,<br />
But never saw before; of whom I have<br />
Received a second life; and second father<br />
This lady makes him to me.
</blockquote>

<h3>ALONSO</h3>
<blockquote>I am hers:<br />
But, O, how oddly will it sound that I<br />
Must ask my child forgiveness!
</blockquote>

<h3>PROSPERO</h3>
<blockquote>There, sir, stop:<br />
Let us not burthen our remembrance with<br />
A heaviness that's gone.
</blockquote>

<h3>GONZALO</h3>
<blockquote>I have inly wept,<br />
Or should have spoke ere this. Look down, you god,<br />
And on this couple drop a blessed crown!<br />
For it is you that have chalk'd forth the way<br />
Which brought us hither.
</blockquote>

<h3>ALONSO</h3>
<blockquote>I say, Amen, Gonzalo!
</blockquote>

<h3>GONZALO</h3>
<blockquote>Was Milan thrust from Milan, that his issue<br />
Should become kings of Naples? O, rejoice<br />
Beyond a common joy, and set it down<br />
With gold on lasting pillars: In one voyage<br />
Did Claribel her husband find at Tunis,<br />
And Ferdinand, her brother, found a wife<br />
Where he himself was lost, Prospero his dukedom<br />
In a poor isle and all of us ourselves<br />
When no man was his own.
</blockquote>

<h3>ALONSO</h3>
<blockquote>[To FERDINAND and MIRANDA] Give me your hands:<br />
Let grief and sorrow still embrace his heart<br />
That doth not wish you joy!
</blockquote>

<h3>GONZALO</h3>
<blockquote>Be it so! Amen!<br />

<i>Re-enter ARIEL, with the Master and BOATSWAIN amazedly following</i></blockquote>

<h3>GONZALO</h3>
<blockquote>O, look, sir, look, sir! here is more of us:<br />
I prophesied, if a gallows were on land,<br />
This fellow could not drown. Now, blasphemy,<br />
That swear'st grace o'erboard, not an oath on shore?<br />
Hast thou no mouth by land? What is the news?
</blockquote>

<h3>BOATSWAIN</h3>
<blockquote>The best news is, that we have safely found<br />
Our king and company; the next, our ship--<br />
Which, but three glasses since, we gave out split--<br />
Is tight and yare and bravely rigg'd as when<br />
We first put out to sea.
</blockquote>

<h3>ARIEL</h3>
<blockquote>[Aside to PROSPERO] Sir, all this service<br />
Have I done since I went.
</blockquote>

<h3>PROSPERO</h3>
<blockquote>[Aside to ARIEL] My tricksy spirit!
</blockquote>

<h3>ALONSO</h3>
<blockquote>These are not natural events; they strengthen<br />
From strange to stranger. Say, how came you hither?
</blockquote>

<h3>BOATSWAIN</h3>
<blockquote>If I did think, sir, I were well awake,<br />
I'ld strive to tell you. We were dead of sleep,<br />
And--how we know not--all clapp'd under hatches;<br />
Where but even now with strange and several noises<br />
Of roaring, shrieking, howling, jingling chains,<br />
And more diversity of sounds, all horrible,<br />
We were awaked; straightway, at liberty;<br />
Where we, in all her trim, freshly beheld<br />
Our royal, good and gallant ship, our master<br />
Capering to eye her: on a trice, so please you,<br />
Even in a dream, were we divided from them<br />
And were brought moping hither.
</blockquote>

<h3>ARIEL</h3>
<blockquote>[Aside to PROSPERO] Was't well done?
</blockquote>

<h3>PROSPERO</h3>
<blockquote>[Aside to ARIEL] Bravely, my diligence. Thou shalt be free.
</blockquote>

<h3>ALONSO</h3>
<blockquote>This is as strange a maze as e'er men trod<br />
And there is in this business more than nature<br />
Was ever conduct of: some oracle<br />
Must rectify our knowledge.
</blockquote>

<h3>PROSPERO</h3>
<blockquote>Sir, my liege,<br />
Do not infest your mind with beating on<br />
The strangeness of this business; at pick'd leisure<br />
Which shall be shortly, single I'll resolve you,<br />
Which to you shall seem probable, of every<br />
These happen'd accidents; till when, be cheerful<br />
And think of each thing well.<br />

<blockquote><i>Aside to ARIEL</i></blockquote>Come hither, spirit:<br />
Set Caliban and his companions free;<br />
Untie the spell.<br />

<blockquote><i>Exit ARIEL</i></blockquote>How fares my gracious sir?<br />
There are yet missing of your company<br />
Some few odd lads that you remember not.<br /><br />
<i>Re-enter ARIEL, driving in CALIBAN, STEPHANO and TRINCULO, in their stolen apparel</i></blockquote>

<h3>STEPHANO</h3>
<blockquote>Every man shift for all the rest, and<br />
let no man take care for himself; for all is<br />
but fortune. Coragio, bully-monster, coragio!
</blockquote>

<h3>TRINCULO</h3>
<blockquote>If these be true spies which I wear in my head,<br />
here's a goodly sight.
</blockquote>

<h3>CALIBAN</h3>
<blockquote>O Setebos, these be brave spirits indeed!<br />
How fine my master is! I am afraid<br />
He will chastise me.
</blockquote>

<h3>SEBASTIAN</h3>
<blockquote>Ha, ha!<br />
What things are these, my lord Antonio?<br />
Will money buy 'em?
</blockquote>

<h3>ANTONIO</h3>
<blockquote>Very like; one of them<br />
Is a plain fish, and, no doubt, marketable.
</blockquote>

<h3>PROSPERO</h3>
<blockquote>Mark but the badges of these men, my lords,<br />
Then say if they be true. This mis-shapen knave,<br />
His mother was a witch, and one so strong<br />
That could control the moon, make flows and ebbs,<br />
And deal in her command without her power.<br />
These three have robb'd me; and this demi-devil--<br />
For he's a bastard one--had plotted with them<br />
To take my life. Two of these fellows you<br />
Must know and own; this thing of darkness!<br />
Acknowledge mine.
</blockquote>

<h3>CALIBAN</h3>
<blockquote>I shall be pinch'd to death.
</blockquote>

<h3>ALONSO</h3>
<blockquote>Is not this Stephano, my drunken butler?
</blockquote>

<h3>SEBASTIAN</h3>
<blockquote>He is drunk now: where had he wine?
</blockquote>

<h3>ALONSO</h3>
<blockquote>And Trinculo is reeling ripe: where should they<br />
Find this grand liquor that hath gilded 'em?<br />
How camest thou in this pickle?
</blockquote>

<h3>TRINCULO</h3>
<blockquote>I have been in such a pickle since I<br />
saw you last that, I fear me, will never out of<br />
my bones: I shall not fear fly-blowing.
</blockquote>

<h3>SEBASTIAN</h3>
<blockquote>Why, how now, Stephano!
</blockquote>

<h3>STEPHANO</h3>
<blockquote>O, touch me not; I am not Stephano, but a cramp.
</blockquote>

<h3>PROSPERO</h3>
<blockquote>You'ld be king o' the isle, sirrah?
</blockquote>

<h3>STEPHANO</h3>
<blockquote>I should have been a sore one then.
</blockquote>

<h3>ALONSO</h3>
<blockquote>This is a strange thing as e'er I look'd on.<br /><br />
<i>Pointing to Caliban</i></blockquote>

<h3>PROSPERO</h3>
<blockquote>He is as disproportion'd in his manners<br />
As in his shape. Go, sirrah, to my cell;<br />
Take with you your companions; as you look<br />
To have my pardon, trim it handsomely.
</blockquote>

<h3>CALIBAN</h3>
<blockquote>Ay, that I will; and I'll be wise hereafter<br />
And seek for grace. What a thrice-double ass<br />
Was I, to take this drunkard for a god<br />
And worship this dull fool!
</blockquote>

<h3>PROSPERO</h3>
<blockquote>Go to; away!
</blockquote>

<h3>ALONSO</h3>
<blockquote>Hence, and bestow your luggage where you found it.
</blockquote>

<h3>SEBASTIAN</h3>
<blockquote>Or stole it, rather.
</blockquote>

<blockquote><i>Exeunt CALIBAN, STEPHANO, and TRINCULO</i></blockquote>

<h3>PROSPERO</h3>
<blockquote>Sir, I invite your highness and your train<br />
To my poor cell, where you shall take your rest<br />
For this one night; which, part of it, I'll waste<br />
With such discourse as, I not doubt, shall make it<br />
Go quick away; the story of my life<br />
And the particular accidents gone by<br />
Since I came to this isle: and in the morn<br />
I'll bring you to your ship and so to Naples,<br />
Where I have hope to see the nuptial<br />
Of these our dear-beloved solemnized;<br />
And thence retire me to my Milan, where<br />
Every third thought shall be my grave.
</blockquote>

<h3>ALONSO</h3>
<blockquote>I long<br />
To hear the story of your life, which must<br />
Take the ear strangely.
</blockquote>

<h3>PROSPERO</h3>
<blockquote>I'll deliver all;<br />
And promise you calm seas, auspicious gales<br />
And sail so expeditious that shall catch<br />
Your royal fleet far off.<br />

<blockquote><i>Aside to ARIEL</i></blockquote>My Ariel, chick,<br />
That is thy charge: then to the elements<br />
Be free, and fare thou well! Please you, draw near.<br />

<blockquote><i>Exeunt</i></blockquote>EPILOGUE<br />
SPOKEN BY PROSPERO<br />
Now my charms are all o'erthrown,<br />
And what strength I have's mine own,<br />
Which is most faint: now, 'tis true,<br />
I must be here confined by you,<br />
Or sent to Naples. Let me not,<br />
Since I have my dukedom got<br />
And pardon'd the deceiver, dwell<br />
In this bare island by your spell;<br />
But release me from my bands<br />
With the help of your good hands:<br />
Gentle breath of yours my sails<br />
Must fill, or else my project fails,<br />
Which was to please. Now I want<br />
Spirits to enforce, art to enchant,<br />
And my ending is despair,<br />
Unless I be relieved by prayer,<br />
Which pierces so that it assaults<br />
Mercy itself and frees all faults.<br />
As you from crimes would pardon'd be,<br />
Let your indulgence set me free.
</blockquote>
</div> 
```

**Javascript**

```
window.onload = createList;

function addEvent(object, evName, fnName, cap) {
   if (object.attachEvent)
       object.attachEvent("on" + evName, fnName);
   else if (object.addEventListener)
       object.addEventListener(evName, fnName, cap);
}

function uniqueElemText(elemName) {
   elems = document.getElementsByTagName(elemName);
   elemsArray = new Array();

   for (var i=0; i<elems.length; i++) elemsArray[i]=elems[i].innerHTML;  
   elemsArray.sort();
   for (i=0; i<elemsArray.length-1; i++) {
      if (elemsArray[i]==elemsArray[i+1]) {
         elemsArray.splice(i+1,1);
         i--;
      }
   }
   return elemsArray;
}

function createList(){
    var option;
    var characters = new Array();
    var select = document.createElement('select');
        select.setAttribute('id', 'charList');
        select.addEventListener('change', filter, false);
    var charBox = document.getElementById('characterList');
        charBox.innerHTML = '<p>Show Only Line By:</p>';
        charBox.appendChild(select);

    var tempChar = document.getElementsByTagName('h3');
    for(var i = 0; i < tempChar.length; i++)
        if(characters.indexOf(tempChar[i].innerHTML) == -1)
            characters.push(tempChar[i].innerHTML);
    delete tempChar;
    characters.sort();

    option = document.createElement("option");
    option.text = "Show All Character Lines";
    option.value = 'ALL';
    select.add(option);

    for(var i = 0; i < characters.length; i++)
    {
        option = document.createElement("option");
        option.text = characters[i];
        option.value = characters[i];
        select.add(option);
    }
}

function filter(){
    var scene = document.getElementById('scene');
    var elemList = scene.getElementsByTagName('*');
    var list = document.getElementById('charList');
    var character = list.options[list.selectedIndex].value;

    for(var i = 0; i < elemList.length; i++)
    {
        if(elemList[i].innerHTML.indexOf("<h3>"+character+"</h3>") !== -1)
        {
            elemList[i].style.visibility = 'hidden';
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T02:37:38.623

我对这个问题的解决方案

```
var scene = document.getElementById("scene");
parts = scene.innerHTML.split( /<h3>|<\/h3>/g );

function filter( character ) {
  var newHTML = "";

  for( var i = 1; i < parts.length; i += 2 ) {
    if( parts[i] === character ) {
      newHTML += "<h3>" + parts[i] + "</h3>" + parts[i+1];
    }
  }
  scene.innerHTML = newHTML;
} 
```

演示[**在这里**](http://jsbin.com/igowal/1/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T02:02:40.263

我用解决方案重写了过滤器功能。

```
function filter() {
    var scene = document.getElementById('scene');
    var elemList = scene.getElementsByTagName('*');
    var list = document.getElementById('charList');
    var character = list.options[list.selectedIndex].value;

    var hide = false;

    for (var i = 0; i < elemList.length; i++) {
        var elem = elemList[i];
        if (elem.tagName == "H3") {
            hide = (elemList[i].innerHTML.indexOf(character) == -1)
        }

        if (hide) {
            elem.style.opacity = 0.5;
        } else {
            elem.style.opacity = 1.0;
        }
    }
}​ 
```

此解决方案逐步遍历每个元素，并在找到不匹配的名称时开始隐藏，并在找到匹配的名称时停止隐藏。

您遇到的主要错误是您正在检查`innerHTML`而`<h3>Character</h3>`不是`outerHtml`. 实际上使用它更安全`tagName`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T01:53:37.187

我要做的是将结构更改为更方便的格式，在页面加载时使用 JavaScript。重新排列元素后，隐藏、设置样式、重新排列和使用元素应该会快很多。

为此，您可以遍历元素的内容`#scene`，将所有子元素移动到 new `div`s，您可以在其上设置一些属性以识别它们。

建议的结构可能是

```
<div class="lines" data-character="PROSPERO">
  <h3>PROSPERO</h3>
  <blockquote>Duh!</blockquote>
  <blockquote>Whatever!</blockquote>
</div> 
```

然后，您可以使用您喜欢的方法轻松过滤内容。例如，使用 CSS：

```
.lines { display: none; }
.lines[data-character=PROSPERO] { display: block; } 
```

# android - 启用 Android WebView Javascript

> ID：13888481
> 
> 赞同：12
> 
> 时间：2012-12-15T01:32:29.517
> 
> 标签：android

activity_main.xml

```
<WebView  xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/webView"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
/> 
```

MainActivity.java

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    WebView webView =(WebView)findViewById(R.id.webView);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.setWebViewClient(new WebViewClient());
    WebSettings webSettings = webView.getSettings();
    webSettings.setJavaScriptEnabled(true);
    webSettings.setDomStorageEnabled(true);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.getSettings().setDomStorageEnabled(true);
    webView.loadUrl("file:///android_asset/www/index.html");
} 
```

我有这个代码，但 javascript 不工作:(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T12:11:42.713

您忘记了最重要的一项：

```
webView.getSettings().setPluginState(PluginState.ON); 
```

# android - 无法在 SQLite 中正确排序值

> ID：13888482
> 
> 赞同：0
> 
> 时间：2012-12-15T01:32:34.467
> 
> 标签：android, sqlite, android-sqlite

我有一张这种形式的桌子

```
Name|Quantity|
Item1|600.2|
Item2|8.12|
Item3|78|
Item4|9.723| 
```

其中所有数量值都是文本，

我想按降序对所有项目进行排序，所以我尝试了这个

```
Cursor c = mDb.rawQuery("SELECT *, CAST(myTableName.Quantity as FLOAT) as Quantity FROM myTableName ORDER BY Quantity desc", null); 
```

但结果是这样的

```
Item4|9.723|
Item2|8.12|
Item3|78|
Item1|600.2| 
```

显然，在查询中，点在排序中被忽略。

我怎样才能解决这个问题得到正确的后代排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T01:39:02.633

您可以将架构更改为设置`Quantity`为 an`REAL`或*在`ORDER BY`子句*中使用强制转换：

```
SELECT * FROM myTableName ORDER BY CAST(Quantity AS REAL) DESC; 
```

（在 SQLite`FLOAT`中与[相同`REAL`](http://www.sqlite.org/datatype3.html#affinity)，您可以使用其中任何一个。）

# python - 读取文件 EOL 时出现 Python 错误

> ID：13888485
> 
> 赞同：0
> 
> 时间：2012-12-15T01:33:34.967
> 
> 标签：python, file-io

> **可能重复：**
> [python：SyntaxError：EOL，同时扫描字符串文字](https://stackoverflow.com/questions/3561691/python-syntaxerror-eol-while-scanning-string-literal)

读取文本文件时有时会出现此错误

> SyntaxError：扫描字符串文字时 EOL

这是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T01:45:56.613

EOL 的意思是“行尾”

您忘记关闭“stuff”或“stuff”类型的引号

喜欢

```
>>> print "hello
  File "<stdin>", line 1
    print "hello
               ^
SyntaxError: EOL while scanning string literal
>>> print "hello"
hello 
```

插入符号指出问题所在

# c - 在 C 中替换数组的元素

> ID：13888490
> 
> 赞同：0
> 
> 时间：2012-12-15T01:34:58.760
> 
> 标签：c, arrays

我正在为一项任务制定战舰计划。我在尝试找到放置船只的好方法时遇到了麻烦。我一直在尝试的想法是用零填充一个 10x10 数组，然后将特定坐标替换为 c 表示载体，d 表示驱逐舰等。但我并没有太成功。如果有人对我如何做到这一点有任何想法，或者如果您知道更好的方法，那么任何帮助或指导将不胜感激。

抱歉，这是我第一次到任何地方在线提供帮助。并回答问题。不，我不知道如何处理数组，这是我寻求帮助的部分原因。我一直在阅读我的教科书，但我没有发现任何类似的东西，而且如果没有具体的理解，就很难想出这本书到底在说什么。但这是我迄今为止创建战略板和游戏板的代码，以及我尝试放置船只的代码

```
 //================================FillArray==========================================
void FillArray(int pboard[], int sboard[]);
{

    //Statement
    for(int y; y < col; y++);
    {
        printf("%d", y);//prints y axis boarder
        for(int x=0; x < row; x++);
        {
        printf("%d", x);//prints x axis boarder
        for(int y=0; y < col; y++);
            pboard[row][col] = 0;
        }//for
    }//Fills array for play

    for(int y; y < col; y++);
    {
        printf("%d", y);//prints y axis boarder
        for(int x=0; x < row; x++)
        {
        printf("%d", x);//prints x axis boarder
        for(int y=0; y < col; y++);
            sboard[row][col] = 0;
        }//for
    }//Fills array for Ships

    return;
}//FillArray

//================================PlaceShips==========================================

void PlaceShips(int air=5, int bat=4, int cru=3, int des=1, int sub=2);
{

    char ship;
    int x,y;
    int k;

    //Statement

    printf("Enter first letter of ship name: ");
    if(scanf("%c", ship) == a)
        { printf("You have 5 space, Please enter furthest left or futhest up coordinate: ");
            scanf("%d%d", &x,&y);
            while(x>10 && y > 10)
                {
                    printf("Enter 1\. to place ship vertically\nEnter 2\. to place ship horizontally: ")
                    scanf("%d", &k)
                    for(k==1, y > 6, y++);
                    {   pboard[row][y-1] = a;
                            if(y<0 || y >9)
                        printf("error");
                    }
                    for(k==2, x > 6, x++);
                    {
                        pboard[x-1][col] = a; 
                        if(x < 0 || x > 9)
                        printf("error");
                    }
                }
        }
} 
```

这是执行此操作的好方法，还是有更有效的方法。我尝试了类似于以下的结构：

```
typedef struct
{
char id[5]={a,a,a,a,a}
char name[]=aircraft
int hits=5
} Aircraft Carrier 
```

但我不确定他们会如何提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T02:25:25.503

```
 for(&k==1, y > 6, y++) 
```

我想这是您遇到的问题之一。

首先，您需要`for()`用 . 分隔语句`;`。

其次，您正在访问 k 的**地址**，并检查是否相等。for 语句的第一部分通常设置一个变量。你需要重新思考你的逻辑。

```
 while(x>10 && y >> 10) 
```

`>>`和他不一样`>`，小心点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T03:18:58.853

看起来你试图在`PlaceShips`函数中做太多事情。这是一个风格问题，但我可能会先写一个`PlaceOneShipHorizontally()`和一个`PlaceOneShipVertically() function.`

例如，

```
void PlaceOneShipHorizontally(int board[], int ox, int oy, int character, int size) {
  for (int x = ox; x < (size+ox); x++) {
    board[x][oy] = character;
  }
} 
```

然后，一旦确定用户想要做什么，编辑 PlaceShips() 函数以使用上述函数。

# spring - 如何在混合 Apache 和 Tomcat 环境中保持会话

> ID：13888491
> 
> 赞同：1
> 
> 时间：2012-12-15T01:34:59.540
> 
> 标签：spring, apache, tomcat, spring-security, jsessionid

我有 Apache 提供静态内容和 Tomcat 提供动态内容，由 mod_jk 链接。我的应用程序是基于 Spring 的，使用 Spring Security。Apache 页面是端口 80，Tomcat 页面是在端口 8080 上服务的。我发现 Spring Security 正确调用了登录并创建了一个 JSESSIONID cookie。当我继续导航到动态页面时，这个 JSESSIONID cookie 仍然存在；也就是说，到 Tomcat 提供的页面。当我导航到静态页面时，JSESSIONID cookie 消失了。大概这意味着Tomcat会话已经结束。这意味着当我随后导航回动态页面时，Spring Security 要求我再次登录。如何在这种混合的静态和动态环境中持久保存 Spring Security？当我导航回由 Apache 提供的页面时，有什么方法可以让 JSESSIONID cookie 持续存在。

JSESSIONID 是在我第一次访问动态页面时创建的（当我通过 spring-security 登录时）。在我浏览任何动态页面（即，通过 Tomcat 提供的页面）时，JSESSIONID 保持存在且不变。当我导航到静态页面时，JSESSIONID cookie 消失（这不是其值变化的问题 - 不存在 JSESSIONID cookie）。工人属性是：

```
worker.list=ajp13_worker
worker.ajp13_worker.port=8009
worker.ajp13_worker.host=localhost
worker.ajp13_worker.type=ajp13
worker.ajp13_worker.lbfactor=50
worker.ajp13_worker.cachesize=10
worker.ajp13_worker.cache_timeout=600
worker.ajp13_worker.socket_keepalive=1
worker.ajp13_worker.socket_timeout=300 
```

配置指令是：

```
JkMount /OLOSmember/ ajp13_worker
JkMount /OLOSmember/* ajp13_worker 
```

浏览器是 Chrome。Apache 和 Tomcat7 在 Ubuntu 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T04:53:09.927

您的问题中没有足够的信息来给出明确的答案。您可以执行以下操作来排除故障。

*   当您从静态页面导航到动态页面时，使用 firebug 查看是否正在发送 jsessionid。firebug 是否显示 JSESSION id 的值发生变化，您想隔离问题所在的层，jsession id 是否使其进入 apache 但未通过 tomcat？

*   显示您的 mod_jk 配置指令和 tomcat 的 worker.properties 文件，这样我们可以更好地帮助您。

# java - android 上的 MediaRecorder 启动失败

> ID：13888494
> 
> 赞同：1
> 
> 时间：2012-12-15T01:35:19.690
> 
> 标签：java, android, cordova, android-mediarecorder

我正在尝试使用 Cordova 插件中的 MediaRecorder 在 android 上进行视频录制活动，并且一切正常，但是当我单击我的按钮开始录制时，我收到一条消息说“应用程序已停止工作”。

这是日志，我不确定原因是什么，因为日志没有说明。任何帮助，将不胜感激。

```
12-15 01:27:38.025: E/AndroidRuntime(776): FATAL EXCEPTION: main
12-15 01:27:38.025: E/AndroidRuntime(776): java.lang.RuntimeException: start failed.
12-15 01:27:38.025: E/AndroidRuntime(776):  at android.media.MediaRecorder.start(Native Method)
12-15 01:27:38.025: E/AndroidRuntime(776):  at com.ron.camanon.PushCaptureActivity$1.onClick(PushCaptureActivity.java:64)
12-15 01:27:38.025: E/AndroidRuntime(776):  at android.view.View.performClick(View.java:4202)
12-15 01:27:38.025: E/AndroidRuntime(776):  at android.widget.CompoundButton.performClick(CompoundButton.java:100)
12-15 01:27:38.025: E/AndroidRuntime(776):  at android.view.View$PerformClick.run(View.java:17340)
12-15 01:27:38.025: E/AndroidRuntime(776):  at android.os.Handler.handleCallback(Handler.java:725)
12-15 01:27:38.025: E/AndroidRuntime(776):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-15 01:27:38.025: E/AndroidRuntime(776):  at android.os.Looper.loop(Looper.java:137)
12-15 01:27:38.025: E/AndroidRuntime(776):  at android.app.ActivityThread.main(ActivityThread.java:5039)
12-15 01:27:38.025: E/AndroidRuntime(776):  at java.lang.reflect.Method.invokeNative(Native Method)
12-15 01:27:38.025: E/AndroidRuntime(776):  at java.lang.reflect.Method.invoke(Method.java:511)
12-15 01:27:38.025: E/AndroidRuntime(776):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-15 01:27:38.025: E/AndroidRuntime(776):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-15 01:27:38.025: E/AndroidRuntime(776):  at dalvik.system.NativeStart.main(Native Method) 
```

**更新：这是我在粘贴箱上的代码，第 64 行是 mMediaRecorder.start();**

[http://pastebin.com/22ZeqS5f](http://pastebin.com/22ZeqS5f)

*所以我现在的问题是，我有一个黑屏预览，我做错了什么？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T04:19:00.300

> 使用权限 android:name="android.permission.RECORD_VIDEO

您是否为该应用程序授予了适当的录音机权限？

# java - ANDROID - 使用每个手指移动的 x 和 y 坐标创建一个新的 Oval 类

> ID：13888502
> 
> 赞同：1
> 
> 时间：2012-12-15T01:36:45.603
> 
> 标签：java, android, motionevent

我想做这个：

1.  *   当我触摸屏幕时，我想为触摸的 x,y 坐标创建一个新的椭圆
2.  *   当我在屏幕上拖动手指时，我想为拖动过程中手指所在的每个 x,y 坐标创建新的椭圆。
3.  *   当我触摸并将手指放在屏幕上（长按）时，我想删除我创建的每个椭圆

我可以做第一步，但我不知道如何做 2\. 和 3.

这是我尝试过的代码：

```
public class BouncingBallView extends View implements OnGestureListener{

private List<Oval> ovals = new ArrayList<Oval>();
private GestureDetector gestureScanner;

public BouncingBallView(Context context) {
    super(context);
    setBackgroundColor(Color.WHITE);
    gestureScanner = new GestureDetector(this);
}

@Override
protected void onDraw(Canvas canvas) {
    for(Oval o: ovals) { //prints every oval
        o.graph(canvas);
    } 
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    //1\. this works:
    float x = event.getX();
    float y = event.getY();
    Oval oval = new Oval(x, y, this);
    ovals.add(oval);
    invalidate();
    return super.onTouchEvent(event);
}

@Override
public boolean onDown(MotionEvent arg0) {
    return false;
}

@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float x,
        float y) {
    //2\. this doesn't work:
    Oval oval = new Oval(x, y, this);
    ovals.add(oval);
    invalidate();
    return true;
}

@Override
public void onLongPress(MotionEvent arg0) {
    //3\. this doesn't work:
    ovals.clear();
    invalidate();
}

@Override
public boolean onScroll(MotionEvent e1, MotionEvent e2, float x,
        float y) {
    //2\. this doesn't work:
    Oval oval = new Oval(x, y, this);
    ovals.add(oval);
    invalidate();
    return true;
}

@Override
public void onShowPress(MotionEvent arg0) {
    // TODO Auto-generated method stub

}

@Override
public boolean onSingleTapUp(MotionEvent arg0) {
    // TODO Auto-generated method stub
    return false;
} 
```

}

您可以看到，我不使用“gestureScanner”参数，也许我应该使用，但我不知道在哪里以及如何使用！

请帮我！谢谢！

# javascript - Android webview js与活动通信

> ID：13888507
> 
> 赞同：0
> 
> 时间：2012-12-15T01:38:07.023
> 
> 标签：javascript, android, webview

我的应用程序在 web 视图中运行，它与我通过 JS 接口保存 DB 的活动进行通信。

它通过接口方法查询数据库。

唯一可以在它们之间传递的是字符串，但是随着这个字符串变大，双向传递它需要更多时间。

有没有办法减少这个时间？我想到了一种压缩它们之间传递的数据的方法。

或者问题可能来自我不知道的其他地方！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:35:32.870

经过一些测试，我发现由于实现的性质，Android 和 JS 之间的传输很慢，对此我们无能为力，所以我使用 WebSQL 将 db 移动到 webview。

# c++ - #include 中的标准库编译器错误——所有库都会导致终端错误

> ID：13888514
> 
> 赞同：1
> 
> 时间：2012-12-15T01:39:07.833
> 
> 标签：c++, compiler-construction

在我非常简单的 C++ 项目中，g++ 编译器抛出了非常奇怪的错误。以下错误：

```
In file included from /usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/ios:39,
                 from /usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/ostream:40,
                 from /usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/iostream:40,
                 from findWord.cpp:1:
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/ios_base.h: In copy constructor ‘std::basic_ios<char, std::char_traits<char> >::basic_ios(const std::basic_ios<char, std::char_traits<char> >&)’:
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/ios_base.h:790: error: ‘std::ios_base::ios_base(const std::ios_base&)’ is private
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/iosfwd:47: error: within this context
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/iosfwd: In copy constructor ‘std::basic_ifstream<char, std::char_traits<char> >::basic_ifstream(const std::basic_ifstream<char, std::char_traits<char> >&)’:
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/iosfwd:81: note: synthesized method ‘std::basic_ios<char, std::char_traits<char> >::basic_ios(const std::basic_ios<char, std::char_traits<char> >&)’ first required here 
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/streambuf: In copy constructor ‘std::basic_filebuf<char, std::char_traits<char> >::basic_filebuf(const std::basic_filebuf<char, std::char_traits<char> >&)’:
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/streambuf:770: error: ‘std::basic_streambuf<_CharT, _Traits>::basic_streambuf(const std::basic_streambuf<_CharT, _Traits>&) [with _CharT = char, _Traits = std::char_traits<char>]’ is private
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/iosfwd:78: error: within this context
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/iosfwd: In copy constructor ‘std::basic_ifstream<char, std::char_traits<char> >::basic_ifstream(const std::basic_ifstream<char, std::char_traits<char> >&)’:
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/iosfwd:81: note: synthesized method ‘std::basic_filebuf<char, std::char_traits<char> >::basic_filebuf(const std::basic_filebuf<char, std::char_traits<char> >&)’ first required here 
findWord.cpp: In function ‘int main(int, char**)’:
findWord.cpp:19: note: synthesized method ‘std::basic_ifstream<char, std::char_traits<char> >::basic_ifstream(const std::basic_ifstream<char, std::char_traits<char> >&)’ first required here 
```

我的代码：

```
#include <iostream>
#include <fstream>
#include <string>
#include <cstring>

using namespace std;

int main(int argc, char* argv[]){
//a char pointer is a c-string
//the array is just an array of char pointers
//argv[0] = pointer to the word to search for
//argv[1] = pointer to fileNames

//includes program name @ 0, so three args
if (argc == 3){

    int wordCounter = 0;

    ifstream myFile = ifstream(argv[2]);

    if (!myFile){
        cout << "File '" << argv[2] << "' could not be opened" << endl;
        return 1;
    }

    else {
        //counts the number of lines in file
        int counter = 0;

        //holds the new line in the file
        char line[100];

        //copies string into buffer that is length of word
        const char * word = argv[1];

        //holds whether found word
        bool found = false;

        cout << "Searching for '" << word << "' in the file '" << argv[2] << "'" << endl;

        while (!myFile.getline(line, 100).eof()) {
            //starts every new new at not having found the word
            found = false;
            //read in new line, so increases line counter
            counter ++;

            for (unsigned int i = 0; i <= myFile.gcount() - strlen(argv[1]); i++){
                if (line[i] == word[0]){
                    for (unsigned int j = 0; j < strlen(argv[1]); j++){
                        if (word[j] != line [i+j]){
                            break;
                        }
                    }//end second for loop
                    wordCounter++;
                    found = true;
                }//end if (char == word[0]
            }//end first for loop
            if (found){
                cout << counter << ": " << line;
            }//end if found word
        }//end while

        cout << "# occurrences of '" << word << "' = " << wordCounter << endl;
        myFile.close();
    }//end else
}//end if
return 0;
}//end main 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T01:50:40.067

您的声明导致调用`myFile`复制构造函数，但不可[复制（参见定义#5）](http://en.cppreference.com/w/cpp/io/basic_ifstream/basic_ifstream)。这里的语法非常微妙：`ifstream``ifstream`

```
ifstream myFile = ifstream(argv[2]); 
```

这条单行实际上构造**了两个** `ifstream`对象（一个在左侧，一个在右侧）。然后将右侧复制到左侧。

将行更改为：

```
ifstream myFile(argv[2]); 
```

将仅构造一个`ifstream`具有自动存储功能的对象（例如，基于范围/堆栈的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T01:41:44.803

看来编译器不喜欢您构建 myFile 的方式。

尝试`ifstream myFile(argv[2]);`代替`ifstream myFile = ifstream(argv[2]);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T01:54:26.727

为了下次帮助您，请注意确切的错误在这一行：

```
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/streambuf:770: error: ‘std::basic_streambuf<_CharT, _Traits>::basic_streambuf(const std::basic_streambuf<_CharT, _Traits>&) [with _CharT = char, _Traits = std::char_traits<char>]’ is private 
```

它清楚地表明该功能是私有的。不清楚的是，这是一个用作复制运算符的构造函数（正如 Bret Kuhns 指出的那样。）

# mysql - 通过链接表从与标签关联的 MySQL 数据库中获取行

> ID：13888516
> 
> 赞同：0
> 
> 时间：2012-12-15T01:39:24.513
> 
> 标签：mysql, search, tags

我有三个 MySQL 表，一个带有数据，一个带有标签，一个带有这两者之间的关联，这似乎是存储标签时的常见做法。表格如下所示：

```
links:
+----+------------+------------+
| id | url        | added      |
+----+------------+------------+
| 2  | google.com | 2012-12-14 |
| 3  | cnn.com    | 2001-02-13 |
+----+------------+------------+

tags:    
+----+--------+
| id | tag    |
+----+--------+
| 1  | search |
| 2  | news   |
+----+--------+

taglink:
+----+--------+-------+
| id | linkid | tagid |
+----+--------+-------+
| 1  | 2      | 1     |
| 2  | 3      | 1     |
| 3  | 3      | 2     |
+----+--------+-------+ 
```

我想收到的是下表：

```
+----+------------+------------+--------+-------------+
| id | url        | added      | tagids | tags        |
+----+------------+------------+--------+-------------+
| 2  | google.com | 2012-12-14 | 1      | search      |
| 3  | cnn.com    | 2001-02-13 | 1,2    | search,news |
+----+------------+------------+--------+-------------+ 
```

为此，我有以下查询：

```
select 
   links.*,
   group_concat(taglink.id) as tagids,
   group_concat(tags.tag) as tags
from links
   join taglink on taglink.linkid=links.id
   join tags on tags.id=taglink.tagid 
```

但这给了我一个使用每个标签的单行，如下所示：

```
+----+------------+------------+--------+-------------+
| id | url        | addad      | tagids | tags        |
+----+------------+------------+--------+-------------+
| 2  | google.com | 2012-12-14 | 1,2    | search,news |
+----+------------+------------+--------+-------------+ 
```

一切似乎都是分组的，这不是我想要的。有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T01:49:27.893

您需要按如下方式使用`GROUP BY`您的函数，否则它们的行为将无法预测。`group_concat`尝试这个。

```
 select links.id, links.url, links.added,
           group_concat(tags.id ORDER BY tags.id) as tagids,
           group_concat(tags.tag ORDER BY tags.id) as tags
      from links
      join taglink on taglink.linkid=links.id
      join tags on tags.id=taglink.tagid
  group by links.id, links.url, links.added
  order by links.id 
```

请注意，我添加了一些`ORDER BY`项目以使事物的顺序可预测。

去小提琴： [http ://sqlfiddle.com/#!2/2b3b9/5/0](http://sqlfiddle.com/#!2/2b3b9/5/0)

# php - php regex preg_match_all 无法正常工作

> ID：13888517
> 
> 赞同：1
> 
> 时间：2012-12-15T01:39:27.550
> 
> 标签：php, regex, preg-match, preg-match-all

我使用 preg_match_all 检查以大写开头的日期和单词，问题出在日期上，因为在正则表达式测试器上它告诉我这个正则表达式很好，但在 php 脚本中它没有正确执行，我的模式是这样的：

```
$pattern = "#(((0[1-9]|[12][0-9]|3[01])([\/\.\\\-])((0[1-9]|1[012])\11)?)(\d\d\d\d|\d\d))+|([A-Z][a-z]+)(\s[A-Z][a-z]+)*#"; 
```

我希望它匹配这个：“12.10.1990”以及“12.10.90”

感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T01:47:49.403

```
$string = '12.10.1990 as well as 12.10.90';

preg_match_all('/[01]\d\.[0-3]\d\.\d{2,4}/', $string, $match);

print_r($match); 
```

将此模式用于正则表达式的日期匹配部分。不管你是想重新发明轮子。有内置的 PHP 函数可以帮助您更好地确定日期是否有效。

*   [http://php.net/manual/en/function.checkdate.php](http://php.net/manual/en/function.checkdate.php)

使用explode()，然后将每个段放入这个函数中，例如：

```
$string = '12.10.1990';
//$string = '12.10.90';

$string = explode('.', $string);
var_dump(checkdate($string[0], $string[1], $string[2])); 
```

# string - 在 WinForms 列表框/列表视图控件中显示大量字符串

> ID：13888520
> 
> 赞同：1
> 
> 时间：2012-12-15T01:40:14.660
> 
> 标签：string, winforms, listview, data-binding, listbox

我的 WinForms UI 包含一个带有两个标签页的标签控件。在一个选项卡上，我需要以允许我的用户在列表中添加、编辑和删除字符串的方式显示最多 100,000 个字符串的列表。在第二个选项卡上，我需要显示第一个选项卡中字符串的“只读”副本。我还需要第二个选项卡上的控件，允许用户将字符串从“只读”列表复制到第二个不相关列表中。

我目前在一个数组中有 100k 个字符串，我的第一个想法是使用列表框来显示它们。我可以遍历数组并将字符串单独添加到第一个选项卡上的列表框中。如果我使用 SuspendLayout() 和 BeginUpdate()，则显示大约需要 1.5 秒。不幸的是，当我向列表框添加超过 65k 项时，会出现垂直滚动条问题（显然这是在 Vista 期间引入的列表框控件中的一个错误）。由于字符串数据未绑定到列表框，因此我基本上将相同的整个数据集添加到第二个选项卡上的另一个列表框。现在，如果我启动我的应用程序，等待将字符串添加到列表框，然后尝试选择第二个选项卡，等待第二个选项卡响应时性能非常慢。我' m 假设这与列表框中的数据量有关。无论如何，一旦第二个选项卡响应，我可以在两个选项卡页面之间切换，延迟要少得多。

作为测试，我尝试将两个列表框绑定到数组，但从性能的角度来看它没有任何区别。无论如何，滚动错误可能会使列表框成为我无法使用的选项。因此，我在列表模式下尝试了带有单个隐藏列标题的 listview 控件。当我将字符串数据添加为单独的 ListViewItems 时，性能并没有太大的不同。我打算尝试将两个 listview 控件绑定到我的数组，但看起来 listview 控件不支持设计时数据绑定，我不确定如果我自己尝试实现它会产生很大的不同。

我知道 100,000 个字符串（最大）对于用户来说是很多数据要处理，但要求用户能够看到应用程序中的所有字符串数据（最坏的情况是我的 QA 团队首先会开始测试！）。是否有另一种控件可以适应这种数据量和我需要的功能？还是我只是把这一切都错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T02:08:56.447

我认为您不会通过一次为用户提供 50 多个字符串来帮助用户。使用 DataGridView，您可以按需加载，这更适合于此。请参阅[虚拟模式](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.virtualmode.aspx)。或者，您可以根据用户输入手动将项目加载到列表框，这样会更好。尝试在这方面说服客户，一次拥有 10 万个字符串只会弊大于利。

我确实认为 DataGridViews 将无法显示简单的字符串，但为您提供了在未来提供更多功能的灵活性（如更多列等）。至于如何将大量数据填充到gridiview，进行搜索，上面有很多线程。这里有两个很好的开端

[http://www.codeproject.com/Articles/38735/Load-a-billion-rows-in-a-DataGridView](http://www.codeproject.com/Articles/38735/Load-a-billion-rows-in-a-DataGridView)

[哪个更好用：用于显示大量数据的 DataGrid 或 ListView？](https://stackoverflow.com/questions/6089674/whats-better-to-use-a-datagrid-or-listview-for-displaying-large-amounts-of-dat)

**正如我所说，最好的选择是重新考虑设计**..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T23:08:57.457

我们有一个类似的（~exact）问题。建议的“重新设计”解决方案并不是真正的解决方案。用户不能真正使用（或不需要）查看“数以千计”的项目的想法绝对不是 100% 正确的，并且是假设的。在我们的例子中，用户需要能够滚动（查看）许多 (100k+) 项目....是的，这是很容易实现的，人类使用我们的软件来处理有组织的扫描 3D 坐标数据是很容易做到的。

太棒了，仍然需要一个 ListView 控件，它允许大量项目来替换 system.windows.forms.ListBox（如在 C# 中使用的那样）。NET system.windows.forms.ListBox 与 Visual Studio C# 2012 一起提供，允许大型列表但当它的计数接近 ~60,000 +- 时不允许正确滚动。

它就是这样儿的！

# php - RainTPL 模板输出不正确

> ID：13888521
> 
> 赞同：0
> 
> 时间：2012-12-15T01:40:23.513
> 
> 标签：php, idiorm, raintpl

我将 RainTPL、Idiorm 和 Gluephp 用于由 sqlite 数据库驱动的简单网站。

加载首页后一切正常。 [http://home.techtic.info](http://home.techtic.info)

当另一个页面被加载时，我得到了首页的输出和由 RainTPL 加载的另一个页面的输出。 [http://home.techtic.info/admin](http://home.techtic.info/admin)

问题：如何防止加载第二个 url 时加载数据？

这是代码：

```
RainTPL::configure('tpl_dir', 'view/');
RainTPL::configure('cache_dir', 'app/cache/');
RainTPL::configure('base_url', 'http://' . $_SERVER['SERVER_NAME'] . '/');
RainTPL::configure('tpl_ext', 'php');
RainTPL::configure('php_enabled', true);

ORM::configure('sqlite:app/database');

$urls = array(
    '/' => 'index',
    '/admin' => 'admin'
);

class index {

    function GET() {
        $content = ORM::for_table('product')->find_array();

        $index = new RainTpl();
        $index->assign('content', $content);
        $index->draw('main');
    }

}

class admin {

    function GET() {
        $admin = new RainTpl();
        $admin->draw('admin/admin');
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T01:45:40.410

现在已经尝试了4个小时。RainTPL 不喜欢子目录。如果你有同样的问题。不要将模板文件放在子目录中。

# xml - 如何在 JSP 文件的 xmlPath 中设置远程 Web 服务器 URL？

> ID：13888526
> 
> 赞同：1
> 
> 时间：2012-12-15T01:41:19.817
> 
> 标签：xml, jsp, url-routing, weblogic-10.x

我正在处理的 index.jsp 文件当前引用了部署在 WebLogic 中同一打开目录中的 XML 内容，但现在我试图将代码与内容分开，并且需要将 XML 托管在单独的服务器上以供其他人使用更新。

JSP 中的代码当前提供了 XML 内容的相对路径：

```
<ssm:getDom var="cm" xmlPath="/content/{lg}/{ct}/about/pagecopy/version-3/common.xml"/> 
```

然后，我的标签处理器将使用 cm 变量和给定路径中的文件来实例化 DOM ojbect。

可以想象，唯一需要的更新是：

```
<ssm:getDom var="cm" xmlPath="http://web-server-url.com/content/{lg}/{ct}/about/pagecopy/version-3/common.xml"/> 
```

我已经在浏览器中测试了 Web 服务器 URL 并且文件是可访问的，但是我在重新部署时遇到的错误是：

ServletException: org.jaxen.UnresolvableException: $:dom at org.apache.taglibs.standard.tag.common.xml.XPathUtil$JstlVariableContext.notNull (XPathUtil.java:160) at org.apache.taglibs.standard.tag.common .xml.XPathUtil$JstlVariableContext.getVariableValue(XPathUtil.java:100)

并且内容没有显示 - 如果我将 /content 文件夹放回我的主部署包中，它会再次显示正常。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T06:55:28.540

我尝试了虚拟目录映射，但它不起作用，因为 JSP 不直接呈现 XML，而是需要转换器来完成这项工作；我找到了我们正在使用的转换器，更新了 xmlPath 前缀并且它起作用了。

# perl - “解包中的无效类型't'”是什么意思？

> ID：13888527
> 
> 赞同：3
> 
> 时间：2012-12-15T01:41:25.567
> 
> 标签：perl

这行代码错误，“解包中的类型't'无效”：

```
my $x = unpack(chr(ord("a") + 19 + print ""), $string); 
```

它试图检索最初以这种方式转换的 $x 的原始值：

```
my $string = pack("u",$x); 
```

我在互联网上的任何地方都找不到这个错误。我基本上是在尝试制作一个简单的字符串混淆器，它可以检索原始字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T02:23:12.183

函数`print`在失败时返回 false。在数字上下文中，错误值被视为 0。在您的情况下，pack 的第一个参数变为“t”并且 Perl 引发错误。

请注意，这`print`可能会失败，通常是在您这样做的情况下`close STDOUT`。此外，成功时`print`返回**true**，不限于`1`. `2`在未来的版本中返回,`blah`或任何其他真实值的可能性很小。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-15T02:41:54.183

你到底为什么要这样做？你为什么要使用 print 来实现它的价值？的逆运算`$string = pack("u", $x);`很简单`$x = unpack("u", $string);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T13:36:05.667

诊断可以解释它:)

```
$ perl -Mdiagnostics -le " print unpack q{t} , 1"
Invalid type 't' in unpack at -e line 1 (#1)
    (F) The given character is not a valid pack or unpack type.
    See "pack" in perlfunc.
    (W) The given character is not a valid pack or unpack type but used to be
    silently ignored.

Uncaught exception from user code:
        Invalid type 't' in unpack at -e line 1.
 at -e line 1. 
```

# ios6 - 巨大的内存泄漏 UIImagePickerController

> ID：13888529
> 
> 赞同：0
> 
> 时间：2012-12-15T01:42:23.633
> 
> 标签：ios6, uiimagepickercontroller

我见过其他线程，但我的似乎更具戏剧性。我正在使用 UIImagePickerController 来允许用户选择或拍摄自己的照片。

这是一些代码：

```
if (([UIImagePickerController isSourceTypeAvailable:
          UIImagePickerControllerSourceTypeCamera] == NO))
        return NO;

    ImagePickingViewController *cameraUI = [ImagePickingViewController sharedImagePickingController];
    cameraUI.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

    cameraUI.allowsEditing = NO;

    cameraUI.delegate = self;

    [self presentViewController:cameraUI animated:YES completion:^{
        //do nothing
    }]; 
```

一旦执行此操作，我的内存分配就会从 ~3MB 变为 6MB 的活动内存。当我点击取消关闭视图时，内存保持在 6MB！如果我选择一张图片，它会更高，而且会崩溃很多次。

有任何想法吗？

我正在运行 iOS 6 而不是使用 ARC。

[编辑]：这是没有我的类包装器的代码。它做同样的事情 - 显示视图时泄漏 3MB 内存，即使在视图被关闭后也不会返回。

```
if (([UIImagePickerController isSourceTypeAvailable:
          UIImagePickerControllerSourceTypeCamera] == NO))
        return NO;

    UIImagePickerController *cameraUI = [[UIImagePickerController alloc] init];
    cameraUI.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

    cameraUI.allowsEditing = NO;

    cameraUI.delegate = self;

    [self presentViewController:cameraUI animated:YES completion:^{
        //do nothing
    }]; 
```

这是委托方法

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{
    NSLog(@"Image picker finished picking.");
    [self.navigationController dismissViewControllerAnimated:NO completion:^{
        //do nothing
    }];
    [self dismissViewControllerAnimated:NO completion:^{
        //do nothing
    }];

    UIImage *originalImage = (UIImage *)[info objectForKey:
                                    UIImagePickerControllerOriginalImage];
        //Do stuff with image
}

- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker{
    [loadingViewController.view removeFromSuperview];
    [self dismissViewControllerAnimated:YES completion:^{
        //Do stuff
    }];
} 
```

# restkit - RestKit 0.2 — RKManagedObjectRequestOperation targetObject == null

> ID：13888531
> 
> 赞同：2
> 
> 时间：2012-12-15T01:42:39.787
> 
> 标签：restkit, restkit-0.20

我不知道如何在 postOperation 上设置 targetObject。现在我所有的 postObject 方法都工作正常，并将响应数据从服务器映射到我的对象。但是 managedObjectRequestOperationWithRequest 并没有这样做，并且我为 targetObject 拥有的日志返回 null。

我尝试手动设置它（请参阅下面的代码注释） - 但随后我收到一条错误消息，提示托管对象上下文不匹配（一个为空）。这是因为线程吗？无论如何围绕这个？

```
// post image

// create request
postRequest = [RKObjectManager.sharedManager multipartFormRequestWithObject:media method:RKRequestMethodPOST path:path parameters:nil constructingBodyWithBlock:^(id<AFMultipartFormData> formData) {
    [formData appendPartWithFileData:media.imageData name:@"userfile[]" fileName:filename mimeType:@"image/jpeg"];
}];

// create operation
RKManagedObjectRequestOperation *postOperation = [RKObjectManager.sharedManager managedObjectRequestOperationWithRequest:postRequest managedObjectContext:viewController.managedObjectContext success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {

    NSLog(@"operation.targetObject: %@", operation.targetObject);

} failure:^(RKObjectRequestOperation *operation, NSError *error) {

    NSLog(@"post image error: %@", error);

}];
// postOperation.targetObject = media;

// enqueue operation
[RKObjectManager.sharedManager enqueueObjectRequestOperation:postOperation];

// monitor upload progress
[postOperation.HTTPRequestOperation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
    NSLog(@"bytesWritten: %d, totalBytesWritten: %lld, totalBytesExpectedToWrite: %lld", bytesWritten, totalBytesWritten, totalBytesExpectedToWrite);
}]; 
```

这是我在注释掉 postOperation.targetObject = media; 时收到的错误。

```
2012-12-14 20:04:36.256 Keepsayk Alpha[1966:1503] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Serious Core Data error: requested existing object with ID 0x1f805a30 <x-coredata:///Media/t0FEC53CF-F383-4E7E-8568-38F42EA839453> in context <NSManagedObjectContext: 0x1fa9a790>, instead got an object reference in context (null). This may indicate that the objectID for your target managed object was obtained using `obtainPermanentIDsForObjects:error:` in the wrong context.' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:17:13.890

您的异常可能正在发生，因为`NSManagedObject`它在进入请求操作时具有临时托管对象 ID。如果需要，您可以通过获取该永久 ID 来回到第一个实现。`RKManagedObjectRequestOperation`如有必要，更新以在所有情况下仅获取 ID 而不是抛出警告可能是有意义的。

否则，您的子类实现看起来像是一个很好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T18:37:22.953

通过在 RKObjectManager 中创建我自己的方法来修复：

```
- (RKManagedObjectRequestOperation *)managedObjectRequestOperationWithRequest:(NSURLRequest *)request
                                                                       object:(id)object
                                                         managedObjectContext:(NSManagedObjectContext *)managedObjectContext
                                                                      success:(void (^)(RKObjectRequestOperation *operation, RKMappingResult *mappingResult))success
                                                                      failure:(void (^)(RKObjectRequestOperation *operation, NSError *error))failure
{
    RKManagedObjectRequestOperation *operation = [[RKManagedObjectRequestOperation alloc] initWithHTTPRequestOperation:[self HTTPOperationWithRequest:request] responseDescriptors:self.responseDescriptors];
    [operation setCompletionBlockWithSuccess:success failure:failure];
    operation.managedObjectContext = managedObjectContext;
    operation.managedObjectCache = self.managedObjectStore.managedObjectCache;
    operation.fetchRequestBlocks = self.fetchRequestBlocks;

    if ([object isKindOfClass:[NSManagedObject class]] && [[object objectID] isTemporaryID]) {
        RKLogInfo(@"Asked to perform object request with NSManagedObject with temporary object ID: Obtaining permanent ID before proceeding.");
        __block BOOL _blockSuccess;
        __block NSError *_blockError;

        [[object managedObjectContext] performBlockAndWait:^{
            _blockSuccess = [[object managedObjectContext] obtainPermanentIDsForObjects:@[object] error:&_blockError];
        }];
        if (! _blockSuccess) RKLogWarning(@"Failed to obtain permanent ID for object %@: %@", object, _blockError);
    }
    operation.targetObject = object;

    return operation;
} 
```

# css - CSS复选框/切换间距问题

> ID：13888533
> 
> 赞同：1
> 
> 时间：2012-12-15T01:42:55.027
> 
> 标签：css

我正在尝试重新创建一个类似 iPhone 的复选框/切换区域。结果应如下所示（注意切换按钮之间的干净间距）

![切换](../Images/dc1e1dcacacf09c7d6858d141d8ec509.png)

但是，我遇到了切换/复选框之间的间距问题。它们没有被看起来像〜10px的填充隔开，而是在彼此的`.togglebox`正下方排列。我试过`margin`, `padding`, `width`,`height`等，但没有任何运气。

这是我目前的编码：http: [//jsfiddle.net/eHnn5/1/](http://jsfiddle.net/eHnn5/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T01:54:41.573

您需要在 #toggleboxcategories 中添加 height 属性，因为子元素是绝对定位的，在这种情况下将不会使用填充或边距。

希望能帮助到你。

# python - 使用输入 tpe="image" 的 python mechanize 提交

> ID：13888534
> 
> 赞同：3
> 
> 时间：2012-12-15T01:43:09.593
> 
> 标签：python, login, submit, web-scraping, mechanize

我想单击/提交一个图像类型的按钮

`<input type="image" onclick="javascript:return showhide();" src="IMAGES/login.gif" name="submit">`

我尝试了以下

```
mech = mechanize.Browser(factory=mechanize.RobustFactory())
mech.open(url)
mech.select_form(nr=0)
mech["username"] = options.user
mech["password"] = options.pswd
results = mech.submit().read() 
```

但结果仍然只包含登录页面。如何使用 python mechanize 模拟点击类型为图像的提交。

# python - SQLAlchemy中的PostgreSQL多维数组，不确定语法

> ID：13888537
> 
> 赞同：2
> 
> 时间：2012-12-15T01:43:39.033
> 
> 标签：python, postgresql, sqlalchemy

我在声明性基础中使用 PostgreSQL 和 SQLAlchemy 为我的数据库创建了一个模式，并遇到了一个我认为已经回答的问题，但我在某种程度上弄错了语法。

我正在考虑有一个多维数组的条目（我只需要 2D，但我想我会要求一个 n 维数组解决方案，以防遇到其他问题）。我基本上需要，`some_field[string][string]`但不确定如何做到这一点。

```
class SomeTable(Base):
    __tablename__ = 'some_table'
   multi_d_array = Column(postgresql.ARRAY(String)) #How do I make 2D+? 
```

较早版本的维度显然未强制执行（链接：[SQLAlchemy 中的 PostgreSQL 多维数组](https://stackoverflow.com/questions/9729175/postgresql-multidimensional-arrays-in-sqlalchemy)），但显然已对此进行了修补（链接：[https](https://groups.google.com/forum/?fromgroups=#!topic/sqlalchemy/w4-nbMdxxUg) ://groups.google.com/forum/?fromgroups=#!topic/sqlalchemy/w4-nbMdxxUg ）。文档仍然说它没有强制执行（链接：[http](http://docs.sqlalchemy.org/en/latest/dialects/postgresql.html) ://docs.sqlalchemy.org/en/latest/dialects/postgresql.html ），但我只是想确保代码在我的数据库崩溃之前正常工作。

感谢您帮助我解决我的新手问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T04:40:12.850

Postgresql 本身并不强制数组的维数——所有数组都是 N 维的，即使你指定了特定的维数。从链接的电子邮件：

[http://www.postgresql.org/docs/9.1/static/arrays.html](http://www.postgresql.org/docs/9.1/static/arrays.html)

“当前的实现也不强制声明的维数。特定元素类型的数组都被认为是同一类型，无论大小或维数如何。因此，在 CREATE 中声明数组大小或维数TABLE 只是文档；它不会影响运行时行为。”

在 SQLAlchemy 0.8 中，ARRAY 类型现在包含一个可选参数“dimension=N”，您可以给它指定维数，这将允许 SQLAlchemy 类型在 Python 中更快地处理传入的数组数据（它不需要猜测维度的数量），并使其专门发出具有该维度数量的 DDL（即 CREATE TABLE），但如果没有此参数，一切仍将按原样工作。您所指的电子邮件是一个用户，他希望它在发出 DDL 时以确切的维度数说“INTEGER [] []”，但实际上没有必要。

# javascript - Live draggable div - 位置，排序奇怪的行为

> ID：13888539
> 
> 赞同：1
> 
> 时间：2012-12-15T01:43:58.150
> 
> 标签：javascript, jquery-ui, jquery-ui-sortable, jquery-ui-draggable

我用按钮将元素添加到绿色 div，然后我想拖动它们做红色 div。在拖动时（只是移动到红色元素）它会移动（或小跳跃）。看看我的小提琴： http: [//jsfiddle.net/KzWkS/](http://jsfiddle.net/KzWkS/)并尝试一下。

```
 jQuery(document).ready(function() {

        $('#pridaj').click(function(){
             $("<div style='border:1px solid black; position: relative;padding:3px;margin:2px;width:190px;float:left;' class='keyword'>"+$('#newArea').val()+"</div>").appendTo('#green');
            $('#newArea').val('');

        });
         $('.keyword').live('mouseover',function(){
            $('.keyword').draggable({connectToSortable:'#red'});
         });
    });

     $(function() {
         $( "#red" ).sortable();
         $( "#red" ).disableSelection();
    }); 
```

而且..如果我想把它们拖回来，它也会做这些事情......

可能定位有问题（绝对/相对），但我还没发现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T03:42:21.817

您不需要继续添加 .draggable 只需将绿色和红色设置为可排序的列并将它们链接起来。

我尝试将其浓缩并以稍微不同的方式进行。

顺便说一句，它有助于保持你的 CSS 独立而不是内联。这将有助于使事情更易于阅读、维护和更改。

```
<style type="text/css">  
    #pridaj {
        border:1px solid gray;
        background: white;
        border-radius: 2px;
        margin-left: 5px;
        margin-bottom: 2px;
    }      
    #green, #red {
        margin: 2px;
        margin-top: 8px;
        height:100px;
        width:200px;
    }
    #green {
        background: green;
    }
    #red {
        background: #ff9999;
    }
    .keyword {
        border:1px solid black;
        position: relative;
        padding:3px;
        margin:2px;
        width:190px;
        float:left;
    }
</style> 

<input type='text' id='newArea'/><button id='pridaj'>pridaj kluc slovo</button><br />
<div id='green' class="sortable"></div>
<div id='red' class="sortable"></div>

<script type="text/javascript">
$(function() {
    $(".sortable").sortable({
        connectWith: ".sortable"
    });

    $('#pridaj').click(function() {
        $("<div class='keyword'>" + $('#newArea').val() + "</div>").appendTo('#green');
        $('#newArea').val('');

    });

});           
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T11:39:42.563

为了更进一步并处理丢弃的元素，您可以将上面的代码调整为：

```
$(".sortable").sortable({
    connectWith: ".sortable",
    receive : function(event, ui) {
        alert("You just dropped "+ui.item.context.innerHTML);
    }
}); 
```

通过使用 ui.item.whatever 引用它，您可以对拖放的项目做任何您想做的事情（在这种情况下是一个说明内部 html 的警报）

使用 console.log(ui.item) 也很有帮助；

我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T11:45:41.613

这是我的工作。请注意，代码下方的演示略有不同，因此您不必每次都在输入中输入文本进行测试。

```
jQuery(document).ready(function() {
    var $red = $('#red'),
        $green = $('#green'),
        $pridaj = $('#pridaj'),
        $keyword = $('#keyword'),
        $keywords = $('<div class="keyword">');

    $red
        .disableSelection()
        .sortable({
            deactivate: helper,
            receive: helper
        });

    $pridaj.click(function(){
        $keywords
            .clone()
            .text($keyword.text())
            .appendTo($green)
            .disableSelection()
            .draggable({
                connectToSortable: $red,
                helper: "clone",
                revert: "invalid",
                start: helper,
                stop: helper
            });

        $keyword.one('focus', clear);
    });

    function clear() {
        this.value = '';
    }

    function helper(event, ui) {
        if (event.type == 'dragstart') {
            $(this).hide();
        }

        if (event.type == 'sortdeactivate') {
            $(ui.item).show();
        }

        if (event.type == 'dragstop') {
            $(this).filter(':hidden').remove();
        }
    }

});​ 
```

[http://jsfiddle.net/userdude/KzWkS/8/](http://jsfiddle.net/userdude/KzWkS/8/)

# redirect - 所有链接都被重定向

> ID：13888541
> 
> 赞同：0
> 
> 时间：2012-12-15T01:44:36.737
> 
> 标签：redirect, directory, http-status-code-404

我的网站上有一个非常奇怪的问题。由于目录混乱，指向另一个 html 页面的每个链接都被重定向到 404 页面。

例如我的网站是 www.mywebsite.com/en （注意它不在根目录，它在根目录的“en”文件夹中）。如果我有链接：

```
<a href="../site/page2.html">Link</a> 
```

它不会去 www.mywebsite.com/site/page2.html，而是去“http://www.mywebsite.com/home/username/public_html/site/page2/ **”**，这显然不存在. 为什么它被重定向到“/home/username/public_html”？

在我测试网页时，本地版本不会出现此错误。仅在我将其上传到主机（Hostgator）后才会发生。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T01:53:40.823

很难说。我猜你正在使用 apache，所以我会检查 url 映射。

可能它与 mod_userdir 有关：[将 URL 映射到文件系统位置](http://httpd.apache.org/docs/2.2/urlmapping.html)

# java - JAVA_HOME : java 安装在哪里

> ID：13888551
> 
> 赞同：4
> 
> 时间：2012-12-15T01:47:10.723
> 
> 标签：java, tomcat

我正在尝试设置 JAVA_HOME 以使 tomcat 7 无法成功工作。

我正在使用 CentOS 6.3。这是我到目前为止所做的：

哪个 java /usr/bin/java

所以我编辑了.bash_profile，我添加了

导出 JAVA_HOME=/usr/bin/java

没用。我在网上搜索并在stackoverflow上找到了另一个用户，他在/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/bin/java中找到了它

我在我的电脑上搜索，发现java位于/usr/lib/jvm/jre-1.6.0-openjdk/bin

然后我将 JAVA_HOME 更改为 export JAVA_HOME=/usr/lib/jvm/jre-1.6.0-openjdk/bin ，尝试启动tomcat但找不到服务器。

如何找到java的安装位置？我不是自己安装的；它是在 linux 安装期间安装的。

在此先感谢，迈克

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-15T02:08:49.293

`export JAVA_HOME=/usr`应该这样做。脚本运行`$JAVA_HOME/bin/java`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T02:55:01.717

严格正确的答案是这样的：

```
export JAVA_HOME=/usr/lib/jvm/jre-1.6.0-openjdk 
```

问题在于，在典型的 Linux 系统上，您通过`java`命令创建/管理的符号链接访问命令（等）`alternatives`。这允许您在系统范围内选择默认使用哪些 java 安装；即通过`/usr/bin`.

第二个问题是 JAVA_HOME 环境变量应该指向 Java 安装目录。“bin”目录是安装目录的子目录。（看“/usr/lib/jvm/jre-1.6.0-openjdk”的内容！！）

虽然`export JAVA_HOME=/usr/bin`可以用于定位命令，但如果 Java 应用程序需要在安装中查找其他文件，它将无法工作；例如“rt.jar”文件。

这种“细微差别”对于 Tomcat 可能无关紧要，但对于使用 JAVA_HOME 约定的其他 Java 软件可能很重要。

* * *

脚注：如果您使用 Oracle Java for Linux 安装，默认安装目录将是子目录“/usr/java”。遗憾的是，Oracle 安装程序不理解 Linux“替代”系统。您要么必须手动注册每个 Java 命令的替代项（繁琐！！），要么将安装的“bin”目录添加到 PATH。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-16T12:22:39.137

/usr/bin 包含你所有的二进制文件；您的实际 JRE 或 JVM 可能安装在其他地方，因此您可以在 /usr/bin 运行一个简单的命令来获取 java 的实际位置。

```
ls -lrt 
```

二进制文件可能看起来像（[软链接](https://www.geeksforgeeks.org/soft-hard-links-unixlinux/)）：

```
java -> /usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/bin/java 
```

好的; 现在我们知道 java 安装在哪里，我们现在可以将 JAVA_HOME 导出到 bin 上方的一个文件夹，即 /usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/。

```
export JAVA_HOME=/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/ 
```

# perl - Perl 模块解析干净的 URL

> ID：13888552
> 
> 赞同：1
> 
> 时间：2012-12-15T01:47:27.640
> 
> 标签：perl, parsing, url, perl-module, slug

我知道如何为我的网站创建 slug，所以不要像这样的 URL：

```
www.site.com/index.cgi?article=12 
```

我创建这样的 URL：

```
www.site.com/article/12 
```

我的问题是存在哪些 Perl 模块（如果有）来解析这些？我已经在 Python 中使用 WSGI 完成了这项工作，但不知道在 Perl 中从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T03:36:09.940

您所说的*slug*实际上是一个*干净的 URL*。slug 是 URL 中标识资源的部分——在这种情况下`article/12`或者只是`12`.

干净的 URL 只是一个 URL，HTTP 服务器上的重写规则通常用于将其转换为包含必要资源和查询的表单。

可以使用该[`URI`](https://metacpan.org/module/URI)模块解析 URL，但我不清楚您想要做什么。在这种情况下，您也可以将 URL 字符串拆分为斜杠。没有从不干净的 URL 生成干净 URL 的通用方法，因为转换完全取决于服务器上的重写规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T16:11:32.357

您问的是解析这些 URL，但我认为您真正的意思是，“我如何创建一个使用这种 URL 样式的 Web 应用程序，并轻松地将 URL 调用分派给具有正确参数的函数调用？”。

如果您使用的是流行的 Web 框架之一，这将是该框架提供的核心功能之一：

*   [Mojolicious 路由](http://mojolicio.us/perldoc/Mojolicious/Guides/Routing)
*   [催化剂连锁动作](https://metacpan.org/module/Catalyst%3a%3aManual%3a%3aTutorial%3a:04_BasicCRUD#CONVERT-TO-A-CHAINED-ACTION)
*   [舞者命名匹配](https://metacpan.org/module/Dancer%3a%3aIntroduction#NAMED-MATCHING)

If you're not already using a framework, well, picking one, or even deciding if you need one at all, is a whole other question. Still, you could do worse that working through, say, the [Mojolicious tutorial](http://mojolicio.us/perldoc/Mojolicious/Lite#NAME) to see if it seems like something that would make your project easier to develop.

# elisp - 如何通过 elisp 中的 make-network-process 制作套接字侦听服务器？（提供一个例子也许）

> ID：13888555
> 
> 赞同：1
> 
> 时间：2012-12-15T01:48:20.553
> 
> 标签：elisp

我阅读了 elisp 的网络服务器手册，但我找不到编写套接字侦听服务器。函数“make-network-process”的一些谜题：

1.  如何绑定服务器？
2.  如何接受客户端连接并创建一个新的网络进程？
3.  如何通过新创建的网络进程与客户端进程通信？

有没有关于网络服务器的代码片段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T22:46:57.210

`make-network-process`将创建一个监听服务器，将其绑定到给定的端口。为此，您只需要`:server t`在关键字参数中指定。

客户端连接将自动被接受并自动创建新的网络进程。Elisp 代码可以在新连接进入时进行设置，因为`process-sentinel`在这种情况下会调用该函数。

与客户端的通信是通过在接受客户端连接时创建的网络进程进行的。此过程将像任何其他过程一样使用，即 via `process-filter`, `process-send-string`, ...

您可以查看`server.el`代码（`C-h f server-start`应该是一个很好的入口点）以获得一个相当简单的示例。

# javascript - 将 textarea 字段 scrollheight 属性转换为 HTML 'rows'

> ID：13888557
> 
> 赞同：1
> 
> 时间：2012-12-15T01:48:44.790
> 
> 标签：javascript, html, textarea

我正在尝试将使用 java 脚本的“scrollheight”属性获得的 textarea 字段的高度转换为 HTML 的“rows”属性。有人知道怎么做吗？

我正在捕获/存储滚动高度并更改文本区域的高度，以便在下一次加载该文本区域时，它会记住高度。这一切都很好......除了我需要一种可靠的方法来为所有浏览器进行转换。如果我不能转换，我还能怎么做？我是否必须加载表单然后运行 ​​java 代码来调整所有 textarea 高度？我正在使用的代码如下。

我使用触发以下代码的 textarea mouseup 事件

```
function settextareaheight(t, id){
var height = document.getElementById(id);
height.value = t.scrollHeight ;
} 
```

它获取 textarea 的 scrollHeight 并将其保存到表单字段（然后是带有帖子的数据库）。

我用 HTML 和 php 显示 textarea （表单上有许多 textarea 字段以及相应的文本字段来存储它们的“scrollheight”属性，因此 textarea mousdown 传递其相应文本字段的唯一 ID）：

```
<textarea readonly cols="80" rows="1" style="max-width:625px; min-width:625px" onmouseup ="settextareaheight(this, '<? echo 'gheight'.$i ?>')"><? echo htmlspecialchars($gem['descr']) ?></textarea> 
```

# c# - 从面板中删除动态控件

> ID：13888558
> 
> 赞同：21
> 
> 时间：2012-12-15T01:48:52.543
> 
> 标签：c#, winforms, panel, dynamic-controls

我在窗体的面板上动态生成了控件，并且还生成了一个用于删除控件的按钮，所有这些都成行。

```
int c = 0;
private void button1_Click(object sender, EventArgs e)
{
    int v;
    v = c++;
    panel1.VerticalScroll.Value = VerticalScroll.Minimum;
    ComboBox combo = new ComboBox();
    combo.Name = "combobox" + v ;
    combo.Location = new Point(30, 5 + (30 * v));

    ComboBox combo2 = new ComboBox();
    combo2.Name = "combobox2" + v ;
    combo2.Location = new Point(170, 5 + (30 * v));

    TextBox txt = new TextBox();
    txt.Name = "txtbx" + v;
    txt.Location = new Point(300, 5 + (30 * v));

    TextBox txt2 = new TextBox();
    txt2.Name = "txtbx2" + v;
    txt2.Location = new Point(450, 5 + (30 * v));

    TextBox txt3 = new TextBox();
    txt3.Name = "txtbx3" + v;
    txt3.Location = new Point(600, 5 + (30 * v));

    Button btn = new Button();
    btn.Name = "btn" + v;
    btn.Text = "Remove";
    btn.Location = new Point(750, 5 + (30 * v));
    panel1.Controls.Add(combo);
    panel1.Controls.Add(btn);
    panel1.Controls.Add(txt);
    panel1.Controls.Add(combo2);
    panel1.Controls.Add(txt2);
    panel1.Controls.Add(txt3);
    btn.Click += new EventHandler(btn_Click);
    combo.Tag = btn; 
    combo2.Tag = combo; 
    btn.Tag = combo2;

}

 private void btn_Click(object sender, EventArgs e)
 {
     ComboBox cb3 = btnh.Tag as ComboBox;
     ComboBox cb4 = cb3.Tag as ComboBox;
     panel1.Controls.Remove(cb3);
     panel1.Controls.Remove(cb4);
     panel1.Controls.Remove(btnh);
  } 
```

现在如何在单击该行中的按钮时从该行中删除所有控件？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-15T02:29:33.297

您仍然没有说出要删除的控件、要删除的控件类型或要如何识别它们。

您可以通过控件循环删除特定控件。

如果你有`Linq`，它很容易：

```
private void btn_Click(object sender, EventArgs e)
{
    panel1.Controls.Clear(); //to remove all controls

    //to remove all comboboxes
    foreach (Control item in panel1.Controls.OfType<ComboBox>().ToList())
    {
        panel1.Controls.Remove(item); 
    }

   //to remove control by Name
    foreach (Control item in panel1.Controls.OfType<Control>().ToList())
    {
        if (item.Name == "bloodyControl")
            panel1.Controls.Remove(item); 
    }

    //to remove just one control, no Linq
    foreach (Control item in panel1.Controls)
    {
        if (item.Name == "bloodyControl")
        {
             panel1.Controls.Remove(item);
             break; //important step
        }
    }
} 
```

* * *

**编辑：**

由于您已经标记了控件，因此很容易做同样的事情。您只需要从标签中检索控件即可。**但是您需要适当地标记：**

改为这样做：

```
private void button1_Click(object sender, EventArgs e)
{
    int v;
    v = c++;
    panel1.VerticalScroll.Value = VerticalScroll.Minimum;

    Button btn = new Button();
    btn.Name = "btn" + v;
    btn.Text = "Remove";
    btn.Location = new Point(750, 5 + (30 * v));
    btn.Click += new EventHandler(btn_Click);

    ComboBox combo = new ComboBox();
    combo.Name = "combobox" + v ;
    combo.Location = new Point(30, 5 + (30 * v));
    combo.Tag = btn;

    ComboBox combo2 = new ComboBox();
    combo2.Name = "combobox2" + v ;
    combo2.Location = new Point(170, 5 + (30 * v));
    combo2.Tag = btn;

    TextBox txt = new TextBox();
    txt.Name = "txtbx" + v;
    txt.Location = new Point(300, 5 + (30 * v));
    txt.Tag = btn;

    TextBox txt2 = new TextBox();
    txt2.Name = "txtbx2" + v;
    txt2.Location = new Point(450, 5 + (30 * v));
    txt2.Tag = btn;

    TextBox txt3 = new TextBox();
    txt3.Name = "txtbx3" + v;
    txt3.Location = new Point(600, 5 + (30 * v));
    txt3.Tag = btn;

    panel1.Controls.Add(combo);
    panel1.Controls.Add(btn);
    panel1.Controls.Add(txt);
    panel1.Controls.Add(combo2);
    panel1.Controls.Add(txt2);
    panel1.Controls.Add(txt3);    
}

private void btn_Click(object sender, EventArgs e)
{
   //to remove control by Name
    foreach (Control item in panel1.Controls.OfType<Control>().ToList())
    {
        if (item.Tag == sender || item == sender)
            panel1.Controls.Remove(item); 
    }
} 
```

在这里，您使用按钮标记控件，因此在单击按钮时，您可以删除其标签是从`sender`参数中获得的单击按钮的所有控件。但是这种方法的缺点是您必须枚举面板的所有控件，这不是很好。

**编辑：当我了解到以下代码是针对 OP 目前未使用的表格布局面板时。但无论如何，表格面板布局更适合这项工作。**

我建议你这样做：

```
private void button1_Click(object sender, EventArgs e)
{
    int v;
    v = c++;
    panel1.VerticalScroll.Value = VerticalScroll.Minimum;

    Button btn = new Button();
    btn.Name = "btn" + v;
    btn.Text = "Remove";
    btn.Location = new Point(750, 5 + (30 * v));
    btn.Click += new EventHandler(btn_Click);
    btn.Tag = v;

    ComboBox combo = new ComboBox();
    combo.Name = "combobox" + v ;
    combo.Location = new Point(30, 5 + (30 * v));
    combo.Tag = v;

    ComboBox combo2 = new ComboBox();
    combo2.Name = "combobox2" + v ;
    combo2.Location = new Point(170, 5 + (30 * v));
    combo2.Tag = v;

    TextBox txt = new TextBox();
    txt.Name = "txtbx" + v;
    txt.Location = new Point(300, 5 + (30 * v));
    txt.Tag = v;

    TextBox txt2 = new TextBox();
    txt2.Name = "txtbx2" + v;
    txt2.Location = new Point(450, 5 + (30 * v));
    txt2.Tag = v;

    TextBox txt3 = new TextBox();
    txt3.Name = "txtbx3" + v;
    txt3.Location = new Point(600, 5 + (30 * v));
    txt3.Tag = v;

    panel1.Controls.Add(combo);
    panel1.Controls.Add(btn);
    panel1.Controls.Add(txt);
    panel1.Controls.Add(combo2);
    panel1.Controls.Add(txt2);
    panel1.Controls.Add(txt3);    
}

private void btn_Click(object sender, EventArgs e)
{
    int toBeDeletedRow = (int)((Control)sender).Tag;
    for (int row = panel1.RowCount - 1; row >= 0; row--)
    {
        if (row == toBeDeletedRow)
        {
            panel1.RowStyles.RemoveAt(row);
            panel1.RowCount--;
            return;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-12T13:52:00.397

如果您有一个面板或其他包含更多动态组件的容器，**用于删除所有或多个**组件，您可以通过这种方式进行操作。

在第一步中，您将组件加载到数组或列表中。

```
List<PersonalUserControl> lst = new List<PersonalUserControl>();

foreach (Object obj in this.PanelImplementationTeam.Controls)
{     
    //DO NOT REMOVE COMPONENT IN THIS LOOP BECAUSE
    //YOU DECREASE THE .Controls  ARRAY AND YOU WILL HAVE AN ERROR      
    if (obj is PersonalUserControl)
    {
        lst.Add((PersonalUserControl)obj);
    }
}

foreach(PersonalUserControl uc in lst)
{
    uc.Dispose();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-16T03:51:33.483

如果您要删除的所有控件都在面板中，您可以执行以下操作： `panel.Controls.Clear();` 清除面板中的所有控件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-05T19:06:35.570

删除控制事件。[来自 MSDN](http://msdn.microsoft.com/en-us/library/82785s1h(v=vs.80).aspx)：

> ### 以编程方式从集合中删除控件
> 
> 1.  从事件中删除事件处理程序。在 Visual Basic 中，使用[RemoveHandler 语句](http://msdn.microsoft.com/en-us/library/3xz97kac(v=vs.80).aspx)关键字；在 Visual C# 中，使用[-= 运算符（C# 参考）](http://msdn.microsoft.com/en-us/library/2y9zhhx1(v=vs.80).aspx)。
> 2.  使用**Remove**方法从面板的**Controls**集合中删除所需的控件。
> 3.  调用[Dispose](http://msdn.microsoft.com/en-us/library/a4zkb31d(v=vs.80).aspx)方法释放控件使用的所有资源。

链接页面中使用VB和C#给出了具体示例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-22T13:05:30.457

由于控件是在运行时添加的，所以在使用`findName`方法之前注册它们`register`。

```
StackPanel sp = new StackPanel
{
   Name = "mySP",
   Orientation = Orientation.Horizontal,
};

//need to register the control to find it by name
RegisterName(sp.Name, sp);

//now to find control by name 
StackPanel sp = (StackPanel)mainStackPanel.FindName("mySP");

//deleting the control found
mainStackPanel.Children.Remove(sp);

//if you need to use the same name again, you have to unregister too
UnregisterName(sp.Name); 
```

# javascript - Three.js 透明度/差异

> ID：13888561
> 
> 赞同：11
> 
> 时间：2012-12-15T01:49:24.390
> 
> 标签：javascript, 3d, transparency, three.js

我是threejs的新手，我正在尝试制作一个简单的3d模型。尽管如此，自从我开始使用不透明度以来，我遇到了一些透明度/差异问题。

我的代码的重要部分在这里：

```
 var cylJaun = new THREE.MeshNormalMaterial({color: 0xFFFF00, opacity: 1});
    var cylBleu = new THREE.MeshNormalMaterial({color: 0x0000FF, opacity: 0.5 });

    var cylJaun1 = new THREE.Mesh(new THREE.CylinderGeometry(50,50,50,100,1,false),cylJaun);
    var cylJaun2 = new THREE.Mesh(new THREE.CylinderGeometry(50,50,50,100,1,false),cylJaun);
    var cylJaun3 = new THREE.Mesh(new THREE.CylinderGeometry(50,50,50,100,1,false),cylJaun);

    var cylBleu1 = new THREE.Mesh(new THREE.CylinderGeometry(70,70,200,100,1,false),cylBleu);

    cylJaun1.position.y -= 60; 
    cylJaun3.position.y += 60; 

    group.add(cylBleu1);

    group.add(cylJaun1);
    group.add(cylJaun2);
    group.add(cylJaun3);

    scene.add(group); 
```

如您所见，我尝试将 3 个圆柱体放入第四个。问题是当我的对象在特定范围内旋转时，这 3 个圆柱体中的一些会消失。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-15T02:09:36.227

您需要`transparent: true`为较大的圆柱体设置材料。

```
var cylBleu = new THREE.MeshNormalMaterial( { transparent: true, opacity: 0.5 } ); 
```

如果您是初学者，那么您将通过尝试透明度来跳入深渊。

WebGL 的透明度可能很棘手。如果您打算继续走这条路，请疯狂地谷歌搜索，并尽可能了解所涉及的问题，以及如何在 three.js 中处理这些问题。

三.js r.53

# python - Python底图drawgreatcircle函数

> ID：13888566
> 
> 赞同：3
> 
> 时间：2012-12-15T01:50:18.657
> 
> 标签：python, map, matplotlib-basemap

嗨，我正在尝试使用 Basemap 中的 Greatcircle 函数（matplot lib 的一部分）将 IP 地址图映射到世界地图上，但每次我连接跨越太平洋的两个点（即美国西海岸的某个地方和澳大利亚）有一条水平线出现在我的情节中。

我知道这是因为这个问题：

```
Note Cannot handle situations in which the great circle intersects the edge of the map projection domain, and then re-enters the domain. (http://matplotlib.org/basemap/api/basemap_api.html#mpl_toolkits.basemap.Basemap.drawgreatcircle) 
```

只是想知道是否有人知道如何修复它或知道另一个没有这个问题的包。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T09:40:11.840

要在 Basemap 中针对特定情况解决此问题，您可以检查结果路径中 x 顶点的差异。从那里，我们可以将坏路分成两部分。我已经将自己的示例与底图放在一起：

```
from mpl_toolkits.basemap import Basemap
import numpy as np
import matplotlib.pyplot as plt

m = Basemap(projection='cyl', lon_0=0, resolution='c')

m.fillcontinents(color='coral',lake_color='aqua')
m.drawmapboundary(fill_color='aqua')

places = {'Mexico City': (19.05, -99.366667),
          'London': (51.507222, -0.1275),
          'Sydney': (-33.859972, 151.211111),
          'Cape Town': (-33.925278, 18.423889),
          'Delhi': (28.61, 77.23),
          }

network = [
           ('London', 'Delhi'),
           ('Mexico City', 'Sydney'),
           ]

for source, target in network:
    lat1, lon1 = places[source]
    lat2, lon2 = places[target]
    line, = m.drawgreatcircle(lon1, lat1, lon2, lat2, lw=3)

    p = line.get_path()
    # find the index which crosses the dateline (the delta is large)
    cut_point = np.where(np.abs(np.diff(p.vertices[:, 0])) > 200)[0]
    if cut_point:
        cut_point = cut_point[0]

        # create new vertices with a nan inbetween and set those as the path's vertices
        new_verts = np.concatenate(
                                   [p.vertices[:cut_point, :], 
                                    [[np.nan, np.nan]], 
                                    p.vertices[cut_point+1:, :]]
                                   )
        p.codes = None
        p.vertices = new_verts

plt.show() 
```

结果：

![示例输出](../Images/192fc3dd6e651913a8ddd5b9ae6d3ba4.png)

这不是一个通用的解决方案，只有当你有纬度和经度时才有效。解决一般问题要困难**得多，**并且是[cartopy 的重点 (http://scitools.org.uk/cartopy/docs/latest/)](http://scitools.org.uk/cartopy/docs/latest/)。在接下来的几天里，我将在 cartopy 中发布一个完全相同的情节的例子。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:40:28.477

另一个没有这个问题的包：cartopy（目前尚未公布）。[此处](http://scitools.org.uk/cartopy/docs/latest/matplotlib/intro.html#adding-data-to-the-map)找到的示例是相关的。

高温高压

# php - 选择跨越 2 年 (2012-2013) 的所有生日

> ID：13888570
> 
> 赞同：0
> 
> 时间：2012-12-15T01:51:30.800
> 
> 标签：php, mysql, comparison, date-comparison

只是好奇是否有人可以就这个使用 MySQL 查找生日的问题给我一些指导。

我目前有一个设置的“日历”，它显示该月前 1 个月 + 3 天和该月后 3 天。

我遇到了一个当前出现的问题，因为过去 3 天的“年份”不一样，因为它将是 2013 年。所以我从 MySQL 中选择的代码是这样的

```
SELECT * FROM contacts WHERE userId = '23' AND Month(dob) IN('12', '01', '01') 
```

现在我需要得到一个更好的日期比较，我认为。我的代码是我有 2 个日期 (2012-12-01) - (2013-01-30)

我知道有人问过这样的问题，但我找不到任何“体面”的东西......如果可能的话，你能帮助我，将不胜感激。

简而言之，我认为我只需要一种更好的方法来“查询”我的日期......提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T02:09:35.183

您可以像这样查询范围内的日期：

```
 SELECT * 
   FROM contacts
  WHERE dob >= :first_date - INTERVAL 3 DAY
    AND dob < :first_date + INTERVAL 1 MONTH + INTERVAL 3 DAY + INTERVAL 1 DAY 
```

有一点点猴子生意

```
 dob < (something) 
```

加入额外的一天，并使用`<`而不是`<=`. 那是因为`DATETIME`值在他们的时间里不一定有午夜。因此，我们希望在*第二天*午夜之前包含所有内容。

除此之外，此查询查找日期在指定范围内的所有行。

如果您正在使用当前日期，正如 Algomorph 所提到的，您可以像这样将当前日期截断为当前月份的第一天。

```
 CAST(DATE_FORMAT(CURRENT_DATE,'%Y-%c-01') AS DATE) 
```

这会让你得到这样的查询。

```
 SELECT * 
   FROM contacts
  WHERE dob >= CAST(DATE_FORMAT(CURRENT_DATE,'%Y-%c-01') AS DATETIME) 
                          - INTERVAL 3 DAY
    AND dob < CAST(DATE_FORMAT(CURRENT_DATE,'%Y-%c-01') AS DATETIME)
                           + INTERVAL 1 MONTH + INTERVAL 3 DAY + INTERVAL 1 DAY 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T02:14:15.780

尝试类似：

```
SELECT * 
FROM contacts 
WHERE userId = '23' 
   AND dob BETWEEN 
     (CURRENT_DATE - INTERVAL (DAYOFMONTH(CURRENT_DATE)+3) DAY) 
     AND ((CURRENT_DATE + INTERVAL 1 MONTH) + INTERVAL 3 DAY); 
```

免责声明：这是我的想法，所以请测试语法。注意：这是假设您的 [dob] 字段仅是 DATE，而不是 DATETIME。如果使用 DATETIME/TIMESTAMP，[则转换为 DATE 或相应地调整上限和下限](https://stackoverflow.com/questions/5080824/mysql-between-clause-not-inclusive)。

# php - 如何将mysql查询行值传递给php函数

> ID：13888571
> 
> 赞同：0
> 
> 时间：2012-12-15T01:52:14.933
> 
> 标签：php, mysql

在我的 php 脚本中，我有这个 mysql 查询：

```
$sql = "CREATE OR REPLACE VIEW search_best_rates_view AS SELECT *, 
         ".$this->get_rates(187,'2012-12-14','2012-12-18')."
          as my_best_rate FROM search_result_view 
       ";

mysql_query ( $sql ); 
```

效果很好（1,5s 查询时间）。

问题：有没有办法替换 php 函数中的任何常量

```
.$this->get_rates($i,$a,$d) 
```

例如在这个例子中：'187' 带有一个 mysql 行值

```
 search_result_view.my_ID 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T02:51:40.457

诸如数据定义语言 (DDL) 语句`CREATE OR REPLACE VIEW`在传递给 MySQL 服务器以运行时不能包含任何绑定变量。

因此，您可以使用 PHP（或任何其他客户端语言）做任何您想做的事情来创建 DDL 语句。如果愿意，您可以从 MySQL 表中获取值。但是当您将 DDL 语句作为查询发出时，它必须是一个干净的文本字符串。

看起来您正在尝试将 DDL 放在一起，如下所示：

```
 CREATE OR REPLACE VIEW search_best_rates_view AS 
           SELECT *, 
                  123.45 as my_best_rate 
             FROM search_result_view 
```

那可行。像这样的东西也会这样：

```
 CREATE OR REPLACE VIEW search_best_rates_view AS 
           SELECT *, 
                  (SELECT MIN(rate) FROM rates) as my_best_rate 
             FROM search_result_view 
```

但是，从你的问题来看，你想要做什么并不完全清楚。

# android - Android布局中ListView下方的粘滞页脚

> ID：13888574
> 
> 赞同：2
> 
> 时间：2012-12-15T01:52:50.503
> 
> 标签：android, listview, android-linearlayout, sticky-footer

我想在 ListView 的底部放置一个广告布局。我希望它贴在页面底部，并且列表视图几乎滚动到它后面。

这就是我所拥有的，但它不起作用：

```
<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:longClickable="true" >
</ListView>

<LinearLayout
    android:id="@+id/adLayout"
    android:layout_width="wrap_content"
    android:layout_height="50dp"
    android:layout_gravity="center_horizontal" >
</LinearLayout> 
```

我需要留在底部的就是底部的 LinearLayout。我希望 ListView 一直到底部。任何人都可以建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T03:24:14.337

将您的属性更改`ListView`为：

```
<ListView
  android:id="@android:id/list"
  android:layout_width="fill_parent"
  android:layout_height="0dp"
  android:layout_weight="1"
  android:longClickable="true" >
</ListView> 
```

编辑：还要检查您的代码的父布局是否`LineareLayout`具有属性`android:orientation="vertical"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T03:54:07.993

这是您问题的解决方案

```
<?xml version="1.0" encoding="utf-8"?> <RelativeLayout xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" xmlns:android="http://schemas.android.com/apk/res/android">

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/adView"
        android:layout_alignParentTop="true" >

    </ListView>

    <com.google.ads.AdView
        android:id="@+id/adView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        ads:adSize="BANNER"
        ads:loadAdOnCreate="true" >
    </com.google.ads.AdView>

</RelativeLayout> 
```

# javascript - Access-Control-Allow-Origin 不允许来源

> ID：13888575
> 
> 赞同：1
> 
> 时间：2012-12-15T01:53:23.970
> 
> 标签：javascript, html, ajax

```
function getTotalResultsInfo(gAuthor, gOther) {
// Generate correct http request
var url_to_get = "http://scholar.google.com/scholar?as_q=" + gOther + "&num=" + ret_results + "&as_sauthors=" + gAuthor;

$.getJSON(url_to_get, function (data) {
    totalCount(data);
    document.getElementById("loading").style.display = "none";
});} 
```

它似乎不起作用，但给了我

**“XMLHttpRequest 无法加载[http://scholar.google.com/scholar?as_q=&num=100&as_sauthors=daniel](http://scholar.google.com/scholar?as_q=&num=100&as_sauthors=daniel)。 Access-Control-Allow-Origin 不允许来源“http://localhost:4448”**。”

我的朋友告诉我这是一个跨域ajax问题。但我不知道如何使它工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T02:53:49.967

出于安全原因，[Access-Control-Allow-Origin](https://developer.mozilla.org/en-US/docs/HTTP_access_control)标头对于使用 XMLHttpRequest 从不同来源（协议、主机名和端口号的组合）加载数据是必要的。

如果站点 (scholar.google.com) 是您的，您可以更改服务器端代码以发送该标头。但是，它是第三方网站，因此您不能这样做。缺少诸如[JSONP](https://stackoverflow.com/questions/2067472/please-explain-jsonp) API 之类的替代访问方法，只有一种方法可以绕过限制。

您需要在您的 Web 服务器上设置一个[代理脚本](http://developer.yahoo.com/javascript/howto-proxy.html)，您可以使用 C#、Perl、PHP、Python、Ruby 或任何其他编程语言编写它。从 Web 浏览器的角度来看，jQuery 连接到您的服务器，而不是 Google。从 Google 的角度来看，连接将来自您的服务器，而不是来自您的网络浏览器。

如果 Web 服务器可以公开访问，您必须锁定代理脚本以防止滥用（例如，黑客使用它来攻击另一个网站）。然而，说到滥用，还有一个更直接的问题。Google 可能会认为您的查询违反了他们的服务条款，他们可能随时阻止您的访问。有一些方法可以避免被抓住，尽管它们不在您的问题范围之内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T01:57:43.953

您可以通过在服务器上的网页标题中添加 Access-Control-Allow-Origin: * 来实现这一点。如果您拥有服务器但不会成为 Google 页面的选项，那很好，您需要以不同的方式而不是直接通过 AJAX 检索数据。

# java - 从 Android 中的参数分配集合的首选方法是什么？

> ID：13888577
> 
> 赞同：1
> 
> 时间：2012-12-15T01:53:27.953
> 
> 标签：java, android

[这个问题](https://stackoverflow.com/questions/2369693/whats-the-preferred-way-to-assign-a-collection-from-a-parameter)提出了围绕代码的问题，如下所示（从那个问题复制）：

```
public MyClass {
    public void initialize(Collection<String> data) {
        this.data = data; // <-- Bad!
    }
    private Collection<String> data;
} 
```

存储引用会通过不小心将数据注入私有字段来打开错误之门`data`。Aaron Digulla 接受的答案建议`Collection.setUnmodifiable(set);`在传递之前冻结集合的策略，但他提到权衡是性能损失，因为任何想要修改集合的人都需要复制它，更改它，然后将其保存回来.

在资源极其有限的 Android 环境中处理此问题时是否有任何最佳实践？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T01:59:13.963

在我看来，只需保留参考。一个 android 应用程序不包含太多代码，您或您的开发团队控制所有源代码。因此，最简单的解决方案适用于大多数情况。

# javascript - 在javascript问题中创建onChange

> ID：13888582
> 
> 赞同：1
> 
> 时间：2012-12-15T01:53:44.677
> 
> 标签：javascript

我正在尝试将更改事件分配给元素。我有

```
 var testDiv=getElementById('testDiv');

 var SelectMenu=document.createElement('select');
     SelectMenu.id='SelectMenu';
     SelectMenu.onchange=changeFuntion();

     testDiv.appendChild(SelectMenu);

function changeFuntion(){
 //it calls right after I load the page....
 alert('call');

} 
```

html

```
 <div id='testDiv'></div> 
```

我希望仅在用户更改 dropdonw 菜单时才显示警报。但是，似乎在创建元素后立即调用警报。有小费吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T01:54:45.683

```
SelectMenu.onchange=changeFuntion();  <-- This calls the function
                                 ^^--- Remove the braces 
```

应该是

```
SelectMenu.onchange=changeFuntion  ;  <-- This assigns the function pointer 
```

由于大括号，该函数被立即调用......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T01:56:17.383

您将函数的返回值分配`changeFunction`给`SelectMenu.onchange`，而不是函数本身。尝试...

```
SelectMenu.onchange = changeFuntion; 
```

反而。你有它的方式，即：

```
SelectMenu.onchange = changeFuntion(); 
```

意思是：调用函数`changeFunction`，并将返回值赋给`SelectMenu.onchange`属性。

# asp.net - 如何在 asp.net 中从 gmail、hotmail、yahoo、facebook 等导入联系人？

> ID：13888588
> 
> 赞同：2
> 
> 时间：2012-12-15T01:55:15.007
> 
> 标签：asp.net, c#-4.0

我想在 asp.net 中从***gmail、yahoo、hotmail、facebook等导入联系人？***请帮助我如何在 asp.net 中导入联系人。

先生，我想导入所有电子邮件联系人，而不仅仅是 gmail。

所以请告诉我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T12:56:15.423

你可以检查[this](http://import-contacts.blogspot.in/2011/11/import-contacts-from-gmail-yahoo.html)和[this](http://msdn.microsoft.com/en-us/library/live/hh826527)。我希望会有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T13:35:53.540

您可以使用[socialauth.net](http://code.google.com/p/socialauth-net/)。它是一个 .NET 库，用于身份验证、获取个人资料和联系人、更新 Google、Yahoo、Facebook 和其他提供商的状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:00:08.850

看到[这个](http://import-contacts.blogspot.in/2011/11/import-contacts-from-gmail-yahoo.html)它可以导入 gmail、yahoo 和 hotmail。

# asp.net - 是否不可能在 GridView 内以声明方式数据绑定 ItemStyle 上的 CssClass 属性？

> ID：13888592
> 
> 赞同：3
> 
> 时间：2012-12-15T01:55:55.367
> 
> 标签：asp.net, css, visual-studio, data-binding, gridview

我正在尝试基于 GridView 中元素的 CSS 类以编程方式切换页面上的样式。我已经在几个普通（非模板化）元素的类属性中成功地做到了这一点，但由于某种原因，它似乎在模板控件中不起作用。Visual Studio 将数据绑定代码视为不透明的文本（事实上，甚至将其相应地着色为不透明的字符串）。是否不支持以这种方式对 和 进行数据绑定？

我在类文档中找不到任何说明这种情况的内容，但另一方面它不起作用，Visual Studio 似乎暗示这是按设计的。

编辑：一个例子。这里声明了一个Gridview，在列定义中，ItemStyle-CssClass属性设置为两个值；一个是硬编码的，另一个取自枚举变量的当前值。假设本例中 StyleHelper 为静态类，Festivity 属性为 StyleSelectorEnum 类型，当前值为 StyleSelectorEnum.PartyMode。

```
<asp:GridView runat="server">
    <Columns> 
        <asp:TemplateField ItemStyle-CssClass="style1 <%= Lib.Web.StyleHelper.Festivity.ToString() %>" />
            <ItemTemplate>
                <div />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

在此示例中，生成的表将包含具有 td 条目的行，如下所示：

`<td class="style1 <%= Lib.Web.StyleHelper.Festivity.ToString() %>" >`

在实践中，我希望它看起来像这样：

`<td class="style1 PartyMode" >`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T00:33:09.547

我找到了我要找的东西。它几乎完全来自[这篇](http://weblogs.asp.net/infinitiesloop/archive/2006/08/09/The-CodeExpressionBuilder.aspx)讨论使用 <%$ %> 构造的 ASP.NET 表达式构建器的文章。在我的示例中，解决方案如下。

标记：

```
<asp:GridView runat="server">
    <Columns> 
        <asp:TemplateField>
            <ItemStyle CssClass='<%$ Code: "style1 " + Lib.Web.StyleHelper.Festivity.ToString() %>' />
            <ItemTemplate>
                <div />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns> 
```

**注意事项：**

*   ItemTemplate 上的 ItemStyle-CssClass 属性不能以这种方式使用。导致文字内容错误。
*   <%$ %> 构造必须填充整个值，这意味着在我的情况下在其中进行字符串构造，而不是“style1 <%$ Code: ... %>”
*   在这种情况下，值必须使用单引号，因为字符串构造中使用了双引号。

在 web.config 中声明表达式生成器的部分：

```
<compilation debug="true">
    <expressionBuilders>
        <add expressionPrefix="Code" type="CodeExpressionBuilder"/>
    </expressionBuilders>
</compilation> 
```

类定义本身，它放在 app_code 中：

```
[ExpressionPrefix("Code")]
public class CodeExpressionBuilder : ExpressionBuilder
{
    public override CodeExpression GetCodeExpression(BoundPropertyEntry entry, object parsedData, ExpressionBuilderContext context)
    {
        return new CodeSnippetExpression(entry.Expression);
    }
} 
```

现在，结果表中的 td 元素按预期被赋予类“style1 PartyMode”。

这个解决方案的全部功劳归于他博客中的 InfinitiesLoop；我做了很少的工作来适应我的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T06:28:13.597

你不能那样做。您可以做的是创建两个不同的皮肤。在皮肤中，您可以设置与现在相同的 CSS 字段。所以你创建了一个没有 PartyMode 的皮肤和一个有。你可以设置你需要的皮肤`Page_PreInit`。

在皮肤文件中：

```
<ASP:GridView SkinId="Simple">
    <ItemStyle CssClass="style1"/>
</ASP:GridView>

<ASP:GridView SkinId="Party">
    <ItemStyle CssClass="style1 PartyMode"/>
</ASP:GridView> 
```

在你的 aspx 中：

```
<asp:GridView Id="GridView1" runat="server" SkinID="Simple"> 
```

在您后面的代码中：

```
protected override void OnPreInit(EventArgs e)
        {
            base.OnPreInit(e);

// based on your condition:
this.GridView1.SkinID = "PartyMode";
        } 
```

# python - 使用 reload() 打破导入循环

> ID：13888597
> 
> 赞同：3
> 
> 时间：2012-12-15T01:57:02.530
> 
> 标签：python

> **可能重复：**
> [Python 中的循环（或循环）导入](https://stackoverflow.com/questions/744373/circular-or-cyclic-imports-in-python)

一个.py

```
import b

class Abstract(object):
    pass

class Concrete(Abstract):
    def get_newthing(self):
        return b.NewThing() 
```

（注意：我很难对 a.py 进行任何重大的重构）

b.py

```
import a
#reload(a)

class NewThing(a.Abstract):
    pass 
```

如所写，运行“import b, a”有效，但运行“import a”给出

```
AttributeError: 'module' object has no attribute 'Abstract' 
```

当 Python 到达 a.py 中的“import b”行，然后在导入 b 时尝试访问尚未创建的“a.Abstract”。

但是，如果我包含 reload 语句，我可以很好地执行“import a”，因为 Python 会跳回 a.py 模块并在继续 b.py 之前创建 Abstract 类。所以它似乎有效（尽管我可能应该在重新加载之前添加一个 hasattr 检查）。

我一直在寻找解决此导入循环问题的方法，但没有看到任何关于这些方面的建议。以这种方式使用 reload() 有什么陷阱吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T02:39:37.800

你的`a.py`模块设计很糟糕。它迫使您进行循环导入，这通常是要避免的。最好的解决方案是将`Concrete`类（及其所需的`import b`行）拆分为一个单独的模块，该模块可以同时导入`a`并且`b`没有任何循环。

但是，如果这对您的情况来说重构太多，您可以尝试将`import b`行从顶部移动`a.py`到`Abstract`. 这将解决您遇到的错误，因为它确保`NewThing`始终能够看到`Abstract`的定义。

也就是说，执行：

```
class Abstract(object):
    pass

import b

class Concrete(Abstract):
    def get_newthing(self):
        return b.NewThing() 
```

这是一个最小的更改，但它应该适用于这种情况。但是，如果`Concrete`需要在定义时访问`NewThing`该类，则无法以这种方式进行修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T02:22:15.180

不要`reload`用于此，它仅用于交互式提示。您可以像这样修复这种循环：

```
class Abstract(object):
    pass

class Concrete(Abstract):
    def get_newthing(self):
        import b
        return b.NewThing() 
```

更好的是重构你的代码，这样你就不需要循环导入。

# javascript - 使用 Bootstrap 创建响应式标签（它们应该在较小的屏幕上自动堆叠）

> ID：13888598
> 
> 赞同：18
> 
> 时间：2012-12-15T01:57:09.010
> 
> 标签：javascript, html, css, twitter-bootstrap

如何创建使用引导程序自动堆叠的响应式选项卡。我的导航代码是 -

```
<div>
    <ul id="tabslist_navs" class="nav nav-tabs">
        <li><a href="#">Normal</a></li>
        <li><a href="#">Hover</a></li>
        <li><a href="#">Selected</a></li>
    </ul>
    <div class="tab-content">
        ....
    </div>
</div> 
```

I need them to get converted to stacked tabs when viewed on small screens. Right now it just moves the tabs into multiple likes which looks ugly. I want something like the navbar collapse but without the button to activate the collapse.

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-15T15:51:26.850

这应该有效：

```
@media (max-width: 480px) { 
    .nav-tabs > li {
        float:none;
    }
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-03-22T23:53:29.783

使用 BootStrap 第**3**版，您可以通过添加 4 个 CSS 类以干净的垂直方式为超小型设备堆叠所有内容。[如您所见，BootStrap 和 Tab](http://patrickdesjardins.com/blog/modifying-bootstrap-tab-control-for-extra-small-device)的渲染效果并不好。下面的代码可以通过删除所有背景和边框来完成这项工作。

```
@media (max-width: 767px) { 
    .nav-tabs > li {
        float:none;
        border:1px solid #dddddd;
    }
    .nav-tabs > li.active > a{
        border:none;
    }
    .nav > li > a:hover, .nav > li > a:focus,
    .nav-tabs > li.active > a, .nav-tabs > li.active > a:hover, .nav-tabs > li.active > a:focus
     {
        background:none;
        border:none;
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-31T09:31:28.890

如果您使用 SCSS 或 LESS 支持，则应使用正确的媒体查询变量：

在 SCSS 中：

```
 @media (max-width: $screen-md-min) {
    .nav-tabs > li {
      float:none;
    }
  } 
```

少于：

```
 @media (max-width: @screen-md-min) {
    .nav-tabs > li {
      float:none;
    }
  } 
```

检查[http://getbootstrap.com/css/](http://getbootstrap.com/css/)了解有关可能变量的详细信息。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-04-29T19:23:07.817

如果您发现 480 不这样做（我有很长的标签标题），您可以随时更改您的最大宽度。我用了：

```
@media (max-width: 991px) { 
 .nav-tabs > li {
    float:none;
 }
} 
```

它就像一个魅力。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-04T20:04:49.990

```
 @media (max-width: 480px) {
        .nav-tabs > li {
            float:none;
            margin-bottom: 0px;
        }
        .nav-tabs > li.active > a {
            border: 1px solid #dddddd;
        }
        .nav-tabs > li.active > a:hover {
            border: 1px solid #dddddd;
        }
        .nav-tabs > li  > a {
            border-bottom: 1px solid #dddddd;
            border-left: 1px solid #dddddd;
            border-right: 1px solid #dddddd;
        }
        .nav-tabs > li > a:hover {
            border-color: #dddddd;
        }
    } 
```

这个比较简单好看。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-07T20:00:16.173

在我看来，这里的其他解决方案仍有很多不足之处。这是一个基于早期解决方案但使用 CSS flexbox 的解决方案。选项卡尽可能并排放置，仅在需要时换成多行，并且仍然填充屏幕的宽度，水平空间分布均匀。它看起来干净而平衡，并且可以很好地扩展以处理更长的选项卡或更多的选项卡。它还解决了其他解决方案的一些边界和边界半径问题。

SCSS：

```
@media (max-width: $screen-xs-max) {
  .nav-tabs {
    display: flex;
    flex-wrap: wrap;
    padding-right: 1px;
    > li {
      flex: auto;
      text-align: center;
      border: 1px solid $nav-tabs-border-color;
      margin-right: -1px;
      > a {
        margin: 0;
      }
      &.active {
        background: $gray-lighter;
        > a, > a:hover, > a:focus {
          border: none;
          background: none;
        }
      }
    }
  }
} 
```

或者，纯 CSS：

```
@media (max-width: 767px) {
  .nav-tabs {
    display: flex;
    flex-wrap: wrap;
    padding-right: 1px;
  }
  .nav-tabs > li {
    flex: auto;
    text-align: center;
    border: 1px solid #ddd;
    margin-right: -1px;
  }
  .nav-tabs > li > a {
    margin: 0;
  }
  .nav-tabs > li.active {
    background: #eee;
  }
  .nav-tabs > li.active > a,
  .nav-tabs > li.active > a:hover,
  .nav-tabs > li.active > a:focus {
    border: none;
    background: none;
  }
} 
```

# json - send email using twitter-bootstrap modal, json, and wordpress

> ID：13888600
> 
> 赞同：0
> 
> 时间：2012-12-15T01:57:10.383
> 
> 标签：json, wordpress, email, twitter-bootstrap

I'm needing to collect a Name and Email through a twitter-bootstrap modal that sends me an email and updates the modal window 'success' upon submit using the wordpress platform. Can't figure it out. Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T02:07:25.363

最简单的事情是使用 Gravity Forms（或类似的）来处理表单位，使用 Form 小部件将表单添加到小部件区域，然后在要使用模式的页面上包含该小部件区域。

例如（使用重力形式）：

```
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<?php dynamic_sidebar('form-sidebar');?>
</div>

<a href="#myModal"  data-toggle="modal">This is the link that triggers the modal</a> 
```

# javascript - Uncaught referenceError: Object is not defined

> ID：13888601
> 
> 赞同：3
> 
> 时间：2012-12-15T01:57:41.117
> 
> 标签：javascript, jquery, javascript-objects

I have a Javascript object in an external js file that looks like this:

```
function SomeObj() {
    this.property = 0;
    this.property = null;
}

SomeObj.prototype = {
    methodA: function() {},
    methodB: function() {}
} 
```

In my View files, I load it like this:

```
<script type ="text/javascript" src="someObj.js"></script> 
```

And in jQuery, I instantiate it like this:

```
<script type = "text/javascript">

var someObject = new SomeObj();

</script> 
```

At this point. `console.log` spits out the UncaughtReference error saying `someObj` is not defined.

怎么了 ？帮助我提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T02:01:46.210

这是因为 和 的命名不`Variable`明确`Object`

```
someObj = new someObj(); 
```

给它一个不同的名字

```
var obj1 = new SomeObj(); 
```

如果你这样做会发生什么

```
var obj = {
   a :a
} 
```

**a 尚未**定义，因此它会吐出一个错误

# c++ - 防止某人无意中做某事

> ID：13888603
> 
> 赞同：1
> 
> 时间：2012-12-15T01:57:49.833
> 
> 标签：c++

我遇到的问题基本上可以通过下面的代码来解释：

```
void (*fn_ptr)();

template<typename T> void Second(){
    //do something
}

template<typename T> void First() {
    //do init
    fn_ptr = Second<T>;
} 
```

函数`First`和函数`Second`都需要`template function`并且只能通过函数指针调用`fn_ptr`。函数`First`必须在调用函数之前调用一次`Second`。您不需要手动调用函数 Second。所以我们之前唯一应该做的`fun_ptr`就是在某处使用：

```
fn_ptr = First<SomeType>; 
```

**问题来了**：我怎样才能阻止人们这样做：

```
fn_ptr = Second<SomeType>; 
```

ps：我知道function`First`和function`Second`都没有的时候怎么办`template function`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T02:03:01.637

如果不详细介绍，我会使用类，而 fn_ptr = ... 将成为一个函数。然后在函数中您可以测试 fn_ptr 是否仍然为 NULL，那么 rhs 必须是可动态转换为第一类的。

我不太确定您是否可以做很多事情来防止错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T07:36:09.277

最后我设法让它工作。只需将这两个函数设为类模板的静态成员函数即可：

```
template<typename T> class Foo{
public:
void First() {
    //do init
    fn_ptr = Second<T>;
}

private:
void Second(){
    //do something
}
}; 
```

进而：

```
fn_ptr = Foo<SomeType>::First; // OK
fn_ptr = Foo<SomeType>::Second; // Error: Second is inaccessable 
```

我只想说，狗屎。`fn_ptr`在函数`First`为其分配私有静态成员函数后效果很好。嗯，它适用于 VC++ 2012。我不知道它是否符合 ISO 标准，但我想它是可移植的。

# entity-framework - 实体框架访问具有相似但略有不同模式的多个数据库

> ID：13888608
> 
> 赞同：3
> 
> 时间：2012-12-15T01:58:52.327
> 
> 标签：entity-framework

我有多个现有的 SQL Server 数据库，用于不同的客户端，它们具有 95% 相似的架构，但每个数据库中可能有一些额外的自定义列来处理一些特定的客户需求。

例如，数据库 A 可能有一个包含两个自定义列的表：

```
StdColumn1, StdColumn2, CompanyACustom1, CompanyACustom2 
```

并且数据库 B 可能有一个自定义列：

```
StdColumn1, StdColumn2, AnotherCompanyCustom1 
```

并且数据库 C 可能没有自定义列，只是：

```
StdColumn1, StdColumn2 
```

我想配置实体框架，以便 C# 对象具有一些额外的预定义属性（例如：`CustomColumn1`、`CustomCustom2`等），如果它们存在则映射到这些自定义列，或者如果自定义列不存在则无效。

视图是执行此操作的一种方法，但我想知道是否可以使用 CSDL、SSDL 和 MSDL 文件来执行此类操作。或者也许[这项技术](http://efmodeladapter.codeplex.com/)可以发挥作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-13T14:22:36.263

实体框架是一个编译时框架，必须提前知道架构。它没有动态模式，这正是您所需要的。但是有一些实体框架“扩展”在底层使用 EF 并在运行时编译模型。缺点是您需要使用“动态”对象与之交互（因为在编译时类型未知）。

预制扩展... [实体框架动态数据模型生成器](http://dynamixdata.codeplex.com/) [实体框架运行时模型适配器](http://efmodeladapter.codeplex.com/)

Or you can roll your own solution whereby you adjust your SSDL and MSL files using XML manipulation... [http://social.msdn.microsoft.com/Forums/en-US/6ed96028-0d43-4ab7-ade6-d5aaf3ffd6cf/updating-the-entity-framework-at-runtime](http://social.msdn.microsoft.com/Forums/en-US/6ed96028-0d43-4ab7-ade6-d5aaf3ffd6cf/updating-the-entity-framework-at-runtime)

# objective-c - 应用程序关闭后如何将图钉保存到地图

> ID：13888612
> 
> 赞同：0
> 
> 时间：2012-12-15T01:59:32.613
> 
> 标签：objective-c, memory-management, mkmapview

所以在我的应用程序中，用户在地图上放置了图钉。我不知道的是如何在应用程序中保存图钉，这样当用户再次打开应用程序并转到 mapView 时，上次打开应用程序时掉到地图上的图钉仍然在地图。有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:19:20.977

我建议你从那个别针那里得到坐标。您可以先将它们保存在 NSMutableArray 中。完成后，您可以像这样将此数组保存在 NSKeyedArchive 中

```
NSMutableData *data         = [[NSMutableData alloc]init];
NSKeyedArchiver *archiver   = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];

[archiver encodeObject:pinArray forKey:@"PinArray"];
[archiver finishEncoding];
[data writeToFile:archivePath atomically:YES];

BOOL success = [NSKeyedArchiver archiveRootObject:pinArray toFile:archivePath]; 
```

当您启动您的应用程序时，您可以阅读此存档：

```
if ([[NSFileManager defaultManager] fileExistsAtPath:archivePath]) {

    NSData *data = [NSData dataWithContentsOfFile:archivePath];

    NSMutableArray *pinCollection = [[NSMutableArray alloc] init];

    if (data){
        pinCollection = [NSKeyedUnarchiver unarchiveObjectWithData:data];
    }
    else pinCollection = nil;

    return pinCollection;

} 
```

并根据保存的坐标在地图上定位您的图钉。

# java - 通过插入合并 2 个二叉搜索树

> ID：13888615
> 
> 赞同：1
> 
> 时间：2012-12-15T02:00:59.923
> 
> 标签：java, insert, merge, binary-search-tree

我目前正在实现一个二叉搜索树，并被困在将它与另一个合并。到目前为止，我有：

*   head：返回具有最小节点的节点
*   tail：返回没有最小节点的树
*   insert(value)：传统的插入方法

由于我收到了 StackOverflowError，我认为最好提供所有方法，而不仅仅是合并方法。我很确定错误是由于递归调用的数量造成的。

我会很感激任何帮助！TYVM。

```
public BinaryTree insert(int newValue) {
    if (newValue < value) {
        if (left == null) {
            return new BinaryTree(value, new BinaryTree(newValue), right);
        } else {
            return new BinaryTree(value, left.insert(newValue), right);
        }
    } else if (newValue > value) {
        if (right == null) {
            return new BinaryTree(value, left, new BinaryTree(newValue));
        } else {
            return new BinaryTree(value, left, right.insert(newValue));
        }
    }
    return this;
}

public int head() {
    if (left != null) {
        return left.head();
    }
    return value;
}

public BinaryTree tail() {
    if (left != null) {
        return new BinaryTree(value, left.tail(), right);
    } else {
        return new BinaryTree(value, left, right.tail());
    } 
```

}

```
public BinaryTree merge(BinaryTree other) {
    if (other != null) {
        insert(other.head()merge(other.tail()));
    }
    return this;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T02:38:15.247

```
public BinaryTree merge(BinaryTree other) {
    if (other != null) {
        return insert(other.head()).merge(other.tail());
    }
    return this;
} 
```

* * *

```
/**
 * Get the tail of a tree.
 * @return the tree without the smallest value.
 */
public BinaryTree tail() {
    if (left != null) {
        return new BinaryTree(value, left.tail(), right);
    }
    return right; // Could make a deep copy.
} 
```

# fabricjs - 当 Object 是 fabric.Rect 时 Fabricjs intersectsWithObject 返回 false

> ID：13888617
> 
> 赞同：7
> 
> 时间：2012-12-15T02:01:28.300
> 
> 标签：fabricjs

我试图确定一个fabric.Rect何时与另一个fabric.Rect重叠，同时观察'object：moving'事件但fabric.Group与fabric.Rect之间的结果不一致

当我将 Group 移动到 Rect 实例上时，intersectsWithObject 方法返回 true，但是当我将 Rect 实例移动到另一个 Rect 实例上时，它返回 false。

我想知道我是否在这里做错了什么。

这是我的事件处理程序

```
cvs.observe('object:moving', function(e) {

    var targ = e.target;

    // filter out itself
    var items = cvs.getObjects().filter(function(o){
        return targ !== o;
    });

    var hit = false;

    for (var i = 0, n = items.length; i < n; i++) {
        var m = items[i];

        if (targ.type == "group") {
            if (targ.intersectsWithObject(m)) {
                targ.setFill("red");
                hit = true;
                console.log("GROUP HIT");
            } else {
                if (!hit) {
                    targ.setFill("#CCCCCC");
                }
            }
        } 
        else {
            // this is always returning false! why?
            if (targ.intersectsWithObject(m)) {
                var id = m.data ? m.data.entityId : " ??"
                console.log("OBJECT HIT:" + id);
                targ.setFill("red");
            }
        }
    }
}); 
```

我创造了一个小提琴。尝试选择两个或更多块将它们分组。当您将分组的对象拖到任何其他 fabric.Rect 或 fabric.Group 实例上时，您会看到它变成红色。当您将单个 Rect 拖到另一个任何类型的 fabric.Object 上时，它永远不会变成红色，因为 intersectsWithObject 总是返回 false ...

[http://jsfiddle.net/cyberpantz/9MkYJ/27/](http://jsfiddle.net/cyberpantz/9MkYJ/27/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T22:25:51.217

我发现通过在调用 myObj.intersectsWithObject(otherObj) 之前显式调用 myObj.setCoords() 可以解决问题。

我在这里更新了小提琴 [http://jsfiddle.net/cyberpantz/9MkYJ/29/](http://jsfiddle.net/cyberpantz/9MkYJ/29/)

看起来fabric.Rect坐标在fabric.Group坐标被移动时不会自动更新，尽管我可能在这里偏离基础......

更新（和简化）的代码

```
cvs.observe('object:moving', function(e) {

    var targ = e.target;

    // this fixes it
    targ.setCoords();

    var items = cvs.getObjects().filter(function(o){
        return targ !== o;
    });

    var hit = false;

    for (var i = 0, n = items.length; i < n; i++) {
        var m = items[i];

        if (targ.intersectsWithObject(m)) {
            targ.setFill("red");
            hit = true;
        } 
        else {
            if (!hit) {
                targ.setFill("#CCCCCC");
            }
        }
    }
}); 
```

# c++ - C++ 重载 + 运算符友元函数

> ID：13888630
> 
> 赞同：2
> 
> 时间：2012-12-15T02:03:47.003
> 
> 标签：c++, overloading

我正在尝试创建一个重载的朋友函数，它将添加两个分数。到目前为止，我有以下解决方案，但我在第 17 行和第 19 行有错误。我相信问题出在参数（分数数量 1，分数数量 2）上，但我无法完全确定它。任何人都可以帮忙吗？这需要在 Visual Studio 2010 上编译。

```
#include <iostream>

using namespace std;

class fraction
{
public:
fraction(); //constructor for initialize
void read(); //read 3 int from keyboard for the fraction
void print(); //print the fraction on screen
friend fraction operator +(fraction, fraction); //fraction add
private:
int integral, numerator, denominator;
}

int main(){

return 0;
}

fraction operator +(fraction amount1, fraction amount2)
{
fraction temp;
temp.integral = amount1.integral + amount2.integral;
temp.numerator = amount1.numerator + amount2.numerator;
temp.denominator = amount1.denominator + amount2.denominator;
return temp;
}

void fraction::read()
{
cin >> integral >> numerator >> denominator;
} 
```

编辑：我已将我的加法算法更正为

```
friend fraction operator +(const fraction&, const fraction&); //fraction add 
```

和

```
fraction operator +(const fraction& amount1, const fraction& amount2)
{
fraction temp;
temp.integral = amount1.integral + amount2.integral;
temp.numerator = (amount1.numerator)*(amount2.denominator) + (amount2.numerator)*(amount1.denominator);
temp.denominator = (amount1.denominator)*(amount2.denominator);
return temp;
} 
```

然而，在测试这一点时，我为分子和分母变量输出零。有人能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T02:38:36.597

这是在经过多次更改后编译的：

*   您需要在类定义后添加一个分号，并且
*   您需要定义您已声明的构造函数，即

这个构造函数

```
fraction(); //constructor for initialize 
```

应该有一个内联或在单独文件中定义的正文。

此外，您应该将您的签名更改`operator`为

```
friend fraction operator +(const fraction&, const fraction&) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-14T08:02:03.800

```
#include <iostream>

using namespace std;

class fraction
{
public:
//fraction(); //constructor for initialize
void read(); //read 3 int from keyboard for the fraction
void print(); //print the fraction on screen
friend fraction operator +(fraction, fraction); //fraction add
private:
int integral, numerator, denominator;
};

int main(){
fraction f1, f2, f3;
cout<<"\n Enter first fraction: ";
f1.read();
cout<<"\n Enter second fraction: ";
f2.read();
cout<<"\n result: ";

f3 = f1 + f2;
f3.print();
return 0;
}

fraction operator +(fraction amount1, fraction amount2)
{
fraction temp;
temp.integral = amount1.integral + amount2.integral;
temp.numerator = amount1.numerator + amount2.numerator;
temp.denominator = amount1.denominator + amount2.denominator;
return temp;
}

void fraction::read()
{
cin >> integral >> numerator >> denominator;
}

void fraction::print()
{
cout << integral<<" "<< numerator <<" "<< denominator <<std::endl;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-15T02:06:35.037

如果在类块之外定义，则需要在运算符之前使用类名：

```
fraction fraction::operator +(fraction amount1, fraction amount2); 
```

# php - 尝试以 utf-8 格式发送电子邮件，但 Content-Type 仍设置为 iso-8859-1

> ID：13888632
> 
> 赞同：1
> 
> 时间：2012-12-15T02:04:15.863
> 
> 标签：php, email, phpmailer

我要疯了，这是我用来发送电子邮件的代码 utf-8 编码，但是当我收到邮件时，它使用 utf-8 字符，但标题设置为 iso-8859-1 字符。

1.  是 PHPMailer 的问题吗？
2.  这可能是“覆盖”这些标头的 smtp 服务器的问题吗？
3.  有什么可用的解决方案吗？

    连接（）; $mail=新 PHPMailer(); $mail->字符集 = $ENCODING_TYPE; $mail->ContentType="text/html; charset=".$ENCODING_TYPE; $mail->IsSMTP(); $mail->主机=SMTP_HOST; $mail->发件人=SITE_MAIL; $mail->FromName=mb_convert_encoding(SITE_MAIL_NAME, $ENCODING_TYPE, "auto"); $mail->Subject=html_entity_decode(stripslashes($title), ENT_COMPAT, $ENCODING_TYPE); $身体=''。stripslashes($title).''; $body.="
    ".'

    ## '.html_entity_decode(stripslashes($title), ENT_COMPAT, $ENCODING_TYPE).'

    '.mb_convert_encoding(stripslashes($mail_body), $ENCODING_TYPE, "auto")."
    *".html_entity_decode(stripslashes($author), ENT_COMPAT, $ENCODING_TYPE)."* "; $body.="

    -----------------
    "."FooterText"."
    电话 - 传真 06.32.16.059

    su ".$mails_total." 联系方式"; } ?>

我不知道为什么代码显示 html 并且有所有这些格式问题，在这里你可以看到 paste 版本：

[http://pastie.org/5533692](http://pastie.org/5533692)

请注意，我在 16 岁时编写了此代码，我想避免完全重写（嗯，这个函数可以重写）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T02:29:08.870

尝试`$mail->CharSet=$ENCODING_TYPE;`代替`$mail->Charset=$ENCODING_TYPE;`

# python - 检测击键的内置方法

> ID：13888633
> 
> 赞同：2
> 
> 时间：2012-12-15T02:04:47.330
> 
> 标签：python

我一直在寻找很多这样的问题，但我还没有找到答案。我已经看过[这个](http://docs.python.org/2/faq/library#how-do-i-get-a-single-keypress-at-a-time)，但它真的很复杂，而且我不知道如何在以这种方式检测击键的同时运行我的应用程序。是否有内置的 python 模块用于以线程方式检测击键（对不起，如果这是错误的术语），所以我不必继续检查 while 循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T18:10:15.927

**是的， UNIX 上**有这个[`curses`](http://docs.python.org/2/library/curses.html)模块。AFAIK 没有独立于平台的*模块*来做你想做的事。

 ***如果您想要一些简单且适用于任何地方的东西，那么使用 GUI 库可能会更好，例如`Qt`,`Wx`或`Gtk`. 这并不意味着您必须为您的程序编写一个完整的 GUI，但使用 gui 的事件循环来捕获击键并不难。因为`Qt`你可以使用`QCoreApplication`例如。

有一些方法可以在没有外部依赖的情况下实现你想要的，例如这个[在](http://code.activestate.com/recipes/134892-getch-like-unbuffered-character-reading-from-stdin/)`msvcrt`windows 和UNIX上使用的配方，但是，由于你抱怨它们的复杂性，你可能最好使用 gui 工具包。`tty``termios``sys`***

# python - 纸浆（python） - 目标函数取决于结果

> ID：13888635
> 
> 赞同：0
> 
> 时间：2012-12-15T02:04:54.847
> 
> 标签：python, linear-programming

我的目标函数取决于我试图解决的问题的结果，是否可以对这样的问题进行建模？

例如

```
objective = (price * is_channel_assigned[channel id]) 
```

价格取决于分配的频道数量，即第一个频道是 100，第二个频道是 80 .. 等等。

这可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:13:28.477

一定要列出价格清单

并使用

```
objective = (price[channel_id] * is_channel_assigned[channel_id]) 
```

# html - 使用 WebSockets 进行多人 HTML5 游戏开发。选择什么，Node.js、Ratchet 还是其他？

> ID：13888636
> 
> 赞同：6
> 
> 时间：2012-12-15T02:05:14.660
> 
> 标签：html, node.js, cakephp, ratchet

在问这个问题之前我做了一些研究，但我找不到适合我情况的具体答案。我还是 WebSockets 和游戏开发的新手，所以我可能无法很好地解释某些部分，如果是这种情况，请告诉我，以便我可以尝试更好地解释它。

我目前正在使用 CakePHP 开发一个 Web 应用程序，它将提供多种 HTML5 多人游戏。在某些情况下，这些游戏需要将数据发送到数据库。问题是，我想使用 Node.js 来实现游戏服务器端逻辑，但我不确定是否能够将数据传递到数据库。我认为最好的方法是将数据从 Node.js 发送到 PHP 操作，然后将其存储在数据库中，但我也不知道这是否可能。

我发现了一些关于这个[DNode](http://bergie.iki.fi/blog/dnode-make_php_and_node-js_talk_to_each_other/)的东西，但我不确定这是否是我问题的答案，而且它似乎是 beta 版本，我想避免什么。

作为替代方案，我考虑使用[Ratchet](http://socketo.me/)来实现游戏服务器端逻辑。至少我知道我可以让它与我的应用程序通信，但由于我在游戏开发中找不到任何参考，我不确定这是否是个好主意。

我不知道任何其他框架，所以如果我有比这两个更好的选择，请告诉我:)

请给我你的意见。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T03:37:01.880

一年前，我在尝试开发在线多人游戏时遇到了类似的问题。我最终将 Node.js 用于服务器，将 Socket.io 用于 Websockets

如果你是 Node.js 的新手，我建议你先阅读这个简短而优秀的基础教程：

[http://www.nodebeginner.org/](http://www.nodebeginner.org/)

我每天都使用 node.js，我真的觉得它非常有用且富有成效。阅读完基础知识后，请阅读这篇关于使用节点和套接字开发多人 html5 游戏的精彩教程：http: [//smus.com/multiplayer-html5-games-with-node/](http://smus.com/multiplayer-html5-games-with-node/)

最后有一个开源游戏的链接，可能对你有帮助。

您可以在此处查看 socket.io 文档：http: [//socket.io/](http://socket.io/)

希望对您有所帮助，以便您可以开始。这是最难的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T16:22:44.397

您是否考虑过 Node.js + Lightstreamer 而不是 socket.io？Simone Fabiano 最近发布[了与 socket.io 的苹果对苹果数据广播比较](http://blog.lightstreamer.com/2013/05/benchmarking-socketio-vs-lightstreamer.html)（在服务器端生成并发送到 4000 多个客户端的消息，运行在两台 Amazon EC2 机器上），事实证明它能够比普通的更好地扩展带有 socket.io 的 websockets 在 CPU 使用率、数据延迟和带宽消耗方面，以及一些其他有用的功能来提高整体性能。

具体来说，Lightstreamer 可以为任何多人游戏带来极大的好处：另请参阅这篇文章（[通过 Web 优化多人 3D 游戏同步](http://blog.lightstreamer.com/2013/10/optimizing-multiplayer-3d-game.html)）。您可以浏览一个简单的多人 3D 世界的在线演示，其中集成了 Lightstreamer 以实现实时同步。该演示允许您调整场景的每个参数并模拟任何类型的数据传输，同时检查实际带宽消耗。

基准测试套件和演示的完整源代码可在 GitHub 上免费获得。

[全面披露：我为 Lightstreamer 工作]

# nginx - Nginx子域+文件夹到域+URI重定向

> ID：13888637
> 
> 赞同：0
> 
> 时间：2012-12-15T02:05:17.567
> 
> 标签：nginx, rewrite

我正在尝试将带有文件夹的旧子域重定向到没有旧文件夹但包括uri的新域。也许有一种方法可以删除新重定向 url 上的“/tv/”部分。

旧网址：

```
http://demo.domain.com/tv/page1/id1 
```

新网址（需要）：

```
http://http://domain.com/page1/id1 
```

现在这条规则是我迄今为止所拥有的，它有点工作：

```
server {
  listen ip:port;
  server_name demo.domain.com;
  return 301 http://domain.com$request_uri;
} 
```

这重定向到：

```
http://domain.com/tv/page1/id1 
```

我需要从 url 中删除“tv”部分，并将其重定向到：

```
http://domain.com/page1/id1 
```

但同时我需要有利于 SEO 的 301 重定向。

如果您有任何想法，请告诉我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T02:17:20.057

好的，我知道了=）但是如果有人知道其他可能更好的方法，请分享=）

```
server {
  listen ip:80;
  server_name demo.domain.com;
  rewrite ^/tv(.*) http://domain.com$1 permanent; break;
} 
```

# java - Java JScrollPane 未按预期工作

> ID：13888638
> 
> 赞同：1
> 
> 时间：2012-12-15T02:06:03.277
> 
> 标签：java, swing, jpanel, jscrollpane, paintcomponent

我有一个 JScrollPane，里面有一个 JPanel。JPanel 使用 paintComponent 方法中的以下代码“缩放”：

```
g2d.translate(this.getWidth()/2, this.getHeight()/2);
g2d.scale(scaleX, scaleY);
g2d.translate(-this.getWidth()/2, -this.getHeight()/2); 
```

现在，当我“放大”并将 JPanel 放大到大于 JScrollPane 的点时，我希望会出现垂直和水平滚动条，但它们不会出现。我尝试通过将 JPanel 的首选大小设置为每次 JPanel 被“缩放”时新缩放的面板的大小来解决此问题，但是在用户调整持有 JScrollPane 的 JFrame 大小之前，这不会做任何事情（也许这会触发重新验证？）。我希望有人能告诉我发生了什么，甚至可以告诉我达到预期效果的方法。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T06:32:54.107

> 我试图通过设置 JPanel 的首选大小来解决这个问题。

调用. `revalidate()`_`JScrollPane`

# php - MySQL_Query 不适用于构建数据库

> ID：13888641
> 
> 赞同：-1
> 
> 时间：2012-12-15T02:06:32.573
> 
> 标签：php, mysql

我尝试使用此代码制作我的安装文件，在函数中执行 SQL 命令。

这是代码：

```
 private function buildDB() {
  $sql = <<<MySQL_QUERY
CREATE TABLE IF NOT EXISTS users (
id          bigint(20),
md5_id      VARCHAR(200),
created     VARCHAR(100),
full_name   tinytext,
user_name   varchar(200),
user_email  varchar(220),
user_level  tinyint(4),
pwd         varchar(220),
address     text,
country     varchar(200),
tel         varchar(200),
fax         varchar(200),
website     text,
date        date,
users_ip    varchar(200),
approved    int(1),
activation_code int(10),
banned      int(1),
ckey        varchar(220),
ctime       varchar(220),
)
MySQL_QUERY;

    return mysql_query($sql) or die("failed because of the following error: " . mysql_error());

  } 
```

不幸的是，它出现了以下错误

```
 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 22 
```

但是 MySQL 是最新版本，我目前无法解决，是否有我遗漏的东西。

该文件的第 22 行是：

```
 private function buildDB() { 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T02:09:26.930

很确定最后一个`,`不应该在那里

# c++ - Visual Studio C++ 空项目 cout？

> ID：13888644
> 
> 赞同：1
> 
> 时间：2012-12-15T02:07:07.957
> 
> 标签：c++, visual-studio, cout

我是一个 Java 人（我知道相当多的 C 语言），他正试图以自己的方式进入 C++。

目前我正在使用 VisualStudio 2012 Express 并创建了一个空项目。与以下...

```
#include <iostream>

using namespace std;

int main()
{
    cout << "Hello World!" << endl;
    return 0;
} 
```

真的不能再轻松了。然而，我无法让该死的输出出现在我的生活中。

```
'Spark.exe' (Win32): Loaded 'C:\Users\Smith_000\Documents\Visual Studio 2012\Projects\Spark\Debug\Spark.exe'. Symbols loaded.
'Spark.exe' (Win32): Loaded 'C:\Windows\SysWOW64\ntdll.dll'. Cannot find or open the PDB file.
'Spark.exe' (Win32): Loaded 'C:\Windows\SysWOW64\kernel32.dll'. Cannot find or open the PDB file.
'Spark.exe' (Win32): Loaded 'C:\Windows\SysWOW64\KernelBase.dll'. Cannot find or open the PDB file.
'Spark.exe' (Win32): Loaded 'C:\Windows\SysWOW64\apphelp.dll'. Cannot find or open the PDB file.
SHIMVIEW: ShimInfo(Complete)
'Spark.exe' (Win32): Loaded 'C:\Windows\SysWOW64\msvcp110d.dll'. Symbols loaded.
'Spark.exe' (Win32): Loaded 'C:\Windows\SysWOW64\msvcr110d.dll'. Symbols loaded.
The program '[6260] Spark.exe' has exited with code 0 (0x0). 
```

在阅读完此内容后，似乎创建一个空项目会禁用我在大学所做的简单 C 项目中曾经使用过的控制台。

那么，当调试模式处于活动状态时，将诸如 printf、cout 和 cerr 之类的基本调试文本放入 VS（首选）或控制台有哪些非常简单的方法？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-01T23:51:06.170

路由`cout/cerr/clog`通过使用的自定义缓冲区`OutputDebugStringA`

```
#include <iostream>
#include <windows.h>

using namespace std;

// routes cout/cerr/clog to VC++ console and good old c stdout
class custom_outputbuffer : public std::streambuf {
public:
    custom_outputbuffer() 
    {
        setp(0, 0);

        // set std::cout to use my custom streambuf
        std::streambuf *backupOut = std::cout.rdbuf(this);
        std::streambuf *backupErr = std::cerr.rdbuf(this);
        std::streambuf *backupLog = std::clog.rdbuf(this);
    }

    ~custom_outputbuffer()
    {
        // make sure to restore the original so we don't get a crash on close!
        std::cout.rdbuf(backupOut);
        std::cerr.rdbuf(backupErr);
        std::clog.rdbuf(backupLog);
    }

    virtual int_type overflow(int_type c = traits_type::eof())
    {
        currentLine.push_back(c);
        int value = fputc(c, stdout);

        if (value == EOF || value == '\n')
        {
            OutputDebugStringA(currentLine.c_str());
            currentLine.clear();
        }

        return c;
    }

    std::string currentLine;
    std::streambuf *backupOut;
    std::streambuf *backupErr;
    std::streambuf *backupLog;
};

int main(int argc, char * argv[])
{   
    custom_outputbuffer ob;

    cout << "Hello Visual Studio Debug Output" << endl;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T02:27:37.230

这将打开一个带有文本的控制台窗口并迅速将其关闭。您可以使用[OutputDebugString](http://msdn.microsoft.com/en-us/library/aa363362%28v=VS.85%29.aspx)将信息发送到 Visual Studio 中的“输出”窗口。例如，

```
#include <iostream>
#include <windows.h>

using namespace std;

int main()
{
    cout << "Hello World!" << endl;
    OutputDebugString("Hello World\n");
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T02:21:33.840

致命的简单方法：

将光标放在行上：

```
return 0; 
```

按`F9`设置断点。您应该会在左侧看到一个大红点。这将允许您在程序从 main 返回之前查看控制台输出。读完控制台输出后，按`F5`继续执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T02:15:16.537

要查看 Windows IDE 输出中的文本，请使用`OutputDebugString()`.

请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/aa363362%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363362%28v=vs.85%29.aspx)

否则它会进入控制台（如果你想要一个控制台，请查看你的设置，但知道它会在你的程序退出后立即关闭，以防止这种使用，比如`getchar()`暂停，直到你按下回车键。）

更好的是，在我看来，切换到 Linux ......

# javascript - “Uncaught SyntaxError: Unexpected token (” in simple function

> ID：13888648
> 
> 赞同：0
> 
> 时间：2012-12-15T02:07:40.470
> 
> 标签：javascript, function, syntax-error

我收到此错误：

> 未捕获的语法错误：意外的令牌（

当我不注释掉这个函数时：

```
function setTextField(str)
{
        if ( (str == "") ||  (str == null) ) 
          str = "Enter Task Here";
        document.getElementById.("get_subject").value = str;
} 
```

我正在尝试从其他地方执行此操作（稍后在代码中）：

```
setTimeout('setTextField();', 1000); 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T02:10:24.173

```
document.getElementById.("get_subject").value = str;
//                     ^ What's that doing there? 
```

`{token}.`需要后跟一个作为属性名称的标记，才能成为有效的 JS 语法（不包括一些数字文字语法）。

你要：

```
document.getElementById("get_subject").value = str; 
```

* * *

此外，永远，永远，*永远*，将字符串传递给`setTimeout`. 它需要一个真正的功能！

```
setTimeout(setTextField, 1000); 
```

或者，如果您想执行更复杂的代码：

```
setTimeout(function() {
  setTextField(someArgument, someOtherArgument);
  //othercode
}, 1000); 
```

# javascript - 使用 require.js 混淆单个非模块化 javascript 文件

> ID：13888650
> 
> 赞同：1
> 
> 时间：2012-12-15T02:08:34.647
> 
> 标签：javascript, node.js, requirejs, minify

我有一个项目，我正在使用 require.js 来缩小/混淆/组合一些模块。我还有一个 javascript 文件（7 行代码），我想以相同的方式对其进行混淆，但它没有组织为模块（7 行独立代码并不能证明 require.js 引导代码的开销）。

是否可以使用 require.js 缩小/混淆单个文件？

* * *

编辑：我已经用来编译项目中其余代码的命令：

```
node lib/r.js -o name=lib/almond.js include=src/main,requireLib out=extension-min.js baseUrl=./ paths.requireLib=lib/require 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-27T11:48:52.507

r.js 默认使用 uglify2 但如果你想确保你可以设置`optimize='uglify2'`

# python - 如何创建内联模块

> ID：13888655
> 
> 赞同：1
> 
> 时间：2012-12-15T02:09:06.120
> 
> 标签：python, python-2.7

我有在多台机器上运行的 python 项目。我正在使用 virtualenv 在多台机器上同步 python 模块。这很好用。但是，我也将一些内部烘焙的 SWIG *.so 包引入环境。这些 c++ 共享对象有一些影响深远的依赖噩梦，在某些机器上难以重现。我不需要一些开发机器上的代码功能。我想必须加载其余的 python 代码并继续在不修改的情况下继续运行。

我想在没有模块的机器上“伪造模块”加载。我不会调用实际执行 SWIG *.so 方法的代码。

例子：

```
try:
   import swigpackagefoo.swigsubpackagebar
except ImportError:
   # magic code that defines the fake module, I want to define a bunch of class'es with 'pass'
   # so all the code deps would be happy. and I dont require the swig *.so to 
   # be installed on the devel system.
   # something along the lines of.
   __import__('swigpackagefoo.swigsubpackagebar')=class foo(object): pass 
```

注意：我认为值得注意的是，当模块导入 *.so 时，在 prod 机器上

```
type(swigpackagefoo)
# is 'module', also the 
type(swigpackagefoo.swigsubpackagebar)
# is also 'module' 
```

那么'如何在python中定义一个模块在线'？

我不想在缺少的开发机器上创建包

即：我不想创建这些文件，因为工作系统上的模块冲突。

```
$ tree
  swigpackagefoo/__init__.py
  swigpackagefoo/swigsubpackagebar/__init__.py 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T02:27:12.550

如果我理解正确，如果无法导入已编译的模块，您希望能够“模拟”它吗？

所以，如果`swigsubpackagebar`你有：

```
swigsubpackagebar.aFunc(aString) -> outString 
```

然后你会想要一个“模拟”模块来支持相同的接口，但不做任何事情。

不要试图通过一些即时模块定义来解决这个问题，只需定义另一个提供您想要的接口的模块：

```
## swigMock.py ##
def aFunc(aString):
    return aString 
```

然后像这样构造你的导入语句：

```
## main.py ##
try:
   import swigpackagefoo.swigsubpackagebar as swigModule
except ImportError:
   import swigMock as swigModule

print swigModule.aFunc("FOO") 
```

如果`swigsubpackagebar`实际上是一个类，它几乎是相同的概念：

```
## swigMock.py ##
class swigsubpackagebar(object):
    pass 
```

并再次使用`as`关键字将其命名为相同：

```
## main.py ##
try:
   import swigpackagefoo.swigsubpackagebar as swigClass
except ImportError:
   import swigMock.swigsubpackagebar as swigClass

aClass = swigClass() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-31T08:54:01.180

是的你可以！

```
import sys
import types

my_module = types.ModuleType('my_module')
sys.modules['my_module'] = my_module
my_code = '''
def f():
    print('my_module.f says hello')
'''
exec(my_code, my_module.__dict__)
my_module.f() 
```

来源： [如何从字符串中的代码加载模块？](https://stackoverflow.com/questions/5362771/how-to-load-a-module-from-code-in-a-string#5363237)

# unit-testing - 计算剩余时间和已用时间

> ID：13888656
> 
> 赞同：0
> 
> 时间：2012-12-15T02:09:08.423
> 
> 标签：unit-testing, c#-4.0

我正在编写一种方法来帮助我计算任务时间。每项任务都必须在创建后的数小时内完成。

期望的行为：我需要显示完成任务的剩余数量。正数 剩余时间 负数 任务超出指定时间。

**这是计算时差的正确实现吗？**

到目前为止，我的进展是这样的，我已经创建了几个测试：

```
/// <summary>
    /// Displays number of hours left for resolution as positive and negative number for missed targets.
    /// </summary>
    /// <param name="createdTime"></param>
    /// <param name="closedDateTime"></param>
    /// <param name="resolutionTime"></param>
    /// <returns>Timespan</returns>
    public static TimeSpan GetNumberOfHoursLeftToResolution(DateTime createdTime, DateTime? closedDateTime, long resolutionTime)
    {
        var now = DateTime.Now;
        var diff = new TimeSpan(0);
        bool isNegative = false;

        var startWithResolutionHours = createdTime.AddTicks(resolutionTime);

        // task is closed
        if (closedDateTime.HasValue)
        {
            diff = (startWithResolutionHours - closedDateTime.Value);

            isNegative = closedDateTime.Value >= startWithResolutionHours;
        }
        else
        {
            // task is still open
            diff = (startWithResolutionHours - now );
            isNegative = now.AddTicks(resolutionTime) >= startWithResolutionHours;
        }

        var result = new TimeSpan(diff.Days, diff.Hours, diff.Minutes + ((diff.Seconds > 0) ? 1 : 0), 0);

        if (isNegative)
        {
            return -result;
        } 

        //count of all difference between times
        return result.Add(-new TimeSpan(resolutionTime));
    } 
```

我写了几个测试

```
 [TestMethod]
        public void TaskHasNotBeenResolvedsAndHasAllTimeLeftForResolution()
        {
            var d = DateTime.Now;
            var resolutionTime = new TimeSpan(2, 0, 0).Ticks; 

            var expectedResult = -new TimeSpan(2, 0, 0);

            var actualResult = TimeCalculation.GetNumberOfHoursLeftToResolution(d, null, resolutionTime);

            Assert.AreEqual(expectedResult, actualResult);
        }

        [TestMethod]
        public void TaskHasNotBeenResolvedAndHasFrom8Hours6Left()
        {
            var d = DateTime.Now.AddHours(-2);
            var resolutionTime = new TimeSpan(8, 0, 0).Ticks;

            var expectedResult = -new TimeSpan(6, 0, 0); // 6 hours

            var actualResult = TimeCalculation.GetNumberOfHoursLeftToResolution(d, null, resolutionTime);

            Assert.AreEqual(expectedResult, actualResult);
        }

        [TestMethod]
        public void TaskHasNotBeenResolvedAndHas20MinLeft()
        {
            var d = DateTime.Now.AddHours(-4).AddMinutes(20);
            var resolutionTime = new TimeSpan(4, 0, 0).Ticks;

            var expectedResult = -new TimeSpan(0, 20, 0); // -20min

            var actualResult = TimeCalculation.GetNumberOfHoursLeftToResolution(d, null, resolutionTime);

            Assert.AreEqual(expectedResult, actualResult);
        }
        [TestMethod]
        public void TaskHasNotBeenResolvedAndHas1MinLeft()
        {
            var d = DateTime.Now.AddHours(-4).AddMinutes(1);
            var resolutionTime = new TimeSpan(4, 0, 0).Ticks;

            var expectedResult = - new TimeSpan(0, 1, 0); // - 1min

            var actualResult = TimeCalculation.GetNumberOfHoursLeftToResolution(d, null, resolutionTime);

            Assert.AreEqual(expectedResult, actualResult);
        }
        [TestMethod]
        public void TaskHasNotBeenResolvedAndHasNoMinutesLeft()
        {
            var d = DateTime.Now.AddHours(-4);
            var resolutionTime = new TimeSpan(4, 0, 0).Ticks;

            var expectedResult = new TimeSpan(0, 0, 0); // 0 min

            var actualResult = TimeCalculation.GetNumberOfHoursLeftToResolution(d, null, resolutionTime);

            Assert.AreEqual(expectedResult, actualResult);
        }
        [TestMethod]
        public void TaskHasNotBeenResolvedInTimeOneMinOverdue()
        {
            var d = DateTime.Now.AddMinutes(1);
            var resolutionTime = new TimeSpan(4, 0, 0).Ticks;

            var expectedResult = new TimeSpan(0, 1, 0); // 1 min

            var actualResult = TimeCalculation.GetNumberOfHoursLeftToResolution(d, null, resolutionTime);

            Assert.AreEqual(expectedResult, actualResult);

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T02:38:11.220

我会缩短一点

```
 public static TimeSpan GetNumberOfHoursLeftToResolution(DateTime createdTime,
                                   DateTime? closedDateTime, long resolutionTime)
    {
        var currentPoint = closedDateTime ?? DateTime.Now;
        return new TimeSpan(resolutionTime - (currentPoint - createdTime).Ticks);
    } 
```

# javascript - 我应该如何将用户的登录状态传递给我的 Ember.js 应用程序？

> ID：13888657
> 
> 赞同：5
> 
> 时间：2012-12-15T02:09:14.620
> 
> 标签：javascript, authentication, ember.js

我有一个交互式 Ember 应用程序，其中有很多选项仅适用于登录用户。例如，可能有一个帖子列表，然后有另一个指向*我的帖子*的链接，这些链接与用户相关。

我想到了两个问题：

*   如果用户登录，我如何告诉应用程序，也许他的数据？
*   如何根据他的登录状态隐藏特定功能和项目？

有没有解决这个问题的最佳实践？我想登录过程本身不会那么复杂，但这`if logged_in? do_x else do_y`对我来说是一个很大的未知数。我应该在哪里存储全局用户状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:20:25.653

如果您使用的是 ember 路由器，那么我的建议是构建这样的解决方案

**登录控制器**

```
App.LoginController = Ember.Controller.extend({
    login: function(params){ /* Your logic here */ },
    logout: function(params){ /* Your logic here */},

    user_data_hash: { first_name: "The", last_name: "Hobbit"},

    is_logged_in: (function() {
        /* do some logic and return true or false */
    }).property('some_item_on_user_data_hash')

    just_logged_in: (function() {
        /* do some logic and return true or false */
    }).property('some_item_on_user_data_hash') 
```

然后在您的路由器中，在您允许导航到受保护的路线之前，检查该`LoginController`对象。这个例子取自[这个答案](https://stackoverflow.com/a/11192467/701368)。

```
root: Ember.Route.extend({
    index: Ember.Route.extend({
        enter: function(router) {
            var logged_in = router.get('loginController.is_logged_in'); /*Or in older ember builds `router.getPath('loginController.is_logged_in');`*/
            var just_logged_in = router.get('loginController.just_logged_in'); /*Or in older ember builds `router.getPath('loginController.just_logged_in');`*/
            Ember.run.next(function() {
                if (logged_in && just_logged_in) {
                    router.transitionTo('loggedIn');
                } else if (!logged_in) {
                    router.transitionTo('loggedOut');
                }
            });
        }
    }),

    loggedIn: Ember.Route.extend({
        // ...
    }),

    loggedOut: Ember.Route.extend({
        // ...
    })
}) 
```

# java - 类型中的方法不适用于参数

> ID：13888663
> 
> 赞同：4
> 
> 时间：2012-12-15T02:09:39.660
> 
> 标签：java, object, arguments, processing

我在这里浏览了很多帖子，但看不到我需要的解决方案...

我收到错误：

```
the method initTimer(untitled.Object, String, int int) in the type untitled.TimerClass is not applicable for the arguments (untitled.Toon, String, int, int) 
```

它让我发疯。

```
 timers.initTimer(character, "regenAdd", 0,3); 
```

上面的行是引发错误的行，以下是函数：

```
public void initTimer(final Object obj, final String method, int delay, int period) {
delay*=1000;
period*=1000;

final Class<?> unknown = obj.getClass();

new Timer().schedule(new TimerTask() {
  public void run() {
    try {
      //get the method from the class 
      Method whatToDo = unknown.getMethod(method, null);
      try {
        //invoke() the object method
        whatToDo.invoke(obj);
      } catch(Exception e) {
        println("Exception encountered: " + e);
      }
    } catch(NoSuchMethodException e) {
      println("Exception encountered: " + e);
    }
    runState = getTimerState();

    if (!runState) {
      println("timer dead");
      this.cancel();
    }
  }
}
, delay, period);
} 
```

提前感谢任何可以提供帮助的人:)

附加信息：

> runState 是一个布尔值，以防万一你猜不到，而 character 是 Toon 类的一个实例；上述方法在 TimerClass 类中，'timers' 是该类的一个实例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T03:21:24.273

错误信息

> `initTimer(untitled.Object, String, int int)`类型中的方法`untitled.TimerClass`不适用于参数`(untitled.Toon, String, int, int)`

`untitled.Toon`是由于没有延伸的事实`untitled.Object`。它当然会扩展`java.lang.Object`，这就是为什么从源代码中无法立即看出原因的原因。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-24T04:33:41.413

此外，另一个错误是 initTimer(untitled.Object, String, int) 被称为 (untitled.Toon, String, int, int) - 注意参数数量的差异 - 方法声明中的 1 个 int 和调用方法。

请记住也纠正它。

# java - 如何释放 ImageIcon 分配的内存？我有一个带有“new ImageIcon”的无限循环，我需要在显示后释放每个图像。

> ID：13888666
> 
> 赞同：-2
> 
> 时间：2012-12-15T02:10:30.787
> 
> 标签：java, swing, memory, memory-management, imageicon

如何释放 ImageIcon 分配的内存？我有一个带有“new ImageIcon ...”的无限循环，我需要在屏幕上显示每个图像后释放它分配的内存。图像之间的显示间隔为 200 毫秒。有没有人有一个简单有效的解决方案来避免不断增长的内存消耗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T05:20:49.923

如果您不重用图像并想丢弃系统缓存的数据，请查看[`ImageIcon#getImage#flush`](http://docs.oracle.com/javase/7/docs/api/java/awt/Image.html#flush%28%29)

> 刷新此 Image 对象正在使用的所有可重构资源。这包括为渲染到屏幕而缓存的任何像素数据，以及用于存储图像数据或像素（如果可以重新创建）的任何系统资源。图像被重置为类似于首次创建时的状态，因此如果再次渲染，则必须重新创建图像数据或再次从其源中获取图像数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T02:32:31.443

只需在图像的最终绘制之后，说`images.get(i)`删除持有的图像：`images.set(i, null)`。通过这种方式，垃圾收集器可以将其删除。

# flash - 在 Flash Player 10+ 中从浏览器对 Flash 剪贴板功能进行单元测试的任何自动化方法

> ID：13888667
> 
> 赞同：1
> 
> 时间：2012-12-15T02:11:29.777
> 
> 标签：flash, browser, actionscript, automated-tests, zeroclipboard

*在 Flash Player 10+ 中，当且仅当*用户与 Flash 对象的交互（例如，用户单击 Flash 按钮）触发基于浏览器的 SWF 时，它才能注入用户的剪贴板。这是使用`flash.desktop.Clipboard.generalClipboard`对象的`clear`和`setData`方法完成的。

我已经在许多网络应用程序中使用了这个技巧（例如，通过[ZeroClipboard](https://github.com/jonrohan/ZeroClipboard)和我自己以前的类似实现），但现在我想尽可能地围绕它进行一些自动化测试。有没有办法做到这一点？

我浏览了一些，但没有发现任何被**证明**可以用于这个非常特定目的的东西（来自我能找到的任何相关文档、博客等）：

*   FlashSelenium 仅依赖于`ExternalInterface`回调，这不算作用户交互。
*   FlexUnit 似乎不是基于浏览器的。
*   Adobe Genie 可能有效，也可能无效，老实说，我找不到足够有用的文档来说明。
*   PhantomJS 1.4.x（和更早的版本）支持 Flash 并且*可以*发送“真实的”用户事件，所以这似乎是最好的选择。但是，我不喜欢使用落后 5 个次要版本（超过 1 年）的 PhantomJS 版本。有没有人使用 PhantomJS 来自动化 Flash 交互，可以确认它有效并提供一些建议？

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T18:47:11.200

你看过像 GorillaLogic 的 FlexMonkey 这样的东西吗？它允许您通过记录您与应用程序的交互来进行自动化功能测试。它已停产，但他们的网站上仍有下载链接。

他们有一个新产品 MonkeyTalk，但目前它只支持移动项目（尽管他们的一些文档说它支持 Web 和桌面项目，但目前不支持）

# jquery - 从循环中的ajax回调创建2个ul，最多10个li

> ID：13888670
> 
> 赞同：0
> 
> 时间：2012-12-15T02:12:10.287
> 
> 标签：jquery, html-lists, each

在我的 xml 响应中，我从服务器返回了 50 多个项目。我知道在服务器上处理会更好，但这是一个请求：

制作 2 个打开`<ul>`和关闭列表，`<\ul>`每个列表都有 10 个来自响应的项目​​。没有订购只是从头开始计算。

我的循环现在看起来像这样：

```
var strHtml = '<ul>';
$(xml).find('Books row').each(function()
{
   strHtml += '<li><a href ="mylink">sometext</a></li>';
   // ...
});
strHtml += '<\ul>';
$('#category').empty().append(strHtml); 
```

我需要的是 2 个列表，所以我必须在循环中处理打开和关闭 UL 标记。像这样的东西，但我不确定我是否做得很好：

```
var itemCounter = 1,
    strHtml ='';

    $(xml).find('Books row').each(function()    //note: function( index )
    {
       if (itemCounter  == 1){
         // first iteration opens <ul>
         strHtml += '<ul>'; 
       }
       else if(itemCounter > 10){
         // 10th list item created. 
         // close first UL and open next UL
          strHtml += '</ul><ul>';
       }
       else if(itemCounter > 20){
         // max items allowed detected
         // close <ul> and break loop
         strHtml += '</ul>';
         return;
       }

       // regular li
       strHtml += '<li><a href ="mylink">sometext</a></li>';
       itemCounter++;

    });
    $('#category').empty().append(strHtml); 
```

你会怎么处理这个？

边注：

我的 html/css 结构需要有 2 个垂直并排的列表。我发现最好的结果是两个并将它们向左浮动，而不是有一个列表并浮动每个项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T02:20:16.300

所有打开和关闭和检查柜台的东西似乎有点繁琐，还有这一行：

```
else if(itemCounter > 10){ 
```

每次计数器高于时都会为真，`10`因此它永远不会进入最后一个`else if`块。

我将所有 li 元素放入一个数组中，然后[`.slice()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)从数组中取出[`.join()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)：

```
var lis = [];
$(xml).find('Books row').each(function(){
   lis.push('<li><a href ="mylink">sometext</a></li>');
   if (lis.length === 20)
      return false; // break out of .each()
});

var $cat = $("#category").empty();
for (var i = 0; i < lis.length; i += 10)
    $cat.append('<ul>' + lis.slice(i,i+10).join("") + '</ul>');
​ 
```

演示：http: [//jsfiddle.net/nRtmj/1/](http://jsfiddle.net/nRtmj/1/)

请注意，因为我已经在一个循环中完成了`.slice()`and `.join()`，所以如果您更改第一个循环使其不会在 20 个元素处停止，您可以轻松创建额外的 ul 元素：http: [//jsfiddle.net/nRtmj/2/](http://jsfiddle.net/nRtmj/2/)或如果您想更改每个列表的元素数量只需将其更改`10`为其他内容：http: [//jsfiddle.net/nRtmj/3/](http://jsfiddle.net/nRtmj/3/)

# git - 查看未发布的 Git 提交到 Gerrit

> ID：13888671
> 
> 赞同：2
> 
> 时间：2012-12-15T02:12:12.690
> 
> 标签：git, gerrit

我想要完成的事情类似于这个问题/答案中的内容：[查看未推送的 Git 提交](https://stackoverflow.com/questions/2016901/viewing-unpushed-git-commits)。我想知道我的本地计算机中是否有任何东西在 gerrit 服务器中没有“备份”。

当尝试使用该问题中的建议时，当使用 Gerrit 时，结果还列出了属于尚未接受回购的已发布提交类别的提交。它们`published/BRANCH_NAME`在 gitk 中用标记显示。我只想显示尚未推送到远程 gerrit 存储库的提交，即使它们未被接受。

例如，如果我`git log --graph --branches --not --remotes --decorate`在我得到的提交中使用

```
commit 51blahblah123...456blah42e3 (refs/published/blah_fix, blah_fix)
Author: xyz <...>
Date:   Wed Jul 22 12:28:39 2012 -0500

  Commit description

  Change-Id: I83ae...blah...184 
```

这些是我想跳过的提交类型。在 gitk 中，最后发布的提交显示为紫色背景，而不是分支名称上的绿色背景。有`--remotes`那些的等价物吗？

我也尝试过使用`git log origin/master..HEAD`，但出现以下错误：

```
 fatal: ambiguous argument 'origin/master..HEAD': unknown revision or path not in the working tree. 
```

因此，我尝试使用特定的修订版（我认为我使用的是工作分支而不是远程的主分支）并且它起作用了，但是这种绑架违背了目的，因为我必须去寻找所有的分支。

我也考虑`git log @{u}.. --graph --decorate`过，但这似乎跳过了我无法通过远程跟踪创建（错误地）的分支。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:38:37.053

此命令将列出所有可以从本地分支访问但不在远程上的提交（假设您的远程被调用`origin`）：

```
git ls-remote origin | cut -f 1 | xargs git log --graph --decorate --branches --not 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-20T13:48:18.507

为了查看是否已将提交推送到远程存储库（Gerrit 的变更集记录在存储库中，因此它们将出现在`git ls-remote`输出中，如 Chronial 所述），您可以从输出中 grep 本地提交。

假设您的 Gerrit 存储库是`origin`远程的：

使用`git ls-remote --quiet`您可以获得所有远程引用的列表，并且`git log --pretty="%H" origin/master..master`您可以获得尚未合并到存储库的提交的提交哈希。

因此，以下 Fish shell 代码将为您提供存储库中存在的更改：

```
for i in (git log --pretty="%H" origin/master..master)
    git ls-remote --quiet | grep $i
end 
```

如果`git ls-remote`返回一行，则提交已被推送，否则不会。然后根据需要将此流程调整为您的环境:)

为了性能，您可能希望将输出保存`git ls-remote`到变量并从那里检查，而不是总是再次获取远程数据。

如果您可以使用[Gerrit 的 SSH API](https://gerrit-documentation.storage.googleapis.com/Documentation/2.13.6/cmd-query.html)，您可以使用

```
ssh -p 29418 -l GERRIT_USER GERRIT_SERVER gerrit query --format=json 7b5a1d510 
```

而不是`git ls-remote`获取详细信息的 JSON 响应，在哪里`rowCount`可以知道匹配的数量。

# python - Scrapy - 使用 xPathSelector 提取嵌套的“img src”

> ID：13888673
> 
> 赞同：7
> 
> 时间：2012-12-15T02:12:14.913
> 
> 标签：python, xpath, web-scraping, scrapy

我对使用 Scrapy 或 python 比较陌生。我希望从几个不同的链接中提取，但我在使用 HTMLXPathSelector 表达式（语法）时遇到问题。我查看了大量文档以了解正确的语法，但还没有找到解决方案。

**这是我尝试从中提取“img src”的链接示例：**

[我正在尝试从中提取 img src url 的页面](http://www.geek.com/articles/gadgets/kindle-fire-hd-8-9-on-sale-for-50-off-today-only-20121210/)

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector

class GeekSpider(BaseSpider):
    name = "geekS"
    allowed_domains = ["geek.com"]
    start_urls = ["http://www.geek.com/articles/gadgets/kindle-fire-hd-8-9-on-sale-for-50-off-today-only-20121210/"]

    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        imgurl = hxs.select("//div[@class='article']//a/img/@src").extract()
        return imgurl 
```

我想我已经弄清楚了 x.select 语句的语法，但是由于我不熟悉这种语法/方法，所以我不确定。

这是我的 items.py 文件，基本上遵循了scrapy教程：

```
from scrapy.item import Item, Field

class GeekItem(Item):
    imgsrc = Field() 
```

**澄清一下：**我要做的是提取页面上的 img src url。我不需要提取我已经弄清楚的所有图像 src（容易得多）。

我只是想缩小范围，只提取 img src 的特定 url。*（我将在本网站的多个页面上使用它）*

**任何帮助是极大的赞赏！**

**编辑 - 更新代码**我遇到了一些语法错误 geek = geek() 所以我稍微改变了它，希望更容易理解和运行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T03:29:48.307

我相信你的 xpath 表达式应该更像这样。我在另一个页面（[亚马逊运输中心文章](http://www.geek.com/articles/gadgets/inside-amazons-ridiculously-huge-phoenix-arizona-shipping-center-20121130/)）上对其进行了测试，它返回了所有十张可点击的图像。

```
geek['imgsrc'] = x.select("//div[@class='article']//a/img/@src").extract() 
```

要解决您的其他问题，您需要将 GeekItem 导入您的 GeekSpider 代码。

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from geekspider.items import GeekItem # I'm guessing the name of your project here

class GeekSpider(BaseSpider):
    name = "geekS"
    allowed_domains = ["geek.com"]
    start_urls = ["http://www.geek.com/articles/gadgets/kindle-fire-hd-8-9-on-sale-for-50-off-today-only-20121210/"]

    def parse(self, response):
        item = GeekItem()
        hxs = HtmlXPathSelector(response)
        item['imgsrc'] = hxs.select("//div[@class='article']//a/img/@src").extract()
        return item 
```

# objective-c - 你如何移动一个 NSImageView？

> ID：13888675
> 
> 赞同：3
> 
> 时间：2012-12-15T02:12:19.220
> 
> 标签：objective-c, macos, cocoa, xcode4.5

我有这种情况：

我有一个包含自定义 NSImageView 的 NSView。我正在尝试将 NSImageView 从视图控制器中移出，但到目前为止还没有成功。

这是视图控制器的标题：

```
#import <Cocoa/Cocoa.h>

#include "MyAppDragAndDropImageView.h"

@interface MyAppViewController : NSViewController <MyAppDragAndDropImageViewDelegate>

@property (nonatomic,assign) IBOutlet MyAppDragAndDropImageView *dragAndDropImageView;

@property (nonatomic,assign) IBOutlet NSTextField *workingFileLabel;
@property (nonatomic,assign) IBOutlet NSTextField *workingFileSizeLabel;

@property (nonatomic,assign) IBOutlet NSButton *clearButton;

-(IBAction)onClearButtonClicked:(id)sender; 
```

所有 IBOutlets 都已从 Interface Builder 连接。

我在视图控制器中使用此代码来移动自定义 NSImageView ...

```
-(void)awakeFromNib
{
    //dragAndDropImageView frame
    NSRect ddivFrame = [dragAndDropImageView frame];
    ddivFrame.origin.x = SOME_NUMBER;
    ddivFrame.origin.y = SOME_NUMBER;

    [dragAndDropImageView setFrame:ddivFrame];
    [dragAndDropImageView setNeedsDisplay:YES];

} 
```

......但是什么也没有发生！

使用 NSLog 我发现框架“x”和“y”已经更新，但它显示在旧位置！有什么线索吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T22:46:52.927

我找到了一个解决方案：

```
-(void)awakeFromNib
{
    //dragAndDropImageView frame
    NSRect ddivFrame = [dragAndDropImageView frame];
    ddivFrame.origin.x = SOME_NUMBER;
    ddivFrame.origin.y = SOME_NUMBER;

    [[dragAndDropImageView animator] setFrame:ddivFrame];

} 
```

这完美无瑕！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T01:21:38.343

> `dragAndDropImageView`并`clearButton`在视图内居中。在`awakeFromNib`我将它们设置为屏幕外，然后我使用 NSAnimation 将它们滑入。

为什么不在笔尖中将它们设置为隐藏/`alphaValue`到`0`，然后让您的 NSViewAnimation 显示它们（淡入它们）并将它们移动到位？

# bash - 循环遍历（可能的）多个参数

> ID：13888676
> 
> 赞同：1
> 
> 时间：2012-12-15T02:12:41.817
> 
> 标签：bash

我编写了一个小 bash 脚本来检查网站是否启动（使用 isup.me）。它目前有效（在终端中我称之为“sh isup.sh stackoverflow.com”）。我想做的是调用“sh isup.sh stackoverflow.com someother.site”（两个参数）并遍历每个参数的输出。这是我的代码：

```
#!/bin/bash
theSite=$1
curl isup.me/$theSite | grep 'just' | sed s'/<a href="//' | sed s'/" class="domain">//' | sed s'/<\/a>//' | sed s"/http:\/\/$theSite//" | sed s'/<\/span>//' 
```

我的另一个（非关键）问题是：我可以摆脱 curl 功能的“% Total % Received % Xferd Average Speed Time Time Time Time Current”位吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T02:21:18.230

循环遍历`$@`数组将为您提供从第一个开始的参数。

```
for theSite
do
  ...
done 
```

请注意，默认情况下会`for`循环`$@`.

该`-s`参数将告诉 cURL 保持沉默。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T02:28:30.570

`curl`接受多个 URL，因此您只需要构建列表并执行单个命令。[您可以通过参数扩展](http://wiki.bash-hackers.org/syntax/pe)非常简单地做到这一点。顺便说一句，您不需要使用所有这些管道。您可以使用单个 gsed 或 awk 命令修改整个内容。我会这样写：

```
#!/bin/bash

curl -s "${@/#/http://isup.me/}" |
    awk -F '[<>]' '/just/{
        sub("http://", "", $3);
        print $3 $NF;
    }' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T02:19:24.887

一种方法是像这样循环......

```
#!/bin/bash

while (( "$#" )); do
    theSite=$1
    curl isup.me/${theSite} 2>/dev/null | grep 'just' | sed s'/<a href="//' | sed s'/" class="domain">//' | sed s'/<\/a>//' | sed s"/http:\/\/$theSite//" | sed s'/<\/span>//'
    shift
done 
```

这会在仍有参数时进行迭代，然后[**`shift`**](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_09_07.html)将参数向左。

`2>/dev/null`重定向[`stderr`](https://stackoverflow.com/tags/stderr/info)到`/dev/null`，因此您看不到“额外”输出。

[Ignacio Vazquez-Abrams 的答案](https://stackoverflow.com/a/13888723/78845)中的`for`-loop更好，因为您不会冒险“忘记”并创建无限循环。您应该使用这种方法。`shift`

另一种方法是使用[**`w3m`**](http://w3m.sourceforge.net/)呈现 HTML 并使脚本更简单：

```
#!/bin/bash

for theSite; do
    w3m -dump isup.me/${theSite} | grep "${theSite}"
done 
```

# ios - 将视频托管和流式传输到 ios 应用程序

> ID：13888677
> 
> 赞同：0
> 
> 时间：2012-12-15T02:12:49.223
> 
> 标签：ios, video, stream

我即将构建一个最初显示高质量视频缩略图的应用程序。当用户点击缩略图时，他们将通过 iOS 的应用内支付系统支付视频费用，一旦完成，视频将打开并开始在 Quicktime（iphone 原生视频播放器）中播放。你能建议我应该在哪里托管我的视频吗？苹果是否也提供视频上传，或者是否有一个简单易用的工具可以实现这一点？我正在寻找一种服务，可以让我在需要时上传或删除高质量的视频，以便非技术人员也可以管理。然后我可以轻松地将这些视频链接到我的应用程序。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:36:05.353

取决于格式，如果它只是渐进式下载 mp4，您可以与任何托管公司签约，根据您的需要，它们的起价为每月 5.00 - 100 美元。价格较高的提供可以运行 .net 或 php 的专用服务器，例如，您可以使用每月 5.00 托管的服务，对一个简单的 php 应用程序进行安全保护或获得一个预先构建的应用程序。

如果您想使用 HLS 进行真正的流式传输，那么您需要一个可以支持它的服务器，虽然有点贵的是 wowzma，价格各不相同，但通常很贵。

# c - c：segmentation fault（选择排序）

> ID：13888678
> 
> 赞同：2
> 
> 时间：2012-12-15T02:12:58.133
> 
> 标签：c, arrays, sorting

```
#include<stdio.h>
void selsort(int a[],int s)
{
    int min,temp,i,j;       
    for(i = 0; i < s ; i++)
    {
        min = 0;
        for(j = i+1 ; j < s; j++)
        {
            if(min > a[j])
            {
                min = j;
            }
        }
        temp = a[i];
        a[i] = a[min];
        a[min] = temp;
        for (j=0;j<s;j++)
        {
            printf("%d",a[i]);
        }
        printf("\n");   

    }
}
main()
{
        int i,a[5];
        int size = 5;
        printf("Enter elements of the array");
        for(i=0;i<size;i++)
        {
            scanf("%d",&a[i]);
        }
        selsort(a[5],size);
} 
```

错误如下：

```
selsort.c:35:2: warning: passing argument 1 of ‘selsort’ makes pointer from integer without a cast [enabled by default]
selsort.c:2:1: note: expected ‘int *’ but argument is of type ‘int’ 
```

将来如何避免此问题的任何提示都将非常有帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T02:15:23.010

你应该这样调用你的函数：

```
selsort(a, size); 
```

`a[5]`表示“索引 5 处的元素”（顺便说一下，在数组末尾之后：最大的合法元素`int a[5]`位于 index 处`4`）。

您还应该更换

```
min = 0; 
```

和

```
min = i; 
```

并像这样使用它：

```
if(a[min] > a[j]) ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T02:16:45.797

在函数调用`selsort(a[5], size);`中，您只传递了 a 的第 5 个 [不存在] 成员。你要`selsort(a, size);`

# javascript - 未捕获的类型错误：无法读取未定义的属性“0”

> ID：13888685
> 
> 赞同：1
> 
> 时间：2012-12-15T02:14:36.763
> 
> 标签：javascript

在这里，我有带类的 div`box-title`和`span`带相关产品的 div，我想将其文本更改为 `'Choose Extra To make It More Special'`为什么会出现此错误，请任何人告诉我。

```
function onloadCall()
{   
    var divs = document.getElementsByClassName('box-title');
    for(var i = 0; i < divs.length; i++)
    {
        var div = divs[i];
        if(!div) break
        var span = div.getElementsByTagName('span')[0];
        if(span[0].innerHTML == 'Related Products') 
            span[0].innerHTML='Choose Extra To make It More Special';
    }
}
window.addEventListener('load', onloadCall, false); 
```

实际上，我的 HTML 标签是这样的：

```
<div class="box-title"><strong><span>Related Products<span></strong></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T02:18:01.713

改变：

```
if(span[0].innerHTML == 'Related Products') 
    span[0].innerHTML='Choose Extra To make It More Special'; 
```

为了：

```
if(span.innerHTML == 'Related Products') 
    span.innerHTML='Choose Extra To make It More Special'; 
```

它应该工作。

此外，您可以更改以下内容：

```
var span = div.getElementsByTagName('span')[0]; 
```

为了：

```
var span = div.getElementsByTagName('span'); 
```

并保持其他代码不变。如果这些都不起作用，请确保`span`您的 html 文件中有任何标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T02:19:10.263

```
var span = div.getElementsByTagName('span')[0];
if(span[0].innerHTML == 'Related Products') 
    span[0].innerHTML='Choose Extra To make It More Special'; 
```

我看到你抓取数组的第一个索引，然后在它不是数组时尝试抓取它的第一个索引。

**尝试：**

```
var span = div.getElementsByTagName('span')[0];
if(span.innerHTML == 'Related Products') 
    span.innerHTML='Choose Extra To make It More Special'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T02:23:56.850

```
if(!div) {
    break;
}
var span = div.getElementsByTagName('span')[0];
if(span && span.innerHTML == 'Related Products') {
    span.innerHTML = 'Choose Extra To make It More Special';
} 
```

[**演示**](http://jsfiddle.net/KfHVt/)

# node.js - Sequelize.js 如何从 MySQL 映射 varbinary 类型

> ID：13888689
> 
> 赞同：1
> 
> 时间：2012-12-15T02:15:01.773
> 
> 标签：node.js, sequelize.js

我正在尝试使用 Sequelize.js 映射我的 MySQL 表中的所有列。

mysql 表 "User" 有一个 Password 列作为 type `varbinary(50)`。

Sequelize.js 是否支持 varbinary 类型的映射？[我在Sequelize docs](http://www.sequelizejs.com/)中没有看到这样的选项，还有其他方法可以映射它吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T13:52:25.917

sequelize 中的内置类型只是映射到字符串，所以不是：

```
User = sequelize.define('user', {
  Password: Sequelize.STRING
}); 
```

您可以像这样编写自己的字符串：

```
User = sequelize.define('user', {
  Password: 'VARBINARY(50)'
}); 
```

仅当您希望 sequelize 为您创建表时才需要这样做（`sequelize.sync()`），如果您使用的是预先创建的表，那么您编写的类型无关紧要。唯一的例外是如果您使用的是`Sequelize.BOOLEAN`类型，它将 0 和 1 转换为它们的布尔值。

# java - 为什么javac在同一个类中找不到符号？

> ID：13888699
> 
> 赞同：1
> 
> 时间：2012-12-15T02:16:23.503
> 
> 标签：java, generics

该类是通用的，假设 `Generic<T>`它包含以下内容：

```
private int count;
public int Count()
{
  return count;
} 
```

它有一个引发编译器错误的方法。它找不到类的符号`Count()`（或`count`）`Generic<capture#940 of ? extends T>`并指向这些行：

```
public void set(Generic<? extends T> other)
{
  int something = other.Count();
  int somethingElse = other.count;
  //actions
} 
```

为什么在 中找不到符号`other`？我把它放在那里。此外，有关如何标记此问题的任何提示。我无法弄清楚如何将它与包范围、类调用、子类化、委托、命名空间等问题区分开来。没有人使用过“找不到符号”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T03:46:15.753

这是一个扩展评论，而不是答案。

以下程序在 Eclipse 中编译没有错误：

```
public class Generic<T> {
  private int count;
  public int Count()
  {
    return count;
  }
  public void set(Generic<? extends T> other)
  {
    int something = other.Count();
    int somethingElse = other.count;
  }
} 
```

Please add more information. If my program does not compile in your environment, you should post information about the compile. If my program does compiler, you could post a [Short, Self Contained, Correct, Example](http://sscce.org) that reproduces the problem.

# javascript - 如何匹配以几个字符序列之一开头的子字符串？

> ID：13888701
> 
> 赞同：0
> 
> 时间：2012-12-15T02:16:57.373
> 
> 标签：javascript, regex

我有一个字符串可以包含这些单词中的任何一个

> 发布
> 者 主题
> 教师
> 用户

单词之间的终止符是句号。所以完整的字符串可能看起来像这样

```
var string = 'Publish By: John Rellin.  Subjected By: jj@test.com.'; 
```

或者它可能是这样的

```
var string = 'Publish By: John Rellin.  Subjected By: jj@test.com. By Teacher: Jason Alexander'; 
```

或者可能是另一种变体

我正在尝试查看字符串中是否有任何这些单词。如果有`published by`，我希望在比赛中`match[1]`使用`Published By: John Rellin`

我对正则表达式很陌生并尝试了这个

```
string.match(/(Published By:|Subjected By|By Teacher|For user)/); 
```

但这并没有产生我希望的结果。

我不确定我将如何实现这一目标。我阅读了一些文档，但无法找到与我正在寻找的东西接近的东西。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T02:21:55.210

您的字符串有“Publish By”，而您的正则表达式有“Publish* *ED* * By”，它们不匹配

# objective-c - Objective-c - [super init] 返回什么？

> ID：13888702
> 
> 赞同：2
> 
> 时间：2012-12-15T02:17:04.170
> 
> 标签：objective-c

新的objective-c。写了一个代码片段来更好地理解初始化机制，最后问了几个问题。

```
@implementation MyClass    
    -(id) init
    {
        if (self) {
            i = 5;
            NSLog(@"self before init - %@ %p i=%d",[self className], &self, i);
        } else {
            NSLog(@"self is null???");
        }

        id someClass = [super init];
        NSLog(@"the result of super-init - %@ %p",[someClass className], &someClass);

        self = [super init];
        if (self) {
            NSLog(@"self after init - %@ %p %d",[self className], &self, i);
        } else {
            NSLog(@"self is null???");
        }

        return self;
    } 
```

`i`是一个私有实例变量`int`。

结果如下：

```
2012-12-14 18:01:26.403 Init[1621:303] self before init - MyClass 0x7fff5fbff848 i=5
2012-12-14 18:01:26.405 Init[1621:303] the result of super-init - MyClass 0x7fff5fbff838
2012-12-14 18:01:26.405 Init[1621:303] self after init - MyClass 0x7fff5fbff848 5 
```

真正让我吃惊的是 someClass 的类名是`MyClass`.

*   如何`NSObject`知道返回子类实例（不仅仅是类型匹配，它是完全相同的对象）？

我知道`init`多次调用并在调用之前初始化实例变量不是很好的形式，`init`但我只是在试验。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T02:33:34.107

您确实需要使用标准方案（或多或少）：

```
-(id)init {
    self = [super init];
    if (self) {
        // Do initialization stuff
    }
 } 
```

你的类是其他类的子类。调用`super init`运行超类的 init 例程。没有它，您的类没有正确初始化，并且可能会出现奇怪的故障。（但是，调用两次可能是不明智的`super init`，因为这可能会产生不良的副作用。）

在某些情况下，您不会调用`super init`，而是会`init`在您自己的类中调用 的版本。基本上，如果你有`initWithJunk:`and `init`，你可以用`initWithJunk:`call`[self init]`代替，`[super init]`这样`self init`会做的事情就可以完成并且不必在`initWithJunk:`.

如果您编写一个将`init...`方法添加到现有类的“类别”，这一点尤其重要——您必须调用某个版本`[self init]`以确保基类的初始化程序运行。

了解该`super init`方法不是（通常）用新实例*替换*现有实例，而是*初始化*其中属于超类的实例字段。从`super init`调用中接收“self”值的原因有两个：

1.  `nil`如果发生某种错误，init 例程可以返回 a 。
2.  在一些（罕见的）特殊情况下，init 例程可能会用不同的实例（例如，缓存版本）替换提供的实例。

# java - 在将文件的 URI 中的 & 号传递给 ProducerTemplate.sendBodyAndHeader() 时，它会失败

> ID：13888707
> 
> 赞同：-1
> 
> 时间：2012-12-15T02:17:57.177
> 
> 标签：java, apache-camel

当使用`ProducerTemplate.sendBodyAndHeader()`“文件”方案将文件发送到其目的地时，并且 URI 中的文件路径包含 & 符号，它无法传递文件并出现以下错误。

> org.apache.camel.ResolveEndpointFailedException：无法解析端点：file:///c%7C/IMM_SAN/Marketing/f77333bd-f96f-4873-b846-2f1dc5531a5a/2596/PB&J%20Generic%2007064782/transcoded/21726 由于：无法解析端点：file:///c%7C/IMM_SAN/Marketing/f77333bd-f96f-4873-b846-2f1dc5531a5a/25964/PB&J%20Generic%2007064782/transcoded/21726 由于：无效的 uri 语法：否？标记但是 uri 有 & 参数分隔符。检查 uri 是否缺少 ? 标记。

花几天时间尝试不同的重载来发送文件`send()`，甚至。`sendBody()``sendBodyAndHeader()``sendBodyAndHeaders()`

我事先尝试过`UrlEncoder.encode()`，当然不行。

我什至`URISupport.normalizeUri(String uri)`从骆驼核心源中调试了它，发现了一些有趣的东西。显然，在发送正文和标头之前，再多的编码都不会对我有任何好处，因为它似乎在进行自己的编码，而且似乎完全不正确。我认为这是`sendBodyAndHeader()`. 它在发送之前将 & 符号编码回 URI。这是不好的。我们为什么要这样做？我们有一个应用程序，它从一个部门读取文件并写入共享，另一个系统自动拾取这些文件并在文件处理完成时交付它。

请参阅下面的骆驼`URISupport.normalizeUri(String uri)`方法在此处对 URI 进行编码，这会将 & 符号放回文件路径中。

```
URI u = new URI(UnsafeUriCharactersEncoder.encode(uri)); 
```

因此，您根本看不到对 URI 中的文件路径进行任何预处理，因为 sendBodyAndHeader 会做任何感觉要做的事情。我想为此 API 添加一个新的重载以关闭规范化并按原样发送 URI。但想在这里查看是否有人有任何不那么激烈的选择。请注意，当＆符号位于文件方案的 URI 路径中时，这是一个问题。

```
ProducerTemplate prod = exchange.getContext().createProducerTemplate();
destPath = destPath.replace(':', '|');
destPath = destPath.replaceAll("\\\\", "/");
destPath = destPath.replaceAll("&", "%26");  // replace the ampersand
String query = "file:///" + destPath;
prod.sendBodyAndHeader(query, exchange.getIn().getBody(), Exchange.FILE_NAME, destFileName); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T09:34:42.293

如果您确实需要文件路径中的该字符，请使用 CamelFileName 标头以避免将端点 URI 与保留字符 & 混淆。

这个例子会将一个文件放入`c:\a&b`

```
public void sendAnyFile(Exchange e){
    ProducerTemplate pt = getContext().createProducerTemplate();
    pt.sendBodyAndHeader("file:///c:/",e.getIn().getBody(String.class), "CamelFileName", "a&b/hej.txt");
} 
```

# php - 在mysql行中添加每天的值

> ID：13888712
> 
> 赞同：0
> 
> 时间：2012-12-15T02:19:05.617
> 
> 标签：php, mysql, database

我有这张图片![在此处输入图像描述](../Images/8a6ca2ab34c17d1e00d782210bd4ab5e.png)

如何进行 mysql 查询来累加每天的`gained`积分？

我正在使用`while`循环遍历所有这些行（最后 50 行），它将显示“在 2012 年 12 月 15 日获得等”

```
DECEMBER 15, 2012
HISTORY ITEM 1 | 500+
HISTORY ITEM 2 | 500+
HISTORY ITEM 3 | 1500+
----PTS GAINED THIS DAY: 2500+

DECEMBER 14, 2012
HISTORY ITEM 1 | 500+
HISTORY ITEM 2 | 500+
----PTS GAINED THIS DAY: 1000+ 
```

等等。

这是我到目前为止所拥有的：`$getIt = mysql_query("SELECT SUM(gained) FROM`history `WHERE`uid `= '$logged[id]' AND`time `> $ts_yesterday ORDER BY`id`DESC") 或 die(mysql_error());

以及循环`$ts_yesterday = strtotime('yesterday', $status['4']);`的`$status`来源......显然引用了`mysql_fetch_array`该列`while``time`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T02:39:23.673

您可以使用 SELECT SUM(gained), DATE_FORMAT(created_at,"%Y-%m-%d") as created_day FROM history GROUP BY created_day

看[这里](http://www.cowboycoded.com/2010/04/19/mysql-group-by-day-month-or-year-using-a-timestamp-column/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T03:19:08.713

你可以试试`select sum(gained) from tablename groupby date`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T03:31:18.320

在我看来 sum() 和 group by 是适合你的方式。MySQL 的另一个很酷的特性是 group by 的 ROLL UP 修饰符。一探究竟

[http://forums.mysql.com/read.php?12,106959,106959](http://forums.mysql.com/read.php?12,106959,106959) [http://dev.mysql.com/doc/refman/5.6/en/group-by-modifiers.html](http://dev.mysql.com/doc/refman/5.6/en/group-by-modifiers.html)（开始谈论卷向上功能大约在页面下方的 1/4。）

# haskell - 已弃用的 -XDatatypeContext 的替代方案？

> ID：13888720
> 
> 赞同：5
> 
> 时间：2012-12-15T02:20:31.230
> 
> 标签：haskell

假设我想定义这样的树：

```
{-# LANGUAGE DatatypeContexts #-}
class Node a where
  getContent :: (Num a) => a

data (Node a) => Tree a = Leaf a
                        | Branch a (Tree a) (Tree a) 
```

-XDatatypeContexts 现在已弃用。没有它是否可以做类似的事情？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-15T02:34:02.243

你*确定*数据类型上下文确实做了你认为的事情吗？它被[弃用了，因为它基本上是无用](https://stackoverflow.com/q/7438600/157360)的，并且被广泛认为是一个错误功能，因为它所做的只是强迫你添加额外的约束，而不提供任何关于类型的保证，而不是你没有它所拥有的类型。

替换，例如，实际上*做*一些有用的事情，是[GADT 语法](https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#generalised-algebraic-data-types-gadts)。您的类型的等效项如下所示：

```
data Tree a where
    Leaf :: (Node a) => a -> Tree a
    Branch :: (Node a) => a -> Tree a -> Tree a -> Tree a 
```

在这种情况下，您`Node`在创建`Tree`值时需要约束，但是当对值进行模式匹配时，`Tree`您还会自动保证`Node`实例存在，从而使实例可用，甚至不需要在`Tree a`作为参数接收的函数类型中使用它。

# android - 为什么我无法在 android 中更新电子邮件地址？

> ID：13888732
> 
> 赞同：3
> 
> 时间：2012-12-15T02:22:41.093
> 
> 标签：android, android-contacts, contactscontract, android-contentresolver

```
 ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
    ops.clear();

    ops.add(ContentProviderOperation.newUpdate(ContactsContract.Data.CONTENT_URI)
            .withSelection(Data._ID + "=?", new String[]{String.valueOf(id)})
            .withValue(Email.DATA, "somebody1@android.com")
            .build());

    try 
    {
        context.getContentResolver().applyBatch(ContactsContract.AUTHORITY, ops);
    } 
```

日志没有显示任何内容。但是邮件没有更新。有谁知道为什么？

转换为字符串的操作如下：

```
[mType: 2, mUri: content://com.android.contacts/data, mSelection: _id=?, mExpectedCount: null, mYieldAllowed: false, mValues: data1=somebody1@android.com, mValuesBackReferences: null, mSelectionArgsBackReferences: null] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T15:05:29.107

首先，您的 a`try`没有 a `catch`，这可以解释为什么您在日志中看不到任何错误。

其次，从我在文档中看到的，我认为你最好这样写：

```
ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
ops.clear();

ops.add(ContentProviderOperation.newUpdate(ContactsContract.Data.CONTENT_URI)
        .withSelection(ContactsContract.Data.CONTACT_ID + "=?", 
                       new String[] {String.valueOf(id)})
        .withValue(ContactsContract.CommonDataKinds.Email.DATA, "somebody1@android.com")
        .build());

try {
    context.getContentResolver().applyBatch(ContactsContract.AUTHORITY, ops);
} catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-05T14:26:22.037

尝试在 withValue 中使用不是字符串，而是字符串数组。

```
.withValue(ContactsContract.CommonDataKinds.Email.DATA, emails) 
```

在哪里

```
String[] emails = {"Email Name<somebody1@android.com>"}; 
```

# bash - 创建一个基本上充当算命先生或“魔术 8 球”的 bash 脚本

> ID：13888735
> 
> 赞同：4
> 
> 时间：2012-12-15T02:23:29.847
> 
> 标签：bash, loops, scripting

我正在尝试创建一个 bash 脚本，它基本上就像一个具有 6 种不同响应（是、否、可能、很难说、不太可能和未知）的魔术 8 球。关键是一旦给出响应，在所有响应都给出之前不应再次给出。

这是我到目前为止所拥有的：

```
#!/bin/bash
echo "Ask and you shall receive your fortune: "
n=$((RANDOM*6/32767))
while [`grep $n temp | wc awk '{print$3}'` -eq 0]; do
   n=$((RANDOM*6/32767))
done
grep -v $n temp > temp2
mv temp2 temp 
```

基本上，我在临时文件的不同行上都有 6 个响应，并且我正在尝试构建循环，以便一旦给出响应，它就会创建一个没有该响应的新文件（temp2），然后将其复制回 temp。然后，一旦临时文件为空，它将从头开始。

我很肯定我当前的内循环是错误的，我需要一个外循环，但我对此很陌生，我被困住了。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T03:00:45.877

尝试这样的事情：

```
#!/bin/bash

shuffle() {
   local i tmp size max rand

   # $RANDOM % (i+1) is biased because of the limited range of $RANDOM
   # Compensate by using a range which is a multiple of the array size.
   size=${#array[*]}
   max=$(( 32768 / size * size ))

   for ((i=size-1; i>0; i--)); do
      while (( (rand=$RANDOM) >= max )); do :; done
      rand=$(( rand % (i+1) ))
      tmp=${array[i]} array[i]=${array[rand]} array[rand]=$tmp
   done
}

array=( 'Yes' 'No' 'Maybe' 'Hard to tell' 'Unknown' 'Unlikely' )

shuffle
for var in "${array[@]}"
do
  echo -n "Ask a question: "
  read q
  echo "${var}"
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T03:27:41.503

我编写了一个遵循您的初始方法的脚本（使用临时文件）：

```
#!/bin/bash

# Make a copy of temp, so you don't have to recreate the file every time you run this script
TEMP_FILE=$(tempfile)
cp temp $TEMP_FILE

# You know this from start, the file contains 6 possible answers, if need to add more in future, change this for the line count of the file
TOTAL_LINES=6

echo "Ask and you shall receive your fortune: "
# Dummy reading of the char, adds a pause to the script and involves the user interaction
read

# Conversely to what you stated, you don't need an extra loop, with one is enough
# just change the condition to count the line number of the TEMP file 
while [ $TOTAL_LINES -gt 0 ]; do
    # You need to add 1 so the answer ranges from 1 to 6 instead of 0 to 5
    N=$((RANDOM*$TOTAL_LINES/32767 + 1))

    # This prints the answer (grab the first N lines with head then remove anything above the Nth line with tail)
    head -n $N < $TEMP_FILE | tail -n 1

    # Get a new file deleting the $N line and store it in a temp2 file
    TEMP_FILE_2=$(tempfile)
    head -n $(( $N - 1 )) < $TEMP_FILE > $TEMP_FILE_2
    tail -n $(( $TOTAL_LINES - $N )) < $TEMP_FILE >> $TEMP_FILE_2
    mv $TEMP_FILE_2 $TEMP_FILE

    echo "Ask and you shall receive your fortune: " 
    read

    # Get the total lines of TEMP (use cut to delete the file name from the wc output, you only need the number)
    TOTAL_LINES=$(wc -l $TEMP_FILE | cut -d" " -f1)
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T03:53:51.360

```
$ man shuf

SHUF(1)                                                           User Commands

NAME
       shuf - generate random permutations

SYNOPSIS
       shuf [OPTION]... [FILE]
       shuf -e [OPTION]... [ARG]...
       shuf -i LO-HI [OPTION]...

DESCRIPTION
       Write a random permutation of the input lines to standard output. 
```

后面还有更多内容，你可以在自己的机器上阅读：）

# c++ - C++ 通用模板化函子

> ID：13888736
> 
> 赞同：0
> 
> 时间：2012-12-15T02:23:37.690
> 
> 标签：c++, templates, functor

我必须做一个模板化的仿函数，它可以用作：

```
Function<int (char)> f = &printChar;
Function<int (char)> f = boost::bind(&printChar, _1); 
```

我做了一个基于函数指针的仿函数，但它不适用于 boost::bind，因为它返回一个 boost::Function，它是一个对象而不是函数 ptr。

```
class Function <R()> {
public:
    typedef R (*ptr_t)();
    ptr_t _ptr;

    Function(ptr_t p) { _ptr = p; }
    R operator()() { return _ptr(); }
} 
```

我如何以通用方式处理对象？

谢谢

# php - javascript中的链接？

> ID：13888742
> 
> 赞同：1
> 
> 时间：2012-12-15T02:24:43.113
> 
> 标签：php, javascript

我的网站上有一个收件箱部分，用户可以在其中单击主题标题以打开一个窗口并阅读他们的消息。

我已经放入了一个 javascript 函数，当它们移动光标时会突出显示收件箱消息。我已将突出显示设置为可单击，并且假设它会转到与用户单击主题链接相同的位置，并且当它转到窗口 read_message.php 时，它没有加载消息 ID，并且消息不会显示。

这是有效的主题链接：

```
<?php echo "<strong><a href=\"read_message.php?msg={$inbox['message_id']}\">{$inbox['subject']}</a></strong>"; ?> 
```

并且继承了带有不起作用的链接的javascript：

```
<script>
     $(function() {
        $('tr').hover(function() {
            $(this).css('background-color', '#eee');
            $(this).contents('td').css({'border': '0px solid red', 'border-left': 'none', 'border-right': 'none'});
            $(this).contents('td:first').css('border-left', '0px solid red');
            $(this).contents('td:last').css('border-right', '0px solid red');
        },
        function() {
            $(this).css('background-color', '#FFFFFF');
            $(this).contents('td').css('border', 'none');
            $('tr').click(function() { 
    document.location = "<?php echo "read_message.php?msg={$inbox[0]}" ?>";
} );
        });
    });
    </script> 
```

希望有人可以让我知道我哪里出错了。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T06:16:37.547

首先，您应该移动该`.click()`函数，使其不在您的`.hover()`函数内 - 否则每次您将鼠标移出该行时都会设置单击处理程序，并且在您第一次将鼠标悬停时它将无法工作。

完成后，您可以这样做：

```
$("tr").click(function() {
  location.href = $(this).find("a[href*='read_message.php']").attr("href");
}); 
```

（不是 100% 确定`.find()`语法，因为我并没有真正使用 jQuery，但这应该会有所帮助）

# sql - 根据列值删除行

> ID：13888743
> 
> 赞同：2
> 
> 时间：2012-12-15T02:24:49.283
> 
> 标签：sql, excel, oracle11g

有没有办法让我根据它包含的值删除行？例如，我有一个表，其中一列中的值包含 URL 值，例如，

/uk/quitclock/om2.asp

/uk/quitclock/om666.wav

在这里，我需要删除后缀以 WAV、GIF 或 JPEG 结尾的行。我怎么做？如果不可能，那么excel中是否有任何公式可以帮助我做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T02:27:56.590

在数据库上试试这个

```
DELETE FROM TABLE 
WHERE UPPER(COLUMN) LIKE '%.WAV' 
      OR UPPER(COLUMN) LIKE '%.GIF' 
      OR UPPER(COLUMN) LIKE '%.JPEG' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T17:14:23.413

对于excel：

=OR(RIGHT(A1,3)="wav",RIGHT(A1,3)="gif",RIGHT(A1,4)="jpeg")

删除 TRUE

# python - 2.7 和 3 中的 python 继承和/或描述符差异

> ID：13888744
> 
> 赞同：0
> 
> 时间：2012-12-15T02:24:48.790
> 
> 标签：python

我试图更多地了解 python 类和描述符是如何工作的。我有以下代码。

```
class Base():
    def __init__(self):
        self.a = 'base_a'

    def get_a(self):
        return self._x
    def set_a(self,val):
        self._x = val 
    def delete_a(self):
        pass

    a = property(get_a,set_a,delete_a)

class Derived(Base):
    def __init__(self):
        Base.__init__(self)

    @property
    def a(self):
        return 'derived_a'

t = Derived()
print(t.a) 
```

在 Python 2.7 中运行，我得到

```
[carl@home tmp-carl]$ python2.7 test.py 
base_a 
```

在 Python 3.3 中运行，我得到

```
[carl@home tmp-carl]$ python3 test.py 
Traceback (most recent call last):
  File "test.py", line 25, in <module>
    t = Derived()
  File "test.py", line 18, in __init__
    Base.__init__(self)
  File "test.py", line 5, in __init__
    self.a = 'base_a'
AttributeError: can't set attribute 
```

我想我理解 Python3.3 的行为。t 是 Derived 的一个实例，因此`Base::__init__`搜索`t.__dict__['a']`，没有找到它。它转到`Derived.__dict__['a']`，找到只读属性和错误。它永远不会成为可`Base.__dict__['a']`读写的。

但如果这是真的，我完全不明白为什么 Python2.7 可以工作。似乎它完全忽略了`Derived`.

谁能给我解释一下？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T02:28:17.823

Python 2.x 有两种类型的类：old-style 和 new-style。描述符（其中`property`之一）仅适用于新式类。为了在 2.x 中创建新样式的类，您必须从`object`.

```
class Base(object): 
```

3.x 中的所有类都是新型类。

# caching - GPU的延迟是多少？

> ID：13888749
> 
> 赞同：5
> 
> 时间：2012-12-15T02:25:40.127
> 
> 标签：caching, cpu, gpu, latency

我可以找到 CPU 内核与其缓存、主内存等之间的 ns 或 CPU 周期的延迟。

但似乎很难找到关于现代 GPU 的类似信息。

有谁知道 GPU 的延迟，尤其是现代 nvidia GPU（GF110 或更高版本）与其内存之间的延迟，谢谢。

GPU 内存确实有更大的带宽，但是它们的延迟呢？

听说GPU的延迟和CPU的延迟一样高，所以基本上让更大的带宽对于许多通用计算任务基本上没有意义，我只需要确认这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-18T19:54:00.623

由于供应商没有透露所有架构细节，研究人员使用逆向工程来揭开 GPU 架构的神秘面纱。请参阅这篇论文[Demystifying GPU microarchitecture through microbenchmarking](https://scholar.google.com/scholar?q=Demystifying%20GPU%20microarchitecture%20through%20microbenchmarking&btnG=&hl=en&as_sdt=0%2C43)和其他引用此论文的论文（请注意，这不是我的论文）。我在下图中复制了他们的发现。![论文中的表 V](../Images/714adef620e5963c3be0252a8b1de5df.png)

# javascript - 幻灯片放映中的图像在显示之前延迟

> ID：13888751
> 
> 赞同：1
> 
> 时间：2012-12-15T02:26:25.247
> 
> 标签：javascript

所以我试图使用我的图像作为背景，我希望它们处于一个循环中，因此它在三个之间变化，下面是我的代码循环似乎正在工作，但我有两个我似乎无法解决的问题：

*   计时器在幻灯片开始之前启动（屏幕黑屏 7 秒，然后显示第一张图像，我假设计时器位于代码的错误部分，但我将它移动了几次，它做同样的事情。如何我可以让它用第一张图片加载网站吗？

*   图像显示得非常小，并没有像我想要的那样（自动）填充屏幕 我尝试了几个应该自动计算屏幕尺寸并相应填充的代码，但它们似乎不起作用......有什么建议吗？

```
<head>
    <meta http-equiv="Kess Agency" content="text/html; charset=iso-8859-1"/>
    <meta http-equiv="Content-Language" content="en-us">
    <meta http-equiv="created by kess" content="en-us">
    <style>
    body{
        background-attachment: fixed;
        background-repeat:no-repeat;
        background-position: 300 200;

    }
    </style>
<script src="js/jquery-1.8.3.min.js" type="text/javascript"></script>
<script type="text/javascript">
//auto resize

    var imgs=new Array()
    imgs[0]="images/img1.png";
    imgs[1]="images/img2.png";
    imgs[2]="images/img3.png";
    //time between slides
    var speed=7000
    //preload images
    var processed=new Array()
    for(i=0;i<imgs.length;i++){
        processed[i]=new Image();
        processed[i].src=imgs[i];
    }
    var inc=-1;
    function slideimg(){
        if (inc<imgs.length-1)
            inc++;
        else
            inc=0;
        document.body.background=processed[inc].src;
    }
    if (document.all || document.getElementById)
    window.onload=new Function('setInterval("slideimg()",speed)');

</script>

</head>
 <body>
     <p class= "type"></p>
</body>
</html>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T02:36:22.770

我认为您的问题是您正在等待页面加载然后运行 ​​setInterval。据我所知， setInterval 将等到间隔完成然后运行。你可以做到的一种方法是..

```
function slideimg(){
    if (inc<imgs.length-1)
        inc++;
    else
        inc=0;
    document.body.background=processed[inc].src;
    setTimeout(function(){
        slideimg();
    }, speed);
}

window.onload = function () {
    slideimg();
}; 
```

这样脚本将运行 onload 并且一旦加载它将等待然后再次运行。以这种方式而不是使用 setInterval 做事的另一个好处是，通过这种方式，进程将在再次运行之前完成（setInterval 将尝试每隔“任何”秒运行脚本，无论事情是否已加载。

对于背景大小，您可以尝试将 css 设置为`background-size: cover;`虽然这是新的（CSS3）。

# python - 用于从带有嵌套括号的字符串中提取字符的简单正则表达式

> ID：13888752
> 
> 赞同：0
> 
> 时间：2012-12-15T02:26:41.000
> 
> 标签：python, regex

我有像 a(b,c(d,e(f,g),h(i))) 这样的子句和一个字符串，它有许多用逗号分隔的子句，例如 a(b,c(d,e (f,g),h(i))),a(b,c(d,e(f,g),h(i)))

有没有办法按层次顺序提取变量和函数名称？假设我想按如下方式打印它们，

```
a
 b
 c
  d
  e
   f
   g
  h
   i 
```

如何轻松地使用 Python 的解析器来做到这一点？我应该使用什么正则表达式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T02:57:25.903

正则表达式不适用于嵌套结构。但字符串操作不一定是大问题：

```
s = "a(b,c(d,e(f,g),h(i)))"

import re

level = 0
for tok in re.finditer(r"\w+|[()]", s):
    tok = tok.group()
    if tok == "(":
        level += 1
    elif tok == ")":
        level -= 1
    else:
        print "%s%s" % (" "*level, tok) 
```

印刷：

```
a
 b
 c
  d
  e
   f
   g
  h
   i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T04:51:17.080

```
>>> s = "a(b,c(d,e(f,g),h(i))),a(b,c(d,e(f,g),h(i)))"
>>> from pyparsing import nestedExpr,Word,alphas,Literal
>>> result = nestedExpr(content=Word(alphas)).ignore(Literal(',')).parseString('('+s+')')
>>> print(results.asList())
[['a', ['b', 'c', ['d', 'e', ['f', 'g'], 'h', ['i']]], 'a', ['b', 'c', ['d', 'e', ['f', 'g'], 'h', ['i']]]]]
>>> def dump(lst,indent=''):
...   for i in lst:
...      if isinstance(i,list):
...        dump(i,indent+' ')
...      else:
...        print (indent,i)
...
>>> dump(result.asList())
  a
   b
   c
    d
    e
     f
     g
    h
     i
  a
   b
   c
    d
    e
     f
     g
    h
     i 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T04:48:30.837

将问题分解为 2 个步骤： 1\. 解析数据 2\. 打印数据

The best way to parse your data is to find a parser that already exists. If you have a say in the format, pick one that has already been devised: don't make your own. If you don't have a say in the format and are forced to write your own parser, heed Ned's advise and don't use regex. It will only end in tears.

Once you have parsed the data, print it out with the [pprint](http://docs.python.org/2/library/pprint.html#pprint-example) module. It excels at printing things for human consumption!

# android - Android画布旋转计算

> ID：13888753
> 
> 赞同：1
> 
> 时间：2012-12-15T02:27:02.663
> 
> 标签：android, geometry

我正在创建一个动态壁纸，我希望图片覆盖整个画布，所以在横向模式下我会这样绘制

```
Rectangle  r = new Rect(0, canvas.getHeight()- (canvas.getHeight()-statusBarHeight), canvas.getWidth(), canvas.getHeight());

c.drawPicture(pictureBackground, r); 
```

请注意，我必须考虑状态栏。好的，这很好用。现在我想要做的是将画布旋转 90 度以实现纵向模式（顺便说一句，我不能只在代码之外旋转图片，必须这样做）所以我这样做：

```
canvas.rotate(90,canvas.getWidth()/2,canvas.getHeight()/2); 
```

现在，当我再次绘制图片时，我应该使用什么矩形来完全覆盖画布（记住我必须考虑状态栏）？？？？

```
Rectangle  r = new Rect(?,?,?,?) 
```

我想不通，我尝试了很多可能的组合

# fluent-nhibernate - Fluid NHibernate、自定义类型和 Id 映射

> ID：13888756
> 
> 赞同：0
> 
> 时间：2012-12-15T02:27:25.283
> 
> 标签：fluent-nhibernate, fluent-nhibernate-mapping

我在 C# 中有一个对象，我想将其用作数据库中的主键，当添加新对象时它会自动递增。该对象基本上是一个 ulong 值的包装器，它使用该值的一些位作为附加提示。我想将它作为“纯”ulong 值存储在数据库中，但我想在从数据库加载/卸载值时获得自动转换。IE，根据它们来自的表将“提示”位应用于值。

根据我在网上找到的大量示例（该论坛上有大量帮助），我开始了实现自己的 IUserType 对象的旅程。

我有一个 ObjectId 类，它是一个对象 ID

```
class ObjectIdType: IUserType
{
    private static readonly NHibernate.SqlTypes.SqlType[] SQL_TYPES = { NHibernateUtil.UInt64.SqlType };

    public NHibernate.SqlTypes.SqlType[] SqlTypes
    {
        get { return SQL_TYPES; }
    }

    public Type ReturnedType
    {
        get { return typeof(ObjectId); }
    }

    ...
} 
```

我有一个如下所示的映射类：

```
public class ObjectTableMap()
{ 
    Id(x => x.Id)
    .Column("instance_id")
            .CustomType<ObjectIdType>()
            .GeneratedBy.Native();
} 
```

在这一点上，我在配置中遇到一个异常，即 Id 只能是整数。我想这是有道理的，但我有一半期望实现自定义类型，本机 ulong 数据库类型将接管并工作。

我试图走上创建自定义生成器的道路，但它仍然有点超出我的技能水平，所以我遇到了挫折。

我的问题是，我是否可以通过映射完成我想要做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T14:11:46.520

我认为，这是不可能的，因为您的映射使用 Id 的本机生成器。这只能用于整数类型（和 GUID）。您可以尝试将分配的 Id 与您的自定义类型一起使用，因此您负责将值分配给您的 Id 属性。

还有另一种选择：为什么不在班级级别设置信息位，而是根据您的表格？您的实体代表表，因此您的实体类中应该有相同的信息。例子：

```
class Entity
{
    protected virtual ulong InternalId { get; set; } // Mapped as Id

    public virtual ulong Id                          // This property is not mapped
    {
        get
        {
            var retVal = InternalId;
            // Flip your hint bits here based on class information
            return retVal;
        }
    }
} 
```

您还可以将 InternalId 转换为公共属性并使 setter 受保护。

# python - 获取 XML 元素的值

> ID：13888761
> 
> 赞同：3
> 
> 时间：2012-12-15T02:28:06.043
> 
> 标签：python, perl

在下面的 XML 示例中，如何获取`<data>`元素的值？在这种情况下，我希望 XML 解析器将节点的值作为应该返回的字符串返回

```
This is my first web page<br/><p>test123</p><p>How exciting</p> 
```

（即一个 XML 片段）。

我一直在尝试使用 Perl ( [`XML::SimpleObject`](https://metacpan.org/module/XML%3a%3aSimpleObject)) 或 Python ( `miniDOM`)。它们都只能返回`<data>`元素的文本值，即`"This is my first web page"`

```
<dataset>
<data>
This is my first web page<br/>
<p>test123</p>
<p>How exciting</p>
</data>
</dataset> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T04:42:42.140

这个 [`XML::Simple`](https://metacpan.org/module/XML%3a%3aSimple) 模块*太*简单了，给程序员留下了很多工作要做。我没有尝试过 [`XML::SimpleObject`](https://metacpan.org/module/XML%3a%3aSimpleObject) ，但我鼓励您使用 [`XML::Twig`](https://metacpan.org/module/XML%3a%3aTwig) or [`XML::LibXML`](https://metacpan.org/module/XML%3a%3aLibXML)，它们都经过尝试和测试，可以应对完整 XML 规范的所有复杂性。

此解决方案使用`XML::Twig`并简单地解析数据、查找`<data>`元素并打印其内容。

```
use strict;
use warnings;

use XML::Twig;

my $twig = XML::Twig->new;
$twig->parse(\*DATA);

my ($data) = $twig->get_xpath('/dataset/data');
print $data->xml_string;

__DATA__
<dataset>
<data>
This is my first web page<br/>
<p>test123</p>
<p>How exciting</p>
</data>
</dataset> 
```

**输出**

```
This is my first web page<br/><p>test123</p><p>How exciting</p> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T04:10:05.623

这是一个快速的[`XML::LibXML`](https://metacpan.org/module/XML%3a%3aLibXML)解决方案。

```
#!/usr/bin/perl -Tw

use strict;
use warnings;
use XML::LibXML;

my $dom = XML::LibXML->load_xml(string => <<'EOT');
<dataset>
<data>
This is my first web page<br/>
<p>test123</p>
<p>How exciting</p>
</data>
</dataset>
EOT

my @nodes = $dom->findnodes('/dataset/data');

my $xml_text = $nodes[0]->serialize();

# strip <data> and </data> if you don't want them
$xml_text =~ s{(?: \A <data> | </data> \z )}{}xmsg;

print $xml_text; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T04:32:01.637

使用 python 的 cElementTree 库。

```
In [23]: import xml.etree.cElementTree as et

In [24]: myxml="""<dataset>
    ...: <data>
    ...: This is my first web page<br/>
    ...: <p>test123</p>
    ...: <p>How exciting</p>
    ...: </data>
    ...: </dataset>"""

In [25]: page = et.fromstring(myxml)

In [26]: for elem in page.getiterator():
    ...:     if elem.tag=='data':
    ...:         print elem.tag, elem.text
    ...:         for tags in elem.getchildren():
    ...:             print tags.tag, tags.text
    ...:             
data 
This is my first web page
br None
p test123
p How exciting

In [27]: 
```

注意：如果您使用的是 python 2.7；然后使用`list(elem)`代替`elem.getchildren()`而`page.iter()`不是`page.getiterator()`
更多，你可以做更多的事情`elem.attrb`来获取xml节点属性的字典并`elem.tail`获取它的尾巴；[http://docs.python.org/2/library/xml.etree.elementtree.html](http://docs.python.org/2/library/xml.etree.elementtree.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T02:32:32.783

XML 解析器当然会“吞噬”内部元素，因为它们是完全有效的 XML。

任何一个：

1.  修复编码的 XML - 如果 HTML 标记不应该是文档结构的一部分，则应该对它们进行适当的编码。
2.  找到您想要的根节点，然后**重新序列**化 XML 以生成文本。

# facebook - 喜欢我在 Facebook 上的页面显示错误的图像

> ID：13888765
> 
> 赞同：0
> 
> 时间：2012-12-15T02:28:31.883
> 
> 标签：facebook, facebook-like

我刚刚更新了我的网站以包含 og: 标记并添加 Facebook 点赞按钮、推特按钮等。但是，当我单击点赞按钮然后查看我的 Facebook 个人资料时，使用的图像是错误的。

这是我所指的网站上的页面：http: [//www.inadaydevelopment.com/app/android/10bii-financial-calculator](http://www.inadaydevelopment.com/app/android/10bii-financial-calculator)

我的`<head>`标签包括以下`og:image`标签：

```
<meta property="og:image" content="http://www.inadaydevelopment.com/sites/default/files/app-10biiFinancialCalculator-Android-1-AmortizationSchedule.png">
<meta property="og:image" content="http://www.inadaydevelopment.com/sites/default/files/app-10biiFinancialCalculator-Android-2-CashFlowDiagram-Landscape.png">
<meta property="og:image" content="http://www.inadaydevelopment.com/sites/default/files/app-10biiFinancialCalculator-Android-4-Equation.png">
<meta property="og:image" content="http://www.inadaydevelopment.com/sites/default/files/app-10biiFinancialCalculator-Android-6-UnevenCashflowsNPV.png">
<meta property="og:image" content="http://www.inadaydevelopment.com/sites/default/files/app-10biiFinancialCalculator-Icon.png"> 
```

但是，在我的 Facebook 个人资料上显示的图像是我在侧边栏中的小 twitter 图标，它链接到我的 twitter 帐户：

![在此处输入图像描述](../Images/3f6d08b5d4d5e0e44f270a0093ac8fe4.png)

当我查看我的 url 的 Facebook 调试器时，它显示了我在 og:image 标签中列出的图像：

![在此处输入图像描述](../Images/79ce81cf12b0796d1445d34845518af2.png)

为什么 Facebook 从我的侧边栏中抓取 twitter 图标而不是使用 og:image 标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:22:46.950

当您第一次将 Like 按钮添加到您的页面时，您是否在页面上有 og:image 标签？

如果没有，那么 Facebook 可能在您添加标签之前已经获取了 twitter 图像。Facebook 会缓存它为页面获取的信息，因此即使您更新了 og:image 标签，if 也会保留 Twitter 图像。
Facebook 表示它将每 24 小时刷新一次数据，尽管我自己的经验表明，对于“喜欢”计数较低的页面可能并非如此。

但是，您可以强制 Facebook 使用调试器刷新它的数据 - 正如您已经完成的那样，您是否在之后检查了您的“喜欢”框以查看图像是否更改？

作为参考，我“喜欢”了您的页面和显示它的图像是您在 og:image 标记中拥有的列表中的第一张图像。

# celery - Celery - 错误处理和数据存储

> ID：13888769
> 
> 赞同：2
> 
> 时间：2012-12-15T02:29:18.713
> 
> 标签：celery, django-celery, celery-task

我试图更好地理解有关 Celery 中结果和错误的常见策略。

我看到结果有状态/状态并在请求时存储结果——我什么时候使用这些数据？错误处理和数据存储是否应该包含在任务中？

这是一个示例场景，以防它有助于更​​好地理解我的目标：

我有一个对用户地址进行 goeocodes 的地理编码任务。如果任务失败或成功，我想更新数据库中的一个字段让用户知道。（错误处理）成功后，我希望将地理编码数据插入数据库（数据存储）

应该采取什么方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T23:21:28.857

让我先说我自己仍然对 Celery 有感觉。话虽这么说，我对如何解决这个问题有一些普遍的看法，由于没有其他人回应，我会试一试。

根据您所写的内容，一个相对简单（尽管我怀疑未优化）的解决方案是遵循[文档中博客评论垃圾邮件任务示例](http://docs.celeryproject.org/en/latest/userguide/tasks.html?highlight=blog#example)的大致轮廓。

**应用模型.py**

```
class Address(models.Model):

  GEOCODE_STATUS_CHOICES = (
    ('pr', 'pre-check'),
    ('su', 'success'), 
    ('fl', 'failed'),
  )

  address = models.TextField()
  ...
  geocode = models.TextField()
  geocode_status = models.CharField(max_length=2, 
                                    choices=GEOCODE_STATUS_CHOICES, 
                                    default='pr')

class AppUser(models.Model):
  name = models.CharField(max_length=100)
  ...
  address = models.ForeignKey(Address) 
```

**app.tasks.py**

```
 from celery import task
  from app.models import Address, AppUser
  from some_module import geocode_function #assuming this returns a string

  @task()
  def get_geocode(appuser_pk):
    user = AppUser.objects.get(pk=appuser_pk)
    address = user.address

    try:
      result = geocode_function(address.address)
      address.geocode = result
      address.geocode_status = 'su' #set address object as successful
      address.save()
      return address.geocode  #this is optional -- your task doesn't have to return anything
                                 on the other hand, you could also choose to decouple the geo-
                                 code function from the database update for the object instance.   
                                 Also, if you're thinking about chaining tasks together, you             
                                 might think about if it's advantageous to pass a parameter as 
                                 an input or partial input into the child task.

      except Exception as e:     
        address.geocode_status = 'fl' #address object fails
        address.save()
        #do something_else()
        raise  #re-raise the error, in case you want to trigger retries, etc 
```

**应用程序.views.py**

```
from app.tasks import *
from app.models import *
from django.shortcuts import get_object_or_404

    def geocode_for_address(request, app_user_pk):
      app_user = get_object_or_404(AppUser, pk=app_user_pk)

     ...etc.etc.  --- **somewhere calling your tasks with appropriate args/kwargs 
```

我相信这符合您上面概述的最低要求。我故意让视图未开发，因为我不知道您到底想如何触发它。当他们的地址无法进行地理编码时，听起来您可能还需要某种用户通知（“我想更新数据库中的一个字段让用户知道”）。在不了解此要求的具体细节的情况下，我认为这听起来可能最好在您的 html 模板中完成（如果 instance.attribute 值为 X，则在模板中显示 q）或使用 django.signals（设置当 user.address.geocode_status 切换到失败时发出信号——例如，通过电子邮件通知用户等）。

在对上面代码的注释中，我提到了解耦和链接上面 get_geocode 任务的组成部分的可能性。您还可以考虑通过编写自定义错误处理程序任务并使用[link_error 参数](http://docs.celeryproject.org/en/latest/userguide/calling.html#linking-callbacks-errbacks)（例如 add.apply_async((2, 2)、link_error=error_handler.s()、其中**error_handler**已被定义为 app.tasks.py 中的任务）。此外，无论您选择通过主任务（get_geocode）还是通过链接的错误处理程序来处理错误，我认为您会想要更具体关于如何处理不同类型的错误（例如，对连接错误做一些不同于地址数据格式不正确的事情）。

我怀疑有更好的方法，而且我刚刚开始了解通过链接任务、使用组和和弦等可以获得的创造力。希望这至少可以帮助你思考一些可能性。我会把它留给其他人推荐最佳实践。

# javascript - 如何分析线程化的 javascript？

> ID：13888771
> 
> 赞同：2
> 
> 时间：2012-12-15T02:29:34.650
> 
> 标签：javascript, debugging, profiler, web-worker

我一直在使用 Firebug 来分析 javascript 弹性粒子模拟。我最近的更改是将模拟代码移动到将其与渲染代码分开的工作线程。

但是，Firebug 还不支持 Worker 线程的分析。（错误[#507783](https://bugzilla.mozilla.org/show_bug.cgi?id=507783)和[#560314](https://bugzilla.mozilla.org/show_bug.cgi?id=560314)）

是否有任何适用于网络工作者的 javascript 分析库？

**我应该如何分析我的代码？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T16:50:16.183

我强烈推荐 google chrome (CTRL+SHIFT+J) 上的 Chrome 开发者工具。

在“Source”选项卡中，右侧面板的最后一个选项是“Web Workers”。您可以将其设置为在启动时自动暂停，并为工作人员打开一个专用的检查器。然后，如果您需要重新启动工作人员，您可以重新加载页面。

将为网络工作者弹出一个专用窗口（chrome 开发工具的另一个实例）。您可以转到配置文件选项卡并配置您的网络工作者代码。

我不认为萤火虫有这样的选择。

# php - 如何在 Angular 和 php 中隐藏某些用户的页面

> ID：13888772
> 
> 赞同：0
> 
> 时间：2012-12-15T02:30:12.377
> 
> 标签：php, mysql, angularjs

我正在创建一个网站，用户可以在其中创建一些配置文件。所有配置文件都必须打开，仅供创建者选择的用户查看。其他人不会看到他们。

使用 Angular，您可以使用路由轻松创建页面，因此对于每个新页面，您将拥有如下内容：

```
www.example.com/profiles/profile/1
www.example.com/profiles/profile/2
www.example.com/profiles/profile/3
etc. 
```

但是，比如说，您拥有个人资料 1、2、3，您可以轻松查看个人资料/4、个人资料/5 等...

您如何实现一个禁止查看或允许查看的数据少于访问权限用户的系统？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T09:01:41.947

如前所述，答案应该是服务器端。身份验证应始终在服务器端..

在您的情况下，您只需要像迄今为止所做的那样查询数据库一次，实际上正确的术语将只是向您的 api 发送一个 http 请求（因为 http 请求正在执行 db 查询）。该 http 请求应首先检查您获得的权限类型并返回适当的数据（有限的用户列表、特定用户或您无权访问该特定内容的错误）。

我希望这对你有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T02:34:04.193

如果使用数据库，您可以添加一列`AccessRights`

0 = 基本

1 = 配置文件 1

2 = 轮廓 1/2

ETC

不同的整数`AccessRights`会让你访问不同的东西。

并阻止具有访问权限 1 的人访问访问权限 3 材料

```
 if ($Accessrights < 3)
{
 die("You Cannot View This");
} 
```

由您决定为什么分配一个变量`$Accessrights`。

希望这是您正在寻找的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T03:14:44.903

那么我必须在用户访问的每个页面上查询数据库吗？会不会太有才了？

我想要创建的访问系统与 facebook 类似。您可以看到您的页面和您的朋友页面，但您看不到私人页面。您可以编辑您的个人资料，但不能编辑其他人的个人资料。

这是正确的方法吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T06:36:29.737

您可以检查用户是否正在查看自己的记录，或者是否允许他查看任何记录

$iUserType = USER_TYPE_ADMIN；// 常量 $iUserId = 5; // 这个和用户类型可以在登录后存储在会话中

$iViewProfileId = 5; // 这应该来自请求参数

```
if (($iViewProfileId != $iUserId) AND     (USER_TYPE_ADMIN != $iUserType)) {
    // error, user is not permitted to view the record
} 
```

# regex - 正则表达式是否可以匹配不包含在该行任何地方重复的相同单词的行？

> ID：13888774
> 
> 赞同：2
> 
> 时间：2012-12-15T02:30:44.283
> 
> 标签：regex, string

如何选择包含一个单词但不重复的行。假设我正在寻找字符串 word1

文本 word1 文本 #匹配

text word1 text word1 #不匹配，导致 word1 重复。

word1 word1 word1 # 不匹配，正在重复

word1 #匹配

text text text text word1 #匹配

谁能帮我开发一个匹配这些行的正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T02:48:41.107

试试这个：

```
(\b\w+\b)(?!.*\1) 
```

它使用否定前瞻来反向引用捕获的单词

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T04:00:33.583

你也可以试试

```
 ^(?!.*(\bword1\b).*\b\1\b).*\bword1\b.*$ 
```

如果您想匹配任何单词，可以将此处`word1`替换为..`\w+`

与`multiline`选项一起使用

# google-apps-script - 在 google-apps-script 中将脚本导入 HTML UI

> ID：13888775
> 
> 赞同：0
> 
> 时间：2012-12-15T02:30:46.750
> 
> 标签：google-apps-script

首先，感谢您的阅读。

我试图使用电子表格、google-apps-script 和 HTML UI 制作某种代码存储库。

我虽然使用 CodeMirror 来突出显示会很棒，但是，当我尝试在 UI 的 HTML 页面中使用它时，我得到了大量的错误，例如：

```
Secuencia de comandos o contenido HTML no válido: 
```

> ```
> http://gdriv.es/danielo515/codemirror/lib/codemirror.css:1+1 - 2: Expected <Selector>     not < 
> ```
> 
> [http://gdriv.es/danielo515/codemirror/lib/codemirror.css:1+1](http://gdriv.es/danielo515/codemirror/lib/codemirror.css:1+1) - 8+32：跳过格式错误的内容 [http://gdriv.es/danielo515/codemirror/lib/codemirror.css:1+1](http://gdriv.es/danielo515/codemirror/lib/codemirror.css:1+1) - 8+33：
> 跳过格式错误的内容 [http://gdriv.es/danielo515/codemirror/lib/codemirror.css:9+16](http://gdriv.es/danielo515/codemirror/lib/codemirror.css:9+16) -
> 21：预计不推送（
> [http://gdriv.es/danielo515/codemirror/lib/ codemirror.css:9+11](http://gdriv.es/danielo515/codemirror/lib/codemirror.css:9+11) - 35：跳过格式错误的内容 [http://gdriv.es/danielo515/codemirror/lib/codemirror.css:9+37](http://gdriv.es/danielo515/codemirror/lib/codemirror.css:9+37) - 51：预计不是 'UA-200051-15' [http:// gdriv.es/danielo515/codemirror/lib/codemirror.css:9+37](http://gdriv.es/danielo515/codemirror/lib/codemirror.css:9+37) - 53：跳过格式错误的内容[http://gdriv.es/danielo515/codemirror/lib/codemirror.css:9+11](http://gdriv.es/danielo515/codemirror/lib/codemirror.css:9+11)- 54：跳过格式错误的内容 [http://gdriv.es/danielo515/codemirror/lib/codemirror.css:10+16](http://gdriv.es/danielo515/codemirror/lib/codemirror.css:10+16) - 21：预计不会推送（ [http://gdriv.es/danielo515/codemirror/lib/codemirror。 css:10+11](http://gdriv.es/danielo515/codemirror/lib/codemirror.css:10+11) - 38: 跳过格式错误的内容 [http://gdriv.es/danielo515/codemirror/lib/codemirror.css:10+40](http://gdriv.es/danielo515/codemirror/lib/codemirror.css:10+40) - 50: 预计不是 'gdriv.es' [http://gdriv.es/ danielo515/codemirror/lib/codemirror.css:10+40](http://gdriv.es/danielo515/codemirror/lib/codemirror.css:10+40) - 52：跳过格式错误的内容 [http://gdriv.es/danielo515/codemirror/lib/codemirror.css:10+11](http://gdriv.es/danielo515/codemirror/lib/codemirror.css:10+11) - 53：跳过格式错误的内容 [http:// gdriv.es/danielo515/codemirror/lib/codemirror.css:11+16](http://gdriv.es/danielo515/codemirror/lib/codemirror.css:11+16) - 21：预期不推送（ [http://gdriv.es/danielo515/codemirror/lib/codemirror.css:11+11](http://gdriv.es/danielo515/codemirror/lib/codemirror.css:11+11) - 40：跳过格式错误的内容 [http://gdriv.es/danielo515/codemirror/lib/codemirror.css:11+11](http://gdriv.es/danielo515/codemirror/lib/codemirror.css:11+11) - 41 ：跳过格式错误的内容 [http://gdriv.es/danielo515/codemirror/lib/codemirror.css:12+11](http://gdriv.es/danielo515/codemirror/lib/codemirror.css:12+11) - 12：预计不会（ [http://gdriv.es/danielo515/codemirror/lib/codemirror.css:12 +11](http://gdriv.es/danielo515/codemirror/lib/codemirror.css:12+11) - 22：跳过格式错误的内容 [http://gdriv.es/danielo515/codemirror/lib/codemirror.css:12+11](http://gdriv.es/danielo515/codemirror/lib/codemirror.css:12+11) - 16+12：跳过格式错误的内容 [http://gdriv.es/danielo515/codemirror/lib /codemirror.css:16+12](http://gdriv.es/danielo515/codemirror/lib/codemirror.css:16+12) - 13: 不期望) [http://gdriv.es/danielo515/codemirror/lib/codemirror.css:16+12](http://gdriv.es/danielo515/codemirror/lib/codemirror.css:16+12)- 15：跳过格式错误的内容 [http://gdriv.es/danielo515/codemirror/lib/codemirror.css:16+12](http://gdriv.es/danielo515/codemirror/lib/codemirror.css:16+12) - 16：跳过格式错误的内容 [http://gdriv.es/danielo515/codemirror/lib/codemirror.css :17+9](http://gdriv.es/danielo515/codemirror/lib/codemirror.css:17+9) - 10: 预计不 < [http://gdriv.es/danielo515/codemirror/lib/codemirror.css:17+9](http://gdriv.es/danielo515/codemirror/lib/codemirror.css:17+9) - 27+8: 跳过格式错误的内容 [http://gdriv.es/danielo515/codemirror /lib/codemirror.css:17+9](http://gdriv.es/danielo515/codemirror/lib/codemirror.css:17+9) - 27+8：跳过格式错误的内容 [http://gdriv.es/danielo515/codemirror/lib/codemirror.js:1+1](http://gdriv.es/danielo515/codemirror/lib/codemirror.js:1+1) - 2：意外令牌 < [http://script .google.com/vbscript.js:1+1](http://script.google.com/vbscript.js:1+1) - 2：意外令牌 < [http://gdriv.es/danielo515/codemirror/doc/docs.css:1+1](http://gdriv.es/danielo515/codemirror/doc/docs.css:1+1) - 2：预期不 < [http://gdriv.es/danielo515/codemirror/doc/docs.css:1+1](http://gdriv.es/danielo515/codemirror/doc/docs.css:1+1) - 8+32：跳过格式错误的内容 [http://gdriv.es/danielo515/codemirror/doc/docs.css:1+1](http://gdriv.es/danielo515/codemirror/doc/docs.css:1+1) - 8+33：跳过格式错误的内容 [http://gdriv.es/danielo515/codemirror/doc/docs.css:9+16](http://gdriv.es/danielo515/codemirror/doc/docs.css:9+16) - 21：预计不推送（ [http://gdriv.es/danielo515/codemirror/doc/ docs.css:9+11](http://gdriv.es/danielo515/codemirror/doc/docs.css:9+11) - 35：跳过格式错误的内容 [http://gdriv.es/danielo515/codemirror/doc/docs.css:9+37](http://gdriv.es/danielo515/codemirror/doc/docs.css:9+37) - 51：预计不是 'UA-200051-15' [http:// gdriv.es/danielo515/codemirror/doc/docs.css:9+37](http://gdriv.es/danielo515/codemirror/doc/docs.css:9+37) - 53：跳过格式错误的内容 [http://gdriv.es/danielo515/codemirror/doc/docs.css:9+11](http://gdriv.es/danielo515/codemirror/doc/docs.css:9+11) - 54：跳过格式错误的内容 [http://gdriv.es/danielo515/codemirror/doc/docs.css:10+16](http://gdriv.es/danielo515/codemirror/doc/docs.css:10+16) - 21：预计不推送（ [http://gdriv.es/danielo515/codemirror/doc/docs.css:10+11](http://gdriv.es/danielo515/codemirror/doc/docs.css:10+11) - 38：跳过格式错误的内容 [http://gdriv.es/danielo515/codemirror/doc/docs.css:10+40](http://gdriv.es/danielo515/codemirror/doc/docs.css:10+40) - 50：预计不是“gdriv.es” [http://gdriv.es/danielo515/codemirror/doc/ docs.css:10+40](http://gdriv.es/danielo515/codemirror/doc/docs.css:10+40) - 52: 跳过格式错误的内容 [http://gdriv.es/danielo515/codemirror/doc/docs.css:10+11](http://gdriv.es/danielo515/codemirror/doc/docs.css:10+11) - 53: 跳过格式错误的内容 [http://gdriv.es/danielo515/ codemirror/doc/docs.css:11+16](http://gdriv.es/danielo515/codemirror/doc/docs.css:11+16) - 21：预计不推送（[http://gdriv.es/danielo515/codemirror/doc/docs.css:11+11](http://gdriv.es/danielo515/codemirror/doc/docs.css:11+11) - 40：跳过格式错误的内容 [http://gdriv.es/danielo515/codemirror/doc/docs.css:11+11](http://gdriv.es/danielo515/codemirror/doc/docs.css:11+11) - 41：跳过格式错误的内容

对不起，我不知道如何缩进它。是否有可能实现我正在尝试的目标？哪个应该是正确的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T08:05:31.570

HtmlService 中的 JavaScript 是通过 Caja 进行清理的，不幸的是，许多现有的库与 Caja 不兼容。Apps Script 和 Caja 团队正在努力通过尽可能放宽限制来改善这种情况，但到目前为止还没有任何消息可以宣布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T01:54:47.847

您提供的链接有问题 - 尝试删除*:1+1*后缀，它们将成功加载。

# python - 为什么子列表在 for 循环中是可变的？

> ID：13888779
> 
> 赞同：3
> 
> 时间：2012-12-15T02:32:05.017
> 
> 标签：python, loops, sublist, mutability

我是 python 的初学者，我发现关于 mutabilty 的内容非常令人困惑且不直观。给定一个列表：

```
lst = [[1, 2, 3], [4, 5, 6]] 
```

并尝试在 for 循环中更改列表。

```
for i in lst:
    i = "test" 
```

我了解这不会更改列表。但：

```
for i in lst:
    i[1] = "test" 
```

我很惊讶引用子列表会导致以下结果：

```
[[1, 'test', 3], [4, 'test', 6]] 
```

我试图用可视化器来理解，但我不明白。有人可以用简单的话解释一下吗？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T02:35:27.743

在第一种情况下，您只需复制对元素的引用。

```
i ---> lst[n] 
```

在后一种情况下，您将*取消引用*引用并更改数据（不在副本中）：

```
i[i] ---> lst[n][i] 
```

因此分配给`i[n]`将指向实际的可变对象，而不是它的副本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T02:40:24.683

赋值（这是`=`运算符所做的）将值分配给名称。

`i`是本地命名空间中的变量名。当它在 for 循环中运行时，它指的是一个列表。通过为它分配一个字符串，您会导致名称不再引用列表，而是引用字符串。该列表不受影响——唯一改变的是与名称关联的值。

`i[1]`是一个名称，用于指定两个列表之一中的特定位置，具体取决于当时`i`设置的内容。通过为其分配一个字符串，您可以使名称不再引用之前在列表中占据该空间的对象（整数，`2`或`5`取决于列表），而是引用字符串。整数不受影响——唯一改变的是与名称关联的值。

因此，在每种情况下，赋值都在做同样的事情——它使名称指代一个新事物，而不是它所指的旧事物。不同之处在于第二种情况是一个特殊的名称，因为它指的是可变对象的属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-15T02:34:30.940

`for`不会复制它产生的每个元素。因此，生成的对象保留了原始对象的所有属性（因为它*是*原始对象），包括可变性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T09:55:39.420

因为对于字符串的 for 循环以不同的方式调用，例如 lst 中的 for i：

这意味着如果 lst 是字符串的列表或数组，则 i 直接引用 x[i] 的值，这就是为什么在第一种情况下结果是“test”两次，因为“lst”的长度仅为 2

而在第二种情况下 i[1] 表示 i ------lst[i] i[1]--------`-lst[i][1] 表示第一个值等于 lst[0][ 1]---[1,'test',3] 第二个值等于 lst[1][1]--[4,'test',6]

# java - GIOP 错误信息

> ID：13888784
> 
> 赞同：3
> 
> 时间：2012-12-15T02:33:04.493
> 
> 标签：java, corba

我是 corba 的新手，也正在使用 eclipse ide 来运行它。每当运行服务器时，都会出现以下错误消息

```
Dec 15, 2012 9:17:18 AM com.sun.corba.se.impl.protocol.giopmsgheaders.MessageBase 
readGIOPHeader WARNING: "IOP00710220: (INTERNAL) Error in GIOP magic" org.omg.CORBA.INTERNAL:  
vmcid: SUN  minor code: 220 completed: Maybe
at com.sun.corba.se.impl.logging.ORBUtilSystemException.giopMagicError(Unknown Source)
at com.sun.corba.se.impl.logging.ORBUtilSystemException.giopMagicError(Unknown Source)
at com.sun.corba.se.impl.protocol.giopmsgheaders.MessageBase.readGIOPHeader(Unknown Source)
at com.sun.corba.se.impl.transport.CorbaContactInfoBase.createMessageMediator(Unknown Source)
at com.sun.corba.se.impl.transport.SocketOrChannelConnectionImpl.readBits(Unknown Source)
at com.sun.corba.se.impl.transport.SocketOrChannelConnectionImpl.handleEvent(Unknown Source)
at com.sun.corba.se.impl.transport.SelectorImpl.run(Unknown Source)
org.omg.CORBA.COMM_FAILURE:   vmcid: SUN  minor code: 208 completed: Maybe
at com.sun.corba.se.impl.logging.ORBUtilSystemException.connectionAbort(Unknown Source)
at com.sun.corba.se.impl.logging.ORBUtilSystemException.connectionAbort(Unknown Source)
at com.sun.corba.se.impl.transport.SocketOrChannelConnectionImpl.readBits(Unknown Source)
at com.sun.corba.se.impl.transport.SocketOrChannelConnectionImpl.handleEvent(Unknown Source)
at com.sun.corba.se.impl.transport.SelectorImpl.run(Unknown Source)
Caused by: org.omg.CORBA.INTERNAL:   vmcid: SUN  minor code: 220 completed: Maybe
at com.sun.corba.se.impl.logging.ORBUtilSystemException.giopMagicError(Unknown Source)
at com.sun.corba.se.impl.logging.ORBUtilSystemException.giopMagicError(Unknown Source)
at com.sun.corba.se.impl.protocol.giopmsgheaders.MessageBase.readGIOPHeader(Unknown Source)
at com.sun.corba.se.impl.transport.CorbaContactInfoBase.createMessageMediator(Unknown Source)
... 3 more 
```

我在网上搜索但我没有找到合适的解决方案。谁能帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T04:34:55.830

GIOP Magic 是网络上所有 CORBA 请求和回复中发送的前四个字节的序列，是 ASCII 字符`GIOP`。

当您连接到由非 CORBA 应用程序保持打开的 TCP 端口时，可能会发生这种情况。确保您的 CORBA 应用程序配置正确，并且您的客户端使用的对象引用有效。

# java - 在 tomcat servlet 中使用 java 编辑 .txt 文件的问题

> ID：13888785
> 
> 赞同：1
> 
> 时间：2012-12-15T02:33:16.643
> 
> 标签：java, apache, jakarta-ee, tomcat

嘿伙计们，我正在尝试让我的代码运行一次；它将插入到 WebContent 目录中已创建的 .txt 文档中。我在 Apache Tomcat v7.0 中运行 - 在 Eclispe 中构建。

代码：

```
 public static void insertWinner(String winner) throws IOException{

        String filename= "Winner.txt";
        FileWriter fw = new FileWriter(filename,true); //the true will append the new data
        fw.write("Winner is" + winner);//appends the string to the file
        fw.close();

    } 
```

这是在名为 BandIO 的 java 文件中完成的，servlet BandListServ.java 调用该文件将字符串值插入到上述代码中。

当我这样做时没有任何反应，也不知道为什么。

如果您需要任何其他信息，请告诉我，再次感谢！

编辑

我把它改成这个 -

```
public static void insertWinner(String winner) throws IOException{

        FileWriter out = new FileWriter("Winner.txt");
        out.write("Hello");
        out.close();
        out = new FileWriter("Winner.txt", true);
        out.write(", world!");
        out.close();

    } 
```

编辑：

好的，所以我在 servlet 文件中尝试了这个，但没有雪茄..

```
 response.setContentType("text/html");

             String filename = "Winner.txt";

             ServletContext context = getServletContext();

             InputStream is = context.getResourceAsStream(filename);
             if (is != null) {
                 InputStreamReader isr = new InputStreamReader(is);
                 BufferedReader reader = new BufferedReader(isr);
                 PrintWriter writer = response.getWriter();
                 String text = "Winner is";

                 while ((text = reader.readLine()) != null) {
                     writer.println(text);
                 }
             } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T02:50:38.830

原则上对文件系统的访问是通过

```
File file = getServletContext().getRealPath("/Winner.txt"); 
```

此文件可能为空，即当 Web 应用程序部署为 .war（so zip 格式）时，并且 Web 服务器未配置为解压缩 war。

在您的情况下，文件可能存在并发问题，需要一些锁定。也许您应该使用数据库表。

同样在下一次部署时，文件可能会丢失。

# javascript - nodejs mongodb驱动的同步函数调用

> ID：13888792
> 
> 赞同：1
> 
> 时间：2012-12-15T02:34:14.723
> 
> 标签：javascript, node.js, mongodb, node-mongodb-native

我有一个处理 mongodb 数据库的开源项目。我正在尝试创建一个查询数据库以检查条目是否存在的函数。

问题是当`if_exists()`返回 true 或 false 时，它​​会返回 undefined，因为 mongodb 驱动程序函数是异步的。该文件是[Query.js](https://github.com/WeaponXI/cplog/blob/a12338540cf784080e907f0f5b04e12187819464/routes/tagxi/query.js)，我在这里尝试了解决该问题的解决方案[在 Node.js 中进行同步 MongoDB 查询的正确方法是什么？](https://stackoverflow.com/questions/12030248/what-is-the-right-way-to-make-a-synchronous-mongodb-query-in-node-js)但我仍然使用 get 方法得到未定义的结果。

完成这项工作的最佳方法是什么？

单元测试的输出如下：

```
running unit tests...
add query test
exists tests:
get: undefined
{}
should be true: undefined
get: undefined
{}
should be false:undefined
Captains Logs listening on port 3000
Captains_Logs v0.5.0-21
[ { name: 'rhcp', _id: 50cbdcbe9c3cf97203000002 } ]
[ { name: 'os', _id: 50cbdcbe9c3cf97203000001 } ] 
```

[您可以在WeaponXI/cplog](https://github.com/WeaponXI/cplog)浏览整个代码

或者快速查看 query.js 代码是：

```
var DB = require('../../lib/db.js').DB;

function methods() {
  //query object
  var Q = {};
  //will act as our private variables to workaround asynchronous functions.
  //will delete non-required ones when done -- we don't have to, but just for continuity.
  exports.privates = {};

  //add tag to collection
  Q.add = function(tag) {
    if (typeof tag === "string") {
      //maybe we are adding a tag by name
      var obj = {
        name: tag
      };
    } else if (typeof tag === "object" && tag.name) {
      //maybe the tag object was specified, and tag's name was provided
      var obj = tag;
    }

    require('mongodb').connect(DB.mongo_url, function(err, db) {
      db.collection('tags', function(err, coll) {
        coll.insert(obj, {
          safe: true
        }, function(err, result) {
          console.log(result);

        });

      });
    });
  }
  var callback = {
    _set: function(key, val) {
      exports.privates[key] = val;
      //console.log(JSON.stringify(privates));
    },
    _get: function(key) {
      console.log("get: "+exports.privates.key);
      console.log(JSON.stringify(exports.privates));
      return exports.privates[key];
    },
    _unset: function(key) {
      delete privates[key];
    }
  }
  var if_exists = function(query, where, callback) {

    require('mongodb').connect(DB.mongo_url, function(err, db) {
      db.collection(where, function(err, coll) {
        coll.findOne(query, function(e, r) {
          //console.log(r);
          if (r === null) {
            callback._set("does_exist", false);
          } else {
            callback._set("does_exist", true);
          }

        });
      });
    });

    var result = callback._get("does_exist");
    // delete privates.does_exist;

    return result;
  }

  Q.if_exists = function(query, where) {
    if_exists(query, where, callback);

  }

  return Q;
}

var query = exports.query = methods();

function unit_test_add() {
  console.log("add query test");
  query.add("os");
  query.add({
    name: "rhcp"
  });
}

function unit_test_if_exists() {
  console.log("exists tests:");
  console.log("should be true: " + query.if_exists({
    name: "os"
  }, "tags"));
  console.log("should be false:" + query.if_exists({
    name: "ossuruk"
  }, "tags"));

}

function unit_tests() {
  console.log("running unit tests...");
  unit_test_add();
  unit_test_if_exists();

}
unit_tests(); 
```

### 解决方案：

[Query.js Query.test.js 要点](https://gist.github.com/4291691)

谢谢约翰尼香港！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T03:31:10.183

您**不能**将异步结果用作函数的返回值。就是这么简单。您必须通过作为函数参数提供的回调将异步结果传递给调用者（或使用期货/承诺并有效地推迟该步骤，但这涉及更多）。

`if_exists`应该看起来像这样：

```
var if_exists = function(query, where, callback) {

  require('mongodb').connect(DB.mongo_url, function(err, db) {
    db.collection(where, function(err, coll) {
      coll.findOne(query, function(e, r) {
        //console.log(r);
        if (r === null) {
          callback(e, false);
        } else {
          callback(e, true);
        }
        // You should either close db here or connect during start up
        // and leave it open.
        db.close();
      });
    });
  });
} 
```

# javascript - 使用 jQuery 集合

> ID：13888793
> 
> 赞同：5
> 
> 时间：2012-12-15T02:34:19.730
> 
> 标签：javascript, jquery

我正在尝试增加对 jQuery 的理解。请考虑以下代码。

```
if ($('.myClass').data('id') == '123') {
} 
```

这是如何运作的？它看起来很简单，直到您了解它`$()`返回一个元素集合。那么上面的代码究竟做了什么？比较像这样的元素*集合*的 data-id 属性的值有什么意义？

（我知道我可以`each()`用来显式测试集合中的每个元素。我的问题是关于上面的代码的作用。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T02:44:39.847

`.data('id')`返回集合中第一个项目的值，但`.data('id','xyz')`将为集合中的所有项目设置值 - 与其他 jQuery 方法（如`.html()`,`.text()`等）的行为非常相似。

在这样的语句中只测试第一个似乎没有意义`if`，但对于您知道将有一个元素的情况更有意义，例如当您的选择器是一个 id 时，或者当您`$(this).data('id')`在一个事件处理程序或其他东西。

如果您询问如何测试集合中的*所有*项目是否具有特定的数据值，您可以这样做：

```
var $col = $('.myClass');
if ($col.length === $col.filter(function(){return $(this).data('id') === '123';}).length) {
   // do something
} 
```

或者，如果您只想知道是否至少有一个具有该数据值：

```
if ($('.myClass').filter(function(){return $(this).data('id') === '123';}).length > 0) {
   // do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T02:45:55.940

我相信如果您尝试通过 jquery 函数获取值，它会返回集合中第一项的值。例如，如果您有：

```
<div class='1'></div>
<div class='2'></div>
<div class='3'></div> 
```

你跑：

```
$('div').attr('class'); 
```

它将返回“1”。我不知道这是否在所有 jQuery 函数中都是统一的，但这是预期的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T02:40:18.587

您可以使用 jQuery .each() - [http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

注释中的示例，因为 stackoverflow 不太喜欢 jsFiddle。

# ruby-on-rails - 使用“路径”时，Rails 引擎资产可用于应用程序，但如果从 ruby gems.org 下载则不可用

> ID：13888797
> 
> 赞同：0
> 
> 时间：2012-12-15T02:34:54.550
> 
> 标签：ruby-on-rails, asset-pipeline, rails-engines

我觉得这个问题有点古怪，需要更多的眼睛。我正在制作一个超级简单的[gem](https://github.com/ramontayag/backbone_eventbinder_rails)，它使需要这个 gem 的 Rails 应用程序可以使用backbone.eventbinder.js 文件。

问题是当我添加`gem 'backbone_eventbinder_rails', path: '/path/to/repo'`到我的应用程序的 Gemfile 时，我可以在`http://localhost:3000/assets/backbone.eventbinder.js`. 当我使用 时`gem 'backbone_eventbinder_rails', '1.0.2.2'`，我看不到资产。我得到一个`No route matches [GET] "/assets/backbone.eventbinder.js`错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T20:45:33.607

看起来 gem 没有获取供应商文件。

我会改变：

```
s.files = Dir["{app,config,db,lib}/**/*"] + ["MIT-LICENSE", "Rakefile", "README.md"]
s.test_files = Dir["test/**/*"] 
```

至：

```
s.files         = `git ls-files`.split($/)
s.executables   = s.files.grep(%r{^bin/}).map{ |f| File.basename(f) }
s.test_files    = s.files.grep(%r{^(test|spec|features)/})
s.require_paths = ["lib"] 
```

否则，我认为这与以下内容有关：

```
module BackboneEventbinderRails
  class Engine < ::Rails::Engine
  end
end 
```

改为：

```
class BackboneEventbinderRails::Engine < ::Rails::Engine
end 
```

在版本 1.0.2.2

为什么将引擎移动到单独的文件中？由于 gem 只使 javascript 可用，我不会为 lib 烦恼。

# cuda - cuda 5.0 动态并行错误：ptxas 致命。未解决的外部函数'cudaLaunchDevice

> ID：13888804
> 
> 赞同：5
> 
> 时间：2012-12-15T02:36:10.443
> 
> 标签：cuda, parallel-processing, gpu

我在带有 CUDA 5 的 Linux 上使用计算能力为 35 的 tesla k20。通过简单的子内核调用，它会产生编译错误：`Unresolved extern function cudaLaunchDevice`

我的命令行如下所示：

```
nvcc --compile -G -O0 -g -gencode arch=compute_35 , code=sm_35 -x cu -o fill.cu fill.o 
```

我`cudadevrt.a`在 lib64 中看到 .. 我们需要添加它还是需要做什么来解决它？没有子内核调用一切正常。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-15T08:20:25.987

您必须在启用可重定位设备代码的情况下显式编译并链接设备运行时库才能使用动态并行性。所以你的编译命令必须包含`--relocatable-device-code true`并且*链接*命令（你没有向我们展示）应该包含`-lcudadevrt`.

此过程在动态并行编程指南 pdf 的“工具包支持 DYNAMIC PARALLELISM”部分中有详细描述，可[在此处](http://docs.nvidia.com/cuda/pdf/CUDA_Dynamic_Parallelism_Programming_Guide.pdf)获得。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-19T12:02:17.787

也许我有点跑题了，但我想提一下，我在 Windows/Visual Studio 2010 下遇到了同样的问题，我已经使用 talonmies 的最后一条评论在几个步骤中解决了这个问题。

```
1) View -> Property Pages
2) Configuration Properties -> CUDA C/C++ -> Common -> Generate Relocatable Device Code -> Yes (-rdc=true)
3) Configuration Properties -> CUDA C/C++ -> Device -> Code Generation -> compute_35,sm_35
4) Configuration Properties -> Linker -> Input -> Additional Dependencies -> cudadevrt.lib 
```

我希望这些信息是有用的。

# ios - 无法关闭 UIAlertView，按钮不可点击

> ID：13888805
> 
> 赞同：2
> 
> 时间：2012-12-15T02:36:16.647
> 
> 标签：ios, uialertview, dispatch-async

我有以下代码，我在其中显示 MBProgress 视图，然后在单独的线程中运行代码。然后我得到一个主线程的句柄并关闭工作的微调器，然后我显示一个 UIAlertView。UIAlertView 加载正常，但是我无法单击任何按钮。如果警报视图在调度块之外，它可以正常工作。有任何想法吗？

```
[MBProgressHUD showHUDAddedTo:self.view animated:YES];
dispatch_async(dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{

    // Do something...
    GamePlayManager *gameManager = [GamePlayManager alloc];
    Session *sess = [Session sharedInstance];

    //Add the last actor to the end of the list
    NSMutableDictionary *connections = sess.connections;

    [connections setObject:sess.secondActor forKey:[NSString stringWithFormat:@"%d",kLastFieldtag]];

    BOOL result = [gameManager areAnswersCorrect:sess.connections startingActor:sess.firstActor endingActor:sess.secondActor];
    NSString *display = @"Sorry incorrect. Please recheck your answers.";

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Result"
                                                    message:display
                                                   delegate:self
                                          cancelButtonTitle:@"Cancel"
                                          otherButtonTitles:@"OK", nil];

    if (result)
    {
        display = @"You are correct! You Won!";

        if (sess.isMutiplayerGame)
        {
            [_gameCenterController endGame];

            [self showGameOverScreen:YES isMultiplayer:YES];
        } 
        else
        {                
            [self showGameOverScreen:YES isMultiplayer:NO];
        }

        dispatch_async(dispatch_get_main_queue(), ^{
            [MBProgressHUD hideHUDForView:self.view animated:YES];

            [alert show];
        });

    } 
    else 
    {
        dispatch_async(dispatch_get_main_queue(), ^{
            [MBProgressHUD hideHUDForView:self.view animated:YES];

            [alert show];
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T06:06:44.830

`MBProgressHUD`这可能是由' 动画和' 动画之间的冲突引起的问题`UIAlertView`。

我从来没有使用过`MBProgressHUD`，但是查看 GitHub 上的代码似乎他们已经解决了你的问题。`MBProgressHUD`有财产`completionBlock`。

这样的代码应该可以工作：（*警告：未经测试*）

```
dispatch_async(dispatch_get_main_queue(), ^{
    [MBProgressHUD HUDForView:self.view].completionBlock = ^{
        [alert show];
    };
    [MBProgressHUD hideHUDForView:self.view animated:YES];
}); 
```

`MBProgressHUD`在视图完成动画后触发它`completionBlock`，因此应该不再有冲突。

作为旁注的`MBProgressHUD`方法：

```
- (void)showAnimated:(BOOL)animated 
 whileExecutingBlock:(dispatch_block_t)block 
             onQueue:(dispatch_queue_t)queue
     completionBlock:(MBProgressHUDCompletionBlock)completion; 
```

似乎它更适合您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T05:25:22.717

用块声明线程外的警报视图：

```
__block UIAlertView *alert; 
```

# java - Java 注册表类？

> ID：13888807
> 
> 赞同：4
> 
> 时间：2012-12-15T02:36:25.890
> 
> 标签：java, php, registry

我对Java相当陌生。我来自 PHP，我曾经使用魔术 __get 和 __set 方法在 php 中创建注册表类。这样系统的其他部分就可以轻松做到：

```
registry.foo = new Foo(); 
```

我应该提到我正在尝试创建游戏引擎。这是我在 Java atm 中的注册表：

```
class Registry {

    private static Map<String, Object> box = new HashMap<String, Object>();

    public static Object get(String key) {

        if (Registry.box.get(key) != null) {
            return Registry.box.get(key);
        }else {
            return null;
        }
    }

    public static void set(String key, Object o) {
        Registry.box.put(key, o);
    }

} 
```

然后为了系统的其他部分访问注册表，我目前需要这整件事：

```
((Object) Registry.get("Object")).doSomething(); 
```

这真的是很多代码。在 php 中，这将通过简单地完成：

```
Registry.foo.doSomething(); 
```

有什么办法可以让这更简单一点？我想我可以创建公共字段，但是注册表类需要隐式创建这些字段，因为可能需要添加注册表类本身未知的新对象，这很烦人：P

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T02:42:57.787

这是一个两方面的问题：

1.  Java 是一种静态类型语言，不提供在运行时定义对象的语言灵活性（您*可以*使用库在运行时合成类，但是，请参阅 #2）
2.  对象的全局注册表破坏了类型安全语言中的许多安全性。如果您的整个应用程序以获取对象和将对象放入全局对象为中心`Map`，则可能会有更安全且耦合更少的设计。

如何解决？

1.  重新设计您的应用程序结构以不需要全局地图。
2.  使用 Java 的动态语言子集（例如 Groovy）。
3.  使用 Scala 2.10（JVM 兼容），它具有`Dynamic`完全符合您要求的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T02:46:36.460

首先这个方法太冗长了：

```
public static Object get(String key) {
    if (Registry.box.get(key) != null) {
        return Registry.box.get(key);
    }else {
        return null;
    }
} 
```

可能只是：

```
public static Object get(String key) {
   return Registry.box.get(key);
} 
```

但其次，这绝对是一个糟糕的设计。全局存储库 - 听起来不合理。通过字符串键存储所有类型的对象 - 这太可怕了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T02:39:41.273

> 有什么办法可以让这更简单一点？

不是以任何实际的方式。Java 是一种静态类型语言，必须预先知道对象的结构。PHP 的等价物的想法`__get`与`__set`该语言是对立的。

对于它的价值，无论如何，您的“注册表”看起来都是糟糕的设计。（诚​​然，从您展示的小代码中做出了一些非常疯狂的假设。）您不应该需要一个看似无关对象的全局存储库。您应该考虑某种依赖注入。

根据您的评论，而不是像这样构造您的代码：

```
class World implements GameSystem {

    public void update() {
        Registry.get("game").doSomething();
    }

} 
```

你应该做：

```
class World implements GameSystem {

    Game game;
    public World(Game game) { // and other dependencies
        this.game = game;
    }

    public void update() {
        this.game.doSomething();
    }

} 
```

这个想法是你的程序的组件实际上并没有任何业务知道如何找到其他组件。它还使组件之间的依赖关系显式化，并帮助您避免循环依赖关系。

# java - 使用具有 ID 的元素的 Jsoup 进行“屏幕抓取”

> ID：13888808
> 
> 赞同：1
> 
> 时间：2012-12-15T02:36:34.363
> 
> 标签：java, android, jsoup

全部-我不知道如何获取具有 ID 的元素的值。到目前为止我有这个

```
@Override
    protected Void doInBackground(Void... unused) {
        org.jsoup.nodes.Document doc = null;
        try {
            doc = Jsoup.connect("http://www3.rtd-denver.com/schedules/getSchedule.action?runboardId=123&routeId=0&routeType=1&serviceType=3").get();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        docTitle = doc.select("table[id=\"td1-7\"] [class=\"datacell\"]").first().text(); //NOT SURE HERE
        return null; 
```

我想要的是`<td id="td2-6" class="datacell">`在我使用它时获得力接近的价值，所以我知道这是不对的。我怎样才能得到这个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T03:20:30.510

首先，您应该使用：

```
doc.select("td#td2-6.datacell").first().text() 
```

或者，由于 ID 必须是唯一的，只需：

```
doc.select("td#td2-6").first().text() 
```

但是，我怀疑这会给您带来关闭的力量，除非它没有找到任何元素（在这种情况下`first()`可能为空）。

如果这些仍然不起作用，并且由于您没有提供任何 LogCat 错误上下文，请检查是否`doc`为 null，在这种情况下您的初始`Jsoup.connect()`失败。

# c++ - 如何设计一个配置实用程序以静态和动态链接工作？

> ID：13888809
> 
> 赞同：0
> 
> 时间：2012-12-15T02:36:53.893
> 
> 标签：c++

我觉得这个问题可能有一个简单的解决方案，但对我来说并不明显——我有一个配置类，用于存储从 ini 文件加载的各种配置选项，以及其他地方。在我的应用程序中，我有一个库和客户端，以及 2 个配置 - 将库构建为 DLL 并动态链接客户端，或者将它们一起构建为单个二进制文件。那么如何在库和客户端中拥有/使用我的配置对象呢？如果我在两者中都包含配置类定义，我认为它会由于重新定义而给我链接错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:03:52.683

> 如果我在两者中都包含配置类定义，我认为它会由于重新定义而给我链接错误。

不，不会的。Windows DLL 不遵守单一定义规则。基本上，在 Windows 中，ODR 停止在模块边界，即 ODR*在*可执行文件和DLL 中受到尊重，但不在它们之间*。*这是否是一件好事并不重要，事情就是这样。因此，您可以在 DLL 和可执行文件中包含配置类的定义。但是，将有两个单独的单例实例（我假设它是一个单例类，就像配置类通常那样），每个模块中都有一个。从这个意义上说，它不会是真正的单例，至少不会跨模块。

如果你想要一个真正的跨模块的单例，你必须做更多的工作。您有两个选择：主从或合并（或“菊花链”）。

第一种选择是将一个模块（例如，可执行文件）指定为实例化（并保留）单例对象的模块，然后将指向该实例的指针传递给所有“从属”模块，然后这些“从属”模块可以通过公共接口（因此两个模块对配置类具有相同的*声明*，但只有一个模块创建它并将其传递给其他模块）。它看起来像这样：

在头文件“config_class.h”中：

```
class ConfigClass {

  // a bunch of declarations...

  public:
    static ConfigClass& getInstance();  // the access-point for the singleton.
};

#ifdef MY_LIB_NOW_BUILDING_MASTER

extern "C" __declspec(dllimport) void setConfigClassInstance(ConfigClass* pobj);

#else

extern "C" __declspec(dllexport) void setConfigClassInstance(ConfigClass* pobj);

#endif 
```

在 cpp 文件“config_class.cpp”中：

```
#include "config_class.h"

// a bunch of definitions for the config_class member functions.

#ifdef MY_LIB_NOW_BUILDING_MASTER

ConfigClass& ConfigClass::getInstance() {
  static ConfigClass instance( /*  */ );
  return instance;
};

#else

static ConfigClass* masterInstance;

void setConfigClassInstance(ConfigClass* pobj) {
  masterInstance = pobj;
};

ConfigClass& ConfigClass::getInstance() {
  return *masterInstance;
};

#endif 
```

在上面的示例中，您将从主模块（很可能是主可执行文件）调用 setConfigClassInstance 来设置 DLL 的配置对象，但要确保 DLL 在静态初始化（加载）期间不需要配置类.

第二种选择是合并或菊花链您的单例。在这种情况下，每个模块都会创建自己的单例实例，但随后，使用与上述类似的方案，它们将指针传递给彼此的实例，从而允许它们合并到一个实例中（交叉链接），或者将它们链接在一起（例如，像循环链表或环表），然后您将调用分派到适当的实例。

我认为对于您的应用程序，第一个选项可能是最简单的。

注意：在非 Windows 环境中，情况完全不同，以上均不适用。

# java - 如何通过 tcp 套接字将对象发送到 android 设备？

> ID：13888810
> 
> 赞同：1
> 
> 时间：2012-12-15T02:37:17.047
> 
> 标签：java, android, sockets, tcp

我有一个用 java 编写的程序，它充当一种服务器。我需要通过这个在 Tcp 套接字中向手机发送一个对象。

在此之前，我只是通过`PrintWriter`和通信字符串数据`DataInputStream`。我打算尝试`ObjectInputStream`但我听说这可能会由于不同的 java 版本等而导致跨平台失败。我的对象是可序列化的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T02:39:23.790

您可以使用 JSON 序列化器（例如[这里](http://flexjson.sourceforge.net/)的这个）将对象转换为非常易读的字符串，这样您就可以使用正常的 PrintWriter 系统。您只需将字符串写入流，然后在另一端恢复它。简单的。

# ruby - ruby 如何支持多重继承？

> ID：13888814
> 
> 赞同：10
> 
> 时间：2012-12-15T02:37:52.537
> 
> 标签：ruby

ruby 如何支持**多重继承**，以便我可以从多个类继承？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-15T02:44:24.327

Ruby 没有直接的多重继承。Ruby 也有类似的东西：[mixins](http://docs.ruby-doc.com/docs/ProgrammingRuby/html/tut_modules.html#S2)。例如：

```
module M; end
module N; end

class C
  include M
  include N
end

C.ancestors  #=>  [C, N, M, Object, Kernel, BasicObject] 
```

请注意，mixin*不是*多重继承，而是基本上消除了对它的需求。

# java - 将按钮链接到 XML 页面

> ID：13888820
> 
> 赞同：1
> 
> 时间：2012-12-15T02:38:32.797
> 
> 标签：java, android

基本问题，但我检查了很多地方，只能找到有关弹出消息的信息，例如吐司等。

我如何能够链接 buttonA（存储在片段 xml 文件中）以便查看 activitypage.xml？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T03:00:07.347

您可以做的一件事是为每个“屏幕”创建一个新活动。让我们举个例子，MyNewActivity。其余的很简单。在您的按钮 XML 中添加以下行：

```
android:onClick = "nextActivity" 
```

然后在包含 buttonA 的 Fragment 中，执行以下操作：

```
public void nextActivity (View v)
{
  Intent intent = new Intent (getActivity(), MyNewActivity.class); //using getActivity since this is from a fragment
  getActivity().startActivity (intent);
} 
```

确保在 MyNewActivity 你把这条线`onCreate`

```
setContentView(R.layout.activitypage); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T03:00:25.983

在你的哪个膨胀你的按钮实现一个方法来打开按钮被点击时`Activity`所需的第二个。在属性下为按钮声明的`Activity`任`button.setOnClickListener()`一方法。`xml``android:onClick="buttonClick"`

# python - 从迭代器创建容器

> ID：13888826
> 
> 赞同：1
> 
> 时间：2012-12-15T02:39:24.047
> 
> 标签：python, python-3.x

我想从迭代器创建一个`set`,等。`list`不幸的是，它们的构造函数需要可迭代而不是迭代器。我不想创建一个很快就会被丢弃的可迭代对象。

当然，我可以简单地使用列表或集合理解，它可以精确地做我想要的（以及更多）。但是，它们的语法是特殊的。所以当我试图写一个函数时：

```
def create_from_gen(container_type, generator):
  return container_type(generator) 
```

我被困。对于用户定义的容器，我当然可以定义自己的构造函数；对于库和内置类型，我别无选择。我可以检查`list`and `set`，并使用我认为的特殊语法，但这很难看。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T02:45:47.620

迭代器也是一个可迭代对象。它应该总是有一个`__iter__`返回自身的方法。这是Python[中迭代器规范的一部分。](http://docs.python.org/3/library/stdtypes.html#iterator-types)

因此，只需将您的迭代器传递给`list`or`set`构造函数，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T02:45:57.900

所有迭代器都是可迭代的。“可迭代”的定义是可以从中创建迭代器。

```
>>> list(iter((1, 2, 3)))
[1, 2, 3] 
```

# php - 属性命名约定

> ID：13888834
> 
> 赞同：3
> 
> 时间：2012-12-15T02:41:34.277
> 
> 标签：php, naming-conventions, redbean

Paging Gabor de Mooij 或其他任何对 RedBeanPHP 更有经验的人。我们当前的命名约定是使用下划线，尽管任何人都可以使用 Pascal/Camel 大小写，但我认为重要的是一致性，我们不想重构所有内容以符合一致的命名模式，但我们会看看我们能做什么。

只有这些说法是矛盾的。有人可以澄清这个规则吗？

![在此处输入图像描述](../Images/c6d34f8762268118f53565db371a363b.png)

另外，您不认为 2 个或更多带字的属性也很常见，而且如果它们都用小写字母表示很难看：date_added 或 dateAdded？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T19:21:08.957

RedBeanPHP 专为“敏捷”方法而设计。该数据库由 RedBeanPHP 即时制作，而您正在编写应用程序并与您的客户讨论域。

但是，我永远不会施加人为的限制。您可以使用下划线和大写字符，只需记住 RedBeanPHP 使用一些约定来检索/存储关系：table_id 和 table1_table2 是最重要的。

另请注意，大写表名可能很难维护，因为某些数据库-操作系统组合不区分大小写。

从 RedBeanPHP 3.4（现在是 alpha）开始，如果您尝试存储具有无效类型名称的 bean，RedBeanPHP 将抛出异常；但是，这只是为了警告您。要覆盖此检查，请使用 setStricTyping(false)。

例子：

```
R::setStrictTyping(false);
$bean = R::dispense('postAddress');
$bean->housenumber = '1';
R::store($bean);
$bean = R::dispense('post_address');
$bean->house_number = '2';
R::store($bean); 
```

这将起作用。

我希望这可以澄清情况，我会尽快更新文档以更具体。感谢您通知我有关此问题的信息。随时在我们的论坛上提问：[https ://groups.google.com/forum/?fromgroups#!forum/redbeanorm](https://groups.google.com/forum/?fromgroups#!forum/redbeanorm)

请注意，您的第一条消息需要在论坛上获得批准；但是没有其他方法可以阻止垃圾邮件..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T03:07:43.680

在以前的版本中，您可以在属性类型中使用下划线，但不推荐使用，因为它可能与外键冲突。我不确定最新版本是禁止它还是不推荐它。这些陈述是矛盾的，但同样，我认为你可以使用下划线，只是不推荐。

在以前的版本中，所有外键都被命名`<TABLENAME>_id`并由`$bean->TABLENAME->TABLEPROPERTY`

表名通过下划线以多对多关系链接`<TABLE1>_<TABLE2>`。

我很确定 redbean 的最新版本与旧版本相同，但如果您将其作为属性或使用下划线组合两个表名，则可能会导致复杂*化*`****_id`。

据我所知，这是仅有的两个可能出现问题的情况。我不确定标签或其他属性。

# sql-server-2008 - 使用 CONVERT ，拆分函数的存储过程的提示

> ID：13888837
> 
> 赞同：0
> 
> 时间：2012-12-15T02:42:03.147
> 
> 标签：sql-server-2008, reporting-services, dbo

我正在研究一个存储过程，其中包含我需要破译的以下变量 ResponseRange ：

```
**@ResponseRange VARCHAR(64) = null,** 
```

然后我们有：

```
IF (@ResponseRange is not null)
BEGIN
    INSERT 
    INTO #tempLK_ResponseStatuses
    SELECT CONVERT(INT, val) FROM dbo.Split(@ResponseRange, ',')    
END

IF (@ClientResponseRange is not null)
BEGIN
    INSERT 
    INTO #tempClientLK_ResponseStatuses
    SELECT CONVERT(INT, val) FROM dbo.Split(@ClientResponseRange, ',')  
END 
```

线路发生了什么

```
SELECT CONVERT(INT, val) FROM dbo.Split(....) 
```

我相信以上所有内容都对应于网页 CS 文件中的代码，这是一个示例：

```
new ResponseGroup() {
        ID = (int) ResponseStatusGroups.Completes,
        Code = 1,
        Label = "Completes",
        ResponseCodes = null,
        ClientResponseCodes = "10,11,12,13,14,15,16,17,18,19"
    },
    new ResponseGroup() {
        ID = (int) ResponseStatusGroups.OverQuota,
        Code = 2,
        Label = "Over Quota",
        ResponseCodes = "40,41,42,43,44,45,46,47,48,49",
        ClientResponseCodes = "40,41,42,43,44,45,46,47,48,49" 
```

# css - 在 LESS 导入中的选择器内引导媒体查询？

> ID：13888843
> 
> 赞同：3
> 
> 时间：2012-12-15T02:43:23.490
> 
> 标签：css, twitter-bootstrap, less

我正在尝试将 Bootstrap 应用于特定的 div。为此，我将导入 Boostrap LESS 文件，如下所示：

```
.bootstrap_wrap {
    @import 'bootstrap/bootstrap.less'; 
    @import 'bootstrap/responsive.less';    
} 
```

但是，这样做似乎会破坏媒体查询。

有什么方法可以选择性地应用 Boostrap 而不会破坏 Boostrap CSS 中的媒体查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:06:47.613

我不清楚你是在编译这个还是在使用 less.js

我能够毫无错误地编译它（使用 Codekit），结果看起来不错，只需确保路径正确即可。

如果我创建一个新的 bootstrap_wrap.less 文件

```
.bootstrap_wrap {
@import 'bootstrap.less';
@import 'responsive.less'; 
```

}

并将其放在与其他 bootstrapless 文件相同的目录中，然后对其进行编译，结果如下：
[bootstrap_wrap.css](https://dl.dropbox.com/u/2665617/bootstrap_wrap.css)

结果对我来说看起来很有希望，例如我看到：

```
@media (max-width: 767px) {
.bootstrap_wrap #footer {
margin-left: -20px;
margin-right: -20px;
padding-left: 20px;
padding-right: 20px;
}
} 
```

祝你好运！

# wcf - 从 ASP.Net 在 WCF 中进行第一次服务调用并进行第二次调用

> ID：13888844
> 
> 赞同：0
> 
> 时间：2012-12-15T02:43:39.237
> 
> 标签：wcf

我对来自 asp.net 应用程序的 WCF 服务调用有很大的疑问。我实现了双工通道和回调合同。我使用的并发模式是可重入的，而实例模式=每个会话。我可以调用 wcf 服务，它会触发回调方法。到此为止，一切都很好。

但是我正在考虑一种方法，例如，当我第一次调用服务时，我使用 waithandler 对象将该调用保存在该服务方法中并触发回调方法。此回调命中客户端代码，并再次从客户端调用同一服务类中的另一个方法以释放该等待处理程序锁。当我使用等待处理程序锁定第一个调用并触发回调方法时，它正在回调客户端，之后，它再次调用同一服务中的另一个方法。但是我遇到了超时异常...可以在同一服务中保留第一个电话并拨打第二个电话？我对 ASP.Net 很陌生

```
[ServiceContract(SessionMode = SessionMode.Required, CallbackContract = typeof(IMyServiceCallBacks))]
public interface IMyService
{
    [OperationContract]
    string GetData1();

    [OperationContract]
    void GetData2(bool isOK);
}

public interface IMyServiceCallBacks
{
    [OperationContract(IsOneWay = true)]
    void MyCallBack();
} 
```

这是服务等级

```
 [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession, ConcurrencyMode = ConcurrencyMode.Reentrant)]
public class MyService : IMyService
{                
    EventWaitHandle waitHandle;
    bool isook = false;

    public MyService()
    {

    }

    string IMyService.GetData1()
    {            

        waitHandle = new EventWaitHandle(false, EventResetMode.AutoReset);

        CallMethod();

        bool isOK = waitHandle.WaitOne();
        return "success";
    }

    private void CallMethod()
    {
        OperationContext.Current.GetCallbackChannel<IMyServiceCallBacks>().MyCallBack();
    }

    public void GetData2(bool isOK)
    {
        isook = true;
        waitHandle.Reset();
    }

 } 
```

下面是客户端代码

```
 [CallbackBehavior(ConcurrencyMode = ConcurrencyMode.Reentrant,  UseSynchronizationContext = false, IncludeExceptionDetailInFaults = true)]
public class MyProxyClient : MyService, MyServiceCallback
{

   bool isOK;
   private MyServiceClient caServiceProxy
   private InstanceContext myInstanceContext;

   public MyService()
   {

     myInstanceContext = new InstanceContext(this);
     EndpointAddress endPointAddress = new EndpointAddress("http://localhost:2222222/MyWCF1/MyService.svc");

     caServiceProxy = new MyServiceClient(myInstanceContext, new WSDualHttpBinding(), endPointAddress);
   }

    public string GetData1()
    {
       string hhhh = caServiceProxy.GetData1();
       return hhhh;
    }

    public void GetData2(bool isOK)
    {
        caServiceProxy.GetData2(isOK);  // here it is processing but finally time out
    }

    // This is the call back
    public void MyCallBack()
    {
        isOK = true;
        GetData2(isOK);
    }   
 } 
```

下面是 web config serviceModeltag

```
 <system.serviceModel>
<services>
  <service name="MyABService.MyService" behaviorConfiguration="WCFDuplex.Service1Behavior">
    <!-- Service Endpoints -->
    <endpoint address="" binding="wsDualHttpBinding" contract="MyABService.IMyService">         
      <identity>
        <dns value="localhost"/>
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="WCFDuplex.Service1Behavior">          
      <serviceMetadata httpGetEnabled="true"/>         
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

我使用 svcutil 生成代理。任何想法 ？？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:38:29.580

1) This is bad idea to rely on unstable channel and hold service method call. Calls shouldn't be long running. Therefore Http duplex based on periodical polling. TCP is better but for this kind of scenario I recommend to use operation with OneWay = true for Method1\. Server can register clients, remember/manage states, do some work. And client must choose behavior according to callbacks. You can use AutoResetEvent/ManualResetEvent/TPL infrastructure for that background threads interchange/sync.

2) I'm 90% sure that notifying client with callback inside service method with OneWay = false can cause errors. See for ex. [here](https://stackoverflow.com/questions/8956169/wcf-service-client-with-the-server-did-not-provide-a-meaningful-reply-excep/13525894#13525894)

I wrote that you can avoid problems by deferring callback (Task.Factory.StartNew/QueueUserWorkItem etc.) to allow method to finish.

# php - 在 php 中处理日期

> ID：13888845
> 
> 赞同：1
> 
> 时间：2012-12-15T02:43:42.213
> 
> 标签：php

您好，我正在做网络统计。时间跨度有问题。from 和 to 有两个输入。 ![时间跨度](../Images/503979ab953b017dd7404f52c977e7d0.png)

默认情况下，它们会从以下代码中花费时间：

```
$date = date('y-m-d');
$sd = strtotime ( '-1 month' , strtotime ( $date ) ) ;
$trgD = date ( 'y-m-d' , $sd ); 
```

比我将它们打印到两个输入（从和到）。现在当用户输入时间时我遇到了问题。我如何将它们存储到 $date 和 $trgD；我该怎么办？表格代码是：

```
<form name="sdate" method="post" action="index.php">
      <td width="38" height="35">Аас</td>
      <td width="89">
      <input name="date1" id="date1" title="Эхлэх өдөр" size="14" value="<?php echo     $trgD ?>" type="text">

      </td>
      <td width="48"><input style="padding-bottom: 4px;" src="images/img1.gif" alt="Та өдрөө сонгоно уу" title="эхлэх өдөр сонгох" onClick="return showCalendar('date1');" align="absmiddle" border="0" type="image"></td>
      <td width="61">Хүртэл </td>
      <td width="97"><input name="date2" id="date2" title="Дуусах өдөр" size="14" value="<?php echo $date ?>" type="text"></td>
      <td width="77"><input style="padding-bottom: 4px;" src="images/img1.gif" alt="Дуусах өдрийг сонгох" title="Дуусах өдөр" onClick="return showCalendar('date2');" align="absmiddle" border="0" type="image"></td>
      <td width="196">
   <input type="submit" name="submit1" value="Илгээх"> 
      </td>
      </form> 
```

我需要设置如下条件：

```
if (user submit){
$date=store submited date1;
$trgD= store submited date2;}

else{ 
$date = date('y-m-d');
$sd = strtotime ( '-1 month' , strtotime ( $date ) ) ;
$trgD = date ( 'y-m-d' , $sd ); } 
```

我不知道如何写这个条件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T02:56:09.053

如果我清楚地理解您的问题，将提交的日期存储到变量中是相当容易的。

```
if(isset($_POST['submit1'])) {

    if(empty($_POST['trgD'])) 
       { $trgD = date ( 'y-m-d' , $sd );} 

    else if(empty($_POST['date2'])) 
       { $date2 = date('y-m-d'); }

    }else {
        $sd = strtotime ( '-1 month' , strtotime ( $date ) ) ;
        $trgD = mysql_real_escape_string($_POST['trgD ']);
        $date2 = mysql_real_escape_string($_POST['date']);

        <form name="sdate" method="post" action="index.php">
              <td width="38" height="35">Аас</td>
              <td width="89">
              <input name="date1" id="date1" title="Эхлэх өдөр" size="14" value="<?php echo     $trgD ?>" type="text">

              </td>
              <td width="48"><input style="padding-bottom: 4px;" src="images/img1.gif" alt="Та өдрөө сонгоно уу" title="эхлэх өдөр сонгох" onClick="return showCalendar('date1');" align="absmiddle" border="0" type="image"></td>
              <td width="61">Хүртэл </td>
              <td width="97"><input name="date2" id="date2" title="Дуусах өдөр" size="14" value="<?php echo $date ?>" type="text"></td>
              <td width="77"><input style="padding-bottom: 4px;" src="images/img1.gif" alt="Дуусах өдрийг сонгох" title="Дуусах өдөр" onClick="return showCalendar('date2');" align="absmiddle" border="0" type="image"></td>
              <td width="196">
           <input type="submit" name="submit1" value="Илгээх"> 
              </td>
              </form>

        }} 
```

# php - 出现语法错误时收到错误消息？

> ID：13888846
> 
> 赞同：1
> 
> 时间：2012-12-15T02:44:00.780
> 
> 标签：php

我有一堂课并且注释行失败了（显然是因为我不需要`$`before `displayname`），但是我最终不得不放入一堆`echo`语句来解决这个问题，因为没有抛出错误。

我希望有办法。

```
class RegisterModel {
    var $displayname;
    ...
    function RegisterModel() {
        try {
            if (empty($_POST) === false) {
                // THIS LINE IS FAILING ... BUT I'M NOT GETTING AN ERROR
                // I KNOW WHY IT'S FAILING ... BUT I WANT AN ERROR TO THROW
                $this->$displayname = $_POST['displayname'];
                ...
            }
        }
        catch (Exception $e) {
            echo $e->getMessage();
        }
    }
} 
```

错误是否应该被抛出`catch`而我只是没有正确使用它？我需要设置一些全局设置以便引发错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T02:53:40.870

```
set_error_handler(function($errno ,$errstr,$errfile,$errline,$errcontext){
   if($errno & error_reporting()) throw new Exception($errstr,$errno);
}); 
```

请记住，您要设置`error_reporting`为所需的级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T02:48:45.050

您可以尝试添加：

```
 error_reporting(E_ALL);
ini_set('display_errors', 1); 
```

如果这显示错误，则可能存在运行时配置错误。如果不可能，您可以相应地调整您的配置。您可以查看[此处](http://us3.php.net/manual/en/errorfunc.configuration.php#ini.error-reporting)定义的各种与错误相关的变量。

# javafx-2 - 当窗口调整大小时，如何使 Imageview 调整自身大小

> ID：13888847
> 
> 赞同：2
> 
> 时间：2012-12-15T02:44:10.267
> 
> 标签：javafx-2

我有一个具有任意数量的行和列的 GridPane，并用 ImageView 填充每个单元格。

现在，这个 GridPane 包含在 AnchorPane 中，因此当 Window 调整大小时，GridPane 会很好地增长或缩小，但 ImageViews 不会改变它的大小。

我必须做些什么才能使 ImageView 在 GridPane 中采用其单元格的大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T11:28:51.513

这可能有两个原因。

1）您可能没有为网格窗格定义行和列约束。即使 a`GridPane`生长，它的细胞也不一定会超出它们的首选大小。实现这一点的最佳方法是定义具有百分比宽度/高度的约束，如下所示：

```
public class ImageGrid extends Application {
    @Override
    public void start(final Stage stage) throws Exception {
        final GridPane pane = new GridPane();
        for (int i = 0; i < 10; i++) {
            final ImageView imageView = new ImageView(new Image("..."));
            pane.getChildren().add(imageView);
            GridPane.setConstraints(imageView, i%5, i/5);
        }

        pane.getColumnConstraints().addAll(
             columnWithPercentage(20),
             columnWithPercentage(20),
             columnWithPercentage(20),
             columnWithPercentage(20),
             columnWithPercentage(20)
        );

        pane.getRowConstraints().addAll(
                rowWithPercentage(50),
                rowWithPercentage(50)
        );

        final Scene scene = new Scene(pane);
        stage.setScene(scene);
        stage.setWidth(800);
        stage.setHeight(600);
        stage.show();
    }

    private ColumnConstraints columnWithPercentage(final double percentage) {
        final ColumnConstraints constraints = new ColumnConstraints();
        constraints.setPercentWidth(percentage);
        return constraints;
    }

    private RowConstraints rowWithPercentage(final double percentage) {
        final RowConstraints constraints = new RowConstraints();
        constraints.setPercentHeight(percentage);
        return constraints;
    }
    public static void main(String[] args) {
        Application.launch(args);
    }
} 
```

这将创建一个 5x2 的`ImageView`s 网格，它将平均填充网格窗格的整个空间。

2) 上面的解决方案会增加你的图像视图，但在被`ImageView`告知之前，类本身不会将图像拉伸到超出其正常大小。如果您希望图像在网格扩展时按比例放大，`ImageView#fitWidthProperty`您可能必须进行绑定。`ImageView#fitHeightProperty`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-27T22:12:50.960

我是 JavaFX 的初学者，我遇到了类似的问题。我有一个包含 BorderPane 的 AnchorPane。BorderPane 的中心包含一个 GridPane (gridPaneMaze)。这个 gridPaneMaze 使用数组 ImageView[7][7] images 来用方形 .png 文件填充我的网格窗格的每个单元格。

我希望我的图像随着窗口的高度而变化。因为我使用了正方形，所以列的宽度应该会自动改变。

起初，当我调整窗口大小时，我的列比我的图像更宽，并且图像的高度对于行来说太大了。

经过反复试验，我发现这是成功的：

**图像** 我在行和列之间进行了for循环遍历，在每个单元格中，我使用相应的图像（始终是正方形）设置 Imageview 并使用此高度绑定（我将网格窗格的高度除以行数):

```
images[i][j].fitHeightProperty().bind(gridPaneMaze.heightProperty().divide(7));
images[i][j].setPreserveRatio(true); 
```

我想您也可以使用 widthProperty 并除以列数。但是因为大多数显示器的高度都小于宽度，所以我使用了高度。

**网格窗格：**

我用 FXML 制作了我的 gridPane，但这对值没有影响。

```
<BorderPane AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
<center>
    <GridPane fx:id="gridPaneMaze" centerShape="false" minHeight="0.0" minWidth="0.0"   BorderPane.alignment="TOP_LEFT">
        <columnConstraints>
            <ColumnConstraints halignment="CENTER" />
            <ColumnConstraints halignment="CENTER" />
            <ColumnConstraints halignment="CENTER" />
            <ColumnConstraints halignment="CENTER" />
            <ColumnConstraints halignment="CENTER" />
            <ColumnConstraints halignment="CENTER" />
            <ColumnConstraints halignment="CENTER" />
        </columnConstraints>
        <rowConstraints>
            <RowConstraints valignment="CENTER" />
            <RowConstraints valignment="CENTER" />
            <RowConstraints valignment="CENTER" />
            <RowConstraints valignment="CENTER" />
            <RowConstraints valignment="CENTER" />
            <RowConstraints valignment="CENTER" />
            <RowConstraints valignment="CENTER" />
        </rowConstraints>
        <children>
            //...
        </children>
        <BorderPane.margin>
            <Insets left="10.0" top="10.0" />
        </BorderPane.margin>
    </GridPane>
</center> 
```

*BORDERPANE：*我在锚窗格中添加了一个边框窗格，因此我将所有锚设置为“0”。

*GRIDPANE：*有 minWidth 0 和 minHeight 0。我没有设置 prefWidth、prefHeight、maxWidth 或 maxHeight。

*ROWS：*我只设置垂直对齐到中心（没有 minHeight，maxHeight 的 prefHeight）

*列：*我只将水平对齐设置为中心（没有 minWidth，maxWidth 的 prefWidth）

希望这会有所帮助...

# php - 网站正常运行时间在线/离线 PHP 脚本

> ID：13888850
> 
> 赞同：0
> 
> 时间：2012-12-15T02:44:22.587
> 
> 标签：php

这是我目前拥有的。它不起作用，需要做什么来解决它？

```
<?php
$status =  GetServerStatus('http://domain.com',80)
?>

<?php
function GetServerStatus($site, $port)
{
    $status = array("OFFLINE", "ONLINE");
    $fp = @fsockopen($site, $port, $errno, $errstr, 2);

    if (!$fp) {
        return $status[0];
    } else { 
        return $status[1];
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T02:52:00.450

您没有输入 http:// 部分。

```
echo GetServerStatus('www.domain.com', 80);

function GetServerStatus($site, $port)
{
    $fp = @ fsockopen($site, $port, $errno, $errstr, 2);
    return ($fp)
        ? 'ONLINE'
        : 'OFFLINE';
} 
```

*   [http://us3.php.net/fsockopen](http://us3.php.net/fsockopen)

Fist 参数应该是主机名而不是 URL。

# android - 在创建类后的第一秒内，如何使手势侦听器处于非活动状态？

> ID：13888864
> 
> 赞同：0
> 
> 时间：2012-12-15T02:47:35.207
> 
> 标签：android, android-gesture

我在游戏中遇到以下问题：

假设我在 lvl 3 上有 5 个屏幕。每个屏幕都有自己的类。所以我有 5 个班级，名为 lvl 3_1_0、3_2_0 .... .... 3_5_0。我还有一个手势监听器，所以当你向右滑动时，它会转到右侧的屏幕。正常玩时一切正常，但如果用户开始疯狂地向右滑动，并且他每秒刷了很多次，游戏就会崩溃。

我想过添加一个“Thread.sleep”，但是当我让线程睡眠时我无法让它工作，加载类时游戏崩溃。我想我把它放在了错误的地方，或地方....如果手势监听器等待一秒钟才能激活，最好的办法是。我还有一个手势过滤器类。我不知道是否应该将 thread.sleep 放入手势过滤器类或每个类中的手势侦听器中。

这是 on create 和手势监听器的代码...

```
public class lvl3_5_0 extends Activity implements View.OnTouchListener ,  SimpleGestureListener {

public static final String PREFS_NAME = "MyPrefsFile";
  static SharedPreferences settings;
  SharedPreferences.Editor editor;

private SimpleGestureFilter detector; 
static final int MIN_DISTANCE = 100;

   @Override
    public void onCreate(Bundle savedInstanceState) {
       overridePendingTransition(R.anim.fadein, R.anim.fadeout);

        detector = new SimpleGestureFilter(this,this);

        super.onCreate(savedInstanceState);
        setContentView(R.layout.lvl3_5_0);

                ImageView iv = (ImageView) findViewById (R.id.image);
                if (iv != null) {
                   iv.setOnTouchListener (this);
                }

setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    }

   //-----------------------------     

   // Gesture detection

        @Override 
        public boolean dispatchTouchEvent(MotionEvent me){ 
          this.detector.onTouchEvent(me);
         return super.dispatchTouchEvent(me); 

        }
        @Override
         public void onSwipe(int direction) {

          switch (direction) {

          case SimpleGestureFilter.SWIPE_RIGHT : {
              { Intent game = new Intent(lvl3_5_0.this, lvl3_4_0.class); 

                  game.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);  game.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                  mHandler.removeCallbacks(dismissPopup);
                    this.finish(); startActivity(game);   
          }break;}

          case SimpleGestureFilter.SWIPE_LEFT :{

              { Intent game = new Intent(lvl3_5_0.this, lvl3_1_0.class); 

                      game.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);  game.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                      mHandler.removeCallbacks(dismissPopup);
                        this.finish(); startActivity(game);   
              }break;}

          case SimpleGestureFilter.SWIPE_DOWN : {

              break;}

          case SimpleGestureFilter.SWIPE_UP :{

              openOptionsMenu(); ;
          }

                                                         break;

          } 
         } 
```

这是我的手势过滤器类

```
public class SimpleGestureFilter extends SimpleOnGestureListener{

 public final static int SWIPE_UP    = 1;
 public final static int SWIPE_DOWN  = 2;
 public final static int SWIPE_LEFT  = 3;
 public final static int SWIPE_RIGHT = 4;

 public final static int MODE_TRANSPARENT = 0;
 public final static int MODE_SOLID       = 1;
 public final static int MODE_DYNAMIC     = 2;

 private final static int ACTION_FAKE = -13; //just an unlikely number
 private int swipe_Min_Distance = 65;
 private int swipe_Max_Distance = 1111100;
 private int swipe_Min_Velocity = 60;

 private int mode      = MODE_DYNAMIC;
 private boolean running = true;
 private boolean tapIndicator = false;

 private Activity context;
 private GestureDetector detector;
 private SimpleGestureListener listener;

 public SimpleGestureFilter(Activity context,SimpleGestureListener sgl) {

  this.context = context;
  this.detector = new GestureDetector(context, this);
  this.listener = sgl; 
 }

 public void onTouchEvent(MotionEvent event){

   if(!this.running)
  return;  

   boolean result = this.detector.onTouchEvent(event); 

   if(this.mode == MODE_SOLID)
    event.setAction(MotionEvent.ACTION_CANCEL);
   else if (this.mode == MODE_DYNAMIC) {

     if(event.getAction() == ACTION_FAKE) 
       event.setAction(MotionEvent.ACTION_UP);
     else if (result)
       event.setAction(MotionEvent.ACTION_CANCEL); 
     else if(this.tapIndicator){
      event.setAction(MotionEvent.ACTION_DOWN);
      this.tapIndicator = false;
     }

   }

   //else just do nothing, it's Transparent
 }

 public void setMode(int m){
  this.mode = m;
 }

 public int getMode(){
  return this.mode;
 }

 public void setEnabled(boolean status){
  this.running = status;
 }

 public void setSwipeMaxDistance(int distance){
  this.swipe_Max_Distance = distance;
 }

 public void setSwipeMinDistance(int distance){
  this.swipe_Min_Distance = distance;
 }

 public void setSwipeMinVelocity(int distance){
  this.swipe_Min_Velocity = distance;
 }

 public int getSwipeMaxDistance(){
  return this.swipe_Max_Distance;
 }

 public int getSwipeMinDistance(){
  return this.swipe_Min_Distance;
 }

 public int getSwipeMinVelocity(){
  return this.swipe_Min_Velocity;
 }

 @Override
 public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
   float velocityY) {

  final float xDistance = Math.abs(e1.getX() - e2.getX());
  final float yDistance = Math.abs(e1.getY() - e2.getY());

  if(xDistance > this.swipe_Max_Distance || yDistance > this.swipe_Max_Distance)
   return false;

  velocityX = Math.abs(velocityX);
  velocityY = Math.abs(velocityY);
        boolean result = false;

  if(velocityX > this.swipe_Min_Velocity && xDistance > this.swipe_Min_Distance){
   if(e1.getX() > e2.getX()) // right to left
    this.listener.onSwipe(SWIPE_LEFT);
   else
    this.listener.onSwipe(SWIPE_RIGHT);

   result = true;
  }
  else if(velocityY > this.swipe_Min_Velocity && yDistance > this.swipe_Min_Distance){
   if(e1.getY() > e2.getY()) // bottom to up 
    this.listener.onSwipe(SWIPE_UP);
   else
    this.listener.onSwipe(SWIPE_DOWN);

   result = true;
  }

   return result;
 }

 @Override
 public boolean onSingleTapUp(MotionEvent e) {
  this.tapIndicator = true;
  return false;
 }

 @Override
 public boolean onSingleTapConfirmed(MotionEvent arg0) {

  if(this.mode == MODE_DYNAMIC){        // we owe an ACTION_UP, so we fake an       
     arg0.setAction(ACTION_FAKE);      //action which will be converted to an ACTION_UP later.                                    
     this.context.dispatchTouchEvent(arg0);  
  }   

  return false;
 }

    static interface SimpleGestureListener{
     void onSwipe(int direction);
 }

} 
```

所以问题是：我应该把“Thread.sleep(1000);”放在哪里？被try/catch包围？（如果那是我必须使用的）

我尝试了很多，但我被卡住了

- - - - - - - - - - - - - - 解决了 - - - - - - - - - - - -----------------

这是固定的代码

```
public class lvl3_3_0 extends Activity implements View.OnTouchListener ,  SimpleGestureListener {

   boolean finished = false;   // This was added ( no need to explain XD )

private SimpleGestureFilter detector; 
static final int MIN_DISTANCE = 100;

// Handler and runnable reference

        private PopupWindow popupWindow;
        private Handler mHandler = new Handler();
        private Runnable dismissPopup = new Runnable() {
                public void run() {
                    if (popupWindow.isShowing())
                        popupWindow.dismiss();
                }
            };

   @Override
    public void onCreate(Bundle savedInstanceState) {{
       overridePendingTransition(R.anim.fadein, R.anim.fadeout);

        detector = new SimpleGestureFilter(this,this);

        settings = getSharedPreferences(PREFS_NAME, 0);
        editor = settings.edit();
          editor.putString("currentscreen", "com.appsimple.roomdroid.lvl3_3_0");
          editor.commit();

        super.onCreate(savedInstanceState);
        setContentView(R.layout.lvl3_3_0);

                ImageView iv = (ImageView) findViewById (R.id.image);
                if (iv != null) {
                   iv.setOnTouchListener (this);
                }

setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    }
   finished = true;      // This will make true the boolean after finishing the loading of the activity

    }

   //-----------------------------     

   // Gesture detection

        @Override 
        public boolean dispatchTouchEvent(MotionEvent me){ 
            if (!finished){}                 // This was added to make the gesturelistener not to listen if the activity has not finished loading.
            else {
          this.detector.onTouchEvent(me);
         return super.dispatchTouchEvent(me); }
            return false;
        }
        @Override
         public void onSwipe(int direction) {
                    if (!finished){}
            else {
          switch (direction) {

          case SimpleGestureFilter.SWIPE_RIGHT : {
              finished = false;      // this wass added after doing the swipe to avoid the gesture listener to have a que of events.
              { Intent game = new Intent(lvl3_3_0.this, lvl3_2_0.class); 

                  game.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);  game.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                  mHandler.removeCallbacks(dismissPopup);
                    this.finish(); startActivity(game);   
          }break;}

          case SimpleGestureFilter.SWIPE_LEFT :{

              { finished = false; Intent game = new Intent(lvl3_3_0.this, lvl3_4_0.class); 

                      game.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);  game.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                      mHandler.removeCallbacks(dismissPopup);
                        this.finish(); startActivity(game);   
              }break;}

          case SimpleGestureFilter.SWIPE_DOWN : {

              break;}

          case SimpleGestureFilter.SWIPE_UP :{

              openOptionsMenu(); ;
          }

                                                         break;

          } }} 
```

希望这可以帮助 ！感谢 AndroidPenguin 的帮助 :)

我正在考虑的另一个解决方案有点滞后，而不是这个好是在手势过滤器类中制作一个 Runnable 来作为一个计时器，每次计时器达到例如 1 秒时，它都会返回“isoktodotheswipe”布尔值，并且每次擦拭了“isoktodotheswipe”布尔值将变为错误......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T03:21:38.067

设置一个布尔值

例如

```
boolean finished = false; 
```

然后在您的手势/调度侦听器中，将以下内容添加到代码的最顶部：

```
if(!finished){
return;} 
```

一旦你的班级完成设置。设置完成为真。这就是我解决同样问题的方法。

# css - 悬停时不需要的重复图像

> ID：13888870
> 
> 赞同：2
> 
> 时间：2012-12-15T02:48:49.727
> 
> 标签：css, facebook, image, duplicates, tumblr

我真的很讨厌不得不这样做，但是这个问题让我处于我的座位边缘。

长话短说，我正在尝试在我的网站上添加一个小型音乐播放器小部件以及一个音乐选项卡，该选项卡将在悬停时显示音乐播放器。我已经做到了，但是每次我将鼠标悬停在音乐标签图标上时，它都会移动到指定位置，但会留下不需要的自身副本。

这是代码的第一部分：

```
<style type ="text/css">
    #musicplayer{
        text-align: center;
        font-size: 11px;
        position:absolute;left:0px;top:-100px;
        -webkit-transition: all .4s ease-in-out;
        -moz-transition: all .4s ease-in-out;
        -o-transition: all .4s ease-in-out;
        z-index:999;
    }

    #musicplayer:hover{
        top:0px;
    }

    #music{
        padding:3px;
        background: transparent;
        width:175px;
        height: auto;
        margin-left:0px;
        font-family:'Coming Soon';
        z-index: 9999;
        text-align:center;
        padding-left:2px;
        padding-right:2px;
        padding-bottom:70px;
        border-bottom-right-radius:0px;
        margin-top:20px;
    }

    #musictab{
        font-family: 'Coming Soon';
        height:auto;
        padding:3px;
        background:transparent;
        width:30px;
        margin-left:0px;
        margin-top:0px;
        -moz-border-radius:0px;
        border-bottom-right-radius:6px;
        border-bottom-left-radius:6px;
    }
</style> 
```

这是我认为也可能导致问题的 div 标签

```
<div id="musictab">
    <p><img src="http://i47.tinypic.com/2cpyjv9.jpg" border="0"></a></p>
</div> 
```

请注意，此代码还有其他`div`固有标签，但我省略了它们，因为我认为它们不会导致问题。

编辑：不妨发布我的网站（错误，Tumblr 页面），你们可以看到问题的实际效果。任何帮助是极大的赞赏。

[地点](http://wrjacobs.tumblr.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T03:22:21.157

```
 <div id="entry">
        <div class="holder"></div>
        <a href="http://wrjacobs.tumblr.com/post/37948918891/hud-biennial-019">
            <img src="..." alt="hud-biennial-019" width="380px">
        </a>
        <div class="holder"></div>
        <div class="holder"></div>
        <div class="video"></div>
        <div class="holder"></div>
        <div id="musicplayer">
            <div id="music">
                <center>
                <img... />
                <br>
            </center>
        </div>
        <div id="musictab">
            <p>
                <img src="http://i47.tinypic.com/2cpyjv9.jpg" border="0">
            </p>
        </div>
    </div> 
```

1.  关闭你的`<img />`标签！:)
2.  这是 id="entry" 的 div 的 1 个示例 - 每个页面上应该只有一个元素具有相同的 id，例如将 id="entry" 更改为 class="entry"。

3.  每次添加图像作为条目时，都会为每个条目添加音乐播放器！这意味着您已在页面上添加了 1 x 条目数的音乐播放器。这意味着即使正确显示了顶级音乐播放器，移动只会显示其下方的播放器 - 希望能解释它

# android - 以编程方式设置搜索栏进度 Android

> ID：13888872
> 
> 赞同：2
> 
> 时间：2012-12-15T02:49:47.287
> 
> 标签：android, listener, seekbar

我有两个搜索栏。当我移动拇指 2 时，我想在搜索栏一中看到进度。请帮忙，这可能吗？

```
 android:id="@+id/seekbarone"

  android:layout_width="fill_parent"

  android:layout_height="wrap_content"

  android:layout_marginTop="3dp"

  android:max="100"

  android:maxHeight="8dp"
  ... 
```

```
 android:id="@+id/seekbartwo"

  android:layout_width="fill_parent"

  android:layout_height="wrap_content"

  android:layout_marginTop="3dp"

  android:max="100"

  android:maxHeight="8dp"
  ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T02:56:06.173

```
SeekBar sb1 = (SeekBar) findViewById(R.id.seekbarone);
SeekBar sb2 = (SeekBar) findViewById(R.id.seekbartwo);
sb2.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

            @Override
            public void onStopTrackingTouch(SeekBar seekBar) {

            }

            @Override
            public void onStartTrackingTouch(SeekBar seekBar) {

            }

            @Override
            public void onProgressChanged(SeekBar seekBar, int progress,
                    boolean fromUser) {
                sb1.setProgress(progress);

            }
        }); 
```

# iphone - 将音频和文本同步在一起

> ID：13888877
> 
> 赞同：0
> 
> 时间：2012-12-15T02:51:01.293
> 
> 标签：iphone, ios6

有什么方法可以将音频与文本同步。就像音频文件正在播放一样，当音频文件到达 textview 中的第二行文本时，第一行现在显示在 textview 中，应该将自身更改为第二行。我无法找到解决方案。如果有人可以帮助我解决这个问题。非常感谢您的帮助。

感谢帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-15T03:01:04.750

我相信你需要的是某种抒情APP。即使您没有在问题中提到过音乐，歌词也可以用于音乐、有声读物、故事和演示文稿等平台。

iPhone App Database 上有很多，但您在 iPhone 上为音频文件制作歌词文件不受限制，您可以使用一些 PC/Mac 软件，例如[http://www.evillabs.sk/evillyrics/](http://www.evillabs.sk/evillyrics/)然后使用在你的 iPhone 上。

只需快速搜索我找到的 Iphone [http://lyricsapp.net/](http://lyricsapp.net/)，您应该检查一下，如果您在 Windows 中创建歌词，则只需确保 iphone 上的歌词应用程序读取文件的歌词格式。

# objective-c - 这些代码行会相互影响吗？

> ID：13888883
> 
> 赞同：3
> 
> 时间：2012-12-15T02:52:17.383
> 
> 标签：objective-c, ios, xcode

我正在从 App Store 收听/观看关于 Paul Hegarty 的教程。在他的课程中，他指出您应该始终在实现文件上综合您的属性，如下所示：

```
@sysnthesize example = _example; 
```

我也在做一个不综合属性的苹果文档教程。它也有像这样的初始化方法：

```
- (id)initWithName:(NSString *)name location:(NSString *)location date:(NSDate *)date
{
    self = [super init];

    if (self)
    {
        _name = name;

        _location = location;

        _date = date;

        return self;
    }

    return nil;
}

@end 
```

如果像这样将它们加在一起，它们是否会相互作用、取消或以其他方式相互混淆：

```
@implementation BirdSighting

@synthesize name = _name;

@synthesize location = _location;

@synthesize date = _date;

- (id)initWithName:(NSString *)name location:(NSString *)location date:(NSDate *)date
{
    self = [super init];

    if (self)
    {
        _name = name;

        _location = location;

        _date = date;

        return self;
    }

    return nil;
}

@end 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T03:25:47.887

从“这些是否会相互作用”的角度来思考它可能不是正确的心智模型。开始的地方是*了解这些行中的每一行的作用*。因此，让我们从每个示例中考虑一个：

```
@synthesize name = _name; 
```

如果存在名为 name 的属性（@property，通常在 .h 中），则执行以下操作：

1.  它创建了两个方法，称为 -setName: 和 -name，用于设置和获取实例变量 _name
2.  如果一个名为 _name 的实例变量不存在，它会创建一个

现在另一个例子：

```
_name = name; 
```

这做一件事；它将“name”的地址分配给实例变量_name。

所以现在我们了解了它们的作用，让我们考虑它们是如何相互作用的：

1.  如果没有明确的名为 _name 的实例变量可以赋值，那么第二行将不会编译。第一行是确保存在该名称的实例变量的*一种方法*
2.  如果您设置 name 属性（通过点表示法或 -setName 方法，没有区别），那么这将通过 @synthesize 语句创建的方法修改相同的 _name 实例变量
3.  如果您在代码中使用 _name，或者如果您使用点表示法或 -name 方法，它将具有最近通过这两种方式分配给它的值。
4.  做 _name = name 而不是 self.name = name; 不会调用 -setName: 方法，这意味着除了 set 之外它所做的任何事情（例如：保留参数）都不会发生。

另一个注意事项：在最近的 Xcode 版本中，如果您将其省略，编译器会自动为您放入 @synthesize 语句。这是一件好事（更少的打字，更少的冗余，更少的错误），但如果你没有预料到它可能会令人困惑。例如，我上面的第 1 点不适用于新版本。

# c++ - 如何在 Windows7-64 位中为 RHEL 6 创建 C++ 应用程序

> ID：13888887
> 
> 赞同：0
> 
> 时间：2012-12-15T02:53:32.483
> 
> 标签：c++, windows-7-x64, rhel6

我之前在研究 Java 和 Python。在 Windows 和 Linux 之间选择编译器没有混淆。我是 C++ 新手。

现在，我必须为 RHEL 6 创建一个 C++ 应用程序。我的开发环境是 Eclipse 4.2，在 Windows 7 64 位上使用 CDT。

如果有一个编译器可以从我的 Windows 7 64 位操作系统（就像 Java/Python 一样简单）部署到 RHEL 环境中，请建议我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T03:15:39.177

到目前为止，最简单的解决方案是在您的 Windows 机器上部署 Linux VM，在其上安装 Eclipse CDT，然后使用 linux 本机 GCC 进行编译。[这是一篇关于在 windows 下为 linux 编译的 SO Post](https://stackoverflow.com/questions/2188709/how-do-i-use-cygwin-to-cross-compile-to-linux-when-i-have-an-application-that-n)。

除此之外，您可以尝试使用 Cygwin 的 gcc 交叉编译器，但我不会打赌。

# python - 检测numpy数组中的有序对

> ID：13888893
> 
> 赞同：1
> 
> 时间：2012-12-15T02:54:53.423
> 
> 标签：python, numpy

我正在使用一个 numpy 数组来保存有序对的列表（代表网格坐标）。我正在编写的算法需要检查一个新生成的有序对是否已经在这个数组中。下面是代码示意图：

```
cluster=np.array([[x1,y1]])
cluster=np.append(cluster,[[x2,y2]],axis=0)
cluster=np.append...etc.

new_spin=np.array([[x,y]])

if new_spin in cluster==False:
    do something 
```

当前代码的问题在于它给出了误报。如果 x 或 y 出现在集群中，则`new_spin in cluster`评估为真。起初我认为一个简单的解决方法是询问是否出现在 中，但这并不能确保它们显示为有序对`x`。为了确保它们以有序对的形式出现，我必须找到出现的索引并比较它们，这看起来非常笨重和不雅，我确信那里一定有更好的解决方案。但是，我自己无法解决。`y``cluster``x``y``cluster`

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T03:07:59.477

让我们看一个例子：

```
In [7]: import numpy as np
In [8]: cluster = np.random.randint(10, size = (5,2))
In [9]: cluster
Out[9]: 
array([[9, 7],
       [7, 2],
       [8, 9],
       [1, 3],
       [3, 4]])

In [10]: new_spin = np.array([[1,2]])

In [11]: new_spin == cluster
Out[11]: 
array([[False, False],
       [False,  True],
       [False, False],
       [ True, False],
       [False, False]], dtype=bool) 
```

`new_spin == cluster`是一个 dtype 的 numpy 数组`bool`。`cluster`如果 in 的值等于 中的相应值，则为 True `new_spin`。

要`new_spin`成为 "in" `cluster`，上述布尔数组的**一行必须全部为 True。**我们可以通过调用`all(axis = 1)`方法找到这样的行：

```
In [12]: (new_spin == cluster).all(axis = 1)
Out[12]: array([False, False, False, False, False], dtype=bool) 
```

`new_spin`"in" 也是如此`cluster`，如果`any`所有行都为真：

```
In [13]: 
In [14]: (new_spin == cluster).all(axis = 1).any()
Out[14]: False 
```

* * *

顺便说一句，`np.append`这是一个非常慢的操作——比 Python 慢`list.append`。如果您避免使用 ，您可能会获得更好的性能`np.append`。如果`cluster`不是太大，则最好将 cluster 制作为 Python 列表列表 - 至少在您完成附加项目之前。然后，如果需要，使用 . 转换`cluster`为 numpy 数组`cluster = np.array(cluster)`。

# css - 为调整大小的照片添加边框

> ID：13888898
> 
> 赞同：4
> 
> 时间：2012-12-15T02:56:41.497
> 
> 标签：css, image, border

我正在学习用css设计照片。我将照片居中，但是当我通过将其原始尺寸减半来调整它的大小时，左右边框不会环绕图像。边框的顶部和底部是正确的。

我还没有找到任何类似问题的教程或回复，我很感激你对解决这个问题的想法。

```
.img {
         text-align:center;
         margin-top:80px;
         margin-bottom:0px;
         padding:0px;
         border:4px solid #F2F2F2;
         } 
```

示例网站位于[http://nspowers.org](http://nspowers.org)。使用的完整样式表的链接是[http://nspowers.org/stylesheet/stylesimgquestion.css](http://nspowers.org/stylesheet/stylesimgquestion.css)，图像属性位于最底部。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T03:10:05.733

您不是在设置图像本身的样式，而是对内部包含图像的容器 div 进行样式设置。如果您将 CSS 的选择器从`.img`哪些目标元素与**该类** `img`更改为`img`（注意缺少的点），您将定位所有图像。

或者，如果您想更具体一点，您可以通过调用将其添加到具有特定类的`img.myClass`所有图像中，这将针对所有具有类的图像`myClass`。

尽管我建议您不要将其`.img`用作类名，因为它可能会造成混淆。

**更新**

这是代码的完整示例，没有来自其他类和元素的所有混乱。[您可以在这个小提琴](http://jsfiddle.net/CQxMr/)中查看现场演示

HTML

```
<div class='centered'>
<img src='http://nspowers.org/excomm_photo.jpg' height="251" width="380"/>
</div>​ 
```

CSS

```
.centered{
    text-align:center;
}

.centered img{
    border:5px solid blue;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T03:09:13.643

您已将边框添加到图像周围的 div 中，而不是图像本身，这就是问题所在。

一种解决方法是添加以下内容：

```
.img {
     text-align:center;
     margin-top:80px;
     margin-bottom:0px;
     padding:0px;
 }

 .img > img{border:4px solid #F2F2F2;} 
```

# mongodb - mongodb 的 find() 是否返回缺少指定投影中的字段的对象？

> ID：13888900
> 
> 赞同：1
> 
> 时间：2012-12-15T02:57:27.250
> 
> 标签：mongodb

如果我有一个包含这个的 mongodb：

`{ _id:ObjectId(0), name:"foo", hits:5 }`

此查询是否会返回它：

`find({name:"foo"}, {hits:1, flow:1})`

如果是这样，返回的对象会是什么样子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T03:08:35.903

是的，它会的，它看起来像这样：

```
{ "_id": ObjectId("000000000000000000000000"), "hits": 5 } 
```

`name`省略，因为它不包含在投影中，但`_id`默认包含。

# c++ - 奇怪的添加——计算一个单词在文件中出现的次数

> ID：13888901
> 
> 赞同：1
> 
> 时间：2012-12-15T02:57:42.943
> 
> 标签：c++, find, counter

好的，所以我的简单项目应该搜索在 .txt 文件中找到特定字符串的所有情况。大小写很重要，如果在另一个词中找到这个词很重要。

（例如：如果单词是“the”：

有效的发现包括：

苹果 = 1;

戏剧= 2;

无效的发现包括：

第四象（th 和 e 之间的空格）

苹果（大写）

如果在文件的一行中找到单词 IS，我应该打印出该行 ONCE。如果找不到，我根本不应该打印它。

因此，例如，我的程序的一次运行应该输出：

```
Searching for 'the' in file 'test.txt'
2 : that they do not use permeates the [C++] language.  Another example
3 : will further illustrate this influence.  Imagine that an integer
5 : What bit value should be moved into the topmost position?  If we
6 : look at the machine level, architectural designers are divided on
8 : the most significant bit position, while on other machines the sign
9 : bit (which, in the case of a negative number, will be 1) is extended.
10 : Either case can be simulated by the other, using software, by means
# occurrences of 'the' = 13 
```

不幸的是，我得到

```
Searching for 'the' in the file 'test.txt'
2: that they do not use permeates the [C++] language.  Another example
3: will further illustrate this influence.  Imagine that an integer
5: What bit value should be moved into the topmost position?  If we
6: look at the machine level, architectural designers are divided on
8: the most significant bit position, while on other machines the sign
9: bit (which, in the case of a negative number, will be 1) is extended.
10: Either case can be simulated by the other, using software, by means
11: of a combination of tests and masks.
12: 
# occurrences of 'the' = 15 
```

我不明白为什么它认为它在第 11 行和第 12 行中找到了“the”。

这是我的代码：

```
#include <iostream>
#include <fstream>
#include <string>
#include <cstring>

using namespace std;

int main(int argc, char* argv[]){
//a char pointer is a c-string
//the array is just an array of char pointers
//argv[0] = pointer to the word to search for
//argv[1] = pointer to fileNames

//includes program name @ 0, so three args
if (argc == 3){

    int wordCounter = 0;

    ifstream myFile(argv[2]);

    if (!myFile){
        cout << "File '" << argv[2] << "' could not be opened" << endl;
        return 1;
    }

    else {
        //counts the number of lines in file
        int counter = 0;

        //holds the new line in the file
        char line[100];

        //copies string into buffer that is length of word
        const char * word = argv[1];

        //holds whether found word
        bool found = false;

        cout << "Searching for '" << word << "' in the file '" << argv[2] << "'" << endl;

        //number of chars in a line
        int numChar = 0;

        //saves every line
        while (!(myFile.getline(line, 100)).eof()) {
            //starts every new new at not having found the word
            found = false;
            //read in new line, so increases line counter
            counter ++;
            numChar = 0;

            //find length of line
            for (int i = 0; line[i] != '\n' && i < 101; i++){
                numChar++;
            }

            //finds how many times the key word appears in one line
            //checks up to a few before the end of the line for the word
            if (numChar >= strlen(argv[1])){
                for (int i = 0; i < numChar - strlen(argv[1]); i++){

                    //if the current line letter equals the first letter of the key word
                    if (line[i] == word[0]){

                        //continue looking forward to see if the rest of it match
                        for (int j = 0; j < strlen(argv[1]); j++){

                            //if word doesn't match break
                            if (word[j] != line [i+j]){
                                break;
                            }

                            //if matches all the way to end, add counter
                            if(j == strlen(argv[1]) - 1){
                                wordCounter++;
                                found = true;
                            }
                        }//end 2ndfor
                    }
                }//end 1stfor

                //if the key word has been found, print the line
                if (found){
                    cout << counter << ": " << line << endl;
                }
            }
        }//endwhile

        cout << "# occurrences of '" << word << "' = " << wordCounter << endl;
        myFile.close();
    }//end else
}//end if
return 0;
}//end main 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T03:05:26.843

*   getline(ifstream&,string) 在读取行时在您的情况下使用会更有效，在某些情况下，该行可能会超过 100 个字符（这些字符包括空格）并弄乱计数。此函数将读入字符串，直到遇到结束行
*   您没有正确循环您的文件，这可能会导致未定义的行为，在这种情况下添加到您奇怪的行数，正确的文件循环将是：

* * *

```
//program counts the number of lines in a file
getline(myFile,line) //grab the line
while(myFile) //while the filestream is open and reading
{
    //manipulate line string
    lineCount++;
    getline(myFile,line) //re-read in next line
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T03:12:38.053

您的程序认为`"the"`第 11 行和第 12 行中有 a 的原因是

```
for (int i = 0; line[i] != '\n' && i < 101; i++) 
```

您检查换行符（顺便说一句，它不在缓冲区中），但不检查 terminating `0`。因此，您检查了全部 100 个字符——实际上又检查了一个，因为您还检查了不存在的 s `line[100]`，并计算`"the"`了前几行剩余的 s。

```
for (int i = 0; i < 100 && line[i] != '\0' && line[i] != '\n'; i++) 
```

应该解决这个问题。

**首先**检查索引的有效性，以避免由于无效的内存访问而导致的未定义行为。

# javascript - 在不使用第三方库（如 jQuery）的情况下，在 JavaScript 中异步获取 URL 的通用函数？

> ID：13888902
> 
> 赞同：0
> 
> 时间：2012-12-15T02:57:49.807
> 
> 标签：javascript, jquery, geturl, get-request

> **可能重复：**
> [小型 Ajax JavaScript 库](https://stackoverflow.com/questions/3470895/small-ajax-javascript-library)

我正在编写一个需要异步加载 URL 的函数的库。我需要与 完全相同的功能`$.get`，但我不想让 jQuery 作为我的库的依赖项仅用于一个函数。什么是允许这样做的自包含片段？

我已经尝试了几件事，但大多数都在某个地方坏了。例如，我能找到的最复杂的方法会`Origin <url> is not allowed by Access-Control-Allow-Origin`在 Chrome 上出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T03:15:47.787

您需要使用基本的 Ajax 调用。查看有关 XMLHttpRequest 对象的任何教程。但是您遇到的问题是您正在尝试进行跨域调用。这是不可能的，因为[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。

在现代浏览器中，您可以发出[CORS 请求](https://developer.mozilla.org/en-US/docs/HTTP_access_control)，但您请求的服务器必须支持它。

其他选项是运行本地代理 [意味着您必须拥有服务器端语言应用程序]

第三种选择是使用带有[jsonp 调用的](http://en.wikipedia.org/wiki/JSONP)[yahoo 管道](http://pipes.yahoo.com/pipes/)之类的服务。

# iphone - Apple A5 和 Apple A6 CPU 之间的浮点确定性

> ID：13888903
> 
> 赞同：8
> 
> 时间：2012-12-15T02:57:56.213
> 
> 标签：iphone, floating-point, box2d, deterministic

我正在为 iOS 开发一个带有 Box2D 物理的多人游戏。多人游戏像往常一样使用锁步方法。游戏定时更新物理世界。具有相同 CPU 的 iOS 设备之间不存在不同步。

但是，在使用 Apple A6 芯片的新 iOS 设备进行测试时，发生了不同步。查看我的日志文件给我的印象是异步发生的速度非常快，这可能是因为一些浮点操作我还没有找到。

我可以保证只有Box2D是游戏设计中唯一需要同步的模块，根据我的日志，所有的多人游戏命令和输入都没有不同步。

我尝试将所有超验函数：sinf、cosf、pow、sqrtf、atan2f 更改为双版本，但没有任何运气。

有什么方法可以强制 Apple A6 将浮点数与 Apple A5 一样处理，就像某些编译器选项一样？

我将非常感谢任何答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T23:48:30.483

许多数学库函数在 A5 和 A6 上使用不同的算法。如果它们的差异超过一两个 ulp，您可能发现了一个错误；请报告。否则，变化可能在高质量数学库的预期容差范围内。要了解为什么会这样，最好的参考是 Ian Ollmann 几年前发给 mac-games-dev 邮件列表的电子邮件，[“数学库不是安全工具”](http://lists.apple.com/archives/mac-games-dev/2007/Oct/msg00188.html)，它在 Mac OS X 的上下文中解决了这个确切的问题。（tl;dr 版本是一些游戏开发人员想要的跨架构提供位相同结果的目标从根本上与提供高精度答案相冲突，因为在所有架构上尽可能高效，这是所有开发人员 [和用户，因为它有利于响应能力和电池寿命] 想要的；必须给予一些东西，对于通用系统库，后者必须优先考虑）。Apple 开发者论坛将是另一个寻找信息的好地方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T10:02:55.823

实际上又是阮长中。

到目前为止，非常感谢大家的回答。我非常感谢您的回答，这为我提供了继续调试的途径！目前，我以某种方式找到了不同步的原因，但还没有具体的解决方案。我希望向您提供我得到的信息，希望我能得到更多的见解。

***1\. 发现：***

我有这个使用cos的功能。我这样打印日志：

void rotateZ（浮动角度）

{

```
 if( angle )

 {

      const float sinTheta = sin( angle );

      const float cosTheta = cos( angle );

      // I logged here

      myLog( "Vector3D::SelfRotateZ(%x) %x, %x", *(unsigned int*)&angle, *(unsigned int*)&cosTheta, *(unsigned int*)&sinTheta );

      ....
 } 
```

}

异步是这样发生的：

在 iPad4 上：Vector3D::SelfRotateZ(404800d2) bf7ff708, 3c8782bc 在 iPhone4 上：Vector3D::SelfRotateZ(404800d2) bf7ff709, 3c8782bc

***2.重新测试：***

故事并不止于此，因为：

1.  我在游戏开始时尝试了这些代码行：

{ 无符号整数 zz = 0x404800d2;

```
float yy = 0;

memcpy( &yy, &zz, 4 );

const float temp1 = cos( yy );

printf( "%x\n", *(unsigned int*)&temp1; 
```

}

1.  我在同一个 iPhone4 上运行了上面的代码，你猜怎么着？我得到了这个：bf7ff708

2.  我将该代码放入游戏的更新循环中，我得到的结果在每个循环中仍然是 bf7ff708。

3.  更？值 0x404800d2 是游戏的初始化值，所以每次游戏开始时，上面的两条不同步行总是在那里。

***3：提问：***

所以，我决定忘记上面发生的事情，暂时用我在 dreamcode.net 上找到的简单 Taylor 实现替换 sin、cos 函数。不再发生不同步。

似乎 cos 函数在同一个 iPhone 4（OS 版本 5）上甚至都不是确定性的。

我的问题是：我们有没有解释为什么 cos 函数在同一部手机上为相同的输入返回不同的结果？这里我有输入 0x404800d2，以及两个不同的输出：bf7ff708 和 bf7ff709。但是，我无法通过简单的编码来重现结果 bf7ff709。

我想我需要操作系统的数学函数（浮点版本）的源代码才能清楚地理解这一点。我发现的上述问题是否足以作为错误报告？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T15:38:21.667

实际上又是阮长中。:)

非常感谢您迄今为止的帮助。

我只想报告，在我重写了所有超越函数（如 cos、sin、sqrt、pow、atan2、atan、asin、acos 等（尽可能多））后，异步已修复。

# c++ - LibAv/FFMpeg 的线程安全？

> ID：13888915
> 
> 赞同：6
> 
> 时间：2012-12-15T03:01:03.127
> 
> 标签：c++, c, ffmpeg, thread-safety, libav

LibAV/FFMpeg 线程安全吗？例如。我可以在一个线程中使用 AVFormatContext* 从文件中读取数据，然后通过简单地添加互斥锁将读取的数据包解码到另一个线程中，还是库的线程安全性是“不知道不关心”类型的交易？我知道 libav 对编码器线程有基本支持，但我正在尝试更多的黑盒类型方法，我将其分解为多个线程（源 -> 解码器 -> 过滤器 -> 编码器 -> 接收器）并试图了解复杂性这样的。

任何对 ffmpeg 和线程有任何经验并希望提供与此相关的任何其他信息的人也将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T22:08:06.787

您可以注册自己的锁管理器。ffmpeg 库将控制线程安全。

例子：

```
 ::av_lockmgr_register(&my_lockmgr_cb);

 //// ..........

 int my_lockmgr_cb(void **mutex, enum AVLockOp op)
 {
  if (NULL == mutex)
   return -1;

   switch(op)
   {
   case AV_LOCK_CREATE:
   {
    *mutex = NULL;
    boost::mutex * m = new boost::mutex();
    *mutex = static_cast<void*>(m);
    break;
   }
   case AV_LOCK_OBTAIN:
   {
    boost::mutex * m =  static_cast<boost::mutex*>(*mutex);
    m->lock();
    break;
   }
   case AV_LOCK_RELEASE:
   {
    boost::mutex * m = static_cast<boost::mutex*>(*mutex);
    m->unlock();
    break;
   }
   case AV_LOCK_DESTROY:
   {
    boost::mutex * m = static_cast<boost::mutex*>(*mutex);
    delete m;
    break;
   }
   default:
   break;
}
return 0; 
```

}

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-30T07:58:25.027

要扩展现有答案：

ffmpeg 的 av_lockmgr_register 是处理锁的方式。

带有线程的 ffmpeg 构建（以及比 LIBAVCODEC_VERSION_MAJOR 55、LIBAVCODEC_VERSION_MINOR 38 和 LIBAVCODEC_VERSION_MICRO 100 更高的版本 - 大约在 2013 年 10 月左右，请参阅[ffmpeg commit 添加默认 lockmgr](https://github.com/FFmpeg/FFmpeg/commit/094c40ca3787ac7160c7a1068c7f1218117f9908)）将具有您可以使用的默认锁管理器。

如果您需要与 libav 兼容，那么（在撰写本文时，2016 年 9 月）它还没有默认的锁管理器，您需要提供自己的。

这是一个纯 C pthread 的实现：

```
static int ffmpeg_lockmgr_cb(void **arg, enum AVLockOp op)
{
    pthread_mutex_t *mutex = *arg;
    int err;

    switch (op) {
    case AV_LOCK_CREATE:
        mutex = malloc(sizeof(*mutex));
        if (!mutex)
            return AVERROR(ENOMEM);
        if ((err = pthread_mutex_init(mutex, NULL))) {
            free(mutex);
            return AVERROR(err);
        }
        *arg = mutex;
        return 0;
    case AV_LOCK_OBTAIN:
        if ((err = pthread_mutex_lock(mutex)))
            return AVERROR(err);

        return 0;
    case AV_LOCK_RELEASE:
        if ((err = pthread_mutex_unlock(mutex)))
            return AVERROR(err);

        return 0;
    case AV_LOCK_DESTROY:
        if (mutex)
            pthread_mutex_destroy(mutex);
        free(mutex);
        *arg = NULL;
        return 0;
    }
    return 1;
} 
```

这是这样注册的：

```
ret = av_lockmgr_register(ffmpeg_lockmgr_cb);
if (ret < 0)
{
    fprintf(stderr, "av_lockmgr_register failed (%d)\n", ret);
    abort();
} 
```

# php - 为什么需要 TLS/SSL？

> ID：13888919
> 
> 赞同：5
> 
> 时间：2012-12-15T03:01:49.977
> 
> 标签：php, openssl, ssl

我知道每个人都使用 TLS/SSL 作为网络上的传输层安全性。

什么会阻止我手动生成假设密钥对，使用该公钥加密数据客户端（例如使用 JS）并使用 http 的 GET/POST 请求将该数据提交到我的服务器？

我的意思是——我可以使用 JS 库用那个公钥加密一些表单数据——对吧？

只有拥有私钥的人才能解密它——对吧？当然，私钥会保存在服务器上。不会弹出任何关键警告 - 因为传输是常规的 http 请求。那么为什么我需要 TLS？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T03:07:43.283

您如何相信传递给浏览器的 Javascript 是使用正确密钥加密的 Javascript？

想一想，并意识到安全最佳实践是非常微妙和微妙的，简单地在上面加上加密并不是解决方案。

此外，如果您正在处理“密钥弹出窗口”，那么您已经通过使用未签名的服务器证书打破了 TLS 信任模型（受信任的证书颁发机构）的一条腿。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T03:14:09.193

让我们举一个例子来说明这怎么会出错。假设您要加密的是一些表单数据并将其发送到服务器。服务器将其公钥发送给客户端进行加密。JavaScript 中的客户端加密此数据并将其发送到服务器。假设这就是发生的事情，你会没事的。

现在让我们来探讨一下这怎么会出错。如今，在切换状态等情况下，很难在不访问硬件的情况下嗅探其他人的数据包。因此，您试图避免的大多数情况也允许攻击者在中间攻击中出现一个人。在这种情况下，攻击者可以向客户端提供他们喜欢的任何 JavaScript。窃取数据的一种秘密方式是提供 JavaScript，它可以完成原始 JavaScript 所做的所有事情，并且还将未加密的数据发送到另一台服务器。

对于从服务器发送到客户端的数据，这可能以类似的方式发生。

PS 如果您的问题是缺少 CA 签名证书，我建议您从[http://www.startssl.com/获取免费证书](http://www.startssl.com/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-15T03:34:24.377

你是对的。您可以这样做，并且您将使用强大的加密技术，这实际上是 SSL/TLS 的底层组件之一。

其中一个问题是，为每条数据计算它的计算成本很高。您还需要在处理加密/解密过程的客户端和服务器上具有交叉兼容的库。

但是，您的 Web 应用程序将失去任何透明度，因为您现在必须对需要保密的每条数据执行此加密过程。

TLS 是面向会话的，所以这不是苹果对苹果的比较。TLS 所做的是设置对客户端和服务器透明的加密会话。它正在制作一个加密管道并允许数据流过它。它还包含“信任”和身份的概念，因此客户可以有一些迹象表明他们正在发送的信息将发送给他们认为的人。

您所描述的是获取数据片段，对其进行加密，然后发送加密版本，并在使用前要求另一端解密。如果您想经历设置的痛苦，您的计划可以并且将会起作用，但是您获得了什么？此外，由于您的方案将没有 TLS 在防止中间人攻击方面所具有的任何东西，因此它在很多方面都容易受到这些问题的影响——从某人将他们自己的库和密钥注入客户端以便您的应用程序启动将数据发送给他们而不是您，或者他们在您和客户端之间传输数据，并向您发送您的服务器认为直接来自他们而不是来自攻击者的数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-15T03:21:50.010

数字证书包括主题的公钥，由 CA 使用其私钥进行数字签名。您的浏览器包含标识其公钥的证书（在根证书的情况下使用相同的私钥签名），这允许您的浏览器（假设它信任预安装的 CA 证书）验证您的身份。当您访问服务器时，服务器端证书用于将服务器的公钥传输到您的浏览器，然后浏览器使用它来加密凭据的初始交换。当需要客户端证书时，类似的考虑允许服务器识别您。

没有什么可以阻止您在 JS 库中使用您的公钥来加密数据，但是服务器应该如何解密它呢？将您的私钥传递给它会否定私钥的目的，即确保只有您可以解密使用您的公钥加密的信息。所以正确的做法是用你的私钥加密，但是任何拥有你的公钥的人都可以解密它（这种技术通常用于数字签名）。

真的，你应该使用服务器的公钥来加密你的传输，并让它使用它的私钥来解密它。整个安全密钥交换业务非常微妙，有很多公司和个人开发自己的加密系统的例子（从 IBM 往下），依靠算法的隐私。事实证明，它们相对容易破解。最好不要设计自己的系统，直到你有更多的安全经验......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-15T23:18:45.333

你的问题没有意义。

如果您生成密钥对并使用公钥加密，则只有您可以解密该消息。所以把它送给别人是徒劳的。您可以使用服务器的公钥进行加密，但是您遇到了安全地确定确切内容的问题。

然后服务器无法将数据加密回给您，除非它使用您的公钥，在这种情况下，它会遇到与您作为客户端已经拥有的身份相同的问题。

TLS/SSL 解决了这些问题，以及您尚未想到的其他一些问题。

# html - Blogger 上的 Facebook 赞按钮显示主页的总赞数，但不是每篇文章的总赞数（对于新文章）

> ID：13888921
> 
> 赞同：1
> 
> 时间：2012-12-15T03:02:51.147
> 
> 标签：html, facebook-like, blogger

所以我正在尝试帮助一位朋友完成他的 Blogger 博客及其与 Facebook 的集成。他遇到了几个问题（比如混乱的 og 元标记等等），我们终于能够对所有内容进行排序，并在 Facebook 的调试器上运行该网站，一切都很好。但是现在我们遇到了一个问题，新帖子显示主页的整体喜欢，而不是每个帖子的 Facebook Like 按钮，而旧帖子不受影响（有个人喜欢计数。）

仅供参考，有问题的网站是[Los Heladeros](http://www.losheladeros.com/)（此时显然有大约 87 个赞），而 Facebook 网站是 /LOSH3LAD3ROS（有 765 个赞，所以这些赞与 Facebook 网站无关，而是主要页域）。

现在，我们按照[本教程](http://www.bloggerplugins.org/2010/04/facebook-like-button-for-blogger.html)为“赞”按钮创建代码以显示在每个帖子上（确实如此，没问题）。这是按钮的代码：

```
<div>
<b:if cond='data:post.isFirstPost'> 
<script>(function(d){
  var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
  js = d.createElement('script'); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  d.getElementsByTagName('head')[0].appendChild(js);
}(document));</script>
</b:if> 
<fb:like expr:href="data:post.canonicalUrl" layout='standard' send='true' show_faces='false' font="lucida grande" action="like" colorscheme="light"></fb:like>
</div> 
```

然而，现在，网站上的任何新帖子都包括主页（而不是 FB 页面）的总点赞数，而不是单个帖子的点赞数（即，每个新帖子都立即开始，此时点赞数为 87 )，但所有旧帖子（在我们修复 Open Graph 元数据问题之前）都非常好（即，它们可能显示一些喜欢，并且不受主页上的新喜欢或分享的影响。）

*仅供参考，我刚刚注意到修复之前的一个帖子，以前只显示了一些分享，现在已经恢复到整体计数......*

这是该站点的 Open Graph 元数据：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html b:version='2' class='v2' expr:dir='data:blog.languageDirection' xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/2005/gml/data' xmlns:expr='http://www.google.com/2005/gml/expr' xmlns:fb='http://www.facebook.com/2008/fbml' xmlns:og='http://ogp.me/ns#'> 

<title>Los Heladeros: TU UPDATE MUSICAL ANTES QUE SE DERRITA</title>

<!-- Facebook Open Graph Meta Tags -->
<meta content='Los Heladeros' property='og:title'/>
<meta content='blog' property='og:type'/>
<meta content='http://www.losheladeros.com' property='og:url'/>
<meta content='https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-ash4/377165_310579818971632_1169246050_n.jpg' property='og:image'/>
<meta content='Los Heladeros' property='og:site_name'/>
<meta content='502365163' property='fb:admins'/>
<meta content='335887849786080' property='fb:app_id'/>
<meta content='Descargas gratis de música que no es cool, pero lo será mañana | HOUSE | INDIE | DISCO |' property='og:description'/>

<!-- Open Graph Meta Tags by: www.MetaTagGenerator.org --> 
```

所以我读过其他帖子，您必须将“ **og:url** ”设置为有问题的特定站点（即每个帖子）而不是整个站点，但这不是“**数据：帖子”。 canonicalUrl** " 位中的FB Like 按钮代码应该怎么做？我知道必须有一种方法可以在模板页面上拥有一个通用代码，并且动态拉取 url，并且每个帖子的计数都是单独的（在清理元标记之前回顾旧代码，他具有与我们现在相同的整体站点 URL，并且从未遇到过这个问题，所以在它以某种方式工作之前很明显）。

此外，如果我分享任何新文章，我随后会获得主页的图片和描述，而不是单个帖子，但是当我分享旧帖子时，它会自动生成正确的图像和描述。我尝试在旧帖子和新帖子上比较 Facebook 调试器，并且没有差异（因为不应该有任何差异）。我很困惑可能会这样做，因为它是一个通用的、过度的代码，我想我希望*所有*的帖子都以同样的方式行事，而不仅仅是一些（即新的和旧的）。

仅供参考，因为我是新用户，所以我只能发布两个链接，但是如果您转到主页，则较新的帖子在顶部，并且按钮上有 87 个以上的点赞数，如果您向下滚动，您最终会查看计数较少的较旧帖子（即，它们的计数正确）。

我将非常感谢你们能给我的任何帮助。这是我的第一篇 stackoverflow 帖子，我已经阅读了几乎所有相关的帖子，但仍然找不到这个问题的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T20:58:57.050

好的，所以我几乎称这个问题已解决。我偶然发现了以下教程，其中详细介绍了为 Blogger 创建正确的 Facebook Open Graph 元标记的彻底方法：

[Blogger 的开放图形标记 [版本 3]](http://exde601e.blogspot.ro/2012/10/open-graph-markup-for-blogger-version-3.html)

以下是我更新的元标记，它们似乎在未来工作得很好：

```
<!-- OPEN GRAPH MARKUP FOR BLOGGER [VER. 3] TAGS http://goo.gl/tyJ9a FOR ORIGINAL TUTORIAL -->
<meta expr:content='data:blog.pageName' property='og:title'/>    
<meta expr:content='data:blog.title' property='og:site_name'/>     
<meta expr:content='data:blog.canonicalUrl' property='og:url'/>     
<b:if cond='data:blog.metaDescription'>     
     <meta expr:content='data:blog.metaDescription' property='og:description'/>     
</b:if>     
<b:if cond='data:blog.pageType == &quot;item&quot;'>     
     <meta content='article' property='og:type'/>     
     <b:if cond='data:blog.postImageThumbnailUrl'>     
         <meta expr:content='data:blog.postImageThumbnailUrl' property='og:image'/>     
     </b:if>     
<b:else/>     
     <meta content='blog' property='og:type'/>     
     <meta content='https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-ash4/377165_310579818971632_1169246050_n.jpg' property='og:image'/>
     <meta content='502365163' property='fb:admins'/>
     <meta content='335887849786080' property='fb:app_id'/>     
</b:if>
<!-- OPEN GRAPH MARKUP FOR BLOGGER [VER. 3] TAGS http://goo.gl/tyJ9a FOR ORIGINAL TUTORIAL --> 
```

值得注意的是，我在底部添加了管理员和应用程序 ID，缩进下方，Facebook Debugger/Linter 似乎对此没问题（在它警告我它不合适之前）。此外，我的朋友在元标记和 javascript 实现之间的 APP ID 不匹配。我修复了这个问题并放置了相同的 APP ID，虽然被搞砸的帖子仍然搞砸了他们的计数，但继续前进，所有帖子的行为都与正确的喜欢计数一样，并且在共享时，帖子的信息被正确提取进入 FB 上的分享（标题、照片、描述）。

希望这可以帮助其他可能遇到同样问题的人。乔治·B·莫加的道具。这是[stackoverflow 帖子](http://facebook.stackoverflow.com/questions/12805062/facebook-open-graph-tags-for-blogger)，我在其中找到了他指向元标记模板的链接。

# css - 向上滑动div的CSS位置

> ID：13888922
> 
> 赞同：1
> 
> 时间：2012-12-15T03:04:34.317
> 
> 标签：css, positioning, slidetoggle

我想将动态生成的 div 直接放在按钮上方（页面较高，而不是 Z-index）。单击按钮时，我想用反向 jQuery 显示 div `slideToggle()`。

我在小提琴中设置了一个示例：http: [//jsfiddle.net/sablefoste/YWnJE/30/](http://jsfiddle.net/sablefoste/YWnJE/30/)

我很接近，但我似乎无法将显示定位在按钮的正上方。[在http://www.learningjquery.com/2009/02/slide-elements-in-different-directions/](http://www.learningjquery.com/2009/02/slide-elements-in-different-directions/)`position:absolute; left:0;bottom:0;` 中的第一个示例之后，我可以使用我的 CSS 让它向上滑动。

如果我将其更改`left:0; bottom:0;`为其他内容，我可以正确定位它，直到调整浏览器窗口的大小。

有没有办法在没有蛮力的情况下做到这一点（特别是，识别 的顶部`#storiesbutton`，以及 jQuery 重新定位 的底部`#storylist`）？

我很感激任何想法！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T03:34:58.167

因此，当您放置`position: absolute`该元素时，您所做的是根据它的第一个非静态祖先将其定位为一组固定的像素。在大多数情况下，在这种情况下，那将是身体本身，这就是它被卡在底部的原因。您要做的是将绝对定位的元素限制在另一个 div 中，以便它不会定位在页面底部，而是定位在您想要的位置。因此，您只需包装该元素：

```
<div id="wrapper">
    <div id="storylist" style="display:none;">
      <ul>
           <li>
             Title 1 goes here.
           </li>
           <li>
             Title 2 goes here.
           </li>
           <li>
             Maybe a Title 3 goes here, but it is dynamically generated.
           </li>
      </ul>
    </div>
</div> 
```

在另一个 div 中，并给那个新的 div

```
#wrapper{
   position: relative;   
} 
```

[这是小提琴中的示例。](http://jsfiddle.net/digthedoug/D5dFy/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T03:40:50.403

我在这里进行纯粹的猜测，但我的意思是您希望菜单出现在按钮上方。我试过用

```
var list = $('#storylist'),
    button = $('#storiesbutton'),
    speed = 500;

list.hide().css('bottom', button.css('top'))
    .css('margin-top', list.outerHeight() * -1); 
```

因此，故事的位置是根据按钮的位置和列表的高度在加载时设置的。

小提琴：http: [//jsfiddle.net/qt3LE/](http://jsfiddle.net/qt3LE/)

就像我说的那样，我不是 100% 相信你所追求的。这可能有助于定位。

我也使用`$.toggle(function(){}, function(){})`了 toggleSlide，因为您可以更好地控制各个切换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T03:14:12.110

我不确定，但如果您正在寻找按钮上方的信息，您可以尝试删除`position:absolute`

像这样 [http://jsfiddle.net/cjds/AnpzK/](http://jsfiddle.net/cjds/AnpzK/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T03:41:18.023

将按钮栏和故事情节放在这样的容器中：

```
<div id="container">
<div id="storylist">
  <ul>
       <li>
         Title 1 goes here.
       </li>
       <li>
         Title 2 goes here.
       </li>
       <li>
         Maybe a Title 3 goes here, but it is dynamically generated.
       </li>
  </ul>
</div>

<div class= "buttonbar">
  <div>
    <span class="navbutton" id="librarybutton" >
        <a href ="#" title="Information">
            Information
        </a>
    </span>
    <span class="navbutton" id="storiesbutton" >
        <a href ="#">
            Stories
        </a>
    </span>
  </div>
</div> 
```

​</p>

这是他们的CSS：

```
#container {
position:relative;
background:#efefef;
}
#storylist{
height:60px;
position:absolute;
left:0;
bottom:0;
}
.buttonbar{
margin:20px 50px 20px 0;    
text-align:center;
width:100%;
position:absolute;
bottom:-60px;
} 
```

我已经绝对定位了按钮栏和故事情节，因此您可以获得所需的“向上滑动”动作。希望这是你想要的。这是我所做的事情。[http://jsfiddle.net/YWnJE/41/](http://jsfiddle.net/YWnJE/41/)

# ios - 动画期间无法获取 CALayer 的当前位置

> ID：13888926
> 
> 赞同：12
> 
> 时间：2012-12-15T03:06:18.083
> 
> 标签：ios, calayer, cgrect, caanimation, cakeyframeanimation

我正在尝试实现一个动画，当你按住一个按钮时，它会向下移动一个块，当你释放它时，它会动画回到原来的位置，但是无论如何我都无法获得动画块的当前位置。这是我的代码：

```
-(IBAction)moveDown:(id)sender{

   CGRect position = [[container.layer presentationLayer] frame];

    [movePath moveToPoint:CGPointMake(container.frame.origin.x, position.y)];

    [movePath addLineToPoint:CGPointMake(container.frame.origin.x, 310)];

    CAKeyframeAnimation *moveAnim = [CAKeyframeAnimation animationWithKeyPath:@"position"];
    moveAnim.path = movePath.CGPath;
    moveAnim.removedOnCompletion = NO;
    moveAnim.fillMode = kCAFillModeForwards;

    CAAnimationGroup *animGroup = [CAAnimationGroup animation];
    animGroup.animations = [NSArray arrayWithObjects:moveAnim, nil];
    animGroup.duration = 2.0;
    animGroup.removedOnCompletion = NO;
    animGroup.fillMode = kCAFillModeForwards;

    [container.layer addAnimation:animGroup forKey:nil];
}
-(IBAction)moveUp:(id)sender{
     CGRect position = [[container.layer presentationLayer] frame];

    UIBezierPath *movePath = [UIBezierPath bezierPath];

    [movePath moveToPoint:CGPointMake(container.frame.origin.x, position.y)];

    [movePath addLineToPoint:CGPointMake(container.frame.origin.x, 115)];

    CAKeyframeAnimation *moveAnim = [CAKeyframeAnimation animationWithKeyPath:@"position"];
    moveAnim.path = movePath.CGPath;
    moveAnim.removedOnCompletion = NO;
    moveAnim.fillMode = kCAFillModeForwards;

    CAAnimationGroup *animGroup = [CAAnimationGroup animation];
    animGroup.animations = [NSArray arrayWithObjects:moveAnim, nil];
    animGroup.duration = 2.0;
    animGroup.removedOnCompletion = NO;
    animGroup.fillMode = kCAFillModeForwards;

    [container.layer addAnimation:animGroup forKey:nil];

} 
```

但是线

```
 CGRect position = [[container.layer presentationLayer] frame]; 
```

只返回目标位置而不是当前位置。一旦我释放按钮，我基本上需要给我动画容器的当前位置，这样我就可以执行下一个动画。我现在所拥有的不起作用。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-12-20T04:50:04.337

我没有对您的代码进行足够的分析，无法 100% 确定为什么`[[container.layer presentationLayer] frame]`可能无法返回您期望的结果。但我看到了几个问题。

一个明显的问题是`moveDown:`没有声明`movePath`. 如果`movePath`是一个实例变量，您可能希望在每次`moveDown:`调用时清除它或创建一个新实例，但我看不到您这样做。

一个不太明显的问题是（从你对 and 的使用来看`removedOnCompletion`，`fillMode`尽管你使用了`presentationLayer`）你显然不明白 Core Animation 是如何工作的。事实证明这很常见，如果我错了，请原谅我。无论如何，请继续阅读，因为我将解释 Core Animation 的工作原理以及如何解决您的问题。

在 Core Animation 中，您通常使用的图层对象是*模型图层*。当您将动画附加到层时，Core Animation 会创建模型层的副本，称为*表示层*，并且动画会随着时间的推移更改表示层的属性。动画永远不会改变模型层的属性。

当动画结束并且（默认情况下）被移除时，表示层被销毁并且模型层的属性值再次生效。因此，屏幕上的图层似乎“弹回”到其原始位置/颜色/其他。

解决此问题的一种常见但**错误**的方法是将动画设置为`removedOnCompletion`to`NO`和`fillMode`to `kCAFillModeForwards`。执行此操作时，表示层会挂起，因此屏幕上没有“回弹”。问题是现在您的表示层与模型层具有不同的值。如果您向模型层（或拥有它的视图）询问动画属性的值，您将得到一个与屏幕上不同的值。如果您再次尝试为该属性设置动画，则动画可能会从错误的位置开始。

要为图层属性设置动画并使其“粘”，您需要更改模型图层的属性值，然后应用动画。这样，当动画被移除，表示层消失时，屏幕上的层看起来完全一样，因为模型层的属性值与动画结束时它的表示层的属性值相同。

现在，我不知道您为什么要使用关键帧来制作直线运动的动画，或者为什么要使用动画组。这里似乎都没有必要。而且您的两种方法实际上是相同的，所以让我们分解出通用代码：

```
- (void)animateLayer:(CALayer *)layer toY:(CGFloat)y {
    CGPoint fromValue = [layer.presentationLayer position];
    CGPoint toValue = CGPointMake(fromValue.x, y);

    layer.position = toValue;

    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"position"];
    animation.fromValue = [NSValue valueWithCGPoint:fromValue];
    animation.toValue = [NSValue valueWithCGPoint:toValue];
    animation.duration = 2;
    [layer addAnimation:animation forKey:animation.keyPath];
} 
```

请注意，当我将动画添加到图层时，我们为动画提供了一个键。由于我们每次都使用相同的键，如果之前的动画还没有完成，每个新动画都会替换（删除）之前的动画。

当然，一旦你玩这个，你会发现如果你只完成了一半，`moveUp:`动画就会出现一半的速度，因为它仍然有 2 秒的持续时间，但只有一半的距离。 . 我们真的应该根据要行驶的距离来计算持续时间：`moveDown:``moveUp:`

```
- (void)animateLayer:(CALayer *)layer toY:(CGFloat)y withBaseY:(CGFloat)baseY {
    CGPoint fromValue = [layer.presentationLayer position];
    CGPoint toValue = CGPointMake(fromValue.x, y);

    layer.position = toValue;

    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"position"];
    animation.fromValue = [NSValue valueWithCGPoint:fromValue];
    animation.toValue = [NSValue valueWithCGPoint:toValue];
    animation.duration = 2.0 * (toValue.y - fromValue.y) / (y - baseY);
    [layer addAnimation:animation forKey:animation.keyPath];
} 
```

如果你*真的*需要它作为动画组中的关键路径动画，你的问题应该告诉我们你*为什么*需要这些东西。无论如何，它也适用于这些事情：

```
- (void)animateLayer:(CALayer *)layer toY:(CGFloat)y withBaseY:(CGFloat)baseY {
    CGPoint fromValue = [layer.presentationLayer position];
    CGPoint toValue = CGPointMake(fromValue.x, y);

    layer.position = toValue;

    UIBezierPath *path = [UIBezierPath bezierPath];
    [path moveToPoint:fromValue];
    [path addLineToPoint:toValue];

    CAKeyframeAnimation *animation = [CAKeyframeAnimation animationWithKeyPath:@"position"];
    animation.path = path.CGPath;
    animation.duration =  2.0 * (toValue.y - fromValue.y) / (y - baseY);

    CAAnimationGroup *group = [CAAnimationGroup animation];
    group.duration = animation.duration;
    group.animations = @[animation];
    [layer addAnimation:group forKey:animation.keyPath];
} 
```

[你可以在这个 gist](https://gist.github.com/4343026)中找到我的测试程序的完整代码。只需创建一个新的 Single View Application 项目并将 的内容替换为`ViewController.m`gist 的内容。

# iphone - 将 UIWebView 完整内容导出到 NSData？苹果手机

> ID：13888933
> 
> 赞同：3
> 
> 时间：2012-12-15T03:08:33.410
> 
> 标签：iphone, uiwebview

我想要做的是`UIWebView`在一个小包中获取完整的内容（文本、图像和 CSS）。
我认为`NSData`这将是最好的方法。还是有另一个更压缩的版本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-17T14:22:34.630

可能来不及回应这个问题，但我发现你可以从你使用 NSCachedURLResponse 发出的请求中获取所有数据，如下所示：

```
NSCachedURLResponse* response = [[NSURLCache sharedURLCache] 
                                     cachedResponseForRequest:[webView request]];
NSData* data = [response data]; 
```

# htmlunit - NoMethodError：未定义的方法“asText”用于#

> ID：13888934
> 
> 赞同：1
> 
> 时间：2012-12-15T03:08:35.333
> 
> 标签：htmlunit, jrubyonrails

我正在尝试使用 jruby 和 htmlunit 解析一个简单的 html 页面[http://www.brainjar.com/java/host/test.html](http://www.brainjar.com/java/host/test.html)但我遇到了错误未定义的方法'asText'。

我的代码：

```
require 'java';

require 'commons-codec-1.7.jar';
require 'commons-collections-3.2.1.jar';
require 'commons-io-2.4.jar';
require 'commons-lang3-3.1.jar';
require 'commons-logging-1.1.1.jar';
require 'cssparser-0.9.8.jar'
require 'htmlunit-2.11.jar'
require 'htmlunit-core-js-2.11.jar'
require 'httpclient-4.2.2.jar'
require 'httpcore-4.2.2.jar'
require 'httpmime-4.2.2.jar'
require 'jetty-http-8.1.7.v20120910.jar'
require 'jetty-io-8.1.7.v20120910.jar'
require 'jetty-util-8.1.7.v20120910.jar'
require 'jetty-websocket-8.1.7.v20120910.jar'
require 'nekohtml-1.9.17.jar'
require 'sac-1.3.jar'
require 'serializer-2.7.1.jar'
require 'xalan-2.7.1.jar'
require 'xercesImpl-2.10.0.jar'
require 'xml-apis-1.4.01.jar'

java_import 'com.gargoylesoftware.htmlunit.WebClient';

def get_desc
  wc = WebClient.new;

  page = wc.getPage("http://www.brainjar.com/java/host/test.html");

  a =  page.getByXPath('/html/body/p')
  ss = a
  puts ss.asText
end

get_desc 
```

# image - 在 MATLAB 中表示可变滤波器大小

> ID：13888936
> 
> 赞同：0
> 
> 时间：2012-12-15T03:08:42.223
> 
> 标签：image, matlab, filter, window

我正在研究一个过滤器，在该过滤器中，我使用基于噪声密度的自适应窗口大小，而不是使用固定大小的过滤窗口。例如，假设窗口大小为 3x3，它有 9 个像素。当所有这 9 个像素都被检测为损坏的像素时，继续下一步是没有用的，因为我需要窗口中的一些嘈杂的自由像素来处理下一步。在这种情况下，我将窗口大小更改为 5x5 并再次扫描。如果再次检测到所有像素（25 像素）已损坏，我会选择 7x7 窗口。为了实现，我编写了一个代码，但它太大了，因为我代表了每个窗口中的所有元素。我不确定是否要实施它，但我相信还有其他简单的方法可以做到这一点。

我为上述目的编写的代码是

```
if((S1==1) && (S2==1))

        5x5 window===> V=[L(p-2,q-2) L(p-2,q-1) L(p-2,q) L(p-2,q+1) L(p-2,q+2) L(p-1,q-2) L(p-1,q-1) L(p-1,q) L(p-1,q+1) L(p-1,q+2) L(p,q-2) L(p,q-1) L(p,q+1) L(p,q+2) L(p+1,q-2) L(p+1,q-1) L(p+1,q) L(p+1,q+1) L(p+1,q+2) L(p+2,q-2) L(p+2,q-1) L(p+2,q) L(p+2,q+1) L(p+2,q+2)]; % 5x5 window

        for k=1:24
            if((V(k) == 0) || (V(k) == 255))

            else
              N(a)=V(k);
              a=a+1;
            end
        end 

        if((a-1)>= 1)
        Y(p,q)=round(Median(N(1:a-1)));
         %disp(Y(p,q));
        a=1;
       else
         7x7 window===>   V1=[L(p-3,q-3) L(p-3,q-2) L(p-3,q-1) L(p-3,q) L(p-3,q+1) L(p-3,q+2) L(p-3,q+3) L(p-2,q-3) L(p-2,q-2) L(p-2,q-1) L(p-2,q) L(p-2,q+1) L(p-2,q+2) L(p-2,q+3) L(p-1,q-3) L(p-1,q-2) L(p-1,q-1) L(p-1,q) L(p-1,q+1) L(p-1,q+2) L(p-1,q+3) L(p,q-3) L(p,q-2) L(p,q-1) L(p,q+1) L(p,q+2) L(p,q+3) L(p+1,q-3) L(p+1,q-2) L(p+1,q-1) L(p+1,q) L(p+1,q+1) L(p+1,q+2) L(p+1,q+3) L(p+2,q-3) L(p+2,q-2) L(p+2,q-1) L(p+2,q) L(p+2,q+1) L(p+2,q+2) L(p+2,q+3) L(p+3,q-3) L(p+3,q-2) L(p+3,q-1) L(p+3,q) L(p+3,q+1) L(p+3,q+2) L(p+3,q+3)]; % 7x7 window 
```

同样，我使用了高达 11x11 的窗口。我想轻松地表示 V 和 V1 向量，而不是编写这么多代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T14:51:25.483

可以从图像中读取以`[p,q]`大小为中心的任意窗口`n`

```
halfSize = floor(n/2); %# n has to be odd
window = image(p-halfSize:p+halfSize,q-halfSize:q+halfSize); 
```

请注意，您希望使用 的最大值填充图像`halfSize`，或者测试该值，例如`p>halfSize`和`p<imageSize-halfSize+1`（对于 相同`q`），这样您就不会出现索引错误。

# java - 字符串和布尔值的表存储

> ID：13888939
> 
> 赞同：0
> 
> 时间：2012-12-15T03:09:06.590
> 
> 标签：java, android, arrays

我已经实现了应用内计费 v3，我想要一种方法来保留某种包含 3 列的表格

（字符串）产品名称，（字符串）sku，（布尔）真/假

做这个的最好方式是什么？最好的方法（在我看来）允许我保留一个静态的易于阅读的值列表，其中前两个是字符串，第三个是布尔值。一开始布尔列的所有值都是假的，但是当我查询购买时，我可以轻松地重置该值。

只是补充一下，

我反对 SQLite 数据库，因为它们太容易被破解。我宁愿在代码中创建它，因此我在数组列表或矩阵中的 ArrayList 或类似以下内容之间进行辩论：

```
private static class CatalogEntry {
    public String sku;
    public String name;

    public CatalogEntry(String sku, String name) {
        this.sku = sku;
        this.name = name;
    }
}

private static final CatalogEntry[] CATALOG = new CatalogEntry[] {

new CatalogEntry("android.test.purchased", "Item1"),
        new CatalogEntry("android.test.canceled", "Item2"),
        new CatalogEntry("android.test.refunded", "Item3"),
        new CatalogEntry("android.test.item_unavailable", "Item4")

}; 
```

如果我添加第三列，是否有办法重置 CATALOG 数组中的值，否则我正在考虑同时使用该列和标准数组列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T05:49:29.710

将 sqlite 与四列一起使用：

*   库存单位
*   姓名
*   purchaseDate（如果未购买，则为 null）
*   md5Hash

进行购买时，您只需将 sku、名称、购买日期、设备 ID 和 PSK 连接起来，制作一个 md5Hash 并将其与行中的其他数据一起存储。当您检查表格的内容时，您将存储的 md5 与数据进行比较，您可以验证购买是否有效，或者表格是否已被篡改。您甚至可以让用户将购买表备份到 sdcard（或使用 Android 备份）。

# objective-c - nsattributedstring 可点击 iOS

> ID：13888941
> 
> 赞同：1
> 
> 时间：2012-12-15T03:10:03.967
> 
> 标签：objective-c, core-text, nsattributedstring

我想出了如何在核心文本中制作一个可点击的 url，但我不知道如何让其他单词可以点击，例如 'my name is @george' 。我希望@george 在核心文本中可以点击。有办法吗？我正在尝试这样使其可点击：

```
CFAttributedStringSetAttribute(string, CFRangeMake( 0, mystring.length ), kCTFontAttributeName, ctFontBold );
        CFAttributedStringSetAttribute(string, CFRangeMake( mystring.length, linestring.length ), kCTFontAttributeName, ctFont);
        CFAttributedStringSetAttribute(string, CFRangeMake( mystring.length, linestring.length ), kCTParagraphStyleAttributeName, paragraphStyle);
         CFAttributedStringSetAttribute(string, CFRangeMake(0, mystring.length), kCTForegroundColorAttributeName, [UIColor blackColor].CGColor);
             CFAttributedStringSetAttribute(string, CFRangeMake(0, mystring.length),
                                            (CFStringRef)@"CustomLink",mystring); 
```

然后当我点击这个词时，我会像这样检索它：

```
NSString* myString = [attributes objectForKey:@"CustomLink"]; 
```

但我一直得到（空）。当它是 URL 时不会发生这种情况！

任何帮助表示赞赏！

谢谢。

我通过手势识别器检测到触摸：

```
CTFrameRef ctFrame = CTFramesetterCreateFrame( framesetter, CFRangeMake(0, text.length),path, NULL );

    CFArrayRef lines = CTFrameGetLines(ctFrame);

    CGPoint* lineOrigins = malloc(sizeof(CGPoint)*CFArrayGetCount(lines));

    NSInteger index=0;

    int ii=0;

    for(CFIndex i = 0; i < CFArrayGetCount(lines); i++)
    {

        CGFloat y;

        CTFrameGetLineOrigins( ctFrame, CFRangeMake(0, 0), lineOrigins);

        CTLineRef line = (CTLineRef)CFArrayGetValueAtIndex(lines, i);
        CGPoint origin = lineOrigins[i];
        y = bottomLabel.bounds.origin.y +  bottomLabel.bounds.size.height - origin.y;
        ii=i;
        if (reversePoint.y > origin.y) {

            index = CTLineGetStringIndexForPosition(line, reversePoint);
            CFArrayRef runs = CTLineGetGlyphRuns(line);

            for(CFIndex j = 0; j < CFArrayGetCount(runs); j++)
            {
                CTRunRef run = CFArrayGetValueAtIndex(runs, j);

                CGRect runBounds;

                CGFloat ascent;//height above the baseline
                CGFloat descent;//height below the baseline
                runBounds.size.width = CTRunGetTypographicBounds(run, CFRangeMake(0, 0), &ascent, &descent, NULL);
                runBounds.size.height = ascent + descent;

                CGFloat xOffset = CTLineGetOffsetForStringIndex(line, CTRunGetStringRange(run).location, NULL);
                runBounds.origin.x = origin.x + rect.origin.x + xOffset;
                runBounds.origin.y = y;//+ rect.origin.y;
                runBounds.origin.y -= (descent+ascent)-5;

                NSDictionary* attributes = (NSDictionary*)CTRunGetAttributes(run);
                NSString* urlString = [attributes objectForKey:@"CustomLink"];
                               if(urlString && ![urlString isEqualToString:@""])
                {

                    [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(showwebview:) userInfo:urlString repeats:NO];

                    return;
                }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T04:32:28.083

使用[TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel)。它支持超链接。

参考[TTTAttributedLabel-string-as-text-and-links)](https://stackoverflow.com/questions/8839464/uilabel-string-as-text-and-links)例如如何使用。

# html - iframe 中的锚点会破坏父页面格式

> ID：13888946
> 
> 赞同：0
> 
> 时间：2012-12-15T03:10:55.090
> 
> 标签：html

我有一个 iframe，里面有以下内容：

```
<body>
<a id="top" target="_self"></a>

...

<a href="#top">[top]</a> ... 
```

单击链接时，它会将用户带到 iframe 中的页面顶部，但 iframe 似乎也将自身固定在父页面的顶部。

我在没有 target="_self" 的情况下尝试过，但它也是一样的。

请任何人都可以对此有所了解吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T11:21:16.347

I fixed this by using:

```
<a href="#" onclick="location.href="#top">[top]</a> 
```

# matlab - MATLAB 和 DDE 链接

> ID：13888951
> 
> 赞同：0
> 
> 时间：2012-12-15T03:13:03.623
> 
> 标签：matlab

我已经在 excel 中开发了一个交易自动机，但它太慢了，现在我试图在 matlab 中做到这一点。

我用来在 excel 中输入工作表的链接之一是：

```
=TWSVR|CMA!'0012PETR4;25' 
```

我正在尝试在 matlab 中接收相同的数据，这就是我所做的：

```
channel = ddeinit('TWSVR','CMA')

lastPetr = ddeadv(channel,'0012PETR4;25',callback) 
```

那么这是对的吗？我在哪里可以看到数据？存储在哪里？

这个回调函数是我必须开发来处理数据的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T11:31:56.797

Matlab 不再支持 DDE。您仍然可以使用 DDE，但您可能会遇到麻烦。

对于与 Excel 的数据交换，我建议使用`xlsread`,`xlswrite`来`xlsfinfo`代替。

# facebook - Facebook实时API：删除的朋友会触发更新调用吗？

> ID：13888952
> 
> 赞同：1
> 
> 时间：2012-12-15T03:13:29.990
> 
> 标签：facebook, facebook-graph-api

自然地，文档没有做出这种区分，这让我认为它没有。非常简洁——有谁知道失去朋友的用户是否会触发实时更新回调？如果是这样，如果用户删除了所述朋友或用户“未加好友”，是否相同？

如果我在文档中遗漏了有关此内容的内容，我深表歉意，但我向您保证我已经看过了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:07:34.950

[Facebook Realtime API](http://developers.facebook.com/docs/reference/api/realtime/)似乎确实提供了有关[用户](http://developers.facebook.com/docs/reference/api/user)对象的某些用户字段和连接的通知。您可以订阅的连接`User object`包括：提要`friends`、、喜欢、签到、位置、事件。

并且当您订阅成功`user object subscription`后，每次更新用户时，都会通知`friends`您的服务器。`callback`

# c# - 从当前加载的记录中更新一个字段

> ID：13888955
> 
> 赞同：2
> 
> 时间：2012-12-15T03:13:47.083
> 
> 标签：c#, datatable

在 VS2010 / C# 中工作 - 我有一个使用 tableadaptor 显示数据的表单（即来自拖放）

我的数据库中的字段之一是`booking`. `status`. 我没有在表单上显示该字段。

该表单采用变量 bookingId 并使用 FillBy 方法使用它来加载单个记录。

保存按钮的代码是

```
 this.bookingBindingSource.EndEdit();
                this.bookingTableAdapter.Update(this.quick_quoteDataSet.booking); 
```

在执行此代码之前，我想将该`status`字段的值设置为“P”。

我可以使用 this.bookingTableAdapter.Update() - 但似乎我必须从表单中读取所有值并将它们与状态字段的新值一起传递给更新命令。

有没有一种方法可以简单地修改当前记录的那个字段的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:01:18.807

使用存储过程

```
USE [Assets]
GO
/****** Object:  StoredProcedure [dbo].[UpdateAssDispRecord]    Script Date: 12/15/2012 08:00:16 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[UpdateAssDispRecord]

    @iDispID int,
    @nDispno decimal,
    @cKeygroup nchar(14),
    @iCodeID int,
    @dDate date,
    @nSale decimal,
    @nCumdep decimal,
    @nBookvalue decimal,
    @cRemarks nvarchar(50)

AS
BEGIN
    SET NOCOUNT ON;
            UPDATE ass_Disp
            SET 
                nDispno=@nDispno,
                cKeygroup=@cKeygroup,
                iCodeID=@iCodeID,
                dDate=@dDate,
                nSale=@nSale,
                nCumdep=@nCumdep,
                nBookvalue=@nBookvalue,
                cRemarks=@cRemarks
            WHERE
                iDispID = @iDispID  
END 
```

# jquery - 为什么当我将显示设置为内联时图像会变得疯狂

> ID：13888956
> 
> 赞同：0
> 
> 时间：2012-12-15T03:13:49.130
> 
> 标签：jquery, css, html, inline

我的代码看起来像这样

CSS~

```
 div{
 display:inline; <!-- this is where I need the help -->
 }

a img{
margin: 5px;
box-shadow: 3px 3px 5px #000;
-moz-box-shadow: 3px 3px 5px #000;
    -webkit-box-shadow: 3px 3px 5px #000;

}
.getbig{ 
top: 0px;
width:136px;
height:112px;
}
.bigimage{
width:100%;
height:100%;
left:15px;
top:15px;
} 
```

html~

```
<div class="getbig">

<a href="../pictures2/band1.jpg" target="_blank" ><img  src="../thumbnails/1.jpg" width="136" height="112" class="bigimage" alt="No Limit Texas" title="No Limit Texas"></a> 

<a href="../pictures2/band4.jpg" target="_blank"><img src="../thumbnails/4.jpg"  width="136" height="112" class="bigimage" alt="No Limit Texas" title="No Limit Texas"> </a>

<a href="../pictures2/band5.jpg" target="_blank"><img src="../thumbnails/5.jpg"  width="136" height="112" class="bigimage" alt="No Limit Texas" title="No Limit Texas"></a>

<a href="../pictures2/band7.jpg" target="_blank"><img src="../thumbnails/7.jpg"  width="136" height="112" class="bigimage" alt="No Limit Texas" title="No Limit Texas"> </a>
</div> 
```

jQuery

```
$(document).ready(function(){

$('.bigimage').mouseover(function(){

  $(this).stop().animate({
      "width": "105%",
      "height": "105%",
      "left":"0px",
      "top":"0px"
      }, 200,'swing');
}).mouseout(function(){ 
  $(this).stop().animate({"width": "100%","height":"100%","left":"15px","top":"15px"},200,'swing');
});;
 }); 
```

所以这一切只是让图像在我将鼠标悬停在它上面时增长 5%，然后在我关闭鼠标时恢复正常。

这是我的问题：为什么，当我选择 display: inline 时，所有这些图像都会像疯了一样变大。我的问题是，当您在浏览器中显示此内容时，它们都在彼此之下，我不希望那样。我希望它们彼此相邻或像内联一样，但是当我将该 div 设置为 display:inline; 它只会让一切变得巨大。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T04:07:49.047

这是因为您已将宽度和高度设置为抓取 100% 的容器 div。我已经复制了您的代码并在[Jsfiddle中进行了演示](http://jsfiddle.net/eqau7/3/)

```
var divheight = $('.bigimage').height();
var divwidth = $('.bigimage').width();
$('.bigimage').mouseover(function() {

    var new_height = divheight * 1.05;
    var new_width = divwidth * 1.05;
    $(this).stop().animate({
        "width": new_width + "px",
        "height": new_height + "px",
        "left": "0px",
        "top": "0px"
    }, 200, 'swing');
}).mouseout(function() {
    $(this).stop().animate({
        "width": divwidth,
        "height": divheight

    }, 200, 'swing');

});;​ 
```

请注意，我在悬停函数之外设置了变量，原因是我的 height() 和 width() 函数获取了图像的实际当前大小。

另外，我已经稍微改变了你的CSS。

如果您知道每个图像的实际宽度，至少但不是最后一个，您可以使用 CSS3 过渡

```
.bigimage{
    left:15px;
    top:15px;
    width:112px;
    height:160px;
     -webkit-transition: all 1s ease-in-out;
    -moz-transition: all 1s ease-in-out;
    -o-transition: all 1s ease-in-out;
    -ms-transition: all 1s ease-in-out;
    transition: all 1s ease-in-out;
    -moz-transform:rotate(0deg);
    -webkit-transform:rotate(0deg);
    -o-transform:rotate(0deg);
    -ms-transform:rotate(0deg);

}

.bigimage:hover {
    height:120px; 
    width:200px;
    -webkit-transition: all 1s ease-in-out;
    -moz-transition: all 1s ease-in-out;
    -o-transition: all 1s ease-in-out;
    -ms-transition: all 1s ease-in-out;
    transition: all 1s ease-in-out;
    -moz-transform:rotate(0deg);
    -webkit-transform:rotate(0deg);
    -o-transform:rotate(0deg);
    -ms-transform:rotate(0deg);
} 
```

# php - apache mod_rewrite 收集请求信息

> ID：13888961
> 
> 赞同：-1
> 
> 时间：2012-12-15T03:15:06.123
> 
> 标签：php, mod-rewrite

我的服务器上有一些现有的 PHP 代码。现在我想要登录有关到达我的服务器的请求的完整信息。我不想对现有代码进行任何更改。我为此使用 apache mod_rewrite。我有一个示例 php 脚本，stats.php，它看起来像这样

```
<?php

   /*NOTE:This is peseudo code!!!*/
   open database connection
   add serverinfo, referer info, script_name, arguments info to database   
   change characters in request from UTF16 to UTF 8.

    //Call header function for redirection
    $str = Location : $_SERVER["REQUEST_URI"]
    header ("$str");

?> 
```

在 httpd.conf 文件中

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond %{REQUEST_URI} !/stats\.php
RewriteCond %{REQUEST_URI} !\/favicon\.php
RewriteRule ^/(.*)$     /stats.php?$1 [L]
RewriteLog "logs/error_log"
RewriteLogLevel 3
</IfModule> 
```

问题是，恐怕从 SEO 的角度来看这可能不是最好的，也可能是错误的。有没有更好的方法来做到这一点？例如，我可以对 access_log 文件使用脚本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:31:42.737

例如，如果你去`http://your-domain.com/some-page.html`，你会得到一个循环：

1.  浏览器使用请求 URI 联系服务器`/some-page.html`
2.  mod_rewrite 将 URI 重写为`/stats.php?some-page.html`
3.  stats.php**做**它的事，然后**将浏览器重定向到`/some-page.html`**
4.  浏览器使用请求 URI 联系服务器`/some-page.html`
5.  从 #2 开始重复

您需要做的`Location:`是读取`some-page.html`文件的内容并将其返回给浏览器，而不是响应标头，这实际上是“代理”浏览器的请求。因此浏览器不会被重定向。

[至于如何在 php 中做到这一点，在 Stack Overflow 上](https://stackoverflow.com/a/2028918/851273)有很多谷歌搜索结果甚至很多答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:08:48.330

我想出了我应该怎么做。我做了以下

1) 将自定义日志格式添加到 httpd.conf 文件。

2) 添加了一个 customLog 指令。将输出通过管道传输到 stats.php。

3) stats.php 负责将代码添加到数据库中。

# c# - 列表：在当前指向的项目之后插入新项目

> ID：13888964
> 
> 赞同：0
> 
> 时间：2012-12-15T03:15:24.220
> 
> 标签：c#

我目前正在使用/试验列表。我可以通过函数确定列表中每个项目的位置，`GetNextTree`例如：和。我已经从数组中创建了一个列表，但现在我正在尝试实现一个插入按钮，该按钮将获取值、、、并创建项目。由于我可以指向列表中的任何位置，因此插入的目的是在当前指向的项目之后添加一个项目。这就是我的问题所在：如何添加当前指向项目的新项目？ `First``Next``Last``ax``tree_type``tree_height``tree_price``tree_instock``after`

```
public class fruit_trees
{
    private string tree_type = " ";
    private int tree_height = 0;
    public double tree_price = 0;
    private int tree_instock = 0;

    public fruit_trees next_tree;

    public fruit_trees(string newtree, int newheight, double newprice, int newinstock)
    {
        tree_type = newtree;
        tree_height = newheight;
        tree_price = newprice;
        tree_instock = newinstock;

        next_tree = null;
    }

    public string GetTreeType
    {
        get { return tree_type;
            }
    }

    public override string ToString()
    {
        return tree_type + " " + tree_height + " " + tree_price + " " + tree_instock;

    }

}

public class ListForTrees
{
    private fruit_trees first_tree;
    public fruit_trees First_tree
    {
        get
        {
            return first_tree;
        }
    }

    public fruit_trees last_tree;
    public int current;
    public int count = 0;

    public ListForTrees(fruit_trees new_tree)
    {
        first_tree = new_tree;
        last_tree = new_tree;
        count = 1;
        current = 0;
    }

    public ListForTrees(IEnumerable trees)
    {
        current = 0;
        foreach (fruit_trees t in trees)
        {
            this.AddTree(t);
        }
    }

    public fruit_trees GetNextTree()
    {
        //current = 0;
        fruit_trees ft = first_tree;

        if (current == count)
        {

            current = 0;
        }

        int i = 0;
        while (i != current)
        {
            ft = ft.next_tree;
            i++;

        }

        return ft;
    }

}

ListForTrees mainlist = new ListForTrees();
private void BtnInsertTree_Click(object sender, EventArgs e)
{

    try
    {
        int height = Convert.ToInt32(TxtTreeHeight.Text);
        int stock = Convert.ToInt32(TxtTreeStock.Text);
        double price = Convert.ToDouble(TxtTreePrice.Text);

        fruit_trees treeadd = new fruit_trees(TxtTreeName.Text, height, price, stock);
        mainlist.AddTree(treeadd);

    }
    catch
{
    MessageBox.Show("Please check intput fields");
    }
}

private void BtnGo_Click(object sender, EventArgs e)
{
    fruit_trees[] ax = {   new fruit_trees("cherry", 48, 12.95, 3),
                           new fruit_trees("pine", 36, 9.95, 8),
                           new fruit_trees("oak", 60, 14.95, 2),
                           new fruit_trees("peach", 54, 19.95, 3),
                           new fruit_trees("pear", 36, 11.85, 2),
                           new fruit_trees("apple", 62, 13.45, 5)
                       };

    mainlist = new ListForTrees(ax);
    fruit_trees current = mainlist.First_tree;
    while (current != null)
    {
        TxtOutput.AppendText(current.ToString() + Environment.NewLine);
        current = current.next_tree;
    }

}

private void ShowFirstItem_Click(object sender, EventArgs e)
{
    //Show Next Item
    labelSpecificTree.Text = mainlist.First_tree.GetTreeType;
}

private void ShowNextItem_Click(object sender, EventArgs e)
{

    fruit_trees obj = mainlist.GetNextTree();
    if (obj.next_tree == null)
    {
        labelSpecificTree.Text = mainlist.First_tree.GetTreeType.ToString();
    }
    else
    {
        mainlist.current++;
        labelSpecificTree.Text = obj.next_tree.GetTreeType.ToString();
    }

}

private void ShowLastItem_Click(object sender, EventArgs e)
{
    // Show First Item
    labelSpecificTree.Text = mainlist.last_tree.GetTreeType;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T03:40:43.427

所以我对这里发生的事情有点困惑。你正在实现你自己的`ArrayList`类，这根本不是一个真正的列表......我真的不明白在 C# 中做这些事情的意义，但是好吧......这是方法；

```
 fruit_trees[] InsertNode(fruit_trees current, fruit_trees nNode)
  {
       fruit_trees[] temp = new fruit_trees[ax.Length + 1];
       int i = 0;

       while (ax[i] != current)
       {
             temp[i] = ax[i];
             i++;
       }
       temp[i+1] = nNode;
       while (i < ax.Length)
       {
            temp[i+1] = ax[i];
       }

       return temp; 
  } 
```

这样称呼它；

```
 ax = InsertNode(current, nNode); 
```

我们正在做的是创建一个带有一个额外插槽的新列表，将每个列表复制`fruit_tree`到我们要插入的节点，然后我们将新树复制进去。之后我们复制旧数组的其余部分。然后我们返回新数组。

# function - 蛋糕php中的多个复选框

> ID：13888968
> 
> 赞同：0
> 
> 时间：2012-12-15T03:15:52.183
> 
> 标签：function, cakephp, checkbox

我有一个预订列表，我想使用多个复选框删除它们。这是我的代码：

```
foreach ($bookings as $booking): ?>
    <tr>
        <td><?php echo h($booking['Booking']['first_name']); ?>&nbsp;</td>
        <td><?php echo h($booking['Booking']['surname']); ?>&nbsp;</td>
        <td><?php echo h($booking['Booking']['created']); ?>&nbsp;</td>
        <td><?php echo $this->Form-> checkbox('Bookings.ID.['.$booking['Booking']['ID'].']', 
        array('value' => $booking['Booking']['ID']));?></td>    
    </tr>
<?php endforeach; ?> 
```

在我的控制器中，我使用此功能删除选定的预订：

```
public function deletebooking(){

    $bookings = $this->Booking->find('all');
    $this->set('bookings',$bookings);
    if(!empty($this->data)){
        foreach($this->data[Bookings] as $key => $value){

            if($value != 0){
                $this->Booking->delete($value);
                $this->redirect(array('action' => 'index'));
            }

        }
    }

} 
```

谁能告诉我为什么它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:29:36.330

将您的输入字段更改为以下内容： foreach ($bookings as $booking): ?>

```
<td>
   <?php echo $this->Form->checkbox('bookingids', 
                                      array(
                                        'value' => $booking['Booking']['ID'],
                                        'name' => 'data[Booking][bookingids][]',
                                       ));?>
</td> 
```

注意名称值中的空`[]`。这将创建该数组的新索引。在您的控制器中，您可以像这样访问它：

```
 if(!empty($this->data)) :
        foreach($this->data['Bookings']['bookingids'] as $key => $value):
                $data = array();
                $data['Booking']['id'] = $value;
                $this->Booking->delete($data);
        endforeach;
        $this->redirect(array('action' => 'index'));
    endif; 
```

# jquery - 使用浮点数绘制时间序列数据并忽略大量时间

> ID：13888970
> 
> 赞同：4
> 
> 时间：2012-12-15T03:16:42.407
> 
> 标签：jquery, graph, time-series, data-visualization, flot

我正在用 Flot 绘制股票数据。如果我绘制一天，它工作正常。如果我在同一图表中绘制 2 天或更多天，则在第一天结束和第二天开始之间有一条很长的线。

正确地，Flot 没有看到任何数据（市场关闭），因此只是在新的一天开始时画了一条线。

如何让 Flot 忽略收市（美国东部标准时间下午 4 点）和开市（美国东部标准时间上午 9:30）之间的时间？

附图片：![流程图](../Images/cfd2f738595495d70ca645bdb9846350.png)

我的绘图数据是：

```
$(function () {
    $.plot($("#placeholder"),
[ { data: [[1355131782000000, "2.95"], [1355132082000000, "2.99"], [1355132382000000, "2.97"], [1355132682000000, "2.9699"], [1355132982000000, "2.955"], [1355133282000000, "2.92"], [1355133582000000, "2.91"], [1355133882000000, "2.95"], [1355134182000000, "2.94"], [1355134482000000, "2.935"], [1355134782000000, "2.92"], [1355135082000000, "2.92"], [1355135382000000, "2.91"], [1355135682000000, "2.9"], [1355135982000000, "2.8901"], [1355136282000000, "2.865"], [1355136582000000, "2.92"], [1355136882000000, "2.945"], [1355137182000000, "2.95"], [1355137482000000, "2.925"], [1355137782000000, "2.92"], [1355138082000000, "2.925"], [1355138382000000, "2.92"], [1355138682000000, "2.92"], [1355138982000000, "2.93"], [1355139282000000, "2.9201"], [1355139582000000, "2.93"], [1355139882000000, "2.925"], [1355140182000000, "2.9115"], [1355140482000000, "2.92"], [1355140782000000, "2.91"], [1355141082000000, "2.92"], [1355141382000000, "2.91"], [1355141682000000, "2.91"], [1355141982000000, "2.915"], [1355142282000000, "2.915"], [1355142582000000, "2.91"], [1355142882000000, "2.905"], [1355143182000000, "2.9"], [1355143482000000, "2.9"], [1355143782000000, "2.89"], [1355144382000000, "2.885"], [1355144682000000, "2.88"], [1355144982000000, "2.89"], [1355145282000000, "2.89"], [1355145582000000, "2.89"], [1355145882000000, "2.89"], [1355146182000000, "2.88"], [1355146482000000, "2.885"], [1355146782000000, "2.89"], [1355147082000000, "2.89"], [1355147382000000, "2.88"], [1355147682000000, "2.88"], [1355147982000000, "2.89"], [1355148282000000, "2.89"], [1355148582000000, "2.88"], [1355148882000000, "2.88"], [1355149182000000, "2.9"], [1355149482000000, "2.9"], [1355149782000000, "2.89"], [1355150382000000, "2.9"], [1355150682000000, "2.91"], [1355150982000000, "2.9"], [1355151282000000, "2.91"], [1355151582000000, "2.9001"], [1355151882000000, "2.905"], [1355152182000000, "2.9015"], [1355152482000000, "2.9"], [1355152782000000, "2.96"], [1355153082000000, "3.0"], [1355153382000000, "3.01"], [1355153682000000, "3.005"], [1355153982000000, "3.005"], [1355154282000000, "3.01"], [1355154582000000, "3.01"], [1355154882000000, "3.02"], [1355155182000000, "3.02"]] } ],
{ xaxes: [ { mode: 'time', 
             twelveHourClock: true,
             timeformat: "%H:%M%p"} ],
  yaxes: [  ] })
}); 
```

**使用新图表更新**（每个答案）： ![在此处输入图像描述](../Images/72682264bc026e2143d89e17d160c065.png)

这不是我想要的。我想基本上折叠市场收盘和开盘之间的图表。我不想看到巨大的差距......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T12:20:41.590

添加 x 轴值落在间隙内且 y 轴值为 null 的假数据点以创建不连续性。

有关更多信息，请参阅 API 文档的[数据格式](https://github.com/flot/flot/blob/master/API.md#data-format)部分。

编辑：要实际折叠轴以仅显示可用数据，请不要使用时间模式。如果值不是单调增加，那么您并没有真正显示时间，而是应该根据可用数据手动指定 x 轴刻度数组。

# java - 清屏还是在上面画画？

> ID：13888971
> 
> 赞同：0
> 
> 时间：2012-12-15T03:17:09.350
> 
> 标签：java, swing, awt, bluej

什么是更好的选择？适用于：Swing 和 AWT

我问这个问题是因为我想知道什么可以节省我更多的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T03:41:58.633

> 什么是更好的选择？适用于：Swing 和 .awt

对于大多数用途，Swing 是一个更健壮和强大的库。

> 我问这个问题是因为我想知道什么可以节省我更多的时间。

以什么方式为您节省更多时间？

这个问题的真正主旨是什么？

**编辑**
你状态：

> 我正在制作一个 CAD 程序，这就是我需要知道的原因。

我不确定此时我是否会非常担心“清除与顶部绘图”，并且会更担心具有良好逻辑实体分离的整体程序设计。图形细节可以根据您的测试结果进行测试和更改，但更重要的是您拥有强大而灵活的设计，它允许您插入任何类型的图形设计。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T05:01:21.633

在所有其他评论之上；

Swing 有一个聪明的重绘管理器，它可以用来只重绘屏幕的受损区域，而不是需要重绘整个屏幕。

Swing 也是双缓冲的，这使得它的更新不太容易出现闪烁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T03:20:16.897

一般来说，清除和重绘是首选方法。尝试在顶部绘制的程序中经常存在视觉错误。

在顶部绘图的典型用例是消除与难以绘制小部件的程序相关的一些问题（例如具有非常复杂的细节和许多功能的 CAD 程序）。然而，即使在这些情况下，通常也有一些方法可以避免在顶部绘制。例如，将 CPU 密集型小部件绘制到缓冲区，然后在该小部件中没有的内容发生更改时绘制缓冲区。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-15T03:47:45.197

swing 将比 awt 节省更多时间，因为 swing 的所有组件代码都是用 java 编写的，而 awt 组件的代码是用非 java 的本地语言编写的，因此 awt 的编译时间比 swing 多。在节省时间的情况下最好使用 Swing。

# git - 致命：不是 git 存储库（或任何父目录）：.git

> ID：13888972
> 
> 赞同：29
> 
> 时间：2012-12-15T03:17:11.743
> 
> 标签：git, repository

当我尝试 git push 到 heroku 时，我得到了以下信息

```
fatal: Not a git repository (or any of the parent directories): .git 
```

我尝试关注 ruby​​ on rail 教程。

我想我安装了客户端 heroku 包（通过从 heroku 网站下载并按照他们的说明进行安装，GUI 格式安装）。所以我的客户端heroku应该没问题（我是编程新手，所以不确定这个术语是否正确）。

然后我打开一个新终端并输入

```
git push heroku master 
```

我有

```
fatal: Not a git repository (or any of the parent directories): .git 
```

任何擅长这一点的人都可以解释我错过了哪一部分吗？即必须先移动到某个目录？

请告诉我命令，因为没有命令我可能仍然不知道。

PS：我想我的 github 中已经有存储库了。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-15T03:40:23.037

您不在 git 存储库目录中。

输入`pwd`并确保它是您认为应该在的位置。很有可能你在`~/`或在你认为你所在的目录之前。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-15T03:40:31.113

您是否创建了一个 git 存储库？使用创建它`git init`，然后提交一些文件。

[http://git-scm.com/book/en/Git-Basics-Getting-a-Git-Repository](http://git-scm.com/book/en/Git-Basics-Getting-a-Git-Repository)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-09-23T08:26:55.243

2020年9月更新

首先，您需要创建一个 Heroku 应用程序的 git repo

```
git init
git add .
git commit -m "initial commit"
heroku create
git push heroku master 
```

你的代码如何上传到 Heroku

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-15T03:44:07.777

确保您已按照 Rails 教程手册的[安装和设置](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial#sec-git_setup)部分中的所有步骤进行操作。

您收到的错误消息表明您错过了该`git init`步骤。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-13T20:22:18.843

如果您打算这样做`git clone`，而是这样做，则可能会发生这种情况`git checkout`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-09T09:33:48.780

出现此错误是因为您试图从 git 存储库的非克隆工作副本推送更改。你有没有在你正在工作的目录上初始化 git repo？如果不是这样，请使用初始化 git repo `git init`，然后通过使用执行`git clone`或添加远程以`git remote add origin git@github.com:repourl.git`获取更多详细信息，请参阅[此](https://www.atlassian.com/git/tutorials/setting-up-a-repository/git-clone)

# python - pybrain 神经网络不学习

> ID：13888973
> 
> 赞同：14
> 
> 时间：2012-12-15T03:17:13.753
> 
> 标签：python, machine-learning, neural-network, pybrain

我正在使用 pybrain 构建一个学习趋化性的代理（根据化学信号向食物移动）。代理由一个神经网络表示，它应该根据它与食物的距离来调整它的权重。输入是两个传感器神经元，输出是移动代理的两个运动神经元。因此，我有连续的状态和动作。奖励是与食物距离的倒数。

这是我的主循环的本质：

```
task = ChemotaxisTask(ChemotaxisEnv(), MAX_STEPS)
module = buildNetwork(2,2,2)
learner = HillClimber(task, module, maxEvaluations=MAX_TRIALS, mustMinimize=True, storeAllEvaluations=True, storeAllEvaluated=True, verbose=False)
learner.learn() 
```

我尝试过的方法是：

*   用 Q 进行实验（因为我有连续的状态/动作，所以不起作用）
*   使用 Reinforce/ENAC 进行实验（梯度下降计算没有变化）
*   使用 Reinforce/ENAC 进行连续实验（见上文）
*   使用 HillClimber 进行 EpisodicExperiment（网络权重不变）

我决定尝试使用 EpisodicExperiment，因为它似乎最适合我的实验。

我终于可以看到网络权重发生了变化，但随着时间的推移，我的平均适应度并没有增加。我可能做错了什么？

**这是我所有代码的 Gist 存储库**：[https ://gist.github.com/4477624](https://gist.github.com/4477624)

这是 pybrain 文档：[http](http://pybrain.org/docs/index.html) ://pybrain.org/docs/index.html 学习者文档（例如 Q、Reinforce、HillClimber）位于[http://pybrain.org/docs/api/rl/learners.html](http://pybrain.org/docs/api/rl/learners.html)。

代码本身位于[https://github.com/pybrain/pybrain](https://github.com/pybrain/pybrain)。学习者在[https://github.com/pybrain/pybrain/tree/master/pybrain/rl/learners](https://github.com/pybrain/pybrain/tree/master/pybrain/rl/learners)，实验在[https://github.com/pybrain/pybrain/tree/master/pybrain/rl/实验](https://github.com/pybrain/pybrain/tree/master/pybrain/rl/experiments)。

但是，我正在使用带有 EpisodicExperiment 的优化学习器；这些位于[https://github.com/pybrain/pybrain/tree/master/pybrain/optimization](https://github.com/pybrain/pybrain/tree/master/pybrain/optimization)。

我相信您可以从那里找到通过文档和代码的方式。我正在使用的其他所有内容都在[https://github.com/pybrain/pybrain/tree/master/pybrain/rl](https://github.com/pybrain/pybrain/tree/master/pybrain/rl)中。

# c# - asp.net C# ajax 运行“异步”批处理作业

> ID：13888975
> 
> 赞同：5
> 
> 时间：2012-12-15T03:17:40.100
> 
> 标签：c#, asp.net, ajaxcontroltoolkit

我对 asp.net 和 C# 很陌生，所以请耐心等待。如果之前有人问过这个问题，我也很抱歉......如果是这样，请引导我到一个有帮助的页面。

我有的：

*   页：有4个更新面板

    1.  第一个 UpdatePanel 包含（项目）gridview、用户显示选项（对这个问题不重要）和执行数据库搜索的按钮，该搜索返回显示到网格的项目列表。用户在此网格上选择一个项目...

    2.  第二个 UpdatePanel 包含一个下拉列表，其中包含从 XML 加载的可用任务列表。用户将选择一个任务，该任务显示一堆可用的选项/参数（也从 XML 文件加载）到第二个更新面板中的另一个（参数）gridview。这里的Gridview总会有一行数据。我在这里使用 gridview 是因为它比创建动态控件更容易（每个任务的参数都不同）。用户可以在网格中输入参数值。用户单击添加按钮，任务被添加到第三个更新面板中的另一个网格视图中。

    3.  第三个 UpdatePanel 包含一个（任务）gridview，其中包含用户添加的所有任务。还有一个按钮可以批量运行所有任务。单击按钮时，它会通过（任务）gridview 寻找待运行的任务。对于每个挂起的任务，它调用一个适当地处理任务的 Web 服务。Web 服务将任务结果与日志输出一起返回。

    4.  4th UpdatedPanel 现在只包含一个显示从 Web 服务返回的日志输出的 div。

我想进一步研究但不知道如何是：

*   如何执行“异步”批处理作业？我想要实现的是，当用户单击批处理运行按钮时，第三个（任务）更新面板及其所有控件被禁用，而批处理作业在“幕后”运行。根据任务的不同，每个任务最多可能需要 5 秒。如果用户创建了 60 个任务，我认为这也会导致页面超时？
*   在批处理作业运行时，用户可以进一步搜索 (item) UpdatePanel 中的其他项目，并使用 (parameter) updatepanel 将新任务添加到 (task) updatepanel。
*   （任务）UpdatePanel 将在作业运行时显示某种“正在进行的作业...”覆盖。

希望你能理解我的问题。非常感谢有人能提供一些指导和/或有关如何解决此任务的指示

更多信息：

使用框架 3.5

使用 Asp.net C# + Ajax

Web 服务是一个 solaris 盒子上的 gSoap

提前谢谢了。

* * *

对不起，我是菜鸟，我试图回复你的帮助，但发现我可以输入的字符有限。我现在只更新我自己的评论。

谢谢你的建议。抱歉回复晚了，前几天我一直在环顾四周并做了一些更改，让它与“PageAsyncTask”和“IAsyncResult”一起工作。我创建了一个将由页面调用的 Web 服务类。新的 Web 服务类将被称为 gSoap Web 服务。我已经设法以某种方式“异步”运行它。

我有一个执行的按钮：

```
 protected void StartASyncJob()
  {
     PageAsyncTask task = new PageAsyncTask(
        new BeginEventHandler(BeginAsyncCommandTask),
        new EndEventHandler(EndAsyncCommandTask),
        new EndEventHandler(AsyncCommandTaskTimeOut), null);

     RegisterAsyncTask(task);
  } 
```

BeginAsyncCommandTask 将通过网格，获取第一个待处理任务并调用 Web 服务。

EndAsyncCommandTask 然后将检索返回结果，写出（日志）UpdatePanel。然后它将再次执行 StartASyncJob() 以寻找下一个待处理的记录。

所有这一切只有在页面上不做任何其他事情时才有效。如果我（在异步进程运行时）在（项目）gridview 中搜索更多项目或从（任务）下拉列表中选择一个新任务，则在异步 Web 服务进程完成之前，该事件不会触发。完成后，下拉列表或搜索事件会触发，我从 Web 服务返回的日志详细信息不会更新。

我猜'等待'是由'PageAsyncTask'从同一个页面线程'产生'引起的？

我原以为拥有“异步”网络服务将使用户一次可以做不止一件事，从而提供更好的用户体验。但似乎我错了和/或没有做对。

我没有尝试过您使用 QueueUserWorkItem 的建议；但在我这样做之前，请问它是否会产生与使用“PageAsyncTask”相同的效果。使用 QueueUserWorkItem 是否具有“从同一页面线程生成”的相同效果？

提前谢谢了。抱歉，如果我没有很好地解释自己，如果您需要我发布我的代码，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T13:11:45.387

有一些解决方案，但取决于您对服务器的控制程度。

1.  如果您对服务器具有完全访问控制权，您可以创建一个单独的应用程序来处理任务；应用程序可以是 Windows 服务，您的页面和应用程序之间的通信可以是数据库或 MSMMQ（通信主要是指任务列表及其状态 - 1\. 待执行，2\. 正在执行 3\. 已完成）。

2.  另一种解决方案是，如果您没有对服务器的完全访问控制，但它需要在线程之间实现一些通信。而不是我在第 1 点描述的应用程序。您可以有一个单独的线程，可以这样启动：

    ```
    System.Threading.ThreadPool.QueueUserWorkItem(foo => LauchTaskRunner()); 
    ```

    假设你实现了一个名为 LaunchTaskRunner 的方法，它在一个循环中只处理现有任务的列表，上面的行会将它启动到一个单独的进程中。您可以通过一些静态变量（在页面中声明）与此方法（在单独的线程中运行）进行通信，例如：

    ```
    public class YourPage : System.Web.UI.Page{
        static IList<Task> tasks;
        static void LauchTaskRunner(){
        // here make use of tasks variable
        }
    } 
    ```

    每次刷新（任务）更新面板时，它都应该基于**任务**变量进行渲染。

# html - 如何阻止我的背景 div 与我的菜单 div 重叠？

> ID：13888976
> 
> 赞同：0
> 
> 时间：2012-12-15T03:17:47.593
> 
> 标签：html, google-chrome, firefox, css

我的页面左侧有一个菜单，页面其余部分有内容。我有一个深色的纹理背景，所以我想要左侧菜单 div 的半透明背景和内容 div 的半透明背景。但是，似乎 body div 与菜单 div 重叠并堆叠其透明度，并使菜单 div 的内容透明。

我宁愿在两个部分之间留一个空间。有人可以看看我的代码并提供建议吗？

我在下面列出了一些代码，但请查看 jsfiddle 以获得完整的图片。

[http://jsfiddle.net/5xmze/](http://jsfiddle.net/5xmze/) （注意，链接的颜色应该与标题相同）

CSS：

```
#body{
 padding-left:2px;
 width: 85%;
 position: relative;
 background-color:rgba(0,0,0,0.6);
}

#leftside {
 float: left;
 width: 15%;
 height: 100%;
} 
```

HTML：

```
<div><span id="leftside">
    <ul class="leftmenu">
        <li class="leftmenu"><a href="index.php">Home</a></li>
        <li class="leftmenu"><a href="projects.php">Projects</a></li>
        <li class="leftmenu"><a href="resume.php">Resume</a></li>
        <li class="leftmenu"><a href="contact.php">Contact</a></li>
    </ul></span>
</div>
<div id="body">
Content here...
</div> 
```

这是我试图完成的事情： ![这就是我想要完成的](../Images/ac357fb7099dbb67c9d6fe20db0eb295.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T04:15:15.137

最好的方法是将菜单和正文放入同一个父 div，然后`float:left;`将正文放在菜单旁边。

不要忘记为两个元素设置宽度，因为如果`#body`的宽度大于页面上的可用空间，它将显示在菜单下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T03:33:48.313

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready( function(){ 
$(window).resize( function() {
var s = $("body").width();
$("body").css({ "min-width":s+"px" });
});
});
</script>
<style>
/* style.css */

body {
font-size: 1em;
background-image:url('http://i1358.photobucket.com/albums/q764/kenny_johnson5/blackorchid_zpsc8d78a87.png');
color:#FFF;
font-family:Arial;
width:85%;
margin-left:16%;
}

h1 {
 font-family:Cambria,Serif;
 color:#81E500;
 text-align:center;
}

#top{
 width: 85%;
 position: relative;
}

#body{
padding-left:90px;
width: 85%;
position: relative;
background-color:rgba(0,0,0,0.6);
}

a {
color:#81E500;
font-family:Cambria,Serif;
font-size:1.5em;
}

#leftside {
 float: left;
 width: 15%;
 height: 100%;
    margin-left:-15%;
    z-index:999;
}

ul.leftmenu {
 list-style-type:none;
 margin:0px;
 padding:1px;
 background-color:rgba(0,0,0,0.6);
 border: 1px solid;
 border-color:#000;
 height:100%;
}

li.leftmenu {
padding:5px;

}
</style>
<html>

<div><div id="leftside">
    <ul class="leftmenu">
        <li class="leftmenu"><a href="index.php">Home</a></li>
        <li class="leftmenu"><a href="projects.php">Projects</a></li>
        <li class="leftmenu"><a href="resume.php">Resume</a></li>
        <li class="leftmenu"><a href="contact.php">Contact</a></li>
    </ul></div>
</div>

<div id="body">
<div id="top">
<h1>Header</h1>
</div>
<p>
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus tincidunt erat sit amet dolor imperdiet dignissim. Nunc eu enim erat. Suspendisse commodo faucibus risus at facilisis. Phasellus tortor urna, fringilla sed blandit non, porta vel enim. Vivamus placerat, risus et molestie elementum, risus elit dignissim elit, non porttitor nisl tortor sed lorem. Maecenas scelerisque mattis massa, vel blandit erat blandit sed. Vivamus erat augue, varius ac aliquet non, commodo id massa. Maecenas sit amet est posuere turpis ultrices aliquam. Nulla feugiat ultrices diam vitae egestas. Phasellus risus augue, dapibus nec condimentum non, tempus eu massa. Etiam sodales sodales dolor eu convallis.
</p>
<p>
Aenean in dignissim metus. Suspendisse placerat pharetra justo, et tristique neque vestibulum non. Quisque malesuada scelerisque diam eget suscipit. Donec non sollicitudin justo. Etiam sit amet massa felis. Maecenas aliquet cursus tristique. Etiam sollicitudin augue in risus venenatis rhoncus. Pellentesque tellus diam, porttitor in dapibus eu, rutrum eu lectus. Vestibulum luctus hendrerit augue vitae interdum. Donec in turpis malesuada arcu tempor placerat. Aliquam eget nisl ipsum. Cras blandit elementum vulputate. Ut vulputate ullamcorper urna, quis congue mauris laoreet nec. Morbi vitae dui eros.
</p>
<p>
Phasellus rhoncus ultrices sem et dictum. Ut ut nisl eget eros porttitor commodo auctor vitae leo. Quisque sed nulla augue, vel venenatis augue. Pellentesque bibendum sodales lectus, quis malesuada risus consectetur a. Aliquam lobortis aliquet vulputate. Duis sed velit est, in venenatis est. Vivamus viverra lacinia sapien non sodales. Aenean eleifend quam diam, id gravida tellus. Praesent dui sem, volutpat eu blandit in, volutpat ornare nulla. Nunc sed eros dolor.
</p>
<p>
Quisque sit amet diam nisl, volutpat interdum arcu. Proin et justo lorem. Mauris vitae egestas lacus. Nullam ut laoreet turpis. Donec eget metus enim, id porta orci. Nam condimentum feugiat tempor. Nunc ultricies pellentesque euismod. In hac habitasse platea dictumst. Etiam fringilla bibendum sapien, eu vestibulum nisi imperdiet tempus. Duis tincidunt magna id sapien porta vel aliquam massa tincidunt. Maecenas ut metus id augue congue scelerisque id nec enim. Ut ac nibh est, et laoreet orci. Nulla fermentum laoreet augue, in vulputate risus varius vel. Sed ac nunc quis tortor scelerisque rutrum.
</p>
<p>
Nullam adipiscing ultricies lacus ac pretium. In hac habitasse platea dictumst. Nullam convallis libero non augue sollicitudin mattis. Nunc commodo pharetra magna, tempor sagittis sem vehicula nec. Quisque massa ligula, gravida nec fringilla quis, tempus vel dolor. Nam et sem bibendum mi consectetur tincidunt. Nam placerat venenatis odio sit amet imperdiet. Integer luctus quam quis quam lobortis aliquam. Cras dignissim semper erat, ac laoreet leo volutpat quis. </p>

</div>
</body>
</html> 
```

# c - skiena 书中给出的代码中的错误，用于应用 dfs 在图中查找循环

> ID：13888977
> 
> 赞同：4
> 
> 时间：2012-12-15T03:18:06.080
> 
> 标签：c, algorithm, graph, depth-first-search

这是dfs的代码。

```
bool processed[MAXV+1]; /* which vertices have been processed */
bool discovered[MAXV+1]; /* which vertices have been found */
int parent[MAXV+1]; /* discovery relation */  
#define MAXV 1000 /* maximum number of vertices */

typedef struct {
int y;                   /* adjacency info */
int weight;             /* edge weight, if any */
struct edgenode *next; /* next edge in list */
} edgenode;

typedef struct {
edgenode *edges[MAXV+1]; /* adjacency info */
int degree[MAXV+1];     /* outdegree of each vertex */
int nvertices;         /* number of vertices in graph */
int nedges;            /* number of edges in graph */
bool directed;        /* is the graph directed? */
} graph;

dfs(graph *g, int v)
{

   edgenode *p;           /* temporary pointer */
   int y;                /* successor vertex */
   if (finished) return; /* allow for search termination */
   discovered[v] = TRUE;
   time = time + 1;
   entry_time[v] = time;
   process_vertex_early(v);
   p = g->edges[v];
   while (p != NULL) {
         y = p->y;
         if (discovered[y] == FALSE) 
         {
             parent[y] = v;
             process_edge(v,y);
             dfs(g,y);
         }
         else if ((!processed[y]) || (g->directed))
         process_edge(v,y);
         if (finished) return;

       p = p->next;

}
   process_vertex_late(v);
   time = time + 1;
   exit_time[v] = time;
   processed[v] = TRUE;
} 
```

为了找到循环，它修改了如下的过程边缘功能

```
process_edge(int x, int y)
{
    if (parent[x] != y) { /* found back edge! */
       printf("Cycle from %d to %d:",y,x);
    find_path(y,x,parent);
    printf("\n\n");
    finished = TRUE;
    }
} 
```

现在想象一棵只有 2 个叶节点和一个根的小树。当这棵树受到这个函数的影响时，我相信它会说它有循环。这是错误的！如果我错了，请纠正我。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-26T16:47:05.270

来自勘误表，位于[http://www.cs.sunysb.edu/~skiena/algorist/book/errata](http://www.cs.sunysb.edu/~skiena/algorist/book/errata)：

*(*) 第 173 页，process_edge 程序——正确的测试应该是*

`if (discovered[y] && (parent[x] != y)) { /* found back edge */`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T03:57:19.157

我认为你是对的，代码是错误的。

在我看来，问题出`if (parent[x] != y)`在`process_edge()`. 在对 的两个调用中，假定的父级在假定的子级*之前*`process_edge()`传递，即在内部我们期望成为父级，所以我认为该行应该是。*`process_edge()``x``if (parent[y] != x)`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-15T08:17:48.420

可悲的是，我认为这个 dfs 代码是错误的。自从我详细研究这些东西以来已经有很长时间了，但我认为很明显代码根本没有按照他说的那样做。

查找循环代码是正确的（正如 Antonio 所指出的，勘误表中显示了更改）。

主要问题是查找循环例程在 process_edge 中，但他没有将边缘处理到先前发现的节点！那么他将如何找到循环？！如果您对循环（或出于任何原因的后边缘）感兴趣，我认为您必须处理所有边缘。

如果您对后边缘不感兴趣并希望避免处理它们，那么所提供的代码是正确的。

具有讽刺意味的是，在正文中寻找周期部分之前的段落中，他写道：

> 我发现每当我尝试实现一个基于深度优先搜索的算法时，它的微妙之处都会让我大吃一惊。

你不说！:P

* * *

while 循环应如下所示：

```
...

while (p != NULL) {
    y = p.y;

    process_edge(v,y);

    if (discovered[y] == FALSE) {
        parent[y] = v;
        dfs(g,y);
    }

    if (finished) {
        return;
    }

    p = p.next;
}

... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-16T11:50:09.750

在无向图中，只有树边和后边（没有前边或交叉边）。它是树边的充分条件是

```
if (discovered[y] == FALSE) 
```

但是在已经发现的顶点的情况下，无向边有可能返回其父级（而不是其祖先）。为了防止这种情况，添加了另一个条件：

```
if (discovered[y]==TRUE && (parent[x] != y)) 
```

例如：y 已经被 x 发现（比如说）。当递归算法移动到顶点 y（x 的子节点）时，在这种情况下，顶点 X 现在是顶点 y，顶点 Y 是父节点（y）（或 x！）。如果第二个条件被删除，则算法有可能检测到从 child(y) 到其 parent(x) 的边（在无向图中）作为返回到前祖先之一的边，这是完全错误的。*

# css - 如何为 compass sass 中的精灵输出 ../images..？

> ID：13888978
> 
> 赞同：3
> 
> 时间：2012-12-15T03:18:12.430
> 
> 标签：css, compass-sass, css-sprites

如何为 compass sass 中的精灵输出 ../images..？
有谁知道我在哪里可以找到 compass sass sprite 的高级文档？比如官网找不到的sprite-url函数。

```
--css
--sass
    --test.scss
--images
--sprite-images
    --icons
        --a.png
        --b.png

.test.scss codes:
-----------------------
$sprite: sprite-map("icons/*.png");
.hello{
    background-image : sprite-url($sprite);
}

outputs
------------------------
.hello{
    background-image : url('/images/icons-s2c837140f3.png');
}

<!-- but I want to output  -->
.hello{
    background-image : url('../images/icons-s2c837140f3.png');
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T03:54:31.713

编辑：`http_path = '../'`可能确实是你需要的。

另请参阅：http `generated_images_dir`: [//compass-style.org/help/documentation/configuration-reference/](http://compass-style.org/help/documentation/configuration-reference/)

如果您尚未设置自定义 project_path 或 project_dir，则应该可以将其设置为`../images`，但您可能还需要设置`relative_assets`为 true。

除了您可以在此处找到的内容之外，您无需了解 sprite-url 和此类助手的其他信息：http: [//compass-style.org/reference/compass/helpers/sprites/](http://compass-style.org/reference/compass/helpers/sprites/)或[关于GitHub](https://github.com/chriseppstein/compass/issues)。

# facebook-like - Facebook 点赞按钮通知

> ID：13888980
> 
> 赞同：0
> 
> 时间：2012-12-15T03:18:55.950
> 
> 标签：facebook-like

我为初学者的问题道歉，但我不知道还能去哪里。我的网站上有以下代码：

```
<script>
  FB.Event.subscribe('edge.create', function(href, widget) {
    alert('You just liked the page!');
  });
</script> 
```

在开发者页面上，它声明它将在数据库中记录喜欢。那么，我如何看待它们？

该按钮显示正常，一切正常，但我只是不知道如何查看它们。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:15:31.880

您发布的代码用于通知您的页面（显然是在 Javascript 中）查看该页面的用户已“喜欢”它。为了使 Like 功能正常工作，实际上不需要这样做。

您需要在页面上已经有 Like 按钮，以便有人喜欢该页面（例如，通过使用加载了必要的 Javascript SDK 的标签 - [http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/) -虽然听起来你已经完成了）。

至于查看“喜欢”，您的“喜欢”按钮会告诉您有多少人喜欢它（如果您设置了该选项），但是您不能直接查看谁真正喜欢您的页面，因为 Facebook 不允许这样做（隐私问题）

您发布的脚本可以修改以执行其他操作，例如，您可以对自己的服务器进行 AJAX 调用以记录“喜欢”的信息 - 例如。如果用户已登录，那么您就会知道喜欢它的人是谁。

# iphone - 如何查看以编程方式创建的 UIButton 的标签

> ID：13888982
> 
> 赞同：2
> 
> 时间：2012-12-15T03:19:03.137
> 
> 标签：iphone, ios6, tags, uibutton, viewdidload

在我的应用程序的一个视图控制器上，有一长串以编程方式添加的大约 20 个按钮，我想调用相同的方法，但要通过它们的按钮标签来识别自己，但我遇到了一个让我退缩的问题几个小时的研究和尝试。基本问题是我不太清楚如何以除了初始化它们的方法之外的任何其他方法访问以编程方式创建的按钮。

我的问题总结了：

1）如果我要在 viewDidLoad 方法中创建按钮，如何在我创建的 void 方法中访问它？

2）如何在创建的 void 方法中访问这些按钮标签？

这是我到目前为止的代码，但它产生的错误将在下面解释。

```
-(void)viewDidLoad{
float itemScrollerXdirection =0;
float itemScrollerYdirection =0;
float ySize =70.0;
float xSize = 70.0;

UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
button.frame = CGRectMake(itemScrollerXdirection,itemScrollerYdirection,xSize,ySize);
[button addTarget:self action:@selector(itemSelected) forControlEvents:UIControlEventTouchUpInside];
button.tag =1;
[button setTitle:@"button1" forState:UIControlStateNormal];
[itemScroller addSubview:button];
}
//no errors in the above code

-(void)itemSelected{

if ([sender tag] == 1) {  //Gets error "Use of undeclaired identifier 'sender'"
    button.hidden = YES; //Gets error "Use of undeclaired identifier 'button1'"
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T03:45:32.533

我们不是在神秘的红宝石领域工作，需要初始化并存储在某个地方以便您调用它们，试试这个：

```
#.h
@interface MyController : UIViewController{
   NSMutableArray *buttons;
}

#.m
-(void)init // Or whatever you use for init
{
   buttons = [[NSMutableArray alloc] init];
}

-(void)viewDidLoad{
  //blah blah (what you already have)

  [button addTarget:self action:@selector(itemSelected:)     //Add ":"
               forControlEvents:UIControlEventTouchUpInside];
  button.tag =0;

  [buttons addObject:button] //Add button to array of buttons

  //blah blah (what you already have)
}

-(IBAction)itemSelected:(id)sender{
   UIButton* button = [buttons objectAtIndex:sender.tag]
   button.hidden = YES;
} 
```

注意：我是凭记忆做的，所以它可能无法完美运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T03:49:37.430

```
#.h
@interface MyController : UIViewController{
   UIButton *buttons;
}

#.m

-(void)viewDidLoad{
float itemScrollerXdirection =0;
float itemScrollerYdirection =0;
float ySize =70.0;
float xSize = 70.0;

 self.button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
 self.button.frame = CGRectMake(itemScrollerXdirection,itemScrollerYdirection,xSize,ySize);
[self.button addTarget:self action:@selector(itemSelected) forControlEvents:UIControlEventTouchUpInside];
 self.button.tag =1;
[self.button setTitle:@"button1" forState:UIControlStateNormal];
[itemScroller addSubview:button];
}
//no errors in the above code

-(void)itemSelected
 { 
      if ([sender tag] == 1) 
      {  
        self.button.hidden = YES;
      }
  } 
```

# javascript - 替换焦点上的文本输入，进行非结束迭代

> ID：13888996
> 
> 赞同：0
> 
> 时间：2012-12-15T03:22:34.827
> 
> 标签：javascript

我正在使用下面的代码来替换焦点上的文本框。但问题是它会产生无休止的重复并使文本框无法使用。

```
 window.changeInputType = function(oldObject, oType) {
    var newObject = document.createElement('input');
    var wrapper= document.createElement('div');
    wrapper.innerHTML= oldObject.outerHTML.replace('type=password','type=text');
    var newObject = wrapper.firstChild;
    var focus = newObject.focus;
    newObject.focus = "xxx";
    oldObject.parentNode.replaceChild(newObject,oldObject);
    newObject.select();
    return newObject;
  } 
```

HTML是

```
 <input type="password" onfocus="changeInputType(this,'text')"
                         onblur="changeInputType(this,'password')">​​ 
```

但这会导致无休止的重复，因为每次我关注它都会一次又一次地添加元素。我可以用 setTimeout 函数替换 onfocus 和 onblur 事件并稍后分配吗？我怎样才能做到这一点

# css - 使用 CSS 表格垂直对齐文本不起作用

> ID：13888997
> 
> 赞同：1
> 
> 时间：2012-12-15T03:22:51.763
> 
> 标签：css, vertical-alignment

我试图使用 CSS 表垂直对齐 div 内的一些文本，但由于某种原因它不起作用：

```
<div class="navlink" style="width:150px; display:table;">
<div style="text-align:center; display:table-cell; vertical-align:middle;">Some Text</div>
</div> 
```

关于如何使此代码正常工作的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T03:25:48.580

对我有用，您只需放置表格宽度而不是高度。

`<div class="navlink" style="width:150px; display:table;">`

--->`<div class="navlink" style="height:150px; display:table;">`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T03:25:09.090

它有效，只是您没有为单元格 div 使用任何高度，所以这样做

[**演示**](http://jsfiddle.net/eMkKA/)

```
<div class="navlink" style="width:150px; display:table;">
   <div style="text-align:center; display:table-cell; height: 200px; vertical-align:middle;">Some Text</div>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T03:25:22.730

这是我找到的最佳答案：http: [//phrogz.net/css/vertical-align/index.html](http://phrogz.net/css/vertical-align/index.html)

这经常出现。没有简单的答案。

来自页面的引用：

> 我帮助过的各种 IRC 频道的常见问题解答是“我如何在这个区域内垂直居中我的东西？” 这个问题后面通常会出现“我正在使用 vertical-align:middle 但它不起作用！”
> 
> 这里的问题是三个方面：
> 
> 传统上，HTML 布局并非旨在指定垂直行为。就其本质而言，它会按宽度缩放，并且内容会根据可用宽度流动到适当的高度。传统上，水平尺寸和布局很容易；垂直尺寸和布局由此衍生。
> 
> B vertical-align:middle 没有做想要的事情的原因是因为作者不明白它应该做什么，但是......</p>
> 
> C ... 这是因为 CSS 规范确实搞砸了这一点（在我看来）——vertical-align 用于指定两种完全不同的行为，具体取决于它的使用位置。

文章继续解释有两种基本方法：绝对定位和其他答案中的 line-height 方法。

# php - php在行中打印不同的颜色

> ID：13888998
> 
> 赞同：0
> 
> 时间：2012-12-15T03:23:36.880
> 
> 标签：php

我尝试从表格中打印出所有用户电子邮件，但我希望奇数打印为红色，偶数打印为蓝色。如何在while循环中做到这一点？

```
$connect=mysql_connect("localhost", "root", "");
$database=mysql_select_db("phplogin", $connect);

$SQL=mysql_query("SELECT * FROM users");
$num=mysql_num_rows($SQL);
$start=0;

while($start<$num){
    $result_id=mysql_result($SQL, $start, "id");
    $result_email=mysql_result($SQL, $start, "email");

    echo "<b style='color:red'>" . $result_id . $result_email . "</b><br/>";
    echo "<b style='color:blue'>" . $result_id . $result_email . "</b><br/>";

    $start++;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T03:27:47.687

```
$connect=mysql_connect("localhost", "root", "");
$database=mysql_select_db("phplogin", $connect);

$SQL=mysql_query("SELECT * FROM users");
$num=mysql_num_rows($SQL);
$start=0;

while($start<$num){
    $result_id=mysql_result($SQL, $start, "id");
    $result_email=mysql_result($SQL, $start, "email");
    if ($start&1) {
      echo "<b style='color:red'>" . $result_id . $result_email . "</b><br/>";
    }
    else {
      echo "<b style='color:blue'>" . $result_id . $result_email . "</b><br/>";
    }
    $start++;
    } 
```