# StackOverflow 问答 14949000-14949999

# .htaccess - SEO 友好的 URL 和 .htaccess

> ID：14949001
> 
> 赞同：1
> 
> 时间：2013-02-19T02:47:42.183
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, seo

我正在尝试使我的 URL 对 SEO 友好，但我的 .htaccess 有问题

这是我的 URL 当前的样子：

```
http://www.mysite.com/dns/?domain=stackoverflow.com&submit=Report 
```

但我希望它显示如下：

```
http://www.mysite.com/dns/stackoverflow.com 
```

我已经尝试了很多我不知道是否有可能做到的事情，所以我只是想在你们的指导下重新开始。我正在使用的 .htaccess 位于 /dns/ 文件夹中。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:26:59.807

**第 1 步**：将所有页面中的所有链接和锚点更改为如下所示：`http://www.mysite.com/dns/stackoverflow.com`，因此当有人点击您网站上的链接时，他们会转到一个看起来`http://www.mysite.com/dns/stackoverflow.com`像`http://www.mysite.com/dns/?domain=stackoverflow.com&submit=Report`

**第 2 步**：在文档根目录的 htaccess 文件中，添加以下规则（在您可能已经拥有的任何规则之上）：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?dns/(.+)$ /dns/?domain=$1&submit=Report [L,QSA] 
```

**第 3 步**：如果 GET 方法表单提交正在生成链接，您也可以添加以下规则：

```
RewriteCond %{THE_REQUEST} ^(GET|HEAD)\ /dns/\?domain=([^&\ ]+)(&submit=Report)?
RewriteRule ^/?dns/?$ /dns/%2? [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-13T08:34:56.433

[**请参阅使用 .HTACCESS 重写**](http://whats-online.info/science-and-tutorials/105/URL-rewriting-in-PHP-using-htaccess-example/)的帖子url[](http://whats-online.info/science-and-tutorials/105/URL-rewriting-in-PHP-using-htaccess-example/)

 **```
 www.mysite.com/dns/?domain=stackoverflow.com&submit=Report 
```

到

```
www.mysite.com/dns/stackoverflow.com/Report 
```

试试这个

```
Options +FollowSymLinks

RewriteEngine On
RewriteRule \.(js|css|jpe?g|png|gif)$ - [L]

RewriteRule "^dns/([ \w-]+)/([ \w-]+)/?$" dns/?domain=$1&submit=$2 [L,QSA] 
```**

# c++ - 无法理解 C++ 顺序搜索

> ID：14949006
> 
> 赞同：0
> 
> 时间：2013-02-19T02:48:19.967
> 
> 标签：c++

我是 C++ 新手，很难理解这个函数。有人可以带我过去吗？

```
int seqSearch(int [ ] list, int target)
{
    //precondition:  The list is in non-decreasing order
    //postcondition:  The method returns -1 if the target is not in the list.  If the target
    //is in the list, the method returns the index of the first occurrence of the target.
    int result = -1;
    boolean foundBigger = false;
    int i = 0;
    while (result == -1 && !foundBigger && i < list.length)
    {
        if (target == list[i])
            result = i;
        else if (list[i] > target)
            foundBigger = true;
        //endif
        i++;
    }  //endwhile
    return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:59:19.823

它试图查找列表中是否存在目标编号，其中列表中的编号按降序存储。

循环继续，

1.  直到找不到目标。（条件：结果 == -1）（如果找到目标，则结果！= -1 并且循环中断，返回元素的索引。

2.  或直到列表中的元素大于目标。（条件：！foundBigger）（由于列表是按降序排列的，如果它找到一个小于目标的数字，那么他们将没有机会在剩余列表中找到该数字。所以这意味着它不存在于列表和循环应该中断。）

3.  或者直到整个列表都被渲染并且它没有被找到。（条件：i < list.length）

希望现在清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T02:56:57.557

嗯，“非递减顺序”。一个更好的词是升序:-)

该函数假定列表按升序排列。从列表中的第一项 (list[0]) 开始，与您要查找的项目（即“目标”）进行比较。如果相等，则将结果设置为索引“i”。如果不是，则增加 i 并继续循环。一项一项地检查每个项目，直到：

(a) 你找到“目标”，或者

（b）当前项目大于您的“目标”（此时退出，因为自从您的列表被订购以来没有任何意义）

返回值是您在列表中找到“目标”的索引，如果未找到，则返回 -1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T03:04:37.163

当结果为 == -1 且 foundBigger 为真时，您传递给函数的数组大小大于 0

然后它进入while循环

如果即使上述条件之一没有完全满足，那么它也不会进入循环，它只会返回 return 的值

然后，如果您使用目标参数传递给函数的值等于数组列表的 i 值，那么您将结果分配给 i 的值

如果目标值小于数组列表的 i 值，则 foundBigger 被分配为 true，因此当您进入 while 循环时，您无法满足上述条件

如果上述方法均无效，则 i 增加 1 并退出 while 循环

如果目标值不在数组中，它会一直运行，直到您找到目标值的保存位置，然后它将返回结果 -1

否则它将返回位置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T03:04:54.900

```
// precondition:  The list is in non-decreasing order
// postcondition:  The method returns -1 if the target is not in the list.  If the target
// is in the list, the method returns the index of the first occurrence of the target.
int seqSearch(int [ ] list, int target)
{
    int result = -1;                                    // Set result to 'not-found' value
    // Also we want to stop search if smth bigger than `target' will be found
    // Remember the original list is assumed to be sorted, so first value
    // bigger than `target' means: no need to continue, it is guarantied that `target'
    // is nto here!
    boolean foundBigger = false;
    int i = 0;                                          // Initial index to start search
    // Repeat 'till `target' not found AND not found smth bigger that requested target
    // and current index less than the list size...
    while (result == -1 && !foundBigger && i < list.length)
    {
        if (target == list[i])                          // Is current item equal to the requested?
            result = i;                                 // Remember result index (this will break the loop)
        else if (list[i] > target)                      // Is current item bigger than the requsted?
            foundBigger = true;                         // Yep, will break the loop w/ no result to return
        //endif
        i++;                                            // move to next item in the list
    }  //endwhile
    return result;                                      // Return the result,  whatever it is
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T03:06:47.880

如果这是工作代码，那么它绝对不是 c++。while 循环中的布尔操作必须用单独的括号括起来以用于操作顺序，并且 c++ 没有数组的 .length 属性（java 允许这两者，这让我觉得它是用 java 编写的）。逻辑它的背后仍然保持不变。

您首先初始化结果 int（要返回的结果）和一个布尔值，用于检查您是否传递了所需的元素。只要你还没有找到你要找的东西并且你没有“通过”你继续前进的目标项目。

如果您找到了目标，那么您的结果 int 将更改为正确的索引，并且下次循环检查其条件时，索引将超过 -1 并表示一个实数，因此该方法将结束并返回一个索引。

第二个语句检查您是否已经通过了您正在寻找的 int。您知道列表是连续的，因此如果您当前所在的值高于您正在查找的值并且您没有找到该项目，那么您更改 foundBigger 布尔值，它将在下次检查条件时结束循环.

如果这些条件都不满足，那么您最终将超出列表搜索的末尾，因此一旦到达列表末尾，您就知道该项目不在列表中，因此您仍然返回 -1。

# javascript - 数组中的随机颜色

> ID：14949011
> 
> 赞同：9
> 
> 时间：2013-02-19T02:48:54.760
> 
> 标签：javascript, html, random, hex, background-color

我正在寻找使用 JavaScript 构建的东西，它将从给定的十六进制颜色数组中选择一个随机值（背景颜色）并将其应用于给定的 div 元素。

有人知道这样做的好方法吗？似乎没有什么对我有用，但我并不是一个真正精通 JS 的人。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-19T02:54:03.147

这个怎么样？

```
var rgb = [];

for(var i = 0; i < 3; i++)
    rgb.push(Math.floor(Math.random() * 255));

myDiv.style.backgroundColor = 'rgb('+ rgb.join(',') +')'; 
```

如果您想将其限制为已知颜色，您可以创建一个颜色数组并像这样随机选择它。

```
var colors = ['red', 'green', 'blue', 'orange', 'yellow'];

myDiv.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)]; 
```

**[JSFiddle](http://jsfiddle.net/VCmCD/)**

**更新**——使用第一种方法应用于所有`.post-content`。

```
var divs = document.querySelectorAll('.post-content');

for(var i = 0; i < divs.length; i++)
    divs[i].style.backgroundColor = 'rgb('+ rgb.join(',') +')'; 
```

如果您想为每个`.post-content`单独应用随机背景，您可以这样做。

```
var divs = document.querySelectorAll('.post-content');

for(var i = 0; i < divs.length; i++) {
    var rgb = [];

    for(var i = 0; i < 3; i++)
        rgb.push(Math.floor(Math.random() * 255));

    divs[i].style.backgroundColor = 'rgb('+ rgb.join(',') +')';
} 
```

**上次更新**- 正如您所提到的，使用 jQuery。

```
var colors = ['red', 'green', 'blue', 'orange', 'yellow'];

$('.post-content').each(function() {
    $(this).css('background-color', colors[Math.floor(Math.random() * colors.length)]);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T02:54:03.580

此示例从任何数组返回一个随机项目，如果您传递一个非 falsey 参数，它将从数组中删除该项目。

```
Array.prototype.getRandom= function(cut){
    var i= Math.floor(Math.random()*this.length);
    if(cut && i in this){
        return this.splice(i, 1)[0];
    }
    return this[i];
} 
```

//样本：

```
var colors= ['aqua', 'black', 'blue', 'fuchsia', 'gray', 'green', 
'lime', 'maroon', 'navy', 'olive', 'orange', 'purple', 'red', 
'silver', 'teal', 'white', 'yellow']; 
```

警报（colors.getRandom（））；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-05T10:09:08.367

不确定这在性能方面有多好，但如果您已经在使用 lodash，它可以很简单：

```
// initialising array of colours
let colours = ['tomato', 'salmon', 'plum', 'olive', 'lime', 'chocolate']

// getting a random colour
colours = _.shuffle(colours); // you can shuffle it once, or every time
let hereIsTheColour = colours.pop() // gets the last colour from the shuffled array (also removes it from the array) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-04T14:00:14.370

```
let hue = 0;
    let colors = []
    for (let j = 0; j < 10; j++) {
        let color = "hsl(" + hue + ",100%,50%)"      
        colors.push(color)      
        hue += 500
    }
    console.log(colors)
```

# unix - 查找所有组合 UNIX

> ID：14949014
> 
> 赞同：0
> 
> 时间：2013-02-19T02:49:17.673
> 
> 标签：unix

我想找到数字 1、2、3 的所有可能组合。即，我需要以下形式的命令：

```
$ echo ______ 
```

这将返回以下内容：

```
11, 12, 13, 21, 22, 23, 31, 32, 33 
```

它不必一定是这个顺序，但所有这些组合都必须显示。我将如何去做这样的事情？

编辑：

到目前为止，我已经了解了如何使用元字符，特别是字符类，并认为我可以以某种方式使用它们。类似于 [1-3][1-3] 的内容。显然，这行不通，但这就是我开始的地方。我还发现“find”命令可能很有用，所以我一直在研究 find 的工作原理，但它比我想象的要复杂得多......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T02:53:42.447

也许你想要这样的东西？（无论如何，如果您使用的是 bash。）

```
localhost-2:~ $ echo {1,2,3}{1,2,3}
11 12 13 21 22 23 31 32 33
localhost-2:~ $ echo {1,2,3}{1,2,3},
11, 12, 13, 21, 22, 23, 31, 32, 33, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T02:56:16.563

你可以使用 bash 的扩展东西：

```
echo {1..3}{1..3} 
```

# haskell - 作为 Term 或 Value 计算结果的返回类型

> ID：14949021
> 
> 赞同：2
> 
> 时间：2013-02-19T02:50:05.897
> 
> 标签：haskell, types, type-families, data-kinds

我试图很好地掌握种类、类型和术语（或值，不确定哪个是正确的）以及用于操作它们的 GHC 扩展。我知道我们可以使用 TypeFamilies 来编写带有 Types 的函数，现在我们还可以在某种程度上使用 DataKinds、PolyKinds 等来操作 Kinds。我读过这篇[关于](http://www.cis.upenn.edu/~eir/papers/2012/singletons/paper.pdf)Singleton Types 的论文，虽然我还没有完全理解它，但它看起来很有趣。这一切都让我想知道，有没有办法创建一个基于 Term 或 Value 级别的计算来计算返回类型的函数？这是依赖类型实现的吗？

这是我在想的一个例子

```
data Type1
data Type2

f :: Type1 -> Type2 -> (Type1 or Type2)--not using Either or some "wrapper" ADT 
```

- 更新 - - - -

基于这里的大量研究和帮助，我现在很清楚，无论我启用多少扩展，函数的返回类型永远不能基于 Haskell 中值级别的表达式来计算。所以我发布了更多我的实际代码，希望有人能帮助我决定前进的最佳方式。我正在编写一个以圆锥曲线和二次曲面为基本类型的小型库。对这些类型的操作涉及计算它们之间的交集。2个曲面的交点是圆锥曲线的一种类型，包括像点一样的退化（实际上除了圆锥之外还需要另一种类型的曲线，但除了点之外）。确切的曲线返回类型只能由运行时相交曲面的值确定。圆柱体 - 平面相交可以产生无、直线、圆或椭圆。我的第一个计划是像这样使用 ADT 来构造曲线和曲面......

```
data Curve = Point     !Vec3
           | Line      !Vec3 !UVec3
           | Circle    !Vec3 !UVec3 !Double
           | Ellipse   !Vec3 !UVec3 !UVec3 !Double !Double
           | Parabola  !Vec3 !UVec3 !UVec3 !Double
           | Hyperbola !Vec3 !UVec3 !UVec3 !Double !Double
           deriving(Show,Eq)

data Surface = Plane    !Vec3 !UVec3
             | Sphere   !Vec3 !Double
             | Cylinder !Vec3 !UVec3 !Double
             | Cone     !Vec3 !UVec3 !Double
             deriving(Show,Eq) 
```

...这是最直接的，并且具有作为一个很好的封闭代数类型的优点，我喜欢。在这种表示中，交集的返回类型很简单，它只是曲线。这种表示的缺点是这些类型的每个函数都必须为每种类型进行模式匹配并处理所有排列，这对我来说似乎很麻烦。Surface-Surface 相交函数将有 16 个图案进行匹配。

下一个选项是保持每个 Surface 和 Curve 类型独立。像这样，

```
data Point     = Point     !Vec3                               deriving(Show,Eq)
data Line      = Line      !Vec3 !UVec3                        deriving(Show,Eq)
data Circle    = Circle    !Vec3 !UVec3 !Double                deriving(Show,Eq)
data Ellipse   = Ellipse   !Vec3 !UVec3 !UVec3 !Double !Double deriving(Show,Eq)
data Parabola  = Parabola  !Vec3 !UVec3 !UVec3 !Double         deriving(Show,Eq)
data Hyperbola = Hyperbola !Vec3 !UVec3 !UVec3 !Double !Double deriving(Show,Eq)

data Plane    = Plane    !Vec3 !UVec3                          deriving(Show,Eq)
data Sphere   = Sphere   !Vec3 !Double                         deriving(Show,Eq)
data Cylinder = Cylinder !Vec3 !UVec3 !Double                  deriving(Show,Eq)
data Cone     = Cone     !Vec3 !UVec3 !Double                  deriving(Show,Eq) 
```

从长远来看，这似乎更灵活，而且很好且细化，但需要包装器 ADT 才能处理来自交集函数的多种返回类型或构建一般“曲线”或“表面”的列表因为他们之间没有任何关系。我可以使用类型类和存在来对它们进行分组，但是我失去了我不喜欢的原始类型。

这些设计中的妥协让我尝试了这个。

```
---------------------------------------------------------------
-- Curve Types
---------------------------------------------------------------
type Pnte = Curve PNT
type Line = Curve LIN
type Circ = Curve CIR
type Elli = Curve ELL
type Para = Curve PAR
type Hype = Curve HYP
-----------------------------------------------
data CrvIdx = PNT
            | LIN
            | CIR
            | ELL
            | PAR
            | HYP
-----------------------------------------------
data Curve :: CrvIdx → * where 
  Pnte :: !Vec3                                       → Curve PNT
  Line :: !Vec3 → !UVec3                              → Curve LIN
  Circ :: !Vec3 → !UVec3 → !Double                    → Curve CIR
  Elli :: !Vec3 → !UVec3 → !UVec3 → !Double → !Double → Curve ELL
  Para :: !Vec3 → !UVec3 → !UVec3 → !Double           → Curve PAR
  Hype :: !Vec3 → !UVec3 → !UVec3 → !Double → !Double → Curve HYP

---------------------------------------------------------------
-- Surface Types
---------------------------------------------------------------
type Plne = Surface PLN
type Sphe = Surface SPH
type Cyln = Surface CYL
type Cone = Surface CNE
-----------------------------------------------
data SrfIdx = PLN
            | SPH
            | CYL
            | CNE 
-----------------------------------------------
data Surface :: SrfIdx → * where
  Plne :: !Vec3 → !UVec3           → Surface PLN
  Sphe :: !Vec3 → !Double          → Surface SPH
  Cyln :: !Vec3 → !UVec3 → !Double → Surface CYL
  Cone :: !Vec3 → !UVec3 → !Double → Surface CNE 
```

...起初我认为这会给我一些神奇的，两全其美的场景，我可以通过“曲线”引用任何曲线类型（如在列表或交集返回类型中）并且还具有完整类型可用（Curve CrvIdx）使用多参数类型类等以粒度样式编写函数。我很快发现这并不像我希望的那样工作得很好，正如这个[问题](https://stackoverflow.com/questions/14918867/trouble-with-datakinds)所示。我一直顽固地继续用头撞墙，试图找到一种方法来编写一个函数，该函数可以根据运行时参数的几何属性从我的 GADT 中选择返回类型，现在意识到这不会发生。所以现在的问题是什么是表示这些类型以及它们之间的交互的有效和灵活的方式？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T07:38:50.880

简短的回答：没有。您需要使用包装器 ADT[`Data.Dynamic`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Dynamic.html)或[类型族/关联类型](http://www.haskell.org/ghc/docs/latest/html/users_guide/type-families.html)。

类型族可能是最接近您想要的东西，但同样，类型需要能够在编译时确定。例如：

```
{-# LANGUAGE TypeFamilies #-}

data Red
data Green
data Blue

data Yellow
data Cyan
data Violet

type family MixedColor a b
type instance MixedColor Red Red      = Red
type instance MixedColor Red Green    = Yellow
type instance MixedColor Red Blue     = Violet
type instance MixedColor Green Red    = Yellow
type instance MixedColor Green Green  = Green
type instance MixedColor Green Blue   = Cyan
-- etc ..

mixColors :: c1 -> c2 -> MixedColor c1 c2
mixColors = undefined 
```

在这里，`mixColors`函数本质上可以返回任何类型的值，但返回类型需要是类型族的实例，`MixedColor` 以便编译器可以根据参数类型推断实际的返回类型。

您可以使用类型族和类型类来构建相对复杂的类型函数，让您越来越接近依赖类型的功能，但这意味着您的数据需要使用足够的类型级别信息进行修饰，以生成所需的类型-计算。

如果您需要在类型中对数值计算进行编码，则最近引入[的类型级自然数](http://hackage.haskell.org/trac/ghc/wiki/TypeNats)会很有用。

编辑：另外，我不确定你为什么不愿意使用 ADT（也许你需要更详细地描述你的用例？），因为编码例如一个函数可以返回或者*正是*`Type1`这种`Type2`信息的事实ADT 非常自然地编码并且习惯性地用于。

# django - 从 django 应用程序中重新启动 Django runserver 样式

> ID：14949023
> 
> 赞同：-4
> 
> 时间：2013-02-19T02:50:34.587
> 
> 标签：django, anti-patterns

如果您对 django 敏感或虔诚，请不要再阅读！...

事实证明，您不应该在生产中使用 django“runserver”开发服务器的几个原因之一是它的内存很糟糕，它无限期地存储它发送或接收的所有内容。除此之外，尽管它可以很好地满足我的客户需求。似乎当我更改文件并 runserver 自动重新启动时，所有内存都被释放。那么有没有一种简单的方法可以让我在应用程序的代码中复制该功能，或者我可以以某种方式触发它？一种比将 CRLF 附加到它正在观看的文件更糟糕的方法 ;) 很抱歉甚至提到 Django 清教徒！BTW 开发平台是 linux64，部署是 Win64。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T03:05:09.333

可悲的是，您将忽略这一点，但对于其他考虑这一点的人来说，这是值得一提的。

runserver 不适合生产环境。这不是“清教徒”问题。它完全不适合这种用途，不设置真正的服务器只是懒惰。

运行服务器不稳定。一些错误类型没有得到适当的处理，导致服务器崩溃或卡住。

runserver 一次不能服务多个请求。这包括静态文件请求。尝试让 2-3 人同时使用 runserver 主机。玩得开心。

运行服务器尚未完成任何安全审计。它可能有很大的可利用漏洞，并且没有努力检测或消除它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T08:52:26.443

只是尝试使用`touch settings.py`

# titanium - Titanium Mobile：无法在页面之间导航

> ID：14949025
> 
> 赞同：0
> 
> 时间：2013-02-19T02:50:45.180
> 
> 标签：titanium, titanium-mobile

我是 Titanium 的新手，在尝试将其用于 Android 时遇到了 2 个看似简单的问题。

1）我试图通过单击按钮导航到下一页。但相反，它向我显示了一个空白的黑屏。我知道我的第二页`CreateNewMeetup.js`是正确的，因为我尝试将其显示为我的应用程序的登录页面并且它有效。我的代码如下： -

应用程序窗口.js

```
...

var button = Ti.UI.createButton({
    height:44,
    width:'auto',
    title:'Create New Meetup',
    top:20
});
self.add(button);

button.addEventListener('click', function() {
    var newWindow = Ti.UI.createWindow({
        url : "/ui/common/CreateNewMeetupWindow.js",
        fullscreen: false
    });
    newWindow.open();
});

return self; 
```

CreateNewMeetupWindow.js

```
//CreateNewMeetUpView Component Constructor
function CreateNewMeetupWindow() {
var self = Ti.UI.createWindow({
    layout : 'vertical',
    backgroundColor:'white'
});

var contactsField = Ti.UI.createTextField({
    borderStyle : Ti.UI.INPUT_BORDERSTYLE_ROUNDED,
    color : '#336699',
    width : 400,
    height : 60
});
self.add(contactsField);

var locationField = Ti.UI.createTextField({
    borderStyle : Ti.UI.INPUT_BORDERSTYLE_ROUNDED,
    color : '#336699',
    width : 400,
    height : 60
});
self.add(locationField);

var lblNotifyMe = Ti.UI.createLabel({
    color : 'black',
    text : 'Notify me when s/he is',
    textAlign : Ti.UI.TEXT_ALIGNMENT_LEFT,
    width : 'auto',
    height : 'auto'
});
self.add(lblNotifyMe);

var btnGo = Ti.UI.createButton({
    title : 'Go',
    height : 'auto',
    width : 100
});

btnGo.addEventListener('click', function() {
    // Check console
    Ti.API.info('User clicked the button ');

});
self.add(btnGo);

return self;
}; 
```

2）将应用程序安装到我的设备后，我尝试启动它。该应用程序会暂时显示（可能大约 3 秒），然后它会自行关闭。我猜它是一个应用程序崩溃？但它在模拟器上运行良好。

钛专家请帮助：$

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:26:43.770

对于您的第一个问题，您将`url`属性与 CommonJS 对象一起使用。所以改为像这样实例化你的窗口：

```
var newWindow = require("/ui/common/CreateNewMeetupWindow");
newWindow.open(); 
```

如果您不是 CommonJS 模块，您将使用该`url`属性。`CreateNewMeetupWindow.js`

不确定您的第二个问题是什么，请检查您的设备日志和崩溃报告，否则无法知道发生了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T04:32:04.420

您可以在程序中使用以下方法在窗口之间导航

**方法一**

```
//Your app.js file
var button = Ti.UI.createButton({
    height:44,
    width:'auto',
    title:'Create New Meetup',
    top:20
});
self.add(button);

button.addEventListener('click', function() {
    //By doing this you're opening a new window
    var newWindow = Ti.UI.createWindow({
        url : "ui/common/CreateNewMeetupWindow.js",//Provide the correct path here
        fullscreen: false
    });
    newWindow.open();
});

//Your CreateNewMeetupWindow.js file

var newWindow = Ti.UI.currentWindow;

var contactsField = Ti.UI.createTextField({
    borderStyle : Ti.UI.INPUT_BORDERSTYLE_ROUNDED,
    color : '#336699',
    width : 400,
    height : 60
});
newWindow.add(contactsField);

//You can add other controls here just like I added the contactsField 
```

**方法二**

```
var button = Ti.UI.createButton({
    height:44,
    width:'auto',
    title:'Create New Meetup',
    top:20
});
self.add(button);

button.addEventListener('click', function() {
    var window = require('/ui/common/CreateNewMeetupWindow');
var newWindow = new window();
    newWindow.open();
});

//Your CreateNewMeetupWindow.js file

function CreateNewMeetupWindow() {
    var self = Ti.UI.createWindow({
        layout : 'vertical',
        backgroundColor:'white'
    });

    var contactsField = Ti.UI.createTextField({
        borderStyle : Ti.UI.INPUT_BORDERSTYLE_ROUNDED,
        color : '#336699',
        width : 400,
        height : 60
    });
    self.add(contactsField);

    //Add other controls here

    return self;
}
module.exports = CreateNewMeetupWindow; 
```

您可以使用上面的任何一种方法。不要将这些方法混合在一起。

您可以使用以下链接作为参考

1.  [http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.Window-property-url](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.Window-property-url)
2.  [http://docs.appcelerator.com/titanium/latest/#!/api/Global-method-require](http://docs.appcelerator.com/titanium/latest/#!/api/Global-method-require)

# javascript - jQuery：函数如何仅通过点 (.)

> ID：14949029
> 
> 赞同：0
> 
> 时间：2013-02-19T02:51:10.683
> 
> 标签：javascript, jquery

自从我学习了 jQuery 之后，我一直想知道 jQuery 是如何通过添加点来一个接一个地执行一个函数的`.`（不知道它的真名，抱歉）；

```
$("#somediv").fadeIn("fast").css("background","blue"); 
```

当淡入淡出效果完成后，CSS 函数就会执行。就像你可以一个接一个地执行你想要的任何功能。

我怎样才能做到这一点？

注意：如果我命名错误，请纠正我，我只是想学习。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T02:55:37.850

它返回相同类型的对象，这是一个演示该技术的非常简单的示例：

```
var Counter = function(){
    this.val = 0;    
};

Counter.prototype.increment = function(){
    ++this.val;
    return this;
};

Counter.prototype.decrement = function(){
    --this.val;
    return this;
};

Counter.prototype.log = function(){
    console.log(this.val);
    return this;
};

var o = new Counter();
o.increment().increment().decrement().log().increment().log(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T02:56:08.293

它被称为[方法链接](http://en.wikipedia.org/wiki/Method_chaining)，其中方法返回它调用它的对象。

您还可以参考以下关于主题
[How can jQuery do method chaining](https://stackoverflow.com/questions/8721569/how-can-jquery-do-method-chaining)
[jquery chaining 如何工作的帖子？](https://stackoverflow.com/questions/7475336/how-does-jquery-chaining-work)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T02:53:59.463

简短的回答非常简单。每个方法都返回与传递给它的选择器匹配的元素集合，从而允许将同一集合传递给下一个链式方法。

寻找源代码`return this`

# excel - Mac Excel 2011 - 简单费用跟踪器的 IF 格式

> ID：14949031
> 
> 赞同：1
> 
> 时间：2013-02-19T02:51:49.210
> 
> 标签：excel

我正在为我妻子的业务创建一个简单的费用跟踪器。这只是“进钱出钱”的风格。

当我添加一个条目时，我将输入以下内容：1）日期 2）商家 3）交易类型（收入或费用）4）金额

我还有其他几个单元格，即“收入”和“费用”，这些单元格将跟踪正在发生的事情。

我想要发生的是，根据交易类型是“收入”还是“费用”，我希望“收入”或“费用”单元格进行计数和求和。

我的“IF”语句需要是什么样的？我试过： =IF(=income,,) 无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:35:28.807

最简单的方法是在单独的列中使用借方/贷方（费用/收入）并单独汇总，然后进行最终余额计算。我通常是这样做的。请参阅屏幕截图。

![在此处输入图像描述](../Images/2e4ea5683aee73194656904e75ae2775.png)

**编辑**

如果您想通过将收入/费用保持在一列中使其更加精美，那么您还可以使用条件格式，然后`SumIF()`再计算总数。请参阅下面的屏幕截图

A. 选择您的范围并创建数据验证。

![在此处输入图像描述](../Images/0ed5e1194c4527862e1a6334b7ee1d11.png)

B.设置两个条件格式规则如下图

![在此处输入图像描述](../Images/2e8f656f2530a0936c81e5e4949794eb.png)

这将根据您选择的内容（收入/费用）将单元格着色为绿色或红色

C. 最后使用公式计算收入/费用

![在此处输入图像描述](../Images/06192c487e7b38a24a88f21d66c911ba.png)

中的公式

D18`=SUMIF(C2:C16,"Income",D2:D16)`

D19`=SUMIF(C2:C16,"Expense",D2:D16)`

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T02:56:54.703

尝试以下操作：

```
=IF(transaction_type_cell_address="income",...,IF(transaction_type_cell_address="expense",...)) 
```

# ruby-on-rails - 如何用 link_to 替换 form_for？

> ID：14949034
> 
> 赞同：0
> 
> 时间：2013-02-19T02:52:28.797
> 
> 标签：ruby-on-rails, simple-form

我觉得我在滥用 form_for（和 simple_form_for）来更新记录的单个隐藏属性。这是一个例子：

```
<%= simple_form_for :present, url: present_path(list_item), method: 'put' do |f| %>
    <%= f.hidden_field :ordered, value: "1" %>
    <%= f.button :submit, "ordered", class: "btn btn-mini" %>
<% end %> 
```

本质上，这提供了一个按钮，用户可以按下该按钮将 a 标记`present`为“已订购”。在后端，它将属性更新为 current`:ordered`的值。`1``list_item`

我觉得这是一个作弊，因为它`form`本身并不合适。我宁愿有一个`link_to`单击时会更新属性的单个。

我`link_to`想需要`method:`注意更新属性。

`simple_form_for`是否可以用单个替换 my `link_to`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T03:03:35.543

它是，使用

```
link_to 'Ordered', present_path(list_item, ordered: 1), method: :put 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T05:14:23.667

尝试使用：

```
link_to 'Ordered', present_path(list_item, present: {ordered: 1}), method: :put 
```

# r - 使用 read_chunk('foo.R') 的 Lyx+knitr 代码外部化失败

> ID：14949036
> 
> 赞同：1
> 
> 时间：2013-02-19T02:52:37.613
> 
> 标签：r, knitr, lyx

我正在尝试使用`read_chunk()`将我的 R 代码与我的 Lyx 文件分开，如此[处](http://yihui.name/knitr/demo/externalization/)所述。

我的 Lyx 设置编译`knitr_minimal.pdf`from[`knitr_minimal.lyx`](https://github.com/yihui/knitr/tree/master/inst/examples)没有任何问题。

但后来我试图替换这个：

```
<<boring-random>>=
set.seed(1121)
(x=rnorm(20))
mx <- mean(x)
vx <- var(x)
@ 
```

> x 的第一个元素是 \Sexpr{x[1]}。它的平均值是 \Sexpr{mx}。

有了这个：

```
<<boring-random, cache=FALSE>>=
read_chunk('minimal.R')
@ 
```

> x 的第一个元素是 \Sexpr{x[1]}。它的平均值是 \Sexpr{mx}。

该脚本`minimal.R`保存在同一目录中，仅包含

```
set.seed(1121)
(x=rnorm(20))
mx <- mean(x)
vx <- var(x) 
```

我将修改后的文件另存为`knitr_minimal1.lyx`并编译它。该文件`knitr_minimal1.pdf`编译正常，但不是

> x 的第一个元素是 0.145。它的平均值是 0.3217。

我懂了

> x 的第一个元素是 eval(expr, envir, enclos) 中的错误：找不到对象“x”。它的意思是 eval(expr, envir, enclos) 中的错误：找不到对象“mx”。

我会很感激任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T07:38:22.257

您必须在代码中添加`minimal.R`与 LyX 文档中的块标签相对应的标签，否则`knitr`不知道在哪里插入代码。

```
## @knitr boring-random
set.seed(1121)
(x=rnorm(20))
mx <- mean(x)
vx <- var(x) 
```

如果您在`knitr` [网页](http://yihui.name/knitr/demo/externalization/)中打开 R 脚本，您将看到表单的几行注释`## @knitr label`。我将更新网页以澄清这一点。有另一种方法来指定标签，记录在`?knitr::read_chunk`.

LyX 文档的第二个问题是您将`read_chunk()`其放入块中，但在将其插入块*之前*`boring-random`您确实需要阅读代码。

 *```
<<setup>>=
read_chunk('minimal.R')
@
<<boring-random>>=
@ 
```*

# mysql - 为什么在使用“group by”等构造时无法使用“merge”算法创建 MySql 视图？

> ID：14949038
> 
> 赞同：1
> 
> 时间：2013-02-19T02:53:23.210
> 
> 标签：mysql, database, view, group-by

MySql 中有一条奇怪的规则，它基本上说如果你想创建一个视图并且你想在你的视图中使用诸如`GROUP BY, DISTINCT, UNION`等结构，你不能用`ALGORITHM = MERGE`! [在这里](http://dev.mysql.com/doc/refman/5.6/en/view-algorithms.html)阅读更多。

这基本上意味着如果您在 MySql 中创建一个视图并且您的视图中有类似 GROUP BY 的内容，如果您运行如下查询：

```
select * from MyView
where foo = 2 
```

然后 MySql 将从 MyView 读取所有行并将其放入临时表中，然后它将 where 子句（foo = 2）应用于临时表并返回结果。

问题是，如果您的视图有 1000 万行，它将获取所有 10M 行，然后应用 where 子句，这是非常低效的。

那么，有谁知道这背后的基本原理是什么？我知道 MS Sql Server 没有这样做，我敢打赌 Oracle 也没有这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-03T11:07:13.587

多年前，[在 MySQL 论坛上](http://forums.mysql.com/read.php?100,56681,56681)就工会观点提出了类似的问题。`MERGE`一位 MySQL 开发人员同意在视图上使用实现该算法应该很容易`UNION`，但 AFAIK 仍然没有实现！

# iphone - 我可以在 Xcode 上重新打开 .xcarchive 吗？

> ID：14949043
> 
> 赞同：7
> 
> 时间：2013-02-19T02:53:58.360
> 
> 标签：iphone, xcode, ipad, archive

是否可以在 Xcode 上重新打开 .xcarchive 文件？

我知道这并不常见，但我想完全按照提交到 App Store 的方式打开一个项目。我没有那个确切版本的备份，所以打开存档副本真的很棒！

在你问我为什么不直接从商店下载它之前，我必须说这个版本已经被批准并且正在等待我的发布。:)

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-19T03:50:16.220

A`xcarchive`是一个文件夹，其中包含（编译的）应用程序包、应用程序的`dSYM`（调试文件）以及`Info.plist`包含有关存档的元数据（例如应用程序的名称和存档的创建日期）。您可以通过在 Finder 中按住 Control 单击或右键单击它并选择“显示包内容”来查看 `xcarchive。

存档不包含您应用的源代码（除非您在项目配置中犯了严重错误）。

您应该使用 git 之类的版本跟踪系统来存储您的源代码。当您创建一个`xcarchive`分发版时，您应该在构建系统中标记当前版本的源代码，以便您可以轻松提取用于构建该存档的源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-13T10:33:17.370

您可以通过右键单击***ProjectName [Date Time].xcarchive并选择******Show Package Content*来查看它的内容。**

它包括三件事：

1.  **dSYMs**：dSYM 文件存储应用程序的调试符号。

2.  **Info.plist**：包含详细信息的属性列表，例如 ApplicationProperties、ArchiveVersion、CreationDate、Name、Scheme。

3.  **产品**：这包含您项目的应用程序文件。

![第1步](../Images/8b28942643dd77651b24e461f4d82cc3.png)

![第2步](../Images/b18076ea6a2dedf32ce5ead5df6a467d.png)

# c++ - 为数据库实现块存储

> ID：14949048
> 
> 赞同：0
> 
> 时间：2013-02-19T02:54:13.920
> 
> 标签：c++, memory, memory-management, block, database

对于一个数据库类，我们正在实现我们自己的数据库，我在如何在 C++ 中实现[块存储](http://en.wikipedia.org/wiki/Block_%28data_storage%29)时遇到了麻烦（其中每个块是 1024 字节）。

我们将每个数据库表存储为硬盘上可随机访问的块集合，其中第一个块是文件头，专用于元数据（块 0），每个后续块专用于存储表的行. 这些块将作为文件写入硬盘。我们还要有一个块作为“内存”缓冲区；我们可以读取和编辑缓冲区中的数据，当我们准备好时，我们将内存缓冲区写回磁盘。

我想我可以概念化内存缓冲区，但是我在如何将内存块写入文件时遇到了麻烦。我有两个想法，每个都有自己的困难：

## 理念一

创建一个正好为 1024 字节的类 MemoryBlock。每个 MemoryBlock 可以存储任意数据（文件头或表的行）。通过将 MemoryBlocks 数组写入文件，将每个表存储为单个文件。

**难点：** 我可以更新文件中间的单个块吗？我的理解是文件必须被覆盖或附加到。如果我有一个包含 3 个内存块（块 0-2）的文件，并且我想更新块 1 中的一行，我可以将块 1 拉到我的缓冲区中，编辑它，然后将其写回中间文件，*还是*我必须将整个文件拉入内存，编辑我想要的内容，然后覆盖原始文件？

## 想法 2

将每个块作为单独的文件存储在磁盘上。这将允许我随机访问任何块并将其写回磁盘，而不必担心表的其余部分

**难度：**我不确定这是否真的强制执行 1024 字节块大小。有没有办法要求每个文件不超过1024字节？

* * *

我对这两个想法都不满意，但我很感激任何有助于我更好地理解数据库管理系统中的块存储的输入。

* * *

**编辑：**正如@zaufi 指出的那样，1024 字节的块大小非常不典型。我的意思是在写这篇文章时输入 4096 字节块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:19:44.330

哦，伙计，您肯定需要阅读有关数据库内部结构的信息...

这是我的 5 美分：两个想法都不好！为什么你决定使用 1024 字节块？？？现代硬盘的物理扇区大小为 4096 字节！磁盘控制器有缓存4M-6M-8M-16M-...所以写1K只是浪费资源...

顺便说一句，在文件中间更新 smth 总是坏主意......但如果性能不是你关心的，你绝对可以这样做......

在重新发明轮子之前，请尝试研究各种 DMBS 中使用的典型方法......还有一个好的（简单）阅读来源：谷歌关于*leveldb*和 firends...... - 这肯定会给你一些想法！

# ruby-on-rails - ps辅助www | grep psql - postgres 没有与自制软件一起运行

> ID：14949053
> 
> 赞同：0
> 
> 时间：2013-02-19T02:54:39.427
> 
> 标签：ruby-on-rails, postgresql

我刚刚通过 Homebrew 安装了 Postgres 9.2.3，启动了一个 db，并输入了启动命令。它说“服务器正在启动”，但每当我尝试做任何事情时，它都会告诉我：

```
psql: could not connect to server: Connection refused
    Is the server running locally and accepting
    connections on Unix domain socket "/tmp/.s.PGSQL.5432"? 
```

以下是我已经尝试解决的问题：

1) 通过添加以下文本修复了我的 bash 配置文件中的路径：`export PATH=/usr/local/bin:$PATH`

2）卸载并重新安装了pg gem

3) 使用了 gem 的原始函数

4）尝试卸载并重新安装自制软件

5) 移除了 Mac 自带的旧版 postgres

6)`sudo chmod -R 777 /var/pgsql_socket/`

尽管如此，我所做的一切都不起作用。我什至尝试过使用 Postgres 官方安装程序和 Heroku 的 Postgres 应用程序。没有任何效果。

似乎我无法让 postgres 正常运行，因为当我运行时：`ps auxw | grep postgres`

我只是得到：

```
[MyName]        66744   0.0  0.0  2432768    596 s000  R+    8:47PM   0:00.00 grep postgres 
```

没有其他东西出现，这表明没有其他东西在运行。

我注意到我的 Mac 用户名是 Zephyr，但 postgres 使用的用户名是我的真实姓名。这可能是问题吗？

我这样做`which psql`，我得到了正确的路径：`/usr/local/bin/psql`

我一直试图让它工作几个小时，但似乎没有任何东西可以解决这个连接问题。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T03:17:57.667

我相信您需要手动设置 postgresql，这在某些情况下对用户来说是隐藏的。您可以尝试这些特定步骤，看看它是否有效（至少，在我的 Lion 中有效）。请记住，这是我的本地设置。我从二进制安装了 Postgresql。

1.  创建一个以`data`postgres 文件夹命名的新文件夹（我的文件夹位于`/opt/local/lib/postgresql90/data`）。确保你的`chmod`那个文件夹。`data`很容易记住。
2.  运行`initdb`以初始化 postgres 数据。我的是 `/opt/local/lib/postgresql90/bin/initdb -D /opt/local/lib/postgresql90/data`。
3.  启动服务器： `/opt/local/lib/postgresql90/bin/pg_ctl -D /opt/local/lib/postgresql90/data start`

提示：将这些路径放入环境变量中。

希望能帮助到你 ：）

# php - php数组排列

> ID：14949055
> 
> 赞同：0
> 
> 时间：2013-02-19T02:54:45.940
> 
> 标签：php, arrays, algorithm

嗨，我使用以下函数将字符串逗号分隔的 0 1 5、2 3 15、4 18 20 集合转换为数组：

```
$openHrs = explode(",", $openHrs['open_hours']); 
```

最终结果如下：

```
Array ( [0] => 0 1 5 [1] => 2 3 15 [2] => 4 18 20 ) 
```

在这个数组`0 1 5`中表示`Mon 1 am 5 am`和`4 18 20`表示`Thur 6 pm 8 pm`，所以第一个数字代表工作日休息 2 个数字代表 24 小时格式的小时，现在我如何将现有数组输出为这种格式？

```
Array ( [0] => Mon 1 am 5 am [1] => Tue 3 am 3 pm [2] => Thur 6 pm 8 pm ) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T03:05:59.063

我会使用 array_map 来获得过滤后的版本。您可以使用 mktime() 创建日期并使用 date() 对其进行格式化。我相信这应该是解决方案：

```
$filtered = array_map(function($incoming) {
    $parts = explode(' ', $incoming);
return
    date('D', mktime(0,0,0,1, $parts[0])) . ' ' .
    date('g a', mktime($parts[1])) . ' ' .
    date('g a', mktime($parts[2]));
}, $openHrs); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T03:05:05.337

对于**工作日**，我建议：

```
$weekday=array('Mon','Tue','Wed','Thu','Fri','Sat','Sun');    

foreach ($openHours As &$openHour) {
    $foo = explode(' ',$openHour);
    $openHour=$weekday[$foo].' '. // <-- write yourself a nice function to convert 24h to 12h, maybe there's something like this in PHP already?       
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T03:05:15.133

尝试这个：

```
// This will be used for the week days
$weekdays = array('Sun','Mon','Tue','Wed','Thu','Fri','Sat');

// Loop through each date
foreach($openHrs as &$temp) {
    // Separate the numbers
    $temp = explode(" ", $temp);

    // Change from a 24 hrs clock to a 12 hrs clock
    $temp[1] = $temp[1] > 12 ? $temp[1] - 12 . 'pm' : $temp[1] . 'am';
    $temp[2] = $temp[2] > 12 ? $temp[2] - 12 . 'pm' : $temp[2] . 'am';

    // Update the element
    $temp = $weekdays[$temp[0]] . ' ' . $temp[1] . ' ' . $temp[2];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T03:06:21.287

我会用空格作为分隔符再次分解每个 Arrayelement，这样你就有了更好的数组结构：

```
Array ( [0] => Array(0, 1, 5), [1] => Array(1, 3, 3) [2] => Array(4, 18, 18) ) 
```

如果你有这种结构，可能有几种方法。可能有 date() 和时间戳的解决方案，但老实说，我不确定这一点。另一个解决方案是。使用 Weekdays 定义另一个数组。

```
$weekdays = array("Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"); 
```

然后，您可以使用您拥有的数字作为该数组的索引来输出正确的工作日。您可以使用一点自制功能 ala 输出小时数：

```
function twentyFourHourToAmPM($number) {
    if ($number > 12) {
         return ($number - 12)." pm";
    } else {
         return $number." am";
    }
 } 
```

输出一切应该像这样工作：

```
foreach ($openHrs as $key => $value) {
    echo $weekdays[$value[0]]." ".twentyFourHourToAmPM($value[1])." - ".twentyFourHourToAmPM($value[2]);
} 
```

# ruby - 如何在 Ruby Selenium Webdriver 中的函数中传递特殊参数

> ID：14949056
> 
> 赞同：0
> 
> 时间：2013-02-19T02:54:46.377
> 
> 标签：ruby, selenium, webdriver

我正在使用 Selenium Webdriver Ruby 创建一个函数，以便等待在我在此函数中设置的时间内显示的元素

我的函数将有两个参数（一个**可选**参数和一个参数是**对象的定位器名称**）

所以，我的函数有两个参数，如下所示：

```
def wait_for_element_displayed(locator, options={})
    if options[:time]
       settime = options[:time]
    else
       settime= 60
    end
    @driver.find_element(locator).click
end 
```

所以，我会这样调用这个函数：**wait_for_element_displayed(:id=>"unique1", :time => "20")**

但是，当我尝试以这种方式调用此函数时出现错误，错误是：“TypeError：无法将字符串转换为精确数字”。

任何人都请帮助我如何将两个参数（如我的场景）传递给函数？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:08:19.483

几点建议：

`hash#fetch`如果您正在查找的键不存在，您可以使用它来设置默认值：

```
time = options.fetch(:time) { 60 } 
```

当两个参数都是散列并且您不区分它们时，Ruby 将很难解析您的输入。此外，您的错误让我认为您应该提供 20 作为整数而不是字符串。尝试调用这样的方法：

```
wait_for_element_displayed({:id => "unique1"}, { :time => 20 }) 
```

最后，我对 Selenium 了解不多，所以也许有人可以补充我最后一点。设置`settime`变量是否足以配置超时？

# dynamics-crm-2011 - 如何在 CRM 2011 中正确设置查找值？我才半途而废

> ID：14949057
> 
> 赞同：1
> 
> 时间：2013-02-19T02:54:53.917
> 
> 标签：dynamics-crm-2011

经过大量寻找答案和试验后，我终于设法拼凑出一些不会以完全失败告终的东西。可以在下面看到。

```
// set value in form field
function setLookup(lookupSchemaName, lookupGuid, lookupValue, lookupEntity)
{
    //var lookupSchemaName = 'uomid';
    //var lookupGuid   = '270BD3DB-D9AF-4782-9025-509E298DEC0A';
    //var lookupValue  = 'EACH';
    //var lookupEntity = 'unit';

    Xrm.Page.getAttribute(lookupSchemaName).setValue([{id: lookupGuid, name: lookupValue, entityType: lookupEntity}]);
} 
```

这附加到产品查找字段的 onChange 事件。它*有效*但不完全。问题是，当它运行时，我最终会得到一个包含单词“EACH”并以蓝色突出显示的查找字段（表示正在与它后面的记录建立链接；见下图）但未被完全接受。可以这么说，这是一种悬而未决的状态。

我期望得到的是实体的图标和可点击的值。我也无法保存表单，但我可以使用该字段的常规查找功能并使事情恢复正常。

![值插入后的字段状态](../Images/c993e4e9fd84df1da4c4f70ff055ff17.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T08:08:37.150

这里的问题是您使用的是显示名称`Unit of Measure`而不是逻辑名称。

正确的逻辑名称`Unit of Measure`是`uom`.

这可以通过以下方式在 CRM 中找到

`Settings > Customisations > Customise the System > Entities`

逻辑名称显示在实体页面上。

# ruby-on-rails - 声明式身份验证阻止实例变量

> ID：14949071
> 
> 赞同：0
> 
> 时间：2013-02-19T02:56:37.343
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, instance-variables, declarative-authorization

我在我的 rails 应用程序中使用声明式授权，并且我有以下控制器：

```
class OrganizationsController < ApplicationController
  filter_resource_access attribute_check: true

  def index
    @organizations = Organization.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @organizations }
    end
  end
end 
```

但是，当我尝试访问该操作的视图时，我 `undefined method 'each' for nil:NilClass`在尝试访问`@organizations`实例变量的行上收到错误消息。当我注释掉该`filter_resource_access`行时它起作用。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:32:22.967

错误是因为您的实例变量是 Nil，这就是为什么它为 nil:NilClass 都说未定义的方法。filter 是一种在控制器之前或之后运行的方法，在这种情况下，我不确定该方法的含义，但它不会让您访问数据，直到控制器是我的猜测之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:38:16.437

显然我忘记在我的 Gemfile 中包含 declarative_authorization gem。：耻辱：

现在一切正常。

# javascript - 如何根据传递给函数的参数更改变量名称？

> ID：14949075
> 
> 赞同：0
> 
> 时间：2013-02-19T02:56:58.307
> 
> 标签：javascript

我有一个函数`nameGenerator()`，它接受一个变量 ,`category`作为参数。

在定义这个函数之前，我有两个单词列表数组“对”：`djentWords1`and `djentWords2`，然后是`hardcoreWords1`and `hardcoreWords2`。

`nameGenerator()`定义以下变量：

1.  `firstNum`和`secondNum`
2.  `firstWord`和`secondWord`
3.  `bandName`

该函数在 0 和&或&的长度之间生成两个随机数 ( `firstNum`and ) 。我的问题是：我可以传递像“djent”或“hardcore”这样的参数，并基于该参数，它是否使用适当的数组长度来生成随机数？这是功能原样：`secondNum``djentWords1``djentWords2``hardcoreWords1``hardcoreWords2``nameGenerator()`

```
//First category: djent
var djentWords1 = ["Aman", "Soul", "Cloud", "Calculate", "Pythagoran"];
var djentWords2 = ["NaaKi", "Circlet", "Cykul", "Consciousness", "Daaka"];

//Second category: hardcore
var hardcoreWords1 = ["SMASH", "RAGE", "LIFE", "THESE", "FIRST", "BRASS", "LAST"];
var hardcoreWords2 = ["FIST", "FIGHTER", "BREAKER", "SMASHER", "RUINER", "DAYS", "CHANCE"];

function nameGenerator (category){
    //Randomize
    var firstNum = Math.floor(Math.random() * categoryWords1.length); //categoryWords1 would either be djentWords1 or hardcoreWords1, based on the parameter passed to the function
    var secondNum = Math.floor(Math.random() * categoryWords2.length); //categoryWords2 would either be djentWords2 or hardcoreWords2, based on the parameter passed to the function
    var firstWord = categoryWords1[firstNum]; //firstWord = the word whose position corresponds to the first randomly-generated number
    var secondWord = categoryWords2[secondNum]; //secondWord = the word whose position corresponds to the second randomly-generated number
    var bandName = firstWord + secondWord;
} 
```

在此先感谢 - 希望这不会太令人困惑。非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T03:01:16.917

为什么不使用对象（关联数组）？

```
var words = {
    djent: [
        ["Aman","Soul","..."],
        ["NaaKi","Circlet","..."]
    ],
    hardcore: [
        ["..."],
        ["..."]
    ]
};
function nameGenerator(category) {
    var bandName = words[category][0][Math.floor(Math.random()*words[category][0].length)]
       + words[category][1][Math.floor(Math.random()*words[category][1].length)];
    return bandName;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T03:10:50.367

您需要将这些变量声明为数组属性。试试这个 ：

```
var djent = {
    words1 : ["Aman", "Soul", "Cloud", "Calculate", "Pythagoran"],
    words2 : ["NaaKi", "Circlet", "Cykul", "Consciousness", "Daaka"]
}
var hardcore = {
    words1 : ["SMASH", "RAGE", "LIFE", "THESE", "FIRST", "BRASS", "LAST"],
    words2 : ["FIST", "FIGHTER", "BREAKER", "SMASHER", "RUINER", "DAYS", "CHANCE"]
}

function nameGenerator (category){
    var firstNum = Math.floor(Math.random() * window[category].words1.length)
       , secondNum = Math.floor(Math.random() * window[category].words2.length)
       , firstWord = window[category].words1[firstNum]
       , secondWord = window[category].words2[secondNum]
       , bandName = firstWord + secondWord;
    return bandName;
} 
```

# opencl - OpenCL 损坏的输入 WIN32，在 OSX Lion 上有效

> ID：14949077
> 
> 赞同：0
> 
> 时间：2013-02-19T02:57:11.667
> 
> 标签：opencl

我的 OpenCL 内核有问题。输入参数在传递给内核时已损坏。奇怪的是，这个完全相同的内核在 mac osx 上完美执行。一旦我开始将我的代码移植到 Windows（Windows 8 64 位），我就开始遇到这个问题。

我提供了一个使用我的相机结构的示例。x,y,z 坐标定义为 <0,0,200>。但是，当它们进入我的内核时，它们显示为 <0,-0.00132704, -0.00132704>。

我有一个接受两个结构的内核。

```
typedef struct{
cl_float d;
cl_float3 eye;
cl_float3 lookat;
cl_float3 u;
cl_float3 v;
cl_float3 w;
cl_float3 up;
}rt_cl_camera;

typedef struct {
float r;
float g;
float b;
} rt_cl_rgb; 
```

为了测试，我已经精简了我的内核。在追踪问题后，我注意到我的输入参数没有正确完成。但是，我已经确定我的输出正在正确地传回。

```
__kernel void ray_trace_scene( __global rt_cl_rgb* output,
                               __global rt_cl_camera* camera,
                              const unsigned int pcount)
{
     int pixel = get_global_id(0);
     if(pixel < pcount){
          output[pixel].r = camera->eye.x;
          output[pixel].g = camera->eye.y;
          output[pixel].b = camera->eye.z;
        }// End Pixel computation
}//End kernel 
```

我正在使用以下内容创建我的输入缓冲区：

```
cl_mem cam_input;
cl_uint cam_error;
cam_input = clCreateBuffer(context, CL_MEM_READ_ONLY, sizeof(rt_cl_camera), NULL, &cam_error); 
```

我也在检查以确保我的缓冲区已成功创建

```
 if (cam_error != CL_SUCCESS || !cam_input) {
    throw std::runtime_error(CLERROR_FAILED_DEVBUFF);
 } 
```

然后我使用以下内容将我的数据写入我的缓冲区。

```
cl_uint err = 0;
err = clEnqueueWriteBuffer(commands, cam_input, CL_TRUE, 0, sizeof(rt_cl_camera), cam_ptr, 0, NULL, NULL);
if (err != CL_SUCCESS) {
    throw std::runtime_error("Failed to write camera");
} 
```

最后将我的论点链接到适当的命令行插槽。请注意，插槽零用于我的输出。

```
err |= clSetKernelArg(kernel, 1,  sizeof(cl_mem), &cam_input); 
```

并检查一切是否成功..

```
 if (err != CL_SUCCESS) {
      throw std::runtime_error(CLERROR_FAILED_CMDARGS); 
  } 
```

在此过程的任何步骤中，我都没有收到来自 openCL 的任何错误消息。有没有人遇到过这个？任何帮助是极大的赞赏。

旁注 - 在我将局部变量传递给 GPU 之前，我打印出局部变量以确保它们正确有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T03:49:15.857

看起来是对齐/包装问题。尝试在结构中使用 float4 而不是 float3，并在最后移动 float d。

# boolean - 简化布尔表达式

> ID：14949080
> 
> 赞同：0
> 
> 时间：2013-02-19T02:57:58.127
> 
> 标签：boolean, boolean-expression, boolean-operations

你将如何简化这个布尔表达式？我不知道如何应用带有暗示符号的布尔定律。

(pq -> r)'

和

(p -> (q'r))'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T20:13:42.313

暗示规则如下，如[维基百科](http://en.wikipedia.org/wiki/Truth_table#Logical_implication)或任何其他与逻辑相关的书籍中所述：

```
p -> q = p' + q (not p or q) 
```

因此，当您将规则应用于示例时，分步解决方案将是：

`((pq)' + r)'`

分配外部否定（2个否定相互抵消，析取的否定是合取）：产生`pqr'`

`(pq -> r)' = pqr'`

当你理解这个答案时，你的第二个例子是可行的，所以我会把它留给你:)

# javascript - 如何在Javascript中存储整数索引数据？

> ID：14949082
> 
> 赞同：2
> 
> 时间：2013-02-19T02:58:11.897
> 
> 标签：javascript

我从事 PHP 工作多年，在为整数 ID 的对象在 JS 中创建一些更复杂的数据结构时遇到了麻烦。我需要构建一个对象来存储这些更简单的对象，这些对象以它们的整数 id 分层键控。因此，如果我有以下对象，每个对象都有一个唯一的整数 id：

部分，元素，项目，条目

在php中我会做类似的事情

```
$arr[$section_id][$element_id][$item_id][$entry_id] = $entry; 
```

在 javascript 中，这不起作用。我知道我可以在技术上将这些 ID 用引号括起来以强制使用它，但这似乎是个坏主意。类似地，我可以创建一个对象并使用带引号的整数方法，但这又看起来很老套。

现在我将数据存储在常规整数索引数组中，然后使用 caolan 的异步检测通过 ID 查找特定成员。这可行，但与 php 等效项相比似乎非常混乱。我希望在 JS 中有一种更清洁的方法来做到这一点。

蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:20:58.323

由于 javascript 无法保存带有字符串索引的数组，我使用这些：

```
var namespace = function(name, separator, container){
  var ns = name.split(separator || '.')
    , o = container || window
    , i = 0;
  while (i++ < ns.length) o = o[ns[i - 1]] = o[ns[i - 1]] || {};
  return o;
}

namespace(arr + '.' + section_id + '.' + element_id + '.' + item_id + '.' + entry_id) = entry;
// ex : namespace('arr.1.3.2.6') will product arr.1.3.2.6 object 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T03:38:48.207

这有点难看，但它会让你非常接近你想要的。

您可以向 JavaScript Array 类添加一个方法，如下所示：

```
Array.prototype.g = function(index) { 
    if (this[index] == undefined) { 
         this[index] = [];
    } 
    return this[index]; 
 } 
```

然后，要设置一些东西，你会这样做：

```
var test = [];
test.g(5).g(7)[5] = 1; 
```

不幸的是，对于最后一个条目，您必须记住使用常规符号来设置值。

你会像你期望的那样检索它：

```
test[5][7][5]; //1 
```

显然我只是凭空抽出 g ，你可以想出你自己的函数名。

免责声明：人们倾向于不赞成使用原型链扩展内置类型，但据我所知，大多数主要框架不再这样做，除非您或某些第三方 JS 使用相同的名称在其他地方扩展 Array，您应该没事的。

# c# - 当我只需要 XML 的子元素时，如何反序列化对对象的 XML 响应？

> ID：14949084
> 
> 赞同：3
> 
> 时间：2013-02-19T02:58:22.213
> 
> 标签：c#, xml, serialization, webrequest

我有以下从 WebRequest 返回的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<search>
  <total_items>5</total_items>
  <page_size>10</page_size>
  <page_count>1</page_count>
  <page_number>1</page_number>
  <page_items></page_items>
  <first_item></first_item>
  <last_item></last_item>
  <search_time>0.044</search_time>
  <events>
    <event id="E0-001-053379749-0">
      <title>Antibalas</title>
      <url>http://test.com</url>
      <description>stuff</description>
      <start_time>2013-01-30 20:00:00</start_time>
      <stop_time></stop_time>
      <tz_id></tz_id>
      <tz_olson_path></tz_olson_path>
      <tz_country></tz_country>
      <tz_city></tz_city>
      <venue_id>V0-001-000189211-5</venue_id>
      <venue_url>http://blah.com</venue_url>
      <venue_name>Troubadour</venue_name>
      <venue_display>1</venue_display>
      <venue_address>9081 Santa Monica Boulevard</venue_address>
      <city_name>West Hollywood</city_name>
      <region_name>California</region_name>
      <region_abbr>CA</region_abbr>
      <postal_code>90069</postal_code>
      <country_name>United States</country_name>
      <country_abbr2>US</country_abbr2>
      <country_abbr>USA</country_abbr>
      <latitude>34.0815917</latitude>
      <longitude>-118.3892462</longitude>
      <geocode_type>EVDB Geocoder</geocode_type>
      <all_day>0</all_day>
      <recur_string></recur_string>
      <calendar_count></calendar_count>
      <comment_count></comment_count>
      <link_count></link_count>
      <going_count></going_count>
      <watching_count></watching_count>
      <created>2012-12-24 11:40:43</created>
      <owner>evdb</owner>
      <modified>2013-01-14 21:08:04</modified>
      <performers>
        <performer>
          <id>P0-001-000000517-4</id>
          <url>http://test.com</url>
          <name>Antibalas</name>
          <short_bio>Afro-beat / Funk / Experimental</short_bio>
          <creator>jfisher</creator>
          <linker>evdb</linker>
        </performer>
      </performers>
      <image>
        <url>http://s4.evcdn.com/images/small/I0-001/000/070/311-5.jpeg_/antibalas-11.jpeg</url>
        <width>48</width>
        <height>48</height>
        <caption></caption>
        <thumb>
          <url>http://s4.evcdn.com/images/thumb/I0-001/000/070/311-5.jpeg_/antibalas-11.jpeg</url>
          <width>48</width>
          <height>48</height>
        </thumb>
        <small>
          <url>http://s4.evcdn.com/images/small/I0-001/000/070/311-5.jpeg_/antibalas-11.jpeg</url>
          <width>48</width>
          <height>48</height>
        </small>
        <medium>
          <url>http://s4.evcdn.com/images/medium/I0-001/000/070/311-5.jpeg_/antibalas-11.jpeg</url>
          <width>128</width>
          <height>128</height>
        </medium>
      </image>
      <privacy>1</privacy>
      <calendars></calendars>
      <groups></groups>
      <going></going>
    </event>
  </events>
</search> 
```

我创建了以下类：

```
public class EventSearch
{
    public int total_items { get; set; }
    public int page_size { get; set; }
    public int page_count { get; set; }
    public int page_number { get; set; }
    public int page_items { get; set; }
    public string first_item { get; set; }
    public string last_item { get; set; }
    public string search_time { get; set; }
    public List<Event> events { get; set; }
}

public class Event
{
    public string id { get; set; }
    public string title { get; set; }
    public string url { get; set; }
    public string description { get; set; }
    public DateTime start_time { get; set; }
    public string venue_id { get; set; }
    public string venue_url { get; set; }
    public string venue_name { get; set; }
    public string venue_address { get; set; }
    public string city_name { get; set; }
    public string region_name { get; set; }
    public string region_abbr { get; set; }
    public string postal_code { get; set; }
    public string country_name { get; set; }
    public string country_abbr { get; set; }
    public string country_abbr2 { get; set; }
    public double latitude { get; set; }
    public double longitude { get; set; }
    public List<Performer> performers { get; set; }
    public EventImage image { get; set; }
}

public class Performer
{
    public string id { get; set; }
    public string url { get; set; }
    public string name { get; set; }
    public string short_bio { get; set; }
}

public class EventImage
{
    public string url { get; set; }
    public int width { get; set; }
    public int height { get; set; }
    public Image thumb { get; set; }
    public Image small { get; set; }
    public Image medium { get; set; }
}

public class Image
{
    public string url { get; set; }
    public int width { get; set; }
    public int height { get; set; }
} 
```

在我调用的方法中，我想返回一个事件列表。这是我到目前为止所拥有的，这给了我错误：

> 没想到。

代码：

```
var request = WebRequest.Create(url);
var response = request.GetResponse();

if (((HttpWebResponse)response).StatusCode == HttpStatusCode.OK)
{
    // Get the stream containing content returned by the server.
    Stream dataStream = response.GetResponseStream();
    // Open the stream using a StreamReader.
    StreamReader reader = new StreamReader(dataStream);

    XmlSerializer serializer = new XmlSerializer(typeof(EventSearch));
    EventSearch deserialized = (EventSearch)serializer.Deserialize(reader);

    return deserialized.events;
} 
```

我不确定下一步该怎么做。我需要注释我的课程吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T03:45:43.320

是的，您需要添加一些内容`Attributes`以`classes`将 xml 元素映射到您的对象。

这应该可以，但是我必须更改一些东西，Xml 中的 DateTime 是错误的 fromat，所以我将它设为一个字符串（您可以根据需要进行解析），也是`page_items`一个`int`但它是 xml 中的一个空元素，您将无法反序列化它，如果它有可能为空，则必须更改为字符串。

```
[XmlType("search")]
public class EventSearch
{
    public int total_items { get; set; }
    public int page_size { get; set; }
    public int page_count { get; set; }
    public int page_number { get; set; }
   // public int? page_items { get; set; }
    public string first_item { get; set; }
    public string last_item { get; set; }
    public string search_time { get; set; }
    public List<Event> events { get; set; }
}

[XmlType("event")]
public class Event
{
    [XmlAttribute("id")]
    public string id { get; set; }
    public string title { get; set; }
    public string url { get; set; }
    public string description { get; set; }
    public string start_time { get; set; }
    public string venue_id { get; set; }
    public string venue_url { get; set; }
    public string venue_name { get; set; }
    public string venue_address { get; set; }
    public string city_name { get; set; }
    public string region_name { get; set; }
    public string region_abbr { get; set; }
    public string postal_code { get; set; }
    public string country_name { get; set; }
    public string country_abbr { get; set; }
    public string country_abbr2 { get; set; }
    public double latitude { get; set; }
    public double longitude { get; set; }
    public List<Performer> performers { get; set; }
    public EventImage image { get; set; }
}

[XmlType("performer")]
public class Performer
{
    public string id { get; set; }
    public string url { get; set; }
    public string name { get; set; }
    public string short_bio { get; set; }
}

[XmlType("image")]
public class EventImage
{
    public string url { get; set; }
    public int width { get; set; }
    public int height { get; set; }
    public Image thumb { get; set; }
    public Image small { get; set; }
    public Image medium { get; set; }
}

[XmlType("thumb")]
public class Image
{
    public string url { get; set; }
    public int width { get; set; }
    public int height { get; set; }
} 
```

我使用以下文件直接测试：

```
using (FileStream stream = new FileStream("C:\\Test.xml", FileMode.Open))
{
    XmlSerializer serializer = new XmlSerializer(typeof(EventSearch));
    EventSearch deserialized = (EventSearch)serializer.Deserialize(stream);
} 
```

但是您的`Stream`from`Webresponce`应该与`FileStream`

希望这可以帮助 ：）

# php - 为什么我不能在 codeigniter 连接查询中使用括号

> ID：14949085
> 
> 赞同：2
> 
> 时间：2013-02-19T02:58:25.270
> 
> 标签：php, mysql, codeigniter, activerecord

嗨，我正在使用 codeigniter 加入

```
$this->db->join 
```

我用了

```
$this->db->join ( $table2 . " as c","( c.3rdPartyID=a.ShopID OR c.3rdPartyID=a.ParentID OR c.ShopID=a.ShopID OR c.ShopID=a.ParentID )  AND c.3rdPartyID !=0 ", 'left' ); 
```

我也试过

```
$join_query = "( c.3rdPartyID=a.ShopID OR c.3rdPartyID=a.ParentID OR c.ShopID=a.ShopID OR c.ShopID=a.ParentID )  AND c.3rdPartyID !=0 ";

$this->db->join ( $table2 . " as c",$join_query, 'left' ); 
```

它给出了一个错误。

但是没有括号它可以正常工作，就像这样

```
$this->db->join ( $table2 . " as c"," c.3rdPartyID=a.ShopID OR c.3rdPartyID=a.ParentID OR c.ShopID=a.ShopID OR c.ShopID=a.ParentID   AND c.3rdPartyID !=0 ", 'left' ); 
```

但在我的情况下，我需要括号，我应该去正常的 mysql 查询，**codeignier 无法**做到这一点，请帮助...

这是错误

![在此处输入图像描述](../Images/3d720173156e0739b3b9e5bf9c808fc3.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-08-11T14:20:23.130

使用`false`. 前任：

```
$this->db->join ( $table2 . " as c","( c.3rdPartyID=a.ShopID OR c.3rdPartyID=a.ParentID OR c.ShopID=a.ShopID OR c.ShopID=a.ParentID )  AND c.3rdPartyID !=0 ", 'left', false ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T07:20:09.773

复制自 ellislab 论坛：

> 使用 Active Record join() 函数将无法进行该查询。有一行正则表达式用于查找连接条件的特定结构（通常为 table.something = table.somethingelse）。在重新创建您提供的连接语句的第一部分时，它将忽略除字母数字和句点 (.) 之外的任何字符。部分原因是 Active Record 使用了一个名为 _protect_identifiers 的私有函数，它在需要时将任何必要的信息添加到列名 (hostname.database.table.column) 中（参见文件 'DB_driver.php' 里面数据库系统文件夹以获得更好的描述）。在 table.column 之前添加其他字符会导致这些字符位于列名结构的中间，
> 
> 所以基本上，你不能使用 join() 函数。您可以使用 query() 函数并将其完全自己编写出来，或者扩展 Active Record 类并重写 join() 函数以满足您的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T03:20:23.047

任何一个

1) 将您的“AND c.3rdPartyID !=0”移动到单独的 ->where()

或者

2）编写您的查询和使用：

```
$sql = "Select...";
$this->db->query($sql); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-28T08:27:08.523

试试这个

```
 $this->db->from ( $table2 . " as c"," join on ( c.3rdPartyID=a.ShopID OR c.3rdPartyID=a.ParentID OR c.ShopID=a.ShopID OR c.ShopID=a.ParentID )  AND c.3rdPartyID !=0 "); 
```

# facebook - 当用户取消 Facebook 应用程序“允许访问”时重定向到其他页面

> ID：14949088
> 
> 赞同：0
> 
> 时间：2013-02-19T02:58:47.163
> 
> 标签：facebook, oauth-2.0

我们希望在取消允许访问后重定向用户。目前，它加载用户的新闻提要。任何想法如何或是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:14:25.620

我有一个类似的问题。在我从 Facebook 收到临时 access_token 后，我想将用户重定向到我的网站。虽然这是它授权应用程序（允许访问）的时候。但是，如果他不授予访问权限，则重定向应该相同。尝试做这样的事情：

```
<a id="link" align="center" target="_blank" href="https://www.facebook.com/dialog/oauth?client_id=CLIENT_ID&response_type=token&scope=PERMISSION_1,PERMISSION_2&redirect_uri=YOUR_WEBSITE"> TEXT </a> 
```

# save - 将当前文档另存为具有相同名称和路径的 .html

> ID：14949089
> 
> 赞同：1
> 
> 时间：2013-02-19T02:58:55.203
> 
> 标签：save, applescript

我正在为 FoldingText 编写一个[脚本](http://support.foldingtext.com/discussions/questions/357-script-to-generate-remark-formatted-html-file-form-foldingtext)，它将一个 FoldingText 大纲（基本上是一个 Markdown 文本文件）转换为一个[Remark](https://github.com/gnab/remark/)演示文稿（一个从 Markdown 文件制作幻灯片的 HTML 脚本）。该脚本有效，但我想进行以下改进：

我不想询问保存 HTML 文件的名称和位置，而是想获取当前文档的名称并将其保存为当前文件夹中的 HTML 文件（同名）。如果已经有一个具有该名称的文档（提供覆盖该文档或另存为具有不同名称的新文档），该脚本应该会很好地失败。

我用于写入文件的脚本来自这些论坛。第一部分是：

```
on write_to_file(this_data, target_file, append_data) -- (string, file path as string, boolean)
try
    set the target_file to the target_file as text
    set the open_target_file to ¬
        open for access file target_file with write permission
    if append_data is false then ¬
        set eof of the open_target_file to 0
    write this_data to the open_target_file starting at eof as «class utf8»
    close access the open_target_file
    return true
on error
    try
        close access file target_file
    end try
    return false
end try
end write_to_file 
```

第二部分是：

```
 set theFile to choose file name with prompt "Set file name and location:"
my write_to_file(finalText, theFile, true) 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:28:16.790

FoldingText 应该有某种方式来检索文档的路径。我没有找到任何免费的应用程序下载，所以我无法自己检查，但是如果您查看应用程序的字典，您应该可以找到它。

我的猜测是 FoldingText 文档有一个类似于“路径”或“文件”的属性：

你可能会得到这样的结果：

```
set theDocPath to file of front document of application "FoldingText"
tell application "Finder"
set theContainer to container of theFile
end tell
set newPath to (theContainer & "export.html) as string
repeat while (file newPath exists)
set newPath to choose file name with prompt "Set file name and location:"
end repeat

my write_to_file(finalText, newPath, true) 
```

# python - 在python中，如何使用正则表达式用括号替换方括号

> ID：14949090
> 
> 赞同：6
> 
> 时间：2013-02-19T02:58:59.143
> 
> 标签：python, regex

我有一个清单：`list = [1,2,3]`。我想将其转换为带括号的字符串：`string = (1,2,3)`。

目前我正在使用字符串替换`string = str(list).replace('[','(').replace(']',')')`。但我认为使用 regex.sub 有更好的方法。但我不知道该怎么做。非常感谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-19T03:02:29.737

如果您确实有一个列表，那么：

```
>>> s  = [1,2,3]
>>> str(tuple(s))
'(1, 2, 3)' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-19T03:01:15.330

你可以`string.maketrans`改用——我打赌它比一系列运行得更快，`str.replace`并且它可以更好地扩展到更多的单个字符替换。

```
>>> import string
>>> table = string.maketrans('[]','()')
>>> s = "[1, 2, 3, 4]"
>>> s.translate(table)
'(1, 2, 3, 4)' 
```

您甚至可以通过将可选的第二个参数传递给以下方法来使用它从原始字符串中删除字符`str.translate`：

```
>>> s = str(['1','2'])
>>> s
"['1', '2']"
>>> s.translate(table,"'")
'(1, 2)' 
```

`maketrans`在 python3.x 中，字符串模块消失了，您可以通过`str`内置 函数访问：

```
table = str.maketrans('[]','()') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-30T17:15:00.540

正如所有答案所证明的那样，有十亿种方法可以做到这一点。这是另一个：

```
my_list = [1,2,3]
my_str = "(%s)" % str(my_list).strip('[]') 
```

或使其可回收：

```
list_in_parens = lambda l: "(%s)" % str(l).strip('[]')
my_str = list_in_parens(my_list) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T03:04:34.693

`str([1,2,3]).replace('[','(').replace(']',')')`

应该对你有用，据我所知，它是向前和向后兼容的。

就可重用性而言，您可以对多种不同类型的字符串使用以下函数来更改它们的开头和结尾：

```
def change(str_obj,start,end):
    if isinstance(str_obj,str) and isinstance(start,str) and isinstance(end,str):
        pass
    else:
        raise Exception("Error, expecting a 'str' objects, got %s." % ",".join(str(type(x)) for x in [str_obj,start,end]))
    if len(str_obj)>=2:
        temp=list(str_obj)
        temp[0]=start
        temp[len(str_obj)-1]=end
        return "".join(temp)
    else:
         raise Exception("Error, string size must be greater than or equal to 2\. Got a length of: %s" % len(str_obj)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-27T23:58:47.600

所有你需要的是：

```
"(" + strng.strip('[]') + ")" 
```

它适用于单元素和多元素列表。

```
>>> lst = [1,2,3]
>>> strng = str(lst)
>>> "(" + strng.strip('[]') + ")"
'(1, 2, 3)'

>>> lst = [1]
>>> strng = str(lst)
>>> "(" + strng.strip('[]') + ")"
'(1)' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-19T03:03:00.657

试试这个：

```
'({0})'.format(', '.join(str(x) for x in list)) 
```

顺便说一句，命名你自己的变量不是一个好主意，`list`因为它与内置函数冲突。也`string`可能与同名模块发生冲突。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-19T03:07:09.220

如果您真的想使用正则表达式，我想这会起作用。但是其他发布的解决方案可能更有效和/或更易于使用。

```
import re

string = str(list)
re.sub(r"[\[]", "(", string)
re.sub(r"[\]]", ")", string) 
```

@mgilson 你的意思是这样的吗？

```
def replace_stuff(string):
    string_list = list(string)
    pattern = re.compile(r"[\[\]]")
    result = re.match(pattern, string)
    for i in range(len(result.groups())):
        bracket = result.group(i)
        index = bracket.start()
        print(index)
        if bracket == "[":
            string_list[index] = "("
        else:
            string_list[index] = ")"

    return str(string_list) 
```

它不太工作，由于某种原因 len(result.groups()) 总是 0 即使正则表达式应该找到匹配项。所以无法测试这是否更快，但因为我无法让它工作，所以我无法测试它。我现在必须去睡觉，所以如果有人能解决这个问题，请继续。

# ruby-on-rails - 在 has_many 上嵌套表单的 rails_admin 插件问题：通过关系

> ID：14949096
> 
> 赞同：4
> 
> 时间：2013-02-19T02:59:53.860
> 
> 标签：ruby-on-rails, ruby, rails-admin

我有一个似乎是千篇一律的问题，甚至在这里有一个相关的 wiki 页面：[https ://github.com/sferik/rails_admin/wiki/Has-many-%3Athrough-association](https://github.com/sferik/rails_admin/wiki/Has-many-%3Athrough-association)

我会尽量简短。我在我正在构建的应用程序中有一个 has_many :through 关系。涉及的模型如下：

运动员，AthleteRole，SportRole。

sport_roles 表有一个运动员可以拥有的通用角色列表，例如一垒手、二垒手等。运动员角色表是多对多连接表，其中包含一个运动员 ID 和一个运动 ID。

我的模型在下面用代码示例定义。我只是希望能够创建一个 Athlete 并将它们与 1+ 个运动角色相关联（这最终将在 player_roles 表中创建 1+ 个新记录）。它不应该向我询问运动员 ID，因为在后端调用 save 并且验证通过之前，运动员不会有 id。我不需要能够在这里创建新的 sport_roles。我们将假设正在创建的新运动员可以担任的所有角色都已预定义。

** 编辑 **

为了澄清，我的问题是，我如何**使用 rails_admin 插件为运动员选择一个或多个现有的运动角色，而不是独立的形式**？我不希望创建新的运动角色，但我希望能够在创建运动员时选择现有的一两个角色，并将该数据反映在运动员角色表中。

代码如下。

```
class Athlete < ActiveRecord::Base

   has_many :athlete_roles, :dependent => :delete_all, :autosave => true, :include => :sport_role
   has_many :sport_roles, :through => :athlete_roles

  attr_accessible :first_name
  attr_accessible :middle_name
  attr_accessible :last_name
  attr_accessible :suffix_name
  attr_accessible :birthdate

  # FOR RAILS_ADMIN
  # for a multiselect widget:
  attr_accessible :sport_role_ids
  accepts_nested_attributes_for :athlete_roles, :allow_destroy => true
  attr_accessible :athlete_roles_attributes
end

class AthleteRole < ActiveRecord::Base

  attr_accessible :athlete_id
  attr_accessible :sport_role_id

  # Associations
    belongs_to :athlete
    belongs_to :sport_role

    # validations
    validates :athlete_id,:presence=>true,:uniqueness=>{:scope => [:sport_role_id], :message => "is already associated with this Sport Role"}
  validates :sport_role_id,:presence=> true
end

class SportRole < ActiveRecord::Base

  has_many :athlete_roles, :dependent => :delete_all
  has_many :athletes, :through => :athlete_roles

  attr_accessible :name
  attr_accessible :short_name
  attr_accessible :description
  attr_accessible :created_at
  attr_accessible :updated_at

  attr_accessible :athlete_ids
  attr_accessible :athlete_role_ids

  validates :name, :presence => true
  validates :short_name, :presence => true
  validates :description,:length=>{:maximum => 500, :allow_nil => true}

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:28:15.563

我认为这里的问题在于您的模型。

像您所描述的模型是一个[拥有并属于许多关系](http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association)的模型，应该如下所示：

运动员：

```
class Athlete < ActiveRecord::Base
  has_and_belongs_to_many :sport_roles
end 
```

运动角色

```
class SportRole < ActiveRecord::Base
  has_and_belongs_to_many :athletes
end 
```

迁移应如下所示：

运动员

```
class CreateAthletes < ActiveRecord::Migration
  def change
    create_table :athletes do |t|
      t.timestamps    
    end
  end
end 
```

运动角色

```
class CreateSportRoles < ActiveRecord::Migration
  def change
    create_table :sport_roles do |t|
      t.timestamps    
    end
  end
end 
```

运动员与运动角色的关系

```
class SportRolesAthletes < ActiveRecord::Migration
  def change
    create_table :sport_roles_athletes , :id => false do |t|
      t.integer :sport_role_id
      t.integer :athlete_id
    end
  end
end 
```

# php - 如何在 MongoDB 中交叉引用数据

> ID：14949097
> 
> 赞同：2
> 
> 时间：2013-02-19T02:59:57.807
> 
> 标签：php, mongodb, mongodb-php

我正在尝试使用 PHP 和 MongoDB 制作我的第一个应用程序。

我要做的是列出给定区域的果树，并且我还想列出可以在某个区域种植的果树。

我来自 MySQL 背景，所以如果在 sql 中，我会有一个包含树信息的树表。比我有一个实际的树表，它将与树表连接在一个 ID 上，并且还有位置和其他信息。

但是在 Mongo 中，我不确定这是如何完成的，或者应该如何完成。

我想要的是一个树列表，用户可以参考他们自己的树。

任何关于这将如何很棒的帮助或指导。

```
$db->trees->fruittrees
$db->tress->userstrees 
```

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T08:18:41.003

但是，您的问题中缺少很多东西：

> 我要做的是列出给定区域的果树，并且我还想列出可以在某个区域种植的果树。

闻起来像地理空间查询：[http](http://docs.mongodb.org/manual/core/geospatial-indexes/) ://docs.mongodb.org/manual/core/geospatial-indexes/ 。

所以用户会有一个位置：

```
{
    name: 'sammaye',
    location: [107,206]
} 
```

每棵正在生长的树都可以利用一系列区域：

```
{
    name: 'apple tree'
    locations_of_growth: [[74,59],[67,-45]]
} 
```

您只需`$near`对用户进行与地球距离（[http://docs.mongodb.org/manual/core/geospatial-indexes/#distance-calculation](http://docs.mongodb.org/manual/core/geospatial-indexes/#distance-calculation)）相当的查询，即可计算出该用户附近存在哪些树木。

关于地理空间查询的问题是它们也可以通过进一步的信息来限制，所以假设你想让用户比较他们在该地区苹果树的叶子颜色，以找出该地区有多少苹果树有绿叶您可以简单地将其添加为树文档中的条件，并将其添加到您的`$near`.

地理空间查询有一个缺点，每个集合只能有一个索引（[http://docs.mongodb.org/manual/core/geospatial-indexes/#create-a-geospatial-index](http://docs.mongodb.org/manual/core/geospatial-indexes/#create-a-geospatial-index)）所以这个意味着如果您还希望提供可以在该区域种植的树木的列表，那么您可能需要两个集合，一个称为`other_trees`，一个称为`growable_species`。当您希望允许用户将他们的树与您查询的区域中的其他树进行比较`other_trees`时，并且当您希望允许用户查看您可以查询的区域中可以种植哪些树时`growable_trees`。

这当然只是这样做的一种方式。

### 编辑

我不会“推荐”使用 Doctrine，这取决于您，这取决于您的情况。Doctrine 是一个非常沉重且速度惊人的 ORM，并且有很多更快、更轻量级的 PHP ORM：http://docs.mongodb.org/ecosystem/drivers/php-libraries/[如果](http://docs.mongodb.org/ecosystem/drivers/php-libraries/)你想使用ORM 也就是说，也许你有一个完整的堆栈框架，或者你想单独使用驱动程序。

此外，MongoDB 不需要 JSON PHP（无论是什么）处理知识。来自 MongoDB 的所有结果作为 BSON 进入驱动程序，然后被反序列化为 PHP 中的标准字典，即关联数组。您在这里不需要 JSON PHP 处理知识。

与其他答案不同的是，对“将所有信息存储在单个 JSON 文档中”要非常谨慎，即因为 MongoDB 是 BSON 而不是 JSON，还因为应该非常仔细地考虑嵌入，并判断它是否适合您的场景. 实际上，您会发现`_id`在大多数情况下将 s 以外的任何内容嵌入到其他行可能会导致问题，但正如我所说，这取决于场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T03:42:51.720

在 Mongo 中建模数据时，我经常发现这取决于您将如何在 UI 中使用数据。Mongo 不擅长进行连接（如您所知），但您仍然可以进行连接。您可以在中间层或 UI 中执行它们。

因此，对于您的示例，我可能会执行以下操作：

树集合中的一棵树：

```
 {
   "_id" : 123,
   "name" : "Orange",
   "price" : 10,
   "climate" : "Any"
} 

```

用户：

```
 {
   "user" : "Bob",
   "selected_trees" : [ 123, 124, 156 ]
} 

```

然后在您的 UI 中，您加载 Bob 并调用可用的树集合来为他获取树的详细信息。

还有一种常见的做法是实际将完整的树对象包含在用户中。你会对这个来自关系背景的想法感到厌恶，但这在 Mongo 中很常见。您到处都有相同数据的副本。这是正常和预期的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T03:37:07.370

MongoDB 是一个面向文档的数据库。这意味着您应该设计与在 MySQL 或其他关系数据库中使用的模型完全不同的模型。例如，如果您想存储用户信息（包括他们拥有的树），您应该将所有这些信息存储在一个 JSON 文档中。如需更多参考，请阅读[此](http://docs.mongodb.org/manual/core/data-modeling/)

我还建议使用 Doctrine，它可以让您将对象存储到 MongoDB 中，因此对数据库进行建模会容易得多，您只需要创建一个代表对象的面向对象模型。请参考[这个页面](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/cookbook/blending-orm-and-mongodb-odm.html)

为此，您将需要 JSON php 处理和面向对象编程方面的知识。在从使用 MySql 到 No-Sql 数据库的过渡开始时总是有帮助的一件事是对数据库进行建模，然后对表进行[非规范化](http://en.wikipedia.org/wiki/Denormalization)，这样您将知道需要放入对象/文档中的所有信息。

希望这可以帮助你

# twitter-bootstrap - 在 jQuery datepicker buttonImage 属性中引用 Bootstrap 图标？

> ID：14949099
> 
> 赞同：5
> 
> 时间：2013-02-19T03:00:15.250
> 
> 标签：twitter-bootstrap, icons, angularjs, jquery-ui-datepicker, angular-ui

我应该为 jQuery datepicker`buttonImage`属性使用什么值？

我想使用带有 jQ​​uery datepicker 的 Bootstrap 日历图标。当像这样引用时，我可以在 html 页面中使用图标图像：

```
<i class=icon-calendar></i> 
```

当我使用[angular-ui](http://angular-ui.github.com/)包装器`ui-date`来包装 jQuery 日期选择器时：

```
 <div class="control-group">
        <label class="control-label" for="startDate">Start Date</label>
        <div class="controls">
            <input class="span2" id="startDate" type="text"
                   data-ng-model="formModel.startDate" 
                   data-ui-date="formModel.datePickerOptions"
                   data-ng-change="formModel.setAdjustmentDate()"
                   required >
        </div>
    </div> 
```

控制器将日期选择器选项定义为：

```
formModel.datePickerOptions = {
     dateFormat: 'yy-M-dd'
    ,changeMonth: true
    ,changeYear: true
    ,buttonImage: '<i class=icon-calendar></i>'
    ,buttonImageOnly: true
    ,showOn: "button"
}; 
```

我实际上应该为 buttonImage 插入什么值？

datepicker 期待一个类似这样的图像 url `{ buttonImage: "/images/datepicker.gif" }`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-25T08:48:27.897

我知道这是一个迟到的回复，但我发现这篇文章可以轻松完成同样的事情：

[http://jasenhk.wordpress.com/2013/03/09/jquery-datepicker-with-bootstrap-icon/](http://jasenhk.wordpress.com/2013/03/09/jquery-datepicker-with-bootstrap-icon/)

和 jsFiddle 来自同一篇文章：http: [//jsfiddle.net/jasenhk/B2txR/](http://jsfiddle.net/jasenhk/B2txR/)

作者建议使用“for”属性来匹配输入控件的id。

小提琴有一个简单的附加输入控件：

```
<div class="form-horizontal">
    <div class="control-group">
        <label for="date-picker-2" class="control-label">B</label>
        <div class="controls">
            <div class="input-append">
                <input id="date-picker-2" type="text" class="date-picker" />
                <label for="date-picker-2" class="add-on"><i class="icon-calendar"></i>
                </label>
            </div>
        </div>
    </div>
</div> 
```

然后我们只需要调用 datepicker 为：

```
$(".date-picker").datepicker(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-28T22:41:42.307

对于您正在做的事情，而不是弄乱 buttonImage 属性，我建议您只需将图标标记放入 buttonText 值

```
.value('ui.config', {
    date: {
        dateFormat : 'mm-dd-yy',
        minDate    : '+1d',
        showOn     : 'button',
        buttonText : '<i class="icon-calendar"></i>'
    }
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T04:37:29.120

您可以按以下方式排列图标，然后将 jquery 分配给它们。

jsfiddle [jsfiddle 日期选择器](http://jsfiddle.net/shail/7cPFg/2/)

```
<div data-date-format="dd-mm-yyyy" data-date="19-02-2013" id="datepick"class="input-append date">
<input type="text" readonly="" value="19-02-2013" size="16" class="span2">  
    <span class="add-on"><i class="icon-calendar"></i></span> 
```

```
<div class="control-group">
<label class="control-label" for="inputDatepicker">Datepicker</label>
<div class="controls">
    <div class="input-prepend">
        <button class="btn" type="button" id="datepick"><i class="icon-calendar"></i>
        </button>
        <input class="span2" id="appendedInputButton" type="text">
    </div>
</div> 
```

# algorithm - 是否可以在线性时间 O(n) 或 O(nlogn) 中计算

> ID：14949103
> 
> 赞同：0
> 
> 时间：2013-02-19T03:01:03.680
> 
> 标签：algorithm, sorting

我试图在 O(n) 或 O(n log n) 中找到一种方法来在以下情况下返回输出。如果我有一个包含 n 个元素的集合，并且我需要在集合中找到最小的数字集合，它加起来等于给定的数字。

例如，A=[0,9,1,2,5,4]，如果给定我的 q=6，那么我可能的组合是：(2+4)、(1+5) 并且应该返回 null 如果没有找到适当的子集？，这不是一个家庭作业问题，我只是想学习好的编程方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:34:17.500

一般问题是[http://en.wikipedia.org/wiki/Subset_sum_problem](http://en.wikipedia.org/wiki/Subset_sum_problem)。

据我们所知，没有多项式速度算法可以解决该问题，并且相信不存在。但是，存在一些很好的近似方法。

# php - 计算2个出勤时间戳

> ID：14949105
> 
> 赞同：1
> 
> 时间：2013-02-19T03:01:09.403
> 
> 标签：php, mysql, date, datetime

任何想法如何`datetime`在 MySQL 中计算出勤率。

例如：我想得到一个人一天工作的总小时数。在给定的。

MySQL结构：

```
-----------------------------------------------------
id   |   datetime         |   Status    |  employeeID
-----------------------------------------------------
1    | 18-Feb-13 8:00:00  |  Check in   |    100A
2    | 18-Feb-13 10:00:00 |  Check in   |    100A
3    | 18-Feb-13 17:00:00 |  Check Out   |    100A 
```

总小时数仍为 8 小时，不包括下午 12:00 的休息时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:06:22.053

这是进行日期数学运算的 PHP 方法：

```
$datetime1 = DateTime::createFromFormat('d-M-Y G:i:s', '18-Feb-13 8:00:00');
$datetime2 = DateTime::createFromFormat('d-M-Y G:i:s', '18-Feb-13 17:00:00');
$interval = $datetime1->diff($datetime2);
$elapsed = $interval->format('%h hours %i minutes %S seconds');
echo $elapsed; 
```

[看到它在行动](http://3v4l.org/08XWR)

你需要做更多的数学来处理休息，但这应该让你开始。

参考

*   [约会时间](http://www.php.net/manual/en/class.datetime.php)
*   [日期间隔](http://www.php.net/manual/en/class.dateinterval.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T03:15:50.017

如果您在人们离开时在哪里查看结帐状态，那么您可以进行自我加入。
就像是：

```
Select day(e.datetime) as day, employeeid, 
       (max(e.datetime) - min(s.datetime)) as timespend
from table1 e
inner join table1 s on (day(e.datetime) = day(s.datetime) and e.id <> s.id)
where s.status = 'check in' and e.status = 'check out'
group by day(e.datetime), employeeid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T03:16:03.130

假设每个工作的人在中午休息一小时，那么这个查询应该使用`TIMESTAMPDIFF`，按每个员工和每个日期分组：

```
SELECT TIMESTAMPDIFF(HOUR, 
           MIN(CASE WHEN Status = 'Check In' THEN DateTime END), 
           MAX(CASE WHEN Status = 'Check Out' THEN DateTime END))-1 as HoursWorked, 
  EmployeeId, 
  Date(DateTime)
FROM YourTable T
GROUP BY EmployeeId, Date(DateTime) 
```

这是一个示例[SQL Fiddle](http://sqlfiddle.com/#!2/9e3f4/4)。

# c++ - 创建双链表。初始化前 15 个节点

> ID：14949112
> 
> 赞同：0
> 
> 时间：2013-02-19T03:01:46.607
> 
> 标签：c++

我的插入方法应该让 P 作为第一个值 (0) 和 15 作为链接列表的最后一个值。虽然，当我打印出我的列表时，我必须通过 p->succ 而不是 p-prev 来打印出项目，它会打印出 15, 14, 13....；这是正确的吗？还是我执行我的功能错了？

```
 class Node{
      public:
           int value;       
           Node *succ;
           Node *prev;       
                  Node(int val, Node *s=NULL, Node *p=NULL)
                       :value(val),succ(s),prev(p){}

   Node *insert(Node *p,Node *n)
    {
        if(n==NULL)
           return p;
        if(p==NULL)
           return n;
        n->succ=p;
        if(p->prev)
           p->prev->succ=n;
        n->prev=p->prev;
        p->prev=n;           
           return n;
   }

   int main(int argc, char *argv[]) {
    Node *p= NULL;

    for(int i = 0; i<=15; i++){

    p = insert(p, new Node(i));
   }

while(p){
    cout<<p->value;
    head=p->succ;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:08:17.950

您在开始时添加节点。所以很明显，最后添加的将是第一个。如果您希望按照添加的顺序添加节点，则需要在最后添加节点。

```
Node *insert(Node *p,Node *n)
{
    Node * ptr;

    if(n==NULL)
       return p;

    if(p==NULL)
       return n;

    ptr = p;

    // Traverse to the end of the list
    while(ptr->succ)
    {
        ptr = ptr->succ;
    }

    ptr->succ = n;
    n->prev = ptr;

    return p;

} 
```

# node.js - node.js，错误：找不到模块'express'

> ID：14949118
> 
> 赞同：160
> 
> 时间：2013-02-19T03:02:12.687
> 
> 标签：node.js, express

我是 Node.js 的新手，尝试学习 express 来构建我的第一个 Web 应用程序。我被困在我的第一个示例代码上，需要一些帮助才能让它运行。在我发布这个问题之前，我确实搜索了堆栈溢出，发现了一些类似的问题但仍然无法解决它。

```
Error: Cannot find module 'express' 
```

我正在使用**mac os 10.8.2**。我使用`nvm`.

```
node.js: 0.8.20 path to node:    /Users/feelexit/nvm/v0.8.20/bin/node
path to express: /Users/feelexit/nvm/node_modules/express 
```

这是我的示例代码：此文件位于：

**/Users/feelexit/WebstormProjects/learnnode/node_modules/index.js**

```
var express = require('express');
var app = express();
app.get('/', function(req, res){
    res.send('welcome to express');
});
app.listen(3000); 
```

当我尝试运行此命令时，`node index.js`我收到以下错误消息，请帮助我修复它。

谢谢你。

```
Error: Cannot find module 'express'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (/Users/feelexit/WebstormProjects/learnnode/node_modules/index.js:1:81)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10)
feelexits-Mac:node_modules feelexit$ 
```

**更新以回答 chovy 的问题：**

```
feelexits-Mac:~ feelexit$ npm install
npm ERR! install Couldn't read dependencies
npm ERR! Error: ENOENT, open '/Users/feelexit/package.json'
npm ERR! If you need help, you may report this log at:
npm ERR!     <http://github.com/isaacs/npm/issues>
npm ERR! or email it to:
npm ERR!     <npm-@googlegroups.com>

npm ERR! System Darwin 12.2.0
npm ERR! command "/Users/feelexit/nvm/v0.8.20/bin/node" "/Users/feelexit/nvm/v0.8.20/bin/npm" "install"
npm ERR! cwd /Users/feelexit
npm ERR! node -v v0.8.20
npm ERR! npm -v 1.2.11
npm ERR! path /Users/feelexit/package.json
npm ERR! code ENOENT
npm ERR! errno 34
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /Users/feelexit/npm-debug.log
npm ERR! not ok code 0 
```

* * *

## 回答 #1

> 赞同：214
> 
> 时间：2013-07-18T11:03:33.207

它说

```
Cannot find module 'express' 
```

你有安装快递吗？如果没有，那么运行它。

```
npm install express 
```

并再次运行您的程序。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-11-01T18:03:29.000

在您的终端中表达后，然后执行

```
npm install 
```

安装所有依赖项。

然后你可以做 node app 来运行服务器。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2013-11-22T10:23:09.877

检查您是否安装了`express`模块。如果没有，请使用以下命令：

```
npm install express 
```

如果您的`node_modules`目录在另一个地方，请设置`NODE_PATH`环境变量：

```
set NODE_PATH=your\directory\to\node_modules;%NODE_PATH% 
```

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2018-05-08T14:55:18.050

```
npm install --save express
```

这对我有用。只需再次运行 express.js 安装。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2013-11-30T20:19:43.333

从您的应用程序目录中安装 npm install 将解决问题，因为它将安装所需的所有内容

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-11-07T21:56:36.847

除非您设置**Node_PATH**，否则唯一的其他选择是在 app 目录中安装 express，例如`npm install express --save`. Express 可能已经安装，但`node`由于某种原因找不到它

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-11-23T02:20:29.990

在这里挖掘一个旧线程但我遇到了同样的错误，我通过导航到我的 NodeApp 所在的目录并运行来解决`npm install -d`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-07-18T11:13:32.447

如果您的主文件位于`/Users/feelexit/WebstormProjects/learnnode/node_modules/index.js`然后 express 需要位于，因为当路径不以或（[更多信息here](http://nodejs.org/api/modules.html#modules_file_modules)）开始时`/Users/feelexit/WebstormProjects/learnnode/node_modules/node_modules`，节点总是在`./node_modules`（及其内部文件夹）中查找模块`./``/`

我想你错过了将你的主文件放在模块文件夹中

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-02-19T13:06:18.933

您的 express 模块位于与项目不同的目录中。`require()`这可能是问题所在，因为您正在本地尝试它。尝试将您的 express 模块从*/Users/feelexit/nvm/node_modules/express*移动到*/Users/feelexit/WebstormProjects/learnnode/node_modules/express*。[此信息](https://npmjs.org/doc/folders.html)可以为您提供有关 node_module 文件结构的更多详细信息。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-08-26T00:11:38.280

对于这种情况，使用您的 cmd 提示符运行 npm install express 命令，以找到您要运行该程序的相应文件夹。示例 我想在 F:\nodeSample 中运行 express 模块程序 server.js。因此，在该特定文件夹中运行“npm install express”，然后运行 ​​server.js

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-01-19T21:20:21.427

安装节点模块时有时会出错试试这个：

1.  删除 node_modules
2.  npm 安装

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-10-25T14:15:15.093

在极少数情况下，npm 缓存可能会损坏。对我来说，有效的是：

```
npm cache clean --force 
```

通常，包管理器会自行检测损坏并重新获取，因此通常不需要这样做。但是，在我的情况下，Windows 10 崩溃了几次，我怀疑这可能是在获取操作期间。希望它可以帮助某人！

更多信息：[https ://docs.npmjs.com/cli/cache](https://docs.npmjs.com/cli/cache)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-08-22T15:48:31.157

在与源代码 nodejs 文件相同的目录中运行`npm install express body-parser cookie-parser multer --save`命令以解决此问题。P / s：运行命令后检查您的目录以了解更多信息！

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-02-24T02:05:07.500

我有同样的问题。我的问题是在安装 express 之前，我必须在命令行上更改为 Node.js 项目目录。

```
cd /Users/feelexit/WebstormProjects/learnnode/node_modules/ 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-11-08T11:38:33.340

`npm ERR! Error: ENOENT, open '/Users/feelexit/package.json'`

发生这种情况是由于 npm 工作时缺少权限或未链接的文件。

这意味着，`npm`以该用户身份执行没有足够的权限从文件读取/写入，在本例中为 package.json。

尝试`sudo`在整个命令之前添加 - 它应该可以解决。

`$ sudo npm install -g express`
`$ Password:*******`

密码将是您的 mac 的管理员密码。

`-g`flag 将在 node 的全局上下文中安装这个模块（express）——这意味着 node 将/应该`express`从任何 js 文件中识别模块，而不必提供正在使用的模块的完整路径。

希望这可以帮助！！

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-05-10T17:00:19.473

你有没有尝试过

```
npm install 
```

如果您专门寻找快递

```
npm install --save express 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-04-17T10:05:00.580

```
D:\learn\Node.js\node app.js
module.js:549
    throw err;
    ^

Error: Cannot find module 'body-parser'
    at Function.Module._resolveFilename (module.js:547:15)
    at Function.Module._load (module.js:474:25)
    at Module.require (module.js:596:17)
    at require (internal/module.js:11:18) 
```

有时版本与 package.json 不匹配通过检查 package.json 来解决问题，然后使用以下命令： npm install body-parser@1.13.2 它为我解决了。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-04-17T16:24:24.290

我遇到了一个类似的问题，最后是一些旧的依赖关系弄乱了我的 Heroku 服务器。

在我的项目文件夹中，我运行了：

```
npm uninstall
npm install 
```

我希望它有帮助

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-07-25T00:26:14.570

我猜这是 Colt Steele 的 Web 开发课程的课程作业......我一直在寻找同样的答案，为什么我也会遇到这个错误...... Colt 没有这么说，但你拿了 node_module 文件夹并移动进入你正在工作的新文件夹......这对我有用。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-10-31T02:43:38.373

在我的情况下，我试图运行与您相同的方式，但使用的是 nodemon。错误是一样的，但问题是因为在我的 package.json 我添加了 app.js 而不仅仅是 app

“脚本”：{“开发”：“nodemon 应用程序”}

# java - ListView 中的每个其他图标都没有显示

> ID：14949119
> 
> 赞同：0
> 
> 时间：2013-02-19T03:02:24.233
> 
> 标签：java, android, listview, icons

我有一个带有自定义 ArrayAdapter 的列表，它在列表项旁边加载图标，除了每个其他列表项都显示一个图标

```
public class MyAdapter extends ArrayAdapter<String>{
    Context mContext;

    public MyAdapter(Context context, int resource, int textViewResourceId, String[] strings) {
        super(context, resource, textViewResourceId, strings);
        this.mContext = context;
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View row = inflater.inflate(R.layout.filetypeslist, parent, false);
        String[] items = mContext.getResources().getStringArray(R.array.filetypes);

        ImageView iv = (ImageView) row.findViewById(R.id.imageView1);
        TextView tv = (TextView) row.findViewById(R.id.tvtype);

        tv.setText(items[position]);

        if(items[position].equals("txt")){
            iv.setImageResource(R.drawable.txticon);//not showing up
        }else if(items[position].equals("HTML")){
            iv.setImageResource(R.drawable.htmlicon);
        }else if(items[position].equals("JS")){
            iv.setImageResource(R.drawable.javascripticon);//not showing up
        }else if(items[position].equals("CSS")){
            iv.setImageResource(R.drawable.cssicon);
        }

        return row;
    } 
```

}

```
public class NewFile extends ListActivity {
    EditTextLineNumbers newet;
    LayoutInflater mInflater;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.new_file);
        setListAdapter(new MyAdapter(this, 
                android.R.layout.simple_list_item_1, R.id.tvtype, 
                getResources().getStringArray(R.array.filetypes)));
    }

}

***EDIT***
public View getView(int position, View convertView, ViewGroup parent) {

        View row = convertView;
        if (row == null) {
            LayoutInflater inflater = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater.inflate(R.layout.filetypeslist, parent, false);
        }
        String[] items = mContext.getResources().getStringArray(R.array.filetypes);

        ImageView iv = (ImageView) row.findViewById(R.id.imageView1);
        TextView tv = (TextView) row.findViewById(R.id.tvtype);

        tv.setText(items[position]);

        if(items[position].equals("txt")){
            iv.setImageResource(R.drawable.txticon);
        }else if(items[position].equals("HTML")){
            iv.setImageResource(R.drawable.htmlicon);
        }else if(items[position].equals("JS")){
            iv.setImageResource(R.drawable.javascripticon);
        }else if(items[position].equals("PHP")){
            iv.setImageResource(R.drawable.phpicon);
        }else if(items[position].equals("CSS")){
            iv.setImageResource(R.drawable.cssicon);
        }

        return row;
    }

<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <string-array name="filetypes">
        <item name="txt">Text</item>
        <item name="html">HTML</item>
        <item name="js">Javascript Class</item>
        <item name="css">CSS</item>
        <item name="php">PHP Class</item>
    </string-array>
</resources> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T04:41:20.683

您的比较链`String.equals`没有检查未显示的两个值的正确值。您正在检查“JS”而不是“Javascript 类”和“txt”而不是“文本”。

除此之外，我有几点建议：

1.  使用 ArrayAdapter，您可以通过调用来获取当前行的字符串`getItem(position)`。
2.  在您的资源中创建一个`int-array`并让每个项目指向与您的项目相对应的可绘制对象`string-array`。
3.  让您的适配器存储这些数组的本地副本，而不是每次`getView`调用时都从资源中构建它们。相同的`LayoutInflater`（在适配器的构造函数中构建这些）。然后你可以得到drawable id`intArray[position]`而不是一个`String.equals()`比较链。
4.  正如 Shoshi 指出的那样，尽可能使用 convertView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T03:34:32.537

你应该这样使用：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

View row = convertView;
if (view == null) {
    LayoutInflater inflater = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    row = inflater.inflate(R.layout.filetypeslist, parent, false);
}

...............
...............
} 
```

# html - 如果在 doctype 声明中未提及，默认 DTD 是什么？

> ID：14949124
> 
> 赞同：1
> 
> 时间：2013-02-19T03:02:49.710
> 
> 标签：html

在我的页面中，文档类型声明为：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> 
```

没有明确指定 DTD。我想知道在 IE 中哪个 DTD 会被默认？

似乎它的行为与

```
"http://www.w3.org/TR/html4/loose.dtd" 
```

因为在我添加了loose.dtd 之后我在页面中的表格被破坏了。谁能帮忙解释一下？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T04:20:09.213

您的里程会因浏览器和版本而异，但以下是它的短处：

据我所知，浏览器实际上并没有花任何精力来获取和使用 URL 中的 dtd，或者以任何方式验证代码。结果，您的网页将在没有 doctype 声明、损坏的 doctype 声明以及许多其他损坏的形式的情况下“正常”工作。

当不通过验证器运行代码时，在代码顶部提供 doctype 定义的主要原因是让浏览器退出怪癖模式并进入标准合规模式，这是 IE < 7 的历史灾难......

*在这里讨论怪癖和标准模式有点超出了范围，所以好奇的人应该去维基百科： [http ://en.wikipedia.org/wiki/Quirks_mode](http://en.wikipedia.org/wiki/Quirks_mode)*

Web 浏览器使用它们自己的相对任意的标准来根据 doctype 切换模式。当您的 DTD 缺少 URL 时，您可能会遇到 IE 处于**怪异模式**，而当您添加 URL 时会遇到**标准模式。**

您可能应该旨在包含完整的声明，包括 URL，并通过 W3C 验证器 [1] 运行您的代码以进行良好的衡量。

使用有效代码和完整文档类型 [2] 修复渲染问题。Quirks 模式仅用于向后兼容，以便未维护的网站将尽可能长时间地继续按预期呈现。
如果您的网页仅在 quirks 模式下按预期呈现，**则您的网页已损坏**。

**旁注：您应该认真质疑为什么在 2013 年使用 4.01 过渡版本。**

[1] [http://validator.w3.org/](http://validator.w3.org/)
[2] [http://www.w3.org/QA/2002/04/valid-dtd-list.html](http://www.w3.org/QA/2002/04/valid-dtd-list.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T06:11:03.033

根据 SGML 标准，您的文档类型声明通过命名来指定文档类型定义，如 W3C 注册的那样。但是，根据[HTML 4.01 规范](http://www.w3.org/TR/REC-html40/struct/global.html#h-7.2)，文档必须具有三种可选文档类型声明之一，并且它们都包含 URL。

这只是理论，因为浏览器实际上并不读取 DTD。[他们在doctype sniffing](http://hsivonen.iki.fi/doctype/)中将文档类型声明视为魔术字符串。但是，在大多数浏览器中，浏览器模式的选择受 HTML 4.01 过渡的魔术字符串中是否存在 URL 的影响。当它不存在时，它们以[Quirks Mode](http://www.cs.tut.fi/~jkorpela/quirks-mode.html)运行。当它存在时，大多数浏览器以“标准模式”或“几乎标准模式”运行。

怪癖模式意味着大量不同的怪癖，因此从它切换到“标准模式”的效果可能意味着几乎任何事情（从没有效果到完全灾难）。这种切换通常需要仔细检查（如果不重写）整个文档。

# c++ - cxx 11 线程析构函数

> ID：14949126
> 
> 赞同：0
> 
> 时间：2013-02-19T03:03:04.217
> 
> 标签：c++, multithreading, c++11, destructor

```
class Obj1 {
  public:
  Obj1(int input):input_(input) {
    cout << __func__ << endl;
    p = new int;
  }
  ~Obj1() {
    cout << __func__ << endl;
    if (p != NULL) {
      delete p;
      p = NULL;
    }
  }
  void operator()() {
    cout << input_ << endl;
  }

  private:
  int input_;
  int* p;
};

int main(int argc, char** argv) {
  thread t{Obj1{10}};
  t.join();
  return 0;
} 
```

这段代码不像我想象的那样工作。为什么 Obj1 的析构函数要被调用 3 次？并且会有腐败，因为双重免费。如何修复此代码？

环境：Ubuntu 10.04.4 LTS，gcc4.7.2

# ios - 如何从 UIImageView 压缩图像？

> ID：14949132
> 
> 赞同：3
> 
> 时间：2013-02-19T03:03:36.397
> 
> 标签：ios, ios5, ios6

我正在使用 UIImageView * 图像中的图像上传到服务器。我使用类似的代码， `NSData *imageToUpload = UIImageJPEGRepresentation(image.image, 90);` 但我想将图像压缩到小于 2MB。如何从 UIImageView 压缩图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T04:37:26.707

这是您需要的一段代码

```
CGFloat compression = 222.0f;
CGFloat maxCompression = 202.1f;
int maxFileSize = 160*165; //fill your size need

NSData *imageDat = UIImageJPEGRepresentation(image.image, compression);

while ([imageDat length] > maxFileSize && compression > maxCompression)
{
    compression -= 0.1222;
    imageDat = UIImageJPEGRepresentation(decodedimage.image, compression);
}
NSLog(@"image compressed success");

[image setImage:[UIImage imageWithData:imageDat]]; 
```

希望这可以帮助 ！！！

# prolog - 解决 8 个难题启发式

> ID：14949133
> 
> 赞同：0
> 
> 时间：2013-02-19T03:03:40.270
> 
> 标签：prolog, sliding-tile-puzzle

我对 prolog 很陌生，并且在使用 8 个谜题启发式方法时遇到了麻烦。我不确定如何比较两个列表（目标和开始）并找出我的 h 值。我要做的是发送 compare_list 两个列表目标并开始。它应该比较每个头，如果它们不相等，则在总数中加 1，否则递归调用它。我不确定如何在 prolog 中执行 if else 语句。

```
%T1,T2,T3 top
%M1,M2,M3 middle
%B1,B2,B3 bottom

goal([1/2/3/8/0/4/7/6/5]).

%Top row movements
%shift right
shift([T1/0/T3/M1/M2/M3/B1/B2/B3],
      [0/T1/T3/M1/M2/M3/B1/B2/B3]).

shift([T1/T2/0/M1/M2/M3/B1/B2/B3],
      [T1/0/T2/M1/M2/M3/B1/B2/B3]).

%shift left
shift([T1/T2/T3/M1/M2/M3/B1/B2/B3],
      [T1/T2/T3/M1/M2/M3/B1/B2/B3]).

shift([T1/T2/T3/M1/M2/M3/B1/B2/B3],
      [T1/T2/T3/M1/M2/M3/B1/B2/B3]).

%shift down
shift([T1/T2/T3/0/M2/M3/B1/B2/B3],
      [0/T2/T3/T1/M2/M3/B1/B2/B3]).

shift([T1/T2/T3/M1/0/M3/B1/B2/B3],
      [T1/0/T3/M1/T2/M3/B1/B2/B3]).

shift([T1/T2/T3/M1/M2/0/B1/B2/B3],
      [T1/T2/0/M1/M2/T3/B1/B2/B3]).

%Middle row movements
%shift right
shift([T1/T2/T3/M1/0/M3/B1/B2/B3],
      [T1/T2/T3/0/M1/M3/B1/B2/B3]).

shift([T1/T2/T3/M1/M2/0/B1/B2/B3],
      [T1/T2/T3/M1/0/M2/B1/B2/B3]).

%shift left
shift([T1/T2/T3/0/M2/M3/B1/B2/B3],
      [T1/T2/T3/M2/0/M3/B1/B2/B3]).

shift([T1/T2/T3/M1/0/M3/B1/B2/B3],
      [T1/T2/T3/M1/M3/0/B1/B2/B3]).

%shift up
shift([0/T2/T3/M1/M2/M3/B1/B2/B3],
      [M1/T2/T3/0/M2/M3/B1/B2/B3]).

shift([T1/0/T3/M1/M2/M3/B1/B2/B3],
      [T1/M2/T3/M1/0/M3/B1/B2/B3]).

shift([T1/T2/0/M1/M2/M3/B1/B2/B3],
      [T1/T2/M3/M1/M2/0/B1/B2/B3]).

%shift down
shift([T1/T2/T3/M1/M2/M3/0/B2/B3],
      [T1/T2/T3/0/M2/M3/M1/B2/B3]).

shift([T1/T2/T3/M1/M2/M3/B1/0/B3],
      [T1/T2/T3/M1/0/M3/B1/M2/B3]).

shift([T1/T2/T3/M1/M2/M3/B1/B2/0],
      [T1/T2/T3/M1/M2/0/B1/B2/M3]).

%bottom row movements

%shift right
shift([T1/T2/T3/M1/M2/M3/B1/0/B3],
      [T1/T2/T3/M1/M2/M3/0/B1/B3]).

shift([T1/T2/T3/M1/M2/M3/B1/B2/0],
      [T1/T2/T3/M1/M2/M3/B1/0/B2]).

%shift left
shift([T1/T2/T3/M1/M2/M3/0/B2/B3],
      [T1/T2/T3/M1/M2/M3/B2/0/B3]).

shift([T1/T2/T3/M1/M2/M3/B1/0/B3],
      [T1/T2/T3/M1/M2/M3/B1/B3/0]).

%shift up 
shift([T1/T2/T3/0/M2/M3/B1/B2/B3],
      [T1/T2/T3/B1/M2/M3/0/B2/B3]).

shift([T1/T2/T3/M1/0/M3/B1/B2/B3],
      [T1/T2/T3/M1/B2/M3/B1/0/B3]).

shift([T1/T2/T3/M1/M2/0/B1/B2/B3],
      [T1/T2/T3/M1/M2/B3/B1/B2/0]).

h(State):-
    compare_list(State, goal, 1).

compare_list([H1 | T1], [H2 | T2], I) :-
    H1 \= H2,
    compare_list(T1, T2, I1),
    I is I1 +1. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:57:11.377

您肯定使用了错误的语法：列表使用*逗号*作为分隔符。例如

```
goal([1,2,3,8,0,4,7,6,5]). 
```

我认为您可以进行全局搜索和替换，一次进行所有更改。之后 compare_list/3 可以开始工作，但我想知道 counter 的实用性`I`。似乎没用。

而且我无法发现您*在哪里*应用班次。那么我不确定你是否走上了解决方案的正确轨道。

如果您有兴趣，我几天前发布了[这个](https://stackoverflow.com/a/14769596/874024)答案。对不起，它和你的完全不同。

# javascript - 我正在编写一个 jQuery 插件，它将为页面上的每个图像添加一个父 div。我应该考虑哪些 CSS 问题？

> ID：14949137
> 
> 赞同：1
> 
> 时间：2013-02-19T03:04:33.140
> 
> 标签：javascript, jquery, css

我正在编写我的第一个 jQuery 插件，部分功能涉及在页面上的每个图像周围动态生成一个“框架 div”。框架必须“贴合”图像周围，因为它充当动态添加的绝对定位叠加图像的相对父级。

我希望这显然不引人注目。我可以做些什么来最小化它对用户自己的 CSS 的副作用？我想有些问题是不可避免的，对吧？我在考虑前任。如果用户 CSS 的目标图像带有..

```
div.gallery > img 
```

..child 选择器为它们提供边框/边距/等，例如。

是否不可能以在未知页面上“安全”的方式动态生成元素的父 div？是否总是存在破坏用户 CSS 的风险？

我想我总是可以在文档中给出警告，但如果可能的话，我很乐意让它成为白痴。

我突然想到，我可以使用 JQ 读取包含的 IMG 上的任何 CSS .. 然后将任何属性“向上”传输到新的父 div。这是疯了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:29:32.497

您可以使用选择器 .css 或 .height 或 .width 来获取图像的任何尺寸属性，然后基于此生成 div。例如，

```
thisWidth = $('theImage').width();
thisHeight = $('theImage').height();

$('yourFrame').css({'height':thisHeight,'width':thisWidth}); 
```

希望这个对你有帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T03:51:29.640

从理论上讲，您可以复制所有样式。[这个答案](https://stackoverflow.com/a/6416477/825789)甚至显示了一个插件来获取跨浏览器的所有计算样式。但这将是一个矫枉过正，不是吗？如果您真的想拥有它，请将其添加为选项（`false`最好默认为 ）。然后让用户通过设置您提供的类的样式来修复它，正如 Blender 在评论中建议的那样。

# ruby-on-rails - 用回形针在heroku中播种图像

> ID：14949143
> 
> 赞同：4
> 
> 时间：2013-02-19T03:05:04.167
> 
> 标签：ruby-on-rails, ruby, heroku, paperclip, seed

当我跑步时，`heroku run rake db:seed`我得到

```
Command :: identify -format '%wx%h,%[exif:orientation]' '/tmp/image20130219-2-1gk1yip.png[0]'
Command :: composite -gravity Center /app/public/media/watermark.png "/tmp/image20130219-2-1gk1yip.png[0]" -resize "1x1<" "/tmp/image20130219-2-1gk1yip.png20130219-2-1ng5f6c[0]"
Command :: file -b --mime '/tmp/image20130219-2-1gk1yip.png20130219-2-1ng5f6c'
Command :: identify -format '%wx%h,%[exif:orientation]' '/tmp/image20130219-2-1gk1yip20130219-2-t3caqg.png20130219-2-1ng5f6c[0]'
Command :: convert "/tmp/image20130219-2-1gk1yip20130219-2-t3caqg.png20130219-2-1ng5f6c[0]" -resize "260x190" "/tmp/image20130219-2-1gk1yip20130219-2-t3caqg.png20130219-2-1mz0u16[0]"
Command :: file -b --mime '/tmp/image20130219-2-1gk1yip20130219-2-t3caqg.png20130219-2-1mz0u16'
[paperclip] Saving attachments. 
```

我得到了我的资料和有效的数据库记录，但公共文件夹中没有重新创建图像。如果我通过视图形式添加图像，一切都很好。

我的种子

```
Stuff.create! title: 'title', description: 'desc', :img => File.open(File.join(Rails.root, '/db/seeds/image.png')) 
```

宝石文件

```
gem 'json'
gem 'haml-rails'
gem 'sass-rails'
gem 'coffee-rails'
gem 'rails_autolink'
gem 'formtastic'
gem 'paperclip'
gem 'rmagick', '2.12.0'
gem 'pg'
gem 'uglifier' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T13:39:57.243

找到解决方案。

谢谢[这个](https://stackoverflow.com/a/6657057/2011508)

而[这个](https://devcenter.heroku.com/articles/s3#s3-setup)

而[这个](https://devcenter.heroku.com/articles/paperclip-s3)

和

> 宝石'aws-sdk'

# ios - AS3 播放使用 APNS 所需的多个应用程序

> ID：14949146
> 
> 赞同：0
> 
> 时间：2013-02-19T03:05:18.740
> 
> 标签：ios, actionscript-3, air

我有两个版本的同一个应用程序，一个用于 iPad，另一个用于 iPhone。该应用程序需要 APNS 服务，但有人可以解释应用程序 ID、配置文件和证书的设置。

让我解释一下我做了什么，如果我错了，请纠正我。

我创建了一个启用了推送通知的应用程序 ID。我还创建了一个转换为 P12 的分发证书。我还有一个链接到 app id com.myapp 的分发配置文件。现在，在已经批准并发送到应用商店的 iPad 应用中，在应用描述文件中使用 u26hiu61.*（示例）。iPhone 版本已准备好发送给苹果进行审批，但我可以在 iPhone 版本中使用相同的 app ID 吗？所以基本上有完全相同的应用程序描述文件（目标设备除外）。

那么我几乎可以为第二个应用程序使用所有相同的证书、配置文件和 APNS 证书吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:47:33.040

您可以在 appstore 中发布单个应用程序并使其可用于 ipad 和 iphone。

您在应用程序描述符文件中指定要支持的设备：

```
<iPhone>
    <infoAdditions>
        <![CDATA[
            <key>UIDeviceFamily</key>
            <array>
                <string>1</string>
                <string>2</string>
            </array>
            ...your other settings
        ]]>
    </infoAdditions>
</iPhone> 
```

其中1代表iphone，2代表ipad。

所以是的，您可以使用相同的证书、配置文件等。

# logging - 在 Mule ESB 中记录 SOAP 错误

> ID：14949148
> 
> 赞同：0
> 
> 时间：2013-02-19T03:05:55.740
> 
> 标签：logging, soap, error-handling, mule

我试图让 Mule 记录我的 SOAP 组件在以下流程中引发的异常。例如，如果我将格式错误的 xml 作为输入传递，在soapUI 中我会得到一个有意义的输出，但我希望能够在控制台中记录它或将它发送到 JMS 队列。

```
<jms:activemq-connector name="Active_MQ" brokerURL="tcp://localhost:61616" validateConnections="true" doc:name="Active MQ"/>
<flow name="CAB-Mule_WMBFlow1" doc:name="CAB-Mule_WMBFlow1">
    <http:inbound-endpoint exchange-pattern="request-response" address="http://localhost:8081/DemoCustomer" doc:name="HTTP" mimeType="text/xml">
        <idempotent-redelivery-policy maxRedeliveryCount="3">
            <dead-letter-queue> 
                <vm:outbound-endpoint path="error-queue" /> 
            </dead-letter-queue>
        </idempotent-redelivery-policy>
    </http:inbound-endpoint>
    <cxf:jaxws-service port="80" serviceClass="com.mulesoft.demo.DemoCustomer" doc:name="SOAP"/>
    <component class="com.mulesoft.demo.DemoCustomerIntImpl" doc:name="Java"/>
    <jms:outbound-endpoint queue="StudioIN" connector-ref="Active_MQ" doc:name="JMS"/>
    <logger level="INFO" doc:name="Logger" message="Payload: #[payload]"/>
</flow>
<flow name="error" doc:name="error">
    <component class="com.mulesoft.demo.ExceptionService" doc:name="Java"/>
    <jms:outbound-endpoint queue="Error" connector-ref="Active_MQ" doc:name="JMS"/>
</flow> 
```

ExceptionService 只是：

```
public class ExceptionService {
    public void onException(ExceptionMessage e) {
        System.err.println("EXCEPTION MESSAGE:::: " + e.getException().getMessage());
    }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:21:27.737

`<catch-exception-strategy>`像这样在结束之前定义一个`CAB-Mule_WMBFlow1`并记录错误消息并将其推送到 JMS 队列

```
<flow name="CAB-Mule_WMBFlow1" doc:name="CAB-Mule_WMBFlow1">
    <http:inbound-endpoint exchange-pattern="request-response" address="http://localhost:8081/DemoCustomer" doc:name="HTTP" mimeType="text/xml">
        <idempotent-redelivery-policy maxRedeliveryCount="3">
            <dead-letter-queue> 
                <vm:outbound-endpoint path="error-queue" /> 
            </dead-letter-queue>
        </idempotent-redelivery-policy>
    </http:inbound-endpoint>
    <cxf:jaxws-service port="80" serviceClass="com.mulesoft.demo.DemoCustomer" doc:name="SOAP"/>
    <component class="com.mulesoft.demo.DemoCustomerIntImpl" doc:name="Java"/>
    <jms:outbound-endpoint queue="StudioIN" connector-ref="Active_MQ" doc:name="JMS"/>
    <logger level="INFO" doc:name="Logger" message="Payload: #[payload]"/>

    <catch-exception-strategy>
        <logger level="INFO" message="---->Exception payload is: #[payload]"/>
        <jms:outbound-endpoint queue="Error" />
    </catch-exception-strategy>
</flow> 
```

此外，您可以使用`message.getExceptionPayload().getMessage()`在 java 组件中获取异常消息并将其打印在 message 类型为 的控制台上`MuleMessage`。

# svg - 如何使用独立的 SVG 图像制作 SVG 精灵？

> ID：14949151
> 
> 赞同：0
> 
> 时间：2013-02-19T03:06:20.420
> 
> 标签：svg, css-sprites

如何组合来自[http://raphaeljs.com/icons/](http://raphaeljs.com/icons/)的 SVG 图标来制作 CSS Sprite。

当我这样做时：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
     width="30em" height="160em" viewBox="0 0 30 160" enable-background="new 0 0 30 160" xml:space="preserve"> 

<g id="icons">
    <g id="linkedin">
        <path d="M27.25,3.125h-22c-1.104,0-2,0.896-2,2v22c0,1.104,0.896,2,2,2h22c1.104,0,2-0.896,2-2v-22C29.25,4.021,28.354,3.125,27.25,3.125zM11.219,26.781h-4v-14h4V26.781zM9.219,11.281c-1.383,0-2.5-1.119-2.5-2.5s1.117-2.5,2.5-2.5s2.5,1.119,2.5,2.5S10.602,11.281,9.219,11.281zM25.219,26.781h-4v-8.5c0-0.4-0.403-1.055-0.687-1.213c-0.375-0.211-1.261-0.229-1.665-0.034l-1.648,0.793v8.954h-4v-14h4v0.614c1.583-0.723,3.78-0.652,5.27,0.184c1.582,0.886,2.73,2.864,2.73,4.702V26.781z"
        />
    </g>

    <g id="github">
        <path d="M 500 800 M28.436,15.099c-1.201-0.202-2.451-0.335-3.466-0.371l-0.179-0.006c0.041-0.09,0.072-0.151,0.082-0.16c0.022-0.018,0.04-0.094,0.042-0.168c0-0.041,0.018-0.174,0.046-0.35c0.275,0.01,0.64,0.018,1.038,0.021c1.537,0.012,3.145,0.136,4.248,0.331c0.657,0.116,0.874,0.112,0.389-0.006c-0.491-0.119-1.947-0.294-3.107-0.37c-0.779-0.053-1.896-0.073-2.554-0.062c0.019-0.114,0.041-0.241,0.064-0.371c0.093-0.503,0.124-1.009,0.126-2.016c0.002-1.562-0.082-1.992-0.591-3.025c-0.207-0.422-0.441-0.78-0.724-1.104c0.247-0.729,0.241-1.858-0.015-2.848c-0.211-0.812-0.285-0.864-1.021-0.708C22.19,4.019,21.69,4.2,21.049,4.523c-0.303,0.153-0.721,0.391-1.024,0.578c-0.79-0.278-1.607-0.462-2.479-0.561c-0.884-0.1-3.051-0.044-3.82,0.098c-0.752,0.139-1.429,0.309-2.042,0.511c-0.306-0.189-0.75-0.444-1.067-0.604C9.973,4.221,9.473,4.041,8.847,3.908c-0.734-0.157-0.81-0.104-1.02,0.708c-0.26,1.003-0.262,2.151-0.005,2.878C7.852,7.577,7.87,7.636,7.877,7.682c-1.042,1.312-1.382,2.78-1.156,4.829c0.059,0.534,0.15,1.024,0.277,1.473c-0.665-0.004-1.611,0.02-2.294,0.064c-1.162,0.077-2.618,0.25-3.109,0.369c-0.484,0.118-0.269,0.122,0.389,0.007c1.103-0.194,2.712-0.32,4.248-0.331c0.29-0.001,0.561-0.007,0.794-0.013c0.07,0.237,0.15,0.463,0.241,0.678L7.26,14.759c-1.015,0.035-2.264,0.168-3.465,0.37c-0.901,0.151-2.231,0.453-2.386,0.54c-0.163,0.091-0.03,0.071,0.668-0.106c1.273-0.322,2.928-0.569,4.978-0.741l0.229-0.02c0.44,1.022,1.118,1.802,2.076,2.41c0.586,0.373,1.525,0.756,1.998,0.816c0.13,0.016,0.508,0.094,0.84,0.172c0.333,0.078,0.984,0.195,1.446,0.262h0.011c-0.009,0.006-0.017,0.01-0.025,0.016c-0.56,0.291-0.924,0.744-1.169,1.457c-0.11,0.033-0.247,0.078-0.395,0.129c-0.529,0.18-0.735,0.217-1.271,0.221c-0.556,0.004-0.688-0.02-1.02-0.176c-0.483-0.225-0.933-0.639-1.233-1.133c-0.501-0.826-1.367-1.41-2.089-1.41c-0.617,0-0.734,0.25-0.288,0.615c0.672,0.549,1.174,1.109,1.38,1.537c0.116,0.24,0.294,0.611,0.397,0.824c0.109,0.227,0.342,0.535,0.564,0.748c0.522,0.498,1.026,0.736,1.778,0.848c0.504,0.074,0.628,0.074,1.223-0.002c0.287-0.035,0.529-0.076,0.746-0.127c0,0.244,0,0.525,0,0.855c0,1.766-0.021,2.334-0.091,2.5c-0.132,0.316-0.428,0.641-0.716,0.787c-0.287,0.146-0.376,0.307-0.255,0.455c0.067,0.08,0.196,0.094,0.629,0.066c0.822-0.051,1.403-0.355,1.699-0.891c0.095-0.172,0.117-0.518,0.147-2.318c0.032-1.953,0.046-2.141,0.173-2.42c0.077-0.166,0.188-0.346,0.25-0.395c0.104-0.086,0.111,0.084,0.111,2.42c-0.001,2.578-0.027,2.889-0.285,3.385c-0.058,0.113-0.168,0.26-0.245,0.33c-0.135,0.123-0.192,0.438-0.098,0.533c0.155,0.154,0.932-0.088,1.356-0.422c0.722-0.572,0.808-1.045,0.814-4.461l0.003-2.004l0.219,0.021l0.219,0.02l0.036,2.621c0.041,2.951,0.047,2.994,0.549,3.564c0.285,0.322,0.572,0.5,1.039,0.639c0.625,0.188,0.813-0.102,0.393-0.605c-0.457-0.547-0.479-0.756-0.454-3.994c0.017-2.076,0.017-2.076,0.151-1.955c0.282,0.256,0.336,0.676,0.336,2.623c0,2.418,0.069,2.648,0.923,3.07c0.399,0.195,0.511,0.219,1.022,0.221c0.544,0.002,0.577-0.006,0.597-0.148c0.017-0.115-0.05-0.193-0.304-0.348c-0.333-0.205-0.564-0.467-0.709-0.797c-0.055-0.127-0.092-0.959-0.117-2.672c-0.036-2.393-0.044-2.502-0.193-2.877c-0.201-0.504-0.508-0.902-0.897-1.166c-0.101-0.066-0.202-0.121-0.333-0.162c0.161-0.016,0.317-0.033,0.468-0.055c1.572-0.209,2.403-0.383,3.07-0.641c1.411-0.543,2.365-1.445,2.882-2.724c0.046-0.114,0.092-0.222,0.131-0.309l0.398,0.033c2.051,0.173,3.706,0.42,4.979,0.743c0.698,0.177,0.831,0.198,0.668,0.105C30.666,15.551,29.336,15.25,28.436,15.099zM22.422,15.068c-0.233,0.512-0.883,1.17-1.408,1.428c-0.518,0.256-1.33,0.451-2.25,0.544c-0.629,0.064-4.137,0.083-4.716,0.026c-1.917-0.188-2.991-0.557-3.783-1.296c-0.75-0.702-1.1-1.655-1.039-2.828c0.039-0.734,0.216-1.195,0.679-1.755c0.421-0.51,0.864-0.825,1.386-0.985c0.437-0.134,1.778-0.146,3.581-0.03c0.797,0.051,1.456,0.051,2.252,0c1.886-0.119,3.145-0.106,3.61,0.038c0.731,0.226,1.397,0.834,1.797,1.644c0.18,0.362,0.215,0.516,0.241,1.075C22.808,13.699,22.675,14.517,22.422,15.068zM12.912,11.762c-1.073-0.188-1.686,1.649-0.863,2.587c0.391,0.445,0.738,0.518,1.172,0.248c0.402-0.251,0.62-0.72,0.62-1.328C13.841,12.458,13.472,11.862,12.912,11.762zM19.425,11.872c-1.073-0.188-1.687,1.647-0.864,2.586c0.392,0.445,0.738,0.519,1.173,0.247c0.401-0.25,0.62-0.72,0.62-1.328C20.354,12.569,19.985,11.971,19.425,11.872zM16.539,15.484c-0.023,0.074-0.135,0.184-0.248,0.243c-0.286,0.147-0.492,0.096-0.794-0.179c-0.187-0.169-0.272-0.258-0.329-0.081c-0.053,0.164,0.28,0.493,0.537,0.594c0.236,0.094,0.405,0.097,0.661-0.01c0.254-0.106,0.476-0.391,0.476-0.576C16.842,15.303,16.595,15.311,16.539,15.484zM16.222,14.909c0.163-0.144,0.2-0.44,0.044-0.597s-0.473-0.133-0.597,0.043c-0.144,0.206-0.067,0.363,0.036,0.53C15.865,15.009,16.08,15.034,16.222,14.909z"
        />
    </g>
</g>
</svg> 
```

SVG 图标重叠。如何修改这些以在两个图标之间设置偏移量？例如，类似于[http://dbushell.com/demos/css-sprites/sprite.svg](http://dbushell.com/demos/css-sprites/sprite.svg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T07:44:40.047

尝试将第二个 M 命令替换为 m 命令。
“M”表示绝对位置，“m”表示相对位置。
所以，
<M 500 800 ｍ28.436,15.099c-1.201-0.202-2....</p>

# php - 创建像 twitch 或 ustream 这样的流媒体网站？

> ID：14949156
> 
> 赞同：2
> 
> 时间：2013-02-19T03:06:34.493
> 
> 标签：php, jquery, flash, streaming

我很好奇如何创建 twitch.tv、justin.tv、ustream 等网站。

我在 PHP、jquery、MySQL、flash 等方面有很多经验。我是一个非常全面的 Web 开发人员。

基本上我只想知道从哪里开始。是否有某种类型的开源解决方案可供我开始使用？这会带来什么？我假设我需要创建一个脚本来接受传入的流，然后单独显示它们的数据，这样人们就可以拥有自己的个人资料等等。

就像我说的我不知道从哪里开始，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T03:56:37.790

从以前的 googleling 我发现了一些有用的信息，所以我将其分享给您。

您可以利用`Comet Programming`它来完成您的任务。但问题是你从来没有发现任何有用`example`的东西。

Comet 是一种 Web 应用程序模型，其中长期持有的 HTTP 请求允许 Web 服务器将数据推送到浏览器，而无需浏览器显式请求它。[**关于彗星的更多话**](http://en.wikipedia.org/wiki/Comet_%28programming%29)

您还可以使用`Ajax long-polling`定期访问服务器并检查此技术广泛使用的更新。[**多一点**](http://en.wikipedia.org/wiki/Push_technology)

你也可以使用`server side scripting javascript`. 最著名和广泛使用的 js 之一是`node.js`. [**节点.js**](http://nodejs.org/)。

1.  **Node.js** - 可以使用套接字向浏览器提供实时更新的后端服务器。
2.  **Backbone.js** - 一种构建单页应用程序“像 gmail”的半结构化方式

我还将 Require.js 包含到该列表中，该列表基本上用于异步加载所有 Backbone javascript 文件。它有助于保持应用程序的文件结构可维护。

当我开始学习[**彗星**](http://www.zeitoun.net/articles/comet_and_php/start)时，我发现这个例子很有用。

# php - 将 CF 的 binaryencode 转换为 php

> ID：14949158
> 
> 赞同：0
> 
> 时间：2013-02-19T03:06:47.520
> 
> 标签：php, coldfusion, binary

我正在将一些 Coldfusion 代码翻译成 PHP，并试图弄清楚如何执行“binaryencode”函数。这是我的代码——它需要一长串十六进制字符并将它们输出为 GIF 图像。

```
<cfset GIF = "CCFFCC.....">
<cfset output = binarydecode(GIF,'Hex')>
<cfcontent type="image/gif" reset="yes" variable="#output#"> 
```

我查看了 binarydecode() 的原始输出，以及 PHP 中的所有二进制、十六进制和图像函数，但找不到正确的组合来获得相同的输出。

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:41:10.337

找到了答案。不是对正在发生的事情的真正解释，但至少是可以完成工作的东西。在这个页面上： [http ://www.drupaluser.org/php_manual/function.pack.html](http://www.drupaluser.org/php_manual/function.pack.html)

我发现了这个，它返回与 binarydecode() 所做的可比较的结果。

```
$output = pack("H".strlen($GIF),$GIF); 
```

# c# - 我的 SQL 函数有什么问题，当我尝试在 C# 中检索它的值时它总是返回 null？

> ID：14949162
> 
> 赞同：0
> 
> 时间：2013-02-19T03:06:55.530
> 
> 标签：c#, sql-server, user-defined-functions

我的 SQL 函数有什么问题，当我尝试在 C# 中检索它的值时它总是返回 null？该函数在 SQL 设计器中工作得非常可靠，但是当我尝试使用 C# 运行它时它失败了。

这是我的函数定义。首先是表值函数：

```
ALTER FUNCTION dbo.FGetNumberOfChikensInThisDate
    (
    @Date nvarchar(12),
    @IDSource bigint
    )
RETURNS Table 
AS
    RETURN SELECT     SUM(NumberOfChicken) AS Number of Chickens  
       FROM            tblChickens
           WHERE        (SourceID= @IDSource) AND (ReservedDate = @Date) 
```

这是标量值函数：

```
ALTER FUNCTION dbo.FSGetNumberOfChikensInThisDate
    (
    @Date nvarchar(12),
    @IDSource bigint
    )
RETURNS bigint
AS
 BEGIN
  DECLARE  @ret bigint;
   SELECT      @ret=  SUM(NumberOfChicken) 
       FROM            tblChickens
          WHERE        (ReserveDate = @Date) AND (SourceID= @IDSource)
RETURN @ret;
END; 
```

我使用这两种方法为这些函数创建 SQL 命令字符串并传递它们的参数并从 C# 执行它们： 对于基于表的函数，我使用：

```
public static DataTable ExecuteSqlFunction(string functionName, string[] Functionparamers)
        {
            SqlDataAdapter reader = new SqlDataAdapter();
            DataTable table = new DataTable();
            string query = "select * from " + functionName + "(";
            int index = 0;
            foreach (string item in Functionparamers)//{0},{0}
            {
                query += String.Format("{0}", item);
                query += ++index >= Functionparamers.Length ? String.Format(")", item) : ",";
            }

            if (connection.State != ConnectionState.Open)
            { connection.Open(); }

            cmd = new SqlCommand(query, connection);
            reader.SelectCommand = cmd;
            reader.Fill(table);
            connection.Close();
            return table;

        } 
```

并像这样使用它：

```
ExecuteSqlFunction("dbo.FGetNumberOfChikensInThisDate",new string[] { Date, API.CurrentSourceID }); 
```

将创建此字符串：

> select * from dbo.FGetNumberOfChikensInThisDate(1391/12/01,4) //日期是波斯语

返回的 DataTable 对象只有一行，但是当我写

```
dataTable.Rows[0][0].ToString(); 
```

我得到一个

> “”

字符串，而当我在 SQL 上运行此 SQL 命令时，它运行得很好！（实际上我尝试在 SQL 设计器中执行此函数的 SQL 命令，我得到的结果很好，但是当我尝试使用 c# 运行它时，它就像这样）。

对于标量值函数，使用相同的前一种方法，最后略有变化：

```
 public static object ExecuteScalarSqlFunction(string functionName, string[] FunctionParameters)
        {

            string query = "select * from " + functionName + "(";
            int index = 0;
            object result;
            foreach (string item in FunctionParameters)//{0},{0}
            {
                query += String.Format("{0}", item);
                query += ++index >= FunctionParameters.Length ? String.Format(")", item) : ",";
            }

            if (connection.State != ConnectionState.Open)
            { connection.Open(); }

            cmd = new SqlCommand(query, connection);
            result = cmd.ExecuteScalar();
            connection.Close();
            return result;
        } 
```

像这样调用这个函数：

```
ExecuteScalarSqlFunction("dbo.FSGetNumberOfChikensInThisDate",new string[] { Date, API.CurrentSourceID }); 
```

将创建此 SQL 字符串：

> “从 dbo.FSGetNumberOfChikensInThisDate(1391/12/01,4) 中选择 *”

当我到达

```
result = cmd.ExecuteScalar(); 
```

部分它会产生一个异常说：

> 无效的对象名称“dbo.FSGetNumberOfChikensInThisDate”。虽然它确实存在！并在那里！

ExecuteSqlFunction() 适用于我的其余功能，但这些是失败的异常。ExecuteScalarFunction 没有经过测试，因为我不知道我是否遗漏了其中的任何内容，但我确信处理表值 SQL 函数的 ExecuteSqlFunction 是可以的，所以它一定是我在这里遗漏的其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:16:19.707

该函数`FSGetNumberOfChikensInThisDate`返回一个标量值——一个类型的单一结果`bigint`——它不能用作`SELECT`语句的源。但是，它可以用作`SELECT`语句的列源。

请尝试以下 SQL 语句：

```
SELECT dbo.FSGetNumberOfChikensInThisDate('1391/12/01', 4); 
```

应返回具有单个未命名 BigInt 列结果的单行。

# clojure - 如何将 clojure.lang.ArraySeq 转换为 Java String[]？

> ID：14949163
> 
> 赞同：2
> 
> 时间：2013-02-19T03:07:04.493
> 
> 标签：clojure

我有一个 Java 类，其构造函数采用可变数量的 String 参数，如下所示：

```
public Foo(String...args); 
```

我正在尝试在 Clojure 中创建一个 make-foo 多方法来处理这个问题：

```
(defmethod make-foo clojure.lang.ArraySeq [& args] (new Foo (into-array args))) 
```

但是当我用

```
(make-foo ["one" "two"]) 
```

我得到： IllegalArgumentException 找不到匹配的 ctor

我也希望能够调用它

```
(make-foo '("one" "two")) 
```

我看到整数、浮点数等有数组变体，但没有字符串。那么我该如何处理这种情况呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T03:17:19.147

`make-foo`如果您将其称为 like `(make-foo "one" "two")`，所写的将起作用，或者您可以`&`从其定义中删除 ，然后将其传递给序列。

# objective-c - 忽略 cocos2d 中图像的透明区域时精灵走错路

> ID：14949166
> 
> 赞同：1
> 
> 时间：2013-02-19T03:07:31.857
> 
> 标签：objective-c, cocos2d-iphone

根据我[上一个问题中](https://stackoverflow.com/questions/14928748/ignoring-transparent-areas-of-sprites-in-cocos2d)[guru](https://stackoverflow.com/users/664177/guru)的建议，我在我的 init 方法中添加了这段代码，以防止在精灵的透明区域发生触摸事件：

```
 path = CGPathCreateMutable();
    CGPathMoveToPoint(path, NULL, endTouch.x, endTouch.y);
    //250(y) is the height of the path, 50(x) is the width
    //set your width and height to be the same size as the non-transparent part of your sprite
    CGPathAddLineToPoint(path, NULL, 0, 250);
    CGPathAddLineToPoint(path, NULL, 50, 0);
    CGPathCloseSubpath(path); 
```

然后我像这样修改了我的触摸事件：

```
-(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
if(gameStat == TRUE)
{
    UITouch *touch=[touches anyObject];
    CGPoint loc=[touch locationInView:[touch view]];
    loc=[[CCDirector sharedDirector] convertToGL:loc];
    beginTouch = loc;

    for(int i = 0; i < [sprArray count]; i++)
    {
        CCSprite *sprite = (CCSprite *)[sprArray objectAtIndex:i];
        if(CGRectContainsPoint([sprite boundingBox], loc))
        {
            selectedSprite = sprite;
            //test the path
            loc = [selectedSprite convertToNodeSpace:loc];
            if (CGPathContainsPoint(path, NULL, loc, NO) ) {
                NSLog(@"inside");
            }
            else {
                NSLog(@"outside");
            }
            break;
        }
    }
}}

-(void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
UITouch *touch = [touches anyObject];
CGPoint loc1 = [touch previousLocationInView:[touch view]];
CGPoint loc2 = [touch locationInView:[touch view]];
loc2 = [[CCDirector sharedDirector]convertToGL:loc2];
endTouch = location;

int goUp = loc2.y - loc1.y;
if(goUp > 0){
CGPoint locationPath  = [selectedSprite convertToNodeSpace:location];
        if (CGPathContainsPoint(path, NULL, locationPath, NO) ) {
            [selectedSprite setPosition:location];
            _spriteTouch = TRUE;
        }
}} 
```

现在，这很好用，但我的问题是精灵往往会以错误的方式移动。它应该跟随向上的触摸滑动，但无论我如何向上滑动，它都会继续向右移动。我在这里做错了什么？请帮我。

更新：我设法弄清楚如何修复我的代码，所以这已经解决了。我已经更新了我的代码，以防其他人遇到同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T03:13:54.467

你试过改变这个

```
 loc = [selectedSprite convertToNodeSpace:loc]; 
```

到以下

```
 loc = [selectedSprite convertToWorldSpace:loc]; 
```

[编辑：更新示例]
因为调用 convertToGL：基于点的格式被格式化为基于 OpenGL，其中：

## 坐标

```
y+           (0,0)                  |y+
|            +------ y+      x-     |      x+
|            |               ---- (0,0) ----
|            |                      |
+ ---- x+    |                      |
(0,0)        x+                     y-
OpenGl       Cocoa Touch         Cartesian 
```

来自屏幕的触摸（Cocoa Touch）不知道 OpenGL 坐标，因此需要使用[Cocos2d CCDirector](http://www.cocos2d-iphone.org/api-ref/0.99.2/interface_c_c_director.html)进行转换：

> *   (CGPoint) convertToGL:(CGPoint)p
>     将 UIKit 坐标转换为 OpenGL 坐标 用于将（多）触摸坐标转换为当前布局（纵向或横向）

反过来也一样

> *   (CGPoint) convertToUI:(CGPoint)p
>     将 OpenGL 坐标转换为 UIKit 坐标 用于将节点点转换为窗口点，以便调用如 glScissor

有时，我感到困惑并记录（而不是断点）该点确定了哪个坐标有效，因此我可以弄清楚逻辑。

```
NSLog(@"%@", NSStringFromCGPoint(touchPoint.position)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:49:45.153

在 touchesMoved 方法中，您正在执行以下操作：-

```
loc2 = [[CCDirector sharedDirector]convertToGL:loc2]; 
```

但没有将 loc1 相应地转换为 GL 坐标。我认为你应该试试这个： -

```
loc1 = [[CCDirector sharedDirector]convertToGL:loc1]; 
```

它可能会有所帮助。

# streaming - 如何将 Dropbox 中的视频播放到我的 win phone 8 应用程序的 mediaelement 中？

> ID：14949167
> 
> 赞同：0
> 
> 时间：2013-02-19T03:07:36.940
> 
> 标签：streaming, windows-phone-8, dropbox

我正在创建一个 windows phone 8 应用程序，它在 rest api 的帮助下浏览和播放 Dropbox 的内容。

Dropbox 提供下载文件的链接以及一些授权标头。但是我无法使用该 uri 将该视频播放到媒体元素中。

如何从 Dropbox（以及 Sugarsync）将视频播放到我的应用程序中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:55:05.593

我不知道您今天使用的是哪个电话，但如果您还没有使用它，您应该查看[/media电话。](https://www.dropbox.com/developers/core/api#media)

# php - 表格和 PDO 的问题

> ID：14949168
> 
> 赞同：0
> 
> 时间：2013-02-19T03:07:49.157
> 
> 标签：php

我计划清理代码，并在以后使它对 OOP 更友好，但现在我正在努力让它工作。我已经设法让它回显“嗨”，但执行似乎没有将任何内容放入数据库，也没有给我任何错误。代码是

```
public function newAccount(array $data) {
    $error = NULL;
    //Check first name length, and make sure its over 2 characters
    if (strlen($data['fname']) > 2) {
        $fname = $data['fname'];
    }
    else  {
        $fname = FALSE;
        $error .= "Please put in a valid First Name. <br />";
    }

    //Check if last name length is over 2 characters
    if (strlen($data['lname']) > 2) {
        $lname = $data['lname'];
    }
    else {
        $lname = FALSE;
        $error .= "Please enter a valid Last Name. <br />";
    }

    // Check username
    if (strlen($data['user']) > 3) {
          $user = $data['user'];
    }
    else {
        $user = FALSE;
        $error .= "Username must be longer than 3 characters.<br />";
    }

    // Mske sure password is atleast 6 characters, and retyped correctly
    if (strlen($data['pass']) > 5) {
        if ($data['pass'] == $data['repass']) {
            $pass = $data['pass'];
        }
        else {
            $pass = FALSE;
            $error .= "Passwords do not match.<br />";
        }
    }
    else {
        $pass = FALSE;
        $error .= "Password must be longer than 6 characters.";
    }

    //make sure email looks correct, strpos makes sure there is an '@'
    if (strlen($data['email']) > 5 && strpos($data['email'], '@')) {
        $email = $data['email'];
    }
    else {
        $email = FALSE;
        $error .= "Please enter a valid email. <br />";
    }
    // Check if user is suppose to be admin
    if (isset($data['admin'])) {
        $admin = '1';
    }
    else {
        $admin = '0';
    }

    if ($fname && $lname && $user && $pass && $email) {
        echo 'hi';
        try {
        $sth = $this->dbc->prepare("INSERT INTO users(user, password first_name, last_name, email, admin) VALUES(:user, MD5(:pass), :fname, :lname, :email, :admin)");

        $sth->execute(array(":user" => $user,
                            ":pass" => $pass,
                            ":fname" => $fname,
                            ":lname" => $lname,
                            ":email" => $email,
                            ":admin" => $admin)
                     );
        }
        catch (PDOException $e) {
            echo $e->getMessage();
        }

    }
    else {
        echo "Error" . $error;
    }

} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:15:44.177

在您的插入查询中，您在密码字段后缺少逗号。

它应该是

```
$sth = $this->dbc->prepare("INSERT INTO
    users(user, password, first_name, last_name, email, admin)
    VALUES(:user, MD5(:pass), :fname, :lname, :email, :admin)"); 
```

此外，当输入测试字符串是否为电子邮件地址时，请使用[`filter_var()`](http://php.net/manual/en/function.filter-var.php). 像这样：

```
if( filter_var($data['email'], FILTER_VALIDATE_EMAIL) { 
    //do this... 
```

# ios - 来自一等舱的价值不在二等舱

> ID：14949171
> 
> 赞同：0
> 
> 时间：2013-02-19T03:08:11.770
> 
> 标签：ios, objective-c, xcode

我有两个课程，Step1 和 Step2。Step1 包含一个名为 wrp 的文本字段。当用户在 Step1 中在 wrp 中输入一个数字时，我希望能够在 Step2 中使用它。这是我尝试过的（这是Step2中的代码）：

```
int AdditionalDays;

Step1ViewController *wrp1 = [Step1ViewController new];
UITextField *wrp = [wrp1 wrp];
AdditionalDays = [wrp.text intValue];

TotalTotal.text = [[NSString alloc] initWithFormat:@"%i", AdditionalDays]; 
```

该应用程序不会抛出错误消息，但在 Step1 中的 wrp 中用户输入的数字在 Step2 中被忽略。我不知道为什么它不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:11:47.590

因为你创建了一个新的 Step1ViewController

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T03:12:47.203

发生这种情况的原因是您在 Step2 中说过：

```
Step1ViewController *wrp1 = [Step1ViewController new];
UITextField *wrp = [wrp1 wrp]; 
```

不幸的是，这并没有做你想做的事。您的应用程序不知道您要做什么，因此代码实际上在做的是“请创建一个全新的 Step1 并创建一个全新的 TextField，然后给我这个全新的空 TextField 的值”。

不要在 Step2 内并向后工作以获取 TextField，而是尝试在 Step1 内并将值传递给 Step2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T03:16:22.783

在该行`Step1ViewController *wrp1 = [Step1ViewController new];`中，您正在创建`Step1ViewController`. 您需要获取对用户输入文本的原始 Step1ViewController 的引用。

为此，您可能会在 Step2ViewController 中创建一个属性，您可以在其中传入 Step1ViewController，甚至更好的是，用户输入的值。

因此，在您的 Step2ViewController 类头中，添加如下属性：

```
@property (assign) int additionalDays; 
```

然后，当您创建 Step2ViewController 以在屏幕上显示它时，将此属性设置为用户输入的值，如下所示：

```
Step2ViewController *controller  = [Step2ViewController new];
controller.additionalDays = [wrp.text intValue];
// push the controller on a UINavigationController or something 
```

# ruby-on-rails - Ruby on Rails 在关联 ID 上的 before_validation 更改未保存

> ID：14949176
> 
> 赞同：-1
> 
> 时间：2013-02-19T03:08:30.007
> 
> 标签：ruby-on-rails, model, associations

我正在尝试确保以一致的方式保存玩家 ID 的顺序，以便我们可以对它们进行复合索引。玩家 ID 在 before_validation 回调结束时和验证处理程序中切换，但在 before_save 中恢复为旧值，并使用预切换值保存到数据库中。我如何确保正确的排序使其进入数据库？

```
class Game < ActiveRecord::Base

  belongs_to :player_0, :class_name => "User", :foreign_key => "player_0_id", :inverse_of => :games
  belongs_to :player_1, :class_name => "User", :foreign_key => "player_1_id", :inverse_of => :games
  before_validation :ensure_player_order

private

def ensure_player_order
    if self.player_0_id.nil?
      self.player_1_id = self.player_0_id
      self.player_1_id = nil
    elsif !self.player_1_id.nil?
      ids = [self.player_0_id,self.player_1_id]
      low_id = ids.min
      high_id = ids.max

      self.player_0_id = User.find(low_id)
      self.player_1_id = User.find(high_id)
    end
 end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:08:30.007

由于 player_0 和 player_1 使用关联，因此您必须更新关联，而不是与关联配对的外国 id（我认为这与 ActiveModel::Dirty 拉一些恶作剧有关，但我不确定）。所以将 ensure_player_order 更改为。

```
def ensure_player_order
    if self.player_0.nil?
      self.player_1 = self.player_0
      self.player_1 = nil
    elsif !self.player_1.nil?
      low = self.player_0.id < self.player_1.id  ? self.player_0 : self.player_1
      high = self.player_0.id < self.player_1.id  ? self.player_1 : self.player_0

      self.player_0 = low
      self.player_1 = high
    end
    true
  end 
```

# iis-7 - 删除经典 ASP 应用程序的 iis7.5 中的“服务器”名称标头

> ID：14949180
> 
> 赞同：1
> 
> 时间：2013-02-19T03:08:50.453
> 
> 标签：iis-7, asp-classic

我正在使用在 IIS7.5 上运行的经典 asp 应用程序。

要求要求删除所有杂项标头，包括“服务器”标头。

我已经能够删除除此之外的所有内容。

有没有人可以做到这一点的方法？

我看到了一种通过安装 MS urlScan 插件来适应它的方法，但我希望避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T08:01:51.900

这是可能的，但不是通过代码：

IIS7.x - 通过 HttpModule

[http://consultingblogs.emc.com/howardvanrooijen/archive/2009/08/25/cloaking-your-asp-net-mvc-web-application-on-iis-7.aspx](http://consultingblogs.emc.com/howardvanrooijen/archive/2009/08/25/cloaking-your-asp-net-mvc-web-application-on-iis-7.aspx)

II6.0 - 通过 URLscan（来自微软）

[http://www.4guysfromrolla.com/articles/120209-1.aspx#postadlink](http://www.4guysfromrolla.com/articles/120209-1.aspx#postadlink)

[http://technet.microsoft.com/en-us/security/cc242650.aspx](http://technet.microsoft.com/en-us/security/cc242650.aspx)

# python - Python - os.system 在输出末尾放置一个不需要（和不必要的）换行符和 0

> ID：14949184
> 
> 赞同：4
> 
> 时间：2013-02-19T03:09:24.780
> 
> 标签：python, os.system

我不知道它为什么这样做，当我尝试修剪它时，它会吐出一个错误。

```
>>> print os.system('uptime')
21:05  up  9:40, 2 users, load averages: 0.69 0.76 0.82
0
>>> print os.system('uptime')[:-2]
21:07  up  9:42, 2 users, load averages: 0.75 0.74 0.80
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'int' object is not subscriptable 
```

有谁知道我可以如何阻止这种情况发生或如何在没有错误的情况下将其删除？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T03:21:47.150

`os.system`没有做任何这样的事情；发生的事情是它`uptime`本身正在写入标准输出（真正的标准输出，而不是 Python 的`sys.stdout`），并`os.system`返回 0 的返回值`uptime`（表明它成功退出）。

如果您想`uptime`在 Python 中将字符串打印到标准输出，则必须使用其他调用方式，例如`subprocess.Popen`.

```
>>> import subprocess
>>> uptime = subprocess.Popen('uptime', stdout=subprocess.PIPE)
>>> output = uptime.stdout.read()
>>> output
' 04:20:09 up 12:13,  5 users,  load average: 0.99, 1.15, 1.25\n' 
```

有关更多详细信息，请参阅[`subprocess`文档](http://docs.python.org/2/library/subprocess.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T03:16:34.933

[**`os.system()`**](http://docs.python.org/2/library/os.html#os.system)首先在子shell 中执行命令。该子shell 打印您看到的第一行。

在 Unix 上，返回值是进程的退出状态。那就是`0`您在解释器中看到的。您可以通过将其分配给变量来抑制它：

```
>>> x = os.system('uptime')
14:12  up 21:45, 4 users, load averages: 1.13 0.93 0.82
>>> 
```

或者，使用[**`subprocess.call()`**](http://docs.python.org/2/library/subprocess.html#replacing-os-system)：

```
>>> import subprocess
>>> status = subprocess.call('uptime')
14:19  up 21:52, 4 users, load averages: 1.12 0.93 0.86
>>> print status
0 
```

也许您更愿意在变量中捕获输出和返回的状态，以便您可以在显示（或不显示）之前操作它们：

```
>>> pipe = subprocess.Popen(['uptime'], stdout=subprocess.PIPE, shell=True)
>>> 
>>> for line in pipe.stdout:
...     print line
... 
14:36  up 22:10, 4 users, load averages: 0.59 0.59 0.65

>>> status = pipe.wait()
>>> 
>>> print status
0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T03:11:54.240

`os.system`不返回标准输出的内容。如果你想捕捉那些使用`os.popen("uptime").read()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T03:14:22.903

您不必打印输出。

os.system 调用的实际命令打印到标准输出，函数 os.system() 以整数形式返回命令的返回值。

所以试试

```
os.system('uptime') 
```

# iphone - iPhone：减慢录制的视频

> ID：14949187
> 
> 赞同：1
> 
> 时间：2013-02-19T03:09:40.683
> 
> 标签：iphone, performance, video

谁能解释为什么这不会将我的视频减慢到 5 秒？secondAsset.duration 等于 15 秒。导出后，它只播放视频 5 秒，然后在剩余的 10 秒内显示最后一帧。

```
AVMutableCompositionTrack *secondTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
    [secondTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, secondAsset.duration) ofTrack:[[secondAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:firstAsset.duration error:nil];

    [secondTrack scaleTimeRange:CMTimeRangeMake(kCMTimeZero, secondAsset.duration) toDuration:CMTimeMake(5,1)]; 
```

# javascript - 如何从 HTML TextNode 而不是 HTML 标记中获取实际显示的文本？

> ID：14949193
> 
> 赞同：0
> 
> 时间：2013-02-19T03:10:01.273
> 
> 标签：javascript, html, dom, xmlnode

我正在尝试将 DOM 节点及其所有子节点转换为我设计的纯文本标记。我可以`node.childNodes`用来获取所有内容的列表并递归地将其转换为我的字符串格式。

但是，当我从 中取出文本时`TextNode`，它会包含页面上不可见的换行符和空格。对于纯文本，我希望获得与 HTML 相同的外观 - 因此文本之前不应该有很多缩进或之后的换行符，即使它们在 HTML 标记中，因为我的浏览器在它时将它们剥离了呈现 HTML。

显而易见的答案是`.trim()`我自己的字符串 - 除了这可以去掉文本中应该存在的空格，例如`<em>text.</em> moretext`. 后一个文本节点丢失了它之前的空间。

即使这样有效，它在哲学上也没有吸引力。我希望这个算法基于呈现给用户的文本。该网页在底层标记中隐藏了诸如空格、制表符和换行符之类的实现细节，我希望使用它用来修剪它们的任何东西，而不是`trim()`. 理想情况下，会有一个等效的`node.textContent`列表，其中包含纯文本和子元素的列表。

我还没有找到任何关于这个的东西，我也看不到一个好的方法来编码它以聪明地处理这些空间（缺少比较`.textContent`和`.nodeValue`字符串或解析`innerHTML`自己或其他东西）。帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:23:55.383

```
document.getElementById("someid").innerText.replace(/\s+/g," ") 
```

**trim**方法删除字符串头部和尾部的空格，但不删除中间的空格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:55:45.470

作为我[Rangy](https://code.google.com/p/rangy)库的[TextRange 模块](https://code.google.com/p/rangy/wiki/TextRangeModule)的一部分，我已经编写了一个实现，但是为此包含很多代码。

```
var displayedText = rangy.innerText(node); 
```

# c - 如何解决 TCP 服务器地址已在使用错误

> ID：14949197
> 
> 赞同：1
> 
> 时间：2013-02-19T03:10:51.960
> 
> 标签：c, networking, tcp, network-programming

我正在编写一个 TCP 并发服务器，它将分叉一个子进程来处理每个新连接。假设*ClientA*正在与*ChildA*交互，而*服务器*仍在同一端口上侦听。如果我们用 SIGINT 信号杀死*服务器*，*ClientA*和*ChildA*会继续交互。

因此，在这种情况下，如果我重新启动*服务器*，它显然会引发`Address already in use`函数`bind`调用。

这个问题的所有可能解决方案是什么，通常遵循哪一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T03:16:15.153

2个选项。

1.  `kill` **当服务器*被杀死时*ChildA*进程。*

**   `close`完成后`fd`用于`listen`/`bind`在*ChildA*中`fork`。* 

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T03:16:03.877

`SO_REUSEADDR`在绑定之前在侦听套接字上设置套接字选项。*

# html - FireFox 似乎不支持 IFrame 数据 URI

> ID：14949198
> 
> 赞同：1
> 
> 时间：2013-02-19T03:10:52.443
> 
> 标签：html, firefox, iframe

当我尝试将 PDF 数据 URI 加载到`src="data:application/pdf;base64,..."`FireFox（18.0.2 [当前版本]，OSX）中的 iframe（例如，）时，它会打开一个下载窗口。

例如，查看网站[JSPDF.com](http://jspdf.com/#)

![在此处输入图像描述](../Images/9e79b395c760377941a41f61276c7826.png)

同一站点在 Aurora (20.0a2) 中运行良好

这是 Firefox 的一个已知问题吗？是不是不符合规范...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:21:24.543

Aurora 有一个内置的 PDF 渲染器，可以内联渲染 PDF。

截至昨天的当前版本没有那个；它首先出现在即将发布的 Firefox 19 中。

没有 PDF 插件或内置 PDF 渲染器的浏览器只会提供下载或在帮助应用程序中打开在您执行操作时加载到窗口中的 PDF，这正是您所看到的。

就规范而言，这两种行为都是合规的。没有什么说浏览器需要支持 PDF 的内联渲染。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T07:56:07.953

我在 Firefox、iframe 和数据 URI 上遇到了非常相似的问题。我通过检查数据类型定义中没有空格来解决它。我的是文本/html，所以不要写这个：

```
src="data: text/html, ..." 
```

它必须是这样的：

```
src="data:text/html,..." 
```

我得出的结论是，Firefox 不理解带有空格的内容类型，因此认为它是一个可下载的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-28T08:22:48.020

您需要修改选项：

[![在此处输入图像描述](../Images/941d9226e14fce3b25d2135133c524a8.png)](https://i.stack.imgur.com/PItPR.jpg)

到 ：

[![在此处输入图像描述](../Images/fd8251905ceaf04d5601f72e2d9d1f5c.png)](https://i.stack.imgur.com/XbYos.jpg)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-19T03:58:20.273

这可能是在没有安装 adobe reader 时引起的。不过我不确定。因为我没有运行 Firefox 的 Mac，所以无法在这里测试它。

# php - 使用 mod_rewrite 允许带有干净 url 的 php $_GET 选项

> ID：14949200
> 
> 赞同：0
> 
> 时间：2013-02-19T03:11:06.763
> 
> 标签：php, mod-rewrite

即使设置了 mod_rewrite，我也需要 php 从 url 获取变量。

Mod改写如下

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /*********/

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    #RewriteRule ^(.*)$ index.php/$1
    RewriteRule ^(.*)$ /index.php?/$1

</IfModule> 
```

示例网址：www.example.com/something/somthing/?search=something

在我的网站上，它根本不读取 $_GET 变量搜索

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:17:40.343

添加`[QSA]`到`RewriteRule`行尾。代表Query **S** string **A** append ，它完全按照它所说的去做，并将任何先前的查询字符串附加到重写的地址**。**

# algorithm - 我的贪心算法有缺陷吗？

> ID：14949206
> 
> 赞同：2
> 
> 时间：2013-02-19T03:11:25.343
> 
> 标签：algorithm, logic, greedy, proof

我只是想知道您是否可以看到我为解决此问题而提出的贪婪算法的任何缺陷或问题。问题是：

*   他们是一组员工
*   每个员工都有一个工作班次，这是一周中的一个时间间隔。员工的轮班有重叠的可能性。
*   一部分员工组成一个监督组。
*   监督组有一个属性，即在每个员工轮班的每一刻，都有一名主管在工作。

目标是产生一个规模尽可能小的监督组。

现在，我的贪心算法来解决这个问题。假设有一个员工列表：

```
 While(there are employee's who aren't supervisors and are not removed )
      Choose first employee working with longest work shift to be supervisor. 
      Remove any employee whos finish time is less than the current supervisor finish time.

      If(supervisor shift is ending)
         Turn employee whos shift interests with supervisor shift,
         with longest work time remaining into a supervisor as well.
      end if
  End while

      return list of supervisors 
```

这行得通吗？这实际上会返回尽可能少的主管群体吗？我不确定这是否是最好的方法。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T03:24:42.327

由于每个员工正好轮班工作，很容易证明贪婪策略会产生最佳解决方案。

让我们假设您的算法没有产生最佳解决方案。这意味着存在一名员工`E0`可以替换至少两名员工`E1`，并`E2`在两个背靠背的时间间隔内被指派主管。这意味着`E0`' 的转变至少早在`E1`s 开始，并在 s 之后或更晚才结束`E2`。`E0`然而，如果这是真的，那么你的贪心算法就会被选为`E1`监督者，这是一个矛盾。这意味着您的算法找到了问题的最佳解决方案。

# vb.net - VB.net 中表单重新加载数据和类变量重置

> ID：14949208
> 
> 赞同：0
> 
> 时间：2013-02-19T03:11:26.420
> 
> 标签：vb.net, webbrowser-control, web-scraping, webrequest

这个程序基本上去一个网站并获取特定 div 标签中的所有链接。然后它导航到每个链接并获取这些页面中的链接。

但是，在成功获得第一个链接并到达第一个网站后，它会重新检查 windows 窗体数据并将类变量重置为其原始值，从而丢失所有链接。

为什么它会重新加载 Windows 表单数据，我如何保留以前的数据？

```
Imports System.Text.RegularExpressions

Public Class Form

Private stage As String = "Getting Page Links"
Dim PageUrls() As String = {}
Dim PageHtml() As String = {}

Private Sub Form_Load(sender As Object, e As System.EventArgs) Handles Me.Load

    WebBrowser.Navigate("websiteurlhidden")

End Sub

Private Sub WebBrowser_DocumentCompleted(sender As Object, e As System.Windows.Forms.WebBrowserDocumentCompletedEventArgs) Handles WebBrowser.DocumentCompleted
    If WebBrowser.ReadyState = WebBrowserReadyState.Complete Then

        Try

            Select Case stage
                Case "Getting Page Links"

                    Dim htmlDocument As HtmlDocument = Me.WebBrowser.Document
                    Dim htmlElementCollection As HtmlElementCollection = htmlDocument.GetElementsByTagName("DIV")

                    For Each htmlElement As HtmlElement In HtmlElementCollection

                        Dim imgUrl As String = htmlElement.GetAttribute("classname")
                        If imgUrl = " nine " Then

                            Dim linkIndex As Integer = 0
                            Dim index2 As Integer = 0
                            For Each link As HtmlElement In htmlElement.GetElementsByTagName("a")
                                If linkIndex >= 26 Then
                                    If Not String.IsNullOrEmpty(link.GetAttribute("href")) Then
                                        ReDim Preserve PageUrls(index2)

                                        PageUrls(index2) = link.GetAttribute("href")
                                        ' MessageBox.Show(link.GetAttribute("href"))
                                        '  MessageBox.Show(PageUrls(linkIndex))
                                        index2 = index2 + 1
                                    End If
                                End If
                                linkIndex = linkIndex + 1
                            Next

                            For Each str As String In PageUrls
                                '          MessageBox.Show(str)
                            Next
                            stage = "Going through  pages"

                        End If

                    Next

                    GoThroughPages()

                Case "Going through  pages"

                    Dim htmlDocument As HtmlDocument = Me.WebBrowser.Document
                    Dim htmlElementCollection As HtmlElementCollection = htmlDocument.GetElementsByTagName("DIV")
                    Dim linkIndex As Integer = 0
                    For Each htmlElement As HtmlElement In HtmlElementCollection

                        Dim imgUrl As String = htmlElement.GetAttribute("classname")
                        If imgUrl = " nine " Then
                            ReDim Preserve PageHtml(linkIndex)
                            'need to make permanent.
                            PageHtml(linkindex) = htmlElement.ToString()

                            Dim PageDownloadLinks = htmlElement.GetElementsByTagName("a")

                        End If
                        End
                    Next

                    ' GoThroughPages()

                Case Else
                    MessageBox.Show("case else")

            End Select

        Catch ex As Exception
            '  MessageBox.Show(ex.Message & " " & ex.ToString)
        End Try
    End If

End Sub

Private Sub GoThroughPages()

    For linkIndex As Integer = 0 To PageUrls.Count - 1

        MessageBox.Show(PageUrls(linkIndex))
        WebBrowser.Navigate(PageUrls(linkIndex))
        Delay(3)
        While (WebBrowser.IsBusy)

            Application.DoEvents()
        End While
    Next

End Sub

Sub Delay(ByVal dblSecs As Double)

    Const OneSec As Double = 1.0# / (1440.0# * 60.0#)
    Dim dblWaitTil As Date
    Now.AddSeconds(OneSec)
    dblWaitTil = Now.AddSeconds(OneSec).AddSeconds(dblSecs)
    Do Until Now > dblWaitTil
        Application.DoEvents() ' Allow windows messages to be processed
    Loop

End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T01:33:26.490

简单的解决方案是更改：

```
Dim linkIndex As Integer = 0 
```

至

```
Static linkIndex As Integer = 0 
```

这将导致`linkIndex`在调用之间保留其值，并且`ReDim Preserve PageHtml(linkIndex)`不会在每次调用时重置。

# java - ArrayList 重复删除

> ID：14949209
> 
> 赞同：1
> 
> 时间：2013-02-19T03:11:28.370
> 
> 标签：java

这是我的代码：

```
public static void deleteDuplicates(ArrayList<String> list){
    ArrayList<String> newList = new ArrayList<String>();
    HashSet<String> set = new HashSet<String>();

    for(int i = 0; i < list.size(); i++){
        set.add(list.get(i));
    }

    newList.addAll(set);
    return newList;
} 
```

我对此的输入如下：

```
1, 2, 2, 3, 4, 3, 1, 5, 5, 4, 1, 4, 5 
```

我得到的输出是：

```
3, 2, 4, 1, 5 
```

谁能解释为什么这不正常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T03:17:05.173

更改`HashSet`为[`LinkedHashSet`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html)：

> Set 接口的哈希表和链表实现，具有可预测的迭代顺序。

另外，请记住[始终对接口进行编程](https://stackoverflow.com/q/383947/1065197)：

```
public static void deleteDuplicates(List<String> list){
    List<String> newList = new ArrayList<String>();
    Set<String> set = new LinkedHashSet<String>();
    //rest of your code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T03:19:08.753

引用 HashSet 类文档：

> 它不保证集合的迭代顺序；特别是，它不保证订单会随着时间的推移保持不变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T03:20:36.687

我敢肯定有一种更有效的方法，但这里有一个用于删除的 n^2 算法的想法

```
public static void deleteDuplicates(ArrayList<String> list){
ArrayList<String> newList = new ArrayList<String>();

for (int i = 0; i < list.size(); i++){

boolean exists = false;
String str = list.get(i);
for (int j = 0; j < newList.size(); j++){
if (newList.get(j).compareTo(str)==0){
exists = true;
break;
}
}
if (!exists) newList.add(str);
}
return newList;
} 
```

# javascript - 使用 javascript 动态更新表

> ID：14949210
> 
> 赞同：8
> 
> 时间：2013-02-19T03:11:29.683
> 
> 标签：javascript, jquery, ajax

我有一个向服务器发送 ajax 请求的页面。页面上有一个表格，其中显示了一些数据。服务器返回一个 json 对象，它是一个对象列表，它不包含页面的任何布局。

我想通过返回的 json只更新表**行。**如何在不使用第三方库且仅使用 jquery 的情况下做到这一点？我只是想要一个粗略的想法和例子。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-19T03:52:07.420

这是[**演示小提琴**](http://jsfiddle.net/onury/edMGf/)。（简单版）
***新：****查看[**更新的小提琴**](http://jsfiddle.net/onury/kBQdS/)（高级版）。*

假设您检索了以下 JSON 数据：

```
var jsonData = [
    { field1: 'value a1', field2: 'value a2', field3: 'value a3', field4: 'value a4' },
    { field1: 'value b1', field2: 'value b2', field3: 'value b3', field4: 'value b4' },
    { field1: 'value c1', field2: 'value c2', field3: 'value c3', field4: 'value c4' }
]; 
```

你有这张桌子：

```
<table id="data-table">
    <tr><td>There are no items...</td></tr>
</table> 
```

现在，您需要一种可以以可自定义的顺序和存在方式解析值的方法。例如，如果您可以将字段数组传递给解析器函数；您可以设置字段的顺序，如果您愿意，可以省略一两个字段：

```
loadTable('data-table', ['field1', 'field2', 'field3'], jsonData); 
```

请注意，`field4`未解析。

该`loadTable`函数遍历返回数组的项目，并使用 a`<tr>`中的每个字段值创建 a `<td>`。这是简单的功能：

```
function loadTable(tableId, fields, data) {
    //$('#' + tableId).empty(); //not really necessary
    var rows = '';
    $.each(data, function(index, item) {
        var row = '<tr>';
        $.each(fields, function(index, field) {
            row += '<td>' + item[field+''] + '</td>';
        });
        rows += row + '<tr>';
    });
    $('#' + tableId).html(rows);
} 
```

## 更新：

增加了对：

*   表头
*   默认文本（用于空列表）
*   附加列表
*   清理桌子
*   ETC...

您现在可以简单地包含一个空表，`dynamicTable`其余的将处理：

```
<table id="data-table"></table> 
```

调用`dynamicTable.config()`方法配置表：

```
var dt = dynamicTable.config('data-table', //id of the table
                             ['field2', 'field1', 'field3'], //field names
                             ['header 1', 'header 2', 'header 3'], //set to null for field names to be used as header names instead of custom headers
                             'There are no items to list...'); //default text for no items 
```

然后调用`dt.load(data);`加载新数据（如果有，则删除前一个列表），
或者调用`dt.load(data, true);`将新数据附加到前一个列表的末尾。

调用`dt.clear();`方法将清除整个列表。

[**在这里更新了小提琴**](http://jsfiddle.net/onury/kBQdS/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T03:39:48.290

您可以遍历您的 JSON 对象。

```
$.each(JSON_Object, function(key, value) {
    // Write your code here
}); 
```

然后你可以简单地在你的表中附加数据。

```
$('#yourTableName tr:last').after('<tr><td>John</td><td>$500</td></tr>'); 
```

由于您特别提到您不需要 3rd 方库，因此您可以执行上述操作。但是，如果您需要具有所有功能的数据集，您可以考虑使用一些插件，例如[http://datatables.net/](http://datatables.net/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-20T10:33:36.180

如果有问题的表与表 XML 中的项目引用关联到 oData 服务（例如，Fiori 中的标准），`items="{/ReportSet}"`则使用过滤器更新表的请求将自动更新表项目，即在 JS 中：

```
eTable.bindItems(sPathR,template,null,this.instanceFilter); 
```

*   sPathR 是`/ReportSet`上面的实体集
*   `template`应该是表中的项目模板
*   `this.instanceFilter`是调用前定义的过滤器集

# c# - 在 GridView 中对内容进行分组

> ID：14949216
> 
> 赞同：1
> 
> 时间：2013-02-19T03:12:29.467
> 
> 标签：c#, asp.net, gridview

我的 GridView 中有一些行。这些项目分为一些类别。例如，前 10 行分类为一个类别，后 7 行分类为第二个类别。

Binding DataTable 中有一个名为 category 的列。基于该列，gridview 必须分为几类。

在我的意义上，分组是必须为特定类别更改类别的背景颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T03:59:04.683

您可以为每个类别创建一个 CSS 类来设置您想要的背景颜色。然后在 RowDataBound 事件中为 GridView 中的每个数据行设置 CSS 类。

```
protected void MyGridView_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        e.Row.CssClass = ((MyDataClass) e.Row.DataItem).Category;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T03:37:26.640

尝试使用 ListView 的模板来利用这种分组功能。

[ListView 按数据字段分组](http://forums.asp.net/t/1532977.aspx/1)

# java - 将 servlet cookie 格式化为 http 友好格式

> ID：14949223
> 
> 赞同：3
> 
> 时间：2013-02-19T03:13:35.947
> 
> 标签：java, http, servlets, cookies

给定一个 javax.servlet.http.Cookie 对象，是否有一种方法可以将 cookie 格式化为 http 友好格式，以便我可以在响应中发送它？同样，给定请求中的 cookie 标头，是否有将 cookie 解析为 javax.servlet.http.Cookie 对象的方法？我已经查看了所有内容，但找不到可以做到这一点的方法。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T03:24:11.717

您可以将[HttpCookie](http://docs.oracle.com/javase/6/docs/api/java/net/HttpCookie.html)类用于您自己的实现。使用它的`toString()`功能

`Constructs a cookie header string representation of this cookie, which is in the format defined by corresponding cookie specification, but without the leading "Cookie:" token.`

在此之后将标头添加`Set-Cookie:THE_TO_STRING_VALUE`到响应中，就是这样。

要读回 cookie，您需要解析`headers`.

# git - git 撤消更改

> ID：14949224
> 
> 赞同：0
> 
> 时间：2013-02-19T03:13:41.877
> 
> 标签：git, github

我已经在我的 fork 中压缩了 2 个提交，并且有一个请求请求在 github 中掌握。

第一次提交有一些格式更改。

在我的拉取请求中，它显示了我所做的格式更改，我不想被推送到主控。

有什么方法可以让我在不显示这些更改的情况下获得拉取请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:51:02.667

创建一个新分支。

```
git checkout -b newbranch <commit-before-squashed-commits> 
```

樱桃选择你想要的那个。如果您没有 ID，请查看`git reflog`以找到它们。

```
git cherry-pick <commit-id-of-one-you-want> 
```

然后推那个。

# spring-mvc - 实时视图更新

> ID：14949225
> 
> 赞同：1
> 
> 时间：2013-02-19T03:13:44.037
> 
> 标签：spring-mvc

我计划使用 Spring MVC 开发一个管理工具。一个视图将显示订单更新，其中用户将输入产品代码和更新状态。对于数据库中更新的每条记录，我想实时显示更新的订单记录。

我不确定如何在控制器的视图中显示这个 - 我是使用 jquery 网格来执行这个还是在 spring mvc 中内置了一些功能

[阅读这篇文章](http://blog.springsource.org/2012/05/13/spring-mvc-3-2-preview-adding-long-polling-to-an-existing-web-application/)，但这对于我的简单应用程序来说似乎有点过头了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:27:10.890

如果用户正在您的视图中填写表单（输入产品代码和更新状态）并且您希望在他们提交后在该视图中显示数据（无需重新加载页面），您将需要使用 AJAX。将 JavaScript 函数与表单中的事件挂钩：

```
$("#submit_button").click(function(){

   $.ajax("/path/to/controller/route", {

     // Insert various request options...

     data: {
       // data to be sent along with the reqest.
     }

     success: function(data){

        // Define function that is fired when the AJAX request returns successfully.

     }

   });

}); 
```

该路径应该到达服务器端的端点，该端点将对您想要的记录执行更新，并且可以将您想要的记录信息返回给客户端。当请求成功返回时，您可以通过成功函数的`data`参数对数据执行任何操作。您可以在此处找到有关 jQuery AJAX 函数的更多信息，并[在](http://api.jquery.com/category/events/)[此处](http://api.jquery.com/category/ajax/)找到有关 jQuery 事件的更多信息。

如果“实时”是指在计时器上，而不是在某些用户触发的事件上，则解决方案类似，但 AJAX 请求将在`setTimeout()`call 的回调函数或类似的 jQuery 提供的函数中定义（例如`delay()`）

# java - 在显示标签中格式化日期

> ID：14949226
> 
> 赞同：2
> 
> 时间：2013-02-19T03:13:51.970
> 
> 标签：java, jsp, struts2, displaytag

我正在使用 Struts2 和 Display 标签库。

```
<display:table name="list" pagesize="3">
    <display:column property="date" title="DATE" />         
</display:table> 
```

如何格式化上面的日期列？例如 m/d/yyyy

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T03:28:48.763

用这个：

```
<display:table name="list" pagesize="3">
    <display:column property="date" title="DATE" format="{0,date,MM/dd/yyyy}" /> 
</display:table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-07T10:35:25.440

```
<display:table name="${dao.lista()}" pagesize="5">
    <display:column property="id"/>
    <display:column property="nome" />
    <display:column property="email" />
    <display:column property="endereco" />                                                      
    <display:column property="dataNascimento.time" title="DATE" format="{0,date,MM/dd/yyyy}"/>                                        
</display:table> 
```

# xcode - 隐藏/切换 iAd 和 AdMob

> ID：14949230
> 
> 赞同：0
> 
> 时间：2013-02-19T03:14:20.413
> 
> 标签：xcode, admob, iad

当 iAd 无法接收广告时，我正在用 AdMob 补充我的 iAd。我想知道的是，对于当前不提供广告的网络横幅，是否可以将 alpha 设置为 0。即 SDK 是否足够聪明来处理这个问题，或者谷歌/苹果会认为我在试图欺骗他们吗？

我仍然想保留两者以防万一，例如，在较长的用户会话期间 iAd 开始出现，但一段时间后无法接收广告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:34:19.150

不确定 iAd，但我相信如果 AdMob 不可见，它会停止刷新，所以你应该没问题。

我建议您使用可以为您完成所有这些工作的中介解决方案。如果您已经在使用 AdMob，AdMob 已经有一个可以无缝集成的[中介解决方案。](http://support.google.com/admob/answer/2413211?hl=en)只需访问[mediation.admob.com](http://mediation.admob.com)并创建一个中介展示位置。将其配置为使用 iAd 和 AdMob 以及 eCPM 排序，iAd 的价值更高（因此总是先尝试）。然后，只需将您的 AdMob 站点 ID 替换为中介展示位置 ID，然后弹出[iAd 适配器](https://developers.google.com/mobile-ads-sdk/ad-network-mediation)库，您就有了一个中介解决方案设置，而无需担心如何自己管理这两个网络。

# ember.js - 我如何获得应用程序控制器？

> ID：14949235
> 
> 赞同：9
> 
> 时间：2013-02-19T03:14:50.990
> 
> 标签：ember.js

如何在 HomeController 中获取 ApplicationController？

```
 HomeController=Ember.Controller.Extend({
   init:function {
        // Here I want to get My application controller. Is there any way to get??
   }

 }) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-19T06:39:49.693

> 如何在 HomeController 中获取 ApplicationController？

要指定控制器之间的依赖关系（或需求），请使用以下`needs`属性：

```
HomeController=Ember.Controller.Extend({
  needs: ['application']
}) 
```

现在 Ember 将使应用程序控制器可以从您的 HomeController 内部以`controllers.application`. 您可以像使用其他任何东西一样使用它`HomeController`，甚至可以从您的模板中访问它：

```
<!-- inside `home` template -->
{{controllers.application}} 
```

有关控制器需求的更多详细信息，请参阅[http://darthdeus.github.com/blog/2013/01/27/controllers-needs-explained/ 。](http://darthdeus.github.com/blog/2013/01/27/controllers-needs-explained/)

顺便说一句：ember 控制器很少使用自定义的 init fx。考虑移动任何初始化逻辑来`setupController`挂钩路由。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T04:46:50.020

```
App.HomeController = Ember.Controller.extend({
  init: function () {
    var applicationController = this.controllerFor('application');
  }
}); 
```

# batch-processing - 如何修剪分层数据结构中的死分支

> ID：14949236
> 
> 赞同：1
> 
> 时间：2013-02-19T03:15:33.237
> 
> 标签：batch-processing, common-table-expression, hierarchical-data, recursive-query

我们有一个表，它有一个 int NodeID 列作为主键，一个自连接到 int ParentID 列和一个 varchar(25) Name 列。

我们需要一个查询来删除给定一组叶节点（或底层节点）的所有死分支。例如，如果给定一组如下所示的节点，如果传入 NodeID 4，则应删除节点 4，并且由于节点 2 不再有子节点，因此应将其删除。节点 1 仍然有一个子节点（节点 6），因此该过程将在那里停止。

```
 [0] ROOT
                      /        \ 
            [1] Node 1          [3] Node 3
            /         \                 \
      [2] Node 2     [6] Node 6      [5] Node 5
      /          
 [4] Node 4 
```

我有一个使用游标的解决方案，但我尽可能避免使用游标，并且更喜欢使用批处理方式来完成此操作。有没有办法用 CTE 做到这一点？或任何其他方式？

下面的 CTE 返回所有父母。我做了几次尝试将最后一个选择更改为删除节点仅包含单个子节点或不包含子节点的位置。我在这些方面尝试过的任何事情都没有执行。

任何方法都必须有一些方法来遍历层次结构并删除没有子节点的节点。

欢迎任何其他想法或方法。

```
WITH nAncestry (ParentID, NodeID, Name, AncestryID)
AS
(
    SELECT n.ParentID, n.NodeID, n.Name, 0 AS AncestryID
    FROM Node AS n
    WHERE n.NodeID=@nodeID

    UNION ALL

    SELECT n.ParentID, n.NodeID, n.Name, AncestryID + 1
    FROM Node AS n
    INNER JOIN nAncestry as a 
        ON a.ParentID = n.NodeID
)

SELECT ParentID, NodeID, Name
FROM nAncestry
WHERE NodeID <>0
ORDER BY  AncestryID DESC 
```

# c++ - 在 VS2010 项目中更改输出目录不起作用

> ID：14949249
> 
> 赞同：0
> 
> 时间：2013-02-19T03:16:36.993
> 
> 标签：c++, visual-studio-2010, visual-studio, visual-c++, mfc

我已将多个项目合并为一个解决方案。我创建了空解决方案并添加了这些项目，这是它的外观蓝图：

```
Root:
 Project1 - directory
 Project2 - directory
 Debug - directory
 Main.sln - file 
```

现在我想将两个项目中的可执行文件和 dll 定向到解决方案文件中显示的 \debug 文件夹。我进入项目属性>>配置属性>>常规>>“输出目录”并将其更改`output directory`为`$(SolutionDir)$(Configuration)\`新项目的默认值。

问题是它对创建输出文件的位置没有影响，它仍然是在旧目标中创建的。'Output Directory' 的旧路径是 .\Debug\ 并不重要。

这可能是因为`SolutionDir`&`Configuration`可能没有定义吗？我在哪里可以看到他们的定义或价值观？我还想创建一个新配置，即“带调试发布”我如何使用环境变量创建它？谢谢！

我的项目是 MFC/Visual C++。

**附加组件：** 这些标识符`SolutionDir`在脚本中定义的位置在哪里？我在 .vcxproj 文件中查找，但有提及。我创建了一个新的虚拟 VS2010 项目只是为了查看它的 .vcxproj 文件，但是这些标识的项目设置在我能看到的任何地方都没有定义！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T08:06:21.250

这很可能是由覆盖全局设置的特定设置引起的，即链接器的“输出”设置。这通常是从早期 Visual Studio 转换的结果。

您需要完成每个设置，注意那些值以粗体书写的设置，并使用“调试”或“发布”以及其他必要的设置重置为默认值（从下拉列表中选择）。

文件上也可能有特定的设置。我通常通过在记事本中打开项目并删除任何过多的设置来解决此问题。小心点。在 Notepad++ 或任何其他功能强大的编辑器中使用多行替换会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-21T21:05:34.977

我的一个 VS2010 项目中的中间目录设置也有类似的问题。无论我将其设置为什么，它都将始终使用 $(SolutionDir)$Configuration 的默认值。奇怪的是，同一解决方案中具有相同设置的其他项目工作得很好。

玩了一圈之后，我偶然发现了一个解决方案。

1.  单击属性页对话框中的设置。
2.  单击编辑框右侧的向下箭头按钮。
3.  选择“从父​​级或项目默认值继承”。
4.  点击“应用”。
5.  单击设置并将其更改为所需的值。

我不知道为什么会这样，但确实如此。似乎无论出于何种原因，宏都没有被正确评估。然后，在您应用继承的值之后，它似乎会自行重置并开始正确评估宏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T04:29:36.970

我想我也有类似的问题。

我最终做的是直接编辑 vcxproj 文件。找到此部分并为您的每个配置像这样编辑它：

```
 <PropertyGroup>
    <OutDir Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">$(SolutionDir)$(Configuration)\</OutDir>
    <OutDir Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">$(SolutionDir)$(Configuration)\</OutDir>
  </PropertyGroup> 
```

# jquery - jQuery Validate 方法检查特殊字符

> ID：14949257
> 
> 赞同：7
> 
> 时间：2013-02-19T03:17:33.390
> 
> 标签：jquery, regex, jquery-validate

我正在尝试（但失败）编写一个正则表达式语句来检查特殊字符，例如 !@#$%^&*()_+<>?'"{}[] 在我的 Javascript 表单验证中。

我知道这可能已经被问了 1000 次，但我面临着严重的时间压力。如果您不想回答下面的问题，并且可以向我指出上述问题的先前答案的方向，我将不胜感激。

在类似的注释中，谁能告诉我为什么当我输入小写“abc”等时出现以下错误？我很困惑。

```
jQuery.validator.addMethod("specialChars", function( value, element ) {
        var regex = new RegExp("^[a-zA-Z0-9]+$");
        var key = String.fromCharCode(event.charCode ? event.which : event.charCode);

        if (!regex.test(key)) {
           event.preventDefault();
           return false;
        }
    }, "please use only alphanumeric or alphabetic characters"); 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-19T03:29:41.163

不要从头开始编写自己的自定义方法，而是包含[`additional-methods.js`](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.0/additional-methods.js)文件并使用`alphanumeric`规则。

```
$(document).ready(function () {

    $('#myform').validate({
        rules: {
            field: {
                alphanumeric: true
            }
        }
    });

}); 
```

**演示：http: [//jsfiddle.net/YsAKx/](http://jsfiddle.net/YsAKx/)**

* * *

如果您不想包含其他外部文件，只需将默认`alphanumeric`方法复制出来...

```
jQuery.validator.addMethod("alphanumeric", function(value, element) {
    return this.optional(element) || /^\w+$/i.test(value);
}, "Letters, numbers, and underscores only please"); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-19T03:25:44.120

变化不大

```
jQuery.validator.addMethod("specialChars", function( value, element ) {
        var regex = new RegExp("^[a-zA-Z0-9]+$");
        var key = value;

        if (!regex.test(key)) {
           return false;
        }
        return true;
    }, "please use only alphanumeric or alphabetic characters"); 
```

1.  如果测试有效，您需要返回值 true

2.  验证器不是事件处理程序，因此您不能使用`event.preventDefault()`，这必须在`keypress`事件中完成。

3.  您需要测试传递给 validate 方法的值。

演示：[小提琴](http://jsfiddle.net/arunpjohny/KVdpU/2/)

注意：由于您使用的是`+`通配符，因此文本框中至少需要一个字符，您可能希望使用该`required`规则将其拆分为两条规则，并将通配符更改为`*`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-09T05:26:46.750

```
^[a-zA-Z0-9;,.!@#$%:{}[]?"^&*()/\']*|[^&;<>\`]* 
```

你想在这个 [] 大括号中添加特殊字符，`^[a-zA-Z0-9;,.!@#$%:{}[]?"^&*()/\']`而你不想在此处添加这部分`[^&;<>\`]`

# javascript - 在不使用边界框的情况下获取 svg 路径的尺寸

> ID：14949259
> 
> 赞同：1
> 
> 时间：2013-02-19T03:17:49.320
> 
> 标签：javascript, html, svg, jquery-svg, librsvg

有没有办法获取 svg 路径的尺寸并将其显示在 div 中？边界框不是一个选项，因为当涉及到贝塞尔曲线时，它在 Webkit 中是错误的。我正在修改 svg-edit 顺便说一句：[https ://code.google.com/p/svg-edit/](https://code.google.com/p/svg-edit/)

这是我目前使用的。

```
 <script>
    var myVar=setInterval(function(){getDimensions()},10);

    function getDimensions() 

    {

  svgNode = svgCanvas.getSelectedElems()[0];

var getw = svgNode.getBoundingClientRect().width;
var geth = svgNode.getBoundingClientRect().height;
getw= parseInt(getw);
geth= parseInt(geth);
 document.getElementById('heightbox').innerHTML = geth;
 document.getElementById('widthbox').innerHTML = getw;

}

    </script> 
```

不幸的是，边界框是不可靠的。除了bbox还有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T03:59:55.727

RaphaelJS 有一个用于确定路径边界框的实用方法 - [http://raphaeljs.com/reference.html#Raphael.pathBBox](http://raphaeljs.com/reference.html#Raphael.pathBBox)

```
var dims = Raphael.pathBBox(pathString);
var getw = dims.width;
var geth = dims.height; 
```

# c++ - 重载操作符<< 用于文本渲染

> ID：14949268
> 
> 赞同：4
> 
> 时间：2013-02-19T03:19:22.367
> 
> 标签：c++, templates, operator-overloading

我想创建一个类，通过使用 3D 渲染器提供类似 std::cout 或 QDebug 的功能来帮助我进行调试。

我现在正在使用以下渲染器方法

```
IRenderer::renderText(int posX, int posY, const float* color, const char* text, ...);

// E.g.
int i;
float f;
float color[] = {1, 1, 1, 1};

renderer->renderText(50, 50, color, "Float %f followed by int %i", f, i); 
```

这实际上工作正常，但我想知道是否可以创建一个允许我这样做的类：

```
debug() << "My variables: " << i << ", " << "f"; 
```

我假设会有一个模板函数可以`renderText()`根据输入类型构建要传递的字符串，但我不太确定如何实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T04:05:40.043

Rob 回答的另一种方法是`ostringstream`在您的自定义记录器类中包含一个，并使用析构函数进行记录：

```
#include <iostream>
#include <sstream>

class MyLogger
{
protected:
    std::ostringstream ss;

public:
    ~MyLogger()
    {
        std::cout << "Hey ma, I'm a custom logger! " << ss.str();

        //renderer->renderText(50, 50, color, ss.str());
    }

    std::ostringstream& Get()
    {
        return ss;
    }
};

int main()
{
    int foo = 12;
    bool bar = false;
    std::string baz = "hello world";

    MyLogger().Get() << foo << bar << baz << std::endl;

    // less verbose to use a macro:
#define MY_LOG() MyLogger().Get()
    MY_LOG() << baz << bar << foo << std::endl;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T03:47:24.693

我喜欢从 std::ostream 派生我的日志记录类，所以我得到了所有流的优点。诀窍是将所有特定于应用程序的代码放在相关的 streambuf 类中。考虑这个工作示例。要修改它以满足您的需要，只需 rewrite `CLogBuf::sync()`，如下所示：

```
int sync() { 
  renderer->renderText(50, 50, color, "%s", str());
  str("");
  return false;
} 
```

例子：

```
#include <iostream>
#include <sstream>

class CLogger : public std::ostream {
private:
    class CLogBuf : public std::stringbuf {
    private:
        // or whatever you need for your application
        std::string m_marker;
    public:
        CLogBuf(const std::string& marker) : m_marker(marker) { }
        ~CLogBuf() {  pubsync(); }
        int sync() { std::cout << m_marker << ": " << str(); str("");  return !std::cout; }
    };

public:
    // Other constructors could specify filename, etc
    // just remember to pass whatever you need to CLogBuf
    CLogger(const std::string& marker) : std::ostream(new CLogBuf(marker)) {}
    ~CLogger() { delete rdbuf(); }
};

int main()
{
    CLogger hi("hello");
    CLogger bye("goodbye");

    hi << "hello, world" << std::endl;
    hi << "Oops, forgot to flush.\n";
    bye << "goodbye, cruel world\n" << std::flush;
    bye << "Cough, cough.\n";
} 
```

# dokuwiki - 使用 Syntaxhighlighter3 时如何禁用内置代码框？

> ID：14949275
> 
> 赞同：4
> 
> 时间：2013-02-19T03:20:20.097
> 
> 标签：dokuwiki, syntaxhighlighter

![在此处输入图像描述](../Images/632560da1afc679a378599e534231116.png)

我正在使用 Dokuwiki 并希望在使用 Syntaxhighlighter3 时摆脱内置代码框（带有灰色轮廓的框）。

感谢是否有人知道如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T04:29:58.303

将这些行添加到 css 文件中（在您的情况下**为 shCore.css**）

```
box-shadow: 0 0 0 0 !important; 
```

文件**sxh3\styles\shCore.css**（当上述行插入第 28 行时）如下所示：

```
.syntaxhighlighter table tbody,
.syntaxhighlighter table thead,
.syntaxhighlighter table caption,
.syntaxhighlighter textarea {
  -moz-border-radius: 0 0 0 0 !important;
  -webkit-border-radius: 0 0 0 0 !important;
  box-shadow: 0 0 0 0 !important; /* <-- this line */
  background: none !important;
  border: 0 !important;
  bottom: auto !important;
  float: none !important;
  height: auto !important; 
```

# .net - 使用 ManualResetEvent 检查服务是否已完成处理

> ID：14949278
> 
> 赞同：1
> 
> 时间：2013-02-19T03:20:31.563
> 
> 标签：.net, c#-4.0, timer, windows-services

我有一个 Web 服务，我需要确保在调用 onstop() 时完成处理然后退出。当前，当调用 onstop() 时，服务会立即停止。我被告知要查看 ManualResetEvent 和 requeststop 标志。我到处寻找示例，甚至发现了其中的一些：

[如何安全地停止在 Windows 服务中运行的 C# .NET 线程？](https://stackoverflow.com/questions/1764898/how-do-i-safely-stop-a-c-sharp-net-thread-running-in-a-windows-service)

[在 ManualResetEvent 或 Thread.Sleep() 之间做出选择](https://stackoverflow.com/questions/1675936/to-make-a-choice-between-manualresetevent-or-thread-sleep)

[http://www.codeproject.com/Articles/19370/Windows-Services-Made-Simple](http://www.codeproject.com/Articles/19370/Windows-Services-Made-Simple)

但是我很难理解哪一个最适合我的情况。

下面的代码：

```
 System.Timers.Timer timer = new System.Timers.Timer();
        private volatile bool _requestStop = false;
        private static readonly string connStr = ConfigurationManager.ConnectionStrings["bedbankstandssConnectionString"].ConnectionString;
        private readonly ManualResetEvent _allDoneEvt = new ManualResetEvent(true);
        public InvService()
        {
            InitializeComponent();
        }

        protected override void OnStart(string[] args)
        {
            _requestStop = false;
            timer.Elapsed += timer_Elapsed;
            double pollingInterval = Convert.ToDouble(ConfigurationManager.AppSettings["PollingInterval"]);
            timer.Interval = pollingInterval;
            timer.Enabled = true;
            timer.Start();      
        }

        protected override void OnStop()
        {
            _requestStop = true;
            timer.Dispose();
        }

        protected override void OnContinue()
        { }

        protected override void OnPause()
        { }

        private void timer_Elapsed(object sender, EventArgs e)
        {
            if (!_requestStop)
            {
                timer.Start(); 
                InvProcessingChanges();     
            }               
        }

        private void InvProcessingChanges()
        { 
           //Processes changes to inventory
        } 
```

有没有经验丰富的windows服务的人可以帮助我？我刚刚完成了我的第一个工作服务，对 Windows 服务还很陌生。此服务需要在实际停止之前完成发送库存更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T03:52:44.517

您可以使用类似`ManualResetEvent`等到事件进入有信号状态后再完成的方法`Stop`。 `ManualResetEventSlim`考虑到您尝试在同一过程中发出信号，可能更合适。

基本上，您可以`Wait`在停止期间和处理呼叫`Reset`时调用事件，完成后调用`Set`。

例如

```
private ManualResetEventSlim resetEvent = new ManualResetEventSlim(false);

public void InvProcessingChanges()
{
    resetEventSlim.Reset();
    try
    {
        // TODO: *the* processing
    }
    finally
    {
        resetEvent.Set();
    }
}

public void WaitUntilProcessingComplete()
{
    resetEvent.Wait();
} 
```

并取决于您的服务：

```
 protected override void OnStop()
    {
        WaitUntilProcessingComplete();
    } 
```

# sql-server-2005 - 在 SQL Server 中删除行

> ID：14949280
> 
> 赞同：0
> 
> 时间：2013-02-19T03:20:46.423
> 
> 标签：sql-server-2005, delete-row

我想删除表中`Date`不等于`GetDate()`但我的查询不起作用的行，它说没有行受到影响。

这是我的 SQL 查询：

```
DELETE Message 
WHERE DateSent != (SELECT CONVERT(varchar, GETDATE(), 101)) 
```

这是我的 SELECT 语句：

```
SELECT 
   Account.Username + ' ' + '(' + convert(varchar, Message.DateSent, 101) + ')' + ':', 
   Message.Message, Message.samplecolumn 
FROM 
   Account 
INNER JOIN 
   Message ON Account.EmpID = Message.EmpID 
ORDER BY 
   Message.MessageID 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:23:52.890

如果`DateSent`是日期，则不需要将`GETDATE()`值转换为字符串。

```
Delete Message where CONVERT(DATETIME, DateSent, 101) <> GETDATE() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:58:47.830

尝试，

```
DELETE FROM tablename
WHERE CONVERT(varchar, DateSent, 101)  <> CONVERT(varchar, GETDATE(), 101) 
```

这将删除所有其他日期的记录，而不考虑时间部分。

# c# - .NET 4.0 应用程序在从另一个 .NET 4.0 (C#) 应用程序启动时抛出 ApplicationException

> ID：14949282
> 
> 赞同：0
> 
> 时间：2013-02-19T03:20:59.417
> 
> 标签：c#, .net-4.0, mutex, process.start

1.  为什么第 3 方应用程序从命令行启动时的行为与使用 C# 应用程序启动时的行为不同`System.Diagnostics.Process.Start("ThirdPartyApp.exe");`？

2.  有没有办法在 C# 中启动应用程序，使其行为与从命令 shell 启动时*完全*一样？

**详细信息：** 我的 PC 上安装并运行了第 3 方 .NET 4.0 应用程序（没有可用的源代码）。它带有在 IIS 中运行的 Web 服务。我编写了一个使用 SOAP 消息调用这些 Web 服务的 C# 应用程序。（这两个应用程序都安装并在同一台 PC 上运行。）如果在启动我的应用程序之前运行第 3 方应用程序，我可以毫无问题地与之通信。如果在启动我的应用程序之前第 3 方应用程序没有运行，我希望能够启动它。我尝试了以下代码：

```
if (!System.Diagnostics.Process.GetProcesses().Select(rec => rec.ProcessName).Contains("ThirdPartyApp"))
{
    System.Diagnostics.Process.Start("ThirdPartyApp.exe");
} 
```

如果我尝试通过我的 SOAP 客户端访问 Web 服务：

```
using (var soapClient = new ThirdPartyAppSoapClient())
{
    soapClient.SomeWebService();
} 
```

在调用 时`SomeWebService`，第 3 方应用程序抛出以下异常：

```
2013-02-18 19:43:33,884 [17] ERROR ThirdPartyApp.Manager Error Exception Caught
System.IO.FileNotFoundException: Could not load file or assembly 'file:///C:\Pro
gram Files (x86)\Common Files\Microsoft Shared\DevServer\10.0\ThirdPartyDependen
cy.dll' or one of its dependencies. The system cannot find the file specified.
File name: 'file:///C:\Program Files (x86)\Common Files\Microsoft Shared\DevServ
er\10.0\ThirdPartyDependency.dll'
   at System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String cod
eBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark&
stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppre
ssSecurityChecks)
   at System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName as
semblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntr
ospection, Boolean suppressSecurityChecks)
   at System.Reflection.RuntimeAssembly.InternalLoadFrom(String assemblyFile, Ev
idence securityEvidence, Byte[] hashValue, AssemblyHashAlgorithm hashAlgorithm,
Boolean forIntrospection, Boolean suppressSecurityChecks, StackCrawlMark& stackM
ark)
   at System.Reflection.Assembly.LoadFrom(String assemblyFile)
   at ...

WRN: Assembly binding logging is turned OFF.
To enable assembly bind failure logging, set the registry value [HKLM\Software\M
icrosoft\Fusion!EnableLog] (DWORD) to 1.
Note: There is some performance penalty associated with assembly bind failure lo
gging.
To turn this feature off, remove the registry value [HKLM\Software\Microsoft\Fus
ion!EnableLog].

Unhandled Exception: System.ApplicationException: Object synchronization method
was called from an unsynchronized block of code.
   at System.Threading.Mutex.ReleaseMutex()
   at ...
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, C
ontextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, C
ontextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

如果在我启动我的应用程序之前 3rd 方应用程序已经在运行，我可以正常调用`SomeWebService`，所以我很难相信缺少依赖项；但为了幽默这个第 3 方应用程序，我将丢失的文件复制到指定的文件夹中，看看是否能解决问题。关于缺少依赖项的第一条错误消息随后更改为 InvalidCastException，但第二条错误消息 ( `System.ApplicationException: Object synchronization method was called from an unsynchronized block of code.`) 仍然出现并且保持不变。

任何有助于理解我做错了什么，以及如何让这个第 3 方应用程序无论是从 C# 应用程序内部还是外部启动都表现相同，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:25:25.983

它可能与您的应用程序在其中运行的用户上下文有关，例如，如果您以管理员身份运行您的应用程序，`Process.Start`将尝试在相同的上下文中启动该进程。

请发布以下内容`InvalidCastException`

# maven - 生成 Cobertura 覆盖率报告时，Hudson 构建失败并出现 NoClassDefFoundError

> ID：14949285
> 
> 赞同：3
> 
> 时间：2013-02-19T03:21:31.447
> 
> 标签：maven, hudson, cobertura

我在使用 Hudson 和 Maven 生成 Cobertura 报告时遇到问题，我希望这里的某个人可能有解决方案。

我可以看到当 hudson 构建我的项目时会生成 cobertura 工件。但是当我配置我的 hudson 项目以发布 Cobertura 覆盖率报告时，我看到构建失败并出现以下错误：

```
Publishing Cobertura coverage report ...
Publishing Cobertura coverage results ...
FATAL: org/jfree/chart/axis/CategoryAxis
java.lang.NoClassDefFoundError: org/jfree/chart/axis/CategoryAxis
  at hudson.plugins.cobertura.CoberturaXmlHandler.startDocument(...) 
```

构建输出显示 Java 版本为 1.6.0_38

如果我配置我的项目以便不生成 Cobertura 覆盖率报告，则构建成功。

以下插件安装在 hudson 上：

*   Findbugs（版本 4.41-h-2）
*   Checkstyle（版本 3.28-h-1）
*   Cobertura（版本 1-6-h-1）
*   静态分析收集器（版本 1.28-h-1）
*   静态分析实用程序（版本 1.42-h-1）
*   Maven 3 构建（版本 3.0.0）

使用以下 maven 命令：

*   全新安装 findbugs:findbugs checkstyle:checkstyle cobertura:cobertura

有关如何解决此问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:36:29.620

您还需要安装[JFreeChart 插件](https://github.com/hudson3-plugins/jfreechart-plugin#readme)，它是在 cobertura 中生成图表所必需的（这就是为什么该类在运行 cobertura 时未发现异常的原因），但它[已从](http://wiki.hudson-ci.org/display/HUDSON/Hudson+at+Eclipse#HudsonatEclipse-PostCreationProvisioningPhase) 主要的 hudson 发行版中[删除：](http://issues.hudson-ci.org/browse/HUDSON-8846)

> (JFreeChart ...) 移至外部插件。可从 Alpha 版本获得。任何使用 JFreechart 的外部插件都需要添加对此外部插件的依赖以保持兼容性。对于未来的图表需求，BIRT Charts 现在捆绑为核心插件

[编辑：在这里](https://github.com/hudson3-plugins/cobertura-plugin/issues/1)看到的传递依赖中有一个错误。安装 cobertura-plugin 版本 1.6-h-3。[mvn](http://mvnrepository.com/artifact/org.hudsonci.plugins/cobertura/1.6-h-3)

# google-app-engine - 我可以在 GAE 数据存储模型中具有可选属性吗？

> ID：14949288
> 
> 赞同：3
> 
> 时间：2013-02-19T03:22:10.993
> 
> 标签：google-app-engine, google-cloud-datastore, geospatial, optional

我有一个 GAE 应用程序，我在数据库中使用[地理](http://code.google.com/p/geomodel/)模型作为基于位置的模型。该模型有两种“类型”，但是，它们需要一起进行地理查询。这两种“类型”共享一组基本属性，但第二种类型有更多。有什么方法可以让这些其他属性成为可选的，而不仅仅是将它们设置为虚假值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T04:40:31.620

在数据存储中，实体彼此独立。您可以拥有具有不同属性集的相同种类的不同实体。如果您在应用程序的新版本中添加一些新属性，并且数据存储区中已存在的实体将不具有这些属性，这种情况很常见。

但是，在您的代码中，对于任何给定的版本，您最终都会为您的种类声明一个模型。您可以选择不为不同类型的某些属性分配值。

只需确保您的代码正确处理属性不存在或设置为无的情况。

# linux - 内核利用shellcode

> ID：14949289
> 
> 赞同：-1
> 
> 时间：2013-02-19T03:22:21.660
> 
> 标签：linux, assembly, x86, kernel, shellcode

我想在 32 位 Linux 上为内核模式编写 shellcode，它将执行此操作：

```
commit_creds (prepare_kernel_cred(0)); 
```

所以我创建了一个文件：

```
xor eax, eax
call 0x1234567
call 0x1234568
ret 
```

其中 0x1234567 是 prepare_kernel_cred 的地址，0x1234568 是 commit_creds 的地址，两者都是从 /proc/kallsyms 中找到的。

我用 nasm -f elf 和 objdump -d 组装它以获得机器码。

我得到类似的东西：

```
31 c0               which is xor eax, eax
e8 7c 67 06 c1      which is call prepare_kernel_cred
e8 7c 65 06 c1      which is call commit_creds
c3                  which is ret 
```

这行不通。但是，使用`e8 79`代替`e8 7c`和`e8 74`代替第二个`e8 7c`，有效。我不记得我从哪里得到第二个机器代码（我把它放在不同的文件中），但我很好奇为什么这会起作用，而不是像那样简单地组装它会起作用。

这是什么类型的`CALL`？为什么像上面显示的那样简单地组装代码不起作用？`e8 79`如果我将and用于 CALL，我的玩具漏洞利用可以很好地解决我的人工内核错误`e8 74`，但是当我使用来自 nasm/objdump 的组装机器代码时会失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:17:01.580

以 E8h 开头的 CALL 变体是对由相对于当前指令的位移指定的地址的近调用。这解释了为什么不同指令的值需要不同。不过，我不知道你是如何让 nasm 发出该代码的。你确定这不是家庭作业？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:35:51.627

我发现我之前使用过以下命令来编译它：

```
gcc -m32 -Ttext=0 -nostdlib 
```

这给了我与以前相同的结果。我还收到一条警告，它默认从 0x0 开始。

但是为什么 nasm 不重现这个呢？我检查了 objdump，两个文件中的起始地址似乎都是 0x0。

# asp.net - ASP.NET WebApi Odata 错误 404

> ID：14949292
> 
> 赞同：1
> 
> 时间：2013-02-19T03:22:39.013
> 
> 标签：asp.net, web-services, rest, asp.net-web-api, odata

我是 OData 的新手。

因此，我非常密切地关注本教程。( [http://www.asp.net/web-api/overview/odata-support-in-aspnet-web-api/getting-started-with-odata-in-web-api/create-a-read-only -odata-端点](http://www.asp.net/web-api/overview/odata-support-in-aspnet-web-api/getting-started-with-odata-in-web-api/create-a-read-only-odata-endpoint)）

但是，在教程的第二部分（[http://www.asp.net/web-api/overview/odata-support-in-aspnet-web-api/getting-started-with-odata-in-web- api/explore-the-odata-endpoint](http://www.asp.net/web-api/overview/odata-support-in-aspnet-web-api/getting-started-with-odata-in-web-api/explore-the-odata-endpoint) )，当我尝试`http://localhost:52868/odata/products.svc`在 fiddler 或浏览器中浏览时，出现 404 错误。

我安装的 OData 包是这个[http://www.nuget.org/packages/microsoft.aspnet.webapi.odata](http://www.nuget.org/packages/microsoft.aspnet.webapi.odata)

包是18号刚发布的，不知道自教程发布差不多一个月后有没有什么变化

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T05:03:41.963

教程在这里有点偏离。如果您这样定义路线：

```
config.Routes.MapODataRoute("ODataRoute", "odata", model); 
```

然后你需要浏览到：

```
http://localhost:52868/odata 
```

查看服务文档。同样，您可以访问：

```
http://localhost:52868/odata/$metadata 
```

查看元数据文档，以及

```
http://localhost:52868/odata/Products 
```

获取 OData 中的 Products 实体集。

# android - Android UI 的问题：主主题与弹出窗口的主题不匹配

> ID：14949296
> 
> 赞同：0
> 
> 时间：2013-02-19T03:23:23.077
> 
> 标签：android, android-ui, android-theme

因此，我仍在开发我的消息传递应用程序，并且我自己已经成功实现了一些弹出窗口，但是结果并没有完全符合我的要求...

![在此处输入图像描述](../Images/86f3a5c20771525eaec27d253ccdcb3e.png)

![在此处输入图像描述](../Images/a1406c744472c13d21db9e3f22e78324.png)

主题应该是严格的白色背景上的黑色文本，零透明度 ( `Theme.Light.NoTitleBar`)。虽然我的活动本身没有任何问题，但我的问题在于弹出窗口，其主题似乎与我预期的不匹配。谁能告诉我如何解决这些问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:23:48.803

看起来经过多次试验和错误，我只需要强制视图使用特定的样式/主题。

对于弹出菜单（PopupWindow）：

```
menu.setBackgroundDrawable(getResources().getDrawable(
            android.R.color.background_light)); 
```

对于对话框（DialogFragment），它是...：

```
setStyle(android.R.style.Widget_ListView, android.R.style.Theme_NoTitleBar); 
```

...或者它只是纠正了自己。

# jekyll - Octopress HTML 包含参数

> ID：14949298
> 
> 赞同：2
> 
> 时间：2013-02-19T03:23:51.210
> 
> 标签：jekyll, octopress

我想在博客文章中包含 HTML 片段，并将代码放在一个地方。在仔细阅读框架后，我已经能够让它工作：

```
source
  _includes
    custom
      foo.html

{% include custom/foo.html %} 
```

我的问题：有没有办法可以将参数传递给 foo.html？我只是想传入一些字符串并以格式化的方式输出它们，并且无法弄清楚我缺少什么。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T02:19:40.213

没有办法做到这一点，因为 Jekyll 是静态的。根据定义，您可以从一个文件传递到另一个文件的任何内容都是已知值，因为它必须在站点生成时定义。由于您不能传递动态值，因此这种间接方式没有意义，因为您可以将静态值放在它本来应该存在的位置。

如果您有例如生成 10 个大部分相似但略有不同的输出块的用例，则使用插件来完成使用变量隔离这些更改的任务。这为您提供了一些灵活性，同时仍将值放入将使用它的模板中。

这是一个液体标签的例子，它抽象了生成带有特定hrefs的twitter引导导航标签。

```
module Jekyll
  class XmlJsonTabsTag < Liquid::Tag
    def initialize(tag_name, markup, tokens)
      @methodname = markup.strip 
      super
    end

    def render(context)
      #wondering what this syntax is? google "here document"
      <<-HTML
        <ul class="nav nav-tabs">
            <li class="active">
                <a href="##{@methodname}-json" data-toggle="tab">JSON</a>
            </li>
            <li>
                <a href="##{@methodname}-xml" data-toggle="tab">XML</a>
            </li>
        </ul>
      HTML
    end
  end
end

Liquid::Template.register_tag('xmljsontabs', Jekyll::XmlJsonTabsTag) 
```

`@methodname`在模板的液体标签中传递要使用的值：

```
{% xmljsontabs foo %} 
```

输出类似

```
<ul class="nav nav-tabs">
  <li class="active">
    <a href="#foo-json" data-toggle="tab">JSON</a>
  </li>
  <li>
    <a href="#foo-xml" data-toggle="tab">XML</a>
  </li>
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T03:36:26.723

你不能。但是您可以使用其他方式，例如主题所做的事情。

首先，在 in 中设置你想要的格式化样式`custom/foo.html`，例如我在`customfooter`in 中添加一个`source/_includes/custom/footer.html`：

```
<p>
  Copyright &copy; {{ site.time | date: "%Y" }} - {{ site.author }} -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
  {{ site:customfooter }}
</p> 
```

然后，设置您要设置的字符串`_config.yml`：

```
url: http://fann.im
customfooter: My custom footer, bala bala. 
```

希望这会帮助你。

# java - android上TextView的空指针异常，没有明显的原因

> ID：14949303
> 
> 赞同：-1
> 
> 时间：2013-02-19T03:24:11.647
> 
> 标签：java, android, android-activity, nullpointerexception

我有一个非常烦人的错误，我无法弄清楚是什么原因造成的。它看到我在尝试从另一个具有 Intent 的活动启动活动时遇到空指针异常。我尝试了我能想到的所有可能的解决方案，检查了数百次语法，尝试在新布局之前使用主布局设置内容视图..什么都没有！我在这里需要一些紧急帮助。我在清单中声明了所有内容，以及布局 xml 文件。问题依赖于由主要活动调用的 ShowNoteActivity（来自 onItemClick() 方法）：我从 logcat 得到 nullpointerexception 和一堆我不知道它们是什么的其他错误。

无论如何，这是相关代码，如果您需要更多，请告诉我。

```
public class MainActivity extends Activity implements OnClickListener ,OnItemClickListener{

    public final static String EXTRA_MESSAGE = "assaf.notepad.MESSAGE";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        DatabaseManager db = new DatabaseManager(this);
        String[]notes = db.listNotes();
        ArrayAdapter<String>adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,notes);
        ListView lv = (ListView)findViewById(R.id.notes_list);
        lv.setAdapter(adapter);
        lv.setOnItemClickListener(this);
        ImageButton addNoteBtn = (ImageButton)findViewById(R.id.add_note);
        addNoteBtn.setOnClickListener(this);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public void onClick(View view) {
        Intent intent = new Intent(this, AddNoteActivity.class);
        startActivity(intent);
    }

    @Override
    public void onItemClick(AdapterView adapter, View view, int position, long id) {
        DatabaseManager db = new DatabaseManager(this);
        String[]notesContent = db.getNoteContent();
        Intent intent = new Intent(this,ShowNoteActivity.class);
        intent.putExtra(EXTRA_MESSAGE, notesContent[position]);
        startActivity(intent);

    }

} 
```

这是有问题的活动！

```
public class ShowNoteActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        Intent intent = getIntent();
        String text = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

        TextView textView = (TextView)findViewById(R.id.show_note);
        textView.setText(text);
        setContentView(R.layout.activity_show_note);
    }

} 
```

这是日志猫

```
02-19 03:18:07.861: E/AndroidRuntime(829): FATAL EXCEPTION: main
02-19 03:18:07.861: E/AndroidRuntime(829): java.lang.RuntimeException: Unable to start activity ComponentInfo{assaf.notepad/assaf.notepad.ShowNoteActivity}: java.lang.NullPointerException
02-19 03:18:07.861: E/AndroidRuntime(829):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-19 03:18:07.861: E/AndroidRuntime(829):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-19 03:18:07.861: E/AndroidRuntime(829):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-19 03:18:07.861: E/AndroidRuntime(829):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-19 03:18:07.861: E/AndroidRuntime(829):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-19 03:18:07.861: E/AndroidRuntime(829):  at android.os.Looper.loop(Looper.java:137)
02-19 03:18:07.861: E/AndroidRuntime(829):  at android.app.ActivityThread.main(ActivityThread.java:5039)
02-19 03:18:07.861: E/AndroidRuntime(829):  at java.lang.reflect.Method.invokeNative(Native Method)
02-19 03:18:07.861: E/AndroidRuntime(829):  at java.lang.reflect.Method.invoke(Method.java:511)
02-19 03:18:07.861: E/AndroidRuntime(829):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-19 03:18:07.861: E/AndroidRuntime(829):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-19 03:18:07.861: E/AndroidRuntime(829):  at dalvik.system.NativeStart.main(Native Method)
02-19 03:18:07.861: E/AndroidRuntime(829): Caused by: java.lang.NullPointerException
02-19 03:18:07.861: E/AndroidRuntime(829):  at assaf.notepad.ShowNoteActivity.onCreate(ShowNoteActivity.java:19)
02-19 03:18:07.861: E/AndroidRuntime(829):  at android.app.Activity.performCreate(Activity.java:5104)
02-19 03:18:07.861: E/AndroidRuntime(829):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-19 03:18:07.861: E/AndroidRuntime(829):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-19 03:18:07.861: E/AndroidRuntime(829):  ... 11 more 
```

相关的 xml ，“ShowNoteActivity” xml，有问题的 textView

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView 
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/board"
        android:scaleType="fitXY"/>

    <Button
        android:id="@+id/edit_btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginRight="10dp"
        android:layout_marginTop="10dp"
        android:text="@string/edit_btn"
        android:textColor="@color/white"/>

    <Button
        android:id="@+id/delete_btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@id/edit_btn"
        android:layout_marginTop="10dp"
        android:layout_marginRight="10dp"
        android:text="@string/delete_btn"
        android:textColor="@color/white"/>

    <ImageView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/paper"
        android:layout_below="@id/edit_btn"
        android:layout_marginTop="10dp"
        android:layout_marginRight="20dp"
        android:layout_marginLeft="20dp"
        android:layout_marginBottom="30dp"/>

    <TextView
        android:id="@+id/show_note"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@id/edit_btn"
        android:layout_marginTop="110dp"
        android:layout_marginRight="40dp"
        android:layout_marginLeft="45dp"
        android:layout_marginBottom="80dp"
        android:typeface="sans"
        android:textSize="10sp"/>

</RelativeLayou 
```

吨>

这不是数据库问题或类似问题，即使我尝试将“hello world”字符串传递给新活动，问题仍然存在。调用新活动时程序总是崩溃。

这是 xml 清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="assaf.notepad"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="9"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="assaf.notepad.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="assaf.notepad.AddNoteActivity">

        </activity>
        <activity
            android:name="assaf.notepad.ShowNoteActivity">

        </activity>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:28:55.130

`setContentView`问题是您在调用ShowNoteActivity之前尝试访问 TextView 。您的代码应该是：

```
setContentView(R.layout.activity_show_note);
TextView textView = (TextView)findViewById(R.id.show_note);
textView.setText(text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T03:58:36.257

尝试

```
setContentView(R.layout.activity_show_note);    
Intent intent = getIntent();
String text = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

TextView textView = (TextView)findViewById(R.id.show_note);
if(textView!=null && text!=null)
{
    Log.d("Mytag","Everything is right");
    textView.setText(text);
}
else
{
if(textView==null)
    Log.d("Mytag","Textview is null");
else
    Log.d("Mytag","Text is null");
} 
```

# javascript - 我在哪里可以找到 _id.$oid 的 mongodb 文档？

> ID：14949306
> 
> 赞同：0
> 
> 时间：2013-02-19T03:24:39.567
> 
> 标签：javascript, mongodb

我尝试浏览 mongodb 的 javascript 文档，但结果为空： [http ://api.mongodb.org/js/current/index.html](http://api.mongodb.org/js/current/index.html)

返回的数据存储项目似乎没有任何文档....

还有其他地方可以看吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:33:15.270

您是否只是在寻找有关 mongodb 中 ObjectId 的信息？

[http://docs.mongodb.org/manual/core/object-id/](http://docs.mongodb.org/manual/core/object-id/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:48:15.530

它的文档在[这里](http://docs.mongodb.org/manual/reference/mongodb-extended-json/)。

```
data_oid
{
  "$oid": "<id>"
} 
```

贝壳：

```
ObjectId( "<id>" ) 
```

笔记：

```
<id> is a 24-character hexadecimal string. 
```

[它是REST](http://docs.mongodb.org/ecosystem/tools/http-interfaces/) API扩展的一部分。它是一个[ObjectId](http://docs.mongodb.org/manual/core/object-id/)，映射到旨在更紧密地表示 BSON ObjectId 结构的结构（因为在 JavaScript 中没有 ObjectID 的等价物，因为它是一个 12 字节的数字）。

# rdf - 如何在jena rdf中创建方法public static boolean setType(Resource resource, String typeName)

> ID：14949308
> 
> 赞同：0
> 
> 时间：2013-02-19T03:25:07.707
> 
> 标签：rdf, jena, ontology

```
Can you please help me in building the code in setting a Resource to a Class

import com.hp.hpl.jena.ontology.Individual;
import com.hp.hpl.jena.ontology.OntModel;
import com.hp.hpl.jena.query.Dataset;
import com.hp.hpl.jena.query.ReadWrite;
import com.hp.hpl.jena.rdf.model.ModelFactory;
import com.hp.hpl.jena.rdf.model.Resource;
import com.hp.hpl.jena.tdb.TDBFactory;

public class ModelMain {

    String dbName = "DataBase";
    String ns1 =  "http://text.book/Someone#";
    String ns;
    Dataset ds;
    OntModel m; 
```

// 创建一个模型并存储在数据库中 public StoryModel(String Name){

```
 ns = ns1 + Name;
        ds = TDBFactory.createDataset(dbName);
        m = ModelFactory.createOntologyModel();

    } 
```

// 将资源分配给类
public void initModel() {

```
 m.createClass(ns + "Thing");
        m.createClass(ns + "Object");
        saveModel();

    } 
```

//读写模型 public void saveModel() {

```
 ds.begin(ReadWrite.WRITE);
        m.write(System.out, "RDF/XML-ABBREV");

    } 
```

// 创建资源
public Resource createResource(String resourceName, String clsName) {

```
 String resourceuri = ns + resourceName;
        String classuri = ns + className;

        Resource classr = m.getResource(classuri);
        Individual i = m.createIndividual(resourceuri, classr);

        return i;

    } 
```

// 为资源分配类型
public static boolean setType(Resource resource, String typeName) { //如何为资源分配类型 } }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T17:43:13.733

如果您有[OntResource](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/ontology/OntResource.html "OntResource Javadoc")（即[Individual](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/ontology/Individual.html "个人 Javadoc")），那么您可能会考虑使用[setPropertyValue(Property, RDFNode)](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/ontology/OntResource.html#setPropertyValue%28com.hp.hpl.jena.rdf.model.Property,%20com.hp.hpl.jena.rdf.model.RDFNode%29 "设置属性值 javadoc")方法来设置类型。请注意，这仅与[@AndyS 的答案](https://stackoverflow.com/a/14960064/2528639)不同，因为它在添加新三元组之前删除`RDF.type`了图中已经存在的任何其他属性。

从模型开始：

```
:a rdf:type :Cat .
:a rdf:type :DomesticAnimal . 
```

以下代码（假设`a`是`Individual`）：

```
a.setPropertyValue(RDF.type, TheTypeAsResource); 
```

将导致模型：

```
a: rdf:type :theType . 
```

当然，只有在您不打算向资源添加其他类型，而是打算为该资源设置特定类型时，这才会满足您的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:37:26.743

您需要在数据中添加一条语句：

```
model.add(resource, RDF.type, TheTypeAsAResource) ; 
```

# vb.net - Visual Basic 中的玩家移动导致暂停

> ID：14949310
> 
> 赞同：0
> 
> 时间：2013-02-19T03:25:41.643
> 
> 标签：vb.net, game-physics

我已经在 Visual Basic 中创建了自己的玩家动作，所以我有一个图片框，我将图片导入其中，然后我使用箭头键通过以下方式创建了动作：Public Class Form1

```
Private Sub Form1_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles Me.KeyDown
    If e.KeyData = Keys.Right Then
        Player.Left += 3
    End If

    If e.KeyData = Keys.Left Then
        Player.Left -= 3
    End If

    If e.KeyData = Keys.Up Then
        Player.Top -= 3
    End If

    If e.KeyData = Keys.Down Then
        Player.Top += 3
    End If
    Refresh()

End Sub 
```

唯一的问题是，在移动之前有一个小小的停顿。我不知道你们是否意识到，但是当 Key 按下的时候，这家伙停顿了一下，好像他知道他必须向上/向下/向左/向右移动，但不能。最终，他终于在停顿后移动到了指定区域。我似乎无法找出这是为什么...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T08:47:33.473

它是写作时的重复速度。如果您打开单词并持有一封信，也是如此。先写一个，过一段时间又重复。您应该使用 SDK 来制作游戏而不是这样做，但这可以解决您的问题：

不要使用该事件，而是使用计时器并检查按下的键。这将允许您同时（对角线）或更多需要同时按下多个键的方向移动。

```
Private Sub Timer1_Tick(sender As Object, e As EventArgs) Handles Timer1.Tick
    If GetKeyState(87) < 0 OrElse GetKeyState(38) < 0 Then : Player.Top -= iVel
    ElseIf GetKeyState(65) < 0 OrElse GetKeyState(37) < 0 Then : Player.Left -= iVel
    ElseIf GetKeyState(68) < 0 OrElse GetKeyState(39) < 0 Then : Player.Left += iVel
    ElseIf GetKeyState(83) < 0 OrElse GetKeyState(40) < 0 Then : Player.Top += iVel
    End If 
End Sub 
```

我建议你为定时器设置一个非常低的间隔（比如 20 左右）。用于按下按键的功能您必须定义它：

```
Private Declare Function GetKeyState Lib "user32" (ByVal nVirtKey As IntPtr) As Short 
```

希望这可以帮助。顺便说一句，我发布的代码将与箭头键和 WASD 键一起使用。

# ruby - 分隔单词并添加字符

> ID：14949312
> 
> 赞同：0
> 
> 时间：2013-02-19T03:25:47.137
> 
> 标签：ruby, regex

使用红宝石。拨弄[http://rubyfiddle.com/riddles/c9c29](http://rubyfiddle.com/riddles/c9c29)

```
# code
term = "123 code ruby"
f_term = term.gsub(/\s/, "% %").insert(0, "%").insert(-1, "%")
puts f_term 

# output
%123% %code% %ruby% 
```

你会如何重构我的`f_term`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T03:36:01.067

```
term.gsub(/\b/, '%')  # %123% %code% %ruby% 
```

由于这使用单词边界，因此行为与您的行为略有不同。该`/\b/`方法将返回您将产生`%cats%`的输入`cats``%% %% %cats% %% %%`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T03:37:47.280

## 只使用单词边界

假设您真正想做的只是用百分号包围每个单词，那么您实际上并不需要用您的字符串做所有这些体操。只需使用[String#gsub](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-gsub)并替换您的单词边界。例如：

```
term = '123 code ruby'
f_term = term.gsub /\b/, '%'
# => "%123% %code% %ruby%" 
```

# magento - 如何创建具有关联产品的可配置产品？

> ID：14949314
> 
> 赞同：3
> 
> 时间：2013-02-19T03:25:50.423
> 
> 标签：magento

以下代码确实创建了一个可配置的产品，但是，当我在后端打开产品时，会出现以下消息：

选择可配置属性“只有范围为“全局”、输入类型为“下拉”和用于创建可配置产品“是”的属性可用。” 将显示一个复选框（“颜色组”），在继续之前必须选中该复选框。

当我单击“继续”时，所有产品数据都按预期存在，但相关产品除外。

```
//Mage Product
$mpr = Mage::getModel('catalog/product');
$mpr
    ->setTypeId(Mage_Catalog_Model_Product_Type::TYPE_CONFIGURABLE)
    ->setTaxClassId(5)
    ->setVisibility(Mage_Catalog_Model_Product_Visibility::VISIBILITY_BOTH)
    ->setStatus(Mage_Catalog_Model_Product_Status::STATUS_ENABLED)
    ->setWebsiteIds(array(1))
    ->setAttributeSetId(4) // You can determine this another way if you need to.
    ->setSku("C12345")
    ->setName("C12345")
    ->setQty(25)
    ->setShortDescription('short description')
    ->setDescription('description')
    ->setPrice(1)
    ->setStockData(array(
        'use_config_manage_stock' => 1,
        'is_in_stock' => 1,
        'is_salable' => 1,
    ));

    $productData = array(
         '7039604' =>
            array('0' => array('attribute_id' => '85', 'label' => 'ROYAL','value_index' => '28563', 'is_percent' => 0, 'pricing_value' => '')
                 ,'1' => array('attribute_id' => '192', 'label' => '14', 'value_index' => '28728', 'is_percent' => 0, 'pricing_value' => '')
            )
    );
    $attributeData = array(
        '0' => array(
            'id' => NULL
            ,'label' => 'Color'
            ,'position' => NULL
            ,'values' => array(
                '0' => array('value_index' => 28563, 'label' => 'ROYAL', 'is_percent' => 0, 'pricing_value' => '0', 'attribute_id' => '85')
            )
            ,'attribute_id' => 85
            ,'attribute_code' => 'color'
            ,'frontend_label' => 'Color'
            ,'html_id' => 'config_super_product__attribute_0')
        ,'1' => array(
            'id' => NULL
            ,'label' => 'Rivers Size'
            ,'position' => NULL
            ,'values' => array(
                '0' => array('value_index' => 28728, 'label' => '14', 'is_percent' => 0, 'pricing_value' => '0', 'attribute_id' => '192')
            )
            ,'attribute_id' => 192
            ,'attribute_code' => 'rivers_size'
            ,'frontend_label' => 'Rivers Size'
            ,'html_id' => 'config_super_product__attribute_1')
    );
$mpr->setConfigurableProductsData($productData);
$mpr->setConfigurableAttributesData($attributeData);
$mpr->setCanSaveConfigurableAttributes(true);
$mpr->save(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-20T05:39:36.853

在 $mpr->save(); 之前添加此代码

```
$SKU = "any-simple product sku enter here";
$productid = Mage::getModel('catalog/product')
                  ->getIdBySku(trim($SKU));
$mpr->assignProduct($productid); 
```

并在 $SKU 变量中设置简单的产品 sku。我检查了当我选择全局变量然后在配置产品中看到相关产品之后。

它的工作正常！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:11:23.283

如果您被重定向到`select attribute`页面，这意味着您在此示例中设置的属性数据未正确保存。
尝试`catalog_product_super_attribute`在脚本运行后查看（应添加新行）。

# sql - 带有 Yes/No 列的 SQL SELECT 来说明 Customer 是否有关联的 Orders

> ID：14949315
> 
> 赞同：0
> 
> 时间：2013-02-19T03:25:53.157
> 
> 标签：sql, sql-server, select

我想创建一个返回客户列表的 SQL 语句，例如：

```
SELECT Id, FirstName, LastName FROM Customer 
```

显然，这部分很容易。

现在我想创建一个变量列，例如 HasOrders。我希望这是一个基于客户在订单表中是否有一个或多个订单的动态生成的布尔列。出于此问题的目的，假设订单是否打开无关紧要，只是该客户 ID 是否存在任何订单。

我希望 SELECT 语句返回所有客户，而不仅仅是带订单的客户。我需要根据客户是否有订单来做进一步的逻辑。

我不确定这是否可以通过 IF..ELSE、CASE 或嵌套 SELECT 来实现？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T03:28:30.090

```
SELECT  a.ID, a.FirstName, a.Lastname,
        CASE WHEN COUNT(b.CustID) > 0 THEN 'YES' ELSE 'NO' END AS HasOrders
FROM    Customer a
        LEFT JOIN Orders b
            ON a.ID = b.CustID        -- <<== the linking column on both tables
GROUP   BY a.ID, a.FirstName, a.Lastname 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/57c1f/1)

# ejb-3.1 - 使用 @PreDestroy 关闭数据库连接的有状态 Bean

> ID：14949316
> 
> 赞同：0
> 
> 时间：2013-02-19T03:26:18.727
> 
> 标签：ejb-3.1

我有一个用于进行几个数据库查询的有状态 bean。我在调用的第一个方法中打开连接，但我只想在 EJB 客户端真正完成有状态 bean 之后关闭连接。我认为我可以将关闭数据库连接的逻辑放在@PreDestroy 方法中。

这似乎有效，但我很好奇其中的含义。具体来说，EJB 会话何时完成？这是容器管理的事务，所以我假设当 EJB 客户端方法完成时，EJB 事务也会完成。具体来说，什么时候调用 PreDestroy 方法？交易还在吗？还是它已经提交并将自己放回池中？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:28:00.750

下面是规范的摘录，它可能会阐明有状态会话 bean 的生命周期。

*   在生命周期结束时，客户端调用注解为@Remove 的方法，并且EJB 容器调用注解为@PreDestroy 的方法（如果有）。然后 bean 的实例就可以进行垃圾回收了。

*   在会话 bean 的 PostConstruct 或 PreDestroy 生命周期回调拦截器方法中执行数据库操作并假设这些操作是客户端事务的一部分是错误的。PostConstruct 和 PreDestroy 方法不受事务属性控制，因为在这些方法中处理回滚会使会话实例的状态图变得非常复杂。

*   PreDestroy 方法在未指定的事务和安全上下文中调用。

*   PrePassivate 回调通知表明容器要钝化实例的意图。PostActivate 通知通知它刚刚被重新激活的实例。因为容器在有状态会话 bean 实例被钝化时会自动维护它的会话状态，所以大多数会话 bean 不需要这些通知。它们的目的是允许有状态会话 bean 维护那些需要在实例钝化之前关闭然后在实例激活期间重新打开的开放资源。

# sql - 如何在开始日期和结束日期之间循环/旋转以显示每月费用

> ID：14949318
> 
> 赞同：1
> 
> 时间：2013-02-19T03:26:25.327
> 
> 标签：sql, sql-server-2008, tsql, pivot

我有一个带有 PROJECTNAME、ACTUALCOST、PROJECTSTART 和 PROJECTEND 列的表，如下所示：

```
PROJECTNAME          ACTUAL COST          PROJECTSTART          PROJECTEND
abc                  1500                 2011-12-01            2012-07-31
prj1                 1170                 2012-01-09            2012-06-30  
xyz                  5350                 2012-01-30            2012-03-30 
```

我正在尝试获得如下输出：

```
PRJNAME     DEC11     JAN12     FEB12     MAR12     APR12     MAY12     JUN12     JUL12 ...
abc         187.5     187.5     187.5     187.5     187.5     187.5     187.5     187.5
prj1                  117       195       195       195       195       195 
```

我需要每个项目名称的每月成本明细，具体取决于每个月还剩多少天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:43:45.577

您可以使用该[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)函数来获取结果。

我建议这样做的方法是先编写一个硬编码版本，然后将其转换为动态 sql。

*`Actual Cost`注意：我通过除以项目开始/项目结束之间的天数来确定每月的成本。这至少应该让您开始编写实际报告。*

静态版本将与此类似：

```
;with cte as
(
  select projectname, [ACTUAL COST], [PROJECTSTART], [PROJECTEND]
  from yourtable
  union all
  select projectname, [ACTUAL COST], 
    dateadd(d, 1, PROJECTSTART),
    PROJECTEND
  from cte
  where dateadd(d, 1, PROJECTSTART) <= ProjectEnd
) 
select *
from
(
  select 
    my.projectname,
    my.monthyear,
    my.totaldayspermonth * a.perdaycost AmountPerMonth
  from
  (
    select projectname,
    left(datename(m, projectstart), 3) + cast(year(projectstart) as varchar(4)) monthyear,
    count(*) TotalDaysPerMonth
    from cte
    group by projectname,
      [actual cost],
      left(datename(m, projectstart), 3) + cast(year(projectstart) as varchar(4))
  ) my
  cross apply
  (
    select projectname, 
      round([actual cost] / (datediff(d, projectstart, projectend) *1.0), 2) PerDayCost
    from yourtable a
    where my.projectname = a.projectname
  ) a
) src
pivot
(
  max(AMOUNTPERMONTH)
  for monthyear in (Dec2011, Jan2012, Feb2012, Mar2012,
                    Apr2012, May2012, Jun2012, Jul2012, Aug2012)
) piv
OPTION(MAXRECURSION 0); 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/7e5d8/32)。

一旦有了静态版本，就可以更轻松地将其转换为动态 SQL。动态 SQL 将是：

```
;with cte as
(
  select projectname, [ACTUAL COST], [PROJECTSTART], [PROJECTEND]
  from yourtable
  union all
  select projectname, [ACTUAL COST], 
    dateadd(d, 1, PROJECTSTART),
    PROJECTEND
  from cte
  where dateadd(d, 1, PROJECTSTART) <= ProjectEnd
) 
select *
into #dates
from cte
OPTION(MAXRECURSION 0)

DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT ',' + QUOTENAME(left(datename(m, projectstart), 3) + cast(year(projectstart) as varchar(4))) 
                    from #dates
                    group by datename(m, projectstart), year(projectstart), month(projectstart)
                    order by year(projectstart), month(projectstart)
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = ';with cte as
              (
                select projectname, [ACTUAL COST], [PROJECTSTART], [PROJECTEND]
                from yourtable
                union all
                select projectname, [ACTUAL COST], 
                  dateadd(d, 1, PROJECTSTART),
                  PROJECTEND
                from cte
                where dateadd(d, 1, PROJECTSTART) <= ProjectEnd
              ) 
              select projectname, '+@cols+' 
              from
              (
                select 
                  my.projectname,
                  my.monthyear,
                  my.totaldayspermonth * a.perdaycost AmountPerMonth
                from
                (
                  select projectname,
                  left(datename(m, projectstart), 3) + cast(year(projectstart) as varchar(4)) monthyear,
                  count(*) TotalDaysPerMonth
                  from cte
                  group by projectname,
                    [actual cost],
                    left(datename(m, projectstart), 3) + cast(year(projectstart) as varchar(4))
                ) my
                cross apply
                (
                  select projectname, 
                    round([actual cost] / (datediff(d, projectstart, projectend) *1.0), 2) PerDayCost
                  from yourtable a
                  where my.projectname = a.projectname
                ) a
              ) src
              pivot
              (
                max(AMOUNTPERMONTH)
                for monthyear in ('+@cols+')
              )piv
              OPTION(MAXRECURSION 0)'

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/7c3a3/7)

两个查询的结果是：

```
| PROJECTNAME | DEC2011 | JAN2012 | FEB2012 | MAR2012 | APR2012 | MAY2012 | JUN2012 | JUL2012 |
-----------------------------------------------------------------------------------------------
|         abc |  191.27 |  191.27 |  178.93 |  191.27 |   185.1 |  191.27 |   185.1 |  191.27 |
|        prj1 |  (null) |  155.48 |  196.04 |  209.56 |   202.8 |  209.56 |   202.8 |  (null) |
|         xyz |  (null) |  178.34 | 2585.93 |  2675.1 |  (null) |  (null) |  (null) |  (null) | 
```

# java - 使用 @PostConstruct 时，Hibernate 找不到绑定到线程的会话

> ID：14949322
> 
> 赞同：1
> 
> 时间：2013-02-19T03:26:42.263
> 
> 标签：java, spring, hibernate, session, postconstruct

我正在修改一个较旧的 Spring 项目，以更多地反映 Spring 3.0.x 中应该如何完成的事情。

我所做的更改之一是对存储库/dao 层。按照最佳实践的建议，我不再从`HibernateDaoSupport`使用扩展`HibernateTemplate`，而是`SessionFactory`直接通过 using使用 Hibernate `sessionFactory.getCurrentSession()`，它应该与 Spring 3.0.x 及更高版本一起使用。

这对整个项目来说是一个非常大的好处，因为它摆脱了由`HibernateTemplate`. 但是，我刚刚注意到我不能再调用使用 @PostConstruct 的 Service 方法（或者`onStartUp`在 XML 应用程序上下文中使用 bean 的属性）

例如，这个方法过去使用 运行得很好`HibernateTemplate`，但现在 Hibernate 抛出一个异常，抱怨没有会话绑定到线程：

```
@Override
@PostConstruct
public void onStartUp() {
    logger.debug("Starting Bootstrap Service...");

    createSysAdminUser();
    createDefaultRoles();
    createDefaultThemes();

    createStopListIfDoesNotExist();
    stopListService.load();

    partialMappingService.load();
    dictionaryService.load();
} 
```

我可以删除这个`@PostConstruct`方法调用......它是系统中唯一的一个。当应用程序启动以引导新应用程序的数据时调用它。大多数时候，它在生产系统上什么都不做，但是将它用于新创建的测试和开发数据库很方便。

关于为什么以及如何解决它的任何想法？

谢谢！

编辑：这是我的事务管理建议配置：

```
<aop:config>
    <aop:advisor advice-ref="transactionAdvice"
                 pointcut="execution(* *..service.*.*(..))" order="1"/>
    <!-- gets sub packages like service.user -->
    <aop:advisor advice-ref="transactionAdvice"
                 pointcut="execution(* *..service.*.*.*(..))" order="2"/>
</aop:config>

<tx:advice id="transactionAdvice" transaction-manager="transactionManager">
    <tx:attributes>
        <tx:method name="find*" read-only="true" propagation="REQUIRED"/>
        <tx:method name="get*" read-only="true" propagation="REQUIRED"/>
        <tx:method name="*" propagation="REQUIRED"/>
    </tx:attributes>
</tx:advice> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:20:47.570

如[HibernateDaoSupport 类文档](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/orm/hibernate3/support/HibernateDaoSupport.html)中所述，“如果传入 SessionFactory，此类将创建自己的 HibernateTemplate 实例。默认情况下，该 HibernateTemplate 上的 'allowCreate' 标志将是 'true'。” 这意味着在旧系统下，您的 DAO 可以按需打开会话，而不受任何实际控制。

当 Spring 管理 SessionFactory 时，它会安装一个[SpringSessionContext](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/orm/hibernate3/SpringSessionContext.html)作为 Hibernate 的[CurrentSessionContext](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/context/CurrentSessionContext.html)。现在，当您调用时`SessionFactory.getCurrentSession()`，SpringSessionContext 在 Spring 管理的 ThreadLocal 中查找 Session，如果不存在则失败。会话通常以以下两种方式之一打开并放置在那里：使用 open-session-in-view 模式在每个新请求时都会这样做，并且启动事务也会这样做。在您的情况下，您没有执行代码来响应请求，因此 OSIV 没有发挥作用，而且您显然也没有处于活动事务中。使方法具有事务性将解决您的问题。

# facebook-graph-api - 无法使用应用访问令牌发布自定义操作

> ID：14949329
> 
> 赞同：0
> 
> 时间：2013-02-19T03:27:40.877
> 
> 标签：facebook-graph-api, oauth

我觉得我的头撞到了这里的墙上。我创建了一些自定义对象和一个自定义操作。要提交，我必须成功提交操作。

我使用开发人员站点 OpenGraph 页面上的“获取代码”按钮中的以下代码。

```
curl -F 'access_token=MY_ACCESSS_TOKEN' \
     -F 'content=http://samples.ogp.me/417795554977717' \
        'https://graph.facebook.com/me/myapp:myaction' 
```

我得到以下回复

```
{"error":
  {
    "message":"(#15) This method must be called with an app access_token.",
    "type":"OAuthException",
    "code":15
   }
 } 
```

嗯，我喜欢认为我是一个聪明的人。我知道如何从[本指南](https://developers.facebook.com/docs/technical-guides/opengraph/publishing-with-app-token/)中生成我的应用访问令牌，然后重试。

```
curl -F 'access_token=MY_APP_ACCESSS_TOKEN' \
     -F 'content=http://samples.ogp.me/417795554977717' \
        'https://graph.facebook.com/me/myapp:myaction' 
```

然后我得到了这个回应。

```
{"error":
  {
    "message":"A user access token is required to request this resource.",
    "type":"OAuthException",
    "code":102
   }
 } 
```

所以我显然处于一个永无止境的循环中。无论哪种方式，我都对此表示反对。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:30:48.113

当然，一旦我提交，我会通过更改各种设置找到答案。

而不是删除，我会回答任何在以后的生活中谷歌的人（除非他们最终修复它）。

在您的应用设置下，高级选项卡有一个名为“应用类型”的设置。如果设置为 Native/Desktop，您将无法发布操作。

但是，Facebook 自己的“获取代码”按钮的示例代码仍然无法正常工作——这令人担忧。

# jquery - 在外部内容加载到元素后，如何让 jQuery 平滑地为元素设置动画？

> ID：14949330
> 
> 赞同：0
> 
> 时间：2013-02-19T03:27:46.157
> 
> 标签：jquery, ajax

我尝试了以下代码示例的不同变体：

```
$(document).ready(function(){
   $('#demo').hide();
   $("button").click(function(){
      $("#demo").load("demo.php").show('medium');
   });
}); 
```

...但是动画“跳跃”，并且不流畅。就像`show()`函数假设隐藏`#demo`元素比加载新的外部信息时要小一样。元素中没有任何内容，`#demo`直到`load()`将其放在那里，因此它开始时比将外部内容加载到其中后要小。

我怎样才能使`show()`“理解”`#demo`实际上更大，其中加载的内容更大，所以它在激活时动画流畅？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T03:46:06.927

尝试在[.load()中使用](http://api.jquery.com/load/)[完整的回调函数](http://api.jquery.com/load/#callback-function)

```
$(document).ready(function(){

    var demo = $('#demo');

    demo.hide();
    $("button").click(function(){
        demo.load('demo.php', function() {
            demo.show('medium');
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T03:47:04.163

```
$("#demo").load("demo.php",function() {
    $("#demo").show('medium')
}); 
```

页面正在加载，而动画以“中等”速度显示容器。在 load 的回调中使用 show 函数。

[。显示（）](http://api.jquery.com/show/)

# java - 颜色检测

> ID：14949334
> 
> 赞同：0
> 
> 时间：2013-02-19T03:28:04.787
> 
> 标签：java, xml, colors, hex

我有包含 2222 种颜色的 XML 文件，其中有两个属性名字和第二个 rgb 值（实际上是它的十六进制值）。
我正在尝试显示用户单击鼠标的位置的颜色名称。 `String hexstring(parameter value)`是用户单击颜色的十六进制值，该值将与之进行比较`rgbvalue`（实际上它的十六进制值存储在 XML 文件中）如果两者都匹配，则它显示存储在 XML 文件中的颜色名称，但我的比较`if`语句不起作用

```
public static void xmlfilereader(String hexString)
    {  
    try{

       DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
            File file = new File("colore.xml");
            if (file.exists()) {
                Document doc = db.parse(file);
                Element docEle = doc.getDocumentElement();

                System.out.println("Root element of the document: "
                        + docEle.getNodeName());

                NodeList colorList = docEle.getElementsByTagName("color");
               System.out.println("Total Color: " + colorList.getLength());

                if (colorList != null && colorList.getLength() > 0) {
                    for (int i = 0; i < colorList.getLength(); i++) {

                        Node node = colorList.item(i);                     

                        if (node.getNodeType() == Node.ELEMENT_NODE) {
                           NodeList mycolorList = doc.getElementsByTagName("color");
                            Element colorElement = (Element) mycolorList.item(i);

                            String colorName = colorElement.getAttribute("name");
                            String rgbvalue = colorElement.getAttribute("rgb");

                                if(hexString.equalsIgnoreCase(rgbvalue) )
                                {
                                   System.out.println("color name: " + colorName + " Hex: " + rgbvalue);
                                }
                                else
                                {
                                    System.out.println("comparision if not working");
                                }
                      } 
```

**输出：**

```
Root element of the document: ColorDefinition

Total Color: 2222

comparision if not working

comparision if not working

comparision if not working
...... 
```

此代码仅与 xml 文件的第一种颜色进行比较

# java - Java 对象数组

> ID：14949336
> 
> 赞同：1
> 
> 时间：2013-02-19T03:28:32.527
> 
> 标签：java, arrays, object

我是 Java 的新手，我在使用对象数组时遇到了麻烦，答案可能很简单，但我看不到。

我有一个名为 Vectors 的类和一个名为 set_components() 的函数我尝试做的是创建一个对象数组，如下所示：

```
Vectors[] vec = new Vectors[2]; 
```

//然后像这样访问函数：

```
vec[0].set_components(); 
```

但是我收到此错误：线程“main”中的异常 java.lang.NullPointerException 为什么会这样？

如果我只为一个对象执行此操作，它会起作用。

```
Vector vec = new Vector();
vec.set_components(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T03:29:42.333

您的数组已构建，但没有填充任何内容，带有空引用。如果您在用实例填充数组之前尝试使用数组中的项目，您将获得如您所见的 NPE。将对象数组想象成一个蛋箱。您必须先用鸡蛋（矢量对象）填充它，然后才能使用它们制作煎蛋。通常这是通过 for 循环完成的。

```
for (int i = 0; i < vectors.length; i++) {
  vectors[i] = new Vector();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T03:30:07.413

每一个都`Vectors`应该被初始化

像这样：

```
for(int i = 0; i < vec.length; i++){
    vec[i] = new Vector();
} 
```

`Vectors[] vec = new Vectors[2]`行创建 2 个“向量”引用，而不是“向量”对象。

其中的每一个都是`null`最初提到的。然后，当您尝试使用 引用`null`say 的引用时`vec[0]`，`vec[0].set_components();`JVM 会说“等等，vec[0] 指向`null`。我无法取消引用它......让我抛出一个名为 NullPointerException 的异常”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T03:33:22.983

Java 对象从不作为表达式、变量、参数或数组元素出现。如果它不是原语，则它是参考。引用要么是空的，要么是指向对象的指针。

您创建了一个空引用数组。您需要更改数组的每个元素，使其成为指向 Vectors 对象的指针：`vec[0] = new Vectors();`或类似对象。

# javascript - JavaScript/jQuery 链接标记替换调用

> ID：14949338
> 
> 赞同：0
> 
> 时间：2013-02-19T03:28:45.023
> 
> 标签：javascript, jquery

我在第二次调用 .replaceWith 时遇到问题，它会覆盖用 .replaceWith 编写的旧内容。您如何处理如下问题：

```
if (data==-3){  
       $('message').replaceWith('ffgd');                                        
} else if (data==-4){
       $('message').replaceWith('dfdsfdsfds'); 
```

在数据为 -3 的第一次调用中，我看到了 ffgd。然后，当发生第二次调用并且数据 = -4 时，我知道 else if 块由于 console.log 消息而运行，但它不会覆盖 ffgd。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:33:17.540

一旦你使用原始元素就消失了......第二次`replaceWith`没有标签可以替换。`message`

也许您想替换它的内容，可以使用`text()`or`html()`方法完成

请参阅 API 文档： [http ://api.jquery.com/replaceWith/](http://api.jquery.com/replaceWith/)

# java - 使用spring MVC 3获取问号而不是重音字母

> ID：14949351
> 
> 赞同：9
> 
> 时间：2013-02-19T03:29:51.570
> 
> 标签：java, spring, unicode, diacritics

我尝试了很多东西，但不明白为什么我会得到？而是重音字符。

我在我的html上使用：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

我的控制器有以下代码

```
@RequestParam ("name") String name
name = name.trim();
system.out.println(name);
//response t?ata
//expected tábata 
```

我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T01:55:20.807

我可以通过在我的主模板上添加以下代码来解决这个问题：

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:29:16.897

重音字母和普通话和阿拉伯语等其他语言很棘手。
我猜你还没有看到这个问题的最后一个。
您应该确保在链中的任何链接中正确编码文本。

例如

*   数据库->java->响应->浏览器
*   属性文件->jav->响应->浏览器
*   请求（参数/表单）->响应->浏览器
*   java -> 记录器 -> 控制台

我建议遵循这个很好的答案 [How to get UTF-8 working in Java webapps?](https://stackoverflow.com/questions/138948/how-to-get-utf-8-working-in-java-webapps)

要将其调整为弹簧，请使用弹簧的 CharacterEncodingFilter。

```
<filter>
    <filter-name>encodingFilter</filter-name>
    <filter-class>
      org.springframework.web.filter.CharacterEncodingFilter
    </filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
         </init-param>
        <init-param>
             <param-name>forceEncoding</param-name>
                <param-value>true</param-value>
         </init-param>
 </filter> 
```

如果您使用 i18n，请确保为您的 ResourceBundleMessageSource 定义默认编码，例如

```
<bean id="messageSource"
class="org.springframework.context.support.ReloadableResourceBundleMessageSource"
    >
        <property name="basename" value="classpath:messages"/>
        <property name="defaultEncoding" value="UTF-8"/>
        <property name="useCodeAsDefaultMessage" value="false"/>
</bean> 
```

确保您的属性文件使用 Java 的 native2ascii 正确编码。
或者如果你使用 eclipse 更好，我推荐[Property Editor 插件。](http://propedit.sourceforge.jp/index_en.html)
有时第三方框架会破坏某些东西，您需要做一些“神奇的”

```
new String(yourstring, "UTF8") 
```

有关更多信息，请参见[此处](http://docs.oracle.com/javase/tutorial/i18n/text/string.html)

请注意，一些视图解析器也需要定义编码。

# logic - 如何演绎地证明以下逻辑语句？

> ID：14949356
> 
> 赞同：0
> 
> 时间：2013-02-19T03:30:31.723
> 
> 标签：logic, conditional, proof

我有以下逻辑语句：

```
If (P OR Q) and
   (P => Q) and
   (Q => P)
Then 
   (P AND Q) 
```

我被告知使用多萝西定律，即：

```
If (A => B)
Then (A OR B => B) 
```

我无法弄清楚解决这个问题所需的确切推理规则和/或法律。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T03:38:46.970

```
P => Q Therefore P OR Q => Q
Q => P Therefore Q OR P => P

Finally,

(P OR Q) AND (Q OR P)=( P AND (Q OR P)) OR (Q AND (Q OR P))
                     =((P AND Q) OR (P AND P))  OR ((Q AND Q) OR (Q AND P))
                     =(P AND Q) OR (Q AND P)
                     =P AND Q 
```

# c# - 使用多态性和 Protobuf-net 进行序列化和反序列化

> ID：14949363
> 
> 赞同：4
> 
> 时间：2013-02-19T03:31:38.980
> 
> 标签：c#, unity3d, protocol-buffers, protobuf-net

我正在尝试使用[protobuf-net](https://code.google.com/p/protobuf-net/)序列化对象。我不确定是否支持我尝试对继承进行的操作，但我想我会检查一下是否支持，或者我是否只是做错了什么。

本质上，我正在尝试序列化一些子类，然后将其反序列化，但只使用基类引用。展示：

```
using UnityEngine;
using System.Collections;
using ProtoBuf;

public class main : MonoBehaviour
{
    // If I don't put "SkipConstructor = true" I get
    // ProtoException: No parameterless constructor found for Parent
    // Ideally, I wouldn't have to put "SkipConstructor = true" but I can if necessary
    [ProtoContract(SkipConstructor = true)]
    [ProtoInclude(1, typeof(Child))]
    abstract class Parent
    {
        [ProtoMember(2)]
        public float FloatValue
        {
            get;
            set;
        }

        public virtual void Print()
        {
            UnityEngine.Debug.Log("Parent: " + FloatValue);
        }
    }

    [ProtoContract]
    class Child : Parent
    {
        public Child()
        {
            FloatValue = 2.5f;
            IntValue   = 13;
        }

        [ProtoMember(3)]
        public int IntValue
        {
            get;
            set;
        }

        public override void Print()
        {
            UnityEngine.Debug.Log("Child: " + FloatValue + ", " + IntValue);
        }
    }

    void Start()
    {
        Child child = new Child();
        child.FloatValue = 3.14f;
        child.IntValue   = 42;

        System.IO.MemoryStream ms = new System.IO.MemoryStream();

        // I don't *have* to do this, I can, if needed, just use child directly.
        // But it would be cool if I could do it from an abstract reference
        Parent abstractReference = child; 

        ProtoBuf.Serializer.Serialize(ms, abstractReference);

        ProtoBuf.Serializer.Deserialize<Parent>(ms).Print();
    }
} 
```

这输出：

> `Parent: 0`

我希望它输出的是：

> `Child: 3.14 42`

这甚至可能吗？如果是这样，我做错了什么？我已经阅读了关于继承和 protobuf-net 的各种问题，它们都与这个例子有点不同（据我所知）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T05:19:08.730

你会踢自己。代码很好，除了一件事 - 你忘了倒带：

```
ProtoBuf.Serializer.Serialize(ms, abstractReference);
ms.Position = 0; // <========= add this
ProtoBuf.Serializer.Deserialize<Parent>(ms).Print(); 
```

实际上，它`Deserialize`正在读取 0 个字节（因为它在末尾），因此试图创建父类型。就 protobuf 规范而言，空流是完全有效的——它只是意味着一个没有任何有趣值的对象。

# netbeans - 如何在 Netbeans 平台中创建静态 BeanTreeView

> ID：14949365
> 
> 赞同：0
> 
> 时间：2013-02-19T03:31:41.477
> 
> 标签：netbeans, treeview, nodes, netbeans-platform

我想在 Netbeans 平台中创建一个静态 BeanTreeView，即创建一个树，其中节点已经定义，它们不是任何类的实例，而是单个类的属性。例如，在具有以下字段的类中：

```
public int revision;
public String name; 
```

树应该有一个指示修订的节点和一个指示名称的节点。

我应该如何实现树？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:22:34.307

BeanTreeView 用于显示节点（“模型”的可视化表示），这些“节点”保存在与 JPanel 层次结构关联的 ExplorerManager 中。

您可能希望向节点添加属性，指示要显示的“字段”。例如，参见：[8.1。向节点添加属性](http://vieiro.net/apuntes/swingnbrcp/swingnbrcp-ui2.html)

# c# - C# 从 iframe html 标签获取 src？

> ID：14949366
> 
> 赞同：0
> 
> 时间：2013-02-19T03:31:54.097
> 
> 标签：c#, regex, iframe

基本上我有一个用户创建的字符串，它可能有也可能没有 youtube 的 iframe 链接。由于这是一个客户端应用程序，它不使用 html 标签，而且我有一个特殊的表单来显示 youtube 视频之类的内容。但是，我需要从标签中获取 src 并将其周围的所有数据替换为空。它也可能有多个链接，所以这需要像正则表达式一样在全球范围内进行。

示例：用户字符串：

```
<iframe width='300px' height='225px' src='http://www.youtube-nocookie.com/embed/4FhG-UYRHJ0' frameborder='0' allowfullscreen></iframe> 
```

我想输出什么：我希望用户只看到：`http://www.youtube-nocookie.com/embed/4FhG-UYRHJ0`然后我可以处理其余的。

非常感谢任何帮助，因为我什至不知道如何开始。谢谢你们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T04:31:41.110

你也可以用这个

```
string iframe = "<iframe width='300px' height='225px' src='http://www.youtube-nocookie.com/embed/4FhG-UYRHJ0' frameborder='0' allowfullscreen></iframe>";

            Match matchdec = Regex.Match(iframe, @"\ssrc='\b(\S*)\b", RegexOptions.IgnorePatternWhitespace | RegexOptions.IgnoreCase);
            if (matchdec.Success) 
            {
                if (matchdec.Groups.Count > 1)
                {
                    string retval = matchdec.Groups[1].Value;
                }
            } 
```

对于您可以使用的所有比赛：-

```
string iframe = "<iframe width='300px' height='225px' src='http://www.youtube-nocookie.com/embed/4FhG-UYRHJ0' frameborder='0' allowfullscreen></iframe>";
                iframe += "<iframe width='300px' height='225px' src='http://www.youtube-nocookie.com/embed/newid' frameborder='0' allowfullscreen></iframe>";

                Match matchdec = Regex.Match(iframe, @"\ssrc='\b(\S*)\b", RegexOptions.IgnorePatternWhitespace | RegexOptions.IgnoreCase);
                while (matchdec.Success)
                {
                    if (matchdec.Groups.Count > 1)
                    {
                        string retval = matchdec.Groups[1].Value;
                    }
                    matchdec = matchdec.NextMatch();
                } 
```

要替换添加此行

```
iframe = Regex.Replace(iframe, retval, "yournewurl"); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T03:56:02.500

这是一个正则表达式，可以帮助您入门：

```
(?<=src=')[^']+ 
```

注意：可能是一些没有考虑到的边缘情况。我会把它作为 OP 的练习 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-06T22:06:59.567

您可以使用以下代码；

```
var source = Regex.Match(iframeStr, "<iframe.+?src=[\"'](.+?)[\"'].*?>", RegexOptions.IgnoreCase).Groups[1].Value; 
```

# multithreading - 线程同步是否意味着线程安全？

> ID：14949369
> 
> 赞同：1
> 
> 时间：2013-02-19T03:32:09.083
> 
> 标签：multithreading, synchronization, thread-safety

严格定义的线程同步或序列化是应用特定机制来确保两个并发执行的线程或进程不会同时执行程序的特定部分。（来自维基百科）。

那么如果一个对象实现了线程同步，是不是就意味着它是线程安全的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T04:24:53.410

线程同步是实现线程安全的一种方法。线程安全只是意味着一个程序可以同时运行多个线程，而不会有任何线程破坏彼此状态的机会。

但是，在某些情况下，可能在没有线程同步的情况下实现线程安全——例如，如果两个线程都从同一个数据结构中读取，但没有线程修改数据结构，则该程序可以是线程安全的，无需任何线程同步。还有一些无锁数据结构被设计为可供多个线程使用而无需同步。

> 那么如果一个对象实现了线程同步，是不是就意味着[它具有]线程安全呢？

如果同步正确完成，是的。如果您不小心，很容易错误地（或不完全地）执行此操作，在这种情况下，即使进行了同步，由于缺乏线程安全性，程序仍可能偶尔崩溃或给出不正确的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-24T09:18:14.150

是的。线程同步意味着线程安全。如果有 2 张票，有 3 位顾客。那么，如果我必须声明一个随机选择哪些线程将获取票证的方法必须是一个同步方法。请看一下这个非常容易理解的示例。

```
 public class ThreadSynchronization {
            public static void main(String[] args) {
                Ticketbooking tb = new Ticketbooking();
                Thread t1 = new Thread(tb);
                Thread t2 = new Thread(tb);
                Thread t3 = new Thread(tb);
                t1.start();
                t2.start();
                t3.start();
            }

        }

        class Ticketbooking implements Runnable {
            int tickets = 3;

            @Override
            public void run() {
                System.out.println("waiting => " + Thread.currentThread().getName());
                m1();

            }

            private synchronized void m1() {
                if (tickets > 0) {
                    System.out.println("booking for => " + Thread.currentThread().getName());
                    try {
                        Thread.sleep(2000);
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    tickets--;
                    System.out.println("Booked for => " + Thread.currentThread().getName());
                    System.out.println("tickets now => " + tickets);

                } // if
                else {
                    System.out.println("ticket not booked for => " + Thread.currentThread().getName());
                } // else

            }
        }// end1 
    /*
    The output will be :
    waiting => Thread-0
    waiting => Thread-1
    waiting => Thread-2
    booking for => Thread-0
    Booked for => Thread-0
    tickets now => 1
    booking for => Thread-2
    Booked for => Thread-2
    tickets now => 0
    ticket not booked for => Thread-1
*/ 
```

这也可以使用 Executors.newFixedThreadPool() 来解决。这是解决方案：

```
public class Test13 {
    public static void main(String[] args) {
        Ticketbooking1 tb1 = new Ticketbooking1();

        ExecutorService service = Executors.newFixedThreadPool(3);

        for (int i = 0; i < 3; i++) {
            service.execute(tb1);
        }
        service.shutdown();

    }
}

class Ticketbooking1 implements Runnable {
    int tickets = 2;

    @Override
    public void run() {
        System.out.println("waiting => " + Thread.currentThread().getName());
        m1();

    }

    private synchronized void m1() {
        if (tickets > 0) {
            System.out.println("booking for => " + Thread.currentThread().getName());
            try {
                Thread.sleep(2000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            tickets--;
            System.out.println("Booked for => " + Thread.currentThread().getName());
            System.out.println("tickets now => " + tickets);

        } // if
        else {
            System.out.println("ticket not booked for => " + Thread.currentThread().getName());
        } // else
    }

}// end1

/*  The output :
 * waiting => pool-1-thread-1
waiting => pool-1-thread-3
waiting => pool-1-thread-2
booking for => pool-1-thread-1
Booked for => pool-1-thread-1
tickets now => 1
booking for => pool-1-thread-2
Booked for => pool-1-thread-2
tickets now => 0
ticket not booked for => pool-1-thread-3

 */ 
```

如果我们使用 Executors.newSingleThreadExecutor()，则不需要同步。在这里，我没有将方法 m1 设置为 synchronized 。

```
public class Test13 {
    public static void main(String[] args) {
        Ticketbooking1 tb1 = new Ticketbooking1();

        ExecutorService service = Executors.newSingleThreadExecutor();
        service.execute(tb1);
        service.execute(tb1);
        service.execute(tb1);
        service.shutdown();

    }
}

class Ticketbooking1 implements Runnable {
    int tickets = 2;

    @Override
    public void run() {
        System.out.println("waiting => " + Thread.currentThread().getName());
        m1();

    }

    private void m1() {
        if (tickets > 0) {
            System.out.println("booking for => " + Thread.currentThread().getName());
            try {
                Thread.sleep(2000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            tickets--;
            System.out.println("Booked for => " + Thread.currentThread().getName());
            System.out.println("tickets now => " + tickets);

        } // if
        else {
            System.out.println("ticket not booked for => " + Thread.currentThread().getName());
        } // else
    }

}// end1

/*  the output :
 * waiting => pool-1-thread-1
booking for => pool-1-thread-1
Booked for => pool-1-thread-1
tickets now => 1
waiting => pool-1-thread-1
booking for => pool-1-thread-1
Booked for => pool-1-thread-1
tickets now => 0
waiting => pool-1-thread-1
ticket not booked for => pool-1-thread-1

 * 
 * 
 * */ 
```

# glassfish - Glassfish AppServer 或 JBoss AppServer 哪个更适合生产环境？

> ID：14949370
> 
> 赞同：3
> 
> 时间：2013-02-19T03:32:16.380
> 
> 标签：glassfish, glassfish-3, jboss7.x, application-server

我想知道 glassfish 服务器和 jboss (glassfish v3 vs jboss 7.0) 在生产环境中使用的优缺点，我知道更多的人使用 jboss 作为应用程序服务器，但是 glassfish 比 jboss 具有更多的功能和稳定性你同意吗与我一起？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-19T14:05:54.667

在 GlassFish 论坛上提问，您会得到 GlassFish 作为答案。在 JBoss 论坛上提问，您会得到 JBoss 作为答案。在这里问，你可能会得到两个:-)

**稳定。**我可以告诉您，我们在 GlassFish Server 开源版中进行的测试数量非常可观——它在发布时具有与商业版 (Oracle GlassFish Server) 相同的高质量，尽管商业版更定期地发布补丁。根据 JBoss 的说法（如果我错了，有人纠正我），JBoss 不会对开源位进行全面的质量测试 - 全面的 QA 仅在他们的商业发行版（JBoss 企业应用程序平台）上进行。我不能用任何经验证据来说明哪个开源应用服务器具有更好的质量，但是开源发行版的质量方法在两者之间是非常不同的。

**特征。**恕我直言，GlassFish 具有更成熟且功能更丰富的管理控制台、命令行工具（用于自动化）以及 RESTful 管理和监控 API。前两者自 2005 年之前就已在 GlassFish 中可用，当时 Sun 应用服务器作为 GlassFish 开源，自 2008 年以来为 RESTful API。

仅供参考，我是 GlassFish Server 产品经理，所以我有很大的偏见 :-)

希望这会有所帮助，请让我们都知道您最终决定什么以及为什么。

谢谢。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-30T17:32:13.163

负责 JRebel 的团队在[这里做了一个小的比较/评估](http://zeroturnaround.com/rebellabs/the-great-java-application-server-debate-with-tomcat-jboss-glassfish-jetty-and-liberty-profile/)。

我的公司将一家三级护理医院（12,000 名员工）从运行其多项电子服务从 WebSphere 转移到 Glassfish。大量节省许可成本，并且稳定性非常高。

然而，我认为 Glassfish 有一个领域确实令人惊叹，而这一领域并没有很多人强调。JRebel 比较提到了它，但没有给它足够的权重。大多数人从开发和性能的角度来看待应用程序服务器......现在大多数应用程序服务器在该领域“足够好”（再次参见 JRebel 比较）。

但是一个特性需要大量时间来开发，而且不是一夜之间就能完成的事情，它确实需要很早就做出架构决策。它从一开始就肯定是在 Glassfish 的根（Sun Application Server）中内置的。我说**的是完全使用命令行界面来控制服务器的能力**。这是一个巨大的优势。它允许我们构建脚本来自动化集群服务器场中的一切（我们现在有近 15 个）。我的意思是*一切*。我们使用 Jenkins (Hudson) 来运行这些脚本，它确实是一个优雅的集成解决方案。

这并不是因为我们是一家聪明的公司——远非如此。Glassfish 只是让它很容易做到。随着时间的推移，命令行界面价值数万美元，而且每天都在增加。

# java - 检查字符串是否平衡

> ID：14949372
> 
> 赞同：1
> 
> 时间：2013-02-19T03:32:19.193
> 
> 标签：java, string, algorithm, recursion, balance

我想检查一个字符串是否与递归平衡。我在论坛上发现了一些与这个问题相关的其他帖子，一些答案是我不懂的编程语言。在 Stack Overflow 上阅读了类似的问题后，我可以用堆栈来完成，我该如何递归地做到这一点？

```
private static boolean isBalanced(String s, char match)
{
    char c;

    if(s.isEmpty())
        return true;

    for(int i = 0; i < s.length(); i++)
    {
        c = s.charAt(i); 

        if(c == '{') 
            return isBalanced(s.substring(i+1), '}');

        else if(c == '[')
            return isBalanced(s.substring(i+1), ']');

        else if(c == '(')
            return isBalanced(s.substring(i+1), ')');

        // Closing matches.
        else if(c == match)
            return true;

    }

    return 
} 
```

请帮忙。

编辑：不，我不希望任何人为我编写代码，事实上，我会很高兴知道如何去做。这就是为什么我不理解其他语言的答案，因为它们太特定于该语言而不是算法。

EDIT2：是平衡的是 {}()[] 和任何组合，例如 [()]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T03:47:03.443

使用递归的想法与使用堆栈的原理相同。*调用堆栈*是您的 LIFO 结构，您根据它进行调用。

取一个简单的平衡字符串：

```
String bal = "(This is (perfectly) balanced.)"; 
```

首先要做的事情 - 让我们建立我们的条件。

*   我们不关心任何不是括号、大括号或括号的东西。我们可以忽略任何不是这三个角色之一的角色。
*   如果我们遇到括号、大括号或方括号，我们会立即递归并在字符串的其余部分搜索它的匹配项。也就是说，如果我从 开始`bal`，我会在 上递归`bal.substring(1)`。

我不会使用循环，因为您仍在遍历整个字符串。我宁愿使用它，以减少我必须回溯的字符数量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T03:57:47.877

这是算法，我刚刚尝试过并且有效。想法是，在每个左括号上，您都希望右括号是相同类型的。上面的函数需要这样调用`isBalanced("([2+3])", 0, new Stack<Character>())`。预期的字符使用`stack`.

```
public static boolean isBalanced(String s, int i, Stack<Character> expected) {
    /* end has reached and not expecting anything then break */
    if (i == s.length())
        return expected.isEmpty();

    char c = s.charAt(i);
    /* expecting something and it is a closing type */
    /* then it should match expecting type */
    if (c == '}' || c == ')' || c == ']') {
        char e = expected.isEmpty() ? '\0' : expected.pop();
        if(e != c)
            return false;
    }

    if(c == '{') 
        expected.push('}');
    else if(c == '[')
        expected.push(']');
    else if(c == '(')
        expected.push(')');

    /* call recursively with i + 1 */ 
    return isBalanced(s, i + 1, expected);

} 
```

这是代码的非堆栈版本：调用是这样的`isBalanced2("{[]}[()]", 0, '\0') < 0 ? false : true`。

```
public static int isBalanced2(String s, int i, char match)
{
    if(i >= s.length())
        return match == '\0' ? 0 : -1;

    char c;
    int j;
    for(j = i; j < s.length(); j++)
    {
        c = s.charAt(j); 
        /* any of the closing type */
        if(c == ']' || c == '}' || c == ')') {
            return c == match ? j : -1;
        }

        if(c == '{') 
            j = isBalanced2(s, j + 1, '}');

        else if(c == '[')
            j = isBalanced2(s, j + 1, ']');

        else if(c == '(')
            j = isBalanced2(s, j + 1, ')');

        if(j == -1)
            break;
    }

    return match != '\0' ? -1 : j;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T08:24:00.293

直接循环是这里的快速解决方案：

```
private static boolean isBalanced(String s)
{
    char[] chars = new char[s.length()];
    int size = 0;
    for (int i = 0; i < s.length(); i++)
    {
        char c = s.charAt(i);
        if (c == '{' || c == '(' || c == '[') chars[size++] = c;
        if (c == '}' && (size == 0 || chars[--size] != '{')) return false;
        if (c == ')' && (size == 0 || chars[--size] != '(')) return false;
        if (c == ']' && (size == 0 || chars[--size] != '[')) return false;
    }

    return true;
} 
```

算法的复杂度是**O(N)**，没有子字符串等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T04:42:45.410

让我们正式地处理这个问题，以增加我们在没有大量调试的情况下提出可行的解决方案的可能性。

什么是平衡弦？这是一个简单的语法：

```
BalancedString: Sequence end-of-string;

Sequence:
    Fragment Sequence |
    (* empty *);

Fragment:
    '(' Sequence ')' |
    '[' Sequence ']' |
    '{' Sequence '}' |
    any-character-not-in-'()[]{}'; 
```

请注意，此语法生成的字符串`(hello)[[good]{bye}]`具有多个“顶级”组。

现在让我们把它变成一个递归下降解析器。每个非终结符（`BalancedString`、`Sequence`和`Fragment`）都成为一个函数。我们将从解析“BalancedString”非终端的函数开始：

```
private static bool parseBalancedString(String input, int offset) {
    offset = parseSequence(input, offset);
    return offset == input.length();
} 
```

请注意，此函数期望`parseSequence`返回它停止解析的偏移量。接下来写吧`parseSequence`。我们将使用循环而不是直接递归。

```
private static int parseSequence(String input, int offset) {
    bool parseSucceeded = true;
    while (parseSucceeded) {
        int newOffset = parseFragment(input, offset);
        parseSucceeded = newOffset > offset;
        newOffset = offset;
    }
    return offset;
} 
```

请注意，`parseSequence`期望`parseFragment`返回它停止解析的偏移量，如果失败，它应该返回它传递的偏移量。现在我们将编写`parseFragment`. 我们将从三个相似的产生式中提取公共代码到一个辅助函数中。

```
private static int parseFragment(String input, int offset) {
    if (offset >= input.length()) {
        return offset;
    }

    switch (input.charAt(offset)) {
        case '(': return helpParseFragment(input, offset, ')');
        case '[': return helpParseFragment(input, offset, ']');
        case '{': return helpParseFragment(input, offset, '}');
        default: return offset + 1;
    }
} 
```

辅助函数期望接收开启者的偏移量，以便在失败时返回该偏移量。如果成功，它将返回刚刚过去的偏移量。

```
private static int helpParseFragment(String input, int offset, char closer) {
    int newOffset = parseSequence(input, offset + 1);
    if (newOffset > offset && newOffset < input.length() && input.charAt(newOffset) == closer) {
        return newOffset + 1;
    } else {
        return offset;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-03T11:38:46.083

```
import java.util.*;
class Solution{

   public static void main(String []argh)
   {
      Scanner sc = new Scanner(System.in);

      while (sc.hasNext()) 
      {
         String input=sc.next();
         Stack<Character> stacky = new Stack<>();
          int x=0,y=0,z=0,a=0,b=0,c=0;
         for (int i = 0; i < input.length(); i++) 
         {

                switch(input.charAt(i)) 
                {
                    case '[' : a++; break;
                    case '{' : b++;break;

                     case '(' : c++;
                    break;

                    case ']' :x++; break;
                    case '}' : y++; break;

                     case ')' :
                            z++;
                    break;

                default: stacky.push(input.charAt(i));
          }

            //Complete the code

            if(x==a && y==b && z==c)
                {

                System.out.println("true");

                 }
             else
                 {
                 System.out.println("false");
             }

      }

   }
   }} 
```

[http://www.geekpandit.com/2016/07/25/simple-balanced-parenthesis-problem-stack-implementation/](http://www.geekpandit.com/2016/07/25/simple-balanced-parenthesis-problem-stack-implementation/)。

# c++ - 为什么我得到类型值不匹配？

> ID：14949373
> 
> 赞同：0
> 
> 时间：2013-02-19T03:32:19.690
> 
> 标签：c++

我正在尝试在我的 C++ 应用程序中创建一个迭代器向量：

```
std::vector<std::list<std::shared_ptr<SelfDefinedType>>::iterator> edge_iters; 
```

`SelfDefinedType`是我在此代码段上方某处声明的类。

我必须承认这个组织有点复杂，但是模板有一个层次结构。

我收到以下使用 C++11 编译的编译时错误。

```
App.hpp:563:48: error: type/value mismatch at argument 1 in template 
parameter list for ‘template<class _Tp, class _Alloc> class std::vector’ 
```

这是什么意思？它似乎被`std::list<std::shared_ptr<SelfDefinedType>>::iterator`视为一个值而不是一个类型。为什么？

我试图在开始和结束括号中添加空格无济于事。我还尝试使用 typedef 来抑制编译错误，但没有奏效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T21:58:44.770

您应该指定这`std::list<std::shared_ptr<SelfDefinedType>>::iterator`是一种类型。

这里`iterator`嵌套在里面`std::list<std::shared_ptr<SelfDefinedType>>`，*SelfDefinedType*是一个模板参数。

解析器假定*迭代器*不是类型，除非您使用*typename*明确告诉它。

要解决错误（注意**typename**）：

```
std::vector<typename std::list<std::shared_ptr<SelfDefinedType>>::iterator> edge_iters; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T08:40:32.207

我不确定这是不是问题，但这可以被您的编译器理解为 operator>>。

尝试 std::vector< std::list< std::shared_ptr< SelfDefinedType **> >** ::iterator > edge_iters;

# performance - 当点具有相同的深度时，opengl深度缓冲区很慢

> ID：14949375
> 
> 赞同：3
> 
> 时间：2013-02-19T03:32:22.643
> 
> 标签：performance, opengl, gpu, depth, depth-buffer

我正在制作一个涉及在屏幕上绘制大量重叠四边形的 2d 游戏。什么在前面什么并不重要。

如果我用从 0 向上的 z 值绘制每个四边形并设置 glDepthFunc(GL_LESS)，我会得到相当不错的速度提升，如你所料。这是为了避免必须绘制完全隐藏或部分隐藏在其他四边形后面的四边形。所以我使用类似的东西绘制四边形：

```
float small = (float(1)/1000000);
for (int iii = 0; iii < 100000; iii++) {
    freeSpace = bullets[iii]->draw(opengl, freeSpace, iii*small);
} 
```

但是，由于我不将 z 值用于实际深度，因此我似乎应该能够：

```
for (int iii = 0; iii < 100000; iii++) {
    freeSpace = bullets[iii]->draw(opengl, freeSpace, 0.0f);
} 
```

或者只是将 z 值 0.0f 编码到着色器中。（第三个参数是 z 值，最终在着色器中设置为 gl_position 不变。）

奇怪的是，第二种方法（我每次都将 z 值设置为 0.0f）最终得到的帧速率几乎不到前者的一半。

为什么是这样？他们都使用 glDepthFunc(GL_LESS) 和

```
glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);
glDrawArrays(GL_TRIANGLES, 0, 100000*(2*3)); 
```

一样。我认为如果每次将 z 设置为 0.0f 会更快。为什么不是？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T04:18:04.513

我不是很肯定，但我的猜测是原语之间 z 值的小增量允许 zcull 硬件工作。这将在片段到达片段着色器之前剔除片段。除了避免片段着色器工作之外，当片段进入深度缓冲区测试时，这种剔除可以比正常的 z 测试更快地发生。

# database - 具有 1000 多列索引的 CUBRID 的性能是什么

> ID：14949378
> 
> 赞同：1
> 
> 时间：2013-02-19T03:32:39.827
> 
> 标签：database, cubrid

我有一个项目需要我即时创建表。创建表时，每个表需要支持至少 1000 列。所有 INT、日期、BIT 都将是索引。因此，一张表上可能有大约 400 个索引。一旦数据上传到服务器，就不会在表上执行其他插入或更新。我将使用像 lucene 这样的库来索引文本。

我的问题是：

1.  CUBRID 可以在一个数据库中处理 1000 个表吗？
2.  在具有一千列和数百个索引的表上进行选择时，CUBRID 的性能如何？
3.  CUBRID 是否有一个 Windows GUI 界面来运行临时查询和管理表
4.  DDL 和 DML 语句可以在同一个事务中吗？

我很清楚这里的数据库规范化设计问题。我已经充分研究了规范化问题并得出结论，创建许多表和列是最好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:36:44.947

*免责声明：我是 CUBRID 团队的一员。*

**简短的回答：**

1.  是的。
2.  要看。
3.  是的。
4.  是的。

**长答案：**

1.  [正如CUBRID RDBMS Size Limits](http://www.cubrid.org/wiki_tutorials/entry/cubrid-rdbms-size-limits)中提到的，只要您有足够的磁盘空间，您就可以创建无限数量的表，每个表的索引数量不受限制。

    但是，我猜每个表的列数限制为 6400，这对你来说应该足够了。

2.  这取决于您将拥有的记录数量。如果一行中没有这么多列，那也没关系。记录的数量不仅会影响数据卷的大小（*磁盘上存储数据的文件*），还会影响索引卷的大小，即存储索引键和值的位置。在您当前拥有数千列的架构设计中，我怀疑您的索引卷大小将大大大于您的数据卷大小，因为每个索引都将存储您索引的列的所有值的副本。

    创建一组适当的索引将使您能够提高性能。

    1.  查看[CUBRID 中的索引优化](http://www.cubrid.org/cubrid_covering_index)以了解有关如何优化查询的更多信息。
    2.  要进一步优化您的查询，请利用[Index Hints](http://www.cubrid.org/manual/841/en/Index%20Scan%20in%20Descending%20Order)。

    但是您应该认真考虑规范化您的数据。

    此外，您的硬件配置将显着影响服务器的性能。对于您的情况，强烈建议使用大 RAM 和 CPU。

    在使用此类模式时，任何其他 RDBMS 都将面临类似的问题。通常，CUBRID 提供了具有良好定义索引的高 SELECT 性能。所以你应该专注于此。

3.  您可以使用三种 GUI 工具来管理数据库[。](http://www.cubrid.org/wiki_tools)

    1.  **CUBRID Manager** : 一个多合一、强大的 CUBRID 数据库管理工具
    2.  **CUBRID Web Manager**：CUBRID Manager 的基于 Web 的替代方案。
    3.  **CUBRID 查询浏览器**：CUBRID Manager 的轻量级版本，没有主机管理和监控功能。
4.  CUBRID 符合 SQL92 标准。因此，您可以在同一个事务中定义一个表并插入记录。

# xpages - 替换设计后，所有 xpage 上的扩展库错误中的 Teamroom 模板

> ID：14949381
> 
> 赞同：0
> 
> 时间：2013-02-19T03:32:45.757
> 
> 标签：xpages, xpages-extlib

我采用了以前版本的 Teamroom 应用程序，并用扩展库附带的 teamroom tewmplateXL 替换了它的设计。在 notes 客户端中，应用程序运行良好，但每个 xpage 都返回以下错误消息。如果我基于此模板创建一个新应用程序，然后将所有文档复制到新应用程序，它们就可以正常工作。

```
Error while executing JavaScript computed expression
Script interpreter error, line=4, col=28: 'vc' is null
JavaScript code

   1: var teamname = strings.getString("teamroom.name");
   2: var vw:NotesView = database.getView("MissionLookup");
   3: var vc:NotesViewEntryCollection = vw.getAllEntries();
   4: var ve:NotesViewEntry = vc.getFirstEntry();
   5: if(null != ve){
   6:   var v:java.util.Vector = ve.getColumnValues();
   7:   if(!v.isEmpty()){
   8:       // get the teamroom name
   9:       teamname = v.get(1);
  10:   }
  11: }
  12: return teamname; 
```

# java - 初始化非静态成员：C++ 和 Java 比较

> ID：14949382
> 
> 赞同：1
> 
> 时间：2013-02-19T03:32:47.033
> 
> 标签：java, c++

我来自 C++ 背景并学习 Java。

在 C++ 中，我们无法在类定义中初始化非静态成员，如下所示：

```
#include <iostream>

using namespace std;

class myClass{
    int i=10;//Error

    public:
    void set_i()
    {
        i=10;
        }
    void get_i()
        {
            cout << i << endl;
        }
};

int main()
{

 myClass ob;
 ob.set_i();
 ob.get_i();

 return 0;
    } 
```

抛出编译错误：

```
$ g++ -Wall Test.cpp -o Test
Test.cpp:8: error: ISO C++ forbids initialization of member `i'
Test.cpp:8: error: making `i' static
Test.cpp:8: error: ISO C++ forbids in-class initialization of non-const static member    `i' 
```

但在 Java 中是允许的：

```
class Test{

    private int i=10; //No Error

    public static void main(String[] args)
    {

        Test t= new Test();
        System.out.println(t.i);
        }
    } 
```

它在 JAVA 中编译并成功运行。

有人能告诉我造成这种差异的原因吗？

谢谢

@那些将此问题标记为无用的人。这是一个有效的问题：

基于以下参考： http: [//publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp ?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Fcplr038.htm](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Fcplr038.htm)

“一旦你定义了一个静态数据成员，它就存在，即使该静态数据成员的类的对象不存在。”

这意味着：C++ 不允许这样做，因为除非首先创建类的对象，否则不会为该数据变量创建实例。如果java不是这种情况，则意味着即使没有创建该类的对象，数据成员的实例也确实存在。

而且 Java 也以 C++ 为基础，因此必须有一些具体的理由来使两种语言之间产生这种差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:25:54.640

在 C++ 中，尝试以下操作

```
#include <iostream>

using namespace std;

class myClass{

    int i;

    public:

        myClass()
        {
            i=10;
        }
    void set_i()
    {
        i=10;
        }
    void get_i()
        {
            cout << i << endl;
        }

};

int main()
{

 myClass ob;
 ob.set_i();
 ob.get_i();

 system("pause");
 return 0;

    } 
```

现在检查以下

```
#include <iostream>

using namespace std;

class myClass{

    int static const i=0;

    public:

        myClass()
        {
            //i=10;
        }
    void set_i()
    {
       // i=10;
        }
    void get_i()
        {
            cout << i << endl;
        }

};

int main()
{

 myClass ob;
 ob.set_i();
 ob.get_i();

 system("pause");
 return 0;

    } 
```

为什么上面的工作？很简单，在 C++ 中，**只能在类中初始化静态 const 整数数据成员**

那么为什么它可以在 Java 中工作呢？因为那是Java！不是 C++ ！我同意你的论点，“Java 基于 C++”。好吧，但这不是 C++，不是吗？Java 和 C++ 之间有很大的区别，不要试图比较它们并期望以完全相同的方式工作。在大多数情况下，它不会发生。

在 java 中，它将默认值“0”应用于所有整数类型，但正如您所知，C++ 不会（除非它是“静态”）。换句话说，Java 调用它们自己的类（实际上是类构造函数）并将它们初始化为 0。它会在您创建数据类型 int 时立即发生。Java 也对其原始类型执行相同的操作。这可能是我们被允许在任何方法之外为变量赋值的原因。请参阅以下文档以了解更多信息

[http://www.java2s.com/Tutorial/SCJP/0020__Java-Source-And-Data-Type/AutomaticInitializationDefaultValuesforPrimitiveTypes.htm](http://www.java2s.com/Tutorial/SCJP/0020__Java-Source-And-Data-Type/AutomaticInitializationDefaultValuesforPrimitiveTypes.htm)

# sql-server-2008 - 如何在同一操作系统上使用 SQL Server 2005 和 2008 版本？

> ID：14949389
> 
> 赞同：0
> 
> 时间：2013-02-19T03:33:32.983
> 
> 标签：sql-server-2008, sql-server-2005

我一直使用 SQL Server 2008，现在我的新项目需要 SQL Server 2005。我搜索了在 SQL Server 2008 上创建脚本并在 SQL Server 2005 上使用它的解决方案，但是他们在 2005 上的 mdf 文件无法附加到我的 SQL Server 2008实例。所以，我尝试同时安装2005。

我还尝试为 SQL Server 2005 的实例命名而不是使用默认实例，但仍然找不到该实例。我可以使用 SQL Server Management Studio 2008 打开 SQL Server 2005 实例吗？

或者您知道如何在我的 SQL Server 2008 上附加 SQL Server 2005 .mdf 文件吗？为什么我什至无法附加该文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:36:11.263

您可以使用更高版本的 SQL Server Management Studio 毫无困难地附加到旧版本的引擎（它向后兼容）。

要在 2008 或更高版本备份和还原数据库时使用 SQL Server 2005 数据库，请勿分离和重新附加。还原过程将在您还原时自动升级数据库格式。

# cakephp - Cakephp 从 1.3 升级到 2.3 shell 没有正确升级？

> ID：14949392
> 
> 赞同：1
> 
> 时间：2013-02-19T03:33:48.933
> 
> 标签：cakephp

我使用升级外壳升级了我的应用程序。输出正常。尽管在删除了 cake 文件夹（[http://book.cakephp.org/2.0/en/console-and-shells/upgrade-shell.html](http://book.cakephp.org/2.0/en/console-and-shells/upgrade-shell.html)上的升级说明的最后一步）后，我得到了以下错误：

```
Warning: include(cake\bootstrap.php) [function.include]: failed to open stream: No such file or directory in D:\wamp\projects\myproject\app\webroot\index.php on line 76

( ! ) Warning: include() [function.include]: Failed opening 'cake\bootstrap.php' for inclusion (include_path='D:\wamp\projects\myproject;D:\wamp\projects\myproject\app\;.;C:\php\pear') in D:\wamp\projects\myproject\app\webroot\index.php on line 76

( ! ) Fatal error: CakePHP core could not be found. Check the value of CAKE_CORE_INCLUDE_PATH in APP/webroot/index.php. It should point to the directory containing your \cake core directory and your \vendors root directory. in D:\wamp\projects\myproject\app\webroot\index.php on line 77 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T07:29:25.470

您还需要升级您的 webroot 文件（index.php 和 test.php）。要么手动从 2.3 应用程序目录复制文件 - 要么使用我的升级外壳并运行`cake Upgrade.Upgrade webroot`： [https ://github.com/dereuromark/upgrade](https://github.com/dereuromark/upgrade)

# c# - MySqlDataReader dataReader =cmd.ExecuteReader() 弹出窗体窗体而不进入while循环

> ID：14949393
> 
> 赞同：1
> 
> 时间：2013-02-19T03:33:51.760
> 
> 标签：c#, asp.net, mysql

我的连接工作正常。但是，当它运行到 MysqlDataREader dataReader 行时，它会显示窗口窗体并且不会访问 while 循环来获取我的数据。我正在使用 dataGridView 来显示我的数据库中的信息。我做错了什么？谢谢

```
 if (this.OpenConnection() == true)
    {
        //Create Command
        MySqlCommand cmd = new MySqlCommand(query, connection);
        //Create a data reader and Execute the command
        MySqlDataReader dataReader= cmd.ExecuteReader();
        //Read the data and store them in the list
        while (dataReader.Read())
        {
            list[0].Add(dataReader["id"] + "");
            list[1].Add(dataReader["name"] + "");
            list[2].Add(dataReader["weekday"] + "");
            list[3].Add(dataReader["description"] + "");
        }

        //close Data Reader
        dataReader.Close();

        //close Connection
        this.CloseConnection();
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:19:15.753

命令是什么？

Read() 函数将读取器推进到下一条记录。如果没有返回记录，则 if 将立即为 false。

因此该命令很可能不会返回任何内容。你想做这样的事情（HandleRecord 只是为了让代码更干净）：

```
if(reader.Read())
{
    // Handle first record
    HandleRecord(dataReader)
    while(reader.Read())
    {
         // Handle remaining records
         HandleRecord(dataReader)
    }
}
else
{
    // Nothing was returned, do something
} 
```

您还想处理异常。从提供的代码看来，似乎没有 try-catch-finally 语句。如果我没记错的话应该是这样的：

```
 try
 {
     // Contact database - read/write/whatever
 }
 catch
 {
     // Display exception to user, log, whatever you need
 }
 finally
 {
     // Close database connection and other cleanup
 } 
```

# c++ - 在 C++ 中使用嵌套循环求解一阶联立方程

> ID：14949395
> 
> 赞同：1
> 
> 时间：2013-02-19T03:34:28.357
> 
> 标签：c++, nested-loops

我有一个问题需要我编写一个程序来找到一对一阶联立方程的解。我必须彻底测试 x 和 y 的所有值才能找到整数解。两个方程的系数 A、B 和 C 位于名为“input.txt”的数据文本文件中。

文本文件包含以下数据：

```
1 0 99
0 2 -100 
```

下面是我的程序：

```
#include <stdio.h>;

#define FILENAME "input.txt"

int main() {
    int A, B, C, x, y;
    FILE *input;
    input = fopen(FILENAME,"r");
    fscanf(input,"%d%d%d", &A,&B,&C);

    for(x = -100; x <= 100; x++)
        for(y = -100; y <= 100; y++)
            if(A*x+B*y==C){
                fscanf(input,"%d%d%d", &A,&B,&C);
                if(A*x+B*y==C)
                    printf("X=%d, Y=%d\n", x, y);
            }

    return 0;
} 
```

当我编译并运行程序时，我得到

```
X=99, Y=-50
X=100, Y=-50 
```

显然，该程序有一些错误。这些是什么？

另外，如果我想打印一条消息，说明`[-100, 100]`只能在该范围内找到解决方案一次，我应该如何将此 printf 函数插入程序中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T04:17:09.623

自从我完成 c 样式文件 I/O 以来已经有一段时间了，但是我很快注意到了几个明显的错误：

*   您应该验证文件是否已打开
*   您应该验证 fscanf 每次都读取预期的项目数
*   您可能需要 %d 格式说明符之间的空格（不确定这个）
*   您不应将第二组参数读入与第一组相同的变量中
*   您应该只读取第二组参数一次（不是有条件地在循环中）

另外，为什么需要使用嵌套循环？有很多更好的方法来解决这个问题。

编辑：提供的输出是否来自示例代码？Y如何得到-50的值？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T05:19:40.020

有几个问题。首先它确实得到了正确的答案：99 x 1 + -50 x 0 == 99

但是，在找到一个答案后，它会覆盖您原来的 A、B、C 值并匹配 x 的任何值。然后它会读到文件末尾，所以我不确定之后的 A、B 和 C 的内容。

找到一个答案后，您应该停止搜索。

找到它的更好方法是：

```
Determinant = A1 * B2 - A2 * B1;
x = (C1 * B2 - C2 * B1) / Determinant;
y = (C2 * A1 - C1 * A2) / Determinant; 
```

如果行列式为零，则方程是平行的。

当然，您的大多数答案都不是整数，因此您可能喜欢使用浮点数。

我非常喜欢在文件完成后关闭文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T12:41:38.647

经过几天对代码的思考，我终于弄清楚出了什么问题。

错误是将第二个 fscanf 函数放入循环中。当第二个 fscanf 函数在循环中时，它有第二次扫描的趋势，依此类推。

我将参考我的代码进行解释。当程序成功找到满足第一组系数的第一组x和y，或者方程x = 99，即x = 99和y = -100时，第二个fscanf函数将扫描第二组系数，或等式 2y = -100。if 函数将检查 x 和 y 的集合是否满足 2y = -100。显然，x = 99 和 y = -100 不满足 2y = -100，因此 for 循环函数将重复 x = 99 和 y = -99 的过程。但是，从 y = -99 开始，第一个 if 函数中的 A、B 和 C 被分配给第二组系数而不是第一组。fscanf 函数将进行第二次扫描，其中没有第三组系数，因此它仍然会扫描第二组系数。这会导致生成 x's 和 y' 列表的错误

因此，我尝试将第二个 fscanf 函数置于循环函数之外，并且效果很好。此外，为了打印消息，当没有解决方案时，只能在 [-100, 100] 范围内找到解决方案一次，我应用了布尔代数的概念。这是更正后的代码：

```
#include <stdio.h>
#define FILENAME "input.txt"

int main()
{
    int A_1, B_1, C_1, A_2, B_2, C_2, x, y, NOSOLUTION;
    FILE *input;
    input = fopen(FILENAME,"r");
    fscanf(input,"%d%d%d", &A_1,&B_1,&C_1);
    fscanf(input,"%d%d%d", &A_2,&B_2,&C_2);
    NOSOLUTION = 1;
    for(x = -100; x <= 100 ; x++){
       for(y = -100; y <=100; y++)
         if(A_1*x+B_1*y==C_1 && A_2*x+B_2*y==C_2)
         {
            NOSOLUTION = 0;
            printf("X=%d, Y=%d\n", x, y);
         }
    }
    if(NOSOLUTION == 1)
        printf("Integer solution not found in range [-100, 100] \n");
    return 0;
} 
```

不过，非常感谢那些回复的人！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T03:37:35.347

我不确定您要的是什么，但是在任何情况下发送一个 int 来代替 double 都没有用

```
#include <stdio.h>
#define FILENAME "input.txt"
int main()
{
double A, B, C; <----------------
int x, y; <-------------------
FILE *input;
input = fopen(FILENAME,"r");
fscanf(input,"%d%d%d", &A,&B,&C);

for(x = 0; x <= 100; x++)
    for(y = 0; y <= 100; y++)
    if(A*x+B*y==C){
    fscanf(input,"%d%d%d", &A,&B,&C);
          if(A*x+B*y==C)
          printf("X=%d, Y=%d\n", x, y);
    }
    return 0;
} 
```

# tsql - 检查在 T-SQL 中比较两个字符串的拼写错误

> ID：14949399
> 
> 赞同：3
> 
> 时间：2013-02-19T03:34:49.100
> 
> 标签：tsql, pattern-matching, data-scrubbing

我们开发了一系列确定重复联系人记录的业务规则，这些规则的基础围绕着首先检查相同的姓名，然后比较电话号码、电子邮件、电话等其他字段。

问题是只有一小部分记录被捕获并自动清理/合并。

为了获取更多记录，我想包含或检查联系人姓名中的拼写错误（例如 Michael=Micheal）。

是否有一个很好的功能可以用来检查拼写错误，以便返回更准确的结果？我认为寻找比较两个字符串的单个字符差异的函数可以解决问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T04:26:44.907

请记住，大多数**字符串相似度测量算法**都是计算密集型的，并且根据手头的工作量，T-SQL 在性能方面可能是一个糟糕的选择。

代替字符串相似性测量*本身*，考虑**散列函数**，特别是那些保留单词的主要“结构”的函数。哈希码的优点是它们只计算一次，只使用*一个*字符串作为输入，然后可以在具有普通等式谓词的 [TSQL] 过滤器中使用（不像相似度测量，这意味着您为每个可能的参考字符串运行算法）。一个合理的哈希码建议是***SOUNDEX***，它恰好特别适合个人和公司名称的典型变化，并且也作为[**TSQL 函数**](http://msdn.microsoft.com/en-us/library/ms187384.aspx)“本地”实现。

最好为名称字段中的每个单词计算 soundex 代码，例如为“Charles Darwin”等输入生成两个代码，为“Jean Jacques Rousseau”等生成三个代码，为了提高性能，您可能需要找到一种区分姓氏和给定名称的方法，以方便您的过滤条件。

如果您更喜欢使用字符串相似性方法，我发现[**Levenstein 距离**](http://xlinux.nist.gov/dads/HTML/Levenshtein.html)或[**Ratcliff/Oberhelp**度量](http://xlinux.nist.gov/dads/HTML/ratcliffObershelp.html)在处理诸如拼写错误等小的变化时效果很好。与 Soundex 一样，您仍然可以考虑单独处理单词，这会带来处理给定名称条目的多个值的困难，但也允许更积极地处理具有名称的典型情况，其中一些实例是顺序名字然后是姓氏和其他实例以相反的顺序（或省略或缩写部分名称）。

# c# - POCO (EF) 类中 ICollection 的目的是什么？

> ID：14949400
> 
> 赞同：2
> 
> 时间：2013-02-19T03:35:16.900
> 
> 标签：c#, asp.net, entity-framework, ef-code-first

`public virtual ICollection<Product> Products { get; set; }`POCO 课程中的目的是什么？

```
public class Category
    {
        [ScaffoldColumn(false)]
        public int CategoryID { get; set; }

        [Required, StringLength(100), Display(Name = "Name")]
        public string CategoryName { get; set; }

        public virtual ICollection<Product> Products { get; set; }

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T03:40:39.247

第一次访问该属性时，Entity Framework 将延迟加载`Products`相关的内容。`Category`

加载相关实体中更详细地解释了如何[加载相关实体](http://msdn.microsoft.com/en-us/data/jj574232.aspx)：

> 延迟加载是在第一次访问引用实体或实体的属性时自动从数据库加载实体或实体集合的过程。使用 POCO 实体类型时，延迟加载是通过创建派生代理类型的实例，然后覆盖虚拟属性以添加加载钩子来实现的。

所以Entity Framework会从该类中派生出一个代理类，`Category`并覆盖该属性的getter，`Products`以在第一次访问该属性时加载相关产品。

# mysql - 在 phpmyadmin 中编辑连接表 (mysql) 中的数据

> ID：14949402
> 
> 赞同：1
> 
> 时间：2013-02-19T03:35:24.763
> 
> 标签：mysql, phpmyadmin

任何人都知道是否可以通过连接两个（mysql）表来编辑 PHPMyAdmin 中的数据，如下所示：

```
SELECT * , pl.name
FROM product p
JOIN product_language pl ON p.product_id = pl.product_id
AND pl.lang_id =4
ORDER BY p.product_id
LIMIT 0 , 30 
```

如果我只选择一个表，我可以在其中编辑数据没有问题，但是当我加入两个时，我不能。将不胜感激任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:15:12.773

接受的答案忽略了这样一个事实，即如果您[创建一个可更新视图](http://dev.mysql.com/doc/refman/5.5/en/view-updatability.html)，则很有可能更新 MySQL 中的连接表。phpMyAdmin 是否允许您编辑它们可能是另一回事，但它*应该*，因为自 MySQL 5.0 以来已经实现了可更新视图。这样的视图当然可以创建并且可以使用`UPDATE`语句进行编辑。在这种情况下，视图的行为应该与任何其他表一样。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T04:19:11.800

您无法编辑连接的表，因为它无法知道您实际编辑的是什么。例如，您可以执行“select concat(pl.id,'_',p.product_id)”。由于 phpmyadmin 无法预测您可能显示的内容，因此它不能让您对其进行编辑；它无法将其映射回主键以知道如何修改原始数据。

# php - Mongo 不会在启用 error_reporting 的情况下加载 phpinfo

> ID：14949403
> 
> 赞同：2
> 
> 时间：2013-02-19T03:35:36.817
> 
> 标签：php, apache, mongodb, ubuntu, error-reporting

几个小时以来，我一直试图让 Mongo 在 Ubuntu Server 12.04 上使用 Apache2 处理 PHP 5.3。

它给出了错误：

```
Fatal error: Class 'MongoClient' not found in /var/www/projects/learn/create.php on line 7 
```

Mongo 出现了，`php -m`但没有出现`phpinfo()`。经过很长时间的搜索，我尝试在我的`php.ini`:

```
Default Value: E_ALL & ~E_NOTICE 
```

这会导致 Mongo 出现在我的`phpinfo()`声明中，并且`$m = new MongoClient()`不会引发任何错误。唯一的问题是我需要打开错误报告（因为我是新开发人员）。

仅当启用详细错误报告时，什么可能导致 Mongo 无法加载？

编辑：还可能需要注意的是我在单个 PHP 文件中打开了错误报告，并且正确显示了任何错误，同时仍然让 Mongo 加载

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:52:39.680

mongo 扩展很可能没有安装在您的开发/服务器设置上。首先检查是否安装。创建一个名为 phpinfo.php 的文件，其内容为：

从浏览器运行它。搜索蒙哥。看看是什么版本。如果它不存在，请从命令行执行以下操作：

sudo pecl 安装 mongo

如果你有 ubuntu 桌面 sudo gedit /etc/php5/conf.d/mongo.ini

如果你有 ubuntu 服务器 sudo vi /etc/php5/conf.d/mongo.ini

在文件中插入以下行：extension=mongo.so

保存文件。出口。使用 sudo /etc/init.d/apache2 restart 重启 apache

永远不要直接编辑 php.ini 文件以在 ubuntu 中加载/卸载扩展。在 /etc/php5/conf.d/ 的文件中进行更改

# java - 在显示标签中添加隐藏的输入元素

> ID：14949404
> 
> 赞同：0
> 
> 时间：2013-02-19T03:35:41.913
> 
> 标签：java, jsp, displaytag

如何在显示标签中添加额外的 html 元素？

```
<display:table name="list" pagesize="3">
    <display:column property="name" title="NAME"/>
</display:table> 
```

我想要带有隐藏输入的列名。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:52:18.330

像这样：

```
<display:table name="list" pagesize="3" id="row">
    <display:column title="NAME">
         <input type="hidden" name="..."> 
    </display:column>
</display:table> 
```

您不能混合使用 in 中的`property`属性`display:column`，但是添加了 id="row" 您现在可以访问元素内的“row”对象，例如：

```
<% ((YourRowBean)row ).getName() %> 
```

或者

```
${row.name} 
```

# ios5 - iOS Segue问题，目标控制器中的所有方法都被调用但不显示视图

> ID：14949407
> 
> 赞同：1
> 
> 时间：2013-02-19T03:36:08.570
> 
> 标签：ios5, segue

我使用 segue 从我的表格单元格中执行页面跳转。

我在我的应用程序的不同位置随机遇到了这个问题。目前有两个地方，索引表视图和设置表视图（设置一个在今天早上第一次发生）。

根据日志调用目标控制器中的方法。“viewDidLoad”，“setup fetch result controller”..etc，但应用程序只是停在那里，不再响应我的任何操作。

有什么想法吗？提前致谢。

# objective-c - 父子之间共享的Objective C init方法

> ID：14949408
> 
> 赞同：1
> 
> 时间：2013-02-19T03:36:10.033
> 
> 标签：objective-c

假设我有一个像这样的父 init 方法：

```
- (id)initWithValue:(int)val name:(NSString *)n 
{
    value = val;
    name = n;
} 
```

和一个像这样初始化的子类：

```
- (id)initWithAge:(int)a
{
    age = a;
} 
```

有没有办法做到以下几点：

```
[Child initWithAge:10 value:12 name:@"Sam"]; 
```

年龄将转到子初始化方法，而“值”和“名称”将转到父方法？还是每个孩子都必须期待它期望的所有参数并使用 [super init] 将其传递给父母？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T03:54:34.793

```
- (id)initWithAge:(int)a value:(int)val name:(NSString *)n
{
    self = [super initWithValue:val name:n];
    if(self)
    {
        age = a;
    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T03:57:22.210

在`Child`中，您必须声明`initWithAge: value: name:`. 如果您没有做一些工作，任何事情都不会明确地“转到父级”方法。

您将在 Child 中声明 amethod：

```
-(id)initWithAge:(int)age value:(iint)value name:(NSString*)name {
    if ( (self = [super initWithValue:value name:name]) ) {
        _age = age; // assuming you an ivar '_age'
    }
     return self;
} 
```

您可以将某些东西传递给超类，但只有它所期望的，不会为您创建方法。

阅读了[继承](http://www.techotopia.com/index.php/Objective-C_Inheritance)和[多态性](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29)，了解什么是[自我](http://useyourloaf.com/blog/2011/02/08/understanding-your-objective-c-self.html)很重要。

# ios - 在objective-c中按字母顺序对数组进行排序

> ID：14949411
> 
> 赞同：1
> 
> 时间：2013-02-19T03:36:26.370
> 
> 标签：ios, objective-c, cocoa-touch

我想在objective-c中按字母顺序对数组进行排序。我已经以这种方式实现了它。

```
//Sorting of the Array
NSArray *sortedArray = [arrName sortedArrayUsingComparator:^(Cars *firstObject, Cars *secondObject) {
    return [firstObject.str_name compare:secondObject.str_name];
}];
arrName =[NSMutableArray arrayWithArray:sortedArray]; 
```

问题是所有数字出现后跟大写字母单词后跟小写字母项目...

我希望它按字母顺序显示-> 意思是说大写字母和小写字母可能混合在一起。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-19T03:45:40.183

替换`compare:`为`caseInsensitiveCompare:`。

由于`arrName`是可变的，请改用 'sortUsingComparator' 方法。它将在不创建新数组的情况下对可变数组进行排序。

```
[arrName sortUsingComparator:^(Cars *firstObject, Cars *secondObject) {
    return [firstObject.str_name caseInsensitiveCompare:secondObject.str_name];
}]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T03:49:52.437

尝试这个，

```
NSArray *array=[[NSArray alloc]initWithObjects:@"Object1",@"object1", nil];      
array =[array sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)];
NSLog(@"%@",array); 
```

# android - 在 web 视图中播放视频

> ID：14949413
> 
> 赞同：0
> 
> 时间：2013-02-19T03:36:33.660
> 
> 标签：android, flash, webview, html5-video

我想为android机顶盒构建一个在webview中访问youtube.com/tv的应用程序。我可以通过加载[html5webview](http://code.google.com/p/html5webview/)来让它工作，但它需要永远。我注意到这是 android 浏览器的方式。我最近一直在使用opera mobile，并注意到它运行完美，它还在opera中声明我的pugins没有启用。

问题 1：opera Mobile 在 youtube.com/tv 上如何渲染视频，是否自带 flash？

问题 2 实现这一点的最佳方法是什么？我已将我的代码恢复为基本的 webView 以重新开始。

```
import android.app.Activity;
import android.os.Bundle;
import android.view.Window;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebSettings.PluginState;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class TvbrowserActivity extends Activity
{
final Activity activity = this;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
    setContentView(R.layout.main);
    WebView webView = (WebView) findViewById(R.id.webview);
    String ua = " Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.151 Safari/535.19";
    webView.getSettings().setJavaScriptEnabled(true);
    webView.getSettings().setPluginState(WebSettings.PluginState.ON);
    webView.getSettings().setUserAgentString(ua);

    webView.setWebChromeClient(new WebChromeClient() {
        public void onProgressChanged(WebView view, int progress)
        {
            activity.setTitle("Loading...");
            activity.setProgress(progress * 100);

            if(progress == 100)
                activity.setTitle(R.string.app_name);
        }
    });

    webView.setWebViewClient(new WebViewClient() {
        @Override
        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl)
        {
            // Handle the error
        }

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url)
        {
            view.loadUrl(url);
            return true;
        }
    });

    webView.loadUrl("http://youtube.com/tv");
}
} 
```

我还在 android manifest 中设置了硬件加速

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:26:20.023

检查代码是否有用

```
 myWebView = (WebView) findViewById( R.id.webView );
    WebSettings webSettings = myWebView.getSettings(); 
    webSettings.setJavaScriptEnabled(true); 
    webSettings.setPluginsEnabled(true);
    myWebView.loadUrl("http://www.youtube.com/v/nVLcujAj67g?version=3"); 
```

# c++ - 在条件语句中分配整数

> ID：14949414
> 
> 赞同：0
> 
> 时间：2013-02-19T03:36:33.827
> 
> 标签：c++

我想将返回值 CountBitDifference 分配给 currentDistance。相反，它返回给我一个 0 或 1，具体取决于条件语句是假还是真。有没有办法在条件语句中分配 currentDistance 值，否则我将不得不在其他地方进行。

```
if (int currentDistance = CountBitDifference(m0.ptr<unsigned char>(matches[i].queryIdx),
                                    m1.ptr<unsigned char>(matches[i].trainIdx),
                                    cascadeSize, cascadeByteIndex) >= 8) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:40:56.837

您的代码初始化`currentDistance`为`>=`. 如果您想分配`currentDistance`从 返回的值`CountBitDifference`，*并将*该值与 8 进行比较——所有这些都在同一个表达式中——你需要括号。

```
int currentDistance;
if ( ( currentDistance = CountBitDifference(m0.ptr<unsigned char>(matches[i].queryIdx),
                                    m1.ptr<unsigned char>(matches[i].trainIdx),
                                    cascadeSize, cascadeByteIndex)) >= 8) 
```

或者，更清楚地说：

```
int currentDistance = CountBitDifference(m0.ptr<unsigned char>(matches[i].queryIdx),
                                    m1.ptr<unsigned char>(matches[i].trainIdx),
                                    cascadeSize, cascadeByteIndex);
if(currentDistance >= 8) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T03:41:25.090

首先，我将转储到日志以确认您的 CountBitDifference 表达式正在执行它应该执行的操作。如果是这样，这似乎是一个奇怪的范围界定错误。在语句中分配它之前定义和初始化 currentDistance 会不会杀了你？

if 语句还检查此函数是否成功...您为什么要这样做？

**编辑：**我完全错过了表达式末尾的比较。这有点笨拙，我会认真考虑将其分解为一个返回布尔值的函数。8也是一个神奇的数字。

**编辑：**试试这个，返回一个整数并作为一个鼓励重用的函数。

```
public int getBitDifference() {

    //assumes you have declared your variables in a greater scope
    //otherwise you will have to pass your variables to the function... hard to say
    //without seeing all the code

    return CountBitDifference(m0.ptr<unsigned char>(matches[i].queryIdx),
                                m1.ptr<unsigned char>(matches[i].trainIdx),
                                cascadeSize, cascadeByteIndex)

} 
```

进而：

```
if (getBitDifference() >= 8) {

//do stuff here

} 
```

更具可读性。还要将 8 声明为常量 BIT_DISTANCE_MARGIN 以避免使用幻数，所以

```
if (getBitDifference() >= BIT_DISTANCE_MARGIN) {

//do stuff here

} 
```

你已经得到了一些可读、可维护的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T03:44:01.233

```
if (int currentDistance = CountBitDifference(m0.ptr<unsigned char>(matches[i].queryIdx),
                                    m1.ptr<unsigned char>(matches[i].trainIdx),
                                    cascadeSize, cascadeByteIndex) >= 8) 
```

只是太难读了。试试下面的代码。

```
 int currentDistance = CountBitDifference(m0.ptr<unsigned char>(matches[i].queryIdx) 
                                           ,m1.ptr<unsigned char>(matches[i].trainIdx)
                                           ,cascadeSize, cascadeByteIndex);
   if(currentDistance >= 8) { } 
```

还要记住，当有人正在阅读您的代码时，可能是您在以后的日期，他们/您可能不记得和运算符的关联性`=`以及`>=`一个相对于另一个的优先级。因此，将两个语句分成多行是一个好主意。可读性很重要，不必要的简洁是愚蠢的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T03:44:26.887

你不应该有任何理由要这样做......

在 if 语句之前初始化同样容易并且更具可读性。如果您不需要保留 CountBitDifference 的值，为什么不能这样做：

```
if (CountBitDifference(m0.ptr<unsigned char>(matches[i].queryIdx),
                                m1.ptr<unsigned char>(matches[i].trainIdx),
                                cascadeSize, cascadeByteIndex) >= 8) 
```

如果您需要保留它，请执行以下操作：

```
int currentDistance = CountBitDifference(m0.ptr<unsigned char>(matches[i].queryIdx),
                                m1.ptr<unsigned char>(matches[i].trainIdx),
                                cascadeSize, cascadeByteIndex);

if (currentDistance >= 8) 
```

# java - 当我启动一个线程时，Java 游戏一直卡住？

> ID：14949418
> 
> 赞同：1
> 
> 时间：2013-02-19T03:36:56.157
> 
> 标签：java, freeze, if-statement

我正在制作上述模式的 2D Zombie Shooter，但我遇到了一些线程问题。这是交易。每次按空格键时，我都会让角色射出一颗子弹。问题是，如果你保持空间，它会发射一个，然后暂停，然后发射很多子弹。有很多方法可以解决这个问题，但我想要这种方式，因为它为未来改变拍摄速度留下了空间。这是导致问题的线程的代码：

```
package threads;

import Game.GameCore;

public class Shoot extends GameCore implements Runnable {

/**
 * WHEN I START THIS THREAD, THE ENTIRE GAME FREEZES, AND I DO NOT KNOW
 * WHY... NEED TO FIX. IT DOES NOT FIX THE PROBLEM TO TAKE OUT THE "SHOOT"
 * OR THE "SLEEP"...
 */

public void run() {
    while (shooting && gameRunning) { // shooting is made true when space is
                                        // pressed, and set false when space
                                        // is released. gameRunning is true
                                        // if the game is running, which it
                                        // is. removing either of these
                                        // doesnt work either.
        player.shoot(); // player comes from the GameCore class, and
                        // represents the player entity. if i remove this,
                        // nothing changes.

        try {
            Thread.sleep(bulletShootSpeedMillis); // bulletShootSpeedMillis
                                                    // is equal to 1000, but
                                                    // makes no difference
                                                    // to change
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}

} 
```

所以这是该死的问题。评论有点指出它们，但我列出了它们。如果我删除明显的东西，例如，`player.shoot();`甚至`Thread.sleep(bulletShootSpeedMillis);`是 while 循环中的东西之一，没有任何变化。问题是当我初始化线程时，

```
else if (key == Integer.parseInt(commands[6])) {
        shooting = true;
        new Thread(new Shoot()).run();
    } 
```

整个游戏只是冻结。什么都没有发生。当我用空格开始线程的那一刻，我的游戏冻结了，我不知道为什么！！！以前的版本：

```
else if (key == Integer.parseInt(commands[6])) {
                    player.shoot();
            } 
```

它工作得很好。请帮忙！提前致谢！:)

**编辑：**感谢您的快速回答。不用说，主要的学习经验，简单的错误XD

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T03:37:42.803

哎呀！

```
new Thread(new Shoot()).run(); // ***** !!!! 
```

您不会通过调用线程的`run()`方法来启动线程，因为所做的只是调用与调用代码*相同*的线程中的代码。你通过调用它的方法来启动一个*新的线程。*`start()`

# javascript - Javascript Number 对象方法中的“this”如何转换为对象的数值？

> ID：14949419
> 
> 赞同：1
> 
> 时间：2013-02-19T03:36:59.600
> 
> 标签：javascript

似乎在 Number 对象中，数值可以直接使用“this”而不是 this.valueOf() 或类似“this.value”的东西来引用，例如：

```
Number.prototype.printPlusOne=function(){ 
      var tmp=this+1;
      alert(tmp); 
}
var n=new Number("5");
n.printPlusOne(); 
```

为什么这是可能的（在上面的添加中直接使用“this”而不是“this.valueOf()”）？
我在号码规范中没有找到这个功能，我错过了什么吗？
此外，这种自动转换功能是否用于其他类别的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T04:41:12.243

运算符的两个操作数都不`+`是字符串，因此 JavaScript 调用`valueOf`将 Object（`Number`在本例中为 a ）隐式转换为原始值，以执行数字加法。引用大卫弗拉纳根的话：

> 如果对象有一个`valueOf()`返回原始值的方法，JavaScript 会将该原始值转换（如果需要）为一个数字并返回结果。

因此，`this`隐式转换为其原始值。

如果你做了一些愚蠢的事情，比如 override `Number.valueOf`：

```
Number.prototype.valueOf = function() {
    return 10;
} 
```

那么你的函数会提醒*11*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T03:42:07.723

不确定您要在这里完成什么，但是：

```
Number.prototype.print=function(){ 
      alert(this.valueOf()); 
}

var n=new Number("5");
n.print(); 
```

# windows - How to update environment variable on the same session (immediately) on powershell?

> ID：14949421
> 
> 赞同：0
> 
> 时间：2013-02-19T03:37:20.603
> 
> 标签：windows, powershell, environment-variables

I would like to write some scripts on powershell, it involve using the environment variable on windows

here is the example of the script

test.ps1

```
setX number 456
echo $env:number 
```

I found that $env:number cannot be updated immedately on the same session of powershell prompt. I need to reopen the powershell prompt. However, this would break my scripts How can i update the env variable immedately? In linux it is easy to do with EXPORT command, but for windows, it is a hazard...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T04:58:31.463

In PowerSell environment variables are available through a provider. A `provider` is a way to manupulation all kind of tree containers. have à look at :

```
Get-PSProvider 
```

Then drives are entities using these providers. have a look at

```
Get-PSDrive 
```

You can see that it exists a drive called `env`

You can try :

```
Get-childItem env: 
```

to set an environment variables you can write :

$env:mavar = "TESTJPB"

To create more permanent environment variables (i.e., user-level or machine-level) you need to use the .NET Framework and the SetEnvironmentVariable method. For example, this command creates a user-level environment variable named TestVariable:

```
[Environment]::SetEnvironmentVariable("mavar", "TESTJPB", "User") 
```

Have a look to [this](http://technet.microsoft.com/en-us/library/ff730964.aspx) Microsoft article.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T04:27:24.673

Have you tried

```
[environment]::setenvironmentvariable() 
```

# iphone - APN 配置文件保存在您的 iPhone 中的什么位置？

> ID：14949422
> 
> 赞同：0
> 
> 时间：2013-02-19T03:37:21.583
> 
> 标签：iphone

我想查看我已经安装在我的 iphone 上的现有配置文件。我想知道在哪里以及如何查看详细信息？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:23:32.097

没有 APN 配置文件这样的术语。有配置文件和嵌入配置文件的 APN 证书。您可以在设置 -> 常规 -> 配置文件中查看所有配置文件的列表。您将能够获得有关所需配置文件的最少信息，例如何时收到和过期。如果需要，您也可以将其删除。他们不通过此 UI 提供与 APN 相关的任何特定信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:25:01.860

在设备中，你可以看到它

**设置->常规->配置文件**

**在开发系统中，您可以在Keychain**中看到它

 **打开**Finder->应用程序->钥匙串**

在钥匙串中，您可以使用搜索选项并将搜索字符串用作“iphone”。

**您可以在Xcode->window->Organizer->Devices**下看到已安装的配置文件**

# java - 使用 Derby 休眠：事务仍处于活动状态时无法关闭连接

> ID：14949428
> 
> 赞同：1
> 
> 时间：2013-02-19T03:37:48.497
> 
> 标签：java, hibernate, derby

我正在使用 Hibernate（尝试学习）和 Derby；我使用 Squirrel 和 SQL 脚本创建和检查数据库，并在我的程序中向它写入 3 条记录。

我收到“事务仍处于活动状态时无法关闭连接”；它似乎出现在为休眠配置事物的过程中，但我在数据库中创建的记录无论如何都会写在那里。我已经尝试过非“40”驱动程序，我已经将用户名和密码作为 URL 参数而不是在休眠配置中单独输入，我无法弄清楚可能正在运行的其他事务。我在循环中对 create() 的调用放置了一个断点，当它被命中时，错误已经出现在控制台中，所以这与我正在写的记录无关。有人在这里有其他想法吗？

下面是主程序代码：

```
package samplerc;

import sample.CreateUser;

public class CreateRecords
{
  public static void main(String[] args)
  {
    try
    {
      String[][] userList = 
        { { "rc", "1" },
          { "pbh", "2" },
          { "jbc", "3" }
        };

      CreateUser userCreator = new CreateUser();
      userCreator.addUserList(userList);
    }
    catch (Exception e)
    {
      e.printStackTrace();
    }

  }

} 
```

这是 CreateUser：

```
package sample;

import org.hibernate.HibernateException;
import sample.dao.DAO;
import sample.entity.User;

public class CreateUser extends DAO
{

  public void addUserList(String[][] userList)
    throws Exception
  {

      try
      {
        for (int i=0; i<userList.length; i++)
        {
          create(userList[i][0], userList[i][1]);
          System.out.println("Created user");
          DAO.close();
        }
      }
      catch (Exception e)
      {
        // TODO Auto-generated catch block
        e.printStackTrace();
      }
  }

  public User create(String username, String password) throws Exception
  {
    try
    {
      begin();
      User user = new User(username, password);
      getSession().save(user);
      commit();
      return user;
    }
    catch (HibernateException e)
    {
      throw new Exception("Could not create user " + username, e);
    }
  }
} 
```

DAO 基类曾经在这里；它现在在下面的编辑中，因为我替换了它：

休眠配置文件：

```
 <!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

    <hibernate-configuration>
      <session-factory>
        <property name="hibernate.connection.url"> jdbc:derby://localhost:1527/C:/Users/rcook/workspaceGalileoLaptop/BHChap3/BegHibernateDB</property>
        <property name="hibernate.connection.driver_class"> org.apache.derby.jdbc.ClientDriver40 </property>
        <property name="hibernate.connection.username">admin</property>
        <property name="hibernate.connection.password">admin</property>
        <property name="hibernate.dialect">   org.hibernate.dialect.DerbyDialect  </property>

        <property name="hibernate.connection.pool_size">0</property>
        <property name="hibernate.show_sql">false</property>

        <!-- "Import" the mapping resources here -->
        <mapping class="sample.entity.Message"/>
        <mapping class="sample.entity.Advert"/>
        <mapping class="sample.entity.Category"/>
        <mapping class="sample.entity.User"/>

      </session-factory>
    </hibernate-configuration> 
```

日志文件曾经在这里；由于发布限制，我已将其删除，因为我在下面的编辑中有另一个日志。

-- 在 Guido 的回答之后更新

Guido，这是一个绝妙的主意，我确信它是正确的。不幸的是，我所做的更改似乎并没有解决它。这是新的 DAO 类，以及您建议的更改：

```
package sample.dao;

import java.util.logging.Level;
import java.util.logging.Logger;

import org.hibernate.HibernateException;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;

public class DAO
{
  private static final Logger         log = Logger.getAnonymousLogger();
  private static       SessionFactory sessionFactory = null;
  private static final ThreadLocal    threadLocalSession = new ThreadLocal();

  protected DAO()
  {
  }

  private static synchronized SessionFactory getSessionFactory()
  {
    if (sessionFactory == null)
    {
      sessionFactory = new Configuration().configure().buildSessionFactory();
    }
    return sessionFactory;
  }

  public static Session getSession()
  {
    String threadName = Thread.currentThread().getName();
    System.out.println(String.format("getting session, thread = '%s'", threadName));
    Session localSession = (Session) DAO.threadLocalSession.get();
    if (localSession == null)
    {
      try
      {
        localSession = getSessionFactory().openSession();
        DAO.threadLocalSession.set(localSession);
      }
      catch (HibernateException e)
      {
        // TODO Auto-generated catch block
        e.printStackTrace();
      }
    }
    return localSession;
  }

  protected void begin()
  {
    try
    {
      getSession().beginTransaction();
    }
    catch (HibernateException e)
    {
      // TODO Auto-generated catch block
      e.printStackTrace();
    }
  }

  protected void commit()
  {
    try
    {
      getSession().getTransaction().commit();
    }
    catch (HibernateException e)
    {
      // TODO Auto-generated catch block
      e.printStackTrace();
    }
  }

  protected void rollback()
  {
    try
    {
      getSession().getTransaction().rollback();
    }
    catch (HibernateException e)
    {
      log.log(Level.WARNING, "Cannot rollback", e);
    }

    try
    {
      getSession().close();
    }
    catch (HibernateException e)
    {
      log.log(Level.WARNING, "Cannot close", e);
    }
    DAO.threadLocalSession.set(null);
  }

  public static void close()
  {
    getSession().close();
//    try { Thread.sleep(5000); } catch (InterruptedException ie) {}
    DAO.threadLocalSession.set(null);
  }
} 
```

这是新的日志文件。我陷入了一个跟踪语句，发现它的输出与其他输出相比很有趣。欢迎您（或其他任何人）有任何其他想法。

```
Starting...
  getting session, thread = 'main'
  Feb 19, 2013 10:25:21 AM org.hibernate.annotations.common.Version <clinit>
  INFO: Hibernate Commons Annotations 3.2.0.Final
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.Environment <clinit>
  INFO: Hibernate 3.6.10.Final
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.Environment <clinit>
  INFO: hibernate.properties not found
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.Environment buildBytecodeProvider
  INFO: Bytecode provider name : javassist
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.Environment <clinit>
  INFO: using JDK 1.4 java.sql.Timestamp handling
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.Configuration configure
  INFO: configuring from resource: /hibernate.cfg.xml
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.Configuration getConfigurationInputStream
  INFO: Configuration resource: /hibernate.cfg.xml
  Feb 19, 2013 10:25:21 AM org.hibernate.util.DTDEntityResolver resolveEntity
  WARNING: recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.Configuration doConfigure
  INFO: Configured SessionFactory: null
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.AnnotationBinder bindClass
  INFO: Binding entity from annotated class: sample.entity.Message
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.annotations.EntityBinder bindTable
  INFO: Bind entity sample.entity.Message on table Message
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.AnnotationBinder bindClass
  INFO: Binding entity from annotated class: sample.entity.Advert
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.annotations.EntityBinder bindTable
  INFO: Bind entity sample.entity.Advert on table Advert
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.AnnotationBinder bindClass
  INFO: Binding entity from annotated class: sample.entity.Category
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.annotations.EntityBinder bindTable
  INFO: Bind entity sample.entity.Category on table Category
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.AnnotationBinder bindClass
  INFO: Binding entity from annotated class: sample.entity.User
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.annotations.EntityBinder bindTable
  INFO: Bind entity sample.entity.User on table AdUser
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.Configuration applyHibernateValidatorLegacyConstraintsOnDDL
  INFO: Hibernate Validator not found: ignoring
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.search.HibernateSearchEventListenerRegister enableHibernateSearch
  INFO: Unable to find org.hibernate.search.event.FullTextIndexEventListener on the classpath. Hibernate Search is not enabled.
  Feb 19, 2013 10:25:21 AM org.hibernate.connection.DriverManagerConnectionProvider configure
  INFO: Using Hibernate built-in connection pool (not for production use!)
  Feb 19, 2013 10:25:21 AM org.hibernate.connection.DriverManagerConnectionProvider configure
  INFO: Hibernate connection pool size: 0
  Feb 19, 2013 10:25:21 AM org.hibernate.connection.DriverManagerConnectionProvider configure
  INFO: autocommit mode: false
  Feb 19, 2013 10:25:21 AM org.hibernate.connection.DriverManagerConnectionProvider configure
  INFO: using driver: org.apache.derby.jdbc.ClientDriver40 at URL: jdbc:derby://localhost:1527/BegHibernateDB
  Feb 19, 2013 10:25:21 AM org.hibernate.connection.DriverManagerConnectionProvider configure
  INFO: connection properties: {user=admin, password=****}
  Feb 19, 2013 10:25:21 AM org.hibernate.dialect.Dialect <init>
  INFO: Using dialect: org.hibernate.dialect.DerbyDialect
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.SettingsFactory buildSettings
  INFO: Database ->
         name : Apache Derby
      version : 10.8.1.2 - (1095077)
        major : 10
        minor : 8
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.SettingsFactory buildSettings
  INFO: Driver ->
         name : Apache Derby Network Client JDBC Driver
      version : 10.8.1.2 - (1095077)
        major : 10
        minor : 8
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.SettingsFactory buildSettings
  WARNING: Could not obtain connection to query metadata
  java.sql.SQLException: Cannot close a connection while a transaction is still active.
    at org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(Unknown Source)
    at org.apache.derby.client.am.SqlException.getSQLException(Unknown Source)
    at org.apache.derby.client.am.Connection.closeResourcesX(Unknown Source)
    at org.apache.derby.client.am.Connection.closeX(Unknown Source)
    at org.apache.derby.client.net.NetConnection.closeX(Unknown Source)
    at org.apache.derby.client.am.Connection.close(Unknown Source)
    at org.apache.derby.client.net.NetConnection.close(Unknown Source)
    at org.apache.derby.client.net.NetConnection40.close(Unknown Source)
    at org.hibernate.connection.DriverManagerConnectionProvider.closeConnection(DriverManagerConnectionProvider.java:160)
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:143)
    at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2863)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2859)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1870)
    at sample.dao.DAO.getSessionFactory(DAO.java:25)
    at sample.dao.DAO.getSession(DAO.java:39)
    at sample.dao.DAO.begin(DAO.java:55)
    at sample.CreateUser.create(CreateUser.java:77)
    at sample.CreateUser.addUserList(CreateUser.java:61)
    at samplerc.CreateRecords.main(CreateRecords.java:19)
  Caused by: org.apache.derby.client.am.SqlException: Cannot close a connection while a transaction is still active.
    at org.apache.derby.client.am.Connection.checkForTransactionInProgress(Unknown Source)
    ... 17 more
  Feb 19, 2013 10:25:21 AM org.hibernate.dialect.Dialect <init>
  INFO: Using dialect: org.hibernate.dialect.DerbyDialect
  Feb 19, 2013 10:25:21 AM org.hibernate.transaction.TransactionFactoryFactory buildTransactionFactory
  INFO: Using default transaction strategy (direct JDBC transactions)
  Feb 19, 2013 10:25:21 AM org.hibernate.transaction.TransactionManagerLookupFactory getTransactionManagerLookup
  INFO: No TransactionManagerLookup configured (in JTA environment, use of read-write or transactional second-level cache is not recommended)
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.SettingsFactory buildSettings
  INFO: Automatic flush during beforeCompletion(): disabled
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.SettingsFactory buildSettings
  INFO: Automatic session close at end of transaction: disabled
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.SettingsFactory buildSettings
  INFO: Scrollable result sets: enabled
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.SettingsFactory buildSettings
  INFO: JDBC3 getGeneratedKeys(): disabled
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.SettingsFactory buildSettings
  INFO: Connection release mode: auto
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.SettingsFactory buildSettings
  INFO: Default batch fetch size: 1
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.SettingsFactory buildSettings
  INFO: Generate SQL with comments: disabled
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.SettingsFactory buildSettings
  INFO: Order SQL updates by primary key: disabled
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.SettingsFactory buildSettings
  INFO: Order SQL inserts for batching: disabled
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.SettingsFactory createQueryTranslatorFactory
  INFO: Query translator: org.hibernate.hql.ast.ASTQueryTranslatorFactory
  Feb 19, 2013 10:25:21 AM org.hibernate.hql.ast.ASTQueryTranslatorFactory <init>
  INFO: Using ASTQueryTranslatorFactory
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.SettingsFactory buildSettings
  INFO: Query language substitutions: {}
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.SettingsFactory buildSettings
  INFO: JPA-QL strict compliance: disabled
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.SettingsFactory buildSettings
  INFO: Second-level cache: enabled
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.SettingsFactory buildSettings
  INFO: Query cache: disabled
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.SettingsFactory createRegionFactory
  INFO: Cache region factory : org.hibernate.cache.impl.NoCachingRegionFactory
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.SettingsFactory buildSettings
  INFO: Optimize cache for minimal puts: disabled
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.SettingsFactory buildSettings
  INFO: Structured second-level cache entries: disabled
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.SettingsFactory buildSettings
  INFO: Statistics: disabled
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.SettingsFactory buildSettings
  INFO: Deleted entity synthetic identifier rollback: disabled
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.SettingsFactory buildSettings
  INFO: Default entity-mode: pojo
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.SettingsFactory buildSettings
  INFO: Named query checking : enabled
  Feb 19, 2013 10:25:21 AM org.hibernate.cfg.SettingsFactory buildSettings
  INFO: Check Nullability in Core (should be disabled when Bean Validation is on): enabled
  Feb 19, 2013 10:25:22 AM org.hibernate.impl.SessionFactoryImpl <init>
  INFO: building session factory
  Feb 19, 2013 10:25:22 AM org.hibernate.type.BasicTypeRegistry register
  INFO: Type registration [characters_clob] overrides previous : org.hibernate.type.PrimitiveCharacterArrayClobType@494eaec9
  Feb 19, 2013 10:25:22 AM org.hibernate.type.BasicTypeRegistry register
  INFO: Type registration [materialized_clob] overrides previous : org.hibernate.type.MaterializedClobType@4cb533b8
  Feb 19, 2013 10:25:22 AM org.hibernate.type.BasicTypeRegistry register
  INFO: Type registration [wrapper_materialized_blob] overrides previous : org.hibernate.type.WrappedMaterializedBlobType@c569c60
  Feb 19, 2013 10:25:22 AM org.hibernate.type.BasicTypeRegistry register
  INFO: Type registration [materialized_blob] overrides previous : org.hibernate.type.MaterializedBlobType@a3468f4
  Feb 19, 2013 10:25:22 AM org.hibernate.type.BasicTypeRegistry register
  INFO: Type registration [blob] overrides previous : org.hibernate.type.BlobType@76d67067
  Feb 19, 2013 10:25:22 AM org.hibernate.type.BasicTypeRegistry register
  INFO: Type registration [java.sql.Blob] overrides previous : org.hibernate.type.BlobType@76d67067
  Feb 19, 2013 10:25:22 AM org.hibernate.type.BasicTypeRegistry register
  INFO: Type registration [clob] overrides previous : org.hibernate.type.ClobType@786db724
  Feb 19, 2013 10:25:22 AM org.hibernate.type.BasicTypeRegistry register
  INFO: Type registration [java.sql.Clob] overrides previous : org.hibernate.type.ClobType@786db724
  Feb 19, 2013 10:25:22 AM org.hibernate.type.BasicTypeRegistry register
  INFO: Type registration [wrapper_characters_clob] overrides previous : org.hibernate.type.CharacterArrayClobType@11c7865b
  Feb 19, 2013 10:25:22 AM org.hibernate.impl.SessionFactoryObjectFactory addInstance
  INFO: Not binding factory to JNDI, no JNDI name configured
  getting session, thread = 'main'
  getting session, thread = 'main'
  Created user
  getting session, thread = 'main'
  getting session, thread = 'main'
  getting session, thread = 'main'
  getting session, thread = 'main'
  Created user
  getting session, thread = 'main'
  getting session, thread = 'main'
  getting session, thread = 'main'
  getting session, thread = 'main'
  Created user
  getting session, thread = 'main' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:42:00.753

`<clinit>`这是因为在扩展 DAO 的四个映射类中的每一个的初始化（而不是构造函数）中，都会执行以下操作：

```
private static final SessionFactory sessionFactory = 
   new Configuration().configure().buildSessionFactory(); 
```

编写一个适当的 HibernateUtil 类（例如在[这里](https://stackoverflow.com/questions/8841207/hibernate-opening-closing-session-the-correct-approach-for-dao)）；或执行以下操作：

```
private static final SessionFactory sessionFactory;

private static synchronized SessionFactory getSessionFactory() {
     if (sessionFactory == null) {
          sessionFactory = new Configuration().configure().buildSessionFactory();
     }
     return sessionFactory;
} 
```

然后仅通过 getSessionFactory() 引用 sessionFactory。

编辑：看看这个：[https ://forum.hibernate.org/viewtopic.php?f=6&t=953499](https://forum.hibernate.org/viewtopic.php?f=6&t=953499)

这正是您的问题，请检查数据库的架构，该数据库实际上位于预期位置。

[编辑 2：在第 101 行阅读此处](http://www.docjar.com/html/api/org/hibernate/cfg/SettingsFactory.java.html)的注释，然后尝试将 property `hibernate.temp.use_jdbc_metadata_defaults`属性设置为 false。

该属性已从休眠 4.x 中删除

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T04:23:11.603

我在您的代码路径（参见您的堆栈跟踪）试图关闭连接的位置查看了当前的 Hibernate 源代码。

尽管我查看的源 [1] 与您的堆栈跟踪不太匹配，但我相信 Hibernate 刚刚在 Derby 中查询*数据库元数据*作为其设置的一部分。即使是只读查询也会在 Derby 中设置事务。

如果 Hibernate 在关闭 JDBC 自动提交的情况下运行此查询，并且在尝试关闭连接之前忽略了提交（或回滚）事务，您将看到此错误。我建议就此联系 Hibernate 人员。也许他们的德比方言需要一些调整。

谢谢，
达格

[1] [https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/cfg/SettingsFactory.java](https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/cfg/SettingsFactory.java)

# r - 如何在 R 中重新创建这个 2d 表面 + 轮廓 + 字形图？

> ID：14949437
> 
> 赞同：1
> 
> 时间：2013-02-19T03:38:54.880
> 
> 标签：r, graphics, plot, visualization

我在一些建模软件中运行了 2d 模拟，从中我导出了具有一组 6 个属性的 x、y 点位置。我希望重新创建一个组合数据的图形，如下所示： ![在此处输入图像描述](../Images/21536dc7fb668c86c82175a84a1e0740.png)

椭圆和背景根据属性 1 着色（它们的边界当然代表模型几何，但我认为我不能复制它），等值线是属性 2 的轮廓，箭头字形是来自属性 3（x 震级）和 4（y 震级）。

x,y 点是我认为的三角网格的中心，如下所示： ![在此处输入图像描述](../Images/db975ee64664b8d00c1fe358167cae52.png)

我想知道如何使用 R 重新创建这样的图。首先，由于数据是从不规则网格导出的，因此我有不规则间隔的数据。这就是我被 R 卡住的地方，我只用它来制作盒子和耳语情节等。

这是数据： [https](https://dl.dropbox.com/u/22417033/Ellipses_noheader.txt)
://dl.dropbox.com/u/22417033/Ellipses_noheader.txt 编辑：字段：x、y、热通量 (x)、热通量 (y)、热导率、温度、gradT (x) , 梯度 (y)。

```
names(Ellipses) <- c('x','y','dfluxx','dfluxy','kxx','Temps','gradTx','gradTy') 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T04:31:04.983

制作较低的情节很容易（假设有一个名为“edat”的数据框读入：

```
 edat <- read.table(file=file.choose())
 with(edat, plot(V1,V2), cex=0.2) 
```

![在此处输入图像描述](../Images/1556750fa67700d198c7812702c09c76.png)

事情变得更加美好：

```
with(edat, plot(V1,V2, cex=0.2, col=V5)) 
```

![在此处输入图像描述](../Images/0aeb7ac25ea42ab97dfe5343e90c9431.png)

所以我不认为你的原件被数据忠实地代表了。轮廓线不是直接穿过“导体”。我称它们为“导体”，因为这看起来有点像静电学中的等势线。我在这里添加了一些文本作为搜索句柄，供其他可能正在搜索现实世界物理学中的绘图问题的人使用：矢量场（箭头）、热方程、梯度、势线。然后，您可以使用以下内容覆盖矢量场：

```
with(edat, arrows(V1,V2, V1-20*V6*V7, V2-20*V6*V8, length=0.04, col="orange") ) 
```

![在此处输入图像描述](../Images/429fa447b44525d24c8cb0a8a3b9943e.png)

你可以用 xlim 和 ylim“放大”：

```
with(edat, plot(V1,V2, cex=0.3, col=V5, xlim=c(0, 10000), ylim=c(-8000, -2000) ))
with(edat, arrows(V1,V2, V1-20*V6*V7, V2-20*V6*V8, length=0.04, col="orange") ) 
```

![在此处输入图像描述](../Images/67a195b1a8dd0ab93bc2c6d963f0d235.png)

猜测是否为 Temps 变量请求了轮廓。选择等高线图。

```
require(akima)
intflow<- with(edat, interp(x=x, y=y, z=Temps, xo=seq(min(x), max(x), length = 410), 
              yo=seq(min(y), max(y), length = 410), duplicate="mean", linear=FALSE) )

require(lattice)
contourplot(intflow$z)
filled.contour(intflow)
with( intflow, contour(x=x, y=y, z=z) ) 
```

![在此处输入图像描述](../Images/01b608bc75c45158d1f2db54bd26740b.png)

最后一个将与其他绘图示例混合，因为这些示例使用基本绘图功能。您可能需要切换到`points`而不是`plot`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T04:57:10.790

你的情节有几个部分，所以你可能需要几个工具来制作不同的部分。

可以创建背景和椭圆`polygon`（一旦你确定它们应该在哪里）。

该`contourLines`函数可以为您计算轮廓线，您可以使用该`lines`函数添加这些轮廓线（或`contour`具有和`add`参数，并且可能用于直接添加线条）。

akima 包有一个函数`interp`，它可以在给定未网格化的值的情况下估计网格上的值。

来自 TeachingDemos 包的`my.symbols`函数 和`ms.arrows`可用于绘制矢量场。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T08:28:47.193

@DWin 说您的图表不能忠实地代表您的数据是正确的，所以我建议您遵循他的回答。然而，这里是如何重现（我能做到的最接近的）你的图表：

```
Ellipses <- read.table(file.choose())
names(Ellipses) <- c('x','y','dfluxx','dfluxy','kxx','Temps','gradTx','gradTy')
require(splancs)
require(akima) 
```

首先准备数据：

```
#First the background layer (the 'kxx' layer):
# Here the regular grid on which we're gonna do the interpolation
E.grid <- with(Ellipses, 
               expand.grid(seq(min(x),max(x),length=200),
                           seq(min(y),max(y),length=200)))
names(E.grid) <- c("x","y") # Without this step, function inout throws an error
E.grid$Value <- rep(0,nrow(E.grid))
#Split the dataset according to unique values of kxx
E.k <- split(Ellipses,Ellipses$kxx)
# Find the convex hull delimiting each of those values domain
E.k.ch <- lapply(E.k,function(X){X[chull(X$x,X$y),]}) 
for(i in unique(Ellipses$kxx)){ # Pick the value for each coordinate in our regular grid
    E.grid$Value[inout(E.grid[,1:2],E.k.ch[names(E.k.ch)==i][[1]],bound=TRUE)]<-i
}

# Then the regular grid for the second layer (Temp)
T.grid <- with(Ellipses,
               interp(x,y,Temps, xo=seq(min(x),max(x),length=200),        
                      yo=seq(min(y),max(y),length=200), 
                      duplicate="mean", linear=FALSE))
# The regular grids for the arrow layer (gradT)
dx <- with(Ellipses,
           interp(x,y,gradTx,xo=seq(min(x),max(x),length=15),
                  yo=seq(min(y),max(y),length=10),
                  duplicate="mean", linear=FALSE))
dy <- with(Ellipses,
           interp(x,y,gradTy,xo=seq(min(x),max(x),length=15),
                  yo=seq(min(y),max(y),length=10),
                  duplicate="mean", linear=FALSE))
T.grid2 <- with(Ellipses,
               interp(x,y,Temps, xo=seq(min(x),max(x),length=15),        
                      yo=seq(min(y),max(y),length=10), 
                      duplicate="mean", linear=FALSE))
gradTgrid<-expand.grid(dx$x,dx$y) 
```

然后是绘图：

```
palette(grey(seq(0.5,0.9,length=5)))
par(mar=rep(0,4))
plot(E.grid$x, E.grid$y, col=E.grid$Value, 
     axes=F, xaxs="i", yaxs="i", pch=19)
contour(T.grid, add=TRUE, col=colorRampPalette(c("blue","red"))(15), drawlabels=FALSE)
arrows(gradTgrid[,1], gradTgrid[,2],  # Here I multiply the values so you can see them
       gradTgrid[,1]-dx$z*40*T.grid2$z, gradTgrid[,2]-dy$z*40*T.grid2$z, 
       col="yellow", length=0.05) 
```

![在此处输入图像描述](../Images/7c0df3e4d9702a616949a5cdd1b10541.png)

要详细了解此代码的工作原理，我建议您阅读以下帮助页面：`?inout`、`?chull`、`?interp`和。`?expand.grid``?contour`

# mediaelement.js - 触发 MediaElements Player 开始播放

> ID：14949439
> 
> 赞同：1
> 
> 时间：2013-02-19T03:39:22.033
> 
> 标签：mediaelement.js

我们正在努力在 Galleria 幻灯片放映中播放音频。Galleria（js-json-html幻灯片框架）本身不支持声音，但您可以从Galleria中的事件触发其他功能。我们使用 MediaElement 播放器播放声音，当用户第一次与幻灯片交互以移动到第二张幻灯片时，我们可以触发播放器控制器的实例化。

但我无法让玩家开始。从理论上讲，我下面的代码是正确的，并且在 FireBug 中我没有收到任何错误。“mePlayer.play()”调用是，我认为应该启动播放。但这不是……有人知道为什么吗？

```
$("#gallery1360896922").galleria({
    dataSource: data,
    height: 500,
      width: 809,
      imageCrop:'landscape',
      thumbcrop: false,
     _showFullscreen: false,
      imagePan:true,
      idleMode:false,
      transitionSpeed:150});   

Galleria.on('loadfinish',function(e){

if (e.index==1){
       var mePlayer = $('#audio-').mediaelementplayer
          ({
       features: ['playpause','progress','current','duration','volume'],
       audioWidth:809,
});

mePlayer.play();
}
}); 
```

以上所有作品，几乎可以看到：

[http://www.himalayanacademy.com/blog/taka/2012/02/17/test-media-player-with-slide-show/](http://www.himalayanacademy.com/blog/taka/2012/02/17/test-media-player-with-slide-show/)

并单击以移至第二张幻灯片.. 瞧！mediaelement 播放器出现，但不会启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:22:06.747

对于初学者，请尝试在**document.ready**时实例化您的 mediaelement 对象。

定义一个全局范围变量，您将在其中分配对象的实例化：

```
var mePlayer; //Global scope variable

mePlayer = new MediaElementPlayer('#audio-', //...and so on 
```

然后，无论你做什么`mePlayer .play();`

# c++ - C++ OpenGL乒乓球移动太快

> ID：14949441
> 
> 赞同：4
> 
> 时间：2013-02-19T03:39:43.620
> 
> 标签：c++, opengl, timer, pong

我正在尝试使用 opengl 在 C++ 中创建一个简单的乒乓球游戏。我在屏幕上显示了边框，桨，球，它们都在移动，太棒了！问题是，即使以一个像素的速度，球也会以闪电般的速度移动。

我在名为 init 的回调函数中更新它的位置，然后我将其传递给 glutIdleFunc，如下所示：`glutIdleFunc(idle);`

空闲函数如下：

```
void idle(){
    ball.moveLeft();

    glutPostRedisplay();
} 
```

本质上，我只是让它向左移动一个像素，但是，我猜空闲被调用了很多，所以它移动得很快。如何修复此错误？

如果您需要更多信息，请询问！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T03:45:07.813

使用 GLUT 计时器`display()`每 16 毫秒触发一次回调：

```
void timer( int extra )
{
    glutPostRedisplay();
    glutTimerFunc( 16, timer, 0 );
}

int main( int argc, char **argv )
{
    glutInit( &argc, argv );
    glutInitDisplayMode( ... );
    glutInitWindowSize( ... );
    glutCreateWindow( ... );
    ...
    glutTimerFunc( 0, timer, 0 );
    ...
    glutMainLoop();
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T03:49:11.553

这是我找到的一个博客链接，该链接讨论了如何获得过剩时间以显示每秒帧数。

[http://www.lighthouse3d.com/tutorials/glut-tutorial/frames-per-second/](http://www.lighthouse3d.com/tutorials/glut-tutorial/frames-per-second/)

您需要确定球的速度（以像素/秒为单位）。然后将该速度乘以上次更新和当前更新之间经过的秒数。根据博客，您可以通过 glutGet(GLUT_ELAPSED_TIME) 获得此信息。如果这不起作用，请谷歌了解如何在您的平台上找到当前时间（以毫秒为单位）。

希望这可以帮助。

# jsf-2 - 如何在使用漂亮的面孔时隐藏登录视图名称

> ID：14949443
> 
> 赞同：0
> 
> 时间：2013-02-19T03:39:51.067
> 
> 标签：jsf-2, prettyfaces, pretty-urls

我有一个在 tomcat 服务器上运行的应用程序。我删除了 server.xml 中的路径，因此我能够像访问应用程序一样

```
http://localhost:8080/login.xhtml 
```

我也在使用漂亮的面孔进行 URL 重写。现在我想知道如何向服务器发送请求

```
http://localhost:8080 
```

这样它就应该显示我的登录页面。我的 pretty-config.xml 是

```
<url-mapping id="login">
    <pattern value="/" />
    <view-id value="/login.xhtml" />
</url-mapping> 
```

它不起作用。请让我知道解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:01:00.597

您的 pretty-config 部分（有效）告诉`/`应该将路径映射到`/login.xhtml`并且可以`pretty:login`在 JSF 组件的结果中引用（以及在操作方法中）。

从这里有两种可能的不一致选项：

1.  Prettyfaces 必须指向一个有效的 URL，这意味着 web.xml 中的 FacesServlet 映射应该是`*.xhtml`你的情况， not `faces/*`， not`*.jsf`等。
2.  Prettyfaces 应该在您的 JSF 组件中适当使用。例如，`<h:link outcome="pretty:login" value="Home" />`将呈现一个带有值的 HTML`a`元素（当您单击它时`/`将在内部显示）。`login.xhtml`

[此外，阅读出色的PrettyFaces 文档](http://ocpsoft.org/docs/prettyfaces/3.3.3/en-US/html_single/#outbound_rewriting)也会有所帮助。

# python - Pandas 中的列操作

> ID：14949455
> 
> 赞同：5
> 
> 时间：2013-02-19T03:41:55.987
> 
> 标签：python, pandas

假设我有一个数据框：

```
import numpy as np
import pandas as pd

df = pd.DataFrame(np.random.rand(4,5), columns = list('abcde')) 
```

我想`df.a`从所有其他列中减去列中的条目。换句话说，我想获得一个数据框，其中包含以下列的列：

| `col_b - col_a`| `col_c - col_a`| `col_d - col_a`|

我已经尝试过`df - df.a`，但这会产生一些奇怪的东西：

```
 0   1   2   3   a   b   c   d   e
0 NaN NaN NaN NaN NaN NaN NaN NaN NaN
1 NaN NaN NaN NaN NaN NaN NaN NaN NaN
2 NaN NaN NaN NaN NaN NaN NaN NaN NaN
3 NaN NaN NaN NaN NaN NaN NaN NaN NaN 
```

如何在 Pandas 中进行这种类型的列操作？另外，只是想知道，有什么作用`df -df.a`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T03:55:18.523

你可能想要

```
>>> df.sub(df.a, axis=0)
   a         b         c         d         e
0  0  0.112285  0.267105  0.365407 -0.159907
1  0  0.380421  0.119536  0.356203  0.096637
2  0 -0.100310 -0.180927  0.112677  0.260202
3  0  0.653642  0.566408  0.086720  0.256536 
```

`df-df.a`基本上是尝试沿另一个轴进行减法，因此索引不匹配，并且当使用诸如减法之类的二元运算符时，“不匹配的索引将合并在一起”（如文档所述）。由于索引不匹配，您最终会得到 `0 1 2 3 a b c d e`.

For example, you could get to the same destination more indirectly by transposing things, `(df.T - df.a).T`, which by flipping `df` means that the default axis is now the right one.

# c - 在C中分配给复数的实部或虚部

> ID：14949458
> 
> 赞同：0
> 
> 时间：2013-02-19T03:42:14.057
> 
> 标签：c, complex-numbers

我需要处理复杂的工作以使用牛顿法提取多项式的虚根。

我遇到了一个错误，所以我将代码分解为简单的问题，看看有什么问题。当我尝试编译它时，它返回一个错误：

> 警告：赋值目标不是真正的左值；这将是未来的一个硬错误

另外我想知道是否无论如何我可以显示整个复数而无需使用`creal`and `cimag`。

```
#include<stdio.h>
#include<complex.h>

int main()
{
  double complex z1 = 2 + 3*I;
  creal(z1) = 5;
  cimag(z1) = 10;
  printf("%.2f +%.2f *i \n", creal(z1), cimag(z1));
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T03:46:05.537

问题是这些行：

```
creal(z1) = 5;
cimag(z1) = 10; 
```

creal 和 cimag 返回双打。您不能分配给函数返回值。您可以将函数的返回值分配给另一个变量，例如 `double real = creal(z1)`.

# c - 处理需要访问 <1024 的特权端口的应用程序的标准方法是什么？

> ID：14949459
> 
> 赞同：4
> 
> 时间：2013-02-19T03:42:18.263
> 
> 标签：c, linux, sockets

我最近发现需要将应用程序提升到更高的权限级别才能使`bind()`端口<1024。

我一直在运行它`sudo`，这对于内部测试来说很好，但是以 root 身份运行它通常是一个非常糟糕的主意。

我听说过 setuid root，但是当我查看源代码时`lighthttpd`，例如它显示：

```
#ifdef HAVE_GETUID
    if (!i_am_root && issetugid()) {
        /* we are setuid-root */

        log_error_write(srv, __FILE__, __LINE__, "s",
                "Are you nuts ? Don't apply a SUID bit to this binary");

        server_free(srv);
        return -1;
    }
#endif 
```

那么，允许绑定到特权端口的普遍接受的方法是什么？我只需要更高的绑定权限。之后，它可以作为普通用户运行。

这些是我听说过的，但似乎不是大多数软件使用的，这就是我问这个问题的原因。

*   setuid - 根
*   设置上限

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T04:08:43.263

您可以将 分配`CAP_NET_BIND_SERVICE` `capability`给二进制文件，或运行 as`root`以获取端口并立即删除权限。

# c - 如何动态加载我自己的库，并在其中调用方法？

> ID：14949460
> 
> 赞同：7
> 
> 时间：2013-02-19T03:42:19.093
> 
> 标签：c, linux, function, shared-libraries

我想编写一些 C 代码（如果它仅适用于 Linux，则可以）来动态加载一个新的共享库，然后从中调用一个方法（在运行时确定）。这似乎已经成为可能，因为 java 可以动态加载本地库，然后从中调用方法。

例如，我想做类似的事情：

```
int main() {
    libinfo_t * lib_details = load_shared_library("libfoo.so");
    run_method(lib_details, "bar", 7);
} 
```

这将使用参数 7 调用方法“bar”（bar 是编译到 libfoo.so 中的方法）。

用例详情：

我想编译一个二进制文件，将所有共享库加载到一个目录中，并在原始程序的内存上下文中从每个共享库中运行一些方法。我希望能够通过在目录中添加/删除共享库来快速启用或禁用它。

概念证明：

根据 java 设法与 jni 代码动态链接的方式，这似乎应该是可能的。您可以使用 System.load()，并加载您选择的库。再加上从内存编译，它似乎允许您从任意库运行任意函数。[http://www.java2s.com/Code/Java/JDK-6/CompilingfromMemory.htm](http://www.java2s.com/Code/Java/JDK-6/CompilingfromMemory.htm)

我尝试过的事情：

1.  我查看了“uselib”的联机帮助页，这似乎很有用，但是我不确定一旦加载了该库该怎么做。

2.  谷歌搜索返回[http://dyncall.org/](http://dyncall.org/)，但这并不是我所需要的——这个项目仍然需要一个函数指针来进行函数调用。

即使没有具体的答案，我也将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T03:49:11.127

Linux为此提供了非常完整的API。它是[`dlopen(3)`](http://linux.die.net/man/3/dlopen)API。

首先，您`dlopen`使用文件名调用以获取共享库句柄：

```
void* lib = dlopen("./lib.so"); 
```

比，要获取此库中函数的函数指针：

```
int (*func)() = dlsym(lib, "thing"); 
```

随意使用这个指针。

最后，完成后：

```
dlclose(lib) 
```

注意：记得做错误检查！

# macos - 在 osx 中使用 node 命令时必须使用 sudo

> ID：14949461
> 
> 赞同：0
> 
> 时间：2013-02-19T03:42:20.850
> 
> 标签：macos, node.js

我刚刚在osx中​​安装了node.js，发现在执行任何node命令之前必须使用sudo，这造成了很大的不便。我认为问题是我当前的系统帐户没有执行节点命令的权限，我想可以通过授权来解决。然而，我不知道该怎么做。有人知道怎么授权吗？提前致谢！

# arrays - args 和 args[..] 是一样的吗？

> ID：14949464
> 
> 赞同：0
> 
> 时间：2013-02-19T03:42:50.430
> 
> 标签：arrays, coffeescript

我正在阅读[optparse.coffee](http://coffeescript.org/documentation/docs/optparse.html)，并与以下行混淆：

`args = args[..]`

那条线有什么作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T04:44:41.007

来自[精美手册](http://coffeescript.org/#slices)：

> **数组切片和范围拼接**
> 
> 范围也可用于提取数组切片。有两个点 (3..6)，范围包括 ( `3, 4, 5, 6`)；带有三个点 ( `3...6`)，范围不包括结尾 ( `3, 4, 5`)。切片索引具有有用的默认值。省略的第一个索引默认为零，省略的第二个索引默认为数组的大小。

所以说`array[..]`是以下的简写：

```
len = array.length
array[0 .. len] 
```

这只是对`array`. 这意味着`args = args[..]`只需制作一个本地浅表副本，`args`以便`args`可以在不更改传入的原始数组的情况下对其进行操作和更改，并且您可以存储对数组的引用，而函数的调用者不会通过原始`args`引用意外更改您的数组被传递给函数。

考虑这个简化的例子：

```
f = (args) -> args = args[..] 
```

这变成了这个JavaScript：

```
var f;

f = function(args) {
  return args = args.slice(0);
}; 
```

并且[`Array#slice`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)：

> 返回数组的一部分的浅拷贝。
> [...]
> 如果`end`省略，切片提取到序列的末尾。

所以说`array.slice(n)`返回一个`array`从索引`n`开始到末尾的浅拷贝，`array`并且由于数组从零开始索引，`array.slice(0)`所以对整个数组进行了浅拷贝。

# ios - “应用程序未通过协同设计验证。” -- 在我更改 Xcode 中的一些构建设置之前一直在工作

> ID：14949468
> 
> 赞同：2
> 
> 时间：2013-02-19T03:43:34.693
> 
> 标签：ios, xcode, app-store-connect, code-signing

我的应用程序一直编译良好，但试图修复一些我摆弄了一些构建设置的东西，现在我收到“应用程序失败的代码验证”错误。所以看起来这不是证书问题，但我不知道正确的设置是什么或如何解决这个问题。

以下是一些屏幕截图：

![在此处输入图像描述](../Images/b57c241046a2de96c5d32c65c3fb9cec.png) ![在此处输入图像描述](../Images/a111a82846aaa2006744b988c78945af.png) ![在此处输入图像描述](../Images/7276e6a93934f155e3c374d96d21108f.png)

有什么想法可以让我再次得到所有的 copacci 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:05:52.827

我也遇到过很多次（以及许多其他类似的错误），但我似乎永远不记得究竟是什么修复了什么。

首先，您应该转到**Product->Scheme->Edit Scheme**并检查**“Run appName.app”-选项卡**中的**Build Configuration**是否设置为**Debug**，而不是 release 。

 ****如果这不是问题，您应该尝试**Product->Clean**然后重新构建。您确定在项目和目标的**构建设置**中**设置了正确的配置文件？**

旁注：重新启动 XCode 也被证明是有帮助的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:06:03.270

原来我对“验证内置产品”的设置有误。在这里，如果有人遇到同样的问题，那么是那些摆脱了错误的人。

![在此处输入图像描述](../Images/62c9f76f2b602feee786441273db6856.png)

**编辑：** 当然现在它又回来了。

**编辑：** 看起来像重新启动，根据下面的答案，做了诀窍......至少现在。手指交叉……****

# sql - 基于 SQL Server 中具有相同值的 2 列的值的总和或计数

> ID：14949470
> 
> 赞同：2
> 
> 时间：2013-02-19T03:43:43.870
> 
> 标签：sql, sql-server, tsql

我有一个 DB 表，其中的列以其他几列命名

```
ColorA
ColorB
Status 
```

该数据库中的数据如下所示。

```
ColorA     ColorB    Status
---------     ---------    ---------
GREEN           NULL       YES
GREEN           NULL       YES
RED             GREEN      NO
RED             GREEN      YES 
```

我想要的结果是这样的，具体取决于 Status='YES'

```
Color  Count
GREEN   3
RED     1 
```

我还定义了包含所有颜色的表格。

如何为此构造 SQL 查询，这将导致前面提到的输出？我有一个查询，但我正在使用 LEFT Join，然后执行一个未给出正确结果的 UNION。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T03:51:18.133

这应该有效：

```
SELECT a.color, 
       Count(a.color) AS Count 
FROM   (SELECT colora AS color 
        FROM   table1 
        WHERE  status = 'YES' 
               AND colora IS NOT NULL 
        UNION ALL 
        SELECT colorb 
        FROM   table1 
        WHERE  status = 'YES' 
               AND colorb IS NOT NULL) a 
GROUP  BY a.color 
```

**结果**

```
| 颜色 | 计数 |
-----------------
| 绿色 | 3 |
| 红色 | 1 |
```

[查看演示](http://sqlfiddle.com/#!2/58068/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T03:51:50.180

从您给出的示例中，您想知道每个 ColorA 或 ColorB 记录的计数

```
SELECT Color, SUM(Total) AS Count
FROM (
    SELECT ColorA as Color, SUM(CASE WHEN Status = 'Yes' THEN 1 ELSE 0 END) AS Total
    Group By ColorA
UNION
    SELECT ColorB as Color, SUM(CASE WHEN Status = 'Yes' THEN 1 ELSE 0 END) AS Total
    Group By ColorB
) U
GROUP BY Color 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T04:03:47.033

这适用于 SQL Server、MySQL 和 PostgreSQL（[SQLFiddle 演示](http://sqlfiddle.com/#!3/487b0/1)）：

```
SELECT color, sum(cnt) AS count FROM (
    SELECT colorA AS color, count(*) AS cnt
    FROM mytable
    WHERE status = 'YES'
    GROUP BY colorA
UNION ALL
    SELECT colorB AS color, count(*) AS cnt
    FROM mytable
    WHERE status = 'YES'
    GROUP BY colorB
) AS x
WHERE color IS NOT NULL  
GROUP BY color 
```

# php - 获取字符串的偶数索引

> ID：14949473
> 
> 赞同：0
> 
> 时间：2013-02-19T03:44:05.967
> 
> 标签：php

嘿伙计们，我试图从数据库中获取字符串的偶数索引，然后将它们保存在一个变量中，然后回显。但我的代码似乎不起作用。请帮忙。这里是

```
require_once('DBconnect.php');
$school_id = '1';
$section_id = '39';
$select_pk = "SELECT * FROM section 
    WHERE school_id = '$school_id' 
    AND section_id = '$section_id'";
$query = mysql_query($select_pk) or die (mysql_error());
while ($row = mysql_fetch_assoc($query)) {
    $public_key = $row['public_key'];
}

if ($public_key) {
    $leng_public_key = strlen($public_key);
    $priv_key_extract = "";
    $array_pki = array();
    for ($i=0; $i <=$leng_public_key-1 ; $i++) { 
        array_push($array_pki,$public_key[$i]);
    }

    foreach ($array_pki as $key  => $value) {
        if($key % 2 == 0) {
            $priv_key_extract += $public_key[$key];
        } else {
            $priv_key_extract ="haiiizzz";
        }
    }
}
echo $priv_key_extract; 
```

正如你所看到的，我试图使用模 2 来查看索引是否是偶数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:31:22.450

我已将您的代码更新如下，现在可以使用：

```
<?php
$public_key = 'A0L8V1I5N9';
if ($public_key) {
    $leng_public_key = strlen($public_key);
    $priv_key_extract = "";
    $array_pki = array();
    for ($i=0; $i <=$leng_public_key-1 ; $i++) {
        array_push($array_pki,$public_key[$i]);
    }
    foreach ($array_pki as $key  => $value) {
        //Changed condition below $key % 2 ==0 => replaced with $key % 2 == 1
        if($key % 2 == 1) {
            // Changed concatenation operator , += replaced with .=
            $priv_key_extract .= $public_key[$key];
        } /*else {
            //Commented this as it is getting overwritten
            $priv_key_extract ="haiiizzz";
        }*/
    }
}
echo $priv_key_extract;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:42:45.130

试试这个功能

```
function extractKey($key) {
    if (empty($key) || !is_string($key)) return '';

    $pkey = '';
    for ($i=0;$i<strlen($key);$i++) {
        if ($i % 2 == 0) {
            $pkey .= $key[$i];
        }
    }
    return $pkey;
}
echo extractKey('12345678'); # => 1357 
```

# android - GCM 服务器在哪个时间频率刷新注册 ID 以及如何在我的手机中获取 regId 更改事件？

> ID：14949477
> 
> 赞同：3
> 
> 时间：2013-02-19T03:45:09.527
> 
> 标签：android, google-cloud-messaging

GCM 服务器刷新注册 ID 的时间频率。如果更改了如何在我的手机中获取 regId 更改事件？

我的应用程序在第一次启动时在 GCM 上注册，并将 regId Id 存储在 Sahred Preference 文件中。然后，当用户手动完成某些事件时，它将从共享 Pref 获取 regId 并发送到我们的服务器。

我的问题是，如何在 GCM 服务器中找到刷新的 reg Id。然后只有我可以创建一个事件以在服务器上更新以更新 reg Id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:34:30.310

当 GCM 服务器上的 regid 更改时，**您的服务器负责更新其数据库中的 regid。**

这是唯一可能的，因为旧 regid 仍然有效（至少一次），并通过**canonical_id**告诉您的服务器响应旧 regid 发送的消息，其中将包含您将来应该使用的新 regid。查看[开发文档](http://developer.android.com/google/gcm/gcm.html)和[高级主题](http://developer.android.com/google/gcm/adv.html)以获得完整的解释

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:22:10.233

请参阅[http://developer.android.com/google/gcm/gs.html](http://developer.android.com/google/gcm/gs.html)。

您需要按照此页面上的说明将 BroadcastReceiver 添加到您的应用程序中。然后创建一个扩展 GCMBaseIntentService 的 GCMIntentService 类。让该服务将注册 ID 上传到您的应用服务器（或将其存储在共享首选项中以备后用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-29T12:34:30.607

根据[http://developer.android.com/google/gcm/client.html#sample-register](http://developer.android.com/google/gcm/client.html#sample-register)，与之前版本的 GCM 和 C2DM 不同，Google 本身不会刷新注册。一旦您从初始注册中获得注册 ID，您就可以开始了，除了一种情况：当用户升级到新版本时，您仍然需要重新注册（这种情况也在上面链接中的示例中处理）。

当应用程序更新时，它应该使其现有的注册 ID 无效，因为不能保证它可以与新版本一起使用。因为更新应用程序时没有调用生命周期方法，所以实现此验证的最佳方法是在存储注册 ID 时存储当前应用程序版本。

# javascript - 发出逐步的 ajax 请求

> ID：14949478
> 
> 赞同：1
> 
> 时间：2013-02-19T03:45:12.853
> 
> 标签：javascript, ajax, node.js, mongodb, jquery

我正在考虑如何动态更改 div 的内容。所以，这里是ajax请求：

```
$.ajax({
    url:'/foos',
    cache: false,
    type: 'get',

}).done( function( foo_array ) {
    for( foo in foo_array ) {
        $('#foo-container').append('<div class="foo-var">'+foo+'</div>');
    }
}); 
```

所以基本上，这个 ajax 从服务器追加所有 foo-var div，但是如果 foo_array 太长或很大的数组有一个问题，因为我认为这需要越来越多的时间取决于 foo_array 的长度

如何一一追加？？，如何一一查询并追加到 foo-container 中，而不是查询所有 foo 并进行迭代？

我想做这样的事情

```
if(foos.hasNext()){ $.ajax..... append(foo)....} 
```

foos 是由 mongodb 数据库中的许多文档组成的数组，因此我无法获取数组的长度，因为取决于查询的 find() 参数。

我正在为 ajax 使用 nodejs、mongodb、expressjs 和 jquery

对不起我的英语不好，谢谢大家！

编辑 2

这是 mongodb 中的数据示例

```
{category:1, name:'robert',personal:true,option:'class'}
{category:1, name:'alfredo',personal:false,option:'class'}
{category:4, name:'ricardo',personal:true,option:'class'}
{category:1, name:'genaro',personal:true,option:'class'}
{category:2, name:'andres',personal:false,option:'class'}
{category:1, name:'jose',personal:true,option:'class'}

db.collection.find({personal:true}) // gives me 4 documents
db.collection.find({option:'class'}) // gives me 6 documents
db.collection.find({category:4}) // gives me 1 document 
```

不知道游标能得到多少个文档，需要一一收费，因为databse中有5097841个文档，所以ajax返回所有信息需要很长时间，如果hasNext( ) 在 mongodb 的游标中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:34:46.593

您可以使用跳过和限制，并且可以发出多个请求。这就像分页。以下语法可能会对您有所帮助

db.collection.find().skip(200).limit(100);

# objective-c - CS193P 分配 2 清除功能

> ID：14949479
> 
> 赞同：0
> 
> 时间：2013-02-19T03:45:23.010
> 
> 标签：objective-c

鉴于此实现：

```
- (NSMutableArray *)programStack
{
    if (_programStack == nil)
        _programStack = [[NSMutableArray alloc]init];
    return _programStack;
}

- (id)program
{
    return [self.programStack copy];
}

+ (double)popOperandOffStack:(NSMutableArray *)stack
{
    double result = 0;

    id topOfStack = [stack lastObject];
    if (topOfStack)
        [stack removeLastObject];

    if ([topOfStack isKindOfClass:[NSNumber class]]) {
        result = [topOfStack doubleValue];
    }
    else if ([topOfStack isKindOfClass:[NSString class]]) 
    {
        NSString *operation = topOfStack;
        // C
        if ([operation isEqualToString:@"C"])
        {
            [stack removeAllObjects];
            return 0; 
        }
    }
} 
```

假设类方法对 [stack removeAllObjects] 的调用仅影响副本的副本而不是从实例的 _programStack 中删除所有对象，我是否正确？您将如何通过该类方法影响实例的变量？还是有更好的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:53:04.217

`[stack removeAllObjects];`将从中删除所有对象`stack`。如果您`+ (double)popOperandOffStack:(NSMutableArray *)stack`从对象调用，将实例变量作为 传递`stack`，则`popOperandOffStack:`对该实例变量进行操作并删除所有对象：

```
[[self class] popOperandOffStack:self.myInstanceArray] 
```

另一方面，如果您调用`[[self class] popOperandOffStack:[self.myInstanceArray mutableCopy]]`它将对副本进行操作。

# android - Android 单元测试用例自动化：Robolectric 库 vs Android 测试框架

> ID：14949480
> 
> 赞同：47
> 
> 时间：2013-02-19T03:45:29.267
> 
> 标签：android, unit-testing, junit, continuous-integration, robolectric

想知道哪个是为 android 应用程序和库编写单元测试用例的更好选择：使用 Robolectric 库或坚持使用 Android 测试框架。我想在命令行运行测试套件，并希望它独立于配置模拟器或让设备连接到构建机器的需要。你们中有人对这两者或更好的东西进行比较分析吗？您的经验将极大地帮助我决定更好的解决方案。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-02-22T09:27:57.677

我使用分层系统，在可能的情况下我更喜欢较早的层：

1.  纯单元测试。我尝试让尽可能多的代码完全独立于 Android API，然后使用可以在任何 JVM 上运行的“纯”单元测试。这些测试是最快的，它有助于保持不需要特定于 Android 的可移植代码。
2.  Robolectric 支持的单元测试。我的代码对 Android API 的依赖性很小，可以通过 Robolectric 阴影来满足，我使用 Robolectric 对其进行测试。与纯测试相比，Robolectric 的设置时间要多一些，但它仍然比在模拟器上启动/运行要快。
3.  Android 框架测试。Robolectric 没有削减它的地方 - 要么是因为阴影不存在，要么是因为我大量使用 Android API（因此想针对真实事物进行测试） - 我编写了在模拟器/设备上运行的测试默认框架。

层级的重点是使事情尽可能简单，这使整个套件更快，并有助于促进更清洁的代码。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-02-19T09:37:24.167

我在两者上都工作过，我发现的是：-

1) Robolectric 不支持 API 19，在其文档中提到 - [http://robolectric.org/eclipse-quick-start/](http://robolectric.org/eclipse-quick-start/)。这是它的一个很大的缺点。

2) Robolectric 在 JVM 上而不是在 DVM 上运行。所以我们无法检测到在特定时间 GPS 是否在设备中启用等。我们只能传递我们预先确定的值。

3) Robolectric 中的代码编写比 junit 复杂，特别是对于片段有很多复杂性和问题。

4) Robolectric 需要外部 jar 和配置，对于 junit 测试，我们不需要任何外部库。

5) Robolectric 更快，因为它在 JVM 上运行，但这也有缺点，我们无法在我们的设备上看到 UI，以及正在执行的屏幕代码。

对于 Android，我喜欢 jUnit 测试。

# c# - CEF 上的 WebRTC (getUserMedia) 无法正常工作。但它适用于 Chrome。有任何想法吗？

> ID：14949483
> 
> 赞同：5
> 
> 时间：2013-02-19T03:45:31.027
> 
> 标签：c#, c++, chromium, webrtc, getusermedia

我有一个可以在 Chrome 上运行的基本网络视频聊天页面。有点像 apprtc.appspot.com 但我想将此功能嵌入到我的应用程序的 c++/c# 中。

所以我尝试了 Chromium Embedded Framework（简而言之，CEF，使用 cefclient.exe）和 WebRTC（getUserMedia），但网络摄像头连接根本不起作用。我收到错误消息“无法访问本地媒体。错误代码为 1。”

但在 CEF wiki 中，声称将 WebRTC 添加到 CEF。我正在试用的 CEF 版本是 3.1364.1094 for Windows。

有任何想法吗？WebRTC 真的可以与 CEF 一起使用吗？也许我错过了一些让 WebRTC 在 CEF 上工作的步骤。

另一个观察结果是 CEF 在运行 WebRTC 网络摄像头演示时不显示权限栏。我希望这可能是线索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-13T21:22:14.010

您可以向 CEF 传递命令行参数列表。我想你想要的可能是：

`--enable-media-stream`

虽然你也可以试试

`--enable-usermedia-screen-capturing`

# scrapy - 使用scrapy顺序爬取网站

> ID：14949488
> 
> 赞同：0
> 
> 时间：2013-02-19T03:46:02.363
> 
> 标签：scrapy

有没有办法告诉scrapy根据二级页面中的条件停止爬行？我正在执行以下操作：

1.  我有一个 start_url 开头（第一级页面）
2.  我使用 parse(self, response) 从 start_url 中提取了一组 url
3.  然后我使用带有回调的请求将链接添加为 parseDetailPage(self, response)
4.  在 parseDetail （第二级页面）下，我知道我是否可以停止爬行

现在我正在使用 CloseSpider() 来完成此操作，但问题是当我开始抓取二级页面时，要解析的 url 已经排队，我不知道如何将它们从队列中删除。有没有办法顺序爬取链接列表，然后能够在 parseDetailPage 中停止？

```
global job_in_range    
start_urls = []
start_urls.append("http://sfbay.craigslist.org/sof/")
def __init__(self):
    self.job_in_range = True
def parse(self, response):
    hxs = HtmlXPathSelector(response)
    results = hxs.select('//blockquote[@id="toc_rows"]')
    items = []
    if results:
        links = results.select('.//p[@class="row"]/a/@href')
        for link in links:
            if link is self.end_url:
                break;
            nextUrl = link.extract()
            isValid = WPUtil.validateUrl(nextUrl);
            if isValid:
                item = WoodPeckerItem()
                item['url'] = nextUrl
                item = Request(nextUrl, meta={'item':item},callback=self.parseDetailPage)
                items.append(item)
    else:
        self.error.log('Could not parse the document')
    return items

def parseDetailPage(self, response):
    if self.job_in_range is False:
        raise CloseSpider('End date reached - No more crawling for ' + self.name)
    hxs = HtmlXPathSelector(response)
    print response
    body = hxs.select('//article[@id="pagecontainer"]/section[@class="body"]')
    item = response.meta['item']
    item['postDate'] = body.select('.//section[@class="userbody"]/div[@class="postinginfos"]/p')[1].select('.//date/text()')[0].extract()
    if item['jobTitle'] is 'Admin':
        self.job_in_range = False
        raise CloseSpider('Stop crawling')
    item['jobTitle'] = body.select('.//h2[@class="postingtitle"]/text()')[0].extract()
    item['description'] = body.select(str('.//section[@class="userbody"]/section[@id="postingbody"]')).extract()
    return item 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T06:55:26.043

你的意思是你想停止蜘蛛并在不解析已经解析的url的情况下恢复它？如果是这样，您可以尝试设置[JOB_DIR 设置](https://scrapy.readthedocs.org/en/0.16/topics/jobs.html)。此设置可以将 request.queue 保存在磁盘上的指定文件中。

# python - 尝试使用 Django 发送电子邮件时出现“[Errno 101] 网络无法访问”

> ID：14949492
> 
> 赞同：14
> 
> 时间：2013-02-19T03:46:20.567
> 
> 标签：python, django, email, gmail

出于某种原因，我在尝试使用 Django 发送电子邮件（使用 gmail）时收到此错误。

```
[Errno 101] Network is unreachable 
```

奇怪的是，它似乎只发生在我的网络应用程序在我的服务器（bluehost）上运行时。在本地时它工作正常。

这是我的电子邮件设置

```
EMAIL_USE_TLS = True
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_HOST_USER = 'email@gmail.com'
EMAIL_HOST_PASSWORD = 'FakePassword'
EMAIL_PORT = 587 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T03:55:18.050

这可能与您尝试从蓝色主机上发送电子邮件的端口有关。

出于安全原因，他们可能会阻止这样的端口。

更多信息：[https ://my.bluehost.com/cgi/help/500](https://my.bluehost.com/cgi/help/500)

# http - 什么响应代码适合这种情况？

> ID：14949495
> 
> 赞同：9
> 
> 时间：2013-02-19T03:46:59.887
> 
> 标签：http, http-response-codes

我正在开发一个网页游戏。作为游戏的一部分，您从一组有限的功能开始，然后在玩游戏时解锁更多功能。

例如，您`/fields`在教程中的第 3 步中解锁。但是，如果您只是`/fields`在地址栏中导航到怎么办？

我正在尝试找出响应的最佳状态代码。

403 似乎很理想，因为用户在解锁之前被禁止访问该页面。
404 也很有意义，因为在解锁之前页面在技术上“不存在”，并且还会阻止用户区分不存在的页面和他们尚未解锁的页面之间的区别。

但是在这两种情况下，我都有一些用户报告了浏览器缓存 403/404 结果的问题，并且即使在解锁后也不让他们访问页面，除非他们完全清除缓存。

我想知道我是否应该继续使用 403 或 404，或者我应该使用未使用的 4XX 代码（例如 442 和自定义 statusText），或者甚至开玩笑地发送`HTTP/1.1 418 I'm A Teapot`以响应用户在他们不应该在的地方闲逛。

我需要一个好的、可靠的理由说明为什么应该使用一个选项而不是其他选项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T21:23:26.987

**tl; dr** `409 Conflict`是一个想法，但也许你在缓存方面有问题。在这种情况下，强制重新加载的缓存破坏器将起作用。

**长解释**

也许`409 Conflict`状态码会有意义：

> 10.4.10 409 冲突
> 
> 由于与资源的当前状态冲突，无法完成请求。仅在预期用户可能能够解决冲突并重新提交请求的情况下才允许使用此代码。响应正文应该包含足够的信息让用户识别冲突的来源。理想情况下，响应实体将包含足够的信息供用户或用户代理解决问题；但是，这可能是不可能的，也不是必需的。
> 
> 响应 PUT 请求时最有可能发生冲突。例如，如果正在使用版本控制并且被 PUT 的实体包括对资源的更改，这些更改与早期（第三方）请求所做的更改相冲突，则服务器可能会使用 409 响应来指示它无法完成请求. 在这种情况下，响应实体可能会以响应 Content-Type 定义的格式包含两个版本之间差异的列表。

这是有道理的，因为资源只有在用户完成教程后才可用。在此之前，资源处于“无效”状态。用户可以通过完成教程来解决这个冲突。

后来我对这个案子进行了更多调查，我发现魔鬼在细节中。`403 Forbidden`让我们阅读和的规范`404 Not Found`。

> 10.4.4 403 禁止
> 
> 服务器理解请求，但拒绝执行。授权将无济于事，并且不应重复请求。如果请求方法不是 HEAD 并且服务器希望公开请求未完成的原因，它应该在实体中描述拒绝的原因。当服务器不希望确切地揭示请求被拒绝的原因或没有其他响应适用时，通常使用此状态代码。

重要的是**“请求不应重复”**的规范。从不重新请求 403 页面的浏览器可能会做正确的事情。但是，让我们继续 404：

> 10.4.5 404 未找到
> 
> 服务器未找到任何与请求 URI 匹配的内容。没有说明这种情况是暂时的还是永久性的。
> 
> [省略]

现在我们有问题了！如果规范允许它们是临时的，为什么你的 404 页面会被缓存？

也许在您的设置中，您的 403 和 404 页面的缓存配置不正确。如果是这样，请[在 StackOverflow 上查阅此答案](https://stackoverflow.com/a/6633340/220060)。它给出了关于缓存 4xx 页面的详细答案。

如果您不想弄乱缓存标头，请使用所谓的缓存破坏器并像这样传递系统时间（假设 PHP 作为您的 Web 语言）：

`<a href="/fields?<?php echo time(); ?>">`

这会产生类似的 URL `/fields?1361948122`，每秒都在增加。这是 Markus A 提出的解决方案的变体。

我假设`1361948122`您的资源忽略了查询字符串。如果不是，请在查询字符串参数中传递 cache-buster，例如`t=1361948122`并确保`t`您的资源不评估该参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T03:28:26.940

就 HTTP 错误代码的预期目的而言，我肯定会选择`403 Forbidden`，因为该页面确实存在（404 已退出），但用户暂时被*禁止*访问它（并且此限制不是由于资源冲突造成的） ，就像并发修改一样，但是由于用户的帐户状态，我认为 409 也是如此）。基于其预期目的的另一个明智的选择可能是 401，但正如 nalply 在他的评论中已经指出的那样，此代码会触发一些（如果不是全部）浏览器显示登录对话框，因为这意味着使用标准的 web 身份验证机制可以解决问题。所以，这里绝对不是你的选择。

在 403 的描述中，有两件事似乎有点“不合适”，所以让我来解决它们：

1.  **授权无济于事……：**这里只讲HTTP协议内部的授权机制，是为了区分403和401。此声明不适用于任何形式的自定义授权或会话状态管理。
2.  **...不应该重复**请求...：必须始终在会话上下文中看到请求，因此如果用户的会话上下文更改（他解锁了一项功能）然后他重试访问相同的资源，即一个不同的请求，即没有违反这个建议。

当然，您也可以定义自己的错误代码，但由于它可能不会以任何官方方式保留，因此无法保证某些浏览器制造商不会有意或无意地使用该代码来触发特定的（调试）动作。这不太可能，但不是不允许的。

不过，418 也可以。:)

当然，如果您想特别掩盖功能的潜在可用性，您也可以决定使用 404，因为这是不给爱管闲事的用户任何提示的唯一方法。

**现在，对于您的缓存问题：**

这些状态代码（403、404、409、418）中的任何一个都不应*触发*浏览器违反您的意愿缓存页面。问题是许多浏览器只是简单地尝试缓存所有内容以变得更加活泼。在我看来，Opera 是这里最差的。我一直在为这些事情拉头发很多次。应该可以使用正确的标头设置来解决所有问题，但是我遇到过浏览器或服务器或某些中间代理决定忽略它们并无论如何都会破坏我的页面的情况。

到目前为止，我发现的唯一绝对肯定地保证重新加载的可靠方法是添加一个虚拟请求参数，如 /fields?t=29873，其中 29873 是一个数字，对于您在任何可能相关的范围内发出的每个请求都是唯一的时间尺度。当然，在服务器上，您可以简单地忽略此参数。请注意，当您的用户第一次打开您的页面时，仅仅从 1 开始然后计算后续请求是不够的，因为浏览器可能会在页面重新加载时保留缓存。

我在 Java 中进行 Web 开发（服务器和客户端都使用 GWT），并使用此代码生成虚拟“数字”：

```
private static final char[] base64chars = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_.".toCharArray();
private static int tagIndex = 0;

/**
 * Generates a unique 6-character tag string that is guaranteed to not repeat
 * for about 400 days, if this function is, on average, not called more often
 * than twice every millisecond.
 * 
 * @return the tag string
 */
public static String nowTag() {
    int tag = (int) ((System.currentTimeMillis() >>> 5)); // adjust
    char[] result = new char[6];
    result[5] = base64chars[(tagIndex++) & 63];
    result[4] = base64chars[tag & 63];
    tag >>>= 6;
    result[3] = base64chars[tag & 63];
    tag >>>= 6;
    result[2] = base64chars[tag & 63];
    tag >>>= 6;
    result[1] = base64chars[tag & 63];
    tag >>>= 6;
    result[0] = base64chars[tag & 63];
    return new String(result); 
} 
```

它使用系统时钟与计数器相结合，每毫秒最多可以提供两个有保证的唯一值。您可能不需要此速度，因此您可以随意更改`>>> 5`我用“调整”标记的速度以满足您的需要。如果您将其增加 1，则您的费率会下降两倍，并且您的唯一性时间跨度会加倍。所以，例如，如果你把`>>> 8`相反，您可以每 4 毫秒生成大约 1 个值，并且这些值不应在 3200 天内重复。当然，如果用户弄乱了系统时钟，这种保证值不会重复的保证将消失。但由于这些值不是按顺序生成的，因此您仍然不太可能两次点击相同的数字。该代码生成一个 6 字符的文本字符串 (base64) 而不是十进制数字，以使 URL 尽可能短。

希望这可以帮助。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T07:30:23.867

我觉得没有必要抛出错误代码，尽管你只是显示一条消息

> **您必须达到 XX 级才能访问此页面**或有趣的东西，例如**长大后回来**

使用代码200-OK本身，所以不会有缓存问题，也达到了目的。

# c - 删除堆栈声明的数据结构中的堆元素

> ID：14949499
> 
> 赞同：0
> 
> 时间：2013-02-19T03:47:13.520
> 
> 标签：c, vector, malloc

我的代码框架如下：

```
vector<char**> myFunc(some param) {
     char**first = new char*[some size];
     char*second = new char[some other size];          
 }//sizes depend on param

while(...) {
     vector<char**> myVec;
     myVec = myFunc(param);
     /* some stuff happens
      *
      */

 }//end while 
```

可以清楚地推断，我需要在我的 while 循环结束之前删除第一个和第二个。我已经尝试过 delete[] myVec[i] （在一个循环中）但无济于事，以及其他的排列方式。有任何想法吗？

谢谢！（为了“简单”，我使用 new 而不是 malloc；据我所知，两者都是相同的（除了仅使用 new 等删除）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:49:23.567

## 解决方案：使用`std::vector<std::vector<std::string>>>`

# java - 如何在 Play Framework 中复制上传的文件？

> ID：14949500
> 
> 赞同：0
> 
> 时间：2013-02-19T03:47:17.067
> 
> 标签：java, linux, file-io, playframework, playframework-2.0

我正在尝试在 Play 2.0.4 中进行基本文件上传。文件上传本身有效，我设法得到一个`File`对象。但是，我想将此文件复制到`/public/images/`目录中。我怎样才能做到这一点？以下代码不会产生任何结果或错误：

```
 FilePart picture = body.getFile("file");
    File file = picture.getFile();
    try
    {
        File dest = new File("../../public/images/new.png");
        Logger.debug("Got dest: " + dest.getAbsolutePath() );
        file.renameTo(dest);
        return ok( file.getAbsolutePath() );
    }
    catch (Exception e)
    {
        e.printStackTrace();
        return ok(images.render(false, e.toString()));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:18:30.867

`File.renameTo()`如果失败则返回 false，但没有详细的错误信息，所以很糟糕。

试试`java.nio.file.Files.move(source, target, StandardCopyOption.ATOMIC_MOVE)`；如果失败，它会抛出异常，所以你会知道出了什么问题。

# java - 合并两个不同大小的堆

> ID：14949506
> 
> 赞同：1
> 
> 时间：2013-02-19T03:48:00.463
> 
> 标签：java, heap, binary-search-tree

这是一个有点家庭作业的问题，有点不是。在我的作业中，我必须演示如何合并两个相同大小的堆并估计它的时间复杂度。当我在寻找这个时，我读到了倾斜堆和斐波那契堆。

我的问题是，你能把两个不同大小的堆合并成一个堆吗？对于我在网上找到的所有示例，我无法从中得到直接的答案。

感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T06:26:14.360

取一个大小为 M+N 的数组：其中 M 是第一个数组的大小，N 是第二个数组的大小。现在**将**所有元素插入该数组并对其进行 hepify。时间复杂度将是 O((m+n)log(m+n)){因为每个 hepify 操作需要 log(m+n) 并且我们有 m+n 个元素} +**插入**操作的复杂度：Theta(m) +Theta(n) + O((m+n)log(m+n))

# matlab - 如何在matlab中将动画生成为mpg或加速gif

> ID：14949507
> 
> 赞同：0
> 
> 时间：2013-02-19T03:48:14.607
> 
> 标签：matlab, animation, movie

我正在图中绘制一个随机行走点，并尝试通过 getframe 捕获每一步的运动。收集完所有帧后，我使用movie2avi 将结果输出为avi，但输出文件太大，无法放入我的演示文稿中。我正在寻找一种将电影导出为 mp4 的方法，有人知道吗？我也尝试使用 3rd party movie2gif，它大大节省了大小，但是当我播放 gif 时，它看起来很不流畅

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T04:35:50.617

在以后的 Matlab 版本（例如 2012）中，它是通过创建和编写视频对象来完成的。例如，下面的代码生成一个随机移动的圆圈的电影。您可以使用属性调整电影的速度`FrameRate`和大小。`Quality`有关更多详细信息，请参阅[Matlab 文档。](http://www.mathworks.com/help/matlab/reading-and-writing-files.html)

```
vobj=VideoWriter('MyMovieFile', 'Motion JPEG AVI');
vobj.FrameRate=4;
vobj.Quality=75
open(vobj);
for i=1:100
  plot(rand,rand,'o')
  F=getframe(gcf);
  writeVideo(vobj, F);
  cla(gca)
end
close(vobj) 
```

# php - 如何在贝宝的 notify_url 页面中获取交易详情

> ID：14949508
> 
> 赞同：0
> 
> 时间：2013-02-19T03:48:15.617
> 
> 标签：php, paypal, payment-gateway

在 paypal notify_url 页面中，当我使用 cmd 值作为 _cart 时，我没有得到任何值。如何在 notify_url 页面中获取交易详细信息

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="POST" name="_xclick" id="paypal_form">
<input type="hidden" name="upload" value="1" />
<input type="hidden" name="cmd" value="_xclick" />
<!-- The business email address, where you want to receive the payment -->
<!--<input type="hidden" name="business" value="yesidealpayment@gmail.com" />-->
<input type="hidden" name="business" value="arun_1260247381_per@galtechsupport.us" />
<!-- The customer email address -->

<input type="hidden" name="item_name_1" value="<?php echo ucfirst($couponname); ?>" />

<input type="hidden" name="amount_1" value="<?php echo $total_payable_amount; ?>" />
<!--<input type="hidden" name="currency_code" value="AUD" />-->
<input type="hidden" name="currency_code" value="USD" />

<input type="hidden" name="amount" value="25.58" /> 
<!-- Where you want to return after PayPal Payment -->
<input type="hidden" name="return" value="http://yes-i-deal.com.au/test/paypal_ipn.php" />
<!-- A back-end notification send to the specific page after successful payment  -->
<!--<input type="hidden" name="notify_url" value="http://yes-i-deal.com.au/test/paypal.php" />-->
<input type="hidden" name="notify_url" value="http://yes-i-deal.com.au/test/paypal_ipn.php" />
<!-- Where you want to return after cancel the PayPal Payment  -->
<input type="hidden" name="cancel_return" value="http://yes-i-deal.com.au/" />
<input type="hidden" name="custom" value="<?php echo $coupon_id."_".$userid;?>" />  

            <input type="image" name="submit"   src="http://yes-i-deal.com.au/themes/green/images/Buy-Now-Button.png" />
</form> 
```

在我的 notify_url 页面中，我得到的值为

```
 session_start(); 
require("ipn_cls1.php");
 $paypal_info = $_POST; 
print_r($paypal_info); 
$paypal_ipn = new paypal_ipn($paypal_info); 
$payment_status = trim($paypal_info['payment_status']); // Si Completed : tout est OK echo 
$payment_amount = trim($paypal_info['mc_gross']); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:06:28.937

在我当前的项目中，我对 paypal 自适应付款有同样的问题。我给了我的

notify_url 为[http://mysite.com/payment-success](http://mysite.com/payment-success)。在这个页面中，我只是简单地编码

$请求 = $_POST;

邮件('myid@myaccount', $request);

然后我将交易结果发送到我的邮箱查看。

请注意，在我的邮件中，我可以看到交易结果，如果我插入数据库，它正在插入，但我无法在我的页面中看到交易结果。尝试将交易结果发送到您的邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T09:59:39.010

创建 paypal_ipn.php 文件并将 php 代码放入其中。

```
 // Response from Paypal
    // read the post from PayPal system and add 'cmd'
    $req = 'cmd=_notify-validate';
    foreach ($_POST as $key => $value) {
        $value = urlencode(stripslashes($value));
        $value = preg_replace('/(.*[^%^0^D])(%0A)(.*)/i','${1}%0D%0A${3}',$value);// IPN fix
        $req .= "&$key=$value";
    }

    // assign posted variables to local variables
    $data['item_name']          = $_POST['item_name'];
    $data['item_number']        = $_POST['item_number'];
    $data['payment_status']     = $_POST['payment_status'];
    $data['payment_amount']     = $_POST['mc_gross'];
    $data['payment_currency']   = $_POST['mc_currency'];
    $data['txn_id']             = $_POST['txn_id'];
    $data['receiver_email']     = $_POST['receiver_email'];
    $data['payer_email']        = $_POST['payer_email'];
    $data['custom']             = $_POST['custom'];
    $data['invoice']            = $_POST['invoice'];
    $data['paypallog']          = $req;

    // post back to PayPal system to validate
    $header = "POST /cgi-bin/webscr HTTP/1.0\r\n";
    $header .= "Content-Type: application/x-www-form-urlencoded\r\n";
    $header .= "Content-Length: " . strlen($req) . "\r\n\r\n";
    $fp = fsockopen ('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30); 

    if (!$fp) {
        // HTTP ERROR
    } else {    

        fputs ($fp, $header . $req);
        while (!feof($fp)) {
            ////mail('atiftariq80@gmail.com','Step 9','Step 9');        
            $res = fgets ($fp, 1024);
            if (true || strcmp($res, "VERIFIED") == 0) {
                ////mail('atiftariq80@gmail.com','PAYMENT VALID','PAYMENT VALID');  

            // Validate payment (Check unique txnid & correct price)
            $valid_txnid = check_txnid($data['txn_id']);
            $valid_price = check_price($data['payment_amount'], $data['item_number']);
            // PAYMENT VALIDATED & VERIFIED!
            if($valid_txnid && $valid_price){               
            //----------------- INSERT RECORDS TO DATABASE-------------------------------------
            if ($data['invoice']=='basic') {
                $price = 39;
            } else { 
                $price = 159;
            }
            $this->user_model->update_user(
                array(
                    'id' => $data['custom'],
                    'user_status' => 1,
                    'payment_date' => date("Y-m-d H:i:s",time()),
                    'next_payment_date' => date('Y-m-d', strtotime('+32 days')),
                    'user_package' => $data['invoice'],
                    'package_price' => $price
                )
            );
            $data2 = array('id' => '',
            'txn_id' => $data['txn_id'],
            'amount' => $data['payment_amount'],
            'mode ' => $data['payment_status'],
            'paypal_log' => $data['paypallog'],
            'user_id' => $data['custom'],
            'created_at' => date('Y-m-d H:i:s',time())

            );
            $this->db->insert('tbl_paypal_log', $data2);
            //----------------- INSERT RECORDS TO DATABASE-------------------------------------
            }else{                  
            // Payment made but data has been changed
            // E-mail admin or alert user
            }                       

        } elseif ($res=='INVALID') {

                // PAYMENT INVALID & INVESTIGATE MANUALY! 
                // E-mail admin or alert user
                ////mail('atiftariq80@gmail.com','PAYMENT INVALID AND INVESTIGATE MANUALY','PAYMENT INVALID AND INVESTIGATE MANUALY');  

        }       
        }       
    fclose ($fp);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-30T00:55:46.847

有一个[非常好的](https://developer.paypal.com/webapps/developer/docs/classic/ipn/integration-guide/IPNIntro/)即时付款通知 (IPN) 指南并了解它们的工作原理。本指南为您提供了`notify_url`正常工作所需的步骤。

Paypal提供了[很好的代码示例](https://github.com/paypal/ipn-code-samples)，可以为您进行验证响应，这非常好。您可以使用这些是您自己的起点。

# c# - 通过 API/服务以编程方式打开和关闭 PC

> ID：14949510
> 
> 赞同：0
> 
> 时间：2013-02-19T03:48:48.970
> 
> 标签：c#, automation, hardware

我有一些机器，取决于太阳能阵列产生的电力，我希望能够打开和关闭这些 WIn 7 PC'S

我将功率输出数据发送到数据库，以便对一侧进行排序

我了解 WAKE ON LAN 魔术包等

是否有一个 API 可以让我编写此功能以自动执行此过程，或者是否有一个硬件小工具解决方案可以将主板上的电源开关连接到等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-24T22:06:32.067

局域网唤醒数据包只是具有特定签名的任何网络或传输级别数据包。

预期的签名是：

```
6 Bytes of a header (set to 0xFF)
16 repetitions of a target MAC Address (6 bytes each)
... for a total of 6 + 6 * 16 = 102 bytes 
```

请注意，这些通常作为用户数据报 (UDP) 数据包发送（而不是广播）到端口 7 或 9。

这是一篇非常详细的 Wiki 文章：[http ://en.wikipedia.org/wiki/Wake-on-LAN](http://en.wikipedia.org/wiki/Wake-on-LAN)

如果您想查看示例实现`Go`（我知道它不是 C#，但您可以了解它是如何工作的），请查看我编写[的 magic_packet 处理程序。](https://github.com/sabhiram/go-wol)

**至于远程开机（物理）**

您可以探索购买 IP 电源开关，您可以通过某些托管接口（通常是 HTTP）向其发送唤醒/关闭命令。这些是市售的，可能会花费一些。

我认为您还可以构建某种类型的微控制器，该微控制器可以通过 Wifi 触发来管理连接到您的 PC 电源开关的继电器。很多选择:)

# keyboard - 如何使用 haxe 列出可用的输入设备？

> ID：14949511
> 
> 赞同：0
> 
> 时间：2013-02-19T03:48:48.730
> 
> 标签：keyboard, mouse, haxe, joystick, input-devices

我想在启动应用程序时列出所有可用的输入设备，但我在 API 中找不到这样做的方法。

如何获取可用键盘、鼠标、游戏手柄、触摸屏、加速度计的列表...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:25:01.727

Haxe 是一种可以编译成其他语言的编程语言。有些项目使用已编译的 haxe 代码部署到不同的运行时。例如，NME 框架编译为 neko、html5、flash、mobile 等。所以你的问题并没有真正的严格意义。

我怀疑是否有一个用于获取 nme 中可用输入设备列表的 api，因为通常它会很明显。但是，您可以一次通过 api 一个输入来测试我猜它是否可用或工作。

您对此有特殊需要吗？通常人们通常使用编译器条件来确定这些事情，例如；

```
#if mobile
//your touch input code
#elseif desktop
//your mouse / keyboard code
#end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-19T13:49:27.460

OpenFL 中存在用于游戏手柄的*Joystick API 。*

> 每个事件都有一个“设备”属性，它指定事件来自哪个输入设备。通过这种方式，您可以在一个游戏中支持多个操纵杆或（可能）游戏手柄。

[http://www.joshuagranick.com/blog/?p=692](http://www.joshuagranick.com/blog/?p=692)

# java - 在服务器上部署 JNLP 文件（不是本地服务器）

> ID：14949517
> 
> 赞同：1
> 
> 时间：2013-02-19T03:49:26.720
> 
> 标签：java, jar, jnlp, classnotfoundexception, java-web-start

配置 Web 启动。我试图查找它，但找不到我的错误的答案。

```
java.lang.ClassNotFoundException: Webstart.Main
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at com.sun.jnlp.JNLPClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at com.sun.javaws.Launcher.doLaunchApp(Unknown Source)
    at com.sun.javaws.Launcher.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

在我的服务器上，我有：

```
test.jar
Webstart.jnlp 
```

这是我的 .jnlp 文件

```
<?xml version="1.0" encoding="utf-8"?>
<jnlp spec="1.0+" codebase="http://www.[mywebsite].com/_webstart/" href="webstart.jnlp">
  <information>
    <title>JFrame Deom</title>
    <vendor>[ME]</vendor>
    <homepage href="http://www.[mywebsite].com" />
    <description>A Java Webstart Test</description>
    <offline-allowed />
  </information>
  <resources>
    <j2se version="1.7" />
    <jar href="Webstart.jar" />
  </resources>
  <security>
    <all-permissions />
  </security>
  <application-desc main-class="Webstart.Main" />
</jnlp> 
```

这是我的 Java 类：

```
import java.awt.BorderLayout;
import javax.swing.*;

public class Main {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        JFrame f = new JFrame("My Frame");
        f.setSize(250,250);
        f.setLocation(300,300);
        f.getContentPane().add(BorderLayout.CENTER, new JTextArea(10,40));
        f.setVisible(true);
    }
} 
```

我运行文件的方式是在 Web 浏览器 URL 中输入名称。

我是新手，所以非常感谢任何帮助或支持性意见。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T03:56:04.013

我马上就看到了两个问题。

1.  在您的 JNLP 文件中，您将 JAR 指定为`Webstart.jar`，但在您的部署中，它被称为`test.jar`
2.  在您的 JNLP 文件中，您将主类指定为`Webstart.Main`，但您的`Main`类不在任何包中（您包含在发布的代码中）。

# c++ - 表达式 sfinae 中的惯用后备

> ID：14949518
> 
> 赞同：3
> 
> 时间：2013-02-19T03:49:27.647
> 
> 标签：c++, c++11, sfinae, function-prototypes

[表达式 SFINAE](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2634.html)是一种非常方便的方法，可以编写几个替代函数来做同样的事情，并选择最好的编译函数。您在函数原型中提到了关键表达式，如果它们无效，则原型将被忽略，并且有望选择另一个。

这非常方便，除了在表达式未定义的情况下声明原型。通常必须将原型集划分为相互排斥的域，因为从重载解决方案的角度来看它们可能相等，并且允许两个进入重载集会导致歧义。

人们总是可以为给定的表达式定义一个老式的特征类型，用于`std::enable_if`：

```
template< typename s, typename t, typename u, typename = void >
struct is_product_serializable : std::false_type {};

template< typename s, typename t, typename u >
struct is_product_serializable< s, t, u, typename std::conditional< true, void,
   decltype( std::declval< s >() << std::declval< t >() * std::declval< u >() )
>::type >
    : std::true_type {}; 
```

如果不是需要派生一些东西`false_type`，那么`std::conditional`可以直接进入函数原型，所有这些样板都会消失。

有什么替代方案吗？也许某种方法可以降低不干扰类型推导的函数重载的等级？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:10:32.810

一种替代方法是添加一个调度程序函数，该函数添加一个虚拟参数（如标签），以便调整空间以使参数列表不同。

```
// "Primary" template is just a dispatcher
template< typename ... args >
void chuck( args && ... rem ) {
    return chuck_impl( 0, std::forward< args >( a ) ... );
}

// preferred alternative matches int to 0 but is controlled by SFINAE
template< typename t, typename u, typename ... args >
auto chuck_impl( int, t && a, u && b, args && ... rem )
-> typename std::conditional< true, void, decltype( blah( a, rem ... ) * b ) >::type {
    blah( a, rem ... ) * b;
}

// fallback requires int => float conversion
template< typename t, typename u, typename ... args >
void chuck_impl( float, t && a, u && b, args && ... rem ) {
    bleh( a + chuck_impl( b, rem ... ) );
} 
```

# sql - MS Access 中的列比较 SQL 问题

> ID：14949520
> 
> 赞同：0
> 
> 时间：2013-02-19T03:49:37.483
> 
> 标签：sql, ms-access

我有以下查询，需要在 MS Access 中获取不匹配的列记录。

问题是当有多个记录具有相同的链接列值时，匹配不正确

询问

```
SELECT 
    T1Col1,
    T1Col2,
    T2Col1,
    T2Col2
FROM T1 
INNER JOIN T2 
    ON T1.Col1 = T2.Col1
WHERE T1.Col2 <> T2.Col2 
```

执行后我得到以下不正确的结果

```
T1Col1  T1Col2 T2Col1  T2Col2

abc     ccc    abc     eee
abc     eee    abc     ccc 
```

理想情况下，上述记录不应在结果集中作为匹配返回（检查不匹配的记录）。我是否需要更改查询中的任何内容以获得正确的结果

T1

```
T1Col1  T1Col2 

jkl     ttt
efg     qqq
efg     mmm
abc     ccc    
abc     eee 
```

T2

```
T2Col1  T2Col2

jkl    sss
efg    uuu
efg    mmm
abc    eee
abc    ccc 
```

预期结果将是

```
T1Col1  T1Col2 T2Col1  T2Col2

jkl     ttt    jkl     sss
efg     qqq    efg     uuu 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:31:46.367

我怀疑这是最有效的解决方案，但它会起作用。

简单连接的问题在于，您正在执行 T1 中的所有记录与 T2 中的所有记录的笛卡尔连接，然后删除不符合条件的记录。因此，您会得到不需要的结果，因为您没有执行与您的英语（或您选择的母语）匹配的查询。SQL 在这种情况下很棒——大多数时候，如果你只是大声说出你想要的东西，SQL 就会完全匹配。

你想要什么：

> 从 T1 中选择那些在 T2 中没有具有相同 COL1 和 COL2 值的行的行。然后从 T2 中选择那些在 T1 中没有具有相同 COL1 和 COL2 值的行的行。然后通过 COL1 将这两个结果集相互匹配。

所以，给你：

```
create table t3 as 
  select * from 
    (select * from t1 where not exists (select 1 from T2 where T1col1=t2col1 and t1col2=t2col2)) M1,
    (select * from t2 where not exists (select 1 from T1 where T1col1=t2col1 and t1col2=t2col2)) M2
    where M1.t1col1=M2.t2col1; 
```

# sqlite - 复杂的sqlite查询和数组的使用

> ID：14949521
> 
> 赞同：1
> 
> 时间：2013-02-19T03:49:49.727
> 
> 标签：sqlite, sorting

我有两个表，“日志”和“会话”。日志具有 logID、logName、logDateTime 和 sessionID。一个会话有一个 sessionID 和 sessionName。

日志不需要是会话的一部分，但它可以是。如果它不是会话的一部分，则字段 logs.sessionID 为 NULL。如果它是会话的一部分，则关联的 sessionID 位于 logs.sessionID 中，并且与会话表相关。

**目标：** 这是我使用钛工作室开发的 iphone 应用程序的一部分。我需要创建一个表视图，其中每个日志都是一行，除非会话中有多个日志。在这种情况下，将创建带有会话名称的行，并将带有会话 logNames 的标签添加到 sessionRow。tableview 行需要按日期时间排序，给定会话的日期时间由最近的日志计算。因此，将其可视化为表格视图...

* * *

12-12-12 日志名称 1

* * *

12-11-12 日志名称2

* * *

会话名称

日志名称 3、日志名称 4、日志名称 5

* * *

12-10-12 日志名称6

* * *

会话名称2

日志名称 7、日志名称 8、日志名称 9

* * *

**问题：**我不太确定如何从查询/排序的角度处理这个问题。我想过很多想法，但它们似乎都有问题。我不是在寻求有关构建此 tableview 的 UI 的帮助，而只是一种处理数据的解决方案。

**进行中的工作：**

```
**OPTION 1:**

var rowArray=[];
var ignoreArray=[];

var rows = select logID, logName, logDateTime, logs.sessionID, sessionName
           FROM logs, sessions WHERE logs.sessionID=sessions.sessionID OR
           logs.sessionID IS NULL ORDER BY logDateTime DESC, logs.sessionID;

while(rows.isValidRow()){
    var logSessionID = rows.fieldByName('sessionID');

    if(logSessionID){//if the current log is part of a session
        //1\. check ignoreArray to see if this session has
             already been created. If not, continue steps 2-4.
        //2\. create a tableview row with the sessionName
        //3\. loop through all rows, and add the logName to the row created above
             ONLY when it contains the current sessionID
        //4\. add session row to rowArray
        //5\. put current sessionID into ignoreArray, so that there won't be
             duplicate session rows.
    }else{
        //1\. create a regular log row, as it is not part of a session
        //2\. add log row to rowArray
    }

    rows.next();
}

//everything is complete, set the array of data to the tableview
tableview.setData(rowArray); 
```

我对选项 1 的疑虑/问题：

1.  由于每次我打开一个新会话时都会遍历所有行，因此效率是否非常低

2.  如果不是数千个日志，它会很慢吗？

3.  当我正在循环遍历所有行（嵌套）时，如何循环遍历所有行？

    **选项 2：**

    ```
    var presortArray=[];

    var logs = select * from logs WHERE sessionID IS NULL;
    var sessionlogs = select * from logs WHERE sessionID IS NOT NULL;
    var sessions = select * from sessions;

    while(logs.isValidRow()){
        //1\. create log row, push to presortArray;
    };
    while(sessions.isValidRow()){
        //1\. create session row
        //2\. loop through sessionlogs, adding each to the session row
             that contains the current sessionID. Make sure the session
             Row gets a custom date field for future array sorting
        //3\. push session row to presortArray
    };

    //all rows are now in presortArray.
    var sortArray = //find a way to sort the rows in presortArray based on datetime

    tableview.setData(sortArray); 
    ```

我对选项 2 的疑虑/问题：

1.  基于数组中每个对象的自定义字段使用某种形式的数组排序会很慢吗？

2.  我可以多次循环“sessionLogs”吗，有没有办法在每次循环时将其设置回第一行？

**最重要的问题：现在我已经认真努力地解释，希望不要过度解释，我的目标和我正在进行的工作。有没有更简单的方法可以做到这一点，我还没有意识到？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T08:53:04.087

使用此示例数据：

```
CREATE TABLE logs(logID, logName, logDateTime, sessionID);
CREATE TABLE sessions(sessionID, sessionName);
INSERT INTO sessions VALUES (1, 'sessionName'), (2, 'sessionName2');
INSERT INTO logs VALUES (1, 'logName1', '2012-12-12', NULL),
                        (2, 'logName2', '2012-11-12', NULL),
                        (3, 'logName3', '2012-11-01', 1),
                        (4, 'logName4', '2012-11-02', 1),
                        (5, 'logName5', '2012-11-03', 1),
                        (6, 'logName6', '2012-10-12', NULL),
                        (7, 'logName7', '2012-10-01', 2),
                        (8, 'logName8', '2012-10-02', 2),
                        (9, 'logName9', '2012-10-03', 2); 
```

以下查询：

```
SELECT logID,
       NULL AS sessionID,
       logDateTime,
       logName,
       NULL AS NamesInRandomOrder
FROM logs
WHERE sessionID IS NULL

UNION ALL

SELECT NULL,
       sessions.sessionID,
       MAX(logDateTime),
       sessionName,
       group_concat(logName)
FROM logs JOIN sessions ON logs.sessionID = sessions.sessionID
GROUP BY sessions.sessionID

ORDER BY 3 DESC 
```

将给出这个输出：

```
logID  sessionID  logDateTime  logName       NamesInRandomOrder
-----  ---------  -----------  ------------  --------------------------
1                 2012-12-12   logName1
2                 2012-11-12   logName2
       1          2012-11-03   sessionName   logName3,logName4,logName5
6                 2012-10-12   logName6
       2          2012-10-03   sessionName2  logName7,logName8,logName9 
```

* * *

如果您想`logName`订购 s，您可以使用以下查询：

```
SELECT logID,
       sessions.sessionID,
       logDateTime,
       sessionName,
       logName
FROM logs LEFT JOIN sessions ON logs.sessionID = sessions.sessionID
ORDER BY logDateTime DESC 
```

这会给你这个输出：

```
logID  sessionID  logDateTime  sessionName   logName
-----  ---------  -----------  ------------  --------
1                 2012-12-12                 logName1
2                 2012-11-12                 logName2
5      1          2012-11-03   sessionName   logName5
4      1          2012-11-02   sessionName   logName4
3      1          2012-11-01   sessionName   logName3
6                 2012-10-12                 logName6
9      2          2012-10-03   sessionName2  logName9
8      2          2012-10-02   sessionName2  logName8
7      2          2012-10-01   sessionName2  logName7 
```

这将要求您在到达一个会话的日志列表末尾时签入您的代码。

# ios - 泄漏内存工具在分配属性时无法检测到泄漏，那么，泄漏内存是不是？

> ID：14949525
> 
> 赞同：0
> 
> 时间：2013-02-19T03:50:04.410
> 
> 标签：ios, objective-c, memory-leaks

我正在编写 iOS 应用程序。我有班级**Car**和班级**Wheel**。类 Car 有一个属性 Wheel（仅在这个例子中，在现实中，Car 有多个轮子）。

汽车类：

```
@property (nonatomic, retain) Wheel * wheel; //because it has retain, so I delete wheel in dealloc function. 
```

当我有一个 Car 对象时，我初始化轮子。

```
Car* car = [[Car alloc] init];
car.wheel = [[Wheel alloc] init]; 
```

我认为该代码会造成内存泄漏，但 XCode 中 Instrument 工具中的泄漏检测器工具无法检测到它。那么，发生了什么？可能是我错了吗？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:54:25.350

由于您声明了您的`wheel`属性以保留给它的对象，因此`autorelease`向您的对象发送一条消息`Wheel`：

```
Car* car = [[Car alloc] init];
car.wheel = [[[Wheel alloc] init] autorelease]; 
```

# hibernate - JPQL Join Fetch 在 Spring Data 中的 ManyToOne 关联中不起作用

> ID：14949526
> 
> 赞同：12
> 
> 时间：2013-02-19T03:50:14.033
> 
> 标签：hibernate, jpa, spring-data-jpa

我正在尝试在 Spring Data 中使用 JPQL 优化基本查询，以避免对数据库进行多次查询，并使用 JOIN Fetch 在一个查询中检索所有信息，但我不断收到此异常：

```
org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.QueryException: query specified join fetching, but the owner of the fetched association was not present in the select list [FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=Business.Countries,tableAlias=country1_,origin=BUSINESS.COAPPLICANTS coapplican0_,columns={coapplican0_.Country_Id ,className=com.medifast.entity.core.Country}}] [select count(ca) from com.medifast.entity.core.CoApplicant ca LEFT JOIN FETCH ca.country LEFT JOIN FETCH ca.state where ca.client.id = :clientId]; nested exception is java.lang.IllegalArgumentException: org.hibernate.QueryException: query specified join fetching, but the owner of the fetched association was not present in the select list [FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=Business.Countries,tableAlias=country1_,origin=BUSINESS.COAPPLICANTS coapplican0_,columns={coapplican0_.Country_Id ,className=com.medifast.entity.core.Country}}] [select count(ca) from com.medifast.entity.core.CoApplicant ca LEFT JOIN FETCH ca.country LEFT JOIN FETCH ca.state where ca.client.id = :clientId]
  at org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:301) 
```

这是我的道：

```
/**
 * Interface to handle persistence operations for CoApplicants.
 *
 */
@Repository
public interface ICoApplicantDao extends JpaRepository<CoApplicant, Long>
{
    @Query("select ca from CoApplicant ca JOIN FETCH ca.country c where ca.client.id = :clientId")
    Page<CoApplicant> findCoApplicantsByClient(@Param("clientId") Long clientId, Pageable pageable);
} 
```

这些是我的实体：

```
@Entity
@Table(name = "BUSINESS.COAPPLICANTS")
@SQLDelete(sql = "UPDATE BUSINESS.COAPPLICANTS SET DELETED = 1 WHERE id = ?")
@Where(clause = "DELETED <> 1")
@Data
@EqualsAndHashCode(callSuper = true)
public class CoApplicant extends AbstractAuditableEntity
{

    /**
     * Serial.
     */
    private static final long serialVersionUID = -297231024073091062L;

    /**
     * First name.
     */
    @Column(name = "FirstName")
    private String firstName;

    /**
     * Last name.
     */
    @Column(name = "LastName")
    private String lastName;

    /**
     * Recognition Name.
     */
    private String recognitionName;

    /**
     * For the address line 1 field.
     */
    private String addressLine1;

    /**
     * For the address line 2 field.
     */
    private String addressLine2;

    /**
     * City.
     */
    private String city;

    /**
     * State.
     */
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "State_Id")
    private State state;

    /**
     * Zip Code.
     */
    private String zipCode;

    /**
     * Country.
     */
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "Country_Id")
    private Country country;

    /**
     * Email address.
     */
    @Column(unique = true)
    private String email;

    /**
     * Main Phone number.
     */
    private String mainPhone;

    /**
     * Constructor.
     */
    public CoApplicant()
    {
        super();
    }
}

/**
 * Country entity.
 */
@Entity
@Table(name = "Business.Countries")
@SQLDelete(sql = "Update Business.Countries set deleted = 1 where id=?")
@Where(clause = "deleted <> 1")
@Data
@EqualsAndHashCode(callSuper = true)
public class Country extends AbstractAuditableEntity
{

    /**
     * Serial.
     */
    private static final long serialVersionUID = -267110442898674427L;

    /**
     * Name of the country.
     */
    private String name;

    /**
     * The orders for the client.
     */
    @OneToMany(mappedBy = "country", cascade = CascadeType.ALL, fetch = FetchType.LAZY)
    private Collection<State> states;

    /**
     * Const.
     */
    public Country()
    {
        super();
    }    

}

   /**
 * State entity.
 */
@Entity
@Table(name = "Business.States")
@SQLDelete(sql = "Update Business.States set deleted = 1 where id=?")
@Where(clause = "deleted <> 1")
@Data
@EqualsAndHashCode(callSuper = true)
public class State extends AbstractAuditableEntity
{

    /**
     * Serial.
     */
    private static final long serialVersionUID = 8643487990581006632L;

    /**
     * Name of the state.
     */
    private String name;

    /**
     * Code of the state.
     */
    private String code;

    /**
     * Country to which this State belongs.
     */
    @ManyToOne
    @JoinColumn(name = "Country_Id")
    private Country country;

    /**
     * Constr.
     */
    public State()
    {
        super();
    }
} 
```

任何见解，帮助将不胜感激。

我想要完成的纯 SQL 看起来像这样：

```
SELECT ca.Id
      ,firstName
      ,lastName
      ,recognitionName
      ,addressLine1
      ,city
      ,email
      ,mainPhone
      ,coun.name
      ,sta.name
  FROM coApplicants AS ca 
  LEFT JOIN countries AS coun
    on ca.country_Id=coun.id
  LEFT JOIN states AS sta
    on ca.state_Id=sta.id 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-08-20T10:53:11.250

使用可分页查询`JOIN FETCH`是 Hibernate 的一个问题。

要解决这种情况，您必须放置`countQuery`- 与原始几乎相同，但不相关的 INNER JOIN（最终 FETCH）被删除。

解决方案的来源可以在这里找到：[Spring-Data FETCH JOIN with Paging is not working](https://stackoverflow.com/questions/21549480/spring-data-fetch-join-with-paging-is-not-working)

因此，您的解决方案将是：

```
@Query(
    value="select ca from CoApplicant ca JOIN FETCH ca.country c where ca.client.id = :clientId",
    countQuery="select count(ca) from CoApplicant ca where ca.client.id = :clientId")
Page<CoApplicant> findCoApplicantsByClient(@Param("clientId") Long clientId, Pageable pageable); 
```

# mysql - MySQL - 如何通过 Select 从组中获取模式

> ID：14949527
> 
> 赞同：0
> 
> 时间：2013-02-19T03:50:13.897
> 
> 标签：mysql, magento

我创建了一堆将产品导入 magento 的 MySQL 脚本，我使用 GROUP BY 将产品分组为可配置产品

过去，我习惯于`MIN()`获得组中最低的价格并将该值用作可配置产品的价格，但最近出现了一些这样的情况

```
Simple Product ID | Price ($)
------------------------------
      1001        |   10
      1002        |   10
      1003        |    5
      1004        |   10
      1005        |   20
      1006        |   10 
```

在这种情况下，当我创建可配置产品时，`MIN(Price)`将返回 5，我只是了解到，使用可配置产品我可能会有负面差异，这意味着现在我需要更改我的代码，而不是获得最小值 (5) 我得到了模式(10)

我想我只需`MIN()`要用 MODE() 替换查询中的

```
INSERT INTO import_table
(
    product_id, stock_id, price
)
SELECT ODT.product_id, ODT.stock_id, MIN(ODT.Price)
FROM org_data_table AS ODT
GROUP BY ODT.stock_id 
```

是否已经存在获取模式的功能？如果不是，那么我需要做什么才能得到它，我只想更改`MIN()`我的查询部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:20:01.013

这可能有点棘手，因为 MODE 可以有多个价格——如果 2 个价格具有相同的计数，那么它们都被视为 MODE。

此查询应返回 org_data_table 中价格在 MODE 中的所有记录：

```
SELECT DISTINCT T.Product_Id, T.Stock_Id, T.Price
FROM org_data_table T 
  JOIN (
    SELECT COUNT(*) cnt, Price
    FROM org_data_table
    GROUP BY Price
    HAVING COUNT(*) = (
      SELECT Max(cnt)  
      FROM (
        SELECT COUNT(*) cnt, Price
        FROM org_data_table
        GROUP BY Price
        ) t
      )
  ) T2 ON T.Price = T2.Price 
```

这是一些小提琴示例：[http ://sqlfiddle.com/#!2/8f1a2/1](http://sqlfiddle.com/#!2/8f1a2/1)

显然你可以添加：

```
INSERT INTO import_table (product_id, stock_id, price) 
```

在查询之前插入记录。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T04:01:11.300

您可以通过以下查询检索价格的模式

```
SELECT ODT.Price as price, count(ODT.Price) AS cnt 
FROM org_data_table  as ODT
GROUP BY ODT.price 
ORDER BY cnt DESC 
LIMIT 1; 
```

这将返回`Price` **Mode**值，然后您可以在 SELECT 语句中使用它，如下所示，您可以插入**Mode**值，请参见下面的查询：

```
INSERT INTO import_table
(
    product_id, stock_id, price
)
SELECT ODT.product_id, ODT.stock_id, (SELECT ODT.Price as price 
FROM org_data_table  as ODT
GROUP BY ODT.price 
ORDER BY count(ODT.Price) DESC 
LIMIT 1) as price
FROM org_data_table AS ODT
GROUP BY ODT.stock_id 
```

# mono - 如何编译单声道 xsp？

> ID：14949529
> 
> 赞同：1
> 
> 时间：2013-02-19T03:50:19.493
> 
> 标签：mono, xsp

我正在尝试构建最新的 XSP。我怀疑这是最新的分支[https://github.com/mono/xsp/tree/3.0](https://github.com/mono/xsp/tree/3.0)

问题是，`./configure`不起作用。没有配置文件。有一个 configure.ac 但我不确定如何构建它。自述文件/安装说明没有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:58:17.897

运行`./autogen.sh --prefix=/usr/local`，`prefix`安装的地方在哪里。

# javascript - Facebook画布应用程序内的可点击外部链接

> ID：14949530
> 
> 赞同：-1
> 
> 时间：2013-02-19T03:50:31.957
> 
> 标签：javascript, html, facebook, hyperlink, facebook-canvas

我在 facebook 画布应用程序中有链接。当用户点击它时，它应该显示在新的标签或页面中。怎么做？

我使用 javascript`location`将用户重定向到 facebook 登录页面。

几个月前，我在 stackoverflow 中看到了一个用户在 javascript 中发布的代码作为解决方案，但我搜索了两天并没有找到它。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:54:21.733

如果您想在新标签页中打开链接

```
 window.open(urlOfNewPage); 
```

如果您想在同一窗口中打开链接

```
 window.location = urlOfNewPage; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T21:17:08.793

我认为您正在寻找的答案在下面的链接中。本质上，a href="xyz" **target="_top"**等等：**window.top.location=xyz**

[窗口顶部位置](https://stackoverflow.com/questions/3332756/difference-between-window-location-href-and-top-location-href)

[链接到外部网站在画布标签上的 Facebook](https://stackoverflow.com/questions/7455718/links-to-external-site-in-canvas-tab-on-facebook-page-show-up-within-canvas-inst)

# php - PDO 准备好的插入语句不工作，不返回错误

> ID：14949532
> 
> 赞同：0
> 
> 时间：2013-02-19T03:50:43.547
> 
> 标签：php, mysql, pdo

我有一个用户注册脚本，除了 PDO 准备好的语句不会将值插入数据库之外，它都可以正常工作。该脚本没有返回错误。MySQL 用户确实拥有我正在执行的操作的权限。

Signup.php ：

```
echo "<?xml version=\"1.0\" ?>";

if(isset($_POST['email'], $_POST['username'], $_POST['p'], $_POST['fname'], $_POST['lname'], $_POST['gender'])) {

foreach ($_POST as $entry) {
    strip_tags($entry);
}

if(strlen($_POST['email']) < 1) {
    echo "<response>Please enter an email address!</response>";
    exit();
}

if(!filter_var($_POST['email'], FILTER_VALIDATE_EMAIL)) {
    echo "<response>Please enter a valid email address!</response>";
    exit();
}

if(strlen($_POST['p']) < 6) {
    echo "<response>Please enter a password that is longer than 6 characters!</response>";
    exit();
}

if(strlen($_POST['username']) < 5 || strlen($_POST['username']) > 30) {
    echo "<response>Please enter a username that is between 5 and 30 characters in length!</response>";
    exit();
}

if(strlen($_POST['fname']) < 1 || strlen($_POST['lname']) < 1) {
    echo "<response>Please enter a name!</response>";
    exit();
}

if(strlen($_POST['gender']) < 1) {
    echo "<response>Please select your gender!</response>";
    exit();
}

//if(strlen($_POST['recaptcha_response_field']) < 1) {
//  echo "<response>Please answer the Captcha!</response>";
//  exit();
//}

if($_POST['gender'] === "Male") {
    $_POST['gender'] = "m";
} else {
    $_POST['gender'] = "f";
}

//$recaptcha_response = null;
//$recaptcha_error = null;

//$recaptcha_response = recaptcha_check_answer($recaptcha_private_key, $_SERVER['REMOTE_ADDR'], $_POST['recaptcha_challenge_field'], $_POST['recaptcha_response_field']);

//if($recaptcha_response->is_valid) {

    $salt = hash("sha512", uniqid(mt_rand(1, mt_getrandmax()), true));
    $password = $_POST['p'];
    $password = hash("sha512", $password.$salt);

    $info = array(

        "email" => $_POST['email'],
        "password" => $password,
        "salt" => $salt,
        "username" => $_POST['username'],
        "fname" => $_POST['fname'],
        "lname" => $_POST['lname'],
        "gender" => $_POST['gender']

    );

    if(register($info, $database) === true) {

        echo "<response>Registration Successfull! Please check your inbox for an activation email!</response>";

        exit();

    }

//} else {

//  echo "<response>Incorrect Captcha! Please click the reCaptcha refresh button and try again!</response>";

//  exit();

//}

} else {

echo "<response>Invalid Sign-Up Request!</response>";

exit();

} 
```

寄存器（）函数：

```
function register($info, $database) {

try {

    $query = $database -> prepare("SELECT email FROM members WHERE email = :email LIMIT 1");

    $query -> execute(

        array(

            ":email" => $info['email']

        )

    );

    $result = $query -> fetch();
    $result = $result[1];

    if(strlen($result) > 0) {

        echo "<response>Email already in use!</response>";

        exit();

    } else {

        $query = $database -> prepare("SELECT username FROM members WHERE username = :username LIMIT 1");

        $query -> execute(

            array(

                ":username" => $info['username']

            )

        );

        $result = $query -> fetch();
        $result = $result[1];

        if(strlen($result) > 0) {

            echo "<response>Username already in use!</response>";

            exit();

        } else {

            $query = $database -> prepare("SELECT password FROM members WHERE password = :password LIMIT 1");

            $query -> execute(

                array(

                    ":password" => $info['password']

                )

            );

            $result = $query -> fetch();
            $result = $result[1];

            if(strlen($result) > 0) {

                echo "<response>Password already in use!</response>";

                exit();

            } else {

                $time = time();

                /*
                * This is where it isn't working
                */

                $query = $database -> prepare("INSERT INTO members (email, password, salt, username, first_name, last_name, signup, last_login, gender) VALUES (:email, :password, :salt, :username, :fname, :lname, :signup, :last_login, :gender)");

                $query -> execute(

                    array(

                        ":email"            => $info['email'],
                        ":password"    => $info['password'],
                        ":salt"               => $info['salt'],
                        ":username"  => $info['username'],
                        ":fname"          => $info['fname'],
                        ":lname"          => $info['lname'],
                        ":signup"         => $time,
                        ":last_login"   => $time,
                        ":gender"        => $info['gender']

                    )

                ) or die(print_r($query->errorInfo(), true));

                $rc = hash("sha512", uniqid(mt_rand(1, mt_getrandmax()), true));

                $query = $database -> prepare("SELECT id FROM members WHERE email = :email LIMIT 1");

                $query -> execute(

                    array(

                        ":email" => $info['email']

                    )

                );

                $user_id = $query -> fetch();

                $query = $database -> prepare("INSERT INTO regcodes (user_id, reg_code) VALUES (:id, :rc)");

                $query -> execute(

                    array(

                        ":id" => $user_id['id'],
                        ":rc" => $rc

                    )

                );

                mail($info['email'], "Activate your account for Code-Cluster!", "Please click the following link to activate your account for Code-Cluster!\r\n http://www.ablp.x10.mx/code-cluster/activate.php?rc=".$rc);

                return true;

                exit();

            }

        }

    }

} catch(PDOException $e) {

    echo "<response>An error occured whilst creating your account! An email has been sent to tech support!</response>";

    mail("admin@codecluster.x10.mx", "Code-Cluster Sign-Up Error", "Sign-Up Error; Timestamp @ " . date() . " ; IP Address : " . $_SERVER['REMOTE_ADDR'] . " ;\r\n" . $e);

    exit();

}

} 
```

这是数据库结构： ![数据库结构](../Images/99c91cda728fc60537af6a03d5cbde74.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:57:11.190

它应该是`:email`而不只是`email`在数组中。

```
array(
        ":email" => $info['email']
     ) 
```

对于所有其他`execute()`呼叫也是如此。

# prolog - 如何在不使用 Prolog 中的 findall 或 assert/retract 的情况下将元素添加到列表或从知识库中计算它们？

> ID：14949537
> 
> 赞同：0
> 
> 时间：2013-02-19T03:51:17.600
> 
> 标签：prolog, backtracking, prolog-assert, prolog-findall

我有一个知识库，由文件'students.pl'中的学生数据库组成，如下所示：

```
% student(Name,Percent,List_of_Marks_in_3_subjects).
student('abc',83,[80,80,90]).
student('pqr',70,[70,60,80]).
student('xyz',76,[80,70,80]). 
```

我想从知识库中访问每个学生谓词并计算每个科目的平均分数或平均百分比，而不使用“findall”或断言/撤回。我可能想像这样使用回溯：

```
find_score_all(X) :- student(Name,Percent,L),
    write(Percent),nl,
    fail.
find_score_all(_). 
```

使用这种方法，我可以访问每个元素并编写它，但是如果我想将每个“百分比”值作为一个元素添加到列表中，或者只是使用像“百分比 1 是总计 + 百分比”这样的谓词来合计百分比值，然后找到它的平均值，我该怎么做？请注意，我不想使用 findall 或retract/assert 并且最好在一次通过知识库中找到平均值，因为知识库非常大。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:17:16.347

```
%solution for sum of percents, you can replace with any other calculation sum_percent predicate.
listing(student/3, convert_to_list/2, sum_percent, sum_percent/2).

% student(Name,Percent,List_of_Marks_in_3_subjects).
student('abc',83,[80,80,90]).
student('pqr',70,[70,60,80]).
student('xyz',76,[80,70,80]).

convert_to_list(X, R):-
    student(N, P, LM),
    not(member(st(N, P, LM), X)),
    convert_to_list([st(N, P, LM)|X], R).

convert_to_list(X, X).

sum_percent:-
    convert_to_list([], X),
    sum_percent(X, S),
    write(S).

sum_percent([], 0).
sum_percent([st(_,E,_)|T], S):-
    sum_percent(T, S2),
    S is E+S2. 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T04:23:21.150

如果要添加到列表中，则应使用 findall 或更好的库（[聚合](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.1%27,swi%28%27/doc/Manual/aggregate.html%27%29%29)）。但是如果你担心效率，你可以使用这样的东西

```
integrate(ave, Goal, Ave) :-
    State = state(0, 0, _),
    repeat,
    (   call(Goal, V),
        arg(1, State, C), U is C+1, nb_setarg(1, State, U),
        arg(2, State, S), T is S+V, nb_setarg(2, State, T),
        fail
    ;   arg(1, State, C), arg(2, State, S), Ave is S/C
    ).

:- meta_predicate integrate(+, :, ?). 
```

测试：

```
members(X) :- member(X, [1,2,3,4]).

?- integrate(ave, members, R).
R = 2.5 . 
```

当然，您需要添加错误处理（至少在 counter 时`C == 0`）。

# jquery - 如何从我的导航访问我所有的 fancybox 画廊？

> ID：14949541
> 
> 赞同：0
> 
> 时间：2013-02-19T03:51:40.997
> 
> 标签：jquery, onclick, fancybox, gallery, hyperlink

我有相当独特的情况。这是我的场景：我的页面有几张图片，每张图片都会启动一个fancybox 画廊。我想通过单击照片和导航栏中的单独链接来访问每个画廊。到目前为止，我已经看到了一个示例，该示例允许您使用“onclick”事件设置导航，这非常有帮助，但是，我想对此进行扩展，并让导航中的每个链接都能够访问不同的画廊从那些照片中。我知道如何在 fancybox 中使用此功能的唯一方法是使用“rel”属性，但我不知道如何将其连接到我的 onclick 事件中。任何帮助将不胜感激。

这是我当前 html 的一个片段，但是，我再次只能访问第一个画廊，我希望能够设计我的 onclick 事件，这样我就可以告诉它我想访问哪个画廊。

```
 onclick="$('.gallery').eq(0).trigger('click'); return false; 
```

上面的 onclick 允许我访问 'rel="group2"' 库，但我需要每个链接访问不同的 'rel="group#"'

```
</div>
<div>
    <a class="gallery" rel='group3' href="Pictures/FinalPhotos/GG.jpg">
    <img src="Pictures/FinalPhotos/GG.jpg"class="pictures4"  alt="deck"></a>
    <a class="gallery" rel='group3' href="Pictures/DDC/IMG_5577-Rendering.jpg"></a>
    <a class="gallery" rel='group3' href="Pictures/atriumdarkps.jpg"></a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:45:32.423

您可以从单独的链接访问每个画廊（直接进入`href`无`onclick`属性）：

```
<a href="javascript:$('[rel=group1]').eq(0).trigger('click'); return false;">access group 1</a>
<a href="javascript:$('[rel=group2]').eq(0).trigger('click'); return false;">access group 2</a>
<a href="javascript:$('[rel=group3]').eq(0).trigger('click'); return false;">access group 3</a> 
```

... ETC。

由于所有元素共享同一个类`gallery`（但`rel`属性不同），因此您可以对所有元素使用单个脚本

```
$(".gallery").fancybox(); 
```

见**[JSFIDDLE](http://jsfiddle.net/a6eB8/)**

# mysql - 在 MySQL 中存储 CLLocationDegrees 时精度丢失

> ID：14949544
> 
> 赞同：1
> 
> 时间：2013-02-19T03:52:12.440
> 
> 标签：mysql, ios, double, core-location, precision

我正在开发一个将iOS 设备指定的地*标存储到 MySQL 后端的小应用程序。*当设备保存一个新的*Placemark*时，它会被插入到数据库中，并将新生成的 ID 发送回客户端。如果另一台设备尝试保存相同的*Placemark*，服务器需要确定它已经存在于 DB 中，而不是插入并生成新 ID，它需要向客户端发送回该 Placemark 的现有 ID。

2如果地*标*相同，则它们是相同的：

*   姓名
*   纬度
*   经度

因此，服务器尝试通过发出来识别提交的地标是否已经存在

> SELECT id FROM Placemark WHERE name=x, latitude=y, longitude=x

*   在 iOS 中，`latitude`以`longitude`度数和类型`CLLocationDegrees`为单位报告`<CoreLocation>`
*   在 MySQL 中，`latitude`定义`longitude`为`DOUBLE`

**问题：**
存储坐标时精度丢失，例如：
`latidude`of `50.09529561485427`is stored as `50.0952956148543`
`longitude`of `-122.9893130423316`is stored as`-122.989313042332`

**问题：**
我可以在 MySQL 中使用不同的数据类型来完整地存储每个坐标吗？

**笔记：**

*   我不能将坐标存储为`TEXT`or`VARCHAR`因为我需要能够说`SELECT placemarks coordinates BETWEEN x AND y`或执行其他算术选择
*   我不能使用 MySQL 的空间扩展，因为可移植性是一个问题，而且据我了解，空间数据类型在用作键时非常慢（而且我的用例需要通过坐标选择）

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T06:08:48.800

实际上进一步的测试揭示了以下奇怪的结果：当数据库驱动程序将数据绑定到查询语句时，以及*在*数据实际插入数据库之前，精度就丢失了。

This has the following interesting consequence: The precision seems to be lost in an identical manner even when I bind keys to my subsequent search queries, and therefore almost "accidentally" the correct result is returned. That is, the key (coordinates) is stored incorrectly, and then subsequent selects also convert query keys incorrectly, but in a matching manner, and therefore the record is found. Given that the conversions due to precision loss are always performed on the same platform (the server), it's probably safe to leave as is?? Or maybe not, perhaps a future migration exercise (i.e., due to scaling) will make the rounding errors apparent.

Yawar's pointer led me to MySQL's manual which explains that floating point numbers can be stored without loss of precision as DECIMAL:

*"Exact-value numeric literals have an integer part or fractional part, or both. They may be signed"* [http://dev.mysql.com/doc/refman/5.0/en/precision-math-decimal-changes.html](http://dev.mysql.com/doc/refman/5.0/en/precision-math-decimal-changes.html)

Given that the existing solution seems to work, the question then becomes, is it better to keep the DB data type `DOUBLE`, or switch to `DECIMAL`?

**Storage:**
`Latitude` has range from `-90 to +90`, and iOS seems to use precision of `14 decimals`
`Longitude` has range from `-180 to +180`, which leaves precision of `13 decimals` on iOS

That means we need:
`Latitude` : `DECIMAL(16,14)`, which takes less the 8 bytes of storage (4 bytes for each pack of 9d)
`Longitude`: `DECIMAL(16,13)`, also requiring less than 8 bytes of storage

In contrast, a column of type `DOUBLE` requires 8 bytes of storage.

**Speed (arithmetic):**
Floating point arithmetic will almost always be materially faster because it is supported natively by the hardware

**Speed (searches):**
I believe index of `DECIMAL` vs index of `DOUBLE` have a very comparable runtime.

**Conclusion:**
Switching to `DECIMAL` eliminates the precision errors and also reduces storage requirements, at an arithmetic performance penalty which is negligible in this use case.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T05:26:15.970

Instead of storing latitude and longitude as double, multiply by 1000000, convert to integer, and store that. Of course, divide by 1000000.0 if you need to read them back in your app.

This will give you plenty of accuracy (0.000001º) for placemarks and will eliminate floating point conversion and precision problems that you are having and take up slightly less space. I use this in my own data (it's binary, not SQL) and call them MicroDegrees.

# java - Eclipse 将项目编码为 ANSI 导致无法在 linux 上读取奇怪的字符

> ID：14949548
> 
> 赞同：0
> 
> 时间：2013-02-19T03:52:42.453
> 
> 标签：java, eclipse, utf-8, character-encoding, codepages

我为 bukkit (minecraft) 编写了一些插件 (java)，但是当服务器尝试读取配置文件时，我遇到了一些问题，例如“不可接受的字符 'ï¿½' (0xFFFD)”，在 Windows 中完美运行，在 linux 中没有...我需要使用 ANSI，因为我和一些用户需要特殊字符，但即使在尝试在 linux 上运行它时不将它们添加到配置中，我也会明白这一点。我试图编码为 ANSI，但我得到了同样的错误。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T07:12:06.650

Windows 和 Linux 包含两种不同类型的 Windows 默认编码，它是 UTF16，对于 Linux，它是 UTF8，因此在读取或创建垃圾字符时可能会产生问题

在读取或写入文件时传递要读取/写入的文件的 UTF 格式

例如

```
writeData(String Data,UTFfromate);

WriteData("Test","UTF-8");

readData(String Data,UTFfromate);

readData("Test","UTF-8"); 
```

# c++ - 如何在c ++中将具有n个值的数组弄乱

> ID：14949550
> 
> 赞同：1
> 
> 时间：2013-02-19T03:52:48.177
> 
> 标签：c++

我正在尝试创建一个函数来混合给定有序数组的值，比如从 0 到 n。所以这是我的尝试：

```
void JumbleUp(int *sorted,int n){
int jumble[n];
bool mark[n];
for(int i=0;i<n;i++)
    mark[i]=false;
int aux=0;
srand(time(NULL));
for(int i=0;i<n;i++){

    do {
        aux=(rand()%n);
        }while (mark[aux]);

    jumble[i]=sorted[aux];
    mark[aux]=true;
    } 
```

问题是这个函数不适用于大整数，因为它需要很多时间。那么我可以做些什么来改进我的功能，或者我可以使用哪些其他替代方法来混淆数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T04:49:06.670

你想多了。首先，`srand`程序启动时只调用一次。然后对于算法，类似于伪代码

```
for index in 0..n-1
    index2 = random (0..n-1)
    swap (ar, index, index2) 
```

我在这里可能是错的，但我认为进入`index2`上述范围很重要，`0..n-1`而不是例如`index..n-1`，所以每件作品都有平等的机会最终出现在所有位置。评论中建议的替代方案是这样的，它也可能产生均匀分布的随机播放：

```
for index in 0..n-2
    index2 = random (index..n-1)
    swap (ar, index, index2) 
```

# extjs - 如何启用自定义拖放（ext js 4.1.3）

> ID：14949554
> 
> 赞同：1
> 
> 时间：2013-02-19T03:53:04.330
> 
> 标签：extjs, drag-and-drop

编辑：我删除了与所问问题无关的代码

我试图模仿此处文档中给出的示例：[http](http://docs.sencha.com/ext-js/4-1/#!/example/dd/dragdropzones.html) ://docs.sencha.com/ext-js/4-1/#!/example/dd/dragdropzones.html 。

当我在 dataview 创建的任何 div 中单击并拖动时，我开始选择文本而不是拖动 dataview 项。

我在这里和那里放置了 console.log() 语句来验证代码是否正在触发。getDragData 函数返回的所有元素都包含信息。

我尝试添加“draggable：true”和“enableDrag：true”。没有人允许我拖动 div。但是，“draggable: true”确实使得当我单击并拖动时，我不再选择文本。

我相信这是与该问题有关的唯一代码：SearchDataView.js

```
Ext.require('Client.store.SearchStore');

Ext.define('Client.view.SearchDataView',
    {
        extend: 'Ext.view.View',
        alias: 'widget.SearchDataView',
        config:
            {
                store: Ext.create('Client.store.SearchStore'),
                tpl: '<tpl for=".">' +
                        '<div class="search-wrapper">' +
                            '<div class="search-icon">' +
                                '<img src="../../Images/icons/Person50x50.jpg" />' +
                            '</div>' +
                            '<div class="search-text">' +
                                '<span class="title">{FirstName} {LastName}</span>' +
                                '<span class="address">address, city, state  zip</span>' +
                                '<span class="info">DOB: 7/3/1970</span>' +
                            '</div>' +
                        '</div>' +
                     '</tpl>',
                itemSelector: 'div.search-wrapper',                
                emptyText: 'Nobody in database',
                deferEmptyText: false,
                singleSelect: true,
                listeners:
                    {
                        render: initializeSearchDragZone
                    }
            }
    }
);

function initializeSearchDragZone(v) {
    v.dragZone = Ext.create('Ext.dd.DragZone', v.getEl(), {
        getDragData: function (e) {
            var sourceEl = e.getTarget(v.itemSelector, 10), d;
            if (sourceEl) {
                d = sourceEl.cloneNode(true);
                d.id = Ext.id();
                return v.dragData = {
                    sourceEl: sourceEl,
                    repairXY: Ext.fly(sourceEl).getXY(),
                    ddel: d,
                    searchData: v.getRecord(sourceEl).data,
                    sourceStore: v.store
                }
            }
        },

        getRepairXY: function () {
            return this.dragData.repairXY;
        }
    });
} 
```

视口.js

```
Ext.require('Client.view.SearchPanel');
Ext.require('Client.view.DesktopPanel');

Ext.define('Client.view.Viewport',
    {
        extend: 'Ext.container.Viewport',
        initComponent: function () {
            Ext.apply(this,
                {
                    layout: 'border',
                    items:
                        [
                            {
                                region: 'north',
                                margins: 5,
                                height: 30,
                                xtype: 'container'
                            },
                            {
                                region: 'west',
                                margins: '0 5 0 5',
                                flex: .25,
                                collapsible: true,
                                titleCollapse: true,
                                xtype: 'SearchPanel'
                            },
                            {
                                region: 'center',
                                xtype: 'DesktopPanel'
                            },
                            {
                                region: 'east',
                                margins: '0 5 0 5',
                                width: 200,
                                collapsible: true,
                                titleCollapse: true,
                                collapsed: true
                            },
                            {
                                region: 'south',
                                margins: '0 5 5 5',
                                flex: .3,
                                split: true
                            }
                        ]
                }
            );

            this.callParent(arguments);
        }
    }
); 
```

搜索面板

```
Ext.require('Client.view.SearchForm');
Ext.require('Client.view.SearchDataView');
Ext.require('Client.view.AddTrashForm');

Ext.define('Client.view.SearchPanel',
    {
        extend: 'Ext.panel.Panel',
        alias: 'widget.SearchPanel',
        config:
            {                
                items:
                    [
                        {
                            xtype: 'SearchForm'
                        },
                        {
                            xtype: 'SearchDataView'
                        },
                        {
                            xtype: 'AddTrashForm'
                        }

                    ]

            },
        cls: 'searchpanel'
    }
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:04:04.090

我将布局配置添加到 SearchPanel，然后拖动开始工作：

```
layout:
    {
        type: 'vbox',
        align: 'stretch'
    } 
```

它改变了我的一些布局，所以我现在必须调整 css，但拖动是有效的。

# url - Struts2- URL 标记 - 隐藏查询字符串

> ID：14949555
> 
> 赞同：5
> 
> 时间：2013-02-19T03:53:10.587
> 
> 标签：url, struts2, tags

在对 stackoverflow 进行大量研究之后，我发布了这个问题，因为我找不到该问题的解决方案。

需求场景：根据每个客户 ID 作为参数，从客户列表中更新客户。

尝试的解决方案：根据从 jsp 收到的客户 ID，将其作为 Struts2 url 标签传递给 Action。

面临的问题 - URL 上可见的查询字符串。
[http://foo.com/Struts2Example/getCustomerAction?customerId=2](http://foo.com/Struts2Example/getCustomerAction?customerId=2)

问题 ：

1.  如果我们使用struts Url标签，我们可以不隐藏查询字符串吗？
2.  如果我们在使用 Url 标签时无法隐藏 using 查询字符串？上述情况的替代方案是什么。

下面是 struts.xml、jsp 和操作的代码 -

```
<h2>All Customers Details</h2>

<s:if test="customerList.size() > 0">
    <table border="1px" cellpadding="8px">
        <tr>
            <th>Customer Id</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Age</th>
            <th>Created Date</th>
        </tr>
        <s:iterator value="customerList" status="userStatus">
            <tr>
                <td><s:url var="editCustomer" action="getCustomerAction">
                        <s:param name="customerId" value="%{customerId}" />
                    </s:url>

                    <p>
                        <s:a href="%{editCustomer}">
                            <s:property value="customerId" />
                        </s:a>
                    </p></td>

                <td><s:property value="firstname" /></td>
                <td><s:property value="lastname" /></td>
                <td><s:property value="age" /></td>
                <td><s:date name="createdDate" format="dd/MM/yyyy" /></td>
            </tr>
        </s:iterator>
    </table>
</s:if>
<br />
<br /> 
```

struts.xml-

```
<!-- Get Customer Details - To Pre-Populate the form to update a Customer -->
    <action name="getCustomerAction" method="getCustomerById"
        class="com.hcl.customer.action.CustomerAction">
        <result name="success">pages/customerForm.jsp </result>
    </action> 
```

客户行动类-

```
public class CustomerAction extends ActionSupport implements ModelDriven {

Logger logger = Logger.getLogger(CustomerAction.class);

Customer customer = new Customer();

List<Customer> customerList = new ArrayList<Customer>();
CustomerDAO customerDAO = new CustomerDAOImpl();

public Customer getCustomer() {
    return customer;
}

//Set Customer onto Value Stack
public void setCustomer(Customer customer) {
    this.customer = customer;
}

public List<Customer> getCustomerList() {
    return customerList;
}

//Set Customer List onto Value Stack
public void setCustomerList(List<Customer> customerList) {
    this.customerList = customerList;
}

public String execute() throws Exception {
    return SUCCESS;
}

public Object getModel() {
    return customer;
}

// Edit customer details, it will retrieve the records based on customerId
//SkipValidation is used to skip the validate()
@SkipValidation
public String getCustomerById() {

    logger.info("** Customer Id to edit ** " + customer.getCustomerId());

    customer = customerDAO.customerById(customer.getCustomerId());

    return SUCCESS;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:38:29.677

一些无序的考虑：

*   使用不同的Action（仅使用execute方法），或同一Action的不同方法，执行不同的“动作”；
*   每个 Action/Method 的名称应该与执行的操作相匹配并且不言自明，例如您应该有一个**编辑**客户的方法（或 Action）`editCustomer`和一个**获取**客户的方法（或 Action）；**`getCustomer`**
*****   GET HTTP 方法应该用于读取数据，而 POST HTTP 方法应该用于发送数据；理想情况下，每个非读取操作*都应*通过 POST 执行；使用 GET 发送数据是 20 年前诞生并且从未消亡的老坏习惯：/ 使用 POST 的原因是隐藏 URL、更高的负载能力、发送二进制数据的能力等...****

 ****也就是说，一个类似的 URL`http://foo.com/Struts2Example/getCustomerAction?customerId=2`应该是可见的（例如，要添加书签），并且理想情况下应该是美化的（REST 风格，如 StackOverflow）：类似于`http://foo.com/Struts2Example/Customer/2/`

像这样的 URL`http://foo.com/Struts2Example/editCustomerAction?customerId=2`不起作用，因为您没有传递任何其他参数；您知道要编辑的客户的 ID，但不知道要更改的数据......它会变成这样： `http://foo.com/Struts2Example/editCustomerAction?customerId=2&name=foo&lastname=bar&age=42`，这会起作用，但正如所说（以及在您的问题中提出的）应该被隐藏，并通过 POST 处理。

如果您在`source`页面的`ID`s 中打印，则不需要向用户隐藏它们；

**你需要做的是确保用户不能`ID`在你指定的范围之外改变s；** 如果您在页面中绘制了客户列表，则`ID {1,2,3}`必须阻止用户更改 ID 并尝试使用`ID = 4`...更新客户的任何尝试，为了实现这一点，只需`session`在填充页面之前存储 ID 列表，并且`ID`根据您的列表检查页面返回的s。如果不匹配，则阻止恶意操作。

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T04:20:31.030

另一种方法是加密用户 ID 并将其发送回 HTML 页面。在客户端维护映射。当您提交请求时，POST 加密值。解密/加密逻辑将在服务器端。这将增加系统开销，但与安全性相比，这是一个足够体面的性能折衷。另请查看@jcryption.org/info，它在 MIT 和 GPL 许可证下。

一个更简单的解决方案是将其转换为“POST”操作，以便在 HTTP 请求正文中传递值。如果它通过 HTTPS ，它将被加密但是您仍然可以使用 Google Developer Tools 或 IE9 开发人员模式进行用户 ID 查找****

# azure - Azure 云实例上的共享 Umbraco 媒体文件夹

> ID：14949572
> 
> 赞同：2
> 
> 时间：2013-02-19T03:55:32.033
> 
> 标签：azure, umbraco, azure-storage, azure-web-roles

我刚刚在 Azure 云实例中实现了 Umbraco。我能够迁移我现有的 SQL 数据库以在 SQL Azure 上运行，并且一切运行良好，除了媒体文件夹中的图像和文档。

默认情况下，媒体文件夹位于 [siteroot]/Media。

有没有办法将此文件夹映射到天蓝色存储？如果不是，我认为我无法扩展我的云实例，因为图像依赖于虚拟服务器的本地存储。

**编辑：赏金开始**

我到目前为止是这样的：

*   定义一个独立的 Web 角色，它将保存媒体目录和所有文件。
*   将此文件夹映射到具有 Cloud Drive 的 Azure Blobg 存储服务，以最大程度地降低丢失数据和依赖单点存储的风险。
*   不知何故（这是我不知道如何完成的部分）在所有正在运行的实例上保持 [siteRoot]/media 的所有文件夹与此共享驱动器同步。

我在这里看到了 Umbraco 的 Azure Accelerator 项目采用了类似的方法：http: [//azureaccelerators.codeplex.com/releases](http://azureaccelerators.codeplex.com/releases)

但他们自 2011 年以来没有更新该版本，我不确定它是否适用于当前版本的 Azure。

**编辑2：**

Umbraco 有自己的加速器，但他们已弃用它，转而使用网站而不是 Web 角色： [https ://github.com/Microsoft-DPE/wa-accelerator-umbraco](https://github.com/Microsoft-DPE/wa-accelerator-umbraco)

此版本适用于 1.6 SDK。当前版本是 1.8 我相信...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:57:41.497

我不确定将路径映射到存储的方法，但根据您使用的 Umbraco 版本，我认为从 4.9（可能是 4.10）开始，他们引入`FileSystemProviders`的配置可能有助于解决您的问题。

我对它的理解是，它允许您`Umbraco.Core.IO.PhysicalFileSystem`用您自己的自定义实现替换默认的 Umbraco FileSystemProvider。我很确定您可以实现一个基于 Azure 的提供程序，该提供程序可以从 blob 存储中写入和读取。在源代码中，它看起来*相当*简单，只需实现它们的`IFileSystem`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T16:17:39.223

最终使用了 Matt Brailsford 的 Universal Media Picker 解决方案：http: [//our.umbraco.org/projects/backoffice-extensions/universal-media-picker](http://our.umbraco.org/projects/backoffice-extensions/universal-media-picker)

最终的解决方案实际上绕过了 Umbraco Media Folder，直接从 Blob Storage 读取，所以我不得不重写之前渲染图像的所有宏和模板，并将它们直接指向 Blob Storage 帐户

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T08:00:22.327

不幸的是，没有办法将 NTFS 目录直接映射到 BlobStorage。

查看 Windows Azure SDK 的[CloudDrive](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28MICROSOFT.WINDOWSAZURE.STORAGECLIENT.CLOUDDRIVE%29;k%28SOLUTIONITEMSPROJECT%29;k%28SOLUTIONITEMSPROJECT%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-CSHARP%29&rd=true "云盘")类。此功能允许您将虚拟硬盘文件（.vhd 文件）上传到 Blob 存储中，并将其作为本地驱动器装载到 Windows Azure 实例中。

您应该知道（如果您使用多个实例）只有一个云实例可以在读/写模式下挂载 VHD。其余的只有驱动器的读取权限。如果“媒体”文件夹存储您仅手动更新几次的静态内容，这没关系。但是，如果用户内容也放置在那里，您可能只希望一个实例装载 VHD 并通过网络共享授予其他实例对其的访问权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-11T09:30:41.253

Ali Sheikh Taheri 提供的这个包解决了媒体文件夹的问题 [http://our.umbraco.org/projects/backoffice-extensions/ast-azure-media-sync](http://our.umbraco.org/projects/backoffice-extensions/ast-azure-media-sync)

# windows - Windows批处理反引号中的管道

> ID：14949573
> 
> 赞同：3
> 
> 时间：2013-02-19T03:55:59.783
> 
> 标签：windows, shell, batch-file

我想看看如何在 Windows 批处理中使用或转义管道，就像在 Unix shell 中一样。假设我有这个：

```
FOR /F "usebackq delims=" %i IN (`date /t`) DO @set TODAY=%i
echo %TODAY% 
```

这将为我提供 TODAY 变量中的日期。但我想让这个 1 个或多个管道工作：

```
FOR /F "usebackq delims=" %i IN (`date /t | cut -c 1-3`) DO @set TODAY=%i 
```

cmd.exe 抱怨这样的错误我想我需要一个转义机制？

```
| was unexpected at this time. 
```

那么，这可行吗？如何？请注意，我在 PATH 中有完整的 gnu coreutils 和大多数好东西，所以我可以使用 cut 作为示例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T04:22:02.773

转义字符是`^`.

这是命令，最后`set`被替换`echo`为使其非常友好。

```
FOR /F "usebackq delims=" %i IN (`date /t ^| cut -c 1-3`) DO @echo TODAY=%i
TODAY=18/ 
```

（YMMV，我的日期是法语语言环境）

```
date /t
18/02/2013 
```

# jquery - 设置作为分配给变量的 jquery 对象的子项的所有输入的值

> ID：14949576
> 
> 赞同：0
> 
> 时间：2013-02-19T03:56:09.060
> 
> 标签：jquery

我有一个函数，我将一个 jquery 对象传递给它

```
function throwBox(div){
    if(typeof div !== 'undefined'){
        div.children(":text").val('');
    }
    div.css({'left':'-10000px'});
} 
```

我会这样称呼

```
throwBox($("#myDiv")); 
```

我似乎找不到正确的组合来使函数清除作为我的参数对象的子项的文本输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:59:02.193

这应该这样做：

```
div.find(":text").val(''); 
```

`jQuery.children`只抓取直接的孩子，同时`jQuery.find`会搜索所有的后代。您也可以将`div`其用作上下文，例如：

```
$(':text', div); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T03:59:40.250

你确定输入实际上是 div 的孩子，而不仅仅是后代？

```
function throwBox(div){
    if(typeof div !== 'undefined'){
        div.find(":text").val('');
    }
    div.css({'left':'-10000px'});
} 
```

# jquery - 如果我们在 jquery 中进行页面刷新，如何保存附加项目？

> ID：14949577
> 
> 赞同：1
> 
> 时间：2013-02-19T03:56:09.987
> 
> 标签：jquery

我想附加几行 html，如果我们刷新页面，那将保持不变

我怎么能那样做

代码是：

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
</script>
<script>
    $(document).ready(function () {
        $("#btn2").click(function () {
            $("ol").append("<li>Appended item</li>");
        });
    });
</script>
</head>
<body>
<p>This is another paragraph.</p>
<ol>
<li>List item 1</li>
<li>List item 2</li>
<li>List item 3</li>
</ol>
<button id="btn2">Append list item</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:24:08.373

使用喜欢`web storage`：`HTML5`

```
 $(document).ready(function () {
    $("#btn2").click(function () {
    $("ol").append("<li>Appended item</li>");
        if (localStorage.appendedItem)
        {
            localStorage.appendedItem+='<li>New Appended item</li>';
        }
        else
        {
            localStorage.appendedItem='<li>Appended item</li>';
        }

    });
}); 
```

该网址将帮助您更多地了解`web storage` [http://www.w3schools.com/html/html5_webstorage.asp](http://www.w3schools.com/html/html5_webstorage.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:27:50.620

您可能需要将添加的项目保存在浏览器 cookie 中，并在页面加载后再次附加这些项目。参考[jquery-cookie](https://stackoverflow.com/questions/1458724/how-to-set-unset-cookie-with-jquery)插件

[请参阅jsFiddle](http://jsfiddle.net/Xg36L/2/)中的示例以在您的情况下使用 cookie。

```
<p>This is another paragraph.</p>
<ol>
    <li>List item 1</li>
    <li>List item 2</li>
    <li>List item 3</li>
</ol>
<button id="btn2">Append list item</button>
<button id="btn3">Clear Cookies</button>
<button id="btn4">Show Cookies</button> 
```

在js中

```
$(document).ready(function () {
    $("ol").append($.cookie("listItem"));
    $("#btn2").click(function () {
        var newLi = $("<li class='new'>Appended item</li>").appendTo("ol");
        $.cookie("listItem", (($.cookie("listItem") ? $.cookie("listItem") : '') + newLi.clone().wrap('<div />').parent().html()));
    });
    $("#btn3").click(function () {{
        $("li.new ol").remove();
        $.removeCookie('listItem');
    });
    $("#btn4").click(function () 
        alert($.cookie("listItem"));
    });
}); 
```

# sql-server - SQL，如何获取事件第二次发生的年份

> ID：14949579
> 
> 赞同：1
> 
> 时间：2013-02-19T03:56:13.023
> 
> 标签：sql-server, tsql

如果我们有这样的数据：

```
Element Year
--------------
Elem1   2012
Elem1   2013
Elem1   2015
Elem2   2012
Elem2   2013
Elem3   2012 
```

当一个元素出现 2 次时，一个元素失败*，*如何使用 T-SQL 获取每个失败元素的失败年份？

```
Elem1 2013
Elem2 2013 
```

**编辑**添加斜体文本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:41:54.397

我对这个问题的理解是，对于任何给定的元素，您都希望返回日期第二低的行。这个例子有点模棱两可，因为在这两种情况下，日期都是 2013 年。如果我理解正确，应该这样做：

```
select * from table_name as t where 
    (select count(*) from table_name where element = t.element and year < t.year) = 1 
```

IE：选择具有相同元素和较低年份的行数恰好为1的每一行。

很可能有一种更有效的方法，但这应该有效。（没有 tsql 方便，但用你在 mysql 中的示例表进行了测试。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:09:29.703

这里是。

```
SELECT *
FROM test
WHERE year IN(
              SELECT year
              FROM test
              GROUP BY year
              HAVING COUNT(1) = 2 ) 
```

[Sql 小提琴](http://sqlfiddle.com/#!2/aba9a/14)

# ruby-on-rails - 将 Rails 模型保存为 JSON

> ID：14949584
> 
> 赞同：0
> 
> 时间：2013-02-19T03:56:57.880
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, controller, angularjs

这似乎是一个已经被问到的问题，但我找不到我想要的东西，所以我会继续问。

我正在尝试使用 angular.js 在我的网站上创建即时搜索功能。我希望用户能够立即搜索帖子（理想情况下是按标题和内容），所以在听说[angular 能够做到这一点](http://docs.angularjs.org/tutorial/step_04)后，我试了一下。

我的 posts.js.coffee 文件中有这样的内容：

```
@PostListCtrl = ($scope, $http) ->
  $http.get("posts.json").success (data) ->
    $scope.posts = data 
```

这在它引用的 JSON 文档中发生了（只是为了确保它正在工作——确实如此）。

```
data =
    [
    name: "Blog ex"
    content: "This is my example post."
    ,
    name: "Test posting"
    content: "A different ex post"
    ,
    name: "Test3"
    content: "This has some unusual, unique vocabulary."
    ] 
```

现在我要做的就是让 Rails 在每次创建新 Post 时在上述 JSON 文件中保存一个对象（具有名称/内容属性），以便搜索实际上运行有意义的数据。我是 Rails/JSON/计算机的新手，不知道如何做到这一点。我猜它在帖子控制器中，也许在其中一个 respond_to 块中，但如果有人能指出我这样做的正确方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:43:40.120

如果您想要的只是即时搜索或自动完成功能，则不应使用 Angular.js 或任何其他 JS MVC 框架。相反，请考虑按照@charliefl 的建议使用 jQuery，这很容易。一个简单的 Ajax 调用就可以完成。

JS MVC 框架很重，你需要从底层设计架构以适应它们。不值得这么单一的功能。

为了使这个函数在 jQuery 中工作，基本上：

1.  听搜索框上的事件，说输入一个或多个字符
2.  捕捉字符并使用 jQuery Ajax 向 Rails 中 PostsController 中的方法发送 POST 请求，例如“搜索”
3.  使此方法响应 JSON。
4.  根据服务器响应更新 DOM。

# python - 在没有模板系统的情况下安装 Pyramid（Mako 和 Chameleon）

> ID：14949586
> 
> 赞同：1
> 
> 时间：2013-02-19T03:57:03.880
> 
> 标签：python, pyramid

**在没有模板系统的情况下安装 Pyramid**是否有“好方法” ？我所说的模板系统是 Mako 和 Chameleon。**在单页应用程序 (SPA) 中，几乎不需要服务器端模板**，因为所有模板都使用 javascript 在客户端呈现。我喜欢 Pyramid 的强大功能，但模板系统在某些情况下是不必要的包袱。

我有一种感觉，完成这项任务的唯一方法是 fork Pyramid 并修改 setup.py 以删除这些依赖项。这可能会破坏事情，但话又说回来，Pyramid 的构建方式可能不关心，只要没有尝试为这些模板之一调用渲染器。谁知道？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:56:04.943

There is a project to eventually remove those templating dependancies and make them available as separate packages. The work started at last year pycon sprints and can be continued this year, who knows. OTOH having those packages installed in your venv doesn't really affect your app so just avoid using them and only use the JSON renderer or any other renderers. Instead of forking Pyramid and removing those dependancies in setup.py I propose you to join us and work on the removal project so we can all benefit the same features.

# android - FTS3 和 FTS4 匹配 :、- 和 _ 字符

> ID：14949599
> 
> 赞同：4
> 
> 时间：2013-02-19T03:58:12.357
> 
> 标签：android, sqlite, full-text-search, match

我在启用 FTS 的 SQLite 数据库上看到一些奇怪的行为。我有一个名为的表`fingerprints`，其中包含一个名为`scan`. 扫描条目是长字符串，如下所示：

```
00:13:10:d5:69:88_-58;0c:85:25:68:b4:30_-75;0c:85:25:68:b4:34_-76;0c:85:25:68:b4:33_-76;0c:85:25:68:b4:31_-76;0c:85:25:68:b4:35_-76;00:23:eb:ad:f6:00_-87; etc 
```

它代表 MAC 地址和信号强度。现在我想在表上进行字符串匹配并尝试匹配例如 MAC 地址：

```
SELECT _id FROM fingerprints WHERE scan MATCH "00:13:10:d5:69:88"; 
```

由于某种原因，这会返回许多没有指定字符串的行。我要尝试匹配的第二件事是

```
SELECT _id FROM fingerprints WHERE scan MATCH "00:13:10:d5:69:88_-58"; 
```

这将返回与以前相同的行，并且是完全错误的。

SQLite 是否`: _ -`以任何特殊方式处理字符？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T04:14:45.270

您所看到的是 FTS[对您的数据](http://www.sqlite.org/fts3.html#tokenizer)进行标记的效果。

全文搜索不适用于未处理的长字符串，它将您的数据（和您的搜索词）拆分为单词并单独索引它们。默认分词器使用所有字母数字字符和代码点 >128 的所有字符作为单词，并使用其余字符（例如，如您所见`: _ -`）作为单词边界。

换句话说，您的搜索`00:13:10:d5:69:88`将搜索包含单词`00`and`13`和`10`and`d5`以及`69`and`88`的*行*。

您可以验证此行为；

```
sqlite> CREATE VIRTUAL TABLE simple USING fts3(tokenize=simple);
sqlite> INSERT INTO simple VALUES('00:13:10:d5:69:88');
sqlite> SELECT * FROM simple WHERE simple MATCH '69:10';

-> 00:13:10:d5:69:88 
```

编辑：显然 SQLite 比我最初认为的要聪明，您可以使用[短语查询（从链接目标向下滚动页面）](http://www.sqlite.org/draft/fts3.html#section_3)来查找单词序列，这将解决您的问题。通过用双引号 (") 将空格（或其他单词分隔符）分隔的术语序列括起来来指定短语查询。

```
sqlite> SELECT * FROM simple WHERE simple MATCH '"69:10"';

-> No match

sqlite> SELECT * FROM simple WHERE simple MATCH '"69 88"';

-> 00:13:10:d5:69:88

sqlite> SELECT * FROM simple WHERE simple MATCH '"69:88"';

-> 00:13:10:d5:69:88 
```

# r - 将大矩阵导出到雪簇时 R 崩溃

> ID：14949600
> 
> 赞同：0
> 
> 时间：2013-02-19T03:58:16.520
> 
> 标签：r, snow, r-bigmemory

这里有没有人成功地将大矩阵导出到 R 中的雪团？bigmatrix 和 attach.resource 示例中的注释行说可以这样做，但我没有成功。

```
library(bigmemory)
library(snow)
z <- big.matrix(3, 3, type='integer', init=3)
cl = makeCluster(8, type = "SOCK")
clusterEvalQ(cl,{library(bigmemory)})
zdescription <- describe(z)
clusterExport(cl,"zdescription")
clusterEvalQ(cl,{y <- attach.resource(zdescription)}) #attach.big.matrix also crashes 
```

即使我使用文件支持的大矩阵它也会崩溃（这很奇怪，因为它甚至不使用共享内存）

```
[[1]]
Warning: This is not advised.  Here is the head of the matrix:

 *** caught segfault ***
address 0x10, cause 'memory not mapped'

Traceback:
 1: .Call("CGetNrow", x@address)
 2: nrow(x)
 3: nrow(x)
 4: .local(x, ...)
 5: head(x)
 6: head(x)

Possible actions:
1: abort (with core dump, if enabled)
2: normal R exit
3: exit R without saving workspace
4: exit R saving workspace 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T04:28:38.213

我终于发现了问题。看起来问题出在打印结果时：

如果`obj`是一个 big.matrix，那么`big.clusterEvalQ(cl,{obj})`会报错。

所以解决问题的一种方法是在 attach.resource 函数之后简单地添加一个常量：

```
clusterEvalQ(cl,{y <- attach.resource(zdescription);1}) 
```

# javascript - jquery 设置输入 val() 并返回父 html() 得到空输入？

> ID：14949603
> 
> 赞同：0
> 
> 时间：2013-02-19T03:58:21.243
> 
> 标签：javascript, jquery

我做了一个函数来输入一些字段并返回要显示的html：

```
function get_goodinput(GoodsSn, InCount, SellCount, Barcode, SinglePrice, BatchNo) {
    var $c = $('#t_addgoods_table').clone();
    $c.children("form").attr("id", "addgoods_form"); //id="t_addgoods_table"

    var $f = $c.children("form");

    $f.find("input[name='BatchNo']").val(BatchNo);
    $f.find("input[name='SinglePrice']").val(SinglePrice);
    $f.find("input[name='Barcode']").val(Barcode);
    $f.find("input[name='SellCount']").val("sssssssssssssssssssssss");
    alert($f.find("input[name='SellCount']").val());
    //this step can get the val..

    $f.find("input[name='InCount']").val(InCount);
    $f.find("select[name='GoodsSn']").val(GoodsSn);

    return $c.html();
} 
```

并显示在[metroUI 对话框中](http://metroui.org.ua/dialog.php)

```
$('#addgoods').click(function (e) {
    $.Dialog({
        'title' : '添加商品',
        'content' : get_goodinput("aaa", "aaa", "", "12", "12312", "aaaaa"),
        'draggable' : true,
        'buttonsAlign' : 'right',
        'closeButton' : true,
        'position' : {
            'zone' : 'center',
            'offsetY' : 100
        },
        'buttons' : {
            '确定' : {
                'action' : function () { 
```

但我总是得到空输入......为什么？

![在此处输入图像描述](../Images/57c3041b8b2f0bc16af24e05893b5b30.png)

HTML 代码：

![在此处输入图像描述](../Images/317062fffcec6b52768e98c2a32172f5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:14:37.927

form 不能是 table 的子元素，只有 like 元素`tr,tbody,thead,tfoot`可以是子元素。

如果表格在表格内，则它必须在 a 中，`TD`以便您可以使用`find()`而不是`children()`

您也可能有无效的 html 进入对话框，因为您将表格的内部 html 而不是整个表格放入非表格元素中。`html()`方法采用元素的 innerHtml。

您可以将表格包装在 DIV 中并完全插入表格：

```
return $('<div>').append( $c ).html(); 
```

# python - Django 教程自定义管理模板

> ID：14949605
> 
> 赞同：3
> 
> 时间：2013-02-19T03:58:37.927
> 
> 标签：python, django

我正在学习官方的 Django 教程。在第二[部分](https://docs.djangoproject.com/en/dev/intro/tutorial02/)结束时，他们让您稍微自定义管理模板（更改一些标题文本）。我认为我做的一切都是正确的，但显然我没有，因为在运行 syncdb 并重新启动服务器后管理站点看起来完全一样。我的项目目录（不包括 virtualenv 部分）如下所示：

```
mysite
├── manage.py
├── mysite
│   ├── __init__.py
│   ├── __init__.pyc
│   ├── settings.py
│   ├── settings.pyc
│   ├── urls.py
│   ├── urls.pyc
│   ├── wsgi.py
│   └── wsgi.pyc
├── polls
│   ├── admin.py
│   ├── admin.pyc
│   ├── __init__.py
│   ├── __init__.pyc
│   ├── models.py
│   ├── models.pyc
│   ├── tests.py
│   └── views.py
└── templates
    └── admin
        └── base_site.html 
```

在 settings.py 我添加了这些行以使项目使用模板/管理中的模板：

```
import os
PROJECT_PATH = os.path.realpath(os.path.dirname(__file__)) 
```

之后：

```
TEMPLATE_DIRS = (os.path.join(PROJECT_PATH, 'templates'),) 
```

`PROJECT_PATH`在将值分配给and时，我尝试了几种斜杠和变体的组合`TEMPLATE_DIRS`，但没有任何效果。每次我验证它实际上是在制作一个文件路径字符串（使用一个简单的打印语句）。

为了尝试查看发生了什么，我编辑了原始的 Django base_site.html 它的管理文件夹并更改了我的站点，因此它显然仍在使用它。我已经阅读了几篇 SO 帖子，我真的不知道该怎么办了。

哦，如果相关的话：Python 2.7.3 和 Django 1.4.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T04:10:47.033

我要尝试的第一件事是删除您的 *.pyc 文件，它们通常包含陈旧信息，有时会导致此类问题。

如果不是这种情况，我会仔细检查您`PROJECT_PATH`的问题，我认为这是这里的问题。

`dirname`获取包含目录。因此，如果该行位于 settings.py 中，它将返回`/path/to/inner/mysite` 主 mysite 内的行，并且由于您的内部没有`templates`目录，`mysite`因此它将无法工作。

你需要做的是这个。

```
PROJECT_PATH = os.path.realpath(os.path.dirname(os.path.dirname(__file__))) 
```

当与模板结合使用时，它将返回外部`mysite`路径，它将返回正确的路径。

然后一切都应该工作。

# cuda - CUDA：如何移动数组元素

> ID：14949606
> 
> 赞同：1
> 
> 时间：2013-02-19T03:58:44.620
> 
> 标签：cuda

我需要将一维数组的前 k 个元素中的每一个移动一个偏移量，其中偏移量是单调递增的，即如果元素 i 的偏移量是 offset1，则元素 i+1 具有偏移量 offset2，它满足：offset2 >= 偏移量1。

我编写了一个在前 k 个元素上执行的内核：

```
if (thread_id < k) {

  // compute offset

  if (offset) {
    int temp = a[thread_id];

    __synchthreads();

    a[thread_id + offset] = temp;
  }
} 
```

然而，当测试 k = 3 时，偏移量确实是单调增加的，即 0、1、1。元素 0 保持在预期的位置。但是，元素 1 不仅被复制到元素 2（根据元素 1 的偏移量），还被复制到元素 3。

也就是说，似乎只有在线程 1 完成元素 1 到元素 2 的复制之后，线程 2 才读取元素 2 并将其存储到它的 temp 副本中。

我做错了什么以及如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T10:58:23.073

您正在做的事情概括为分散操作：

```
thread   0  1  2  3  4
in  =  { 1, 4, 3, 2, 5}
idx =  { 1, 2, 3, 4, 0}

out[idx] = in[i] 
```

一般来说，分散不能并行就地完成，因为线程从其他线程写入的位置读取。在我们的示例中，如果线程 2在线程 1 写入其输出位置*之后*读取其输入位置，则会得到不正确的结果。这是一个竞争条件，需要同步或异地存储。

由于在这种情况下，大型数组的同步是全局同步，CUDA 编程模型不支持，因此您必须使用异地分散。

换句话说，你不能这样做：

```
temp = in[thread_idx]
global-sync
in[thread_idx + offset] = temp 
```

你必须这样做：

```
out[i + offset] = in[thread_idx] 
```

Where`out`不指向与 . 相同的内存`in`。

# protobuf-net - 当 Stream 可能不包含完整对象时如何 TryDeserializeWithLengthPrefix

> ID：14949607
> 
> 赞同：1
> 
> 时间：2013-02-19T03:58:47.657
> 
> 标签：protobuf-net

我正在为我们的应用程序开发一个新的缓冲处理器，并且重新审视了 Protobuf`Deserialize*`方法并使用以下代码进行了调查，在我以前的版本中，我在前面有自己的 TypeIdentifier 和 LengthPrefix，然后保证我有一个反序列化的完整块。为了测试，我已经用重复调用从写入磁盘的文件中读取随机长度块替换了对 networkStream 的读取`SerializeWithLengthPrefix()`

但是当我遍历 mDatabuffer 时，我会`EndOfStreamException`被抛出。这没什么大不了的，只是想确保我正确地执行了此操作，因为不能保证我将拥有一个“完整”的数据块来通过 Deserialize 调用完美地处理。我最初是在做 TryReadLengthPrefix，但这看起来更干净。

```
Public Sub New(ByVal maximumPacketSize As Integer)
    mMaxSize = maximumPacketSize
    mDataBuffer = New MemoryStream()
    mTypeResolver = AddressOf PacketTypeResolver
End Sub

Public Sub ProcessBuffer(ByVal theData() As Byte, offset As Integer, 
                         ByVal bytesToRead As Integer)
    'append the data we have just received into our StreamBuffer so we can 
    '"move back" if we hit the end of stream whilst Deserializing
    mDataBuffer.Seek(0, SeekOrigin.End)
    mDataBuffer.Write(theData, offset, bytesToRead)
    mDataBuffer.Seek(0, SeekOrigin.Begin)

    While mDataBuffer.Position < mDataBuffer.Length
        Dim currentPosition As Integer = CType(mDataBuffer.Position, Integer)
        Try
            Dim p As Object = Nothing
            If Serializer.NonGeneric.TryDeserializeWithLengthPrefix(mDataBuffer, 
                          PrefixStyle.Base128, mTypeResolver, p) Then
                If GetType(BasePacket).IsAssignableFrom(p.GetType) Then
                    Dim bufferedPacket As BasePacket = CType(p, BasePacket)
                    ''''Do stuff with the packet.
                End If
            End If
        Catch ex As EndOfStreamException
            Dim tmpData As New MemoryStream()
            tmpData.Write(mDataBuffer.GetBuffer(), currentPosition, 
                          CType(mDataBuffer.Length - currentPosition, Integer))
            mDataBuffer.Dispose()
            mDataBuffer = tmpData
            Exit While
        Catch ex As Exception
            Debug.Print(ex.GetType.Name & "---" & ex.Message)
            Throw
        End Try
    End While
End Sub 
```

（旁白）为了学习，我想知道不捕获内部异常的 API 设计决定`TryDeserializeWithLengthPrefix`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:03:15.400

`Try`in不是“如果出现问题，`TryDeserializeWithLengthPrefix`尝试默默地放弃”，它是：“尝试从流中获取另一个对象，但如果我们在自然位置（对象之间）有一个 EOF，则返回 false”。如果数据非空但不完整或无效：它仍然会告诉您。高声。

如果您正在读取数据并且不知道您是否有一个完整的对象，那么我会说：

*   编写自己的成帧协议，或
*   用于`TryReadLengthPrefix`计算所需的长度，并缓冲那么多数据

# excel - 使用 BIFF 的 excel 是否有任何行限制？

> ID：14949614
> 
> 赞同：0
> 
> 时间：2013-02-19T03:59:38.173
> 
> 标签：excel, export-to-excel, biff

我有一个代码可以使用 BIFF4 将我的数据网格导出到 Excel 中。问题是它不能接受超过 65536 的行。我认为这是因为行索引是 word 并且它是 2 个字节。有什么办法可以写超过可用行数？任何解决方法都是可能的？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:04:49.870

如果您必须使用 BIFF，最好的办法是将数据拆分为多个工作表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-16T00:26:32.563

在 Excel 97-2003 中，行限制为每张纸 65535。它应该是默认的 BIFF 行限制。

# spring - 切入点内的 SPRING AOP 未针对 bean 的 set 方法进行处理

> ID：14949620
> 
> 赞同：0
> 
> 时间：2013-02-19T04:00:21.233
> 
> 标签：spring, spring-aop

简而言之：

a) spring.xml

```
<aop:aspectj-autoproxy />

<bean id="circle" class="org.tutorial.spring.model.Circle">
    <property name="name" value="Circle name" />
</bean>

<bean id="triangle" class="org.tutorial.spring.model.Triangle">
    <property name="name" value="Triangle name" />
</bean>

<bean id="shapeService" class="org.tutorial.spring.service.ShapeService" autowire="byName" />

<bean class=" org.tutorial.spring.aspect.LoggingAspect" /> 
```

b) ShapeService 类

```
package org.tutorial.spring.service;

import org.tutorial.spring.model.Circle;

public class ShapeService {

private Triangle triangle;
private Circle circle;

public Triangle getTriangle() {
    return triangle;
}

public void setTriangle(Triangle triangle) {
    this.triangle = triangle;
}

public Circle getCircle() {
    return circle;
}

public void setCircle(Circle circle) {
    this.circle = circle;
}

} 
```

c) 圆类

```
package org.tutorial.spring.model;

public class Circle {

private String name;

public String getName() {
    System.out.println("Circle getName");
    return name;
}

public void setName(String name) {
    System.out.println("Circle setName");
    this.name = name;
}

} 
```

d) LoggingAspect 类

```
@Aspect
public class LoggingAspect {

@Before("allCircleMethods()")
public void securityAdvice() {
    System.out.println("Security Advice is executed!");
}

@Pointcut("within(org.tutorial.spring.model.Circle)")
public void allCircleMethods() {
}

} 
```

e) ShapeAOP 类（要运行的主类）

```
public class ShapeAOP {

public static void main(String[] args) {
    ApplicationContext ctx = new ClassPathXmlApplicationContext("spring.xml");
    ShapeService shapeService = ctx.getBean("shapeService", ShapeService.class);
    System.out.println(shapeService.getCircle().getName());
}

} 
```

输出：

Circle setName
安全提示已执行！
Circle getName
圈子名称

请注意，在 Circle bean 实例化期间，在“Circle setName”之前没有“Security Advice is executed”的输出。

为什么 Circle 类中的切入点没有应用于 Circle setName 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:58:17.043

用户pap在评论区回答了我的问题

# c# - 类构造函数默认是无效的吗？

> ID：14949621
> 
> 赞同：2
> 
> 时间：2013-02-19T04:00:22.393
> 
> 标签：c#, void, class-constructors

我一直在阅读 C# 中的类构造函数。示例显示了重载的类构造函数。而且它们都没有`void`关键字，也没有返回值..

例如

```
public Class myClass
{
  public myClass()
  {

  }

  public myClass(int id)
  {

  }
//other class memeber go here...
} 
```

1) 那么说 C# 构造函数`void`默认是正确的吗？

2）这同样适用于Java吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T04:02:20.257

不，它们是构造函数，如果有的话，您可以将它们视为返回它们所在类的对象。但是，它们不是正常的方法/功能

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T04:03:57.613

没有构造函数隐式返回与 java 相同的类类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T04:12:46.597

构造函数没有返回类型，也不返回任何东西，它不是方法。从 C# 语言规范 4.0 开始：

> 实例构造函数是实现初始化类实例所需操作的成员。实例构造函数是使用构造函数声明来声明的。

*属性 opt 构造器修饰符 opt 构造器声明器 构造器主体*

> 构造函数被声明为没有返回类型且与包含类同名的方法

这里没有返回类型。

构造函数是通过`new`运算符调用的，它是返回对象实例的运算符。

# java - 如何检查密码是否超过一年？

> ID：14949627
> 
> 赞同：1
> 
> 时间：2013-02-19T04:01:39.480
> 
> 标签：java, mysql, jsp, servlets

我正在尝试在 MVC 中使用 JSP 开发用户登录/注册。该程序将为用户进行简单的登录、创建和更新。在模型部分，我应该根据以下标准返回 0、1、2、3。

0 如果用户验证成功 1 如果用户验证成功但密码较弱 2 如果用户验证成功但密码过期（超过 1 年） 3 如果用户未验证

这是我到目前为止所做的验证方法的代码，

```
public int Validate() {

        try {
            Class.forName(driverName).newInstance();
        } catch (InstantiationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {

            Connection connection = DriverManager.getConnection(dbURL,
                    username, password);

            String verifyQuery = "SELECT COUNT(email), dateSet, strength FROM users WHERE email=? AND hashPassword=SHA2(CONCAT(?, salt), 256)";
            PreparedStatement verify = connection.prepareStatement(verifyQuery);

            verify.setString(1, email);
            verify.setString(2, pass);
            ResultSet verified = verify.executeQuery();
            while (verified.next()) {
                if (verified.getInt(1) == 1) {
                    email_db = verified.getString(2);
                    pass_db = verified.getString(3);
                    date = verified.getDate(5);
                    strength = verified.getString(6);

                }
            }

        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        if (email_db.equals(email) && pass_db.equals(pass)) {
            status = 0;
        }
        if (email_db.equals(email) && pass_db.equals(pass)
                && strength.equals("weak")) {
            status = 1;
        }
        if (email_db.equals(email) && pass_db.equals(pass) && date> ){

        }
        return status;
    } 
```

我对日期部分感到困惑，有什么建议吗？我应该为 Date 部分写一个新方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T04:32:07.817

`java.util.Calendar`使用纯 Java，您可以使用和`java.util.Date`类来实现这一点。这是一个函数的代码示例，该函数使用当前日期时间检查它是否已经过了一年

```
public boolean hasPassedAYear(Date date) {
    long currentDate = Calendar.getInstance().getTimeInMillis();
    long dateToEval = date.getTime();
    // 1000 => milliseconds to seconds
    // 60 => seconds to minutes
    // 60 => minutes to hours
    // 24 => hours to days
    long days = (currentDate - dateToEval) / (1000 * 60  * 60 * 24);
    return days >= 365;
} 
```

尽管如此，如果你想要一个好的代码（像每个人一样），你应该使用提供更好的日期/时间处理的[Joda Time 。](http://joda-time.sourceforge.net/)这将是相同的功能，但使用 Joda 时间库：

```
public boolean hasPassedAYear(Date date) {
    DateTime currentDate = new DateTime();
    DateTime dateToEval = new DateTime(date);
    Interval interval = new Interval(dateToEval, currentDate);
    return interval.toPeriod().getYears() >= 1;
} 
```

选择哪种方法取决于您。恕我直言，为了便于阅读、理解和维护，我会将代码与 Joda Time 一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:08:17.610

我假设您从数据库中获取的日期是密码创建/上次修改的日期。在这种情况下，将与今天的日期进行比较以获得无效的天数？检查[这篇文章](https://stackoverflow.com/questions/14337649/compare-two-datetime-in-android/14337727#14337727)和示例代码的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T04:16:06.200

试试下面的代码

```
java.util.Date lastDate = result.getTimestamp("date");
java.util.Date todaysDate = new java.util.Date(System.currentTimeMillis());

long days1 = lastDate.getTime()/(60*60*24*1000);
long days2 = todaysDate.getTime()/(60*60*24*1000);

long difference = days2-days1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T04:26:17.477

您可以使用此代码..

```
if (email_db.equals(email) && pass_db.equals(pass) ){

Date dt = date;//Your Date from database 
Calendar passCreatedOn = Calendar.getInstance(); 
passCreatedOn.setTime(dt);

Calendar today=Calendar.getInstance();
Integer noOfDays=( (today.getTime() - passCreatedOn.getTime()) / (1000 * 60 * 60 * 24));
if(noOfDays>365)
{
    return 2
}
} 
```

# javascript - Kinetic.js：触摸时旋转图像

> ID：14949628
> 
> 赞同：0
> 
> 时间：2013-02-19T04:01:40.697
> 
> 标签：javascript, math, animation, kineticjs

我有这个小提琴：

[http://jsfiddle.net/WDjpx/2/](http://jsfiddle.net/WDjpx/2/)

图像未正确旋转。我使用的代码是：

```
var stage = new Kinetic.Stage({
    container: 'd',
    width: 300,
    height: 300
});

var layer = new Kinetic.Layer();
var isDragging = false;
var refRotation = null;

var rect = new Kinetic.Rect({
    x: 150,
    y: 150,
    width: 100,
    height: 100,
    fill: 'green',
    stroke: 'black',
    strokeWidth: 4,
    offset: [50, 50],
    dragOnTop: true,
    draggable: true,
    dragBoundFunc: function (pos) {

        var xd = 150 - pos.x ;
        var yd = 150 - pos.y ;
        var theta = Math.atan2(yd, xd);
        var deg = theta * 180 / Math.PI;

        if (!isDragging) {
           isDragging = true;
           refRotation = deg;
        } else {
            var rotate = deg - refRotation;
            rect.setRotationDeg(deg);
        }

        return {
            x: this.getAbsolutePosition().x,
            y: this.getAbsolutePosition().y
        }
    }
}); 
```

layer.add(rect); 阶段。添加（层）；

有谁知道我的数学有什么问题？？？

# - - 编辑 - -

新的满足我想要的东西：http: [//jsfiddle.net/zk9cn/](http://jsfiddle.net/zk9cn/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:49:04.400

不知道 Math.atan2，但似乎 x 和 y 的计算不适合我。我会从中心扣除位置，而不是从位置扣除中心。 [http://jsfiddle.net/bighostkim/qZDcg/](http://jsfiddle.net/bighostkim/qZDcg/)

```
 var x = 150 - pos.x;
    var y = 150 - pos.y;
    var radian =  Math.PI + Math.atan(y/x);
    this.setRotation(radian); 
```

其他的，我也看到你的变量没有被使用；isDragging、refRotate 和旋转。

- - - 编辑 - -

如果要通过拾取角来旋转矩形，可以使用以下代码。当你捡起拐角时，中心位置计算的度数已经是45了。这就是为什么你不能正确捡起拐角的原因。通过调整45使它看起来正确，但是当你拿起直线时，它又会出错。除非是故意的，否则您的要求似乎有缺陷。 [http://jsfiddle.net/bighostkim/7Q5Hd/](http://jsfiddle.net/bighostkim/7Q5Hd/)

```
 var pos = stage.getMousePosition();
    var xd = 150 - pos.x ;
    var yd = 150 - pos.y ;
    var theta = Math.atan2(yd, xd);
    var degree = theta / (Math.PI / 180) - 45;
    this.setRotationDeg(degree); 
```

# wordpress - WordPress - 多站点 + 多种语言

> ID：14949631
> 
> 赞同：0
> 
> 时间：2013-02-19T04:01:51.577
> 
> 标签：wordpress, wordpress-theming

我们希望拥有多个 WP 网站（在各个国家/地区）。每个国家/地区的站点将具有相同的模板（标记/样式），但内容略有不同。最大的区别是每个站点将使用不同的语言。

我们应该为此使用多站点吗？如果是这样，我们如何使每个国家/地区的站点使用不同的语言？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T08:01:54.313

您可以只运行多站点，然后使用语言插件。我会推荐 wpml.org 它不是免费的，但它有很好的多站点支持。您可以在所需的子站点中轻松激活它，并在每个子站点中使用不同的语言。我最近将它用于具有 30 多个子站点的多站点，每个站点都有自己的翻译/语言集。

如果每个子站点只需要一种语言，即通过域控制，则可以只使用 wpml 并跳过多站点。因为您仍然可以使用不同的语言创建不同的菜单和页面。然后你可以告诉 wpml 监听任何一个域（.com 应该显示英文内容，.es 西班牙语等），或者你可以告诉它监听子域，即 yourwebpage.com/es/

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T23:13:23.783

You did not told if the existing answer was useful or not :-(

Still I will add a link to a good resource for others that arrive at this page: [http://codex.wordpress.org/Multilingual_WordPress](http://codex.wordpress.org/Multilingual_WordPress)

Cheers, Gabriel

# tfs - 当所有相关任务在 TFS 2012 中完成时自动将 PBI 的状态更改为完成？

> ID：14949632
> 
> 赞同：3
> 
> 时间：2013-02-19T04:01:56.920
> 
> 标签：tfs

花了一段时间试图弄清楚这一点，因为我们的旧 Scrum for Team 系统模板在以前版本的 TFS 中这样做了，但是我找不到一种方法让 PBI 在所有相关任务完成后自动将其状态更改为完成在 TFS 2012 中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-18T04:18:01.180

我还没有看到开箱即用的解决方案，但[TFS Aggregator](https://tfsaggregator.codeplex.com/)是一个旨在处理这种情况的插件。

# c# - Membership.GetUser() C# .NET

> ID：14949633
> 
> 赞同：0
> 
> 时间：2013-02-19T04:01:59.220
> 
> 标签：c#, .net, authentication

我正在尝试使用 UserName 或（最好）用户 ID 来确定登录到我的应用程序的特定用户。我的意图是根据用户限制可以上传到我的网站的内容量。每当用户尝试上传文档时，我都想检索他们当前上传的所有文档的计数。作为测试运行，我只是在我的表单中添加了一个标签，以便在编写查询之前尝试识别用户：

```
// validate user. If they are not authenticated, do not let them upload files
if (!HttpContext.Current.User.Identity.IsAuthenticated || !HttpContext.Current.User.IsInRole("Administrator"))
{
    uploadLabel.Visible = false;
    user.Text = Membership.GetUser().UserName; // this line should output the username
    mapUpload.Visible = false;
    uploadButton.Visible = false;
} 
```

我知道身份验证逻辑有效，因为登录时所有其他字段都不可见。此外，Membership.GetUser().UserName 只有在用户 IsAuthenticated 时才有值；否则，我得到一个空指针异常。如果调用了代码，则 Membership.GetUser().UserName 似乎将标签设置为空文本字符串。

是否有其他方法可以获取当前登录用户的信息？如前所述，我的最终目标是能够使用以下信息编写查询：

```
SELECT COUNT(DocumentID) FROM Documents WHERE UserID=@UserID 
```

提前感谢您的任何帮助。

比克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:08:07.450

无需使用***`MembershipUser`***事件来获取当前登录的用户我们有另一种简单的方法来获取当前登录***`username`***您只需在您的页面中定义这样

```
string userName = Page.User.Identity.Name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:07:29.957

不能换吗

`user.Text = Membership.GetUser().UserName;`

和

`user.Text= User.Identity.Name`

# meteor - Meteor.deps.Context 和无效的文档集合

> ID：14949637
> 
> 赞同：0
> 
> 时间：2013-02-19T04:02:25.277
> 
> 标签：meteor

下面两段代码有什么区别？顶部按预期工作，但底部没有。

```
// Initially outputs 0, but eventually outputs the # of players.
Meteor.autorun(function() {
  var players = Players.find();
  console.info(players.count());
});

// Outputs 0 twice. Why does this not work like the block above?
var players = Players.find();
Meteor.autorun(function() {
  console.info(players.count());
}); 
```

我正在排行榜示例中的 Meteor.isClient 块中对此进行测试。

谢谢你，安德鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T07:53:09.563

虽然 Meteor 是反应式的，但您需要在反应式上下文中进行查询，即`Meteor.autorun`. 反应式上下文是：`Template`、`Meteor.autorun`和。`Meteor.render``Meteor.renderList`

在第二种情况下`var players = Players.find();`，在 Meteor 启动时运行，并包含它在启动时查询时获得的数据。

首先，您将查询置于反应式上下文中。每当有某种数据更新时，它就会被调用并重新运行。在第二种情况下，它没有机会重新运行查询，它保留了浏览器刚刚加载页面时包含的数据。

虽然 Meteor 是响应式的，但您仍然需要在响应式上下文中重新查询数据。

# c++ - C ++相当于获取常量的地址？

> ID：14949640
> 
> 赞同：0
> 
> 时间：2013-02-19T04:02:30.493
> 
> 标签：c++, g++

我有一些用 C 编写的代码（专门针对 gcc），它们也需要编译为 C++（g++）。我遇到了一个我难以处理的结构。

许多地方使用了一些宏，它们基本上采用常量的地址，尽管它们也适用于非常量。该构造最终看起来像这样：

```
int *iptr = (&(int){5}); 
```

这本质上让发生的是指定一个常量，然后可以将指向该常量的指针用于需要 int 指针但只指定一个常量的函数中。也可以在花括号内指定多个值来构造一个实际的临时数组。而且效果很好。

问题在，g ++根本不喜欢这个，抛出

```
error: non-lvalue in unary `&' 
```

更新：看起来我可以通过执行以下操作来获取 C++ 中常量的地址：

```
const int & ref = 5; 
```

这就是我试图采取的方向的起点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:34:00.797

以下似乎适用于 C 和 C++，尽管它仅在 C++11 下编译，而不是 C++03。

```
#ifdef __cplusplus
#define A(type,x) (&(const type &)(type)x)
#define Of(...) { __VA_ARGS__ }
#else
#define A(type,x) (&(type){x})
#define Of(...) __VA_ARGS__
#endif 
```

测试代码：

```
int test(const void *ptr,int len) {
  char *str = (char *)ptr;
  int i;
  for (i=0;i<len;i++) {
    printf("%02X ",str[i]);
  }
  printf("\n");
  return 0;
}

int main() {
  test(A(int,5),4);
  test(A(x,Of(5,6)),8);

  int i=1,j=2;
  test(A(x,Of(i,j)),8);
} 
```

编辑：哎呀，不完全在那里。如果类型是指针则不起作用！

```
test(A(char *,9),4); 
```

=>

```
error: invalid cast of an rvalue expression of type 'char*' to type 'const char*&' 
```

注意：我放弃了这种方法，转而采用不同的方法（将 C 代码编译为 C 并通过 C++ 链接它），但会保留这个答案，以防它对某人有用。

# actionscript-3 - AS3 stage.Activate 和 stage.deactivate 是否适用于用户点击 iPad 主页按钮？

> ID：14949642
> 
> 赞同：1
> 
> 时间：2013-02-19T04:03:06.193
> 
> 标签：actionscript-3, air

我想检测用户点击主页按钮退出应用程序，然后返回应用程序。stage.activate 和 stage.deactivate 有效吗？

```
stage.addEventListener(Event.ACTIVATE,volRestore);
stage.addEventListener(Event.DEACTIVATE,volFade); 
```

干杯比尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T04:11:37.170

是的，这些是要监听的正确事件 - 在移动设备上，应用程序实际上不会退出，它只会在用户“关闭”它时“冻结”。

不确定您是否需要附加到 Stage - “this”应该就足够了 - 假设您的代码位于应用程序的顶层。

# javascript - ckeditor 4 使用动态创建的编辑器实例访问焦点管理器

> ID：14949643
> 
> 赞同：0
> 
> 时间：2013-02-19T04:03:15.947
> 
> 标签：javascript, jquery, focus, ckeditor, wysiwyg

我目前有 1 个编辑器在加载时始终在页面上，该页面具有通过单击添加按钮添加多个编辑器的功能。

我的代码仅适用于与页面一起加载的第一个编辑器，我如何使其适应页面上的所有编辑器，即使在页面加载后动态创建？（动态创建的编辑器）

```
$(document).ready(function(){
    $.each(CKEDITOR.instances, function(instance){
        var editor = CKEDITOR.instances[instance];
        if (editor) {
            editor.on( 'focus', function( e ) {
                $('.hint').show();
            });
            editor.on( 'blur', function( e ) {
                $('.hint').hide();
            });
        }
    });
}); 
```

**eidt 1** - 完整代码减去 html

```
$(document).ready(function(){
    $('textarea').each(function(i) {
        var editorId = $(this).attr('id');
        if(editorId != 'master'){
            if( $(this).hasClass('main') ){
                ckeditor_simple_toolbar(editorId);
            }
            if( $(this).hasClass('extras') ){
                ckeditor_advanced_toolbar(editorId);
            }
        }
    });

    $.each(CKEDITOR.instances, function(instance){
        var editor = CKEDITOR.instances[instance];
        if (editor) {
            editor.on( 'focus', function( e ) {
                $('.hint').show();
            });
            editor.on( 'blur', function( e ) {
                $('.hint').hide();
            });
        }
    });

    $('.add_extra').live('click',function(){
        ckeditor_advanced_toolbar(this.id);
    });
});

function ckeditor_simple_toolbar(textA_id){
    CKEDITOR.replace(textA_id,{
        tabSpaces           : 4
    });
}

function ckeditor_advanced_toolbar(textA_id){
    CKEDITOR.replace(textA_id,{
        emailProtection     : 'encode',
        tabSpaces           : 4,
        extraPlugins        : 'autogrow',
        height              : 100,
        autoGrow_minHeight  : 100,
        autoGrow_maxHeight  : 400,
        removePlugins       : 'resize',
        toolbarLocation     : 'bottom',
    });
} 
```

**编辑 2** 这是正在发生的事情的测试设置，焦点和模糊不适用于动态添加的编辑器

[http://elhalawa.net/editor/index.html](http://elhalawa.net/editor/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:08:41.487

刚刚添加了 on instanceReady 代码，效果很好

```
CKEDITOR.replace(textA_id,{
    emailProtection     : 'encode',
    tabSpaces           : 4,
    extraPlugins        : 'autogrow',
    height              : 100,
    autoGrow_minHeight  : 100,
    autoGrow_maxHeight  : 400,
    removePlugins       : 'resize',
    toolbarLocation     : 'bottom',

}).on("instanceReady", function (e) {
    this.on("focus", function () {

    });

    this.on("blur", function () {

    });

    this.on( 'change', function() {

    });
}); 
```

# python - Python - 从 URL 获取标头信息

> ID：14949644
> 
> 赞同：5
> 
> 时间：2013-02-19T04:03:22.210
> 
> 标签：python, python-3.x

我一直在寻找 Python 3.x 代码示例来获取 HTTP 标头信息。

像 PHP 中的 get_headers 这样简单的东西在 Python 中是不容易找到的。或者，也许我不确定如何最好地围绕它。

本质上，我想编写一些可以查看 URL 是否存在的代码

符合的东西

```
h = get_headers(url)
if(h[0] == 200)
{
   print("Bingo!")
} 
```

到目前为止，我尝试过

```
h = http.client.HTTPResponse('http://docs.python.org/') 
```

但是总是报错

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-19T04:24:27.373

[要在python-3.x](/questions/tagged/python-3.x "显示标记为“python-3.x”的问题")中获取 HTTP 响应代码，请使用该[**`urllib.request`**](http://docs.python.org/3/library/urllib.request.html)模块：

```
>>> import urllib.request
>>> response =  urllib.request.urlopen(url)
>>> response.getcode()
200
>>> if response.getcode() == 200:
...     print('Bingo')
... 
Bingo 
```

返回的[**`HTTPResponse`对象**](http://docs.python.org/3/library/http.client.html#httpresponse-objects)也将允许您访问所有标题。例如：

```
>>> response.getheader('Server')
'Apache/2.2.16 (Debian)' 
```

* * *

如果调用[`urllib.request.urlopen()`](http://docs.python.org/3/library/urllib.request.html#urllib.request.urlopen)失败，则引发 an。您可以处理此问题以获取响应代码：[**`HTTPError`**](http://docs.python.org/3/library/urllib.error.html#urllib.error.HTTPError) `Exception`

```
import urllib.request
try:
    response = urllib.request.urlopen(url)
    if response.getcode() == 200:
        print('Bingo')
    else:
        print('The response code was not 200, but: {}'.format(
            response.get_code()))
except urllib.error.HTTPError as e:
    print('''An error occurred: {}
The response code was {}'''.format(e, e.getcode())) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T04:29:57.060

## 对于 Python 2.x

这里可以使用 urllib、urllib2 或 httplib。但是请注意，urllib 和 urllib2 使用 httplib。因此，根据您是否计划多次（1000 次）执行此检查，最好使用 httplib。其他文档和示例在[此处](http://docs.python.org/2/library/httplib.html)。

示例代码：

```
import httplib
try:
    h = httplib.HTTPConnection("www.google.com")
    h.connect()
except Exception as ex:
    print "Could not connect to page." 
```

* * *

## 对于 Python 3.x

与 Python 2.x 中的 urllib（或 urllib2）和 httplib 类似的故事适用于 Python 3.x 中的 urllib2 和 http.client 库。同样，http.client 应该更快。有关更多文档和示例，请查看[此处](http://docs.python.org/3/library/http.client.html)。

示例代码：

```
import http.client

try:
    conn = http.client.HTTPConnection("www.google.com")
    conn.connect()    
except Exception as ex:
    print("Could not connect to page.") 
```

如果你想检查你需要更换的状态码

```
conn.connect() 
```

和

```
conn.request("GET", "/index.html")  # Could also use "HEAD" instead of "GET".
res = conn.getresponse()
if res.status == 200 or res.status == 302:  # Specify codes here.
    print("Page Found!") 
```

* * *

请注意，在这两个示例中，如果您想捕获与 URL 不存在时相关的特定异常，而不是所有异常，请捕获 socket.gaierror 异常（请参阅[套接字文档](http://docs.python.org/3.3/library/socket.html)）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-28T06:06:07.253

您可以使用 requests 模块来检查它：

```
import requests
url = "http://www.example.com/"
res = requests.get(url)
if res.status_code == 200:
    print("bingo") 
```

[您还可以在使用header](http://docs.python-requests.org/en/master/user/quickstart/#response-headers)下载网页的全部内容之前检查 header 内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T04:08:41.383

你可以使用 urllib2 库

```
import urllib2
if urllib2.urlopen(url).code == 200:
    print "Bingo" 
```

# loops - Excel条件格式循环

> ID：14949646
> 
> 赞同：1
> 
> 时间：2013-02-19T04:03:36.220
> 
> 标签：loops, excel, conditional-formatting, vba

我有这个代码：

```
Selection.FormatConditions.Add Type:=xlExpression, Formula1:= _
    "=IF($B5=""ARC"",1,0)"
Selection.FormatConditions(Selection.FormatConditions.Count).SetFirstPriority
With Selection.FormatConditions(1).Interior
    .PatternColorIndex = xlAutomatic
    .Color = ColorSheet.Range("ARC_Color").Interior.Color
    .TintAndShade = 0
End With
Selection.FormatConditions(1).StopIfTrue = False

Selection.FormatConditions.Add Type:=xlExpression, Formula1:= _
    "=IF($B5=""ALL"",1,0)"
Selection.FormatConditions(Selection.FormatConditions.Count).SetFirstPriority
With Selection.FormatConditions(1).Interior
    .PatternColorIndex = xlAutomatic
    .Color = ColorSheet.Range("ALL_Color").Interior.Color
    .TintAndShade = 0
End With
Selection.FormatConditions(1).StopIfTrue = False 
```

还有比这更多的块，基本上所有的变化都是条件格式条件中引用的命名范围。

```
=IF($B5=""ALL"",1,0)
ColorSheet.Range("ALL_Color").Interior.Color 
```

循环这个的最好方法是什么？所以我没有十个完全相同的代码块？

我可以更改它以从单独的工作表上的列表中读取命名范围吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T04:45:10.213

创建一个像这样的过程，在一个单独的工作表上循环一个范围，在这个例子中称为“变量”。该范围仅包含您的 10 个变化值：

编辑：根据@KillerSnail 在评论中的修复进行了修改，并添加了一个参数来传递 ColorSheet。

```
Sub LoopCF()
Dim wsVariables As Excel.Worksheet
Dim ColorSheet As Excel.Worksheet
Dim cell As Excel.Range

Set wsVariables = ThisWorkbook.Worksheets("Variables")
Set ColorSheet = ActiveSheet ' Change to suit your needs
'this range contains "All", "ARC", etc.
For Each cell In wsVariables.Range("A2:A11")
    ApplyCF cell.Value2
Next cell
End Sub 
```

然后你基本上从循环中调用你现有的代码，传递“ARC”、“ALL”和其他变量。

```
Sub ApplyCF(wsColorSheet As Excel.Worksheet, ConditionToCheck As String)

Selection.FormatConditions.Add Type:=xlExpression, Formula1:= _
    "=IF($B5=" & Chr(34) & ConditionToCheck & Chr(34) & ",1,0)"
Selection.FormatConditions(Selection.FormatConditions.Count).SetFirstPriority
With Selection.FormatConditions(1).Interior
    .PatternColorIndex = xlAutomatic
    .Color = wsColorSheet.Range(ConditionToCheck & "_Color").Interior.Color
    .TintAndShade = 0
End With
Selection.FormatConditions(1).StopIfTrue = False
End Sub 
```

# ios - GKSession 将获取后台其他设备的 peer id

> ID：14949652
> 
> 赞同：0
> 
> 时间：2013-02-19T04:04:33.437
> 
> 标签：ios, bluetooth, gksession

GKPeerPickerController 是否会显示蓝牙设备的对等 ID，该设备是处于挂起模式的特定应用程序的一部分

设想

我有一个具有特定会话 id 的 iOS 蓝牙应用程序 XYZ。相同的应用程序在具有相同会话 id 的多个设备中运行。每个设备都应在 XYZ 应用程序中显示附近设备的列表。假设应用程序已在其中一台设备中进入挂起模式。我的问题仍然是其他对等方将从处于暂停模式的 XYZ 应用程序中获取蓝牙设备的对等 ID。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:51:39.813

否： GKSession 在您的应用程序进程中的线程上运行，当您的应用程序处于后台模式时，所有线程都会暂停。这意味着当您的进程处于后台时，GKSession 不会响应任何 Bonjour 请求或网络事件回调，因为您的应用程序中的任何线程都不会占用 CPU 时间。

但是，当您的应用程序处于“非活动”模式（当用户按下手机顶部的锁定按钮，或者正在查看电话屏幕或通知抽屉时，会发生这种情况）时，GKSession 将起作用。

# heroku - git push heroku master 错误

> ID：14949653
> 
> 赞同：0
> 
> 时间：2013-02-19T04:04:37.607
> 
> 标签：heroku

我在部署 heroku 时遇到问题。在线说明建议我按照以下步骤操作：[https ://devcenter.heroku.com/articles/django#deploy-to-heroku](https://devcenter.heroku.com/articles/django#deploy-to-heroku)

但是，当我进入“git push heroku master”时，出现以下错误：

```
Counting objects: 12, done. 
Delta compression using up to 8 threads.
Compressing objects: 100% (10/10), done.
Writing objects: 100% (12/12), 3.44 KiB, done.
Total 12 (delta 1), reused 0 (delta 0)
! Heroku push rejected, no Cedar-supported app detected

To git@heroku.com:mysterious-peak-4781.git
! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:mysterious-peak-4781.git' 
```

有人可以告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-07T09:13:02.330

创建应用程序后立即重命名它。我猜这在heroku中是必须的。

使用这个命令

```
heroku apps:rename NAME 
```

**NAME** = 你想输入的任何名字。

如果上述方法不起作用，

类型

```
cd .git
vi config 
```

你会得到这样的东西。

```
[remote "heroku"]
url = git@heroku.com:NAME.git 
```

这也是一种方法。换个名字试试。

# java - 如何避免 Java 中不必要的类引用？

> ID：14949654
> 
> 赞同：0
> 
> 时间：2013-02-19T04:04:43.430
> 
> 标签：java, netbeans, lwjgl

我有两个 java 类（.java 文件）。我希望能够在一个类中创建另一个类中定义的对象的新实例，而无需每次都引用类名。在 C# 中有`#using`和包含，但我只能`import <pre-compiled code>`在 java 中使用。有没有办法做到这一点：

```
import TestClass; 
```

然后只需在其中调用一个函数**而不**使用

```
TestClass.TestFunction() 
```

每次？`Main`我只需要让我的所有函数和对象与我的类分开。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T04:07:45.493

假设`TestFunction`是一个静态方法`TestClass`，你可以使用[静态导入](http://docs.oracle.com/javase/1.5.0/docs/guide/language/static-import.html)：

```
import static TestClass.TestFunction;
// or
import static TestClass.*; 
```

然后在不使用类限定符的情况下调用它：

```
TestFunction(...); 
```

请注意，这可能会导致混淆/难以阅读的代码 -**谨慎使用静态导入。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:10:07.603

如果您使用的是 netbeans，那么在导入任何 java 类的过程中您不会发现任何问题。是的，这是真的，您只能将“预编译类”作为导入语句。如果您在记事本上运行，则需要先编译独立类，然后编译依赖类。如果您使用 Netbeans 或 Eclipse 或任何其他 IDE，那么您不必担心它们会自行管理，您只需使用正确的包和类名
您可以有两种类型的导入

```
import package1.Class1;
import static package1.Class2; 
```

使用第一个，您可以创建 Class1 的对象（或任何其他类，如果存在于 Class1 中）并调用方法
使用第二个，您可以直接调用 Class2 的静态方法，而无需使用类名引用它

**更新**
了 查看[JAVA 包的教程](http://www.java-samples.com/showtutorial.php?tutorialid=291)

# visual-studio-2010 - Crystal Reports 图表未在 Visual Studio 2010 中显示

> ID：14949659
> 
> 赞同：1
> 
> 时间：2013-02-19T04:05:56.127
> 
> 标签：visual-studio-2010, crystal-reports-2010

我有一个带有水晶报表版本 13 的项目，我正在作为 MVC 3 .NET 应用程序的一部分运行。我们有 4 个可以正常工作的现有详细报告。

问题是我需要创建一个包含图表的新报表，并且我无法在运行时显示图表，尽管它们在设计时会显示正常。这是在 Visual Studio 中本地运行的（不在 iis 中）。

问题似乎是因为水晶报告会动态生成一个名为 crystalimagehandler.aspx 的文件，并且无论出于何种原因，这都不会在我的计算机上生成当我在生成报告时运行进程监视器时，它会产生以下输出：

> 上午 10:01:40.1814627 WebDev.WebServer40.exe 1692 QueryOpen D:\tfs\chad\Main>\Src\chad\Chad.Website\Reports\CrystalImageHandler.aspx 未找到名称

我已将以下几行添加到我的 web.config

```
 <httpHandlers>
          <add verb="GET" path="CrystalImageHandler.aspx"             type="CrystalDecisions.Web.CrystalImageHandler, CrystalDecisions.Web, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"/>
        </httpHandlers> 
```

（在 system.webServer 中）

```
 <handlers>
          <add name="CrystalImageHandler.aspx_GET" path="CrystalImageHandler.aspx" verb="GET" type="CrystalDecisions.Web.CrystalImageHandler, CrystalDecisions.Web, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304" preCondition="integratedMode" />
        </handlers> 
```

有没有人有任何其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:41:09.947

问题是因为这是一个 MVC 应用程序，我不得不告诉它忽略到报告文件夹的路由。我在这个线程中找到了解决方案[Embedded images not display in MVC application](http://scn.sap.com/thread/1878227)

我添加了这一行：

```
 routes.IgnoreRoute("Reports/{*restOfUrl}"); 
```

到我的 Global.asax，就成功了。

请注意，添加 httpHandler 的 web.config 设置也是让图像显示的必要前提条件。

# git - 使用公共私钥的 Git 克隆

> ID：14949661
> 
> 赞同：2
> 
> 时间：2013-02-19T04:06:06.483
> 
> 标签：git, github, private-key, public-key, git-clone

我一直在尝试使用公钥和私钥进行身份验证而不是密码来克隆 git 存储库。我在 Windows 上使用 puttygen 生成了我的密钥。我无法从 windows 或 linux 登录。我不断收到以下错误：

> git clone [git repo 目录]
> 
> 克隆成论文...
> 
> 输入密钥“/.ssh/id_dsa”的密码：
> 
> 权限被拒绝（公钥）。

我首先使用密码创建了我的私钥，但是在我重新保存了没有密码的私钥（使用 puttygen）但它仍然不起作用之后，这不起作用。

我该如何解决这个问题？我一直在努力解决它很长时间，但现在完全被卡住了。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T07:27:08.607

1.  您必须知道两件事：可以创建的私钥是 putty 和 openssh 兼容的格式 - 这些格式不能自由交换（客户端工具只能理解 putty**或**openssh），Linux 只能理解 openssh 类型的密钥
2.  您必须在客户端（附加）工具上使用，该工具可根据请求通过密钥提供非交互式身份验证

**第 1 点和第 2 点的结果**

**Windows 客户端**：运行选美比赛，将 putty 的私钥加载到其中（输入密码短语作为密钥）。*也许*你必须在 Git 中重新定义 ssh-client 从 system 到 plink

**Linux 客户端**：在 Windows 主机上将 putty 类型的私钥加载到 puttygen 并导出到 openssh-key。在 Linux-box 中将此文件另存为`/.ssh/id_dsa`. 运行 ssh-agent，输入一次密码。ssh-agent 将在会话期间为所有请求使用密码作为密钥

**PS**：在 Github ssh-related docs 和 testing shell 的帮助下调试你的问题

# .htaccess - Mod重写，将子目录转换为查询字符串？

> ID：14949663
> 
> 赞同：0
> 
> 时间：2013-02-19T04:06:21.843
> 
> 标签：.htaccess

我正在尝试将子目录转换为搜索查询。所以基本上：

```
example.com/pizza 
```

将转换为：

```
example.com/?s=pizza 
```

我对 htaccess 有基本的了解，以前也做过类似的事情，但是这次我不能让它工作。这就是问题：

这有效：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.*)$ /results/?s=$1 [L,QSA] 
```

但是，当我将重写目标指向根目录时，用户将被重定向到“example.com”而没有查询字符串。

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.*)$ /?s=$1 [L,QSA] 
```

如何将 "example.com/pizza" 重写为 "example.com/?s=pizza" ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:49:58.257

你可以试试这个：

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^(?:.*)?/([^/]+)/?  [NC]
RewriteRule .*      /?s=%1                     [L] 
```

静默地图：

`http://example.com/any/number/of/folders/parameter`带或不带斜杠。

至：

`http://example.com/?s=parameter`

假定所有字符串都是可变的。

对于永久且可见的重定向，请替换`[L]`为`[R=301,L]`.

# .net - 有人可以解释一下接口和 EF 在以下场景中是如何工作的吗？

> ID：14949667
> 
> 赞同：0
> 
> 时间：2013-02-19T04:06:48.280
> 
> 标签：.net, asp.net-mvc, entity-framework, dependency-injection

我正在努力理解接口和依赖注入在多层 MVC 项目中的作用。

我的项目中有两层：**Web**和**Core**。

**Core**为所有实体“IProjectDb”定义了一个接口。 **Web**具有此接口“ProjectDb”的实现。

1.  Core 项目中的接口什么时候使用？我们是否给它提供接口以便 EF 可以访问数据库？
2.  接口只是Core用来访问实现版本的代理，以便EF可以访问真实数据吗？
3.  如果是这样，依赖注入在这里扮演什么角色？我们要注入什么依赖项（核心取决于 web，web 取决于核心），在哪里，为什么？

我知道接口的目标是**解耦**项目以进行更好的测试。

现在，假设我想为这个项目添加一个服务层。

1.  假设服务层管理所有数据访问，我可以将“ProjectDb”移动到服务项目中，对吧？
2.  Web 现在需要访问服务......所以我想我需要在 Web 项目中创建一个接口，该接口在 Services 项目中实现。在另一个问题中，有人告诉我这是错误的，接口和定义都应该存在于服务层中，这对我来说违背了接口的目的。有人可以为我澄清一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T06:00:35.060

> Core 项目中的接口什么时候使用？我们是否给它提供接口以便 EF 可以访问数据库？

ProjectDb 是 IProjectDb 的一种具体实现，因此从技术上讲它已经在使用。通过拥有 IProjectDb，您可以提供各种额外的实现来支持单元测试，或者可能为不同的部署场景使用不同的数据存储。

这要求您提供一种方法来指定实现（依赖注入或显式）。

```
public HomeController : Controller
{
    private IProjectDb _projectDb;

    public HomeController() : this(new ProjectDb())
    {}

    public HomeController(IProjectDb projectDb)
    {
        _projectDb = projectDb;
    }

    ...
} 
```

这与 EF 无关。您的 IProjectDb 实现可以使用 EF，但这样您的控制器并不关心它使用什么。

> 接口只是Core用来访问实现版本的代理，以便EF可以访问真实数据吗？

接口只是定义了实现必须遵守的契约。使用上面的 Controller 示例，您可以`IProjectDb _projectDb`始终如一地使用该属性，而不管`IProjectDb`. 同样，这与 EF 无关。

> 如果是这样，依赖注入在这里扮演什么角色？我们要注入什么依赖项（核心取决于 web，web 取决于核心），在哪里，为什么？

依赖注入允许您定义要在运行时使用的 IProjectDb 的实现，而不是在编译时定义硬编码的实现。拥有它的主要原因是支持单元测试，但不限于此。

> 假设服务层管理所有数据访问，我可以将“ProjectDb”移动到服务项目中，对吧？

是的，但将其放入 Core 也是有效的（假设 Core 是一个类库）。我更喜欢使用类库，因为它可以让您在需要时在其他地方使用实现。即：如果您需要提供另一个服务来在同一个数据存储上运行后台任务，您可以只引用 Core 并重用相同的实现。

> Web 现在需要访问服务......所以我想我需要在 Web 项目中创建一个接口，该接口在 Services 项目中实现。在另一个问题中，有人告诉我这是错误的，接口和定义都应该存在于服务层中，这对我来说违背了接口的目的。有人可以为我澄清一下吗？

在 Web 项目中创建接口将为服务创建一个笨拙的依赖关系，这违背了分离层/层的目的。通俗地说，您是说服务依赖于 Web 应用程序，但事实并非如此。Web 应用程序应该依赖于服务，而服务不一定关心谁在使用它。

接口的目的是支持已定义合同的多种实现，并且在服务项目中定义它不会违反这一点（忽略服务项目通常编译为无法引用的可执行文件的事实）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T06:18:20.690

正如您所提到的，该接口用于解耦`Core`系统和`Web`应用程序之间的关系。假设您将所有业务逻辑放在项目的*段*`Core`中，并让`Web`应用程序使用此业务逻辑，接口表示您要在.*`Core`*

 *回答您的每个问题：

> 1 - Core项目中的接口什么时候使用？我们是否给它提供接口以便 EF 可以访问数据库？

您的`Web`应用程序是使用（或使用）您的`IBusinessLayer`界面的应用程序，它公开了对您的数据存储的访问权限（通过实体框架）。

> 2 - 接口是否只是Core用来访问实现版本的代理，以便EF可以访问真实数据？

是的。但在这种情况下，您谈论的是一个不同的接口，`IDataAccessObject`由 实现`EFDataAccessObject`。这里的想法是，将来您可能希望切换到另一个 ORM，例如`OtherORMDataAccessObject`实现`IDataAccessObject`，并保持项目的其余部分（`Core`和`Web`）保持不变。

> 3 - 如果是这样，依赖注入在这里扮演什么角色？我们要注入什么依赖项（核心取决于 web，web 取决于核心），在哪里，为什么？

依赖注入就是这样：一种通过注册单个具体类型来为所有这些接口注入实现的方法，您可以动态配置和计算。基本上，对于每个，

```
public WebClass
{
    public IBusinessLayer BusinessLayer { get; set; } // <-- Dependency
}

public BusinessClass
{
    public IProjectDB ProjectDB { get; set; } // <-- Dependency
}
... 

public Main()
{
    DependencyInjector
        .Register<IBusinessLayer>().With<ConcreteBusinessLayer>().
        .Register<IProjectDB>().With<EntityFrameworkProjectDB>();
} 
```

...

> 1 - 假设服务层管理所有数据访问，我可以将“ProjectDb”移动到服务项目中，对吗？

是的。只需使系统成为您层`Core`的依赖项，`Service`

```
public ServiceClass
{
    public IBusinessLayer BusinessLayer { get; set; } // <-- Dependency
}

public WebClass
{
    public IServiceLayer ServiceLayer { get; set; } // <-- Dependency
} 
```

如您所见，`Core`层和层的实现`ProjectDB`保持不变，您只需将`Business`依赖项从`Web`to移动`Service`并创建对层的`Service`依赖项。`Web`

> 2 - Web 现在需要访问服务......所以我想我需要在 Web 项目中创建一个接口，该接口在服务项目中实现。在另一个问题中，有人告诉我这是错误的，接口和定义都应该存在于服务层中，这对我来说违背了接口的目的。有人可以为我澄清一下吗？

这与上一个问题有关：接口是在层项目`IServiceLayer`中定义和实现的。`Service`您使用此接口从`Web`层使用您的服务，但这只是一个依赖项，因此，

```
public WebClass
{
    public IServiceLayer ServiceLayer { get; set; } // <-- Dependency
} 
```*

# php - 在文本框中显示字段的实际值

> ID：14949670
> 
> 赞同：1
> 
> 时间：2013-02-19T04:07:13.690
> 
> 标签：php, javascript, html

我在 php 中制作了一个插入记录代码，然后我需要制作一个自动代码，或者用户只需查看文本框的准备值，我就使用此代码。

```
$ayos = mysql_fetch_array(mysql_query("select ib_code from item_brand order by ib_code desc limit 1"));
            $new_val = $ayos['ib_code'] + 1; 
```

当您显示它时，只需使用：

```
echo $ayos['ib_code']; 
```

例如输出是**006**。我无法解决的问题是，当我尝试在文本框中显示*$new_val*的值时，如果 $ayos['ib_code'] = 006 那么 $new_val 等于 007，则可以肯定我们的预期结果，但问题是它是只有 7 不是 007，在文本框内显示时.. thx

![我的问题的截图thx伙计们！](../Images/fac42c5022c1a67c11fb59840cf2b81c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:21:41.607

尝试

如果您想显示一个左填充零的数字，请考虑使用`printf()`（或其众多亲戚之一）。

**测试示例：**

```
<?php
    $a = '006';
    $b = $a + 1;
?>
<input type="text" value="<?php printf("%03d", $b); ?>" />
```

上面的代码经过测试。

[**sprintf()**](http://de.php.net/manual/en/function.sprintf.php)可以做到这一点：

```
echo sprintf('%03d', $ayos['ib_code']); 
```

或者使用`str_pad()`- 但这在代码中有点长：

```
echo str_pad($ayos['ib_code'], 3, 0, STR_PAD_LEFT); 
```

**回应一些用户评论**

好吧，如果有类似的值`0006`，`000006`那么我们可以使用上面的代码如下。

```
<?php
    $a = '000006';
    $b = $a + 1;
?>
<input type="text" value="<?php printf("%0".strlen($a)."d", $b); ?>" />
```

我正在做的是传递`length dynamically`，所以如果将来数字`size increase`代码仍能按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:20:25.517

如下分配`$new_val`变量：

```
//GET count of leading 0's into variable
$leading_zero_count = strspn($ayos['ib_code'], "0");    
$new_val = $ayos['ib_code']+1;
/** 
  * Pad the $new_val variable with 0's so that 
  * new length = total leading 0's + new length of $new_val
**/
$new_val = str_pad ($new_val, $leading_zero_count+strlen($new_val),0, STR_PAD_LEFT); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T04:11:02.180

使用 + 运算符强制 PHP 将变量解释为数字，这将截断任何前导零。您很可能必须进行一些有趣的字符串操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T04:11:21.147

`006`ins 转换为，然后`number`添加`1`到它，它变成`7`，当它`number it truncates zeros`从左侧变成时。使用下面的代码，它将`0`向左填充。

```
echo str_pad($ayos['ib_code'], 3, "0", STR_PAD_LEFT); //becomes 007 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T04:13:44.240

利用`$realnumber = intval($new_val);`

`echo $realnumber;`

# jakarta-mail - 获取作为 winmail.dat 接收的 POP 3 的电子邮件附件

> ID：14949671
> 
> 赞同：1
> 
> 时间：2013-02-19T04:07:18.833
> 
> 标签：jakarta-mail, pop3, winmail.dat

当我尝试从 POP 3 邮件中获取附件时，我将它们作为 winmail.dat 获取，而不是原始附件名。如何获取原始文件名？

```
for (int i = 0; i < multipart.getCount(); i++) 
        {
            BodyPart bodyPart = multipart.getBodyPart(i);

            if(!Part.ATTACHMENT.equalsIgnoreCase(bodyPart.getDisposition())) 
            {
                //do something
            }
            else
            {
                bodyPart.getFileName(); // here only get the winmail.dat
            }   
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T04:23:12.047

这是 Exchange 设置的一部分，遗憾的是您需要使用[JTNEF](http://www.freeutils.net/source/jtnef/)从 WinMail.dat 中提取原始内容。

*“Java TNEF 包是 TNEF 消息处理程序的开源代码实现，可用作命令行实用程序或集成到基于 Java 的邮件应用程序中以提取原始消息内容。”*

这可以在 JavaMail 的第三方工具上找到。

作为替代方案，看起来更简单的是[POI-HMEF](http://poi.apache.org/hmef/index.html)

样品提取：

```
public void extract(String winmailFilename, String directoryName) throws Exception {
   HMEFContentsExtractor ext = new HMEFContentsExtractor(new File(winmailFilename));

   File dir = new File(directoryName);
   File rtf = new File(dir, "message.rtf");
   if(! dir.exists()) {
       throw new FileNotFoundException("Output directory " + dir.getName() + " not found");
   }

   System.out.println("Extracting...");
   ext.extractMessageBody(rtf);
   ext.extractAttachments(dir);
   System.out.println("Extraction completed");
} 
```

[这里](http://svn.apache.org/repos/asf/poi/trunk/src/scratchpad/src/org/apache/poi/hmef/dev/HMEFDumper.java)还有一个打印内容的样本。

# java - 如何跨多个请求生成随机值

> ID：14949683
> 
> 赞同：0
> 
> 时间：2013-02-19T04:08:20.530
> 
> 标签：java, google-app-engine

我想为许多 Servlet 请求生成一些随机数。问题是如果我在每个 servlet 中使用一个新的 Random 对象，则总体概率将不正确。

例如，大约有 10000+ 个请求，我希望所有随机值都应该在该范围内均匀分布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T04:13:18.517

那么为什么不使用全局`Random`实例呢？

或者你可以使用`ThreadLocalRandom`哪个更快。它是一种全球性的，因为您无法真正创建它的实例。您可以通过调用来获取实例`ThreadLocalRandom.current()`。在 Java 7 中，它返回一个每个线程的实例。在 Java 8 中，它被进一步优化，它总是返回相同的单例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:53:19.633

使用 Random 获得真正的随机序列有点复杂。Random 是基于 LCG 的，周期为 2^48，你需要非常小心种子。有一种方法可以使用 DataStore 生成单个序列来保持当前值，但性能不会很好，因为每次生成新的随机数时都需要更新值。这意味着您将能够在没有 memcahce 的情况下达到 10-20 个请求/秒，而使用 memcache 可能达到 100 个请求/秒左右。分片不会很有帮助，因为您需要保留原子种子值。

算法将如下所示：

1.  生成第一个 Integer（要使用 long，您将需要额外的处理。生成 int 要简单得多）。
2.  设置种子 = 随机 <<< 16
3.  将种子保存到 DataStore（不要忘记事务）
4.  在每个下一个请求（整个操作应该在一个事务中）：

    4.1。从 DataStore 读取种子

    4.2\. 用你的种子创建新的随机数。

    4.3\. 生成新的整数。

    4.4\. 设置种子 = 随机 <<< 16

    4.5\. 将种子保存到 DataStore

# c - 为什么这个打印链表功能不起作用？

> ID：14949695
> 
> 赞同：0
> 
> 时间：2013-02-19T04:09:16.837
> 
> 标签：c, linked-list

我有以下功能

```
void printLinkedList(struct node *head) {

    printf("%d-->", head->data);

    while(head->ptr != NULL) {
        head = head->ptr;
        printf("%d-->", head->data);
    }
    printf("NULL\n");
} 
```

我想打印以下列方式构造的链表的内容：

```
for (int i = 0; i < 10; i++) {
    head->data = i+1;
    head->ptr = malloc(sizeof(struct node));
    head = head->ptr;
} 
```

所以理想情况下，这应该给我类似的东西：

```
1-->2-->3-->4-->...-->10-->NULL 
```

但是，如果一切都正确，valgrind 会给我内存错误。请告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:20:03.023

检查这个。

```
struct node *temp, *head= NULL, *last = NULL;
    for (int i = 0; i < 10; i++) {
        temp = malloc(sizeof(struct node));
        temp->data = i+1;
        temp->ptr = NULL;
        if (head == NULL)
          head = temp;
        if (last != NULL)
          last->ptr = temp;
        last = temp;
    }
printLinkedList(head); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T04:46:09.350

我稍微修改了汤姆斯的答案：

```
struct node *head = NULL, **temp = &head;
for (int i = 0; i < 10; i++) {
    *temp = malloc(sizeof(struct node));
    (*temp)->data = i+1;
    (*temp)->ptr = NULL;
    temp = &(*temp)->ptr;
}
printLinkedList(head); 
```

由于 temp 未正确分配，原始代码会产生段错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T05:05:26.330

如果在不构造链表的情况下调用 print 函数，会报错，所以修改 print 函数如下：

```
void printLinkedList(struct node *head) 
{
    while(head != NULL) 
    {
        printf("%d-->", head->data);
        head = head->ptr;
    }
    printf("NULL\n");
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T06:56:34.387

这是修改后的代码-您的构造有问题。

```
typedef struct _node {
    int data;
    struct _node *ptr;
} NODE, *PNODE;

PNODE head;

int main (int argc, char * argv[])
{

    head = (PNODE) malloc(sizeof(NODE));
    PNODE node = head;

    int i = 0;
    node->data = ++i;
    node->ptr = NULL;

    for ( ;i < 10; ) {
        PNODE tmp = (PNODE) malloc(sizeof(NODE));
        tmp->data = ++i;
        tmp->ptr = NULL;

        node->ptr = tmp;
        node =tmp;
    }

    printLinkedList(head);

    freeLinkedList(head);

    return 0;

} 
```

# android - 如何将 Android 片段添加到活动？

> ID：14949698
> 
> 赞同：7
> 
> 时间：2013-02-19T04:09:35.467
> 
> 标签：android, xml, layout, android-activity, fragment

我想在我的主要活动中添加一个片段，所以我有这个片段类（TitleFragment.java）：

```
package com.myapp.app1;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class TitleFragment extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.fragment_title, container, false);
    }
} 
```

接下来是我的片段的实际内容，包含在`fragment_title.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
       <ImageView 
        android:id="@+id/logo_iv"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/logo_main"
        android:contentDescription="@string/app_name"
        android:scaleType="fitStart"
        android:adjustViewBounds="true" />
</LinearLayout> 
```

在我`activity_main.xml`的活动的常规内容中，我有这个片段：

```
<fragment 
            android:name="com.myapp.app1.TitleFragment"
            android:id="@+id/title_fragment"
            android:layout_width="0dp"
            android:layout_height="match_parent" /> 
```

这种方法是创建片段的正确方法吗？我的应用程序崩溃了，LogCat 似乎表明它与片段视图膨胀有关，但我不确定。

顺便说一句，这个片段的原因是每个页面上都存在应用程序徽标（图像和一些可更新的文本），这是做类似事情的好方法吗？对不起我的新手问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T04:25:45.267

我已经从我的`MainActivity`. 主要活动延伸`FragmentActivity`。我使用的方式是：

```
FragmentManager manager = getSupportFragmentManager();
FragmentTransaction transaction = manager.beginTransaction();
transaction.replace(R.id.body_frame, new MyFragment()).commit(); 
```

在您的情况下，它应该如下所示：

```
FragmentManager manager = getSupportFragmentManager();
FragmentTransaction transaction = manager.beginTransaction();
transaction.replace(R.id.title_fragment, new TitleFragment()).commit(); 
```

记得我用过`FragmentActivity`开始`Fragment`。我也曾经`android-support-v4.jar` 支持低版本操作系统中的片段。没有`android-support-v4.jar`， `FragmentManager manager = getSupportFragmentManager();`可能看起来像：`FragmentManager manager = getFragmentManager();`

**编辑：**

你应该修改你的片段类：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // Inflate the layout for this fragment
    View view =  inflater.inflate(R.layout.fragment_title, container, false);
    // you can use findViewById() using the above 'view'
      ......................
      ....your code........
       ................
    return view;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-04-09T02:39:58.727

在片段部分添加

`tools:layout="@layout/fragment_title`

像这样

```
 <fragment 
    android:name="com.myapp.app1.TitleFragment"
    android:id="@+id/title_fragment"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    tools:layout="@layout/fragment_title /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T04:24:52.747

确保具有`activity_main.xml`布局的活动扩展`FragmentActivity`而不是`Activity`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-04T19:21:38.677

```
public void onMenuItemClick(View clickedView, int position) {
    switch (position){
        case 1:
             fragmentChanger("Notifications",new notifyFragment());
           break;
        case 2:
             fragmentChanger("QR Code",new qrFragment());
            break;
        case 3:
            fragmentChanger("User ID",new MainFragment());
            break;
        case 4:
            fragmentChanger("Settings",new settingsFragment());
            break;
        default:
            Toast.makeText(this, "Clicked on position: " + position, Toast.LENGTH_SHORT).show();
            break;
    }
}

//function that does the trasaction when a fragment object is passed
//R.id.container is my default frame
public void fragmentChanger(String title, Object expectedFragment){
   // mToolBarTextView.setText(title);
    transaction = fragmentManager.beginTransaction();
    transaction.replace(R.id.container, (Fragment) expectedFragment);
    transaction.addToBackStack(null);
    transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
    transaction.commit();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-08T06:23:33.677

使用标签，您可以在活动中添加/替换片段

```
private final static String BLANK_FRAGMENT_A= "BlankFragmentA";
private final static String BLANK_FRAGMENT_B= "BlankFragmentB";

private BlankFragmentA blankFragmentA;
private BlankFragmentB blankFragmentB; 
```

添加片段

```
blankFragmentA= (BlankFragmentA) getSupportFragmentManager().findFragmentByTag(BLANK_FRAGMENT_A);
if (blankFragmentA== null) {
   blankFragmentA= new BlankFragmentA ();
   getSupportFragmentManager().beginTransaction().add(R.id.frame_layout,blankFragmentA,BLANK_FRAGMENT_A).commit();
} 
```

替换片段

```
blankFragmentB= (BlankFragmentB) getSupportFragmentManager().findFragmentByTag(BLANK_FRAGMENT_B);
if (blankFragmentB== null) {
   blankFragmentB= new BlankFragmentB();
   getSupportFragmentManager().beginTransaction().replace (R.id.frame_layout,blankFragmentB,BLANK_FRAGMENT_B).commit();
} 
```

# java - 从 Java 中的其他包访问 Protected

> ID：14949700
> 
> 赞同：-1
> 
> 时间：2013-02-19T04:09:40.447
> 
> 标签：java, inheritance, protected

为什么我`protectedMethod()`什至不能调用 Parent 类的对象调用它的方法？

```
package packageA;

public class Parent{
  protected void protectedMethod(){
     System.out.println("Hello Parent");
  }
} 
```

在另一个包中：

```
package packageB;
import packageA.Parent;

Public Class Child extends Parent{
    public static void main(String[] args) {
        Parent parent = new Parent();
        parent.protectedMethod(); //illegal
        Child child = new Child();
        child.protectedMethod(); // legal       
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:21:48.720

**您的子类可以在其自己的 parent**上调用 protectedMethod() ，而不是在创建的任何独立 Parent 对象上。

所以， super.protectedMethod() 是合法的，但这似乎不是你所需要的。如果您想创建一个调用 Parent 对象上的方法的 Child 对象，而不是它自己的父对象，那么您必须将方法声明为 public。

# java - 昂贵算法的 Clojure 性能

> ID：14949705
> 
> 赞同：13
> 
> 时间：2013-02-19T04:10:24.097
> 
> 标签：java, performance, clojure

我已经实现了一个算法来计算最长的*连续*公共子序列（不要与最长的公共子序列混淆，尽管对于这个问题并不重要）。我需要从中获得最大性能，因为我会经常调用它。为了比较性能，我在 Clojure 和 Java 中实现了相同的算法。Java 版本的运行速度明显更快。**我的问题是我是否可以对 Clojure 版本做些什么来将其加速到 Java 级别。**

这是Java代码：

```
public static int lcs(String[] a1, String[] a2) {
    if (a1 == null || a2 == null) {
        return 0;
    }

    int matchLen = 0;
    int maxLen = 0;

    int a1Len = a1.length;
    int a2Len = a2.length;
    int[] prev = new int[a2Len + 1]; // holds data from previous iteration of inner for loop
    int[] curr = new int[a2Len + 1]; // used for the 'current' iteration of inner for loop

    for (int i = 0; i < a1Len; ++i) {
        for (int j = 0; j < a2Len; ++j) {
            if (a1[i].equals(a2[j])) {
                matchLen = prev[j] + 1; // curr and prev are padded by 1 to allow for this assignment when j=0
            }
            else {
                matchLen = 0;
            }
            curr[j+1] = matchLen;

            if (matchLen > maxLen) {
                maxLen = matchLen;
            }
        }

        int[] swap = prev;
        prev = curr;
        curr = swap;
    }

    return maxLen;
} 
```

这是相同的 Clojure 版本：

```
(defn lcs
  [#^"[Ljava.lang.String;" a1 #^"[Ljava.lang.String;" a2]
  (let [a1-len (alength a1)
        a2-len (alength a2)
        prev (int-array (inc a2-len))
        curr (int-array (inc a2-len))]
    (loop [i 0 max-len 0 prev prev curr curr]
      (if (< i a1-len)
        (recur (inc i)
               (loop [j 0 max-len max-len]
                 (if (< j a2-len)
                   (if (= (aget a1 i) (aget a2 j))
                     (let [match-len (inc (aget prev j))]
                       (do
                         (aset-int curr (inc j) match-len)
                         (recur (inc j) (max max-len match-len))))
                     (do
                       (aset-int curr (inc j) 0)
                       (recur (inc j) max-len)))
                   max-len))
               curr
               prev)
        max-len)))) 
```

现在让我们在我的机器上测试这些：

```
(def pool "ABC")
(defn get-random-id [n] (apply str (repeatedly n #(rand-nth pool))))
(def a1 (into-array (take 10000 (repeatedly #(get-random-id 5)))))
(def a2 (into-array (take 10000 (repeatedly #(get-random-id 5))))) 
```

爪哇：

```
(time (Ratcliff/lcs a1 a2))
"Elapsed time: 1521.455 msecs" 
```

Clojure：

```
(time (lcs a1 a2))
"Elapsed time: 19863.633 msecs" 
```

Clojure 速度很快，但仍然比 Java 慢一个数量级。我能做些什么来缩小这个差距吗？或者我是否已将其最大化，一个数量级是“最小的 Clojure 开销”。

正如您所看到的，我已经在使用循环的“低级”构造，我正在使用本机 Java 数组，并且我已经对参数进行了类型提示以避免反射。

有一些算法优化可能，但我现在不想去那里。我很好奇我能获得多接近 Java 的性能。如果我不能缩小差距，我只会使用 Java 代码。这个项目的其余部分在 Clojure 中，但有时为了提高性能可能需要使用 Java。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-19T13:31:07.777

**编辑：**在第一个下面添加了一个更快更丑的版本。

这是我的看法：

```
(defn my-lcs [^objects a1 ^objects a2]
  (first
    (let [n (inc (alength a1))]
      (areduce a1 i 
        [max-len ^ints prev ^ints curr] [0 (int-array n) (int-array n)]
        [(areduce a2 j max-len (unchecked-long max-len)
           (let [match-len 
                 (if (.equals (aget a1 i) (aget a2 j))
                   (unchecked-inc (aget prev j))
                   0)]
             (aset curr (unchecked-inc j) match-len)
             (if (> match-len max-len)
               match-len
               max-len)))
         curr prev])))) 
```

与您的主要区别：`a[gs]et`vs `a[gs]et-int`，使用`unchecked-`操作（隐式通过`areduce`），使用向量作为返回值（和“交换”机制），并且 max-len 在内部循环之前被强制为原始（原始值循环是有问题的，自 1.5RC2 起略少，但支持还不完善，但`*warn-on-reflection*`也不是无声的）。

我改用`.equals`而不是`=`避免 Clojure 等效中的逻辑。

**编辑：**让我们变得丑陋并恢复数组交换技巧：

```
(deftype F [^:unsynchronized-mutable ^ints curr
            ^:unsynchronized-mutable ^ints prev]
  clojure.lang.IFn
  (invoke [_ a1 a2]
    (let [^objects a1 a1
          ^objects a2 a2]
      (areduce a1 i max-len 0
        (let [m (areduce a2 j max-len (unchecked-long max-len)
                  (let [match-len 
                        (if (.equals (aget a1 i) (aget a2 j))
                          (unchecked-inc (aget prev j))
                          0)]
                    (aset curr (unchecked-inc j) (unchecked-int match-len))
                    (if (> match-len max-len)
                      match-len
                      max-len)))
              bak curr]
          (set! curr prev)
          (set! prev bak)
          m)))))

(defn my-lcs2 [^objects a1 a2]
  (let [n (inc (alength a1))
        f (F. (int-array n) (int-array n))]
    (f a1 a2))) 
```

在我的盒子上，它快了 30%。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-19T06:08:01.113

以下是一些改进：

1.  花哨的类型提示没有优势，只需使用 ^objects
2.  我相信 aset-int 已被弃用 - 只是普通的旧 get 速度更快，总体上大约是 3 倍

除此之外（以及上面提到的 recur 的长类型提示），我看不到任何明显的方法可以进一步改进。

```
(defn lcs
  [^objects a1 ^objects a2]
  (let [a1-len (alength a1)
        a2-len (alength a2)
        prev (int-array (inc a2-len))
        curr (int-array (inc a2-len))]
    (loop [i 0 max-len 0 prev prev curr curr]
      (if (< i a1-len)
        (recur (inc i)
               (long (loop [j 0 max-len max-len]
                 (if (< j a2-len)
                   (if (= (aget a1 i) (aget a2 j))
                     (let [match-len (inc (aget prev j))]
                       (do
                         (aset curr (inc j) match-len)
                         (recur (inc j) (max max-len match-len))))
                     (do
                       (aset curr (inc j) 0)
                       (recur (inc j) max-len)))
                   max-len)))
               curr
               prev)
        max-len))))
#'user/lcs
user> (time (lcs a1 a2))
"Elapsed time: 3862.211 msecs" 
```

# datetime - 将时间转换为 UTC vbScript

> ID：14949706
> 
> 赞同：6
> 
> 时间：2013-02-19T04:10:23.987
> 
> 标签：datetime, vbscript, asp-classic, timezone, utc

我有以下函数可以很好地将当前时间转换为 UTC 时间。

```
Function toUtc(byVal dDate)
    Dim oShell : Set oShell = CreateObject("WScript.Shell")
    toUtc = dateadd("n", oShell.RegRead("HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\TimeZoneInformation\ActiveTimeBias"), cDate(dDate))
End Function 
```

但是，我认为这不能充分处理未来或历史日期到 UTC 的转换，因为该函数需要知道正在转换的日期时服务器时区的偏移量，以及它是否是在夏令时期间与否。

我怎样才能解决这个问题？

我在带有 IIS7.5 的 Windows 服务器上使用 vbScript/Classic ASP

澄清一下，这与格式化日期无关。这完全是关于从服务器时区转换为历史日期的 UTC。在夏令时期间，如果我尝试转换标准时间发生的日期时间，则偏移量将减少 60 分钟。

例如：

假设今天，2013-02-19（非夏令时），我想将时间戳从 2008-06-05（夏令时期间）从 PDT（我的服务器时区）转换为 UTC。在我的函数中使用该方法会给我一个与正确值相差 60 分钟的值（因为当前时间是 PST（不是 PDT），因此该历史日期的偏移量将不正确）。

换句话说，输入日期的时区偏移量可能是 UTC-7 或 UTC-8，具体取决于在该特定日期是否观察到 DST。我需要为输入日期计算正确的 UTC 日期，并且无论当前日期是否观察到 DST，我都需要代码工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T00:10:10.300

这是我在@AardVark71 的建议下最终实施的解决方案。

我把它放在我的 func.asp 文件中：

```
<script language="javascript" runat="server">
    function toUtcString(d) {
        var dDate = new Date(d);
        return Math.round(dDate.getTime() / 1000);
    };
</script> 
```

它输出一个时间戳值。然后从经典 asp 代码中的任何地方，我都可以这样做：

```
response.Write DateAdd("s", toUtcString(cDate("11/11/2012 06:25 PM")), "01/01/1970 00:00:00") 'expect 11/11/2012 10:25:00 PM gmt/utc time
response.Write DateAdd("s", toUtcString(cDate("06/11/2012 06:25 PM")), "01/01/1970 00:00:00") 'expect  6/11/2012  9:25:00 PM gmt/utc time 
```

这（我相信）很简单，它产生了 DST 中的预期值和全部因素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-08T21:07:20.543

在 ASP 经典中，您可以在一页内混合 VBScript 和 JScript 代码。JScript`Date`对象可用于本地⇄ UTC 日期转换。完整示例：

```
<%@ language="vbscript" %>
<%
Option Explicit
Dim local_date
Dim utc_date
For Each local_date In Array("11/11/2012 06:25 PM", "06/11/2012 06:25 PM")
    utc_date = local_to_utc(local_date)
    Response.Write "Local: " & local_date & ", UTC: " & utc_date & vbNewLine
Next
For Each utc_date In Array("2012-11-12T02:25:00Z", "2012-06-12T01:25:00+00:00")
    local_date = utc_to_local(utc_date)
    Response.Write "UTC: " & utc_date & ", Local: " & local_date & vbNewLine
Next
%>
<script language="jscript" runat="server">
    function local_to_utc(datestr) {
        // note that this function lets JScript engine parse the date, correctly or otherwise
        var date = new Date(datestr);
        var result = date.getUTCFullYear() + "-" + (date.getUTCMonth() + 1) + "-" + date.getUTCDate() + "T" + date.getUTCHours() + ":" + date.getUTCMinutes() + ":" + date.getUTCSeconds();
        return result.replace(/(\D)(\d)(?!\d)/g, "$10$2") + "Z";
    }
    function utc_to_local(datestr) {
        // note that this function parses only a subset of ISO 8601 date format
        var match = datestr.match(/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{3}))?(?:Z|([-+])(\d{2}):(\d{2}))$/);
        var offset = match[8] ? (match[8] === "+" ? 1 : -1) * (match[9] * 60 + match[10] * 1) : 0;
        var date = new Date(Date.UTC(match[1], match[2] - 1, match[3], match[4], match[5] - offset, match[6], match[7] || 0));
        var result = date.getFullYear() + "-" + (date.getMonth() + 1) + "-" + date.getDate() + " " + date.getHours() + ":" + date.getMinutes() + ":" + date.getSeconds();
        return result.replace(/(\D)(\d)(?!\d)/g, "$10$2");
    }
</script> 
```

预期结果：

*   [2012 年 11 月 11 日 18:25 PST = 2012 年 11 月 12 日 02:25 UTC](https://www.timeanddate.com/worldclock/converter.html?iso=20121112T022500&p1=234&p2=1440)
*   [2012 年 6 月 11 日 18:25 PDT = 2012 年 6 月 12 日 01:25 UTC](https://www.timeanddate.com/worldclock/converter.html?iso=20120612T012500&p1=234&p2=1440)

以及使用 PST/PDT 时间在服务器上执行时的输出：

```
Local: 11/11/2012 06:25 PM,       UTC:   2012-11-12T02:25:00Z
Local: 06/11/2012 06:25 PM,       UTC:   2012-06-12T01:25:00Z
UTC:   2012-11-12T02:25:00Z,      Local: 2012-11-11 18:25:00
UTC:   2012-06-12T01:25:00+00:00, Local: 2012-06-11 18:25:00 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T17:14:28.267

如果我没有错过什么，你需要在远程机器上获取本地时间和时区偏移，对吧？

[在这里](https://stackoverflow.com/a/13980554)，我看到了基于`WMI Win32_TimeZone Bias`属性的自我回答。但根据这个 MSDN 示例：“[将本地时间转换为 UTC 时间](http://msdn.microsoft.com/en-us/library/windows/desktop/ms696015%28v=vs.85%29.aspx)”，引用：

> 使用 Win32_ComputerSystem CurrentTimeZone 属性，因为它会自动调整夏令时的时区偏差 Win32_TimeZone Bias 属性不会。

因此，下一个示例函数获取当前日期时间，我将留给您修改它以进行具体的日期时间测量。

```
' "." mean local computer
WScript.Echo FormatDateTime(UTCDate("."), 0)

Function UTCDate(strComputer)
    Dim objWMIService, ColDate, ColCS

    On Error Resume Next
    Set objWMIService = _
        GetObject("winmgmts:{impersonationLevel=impersonate}!\\" _
        & strComputer & "\root\cimv2")

    Set ColDate = objWMIService.ExecQuery("Select * From Win32_LocalTime")

    UTCDate = DateSerial(100, 1, 1)
    For Each objDate In ColDate
        UTCDate = DateAdd("yyyy", ObjDate.Year - 100, UTCDate)
        UTCDate = DateAdd("m", ObjDate.Month - 1, UTCDate)
        UTCDate = DateAdd("d", ObjDate.Day - 1, UTCDate)
        UTCDate = DateAdd("h", ObjDate.Hour, UTCDate)
        UTCDate = DateAdd("n", ObjDate.Minute, UTCDate)
        UTCDate = DateAdd("s", ObjDate.Second, UTCDate)
    Next

    ' http://msdn.microsoft.com/en-us/library/windows/desktop/ms696015(v=vs.85).aspx
    Set ColCS = objWMIService.ExecQuery("Select * From Win32_ComputerSystem")

    Dim TimeZoneOffset, LocalTimeZone
    For Each LocalTimeZone In ColCS
        TimeZoneOffset = LocalTimeZone.CurrentTimeZone
    Next

    If TimeZoneOffset < 0 Then
        TimeZoneOffset = Abs(TimeZoneOffset)
    Else
        TimeZoneOffset = -Abs(TimeZoneOffset)
    End If

    UTCDate = DateAdd("n", TimeZoneOffset, UTCDate)
    If Err Then UTCDate = vbNull
    Set objWMIService = Nothing
End Function 
```

[编辑] 好吧，看起来不应该信任 MSDN（或者也许这仅适用于当前时间）。但是，我认为这不是您要寻找的答案。如果你没有找到更好的主意，你可以自动化这个[在线计算器](http://www.timeanddate.com/worldclock/converter.html)。

**PS** 好的，删除上面的代码，让我们尝试另一个“迭代”。

请注意，我制作的代码与我的时区（保加利亚）兼容，其中 PDT 从 3 月的最后一个星期日开始，到 10 月的最后一个星期日结束。这让我可以轻松设置我的 PDT 范围。很快，我们的想法就是让算法适用于您所在的地区。其余的很清楚，我希望。

```
With New DateDrill
    Debug.WriteLine .UTCDate("2008-6-28")
    Debug.WriteLine .UTCDate("2014-1-21")
End With

Class DateDrill

    Public Function UTCDate(ByVal dtDate)
        If Not IsDate(dtDate) Then Err.Raise 5
        dtDate = CDate(dtDate)
        Dim ZoneBias: ZoneBias = TimeZoneBias()
        If IsPDT(Now) <> IsPDT(dtDate) Then
            ZoneBias = ZoneBias - 60
        End If
        UTCDate = DateAdd("n", ZoneBias, dtDate)
    End Function

    Private Function IsPDT(ByVal dtDate)
        If Not IsDate(dtDate) Then Err.Raise 5
        dtDate = CDate(dtDate)
        Dim pdtLow, pdtUpr, nDaysBack

        pdtLow = DateSerial(Year(dtDate),  3, 31)
        pdtUpr = DateSerial(Year(dtDate), 10, 31)
        pdtLow = DateAdd("h", 2, pdtLow)
        pdtUpr = DateAdd("h", 2, pdtUpr)

        nDaysBack = Weekday(pdtLow) - 1
        If nDaysBack <> 0 Then
            pdtLow = DateAdd("d", -nDaysBack, pdtLow)
        End If

        nDaysBack = Weekday(pdtUpr) - 1
        If nDaysBack <> 0 Then
            pdtUpr = DateAdd("d", -nDaysBack, pdtUpr)
        End If

        IsPDT = (dtDate >= pdtLow And dtDate <= pdtUpr)
    End Function

    Private Function TimeZoneBias()
        Dim LTZone
        With GetObject("winmgmts:" & _
                "{impersonationLevel=impersonate}!\\.\root\cimv2")
            For Each LTZone In .ExecQuery(_
                    "Select * From Win32_ComputerSystem")
                TimeZoneBias = LTZone.CurrentTimeZone
            Next
        End With
        TimeZoneBias = TimeZoneBias * -1
    End Function

End Class 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-23T01:09:00.283

这个小小的 ASP VBScript 函数集合可以满足您的需要。我正在从 MySQL 数据库中绘制一个 Unix 时间戳。根据您的数据库，查询可能略有不同，但大多数数据库可以返回 Unix 时间戳。在我的服务器上，查询只需要一到两毫秒。

注意：`pquery`是我自己运行 SQL 查询的函数。显然用你自己的方法代替。

我正在计算每次`unixTime()`运行的偏移量。如果您愿意，您当然可以在“引导”文件中计算一次并设置一个全局变量。

```
Function unixTimestamp()
    ' Unix Timestamp, drawn from MySQL because ASP doesn't natively handle time zones
    rs = pquery( "SELECT unix_timestamp() AS `ts`", null )
    unixTimestamp = cLng( rs("ts") )
End Function

Function utc_offset()
    ' Offset of Server time from UTC, in seconds
    dim unixNow : unixNow = unixTimestamp()
    dim aspNow  : aspNow  = cLng( DateDiff( "s", "01/01/1970 00:00:00", now() ) )
    utc_offset = cLng( ( aspNow - unixNow ))
End Function

Function unixTime( byVal dt )
    dim offset : offset = utc_offset()
    if( VarType( dt ) = vbDate ) then
        unixTime = cLng( DateDiff( "s", "01/01/1970 00:00:00", dt ) - offset )
    else
        if( isDate( dt ) ) then
            dt = cDate( dt )
            unixTime = cLng( DateDiff( "s", "01/01/1970 00:00:00", dt ) - offset )
        else
            unixTime = null
        end if
    end if
End Function

Function datetimeFromUnix( byVal udt, offset )
    datetimeFromUnix = cDate( DateAdd( "s", udt + offset , "01/01/1970 00:00:00" ) )
End Function 
```

现在运行：

```
utcTimestamp = unixTime( dDate )
utcDate = datetimeFromUnix( utcTimestamp, 0 )   ' UTC
localDate = datetimeFromUnix( utcTimestamp, utc_offset() )  ' back where we started 
```

# c - 用 X11 画大点

> ID：14949708
> 
> 赞同：1
> 
> 时间：2013-02-19T04:10:33.740
> 
> 标签：c, x11

我知道 X11 有用于批量绘制多个点的 XDrawPoints，但有时我希望有稍微大一点的点（如果你是这样的：通过它们画一条线很有用），但找不到任何方法来绘制更大的点无需做一些笨拙的事情，例如绘制一个填充的小矩形或带有端盖的零长度线。

有没有合理的方法来设置我缺少的点大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:07:14.770

A point is a single pixel in Xlib. But XFillArcs() would let you create a list of XArc structures that describe small circles. Then you can scale these circles to any radius by setting XArc.width and XArc.height.

# c++ - cin、空格和“缓冲”

> ID：14949719
> 
> 赞同：1
> 
> 时间：2013-02-19T04:11:31.240
> 
> 标签：c++, stdin, cin

所以我写了这个非常简单的程序：

```
#include <iostream>
#include <string>
using namespace std;

int main()
{
string input;

cin >> input;
cout<< input<<endl;
cin >> input;
cout<< input<<endl;
cin >> input;
cout<< input<<endl;
return 0;
} 
```

我在一行上输入“word1 word2 word3”，预期的输出是

```
word1
word2
word3 
```

当然，现在我可以得到与`for (int i=0; i <3; i++){cin>>input; cout << input<<endl;}`.

这让我想到了我的问题。一旦 cin 用完从标准输入读取的内容，它就会查询用户（标准输入）。

我是一种检测 cin 是否会从标准输入*缓冲区*读取内容或查询用户的方法。

我知道这是一个简单的问题，但它用于家庭作业......而且我正处于一个巨大的工作引发的时间紧缩中，所以对分享权力的人表示敬意！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:53:09.113

您尝试做的事情不能`operator>>`仅仅因为它不区分不同类型的空白而完成。看看你喜欢的 C++ 标准库中的实现，以下来自 gcc 4.7.2 的 ( `bits/basic_string.tcc`)：

```
 995   // 21.3.7.9 basic_string::getline and operators
 996   template<typename _CharT, typename _Traits, typename _Alloc>
 997     basic_istream<_CharT, _Traits>&
 998     operator>>(basic_istream<_CharT, _Traits>& __in,
 999            basic_string<_CharT, _Traits, _Alloc>& __str)
1000     {
...
1027           while (__extracted < __n
1028              && !_Traits::eq_int_type(__c, __eof)
1029              && !__ct.is(__ctype_base::space,
1030                  _Traits::to_char_type(__c)))
1031         { 
```

如您所见，（第 1029 行）这会在遇到的所有空白处停止（请参阅http://en.cppreference.com/w/cpp/locale/ctype_base [）](http://en.cppreference.com/w/cpp/locale/ctype_base)`ctype_base::space`。

因此，您要做的是使用`getline`（遇到换行符时停止）并通过 a 提取`stringstream`：

```
getline(cin,mystring);
stringstream str(mystring);
while (str >> token) {
  cout << token << '\n';
} 
```

# svn - Hudson 插件不再可用

> ID：14949721
> 
> 赞同：0
> 
> 时间：2013-02-19T04:11:42.743
> 
> 标签：svn, plugins, hudson

我昨天设置了一个 hudson 构建服务器（部署在 Tomcat 版本 7.0.35 中），安装了一些插件（SVN、maven 3、findbugs 等），然后设置了一些工作。每个作业都会使用 SVN 检查代码，然后执行 maven 构建步骤，并发布错误和样式报告。

这一直很好，直到几分钟前，当我更新了一些现有的插件然后在 tomcat 中重新加载了 Hudson 战争文件时。

现在，当我查看作业的配置时，SCM 设置中没有 SVN 选项，构建后选项中也没有选项可以为 findbugs 生成报告等。所以当我开始构建时，没有 SVN 检出；构建使用现有的工作区。

Hudson 报告说仍然安装了 SVN、findbugs 等插件，但这些插件的选项在 hudson 配置页面中不再可见。

有什么建议么？

**编辑**：所以第二天，我重新启动了 Tomcat 服务器，现在我可以看到 SCM 配置选项的 SVN 设置，尽管我以前的 SVN 设置丢失了。

非常好奇。

# css - CSS边距表现奇怪

> ID：14949729
> 
> 赞同：0
> 
> 时间：2013-02-19T04:12:55.063
> 
> 标签：css, responsive-design, margin, percentage

所以我找到了一篇关于响应式设计的文章[（here）](http://learn.shayhowe.com/advanced-html-css/responsive-web-design)，我试着做一些类似于教程部分内容的东西。该网站说将元素的大小除以元素所在的容器的大小。（我除以 1000 而不是 1050 的原因是因为 div#main 上的边距使其为 1000px，即使header 是 1050px）如果这没有意义，那么链接可以解释它。我的浏览器在全尺寸下看起来不错，但如果我将窗口缩小到很多，那么它就不会按应有的方式调整大小。我不确定我的代码的哪一部分是错误的，但如果有人可以帮助我，那就太好了！[这是](http://addisonbean.com/responsive.html)我制作的页面的链接。这是我的源代码：

```
<!DOCTYPE html>
<html>
<head>
<style>

body, html {
    margin: 0;
    height: 100%;
    width: 100%;
}    

header {
    height: 100px;
    max-width: 1050px;
    margin: 0 auto;
}

#main {
    border-radius: 25px;
    background-color: #aaa;
    height: inherit;
    max-width: inherit;
    margin: 25px;
}

.box {
    width: 47.5%;
    height: 75%;
    margin: 1.25%;
    background-color: #444;
    border-radius: 15px;
    float: left;
}

</style>
</head>
<body>

<header>
    <div id="main">
        <span class="box">
        </span>
        <span class="box">
        </span>
    </div>
</header>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:27:24.843

也许如果我解释发生了什么，你会发现实际上没有问题。

内盒具有基于父容器高度的 75% 的固定高度。因此，所有元素的高度保持不变。但是，您的边距是父元素宽度的一部分，因此它们会随着页面宽度而变化。随着页面变小，页边距变小。由于 div 自然地位于页面上尽可能高的位置，因此它会移向其父级的边框。

所有这些都是您的设计所期望的。要修复它，请设置固定的顶部和底部边距：

```
.box {margin: 12px 1.25%;} 
```

# ruby-on-rails - gem install rails 在 binding_of_caller gem 处失败

> ID：14949730
> 
> 赞同：10
> 
> 时间：2013-02-19T04:12:56.330
> 
> 标签：ruby-on-rails, bundler

我正在尝试让 rails 工作，并且无法通过`binding_of_caller`运行后尝试与其他 gem 一起安装的 gem `sudo gem install rails`。我不认为 gem 是 rails 工作所必需的，但不知道如何跳过它，或者阻止它尝试安装。

每次宝石列表到达时，`binding_of_callers`我都会得到以下信息：

```
Installing binding_of_callers (0.6.9) with native extensions

Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb 
creating Makefile

make
xcrun cc -I. -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin12.0 -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin12.0 -I. -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -fno-common -arch i386 -arch x86_64 -g -Os -pipe -fno-common -DENABLE_DTRACE  -fno-common  -pipe -fno-common  -O0 -std=c99  -c binding_of_caller.c
binding_of_caller.c:4:10: fatal error: 'vm_core.h' file not found
#include "vm_core.h"
         ^
1 error generated.
make: *** [binding_of_caller.o] Error 1

Gem files will remain installed in /Users/ericavirtue/.bundler/tmp/54559/gems/binding_of_caller-0.6.9 for inspection.
Results logged to /Users/ericavirtue/.bundler/tmp/54559/gems/binding_of_caller-0.6.9/ext/binding_of_caller/gem_make.out
An error occurred while installing binding_of_caller (0.6.9), and Bundler cannot continue.
Make sure that `gem install binding_of_caller -v '0.6.9'` succeeds before bundling. 
```

我正在运行`OSX 10.8.2`并使用带有 rbenv 的 pow Web 服务器来管理 ruby​​。我也在运行红宝石`1.9.3-p385`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-26T06:15:22.400

尝试更新 gem：

`$ bundle update binding_of_caller`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T23:01:19.267

在安装 Rails 之前，使用以下内容添加 gem（还要注意 gem 名称是单数的）：

```
$ gem install binding_of_caller 
```

然后运行：

```
$ bundle update rails 
```

或者：

```
$ gem install rails 
```

（或任何 rbenv 提供）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T21:53:10.440

Ok, so the problem was that the RBENV ruby version wasn't being recognized as the version of ruby being used by the project. So after trying to get rbenv working for a while, I switched back to RVM went through some debugging, and installed some dependencies, I got ruby 2.0.0p0 installed, and recognized as the project ruby. Then I was able to bundle. So to answer my question ... It was a ruby version issue.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-15T02:52:20.097

使用 rbenv 解决这个问题有什么进展吗？

我正在使用 rbenv 在本地加载 jruby 2.0，我想继续使用此解决方案而不是 rvm。

```
Ascended:Ascended foundation3 $ rbenv local
jruby-1.7.4
Ascended:Ascended foundation3 $ jruby --version
jruby 1.7.4 (2.0.0) 2013-05-16 2390d3b on Java HotSpot(TM) 64-Bit Server VM 1.6.0_51-b11-457-11M4509 [darwin-x86_64]
Ascended:Ascended foundation3 $ gcc --version
i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)
Copyright (C) 2007 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

我的 ~/.jrubyconf 设置为

```
compat.version=2.0                                                                                                         
cext.enabled=true                                                               
errno.backtrace=true 
```

当我尝试安装调用者绑定时，我得到以下信息 -

```
Ascended:Ascended foundation3 $ gem install binding_of_caller -v '0.7.2'
Building native extensions.  This could take a while...
ERROR:  Error installing binding_of_caller:
        ERROR: Failed to build gem native extension.

        /Users/Ascended/.rbenv/versions/jruby-1.7.4/bin/jruby extconf.rb
/Users/Ascended/.rbenv/versions/jruby-1.7.4/lib/ruby/shared/mkmf.rb:1:in `(root)': Use RbConfig instead of obsolete and depreca
ted Config.
/Users/Ascended/.rbenv/versions/jruby-1.7.4/lib/ruby/shared/mkmf.rb:1791:in `init_mkmf': Use RbConfig instead of obsolete and deprecated Config.
/Users/Ascended/.rbenv/versions/jruby-1.7.4/lib/ruby/shared/mkmf.rb:1791:in `init_mkmf': Use RbConfig instead of obsolete and $eprecated Config.
creating Makefile

make
cc -I. -I/Users/Ascended/.rbenv/versions/jruby-1.7.4/lib/native/include -I/Users/Ascended/.rbenv/versions/jruby-1.7.4/lib/nati$e/include/ruby -I. -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE      -fPIC -DTARGET_RT_MAC_CFM=0  -fno-omit-frame-pointer -fno-strict-al$asing  -fexceptions   -O0 -std=c99  -arch x86_64 -c binding_of_caller.c
binding_of_caller.c:4:10: fatal error: 'vm_core.h' file not found
#include "vm_core.h"
         ^
1 error generated.
make: *** [binding_of_caller.o] Error 1

Gem files will remain installed in /Users/Ascended/.rbenv/versions/jruby-1.7.4/lib/ruby/gems/shared/gems/binding_of_caller-0.7$2 for inspection.
Results logged to /Users/Ascended/.rbenv/versions/jruby-1.7.4/lib/ruby/gems/shared/gems/binding_of_caller-0.7.2/ext/binding_of$caller/gem_make.out 
```

现在根据该线程中标记为正确的答案，这是 rbenv 的问题，但 jruby 1.7.4 是正确的版本，它在 2.0 上运行。这不应该工作吗？我不明白什么？

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-02-19T04:36:34.283

看起来你正在使用 Linux。尝试通过首先安装 ruby​​ 和 rvm 来遵循 rails 安装。这可能是 ruby​​ 版本过时的原因。扔在黑暗中。

# c# - 索引数据库内的数据，文件存储在文件系统上

> ID：14949731
> 
> 赞同：0
> 
> 时间：2013-02-19T04:13:08.483
> 
> 标签：c#, .net, solr, castle-windsor, solrnet

我正在尝试在我的 .NET 应用程序中使用 Apache Solr 作为全文搜索引擎（通过[SolrNet](http://code.google.com/p/solrnet/)）。我的应用程序具有这种数据模式：

```
class Document 
{
    public int Id { get; set; };
    public string Name { get; set; }
    public DateTime CreateDate { get; set;}
    public Attach[] Attaches { get; set; }
}

class Attach
{
    public int Id { get; set; }
    public Document Parent { get; set; }
    //files are stored in filesystem, only path stored in database!
    public string FilePath { get; set; }
} 
```

现在，我正在尝试索引这些文件（使用 Castle.Windsor）：

```
_container.AddFacility("solr", 
    new SolrNetFacility("http://localhost:8983/solr"));
var solr = _container.Resolve<ISolrOperations<Document>>();
solr.Delete(SolrQuery.All);

var conn = _container.Resolve<ISolrConnection>();

var docs = from o in Documents
           where o.Attaches.Count > 0
           select o;

foreach (var doc in docs)
{
    foreach (var att in doc.Attaches)
    {
        try
        {
            var file = Directory.GetFiles("C:\\Attachments\\" + doc.Id );
            foreach (var s in file)
            {
                var a = File.ReadAllText(s);
                conn.Post("/update", a);    
            }

        }
        catch (Exception)
        {           
            throw;
        }
    }
}
solr.Commit();
solr.BuildSpellCheckDictionary(); 
```

如代码中所述，我正在搜索文件路径，并直接从磁盘添加文件内容。但是，当我将文件的文本发布到 Solr 时，我收到了错误：

```
<?xml version="1.0" encoding="UTF-8"?>
<response>
    <lst name="responseHeader">
        <int name="status">400</int><int name="QTime">2</int>
    </lst>
    <lst name="error">
        <str name="msg">Unexpected character 'Т' (code 1058 / 0x422) in prolog; expected '&lt;'
 at [row,col {unknown-source}]: [1,1]</str>
        <int name="code">400</int>
    </lst>
</response> 
```

我有这个问题：

1.  我可以发布以索引纯文本而不是 XML 吗？
2.  我必须序列化我的数据对象以索引它们吗？如果是，我必须如何在“附加”类中表示文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:00:53.093

要回答您的问题：

1.  是的，您可以将纯文本发布到索引。
2.  您发布的项目必须经过序列化（默认为 XML，但也可以使用 JSON）才能将它们添加到索引中。

从您的示例代码中，您似乎只对索引文件的纯文本感兴趣。基于此，我将创建以下类来将数据传递给 Solr。

```
 public class IndexItem
  {
       [SolrField("id")]
       public string Id { get; set; }

       [SolrField("content")]
       public string Content { get; set; }
  } 
```

使用此类存储您读取的每个文件的 Id（必须是唯一值）。文件名（也包括路径）可能足够独特。

将您的示例更改为以下内容：

```
_container.AddFacility("solr", 
    new SolrNetFacility("http://localhost:8983/solr"));
var solr = _container.Resolve<ISolrOperations<IndexItem>>();
solr.Delete(SolrQuery.All);

var docs = from o in Documents
           where o.Attaches.Count > 0
           select o;

foreach (var doc in docs)
{
    foreach (var att in doc.Attaches)
    {
        try
        {
            var file = Directory.GetFiles("C:\\Attachments\\" + doc.Id );
            foreach (var s in file)
            {
                       var indexItem = new IndexItem();
                       indexItem.Id = s.FileName;
                       indexItem.Content = File.ReadAllText(s);
                       solr.Add(indexItem);    
            }

        }
        catch (Exception)
        {           
            throw;
        }
    }
}
solr.Commit();
solr.BuildSpellCheckDictionary(); 
```

如果您需要为每个文件索引更多附加属性，您可以将它们添加到 IndexItem 类，因为我注意到您在上面的 Document 类中有 Name 和 CreateDate 属性。您只需要提供到 Solr 的映射，以便将它们存储在适当的 Solr 字段中。有关详细信息，请参阅[SolrNet 映射页面。](http://code.google.com/p/solrnet/wiki/Mapping)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:05:07.553

我猜你打算提取纯文本、HTML、DOC 和其他富文档。您的错误消息来自试图解析非 XML 的 XML 解析器。

使用 设置为URL的[提取请求处理程序](http://wiki.apache.org/solr/ExtractingRequestHandler)`/update/extract`

# scala - 在scala中将Long转换为base 36

> ID：14949732
> 
> 赞同：20
> 
> 时间：2013-02-19T04:13:08.413
> 
> 标签：scala, long-integer, base36

如何将 Long 转换为 base36 ？连同你的答案可以解释你是如何得出答案的？

我已经检查了[Long 的 scaladocs 以](http://www.scala-lang.org/api/current/index.html#scala.Long)转换为不同的基础，并将 Long 转换为 BigInt。我看到[BigInt](http://www.scala-lang.org/api/current/index.html#scala.math.BigInt)确实有`toString( base )`一个解决方案可能涉及更改类型，但我不知道如何。

*注意：我是 scala / java / 类型安全语言的新手，所以我可能会忽略一些琐碎的事情。*

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-24T19:23:48.727

在 Scala 语言中，转换`Long`为 a`BigInt`变得很简单：

```
var myLong : Long = Long.MaxValue
var myBigInt : BigInt = myLong
myBigInt.toString(36) 
```

输出为：

```
myLong: Long = 9223372036854775807
myBigInt: scala.math.BigInt = 9223372036854775807
res199: String = 1y2p0ij32e8e7 
```

我以 Java 开发人员和 Scala 初学者的身份进入主题的方式（阅读“Scala for the Impatient.pdf”的第 1 章）。上面的答案有效，但看起来很奇怪。不知何故，必须跳入 Java 领域进行这样的基本转换似乎不太正确，尤其是在`BigInt`拥有所有东西的情况下。在查看了 scaladoc 和上面的答案之后，出现了一些失败。

我最大的失败是使用`toInt()`它可怕地截断`myLong`。快要放弃了，最后的尝试显得如此简单直观，差点没试过：`myBigInt = myLong`. 或许有一天`Long`会更丰富，更懂`toBigInt`……这是我旅途中的第一次失败。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-02-19T04:27:03.410

java.lang.Long 类有一个静态方法 toString(long i, int radix)，它将把 Long 转换成另一个基的字符串表示。在这种情况下，“基数”与“基数”的含义相同。

```
val myLong = 25000L
val longInBase36:String = java.lang.Long.toString(myLong, 36) 
```

Scala 将在必要时将您的 scala Long 值视为 java.lang.Long，因此您始终可以在必要时在 Java API 文档中查找方法。请参阅：[http ://docs.oracle.com/javase/6/docs/api/java/lang/Long.html](http://docs.oracle.com/javase/6/docs/api/java/lang/Long.html)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-04-19T07:58:10.450

所以你想将 Long 转换为 BigInt。BigInt 对象有一个以 Long 作为参数的 apply 方法。这是 REPL 中的一个示例。

```
scala> BigInt(458982948578L).toString(36)
res11: String = 5uuqlhpe 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-19T04:43:23.103

好吧，要么该方法在 Scala`Long`或其增强类中可用`RichLong`，要么您必须在 Java 对应物上搜索它。后者恰好是这种情况。

它可以在源类型或目标类型上，并且由于`long`不是 Java 中的类，因此您必须在`java.lang.Long`. 它不是 on `String`-- 寻找方法采取`Long`--，但你可以找到它 on `java.lang.Long`，只是寻找方法返回`String`它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-03-06T12:43:51.610

一般形式

```
def nextInt(d: Double): Int = if (math.floor(d) == d) d.toInt + 1 else math.ceil(d).toInt

def digitsL(base: Int, n: Long, padTo: Int = 0): List[Int] =
  List.fill(List(padTo, nextInt(math.log(n) / math.log(base))).max - 1)()
  .foldLeft((List((n % base).toInt), base)) {
    case ((cum, div), _) => (((n / div) % base).toInt +: cum, div * base)
  }._1 
```

（反之亦然）

```
def digitsToLong(base: Int, digits: List[Int]): Long = digits.foldRight((0L, 1)){
  case (cur, (cum, pow)) => (cum + cur.toLong * pow, pow * base)
}._1 
```

# python - 将字节附加到字符串？

> ID：14949737
> 
> 赞同：3
> 
> 时间：2013-02-19T04:13:47.013
> 
> 标签：python, file, python-2.7, binary

我有一个在 Python 中打开的文件，我正在写入另一个输出文件。我需要它是文件大小的 16 的倍数，所以这就是我设计的：

```
 with open(input_file, 'rb') as infile:
     with open(output_file, 'wb') as outfile:
         while True:
             input_chunk = infile.read(64)

             if len(input_chunk) == 0:
                 break
             elif len(input_chunk) % 16 > 0:
                 input_chunk.extend([0 for i in range(len(input_chunk) % 16)])

             output_file.write(input_chunk) 
```

不幸的是，它无法将零附加到：

```
AttributeError: 'str' object has no attribute 'extend' 
```

首先，为什么我这里有一个字符串，而不是一个字节数组？我正在以二进制模式读取二进制文件。

其次，如果我正在处理一个字符串，我如何将一些带有值的字节写入`0`该字符串的末尾？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T04:20:19.623

在 Python 2.x 中，`str`对象是一个“字节数组”。

如果您需要一个可变数组，请在 2.6+ 版本上使用 bytearray：

```
>>> a = bytearray('my_string')
>>> a.extend(' hello')
>>> str(a)
'my_string hello' 
```

否则：

```
>>> import array
>>> a = array.array('c', 'my_string') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T04:20:54.620

> 首先，为什么我这里有一个字符串，而不是一个字节数组？

因为这就是`file.read`返回...

> 其次，如果我正在处理一个字符串，我如何将一些值为 0 的字节写入该字符串的末尾？

您不能将其写入该字符串，因为字符串是不可变的。但是，您可以将其写入不同的字符串并通过连接创建新字符串：

```
>>> import struct
>>> input_chunk = 'foo bar baz'
>>> input_chunk + struct.pack('16B',*([0]*16))
'foo bar baz\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
>>> 
```

请注意，如果您知道您有 64 个字节，并且您想要一个 80 字节的字符串，并用空值填充，`struct.pack` **将自动用空值填充它**：

```
struct.pack('80s',string_of_64_bytes) 
```

> 对于 's' 格式字符，计数被解释为字符串的大小，而不是像其他格式字符那样的重复计数；例如，'10s' 表示单个 10 字节字符串，而 '10c' 表示 10 个字符。如果未给出计数，则默认为 1。对于打包，字符串将被截断或用空字节填充以使其适合。对于解包，生成的字符串始终具有完全指定的字节数。作为一种特殊情况，'0s' 表示单个空字符串（而 '0c' 表示 0 个字符）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T04:26:05.283

只需使用`bytearray`，您就应该保持原样：

```
 input_chunk = bytearray(infile.read(64)) 
```

虽然我只会使用类似的东西`[0] * (16 - len(input_chunk)%16)`而不是填充的列表理解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T04:42:51.800

你可以`input_chunk`像这样填充你的

```
input_chunk += '\x00'*(-len(input_chunk)%16) 
```

# r - 生成两个向量之间的差向量

> ID：14949738
> 
> 赞同：39
> 
> 时间：2013-02-19T04:14:01.777
> 
> 标签：r

我有两个 csv 文件，每个文件都包含一列数据

例如， vecA.csv 就像

```
id
1
2 
```

vecB.csv 就像

```
id
3
2 
```

我读取数据集如下：

```
vectorA<-read.table("vecA.csv",sep=",",header=T)
vectorB<-read.table("vecB.csv",sep=",",header=T) 
```

我想生成一个仅由属于 B 的元素组成的向量。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-02-19T04:15:58.097

您正在寻找功能`setdiff`

```
setdiff(vectorB$id, vectorA$id) 
```

如果您不希望将其简化为唯一值，则可以创建一个`not in`函数

（在这里向@joran 致敬[与否定匹配](https://stackoverflow.com/questions/11302985/match-with-negation)）

```
'%nin%' <- Negate('%in%')

vectorB$id[vectorB$id %nin% vectorA$id] 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-19T07:36:54.520

如果您的向量是`data.table`s，那么您只需要五个字符：

```
B[!A] 
```

* * *

```
library(data.table)

# read in your data, wrap in data.table(..., key="id") 
A <- data.table(read.table("vecA.csv",sep=",",header=T), key="id")
B <- data.table(read.table("vecB.csv",sep=",",header=T), key="id")

# Then this is all you need
B[!A] 
```

* * *

[Matthew] 在 v1.8.7 中，读取文件也更加简单快捷：

```
A <- setkey(fread("vecA.csv"), id)
B <- setkey(fread("vecB.csv"), id)
B[!A] 
```

# windows-phone-8 - Windows Phone 8 的 WebBrowser 控件如何重置比例？

> ID：14949749
> 
> 赞同：0
> 
> 时间：2013-02-19T04:15:53.517
> 
> 标签：windows-phone-8

是否有一些 API 可以获取 WebBrowser 控件的当前比例，例如 Android 中 WebView 的 GetScale 方法，如果用户用手指缩放页面，我想获取当前比例并重置当前比例？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:05:46.327

没有特殊的属性，但您可以**尝试**以下

**获取当前比例**

```
MyBrowser.InvokeScript("eval", new string[] { "'' + screen.deviceXDPI/screen.logicalXDPI" }) 
```

基于[如何在所有现代浏览器中检测页面缩放级别？](https://stackoverflow.com/questions/1713771/how-to-detect-page-zoom-level-in-all-modern-browsers)

**重置比例**

如上所示，使用*InvokeScipt*通过视口元标记或[-ms-viewport 规则](http://msdn.microsoft.com/en-us/library/ie/hh869615%28v=vs.85%29.aspx)设置缩放（宽度：设备宽度或用户缩放：固定；最大缩放：1；最小缩放：1；）。

# php - 如何在 zend_form 中重新呈现类错误消息？

> ID：14949752
> 
> 赞同：1
> 
> 时间：2013-02-19T04:16:02.857
> 
> 标签：php, zend-form, rerender

Zend_Form 中的默认错误消息如下：

```
<ul class="errors">
    <li>Please enter your email !</li>
</ul> 
```

我想像这样重新渲染：

```
<div class="errors">Please enter your email !</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:37:12.540

您只需将相关的`elementStart`,`elementEnd`和`elementSeparator`选项传递给`Errors`装饰器视图助手。例如

```
$element->addDecorator('Errors', array(
    'elementStart'     => '<div%s>',
    'elementSeparator' => '<br>',
    'elementEnd'       => '</div>'
)); 
```

您还没有说过要如何分隔多个错误消息。`<br>`我假设使用上面的换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:27:48.837

我没有提供详细信息，但它肯定会帮助你......在你的表单助手中尝试这样

```
// Email
$email = $this->createElement('text', 'email');
$email->setRequired(true)
->setLabel('Email *')
->addFilters(array('StringTrim'))
->setAttribs(array('class' => 'input-text'))
->addValidator('EmailAddress')
->addValidator('NotEmpty', true)
->clearDecorators()
->addDecorator('Label', array('escape' => false))
->addDecorator('ViewHelper')
->addDecorator('Errors')
->addDecorator(array('data'=>'HtmlTag'),
  array('tag' => 'div', 'class' => 'group'));
$email->getValidator('EmailAddress')
    ->setMessage('invalid email', 'emailAddressInvalidFormat');
$email->getValidator('NotEmpty')
    ->setMessage('enter email', 'isEmpty'); 
```

这是为您在 div 中的电子邮件验证客户错误消息

# c - C中的二进制搜索无法正常工作

> ID：14949755
> 
> 赞同：1
> 
> 时间：2013-02-19T04:16:27.090
> 
> 标签：c, search, binary

```
int recurbinarysearch(int * oringalary, int low, int high, int target) {

    if (low > high) {
        return -1;
    } else {
        int mid = (low + high) / 2;
        if (target == * (oringalary + mid)) return mid;
        if (target > * (oringalary + mid)) return recurbinarysearch(oringalary, mid + 1, high, target);
        if (target < * (oringalary + mid)) return recurbinarysearch(oringalary, low, mid - 1, target);
    }
} 
```

有人在我的递归二进制搜索算法中看到错误吗？偶尔它会返回一个不正确的索引（通常它会偏离一个），但偶尔会偏离。然而，通常它是正确的。我没有看到问题，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:01:46.373

**编辑** 这是被接受的，所以我想我真的应该试着把它变成一个正确的答案。

我最初假设（请参阅下面的“**注意**”）问题是使用半开边界。它实际上（正确地）使用*了包容性*边界。在最初的通话中，`low=0`和`high=n-1`.

使用包容性边界通常被认为是一件坏事 - 请参阅 Dijkstra 的经典著作 (PDF)。在 C 系列语言中，半开边界是一种常见的约定，甚至是对`for (i = 0; i < n; i++)`over的偏好`for (i = 0; i <= n-1; i++)`。但是，鉴于使用了包含边界，问题中的代码似乎是正确的。

然而，正如 WhozCraig 在评论中所发现的那样，调用代码不遵守该约定，并且传递了错误的边界 - 包括搜索范围内的越界垃圾项。因为那个额外的项目是垃圾，所以范围内的项目已排序的假设也可能无效。大多数搜索不会找到该垃圾项（因为您不太可能搜索它具有的任何垃圾值），但它会误导搜索。

* * *

**注意** 这可能不是答案，但评论太长了。

你的界限是包容的、排他的还是半开放的？

我将假设 半开放 - 包含 at `low`，独占 at `high`。如果是这样，这条线看起来是错误的......

```
if (target < * (oringalary + mid))
    return recurbinarysearch(oringalary, low, mid - 1, target); 
```

原因是您已在 处检查了该项目`mid`，但您将`mid - 1`其用作新的*专属*上限。这意味着`mid - 1`未检查的位于 的项目已意外从搜索中排除。线路应该...

```
if (target < * (oringalary + mid))
    return recurbinarysearch(oringalary, low, mid, target); 
```

这将项目保持`mid - 1`在要搜索的范围内。`mid`由于上限是独占的，因此不会再次搜索该项目。

在二进制搜索中搞乱界限是一个常见问题，它会导致比看起来应该的错误更多。

但是，这本身并不能解释您的症状 - 它有时应该无法找到项目~~（可能大约 50% 的搜索）~~，但它不应该为成功的搜索报告错误的位置。

二进制搜索中错误边界的常见症状是无限循环（同一项目被重复检查，因为它没有被排除在边界之外）或搜索未能找到存在的项目（因为项目被排除在搜索范围之外）检查）。

老实说，我看不出你的症状是如何发生的。函数退出的所有可能方式都应该给出正确的成功结果，否则给出`-1`失败结果。我能想到的唯一可能的例外是在这段代码之外——误解了结果，例如未能检查`-1`结果。

顺便说一句 - 这是我代表我的问题和回答关于[一次比较每次迭代二分搜索](https://stackoverflow.com/questions/4948162/how-can-i-better-understand-the-one-comparison-per-iteration-binary-search)的绝佳机会。

**编辑**我想我发现了边界的另一个问题 - 仍然假设半开，这条线是错误的......

```
if (low > high) { 
```

并且应该...

```
if (low >= high) { 
```

原因是对于半开边界，如果边界相等，则中间没有要检查的项目——即使是下限项目也是无效的，因为上限等于它并且是互斥的。这使您仍然可以测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T06:31:05.283

有关二分搜索的全面讨论，请研究 Jon Bentley 的[Programming Pearls](https://rads.stackoverflow.com/amzn/click/com/0201657880)。

这是您的代码的测试工具，非常受 Programming Pearls 的启发，以及您的代码的检测版本。我所做的唯一更改是在二进制搜索中添加（现已注释掉）调试打印。测试代码的输出几乎是完美的（工具表明一切都通过了，但并不完全正确）：

```
N =  0: 
search for  0 in  0 entries - returned  0 found  0 PASS
N =  1: [0] = 1;
search for  0 in  1 entries - returned -1          PASS
search for  1 in  1 entries - returned  0 found  1 PASS
search for  2 in  1 entries - returned -1          PASS
N =  2: [0] = 1;[1] = 3;
search for  0 in  2 entries - returned -1          PASS
search for  1 in  2 entries - returned  0 found  1 PASS
search for  2 in  2 entries - returned -1          PASS
search for  3 in  2 entries - returned  1 found  3 PASS
search for  4 in  2 entries - returned -1          PASS
N =  3: [0] = 1;[1] = 3;[2] = 5;
search for  0 in  3 entries - returned -1          PASS
search for  1 in  3 entries - returned  0 found  1 PASS
search for  2 in  3 entries - returned -1          PASS
search for  3 in  3 entries - returned  1 found  3 PASS
search for  4 in  3 entries - returned -1          PASS
search for  5 in  3 entries - returned  2 found  5 PASS
search for  6 in  3 entries - returned -1          PASS
N =  4: [0] = 1;[1] = 3;[2] = 5;[3] = 7;
search for  0 in  4 entries - returned -1          PASS
search for  1 in  4 entries - returned  0 found  1 PASS
search for  2 in  4 entries - returned -1          PASS
search for  3 in  4 entries - returned  1 found  3 PASS
search for  4 in  4 entries - returned -1          PASS
search for  5 in  4 entries - returned  2 found  5 PASS
search for  6 in  4 entries - returned -1          PASS
search for  7 in  4 entries - returned  3 found  7 PASS
search for  8 in  4 entries - returned -1          PASS
N =  5: [0] = 1;[1] = 3;[2] = 5;[3] = 7;[4] = 9;
search for  0 in  5 entries - returned -1          PASS
search for  1 in  5 entries - returned  0 found  1 PASS
search for  2 in  5 entries - returned -1          PASS
search for  3 in  5 entries - returned  1 found  3 PASS
search for  4 in  5 entries - returned -1          PASS
search for  5 in  5 entries - returned  2 found  5 PASS
search for  6 in  5 entries - returned -1          PASS
search for  7 in  5 entries - returned  3 found  7 PASS
search for  8 in  5 entries - returned -1          PASS
search for  9 in  5 entries - returned  4 found  9 PASS
search for 10 in  5 entries - returned -1          PASS
N =  6: [0] = 1;[1] = 3;[2] = 5;[3] = 7;[4] = 9;[5] = 11;
search for  0 in  6 entries - returned -1          PASS
search for  1 in  6 entries - returned  0 found  1 PASS
search for  2 in  6 entries - returned -1          PASS
search for  3 in  6 entries - returned  1 found  3 PASS
search for  4 in  6 entries - returned -1          PASS
search for  5 in  6 entries - returned  2 found  5 PASS
search for  6 in  6 entries - returned -1          PASS
search for  7 in  6 entries - returned  3 found  7 PASS
search for  8 in  6 entries - returned -1          PASS
search for  9 in  6 entries - returned  4 found  9 PASS
search for 10 in  6 entries - returned -1          PASS
search for 11 in  6 entries - returned  5 found 11 PASS
search for 12 in  6 entries - returned -1          PASS
N =  7: [0] = 1;[1] = 3;[2] = 5;[3] = 7;[4] = 9;[5] = 11;[6] = 13;
search for  0 in  7 entries - returned -1          PASS
search for  1 in  7 entries - returned  0 found  1 PASS
search for  2 in  7 entries - returned -1          PASS
search for  3 in  7 entries - returned  1 found  3 PASS
search for  4 in  7 entries - returned -1          PASS
search for  5 in  7 entries - returned  2 found  5 PASS
search for  6 in  7 entries - returned -1          PASS
search for  7 in  7 entries - returned  3 found  7 PASS
search for  8 in  7 entries - returned -1          PASS
search for  9 in  7 entries - returned  4 found  9 PASS
search for 10 in  7 entries - returned -1          PASS
search for 11 in  7 entries - returned  5 found 11 PASS
search for 12 in  7 entries - returned -1          PASS
search for 13 in  7 entries - returned  6 found 13 PASS
search for 14 in  7 entries - returned -1          PASS
N =  8: [0] = 1;[1] = 3;[2] = 5;[3] = 7;[4] = 9;[5] = 11;[6] = 13;[7] = 15;
search for  0 in  8 entries - returned -1          PASS
search for  1 in  8 entries - returned  0 found  1 PASS
search for  2 in  8 entries - returned -1          PASS
search for  3 in  8 entries - returned  1 found  3 PASS
search for  4 in  8 entries - returned -1          PASS
search for  5 in  8 entries - returned  2 found  5 PASS
search for  6 in  8 entries - returned -1          PASS
search for  7 in  8 entries - returned  3 found  7 PASS
search for  8 in  8 entries - returned -1          PASS
search for  9 in  8 entries - returned  4 found  9 PASS
search for 10 in  8 entries - returned -1          PASS
search for 11 in  8 entries - returned  5 found 11 PASS
search for 12 in  8 entries - returned -1          PASS
search for 13 in  8 entries - returned  6 found 13 PASS
search for 14 in  8 entries - returned -1          PASS
search for 15 in  8 entries - returned  7 found 15 PASS
search for 16 in  8 entries - returned -1          PASS
N =  9: [0] = 1;[1] = 3;[2] = 5;[3] = 7;[4] = 9;[5] = 11;[6] = 13;[7] = 15;[8] = 17;
search for  0 in  9 entries - returned -1          PASS
search for  1 in  9 entries - returned  0 found  1 PASS
search for  2 in  9 entries - returned -1          PASS
search for  3 in  9 entries - returned  1 found  3 PASS
search for  4 in  9 entries - returned -1          PASS
search for  5 in  9 entries - returned  2 found  5 PASS
search for  6 in  9 entries - returned -1          PASS
search for  7 in  9 entries - returned  3 found  7 PASS
search for  8 in  9 entries - returned -1          PASS
search for  9 in  9 entries - returned  4 found  9 PASS
search for 10 in  9 entries - returned -1          PASS
search for 11 in  9 entries - returned  5 found 11 PASS
search for 12 in  9 entries - returned -1          PASS
search for 13 in  9 entries - returned  6 found 13 PASS
search for 14 in  9 entries - returned -1          PASS
search for 15 in  9 entries - returned  7 found 15 PASS
search for 16 in  9 entries - returned -1          PASS
search for 17 in  9 entries - returned  8 found 17 PASS
search for 18 in  9 entries - returned -1          PASS 
```

几乎所有这些都很好。唯一有问题的孩子是第一次搜索，它应该会失败，因为在空数组中不应该找到任何值。

测试代码为：

```
#include <stdio.h>

int recurbinarysearch(int *oringalary, int low, int high, int target)
{
    //printf("-->> %d..%d: ", low, high);
    if (low > high)
    {
        //printf("<<-- %d ", -1);
        return -1;
    }
    else
    {
        int mid = (low + high) / 2;
        if (target == * (oringalary + mid))
        {
            //printf("<<-- %d ", mid);
            return mid;
        }
        if (target > * (oringalary + mid))
        {
            int r = recurbinarysearch(oringalary, mid + 1, high, target);
            //printf("<<-- %d ", r);
            return r;
        }
        if (target < * (oringalary + mid))
        {
            int r = recurbinarysearch(oringalary, low, mid - 1, target);
            //printf("<<-- %d ", r);
            return r;
        }
    }
}

int main(void)
{
    for (int i = 0; i < 10; i++)
    {
        int a[i+1]; // No zero-size arrays in C
        printf("N = %2d: ", i);
        for (int j = 0; j < i; j++)
        {
            a[j] = 2 * j + 1;
            printf("[%d] = %d;",j, a[j]);
        }
        putchar('\n');

        for (int j = 0; j < 2*i+1; j++)
        {
            int f = recurbinarysearch(a, 0, i, j);
            //putchar('\n');  // debug
            printf("search for %2d in %2d entries - returned %2d",
                    j, i, f);
            if (f >= 0 && f <= i)
            {
                printf(" found %2d", a[f]);
                printf(" %s", (a[f] == j) ? "PASS" : "FAIL");
            }
            else
                printf(" %8s %s", "", (j % 2 == 0) ? "PASS" : "FAIL");
            putchar('\n');
        }
    }
    return(0);
} 
```

我将让您解决如何处理空数组的情况。

# wordpress - 允许自定义链接的 Wordpress 标签云插件

> ID：14949768
> 
> 赞同：1
> 
> 时间：2013-02-19T04:19:13.270
> 
> 标签：wordpress, wordpress-theming

我正在尝试将标签云与同位素平铺系统（[http://isotope.metafizzy.co/docs/introduction.html](http://isotope.metafizzy.co/docs/introduction.html)）控制的内容联系起来。当用户点击一个标签时，它将过滤同位素内容区域以仅显示该标签（全部在javascript中，无回发）

为了让它工作，我需要能够将标签中链接的默认行为替换为：

```
<a href="#" data-filter=".metal">metal</a> 
```

其中金属是标签/类别

目前是否有任何插件可以做到这一点，或者有一种无痛的方式来编辑核心标签云来做到这一点。

谢谢！

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T17:20:38.920

不建议更改基本文件之一，但完成您想要的“最简单”的方法是编辑标签云的来源。

文件：sitename.com/wp-includes/category-template.php

编辑：第 674-676 行

```
$a[] = "<a href='$tag_link' class='tag-link-$tag_id' title='" . esc_attr( call_user_func( $topic_count_text_callback, $real_count ) ) . "' style='font-size: " .
        str_replace( ',', '.', ( $smallest + ( ( $count - $min_count ) * $font_step ) ) )
        . "$unit;'>$tag_name</a>"; 
```

和

```
$a[] = "<a href='#' class='tag-link-$tag_id' title='" . esc_attr( call_user_func( $topic_count_text_callback, $real_count ) ) . "' style='font-size: " .
        str_replace( ',', '.', ( $smallest + ( ( $count - $min_count ) * $font_step ) ) )
        . "$unit;' data-filter='.$tag_name'>$tag_name</a>"; 
```

但就个人而言，这将更改任何使用标签的链接。所以我个人会抓住任何存在的标签云插件，然后编辑链接的输出。

例子：

插件：[http ://wordpress.org/extend/plugins/configurable-tag-cloud-widget/](http://wordpress.org/extend/plugins/configurable-tag-cloud-widget/)

文件：sitename.com/plugins/configurable-tag-cloud-widget/base.php

编辑：第 281-283 行

```
$a[] = "<a href=\"$tag_link\" class=\"ctc-tag tag-link-$tag_id\" title=\"".attribute_escape(sprintf(__('%d topics'), $count))."\"$rel style=\"font-size: ".$tag_weight
            ."$unit;".(isset($tag_color) ? " color: $tag_color;" : "")
            ."\">$tag"."</a>".('yes' == $showcount ? " $postcount" : ""); 
```

和

```
$a[] = "<a href='#' data-filter='.$tag' class=\"ctc-tag tag-link-$tag_id\" title=\"".attribute_escape(sprintf(__('%d topics'), $count))."\"$rel style=\"font-size: ".$tag_weight
            ."$unit;".(isset($tag_color) ? " color: $tag_color;" : "")
            ."\">$tag"."</a>".('yes' == $showcount ? " $postcount" : ""); 
```

# mysql - Mysql - 是否可以累计总结前一行的值

> ID：14949772
> 
> 赞同：0
> 
> 时间：2013-02-19T04:19:58.460
> 
> 标签：mysql

我已经尝试了一段时间，但没有成功。

我的数据库是这样的

```
-----------------------------------------------------
DEVICE_HASH | DEVICE_NAME | DEVICE_VERISON | DATE
-----------------------------------------------------
122138223823| crespo      | 1.1            | 12/01/13
122138213823| jewell      | 1.2            | 12/01/13
122138223823| crespo      | 1.1            | 13/01/13
122138263823| crespo      | 1.1            | 13/01/13
122138283823| blade       | 1.2            | 13/01/13
122138293823| crespo      | 1.1            | 14/01/13
----------------------------------------------------- 
```

为了计算每天下载的设备数量，我执行了以下运行良好的查询。

```
SELECT DATE_FORMAT(DATE, '%Y-%m-%d') as 'date', DEVICE_NAME as 'device' ,COUNT(*) as 'count' FROM table_name GROUP BY DATE_FORMAT(DATE, '%Y-%m-%d'), DEVICE_NAME 
```

例如：我在 2013 年 12 月 1 日的 crespo 计数为 1，在 13 年 1 月 13 日为 2，在 2013 年 1 月 14 日为 1

现在我想获取设备的运行计数，即将前一天的值添加到当天的下载并继续直到结束。

例如：crespo 计数应在 2013 年 12 月 1 日为 1，13 年 1 月 13 日为 3，13 年 1 月 14 日为 4

这在 mysql 中可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:55:33.463

我想这就是你要找的：

```
SELECT
  @runningTotal:=IF(@prevDevice=Device_Name,@runningTotal+cnt,cnt) rt,
  dt, Device_Name, cnt,
  @prevDevice:=Device_Name
FROM (
  SELECT 
    DATE_FORMAT(DATE, '%Y-%m-%d') as dt, 
    DEVICE_NAME ,
    COUNT(*) as cnt
  FROM table_name 
  GROUP BY DATE_FORMAT(DATE, '%Y-%m-%d'), DEVICE_NAME
  ORDER BY DEVICE_NAME, 2
) t
  JOIN (SELECT @runningTotal:=0) r 
```

和样本小提琴：[http ://sqlfiddle.com/#!2/e3525/1](http://sqlfiddle.com/#!2/e3525/1)

这会产生以下结果：

```
RT  DT          DEVICE_NAME     CNT 
1   2013-01-13  blade           1   
1   2014-01-13  crespo          1   
3   2013-01-13  crespo          2   
4   2012-01-13  crespo          1   
1   2012-01-13  jewell          1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:48:27.060

试试这个，
你需要**额外的变量**来检查**计数**，

[小提琴示例](http://sqlfiddle.com/#!2/e2dbe/22/1)

# schema - 在 Node JS 中填充 Mongoose

> ID：14949774
> 
> 赞同：5
> 
> 时间：2013-02-19T04:20:00.973
> 
> 标签：schema, mongoose, populate

我一直在尝试关注[Mongoose Population](http://mongoosejs.com/docs/populate.html)中的信息，但我遇到了例外：

**MissingSchemaError：尚未为模型“未定义”注册架构。**

我的代码是这样的：

```
mongoose = require('mongoose');
Schema = mongoose.Schema;
mongoose.connect(MONGO_SERVER);
ObjectId = Schema.ObjectId;

var FirstSchema = new Schema({
    label       : String
});
var SecondSchema = new Schema({
    first_id           : [{ type: mongoose.Schema.ObjectId, ref: 'First' }],
    type           : String,
    ...
});
var first= mongoose.model('First', FirstSchema);
var second= mongoose.model('Second', SecondSchema);

function test() {
    ...
    second.find({}).populate('first_id').exec(function(err,data){return true;});
    ...
} 
```

并且错误发生在填充上，我已经对其进行了多次调整，以在论坛上找到不同的答案，我相信这会很简单，但有人能指出我正确的方向吗？

干杯。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T06:04:52.960

在您的架构定义中，我看到您已将“first_id”定义为第二架构中的数组。与关系数据库相比，这将类似于一对多的关系，其中父表是第二个集合，而第一个集合是子表。然后你做错了试图用第一个填充第二个。

假设我有一个 Users 集合和一个 Clients 集合，其中每个客户端都有一个与之相关的用户。然后代码将是：

```
var mongoose = require('mongoose');
mongoose.connect('mongodb://userName:password@server:port/dbname');
var conn = mongoose.connection;
conn.on('error', console.error.bind(console, 'connection error:'));
conn.once('open', function callback () {
    console.log('connected ');
});

var user = mongoose.Schema({
    userName: String
});

var client = mongoose.Schema({
    fk_user: { type: mongoose.Schema.ObjectId, ref: 'Users' },
    name: String
});

var UserModel = mongoose.model('Users', user);
var ClientModel = mongoose.model('Clients', client);

ClientModel.findOne().populate('fk_user').exec(function(err, c) {
    if (err) { return console.log(err); }

    console.log(c.fk_user.userName);
}); 
```

希望这能给你一些帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-24T10:39:46.520

我有同样的错误

尚未为模型“状态”注册架构。

有时也可能是您尝试引用的模型未分配给模式。

就像在下面的代码中

首先：我试图引用我用 States 创建的“states”模型，但它不是模型的名称，而是名称是 states

```
var CountriesSchema = new Schema({

name:{ type:String,required:true},
capital:{type:String},
description:{type:String},
cord:{

    latitude:{type:Number},
    longitude:{type:Number}

},
state:[{type:Schema.Types.ObjectId , ref:'States'}],
date_created:{type:Date},
date_modeified:{type:Date}

}); 
```

同时模型的真实名称是 states

```
 var State = mongoose.model('states',StateSchema) ;

module.exports = State ; 
```

我所做的只是将州更改为州

```
var CountriesSchema = new Schema({

    name:{ type:String,required:true},
    capital:{type:String},
    description:{type:String},
    cord:{

        latitude:{type:Number},
        longitude:{type:Number}

    },
    state:[{type:Schema.Types.ObjectId , ref:'states'}],
    date_created:{type:Date},
    date_modeified:{type:Date}

}); 
```

# jsf - 是否可以为 p:selectOneMenu 设置占位符文本？

> ID：14949775
> 
> 赞同：2
> 
> 时间：2013-02-19T04:20:02.173
> 
> 标签：jsf, primefaces

我的问题几乎说明了一切。我想在 selectOneMenu 中有一个占位符文本，但我认为没有任何属性可以指定它。那么怎么可能有一个占位符呢？

我尝试使用`<p:watermark>`如下所示的，但它不起作用。

```
<p:selectOneMenu id="fooMenu">
    <f:selectItem itemLabel="foo" itemValue="foo"/>
    <f:selectItem itemLabel="goo" itemValue="goo"/>
</p:selectOneMenu>
<p:watermark value="Select" for="fooMenu"></p:watermark> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T11:24:48.780

默认情况下，标准 HTML 元素确实不支持它`<select>`，因此 JSF 中也没有设置它。

但是，您可以借助一点 CSS 和 jQuery来*模拟一个。*`itemDisabled`

```
<p:selectOneMenu widgetVar="menu" styleClass="with-placeholder" panelStyleClass="hide-disabled" onchange="menu.jq.removeClass('with-placeholder')">
    <f:selectItem itemLabel="Select" itemDisabled="true" />
    <f:selectItem itemLabel="foo" itemValue="foo"/>
    <f:selectItem itemLabel="goo" itemValue="goo"/>
</p:selectOneMenu> 
```

和

```
.ui-selectonemenu.with-placeholder .ui-selectonemenu-label {
    color: #ccc;
}
.ui-selectonemenu-panel.hide-disabled .ui-selectonemenu-list-item.ui-state-disabled {
    display: none;
} 
```

这是一个[视频演示](http://www.screencast.com/t/oEi0CsxGkQq)。

# python - Python：洗牌后删除实例属性

> ID：14949779
> 
> 赞同：0
> 
> 时间：2013-02-19T04:20:17.520
> 
> 标签：python, class, attributes, overloading

我遇到了 numpy.random.shuffle 函数的奇怪行为。我向实例添加了属性，但在改组后它被删除了。

这是说明问题的代码：

```
#I'm making a class of time series.
class TimeSeries(object):
    def __init__(self, data):
        self.data = data
        self.num_points = len(self.data)

    def __getitem__(self, key):
        return self.data[key]

    def __len__(self):
        return self.num_points

dataset = [TimeSeries(numpy.random.random((10,3))) for _ in range(100)]
#Add new attribute
for ts in dataset:
    ts.weight = 1

dataset[0].weight  #returns 1
numpy.random.shuffle(dataset)
dataset[0].weight  #'numpy.ndarray' object has no attribute 'weight' 
```

我想保留 weight 属性，但在洗牌后删除。我做了一些试验。我发现的是：

*   如果数据集很小，问题就不会发生。（例如范围（100）>>范围（3））
*   洗牌后ID会发生变化。
*   如果 getitem, len 方法没有实现，问题就不会发生。

随机播放功能发生了什么？这是一个错误吗？我使用该功能是错误的方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:04:34.693

如果你只想洗牌主列表，你可以使用

```
import random
random.shuffle(dataset) 
```

# java - 为什么 liblinear 不能预测多数派？

> ID：14949781
> 
> 赞同：1
> 
> 时间：2013-02-19T04:20:23.387
> 
> 标签：java, machine-learning, classification, libsvm

大多数机器学习分类器在遇到没有以前见过的特征的​​实例时，会将示例与训练数据中最常见的类进行分类。

[liblinear-java](http://liblinear.bwaldvogel.de/)似乎不是这种情况，我想知道为什么会这样。这是一些示例代码，我在其中构建了一个示例问题，其中有两个特征，并且训练数据的`0`标签是`1`标签的 4 倍：

```
Problem problem = new Problem();
problem.l = 5;
problem.n = 2;
problem.x = new FeatureNode[][] {
  new FeatureNode[] { new FeatureNode(1, 1) },  
  new FeatureNode[] { new FeatureNode(1, 1) },  
  new FeatureNode[] { new FeatureNode(1, 1) },  
  new FeatureNode[] { new FeatureNode(1, 1) },  
  new FeatureNode[] { new FeatureNode(2, 1) },  
};
problem.y = new int[] {0, 0, 0, 0, 1};

Parameter parameter = new Parameter(SolverType.L2R_L2LOSS_SVC, 1.0, 0.01);
Model model = Linear.train(problem, parameter); 
```

`3`现在让我们在一个不在训练数据中的新特征上进行测试。由于经过训练的模型对特征一无所知`3`，我原以为预测的类将是`0`训练数据中最常见的类。

```
FeatureNode[] instance = new FeatureNode[] { new FeatureNode(3, 1) };
int prediction = Linear.predict(model, instance);
System.err.println(prediction); 
```

然而，最后一行打印出来`1`。这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:39:35.060

我相信这就是 liblinear 命令行版本的“-B”（偏差）参数旨在解决的问题。如果您直接创建 s，则该参数不可用，但它与在 every 的开头`FeatureNode`添加 a 基本相同。如果我遵循这种方法，并在训练和分类期间添加一个额外的偏差特征，那么一切正常。这是该代码的样子：`new FeatureNode(1, 1)``FeatureNode[]`

```
Problem problem = new Problem();
problem.l = 5;
problem.n = 3;
problem.x = new FeatureNode[][] {
  new FeatureNode[] { new FeatureNode(1, 1), new FeatureNode(2, 1) },  
  new FeatureNode[] { new FeatureNode(1, 1), new FeatureNode(2, 1) },  
  new FeatureNode[] { new FeatureNode(1, 1), new FeatureNode(2, 1) },  
  new FeatureNode[] { new FeatureNode(1, 1), new FeatureNode(2, 1) },  
  new FeatureNode[] { new FeatureNode(1, 1), new FeatureNode(3, 1) },  
};
problem.y = new int[] {0, 0, 0, 0, 1};

Parameter parameter = new Parameter(SolverType.L2R_L2LOSS_SVC, 1.0, 0.01);
Model model = Linear.train(problem, parameter);
FeatureNode[] instance = new FeatureNode[] { new FeatureNode(1, 1), new FeatureNode(4, 1) };
int prediction = Linear.predict(model, instance); 
```

为了弄清楚为什么需要偏置特性，我深入研究了 liblinear-java 代码。预测代码如下所示：

```
for (int i = 0; i < nr_w; i++)
    dec_values[i] = 0;

for (FeatureNode lx : x) {
    int idx = lx.index;
    // the dimension of testing data may exceed that of training
    if (idx <= n) {
        for (int i = 0; i < nr_w; i++) {
            dec_values[i] += w[(idx - 1) * nr_w + i] * lx.value;
         }
    }
} 
```

因此，在训练期间从未见过特征的情况下，我们只得到一个`dec_values`全为零的（决策值）数组，这意味着所有类具有相等的概率。因此，在分类过程中看到的每个实例中至少存在一个训练过程中看到的特征是至关重要的。

添加具有恒定值（例如`1`）的“偏差”特征解决了这个问题，允许模型学习默认权重以应用于任何新实例。在上面的代码中，模型学习了`0.0869565217391306`偏置特征的权重，这意味着模型正确地学会了偏爱类`0`而不是类`1`。

# django - Django：如何在不使用 SESSION_SAVE_EVERY_REQUEST 的情况下为 AnonymousUser 设置 sessionid cookie

> ID：14949783
> 
> 赞同：6
> 
> 时间：2013-02-19T04:20:25.783
> 
> 标签：django, session, session-cookies, anonymous-users

我正在尝试跟踪 AnonymousUsers 以确定他们何时首次访问该网站以及何时注册该网站。

为此，我创建了一个具有相关功能的中间件，但这最初假设每个 AnonymousUsers 已经有一个与之关联的会话（即 sessionid cookie 将在第一个响应中设置，并且关联的会话已经在 django_session 中创建）。*注意：存在会话应用程序和中间件*

似乎情况并非如此，因为查看会话中间件，当 AnonymousUser 第一次进入站点时，会话永远不会被修改（用户会这样做，因为设置了 '_auth_user_id' 和 '_auth_user_backend'），所以永远不会创建：

**SessionMiddleware.process_response**

```
def process_response(self, request, response):
    """
    If request.session was modified, or if the configuration is to save the
    session every time, save the changes and set a session cookie.
    """
    try:
        accessed = request.session.accessed
        modified = request.session.modified
    except AttributeError:
        pass
    else:
        if accessed:
            patch_vary_headers(response, ('Cookie',))
        if modified or settings.SESSION_SAVE_EVERY_REQUEST:
            if request.session.get_expire_at_browser_close():
                max_age = None
                expires = None
            else:
                max_age = request.session.get_expiry_age()
                expires_time = time.time() + max_age
                expires = cookie_date(expires_time)
            # Save the session data and refresh the client cookie.
            request.session.save()
            response.set_cookie(settings.SESSION_COOKIE_NAME,
                    request.session.session_key, max_age=max_age,
                    expires=expires, domain=settings.SESSION_COOKIE_DOMAIN,
                    path=settings.SESSION_COOKIE_PATH,
                    secure=settings.SESSION_COOKIE_SECURE or None,
                    httponly=settings.SESSION_COOKIE_HTTPONLY or None)
    return response 
```

* * *

**尝试 1**

为了尝试克服这个问题，在位于会话中间件下方的中间件中，我将强制会话上的 save() 来创建它：

```
if hasattr(request, 'session') and not request.session.session_key:
    request.session.save() 
```

这将提供 session_key，但不幸的是，当调用 SessionMiddleware.process_response 时，request.session.modified 仍然等于 False，因此未设置 sessionid cookie...

* * *

**尝试 2**

执行此操作的一种方法似乎以任意方式修改会话，以确保`request.session.modified == True`在 SessionMiddleware.process_response 中：

```
if hasattr(request, 'session') and not request.session.session_key:
    request.session.save()
    request.session['some_variable'] = True 
```

这似乎解决了我的问题，而不诉诸`SESSION_SAVE_EVERY_REQUEST`，这将是一个矫枉过正，但它似乎并不完全正确....

* * *

**问题**

如何确保会话是为以前没有访问过的 AnonymousUser 创建的，没有显式修改会话，或者没有`SESSION_SAVE_EVERY_REQUEST=True`？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T04:36:10.650

即使显式修改会话也可能失败（例如，将属性分配给会话属性）。

您需要明确设置`session.modified`为 true

```
if hasattr(request, 'session') and not request.session.session_key:
    request.session.save()
    request.session.modified = True 
```

查看[文档](https://docs.djangoproject.com/en/1.4/topics/http/sessions/#when-sessions-are-saved)在保存会话时的内容。

# python - 在 python 中导入 sikuli 模块时遇到问题。我正在使用 RIDE 运行 python 脚本

> ID：14949789
> 
> 赞同：1
> 
> 时间：2013-02-19T04:21:03.477
> 
> 标签：python, sikuli, robotframework

我在获取 sikuli+python 时遇到了麻烦。每当我通过 RIDE（机器人框架 IDE）执行 python 脚本时，我都会看到导入 sikuli api 的问题。我尝试在环境变量中添加 sikuli 路径，并将 sikuli lib 放在工作目录中。还是同样的问题。

Python和机器人框架版本

机器人框架 2.6.3（win32 上的 Python 2.7.2）

[错误] 表“设置”中的文件“C:\Sanity_Automation\Work_Project\robot_suite\quick_run.txt”出错：导入测试库“C:\Sanity_Automation\Work_Project\TestCreator.py”失败：ImportError：没有名为 sikuli 的模块。西库里

PYTHONPATH: ['C:\Sanity_Automation\Python272\lib\site-packages\robot\libraries', 'C:\Windows\system32\python27.zip', 'C:\Sanity_Automation\Python272\DLLs', 'C:\ Sanity_Automation\Python272\lib'、'C:\Sanity_Automation\Python272\lib\plat-win'、'C:\Sanity_Automation\Python272\lib\lib-tk'、'C:\Sanity_Automation\Python272'、'C:\ Sanity_Automation\Python272\lib\site-packages', 'C:\Sanity_Automation\Python272\lib\site-packages\wx-2.8-msw-unicode', '.']

回溯（最近一次通话最后）：

_non_dotted_import 中的文件“C:\Sanity_Automation\Python272\lib\site-packages\robot\utils\importing.py”，第 84 行

```
module = _import_module_by_path(name) 
```

_import_module_by_path 中的文件“C:\Sanity_Automation\Python272\lib\site-packages\robot\utils\importing.py”，第 38 行

```
module = __import__(modname) 
```

文件“C:\Sanity_Automation\Work_Project\TestCreator.py”，第 1 行，在

```
import ospf 
```

文件“C:\Sanity_Automation\Work_Project\ospf.py”，第 1 行，在

从 sikuli.Sikuli 进口 *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:19:32.827

要直接使用 Sikuli，您需要使用 jython 版本的 robotframework，但是如果由于您依赖的其他库而无法选择，我一直在研究自己的解决方案来解决这个问题 - 我已经创建了一个[客户端/服务器库](http://alistair-broomhead.github.com/robotframework-sikuliserver/docs/html/)使用 jython 在服务器上运行 Sikuli，但运行纯 python 客户端，可用于构建测试的业务对象。

最终目标是提供一个用于导入的库，它为大多数人提供了足够的接口，但提供了灵活的扩展基础——因为我目前是我知道的唯一使用它的人，我不太确定是什么把它放进去会是最有用的，但我会很乐意提供支持。

目前我自己在工作中使用它来针对 Flash 应用程序运行回归包，所以虽然它处于开发的早期阶段，但它已经处于有用状态......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:27:38.143

Sikuli 不会在 Python 解释器上运行，您只能使用 Jython。

# windows - 窗口 8 中的模拟器平板电脑

> ID：14949790
> 
> 赞同：0
> 
> 时间：2013-02-19T04:21:36.903
> 
> 标签：windows, simulator

我是window 8 Metro风格应用程序的开发人员，但我找不到模拟摇动平板电脑、转身、左转右转的方法……它有没有这些模拟动作？在模拟器 VS 2012 Express 中用于窗口 8。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:42:39.813

我不确定它是否存在于 VS 2012 的 express 中，但我在完整的 VS 2012 中拥有的 Windows 模拟器侧面有两个小的 3/4 圆形箭头按钮。它们会将平板电脑向左旋转或右 90 度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T23:19:40.127

模拟器可以旋转或翻转，以查看当用户更改屏幕方向时您的应用程序的行为。如果您想测试这样的应用程序以查看它是否针对纵向模式和横向模式进行了正确优化，这将派上用场。模拟器并没有消除在物理设备上完全验证应用程序的需要，因为它不会模拟所有加速度计敏感功能，例如倾斜，但它会为您节省大量时间来暴露应用程序响应中的潜在问题改变显示设备的方向。

也可在 VS 2012 express 中使用。

![您可以通过单击这些按钮来测试纵向或横向模式下的设计如何变化](../Images/ce8e0b07d2744fee3b97da7fe0b6e8a7.png)

# ruby - 根据选项调用方法（重构的最佳方法）

> ID：14949791
> 
> 赞同：0
> 
> 时间：2013-02-19T04:21:41.813
> 
> 标签：ruby, refactoring

我有一个函数，其中我传递一个字符串和一个将其用作正则表达式的选项

```
def regexp_this?(string, arg1, arg2, regx = false)
  if regx
    method1 %r{#{string}:someconstantstring}
    method2 %r{#{string}:someconstantstring:#{arg1}}
    method3 %r{#{string}:someconstantstring:#{arg1}:anotherconstant:#{#arg2}}
  else
    method1 "#{string}:someconstantstring"
    method2 "#{string}:someconstantstring:#{arg1}"
    method3 "#{string}:someconstantstring:#{arg1}:anotherconstant:#{#arg2}"
  end
end 
```

`method1`，`method2`并且`method3`是对 expire_fragment 的调用。我正在根据页面的当前状态构建缓存。如果声明了 arg1 或 arg2，那么我有不同的缓存键需要过期。

有没有办法重构这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T04:35:34.940

对于有条件的，至少，你应该能够做这样的事情：

```
def regexp_this?(string, arg1, arg2, regx = false)
  # Select whether you want a String or Regexp parameter.
  argument_klass = (regx ? Regexp : String)

  method1 argument_klass.new("#{string}: ...")
  method2 argument_klass.new("#{string}: ...")
  method3 argument_klass.new("#{string}: ...")
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:31:51.373

您对一种方法有多种责任，将它们分开并适当地命名它们。您在一个方法中有一个正则表达式验证、多个参数和多个方法。我推荐阅读[SOLID 原则](http://blogs.msdn.com/b/cdndevs/archive/2009/07/15/the-solid-principles-explained-with-motivational-posters.aspx)。

# asp.net-mvc - 实体框架自定义SQL并存储结果值

> ID：14949796
> 
> 赞同：0
> 
> 时间：2013-02-19T04:22:09.150
> 
> 标签：asp.net-mvc, entity-framework

我想在我的 EF 播种机中运行一个简单的自定义 SQL 查询，如何实现一个简单的 SQL 查询并将结果（一个 count()，只是一个整数）存储在 ac# 变量中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:57:23.863

试试这样：

```
var cmd = db.Database.Connection.CreateCommand();
cmd.CommandType = CommandType.Text;
cmd.CommandText = "/*query*/";
cmd.Parameters.Add(new SqlParameter("@param", paramValue));
var value = cmd.ExecuteScalar(); 
```

# java - 带有 OpenGL Android 的点数组

> ID：14949800
> 
> 赞同：2
> 
> 时间：2013-02-19T04:22:19.010
> 
> 标签：java, android, opengl-es, multidimensional-array, point

我试图像时尚一样在网格中制作一组点，但一个点只出现在中间：我

```
private Point[][] sq = new Point[10][10];

@Override
public void onDrawFrame(GL10 gl) {

    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

    gl.glLoadIdentity();

    for(int x = 0; x< 10 ; x++){
        for(int y = 0; y< 10 ; y++){
            sq[x][y] = new Point(x/10,y/10);
            gl.glTranslatef(0.0f, x/10,-5.0f);
             sq[x][y].draw(gl, 0, 1, 0);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T04:39:19.763

假设 openGL ES 与标准 openGL 相同，您每次转换时都需要推送和弹出矩阵。否则，您将第一次翻译 0，然后翻译 0.1，然后翻译 0.3，然后翻译 0.6，等等......

但我假设您想翻译 0、0.1、0.2、0.3、0.4 等...

我也不确定为什么你只用 x 值沿 y 轴平移？我认为这：

```
gl.glTranslatef(0.0f, x/10,-5.0f); 
```

应该是这样的：

```
gl.glTranslatef(x/10.0f, y/10.0f, -5.0f); 
```

我想你想要这样的东西：

```
for(int x = 0; x< 10 ; x++){
    for(int y = 0; y< 10 ; y++){

        sq[x][y] = new Point(x/10.0f, y/10.0f);

        gl.glPushMatrix();
        gl.glTranslatef(x/10.0f, y/10.0f, -5.0f);
        sq[x][y].draw(gl, 0, 1, 0);
        gl.glPopMatrix();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T06:10:31.880

您可以`gl.glVertex2f`用来绘制顶点，并将坐标存储在数组中：

```
float [] coords = new float[200];
for (int x = 0; x < 10; x++) {
    for (y = 0; y < 10; y++) {
        coords[(x * 10 + y) * 2] = (float)x/10.0f;
        coords[(x * 10 + y) * 2 + 1] = (float)y/10.0f;
    }
}

for (int i = 0; i < 100; i++)
    gl.glVertex2f(coords[i * 2], coords[i * 2 + 1]); 
```

如果要绘制规则网格，给定具有绝对坐标的顶点，则不需要使用`gl.glTranslate`.

最后，您可以避免每次进行渲染时都重新构建点数组：只需构建一次数组 - 比如说现在在构造函数中，并且只在数组上循环以在`onDrawFrame`方法中进行绘制。我不知道你以后的计划是什么，但如果数组大小没有改变，即使你需要移动点，你也会通过始终使用相同的方式获得一些性能。

作为练习，我建议创建一个类来包装坐标数组并在数组上提供一些简单的操作。这可以很好地介绍 OpenGL 支持的顶点数组和缓冲区功能。

# python - 使用 python 下载不完整的文件

> ID：14949801
> 
> 赞同：2
> 
> 时间：2013-02-19T04:22:20.437
> 
> 标签：python, urllib2

我有以下python代码：

```
import urllib2
DIR = '/home/aaron/Desktop/aaron-file/media/'
LOC = DIR+'/'+bounty.title+'.mp3'

u = urllib2.urlopen(url, 'rb')
localFile = open(LOC, 'wb')
localFile.write(u.read())
localFile.close()
u.close() 
```

它只创建小文件（大约 60kb 文件），文件运行正常，可以接受突然停止。当我从 firefox 下载（复制并粘贴相同的 url）时，我会得到完整大小的文件（大约 2mb）。

我正在运行 32 位的 ubuntu。

更新：我认为这可能是 http 内容长度不准确的问题。那么我将如何忽略/设置不同的长度。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T07:40:44.437

也许您正在下载的服务器拒绝 urllib2 默认用户代理。考虑构建一个带有假用户代理标头的自定义开启器，如下所示：

```
opener = urllib2.build_opener()
opener.addheaders = [('User-agent', 'Mozilla/5.0')] 
```

并使用`opener()`而不是`urllib2.urlopen()`

# python - Tkinter：在文本小部件中使用 Checkbutton + Scrollbar

> ID：14949803
> 
> 赞同：2
> 
> 时间：2013-02-19T04:22:52.013
> 
> 标签：python, tkinter

我并排创建了两个文本框小部件。左侧文本框包含 100 行 Checkbutton 框。右侧文本框包含 100 行文本。我已将两个文本框配置为具有相同的 30 高度和 10 宽度。

当我运行程序时，左边的文本框垂直增长超出了我的可视屏幕区域的大小。结果，右侧的文本框被推到了框架下方，以至于我再也看不到它了。我知道它在那里，因为当我将行数（两个框）减少到 50（而不是 100）时，我可以看到正确的文本框。

另外，我注意到左侧的滚动条没有连接到左侧的文本框。但是，右侧的滚动条正确连接到右侧的文本框。

你能帮我理解吗：

1）为什么左侧文本框垂直增长（超出定义的文本小部件大小）并且与右侧文本框大小和位置不同步？

2）为什么左边的滚动条不附加到左边的文本小部件（如右边的文本框）？

到目前为止，这是我的代码：

```
#!/usr/bin/python
from Tkinter import *

class MyApp:
    def __init__(self, parent):
       self.myParent = parent
       self.main_container = Frame(self.myParent)
       self.main_container.grid(row=0, column=0, columnspan=4)

       self.left_frame = Frame(self.main_container)
       self.left_frame.grid(row=0, column=0, columnspan=2)

       self.right_frame = Frame(self.main_container)
       self.right_frame.grid(row=0, column=2, columnspan=2)

       self.checkbox_scrollbar = Scrollbar(self.left_frame)
       self.checkbox_scrollbar.grid(row=0, column=1, sticky='NS')
       self.checkbox_text = Text(self.left_frame, height=30, width=10, yscrollcommand=self.checkbox_scrollbar.set)
       self.checkbox_text.grid(row=0, column=0)
       self.checkbox_scrollbar.config(command=self.checkbox_text.yview)

       self.databox_scrollbar = Scrollbar(self.right_frame)
       self.databox_scrollbar.grid(row=0, column=1, sticky='NS')
       self.databox_text = Text(self.right_frame, height=30, width=10, yscrollcommand=self.databox_scrollbar.set)
       self.databox_text.grid(row=0, column=0)
       self.databox_scrollbar.config(command=self.databox_text.yview)

    my_dict = {}
    for each_num in range(100):
        my_line = "Line number: " + str(each_num)
        my_dict[my_line] = 0

    for my_key in my_dict:
        my_dict[my_key] = IntVar()
        cb = Checkbutton(self.checkbox_text, text=my_key, variable=my_dict[my_key])
        cb.grid(sticky='W')

    for each_entry in range(100):
        entry_line = "This is entry number: " + str(each_entry) + "\n"
        self.databox_text.insert(END, entry_line)

root = Tk()
root.title("Checkbox UI Test")
myapp = MyApp(root)
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:38:05.850

我已经过了一个小时，但是我的 Tkinter 知识并不像我想要的那样完整，所以我相信其他人会提出另一个答案，但是：

据我所知，该`Text`框实际上并没有显示出来，它被`CheckBox`后面的 s 隐藏了。尝试`checkbox_text.insert(END, "some text")`将背景更改为`"red"`，您会发现它在屏幕上不可见，即使您将 100 个复选框更改为仅绘制 2 个。我不确定为什么`Text`不遵守高度限制，但是`grid`' s 的ing`CheckBox`必须与它有关。

同样的问题正在影响`ScrollBar`，它附加在左侧`Frame`，而不是`Text`; 我还没有尝试过，但也许在您创建`Text`要附加到的对象后创建它可能会有所帮助。

您关于它不同步的另一个问题可能是设置问题`weight`，就像[这样](https://stackoverflow.com/a/1441337/541208)，但它对我不起作用。我认为这可能是因为它们不属于同一个网格，因为它们无法相互交流它们的大小。两者的`Frames`尺寸相同，我认为这是它所能做的最好的。

已经很晚了，我可能对这里的东西有误，所以请对这一切持保留态度。

如果在与我的问题相关的小部件上，我喜欢做一些调试`.config(bg="RED")`工作，有时这将帮助我准确地想象正在发生的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T03:59:17.977

我需要使用名为 window_create 的 Text 小部件的方法来插入我的嵌入式对象（我的 checkbutton 小部件）。以下是如何实现它。希望这对其他人有帮助：

```
for my_key in my_dict:
    my_dict[my_key] = IntVar()
    cb = Checkbutton(text=my_key, variable=my_dict[my_key])
    self.checkbox_text.window_create("END", window=cb)
    self.checkbox_text.insert("END", "\n") 
```

# php - 如何使用moodle core并摆脱其他一切？

> ID：14949811
> 
> 赞同：0
> 
> 时间：2013-02-19T04:23:41.023
> 
> 标签：php, content-management-system, moodle

（使用 Moodle 2.4）

在我的公司，我们需要编写一个 Web 应用程序，该应用程序使用 Moodle 的内部机制来管理课程、用户、数据库连接等，但仅此而已。没有其他的。

我们想要摆脱 YUI、GUI 和任何图形化的东西。我们不想要 $PAGE 或类似的东西，因为它与 moodle 中的重要数据（用户、课程内容等）没有任何关系。我们只想要核心。我们将制作一个全新的前端。我们有自己的框架。

是否有一个 PHP 文件可以包含在我们的脚本中，让我们调用一些函数或向 Moodle 核心发送一些命令，以创建用户、获取用户列表、创建课程等？

如果是这样，它们是哪些？从哪儿开始？

我已经找了几个月了；在手册、moodle 的文档等中。但我仍然没有一个直截了当的答案。

我希望你知道我的意思。就像是

```
require_once('moodle_core.php');
$MOODLE_CORE -> create_user('Joe Winston','JW','123Password'); 
```

这样的事情存在吗？有这方面的教程或书籍吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:04:13.230

例如，当您包含主配置文件时，Moodle 魔术就开始了 -

```
require_once 'config.php';

//load course lib file to use course related functions
require_once $CFG->dirroot.'/course/lib.php';

$course = new stdClass();
$course->category = 1;
$course->fullname = 'My_test_course';

create_course($course); 
```

有关详细功能，请查看 moodle 文档 - [http://docs.moodle.org/dev/Core_APIs](http://docs.moodle.org/dev/Core_APIs)

# iis-7 - ColdFusion IIS 维护页面

> ID：14949812
> 
> 赞同：1
> 
> 时间：2013-02-19T04:23:42.167
> 
> 标签：iis-7, coldfusion, coldfusion-9, maintenance

我们所有的 ColdFusion 站点都通过 IIS 运行，当我们升级 ColdFusion 时，我们希望能够拥有一个涵盖所有站点的维护页面。

您将如何为服务器上所有站点上的所有页面设置一个全部捕获？

我们不能使用 ColdFusion 代码来做到这一点，因为 ColdFusion 将在升级时关闭。

我只能找到此类问题的 aspx 解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:00:57.977

在 IIS 中创建一个新网站，创建一个新的主目录并将您的“升级”消息放入其中。将站点绑定到所有未分配的 IP 地址地址。准备好后，关闭其他站点，然后它们将自动重定向到临时站点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:02:38.890

在 IIS 中设置一个维护站点，该站点分配给您的站点经常使用的所有 IP 和所有端口。当其他站点启动时，您将无法启动此站点。

像这样写一个脚本（PowerShell是最简单的）：

```
# Stop each site
C:\Windows\System32\inetsrv\appcmd stop site $siteName
C:\Windows\System32\inetsrv\appcmd stop site $siteName2

# Start Maintenance site
C:\Windows\System32\inetsrv\appcmd start site $maintenanceSiteName 
```

# android - android setting.db 蓝牙名称

> ID：14949813
> 
> 赞同：2
> 
> 时间：2013-02-19T04:23:52.007
> 
> 标签：android, sqlite

我注意到在 android 4.2.1 上的 settings.db 中修改 bluetooth_name 时存在差异。

我已经运行了以下命令：

```
sqlite> select * from secure where name is "bluetooth_name";
60|bluetooth_name|Samsung Galaxy S III

sqlite> update secure set value = "TESTY" where _id = 60;

sqlite> select * from secure where name is "bluetooth_name";
60|bluetooth_name|TESTY

adb reboot 
```

重启后：

```
sqlite> select * from secure where name is "bluetooth_name";
61|bluetooth_name|Samsung Galaxy S III 
```

上一行已被删除，系统创建了一个新的“61”。

我想知道为什么会发生这种情况，如何更改这种行为，或者如何使用 sqlite3 更改 bluetooth_name 的值。

谢谢

# javascript - 将 TypeScript 用于 CMS 是否值得？

> ID：14949814
> 
> 赞同：0
> 
> 时间：2013-02-19T04:23:59.450
> 
> 标签：javascript, content-management-system, typescript, ecmascript-6

首先，一些背景：我有一个想法来制作一个几乎不依赖于 JavaScript 使用的 CMS（我可以更具体，但这与问题无关）

我想问，CMS 中使用的所有 JavaScript 脚本都值得使用 TypeScript 吗？当然，不是用纯 JavaScript 编写的外部的，而是所有自定义的，可以并且将被其他可能不知道 TypeScript 的用户使用......这将迫使他们学习编写或至少阅读 TypeScript ..

我知道 TypeScript 编译为纯 JavaScript，它的语法很像 EcmaScript 6，但是编译后的 JS 并不是一直都非常可读......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T08:17:49.697

如果静态类型对您有帮助，请使用它。

如果您的 JavaScript 很少，则需要权衡静态类型的好处与转译为 JavaScript 的额外步骤。

在一个更大的项目中，接口、模块和类之类的东西更倾向于 TypeScript。

# regex - Regex：一个简单的正则表达式

> ID：14949816
> 
> 赞同：0
> 
> 时间：2013-02-19T04:24:13.710
> 
> 标签：regex

我有一个文本区域，它需要验证链接（Web、Intranet 或其他 PC 中的共享文件夹）。我使用了这个正则表达式：`^(http:\/\/|https:\/\/|ftp:\/\/|www.){1}([0-9A-Za-z]+\.)`. 我的代码如下。

```
var isUrlValid = false;
var urlRegex2 = new RegExp(
  "^(http:\/\/|https:\/\/|ftp:\/\/|www.){1}([0-9A-Za-z]+\.)");
isUrlValid = urlRegex2.test(linkPathVal); 
```

这不会验证以下链接：

```
http://abcserverName/Home/Index#
https://wiki.abc.in/abc/xyz 
```

但它验证了[http://google.com](http://google.com)、[http://www.google.com](http://www.google.com)等其他人。我可以知道我哪里出错了吗？我知道这很简单，但我对 Regex 并不了解。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T04:37:02.617

这是您的正则表达式的可视化。从这里应该很容易看出你哪里出错了：

![在此处输入图像描述](../Images/980f9d7c2f7050fc35f5ba5d2c8a7830.png)

您不允许在协议字符串之后使用除字母数字和句点之外的任何内容。您可能还希望允许使用斜杠、井号、查询字符串字符等。

实际上，您的正则表达式似乎只是在检查它是否以协议字符串（或 www）开头，后跟一些字母数字，然后是句点。它将匹配您示例中的第一个句点`https://wiki.abc.in/abc/xyz`。它不会匹配`http://abcserverName/Home/Index#`，因为没有句号，而您的正则表达式需要一个。

# python - 构建 WebScraper 时出错：TypeError：“NoneType”对象没有属性“__getitem__”

> ID：14949817
> 
> 赞同：1
> 
> 时间：2013-02-19T04:24:14.193
> 
> 标签：python, google-api, web-scraping

正在构建一个网络爬虫，显示网络趋势的热门网址。但是我总是返回以下错误。

```
Traceback (most recent call last):
  File "D:\Ceryx\webSearch.py", line 21, in <module>
    topl=webScraper(m)
  File "D:\Ceryx\webSearch.py", line 12, in webScraper
    hot = data['results'][0]['url']
TypeError: 'NoneType' object has no attribute '__getitem__' 
```

帮助！！

```
import re
import json
import urllib, urllib2

def webScraper(trends):
    query=urllib.urlencode({'q':trends})
    url = 'http://ajax.googleapis.com/ajax/services/search/web?v=1.0&%s' % query
    response = urllib.urlopen(url)
    extract = response.read()
    results = json.loads(extract)
    data = results['responseData']
    hot = data['results'][0]['url']
    return hot

response = urllib2.urlopen('http://www.google.com/trends/hottrends/atom/hourly')
html = response.read()
matchObj = re.findall(r'<a[^>]*?>(.*?)</a>', html)

print "Urls"
for m in matchObj:
    topl=webScraper(m)
    print m,topl 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:34:14.880

错误在这一行：

```
hot = data['results'][0]['url'] 
```

这意味着以下之一是`None`

```
data
data['results']
data['results'][0] 
```

您可以通过连续打印找出哪一个：

```
print 'data',data
print 'data[results]',data['results']
print 'data[results][0]',data['results'][0] 
```

然后，百万美元的问题将是你`json`最初是如何解决这个问题的——并弄清楚你需要做什么来处理它（或者如果你能控制这些事情，就阻止它）。:)

# r - 将数据分成 bin 并计算平均值

> ID：14949819
> 
> 赞同：0
> 
> 时间：2013-02-19T04:24:21.997
> 
> 标签：r, interpolation, average, bins

我有这个样本数据

```
Time(s) Bacteria count
0.4 2
0.82    5
6.67    8
7.55    11
8.21    14
8.89    17
9.4 20
10.18   23
10.85   26
11.35   29
11.85   32
12.41   35
13.36   38
13.86   41
14.57   44
15.08   47
15.67   50
16.09   53
16.59   56
18.53   59
24.43   62
25.32   65
25.97   68
26.37   71
26.93   74
27.87   77
28.33   80
29.1    83
29.88   84
30.88   85
31.99   86
35.65   87
36.06   88
36.46   89
36.96   90
37.39   91
37.95   92
38.56   93
39.22   94
39.79   95
40.56   96
41.47   97
42.02   98
42.73   99
43.4    100
43.93   101
44.67   102
45.24   103
45.9    104
46.58   105
47.22   106
47.89   107
48.64   108
49.13   109
49.91   110
50.48   111
51.25   112
53.35   113
53.98   114
54.69   115
55.82   116
56.38   117
56.99   118
62.09   119
63.1    120
63.84   121
64.64   122
65.37   123
66.61   124
69  125
69.72   126
70.78   126
73.32   126
74.65   126
75.12   126
75.45   126
75.94   126
76.38   126
76.84   126
77.95   126
78.61   126
79.06   126
79.62   126
80.19   126
82.73   126
85.3    126
85.68   126
86.42   126
87.41   126
88.08   126
91.74   126
92.81   126
93.21   126
94.32   126
96.32   126
102.03  126
102.71  126
104.45  126
105.04  126
105.65  126
106.16  126
107.44  126
107.9   126
109.72  126
110.24  126
111.24  126
111.84  126
112.45  126
113.12  126
114.02  126
114.67  126
115.24  126
115.85  126
117 126
121.26  126
121.8   126
125.8   126
127.26  126
128.37  126
129.48  126
130.27  126
131.04  126
131.72  126
132.47  126
133.21  126
134.27  126
134.87  126
136.04  126
136.6   126
137.27  126
140.83  126
142.05  126
143.63  126
144.12  126
149.83  126
151.07  126
151.79  126
153.24  126
154.14  126
155.24  126
156.58  126
157.51  126
158.25  126
161.43  126
162.14  126
162.8   126
164.26  126
165.09  126
165.76  126
166.83  126
167.42  126
168.94  126
169.75  126
170.52  126
171.19  126
172.67  126
173.44  126 
```

所以我有从时间（0 s）到时间（2000 s）的数据，我们正在使用的这个程序计算一个盘子中的细菌数量，只要它成倍增加或者如果它没有......它不会打印出任何东西所以它基本上会跳过它没有检测到任何东西的时间。所以我真的很想用 R 以 30 秒的间隔分离数据。我想让 R 每 30 秒计算一次细菌孢子的平均数量。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T05:50:52.357

我做了一些建模。我做了一些假设。我已经对这个系统进行了建模，就好像你从 126 个细菌开始，每个细菌都有可能变得“活跃”。在试验结束时，所有细菌都“活跃”。我已经调用了你的数据`bacteria`

```
bacteria.glm <- glm(cbind(Bacteria_count, 126 - Bacteria_count) ~ Time, 
                    data=bacteria, family=binomial(logit))

plot(Bacteria_count/126 ~ Time, data=bacteria)
lines(bacteria$Time, bacteria.glm$fitted, col="red") 
```

![在此处输入图像描述](../Images/6e4616967036efc286019c0b9702df1b.png)

鉴于此，我们可以以 30 秒的间隔进行插值：

```
bacteria_intervals <- seq(0, 173.44, 30)
bac_predict<-data.frame(Time=bacteria_intervals, 
                        Bacteria_count=predict(bacteria.glm, data.frame(Time=bacteria_intervals), 
                                               type="response")*126)

plot(bacteria)
points(Bacteria_count~Time, data=bac_predict, col="red", pch=16) 
```

![在此处输入图像描述](../Images/0d0f7ebf32b469fbca7214e4370443fe.png)

```
bac_predict
##   Time Bacteria_count
## 1    0       12.39587
## 2   30       76.11856
## 3   60      120.36021
## 4   90      125.57925
## 5  120      125.96982
## 6  150      125.99784 
```

或者，对于线性插值：

```
bacteria_linear <- approx(bacteria, xout=seq(0, 173.44, 30))
setNames(as.data.frame(bacteria_linear), c("Time", "Bacteria_count"))
##   Time Bacteria_count
## 1    0             NA
## 2   30        84.1200
## 3   60       118.5902
## 4   90       126.0000
## 5  120       126.0000
## 6  150       126.0000 
```

甚至样条插值：

```
bacteria_spline <- spline(bacteria, xout=seq(0, 173.44, 30))
setNames(as.data.frame(bacteria_spline), c("Time", "Bacteria_count"))
##   Time Bacteria_count
## 1    0      -1.672644
## 2   30      84.110483
## 3   60     118.854542
## 4   90     126.000000
## 5  120     126.000000
## 6  150     126.000000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T06:10:04.837

完全幼稚的建模只取 30 秒块中最后一个值的平均值，以及下一个 30 秒块的第一个值：

获取数据：

```
test <- read.table(text="time bacteria 
0.4 2
0.82 5
6.67 8
7.55 11
8.21 14
8.89 17
9.4 20
10.18 23
10.85 26
11.35 29
11.85 32
12.41 35
13.36 38
13.86 41
14.57 44
15.08 47
15.67 50
16.09 53
16.59 56
18.53 59
24.43 62
25.32 65
25.97 68
26.37 71
26.93 74
27.87 77
28.33 80
29.1 83
29.88 84
30.88 85
31.99 86
35.65 87
36.06 88
36.46 89
36.96 90
37.39 91
37.95 92
38.56 93
39.22 94
39.79 95
40.56 96
41.47 97
42.02 98
42.73 99
43.4 100
43.93 101
44.67 102
45.24 103
45.9 104
46.58 105
47.22 106
47.89 107
48.64 108
49.13 109
49.91 110
50.48 111
51.25 112
53.35 113
53.98 114
54.69 115
55.82 116
56.38 117
56.99 118
62.09 119
63.1 120
63.84 121
64.64 122
65.37 123
66.61 124
69 125
69.72 126
70.78 126
73.32 126
74.65 126
75.12 126
75.45 126
75.94 126
76.38 126
76.84 126
77.95 126
78.61 126
79.06 126
79.62 126
80.19 126
82.73 126
85.3 126
85.68 126
86.42 126
87.41 126
88.08 126
91.74 126
92.81 126
93.21 126
94.32 126
96.32 126
102.03 126
102.71 126
104.45 126
105.04 126
105.65 126
106.16 126
107.44 126
107.9 126
109.72 126
110.24 126
111.24 126
111.84 126
112.45 126
113.12 126
114.02 126
114.67 126
115.24 126
115.85 126
117 126
121.26 126
121.8 126
125.8 126
127.26 126
128.37 126
129.48 126
130.27 126
131.04 126
131.72 126
132.47 126
133.21 126
134.27 126
134.87 126
136.04 126
136.6 126
137.27 126
140.83 126
142.05 126
143.63 126
144.12 126
149.83 126
151.07 126
151.79 126
153.24 126
154.14 126
155.24 126
156.58 126
157.51 126
158.25 126
161.43 126
162.14 126
162.8 126
164.26 126
165.09 126
165.76 126
166.83 126
167.42 126
168.94 126
169.75 126
170.52 126
171.19 126
172.67 126
173.44 126",header=TRUE) 
```

找到块并取平均值：

```
test$block <- findInterval(test$time,seq(0,max(test$time),30))

apply(
  rbind(
    tapply(test$bacteria,test$block,max),
    c(tail(tapply(test$bacteria,test$block,min),-1),NA)
  ),
  2,
  mean,
  na.rm=TRUE
) 
```

结果：

```
 1     2     3     4     5     6 
 84.5 118.5 126.0 126.0 126.0 126.0 
```

需要注意的是，该系统仅适用于相对频繁的重新采样发生的测试。巨大的差距会将结果排除在外，您最好使用更复杂的解决方案。

# c# - 从后面的代码中检索 javascript var 值

> ID：14949821
> 
> 赞同：3
> 
> 时间：2013-02-19T04:24:45.697
> 
> 标签：c#, javascript, c#-4.0, jquery

我的整个 javascript 都在后面的代码上。我想为后面的代码上的 ajax 数据检索 javascript var EmailId 值。但是因为我必须把它写在双引号中，它会导致很多问题。这是我的代码，

```
protected void Page_Load(object sender, EventArgs e)
{
    //HttpResponse response = HttpContext.Current.Response;
    //response.AddHeader("X-Frame-Options", "GOFORIT");

    //Response.AddHeader("X-Frame-Options", "GOFORIT");
    Session["txtEmail"] = txtEmail;

    if (!IsPostBack)
    {
        GetItemsList();
        Session["ProfileImage"] = imgProfilePicture;

        if (Convert.ToBoolean(Session["GotToken"]) == true)
        {
            GetProfilePic();
        }

        if (HttpContext.Current.Request.QueryString["code"] != null)
        {
            Session["code"] = HttpContext.Current.Request.QueryString["code"];
            string success = TestFB.AllowAppAuthentication(Convert.ToString(Session["ItemID"]));
            StringBuilder sb = new StringBuilder();
            var javacriptVariable = "<%= $('#txtEmail').val() %>";
            sb.Append("jQuery(function() { ");
            sb.Append(@"jQuery('#dialog-form').dialog({
                                autoOpen: true,
                                height: 500,
                                width: 500,
                                modal: true,
                                buttons: {
                                    'Participate': function () {
                                        var bValid = true;                         
                                        var EmailId = $('#txtEmail').val();

                                        var chkTermsAndConditions = document.getElementById('chkTermsAndConditions').checked;
                                        if (bValid && chkTermsAndConditions == true) {
                                            console.log(EmailId);
                                            $('p.validateTips').text('');
                                            $.ajax({
                                                type: 'POST',
                                                url: 'FitbookContest.aspx/InsertUsersItem',
                                                contentType: 'application/json; charset=utf-8',
                                                dataType: 'json',
                                                data: " + "\"{'email':'" + javacriptVariable  + "', 'ItemId':'" + Convert.ToString(Session["ItemID"]) + "'}\"," +
            " success: function (data) { " +
            "console.log(EmailId); " +
            "$('#lblErrorMessage').text(''); " +
            "document.getElementById('chkTermsAndConditions').checked = false; " +
            "if (data.d == false) { " +
            "alert('Sorry!You can participate only once!'); " +
            "$(this).dialog('close'); " +
            "} else { " +
            "alert('Email will be sent to your Account soon!'); " +
            "$(this).dialog('close'); " +
            "} " +
            "}, " +
            "context: $(this), " +
            "}); " +
            "} " +
            "}, " +
            "Cancel: function () { " +
            "document.getElementById('chkTermsAndConditions').checked = false; " +
            "$(this).dialog('close'); " +
            "} " +
            "}, " +
            "close: function () { " +
            "$(this).dialog('close'); " +
            "} " +
            "});");

            sb.Append(" }); ");
            //ClientScript.RegisterStartupScript(this.GetType(), "popup", sb.ToString(), true);
            ScriptManager.RegisterStartupScript(this, GetType(), "modalscript", sb.ToString(), true);
        }
    }
} 
```

我想在页面加载时打开一个弹出窗口！并且还想检索将写入弹出文本框中的电子邮件。我只能使用 javascript 检索它。但是由于后面代码的双引号，我无法在“数据”上得到它，因为`[ data: " + "\"{'email':'" + javacriptVariable + "', 'ItemId':'" + Convert.ToString(Session["ItemID"]) + "'}\"," + ].`请任何人帮助我。欢迎提出建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:17:40.543

如果要在字符串中使用双引号，请使用 "" 而不是 \"，并在字符串包围值之前使用 @。所以：

```
data: " + @"""{'email':'" + javacriptVariable  + "', 'ItemId':'" + Convert.ToString(Session["ItemID"]) + "'}""," + 
```

[编辑]实际上，在我看来，您根本不应该用双引号将其括起来：

```
data: {'email': $('#txtEmail').val(), 'ItemId':'" + Convert.ToString(Session["ItemID"]) + "'}," + 
```

# mathematical-optimization - 多对多“广义分配问题”

> ID：14949828
> 
> 赞同：0
> 
> 时间：2013-02-19T04:25:44.607
> 
> 标签：mathematical-optimization, linear-programming

我遇到了特定问题。我必须安排 5 名员工工作超过 14 天。每个员工在 14 天中只能工作 9 天，并且每天必须安排 3 名员工。关键部分是每个员工在某一天工作都会受到惩罚。因此，如果他们在那天不能工作，如果他们可以工作并且不介意，则罚款 10，最后如果他们可以但不想罚款，则罚款 5。

我有每个员工每天的罚款值矩阵。我正在尝试找到一种方法来写出我的约束。

我想到了矩阵 A（惩罚矩阵）和矩阵 B（调度矩阵）和矩阵 C，其中 C（i，j）= A（i，j）*B（i，j）。鉴于此设置，如果 A(i,j) 等于 0（员工不工作），则不考虑处罚，反之亦然。

那么我可以说作为我的约束：

A(1,1) + A(1,m) + A(1,n) <= 9

和

A(1,1) + A(m,1) + A(n,1) = 3

我正在最小化：C(1,1) + C(m,m) + C(n,n)

我这样看待它的问题是试图在优化算法中使用它。单纯形算法应该能够解决任何 LP 问题，但它可能是最慢的。我被卡住了，现在我确定我看错了。如果有人能给我一个全新的视角，并可能解释我为什么以错误的方式看待这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:58:22.593

我认为您犯了一个建模错误，使您的问题变得比需要的更困难。

为什么要使用惩罚函数对“有能力和愿意”、“有能力但不愿意”和“不能”进行建模？您不只是想尽量减少员工被分配一个员工有能力但不愿意工作的时间段的次数吗？（当然，没有分配任何他们无法工作的员工位置？）

如果您像我上面提出的那样修改问题，则可以将其建模为直接的最小成本流问题。您有一组用于员工的节点和一组用于时隙的节点。如果员工能够在该时间段工作，则将员工连接到容量边缘为 1 的时间段。如果员工当时愿意工作，给它成本 0，如果员工不愿意工作，给它成本 1。添加源和接收器；源应该对每个容量为 9（他们可以工作的天数）和零成本的员工有一个优势，而每个时间段应该对容量为 3 和零成本的接收器有一个优势。

从头开始编写最小成本流求解器相对简单。

如果您想禁止时隙由两个或更多不愿意的员工配备，我认为您将问题建模为整数程序。 [GLPK](http://www.gnu.org/software/glpk/)是一个免费的线性和整数程序求解器。它不是最先进的，但它确实可以很好地解决很多问题。我怀疑它在解决像你这样的小规模实例时会遇到麻烦。

# ftp - 使用 Powershell 与 FileZilla 进行 Ftp 上传

> ID：14949830
> 
> 赞同：4
> 
> 时间：2013-02-18T15:31:03.963
> 
> 标签：ftp, powershell, upload, filezilla

对于 210MB 的文件，在 Powershell 中使用如下脚本需要 10 多分钟：

```
$webclient = New-Object System.Net.WebClient
$uri1 = New-Object System.Uri($Ftp2)
$webclient.UploadFile($uri1, $File2) 
```

但是，使用 FileZilla，同一文件只需不到 2 分钟。

FileZilla 优化了吗？我可以以某种方式改进 Powershell 调用吗？

我更喜欢使用 PS，因为我有上传多 GB 文件的脚本......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:30:30.320

设置 proxy = null 并没有改变时间，但是，使用 FTPWebRequest 就可以了。

# scala - Scala 中用于理解的补救语法问题

> ID：14949831
> 
> 赞同：2
> 
> 时间：2013-02-19T04:25:59.073
> 
> 标签：scala, list-comprehension

我在 Scala 2.10 中遇到语法问题。

`for(a <- List(Some(1,2)); b <- a) yield b`评估为`List(1,2)`

那么为什么不`for(a <- Some(List(1,2)); b <- a) yield b`评估同样的事情呢？

类型检查器抱怨第二个表达式 ( `b <-a`) 说它`List[Int]` 在期待一个`Option[?]`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T04:56:55.587

我最近对此进行了解释——希望有人能找到链接。这是一个反复出现的问题，因此很可能已关闭。

无论如何，外部生成器控制表示。这发生在每个级别，所以如果我有这个：

```
for { 
  a <- A
  b <- B
  c <- C
} yield f(a, b, c) 
```

那么 的表示由`f(a, b, c)`控制`C`，that 的表示由 控制`B`，最终结果的表示由 控制`A`。因此，对于大多数实际目的，for comprehension 的表示由第一个生成器控制。

那么我所说的“代表”是什么意思？嗯，一个 for 理解通常是一个单子理解（实际上，它只是对像`flatMap`and这样的方法的一组调用`map`，所以它可以是*任何*类型检查的东西）。这意味着给定一个 monad`M[A]`和一个 function `A => M[B]`，然后您可以转换`M[A]`，`M[B]`其中`M`monad 是“表示”。

这意味着，在大多数情况下，不可能在 for 理解中组合`Option`和。`List`所有集合在 中都有一个共同的父级`GenTraversableOnce`，因此将它们组合起来没有问题（尽管事情比引擎盖下的要复杂得多）。

但是，存在从`Option`to的隐式转换`Iterable`。在这种情况下，当 Scala`b <- a`在第一个示例中找到，并且知道它不能通过 an`Option`因为理解被 a “控制”时`List`，它会将 the`Option`转换为 an `Iterable`，并且一切正常。

但是，在第二种情况下不会发生这种情况。用 an 进行 for 理解是可以的`Option`，因此无需将其转换为`Iterable`. 不幸的是，无法将 a 转换`List`为 an `Option`（这种转换的结果是什么？），这会导致错误。

Scala 不会“回溯”`a <- Some(List(1, 2))`并对其应用隐式转换，因为 Scala 中的类型推断只会继续进行——它之前决定的内容将保持原样。

我衷心建议您查看相关问题并了解 for comprehension 是如何翻译的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T08:59:01.113

丹尼尔解释了其中的复杂性。但我想补充一些细节，因为我发现这种行为非常不直观，而且我自己也遇到过这种混音`Option`问题`List`。这特别烦人，因为如您所见，它在一个方向上起作用，但在另一个方向上不起作用。

因此，根据您将拥有的理解规则

```
def test(a: Option[List[Int]]) = a.flatMap(_.map(identity)) 
```

失败

```
<console>:7: error: type mismatch;
 found   : List[Int]
 required: Option[?]
           def test(a: Option[List[Int]]) = a.flatMap(_.map(identity))
                                                           ^ 
```

但是你可以让它工作：

```
def test(a: Option[List[Int]]) = (a: Iterable[List[Int]]).flatMap(_.map(identity))

test(Some(List(1,2)))  // List(1,2) 
```

或返回`for`：

```
for(a <- Some(List(1,2)).toIterable; b <- a) yield b 
```

应该`for`自己强加这种转换吗？老实说，我不知道，但我和你一样感到惊讶，它不起作用。

# python - 使用 Python 变量搜索 SQLite 数据库

> ID：14949833
> 
> 赞同：1
> 
> 时间：2013-02-19T04:26:01.327
> 
> 标签：python, sqlite

我有一个 SQLite 数据库，我想使用 Python 变量进行搜索，如下所示：

```
cur.execute("SELECT * FROM list WHERE InstitutionName=Variable") 
```

理想情况下，这将允许我将每一行作为一个列表返回到一个更大的列表，其中包含用户正在搜索的所有行。我意识到我上面有的是伪代码。我怎么能写出来呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-19T04:29:30.197

我认为您想使用参数替换功能：

```
cur.execute("SELECT * FROM list WHERE InstitutionName=?", (Variable,)) 
```

[在sqlite3 docs page上的](http://docs.python.org/2/library/sqlite3.html)[实际执行命令](http://docs.python.org/2/library/sqlite3.html#sqlite3.Cursor.execute)和第 4 个示例代码框中有更多文档。

请注意，您不应*明确使用`%`or`format`函数*，因为这容易受到注入攻击：

```
# NEVER DO THIS
cur.execute("SELECT * FROM list WHERE InstitutionName='%s'" % (Variable,)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-20T12:01:00.710

如果要显示数据库中的多条记录，则可以在 sql 查询中使用 (LIKE) 关键字：

```
("SELECT * FROM TABLENAME WHERE name LIKE'%?%'",(Variable,)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-15T14:20:10.717

如果你想使用 LIKE

```
cur.execute("SELECT * FROM list WHERE InstitutionName like '%'||?||'%'", (Variable,)) 
```

# java - 无法从 Silverlight 获取客户端的网络信息……小程序怎么样？

> ID：14949837
> 
> 赞同：0
> 
> 时间：2013-02-19T04:26:41.083
> 
> 标签：java, silverlight, networking, dns, applet

我正在尝试创建一个收集网络信息的 Silverlight 应用程序，类似于从命令行运行命令“ipconfig /all”。我只想显示客户端的 IP 地址、默认网关和 DNS 服务器。如果 DNS 服务器指向他们的路由器，那么我需要一种方法来获取路由器使用的 DNS 服务器。有什么建议么？我对 WMI 进行了一些研究，但没有成功。Silverlight 实在是太压缩了。

我在 Java 方面做得不多，但我想知道 java 小程序是否不会受到限制？我有一种感觉，我会遇到同样的沙盒问题。

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:18:36.963

> ..也许java小程序不会受到限制？

Java 小程序具有全面的安全环境，可以防止对任何未签名或不受信任的小程序执行许多操作。

对于已签名且受信任的小程序，您可能需要使用本地程序来获取其中的一些信息。如果信息。收集被系统本身或防火墙或类似的阻止，即使是受信任的小程序也会失败。

因此，如果有的话，可能会受到更多限制。

# android - 另一个选项卡主机内的选项卡主机

> ID：14949840
> 
> 赞同：0
> 
> 时间：2013-02-19T04:26:47.920
> 
> 标签：android, android-tabhost, android-style-tabhost

我的活动中有一个tabhost。有 5 个选项卡，其中一个选项卡包含另一个 tabHost。我需要在 tabHost 下显示我的第二个 tabHost。

即，我的选项卡活动有 5 个选项卡。在我的第三个选项卡中包含另一个 TabHost。

给我任何想法。这就是我初始化标签主机的方式。

```
TabHost mytab;
mytab = (TabHost)findViewById(android.R.id.tabhost); 
```

logcat 中显示的错误

```
02-19 10:46:29.207: E/AndroidRuntime(814): FATAL EXCEPTION: main 
```

. 还有 26 个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:29:30.543

`tabHost.setCurrentTab(0);`属性决定默认选项卡。所以，如果你写，`tabHost.setCurrentTab(n);`那么**第 n 个**选项卡将是默认选项卡。

# php - 如何优化 SQL 查询以避免 while() 嵌套子查询？

> ID：14949845
> 
> 赞同：0
> 
> 时间：2013-02-19T04:27:15.097
> 
> 标签：php, mysql, while-loop, nested-queries

我搜索了一些东西来优化以下嵌套`while()`查询，但不幸的是我无法适应我的情况。

让我们想象以下数据库关系：

```
ITEM 0,5---1,n ITEM_TAG 1,n---0,n TAG

ITEM (id, name, ...)
ITEM_TAG (id_item, id_tag)
TAG (id, name, ...) 
```

现在，我们想要获取所有带有 TAG 的 ITEM（限制为 5 个）。

我所做的是需要优化的丑陋的追随者：

```
$req=mysql_query("SELECT id, name FROM ITEM WHERE 1 ORDER BY id DESC");
while($res=mysql_fetch_array($req))
{
  $items.="<h1>".$res['name']."</h1>";
  $req_tag=mysql_query("SELECT id, name 
                        FROM TAG, ITEM_TAG
                        WHERE ITEM_TAG.id_item='".$res['id']."'
                        AND ITEM_TAG.id_tag=TAG.id
                        LIMIT 5");
  while($res_tag=mysql_fetch_array($req_tag))
  $items.="&bull; ".$res_tag['name']."<br/>";
} 
```

另一种方法是选择所有项目及其标签并使用数组过滤它们，如下所示：

```
$req=mysql_query("SELECT ITEM.id AS 'item_id',
                         ITEM.name AS 'item_name',
                         TAG.id AS 'tag_id',
                         TAG.name AS 'tag_name'
                         FROM ITEM, ITEM_TAG, TAG
                         WHERE ITEM_TAG.id_item=ITEM.id
                         AND ITEM_TAG.id_tag=TAG.id
                         ORDER BY ITEM.id DESC");
  while($res=mysql_fetch_array($req))
  {
    $listTag[$res['item_id']][$res['tag_id']]=$res['tag_name'];
    $listItem[$res['item_id']]=$res['item_name'];
  }
  foreach($listItem as $item_id=>$item_name)
  {
    $items.="<h1>".$val."</h1>";
    foreach($listTag[$id_item] $tag_id=>$tag_name)
    $items.="&bull; ".$tag_name."<br/>";
  } 
```

有什么想法或建议，让它做得更好、更快、更轻（而不是像傻朋克那样强大；））？

一些`LEFT JOIN`，`RIGHT JOIN`或将 tag1，tag2... tag5 字段放入 ITEM 表中，或其他？但请注意，ITEM 可能有 0 到 5 个 TAG 相关联...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:58:39.563

评论太长了，所以我在这里发帖。

当谈到在输出之前将数据库结果缓存到 PHP 中时，我总是会有点犹豫，因为这对于 * *data* *base 和 PHP 的关系来说并不“直观”。

在这种情况下，特别是如果您有一个非常大的`ITEM`表，您将在 PHP 中缓存很多字符串，然后才能输出。

所以我认为你可以使用当前的逻辑，并利用准备好的语句：

```
$req=$mysqli->query("SELECT id, name FROM ITEM WHERE 1 ORDER BY id DESC");
$tag=$mysqli->prepare("SELECT id, name FROM tag, item_tag WHERE item_tag.id_item=? AND item_tag.id_tag=tag.id LIMIT 5");
$tag->bind_param("i",$tid);
while($res=$req->fetch_assoc())
{
  echo "<h1>".$res['name']."</h1>";
  $tid=intval($res["id"]);
  $tag->execute();
  $req_tag=$tag->get_result();
  while($res_tag=$req_tag->fetch_assoc())
  {
    echo "&bull; ".$res_tag['name']."<br/>";
  }
} 
```

上面的代码没有经过测试，但我想你能明白。

# android - 如何使用通用图像加载器在 android 中列出视频缩略图？

> ID：14949855
> 
> 赞同：9
> 
> 时间：2013-02-19T04:28:11.237
> 
> 标签：android, universal-image-loader

我有一项活动，其中列出了 SD 卡中包含的视频文件。我想显示视频缩略图和视频名称。但是当我尝试加载这个活动时，加载时间太长，列表滚动也不是很流畅。我想为此使用通用加载器。但是不知道如何将它与视频缩略图一起使用？请帮助

# jquery - 如何识别在委托代码中触发 jQuery click 事件的对象

> ID：14949859
> 
> 赞同：1
> 
> 时间：2013-02-19T04:28:46.140
> 
> 标签：jquery, performance, caching, jquery-delegate

我有一个非常简单的[jsFiddle](http://jsfiddle.net/BAaTk/)，它使用 jQuery 缓存和委托。我怎样才能使处理程序足够动态，当用户单击第一个组复选框时，它只突出显示它下面的行，当用户选择第二个组复选框时，它应该选择第二个复选框下面的行。

我可以在组复选框下有 n 个组和 n 行。为了性能，我试图缓存所有内容，然后在处理程序中，我希望能够根据复选框选择所需的组行，使用指定的类来识别组。另外，我想确定用户何时单击数据单元格。

我尝试了不同的选项来识别对象，我猜 obj.type 没有返回我认为会给我的类型。任何帮助将非常感激。

**代码：**

```
var elements = $(".data");

$("table").delegate("td", "click", function(evt){
    var obj = $(this);

    switch (obj.type) {
        case: "checkbox":
            //select all elements under this group
            elements.addClass('blue');
            break;
        case: "td":
            //I know this is not the right case, not sure how to trap a cell click
            //apply class 'red'
            break;
        default:
            elements.addClass('green');
            break;
    }    
}); 
```

**支持 HTML 和 CSS**

```
<table>
  <tbody>
    <tr>
        <td>
            <input type="checkbox" id="chkFirst" />
        </td>
    </tr>
    <tr class="data">
        <td class="first">
            A
        </td>
    </tr>
    <tr class="data">
        <td class="first">
            B
        </td>
    </tr>
    <tr class="data">
        <td class="first">
            C
        </td>
    </tr>
     <tr class="data">
        <td>
            <input type="checkbox" id="chkSecond" />
        </td>
    </tr>
    <tr class="data">
        <td class="second">
            Aa
        </td>
    </tr>
        <tr class="data">
        <td class="second">
            Bb
        </td>
    </tr>
  </tbody>
</table>

.blue {
    color: blue;
}
.red {
    color: red;
}
.green {
    color: green;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:52:42.083

你试过`evt.target`吗？那应该是触发点击的 HTML 元素。

试试这个示例[jsFiddle](http://jsfiddle.net/BAaTk/4/)以获得说明。由于您知道它是哪个单元格，因此您可以向上查看 DOM 层次结构以确定点击了哪一行或哪张表。

# php - 如何将选定的行提供给 cgridview 以显示并同时提供对列的搜索

> ID：14949860
> 
> 赞同：1
> 
> 时间：2013-02-19T04:28:50.603
> 
> 标签：php, yii-extensions, yii

在这里，我使用 CActiveDataProvider 通过给出条件来传递选定的行，并且在视图中我在 CGridView 中显示的列工作正常，但同时我应该提供对列的搜索我无法提供搜索可以任何人帮助. 这是我的示例代码

## 控制器代码

```
public function actionShow($id) 
{
    $model=new StudentResult('search');

    $model->unsetAttributes();  // clear any default values
    if(isset($_GET['StudentResult']))
        $model->attributes=$_GET['StudentResult'];

    $dataProvider=new CActiveDataProvider('StudentResult', array(
        'criteria'=>array(
            'condition'=>"profileId=$id",
            ),
        'pagination'=>array(
            'pageSize'=>20,
        ),
    ));

    $this->render('show',array(
        'model'=>$model,
        'dataProvider' => $dataProvider,
    ));

} 
```

## 查看代码

```
<div class="search-form" style="display:none">
<?php $this->renderPartial('_search',array(
'model'=>$model,
 )); ?>
 </div><!-- search-form -->

<?php
$this->widget('zii.widgets.grid.CGridView', array(
'id'=>'student-result-grid',
'dataProvider'=>$dataProvider,
'filter'=>$model,
'columns'=>array(
    'id',
    'moduleCode',
    'moduleTitle',
    'moduleCredits',
    'grade',
    'creditsObtain',
    'semester',
    /*
    'points',
    'profileId',

    'createdOn',
    'lastModifiedOn',
    'lastModifiedBy',
    */
    array(
        'class'=>'CButtonColumn',
    ),
),
)); ?> 
```

所以在视图中，我通过提供'dataProvider' => $dataProvider 来显示数据，因此值显示正确，但如果我提供'dataProvider' => $model->search(); 则搜索不起作用 整个值正在显示并且搜索正在工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T07:32:19.337

在这里，您可以将您选择的行传递给您想要的操作。

```
 <?php $this->widget('zii.widgets.grid.CGridView', array('id' =>'list-grid',
        'dataProvider'=>$dataProvider->search(),
        'filter' =>$dataProvider, 
        'columns'=>array(
        'id',
        'moduleCode',
        'moduleTitle',
        'moduleCredits',
        'grade',
        'creditsObtain',
        'semester',
         'action'=>array(
            'class'=>'CButtonColumn',
            'header' => 'Edit',
            'template' => '{Edit}',
            'buttons' => array(
                'Edit' =>array(
                'label' => 'Edit',
            'imageUrl'=>Yii::app()>request>baseUrl.'path/to/your/image',// you can use other options
                 'url' => 'Yii::app()->createUrl("/controller/action/id/".someencryption-to-hide-id($data->id))',),             
'visible' => TRUE,      ),
           ),
        ), )); ?> 
```

您的控制器操作如下所示：

```
public function actionYourAction() {
        $dataProvider = new ModelName('search');
        $dataProvider -> unsetAttributes();
        // clear any default values
        if (isset($_GET['ModelName'])) {
            $dataProvider -> attributes = $_GET['ModelName'];
        }
        $this -> render('viewPage', array('dataProvider' => $dataProvider, ));

    } 
```

模型标准将是：

```
 public function search()
    {
        $criteria -> compare('id', $this -> id);
        ...
        return new CActiveDataProvider($this, array('criteria' => $criteria, ));
    } 
```

让我知道我是否正确。

# c# - LINQ 中的子查询帮助

> ID：14949861
> 
> 赞同：0
> 
> 时间：2013-02-19T04:29:05.187
> 
> 标签：c#, sql, linq, subquery

嗨，有人可以帮我如何在 LINQ 中编写以下查询，因为我是 LINQ 新手

```
select * from Employee where employeeid = 'E101'
or empdept = (select dept from departments where deptid = 'D101') 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:15:12.540

您可以使用群组加入

```
from e in employee
join d in deparment.Where(x => x.deptid == "D101") 
    on e.empdept equals d.dept into g
where e.employeeid == "E101" || g.Any()
select e; 
```

生成以下 SQL

```
DECLARE @p0 NVarChar(1000) = 'E101'
DECLARE @p1 NVarChar(1000) = 'D101'

SELECT *
FROM [employee] AS [t0]
WHERE ([t0].[employeeid] = @p0) OR (EXISTS(
    SELECT NULL AS [EMPTY]
    FROM [deparment] AS [t1]
    WHERE ([t0].[empdept] = [t1].[dept]) AND ([t1].[deptid] = @p1)
    )) 
```

# c# - OnSelectedIndexChanged 未在 GridView 中触发

> ID：14949865
> 
> 赞同：1
> 
> 时间：2013-02-19T04:29:30.243
> 
> 标签：c#, asp.net, .net, gridview, datagridview

网格视图代码：

```
<asp:GridView ID="gvVessel" runat="server" AutoGenerateColumns="false" GridLines="None"
     EmptyDataText="No Vessels found." OnRowCommand="gvVessel_RowCommand"      
     OnSelectedIndexChanged="gvVessel_SelectedIndexChanged" DataKeyNames="VesselID" >
<asp:/GridView> 
```

代码背后：

```
protected void gvVessel_SelectedIndexChanged(object sender, EventArgs e)
{
    int index = Convert.ToInt16(gvVessel.SelectedDataKey.Value);
    Cache["index"] = index;

    Response.Redirect("VesselDraft.aspx");
} 
```

为什么事件没有触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T06:04:36.003

请设置属性

```
AutoPostback ="true" for GridView. 
```

谢谢， 海特什

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:41:56.117

正如其中一个 SO 问题中所建议的那样
[GridView OnSelectedIndexChanged 事件未触发](https://stackoverflow.com/questions/9166568/gridview-onselectedindexchanged-event-not-firing)
[Gridview selectedindex 已更改未在第一次单击时触发](https://stackoverflow.com/questions/5513185/gridview-selectedindex-changed-not-firing-on-first-click)
[gridview SelectedIndexChanged 事件未触发。我正在使用 asp.net 4.0 。顺便说一句，rowdatabound 事件正在完美触发](https://stackoverflow.com/questions/14149383/gridview-selectedindexchanged-event-is-not-firing-i-am-using-asp-net-4-0-by-the)

如果您只是单击 中的行`GridView`，则不会触发该事件。您必须在该行中有某种按钮才能单击，这将触发`RowCommand`事件以及`SelectedIndexChanged`事件（当然，如果您单击的行尚未被选中）。它不完全像 Windows 窗体 DataGridView =)

让事件触发的最简单方法是将此属性添加到您的`GridView`标记中：

```
AutoGenerateSelectButton="True" 
```

这将创建一个 "Select" ，当您单击它时，它将在您的代码隐藏中`LinkButton`触发该事件。`Gridview1_SelectedIndexChanged2`

**编辑：**为了澄清，这是您需要添加该属性的地方：

```
<asp:GridView ID="GridView1" runat="server" GridLines="None" 
  Width="930px" CellPadding="4" ForeColor="#333333"  
  onselectedindexchanged="GridView1_SelectedIndexChanged2"
  AutoGenerateSelectButton="True" > 
```

# iphone - iCloud 备份噩梦

> ID：14949866
> 
> 赞同：0
> 
> 时间：2013-02-19T04:29:32.913
> 
> 标签：iphone, ios, ipad, icloud

我的应用有从 Apple 下载的应用内购买。我将它们存储在我在应用程序库中创建的文件夹中，例如 /Library/myFiles

这些文件必须持续存在才能使应用程序正常工作。我不能把它们放在缓存上，因为 iOS 会删除它们，用户必须一直下载它。

即使把它们放在图书馆里，苹果仍然在吹毛求疵。

在他们的电子邮件中，他们说我的应用程序正在使用 6MB 的备份，但我什至在设备 iOS 的 iCloud 部分上都看不到我的应用程序。

我是否仍需要使用 addSkipBackupAttributeToItemAtURL 从 iCloud 备份中排除此类文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:37:30.517

是的，如果您的文件确实非常本地化并且确实不需要使用 iCloud 备份，那么请添加“不备份”属性以防止备份到 iCloud。

另请查看[Apple 的文件系统编程指南](http://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)。

> > 处理支持文件——应用程序下载或生成的文件，并可根据需要重新创建：
> 
> *   在 iOS 5.0.1 及更高版本中，将支持文件放在 <Application_Home >/Library/Application Support 目录中，并
>     对其应用 com.apple.MobileBackup 扩展属性。此属性可防止将文件备份到 iTunes 或 iCloud。如果您
>     有大量支持文件，您可以将它们存储在自定义
>     子目录中，并将扩展属性仅应用于该目录。

# javascript - jQuery悬停事件未触发

> ID：14949868
> 
> 赞同：0
> 
> 时间：2013-02-19T04:29:37.593
> 
> 标签：javascript, jquery, closures

下面给出的代码示例：

```
(function (window, document) {
$('.rating_title_container').parents('.item_row_def').hover(function() {
          setTimeout(function() {
              system.console('Worked');
          }, 1000);
        });
 })(window, document); 
```

我对 JS、jQuery 很陌生。谁能解释我在这里缺少什么？[在http://jsfiddle.net/p7gBy/5/](http://jsfiddle.net/p7gBy/5/)中发布代码

HTML

```
 <table>
    <thead>
      <tr>
        <th class="item_row_def" onclick="sort(3);">
          <table class="col-header">
            <tbody>
              <tr>
                <td>
                  <h2 class="header_title rating_title_container">Rating</h2>
                </td>
              </tr>
            </tbody>
          </table>
        </th>
      </tr>
    </thead>
  </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:50:33.017

您必须附上该功能，`doc ready`然后一切都会正常工作：

```
$(function(){ // <----------------------------try enclosing within this from here
   (function (window, document) {
      $('.rating_title_container').parents('.item_row_def').hover(function() {
        setTimeout(function() {
            alert('Worked');
        }, 1000);
      });
   })(window, document); 
}); //<---------------------------------------- to here. 
```

大多数事件应该写在`document ready`处理程序中。

这个：

```
$(document).ready(function() {
   // Handler for .ready() called. 
}); 
```

和这个：

```
$(function() {
    // Handler for .ready() called.
}); 
```

是一样的。第二个只是`doc ready`处理程序的较短版本。

[阅读有关 .ready()](http://api.jquery.com/ready/)处理程序的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:33:38.913

尝试以下假设在文档准备好时调用代码：

```
jQuery(function (window, document) {
$('.rating_title_container').parents('.item_row_def').hover(function() {
      setTimeout(function() {
          system.console('Worked');
      }, 1000);
    });
}); 
```

同时你已经超过`});`了最后，这会引发错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T04:34:30.890

您需要将您的事件处理程序绑定在一个准备好的文档中（用这个替换上面的代码并查看）：

```
$(document).ready(function(){
    $('.rating_title_container').parents('.item_row_def').hover(function() {
      setTimeout(function() {
          system.console('Worked');
      }, 1000);
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T04:34:48.973

试试这个代码：

```
(function (window, document) {
$('.rating_title_container').parents('.item_row_def').hover(function() {
          setTimeout(function() {
              alert('Worked');
          }, 1000);
        });

})(window, document); 
```

检查小提琴[http://jsfiddle.net/AXepU/](http://jsfiddle.net/AXepU/)

# android - 获取设备的 MAC 地址 - 当 wifi 关闭时

> ID：14949872
> 
> 赞同：7
> 
> 时间：2013-02-19T04:30:04.527
> 
> 标签：android, android-wifi, mac-address, wifimanager

我正在使用以下代码查找 Android 设备的 MAC 地址：

```
WifiManager manager = (WifiManager) getSystemService(Context.WIFI_SERVICE);
WifiInfo info = manager.getConnectionInfo();
String address = info.getMacAddress()); 
```

但在这种情况下，当 Wifi 关闭时，我无法获取 MAC 地址。即使 WIFI 关闭，如何获取 Android 设备的 MAC 地址。

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-19T04:54:54.350

为什么在获取 MAC 地址之前不立即启用 Wifi，然后在获取 MAC 地址后将其禁用？

*当然，这样做是在获取 MAC 地址绝对重要的情况下。*

**未经测试的代码**

```
WifiManager wifiManager = (WifiManager) this.getSystemService(Context.WIFI_SERVICE);

if(wifiManager.isWifiEnabled()) {
    // WIFI ALREADY ENABLED. GRAB THE MAC ADDRESS HERE
    WifiInfo info = wifiManager.getConnectionInfo();
    String address = info.getMacAddress();
} else {
    // ENABLE THE WIFI FIRST
    wifiManager.setWifiEnabled(true);

    // WIFI IS NOW ENABLED. GRAB THE MAC ADDRESS HERE
    WifiInfo info = wifiManager.getConnectionInfo();
    String address = info.getMacAddress();
} 
```

您将需要在清单中设置这些权限

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"></uses-permission>
<uses-permission android:name="android.permission.UPDATE_DEVICE_STATS"></uses-permission>
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE"></uses-permission> 
```

我不完全确定`UPDATE_DEVICE_STATS`在这种情况下是否需要许可。请在决定保留之前尝试一下。

# java - 如何用递归解决这个问题？

> ID：14949875
> 
> 赞同：0
> 
> 时间：2013-02-19T04:30:28.660
> 
> 标签：java, math, recursion

我正在尝试在 java 中做一些简单的数学运算，但我在让它工作时遇到了一些问题。我想取一个数字并每天增加一次，增加量是每天开始时起始数字的百分比，然后将其添加到第二天的起始数字。

比如，如果起始数字是 5，每天的涨幅是 50%，那么第一天的数字应该是 5，第二天应该是 7.5，然后是 11.25，等等......

我已经想出了如何迭代地做到这一点，但我似乎无法让它递归地工作

这是一个相当草率的失败尝试：

```
 increase = start * percent;
   endNum = start + increase;
   startingNum += increase;
   return endNum; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:37:20.413

递归函数中需要 3 个参数：

*   起始编号。
*   *每次迭代*增加的百分比。
*   您将增加起始数字的次数（计数器）。这是您当前在递归公式中缺少的参数。

所以，有了第三个参数，你唯一应该做的就是递归调用你的函数，直到计数器下降到 0。

算法示例：

```
function doFooOperation (start, percent, counter)
    if (counter == 0) return 0
    //do your operations here...
    return doFooOperation(start, percent, counter - 1)
end function 
```

# embedded - 研究嵌入式系统中实时调度的工具

> ID：14949876
> 
> 赞同：0
> 
> 时间：2013-02-19T04:30:36.103
> 
> 标签：embedded, rtos, gem5

我使用 GEM5 软件模拟器，我的任务是根据我想要使用的调度算法更改 linux 内核。不，我想切换到嵌入式系统，我的目标是在 Altera FPGA（或任何平台）上进行实时信号处理。我是这个领域的新手，我在这个论坛上阅读了很多主题，但我仍然对以下几点感到困惑：

*   是否所有嵌入式 RTOS 都支持多核，如果没有，哪个更合适？我听说过嵌入式 linux，但我没有一个明确的想法。
*   关于我从这个论坛posix线程中学到的并行编程库更合适，因为它是细粒度的，我是对的吗？
*   我对 FPGA 的选择不是最终的我想知道是否有其他用于嵌入式系统的软件工具模拟器，如 GEM5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:58:10.983

> 是否所有嵌入式 RTOS 都支持多核，如果没有，哪个更合适？我听说过嵌入式 linux，但我没有一个明确的想法。

不，不是所有的都支持多核。事实上很多人都没有。

> 关于我从这个论坛posix线程中学到的并行编程库更合适，因为它是细粒度的，我是对的吗？

完全取决于应用程序。您可以阅读很多有关并行编程的信息 - 例如，请尝试此处： http: [//people.ds.cam.ac.uk/nmm1/Parallel/index.html](http://people.ds.cam.ac.uk/nmm1/Parallel/index.html)

> 我对 FPGA 的选择不是最终的我想知道是否有其他用于嵌入式系统的软件工具模拟器，如 GEM5。

我不知道，我从未使用过GEM5。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T21:32:57.660

支持多核（SMP 或 AMP）架构的嵌入式 RTOS 并不多。但是很少有像 VxWorks( [http://www.windriver.com/products/vxworks/](http://www.windriver.com/products/vxworks/) ) 这样支持多核处理器的。VxWorks 以 Linux 为核心，具有改进的调度和轻量级进程。

如果您要使用多核处理器和 RTOS（支持多核），那么您将需要并行处理 POSIX 库以有效利用硬件。

除了 FPGA 的处理器选项不多之外，FPGA 没有像 GEM5 这样的东西。我的意思是 Xilinx 和 Altera FPGA 仅支持一种或两种类型的软/硬处理器内核。

Xilinx 最近从 PowerPC 切换到 ARM，Altera 仍然使用 niosII 处理器（专有），只有 ARM 有两个多核处理器内核。

# salesforce - FATAL_ERROR|System.DmlException：删除失败。第 0 行的第一个异常

> ID：14949877
> 
> 赞同：0
> 
> 时间：2013-02-19T04:30:38.340
> 
> 标签：salesforce, apex-code, soql

我有一个带有代码的批处理类

公共类 BatchDeleteEvents 实现 Database.Batchable、Database.Stateful、Database.AllowsCallouts {

```
private String query;
private String pageToken ;
private String CalendarId;
private String accessToken;
public BatchDeleteEvents(String CalendarId, String accessToken){

    this.query = 'Select Id, Name from Event__c'; // Query to get the CalendardID (Google ID)
this.CalendarId =CalendarId;
this.accessToken =accessToken;
}

public Database.Querylocator start(Database.BatchableContext BC){

    return Database.getQueryLocator(query);

}

public void execute(Database.BatchableContext BC, List<sObject> scope){
System.debug('Entered in delete Batch');
for(Event__c c : (List<Event__c>)scope)
 GCalendarUtil.doApiCall(null,'DELETE','https://www.googleapis.com/calendar/v3/calendars/'+CalendarId+'/events/'+c.name,accessToken);

    delete scope;
    }
public void finish(Database.BatchableContext BC){   
  for(CalendarSettings__c c: [Select Id, Name, CalendarId__c,CalendarQuery__c,FieldToDisplay__c from CalendarSettings__c])
     {  BatchPublicCampaignsToGoogle bjob = new BatchPublicCampaignsToGoogle(c.CalendarQuery__c,c.CalendarId__c,c.FieldToDisplay__c);
        Database.executeBatch(bjob,9); // This is set to process 9 records, allowing 1 extra callout for refresh token in case needed.
    }
    }

    } 
```

我用 9 批运行它

BatchDeleteEvents del = new BatchDeleteEvents(c.CalendarId__c,accessToken); Database.executeBatch(del,9);

我面临错误

```
FATAL_ERROR|System.DmlException: Delete failed. First exception on row 0 with id a0290000007fCbEAAU; first error: ENTITY_IS_DELETED, entity is deleted: []

Class.BatchDeleteEvents.execute: line 26, column 1 
```

我没有使用删除命令的地方为什么我面临这个错误任何人请帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T06:43:13.410

也许您删除 for 循环中的所有范围，将其更改为

```
for(Event__c c : (List<Event__c>)scope){
  GCalendarUtil.doApiCall(null,'DELETE','https://www.googleapis.com/calendar/v3/calendars/'+Cal   endarId+'/events/'+c.name,accessToken);

 }
 delete scope; 
```

# java - 我不断收到一个返回 null 的字符串...

> ID：14949879
> 
> 赞同：0
> 
> 时间：2013-02-19T04:30:54.200
> 
> 标签：java, arrays, image, imageicon

我真的不知道我做错了什么。我正在制作一个状态游戏，所以我可以帮助人们学习，但是当我运行它时它可以工作，但它不会将图像返回到屏幕上。这是我有我的数组的主要代码位......

```
public void checkCorrectValue(String guess){
    if(guess.equalsIgnoreCase(current_state)){
        correct_value = true;
    }else{
        correct_value = false;
    }
}
public void setRandomState(){
    r = new Random();
    int i;
    i = r.nextInt(50);
    System.out.println(i);
    current_state = states[i];
    System.out.println(current_state + " was randomly selected");
}
public String getCurrentState(){
    return current_state;
}
public boolean isStateCorrect(){
    return correct_value;
} 
```

我添加了名为 states 的数组，并用所有的状态填充了它。它确实成功输出了正确的状态，所以我知道这是可行的。这是我的面板代码...

```
 States_Images us_img;
USA_States us_state;

public Menu(){
    setLayout(null);
    setBackground(Color.WHITE);

    us_img = new States_Images();
    us_state = new USA_States();

    us_state.setRandomState();
    System.out.println(us_state.getCurrentState());

    JLabel l = new JLabel();
    l.setIcon(us_img.getCurrentStateImage());
    l.setBounds(0,0,500,500);
    add(l);
} 
```

它所做的只是设置我的面板内容，然后尝试通过首先调用设置随机状态的 setRandomState() 来输出图像，它确实在那里正确输出。但是当 us_img.getCurrentStateImage() 运行时......

```
 private ImageIcon currentstate_image;
private String current_state;
USA_States us_states;

public States_Images(){
    us_states = new USA_States();
}

public ImageIcon getCurrentStateImage(){
    setStateName();
    currentstate_image = new ImageIcon("graphics\\" + current_state + ".png");
    System.out.println(current_state + " image loaded");
    return currentstate_image;
}
private void setStateName(){
    current_state = us_states.getCurrentState();
} 
```

它打印出“加载的空图像”。然后我的框架上什么都没有显示。我真的不知道我做错了什么，因为我以前做过这样的事情。我知道这是基本的java，所以任何帮助都会得到帮助！！！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:41:48.733

在创建 ImageIcon 的新实例时，您似乎没有传递有效的文件名。

```
currentstate_image = new ImageIcon("graphics\\" + current_state + ".png"); 
```

根据[ImageIcon](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/ImageIcon.html) javadoc，您需要传递要创建的 ImageIcon 的文件名（路径）。

您可能想确保该文件实际存在于`./graphics/{current_state}.png`

此外，javadoc 说尽可能使用正斜杠。

**编辑**

```
System.out.println(current_state + " image loaded"); 
```

您是否检查过您`current_state`此时是否为空？如果您正在“加载空图像”，则表示`current_state`变量为`null`. 检查你的`us_states.getCurrentState();`方法。

发布您的`USA_States`课程也可能会有所帮助。

如果您尝试使用上述类中的相同`us_states`实例`Menu`，则必须将`us_states`from Menu 类传递给`States_Images`该类。

这是修改后的代码：菜单类：

```
public Menu(){
    setLayout(null);
    setBackground(Color.WHITE);

    us_state = new USA_States();
    us_state.setRandomState();

    us_img = new States_Images(us_state); //Pass us_state to States_Images
    System.out.println(us_state.getCurrentState());

    JLabel l = new JLabel();
    l.setIcon(us_img.getCurrentStateImage());
    l.setBounds(0,0,500,500);
    add(l);
} 
```

States_Images 类：

```
private ImageIcon currentstate_image;
private String current_state;
USA_States us_states;

public States_Images(USA_States us_state){
    this.us_states = us_state
}

public ImageIcon getCurrentStateImage(){
    setStateName();
    currentstate_image = new ImageIcon("graphics\\" + current_state + ".png");
    System.out.println(current_state + " image loaded");
    return currentstate_image;
}
private void setStateName(){
    current_state = us_states.getCurrentState();
} 
```

# npm - 如何从 npm 中删除标签？

> ID：14949886
> 
> 赞同：16
> 
> 时间：2013-02-19T04:31:25.310
> 
> 标签：npm

我已经向 npm 发布了一个 grunt 插件，它通过使用`master`标签来跟踪 grunt 0.4 RC。我一直在发布：

```
npm publish --tag master 
```

现在 grunt 0.4 final 已经发布，我`latest`通过以下方式重新发布了我的插件：

```
npm publish 
```

我现在如何`master`从 npm 存储库中删除标签？它仍然在`dist-tags`我的时候列出`npm view [my-plugin]`。

提前致谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-02-22T13:39:12.870

`npm`在`npm@2.5.0`. _ 现在有一个命令行语法，只要您更新到新版本`npm`- 请参阅[https://github.com/npm/npm/wiki/Troubleshooting#try-the-latest-stable-version-of- npm](https://github.com/npm/npm/wiki/Troubleshooting#try-the-latest-stable-version-of-npm)有关升级的完整详细信息。

安装最新版本的 npm

```
npm install -g npm    # most common way to upgrade 
```

清除包装中不再使用的标签。

```
npm dist-tag rm <pkg> <tag> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T20:24:30.887

`master`可能在您的 npm 配置中。

检查这给出了什么：

```
npm config get tag 
```

要重新使用`latest`，应该这样做：

```
npm config set tag latest 
```

另一种可能性是使用以下`master`标签取消发布版本：

```
npm unpublish <name>[@<version>] 
```

这很可能会删除 dist-tags 中的标签（但由于我没有尝试过，不确定）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-21T15:34:48.597

只是为了确认，（在 verdaccio 的私人回购中），您可以取消发布这样的标签：

```
npm unpublish <name>[@<version>] 
```

这转化为（例如）：

```
npm unpublish @yourdomain/your_package@1.1.100 
```

这将删除相关标签。

# javascript - Javascript 在正文加载时向用户发送屏幕分辨率

> ID：14949887
> 
> 赞同：-1
> 
> 时间：2013-02-19T04:31:29.517
> 
> 标签：javascript, ajax

我即将保存用户设备分辨率。但是，虽然我想处理信息抛出 javascript，但它并没有创建。我的代码如下。

```
<?php
function sar($opt='re', $k=g){
if($k==p){ 
$s=$_POST; }
elseif($k==g){ 
$s=$_GET; }
elseif($k==s){ 
$s=$_SERVER; }
if(isset($s[$opt])){
return $s[$opt]; }
else return 0; }

$head='<!DOCTYPE html>
<html><head><script>
function showCustomer(){
var width=screen.width
var height=screen.height
var color=screen.colorDepth
var xmlhttp;
if (str==""){
document.getElementById("result").innerHTML="";
return;}
if(window.XMLHttpRequest)
{ xmlhttp=new XMLHttpRequest(); }
else { xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"); }
xmlhttp.onreadystatechange=function()
{
if(xmlhttp.readyState==4 && xmlhttp.status==200){ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:34:12.837

您可以使用以下方式检测屏幕分辨率：

```
var h = window.screen.availHeight;
var w = window.screen.availWidth;

console.log("resoution: " + h + " x " + w); 
```

# c# - C# 结构通过继承隐藏

> ID：14949888
> 
> 赞同：2
> 
> 时间：2013-02-19T04:31:37.223
> 
> 标签：c#, struct

C# 4 规范的第**3.7.1.2 节通过继承隐藏**讨论了类或结构通过重新声明在基类中使用的名称来隐藏成员的能力。

这一切都很好，但我认为结构的区别之一是它们不能被继承。

*   **这是真的？**
*   **如果没有，是否仍然可以通过其他方式使用结构执行成员隐藏？**
*   **还有什么可以从中收集到的吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T04:33:53.383

`struct`仍然继承自`object`, via `ValueType`。您可以`new`（隐藏） a `GetHashCode`，`Equals`or`ToString`方法 - 但是，这样做会**非常**愚蠢，因为这意味着您不能`override`这样做，这意味着使用它们将始终是一个拳击调用（即使作为受*约束*的方式完成）称呼）。

所以，按顺序：

*   这是真的吗：是的，你不能从一个`struct`
*   是否有可能：除了上述之外，唯一可比较的是显式接口实现
*   收集：规范不允许你做愚蠢的事情

# delphi - 当我的程序在地址 0 处出现异常 0xc0000005 崩溃时我该怎么办？

> ID：14949904
> 
> 赞同：18
> 
> 时间：2013-02-19T04:33:45.840
> 
> 标签：delphi, debugging, crash

我的 Delphi 程序作为 NT 服务运行，并且已经运行了 2 个多月，然后它突然停止并生成故障转储：

> 错误应用程序名称：tca_shctisvc_ip.exe，版本：7.1.0.1843，时间戳：0x2a425e19 错误模块名称：未知，版本：0.0.0.0，时间戳：0x00000000 异常代码：0xc0000005 故障偏移量：0x00000000

根据 Windows 事件日志中的信息，没有可以使用的真实地址。我能够将迷你转储加载到 WinDbg 中，它说存在异常，但发现堆栈帧有问题。另一个工具（Viewminidump）能够向我展示正在运行的线程堆栈。

我从哪里开始解决这个问题？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-19T04:40:13.820

异常代码`0xc0000005`是访问冲突。错误偏移的 AV`0x00000000`意味着您的服务代码中的某些内容正在访问`nil`指针。您只需在服务运行时对其进行调试，以了解它正在访问的内容。如果您无法在调试器中运行它，那么至少安装一个第三方异常记录器框架，例如[EurekaLog](http://www.eurekalog.com)或[MadExcept](http://madexcept.com)，以了解您的服务在 AV 发生时正在做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:18:46.813

堆栈帧的问题可能表明堆栈损坏（一个真正可怕的野兽）、优化或混合框架，如 C/C++/C#/Delphi 和其他疯狂 - 关于堆栈帧没有绝对标准。（有些语言甚至没有它们！）。

所以，我建议对堆栈框架问题有点恼火，忽略它，然后只使用 Remy 的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-21T09:59:58.760

我在使用不同的应用程序时遇到了同样的问题，

```
Faulting application name: javaw.exe, version: 8.0.51.16, time stamp: 0x55763d32
Faulting module name: mscorwks.dll, version: 2.0.50727.5485, time stamp: 0x53a11d6c
Exception code: 0xc0000005
Fault offset: 0x0000000000501090
Faulting process id: 0x2960
Faulting application start time: 0x01d0c39a93c695f2
Faulting application path: C:\Program Files\Java\jre1.8.0_51\bin\javaw.exe
Faulting module path:C:\Windows\Microsoft.NET\Framework64\v2.0.50727\mscorwks.dll 
```

我使用的是 Microsoft 的增强缓解体验工具包 (EMET)，我发现在我的案例中禁用 javaw.exe 上的 EMET 功能，因为这是有故障的应用程序，它使我的应用程序能够成功运行。确保您没有任何具有内存安全保护的类似软件。

# php - 从输入元素数组中获取 $_POST 值

> ID：14949906
> 
> 赞同：1
> 
> 时间：2013-02-19T04:33:55.247
> 
> 标签：php

我有一个类似于下面的输入数组

```
<input name="attr[]" value = "a" type="text" />
<input name="attr[]" value = "b" type="text" />
<input name="attr[]" value = "c" type="text" /> 
```

在服务器端，我使用 foreach 循环来获取输入的值。但是，我也想要值 a 、 b 和 c 。我如何在 PHP 中做到这一点？

我做了这样的事情，但它不适合我。返回的`$key`只是一个索引。

```
foreach($_POST['attr'] as $key=>$val)
{
   //process each $key and $val
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:36:22.047

使用此代码检索值

```
foreach($_POST['attr'] as $key=>$val)
{
   echo $val;
} 
```

# heroku - heroku 网络崩溃

> ID：14949914
> 
> 赞同：1
> 
> 时间：2013-02-19T04:34:37.940
> 
> 标签：heroku

所以我正在关注这个链接中的教程：[https ://devcenter.heroku.com/articles/django#deploy-to-heroku](https://devcenter.heroku.com/articles/django#deploy-to-heroku)

一旦我做“heroku ps”，我得到：

```
=== web: `python manage.py runserver 0.0.0.0:$PORT --noreload`
web.1: crashed 2013/02/18 20:22:37 (~ 8m ago) 
```

我不完全明白这里有什么问题，有人可以帮忙吗？我想把我的 Procfile 放在 manage.py 所在的位置吗？我试图将它移到那里，但仍然出现相同的错误。

顺便说一句，我的日志是：

```
2013-02-19T04:36:22+00:00 heroku[api]: Scale to web=1 by deathlordx87@yahoo.com
2013-02-19T04:41:14+00:00 heroku[api]: Scale to web=1 by deathlordx87@yahoo.com
2013-02-19T04:43:10+00:00 heroku[web.1]: State changed from crashed to starting
2013-02-19T04:43:17+00:00 heroku[web.1]: Starting process with command `python manage.py      runserver 0.0.0.0:31831 --noreload`
2013-02-19T04:43:18+00:00 app[web.1]: python: can't open file 'manage.py': [Errno 2] No such file or directory
2013-02-19T04:43:19+00:00 heroku[web.1]: Process exited with status 2
2013-02-19T04:43:19+00:00 heroku[web.1]: State changed from starting to crashed
2013-02-19T04:44:05+00:00 heroku[api]: Scale to web=1 by deathlordx87@yahoo.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-05T15:26:59.240

我曾经遇到过同样的问题。您需要正确配置您的 settings.py 文件。由于 Heroku 不支持 sqlite3 数据库，因此您应该检查 settings.py 文件的数据库部分是否配置正确。

检查我的最小示例应用程序是否成功部署到 Heroku [https://github.com/shinigamiryuk/Django-Heroku-Sample-Application](https://github.com/shinigamiryuk/Django-Heroku-Sample-Application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-19T02:48:30.447

日志行`can't open file 'manage.py'`表明文件丢失或找不到。在部署到 heroku 之前，您是否将 manage.py 添加到您的 git depo 中？manage.py 是否存储在与您的 Procfile 不同的目录中/程序运行的位置？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-13T11:44:38.820

我怀疑您的项目（如果它遵循*两个 Scoops*布局）在项目目录中而不是在您的存储库根目录中具有 manage.py。

要保持此布局，请`Procfile`在运行 gunicorn 之前创建一个并在其中编写一个目录更改脚本。

有关示例，请参[见此答案。](https://stackoverflow.com/questions/18619886/is-it-possible-to-have-a-procfile-and-a-manage-py-file-in-a-different-folder-lev/25284938#25284938)

# ruby - 无法理解 Ruby 实例变量的分配方式

> ID：14949915
> 
> 赞同：1
> 
> 时间：2013-02-19T04:34:38.237
> 
> 标签：ruby

我尝试了下面的代码，看看我是否可以在没有任何显式实例方法调用的情况下直接分配实例变量或不在类外部。是的，下面的代码说我可以。

```
 @ubuntu:~$ irb --simple-prompt
  class Foo
  def initialize(x,y,z)
  @x, @y, @z= x, y,z
  end
  def to_ary
  [@x, @y, @z]
  end
  def to_hash
  [@x => @y]
  end
  end
  #=> nil
  foo = Foo.new(10,11,12)
  #=> #<Foo:0x00000001191738 @x=10, @y=11, @z=12> 
```

我的问题是：

```
 a,*b = foo
 #=> #<Foo:0x00000001191738 @x=10, @y=11, @z=12>
 a
 #=> 10
 b
 #=> [11, 12] 
```

在不创建对象的情况下，如何或调用了哪个内部方法来对`a,*b`实例变量进行此类分配？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:05:35.847

Ruby 解释器需要多重赋值的右边是一个数组，所以它通过正常的过程来获取一个数组。该过程的一部分是调用`to_ary`目标对象。您的`to_ary`return `[@x,@y, @z]`，并且由于 splat 的行为，导致`a = @x`and `b = [@y, @z]`。

# vb.net - 如何创建并向 gridview 对象添加数据？VB.NET

> ID：14949919
> 
> 赞同：1
> 
> 时间：2013-02-19T04:35:03.587
> 
> 标签：vb.net

我想创建一个包含两列的网格视图对象：EventName 和 Date。

我在 VB 中工作，我的 webapp 将读取一个 txt 文件以获取将添加到 gridview 的数据。文本文件中的数据将如下所示：

```
76ers vs Timberwolves
2/20/2013

76ers vs Heat
2/23/2013

76ers vs Knicks
2/24/2013

76ers vs Warriors
3/2/2013 
```

因此，在阅读完列表后，我的网格视图应该如下所示：

```
EVENT NAME                 DATE
76ers vs Timberwolves      2/20/2013
76ers vs Heat              2/23/2013
76ers vs Knicks            2/24/2013
76ers vs Warriors          3/2/2013 
```

这是我用于从文本文件中读取数据以直接将其呈现为日历对象的代码：

```
Sub DayRender(ByVal source As Object, ByVal e As DayRenderEventArgs) Handles Calendar1.DayRender

Dim FILENAME As String = Server.MapPath("EventsList3.txt")

Dim objStreamReader As StreamReader
objStreamReader = File.OpenText(FILENAME)

Dim contents(0 To 999) As String
Dim month(0 To 999) As Integer
Dim day(0 To 999) As Integer
Dim year(0 To 999) As Integer

Dim i As Integer = 0

While objStreamReader.EndOfStream = False
    objStreamReader.ReadLine()
    contents(i) = objStreamReader.ReadLine
    month(i) = objStreamReader.ReadLine
    day(i) = objStreamReader.ReadLine
    year(i) = objStreamReader.ReadLine
    i = i + 1
End While

Dim j As Integer = 0

While j < 10
    If e.Day.Date.Day = day(j) And e.Day.Date.Month = month(j) And e.Day.Date.Year = year(j) Then
        e.Cell.Controls.Add(New LiteralControl(ChrW(60) & "br" & ChrW(62) & contents(j)))
    End If
    j = j + 1
End While

objStreamReader.Close()

End Sub 
```

我用于上述代码的文本文件如下所示：

```
76ers vs Timberwolves
2
20
2013

76ers vs Heat
2
23
2013

76ers vs Knicks
2
24
2013

76ers vs Warriors
3
2
2013

76ers vs Celtics
4
2
2013

76ers vs Heat
3
13
2013

76ers vs Hawks
3
6
2013

76ers vs Magic
3
10
2013

76ers vs Bulls
2
28
2013

76ers vs Raptors
1
18
2013 
```

现在我需要做几乎相同的事情，除了现在不是将信息发送到日历对象，我需要将信息添加到网格视图对象中。有谁知道一个很好的 gridview 指南，可以给我一个非常简单的样本来工作？我的问题只是弄清楚使用 Microsoft 的对象，因为我需要将它们用于我的作业。

我将非常感谢一个不错的示例 Gridview，干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:40:01.447

创建一个`DataTable`对象，用您的数据填充它并`DataTable`为`DataSource`您的`GridView`. [这](https://stackoverflow.com/questions/2001764/binding-datatable-to-grid-view)是一个很好的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T04:41:20.813

由于您要求 GridView 教程或示例，

*   [该站点包含多个 gridview 示例](http://vb.net-informations.com/datagridview/vb.net_datagridview_tutorial.htm)。

*   [http://www.c-sharpcorner.com/uploadfile/ahmad-bhandara/how-to-work-with-data-grid-view-in-vb-net2/](http://www.c-sharpcorner.com/uploadfile/ahmad-bhandara/how-to-work-with-data-grid-view-in-vb-net2/)

建议阅读教程以熟悉该对象:)

# node.js - 如何知道模块是否安装在节点中

> ID：14949929
> 
> 赞同：0
> 
> 时间：2013-02-19T04:36:26.613
> 
> 标签：node.js

我知道我可以在 node.js 中使用`npm install module-name`. 但尝试多次，它会再次安装。我厌倦了忘记我已经在全球范围内安装了模块并且我正在再次安装它们。我如何知道节点中是否已全局存在模块安装？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T04:42:04.247

你得试试

```
npm ls 
```

将为您提供已安装模块的列表

列出全局包

```
npm ls -g 
```

更详细地列出全局包

```
npm ls -gl 
```

以相同的方式列出本地包的详细信息

```
npm ls -l 
```

你也可以输入

```
npm help ls 
```

有关此的更多详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:49:06.623

如果您想知道是否安装了特定模块，可以运行`npm explore <module>`. 如果您收到错误，那么您没有该模块，您应该下载它。

这有点骇人听闻，但它确实有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-01T07:24:47.557

在您的 js 代码中，只需执行以下操作：

```
try {
    console.log(require.resolve("some-npm-module-name"));
} catch(e) {
    console.error('moduel is not installed');
    process.exit(e.code);
} 
```

# c# - 将二维整数数组转换为灰度图像

> ID：14949931
> 
> 赞同：0
> 
> 时间：2013-02-19T04:36:49.843
> 
> 标签：c#, arrays, graphics

我有一个 2D 整数数组，范围从 0 到 255，每个代表一个灰色阴影。我需要把它变成灰度图像。图像的宽度和高度分别是数组的列数和行数。

截至 2013 年 2 月，我正在使用带有最新（我认为）.NET 框架的 Microsoft Visual C# 2010 Express。

许多其他人都遇到过这个问题，但发布的解决方案都没有对我有用；他们似乎都调用了我的代码中不存在的方法。我想我可能会错过 using 语句或其他内容。

顺便说一句，我对编程很陌生，所以请尽可能解释一切。

提前致谢。

编辑：好的，这就是我所拥有的：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            int width;
            int height;
            int[,] pixels;
            Random randomizer = new Random();

            Start:
            Console.WriteLine("Width of image?");
            string inputWidth = Console.ReadLine();
            Console.WriteLine("Height of image?");
            string inputHeight = Console.ReadLine();

            try
            {
                width = Convert.ToInt32(inputWidth);
                height = Convert.ToInt32(inputHeight);
            }
            catch (FormatException e)
            {
                Console.WriteLine("Not a number. Try again.");
                goto Start;
            }
            catch (OverflowException e)
            {
                Console.WriteLine("Number is too big. Try again.");
                goto Start;
            }

            pixels = new int[width, height];

            for (int i = 0; i < width; ++i)
                for (int j = 0; j < height; ++j)
                pixels[i, j] = randomizer.Next(256);

            Console.ReadKey();
        }
    }
} 
```

所以这是我正在尝试做的一些伪代码：

```
Initialize some variables

Prompt user for preferred width and height of the resulting image.

Convert input into Int.

Set up the array to be the right size.

Temporary loop to fill the array with random values. (this will be replaced with a series of equations when I can figure out how to write to a PNG or BMP.

//This is where I would then convert the array into an image file.

Wait for further input. 
```

其他似乎帮助其他人使用称为位图的类或对象的解决方案，但我似乎没有那个类，也不知道它在哪个库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:25:45.733

以与从 RGB 字节创建图像相同的方式创建它，灰度的唯一区别是 RGB 将是相同的值以获得灰色：

```
int width = 255; // read from file
int height = 255; // read from file
var bitmap = new Bitmap(width, height, PixelFormat.Canonical);

for (int y = 0; y < height; y++)
   for (int x = 0; x < width; x++)
   {
      int red = 2DGreyScaleArray[x][y]; // read from array
      int green = 2DGreyScaleArray[x][y]; // read from array
      int blue = 2DGreyScaleArray[x][y]; // read from array
      bitmap.SetPixel(x, y, Color.FromArgb(0, red, green, blue));
   } 
```

# mocking - 有没有人有使用 $httpBackend 的示例（模块 ngMockE2E 中的服务）

> ID：14949932
> 
> 赞同：9
> 
> 时间：2013-02-19T04:36:52.193
> 
> 标签：mocking, angularjs

我真的很想找到让我的 Angular 应用程序使用模拟后端服务的最简单方法。

任何指针都会很棒，这是一个示例应用程序，它展示了如何编写一个简单的应用程序来完成这项工作。天呐！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T07:57:11.733

这是一个使用 $httpBackend 的[示例](http://plnkr.co/edit/QYKAKvqO9OX8n9uuBSGx?p=preview)plunkr 作为一个示例，以无后端开发作为示例来回答[这个问题](https://stackoverflow.com/questions/14973602/how-to-access-nested-objects-in-json-by-angularjs-resource)。

我添加到 plnkr 以使其正常工作的主要内容是：

1.  引用`angular-mocks.js`了html中的文件。
2.  `ngMockE2E`在 angular.module 中添加了 app.js 中第 3 行的数组
3.  注入`$httpBackend`app.run 并添加代码以告诉模拟后端在请求对特定 URL 的 GET 时响应什么。

这主要取自[$httpBackend](http://docs.angularjs.org/api/ngMockE2E.$httpBackend)文档。请注意，您可以`.passThrough()`为您想要实际命中后端（绕过模拟）的任何调用执行 a。如果后端的某些部分已经在工作，这将特别有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-12T02:26:53.093

这是从各种示例中提取的基本模板：

```
'use strict';

(function() {

    if( !document.URL.match(/\?nobackend$/) ){
        // if not requested only add a blank stub to app dependency.
        angular.module('ds.backendMock', []);

    } else if (document.URL.match(/\?nobackend$/)) {

        // if the query string is present add a module with a run definition to replace the back end.
        angular.module('myMock', ['ngMockE2E'])

            .run(function($httpBackend) {

                // MOCK-RUNNER-CONFIGURATION-.
                var DOMAIN = 'example.com',
        $httpBackend.whenGET('http://'+DOMAIN+'/someexample')
                    .respond(
                        //MOCK-ERROR-STATUS-CODE
                        //401 //500 //404  //uncomment integer to mock status code and comment out mock data.
                        //MOCK-DATA-RESPONSE
                        {
                          'id' : '1',
                          'name' : 'MOCK',
                          'description' : 'mocking',

                        }
                    ); //end mock.

                    // various passthroughs. these allow existing services to work, while some are mocked.
                    $httpBackend.whenGET('./some.html').passThrough();

                    // dont mock everything else, specify pass through to avoid error.
                    $httpBackend.whenGET(/^\w+.*/).passThrough();
                    $httpBackend.whenPOST(/^\w+.*/).passThrough();

                });

        }

})(angular); 
```

# ruby-on-rails - 用一个模型搜索另一个模型

> ID：14949936
> 
> 赞同：1
> 
> 时间：2013-02-19T04:37:13.893
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, sunspot

我的应用程序包含一个饮料模型

```
class Drink < ActiveRecord::Base

  attr_accessible :name
  has_many :recipe_steps, :dependent => :destroy
  has_many :ingredients, through: :recipe_steps
end 
```

成分模型

```
class Ingredient < ActiveRecord::Base
  attr_accessible :name

  has_many :recipe_steps
end 
```

我将如何获得它，所以当用户搜索一种成分时，它会返回所有含有该成分的饮料？

附加信息：我目前正在使用 sunspot/solr 进行搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:59:33.430

首先，在您的`Ingredient`模型中，您需要这一行：

```
has_many :drinks, through: :recipe_steps 
```

定义`has_many, through:`关系。确保它`RecipeStep`也有这些行：

```
belongs_to :ingredient
belongs_to :drink 
```

然后你可以做类似的事情`DrinksController`：

```
def search
  term = params[:search]
  ingredient = Ingredient.where(:name => term)
  @drinks = Ingredient.find(ingredient).drinks
end 
```

你的表格应该是这样的：

```
<%= form_for @drink, :url => { :action => "search" } do |f| %>
  <%= f.text_field :search %>
<% end %> 
```

我不知道你所有的名字，但这应该能让你继续前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:51:38.943

以下应该可以正常工作：

```
class Ingredient < ActiveRecord::Base
  ...
  has_many :recipe_steps
  has_many :drinks, through: :recipe_steps
end 
```

# rdf - 如何创建一种方法来使用 Jena 获取某种类型的资源？

> ID：14949945
> 
> 赞同：2
> 
> 时间：2013-02-19T04:37:42.557
> 
> 标签：rdf, jena, ontology

我对耶拿知之甚少。我应该如何创建一种方法来获取特定类型的资源？

```
public static String[] getResourcesOfType(String typeName)
{
  ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:38:45.527

```
SELECT * { ?x a <typeURI> } 
```

其中“a”是 rdf:type 的简写形式。

或使用

```
model.listStatements(null, RDF.type, <ResourceForTheType>) 
```

# oauth - 果园：脸书认证

> ID：14949946
> 
> 赞同：2
> 
> 时间：2013-02-19T04:37:47.427
> 
> 标签：oauth, orchardcms, dotnetopenauth, facebook-authentication, orchardcms-1.6

我需要使用 OpenAuth（不一定，但首选）将 Facebook 身份验证添加到 Orchards 本地用户系统。

是否有任何模块（我不知道）或者我应该自己实现它？如果是这样，最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T08:57:40.733

是的。您可以在图库上进行搜索，您可以克隆它： http: [//orchardopenauth.codeplex.com/](http://orchardopenauth.codeplex.com/)

# ruby-on-rails-3 - 渲染一个部分而不是或在一个闪光通知中

> ID：14949947
> 
> 赞同：0
> 
> 时间：2013-02-19T04:37:49.470
> 
> 标签：ruby-on-rails-3

我想渲染部分或类似内容来代替简单的 Flash 通知。这是它目前的存在方式：

```
format.html { redirect_to share_url(@doc), notice: "#{@doc.title} has been created. You may #{view_context.link_to('edit', edit_doc_url(@doc))} it further, #{view_context.link_to('finalise', lock_doc_url(@doc))} it, or return #{view_context.link_to('home', root_url)}.".html_safe } 
```

我想渲染部分或类似的而不是通知，以便我可以对其进行更多自定义。

有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:16:44.143

你可能可以这样做：

```
format.html { render action: "my_error_messages" } 
```

然后`my_error_messages`在同一个控制器中创建一个动作，并为其创建相应的视图和路由。然后根据需要自定义 html/haml。

另一种方法可能是`messages`为最有可能在应用程序布局中调用的 Flash 消息自定义部分内容。您可能会在您的`apps/views/layouts`目录中找到它。

# r - 如何在R中使用字符作为函数定义

> ID：14949949
> 
> 赞同：-2
> 
> 时间：2013-02-19T04:38:00.587
> 
> 标签：r, function, character

我有很多实际上是函数定义的字符。我怎样才能使用这些字符来执行这些功能？我拥有的字符如下：

```
foo1 <- "function(p1,p2){, v <- 2, print(\"value is \"), print(v)}"

foo2 <- "function(){, cName <- .Call(\"companyNames\"), return(cName)}"

foo3 <- "function(tickers,field,date){,df<-data.frame(Ticker = tickers, Field = field, Date = date), return(df)}" 
```

...ETC

我需要一个通用方法来执行所有这些功能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T04:41:30.453

### 编辑：你改变了你的问题，所以我修改了我的答案：

```
do.call(eval(parse(text=foo1)), list()) 
```

您可以为每个函数添加一个命名列表来代替`list()`. 但坦率地说，你正在尝试的是近乎荒谬的。我不知道你是如何进入需要这些工具的位置的。从这里开始，您将遇到各种范围界定问题。

### 旧解决方案：

```
fun <- eval(parse(text="function(p1,p2){v <- 2; print(paste0(\"value is \", v))}"))
fun()
## [1] "value is 2" 
```

# c# - 无法从 Regex 中获取组

> ID：14949950
> 
> 赞同：0
> 
> 时间：2013-02-19T04:38:00.033
> 
> 标签：c#, regex

以下代码仅返回“干得好！” 如何从中获取实际的 URL？我按照给出的网站上的教程进行操作，但我仍然很难理解它。另外，我认为这不是处理正则表达式（将正则表达式与 html 混合）的最佳方法。有没有一种简单的方法来基于它的 CSS 类来捕获文本？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Net;
using System.IO;
using System.Text.RegularExpressions;

namespace Scraper
{
    class Program
    {
        static void Main(string[] args)
        {
            string target = @"http://www.omegacoder.com/?p=58";
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(target);
            HttpWebResponse response = (HttpWebResponse)request.GetResponse();

            Regex URL  = new Regex("(?:href=)(?<link>.*?)");

            string line;
            using (Stream responseStream = response.GetResponseStream())
            using (StreamReader htmlStream = new StreamReader(responseStream))
                while ((line = htmlStream.ReadLine()) != null){

                    Match m = URL.Match(line);

            if (m.Success) {
                Console.WriteLine("Good job! " + URL.Match(line) + m.Groups[0].Value + m.Groups[1].Value + m.Groups["link"]);
                Console.ReadLine();
            } else {

            }

                }  
                /*    if (Regex.IsMatch(line, "XXXXX")) 
                            Console.WriteLine(line);
                } */
            Console.ReadLine();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:33:07.153

你应该使用`(?:href=)(?<link>\S*)`

`\S`匹配一个不是空格的字符

# java - Java Jtable 电子表格格式

> ID：14949954
> 
> 赞同：1
> 
> 时间：2013-02-19T04:38:29.900
> 
> 标签：java, swing, jtable

我在实施方面遇到问题`JTable`，特别是`AbstractTableModel`. 我可以创建和显示数据，`JTable`但我当前的场景与我通常的场景不同。

我想做的是让我`JTable`接受来自用户的输入，并且我想将其他组件放入`JTable`

假设每一行都有一个`JComboBox`,`JTextField`和一个`JCheckBox`，但是当我开始实现`JTable`模型 ( `AbstractTableModel`) 时，我不知道如何将这些组件放入我的`JTable`?

由于返回类型的方法`getValue`是`AbstractTableModel`对象数据类型。对于此类问题，您是否有任何解决方法以及我讨厌使用的方式，`DefaultTableModel`因为它尽可能缺乏灵活性，我`AbstractTableModel`非常感谢:) 帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T07:14:22.920

您绝对应该从[*如何使用表格*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)开始并研究那里的[示例](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#eg)。虽然`JTable`不是电子表格，但您*可以*在表格模型中计算派生值。此[示例](https://stackoverflow.com/a/7356518/230513)显示如何使用 a`JComboBox`更新同一行中的其他单元格，这些[示例](https://stackoverflow.com/a/13628183/230513)类似地对比了`TableModel`您提到的两种实现。最后，您可以使用 available`ScriptEngine`来评估简单的算术表达式。例如，下面的示例打印`42.0`.

```
ScriptEngine engine = mgr.getEngineByExtension("js");
try {
    System.out.println(engine.eval("5 * 8 + 2"));
} catch (ScriptException ex) {
    ex.printStackTrace(System.err);
} 
```

# javascript - HTML/Javascript：如何在不重新提交表单的情况下控制刷新操作

> ID：14949955
> 
> 赞同：0
> 
> 时间：2013-02-19T04:38:40.563
> 
> 标签：javascript, html

我们正在尝试实现一个网页，每次刷新页面都不会导致表单重新提交，如何实现？是否有任何 Javascript 代码或 HTML 可以使其无需外部 javascript 库（jquery、dojo 或 extJs）

这种设计的原因是表单将绑定与当前数据的唯一关系，意味着不能执行两次，但出于安全原因，我们必须使用 POST 而不是 GET，在操作之后我们仍然希望保留用户的权利在同一页面上对另一个关系执行类似的操作。那么如何避免这样的后果呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:50:33.077

假设对表单的操作将其提交给`submit_form.php`. 该文件可以处理数据并做它需要做的任何事情。然后在它的响应中，它可以将浏览器重定向到一个单独的页面（您必须查找如何执行此操作的确切方法，具体取决于您编写 POST 处理程序的语言）。这个单独的页面可以使用会话变量或其他方法显示表单提交的结果。

# database - 只包含其他表的主键的表，这个表是否需要自己的主键

> ID：14949956
> 
> 赞同：1
> 
> 时间：2013-02-19T04:38:41.980
> 
> 标签：database, data-binding

我正在创建一个只包含其他三个表的主键的表。我也应该保留这个表的主键吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:46:33.410

是的，它的主键应该由这三个外键组成。

```
create table foo (
  pk_1 whatever_type not null references table_1 (pk_1),
  pk_2 whatever_type not null references table_2 (pk_2),
  pk_3 whatever_type not null references table_3 (pk_3),
  primary key (pk_1, pk_2, pk_3)
); 
```

# c - 更改我在 C 中的函数内部传递的指针

> ID：14949957
> 
> 赞同：0
> 
> 时间：2013-02-19T04:38:50.527
> 
> 标签：c, function, pointers

我有这段代码（希望）成为一个单链表实现。

```
#include <stdio.h>
#include <stdlib.h>

struct NODE{
   int d;
   struct NODE *next;
};

int addNode(int n, struct NODE **root);

int main(){

    struct NODE *root = NULL;
    addNode(3, &root);

    printf("%i\n", root->d);    

    getch();
    return 0;
}

int addNode(int n, struct NODE **root){

   if(*root == NULL){
           *root = malloc(sizeof(struct NODE));
           *root->d = n;
           *root->next = NULL;
           return 0;
   }
} 
```

当我运行它时，我在 addNode 函数中收到“对非结构或联合的成员 'd' 的请求”；与“下一个”部分相同。相反，如果我将功能更改为：

```
int addNode(int n, struct NODE **root){

struct NODE *temp;

if(*root == NULL){
        *root = malloc(sizeof(struct NODE));
        temp = *root;
        temp->d = n;
        temp->next = NULL;
        return 0;
    }
} 
```

它工作得很好。我的问题是；为什么我必须创建临时？据我了解，在代码的第一个版本中，我传递了一个指向根的指针，因此不应该存在“通过引用传递”的问题，并且它不应该有运行问题......错误是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T04:39:41.563

```
(*root)->d = n;
(*root)->next = NULL; 
```

它是一个运算符优先级问题。使用`()`将修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T04:41:44.060

运算符优先级。

```
*root->d = n; 
```

被解析为

```
*(root->d) = n; 
```

但是你想要

```
(*root)->d = n; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T04:43:05.617

请参阅[运算符优先级表](http://en.wikipedia.org/wiki/Operators_in_C_and_C++)。该`->`运算符的优先级高于`*`（取消引用）运算符，这就是您出错的原因。

由于运算符优先级，*root->d 被解释为 *(root->d) 而不是 (*root)->d。

# ios - didselectrowatindexpath 未调用

> ID：14949959
> 
> 赞同：-1
> 
> 时间：2013-02-19T04:39:25.287
> 
> 标签：ios

我面临一个问题，没有调用 didselectrowatindexpath。我的tableview在viewdidload中设置如下：

```
- (void)viewDidLoad
{
    //[super viewDidLoad];

    self.tableView.delegate = self;
    self.tableView.dataSource = self;
    [self.tableView reloadData];
    self.detailViewController = (klViewController *)[[self.splitViewController.viewControllers lastObject] topViewController];

} 
```

现在我的 cellForRowAtIndexPath 被调用，我正在重用单元格，如下所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"menuSelection1";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    AmbassadorInfoData * data = [self.LoadMenuItems objectAtIndex:indexPath.row];
    cell.textLabel.text = data.treeName;

    return cell;
} 
```

我已经检查了其他答案，并且大多说可能会使用 didDeselectRowAtIndexPath 。但这里不是这种情况。现在我的问题出在我的拆分视图控制器中，每当我选择任何选项时，相应的详细视图都不会显示并且是空白的。我在 rootview 控制器（klViewController）中的方法都没有被调用。这可能是什么原因？以下是与 UITableView 相关的所有方法。它在与 viewDidLoad 相同的类中实现

```
#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    // Return the number of rows in the section.
    return [self.LoadMenuItems count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"menuSelection1";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    AmbassadorInfoData * data = [self.LoadMenuItems objectAtIndex:indexPath.row];
    cell.textLabel.text = data.treeName;

    return cell;
}

-(NSArray *)LoadMenuItems
{

    NSMutableArray * menuData =  [[NSMutableArray alloc] initWithCapacity:5];
    AmbassadorInfoData * data = [[AmbassadorInfoData alloc] init];

    data.treeName = @"Ambassador Info";
    data.treeDescription = @"This is temp data.";
    NSString * file = [[NSBundle mainBundle] pathForResource:@"oak" ofType:@"jpg"];
    data.treePhoto = [UIImage imageWithContentsOfFile:file];

    [menuData addObject:data];
    data=nil;

    data = [[AmbassadorInfoData alloc] init];
    data.treeName = @"AmbassadorInternalList";
    data.treeDescription = @"This is temp data.).";
    file = [[NSBundle mainBundle] pathForResource:@"DouglasFir" ofType:@"jpg"];
    data.treePhoto = [UIImage imageWithContentsOfFile:file];
    [menuData addObject:data];
    data=nil;

    data = [[AmbassadorInfoData alloc] init];
    data.treeName = @"Text 3";
    data.treeDescription = @"This is temp data.";
    file = [[NSBundle mainBundle] pathForResource:@"SugarMaple" ofType:@"jpg"];
    data.treePhoto = [UIImage imageWithContentsOfFile:file];
    [menuData addObject:data];
    data=nil;

    data = [[AmbassadorInfoData alloc] init];
    data.treeName = @"Text 4";
    data.treeDescription = @"This is temp data.";
    file = [[NSBundle mainBundle] pathForResource:@"RedMaple" ofType:@"jpg"];
    data.treePhoto = [UIImage imageWithContentsOfFile:file];
    [menuData addObject:data];
    data=nil;

    data = [[AmbassadorInfoData alloc] init];
    data.treeName = @"Text 5";
    data.treeDescription = @"This is temp data.";
    file = [[NSBundle mainBundle] pathForResource:@"Pine" ofType:@"jpg"];
    data.treePhoto = [UIImage imageWithContentsOfFile:file];
    [menuData addObject:data];
    menuItems = [[NSArray alloc] initWithArray:(NSArray *)menuData];
    data=nil;

    return menuItems;

}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    AmbassadorInfoData * selectedItem =(AmbassadorInfoData *)[self.menuItems objectAtIndex:[self.tableView indexPathForSelectedRow].row];

    detailObject = selectedItem;

    [detailViewController setDetailItem:detailObject];

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:17:11.740

尝试这些修改：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    NSLog(@"TableView methods are called! problem is getting AmbassadorInfoData object") 

    AmbassadorInfoData * selectedItem =(AmbassadorInfoData *)[self.menuItems objectAtIndex:indexPath.row];

    if (!selectedItem) NSLog(@"Unable to get Ambassador object, check your menuItems");

    [self.detailViewController setDetailItem:selectedItem];   //notice "self."

} 
```

另外，取消注释 [super viewDidLoad];

编辑：

看来您正在使用您不理解的代码，在这种情况下，我建议学习一些基础知识....这是一个[很棒的网站](http://www.raywenderlich.com/tutorials)，帮助我理解了很多次

这是来自 Apple 的指南：[Table View Programming Guide](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/AboutTableViewsiPhone/AboutTableViewsiPhone.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:46:05.640

由于您使用 LoadMenuItems 的方式，您的程序可能会卡在长时间运行的操作中。每次调用 numberOfRowsInSection 和 cellForRowAtIndexPath 时，您都在重新创建整个数组——这很糟糕。您应该调用一次 LoadMenuItems，也许在 viewDidLoad 中，一旦创建了该数组，就使用它，而不是在需要获取数据时调用 LoadMenuItems。我不知道这是否是导致您的问题的原因，但您绝对应该修复它，看看它是否有所作为。

# java - 定时动作java游戏

> ID：14949967
> 
> 赞同：0
> 
> 时间：2013-02-19T04:40:51.240
> 
> 标签：java

```
 Calendar date1 = Calendar.getInstance();
    Calendar date2 = Calendar.getInstance();
    boolean checkTime = true;

        if (checkTime == true)
            before=date1.get(Calendar.SECOND);
        checkTime=false;

        after=date2.get(Calendar.SECOND);   

        difference= after-before; 
```

我有它，这样之前的变量就会变成一个静态的秒，它会不断重新计算之后的时间，并得到两者之间的差异。但是，它似乎只更新了 'after' 变量一次，导致差异为 0。

附言。这是我正在玩的一款游戏，我试图让运动与时间相关。我无法弄清楚我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:54:59.617

```
Calendar date2 = Calendar.getInstance(); 
```

gets a Calendar that is initailized with the current date and time. After that it does not change, so `after` will always be the same value. If you are wanting new current time each iteration you will need to create a new instance (or use `System.currentTimeMillis()`) each iteration.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T06:17:40.133

大多数情况下，您将得到 0，因为您的代码行在不到一毫秒的时间内执行。还有运行时优化和 GC 发挥作用。

总而言之，您无法确定结果是否非零。

你可以试试这样的

```
Calendar date1 = Calendar.getInstance();
try{
Thread.sleep(1000);
}catch(Exception e){}
Calendar date2 = Calendar.getInstance(); 
```

有差异为1。

也看看[这里](https://stackoverflow.com/questions/1712205/current-time-in-microseconds-in-java)。

# asp.net - 不授予对 mdb 文件的访问权限

> ID：14949968
> 
> 赞同：0
> 
> 时间：2013-02-19T04:40:53.103
> 
> 标签：asp.net, .net, ms-access, iis

我在 d:rackelywin/rackely.mdb 文件夹中有一个 mdb 文件。rackelywin 是其他本地计算机使用的共享文件夹。当我在 IIS 中托管 .net 应用程序时，它不会授予访问 rackel.mdb 文件的权限。当我在本地运行应用程序时，它可以工作。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:14:29.467

我们需要更改共享文件夹的权限。

# java - 休眠标准将属性限制为一组可能性，包括 null

> ID：14949981
> 
> 赞同：1
> 
> 时间：2013-02-19T04:42:09.407
> 
> 标签：java, hibernate, hibernate-criteria

我仍在尝试了解`Restrictions.in("propName", ...)`Hibernate`Criteria`对象的操作符是如何工作的。

假设我有一个`IceCream`具有可为空属性的实体，并且我想获得所有口味等于或的`flavour`冰淇淋。`"chocolate"``"banana"``**null**`

使用 Hibernate 标准执行此操作的正确方法是什么？

我试过这个，但它不包括结果列表中冰淇淋口味为空的行：

```
String[] allowedFlavours = { "chocolate", "banana", null };
Criteria criteria = getSession().createCriteria(IceCream.class);
criteria.add(Restrictions.in("flavour", allowedFlavours));
return criteria.list(); 
```

我是否应该添加一个全新的标准只是说“或味道为空”？这似乎不是很有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:48:12.177

试试这个方法

1>

```
 Criteria criteria = getSession().createCriteria(IceCream.class);
    criteria .add(Restrictions.disjunction().add(Restrictions.eq("flavour", "chocolate")).add(Restrictions.eq("flavour", "banana")).add(Restrictions.isNull("flavour"))); 
```

2>

```
String[] allowedFlavours = { "chocolate", "banana"};
Criteria criteria = getSession().createCriteria(IceCream.class);
criteria.add(Restrictions.disjunction().add(Restrictions.in("flavour", allowedFlavours)).add(Restrictions.isNull("flavour"));

return criteria.list(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:00:19.023

您可以尝试使用以下代码`disjunction()`

> **disjunction**：将表达式组合在一个析取中（A 或 B 或 C...）

```
Criteria criteria = getSession().createCriteria(IceCream.class);
    criteria.add(Restrictions.disjunction()
    .add( Restrictions.isNull("flavour") )
    .add(Restrictions.in("flavour", new String[] { "chocolate", "banana" } ) ); 
```

*请添加/删除括号，适当地格式化代码，因为我是手动输入的。*

# divide-and-conquer - 简单的分而治之的例子

> ID：14949982
> 
> 赞同：0
> 
> 时间：2013-02-19T04:42:17.593
> 
> 标签：divide-and-conquer

这是我的测试分治程序，但它给了我一个错误。我正朝着正确的方向前进？

```
public class getSum {
    static int sum = 0;
    public static void main(String[] args) {
            int[] numbers = {2,2,2,2,2,2,2,2};
            int amount = 0;
           amount = sumArray(0,numbers.length,numbers);
           System.out.print(amount);
    }

    public static int sumArray(int first, int last, int[] A){
        int index = last - first;
        if(index == 1){
            return sum;
        }else if(index <= 4 && index > 1){
            for(int i = first; first < last; i++){
                sum += A[i];
            }
            return sum;
        }
        return (sumArray(first, last / 2, A) + sumArray(last / 2, A.length, A));
    }
} 
```

这是 getSum.sumArray(getSum.java:16) 线程“main”java.lang.StackOverflowError 中的错误异常

我正在寻找一个简单的例子，将 16 个数组分解为基本情况 4。我无法完全理解如何吐出数组，然后再次拆分它。然后最后合并所有的拆分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:57:20.200

您可以使用递归进行分而治之。你一直在较小的数组上递归，直到找到匹配项，然后爬上递归树。

例如：使用递归函数 isIn(Number x, Array a) 查找一个数字是否在数组中

```
Boolean isIn(Number x, Array a) {

   n = a.size
   if n==1 then return a[0]==x
   else
      return isIn(x, a[0:n/2]) or isIn(x,a[n/2:n])
} 
```

您可以看到问题是如何分成两个较小的问题，依此类推，直到它达到停止条件“n==1”，然后它开始在调用树上返回结果。这是伪代码，您必须使概念适应您使用的编程语言

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T04:50:54.797

> 无法完全理解如何吐出数组，然后再次拆分。

使用递归你可以做到这一点。

# java - 如何在 ItemWriter 中获取 JobParameter 和 JobExecutionContext？

> ID：14949985
> 
> 赞同：24
> 
> 时间：2013-02-19T04:42:29.177
> 
> 标签：java, spring-batch

我想在我的班级中检索`JobParameter`和`JobExecutionContext`反对。`ItemWriter`如何进行？

我尝试`StepExecutionListener`通过它来实现我只是调用父类方法。但它没有成功。

提前致谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-19T06:04:24.417

实现 StepExecutionListener 是一种方法。事实上，这是 Spring Batch 1.x 中的唯一方法。

从 Spring Batch 2 开始，您有另一种选择：您可以将 Job Parameters 和 Job Execution Context 中的任何条目注入到您的项目编写器中。使您的项目编写器具有`step`范围，然后使用表达式`#{jobParameters['theKeyYouWant']}`或`#{jobExecutionContext['someOtherKey']}`为您的项目编写器注入值。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-04-23T23:19:35.287

在单步处理之前使用`@BeforeStep`注解调用方法。

```
//From the StepExecution get the current running JobExecution object.
public class MyDataProcessor implements ItemProcessor<MyDataRow, MyDataRow> {
    private JobExecution jobExecution;

    @BeforeStep
    public void beforeStep(StepExecution stepExecution) {
        jobExecution = stepExecution.getJobExecution();
    }
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-09-13T08:15:13.880

补充一下 Adrian Shum 的回答，如果要避免将每个作业参数作为类属性注入，可以直接注入`Map`of `JobParameter`s，如下所示：

```
@Value("#{jobParameters}")
private Map<String, JobParameter> jobParameters; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-07-07T09:34:23.560

如果您使用的是 Spring 配置文件，则可以通过以下方式访问 StepExecution 对象：

```
<bean id="aaaReader" class="com.AAAReader" scope="step">
    <property name="stepExecution" value="#{stepExecution}" />
</bean> 
```

在 AAAReader 类中，您需要创建正确的字段和设置器：

```
private StepExecution stepExecution;

public void setStepExecution(final StepExecution stepExecution) {
    this.stepExecution = stepExecution;
} 
```

Processor 和 Writer 类相同。

# objective-c - Objective-C：如何将 typedef 枚举存储在 plist 中？

> ID：14949995
> 
> 赞同：0
> 
> 时间：2013-02-19T04:43:14.880
> 
> 标签：objective-c, plist, typedef

Plist 似乎可以输入的数据类型数量有限。但是，我知道存在漏洞，例如将 int 存储为 Number，然后使用 [x integerValue] 将其设置回 int。是否有类似的解决方法将 typedef 枚举存储在属性列表中？

由于它们实际上只是整数，有没有办法将它们存储为数字，然后将它们转换为它们的 typedef？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T04:54:14.183

您必须存储原始枚举整数值，然后将它们作为整数再次加载。一旦你再次加载它们，`NSNumbers`你就可以使用它`[num intValue]`来获取整数。然后您可以将其与您的枚举进行比较，例如：

```
intRep = [loadedNumber intValue];
if (intRep == MY_ENUM_CONSTANT) {
    // Do something...
}
// ... etc. 
```

将值`"MY_ENUM_CONSTANT"`作为字符串存储在 plist 中没有任何意义 - 如果`-isEqualToString`肯定与系统发生冲突，则对其进行逆向工程。如果您需要更大的灵活性，尽管您可以在 plist 中存储二进制数据对象，但这可能有点过分满足您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:04:53.910

您需要将它们转换为适合 plist 的格式，您可以使用最简单的整数值并使用 NSNumber，但您也可以编写几个函数来转换为字符串值和从字符串值转换。如果您对枚举、0、1、2 等使用默认整数。然后您可以使用枚举作为字符串数组的索引，从字符串返回枚举/int，使用 for 循环通过您的字符串数组并返回匹配索引。

# cordova - Cordova/phonegap 项目不复制模板文件

> ID：14949996
> 
> 赞同：0
> 
> 时间：2013-02-19T04:43:20.680
> 
> 标签：cordova

我在运行的 Windows 7 上遇到问题：

```
D:\sdks\incubator-cordova-android\bin>create d:/projects/mycotest com.example.mycotest MyCoTest 
```

并获得以下输出

```
Microsoft (R) Windows Script Host Version 5.8
Copyright (C) Microsoft Corporation. All rights reserved.

Creating new android project...
Building jar and js files...
Copying template files...
Copying js, jar & config.xml files...
Copying cordova command tools...
Updating AndroidManifest.xml and Main Activity... 
```

创建的项目可以在 eclipse/android sdk 中编译，但它实际上不包含任何 cordova/phonegap 文件，而只是默认的 android hello world 示例。

我已经尝试过cordova的孵化器github版本 [https://github.com/apache/incubator-cordova-android](https://github.com/apache/incubator-cordova-android)

以及可从网站下载的 2.4.0。

编辑：

在 Windows Vista x86 机器上，该项目创建得很好。在另一台 Windows 7 x64 机器上，该项目以同样的方式失败。好像是windows 7的问题。有人有解决方法吗？

编辑：

此问题在带有 cordova 和 phonegap 的 Windows 8 上也得到了证实。有时会弹出错误“基于 Microsoft 控制台的脚本主机已停止工作”

编辑：

一个临时的解决方法是在windows机器上创建项目< 7。然后复制项目，之后一切正常。我暂时不回答这个问题，因为最初的问题仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:14:21.380

我遇到了同样的问题，在查看创建脚本后发现问题出在项目路径上。您只需要将正斜杠更改为`/`反斜杠`\`。

```
d:\projects\mycotest 
```

# ruby-on-rails - 如何安排帖子在 rails 中发布？

> ID：14949998
> 
> 赞同：0
> 
> 时间：2013-02-19T04:43:36.323
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个简单的脚手架“帖子”，现在我想为其添加调度，以便我可以创建一个帖子并为其添加日期，而帖子只会在那时被创建（实际发布）。

我可以看到我需要为 cron 使用“无论何时”gem，并且可能想使用 published_at 字段，但我有点困惑如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T05:06:33.597

我认为最好只添加一个 published_at 字段，因为您实际上已经在那里有了记录。

```
# Add columns. (DB migration)
add_column :posts, :draft, :boolean, :default => true
add_column :posts, :published_at, :datetime

# Define scopes. (model)
#
# These set up shortcuts that will allow you to do:
#   Post.draft
# instead of this in many places:
#   Post.where(:draft => true)
# Or:
#   Post.published
# instead of:
#   Post.where(:draft => false).where('published_at <= ?', Time.zone.now)
scope :draft, where(:draft => true)
scope :published, proc {
  where(:draft => false).where('published_at <= ?', Time.zone.now)
}

# If the user does not set published_at but sets post to public, automatically
# set published_at to the current time before persisting the record to the
# DB. (model)
before_save :ensure_published_at, :unless => :draft?
protected
def ensure_published_at
  # Set it to current time if none has been specified.
  self.published_at ||= Time.zone.now
end

# Might be helpful if you have a "Publish" action. (model)
#
# This already sets draft to false and published at to the default (because of
# ensure_published_at above:
#   post.publish!
def publish!
  self.draft = false
  self.save!
end

# Finally, fetch the published posts: (controller action)
# It's best to also add pagination and ordering.
@posts = Post.published 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T05:09:00.637

我可以向您展示在我的一个项目中实际工作的代码，例如：

```
# config/schedule.rb:
#  Once wheneverifyed - asks cron to call rake task `posts:publish` every minute.
#  See whenever docs at https://github.com/javan/whenever.
every 1.minute do
  rake 'posts:publish', environment: environment
end

# models/post.rb
class Post < ActiveRecord::Base

  # Every post has
  #  status - either PUBLISH_WAITING or PUBLISHED
  #  publish_at - date/time post need to be published
  #  published_at - actual time post was published (in this example it'll always be equal to publish_at)

  PUBLISH_WAITING, PUBLISHED = 'not_published', 'published'

  scope :publish_waiting, where(status: Post::PUBLISH_WAITING)
  scope :ready_for_publish, where('publish_at <= ?', Time.now)

  # Method to make post published!
  # Warn: it doesnt check if it is time to publish! Just do that.
  def publish_now!
    self.status = Post::PUBLISHED
    self.published_at = self.publish_at
    save!
  end
end

# lib/tasks/posts.rake
#  Define rake `posts:publish` task,
#  which when called searches through all not published
#  (but ready to be published) posts and publishes them.
#  You can call that task manually from CLI `$ rake posts:publish` to check.
namespace :posts do
  desc "Publish posts with cron on certain time"
  task :publish => :environment do
    Post.publish_waiting.ready_for_publish.find_each do |post|
      post.publish_now!
    end
  end
end 
```