# StackOverflow 问答 14742000-14742999

# php - 用于 Chrome 的 MySQL UTF8，用于 IE 的 UTF8，但用于 Chrome 的 HEADER UTF8 和用于 IE 的 UTF-8？

> ID：14742000
> 
> 赞同：2
> 
> 时间：2013-02-07T01:22:51.007
> 
> 标签：php, unicode, utf-8, character-encoding, mysqli

有了这个：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

IE 正常显示 Chrome 正常显示

有了这个：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf8"> 
```

（没有 - 介于 f 和 8 之间）

IE 用 Ã¨$ 等显示 èéàä 等 Chrome 显示正常

然后我有一个 SQL 连接（使用 utf8_unicode_ci 或 ascii_general_ci 设置的数据库）

```
mysqli_set_charset('utf8') 
```

IE 和 Chrome 在发布结果时正确显示 èéàäö

```
mysqli_set_charset('utf-8') 
```

IE 和 Chrome 显示 Ã¨$ 等或 ????? 发布结果时

其他浏览器呢？为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T01:32:06.143

在`Content-Type`元标记中，有效的方式是：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

Chrome 正确显示的原因是因为它在这种情况下更能接受错误，而 IE 要求正确编写它。

然而，它与 MySQL 不同。他们决定使用简称。这是[支持的字符集列表](http://dev.mysql.com/doc/refman/5.5/en/charset-charsets.html)。这是在服务器端完成的，因此您使用的浏览器无关紧要。

您还可以执行以下查询：

```
SHOW CHARACTER SET LIKE 'utf%' 
```

**编辑：**

确保您在`INSERT`数据库中使用相同的字符集，否则当您再次查看它时，这可能会导致不良影响。

# c - 除非在那里探索，否则 Fopen 返回 null？

> ID：14742002
> 
> 赞同：0
> 
> 时间：2013-02-07T01:23:17.410
> 
> 标签：c, null, fopen, explorer

这是一个非常奇怪的错误。

我正在使用 Visual Studio 2012，并且在 C++ 项目（作为 C 项目的容器）中，我正在以这种方式加载文件：

```
const char* fname = "SomeFile.csv";
if(!(fp = fopen(fname, "r")))
{
    printf("Error! Could not open %s!\n",fname);
    return;
} 
```

CSV 与 .EXE 位于同一文件夹中，这就是该程序的目的。

1\. 在调试中运行它时，它无法读取 CSV。

2\. 当我输入文件的完整路径名时，它可以正常工作并加载 CSV。

3\. 当我转到 Windows 资源管理器中的输出文件夹并运行 .exe 时，它​​会正确加载 CSV。

4\. 现在是奇怪的部分。当我转到另一个文件夹（其他任何地方），然后将包含 .exe 的完整路径粘贴到 Windows 资源管理器中时，它会启动程序，但它无法读取 CSV。

需要注意的是，如果我在资源管理器中加载了文件夹，但在 VS2012 调试器中运行它，它也无法加载 CSV。

这里发生了什么？为什么只有在资源管理器中打开窗口时运行它才能找到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:15:59.477

`fopen`,`open`等将在给定没有路径组件的裸文件名的情况下尝试在“当前目录”中打开命名文件。给定一个没有文件系统根目录的文件名，它将尝试在*相*对于当前目录的目录中打开文件。只有当给定一个绝对（完整）路径时，它才会看起来与您告诉它的位置完全相同。

在基于命令行的系统中，当前目录非常明显——它是您发出命令时所在的目录。

在图形用户界面中，当前目录的概念有点糊涂：

*   在 Windows 资源管理器中导航到程序（比如说`WORD.EXE`）并双击它 - 当前目录可能是程序所在的目录 - 您导航到的位置（但没有标准表明必须如此）
*   导航到项目的文档并双击 Word 文档，它会自动启动 WORD.EXE - 当前目录是什么？它可能是文档所在的位置。
*   从开始菜单启动 WORD.EXE - 现在的目录到底是什么？
*   从调试器启动你的程序——*现在*当前目录是什么？

最后一点是为什么您必须告诉 IDE/调试器在启动程序时将其用作当前目录的原因。

`fileOpenDialog`并不完全“默认”到当前目录-它打开到您上次打开它的位置，而不*更改程序的当前目录*-当您选择一个文件时，它会将该文件的*完整路径*传递给程序。

# ios - 在 UINavigationController 中切换 RootView

> ID：14742008
> 
> 赞同：0
> 
> 时间：2013-02-07T01:23:58.923
> 
> 标签：ios, objective-c, uinavigationcontroller

我目前正在尝试为特定的 UINavigationController 切换根视图控制器。我相信这个问题已被多次问过，但似乎没有人在 stackoverflow 上给出正确的答案。

我目前正在使用它作为指南：[http ://starterstep.wordpress.com/2009/03/05/changeing-a-uinavigationcontroller%E2%80%99s-root-view-controller/#comments](http://starterstep.wordpress.com/2009/03/05/changing-a-uinavigationcontroller%E2%80%99s-root-view-controller/#comments)

但是，我似乎无法动态访问 UINavigationController。当我在另一个 .m 文件中时，它将无法访问此导航控制器，因为我已在我的 appdelegate.m 文件中对其进行了初始化。

任何想法将不胜感激。提前感谢，自由

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T01:29:33.010

如何使用 a`notification`或 a `delegate`，您的 viewController 来发送更改的 rootViewController 消息。

并且AppDelegate 接收消息然后改变rootViewController。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T01:36:44.920

当您在应用程序委托中初始化 UINavigationController 时，只需保留对它的引用。在您的应用委托类上创建一个属性来存储引用：

```
@interface MyAppDelegate : UIResponder <UIApplicationDelegate> {
    UINavigationController *myRootViewController;
}

@property (nonatomic, retain) UINavigationController *myRootViewController; 
```

然后每当您想访问它时，请执行以下操作：

```
MyAppDelegate appDelegate = (MyAppDelegate *)[UIApplication sharedApplication].delegate;
UINavigationController *rootViewController = appDelegate.myRootViewController; 
```

（其中 MyAppDelegate 是您的应用委托类的名称。）

# c# - 如何检测 AppBarButtonStyle PointerPressed 和 PointerReleased 事件？

> ID：14742009
> 
> 赞同：0
> 
> 时间：2013-02-07T01:23:59.303
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我有一个在 XAML 中定义的按钮，如下所示：

```
<Button x:Name="CommandsBtn"
        HorizontalAlignment="Right"
        Style="{StaticResource ControlsAppBarButtonStyle}"
        Click="Commands_Click"
        FontFamily="Segoe UI Symbol"
        Background="{x:Null}"
        BorderBrush="{x:Null}"
        Margin="0"
        Grid.Column="3" /> 
```

ControlsAppBarButtonStyle 的定义如下：

```
<Style x:Key="ControlsAppBarButtonStyle"
       TargetType="ButtonBase"
       BasedOn="{StaticResource AppBarButtonStyle}">
  <Setter Property="AutomationProperties.AutomationId"
          Value="CommandsAppBarButton" />
  <Setter Property="AutomationProperties.Name"
          Value="Controls" />
  <Setter Property="Content"
          Value="" />
</Style> 
```

我想检测 PointerPressed 和 PointerReleased 事件。我确实检测到点击事件。

试图做：

```
CommandsBtn.PointerPressed += CommandsBtn_PointerPressed;
CommandsBtn.PointerReleased += CommandsBtn_PointerReleased; 
```

但是这些事件没有被触发（或者至少没有进入我的页面）。

我怎么做？

谢谢， EitanB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:45:02.160

绑定到 Button 的 IsPressed 属性并处理绑定属性的更改以查看更改。也考虑使用 RepeatButton。

# r - 来自 data.table 的全局静默分配

> ID：14742012
> 
> 赞同：1
> 
> 时间：2013-02-07T01:24:18.677
> 
> 标签：r, data.table, xts

我正在使用长格式的 data.table 中的几个时间序列及其特征，我想利用该语法构造几种不同类型的`xts` 对象。`data.table`这是我的想法：

一些初步数据

```
library(data.table)
set.seed(1)
DT <- data.table(
  dat = as.Date("2013-01-01") + rep(1:5, 2),
  a = c(1, -1),
  x = i <- rnorm(10),
  y = 2 * i + rnorm(10),
  z = 3 * i + rnorm(10)) 
```

让（尝试）构建 3 个不同的时间序列

```
DT[a == 1,{
  x.ts <- xts(x, order.by = dat)
  y.ts <- xts(y, order.by = dat)
  }]
DT[
  , list(sz = mead(z/x)), by = dat][   # operate on columns of the datatable
  , z.ts <- xts(sz, order.by = dat)]    # construct xts 
```

这段代码有两个问题：

1.  它打印到屏幕`y.ts`和`z.ts`；
2.  对象仅在`j`环境中而不是在全局环境中创建。

为了解决（2），可以命名全局环境中的对象并使用`<<-`：

```
x.ts <- y.ts <- z.ts <- NA
DT[a == 1,{
  x.ts <<- xts(x, order.by = dat)
  y.ts <<- xts(y, order.by = dat)
  }
]
DT[
  , list(sz = mean(z/x)), by = dat][
  , z.ts <<- xts(sz, order.by = dat)] 
```

确实

```
> z.ts
               [,1]
2013-01-02 2.300730
2013-01-03 4.969685
2013-01-04 1.959377
2013-01-05 1.961270
2013-01-06 3.256254 
```

如何在数据表中使这种类型的分配保持沉默？这是`<<-`合理的使用还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T01:38:36.637

`<<-`是合理的，如果有些不透明。

无论您在 中做什么`j`，除非您正在使用`:=`，如果您没有将结果分配`DT[]`给某物，您最终会打印出``DT[]` 评估结果的结果（`j`在这些情况下`y.ts`和`z.ts`和 分别为参数的结果。

只需将这些调用隐藏起来，它就不会打印出来，或者使结果变成其他东西

使用隐形

```
# 
x.ts <- y.ts <- z.ts <- NA
invisible(DT[a == 1,{
  x.ts <<- xts(x, order.by = dat)
  y.ts <<- xts(y, order.by = dat)
  }
])
invisible(DT[
  , list(sz = mean(z/x)), by = dat][
  , z.ts <<- xts(sz, order.by = dat)]) 
```

评估`j`其他事物（沿途分配）

```
x.ts <- y.ts <- z.ts <- NA
DT[a == 1,{
  x.ts <<- xts(x, order.by = dat)
  y.ts <<- xts(y, order.by = dat)
  'Assigned y.ts and x.ts to global environment)'
  }
]
DT[
  , list(sz = mean(z/x)), by = dat][
  , {z.ts <<- xts(sz, order.by = dat)
      'assigned x.ts'}] 
```

在这种情况下，结果将分别是 `'Assigned y.ts and x.ts to global environment)'`和`'assigned x.ts'`。

# css - 将一个固定元素和一个可滚动元素彼此相邻对齐

> ID：14742015
> 
> 赞同：1
> 
> 时间：2013-02-07T01:24:39.327
> 
> 标签：css, twitter-bootstrap

我正在使用 Twitter 引导程序，并且并排放置以下两个主要的 div 元素（两者`span6`）。我想知道是否有一种方法可以让元素 1（见下文）具有固定的垂直长度，而元素 2 仍然可以根据它需要显示的数据垂直滚动，但*在*视觉垂直范围内长度由元素 1 设置。

作为附录，我一直在尝试`background-color`在其中一个 span6 div 中用作属性来获得背景颜色，但目前它没有显示任何内容......我需要添加任何属性吗？

谢谢！

```
 ------------  ------------
|            ||            |
|   fixed    ||scroll-able |
|   element  ||  element   |
|            ||            |
|     1      ||     2      |
|            ||            |
 ------------  ------------ 
```

**附录**

这是我的CSS：

```
.principal-element {
  overflow: hidden;
  background-color: #006faa;
  background-color:#C0C0C0;
  height:900px;
  position:fixed;
  float:left;
  h1 {
    color: white;
  }
}

.secondary-element {
  overflow: scroll;
} 
```

以及 html 中显示的内容：

```
<div class="container">
<div class="span6">
    <div class="principal-element">
        <h1><%= link_to "Text and stuff", "#" %></h1>
    </div>
</div>

<div class ="span6 offset6">
    <div class="secondary-element">
        <ol class="microposts">
            <li> Blah blah a lot of stuff
            </li>
        </ol>
    </div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T01:42:40.840

我可能在这里完全错过了一步，但这不是您在第一个问题中想要实现的大致目标吗？

```
<html>

    <div class="element one">
        <p>content</p>
    </div>

    <div class="element two">
        <p>content</p>
        <p>content</p>
        <p>content</p>
        <p>content</p>
    </div>

</html>

<style>

    div.element {
    width:200px;
    background-color:#C0C0C0;
    height:90px;
    color:#606060;
    font-family:Arial;
    font-size:12px;
    padding:10px;
    position:fixed;
    float:left;
    }

    div.two {
    overflow:scroll;
    margin-left:240px;
    }

</style> 
```

[http://jsfiddle.net/QYtsr/2/](http://jsfiddle.net/QYtsr/2/)

# c# - 根据当前会话和计划限制 URL

> ID：14742016
> 
> 赞同：0
> 
> 时间：2013-02-07T01:24:41.653
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-routing

我知道这可能会受到项目设置和其他一些事情的影响，但我只是想知道我的最佳实践是什么。

我有一个有 3 个计划的网络应用程序：免费、专业和高级。在免费计划中，我想将用户限制为某些 URL。

用户可以更改计划，因此如果他们坚持免费计划，那么他们就看不到其他 URL。但是，如果他们升级然后降级，他们可能已经访问了其他一些 URL。

在我所有的控制器中，我都有我需要的关于用户的所有信息，例如他们正在执行的计划以及他们试图查看的 URL。

我对这种事情不是很熟悉，所以我的第一个想法是逐个 URL 控制它。例如，在免费计划用户无法查看的我的控制器操作中，检查他们正在使用的计划，如果是免费计划，则将它们重定向到 404 页面或其他任何内容。

这是一种足够简单的方法，但我只是想知道是否有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T01:55:52.807

听起来您想向需要访问级别高于您的免费级别的控制器方法添加一个[`[Authorize]`属性，例如：](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.98%29.aspx)

```
public ActionResult ViewForAllUsers() {
    return View();
}

[Authorize(Roles = "Prem, Pro")]
public ActionResult ViewForPremAndPro() {
    return View();
}

[Authorize(Roles = "Pro")]
public ActionResult ViewForProOnly() {
    return View();
} 
```

# mysql - Mysql查询返回不正确的时间戳

> ID：14742019
> 
> 赞同：0
> 
> 时间：2013-02-07T01:25:27.097
> 
> 标签：mysql, select, timestamp, subquery

我有一张我正在尝试运行报告的表。问题是，当`session_id`使用相同时，它只选择所有记录的第一个时间戳。

这是我的结果集：

```
+------------+-----------+---------+---------+------------------+---------------+----------+---------------------+----------+
| session_id | anum      | first   | last    | counselor        | why           | start    | Time With Counselor | total    |
+------------+-----------+---------+---------+------------------+---------------+----------+---------------------+----------+
|        215 | A00000000 | rixhers | jdjdjdh | Christine McGraw | Appeal        | 00:02:20 | 00:00:04            | 00:02:24 |
|        216 | B00000000 | rixhers | jdjdjdh | Dawn Lowe        | Loan Question | 00:00:05 | 00:00:03            | 00:00:08 |
|        217 | D00000000 | forthis | isatest | Cherie McMickle  | Loan Question | 00:02:08 | 00:00:02            | 00:02:10 |
|        218 | A00000000 | rixhers | jdjdjdh | John Ivankovic   | Tap Question  | 00:00:42 | 00:00:01            | 00:00:43 |
|        218 | A00000000 | rixhers | jdjdjdh | Christine McGraw | Tap Question  | 00:00:42 | 00:00:01            | 00:00:43 |
|        218 | A00000000 | rixhers | jdjdjdh | Tootie           | Tap Question  | 00:00:42 | 00:00:01            | 00:00:43 |
|        218 | A00000000 | rixhers | jdjdjdh | Front-Kiana      | Tap Question  | 00:00:42 | 00:00:01            | 00:00:43 |
+------------+-----------+---------+---------+------------------+---------------+----------+---------------------+----------+
7 rows in set (0.00 sec) 
```

请注意`session_id` `218`，所有记录的时间戳都相同。

我按主键 ( `session_id`, `Counselor`) 分组，因为每个辅导员都可以在一个会话上工作，因此时间戳必须对所有人都不同。

这是我的查询：

```
SELECT   
session.session_id,   
session.anum,   
student.first,   
student.last,   
c.counselor, 
session.why, 
SEC_TO_TIME(TIMEDIFF(t.start, session.signintime)) as start,   
SEC_TO_TIME(TIMEDIFF(t.fin, t.start)) AS 'Time With Counselor',   
SEC_TO_TIME(TIMEDIFF(t.fin, session.signintime)) AS total  
FROM session  
INNER JOIN student
    ON student.anum = session.anum   
LEFT JOIN (SELECT support.session_id, support.starttime AS start, support.finishtime AS fin FROM support GROUP BY support.session_id, support.cid) AS t  
    ON t.session_id = session.session_id    
INNER JOIN (select support.session_id, support.cid, counselors.counselor FROM support INNER JOIN counselors ON counselors.cid = support.cid group by support.session_id, support.cid) AS c 
    ON c.session_id = session.session_id 
WHERE session.status = 3
GROUP BY c.session_id, c.cid; 
```

我在这里错过了一些简单的东西吗？

谢谢，-RaGe

编辑编号 1：

```
mysql> SELECT * from support WHERE session_id = 218;
+------------+-----+---------------------+---------------------+-------------------+
| session_id | cid | starttime           | finishtime          | counselorcomments |
+------------+-----+---------------------+---------------------+-------------------+
|        218 |   1 | 2013-02-06 13:26:40 | 2013-02-06 13:26:41 |                   |
|        218 |   2 | 2013-02-06 13:26:45 | 2013-02-06 13:26:48 | done              |
|        218 |   5 | 2013-02-06 13:26:25 | 2013-02-06 13:26:28 | v                 |
|        218 |   8 | 2013-02-06 13:26:34 | 2013-02-06 13:26:36 |                   |
+------------+-----+---------------------+---------------------+-------------------+
4 rows in set (0.00 sec) 
```

编辑编号 2：

```
mysql> SELECT * FROM session;
+------------+-----------+---------------+---------+---------------------+-----------------+--------+
| session_id | anum      | why           | aidyear | signintime          | studentcomments | status |
+------------+-----------+---------------+---------+---------------------+-----------------+--------+
|        215 | A00000000 | Appeal        | 12-13   | 2013-02-06 09:01:45 |                 |      3 |
|        216 | B00000000 | Loan Question | 12-13   | 2013-02-06 09:14:10 |                 |      3 |
|        217 | D00000000 | Loan Question | 12-13   | 2013-02-06 09:14:57 |                 |      3 |
|        218 | A00000000 | Tap Question  | 12-13   | 2013-02-06 13:25:58 |                 |      3 |
+------------+-----------+---------------+---------+---------------------+-----------------+--------+
4 rows in set (0.00 sec) 
```

如果需要，一个会话有许多支持票。这也是[我的架构的图片](http://img267.imageshack.us/img267/7193/selection002x.png)

编辑编号 3：

```
SELECT   
s.session_id,   
s.anum,   
st.first,   
st.last,   
c.counselor, 
s.why, 
SEC_TO_TIME(TIMEDIFF(sup.starttime, s.signintime)) as start,   
SEC_TO_TIME(TIMEDIFF(sup.finishtime, sup.starttime)) AS 'Time With Counselor',   
SEC_TO_TIME(TIMEDIFF(sup.finishtime, s.signintime)) AS total  
FROM session s 
INNER JOIN student st
    ON st.anum = s.anum 
INNER JOIN support sup
    ON s.session_id = sup.session_id
INNER JOIN counselors c
    ON sup.cid = c.cid
WHERE s.status = 3
ORDER BY s.session_id asc;

+------------+-----------+---------+---------+------------------+---------------+----------+---------------------+----------+
| session_id | anum      | first   | last    | counselor        | why           | start    | Time With Counselor | total    |
+------------+-----------+---------+---------+------------------+---------------+----------+---------------------+----------+
|        215 | A00000000 | rixhers | jdjdjdh | Christine McGraw | Appeal        | 00:02:20 | 00:00:04            | 00:02:24 |
|        216 | B00000000 | rixhers | jdjdjdh | Dawn Lowe        | Loan Question | 00:00:05 | 00:00:03            | 00:00:08 |
|        217 | D00000000 | forthis | isatest | Cherie McMickle  | Loan Question | 00:02:08 | 00:00:02            | 00:02:10 |
|        218 | A00000000 | rixhers | jdjdjdh | Tootie           | Tap Question  | 00:00:27 | 00:00:03            | 00:00:30 |
|        218 | A00000000 | rixhers | jdjdjdh | Front-Kiana      | Tap Question  | 00:00:36 | 00:00:02            | 00:00:38 |
|        218 | A00000000 | rixhers | jdjdjdh | John Ivankovic   | Tap Question  | 00:00:42 | 00:00:01            | 00:00:43 |
|        218 | A00000000 | rixhers | jdjdjdh | Christine McGraw | Tap Question  | 00:00:47 | 00:00:03            | 00:00:50 |
+------------+-----------+---------+---------+------------------+---------------+----------+---------------------+----------+
7 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:50:02.377

尝试运行此查询删除所有使查询看起来像热野兽并让她了解您实际需要的一切的“善良”。我建议将这些列命名为适当的名称。

```
SELECT   
s.session_id,   
s.anum,   
st.first,   
st.last,   
c.counselor, 
s.why, 
SEC_TO_TIME(TIMEDIFF(sup.starttime, s.signintime)) as start,   
SEC_TO_TIME(TIMEDIFF(sup.finishtime, sup.starttime)) AS 'Time With Counselor',   
SEC_TO_TIME(TIMEDIFF(sup.finishtime, s.signintime)) AS total  
FROM session s 
INNER JOIN student st
    ON st.anum = s.anum 
INNER JOIN Support sup
    ON s.session_id = sup.session_id
INNER JOIN Counselors c
    ON sup.cid = c.cid
WHERE s.status = 3 
```

# ruby-on-rails - 在生产环境中配置 Redis + Sidekiq

> ID：14742020
> 
> 赞同：4
> 
> 时间：2013-02-07T01:25:38.983
> 
> 标签：ruby-on-rails, redis, passenger, sidekiq

我试图在乘客/铁路生产环境中设置**Redis** + **Sidekiq**并且遇到了一些混乱。

服务器上运行着许多小型应用程序。我确信这些应用程序中不止一个会利用 Sidekiq 提供的延迟处理。

我的第一个想法是使用[Sidekiq 中的命名空间选项](https://github.com/mperham/sidekiq/wiki/Advanced-Options)`namespace`为每个 Rails 应用程序创建一个。

但后来我注意到了一个`databases 16`设置，`redis.conf`我想知道它到底做了什么。除了配置中的注释之外，我似乎找不到关于它的文档：

```
# Set the number of databases. The default database is DB 0, you can select
# a different one on a per-connection basis using SELECT <dbid> where
# dbid is a number between 0 and 'databases'-1
databases 16 
```

所以，想知道 16 个“数据库”的默认/示例是否意味着我可以将 DB0 用于一个应用程序，将 DB1 用于另一个应用程序？！？我不认为这个假设是正确的，但我找不到更多信息，除了：

> Redis Cluster 不像单机版 Redis 那样支持多数据库，只有数据库 0，不允许 SELECT。

**希望有人可以建议我如何在同一台服务器上运行的各种 Rails 应用程序之间共享 Sidekiq 和 Redis。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-08T11:03:44.913

可以使用多个 Redis 数据库；每个都与一台机器上的 Rails 应用程序相关联。您可以使用以下代码将文件 sidekiq.rb 放入初始化程序中：

```
app_name = Rails.application.class.parent_name

app_num = case app_name
  when 'AppOne'
    0
  when 'AppTwo'
    1
  when 'AppOne'
    2
  end

Redis.new(db: app_num) # existing DB is selected if already present

Sidekiq.configure_server do |config|
  config.redis = { url: "redis://localhost:6379/#{app_num}", namespace: "#{app_name}" }
end

Sidekiq.configure_client do |config|
  config.redis = { url: "redis://localhost:6379/#{app_num}", namespace: "#{app_name}" }
end 
```

通过这种方式，您将通过 Sidekiq 进程分离出 Redis DB 和命名空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T21:55:11.083

我认为您正在寻找名称空间。您可以使用 sidekiq 配置服务器/客户端配置以使用不同的命名空间，并将Passenger/Unicorn 配置为使用不同的命名空间。我已经用 Unicorn 完成了，但在乘客中应该有一个等效的选项。

[您可以在此处](https://github.com/mperham/sidekiq/wiki/Advanced-Options)找到有关如何执行此操作的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-09T01:03:51.030

redis.conf 中的 databases 16 只是设置 Redis 实例拥有的最大数据库数 (0-15)。如果你愿意，你可以改变它。我将 Redis DB0 用于 Rails 缓存，将 DB1 用于 Sidekiq（除了使用命名空间）。只是让它更干净，以防我需要 FLUSHDB。

在您的情况下，我会为单独的应用程序使用单独的 Redis 数据库。如果需要，只需增加数据库的数量。

# python - Python 代码中的错误。我如何解决它？

> ID：14742021
> 
> 赞同：0
> 
> 时间：2013-02-07T01:25:45.040
> 
> 标签：python, economics

第一次写Python代码。在绘制此函数时需要一些帮助。它是一个重叠增长模型函数。即使我确定等式是正确的，也会不断给出错误代码。任何帮助，将不胜感激！

```
from numpy import *
from pylab import *
from scipy import optimize
from scipy.optimize import fsolve
def olgss(x) :
    numg = ((1-alpha)*A*x**alpha)/(1+n)
    deng = (1+(1/(beta**(sigma)))*(1+alpha*A*x**(alpha-1))**(1-sigma))
    olgk = x - numg/deng
    return olgk

# Set the parameter values

alpha = .3 # share of capital income in GDP
A = 1.0 # productivity parameter
beta = 0.8 # discount factor
n = 0.01 # rate of growth of population
sigma = 0.9 # intertemporal elasticity of substitution from the utility function

# Set the inital condition
state= 0.2

xt = [] # The x_t valudebuge

# Iterate for a few time steps
nIterates = 10
# Plot lines, showing how the iteration is reflected off of the identity
for n in xrange(nIterates):
    xt.append(state)
    state = olgss(state)    
plot(xrange(nIterates), xt, 'b')
xlabel('Time')
ylabel('k$t$')
title('Time Path of k$t$')
#savefig('OLGTimePath', dpi=100)
show() 
```

错误是：

```
Traceback (most recent call last): 
File "C:\Users\AChia\Documents\untitled1.py", line 37, in <module> 
   state = olgss(state) 
File "C:\Users\AChia\Documents\untitled1.py", line 14, in olgss 
   numg = ((1-alpha)*A*x**alpha)/(1+n) 
ValueError: negative number cannot be raised to a fractional power 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:29:42.427

如果我将打印语句添加到`olgss(x)`，如下所示：

```
def olgss(x) :
    print "alpha is", alpha
    print "x is", x
    numg = ((1-alpha)*A*x**alpha)/(1+n)
    deng = (1+(1/(beta**(sigma)))*(1+alpha*A*x**(alpha-1))**(1-sigma))
    olgk = x - numg/deng
    return olgk 
```

我得到以下输出：

```
alpha is 0.3
x is 0.2
alpha is 0.3
x is 0.0126300785572
alpha is 0.3
x is -0.0251898297413
Traceback (most recent call last):
  File "globals.py", line 36, in ?
    state = olgss(state)
  File "globals.py", line 13, in olgss
    numg = ((1-alpha)*A*x**alpha)/(1+n)
ValueError: negative number cannot be raised to a fractional power 
```

因此，看起来第三次调用`olgss()`返回一个负值，然后反馈到下一次调用并导致错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T01:36:52.663

你有一个负数 ( `x`) 被传递到函数中。然后，您将其提高到`alpha`（非整数）幂。将负数提升到非整数指数必然会导致复数——除非涉及的类型很复杂，否则显然 python 不喜欢的东西。

```
>>> (-0.9) ** -0.9
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: negative number cannot be raised to a fractional power
>>> (-0.9+0j) ** -0.9
(-1.0456541539072963-0.3397536300522355j) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T01:45:24.377

Print `state`，您会看到它在第三次迭代中变为负数。然后，在 中`olgss`，您有`x ** (1 - alpha)`，这意味着您将负数 ( `x`) 提高到分数幂 ( `1-alpha`)。这是不允许的`**`。

# ios - 通过 uinavigationcontroller 将变量从父视图传递到子视图

> ID：14742025
> 
> 赞同：0
> 
> 时间：2013-02-07T01:26:06.830
> 
> 标签：ios, xcode, modalviewcontroller

抱歉，如果这似乎是一个简单的问题，但每次我在谷歌上搜索这个主题时，我只能找到如何将数据从子视图传递到父视图，反之亦然。

基本上，我展示的是一个模态视图，它位于它自己的 UINavigation 控制器中。模态视图需要知道是否允许用户“编辑”它 - 所以我认为最简单的方法是将子视图（isEdit）上的 BOOL 设置为 TRUE （这会得到根据发生的 segue 设置）但是因为这个模式视图是从 UINavigation 控制器呈现的 - 我无法从 -(void)prepareForSegue 函数访问它并直接设置 BOOL。我已经尝试对 UINav 控制器进行子类化，并在其中包含一个可以设置的 BOOL，然后在子视图中重新检查，但我似乎无法从子视图访问控制器 - 我会包含我的代码，但我确定必须有更简单的方法来完成这项任务！

有没有人能够建议一种更经济的方式将这个布尔值“通过” UINavigationController 传递给子视图？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T01:35:57.407

如果您的 segue 调用导航控制器，您可以从 设置根视图控制器的属性`-prepareForSegue`，如下所示

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"MySegueId"]) {
        UINavigationController *navController = (UINavigationController *)segue.destinationViewController;
        MyViewController *childController = (MyViewController *)navController.childViewControllers.lastObject;
        childController.isEditable = YES;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T01:34:54.690

当您分配/初始化模态视图控制器时，只需设置属性（假设您的模态视图控制器称为 ProfileVC）：

```
ProfileVC *vc = [[ProfileVC alloc] init];
vc.isEdit = YES;
[vc.navigationController presentModalViewController:vc animated:YES]; 
```

只需确保在 ProfileVC.h 中有一个名为 isEdit 的属性：

```
@interface ProfileVC : UIViewController
@property (nonatomic) BOOL isEdit;
@end 
```

# javascript - 如何将纬度经度转换为 d3.js 的方位角坐标？

> ID：14742031
> 
> 赞同：0
> 
> 时间：2013-02-07T01:26:26.927
> 
> 标签：javascript, d3.js

我有一个纬度和经度点列表，我想创建一个像这样的方位角投影：http: [//boydgreenfield.com/quakes/](http://boydgreenfield.com/quakes/)

我对如何从纬度和经度将 3 坐标输入到方位角投影中感到困惑。我只是在寻找如何在两者之间进行转换。

这是我发现的一个相关问题，但对我没有帮助：

[动画 D3 地球 (d3.geo.azimuthal)](https://stackoverflow.com/questions/12769083/d3-javascript-library-d3-geo-azimuthal)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:41:12.217

我不清楚你有一个 3 坐标输入是怎么回事。不是 2 坐标输入（即 lat/lng）吗？我假设这就是你的意思：-/

因此，如果您的经度和纬度为 NYC：

`var nycLngLat = [74.0, 40.7];`

你有一些预测，例如：

`var projection = d3.geo.azimuthalEqualArea();`

那么您可以通过“调用”投影实例（因为它也是一个函数）来找出投影的 X 和 Y：

`var nycXY = projection(nycLngLat);`

需要注意的一点是，d3 将地理坐标定义为经度、纬度。这与谷歌地图的方式相反——如果你习惯了。

# sql - 使用变量更新图像列

> ID：14742034
> 
> 赞同：0
> 
> 时间：2013-02-07T01:26:44.240
> 
> 标签：sql, image, sql-server-2008

我需要将图像列的值从一行复制到另一行。我试图为此使用变量，但我什至不能声明那种类型的变量。SQL Server 返回此错误消息：

> 消息 2739，级别 16，状态 1，第 1 行
> text、ntext 和 image 数据类型对于局部变量无效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T01:33:01.250

好吧，`image`数据类型已被弃用，因此您应该更改表和所有要使用的代码`varbinary(max)`（您*必须*在某个时候这样做，越快越好）。同时，一个简单的解决方法是`varbinary(max)`在您的变量中使用：

```
DECLARE @x TABLE(i IMAGE);

INSERT @x SELECT 0x0045;

DECLARE @y VARBINARY(MAX);

SELECT @y = i FROM @x;

PRINT @y;

-- UPDATE sometable SET somecolumn = @y WHERE ...; 
```

但是，如果您正在执行更新，为什么首先需要使用中间变量？您可以很容易地连接同一张表中的两行...

```
UPDATE t
  SET t.image_column = s.image_column
  FROM dbo.table AS t
  INNER JOIN dbo.table AS s
  ON t.key = something
  AND s.key = something_else; 
```

样本：

```
DECLARE @x TABLE(x INT PRIMARY KEY, i IMAGE);

INSERT @x SELECT 1,0x0045;
INSERT @x SELECT 2,0x0055;

UPDATE x SET x.i = y.i
  FROM @x AS x
  INNER JOIN @x AS y
  ON x.x = 1 AND y.x = 2;

SELECT x,i FROM @x; 
```

结果：

```
x   i
--- ------
1   0x0055
2   0x0055 
```

# drupal - 以其他人的方式查看我的帐户

> ID：14742042
> 
> 赞同：1
> 
> 时间：2013-02-07T01:27:26.113
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-theming

如何在用户的个人资料页面（用户/ uid）上显示链接，所以当登录用户时，该帐户的所有者单击该链接，她会看到一个没有编辑帐户权限的页面，即相同正如其他用户看到的那样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:39:58.837

那么我建议你可以看看[Panels](http://drupal.org/project/panels)。启用该模块，您将`Panels`在 下看到一个选项卡`Structure`。您有两种方法可以实现这一目标：

1.  您可以转到`Panels`并为该`User Profile`页面创建一个变体。这将编辑在用户访问自己的个人资料页面时提供给用户的默认视图。
2.  如果您不想在默认视图中进行更改，您应该创建一个新视图，`Panel page`然后您可以在您的网站上为其放置一个链接，该链接将显示当前登录用户的所有信息。此选项使您可以更好地控制要在页面上显示的所有信息。

我希望这会有所帮助。

# c# - 在文本框中只允许最多三位数字字符

> ID：14742044
> 
> 赞同：1
> 
> 时间：2013-02-07T01:27:34.523
> 
> 标签：c#, textbox, character, numeric, keystroke

有没有办法只允许用户在文本框中输入最大数量的字符？我希望用户输入一个标记/等级，并且只能输入 0 - 100。下面我有监控击键并且只允许输入数字的代码，但我想找到一种只允许用户输入的方法输入一个最小值为 0，最大值为 100 的数字。

```
private void TxtMark4_KeyPress(object sender, KeyPressEventArgs e)
{
    if (e.KeyChar < '0' || e.KeyChar > '9' || e.KeyChar == ' ')
    {
        e.Handled = true;
    }
    else
    {
        e.Handled = false;
    }
} 
```

或者我可以使用以下内容：

```
if (e.KeyChar >= 48 && e.KeyChar <= 57 || e.KeyChar == ' ')
{
    e.Handled = false;
}
else
{
    MessageBox.Show("You Can Only Enter A Number!");
    e.Handled = true;
} 
```

但我想找到一种最多只允许输入三个字符的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T01:32:38.917

我认为这很简单：

```
textBox1.MaxLength = 3; 
```

然后处理 Leave 事件的最大值：

```
 private void textBox1_Leave(object sender, EventArgs e)
    {
        string s = (sender as TextBox).Text;
        int i = Convert.ToInt16(s);

        if (i > 100)
        {
            MessageBox.Show("Number greater than 100");
            (sender as TextBox).Focus();
        }
    } 
```

或者

您还可以使用**System.Windows.Forms.NumericUpDown**来轻松设置最小值和最大值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:06:03.170

对于每个可能的用户错误，我都会这样做。

我假设你的文本框被命名为 TxtMark4。在执行 TryParse 的 if-test 中编写 txtMark4.Content() 或您需要读取框架中文本框内容的任何内容

```
private void TxtMark4_KeyPress(object sender, KeyPressEventArgs e)
{
    int? tmp = null; //signed to allow it to be assigned the value of null
    if(int.TryParse(txtMark4.Text,out tmp)){
        if(tmp >=0 && tmp <= 100){
        //Here the number is between 0 and 100
        }
        else{//Number is below 0 or above 100
            if(tmp > 100){
                TxtMark4.Text = TxtMark4.Text.remove(2); //This will forcefully make it less or equal to 100
                DisplayLabel.text = "Numbers between 0-100 only";
            }
            else{
                TxtMark4.Text = ""; //and if its below 0 it will not be displayed
                DisplayLabel.text = "Numbers between 0-100 only";
            }
        }
    }
    else{//Not a number
        //Return some indicator to the user
        DisplayLabel.text = "numbers only";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T01:42:33.037

如果解析失败，此版本将 textBox1.Text 设置为空字符串

```
private void textBox1_TextChanged(object sender, EventArgs e) {
    int i;

    textBox1.Text=
        false==int.TryParse(textBox1.Text, out i)||0>i||i>100
            ?""
            :i.ToString();
} 
```

如果您想保留部分成功解析的数字，那么

```
String previousText="";

private void textBox1_TextChanged(object sender, EventArgs e) {
    var currentText=textBox1.Text;
    int i;

    textBox1.Text=
        int.TryParse(currentText, out i)
            ?0>i||i>99
                ?previousText
                :i.ToString()
            :""==currentText?currentText:previousText;

    previousText=textBox1.Text;
} 
```

# javascript - yeoman install [package] 安装在 /app/component

> ID：14742046
> 
> 赞同：2
> 
> 时间：2013-02-07T01:28:09.280
> 
> 标签：javascript, yeoman, bower

据我了解，运行`$ yeoman install backbone`应该将 Backbone 的原始源代码下载到项目根目录中名为 components 的文件夹中，并将文件的工作副本移动到`/app/scripts/vendor`. 这样，您就获得了 Backbone 的文档，但完整的存储库不会阻塞您的应用程序的代码库。但是，我的经验是它会下载原始的源文档和全部内容`/app/components/`。我做错了吗，还是我只需要手动将它们移动到`/app/scripts/vendor`?

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T09:25:32.420

好吧，看起来我刚刚找到了这种情况的答案。正如您所说，Yeoman 将所有内容安装到 /components 和 app/components 中。这个想法是您不需要将这些文件夹提交到您的存储库，并且您不需要总是在您的脚本/供应商文件夹中拥有这些依赖项脚本。

从存储库下载/签出项目后，每个人都应该在本地计算机上安装依赖项。最好将所有依赖项写入项目根目录下的 components.json 文件中。像这样：

```
{
    "dependencies" : {
        "backbone" : null
    }
} 
```

这意味着您的项目依赖于当前版本的 Backbone.js。完成此操作后，您可以执行

```
$ yeoman install 
```

每个依赖项都将下载到组件文件夹中。

接下来，您应该为您的项目使用任何构建系统。至于我，我使用 require.js 然后编译成一个缩小的脚本文件。因此，您根据组件库中的脚本编写代码，然后构建它，然后不再依赖组件，因为所有内容都已经在刚刚构建的脚本文件中。

当有人想要处理你的项目时，他需要先安装 yeoman，运行“yeoman install”，然后他就可以开始了。此流程使 Web 开发更像任何其他类型的软件开发，包括包管理、依赖项、编译等。

如果我的回答不够好​​，请尝试[从 NetTuts+ 观看此视频](https://tutsplus.com/lesson/installing-dependencies-and-requirejs-shims/)，它解释了一切。

好编码！

# google-apps-script - GAS 和 Google 协作平台...小工具有问题

> ID：14742051
> 
> 赞同：0
> 
> 时间：2013-02-07T01:28:47.370
> 
> 标签：google-apps-script

Q1-我有一个适用于电子表格的谷歌应用程序脚本。我想在 Google 协作平台页面上显示电子表格结果。无法让我部署的脚本说话，所以我尝试了一个嵌入站点的非常简单的脚本：

```
function doGet() {
   return ContentService.createTextOutput('Hello World');
} 
```

只需在小工具显示框中留一个空白即可。我被设置为所有者，所以它不应该是权限问题。

Q2- 我希望网站页面在同一页面上有 4 个 GAS 小工具。是否需要拆分脚本/函数以便每个都与*doGet()*绑定？

Q3- 是否有更简单的服务来创建带有电子表格结果的简单 XML/动态表？..还是*google Sites*是最好的方法？提前致谢 -

弥敦道

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:47:25.750

Q1：TextOutput 不是站点小工具可接受的显示。[在这里阅读](https://developers.google.com/apps-script/execution_gadgets#which-scripts)。只有 HtmlOutput 和 UiInstance 是可接受的。

Q2：如果您要拥有 4 个小工具，则需要 4 个项目，每个项目都有自己的`doGet(e)`. 您不能`doGet(e)`在同一个项目中拥有多个功能。

Q3：在这里尝试给你一些选择。如果您使用 Google 协作平台只是为了显示您的脚本输出，则不需要这样做。您可以[将脚本发布到 Web](https://developers.google.com/apps-script/execution_web_apps)，以便它们像网页一样运行。在此 Web 应用程序中，您可以创建多个元素。查看[图表](https://developers.google.com/apps-script/class_charts)，您可以在其中为某些数据创建许多不同的出色可视化。查看[UiApp](https://developers.google.com/apps-script/class_uiapp)以了解如何向 UI 添加多个元素。

# linux - 剪切命令在linux上不起作用

> ID：14742052
> 
> 赞同：3
> 
> 时间：2013-02-07T01:28:51.713
> 
> 标签：linux, bash, shell, unix

我正在尝试这个：

`echo "This is test" | cut -f 1`

它没有削减任何东西，我明白了：

`This is test`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T01:31:48.087

在命令中使用空格作为分隔符`cut`：

```
echo "This is test" | cut -f 1 -d ' ' 
```

默认分隔符是制表符。查看手册页以获取更多详细信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T01:34:40.730

默认情况下，`cut`不会在空间上拆分，仅在选项卡上。如果你告诉它在空间上拆分，那么它不会在标签上拆分。此外，连续的空格或制表符会将空字段添加到集合中。

如果你想分割“任何数量的任何类型的空白”，你最好使用`awk`：

```
echo "This is a test" | awk '{print $1}' 
```

此外，您可以在 bash 中将`echo`...`|`替换为：`<<<`

```
awk '{print $1}' <<<"This is a test" 
```

# c++ - 使用 SDL 的 C++ 为 CAD 类型的应用程序制作网格

> ID：14742054
> 
> 赞同：0
> 
> 时间：2013-02-07T01:29:05.373
> 
> 标签：c++, grid, sdl

我已经开始研究 CAD 类型程序，但我不太确定如何将网格定义为庞大的 CAD 程序规模。网格必须包含最多 7 个小数位或更多的坐标点，并且在 x 和 y 轴上大约有 10,000 个单位。存储每一个点对于计算机来说将是太多的处理。有什么方法可以定义如此庞大的坐标网格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:35:22.147

两种选择：

*   将坐标细分为大小单位。例如，您可以有一个变量以“米”为单位，另一个以“毫米”为单位。这取决于您的 CAD 程序的用途。举个例子，看看[timeval 结构](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740560%28v=vs.85%29.aspx)是如何解决问题的，但是对于时间。
*   使用大整数库，因此您可以使用单个变量来表示所有点。

# ruby-on-rails - ruby on rails 更好的语法

> ID：14742063
> 
> 赞同：-1
> 
> 时间：2013-02-07T01:29:47.600
> 
> 标签：ruby-on-rails, ruby

有没有更好的方法来编写这段代码。我认为这似乎很糟糕。

```
if !params[:project].blank?
  redirect_to project_path(params[:project])
else
  redirect_to root_url
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T01:34:00.353

读起来好一点，IMO。

```
if params[:project].blank?
  redirect_to root_path
else
  redirect_to project_path(params[:project])
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T01:30:47.417

您可以使用三元运算符：

`redirect_to params[:project].blank? ? root_url : project_path(params[:project])`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T01:49:22.283

```
redirect_to(
  params[:project]
  .tap{|p| break p.blank? ? root_url : project_path(p)}
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T02:18:31.193

一个非常易读的 2 班轮 IMO。

```
redirect_to project_path(params[:project]) unless params[:project].blank?
redirect_to root_url if params[:project].blank? 
```

# python - Python os.environ["HOME"] 在空闲时工作，但不在脚本中

> ID：14742064
> 
> 赞同：16
> 
> 时间：2013-02-07T01:29:57.710
> 
> 标签：python, python-2.7, cmd

我正在编写一个简单的 Python (2.7.3) 脚本，但我必须获取用户的主文件夹。我试过了：

```
import os
home_folder = os.environ["HOME"] 
```

当我在 IDLE 上运行此代码时它工作正常，但如果我从 cmd 启动它，它会给我：`«KeyError: 'HOME'»`

有人能告诉我为什么吗？我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-07T01:48:58.727

Windows 使用`USERPROFILE`, 而不是`HOME`. Windows 没有`HOME`，其他操作系统没有`USERPROFILE`，因此使用其中任何一个都会降低平台独立性。

为了保持平台独立性，您可以使用`expanduser`from `os.path`，如下所示：

```
import os.path
home_folder = os.path.expanduser('~') 
```

附带说明一下，您可以使用它`print(os.environ)`来查看您可以访问的所有环境变量，这表明它`IDLE`具有附加功能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-26T09:42:19.107

Windows 没有 HOME 环境变量。它使用 USERPROFILE 代替。要解决此问题，您可以在控制台上定义一个新变量“HOME”：

```
set HOME=%USERPROFILE% 
```

作为 USERPROFILE 变量的副本。

您可以检查它们是否是相同的类型：

```
echo %USERPROFILE%
echo %HOME% 
```

它将适用于当前会话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T01:40:18.917

听起来您正在尝试完全基于“从 cmd 启动它”在 Windows 上运行它。IDLE 为您提供了便利；在 Windows 上使用`USERPROFILE`而不是`HOME`. envar`%USERPROFILE%`是 Win32 `$HOME`。

# java - 如何连接到 Google App Engine 上的远程 RDBMS

> ID：14742065
> 
> 赞同：2
> 
> 时间：2013-02-07T01:30:13.680
> 
> 标签：java, google-app-engine, jdbc, rdbms, jdo

我了解 GAE 使用自己的 NoSQL 大表数据存储来实现持久性。但我想知道是否可以连接到外部/远程/非 GAE 数据库。

我看到[JDBC 不受支持](http://code.google.com/p/googleappengine/wiki/WillItPlayInJava)，至少截至 2012 年 8 月。但我想知道是否还有其他方法可以访问远程数据库并提取数据。

我对 JDO 很弱，但我*相信*它支持 RDBMS 连接。因此，一个潜在的途径可能是为 RDBMS (MySQL) 找到一个“JDO 驱动程序”并将其与我的 WAR 捆绑在一起。除此之外，我没有想法。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:29:31.743

GAE 不允许传出连接 IIRC（任何人都可以随意纠正），因此无论 JDO（或更好的 JDO 实现）功能如何，它都不会到达 GAE 之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:28:57.860

对于任何未来的读者，这就是我的决定。我将在非 GAE 服务器上托管一个**安全(HTTPS) RESTful Web 服务，可能是 Amazon EC2 或 Beanstalk，也可能只是一个简单的 GoDaddy 服务器。**这并不重要，因为我的应用程序的这一部分不需要可扩展。

此 Web 服务将等待来自我的 GAE 应用程序的 RESTful API 调用。此调用将包含它需要连接到的 RDBMS 的必要连接信息。Web 服务将包含其所需功能所需的所有 JDBC 驱动程序。

收到调用后，它将连接到适当的（远程）RDBMS，提取它需要的数据（由调用内部的指令提供），然后使用 GoogleSQL 的网络服务将数据插入到我的 GoogleSQL 数据存储中。一旦它在那里，我的 GAE 应用程序将可以自由支配它。

# java - Java如何在鼠标单击时绘制矩形

> ID：14742069
> 
> 赞同：1
> 
> 时间：2013-02-07T01:30:23.003
> 
> 标签：java, swing, drawrect, graphics2d

正如标题所说，我很难在 JApplet 中绘制一些矩形（填充）。确切的目标是拥有一个 50x50 的表格，当您单击目标单元格时，将其填充（可能通过绘制一个填充的矩形来完成）。我已经完成了关于起点坐标的数学计算，但由于某种原因，我无法在 MouseClicked 方法中绘制新矩形。有什么建议么？

```
public class Main extends JApplet {

public static final int DIMX = 800;
public static final int DIMY = 800;
public static final int ratio = 16;
Graphics g;
boolean drawing;
public int cX;
public int cY;

public Main() {
    JPanel MainFrame = new JPanel();
    MainFrame.setPreferredSize(new Dimension(400, 800));
    MainFrame.setBackground(Color.LIGHT_GRAY);
    JPanel Table = new JPanel();
    Table.setPreferredSize(new Dimension(800, 800));
    Table.setBackground(Color.LIGHT_GRAY);
    add(MainFrame, BorderLayout.EAST);
    add(Table, BorderLayout.WEST);
    addMouseListener(new clicked());
}

public void paint(Graphics g) {
    super.paintComponents(g);
    g.setColor(Color.black);
    for (int i = 0; i <= 800; i += 16) {
        g.drawLine(0, i, 800, i);
        g.drawLine(i, 0, i, 800);
//            g.fillRect(cX, cY, 16, 16);
    }
}

public static void main(String[] args) {
    JFrame win = new JFrame("Retarded Bullshit");
    win.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    win.setPreferredSize(new Dimension(1216, 840));
    win.setContentPane(new Main());
    win.pack();
    win.setVisible(true);

}

public class clicked extends JApplet implements MouseListener {

public int cX;
public int cY;
Graphics g;

@Override
public void mouseClicked(MouseEvent e) {
//            Point a = e.getLocationOnScreen();
    int cellX = e.getX();
    int cellY = e.getY();
    if (cellX < 800 && cellX > 0 && cellY < 800 && cellY > 0) {
        cX = cellX / 16 + 1;
        cY = cellY / 16 + 1;

        JOptionPane.showMessageDialog(null, "" + cX + " " + cY);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T01:44:46.310

这是一个相对简单的概念（无意冒犯）。

首先，不要将您的代码与`JApplet`and混合使用`JFrame`。如果您想在这两种媒介中使用您的应用程序，请将逻辑分离到一个单独的组件（如`JPanel`）中，您可以轻松地将其添加到其中。您真的不应该将顶级容器添加到另一个顶级容器（将小程序添加到框架） - 这很混乱。

避免覆盖`paint`顶级容器的方法（如`JApplet`），而是使用自定义组件（如`JPanel`）并覆盖它的`paintComponent`方法。

在您的示例中，您应该打电话`super.paint`而不是`super.paintComponents`. `paint`做重要的工作，你不想跳过它 - 但你应该使用`JComponent#paintComponent`

`MouseListener`s 应该添加到您对管理鼠标事件感兴趣的组件中。因为`clicked`从未添加到任何容器中，所以它永远不会收到鼠标事件。

看一眼

*   [如何编写鼠标监听器](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)
*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [2D 图形](http://docs.oracle.com/javase/tutorial/2d/index.html)
*   [在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)（因为每个 Swing 开发人员都应该了解这一点）

![在此处输入图像描述](../Images/6b6027e452f5fb3c27de27a35b8c5e3d.png)

```
public class SimplePaint03 {

    public static void main(String[] args) {
        new SimplePaint03();
    }

    public SimplePaint03() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new PaintPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class PaintPane extends JPanel {

        private List<Shape> grid;
        private List<Shape> fill;

        public PaintPane() {
            grid = new ArrayList<>(5);
            fill = new ArrayList<>(5);
            addMouseListener(new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {
                    for (Shape shape : grid) {
                        if (shape.contains(e.getPoint())) {
                            if (fill.contains(shape)) {
                                fill.remove(shape);
                            } else {
                                fill.add(shape);
                            }
                        }
                    }
                    repaint();
                }
            });

            int colWidth = 200 / 50;
            int rowHeight = 200 / 50;

            for (int row = 0; row < 50; row++) {
                for (int col = 0; col < 50; col++) {
                    grid.add(new Rectangle(colWidth * col, rowHeight * row, colWidth, rowHeight));
                }
            }

        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g); 
            Graphics2D g2d = (Graphics2D) g;
            g2d.setColor(Color.RED);
            for (Shape cell : fill) {
                g2d.fill(cell);
            }
            g2d.setColor(Color.BLACK);
            for (Shape cell : grid) {
                g2d.draw(cell);
            }
        }

    }

} 
```

**额外的**

不维护从一个油漆周期到另一个油漆周期的信息。您需要完全按照您希望它出现的方式重新绘制组件。这意味着您需要维护一个可以随时重新绘制的点击点列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T01:44:59.213

从阅读[自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/index.html)的 Swing 教程开始。

自定义绘画是通过覆盖 JPanel 或 JComponent() 的 paintComponent() 方法来完成的。然后将面板添加到 JApplet。

如果您只想绘制某些正方形，那么您将需要一个列表来跟踪要绘制的单元格。然后每次重新绘制组件时，您都需要遍历列表并绘制单元格。

您的 MouseListener 不会扩展 JApplet。当您单击一个单元格时，您将从上方更新列表以指示需要绘制该单元格。然后您将在面板上调用 repaint() 以便调用您的绘画代码。

您可能还想查看[自定义绘画方法](http://tips4java.wordpress.com/2009/05/08/custom-painting-approaches/)，它根据您的确切要求提供了两种不同的方法来进行此类绘画。

# xcode - Xcode 4：所有选项卡的导航视图相同

> ID：14742077
> 
> 赞同：1
> 
> 时间：2013-02-07T01:31:11.513
> 
> 标签：xcode

有一种方法可以让所有打开的选项卡的导航视图（图中的红色框）都相同？

提前致谢。![在此处输入图像描述](../Images/ad151e9d3a42f31f4a882ec0e100b159.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T02:21:04.043

是的，我知道那会很烦人。我不相信有办法强制执行此操作，但是当打开新标签时，导航面板将与您所在的当前标签处于相同状态。因此，如果您打开一个带有导航面板的新选项卡，该选项卡也将显示导航面板（反之亦然）。所以很容易让你的所有标签保持一致。

我相信不强制在多个选项卡之间保持相同的基本原理是因为选项卡不同通常很好。在一个选项卡中，您可能只打开一个文件，但在另一个选项卡中，如果您使用的是助手编辑器（同时显示两个文件），最好将其隐藏。有了标签，这对您来说是自动的，因为每个标签都可以有不同的导航面板。

是的，有一个设置会很好，也许最终他们会有一个。还有一个隐藏导航面板的简单快捷方式：`⌘</kbd> + `0``

# c++ - 您是否曾经将 C++ RValue 引用参数标记为 const

> ID：14742081
> 
> 赞同：12
> 
> 时间：2013-02-07T01:31:41.843
> 
> 标签：c++, c++11, constants, rvalue-reference, perfect-forwarding

我一直在切换模板工厂函数以使用（并理解）std::forward 来支持右值和移动语义。我通常用于模板类的样板工厂函数总是将参数标记为 const：

```
#include <iostream>
#include <utility>

template<typename T, typename U>
struct MyPair{
    MyPair(const T& t, const U& u):t(t),u(u){};

    T t;
    U u;
};

template<typename T, typename U>
std::ostream& operator<<(std::ostream& os, const MyPair<T,U>& pair){
    os << "(" << pair.t << ")=>" << pair.u;
    return os;
}

template<typename T, typename U>
MyPair<T,U> MakeMyPair(const T& t, const U& u){
    return MyPair<T,U>(t,u);
}

using namespace std;
int main(int argc, char *argv[]) {    

    auto no_forward = MakeMyPair(num, num);
    std::cout << no_forward << std::endl;

    auto no_forward2 = MakeMyPair(100, false);
    std::cout << no_forward2 << std::endl;
} 
```

按预期编译。最初我将 MakeMyPair 转换为也将参数作为 const 传递，但这不会在我的 Mac 上使用 XCode 4.6 编译：

```
//$ clang --version
//Apple LLVM version 4.2 (clang-425.0.24) (based on LLVM 3.2svn)
//Target: x86_64-apple-darwin12.2.0
//Thread model: posix

template<typename T, typename U>
MyPair<T,U> MakeMyPair_Forward(const T&& t, const U&& u){
    return MyPair<T,U>(std::forward<const T>(t),std::forward<const U>(u));
}

int main(int argc, char *argv[]) { 
    int num = 37;
    auto anotherPair = MakeMyPair_Forward(num, true); //This won't work

    auto allRvalues = MakeMyPair_Forward(73, false);   //will compile 
    std::cout << allRvalues  << std::endl;
} 
```

> 没有匹配函数调用“MakeMyPair_Forward”候选函数 [with T = int, U = bool] 不可行：第一个参数没有从“int”到“const int &&”的已知转换

[这从http://en.cppreference.com/w/cpp/utility/forward](http://en.cppreference.com/w/cpp/utility/forward)是有道理的，其中状态 const 是推导出来的，我正在传递左值。

> *   如果对 wrapper() 的调用传递了一个右值 std::string，则 T 被推导出为 std::string（不是 std::string&、const std::string& 或 std::string&&），并且 std::forward 确保将右值引用传递给 foo。
> *   如果对 wrapper() 的调用传递了一个 const 左值 std::string，则将 T 推导出为 const std::string&，而 std::forward 确保将一个 const 左值引用传递给 foo。
> *   如果对 wrapper() 的调用传递了一个非常量左值 std::string，则 T 被推导出为 std::string&，并且 std::forward 确保将非常量左值引用传递给 foo。

使用右值和左值删除 const 可以按我的意愿工作。只有将右值作为类型传递才能与 MakeMyPair_Forward 参数上的 const 一起使用。

```
//This works for rvalues and lvalues
template<typename T, typename U>
MyPair<T,U> MakeMyPair_Forward(T&& t, U&& u){
    return MyPair<T,U>(std::forward<const T>(t),std::forward<const U>(u));
} 
```

所以，问题。作为参数传递时将右值引用标记为 const 是否有意义？这不像我可以更改右值，这只是暂时的。在完成和修复我的代码之后，我对它使用 const 编译感到有点惊讶。为什么要将右值参数标记为 const？重点是只提供一个接受右值的 API 吗？如果是这样，您不会使用类型特征来防止左值引用吗？[https://stackoverflow.com/a/7863645/620304](https://stackoverflow.com/a/7863645/620304)

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-07T02:41:03.710

> 所以，问题。作为参数传递时将右值引用标记为 const 是否有意义？

这是在 C++11 标准中完成的一个地方：

```
template <class T> reference_wrapper<T> ref(T&) noexcept;
template <class T> reference_wrapper<const T> cref(const T&) noexcept;
template <class T> void ref(const T&&) = delete;
template <class T> void cref(const T&&) = delete; 
```

即 A`const T&&`用于捕获所有右值，无论是否为 const，并将它们扔到编译时错误中，同时允许左值，甚至`const`左值绑定和工作。

现在这也可以通过`T&&`一个`enable_if`约束来完成。但是，如果 C++ 在过去的几十年里教会了我们一件事：不要在语言设计中烧毁任何桥梁。C++ 程序员经常会找到一种巧妙的方法来使用最初被认为无用的语言特性。正是本着这种精神，`const T&&`才成为一种合法的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-13T07:43:01.260

另一个可能的用例是**[原始指针](https://stackoverflow.com/a/60587511/2085626)***中的智能指针构造函数，该语言没有*采用，但可能采用的是智能指针构造函数，例如：

```
// this is NOT the actual ctor in the language but could have been
// see explanation in above link
unique_ptr(T* const&& p) : ptr{p} {} 
```

# function - 将递归函数从 PHP 更改为 smarty？

> ID：14742084
> 
> 赞同：0
> 
> 时间：2013-02-07T01:31:53.530
> 
> 标签：function, recursion, smarty3

我的问题我有这个代码没完没了的菜单

```
 $result=db::query_tpv("SELECT * FROM  tpv_link");
while($row = db::fetch_array($result,'assoc'))
 {

$menu[$row['parent_id']][$row['id_link']] = $row['name_link'];

}
function make_menu($parent_id)
{global $menu;if (!isset($menu[$parent_id])) {return;}
$nodes = $menu[$parent_id];
echo '<ul>';
foreach($nodes as $menu_id => $menu_name)
{
echo '<li>'.$menu_name ;
make_menu($menu_id) ;
echo '</li>';
}
echo '</ul>';
} 
```

这个 {0|make_menu} 也可以在 samrty 中工作，但我想取消这个函数并在 smarty 中更改为这个（定义 $menu）

```
{function name=menu level=0}
        <ul>
            {foreach $data as $items}
                <li>
                    <a href="{$items.url}">
                        {$items.title}
                    </a>
                    {if is_array($items.submenu)}
                        {menu data=$items.submenu level=$level+1}
                    {/if}
                </li>
            {/foreach}
        </ul>
    {/function}
{menu data=$menuItems} 
```

在此[如何在 Smarty 中 foreach 使用递归函数创建的数组变量，](https://stackoverflow.com/questions/14342645/how-to-foreach-an-array-variable-created-with-recursive-function-in-smarty) 但它不起作用.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:57:08.727

Hello I Find Solution after 3 days

Here

------------First You make Query You table---------- Ex:

```
 $result=db::query_tpv("SELECT * FROM  tpv_link");
  while($row = db::fetch_array($result,'assoc'))
 {

 $menu[]=$row ;
 } 
```

------------Secound Uses This Function (For make Your pyrimd array)---------- ------------ Note change id,parentid----------

```
 function buildTree(array $elements, $parentId = 0) {
$branch = array();

foreach ($elements as $element) {
    if ($element['parent_id'] == $parentId) {
        $children = buildTree($elements, $element['id_link']);
        if ($children) {
            $element['children'] = $children;
        }
        $branch[] = $element;
    }
}

return $branch;
} 
```

-------------------Before Smarty Template--------------------

```
$tree = buildTree($menu);//$menu array all data From Query
$smarty->assign('menu',$tree); 
```

------------------In smarty Template-------------------------

```
 {function name=menu level=0}
        <ul>
            {foreach $data as $items}
                <li>
                    <a href="{$items.url}">
                        {$items.name_link}
                    </a>
                    {if $items.children}
                        {menu data=$items.children level=$level+1}
                    {/if}
                </li>
            {/foreach}
        </ul>
    {/function}

    {menu data=$menu} 
```

# python - 时间一个while循环python

> ID：14742089
> 
> 赞同：18
> 
> 时间：2013-02-07T01:32:13.280
> 
> 标签：python, time, while-loop

我试图在一个while循环中计时一个while循环，执行它所花费的总时间，并记录它每次循环所花费的时间。如果可能的话，我需要一种方法来使用我的代码来实现这一点，或者对我可能还不知道的不同概念持开放态度。

```
import random
import time
import sys

def main():

    looperCPU = 500
    start = time.time()
    while (looperCPU != 0):
        #start = time.time()

        #this is the computation for 3 secs
        time.sleep(3)
        random_number = random.randint(0,1000)

        #Send to printer for processing
        #.75 secs to 4.75 secs to generate a pause before printing
        secondsPause = random.uniform(.75,4.75)

        #This is the printer function
        printerLooper = True
        while printerLooper == True :
            print("Sleeping for ", secondsPause, " seconds")
            print(random_number)
            printerLooper = False

        #
        print("total time taken this loop: ", time.time() - start)
        looperCPU -= 1    

main() 
```

该循环将打印一个时间，但我很确定它没有考虑嵌套的 while 循环睡眠时间。如何允许 python 对两个 while 循环进行计时，它需要执行的每个循环（在本例中为 500）？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-07T01:44:11.757

当您在初始循环之外设置 start 时，您保证您获得的 while 循环执行时间不正确。这就像说：

```
program_starts = time.time()
while(True):
    now = time.time()
    print("It has been {0} seconds since the loop started".format(now - program_starts)) 
```

这是因为 start 在整个执行时间内保持不变，而您的 end 时间随着时间的推移而稳步增加。通过将开始时间放在循环中，您可以确保您的开始时间也随着程序运行而增加。

```
while (looperCPU != 0):
    start_time = time.time()
    # Do some stuff
    while printerLooper == True :
        print("Sleeping for ", secondsPause, " seconds")
        print(random_number)
        printerLooper = False
    end_time = time.time()

    print("total time taken this loop: ", end_time - start_time) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-12T06:16:21.950

在 python 中，您可以查看此文档[https://docs.python.org/2/library/timeit.html](https://docs.python.org/2/library/timeit.html)
Stackoverflow 示例：[如何使用 timeit 模块](https://stackoverflow.com/questions/8220801/how-to-use-timeit-module)

```
import timeit
timeit.timeit('"-".join(str(n) for n in range(100))', number=10000) 
```

在 Jupyter 笔记本中，

```
%%timeit -n 100
import pandas as pd
s = pd.Series([101.00, 121.00])
summary = 0
for item in s:
    summary+=item 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T01:40:50.467

正确的想法，但是您对计时功能的放置有点偏离，我在这里更正了：

```
import random
import time import sys

def main():

    looperCPU = 500
    start = time.time()
    while (looperCPU != 0):
       #this is the computation for 3 secs
       time.sleep(3)
       random_number = random.randint(0,1000)

       #Send to printer for processing
       #.75 secs to 4.75 secs to generate a pause before printing
       secondsPause = random.uniform(.75,4.75)

       #This is the printer function
       printerLooper = True
       myStart = time.time()
       while printerLooper == True :
          print("Sleeping for ", secondsPause, " seconds")
          print(random_number)
          printerLooper = False
          print("total time taken this loop: ", time.time() - myStart)    

       looperCPU -= 1    
main() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-15T13:30:13.727

你可以使用这个 pytictoc。使用 pip 或 conda 安装。阅读有关[pytictoc](https://pypi.org/project/pytictoc/)的文档。它像 matlabs tic toc 一样工作。基本上只是用tic开始计时器并以toc结束。您可以直接打印或将其存储在新变量中。

```
from pytictoc import TicToc
def main()
    t = TicToc()  # create instance of class
    start_time= t.tic() #start timer
    while ():  

    #end of while loop

    end_time = t.toc()
    print("end_time", end_time) 
```

# java - TCP 接收器循环

> ID：14742102
> 
> 赞同：0
> 
> 时间：2013-02-07T01:33:22.483
> 
> 标签：java, tcpclient, file-transfer

我请求帮助 在客户端接收文件。变量输入记录文件名。Inputstream "is" 和 FileOutputStream "bos" 负责保存文件。第一个文件已交付，但另一个收到的文件在变量名称中发生 java.lang.NullPointerException。如何处理此循环以创建文件，输入变量将包含文件的下一个新名称，流“is”将包含新数据？文件toxic.pill 表示传输结束。

```
public class Receiver implements Runnable {

    private int port;

    public Receiver(int port) {

        this.port = port;

    }

    @Override
    public void run() {
        Socket socket = null;
        BufferedOutputStream bos = null;
        try {
            InetAddress adresa = InetAddress.getByName("localhost");

            System.out.println("klient sa pripaja na adresu: " + adresa);
            socket = new Socket(adresa, this.port);

            System.out.println("socket = " + socket);
            while (true) {
                BufferedReader input = new BufferedReader(
                        new InputStreamReader(socket.getInputStream()));
                String name = input.readLine();
            /// while (???????) {}

                if (name.equals("poison.pill")) {// null pointer exception

                    bos.close();
                    socket.close();
                    break;
                }

                int filesize = 1400;

                int bytesRead;
                byte[] bytearray = new byte[filesize];
                InputStream is = socket.getInputStream();
                FileOutputStream fos = new FileOutputStream(name);
                bos = new BufferedOutputStream(fos);

                while ((bytesRead = is.read(bytearray)) != -1) {
                    bos.write(bytearray, 0, bytesRead);
                    bos.flush();
                }

            }

        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

} 
```

万一有误会我解释一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:04:53.047

也许我不明白你，但你想要什么？查看您的代码，您可以看到

1.  从 inputStream -> fileName 读取行`input.readLine()`
2.  全部阅读**！！！！**输入流中的数据`while ((bytesRead = is.read(bytearray)) != -1) {`-1 表示流为空
3.  在它之后你的循环进入星号并试图读取行（p1），是的流是空的（p2）并且你有`NullPointer`.

解决方案，等到一些数据到达流...

# c# - Monogame 中的动态声音

> ID：14742105
> 
> 赞同：0
> 
> 时间：2013-02-07T01:33:55.993
> 
> 标签：c#, mono, monogame

如何在 Monogame 中创建动态声音？在 XNA 中，您可以使用 DynamicSoundEffectInstance 或 SoundEffect.FromStream 但前者目前正在开发中，而后者似乎根本没有实现。

# ios - 刷新 UICollectionview

> ID：14742106
> 
> 赞同：23
> 
> 时间：2013-02-07T01:33:57.903
> 
> 标签：ios, objective-c, uicollectionview, reloaddata

有谁知道在显示集合视图时如何重新加载/刷新 UICollectionView？基本上我正在寻找类似于 UITableview 的标准 reloadData 方法的东西。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-02-07T01:58:57.813

你可以打电话：

```
[self.myCollectionView reloadData]; 
```

个别部分和项目也可以重新加载：

```
[self.myCollectionView reloadSections:indexSet];
[self.myCollectionView reloadItemsAtIndexPaths:arrayOfIndexPaths]; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-12-21T21:48:59.597

```
[self.collectionView reloadData]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-11T11:47:25.547

正确和最好的方法是使用

```
NSMutableArray *indexPaths = [NSMutableArray array];
//prepare some data
//batchupdate as block
[self.collectionView performBatchUpdates:^{
    //operations like delete
   [self.collectionView deleteSections:[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(1, count)]];
    [self.collectionView insertItemsAtIndexPaths:indexPaths];
} completion:^(BOOL finished) {
    // call something when ready
    }
}]; 
```

并且所有内容都被预先计算为一个很好的动画。最佳做法是先删除然后添加所有元素，以避免冲突。

# cucumber - 尖括号可以在 Gherkin (SpecFlow) 场景大纲步骤中转义吗？

> ID：14742109
> 
> 赞同：1
> 
> 时间：2013-02-07T01:34:12.317
> 
> 标签：cucumber, specflow, gherkin

我有一个场景大纲，其中需要包含文字尖括号：

```
 Given I have sent "MAIL FROM:<user@example.com>"
  When I send "<command>"
  Then I should get a <code> reply
  Examples:
    | command         | code |
    | RCPT TO:<bogus> | 5xx  |
    | RCPT TO:<valid> | 2xx  | 
```

是否可以转义周围的尖括号`user@example.com`，使其不被视为占位符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:03:56.370

这听起来像是对您的问题的一个非常技术性的定义，当然不是与您业务部门的某人交谈的结果。虽然没有什么可以阻止您使用“*按示例规范”*样式运行单元测试，但这并不是它的真正设计目的。*Gherkin*应该是问题空间的自然语言表示，就像英语一样，我发现它在更精确的定义方面遇到了困难，例如*冒号小于用户，例如 .com 大于*.

您可以更改绑定定义以使它们更轻松

而不是使用

```
[Given("I have sent (.*)")]
public void IHaveSent(string line)
{
    DoSomethingWith(line);
} 
```

尝试

```
[Given("I have sent mail from (.*)")]
public void IHaveSentMailFrom(string email)
{
    DoSomethingWith(string.Format("MAIL FROM:<{0}>");
} 
```

所以它变得更像

```
Given I have sent mail from user@example.com 
```

但是，如果您更全面地定义示例，您将获得更大的好处。代替 user@example.com 让我们称他为 Bill 并定义（在 Gherkin 之外）我们认为 Bill 正在尝试做的事情。例如，Bill 可能会尝试做有效的场景，而 Ted 可能会尝试虚假的场景。

```
Given I have an email from Bill
When I get a receipt
Then it should be valid

Given I have an email from Ted
When I get a receipt
Then it should be bogus 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-25T17:42:48.577

这个问题的答案似乎是不，不可能在 Specflow 的 Gherkin 解析器中使用文字尖括号。

# wpf - 为什么数据触发器没有触发

> ID：14742111
> 
> 赞同：0
> 
> 时间：2013-02-07T01:34:17.943
> 
> 标签：wpf, xaml

我有一个 XAML 代码。我正在尝试填充 Datatrigger 上的矩形，但它没有触发

```
<ItemsControl Grid.Row="1" Grid.Column="1" ItemsSource="{Binding SelectedEnrollments}" Visibility="{Binding EnrollmentsExist, Converter={x:Static s:BooleanToVisibilityConverter.Default}, Mode=TwoWay}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <RadioButton Tag="{Binding Id}" GroupName="Enrollments" ToolTip="{Binding Title}" Checked="EnrollmentRadioButton_Checked" IsChecked="{Binding IsSelected}">
                <RadioButton.ContentTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">

                            <TextBlock TextTrimming="CharacterEllipsis" 
                                       Text="{Binding ToolTip, RelativeSource={RelativeSource FindAncestor, AncestorType=RadioButton}}" />
                            <Rectangle x:Name="RankIcon" Width="30">
                                <Rectangle.Style>
                                    <Style>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Rank}" Value="Primary">
                                                <Setter  Property="Rectangle.Fill" Value="Blue"></Setter>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Rank}" Value="Secondary">
                                                <Setter  Property="Rectangle.Fill" Value="{DynamicResource IconRankSecondary}"></Setter>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Rectangle.Style>
                            </Rectangle>
                         </StackPanel>
                        <DataTemplate.Triggers>

                        </DataTemplate.Triggers>
                    </DataTemplate>
                </RadioButton.ContentTemplate>
            </RadioButton>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

请帮助任何人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:10:46.400

将数据触发器移动到页面或视图的资源中。我相信它可能正在触发，但 Value="{DynamicResource IconRankSecondary}" 的绑定可能无法找到 DynamicResource。

通过在调试模式下运行数据绑定问题并查看指定绑定失败的调试输出来验证数据绑定问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T02:41:08.443

尝试更改设置器，以便它们使用 Property="Fill" 而不是 Property="Rectangle.Fill"

# r - nlme R 包中的错误：参数数量不正确 (1)，期望 La_chol 为 2

> ID：14742114
> 
> 赞同：0
> 
> 时间：2013-02-07T01:34:42.507
> 
> 标签：r, statistics

无论我尝试使用 nlme R 包估计什么模型，无论使用什么数据集，我总是会收到以下错误：

```
Incorrect number of arguments (1), expecting 2 for La_chol 
```

我会感谢有关此问题的任何帮助或提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:03:18.193

好的，看来我已经解决了这个问题，只需卸载并重新安装 R，我认为将它带到这里以供未来面临类似问题的人使用会很好。

一个有趣的提示是：由于最初的问题可能是由于安装了一些以前的包引起的，所以我在卸载 R 时没有保存任何一个。相反，我所做的是在卸载之前生成已安装包的列表，保存此列表，然后对 R 的新安装进行编码以在此列表中安装软件包。它工作得很好，而且做起来很快。

感谢所有尝试上述建议的人。

# ios - xcode杂乱无章的文件

> ID：14742115
> 
> 赞同：0
> 
> 时间：2013-02-07T01:34:51.677
> 
> 标签：ios, xcode, xcode4.5

在 Xcode 4 中，我有一个大型文件夹树，其中包含许多在项目（iPhone 应用程序）中使用的媒体文件（主要是图像）。在finder中，它们都在目录中，一切都很好，但是当xcode构建项目时，我所有的图像突然都在应用程序的根目录中。这对它的运行方式没有任何影响，但是我有很多媒体，而且它开始困扰我。前任：

Xcode 项目和在 finder 中：

```
../SomeApp/Images/Source1/image1.png 
```

在构建项目中：

```
SomeApp.app/image1.png 
```

我希望它是

```
SomeApp.app/Images/Source1/image1.png 
```

此外，我注意到我通过这些文件访问文件`[[NSBundle mainBundle] pathForResource....]`并且当它们都在根文件夹中时工作正常，但是如果我手动为图像创建一个文件夹，它不会找到它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:06:28.913

我相信您需要添加一个文件夹引用，而不是仅仅将它们放在那里。如果可以避免，Xcode 并不真的希望你这样做。但基本上你可以将一个文件夹链接到你的项目中，并且包会尊重这一点。转到添加文件，然后选择创建文件夹重放而不是组。

如果操作正确，您将看到一个蓝色文件夹而不是黄色文件夹。

然后只需确认该文件夹在您的捆绑包中复制捆绑资源。但是每件事都需要使用资源路径，您将无法将 -[UIImage imageNamed] 与文件夹中的文件一起使用。

# msbuild - 解决方案中的全局 postbuildevent

> ID：14742119
> 
> 赞同：1
> 
> 时间：2013-02-07T01:35:12.987
> 
> 标签：msbuild, target

我的 VS 解决方案中大约有十几个项目具有相同的行：

```
<PostBuildEvent>
  <Command>signtool sign /f ..\Certificates\MyCert.pfx /fd sha256 "$(TargetPath)"</Command>
</PostBuildEvent> 
```

我知道，因为它使用的是 msbuild，所以有一种方法可以有一个共同的目标并让每个项目都引用它，但我正在努力为此想出确切的语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:56:43.947

创建一个新文件，我们称之为 CommonDefinitions.targets，内容如下：

```
<Project DefaultTargets="Build" ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup>
        <PostBuildEvent>signtool sign /f ..\Certificates\MyCert.pfx /fd sha256 "$(TargetPath)"</PostBuildEvent>
    </PropertyGroup>
</Project> 
```

然后在要覆盖 PostBuildEvent 的每个文件中，添加以下行：

```
<Import Project="$(SolutionDir)\CommonDefinitions.targets" /> 
```

如果您想将其与自定义后期构建步骤合并，您将通过覆盖 PostBuildEventDependsOn 将其他目标添加到后期构建。例如：

```
<PropertyGroup>
    <PostBuildEventDependsOn>$(PostBuildEventDependsOn);MyAdditionalPostBuildTarget</PostBuildEventDependsOn>
</PropertyGroup>

<Target Name="MyAdditionalPostBuildTarget">
    <!-- add any actions here -->
</Target> 
```

和

# android - 在Android中随机更改背景图像

> ID：14742120
> 
> 赞同：2
> 
> 时间：2013-02-07T01:35:16.910
> 
> 标签：android, image, android-activity, background

我的测验应用程序中有一个活动，我想每 5 秒更改一次它的背景。如何随机化可绘制文件夹中的图像并使它们成为我活动的背景图像。注意：这只是一个单一的活动。

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T01:49:11.313

您可以像这样创建一个可绘制对象数组：

```
<array name="myImages">
       <item>@drawable/img1</item>
       <item>@drawable/img2</item>
       <item>@drawable/img3</item>
</array> 
```

你可以像这样得到它们：

```
Resources res = getResources();
TypedArray myImages = res.obtainTypedArray(R.array.myImages); 
```

现在创建随机数：

```
Random r = new Random(myImages.length())
int i = r.nextInt();

Drawable drawable = icons.getDrawable(i); 
```

现在每 5 秒将它们设置为背景（如 ρяσѕρєяs 示例）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T01:52:18.100

```
public class Test extends Activity{
    //instantiate a handler object
private Handler imageHandler = new Handler();
    //array containing drawables ids
int[] myarray = new int[]{R.drawable.image1,.....};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    //add a runnable to the message queue
    imageHandler.post(handle);
}

private final Runnable handle = new Runnable(){
    public void run(){
        try {
            Random r = new Random();
            int i = r.nextInt(myarray.length);
            Test.this.getWindow().setBackgroundDrawableResource(myarray[i]);
            imageHandler.postDelayed(this, 5000);    
        }
        catch (Exception e) {
            Log.d("Test", e.toString());
        }   
    }
};

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T01:45:23.843

使用`Handler`或`Timertask`每 5 秒更改一次活动背景：

```
public static int count=0;
int[] drawablearray=new int[]{R.drawable.One,R.drawable.Two,..};
new Handler().postDelayed(new Runnable() {
    public void run() {

       if(count<drawablearray.length){

           Your_Current_Activity.this.getWindow().
               setBackgroundDrawableResource(drawablearray[count]);

           count++;  //<<< increment counter here
        }
       else{
          // reset counter here
          count=0;
        }

      }
  }, 5000); 
```

# jquery - jquery 动态选择列表不会在 Codeigniter 中自动填充

> ID：14742123
> 
> 赞同：0
> 
> 时间：2013-02-07T01:35:27.090
> 
> 标签：jquery, json, codeigniter

我的极限。我不能让它工作：我想用 jquery 和 JSON 制作一个动态选择列表来填充数据库中的数据我看到它在 firebug 控制台中获取数据，但它没有填充选择框。这是我的看法：

```
<div class="control-group">
            <label class="control-label" for="inputPassword">Grad</label>
            <div class="controls">
                <select name="city" id="city" class="update">
                    <option value="">Odaberi</option>
                    <?php if (!empty($results)) { ?>
                    <?php foreach($results as $row) { ?>
                    <option value="<?php echo $row->city_id; ?>">
                        <?php echo $row->city_name; ?>
                    </option>
                    <?php } ?>
                    <?php } ?>
                </select>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="inputPassword">Deo grada</label>
            <div class="controls">
            <select name="category" id="category" class="update"
        disabled="disabled">
        <option value="">----</option>
    </select>
            </div>
        </div> 
```

这是我的控制器，我称之为模型：

函数 update_list(){ $this->marea->update_list();

最后，我的模型

```
function update_list(){
    if (!empty($_GET['id']) && !empty($_GET['value'])) {
        $id = $_GET['id'];
        $value = $_GET['value'];

        try {
            $objDb = new PDO('mysql:host=localhost;dbname=isport', 'root', '');
            $objDb->exec('SET CHARACTER SET utf8');

            $sql = "SELECT *
            FROM `area`
            WHERE `city_id` = ?";
            $statement = $objDb->prepare($sql);
            $statement->execute(array($value));
            $list = $statement->fetchAll(PDO::FETCH_ASSOC);

            if (!empty($list)) {
                $out = array('<option value="">Odaberi</option>');

                foreach($list as $row) {
                    $out[] = '<option value="'.$row['area_id'].'">'.$row['area_name'].'</option>';
                }

                echo json_encode(array('error' => false, 'list' => implode('', $out)));
            } else {
                echo json_encode(array('error' => true));
            }
        } catch(PDOException $e) {
            echo json_encode(array('error' => true));
        }
    } else {
        echo json_encode(array('error' => true));
    }
} 
```

这是我的ajax：

```
var formObject = {
    run : function(obj) {
        if (obj.val() === '') {
            obj.nextAll('.update').html('<option value="">----</option>').attr('disabled', true);
        } else {
            var id = obj.attr('id');
            var v = obj.val();
            jQuery.getJSON(SITE +'users/update_list', { id : id, value : v }, function(data) {
                if (!data.error) {
                    obj.next('.update').html(data.list).removeAttr('disabled');
                    return;
                } else {
                    obj.nextAll('.update').html('<option value="">----</option>').attr('disabled', true);
                }
            });
        }
    }
};
$(function() {
    $('.update').live('change', function() {
        formObject.run($(this));
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:25:26.147

你的问题是使用 jQuery`next`函数，

> 给定一个表示一组 DOM 元素的 jQuery 对象，.next() 方法允许我们在 DOM 树中搜索这些元素的紧随其后的兄弟元素，并从匹配的元素构造一个新的 jQuery 对象。

您的选择框不在同一个集合中，因此下一个返回未定义并且没有任何更新。如果您只需要在此特定位置使用此代码一次，则可以将另一个类或 id 添加到您的第二个选择器以指定它。

```
var formObject = {
 run : function(obj) {
    if (obj.val() === '') {
        obj.nextAll('.update').html('<option value="">----</option>').attr('disabled', true);
    } else {
        var id = obj.attr('id');
        var v = obj.val();
        jQuery.getJSON(SITE +'users/update_list', { id : id, value : v }, function(data) {
            if(!data.error) {
                $('#secondSelect').html(data.list).removeAttr('disabled');
            } else {
                $('#secondSelect').html('<option value="">----</option>').attr('disabled', true);
            }
        });
    }
}  }; 
```

# shipping - eBay API - 包括 ShippingServiceOptions 中的本地取件返回“配送服务本地取件 (150) 不可用。” 错误

> ID：14742124
> 
> 赞同：1
> 
> 时间：2013-02-07T01:35:32.037
> 
> 标签：shipping, ebay-api

我想知道是否有人尝试通过本地取货将产品加载到 eBay。通常我会在 eBay 论坛上问这些问题，（我刚才也是这样做的）但我被困住了。我需要设置一个产品（或者更确切地说是 80k 产品）以包括本地取货。但是我发现的所有 API 参考似乎都没有确定下来。

同样，我知道这可能会更好地放在 eBay 论坛上，但尝试过但失败了。

任何帮助，将不胜感激。

当我包括

```
 <ShippingServiceOptions>
    <ShippingService>Pickup</ShippingService>
    <ShippingServiceCost currencyID="AUD">0.00</ShippingServiceCost>
    <ShippingServiceAdditionalCost currencyID="AUD">0.00</ShippingServiceAdditionalCost>
    <ExpeditedService>false</ExpeditedService>
    <FreeShipping>true</FreeShipping>
    <ShippingServicePriority>2</ShippingServicePriority>
  </ShippingServiceOptions> 
```

我回来

```
 <ShortMessage>Shipping service is not available.</ShortMessage>
  <LongMessage>Shipping service Local Pickup(150) is not available.</LongMessage>
  <ErrorCode>12519</ErrorCode><SeverityCode>Error</SeverityCode> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:19:52.273

好的..我进入 eBay 的管理员并手动更改了一条记录，然后做了一个 getItem

这是我回来的细节。

```
<ShippingServiceOptions>
        <ShippingService>AU_Pickup</ShippingService>
        <ShippingServiceCost currencyID="AUD">0.0</ShippingServiceCost>
        <ShippingServiceAdditionalCost currencyID="AUD">0.0</ShippingServiceAdditionalCost>
        <ShippingServicePriority>2</ShippingServicePriority>
        <ExpeditedService>false</ExpeditedService>
</ShippingServiceOptions> 
```

我没有留下深刻的印象，因为这意味着我必须在设置之前测试商店所在的国家/地区。哎呀。

# php - 如何使用 FirePHP 捕获错误/警告

> ID：14742125
> 
> 赞同：0
> 
> 时间：2013-02-07T01:35:46.877
> 
> 标签：php, debugging, firephp

我不确定如何让 FirePHP 捕捉错误和警告并在 Firebug 控制台中报告它们。

我已经安装了 FirePHP，我很确定它可以正常工作——我在控制台中看到了这些响应：

```
fb('Log message', FirePHP::LOG);
fb('Info message', FirePHP::INFO);
fb('Warn message', FirePHP::WARN);
fb('Error message', FirePHP::ERROR); 
```

我基本上看到“日志消息”、“信息消息”、“警告消息”和“错误消息”。然后我更改了我的代码以故意破坏它——它从他们的日志中给了我这个：

```
[21-Jan-2013 22:19:49] PHP Warning:  Missing argument 3 for
echo_first_image(), called in
/app/web/xxx/wp-content/themes/xxx/home.php on
line 85 and defined in
/app/web/xxx/wp-content/themes/xxx/functions.php
on line 12 
```

我试图在 FirePHP 中捕捉并打印它，但它没有被检测到，我不知道为什么。我用于初始化 FirePHP 的完整代码块：

```
<?php /* debug */
require_once("debug/FirePHP.class.php");
require_once('debug/fb.php');
$firephp = FirePHP::getInstance(true);
ob_start();
fb('Log message', FirePHP::LOG);
fb('Info message', FirePHP::INFO);
fb('Warn message', FirePHP::WARN);
fb('Error message', FirePHP::ERROR);
?> 
```

解释或资源会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:10:32.777

为此，您需要将错误转换为异常。

来自 FirePHP 网站：

> 错误、异常和断言处理
> 
> 将 E_WARNING、E_NOTICE、E_USER_ERROR、E_USER_WARNING、E_USER_NOTICE 和 E_RECOVERABLE_ERROR 错误转换为 ErrorExceptions 并在需要时自动将所有异常发送到 Firebug。
> 
> 断言错误可以转换为异常并在需要时抛出。
> 
> 您还可以手动将捕获的异常发送到 Firebug。

```
$firephp->registerErrorHandler(
            $throwErrorExceptions=false);
$firephp->registerExceptionHandler();
$firephp->registerAssertionHandler(
            $convertAssertionErrorsToExceptions=true,
            $throwAssertionExceptions=false);

try {
  throw new Exception('Test Exception');
} catch(Exception $e) {
  $firephp->error($e);  // or FB::
} 
```

# android - onLocationChanged 导致崩溃、黑屏

> ID：14742129
> 
> 赞同：0
> 
> 时间：2013-02-07T01:36:16.810
> 
> 标签：android, android-location, locationlistener

我添加了一个加载器，因为我的列表类需要更新位置。但是，在 DDMS 中设置位置后，进程开始关闭，直到进程列表为空白，屏幕变黑。抛出的唯一错误消息如下。崩溃肯定是由调用 onLocationChanged 引起的，但我不知道这是怎么发生的。

```
E/InputQueue-JNI(335): channel '406d08f8 com.example.test/com.example.test.SplashActivity (client)' ~ Publisher closed input channel or an error occurred.  events=0x8 
```

MyContent.Latitude 和 Longitude 是静态浮点数，意图在添加位置服务之前开始工作。

SplashActivity.java

```
package com.example.test;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.AsyncTask;
import android.os.Bundle;

public class SplashActivity extends Activity implements LocationListener {
    boolean     haveLocation;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_splash_screen);

        haveLocation = false;
        MyLoader lb = new MyLoader();
        lb.execute(this);
        LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
        Location currLoc = lm.getLastKnownLocation(lm.getBestProvider(
                new Criteria(), false));
        if (currLoc == null)
            lm.requestSingleUpdate(new Criteria(), this, null);
        else
            onLocationChanged(currLoc);
    }

    public class MyLoader extends AsyncTask<Void, Void, Void> {
        @Override
        protected Void doInBackground(Void... args)
        {
               while (!haveLocation)
               {
                       try { wait(500); } catch (Exception e) {}
               }

               return null;
        }
        protected void onPostExecute(Void arg)
        {
            Intent intent = new Intent(SplashActivity.this,
                    ListActivity.class);
            intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK
                    | Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(intent);
        }
    }

    @Override
    public void onLocationChanged(Location location)
    {
        MyContent.LATITUDE = (float) location.getLatitude();
        MyContent.LONGITUDE = (float) location.getLongitude();
        haveLocation = true;
    }

    public void onProviderDisabled(String provider){}
    public void onProviderEnabled(String provider){}
    public void onStatusChanged(String provider, int status, Bundle extras){}
} 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.test"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.test.SplashActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.test.ListActivity"
            android:label="@string/app_name" >
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value=".SplashActivity">
        </activity>
    </application>

</manifest> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:00:31.923

```
LocationManager lm = getSystemService(Context.LOCATION_SERVICE);

    if (lm.isProviderEnabled(LocationManager.GPS_PROVIDER))
    lm.requestSingleUpdate(LocationManager.GPS_PROVIDER, this, null);
else if (lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER))
    lm.requestSingleUpdate(LocationManager.NETWORK_PROVIDER, this, null);
else {
    try {
        throw (new Exception("No location provider is available!"));
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

可能是默认的“最佳”位置提供程序导致了问题。现在我使用了两个常量提供者，这就像一个魅力。如果有人对原因有解释，那就太好了，但这对于遇到此问题的其他人来说是一个解决方案。

# autolayout - 故事板中的自动布局是全部还是全部？

> ID：14742138
> 
> 赞同：4
> 
> 时间：2013-02-07T01:36:52.753
> 
> 标签：autolayout, xcode4.6

我一直在开发一个企业 iPad 客户端应用程序，它具有相当复杂的包含视图控制器层次结构。我最近不得不在应用程序启动视图（服务器登录视图）中实现重新设计。我决定借此机会使用自动布局实现重新设计，并保持应用程序的其余部分保持不变。在观看了 WWDC 视频并破解代码几天后，我对登录文本字段进行了流畅、动画的重新定位，以进行旋转和键盘显示/隐藏事件。对结果满意，我git合并了重构分支，结果登录后使用应用程序时发现应用程序崩溃，没有调试器提示。我终于发现自动布局以某种方式级联到子容器视图控制器。

在 Main.storyboard 中有一个“主”导航控制器，它有一个 RootViewController 根视图控制器，其视图是子视图控制器视图的容器，从登录视图开始，然后交换到用户最后使用的任何视图控制器。重构后，在 IB 中，服务器登录控制器已选中“使用自动布局”。但是突然之间，一个从未启用过自动布局的子视图控制器也被检查了。当我在该视图控制器上取消选中它时，突然我的服务器登录 vew 控制器自动布局复选框未选中。这是否意味着在故事板中的所有视图控制器上启用/禁用自动布局？如果没有，有人知道发生了什么吗？Xcode 4.6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T19:48:21.257

答案来自 Apple 开发者论坛中的 KMT，即在 Storyboard 级别启用了自动布局。我不知何故错过了 WWDC 视频中的这一关键点。

我通过创建一个启用“使用自动布局”的新故事板文件解决了我的特定问题，并将启用自动布局的视图控制器移到其中。不幸的是，在发现在情节提要级别启用了自动布局的过程中，这意味着每当我取消选中 Main.storyboard 中任何对象上的“使用自动布局”复选框时，IB 都会应用最佳猜测约束来替换我拥有的现有弹簧/支柱属性之前设置的。然后当取消选中“使用自动布局”复选框时，它应用最佳猜测弹簧/支柱属性来替换其最佳猜测约束。最终结果是我不得不将弹簧/支柱设置重新应用到情节提要文件中的许多视图。

# c# - 在一次数据库操作中使用 [A] 1:n [B] n:1 [C] 1:n [D] 结构查询

> ID：14742145
> 
> 赞同：1
> 
> 时间：2013-02-07T01:37:51.613
> 
> 标签：c#, linq, entity-framework, linq-to-entities, many-to-many

我正在使用 Entity Framework 作为我的 ORM 在现有 SQL Server 数据库之上构建一个 ASP.NET MVC 4 应用程序。**这是模型优先，而不是代码优先。**我对 LINQ to Entities 相当陌生。最近我遇到了很多问题，我很难在网上找到任何帮助。我现在已经解决了两次。这是我的故事。

我有一个需要显示模块列表的视图（如课堂教学）。每个 Module 属于一个 Unit，但每个 Unit 可以有多个 Module。每个模块可以有多个讲师，每个讲师可以教授多个模块。有一个 ModuleInstructor 表可以加入该关系。

```
Unit           Module        ModuleInstructor         Instructor
========  1:N  ========  N:1 ==================  1:N  ============
UnitID         ModuleID      ModuleInsturctorID       InstructorID
UnitName       UnitID        ModuleID                 InstructorName
               StartDate     InsturctorID 
```

EntityFramework 有这些对象[为了简洁而修剪了不必要的属性]：

```
public partial class Unit
{
    public int UnitID { get; set; }
    public string UnitName { get; set; }
    public virtual ICollection<Module> Module { get; set; }
}

public partial class Module
{
    public Module()
    {
        this.ModuleInstructor = new HashSet<ModuleInstructor>();
        this.Record = new HashSet<Record>();
    }
    public int ModuleID { get; set; }
    public Nullable<int> UnitID { get; set; }
    public Nullable<System.DateTime> ModuleDate { get; set; }
    public virtual Unit Unit { get; set; }
    public virtual ICollection<ModuleInstructor> ModuleInstructor { get; set; }
}

public partial class ModuleInstructor
{
    public int ModuleInstructorID { get; set; }
    public Nullable<int> InstructorID { get; set; }
    public Nullable<int> ModuleID { get; set; }
    public Instructor Instructor { get; set; }
    public virtual Module Module { get; set; }
}

public partial class Instructor
{
    public Instructor()
    {
        this.ModuleInstructor = new HashSet<ModuleInstructor>();
    }
    public int InstructorID { get; set; }
    public string InstructorName { get; set; }
    public virtual ICollection<ModuleInstructor> ModuleInstructor { get; set; }
} 
```

无论如何，我想在逗号分隔的列表中显示：UnitName、ModuleDate、Instructor(s)。我的问题是我最难让 Linq 获得 Instructors，我所能检索到的只是 ModuleInstructors，它没有加载任何 Instructor 信息。

```
private Entities db = new Entities();

public ActionResult Index(int p = 1)
{
    int pageSize = 20;

    var modules = db.Modules
      .Include(m => m.Unit)
      .Include(m => m.ModuleInstructor)
      .Include(m => m.ModuleInstructor.Instructor)  //Doesn't work
      .OrderByDescending(m => m.ModuleStartDate)
      .Skip(pageSize * (p - 1))
      .Take(pageSize);

    return View(modules);
} 
```

我的第一个解决方案是修改 Module 类以添加另一个集合：

```
public partial class Module
{
    public Module()
    {
        this.ModuleInstructor = new HashSet<ModuleInstructor>();
        this.Record = new HashSet<Record>();
    }
    public int ModuleID { get; set; }
    public Nullable<int> UnitID { get; set; }
    public Nullable<System.DateTime> ModuleDate { get; set; }
    public virtual Unit Unit { get; set; }
    public virtual ICollection<Instructor> Instructor { get; set; } //Added
    public virtual ICollection<ModuleInstructor> ModuleInstructor { get; set; }
} 
```

在 ModuleController 中，我得到了除 Instructors 之外的所有内容，然后是 Instructors，它们分别并通过将它们插入集合中进行循环。

```
private Entities db = new Entities();

public ActionResult Index(int p = 1)
{
    int pageSize = 20;

    var modules = db.Modules
      .Include(m => m.Unit)
      .Include(m => m.ModuleInstructor)
      .OrderByDescending(m => m.ModuleStartDate)
      .Skip(pageSize * (p - 1))
      .Take(pageSize);

    var instructors = db.Instructors.ToList();

    foreach (var m in modules)
    {
        m.Instructor = new List<Instructor>();
        foreach (var mi in m.ModuleInstructor)
        {
            m.Instructor.Add(instructors
              .Where(i => i.InstructorID == mi.InstructorID).SingleOrDefault());
        }
    }

    return View(modules);
} 
```

根据 LinqPad，这需要两条 SQL 语句。还不错。服务器上的压力也不大，因为我没有很多讲师，而且每次只有 20 个模块显示。

但是，我认为必须有一种方法可以在一个数据库调用中做到这一点。这是我的新解决方案。我仍然循环将 Instructors 插入到 Modules 对象的 Instructor 集合中，但我得到了所有 Instructors 以及其他所有内容。

```
public ActionResult Index(int p = 1)
{
    int pageSize = 20;

    var modules = db.Modules
      .Include(m => m.Unit)
      .Include(m => m.ModuleInstructor)
      .Include(m => m.ModuleInstructor.Select(mi => mi.Instructor)) //New 'trick'
      .OrderByDescending(m => m.ModuleStartDate)
      .Skip(pageSize * (p - 1))
      .Take(pageSize);

    foreach (var m in modules)
    {
        m.Instructor = new List<Instructor>();
        foreach (var mi in m.ModuleInstructor)
        {
            //Adds from the ModuleInstructor instead of pairing from another list
            m.Instructor.Add(mi.Instructor);
        }
    }

    return View(modules);
} 
```

根据 LinqPad 的说法，它只需要 SQL 语句，它的执行速度比第一种方法稍快。

老实说，我很难准确地想象它是如何工作的以及为什么，但确实如此。我很高兴我坚持了这个问题，多次回到它，直到我“恰到好处”。

**我的一个问题是：这是最好的方法还是有更好的方法？**

**澄清：**我无法更改我的数据库表，并且对更改我的课程不感兴趣。我在问是否有更好的方法来使用数据结构进行此操作。StackOverflow 上的这种特殊情况似乎没有答案，我正在尝试继续。这个问题包括我所有的尝试，如果我没有收到回复，我将用我自己的最终解决方案来回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:26:42.843

I think [https://stackoverflow.com/a/7966436/596146](https://stackoverflow.com/a/7966436/596146) is more what you're looking for. I've not used Entity Framework before (only [Fluent NHibernate](http://www.fluentnhibernate.org/)) but I think that `Module` should have an `ICollection<Instructor>` rather than an `ICollection<ModuleInstructor>` and then you tell EF about the assocation table.

# javascript - Phonegap IOS地理定位权限警报未显示

> ID：14742146
> 
> 赞同：3
> 
> 时间：2013-02-07T01:38:05.467
> 
> 标签：javascript, ios, cordova, jquery-mobile, geolocation

我正在 phonegap 中开发一个 IOS 应用程序，我想在加载时获得用户对位置服务的许可。问题是在我恢复应用程序（按主页并再次打开应用程序）或等待几分钟之前，请求许可的警报不会出现，这是不可接受的。

我正在使用这样的`deviceready`事件：

```
document.addEventListener("deviceready", deviceReady, false);
function deviceReady() {
navigator.geolocation.getCurrentPosition(onLocationSuccess,
                                         onLocationError
                                         );
} 
```

如果我不等待 deviceready，则警报显示正常，但我会收到双重提示，并显示如下消息：

`/var/mobile/Applications/XXXX-XXXX-XXXX-XXXXXXXXXXX/AppName.app/www/index.html would like to use your current location`

有什么想法可以让这个工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-09T08:19:07.210

我与这个问题斗争了几天，终于找到了解决方案。似乎它不是插件也不是 corvoda 版本。尝试将此**Content-Security-Policy**条目添加到**index.html**内的 head 部分：

> ```
> <meta http-equiv="Content-Security-Policy" content="default-src * gap://ready file:; style-src 'self' 'unsafe-inline'; img-src 'self' 
> ```
> 
> 数据：; script-src * 'unsafe-inline' 'unsafe-eval'">

重要的部分是

> default-src * gap://ready file:;

gap：仅在 iOS 上需要（使用 UIWebView 时），对于 JS->native 通信需要。

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T12:46:29.493

虽然您已经解决了这个问题，但以下内容将在未来对其他人有所帮助。

为了在**iOS**上显示权限对话框，您必须在**config.xml**中进行以下配置。

```
<gap:config-file platform="ios" parent="NSLocationAlwaysUsageDescription" overwrite="false">
    <array>
      <string>NSLocationAlwaysUsageDescription</string>
    </array>
</gap:config-file> 
```

我使用它并且效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-12T02:27:12.470

这个解决方案对我来说是完美的：

```
<gap:config-file platform="ios" parent="NSLocationAlwaysUsageDescription" overwrite="false">
    <array>
      <string>NSLocationAlwaysUsageDescription</string>
    </array>
</gap:config-file> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-13T05:30:33.920

对于**iOS上的权限对话框，请在****config.xml**中使用此代码

 **```
<gap:config-file platform="ios" parent="NSLocationAlwaysUsageDescription" overwrite="false">
<array>
  <string>NSLocationAlwaysUsageDescription</string>
</array> 
```

@AAhad 当用户关闭对话框或警报时您的问题，您可以检查该选项是否可用，如果您需要激活 GPS，您可以根据您的请求与新警报的用户交谈。

```
document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
    navigator.geolocation.getCurrentPosition(onSuccess, onError);
}

// onSuccess Geolocation
//
function onSuccess(position) {
  //Code for your GPS
}

// onError Callback receives a PositionError object or if your user close de dialog or cancel de permission
//
function onError(error) {
        alert('Error please check your GPS on Settings: '    + error.code    + '\n' +
              'Please Active Your GPS' + error.message + '\n');
    } 
```**

# ios - 检查 UIWebview 是否显示 PDF

> ID：14742149
> 
> 赞同：4
> 
> 时间：2013-02-07T01:38:13.360
> 
> 标签：ios, pdf, uiwebview

需要明确的是，我的问题**不是**问如何在 UIWebview 中显示 PDF。我想检查用户是否已从某个网站或链接导航到 PDF (.pdf) 文档。这样我可以向用户显示更多选项，例如保存 PDF 或打印它。检查 UIWebView 的内容是否为 PDF 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T02:25:12.857

您也可以检查 MIME 类型，以获得稍长的旅程：

```
@property (nonatomic, strong) NSString *mime;

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response 
{
   mime = [response MIMEType];
}

- (BOOL)isDisplayingPDF {
    NSString *extension = [[mime substringFromIndex:([mime length] - 3)] lowercaseString];

    return ([[[self.webView.request.URL pathExtension] lowercaseString] isEqualToString:@"pdf"] || [extension isEqualToString:@"pdf"]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T01:56:11.427

这是一次漫长的旅行，但我认为这会奏效......

```
BOOL isPdf = [[[self.webView.request.URL pathExtension] lowercaseString]
                 isEqualToString:@"pdf"]; 
```

# c# - 如何让用户决定在 WCF 中请求哪个服务？

> ID：14742151
> 
> 赞同：0
> 
> 时间：2013-02-07T01:38:19.147
> 
> 标签：c#, .net, windows, wcf, communication

在 WCF 中，当您请求两个值并能够使用这些值执行不同的计算时，如何让用户决定请求哪个服务。

例如，您要求 value1 和 value 2。用户可以选择使用这些值执行加法、减法和乘法。

你怎么能做到这一点？

```
 [OperationContract]
    int GetTwoValues(int value1, int value2);

public int addition(int value1, int value2){
return value1+value2;
}

public int subtraction(int value1, int value2){
return value1-value2;
} 
```

如何做一些逻辑，比如

```
if user.request="addition"{
do addition
}
else if user.request="subtraction"{
do subtraction
} 
```

我知道这不是我写的代码，只是想让你理解我在说什么。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:43:33.537

不太确定我理解这个问题

```
[OperationContract]
public int Subtraction(int value1, int value2)
{
    return value1 - value2;
}

[OperationContract]
public int Addition(int value1, int value2)
{
    return value1 + value2;
} 
```

会像这样工作

```
[OperationContract]
public int Calculation(int value1, int value2, string calcType)
{
    switch (calcType)
    {
        case "addition":
            return value1 + value2;
        case "subtraction":
            return value1 - value2;
    }
    //return default or throw exception
} 
```

当然，并不是说两者都没有缺点，但两者都符合您的标准。

编辑：您的评论提出了一个明显的观点，即开关盒允许用户可能提供不映射的值。

是的，我不会使用字符串，这就是你的例子！

可能的方法？

*   验证用户输入 - 当他们提供无效的内容时让他们知道
*   使用默认值
*   抛出异常
*   使用 an`enum`强制用户从预定义的列表中进行选择
*   同样使用第一种方法

我想也许你需要在你的问题中解释更多关于你想要实现的目标。

# java - android按值传递？

> ID：14742152
> 
> 赞同：2
> 
> 时间：2013-02-07T01:38:19.553
> 
> 标签：java, android, function

我有点困惑，希望有人能对此事有所了解。我创建了一个从图像数组中删除水平线并返回没有任何水平线的图像数组的函数。但是当我用我的图像数组调用这个函数时，它也会直接修改我传递给它的图像数组。为什么会这样？

### 例子

```
int[][] imageArray = ImageToArray();
int[][] _NoLines = RemovedLines(imageArray); 
```

`imageArray`应该还有它的台词吧？

如果有人好奇，这是实际功能：

```
public int[][] RemovedLines(int[][] _baseImage)
{
    int width = _baseImage[0].length, height = _baseImage.length;   

    int white = 0;
    int black = 0;

    for (int y = 0; y < height; y++) {
        white = 0;
        black = 0;
        for (int x = 0; x < width; x++) {
            if(_baseImage[y][x] == 0xFFFFFFFF){
                white++;
            }else{
                black++;
            }
        }
        if(black  > white)
        {
            // line detected fist time
            // now get height of line
            int _starts = y;
            _starts++;
            int _end = 0;

            for(; _starts < height; _starts++){
                white = 0;
                black = 0;
                for(int _x = 0; _x < width; _x++){

                    if(_baseImage[_starts][_x] == 0xFFFFFFFF){
                        white++;
                    }else{
                        black++;
                    }
                }
                if(white > black){
                    // end of line height
                    _end = _starts;
                    _starts = y;

                    break;
                }
            }
            white = 0;
            black = 0;
            for(;_starts < _end; _starts++){
                for(int line = 0; line < width; line++){
                    if(_baseImage[_starts-1][line] != 0xFF000000 
                        && _baseImage[_starts-2][line] != 0xFF000000
                        || _baseImage[_starts+1][line] != 0xFF000000 
                        && _baseImage[_starts+2][line] != 0xFF000000){
                        _baseImage[_starts][line] =0xFFFFFFFF;
                    }

                }
            }
            y = _end;

        }
    }
    return _baseImage;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T01:43:10.597

在 Java 中，数组是对象。将对象传递给方法时，传递给方法的值是其引用的副本。这会导致对作为参数传递给方法的对象的修改对对象的引用进行，从而改变对象。

我遇到的关于 Java 如何通过与原语和对象相关的值传递的最佳描述之一是 Java Ranch 上的这个[故事](http://www.javaranch.com/campfire/StoryPassBy.jsp)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T01:43:02.847

java中的数组是对象。
这就像传递了一个指向数组的指针，但不是原始指针，而是它的副本。

您修改了数组的内容。
您必须在方法中创建一个新数组。在该副本中，您可以删除这些行。
然后你返回那个副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T02:08:15.463

正如其他人指出的那样，数组是对象，并且：

> Java 将对象作为按值传递的引用传递

引用：[Java 是“按引用传递”还是“按值传递”？](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)

这意味着，当您输入 method 时`RemovedLines`，`_baseImage`是一个指向同一个对象的`imageArray`引用（两个不同的引用指向堆中的同一个对象）。

因此，您的第一步应该是创建原始数组的副本。就是这样：

```
int[][] cloneArray = new int[_baseImage.length][];
for (int i = 0; i < cloneArray.length; i++) {
    cloneArray[i] = _baseImage[i].clone();
} 
```

由于`_baseImage`是按值传递的引用，您甚至可以执行以下操作：

```
_baseImage = cloneArray; 
```

从这一点开始，`_baseImage`内部`RemovedLines`将独立于您的主`imageArray`数组（每个引用将指向堆中的不同对象）。

但是请注意，这会让大多数 Java 开发人员想要伤害你（它会让人想起关于 SCJP / OCPJP 考试的糟糕回忆）。正如@AlexWien 指出的那样，推荐的方法是重构您的代码以重新处理`cloneArray`并返回它。

# vba - 访问 IE.navigate 中的 excel VBA 变量

> ID：14742158
> 
> 赞同：0
> 
> 时间：2013-02-07T01:39:47.280
> 
> 标签：vba, excel, visual-studio-macros

我需要在 excel VBA 中的 IE.navigate 调用中传递一个变量。例如，我的示例应用程序将是这样的。

```
Enter the first name: "SACHIN"
Enter the last name:  "TENDULKAR" 
```

我将 FN 和 LN 的值存储在我的 excel VBA 中的变量中。我需要导航到谷歌搜索结果的第一页。如果我对值进行硬编码，我可以成功导航到第一页。如果我给出如下内容，

```
ie.Navigate "http://www.google.com/search?hl=en&q=sachin+tendulkar+wiki&meta=" 
```

我需要提供应用程序中的值，而不是硬编码，如下所示。

```
ie.Navigate "http://www.google.com/search?hl=en&q=&FirstName+&LastName+wiki&meta=" 
```

但上述方法没有将 excel VBA 值传递给我的 ie.Navigate 调用。有人可以帮我吗？

如果您需要更多信息，请告诉我。

谢谢和问候， 拉梅什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T02:29:12.853

```
ie.Navigate "http://www.google.com/search?hl=en&q=" & _
             FN & "+" & LN & "+wiki&meta=" 
```

# wordpress - index.php 中没有博客摘录

> ID：14742165
> 
> 赞同：0
> 
> 时间：2013-02-07T01:40:56.317
> 
> 标签：wordpress

简而言之，按照教程，我还没有进入“主要内容”的部分，所以像往常一样，我跳到前面并将主要内容放在侧边栏中。所以在我的“php get_sidebar()”中，我有我的主要内容和我的旁白。尽管它不是理想的格式，但我的页面看起来还不错。博客正在显示，一切都很好。请注意，我的“php the_excerpt()”在我的主要内容中，但一切都很好。然后我们到了他说要创建一个 home.php 页面并将我的主要内容放在那里的部分，它由 php get_header 和 php get_sidebar 接壤，就像它应该的那样。我认为很容易将我的主要内容从侧边栏剪切到 home.php 中（基本上是将 index.php 中的所有内容复制到 home。

```
<?php get_header(); ?>

<section>
    THIS IS MY TRUNCATED MAIN CONTENT

    <div id="posts" class="regions">
        <?php query_posts("posts_per_page=1"); ?>
        <h4><span>Blog</span> City</h4>
        <div id="post_content">
            <p><?php the_date(); ?></p>
            <img src ="<?php bloginfo('template_directory'); ?     >/images/midpic.jpg" width="200px" height="118px"/> 
            <h5><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h5>
            <p><?php the_excerpt(); ?></p>
        </div>
    </div>

<!--<?php if (function_exists('dynamic_sidebar') && dynamic_sidebar('Sidebar   Widgets')) : else : ?>-->
    <!-- All this stuff in here only shows up if you DON'T have any widgets active in this zone --> 
<!--<?php endif; ?>-->

</section> <!--End of Section-->

<?php get_sidebar(); ?>

<?php get_footer(); ?> 
```

所以我的问题是博客和日期在不正确时显示，但现在它在 home.php 中并且格式正确，php the_date 和 php the_excerpt 没有显示。关于哪个页面显示我的博客的任何规格？仅供参考，我在 index.php 和 home.php 中都试过了，没有骰子。但是，如果我将主要内容放回侧边栏中，一切都很好。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T01:49:45.463

也许我错过了一些东西，但是 home.php 是用来做什么的？通常单个帖子模板文件称为single.php。

此外，对于完整的帖子，您应该使用`<?php the_content(); ?>`.

关于[the_excerpt()](http://codex.wordpress.org/Excerpt)和[the_content()](http://codex.wordpress.org/Function_Reference/the_content)的文档。

# jsp - 如何从jsp获取web.xml中servlet的init参数？

> ID：14742166
> 
> 赞同：4
> 
> 时间：2013-02-07T01:41:04.100
> 
> 标签：jsp

web.xml 是

```
<servlet>
    <servlet-name>index</servlet-name>
    <jsp-file>/index.jsp</jsp-file>
    <init-param>
        <param-name>heading</param-name>
        <param-value>This is heading</param-value>
    </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>index</servlet-name>
    <url-pattern>/index</url-pattern>
</servlet-mapping>. 
```

如何从 jsp 页面获取初始化参数“标题”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T10:00:35.060

```
<%=config.getInitParameter("heading")%> 
```

问候。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-09T22:18:50.000

知道了！我的 servlet 映射错误！正确的映射是...

```
<servlet>
    <servlet-name>index</servlet-name>
    <jsp-file>/index.jsp</jsp-file>
    <init-param>
        <param-name>heading</param-name>
        <param-value>This is heading</param-value>
    </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>index</servlet-name>
    <url-pattern>/index.jsp</url-pattern>
</servlet-mapping> 
```

现在，我们可以通过 "<%=config.getInitParameter("heading")%>" 或 "<%=getInitParameter("heading")%>" 来访问 init 参数。

谢谢彼得雷德。

# javascript - JavaScript 多实例

> ID：14742168
> 
> 赞同：0
> 
> 时间：2013-02-07T01:41:16.900
> 
> 标签：javascript, object, multiple-instances

我正在尝试创建 JavaScript“类”或对象的多个实例，但它似乎充当单例......有人可以帮助我使用以下代码吗？

```
 (function() {
            /*
             * Canvas object
             */
            var Canvas = function( el ) {
                _self = this;
                _self.el = el;
            }
            Canvas.prototype.init = function() {
                _self.el.style.backgroundColor = "#000";
                _self.el.addEventListener( "mousedown", _self.onMouseDown );
            }
            Canvas.prototype.onMouseDown = function() {
                console.log( 'onMouseDown: ', _self.el );
            }

            var cOne = new Canvas( document.getElementById('one') );
            var cTwo = new Canvas( document.getElementById('two') );
            cOne.init();
            cTwo.init();
        })(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T01:46:07.817

当不在`var`变量声明上使用时，它成为一个全局变量。因此，当您创建一个新实例时，它会更新全局变量。

这种方法的另一种方法是简单地创建`el`一个对象属性：

```
var Canvas = function(el) {
    this.el = el;
}; 
```

***[jsFiddle 演示](http://jsfiddle.net/k4EdA/)***

* * *

此外，您应该考虑将您的`.onMouseDown`方法绑定到当前对象。改用这个：

```
this.el.addEventListener(..., this.onMouseDown.bind(this)); 
```

或这个：

```
Canvas.prototype.init = function() {
    var self = this;
    ...
    this.el.addEventListener(..., function() {
        self.onMouseDown.call(self);
    });
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T01:46:08.650

```
var Canvas = function( el ) {
   var _self = this;
    _self.el = el;
}
Canvas.prototype.init = function() {
    this.el.style.backgroundColor = "#000";
    this.el.addEventListener( "mousedown", this.onMouseDown.bind(this) );
}
Canvas.prototype.onMouseDown = function() {
    console.log( 'onMouseDown: ', this.el );
} 
```

不`var`，你让 _self 成为一个全球性的 val

# regex - 正则表达式 - 替换

> ID：14742169
> 
> 赞同：0
> 
> 时间：2013-02-07T01:41:23.103
> 
> 标签：regex, perl

我有点像 perl 菜鸟，并试图弄清楚如何从一段文本中去除一些零。该行看起来像这样：

```
76.000 to 80.000 
```

我正在尝试删除零以使其看起来像这样

```
76.0 to 80.0 
```

但不能为我的生活得到正则表达式的工作。

这就是我所拥有的，

```
if ($data =~ m/00/) # This is working

{

   $data = s/(.*)\00(\s\[to]\s)(.*)\00/($1)($3)($4)/; # This isn't

} 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T02:28:42.247

这是在字符串中截断浮点数的通用方法：

```
s/([\d.]+)/ sprintf '%.1f', $1 /ge 
```

通过使用评估，使用`sprintf`内部替换来格式化捕获的任何内容。请注意，这会将所有数字强制转换为这种格式。

处理问题的更具体的方法是

```
s/\d+\.0\K0*//g 
```

使用`\K`(keep) 转义来保留后跟句点和零的数字，并删除该字符串之后的所有后续零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T01:45:24.093

简单地说：

```
$data =~ s/0+$/0/; 
```

# python - Django文本格式，标记？降价？

> ID：14742170
> 
> 赞同：0
> 
> 时间：2013-02-07T01:41:31.683
> 
> 标签：python, django

我对使用 Django 为自己创建一个小型旅游博客非常感兴趣。我对使用 Django 而不是 Wordpress 之类的东西更感兴趣的原因有几个。一是我有兴趣掌握所有细节并最终创建一些看起来不像 wordpress 博客的东西，二是我想要几个博客，每个我访问的地方都有一个，这是t 本机由 wordpress 处理。

问题是，当我在国外时，我希望能够键入一个至少会自动为我创建段落标签的博客，并处理 Wordpress 为您所做的许多小型 html 格式设置。这样的事情的常见工作流程是什么？我不想要像 TinyMCE 这样疯狂的东西，但必须输入每一个小 html 标记。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T03:14:21.820

There are a lot of options out there. Markdown([http://code.google.com/p/python-markdown2/](http://code.google.com/p/python-markdown2/)) is an obvious one.

But you could also look at [https://github.com/syrusakbary/pyjade](https://github.com/syrusakbary/pyjade) which provides a simplified structure. I think that Markdown is a bit more forgiving and easier to work with.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T03:18:13.563

你可以看看CKEditor。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T08:47:13.830

我可以想到两种方法，第一种是在部分模板中[关闭自动转义。](https://docs.djangoproject.com/en/dev/ref/templates/builtins/)

第二个是使用它为[Textile](http://en.wikipedia.org/wiki/Textile_%28markup_language%29)、[Markdown](http://en.wikipedia.org/wiki/Markdown)和[reStructured Text](http://en.wikipedia.org/wiki/ReStructuredText)[`django.contrib.markup`](https://docs.djangoproject.com/en/dev/ref/contrib/markup/)提供过滤器。您需要分别安装[PyTextile](http://loopcore.com/python-textile/)、[Python-markdown](http://pypi.python.org/pypi/Markdown)或[doc-utils](http://docutils.sf.net/)。

**编辑**

刚刚注意到`django.contrib.markup`在 Django 1.5 中已弃用，“主要是因为 3d 方库的安全问题”，但是，如果输入是可信的（也就是说，您信任所有用户），您可以`django.contrib.markup`从 Django 1.4 复制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T01:51:54.777

如果您不想要任何富文本编辑器，我个人建议将 reStructuredText 与 Sphinx 一起使用：[http://sphinx-doc.org/](http://sphinx-doc.org/)

它是一种非常完整的标记语言，带有几乎可以支持任何东西的扩展。整个 Python 文档都是用 reStructuredText 编写的，而现在是 Sphinx 生成的 html 输出。

执行类似操作的项目示例：http: [//tinkerer.me/](http://tinkerer.me/)

# vb.net - 将集合中的项目添加到组合框

> ID：14742171
> 
> 赞同：1
> 
> 时间：2013-02-07T01:41:44.423
> 
> 标签：vb.net, class, collections, combobox

我有一个从文本文件中读取的类，并将其添加到集合中。我试图弄清楚如何在加载程序时从集合中读取以填充组合框。

计费数据类

```
Public ReadOnly Property Clients As Collection
    Get
        Return mClients
    End Get
End Property

Sub New()

    mClientFile = OpenText("clients.txt")

    Dim mClients As New Collection

    While Not mClientFile.EndOfStream
        mClients.Add(mClientFile.ReadLine())
    End While

    mClientFile.Close() 
```

主窗体

```
Private Sub frmMain_Load(sender As Object, e As EventArgs) Handles MyBase.Load

    client = New BillingData()

    Dim i As Integer
    While i < client.Clients.Count
        cbClient.Items.AddRange(client.Clients(i))
        i = i + 1
    End While
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T03:08:05.923

`frmMain_Load`我对子程序进行了 3 处更改。

1.  将计数器初始化`i`为 1。
2.  将 while 循环条件更改为`<=`.
3.  用来`Add`代替`AddRange`.

    ```
    Private Sub frmMain_Load(sender As Object, e As EventArgs) Handles MyBase.Load

        client = New BillingData()

        Dim i As Integer = 1
        While i <= client.Clients.Count
            cbClient.Items.Add(client.Clients(i))
            i = i + 1
        End While

    End Sub 
    ```

第一个更改（将 i 初始化为 1）需要注意的一件有趣的事情：索引 0 处的 Clients 的值是“基于 1 的数组的空占位符”。这基本上意味着集合从索引 1 开始。代码会抛出一个永远不会被捕获的幻像异常——这在 VB.net 表单加载例程中很典型。您可以通过在加载代码中设置断点来测试它，并查看它永远不会到达该行`i = i + 1`。如果您将代码放在按钮单击事件中，您会看到异常中的代码中断。这个故事的寓意是要小心你放在表单加载例程上的任何代码，因为如果代码中有错误，你并不总是能立即得到反馈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T01:51:20.593

您可以尝试将您的 Collection 添加到 ComboBox 的[DataSource](http://msdn.microsoft.com/en-us/library/x8160f6f%28v=vs.100%29.aspx)中。如果您的问题是您的 Collection 在添加到 ComboBox 之前未初始化，您可以向您的 BillingData 类添加一个事件，该事件在数据准备好时引发。然后，您可以将集合添加到事件处理程序中的 ComboBox。

```
cbClient.DataSource = client.Clients 
```

# ffmpeg - ffmpeg 将 mov 转换为 flv

> ID：14742172
> 
> 赞同：2
> 
> 时间：2013-02-07T01:42:07.153
> 
> 标签：ffmpeg

我正在尝试将 mov 视频转换为 flv，但在下面不断出现这些错误。我使用了 2 个命令，都在下面。

```
ffmpeg -y -i video.mov -deinterlace -acodec copy -r 25 -qmin 3 -qmax 6 video.flv

FFmpeg version SVN-r16573, Copyright (c) 2000-2009 Fabrice Bellard, et al.
configuration: --extra-cflags=-fno-common --enable-memalign-hack --enable-pthreads --enable-libmp3lame --enable-libxvid --enable-libvorbis --enable-libtheora --enable-libspeex --enable-libfaac --enable-libgsm --enable-libx264 --enable-libschroedinger --enable-avisynth --enable-swscale --enable-gpl
libavutil     49.12\. 0 / 49.12\. 0
libavcodec    52.10\. 0 / 52.10\. 0
libavformat   52.23\. 1 / 52.23\. 1
libavdevice   52\. 1\. 0 / 52\. 1\. 0
libswscale     0\. 6\. 1 /  0\. 6\. 1
built on Jan 13 2009 02:57:09, gcc: 4.2.4
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'vid\video.mov':
Duration: 00:03:16.00, start: 0.000000, bitrate: 398 kb/s
Stream #0.0(eng): Video: mpeg4, yuv420p, 800x600 [PAR 1:1 DAR 4:3], 30.00 tb(r)
Stream #0.1(eng): Audio: pcm_u8, 8000 Hz, mono, s16, 64 kb/s
Output #0, flv, to 'vid\video.flv':
Stream #0.0(eng): Video: flv, yuv420p, 800x600 [PAR 1:1 DAR 4:3], q=3-6, 200 kb/s, 25.00 tb(c)
Stream #0.1(eng): Audio: pcm_u8, 8000 Hz, mono, s16, 64 kb/s
Stream mapping:
Stream #0.0 -> #0.0
Stream #0.1 -> #0.1
[NULL @ 0x1714390]codec not compatible with flv
Could not write header for output file #0 (incorrect codec parameters ?) 
```

第二条命令：

```
ffmpeg -y -i video.mov -deinterlace -ar 44100 -r 25 -qmin 3 -qmax 6 video.flv 
```

音频重采样器仅适用于每个样本 16 位，欢迎使用补丁。

使用较新版本的 ffmpeg：

```
ffmpeg version N-49610-gc2dd5a1 Copyright (c) 2000-2013 the FFmpeg developers
built on Feb  5 2013 13:20:59 with gcc 4.7.2 (GCC)
configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-avisynth --enable-bzlib --enable-fontconfig --enable-frei0r --enable-gnutls --enable-libass --enable-libbluray --enable-libcaca --enable-libfreetype --enable-libgsm --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvo-aacenc --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libx264 --enable-libxavs --enable-libxvid --enable-zlib
  libavutil      52\. 17.101 / 52\. 17.101
  libavcodec     54\. 91.100 / 54\. 91.100
  libavformat    54\. 61.104 / 54\. 61.104
  libavdevice    54\.  3.103 / 54\.  3.103
  libavfilter     3\. 35.101 /  3\. 35.101
  libswscale      2\.  2.100 /  2\.  2.100
  libswresample   0\. 17.102 /  0\. 17.102
  libpostproc    52\.  2.100 / 52\.  2.100
Guessed Channel Layout for  Input Stream #0.1 : mono
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'vid\video.mov':
  Metadata:
    major_brand     : qt  
    minor_version   : 512
    compatible_brands: qt  
    creation_time   : 1970-01-01 00:00:00
  Duration: 00:02:50.39, start: 0.000000, bitrate: 370 kb/s
    Stream #0:0(eng): Video: mpeg4 (Simple Profile) (mp4v / 0x7634706D), yuv420p, 1366x768 [SAR 1:1 DAR 683:384], 308 kb/s, 11.50 fps, 11.50 tbr, 23 tbn, 23 tbc
    Metadata:
      creation_time   : 1970-01-01 00:00:00
      handler_name    : DataHandler
    Stream #0:1(eng): Audio: pcm_u8 (raw  / 0x20776172), 8000 Hz, mono, u8, 64 kb/s
    Metadata:
      creation_time   : 1970-01-01 00:00:00
      handler_name    : DataHandler
[flv @ 026347a0] FLV does not support sample rate 8000, choose from (44100, 22050, 11025)
Output #0, flv, to 'vid\video.flv':
  Metadata:
    major_brand     : qt  
    minor_version   : 512
compatible_brands: qt  
    encoder         : Lavf54.61.104
    Stream #0:0(eng): Video: flv1 ([2][0][0][0] / 0x0002), yuv420p, 1366x768 [SAR 1:1 DAR 683:384], q=2-31, 200 kb/s, 1k tbn, 11.50 tbc
    Metadata:
      creation_time   : 1970-01-01 00:00:00
      handler_name    : DataHandler
    Stream #0:1(eng): Audio: mp3 ([2][0][0][0] / 0x0002), 8000 Hz, mono, s16p
    Metadata:
      creation_time   : 1970-01-01 00:00:00
      handler_name    : DataHandler
Stream mapping:
  Stream #0:0 -> #0:0 (mpeg4 -> flv)
  Stream #0:1 -> #0:1 (pcm_u8 -> libmp3lame)
Could not write header for output file #0 (incorrect codec parameters ?): Invalid data found when processing input 
```

请再做一件事：如果我使用这个较新版本的 ffmpeg 使用以下命令创建视频，我会得到一个显示非常模糊的视频。这就像一个空白屏幕上的几个黑点：

```
ffmpeg -i img%d.png -i audio.wav -acodec copy output.mov 
```

这种显示的原因可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T01:51:13.327

你能试试简单的：

```
ffmpeg -y -i video.mov video.flv 
```

在第一个命令中，音频编解码器`pcm_u8`与`flv`. 由于您使用`-acodec copy`了 ，因此会导致错误。在第二个命令中，重采样导致了问题。

# c# - REGEX 字符集替换

> ID：14742173
> 
> 赞同：-1
> 
> 时间：2013-02-07T01:42:20.850
> 
> 标签：c#, regex

我需要一个 RegEx 模式，它允许我将一组字符替换为另一组对应的字符。例如：set [abcdefg]，应该用 set [1234567] 替换......所以在“bag”字符串中，我希望我的替换是“217”。

```
Regex regX = new Regex("([abcdefg])([1234567])");
string result = regX.Replace("bag", "$1$2"); 
```

我的结果与来源相同。我的替换模式应该是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T02:16:08.413

像这样的东西会比正则表达式好得多：

```
var fromCharacters = "abcdefghijklmnopqrstuvwxyz";
var toCharacters = "12345678901234567890123456";

var myString = "bag";

var sb = new StringBuilder(myString.Length);
for (int i = 0; i < myString.Length; ++i)
{
    sb.Append(toCharacters[fromCharacters.IndexOf(myString[i])]);
}

sb.ToString().Dump(); 
```

如果你想，你可以做类似的事情，例如，'j'变成'10'，但你需要一个字符串数组，而不是能够将字符串用作字符数组。

我不确定您将如何使用正则表达式执行此操作，但我知道您不应该这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T02:16:40.113

```
string result = Regex.Replace("abcdefghiABCDEFGHI", "[a-zA-Z]", 
    m => (('a' <=  m.Value[0] && m.Value[0] <= 'z' 
               ? m.Value[0] - 'a' 
               : m.Value[0] - 'A') + 1).ToString());

Console.WriteLine(result);
// 123456789123456789 
```

我使用`MatchEvaluator`委托将每个匹配项替换为相应的值。有关它的另一个示例，请参见[this](https://stackoverflow.com/questions/14699783/what-is-a-good-pattern-to-processes-each-individual-regex-match-through-a-method/14699923#14699923)。

您的模式的问题是没有人期望输入字符串中的数字，因此它不应该成为模式的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T08:50:48.523

我会`Dictionary<char, char>`在这里使用 for chars 匹配：

```
var dict = "abcdefg"
    .Zip("1234567", (k, v) => new { k, v })
    .ToDictionary(i => i.k, i => i.v);
var result = string.Concat("bag".Select(c => dict[c])); 
```

这会让你：

```
217 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-07T01:58:22.823

你还没有提到一种语言，我会告诉你如何在 php 中做到这一点。您可以根据自己的需要进行修复。在您更换的情况下，您的参数应该是数组。
$num = 数组（“1”、“2”、“3”、“4”、“5”、“6”、“7”）；
$chr = 数组（“a”、“b”、“c”、“d”、“e”、“f”、“g”）；

然后你可以使用 str_replace 或 preg_replace
$str = "This is a sample text";
回声 str_replace($chr, $num, $str);

在这种情况下，您可以将正则表达式用作模式的第一个参数，但不能用于字符串。

# mysql - 如何从左连接中删除多余的字段

> ID：14742177
> 
> 赞同：0
> 
> 时间：2013-02-07T01:42:45.387
> 
> 标签：mysql, sql, jsp

我有以下查询以从两个不同的表中获取消息和图像。这里一条消息可以有多个图像

为此，我编写了以下查询，该查询正常工作并显示以下结果

```
select msg.messageid, msg.message, msg.sentby, msg.adddate, 
p_i.image_id ,p_i.small_pic_path 
from user_messages as msg
LEFT JOIN post_images as p_i
on msg.messageid=p_i.messageid
where msg.messageid='zpx1btrpvpa1360154523078'
order by msg.adddate desc 
```

输出是

```
 messageid  message  sentby  adddate  image_id  small_pic_path
   1         abc      aa      12/2/12   6          /sdf/sdf
   1         abc      aa      12/2/12   7          /asdf/df
   1         abc      aa      12/2/12   8          /cxd/sxc
   1         abc      aa      12/2/12   9          /zz/szz 
```

这里**adddate 发送的 messageid 消息** 是重复的，并且在显示在 jsp 页面中时显示总共 4 条不同的消息。

但是我想显示 4 imageid 和 small_pic_path（基于消息 id）以及相关的消息详细信息

我想显示为

1) Message sentBy
all small_pic_path of messag id of this message

1) Message sentBy
all small_pic_path of messag id of this message

2) Message sentBy
all small_pic_path of messag id of this message

3) Message sentBy
all small_pic_path of messag id of this message

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:02:06.720

在没有真正了解您的要求的情况下，您写道：

> 但我想用一条消息详细信息显示 4 个 imageid 和 small_pic_path

你想如何显示这些记录？

假设您的意思是在同一行，然后考虑使用`GROUP_CONCAT`：

```
SELECT msg.messageid, msg.message, msg.sentby, msg.adddate, 
  group_concat(p_i.image_id separator ';') imageids,
  group_concat(p_i.small_pic_path separator ';') picpaths
FROM ... 
```

这是一个演示结果 的[SQL Fiddle 。](http://sqlfiddle.com/#!2/aba20/3)

如果您想以不同的方式显示结果，您可能应该通过 UI 来处理。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T01:47:03.190

这是使用 a 时的预期行为`JOIN`，您会得到叉积。

如果要折叠行，请`GROUP BY`与适当的列一起使用。在您的情况下，它可能是：

```
GROUP BY messageid, message, sentry, adddate 
```

# java - SAX 解析器不能很好地处理 HTML 片段

> ID：14742178
> 
> 赞同：0
> 
> 时间：2013-02-07T01:42:46.700
> 
> 标签：java, html, xml, saxparser

我有一些 HTML 信息作为 XML 文件中字符值的一部分存储在不同的地方。我有一个问题发生在哪里

```
2 &lt;= BFE &lt; 3 
```

返回为

```
2 
<
= BFE 
<
 3 
```

我需要 A) 不转换 HTML 代码并 B) 将其全部作为一个字符串处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T02:06:20.153

A）你不能，这就是 xml 解析的工作原理

B）这是 SAX 解析 101：您需要`characters()`在相关的开始和结束元素调用之间累积多次调用。

# ios - 如果dispatch_sync不使用不同的线程，会不会更快？

> ID：14742184
> 
> 赞同：0
> 
> 时间：2013-02-07T01:43:45.200
> 
> 标签：ios, grand-central-dispatch

我正在运行这段代码

```
dispatch_sync(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
      NSLog(@"Main Thread? %d", [NSThread isMainThread]);
      // non-trivial non-UI code here

}); 
```

表明`NSLog`我实际上在主线程上，但是......我的印象是，如果我使用非平凡的非 UI 代码运行得更快`dispatch_sync`（而不是什么都不用）。

**如果它在主线程上运行，有什么方法可以更快吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T01:54:38.287

全局并发 GCD 队列没有排序，将其中一个传递给 dispatch_sync() 是一个 noop 并且在这种情况下 dispatch_sync() 将直接执行指定的块，就像你写的一样

```
^{...}(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T01:53:06.887

通过限制运行的线程数，从技术上讲可以确保您可以提高性能，但不建议这样做。如果您的任务需要花费大量时间（实质上是指用户体验会受到无响应 UI 的影响），那么只需使用新线程 using`dispatch_async`或内联块（闭包）。最好的选择是优化您的算法以提高您的任务的长度。

通过在主线程上运行，您不会注意到速度上有足够显着的差异。

# ruby - 将 IPv6 地址转换为编码字符串并返回 Ruby？

> ID：14742185
> 
> 赞同：1
> 
> 时间：2013-02-07T01:43:47.680
> 
> 标签：ruby, ipv6

如何将 IPv6 地址转换为二进制表示并返回？

我只能将其转换为数字，然后尝试将其转换为字符串。

```
IPAddr.new('fe80::c')
# => #<IPAddr: IPv6:fe80:0000:0000:0000:0000:0000:0000:000c/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff>

IPAddr.new('fe80::c').to_i
# => 338288524927261089654018896841347694604 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T01:43:47.680

正如@tadman 指出的那样，将其作为数字处理是没有意义的。将其转换为二进制是理想的。

从**IPv6 转换为字节**：

```
IPAddr.new('fe80::c').hton
# => "\xFE\x80\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\f" 
```

从**字节转换为 IPv6**：

```
IPAddr::new_ntoh(_)
# => #<IPAddr: IPv6:fe80:0000:0000:0000:0000:0000:0000:000c/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-08T12:04:59.817

我敢肯定，这不是最优雅的解决方案，但似乎对我有用：

```
 my_ip = IPAddr.new('fe80::c').to_i.to_s(16) 
```

这将为您提供一个字符串，其中包含十六进制形式的完整扩展 IPv6 地址。

然后可以使用以下函数将十六进制字符串转换为二进制：

```
 def hex_to_bin(s_h) # convert readable hex to binary
     s_h.scan(/../).map { |z| z.hex.chr }.join
 end 
```

# typescript - 声明一个 HTMLElement 打字稿

> ID：14742194
> 
> 赞同：69
> 
> 时间：2013-02-07T01:44:12.863
> 
> 标签：typescript

在 Visual Studio 的默认 TypeScript HTML 应用程序中，我添加了

```
HTMLElement 
```

到 window.onload 事件处理程序的第一行，认为我可以为“el”提供一个类型。

因此：

```
class Greeter {
    element: HTMLElement;
    span: HTMLElement;
    timerToken: number;

    constructor (element: HTMLElement) { 
        this.element = element;
        this.element.innerText += "The time is: ";
        this.span = document.createElement('span');
        this.element.appendChild(this.span);
        this.span.innerText = new Date().toUTCString();
    }

    start() {
        this.timerToken = setInterval(() => this.span.innerText = new Date().toUTCString(), 500);
    }

    stop() {
        clearTimeout(this.timerToken);
    }

}

window.onload = () => {
    HTMLElement el = document.getElementById('content');
    var greeter = new Greeter(el);
    greeter.start();
}; 
```

我收到一个错误

> 编译错误。有关详细信息，请参阅错误列表 .../app.ts (25,17): Expected ';'

任何线索为什么？我怀疑我遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-02-07T02:25:51.683

类型在 TypeScript 中的名称之后，部分原因是类型是可选的*。*

所以你的线：

```
HTMLElement el = document.getElementById('content'); 
```

需要改为：

```
const el: HTMLElement = document.getElementById('content'); 
```

早在 2013 年，类型`HTMLElement`就会从 的返回值中推断出来，*如果您不使用严格的 null 检查*（但您*应该*在 TypeScript 中使用严格模式）`getElementById`，情况仍然如此。如果您正在执行严格的 null 检查，您会发现返回类型已从 更改为。更改使类型更正确，因为您并不总是找到一个元素。**`getElementById``HTMLElement``HTMLElement | null`**

 **所以当使用类型模式时，编译器会鼓励你使用类型断言来确保你找到了一个元素。像这样：

```
const el: HTMLElement | null = document.getElementById('content');

if (el) {
  const definitelyAnElement: HTMLElement = el;
} 
```

我已经包含了这些类型来演示运行代码时会发生什么。有趣的是，语句中`el`的类型更窄，因为您消除了它为空的可能性。`HTMLElement``if`

您可以使用相同的结果类型执行完全相同的操作，而无需任何类型注释。它们将由编译器推断，从而节省所有额外的输入：

```
const el = document.getElementById('content');

if (el) {
  const definitelyAnElement = el;
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-07T01:56:24.773

好的：奇怪的语法！

```
var el: HTMLElement = document.getElementById('content'); 
```

解决问题。我想知道为什么这个例子一开始没有这样做？

完整代码：

```
class Greeter {
    element: HTMLElement;
    span: HTMLElement;
    timerToken: number;

    constructor (element: HTMLElement) { 
        this.element = element;
        this.element.innerText += "The time is: ";
        this.span = document.createElement('span');
        this.element.appendChild(this.span);
        this.span.innerText = new Date().toUTCString();
    }

    start() {
        this.timerToken = setInterval(() => this.span.innerText = new Date().toUTCString(), 500);
    }

    stop() {
        clearTimeout(this.timerToken);
    }

}

window.onload = () => {
    var el: HTMLElement = document.getElementById('content');
    var greeter = new Greeter(el);
    greeter.start();
}; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-06-08T15:44:04.780

在 JavaScript 中，您使用关键字 var、let 或 function 来声明变量或函数。在 TypeScript 类中，您声明的类成员或方法不带这些关键字，后跟冒号和该类成员的类型或接口。

它只是语法糖，没有区别：

```
var el: HTMLElement = document.getElementById('content'); 
```

和：

```
var el = document.getElementById('content'); 
```

另一方面，因为您指定了类型，所以您可以获得 HTMLElement 对象的所有信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-09-22T17:43:38.183

尝试像这样为 elementHTML 使用类型：

```
window.onload = () => {
    var el= <HTMLElement>document.getElementById('content');
    var greeter = new Greeter(el);
    greeter.start();
};
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-01T20:27:03.970

请注意， const 声明是块范围的。

```
const el: HTMLElement | null = document.getElementById('content');

if (el) {
  const definitelyAnElement: HTMLElement = el;
} 
```

因此，在 {} 之外无法访问 absoluteAnElement 的值。

（我会在上面发表评论，但显然我没有足够的声誉。）**

# security - 应用于 HSM 交互安全

> ID：14742200
> 
> 赞同：4
> 
> 时间：2013-02-07T01:44:52.657
> 
> 标签：security, hsm

我觉得我错过了什么。我知道 HSM 可以为您的密钥、加密数据等提供 100% 的防弹保护。但是，在您访问 HSM 并将您的机密复制到用户内存后，如何防止攻击者窃取您的敏感数据？或者例如，只是使用相同的 API 来访问模块？应用程序身份验证如何工作？如果它基于简单的东西，比如密码，为什么攻击者不能从内存中窃取密码，登录到 HSM 并得到他想要的？另外，如果内核被入侵，我认为它可以监听或篡改进程和 HSM 之间的任何通信，对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T20:11:49.770

您对此的担忧是对的 - HSM 不是万能药，能够对 HSM 进行身份验证和使用 HSM 的受感染服务器是一个真正的风险，[正如 Diginotar 巧妙地证明的那样](http://www.rijksoverheid.nl/bestanden/documenten-en-publicaties/rapporten/2012/08/13/black-tulip-update/black-tulip-update.pdf)。

> 应用程序身份验证如何工作？

不同的 HSM 提供不同的身份验证选项，例如物理令牌（如智能卡）、物理引脚条目、逻辑令牌（在内存密钥中）、用户定义的自定义解决方案等。

> 但是，在您访问 HSM 并将您的机密复制到用户内存后，是什么阻止了攻击者窃取您的敏感数据呢？

理想情况下，当使用 HSM 实施解决方案时，敏感密钥永远不会暴露在 HSM 之外——您让 HSM*使用*密钥（例如进行签名/加密），而不是让 HSM 为您提供密钥。

> 登录 HSM 并得到他想要的？

HSM 允许您保护密钥，这样就无法从 HSM 中导出它们（即使您拥有用户/管理员的所有凭据）。

> 另外，如果内核被入侵，我认为它可以监听或篡改进程和 HSM 之间的任何通信，对吗？

是的; 应用程序和 HSM 之间可能存在受密码保护的通道，但最终，具有受损内核的机器应被视为攻击者控制的机器 - 机器可以合法执行的任何操作，攻击者都可以非法使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-02T09:45:05.957

总体而言，HSM 是一种用于生成、存储和保护您的密钥的物理设备。

现代密码学最大的噩梦是密钥妥协，而 HSM 是对抗它的正确解决方案。HSM 通常用于大型组织和金融部门。人们选择使用 HSM 的另一个原因是出于审计或合规性要求（例如 PCI-DSS）

HSM 通过使用令牌（例如，智能卡）或密码短语对密钥加载提供多因素身份验证。即使您已经获得了连接到它的服务器的访问权限，如果没有获得所有因素，您仍然无法获得对密钥的访问权限。

对于密码窃取部分，有一些 E2EE 密码保护方案，厂商将密码认证逻辑构建到 HSM 安全内存中，因此解密后的凭证只能在 HSM 内部使用，应用程序只知道认证结果。通过这种方式，密码始终受到很好的保护。

# java - 设置内容窗格不起作用

> ID：14742201
> 
> 赞同：1
> 
> 时间：2013-02-07T01:44:54.123
> 
> 标签：java, swing, awt, java-2d

我昨天问了一个类似的问题，但是在对我希望完成的事情进行了进一步研究之后，我有理由相信所回答的问题是不充分的，并且本身值得一个新问题，因为昨天的问题将解决一个不同的问题并帮助其他人，但不是我的特定问题问题。[在此处](https://stackoverflow.com/questions/14702969/canvas-fillrect-not-filling-defined-canvas)链接到上一个问题。

我想要完成的是将 JFrame 的 contentPane 设置为 的大小`200,200`，但是在绘制两个不同的矩形后，您会注意到明显的差异。请参阅随附的 SSCCE 和随附的图片。

`Canvas.getWidth()/getHeight`简单地说，我想`getContentPane.getWidth()/Height`返回我指定的尺寸`200,200`。

参考图片

![参考图片](../Images/4cc46c3d5fc1cf922cb884e062f1dd57.png)

SSCCE 示例

```
import java.awt.BorderLayout;
import java.awt.Canvas;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics2D;
import java.awt.image.BufferStrategy;

import javax.swing.JFrame;
import javax.swing.SwingUtilities;

@SuppressWarnings("serial")
public class SSCCE extends Canvas implements Runnable {

    private JFrame frame;
    private BufferStrategy bufferStrategy;
    private Graphics2D graphics;
    private boolean running = false;

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {             
                SSCCE game = new SSCCE();
                game.setPreferredSize(new Dimension(200,200));
                game.setFocusable(true);
                game.setIgnoreRepaint(true);
                game.frame = new JFrame("SSCCE");
                game.frame.setLayout(new BorderLayout());
                game.frame.getContentPane().setPreferredSize(new Dimension(200,200));
                game.frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                game.frame.add(game, BorderLayout.CENTER);
                game.frame.pack();
                game.frame.setIgnoreRepaint(true);
                game.frame.setResizable(false);
                game.frame.setLocationRelativeTo(null);
                game.frame.setVisible(true);
                game.start();
            }
        });
    }

    public synchronized void start() {
        this.createBufferStrategy(2);
        bufferStrategy = this.getBufferStrategy();
        graphics = (Graphics2D) bufferStrategy.getDrawGraphics();
        Thread thread = new Thread(this, "main");
        thread.start();
        running = true;
    }

    @Override
    public void run() {
        while (running) {
            graphics = (Graphics2D) bufferStrategy.getDrawGraphics(); 
            graphics.setColor(Color.RED);
            graphics.fillRect(0, 0, 210, 210);
            graphics.setColor(Color.GREEN);
            graphics.fillRect(0, 0, 200, 200);
            graphics.setColor(Color.BLACK);
            graphics.drawString("Specified Width: 200", 0, 10);
            graphics.drawString("Specified Height: 200", 0, 20);
            graphics.drawString("Canvas Width: " + getWidth(), 0, 30);
            graphics.drawString("Canvas Height: " + getHeight(), 0, 40);
            graphics.drawString("Content Pane Width: " + frame.getContentPane().getWidth(), 0, 50);
            graphics.drawString("Content Pane Width: " + frame.getContentPane().getHeight(), 0, 60);
            graphics.drawString("Red Rectangle = 210,200", 0, 70);
            graphics.drawString("Green Retangle = 200,200", 0, 80);
            graphics.dispose();
            bufferStrategy.show();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T02:53:46.640

据我所知（从示例和其他帖子），问题是框架边框。我能找到的每个示例都将使用一个`JWindow`或未装饰的框架......

![在此处输入图像描述](../Images/9d9e68e2f747d3ca26b3ec9e40738d87.png)

混合重量和重量轻的组件只会导致流泪，我建议不要`Canvas`直接在框架中添加。

Swing 本身也是双缓冲的。除非您有特殊问题，否则我建议您尝试在正常的 Swing 管道中进行简单的绘制...

**更新**

好吧，我有一些坏消息，但我不确定是谁；）

我能够从[这里](https://gamedev.stackexchange.com/questions/34090/java2d-game-flickering/34092#34092)改编这个例子并让它工作......

![在此处输入图像描述](../Images/c427a12caed386179e4d646a0ace3954.png)

```
public class Test {

    public static void main(String[] args) {
        new Test();
    }

    public Test() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                Canvas canvas = new Canvas();
                canvas.setPreferredSize(new Dimension(200, 200));

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setIgnoreRepaint(true);
                frame.add(canvas);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                canvas.createBufferStrategy(2);

                Thread t = new Thread(new Painter(canvas));
                t.setDaemon(true);
                t.start();

            }
        });
    }

    public class Painter implements Runnable {

        private Canvas canvas;

        public Painter(Canvas canvas) {
            this.canvas = canvas;
        }

        @Override
        public void run() {
            while (true) {
                BufferStrategy bs = canvas.getBufferStrategy();
                Graphics2D g2d = (Graphics2D) bs.getDrawGraphics();
                g2d.setColor(Color.RED);
                g2d.fillRect(0, 0, canvas.getWidth(), canvas.getHeight());

                int width = canvas.getWidth();
                int height = canvas.getHeight();

                FontMetrics fm = g2d.getFontMetrics();
                g2d.setColor(Color.BLACK);
                g2d.drawString("Size = " + width + "x" + height, 0, fm.getAscent());

                Window w = SwingUtilities.windowForComponent(canvas);
                g2d.drawString("Frame Size = " + w.getWidth() + "x" + w.getHeight(), 0, (fm.getHeight()) + fm.getAscent());

                g2d.dispose();
                bs.show();

                try {
                    Thread.sleep(30);
                } catch (InterruptedException ex) {
                }
            }
        }
    }
} 
```

**更多坏消息**

在多玩了一些代码之后，我终于可以让你的例子工作了。我只需要删除`game.frame.setResizable(false);`：P

**最后，好消息**

先打电话`setResizable`再打电话包...

# jquery - 将 HTML 插入 div 类

> ID：14742212
> 
> 赞同：1
> 
> 时间：2013-02-07T01:46:27.570
> 
> 标签：jquery, var, css-selectors

我有一系列通过 jquery 显示的 div `var`，然后`nth-child`当浏览器宽度发生变化时，这些 div 会重新定位。

这是显示 div 的 var 代码。

```
var theDivs={
"div1":$("<div />").addClass("test"),
"div2":$("<div />").addClass("test2"),
"div3":$("<div />").addClass("test3"),
"div4":$("<div />").addClass("test4")
}; 
```

所以我正在创建 4 个 div，然后添加一系列“测试”类。这很好用，但不仅仅是添加一个 div 类名，我希望能够添加一些 html，就像`.after`代码一样.. 例如：

```
$( '.somedivclass' ).after( '<div class="test"><a href="#"></a></div>'); 
```

这是我当前代码的完整示例（调整 HTML 窗口的大小以查看 divs nth-child 位置的变化）：

[http://jsfiddle.net/EUqEm/85/](http://jsfiddle.net/EUqEm/85/)

所以，是的，我希望能够在测试 div 中添加我自己的 html 代码，同时使其与我拥有的当前代码（请参阅我的 jsfiddle）一起工作，其中 div 在浏览器宽度更改时更改位置。

任何输入或帮助都会很棒，一个工作的 jquery 会更好！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:52:55.920

您可以使用[`.html()`](http://api.jquery.com/html/)将 HTML 内容添加到您的`div`元素。

```
var theDivs={
    "div1":$("<div />").addClass("test").html('<span>RED</span>'),
    "div2":$("<div />").addClass("test2").html('<span>BLUE</span>'),
    "div3":$("<div />").addClass("test3").html('<span>GREEN</span>'),
    "div4":$("<div />").addClass("test4").html('<span>PURPLE</span>')
}; 
```

为确保在调整大小时删除内容，您可以使用[`.empty()`](http://api.jquery.com/empty/).

```
$("#wrapper div").attr("class","inner").empty(); 
```

[jsfiddle](http://jsfiddle.net/H5REk/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T01:51:43.297

你是这个意思？

```
var theDivs={
"div1":$("<div />").addClass("test").text('Some text'),
"div2":$("<div />").addClass("test2").text('Some text'),
"div3":$("<div />").addClass("test3").text('Some text'),
"div4":$("<div />").addClass("test4").text('Some text')
}; 
```

# cassandra - Cassandra 获得增值

> ID：14742221
> 
> 赞同：1
> 
> 时间：2013-02-07T01:47:42.433
> 
> 标签：cassandra, phpcassa

我用计数器列在我的网站上计算帖子和许多其他内容，我有很多流量，例如每小时 10k+ 评论。

所以我想要实现的是一旦发布并且计数器增加了我想检索确切的值，但是由于两个用户很有可能同时请求该值我会得到重复，这很糟糕.

增加计数器后有什么方法可以检索精确值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:29:46.767

Cassandra 的计数器不支持通用原子计数器实现的“增量和获取”语义。所以你要问的是 Cassandra 的计数器是不可能的。原因是如果没有副本之间的协调以确保返回的值始终是最新的，这是不可能的。

为此，您将需要一个具有原子语义的分布式系统，例如 ZooKeeper。一个可以解决 ZooKeeper 问题的线程在这里： http: [//www.mail-archive.com/zookeeper-user@hadoop.apache.org/msg01967.html](http://www.mail-archive.com/zookeeper-user@hadoop.apache.org/msg01967.html)。

# performance - Delphi 7、Windows NT 服务、控制台应用程序

> ID：14742222
> 
> 赞同：1
> 
> 时间：2013-02-07T01:47:57.697
> 
> 标签：performance, delphi, delphi-7

我有一个 Delphi 7 32 位应用程序。视窗 7 64 位。

一切运行良好。我最近一直在调查我注意到的性能问题。

应用程序的简要概述 -->

有一个命令行/控制台应用程序可执行文件，用 Delphi 编写。这将创建一组多线程连接并执行数据库工作。一个 NT 服务，用 Delphi 编写（调用命令行应用程序），基于它找到的作业计划。这是通过调用我们的 DLL 来完成的，它为命令行应用程序查找并执行 CreateProcess，并为其完成 WaitForSingleObject。实际上，该服务负责查找何时需要完成工作，并调用可执行/控制台应用程序来完成它。

这是我的问题，我似乎无法弄清楚。

如果我运行命令行应用程序，我得到的结果大约比 NT 服务通过 CreateProcess 调用它快 4 倍。这是相同的代码。一种是在 DOS 提示符下发布 EXE，另一种是 NT 服务，它加载一个 DLL，然后为同一个可执行文件调用 CreateProcess。

我要去香蕉。我看不出有任何理由。

到目前为止，我可以在任何系统配置上重现这一点。

到目前为止我注意到的（不科学，但肯定与 imo 相关）。

如果我用 CPU 时间和内核时间监控 CPU 内核，控制台应用程序在其执行的生命周期内只有一小部分内核时间。当调度程序服务运行它时，内核时间代表我得到的任何 CPU % 使用的 50-70%% 或更多。

一些实际结果（我相信其他一切实际上都无关紧要） - 控制台应用程序，通过命令行运行：26 秒 - 控制台应用程序，通过 CreateProcess 运行服务：113 秒

是什么赋予了？

我已经调查过 FastMM 可能没有被正确共享。我相信是的。我什至删除了它。同样的异常。我已经研究过 FastCode，FastMove 的东西在服务下可能不起作用（因为在启动时，它试图动态挂钩/替换核心 RTL 函数。从等式中删除它们，同样的异常。我已经考虑删除我们修补的 RTL (System.dcu/SysInit.dcu) 文件。没有乐趣。

一切都无济于事。

所以，我的问题（以及可能的原因征求）是......

NT 服务是否排除了执行自动化/挂钩替换功能的能力？Delphi 服务是否创建了会导致这种情况的东西？服务是否存在某种固有的开销——（而且数量巨大）？是否有其他人因为这种性质而使用的 FastMM、FastCode、FastMove 的替代方法？

在此先感谢您的任何指导/帮助。

这是用于从 NT 服务启动应用程序的代码片段。

```
FillChar(si, SizeOf(si), 0);
si.dwFlags := SW_HIDE;
FillChar(pi, SizeOf(pi), 0);

sCommandLine := Format('"%s" "%d"', [ExtractFilePath(ParamStr(0)) + 'MYAPP.EXE', AJobID]);

If CreateProcess(PChar(sFilename),
    PChar(sCommandLine),
    Nil,
    Nil,
    False,
    0,
    Nil,
    Nil,
    si,
    pi) Then Begin

    WaitForSingleObject(pi.hProcess, INFINITE);
    GetExitCodeProcess(pi.hProcess, ExitCode);
    Result := (ExitCode = 0);

End Else Begin

    AddEventLogMessage(SysErrorMessage(GetLastError));

End; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:38:54.437

事实证明，该问题与连接的使用和共享连接有关。

一旦我采取了在启动 CreateProcess 之前破坏调度程序上的连接的方法，内核使用情况又回到了我直接从控制台运行时看到的内容。

非常令人惊讶，因为该连接甚至没有与命令行正在执行的操作共享。

未来参考：在说这两种方法相同之前，一定要消除所有变量。在这方面，他们不是。调度程序有连接，控制台应用程序没有。这就是所有的区别。

# php - FuelPHP 从数据库读取配置

> ID：14742230
> 
> 赞同：0
> 
> 时间：2013-02-07T01:49:35.227
> 
> 标签：php, database, fuelphp

我在数据库中有一个带有站点全局设置的表。我想在fuelPHP启动时加载这些参数并在所有控制器中使用它。表列是 id|setting_name|setting_value。我使用了codeigniter，它被编码为助手。我调用了函数 site_settings('parameter') 并得到了结果。如何在燃料中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:05:49.283

您需要构建一个类以使其与 Fuel 一起使用。

创建模型可能是有意义的，因为它内置于数据库的挂钩中。查看 Model_Crud 或 ORM。

[http://fuelphp.com/docs/classes/model_crud/introduction.html](http://fuelphp.com/docs/classes/model_crud/introduction.html) [http://fuelphp.com/docs/packages/orm/intro.html](http://fuelphp.com/docs/packages/orm/intro.html)

如果需要，您可以访问您的数据库并更新和创建设置。

然后，您需要将其添加到配置文件以使其自动加载。

[http://fuelphp.com/docs/general/configuration.html](http://fuelphp.com/docs/general/configuration.html)

您还可以扩展核心 Config 类： [http :](http://fuelphp.com/docs/general/extending_core.html) [//fuelphp.com/docs/classes/config.html http://fuelphp.com/docs/general/extending_core.html](http://fuelphp.com/docs/classes/config.html)

这将使您可以访问包括基本 getter 和 setter 的 cor 配置方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:54:29.653

您可以创建一个新的控制器，例如 GlobalController 并将其他控制器扩展到全局控制器。

然后在 GLobalController 中创建一个`before()`函数。换句话说，这个函数将在其他函数之前**执行**。

```
public function before() {
    parent::before();
    $this->globalstring = "MyGlobalString"; 
} 
```

现在，每个扩展了的控制器都`GlobalController`可以检测到`$this->globalstring`字符串或您放入该函数的任何其他内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T09:56:18.590

最好和最透明的解决方案是扩展 Config 类以添加 DB 作为支持的后端。

[http://fuelphp.com/forums/discussion/3104/dbconfig-store-your-app-specific-config-setting-in-a-db-rather-than-loads-of-config-files](http://fuelphp.com/forums/discussion/3104/dbconfig-store-your-app-specific-config-setting-in-a-db-rather-than-loads-of-config-files)，虽然老了，可能给你一些关于如何做的指示。

您不应该为此使用 ORM，因为这需要许多依赖项。请改用常规数据库调用。

# java - 如何正确地循环睡眠

> ID：14742233
> 
> 赞同：1
> 
> 时间：2013-02-07T01:49:51.353
> 
> 标签：java, timer, blocking

我有一个循环，他的工作是充当阻塞命令，每秒执行一次 shell 命令。Java 警告“循环睡眠”。这是代码：

```
 while (!Shell.silentShellCommand(stringCommand).contains("Device detected")) {
        try {
            Thread.sleep(1000);
        } catch (InterruptedException ex) {
            log.errorHandler(ex);
        }
    } 
```

当然有更好的方法来做到这一点。我只是不知道怎么做。制作“阻塞计时器方法”的正确方法是什么？我正在使用它来暂停执行，直到用户执行某些操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T01:56:56.287

如果你想每秒执行一次，有一个更好的方法：

首先创建一个计时器：

```
Timer timer = new Timer(); 
```

然后安排固定时间执行：

```
timer.scheduleAtFixedRate(new TimerTask() {
  @Override
  public void run() {
    // Your repeatable execution here
  }
}, 1000, 1000); 
```

而已。希望我能帮上忙。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T02:42:46.987

为什么不做这样的事情：

```
public void loopMethod(){
    if(!Shell.silentShellCommand(stringCommand).contains("Device detected")){
        try {
            Thread.sleep(1000);
        } catch(InterruptedException ex) {
            ex.printStackTrace();
        }
        loopMethod();
    }
} 
```

只需从后台线程调用该方法。那行得通吗？我的意思是，从技术上讲，它仍然是一个循环，但由于某种原因它看起来更干净！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T01:58:17.020

经典的变体是使用`wait()`
// 等待线程

```
synchronized (mutex) {
     wait();
} 
```

// 其他线程通知等待者何时唤醒

```
synchronized (mutex) {
     notify();
} 
```

如果您的任务是定期执行代码，那么您将使用`TimerTask` Example see answer of Giovanni

# ios - 触摸滚动视图时隐藏键盘

> ID：14742235
> 
> 赞同：6
> 
> 时间：2013-02-07T01:50:08.563
> 
> 标签：ios, background, uiscrollview, keyboard, hide

我开发了我的应用程序，之后，我发现我需要添加一个滚动视图并将所有元素嵌入其中。这样做之后，我注意到键盘在键盘外触摸时不会消失。我知道是因为 IBAction 绑定到 ViewController 而不是滚动条。滚动条虽然不能有任何 IBAction。有什么办法可以帮助您解决这个问题吗？在添加滚动视图后，我搜索了很多并且有点迷失在隐藏键盘上。这个应该没那么复杂。

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-11-18T03:14:39.757

iOS 7 中最干净的方式：

```
scrollView.keyboardDismissMode = UIScrollViewKeyboardDismissModeInteractive; 
```

斯威夫特版本：

```
scrollView.keyboardDismissMode = .interactive 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-07T02:05:51.387

请试试这个：

```
UITapGestureRecognizer *yourTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(scrollTap:)];
    [scrollView addGestureRecognizer:yourTap];
    [self.view addSubview:scrollView]; 
```

然后在

```
- (void)scrollTap:(UIGestureRecognizer*)gestureRecognizer {

    //make keyboard disappear , you can use resignFirstResponder too, it depends.
    [self.view endEditing:YES];
} 
```

***了不起，你说你必须将所有元素嵌入到滚动视图中吗？这意味着你已经添加了类似`UIButton`子视图的东西到滚动视图，然后当你初始化时你`UIButton`也应该添加动作，所以在 scrollTap 中只是 [self.view endEditting :YES] 就足够了，因为如果你在某个点按下`UIScrollView`并且如果那个点是`UIButton`，它将激活因为它会`UIButton`在你将它添加为子视图时停留在最上层，如果该点不是按钮，那么 scrollTap 将被激活。对不起，我没有仔细看，但应该像我说的那样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-30T13:46:13.057

根据@piam 的回答，这里是那些想要快速复制粘贴的人的快速版本：

```
//put this where you initialize your scroll view
var theTap = UITapGestureRecognizer(target: self, action: "scrollViewTapped:")
scrollView.addGestureRecognizer(theTap) 
```

.

```
//This can go anywhere in your class
func scrollViewTapped(recognizer: UIGestureRecognizer) {
    scrollView.endEditing(true)
} 
```

边注：

确保您的文本字段设置如下：

```
exampleTextField.delegate = self 
```

并在您班级的顶部添加`UITextFieldDelegate`

```
class ViewController: UIViewController, UITextFieldDelegate { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T02:00:31.887

我认为您可以`UITapGestureRecognizer`为 baseViewControlls 视图注册一个然后处理手势

```
- (void)handleTap:(UITapGestureRecognizer *)recognizer
{
    if(yourScrollView.yourTextField.isFirstResponder)
    {
        [yourScrollView.yourTextField resignFirstResponder];
    }
} 
```

或者，当您的键盘显示时，您可以在 baseView 上添加一个透明蒙版按钮，该按钮位于键盘和 yourView 之间，并且按钮同时接收发送者，如下所示：

```
- (void)maskButton:(id)sender
{
    [_maskButton removeFromSuperView];
    if(yourScrollView.yourTextField.isFirstResponder)
    {
        [yourScrollView.yourTextField resignFirstResponder];
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-15T07:10:22.893

要在触摸时立即关闭，而不是在点击时关闭：

添加一个 PanGestureRecognizer：

```
UIPanGestureRecognizer *panGR = [[UIPanGestureRecognizer alloc] initWithTarget:nil action:nil];
panGR.cancelsTouchesInView = NO;
panGR.delegate = self;
[scrollView addGestureRecognizer:panGR]; 
```

实现手势委托：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {

    if (touch.phase == UITouchPhaseBegan) [self.view endEditing:YES];

    return NO;
} 
```

# c++ - 使用单个命令进行结构初始化（零值）

> ID：14742244
> 
> 赞同：0
> 
> 时间：2013-02-07T01:51:28.557
> 
> 标签：c++, structure

结构：

```
struct element_data
{
    int size;
    int type;
    int nID;
    int attribute;
    double fValue;
    int mode;
    bool bTemp;
}; 
```

...*我必须手动初始化所​​有成员为零：*

```
inline element_data() : //Empty constructor
    size(0),
    type(0),
    nID(0),
    attribute(0),
    fValue(0),
    mode(0),
    bTemp(false)
{} 
```

命令太多，可能会减慢我的计算器。有没有其他方法可以做到这一点？例如，使用单个命令，所有值都将采用**零**值...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:08:45.637

不，没有。至少，如果您关心的是效率。

[这就是为什么](http://www.parashift.com/c++-faq/init-lists.html)

我从上面的链接中引用，“在所有其他条件相同的情况下，如果您使用初始化列表而不是赋值，您的代码将运行得更快。”

请记住，仅仅因为它有很多代码，并不意味着它的效率较低。事实上，优化的代码通常看起来比未优化的通用代码更大、更复杂。这通常是因为您正在根据您正在处理的数据的属性或您正在使用的算法采取捷径。

这种方法的优点是它不依赖于创建实例的代码来正确地将成员初始化为零，同时也很高效。初始化列表可确保您的结构成员始终正确初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T02:13:23.253

由于您的 struct element_data 是 POD，您可以通过两种方式将成员初始化为默认值：

```
element_data ed = element_data(); 
```

或者

```
element_data ed = {}; 
```

所有整数成员将被初始化为`0`并且 bool 将被初始化为`false`。

# java - 在 Java 中使用 SQL 语句插入数值数据类型

> ID：14742246
> 
> 赞同：1
> 
> 时间：2013-02-07T01:51:38.133
> 
> 标签：java, sql, numeric, javadb

我正在编写一种方法，允许用户将他们的数据存储在我的数据库中。

我遇到的问题是在我的数据库中存储一个数字数据类型，用于用户 ID。

首先，如何判断 ID 号是否自动递增？这些是它的属性：

```
Type: Numeric
Column size: 4
Decimal digits: 0
Part of primary key: true
Part of an index: true
Position: 1 
```

我确定我在某处读过，将其设置为索引的一部分（true）允许自动递增。任何人都可以确认吗？

更重要的是，在我的表中插入数据时，我收到一条错误消息：

```
Columns of type 'NUMERIC' cannot hold values of type 'CHAR'. 
```

这是我插入代码的片段（如果需要，我可以透露更多）：

```
Statement pStatement = conn.createStatement();
String selectSQL = ("INSERT INTO APP.PERSON VALUES ('" + '3' + "','" + user + "','" + pass + "','" + fName + "','" + sName + "','" + sQuestion + "','" + sAnswer + "') ");
pStatement.executeUpdate(selectSQL); 
```

如您所见，我将 ID（第一个值）手动设置为 3。我相信这会引发错误，并且想知道如何使用 INSERT 命令插入数值。

我在 Mac OS X Mountain Lion 上使用 Netbeans 7.3 Beta 2 编写 Java 代码。我正在使用 Derby 数据库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T02:24:58.850

嘿兄弟，我建议你使用 prepareStatement

```
String template = "INSERT INTO APP.PERSON VALUES (YOUR,TABLE,COLLUMN,NAME) values (?,?,?,?)";
           PreparedStatement stmt = yourConnection.prepareStatement(template); 
```

因此，如果您想将 ID 设置为整数，请让 java 使用

```
 stmt.setInt(1, ID);
       stmt.setString(2, user);
       stmt.setString(3, fName);
       stmt.executeUpdate(); 
```

我不知道您的表结构如何，但这是一个示例，如果您想使用 int use`stmt.setInt(1, 3);`

1--> 你在字符串模板中设置的位置

3-->也许你想硬编码ID

这是我使用prepareStatement的示例模式

```
String name = "shadrach"
Double price = "100.00"
int qty = 3;
    String template = "INSERT INTO PRODUCT (NAME,PRICE,QTY) values (?,?,?)";
                PreparedStatement stmt = connection.prepareStatement(template);
                stmt.setString(1, name);
                stmt.setDouble(2, price);
                stmt.setInt(3, qty);
                stmt.executeUpdate(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T01:55:49.577

您不应该在数字周围加上单引号。我不确定其他列数据类型的类型，但任何数字都不应包含单引号。

```
Statement pStatement = conn.createStatement();

String selectSQL = ("INSERT INTO APP.PERSON VALUES (3,'" + user + "','" + pass + "','" + fName + "','" + sName + "','" + sQuestion + "','" + sAnswer + "') ");

 pStatement.executeUpdate(selectSQL); 
```

您还应该考虑将其切换为使用`PreparedStatement`，连接字符串来执行 SQL 将使您容易受到 SQL 注入攻击。准备好的报表将有助于降低这种风险。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T01:58:07.827

当表格需要一个数字时，您正在插入**字符3。**

[您可以使用ResultSetMetaData](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSetMetaData.html)的 isAutoIncrement 方法判断列是否为自动增量。希望有帮助....

# android - Android：ComponentInfo：返回App后java空指针异常

> ID：14742253
> 
> 赞同：0
> 
> 时间：2013-02-07T01:52:16.727
> 
> 标签：android, nullpointerexception

我的应用程序没有任何问题，直到关闭我的应用程序并在超过 15 分钟后返回它才会崩溃，如果我仅在 5 分钟后返回我的应用程序似乎一切正常。找不到问题，求大神帮忙！！！

日志猫

```
 02-06 20:39:43.534: E/AndroidRuntime(1851): FATAL EXCEPTION: main
02-06 20:39:43.534: E/AndroidRuntime(1851): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.raigo.itivamin/com.raigo.itivamin.Bartabs}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.raigo.itivamin/com.raigo.itivamin.ObjetivosActivity}: java.lang.NullPointerException
02-06 20:39:43.534: E/AndroidRuntime(1851):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
02-06 20:39:43.534: E/AndroidRuntime(1851):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
02-06 20:39:43.534: E/AndroidRuntime(1851):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
02-06 20:39:43.534: E/AndroidRuntime(1851):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
02-06 20:39:43.534: E/AndroidRuntime(1851):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-06 20:39:43.534: E/AndroidRuntime(1851):     at android.os.Looper.loop(Looper.java:210)
02-06 20:39:43.534: E/AndroidRuntime(1851):     at android.app.ActivityThread.main(ActivityThread.java:4441)
02-06 20:39:43.534: E/AndroidRuntime(1851):     at java.lang.reflect.Method.invokeNative(Native Method)
02-06 20:39:43.534: E/AndroidRuntime(1851):     at java.lang.reflect.Method.invoke(Method.java:511)
02-06 20:39:43.534: E/AndroidRuntime(1851):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
02-06 20:39:43.534: E/AndroidRuntime(1851):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
02-06 20:39:43.534: E/AndroidRuntime(1851):     at dalvik.system.NativeStart.main(Native Method)
02-06 20:39:43.534: E/AndroidRuntime(1851): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.raigo.itivamin/com.raigo.itivamin.ObjetivosActivity}: java.lang.NullPointerException
02-06 20:39:43.534: E/AndroidRuntime(1851):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
02-06 20:39:43.534: E/AndroidRuntime(1851):     at android.app.ActivityThread.startActivityNow(ActivityThread.java:1808)
02-06 20:39:43.534: E/AndroidRuntime(1851):     at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
02-06 20:39:43.534: E/AndroidRuntime(1851):     at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:347)
02-06 20:39:43.534: E/AndroidRuntime(1851):     at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:737)
02-06 20:39:43.534: E/AndroidRuntime(1851):     at android.widget.TabHost.setCurrentTab(TabHost.java:401)
02-06 20:39:43.534: E/AndroidRuntime(1851):     at android.widget.TabHost.addTab(TabHost.java:240)
02-06 20:39:43.534: E/AndroidRuntime(1851):     at com.raigo.itivamin.Bartabs.addTab(Bartabs.java:65)
02-06 20:39:43.534: E/AndroidRuntime(1851):     at com.raigo.itivamin.Bartabs.setTabs(Bartabs.java:37)
02-06 20:39:43.534: E/AndroidRuntime(1851):     at com.raigo.itivamin.Bartabs.onCreate(Bartabs.java:29)
02-06 20:39:43.534: E/AndroidRuntime(1851):     at android.app.Activity.performCreate(Activity.java:4465)
02-06 20:39:43.534: E/AndroidRuntime(1851):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
02-06 20:39:43.534: E/AndroidRuntime(1851):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
02-06 20:39:43.534: E/AndroidRuntime(1851):     ... 11 more
02-06 20:39:43.534: E/AndroidRuntime(1851): Caused by: java.lang.NullPointerException
02-06 20:39:43.534: E/AndroidRuntime(1851):     at com.raigo.itivamin.ObjetivosActivity.onCreate(ObjetivosActivity.java:25)
02-06 20:39:43.534: E/AndroidRuntime(1851):     at android.app.Activity.performCreate(Activity.java:4465)
02-06 20:39:43.534: E/AndroidRuntime(1851):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
02-06 20:39:43.534: E/AndroidRuntime(1851):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
02-06 20:39:43.534: E/AndroidRuntime(1851):     ... 23 more 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.raigo.itivamin"
    android:versionCode="10"
    android:versionName="1.1" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="17" />

    <application  android:name="com.raigo.itivamin.iTIVAapp"
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/app_theme" >
        <activity
            android:name=".IngresodatosActivity"
            android:label="@string/app_name" >
                    <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name="Bartabs" android:configChanges="orientation|screenSize"></activity>
        <activity android:name=".ObjetivosActivity" android:configChanges="orientation|screenSize"></activity>  
        <activity android:name=".BombaActivity" android:configChanges="orientation|screenSize"></activity>
        <activity android:name=".OpioideActivity"
            android:theme="@android:style/Theme.Dialog"></activity>    
        <activity android:name=".HipnoticoActivity"
             android:theme="@android:style/Theme.Dialog"></activity>   
        <activity android:name="org.achartengine.GraphicalActivity" />   
        <activity android:name=".GraficaActivity" android:configChanges="orientation|screenSize"></activity>
        <activity android:name=".SimuladorActivity" android:configChanges="orientation|screenSize"></activity>
        <activity android:name=".AyudaActivity" android:configChanges="orientation|screenSize"></activity>

        <service android:name=".SomeService1"></service>
    </application>

</manifest> 
```

Bartabs.java

```
package com.raigo.itivamin;

import android.app.TabActivity;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.ImageView;
import android.widget.TabHost;
import android.widget.TextView;

/**
 * @author Adil Soomro
 *
 */
@SuppressWarnings("deprecation")
public class Bartabs extends TabActivity  {
    /** Called when the activity is first created. */
//boolean simulador =false;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
        setContentView(R.layout.main);
        //Bundle extras = getIntent().getExtras();
        //simulador= extras.getBoolean("simulador");
        setTabs() ;

    }

    private void setTabs()
    {

    if (((iTIVAapp)getApplication()).simulador==false){         
        addTab(getString(R.string.target), R.drawable.tab_objetivos, ObjetivosActivity.class);
        addTab(getString(R.string.pump), R.drawable.tab_bomba, BombaActivity.class);
        addTab2(getString(R.string.pk_pd), R.drawable.tab_chart,GraficaActivity.class);
        addTab(getString(R.string.help), R.drawable.tab_help, AyudaActivity.class);
    } else{
        addTab(getString(R.string.scheme), R.drawable.tab_bomba, SimuladorActivity.class);
        addTab2(getString(R.string.pk_pd), R.drawable.tab_chart,GraficaActivity.class);
        addTab(getString(R.string.help), R.drawable.tab_help, AyudaActivity.class);
    }

    }

    private void addTab(String labelId, int drawableId, Class<?> c)
    {
        TabHost tabHost = getTabHost();
        Intent intent = new Intent(this, c);
        TabHost.TabSpec spec = tabHost.newTabSpec("tab" + labelId); 

        View tabIndicator = LayoutInflater.from(this).inflate(R.layout.tab_indicator, getTabWidget(), false);
        TextView title = (TextView) tabIndicator.findViewById(R.id.title);

        title.setText(labelId);
                ImageView icon = (ImageView) tabIndicator.findViewById(R.id.icon);
        icon.setImageResource(drawableId);

        spec.setIndicator(tabIndicator);
        spec.setContent(intent);

        tabHost.addTab(spec);
        //tabHost.setOnTabChangedListener(this);

    }

    private void addTab2(String labelId, int drawableId, Class<?> c)
    {
        TabHost tabHost = getTabHost();
        Intent intent = new Intent(this, c).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        TabHost.TabSpec spec = tabHost.newTabSpec("tab" + labelId); 

        View tabIndicator = LayoutInflater.from(this).inflate(R.layout.tab_indicator, getTabWidget(), false);
        TextView title = (TextView) tabIndicator.findViewById(R.id.title);

        title.setText(labelId);
                ImageView icon = (ImageView) tabIndicator.findViewById(R.id.icon);
        icon.setImageResource(drawableId);

        spec.setIndicator(tabIndicator);
        spec.setContent(intent);

        tabHost.addTab(spec);
        //tabHost.setOnTabChangedListener(this);
    }

    //@Override
    //public void onTabChanged(String tabId) {

    //  if (tabId.equals("tabPK/PD")==true && (((iTIVAapp)getApplication()).cambio==true)){ 
    //    LocalActivityManager manager = getLocalActivityManager();
    //    manager.destroyActivity("tabPK/PD", true);
    //   manager.startActivity("tabPK/PD", new Intent(this, GraficaActivity.class));
    //  }
    //}

} 
```

ObjetivosActivity.java

```
package com.raigo.itivamin;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.pm.ActivityInfo;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.NumberPicker;
import android.widget.NumberPicker.OnValueChangeListener;
import android.widget.Toast;

public class ObjetivosActivity extends Activity implements OnValueChangeListener {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);

        this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

        if (((iTIVAapp)getApplication()).modelo2.equals("halogenado")==false){
        setContentView(R.layout.objetivospage_sep);
        }
        else    
        {
        setContentView(R.layout.objetivospage_bal);
        }                   

        //valores por defecto
        ((iTIVAapp)getApplication()).Tinduccion=5;     
        ((iTIVAapp)getApplication()).tcx=180;
        ((iTIVAapp)getApplication()).objetivo="efecto";
        //((iTIVAapp)getApplication()).deltainfusion=15;
        ((iTIVAapp)getApplication()).cambio=true;

        final Button btn_opt = (Button)findViewById(R.id.button_optimizar);

        if (((iTIVAapp)getApplication()).mezclado==true){
             btn_opt.setVisibility(View.VISIBLE);

        } else if (((iTIVAapp)getApplication()).modelo2.equals("halogenado")==false) {
             btn_opt.setVisibility(View.GONE);
        }

        /////////
        final Button btn_ind = (Button)findViewById(R.id.button_induccion);
         btn_ind.setText((int)((iTIVAapp)getApplication()).Tinduccion+" "+getString(R.string._min));
        //se crean los objetivos del farmaco 1

         final NumberPicker np_ini1 = (NumberPicker) findViewById(R.id.numberPicker_ini1);
         final NumberPicker np_man1 = (NumberPicker) findViewById(R.id.numberPicker_man1);
         final NumberPicker np_sal1 = (NumberPicker) findViewById(R.id.numberPicker_sal1);

        String[] nums = new String[120];

        for(int i=1; i<nums.length+1; i++)
           nums[i-1] = Double.toString(i/10.0);

        np_ini1.setMaxValue(nums.length-1);
        np_ini1.setMinValue(0);
        np_ini1.setDisplayedValues(nums);
        np_ini1.setValue((int) (((iTIVAapp)getApplication()).ini1*10-1));
        np_ini1.setDescendantFocusability(NumberPicker.FOCUS_BLOCK_DESCENDANTS);
        np_ini1.setOnValueChangedListener(this);

        np_man1.setMaxValue(nums.length-1);
        np_man1.setMinValue(0);
        np_man1.setDisplayedValues(nums);
        np_man1.setValue((int) (((iTIVAapp)getApplication()).man1*10-1));
        np_man1.setDescendantFocusability(NumberPicker.FOCUS_BLOCK_DESCENDANTS);
        np_man1.setOnValueChangedListener(this);

        np_sal1.setMaxValue(nums.length-1);
        np_sal1.setMinValue(0);
        np_sal1.setDisplayedValues(nums);
        np_sal1.setValue((int) (((iTIVAapp)getApplication()).sal1*10-1));
        np_sal1.setDescendantFocusability(NumberPicker.FOCUS_BLOCK_DESCENDANTS);
        np_sal1.setOnValueChangedListener(this);

        if (((iTIVAapp)getApplication()).modelo2.equals("schnider") && ((iTIVAapp)getApplication()).mezclado==false){
        //se crean los objetivos del farmaco 2

            final NumberPicker np_ini2 = (NumberPicker) findViewById(R.id.numberPicker_ini2);
            final NumberPicker np_man2 = (NumberPicker) findViewById(R.id.numberPicker_man2);
            final NumberPicker np_sal2 = (NumberPicker) findViewById(R.id.numberPicker_sal2);

        String[] nums2 = new String[80];

        for(int i=1; i<nums2.length+1; i++)
           nums2[i-1] = Double.toString(i/10.0);

        np_ini2.setMaxValue(nums2.length-1);
        np_ini2.setMinValue(0);
        np_ini2.setDisplayedValues(nums2);
        np_ini2.setValue((int) (((iTIVAapp)getApplication()).ini2*10-1));
        np_ini2.setDescendantFocusability(NumberPicker.FOCUS_BLOCK_DESCENDANTS);
        np_ini2.setOnValueChangedListener(this);

        np_man2.setMaxValue(nums2.length-1);
        np_man2.setMinValue(0);
        np_man2.setDisplayedValues(nums2);
        np_man2.setValue((int) (((iTIVAapp)getApplication()).man2*10-1));
        np_man2.setDescendantFocusability(NumberPicker.FOCUS_BLOCK_DESCENDANTS);
        np_man2.setOnValueChangedListener(this);

        np_sal2.setMaxValue(nums2.length-1);
        np_sal2.setMinValue(0);
        np_sal2.setDisplayedValues(nums2);
        np_sal2.setValue((int) (((iTIVAapp)getApplication()).sal2*10-1));
        np_sal2.setDescendantFocusability(NumberPicker.FOCUS_BLOCK_DESCENDANTS);
        np_sal2.setOnValueChangedListener(this);
        }
        else if (((iTIVAapp)getApplication()).mezclado==true){
             //se crean los objetivos del farmaco 2

            final NumberPicker np_ini2 = (NumberPicker) findViewById(R.id.numberPicker_ini2);
            final NumberPicker np_man2 = (NumberPicker) findViewById(R.id.numberPicker_man2);
            final NumberPicker np_sal2 = (NumberPicker) findViewById(R.id.numberPicker_sal2);

            String[] nums2 = new String[81];

            for(int i=1; i<nums2.length; i++)
               nums2[i-1] = Double.toString(i/10.0);

            nums2[80] = "-";

            np_ini2.setMaxValue(nums2.length-1);
            np_ini2.setMinValue(0);
            np_ini2.setDisplayedValues(nums2);
            np_ini2.setValue(80);
            np_ini2.setDescendantFocusability(NumberPicker.FOCUS_BLOCK_DESCENDANTS);
            np_ini2.setOnValueChangedListener(this);

            np_man2.setMaxValue(nums2.length-1);
            np_man2.setMinValue(0);
            np_man2.setDisplayedValues(nums2);
            np_man2.setValue(80);
            np_man2.setDescendantFocusability(NumberPicker.FOCUS_BLOCK_DESCENDANTS);
            np_man2.setOnValueChangedListener(this);

            np_sal2.setMaxValue(nums2.length-1);
            np_sal2.setMinValue(0);
            np_sal2.setDisplayedValues(nums2);
            np_sal2.setValue(80);
            np_sal2.setDescendantFocusability(NumberPicker.FOCUS_BLOCK_DESCENDANTS);
            np_sal2.setOnValueChangedListener(this);    
        }
        else if (((iTIVAapp)getApplication()).modelo2.equals("halogenado")){
            NumberPicker np_mac = (NumberPicker) findViewById(R.id.numberPicker_mac);
            String[] nums2 = new String[30];

            for(int i=1; i<nums2.length+1; i++)
               nums2[i-1] = Double.toString(i/10.0);

            np_mac.setMaxValue(nums2.length-1);
            np_mac.setMinValue(0);
            np_mac.setDisplayedValues(nums2);
            np_mac.setValue(0);
            np_mac.setDescendantFocusability(NumberPicker.FOCUS_BLOCK_DESCENDANTS);
            np_mac.setOnValueChangedListener(this);
        }

    }

    @Override
    protected void onResume() {
            super.onResume();

            NumberPicker np_ini1 = (NumberPicker) findViewById(R.id.numberPicker_ini1);
            NumberPicker np_man1 = (NumberPicker) findViewById(R.id.numberPicker_man1);
            NumberPicker np_sal1 = (NumberPicker) findViewById(R.id.numberPicker_sal1);

            np_ini1.setValue((int) (((iTIVAapp)getApplication()).ini1*10-1));
            np_man1.setValue((int) (((iTIVAapp)getApplication()).man1*10-1));
            np_sal1.setValue((int) (((iTIVAapp)getApplication()).sal1*10-1));

            if (((iTIVAapp)getApplication()).modelo2.equals("halogenado")==false){
                NumberPicker np_ini2 = (NumberPicker) findViewById(R.id.numberPicker_ini2);
                NumberPicker np_man2 = (NumberPicker) findViewById(R.id.numberPicker_man2);
                NumberPicker np_sal2 = (NumberPicker) findViewById(R.id.numberPicker_sal2);

                np_ini2.setValue((int) (((iTIVAapp)getApplication()).ini2*10-1));
                np_man2.setValue((int) (((iTIVAapp)getApplication()).man2*10-1));
                np_sal2.setValue((int) (((iTIVAapp)getApplication()).sal2*10-1));

                if (((iTIVAapp)getApplication()).mezclado==true){

                    if (((iTIVAapp)getApplication()).ini2==0 && ((iTIVAapp)getApplication()).man2==0){
                        np_ini2.setValue(80);
                        np_man2.setValue(80);   
                    } else {
                    np_ini2.setValue((int) (((iTIVAapp)getApplication()).ini2*10-1));
                    np_man2.setValue((int) (((iTIVAapp)getApplication()).man2*10-1));
                    }

                    np_sal2.setValue(80);
                }

            }

    }

..... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:05:33.040

```
Caused by: java.lang.NullPointerException
     at com.raigo.itivamin.ObjetivosActivity.onCreate(ObjetivosActivity.java:25) 
```

错误似乎指向这一行：

```
if (((iTIVAapp)getApplication()).modelo2.equals("halogenado")==false){ 
```

所以要么`(iTIVAapp)getApplication()`为空，要么`.modelo2`为空。您可以使用调试器或通过 LogCat 语句测试哪个值为 null。

如果`modelo2`可能为空，也可能不为空，您可以将您的条件倒写：

```
if(!"halogenado".equals(((iTIVAapp)getApplication()).modelo2)){ 
    // "!" means "!= true" which must mean "false" for a boolean 
```

# .net - SSO 场景中的 ADFS 2.0 会话超时

> ID：14742255
> 
> 赞同：2
> 
> 时间：2013-02-07T01:52:28.340
> 
> 标签：.net, session, wif, adfs2.0, adfs

我们目前正在开发一个使用 ADFS 2.0 的 SSO 项目。作为 IDP/CP 信托。应用程序设计的基本要求之一是在空闲期（可以是任何东西）后重新验证用户。经过广泛搜索后，我发现只有少数实现（除了 SharePoint 示例）涉及[WebSSOlifetime 和 TokenLifeTime](http://setspn.blogspot.co.nz/2012/01/adfs-webssolifetime-vs-tokenlifetime.html)ADFS 服务器中的设置。我了解 WebSSOLifeTime 是服务器范围的设置（默认值：480），而 TokenLifeTime 是令牌到期的 RP 级别设置（默认值 0 - 10 小时）。为了随机测试设置，我将 RP 应用程序的 WebSSOlifetime 值更改为 5 分钟，将 TokenLifeTime 值更改为 3 分钟。但它在 5 分钟的空闲时间（如 WebSSOlifetime 中设置）后没有触发重新身份验证。我测试的 RP 应用程序包括 - Google 应用程序 - ADFS 集成 SSO 和用于测试声明值的单页应用程序。如果有人可以发布任何指向 ADFS 2.0 会话维护功能的相关指针，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T04:13:48.987

经过一番汗水，我找到了解决方案。[Stackoverflow 中的这篇](https://stackoverflow.com/a/9173291)文章确实为我提供了一个起点（非常感谢！）。控制 IP/STS 登录提示的关键参数是新鲜度值（这是[Oasis 文档](http://docs.oasis-open.org/wsfed/federation/v1.2/os/ws-federation-1.2-spec-os.html#_Toc223175013)中提到的可选参数）。

当包含在 web.config 的 federatedAuthentication 部分中时，此参数（设置为 freshness="0"）将提示 IDP 根据 WCT 参数中的当前时间检查令牌的新鲜度值。之后我发现（经过大量测试）通过 shell 脚本[设置](http://social.technet.microsoft.com/wiki/contents/articles/7681.setting-the-adfs-timeout-for-crm-2011-internet-facing-deployments-ifd.aspx)的 TokenLifeTime进入画面。这 (TokenLifeTime) 控制用户在将他重定向到登录屏幕之前可以处于活动状态的时间。

正如您在请求 URL 中看到的： `https://XXX/adfs/ls/?wa=wsignin1.0&wtrealm=https%3a%2f%2fXXX%2fXXX&wfresh=0&wctx=rm%3d0%26id%3dpassive%26ru%3d%252fXXX%252fDefault.aspx&wct=2013-02-14T01%3a36%3a17Z`

wfresh和*wctx*值被传递给 IDP 进行验证*。*

我仍然不确定一切（新鲜度、TokenLifetime 和 WebSSOLifetime）是如何在幕后同步的。关于背景的一个很好的解释会非常有帮助（[当然会增加一些声誉](https://stackoverflow.com/q/14867613/1371639):)）。

# wordpress - 在wordpress自定义代码facebook共享器中显示缩略图的代码

> ID：14742257
> 
> 赞同：0
> 
> 时间：2013-02-07T01:52:54.777
> 
> 标签：wordpress, thumbnails, facebook-sharer

```
<a title="Share this post/page"
href="http://www.facebook.com/sharer.php?
s=100

&p[url]=<?php the_permalink() ?>
&p[images][0]=
&p[title]=<?php the_title(); ?>
&p[summary]=<?php the_excerpt() ?>"
target="_blank">
<img src="http://www.ironwillfootball.ca/wp-content/themes/IronWillThemes/images/share_01.png"
alt="Share on Facebook" />
</a> 
```

这是我的 facebook 分享代码，而这一行 -> &p[images][0]= 为空.. 我如何在此处添加图像？如果 wordpress 中缩略图的链接是这样的，那么代码是什么 -> img src= ID, $key, true); ?>

真正的问题是，当我在 wordpress 中分享帖子时，我看不到缩略图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:45:24.297

首先，`sharer.php`已被弃用并且已经有一段时间了。请记住，它可能随时停止工作。您最好使用 Feed 对话框进行开发。

假设您的代码在循环中运行，您可以使用 WordPress`get_posts()`函数返回附件。[WordPress Codex 有一个示例](http://codex.wordpress.org/Template_Tags/get_posts#Show_attachments_for_the_current_post)正是您正在寻找的，所以我不会在这里重复。

如果您在循环之外执行此操作，则需要使用Codex`get_children()`中也[描述的](http://codex.wordpress.org/Function_Reference/get_children)

# java - 简单的 OpenNI getUserPixels

> ID：14742261
> 
> 赞同：0
> 
> 时间：2013-02-07T01:53:31.990
> 
> 标签：java, kinect, processing, simple-openni

我是图像处理的新手。如何使用 Simple OpenNI 中的 getUserPixels() 进行处理来跟踪多个用户？这以什么为参数？我将如何设置此代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:22:57.953

这个想法是跟踪检测到的用户。

这些`sceneImage()/sceneMap()`功能可以方便地跟踪用户像素，但我也更喜欢启用`SKEL_PROFILE_NONE`配置文件来跟踪用户。

这适用于返回整数的`onNewUser`and`onLostUser`事件：该用户的 id。此 ID 对于跟踪总用户或检测到的最新用户很重要。获得用户 ID 后，您可以将其插入其他 SimpleOpenNI 功能，例如`getCoM()`返回用户的“质心”（身体中心的 x、y、z 位置）。

因此，您将使用上述用户事件来更新内部用户列表：

```
import SimpleOpenNI.*;

SimpleOpenNI context;
ArrayList<Integer> users = new ArrayList<Integer>();//a list to keep track of users

PVector pos = new PVector();//the position of the current user will be stored here

void setup(){
  size(640,480);
  context = new SimpleOpenNI(this);
  context.enableDepth();
  context.enableScene();
  context.enableUser(SimpleOpenNI.SKEL_PROFILE_NONE);//enable basic user features like centre of mass(CoM)
}
void draw(){
  context.update();
  image(context.sceneImage(),0,0);
  if(users.size() > 0){//if there are any users
    for(int user : users){//for each user
      context.getCoM(user,pos);//get the xyz pozition
      text("user " + user + " is at: " + ((int)pos.x+","+(int)pos.y+","+(int)pos.z+",")+"\n",mouseX,mouseY);//and draw it on screen
    }
  }
}
void onNewUser(int userId){
  println("detected" + userId);
  users.add(userId);//a new user was detected add the id to the list
}
void onLostUser(int userId){
  println("lost: " + userId);
  //not 100% sure if users.remove(userId) will remove the element with value userId or the element at index userId
  users.remove((Integer)userId);//user was lost, remove the id from the list
} 
```

高温高压

# ios - iOS：在不播放视频的情况下获取视频时长和缩略图

> ID：14742262
> 
> 赞同：24
> 
> 时间：2013-02-07T01:53:40.273
> 
> 标签：ios, ios6

我需要获取（本地）视频的持续时间，然后以`UIImage`s 访问其各个帧。到目前为止，我一直在使用`MPMoviePlayerController`它。

首先我注册`MPMovieDurationAvailableNotification`事件，然后调用`prepareToPlay`. 收到事件后，我会记下视频的持续时间，然后通过`requestThumbnailImagesAtTimes`.

这可行，但是即使我没有以任何方式将其添加到视图中，视频似乎也开始播放（我可以听到在后台播放的音频）。

有什么方法可以在不实际播放视频的情况下获取视频的持续时间和帧数？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-07T05:22:10.403

要获得持续时间：

```
NSURL *sourceMovieURL = [NSURL fileURLWithPath:somePath];
AVURLAsset *sourceAsset = [AVURLAsset URLAssetWithURL:sourceMovieURL options:nil];
CMTime duration = sourceAsset.duration; 
```

要获取帧抓取：

```
AVAssetImageGenerator* generator = [AVAssetImageGenerator assetImageGeneratorWithAsset:destinationAsset];

//Get the 1st frame 3 seconds in
int frameTimeStart = 3;
int frameLocation = 1;

//Snatch a frame
CGImageRef frameRef = [generator copyCGImageAtTime:CMTimeMake(frameTimeStart,frameLocation) actualTime:nil error:nil]; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-03-09T14:33:13.980

你可以像这样**快速进入**

```
func getMediaDuration(url: NSURL!) -> Float64{
    let asset : AVURLAsset = AVURLAsset(URL: url) as AVURLAsset
    let duration : CMTime = asset.duration
    return CMTimeGetSeconds(duration)
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-07T04:48:14.033

`setShouldAutoPlay:NO`使用 MPMoviePlayerController调用可以解决问题：

```
 moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL: movieURL];
[moviePlayerController setShouldAutoplay:NO];   
[moviePlayerController prepareToPlay]; 
```

编辑：我在没有解释的情况下被否决了，但我会坚持这个答案。如果您需要使用，`MPMoviePlayerController`那么这将阻止媒体的自动播放，但仍然允许您按照我原来的问题获得持续时间和缩略图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-23T13:43:24.447

使用此方法：

```
class func getVideoInfo(from url: URL,
                        completion: @escaping ((_ image: UIImage?, _ duration: CGFloat?) -> Void)) {
    DispatchQueue.global().async {
        let asset = AVAsset(url: url)
        let duration = CMTimeGetSeconds(asset.duration)
        let avAssetImageGenerator = AVAssetImageGenerator(asset: asset)
        avAssetImageGenerator.appliesPreferredTrackTransform = true
        let thumnailTime = CMTimeMake(value: 2, timescale: 1)
        do {
            let cgThumbImage = try avAssetImageGenerator.copyCGImage(at: thumnailTime, actualTime: nil)
            let thumbNailImage = UIImage(cgImage: cgThumbImage)
            DispatchQueue.main.async {
                completion(thumbNailImage, duration)
            }
        } catch {
            DispatchQueue.main.async {
                completion(nil, nil)
            }
        }
    }
} 
```

# c++ - 模板可能导致函数定义匹配失败

> ID：14742263
> 
> 赞同：0
> 
> 时间：2013-02-07T01:53:43.480
> 
> 标签：c++, templates, typename

在使用c++11的VS2012中，为什么会这样编译：

```
template <typename T>
class Vector2
{
public:
    Vector2();  //constructors

    T Dot(const Vector2<T>& U, const Vector2<T>& V);
};

template <typename T>
inline T Vector2<T>::Dot(const Vector2<T>& U, const Vector2<T>& V) //ISSUE
{ return (U.x * V.x + U.y * V.y); } 
```

但这不会：

```
template <typename T>
class Vector2
{
public:
    Vector2();  //constructors

    template<typename G>
    G Dot(const Vector2<G>& U, const Vector2<G>& V);
};

template <typename G>
inline G Vector2<G>::Dot(const Vector2<G>& U, const Vector2<G>& V) //ISSUE
{ return (U.x * V.x + U.y * V.y); } 
```

第二个导致错误：“无法将函数定义与现有声明匹配”
我意识到我不必为后面的模板函数定义使用 G，我只是使用它来与第二个示例声明保持一致。
您是否不允许在模板类中拥有与该类不同类型的函数？我非常有兴趣找出这里发生的事情以及我可以从这个错误中学到的与模板相关的任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T01:57:53.883

您有两种模板类型：`T`和`G`. 一个列表 ( `T`) 用于类，一个 ( `G`) 用于成员函数。因此，您必须有两个列表；一个用于类，一个用于函数（并确保正确的类型放在正确的位置，`T`在类名之后和`G`参数中）：

```
template<typename T>
template<typename G>
inline G Vector2<T>::Dot(const Vector2<G>& U, const Vector2<G>& V)
{ return (U.x * V.x + U.y * V.y); } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T01:58:52.847

您需要两个单独的模板声明：

```
template <class T>
template <class G>
inline G Vector2<T>::Dot(const Vector2<G>& U, const Vector2<G>& V) {...} 
```

# symfony - 登录重定向后的 FosUserBundle

> ID：14742267
> 
> 赞同：1
> 
> 时间：2013-02-07T01:54:18.567
> 
> 标签：symfony, symfony-2.1, fosuserbundle

登录后如何根据您的角色重定向？例如，用户：admin，角色：ROLE_ADMIN 在 /admin 和用户：标准，角色：ROLE_USER 在 /user?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:05:13.067

您需要添加`eventlistener`以侦听 onInteractiveLogin 事件。

在这里你有一些例子：[http ://www.reecefowell.com/2011/10/26/redirecting-on-loginlogout-in-symfony2-using-loginhandlers/](http://www.reecefowell.com/2011/10/26/redirecting-on-loginlogout-in-symfony2-using-loginhandlers/) [http://www.metod.si/login-event- symfony 中的监听器2/](http://www.metod.si/login-event-listener-in-symfony2/)

这里解释了整个`FOS`逻辑： [http ://blog.logicexception.com/2011/10/symfony2-securitybundle-and.html](http://blog.logicexception.com/2011/10/symfony2-securitybundle-and.html)

# node.js - 如何在 nodejs 程序中使用共享内存？

> ID：14742268
> 
> 赞同：10
> 
> 时间：2013-02-07T01:54:22.207
> 
> 标签：node.js, shared-memory

我有一些在服务器上运行的 C++ 服务和一个监听特定端口的节点服务器程序。我可以在 C++ 服务和 nodejs 程序之间使用共享内存吗？我希望用户通过 nodejs 服务器发送数据，并且那些 C++ 服务可以访问它们。可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T14:34:25.757

我尝试从 nodejs 编写共享内存访问的 C/C++ 绑定。 [https://github.com/supipd/node-shm](https://github.com/supipd/node-shm)

仍在进行中（但为我工作），也许有用，如果有错误或建议，请通知我。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T01:58:05.053

您可以编写与 C/C++ 的绑定。从[http://howtonode.org/how-to-module](http://howtonode.org/how-to-module)开始（编写绑定部分）。

在绑定代码中，您可以将共享内存用于您的 C++ 服务，但如果有意义的话，直接链接到服务可能更有意义。

# java - 传递参数变量时遇到问题

> ID：14742269
> 
> 赞同：0
> 
> 时间：2013-02-07T01:54:22.093
> 
> 标签：java, variables, parameter-passing

我在构建参数传递时遇到了麻烦。我已经尝试设置变量 String 复数词 = makePlural(word) 等。但这没有帮助。对于变量复数和 wordWithSuffix，我遇到了找不到符号错误。你能看看吗？非常感激。如果我还没有提到，这是 Java。在我的代码顶部，您可以看到注释变量。我最初在全局范围内发布了这些变量，但为了使我的代码更好，我只需要局部变量并返回需要通过参数传递传递的变量。

```
 import java.lang.*;
 import java.io.*;
 import java.util.StringTokenizer;
 import java.util.NoSuchElementException;

 public class newVowel {

      public static FileInputStream fileInStream;   //call the FileInputStream and name as fileInStream
      public static InputStreamReader fileInReader; //call the InputStreamReader and name as fileInReader
      public static BufferedReader reader;          //call the BufferedReader and simply name it as such, reader

      //private static String line, word, suffix, plural, wordWithSuffix;   //call String variables
      //private static int length, lengthOfWord, spaceIndex, counter;       //call integer variables to be used later
      //private static char firstLetter, secondLetter, lastLetter, c;       //call the character variables

      public static void initiateFile() throws IOException //the initiateFile method reads the external text file and sets all contents of file into the variable reader
      {
           fileInStream = new FileInputStream("C:\\!!VHSAPCSData\\vowels.txt"); //location of file
           fileInReader = new InputStreamReader(fileInStream);                      //inputs data
           reader = new BufferedReader(fileInReader);                               //reads data
      }

      public static String makePlural(String word)                  //the makePlural method, simply makes the words plural
      {
           String plural;
           int length, lengthOfWord;
           char lastLetter, secondLetter;

           lengthOfWord = word.length();                    //calculates the length of the word
           lastLetter = word.charAt(lengthOfWord-1);        //calculates the last letter
           secondLetter = word.charAt(lengthOfWord-2);      //calculates the second to last letter
           if(((lastLetter == 'A')||(lastLetter == 'C')||(lastLetter == 'S')||(lastLetter == 'L')) && ((secondLetter != 'A')||(secondLetter != 'C')||(secondLetter != 'S')||(secondLetter != 'L')))
           {                                                 //this if statement checks for the specified "vowels" A, C, S, and L in specific combinations. If the word ends in only one vowel,
                  plural = word.substring(0, (lengthOfWord-1));//the original word drops the last letter (vowel) as the directions state, and then
                  plural += "G";                                 //"G" is added to the end of the word
           }
           if(((lastLetter != 'A')||(lastLetter != 'C')||(lastLetter != 'S')||(lastLetter != 'L')) && ((secondLetter == 'A')||(secondLetter == 'C')||(secondLetter == 'S')||(secondLetter == 'L')))
                 plural = word + "GH";                      //this if statement checks for the specified "vowels" A, C, S, and L in specific combinations. If, of the last two letters, the second to last letter
                                                        //is a vowel, "GH" is added to the end of the word
           if(((lastLetter == 'A')||(lastLetter == 'C')||(lastLetter == 'S')||(lastLetter == 'L')) && ((secondLetter == 'A')||(secondLetter == 'C')||(secondLetter == 'S')||(secondLetter == 'L')))
           {
              String lastChar = Character.toString(lastLetter); //this if statement checks for the specified "vowels" A, C, S, and L in specific combinations. If the word ends in two vowels,
              plural = word + lastChar + "H";                       //then the last letter is doubled and "H" is added to end of word
           }
           String pluralizedWord = plural;
           return pluralizedWord;
     }

     public static String addOnSuffix(String word, String suffix) //this is the addOnSuffix method, hence where the suffix is added onto the word
     {
           String wordWithSuffix;
           int length, lengthOfWord, counter;
           char firstLetter, secondLetter, lastLetter, c;

           lengthOfWord = word.length();                    //calculates length of word
           lastLetter = word.charAt(lengthOfWord-1);        //calculates last letter of word
           secondLetter = word.charAt(lengthOfWord-2);      //calculates second to last letter of word
           firstLetter = suffix.charAt(0);                  //calculates first letter of word
           if(((firstLetter == 'A')||(firstLetter == 'C')||(firstLetter == 'S')||(firstLetter == 'L'))) //if statement which applies if the first letter of word is a "vowel"
           {
               if(((lastLetter == 'A')||(lastLetter == 'C')||(lastLetter == 'S')||(lastLetter == 'L')) && ((secondLetter != 'A')&&(secondLetter != 'C')&&(secondLetter != 'S')&&(secondLetter != 'L')))
               {                                            //if statement which applies if the last letter of word is a vowel, yet second to last letter is a "non-vowel"
                   String append = suffix.substring(1); //suffix is appended by dropping first letter of suffix then adding the suffix
                   wordWithSuffix = word + append;
               }
               if(((lastLetter != 'A')&&(lastLetter != 'C')&&(lastLetter != 'S')&&(lastLetter != 'L')) && ((secondLetter == 'A')||(secondLetter == 'C')||(secondLetter == 'S')||(secondLetter == 'L')))
                   wordWithSuffix = word + suffix;                                  //if statement which applies if the second to last letter of word is a vowel, yet last letter is a "non-vowel"
                                                                                //suffix is appended by merely adding it, no change to suffix
                   if(((lastLetter == 'A')||(lastLetter == 'C')||(lastLetter == 'S')||(lastLetter == 'L')) && ((secondLetter == 'A')&&(secondLetter == 'C')&&(secondLetter == 'S')&&(secondLetter == 'L')))
                   {                                                                    //if statement which applies if both the second to last and last letters are "vowels," if so
                       String firstChar = Character.toString(firstLetter);              //then the first letter will be added to word, and then the suffix (unchanged)
                       wordWithSuffix = word + firstChar + suffix;          
                   }
           }
           else //complicated else statement that puts together plurals and suffixes of words that don't begin with a "vowel"
           {
               if(((lastLetter == 'A')||(lastLetter == 'C')||(lastLetter == 'S')||(lastLetter == 'L')) && ((secondLetter != ('A'))&&(secondLetter != 'C')&&(secondLetter != 'S')&&(secondLetter != 'L')))
               {                                                                    //if the word does not begin with a "vowel" and the last letter does, yet the second to last does not, then
                  String firstChar = Character.toString(firstLetter);           //the first character is parsed to a string firstChar,
                  wordWithSuffix = word + firstChar + suffix;                       //and the word is put together as the word + the first character + add the suffix
               }
               if(((lastLetter != ('A'))&&(lastLetter != 'C')&&(lastLetter != 'S')&&(lastLetter != 'L')) && ((secondLetter == 'A')||(secondLetter == 'C')||(secondLetter == 'S')||(secondLetter == 'L')))
                   wordWithSuffix = word + suffix;                                  //if the word does not begin with a "vowel" and the second to last letter does, yet the last does not, then
               else                                                             //easily enough, the word is put together as the word plus the suffix
               {
                   if((lastLetter == 'A')||(lastLetter == 'C')||(lastLetter == 'S')||(lastLetter == 'L'))
                   {                                                                //if the word does not begin with a "vowel", yet the last letter is a "vowel,"
                       counter = (lengthOfWord-1);                              //assign integer counter to count the length of the word minus 1,
                       c = word.charAt(counter);                                //then assign character variable c to the character at the counter value, then
                       while ((c == 'A')||(c == 'C')||(c == 'S')||(c == 'L'))       //the while statement checks that character for whether or not it is a "vowel,"
                       {                                                            //
                           counter--;                                               //if so, then counter reassigns value to counter - 1, and then
                           c = word.charAt(counter);                                //reassigns character to the one at the new value
                       }                                                            //
                       String part1 = word.substring(0, counter+1);             //String part1 is generated with substring of word between character 0 and the character at counter - 1
                       String part2 = word.substring((counter+2), lengthOfWord);    //String part2 is generated with substring of word between the character at counter + 2 and the end of the word
                       String newWord = part1 + part2;                              //String newWord is created by putting together parts 1 and 2
                       wordWithSuffix = newWord + suffix;                           //The suffixed word is outputed as the newWord + the suffix
                   }
                   else
                   {
                       counter = (lengthOfWord-1);                                  //if word doesn't fall under any previous conditional statements, then counter is assigned a value equal to the length of
                       c = word.charAt(counter);                                    //the word - 1, and character c is equal to the character at the value counter
                       while ((c != 'A')||(c != 'C')||(c != 'S')||(c != 'L'))       //the while statement checks that character for whether or not is is a "vowel,"
                       {                                                            //
                           counter--;                                               //if so, then counter reassigns value to counter - 1, and then
                           c = word.charAt(counter);                                //reassigns character to the one at the new value
                       }                                                            //
                       String part1 = word.substring(0, counter);                   //String part1 is generated with substring of word between character 0 and the character at the counter value
                       String part2 = word.substring((counter+1), lengthOfWord);    //String part2 is generated with substring of word between the character at counter + 1 and the end of the word
                       String newWord = part1 + part2;                              //String newWord is created by putting together parts 1 and 2
                       wordWithSuffix = newWord + suffix;                           //The suffixed word is outputed as the newWord + the suffix
                   }
               }
           }//end of else
           String suffixedWord = wordWithSuffix;
           return suffixedWord;
       }//end of method

    public static void printFinalData(String line, String word, String suffix, String plural, String wordWithSuffix)    //method which outputs the final data, aka, the plural of word, suffixed word, etc.
    {
        System.out.println("Line Input:           " + line);
        System.out.println("Word:                 " + word);
        System.out.println("Suffix:               " + suffix);
        System.out.println("Plural Of Word:       " + plural);
        System.out.println("New Word With Suffix: " + wordWithSuffix);
        System.out.println();
    }

    public static void main(String[] args) throws IOException //this main method is what tells the other methods when to inititate (which order)
    {
        System.out.println("**********************************");
        System.out.println("* String Project                 *");
        System.out.println("* AP Computer Science A          *");
        System.out.println("* Joshua Nasiatka                *");
        System.out.println("* Winter 2012 (Senior Yr)        *");
        System.out.println("**********************************");
        System.out.println();
        System.out.println("The following is the output:");
        System.out.println();

        //String word = "", suffix = "";

        initiateFile();
        parseFile(pluralizedWord, suffixedWord);

        //plural = makePlural(word);
        makePlural(word);
        //wordWithSuffix = addOnSuffix(word, suffix);
        addOnSuffix(word, suffix);
    }

    public static void parseFile(String pluralizedWord, String suffixedWord) throws IOException
    {
        String line, word, suffix;
        int spaceIndex, length;

        line = reader.readLine(); //reads the input of each line of the external .txt file entitled "vowels.txt"

        while(line != null) //continues to input data until a null is reached in the reader
        {
            spaceIndex = line.indexOf(" ");
            length = line.length();
            word = line.substring(0, spaceIndex);
            suffix = line.substring((spaceIndex+1), length);
            makePlural(word);
            addOnSuffix(word, suffix);
            printFinalData(line, word, suffix, pluralizedWord, suffixedWord);
            line = reader.readLine();
        }
    }
}//end class` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:05:46.750

也许只是做 `String word = "aWord", "aSuffix"; String plural = makePlural(word); String wordWithSuffix = addOnSuffix(word, suffix);`

我可以看到您正在这样做，但已将其注释掉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T02:04:33.063

你是在说这条线`//plural = makePlural(word);`吗？好吧，编译器当然找不到符号，我也找不到。

您需要根据需要为`plural`、`word`、`wordWithSuffix`等定义引用并创建对象，然后才能在`main`.

# css - :nth-child - 在父悬停时激活

> ID：14742270
> 
> 赞同：1
> 
> 时间：2013-02-07T01:54:26.180
> 
> 标签：css, hover, parent-child, css-selectors

我希望悬停父元素并让它更改所有子元素的 CSS。我以为这很简单。很容易说：

```
.element:hover .children{
} 
```

在悬停该元素时，您可以确定要影响哪些元素。我希望这里的所有孩子都受到影响，但我不知道我做错了什么。这是一个简单的例子：

[http://jsfiddle.net/ZqTcT/11/](http://jsfiddle.net/ZqTcT/11/)

这是我正在使用的特定 nth-child CSS：

```
.rowYellow:hover .rowYellow:nth-child(n){
    color:yellow;
} 
```

我也尝试过使用我所知道的有效方法（第一个示例，我指定了一个要在悬停时更改的元素）并使用多个元素[http://jsfiddle.net/ZqTcT/12/](http://jsfiddle.net/ZqTcT/12/)：

```
.rowYellow:hover .rowIcon .rowLabel{
    color:yellow;
} 
```

我知道我养成了将这样的陈述分成两个（或更多）的习惯，因为它也不起作用。

那么，我哪里错了？两种方法都可以吗？如果是这样……怎么办？

任何和所有的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T01:58:07.247

```
.rowYellow:hover .rowYellow:nth-child(n){ 
```

以上只会影响与 class 同`rowYellow`在的元素`rowYellow`。

相反，要影响所有孩子，只需使用`*`选择器执行此操作：

```
.rowYellow:hover *{
    color:yellow;
} 
```

[**jsFiddle A**](http://jsfiddle.net/ZqTcT/13/)

您的第二个选择器说“类的悬停元素内`rowLabel`的类元素内的所有类元素”，这不是您想要的。相反，您需要一个逗号分隔的选择器：`rowIcon``rowYellow`

```
.rowYellow:hover .rowIcon, .rowYellow:hover .rowLabel{
    color:yellow;
} 
```

[**jsFiddle B**](http://jsfiddle.net/ZqTcT/15/)

作为旁注，我还推荐[30 个 CSS 选择器，你必须记住](http://net.tutsplus.com/tutorials/html-css-techniques/the-30-css-selectors-you-must-memorize/)它，因为它非常有帮助，直到你把每个选择器都钉牢了。

# html - 声明了 Doctype 的 IE8 中的绝对位置错误

> ID：14742273
> 
> 赞同：0
> 
> 时间：2013-02-07T01:54:55.307
> 
> 标签：html, css, internet-explorer-8

我已经查看了许多与我类似的问题，但还没有找到解决方案。我有一个带有类的图像，`.header-promo`它通过以下 CSS 定位：

```
#header .header-promo {
    position: absolute;
    top: 82px;
    right: 0px;
    height: 100px;
} 
```

我正在使用`HTML5 doctype`，但图像的位置仍然完全错误（在左上角）`IE8`。任何建议将不胜感激。谢谢，如果您想查看现场直播，您可以在[http://www.mainstreetveterinary.com](http://www.mainstreetveterinary.com)上查看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:15:33.630

检查元素后，看起来 IE8 没有选择该元素的样式，因为它在媒体查询中。IE8 不支持媒体查询，但是你可以试试这里的插件：[https ://github.com/scottjehl/Respond](https://github.com/scottjehl/Respond)

# python - 无法在 Windows 上安装 IMDbPY

> ID：14742277
> 
> 赞同：1
> 
> 时间：2013-02-07T01:55:43.713
> 
> 标签：python, python-c-api, imdbpy

我在 Windows 计算机上安装 IMDbPY 时遇到问题。我认为我的 c 编译器有问题，因为当我尝试使用 easy_install 或 pip 安装它时，它会出现以下错误：

> C:>easy_install IMDbPY 搜索 IMDbPY 最佳匹配：IMDbPY 4.9 将 IMDbPY 4.9 添加到 easy-install.pth 文件
> 
> 使用 c:\python27\lib\site-packages 处理 IMDbPY 的依赖项 搜索 lxml 阅读[http://pypi.python.org/simple/lxml/](http://pypi.python.org/simple/lxml/)阅读 [http://codespeak.net/lxml](http://codespeak.net/lxml)阅读[http://lxml。 de/](http://lxml.de/)最佳匹配：lxml 3.1beta1 下载[http://pypi.python.org/packages/source/l/lxml/lxml-3.1beta1.tar.gz](http://pypi.python.org/packages/source/l/lxml/lxml-3.1beta1.tar.gz) 处理 lxml-3.1beta1.tar.gz 运行 lxml-3.1beta1\ setup.py -q bdist_egg --dist-dir c:\users\alex\appdata\local al\temp\easy_install-a8mii5\lxml-3.1beta1\egg-dist-tmp-0witf6 构建 lxml 版本 3.1.beta1。没有 Cython 的建筑。错误：'xslt-config' 不是内部或外部命令、可运行程序或批处理文件。
> 
> ** 确保已安装 libxml2 和 libxslt 的开发包 **
> 
> 使用 libxslt 的构建配置警告：在目录“src\lxml”下找不到匹配“lxml.etree.c”的文件警告：在目录“src\lxml”下找不到匹配“lxml.objectify.c”的文件警告：找不到文件在“src\lxml”目录下匹配“lxml.etree.h”警告：在“src\lxml”目录下找不到匹配“lxml.etree_api.h”的文件警告：在“src”目录下找不到匹配“etree_defs.h”的文件\lxml'警告：在目录'src\lxml\tests'下找不到匹配' *.txt'的文件警告：在目录'doc'下找不到匹配'pubkey.asc'的文件警告：找不到匹配'tagpython的文件*.png' 在目录 'doc' 警告：在目录 'doc' cc1.exe 下找不到匹配 'Makefile' 的文件：错误：无法识别的命令行选项 '-mno-cygwin' 错误：安装脚本退出并出现错误：命令 'gcc'退出状态为 1 失败

查看该错误，似乎通常建议人们安装“python-dev”，但据我所知，这只是我在 Windows 上找不到的 linux 包。

当我尝试 Windows 可执行文件（[here](http://sourceforge.net/projects/imdbpy/files/IMDbPY/4.7/IMDbPY-win32-py2.7-4.7.exe/download?use_mirror=iweb&download=)）时，它给了我我认为是相同的错误，说：

> 运行时错误！R6034 应用程序尝试错误地加载 C 运行时库。请联系应用程序的支持团队以获取更多信息。

所以我变得非常沮丧，我想我会用 BeautifulSoup 来做点什么，但如果有人能告诉我我做错了什么，我会非常感激。

非常感谢，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:10:13.350

您可以使用 pip 安装 IMDbPY，因为它依赖于`lxml`，而它又无法编译和安装，因为您没有可用的 C 编译器`libxml2`和`libxslt`.

有几种解决方案。

第一个是

*   安装 Visual C++ 2008（Express 版本可以，但不是 2010 或 2012）
*   按照这个[指令](http://lxml.de/build.html#static-linking-on-windows)安装lxml，基本上`iconv, libxml2, libxslt, and zlib`从[这里](http://www.zlatkovic.com/libxml.en.html)安装，然后编译`lxml`
*   `pip`使用或安装 IMDbPy`easy_install`

第二种解决方案是

*   [从这里](http://www.lfd.uci.edu/~gohlke/pythonlibs/#lxml)安装 lxml
*   `pip`使用或安装 IMDbPy`easy_install`

第三种解决方案是

*   使用[ActivePython](http://www.activestate.com/activepython/downloads)并从 PyPM 安装[IMDbPY](http://code.activestate.com/pypm/imdbpy/)

第四种解决方案是

*   使用[主页](http://imdbpy.sourceforge.net/downloads.html)上的非官方安装程序。警告：这可能不会安装所有必要的依赖项。您在安装旧版本时遇到错误，请尝试使用最新版本。

# .htaccess - htaccess 不工作

> ID：14742284
> 
> 赞同：1
> 
> 时间：2013-02-06T16:11:58.657
> 
> 标签：.htaccess, apache

我刚刚从某人那里继承了一个 ExpressionEngine 站点，而没有太多关于它是如何组合在一起的文档的。我正在尝试设置一些 301 重定向，但 htaccess 文件被忽略了。我在与我们的索引文件相同的目录中有一个名为 .htaccess 的文件，但它没有被读取。

我们的 IT 部门说 Apache 中的 AllowOverride 设置为“全部”，他们怀疑问题出在 ExpressionEngine 内部。ExpressionEngine 中是否有可以启用/禁用 htaccess 的地方，或者这是 Apache 的事情？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:47:51.107

谢谢。这是我在 htaccess 文件中的内容：

```
# Standard .htaccess file

# Secure .htaccess file
<Files .htaccess>
order allow,deny
deny from all
</Files>

Redirect 301 /index.php/info_resources/sites http://www.cptc.edu/index.php/site_directory/

# Don't show any directory without an index file
Options -Indexes

# Dont list files in index pages
IndexIgnore *

# EE 404 page for missing pages
# May differ depending on where your template is located.
ErrorDocument 404 /index.php?/site/404 
```

# r - ggplot2 + aes_string 通过公式接口在函数内

> ID：14742287
> 
> 赞同：8
> 
> 时间：2013-02-07T01:56:35.367
> 
> 标签：r, ggplot2, facet

以交互方式，此示例运行良好：

```
p <- ggplot(mtcars, aes(mpg, wt)) + geom_point()
p + facet_grid(. ~ vs) 
```

现在，用公式接口制作一个函数并使用`aes_string`它来做同样的事情，它不起作用（错误是：）`Error in layout_base(data, cols, drop = drop) : At least one layer must contain all variables used for facetting`：

```
tf <- function(formula, data) {
res <- as.character(formula[[2]])
fac2 <- as.character(formula[[3]][3])
fac1 <- as.character(formula[[3]][2])

# p <- ggplot(aes_string(x = fac1, y = res), data = data)
# p <- p + geom_point() # original attempt
p <- ggplot() # This is Joran's trick, but it doesn't work here
p <- p + geom_point(aes_string(x = fac1, y = res), data = data)
p <- p + facet_grid(.~fac2) # comment this out, and it works but
# of course is not faceted
}

p <- tf(formula = wt ~ am*vs, data = mtcars) 
```

通过 Joran 的技巧，我在[这里](https://stackoverflow.com/questions/14348781/ggplot2-inside-function-with-a-2nd-aesthetic-scoping-issue)指的是，这是我最近发布的一个类似问题。在这种情况下`ggplot2`，看不到我的分面请求。让它`facet_grid(".~fac2")`没有效果。建议？我一直被这些事情弄得不知所措。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T02:15:22.063

您可以使用`as.formula`和`paste`：

```
p <- p + facet_grid(as.formula(paste(". ~", fac2))) 
```

在您的示例中，这给出了：

![在此处输入图像描述](../Images/96a8b5bbfd9085c12fa5cb84518fae23.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-07T02:35:04.340

我已经用于`formula.tools`操作公式。

我认为你应该对分面公式有一个单独的论据，否则你将不得不创建自己的解析器来`wt ~ am*vs`计算分面的含义

像格子分组的想法可能有用

`wt~am | vs`

但是您必须深入研究 lattice 才能了解它们如何解析公式（看看`latticeParseFormula`- 复杂！）

更容易将两个公式分开。您可以将字符变量列表作为 rhs 和 lhs 传递`facet`给`facet_grid`

我还使用`environment = parent.frame()`了在我的小型测试中有效的方法

```
library(formula.tools)

tf <- function(formula, faceting = NULL, data, print = TRUE) {
   y <- rhs(formula)
   x <- lhs(formula)

  p <- ggplot(environment = parent.frame()) 

  p <- p + geom_point(aes_string(x = x, y = y), data = data) 
   if (! is.null(faceting)){
     rhsfacet <- all.vars(rhs(faceting))
     lhsfacet <- all.vars(lhs(faceting))
     if(length(lhsfacet)==1 & any(lhsfacet %in% '.')) {lhsfacet <- NULL}
     if(length(rhsfacet)==1 & any(rhsfacet %in% '.')) {rhsfacet <- NULL}
     p <- p+ facet_grid(facet = list( lhsfacet, rhsfacet))}
  if(print) {print(p)}
  p 

}
tf(wt~mpg, faceting = ~am, data = mtcars, print = TRUE) 
```

![在此处输入图像描述](../Images/c7202cb4b362c2c1837a6a431cd5a0ec.png)

# ruby-on-rails - 如何在 Rails 3.2 中返回（多个）关联中的唯一记录

> ID：14742291
> 
> 赞同：0
> 
> 时间：2013-02-07T01:57:10.267
> 
> 标签：ruby-on-rails, rails-activerecord

首先，感谢大家花时间阅读这篇文章。非常非常感谢提前。

我试图弄清楚如何检索提供商可能拥有的所有***唯一位置名称。***

我的第一个想法是在 Provider 模型中编写一个方法，该方法将遍历所有课程然后出现并返回唯一位置列表。

我查看了 Rails api 中的[.uniq](http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-uniq)方法，但没有任何运气。

这是我的不同模型/关联的样子：

模型/提供者.rb

```
class Provider < ActiveRecord::Base
  has_many :courses
  has_many :teachers
end 
```

模型/课程.rb

```
class Course < ActiveRecord::Base
  has_many :occurrences, :dependent => :destroy
  belongs_to :provider
end 
```

模型/occurrence.rb

```
class Occurrence < ActiveRecord::Base
  belongs_to :course
  belongs_to :location
end 
```

模型/位置.rb

```
class Location < ActiveRecord::Base
  attr_accessible :name
  has_many :occurrences
end 
```

实现这一目标的最佳方法是什么？

阅读评论后，我尝试了这个：

我在 Provider 模型中创建了一个 unique_locations 方法，它具有以下代码（基于您的回答）

```
def unique_locations
  Location.joins(occurrences: :course).where(courses: { provider_id: self.id }).uniq.pluck('locations.name')
end` 
```

并在我看来使用它：

```
<% @provider.unique_locations.each do |l| %>
  <%= l %><br>
<% end %>` 
```

但我仍然得到非独特的结果。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T02:38:05.933

您可以尝试`Location.uniq.pluck(:name)`将返回一组唯一位置名称。从提供者出发，您必须使用`:joins`（给定 a `@provider`）

```
Location.joins(occurences: :course).where(courses: { provider_id: @provider.id }).uniq.pluck('locations.name') 
```

# iphone - 核心情节：轴标签相互施加

> ID：14742299
> 
> 赞同：1
> 
> 时间：2013-02-07T01:58:11.147
> 
> 标签：iphone, ios, objective-c, graph, core-plot

我正在使用自定义标签，当 x 轴标签施加在另一个 x 轴标签上时我遇到了问题，当用户缩小散点图（实时）时，我不知道如何隐藏这些标签。
请参阅下面的打印屏幕：我想隐藏“2012 年 8 月”标签。
我怎样才能做到这一点？

![在此处输入图像描述](../Images/df3b0b9c28522b08e4eb3e2a059c991f.png)

下面是我正在使用的代码：

```
 CPTXYAxis *x          = axisSet.xAxis;
    x.orthogonalCoordinateDecimal = CPTDecimalFromInteger(0);
    x.majorIntervalLength         = CPTDecimalFromInteger(150);
    x.minorTicksPerInterval       = 5;
    x.axisConstraints             = [CPTConstraints constraintWithLowerOffset:0.0f];
    x.labelingPolicy=CPTAxisLabelingPolicyNone;
    NSUInteger labelLocation = 0;
    NSMutableArray *customLabels = [NSMutableArray arrayWithCapacity:[objects count]];
    NSMutableSet *xMajorLocations = [NSMutableSet setWithCapacity:[objects count]];
    for (NSInteger i = 0; i < [objects count]; i++) {
        NSManagedObject *theLine = [objects objectAtIndex:i];

        NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
        NSString *sPeriodText = @"";

        [dateFormatter setDateFormat:@"MMMM yyyy"];
        sPeriodText = [dateFormatter stringFromDate:[theLine valueForKey:@"period_start"]];

        CPTAxisLabel *newLabel = [[CPTAxisLabel alloc] initWithText:sPeriodText textStyle:labelTextStyle];
        newLabel.tickLocation  = CPTDecimalFromInteger(labelLocation++);
        newLabel.offset = x.labelOffset + x.majorTickLength;
        [customLabels addObject:newLabel];
        [xMajorLocations addObject:[NSNumber numberWithFloat:labelLocation-1]];
    }
    x.axisLabels =  [NSSet setWithArray:customLabels];
    x.majorTickLocations = xMajorLocations; 
```

谢谢！

PS 我试图使用 CPTAxis 的 labelExclusionRanges，但它不适用于自定义标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T00:47:55.297

了解如何制作它。因为我使用日期格式作为 x 轴标签，所以我需要使用 CPTTimeFormatter + preferredNumberOfMajorTicks，而不是自定义标签！

这是下面的代码：

```
...
    NSManagedObject *theLineFirst = [objects objectAtIndex:0];
    NSManagedObject *theLineLast  = [objects objectAtIndex:[objects count]-1];
    NSDate *refDate = [NSDate dateWithTimeInterval:0 sinceDate:[theLineFirst valueForKey:@"period_start"]];
    NSTimeInterval secondsBetween = [[theLineLast valueForKey:@"period_start"] timeIntervalSinceDate:[theLineFirst valueForKey:@"period_start"]];
    NSTimeInterval onePart        = secondsBetween/[objects count];

    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;
    plotSpace.delegate = self;
    plotSpace.allowsUserInteraction = YES;
    plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromInteger(-onePart) length:CPTDecimalFromInteger(secondsBetween+onePart*2)];
    plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromInteger(minCData) length:CPTDecimalFromInteger(abs(maxCData-minCData))];
    plotSpace.globalXRange = plotSpace.xRange;
    plotSpace.globalYRange = plotSpace.yRange;

    // Axes
    CPTXYAxisSet *axisSet = (CPTXYAxisSet *)graph.axisSet;
    CPTXYAxis *x          = axisSet.xAxis;
    x.orthogonalCoordinateDecimal = CPTDecimalFromInteger(0);
    x.majorIntervalLength         = CPTDecimalFromInteger(5);
    x.minorTicksPerInterval       = 0;
    x.axisConstraints             = [CPTConstraints constraintWithLowerOffset:0.0f];
    x.labelingPolicy              = CPTAxisLabelingPolicyAutomatic;
    // added for date
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"MMMM yyyy"];
    CPTTimeFormatter *timeFormatter = [[CPTTimeFormatter alloc] initWithDateFormatter:dateFormatter];
    timeFormatter.referenceDate     = refDate;
    axisSet.xAxis.labelFormatter    = timeFormatter;
    x.preferredNumberOfMajorTicks = 4;
...

-(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot {
    return [objects count];
}

-(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index {
    NSManagedObject *theLineFirst = [objects objectAtIndex:0];
    NSManagedObject *theLine = [objects objectAtIndex:index];
    NSTimeInterval secondsBetween = [[theLine valueForKey:@"period_start"] timeIntervalSinceDate:[theLineFirst valueForKey:@"period_start"]];

    switch (fieldEnum) {
        case CPTScatterPlotFieldX:
            return [NSNumber numberWithDouble:secondsBetween];

        case CPTScatterPlotFieldY:
            return [NSNumber numberWithDouble:[[theLine valueForKey:@"cdata"] doubleValue]];
    }
    return [NSDecimalNumber zero];
} 
```

就这样！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T01:48:19.527

Core Plot 还没有自动处理这个问题。您必须使用绘图区域的可用宽度和标签的大小来决定何时显示每个刻度线的标签并在适当的位置省略自定义标签。

# asp.net - WF4 WCF 在错误的时间发送消息

> ID：14742306
> 
> 赞同：2
> 
> 时间：2013-02-07T01:58:52.567
> 
> 标签：asp.net, wcf, iis, workflow-foundation-4, workflowservice

我在 IIS 中托管工作流服务 (xamlx)。它有一些接收活动，例如 MethodA 和 MethodB。我编写了一个 MVC 应用程序作为客户端来调用这些方法。在 PageA 中，用户提交表单会调用 MethodA，工作流会转到等待 MethodB 的 Receive Activity。然后在Page B，用户提交表单会调用MethodB。但是，如果用户在 PageA 中提交，然后返回到 PageA 并再次提交相同的工作流实例，它将等待一分钟并给出超时异常：

> 00:01:00 后等待回复时请求通道超时。增加传递给 Request 调用的超时值或增加 Binding 上的 SendTimeout 值。分配给此操作的时间可能是较长超时的一部分。

这个错误似乎来自 WCF，而我想它会给出以下错误：

> InstancePersistenceCommand 的执行被中断，因为实例键“guid”未与实例关联。这可能是因为实例或密钥已被清理，或者因为密钥无效。如果生成密钥的消息在错误的时间发送或包含不正确的相关数据，则密钥可能无效。

我有几个问题：

1.  有没有我们可以设置的配置，以便可以捕获另一个异常，而不是等待一段时间直到可以捕获超时异常？我知道我们可以在绑定标签中设置一个较小的超时值，但这不应该是一个解决方案。

2.  当工作流实例未处于正确状态时，是否有任何方法可以避免显示 PageA？（即使这样做了，我们还需要解决问题1，因为用户可以打开PageA并在提交前空闲一段时间）

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T04:46:04.440

**回复：超时异常。**

这是 WF4 中的一个已知错误。这是 WF/WCF 基础结构将尝试传递消息这一事实的结果。这意味着它将在消息上挂起一段时间，然后查看工作流是否进入可以处理消息的状态。基础架构并不真正了解您的工作流程的结构。因此，即使您完全意识到工作流处于一种状态，即在给定当前状态的情况下，基础设施将等待它永远无法处理消息。

**回复：避免显示 PageA。**

这实际上取决于 UI 层并且超出了工作流的范围。正如您指出的那样，并非完全可以避免。但是，我在持久存储中使用书签信息取得了很好的成功。每个接收活动都会创建一个具有已知名称的书签，我基本上检查了那里的书签。基于此信息，我将启用/禁用部分 UI。它并不能真正解决用户打开页面并将其保留 15 分钟的问题，因此在调用服务方法时仍然需要一个错误处理程序。对此进行改进的一种方法是，暂时假设一个基于 HTML 的 UI，使用 WebSockets 或[SignalR](http://signalr.net/)为了更实用，将工作流状态更改从服务器推送到客户端。仍然不会消除错误处理的需要，但应该使 UI 处于错误状态的窗口更小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-20T14:59:51.747

由于我遇到了类似的问题，我想提供一些关于[Maurice's answer](https://stackoverflow.com/a/14743730/626761)的超时部分的背景知识。

该信息来自 Jim Carley 在[此 Microsoft 论坛主题](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/275f7817-1ec7-433c-89ba-fe48afd1dae8/wf4-wcf-send-message-at-wrong-time?forum=wfprerelease)上的一篇帖子。不幸的是，不支持直接链接到帖子——搜索“协议书签”。我将在这里总结重要的部分。

## 背景

*   并非所有书签都是一样的。接收活动创建的那些（“协议书签”）与“非协议”书签的处理方式不同。
*   Pick 活动在内部创建一个非协议书签以在触发器完成时恢复。
*   当接收到操作的消息并且没有该操作的协议书签时，工作流基础结构会检查是否有工作流实例的任何未完成*的非协议*书签。

    *   如果有，则基础结构会挂起消息，并且可能会发生超时。
    *   否则消息会立即被拒绝。

## 底线

以下活动都创建内部书签，因此在与接收活动和乱序消息混合时可能导致超时问题：

*   挑选
*   状态
*   CompensableActivity（以及相关的 CompensationExtension）
*   确认
*   延迟

对于 Pick，一个潜在的解决方法是使用 Parallel 并将 CompletionCondition 设置为`true`。

# php - github api v3 创建树 php

> ID：14742310
> 
> 赞同：-1
> 
> 时间：2013-02-07T01:59:09.343
> 
> 标签：php, git, api, github

我接近让这个工作，但每次我尝试创建一棵树时，我都会收到服务器错误。有任何想法吗？这是我的php代码：

```
function send_data($url, $content) {
    $ch = curl_init();
    $timeout = 5;
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
    curl_setopt($ch, CURLOPT_USERPWD, 'myuser:mypass');
    curl_setopt($ch, CURLOPT_POST, TRUE);
    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($content));
    $a = array();
    $a['d'] = curl_exec($ch);
    $a['i'] = curl_getinfo($ch);
    curl_close($ch);
    return $a;
}

$treeArr = array(
    "base_tree" => "d7126bd6c559ab461e851e96ef2c33675d851c5e",
    "tree" => array(
        "path" => "resources/blahTest.txt",
        "mode" => "100644",
        "type" => "blob",
        "sha" => "38d15319d3ee8a7292be0ec0da65fe111660a94d"
    )
);

$x = send_data("https://api.github.com/repos/srolfe26/Branch-IDE/git/trees",$treeArr);
print_r($x); 
```

我为 blob 提供的 sha 是我使用相同的 send_data 函数创建的新创建的 blob。base_tree sha 是从基本提交中找到的树。另外，我在这里关注这个例子：[http ://www.pqpq.de/2011/07/pithub-how-to-commit-new-file-via.html](http://www.pqpq.de/2011/07/pithub-how-to-commit-new-file-via.html)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T15:53:44.430

请求数据中的“树”项目需要是项目数组而不是单个项目，因为树是项目的集合。

```
$treeArr = array(
    "base_tree" => "d7126bd6c559ab461e851e96ef2c33675d851c5e",
    "tree" => array(
        array(
            "path" => "resources/blahTest.txt",
            "mode" => "100644",
            "type" => "blob",
            "sha" => "38d15319d3ee8a7292be0ec0da65fe111660a94d"
        )
    )
); 
```

# xcode - iPhone 开发者许可问题

> ID：14742311
> 
> 赞同：0
> 
> 时间：2013-02-07T01:59:10.387
> 
> 标签：xcode, iphone-developer-program

好的，所以我今天更换了我的 iPhone。由于某种原因，现在我的应用程序无法下载到我的新手机上。在我拿到这款新手机之前，我备份了我的手机和所有内容。我的手机在 Xcode 的编辑方案中弹出，但是当我在手机上运行它时，它显示“找不到此可执行文件的有效配置文件”。当我查看管理器时，它显示我的手机已连接，旁边有一个绿灯。在软件版本下，显示“Xcode 找不到安装此版本的软件映像”。这有什么关系吗？我不知道该怎么做，我查看了其他人的问题，即找不到可执行文件，但通过他们的问题，我无法解决我的问题。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T02:22:07.140

您是否已将您的设备添加到开发者门户中？通常，这是通过 Xcode 自动完成的。您有一个新设备，因此很明显 UDID 已更改。登录到[http://developer.apple.com](http://developer.apple.com)，然后是 iOS 配置门户，最后是设备。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T02:03:57.163

您是否在管理器中启用了手机进行开发？

# jakarta-ee - glassfish 上的无密码身份验证

> ID：14742312
> 
> 赞同：1
> 
> 时间：2013-02-07T01:59:29.260
> 
> 标签：jakarta-ee, authentication, joomla, glassfish, ejb

我正在使用 Glassfish 开发一个 Web 应用程序，该应用程序必须与使用 Joomla CMS 的现有 php Web 应用程序接口。

我想使用 glassfish 安全角色来保护 EJB，但这样做会提示用户在离开 joomla（用于登录）时登录 glassfish。

想法： **我想使用存储在用户浏览器中的用户 cookie/用户名登录。**

问题：实现此结果的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T22:30:13.660

解决方案是使用 servlet 来捕获 cookie，然后使用

```
request.login(username, password); 
```

有关官方 JavaEE 教程的更多详细信息：http: [//docs.oracle.com/javaee/6/tutorial/doc/glxce.html](http://docs.oracle.com/javaee/6/tutorial/doc/glxce.html)

# jquery - 单击按钮时同时从左右滑动元素？

> ID：14742313
> 
> 赞同：-1
> 
> 时间：2013-02-07T01:59:33.020
> 
> 标签：jquery, slide

我试图让两个元素通过单击滑入。我希望第一个元素 (an `img`) 从左侧滑入，而另一个元素 (a`p`标签) 在单击按钮 (an ) 时从右侧滑入`li`。然后，当单击另一个按钮时，我希望前两个元素消失，接下来的两个元素（对应于单击的按钮）滑入。

有没有办法遍历这些，所以它们总是滑入。

$('#nav-button-1').click(function() {

```
 $('#people-2').hide();
   $('#people-3').hide();
   $('#people-1').show();

$('.slideleft').animate({
    marginLeft: '103px'
  }, 1000, function() {
    // Animation complete.
});
$('#slideright').animate({
    marginRight: '12px'
  }, 1000, function() {
    // Animation complete.
}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:18:08.990

这是一个开始的例子。

我用你原来的 JS 做了一个函数

```
function doAnimation(id) {
    $(id).children('.slideleft').fadeIn(function () {
        $(this).animate({
            marginLeft: '103px'
        }, 1000, function () {
            // Animation complete.
        });
    });
    $(id).children('.slideright').fadeIn(function () {
        $(this).animate({
            marginRight: '12px'
        }, 1000, function () {
            // Animation complete.
        });
    });
} 
```

这是一个在按钮按下时调用的方法。它接受包含动画项目的包装器的 ID，并最终调用上述方法。

```
function animatePeople(id) {
    // If there are visible people
    if ($('.people:visible').length > 0) {
        // Fade out the visible people and then process the following callback function
        $('.people:visible').fadeOut(function () {
            // Reset the margins
            $('.people').css({
                'margin-left': '',
                'margin-right': ''
            });
            // Do the new animation
            doAnimation(id);
        });
    } else {
        // Do the new animation
        doAnimation(id);
    }
} 
```

最后，这些是按钮的处理程序。

```
$('#nav-button-1').click(function () {
    animatePeople('#people-holder-1');
});
$('#nav-button-2').click(function () {
    animatePeople('#people-holder-2');
}); 
```

[jsfiddle](http://jsfiddle.net/BQTYc/2/)

# css - 调整 Twitter Bootstrap 列的大小

> ID：14742318
> 
> 赞同：0
> 
> 时间：2013-02-07T02:00:00.820
> 
> 标签：css, twitter-bootstrap

假设我有这个（使用 TB）：

```
<div class="container-fluid">
   <div class="row-fluid">
      <div class="span2"></div>
      <div class="span8"></div>
      <div class="span2"></div>
   </div>
</div> 
```

我需要第`.span2`一个更宽一些。看起来`.span8`有某种代表排水沟的边距/填充。如果我可以减少一点，那么第一个`.span2`会变得更宽，我想。

我似乎找不到合适的选择器和属性来设置。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:03:40.490

如果您更改跨度宽度，它将弄乱所有其他跨度的宽度。您最好的选择是构建具有不同网格大小的自定义引导 css 文件。

[http://twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)

# c++ - 为什么我在解决方案资源管理器窗口中有一个外部依赖项文件夹（快捷方式）？

> ID：14742323
> 
> 赞同：3
> 
> 时间：2013-02-07T02:00:42.267
> 
> 标签：c++, visual-studio-2010, qt, glsl

我的电脑里有Qt5和vs2010 qmake -tp vc chapter01.pro 然后在vs2010中打开：

![文件夹快捷方式](../Images/d6e73ca4635b9c052d51cbb5b676db14.png) ![展开外部依赖项快捷方式](../Images/dec53df53c201b152fd19652ba6350ec.png)

为什么我在解决方案资源管理器窗口中有一个外部依赖项文件夹（快捷方式）？

似乎当前程序正在使用 External Dependencies 文件夹（快捷方式）中的头文件。如何禁用此文件夹或如何使用此文件夹中的头文件停止程序？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-07T02:22:42.590

当然，这些是外部依赖项 - Visual Studio (IntelliSense) 发现您的项目正在使用这些依赖项。

如果这太困扰您，您可以通过进入**工具**->**选项**->**文本编辑器**-> **C/C++** ->**高级**来隐藏此文件夹。找到**Disable External Dependencies Folders**，将其设置为**True**并重新启动 Visual Studio！

# sql - 如何授予对 SQL Server 代理的访问权限以便能够写入/修改系统文件？

> ID：14742324
> 
> 赞同：5
> 
> 时间：2013-02-07T02:00:50.643
> 
> 标签：sql, sql-server, tsql, jobs, bcp

我有一个工作，它有一个运行 BCP 来查询一些数据的存储过程。

如果我自己运行 QUERYOUT 命令，它就可以工作。

但是，如果我尝试在 JOB 中运行它，它会创建文件但“挂起”并且数据永远不会放入文件中。这会永远挂起，所以我通常会终止 BCP.exe。

我的问题是：

我如何获得 SQL 作业来运行 BCP 来执行 QUERYOUT 并拥有这样做的权限？

QUERYOUT 将转到 C:\ 驱动器（所以没有什么花哨的东西）。

这个问题让我发疯了，从在线阅读来看，运行作业的用户似乎需要对该文件夹的权限。该文件夹不受保护或任何东西。

SQL 作业的所有者是 SQL 中 SYS ADMIN 组的一部分。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-07T02:33:26.777

检查分配给 SQL Server 代理服务的用户。打开 services.msc，找到 SQL Server 代理并检查登录属性。将有一个 LocalSystem 用户（不太可能，根据您的描述）或另一个用户。

检查用户是否对您尝试写入 BCP 转储的文件夹具有“写入”权限。

# python - 读取文件内容并在浏览器上显示

> ID：14742325
> 
> 赞同：-1
> 
> 时间：2013-02-07T02:01:11.137
> 
> 标签：python, flask

我正在尝试使用烧瓶来实现以下目标。

我的本地磁盘上有一个文件。它是一个大文件。所以我只想读取该文件的前 20 行。

如何读取文件并在浏览器上显示其内容？

任何指针..建议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:41:03.900

像这样的东西，应该工作

```
import webbrowser

# firstly you need to make write to an html file that will have the top 20 lines 
# you can do that using 

top_lines_file = open("shows.html", "w")
i = 1
while i in range(1,21):
    top_lines_file.write("write something to the file")
    i += 1
    # this will iterate over the file and write to it 20 times
top_lines_file.close() # close the file

# now you need to pass the path of the html file to the webbrowser object
webbrowser.open("file://" + path/to/the/html/file) 
# this will open the webbrowser with your html file 
```

# php - 如何找出页面正在使用的查询

> ID：14742326
> 
> 赞同：0
> 
> 时间：2013-02-07T02:01:15.493
> 
> 标签：php, mysql, moodle

我有一个页面，您可以在其中选择几个下拉列表来选择有关如何显示网站日志的选项，因此可以对日志进行不同的搜索，但是结果太长而无法导出到 csv 文件由网站（这个问题中的 Moodle - PHP）。

所以我在想的是，如果我能以某种方式显示它在“搜索”中使用的确切查询，我可以使用 myPhpAdmin 直接在数据库上运行它并从那里导出结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:05:21.050

如果您的数据库服务器不是那么忙，而不是在您的应用程序中四处乱窜并试图让它在查询执行之前显示查询，这可能很棘手，您可以随时打开[通用查询日志](http://dev.mysql.com/doc/refman/5.5/en/query-log.html)并查找有问题的查询。

```
SET GLOBAL general_log = 'ON'; 
```

完成后请务必关闭查询记录器。记录每个查询是使数据库崩溃的好方法，因为它最终*会*耗尽磁盘空间。

# java - 在 Java 中拆分 .avi 文件

> ID：14742330
> 
> 赞同：0
> 
> 时间：2013-02-07T02:02:37.167
> 
> 标签：java, movie

我的 .avi 视频文件有点大（一两个超过 13 GB）。我有一个带有开始时间和结束时间的 csv 文件，如下所示：

```
start        end
00:00:23     00:03:24
etc          etc 
```

我想根据csv 文件中指定的`start`和位置将此 .avi 文件拆分为更小的视频文件（最好是 .avi，但不是必需的）。`end`

我的问题是：我怎样才能在 Java 中做到这一点？请注意，读取 csv 文件不是问题，而是如何编写代码从视频文件中抓取剪辑？

注：如果Java**真的**不适合这样的任务，C++能做到吗？如果是这样，在这种情况下代码会是什么样子？如果 C++ 做不到，那还能做什么？或者也许我可以使用命令行工具？我在 Mac OS X 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:30:56.613

调用外部程序进行拆分。[Mplayer](http://www.mplayerhq.hu/)可以这样做：

```
mencoder -oac copy -ovc copy -forceidx -idx -o out.avi [filename] -ss [startTime] -endpos [duration] 
```

# javascript - 使用 javascript 创建元素，然后使用 css 对其进行动画处理

> ID：14742331
> 
> 赞同：1
> 
> 时间：2013-02-07T02:02:42.483
> 
> 标签：javascript, html, css, transitions, createelement

是否可以使用 javascript 创建一个新元素并将其添加到 body，然后使用 css 自动对其进行动画处理？这是我的测试页面

```
<body>

<script>
function menuMain(){
    Title = document.createElement("div");
    Title.style.left = "750px";
    Title.style.webkitTransition = "4s";
    Title.style.fontSize = "30px";
    Title.style.position = "fixed";
    Title.style.color = "red";
    Title.id = "titleid";
    Title.innerHTML = "Menu Title";
    document.getElementsByTagName("body")[0].appendChild(Title);
    Title.style.left = "200px";
}

menuMain();
</script>

</body> 
```

但它只是自动将对象放置在`left:200px`，而不是将其从 750 像素设置为 200 像素。我知道`Title.style.webkitTransition = "4s"`有效，因为当我检查元素时，它就在元素的样式中

我也尝试更换

```
Title.style.left = "200px"; 
```

和

```
document.getElementById("titleid").style.left = "200px"; 
```

但它只是做同样的事情。

我知道当我手动创建元素时，然后用 javascript 将其动画从左侧更改`left:750px`为`left:200px`

```
<body>
<div id="titleid" style="-webkit-transition:4s;position:absolute;color:red;font-size:30px;left:750px;">Menu Title</div>
<script>
function menuMain(){
    document.getElementById("titleid").style.left = "200px";
}

menuMain();
</script>

</body> 
```

但这不是我想做的。那么它可能以某种方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:04:05.943

假设你只是想要一个过渡，看看 jQuery 动画：[http ://api.jquery.com/animate/](http://api.jquery.com/animate/)

它会让这样的事情变得微不足道。

# iphone - 为什么 UIActionSheet 不支持我的风景？

> ID：14742335
> 
> 赞同：0
> 
> 时间：2013-02-07T02:03:08.160
> 
> 标签：iphone, ios, objective-c, uiactionsheet

我有一个带有 tabbarcontroller 的应用程序，有两个控制器，现在在一个控制器中，我以纵向模型显示 uiactionsheet：

UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:@"" delegate:nil cancelButtonTitle:@"Cancel" 破坏性ButtonTitle:@"Del" otherButtonTitles:nil,nil];

```
actionSheet.actionSheetStyle = UIActionSheetStyleBlackTranslucent;
[actionSheet showInView:self.view];
actionSheet.autoresizingMask = UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleBottomMargin;
[actionSheet release]; 
```

我发现当我将模式更改为横向时，它不起作用，因为它没有响应控制器委托：

-(void) willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 持续时间:(NSTimeInterval)duration

如果 actionsheet 没有显示，控制器可以更改为 Landscape，为什么？非常感谢你！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T04:26:20.097

试试这个：

```
UIActionSheet *sheet = [[UIActionSheet alloc] initWithTitle:@"Some text..."
                           delegate:self
                  cancelButtonTitle:@"Cancel"
             destructiveButtonTitle:@"Delete"
                  otherButtonTitles:@"Button 1",@"Button 2",nil];

  if ([[[UIDevice currentDevice] systemVersion] floatValue] >= 3.0 ||
      UIDeviceOrientationIsPortrait([[UIDevice currentDevice] orientation])) {
    [sheet showInView:self.view];
  } else {
    [sheet showInView:self.view.window];
  } 
```

# javascript - knockout.js 有没有办法在 bindingHandler 中将值绑定设置为新创建的元素

> ID：14742340
> 
> 赞同：0
> 
> 时间：2013-02-07T02:03:43.047
> 
> 标签：javascript, knockout.js

我正在创建 bindingHandler，它假设在元素内部创建`label`和`input`元素，并将新创建的输入值附加到 viewModel 中已经设置的 observable。

但这比我想象的要棘手，我不知道如何传递 observable，因为我尝试的任何东西要么抛出错误，要么将 observable 函数绑定为字符串，这不是我想要的。

所以我想知道我怎样才能达到这个结果？

目前我正在传递这样的值

```
data-bind="input: {placeholder: 'Username', value: username, class: 'input'}" 
```

我知道我可以通过创建模板来获得类似的结果，但我想知道是否有办法做到这一点？它会给我更多的灵活性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:19:01.450

Knockout 公开了一个功能`ko.applyBindingsToNode`，可以满足您的需求。创建`input`元素后，您应该像这样设置绑定：

```
ko.applyBindingsToNode(input, function() {
    return {
        value: valueAccessor().value
    };
}); 
```

从 Knockout 3.0 版开始，您也可以使用此方法：

```
ko.applyBindingAccessorsToNode(input, {
    value: function() {
        return valueAccessor().value;
    }
}); 
```

# asp.net - xmltextwrite 保存文件 - 指定主机名或服务器名

> ID：14742344
> 
> 赞同：0
> 
> 时间：2013-02-07T02:04:20.510
> 
> 标签：asp.net, visual-studio-2008, load-balancing, ftpwebrequest, xmlwriter

我正在尝试将 XML 文件保存在服务器上并通过 FTP 将其发送到另一个远程。要创建/保存 XML 文件，我正在使用

```
XmlWriter writer = XmlWriter.Create("d:\\path\\to\\folder\\filename.xml"); 
```

并上传到FTP。

`FtpWebRequest reqFTP = (FtpWebRequest)FtpWebRequest.Create(new Uri(filename);`

一切正常。它创建 XML 文件，保存到文件夹，正确发送到 FTP。但是现在我在部署代码时遇到了麻烦。我们有一个负载均衡器和**两个产品服务器**。所以我现在不能确定它会保存在哪里。并且由于它可能在其他服务器上不可用，我可能会得到 404。

保存 XML 文件时，有没有办法可以在文件位置之前指定服务器名？基本上我想要一个通用的位置说明符来查看主机名/IP地址以及已经实现的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T23:19:43.507

我以不同的方式解决了这个问题。我想不出一个共同的位置，所以我试图消除对共同位置的需求。

我使用`MemoryStream`对象并将我的 XML 文件存储在内存中而不是物理上的服务器中，然后从那里发送。这样就不需要保存到本地路径。更多示例代码如下。

```
 StringBuilder builder = new StringBuilder() ;                
    XmlWriterSettings settings = new XmlWriterSettings();
    settings.Encoding = Encoding.UTF8;
    settings.Indent = true;
    using (XmlWriter writer = XmlWriter.Create(builder, settings))
         {                    
            writer.WriteProcessingInstruction("xml", "version=\"1.0\" encoding=\"utf-8\"");
            writer.WriteStartElement("mainElem");
            writer.WriteStartElement("elem");
            writer.WriteElementString("var1", "data");
            writer.WriteElementString("var2", "data");
            writer.WriteEndElement();
            writer.WriteEndElement();
            writer.WriteEndDocument();
            writer.Flush();
            writer.Close();
        }
 byte[] a = System.Text.Encoding.UTF8.GetBytes(builder.ToString());
 MemoryStream stream = new MemoryStream(a);
 return stream; 
```

在这里发布以防其他人遇到类似情况。

# facebook - 您是否必须在每个 facebook 请求中传递应用程序 ID/秘密？

> ID：14742345
> 
> 赞同：0
> 
> 时间：2013-02-07T02:04:22.283
> 
> 标签：facebook, facebook-graph-api, facebook-authentication

我正在使用一个 facebook 客户端库，它只要求一个访问令牌，而不是应用程序 ID/秘密，以便发出请求。

这对我来说有点奇怪，因为 Facebook javascript SDK 也需要应用程序 ID，而 PHP SDK 需要应用程序 ID 和应用程序密码。

应用程序 id/secret 是否不需要，如果我只是提供访问令牌，就足够了吗？

例如，如果用户已授予我的应用程序 publish_stream 权限，并且我尝试仅使用访问令牌将某些内容发布到他的时间线，那会成功吗？

（我使用的客户端是用于 java 的 RestFB）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T03:17:24.513

well you need to pass the `app-id` and the `app-secret` only when you're exchanging the code for `access_token` for the first time when the user authenticates your app and you can store this access token in your DB to make further API calls, otherwise it should only be the `access_token` that you need to pass in the API call that you make. And since you are only trying to post something to the users wall, that should only require the users `access_token`.

> There are a few exceptions that explicitly require you to pass the app-id and app-secret like, when you're handling expired tokens.

# image - 如何在matlab中对图像的单个像素应用高斯滤波器？

> ID：14742347
> 
> 赞同：1
> 
> 时间：2013-02-07T02:04:33.647
> 
> 标签：image, matlab, filter, pixel, gaussian

我有一个白色/黑色的图像。我想将高斯滤波器应用于此图像上的白色像素。但是，我想逐个像素地应用它，因为我想为不同的像素提供不同的高斯带宽参数。

例如，图像上只有 2 个像素是白色的，其他像素是黑色的。我想对这 2 个像素应用不同的高斯滤波器。假设 X[2] 和 Y[2] 是 2 个像素的坐标。

```
Gaussian bandwidth for X[0] and Y[0] is [10, 10], standard deviation is 1.
Gaussian bandwidth for X[1] and Y[1] is [20, 20], standard deviation is 3. 
```

我知道 roifilt2 可以在 ROI 上工作，但它似乎只适用于图像的一个区域而不是单个像素。检查 ROI 处理后，我根据自己的理解进行了编码，但下面的代码给了我错误：

```
Error using imwrite (line 422)
Image data can not be empty.

Error in guassianFilter (line 73)
    imwrite(out,[outdir,imname,'.png'],'png'); 
```

过滤后的输出图像似乎是空的。但我是 matlab 的新手，我不知道为什么会发生这种情况以及如何解决它。:(

我可以直接调用任何 matlab 函数来完成这项工作吗？

代码：

```
 while ischar(tline)
        line = regexp(tline,' ','split');
        if(strcmp(line{1},'touch') == 1)
            c = floor(str2double(line{1,3})); % same as X[0] as I mentioned above 
            r = floor(str2double(line{1,4})); % same as Y[0] as I mentioned above 
            BW = roipoly(im,c,r); 
            G = fspecial('gaussian',[10 10],1);
            out = roifilt2(G,im,BW);
        end
        if(strcmp(line{1},'dT') == 1)
            c = floor(str2double(line{1,3})); % same as X[1] as I mentioned above 
            r = floor(str2double(line{1,4})); % same as X[1] as I mentioned above 
            BW = roipoly(im,c,r);
            G = fspecial('gaussian',[20 20], 3);
            out = roifilt2(G,im,BW);
        end
        tline = fgets(fid);
    end
    fclose(fid);

    imname=strtok(imList(cnt).name,'.');
    imwrite(out,[outdir,imname,'.png'],'png'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:04:39.943

在概述应该可行的想法之前，让我观察您发布的代码的一个问题。查看您对您的调用，`roifilt2`您会发现它`out`被您从文件中读取的每个单像素指令的结果覆盖。即使您发现了导致结果图像为空的其他错误，结果也永远不会是合成的。

这个怎么样。您可以首先从文件中读取所有像素位置和相应的带宽，然后仅从这些坐标中以两笔重建过滤后的图像。读取像素列表可能如下所示

```
fid = fopen('points.txt');
pxl = struct('x', {}, 'y', {}, 'sig', {});
n_pxl = 0;
tline = fgets(fid);
while ischar(tline)
    line = regexp(tline,' ','split');
    n_pxl = n_pxl + 1;
    pxl(n_pxl).x = floor(str2double(line{1,3}));
    pxl(n_pxl).y = floor(str2double(line{1,4}));
    if strcmp(line{1},'touch') == 1
        pxl(n_pxl).sig = 1;
    elseif strcmp(line{1},'dT') == 1
        pxl(n_pxl).sig = 3;
    else
        pxl(n_pxl).sig = nan;
    end
    tline = fgets(fid);
end
fclose(fid); 
```

其中`x`和`y`是位置，`sig`是带宽。假设`WIDTH`和`HEIGHT`是图像的尺寸，您可以将合成结果图像初始化为 flat `out = zeros(HEIGHT, WIDTH);`。过滤器大小的查找向量可能是`flt_size = [10, 15, 20];`. 在一些`for`-loop over 中`sig = [1, 3]`，我们在收集与特定 sigma 对应的所有像素之后创建覆盖的每个“幻灯片”

```
im_raw = zeros(HEIGHT, WIDTH);
for k = find([pxl.sig] == sig)
    im_raw(pxl(k).y, pxl(k).x) = 1;
end 
```

并用过滤操作的结果增加复合材料

```
fsz = flt_size(sig);
out = out + conv2(im_raw, fspecial('gaussian', [fsz, fsz], sig), 'same'); 
```

综上所述，循环可能是这样的：

```
out = zeros(HEIGHT, WIDTH);
flt_size = [10, 15, 20];
for sig = [1, 3]
    im_raw = zeros(HEIGHT, WIDTH);
    for k = find([pxl.sig] == sig)
        im_raw(pxl(k).y, pxl(k).x) = 1;
    end
    fsz = flt_size(sig); 
    out = out + conv2(im_raw, fspecial('gaussian', [fsz, fsz], sig), 'same');
end 
```

使用稍大的带宽进行说明，这里是一个示例，用于每个类别中的两个点。左图和中图显示每张“幻灯片”，右图显示合成图。每个图像都按比例显示`imagesc`。

![例子](../Images/b14fb42021e259ddbb18d8f64dc11d09.png)

# c# - 搜索 Lucene 索引

> ID：14742349
> 
> 赞同：0
> 
> 时间：2013-02-07T02:04:46.237
> 
> 标签：c#, search, lucene.net

我正在使用 Lucene.Net 版本 2.3.2.1。当我调用 index() 方法时，它将索引 C:\Index 中的文档。但是当我调用 SearchLucene() 方法时，什么都没有出现。

这是我的 index() 和 SearchLucene() 方法：

```
public void Index(string strHash, string filePath, string encryptedPath, string password, string fileName)
{
    string indexFileLocation = @"C:\Index";
    Lucene.Net.Store.Directory dir =
        Lucene.Net.Store.FSDirectory.GetDirectory(indexFileLocation, false);

    //create an analyzer to process the text
    Lucene.Net.Analysis.Analyzer analyzer = new
    Lucene.Net.Analysis.Standard.StandardAnalyzer();

    //create the index writer with the directory and analyzer defined.
    Lucene.Net.Index.IndexWriter indexWriter = new
    Lucene.Net.Index.IndexWriter(dir, analyzer);/*true to create a new index*/

    //create a document, add in a single field
    Lucene.Net.Documents.Document doc = new Lucene.Net.Documents.Document();

    doc.Add(new Field("keywordHash", strHash, Field.Store.YES, Field.Index.TOKENIZED));
    doc.Add(new Field("keywordPath", filePath, Field.Store.YES, Field.Index.NO));
    doc.Add(new Field("keywordEncPath", encryptedPath, Field.Store.YES, Field.Index.TOKENIZED));
    doc.Add(new Field("keywordPassword", password, Field.Store.YES, Field.Index.TOKENIZED));
    //doc.Add(new Field("keywordEncryptedFile", encryptedFile, Field.Store.YES, Field.Index.ANALYZED));
    doc.Add(new Field("keywordFileName", fileName, Field.Store.YES, Field.Index.NO));

    //write the document to the index
    indexWriter.AddDocument(doc);

    //optimize and close the writer
    indexWriter.Optimize();
    indexWriter.Close();

}

public void LuceneSearch()
{
    HashAlg hashAlg = new HashAlg();
    string keywordLower = tbSearchEnc.Text.ToLower();
    string keywordHash;

    if (rbMD5Search.Checked == true)
    {
        keywordHash = hashAlg.GenerateHashMD5(keywordLower);
    }
    else
    {
        keywordHash = hashAlg.GenerateHashSHA1(keywordLower);
    }

    string indexFileLocation = @"C:\Index";
    //Lucene.Net.Store.Directory dir = Lucene.Net.Store.FSDirectory.GetDirectory(indexFileLocation, false);
    //Lucene.Net.Analysis.Analyzer analyzer = new Lucene.Net.Analysis.Standard.StandardAnalyzer();
    Lucene.Net.Search.IndexSearcher searcher = new Lucene.Net.Search.IndexSearcher(indexFileLocation);
    //create an index searcher that will perform the search
    //Lucene.Net.Search.IndexSearcher searcher = new Lucene.Net.Search.IndexSearcher(dir);

    //build a query object
    //Query query = new TermQuery(new Term("keywordHash", keywordHash));
    Lucene.Net.Index.Term searchTerm = new Lucene.Net.Index.Term("keywordHash", keywordHash);
    Lucene.Net.Search.Query query = new Lucene.Net.Search.TermQuery(searchTerm);

    //execute the query
    Lucene.Net.Search.Hits hits = searcher.Search(query);
    int result = hits.Length();
    //iterate over the results.
    for (int i = 0; i < result; i++)
    {
        Document doc = hits.Doc(i);
        string hashValue = doc.Get("keywordHash");
        Console.WriteLine(hashValue);
        string path = doc.Get("keywordPath");
        Console.WriteLine(path);
        string encPath = doc.Get("keywordEncPath");
        Console.WriteLine(encPath);
        string fileName = doc.Get("keywordFileName");
        Console.WriteLine(fileName);

        listBoxSearch.Items.Add(encPath);
        Console.WriteLine(hashValue + " " + path + " " + encPath + " " + fileName);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:03:47.783

我认为您需要调用，除非您有特殊要求，否则您`IndexWriter.Commit()`可能不应该打扰该方法。`Optimize()`

# post - Google Apps 脚本制作 HTTP POST

> ID：14742350
> 
> 赞同：15
> 
> 时间：2013-02-07T02:04:47.237
> 
> 标签：post, google-apps-script, http-post, google-sheets

我想使用谷歌应用程序脚本进行 HTTP POST。我发现这方面的文档很少，也许有人可以帮忙？

HTTP POST 将发送到名为“Twilio”的服务：

[https://www.twilio.com/docs/api/rest/sending-sms](https://www.twilio.com/docs/api/rest/sending-sms)

该页面说我的 POST 中只需要三个参数：

*   “发件人”号码
*   “到”号
*   '身体'

我希望 HTTP Post 将调用 Twilio 发送短信。

最后，我想从谷歌电子表格中获取这些参数。我可以自己做，因为我对 Apps 脚本相当熟悉，但我从来没有做过 HTTP POST，所以现在（为了简单起见）我自己将这些参数输入到代码中。

如果有人知道如何做到这一点，或者使用 Apps 脚本进行任何类型的 HTTP POST，请告诉我 - 我已经花了几个小时试图弄清楚这一点！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-08T01:22:37.963

我设法做到了，这是代码：

```
var url = "https://api.twilio.com/2010-04-01/Accounts/ ...account.SID... /SMS/Messages.json";
var options = {
    "method": "post",
    "headers": {
        "Authorization": "Basic " + Utilities.base64Encode(" ...account.SID... : ...auth.token... ")
    },
    "payload": {
        "From": "+12025551212",
        "To": "+14155551212",
        "Body": "Test from Google Apps Script"
    }
};
var response = UrlFetchApp.fetch(url, options); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T02:22:19.480

看看[UrlFetchApp 类](https://developers.google.com/apps-script/class_urlfetchapp)。此外，您可能需要将某种身份验证参数传递给 API。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T09:59:22.613

我认为，您缺少授权部分。看看这两个链接，这可能对你有帮助。 [https://www.youtube.com/watch?feature=player_embedded&v=j0wjM1Ds3lc](https://www.youtube.com/watch?feature=player_embedded&v=j0wjM1Ds3lc) [https://github.com/entaq/GoogleAppsScript/tree/master/Twilio](https://github.com/entaq/GoogleAppsScript/tree/master/Twilio)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-18T17:15:29.073

一开始我在使用 Google App Script HtmlService 时也遇到了困难。查看我制作的关于如何使用 Htmlservice 的全功能基本示例。在此示例中，您可以发布表单、在第二页上显示发布的信息以及在页面之间导航。

[https://script.google.com/macros/s/AKfycby-tsWP8GiVj9KxdZa2KtIcEIh9zfaCaG_iCtayydhg-6G-rsc/exec](https://script.google.com/macros/s/AKfycby-tsWP8GiVj9KxdZa2KtIcEIh9zfaCaG_iCtayydhg-6G-rsc/exec)

如果您想查看代码，只需访问下面的链接。给自己复制一份，不要忘记在第 50 行更改脚本的链接 (Codigo.gs)

[https://script.google.com/macros/d/MWH5NC4RbgzryH_Ut-1zVe3Ow4ZzbpCe7/edit](https://script.google.com/macros/d/MWH5NC4RbgzryH_Ut-1zVe3Ow4ZzbpCe7/edit)

# python - Python中的正则表达式匹配

> ID：14742355
> 
> 赞同：5
> 
> 时间：2013-02-07T02:05:19.870
> 
> 标签：python, regex

我有一个关于正则表达式的问题。使用`or`构造时

```
$ python
Python 2.7.3 (default, Sep 26 2012, 21:51:14) 
[GCC 4.7.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import re
>>> for mo in re.finditer('a|ab', 'ab'):
...     print mo.start(0), mo.end(0)
... 
0 1 
```

我们只得到一个匹配，它被认为是最左边的第一个分支，被接受。我的问题是这是否可能以及如何构造一个正则表达式，它将产生（0,1）和（0,2）。而且，通常如何对 form 中的任何正则表达式执行此操作`r1 | r2 | ... | rn`。

`*`同样，对于、`+`和`?`构造，是否有可能实现这一点？默认情况下：

```
>>> for mo in re.finditer('a*', 'aaa'):
...     print mo.start(0), mo.end(0)
... 
0 3
3 3
>>> for mo in re.finditer('a+', 'aaa'):
...     print mo.start(0), mo.end(0)
... 
0 3
>>> for mo in re.finditer('a?', 'aaa'):
...     print mo.start(0), mo.end(0)
... 
0 1
1 2
2 3
3 3 
```

第二个问题是，为什么空字符串在末尾匹配，但在其他任何地方都不匹配`*`and `?`？

编辑：

我想我现在意识到这两个问题都是无稽之谈：正如@mgilson 所说， re.finditer 只返回不重叠的匹配项，我猜每当正则表达式接受（a 的一部分）字符串时，它都会终止搜索。因此，使用 Python 匹配引擎的默认设置是不可能的。

虽然我想知道如果Python在正则表达式匹配中使用回溯，那么在接受字符串后让它继续搜索应该不是很困难。但这会破坏正则表达式的通常行为。

编辑2：

这在 Perl 中是可能的。请参阅下面@Qtax 的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:16:00.867

Just want to mention that you can do such things in Perl, using an expression like:

```
(?:a|ab)(?{ say $& })(?!) 
```

The `(?{ code })` construct executes the code every time the regex engine gets to that position in the pattern. Here right after your regex, and it prints the content of the match so far. The `(?!)` after that fails the match, making the regex engine backtrack, and giving us the next possible match, and so on.

This will work for any kind of expression.

Example:

```
perl -E "$_='ab'; /(?:a|ab)(?{ say $& })(?!)/" 
```

Output:

```
a
ab 
```

Another example:

```
perl -E "$_='aaaa'; /a+(?{ say $& })(?!)/" 
```

Output:

```
aaaa
aaa
aa
a
aaa
aa
a
aa
a
a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T02:13:58.593

我不认为这是可能的。状态的[文档](http://docs.python.org/2/library/re.html#re.finditer)`re.finditer`：

> **返回一个迭代器，该迭代器在字符串中 RE 模式的所有非重叠**匹配中产生 MatchObject 实例

（*重点是我的*）

* * *

在回答您关于为什么空字符串在其他地方不匹配的另一个问题时，我认为这是因为字符串的其余部分已经在其他地方匹配，并且`finditer`只为匹配的**非重叠**模式提供匹配（参见第一部分的答案；- ）。

# linux - 在 shell 脚本完成后保留环境变量

> ID：14742358
> 
> 赞同：16
> 
> 时间：2013-02-07T02:05:41.557
> 
> 标签：linux, shell, scripting, environment-variables

在脚本完成运行后，如何保留从 shell 脚本设置的环境变量？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-07T02:32:16.967

*通过运行*脚本是不可能的。该脚本会生成它自己的子 shell，该子 shell 在脚本完成时会丢失。

为了保留`export`脚本中可能包含的 s，请调用它

*   要么作为

    ```
    . myScript.sh 
    ```

*   或者

    ```
    source myScript.sh 
    ```

`.`注意和之间的空格`myScript.sh`；另请注意，“在 Bash[`source`中是同义词`.`，但在 POSIX 中不是`sh`，因此为了最大程度的兼容性，请使用句点。](https://ss64.com/bash/source.html#:%7E:text=source%20is%20a%20synonym%20for%20dot%2Fperiod%20%27.) ”

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-07T03:30:20.823

运行脚本如下：

```
source <script>

-OR-

. <script> 
```

这将在当前 shell 中运行脚本，并在当前 shell 中定义变量。脚本完成后，变量将保留在当前 shell 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T05:12:31.607

环境变量存在于每个进程私有的环境中。shell 将导出的变量的 COPY 作为其环境传递给它的子进程，但它们无法将环境传递回父进程或除子进程之外的任何进程。您可以打印这些变量并将它们加载到父级中。或者正如已经提到的，您可以使用“源脚本”或“.script”在当前 shell 中运行您的脚本（如果 . 不在您的 PATH 中，您可能需要 ./script）。一些工具打印它们的变量，shell 可以使用反引号来加载它们，例如`ssh-agent`. 这样，无论 ssh-agent 打印什么，都将作为命令运行。如果它打印出诸如“VAR1=VAL;VAR2=VAL2”之类的东西，可能会做你想做的事。

# html - 在移动连接上从 HTML 中删除空格。为什么以及如何预防

> ID：14742361
> 
> 赞同：0
> 
> 时间：2013-02-07T02:06:04.107
> 
> 标签：html, ruby-on-rails, apache, heroku, whitespace

我在移动设备上提供网站时遇到问题，因为空格（包括新行）已从 HTML 中删除。
这是一个问题，因为它改变了`inline-block`元素的位置。（有关该问题的信息，请参见[此处](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)）。

最终我采取了一种解决方法（首先去掉了行内块元素之间的空白，然后调整了 CSS 定位），但现在我想弄清楚为什么会发生这种情况。

网站详情：

*   平台：Ruby On Rails 3.2.11 (MRI 1.9.3)
*   模板引擎：ERB
*   机架式服务器：瘦 (1.5.0)
*   主持人：Heroku（雪松）

由于我什至不确定这是否是与 rails/rack/heroku 相关的问题，所以我创建了一个虚拟副本：

*   将 rails 生成的 HTML 复制到静态`*.html`文件（并调整 CSS 和 JS 链接）
*   将该文件上传到另一台机器 (Apache) 上，以将其作为静态 HTML 文件提供

我做了一些测试。嗯……结果（几乎）是一样的。
如果我使用 curl 发送 GET 请求，我会得到上面描述的两个网站（动态 rails 应用程序和静态 HTML 文件）：

*   使用我的固定电话连接，我得到了完整的“原始”HTML，带有空格、换行符和缩进。
*   使用我的运营商 3G 连接（在网络共享中），我将 HTML 代码中的每个空格都去掉，就像缩小的 CSS 或 JS 一样。（顺便说一句，当我从 google.com 到 xkcd.com 仔细检查任何其他网站时，也发生了同样的情况）

**然而**，当用我的手机浏览时，一切都在虚拟静态上正常呈现。

老实说，我无法弄清楚问题出在哪里。由于 curl**总是**在 3G 上获得缩小的 HTML，我认为问题出在网络上。然而，智能手机只有在页面由 Rails 提供时才会抱怨。

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:31:48.453

我检查了你的博客条目。使用空格来格式化您的布局或使用是错误的方法，并且永远不会可靠。如果你真的必须在 html 中使用不间断的空格。

```
&nbsp; 
```

最好在元素上放置类，然后使用 CSS 设置边距和填充。您的解决方法实际上是正确的做法。

# php - Php：从数据库中检索 url 并重定向到 url

> ID：14742363
> 
> 赞同：0
> 
> 时间：2013-02-07T02:06:09.480
> 
> 标签：php, mysql

我有一个存储 url 示例 facebook.com 的数据库，我在表中显示了值，并在 href 中发布了相同的值

```
 <a href="<?php echo $url['url']; ?>" target="_blank">
            <?php echo $fet_2['urlname']; ?></a> 
```

因此，当我单击 URL 时，将在新选项卡中打开，例如 domain.COM/folder/folder/www.facebook.com，并且未加载 fb 页面。我想在单击名称时加载 fb 页面。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:09:54.233

我认为您缺少`http://`来自 URL 的内容，这就是为什么您被定向到域内部以查找该页面的原因。

你可以像这样解决它。

```
<a href="http://<?php echo $url['url']; ?>" target="_blank"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T02:29:30.123

正如我在评论中提到的，请确保 href 在 URL 中有一个“http://”。如果没有，该站点将尝试在您当前的域中打开。

如果您的数据库中的某些 URL 具有 http://，那么您需要在添加之前进行检查。使用这样的东西：

[如果 URL 中不存在 http://，如何添加它？](https://stackoverflow.com/questions/2762061/how-to-add-http-if-its-not-exists-in-the-url)

```
function addhttp($url) {
    if (!preg_match("~^(?:f|ht)tps?://~i", $url)) {
        $url = "http://" . $url;
    }
    return $url;
} 
```

祝你好运。

# php - 根据爆炸项对 PHP 数组进行排序

> ID：14742367
> 
> 赞同：0
> 
> 时间：2013-02-07T02:06:42.660
> 
> 标签：php, sorting

对 PHP 完全陌生

我需要对从文本文件中读取的数组逐行进行排序

```
$data = fgets($fileHandle); 
```

每个 $data 包含 3 个字段，其中爆炸

```
$otherData = explode(',',$data) 
```

我需要通过爆炸中的第一项对整个数组（$data）进行排序，因此它将是 otherData[0];

从小到大，explode 中的第一项是数字

我该怎么做呢？

对谷歌的一些研究并没有让我走得太远，感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:10:18.807

您可以将要排序的列作为数组的键。然后对其进行排序`ksort`

```
$data = array();
while($dataLine = fgets($fileHandle))
{
    list($item1, $item2, $item3) = explode(',', $dataLine, 3);
    $data[$item1] = $item3;
}
ksort($data);
print_r($data); 
```

# mysql - SQL: SUM 返回结果的 MAX 值的 SUM

> ID：14742369
> 
> 赞同：0
> 
> 时间：2013-02-07T02:07:11.020
> 
> 标签：mysql, sql

以下 SQL 语句产生下面列出的结果。问题是，如何修改此语句以提供每个 post_id 的总和？例如，post_id 1 应该 = 25，而 post_id 2 应该 = 758。

```
SELECT t.post_id,
SUM(maxpostmetric) as sumvalue 
  FROM ( 
    SELECT post_metrics.post_id, 
    post_metrics.post_metric_type_id, 
    MAX( post_metrics.value ) maxpostmetric 
    FROM post_metrics 
    INNER JOIN posts ON posts.id = post_metrics.post_id 
    WHERE posts.channel_id = 2268
    GROUP BY post_metrics.post_id, post_metrics.post_metric_type_id 
    ORDER BY post_metrics.id 
  )t 
INNER JOIN post_metric_types ON post_metric_types.id = t.post_metric_type_id 
GROUP BY t.post_id, t.post_metric_type_id 
```

post_id：值；1:0; 1:25；1:0; 2:110；2:588; 2:60；

1 = 25; 2 = 758。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T02:21:17.430

您不需要聚合两次：

```
SELECT post_metrics.post_id, MAX( post_metrics.value ) maxpostmetric 
FROM post_metrics INNER JOIN
     posts
     ON posts.id = post_metrics.post_id 
WHERE posts.channel_id = 2268
GROUP BY post_metrics.post_id 
ORDER BY post_metrics.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T02:10:55.077

这是因为您也是按 post_metric_type_id 分组的。加入和分组到那个领域的目的是什么？如果您希望结果包含该字段，请将其添加到您的 select 语句中。

但是，要获得 post_id 的总和，请将其从 GROUP BY 子句中删除，您应该很高兴。

```
SELECT t.post_id,
       SUM(maxpostmetric) as sumvalue 
  FROM ( 
    SELECT post_metrics.post_id, 
    post_metrics.post_metric_type_id, 
    MAX( post_metrics.value ) maxpostmetric 
    FROM post_metrics 
    INNER JOIN posts ON posts.id = post_metrics.post_id 
    WHERE posts.channel_id = 2268
    GROUP BY post_metrics.post_id, post_metrics.post_metric_type_id 
    ORDER BY post_metrics.id 
  )t 
INNER JOIN post_metric_types ON post_metric_types.id = t.post_metric_type_id 
GROUP BY t.post_id 
```

您也可以删除您的 INNER JOIN - 取决于您的需要。

祝你好运。

# java - 制作蛇游戏，我的解决方案是避免“食物/斑点”按顺序在我的蛇身上产卵吗？

> ID：14742370
> 
> 赞同：2
> 
> 时间：2013-02-07T02:07:12.003
> 
> 标签：java, collision-detection

[http://i.stack.imgur.com/P7Ano.png](http://i.stack.imgur.com/P7Ano.png) <- 图片 ~..~

希望标题能提供一些信息。我目前正在用 Java 制作我的第一款游戏，我需要一些关于某段代码的帮助。

## 开始了：

当蛇在一个红色方块（以下称为“blob”）上移动时，该方块会用新的、随机生成的坐标重新绘制。由于这些坐标是随机生成的，因此有可能将斑点涂在我的蛇身上。

我想避免这种情况，我已经让生成随机坐标的方法根据蛇的当前坐标检查它们。蛇由 5x5px 段组成，每个段都有自己的坐标存储在 2D 数组中。

我的逻辑如下： 1）生成 X 和 Y 坐标。2）获取坐标的差异（例如，它们彼此相距多远） 3）如果它们在彼此的 COLLISIONRANGE (5px) 内 -> 不要使用这些坐标。

## 我真正要问的是：

这是一个好的解决方案吗？我检查这个的方式有什么明显的错误吗？当我玩游戏时，我得到了更多 System.out.println("Log: No-go spawn #" + i); 的触发器。我有记录比我认为是自然的。

**似乎随机生成的坐标在蛇段的 COLLISIONRANGE 范围内过于频繁，以至于一切都正确。**

## 我的方法：

```
private void generateBlobCoordinates() {
    Random randomGenerator = new Random();
    boolean isClearSpawn = true;

    int x = randomGenerator.nextInt(BORDER_X_MAX);
    int y = randomGenerator.nextInt(BORDER_Y_MAX);

    int xDiff;
    int yDiff;

    // If generated coords are within COLLISIONRANGE, set isClearSpawn to false
    for(int i = 0; i < snakeSegments.length; i++) {
        if(snakeSegments[i][0] != -1) {
            xDiff = Math.abs(x - snakeSegments[i][0]);
            yDiff = Math.abs(y - snakeSegments[i][1]);

            if(xDiff <= COLLISIONRANGE || yDiff <= COLLISIONRANGE) {
                isClearSpawn = false;
                System.out.println("Log: No-go spawn #" + i);
                break;
            }
        }
        else
            break;
    }

    if(isClearSpawn == true) {
        blobX = x;
        blobY = y;
    }
    else
        generateBlobCoordinates();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:13:15.670

你的担心是对的。您正在测试 OR 条件，但需要 AND。否则，您将在有蛇的行或列的任何地方发生碰撞！

改变

```
 if(xDiff <= COLLISIONRANGE || yDiff <= COLLISIONRANGE) { 
```

到

```
 if(xDiff <= COLLISIONRANGE && yDiff <= COLLISIONRANGE) { 
```

# asp.net - 合适的数据结构？

> ID：14742371
> 
> 赞同：0
> 
> 时间：2013-02-07T02:07:33.203
> 
> 标签：asp.net, data-structures, enums

我有一个卡片类 - 每张卡片都是四种颜色之一。每种颜色都有与之相关的有趣数据——比如十六进制#和数字表示。我原本打算使用枚举，但我不知道如何包含这另外两个属性。

我希望能够通过 Colors.Red.Hex 或 Colors.Red.Id 引用 Colors.Red 和 Colors.Blue 等颜色，以及每种颜色背后的数据。这里合适的数据结构是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:19:07.570

所有这些东西都是内置的：

```
// using System.Drawing;

Color MyColor = Color.Red;

int Value = MyColor.ToArgb();

byte R = MyColor.R;
byte G = MyColor.G; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T02:26:18.097

有一个名为 Color 的类，其属性名为 Hex 和 Id。然后拥有返回所需静态颜色的静态属性：（这是在 C# 中）

```
public class Color
{
    public string Hex { get; private set; }

    public int Id { get; private set; }

    public static Color Red
    {
        get
        {
            return new Color 
            {
                Hex = "DD0000",
                Id = 1
            };
        }
    }

    public static Color Blue
    {
        get
        {
            return new Color
            {
                Hex = "hex for blue",
                Id = 2
            };
        }
    }
} 
```

如果您不想创建自定义颜色，请将 Color 构造函数设为私有。

# excel - 在 Excel 中按日期和 ID 对数字求和

> ID：14742372
> 
> 赞同：0
> 
> 时间：2013-02-07T02:07:48.763
> 
> 标签：excel, vba

我有一个非常大的（比如说，100,000 行）excel 表，其中有**一些**（还有其他）列：

```
Person ID |   Date   | Number |
0043       03/20/2006  6
0043       03/20/2006  3.21
1478       04/01/2006  9.87
0021       04/12/2006  0.23
0101       04/12/2006  3.14
1042       04/12/2006  11.13 
```

我想做的是浏览表格并按日期将给定人员 ID 的数字相加。含义：现在一些条目在同一日期列出了两次，但我真的想要那个人在那个日期的这些数值的“总和”（不是两个单独的行）。

稍后，我将对这些“汇总结果”进行一些分析，例如“有多少人的数字大于 3 但小于 6”等。

是否有一个我可以运行的简单函数，将按日期和人员 ID 汇总值，并给我一个新列来显示结果总和？或者，是否有一个 VB 程序可以轻松做到这一点？

最终，我希望有一个新列来显示结果，这个新表如下所示：

```
Person ID |   Date   | Number | Total Per ID Per Date |
0043       03/20/2006  6        9.21
0043       03/20/2006  3.21     N/A
1478       04/01/2006  9.87     9.87
0021       04/12/2006  0.23     0.23
0101       04/12/2006  3.14     3.14
1042       04/12/2006  11.13    11.13 
```

有什么想法/建议吗？Visual Basic 还是链接一个 excel 函数？为简单起见，假设列（个人 ID、日期等）是 AC（或 AD，在结果表的情况下），当然还有第 1-7 行。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:01:12.240

正如 Doug Glancy 所建议的，您正在寻找的东西相对容易使用数据透视表生成。这是一种方法。

首先，为了保留数据的原始顺序，在数据表中添加一个标记为 Sort 的列，比如在列 E 中，并输入一个升序索引号，每个新的 PersonID 递增 1。因此，单元格 E2 和 E3 中的排序号将为 1，E4 将为 2，依此类推。这很容易通过公式完成，例如，“如果此行中的 PersonID = 前一行中的 Person ID，则排序号为此行 = 上一行中的排序号，否则排序号 n 此行 = 上一行中的排序号 + 1。

为您的数据创建数据透视表。这可以通过选择数据表中的一个单元格，然后从功能区中选择插入、数据透视表来完成。将数据透视表放入新工作表中。

在新工作表的“数据透视表字段列表”中，将“排序”、“PersonID”、“日期”和“数字”设置为行标签，并将“数字”设置为“值”字段（这应在数据透视表中显示为“数字总和”列）。

从数据透视表工具栏的设计选项卡：

*   将数据透视表设置为“表格形式”（报表布局）
*   关闭小计（小计）

通过右键单击数据透视表中的这些列并在“字段设置”/“布局和打印”中选择适当的选项，使 PersonID 和日期字段重复。

您可以通过一些技巧获得最终的 Total 列：

*   设置“数字总和”列以将值显示为行总数的百分比（右键单击该列并选择该选项）。
*   通过在单元格 F3 中输入标签“每个日期每个 ID 的总计”，向数据透视表添加一个新列。（默认情况下，数据透视表位于 B3:E9 中）。
*   在单元格 F4 中，输入以下公式，然后将其复制到单元格 F9。

    =IF(AND(B4=B3,C4=C3),"NA",D4/E4)

    此公式计算每个 PersonID 的总数，如果 PersonID 和 Date 重复，则返回“NA”。

*   最后，隐藏 Sort 列和 Sum of Number 列。

# php - 为什么我收到错误：查询为空？

> ID：14742375
> 
> 赞同：2
> 
> 时间：2013-02-07T02:08:15.907
> 
> 标签：php, mysql

当我尝试使用以下代码时出现此错误！我不明白原因。我认为它与更新有关，但我不明白它是什么！

```
<?php
$con = mysql_connect("localhost","","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("", $con);

mysql_query("UPDATE pages SET pagebody = 'firstname'");

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
echo "1 record added";

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:25:42.277

您不在这里选择数据库`mysql_select_db("[db name]", $con);`。还有一件事，你打算更新 pages 表中的所有条目吗？因为你没有`WHERE`从句。不过，这里的评论有其观点。

# c# - 有没有办法将 Azure Powershell Cmdlet 子类化——或类似的东西？

> ID：14742380
> 
> 赞同：2
> 
> 时间：2013-02-07T02:09:00.133
> 
> 标签：c#, powershell, azure, cmdlets

我正在编写一些 powershell cmdlet 来自动配置 Azure 订阅。其中一个用例是让开发人员配置他们自己的环境。目前这需要大约 20 个步骤并且容易出错。与使用 Microsoft 的 Azure GUI 和一组指令相比，交给他们一些默认的 azure cmdlet 会导致更多错误。我想要一个脚本，它可以在配置过程中牵着他们的手，并抽象出大量的簿记和错误检查。

我尝试在 Powershell 脚本中执行所有这些操作，但这会变得混乱：

```
Function SelectSubscription()
    {
    $match = $False;
    while(!($match))
        {
        Write-Host "Enter a subscription from the following list:";
        DisplaySubscriptions;
        $global:subscription = Read-Host " ";

        (Get-AzureSubscription).GetEnumerator() | ForEach-Object
            {
            if ($_.SubscriptionName -eq $subscription)
                {
                Write-Host "Setting default subscription to: $subscription";
                Set-AzureSubscription -DefaultSubscription $subscription;
                $match = $True;
                };
            };
        if (!($match))
            {
            Write-Host "That does not match an available subscription.`n";
            };
        };
    } 
```

（这会显示您可以在 .publishsettings 文件中看到的当前订阅，并提示您从中进行选择。如果您的输入无效，它会再次询问。）

我想要的是一个像这样的自定义 cmdlet `Set-MyAzureSubscription`，其中包含所有这些逻辑。稍后我可以将它连接到`Get-Help`.

所以我在 VS2010 中设置了 cmdlet，我想`Get-AzureSubscription`从自定义 cmdlet 内部调用。我可以通过打开一个powershell脚本的实例来调用cmdlet......然后以编程方式粘贴文本......但这似乎不太理想。

更多关于该方法的信息：[Call azure powershell cmdlet from c# application failed](https://stackoverflow.com/questions/14568665/call-azure-powershell-cmdlet-from-c-sharp-application-fails)

还有另一种方法吗？这就是我目前在 C# 中所拥有的。

```
namespace Automated_Deployment_Cmdlets
{
 [Cmdlet(VerbsCommon.Set, "CustomSubscription", SupportsShouldProcess=true)]
 class CustomSubscription : PSCmdlet
    {
      [Parameter(Mandatory=true, ValueFromPipelineByPropertyName=true)]
      public string DefaultSubscription { get; set; }

     protected override void ProcessRecord()
     {
         base.ProcessRecord();
         // Call Get-AzureSubscription, then do some stuff -- as above.
      }
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:41:28.930

此[MSDN 主题](http://msdn.microsoft.com/en-us/library/ms714876%28VS.85%29.aspx)展示了如何在 C# cmdlet 实现中轻松调用另一个 cmdlet。

# image - 在 html5 画布上将多个图像合并为一个

> ID：14742381
> 
> 赞同：1
> 
> 时间：2013-02-07T02:09:10.833
> 
> 标签：image, html5-canvas

如何在 html5 画布上将多个图像组合在一起，然后将它们显示为单个图像？

请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T09:21:26.803

要在画布上绘制多个图像，请使用以下代码

```
var canvas = document.getElementById('canvas_id');
  var context = canvas.getContext('2d');

  var imageObj1 = new Image();
  imageObj1.src = "your image source"
  imageObj1.onload = function() {
    context.drawImage(imageObj1, x, y);
  };

var imageObj2 = new Image();
  imageObj2.src = "your image source"
  imageObj2.onload = function() {
    context.drawImage(imageObj2, x, y);
  }; 
```

现在从画布获取图像数据 URL

```
 // get png data url
  var pngUrl = canvas.toDataURL();

 // get jpeg data url 
 var jpegUrl = canvas.toDataURL('image/jpeg'); 
```

如果你想要**ImageData**然后使用

```
context.getImageData(x,y,width,height); 
```

# python - 如何在不使用 gdata oauth2 工作流程的情况下授权 gdata 客户端？

> ID：14742382
> 
> 赞同：3
> 
> 时间：2013-02-07T02:09:24.623
> 
> 标签：python, oauth-2.0, gdata, gdata-api

我已经有了 access_token 和 refresh_token，但是如果不经历 gdata 中的整个令牌生成工作流程，我无法找到创建授权 gdata 客户端的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T21:52:17.473

所以我终于得到了这个工作。我是这样做的：

```
 client = gdata.contacts.client.ContactsClient()
    credentials = gdata.gauth.OAuth2Token(client_id = 'client_id',
                                          client_secret = 'client_secret',
                                          scope = 'https://www.google.com/m8/feeds/',
                                          user_agent = auth.user_agent, # This is from the headers sent to google when getting your access token (they don't return it)
                                          access_token = auth.access_token,
                                          refresh_token = auth.refresh_token)

    credentials.authorize(client)
    contacts = client.get_contacts() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T02:19:27.797

试试这个：

```
import httplib2
from oauth2client.client import OAuth2Credentials

credentials = OAuth2Credentials('access_token', client_id, client_secret, 'refresh_token', 'token_expiry','token_uri','user_agent')
# the client_id and client_secret are the ones that you receive which registering the App 
# and the token_uri is the Redirect url you register with Google for handling the oauth redirection
# the token_expiry and the user_agent is the one that you receive when exchange the code for access_token
http = httplib2.Http()
http = credentials.authorize(http)
service = build('analytics', 'v3', http=http) # this will give you the service object which you can use for firing API calls 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-05-19T12:55:15.727

Gdata 允许您使用用户信息进行身份验证，例如。用户名/密码...这是来自 api 附带的 gdata python api /gdata-2.0.18/samples/docs/docs_example.py 文件的代码片段

class DocsSample(object): """DocsSample 对象演示文档列表提要。"""

def **init** (self, email, password): """DocsSample 对象的构造函数。

```
Takes an email and password corresponding to a gmail account to
demonstrate the functionality of the Document List feed.

Args:
  email: [string] The e-mail address of the account to use for the sample.
  password: [string] The password corresponding to the account specified by
      the email parameter.

Returns:
  A DocsSample object used to run the sample demonstrating the
  functionality of the Document List feed.
"""
source = 'Document List Python Sample'
self.gd_client = gdata.docs.service.DocsService()
self.gd_client.ClientLogin(email, password, source=source)

# Setup a spreadsheets service for downloading spreadsheets
self.gs_client = gdata.spreadsheet.service.SpreadsheetsService()
self.gs_client.ClientLogin(email, password, source=source) 
```

如果您将其调用为 {python ./docs_example.py --user username --pw password} 它将跳过询问您，但如果您不这样做，它会询问您。然而，这正在被贬值，但在直接与谷歌合作的网络之外的大多数情况下仍然有效，因为这通常需要 oauth2。话虽这么说，它确实存在安全缺陷，特别是范围和密码保护差，这就是它被弃用的原因......但这应该更好地回答你的问题......

# delphi - 如何以编程方式更改计算机的网络设置？

> ID：14742387
> 
> 赞同：3
> 
> 时间：2013-02-07T02:09:39.990
> 
> 标签：delphi, networking, delphi-7

我在两个网络环境（工作和家里）中使用我的笔记本电脑，它们有不同的网络设置（IP 地址、子网掩码、默认网关），所以我每次回家和到达办公室时都必须更改我的网络设置.. 有没有办法编写一个可以更改设置的代码，这样我只需要运行一个程序而不是手动更改设置？

我用谷歌搜索了一下，发现[了这个](https://stackoverflow.com/questions/12574843/how-to-set-my-ip-address-programmatically)，但我找不到我的网卡名称，而且代码似乎只更改了 ip 地址和子网掩码，但它没有更改默认网关.. 我正确吗？

哦，顺便说一句，如果你们可以使用delphi编程来回答我的问题（尤其是delphi 7），那就太好了

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T02:43:25.737

正如您所指出的，发布在此问题上的[代码](https://stackoverflow.com/questions/12574843/how-to-set-my-ip-address-programmatically)不会更改默认网关，为此您还必须执行该[`SetGateways`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393301%28v=vs.85%29.aspx)方法。

试试这个原始代码的修改版本，它允许您为网络适配器设置 ip、掩码和默认网关。

```
{$APPTYPE CONSOLE}

{$R *.res}

uses
  SysUtils,
  ActiveX,
  Variants,
  ComObj;

procedure  SetStaticIpAddress(const NetworkCard, IPAddress, Mask, GateWay :string);
const
  WbemUser    ='';
  WbemPassword='';
  WbemComputer='localhost';
  wbemFlagForwardOnly = $00000020;
var
  FSWbemLocator   : OLEVariant;
  FWMIService     : OLEVariant;
  FWbemObjectSet  : OLEVariant;
  FWbemObject     : OLEVariant;
  FOutParams      : OLEVariant;
  vIpAddress      : OLEVariant;
  vGateWays       : OLEVariant;
  vMask           : OLEVariant;
  oEnum           : IEnumvariant;
  iValue          : LongWord;
begin
  FSWbemLocator := CreateOleObject('WbemScripting.SWbemLocator');
  FWMIService   := FSWbemLocator.ConnectServer(WbemComputer, 'root\CIMV2', WbemUser, WbemPassword);

  FWbemObjectSet:= FWMIService.ExecQuery(Format('SELECT * FROM Win32_NetworkAdapterConfiguration Where Description="%s"',[NetworkCard]),'WQL',wbemFlagForwardOnly);
  oEnum         := IUnknown(FWbemObjectSet._NewEnum) as IEnumVariant;
  if oEnum.Next(1, FWbemObject, iValue) = 0 then
  begin
    vIpAddress   := VarArrayCreate([0, 0], varVariant);
    vIpAddress[0]:= IPAddress;
    vMask   := VarArrayCreate([0, 0], varVariant);
    vMask[0]:=  Mask;
    FOutParams:=FWbemObject.EnableStatic(vIpAddress, vMask);
    // 0 - Successful completion, no reboot required
    // 1 - Successful completion, reboot required
    Writeln(Format('EnableStatic ReturnValue  %s',[FOutParams]));

    vGateWays   := VarArrayCreate([0, 0], varVariant);
    vGateWays[0]:= GateWay;

    FOutParams:=FWbemObject.SetGateways(vGateWays);
    // 0 - Successful completion, no reboot required
    // 1 - Successful completion, reboot required
    Writeln(Format('SetGateways ReturnValue  %s',[FOutParams]));
  end
  else
  Writeln('Network card not found');
end;

begin
 try
    CoInitialize(nil);
    try
      SetStaticIpAddress('network device','192.168.1.1','255.255.255.0','192.168.1.2');
    finally
      CoUninitialize;
    end;
 except
    on E:EOleException do
        Writeln(Format('EOleException %s %x', [E.Message,E.ErrorCode]));
    on E:Exception do
        Writeln(E.Classname, ':', E.Message);
 end;
 Writeln('Press Enter to exit');
 Readln;
end. 
```

注意.. 要获取网络设备名称，您可以使用网络连接列表

![在此处输入图像描述](../Images/af5c9b06ee8260d9b0c33087aa5519e0.png)

# javascript - 如何在 InnerHTML 中隐藏标签

> ID：14742390
> 
> 赞同：0
> 
> 时间：2013-02-07T02:09:54.207
> 
> 标签：javascript

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:15:38.073

使用该`firstChild`属性获取 div 的内部元素，假设这是它包含的所有 HTML，如您的示例中所示。

```
var oDivA1 = document.getElementById(oElementId);
var anchor = oDivA1 ? oDivA1.firstChild : null;

if(anchor && (val === undefined || val == null || val.length <= 0)){        
    anchor.style.display = "none";
}else{
    anchor.style.display = "block";
} 
```

防止链接动作

```
var handler = function(e) { e.preventDefault(); };

if(anchor && (val === undefined || val == null || val.length <= 0)){        
    anchor.addEventListener('click',handler,false);
}else{
    anchor.removeEventListener('click',handler,false);
} 
```

请参阅[https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)了解有关浏览器兼容性和旧浏览器解决方法的信息。

# sqlite - Worklight JSONStore 或 SQLite 来存储密码？

> ID：14742393
> 
> 赞同：0
> 
> 时间：2013-02-07T02:10:52.723
> 
> 标签：sqlite, ibm-mobilefirst, jsonstore

我想将密码存储在 Worklight 应用程序的数据库中。JSONStore 和 SQLite 有什么区别，因为它们都可以用来存储数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:21:34.547

JSONStore 为存储在其中的所有数据提供加密，只需在调用[initCollection之前使用](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/topic/com.ibm.worklight.help.doc/apiref/r_wl_jsonstore_initcollection.html)[usePassword](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/topic/com.ibm.worklight.help.doc/apiref/r_wl_jsonstore_usepassword.html)即可。确保用于解密/访问 JSONStore 内容的密码不是硬编码的。理想情况下，只需提示用户输入密码，如果他们多次登录失败，则使用[destroy 销毁](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/topic/com.ibm.worklight.help.doc/apiref/r_wl_jsonstore_destroy.html)JSONStore 的内容。开箱即用的 SQLite 不允许您加密所有存储的数据，JSONStore 会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:14:20.423

由于您存储的是用户名密码，因此您应该对其进行加密。在 Worklight 中，在 JSONStore 中比在 SQLite 中更容易做到这一点。

# asp.net - 在 ASP.NET 中必须将对象保存到会话变量时如何维护数据上下文？

> ID：14742395
> 
> 赞同：0
> 
> 时间：2013-02-07T02:10:55.213
> 
> 标签：asp.net, linq-to-sql, session-variables, datacontext

我有一个名为 EditEmployee.aspx 的 ASP.NET 页面。加载时（在查询字符串中传递 EmployeeId），它会填充文本框和其他控件。

一名员工与美国的一个且只有一个公司办公室相关联 下拉列表层次结构

州市政厅

被展示。

如果用户单击更改城市，我需要进行回发以填充该城市的新办公室列表。

虽然我可以在 Page_Load 期间将 Employee 对象保存到会话变量中，但在需要保存时，似乎在将该对象从会话中恢复时丢失了数据上下文。

请问我该如何补救？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:55:26.263

您不应将员工对象或内容对象保存在会话变量中，而应使用查询字符串中的 id 来查询数据。数据上下文对象是数据提供者，可以像使用 using 的工作单元方法一样创建和处置，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T03:58:37.867

当在 City 下拉列表中进行新选择时，我会将下拉列表放在[更新面板](http://msdn.microsoft.com/en-us/library/bb399001%28v=vs.100%29.aspx)中并重新绑定 Office 下拉列表。

简要地...

前端：将 a 添加`ScriptManager`到您的页面并将下拉列表包装在`UpdatePanel`.

```
<asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <asp:DropDownList ID="ddlCity" 
                          runat="server" 
                          OnSelectedIndexChanged="ddlCityChanged">
        </asp:DropDownList>
        <asp:DropDownList ID="ddlOffices"
                          runat="server">
        </asp:DropDownList>
    </ContentTemplate>
</asp:UpdatePanel> 
```

后面的代码，只需像往常一样连接事件处理程序。

```
protected void ddlCityChanged(object sender, EventArgs e) 
{
    var city = ddlCity.SelectedValue;
    // get the offices for that city
    ddlOffices.DataSource = [offices];
    ddlOffices.DataBind();
} 
```

UpdatePanel 将触发部分回发而不是完整回发，并使用 Ajax 仅刷新 UpdatePanel 中的页面部分。页面的其余部分不应受到影响。

# jquery - JQuery 自动完成问题

> ID：14742402
> 
> 赞同：1
> 
> 时间：2013-02-07T02:11:26.973
> 
> 标签：jquery, ajax, jquery-ui, autocomplete, jquery-autocomplete

我知道已经有很多与 JQuery 自动完成 UI 小部件相关的问题，但这些都不起作用。我只是根据此处提供的源代码编写代码：http: [//jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/) 这是我的 JQuery 代码：

```
<script type="text/javascript">
$(document.body).ready(function(){
    $('#txtcity').keypress(function(){
        $("#txtschool").removeAttr('disabled');
        $("#txtschool").val('');
    });

    $('#txtcity').focusout(function(){
        if($('#txtcity').val()!=""){
            var availableSchools = [];
            $.ajax({
                url: "do_findschools.php?city="+$('#txtcity').val()
            }).done(function(data){
                availableSchools = data.split(',');
                alert(data);
            });

            $('#txtschool').autocomplete({
                source: availableSchools,
                dataType: "json"
            });
        }
    });
});

</script> 
```

就这么简单，当我在 txtschool 中输入内容时，什么也没有弹出。我还使用了 Chrome 内置的调试器，但它没有显示任何错误。用户界面根本不起作用。ajax**工作正常**，因为我在 alert() 行看到了正确的数据。我还进口了：

```
<link href="jquery/css/ui-lightness/jquery-ui-1.10.0.custom.css" rel="stylesheet" />
<script src="jquery/js/jquery-1.9.0.js" type="text/javascript"></script>
<script src="jquery/js/jquery-ui-1.10.0.custom.js" type="text/javascript"></script> 
```

在我的头文件中。为什么它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:19:50.793

在您的 AJAX 请求返回*之前*，正在执行初始化小部件的代码。如果您将您`alert`的初始化自动完成的位置，`availableSchools`将是空的。

将您的自动完成初始化代码放在`done`函数内：

```
$.ajax({
    url: "do_findschools.php?city="+$('#txtcity').val()
}).done(function(data){
    availableSchools = data.split(',');
    $('#txtschool').autocomplete({
        source: availableSchools,
        dataType: "json"
    });
}); 
```

另外，我认为你想要`$(document).ready()`而不是`$(document.body).ready()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T02:35:25.290

ajax 请求是异步的。因此，当您设置源时，ajax 请求尚未返回并且 availableSchools =[]. 您可以使用 async:false 调用 ajax 请求。不建议这样做。或者您可以将自动完成功能移至完成功能。

```
 $('#txtcity').focusout(function(){
        if($('#txtcity').val()!=""){
            var availableSchools = [];
            $.ajax({
                url: "do_findschools.php?city="+$('#txtcity').val()
            }).done(function(data){
                availableSchools = data.split(','); `$('#txtschool').autocomplete({
            source: availableSchools,
            dataType: "json"
            alert(data);
        });` 

            回答 #3

赞同：0

时间：2017-06-16T17:26:09.533

从 1.9.0 升级，自动完成条目的下拉列表被其他 UI 组件隐藏。但是，控制功能有效。在开发人员工具 (F12) 中，您可以看到渲染组件需要更多时间。此时，自动完成字段的类从

```
medium required ui-autocomplete-input 
```

到

```
medium required ui-autocomplete-input ui-autocomplete-loading 
```

然后回来。

该列表从右侧字段的正下方开始，但不在顶部。从 1.8.3 迁移后，手风琴发生了类似的问题。

[![在此处输入图像描述](../Images/7f931ad265d11c397bda27dccf5cfd4a.png)](https://i.stack.imgur.com/oqcUU.png)

```

# c# - 如何统一停止3d模型上的动画？

> ID：14742403
> 
> 赞同：0
> 
> 时间：2013-02-07T02:11:33.223
> 
> 标签：c#, animation, unity3d

如何在带有动画的 3D 模型上停止动画，直到它与另一个对象发生碰撞？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:41:09.247

那么你可以使用下面的代码来停止动画。该代码还处理动画速度。

```
// Walk backwards
animation["Walk"].speed = -1.0;

// Walk at double speed
animation["Walk"].speed = 2; 
```

所以基本上你可以在技术上使用以下代码来停止动画：

```
animation["Walk"].speed = 0; 
```

这是[动画](http://docs.unity3d.com/Documentation/ScriptReference/Animation.html)的脚本参考。另请查看[动画状态文档](http://docs.unity3d.com/Documentation/ScriptReference/AnimationState.html)。

然后对于碰撞部分，只需使用[OnCollisionEnter](http://docs.unity3d.com/Documentation/ScriptReference/Collider.OnCollisionEnter.html)方法。

```
void OnCollisionEnter(Collision collision) {
    //enable the animation
    animation["Walk"].speed = 1;
} 
```

# ruby-on-rails - Rails / Factory Girl：相互存在验证

> ID：14742405
> 
> 赞同：1
> 
> 时间：2013-02-07T02:12:01.067
> 
> 标签：ruby-on-rails, factory-bot

我在两个轨道模型“项目”和“步骤”之间有关联，因此一个项目有很多步骤。一个步骤需要一个project_id，一个项目至少需要一个步骤才能有效......我想知道如何在没有递归问题的工厂女孩​​中创建它。

目前，我的工厂是这样的：

```
factory :project do
  #...
  steps { |s| [s.association(:step)] }
end

factory :step do
  #...
  association :project
end 
```

当然，由于递归关联，它会返回“堆栈级别太深”错误。问题是，我需要填充这两个值。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-28T00:10:13.640

假设这是您的模型：

```
class Project < ActiveRecord::Base
  has_many :steps
end

class Steps < ActiveRecords::Base
  belongs_to :project
  validates :steps, :presence => true
end 
```

我认为这可以作为工厂工作：

```
factory :project do
  after(:build) do |project|
    project.steps << FactoryGirl.create(:step)
  end
end

factory :step do
end 
```

您可以在其中使用这样的 project.spec.rb：

```
it "must have a step to be valid" do
  expect(FactoryGirl.create(:project)).to be_valid
end 
```

我是从臀部射击，如果这不起作用，很抱歉。无论如何，我认为这是一般的想法。

# java - 为什么扫描仪不工作

> ID：14742408
> 
> 赞同：0
> 
> 时间：2013-02-07T02:12:21.760
> 
> 标签：java

我正在尝试读取这种格式的输入

```
4 4
* . . .
. . . .
. * . .
. . . .
4 4
* * . .
. . . .
. . . .
. . * . 
```

我能够读取前两个数字，当我尝试读取符号时出现异常。我可以使用 BufferedReader 读取每一行并解析输入，但为什么我不能使用扫描仪执行此操作？

这是我的代码

```
 public static void main(String[] args) {
                Scanner in = new Scanner(System.in);
                while (in.hasNextLine()) {
                    Scanner s = new Scanner(in.nextLine());
                    if (!s.hasNextLine())
                        break;

                    int x = s.nextInt(); // 4
                    int y = s.nextInt(); // 4
                    for (int i = 0; i <= x - 1; i++) {
                        for (int j = 0; j <= y - 1; j++) {
                            System.out.println(s.hasNext()); // false
                            String symbol = s.next(); //NoSuchElementException WHY?
                        }
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T02:16:48.710

当那里没有任何数字时，您不应该尝试读取数字。

你的循环，在伪代码中，看起来像

```
While there is a line available:
    s = NextLine()
    x = FirstInt(s)
    y = SecondInt(s)
    // Some other stuff 
```

当您分配到`x`and`y`时，除了第一行之外没有可用的数字，因此您的应用程序崩溃。

与问题相匹配的更好的解决方案是

```
Scanner in = new Scanner(System.in);
if (!in.hasNextInt()) exitAndPrintError();
int rows = in.nextInt();
if (!in.hasNextInt()) exitAndPrintError();
int cols = in.nextInt();
for (int r = 0; r < rows; r++) {
    for (int c = 0; c < cols; c++) {
        if (!in.hasNext()) exitAndPrintError();
        process(in.next());
    }
} 
```

该解决方案实际上并不会检查太多错误，而是将所有错误报告留给`exitAndPrintError`您必须编写的某个函数。

附带说明：如果您尝试`s.hasNext()`并返回 false，那么如果`s.next()` *没有*引发异常，您应该会感到惊讶。这就是这些`hasNext*`方法可用的原因`Scanner`——它们让您有机会知道何时到达输入的末尾，而不是尝试读取比可用输入更多的输入。

* * *

我将把它作为一个练习来更新此代码以处理单个文件中的多组数据，但这并不难。您发布的代码中的关键错误是，如果您`s`仅使用 from 中的一行创建扫描仪，您将不会在正在处理`in`的单行中找到多行结构。`s`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T02:22:00.110

承受整体设计问题，我会回答你的问题。

你得到了，`NoSuchElementException`因为，你猜怎么着，`s`没有更多的元素。`s.hasNext()`它的输出返回 false变得更加明显。

原因很简单。`s`您使用单行分配`in`.

要修复整个程序，您只需要使用一个扫描仪，而不是它的多个实例。

# javascript - Google Maps API - 制作成链接

> ID：14742411
> 
> 赞同：0
> 
> 时间：2013-02-07T02:12:43.410
> 
> 标签：javascript, google-maps, google-maps-api-2

我正在使用谷歌地图 api。这张地图最初是在带有标记的页面上。当用户点击时，标记打开了一些细节。此外，用户可以使用大地图控件进行缩放等。最后，用户可以拖动地图的可视区域。

我们试图把它变成一张地图： 1) 在地图上有标记位置，但它不再是可点击的。2) 点击地图现在是指向不同地图页面的超链接。

一切正常，除了：当您将鼠标悬停在地图上时，光标看起来像是您应该拖动地图，而不是当您将鼠标悬停在链接上时得到的手指。如果鼠标悬停，您仍然可以拖动地图；但是，只要您松开鼠标，链接就会激活，您将转到新页面。

我将如何关闭此拖动功能并使光标看起来像指针？

这是我的代码：

```
<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=MY KEY IS HERE"
      type="text/javascript"></script>
<script language="JavaScript" type="text/JavaScript">
<!--
function MM_openBrWindow(theURL,winName,features) { //v2.0
  window.open(theURL,winName,features);
}

function load() {
      if (GBrowserIsCompatible()) {
         var map = new GMap2(document.getElementById("map"));    
//      map.addControl(new GLargeMapControl());
        //code to setup the map START
        //creating Geocoder object to get geolocation from an address
            geocoder.getLatLng("123 Main St, Boston, MA",
                function (point)
                {
                    map.setCenter(point,15);
                    map.addOverlay(createMarker(point,1));
                });         
        //code to setup the map STOP

        // Creates a marker at the given point with the given number label
function createMarker(point, number) {
  var marker = new GMarker(point);
  return marker;
}

      }
    }
//-->
</script> 
```

我在 html 中调用地图的位置：

```
<a href="http://www.mysite.com">
    <div id="map" style="width: 298px;height:150px;"></div>
</a> 
```

一如既往地提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:39:39.903

[使用地图 API 的第 3 版，您可以通过传入其中包含的地图选项](https://developers.google.com/maps/documentation/javascript/reference#MapOptions)对象来禁用地图上的拖动`draggable: false`。

以下是使用第 3 版 API 的方法：

```
var mapOptions = {
    // add other options here as needed
    draggable: false
}

var map = new google.maps.Map(document.getElementById("map"),
            mapOptions); 
```

如果您仍想使用即将弃用的第 2 版 API 来执行此操作，则此[参考](https://developers.google.com/maps/documentation/javascript/v2/reference)提供了一些相关信息。我不熟悉版本 2 API，但看起来你只是这样做：

```
var map = new GMap2(document.getElementById("map"));
map.disableDragging(); 
```

要更改使用的光标，请查看[GMapOptions](https://developers.google.com/maps/documentation/javascript/v2/reference#GMapOptions)类。您将这些选项传递给`GMap2`上面的构造函数。

# bash - 在 bash shell 中使用 grep

> ID：14742413
> 
> 赞同：0
> 
> 时间：2013-02-07T02:12:46.130
> 
> 标签：bash, grep

我在 while 循环中使用 grep 命令时遇到问题。下面是我的代码：

```
#!/bin/bash
#FILE:  grep_track
#will read in a list of track IDs and grep the track data from the original track files
set=-x

track_list=Top95_HSI_forGrep.txt
track_path="/mnt/gpfs/backup/jpty_surge/kimberly/Launch_multiple_storms/input/$track_list"
outname=$track_list

#echo track_list $track_list
#echo track_path $track_path
#echo outname $outname

IFS=$","
while read trackid fileid 
do
   file="input/track_param_$fileid"
   outfile="output/$outname"
   echo fileid $fileid
   echo trackid $trackid
   echo file $file
   echo outfile $outfile
   grep $trackid $file > $outfile 
done < $track_path 
```

一切似乎都在正确读取（根据我的回声响应），但是我收到以下错误：

```
: No such file or directory1.txt 
```

谁能帮我弄清楚发生了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:15:57.853

引用你的论点`grep`：

```
grep "${trackid}" "${file}" >> "${outfile}" 
```

这样，如果其中一个`$trackid`或`$file`包含空格，它将被视为一个参数`grep`而不是多个参数。请注意，[`>>` *附加*](http://www.gnu.org/software/bash/manual/bashref.html#Appending-Redirected-Output)到文件“ `${outfile}`”（而不是[`>`，它会*截断*](http://www.gnu.org/software/bash/manual/bashref.html#Redirecting-Output)）。

* * *

`\r`要从输入文件中删除错误的 s，请使用[**tr(1)**](http://www.manpagez.com/man/1/tr/)：

```
tr -d '\r' < "${track_path}" | while read trackid fileid 
# [...]
done 
```

我还建议进行一些健全性检查，例如：

```
if [[ -f "${file}" ]] ; then
    grep "${trackid}" "${file}" > "${outfile}"
else
    echo "Could not find file [${file}]. Skipping."
fi 
```

所以你完成的脚本*可能*如下所示：

```
#!/bin/bash
#set -x

track_list=Top95_HSI_forGrep.txt
track_path="${1-/mnt/gpfs/backup/jpty_surge/kimberly/Launch_multiple_storms/input}/${track_list}"
outname="${track_list}"
output_directory="output"
outfile="${output_directory}/${outname}"

if [[ ! -f "${track_path}" ]]; then
    echo "Could not find track_path input [${track_path}]. Exiting"
    exit
fi

if [[ ! -d "${output_directory}" ]] ; then
    echo "Creating output directory [${output_directory}]..."
    mkdir -p "${output_directory}"
fi

IFS=$","
tr -d '\r' < "${track_path}" | while read trackid fileid
do
    file="input/track_param_${fileid}"
    if [[ -f "${file}" ]]; then
        grep "${trackid}" "${file}" >> "${outfile}"
    else
        echo "Could not find file [${file}]. Skipping."
    fi
done 
```

# spring - 没有 contextListener 的 Spring 3.2 安全过滤器

> ID：14742414
> 
> 赞同：0
> 
> 时间：2013-02-07T02:12:56.747
> 
> 标签：spring, security, web.xml, applicationcontext

我正在尝试在我的应用程序上实施安全性：

我有一个使用 web.xml 的应用程序，如下所示：

```
<web-app>
<display-name>myapp</display-name>

<servlet>
    <servlet-name>tmodel</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>tmodel</servlet-name>
    <url-pattern>/tm/*</url-pattern>
</servlet-mapping>
</web-app> 
```

这是我的 *-servlet.xml ：

```
<context:annotation-config />
<context:component-scan base-package="net.nls"/>

<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="webBindingInitializer">
        <!-- Configures Spring MVC DataBinder instances -->
        <bean class="org.springframework.web.bind.support.ConfigurableWebBindingInitializer">
            <property name="validator" ref="validator" />
        </bean>
    </property>
</bean>

<bean id="jacksonMessageConverter" class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"/>

<!-- Creates the JSR-303 Validator -->
<bean id="validator" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean" />

<bean id="beansConfiguration" class="net.nls.tm.config.BeansConfiguration"/>

<bean id="jmsFactory" class="org.apache.activemq.pool.PooledConnectionFactory"
      destroy-method="stop">
    <property name="connectionFactory">
        <bean id="cf" class="org.apache.activemq.ActiveMQConnectionFactory"
              p:brokerURL="tcp://localhost:61616"
              p:useAsyncSend="true"
                />
    </property>
</bean>

<!-- Spring JMS Template -->
<bean id="myJmsTemplate" class="org.springframework.jms.core.JmsTemplate">
    <property name="connectionFactory">
        <ref local="jmsFactory"/>
    </property>
</bean>

<task:annotation-driven executor="myExecutor" scheduler="myScheduler"/>
<task:executor id="myExecutor" pool-size="50"/>
<task:scheduler id="myScheduler" pool-size="10"/>

<bean id="viewResolver"
      class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
    <property name="prefix" value="/jsp/"/>
    <property name="suffix" value=".jsp"/>
</bean> 
```

当我查看 Spring Security 文档 3.2 版时，其中一条说明是添加：

```
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

然后将此添加到我的 *-servlet.xml

```
<http auto-config='true'>
    <intercept-url pattern="/**" access="ROLE_USER" />
</http>

<authentication-manager>
    <authentication-provider>
        <user-service>
            <user name="jimi" password="jimispassword" authorities="ROLE_USER, ROLE_ADMIN" />
            <user name="bob" password="bobspassword" authorities="ROLE_USER" />
        </user-service>
    </authentication-provider>
</authentication-manager> 
```

当我编译并运行应用程序时，出现以下异常：

```
java.lang.IllegalStateException: No WebApplicationContext found: no ContextLoaderListener registered?
org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:251) 
```

当我搜索网络时，我看到有人添加了

```
 <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

然后一切都停止了工作。

怎么了？考虑到我是如何解决这个问题的？

我可以在 *-servlet.xml 中移动我的过滤器吗？如果是的话怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:05:52.863

看起来您将侦听器添加到 *-servlet.xml 添加

```
 <listener>
<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

到 web.xml

# c - 防止断言失败时崩溃（alsa 配置不正确）

> ID：14742415
> 
> 赞同：0
> 
> 时间：2013-02-07T02:13:03.760
> 
> 标签：c, alsa

如果用户使用 alsa_get_unmute_volume 崩溃未正确配置 alsa 混合器：断言“elem”失败

```
static const char alsa_core_devnames[] = "default";
static char *card, *channel;
static int muted = 0;
static int mutecount = 0;
static snd_mixer_t *handle = NULL;
static snd_mixer_elem_t *elem = NULL;

static long alsa_min, alsa_max, alsa_vol;

static int alsa_get_unmute_volume( void )
{
    long val;
    assert(elem);

    if (snd_mixer_selem_is_playback_mono(elem)) {
        snd_mixer_selem_get_playback_volume(elem, SND_MIXER_SCHN_MONO, &val);
        return val;
    } else {
        int c, n = 0;
        long sum = 0;
        for (c = 0; c <= SND_MIXER_SCHN_LAST; c++) {
            if (snd_mixer_selem_has_playback_channel(elem, c)) {
                snd_mixer_selem_get_playback_volume(elem, SND_MIXER_SCHN_FRONT_LEFT, &val);
                sum += val;
                n++;
            }
        }
        if (! n) {
            return 0;
        }

        val = sum / n;
        sum = (long)((double)(alsa_vol * (alsa_max - alsa_min)) / 100\. + 0.5);

        if (sum != val) {
           alsa_vol = (long)(((val * 100.) / (alsa_max - alsa_min)) + 0.5);
        }
        return alsa_vol;
    }
} 
```

碰撞

```
alsa_get_unmute_volume: Assertion `elem' failed. Aborted (core dumped) 
```

有可能在代码中防止这种情况吗？

我认为问题就在这里。当用户手动设置时，在gtkentry中，设备和通道的值错误，例如/dev/mixer:line，然后按回车，程序崩溃

设置混音器设备和通道的代码（正确的值，例如 hw:0/Line，default/CD，...）是这样的：

```
static int alsa_set_device( const char *devname )
{
    int i;

    if (card) free(card);
    card = strdup( devname );
    if( !card ) return -1;

    i = strcspn( card, "/" );
    if( i == strlen( card ) ) {
        channel = "Line";
    } else {
        card[i] = 0;
        channel = card + i + 1;
    }
    alsa_open_mixer();
    if (!handle) {
        fprintf( stderr, "mixer: Can't open mixer %s, "
                 "mixer volume and mute unavailable.\n", card );
        return -1;
    }
    return 0;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:19:30.770

您必须重新编译 ALSA 才能禁用断言。当您定义`NDEBUG`的断言被禁用。

请注意，如果断言失败，即使您禁用断言，您的程序也可能会崩溃或出现不良行为。

断言是应该始终为真的东西，如果它是假的，那么某人在某处犯了错误。

# html - 另一个CCS表格对齐

> ID：14742420
> 
> 赞同：0
> 
> 时间：2013-02-07T02:13:38.480
> 
> 标签：html, css

我有一个带有描述性标签的表单，用于在表单窗口中换行到第二行的输入框。这本身就很好，但是输入框最终会搞砸，因为它似乎与标签的顶部而不是底部对齐。问题是，如何让输入框与标签底部对齐？

这是所涉及元素的 CSS。

```
label {
    font-family: Arial, Verdana;
    text-shadow: 2px 2px 2px #ccc;
    display: block;
    float: left;
    font-weight: bold;
    margin-right:10px;
    text-align: right;
    width: 150px;
    line-height: 25px;
    font-size: 15px;
}

#defaultform input{
    font-family: Arial, Verdana;
    font-size: 14px;
    padding: 5px;
    border: 1px solid #b9bdc1;
    width: 300px;
    color: #797979;
    line-height: 16px;
} 
```

这是表单的 HTML：

```
<form id="defaultform" class="rounded" action="<?php echo $editFormAction; ?>" method="post" name="form1">
<h3>Show Hostess: <?php echo $row_HostessName['hostess_fname'] . " " . $row_HostessName['hostess_lname']; ?></h3>
    <div class="field">
        <label for="initial_date">Initial Date:</label>
        <input class="input" type="text" name="initial_date" value="" />
        <p class="hint">Enter initial show date.</p>
    </div>
    <div class="field">
        <label for="initial_time">Initial Time:</label>
        <input class="input" type="text" name="initial_time" value="" />
        <p class="hint">Enter initial show time.</p>
    </div>
    <div class="field">
        <label for="actual_datetime">Actual/Scheduled Date and Time:</label>
        <input class="input" type="text" name="actual_datetime" value="" />
        <p class="hint">Enter actual show date and time.</p>
    </div>
    <div class="field">
        <label for="number_of_guests">Number of Guests:</label>
        <input class="input" type="text" name="number_of_guests" value="" />
        <p class="hint">Enter number of guests at show.</p>
    </div>
    <div class="field">
        <label for="show_notes">Show Notes:</label>
        <input class="input" type="textarea" name="show_notes" value="" />
        <p class="hint">Enter number of guests at show.</p>
    </div>

    <input class="button" type="submit" value="Add Show" />
<input type="hidden" name="MM_insert" value="form1" /> 
```

`

“实际/预定日期和时间”是包装并导致我悲伤的标签。 [这](http://jsfiddle.net/jts4q/1/)是我所看到的小提琴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:55:12.267

从标签标签中删除 float 属性：

CSS：

```
label {
    font-family: Arial, Verdana;
    text-shadow: 2px 2px 2px #ccc;
    display: block;
    /*float: left;*/
    font-weight: bold;
    margin-right:10px;
    text-align: right;
    width: 150px;
    line-height: 25px;
    font-size: 15px;
} 
```

这是**[jsFiddle](http://jsfiddle.net/rWfLc/)**

编辑：

使标签显示在输入框左侧的最简单方法是从标签选择器中删除并在每个输入框后`display:block`放置标签：**[更新的 jsFiddle](http://jsfiddle.net/rWfLc/1/)**`<br />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T03:43:18.670

我建议您使用`Flex`布局。您可以使用它轻松构建布局。

是你的意思吗？

CSS：

```
label {
    font-family: Arial, Verdana; text-shadow: 2px 2px 2px #ccc; 
    font-weight: bold; margin-right:10px;
    width: 150px; line-height: 25px; font-size: 15px;
    text-align:right;
}

#defaultform input{
    font-family: Arial, Verdana; font-size: 14px; padding: 5px; border: 1px solid #b9bdc1; width: 300px; color: #797979;
    line-height: 16px;
}
.field{
    display: flex;
    display: -webkit-flex;
    display: -moz-flex;
    display: -ms-flex;
    display: -o-flex;
    align-items:center;
    -webkit-align-items: center;
    -moz-align-items: center;
    -ms-align-items: center;
    -o-align-items: center;
} 
```

网页：

```
<form id="defaultform" class="rounded" action="<?php echo $editFormAction; ?>" method="post" name="form1">
    <h3>Show Hostess: <?php echo $row_HostessName['hostess_fname'] . " " . $row_HostessName['hostess_lname']; ?></h3>
    <div class="field">
        <label for="initial_date">Initial Date:</label>
        <input class="input" type="text" name="initial_date" value="" />   
    </div>
    <p class="hint">Enter initial show date.</p>
    <div class="field">
        <label for="actual_datetime">Actual/Scheduled Date and Time:</label>
        <input class="input" type="text" name="actual_datetime" value="" />
    </div>
    <p class="hint">Enter actual show date and time.</p>
</form> 
```

[这](http://jsfiddle.net/jts4q/)是 JsFiddle

# ruby-on-rails - 调用 .reload 后的 Nil 对象

> ID：14742421
> 
> 赞同：1
> 
> 时间：2013-02-07T02:13:41.770
> 
> 标签：ruby-on-rails

我是 ruby​​ 的新手，我正在尝试找出原因`background_image`，并且`keyline_image`两者都没有出现。

```
context 'removing background_image but not keyline_image' do
    before do
      put :update, id: business_group.id,
          business_group: { title: 'new_title',
              background_image: File.new('spec/support/files/test_photo.jpg'),
              keyline_image:  File.new('spec/support/files/test_photo.jpg') },
          remove_background_image: 1,
          remove_keyline_image: nil

      business_group.reload
      binding.pry
    end
    it { business_group.title.should == "new_title"}
    it { business_group.background_image.should_not be_nil }
    it { business_group.keyline_image.should_not be_nil}
  end 
```

我做了一个 binding.pry 并得到以下输出：

```
BusinessGroup.find(business_group.id).background_image
     => <Dragonfly Attachment uid="2013/02/07/12_58_16_754_file", app=:images>

business_group.background_image
     => nil 
```

评论赞赏

# c# - 将 PostBackTrigger 和 AsyncPostBackTriggers 添加到 UpdatePanel 以使用 checkedChanged EventHandler 动态生成复选框

> ID：14742426
> 
> 赞同：4
> 
> 时间：2013-02-07T02:14:20.817
> 
> 标签：c#, asp.net

为了更清楚的解释，这里是我存档的代码`.asp`：

```
<asp:UpdatePanel ID="updPnlTabs" runat="server" >
   <Triggers>
    <asp:PostBackTrigger ControlID="btnSave" />
   </Triggers>
  <ContentTemplate>
   <asp:Panel ID="pnlCheckList" runat="server" style="margin-bottom: 10px;" CssClass="listingDummyTab">
   </asp:Panel>
  </ContentTemplate>
</asp:UpdatePanel> 
```

在我的`.cs`代码中，我动态地为 pnlCheckList 创建了复选框，如下所示：

```
CheckBox chkModuleID = new CheckBox();
chkModuleID.ID = drNew[def.ID].ToString();
chkModuleID.AutoPostBack = true;
chkModuleID.CheckedChanged += new EventHandler(chkID_OnRow_Check);
pnlCheckList.Controls.Add(chkModuleID); 
```

现在我的问题是当我更改复选框时，整个页面必须加载而不是`UpdatePanel`. 请注意，动态创建的复选框的 EventHandler 正在触发，但不在 UpdatePanel 内。

如何添加动态`ID`创建`Controls`的`<Triggers>`？`UpdatePanel`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T04:30:48.793

无法将动态（或以编程方式创建的）控件添加到标记中，因此，您必须`ScriptManager`在创建控件后将其注册。

根据`AsyncPostBackTrigger` [文档](http://msdn.microsoft.com/en-us/library/Bb493884.aspx)`AsyncPostBackTrigger`，不支持以编程方式添加控件：

> 要以编程方式注册回发控件，请使用控件的`RegisterAsyncPostBackControl`方法`ScriptManager`。`UpdatePanel`然后在控件回发时调用控件的 Update 方法。

* * *

基本上你应该做的是在创建 CheckBox 控件后注册它。

```
// original code
CheckBox chkModuleID = new CheckBox();
chkModuleID.ID = drNew[def.ID].ToString();
chkModuleID.AutoPostBack = true;
chkModuleID.CheckedChanged += new EventHandler(chkID_OnRow_Check);
pnlCheckList.Controls.Add(chkModuleID);

// register the control to cause asynchronous postbacks
ScriptManager.GetCurrent(this).RegisterAsyncPostBackControl(chkModuleID); 
```

**重要提示：**在`chkID_OnRow_Check`回调/事件处理函数内部，确保调用`UpdatePanel1.Update()`.

**2013-02-20 更新**

由于我对您收到的异常的理解，请考虑使 CheckBox ID 唯一。

```
// One possibility is this - assuming you don't require a consistent ID
chkModuleID.ID = String.Format("{0}-{1}", drNew[def.ID].ToString(), Guid.NewGuid().ToString("N")); 
```

# java - 扩展默认 Maven 原型环境变量

> ID：14742427
> 
> 赞同：0
> 
> 时间：2013-02-07T02:14:51.740
> 
> 标签：java, maven

我的原型资源文件中需要一个变量，它是生成新项目的目录的路径。[这篇 StackOverflow 帖子](https://stackoverflow.com/questions/6537861/are-there-other-default-maven-archetype-properties)来自一个制作了自己的插件来执行此操作的人。

不幸的是，我无法弄清楚它最初是如何运行的。如果我运行这个命令：

```
mvn \
com.example.build.maven:property-setter-maven-plugin:0.1:set-properties \
archetype:generate \
-DarchetypeGroupId=... -DarchetypeArtifactId=... -DarchetypeVersion=... -DartifactId=... 
```

从我打算从原型创建新项目的空目录中，我收到此错误：

```
Goal requires a project to execute but there is no POM in this directory 
```

这对我来说似乎完全错误。我正在尝试在此目录中创建一个新的 maven 项目，那里不应该已经有 pom.xml。所以，我查看了[maven-archetype-plugin 运行的阶段，](http://maven.apache.org/archetype/maven-archetype-plugin/)并决定改为运行这个插件，`<goal>archetype:generate</goal>`并从我正在执行的 maven 命令中删除了 set-properties。

现在，当我运行 archetype:generate 命令时，它会生成一个原型，但是我需要的环境变量都不存在，就好像插件现在什么都不做一样。

有人知道我怎样才能让它工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:16:35.013

首先是简单的答案：

真的需要自定义插件吗？该`${basedir}`变量应该在与运行原型的基本目录相对应的原型资源文件中工作。

目标项目的根是${basedir}/${artifactId}，所以如果我的模板`pom.xml`如下：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>${groupId}</groupId>
    <artifactId>${artifactId}</artifactId>
    <version>${version}</version>
    <packaging>jar</packaging>

    <name>A custom project at base ${basedir}/${artifactId}</name>

</project> 
```

然后原型生成`pom.xml`将如下所示：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>galah</groupId>
    <artifactId>galah-artifact</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>jar</packaging>

    <name>A custom project at base /home/prunge/java/testing/galah-artifact</name>

</project> 
```

（假设我通过命令行/提示设置了groupId、artifactId、version）

* * *

但是现在让我们假设您出于其他原因需要这些环境变量，而不仅仅是项目的基本目录。

据我所知，它们`property-setter-maven-plugin`获取当前的执行属性并将它们放入环境变量中。你需要基本目录

要让 property-setter-maven-plugin 运行，它需要修改，因为原始版本需要一个项目/POM 才能按照元数据中的定义运行。

原始 MOJO 定义：

```
/**
 * @goal set-properties
 * @phase validate
 * @since 0.1
 */
public class PropertySetterMojo extends AbstractMojo
{
    /**
     * @parameter default-value="${project}"
     * @parameter required
     * @readonly
     */
    private MavenProject project;

    /**
     *  @parameter expression="${session}"
     *  @readonly
     */
    private MavenSession session;

    /**
     * @parameter expression="${mojoExecution}"
     * @readonly
     * @required
     */
    protected MojoExecution execution;

    ...

} 
```

为了使这个插件可以在没有项目的情况下运行，需要进行一些更改：

*   ,`@requiresProject false`因为默认情况下这是真的。附加文档在[这里](https://maven.apache.org/developers/mojo-api-specification.html)。
*   有一个`project`类型的字段，`MavenProject`它被标记为`@parameter required`- 这需要被删除，以便 MOJO 可以在没有项目的情况下执行。从原始帖子的源代码中随意一瞥，该字段未被使用，因此可以安全地删除。

所以你最终会得到类似的东西：

```
/**
 * @goal set-properties
 * @phase validate
 * @since 0.1
 * @requiresProject false 
 */
public class PropertySetterMojo extends AbstractMojo
{
    /**
     *  @parameter expression="${session}"
     *  @readonly
     */
    private MavenSession session;

    /**
     * @parameter expression="${mojoExecution}"
     * @readonly
     * @required
     */
    protected MojoExecution execution;

    ...

} 
```

然后，您可以像以前一样运行命令行：

```
mvn \
com.example.build.maven:property-setter-maven-plugin:0.1:set-properties \
archetype:generate \
-DarchetypeGroupId=... -DarchetypeArtifactId=... -DarchetypeVersion=... -DartifactId=... 
```

并且 property-setter-maven-plugin 现在应该可以执行了。

# android - Sip Demo Android 无法在手机上注册

> ID：14742428
> 
> 赞同：0
> 
> 时间：2013-02-07T02:15:13.363
> 
> 标签：android, sip

如何在 Sipdemo 中更改 TCP 协议？我指的是this.Me也面临同样的问题。 [无法让 SipDemo 注册](https://stackoverflow.com/questions/7455088/cant-get-sipdemo-to-register)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:59:37.423

在更改协议之前将其输入到您的代码中`builder.setProtocol("TCP");`。因此代码片段将如下所示。

```
public void connect(String username,String password,String server)
{
    try {
        SipProfile.Builder builder = new SipProfile.Builder(username, server);

        builder.setPassword(password);
        builder.setProtocol("TCP");
        mSipProfile = builder.build();
       }
} 
```

# javascript - jQuery 使用脚本标签

> ID：14742433
> 
> 赞同：0
> 
> 时间：2013-02-07T02:15:50.490
> 
> 标签：javascript, jquery, dom, load

为什么加载dom时脚本标签在那里但没有执行？假设我有这个代码

```
History.Adapter.bind(window, 'statechange', function(e) { // Note: We are using statechange instead of popstate
        var State = History.getState();
        $('#main-content').load(State.url + " #main-content");
    }); 
```

我将从给定的 url 加载“#main-content”的内容。给定的 url 并且该 url 包含这个

```
<div id = "main-content">
<script>
$(document).ready(function(){
  console.log($('audio'));
})
</script>
</div> 
```

为什么控制台中没有显示音频？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:37:42.767

如[http://api.jquery.com/load/](http://api.jquery.com/load/)所述，以这种方式加载的脚本可能无法执行有几个原因。

在这种情况下，您使用带后缀的选择器表达式仅将获取的部分内容插入到当前文档中。这样做的缺点是脚本将在内容的任何部分实际插入文档之前从内容中删除。

jQuery load 方法的源码（v1.9.1）中提到了排除脚本的原因

> // 如果指定了选择器，则在虚拟 div 中定位正确的元素
> 
> // 排除脚本以避免 IE 'Permission Denied' 错误

如果可能的话，我会通过让服务器只响应“main-content” div 来解决这个问题——可能是由附加到初始 URL 的查询字符串触发的——并在没有选择器的情况下加载它。

根据某些条件仅返回文档的一部分完全取决于生成文档的服务器端应用程序（如果有）。如果您 - 例如 - 正在使用 PHP，请将您的脚本更改为 call `load(State.url + "?section=main-content")`，然后让 PHP 检查是否`$_GET['section']`等于“主内容”。在这种情况下，除了要更新的 div 之外，跳过渲染所有内容。我无法就问题的这一部分给出更详细的答案，因为*如何*取决于*您*在服务器上运行的内容。

如果您提供静态文件并且主机不运行 PHP 或其他语言，我听说其他人建议先将整个文档加载到 iFrame 中（不包括调用 `#main-content`中的部分`load()`），然后提取您希望更新的部分使用纯 JavaScript 的主文档。它可能适用于您的情况，但您的脚本很可能会执行两次。首先，加载文档的所有脚本部分在 iFrame 的上下文中执行，然后提取部分的脚本部分将在插入主文档时再次执行。

如果您正在提供静态文件，但主机确实运行 PHP 或其他语言，则*可以*编写一个小脚本来仅提取您需要的文档的部分。这样的脚本可以基于[PHP DOM 并仅返回 document 的一部分](https://stackoverflow.com/questions/14660266/php-dom-and-returning-only-part-of-document)，但可以修改为从 GET/query 参数获取 XHTML 文件的路径。这需要将您的加载调用更改为类似*这样*`load("path/to/extraction_script.php?filename=" + escape(State.url) + "&section=main-content")`的内容，以便将先前访问页面的整个路径发送到服务器。

**注意：**这样做可能会带来重大的安全漏洞，因为您实际上是在创建一个代理服务器，该服务器能够读取它有权访问的服务器上的任何文件，包括外部 URL，除非您非常小心。我不推荐这种方法，我也无法测试它在实践中是否真的有效。这取决于您的服务器配置和文档的外观。

# javascript - 当 hta 默认设置为作为记事本打开时 CreateTextFile 不起作用（javascripting）

> ID：14742435
> 
> 赞同：2
> 
> 时间：2013-02-07T02:16:03.377
> 
> 标签：javascript, text-files, hta, createfile

当我尝试使用 javascripting 和 hta 文件创建文本文件时，我遇到了这个非常奇怪的问题。

这是分解为基础的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script>

alert("creating file");
var fso = new ActiveXObject("Scripting.FileSystemObject");
var s = fso.CreateTextFile("test.txt", true);
s.WriteLine("it works");
s.Close();
alert("file created");
</script>
</head>

<body>
</body>
</html> 
```

这是在一个名为“Untitled.hta”的 hta 文件中，只要我将“打开方式”>“选择默认程序”设置为“Microsoft (R) HTML Application Host”，然后打开 hta 文件，文本文件就可以很好地创建。

但是，如果我将打开方式 > 选择默认程序设置为“记事本”，然后使用“Microsoft (R) HTML 应用程序主机”打开，则不会创建文本文件。

有谁知道为什么会这样？这通常无关紧要，但如果客户端将 hta 文件设置为默认作为记事本打开，那么我的 hta 文件将无法按预期工作。

更复杂的事情进一步替换

```
var s = fso.CreateTextFile("test.txt", true); 
```

和

```
var s = fso.CreateTextFile("TestFolder/test.txt", true); 
```

在 hta 文件所在的位置创建一个名为“TestFolder”的文件夹

如果您执行与以前相同的操作，则将其设置为记事本作为默认值会导致找不到路径错误（但如果默认设置为 Microsoft (R) HTML 应用程序主机，则它工作正常）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:31:06.480

发生这种情况是因为您使用的是相对路径。在创建 FSO 之前放置此代码段：

```
var shell = new ActiveXObject("WScript.Shell");
alert(shell.currentDirectory); 
```

可能是您的 HTA 警报`C:\Windows\System32`（取决于使用的操作系统）。这是文件夹，您可以在其中找到`test.txt`. `Path not found`现在还解释了“ ”错误...

要解决此问题，请仅使用绝对路径，或设置当前目录：

```
shell.currentDirectory = 'C:/Some_Path'; 
```

# java - arraylist 的副本不断修改为原始值

> ID：14742437
> 
> 赞同：2
> 
> 时间：2013-02-07T02:16:26.390
> 
> 标签：java, arraylist, copy, duplicates, clone

我正在开发一个用于保存和调用屏幕状态的系统，这是我第一次搞砸这种东西，所以我不确定最好的方法是什么，但我目前存储所有“PreviewMonitor”数组列表中的对象（大约 40 个左右）。问题是，当我创建一个名为“allPreviewMonitors”的 ArrayList 副本以进行存储时，我最终会得到一个 ArrayList，其中的元素随着原始元素的更新而不断变化。几乎就好像我正在使用原始 ArrayList，而事实上，它应该是一个完全不同的 ArrayList，当我创建 allPreviewMonitors 的副本时，它具有元素及其状态的“冻结”版本。为什么会发生这种行为？如果需要，我可以显示代码，但我不确定这里是否需要它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T02:19:40.210

一个`Arraylist`like all `Collections`，只包含对对象的引用。仅复制 List 是不够的，您还必须在创建 List 副本时 clone() 列表中的元素（或创建新元素，或使用复制构造函数）。

这称为制作“深拷贝”，而您目前有一个“浅拷贝”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T02:19:46.747

您需要确保执行“深度复制”——即克隆`PreviewMonitor`对象。默认情况下，您只会做一个浅拷贝并复制对同一对象的引用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-08T03:13:13.560

您只是将对象引用复制到 ArrayList 中。您需要复制对象本身。

在 Java 中，所有的对象变量实际上都是引用变量。所以代码：

```
Myclass myObject = new Myclass();
Myclass otherObject = myObject; 
```

创建一个 Myclass 对象并将对该 Myclass 对象的引用存储在引用变量`myObject`中。然后它会创建一个新的引用变量`otherObject`，并将引用数据（例如内存地址）从 复制`myObject`到`otherObject`。这些现在指的是内存中的同一个对象。此时，线

```
myObject.myMethod(); 
```

具有相同的结果

```
otherObject.myMethod(); 
```

您在 ArrayList 中得到的是对相同对象的不同引用。你想要的是以下之一：

```
Myclass otherObject = myObject.clone(); // use the clone function
// OR
Myclass otherObject = new Myclass(myObject); // use a copy constructor 
```

如果使用复制构造函数将对象放入 ArrayList 中`clone()`，则 ArrayList 将包含对相同副本的引用，而不是对相同副本的引用。

正如其他人指出的那样，仅制作引用的副本称为“浅拷贝”，而制作引用的对象的副本称为“深拷贝”。

编辑：为了使它起作用，您的解决方案不仅要在*您的*班级上实施，而且要在您班级中包含的所有班级上实施。例如，考虑`MyClass`which 具有 type 的字段`OtherClass`：

```
class MyClass {
  private String foo;
  private OtherClass bar;
  private int x;
  MyClass(String f, OtherClass b, int x) {
    foo = f;
    bar = b;
    this.x = x;
  }

  MyClass(MyClass o) {
    //make sure to call the copy constructor of OtherClass
    this(new String(o.foo), new OtherClass(o.bar), o.x);
  }
  // getters and setters
} 
```

请注意，这`OtherClass`还需要有一个复制构造函数！如果`OtherClass`引用其他类，那么它们也需要复制构造函数。没有办法解决这个问题。

最后，您的列表副本将如下所示：

```
List<MyClass> myNewList = new ArrayList<>(myExistingList.size());
for ( MyClass item : myExistingList) {
  // use the copy constructor of MyClass, which uses the copy constructor of OtherClass, etc, etc.
  myNewList.add(new MyClass(item))
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T03:31:30.230

要克隆，您不能只返回当前对象。您必须创建一个与当前对象具有相同值的新对象。也就是说，使用当前对象的Class的构造函数，创建一个新对象。确保旧对象和新对象之间的属性匹配。返回新对象并对原始列表中的每个对象重复。

# android - Android 上的等宽衬线字体

> ID：14742442
> 
> 赞同：2
> 
> 时间：2013-02-07T02:16:43.747
> 
> 标签：android, fonts

Android上有没有标准的**等宽衬线字体？**我可以找到等宽的无衬线字体，但没有衬线字体。

如果有，那是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T03:14:09.643

答案是否定的，我相信 Droid **Sans** Mono 是平台上唯一可用的等宽字体。看：

```
android-sdk-linux/platforms/android-17/data/fonts/system_fonts.xml 
```

和

```
android-sdk-linux/platforms/android-17/data/fonts/fonts.mk 
```

当然，您可以自己滚动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T03:13:05.183

您始终可以选择使用自己的字体。只需将字体文件放在 assets 文件夹中，然后使用以下代码

```
Typeface requestedTypeface = Typeface.createFromAsset(context.getAssets(), fontFileName); 
```

**对于 HTML5 应用程序**

您可以使用**[Google Web Font API](https://developers.google.com/webfonts/)**跨浏览器呈现。Google Web Fonts API 中提供了 Droid Serif 字体。

# python - 在 Python 中延迟解析有状态的、多行的每条记录数据流？

> ID：14742446
> 
> 赞同：2
> 
> 时间：2013-02-07T02:16:56.277
> 
> 标签：python, parsing

这是一个文件的外观：

```
BEGIN_META
    stuff
    to
    discard
END_META
BEGIN_DB
    header
    to
    discard

    data I
    wish to
    extract
 END_DB 
```

我希望能够解析它们所有的无限流`cat`，这排除了做类似`re.findall('something useful', '\n'.join(sys.stdin), re.M)`.

以下是我的尝试，但我必须强制从其中返回生成器，`get_raw_table()`因此它不太符合要求。去掉力意味着你无法测试返回的生成器是否为空，所以你看不到是否`sys.stdin`为空。

```
def get_raw_table(it):
    state = 'begin'
    for line in it:
        if line.startswith('BEGIN_DB'):
            state = 'discard'
        elif line.startswith('END_DB'):
            return
        elif state is 'discard' and not line.strip():
            state = 'take'
        elif state is 'take' and line:
            yield line.strip().strip('#').split()

# raw_tables is a list (per file) of lists (per row) of lists (per column)
raw_tables = []
while True:
    result = list(get_raw_table(sys.stdin))
    if result:
        raw_tables.append(result)
    else:
        break 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T08:59:20.960

像这样的东西可能会起作用：

```
import itertools

def chunks(it):
    while True:
        it = itertools.dropwhile(lambda x: 'BEGIN_DB' not in x, it)
        it = itertools.dropwhile(lambda x: x.strip(), it)
        next(it)
        yield itertools.takewhile(lambda x: 'END_DB' not in x, it) 
```

例如：

```
src = """
BEGIN_META
    stuff
    to
    discard
END_META
BEGIN_DB
    header
    to
    discard

    1data I
    1wish to
    1extract
 END_DB

BEGIN_META
    stuff
    to
    discard
END_META
BEGIN_DB
    header
    to
    discard

    2data I
    2wish to
    2extract
 END_DB
"""

src = iter(src.splitlines())
for chunk in chunks(src):
    for line in chunk:
        print line.strip()
    print 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T02:32:49.117

您可以更以编程方式分离函数，以使您的编程逻辑更有意义，并使您的代码更加模块化和灵活。尽量不要说类似的话

```
state = "some string" 
```

因为如果将来你想向这个模块添加一些东西会发生什么，那么你需要知道你的变量“状态”采用什么参数以及当它改变值时会发生什么。您不能保证记住这些信息，这会给您带来一些麻烦。编写函数来模仿这种行为更简洁，更容易实现。

```
def read_stdin():
    with sys.stdin as f:
        for line in f:
            yield line

def search_line_for_start_db(line):
    if "BEGIN DB" in line:
        search_db_for_info()

def search_db_for_info()
    while "END_DB" not in new_line: 
        new_line = read_line.next()
        if not new_line.strip():
            # Put your information somewhere
            raw_tables.append(line)

read_line = read_stdin()
raw_tables = []
while True:
    try:
        search_line_for_start_db(read_line.next())
    Except: #Your stdin stream has finished being read
        break #end your program 
```

# php - 文件...无法打开流：权限被拒绝

> ID：14742447
> 
> 赞同：4
> 
> 时间：2013-02-07T02:17:05.343
> 
> 标签：php, permissions, fopen

我正在为客户处理一个站点，我已经在我的服务器上克隆了整个站点，它似乎可以工作。现在我已经将网站复制到他的服务器并尝试付款（使用 paypal pro）我收到一个权限错误：

```
`Warning: error_log(../PayPal.log) [function.error-log]: failed to open stream: Permission denied` 
```

我已经尝试将所有内容的权限更改为 777，并且此错误不断出现。

我已经环顾四周，在谷歌和在这里我看到它可能与 php 设置（`safemode`或`open_basedir`）有关，但是当我检查`phpinfo()`它似乎 safemod 被禁用并且 open_basedir 是空的。

有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T02:37:40.163

**更新**

在添加任何虚拟主机（甚至单个主机）时，您必须在 Apache 中设置 DocumentRoot。该指令告诉 apache 在哪里查找文件并映射网站的根目录。

```
DocumentRoot "/var/www/vhosts/www.example.com" 
```

但是仅该指令并不授予客户端读取/写入该目录的访问权限。您必须指定该目录的配置，例如。

```
<Directory "/var/www/vhosts/www.example.com">
      Options Indexes FollowSymLinks
      AllowOverride All
      Order allow,deny
      Allow from all 
</Directory> 
```

如果您的文档根目录（在此示例中）是 /var/www/vhosts/www.example.com apache 将需要对 /var/www/vhosts/ 和 /var/www/vhosts/ 具有写入/执行访问权限在apache中配置。

* * *

好的。

我相信，如果一切都是 777，那么问题很可能与 open_basedir 或/和 apache 指令有关。

确保 ../Paypal.log 可在 apache 和 open_basedir 中访问。还要记住 ../ 范围内还有什么以及它将如何影响您的安全性。

# c++ - 绕圆旋转时计算方向

> ID：14742448
> 
> 赞同：0
> 
> 时间：2013-02-07T02:17:31.373
> 
> 标签：c++, visual-c++, trigonometry, sfml

我最近在尝试使用 SFML 编写包含多个精灵的类时遇到了一个轻微的问题。

我有一个包含多个精灵的容器，每个精灵都可以从容器的中心点偏移缩放、旋转和位置。但是，我在尝试旋转容器时遇到了问题。如果我只是旋转单个精灵，它不会考虑它们与容器中心的偏移（对于某些用户界面位，这是一个问题）。经过一番挖掘，我发现了如何从中心获取它们的角度并计算它们在旋转时应该最终到达的位置。但是，我不知道如何保持它们的相对旋转相同。基本上，我希望能够做到这一点

![在此处输入图像描述](../Images/97abaa548083aea441850ada2508a6d2.png)

旋转后，它看起来像这样

![在此处输入图像描述](../Images/2c385163cee15cbe2f13f2f727f2680d.png)

由于 SFML 处理旋转和原点的方式，我不能只将每个精灵的原点设置为容器的中心并旋转。我需要某种函数来计算它们应该去的地方以及它们相对于它们已经拥有的方向应该具有的方向（所以如果精灵的角度为 0，当容器旋转 90 度时，它应该现在有一个 90 度的角度。虽然如果它以 90 的角度开始，之后应该旋转 180 度，以保持它相对于容器中其余精灵的旋转）

我用来获取旋转时相对于容器的位置的代码如下

```
float angle = atan2(p1.y -p2.y, p1.x - p2.x);
float x     = radius * cos(angle);
float y     = radius * sin(angle);

icon.set_position(x + spriteX, y + spriteY); 
```

谢谢阅读。我从来没有那么擅长数学，所以我不知道如何自己解决这个问题。在我开始研究这个问题之前，我什至不知道 cos 和 sin 在哪里 xx 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:27:43.133

你知道如何在不移动它的位置的情况下旋转精灵吗？如果是这样，只需将实际精灵本身旋转与您在上面的圆圈上定位时所获得的角度相同的角度。现在，您使用 sin 和 cos 旋转位置。您还需要按照您计算的相同角度设置“方向”：`float angle = atan2(p1.y - p2.y, p1.x - p2.x);`

祝你好运！

-p黑色

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T03:17:10.710

Simple, create a vector from the container's centre point to a sprite. Then rotate the vector and you have your new sprite position.

# linux - 我可以在 linux 的 awk 的记录分隔符中使用正则表达式吗

> ID：14742451
> 
> 赞同：6
> 
> 时间：2013-02-07T02:18:01.583
> 
> 标签：linux, bash, awk

我有这样的测试文件

```
fdsf fdsf fdsfds fdsf
fdsfdsfsdf fdsfsf
fsdfsdf var12=1343243432

fdsf fdsf fdsfds fdsf
fdsfsdfdsfsdf
fsdfsdf var12=13432434432

fdsf fdsf fdsfds fdsf
fsdfsdf fdsfsf var12=13443432432 
```

现在我想 `var12=\d+`用作记录分隔符。这在 awk 中是否可能

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T02:22:40.267

是的，但是您应该使用`[0-9]`而不是`\d`：

```
awk '1' RS="var12=[0-9]+" file 
```

IIRC，只能`GNU awk`使用多字符记录分隔符。

结果：

```
fdsf fdsf fdsfds fdsf
fdsfdsfsdf fdsfsf
fsdfsdf 

fdsf fdsf fdsfds fdsf
fdsfsdfdsfsdf
fsdfsdf 

fdsf fdsf fdsfds fdsf
fsdfsdf fdsfsf 
```

如果您需要进一步的帮助，请发布您想要的输出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T02:21:10.137

假设Linux 上的[GNU awk](http://www.gnu.org/software/gawk/) (aka `gawk`)，是的。

> `RS`
> 
> 这是 awk 的输入记录分隔符。它的默认值是一个包含单个换行符的字符串，这意味着输入记录由单行文本组成。它也可以是空字符串，在这种情况下，记录由空行分隔。**如果是正则表达式，则记录由输入文本中正则表达式的匹配项分隔。**

**来源：** [7.5.1 控制的内置变量`awk`](http://www.gnu.org/software/gawk/manual/html_node/User_002dmodified.html#User_002dmodified)，[GNU Awk 用户指南](http://www.gnu.org/software/gawk/manual/html_node/)。

正如[@steve 所说](https://stackoverflow.com/a/14742491/78845)，`\d`不在[正则表达式运算符](http://www.gnu.org/software/gawk/manual/html_node/Regexp-Operators.html#Regexp-Operators)或-特定正则表达式运算[`gawk`符](http://www.gnu.org/software/gawk/manual/html_node/GNU-Regexp-Operators.html#GNU-Regexp-Operators)列表中，因此您需要使用[括号表达式](http://www.gnu.org/software/gawk/manual/html_node/Bracket-Expressions.html#Bracket-Expressions)，例如`[0-9]`或`[[:digit:]]`代替您的`\d`.

但是，您的问题尚不清楚您的意图是什么。我已经回答了你的问题，但我怀疑我已经解决了你的根本问题。另请参阅[什么是 XY 问题？](https://meta.stackexchange.com/q/66377/147331)

# forms - 单选按钮验证 HTML FORM

> ID：14742453
> 
> 赞同：0
> 
> 时间：2013-02-07T02:18:13.923
> 
> 标签：forms, validation, radio

我有这个表格：

```
<form name="form" action="order.php" method="post">
Please select Amount:<br />
<input type="radio" name="amount" value="25" id="25" /> <label for="25">$25</label><br />
<input type="radio" name="amount" value="50" id="50" /> <label for="50">$50</label><br />
<input type="radio" name="amount" value="75" id="75" /> <label for="75">$75</label><br />
<input type="radio" name="amount" value="100" id="100" /> <label for="100">$100</label><br />
<input type="radio" name="amount" value="200" id="200" /> <label for="200">$200</label><br />
<input type="submit" value="Submit">
</form> 
```

我想知道如何进行验证以确保选择这些单选按钮之一？

我尝试了一些不同的东西，我查看了谷歌并访问了第一页和第二页上的几乎每个站点，但无法使其正常工作..

谢谢，
乍得。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:21:39.847

一种不使用客户端脚本的解决方案是默认选择一个`CHECKED`：

```
<input type="radio" name="amount" value="25" id="25" CHECKED /> 
```

这是一个向您展示的[小提琴。](http://jsfiddle.net/SLahW/)

如果这对您的情况不起作用，请考虑使用 jQuery 或 Javascript 来实施解决方案。

这应该可以帮助您入门： [如何检查是否使用 JavaScript 选择了单选按钮？](https://stackoverflow.com/questions/1423777/how-can-i-check-whether-a-radio-button-is-selected-in-javascript)

祝你好运。

# c# - 通过引用传递实体/数据模型

> ID：14742456
> 
> 赞同：1
> 
> 时间：2013-02-07T02:18:33.110
> 
> 标签：c#

只是对一些理论感到好奇

我有 C 编程背景，如果你要跨函数传递结构，你很可能会传递一个指向该结构的指针

想知道，在 C# 中，如果我要传递一个数据对象，例如一个实体模型，那么通过引用传递它有什么好处吗？在幕后是传递一个指针还是有更多？

实际上，我的模型相当小，所以如果有任何速度或性能提升，我怀疑它会不会很明显，但我想知道会很好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:11:10.920

> 在幕后是传递一个指针还是有更多？

本质上，是的。所有引用类型（基本上除了本机类型和结构之外的所有内容）都是通过引用传递的（从技术上讲，它们是通过值传递的，但在这种情况下，值*是*引用）。如果您将模型传递给更改模型值的函数，则调用函数将看到这些更改。

> 如果我要传递一个数据对象，例如实体模型，那么通过引用传递它有什么好处吗？

可能不是。在这种情况下，您将通过引用传递引用（类似于指向指针的指针）。我从未见过将模型引用传递给函数并期望该函数更新*引用*的情况。您会看到使用返回类型和偶尔使用`out`参数来完成。

# java - AnnotationUtils.findAnnotation 返回 null

> ID：14742460
> 
> 赞同：1
> 
> 时间：2013-02-07T02:19:12.470
> 
> 标签：java, spring, annotations

我正在尝试使用自定义注释查找所有 bean，以便我可以查看每个 bean 上的注释属性以在计划作业中寻求帮助。

自定义 Spring 注解：

```
@Component
@Scope("prototype")
public @interface Importer {
    String value() default "";
    String fileRegex() default "";
} 
```

示例类定义（MyAwesomeImporterFramework 是一个基类——没有注释）

```
@Importer(value="spring.bean.name", fileRegex="myfile.*\\.csv")
public class MyAwesomeImporter extends MyAwesomeImporterFramework 
```

查找带有注释的 Spring bean 的代码：

```
public static List<Class<?>> findBeanClasses(String packageName, Class<? extends Annotation> annotation) throws ClassNotFoundException {
    List<Class<?>> classes = new LinkedList<Class<?>>();

    ClassPathScanningCandidateComponentProvider scanner =
            new ClassPathScanningCandidateComponentProvider(false);
    scanner.addIncludeFilter(new AnnotationTypeFilter(annotation));

    for(BeanDefinition def : scanner.findCandidateComponents(packageName)) {
        classes.add(Class.forName(def.getBeanClassName()));
    }

    return classes;
} 
```

利用查找器获取注释属性的代码。

```
for(Class<?> clazz : AnnotationFinder.findBeanClasses(CLASS_BASE_PACKAGE, Importer.class)) {
    // Doesn't work either:
    // Importer annotation = clazz.getAnnotation(Importer.class);
    Importer annotation = AnnotationUtils.findAnnotation(clazz, Importer.class);
    importClasses.put(annotation.fileRegex(), annotation.value());
} 
```

在这里，两者都`clazz.getAnnotation(Importer.class)`返回`AnnotationUtils.findAnnotation(clazz, Importer.class)`null。在调试器中检查代码显示了正确的类被识别，但*注解*映射`clazz`是空的。

我错过了什么？这两个方法都应该返回一些东西，但看起来注释在运行时已经从类中消失了？？

# google-calendar-api - 更新事件时，Google Calendar API v3 返回“未找到”

> ID：14742462
> 
> 赞同：3
> 
> 时间：2013-02-07T02:19:25.010
> 
> 标签：google-calendar-api

好的，首先，如果已经回答了这个问题，请简单地指出我正确的方向。我已经搜索和搜索，但无法找到我遇到的问题的答案。

这是场景，我有一个需要能够执行以下操作的应用程序：

1.  获取指定日历的事件列表
2.  确定事件的开始和结束时间
3.  如果开始时间不正确（即我们在 6:01 而不是 6:00 创建了事件），则需要调整开始时间
4.  发送 POST 请求以更新开始和结束时间

到目前为止，我已经完成了 1-3 次，没有问题，我的问题在第 4 位。我有一个事件列表，我已经修改了时间并创建了发布请求，但是，它总是返回“未找到”回应，我完全糊涂了。

这是我在请求事件列表时得到的部分响应：

```
[1] => stdClass Object
    (
        [kind] => calendar#event
        [etag] => "ZrhdJMCgpoUK_a5fT7XOC6xn46g/Z2NhbDAwMDAxMzU4NjE3MzM1NDE1MDAw"
        [id] => dbqcfrdvkm40tnuvbk46mv1ktg
        [status] => confirmed
        [htmlLink] => ########################
        [created] => 2013-01-19T17:42:15.000Z
        [updated] => 2013-01-19T17:42:15.415Z
        [summary] => #########################
        [description] => ########################
        [location] => Traverse City, MI
        [creator] => stdClass Object
            (
                [email] => ######################
            )

        [organizer] => stdClass Object
            (
                [email] => ##################################
                [displayName] => Kent County
                [self] => 1
            )

        [start] => stdClass Object
            (
                [dateTime] => 2013-01-19T13:01:00-05:00
                [timeZone] => America/New_York
            )

        [end] => stdClass Object
            (
                [dateTime] => 2013-01-19T16:01:00-05:00
                [timeZone] => America/New_York
            )

        [recurrence] => Array
            (
                [0] => RRULE:FREQ=WEEKLY;UNTIL=20130331T000000Z
            )

        [iCalUID] => ###############################
        [sequence] => 0
        [attendees] => Array
            (
                [0] => stdClass Object
                    (
                        [email] => ####################
                        [displayName] => ##############
                        [responseStatus] => needsAction
                    )

            )

        [reminders] => stdClass Object
            (
                [useDefault] => 1
            )

    ) 
```

如您所见，我毫无问题地获得了活动 ID，然后我转身使用日历 ID 和我刚刚收到的活动 ID 创建发布请求

```
https://www.googleapis.com/calendar/v3/calendars/{CALENDAR ID}/events/dbqcfrdvkm40tnuvbk46mv1ktg?key={API KEY} 
```

这就是我卡住的地方，我得到的唯一响应是“未找到”，即使与请求一起发送的标头看起来不错

```
Array
(
[url] => https://www.googleapis.com/calendar/v3/calendars/{CALENDAR ID}/events/dbqcfrdvkm40tnuvbk46mv1ktg?key={API KEY}
[content_type] => text/html; charset=UTF-8
[http_code] => 404
[header_size] => 360
[request_size] => 485
[filetime] => -1
[ssl_verify_result] => 0
[redirect_count] => 0
[total_time] => 0.364634
[namelookup_time] => 3.0E-5
[connect_time] => 0.08616
[pretransfer_time] => 1.7E-5
[size_upload] => 105
[size_download] => 9
[speed_download] => 24
[speed_upload] => 287
[download_content_length] => -1
[upload_content_length] => 105
[starttransfer_time] => 0.3646
[redirect_time] => 0
[certinfo] => Array
    (
    )

[redirect_url] => 
[request_header] => POST /calendar/v3/calendars/{CALENDAR ID}/events/dbqcfrdvkm40tnuvbk46mv1ktg?key={API KEY} HTTP/1.1
Host: www.googleapis.com
Accept: */*
Content-Type: application/json
Authorization: Bearer {SECURITY TOKEN}, X-JavascriptUser-Agent: HiddenOnes
Content-Length: 105
) 
```

如果我去 Google 开发者中心并使用 Events:update 测试区，这是生成的 url：

```
https://www.googleapis.com/calendar/v3/calendars/{CALENDAR ID}/events/dbqcfrdvkm40tnuvbk46mv1ktg?key={YOUR_API_KEY} 
```

如果我从那里测试它，它工作得很好，所以我现在完全被难住了，所以任何有效的、有用的想法都会受到欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T01:02:13.483

我想说您的 {CALENDAR ID} 无效。你从哪里得到这个价值？

也可以使用默认为用户主日历的“主要”日历 ID。

此外，更新事件时，您应该使用`PUT`HTTP 动词[https://developers.google.com/google-apps/calendar/v3/reference/events/update](https://developers.google.com/google-apps/calendar/v3/reference/events/update)

# css - Body Class 正在应用 如何使用？

> ID：14742464
> 
> 赞同：1
> 
> 时间：2013-02-07T02:19:30.577
> 
> 标签：css, drupal

您好，我注意到在我的主题上，当我进入我的 drupal 网站的“部分”时，我似乎正在应用某种身体课程（？？）。

![萤火虫CSS](../Images/bf4d0650ada67d80306e5d9dcc0c345f.png)

我无法知道如何使用它。谁能更全面地向我解释？谢谢

到目前为止我已经尝试过了，但没有效果-

```
 body.science {
background: none repeat scroll 0 0 yellow;
}

body.science a:link {
color:blue; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T02:24:56.600

在第 28 行，您定义了一个样式（删除该部分`a`就可以了）：

```
<style type="text/css">
    a:link, a:visited {
        color:#242424
    }
    a:hover {
        color:#CD2A2A
    }
    a:active, a.active, li a.active {
        color:#CD2A2A
    }
</style> 
```

# python - django model manytomany过滤器

> ID：14742469
> 
> 赞同：0
> 
> 时间：2013-02-07T02:20:02.467
> 
> 标签：python, django, filter

假设我有 User、Newsletter 和 Subscription 模型，Subscription 是 User 和 Newsletter 的映射表，例如。订阅具有用户和时事通讯的外键

```
class User(models.Model):
  ...

class Newsletter(models.Model):
  ...

class Subscription(models.Model):
  subscriber = models.ForeignKey(User)
  newsletter = models.ForeignKey(Newsletter) 
```

如何在一个非常简单的查询中获取返回特定用户订阅的时事通讯的查询集？我觉得有一个，但除非通过多个语句来实现这一点，否则我无法真正想到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:29:51.073

这应该有效：

```
Newsletter.objects.filter(
    id__in=[subscription.newsletter.id for subscription in
            Subscription.objects.filter(subscriber=user)] 
```

更具可读性（和详细）的版本：

```
subscriptions = Subscription.objects.filter(subscriber=user) # all subscriptions for a given user

newsletter_ids = [subscription.newsletter.id for subscription in subscriptions]

Newsletter.objects.filter(id__in=newsletter_ids) # answer 
```

# ruby-on-rails - 无法在 mac lion 上安装 rmagick

> ID：14742476
> 
> 赞同：0
> 
> 时间：2013-02-07T02:21:16.630
> 
> 标签：ruby-on-rails, ruby-on-rails-3

当我尝试安装 rmagick 时，它不断出现错误：

错误：[http](http://rubygems.org/does) ://rubygems.org/ 似乎不是存储库错误：在本地或存储库中找不到 gem rmagick

另一个问题是如何检查是否安装了 rmagick 我尝试 rmagick -v 它说找不到命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:24:47.353

除非“不要这样做！” （如果你能接受的话，建议是合理的）你需要求助于 Homebrew 来安装 rmagick。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T02:23:03.480

不要这样做！！！！！！！！！！

我们使用 rmagick 太久了，项目没有维护，在为时已晚之前切换到 MiniMagick。

这里最大的问题是 Rmagick 与较新的 ImageMagick 不兼容。

嗯，说得太早了。

他们找人接手了，不过看看github。90% 的文件近 5 年没有被碰过。

[https://github.com/rmagick/rmagick](https://github.com/rmagick/rmagick)

我已经安装在我的机器上

我采取的步骤是

```
brew install ImageMagick
gem install rmagick 
```

但是那是将近一年前，一位同事上周无法使用更新的图像魔法使其正常工作，现在我在 github 上看到他们可能已经解决了他的问题，所以祝你好运。我还记得在使用非 LLVM 版本的 GCC 编译它时摸索过。但我觉得这超出了这个问题的范围。

# vb.net - 规范化具有未知父引用的路径

> ID：14742478
> 
> 赞同：0
> 
> 时间：2013-02-07T02:21:22.443
> 
> 标签：vb.net, path, normalization

## 问题陈述

我当前的项目需要处理很多 unix 风格的路径，最重要的是加入路径和规范化路径。

通过规范化，我的意思是删除对当前目录 ( `.`) 的所有引用、对父目录 ( `..`) 和冗余正斜杠 ( `//`) 的引用，同时保留原始路径的“含义”。

例如：路径`/foo/bar`和`/foo/./bar`和`/foo/baz/../bar`都指向同一个目录。但是，进行简单的字符串比较显然会表明它们是不同的路径。这就是为什么我试图规范化路径，以便它们都被同等对待。

执行此操作的代码实际上并不难编写。您可以在问题的底部找到我的代码。但是我仍然遇到了 1 个问题。

目前，用户可以输入如下所示的路径：

```
input:      /../../../foo/bar
normalized: /foo/bar 
```

因为这是一个绝对路径，所以它正确地解析为`foo/bar`根 ( `/`) 目录。

但是，当输入是相对路径时，我不可能回溯所需的步骤数量，因为我不知道父目录的名称。

```
input:      ../../../foo/bar
normalized: foo/bar 
```

想象一下完整路径是`/a/b/c/d/../../../foo/bar`，在这种情况下，算法产生：

```
input:      /a/b/c/d/../../../foo/bar
normalized: /a/foo/bar 
```

无论出于何种原因，当路径被分成`/a/b/c/d`和时，就会出现问题`../../../foo/bar`。

```
input:      /a/b/c/d/
input:      ../../../foo/bar
normalized: /a/b/c/d
normalized: foo/bar

joined: /a/b/c/d/foo/bar 
```

如您所见，当归一化的输出值重新组合在一起时，路径就失去了原来的意义。如果我不删除主要的父引用，就不会发生这种情况。

所以我想我有3个选项，以防父引用未知的相对路径：

1.  删除主要的父引用，即使结果在技术上是错误的
2.  保持领先的父参考，即使结果在技术上没有标准化
3.  抛出错误

我希望一些天才能想出一个更好的主意。但如果不是，你会怎么做？

## 代码

我还没有针对每个可能的用例测试我的代码，但它应该是相对（双关语）稳定的。

```
Public MustInherit Class UnixPath

    Private Sub New()
    End Sub

    ''' <summary>
    ''' Gets whether the specified path is an absolute path.
    ''' </summary>
    Public Shared Function IsAbsolute(path As String) As Boolean
        Return path.StartsWith(UnixPath.Separator, StringComparison.InvariantCulture)
    End Function

    ''' <summary>
    ''' Normalizes a string path, taking care of '..' and '.' parts.
    ''' </summary>
    Public Shared Function Normalize(path As String) As String
        If String.IsNullOrEmpty(path) Then
            Return String.Empty
        End If
        Dim oldPath = path.Split(New Char() {UnixPath.Separator}, StringSplitOptions.RemoveEmptyEntries)
        Dim newPath As New Stack(Of String)
        Dim skipCount As Integer = 0

        For i = oldPath.GetUpperBound(0) To oldPath.GetLowerBound(0) Step -1
            If String.Equals(oldPath(i), UnixPath.CurrentDirectory, StringComparison.InvariantCulture) Then
                Continue For
            ElseIf String.Equals(oldPath(i), UnixPath.ParentDirectory, StringComparison.InvariantCulture) Then
                skipCount += 1
            ElseIf skipCount > 0 Then
                skipCount -= 1
            Else
                newPath.Push(oldPath(i))
            End If
        Next

        If UnixPath.IsAbsolute(path) Then
            Return UnixPath.Join(UnixPath.Separator, UnixPath.Join(newPath.ToArray))
        Else
            For i = 1 To skipCount
                newPath.Push(UnixPath.ParentDirectory)
            Next
            Return UnixPath.Join(newPath.ToArray)
        End If
    End Function

    ''' <summary>
    ''' Combines an array of string paths.
    ''' </summary>
    Public Shared Function Join(ParamArray paths As String()) As String
        Dim builder As New StringBuilder
        Dim count = paths.GetUpperBound(0)

        For i = paths.GetLowerBound(0) To count
            If String.IsNullOrEmpty(paths(i)) Then
                Continue For
            End If
            builder.Append(paths(i).TrimEnd(UnixPath.Separator))
            If i = count Then
                Exit For
            End If

            builder.Append(UnixPath.Separator)
        Next

        Return builder.ToString
    End Function

    Public Shared ReadOnly Property CurrentDirectory As String
        Get
            Return "."
        End Get
    End Property

    Public Shared ReadOnly Property ParentDirectory As String
        Get
            Return ".."
        End Get
    End Property

    Public Shared ReadOnly Property Separator As Char
        Get
            Return "/"c
        End Get
    End Property

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T21:18:34.790

您将不会通过删除来保留原始路径的含义`..`，而只能通过删除重复的`.`and来保留`/`。不过，目前尚不清楚您要做什么。可能你真的不需要以这种方式“规范化”你的路径。

无论如何，这里有一个想法：

```
Dim inputPath As String = "/../../../foo/bar"
Dim outputPath As String = inputPath.Replace(".", "").Replace("..", "")
Dim outputPathLength As Integer
Do
  outputPathLength = outputPath.Length
  outputPath = outputPath.Replace("//", "/")
Loop Until outputPathLength = outputPath.Length 
```

为了更好的实现——也可以解释你的情况#2，你可能应该使用正则表达式。

**编辑：**这可能会被某些人认为是黑客攻击，但这是另一种选择：

```
Dim inputPath As String = "../../../foo/bar"
Dim outPath As String = IO.Path.GetFullPath(IO.Path.Combine("C:\", inputPath))
Dim newPath As String = outPath.Substring(outPath.IndexOf("\") + 1).Replace("\", "/")
If inputPath.StartsWith("/") Then newPath = "/" & newPath
MsgBox(newPath) 
```

它使用文件系统来规范化路径，并转换回 unix 样式。适用于上述所有测试用例。

# batch-file - 批处理文件：打开cmd，运行VS Command Prompt，执行Makecert

> ID：14742480
> 
> 赞同：1
> 
> 时间：2013-02-07T02:21:52.627
> 
> 标签：batch-file, cmd, makecert

我需要在批处理文件中执行此操作：

1.  打开命令
2.  通过 cmd 运行 VS 命令提示符
3.  执行此命令“makecert -sv SignRoot.pvk -cy authority -r sha1 -a -n \"CN=Certificate\" -ss my -sr localmachine certificate.cer”

到目前为止，我已经完成了 1 和 2，我的问题是进入 #3。

这是我到目前为止所拥有的。

```
start  cmd.exe /k "%comspec% /c  "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\vcvarsall.bat" x86" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T03:19:56.013

这是我用 VS2012 设置打开 Qt 5.0.2 命令提示符并运行我自己的批处理文件所做的：

```
C:\Windows\System32\cmd.exe /A /Q /K C:\Qt\Qt5.0.2\5.0.2\msvc2012_64\bin\qtenv2.bat & call "C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\vcvarsall.bat" x64 & cd c:\tkbt\Launch2.0.0 & call SetupEnvVars.bat 
```

将所有环境变量都设置好后，将我放在正确的位置。

所以你的问题的答案是在“&”之后附加你的下一个电话

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-16T13:17:35.077

实际上，Visual Studio 命令提示符并不是一个特殊的命令提示符，它是普通的 windows CMD，但配置了一些环境变量

要在批处理文件中产生相同的效果，您需要从 Visual Studio 安装中调用一个特殊的批处理文件来配置 Windows CMD

为此，批处理文件中的第一行应该是

```
call "%VS120COMNTOOLS%\vsvars32.bat" 
```

然后你可以调用任何视觉工作室特定的命令

VS120COMNTOOLS 是您的 Visual Studio 版本的路径环境变量

# c# - Nuget Powershell 重命名内容文件

> ID：14742484
> 
> 赞同：1
> 
> 时间：2013-02-07T02:21:58.503
> 
> 标签：c#, powershell, nuget

我正在寻找重命名通过 nuget 包加载的文件：

我知道我可以得到这样的文件：

```
$f = $project.ProjectItems | ForEach-Object { $_.ProjectItems } | where { $_.Name -eq "MyFile.cs.custom" } 
```

我也知道我可以像这样删除该文件：

```
$f.Delete() 
```

我只是在寻找重命名该文件的语法。我试过做：

```
$project.ProjectItems | ForEach { $_.ProjectItems } | Where { $_.Name -eq "MyFile.cs.custom" } | Foreach {Rename-Item $_.Name ($_.FileNames -replace "\.custom", "")} 
```

那没有用

install.ps1 文件的全部内容是：

```
param($installPath, $toolsPath, $package, $project)

#save the project file first - this commits the changes made by nuget before this     script runs.
$project.Save()

$project.ProjectItems | ForEach { $_.ProjectItems } | Where { $_.Name -eq "MyFile.cs.custom" } | Foreach {Rename-Item $_.Name ($_.FileNames -replace "\.custom", "")}

$project.Save() 
```

我最终通过将 csproj 文件的项目启动对象更改为项目中尚不存在的类来解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-22T14:59:27.963

我希望它对某人有用，至少它对我有用。在这段代码中，我在根文件夹中查找文件夹“FolderConfig”（例如 C:\projects\SomeProject\FolderConfig\”，然后重命名文件。您可以按文件夹“FolderConfig”删除过滤器并在所有项目。

```
$project.ProjectItems | where { $_.Name -eq "FolderConfig" } |
ForEach { $_.ProjectItems } |  where { $_.Name -eq "Test.config"} |
ForEach { $_.Name = "NewTest.config" } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:14:21.927

我们的 install.ps1 文件应该看起来像这样。

```
param($installPath, $toolsPath, $package, $project)

$file1 = $project.ProjectItems.Item("test.exe")
$file2 = $project.ProjectItems.Item("test.config")

// set 'Copy To Output Directory' to 'Copy if newer'
$copyToOutput1 = $file1.Properties.Item("CopyToOutputDirectory")
$copyToOutput1.Value = 2

$copyToOutput2 = $file2.Properties.Item("CopyToOutputDirectory")
$copyToOutput2.Value = 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T02:38:52.273

我怀疑 ProjectItems 的类型是 FileInfo 所以试试这个：

```
$project.ProjectItems | ForEach { $_.ProjectItems } | 
    Where { $_.Name -eq "MyFile.cs.custom" } |  
    Foreach {Rename-Item $_.Name ($_.FileNames -replace "\.custom", "")} 
```

我认为您将需要在项目上找到与文件的全名（路径）相对应的属性（用作重命名项目的路径），除非您可以保证将 PowerShell cd 到文件的包含目录。

另外，请注意`-replace`使用正则表达式元字符。

请注意，`FileNames`可能会在单个字符串中返回多个文件名。

# google-apps-script - Gmailapp 触发器

> ID：14742486
> 
> 赞同：0
> 
> 时间：2013-02-07T02:22:02.170
> 
> 标签：google-apps-script

我想使用应用程序脚本持续监控 gmail 收件箱。我想使用电子邮件主题行作为输入。

有没有办法设置触发器或过滤器，以便收到的每封电子邮件都会触发脚本运行？理想情况下，有某种*onReceive*类。

我能想到的唯一其他选择是设置一个**cron**来继续运行脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:32:57.673

看起来没有 onReceive 触发器。cron 是你最好的选择。取决于你在做什么，每分钟跑步都不会那么糟糕。

# java - java-使用递归查找子集和

> ID：14742488
> 
> 赞同：-1
> 
> 时间：2013-02-07T02:22:11.233
> 
> 标签：java, recursion, subset

该程序的目标是查看数组中的一个输入是否可以是其他输入的任意组合的总和。我了解它背后的理论，并想出了如何解决它，但我不确定如何实现它。我决定将数组从最小到最大排序，然后我想我会先将数字对与以下输入进行比较，然后使用 3 个输入，然后是 4 个，等等，但我不知道如何使用递归来解决这个问题。一些方向将非常有帮助，而不是寻找完整的答案谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:27:14.823

让我看看..

你需要一个目标总和，这就是争论之一。

到目前为止，您需要一笔总和，所以那是另一笔。

```
Boolean IsSubsetSum(int[] sorted array, int Target,int maxIndex , int SumSoFar = 0); 
```

这听起来是个不错的起点。

如果 SumSoFar == 目标

返回真

否则如果 maxIndex == 0

返回假

别的

将 array[maxIndex] 添加到总和并使用适当的参数递归调用..

此步骤将循环 0..maxIndex，因此效率不高，但可以作为开始。您需要根据recusive调用的返回值计算返回值，如果您发现为真，您可以提前退出。

# meteor - 加载页面和获取 xhr 对象的速度问题

> ID：14742490
> 
> 赞同：0
> 
> 时间：2013-02-07T02:22:31.047
> 
> 标签：meteor

我刚刚实现了一个 150 行以下的超级小应用程序 [http://songcollections.meteor.com/](http://songcollections.meteor.com/)

在表格中显示日期需要 5 秒钟。

由于我对 JS DOM 不太了解，可能是什么问题？

我把代码放在那里进行检查： `http://jsfiddle.net/wodecaoxin/3ckXj/1/`

（为简洁起见，client.js 和 server.js 组合在一起。我将应用程序与不同的 js 文件部署在不同的文件夹中）

我将代码拆分为“客户端”和“服务器”文件夹。那没有帮助。

```
if (Meteor.isServer) {
    Meteor.startup(function () {
        // code to run on server at startup
        //publish "table" event
        Meteor.publish("table", function () {
            console.log("table signal");
            return lists.find({});
        });
        //listen
        Meteor.publish("songdetails", function (title) {
            return lists.find({
                _id: title
            });
        });
    });
} 
```

全尺寸图片点击：“在新标签中打开图片” ![全尺寸图片点击：](../Images/b07fcf238d76fc5bbdbf614d42014618.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:04:18.727

你的代码没有问题。共享主机有点慢。您可以尝试将应用程序放在您自己的服务器上以查看改进。此外，您应该考虑在您的应用程序中添加“加载”消息：[Meteorjs loading message](https://stackoverflow.com/questions/14171294/meteorjs-loading-message)

# c - 内存中的地址空间段和程序内存段有什么区别？

> ID：14742493
> 
> 赞同：0
> 
> 时间：2013-02-07T02:22:58.487
> 
> 标签：c, memory

1、可执行文件中有.text、.data、.bss等部分。
2、还有程序内存段（代码、初始化数据、未初始化数据（BSS）、堆、栈）可以从可执行文件中的段映射。

在每一个之上，我可以理解它是什么，在加载程序时，节被放置在磁盘中，而段被放置在内存中。而当程序开始运行时，Initialized data、BSS、Heap segment都被放入Data segment中，下表描述了更多细节：

此表引用自[http://www.tenouk.com/ModuleW.html](http://www.tenouk.com/ModuleW.html)表 w.6：

![表 w.6](../Images/747ae6cd3d387875501c0edf26cc39bb.png)**我的问题是内存中的地址空间段**和 **程序内存段** 有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:19:50.093

它们只是引用内存中相同段的不同方式..

*   “代码”-或“文本”-段是从可执行文件的 .text 部分加载的，加载到其中的内存页被标记为可执行文件。
*   程序地址空间的“数据”部分包含 3 个不同的逻辑部分：
    *   初始化数据（从可执行文件的 .data 部分加载）
    *   未初始化的数据 - 可执行文件的 .bss 部分记录了要分配的大小，但没有实际内容（毕竟，它是未初始化的！）
    *   并且动态分配的数据（堆） - 在程序运行时分配，因此在可执行内存页面中没有或不需要所有这些数据部分的匹配部分将是读/写的，理论上不- 也可执行。
*   “堆栈”部分 - 本质上类似于数据类型部分，但在程序执行中具有特殊含义/目的。也不受可执行文件中的部分支持。

处理这些部分/段的确切方式显然是特定于实现的 - 文件的布局取决于使用的特定可执行格式和链接器，并且内存中程序的布局再次取决于所使用的可执行格式和操作系统加载器。例如，根据对 PE 文件格式的讨论 - [http://msdn.microsoft.com/en-us/library/ms809762.aspx](http://msdn.microsoft.com/en-us/library/ms809762.aspx) - Borland 链接器之一用于从可执行文件，而是将其与 .data 部分结合起来 - 我怀疑有许多类似变量的示例，具体取决于所使用的 OS/Linkers/Executable 格式的不同风格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T03:15:18.310

In the memory no difference.

But, usually they have separated caches. Also, in the virtual memory table, code segment is marked as such, so trying to execute something that is not code segment will crash the program.

Note that this actually vary from platform to platform.

# c# - 捕获和处理 Web 浏览器关闭事件

> ID：14742498
> 
> 赞同：4
> 
> 时间：2013-02-07T02:23:30.753
> 
> 标签：c#, events, webbrowser-control

我正在使用 Windows 窗体和 WebBrowser 控件，我需要捕获和处理 WebBrowser 控件调用以关闭。

我看过这个，但它不能正常工作，因为我需要它：http: [//blogs.artinsoft.net/Mrojas/archive/2009/05/21/Extended-WebBrowser-Control-Series-WebBrowser-Control-and-窗口关闭（）.aspx](http://blogs.artinsoft.net/Mrojas/archive/2009/05/21/Extended-WebBrowser-Control-Series-WebBrowser-Control-and-windowClose().aspx)

这是我收到的信息：

```
---------------------------
Web Browser
---------------------------
The webpage you are viewing is trying to close the window.

Do you want to close this window?
---------------------------
Yes   No   
--------------------------- 
```

我需要捕捉这个事件并抑制它，然后执行一个函数。有谁知道一个简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T10:54:36.037

在到处搜索并没有真正得到我需要的东西之后，我偶然发现了一个参考：

```
HtmlDocument htmlDocument = this.webBrowser1.Document;
htmlDocument.Window.Unload += new HtmlElementEventHandler(Window_Unload); 
```

在关闭和处置 WebBrowser 控件之前，文档确实会被卸载。

```
void Window_Unload(object sender, HtmlElementEventArgs e)
{
    // Do your stuff here...
    // Call Method...
    // Close Form...
} 
```

这现在对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T14:15:03.680

可能您正在通过 Javascript 关闭此窗口。基本上这是安全原因。你不能关闭一个窗口，除非它是由脚本本身打开的。可能的解决方案是使用这个 Javascript 代码

```
function CloseWindow()
{
   window.open('','_self','');
   window.close();
} 
```

这是指向同一示例的链接

[https://msmvps.com/blogs/paulomorgado/archive/2007/11/02/how-to-close-browser-windows-in-windows-internet-explorer-7.aspx](https://msmvps.com/blogs/paulomorgado/archive/2007/11/02/how-to-close-browser-windows-in-windows-internet-explorer-7.aspx)

但我不确定 IE 的所有版本。

# python - 如何将 django root url 设置为登录 url？

> ID：14742500
> 
> 赞同：0
> 
> 时间：2013-02-07T02:23:50.393
> 
> 标签：python, django, login, django-registration

使用 django-registration 时，网址让我有点困惑

假设我希望我的 inidex 页面 localhost:8000 成为登录页面，但是 django-registration 的登录 url 有一个 /login 前缀，我是否必须将 /login 放在我的 url 中

```
url(r'^/login/$', include('registration.backends.default.urls')), 
```

在这种情况下，localhost:8000 将为空，这意味着在部署此项目后，查看 some.com 之类的 url 将为空。

如何将索引页面设置为实际的 django-registration 登录页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:49:20.203

不是真的，您需要在您希望用户进行身份验证的视图中包含 @login_required 装饰器，例如。

```
# views.py

from django.contrib.auth.decorators import login_required
from django.http import HttpResponse

@login_required
def index(request):
    return HttpResponse('Only registers will see this page')

# now you can add the stuff that you would want only the registered users to view, 
# so basically if a new visitors tries to visit your site say at www.abc.com, he will first be redirected to the www.abc.com/login/ where he needs to create an account, once authenticated, he will then be redirected to the index page 
```

一起参考[索引页面上的django-registration，注册和登录表单，我做对了吗？](https://stackoverflow.com/questions/7761626/django-registration-registration-and-login-form-on-index-page-together-did-i-d)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T02:51:51.817

不知道这是最好的方法，但我想你可以进入 django-registration (registration.auth_urls.py) 并编辑登录 url，使其成为 r'^$' 而不是 r' ^登录/$'。这通常不是最佳做法，但应该可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T03:03:15.930

如果您希望您的实际 www.example.com 成为登录页面，只需执行以下操作：

```
url(r'^$', include('registration.backends.default.urls')), 
```

如果您希望登录页面有自己的页面，请执行以下操作：

```
url(r'^/login/$', include('registration.backends.default.urls')), 
```

因此，当您访问 www.example.com/login 时，它将进入登录页面。

# java - 何时使用事件总线？

> ID：14742501
> 
> 赞同：30
> 
> 时间：2013-02-07T02:23:58.100
> 
> 标签：java, guava, event-bus

我正在为一个新的 Java Web 应用程序设计后端，并试图决定是否使用事件总线；特别是[番石榴`EventBus`](https://google.github.io/guava/releases/23.0/api/docs/com/google/common/eventbus/EventBus.html)。

大多数服务器端请求将是同步的：也就是说，用户正在请求数据并且需要在几秒钟内得到响应。但是，也有相当多的请求可以是异步的，并且在客户端是“一劳永逸”的。只要它们最终得到处理，如果需要 2 秒或 2 小时来处理，客户可能不太在意。

对于这些异步请求，我计划让侦听映射 URL 的 servlet 将请求发布到队列。然后，消费者将出列每个请求并将其路由到适当的处理程序。这是`EventBus`可能或可能不会发挥作用的地方。将请求路由到正确的处理程序的业务逻辑非常复杂。通常骆驼路线将是完美的解决方案。在我的用例中，我想知道是否可以将一堆“处理器”（事件处理程序）连接到同一个事件总线，然后让每个处理器相互触发和接收事件，直到最终结果是产生。

我想说我已经探索过使用 Apache Camel，并且我相信 Camel 是完成这项工作的正确工具。可悲的是，由于这个问题范围之外的原因，我不会使用它。所以我开始想出类似骆驼的解决方案，这就是我如何到达 Guava 的`EventBus`. 但它可能不是一个合适的替代品。

**我想我正在寻找`Event Bus`模式解决的问题分类，然后我需要确定它是否与我的用例匹配。**

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-02-07T23:14:50.700

`EventBus`这是简而言之解决的问题陈述：

“我想要一种简单、集中的方式来通知对特定类型事件感兴趣的代码，当这些事件发生时，发布事件的代码和接收它的代码之间没有任何直接耦合。”

当您说“将请求路由到正确的处理程序的业务逻辑非常复杂”时，我*怀疑*这`EventBus`可能不是您要寻找的，因为它仅基于 Java 对象类进行路由（尽管您可以做一些花哨的事情在事件类上实现接口并让订阅者订阅特定接口）。

# c# - 如果它应该包含格式化的文本、图像、链接等，我应该使用什么类型的属性？

> ID：14742502
> 
> 赞同：0
> 
> 时间：2013-02-07T02:24:00.330
> 
> 标签：c#, asp.net, asp.net-mvc-3, asp.net-mvc-4

我有一个“页面”类，它有一个“内容”属性 - 这将位于 Web 表单上，用户应该能够格式化文本、插入图片、附件等。这应该是什么类型的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:27:23.230

看起来[MvcHtmlString](http://msdn.microsoft.com/en-us/library/system.web.mvc.mvchtmlstring%28v=vs.108%29.aspx)非常适合您的属性类型。

# vim - 如何在vim的标签标签中显示标签中的拆分数量？

> ID：14742504
> 
> 赞同：2
> 
> 时间：2013-02-07T02:24:16.590
> 
> 标签：vim, tabs

在 VIM 中，我像一个经过良好调整的人一样使用选项卡。我有文件名作为选项卡标签，我习惯于浏览选项卡以查找要编辑的文件。但是，如果该文件位于选项卡中的一个拆分中，并且焦点位于另一个拆分上，我将看不到该文件，我会感到**非常困惑。**

**有没有办法在标签标题中显示拆分数量？**我已经浏览了`:h stl`（选项卡标题使用状态行语法）中的选项，但我没有看到任何拆分。似乎您也可以传入一个函数，但我尝试搜索“vim count splits”但一无所获。

另外，如果有一些插件可以促进这一点，我全神贯注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:53:40.010

最后一个窗口编号等于窗口拆分的数量：`tabpagewinnr(v:lnum, '$')`。帮助中有一个示例`:help setting-guitablabel`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T08:32:30.493

停止使用这样的标签可能会有所帮助。

您*真正*想要做的是“切换到某个选项卡中的特定缓冲区”，而不是“切换到具有特定缓冲区的某个选项卡”。

您可以使用两种方法中的任何一种来实现。

*   在您的`~/.vimrc`中，添加以下行：

    ```
    set switchbuf=useopen,usetab 
    ```

    并使用以下命令跳转到所需的缓冲区，无论它在哪里，或者如果当前窗口没有显示在任何地方，则拆分当前窗口：

    ```
    :sb bufname 
    ```

*   使用提供“更好”的缓冲区导航的插件。我使用 CtrlP 跳转到缓冲区的任何位置（默认情况下或多或少类似于上面的命令），还有其他的。

如果您坚持在“标签”中思考，您可以尝试：

```
:tabs<CR>:xtabn 
```

是`x`缓冲区所在的选项卡的编号。当然，使用映射可以使上面的命令更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T04:24:35.813

> 但是，如果该文件位于选项卡中的一个拆分中，并且焦点位于另一个拆分上，我将看不到该文件，我会感到非常困惑。

为了缓解这个问题，我`:set ls=2`.

# delphi - 如何从其 TRttiType 实例化一个类？

> ID：14742505
> 
> 赞同：8
> 
> 时间：2013-02-07T02:24:27.973
> 
> 标签：delphi, delphi-xe2, rtti

我想创建一个表单，给定它的类名作为字符串，[之前已经问过这个问题](https://stackoverflow.com/questions/701049/is-there-a-way-to-instantiate-a-class-by-its-name-in-delphi)，但我不想调用`GetClass`，而是想使用 Delphi 的新 RTTI 功能。

使用此代码，我有一个`TRttiType`，但我不知道如何实例化它。

```
var
  f:TFormBase;
  ctx:TRttiContext;
  lType:TRttiType;
begin
  ctx := TRttiContext.Create;
  for lType in ctx.GetTypes do
  begin
    if lType.Name = 'TFormFormulirPendaftaran' then
    begin
      //how to instantiate lType here?
      Break;
    end;
  end;
end; 
```

我也试过`lType.NewInstance`没有运气。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T03:00:46.197

您必须将[`TRttiType`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Rtti.TRttiType)转换为[`TRttiInstanceType`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Rtti.TRttiInstanceType)类，然后使用该函数调用构造[`GetMethod`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Rtti.TRttiType.GetMethod)函数。

试试这个样本

```
var
  ctx:TRttiContext;
  lType:TRttiType;
  t : TRttiInstanceType;
  f : TValue;
begin
  ctx := TRttiContext.Create;
  lType:= ctx.FindType('UnitName.TFormFormulirPendaftaran');
  if lType<>nil then
  begin
    t:=lType.AsInstance;
    f:= t.GetMethod('Create').Invoke(t.MetaclassType,[nil]);
    t.GetMethod('Show').Invoke(f,[]);
  end;
end; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T03:02:07.403

您应该使用该`TRttiContext.FindType()`方法而不是手动遍历`TRttiContext.GetTypes()`列表，例如：

```
lType := ctx.FindType('ScopeName.UnitName.TFormFormulirPendaftaran');
if lType <> nil then
begin
  ...
end; 
```

但无论哪种方式，一旦你找到`TRttiType`了所需的类类型，你就可以像这样实例化它：

```
type
  TFormBaseClass = class of TFormBase;

f := TFormBaseClass(GetTypeData(lType.Handle)^.ClassType).Create(TheDesiredOwnerHere); 
```

或者这个，如果`TFormBase`来自`TForm`：

```
f := TFormClass(GetTypeData(lType.Handle)^.ClassType).Create(TheDesiredOwnerHere); 
```

或者这个，如果`TFormBase`来自`TCustomForm`：

```
f := TCustomFormClass(GetTypeData(lType.Handle)^.ClassType).Create(TheDesiredOwnerHere); 
```

**更新：**或者，像@RRUZ 显示的那样做。那是更`TRttiType`面向的，并且不依赖于使用旧`TypInfo`单元的功能。

# java - 找到第 n 个素数

> ID：14742509
> 
> 赞同：3
> 
> 时间：2013-02-07T02:24:48.237
> 
> 标签：java, performance, algorithm, complexity-theory, primes

我在下面编写了以下代码来查找第 n 个素数。这可以在时间复杂度上得到改善吗？

描述：

ArrayList arr 存储计算的素数。一旦 arr 达到大小“n”，循环退出，我们检索 ArrayList 中的第 n 个元素。在计算素数之前将数字 2 和 3 添加，并检查从 4 开始的每个数字是否为素数。

```
public void calcPrime(int inp) {
    ArrayList<Integer> arr = new ArrayList<Integer>(); // stores prime numbers 
                                                      // calculated so far
    // add prime numbers 2 and 3 to prime array 'arr'
    arr.add(2); 
    arr.add(3);

    // check if number is prime starting from 4
    int counter = 4;
     // check if arr's size has reached inp which is 'n', if so terminate while loop
    while(arr.size() <= inp) {
        // dont check for prime if number is divisible by 2
        if(counter % 2 != 0) {
            // check if current number 'counter' is perfectly divisible from 
           // counter/2 to 3
            int temp = counter/2;
            while(temp >=3) {
                if(counter % temp == 0)
                    break;
                temp --;
            }
            if(temp <= 3) {
                arr.add(counter);
            }
        }
        counter++;
    }

    System.out.println("finish" +arr.get(inp));
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T02:48:25.140

**是的。**

您的算法进行**O(n^2)**操作（也许我不准确，但似乎如此），其中**n**是结果。

有采用**O(ipn* log(log(n)))的**[http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)算法。您只能在其中进行inp步骤，并假设n = **2ipn** ***ln(ipn)**。 **n**应该大于**ipn** -prime。（我们知道质数的分布[http://en.wikipedia.org/wiki/Prime_number_theorem](http://en.wikipedia.org/wiki/Prime_number_theorem)）

 ******无论如何，您可以改进现有的解决方案：

```
public void calcPrime(int inp) {
    ArrayList<Integer> arr = new ArrayList<Integer>();
    arr.add(2);
    arr.add(3);

    int counter = 4;

    while(arr.size() < inp) {
        if(counter % 2 != 0 && counter%3 != 0) {
            int temp = 4;
            while(temp*temp <= counter) {
                if(counter % temp == 0)
                    break;
                temp ++;
            }
            if(temp*temp > counter) {
                arr.add(counter);
            }
        }
        counter++;
    }

    System.out.println("finish" +arr.get(inp-1));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T02:47:03.753

您可以做一些事情来加快速度：

1.  从 5 开始计数器并将其增加 2 而不是 1，然后不要在循环中检查 mod 2。
2.  不是从 counter / 2 开始 temp，而是从第一个奇数 <= int(sqrt(counter)) 开始
3.  将温度减 2。

我不确定它是否算作提高复杂性，但上面的 (2) 将从 O(n^2) 变为 O(n*sqrt(n))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-15T13:56:56.900

```
public static void Main()
    {
        Console.Write("Enter a Number : ");
        int num;
        int[] arr = new int[10000];
        num = Convert.ToInt32(Console.ReadLine());
        int k;
        k = 0;
        int t = 1;
        for (int j = 1; j < 10000; j++)
        {
            for (int i = 1; i <= j; i++)
            {
                if (j % i == 0)
                {
                    k++;
                }
            }
            if (k == 2)
            {
                arr[t] = j;
                t++;
                k = 0; 
            }
            else
            { 
                k = 0;
            } 
        }
        Console.WriteLine("Nth Prime number. {0}", arr[num]);
        Console.ReadLine();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-24T16:25:48.847

```
 System.out.println("Enter The number n: ");
    Scanner scanner = new Scanner(System.in);

    int n = scanner.nextInt();

    int x = 0;
    String prime = "";

    for (int i = 1; i <= n; i++) {

        int counter = 0;

        for (x = i; x >= 1; x--) {

            if (i % x == 0) {
                counter++;
            }
        }

        if (counter == 2){
            prime =  prime + i + " ";
        }

    }

    System.out.println(prime);
} 
```

}******

# php - 我创建了一个什么都不返回的函数？

> ID：14742511
> 
> 赞同：-1
> 
> 时间：2013-02-07T02:24:56.757
> 
> 标签：php

```
$newid = 100;
$cin = 0;
function new_id() {
    $cin++;
    if ($cin >= 3) {
        $cin = 0;
        $newid++;
    }
    return $newid;
}
echo new_id(); 
```

new_id() 没有返回任何内容。这是怎么回事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T02:26:26.867

您需要了解[变量范围](http://php.net/manual/en/language.variables.scope.php)。`$newid`并且`$cin`不可用，`new_id`除非您将它们作为参数传递（或使用邪恶的东西，如`global`）：

手册中的完美示例：

```
<?php
$a = 1; /* global scope */ 

function test()
{ 
    echo $a; /* reference to local scope variable */ 
} 

test();
?> 
```

> 此脚本不会产生任何输出，因为 echo 语句引用了 $a 变量的本地版本，并且尚未在此范围内为其分配值。

至于你的代码：

```
$newid = 100;
$cin = 0;
function new_id($newid, $cin) {
    $cin++;
    if ($cin >= 3) {
        $cin = 0;
        $newid++;
    }
    return $newid;
} 
```

# mongodb - Mongoengine：如何将新文档附加到嵌入式 ListField 文档？

> ID：14742513
> 
> 赞同：10
> 
> 时间：2013-02-07T02:25:00.690
> 
> 标签：mongodb, append, mongoengine, listfield

我想将新的 ListField EmbeddedDocument 附加到现有的 ListField EmbeddedDocument 文档。换句话说，将一个新文档附加到列表中，该文档属于列表中的一个文档。

我的模型：一个帖子可以包含多个评论，每个评论可以有几个赞：

```
class Post(Document):
    txt = StringField()
    comments = ListField(EmbeddedDocumentField(Comment))

class Comment(EmbeddedDocument):
    comment = StringField()
    comment_id = ObjectIdField()
    likes = ListField(EmbeddedDocumentField(Like))

class Like(EmbeddedDocument):
    user = ReferenceField(User)
    date = DateTimeField(default=datetime.utcnow,required=True) 
```

我的代码：（不存在“附加”命令不存在，仅存在“设置”）

```
def appendNewLike():
    user = {..}
    target = ObjectId(commentId)
    newLike = Like(user=user)
    Product.objects(comments__comment_id=target).update(append_comments__S__likes=newLike) 
```

理想的解决方案是这样的：

```
def appendNewLike():
    user = {..}
    target = ObjectId(commentId)
    newLike = Like(user=user)
    Product.objects(comments__comment_id=target).comments.likes.append(newLike) 
```

评论？建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T12:10:38.693

您想将`$push`新项目添加到列表中，例如：

```
Post.objects(comments__comment_id=target).update(
    push__comments__S__likes=newLike
) 
```

然而，这里有更大的问题。该模式并不理想 - 随着文档的增长，不断增长的数组可能会导致问题，它必须在磁盘上移动到一个新的范围（以便它可以适应），如果它不断增长，那么这将影响性能。

有关更多信息，请参阅[数据建模文档](http://docs.mongodb.org/manual/core/data-modeling/)。

# ios - Segue 不会在标签栏应用程序中触发

> ID：14742514
> 
> 赞同：3
> 
> 时间：2013-02-07T02:25:06.677
> 
> 标签：ios, objective-c, uitabbarcontroller, uistoryboardsegue

我正在使用情节提要和 XCode 4.3 创建一个将标签栏作为根视图的应用程序。即使我的应用程序有其他运行良好的 segue，其中一个也不会触发。它应该在选择选项卡的第三项时触发。我唯一能看到的是标签栏实际上加载了新视图，但没有传递任何信息。

Storyboard 上的连接如下：根视图控制器（选项卡栏）-> 导航控制器-> CapitolDetailViewController（它具有来自另一个视图控制器的推送序列）

我已经在连接、代码等方面尝试了很多更改。但它并没有触发这个 segue。我尝试更改 AppDelegate 中的代码以添加缺少的新控制器。我的 applicationDidFinishLaunching 的代码如下：

```
NSManagedObjectContext *context = [self managedObjectContext];

NSError *error;
if (![context save:&error]) {
    NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
}

    tabBarController = (UITabBarController *)self.window.rootViewController;

    UINavigationController *view1 = [[tabBarController viewControllers]    objectAtIndex:0];
    UINavigationController *view2 = [[tabBarController viewControllers] objectAtIndex:1];
    UINavigationController *view3 = [[tabBarController viewControllers] objectAtIndex:2];

    SCDMasterViewController *view11 = [[view1 viewControllers] objectAtIndex:0];
    view11.managedObjectContext = self.managedObjectContext;    

    SerieDetailViewController *view22 = [[view2 viewControllers] objectAtIndex:0];

    CapitolDetailViewController *view33 = [[view3 viewControllers] objectAtIndex:0];

    return YES; 
```

**其中“SerieDetailViewController”是在选择第三项时应该传递信息的那个，而“CapitolDetailViewController”是应该接收它的那个。**

我的转场代码：（它甚至没有进入转场，de NSLOG 永远不会出现）

```
 - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    NSLog(@"Entra segue");

    if ([segue.identifier isEqualToString:@"mostraCapitol"]) {

        NSString *nom = @"";

        nom= serieName;

        CapitolDetailViewController *destViewController = segue.destinationViewController;

        destViewController.serieName2 = nom; 

    }
} 
```

有谁知道出了什么问题？

**更新**：即使我收到了帮助我纠正一些编译错误的答案，问题仍然存在。如果我单击标签栏项目，它会加载一个空视图。它从不调用segue。看起来标签栏项目和视图控制器没有附加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T03:43:08.217

尝试检查不起作用的 segue 方法。确保情节提要中 segue 的标识符与班级中的标识符一致。从您的代码和所有注释的外观来看，您的代码似乎很好并且应该可以工作。唯一可能给您带来问题的地方是故事板中 segue 的不同标识符。我希望这能解决你的问题，我的朋友。

编辑：

好吧，我不知道这是否适合您，但我在标签栏应用程序中设置核心数据有不同的方法。在委托的 .h 文件中，几乎所有内容都是通用的，特别是在 .m 中，`applicationdidfinishwithoption`我使用索引号来对添加到选项卡栏的视图控制器中的视图进行排序。我希望这会有所帮助，这是我使用的代码。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
[self setupFetchedResultsController];

if (![[self.fetchedResultsController fetchedObjects] count] > 0 ) {
NSLog(@"!!!!! ~~> There's nothing in the database so defaults will be inserted");
[self importCoreDataDefaultRoles];
}
else {
NSLog(@"There's stuff in the database so skipping the import of default data");    
}

// The Tab Bar
UITabBarController *tabBarController = (UITabBarController *)self.window.rootViewController;

// The Two Navigation Controllers attached to the Tab Bar (At Tab Bar Indexes 0 and 1)
 UINavigationController *view1 = [[tabBarController viewControllers] objectAtIndex:0];
UINavigationController *view2 = [[tabBarController viewControllers] objectAtIndex:1];

View1 *view1 = [[view1nav viewControllers] objectAtIndex:0];
personsTVC.managedObjectContext = self.managedObjectContext;    

View2 *view2 = [[view2nav viewControllers] objectAtIndex:0];
rolesTVC.managedObjectContext = self.managedObjectContext;

return YES;
} 
```

通过使用索引号，我能够在没有任何错误的情况下实现相同的场景，并且对于启动视图，我使用了一个作为初始模式视图插入的子视图。希望这可以帮助你。就我而言，核心数据要添加到多个选项卡中，我不知道您是否有相同的需求。

编辑 1

这是我的`Appdelegate.h`

```
#import <UIKit/UIKit.h>
#import <CoreData/CoreData.h>

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@property (readonly, strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (readonly, strong, nonatomic) NSManagedObjectModel *managedObjectModel;
@property (readonly, strong, nonatomic) NSPersistentStoreCoordinator   *persistentStoreCoordinator;
@property (strong, nonatomic) NSFetchedResultsController *fetchedResultsController;

- (void)saveContext;
- (NSURL *)applicationDocumentsDirectory;

@end 
```

这是`app delegate.m`

```
#import "AppDelegate.h"

#import "PersonsTVC.h"
#import "RolesTVC.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize managedObjectContext = __managedObjectContext;
@synthesize managedObjectModel = __managedObjectModel;
@synthesize persistentStoreCoordinator = __persistentStoreCoordinator;
@synthesize fetchedResultsController = __fetchedResultsController;

- (void)insertRoleWithRoleName:(NSString *)roleName
{
Role *role = [NSEntityDescription insertNewObjectForEntityForName:@"Role"
                                              inManagedObjectContext:self.managedObjectContext];

role.name = roleName;

[self.managedObjectContext save:nil];
}

- (void)importCoreDataDefaultRoles {

NSLog(@"Importing Core Data Default Values for Roles...");
[self insertRoleWithRoleName:@"Player 1"];
[self insertRoleWithRoleName:@"Player 2"];
[self insertRoleWithRoleName:@"Player 3"];
[self insertRoleWithRoleName:@"Player 4"];
[self insertRoleWithRoleName:@"Player 5"];
[self insertRoleWithRoleName:@"Player 6"];
[self insertRoleWithRoleName:@"Player 7"];
[self insertRoleWithRoleName:@"Player 8"];
[self insertRoleWithRoleName:@"Player 9"];
[self insertRoleWithRoleName:@"Player 10"];
[self insertRoleWithRoleName:@"Player 11"];
[self insertRoleWithRoleName:@"Player 12"];
NSLog(@"Importing Core Data Default Values for Roles Completed!");
}
- (void)setupFetchedResultsController
{
// 1 - Decide what Entity you want
NSString *entityName = @"Role"; // Put your entity name here
NSLog(@"Setting up a Fetched Results Controller for the Entity named %@", entityName);

// 2 - Request that Entity
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:entityName];

// 3 - Filter it if you want
//request.predicate = [NSPredicate predicateWithFormat:@"Person.name = Blah"];

// 4 - Sort it if you want
request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor   sortDescriptorWithKey:@"name"
                                                                             ascending:YES
                                                                                selector:@selector(localizedCaseInsensitiveCompare:)]];
// 5 - Fetch it
self.fetchedResultsController = [[NSFetchedResultsController alloc]    initWithFetchRequest:request
                                                                  managedObjectContext:self.managedObjectContext
                                                                  sectionNameKeyPath:nil
                                                                           cacheName:nil];
[self.fetchedResultsController performFetch:nil];
}
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
[self setupFetchedResultsController];

if (![[self.fetchedResultsController fetchedObjects] count] > 0 ) {
NSLog(@"!!!!! ~~> There's nothing in the database so defaults will be inserted");
[self importCoreDataDefaultRoles];
}
else {
NSLog(@"There's stuff in the database so skipping the import of default data");    
}

// The Tab Bar
UITabBarController *tabBarController = (UITabBarController *)self.window.rootViewController;

// The Two Navigation Controllers attached to the Tab Bar (At Tab Bar Indexes 0 and 1)
UINavigationController *personsTVCnav = [[tabBarController viewControllers]  objectAtIndex:0];
UINavigationController *rolesTVCnav = [[tabBarController viewControllers] objectAtIndex:1];

// The Persons Table View Controller (First Nav Controller Index 0)
PersonsTVC *personsTVC = [[personsTVCnav viewControllers] objectAtIndex:0];
personsTVC.managedObjectContext = self.managedObjectContext;    

// The Roles Table View Controller (Second Nav Controller Index 0)
RolesTVC *rolesTVC = [[rolesTVCnav viewControllers] objectAtIndex:0];
rolesTVC.managedObjectContext = self.managedObjectContext;

//NOTE: Be very careful to change these indexes if you change the tab order

// Override point for customization after application launch.
// UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;
// RolesTVC *controller = (RolesTVC *)navigationController.topViewController;
// controller.managedObjectContext = self.managedObjectContext;
return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
}

- (void)applicationWillTerminate:(UIApplication *)application
{
[self saveContext];
}

- (void)saveContext
{
NSError *error = nil;
NSManagedObjectContext *managedObjectContext = self.managedObjectContext;
if (managedObjectContext != nil)
{
if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error])
{
    /*
     Replace this implementation with code to handle the error appropriately.

     abort() causes the application to generate a crash log and terminate. You should not  use this function in a shipping application, although it may be useful during development. 
     */
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
} 
}
}

#pragma mark - Core Data stack

- (NSManagedObjectContext *)managedObjectContext
{
if (__managedObjectContext != nil)
{
return __managedObjectContext;
}

NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
if (coordinator != nil)
{
__managedObjectContext = [[NSManagedObjectContext alloc] init];
[__managedObjectContext setPersistentStoreCoordinator:coordinator];
}
return __managedObjectContext;
}
- (NSManagedObjectModel *)managedObjectModel
{
if (__managedObjectModel != nil)
{
return __managedObjectModel;
}
NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"Model" withExtension:@"momd"];
__managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
return __managedObjectModel;
}

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
if (__persistentStoreCoordinator != nil)
{
return __persistentStoreCoordinator;
}

NSURL *storeURL = [[self applicationDocumentsDirectory]    URLByAppendingPathComponent:@"StaffManager.sqlite"];

NSError *error = nil;
__persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc]    initWithManagedObjectModel:[self managedObjectModel]];

NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                     [NSNumber numberWithBool:YES],    NSMigratePersistentStoresAutomaticallyOption,
                     [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];
if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType   configuration:nil URL:storeURL options:options error:&error])
{
NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
abort();
}    

return __persistentStoreCoordinator;
}

#pragma mark - Application's Documents directory

- (NSURL *)applicationDocumentsDirectory
{
return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
}

@end 
```

现在请记住，我将这两个类都用于数据实体，并在这两个类中声明了托管对象。可以肯定的是，在使用核心数据时，您的初始视图必须具有托管对象。如果这对您没有帮助，那么我建议您可以查看 tim roadley 的核心数据教程或 paul hagurty 的 stanford core data class。如果您需要查看整个项目，请告诉我，并且尝试将一些东西放在一起并放置一个链接以便您可以下载它，但我相信如果您已经创建了一个合适的模型并在应用程序委托中使用了正确的方法，类似于我所做的，它应该工作。希望这对你有帮助，我的朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T02:51:54.693

检查此示例 iPhone 代码可能对您有帮助

[http://developer.apple.com/library/ios/#samplecode/iPhoneCoreDataRecipes/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/iPhoneCoreDataRecipes/Introduction/Intro.html)

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
//  Get a reference to our detail view
PicturelistDetail *pld = (PicturelistDetail *)[segue destinationViewController];

//  Pass the managed object context to the destination view controller
pld.managedObjectContext = managedObjectContext;

//  If we are editing  we need to pass some stuff, so check the segue title first
if ([[segue identifier] isEqualToString:@"EditPicture"])
{
    //  Get the row we selected to view
    NSInteger selectedIndex = [[self.tableView indexPathForSelectedRow] row];

    //  Pass the object from the table that we want to view
    pld.currentPicture = [pictureListData objectAtIndex:selectedIndex];
}
} 
```

请将其更改为您的代码并尝试一下。

在视图控制器中声明属性

```
@property (strong, nonatomic) NSManagedObjectContext *managedObjectContext; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T02:54:04.203

在我看来，您需要在“SCDMasterViewController”中设置一个名为 managedObjectContext 的属性（我会推荐一个不同的名称）。

错误是说该属性尚未声明。

我希望这有帮助。

# sql - 带有身份问题的 SQL 导入

> ID：14742534
> 
> 赞同：0
> 
> 时间：2013-02-07T02:27:15.053
> 
> 标签：sql, sql-server, database, compare

我有一个使用 SQL 导出工具创建的数据库，但现在看到我没有写出主键和约束。不幸的是，这是我唯一的数据副本。

我已经创建了一个带有适当键的空白数据库结构，现在正尝试使用 SQL 2012 中的导入数据向导将数据导入新数据库。在映射设置中，我选择了启用身份插入。但是，我不断地在错误中遇到错误。

然后我尝试在 Visual Studio 2012 中使用 SQL 比较工具，以为我可以生成 ALTER 表脚本来创建主键和保存数据的数据库的约束，但我似乎只能让它生成 CREATE TABLE 脚本。显然，这样做会删除表格，从而删除我的数据。

最终，我只想要一个包含键、约束和数据的数据库。我已经用尽了我的知识，现在不太确定如何进行。

我希望你们中的一些大师有一些技巧可以帮助我。提前真诚感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:32:39.267

“启用插入身份”对我有用。

也许下次您导入带有标识字段的表时，您可以尝试导入标识字段，该怎么做？：

对于您在向导的“选择源表和视图”步骤中导入的每个表

选择表>编辑映射>编辑sql>

代码将是这样的：

```
CREATE TABLE [dbo].[miTable] (
[idField] [int] NOT NULL,
[anotherColumns] varchar ...
) 
```

像这样修改它：

```
CREATE TABLE [dbo].[miTable] (
[idField] [int] IDENTITY(1,1) NOT NULL,
[anotherColumns] varchar ...
) 
```

不要忘记启用插入标识。

# d3.js - 间隔运行 d3.timer

> ID：14742538
> 
> 赞同：2
> 
> 时间：2013-02-07T02:28:07.987
> 
> 标签：d3.js

这是 d3 示例中常见的计时函数：

```
d3.timer(function() {
    var angle = (Date.now() - start) * speed,
    transform = function(d) {
        return "rotate(" + angle / d.radius + ")";};
    lightsweep.select(".lightsweep").attr("transform", transform);
}); 
```

“光扫”是我特有的。d.radius 从绑定到“lightsweep”对象的数据对象中提取，用于旋转 svg 组。这段代码对我有用，但我想间歇性地运行它；比如说，运行它 1 秒钟，然后等待 10 秒钟，然后再次运行它。我怎样才能做到这一点？

**注意：**我不想使用 setInterval 或 setTimeout。d3 计时器有一些惊人的属性，并且比那些功能更好。但是 d3.timer 需要 a`return true`来取消它。我想这可能是一个回调函数，但我想不出来。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T03:28:44.470

是的 d3.timer - 它在支持它的浏览器内部使用 requestAnimationFrame - 具有很好的属性，例如当窗口/选项卡不在前台时暂停。但是在他的[教程代码](http://bl.ocks.org/mbostock/3808234)中，Mike Bostock（d3 作者）使用 setInterval 来涵盖这个用例，所以很遗憾，这可能是您的最佳选择。

# android - 从 SEND Intent 启动时，Android 应用程序在“最近的应用程序”列表中的行为不同

> ID：14742539
> 
> 赞同：1
> 
> 时间：2013-02-07T02:28:17.157
> 
> 标签：android, android-intent

我有一个对一些文本数据进行操作的简单 Android 应用程序。应用程序有两种调用方式：1) 从启动器启动应用程序并手动输入文本数据，或 2) 使用 SEND 意图与其共享一些文本。

通过启动器启动时，一切都按我的预期运行。当通过共享功能启动并随后使用应用程序切换器/最近的应用程序按钮时，该应用程序显示为“Android 系统”，如果我离开它，它就会消失。我希望它像任何其他应用程序一样出现在该列表中，并在切换时保持不变。所以问题是：为什么我的应用程序从不同的意图启动时表现不同？我确信关于意图、活动和任务有一些基本的东西我不了解，但我什至无法确定在哪里看。

这是清单的相关部分。

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.stub2.Main"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
          <action android:name="android.intent.action.SEND" />
          <category android:name="android.intent.category.DEFAULT" />
          <data android:mimeType="text/plain" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:17:08.387

例如，用户调用您的活动`Main`以及`ACTION_SEND`一些文本`abc`。`Main`还有一次，他用短信打电话`zzz`。然后，您将`Main`在最近的列表中有 2 个实例，具有不同的意图。

* * *

*编辑*

您可以注册`ACTION_SEND`“适配器”活动，例如`AdapterActivity`，然后将文本转发到`Main`。通过这种方式，`Main`如果用户从启动器启动它，您的应用程序（活动）将仅在最近的应用程序中列出。

```
<activity
    android:name="AdapterActivity"
    android:excludeFromRecents="true" /> 
```

[这里](http://developer.android.com/guide/topics/manifest/activity-element.html)有更多的活动标签。

# iphone - 在启动时禁用 UI 按钮

> ID：14742542
> 
> 赞同：0
> 
> 时间：2013-02-07T02:29:06.273
> 
> 标签：iphone, objective-c, xcode, uibutton, viewdidload

我试图在启动时禁用 UIButton。我希望在启动时禁用该按钮，并能够使用应用程序中的其他按钮启用它。

我可以在属性检查器的 .xib 中禁用它，但是下面的代码不会重新启用它。

```
bankButton.enabled = Yes;
bankButton.alpha = 1.0f; 
```

或者我可以尝试在 viewDidLoad 方法中禁用它：

```
bankButton.enabled = No;
bankButton.alpha = .00f; 
```

但这不起作用，因为我相信 .xib 上的启用复选框会覆盖它？我正在猜测。

我该怎么做才能在启动时禁用它，并在按下按钮时启用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T02:35:19.267

试试这个代码

```
editButton.userInteractionEnabled = NO; 
```

或者

```
button.hidden = YES; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T04:08:04.747

我没有将我的@property 行链接到对象！确保这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T04:05:53.123

尝试在 viewWillAppear 方法中禁用。它将在启动期间禁用按钮，您可以使用其他按钮操作重新启用。

```
-(void)viewWillAppear:(BOOL)animated{
    bankButton.enabled = FALSE; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T02:33:04.987

您是否将 IBOutlet 链接到 IB 中的按钮？此外，将“是”更改为“是”。和不。

IB 中的启用复选框不会覆盖您在代码中所做的事情。这是相反的方式。

# c# - 在 DataGridViewCell 中全选

> ID：14742547
> 
> 赞同：0
> 
> 时间：2013-02-07T02:29:31.740
> 
> 标签：c#, .net, c#-4.0, datagridview

给定`DataGridViewCell Cell = DataGridView.CurrentCell;`，我怎样才能选择所有文本`Cell`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T03:26:09.847

有一个[BeginEdit](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.beginedit.aspx "开始编辑")方法来编辑 CurrentCell 并选择它的文本：

```
// Update CurrentCell to the provided Cell
// Can be skipped if Cell is actually the CurrentCell
Cell.DataGridView.CurrentCell = Cell;

// Change the grid's CurrentCell to edit mode and select text
Cell.DataGridView.BeginEdit(true); 
```

# javascript - JQuery：将 JSON 结果存储在 JavaScript 数组中？

> ID：14742548
> 
> 赞同：1
> 
> 时间：2013-02-07T02:29:32.520
> 
> 标签：javascript, jquery, ajax, arrays, json

我有一个 PHP 脚本，它创建一个名为“城市”的 JSON 数组。

我可以使用以下 JQuery 从中检索数据：

```
$.ajax({
  dataType: "json",
  url: "mysql.php",
  success: function(data){

    console.log(data[0]);//Returns first item in cities array

}; 
```

但我不确定如何遍历检索到的数据并将其输入到 JavaScript 数组中。

我真的没有初始化计数，例如：

```
var counter = cities.length; 
```

它似乎无法识别“城市”；是检索到的 JSON 数组的名称。

我在我的 ajax 脚本中遗漏了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T02:37:09.093

如果返回的是 JSON 数组，则可以使用该`JSON.parse`方法将其转换为 JS 数组。

```
$.ajax({
  dataType: "json",
  url: "mysql.php",
  success: function(data){
    var cities = JSON.parse(data);
    console.log(cities.length);
}; 
```

如果它只是一个字符串数组，你甚至不需要做 a `JSON.parse`，因为 JSON 只不过是 JavaScript 对象表示法的字符串化表示。但是对于*任何*有效的 JS 对象`JSON.parse`，将有助于将 JSON 转换为其相应的 JavaScript 对象表示法。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T02:37:53.333

在成功回调中您是否尝试过；

```
success: function ( data ) {
    for ( var index = 0; index < data.length; index++ ) {
        console.log( data[ index ] );
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T02:38:56.123

```
$.ajax({
dataType: "json",
url: "mysql.php",
success: function(data){

$.each(data.info , function() { //refer to the Json object to address the actual names

    var cityname = this.cityname;

                       });

}; 
```*

# python - python有glob只返回5个最近的文件匹配

> ID：14742551
> 
> 赞同：2
> 
> 时间：2013-02-07T02:30:00.687
> 
> 标签：python, linux, glob

我是蟒蛇新手所以请温柔..

我正在使用 glob 收集与特定模式匹配的文件列表

```
for name in glob.glob('/home/myfiles/*_customer_records_2323_*.zip')
print '\t', name 
```

然后输出类似于

```
/home/myfiles/20130110_customer_records_2323_something.zip
/home/myfiles/20130102_customer_records_2323_something.zip
/home/myfiles/20130101_customer_records_2323_something.zip
/home/myfiles/20130103_customer_records_2323_something.zip
/home/myfiles/20130104_customer_records_2323_something.zip
/home/myfiles/20130105_customer_records_2323_something.zip
/home/myfiles/20130107_customer_records_2323_something.zip
/home/myfiles/20130106_customer_records_2323_something.zip 
```

但我希望输出仅为最新的 5 个文件（通过时间戳或操作系统报告的创建时间）

```
/home/myfiles/20130106_customer_records_2323_something.zip
/home/myfiles/20130107_customer_records_2323_something.zip
/home/myfiles/20130108_customer_records_2323_something.zip
/home/myfiles/20130109_customer_records_2323_something.zip
/home/myfiles/20130110_customer_records_2323_something.zip 
```

关于如何实现这一点的想法？（是否对列表进行了排序，然后只包含最新的 5 个文件？）

UPDATE 修改以显示默认情况下不排序 glob 的输出

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T02:33:13.730

使用列表切片：

```
for name in glob.glob('/home/myfiles/*_customer_records_2323_*.zip')[-5:]:
    print '\t', name 
```

编辑：如果`glob`不自动对输出进行排序，请尝试以下操作：

```
for name in sorted(glob.glob('/home/myfiles/*_customer_records_2323_*.zip'))[-5:]:
    print '\t', name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T02:33:08.443

切片输出：

```
glob.glob('/home/myfiles/*_customer_records_2323_*.zip')[-5:] 
```

我不确定是否`glob`保证对 ' 的输出进行排序。

# node.js - 如何为本地安装 npm 包设置自定义位置？

> ID：14742553
> 
> 赞同：205
> 
> 时间：2013-02-07T02:30:02.957
> 
> 标签：node.js, npm

是否`npm install`可以通过命令标志或环境变量为 指定自定义包目的地？

默认情况下，npm 本地安装最终在`node_modules`当前目录中，但我希望它安装`node_modules`在不同的目录中，例如`vendor/node_modules`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2013-02-14T02:53:00.307

### TL;博士

您可以通过使用`--prefix`标志和`--global`* 标志来做到这一点。

```
pje@friendbear:~/foo $ npm install bower -g --prefix ./vendor/node_modules
bower@0.7.0 /Users/pje/foo/vendor/node_modules/bower 
```

*即使这是一个“全局”安装，安装的 bin 也无法通过命令行访问，除非`~/foo/vendor/node_modules`存在于`PATH`.

### TL;博士

的每个可配置属性`npm`都可以在六个不同位置中的任何一个中设置。按优先顺序：

*   命令行标志： `--prefix ./vendor/node_modules`
*   环境变量：`NPM_CONFIG_PREFIX=./vendor/node_modules`
*   用户配置文件： `$HOME/.npmrc`或`userconfig`参数
*   全局配置文件： `$PREFIX/etc/npmrc`或`userconfig`参数
*   内置配置文件： `path/to/npm/itself/npmrc`
*   默认配置： [node_modules/npmconf/config-defs.js](https://github.com/isaacs/npm/blob/master/node_modules/npmconf/config-defs.js)

默认情况下，本地安装的包进入`./node_modules`. 全局变量进入`prefix`配置变量（`/usr/local`默认情况下）。

您可以运行`npm config list`以查看当前配置并`npm config edit`进行更改。

### 附言

一般来说，`npm`的文档真的很有帮助。[文件夹](https://docs.npmjs.com/files/folders)部分是 npm 的一个很好的结构概述，配置[部分](https://docs.npmjs.com/misc/config)回答了这个问题。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2015-01-29T02:04:00.970

如果你想在配置中这样做，你可以像这样设置 npm config：

```
npm config set prefix "$(pwd)/vendor/node_modules" 
```

或者

```
npm config set prefix "$HOME/vendor/node_modules" 
```

检查您的配置

`npm config ls -l`

或者正如@pje 所说并使用`--prefix`标志

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-04-25T08:05:48.700

对于 OSX，您可以转到您的用户`$HOME`（可能是 /Users/yourname/），如果它不存在，则创建一个`.npmrc`文件（npm 用于用户配置的文件），并为您的 npm 包创建一个目录以安装在（例如，/Users/yourname/npm）。在该 .npmrc 文件中，将“前缀”设置为新的 npm 目录，该目录将安装“全局”安装的 npm 包；显然，这些“全球”软件包仅对您的用户帐户可用。

在 .npmrc 中：

`prefix=${HOME}/npm`

然后从命令行运行此命令：

`npm config ls -l`

它应该在您自己的本地配置和全局 npm 配置中提供输出，并且您应该看到反映了您的本地前缀配置，可能在长输出列表的顶部附近。

为了安全起见，我推荐这种方法来配置您的用户帐户的 npm 行为而不是 chown-ing 您的`/usr/local`文件夹，我在其他地方看到过推荐这种方法。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-02-07T13:50:20.700

例如，在 Windows 7 上，可以使用以下命令/操作集。

创建个人环境变量，双反斜杠是强制性的：

*   变量的名称：`%NPM_HOME%`
*   变量值：`C:\\SomeFolder\\SubFolder\\`

现在，将配置值设置为新文件夹（示例文件名）：

*   设置 npm 文件夹

`npm config set prefix "%NPM_HOME%\\npm"`

*   设置 npm-cache 文件夹

`npm config set cache "%NPM_HOME%\\npm-cache"`

*   设置 npm 临时文件夹

`npm config set tmp "%NPM_HOME%\\temp"`

或者，您可以在更改配置**之前**清除原始文件夹的内容。

*   删除 npm 缓存 `npm cache clear`

*   列出 npm 模块 `npm -g ls`

*   删除 npm 模块 `npm -g rm name_of_package1 name_of_package2`

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-11-14T10:31:13.403

在搜索了这个我想要几个具有共享依赖项的项目成为 DRYer 之后，我发现：

*   本地安装是您想要使用的任何东西的 Node 方式`require()`
*   全局安装适用于您想要在路径中使用的二进制文件，但不适用于任何通过`require()`
*   使用前缀意味着您需要添加适当的`bin`和`man`路径`$PATH`
*   `npm link`( [info](https://npmjs.org/doc/cli/npm-link.html) ) 允许您使用本地安装作为全局变量的来源

→ 坚持Node方式，本地安装

*参考：*

*   [来自isaacs的完美总结](https://github.com/isaacs/npm/issues/775#issuecomment-1389398)
*   npm 常见问题解答：[“node_modules”是我神的主要竞争对手的名字，也是我宗教中的一个禁忌词。我可以将 npm 配置为使用不同的文件夹吗？](https://npmjs.org/doc/faq.html#node_modules-is-the-name-of-my-deity-s-arch-rival-and-a-Forbidden-Word-in-my-religion-Can-I-configure-npm-to-use-a-different-folder);-)

# javascript - 声明一个新函数与立即调用它？

> ID：14742558
> 
> 赞同：2
> 
> 时间：2013-02-07T02:30:44.127
> 
> 标签：javascript, jquery

我尝试用谷歌搜索答案，但问题是我真的不知道如何解决这个问题，我只是找到了错误的主题。

有什么区别：

```
this.on('click',thisismyfunction ); 
```

和：

```
this.on('click', function(){

thisismyfunction();

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T02:33:31.220

一个显着的区别：第一个函数将直接传递一个事件对象，可以通过您命名的第一个参数`thisismyfunction`或 at 访问`arguments[0]`。在第二个版本中，该对象将被传递给外部匿名函数。

此外，在这两个示例中，都*没有*立即调用任何内容。您将两个函数（第一种情况下的命名函数，或第二种情况下的匿名函数）绑定为事件处理程序，因此它们将在相关事件发生后被调用。

您使用哪一种主要取决于代码结构和风格。正如 bennett_an 所说，当您将同一个函数绑定到多个事件时，最好使用第一个变体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T02:34:35.893

一种是命名函数。关键是您可能会从多个地方多次调用该函数。另一个是匿名函数。这基本上就像说“执行以下操作：”

> 函数：JavaScript 中的函数可以是命名的，也可以是匿名的。可以使用 function 关键字定义命名函数，如下所示：
> 
> ```
> function named(){
>    // do some stuff here
> } 
> ```
> 
> 匿名函数可以以与普通函数类似的方式定义，但它没有任何名称。
> 
> 可以将匿名函数分配给变量或传递给方法，如下所示。
> 
> ```
> var handler = function (){
>    // do some stuff here 
> } 
> ```
> 
> JQuery 非常频繁地使用匿名函数，如下所示：
> 
> ```
> $(document).ready(function(){
>    // do some stuff here 
> }); 
> ```

取自[TutorialsPoint jQuery Basics](http://www.tutorialspoint.com/jquery/jquery-basics.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T02:32:17.967

真的没什么。

第一个示例将`thisismyfunction`直接绑定到。第二个示例将绑定到一个匿名函数，然后在调用`thisismyfunction()`时调用该函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T02:35:34.533

thisismyfunction 不会收到任何参数。您将其嵌入匿名函数的方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T02:39:56.763

在您的示例中，结果可能没有区别。但是这两种方法的行为确实略有不同：

第一个例子：

*   `this`在你的函数里面是指点击的元素
*   事件对象将通过其参数传递给元素

第二个例子

*   `this`你的函数里面是指匿名函数
*   您可以轻松传递自己的参数，或者在这种情况下根本不传递
*   您可以将多个函数调用附加到同一个事件

所以你使用哪种风格取决于你自己的喜好和你想要达到的效果

# video - 对于简单的视频格式，我有哪些选择？

> ID：14742560
> 
> 赞同：9
> 
> 时间：2013-02-07T02:30:55.927
> 
> 标签：video, erlang, raytracing

我正在玩一个简单的光线追踪器，我想以一个简短的动画剪辑结束。现在我正在将场景渲染为位图。我想要最简单的电影格式，因为我可能不得不从头开始实现它（在 erlang 中）。动画 GIF 浮现在脑海中。还有什么其他东西可以提供同样的收益吗？我对保真度或高压缩不感兴趣。

PS：我想避免将帧渲染成单独的文件，并使用 ImageMagick 等外部工具将它们组合成 GIF 或 AVI。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T00:23:32.830

[将YUV4MPEG2](http://wiki.multimedia.cx/index.php?title=YUV4MPEG2)写入文件或标准输出，然后使用 ffmpeg 将其编码为合理的内容。YUV4MPEG 是一种未压缩的格式，而且非常简单，尤其是在使用非隔行 4:4:4 时。

或者，使用[Motion JPEG](http://en.wikipedia.org/wiki/Motion_JPEG)，它基本上是一个容器中的一堆 JPEG 帧。许多（尽管不是几乎所有）视频播放器都可以直接播放 MJPEG。我确定您已经可以使用 JPEG 编码器，因此将一堆 JPEG 帧转换为 MJPEG 流相对简单。

# java - GrizzlyServerFactory.createHttpServer 和新的 GrizzlyWebServer WebServer 之间的区别

> ID：14742563
> 
> 赞同：5
> 
> 时间：2013-02-07T02:31:09.837
> 
> 标签：java, rest, jersey, grizzly

我正在使用 Jersey 和嵌入式 Grizzly Web 服务器创建 RESTful Web 服务。

我看到有两种方法可以创建嵌入式 Grizzly Web 服务器。谁能告诉我两者的区别？

```
public static void main(String[] args) throws IOException,  ConfigurationException,    DBException, DaxException {
    GrizzlyWebServer gws = new GrizzlyWebServer(8085, "/var/www");
    ServletAdapter jerseyAdapter = new ServletAdapter();

    jerseyAdapter.addInitParameter(
        PackagesResourceConfig.PROPERTY_PACKAGES,"com.merchant.services");
    jerseyAdapter.setServletInstance(new ServletContainer());

    gws.addGrizzlyAdapter(jerseyAdapter, new String[]{"/"});

    // let Grizzly run
    gws.start();
} 
```

第二种方法是：

```
ResourceConfig rc = new PackagesResourceConfig("com.merchant.services");
HttpServer httpServer = GrizzlyServerFactory.createHttpServer(BASE_URI, rc);
httpServer.start(); 
```

第一种方式很容易配置 Web 服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T04:14:37.693

# 1

`Grizzly Web Serve`with`ServletAdapter`方法是支持 JAX-RS 以及`Servlet`.which`Filters`给你，

**球衣 + ServletContainer**

这将为您提供足够的灵活性来提供更复杂的配置

# 2

如果您认为`ServletContainer`是附加依赖项，请使用第二个依赖项。也就是说，

**球衣 + 简单的 Http 服务器**

# laravel - Laravel 3 雄辩的多对多关系

> ID：14742564
> 
> 赞同：2
> 
> 时间：2013-02-07T02:31:11.337
> 
> 标签：laravel, eloquent, laravel-3

我有一个 Post 模型和一个 Tag 模型进入多对多关系。

当我得到帖子和帖子的所有标签时，我使用它并且它工作得很好：

```
$posts = Post::with(array('tags'))
            ->where('cat_id', '=', $cat->id)
            ->where_published(1)
            ->order_by('created_at', 'desc')
            ->paginate('10'); 
```

上面的代码显示了最新创建的帖子并将它们分页。

我想实现同样的目标，但以另一种方式，从标签开始，获取按 created_at 列分页和排序的帖子列表。

```
Tag::with(array('posts'))
                ->where('tagname', '=', $tag)
                ->first(); 
```

这可行，但会显示所有帖子，我希望它们在 where_published(1) 上进行分页、排序和过滤。

这可以通过使用预先加载的 eloquent 来完成吗（没有预先加载我已经知道这样做但是会有太多的查询）？

我在哪里可以放置过滤器以及如何让它们分页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:17:59.387

你可以这样做：

```
标签::with(array('posts' => function ($query) {
    $query->where('已发布', '=', 1);
})->where('tagname', '=', $tag)
->第一（）；

```

然而，不幸的是，这几乎是你所能做的。目前还不支持订购和大多数其他东西 - 我解决这个问题的方法是在模型中创建一个函数，如下所示：

```
公共函数posts_ordered()
{
    return $this->has_many_and_belongs_to('Post')->order_by('your_field', 'asc');
}

```

因此，您将在模型中有一个正常的 posts() 函数，但也可以使用 posts_ordered ：

`Tag::with('posts_ordered')->where('tagname', '=', $tag)->first();`

不幸的是，您不能将变量（据我尝试过）传递给这些函数，因此需要创建单独的变量。

# c++ - 如何访问 C++ 链表中的对象数据？

> ID：14742568
> 
> 赞同：0
> 
> 时间：2013-02-07T02:32:10.897
> 
> 标签：c++, linked-list, iteration

我将 MovingSphere 对象存储在链接列表中。MovingSphere 继承了 Sphere。球体是通过从由空格分隔的整数文本文件中读取来初始化的。

当我访问球体的半径时，它会返回正确的数字，但是当我尝试获取 X、Y、Z 坐标时，它会返回 NAN。我尝试通过 NetBeans 调试器运行它，但无法收集到很多有用的信息。我知道正在存储正确的值，我只是不知道为什么我不能正确访问这些坐标。

我仍在为从 Java 到 C++ 的转换而苦苦挣扎，所以请原谅我这是一个明显的问题。

# 主要的

```
#include <iostream>
#include <fstream>
#include <list>
#include "MovingSphere.h"

using namespace std;

typedef list<MovingSphere>::iterator iter;
static double INCREMENT = .01; // time increment
static int CUBE_SIZE = 1000; // distance across any given cube wall
int main() {

    ifstream inFile("sphere.txt");
    double X, Y, Z;
    int R, DX, DY, DZ;
    list<MovingSphere> sphereList;
    MovingSphere msInstance;

    iter it = sphereList.begin();

    // populate SphereList
    if (inFile) {  // If file is not empty.
        while (inFile >> X >> Y >> Z >> R >> DX >> DY >> DZ) {
            // create sphere
            msInstance = MovingSphere(X, Y, Z, R, DX, DY, DZ);
                        cout << endl <<
            "X = " << msInstance.getCenterX() << endl <<
            "Y = " << msInstance.getCenterY() << endl <<
            "Z = " << msInstance.getCenterZ() << endl <<
            "R = " << msInstance.getRadius() << endl <<
            "DX = " << msInstance.getDX() << endl <<
            "DY = " << msInstance.getDY() << endl <<
            "DZ = " << msInstance.getDZ() << endl;                    

            sphereList.insert(it, msInstance);
            ++it;

        } // end while
    } // end if

    return 0;
} 
```

# 移动球体.h

```
#ifndef MOVINGSPHERE_H
#define MOVINGSPHERE_H

#include "Sphere.h"

class MovingSphere : public Sphere {
public:
    MovingSphere();                     // default constructor
    MovingSphere(double X, double Y, double Z, int R);     // Sphere with zero velocity
    MovingSphere(double X, double Y, double Z, int R,
            int DX, int DY, int DZ);              // moving sphere constructor

    void MovingSphere::updateCenter(double multiplier);      // declaration

private:
    // delta X, etc. define rate of change ie. (+/-) units/second
    int dx, dy, dz;                         // sphere vector

};

#endif  /* MOVINGSPHERE_H */ 
```

# 移动球体.cpp

```
#include "MovingSphere.h"

MovingSphere::MovingSphere() : Sphere(), dx(0), dy(0), dz(0) {
} // default constructor (point at 0,0,0, with zero velocity)

MovingSphere::MovingSphere(double X, double Y, double Z, int R) :
        Sphere(X, Y, Z, R), dx(0), dy(0), dz(0){
} // sphere with zero velocity

MovingSphere::MovingSphere(double X, double Y, double Z, int R, int DX, int DY, int DZ) :
        Sphere(X, Y, Z, R), dx(DX), dy(DY), dz(DZ){
} // moving sphere constructor

// update location of sphere (mutator)
void MovingSphere::updateCenter(double multiplier) {
    adjustCenter(dx * multiplier, dy * multiplier, dz * multiplier);
} 
```

# 球体.h

```
#ifndef SPHERE_H
#define SPHERE_H

#include "Point.h"

class Sphere {

public:
    Sphere();          // default constructor (a point at 0,0,0)
    Sphere (double X, double Y, double Z, int R); // sphere constructor

    void setRadius(int newRadius); // declaration
    void adjustCenter(double DX, double DY, double DZ); // declaration

    int getRadius() const;         // declaration
    double getCenterX() const;        // declaration
    etc...

private:
    Point center;      // center of sphere
    int radius;        // radius of sphere

};

#endif  /* SPHERE_H */ 
```

# 球体.cpp

```
#define _USE_MATH_DEFINES
#include <math.h>
#include "Sphere.h"

Sphere::Sphere() : 
        center(), radius(0) {// default constructor (a point at 0,0,0)
}

Sphere::Sphere(double X, double Y, double Z, int R) : center(X,Y,Z), radius(R) {
} // end sphere constructor

// set the sphere's radius (mutator)
void Sphere::setRadius(int newRadius) {
    radius = newRadius;
}

// set the sphere's center (mutator)
void Sphere::adjustCenter(double DX, double DY, double DZ) {
    center.setX(center.getX() + DX);
    center.setY(center.getX() + DY);
    center.setZ(center.getZ() + DZ);
}

// get the sphere's center X coordinate (constant function)
double Sphere::getCenterX() const {
    center.getX();
}
etc...

// get the sphere's radius (constant function)
int Sphere::getRadius() const {
    return radius;
} 
```

# 点.h

```
#ifndef POINT_H
#define POINT_H

class Point {

public:
    Point ();                         // default constructor (0,0,0);
    Point(double X, double Y);              // constructor for 2d point
    Point(double X, double Y, double Z);       // constructor for 3d point

    void setX(double newX);                     // declaration

    double getX() const;                 // declaration
    etc...

private:

    double x, y, z;  // coordinates of point

};

#endif  /* POINT_H */ 
```

# 点.cpp

```
#include "Point.h"

Point::Point() : x(0), y(0), z(0) {   // default constructor (point at 0,0,0)
}

// constructor for 2d point
Point::Point(double X, double Y) : x(X), y(Y), z(0) {      
} 

// constructor for 3d point
Point::Point(double X, double Y, double Z) : x(X), y(Y), z(Z) { 
}  

// set the points X coordinate (mutator)
void Point::setX(double newX) {
    x = newX;

// get the points X coordinate (constant function)
double Point::getX() const {
    return x;
}    
etc... 
```

# 输出

```
X = nan
Y = nan
Z = nan
R = 3
DX = -10
DY = 5
DZ = 0
etc... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:06:19.850

将返回添加到 getCenter：

```
double Sphere::getCenterX() const {
    return center.getX();
} 
```

# c# - 是否可以“刷新”父控件以“更新/刷新”子控件边距？

> ID：14742573
> 
> 赞同：0
> 
> 时间：2013-02-07T02:32:21.980
> 
> 标签：c#, winforms

我将两个`GroupBox`控件彼此相邻放置（左和右），`Margin`在设计器中按它们的值分隔。然后，当程序运行时，我调整 left`GroupBox`的大小`Width`并将其重叠到 second`GroupBox`中。

是否可以在父控件上调用某种刷新来重新绘制正确的所有子控件`Margins`？我尝试`Invalidate`了父母，但没有奏效。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:51:02.187

尝试使左GroupBox的Dock=Left和右GroupBox的Dock=Fill，孩子们也使用Dock属性，也许你可以让它与framework4一起使用，id没有尝试其他版本

您也可以将两个 GroupBox 添加到一个面板中，用于您的空间布局

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T03:19:31.613

除非您特别选择了 flowlayoutpanel 或类似的东西，否则您的按钮将固定在其位置，除非移动。再多的重新布局也无法解决这个问题。

我建议您返回设计器，添加一个 flowlayoutpanel 并将您的按钮移动到该面板上。

# asp.net-mvc - 如何让用户将格式化的文本、图像和附件插入到 MVC 编辑字段中？

> ID：14742577
> 
> 赞同：2
> 
> 时间：2013-02-07T02:32:53.787
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我对 MVC 很陌生，想知道是否有人可以在这里为我指明正确的方向。我有基本的 CRUD 功能，但希望允许用户格式化他们的文本，在字段正文中插入图像，并在字段正文中添加附件。从哪里开始呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T08:57:49.093

首先尝试制作一个可以将文本保存在数据库中的简单文本区域，然后您可以更改该文本区域并使用一些插件，如**ckeditor**（参考：[http](http://drupal.org/project/ckeditor) : //drupal.org/project/ckeditor，http [:// drupal.org/project/ckeditor](http://drupal.org/project/ckeditor)），您可能还想使用我现在也在使用的**nicEdit （** [http://nicedit.com/](http://nicedit.com/)），或者您可能想使用**WYSIWYM Markdown Editor[wmd]**（[https： //github.com/derobins/wmd](https://github.com/derobins/wmd) , [http://code.google.com/p/wmd/](http://code.google.com/p/wmd/)）喜欢这个堆栈溢出..还有另一个**富文本编辑器[RTE]**（演示在这里：[http:// /www.kevinroth.com/rte/demo.htm](http://www.kevinroth.com/rte/demo.htm)，主站点在这里：[http](http://www.kevinroth.com/rte/) ://www.kevinroth.com/rte/ ）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T03:53:44.583

您需要使用 markdown 编辑器来格式化文本和插入图像，下面是一些有用的链接

[使用 MarkdownSharp 进行 Markdown 的 ASP.NET MVC HtmlHelper 扩展方法](http://blog.dantup.com/2011/03/an-asp-net-mvc-htmlhelper-extension-method-for-markdown-using-markdownsharp)

[https://meta.stackexchange.com/questions/4168/can-i-use-stack-overflows-reengineered-wmd-editor](https://meta.stackexchange.com/questions/4168/can-i-use-stack-overflows-reengineered-wmd-editor)

[https://stackoverflow.com/a/4592423/1679410](https://stackoverflow.com/a/4592423/1679410)

[http://markitup.jaysalvat.com/examples/html/](http://markitup.jaysalvat.com/examples/html/)

# iphone - Objective C - 如何检测用户点击了不允许访问照片按钮

> ID：14742578
> 
> 赞同：6
> 
> 时间：2013-02-07T02:33:00.403
> 
> 标签：iphone, objective-c, ipad

我正在使用 UIImagePicker 向用户展示照片，以便用户可以选择要在我的应用程序中使用的图像。

我的问题是，当用户第一次打开图像选择器时，他们会看到一个提示：“我的应用程序”想要访问您的照片，有两个选项，不允许和确定。

我的要求是当用户单击不允许时，图像选择器会被关闭。

有没有办法检测用户选择了不允许？

目前，它使用户处于丑陋的空白模式视图中。如果用户再次打开图像选择器，他们会显示漂亮的苹果提供的消息，上面写着“这个应用程序无权访问您的照片等”

这是我使用图像选择器的方式：

```
self.imagePickerController = [[UIImagePickerController alloc] init];
self.imagePickerController.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
[self presentModalViewController:self.imagePickerController animated:YES]; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-07T04:28:07.040

知道了！

```
if ([ALAssetsLibrary authorizationStatus] == ALAuthorizationStatusNotDetermined) {
    ALAssetsLibrary *assetsLibrary = [[ALAssetsLibrary alloc] init];
    [assetsLibrary enumerateGroupsWithTypes:ALAssetsGroupAll usingBlock:^(ALAssetsGroup *group, BOOL *stop) {
        if (*stop) {
            // INSERT CODE TO PERFORM WHEN USER TAPS OK eg. :
            return;
        }
        *stop = TRUE;
    } failureBlock:^(NSError *error) {
        // INSERT CODE TO PERFORM WHEN USER TAPS DONT ALLOW, eg. :
        self.imagePickerController dismissViewControllerAnimated:YES completion:nil];
    }];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T02:38:55.033

使用`ALAssetsLibrary authorizationStatus`. 有一个特定的返回值表明您的应用程序已被拒绝。

在此处对该方法进行搜索将显示一些示例代码，用于正确处理各种授权状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-13T16:44:54.163

我有一个类似的问题。如果它可以帮助将来可能遇到类似问题的任何人，您可以查看下面的代码。我有一个 IBAction 可以帮助我加载图像。我用这种方法挣扎了 4-5 个小时。

```
(IBAction)loadImages:(id)sender {
    ALAuthorizationStatus status = [ALAssetsLibrary authorizationStatus];

    if (status == AVAuthorizationStatusAuthorized || status == AVAuthorizationStatusNotDetermined) {

        ALAssetsLibrary *assetsLibrary = [[ALAssetsLibrary alloc]init];
        [assetsLibrary enumerateGroupsWithTypes:ALAssetsGroupAll usingBlock:^(ALAssetsGroup *group, BOOL *stop) {
            if (*stop) {
                self.imagePicker = [[UIImagePickerController alloc] init];
                self.imagePicker.delegate = self;
                self.imagePicker.allowsEditing = NO;
                self.imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
                imagePicker.mediaTypes =[UIImagePickerController availableMediaTypesForSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
                [self presentViewController:imagePicker animated:YES completion:^{
                    //TODO
                }];
                return;
            }
            *stop = TRUE;
        } failureBlock:^(NSError *error) {
            [imagePicker dismissViewControllerAnimated:YES completion:nil];
        }];
    }

    if (status == AVAuthorizationStatusDenied || status == AVAuthorizationStatusRestricted) {
        UIAlertView *cameraAlert = [[UIAlertView alloc]initWithTitle:NSLocalizedString(@"Camera Access Required", nil) message:NSLocalizedString(@"Please allow us to access your camera roll in your device Settings.", nil) delegate:self cancelButtonTitle:@"Okay" otherButtonTitles:nil, nil];
        [cameraAlert show];
    }
} 
```

# jquery - 即使链接重定向到另一个页面，jQuery 滚动动画也会锚定

> ID：14742583
> 
> 赞同：1
> 
> 时间：2013-02-07T02:33:17.787
> 
> 标签：jquery, hyperlink, scroll, anchor

假设我有一个名为`index.html`. 在文档中，我有一个指向另一个页面中的锚点的链接。所以让我们说：

```
<a href="page.html#anchor" class="scroll">Link</a> 
```

现在我有以下 jQuery 脚本来滚动动画到同一文档内的锚点：

```
$(".scroll").click(function(event){     
    event.preventDefault();
    $('html,body').animate({scrollTop:$(this.hash).offset().top}, 500);
}); 
```

但是，如果锚点位于同一页面中，则此方法有效。我怎样才能让它在另一个页面上工作呢？当我单击链接时，我希望它转到另一个页面并滚动到锚点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T02:53:56.200

你需要把你的锚定在类似的东西上

```
<a href="2nd.html#anchor_temp">Go</a> 
```

因为你无法阻止浏览器的默认滚动行为

文档准备好后，您需要从 URL 中查看哈希标记值，然后删除 _temp 并对其进行动画处理

```
$(document).ready(function(e){  
    var str= location.hash; 
    var n=str.replace("_temp","");
    $('html,body').animate({scrollTop:$(n).offset().top}, 500);
}); 
```

我希望这个能帮上忙 ：）

# javascript - 如何使用 jQuery 将值插入到 html 数组中？

> ID：14742589
> 
> 赞同：1
> 
> 时间：2013-02-07T02:34:47.020
> 
> 标签：javascript, jquery

我隐藏了一个表单和输入类型：

```
<?php echo "<input type=\"hidden\" name=\"ref[]\" value=\"".$i."\" />"; ?> 
```

假设`ref[]`有值`{'1','2','3','4'}`，我想使用 jQuery 在“2”和“3”之间插入“a”。我可以用 jQuery 做吗？

如何`ref[]`使用 jQuery 引用 html？并将值插入我需要的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:49:39.280

如果只想在“2”和“3”之间插入“a”，那么可以使用`.replace()`字符串函数。

```
$('input[name="ref[]"]').val($('input[name="ref[]"]').val().replace('"2","3"', '"2","a","3"')) 
```

演示：http: [//jsfiddle.net/PH4uF/3/](http://jsfiddle.net/PH4uF/3/)

我不确定您的要求是什么以及您要做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T02:51:25.003

我对您的问题的理解可能有点偏离，但是如果您尝试使用 name 属性在输入数组中查找某个输入，则可以使用类似以下内容：

```
var myInput = $('#parentEle').find('input[name="' + ref[2] + '"]'); 
```

基本上使用 jQuery 的 find 方法来查找您要查找的输入并更改它。

此外，如果您只是想更改 name 属性，请使用 jQuery 的 attr() 方法，如下所示：

```
myInput.attr('name', newValue); 
```

# iphone - 列表选择器，如 AB 联系人编辑电话/电子邮件类型

> ID：14742590
> 
> 赞同：0
> 
> 时间：2013-02-07T02:34:48.523
> 
> 标签：iphone, list, uitableview, popup, input-field

我正在尝试创建一个与联系人编辑功能非常相似的功能，该功能具有为项目选择和创建新标签的类似能力。一种选择是使用 UIActionSheet，但这不允许添加新项目的能力，也不允许检查。同样 Picker... 其次，我认为这是 Apple 的做法，是触发行选择器的按钮吗？或者也许只是创建一个弹出视图？那是从底部出现的。

有谁知道它实际上是如何完成的？任何人都可以建议一个例子让我看看来实现这个吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T01:31:16.893

所以这就是，我发现这是一个基本的“模态”过渡“覆盖垂直”到另一个导航控制器和其中的一个表格。在一行内单击按钮后。没有什么复杂的，因为一个人获得了一些经验......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T02:06:20.207

所以基本的想法是你在表格视图中有一个按钮（可能在页脚或一行中），当他们按下按钮时，你可以使用`UITableView`'s`insertRowsAtIndexPaths:withRowAnimation:`添加一个新行，该行可以有你的新字段/标签等。如果你在[developer.apple.com](http://developer.apple.com)上搜索示例，您会找到一些使用该方法的示例。搜索`insertRowsAtIndexPaths:`，你会找到几个例子。下载并运行它们，当你看到一个有你想要的去查看源代码时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:33:43.427

我确实找到了 github.com/simonb/SBTableAlert，它与联系人中的列表选择器不完全一样，但对于许多不同类型的弹出窗口来说是一个非常好的选择。它可能不那么漂亮，但更简单的解决方案非常好，恕我直言。

# gruntjs - 如何在自定义 grunt-init 模板中添加自定义提示

> ID：14742591
> 
> 赞同：4
> 
> 时间：2013-02-07T02:34:51.043
> 
> 标签：gruntjs

潜在的 n00b 问题，但谷歌没有一个简洁的答案 - 让我们一起解决这个问题。

我从 grunt 开始，我被困在一些基本的东西上。我发现 grunt-init 已经被转移到一个单独的进程中——文档周围的碎片一开始并不明显，但这很酷。

我现在决定我想要我自己的 grunt-init 模板，它位于我网站的根目录中（现在，直到需要将它移动到 ~/.grunt-init 目录中）。我正在使用 grunt 0.3.17

并通过 grunt-init-jquery 和其他初始化模板 - 我注意到它们都使用标准的初始化提示。

我想创建一些包含与客户相关的信息的自定义提示，可能添加客户电子邮件或项目经理姓名。

但是我一生都无法弄清楚如何创建/在哪里存储可以在 grunt-init 中调用的自定义提示。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T21:44:46.540

* * *

**更新：2012 年 2 月 8 日**

似乎答案在`init.process`命令之内。

启动流程以开始提示输入。 **init.process（选项，提示，完成）**

```
 init.process({}, [
      // Prompt for these values
      init.prompt('name'),
      init.prompt('description'),
      init.prompt('version')
    ], function(err, props) {
      // All finished, do something with the properties
    }); 
```

prompts 参数是一个对象数组。您可以添加自己的，而无需注册新的助手或扩展提示。

可以像这样添加自定义提示：

```
 init.process({}, [

        // Prompt for these values.
        {
          name: 'client_name',
          message: 'Who is the client contact?',
          default: 'Joe Smith', 
          validator: /^[\w\-\.]+$/,
          warning: 'Must be only letters, numbers, dashes, dots or underscores. (If this is not for a client, say HOUSE)'
        },
        {
          name: 'project_manager',
          message: 'Who is the project manager?',
          default: 'Me', 
          validator: /^[\w\-\.]+$/,
          warning: 'Must be only letters, numbers, dashes, dots or underscores.'
        }

    ], function(err, props) {
      // All finished, do something with the properties
    }); 
```

# asp.net-web-api - 来自 Web.API 控制器和 DirectoryInfo 的访问被拒绝错误

> ID：14742592
> 
> 赞同：4
> 
> 时间：2013-02-07T02:34:56.380
> 
> 标签：asp.net-web-api, iis-7.5, directoryinfo

我在 IIS 服务器上配置了一个虚拟目录，指向一个 UNC 网络位置 - “\\esdata\userdata”。当我设置它时，我在 IIS 配置中设置了一个特定用户，并且我知道该用户对此目录具有完全权限。

现在在我的 Web.API 控制器中，我正在该虚拟目录中寻找一个特定的子目录——比如说 johndoe（所以 \\esdata\userdata\johndoe）。我可以创建我的 DirectoryInfo 对象，它显示的路径正是正确的。但是，如果我在该目录信息上调用 GetDirectories()，我会收到拒绝访问异常 - 即使肯定有子目录并且即使 IIS 用于访问该目录的用户具有完全权限。

那么首先，这是 GetDirectories() 的限制吗？我读过它有一些问题。我能做些什么来解决这个问题，或者我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T16:57:40.460

发现问题并修复它。底线是我必须按照[此处](http://www.iis.net/learn/manage/configuring-security/application-pool-identities)的文档配置默认 ApplicationPool 以使用我的授权用户的身份。

我认为给我带来麻烦的是我将此目录映射为 IIS 中的虚拟目录，并将其映射为同一用户。显然，这并没有像我想象的那样授予访问该信息的权限。更改应用程序池标识可能不是一个好主意，但对于基于 Intranet 的站点，它会让我到达我想去的地方:)

# excel - excel工作表公式中使用的“@”、“[”、“]”是什么

> ID：14742595
> 
> 赞同：1
> 
> 时间：2013-02-07T02:35:12.160
> 
> 标签：excel

我购买了 Microsoft Office 2013 并下载了新的摊销模板。其中一个公式包含“[”、“]”和“@”符号。我想知道它在那个公式中有什么意义。这将帮助我了解发生了什么。完整的公式是。

```
=IF([@[PMT NO]]<>"",SUM(INDEX([INTEREST],1,1):[@INTEREST]),"") 
```

该文件的链接在[这里](https://dl.dropbox.com/u/81707637/Loan%20amortization%20schedule1.xlsx)

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T02:53:15.687

这些是对所列列中当前值的动态引用。

`PMT NO`是表中的一列。因此，`[@[PMT NO]]`将动态解析为该行 PMT NO 列中单元格的值。

如果您突出显示具有此公式的单元格之一，然后在编辑栏中单击，它应该对这些变量以及它引用的特定单元格周围的边框进行颜色编码。

![在此处输入图像描述](../Images/0e813cead055cfe17087fc3453d3237f.png)

# android - 无法执行dex：多个dex文件定义Lcom/actionbarsherlock/R$attr

> ID：14742602
> 
> 赞同：8
> 
> 时间：2013-02-07T02:35:39.500
> 
> 标签：android, eclipse, actionbarsherlock, dex

我为我的应用程序创建了一个库项目。当我尝试将库添加到项目时，尝试运行它时出现以下错误：

```
[2013-02-07 04:51:26 - Dex Loader] Unable to execute dex: Multiple dex files define Lcom/actionbarsherlock/R$attr;
[2013-02-07 04:51:26 - testfromlibrary] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Lcom/actionbarsherlock/R$attr; 
```

我已将 HoloEverywhere 库添加到我的库中，而我已将 ActionBarSherlock 库添加到 HoloEverywhere。我在 Windows 7 上使用 Eclipse。

即使我将 SDK 更新到最新版本，重新启动 Eclipse，并清理了各种项目，错误仍然存​​在。

有谁知道如何解决这个错误？我的[bin 目录](https://stackoverflow.com/questions/7870265/unable-to-execute-dex-multiple-dex-files-define-lcom-myapp-rarray)不包含在属性下的构建路径中，我尝试完全[删除 bin 文件夹](https://stackoverflow.com/questions/8685864/error-when-building-apk-multiple-dex-files-define-lcom-google-ads-ad)。

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-08-14T17:54:56.587

我发现如果我进入属性 -> Java 构建路径 -> 订购和导出并删除了 Android 私有库，那么我的项目构建得很好。那里有另一个支持 v4 jar，它与动作栏 sherlocks 支持 v4 库冲突

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-07T02:49:30.027

当我与 actionbarsherlock 创建一个库时，这个问题发生在我身上。在这种情况下，eclipse 在我的库和使用它的项目中从 sherlock 创建 R。

解决方案是在您的库 bin 文件夹中仅删除包含 R 类的文件夹 actionbarsherlock。此 inst create 不再存在，并且仅存在于您的项目应用程序中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-07T21:55:48.503

我将错误的原因定位到 /bin/classes。如果我在运行应用程序之前删除了 /classes 目录，则应用程序将编译并运行。当然，当我尝试实际导出应用程序时，/classes 目录会返回并随之出现错误。

我的问题的解决方案是安装最新版本的 Eclipse。当我通过最新安装的 Eclipse 导出或运行应用程序时，/classes 文件夹现在不会出现。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-30T12:28:29.590

我的问题是重复的类文件。我在同一个项目中同时拥有包本身和包的 jar sdk（在 libs 文件夹中）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-09-14T22:42:28.037

在我将常规 android 项目更改为库项目以便将其用于免费/付费项目拆分设置后，这发生在我身上。

Running either of the Free/Paid projects will result in OPs error.

Problem was some left over compilation stuff when the base project was a normal project and not a library project. Just clean the workspace and rebuild all projects. Old compilation junk will be removed and everything will be compiled into correct libraries. Try to rerun project which gave the error and everything should be fine now.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-06-18T12:30:05.593

确保两个项目（库和应用程序）没有相同的包名（在 AndroidManifest 中）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-09T13:19:08.143

我今天有同样的问题。我删除了 /bin 中的 .apk 文件，似乎修复了它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-10-25T02:54:19.413

Remove all the libraries from Build Path and import the library project that you want to implement.. This works just fine..

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-08-08T05:01:19.383

You can use [Tattletale](http://tattletale.jboss.org/)

It helps you to identify duplicated classes in your JAR files.

Hope it helps.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-01-29T22:00:40.617

For Android Studio - I removed duplicate .jar imports and it was resolved.

*Details:* I had an app that had a base /common folder and then two folders that inherited from that - a free and paid version of the app. The issue was caused when I had the /common folder and the /free folder both including the same crashlytics jar file in project structure.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-05-16T08:13:44.457

For me, the solution was delete every `JAR` file in the "bin" folder / directory.

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-05-27T15:24:28.390

If your project is referencing a library project - please check if the library project has the same libs that you are using in your project but **different versions**. Use same versions everywhere and all should be ok!

# objective-c - 为什么 [super class] 和 [self class] 产生相同的结果？

> ID：14742607
> 
> 赞同：11
> 
> 时间：2013-02-07T02:36:46.297
> 
> 标签：objective-c

```
-(NSString *) nibName
{
    PO([self class]);
    PO([super class]);
    PO([self superclass]); 
```

只有`[self superclass]`产生实际的超类。

```
[self class]: BGImageForBizs
[super class]: BGImageForBizs
[self superclass]: BGUIImageWithActivityIndicator 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T03:06:16.750

发送消息 using与发送消息`super`相同`self`，但显式使用超类的方法实现。但是你的类可能没有实现`-class`方法本身，所以你已经`-class`从你的超类继承了实现。

实际上，您可能正在继承`NSObject`的实现`-class`（即使`NSObject`不是您的直接超类；`-class`也不是经常被覆盖的方法）。而默认实现只是返回对象`isa`指针的内容，告诉你`Class`它是什么。

换句话说，重要的是要认识到调用`super`不会将您的对象完全转换为其超类的实例。它只是运行该方法的超类代码。如果该代码中正在进行任何自省，它仍然会将您的对象视为它开始时的任何类的实例。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-07T02:55:02.127

self 和 super 是同一个对象。super 唯一要做的就是控制调用该方法的哪个实现。由于您的类和超类都使用 NSObject 的 -class 实现，因此在两种情况下都会调用相同的方法。

# couchdb - 如何在 Couchbase 中批量插入文档？

> ID：14742608
> 
> 赞同：3
> 
> 时间：2013-02-07T02:36:47.903
> 
> 标签：couchdb, couchbase

我没有看到任何使用 Couchbase Python 客户端批量插入文档的方法。有关如何使用 REST api 批量插入文档的任何示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T06:57:43.177

我在这里仅针对 Couchbase 回答，因为您可能知道它们是具有不同功能的 2 个不同项目。

Python SDK 无法批量加载数据。

为此，您可以使用： - 标准的设置/添加方法 - cbdocloader 命令行工具，允许您将文件系统中的数据注入 Couchbase 服务器，请参阅： http: [//www.couchbase.com/docs/couchbase- manual-2.0/couchbase-admin-cmdline-cbdocloader.html](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-admin-cmdline-cbdocloader.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-04T21:20:42.420

我将 CURL 脚本与 Sync Server RESTful API Example JSON 一起用作属于同步用户 1 的 400001.json 文件。

```
    {“类型”：“任务列表”，“名称”：“Order400001”，“所有者”：“user1”，“_id”：“user1.S100400001”
,
“命令”： {
        "订单ID": "S100400001",
        “状态”：“在途”，
        “客户”：“我的客户”，
        “提交日期”：“2017 年 12 月 21 日”，
        “PO”：“123455”，
        "SoldToAccount": "0001122333",
        "ShipToAccount": "0001122333",
        “项目”： [{
                "项目ID": "XXX",
                "ItemStatus": "在途",
                “项目数量”：“2”，
                "ItemPrice": "1500",
                "ItemDescription": "MODULE XXX US CAN"
            },
            {
                "项目ID": "XXXG",
                "ItemStatus": "在途",
                “项目数量”：“2”，
                "ItemPrice": "15000",
                "ItemDescription": "MODULE XXX US CAN (GOLD)"
            }
        ]
    }
}

```

然后像这样的脚本

curl -X POST " [http://user:password@MyCouchBaseSyncServerHost:4984/orders/](http://user:password@MyCouchBaseSyncServerHost:4984/orders/) " -H "accept: application/json" -H "Content-Type: application/json" -H "Authorization: Basic {your key here }" -d @401000.json

# oracle - 一个 oracle 数据库用户或多个用户在 asp.net 中使用

> ID：14742611
> 
> 赞同：0
> 
> 时间：2013-02-07T02:37:07.810
> 
> 标签：oracle, multiple-users

我对 oracle 数据库上这两个场景中的每一个的性能都有疑问：-

背景：我为企业使用oracle数据库开发asp.net业务应用程序

一：

我在做一些业务逻辑时，创建了一个数据库用户，并在asp.net应用程序的连接字符串中使用这个用户连接到db，所以如果20个最终用户同时使用这个asp.net应用程序，那么他们都连接到db作为一个用户

二：

我创建了多个数据库用户（2 - 5 个用户），并在连接字符串池中使用它们，因此如果 20 个最终用户同时使用 asp.net 应用程序，那么并非所有用户都以一个用户身份连接到 db

什么是更好的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:51:55.740

我不确定 Oracle 的细节......但一般来说，一个好的模型如下：

1.  创建多个数据库用户，每个用户具有不同级别的数据库访问权限，具体取决于他们的角色。这些 db 用户不对应于实际用户，而是对应于角色，可能大约 4 个：对创建/删除/更新表等的完全访问权限，对更新表的写访问权限，从表中选择的读访问权限，执行存储过程和函数.

2.  对于 ASP.NET 应用程序所需的任何类型的数据修改，请将此操作封装在存储过程中。本质上，您在存储过程级别编写数据访问接口。

3.  创建一个“stored_procedure_executor”数据库用户，其访问权限仅允许执行某些存储过程（和函数）。此用户无权直接从表中访问 CREATE/DROP/UPDATE/SELECT。

4.  在您的 ASP.NET 应用程序中，您只需为“stored_procedure_executor”数据库帐户存储/提供连接字符串（数据库用户登录信息）。

5.  在开发、维护和支持期间，您将需要直接创建/删除/更新/选择的能力，为此，您可以创建具有适当访问级别的其他数据库用户。但是您将从数据库管理工具中使用这些数据库帐户，而不是通过 ASP.nET。因此，登录信息永远不需要在 ASP.NET 级别公开。

这主要是出于安全考虑，但也可以提高性能，因为它迫使您考虑访问数据的方式/模式，从而允许您优化数据库的结构以及实现最常用的查询（嵌入在存储过程中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:31:33.257

这很好，但我的情况是：我观察到当 20 个最终用户同时运行应用程序时性能会下降，所以这是因为我所有的 db 工作都是作为 db 的单个用户进行的，或者可以通过使用多个用户来增强？？？ ?????????????????????

# linux - 似乎是错误的 shell 脚本：cat

> ID：14742613
> 
> 赞同：-1
> 
> 时间：2013-02-07T02:37:26.080
> 
> 标签：linux, shell, cat

我在使用这个`start.sh`脚本时遇到了问题。当我键入 `./start.sh`时，它不起作用。我的意思是，它不会出错，但它什么也不做。

当我使用 VIM 打开这个文件时（我真的很想上传图片，但我不能，因为我几天前才注册了这个网站）从`import sys,math,random` to的行`print '\n'`都是红色的。之后`EOS`，颜色正常显示。如果我`#`在 前面输入`cat`，我的意思是，`#cat <<EOS | python > target.txt`颜色会改变。

所以我认为这条线：

```
cat <<EOS | python > target.txt 
```

是错的。我该如何纠正？

```
#!/bin/sh

if [ "$1" = clean ]; then
rm -f *.log *.dat target.txt
exit
fi

num=1
length=1000
period=50

cat <<EOS | python > target.txt
import sys,math,random
funcs = [
lambda t : (0.8 * math.sin(t), 0.8 * math.cos(t)),
lambda t : (0.3 * math.sin(t), 0.3 * math.cos(t)),
lambda t : (0.8 * math.sin(3 * t), 0.8 * math.cos(t)),
lambda t : (0.8 * math.cos(t), 0.8 * math.sin(3 * t)),

lambda t : (0.4 * math.sin(2 * t) + 0.4, 0.8 * math.cos(t)),
lambda t : (0.4 * math.sin(2 * t) - 0.4, 0.8 * math.cos(t)),
lambda t : (0.8 * math.sin(2 * t), 0.4 * math.cos(t) + 0.4),
lambda t : (0.8 * math.sin(2 * t), 0.4 * math.cos(t) - 0.4),

lambda t : (0.4 * math.cos(t) + 0.4, 0.8 * math.sin(2 * t)),
lambda t : (0.4 * math.cos(t) - 0.4, 0.8 * math.sin(2 * t)),
lambda t : (0.8 * math.cos(t), 0.4 * math.sin(2 * t) + 0.4),
lambda t : (0.8 * math.cos(t), 0.4 * math.sin(2 * t) - 0.4),

lambda t : (0.4 * math.sin(t) + 0.4, 0.8 * math.cos(t)),
lambda t : (0.4 * math.sin(t) - 0.4, 0.8 * math.cos(t)),
lambda t : (0.8 * math.sin(t), 0.4 * math.cos(t) - 0.4),
lambda t : (0.8 * math.sin(t), 0.4 * math.cos(t) + 0.4),

lambda t : (0.8 * math.sin(t), 0.8 * math.cos(2 * t)),
lambda t : (0.8 * math.sin(t), -0.8 * math.cos(2 * t)),
lambda t : (0.8 * math.cos(2 * t), 0.8 * math.sin(t)),
lambda t : (-0.8 * math.cos(2 * t), 0.8 * math.sin(t)),

lambda t : (0.3 * math.sin(t) + 0.5, 0.3 * math.cos(t) + 0.5),
lambda t : (0.3 * math.sin(t) + 0.5, 0.3 * math.cos(t) - 0.5),
lambda t : (0.3 * math.sin(t) - 0.5, 0.3 * math.cos(t) + 0.5),
lambda t : (0.3 * math.sin(t) - 0.5, 0.3 * math.cos(t) - 0.5)
]
def gen_sigma():
sigma = [0.01, 0.05]
n = 0
while True:
    yield sigma[n % len(sigma)]
    n += 1
gen = gen_sigma()

for f in funcs:
sigma = gen.next()
for n in xrange($num):
    m = random.randint(0, 1000)
    for t in [x * ((2 * math.pi) / $period) for x in xrange(m, $length+m)]:
        print '\t'.join([str(x + random.gauss(0, sigma)) for x in f(t)])
    print '\n'
EOS

if [ x`which rnn-learn` == x ]; then
path1=../../src/rnn-learn/
else
path1=
fi
${path1}rnn-learn -c config.txt target.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:37:38.430

剧本没有不言而喻的错误。标记为红色的部分是一个“此处文档”，它从包含的行之后的行到包含`<<EOS`的行`EOS`。这里的文档作为标准输入提供给 Python，Python 将其输出写入文件`target.txt`。脚本的其余部分`rnn-learn`在文件上运行命令，`target.txt`由配置文件引导（我猜）`config.txt`。

当您`#`在包含命令的行前面放置 a 时，`cat`它就变成了注释，因此以下几行是“只是 shell 脚本”——它们作为 shell 脚本没有意义，但`vim`很难知道这一点（它是一个编辑器！）。因此，它会更改线条的颜色，因为它们不再是此处文档的一部分。

`cat`真的没必要。该行可以写成：

```
python > target.txt <<EOS 
```

# linux - 如何使用 linux shell 创建包含重复值列表的文件？

> ID：14742614
> 
> 赞同：0
> 
> 时间：2013-02-07T02:37:34.097
> 
> 标签：linux, file, bash, shell, zsh

我有一个包含值列表的文本文件：

```
ASDSAV
ASDSAD
ASDFSA 
```

并且需要得到

```
ASDSAV        7
ASDSAD        7
ASDFSA        7 
```

即加入一个只有一列7s的文件（可以通过粘贴轻松实现）

```
7
7
7 
```

是否有简单的命令来创建这个 7s 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T02:40:23.083

```
awk '{print $0, "7"} ' inputfile > newfile 
```

不需要单独的 7 文件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T02:46:53.983

问题实际上是如何创建一个包含sevens 列表的文件。

您可以使用一些 coreutils：

```
printf '7\n%.0s' $(seq $(wc -l < file)) > output.txt 
```

或`awk`：

```
awk '{ print "7" > "output.txt" }' file 
```

或`sed`：

```
sed 's/.*/7/' file > output.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T02:42:28.087

awk '{print $1 " 7"}' temp.dat; 其中 temp.dat 是您的原始文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T02:43:35.653

全能的**SED**

```
sed -e "s/$/7/" f1 > f2 
```

愿你的 AWKS 在他的脚前崩溃

旁注：如果你想在 sed 中将 7 标记出来，那就是

```
sed -e "s/$/<ctrl+v><tab>7/" f1 > f2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T18:11:40.887

该`yes`命令提供了无限量的参数：

```
yes 7 | head -n $(wc -l < file.txt) | paste file.txt - 
```

（很高兴知道`yes`，但在这种情况下它有点笨拙。`paste`用空行自动扩展较短的输入文件，并且 - 提供的`yes`标准输入是无限长的，没有`head`限制它。）

# javascript - 如何通过 Javascript 转换 UTC 日期？

> ID：14742625
> 
> 赞同：3
> 
> 时间：2013-02-07T02:39:25.047
> 
> 标签：javascript, date, sharepoint-2010, format, momentjs

我从 Web 服务获取日期具有格式日期，例如`"2013-02-06T10:40:56.027"`如何将其转换为`"2/6/2013 2:40 AM"`.

![在此处输入图像描述](../Images/baeadef6dc432268d2f96e12b469b95a.png)

我从 Sharepoint 2010 的 SocialDataService 获得的 Web 服务

我尝试[一下](http://momentjs.com/)javascript：

```
var date = moment(lastModifiedTime);

var result = date.format("MM/DD/YYYY hh:mm A"); 
```

但结果不正确的时间：`02/06/2013 10:40 AM`

我预期的结果：`02/06/2013 2:40 AM`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T03:17:06.407

如果您可以假设您的服务返回 UTC 时间，您可以尝试以下操作：

```
moment.utc(result_from_service).local() 
```

更多详情： http: [//momentjs.com/docs/#/manipulating/utc/](http://momentjs.com/docs/#/manipulating/utc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T03:28:22.323

```
//Manually add time zone to the date string
var date = moment(lastModifiedTime + "+15:00");
var result = date.format("MM/DD/YYYY hh:mm A"); 
```

# python - 使用 matplotlib 中的 pcolor 时出错

> ID：14742626
> 
> 赞同：2
> 
> 时间：2013-02-07T02:39:33.380
> 
> 标签：python, matplotlib

我是 python 新手。我试图将 matplotlib 中的 pcolor 用于 gridx、gridy 和 V，所有尺寸均为 401x121。功能如下：

```
def plotSpatialKM(V,gridx,gridy,step_h):
    plt.figure(figsize=(18,8), dpi=80, facecolor='white')
    plt.pcolor(gridx,gridy,V)
    plt.colorbar()
    plt.xlim(gridx.min(), gridx.max())
    plt.ylim(gridy.min(), gridy.max())
    plt.xlabel('x/h',fontsize=FONTSIZE)
    plt.ylabel('y/h',fontsize=FONTSIZE)
    plt.xticks(fontsize=FONTSIZE)
    plt.yticks(fontsize=FONTSIZE)    
    plt.show()
    return(1) 
```

但一直以来，它都会导致以下错误：

```
Exception in Tkinter callback
Traceback (most recent call last):
  File "C:\Python27\lib\lib-tk\Tkinter.py", line 1410, in __call__
    return self.func(*args)
  File "C:\Python27\lib\site-packages\matplotlib\backends\backend_tkagg.py", line 276, in resize
    self.show()
  File "C:\Python27\lib\site-packages\matplotlib\backends\backend_tkagg.py", line 348, in draw
    FigureCanvasAgg.draw(self)
  File "C:\Python27\lib\site-packages\matplotlib\backends\backend_agg.py", line 439, in draw
    self.figure.draw(self.renderer)
  File "C:\Python27\lib\site-packages\matplotlib\artist.py", line 54, in draw_wrapper
    draw(artist, renderer, *args, **kwargs)
  File "C:\Python27\lib\site-packages\matplotlib\figure.py", line 999, in draw
    func(*args)
  File "C:\Python27\lib\site-packages\matplotlib\artist.py", line 54, in draw_wrapper
    draw(artist, renderer, *args, **kwargs)
  File "C:\Python27\lib\site-packages\matplotlib\axes.py", line 2086, in draw
    a.draw(renderer)
  File "C:\Python27\lib\site-packages\matplotlib\artist.py", line 54, in draw_wrapper
    draw(artist, renderer, *args, **kwargs)
  File "C:\Python27\lib\site-packages\matplotlib\collections.py", line 755, in draw
    return Collection.draw(self, renderer)
  File "C:\Python27\lib\site-packages\matplotlib\artist.py", line 54, in draw_wrapper
    draw(artist, renderer, *args, **kwargs)
  File "C:\Python27\lib\site-packages\matplotlib\collections.py", line 244, in draw
    self.update_scalarmappable()
  File "C:\Python27\lib\site-packages\matplotlib\collections.py", line 609, in update_scalarmappable
    raise ValueError('Collections can only map rank 1 arrays')
ValueError: Collections can only map rank 1 arrays 
```

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-03T08:17:58.860

我在使用 np.matrix 时遇到了同样的错误。

```
import matplotlib.pyplot as plt
import numpy as np

A = np.random.random([8, 8])

plt.colormesh(A) # no error
M = np.matrix(A)
plt.colormesh(M) # the same error 
```

numpy 矩阵根本不像 ndarrays （例如`all(M[0][0][0][0][0] == M[0])`is `True`even if `M.ndim == 2`），这里 matplotlib 没有考虑到这一点......你只需要从矩阵创建一个 ndarray ：

```
plt.colormesh(np.array(M)) # no error 
```

# arrays - 创建一个数组数组，然后检索值

> ID：14742627
> 
> 赞同：0
> 
> 时间：2013-02-07T02:39:35.563
> 
> 标签：arrays, perl

我输入了以下代码：

```
my @resultsArray;
my @dataArray;
while (my ($id, $originLat, $originLng, $compensation ) = $sth->fetchrow_array) {
    @dataArray = ($id, $originLat, $originLng, $compensation);
    print "ID: $id Lat: $originLat Lng: $originLng Compensation: $compensation\n";
    print "Data Array: @dataArray\n";
    #the above code words.
    #I declare 
    push (@resultsArray, @dataArray);
}

my (@r1, @r2, @r3, @r4);
#issue here
for  (@resultsArray) {
    @r1 = pop(@resultsArray);
    @r2 = pop(@resultsArray);
    @r3 = pop(@resultsArray);
    @r4 = pop(@resultsArray);               

    print "ID: $r4[0] Lat: $r3[0] Lng: $r2[0] Compensation: $r1[0]\n";
    #@r1 = ();
} 
```

上面的代码有效。数组`@dataArray`被压入`@resultsArray`堆栈并`@r1, @r2, @r3, @r4`分别弹出。然而，这是一个糟糕的代码。有没有更好的方法，一种更简洁的方法，行数更少，仍然可读并且通常更专业？

我正在寻求提高我的技能。我觉得如果我带着这样的东西出现，我可能会成为一个房间的笑柄。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T02:57:31.950

你只需要学习如何使用引用。这是用数组引用重写的代码：

```
my @resultsArray;
while (my ($id, $originLat, $originLng, $compensation ) = $sth->fetchrow_array) {
    my $dataArray = [$id, $originLat, $originLng, $compensation];
    print "ID: $id Lat: $originLat Lng: $originLng Compensation: $compensation\n";
    print "Data Array: @$dataArray\n";
    #the above code words.
    #I declare 
    push @resultsArray, $dataArray;
}

for my $r (@resultsArray) {
    print "ID: $r->[0] Lat: $r->[1] Lng: $r->[2] Compensation: $r->[3]\n";
} 
```

Perl 中的数组数组最好表示为*数组引用数组*。

这里的魔力是

```
my $dataArray = [$id, $originLat, $originLng, $compensation]; 
```

这将创建一个包含四个值的匿名数组，然后将*标量* `$dataArray`设置为指向匿名数组。然后这个*引用*被推送到`@resultsArray`. `@resultsArray`现在是一个标量数组，恰好是对其他数组的引用。可以使用构造*取消引用*`->[n]`这些引用以获取数组的各个成员。

# php - jQuery AJAX 脚本未触发

> ID：14742633
> 
> 赞同：0
> 
> 时间：2013-02-07T02:40:15.550
> 
> 标签：php, jquery, ajax, pdo

我有以下似乎没有触发的 AJAX 脚本。有人可以告诉我它有什么问题吗？

**表单.php**

```
<script type = "text/javascript"> $(document).ready(function () {
    $('#updatebtn1').click(function () {
        $('#result1').show('slow').delay(4000).hide('slow')
        $.post('process.php', $('#updateform1').serialize())
    });
});
</script>

<form id="updateform1">
    <div class="tbl_header">Timetable Support Website</div>Due Date:
    <script>
        $(function() {
            $("#datepicker1").datepicker({
                minDate: -0,
                dateFormat: 'dd/mm/yy',
                maxDate: new Date(2013, 1, 22)
            })
        });
    </script>
    <input type="text" id="datepicker1" style="width: 100px;
            height: 10px;" value="18/02/2013" name="duedate" />&nbsp; Status:
    <select style="width: 125px;" name="status">
        <option>Pending</option>
        <option>----</option>
        <option>Pending</option>
        <option>In Progress</option>
        <option>Complete</option>
    </select>&nbsp;
    <input type="hidden" name="id" value="1">
    <input type="button" id="updatebtn1" value="Update" style="width: 100px;"
    class="pmbtn" />
</form>
<div id="result1" style="display: none; color: red">Update successful!</div> 
```

**进程.php**

```
<?php
$duedate = $_POST["duedate"];
$status = $_POST["status"];
$id = $_POST["id"];

$sql = "UPDATE pm_schedule SET duedate=?, status=?, id=? WHERE id=?";
$q = $pdo->prepare($sql);
$q->execute(array($duedate,$status,$id));
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:54:48.617

我不太熟悉位置占位符（我总是使用命名占位符），但我假设你需要做

```
$q->execute(array($duedate,$status,$id,$id)); 
```

因为`$id`被使用了两次。MySQL 不知道你想要什么作为最终占位符。可能会引发占位符计数不匹配的某种错误。

尝试将此添加到您的数据库句柄中：

```
$dbh->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION ); 
```

然后将输出`process.php`回显到主页。

# java - 从用户输入的url中提取域名

> ID：14742635
> 
> 赞同：1
> 
> 时间：2013-02-07T02:40:27.450
> 
> 标签：java, url

我在从用户可以输入的任何 url 中提取域名时遇到问题。我们必须使用[http://www.google.com](http://www.google.com)、[http://amazon.com](http://amazon.com)和[http://mix.wvu.edu](http://mix.wvu.edu)来测试我们的程序。

```
import java.util.Scanner;

    public class lab3 { 

        public static void main( java.lang.String[] args) { 
            System.out.println ("Please enter the URL");
            Scanner in = new Scanner(System.in);
            String Url = in.nextLine(); 
            System.out.println();
        }
    } 
```

到目前为止，这是我所拥有的可悲的 Java，我只是不确定在让用户输入 URL 后下一步是什么！任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T04:58:04.373

使用 java.net.URL 类，您可以初始化它的一个实例并将整个输入字符串传递给构造函数。然后使用 url.getHost() 方法让类为您提取域名。

```
import java.net.URL;
import java.util.Scanner;

public class lab3 {

    public static void main( java.lang.String[] args) { 
        try {
            System.out.println ("Please enter the URL");
            Scanner in = new Scanner(System.in);
            String input = in.nextLine(); 
            URL url = new URL(input);
            System.out.println(url.getHost());
        } catch(Exception ex) {
            ex.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T02:45:37.200

您可以考虑查看[URI](http://docs.oracle.com/javase/6/docs/api/java/net/URI.html)类，特别是 getHost 方法。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T02:44:22.493

从字符串构造一个类的实例，[`java.net.URL`](http://docs.oracle.com/javase/7/docs/api/java/net/URL.html)并使用相关的 getter 来获取宿主组件。详细信息在上面链接的 javadoc 中。（`java.net.URI`是另一种选择，但如果输入应该是 URL 而不是 URI，那么`URL`在这种情况下类应该不那么麻烦。）

# javascript - 我只能将三个元素添加到二维数组，而不是四个

> ID：14742638
> 
> 赞同：0
> 
> 时间：2013-02-07T02:41:04.570
> 
> 标签：javascript

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title></title>
  <script type="text/javascript">
     function arr(){
     var a=new Array(new Array());
     var x;
     for(i=0;i<2;i++)
     {
         for(j=0;j<2;j++)
         {
             x=prompt("Enter an element for a["+i+"]["+j+"]"," ");
             a[i][j]=x;
         }
     }

     for(i=0;i<2;i++)
     {
         for(j=0;j<2;j++)
         {
            document.write(a[i][j]);
         }
     }

     document.close();

     }

     </script>

</head>

<body onLoad="arr();">

</body>
</html> 
```

上面的代码是在 Firefox 上测试的。只显示三个提示，而不是四个：

```
a[0][0]
a[0][1]
a[1][0] 
```

数组也不会打印。我的错误是什么？如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:44:50.303

真的很抱歉之前的答案，这是正确的答案

```
 <!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title></title>
  <script type="text/javascript">
     function arr()
     {
     var a = new Array();
     var x;

 for(i=0;i<2;i++)
 {
     a[i] = new Array();
     for(j=0;j<2;j++)
     {
         x="";
         x = prompt("Enter an element for a["+i+"]["+j+"]","");
     }
 }

 for(i=0;i<2;i++)
 {
     for(j=0;j<2;j++)
     {
        document.write(a[i][j]);
     }
 }

 document.close();

 }

 </script> 
```

问题是您必须在第一个数组示例中声明新数组：[如何在 JavaScript 中创建二维数组？](https://stackoverflow.com/questions/966225/how-can-i-create-a-two-dimensional-array-in-javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T02:45:51.587

您声明的数组少于应有的数组。对于这个例子，你需要一个像`[[],[]]`. `i`我会这样编码（以允许and的任何最大值`j`）：

```
function arr(){
     var a = [];
     var x;
     for(i=0;i<2;i++){
         a[i] = [];
         for(j=0;j<2;j++){
             x=prompt("Enter an element for a["+i+"]["+j+"]"," ");
             a[i][j]=x;
         }
     }

     for(i=0;i<2;i++){
         for(j=0;j<2;j++){
            document.write(a[i][j]);
         }
     }

} 
```

它也没有打印的原因是缺少的数组导致了错误，中断了函数的执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T02:47:29.777

您的数组是这样创建的：`a[[]]`

所以你只能访问`a[0][0]`and `a[0][1]`，而 a[1] 返回 undefined。

你可以像这样创建你的数组。`a = [[], []];`，这将解决您的问题。

# java - 来自 String 的 Java Date 对象无法正常工作

> ID：14742641
> 
> 赞同：7
> 
> 时间：2013-02-07T02:41:46.193
> 
> 标签：java, string, date, simpledateformat

我遇到了一个似乎无法解决的顽固问题。我在 stackoverflow 上寻找了解决方案，发现了很多关于 Java 日期格式的帖子，但没有针对我遇到的问题。

基本上，我有一种情况需要将日期字符串转换为 java.util.Date 对象。我正在使用 Date 和 SimpleDateFormat 类。对于我遇到的大多数日期，它工作得很好。但是对于某些日期，它可以工作，但会更改实际日期。两个示例日期是：

2012 年 2 月 24 日星期五 16:45:40 PST --> 更改为 --> 2012 年 1 月 6 日星期五 16:45:40 PST

2012 年 6 月 13 日星期三 10:00:42 PDT --> 更改为 --> 2012 年 1 月 4 日星期三 09:00:42 PST

知道为什么日期会更改吗？有什么方法可以轻松避免这种情况或以不同的方式做到这一点？我的代码复制如下。你可以试试看我在说什么。

提前致谢！

您可以使用以下 JSP 代码进行尝试：

```
<%@ page import="java.util.*" %>
<%@ page import="java.net.*" %>
<%@ page import="java.io.*" %>
<%@ page import="java.text.*" %>

<%
String dateStr = "";
Date tmpDate = null;
DateFormat formatter = new SimpleDateFormat("EEE MMM dd HH:mm:ss z YYYY");

System.out.println("First Test ---------------");
dateStr = "Fri Feb 24 16:45:40 PST 2012";
tmpDate = (Date) formatter.parse(dateStr);
System.out.println("Original:"+dateStr+":");
System.out.println("Date Obj:"+tmpDate.toString()+":");

System.out.println("Second Test --------------");
dateStr = "Wed Jun 13 10:00:42 PDT 2012";
tmpDate = (Date) formatter.parse(dateStr);
System.out.println("Original:"+dateStr+":");
System.out.println("Date Obj:"+tmpDate.toString()+":");

%> 
```

我得到以下输出：

```
First Test ------------
Original:Fri Feb 24 16:45:40 PST 2012:
Date Obj:Fri Jan 06 16:45:40 PST 2012:
Second Test -----------
Original:Wed Jun 13 10:00:42 PDT 2012:
Date Obj:Wed Jan 04 09:00:42 PST 2012: 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T02:44:57.077

在格式字符串中使用 yyyy 而不是 YYYY。

YYYY是个很特别的东西，日历周年。

有关更多信息，请参阅[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T03:30:05.393

您在格式说明符中使用 YYYY，即**周年**（请参阅[SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)）。你需要 yyyy，这只是“年”。

我怀疑出现了错误的结果，因为您还指定了月份和日期，这在一周年中并不是真正的“功能”。当您使用星期年份时，您会指定“星期几”和“星期几”，它可能会给出一些更合理的结果，但显然您并不是真的打算使用星期年份。

我建议您在代码中指定您的语言环境。当然它会在你的机器上完美运行，但它可能会在中国等其他地方导致无法[解析的日期异常。](https://stackoverflow.com/questions/6154772/java-unparseable-date)

```
DateFormat formatter = new SimpleDateFormat("EEE MMM dd HH:mm:ss z yyyy", Locale.ENGLISH); 
```

# asp.net - 使用 Html.TextAreaFor 时如何编辑图像的属性？

> ID：14742642
> 
> 赞同：0
> 
> 时间：2013-02-07T02:41:54.983
> 
> 标签：asp.net, asp.net-mvc-3, html-helper, asp.net-controls

我正在使用 TextAreaFor Html 帮助器来编辑内容。现在我将图像插入框中并想修改它的属性，例如宽度、高度……但我没有看到任何按钮或上下文菜单可以帮助我管理它。我如何才能确定启用此功能？

我知道其他一些实现此功能的工具，例如[Telerik 的 RadEditor](http://demos.telerik.com/aspnet-ajax/editor/examples/overview/defaultcs.aspx)。但我只想在这里使用 Html 助手。

真的很感谢任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:27:00.533

如果您尝试实现 WYSIWYG 编辑器，那么您应该尝试以下操作：

KendoUI：[http ://demos.kendoui.c​​om/web/editor/index.html](http://demos.kendoui.com/web/editor/index.html)

或者

TinyMCE：[http ://www.tinymce.com/](http://www.tinymce.com/)

# actionscript-3 - 将变量从一个类的实例传递给另一个类的实例？

> ID：14742645
> 
> 赞同：0
> 
> 时间：2013-02-07T02:42:10.197
> 
> 标签：actionscript-3, variables, game-engine

我正在使用 AS3 和朋友在 FlashPunk 中创建一个小 2D 游戏。我希望我的等级能将几个位置传递给我的玩家，但不知道该怎么做。两者都在 GameWorld 中创建了它们的实例

```
public class GameWorld extends World {

    public function GameWorld() {
        add(new Level);
        add(new Player);
    }

} 
```

它的实例在这里创建：`FP.world = new GameWorld;`

如何从关卡中获取一些变量到玩家？它们都只创建一次。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:10:59.790

您可以在 GameWorld 类中将 Player 声明为公共变量：

```
public class GameWorld extends World {

    public var player:Player;

    public function GameWorld() {
        add( new Level() );

        player = new Player();
        add( player );
    }
} 
```

然后在 Level 类中，您可以通过执行以下操作访问 Player：

```
world.player 
```

# mysql - 从一个表或另一个表中选择列

> ID：14742651
> 
> 赞同：0
> 
> 时间：2013-02-07T02:42:52.683
> 
> 标签：mysql

假设我有两张桌子：

```
CREATE TABLE state (
    id TINYINT,
    state CHAR(2),
    PRIMARY KEY (id)
);

CREATE TABLE valid_state (
    id INT,
    state CHAR(2), # or stateId TINYINT or whatever
    productId INT
); 
```

如果产品只能在 CA 中销售，则它在 valid_state 中只有一个条目。如果它可以在所有州出售，则 valid_state 中不会有任何条目。如果它不能在任何状态下出售，则需要在未定义的产品表中禁用该产品。

我的问题是：如何选择给定产品的所有有效状态？理想情况下，我想从 valid_state 中进行选择，看看它是否为空，如果是，则返回所有状态。不幸的是，我不知道该怎么做。

有任何想法吗？

（另外，fwiw，我没有设计架构，所以建议我改变它并没有太大帮助）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:50:03.360

实现此目的的一种方法是使用`UNION`and `NOT EXISTS`：

```
SELECT DISTINCT S.Id, 
   S.State
FROM State S
   JOIN valid_state V ON S.State = V.State AND V.ProductId = @ProductId
UNION 
SELECT DISTINCT S.Id, 
   S.State
FROM State S
WHERE NOT EXISTS  (SELECT * FROM valid_state WHERE ProductId = @ProductId) 
```

这是示例[Fiddle](http://sqlfiddle.com/#!2/f6d47/1)。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:24:00.897

我想出了一个不同的方法。

我得到了所有的状态，并用第一个 LEFT JOIN 标记了哪些状态对给定的产品有效。

在第二个 LEFT JOIN 中，我获取了产品有效的所有状态并将其连接在一起。如果没有 V.id = V2.id 我会返回 valid_states * 2 行，但有了它我只有我想要的那些。

```
SELECT S.Id, S.State
FROM state S
LEFT JOIN valid_state V
  ON V.state = S.state
    AND productId = @ProductId
LEFT JOIN (state S2, valid_state V2)
    ON V2.productId = @ProductId
        AND S2.state = S.state
WHERE V.id = V2.id OR V2.id IS NULL; 
```

我不知道哪个更好。sgeddes 的 EXPLAIN 显示它正在查看 3*3*3 行，而我的行是 3*3*3*3。但是 sgeddes 在 EXPLAIN 中有五列（其中两列的行为 NULL）并且“使用临时”、“使用连接缓冲区”并且具有“不可能的 WHERE”

有任何想法吗？

# directx - 样本方法的复杂性 HLSL。O（1），O（n）？

> ID：14742653
> 
> 赞同：2
> 
> 时间：2013-02-07T02:43:28.853
> 
> 标签：directx, hlsl, directx-11, directx-9, directx-10

大家好。我想知道是否有人知道 HLSL 纹理采样函数的复杂性，例如 tex2d 和 DX10/11 等效函数。如果纹理所在的像素阵列，它会以恒定的复杂性访问一个像素，但它使用 UV 来访问像素，所以我不知道函数的复杂性。有谁知道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:38:59.510

## O(1)

我不知道 HLSL 采样在内部是如何工作的，但我最近为自定义网格类构建了自己的（工作）采样器。性能上的差异是由插值方法的选择引起的：

### 点采样器

点采样器使用[最近邻插值法](http://en.wikipedia.org/wiki/Nearest-neighbor_interpolation)。当然，这个算法非常高效，因为 UV 只是简单地四舍五入到最接近的整数像素索引。

### 线性采样器

这种产生更好的结果，因为它使用[线性插值](http://en.wikipedia.org/wiki/Linear_interpolation)。假设您的 UV 指向四个像素之间的位置。然后在正方形的顶部像素上执行 lerp，在底部像素上执行另一个，在结果上执行第三个。由于这种过滤涉及四个像素和 12 个浮点插值，它不如点采样快。

### 各向异性采样器

各向异性过滤器产生（当前）最高质量的结果。它是可用类型中最慢的。

* * *

![抽样比较](../Images/6524b80761ca9469fe312bddb28404ef.png)

* * *

*   [纹理过滤 - 维基百科](http://en.wikipedia.org/wiki/Texture_filtering)

# php - php mysqli绑定参数：没有为准备好的语句中的参数提供数据

> ID：14742656
> 
> 赞同：1
> 
> 时间：2013-02-07T02:43:42.707
> 
> 标签：php, mysqli

好的，这是我动态绑定参数的代码。

```
$sql = "INSERT INTO `users` (`name`, `password`, `email`, `permission`) VALUES (?, ?, ?, ?)";
$sql_stmt =  $mysqli->prepare ($sql);

$test = array("ssss","1","2","3","4");

call_user_func_array(array($sql_stmt,'bind_param') ,$test);

$sql_stmt->execute(); 
```

我收到“没有为准备好的语句中的参数提供数据”错误。但是，以下行将起作用。

```
call_user_func_array(array($sql_stmt,'bind_param') ,array("ssss","1","2","3","4")); 
```

我不知道这里发生了什么。

**编辑** 我刚试过做一个

```
echo $sql_stmt->param_count; 
```

我得到了正确的4。

如果我能对此有所启发，那将有很大帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:22:15.907

[阅读PHP 页面中关于 bind_param](http://php.net/manual/en/mysqli-stmt.bind-param.php)的第二个注释。它说`call_user_func_array()`需要通过引用传递参数。所以这应该工作：

```
$arr = array('ssss', '1', '2', '3', '4');
call_user_func_array( array($sql_stmt, 'bind_param'), &$arr ); 
```

# c++ - C++ 静态局部函数与全局函数

> ID：14742664
> 
> 赞同：43
> 
> 时间：2013-02-07T02:45:03.613
> 
> 标签：c++, static, global

在文件中包含静态函数有什么用处？

它们与文件中的全局函数有何不同？

```
static int Square(int i)
{
   return i * i;
} 
```

对比

```
int Square(int i)
{
   return i * i;
} 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-02-07T02:46:56.140

> 在文件中包含静态函数有什么用处？

您可以使用这些函数为同一文件中的其他函数提供共享的实现逻辑。特定于文件的各种帮助函数是声明为文件静态的良好候选者。

> 它们与在文件中具有全局函数有何不同？

它们对链接器不可见，允许其他编译单元定义具有相同签名的函数。使用命名空间在很大程度上缓解了这个问题，但文件`static`函数早于命名空间，因为它们是从 C 编程语言继承的特性。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-02-07T02:46:47.357

`static`函数只是意味着链接器不能导出函数（即使其对其他翻译[单元](http://en.wikipedia.org/wiki/Translation_unit_%28programming%29)可见）。它使功能对当前翻译单元“私有”。这与将函数包装在匿名命名空间中相同。

```
namespace {

    int Square(int i)
    {
       return i * i;
    } 

} 
```

通常，使用匿名命名空间是实现此目的的首选 C++ 方式，而不是使用`static`关键字。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-07T02:47:06.807

静态函数仅在定义它们的文件上可见。您不能在该特定文件之外引用它们。

[在这里阅读更多](http://codingfreak.blogspot.com.ar/2010/06/static-functions-in-c.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-07T02:47:42.790

一句话，联动。`static`函数具有内部链接，也就是说，它们在翻译单元之外是不可见的。

# python - 使用 Google Apps Engine 在 Python 中处理 POST

> ID：14742673
> 
> 赞同：0
> 
> 时间：2013-02-07T02:45:59.327
> 
> 标签：python, google-app-engine, post

我在 Google Apps Engine、Python 上托管我的网站，我正在尝试处理一个简单的联系表单。

这是我的 HTML：

```
<form method="post" action="/email" id="contactForm">  
    <h2>Let's get in touch!</h2>
    Name:<br/>
    <input size=35 name="name" placeholder="Feature coming soon!"><br/>
    Email:<br/>
    <input size=35 name="email" placeholder="Feature coming soon!"><br/>
    Subject:<br/>
    <input size=35 name="subject" placeholder="Feature coming soon!"><br/>
    Message:<br/>
    <textarea name="message" rows=15 cols=50 placeholder="Feature coming soon!"></textarea><br/>
    <input type="submit" name="send" value="Submit">
</form> 
```

在我的 app.yaml 中：

> *   网址：/电子邮件
>     脚本：email.py

这是我的 email.py：

```
from google.appengine.ext import webapp
from google.appengine.ext.webapp.util import run_wsgi_app
from google.appengine.api import mail

class SendEmail(webapp.RequestHandler):
    def post(self):
        name = self.request.post("name")
        email = self.request.post("email")
        tempSubject = self.request.post("subject")
        msg = self.request.post("body")

        if name is None:
            self.response.out.write("Error: You did not enter a name.")
        elif email is None:
            self.response.out.write("Error: You did not enter an email.")
        elif tempSubject is None:
            self.response.out.write("Error: You did not enter a subject.")
        elif msg is None:
            self.response.out.write("Error: You did not enter a message.")
        else:
            _subject = "Msg from: " + name + "Re: " + tempSubject

            message = mail.EmailMessage(sender = "alexyoung1992@alexyoung.us", to = "alexyoung1992@gmail.com", subject = _subject, body = msg, reply_to = email)
            message.send()

application = webapp.WSGIApplication([('/email', SendEmail)], debug=True)
run_wsgi_app(application)
self.redirect('/') 
```

我收到 500 服务器错误：

> 错误：服务器错误
> 
> 服务器遇到错误，无法完成您的请求。如果问题仍然存在，请报告您的问题并提及此错误消息和导致它的查询。

编辑：我更新了我的 Python 脚本并在我的本地机器上调试了所有它。一切运行顺利，但是一旦我尝试在服务器上运行它，我就会遇到同样的错误。你们也可以尝试[自己运行脚本](http://www.alexyoung.us#contact)，看看是否有任何不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T06:22:54.383

Python 使用“和”而不是 && `Name != None && Email != None`

在本地环境中调试会容易得多。并显示错误的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T23:11:03.900

事实证明，服务器没有识别我的一些变量，因为我在某些地方使用空格缩进，在其他地方使用制表符。这是最终代码：

```
import cgi
from google.appengine.ext import webapp
from google.appengine.ext.webapp.util import run_wsgi_app
from google.appengine.api import mail

class SendEmail(webapp.RequestHandler):
    def post(self):
        name = self.request.get('name', '')
        email = self.request.get('email', '')
        tempSubject = self.request.get('subject', '')
        msg = self.request.get('message', '')

        if name is None:
            self.response.out.write("Error: You did not enter a name.")
        elif email is None:
            self.response.out.write("Error: You did not enter an email.")
        elif tempSubject is None:
            self.response.out.write("Error: You did not enter a subject.")
        elif msg is None:
            self.response.out.write("Error: You did not enter a message.")
        else:
            _subject = "Message from: " + name + ", Re: " + tempSubject
            msg += "\n\nI can be reached at "
            msg += email

            message = mail.EmailMessage(sender = "foo@bar.com", to = "bar@foo.com")
            message.subject = _subject
            message.body = msg
            message.send()

            self.redirect('/')

def runApp():
    application = webapp.WSGIApplication([('/email', SendEmail)], debug=True)
    run_wsgi_app(application)

if __name__ == '__main__':
    runApp() 
```

# jquery - 计算屏幕上显示的列表项且不溢出

> ID：14742674
> 
> 赞同：6
> 
> 时间：2013-02-07T02:46:14.187
> 
> 标签：jquery, count, visible

当溢出设置为隐藏时，如何计算屏幕上显示的所有列表项？

使用下面的代码仍然可以计算所有项目，即使是溢出的项目。

```
 var count = $("#myList ul li:visible").length; 
```

小提琴：

[http://jsfiddle.net/kPAwX/2/](http://jsfiddle.net/kPAwX/2/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T02:57:34.350

```
var maxh = $("#myList ul").height();
$("#myList ul li").filter(function () {
    return $(this).position().top + $(this).height() < maxh;
}); 
```

这将选择所有`li`完全可见的 s。如果一个`li`被部分截断，它将被过滤掉。

如果您希望`li`不过滤部分可见的 s，只需删除添加的高度（或以任何您想要的方式创建自己的截断）。

[http://jsfiddle.net/ExplosionPIlls/z6GXA/](http://jsfiddle.net/ExplosionPIlls/z6GXA/)

# mysql - mysql双插入与关系

> ID：14742675
> 
> 赞同：0
> 
> 时间：2013-02-07T02:46:26.420
> 
> 标签：mysql, sql, mysqli, mysql-insert-id, mysqli-multi-query

我是一个 mySQL 新手——通常不会使用超过 INSERT、SELECT 语句...

[在查看了一些类似这个问题](https://stackoverflow.com/questions/151905/best-way-to-make-double-insert)或[这个](https://stackoverflow.com/questions/4808093/insert-values-into-two-related-tables)问题的帖子之后。我不确定我明白了。

**我的（简化的）场景：**

我有两张桌子。

```
Table1 is named "titles" and has 3 columns: id, pagetitle, pages_id
Table2 is named "pages" and has 2 columns: id, content 
```

在一个表单中，我提交了 2 个表单域：`title, content`

现在，我想在每个表中插入每个值，但当然我想确保它`titles.pages_id`与`pages.id`. 两者`titles.id`和`pages.id`都是自动递增的。

**这不是 PHP 问题**

我知道如何使用 PHP 通过制作两个单独的 sql 语句并`mysqli_insert_id()`在第二个查询中使用第一个查询来做到这一点。

但我认为有一种仅使用 SQL 的方式来进行多插入查询……或者有吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:59:52.027

自动增量不会阻止您插入特定的 ID。只需先插入一个表，然后在插入第二个表时使用该 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:56:58.087

经过更多的实验，我想出了这个说法

```
INSERT INTO pages (`content`) VALUES('hello world'); 
INSERT INTO titles (`pagetitle`, `pages_id`) VALUES ('hw page', LAST_INSERT_ID()); 
```

看起来这样做没有问题。它似乎工作正常。

# ios - XCode - 了解分配工具

> ID：14742676
> 
> 赞同：5
> 
> 时间：2013-02-07T02:46:26.407
> 
> 标签：ios, xcode, allocation

在分析应用程序时，我注意到每次执行某些操作（涉及 UIViews）时活动字节都会增加约 250 KB。

查看对象列表，主要（增长的）罪魁祸首只是读作“malloc 144 bytes”。

有时我会使用分配工具来发现我持有的时间超过我想要的对象，但我不确定如何解释“malloc”对象。

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T05:27:06.097

几个想法：

1.  分配工具很棒，但我会首先关注[Leaks](https://developer.apple.com/library/mac/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/MemoryManagementforYouriOSApp/MemoryManagementforYouriOSApp.html#//apple_ref/doc/uid/TP40004652-CH11-SW4)。你那里有干净的健康单吗？

2.  您是否通过静态分析器运行代码（“产品”菜单上的“分析”）。尤其是在非 ARC 代码中，可以识别出许多问题。

3.  你在用ARC吗？如果是这样，那就缩小了搜索范围。

4.  你有没有打开僵尸？这将导致内存不被释放。确保关闭僵尸。

5.  你确定你没有一个强大的参考周期（也就是保留周期）吗？您可以`NSLog`在视图控制器中放置断点或断点，`dealloc`并确保它被调用并确保您没有强引用循环（两个或多个对象之间的循环引用导致两者都不会被释放）。（如果您没有`dealloc`方法，只需添加一个语句。）重复`NSLog`失败是一个很好的例子，它可能会无意中导致强引用循环。关键问题是你必须确认这正在发生。`invalidate``NSTimer``dealloc`

6.  您是否确定弹出/关闭视图控制器而不是推送/呈现另一个视图控制器的另一个副本？（除了前一点讨论的强引用循环之外，还可能导致`NSLog`该方法中看不到 /breakpoint 。）`dealloc`

7.  在您的 256 (!) 图像视图中，您是否正在`imageNamed`设置`image`属性？该`imageNamed`方法缓存图像在您收到内存警告之前不会释放内存（尽管它只会在您检索新图像时消耗内存，而不是重新检索现有图像）。

最重要的是，可能存在大量问题，而您的问题不足以帮助我们诊断问题。你必须帮助我们缩小问题的范围。

但是开始查看你的控制器并确保它们被释放，因为它们应该被释放。我对 144 字节问题感到痛苦`malloc`，但这不太可能是每次消耗 250kb 的罪魁祸首。这`malloc`更有可能是问题的症状，而不是问题的根源，在花太多时间追踪`malloc`电话的来源之前，我会专注于上面列出的更基本的事情。

# r - 如何找到所有可能的离散值和出现

> ID：14742682
> 
> 赞同：2
> 
> 时间：2013-02-07T02:47:15.873
> 
> 标签：r

鉴于：`yi <- c(1,2,4,4,7,7,7,8)`

现在从上述 8 个单位中抽取 4 个单位，进行简单随机抽样，无需放回。

我想找到所有（8 选择 4 =）70 个组合的所有可能离散值以及每个离散值出现的数量。

例如：
t1 = (1,2,4,4) = 11，只发生一次
t2 ...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T03:12:29.220

您可以使用`combinat::combn`：

```
library(combinat)
all.poss <- t(combn(yi, 4))

dim(all.poss)
# [1] 70 4
table(rowSums(all.poss))
# 11 14 15 16 17 18 19 20 21 22 23 24 25 26 29 
#  1  6  2  3  7  4  6 12  6  4  7  3  2  6  1 
```

# ios - SVGKit如何枚举ChildLayersUsingBlock？

> ID：14742694
> 
> 赞同：-1
> 
> 时间：2013-02-07T02:49:04.997
> 
> 标签：ios, svg

使用 SVGKit，我现在正在寻找一些关于如何使用 enumerateChildLayersUsingBlock 方法的示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:06:04.930

我终于找到了一些这样的代码：

```
 CALayer *f = [document layerTree],*x;

    for(int i = 0; i < [f.sublayers count]; i++) {
        x=(CALayer*)[f.sublayers objectAtIndex:i];
        if([x isKindOfClass:[CAShapeLayer class]]) {
            // DO SOME WORK.
        }
    } 
```

它实际上不是 enumerateChildLayersUsingBlock 用法的示例，但它基本上可以满足我的需要。所以这至少会持续一段时间。当我真的需要递归的时候，我会更深入地研究这个主题。

# java - 深度优先搜索遇到 java.lang.OutOfMemoryError

> ID：14742700
> 
> 赞同：2
> 
> 时间：2013-02-07T02:49:52.033
> 
> 标签：java, out-of-memory

当我在无向图上使用深度优先搜索来确定 node1 是否可以到达 node2 时，我遇到了 java.lang.OutOfMemoryError。代码如下所示。（一些不相关的细节将被删除。）

```
 //definition of nodes and edges
    Set<Node> nodes = new HashSet<Node>();
    Map<Node, Set<Node>> edges = new HashMap<Node, Set<Node>>();

    //method to determine if node1 is reachable to node2    
    public boolean isReachable(int p1, MethodNode m1, ClassNode c1, int p2, MethodNode m2, ClassNode c2) {  
            Node node1 = new Node (p1,m1,c1);
        Node node2 = new Node (p2,m2,c2);

            Stack<Node> stack = new Stack<Node>();

        stack.push(node1);
        while(!stack.isEmpty()){

            Node current = null;
            current = stack.pop();
                    //test current node, if its child nodes contains node2, return true
                    //otherwise, push its child nodes into stack
            for(final Node temp : edges.get(current)){
                if(temp.equals(node2)){
                    return true;
                }
                else{
                    stack.push(temp);
                }
            }
        }
        return false;
} 
```

我想一定有一些无限调用内存不足，但我找不到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T02:56:25.653

看起来您的代码很容易追逐自己的尾巴：如果图包含循环，您的代码将耗尽堆栈，因为它在将顶点推入堆栈之前不检查是否已经探索过。

[基本 DFS](http://en.wikipedia.org/wiki/Depth-first_search)要求您维护一组已探索的顶点，并且仅在未探索的情况下探索一个顶点。将此集合添加到您的程序中应该可以解决内存不足的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T02:57:51.107

这就是问题

```
for (final Node temp : edges.get(current)){
    if(temp.equals(node2)){
        return true;
    } else {
        stack.push(temp);
    }
} 
```

这会将所有邻居推入堆栈，然后取其中一个，将其所有邻居推入堆栈（包括您开始的那个），等等无限。您需要将节点标记为已访问，这样就不会发生这种情况。唯一不会出现无限循环的情况是，您要查找的节点与您开始的节点直接相邻，或者路径上的节点以正确的顺序放入堆栈纯粹的机会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T02:56:23.213

使用您的算法，如果图形有一个循环，它将继续将循环的元素推入堆栈，直到内存不足。您需要跟踪哪些节点已经被探索并避免将它们推入堆栈。有几种标准算法可以做到这一点（我想到了A ^(*和 Dijkstra）。)[有关更多信息，请参阅有关深度优先搜索](http://en.wikipedia.org/wiki/Depth-first_search)的 Wikipedia 文章。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T06:42:31.567

尝试使用额外的

> List<Nodes> 遍历 = new ArrayList<Nodes>();

在这种情况下，您可以保留要推送到堆栈的节点。在将其推入堆栈之前执行 1 步

```
if(!traversed.contains(temp)) {
stack.push(temp);
} 
```

# java - 浮动通知对话框 Android

> ID：14742701
> 
> 赞同：1
> 
> 时间：2013-02-07T02:49:52.653
> 
> 标签：java, android, notifications, android-ui

我正在尝试在某种教程阶段创建通知（提示用户单击按钮或指示其功能）。我的（非常粗糙的）模型是这样的：

![在此处输入图像描述](../Images/d44a4f353dba6a8a4f89585f6da604a0.png)

理想情况下，它会漂浮在活动上，并可能停留 2-3 秒（或单击以关闭类型操作）。

我认为这不适用于 Toast（因为它不能真正指向任何东西）。另外，如果我不希望它消失并且只点击关闭（通过单击它指向的 ImageButton 或通知本身），我不能用敬酒来做到这一点。

对话也不起作用。

如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:58:48.580

我认为您可以尝试使用警报对话框？

```
new AlertDialog.Builder(this)
.setTitle("your title")
.setMessage("message you want to show to the user")
.setPositiveButton("Settings",new DialogInterface.OnClickListener() {

public void onClick(DialogInterface dialog,int which) {
//your action to dismiss this dialog

}).show(); 
```

# qt - QWidget 作为视图项（Qt 模型视图控制器）

> ID：14742702
> 
> 赞同：4
> 
> 时间：2013-02-07T02:49:58.147
> 
> 标签：qt, design-patterns, qt4, qwidget, model-view

所以我想要的是一个显示可选小部件的 qlistview（显示按钮的图像和文本的标签（小部件是一个基于 qwidget 的小部件，它具有带有 a`QLabel`和 a的水平布局`QPushButton`））。该模型应该为每个项目存储图像路径和按钮文本（这似乎不是问题）。我成功创建了一个 QListView 派生小部件，但它只显示第一个列表项（这是自定义小部件）并且它是不可选择的。我创建了一个自定义模型、视图和委托，但我不知道该怎么做才能在所有列表项上显示小部件，而不仅仅是首先。这是完整的源代码链接：[SOURCE CODE LINK](http://www.4shared.com/zip/HqTVzqHu/WidgetListView.html)

我用 5 个小部件项目的列表和 1 个小部件项目的列表分别运行应用程序。而且我认为它添加了小部件，但它在第一个上重叠了所有小部件（5 个项目构建在按钮上有更密集的阴影）：

列表中的 5 个小部件： ![使用循环中定义的 5 个小部件项编译和运行小部件](../Images/16758bb6a746818cb4bf6e2154702f8d.png)

列表中的 1 个小部件： ![使用循环中定义的 1 个小部件项目编译和运行小部件](../Images/11b3af9355ee4826c2835c16670e70a3.png)

如您所见，阴影有所不同。

这是代码的另一个副本：

> Delegate.h 下面是代码`delegate`：

```
#include <QtGui>
#include <QAbstractItemDelegate>

class WidgetDelegate : public QAbstractItemDelegate
{
public:
    WidgetDelegate(QObject *parent = 0);

    void paint(QPainter *painter,
               const QStyleOptionViewItem &option,
               const QModelIndex &index) const;

    QSize sizeHint(const QStyleOptionViewItem &option,
                  const QModelIndex &index) const;

}; 
```

> 委托.cpp

```
#include <QtGui>

#include "Delegate.h"
#include "Profile.h"

WidgetDelegate::WidgetDelegate(QObject *parent)
    : QAbstractItemDelegate(parent)
{ }

void WidgetDelegate::paint(QPainter */*painter*/,
                           const QStyleOptionViewItem &/*option*/,
                           const QModelIndex &/*index*/) const
{
}

QSize WidgetDelegate::sizeHint(const QStyleOptionViewItem &/*option*/,
                              const QModelIndex &/*index*/) const
{
    return QSize(ProfileItem().geometry().width(), ProfileItem().geometry().height());
} 
```

> 模型.h

```
#ifndef MODEL_H
#define MODEL_H

#include <QStringList>
#include <QAbstractListModel>
#include <QList>
#include "Profile.h"

class StringListModel : public QAbstractListModel
{
    Q_OBJECT

public:
    StringListModel(const QStringList &strings, QObject *parent = 0)
        : QAbstractListModel(parent), stringList(strings) {}

    int rowCount(const QModelIndex &parent = QModelIndex()) const;
    QVariant data(const QModelIndex &index, int role) const;
    QVariant headerData(int section, Qt::Orientation orientation,
                        int role = Qt::DisplayRole) const;

private:
    QStringList stringList;
};

#endif // MODEL_H 
```

> 模型.cpp

```
#include "Model.h"
#include <QVariant>

int StringListModel::rowCount(const QModelIndex &/*parent*/) const
{
    return stringList.count();
}

QVariant StringListModel::data(const QModelIndex &/*index*/,
                               int /*role*/) const
{
}

QVariant StringListModel::headerData(int /*section*/,
                                     Qt::Orientation /*orientation*/,
                                     int /*role*/) const
{
} 
```

> Prefs.h 包含列表视图的小部件：

```
#ifndef PREFERENCES_H
#define PREFERENCES_H

#include "Model.h"
#include <QDialog>

class QPushButton;
class ProfileItem;
class QVBoxLayout;
class View;
class StringListModel;

class Preferences : public QDialog
{
public:
    Preferences(QWidget *parent = 0);

private:
    QVBoxLayout *m_pVerticalLayout;

    View *myList;
    QPushButton *button;
    ProfileItem *item;
    StringListModel *customModel;
};

#endif // PREFERENCES_H 
```

> 首选项.cpp

```
#include "Profile.h"

#include <QPixmap>
#include <QHBoxLayout>
#include <QBitmap>
#include <QMessageBox>

ProfileItem::ProfileItem(QWidget *parent) :
    QWidget(parent)
{
    pixmap = QPixmap(":/avatar");

    m_avatarImageLabel.setPixmap(pixmap);
    m_avatarImageLabel.setMask(pixmap.mask());
    m_avatarTextButton.setText("Test");
    connect(&m_avatarTextButton, SIGNAL(clicked()), this, SLOT(buttonPushed()));

    m_pHorizontalLayout = new QHBoxLayout;

    m_pHorizontalLayout->addWidget(&m_avatarImageLabel);
    m_pHorizontalLayout->addWidget(&m_avatarTextButton);

    setLayout(m_pHorizontalLayout);
}

void ProfileItem::setAvatarImage(const QString &avatarImage)
{
    pixmap = QPixmap(avatarImage);
    m_avatarImageLabel.setPixmap(pixmap);
    m_avatarImageLabel.setMask(pixmap.mask());
}

void ProfileItem::setAvatarName(const QString &avatarName)
{
    m_avatarTextButton.setText(avatarName);
}

void ProfileItem::buttonPushed()
{
    QMessageBox msg;
    msg.setText("Button was pushed!");
    msg.exec();
} 
```

> Profile.h 必须用作列表项的小部件

```
#ifndef PROFILEITEM_H
#define PROFILEITEM_H

#include <QWidget>
#include <QLabel>
#include <QPushButton>
#include <QPixmap>

class QHBoxLayout;

class ProfileItem : public QWidget
{
    Q_OBJECT

public:
    explicit ProfileItem(QWidget *parent = 0);

public slots:
    void setAvatarImage(const QString &avatarImage);
    void setAvatarName(const QString &avatarName);
    void buttonPushed();

private:
    QPixmap pixmap;
    QLabel m_avatarImageLabel;
    QPushButton m_avatarTextButton;

    QHBoxLayout *m_pHorizontalLayout;

};

#endif // PROFILEITEM_H 
```

> 配置文件.cpp

```
#include "Profile.h"

#include <QPixmap>
#include <QHBoxLayout>
#include <QBitmap>
#include <QMessageBox>

ProfileItem::ProfileItem(QWidget *parent) :
    QWidget(parent)
{
    pixmap = QPixmap(":/avatar");

    m_avatarImageLabel.setPixmap(pixmap);
    m_avatarImageLabel.setMask(pixmap.mask());
    m_avatarTextButton.setText("Test");
    connect(&m_avatarTextButton, SIGNAL(clicked()), this, SLOT(buttonPushed()));

    m_pHorizontalLayout = new QHBoxLayout;

    m_pHorizontalLayout->addWidget(&m_avatarImageLabel);
    m_pHorizontalLayout->addWidget(&m_avatarTextButton);

    setLayout(m_pHorizontalLayout);
}

void ProfileItem::setAvatarImage(const QString &avatarImage)
{
    pixmap = QPixmap(avatarImage);
    m_avatarImageLabel.setPixmap(pixmap);
    m_avatarImageLabel.setMask(pixmap.mask());
}

void ProfileItem::setAvatarName(const QString &avatarName)
{
    m_avatarTextButton.setText(avatarName);
}

void ProfileItem::buttonPushed()
{
    QMessageBox msg;
    msg.setText("Button was pushed!");
    msg.exec();
} 
```

> 查看.h

```
#ifndef VIEW_H
#define VIEW_H

#include <QListView>

class View : public QListView
{
public:
    View();

    void setModel(QAbstractItemModel *model);
    QSize sizeHint();
};

#endif // VIEW_H 
```

> 查看.cpp

```
#include "View.h"
#include "Profile.h"

View::View()
{
    viewport()->setAutoFillBackground(false);
    setSelectionMode(QAbstractItemView::SingleSelection);
}

void View::setModel(QAbstractItemModel* model)
{
    QListView::setModel(model);

    for (int i = 0; i < 5; ++i)
    {
        QModelIndex index = model->index(i, 0);

        ProfileItem* widget = new ProfileItem();
        setIndexWidget(index, widget);
    }
}

QSize View::sizeHint()
{
    return QSize(ProfileItem().width(), ProfileItem().height());
} 
```

谁能帮我用想要的小部件填充所有列表项或告诉我我做错了什么或一些提示？在 qt 中是否可以将小部件作为这种 MVC 样式的列表/表格项？我在任何地方都找不到任何参考来实现这一目标。在 C++ GUI Programming with Qt、Advanced Qt Programming、Introduction to Design Patterns in C++ with Qt 4 和 Internet 上的其他几个地方搜索，但找不到任何相关`QAbstractItemView::setIndexWidget`内容，我认为这是将小部件添加为列表的方法查看项目。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:30:33.787

我认为小部件不是用 setIndexWidget 添加的，而是在委托中创建的。

查看一些示例：
[http ://doc.qt.digia.com/stable/itemviews-spinboxdelegate.html](http://doc.qt.digia.com/stable/itemviews-spinboxdelegate.html)
[http://www.qtforum.org/article/24195/qpushbutton-as-delegate-in-a-qtableview.html](http://www.qtforum.org/article/24195/qpushbutton-as-delegate-in-a-qtableview.html)
[在 Qt 中，如何正确实现委托？](https://stackoverflow.com/questions/851031/in-qt-how-do-you-properly-implement-delegates)

# vba - VBA 组合框样式

> ID：14742705
> 
> 赞同：0
> 
> 时间：2013-02-07T02:50:21.910
> 
> 标签：vba, excel-2007

我有一个 Excel 小界面。我将组合框样式从**fmStyleDropDownCombo 更改**为**fmStyleDropDownList**（我通过 - 右键单击​​ - 属性 - 样式来完成此操作）。现在，我收到一个错误：

> “无法设置 Text 属性。无效的属性值”

在 VBA 的这一行：

```
Worksheets("Sheet1").cmbSX.Text = Worksheets("Sheet2").Cells(9, 10) 
```

在我如上所述更改样式之前，这非常有效（样式的更改使组件无法手动编辑）。关于如何将代码重新调整为这种新样式的任何建议？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:43:31.400

更改`Text`为`Value`

```
Worksheets("Sheet1").cmbSX.Value = Worksheets("Sheet2").Cells(9, 10) 
```

# linqpad - 如何在 LINQPad 中将 using 语句与实体一起使用

> ID：14742708
> 
> 赞同：0
> 
> 时间：2013-02-07T02:50:34.553
> 
> 标签：linqpad

```
 using (MyEntities entities = new MyEntities())
        {

            var coursequery = from course in entities.Course
            select course;
         } 
```

像使用 Visual Studio 一样将此代码输入 LINQPad 并将连接添加到我的自定义实体程序集后，我收到以下错误消息： **在配置中找不到指定的命名连接，不打算与 EntityClient 一起使用提供者，或无效。**

但是，此代码在 Visual Studio 中运行良好。因此，在输入完全相同的代码时，如何让 LINQPad 模拟我在 Visual Studio 中遇到的行为？

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:43:25.540

您是否在 LINQPad 中创建了实体框架连接？如果是这样，LINQPad 会为您实例化数据上下文；您应该做的就是这个（查询语言设置为“C# 表达式”）：

```
from course in Course
select course; 
```

或者更好，只是：

```
Course 
```

或者将查询语言设置为“C# Statements”并执行以下操作：

```
Course.Dump(); 
```

如果它仍然抱怨连接字符串，请确保您在 LINQPad 的连接属性对话框中正确输入了详细信息。

如果您仍想`MyEntities`手动实例化，则需要通过构造函数或应用程序配置文件提供有效的连接字符串，该文件应命名为**linqpad.config**并放在与 LINQPad.exe 相同的文件夹中。

# c - 将 MIPS32 转换为 C：将数组的基地址添加到任意值及其含义

> ID：14742714
> 
> 赞同：1
> 
> 时间：2013-02-07T02:51:17.453
> 
> 标签：c, assembly, mips

我现在正在做家庭作业，我得到了以下信息：

**$s6**是数组**A**的基地址的位置，**$s0**是**f**的值的位置（未指定）。

它希望我将一些指令转换为 C 语句。这是我的问题，因为如果回答了这个问题，我可以很容易地解决这个问题的其余部分：

添加 $t0, $s6, $s0

这是在说`$t0 = (the base address of array A) + f` 还是在说`$t0 = A[0+f]`？

因为如果 A 的基地址是 0x04000000 并且我使用 addi 将 4 添加到该基地址，产生 0x04000004，并将该值分配给 t0，我的意思是 t0 = A[1]（假设我正在存储整数）。

但由于我不知道 f 的值，我不确定如何在 C 中表示它，因为我知道我正在修改索引，但我不知道修改了多少。是否更准确地说（根据上面的说明）：

```
$t0 = A[f/4] 
```

我对这一切都很陌生哈。希望我证明我已经做了一些研究来试图解决这个问题。

谢谢

OSFTW

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:56:17.073

此指令中没有取消引用：

```
add $t0, $s6, $s0 
```

这就像说

```
t0 = s6 + s0; 
```

在类似 C 的伪代码中。或者对于您的示例：

```
t0 = (char *)A + f; 
```

要从 A 中获取值，它看起来像：

```
lw $t1, 0($t0) 
```

完成上一条`add`指令后，`$t0`指向数组中的正确位置。

# php - 意外的括号'[' - PHP

> ID：14742717
> 
> 赞同：4
> 
> 时间：2013-02-07T02:51:41.730
> 
> 标签：php, arrays, explode

我正在为我的小应用程序团队的 Java 代码编写一个小型存储库，我的代码中到处都是这个错误。

```
$base = explode(".", $class)[0]; 
```

每次只有这一行代码才会出现问题*。*据我所知，以上是正确的 PHP 语法，那是怎么回事呢？

**解析错误：语法错误，第****27**行**.../mitc/code/index.php**中的意外 '['

 **如果您想查看错误，请访问[http://chancehenrik.x10.mx/mitc/code/](http://chancehenrik.x10.mx/mitc/code/)以及我网站上的其他地方。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-07T02:52:36.237

这称为数组取消引用，[仅适用于 PHP 5.4](http://php.net/manual/en/migration54.new-features.php) +。无论您遇到该错误，您都可能正在运行 PHP 5.3.x。

[查看基于不同 PHP 版本的结果](http://3v4l.org/ej1ON)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T02:53:19.017

```
$exploded = explode(".", $class);
$base = $exploded[0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T03:14:05.703

要使用旧版本的 PHP (<5.4)，您应该：

```
list($base) = explode(".", $class); 
```

那是：

```
list($a, $b, $c) = array(1, 2, 3); 
```

现在`$a=1`,`$b=2`和`$c=3`.**

# delphi - Delphi 的 Spring 中 GlobalContainer 和 ServiceLocator 有什么区别？

> ID：14742718
> 
> 赞同：5
> 
> 时间：2013-02-07T02:51:48.513
> 
> 标签：delphi, spring4d

他们看起来如此相似。我可以在 GlobalContainer 中注册一些东西：

```
GlobalContainer.RegisterType<TMyImplementation>.Implements<IMyInterface>; 
```

`GlobalContainer`并通过or获取一个实例`ServiceLocator`，它们都可以工作：

```
MyInstance := GlobalContainer.Resolve<IMyInterface>;
MyInstance := ServiceLocator.GetService<IMyInterface>; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T09:52:26.943

用于在需要时解决代码中的`ServiceLocator`依赖关系。在那里，您不想使用对容器的引用，因为这完全违背了丢失耦合代码的目的。

就我个人而言，我同意那些说服务定位器本身是一种反模式的人，应该尽可能地通过注入所有可能的东西来避免这种情况。

# haskell - Haskell 继承：关于它的继承是什么？

> ID：14742721
> 
> 赞同：10
> 
> 时间：2013-02-07T02:52:29.873
> 
> 标签：haskell, inheritance

在[http://en.wikibooks.org/wiki/Haskell/Classes_and_types](http://en.wikibooks.org/wiki/Haskell/Classes_and_types)部分类继承中，我读到“一个类可以从其他几个类继承：只需将所有祖先类放在 => 之前的括号中。”

当“（...）=>”被描述为“继承”时，我感到很困惑。据我所知，这只是一个类约束。它只是说这个新定义的类（在示例中：Real）适用于已经是列出的类（Num 和 Ord）的成员（具有实例）的类型。

简而言之，“(...)=>”在我看来就像一个过滤器，用于筛选可以创建此类实例的类型所需的质量，并且不会增强类或其实例。

我错过了什么吗？“（...）=>”实际上将某些东西从“父母”传递给“孩子”是否有某种意义？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-07T02:59:19.830

实际上，这意味着子类的所有成员都必须提供超类的所有方法。

因此，就像在链接的示例中一样，我们可以编写一个 requires 的方法`Eq`，但只给它一个`Ord`约束，并且这些`Eq`方法对我们来说是隐含的。

（请注意，继承可能是一个糟糕的术语，因为它带有许多在我们的上下文中没有意义的关联。尽管如此，我想我还是解释一下吧。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-04T23:20:05.740

后来回复，@gwideman，我认为你原来的理解是正确的。

**简而言之，“（...）=>”在我看来就像一个过滤器，用于过滤可以创建此类实例的类型所需的质量，并且不会增强类或其实例**

该维基页面的“类继承”是错误的。这是我的理由。在页面中，它说。

**在这里，这意味着一个类型要成为 Ord 的实例，它也必须是 Eq 的实例，因此需要实现 == 和 /= 操作**

如果你运行 ghci，然后输入**:info Ord**，它会显示以下信息：

```
class Eq a => Ord a where
  compare :: a -> a -> Ordering
  (<) :: a -> a -> Bool
  (<=) :: a -> a -> Bool
  (>) :: a -> a -> Bool
  (>=) :: a -> a -> Bool
  max :: a -> a -> a
  min :: a -> a -> a
  {-# MINIMAL compare | (<=) #-} 
```

[https://downloads.haskell.org/~ghc/7.8.1/docs/html/users_guide/pragmas.html](https://downloads.haskell.org/~ghc/7.8.1/docs/html/users_guide/pragmas.html)，用于解释“MINIMAL”

看看“ **MINIMAL** ”，它说，Ord 的实例只需要实现比较**或**(<=)，这意味着，您不需要“实现 == 和 /= 操作”。只有多态 'a' 需要实现 == 或 /= （检查 Eq 的 MINIMAL pragmas）

(...)=> 是类型类约束，而不是 Java 之类的接口继承。

# jquery - jQuery - 在悬停时使用标题属性作为文本，但只能在同一个父级中

> ID：14742725
> 
> 赞同：1
> 
> 时间：2013-02-07T02:52:40.063
> 
> 标签：jquery

需要一些帮助来提出这个 jQuery，有一次我几乎让它工作，除了标题被放置在`<p class="category-flag-text"></p>`页面上的每个文本中，不仅仅是在文章中，而且甚至无法回到那个点。

当悬停在`.category-icons a`我想在同一父文章中使用`.category-icons a`作为文本的标题属性时。`<p class="category-flag-text"></p>`

```
<article class="post-1">
  <div class="category-flags">
    <p class="category-flag-text"></p>
  </div>

  <div class="category-icons">
    <a href="http:/www..." title="Category One">
      <img src="http:/www..." alt="Category One" title="Category One">
    </a>
    <a href="http:/www..." title="Category Two">
      <img src="http:/www..." alt="Category Two" title="Category Two">
    </a>
  </div>
</article>

<article class="post-2">
  <div class="category-flags">
    <p class="category-flag-text"></p>
  </div>

  <div class="category-icons">
    <a href="http:/www..." title="Category One">
      <img src="http:/www..." alt="Category One" title="Category One">
    </a>
    <a href="http:/www..." title="Category Two">
      <img src="http:/www..." alt="Category Two" title="Category Two">
    </a>
  </div>
</article> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:02:42.547

非常坦率的。只需用于`$(this).closest('article')`定位最近的文章祖先。然后，你可以找到`<p>`你想要的。

```
$(".category-icons a").on('mouseover', function () {
    $(this).closest('article').find('.category-flag-text')
        .text($(this).attr('title'));
}).on('mouseout', function () {
    $(this).closest('article').find('.category-flag-text').text('');
}); 
```

[http://jsfiddle.net/ExplosionPIlls/bnB5h/](http://jsfiddle.net/ExplosionPIlls/bnB5h/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T03:07:11.590

您可以像这样使用[.closest()](http://api.jquery.com/closest/)：

```
$(function(){
  $('.category-icons a').hover(function(){
    $(this).closest('article').find('p.category-flag-text').text($(this).prop('title'));
  }, function(){
    $(this).closest('article').find('p.category-flag-text').html('');
  });
}); 
```

演示：http: [//jsbin.com/akoton/1/edit](http://jsbin.com/akoton/1/edit)

# c++ - 没有锁的线程之间的并发？

> ID：14742726
> 
> 赞同：-1
> 
> 时间：2013-02-07T02:52:49.120
> 
> 标签：c++, c, multithreading, operating-system, thread-safety

我被问到如何在不使用锁的情况下实现线程之间的并发，给定无限的内存。我尝试查找它，但找不到不使用任何锁的答案。这应该是可能的...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:59:44.867

大多数现代 CPU 支持一组原子操作，可用于协调对数据的无锁访问（这些 CPU 指令通常用于实现锁定库函数）。例如，Sun Ultrasparcs 有一条比较与交换 (CAS) 指令：要使用它，您首先通常将内存地址读入 CPU 寄存器，然后计算所需的新值，然后使用 CAS - 指定原始值和新值；当且仅当内存内容仍然是原始值时，新值才会写入该内存。因此，这并不能防止竞争条件导致您的更新尝试失败，但它可以让您检测到该失败，然后确定如何处理它。通常，

这可能有点令人困惑，所以让我们举一个更具体的例子。假设您需要计算所有线程完成的操作数 - 您可以在线程启动之前将计数器设置为 0，然后让每个线程使用`do { read/add-1/CAS } while (failure)`逻辑来增加计数器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T03:11:41.220

您可以查看软件事务内存 (STM)。线程可以通过可以检查冲突的事务来更新共享内存，而不是锁定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T03:06:50.787

如果线程要么：

*   不要共享任何数据或
*   共享数据，但只从共享的数据中读取而不写入。

但是，一旦写入共享数据，事情就会变得复杂。这是您需要[开始阅读的地方](http://www.1024cores.net/home/lock-free-algorithms/introduction)。

# php - mysql if not null 查询未运行

> ID：14742727
> 
> 赞同：0
> 
> 时间：2013-02-07T02:52:52.680
> 
> 标签：php, mysql

我在验证 mysql 中的重复条目时遇到了一些问题，而不是返回与已经缩短的记录相关的链接，它创建了一个新记录，知道为什么会发生这种情况吗？这是代码

```
$url = get_magic_quotes_gpc() ? stripslashes(trim($_REQUEST['cf_url'])) : trim($_REQUEST['cf_url']);

function remove_http($url) {
   $disallowed = array('http://', 'https://');
   foreach($disallowed as $d) {
      if(strpos($url, $d) === 0) {
         return str_replace($d, '', $url);
      }
   }
   return $url;
}
$id = rand(10000,99999);  
$short = base_convert($id, 20, 36);

$short_url = $short;
$private_url = md5($short);

$result = mysql_query("SELECT * FROM ' . DB_TABLE . ' WHERE original_url = ".mysql_real_escape_string(remove_http($url))."");
$num_rows = mysql_num_rows($result);

if ($num_rows > 0) {

$results = mysql_query("SELECT * FROM ' . DB_TABLE . ' WHERE original_url = ".mysql_real_escape_string(remove_http($url))."");
$object = mysql_fetch_assoc($results);
echo "http://" . BASE_HREF . $object['short_url'];

} else {

mysql_query('LOCK TABLES ' . DB_TABLE . ' WRITE;');
mysql_query('INSERT INTO ' . DB_TABLE . ' (original_url, short_url, private_url, created_on, created_by) VALUES ("' .mysql_real_escape_string(remove_http($url)) . '", "' . $short_url . '", "' . $private_url . '", "' . time() . '", "' . mysql_real_escape_string($_SERVER['REMOTE_ADDR']) . '")');
mysql_query('UNLOCK TABLES');

echo "http://" . BASE_HREF . $short_url;
}

mysql_close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:07:57.793

我认为您的查询可能在以下代码的第一个实例中失败

```
$result = mysql_query("SELECT * FROM ' . DB_TABLE . 
' WHERE original_url = ".mysql_real_escape_string(remove_http($url))."");
$num_rows = mysql_num_rows($result); 
```

因为您将 original_url 作为`string`值，所以您应该使用单引号/双引号传递，请尝试使用以下代码

```
$result = mysql_query("SELECT * FROM " . DB_TABLE .
" WHERE original_url = '".mysql_real_escape_string(remove_http($url))."'") 
or die("Error in SQL ".myql_error());
$num_rows = mysql_num_rows($result); 
```

此外，如果发现记录> 0，则无需检索相同的数据，您可以利用先前查询的资源获取所需的数据以返回短 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:50:37.030

由于 mysql_* 的停产，我在 PDO 中重新编写了整个内容，现在可以正常工作了。

# mysql - 使用多个表mysql

> ID：14742730
> 
> 赞同：0
> 
> 时间：2013-02-07T02:53:11.453
> 
> 标签：mysql, multiple-tables, updating

好的，所以我有 3 张桌子

1.phone: id name 制造商id osid

2.manufacturermanufacturerid制造商名称

3.os osid osname

每次我想上传第一个表时，我如何将其中一个表（manufacturerid1 ->manufacturid2 和 osid1>osid2）中的数据放到第一个表中...

我什至不确定我问的问题是否正确，我只想为制造商制作一张表格，因此当我显示制造商名称时，我单击其中一个名称，然后出现属于该制造商/操作系统的每部电话.

另外，我如何通过 php 更新数据（我的完整电话表更长，而我不需要更多表来使用的数据）

这是我在意识到我需要制造商（品牌）和操作系统（操作系统）表之前使用的脚本，因此当我通过其中一个显示它们时，不会弹出更多同名制造商。

```
 <?php
 include 'connect.php';
 mysql_select_db("phone", $connect);

 $id = $_POST['ID'];
 $name = $_POST['name'];
 $stock = $_POST['stock'];
 $brand = $_POST['brand'];
 $operatingsystem = $_POST['operatingsystem'];
 $camera = $_POST['camera'];
 $handset = $_POST['handset'];
 $screen = $_POST['screen'];
 $connectivity = $_POST['connectivity'];
 $batterylife = $_POST['batterylife'];
 $memory = $_POST['memory'];
 $messaging = $_POST['messaging'];
 $soundformat = $_POST['soundformat'];
 $price = $_POST['price'];
 $flag= $_POST['flag'];

 $sql = "UPDATE phone SET name='$name', stock='$stock', brand='$brand',   operatingsystem='$operatingsystem', camera='$camera', handset='$handset', screen='$screen', connectivity='$connectivity', batterylife='$batterylife', memory='$memory', messaging='$messaging', soundformat='$soundformat', price='$price', flag='$flag' WHERE ID='$id' ";

 if (!mysql_query($sql,$connect))
 {
 die('Error: ' . mysql_error());
 }
 echo "<h1>1 record was just updated in the database.</h1>";

 mysql_close($con);

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:16:14.297

"I'm not even sure im asking the right question, all i want is to make a table for a manufacturer so when i display the manufacturer names, i click on one of the names and every phone that belongs to that manufacturer/os shows up."

In that case to make things easy on yourself, have one table called phones, one table called manufacturer and one table that links the phone to the manufacturer (and possibly another table for O/S ?)

```
Manufacturer table:
manufacturerID
name
otherData
moreData

Phone table:
phoneID
name
phoneData

OS Table:
osID
name
osData

Link Table:
phoneID
osID
manufacturerID 
```

Perform all of your searches on the link table, then simply retrieve the information you want from the other tables.

# android - 使用 3rd 方搜索意图的不稳定性

> ID：14742733
> 
> 赞同：0
> 
> 时间：2013-02-07T02:53:20.063
> 
> 标签：android, android-intent, intentfilter

我有一个应用程序已经发布了近一年，它利用了 3rd 方应用程序的搜索意图。只要 3rd 方应用程序在内存中，搜索就可以很好地工作。但是，如果 Android 出于某种原因终止了该应用程序，我的应用程序就会崩溃。我最近实现了一种可以确定第 3 方应用程序是否正在运行的方法，该方法几乎解决了这个问题（尽管，Android 仍然可以在我测试和启动搜索意图之间杀死第 3 方应用程序）。

我调用的第 3 方应用程序相当大，需要 10 秒左右才能启动。如果我过早使用搜索意图，两个应用程序都会崩溃。我似乎无法捕获异常，但这不是我关心的问题。我的问题是：有没有人知道可以采用的方法（除了 Thread.sleep）可以保证 a）我的应用程序可以确定搜索意图是否“可用”（尽管这是我真正想知道的）考虑到意图的工作方式，这听起来像是胡说八道）或b）我可以捕获这种失败的一种方式（我尝试过 UncaughtExceptionHandler 没有成功）。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:09:02.913

我相信这实际上是由于内存不足而导致 android o/s 杀死应用程序的问题。

# python - Python，简单的FTP上传.txt

> ID：14742734
> 
> 赞同：0
> 
> 时间：2013-02-07T02:53:22.883
> 
> 标签：python

我真的很难将一个简单的`.txt`文件上传到 FTP 服务器。我的桌面上有一个文件夹，其中包含两个文件：`text.txt`和`upload_to_ftp.py`.

我试过这些：
[FTP文件上传](http://love-python.blogspot.com.au/2008/02/ftp-file-upload.html)
[Python脚本通过FTP上传文件](https://stackoverflow.com/questions/12613797/python-script-uploading-files-via-ftp)
但似乎都不起作用。

我已经重写了很多次代码，我一直在努力，我不断收到错误，例如：

```
sftp = ftplib.FTP('REMOTEFTPSITE.com', 'MYUSERNAME', 'MYPASSWORD')
File "C:\Python27\lib\ftplib.py", line 117, in __init__
self.connect(host)
File "C:\Python27\lib\ftplib.py", line 135, in connect
self.welcome = self.getresp()
File "C:\Python27\lib\ftplib.py", line 210, in getresp
resp = self.getmultiline()
File "C:\Python27\lib\ftplib.py", line 196, in getmultiline
line = self.getline()
File "C:\Python27\lib\ftplib.py", line 183, in getline
line = self.file.readline()
File "C:\Python27\lib\socket.py", line 447, in readline
data = self._sock.recv(self._rbufsize)
error: [Errno 10054] An existing connection was forcibly closed by the remote host 
```

任何帮助都会很棒！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:07:28.370

确保您确实在此行中提供了服务器、用户名和密码：

```
sftp = ftplib.FTP('REMOTEFTPSITE.com', 'MYUSERNAME', 'MYPASSWORD') 
```

# php - 在外部页面上包含 wordpress 正在扼杀 pagespeed - 有什么想法吗？

> ID：14742747
> 
> 赞同：1
> 
> 时间：2013-02-07T02:55:51.437
> 
> 标签：php, performance, wordpress

我正在使用 php 函数在我的主页上包含来自我的博客页面 (wordpress) 的最新帖子的片段，这不是 wordpress。我使用的实际代码是：

```
<?php
// Include WordPress 
define('WP_USE_THEMES', false);
require('./fitness_blog/wp-load.php');
query_posts('showposts=1');
?>
<?php while (have_posts()): the_post(); ?>
<blockquote><h2><?php the_title(); ?></h2>
<a href="<?php the_permalink() ?>"><?php the_post_thumbnail( 'thumbnail', $attr ); ?> </a>
<p style="color:#3FF;"> <?php twentyten_posted_on(); ?> </p>

<?php the_excerpt(); ?>

<?php endwhile; ?> 
```

我在页面上的任何地方都没有任何其他 php...甚至在顶部、标题等中也没有。页面的 url 是[http://www.uniconutrition.com](http://www.uniconutrition.com)。当我从页面中删除此代码时，它加载 SOO 的速度要快得多，所以我知道这是它的权重。有任何想法吗？非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T03:11:19.790

Wordpress 不是轻量级的，您正在加载整个环境以仅显示一个帖子。您有几个选项可以加快速度。

1.  在不加载 wordpress 环境的情况下手动查询数据库以获取最新的 wordpress 帖子。

2.  将所有这些代码包装在输出缓冲区中，并将帖子缓存到带有时间戳的文件中。检查文件及其在页面加载时的时间戳。如果它不存在，或者超过 5 或 10 分钟，或者您经常更新博客、加载 wordpress、呈现帖子并将其缓存到文件中。

我可能会选择选项 1，但任何一个都会产生巨大的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:59:33.420

您应该考虑编写一个将 AJAX 侦听器挂钩添加到 WordPress 的插件。然后，您可以发送/接收一个小的 JSON 数据包并获得所需的内容，让 WordPress 在单独的线程上运行。

WordPress Codex 上有很多关于编写简单 AJAX 侦听器插件的示例。

# bash - 如何获取一个字符串并将其按字母顺序排列并计算其中的单词数？

> ID：14742756
> 
> 赞同：1
> 
> 时间：2013-02-07T02:57:18.440
> 
> 标签：bash

基本上我的问题是这样的，我有一个由句点分隔的字符串，我希望能够在新行上打印每个单词以及它旁边出现的次数。

这是我已经拥有的：编辑：

```
#!/bin/bash
PARAM=$1 
FILE=${1-test.txt}
#echo $FILE

temp=$( tr '\n' '.' <$FILE )

arr=$(echo $temp | tr "." "\n")

for x in $arr
do
    echo "$x"
done 
```

所有这一切都是在一行上打印出每个单词。现在我需要计算每个单词出现的次数，然后在单词旁边打印出来。例如：

临时内容=苹果，梨，苹果，桃子

输出应该是：

```
apple 2
pear 1
apple 2
peach 1 
```

每个单词都在一个新行上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:12:42.943

`uniq(1)`大概可以做你想做的事。例如：

```
$ echo 'foo.bar.baz.bar.foo.box.foo' | tr '.' '\n' | sort | uniq -c
      2 bar
      1 baz
      1 box
      3 foo
$ 
```

请注意，`uniq`需要排序输入才能正确计算出现次数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T03:13:27.740

您可以在 awk 中执行此操作。给定一个看起来像这样的文件：

```
this.is.a.test
and.this.is.test2
and.this.is.test3 
```

以下 awk 将为您提供单词及其计数

```
awk 'BEGIN{
        FS="."
    }
    {
        for(i=1;i<=NF;i++){
            a[$i]++
        }
    } 
    END{ 
        for(word in a)print word, a[word]
    }' 
```

将产生以下输出：

```
test 1
a 1
test2 1
test3 1
and 2
this 3
is 3 
```

# mysql - 如何使 Navicat mySQL (Non-Commercial) 表默认为 InnoDB 引擎？

> ID：14742764
> 
> 赞同：2
> 
> 时间：2013-02-07T02:58:55.693
> 
> 标签：mysql, innodb, myisam, navicat

我有 Navicat mySQL 非商业版。每当我创建表时，它默认为每个新表的 myISAM 存储引擎，如何使表默认为 InnoDB 引擎，而不必为每个新表创建显式选择这些？

我试图让它成为 Navicat 上的默认引擎，而无需导航到任何配置文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:06:04.553

这不会有 Navicat 设置。*默认存储引擎*实际上是 MySQL 服务器上的配置。

默认的标准值是 MyISAM，但[可以更改](http://dev.mysql.com/doc/refman/5.1/en/storage-engine-setting.html)。这需要更改整个服务器的默认值（如果您不拥有数据库服务器，您可能无法这样做）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-20T19:37:39.000

在创建数据库/表的脚本顶部使用此标志：

```
SET storage_engine=INNODB; 
```

请参阅[MySQL 设置存储引擎](https://dev.mysql.com/doc/refman/5.1/en/storage-engine-setting.html)

# python - 使用 django 发出 ajax get 请求

> ID：14742765
> 
> 赞同：2
> 
> 时间：2013-02-07T02:58:57.267
> 
> 标签：python, ajax, django, jquery-get

试图简单地对我的视图进行 ajax 调用并取回模板 html。

```
$(document).ready(function () {

    $.ajax({
        url:url,
        data:{language:'English'},
        dataType:'html',
        success:function (data, status, xhr) {
            alert('works yea');
            $('#profiles-section').html(data);
        }
       error: function(data){
            alert('errors');
        }
    });
}); 
```

我已验证的测试视图从未调用过正确的 url，我设置了断点并且没有任何反应，我在进行 ajax 调用之前提醒客户端的 url，它应该与我在我的 url 中定义的内容相匹配.py。

```
def teset_view(request, username):
   template = 'profiles_view.html'
   return render_to_response(template,
        context_instance=RequestContext(request)) 
```

我错过了一些简单的事情吗？

更新：

我添加了错误以查看它是否会出错并且我收到此警报，我怎样才能弄清楚为什么会出现这样的 jquery 错误。我没有任何其他相互冲突的地方可以交叉引用

看起来我遇到了一个 jqXHR 状态总是返回零

```
error: function(jqXHR, exception) {
            if (jqXHR.status === 0) {
                alert('Not connect.\n Verify Network.');
            } 
```

我能做些什么来解决这个问题，我尝试`e.preventDefault`在点击方法的末尾添加一个

更新

我的网址是这样设置的

```
url(r'^profiles/(?P<username>[\w.@+-]+)/$','Taleebo.views.profiles_view',name="profiles"), 
```

，我添加了 getCookie() javascript 安全方法，因此我可以发出正确的 ajax 请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:51:27.863

你有一些错误。安装**萤火虫**，你会看到他们在哪里！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T03:29:34.277

逆天。发现我的链接正在取消 ajax 请求。

只需`return false`在点击方法修复它之后添加。

# swing - 在 Eclipse 中使用窗口生成器

> ID：14742770
> 
> 赞同：0
> 
> 时间：2013-02-07T02:59:20.407
> 
> 标签：swing

我在eclipse中使用windows builder来创建一个swing应用程序。但是我观察到自动生成的代码让我有点困惑。

```
 test frame = new test();
       frame.setVisible(true);

public test() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 450, 300);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new BorderLayout(0, 0));
        setContentPane(contentPane);
    } 
```

我一直认为我们需要创建一个 JFrame 并将面板添加到其中。但是这里的eclipse似乎使用构造函数创建了一个测试对象，然后在一个类对象上调用frame.setVisible，它似乎工作正常。我认为必须始终在 Jframe 上调用 frame.setVisible()。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:03:50.907

这个`test`类是一个`JFrame`类定义，你会发现它是继承`JFrame`的，所以这应该可以消除你的困惑。

# tsql - 如何将表连接到两个单独的分组子查询？

> ID：14742771
> 
> 赞同：0
> 
> 时间：2013-02-07T02:59:22.897
> 
> 标签：tsql

所以这是一个非常奇怪的情况，但我需要弄清楚如何加入两个 select 语句。我有两个选择语句返回一个“文件键”（员工标识符）列表，就是这样，每一个都只是一列，我想返回一个包含所有文件键的列表。可以有重复，也可以不重复，这对我来说并不重要。

现在通常我只会调整我的 where 语句中的内容，但我无法让它工作，所以也许这就是答案，这里是（一个非常基本的版本）正在发生的事情

```
select yt.filekey from EMPLOYEES yt
inner join (
select filekey, SUM(hours) as test 
from PAYDESHIST 
where WG2 = 1
and eventdate between (date1) and (date2)
group by filekey having SUM(hours) > 40)
ss on yt.FILEKEY = ss.FILEKEY 
```

其中有第二个日期不同

基本上我需要看看员工是否在两周的一个或多个星期内工作超过 40 小时。员工在这两周内工作时间是否超过 40 小时都没关系，稍后将全部过滤到一个列表中。

我已经尝试过完全加入，但对于其中一周工作超过 40 小时的每个员工，我都会得到空值。

请帮忙！谢谢

此外，代码中可能有几个错误，这不是问题，错误是因为实际调用要花更长的时间来获取这些日期和各种疯狂的东西，所以在复制它时我可能错过了括号什么的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:40:37.537

答案似乎是这样的：

```
select yt.filekey from EMPLOYEES yt
inner join (
    select filekey, test from (
        select filekey, SUM(hours) as test 
        from PAYDESHIST 
        where WG2 = 1
        and eventdate between (date1) and (date2)
        group by filekey having SUM(hours) > 40)
        ss on yt.FILEKEY = ss.FILEKEY)
        union all
        select filekey, SUM(hours) as test 
        from PAYDESHIST 
        where WG2 = 1
        and eventdate between (date3) and (date4)
        group by filekey having SUM(hours) > 40)
        ss on yt.FILEKEY = ss.FILEKEY)
    )
) 
```

根据我们的评论讨论

# wordpress - 具有不同数据库的 Heroku 和 localhost 上的 Wordpress：无法登录 Heroku WP 仪表板

> ID：14742777
> 
> 赞同：1
> 
> 时间：2013-02-07T03:00:06.520
> 
> 标签：wordpress, heroku, xeround

正如（长）标题所暗示的，我有一个 Wordpress 博客，它在 localhost 上运行用于开发，而在 Heroku 上运行用于生产。我修改了`wp-config`文件，以便当站点在 localhost 上时，它会拉出一个本地数据库，而在 Heroku 上它会拉出一个 Xeround 数据库。

我可以在 localhost 上正常登录，但我不能在 Heroku 版本上登录。

当我进入`http://myappname.herokuapp.com/wp-login.php`并输入信息时，它只会刷新页面。

奇怪的是，当我转到`http://myappname.herokuapp.com/wp-admin`它时，它会自动重定向到`http://myappname.herokuapp.com/wp-login.php?redirect_to=http%3A%2F%2Fmyappname.herokuapp.com%2Fwp-admin%2F&reauth=1`输入信息后，它会重定向到我卡在上面的登录屏幕。

我努力了：

*   在我的 wp-config 中设置`WP_HOME`和选项。`WP_SITEURL`
*   在我各自的数据库中设置上述字段
*   弄乱`.htaccess`文件

在这件事上的任何帮助将*不胜*感激！我想不通这个！

# java - 怎么做！=对于字符串

> ID：14742781
> 
> 赞同：6
> 
> 时间：2013-02-07T03:00:53.903
> 
> 标签：java, string, compare

我正在用java编写一个程序，它一切都很好，直到我想做一个像这样的while循环：

`while(String.notEqual(Something)){...}`

我知道没有像 notEqual 这样的东西，但有类似的东西吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-07T03:02:30.797

使用 ！句法。例如

```
if (!"ABC".equals("XYZ"))
{
// do something
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T03:02:41.450

`.equals`与 not 运算符结合使用`!`。来自[JLS §15.15.6](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.15.6)，

> 一元运算符的操作数表达式的类型`!`必须是 `boolean`or `Boolean`，否则会发生编译时错误。
> 
> 一元逻辑补码表达式的类型是`boolean`。
> 
> 在运行时，如有必要，操作数会进行拆箱转换（第 5.1.8 节）。一元逻辑补码表达式的值是 `true`如果（可能转换的）操作数值为`false`，并且`false`（可能转换的）操作数值为`true`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T03:03:46.307

```
String a = "hello";
String b = "nothello";
while(!a.equals(b)){...} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T03:03:57.573

```
String text1 = new String("foo");
String text2 = new String("foo");

while(text1.equals(text2)==false)//Comparing with logical no
{
   //Other stuff...
}

while(!text1.equals(text2))//Negate the original statement
{
   //Other stuff...
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T03:32:48.100

如果您想要区分大小写的比较使用`equals()`，否则您可以使用`equalsIgnoreCase()`.

```
String s1 = "a";
String s2 = "A";

s1.equals(s2); // false

if(!s1.equals(s2)){
  // do something
}

s1.equalsIgnoreCase(s2); // true 
```

在某些情况下（例如排序）有用的字符串比较的另一种方法是使用`compareTo`which`0`如果字符串相等，`> 0`如果 s1 > s2`< 0`否则返回

```
if(s1.compareTo(s2) != 0){ // not equal

} 
```

还有`compareToIgnoreCase`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T03:02:41.973

```
while(!string.equals(Something))
{
   // Do some stuffs
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-07T03:08:23.400

没有这样的东西叫做 notEquals 所以如果你想否定使用！

```
while(!"something".equals(yourString){
//do something
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-07T08:45:56.407

如果您在循环中更改了字符串，最好考虑 NULL 条件。

```
while(something != null && !"constString".equals(something)){
     //todo...
} 
```

# c - C99 fesetround()/fegetround() 状态是每个线程还是每个进程？

> ID：14742784
> 
> 赞同：3
> 
> 时间：2013-02-07T03:01:09.993
> 
> 标签：c, floating-point, thread-safety, c99, c11

我在网上找到的 C 和 POSIX 参考资料没有指定 C99 的 fesetround() 的线程安全性。甚至 GNU 文档也没有[1]。状态是每个线程还是每个进程？

[1] [https://www.gnu.org/software/hello/manual/libc.html#Rounding](https://www.gnu.org/software/hello/manual/libc.html#Rounding)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T03:01:09.993

C11 定义了线程和 fesetround()，回答它是每个线程的。（这是唯一合理的答案，但必须说明。）

草案 N1570 [1] 第 7.6.2 节：“浮点环境具有线程存储持续时间。线程的浮点环境的初始状态是当时创建它的线程的浮点环境的当前状态的创造。”

[1] [http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)

# apl - APL 中的圆函数列表是什么？

> ID：14742788
> 
> 赞同：3
> 
> 时间：2013-02-07T03:01:26.483
> 
> 标签：apl

根据[http://www.microapl.co.uk/apl/APL1_2.PDF](http://www.microapl.co.uk/apl/APL1_2.PDF)，¯12 和 12 之间有圆函数。例如，函数 1、2 和 3 分别`sin`是 、`cos`和`tan`。我在[这个参考资料](http://www.microapl.co.uk/apl_help/ch_020_020_240.htm)中发现了什么是函数¯7 到 7。但是，我没有找到函数 8 到 12（及其倒数）是什么。有人能指出它们是什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T07:32:17.230

我查看了 APL X 的参考资料，但找不到左侧参数的描述，它允许最大范围为 -12 到 12。您从哪里读到有这个值范围的？

Dyalog APL 允许从 -12 到 12 的范围，这是 Dyalog APL 参考中的引述：

> R ← X ○ Y  
> 
> Y 必须是数字。X 必须是 ¯ 12 ≤ X ≤ 12 范围内的整数 R 是数字。

也许您混淆了 APL X 和 Dyalog APL。

这些是 X 的每个值的（Dyalog）操作

```
(-X) ○ Y            |  X |  X ○ Y  
--------------------+----+--------------
(1-Y*2)*.5          |  0 | (1-Y*2)*.5 
Arcsin Y            |  1 | Sine Y 
Arccos Y            |  2 | Cosine Y 
Arctan Y            |  3 | Tangent Y 
(Y+1)×((Y-1)÷Y+1)*.5|  4 | (1+Y*2)*.5 
Arcsinh Y           |  5 | Sinh Y 
Arccosh Y           |  6 | Cosh Y 
Arctanh Y           |  7 | Tanh Y 
-8○Y                |  8 | (-1+Y*2)*0.5 
Y                   |  9 | a 
+Y                  | 10 | |Y 
b×0J1               | 11 | b 
*Y×0J1              | 12 | θ 
```

> X 从下表中确定将三角函数、双曲函数、毕达哥拉斯函数和复数函数中的哪一个应用于 Y。
> 
> 请注意，当 Y 为复数时，a 和 b 用于表示其实部和虚部，而 θ 表示其相位。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-10T21:54:53.123

在他的“APL 字典”中，艾弗森定义了更多，从 -15 到 15： http: [//www.jsoftware.com/papers/APLDictionary1.htm#circle](http://www.jsoftware.com/papers/APLDictionary1.htm#circle)

# php - 带有 JSON 和 PHP 的 AJAX 不返回任何数据......我认为

> ID：14742789
> 
> 赞同：1
> 
> 时间：2013-02-07T03:01:34.870
> 
> 标签：php, javascript, jquery, ajax

为什么我的代码不起作用？

我知道我正在发送数据，

但是没有回应。

## jQuery

```
 $(document).ready(function(){
            $("form").submit(function () {

                var uname = document.getElementById("username").value;
                var pword = document.getElementById("password").value;
                var postData = {
                    username: uname,
                    password: pword
                };
                var PostDataString = JSON.stringify(postData);
                alert(PostDataString);

            $.ajax({
               url: "test.php",
               type: "GET",
               data: PostDataString,
               dataType: 'json',
               contentType: 'json',
               cache: false,
               success: function (ReturnData) {
                    alert("Yay!");
               } 
            });
    });
    }); 
```

* * *

## PHP

```
$json = $_GET["PostDataString"];
$jsonarray = json_decode($json, true);
echo $jsonarray; 
```

* * *

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T03:04:13.527

`json_decode`用于将 JSON 字符串转换为 PHP 结构。 `json_encode`做相反的事，是你想要的。您期望在 JavaScript 端使用 json 数据类型；如果在这种情况下 jQuery 没有得到有效的 JSON，它会抛出一个错误。

`JSON.stringify`转换是不必要的，因为它的属性`$.ajax`接受一个 JavaScript 对象。`data`事实上，对 JSON 进行字符串化可以防止它作为任何参数发送。

如果您删除并按原样`JSON.stringify`发送。`postData`您可以访问`$_GET['username']`和`$_GET['password']`，但不能访问其他人。

# c++ - 从 python 到 c++ 的 SEGUID

> ID：14742790
> 
> 赞同：0
> 
> 时间：2013-02-07T03:01:39.977
> 
> 标签：c++

我正在尝试在 C++ 中执行此操作，我在 Python 中有一些代码，但我不知道如何使它在 C++ 中工作

```
def seguid(seq):

    try:
        #Python 2.5 sha1 is in hashlib
        import hashlib
        m = hashlib.sha1()
    except:
        #For older versions 
        import sha
        m = sha.new()
    import base64
    try:
        #Assume its a Seq object
        seq = seq.tostring()
    except AttributeError:
        #Assume its a string
        pass
    m.update(_as_bytes(seq.upper()))

    try:
        #For Python 2.5+
        return base64.b64encode(m.digest()).rstrip("=")
    except:
        #For older versions
        import os
        #Note: Using os.linesep doesn't work on Windows,
        #where os.linesep= "\r\n" but the encoded string
        #contains "\n" but not "\r\n"
        return base64.encodestring(m.digest()).replace("\n","").rstrip("=") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:19:47.860

我认为您可以将 python 代码嵌入到 C/C++ 代码中。有关详细信息，请参阅以下链接。

[http://www.codeproject.com/Articles/11805/Embedding-Python-in-CC-Part-I](http://www.codeproject.com/Articles/11805/Embedding-Python-in-C-C-Part-I)

[http://www.linuxjournal.com/article/8497](http://www.linuxjournal.com/article/8497)

# wsdl - 在 SoapUI 中更改 WSDL 资源的默认扩展名

> ID：14742796
> 
> 赞同：1
> 
> 时间：2013-02-07T03:02:19.460
> 
> 标签：wsdl, soapui

我们有一个旧的 Web 服务，它被定义为通过 URL 模式公开其 WSDL `//service/getorderservice.wsdl`，但是当我们尝试使用 SoapUI 模拟此服务时，它会尝试使用以下 WSDL 的默认 URL `http://service/getorderservice?wsdl`：

这使得我们所有的客户端测试都失败了，因为 WSDL 不可访问。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T19:00:24.630

你能完成这项工作吗？我试图在soapUI 4.5.2 OS 中创建一个模拟服务，并且我能够创建一个像你这样的路径。

```
http://localhost:8088/testmock 
```

# java - Android隐藏键盘焦点但不选择密码字段时

> ID：14742804
> 
> 赞同：0
> 
> 时间：2013-02-07T03:02:46.867
> 
> 标签：java, android

下面的代码在我将焦点转移到另一个 textField 时有效，但当我只是点击屏幕上的任意位置（我想触发 onFocusChanged 事件）时无效。我怎样才能做到这一点？我还需要检查其他文本字段是否没有焦点，因为如果有，则应保留键盘。

```
usernameET.setOnFocusChangeListener((new View.OnFocusChangeListener() {
            @Override
            public void onFocusChange(View v, boolean hasFocus) {
                if(v == usernameET) {
                    Log.d(LoginPage.Tag, "keyboardOnTouch");
                    if (hasFocus)
                    {
                        ((InputMethodManager) a.getSystemService(Context.INPUT_METHOD_SERVICE)).showSoftInput(usernameET,
                                InputMethodManager.SHOW_FORCED);
                    }
                    else {
                        ((InputMethodManager) a.getSystemService(Context.INPUT_METHOD_SERVICE)).hideSoftInputFromWindow(
                                usernameET.getWindowToken(), 0);
                    }
                }
            }
        })); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:30:23.680

您可以使用 onTouchEvent() 隐藏软键盘。

```
@Override
    public boolean onTouchEvent(MotionEvent event) {
        InputMethodManager imm = (InputMethodManager)getSystemService(Context.
                                                        INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(), 0);
        return true;
    } 
```

希望这会有所帮助。

# regex - 在 notepad++ 中使用 REGEX 来操作列表

> ID：14742805
> 
> 赞同：0
> 
> 时间：2013-02-07T03:02:55.163
> 
> 标签：regex, notepad++

我在记事本++中有一个从0到250的数字列表。列表如下所示：

```
==0
==1
==2
==3
==4
==5
==6
==7
==8
==9
==10
==11
==12
==13
... 
```

我正在尝试使用正则表达式来转换我的列表，如下所示：

```
0==0
1==1
2==2
3==3
4==4
5==5
6==6
7==7
8==8
9==9
10==10
11==11
12==12
13==13 
```

知道如何获得所需的结果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:07:55.717

转到全部替换

找什么：`==(\d+)`

用。。。来代替`$1==$1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T03:08:15.973

不确定这是否适用于 Notepad++，但这适用于 vi：

```
:1,$s/==\(.*\)/\1==\1/ 
```

所以搜索

```
==\(.*\) 
```

并替换为

```
\1==\1 
```

但您可能需要调整 Notepad++ 语法

# mongohq - MongoHQ 使用 API 创建数据库不添加默认用户

> ID：14742806
> 
> 赞同：2
> 
> 时间：2013-02-07T03:02:57.963
> 
> 标签：mongohq

几乎是它在锡上所说的......我正在使用 MongoHQ 的 REST API 创建一个数据库，但由于某种原因，通过网页手动添加数据库时创建的默认用户帐户不会在 API 时创建用来。我是否缺少一些表明这是预期行为的 API 文档？它是一个错误吗？无论如何，如何以编程方式将用户帐户添加到数据库？或者有可能吗？

作为参考，MongoHQ 的文档在这里：http: [//support.mongohq.com/mongohq-api/databases.html](http://support.mongohq.com/mongohq-api/databases.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-06T14:53:10.597

谷歌搜索后，我发现[了这个](https://github.com/abishekrsrikaanth/mongohq-api-laravel4/blob/master/src/Abishekrsrikaanth/MongohqApi/MongoHQ/Users.php)PHP MongoHQ API 库。他们在那里有一个创建用户功能。我看了看，把它拆开，测试它，它工作！它没有记录，但它确实允许您将用户添加到数据库中。

邮寄至：

```
https://api.mongohq.com/databases/*YOUR-DATABASE*/collections/system.users/documents?_apikey=XXXXXXXXXXXXXXXX 
```

使用 JSON 有效负载：

```
{"document":{"user":"danmandle", "pwd":"test", "readonly":false}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:14:31.573

MongoHQ 支持人员告诉我这是他们的 API 中的一个错误，并且没有解决方法。修复工作正在进行中，但没有发布时间表。

# nagios - Nagios - 轮询任意指标和远程安全

> ID：14742807
> 
> 赞同：-1
> 
> 时间：2013-02-07T03:03:09.070
> 
> 标签：nagios

![在此处输入图像描述](../Images/7d0a959976bfc6ccfe5cda88911669fa.png)

背景：我是一名学生，我正在尝试为远程指标的安全监控准备概念证明。

研究了如何从远程主机轮询信息，并了解它可以通过多种方法完成，例如 1) snmp (UDP) 2) check_nrpe 等。

1）我希望了解nrpe如何格式化轮询数据（xml、json等）

2）nrpe数据是如何传输的？（udp，tcp？）

3）nrpe 传输的安全机制，是否有 ACL 或 xml 轮询数据的加密等（安全是一个问题，因为我想证明 nagios 对来自远程网络的度量轮询很有用，我知道连接可以用SSL 但是我对 nagios 安全功能感兴趣）

2) nagios 插件是否可以从数据库中轮询数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:45:25.050

1.  NRPE 使用它自己的格式进行数据交换。它不是 XML 或 JSON。据我所见/所知，它是一种已定义的类型，已打包并通过 tcp 推送。

    ```
    typedef struct packet_struct{
        int16_t   packet_version;
        int16_t   packet_type;
        u_int32_t crc32_value;
        int16_t   result_code;
        char      buffer[MAX_PACKETBUFFER_LENGTH];
    }packet; 
    ```

2.  TCP。

3.  如果 nrpe/check_nrpe 使用 SSL 支持编译（编译时需要开发库），则可以使用 SSL 包装连接。有一个`allowed_hosts`指令形式的 ACL 限制它将回答哪些主机，但这并不限制可以执行的命令。

4.  这取决于您所说的“民意调查数据”是什么意思。Nagios 插件可以做任何你编写脚本来做的事情。如果您希望它查询数据库并返回一个值，请编写它。如果您希望它查询数据库并计算花费了多长时间，请写下（或查看是否还没有写过）。如果您想查看 Nagios 是否可以读取数据库以找出要执行的插件......不，至少不是 Nagios Core。我不能保证 Nagios XI，但我相信那也不是。

我希望这会有所帮助。

# java - 是否可以在 Java 中有效地实现 seqlock？

> ID：14742808
> 
> 赞同：4
> 
> 时间：2013-02-07T03:03:30.240
> 
> 标签：java, optimization, concurrency, mutex, java-memory-model

另一个[问题](https://stackoverflow.com/q/14660529/149138)让我想知道[seqlock 是否](http://en.wikipedia.org/wiki/Seqlock)可以用 Java 中的 volatile 版本计数器有效地实现。

这是一个原型实现，对于这种情况，只有一个编写器线程：

```
class Seqlock {
  private volatile long version = 0;
  private final byte[] data = new byte[10];

  void write(byte[] newData) {
    version++;  // 1
    System.arraycopy(newData, 0, data, 0, data.length);  // 2
    version++;  // 3
  }

  byte[] read() {
    long v1, v2;
    byte[] ret = new byte[data.length];
    do {
      v1 = version; // 4
      System.arraycopy(data, 0, ret, 0, data.length);  // 5
      v2 = version; // 6
    } while (v1 != v2 || (v1 & 1) == 1);
  }
} 
```

基本思想是在写入之前和之后增加版本号，并让读者通过验证版本号是否相同甚至偶数来检查他们是否获得了“一致”读取，因为奇数表示“正在写入”。

由于版本是易变的，因此在编写线程和读取线程中的关键操作之间存在各种发生前的关系。

但是，我看不到是什么阻止了 (2) 处的写入高于 (1)，从而导致读者看到正在进行的写入。

例如，以下 volatile 读取和写入的同步顺序，使用每行旁边注释中的标签（还显示了`data`非 volatile 的读取和写入，因此不属于同步顺序的一部分，缩进）：

```
1a (version is now 1)
  2a (not part of the synchronization order)
3 (version is now 2)
4 (read version == 2, happens before 3)
  5 (not part of the synchronization order)
6 (read version == 2, happens before 4 and hence 3)
1b (second write, version is now 3)
  2b (not part of the synchronization order) 
```

ISTM认为在5（数据的读取）和2b（数据的第二次写入）之间没有happens-before，因此2b可能发生在读取和读取错误数据之前。

如果这是真的，那么声明`write()`有`synchronized`帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:10:25.070

在 java 中，您可以非常简单地实现共享缓冲区（或其他对象）：

```
public class SharedBuffer {

  private volatile byte[] _buf;

  public void write(byte[] buf) {
    _buf = buf;
  }

  public byte[] read() {
    // maybe copy here if you are worried about passing out the internal reference
    return _buf;
  }
} 
```

显然，这不是“seqlock”。

# gwt - GWT：背景图像属性未显示在注入的外部 css 文件中

> ID：14742809
> 
> 赞同：1
> 
> 时间：2013-02-07T03:03:32.723
> 
> 标签：gwt

在我的子模块中，我想在运行时注入 css：

```
public interface Resources extends ClientBundle
{
    Resources INSTANCE = GWT.create( Resources.class );

    @Source( "pagedown.css" )
    @NotStrict
    CssResource css();
} 
```

来自我使用的java `Resources.INSTANCE.css().ensureInjected();`，它工作得很好，除了在pagedown.css中没有显示图像：

```
.wmd-button>span {
    background-image: url(pagedown/wmd-buttons.png); 
    background-repeat: no-repeat; 
    background-position: 0px 0px; 
} 
```

原因是没有办法找到图像。上面的代码在我的子项目（子模块）中以供重用，**我必须将图像复制到我的应用程序项目中才能使其工作**，这很麻烦并且破坏了封装，有没有办法解决这个问题？

编辑

* * *

如果我将上面的 css 修改为`background-image: url(myapp/pagedown/wmd-buttons.png)`; 但是它会起作用，因为这个 css 在子项目中并且永远不知道我的应用程序项目的名称，所以如果我这样硬编码，有一天我有另一个项目使用这个组件，我必须修改它`myOtherApp/pagedown/wmd-buttons.png`，可以看到两个项目冲突，不能同时使用我的组件。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:06:46.640

我想出了一个解决方法：让组件在构造函数中接受一个参数，该参数是项目基础url，用于获取正确的图像url，在构造函数中，我使用GWTQuery附加正确的图像背景url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:07:19.537

这种风格属性的语法是：`background-image: url("pagedown/wmd-buttons.png");` 所以代码变成

```
wmd-button>span {
    background-image: url("pagedown/wmd-buttons.png"); 
    background-repeat: no-repeat; 
    background-position: 0px 0px; 
} 
```

不是这个：

```
.wmd-button>span {
    background-image: url(pagedown/wmd-buttons.png); 
    background-repeat: no-repeat; 
    background-position: 0px 0px; 
} 
```

# css - 未知覆盖的背景图像/精灵定位

> ID：14742812
> 
> 赞同：0
> 
> 时间：2013-02-07T03:03:50.407
> 
> 标签：css, background-image, sprite

在：http: [//jsfiddle.net/elasticGurl/CpBX5/](http://jsfiddle.net/elasticGurl/CpBX5/)

我的 CSS 有问题，背景图像隐藏了图像左边缘的一部分（阴影所在的位置）。请参阅带有红色箭头的底部图像（仅供参考）以查看问题所在。它在左侧，大致从“设备”的顶部到“访问”的底部。这很简单，但我看不到。

[http://jsfiddle.net/elasticGurl/CpBX5/](http://jsfiddle.net/elasticGurl/CpBX5/)

问题CSS如下：

```
form#frm_select_a_plan ul#select_a_plan_inner { list-style: none outside none; padding: 0px; margin: 0px; }
form#frm_select_a_plan ul#select_a_plan_inner li { background: url('http://www.myproduction-1.info/_BG/_images/sbsignup_pricing_generic.png') no-repeat scroll 0px 0px transparent; font-size: 14px; background-position: -5px -133px; width: 534px; height: 62px; margin-left:274px; }

form#frm_select_a_plan ul#select_a_plan_inner li.access { background-position: -5px -133px; width: 502px; height: 11px;}
form#frm_select_a_plan ul#select_a_plan_inner li span { display: block; float: left; text-align: center; } 
```

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:16:29.353

从负数`background-position`变为零。然后调整边距。

见小提琴：http: [//jsfiddle.net/rCJaN/](http://jsfiddle.net/rCJaN/)

```
form#frm_select_a_plan ul#select_a_plan_inner li { background: url('http://www.myproduction-1.info/_BG/_images/sbsignup_pricing_generic.png') no-repeat scroll 0px 0px transparent; font-size: 14px; background-position: 0px -133px; width: 534px; height: 62px; margin-left:269px; }
form#frm_select_a_plan ul#select_a_plan_inner li.access { background-position: 0px -133px; height: 11px;}
form#frm_select_a_plan #select_a_plan_bottom { margin: 0px; background: url('http://www.myproduction-1.info/_BG/_images/sbsignup_pricing_generic.png') no-repeat scroll center bottom transparent;  list-style: none outside none; background-position: 0px -307px; width: 534px;height: 123px; margin-left:269px; } 
```

# c# - .Net for Windows Store App 中按钮的刷新网格布局

> ID：14742814
> 
> 赞同：0
> 
> 时间：2013-02-07T03:04:06.677
> 
> 标签：c#, .net, windows-store-apps

我有一个以编程方式生成的对象网格。

出于测试目的，网格中的每个单元格都是 Border 对象，其子对象是 Image 对象。每个单元格都与相邻单元格齐平放置并完美显示。

当我将每个 Image 对象替换为 Button 对象（每个单元格仍然是 Border 对象，只是为其子对象使用 Button 而不是 Image）时，单元格之间会出现明显的间隙。

我尝试将边距、填充等设置为 0。

Buttons 有什么独特之处使它们具有这种行为方式，我该如何克服？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:51:39.810

`Margin`在控制模板中定义。您可以按照以下步骤更改它：

右键单击设计器中的按钮，然后从上下文菜单中选择`Edit Template`> 。`Edit a Copy...`

![上下文菜单](../Images/ba6a1220679aab7bb28200fd5df22bdd.png)

在对话框中选择新样式的名称并选择要放置的位置。

![创建样式对话框](../Images/fa7dad2e09f1730a3907b6ac73ab72f2.png)

现在在样式中找到以下 XAML 块并将其设置`Margin`为`0`.

```
<Border x:Name="Border" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Margin="3">
    <ContentPresenter x:Name="ContentPresenter" ContentTemplate="{TemplateBinding ContentTemplate}" ContentTransitions="{TemplateBinding ContentTransitions}" Content="{TemplateBinding Content}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
</Border> 
```

`x:Key`通过从样式声明中删除，将新样式分配给所有按钮：

```
<Style TargetType="Button">
    <!-- style definition -->
</Style> 
```

或者通过将样式设置为选定按钮：

```
<Button Style="{StaticResource MyButtonStyle}"/> 
```

无论哪种方式，您的按钮都将彼此相邻，它们之间没有任何间隙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T03:30:36.233

因此，严格来说，我并不熟悉 Windows 商店应用程序的工作方式，但我不认为它与一般的 WPF / Silverlight 相差太远。当标签控件并排放置时，我会从带有不必要填充的标签控件中得到同样的挫败感。你能做的就是使用负边距，这将纠正它。我认为你必须这样做完全不干净，但它确实有效。

# hibernate - 通过自然 ID 列表休眠条件

> ID：14742818
> 
> 赞同：1
> 
> 时间：2013-02-07T03:04:43.140
> 
> 标签：hibernate, criteria

我正在尝试使用自然 ID 列表创建休眠标准。我在这里看到了示例 [http://docs.jboss.org/hibernate/core/3.5/reference/en-US/html/querycriteria.html#query-criteria-naturalid](http://docs.jboss.org/hibernate/core/3.5/reference/en-US/html/querycriteria.html#query-criteria-naturalid)但它只显示了查询单个记录的示例：

```
session.createCriteria(User.class)
  .add(Restrictions.naturalId()
    .set("name", "gavin")
    .set("org", "hb")); 
```

有没有比下面的示例更好的方法来为自然 ID 列表制定标准？

```
Junction junction = Restrictions.disjunction()
  .add(Restrictions.naturalId()
    .set("name", "gavin")
    .set("org", "hb"))
  .add(Restrictions.naturalId()
    .set("name", "jdoe")
    .set("org", "rh"));         
session.createCriteria(User.class)
  .add(junction); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T03:35:01.630

以我的经验，没有。原因是由于 SQL 在某些实现中的限制。当您尝试在 SQL 中表达这一点时，它会变得很棘手......

不支持跨数据库的伪 SQL...

```
select * from table where (name, org) in values ( ('gavin', 'hb'), ('jdoe', 'hr')) 
```

Hibernate 最终编写的是常见的跨 DB 方式...

```
select * from table where (name = 'gavin' and org = 'hr') OR (name = 'jdoe' and org = 'hr') 
```

我已经对这个问题投了赞成票，并将其添加到我的收藏夹中进行跟踪，希望我错了，并且有更好的方法。我知道在 DB2 for zOS 中，这种奇怪的情况也会导致优化器做出糟糕的选择。

# python - 使用 json2csv.py 将 JSON 转换为 CSV

> ID：14742823
> 
> 赞同：0
> 
> 时间：2013-02-07T03:05:33.147
> 
> 标签：python, json, python-3.x, python-2.7

我做了一些在线研究，发现了一个将 JSON 文件转换为 CSV 文件的脚本，我将其下载并存储在本地文件系统中`json2csv.py`。该教程说我必须执行这个：

```
python.exe json2csv.py [input_file] [output_file] 
```

我需要在哪里存储`json2csv.py`以及 [input_file] 的格式是什么？我试着在 Python Shell(IDLE) 中输入这个：

```
python.exe C:\json2csv.py [c:\inputfile.json] [c:\output.csv] 
```

但我收到语法错误。我是新手，真的需要帮助。

我在 Windows 7 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T03:09:26.700

假设脚本 ( `json2csv.py`) 和您的输入文件 ( `inputfile.json`) 位于根目录中，`C:`并且您希望在同一目录中创建输出，您需要从命令行执行此操作 (Start > Run... > `cmd``Return`) (而不是来自 IDLE）。

```
python.exe C:\json2csv.py c:\inputfile.json c:\output.csv 
```

# couchdb - CouchDB 需要 PUT 才能将附件添加到文档，但 AppMobi.file.uploadToServer() 会 POST

> ID：14742824
> 
> 赞同：1
> 
> 时间：2013-02-07T03:05:50.480
> 
> 标签：couchdb, appmobi

为了重述标题，CouchDB 需要 PUT 才能将附件添加到文档，但 AppMobi.file.uploadToServer() 会执行 POST。CouchDB 返回：

```
{"error":"method_not_allowed","reason":"Only DELETE,GET,HEAD,PUT allowed"} 
```

我已经证实这就是 CouchDB 所期望的。我正在使用 uploadToServer 将图像附加到文档中。所有 CouchDB 文档都是所谓的 JSON 文档，因此任何图像都必须是现有文档的附件。我对通讯进行了有线共享并阅读了有关 uploadToServer 的信息，它肯定是在进行 POST。有什么办法可以将其修改为 PUT？

谢谢。

# iphone - 从模态视图关闭的标签栏项目中删除选择图像

> ID：14742830
> 
> 赞同：0
> 
> 时间：2013-02-07T03:06:32.153
> 
> 标签：iphone, ios, objective-c, modalviewcontroller, uitabbaritem

我有一个基于标签栏的应用程序。

我为每个标签栏项目选择/取消选择了图像集。

在第一个选项卡上，我有一个打开 modalviewcontroller 的按钮。

在激活模态视图时，我的标签栏项目状态被选中并具有选择图像。

当模态视图弹出时，选择图像仍然存在。但是当我关闭模态视图时，我希望标签栏项目的选择图像更改为其他图像。

如何在模态视图关闭时更改此图像？

我试图如此关注，但它不起作用：

```
[[[self.tabBarController.tabBar items] objectAtIndex:0 ] setSelectionIndicatorImage:[UIImage imageNamed: @"abc.png"] ]; 
```

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:10:48.513

使用它可以帮助您：

```
UITabBarItem *tabBarItem1 = [[self.tabBar.tabBar items] objectAtIndex:0];
[tabBarItem1 setFinishedSelectedImage:[UIImage imageNamed:@"ab.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"abc.png"]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T03:58:32.483

标签栏项目的标题和图像应该由该标签中的控制器设置，而不是标签栏控制器。因此，您应该尝试在第一个选项卡中更改控制器中的该选项卡。您使用的方法适用于独立的标签栏，而不是由标签栏控制器控制的方法。你可以这样做：

```
-(void)changeTitle{
    [self.tabBarItem setFinishedSelectedImage:[UIImage imageNamed:@"one.jpg"] withFinishedUnselectedImage:[UIImage imageNamed:@"two.jpg"]];
} 
```

# ruby - 无法安装 gem 或 RVM

> ID：14742835
> 
> 赞同：2
> 
> 时间：2013-02-07T03:06:57.407
> 
> 标签：ruby, gem, rvm, rbenv, rbenv-gemset

我正在尝试[使用 Sass 和 Compass 安装 Foundation，](http://foundation.zurb.com/docs/compass.php)但很难获得这个，或者通过终端安装的任何 gem。我在运行最新版本 OS X 的 Macbook Pro 上。

运行**gem install zurb-foundation**或**gem install bundler**返回以下错误：

```
ERROR:  While executing gem ... (TypeError)
can't convert Array into String 
```

**$ sudo gem update --system --no-user-install**我得到了同样的错误

 **我的**gem env**是什么样的：

```
RubyGems Environment:
- RUBYGEMS VERSION: 1.8.25
- RUBY VERSION: 1.9.3 (2013-02-06 patchlevel 385) [x86_64-darwin12.2.0]
- INSTALLATION DIRECTORY: ["/Users/mc/.gems"]
- RUBY EXECUTABLE: /Users/mc/.rvm/rubies/ruby-1.9.3-p385/bin/ruby
- EXECUTABLE DIRECTORY: /Users/mc/.gems/bin
- RUBYGEMS PLATFORMS:
 - ruby
 - x86_64-darwin-12
- GEM PATHS:
 - ["/Users/mc/.gems"]
 - /usr/lib/ruby/gems/1.8
- GEM CONFIGURATION:
 - :update_sources => true
 - :verbose => true
 - :benchmark => false
 - :backtrace => false
 - :bulk_threshold => 1000
 - :sources => ["http://rubygems.org/", "https://rubygems.org"]
 - "gem" => "--no-rdoc --no-ri"
 - "gempath" => ["/usr/lib/ruby/gems/1.8"]
 - "gemhome" => ["/Users/mc/.gems"]
- REMOTE SOURCES:
 - http://rubygems.org/
 - https://rubygems.org 
```

我有安装了命令行工具插件的最新版本的 xCode。

有些东西告诉我这是一个目录/权限问题，因为如果我在 OS X 上以 root 身份登录，我没有问题。我尝试使用 RVM 内爆并重新安装 ruby​​，但在下面的屏幕截图中显示，我总是遇到上面提到的相同 TypeError 问题。

[http://i.imgur.com/1AQSEe9.jpg](http://i.imgur.com/1AQSEe9.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T01:04:53.443

首先，总的来说，我建议使用[rbenv](https://github.com/sstephenson/rbenv/)而不是[rvm](https://rvm.io/)来维护您的红宝石和相关的宝石。我发现 rbenv 更容易使用，而且干扰更少，并且在工作的背后也更少痛苦。

其次，与 ShiningRay 所评论的相反，能够维护和使用 Ruby 沙箱是一个巨大的胜利。有时您会想尝试不同的红宝石和/或宝石版本

如果你想安装 rbenv，最简单的方法是通过[Homebrew](http://mxcl.github.com/homebrew/)。如果您安装 Homebrew，请作为本地安装（不要使用 sudo 安装它）。

要安装 Hombrew，只需在提示符下执行以下命令：

```
ruby -e "$(curl -fsSL https://raw.github.com/mxcl/homebrew/go)" 
```

在安装 rbenv 之前，您需要删除现有的 - 但显然不起作用 - rvm 安装。请参阅[如何从我的系统中删除 rvm（ruby 版本管理器？](https://stackoverflow.com/questions/3558656/how-to-remove-rvm-ruby-version-manager-from-my-system)了解如何有效地执行此操作。

我相信您必须通过 sudo 运行 rvm implode 才能为您完成这项工作。

以本地用户身份安装 Homebrew 后，使用它来安装 rbenv，如[Mac OS X 上的 rbenv Homebrew 部分所述](https://github.com/sstephenson/rbenv/#homebrew-on-mac-os-x)。

**重要** 不要以 root 身份运行这些命令！不要使用 sudo。只需在上面安装 homebrew 时执行 rbenv 的本地安装。

除了 rbenv 和 ruby​​-build，我还会安装以下 rbenv 扩展：

*   [rbenv-gemset](https://github.com/jamis/rbenv-gemset)
*   [rbenv 捆绑器](https://github.com/carsomyr/rbenv-bundler)

**注意** 要有效，并且在安装它之前，rbenv-bundler 要求您已经安装了[bundler](http://gembundler.com/)。

现在您已经完成了所有这些，您可以开始安装需要安装的 rubies 和 gems。我会创建一个 gemset，与您要使用的 ruby​​ 相关联，并将您需要使用的各种 gem 安装到其中。**

# c - 二维数组正在截断一些字符

> ID：14742836
> 
> 赞同：-2
> 
> 时间：2013-02-07T03:07:05.420
> 
> 标签：c, arrays, multidimensional-array

我只需要知道如何解决这个问题。

```
#include<stdio.h>
#include<stdlib.h>

#define PRICE 1985.95
#define MAX_LENGTH 20
#define MAX_EMPLOYEES 25
#define MAX_WEEKS 7

void getNames(int* employeeNumber, char names[][MAX_LENGTH]);
void getSales(int* employeeNumber,int* weeksNumber, int weeks[][MAX_WEEKS+1]);

void calcEachTotal(int empNumber, int weekNumber, int weeks[][MAX_WEEKS+1]);
void calcTotal(int,int,int*,int [][MAX_WEEKS+1],int [][3]);
void calcCoTot(int ,int*, int [][3]);

void outputDataScreen(int,int,int,char [][MAX_LENGTH],int [][MAX_WEEKS+1], int [][3]);
void outputDataFile(int,int,int,char [][MAX_LENGTH],int [][MAX_WEEKS+1], int [][3]);

int main (void)
{
    char employees[MAX_EMPLOYEES][MAX_LENGTH] = {{0}};
    //holds personal sales info and each employees total sales
    int sales[MAX_EMPLOYEES][MAX_WEEKS+1]={{0}};
    //holds the weekly lowest,highest and total
    int weeklyStats[MAX_WEEKS][3] = {{0}};
    int employeeNumber;
    int weeksNumber;
    int companyTotal = 0;

    getNames(&employeeNumber,employees);
    getSales(&employeeNumber, &weeksNumber,sales);
    calcEachTotal(employeeNumber, weeksNumber, sales);
    //call function to calculate personal,weekly and company total sales
    calcTotal(employeeNumber,weeksNumber,&companyTotal,sales,weeklyStats);
    calcCoTot(weeksNumber,&companyTotal, weeklyStats);
    //call two functions to output the data to the screen and the output text file
    outputDataScreen(employeeNumber,weeksNumber,companyTotal,employees,sales,weeklyStats);
    outputDataFile(employeeNumber,weeksNumber,companyTotal,employees,sales,weeklyStats);

    return 1;

}

/*===============getNames======================
Pre : NAMES.txt is an open file.
Post : Number of employees
This function will read the number of emplyees
and close if there is more than 25 employees
*/

void getNames(int* employeeNumber, char names[][MAX_LENGTH])
{

    FILE* spNames;

    int i;
    int j;

// statements
    spNames = fopen("/Users/r3spectak/Desktop/NAMES.TXT", "r");

    if (!spNames)
        {
        printf("Could not open  NAMES.txt\n\n");
        exit(100);
        }

    fscanf(spNames,"%d",employeeNumber);

    if (*employeeNumber > MAX_EMPLOYEES )
        {
        printf("Unable to read more than 25 employees\n\n");
        exit(100);
        }

    for(i = 0; i< *employeeNumber;i++)
        for(j = 0; j<= MAX_LENGTH; j++)
            fscanf(spNames,"%c", &names[i][j]);

    fclose(spNames);

}

/*=====getSales==============
Pre : SALES.txt is an open file.
number of week and employee number with the array of weeks.
Post : number of weeks
This function reads the number of weaks and close
*/

void getSales(int* employeeNumber,int* weeksNumber, int weeks[][MAX_WEEKS+1])
{
// Local variables
    FILE* spSales;

    int i;
    int j;

// Statements
    spSales = fopen("/Users/r3spectak/Desktop/SALES.TXT", "r");

    if (!spSales)
        {
        printf("Could not open Sales.txt\n\n");
        exit(102);
        }

    fscanf(spSales,"%d",weeksNumber);

    if (*weeksNumber > MAX_WEEKS)
        {
        printf("Unable to read more than 6 weeks\n\n");
        exit(102);
        }

    for(i = 0 ; i < *employeeNumber;i++)
        for(j = 0 ; j < *weeksNumber ; j++)
            fscanf(spSales,"%d", &weeks[i][j]);

    fclose(spSales);
}

/*===========calcEachTotal====================
Pre : Number of employees, Number of weeks
Post : Employee total
This function calculates the weekly total for each employee and store in an array
*/
void calcEachTotal(int employeeNumber, int weekNumber, int weeks[][MAX_WEEKS+1])
{

// Local Variables
    int i;
    int j;

// Statements
    for(i = 0; i< employeeNumber; i++)
        for(j=0, weeks[i][MAX_WEEKS] = 0; j< weekNumber;j++)
            weeks[i][MAX_WEEKS] += weeks[i][j];

}
/*===========calcTotal====================
Pre : the number of the employees and the weeks , two arrays that hold the names and sales info and Stats array which is for weekly low,high and total
Post : calculates the weekly total for each employee. the highest, lowest and the total of each week and the company total and stores them in the arrays
This function
*/

void calcTotal(int employeeNumber, int weekNumber,int *companyTotal, int weeks[][MAX_WEEKS+1],int stats[][3])
{
// Local Variables
    int i;
    int j;

// Statements
    //calculate the weekly highest, lowest and total and store it in the stats array
    for (i = 0 ; i<weekNumber ; i++)
    {
        stats[i][0]=weeks[0][i];
        stats[i][1]=weeks[0][i];
        stats[i][2]=0;
        for (j=0; j <employeeNumber; j++)
        {
            if (weeks[j][i] > stats[i][0])
                stats[i][0] = weeks[j][i];

            if (weeks[j][i] < stats[i][1])
                stats[i][1] = weeks[j][i];

            stats[i][2] += weeks[i][j];

        }
    }

}

/*===========calcCoTot====================
Pre : the number of the employees and the weeks , two arrays that hold the names and sales info and Stats array which is for weekly low,high and total
Post : calculates the weekly total for each employee. the highest, lowest and the total of each week and the company total and stores them in the arrays
This function
*/

void calcCoTot(int weekNumber,int *companyTotal, int stats[][3])
{
// Local Variables
    int i;
    int j;

    //calculate the company total
    for( i = 0; i < weekNumber ; i++)
        *companyTotal += stats[i][2];

}

//===============outputDataScreen========
/*
pre : the number of the workers and weeks, a char array that holds the names , an int array for personal sales and
    another int array stats which holds weekly info , also another int for company total
post : outputs all the information in a table to the screen
*/

void outputDataScreen(int empNum,int weeks,int companyTotal,char names[][MAX_LENGTH],int sales[][MAX_WEEKS+1], int stats[][3])

{
// Local Variables
    int i;
    int j;
    int k;

// Statements
    printf("\t\tHomework 2: Two Dimensional Arrays\n");
    printf(" *** Sales Table *** \n\n");

    printf("=============\t\t");
    for ( i = 0; i < weeks; i++)
        printf("======\t");

    printf("\nSalesperson\t\t");

    for ( i = 0; i<weeks; i++)
        printf("Week%d\t",i+1);

    printf("\n=============\t\t");

    for ( i = 0; i < weeks; i++)
        printf("======\t");

    for ( i = 0 ; i < empNum ; i++)
    {
        for ( j = 0 ; j<= MAX_LENGTH; j++)
            printf("%c",names[i][j]);
        //printf("");

        for(k = 0; k < weeks;k++)
            printf("\t%d",(int)sales[i][k]);
    }

    printf("\n*** The output is in OUTPUT.TXT ***\n\t\t\tEnd of the program!\n\t\t\tHave a great day!\n");

}

//===============outputDataFile=======
/*
pre : the number of the workers and weeks, a char array that holds the names , an int array for personal sales and
    another int array stats which holds weekly info , also another int for company total
post : outputs all the information in a table to the File
*/

void outputDataFile(int empNum,int weeks,int companyTotal,char names[][MAX_LENGTH],int sales[][MAX_WEEKS+1], int stats[][3])

{
// Local Variables
    FILE* fpOut;
    int i;
    int j;
    int k;

    //open the txt file to output the information
// Statements
    fpOut = fopen("/Users/r3spectak/Desktop/OUTPUT.TXT","w");

    fprintf(fpOut,"\t\tHomework 2: Two Dimensional Arrays\n");
    fprintf(fpOut," *** Sales Table *** \n\n");
    fprintf(fpOut,"Number of Employees: %d\n",empNum);
    fprintf(fpOut,"Number of Weeks: %d\n\n",weeks);

    fprintf(fpOut,"Personal sales info\n");

    fprintf(fpOut,"=============\t\t");
    for ( i = 0; i < weeks; i++)
        fprintf(fpOut,"======\t");

    fprintf(fpOut,"\nSalesperson\t\t");

    for ( i = 0; i<weeks; i++)
        fprintf(fpOut,"Week%d\t",i+1);

    fprintf(fpOut,"\n=============\t\t");

    for ( i = 0; i < weeks; i++)
        fprintf(fpOut,"======\t");

    for ( i = 0 ; i < empNum ; i++)
    {

        for ( j = 0 ; j < MAX_LENGTH ; j++)
            fprintf(fpOut,"%c",names[i][j]);
        fprintf(fpOut," ");

        for(k = 0 ; k < weeks;k++)
            fprintf(fpOut,"%-.2f  ",(double)sales[i][k]*PRICE);

        fprintf(fpOut,"%-.2f ",(double)sales[i][MAX_WEEKS]*PRICE);

        fprintf(fpOut,"*\n");

    }

    fprintf(fpOut,"\n\nWEEKLY INFO :\n\n");

    fprintf(fpOut,"HIGHEST SALE         ");

    for (i=0 ; i < weeks ; i++ )
        fprintf(fpOut,"%-.2f  ",(double)stats[i][0]*PRICE);

    fprintf(fpOut,"\n");

    fprintf(fpOut,"LOWEST SALE          ");

    for (i=0 ; i < weeks ; i++ )
        fprintf(fpOut,"%-.2f  ",(double)stats[i][1]*PRICE);

    fprintf(fpOut,"\n");

        fprintf(fpOut,"WEEKLY TOTAL         ");

    for (i=0 ; i < weeks ; i++ )
        fprintf(fpOut,"%-.2f  ",(double)stats[i][2]*PRICE);

    fprintf(fpOut,"\nCOMPANY TOTAL SALES : %-.2lf\n\n",(double)companyTotal*PRICE);

    fclose(fpOut);

} 
```

名称.txt

```
 16
    Kelly, Victor       
    Lam, Gary           
    Nagasake, David     
    Nguyen, Jeff        
    Nguyen, Michael     
    Sinn, Scott         
    Smith, Jacob        
    Son, Thai           
    Tavares, Maribel    
    Tran, Diane         
    Tsukamoto, Andrew   
    Wang, Mary          
    Young, Daniel       
    Wells, Steve        
    Wong, Justin        
    Johnson, Mary 
```

销售.txt

```
 4
    25 20 25 25
    20 22 23 22
    25 26 25 22
    30 28 25 26
    25 30 45 20
    30 25 20 21
    27 25 24 26
    20 23 24 20
    28 26 24 25
    30 10 35 32
    28 29 30 35
    15 16 15 14
    12 15 12 19
    20 24 20 18
    10 15 12 16
    32 30 33 29 
```

该程序有效，但我遇到了数组问题。它打印不正确。字符的顺序在这个地方运行，一些名称被截断。数组的声明有问题吗？还是我必须打印空白？有人请帮帮我！

输出.txt

```
 *** Sales Table *** 

Number of Employees: 16
Number of Weeks: 4

Personal sales info
=============       ======  ======  ======  ======  
Salesperson     Week1   Week2   Week3   Week4   
=============       ======  ======  ======  ======  
Kelly, Victor      49648.75  39719.00  49648.75  49648.75  188665.25 *

Lam, Gary         39719.00  43690.90  45676.85  43690.90  172777.65 *

Nagasake, David  49648.75  51634.70  49648.75  43690.90  194623.10 *

Nguyen, Jeff    59578.50  55606.60  49648.75  51634.70  216468.55 *

Nguyen, Michae 49648.75  59578.50  89367.75  39719.00  238314.00 *

Sinn, Scott   59578.50  49648.75  39719.00  41704.95  190651.20 *

Smith, Jacob 53620.65  49648.75  47662.80  51634.70  202566.90 *

Son, Thai   39719.00  45676.85  47662.80  39719.00  172777.65 *

Tavares, M 55606.60  51634.70  47662.80  49648.75  204552.85 *
ribel    
Tran, Dia 59578.50  19859.50  69508.25  63550.40  212496.65 *
e         
Tsukamot 55606.60  57592.55  59578.50  69508.25  242285.90 *
, Andrew   
Wang, M 29789.25  31775.20  29789.25  27803.30  119157.00 *
ry          
Young, 23831.40  29789.25  23831.40  37733.05  115185.10 *
Daniel       
Wells 39719.00  47662.80  39719.00  35747.10  162847.90 *
 Steve        
Wong 19859.50  29789.25  23831.40  31775.20  105255.35 *
 Justin        
Joh 63550.40  59578.50  65536.35  57592.55  246257.80 *

WEEKLY INFO :

HIGHEST SALE         63550.40  59578.50  89367.75  69508.25  
LOWEST SALE          19859.50  19859.50  23831.40  27803.30  
WEEKLY TOTAL         722885.80  734801.50  822183.30  909565.10  
COMPANY TOTAL SALES : 3189435.70 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:02:09.100

当您阅读您没有阅读的名称时，您总是阅读 MAX_LENGTH 个字符。因此，当您认为第一个员工姓名结束时，它不会结束......它始终是 MAX_LENGTH 个字符。此外，您永远不会终止您的字符串...名称[i][j] = '\0'。

```
for(i = 0; i< *employeeNumber;i++)
        for(j = 0; j<= MAX_LENGTH; j++)
            fscanf(spNames,"%c", &names[i][j]); 
```

你为什么使用scanf？它一直是我痛苦的根源。尝试使用 fgets().. 读取该行。基于行的 IO 更好。如果您使用 scanf("%c") 我不知道它对换行符有什么作用。

```
char *fgets(char *s, int size, FILE *stream);

    for(i = 0; i< *employeeNumber;i++) {
       fgets(names[i], MAX_LENGTH, spNames);
       // trim the newline from the name (there is probably a better way)
       int len = strlen(names[i]) - 1;   // -1 because len=1 has only index 0
       if (names[i][len] == '\n') names[i][len] = '\0';
    } 
```

# android - ViewFlipper 未在自定义 DialogFragment 中显示

> ID：14742839
> 
> 赞同：0
> 
> 时间：2013-02-07T03:07:24.520
> 
> 标签：android, xamarin.android, viewflipper, android-dialogfragment

我创建了一个自定义 DialogFragment，它加载了一个名为 student_info_main_container 的自定义布局。这个布局包含一个 ViewFlipper，我加载了两个额外的布局。问题是 ViewFlipper 没有显示在我的 DialogFragment 中，但 student_info_main_container 布局的其余部分确实显示了。我的大部分工作都是在 OnCreateView 中完成的。任何帮助，将不胜感激。

```
public class StudentInfoUIViewController : DialogFragment, IJoinClassView
    {
        private ViewFlipper studentInfoContentFlipper;

        public static StudentInfoUIViewController NewInstance() 
        {
            StudentInfoUIViewController frag = new StudentInfoUIViewController();     
            frag.SetStyle(DialogFragmentStyle.NoTitle, 0);

            return frag;
        }

        public override void OnAttach(Activity activity)
        {
            base.OnAttach(activity);
            Log.Debug("StudentInfoUIViewController", "OnAttach Called.");
        }

        //This is called to create the view and initialize the UI.  The UI isn't made visible until OnStart is called.
        public override View OnCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
        {
            Dialog.Window.SetGravity(GravityFlags.Top);

            //Inflate and set the main layout for this DialogFragment
            View mainView = inflater.Inflate(Resource.Layout.student_info_main_container, container, true);

            //Find the ViewFlipper in the mainView
            studentInfoContentFlipper = Activity.FindViewById<ViewFlipper>(Resource.Id.studentInfoMainContainer_viewFlipper_studentInfoContent);

            //Inflate the layouts that are going to be added to the studentInfoContentFlipper ViewFlipper
            View joinSelectionView = inflater.Inflate(Resource.Layout.student_info_join_selection, null);
            View test = inflater.Inflate(Resource.Layout.test, null);

            //Add the above views to the flipper.
            studentInfoContentFlipper.AddView(joinSelectionView, 0);
            studentInfoContentFlipper.AddView(test, 1);

            Log.Debug("StudentInfoUIViewController", "OnCreateView Called.");

            return mainView;
        }

        public override void OnStart()
        {
            base.OnStart();
            //UI is visible
            Log.Debug("StudentInfoUIViewController", "OnStart Called.");

        }               

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:04:51.120

不要`ViewFlipper`在. `Activity`_ *_* _ `Fragment`也不要使用参数设置为的`Inflate()`方法，因为这会将膨胀的视图添加到容器中，这将在返回后由系统自动再次完成。`boolean``true``onCreateView`

# c# - 插入的记录丢失

> ID：14742840
> 
> 赞同：1
> 
> 时间：2013-02-07T03:07:34.537
> 
> 标签：c#, sql, sql-server, insert, record

我使用 sql server express 作为后端，并通过 C# 在 ASP Net 中插入记录。在表中。我发现只有少数记录没有被保存，而其他记录被保存在同一个表中。假设我的自动身份列看起来像 1,2,3,5,8,9,10,13 等。我已经正确地给出了身份种子。应用程序也不会抛出任何错误。

请注意我在插入记录时没有使用任何表锁。是否需要使用表锁或可能是什么问题

赞赏这方面的任何见解。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:17:35.173

Records in a table are not guaranteed to be in order. Try running the query:

```
select *
from t
order by <auto-identity column> 
```

Also, deleting records will create holes in the primary keys.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:33:02.483

您的问题（实际上不是问题）与锁无关。

最可能的原因可能是删除记录。删除记录时，添加新记录时不会填补标识中的空白。

此外，查询，将记录添加到表中，可能会使用[IDENTITY_INSERT ON](http://msdn.microsoft.com/en-US/library/ms188059%28v=SQL.90%29.aspx)，它允许将值插入到标识列中。

`ORDER BY`此外，除非在子句中指定，否则查询结果不会按标识列排序。

无论如何，如果您认为出现问题，您可以运行 trace in`SQL Server Profiler`并查看服务器上发生了什么。

# php - 使用 cURL 时估算流量

> ID：14742842
> 
> 赞同：1
> 
> 时间：2013-02-07T03:07:49.857
> 
> 标签：php, curl, traffic-measurement

我有一个页面通过 cURL 在其中加载另一个页面。与此类似：

```
function get_data($url) {
  $ch = curl_init();
  $timeout = 5;
  curl_setopt($ch, CURLOPT_URL, $url);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
  curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
  $data = curl_exec($ch);
  curl_close($ch);
  return $data;
}
echo get_data($_GET["url"]); 
```

如何估计每个请求的流量？比如说，用户想在我的页面上显示 imdb.com，我想知道我的服务器在这个请求中使用了多少带宽（包括图像和所有通过的 css/js 文件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:16:51.520

`echo curl_getinfo($ch, CURLINFO_REQUEST_SIZE);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T03:16:54.030

其实有点简单

```
curl_getinfo($ch, CURLINFO_SIZE_DOWNLOAD); 
```

[http://php.net/manual/en/function.curl-getinfo.php](http://php.net/manual/en/function.curl-getinfo.php)

# javascript - 我怎样才能把这段代码变成一个可重复的函数？

> ID：14742843
> 
> 赞同：-1
> 
> 时间：2013-02-07T03:07:53.267
> 
> 标签：javascript, jquery, function

我有以下代码和一组函数（在[这个 jsFiddle](http://jsfiddle.net/5PLfM/)中更容易阅读）。

```
<html>
<head>
   <title>Example</title>
   <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
   <script>
      // Returns the max Y value in our data list
      function getMaxY() {
         var max = 0;

         for(var i = 0; i < data.values.length; i++) {
            if(data.values[i].Y > max) {
               max = data.values[i].Y;
            }
         }

         max += 10 - max % 10;
         return max;
      }

      // Return the x pixel for a graph point
      function getXPixel(val) {
         return((graph.width() - xPadding) / data.values.length) * val + (xPadding * 1.5);
      }

      // Return the y pixel for a graph point
      function getYPixel(val) {
         return graph.height() - (((graph.height() - yPadding) / getMaxY()) * val) - yPadding + 10;
      }

      // Image
      draw_image = function(path, c) {
        var img;
        img = new Image();
        img.src = path;
        return img.onload = function() {
          return c.drawImage(img, getXPixel(data.values.length - 1) - 2, getYPixel(data.values.slice(-1)[0].Y + 20), 28, 28);
        };
      };

      var graph;
      var xPadding = -50;
      var yPadding = 20;
      var data = {values:[{X:"1",Y:12},{X:"2",Y:28},{X:"3",Y:58},{X:"4",Y:34},{X:"5",Y:40},{X:"6",Y:45},{X:"7",Y:40},{X:"8",Y:40},{X:"9",Y:40},{X:"13",Y:40},{X:"14",Y:60},{X:"15",Y:32},{X:"16",Y:40},{X:"17",Y:26},{X:"18",Y:40},{X:"19",Y:30},{X:"20",Y:35}]}

      $(document).ready(function() {

         graph = $('canvas');

         var c = graph[0].getContext('2d');

         c.lineWidth = 5;
         c.strokeStyle = '#fff';
         c.shadowColor = "rgba(0,0,0,0.13)";
         c.shadowOffsetX = 0;
         c.shadowOffsetY = 1;

         // Draw the line graph
         c.beginPath();
         c.moveTo(getXPixel(0), getYPixel(data.values[0].Y));
         for(var i = 1; i < data.values.length; i++) {
            c.lineTo(getXPixel(i), getYPixel(data.values[i].Y));
         }
         c.stroke();

         //Draw the ending icon
         draw_image("/images/icon.png", c);
      });
   </script>
</head>
<body>
   <section class="question_listing">
      <article data-question-id="1">
         <canvas width="200" height="70"></canvas>
      </article>
      <article data-question-id="2">
         <canvas width="200" height="70"></canvas>
      </article>
   </section>
</body>
</html> 
```

正如您在[jsFiddle](http://jsfiddle.net/5PLfM/)中看到的那样，图表仅在第一次出现时绘制`canvas`（正确如此）。

但我需要帮助的是把它变成可以重复的东西。

理想情况下，我可以做类似的事情`$('article canvas').littleChart();`并将其应用于该选择器的所有出现。

只是在这一点上迷路了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:20:56.957

您的 jquery 语句将返回页面上的所有画布。您只需要遍历它们中的每一个并应用您已有的内容。

在文档就绪函数中围绕代码循环：

```
$(document).ready(function() {

    graph = $('canvas');

    for (var ii=0; ii < graph.length; ii++) {

        var c = graph[ii].getContext('2d');

        c.lineWidth = 5;
        c.strokeStyle = '#fff';
        c.shadowColor = "rgba(0,0,0,0.13)";
        c.shadowOffsetX = 0;
        c.shadowOffsetY = 1;

        // Draw the line graph
        c.beginPath();
        c.moveTo(getXPixel(0),getYPixel(data.values[0].Y));
        for(var i = 1; i < data.values.length; i++) {
            c.lineTo(getXPixel(i), getYPixel(data.values[i].Y));
        }
        c.stroke();

        //Draw the ending icon
        draw_image("http://maps.google.com/mapfiles/kml/pal2/icon4.png", c);
    }
}); 
```

这应该可以解决问题。您可能想用像 canvasList 这样更具描述性的东西重命名“图形”。

# c++ - 在 C++ 中按值传递字符串和向量

> ID：14742844
> 
> 赞同：0
> 
> 时间：2013-02-07T03:07:54.580
> 
> 标签：c++, vector, reference, copy-constructor, stdstring

首先，我知道这是一件很糟糕的事情，因为它可能需要大量的内存复制……但由于我已经给出了规范，所以需要这样做。

无论如何，我试图通过引用传递一个字符串，并通过值传递一个向量，因为它将被编辑然后销毁，然后将再次使用原始的。

这是函数原型

```
int print (const string& findme,const string& command,const string& command2,const string& command3, int n, vector<string> list) 
```

这是我的电话，所有变量都是正确的类型。

```
print (special,command,command2,command3,n,temp); 
```

当我不尝试调用该函数时，一切都会编译并运行......但是当我这样做时，我得到了这个错误：

```
a2p1.cc: In function âint main(int, char**)â:
a2p1.cc:85: error: no match for call to â(std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >) (std::string&, std::string&, std::string&, std::string&, int&, std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >&)â 
```

所以我想知道......我应该如何将这些字符串和向量传递给函数，这些字符串可以通过引用传递，但我需要一个向量的副本，任何语法帮助都会非常有帮助！谢谢！

这里是变量

```
 int n;

    string command = "rr";
    string command3 = "null";
    string command2 = "f";
    string japan;
    string special;
    special = "fnord";
    string textFileName;

    vector<string> list;
    vector<string> print; 
```

这是第 83 行对函数的调用：

```
while (cin >> inputtemp)
{
...

if ((inputtemp == "p")){

print (special,command,command2,command3,n,list);

}// If
}// While 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:29:31.653

您有一个名为 的函数和一个变量`print`。

您实际上并没有调用该`print`函数。

重命名变量。

*（你的函数原型是正确的。它会做你描述的）*

再次查看您的错误以查看此内容。（我删除了模板以使其更简单）

```
error: no match for call to (std::vector) (std::string&, std::string&, std::string&, std::string&, int&, std::vector&) 
```

# lightbox - 自定义 Tumblr 照片集，灯箱不工作

> ID：14742855
> 
> 赞同：1
> 
> 时间：2013-02-07T03:08:35.937
> 
> 标签：lightbox, tumblr

我有一个自定义的 Tumblr 照片集设置，因此我可以加载高分辨率图像（以 500 像素作为后备）。单个照片帖子也是如此。不幸的是，由于某种原因，照片集不会像单张照片那样以灯箱格式打开。我使用的是 Effector 主题的修改版本，我**没有**使用该主题提供的自定义照片集。我的代码如下：

```
{block:Photoset}

{block:IfCustomPhotosets}{/block:IfCustomPhotosets}

{block:IfNotCustomPhotosets}
<div class="photo-slideshow" data-layout="{PhotosetLayout}">
{block:Photos}
<div class="photo-data">
<div class="photo">
<a class="lightbox" href="{PhotoURL-HighRes}" rel="lightbox[{PostID}]">
<img alt="{PhotoAlt}" src="{PhotoURL-500}" data-highres="{PhotoURL-HighRes}" class="{block:Caption}caption-yes{/block:Caption}" {block:Caption}data-caption="{Caption}"{/block:Caption}>
</a>
</div>
<div class="icons">
<a class="view" rel="post-{PostID}" href="{PhotoURL-HighRes}"><span class="zoom">Zoom</span></a>
<span class="info">Info</span>
</div>
</div>
{/block:Photos}
</div>
<!-- close SLIDESHOW -->
<div class="post-panel">
{block:Caption}<div class="copy">{Caption}</div>{/block:Caption}
{/block:IfNotCustomPhotosets}
{/block:Photoset} 
```

任何帮助让灯箱再次为这些照片集工作的帮助将不胜感激。

这是测试行为的链接：[http](http://rabbitislandtest.tumblr.com/) ://rabbitislandtest.tumblr.com/ 。由于这是一个测试站点，请使用以下临时密码访问主题：r4bbit

更新：我注意到在 Tumblr 自定义主题参考页面上可以添加 700 像素宽的照片集（[http://www.tumblr.com/docs/en/custom_themes#photoset-posts](http://www.tumblr.com/docs/en/custom_themes#photoset-posts)）。我尝试用这个替换代码，但无法让它工作。也许这将是一个解决方案，但我不太清楚如何实现它。

提前致谢。

# c++ - Qt 创建者添加外部库（仍然：无法打开包含文件：'GL/glew.h'）

> ID：14742856
> 
> 赞同：9
> 
> 时间：2013-02-07T03:08:48.357
> 
> 标签：c++, qt, qt4, qt-creator, qt5

我按照指示：

1.  在“项目”窗格中，打开项目文件 (.pro)。
2.  在代码编辑器中右键单击以打开上下文菜单并选择添加库...。

![添加库](../Images/17e64121ac3f1349da0e8785bb55c79f.png)

然后将以下行添加到 pro 文件中：

```
win32:CONFIG(release, debug|release): LIBS += -L$$PWD/D:/OpenGL/glew-1.5.4/lib/ -lglew32
else:win32:CONFIG(debug, debug|release): LIBS += -L$$PWD/D:/OpenGL/glew-1.5.4/lib/ -lglew32d

INCLUDEPATH += $$PWD/D:/OpenGL/glew-1.5.4/include
DEPENDPATH += $$PWD/D:/OpenGL/glew-1.5.4/include 
```

但是，我单击左下角的绿色三角形图标运行程序，仍然得到错误：

> 错误：C1083：无法打开包含文件：'GL/glew.h'：没有这样的文件或目录

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-25T06:58:13.213

我遇到了同样的问题，我刚刚想通了：你必须运行 qmake(build->run qmake) 来验证 pro 文件中的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T06:16:14.653

```
INCLUDEPATH += D:/OpenGL/glew-1.5.4/include
LIBS += -Lc:D:/OpenGL/glew-1.5.4/lib -lname 
```

只需在 .pro 文件中添加上述行。然后检查它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T21:14:04.630

检查所需文件是否真的存在于`D:/OpenGL/glew-1.5.4/include`. 即是否有一个名为 GL 的文件夹，其中有一个名为 glew.h 的文件？

然后尝试`$$PWD/`从路径中删除该部分。

如果这无助于仅用这两行替换生成的行：

```
LIBS += -L$$quote(D:/OpenGL/glew-1.5.4/lib/) -lglew32
INCLUDEPATH += $$quote(D:/OpenGL/glew-1.5.4/include) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-17T12:17:14.880

1.  使用编辑器打开`.pro`文件
2.  `INCLUDEPATH +=`在section中添加库目录

[![在此处输入图像描述](../Images/592f01b206c78b3d4b494b403031d82e.png)](https://i.stack.imgur.com/A7MBH.png)

```
 Append ` \` at the end of library path 
```

3.  去`Build > Run qmake`

[![在此处输入图像描述](../Images/20e8263827fb470cee69f22f2f897201.png)](https://i.stack.imgur.com/cqTmq.png)

4.  检查是否已包含库。

# ruby-on-rails - 启动独角兽进程时出现 Javascript 运行时错误

> ID：14742862
> 
> 赞同：0
> 
> 时间：2013-02-07T03:09:51.643
> 
> 标签：ruby-on-rails, ruby, capistrano, therubyracer

我试图通过运行这个来启动一个独角兽进程：

> 捆绑执行 unicorn_rails -p 8080

但它一直抛出这个错误

```
Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUnavailable) 
```

我在服务器上安装了 therubyracer gem。应用程序 gem 被捆绑到供应商/缓存中。我不想在 Gemfile 中包含 therubyracer，因为该应用程序是由 Capistrano 部署的，并且长时间的安装会占用 ssh 连接时间，这会导致它在中途被杀死。有关如何解决此问题的任何建议？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:51:19.297

execjs 可以调用几个不同的 javascript 运行时。

如果不想使用 ruby​​racer，可以安装 nodejs 代替。

`node`如果位于 $PATH 中，execjs 可以自动发现 nodejs 命令“node” 。

# c# - WPF如何打开Excel文件并逐个单元格地从文件中读取数据

> ID：14742863
> 
> 赞同：0
> 
> 时间：2013-02-07T03:10:06.390
> 
> 标签：c#, wpf, excel

我试图从 Excel 文件中引入和读取我有一个循环，每次它进入循环时我都喜欢读取新单元格让我们说“单元格 + 1”我在网上看到的分配和从 Excel 读取数据的方法很少但我不能让它们在 WPF/c# 中工作，对于如何引入存储在 c:/ExcelFolder/Excel.xls 中的 Excel 文件并从中读取数据有帮助

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:28:04.337

您需要使用 VSTO（Visual Studio Tools for Office）。

# scheme - 倍增功能

> ID：14742866
> 
> 赞同：1
> 
> 时间：2013-02-07T03:10:15.300
> 
> 标签：scheme, racket

使用

```
(define (double fn) (lambda (x) (fn (fn x)))) 
```

你能解释一下怎么做吗

```
((((double double) double) 1+) 0) 
```

等于16？？它是如何使用替换的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:38:19.033

该`double`函数接受另一个函数（让我们称之为 function `fn`）作为它的参数，然后返回一个接受一个任意参数的函数。它将参数传递给`fn`，然后将结果传递*给*，`fn`这就是结果。

例如：

```
> ((double add1) 1)
3 
```

它调用`add1`1，返回 2，然后调用`add1`2，得到结果 3。

在您的示例中，我们将 double 传递给自身，因此现在我们有一个过程，当给定 your 时`1+`，它将向我们给它的任何内容添加 4（因为我们有两个`double`'s，并且每个都`double`调用两个`1+`'s）。但是随后我们将我们的新过程传递给*另一个* `double`，这样我们就有了八个（我们已经创建`double`的所有四个都将调用两个）。`double`这八个电话中的每一个都调用`1+`了两次。

所以这个新过程将调用`1+`两次，八次，你给它的任何参数，因此将16添加到你传递给它的任何参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T18:38:04.513

> 它是如何使用替换的？

如果您使用的是 Racket，您可以使用 DrRacket 的 Stepper Tool 在“Intermediate Student with lambda”语言中查看确切的替换步骤。

# sql - 在比较日期时仅获取 DateTime 的日期部分

> ID：14742876
> 
> 赞同：0
> 
> 时间：2013-02-07T03:11:34.153
> 
> 标签：sql, oracle, datetime

我正在尝试在参数中的给定时间或之前从表中选择数据。

这是我当前的查询：

```
SELECT Expiry_Date FROM Table1
WHERE Expiry_Date <= :dateParam AND Expiry_Date > sysdate 
```

问题是我的表上的日期，例如 14-NOV-13 03.01.45.362000000 PM 的时间部分超过 12.00.00.000000000 AM 的数据没有在结果中返回。因此，如果我输入 14-NOV-13 作为参数，则不会返回 14-NOV-13 03.01.45.362000000 PM 的数据。

我如何才能获取日期部分或尝试在我的字段中使用日期列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T03:15:16.530

您可以在 Oracle 中执行任一操作。 `trunc`适用于日期时间：

```
where trunc(Expiry_date) <= :dateParam and Expiry_Date > trunc(sysdate) 
```

# aloha-editor - Aloha 编辑器自定义

> ID：14742884
> 
> 赞同：0
> 
> 时间：2013-02-07T03:12:24.340
> 
> 标签：aloha-editor

是否可以将[Aloha 编辑器](http://aloha-editor.org/)配置为仅显示粗体、斜体和下划线按钮，从而使整个工具栏不超过所需大小？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T03:18:23.873

是的，要自定义工具栏，请查看配置设置：

[http://aloha-editor.org/guides/ui.html#configuration](http://aloha-editor.org/guides/ui.html#configuration)

如果您在 GitHub 上查看演示应用程序，则会开始使用一个配置文件，您可以在其中添加此设置。

[https://github.com/alohaeditor/Aloha-Editor/blob/dev/src/demo/demo-app/app/js/demo-app-load.js](https://github.com/alohaeditor/Aloha-Editor/blob/dev/src/demo/demo-app/app/js/demo-app-load.js)

还有一个替代方法，您可以在以下位置查看 demo/3col 的源代码：

[http://aloha-editor.org/demos/3col/](http://aloha-editor.org/demos/3col/)

```
<script>
    var Aloha = window.Aloha || ( window.Aloha = {} );

    Aloha.settings = {
        locale: 'en',
        plugins: {
            format: {
                config: [  'b', 'i', 'p', 'sub', 'sup', 'del', 'title', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'pre', 'removeFormat' ],
                editables : {
                    // no formatting allowed for title
                    '#title'    : [ ]
                }
            },
            link: {
                editables : {
                    // No links in the title.
                    '#title'    : [  ]
                }
            },
            list: {
                editables : {
                    // No lists in the title.
                    '#title'    : [  ]
                }
            },
            abbr: {
                editables : {
                    // No abbr in the title.
                    '#title'    : [  ]
                }
            },
            image: {
                'fixedAspectRatio': true,
                'maxWidth': 1024,
                'minWidth': 10,
                'maxHeight': 786,
                'minHeight': 10,
                'globalselector': '.global',
                'ui': {
                    'oneTab': false
                },
                editables : {
                    // No images in the title.
                    '#title'    : [  ]
                }
            }
        },
        sidebar: {
            disabled: true
        },
        contentHandler: {
            allows: {
                elements: [
                    'a', 'abbr', 'b', 'blockquote', 'br', 'caption', 'cite', 'code', 'col',
                    'colgroup', 'dd', 'del', 'dl', 'dt', 'em', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6',
                    'i', 'img', 'li', 'ol', 'p', 'pre', 'q', 'small', 'strike', 'strong',
                    'sub', 'sup', 'table', 'tbody', 'td', 'tfoot', 'th', 'thead', 'tr', 'u',
                    'ul', 'span', 'hr', 'object', 'div'
                ],

                attributes: {
                    'a': ['href', 'title', 'id', 'class', 'target', 'data-gentics-aloha-repository', 'data-gentics-aloha-object-id'],
                    'div': [ 'id', 'class'],
                    'abbr': ['title'],
                    'blockquote': ['cite'],
                    'br': ['class'],
                    'col': ['span', 'width'],
                    'colgroup': ['span', 'width'],
                    'img': ['align', 'alt', 'height', 'src', 'title', 'width', 'class'],
                    'ol': ['start', 'type'],
                    'q': ['cite'],
                    'p': ['class'],
                    'table': ['summary', 'width'],
                    'td': ['abbr', 'axis', 'colspan', 'rowspan', 'width'],
                    'th': ['abbr', 'axis', 'colspan', 'rowspan', 'scope', 'width'],
                    'ul': ['type'],
                    'span': ['class','style','lang','xml:lang']
                },

                protocols: {
                    'a': {'href': ['ftp', 'http', 'https', 'mailto', '__relative__']},
                    'blockquote': {'cite': ['http', 'https', '__relative__']},
                    'img': {'src' : ['http', 'https', '__relative__']},
                    'q': {'cite': ['http', 'https', '__relative__']}
                }
            }
        }
    };
</script>

<script type="text/javascript" src="http://cdn.aloha-editor.org/latest/lib/aloha.js"
            data-aloha-plugins="common/ui,
                                common/format,
                                common/table,
                                common/list,
                                common/link,
                                common/highlighteditables,
                                common/block,
                                common/undo,
                                common/image,
                                common/contenthandler,
                                common/paste,
                                common/commands,
                                common/abbr"></script>

<!-- turn an element into editable Aloha continuous text -->
<script type="text/javascript">
Aloha.ready(function() {
    $('#title').aloha();
    $('#multicolumnElement').aloha();
});

</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-07T20:50:58.583

即使在阅读了这个答案之后，我也花了一段时间才弄清楚如何做同样的事情。

这是我所做的：

```
<script language="javascript">
        Aloha = window.Aloha || {};

        Aloha.settings = {
            plugins: {
                format: {
                    config:  [ 'b', 'i', 'u','del']
                }
            },
            toolbar: {
                exclude: ['formatBlock', '\n','subscript', 'superscript']
            },
            sidebar: {
                disabled: true
            }
        };

        </script>
        <script src="/src/aloha/lib/aloha.js"
        data-aloha-plugins="common/ui,common/format"></script> 
```

该代码需要注意的关键点：

*   Aloha.settings 在包含 aloha.js 之前定义
*   plugins.format.config 设置格式插件可用的按钮
*   toolbar.exclude 摆脱了我不想要的东西。
*   我的配置包括“del”，它是删除线选项，而不是 OP 请求的选项的一部分。

我可能不需要删除下标和上标，因为它们不在配置中我并不担心，因为这对我有用，而且我不在乎我是否有一些不需要的配置选项。

# sockets - Lua检测从同一主机发送到多播组的数据包？

> ID：14742891
> 
> 赞同：1
> 
> 时间：2013-02-07T03:13:17.810
> 
> 标签：sockets, lua, udp

我正在使用 lua 套接字库与多播组通信。我遇到的问题是，每当主机向组发送数据包时，监听该组的套接字将接收自己的流量。

起初，我认为我需要做的就是，在第一次发送数据包后，获取**地址：端口**，并将其与匹配的消息进行`udpSocket:getsocketname()`比较，`udpSocket:receivefrom()`并且不处理匹配的消息。但是，这些根本不匹配。 `:getsocketname()`将报告**"0.0.0.0"**作为 ip，而来自的 ip`:receivefrom()`是我的实际 ip **("something.not.all.zeroes")**。

除了尝试发送一些数据以及可以唯一识别它的每个数据包之外，我不知道处理这个问题的好方法，并且不处理来自同一主机的数据包。

# python - Interpolation Function

> ID：14742893
> 
> 赞同：2
> 
> 时间：2013-02-07T03:13:31.030
> 
> 标签：python, matlab, pandas, gps

This is probably a very easy question, but all the sources I have found on interpolation in Matlab are trying to correlate two values, all I wanted to benefit from is if I have data which is collected over an 8 hour period, but the time between data points is varying, how do I adjust it such that the time periods are equal and the data remains consistent?

Or to rephrase from the approach I have been trying: I have GPS lat,lon and Unix time for these points; what I want to do is take the lat and lon at time 1 and time 3 and for the case where I don't know time 2, simply fill it with data from time 1 - is there a functional way to do this? (I know in something like Python Pandas you can use fill) but I'm unsure of how to do this in Matlab.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T06:44:46.640

您可以查看 MATLAB 中的拟合方法。例如，您可以查看`polyfit`或`splines`。我们来看看`polyfit`，它的使用方法是：

```
P = polyfit(X,Y,N); 
```

这里 X 是您的时间数据，Y 是您在 X 中的时间值测量的 GPS 数据。N 是多项式的阶数。当您计算 P 时，您可以将`polyval`函数用作：

```
Y1 = polyval(P,X1); 
```

这里 X1 是统一的时间样本，例如 X1=[1 2 3 4 5 6 7 8] 在您的情况下，Y1 将是那些时间的估计数据， P 是您使用`polyfit`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T15:16:31.990

你可以做的是使用 interp1 函数。此功能将以不同的方式适合新 X 系列的数字。例如，如果您有 x=[1 3 5 6 10 12] y=[15 20 17 33 56 89]

这意味着如果您想填写 x1=[1 2 3 4 5 6 7 ... 12]，您将输入 y1=interp1(x,y,x1)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-09T01:11:28.400

您可以尝试以下方法：

```
 resampledTime = min(unixTime):resampleInterval:max(unixTime);
 resampledLat = interp1(time,lat,resampledTime);
 resampledLon = interp1(time,lon,resampledTime); 
```

默认情况下，这将返回一维线性插值。有关详细信息，请参阅`help interp1`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-11T23:00:48.867

有一个名为[interparc.m](http://www.mathworks.co.uk/matlabcentral/fileexchange/34874-interparc/content/interparc.m)的 MATLAB 函数将使您受益。它通过点拟合三次样条，并将生成的线分成相等的弧长（取决于用户输入的点数）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T15:18:08.357

我认为您正在寻找“零阶保持”插值，即“最近邻”

你为什么不试试[`interp`](http://www.mathworks.com/help/matlab/ref/interp1.html)方法`'nearest'`？

# resize - 如何在选择输入更改时调整TinyMCE弹出窗口的大小？

> ID：14742896
> 
> 赞同：1
> 
> 时间：2013-02-07T03:13:49.003
> 
> 标签：resize, popup, tinymce

我有一个TinyMCE弹出窗口，显示/隐藏某些元素时选择输入更改。有没有办法可以调整弹出窗口的大小以反映身体的新高度，而不是强迫用户自己调整弹出窗口的大小？

`TinyMCEPopup.resizeToInnerSize();`始终将弹出窗口的大小调整为原始大小，而不是新大小（它会切断显示的元素）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:44:49.957

我通过在创建插件时添加这样的命令解决了这个问题：

```
ed.addCommand( 'PluginName_Resize', function( ui, v ) {
    ed.windowManager.params.mce_height = v.height + 10;
} ); 
```

使 body 元素具有 id `body-id`( `<body id="body-id">...</body>`)

然后在选择输入更改时：

```
var window = tinyMCEPopup.dom.getSize( 'body-id' );
tinyMCEPopup.execCommand( 'PluginName_Resize', false, { height : window.h } );
tinyMCEPopup.resizeToInnerSize(); 
```

# python - 将 cookies.txt 文件与 Python 请求一起使用

> ID：14742899
> 
> 赞同：22
> 
> 时间：2013-02-07T03:14:12.850
> 
> 标签：python, cookies, python-requests, cookielib

我正在尝试使用`cookies.txt`带有 Python 请求的文件（使用 Chrome 扩展程序生成）访问经过身份验证的站点：

```
import requests, cookielib

cj = cookielib.MozillaCookieJar('cookies.txt')
cj.load()
r = requests.get(url, cookies=cj) 
```

它不会抛出任何错误或异常，但会错误地产生登录屏幕。但是，我知道我的 cookie 文件是有效的，因为我可以使用`wget`. 知道我做错了什么吗？

**编辑：**

我正在跟踪`cookielib.MozillaCookieJar._really_load`并且可以验证 cookie 是否已正确解析（即它们具有正确的`domain`、`path`、`secure`等标记值）。但是由于事务仍然导致登录表单，似乎`wget`必须做一些额外的事情（因为完全相同的`cookies.txt`文件适用于它）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-07T19:47:16.233

`MozillaCookieJar`继承自`FileCookieJar`which 在其构造函数中具有以下文档字符串：

```
Cookies are NOT loaded from the named file until either the .load() or
.revert() method is called. 
```

然后你需要调用`.load()`方法。

此外，就像 Jermaine Xu 指出的那样，文件的第一行需要包含一个`# Netscape HTTP Cookie File`或`# HTTP Cookie File`字符串。您使用的插件生成的文件不包含这样的字符串，因此您必须自己插入。[我在http://code.google.com/p/cookie-txt-export/issues/detail?id=5](http://code.google.com/p/cookie-txt-export/issues/detail?id=5)提出了适当的错误

**编辑**

会话 cookie 在第 5 列中保存为 0。如果您不传递`ignore_expires=True`给`load()`方法，则在从文件加载时会丢弃所有此类 cookie。

文件`session_cookie.txt`：

```
# Netscape HTTP Cookie File
.domain.com TRUE    /   FALSE   0   name    value 
```

Python脚本：

```
import cookielib

cj = cookielib.MozillaCookieJar('session_cookie.txt')
cj.load()
print len(cj) 
```

输出： `0`

**编辑 2**

尽管我们设法将 cookie 放入上面的 jar 中，但它们随后[被丢弃](http://hg.python.org/cpython/file/70274d53c1dd/Lib/cookielib.py#l776)，`cookielib`因为它们在属性中仍然具有`0`值。`expires`为了防止这种情况，我们必须将过期时间[设置](https://stackoverflow.com/questions/6556930/)为将来的某个时间，如下所示：

```
for cookie in cj:
    # set cookie expire date to 14 days from now
    cookie.expires = time.time() + 14 * 24 * 3600 
```

**编辑 3**

我检查了 wget 和 curl 并且都使用`0`过期时间来表示会话 cookie，这意味着它是事实上的标准。然而 Python 的实现使用空字符串来达到同样的目的，因此问题中提出了问题。我认为 Python 在这方面的行为应该与 wget 和 curl 所做的一致，这就是为什么我在[http://bugs.python.org/issue17164](http://bugs.python.org/issue17164)
提出了这个错误 我会注意到`0`在第 5 列用空字符串替换 s输入文件并传递`ignore_discard=True`给`load()`是解决问题的替代方法（在这种情况下无需更改到期时间）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-02-12T22:15:49.053

我尝试考虑 Piotr Dobrogost 勇敢地想出的一切，`MozillaCookieJar`但无济于事。我受够了，只是`cookies.txt`自己解析了该死的，现在一切都很好：

```
import re
import requests

def parseCookieFile(cookiefile):
    """Parse a cookies.txt file and return a dictionary of key value pairs
    compatible with requests."""

    cookies = {}
    with open (cookiefile, 'r') as fp:
        for line in fp:
            if not re.match(r'^\#', line):
                lineFields = line.strip().split('\t')
                cookies[lineFields[5]] = lineFields[6]
    return cookies

cookies = parseCookieFile('cookies.txt')

import pprint
pprint.pprint(cookies)

r = requests.get('https://example.com', cookies=cookies) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-03-24T06:10:16.457

这对我有用：

```
from http.cookiejar import MozillaCookieJar
from pathlib import Path
import requests

cookies = Path('/Users/name/cookies.txt')
jar = MozillaCookieJar(cookies)
jar.load()
requests.get('https://path.to.site.com', cookies=jar)
<Response [200]> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-06T06:50:19.840

我尝试编辑 Tristan 答案以向其中添加一些信息，但似乎 SO edit q 已满，因此，我正在编写此答案，因为在将现有 cookie 与 python 请求一起使用时，我一直在苦苦挣扎。

1.  首先，从 Chrome 中获取 cookie。最简单的方法是使用名为“cookies.txt”的扩展

```
https://chrome.google.com/webstore/detail/get-cookiestxt/bgaddhkoddajcdgocldbbfleckgcbcid/related 
```

2.  下载这些 cookie 后，使用以下代码确保您能够毫无问题地解析文件。

```
import re, requests, pprint

def parseCookieFile(cookiefile):
    """Parse a cookies.txt file and return a dictionary of key value pairs
    compatible with requests."""

    cookies = {}
    with open (cookiefile, 'r') as fp:
        for line in fp:
            if not re.match(r'^\#', line):
                lineFields = re.findall(r'[^\s]+', line) #capturing anything but empty space
                try:
                    cookies[lineFields[5]] = lineFields[6]
                except Exception as e:
                    print (e)

    return cookies

cookies = parseCookieFile('cookies.txt') #replace the filename
pprint.pprint(cookies) 
```

3.  接下来，将这些 cookie 与 python 请求一起使用

```
x = requests.get('your__url', verify=False, cookies=cookies)
print (x.content) 
```

这应该可以让您免于阅读不同的 SO 帖子并尝试那些对我没有用的 cookielib 和其他方法。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-07T22:21:53.757

我终于找到了一种让它工作的方法（我通过查看`curl`'s 的详细输出得到了这个想法）：我没有从文件中加载我的 cookie，而是简单地创建了一个`dict`带有所需`value/name`对的：

```
cd = {'v1': 'n1', 'v2': 'n2'}
r = requests.get(url, cookies=cd) 
```

它起作用了（尽管它没有解释为什么以前的方法没有）。感谢所有帮助，非常感谢。

# java - 使用 JSONReader 或 JSONObject/JSONArray 解析 JSON 数据

> ID：14742902
> 
> 赞同：8
> 
> 时间：2013-02-07T03:14:31.647
> 
> 标签：java, android, json

我有一些 JSON（如下所示），我正在尝试解析整个 JSON，每个对象都将是一个声明下面变量的类的新实例。做这个的最好方式是什么？我应该使用 JSONReader 还是使用 JSONObject 和 JSONArray。我一直在阅读一些教程并提出一些一般性问题，但我还没有看到任何关于如何解析这样的数据的示例。

```
{
    "id": 356,
    "hassubcategories": true,
    "subcategories": [
        {
            "id": 3808,
            "CategoryName": "Current Products",
            "CategoryImage": null,
            "hassubcategories": true,
            "subcategories": [
                {
                    "id": 4106,
                    "CategoryName": "Architectural",
                    "CategoryImage": "2637",
                    "hassubcategories": true,
                    "subcategories": [
                        {
                            "id": 391,
                            "CategoryName": "Flooring",
                            "CategoryImage": "2745",
                            "hassubcategories": false
                        }
                    ]
                }
            ]
        },
        {
            "id": 3809,
            "CategoryName": "Non-Current Products",
            "CategoryImage": null,
            "hassubcategories": true,
            "subcategories": [
                {
                    "id": 4107,
                    "CategoryName": "Desk",
                    "CategoryImage": "2638",
                    "hassubcategories": true,
                    "subcategories": [
                        {
                            "id": 392,
                            "CategoryName": "Wood",
                            "CategoryImage": "2746",
                            "hassubcategories": false
                        }
                    ]
                }
            ]
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-06-16T13:14:23.187

只有当您的 json 数据大小小于 1MB 时，您才能使用 JSON Object/JSON Array。否则，您应该使用 JSONReader。JSONReader 实际上使用流式方法，而 JSONObject 和 JSONArray 最终一次将所有数据加载到 RAM 上，这在更大的 json 的情况下会导致 OutOfMemoryException。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-07T03:22:32.927

当您必须使用嵌套对象时，GSON 是最简单的方法。

像这样：

```
//after the fetched Json:
Gson gson = new Gson();

Event[] events = gson.fromJson(yourJson,  Event[].class);

//somewhere nested in the class:
static class Event{
    int id;
    String categoryName;
    String categoryImage;
    boolean hassubcategories;
    ArrayList<Event> subcategories;
} 
```

您可以查看本教程， [http://androidsmith.com/2011/07/using-gson-to-parse-json-on-android/](http://androidsmith.com/2011/07/using-gson-to-parse-json-on-android/) 或[http://www.javacodegeeks.com/2011/01/android-json -parsing-gson-tutorial.html](http://www.javacodegeeks.com/2011/01/android-json-parsing-gson-tutorial.html)或[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T03:24:59.313

如果我这样做，我会将整个字符串解析为 JSONObject

```
JSONObject obj = new JSONObject(str); 
```

然后我看到您的子类别是 JSONArray。所以我会像这样转换它

```
JSONArray arr = new JSONArray(obj.get("subcategories")); 
```

有了这个，你可以做一个循环并实例化你的类对象

```
for(int i = 0; i < arr.length; i++)
JSONObject temp = arr.getJSONObject(i);
Category c = new Category();
c.setId(temp.get("id")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-02T12:07:45.037

这是一个使用 Gson 通过 JsonReader 对对象数组列表建模的简单示例：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    tv = (TextView) findViewById(R.id.textviewtest);
    Task task = new Task();
    task.execute();
}

private class Task extends AsyncTask<Void, Void, ArrayList<Flower>> {

    @Override
    protected ArrayList<Flower> doInBackground(Void... params) {

        ArrayList<Flower> arrayFlowers = new ArrayList<Flower>();
        Flower[] f = null;
        try {
            String uri = "http://services.hanselandpetal.com/feeds/flowers.json";
            URL url = new URL(uri);
            HttpURLConnection con = (HttpURLConnection) url.openConnection();
            Gson gson = new Gson();

            JsonReader reader = new JsonReader(new InputStreamReader(con.getInputStream()));
            f = gson.fromJson(reader, Flower[].class);

            for (Flower flower : f) {
                arrayFlowers.add(flower);
            }
        } catch (MalformedURLException e) {
            return null;
        } catch (IOException e) {
            return null;
        }
        return arrayFlowers;
    }
    @Override
    protected void onPostExecute(ArrayList<Flower> result) {
        StringBuilder sb = new StringBuilder();
        for (Flower flower : result) {
            sb.append(flower.toString());
        }
        tv.setText(sb.toString());
    }
} 
```

和我建模的对象：

```
public class Flower {

private String category;
private double price;
private String instructions;
private String photo;
private String name;
private int productId;

public String getCategory() {
    return category;
}
public void setCategory(String category) {
    this.category = category;
}
public double getPrice() {
    return price;
}
public void setPrice(double price) {
    this.price = price;
}
public String getInstructions() {
    return instructions;
}
public void setInstructions(String instructions) {
    this.instructions = instructions;
}
public String getPhoto() {
    return photo;
}
public void setPhoto(String photo) {
    this.photo = photo;
}
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public int getProductId() {
    return productId;
}
public void setProductId(int productId) {
    this.productId = productId;
}
@Override
public String toString() {
    return getProductId() + " : " + name + "\n" + price + "$" + "\n" + "\n";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T03:32:49.430

您发布的示例 JSON 数据似乎不遵循 JSON 的数据结构。您将需要完全按照Mustafa 发布的第三个[链接](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)中所教的方式构建数据。这是一个非常棒的教程。我按照步骤操作，它确实有效！

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2019-10-04T19:03:58.273

这是我用来解析嵌套 JSON 对象中所有记录的代码。

使用 BSON 时，它以`object`. 因此，为了使用与实际类型（`int`、`Document`、`ArrayList`等）关联的方法，您必须将返回值强制转换为预期的类型。

```
 // import java.util.ArrayList;
 // import org.bson.Document;

 Document root = Document.parse("{ \"id\" : 356, \"hassubcategories\" : true, \"subcategories\" : [{ \"id\" : 3808, \"CategoryName\" : \"Current Products\", \"CategoryImage\" : \"image.img\", \"hassubcategories\" : true, \"subcategories\" : [{ \"id\" : 4106, \"CategoryName\" : \"Architectural\", \"CategoryImage\" : \"2637\", \"hassubcategories\" : true, \"subcategories\" : [{ \"id\" : 391, \"CategoryName\" : \"Flooring\", \"CategoryImage\" : \"2745\", \"hassubcategories\" : false }] }] }, { \"id\" : 3809, \"CategoryName\" : \"Non-Current Products\", \"CategoryImage\" : \"image.img\", \"hassubcategories\" : true, \"subcategories\" : [{ \"id\" : 4107, \"CategoryName\" : \"Desk\", \"CategoryImage\" : \"2638\", \"hassubcategories\" : true, \"subcategories\" : [{ \"id\" : 392, \"CategoryName\" : \"Wood\", \"CategoryImage\" : \"2746\", \"hassubcategories\" : false }] }] }] }");

 System.out.println((root.get("id")));
 System.out.println((root.get("hassubcategories")));
 System.out.println((((Document)((ArrayList)root.get("subcategories")).get(0)).get("id")));
 System.out.println(((String)((Document)((ArrayList)root.get("subcategories")).get(0)).get("CategoryName")));
 System.out.println(((String)((Document)((ArrayList)root.get("subcategories")).get(0)).get("CategoryImage")));
 System.out.println((((Document)((ArrayList)root.get("subcategories")).get(0)).get("hassubcategories")));
 System.out.println((((Document)((ArrayList)((Document)((ArrayList)root.get("subcategories")).get(0)).get("subcategories")).get(0)).get("id")));
 System.out.println(((String)((Document)((ArrayList)((Document)((ArrayList)root.get("subcategories")).get(0)).get("subcategories")).get(0)).get("CategoryName")));
 System.out.println(((String)((Document)((ArrayList)((Document)((ArrayList)root.get("subcategories")).get(0)).get("subcategories")).get(0)).get("CategoryImage")));
 System.out.println((((Document)((ArrayList)((Document)((ArrayList)root.get("subcategories")).get(0)).get("subcategories")).get(0)).get("hassubcategories")));
 System.out.println((((Document)((ArrayList)((Document)((ArrayList)((Document)((ArrayList)root.get("subcategories")).get(0)).get("subcategories")).get(0)).get("subcategories")).get(0)).get("id")));
 System.out.println(((String)((Document)((ArrayList)((Document)((ArrayList)((Document)((ArrayList)root.get("subcategories")).get(0)).get("subcategories")).get(0)).get("subcategories")).get(0)).get("CategoryName")));
 System.out.println(((String)((Document)((ArrayList)((Document)((ArrayList)((Document)((ArrayList)root.get("subcategories")).get(0)).get("subcategories")).get(0)).get("subcategories")).get(0)).get("CategoryImage")));
 System.out.println((((Document)((ArrayList)((Document)((ArrayList)((Document)((ArrayList)root.get("subcategories")).get(0)).get("subcategories")).get(0)).get("subcategories")).get(0)).get("hassubcategories")));
 System.out.println((((Document)((ArrayList)root.get("subcategories")).get(1)).get("id")));
 System.out.println(((String)((Document)((ArrayList)root.get("subcategories")).get(1)).get("CategoryName")));
 System.out.println(((String)((Document)((ArrayList)root.get("subcategories")).get(1)).get("CategoryImage")));
 System.out.println((((Document)((ArrayList)root.get("subcategories")).get(1)).get("hassubcategories")));
 System.out.println((((Document)((ArrayList)((Document)((ArrayList)root.get("subcategories")).get(1)).get("subcategories")).get(0)).get("id")));
 System.out.println(((String)((Document)((ArrayList)((Document)((ArrayList)root.get("subcategories")).get(1)).get("subcategories")).get(0)).get("CategoryName")));
 System.out.println(((String)((Document)((ArrayList)((Document)((ArrayList)root.get("subcategories")).get(1)).get("subcategories")).get(0)).get("CategoryImage")));
 System.out.println((((Document)((ArrayList)((Document)((ArrayList)root.get("subcategories")).get(1)).get("subcategories")).get(0)).get("hassubcategories")));
 System.out.println((((Document)((ArrayList)((Document)((ArrayList)((Document)((ArrayList)root.get("subcategories")).get(1)).get("subcategories")).get(0)).get("subcategories")).get(0)).get("id")));
 System.out.println(((String)((Document)((ArrayList)((Document)((ArrayList)((Document)((ArrayList)root.get("subcategories")).get(1)).get("subcategories")).get(0)).get("subcategories")).get(0)).get("CategoryName")));
 System.out.println(((String)((Document)((ArrayList)((Document)((ArrayList)((Document)((ArrayList)root.get("subcategories")).get(1)).get("subcategories")).get(0)).get("subcategories")).get(0)).get("CategoryImage")));
 System.out.println((((Document)((ArrayList)((Document)((ArrayList)((Document)((ArrayList)root.get("subcategories")).get(1)).get("subcategories")).get(0)).get("subcategories")).get(0)).get("hassubcategories"))); 
```

# php - 即使存在两个条目，数据库查询也会返回 0 行

> ID：14742905
> 
> 赞同：0
> 
> 时间：2013-02-07T03:14:51.803
> 
> 标签：php, mysql, sql, database, mysqli

我正在将一些文件上传到数据库，我想要一个 PHP 表单，可以在输入序列码时检索有问题的文件。我在数据库中有两个条目，但我的 PHP 表单一直将其返回为 0 行。我感谢提供的任何帮助。再次感谢大家的帮助，让我尝试加入了解php的行列。

表单总是返回：“未找到数据。请检查您的序列码以确保您没有输入错误。如果代码正确，请向网站管理员发送电子邮件以获得进一步的帮助”，就好像没有行一样。

```
<?php
if( $_POST )
{
$username="st*****";
$password="*****";
    $con = mysqli_connect("storycodes.db.10339998.hostedresource.com",$username,$password);

    if (!$con)
    {
        die('Could not connect: ' . mysql_error());
    }

    mysqli_select_db($con, "storycodes");

$code = $_POST['codeInput'];
$code = mysqli_escape_string($con, htmlspecialchars($code)); //May not acually need htmlspecialchars
$query = "SELECT story,video FROM `storycodes` WHERE `code` = 'code'";
$result = mysqli_query($con, $query);

  if (mysqli_num_rows($result)) 
  {
    $row = mysqli_fetch_assoc($result);
    mysqli_free_result($result); 
    extract($row);
    echo $story . $video;
  }
   else 
  {
   echo "No Data Found. Please check your serial code to ensure that you have not incorrectly entered it. If the code is correct please email the website administrator for further assistance";
  }         

mysqli_close($con);

}
?> 
```

数据库条目：列是（如果这有帮助的话）：代码、电子邮件、视频和故事

b2348-5dfae-73c0c-57685 s* *** @yahoo.com ../story_files/story.txt

90a93-785e4-03cad-a18d5 w*@ *** *.com ../video_files/story.txt ../story_files/story.txt

代码正在通过这种形式发布：

```
<link href="/CSS/CSS.css" rel="stylesheet" type="text/css">

<p align="center"><span class="linkText"><a href="/index.html">Home</a> <a href="/contact-us.php">Contact Us</a> <a href="/payments.html">Payments</a></span></p>
<p align="center">&nbsp;</p>
<p align="center"><span class="headingText"><img alt="legendmaker - makes legends: banner" width="728" height="90" /></span></p>
<p align="center">&nbsp;</p>
<div align="center" class="headingText">Enter Your Serial Code Below To Continue Your Adventure!</div>

<p>&nbsp;</p>
<form name="form1" method="post" action="/scripts/stories.php">
  <label>
  <div align="center"><span class="formText">Your Serial Code:
    <input name="codeInput" type="text" id="codeInput" size="23" maxlength="23">
  </span></div>
  </label>
  <div align="center"><span class="formText">
  </span></div>
  <span class="formText"><label> 
  <div align="center"><br>
  </div>
  </label>
  </span>
  <label>
  <div align="center"><br>
      <input type="submit" name="submit" id="submit" value="Submit">
  </div>
  </label>
</form>

<p>&nbsp;</p>
<p class="headingText">&nbsp;</p>
<p align="center" class="headingText">Can't find your code?</p>
<p align="center" class="paragraphText">Request an email with your code below.</p>
<form name="form2" method="post" action="/scripts/code_request.php">
  <label class="formText">
  <div align="center">Email:
    <input type="text" name="email" id="email">
  </div>
  </label>
  <p align="center">
    <label>
    <input type="submit" name="submit2" id="submit2" value="Submit">
    </label>
  </p>
</form>
<p>&nbsp;</p> 
```

不要介意HTML，非常感谢您的帮助。我都搞混了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:17:41.927

```
$query = "SELECT story,video FROM `storycodes` WHERE `code` = 'code'"; 
```

你在哪里引用你的变量 $code 在这一行？....

提示 -`$`标志很重要...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T03:21:36.743

```
$query = "SELECT story,video FROM `storycodes` WHERE `code` = 'code'"; 
```

是不存在的`$`。

试试这个：

```
$query = "SELECT story,video FROM `storycodes` WHERE `code` = '$code'"; 
```

或这个：

```
$query = "SELECT story,video FROM `storycodes` WHERE `code` = '".$code."'"; 
```

# javascript - Bootstrap 修复了 div 内的导航栏

> ID：14742906
> 
> 赞同：9
> 
> 时间：2013-02-07T03:15:10.183
> 
> 标签：javascript, html, twitter-bootstrap

在[引导文档](http://twitter.github.com/bootstrap/components.html#navbar)中，他们能够`.navbar-fixed-top`在其`.bs-docs-example`div 中“捕获” a：

```
<div class="bs-docs-example bs-navbar-top-example">
    <div class="navbar navbar-fixed-top" style="position: absolute;">
        <div class="navbar-inner">
        [...] 
```

但是如果我在我的测试页面中做同样的事情，导航栏会“转义” div 并固定在 body 的顶部，而不是 div 的顶部。诀窍是如何实现的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T17:42:36.740

好的，想通了。父元素容器必须具有`position: relative`，并且导航栏必须具有`position: absolute`，这样，如果您附加任何一个`.navbar-fixed-top`，否则`.navbar-fixed-bottom`它将相对于父元素而不是相对于整个页面固定。是的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-07T23:07:35.777

```
<div class="container-fluid">
    <div class="container">
        <nav class="navbar">...</nav>
    </div>
</div> 
```

这适用于内置的 Bootstrap 的 CSS。

# android - Android - Dealing with bitmaps allocated in a Vector class

> ID：14742909
> 
> 赞同：1
> 
> 时间：2013-02-07T03:15:21.733
> 
> 标签：android, bitmap, heap-memory

So basically, I have a Vector class in which all bitmaps are stored so that I can have a dynamic array. What I actually do is something like this:

```
Bitmap bmp = Bitmap.decodeResource(context.getResources(), context.getResources().getIdentifier(imageName, "drawable", "com.example.dynamicbitmap");
vector.add(bmp);

```

What I would like to ask is that.. if I call `vector.remove(value)`, would it free some space in heap space? In short, would the bitmap be automatically recycled? Or do I have to manually invoke it before removing the bitmap object from the vector?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:25:41.170

它不会立即释放内存。只要 GarbageCollector 决定这样做，就会对过时的位图进行 GC。所以基本上你不必打电话`recycle()`，但`OutOfMemoryException`如果你会用完内存，你可以结束。

如果你想尽快释放内存 - 你需要`recycle()`打电话

# javascript - Why do JavaScript widgets (like Tweet Button and Facebook Like) add the script dynamically?

> ID：14742910
> 
> 赞同：4
> 
> 时间：2013-02-07T03:15:57.687
> 
> 标签：javascript, html, facebook, twitter

Both the [Tweet Button](https://dev.twitter.com/docs/tweet-button) and [Facebook Like](https://developers.facebook.com/docs/reference/plugins/like/) widgets tell you to add something like this to your HTML:

```
<script>
!function(d,s,id){
    var js,fjs=d.getElementsByTagName(s)[0];
    if(!d.getElementById(id)){
        js=d.createElement(s);
        js.id=id;
        js.src="https://platform.twitter.com/widgets.js";
        fjs.parentNode.insertBefore(js,fjs);
    }
}(document,"script","twitter-wjs");
</script> 
```

which dynamically adds a `<script>` element to the DOM which then loads the actual widget JavaScript. Why is this done dynamically instead of directly loading the widget like this (which is simpler and cleaner):

```
<script src="https://platform.twitter.com/widgets.js"></script> 
```

The only reason I can think of is that it defers the script load until the page has loaded, but this can just as easily be accomplished by placing the `<script>` just before the `</body>` close.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:20:14.350

因为无法保证实现此代码的人员有足够的能力将脚本放置在正确的位置。此外，理想情况下，该脚本应该足够通用，任何使用任何系统的人都可以轻松实现它。

一些 CMS 不允许对脚本添加到页面的位置进行细粒度控制。提供更多人可以使用而不会造成混淆的代码符合社交网络的最大利益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T03:25:00.947

当您添加这样的脚本时，它会异步加载，并且不会阻止 HTML 的其余部分加载。如果它只是`<script>`添加到 的标签`<head>`，则在脚本完成加载之前不会解析 HTML 的其余部分，这可能会影响用户体验。但是，如果您在`<script>`之前添加块，您将获得几乎相同的异步加载结果`</body>`。

（我猜这就是 zzzzBov 所说的“正确的地方”。）

# python - Read Matlab matrix into Python

> ID：14742913
> 
> 赞同：8
> 
> 时间：2013-02-07T03:16:26.320
> 
> 标签：python, matlab, python-2.7, scipy

When I'm trying to read a Matlab matrix into python, I get the following error

```
>>> scipy.io.loadmat("Dynamical.mat")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/dist-packages/scipy/io/matlab/mio.py", line 151, in loadmat
    MR = mat_reader_factory(file_name, appendmat, **kwargs)
  File "/usr/lib/python2.7/dist-packages/scipy/io/matlab/mio.py", line 105, in mat_reader_factory
    mjv, mnv = get_matfile_version(byte_stream)
  File "/usr/lib/python2.7/dist-packages/scipy/io/matlab/miobase.py", line 221, in get_matfile_version
    % ret)
ValueError: Unknown mat file type, version 46, 48 
```

The Dynamical.mat is a file containing the matrix

```
% Size = 30 30 
% Nonzeros = 252 
zzz = zeros(252,3);
zzz = [
1 1  1.4019896354966477e+01
1 2  0.0000000000000000e+00
1 3  0.0000000000000000e+00
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-09T14:14:45.350

这个问题似乎有一段时间不活跃，但如果您仍然需要阅读此`.mat`文件，最好让一个替代方案，假设它始终采用您指定的格式：

```
def read_mat( file_path ):
    import numpy as np
    mat = open(file_path, 'r')
    mat.next() # % Size = 30 30
    length = int(mat.next().split()[-1])
    mat.next() # zzz = zeros(18,3)
    mat.next() # zzz = [
    ans = np.array([ map(float, mat.next().split()) for i in xrange(length) ])
    mat.close()
    return ans 
```

# rapidminer - problems of loading large csv file into rapidminer

> ID：14742918
> 
> 赞同：1
> 
> 时间：2013-02-07T03:16:43.770
> 
> 标签：rapidminer

I am trying to load a big csv file(about 18G) into rapidminer for building a classification model. The “import configuration wizard” seems has difficulty in loading the data. Therefore, I choose to use the “Edit parameter list: data set meta data information” to set up the attribute and label information. However, the UI-interface only allows me to setup those information column-by-column. My csv file has about 80000 columns. How should I handle this kind of scenario? Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:56:23.750

我自己还没有尝试过，但是您应该能够将 CSV 加载到 MySQL 数据库中。然后，您可以使用流数据库运算符来避免大小限制。以下是 RapidMiner 的描述：

> 与将数据加载到主存中的Read Database算子相比，Stream Database算子将数据保存在数据库中并进行批量读取数据。这允许 RapidMiner 访问任意大小的数据集而没有任何大小限制。

# android - Android：在活动之间切换时如何恢复webview？

> ID：14742928
> 
> 赞同：0
> 
> 时间：2013-02-07T03:17:34.843
> 
> 标签：android, webview, restore

我在活动 A 中有一个 webview，我正在导航到活动 B，所以当我切换回活动时，AI 想要恢复 webview，即重新加载其最新的 URL 并可以向后查看历史记录。

我的问题是，当调用 activityA.onPause() 以避免内存泄漏时，我将 webview 重置为 null，但是当调用 activityA.onResume() 时，我无法恢复它，因为我的设计必须创建一个新的 webview 实例。这样，即使我可以恢复最新的 url，我也无法恢复历史记录。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:31:15.753

肮脏的一个，您必须将数据保存在您的 onPause() 方法中，可能在首选项中，并从您的 onResume() 方法的首选项中检索数据并将您的数据设置为您的网络视图。

解决这个问题的另一种方法是使用activityForResult。

# mysql - mysql.h 持久连接

> ID：14742932
> 
> 赞同：2
> 
> 时间：2013-02-07T03:17:47.043
> 
> 标签：mysql, c, persistent-connection

是否有可能获得与 MySQL C API 的持久连接，[就像那些 PHP 提供](http://php.net/manual/en/features.persistent-connections.php)的那样？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T21:51:41.920

MySQL C API 没有持久连接功能，因为它不需要它。您通过它创建的所有连接都是持久的。也就是说，只要您的程序运行，它们就会一直存在，除非您主动关闭它们或服务器丢弃它们。

PHP 需要持久连接的唯一原因是它是 HTTP 工作方式的产物。PHP 最初是一个[CGI 程序](http://en.wikipedia.org/wiki/Common_Gateway_Interface)，因此 Web 服务器会重新启动每个 HTTP 请求的*所有内容，包括任何数据库连接。*这非常耗时，因此他们创建了[mod_php](http://php.net/manual/en/security.apache.php)，现在几乎每个使用 PHP 的人都在使用它。HTTP 的无状态特性仍然要求您的 PHP 脚本在每次请求时重新启动，但由于 mod_php 保持加载在 Apache 实例中，它可以执行诸如保持 MySQL DB 连接打开之类的操作，以供下一个需要它的 PHP 脚本使用。

所有这些都引出了一个问题，为什么您认为您需要持久的数据库连接？您是否在每次需要时都重新启动您的 C 程序？如果是这样，修复它可能是您需要做的，而不是寻找“缺失”的 C API 功能。例如，如果您正在用 C 编写一个 Web 应用程序，您可以将[其重新编写为 Apache 模块](http://httpd.apache.org/docs/2.4/developer/modguide.html)，就像独立的 CGI PHP 变成 mod_php 一样。

但是，永远记住：

> “[程序优化的第一条规则](http://en.wikipedia.org/wiki/Program_optimization)：不要这样做。程序优化的第二条规则（仅供专家使用！）：不要这样做。”
> 
> ——迈克尔·杰克逊

[在对程序进行基准测试](http://en.wikipedia.org/wiki/Benchmark_(computing))和[分析](http://en.wikipedia.org/wiki/Software_performance_analysis)之前进行优化是愚蠢的。向我们展示您的设计和测量结果，*然后*询问可以做什么。不要先要求技术修复。设计修复可能会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T21:36:00.463

当然 - 通过不关闭连接。PHP 的“持久连接”所做的只是保持连接打开并将其重用于后续脚本执行。

# android - android在ArrayList上实现撤消/重做的最佳方法

> ID：14742936
> 
> 赞同：0
> 
> 时间：2013-02-07T03:18:15.937
> 
> 标签：android, serialization, undo-redo

对这个问题的一般性质感到抱歉，但我不想从任何假设开始，因为害怕错过大局

我有一个文档编辑类型的应用程序（音乐符号）并且想要实现撤消和重做。所有相关数据都保存在此

```
static  ArrayList <TTEvt> mEvList; 
```

在我的 windows/MFC 应用程序中，我只是序列化数据结构并将其放在堆栈上。它使用大量内存，但简单且万无一失。

所以我想知道在android中保存和恢复我的ArrayList的最糟糕的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:48:27.570

您可以使用 Memento 设计模式：这里有一个使用此模式的示例撤消/重做[http://www.youtube.com/watch?v=jOnxYT8Iaoo&list=PLF206E906175C7E07&index=25](http://www.youtube.com/watch?v=jOnxYT8Iaoo&list=PLF206E906175C7E07&index=25)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:09:51.290

所以这是工作的多级撤消/重做代码。它工作正常，但它很慢。我取出了 gzip，这有点帮助，但它基本上使我的 UI 无法使用。但至少它有效，我可以尝试从这里优化。

```
 static LinkedList<byte[]> undoStack = new LinkedList<byte[]>();
    static LinkedList<byte[]> redoStack = new LinkedList<byte[]>();

    public static void addUndoCheckpoint() {

        long start = System.currentTimeMillis();

        byte[] byteBuf = null;
        try {
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            // GZIPOutputStream gzipOut = new GZIPOutputStream(baos);
            ObjectOutputStream objectOut = new ObjectOutputStream(baos);
            for (TTEvt ev : Doc.mEvList)
                objectOut.writeObject(ev);
            objectOut.close();
            byteBuf = baos.toByteArray();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        undoStack.push(byteBuf);

        if (undoStack.size() > 10)
            undoStack.removeLast(); // limit size

        redoStack.clear();

        long end = System.currentTimeMillis();
        Log.d("MainView", "addUndoCheckpoint time=" + (end - start) + "mS");
    }

    public static void doUndo() {

        if (undoStack.size() == 0)
            return;

        // push current state onto redo stack first
        byte[] byteBuf = null;
        try {
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            // GZIPOutputStream gzipOut = new GZIPOutputStream(baos);
            ObjectOutputStream objectOut = new ObjectOutputStream(baos);
            for (TTEvt ev : Doc.mEvList)
                objectOut.writeObject(ev);
            objectOut.close();
            byteBuf = baos.toByteArray();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        redoStack.push(byteBuf); // push current state onto redo stack
        if (redoStack.size() > 10)
            redoStack.removeLast();

        // now undo
        mEvList.clear();
        byteBuf = undoStack.pop();

        ObjectInputStream objectIn = null;
        try {
            ByteArrayInputStream bais = new ByteArrayInputStream(byteBuf);
            // GZIPInputStream gzipIn;
            // gzipIn = new GZIPInputStream(bais);
            objectIn = new ObjectInputStream(bais);
            while (true) {
                TTEvt ev = (TTEvt) objectIn.readObject();
                if (ev == null)
                    break;
                Doc.mEvList.add(ev);
            }
            objectIn.close();
        } catch (IOException e) {
            // this is the normal exit
            if (objectIn != null) {
                try {
                    objectIn.close();
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
            }
            // e.printStackTrace();
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        MainView.forceTotalRedraw();
    }

    public static void doRedo() {

        if (redoStack.size() == 0)
            return;

        // push current state onto undo stack first so we can undo the redo
        byte[] byteBuf = null;
        try {
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            // GZIPOutputStream gzipOut = new GZIPOutputStream(baos);
            ObjectOutputStream objectOut = new ObjectOutputStream(baos);
            for (TTEvt ev : Doc.mEvList)
                objectOut.writeObject(ev);
            objectOut.close();
            byteBuf = baos.toByteArray();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        undoStack.push(byteBuf); // push current state onto redo stack
        if (undoStack.size() > 10)
            undoStack.removeLast();

        // now redo
        mEvList.clear();
        byteBuf = redoStack.pop();

        ObjectInputStream objectIn = null;
        try {
            ByteArrayInputStream bais = new ByteArrayInputStream(byteBuf);
            // GZIPInputStream gzipIn;
            // gzipIn = new GZIPInputStream(bais);
            objectIn = new ObjectInputStream(bais);
            while (true) {
                TTEvt ev = (TTEvt) objectIn.readObject();
                if (ev == null)
                    break;
                Doc.mEvList.add(ev);
            }
            objectIn.close();
        } catch (IOException e) {
            // this is the normal exit
            if (objectIn != null) {
                try {
                    objectIn.close();
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
            }
            // e.printStackTrace();
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        MainView.forceTotalRedraw();

    }
} 
```

请注意，您应该在更改 ArrayList 之前调用 addUndoCheckpoint。我目前正在开发一个您可以在更改 ArrayList 后调用的版本。这样做的好处是您可以在后台执行 addUndoCheckpoint 而不会减慢 UI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T07:45:45.347

处理此问题的一种方法不是从数组中删除项目，而只是将它们标记为已删除并刷新视图以使它们消失。所以重做只会取消标记它们。根据应用程序的逻辑，在某些操作中，应从数组中永久删除已删除的项目。

也可以有一个单独的数组，其中撤消项所在的位置，因为该数组只保留对对象的引用，因此它不会占用太多内存并且它可以是有限的大小。

但是，如果撤消/重做需要在设备关闭后继续存在，那么将每个项目的值保存到文件或数据库是唯一的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T07:53:19.973

仅供参考，我想出了一些选择。

最简单的方法是使用 toArray 将 ArrayList 写入一个简单的对象数组，如下所示：

```
static TTEvt evArray[];

    public static void addUndoCheckpoint() {

        long start  = System.currentTimeMillis();

        evArray = Doc.mEvList.toArray(new TTEvt[Doc.mEvList.size()]);

        long end = System.currentTimeMillis();
        Log.d("MainView", "addUndoCheckpoint time="+(end-start)+"mS");
    }
    public static void doUndo() {

        Doc.mEvList.clear();
        for(TTEvt ev : evArray)
            Doc.mEvList.add(ev);

        forceTotalRedraw();
    } 
```

***更新：我刚刚发现上面的代码并没有真正起作用，因为 toArray 只对对象的引用数组做了一个 new，而不是它们本身的对象。所以我还需要克隆所有对象，这显然是很多内存，可能还有时间。也许答案是下面的慢速选项，使用序列化但在同步线程中执行，这样它就不会减慢 UI 速度。***

使用 gzip 压缩来节省空间的更复杂的方法

```
 static byte[] undoBuf;

  public static void addUndoCheckpoint() {

    long start  = System.currentTimeMillis();

    //evArray = Doc.mEvList.toArray(new TTEvt[Doc.mEvList.size()]);

    try {
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        GZIPOutputStream gzipOut = new GZIPOutputStream(baos);
        ObjectOutputStream objectOut = new ObjectOutputStream(gzipOut);
        for(TTEvt ev: Doc.mEvList)
            objectOut.writeObject(ev);
        objectOut.close();
        undoBuf = baos.toByteArray();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    long end = System.currentTimeMillis();
    Log.d("MainView", "addUndoCheckpoint time="+(end-start)+"mS");
  }

  public static void doUndo() {

    Doc.mEvList.clear();
    //for(TTEvt ev : evArray)
    //  Doc.mEvList.add(ev);

    try {
        ByteArrayInputStream bais = new ByteArrayInputStream(undoBuf);
        GZIPInputStream gzipIn;
        gzipIn = new GZIPInputStream(bais);
        ObjectInputStream objectIn = new ObjectInputStream(gzipIn);
        while(objectIn.available()>0) {
            TTEvt ev = (TTEvt) objectIn.readObject();
            Doc.mEvList.add(ev);
        }
        objectIn.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    forceTotalRedraw();
} 
```

问题在于它的速度很慢，对于大约 5000 个条目的数据结构来说几乎是 1 秒

目前这只是一个 1 级撤消，目前实现了一个堆栈以保持多个级别，并寻找更快的内存压缩

# mysql - MySQL - 我可以将同一张表上的多个查询组合成 1 个查询吗？

> ID：14742940
> 
> 赞同：1
> 
> 时间：2013-02-07T03:19:00.663
> 
> 标签：mysql

我有很多查询，我可以将其合并为 1 进行优化吗？

1.  `SELECT COUNT(prod_id) FROM products WHERE inventory <= 5 AND cat_id = 1`
2.  `SELECT COUNT(prod_id) FROM products WHERE inventory BETWEEN 5 AND 10 AND cat_id = 1`
3.  `SELECT COUNT(prod_id) FROM products WHERE inventory > 10`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T03:23:08.137

我认为这应该对你有用。它将在单个 SQL 语句中返回 3 个计数：

```
SELECT SUM(CASE WHEN inventory <= 5 AND cat_id = 1 THEN 1 ELSE 0 END) Q1Result,
   SUM(CASE WHEN inventory BETWEEN 5 AND 10 AND cat_id = 1 THEN 1 ELSE 0 END) Q2Result,
   SUM(CASE WHEN  inventory > 10 THEN 1 ELSE 0 END) Q3Result
FROM products 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!2/31b78/3)。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T03:21:25.570

```
SELECT COUNT(prod_id) FROM products WHERE inventory <= 5 AND cat_id = 1
UNION ALL
SELECT COUNT(prod_id) FROM products WHERE inventory BETWEEN 5 AND 10 AND cat_id = 1
UNION ALL
SELECT COUNT(prod_id) FROM products WHERE inventory > 10 
```

您将从查询中返回多行，全部放在一个大长列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T03:21:17.677

你可以使用：

```
select sum( x ) from query 1 union query 2  etc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T03:31:57.187

试试这个

[**演示**](http://sqlfiddle.com/#!2/31b78/4)

```
SELECT  (
    SELECT COUNT(prod_id) FROM products WHERE inventory <= 5 AND cat_id = 1
    ) AS count1,
    (
    SELECT COUNT(prod_id) FROM products WHERE inventory BETWEEN 5 AND 10 AND cat_id = 1
    ) AS count2,
    (
    SELECT COUNT(prod_id) FROM products WHERE inventory > 10
    ) AS count3 
```

# spring - 在 Gradle 中进行集成测试时找不到持久类

> ID：14742941
> 
> 赞同：1
> 
> 时间：2013-02-07T03:19:02.000
> 
> 标签：spring, hibernate, jpa, gradle

我的项目基于Spring+JPA+Hibernate，之前使用Ant来管理构建过程，现在打算使用Gradle。在运行“gradle clean test”时，我遇到了一个异常，如下所示：

> [2013-02-07 11:01:36,703][Test worker][WARN][QuerySplitter] 找不到查询类的持久类：来自 com.mpos.lottery.te.workingkey.domain.WorkingKey w 其中 w.createDateStr= :createDateStr 和 w.gpeId=:gpeId
> 
> [2013-02-07 11:01:36,718][Test worker][ERROR][TEPortServlet] org.hibernate.QueryParameterException：找不到命名参数 [gpeId]；嵌套异常是 java.lang.IllegalArgumentException：org.hibernate.QueryParameterException：找不到命名参数 [gpeId]

我已经在 eclipse 和 Ant 中运行了那个测试用例（不需要码头），它通过了，所以我怀疑 gradle 中的一些不正确的配置会导致这个异常。

下面是我的gradle脚本：

```
apply plugin: 'war'
// 'war' plugin will apply 'java' plugin automatically
apply plugin: 'java'
apply plugin: 'eclipse'
// run web application, refer to http://gradle.org/docs/current/userguide/jetty_plugin.html
apply plugin: 'jetty'

compileJava.options.encoding = _sourcecode_encoding
compileTestJava.options.encoding = _sourcecode_encoding

// Properties added by the java plugin
sourceCompatibility="${_source_compatibility}"
targetCompatibility="${_target_compatibility}"
//Properties added by the 'war' plugin
webAppDirName="src/main/WWW"

configurations {
    provided {
        description = 'Non-exported comiple-time dependencies, it will be provided by container.'
    }
}

dependencies {
    provided files('lib/DEV/j2ee/servlet-api.jar')
    compile fileTree(dir: 'lib', include: '**/*.jar', exclude: 'DEV/**/*.jar')
    //compile sourceSets.main.output
    testCompile fileTree(dir:"lib", include:"DEV/**/*.jar")
}

sourceSets {
    main {
        compileClasspath = compileClasspath + configurations.provided
        //compileClasspath.collect().each({println it})
        resources {
            srcDir 'src/main/resource'
        }
    }
    test {
        resources {
            srcDir 'src/test/resource'
        }
    }
}

test {
    scanForTestClasses  = false
    classpath = configurations.provided + configurations.compile + configurations.testCompile + sourceSets.main.output + sourceSets.test.output
    classpath.each({println it})
    // customize test process
    include 'com/mpos/lottery/te/gameimpl/smsraffle/**/*Test.class'
} 
```

我是 Gradle 和 groovy 的新手，请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T03:56:16.163

默认情况下，Gradle 为类和资源使用单独的输出目录，这可能会导致 Hibernate/JPA 出现问题。尝试：

```
sourceSets.main.output.resourcesDir = sourceSets.main.output.classesDir
sourceSets.test.output.resourcesDir = sourceSets.test.output.classesDir 
```

您可能不需要后者。

# javascript - 正则表达式匹配特定数字之前但不在javascript中

> ID：14742944
> 
> 赞同：0
> 
> 时间：2013-02-07T03:19:15.793
> 
> 标签：javascript, regex

我只是很讨厌正则表达式。我一直在阅读[http://www.regular-expressions.info/tutorial.html](http://www.regular-expressions.info/tutorial.html)但我不知道如何写这个。

我有一个包含 2 个数字的字符串（以 0 开头的月份的天数）。我正在尝试从字符串中删除前导 0，但不删除“10”或“20”中的 0。

可能在此处的示例字符串："01","02","03","10","11","12","20","31"

因为字符串总是一个月中的一天，所以它的长度总是 2 个字符，并且总是在 01 到 31 之间。

目前我正在使用这个（这显然是错误的）：

`string.replace(/0/,'');`

我想要结束的是：“1”而不是“01”，“2”而不是“02”，“10”而不丢失“0”。

希望这足够清楚。

我该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:20:53.047

如果字符串只包含数字，您可以将其转换为整数，例如：

```
var num = +str; 
```

如果要替换较大字符串的一部分，可以使用`\b`：

```
str.replace(/\b0+\B/g, ''); 
```

例子：

```
"i have 000100 and 0020!".replace(/\b0+\B/g, '') 
```

回报：

```
"i have 100 and 20!" 
```

# assembly - 汇编语言加法

> ID：14742945
> 
> 赞同：2
> 
> 时间：2013-02-07T03:19:16.763
> 
> 标签：assembly, add, opcode, hex, 8051

我是汇编语言的新手，我找到了我需要的这张十六进制代码表[http://www.keil.com/support/man/docs/is51/is51_opcodes.htm](http://www.keil.com/support/man/docs/is51/is51_opcodes.htm) 但我的问题是“添加”指令是否重要我确实给出了某种情况，因为它们的范围从 24-2F 或者我可以选择我想要的任何人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T03:36:01.323

您需要选择一个与您想要完成的目标相匹配的选项，即如何指定您想要添加的值。例如，您是否想在寄存器中添加立即操作数或值？正如 Raymond Chen 所说，详细信息在第四列中。

# php - php 检查数组是否为空

> ID：14742950
> 
> 赞同：2
> 
> 时间：2013-02-07T03:19:51.597
> 
> 标签：php, arrays

如何检查数组是否像这样

`array(3) { [0]=> array(0) { } [1]=> array(0) { } [2]=> array(0) { } }`

居然是空的？因为对我来说这是一个空数组，但对于 empty() 这是一个包含 3 个元素的数组，而对于 count 这是一个长度为 3 的数组 .. 那么有没有办法在不遍历数组的情况下做到这一点？

先感谢您

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T03:21:21.420

```
if(!array_filter($array)){
  // empty
} 
```

（[文档](http://php.net/manual/en/function.array-filter.php)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T03:46:05.737

这里也有说明

[检查数组是否为空](https://stackoverflow.com/questions/8328983/php-check-if-an-array-is-empty?rq=1)

利用`array_filter();`

# javascript - d3.js：具有两个一维数组的嵌套选择

> ID：14742953
> 
> 赞同：1
> 
> 时间：2013-02-07T03:20:21.013
> 
> 标签：javascript, d3.js

我想用 d3 从两个一维数组创建一个表。

假设输入数组是：

```
array1 = ['a','b','c'];
array2 = ['d','e','f']; 
```

我希望桌子看起来像这样

```
ad  ae  af
bd  be  bf
cd  ce  cf 
```

我应该使用嵌套选择吗？还是我应该先调用 to `selectAll().data()`，然后再调用 to `each()`？（[在现实生活中](http://hannorein.github.com/oec_web/systems.html)，每个矩阵单元的操作不会像 那样简单`'a'+'d'`，但我认为这对于答案来说并不重要。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T05:33:47.783

一种方法是从您的两个数组创建一个新的二维数组，以使其适合标准嵌套选择模式（请参阅：[http](http://bost.ocks.org/mike/nest/) ://bost.ocks.org/mike/nest/ ）：

```
var arr1 = ['a', 'b', 'c'],
    arr2 = ['d', 'e', 'f'];

// prepare a 2D array
var data = arr1.map(function(v1) {
      return arr2.map(function(v2) {
        return v1 + v2;
      })
    });

d3.select("body").append("table")
  .selectAll("tr")
    .data(data)
  .enter().append("tr")
  .selectAll("td")
    .data(Object)
  .enter().append("td")
    .text(String); 
```

另一种方法是利用函数不仅传递组内元素的索引 i ，而且还传递它所属组的索引 j 的事实：

```
var arr1 = ['a', 'b', 'c'],
    arr2 = ['d', 'e', 'f'];

d3.select("body").append("table")
  .selectAll("tr")
    // arr1 corresponds to the rows
    // bound data is not used in the td cells; only arr1.length is used
    .data(arr1)
  .enter().append("tr")
  .selectAll("td")
    // arr2 corresponds to the columns
    .data(arr2)
  .enter().append("td")
    .text(function(d, i, j) { return arr1[j] + d; }); // d === arr2[i] 
```

类似的方法使用 parentNode 而不是索引 j 从组中获取绑定数据：

```
var arr1 = ['a', 'b', 'c'],
    arr2 = ['d', 'e', 'f'];

d3.select("body").append("table")
  .selectAll("tr")
    // arr1 corresponds to the rows
    .data(arr1)
  .enter().append("tr")
  .selectAll("td")
    // arr2 corresponds to the columns
    .data(arr2)
  .enter().append("td")
    .text(function(d) { return d3.select(this.parentNode).datum() + d; }); 
```

# html - 在 django 代码中发送电子邮件不起作用

> ID：14742954
> 
> 赞同：0
> 
> 时间：2013-02-07T03:20:31.643
> 
> 标签：html, django, email

在 django 代码中发送电子邮件不起作用，它显示错误“[Errno 10061] 无法建立连接，因为目标机器主动拒绝它”这些是我的**VIEWS.PY**

```
def send_email(request):
username = request.POST.get('username', '')
from_email = request.POST.get('from_email', '')
message = request.POST.get('message', '')
if username and message and from_email:
    try:
        send_mail(username, from_email, message,  ['canonizadocharm@ymail.com'])
    except BadHeaderError:
        return HttpResponse('Invalid header found.')
    return HttpResponseRedirect('/contact/thanks/')
else:
    # In reality we'd use a form class
    # to get proper validation errors.
    return HttpResponse('Make sure all fields are entered and valid.') 
```

这些是我的**contact.html**

```
<FORM METHOD="POST" ACTION="/send_email/" >
{% csrf_token %}
Name: <INPUT TYPE="text" NAME="username"><BR>
Email: <INPUT TYPE="text" NAME="from_email"><BR>
Message: <BR>
<TEXTAREA NAME="message" ROWS="10" WRAP="hard">
</TEXTAREA>
<INPUT NAME="redirect" TYPE="hidden">
<INPUT NAME="NEXT_URL" TYPE="hidden">
<BR>
<INPUT TYPE="submit" VALUE="Send">
<INPUT TYPE="reset" VALUE="Clear">
</FORM> 
```

这些是我的**URLS.PY**

```
url(r'^send_email/', views.send_email),
url(r'^contact/', views.contact),
url(r'^thanks/', views.thanks), 
```

和我的**SETTINGS.PY**

```
EMAIL_HOST = 'localhost'
EMAIL_HOST_USER = ''
EMAIL_HOST_PASSWORD = ''
EMAIL_PORT = 25
EMAIL_USE_TLS = True 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T03:24:39.793

您`action`的表单值必须指向查看的网址，`mailto:canonizadocharm@ymail.com`这不是您服务器上的有效路径。

**更新**：

例如，向 urls.py 添加一条新规则，例如，

```
url(r'^mail/', views.send_mail), 
```

然后将动作值更改为`mail`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T03:37:06.457

让您的操作值指向一个 URL，该 URL 又指向您的一个视图。例如，您的 urls.py 可以做到这一点。

```
url(r'^email/', 'project.views.send_email') 
```

这会将您的联系表格路由到您的 send_mail 视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T03:48:48.027

您在模板中的表单没有 csrf，这就是您收到“CSRF 验证失败”错误的原因。

```
 <FORM METHOD=POST ACTION="/send_email/" ENCTYPE="text/plain">{% csrf_token %}
 ...........
 </FORM> 
```

如果您想知道 csrf 是什么，请访问此链接：
[https ://docs.djangoproject.com/en/dev/ref/contrib/csrf/](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/)

* * *

在您的 settings.py 中创建电子邮件设置，例如：

**设置.py**

```
# Sending mail
EMAIL_USE_TLS = True
EMAIL_HOST='smtp.gmail.com'
EMAIL_PORT=587
EMAIL_HOST_USER='your gmail account'
EMAIL_HOST_PASSWORD='your gmail password' 
```

**视图.py**

```
from django.core.mail import send_mail

def send_email(request):
    if request.method == 'POST':
        username = request.POST.get('username')
        message = request.POST.get('message')
        from_email = request.POST.get('from_email')
        send_mail(username, message, from_email, ['canonizadocharm@ymail.com',])
        return HttpResponseRedirect('/contact/thanks/')
    else:
        return HttpResponse('Make sure all fields are entered and valid.') 
```

# iphone - 如何定义使用 Flash Develop 构建时要使用的 iPhone SDK？

> ID：14742965
> 
> 赞同：1
> 
> 时间：2013-02-07T03:21:36.777
> 
> 标签：iphone, ios, ipad, flash, flash-builder

使用 Flash Builder 4.7 更新我使用 Flash 构建的 iOS 应用程序。我收到来自 Apple 的反馈：“您的应用程序包含一个带有大小修饰符的启动图像，仅支持使用 iOS 6.0 SDK 或更高版本构建的应用程序。” -- 所以我下载了最新的 iPhone SDK (6.1)。在构建我的应用程序时，如何告诉 Flash Builder 以该 SDK 为目标？谢谢！

更新：这是我的描述符文件：

```
<?xml version="1.0" encoding="utf-8" standalone="no"?>
<application xmlns="http://ns.adobe.com/air/application/3.4">

<id>com.bitty.dicesquared</id> <!-- Bundle Identifier. Required. -->
<filename>DiceSquared</filename> <!-- Used as the filename for the application. Required. -->
<name>dice²</name> <!-- The name that is displayed below the app icon. -->
<versionNumber>1.3</versionNumber> <!-- Required. -->

<!-- Settings for the application's initial window. Required. -->
<initialWindow>
    <!-- The main SWF or HTML file of the application. Required. -->
    <content>[This value will be overwritten by Flash Builder in the output app.xml]</content>

    <!-- The initial aspect ratio ("portrait" or "landscape"). Optional. -->
    <aspectRatio>portrait</aspectRatio>

    <!-- Whether the app will begin auto-orienting on launch. Optional. Default false -->
    <autoOrients>false</autoOrients>

    <!-- Whether the app launches in full screen. Optional. Mobile only. Default false -->
    <!-- (On iOS, this decides if the StatusBar is visible or not.) -->
    <fullScreen>true</fullScreen>

    <!-- Either auto, cpu, gpu, or direct. Default auto -->
    <renderMode>direct</renderMode>

    <!-- Whether direct mode allocates storage for depth and stencil buffers. Default false -->
    <!-- <depthAndStencil></depthAndStencil> -->

    <!-- Whether or not to pan when a soft keyboard is raised or lowered (either "pan" or "none").  Optional.  Defaults "pan." -->
    <!-- <softKeyboardBehavior></softKeyboardBehavior> -->
<visible>true</visible>
</initialWindow>

<!-- Languages supported by application. Only these languages can be specified. -->
<!-- <supportedLanguages>en de cs es fr it ja ko nl pl pt ru sv tr zh</supportedLanguages> -->

<!-- The icon the system uses for the application. Optional. -->
<!-- Place the icons in a 'source path' (e.g. in the 'src' directory). -->
<!-- iPhone: 57x57, iPhone HD: 114x114, iPad: 72x72, iPad HD: 144x144 -->
<icon>
    <image57x57>icon57.png</image57x57>
    <image72x72>icon72.png</image72x72>
    <image114x114>icon114.png</image114x114>
    <image144x144>icon144.png</image144x144>
</icon>

<!-- iOS specific capabilities -->
<iPhone>
    <!-- A list of plist key/value pairs to be added to the application Info.plist -->
    <!-- UIDeviceFamily: 1 - iPhone/iPod Touch; 2 - iPad; both: universal app -->

    <InfoAdditions><![CDATA[            
        <key>UIDeviceFamily</key>
        <array>
            <string>1</string>
            <string>2</string>
        </array>
    ]]></InfoAdditions>

    <!-- Display Resolution for the app ("standard" or "high"). Optional. Default "standard" -->
    <requestedDisplayResolution>high</requestedDisplayResolution>
</iPhone> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T20:34:46.400

在这里找到答案：http: [//forum.starling-framework.org/topic/flash-builder-47-update-tips](http://forum.starling-framework.org/topic/flash-builder-47-update-tips) AIR 3.5 的更新解决了这个问题。

# javascript - jquery淡入淡出，延迟问题

> ID：14742967
> 
> 赞同：1
> 
> 时间：2013-02-07T03:22:10.207
> 
> 标签：javascript, jquery, css, cookies

我在下面有一段代码显示 div 并将其存储在 cookie 中，如果 cookie 存在，它会隐藏它们。问题是当我将我的 3 秒延迟添加到其中一个 div id 时，当页面重新加载 id 时延迟不断出现

```
 <script type="text/javascript" >
  //Search script to hide
   $(document).ready(function(){
     $('#popUpsearch').effect("pulsate", { times:2 }, 4000);
    $('#popUpsearch').fadeOut(5000); 

       $('#popUpsearch').load('a', function() {
         $.cookie('contentsearch','hid', { expires: 365});
     });

       if ( $.cookie('contentsearch') == 'hid'){
   $('#popUpsearch').hide();    
      };    
  $('#popUpnav').delay(3000).effect("pulsate", { times:2 }, 4000)
    $('#popUpnav').fadeOut(6000);
     $('#popUpnav').load('a', function() {
         $.cookie('contentnav','hide', { expires: 365});
     });
      if ( $.cookie('contentnav') == 'hide'){
     $('#popUpnav').hide();    
    };  
}); 

    //$(function() {
//   $.cookie('searchbox','sb3', { expires: 365});
//        if ($.cookie('searchbox') == 'sb3'){
//           $('#popUpsearch').hide();    
//        };    
//    }); 

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:39:18.080

使用您的 If 块，以便您一次只执行一组操作。

```
if ( $.cookie('contentnav') == 'hide'){
  $('#popUpnav').hide();    
} else {
 $('#popUpnav').delay(3000).effect("pulsate", { times:2 }, 4000)
 $('#popUpnav').fadeOut(6000);
 $('#popUpnav').load('a', function() {
   $.cookie('contentnav','hide', { expires: 365});
 });
} 
```

# postgresql - 启动时声纳无法连接postgreSQL

> ID：14742968
> 
> 赞同：3
> 
> 时间：2013-02-07T03:22:15.077
> 
> 标签：postgresql, jdbc, sonarqube

启动声纳时出现致命错误：

```
2013.02.07 09:33:08 INFO  o.s.c.p.Database  Create JDBC datasource for jdbc:postgresql://10.123.78.58:5432/sonar
2013.02.07 09:33:08 ERROR o.s.c.p.Database  Can not connect to database. Please check connectivity and settings (see the properties prefixed by 'sonar.jdbc.').
org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (ERROR: parameter "standard_conforming_strings" cannot be changed)
    at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549) ~[commons-dbcp-1.3.jar:1.3]
    at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388) ~[commons-dbcp-1.3.jar:1.3]
    at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) ~[commons-dbcp-1.3.jar:1.3]
    at org.sonar.core.persistence.DefaultDatabase.checkConnection(DefaultDatabase.java:140) [sonar-core-3.4.1.jar:na]
    at org.sonar.core.persistence.DefaultDatabase.start(DefaultDatabase.java:69) [sonar-core-3.4.1.jar:na]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.6.0_37]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) ~[na:1.6.0_37]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) ~[na:1.6.0_37]
    at java.lang.reflect.Method.invoke(Method.java:597) ~[na:1.6.0_37]
    at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.invokeMethod(ReflectionLifecycleStrategy.java:110) [picocontainer-2.14.1.jar:na]
    at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.start(ReflectionLifecycleStrategy.java:89) [picocontainer-2.14.1.jar:na]
    at org.picocontainer.injectors.AbstractInjectionFactory$LifecycleAdapter.start(AbstractInjectionFactory.java:84) [picocontainer-2.14.1.jar:na]
    at org.picocontainer.behaviors.AbstractBehavior.start(AbstractBehavior.java:169) [picocontainer-2.14.1.jar:na]
    at org.picocontainer.behaviors.Stored$RealComponentLifecycle.start(Stored.java:132) [picocontainer-2.14.1.jar:na]
    at org.picocontainer.behaviors.Stored.start(Stored.java:110) [picocontainer-2.14.1.jar:na]
    at org.picocontainer.DefaultPicoContainer.potentiallyStartAdapter(DefaultPicoContainer.java:1009) [picocontainer-2.14.1.jar:na]
    at org.picocontainer.DefaultPicoContainer.startAdapters(DefaultPicoContainer.java:1002) [picocontainer-2.14.1.jar:na]
    at org.picocontainer.DefaultPicoContainer.start(DefaultPicoContainer.java:760) [picocontainer-2.14.1.jar:na]
    at org.sonar.api.platform.ComponentContainer.startComponents(ComponentContainer.java:72) [sonar-plugin-api-3.4.1.jar:na]
    at org.sonar.server.platform.Platform.startDatabaseConnectors(Platform.java:186) [classes/:na]
    at org.sonar.server.platform.Platform.init(Platform.java:129) [classes/:na]
    at org.sonar.server.platform.PlatformLifecycleListener.contextInitialized(PlatformLifecycleListener.java:33) [classes/:na]
    at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548) [jetty-6.1.25.jar:6.1.25]
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:136) [jetty-6.1.25.jar:6.1.25]
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1272) [jetty-6.1.25.jar:6.1.25]
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517) [jetty-6.1.25.jar:6.1.25]
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:489) [jetty-6.1.25.jar:6.1.25]
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) [jetty-util-6.1.25.jar:6.1.25]
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130) [jetty-6.1.25.jar:6.1.25]
    at org.mortbay.jetty.Server.doStart(Server.java:224) [jetty-6.1.25.jar:6.1.25]
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) [jetty-util-6.1.25.jar:6.1.25]
    at org.sonar.application.JettyEmbedder.start(JettyEmbedder.java:74) [sonar-application-3.4.1.jar:na]
    at org.sonar.application.StartServer.main(StartServer.java:49) [sonar-application-3.4.1.jar:na]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.6.0_37]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) ~[na:1.6.0_37]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) ~[na:1.6.0_37]
    at java.lang.reflect.Method.invoke(Method.java:597) ~[na:1.6.0_37]
    at org.tanukisoftware.wrapper.WrapperSimpleApp.run(WrapperSimpleApp.java:240) [wrapper-3.2.3.jar:3.2.3]
    at java.lang.Thread.run(Thread.java:662) [na:1.6.0_37]
Caused by: org.postgresql.util.PSQLException: ERROR: parameter  "standard_conforming_strings" cannot be changed
    at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2101) ~[postgresql-9.1-902.jdbc4.jar:na]
    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1834) ~[postgresql-9.1-902.jdbc4.jar:na]
    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:255) ~[postgresql-9.1-902.jdbc4.jar:na]
    at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:510) ~[postgresql-9.1-902.jdbc4.jar:na]
    at org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:372) ~[postgresql-9.1-902.jdbc4.jar:na]
    at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:364) ~[postgresql-9.1-902.jdbc4.jar:na]
    at org.apache.commons.dbcp.PoolableConnectionFactory.initializeConnection(PoolableConnectionFactory.java:612) ~[commons-dbcp-1.3.jar:1.3]
    at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:586) ~[commons-dbcp-1.3.jar:1.3]
    at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556) ~[commons-dbcp-1.3.jar:1.3]
    at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545) ~[commons-dbcp-1.3.jar:1.3]
 ... 38 common frames omitted 
```

环境：
声纳：3.4.1
postgreSQL：8.1.3
centOS：6.3 x86_64

sonar.properties 的片段：

```
sonar.jdbc.username:                       sonar
sonar.jdbc.password:                       sonar
sonar.jdbc.url:                            jdbc:postgresql://localhost:5432/sonar
sonar.jdbc.driverClassName:                org.postgresql.Driver 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T21:12:45.090

我建议在声纳项目中提出这个问题。

堆栈跟踪的相关部分是：

```
Caused by: org.postgresql.util.PSQLException: ERROR: parameter  "standard_conforming_strings" cannot be changed 
```

[postgres 文档](http://www.postgresql.org/docs/9.1/static/runtime-config-compatible.html)指出，“standard_conforming_strings”的处理在 9.1 版中发生了变化。所以，我怀疑问题可能是您的旧数据库版本。

# 更新

[SONAR-3876](https://jira.codehaus.org/browse/SONAR-3876)引入的更改可能是您的问题的根本原因：

> 一种解决方案是在 JDBC 连接中强制 standard_conforming_strings 为“on”并停止在 rails 中使用双反斜杠。它允许同时支持 9.0 和 9.1 版本。

# c - 从 C 中的文件扫描行时出现奇怪的 Seg Fault 错误

> ID：14742970
> 
> 赞同：0
> 
> 时间：2013-02-07T03:22:24.457
> 
> 标签：c, file, segmentation-fault

我一直在开发一个程序，我需要使用 C 来扫描文件中的行并将它们存储在结构中。

我的 .txt 文件格式为：

```
NAME 0.2 0.3
NAME2 0.8 0.1 
```

或者一般来说它是一个字符串，后跟 2 个双打

我的结构是：

```
struct device {
char* name;
double interruptProbability, interruptTime, startTime, endTime;
} myDevice; 
```

现在，我可以很好地扫描这些行，但是当需要将它们放入我的结构中时，有些事情就搞砸了。这是我进行扫描的方式：

```
 char line[BUFSIZ];
    while(fgets (line, BUFSIZ, devicesFile) != NULL){
        struct device *d = &myDevice;
        if(!isspace(*line)){
            printf("String: %s \n", &line);
            d->name = "success"; // for testing purposes
            printf("device name before: %s \n", d[0]);
            sscanf(line, "%s %f %f",&d->name, &d->interruptProbability, &d->interruptTime);
            printf("device name after: %s \n", d[0]);
        }
    } 
```

当我运行它时，它会打印出来：

```
String: Disk 0.2 0.00005

device name before: success 
```

在给我一个段错误之前。

我运行 GDB 来测试扫描发生了什么，无论出于何种原因，它都会在 d->name 中放入一个巨大的十六进制数字，该数字旁边有（地址越界）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:26:16.587

这是因为您在`sscanf`调用中覆盖了文字字符串。`d->name`指向一个文字字符串，它们是只读的且具有固定长度（因此，如果您尝试获取的字符串长度超过 7 个字符，您也可以尝试将其写入末尾）。

您需要使用数组`d->name`或在堆上为其分配内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T03:29:48.843

您没有为每个`char *name`. 您需要`d->name = (char *)malloc(<length of the token>*sizeof(char)+1)`在 sscanf 调用之前添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T03:30:22.857

您不能将字符串扫描到指针`d->name`中。

即使在您为其分配了一个常量值之后：

```
d->name = "success"; // for testing purposes 
```

您需要为其分配内存，或将其设为数组。您应该非常小心地使用`sscanf`来读取字符串。使用`strtok`或只是`strchr`找到第一个空格然后用 . 复制字节可能会更好`strdup`。

```
char *next = strchr(line, ' ');
if( next != NULL ) {
    *next++ = 0;             // Terminate string and move to next token.
    d->name = strdup(line);  // Make a copy of tokenised string

    // Read the floats - note you should check that the result is equal to 2.
    count = sscanf(next, "%f %f", d->interruptProbability, d->interruptTime);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T03:30:28.890

您正在扫描字符串文字。字符串文字在 C 和 C++ 中是 const char*s，是只读的，因此 sscanf 在尝试写入字符串文字“成功”时会崩溃。

# windows-8 - WebAuthenticationBroker 收到 OAuth2 回调时抛出异常

> ID：14742974
> 
> 赞同：4
> 
> 时间：2013-02-07T03:23:03.073
> 
> 标签：windows-8, windows-runtime, oauth-2.0, imgur

WebAuthenticationBroker 似乎无法处理导航到我的`ms-app://`. 只是抛出这个丑陋的错误，如下所示。

### 脚步

1.  call `AuthenticateAsync()`，包括运行时获取的回调 uri：`WebAuthenticationBroker.GetCurrentApplicationCallbackUri()`
2.  完成授权过程，点击**Allow**。
3.  代理没有返回，而是显示页面**无法连接到服务。我们现在无法连接到您需要的服务。** 什么都做不了，所以我点击了可见的后退按钮。
4.  调试器在捕获时中断：`"The specified protocol is unknown. (Exception from HRESULT: 0x800C000D)"`

收到回调`WebAuthenticationBroker.AuthenticateAsync()`（根据 Fiddler4 和事件查看器），但它抛出上述异常，好像它不知道如何解释`ms-app://`协议一样。

所有示例都暗示我的代码应该可以工作，但我认为有一些不太明显的东西会导致问题。

### 代码

```
private static string authorizeString =
  "https://api.imgur.com/oauth2/authorize?client_id=---------&response_type=token";

private Uri startUri = new Uri(authorizeString);

public async void RequestToken() {
  try {
    var war = await WebAuthenticationBroker.AuthenticateAsync(
      WebAuthenticationOptions.UseTitle
      , startUri);
      // Imgur knows my redirect URI, so I am not passing it through here

    if (war.ResponseStatus == WebAuthenticationStatus.Success) {
      var token = war.ResponseData;
    } 
  } catch (Exception e) { throw e; }
} 
```

### 事件查看器日志摘录（按时间顺序）

有关我如何获得此信息的信息，请阅读以下 MSDN：[Web 身份验证问题 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/jj658959%28v=vs.85%29.aspx)。不幸的是，这是查询*authhost.exe 导航错误*时唯一的搜索结果。

1.  **资料**：`AuthHost redirected to URL: <ms-app://s-1-15-2-504558873-2277781482-774653033-676865894-877042302-1411577334-1137525427/#access_token=------&expires_in=3600&token_type=bearer&refresh_token=------&account_username=------> from URL: <https://api.imgur.com/oauth2/authorize?client_id=------&response_type=token> with HttpStatusCode: 302.`
2.  **错误**：`AuthHost encountered a navigation error at URL: <https://api.imgur.com/oauth2/authorize?client_id=------&response_type=token> with StatusCode: 0x800C000D.`
3.  **资料**：`AuthHost encountered Meta Tag: mswebdialog-title with content: <Can't connect to the service>.`

感谢阅读，堆栈。现在不要让我失望！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T10:44:52.883

Afaik，即使您假设远程服务知道它，您也需要将结束 URL 传递给 AuthenticateAsync。

WebAuthenticationBroker 的工作方式如下：您指定一个“端点” URL，当它遇到以该 URL 开头的链接时，它会认为身份验证过程已完成，甚至不再尝试导航到该 URL。因此，如果您将“foo://bar”指定为回调 URI，导航到“foo://bar”将完成身份验证，“foo://barbaz”也会完成身份验证，但不会“foo://baz”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T13:43:50.023

解决！@ma_il 帮助我了解了代理如何实际评估重定向回调，它让我回到了第一方，我意识到我认为 WebAuthenticationOptions.UseTitle 是正确的用法。**不是这样**。与使用令牌的 Imgur 的 API 相比，它需要`WebAuthenticationOptions.None`并且可以立即工作。

作为未来寻求答案的人的一个例子，这是我的代码。

```
 private const string clientId = "---------";
private static Uri endUri = WebAuthenticationBroker.GetCurrentApplicationCallbackUri();
private static string authorizeString = "https://api.imgur.com/oauth2/authorize?" 
                                          + "client_id=" 
                                          + clientId 
                                          + "&response_type=token" 
                                          + "&state=somestateyouwant" 
                                          + "&redirect_uri=" 
                                          + endUri;
private Uri startUri = new Uri(authorizeString);   

public async void RequestToken() {
  try {
    WebAuthenticationResult webAuthenticationResult =
      await WebAuthenticationBroker.AuthenticateAsync(WebAuthenticationOptions.None
                                                      , startUri
                                                      , endUri);

    if (webAuthenticationResult.ResponseStatus == WebAuthenticationStatus.Success) {
      string token = webAuthenticationResult.ResponseData;
      // now you have the token
    }
  } catch { throw; }
} 
```

# mongodb - 在执行 createIndex 操作和 mongodump 时，mongodb 是否完全锁定写入数据库？

> ID：14742978
> 
> 赞同：0
> 
> 时间：2013-02-07T03:23:25.990
> 
> 标签：mongodb, indexing, locking, database

只是想知道我的数据库在生产中每秒是否有大约 50 个查询，在执行这些操作时它是否仍然能够正常运行？

我的服务器信息是：

*   没有分片的普通副本 2 机器。
*   仅将上限集合用于记录目的。没有读。写得很重。
*   8GB 内存

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T06:46:17.840

关于并发的文档 [1] 非常清楚：

“当一个读锁存在时，许多读操作可能会使用这个锁。但是，当一个写锁存在时，单个写操作会独占持有该锁，其他任何读或写操作都不能共享该锁。”

插入、更新和删除操作使用写锁。

基本上，这意味着您插入的所有内容都将按顺序发生，所以这取决于 Mongo 写入数据的速度。

[1] [http://docs.mongodb.org/manual/faq/concurrency/#which-administrative-commands-lock-the-database](http://docs.mongodb.org/manual/faq/concurrency/#which-administrative-commands-lock-the-database)

# javascript - jQuery - 数据属性引用问题

> ID：14742982
> 
> 赞同：1
> 
> 时间：2013-02-07T03:24:41.193
> 
> 标签：javascript, jquery, json, html, attributes

我正在处理灯箱脚本并使用自定义数据灯箱属性遇到问题。我要做的是允许将 data-lightbox 属性设置动态添加到页面 - 在图像上。

这是我的图像：

```
<a href="largeimage.png" data-lightbox='{"setting":"value","setting":"value"}'>
   <img src="thumbnail.png" />
</a> 
```

这是我用来注入设置的脚本部分：

```
$('#testthumbnail').find('a').attr('data-lightbox',settings); 
```

设置只是一个字符串，它被转储到属性中。运行时，我没有收到任何错误，并且设置都正确注入到 data-lightbox 属性中。尽管出于 1 个原因，这些设置在插件中没有生效 - 在某处，输出到页面的 html 看起来像这样：

```
<a href="largeimage.png" data-lightbox="{"setting":value"}"> ... 
```

data-lightbox 属性上的周围 ' ' 被转换为 " " - 这在我的情况下不起作用。有谁知道为什么撇号被转换为引号以及我如何才能解决这个问题？谢谢！

更新：我的设置变量既可以作为格式正确的 JSON 字符串也可以作为对象使用。我尝试在 data-lightbox 属性中同时使用 Object 和字符串，但遇到了同样的问题。浏览器正在将我的 ' ' 转换为 " " ，这会导致 JSON 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:27:40.003

你的报价是错误的。HTML 属性需要使用双引号。因此，您需要在 JSON 值上使用单个值。您看到的浏览器输出是浏览器试图尽其所能纠正 html。

# linux - 在 linux shell 脚本中使用多个命令解释器

> ID：14742991
> 
> 赞同：2
> 
> 时间：2013-02-07T03:25:53.730
> 
> 标签：linux, shell, expect

我想使用单个 shell 脚本来执行一堆命令。其中一些命令包括：​​scp、cd、tar、date、expect、spawn。

当我声明 #!/bin/sh 或 #!/bin/bash 时，任何期望命令都不起作用 - 这是可以理解的。当我声明 #!/usr/bin/expect -f 然后 cd, tar, date 不起作用 - 我想这也是可以预料的（没有双关语）。

是否可以使用单个解释器使用所有这些命令，或者我可以在此过程中声明另一个？我潜入子壳，但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T03:35:54.170

您可以`expect`通过 shell here-doc 提供命令：

```
#!/bin/sh
# shell code....
expect <<EOS
# expect code...
EOS
# back to shell code... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T08:39:19.757

实际上，如果您在 expect 下运行，您将拥有[Tcl 的所有命令，](http://docs.activestate.com/activetcl/8.5/tcl/tcl_contents.htm)因此：

*   "cd" 可以工作，因为它是内置的
*   不需要“日期”，因为您可以使用 Tcl 时钟命令，例如。`clock format [clock seconds]`
*   “tar”和其他外部命令可以用 exec 运行，例如。`exec tar cf stuff.tar file1 file2 file3`

数据和控制结构与 sh 或 bash 不同，但一旦你习惯了它们就会更强大。

# system.reactive - 基于第三个在两个 IObservables 之间切换的更简洁的方式

> ID：14742992
> 
> 赞同：1
> 
> 时间：2013-02-07T03:25:55.823
> 
> 标签：system.reactive

我有两个价值流和一个选择器流，我想生成一个基于选择器在价值流之间交替的结果流。下面的代码给出了正确的结果，但我不喜欢它。

有人有更整洁的吗？

```
var valueStreamA = new BehaviorSubject<int>(0);
var valueStreamB = new BehaviorSubject<int>(100);
var selectorStream = new BehaviorSubject<bool>(true);

var filteredA = valueStreamA .CombineLatest(selectorStream, (a, c) => new { A = a, C = c })
  .Where(ac => ac.C)
  .Select(ac => ac.A);
var filteredB = valueStreamB.CombineLatest(selectorStream, (b, c) => new { B = b, C = c })
  .Where(bc => !bc.C)
  .Select(bc => bc.B);

var result = Observable.Merge(filteredA, filteredB);
result.Subscribe(Console.WriteLine);

valueStreamA.OnNext(1);
valueStreamB.OnNext(101);
selectorStream.OnNext(false);

valueStreamA.OnNext(2);
valueStreamB.OnNext(102);
selectorStream.OnNext(true); 
```

这会产生以下输出：

```
0
1
101
102
2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:24:43.043

我会做这样的事情：

```
var a = new BehaviorSubject<int>(0);
var b = new BehaviorSubject<int>(100);
var c = new BehaviorSubject<bool>(true);

var valueStreamA = a as IObservable<int>;
var valueStreamB = b as IObservable<int>;
var selector = c as IObservable<bool>;

var result = selector
    // for every change in the selector...
    .DistinctUntilChanged()
    // select one of the two value streams
    .Select(change => change ? valueStreamA : valueStreamB)
    // and flatten the resulting wrapped observable
    .Switch();

result.Subscribe(Console.WriteLine);

a.OnNext(1);
b.OnNext(101);
c.OnNext(false);

a.OnNext(2);
b.OnNext(102);
c.OnNext(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:01:26.787

可以做类似的事情：

```
var xs = Observable.Interval(TimeSpan.FromSeconds(1)).Select(_ => Feeds.Xs);
var ys = Observable.Interval(TimeSpan.FromSeconds(1)).Select(_ => Feeds.Ys);
var selectorSubject = new Subject<Feeds>();

var query = from selector in selectorSubject
                select from merged in xs.Merge(ys)
                where merged == selector
                select merged;

query.Switch().Subscribe(Console.WriteLine); 
```

OnNext 进入你的'selectorSubject'来改变它。您的示例有一些差异，但很容易解决：

1.  您的问题涉及 bool 类型的选择器，而我一直很懒惰并重用 Feeds 枚举，以便让我进行简单的相等性检查（合并 == 选择器）。你当然可以简单地做（其中选择器？合并== Xs：合并== Ys），或者类似的事情来评估每个合并的项目并丢弃你不关心的项目（取决于你的选择器）。

具体来说，您可能不仅要选择整数，还要选择提要的标识符。考虑使用 Tuple.Create() 之类的东西，这样每次更新都会获得该信息：{A - 1}、{B - 101} 等。然后你可以在哪里做：哪里选择器？merge.Item1 == A : mapped.Item1 == B //这将“true”映射到 feed A

1.  我还使用了一个 Switch，这将导致我的示例流重新启动，因为它们没有发布。你可能想发布你的并连接它们（让它们“热”），所以像我这样的 Switch 不会在订阅中造成任何新的副作用。您有一个主题（很热门），但“行为”部分将替换您传递给构造函数的值。发布和连接会阻止这种情况。

如果您仍然感到困惑，请大声喊叫。这不是一个完整的答案，但可能会给你足够的思考。

霍华德。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T21:21:54.123

现在更接近你原来的问题：

```
void Main() 
```

{

```
var valueStreamA = new BehaviorSubject<int>(0);
var valueStreamB = new BehaviorSubject<int>(100);

var selectorStreamA = valueStreamA.Select(id => Tuple.Create("A", id)).Publish();
var selectorStreamB = valueStreamB.Select(id => Tuple.Create("B", id)).Publish();
var selectorStream = new BehaviorSubject<bool>(true);

var query = from selector in selectorStream
            select from merged in selectorStreamA.Merge(selectorStreamB)
                   where selector == true ? merged.Item1 == "A" : merged.Item1 == "B"
                   select merged.Item2;

query.Switch().Subscribe(Console.WriteLine);

selectorStreamA.Connect();
selectorStreamB.Connect();

//First we get 0 output (because we are already using stream A, and it has a first value)
valueStreamA.OnNext(1); //This is output, because our selector remains as 'A'
valueStreamB.OnNext(101); //This is ignored - because we don't take from B
selectorStream.OnNext(false); //Switch to B

valueStreamA.OnNext(2); //Ignored - we are now using B only
valueStreamB.OnNext(102); //This is output
selectorStream.OnNext(true); //Switch back to A. 
```

}

输出：

0 1 102

# html - 无法对齐页面右侧的搜索栏

> ID：14742994
> 
> 赞同：3
> 
> 时间：2013-02-07T03:26:15.790
> 
> 标签：html, alignment

我想对齐`search bar`页面最右边的。为此，我写了以下内容：

```
<form method="get" action="#">
    <input type="search" name="q" style="text-align:right" />
</form> 
```

但它没有对齐右侧的搜索栏。这是为什么 ？

![在此处输入图像描述](../Images/17e698bf90fd94051674b1ed41bb02a7.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T03:28:39.673

```
<form method="get" action="#" style="float:right"> 
```

虽然，您不应该使用内联样式。尽量使用外部样式。

什么`float`是将受影响的元素移动到屏幕的一侧。以下所有元素将与浮动元素水平对齐。

假设我们有 2 个这样的元素。

```
|| Element1 ||
|| Element2 || 
```

如果我申请`float:left`，`Element1`那么输出将如下所示。

```
|| Element1 | Element2 || 
```

如果我`float:right`改为申请，那么输出将被反转。

```
|| Element2 | Element1 || 
```

简而言之，`float`完全按照它所说的去做。它将一个元素浮动到屏幕边缘，并使其成为后续元素的边缘。

PS：为了简单起见，我写了屏幕的边缘。您也可以`float`以分层方式申请。在这种情况下，父元素的边缘成为要对齐的边缘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T03:36:56.507

`text-align`这样做，它将元素中的文本向右对齐。在输入框的情况下，它将光标放在输入字段的右侧。你想把`float`输入框放在右边，它把输入框放在其父元素的最右边（在本例中为表单）：

HTML

```
<form method="get" action="#">
    <input placeholder="Search" type="search" name="q" id="search-box" />
</form> 
```

CSS

```
form{
    background-color: #000;
    overflow: auto;
    height: 50px;
    padding:5px 5px 0;
}
#search-box{
    float:right;
} 
```

这是**[jsFiddle](http://jsfiddle.net/jpQfD/)**

# ipad - 横向设备的不同视口元标记

> ID：14742998
> 
> 赞同：2
> 
> 时间：2013-02-07T03:26:54.610
> 
> 标签：ipad, landscape, viewport, metatag

横向设备与纵向设备是否可以使用不同的元标记

例如，我只想将此元标记用于 ipad 纵向模式

```
<meta name="viewport" content="width=device-width, initial-scale=0.70, maximum-scale=1"> 
```

对于 ipad 上的横向模式，我想将初始比例更改为此

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

# magento - Magento中控制器覆盖的用途是什么？

> ID：14742999
> 
> 赞同：1
> 
> 时间：2013-02-07T03:27:22.420
> 
> 标签：magento, magento-1.7, magento-1.4

在 magento 中，覆盖控制器有什么用？在 java 中，将超类方法调用到子类会很有帮助。那么两个覆盖都相同吗？如果是这样，我们将在何时何地覆盖控制器？我知道 magento 本身在 app/code/core/Mage 路径提供模块。那么在什么情况下我们会超越控制器而不是这个？

我搜索了谷歌，它显示了如何覆盖控制器，但我还没有找到为什么要在 magento 中覆盖控制器？

谁能解释一下这个？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:42:55.643

覆盖控制器意味着我们可以将 Magento 核心控制器（app/code/core/Mage/）覆盖到我们的自定义 Magento 模块（app/code/local/）中。

您可以在自定义模块中覆盖 Magento 核心控制器时实现自定义操作。

以下是 Magento 控制器覆盖的参考

[https://stackoverflow.com/questions/6980026/override-magento-controller](https://stackoverflow.com/questions/6980026/override-magento-controller)

[Magento 覆盖控制器](https://stackoverflow.com/questions/11349530/magento-override-controller)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T07:18:12.487

添加@Man Kingdom给出的答案
覆盖控制器避免弄乱或玩magento不喜欢的核心文件。
即使您被覆盖的控制器是错误的，您也可以选择从默认核心文件中恢复。
此外，当您想要升级您的 magento 版本时，覆盖控制器对您有很大帮助。
以下网址我总是参考：
[链接 1](http://lrysoft.wordpress.com/2011/12/09/magento-core-controller-over-ride-and-magento-route/)
[链接 2](http://www.webspeaks.in/2011/03/override-controllers-in-magento.html)
希望这对您有所帮助。