# StackOverflow 问答 12792000-12792999

# php - 收集统计信息，例如网页的浏览次数

> ID：12792005
> 
> 赞同：1
> 
> 时间：2012-10-09T02:20:04.570
> 
> 标签：php, mysql, statistics

我正在开发一个网站（PHP/JS/MYSQL）。我想跟踪特定页面的查看次数。我知道每次用户访问页面时更新数据库并不是一个好的选择。有人可以推荐一个解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:25:58.393

我同意使用谷歌分析。

它令人难以置信的容易。

只需访问[http://www.google.com/analytics/](http://www.google.com/analytics/)并创建帐户即可。（如果您没有 gmail 帐户，那么我会先创建一个）

然后按照说明等将您的代码粘贴到每个页面上。

这是代码示例（您当然会在 UA 之后使用自己的数字）：

```
 <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-xxxxxxxxxx']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script> 
```

他们甚至提供了可以粘贴的代码。

这足以满足您的要求，并且如果您想跟踪更多内容，还可以为您提供大量其他跟踪选项。

最重要的是，它是免费的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T03:39:18.747

正如其他人所说，我会使用谷歌分析。这在努力和时间方面要简单得多。这不仅在这些方面更好，而且已经开发了一段时间。如果你的技能集那么强，它很可能需要数年时间才能复制。:)

# ruby - Ruby中的REGEXP检查一个单词是否超过一个字母

> ID：12792014
> 
> 赞同：-3
> 
> 时间：2012-10-09T02:20:33.733
> 
> 标签：ruby, regex

我已经用 if else 和 count 解决了，但如果你有一些解决方案来检查一个单词是否超过一个字符，我真的很想知道。

我想检查给定的任何字符串是否必须是 a、b 或 c。如果是 aaa、ab、cc、dd，它将失败。

就像我之前说的那样，我已经有了解决方案，但是使用 if's 我想将 regexp 与 ruby​​ 一起使用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T02:25:42.833

这个可以做到只匹配一个字符：

```
^[a-zA-Z]$ 
```

如果您也想不匹配任何字符，只需使用：

```
^[a-zA-Z]?$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T05:37:10.847

```
def lengthGreaterThan1?(str)
  if str =~ /.{2,}|^$/
    return "yes"
  else
    return "no"
  end
end 
```

假设您将一个字符串传递给此函数，没有单词分隔符，它只会匹配长度为 1 的字符串。

请注意，`/^$/`匹配空白字符串并且字符串“a b”失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T05:56:04.203

要匹配“a”、“b”或“c”，但仅此而已，您可以使用以下正则表达式：

```
/^[abc]$/ 
```

要检查字符串是否为空或包含*除*单个“a”、“b”或“c”以外的任何内容，这应该可以解决问题：

```
/^$|[^abc]|.{2,}/ 
```

根据您要允许的字符，您可能需要替换`[abc]`和`[^abc]`部分。例如，允许使用整个（小写）字母表将需要以下字符类：`[a-z]`, `[^a-z]`.

# mysql - YII SQL 查询优化

> ID：12792018
> 
> 赞同：4
> 
> 时间：2012-10-09T02:20:58.600
> 
> 标签：mysql, yii

我有一个巨大的 ID 列表，我需要通过一个表查询这些 ID 在表中是否可用，如果是，则获取其模型。

由于有几千个 ID，这个过程真的很慢，因为我正在使用 CActiveRecord::find() 方法

前任。`$book = Book::model()->find('book_id=:book_id', array(':book_id'=>$product->book_id));`

我什至索引了所有可能的键，仍然没有改进。有什么提高执行速度的建议吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T05:59:19.190

1）制作书籍ID列表

```
foreach $product in Product-List
    $book_ids[$product->book_id] = $product->book_id; 
```

现在查询所有 Book 模型（由 索引`book_id`）

```
$books = Book::model()->findAll(array(
    'index' => 'book_id',
    'condition' => 'book_id IN (' . implode(',', $book_ids). ')',
)); 
```

集成`$books`到您的代码中，我相信您正在遍历所有产品。

```
foreach $product in Product-List
    if( isset($books[$product->book_id]) )
        $model = $books[$product->book_id] 
```

* * *

2）另一种方式（我只是假设你有产品模型）

在 Product 模型中添加与 Book 的关系

```
public function relations() {
    .......
    'book'=>array(self::HAS_ONE, 'Book', 'book_id'),
    .......
} 
```

在检索您的产品列表`'with' => array('book')`时，使用 CActiveDataProvider 或 CActiveRecord 中的任何一个添加条件...

```
//Example
$productList = Product::model()->findAll(array(
    'with' => array('book'),
));

foreach( $productList as $product ) {
    .......
    if( $product->book != null )
        $model = $product->book;
    ......
} 
```

无论哪种方式，您都可以减少 SQL 查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T04:35:18.293

如果您使用模式缓存会更好，因为`Yii`每次执行查询时都会获取模式。它将提高您的查询性能。

`config/main.php`您可以通过在文件中进行一些配置来启用模式缓存。

```
return array(
    ......
    'components'=>array(
        ......
        'cache'=>array(
            'class'=>'system.caching.CApcCache', // caching type APC cache
        ),

        'db'=>array(
            ...........
            'schemaCachingDuration'=>3600, // life time of schema caching
        ),
    ),
); 
```

您还可以获取表的特定列，这也将提高性能。

您可以使用`CDbCriteria`with find 方法来做到这一点`CActiveRecord`。

```
$criteria = new CDbCriteria;
$criteria->select = 'book_id';
$criteria->condition = 'book_id=:book_id';
$criteria->params = array(':book_id'=>$product->book_id);
$book = Book::model()->find($criteria); 
```

`nosql`如果您正在处理数千条记录，如果合适的话，我建议您使用任何数据库。

# sql - 案例中的TSql案例

> ID：12792020
> 
> 赞同：3
> 
> 时间：2012-10-09T02:21:16.103
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在尝试在 tsql 中使用案例中的案例来执行选择语句。首先是基于 SearchField 是什么。接下来我需要根据SearchOper来做。

```
 declare @searchField varchar(50)  
    declare @searchString varchar(50)
    declare @searchOper varchar(50)

    case @searchField
     when 'CompanyName' then
        case @searchOper
          when 'eq' then
            select * from tbl1 where CompanyName = @searchString
         when 'ne' then 
           select * from tbl1 where CompanyName <> @searchString
         end
     when 'StoreNum' then
        case @searchOper
          when 'eq' then
             select * from tbl1 where StoreNum = @searchString
          when  'ne' then
             select * from tbl1 where StoreNum <> @searchString
        end 
     end 
```

请注意，我要做的是在 case 语句中进行选择。

我收到一条消息，提示关键字“case”附近的语法不正确。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T02:30:59.627

根据您的示例，您可能想要使用 IF 语句（这是 ELSE 的示例，但您也可以多次使用 IF 和 ELSE IF）：

```
declare @searchField varchar(50)  
declare @searchString varchar(50)
declare @searchOper varchar(50)

IF @searchField='CompanyName'
BEGIN
    IF @searchOper='eq'
    BEGIN
        select * from tbl1 where CompanyName = @searchString
    END
    ELSE
    BEGIN
        select * from tbl1 where CompanyName <> @searchString
    END
END
ELSE 
BEGIN
    IF @searchOper='eq'
    BEGIN
        select * from tbl1 where StoreNum = @searchString
    END
    ELSE
        select * from tbl1 where StoreNum <> @searchString
    END
END 
```

*CASE 非常相似，但更适用于内联语句（即 SELECT CASE 1=1 THEN 'a' ELSE 'b' END）。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T02:50:44.873

```
declare @searchField varchar(50)  
declare @searchString varchar(50)
declare @searchOper varchar(50)

 select *
 from tbl1
 where (@searchField <> 'companyName'
       or
       @searchOper = 'eq' and CompanyName = @searchString
       or
       @searchOper = 'ne' and CompanyName <> @searchString)
   AND (@searchField <> 'StoreNum'
       or
       @searchOper = 'eq' and CompanyName = @searchString
       or
       @searchOper = 'ne' and CompanyName <> @searchString)
 option (recompile) 
```

这是编写它的一种方法，它应该可以正常运行。您拥有的是[www.sommarskog.se/dyn-search.html](http://www.sommarskog.se/dyn-search.html)的变体，但`OPTION (RECOMPILE)`每次仍应生成最佳计划。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T06:26:03.433

```
declare @searchField varchar(50)  
declare @searchString varchar(50)
declare @searchOper varchar(50)

SELECT
    (case @searchField
     when 'CompanyName' then
        (case @searchOper
          when 'eq' then
            (select * from tbl1 where CompanyName = @searchString)
         when 'ne' then 
           (select * from tbl1 where CompanyName <> @searchString)
         end
         )
     when 'StoreNum' then
        (case @searchOper
          when 'eq' then
             (select * from tbl1 where StoreNum = @searchString)
          when  'ne' then
            ( select * from tbl1 where StoreNum <> @searchString)
        end 
        )
     end 
) a 
```

我懒得构建tbl1，改为getdate

```
declare @searchField varchar(50)  
declare @searchString varchar(50)
declare @searchOper varchar(50)

SET @searchField = 'CompanyName'
SET @searchOper = 'eq'
SELECT
    (case @searchField
     when 'CompanyName' then
        (case @searchOper
          when 'eq' then
            (select getdate())
         when 'ne' then 
           (select getdate())
         end
         )
     when 'StoreNum' then
        (case @searchOper
          when 'eq' then
             (select getdate())
          when  'ne' then
            ( select getdate())
        end 
        )
     end 
) a 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T06:47:43.230

根据 MSDN，

“CASE 表达式不能用于控制 Transact-SQL 语句、语句块、用户定义函数和存储过程的执行流程。”

参考[这里](http://msdn.microsoft.com/en-us/library/ms181765.aspx)

# php - PHP MySQL 数组混淆

> ID：12792022
> 
> 赞同：0
> 
> 时间：2012-10-09T02:21:20.767
> 
> 标签：php, mysql, arrays

我正在开发一个 Twitter 应用程序。我的密钥存储在用户的数据库中，因此它会向每个用户发送他们的密钥。基本上，用户 1 的密钥是 X，用户 2 的密钥是 Y，（例如，不适合我），您需要他们的密钥来发送推文。

所以我试图将数据库中所有用户的键用作数组。但它显示为这个 Xy，它们被组合在一起，它认为这是一个完整的关键。

我怎样才能让 PHP 知道这是两个不同的键？

```
require('config.php');
$query = "SELECT * FROM users";
$result = mysql_query($query) or die(mysql_error());
while($row = mysql_fetch_array($result)){
$oauthtoken2 = $row['oauth_token'];
$oauthsecret2 = $row['oauth_token_secret'];
$oAuthToken = $oauthtoken2;
$oAuthSecret = $oauthsecret2;
echo "$oAuthToken";
require_once('twitteroauth.php');
$tweet = new TwitterOAuth($consumerKey, $consumerSecret, $oAuthToken, $oAuthSecret);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T02:25:33.860

它似乎是连接的，因为 echo 不包含空格，请尝试

```
echo "$oAuthToken\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T02:26:12.417

尝试：

```
<?php
require('config.php');
require_once('twitteroauth.php');

$query = "SELECT * FROM users";
$result = mysql_query($query) or die(mysql_error());

while($row = mysql_fetch_array($result)){
    $oauthtoken2 = $row['oauth_token'];
    $oauthsecret2 = $row['oauth_token_secret'];
    $oAuthToken = $oauthtoken2;
    $oAuthSecret = $oauthsecret2;
    //echo "$oAuthToken";
    $tweet = new TwitterOAuth($consumerKey, $consumerSecret, $oAuthToken, $oAuthSecret);

    // do what ever you need to do here with the $tweet object.

    //unset($tweet); - unset it here, then loop to the next token / secret pair
}
?> 
```

# css - 如何在另一个 div 中定位三个 div（一个垂直和两个水平）？

> ID：12792023
> 
> 赞同：1
> 
> 时间：2012-10-09T02:22:08.907
> 
> 标签：css, html

我在另一个较大的一个内有三个 div 层。像这样的东西：

[图片 http://dev.kgstiles.com/wp-content/uploads/2012/10/Stack.png](http://dev.kgstiles.com/wp-content/uploads/2012/10/Stack.png)

可以说蓝色部分是页眉和页脚。我目前拥有的是顶部黄色 div 旁边的绿色，但绿色 div 的底部将第二个黄色 div 向下推。我基本上有两个相邻的 div，然后在它们下面有一个 div，但我想要更接近图片的东西。我可能会错过什么可以将绿色 div 放在两个黄色 div 旁边？

我会发布代码，因为每个 div 中有很多内容，但我有类似的东西：

```
<div class="container" >

<div id="greenDiv" style="float:right; padding-right:5%; padding-top:15px;">

</div>
<div id="topYellow" style="dsiplay:block;"> 

<-- Content -->
</div>
<div id="bottomYellow" style="dsiplay:block; float:left;"> 

<-- Content -->

</div> 
```

我究竟需要做些什么来防止绿色 div 将底部的黄色 div 向下推？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T02:34:13.267

我会完全避免使用花车。如果绿色 div 的宽度是固定的，你可以像这样设置它们：

```
.container {
    position: relative; /* or anything besides static */
}

#greenDiv {
    position: absolute;
    top: 0;
    right: 0;
    width: 100px; 
}

#topYellow, #bottomYellow {
    margin-right: 100px; /* Plus more if you want a gap */
} 
```

本质上，这会将绿色 div 从容器的“流”中取出。黄色 div 将简单地放置在正常流中，并且它们的边距防止它们与绿色 div 重叠。您也可以选择浮动`#greenDiv`而`#bottomYellow`不是使用绝对定位。这样做的好处是，如果`#greenDiv`比两个黄色高，那么在页脚上做 a`clear: both`应该确保`#greenDiv`和页脚不重叠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T02:52:38.507

您可以包装两个黄色元素并将该元素浮动，而不是黄色元素，向左浮动，然后将绿色浮动到左侧。在关闭整个容器之前添加一个 clearfix，然后 BOOM！你的黄色元素在左边，绿色在右边，容器延伸到更高的集合的高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:22:42.877

设置所有 div 浮动：对；第一个绿色 div；或者 ：

```
<div class="container">
  <div id="letf_div" style="float:left">
     <div id="yelow1"></div>
     <div id="yelow2"></div>
  </div>
  <div id="right_div" style="float:left">
   <div id="green"></div>
  </div>
</div> 
```

# php - APPFOG 中带有 PostgreSql 数据库的 CodeIgniter 网站

> ID：12792024
> 
> 赞同：2
> 
> 时间：2012-10-09T02:22:09.967
> 
> 标签：php, codeigniter, postgresql, postgresql-9.1, appfog

我在 Codeigniter 框架中运行一个网站。我正在使用postgresql。我浏览了 APPFOG 文档。但我不清楚我如何配置 postgres 数据库。我在哪里托管数据库？如何进行数据库更新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T18:34:21.233

在 application/config 中的 Database.php，替换行，

```
<pre>
$db['default']['hostname'] = '<ur hostname>';
$db['default']['username'] = '<ur db username>';
$db['default']['password'] = '<ur db password>';
$db['default']['database'] = '<ur db name>';
</pre> 
```

和

```
<pre>
$VCAP_SERVICES = getenv("VCAP_SERVICES");
$VCAP_SERVICES_json = json_decode($VCAP_SERVICES, true);
$VCAP_SERVICES_postgresql_config = $VCAP_SERVICES_json["postgresql-9.1"][0]["credentials"];
$db['default']['hostname'] = $VCAP_SERVICES_postgresql_config['hostname'];
$db['default']['username'] = $VCAP_SERVICES_postgresql_config['user'];
$db['default']['password'] = $VCAP_SERVICES_postgresql_config['password'];
$db['default']['database'] = $VCAP_SERVICES_postgresql_config['name'];
</pre> 
```

这将负责数据库连接。使用 af tunnel 进行更新。

# jquery-masonry - jQuery砌体和同位素 - 高度

> ID：12792025
> 
> 赞同：0
> 
> 时间：2012-10-09T02:22:22.630
> 
> 标签：jquery-masonry

我需要显示一个隐藏的 div 附加到`.box`div ，我的砌体代码是

```
$(function(){

var $container = $('.content');

$container.imagesLoaded( function(){
  $container.masonry({
    itemSelector : '.box',
    isAnimated : true,
    isResizable : true,

  });
});

}); 
```

它加载了一个带有图像和文本的框，但是当我想显示指定的 DIV 砌体想要移动高度时，所以我的隐藏 div 显示在 .box div 后面

```
$('.commentopen').live("click",function()
{
var ID = $(this).attr("id");
$("#commentbox"+ID).fadeIn('slow');
return false;
}); 
```

任何想法如何在不重新加载的情况下在同一个窗口中扩展高度我尝试砖石`.reload`或`.reloadItems`但没有运气，我认为是因为`.imagesLoaded`功能

这里有一个视觉解释![在此处输入图像描述](../Images/fbf66b01fb2c1c161d9f0ad2383499b2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T22:56:43.493

我所能理解的是，当显示“隐藏”的 div 时，您的同位素布局没有正确反应（当高度增加时重新定位其他元素）。所以，也许[这里](http://jsfiddle.net/26vBP/)的小提琴会有所帮助。如果您发布一个指向您的沙箱的链接或自己提供一个 jsfiddle，那么调试起来会更容易。您似乎还通过 imagesLoaded 加载大图像，因此如果未正确实现，它也可能发挥作用。

# java - 尝试在 Eclipse 之外使用资源/项目时出现工作区关闭错误

> ID：12792027
> 
> 赞同：1
> 
> 时间：2012-10-09T02:22:52.363
> 
> 标签：java, eclipse, abstract-syntax-tree, eclipse-jdt

我正在使用 Eclipse ast/jdt，如本文所述 -[如何在 Eclipse 之外的项目中使用 java Eclipse 抽象语法树？（即不是 Eclipse 插件）](https://stackoverflow.com/questions/964747/how-can-i-use-the-java-eclipse-abstract-syntax-tree-in-a-project-outside-eclipse)

问题是，当我尝试使用时，我总是得到 null `resolveBinding()`，这是因为没有使用`setProject(IJavaProject) or setEnvironment(String[], String[], String[], boolean)`，正如这篇文章中所写 - [VariableDeclarationFragment node resolveBindind() 在 eclipse/jdt/ast 中返回 null](https://stackoverflow.com/questions/12755640/variabledeclarationfragment-node-resolvebindind-returns-null-in-eclipse-jdt-as)

解决返回 null 的问题，我尝试使用该代码，但最终得到一个错误提示`Workspace is closed`。

可能有什么问题？

![在此处输入图像描述](../Images/e4453d2e3778ee56d20d52143cb23960.png)

我的工作区中有 .project 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<projectDescription>
    <name>AstRewrite4</name>
    <comment></comment>
    <projects>
    </projects>
    <buildSpec>
        <buildCommand>
            <name>org.eclipse.jdt.core.javabuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
    </buildSpec>
    <natures>
        <nature>org.eclipse.jdt.core.javanature</nature>
    </natures>
</projectDescription> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T05:35:10.117

您不在 Plug-In/Bundle Runtime 中，因此 org.eclipse.core.resources 插件没有“启动”。工作区和相关对象的初始化仅在那时发生。您必须自己调用 ResourcesPlugin 上的 start() 方法——并不是说我保证会解决所有问题，或者这不会给您带来其他问题。

# ruby - 从模块创建类方法

> ID：12792031
> 
> 赞同：4
> 
> 时间：2012-10-09T02:23:19.910
> 
> 标签：ruby, metaprogramming

给出这里的简单示例：

```
class Base
  @tag = nil 

  def self.tag(v = nil) 
    return @tag unless v 
    @tag = v
  end 
end 

class A < Base 
  tag :A
end

class B < Base
  tag :B
end 

class C < Base; end

puts "A: #{A.tag}"
puts "B: #{B.tag}"
puts "A: #{A.tag}"
puts "C: #{C.tag}" 
```

按预期工作

```
A: A
B: B 
A: A
C: 
```

我想创建一个模块，base 将扩展以提供相同的功能，但具有类指定的所有标记信息。例如。

```
module Tester 
  def add_ident(v); ....; end
end

class Base 
  extend Tester 

  add_ident :tag
end 
```

我发现我可以通过直接评估来做到这一点，所以：

```
def add_ident(v)
  v = v.to_s 
  eval "def self.#{v}(t = nil); return @#{v} unless t; @#{v} = t; end"
end 
```

但我真的不喜欢在任何语言中使用 eval 字符串。

有没有一种方法可以在不使用 eval 的情况下获得此功能？我已经完成了我能想到的 define_method 和 instance_variable_get/set 的所有组合，但我无法让它工作。

没有 Rails 的 Ruby 1.9。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T03:08:25.023

您想在要扩展的类的单例类上定义一个动态方法。一个类的单例类可以用这样的表达式来访问`class << self; self end`：要打开一个类的类的范围，您可以使用`class_eval`. 把所有这些放在一起，你可以写：

```
module Identification

  def add_identifier(identifier)
    (class << self; self end).class_eval do
      define_method(identifier) do |*args|
        value = args.first
        if value
          instance_variable_set("@#{identifier}", value)
        else
          instance_variable_get("@#{identifier}")
        end
      end
    end
  end

end

class A
  extend Identification

  add_identifier :tag
end 
```

如果您使用的是最新版本的 Ruby，这种方法可以替换为[Module#define_singleton_method](http://apidock.com/ruby/Object/define_singleton_method)：

```
module Identification

  def add_identifier(identifier)
    define_singleton_method(identifier) do |value = nil|
      if value
        instance_variable_set("@#{identifier}", value)
      else
        instance_variable_get("@#{identifier}")
      end
    end
  end

end 
```

我不相信您想使用`self.class.send(:define_method)`，如此处的另一个答案所示；这具有将动态方法添加到 的所有子类的意外副作用 `self.class`，`A`在我的示例中是`Class`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T03:00:20.003

我最喜欢的 Ruby 书籍[Metaprogramming Ruby](http://pragprog.com/book/ppmetr/metaprogramming-ruby)用以下方式解决了这些问题：

```
module AddIdent 
  def self.included(base)
    base.extend ClassMethods    # hook method
  end

  module ClassMethods
    def add_ident(tag)
      define_method "#{tag}=" do |value=nil|
        instance_variable_set("@#{tag}", value)
      end

      define_method tag do 
        instance_variable_get "@#{tag}"
      end 
    end
  end
end 

# And use it like this
class Base
  include AddIdent

  add_ident :tag
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T02:41:22.667

```
module Tester
  def add_ident(var)
    self.class.send(:define_method, var) do |val=nil|
        return instance_variable_get("@#{var}") unless val
        instance_variable_set "@#{var}", val
      end
    end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T02:38:52.543

呸，不总是这样，一旦你感到沮丧到发帖，你就会找到答案:)

诀窍似乎在于 (class << self; self; end) 在不破坏本地范围的情况下为您提供类实例。参考：[如何使用define_method创建类方法？](https://stackoverflow.com/questions/752717/how-do-i-use-define-method-to-create-class-methods)

```
def add_ident(v) 
  var_name = ('@' + v.to_s).to_sym 
  (class << self; self; end).send(:define_method, v) do |t = nil|
    return instance_variable_get(var_name) unless t
    instance_variable_set(var_name, t)
  end 
end 
```

如果他们出现，我会接受更好的答案。

# android - SQLite 文件能否成功复制到无根 android 设备的数据文件夹中？

> ID：12792037
> 
> 赞同：3
> 
> 时间：2012-10-09T02:24:04.193
> 
> 标签：android, sqlite

我知道为了访问设备上的数据文件夹，它需要被植根。但是，如果我只想将数据库从资产文件夹复制到设备上的数据文件夹，那么复制过程是否可以在无根手机上运行？以下是我的数据库助手类。从 logcat 中，我可以验证调用 copyDataBase()、createDataBase() 和 openDataBase() 的方法是否成功返回。但是，我收到此错误消息

> android.database.sqlite.SQLiteException：没有这样的表：TABLE_NAME：

当我的应用程序正在执行 rawQuery。我怀疑数据库文件没有成功复制（不能太确定，因为我无权访问数据文件夹），但是对 copyDatabase() 的方法调用没有抛出任何异常。会是什么呢？谢谢。

ps：我的设备还没有root，希望不是报错的主要原因。

```
public DatabaseHelper(Context context) {

        super(context, DB_NAME, null, 1);
        this.myContext = context;
    }   

 public void createDataBase() throws IOException{

        boolean dbExist = checkDataBase();

        String s = new Boolean(dbExist).toString();
        Log.d("dbExist", s );

        if(dbExist){
            //do nothing - database already exist
            Log.d("createdatabase","DB exists so do nothing");
        }else{

        this.getReadableDatabase();

            try {

                copyDataBase();
                Log.d("copydatabase","Successful return frm method call!");

            } catch (IOException e) {

                throw new Error("Error copying database");

            }
        }

    }

    private boolean checkDataBase(){

        File dbFile = new File(DB_PATH + DB_NAME);
        return dbFile.exists();
            }

    private void copyDataBase() throws IOException{

        //Open your local db as the input stream
        InputStream myInput = null;

            myInput = myContext.getAssets().open(DB_NAME);

            Log.d("copydatabase","InputStream successful!");

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        //Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        //transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }

        //Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

    public void openDataBase() throws SQLException{

        //Open the database
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

    }

/*    @Override
    public synchronized void close() {

            if(myDataBase != null)
                myDataBase.close();

            super.close();

    }*/

    public void close() {
        // NOTE: openHelper must now be a member of CallDataHelper;
        // you currently have it as a local in your constructor
        if (myDataBase != null) {
            myDataBase.close();
        }
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:33:43.343

我假设您的 DB_NAME 与您的资产文件夹中存在的数据库不同。

如果您正在关注`reigndesign`，请检查此行：

```
private static String DB_NAME ="myDBName"; 
```

DB_NAME 这里是您的数据库的名称。假设您在 assets 文件夹中有数据库的副本。您的 DB_NAME 必须与 assets 文件夹中存在的相同。

或者

按照[这个](https://stackoverflow.com/questions/9109438/how-to-use-existing-database-with-android-app/9109728#9109728)。

# cassandra - CQL3 现在是否需要 Cassandra 的架构？

> ID：12792040
> 
> 赞同：9
> 
> 时间：2012-10-09T02:24:27.767
> 
> 标签：cassandra, cql, cql3

上周我刚刚参加了 Cassandra 的速成课程，从 Thrift API 到 CQL，再到深入了解 SuperColumns，再到学习我不应该使用它们，而是使用复合键。

我现在正在尝试 CQL3，看来我不能再插入到架构中未定义的列中，或者在`select *`

我是否缺少在 CQL3 中启用此功能的一些选项，或者它是否希望我定义架构中的每一列（违背了宽、灵活行的目的，恕我直言）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T14:26:26.053

是的，CQL3 确实需要在使用前声明列。

但是，您可以根据需要执行任意数量的 ALTER，不会导致锁定或性能损失。

也就是说，您在早期 C* 版本中使用“动态列”的大多数地方都由 C* 1.2 中的 Map 提供更好的服务。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T07:27:47.093

我建议您使用“WITH COMPACT STORAGE”探索复合列。“COMPACT STORAGE”列族实际上只允许定义键列：

例子：

> CREATE TABLE entity_cargo ( entity_id ascii, item_id ascii, qt ascii, PRIMARY KEY (entity_id, item_id) ) WITH COMPACT STORAGE

实际上，当您从 itemid 插入不同的值时，您不会添加带有 entity_id、item_id 和 qt 的行，而是添加带有名称（item_id 内容）和值（qt 内容）的列。所以：

> 插入entities_cargo (entity_id,item_id,qt) values(100,'oggetto 1',3);
> 
> 插入entities_cargo (entity_id,item_id,qt) values(100,'oggetto 2',3);

现在，这是您在 CQL3 中看到这些行的方式：

> cqlsh:goh_master> select * from entity_cargo where entity_id = 100;
> 
> entity_id | item_id | qt
> 
> ------------+-----------+----
> 
> ```
>  100 | oggetto 1 |  3
> 
>   100 | oggetto 2 |  3 
> ```

如果您从 cli 检查 tnem，它们会如何：

> [default@goh_master] 获取实体货物[100]；
> 
> =>（列=oggetto 1，值=3，时间戳=1349853780838000）
> 
> =>（列=oggetto 2，值=3，时间戳=1349853784172000）
> 
> 返回 2 个结果。

您可以使用

> select * from entity_cargo where entity_id = 100 and item_id = 'oggetto 1';

希望能帮助到你

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-15T14:35:21.073

Cassandra 仍然允许使用宽行。该答案引用[了在提出问题后编写的 DataStax 博客条目](http://www.datastax.com/dev/blog/thrift-to-cql3)，其中详细介绍了 CQL 和底层架构之间的链接。

## 传统支持

使用以下命令通过 Thrift 定义的动态列族（注意没有特定于列的元数据）：

```
create column family clicks
  with key_validation_class = UTF8Type
  and comparator = DateType
  and default_validation_class = UTF8Type 
```

这是CQL中的*完全等价物：*

```
CREATE TABLE clicks (
  key text,
  column1 timestamp,
  value text,
  PRIMARY KEY (key, column1)
) WITH COMPACT STORAGE 
```

这两个命令都创建了一个宽行列族，用于存储按日期排序的记录。

## CQL 附加功能

此外，CQL 提供了为行 id、列和值元素分配标签以指示正在存储的内容的能力。以下在 CQL 中定义相同结构的替代方法突出了 DataStax 示例中的此功能 - 用于存储用户在网站上的点击的列族，按时间排序：

```
CREATE TABLE clicks (
  user_id text,
  time timestamp,
  url text,
  PRIMARY KEY (user_id, time)
) WITH COMPACT STORAGE 
```

**笔记**

*   CQL 中的*表*总是映射到Thrift中的*列族*
*   CQL 驱动程序使用主键定义的第一个元素作为行键
*   *复合列*用于实现可以在 CQL 中定义的额外列
*   不建议对新设计使用*WITH COMPACT STORAGE ，因为它固定了可能的列数。*换句话说， ALTER TABLE ... ADD 在这样的表上是不可能的。除非绝对必要，否则请忽略它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T14:51:26.903

有趣的是，我对 CQL3 不了解。在 PlayOrm 中，想法是它是您必须定义的“部分”模式，并且在 select 的 WHERE 子句中，您只能使用在部分模式中定义的东西，但它返回所有行的数据，甚至是它的数据不知道......我希望CQL应该做同样的事情:(我现在需要调查一下。谢谢，Dean

# c - strftime 发布星期几

> ID：12792044
> 
> 赞同：1
> 
> 时间：2012-10-09T02:24:49.477
> 
> 标签：c

```
 char buffer[800];
        struct tm str_time;

        str_time.tm_mday = Cur_Day;
        str_time.tm_mon = Cur_Month - 1;
        str_time.tm_year = entries[i].Year_Start - 1900;
        int len = strftime(buffer, 100, "%A, %d %B %Y", &str_time);
        printf("\n%s\n", buffer); 
```

无论 Cur_Day 和 Cur_Month 的值如何，上述结果在一周中的哪一天总是星期日怎么样？

样本输出：

```
Sunday, 23 November 2012
------------------------
stuff

Sunday, 25 November 2012
------------------------
stuff

Sunday, 26 November 2012
------------------------
stuff 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T02:31:12.343

您的`str_time`结构（如果它看起来是一个局部变量）在其字段中具有不确定的值，除非您*明确*设置它们。所做`strftime`的只是使用它拥有的值，它不会首先调整值以符合其他字段。

由于您没有设置`tm_wday`，它将保持原来的状态（看起来为 0，因为它总是星期天）。

如果您*确实*想根据其他字段调整字段，您应该查看`mktime()`.

从标准（ISO C99）：

> mktime 函数将timeptr 指向的结构中以本地时间表示的分解时间转换为与time 函数返回的值编码相同的日历时间值。
> 
> 结构的tm_wday和tm_yday组件的原始值被忽略，其他组件的原始值不限于上述范围。
> 
> 成功完成后，结构的 tm_wday 和 tm_yday 组件的值被适当设置，其他组件被设置为表示指定的日历时间，但它们的值被强制为上述范围；在确定 tm_mon 和 tm_year 之前，不会设置 tm_mday 的最终值。

最好的办法是使用`time()`并`localtime()`填充`tm`结构，然后在调用之前更改要更改的字段`mktime()`。这样，您就可以保证*所有*字段都具有合理的值。

以下程序显示了一种方法：

```
#include <stdio.h>
#include <time.h>

int main (void) {
    char buffer[100];
    time_t now;
    struct tm *ts;

    // Get today in local time and output it.

    now = time (NULL);
    struct tm *ts = localtime (&now);
    strftime (buffer, 100, "%A, %d %B %Y", ts);
    printf ("Now      = %s\n", buffer);

    // Advance day-of-month and make new date.
    // Probably need to intelligently handle month rollover.

    ts->tm_mday++;
    mktime (ts);
    strftime (buffer, 100, "%A, %d %B %Y", ts);
    printf ("Tomorrow = %s\n", buffer);

    return 0;
} 
```

该程序的输出是：

```
Now      = Tuesday, 09 October 2012
Tomorrow = Wednesday, 10 October 2012 
```

* * *

对于它的价值，这是一个完整的程序，它使用该方法为您提供给定日期的星期几（默认为今天）。

`-y`您可以使用可选的,`-m`和`-d`参数以您想要的任何顺序更改年、月和日，并且可以根据需要更改任意次数，尽管每种类型只计算最后一个。

```
#include <stdio.h>
#include <time.h>

static int makeError (char *argVal, char *errStr) {
    printf ("Error with argument '%s': %s\n", argVal, errStr);
    printf ("Usage: dow [-y<year>] [-m<month>] [-d<day>]\n");
    return 1;
}

int main (int argc, char *argv[]) {
    int idx, intVal;
    char chVal;
    char buff[100];
    time_t now = time (NULL);
    struct tm *nowStr = localtime (&now);

    for (idx = 1; idx < argc; idx++) {
        chVal = (*argv[idx] != '-') ? '\0' : *(argv[idx] + 1);
        if ((chVal != 'y') && (chVal != 'm') && (chVal != 'd'))
            return makeError (argv[idx], "does not start with '-y/m/d'");

        intVal = atoi (argv[idx] + 2);
        if (intVal < 0)
            return makeError (argv[idx], "suffix is negative");
        sprintf (buff, "%d", intVal);
        if (strcmp (buff, argv[idx] + 2) != 0)
            return makeError (argv[idx], "suffix is not numeric");

        switch (chVal) {
            case 'y': nowStr->tm_year = intVal - 1900; break;
            case 'm': nowStr->tm_mon = intVal - 1; break;
            case 'd': nowStr->tm_mday = intVal; break;
        }
    }

    mktime (nowStr);
    strftime (buff, sizeof (buff), "%A, %d %B %Y", nowStr);
    printf ("%s\n", buff);

    return 0;
} 
```

样本成绩单：

```
pax> ./dow
Tuesday, 09 October 2012

pax> ./dow -y2011
Sunday, 09 October 2011

pax> ./dow -y2000 -m1 -d1
Saturday, 01 January 2000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T02:32:30.233

最可能的解释是，如果您要要求它打印星期几，则`strftime`需要具有有意义的值。`tm_wday`

这是避免自己计算的最简单的可用方法：

```
struct tm tm;

memset(&tm, 0, sizeof(struct tm));
tm.tm_mday = Cur_Day;
tm.tm_mon = Cur_Month - 1;
tm.tm_year = entries[i].Year_Start - 1900;
tm.tm_hour = 12;

(void) timegm(&tm); /* fills in the rest of `tm` as a side effect */

/* now call strftime */ 
```

如果你没有，`timegm`你可能可以`mktime`改用使用（如果你只想打印*日期*，在“本地”时间进行此计算的问题在很大程度上是无关紧要的）。不要使用`timegm`Linux 手册页中描述的“便携式版本” `timegm`，它几乎在每一行都有可移植性陷阱！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T02:30:09.473

您需要设置`str_time.tm_wday`以便`strftime()`可以转换它。

有关示例，请参见[localtime(3)](http://linux.die.net/man/3/localtime)和[strftime(3)](http://linux.die.net/man/3/strftime)。

# google-bigquery - 大查询字符串中的新行

> ID：12792045
> 
> 赞同：3
> 
> 时间：2012-10-09T02:24:53.353
> 
> 标签：google-bigquery

“字符串中的换行符”到底是什么意思？

[https://developers.google.com/bigquery/docs/quota-policy#import](https://developers.google.com/bigquery/docs/quota-policy#import)

如何检查和删除它？

```
Import Jobs: Daily limit: 1,000 import jobs per table per day (including failures), 10,000 import jobs per project per day (including failures)
Maximum size per import job: 1TB uncompressed
Maximum number of files per import job: 500 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T02:30:23.847

字符串中的换行符是指 CSV 字段值中嵌入的换行符。这使得平行进口变得困难。

例如：2 行，第一行有一个嵌入的换行符：

```
1,2,"this is my
string",4,5
1,2,"another string",4,5 
```

BigQuery 导入器具有“--noallow_quoted_newlines”选项，表示文件不包含任何嵌入的换行符。

```
# --noallow_quoted_newlines:
#   Do not allow quoted newlines in the data.  This allows BigQuery to parallelize the load. 
```

[https://developers.google.com/bigquery/articles/ingestioncookbook#atomic](https://developers.google.com/bigquery/articles/ingestioncookbook#atomic)

> 字符串字段中没有换行符的单个 JSON 和 CSV 文件可能高达 100GB，而字符串中包含换行符的 CSV 文件必须为 4GB 或更少。

[https://developers.google.com/bigquery/articles/ingestioncookbook](https://developers.google.com/bigquery/articles/ingestioncookbook)

# r - knitr：开始一个新的 R 会话以清除 RAM

> ID：12792047
> 
> 赞同：4
> 
> 时间：2012-10-09T02:25:28.750
> 
> 标签：r, knitr

我有时会处理很多对象，由于块之间的内存问题，重新开始会很好。考虑以下示例：

警告：我有 8GB 的​​ RAM。如果你没有太多，这可能会吃掉它。

```
<<chunk1>>=
a <- 1:200000000
@
<<chunk2>>=
b <- 1:200000000
@
<<chunk3>>=
c <- 1:200000000
@ 
```

这种情况下的解决方案是：

```
<<chunk1>>=
a <- 1:200000000
@
<<chunk2>>=
rm(a)
gc()
b <- 1:200000000
@
<<chunk3>>=
rm(b)
gc()
c <- 1:200000000
@ 
```

但是，在我的示例中（我可以发布它，因为它依赖于一个大型数据集），即使在我删除所有对象并运行之后`gc()`，`R`也不会清除所有内存（只有一些）。原因在`?gc`：

```
However, it can be useful to call ‘gc’ after a large object has
been removed, as this may prompt R to return memory to the
operating system. 
```

注意重要的词`may`。`R`有很多情况是这样指定的`may`，因此它不是错误。

是否有一个块选项，我可以根据它`knitr`开始一个新`R`会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-05T21:58:41.977

我的建议是`.Rnw`为每个主要任务创建一个人，将它们编织到`.tex`文件中，然后使用`\include`或`\input`在`parent.Rnw`文件中构建完整的项目。通过`makefile`.

但是，为了解决这个特定问题，为每个块使用新的 R 会话，您可以使用 R 包子[进程](https://cran.r-project.org/package=subprocess)生成 R 会话，运行所需的代码，提取结果，然后终止生成的会话。

一个简单的示例 .Rnw 文件

```
\documentclass{article}
\usepackage{fullpage}
\begin{document}

<<include = FALSE>>=
knitr::opts_chunk$set(collapse = FALSE)
@

<<>>=
library(subprocess)

# define a function to identify the R binary
R_binary <- function () {
  R_exe <- ifelse (tolower(.Platform$OS.type) == "windows", "R.exe", "R")
  return(file.path(R.home("bin"), R_exe))
}
@

<<>>=
# Start a subprocess running vanilla R.
subR <- subprocess::spawn_process(R_binary(), c("--vanilla --quiet"))
Sys.sleep(2) # wait for the process to spawn

# write to the process
subprocess::process_write(subR, "y <- rnorm(100, mean = 2)\n")
subprocess::process_write(subR,  "summary(y)\n")

# read from the process
subprocess::process_read(subR, PIPE_STDOUT)

# kill the process before moving on.
subprocess::process_kill(subR)
@

<<>>=
print(sessionInfo(), local = FALSE)
@

\end{document} 
```

生成以下pdf：

[![在此处输入图像描述](../Images/2afae4a54dcc9730bbac1a591a919256.png)](https://i.stack.imgur.com/I2BHp.png) [![在此处输入图像描述](../Images/9e6d776d715d0bffb0784b0712764fff.png)](https://i.stack.imgur.com/0mjgK.png)

# c++ - 在 C++ 中拆分数组的可能性

> ID：12792057
> 
> 赞同：0
> 
> 时间：2012-10-09T02:26:36.503
> 
> 标签：c++, arrays

我想知道数组如何在二进制级别上工作，因为我正在想办法将它们拆分；意思是把一个数组变成一个链表，我不是在谈论把一个数组变成一个链表（复制，旧数组变成新的......）我是说无论如何都可以在一个彼此排列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T02:31:22.077

您不能释放数组中任意元素的内存，因为它是连续分配的。但是，可以通过 释放尾部`realloc`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T02:36:14.377

我不确定你到底想做什么，但你几乎可以用一个数组做任何事情，你可以用任何其他连续的内存块做任何事情。例如，您可以像这样“拆分”一个数组（实际上只是指向它的一部分）：

```
int A[] = { 0, 1, 2, 3, 4, 5 };
int *part1 = A;
int *part2 = A + 3;

// part1[0] == 0
// part1[1] == 1
// part1[2] == 2
// part2[0] == 3;
// part2[1] == 4;
// part2[2] == 5; 
```

当你做这样的事情时，你必须小心确保你不会跑出数组的边界并导致未定义的行为。对于几乎所有情况，一种更好的方法是简单地使用 C++ 标准库提供的标准容器和算法。

# java - 大括号/块末尾的 Java 注释

> ID：12792059
> 
> 赞同：33
> 
> 时间：2012-10-09T02:27:09.653
> 
> 标签：java, comments, curly-braces

在 Java 编程语言中，用一个注释来结束一个代码块的大括号是否是一种公认​​的做法，该注释简要解释了大括号关闭了哪些代码块？我个人认为它们是无用的注释，会扰乱代码的可读性，但也许我错了。例如：

```
public void myMethod(int foo) {    
    // some code
    if (foo == 2) {
        for (int i = 0; i < myMax; i++) {
            while (true) {
                // some more code
            } // end while
        } // end for
    } // end if
} // end myMethod(int) 
```

以类似方式注释代码块的做法是否被接受？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-10-09T02:33:50.007

我的看法是，通常这不是一个好习惯。与往常一样，规则可能会有例外，但非常罕见。

这不是一个好习惯，因为

1.  当您将光标放在右括号上时，现代编辑器会突出显示左括号，反之亦然。
2.  最重要的是：如果有可能看不到子句的开头，则意味着该方法很大（超过半页），这是一种不好的做法。
3.  它给代码增加了噪音，会使习惯于更传统 Java 编码风格的读者感到困惑。
4.  *纳入 LordScree-Joachim Sauer 评论*：这些评论将难以维持。所以很可能它不会被维护，并且信息通常会与现实不同步。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-10-09T03:46:19.517

这并不是一个坏习惯，但它是糟糕的面向对象编码实践的*致命副作用！*

此外，这违反了样式指南和[“自记录代码”](http://en.wikipedia.org/wiki/Self-documenting)的原则。您永远不应该有那么多括号或一个足够长的方法来让读者对括号放置感到困惑，而是将该功能封装在另一种有据可查的方法中。

括号表示循环或复杂的 if-else 逻辑链，良好的编程习惯是让一个方法只做一件事并做好，然后从这些更小的原子化方法构建您的程序。我会阅读 Butler Lampson 的开创性作品[“计算机系统设计提示”](http://research.microsoft.com/en-us/um/people/blampson/33-hints/webpage.html)。它详细介绍了如何设计好的软件。

所以本质上，不要这样评论，因为：

1.  它违反了风格准则
2.  它显示了糟糕的面向对象编程——原子化你的功能！
3.  这是编码实践的致命副作用，它违背了创建 Java 的基本概念 - 封装，特别是信息隐藏
4.  它违反了自记录代码的概念
5.  其他程序员会取笑你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-21T07:31:45.737

我只在代码中有一个位置有很多相互连接的右大括号时才这样做。但不是每个支架。主要是我似乎将它用于循环，以便您可以轻松查看什么是重复的代码块。

看起来像这样的东西：

```
            // ...
            文件。关闭（）；
          }
        }
      }
    }
  }
}

```

然后它有助于添加一些评论：

```
            // ...
            文件。关闭（）；
          }
        }
      }
    }//for: 每个文件
  }
}

```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T02:31:06.747

这取决于方法或功能的复杂程度。就像如果你有一些可以很容易阅读和理解的东西，那么在每一行结束时都用解释该部分已经结束的注释来结束真的没有意义。这就是缩进和换行符的用途。但是，如果您有一些真正复杂的东西并且影响了代码的主要部分，那么您应该指出该代码的结束位置以及该部分的作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T02:54:15.070

如果有相同类型的嵌套块，它可能会令人困惑而不是做得很好。假设您有 4 或 5 个嵌套的 if 语句（请记住，这只是一个演示情况的示例，无论“哦，您应该将它们分开”或“制定方法”建议）在这种情况下，您将有 4 或 5 个不同//如果已排序则结束。过了一会儿，它会让你混淆哪个“end if”是哪个语句，让你无意识地花费额外的精力来查看实际的代码/语句，因为它并不总是像你的示例那样干净/简短。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T03:04:37.627

IMO，它没有多大帮助。循环或 if 语句中的代码不应太大。如果循环中有 500 行，那会有所帮助。

# javascript - 滑动整个 jQuery 滑块范围

> ID：12792060
> 
> 赞同：1
> 
> 时间：2012-10-09T02:27:33.017
> 
> 标签：javascript, jquery, jquery-ui, slider, range

我有一个带有定义步骤的多值 jQuery 滑块（它由另一个滑块定义，假设它是一个步骤：15），范围为 0-600。我希望用户能够像往常一样左右拖动这两个值。但是如果在两个值内执行单击，它们应该能够左右拖动整个范围。

用户被迫设置如下值：

```
0,600
15,120
240,255
150,150 
```

什么时候，我希望用户能够设置如下值：

```
1,271
15,165
25,115
580,595 
```

这些数字仍然遵循滑块的 step:15 规则，但无法使用 jQuery 滑块的基础知识来访问，因为它希望将值捕捉到 30 个增量（0,15,30,...,585,600）。我能想到的最直观的方法是让用户左右拖动他们的值“范围”。但是当在两个值之间单击滑块时，jQuery 会将其设置为新值。

我已经使用滑块的启动事件来检测用户是否在范围内单击（而不是单击句柄或滑块的未选择部分）。然后我需要在滑块中设置某种滑动功能，不断检测鼠标位置并像这样左右滑动。我处于 Javascript 的中级水平（在我看来）并且不太确定我将如何去做。你可以玩我的 JSFiddle：http: [//jsfiddle.net/JhKxh/9/](http://jsfiddle.net/JhKxh/9/)

*注意：我的 JSFiddle 的唯一问题是，如果您单击滑块的边框，它不会算作 ui-slider-range 类（但一些 CSS 调整应该能够解决这个问题）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:56:36.707

你的答案应该在这里

[拖动 UI 输入范围滑块的范围](https://stackoverflow.com/questions/5955343/drag-the-range-of-a-ui-input-range-slider/6095941#6095941)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T02:45:58.967

看这里：

[http://docs.jquery.com/UI/API/1.8/Slider](http://docs.jquery.com/UI/API/1.8/Slider)

以下代码运行良好，是您原始 jsfiddle 的扩展。我终于明白了你想要什么，现在它似乎工作正常：

[实时工作代码示例](http://www.quirkscode.com/flat/forumPosts/src/rangeSliders/rangeSliders.html)

JavaScript：

```
$(document).ready(function () {
    'use strict';

    var stepSlider = $('#stepSlider');
    var stepText = $('#stepText');
    var rangeSlider = $('#rangeSlider');
    var rangeText = $('#rangeText');
    var oldStep;

    stepSlider.slider({
        min:0,
        max:120,
        slide:function (event, ui) {
            stepText.text(ui.value);

            var rsValues = rangeSlider.slider("option", "values");
            var stepDiff = ui.value - oldStep;
            var rsMax = rangeSlider.slider("option", "max");
            var rsMin = rangeSlider.slider("option", "min");
            if (stepDiff > 0) {
                rsValues[1] += stepDiff;
                if (rsValues[1] > rsMax) {
                    rsValues[0] = rsMax - ui.value;
                    rsValues[1] = rsMax;
                }
            } else if (stepDiff < 0) {
                rsValues[1] += stepDiff;
                if (rsValues[1] < rsMin) {
                    rsValues[0] = rsMin;
                    rsValues[1] = ui.value;
                }
            }
            rangeSlider.slider("option", "values", rsValues);
            rangeText.text(rsValues[0] + ' - ' + rsValues[1]);
            oldStep = ui.value;
        }
    });

    rangeSlider.slider({
        min:0,
        max:600,
        values:[0, 0],
        slide:function (event, ui) {
            var step = stepSlider.slider("option", "value");
            var oldValues = rangeSlider.slider("option", "values");
            var rsMax = rangeSlider.slider("option", "max");
            var rsMin = rangeSlider.slider("option", "min");
            var diff;

            if (oldValues[0] != ui.values[0]) {
                diff = ui.values[0] - oldValues[0];
                if (diff > 0 && diff <= step && ui.values[1] === rsMax) {
                    return false;
                }
                ui.values[1] += diff;
                if (ui.values[1] > rsMax) {
                    ui.values[1] = rsMax;
                    ui.values[0] = ui.values[1] - step;
                }
                rangeSlider.slider("option", "values", ui.values);
                rangeText.text(ui.values[0] + ' - ' + ui.values[1]);
                return false;
            }
            if (oldValues[1] != ui.values[1]) {
                diff = ui.values[1] - oldValues[1];
                if (diff < 0 && diff >= -step && ui.values[0] === rsMin) {
                    return false;
                }
                ui.values[0] += diff;
                if (ui.values[0] < rsMin) {
                    ui.values[0] = rsMin;
                    ui.values[1] = ui.values[0] + step;
                }
                rangeSlider.slider("option", "values", ui.values);
                rangeText.text(ui.values[0] + ' - ' + ui.values[1]);
                return false;
            }
            rangeText.text(ui.values[0] + ' - ' + ui.values[1]);
        }
    });
    oldStep = stepSlider.slider("option", "value");
}); 
```

HTML：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Sliders</title>
        <link href="rangeSliders.css" rel="stylesheet" type="text/css"/>
        <link href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
        <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
        <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
    </head>
    <body>
        <div id="stepSlider">
            <div id="stepText">0</div>
        </div>

        <div id="rangeSlider">
            <div id="rangeText">0-600</div>
        </div>
        <script type="text/javascript" src="rangeSliders.js"></script>
    </body>
</html> 
```

CSS：

```
body {
    margin: 50px;
}

#stepSlider, #rangeSlider {
    width: 200px;
    margin-bottom: 25px;
}

#stepText, #rangeText {
    margin: -4px 0 0 225px;
    width: 100%;
} 
```

# ruby - 使用 Sinatra 提供 XHTML

> ID：12792061
> 
> 赞同：3
> 
> 时间：2012-10-09T02:27:49.847
> 
> 标签：ruby, xhtml, sinatra, mime-types, rack

我正在创建一个 Sinatra Web 应用程序，我想`application/xhtml+xml`为所有提供的网页提供 mime 类型。我使用 Builder 作为模板引擎。请注意，该应用程序还将`application/xml`为各种 AJAX api 接口提供服务，也使用 Builder 模板引擎，以及`text/css`使用 scss 模板引擎。

我注意到生成的网页会收到`text/html`内容类型，而 api 接口会收到`application/xml`内容类型。但是，我不知道 mime 类型是如何确定的；`html`标签的存在？布局的使用与否？无论哪种情况，我都希望应用程序发出`application/xhtml+xml`mimetype 而不是`text/html`mime 类型。

我知道我可以通过`content_type`调用指定 mime 类型，但我想避免在每个路由函数中都需要它。有什么方法可以为给定的模板引擎设置默认的 mime 类型？或者可以通过视图的文件名控制 mime 类型吗？Tilt 是否提供任何方法来以一种很好的方式控制 mime 类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T21:44:27.100

由于您的应用程序被分解为单独的对象，因此将所有 AJAX 路由拉入单独的 Sinatra 应用程序应该很简单。这将允许您使用 Sinatra 的 after hook。唯一的要求是您的 AJAX 调用具有将它们标识为 AJAX 的内容；例如，通过将请求标头设置为特殊值，或使用特殊格式的路由。这是唯一路由方法的示例机架文件：

```
require 'sinatra/base'

class MainApp

  def get_info params
    # return some data structure
  end

end

class MainAppRoutes < Sinatra::Base

  def initialize mainapp
    super()
    @mainapp = mainapp
  end

  get '/' do # main page
    data = @mainapp.get_info(params)
    # render response from data
  end

end

class AjaxRoutes < Sinatra::Base

  def initialize mainapp
    super()
    @mainapp = mainapp
  end

  get '/getinfo' do # handler for /ajax/getinfo
    data = @mainapp.get_info(params)
    # generate XML response from data
  end

  after do
    content_type 'application/xml'
  end

end

mainapp = MainApp.new

map '/ajax' do
  run AjaxRoutes.new(mainapp)
end
run MainAppRoutes.new(mainapp) 
```

在此示例中，所有以 /ajax 开头的路由都由 AjaxRoutes 类的实例处理。after 钩子确保这些响应的内容类型是“application/xml”。非 ajax 路由不受影响。

需要记住的几件事：

*   Rack::Builder.map 去掉它匹配的 URL 部分。所以AjaxRoutes 中的'/' 路由实际上会响应'/ajax/' 的请求。
*   始终在 Sinatra 派生端点类的初始化程序中调用 super()。对于 Sinatra 中间件，向上传递第一个参数（Rack 调用 #new 并将下一个 rack 应用程序作为第一个参数）。
*   查看有关[Sinatra 过滤器](http://www.sinatrarb.com/intro#Filters)的文档。使用 after 钩子修改响应有一个潜在的令人沮丧的怪癖。

# jquery - 悬停事件不触发

> ID：12792065
> 
> 赞同：0
> 
> 时间：2012-10-09T02:28:29.543
> 
> 标签：jquery, hover

我在链接上使用鼠标悬停事件。我有 2 个版本的 java 脚本代码，第一个不工作。悬停事件不会触发。但它触发的第二个版本。我不知道是什么让第一个版本不起作用。

这是代码：

```
<script type="text/javascript">
  /* http://www.alessioatzeni.com/wp-content/tutorials/jquery/simple-tooltip/index.html */

  /* this is the first version 
  $(document).load(
    function() 
    {
      // Tooltip only Text
      $(".popupTooltip").hover(
        function()
        {
          // Hover over code
          var title = $(this).attr('title');
          $(this).data('tipText', title).removeAttr('title');
          $('<p class="tooltip"></p>')
          .text(title)
          .appendTo('body')
          .fadeIn('slow');
        }, 
        function() 
        {
          // Hover out code
          $(this).attr('title', $(this).data('tipText'));
          $('.tooltip').remove();
        }
      ).mousemove(
        function(e) 
        {
          var mousex = e.pageX + 20; //Get X coordinates
          var mousey = e.pageY + 10; //Get Y coordinates
          $('.tooltip')
          .css({ top: mousey, left: mousex })
        }
      );
    }
  ); 
  */

  $(document).load(
    $(".popupTooltip").hover(
      function()
      {
        // Hover over code
        var title = $('.popupTooltip').attr('title');
        $('.popupTooltip').data('tipText', title).removeAttr('title');
        $('<p class="tooltip"></p>')
        .text(title)
        .appendTo('body')
        .fadeIn('slow');
      }, 
      function()
      {
        // Hover out code
        $('.popupTooltip').attr('title', $('.popupTooltip').data('tipText'));
        $('.tooltip').remove();
      }
    ).mousemove(
      function(event)
      {
        var mousex = event.pageX + 20; //Get X coordinates
        var mousey = event.pageY + 10; //Get Y coordinates
        $('.tooltip')
        .css({ top: mousey, left: mousex })
      }
    )
  ); 

</script> 
```

第一个版本是注释块。我从 www.alessioatzeni.com 复制代码。

这是html部分：

```
<li>
 <img src=\"$strImageLoc\" alt=\"Image\" width=\"210\">
 <div class=\"one-fourth-image-shadow\"></div>
 <h5>
   $row[title]
 </h5>

 <a href=\"#\" class=\"popupTooltip\" title=\"$row[description]\">
   More info...
 </a>
</li> 
```

当鼠标悬停在“更多信息...”上时，会显示一个弹出窗口。

# java - Java：递归地将节点添加到 JTree

> ID：12792067
> 
> 赞同：0
> 
> 时间：2012-10-09T02:28:31.333
> 
> 标签：java, swing, recursion, nodes, jtree

我有2节课。ErdosStruct 包含需要进入 SimpleTreeEx 中的 JTree 的所有数据。我正在努力编写 addNodes() 递归地将节点从 erdosStruct 添加到 JTree。我对递归没有真正的了解，一个朋友建议：

```
if it has no co authors
    return
else
    add the co authors 
```

但我什至不知道那是什么意思:(

您将如何使用递归将节点和子节点添加到树中？

```
import java.util.Vector;

/**
 * 
 * @info   The tree data structure. Each node in the tree is of type
 *         AuthNode. The root of the tree contains an AuthNode corresponding to
 *         "Root"
 */
public class ErdosStruct {
    private AuthNode top = new AuthNode("Root");

    public void createStruct() {

        top.addCoAuth(new AuthNode("Node 0"));
        top.addCoAuth(new AuthNode("Node 1"));
        AuthNode coAuth = top.getCoAuth(0); // get Node 0

        // Add to Node 0
        coAuth.addCoAuth(new AuthNode("Node 00"));
        coAuth.addCoAuth(new AuthNode("Node 01"));
        coAuth = coAuth.getCoAuth(0); // get Node 00

        coAuth.addCoAuth(new AuthNode("Node 000"));
        coAuth = coAuth.getCoAuth(0); // get Node 000

        // add to Node 000
        coAuth.addCoAuth(new AuthNode("Node 0000"));
        coAuth.addCoAuth(new AuthNode("Node 0001"));
        coAuth.addCoAuth(new AuthNode("Node 0002"));
        coAuth = coAuth.getCoAuth(2); // get Node 0002

        AuthNode Node0002 = coAuth;

        // add to Node 0002
        coAuth.addCoAuth(new AuthNode("Node 00020"));
        coAuth.addCoAuth(new AuthNode("Node 00021"));
        coAuth.addCoAuth(new AuthNode("Node 00022"));
        coAuth.addCoAuth(new AuthNode("Node 00023"));
        coAuth.addCoAuth(new AuthNode("Node 00024"));
        coAuth.addCoAuth(new AuthNode("Node 00025"));

        /// Other Path

        coAuth = top.getCoAuth(1); // get Node 1
        coAuth.addCoAuth(new AuthNode("Node 10"));
        coAuth = coAuth.getCoAuth(0);

        coAuth.addCoAuth(new AuthNode("Node 100"));
        coAuth = coAuth.getCoAuth(0);

        coAuth.addCoAuth(new AuthNode("Node 1000"));
        coAuth = coAuth.getCoAuth(0);
    }

    /**
     * @return the root element of type AuthNode of the tree data structure
     */
    public AuthNode getRoot() {
        return top;
    }
}

/**
 * @info  AuthNode structure and the interfaces
 */
class AuthNode {
    /**
     * Each AuthNode has a name and a vector of AuthNodes corresponding to co-authors
     */
    private String name;
    private Vector<AuthNode> coAuths = new Vector<AuthNode>();

    /**
     * Two types of constructor
     */
    public AuthNode() {
    }

    public AuthNode(String n) {
        name = n;
    }

    // Self-explanatory interfaces
    public void setName(String n) {
        name = n;
    }

    public String getName() {
        return name;
    }

    // Understand the usage of toString
    public String toString() {
        return name;
    }

    public int getCoAuthCount() {
        return coAuths.size();
    }

    public void addCoAuth(AuthNode coAuthor) {
        coAuths.addElement(coAuthor);
    }

    public AuthNode getCoAuth(int i) {
        return (AuthNode) coAuths.get(i);
    }
} 
```

* * *

```
import java.awt.BorderLayout;
import java.awt.Dimension;   
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTree;
import javax.swing.event.TreeSelectionEvent;
import javax.swing.event.TreeSelectionListener;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeModel;
import javax.swing.tree.MutableTreeNode;
import javax.swing.tree.TreeModel;
import javax.swing.tree.TreeNode;

/**
 * 
 * @info   Main window of the UI - mainFrame of type JFrame contains ErdosStructurePanel of type JPanel
 */
public class SimpleTreeEx extends JFrame {
    public static void main(String[] args) {
        /**
         * erdosStruct contains a tree where node of the tree represents a
         * computer scientist - there is an edge from one node to another if the
         * computer scientists associated to these nodes have co-authored a
         * scientific article (See createStruct method in ErdosStruct class for
         * details)
         */
        ErdosStruct erdosStruct = new ErdosStruct();
        erdosStruct.createStruct();

        SimpleTreeEx mainFrame = new SimpleTreeEx();
        /**
         * ErdosStructPanel constructor takes a parameter of type ErdosStruct
         */
        mainFrame.getContentPane().add(new ErdosStructPanel(erdosStruct));

        mainFrame.setSize(500, 500);
        mainFrame.setVisible(true);
        mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
}

class ErdosStructPanel extends JPanel {
    /**
     * @info    contains the tree data structure with information on co-authorship relations
     */
    public ErdosStructPanel(ErdosStruct erdosStruct) {
        DefaultMutableTreeNode root = new DefaultMutableTreeNode(erdosStruct.getRoot());
        DefaultTreeModel tModel = new DefaultTreeModel(root);

        JTree tree = new JTree(tModel);
        tree.setShowsRootHandles(true);
        JScrollPane scroll = new JScrollPane(tree);
        add(scroll, BorderLayout.CENTER);
    }

    private void addNodes(ErdosStruct erdosStruct, DefaultTreeModel tModel) {
        if (erdosStruct.getRoot().getCoAuthCount() == 0) {
            return;
        } else {
            erdosStruct.getRoot().getCoAuth(0)
            tModel.insertNodeInto(new DefaultMutableTreeNode(), (MutableTreeNode) tModel.getRoot(), 0);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T02:56:36.883

```
private void addNodes(ErdosStruct erdosStruct, DefaultTreeModel tModel) {
    if (erdosStruct.getRoot().getCoAuthCount() == 0) {
        return;
    } else {
        AuthNode node = erdosStruct.getRoot();
        addNodes(node, tModel, (MutableTreeNode) tModel.getRoot());
    }
}

protected void addNodes(AuthNode node, DefaultTreeModel tModel, MutableTreeNode parent) {
    if (node != null) {
        MutableTreeNode newParent = new DefaultMutableTreeNode(node);
        tModel.insertNodeInto(newParent, parent, parent.getChildCount() - 1);
        for (int index = 0; index < node.getCoAuthCount(); index++) {
            AuthNode child = node.getCoAuth(index);
            addNodes(child, tModel, newParent);
        }
    }
} 
```

好吧，那真的很痛苦。这是一个“可能的”解决方案。个人比较喜欢直接给parent加一个child，不传到方法中去add，但是头疼

# java - java Class.getDeclaredMethods 似乎正在显示已删除的方法

> ID：12792068
> 
> 赞同：0
> 
> 时间：2012-10-09T02:28:55.057
> 
> 标签：java, reflection

我正在使用以下代码来打印类的方法：

```
for (Method meth : c.getDeclaredMethods())
{
  System.out.println("  " + shorten(meth.toGenericString()));
} 
```

当它在我选择的类上运行时，它会打印我类的当前方法，以及我曾经拥有但后来删除的一些方法。我的 IDE（netbeans 7.2）中的导航器不显示旧方法。没有一种方法被标记为桥接或合成。

java编译器是否以某种方式保留历史记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T02:44:27.057

编译器没有，IDE（netbeans）也不应该。很可能您已经从仍然存在`.class`的旧文件构建文件。`.java`尝试进行干净的构建（`.class`在再次构建之前删除所有文件）并查看问题是否仍然存在。

# android - 从文本文件中获取 int 并将其设置为变量

> ID：12792069
> 
> 赞同：1
> 
> 时间：2012-10-09T02:29:13.803
> 
> 标签：android, text, filereader

我正在尝试获取具有如下文本的文本文件的 int 值：

```
123456789 12345678 1234567 123456 12345 1234 123 12 1 
```

正如您所看到的，每个数字都是不同的，它们位于同一行，由“空格”隔开。我需要将值分开。得到这样的东西：

`INT1 = 123456789, INT2 = 12345678, INT3 = 1234567;`

等等。我不创建文本，所以我不知道它们有多少数字和组，但它们总是用“空格”分隔。我知道怎么读。这就是我的阅读方式：

```
try {
    TEST1 = new BufferedReader(new FileReader("/sdcard/test.txt")).readLine();

    } catch (NumberFormatException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    TEST.setText(""+scaling_available_frequencies); 
```

我得到了这个输出

```
194208 776175 958253 767883 700246 243663 966618 345199 945363 459833 
```

注意：这只是我创建的一个 test.txt 以查看它是否有效。当前代码将要求用户输入路径和文件名。

现在如何将它们设置为每组的变量？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T03:12:10.007

这是将字符串解析为整数数组的一种方法：

```
public int[] toIntArray( String stringFromFile ){

    String[] allStrings = stringFromFile.split( "\\s" );
    int[] intArray = new int[allStrings.length];
    for( int i = 0; i < allStrings.length; ++i ){
        try{
            intArray[i] = Integer.parseInt( allStrings[i] );
        }catch( NumberFormatException e ){
            // Do whatever you think is appropriated
            intArray[i] = -1;
        }
    }
    return intArray;
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T02:39:15.280

我相信 readLine() 会让你得到字符串。您将需要使用 String 的 Split() 方法并传入正则表达式（空格）。

那么您将需要使用 Integer.parseInt() 方法并传入每个字符串以将它们解析为 Integer。您还需要一个循环来进行解析，直到什么都没有

# javascript - Dojo 构建包配置

> ID：12792071
> 
> 赞同：1
> 
> 时间：2012-10-09T02:29:35.813
> 
> 标签：javascript, dojo, amd

在我们的 Dojo 系统中，我们在 dojoConfig 中指定了如下内容：

```
packages: [{
    name: "myWidgets",
    location: "/js/libs/widgets"
}] 
```

因此，在我们的 require 语句中，我们所要做的就是：

```
 require(["myWidgets/myCalendarWidget".... 
```

问题是当我运行构建时，这个 dojoConfig 不可用，并且我得到许多缺少依赖项的错误，因为没有根据构建配置文件定义“myWidgets”。

现在，我也尝试在构建配置文件中添加一个包块，但最终结果是创建一个我不想要的实际“myWidgets”包。

那么，有没有办法让构建看到“myWidgets”别名的定义，但构建输出的最终结果仍然反映常规文件结构（即/js/libs/widgets）？我试图在构建配置文件的 defaultConfig 元素中定义这些路径别名，但这也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:17:32.423

如果您使用的是配置文件，则可以在配置文件中指定包

```
/util/buildscripts:./build.sh profile=../../../myProfile.js 
```

[http://dojotoolkit.org/reference-guide/1.8/build/buildSystem.html#profile-basics](http://dojotoolkit.org/reference-guide/1.8/build/buildSystem.html#profile-basics)

您还可以指定一个包含 dojoConfig 的 javascript 文件

```
/util/buildscripts:./build.sh --dojoConfig ../build/examples/dojoConfig.js 
```

[http://dojotoolkit.org/reference-guide/1.8/build/buildSystem.html#using-a-package-configuration](http://dojotoolkit.org/reference-guide/1.8/build/buildSystem.html#using-a-package-configuration)

* * *

回答您的评论。该路径是相对于 dojo.js 所在位置的。

```
var dojoConfig = {
    parseOnLoad: true,
    isDebug: true,
    locale: 'en-us',
    paths: {
        "evf":      "../../evf"
    }
}; 
```

我的目录结构看起来像

```
js/dojo-1.8.0
  dijit
  dojo <-- contains dojo.js
  dojox
  util
js/evf
  myCustomWidget.js 
```

# objective-c - 如何自定义“评分最高”UITabBar 项目的文本？

> ID：12792074
> 
> 赞同：1
> 
> 时间：2012-10-09T02:29:46.560
> 
> 标签：objective-c, ios, xcode, uitabbarcontroller

这应该很简单，但我在互联网上搜索无济于事：

是否可以更改默认选项卡栏项目标识符的文本，例如“评分最高”？我想使用星形图标，因此更改文本或查找图标的位置并使用自定义标识符都可以。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T02:41:42.673

系统标签栏项目，不可更改。但是，您可以使用自己的图标来模仿最高评价图标的图标。

您可以这样使用图标：

```
UITabBarItem *myItem = [[UITabBarItem alloc] initWithTitle:@"My Custom Title" image:[UIImage imageNamed:@"myimage"] tag:0]; 
```

# javascript - AngularJS：数据绑定模式 - 仅在单击“保存”时保存更改，或者在单击“取消”时忘记更改

> ID：12792077
> 
> 赞同：21
> 
> 时间：2012-10-09T02:30:06.447
> 
> 标签：javascript, angularjs

我有一个项目列表，单击其中一个项目时，会显示一个模式对话框，供用户进行一些更改，然后单击“关闭”或“保存更改”。

问题是说用户进行了一些更改并单击“关闭”，这些更改将反映在视图绑定到的模型中，因为数据绑定是即时的。

那么我的问题是，如何推迟更新并仅在单击“保存更改”时执行绑定，或者如果单击“取消”则以某种方式忘记更改。

我的模态对话框的代码是这样的：

```
<div ui-modal class="fade static" ng-model="modalShown" id="myModal" data-backdrop="static">
        <div class="modal-header">
            <button type="button" class="close" ng-click="closeModal()" aria-hidden="true">&times;</button>
            <h3>{{selectedClientFeature.feature.type}}</h3>
        </div>
        <div class="modal-body">    
            <ul class="unstyled columnlist">
                <li ng-repeat="country in countriesForEdit">
                    <input type="checkbox" ng-model="country.selected"> {{country.name}}
                </li>
            </ul>
        </div>
        <div class="modal-footer">
            <a ng-click="closeModal()" class="btn">Close</a>
            <a ng-click="saveChanges()" class="btn btn-primary">Save changes</a>
        </div>
    </div> 
```

谢谢，肖恩

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T05:39:03.307

angularjs 文档曾经有一个关于这种情况的例子。您需要在显示您的编辑模式之前克隆您的模型（请参阅[angular.copy](http://docs.angularjs.org/api/angular.copy)），当用户单击 closeModal() 时，您会将模型重新分配给克隆值。恕我直言，我会将您的“关闭”按钮重命名为“取消”并将其放在“保存更改”的右侧，这更明确，似乎是许多网站的工作方式。

希望这可以帮助

- 担

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-17T19:34:02.090

为了自动化手动克隆/更新模型，我提出了`lazy-model`指令。
见[https://stackoverflow.com/a/20643001/740245](https://stackoverflow.com/a/20643001/740245)

# c++ - eof（）函数不起作用c ++陷入无限循环

> ID：12792079
> 
> 赞同：1
> 
> 时间：2012-10-09T02:30:18.670
> 
> 标签：c++, infinite-loop, eof

> **可能重复：**
> [为什么循环条件内的 iostream::eof 被认为是错误的？](https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong)

我遇到了 eof() 函数的问题。我的循环没有读取我正在读取的文件的末尾，因此给我留下了无限循环。任何帮助或见解将不胜感激。谢谢

```
 while (!file2.eof()) {

    getline (file2, title, ','); 
    getline (file2, authorf, ',');
    getline (file2, authorl, ',');
    getline (file2, isbn, ',');
    file2 >> pages;
    file2.ignore();
    file2 >> price;
    file2.ignore();
    getline(file2, subject, ',');
    file2 >> code;
    file1.ignore();
    file2 >> rentalp;
    file2.ignore(10, '\n');

    textbook b2(title, authorf, authorl, publisher, pages, isbn, price, code, subject, rentalp);
    b2.PrintTbook();
    TbookList[j] = b2; //initalizing the first element of the array to b2.
    newFile << "Title: " << TbookList[j].getTitle() << "\n" << "Price: " << TbookList[j].getPrice() << "\n\n";
    TbookList[j].PrintBook();
    j++;
    textbookCount++;
} 
```

文本文件如下所示：

A Practical Introduction to Data Structures and Algorithim Analysis, Clifford, Shaffer, 0-13-028446-7, 512, 90.00, Computer Science, E, 12.00, 2001 Fundamentals of Database Systems, Ramez, AlMasri, 9-780805-317558, 955 , 115.50, 计算机科学, E, 0.0, 2003

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T02:44:50.250

首先，几乎任何形式的循环都`while (!whatever.eof())`被完全破坏了。

其次，你有我要假设的是一个错字：

```
file1.ignore(); 
```

其余的代码是从 中读取的`file2`，所以我猜`file1`这里只是一个错字（但如果你复制正确，它可能是问题的真正根源）。

你通常想通过重载`operator>>`你正在阅读的类型来做这样的事情：

```
std::istream &operator>>(std::istream &is, textbook &b2) {
    getline (is, title, ','); 
    getline (is, authorf, ',');
    getline (is, authorl, ',');
    getline (is, isbn, ',');
    is>> pages;
    is.ignore();
    is>> price;
    is.ignore();
    getline(is, subject, ',');
    is>> code;
    is.ignore();
    is>> rentalp;
    is.ignore(10, '\n');
    return is;
} 
```

然后你可以读入一堆对象，例如：

```
std::vector<textbook> books;

textbook temp;

while (file2>>temp) {
    books.push_back(temp);
    temp.printbook();
    // ...
} 
```

# c# - JavascriptSerializer，Deserializer，无法反序列化我的对象

> ID：12792083
> 
> 赞同：6
> 
> 时间：2012-10-09T02:30:49.210
> 
> 标签：c#, .net, json

我无法反序列化我的自定义对象。

```
public class UserInfo
{
  public int Id1 { get; set; }
  public string Code { get; set; }
  public int Id2 { get; set; }
  public List<string> Roles { get; set; }
  public string Eg1 { get; set; }
  public DateTime Time{ get; set; }
  public string Eg2 { get; set; }
  public string Version { get; set; }
}

JavaScriptSerializer serializer = new JavaScriptSerializer();

return serializer.Deserialize<UserInfo>(raw); 
```

反序列化抛出异常

“无法将 'System.String' 类型的对象转换为 'UserInfo' 类型”

JSON 内容：

```
"\"{\\\"Id1\\\":0,\\\"Code\\\":null,\\\"Id2\\\":0,\\\"Roles\\\":null,\\\"Eg1\\\":\\\"Eg2\\\",\\\"Time\\\":\\\"\\\\/Date(-62135596800000)\\\\/\\\",\\\"Version\\\":\\\"1.0.0.0\\\"}\"" 
```

*注意：如果不清楚，请告诉我。我将编辑问题。*

——编辑。ID2 更改为 Id2。真正的类在变量名方面是不同的。因此问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T03:03:39.437

您的字符串是一个 C# 字符串，其中包含一个包含 JSON 的 JavaScript 字符串。没有修复您正在发送的内容，以下是您将如何反序列化：

```
var jsonString = serializer.Deserialize<string>(raw);
return serializer.Deserialize<UserInfo>(jsonString); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-09T03:05:22.047

您将 Javascript 字符串传递给反序列化器，因为您的对象包含在转义字符串中。

取消转义后，这是序列化程序收到的内容：

`"{\"Id1\":0,\"Code\":null,\"Id2\":0,\"Roles\":null,\"Eg1\":\"Eg2\",\"Time\":\"\\/Date(-62135596800000)\\/\",\"Version\":\"1.0.0.0\"}"`

你真正想要发送的是：

`{"Id1":0,"Code":null,"Id2":0,"Roles":null,"Eg1":"Eg2","Time":"\/Date(-62135596800000)\/","Version":"1.0.0.0"}"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T02:43:12.497

您`ID2`在 JSON 中是全部大写的，并且`Id2`不在您的班级中。

## 编辑：

尝试创建对象的实例并将其序列化为 JSON 以比较并查看 JSON 是否正确。然后，您可以使用该字符串正确格式化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-26T23:13:15.443

下面的代码应该可以帮助某人启动和运行。

上面的代码会导致错误，因为字符串没有默认构造函数。如果从 JSON.stringify() 客户端 JavaScript 方法传入字符串，如果传入的对象映射到对象中的公共字段，则第二个反序列化可能会起作用。

让我们看一个假设 .ASHX 文件接收来自 jQuery 调用的请求的快速示例，如下所示：

```
//Called from with a jQuery ready() in a simple html page

var getNewPerson = function ()
{
var NewPerson       = new Object();
NewPerson.PersonID  = "0";
NewPerson.FirstName = $("#FirstName").val();
NewPerson.LastName  = $("#LastName").val();
NewPerson.Address   = $("#Address").val();
NewPerson.City      = $("#City").val();
NewPerson.State     = $("#State").val();
NewPerson.Zip       = $("#Zip").val();

var arrObj;
var str = "";
var webMethod = "http://someserver.com/admin/DataHandler.ashx";
$.ajax({
cache: false,
url: webMethod,
type: "POST",
dataType: "json",
 /* for hashtable or .net web service -  data: "{\"NewPerson\":" + JSON.stringify(NewPerson) + "}", */
data: JSON.stringify(NewPerson), 
contentType: "application/json; charset=utf-8"
}
)
.done( function(){}... code here ...etc)

//Valid JSON object format: {"PersonID":"1","FirstName":"Rick","LastName":"Wright","Address":"4520 No Such address Ave.","City":"Riverside","State":"CA","Zip":"92503"}

//And here is a sample class on the C# side in the .ashx handler page.
public class NewPerson
    {
        public int PersonID { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string Address { get; set; }
        public string City { get; set; }
        public string State { get; set; }
        public string Zip { get; set; }
    } //  EOC Person 
```

// 并在处理请求

```
public void ProcessRequest(HttpContext context)
{
string jsonString = "";
string rawJson = "";
System.Diagnostics.Debugger.Break();

HttpContext.Current.Request.InputStream.Position = 0;
string responseString;
var jsonSerializer = new JavaScriptSerializer();
/*Set the stream position to 0 */
context.Request.InputStream.Position = 0;

using (System.IO.StreamReader inputStream = new StreamReader(context.Request.InputStream))
{
rawJson = inputStream.ReadToEnd();
}
var objNewPerson = jsonSerializer.Deserialize<NewPerson>(rawJson);
if (clientList != null)
{

responseString = objNewPerson.FirstName + " " + objNewPerson.LastName ;
}
else
resp="No Record Found";
} // eof ProcessRequest 
```

# python - 此代码如何对字典进行排序？

> ID：12792085
> 
> 赞同：1
> 
> 时间：2012-10-09T02:31:04.167
> 
> 标签：python

[我正在寻找对字典进行排序的方法，并在SO 线程](https://stackoverflow.com/questions/613183/python-sort-a-dictionary-by-value)上遇到了这段代码：

```
import operator
x = {1: 2, 3: 4, 4:3, 2:1, 0:0}
sorted_x = sorted(x.iteritems(), key=operator.itemgetter(1)) 
```

这段代码是如何工作的？当我通过字典调用 iteritems() 时，我得到了这个：

```
<dictionary-itemiterator object at 0xf09f18> 
```

我知道这是一个参考，但你如何使用它？和 afaik，在 sorted(a,b) 中，应该是你想要排序的东西，而 b 将是排序的指标吗？itemgetter(1) 在这里如何工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T02:35:04.937

`operator.itemgetter(1)`相当于`lambda x: x[1]`。这是一种指定函数的有效方法，该函数返回`1`其输入索引处的值。

`.iteritems()``(key,value)`是字典的一种方法，它以元组形式返回字典中条目的迭代器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T02:36:04.317

*   `iteritems()`就像`items()`，除了它返回一个迭代器而不是一个列表。对于大型字典，这可以节省内存，因为您可以遍历每个单独的元素，而无需先在内存中建立完整的项目列表。
*   `sorted`接受一个关键字参数`key`，该参数是一个函数，用于确定排序时要比较的内容。在这种情况下，它是 using [`operator.itemgetter`](http://docs.python.org/library/operator.html#operator.itemgetter)，这就像 do 的函数版本`something[1]`。因此，代码对`[1]`返回的元组的项进行排序`items()`，这是存储在字典中的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T02:46:00.313

大多数处理列表或类似列表的对象的 python 内置函数也接受迭代器，这些就像指向列表的指针，您可以使用 next() 成员函数前进到列表中的下一项。这对于无限列表或非常大的列表（许多元素或非常大的元素）非常方便，可以降低内存使用量。请参阅[http://docs.python.org/library/stdtypes.html#iterator-types](http://docs.python.org/library/stdtypes.html#iterator-types)

iteritems() 为字典中的项目列表提供了一个迭代器。

# arrays - 这个数学有什么问题 Return[]

> ID：12792088
> 
> 赞同：2
> 
> 时间：2012-10-09T02:31:06.683
> 
> 标签：arrays, wolfram-mathematica, return

我试图弄清楚如何在 Array 定义中使用 Return[] 。要了解这一点，我正在尝试创建一个长度为 5 的数组，其中每个元素都是数字 10。这是我的代码：

```
Array[Function[Return[10];], 5] 
```

这是输出：

```
{Return[10], Return[10], Return[10], Return[10], Return[10]} 
```

什么地方出了错？为什么 Return[10] 不解析为平面旧的简单 10？

先谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T01:40:31.400

您需要使用[第二个参数](https://mathematica.stackexchange.com/a/6757/121)指定要从哪个 Head 返回：

```
Array[Function[Return[10, CompoundExpression];], 5] 
```

> ```
> {10, 10, 10, 10, 10} 
> ```

请参阅Leonid Shifrin 的[这个答案](https://stackoverflow.com/a/8534549/618728)`Return`，了解.

请参阅此精美的自我问答，以进一步探索第二个论点（几乎没有记录）：

[什么可以用作您自己的函数的 Return 的第二个参数？](https://mathematica.stackexchange.com/q/6815/121)

# mysql - 基于日期范围更改 MySQL 表中的值

> ID：12792089
> 
> 赞同：1
> 
> 时间：2012-10-09T02:31:08.643
> 
> 标签：mysql, database, datetime

我正在尝试将帖子的状态从“继承”更改为“已发布”，但仅限于日期在 08/01/2012 和 10/08/2012 之间的帖子。这是否是为实现此目的而运行的正确查询？

```
UPDATE wp_posts set post_status = replace(post_content, 'inherit', 'published') WHERE post_date BETWEEN '2012/08/01 00:00:00.000' AND '2012/10/08 23:59:00.000' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T02:35:30.473

如果`post_status`是单个值，则无需对其执行 a `REPLACE()`。只需将其设置为新值。MySQL 日期的格式应`YYYY-MM-DD HH:ii:ss`如下所示`2012-08-01 00:00:00`

```
UPDATE
  wp_posts
/* Set to the new status */
SET post_status = 'published'
WHERE
  /* Include the old status in the WHERE clause */
  post_status = 'inherit'
  AND post_date BETWEEN '2012-08-01 00:00:00' AND '2012-10-08 23:59:00' 
```

该`REPLACE()`方法虽然可行，但可能会导致查询速度慢得多，因为替换操作会在*每一*行中进行，但实际上只会对包含 string 的行产生影响`inherit`。

# javascript - iPad底部：0px问题

> ID：12792093
> 
> 赞同：0
> 
> 时间：2012-10-09T02:31:38.220
> 
> 标签：javascript, jquery, css, ipad, jquery-mobile

我正在iPad 上[使用 jQuery mobile 制作一个测试网络应用程序](http://derek1906.site50.net/experiment/webapp/test/app.html)，但事情并没有像我预期的那样进行。

```
.ui-footer-fixed {
    bottom: 0;
} 
```

这应该使`footer`始终处于底部，但 Safari 决定不同意它。当你到达页面底部时，你可以拉起整个网页，这是我不想要的。是否可以修复它或者它是 web 应用程序的限制？

![向上](../Images/ec74ad706c9a6f1799c031a8bc8a729b.png) ![在此处输入图像描述](../Images/f36f6b16a79d089b18a4d6d38776e5b5.png)

另外，除此之外，是否可以在`top: 0px`不使整个页面上升的情况下制作标题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T04:12:21.120

要修复页眉或页脚，您应该使用属性`data-position="fixed"`.

查看在线文档以获取更多信息：http: [//jquerymobile.com/demos/1.2.0/docs/toolbars/bars-fixed.html](http://jquerymobile.com/demos/1.2.0/docs/toolbars/bars-fixed.html)

我认为您遇到的问题与 iPad 的集成 webview 有关。如果您正在开发一个简单的 web 应用程序，则无法避免这种“webview 反弹”。

但是，您可以查看以下解决方法：[禁用 ipad web 应用程序中的垂直反弹效果](https://stackoverflow.com/questions/10761746/disable-vertical-bounce-effect-in-an-ipad-web-app)

# image - 如何通过多个 jpeg/png 进行幻灯片放映

> ID：12792096
> 
> 赞同：0
> 
> 时间：2012-10-09T02:32:20.407
> 
> 标签：image, r, slider, slideshow

这是这个问题的后续问题：[mclapply vs for loops for plotting: speed and scaling focus](https://stackoverflow.com/questions/12790504/mclapply-vs-for-loops-for-plotting-speed-and-scalability-focus)

如果我在模式“n_mu_stdev.jpeg”中有一堆图像，如 Chase 对上述问题的解决方案中给出的那样，是否有基于 R 的方法允许根据参数值进行某种带有滑块的幻灯片放映？从我看过的大多数图像阅读器的包中，大多数图像阅读器倾向于将图像作为数据文件读取，然后重新绘制它，而不是仅仅显示原始图像，从而显着减慢它的速度......

我对 JavaScript、CSS 或 jQuery 并不十分熟悉，所以如果这是建议的解决方案，那么可能需要关于安装内容等的分步指南。

我考虑过的另一个解决方案是在生成时将所有单独的图像上传到像 flickr 或 imgur 这样的照片共享网站（例如有点像 knitr），记下 url，然后所有滑块所做的就是选择数据帧的哪一行查看，它提供了正确的 url，从中获取和显示图像？...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T02:54:52.347

使用 jQuery

阅读文档

jquery 库： http: [//jquery.com/](http://jquery.com/) jquery 幻灯片插件： http: [//www.twospy.com/galleriffic/](http://www.twospy.com/galleriffic/)

# asp.net - 100% CPU 使用率 ASP.NET 应用程序

> ID：12792110
> 
> 赞同：-1
> 
> 时间：2012-10-09T02:34:38.620
> 
> 标签：asp.net, performance

我正在使用 ASP.NET 应用程序。点击页面中的任何控件，发现CPU使用率达到100%，导致响应缓慢。并且来到 OnInit/Page_load 大约需要 9-10 秒的时间。在任务管理器中查看时，后台运行了一个mscorsvw.exe，占用了大部分CPU使用率。

有人可以提供任何输入/提示，可能是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T02:37:03.060

这将解决 Mscorsvw.exe 问题 :) [http://techdows.com/2010/08/what-is-mscorsvw-exe-how-to-disable-it.html](http://techdows.com/2010/08/what-is-mscorsvw-exe-how-to-disable-it.html)

# ruby-on-rails - 如何使用 AJAX 更新一个属性而无需使用任何繁重的 JS？

> ID：12792116
> 
> 赞同：0
> 
> 时间：2012-10-09T02:35:44.027
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, jquery

我有一个属性`weight.subtotal`，我想在它发生变化时自动更新（它通过模型上的 before_save 回调进行更新）。

我看了看 pjax，但这似乎太重了。我想要发生的事情是，一旦改变，那个`td`或`div`那个有这个：

```
<td><%= weight.subtotal %></td> 
```

无需重新加载页面即可自动更新。

谢谢。

**编辑1：**最好是像'best-in-place'这样的gem，但不是依靠用户来更新值，而是监听值是否发生了变化——当它发生变化时，它只更新页面上的那个值.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T02:56:27.820

想不出任何 gem，所以一切从头开始，它需要一个返回当前值的方法，比如，

```
/weights/get_subtotal/:id.:format 
```

我建议只在 json 中吐出它，以便 jquery 可以轻松地解释它。

然后使用 jquery 轮询该方法，如果已更改，请更改视图中的值，如下所示。

```
function poll(){
    setTimeout(function(){
        $.ajax({ url: "/weights/get_subtotal/xx", success: function(data){

            //put code here to compare old td value 
            //with current value, and replace if different

            //Setup the next poll recursively
            poll();
        }, dataType: "xxxxx"});
    }, 10000);
};
$(document).ready(function(){
    poll();
}); 
```

如果您只是将权重的 id 放入 td 的 id 中，这会很容易，例如，

```
<td id="weigth_<%= weight.id%>"><%= weight.subtotal %></td> 
```

希望能帮助到你。

# python - 在 web2py 请求周期中关闭和重新启动数据库连接

> ID：12792119
> 
> 赞同：1
> 
> 时间：2012-10-09T02:35:58.103
> 
> 标签：python, web2py

我的数据库是远程机器上的 SQL Server，我遇到了相当多的延迟。我在控制器中有一个方法，其结构如下：

```
def submitData():
    parameters = db.site.select(...)
    results = some_http_post()  # posts data to remote server,
    if results:
        rec = db.status_table.insert(...)
        rec.status_tabl.update(...) 
```

往往会发生的情况是 some_http_post() 需要几秒钟才能获得响应，并且我的线程用完了当我用超过 6 个并发请求提交数据时点击 web2py 时，我遇到了请求冻结，而不是出现 DB 错误。这具有停止任何进一步的 web2py 请求的效果。

理想情况下，我希望在调用 some_http_post 之前关闭数据库连接并在它之后启动另一个数据库连接，但我没有看到使用 DAL API 执行此操作的简单方法。这是可能的还是我可以尝试更好的优化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T20:08:45.147

默认情况下启用连接池。

如果您将“pool_size = 0”添加到连接字符串，这将禁用连接池，我假设行为会强制打开/关闭每个连接。而不是让它们打开。

如果您需要更多线程（听起来像），请增加您的 pool_size 并看看会发生什么。

或者，是的，您可以使用 DAL 并执行 db.close() 并在第一次请求时自动重新打开连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T21:52:55.457

尝试启用连接池：[http ://web2py.com/books/default/chapter/29/06#Connection-pooling](http://web2py.com/books/default/chapter/29/06#Connection-pooling)

# vb.net - 弹出窗口中的vb.net控制按钮

> ID：12792122
> 
> 赞同：0
> 
> 时间：2012-10-09T02:36:36.513
> 
> 标签：vb.net, button, popup, controls

我是编程新手，我需要一些非常基本的帮助..

我有一个带有 datagridview 和一个“插入”按钮的表单，可以打开一个弹出窗口（新表单）。此弹出窗口包含标签和文本框，以及 2 个按钮（插入和取消）。如何将事件处理程序添加到弹出窗口内的按钮？例如，如果用户单击“取消”，弹出窗口应该关闭。

这是我到目前为止的代码：

Public Sub InsertButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) 处理 InsertButton.Click

```
 Dim insertPopup As New Form
    insertPopup.Size = New System.Drawing.Size(300, 400)
    insertPopup.StartPosition = FormStartPosition.CenterScreen
    insertPopup.Show()

    Dim acceptButton As New Button
    Dim cancelButton As New Button

    acceptButton.Location = New System.Drawing.Point(100, 325)
    acceptButton.Text = "Insert"
    acceptButton.Size = New System.Drawing.Size(85, 24)
    acceptButton.TabIndex = 1

    cancelButton.Location = New System.Drawing.Point(190, 325)
    cancelButton.Text = "Cancel"
    cancelButton.Size = New System.Drawing.Size(85, 24)
    cancelButton.TabIndex = 2

    insertPopup.Controls.Add(acceptButton)
    insertPopup.Controls.Add(cancelButton)

End Sub 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T02:55:14.633

您使用[AddHandler](http://msdn.microsoft.com/en-us/library/6yyk8z93.aspx)方法来添加正确的 EventHandler。您需要确保使用正确的签名创建您的处理程序。

```
AddHandler acceptButton.Click, AddressOf acceptButton_Click
AddHandler cancelButton.Click, AddressOf cancelButton_Click

Private Sub acceptButton_Click(sender As System.Object, e As System.EventArgs) 
End Sub

Private Sub cancelButton_Click(sender As System.Object, e As System.EventArgs) 
    CType(CType(sender, Button).Parent, Form).Close()
End Sub 
```

# r - If语句R缺失值

> ID：12792125
> 
> 赞同：0
> 
> 时间：2012-10-09T02:36:51.020
> 
> 标签：r, for-loop, if-statement

我试图执行此功能，但我的 if 语句不断出现错误： if (value[1][i] < 0) { 中的错误：需要 TRUE/FALSE 的缺失值：

```
Monte_Carlo <- function(trial)
{
    S_T <- S_o*exp((r - q - (1/2)*sigma^2)*period + sigma*rnorm(trial, mean = 0, sd = 1))
    K <- matrix(100, nrow = 1, ncol = 20)   
    value <- K - S_T

    for(i in 1:trial)
    {
        if(value[1][i] < 0)
        {
            value[1][i] = 0;
        }
    }
    return (mean(value)*exp(-r))
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T02:50:45.450

您对矩阵的索引不正确。`value[1]`将返回一个值，然后您尝试为其分配`ith`元素，`i`最多`trial`

如果您分配给`i`第一行中的第 th 个元素（看起来好像您正在尝试这样做），那么它将起作用

```
Monte_Carlo <- function(trial)
{
  S_T <- S_o*exp((r - q - (1/2)*sigma^2)*period + sigma*rnorm(trial, mean = 0, sd = 1))
  K <- matrix(100, nrow = 1, ncol = 20)   
  value <- K - S_T

  for(i in 1:trial)
  {
    if(value[1, i] < 0)
    {
      value[1,i] = 0;
    }
  }
  return (mean(value)*exp(-r))
} 
```

您可以删除向量化的`for`循环和`if`语句，`pmax`并将按元素返回 value 和 0 的最大值。

```
Monte_Carlo <- function(trial)
{
  S_T <- S_o*exp((r - q - (1/2)*sigma^2)*period + sigma*rnorm(trial, mean = 0, sd = 1))
  K <- matrix(100, nrow = 1, ncol = trial)   
  value <- K - S_T

  .value <- pmax(value,0)
  return (mean(.value)*exp(-r)
} 
```

作为一个好的编程问题，我会将`r`, `S_o`, `q`,`sigma`和`period`作为参数添加到您的函数中，这样它就不会依赖于全局变量

# google-app-engine - Google Appengine：User.equals 抛出 NullPointerException

> ID：12792128
> 
> 赞同：0
> 
> 时间：2012-10-09T02:37:15.547
> 
> 标签：google-app-engine, google-cloud-datastore

我有一个令人沮丧的问题，我在 Google Appengine 上的应用会抛出 NullPointerException，例如：

```
java.lang.NullPointerException
    at com.google.appengine.api.users.User.equals(User.java:143) 
```

我的代码如下所示：

```
if (excludeUser.equals(someEntity.getProperty("user"))) 
```

实体中的用户属性是先前存储在数据存储中的另一个用户对象。即使我将代码更改为以下内容，它也不会引发异常：

```
if (excludeUser.equals(null)) 
```

所以我猜是 User.equals 中的一些内部逻辑导致了问题，或者在将用户对象存储到数据存储区时出现了其他一些棘手的问题？

此外，该逻辑在开发环境中运行良好。该问题仅发生在 GAE 上。

我使用的是 Google Accounts API，而不是联合登录。我都试过了。同样的结果。任何线索表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T03:13:41.517

检查您的`someEntity`对象..它很可能是一个空对象，因此您会看到该错误。我建议单步执行您的代码并验证该对象是否不为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T03:02:06.923

从 UserService.getUser() 开始，事情变成了特殊情况。不知道为什么它返回一个非空用户，内容如下：

```
authDomain:https://www.google.com/accounts/o8/ud, 
email:, 
federatedId:https://www.google.com/accounts/o8/id?id=....., 
nickname:, 
userId: 
```

使用其他普通用户对象对此类对象调用 .equals 方法会导致 NullPointerException。猜猜这是某种联合登录怪人？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-31T09:21:09.550

这是 User.equals() 中的一个错误。

`federatedIdentity.equals` [对这里](https://code.google.com/p/googleappengine/source/browse/trunk/java/src/main/com/google/appengine/api/users/User.java#143)的调用应该被翻转。

该行应为`return federatedIdentity.equals(user.federatedIdentity)`.

我已将此情况报告给 Google。

# grails - 春季社交推特 isConnected 问题（RevokedAuthorizationException）

> ID：12792130
> 
> 赞同：0
> 
> 时间：2012-10-09T02:37:42.067
> 
> 标签：grails, twitter, spring-social

我正在使用 Grails 和 spring social twitter 插件。一切正常，除了一种情况：

我检查用户是否通过这段代码连接到 twitter

```
connectionRepository.findPrimaryConnection(Twitter.class) 
```

虽然如果我在 twitter 中授权该应用程序，这可以正常工作，但当我撤销授权时它仍然给出 TRUE。如何使该功能检查它是否已连接以及用户是否未撤销授权？（现在它是真的，我在尝试使用 API 时有一个 RevokedAuthorizationException）。

**更新：** 我试图捕获 RevokedAuthorizationException 以将用户重定向到 twitter，它可以工作，但现在我有一个奇怪的行为：如果用户撤销一次授权，即使他随后授权了应用程序，它也会继续给出 RevokedAuthorizationException ？！

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:30:47.637

我不确定，因为我还没有尝试过，但我认为您可以使用 Connection API 的 test() 方法（http://static.springsource.org/spring-social/docs/1.0.x/参考/html/serviceprovider.html)

# ios - 未调用 AsyncSocket 委托方法

> ID：12792132
> 
> 赞同：0
> 
> 时间：2012-10-09T02:38:32.020
> 
> 标签：ios, cocoaasyncsocket

我在单例类中保留了一个套接字，如下所示：

套接字连接.h

```
@interface SocketConnection : NSObject

+ (GCDAsyncSocket *) getInstance;

@end 
```

套接字连接.m

```
#define LOCAL_CONNECTION 1

#if LOCAL_CONNECTION
#define HOST @"localhost"
#define PORT 5678
#else
#define HOST @"foo.abc"
#define PORT 5678
#endif

static GCDAsyncSocket *socket;

@implementation SocketConnection

+ (GCDAsyncSocket *)getInstance
{
    @synchronized(self) {
        if (socket == nil) {
            dispatch_queue_t mainQueue = dispatch_get_main_queue();
            socket = [[GCDAsyncSocket alloc] initWithDelegate:self delegateQueue:mainQueue];
        }
        if (![socket isConnected]) {

            NSString *host = HOST;
            uint16_t port = PORT;
            NSError *error = nil;

            if (![socket connectToHost:host onPort:port error:&error])
            {
                NSLog(@"Error connecting: %@", error);
            }
        }
    }

    return socket;
}

- (void)socket:(GCDAsyncSocket *)sock didConnectToHost:(NSString *)host port:(UInt16)port
{
    NSLog(@"socket connected");
}

- (void)socketDidDisconnect:(GCDAsyncSocket *)sock withError:(NSError *)err
{
    NSLog(@"socketDidDisconnect:%p withError: %@", sock, err);
}

@end 
```

在视图控制器中：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        _socket = [SocketConnection getInstance];
    }
    return self;
} 
```

我可以看到套接字已连接到我的服务器中，但我的 xcode 控制台日志中没有任何内容。请帮忙看看为什么它不能调用委托方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T02:46:04.370

您正在 SocketConnection 的`getInstance`方法中初始化套接字，此时您将委托设置为`self`. `self`指的是 SocketConnection 实例，而不是您的视图控制器。要么在视图控制器中初始化套接字（此时它不再是单例），要么在 SocketConnection 上创建一个委托属性并将委托方法传递给 SocketConnection 的委托。就个人而言，我做后者，但我发送通知而不是委托消息。

# c# - 在我的自定义程序中，调用部分仍未完成，html 中没有 id 只有 value 属性

> ID：12792136
> 
> 赞同：-1
> 
> 时间：2012-10-09T02:39:10.393
> 
> 标签：c#, html, browser, getelementbyid, tryinvokemember

请仔细阅读我的代码。现在我要做的是创建一个将在博客上发布的应用程序。现在，它包含许多代码，但下面提供的代码是最后一部分，这部分不能正常工作。到目前为止，代码中没有错误，但程序正在跳过 foreach 循环部分。

## 页面 HTML 的一部分

```
<div class="action_bar">
  <input type="submit" class="button blue" value="Submit" onclick="this.form.action='articleadd.php';this.form.target='_self';">
  <input type="button" class="button" value="Preview" onclick="this.form.action='articlepreview.php';this.form.target='_preview';this.form.submit();">
  <a href="articleslist.php" class="button">Go Back</a> 
</div> 
```

我需要你的帮助来告诉我该怎么做才能告诉程序进入“Else IF”，设置所有值，然后单击提交。请帮忙！！

## C# 代码

```
theElementCollection = browser.Document.GetElementsByTagName("a");

foreach (HtmlElement curElement in theElementCollection)
{
    ctrlIdentity = Convert.ToString(curElement.GetElementsByTagName("innerText"));
    if (ctrlIdentity == null)
    {
        Console.WriteLine("You are not logged in. Log in again.");
        goto LOGINAGAIN;
    }
    else if (ctrlIdentity == "Make \"Keyword (3)\" bold ")
    {
        browser.Document.GetElementById("project_title").SetAttribute("value", projectTitle);
        browser.Document.GetElementById("article_title").SetAttribute("value", title);
        browser.Document.GetElementById("article_content").SetAttribute("value", content);
        browser.Document.GetElementById("article_tags").SetAttribute("value", tags);
        browser.Document.GetElementById("article_url_1").SetAttribute("value", url);
        browser.Document.GetElementById("article_keyword_1").SetAttribute("value", keywords);
        browser.Document.GetElementById("article_url_2").SetAttribute("value", url2);
        browser.Document.GetElementById("article_keyword_2").SetAttribute("value", keywords2);
        browser.Document.GetElementById("article_url_3").SetAttribute("value", url3);
        browser.Document.GetElementById("article_keyword_3").SetAttribute("value", keywords3);

        if (curElement.GetAttribute("value").Equals("Submit"))
        {
            curElement.InvokeMember("click");
            Console.WriteLine("Clicked................");
        }
        else
            Console.WriteLine("Unable to click!!!................");
     }
     else
         Console.WriteLine("ERROR!!!! Not working.");
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T02:59:23.543

`curElement.GetElementsByTagName("innerText")`看起来不正确。`GetElementsByTagName`查找具有给定名称的 HTML 元素（“标签”）。我猜您的意思是获取*element*`innerText`的属性，如下所示：

 *```
ctrlIdentity = Convert.ToString(curElement.GetProperty("innerText")); 
```*

# c# - IIS 7.5 Windows 集成身份验证混淆

> ID：12792143
> 
> 赞同：0
> 
> 时间：2012-10-09T02:40:28.800
> 
> 标签：c#, asp.net, iis

在 VS2010 中调试时执行此代码时如何显示 NTLM 和 Kerberos AuthenticationType：

```
IIdentity WinId = HttpContext.Current.User.Identity;
WindowsIdentity currentIdentity = WindowsIdentity.GetCurrent();

lblUserName.Text ="User NAme: " + WinId.Name;
lblIsAuthenticated.Text = "Is Authenticated: " + WinId.IsAuthenticated.ToString();
lbluthentiationType.Text = "Authetication type: " + WinId.AuthenticationType;
lblAuthenticationType2.Text = "Authentication Type: " + currentIdentity.AuthenticationType; 
```

当我查看本地服务器时，它在 lblAuthenticatinType 和 lblAuthenticatinType2 上都显示协商

还

我只能在通过 IP (172.0.0.10:1111) 和 401.1 通过 servername:1111 和 servername.domain.com:1111 访问 Web 服务器时看到经过身份验证的用户

我不知道在哪里咬这个。我在 web.config 中启用了身份验证，如下所示

```
<authentication mode="Windows">
    <!--<identity impersonate="true" userName="<domain>\<UserName>" password="<password>"/>-->
</authentication>
<authorization>       
    <!--<allow users="domain\user.name" /><allow roles="domain\Users" />-->
    <allow users="?" />    
</authorization> 
```

# c# - 在 Razor 代码中使用自己的类

> ID：12792148
> 
> 赞同：0
> 
> 时间：2012-10-09T02:41:11.063
> 
> 标签：c#, asp.net, razor

我的 funcs.cs 文件中有：

```
using System;
using System.Collections.Generic;
using System.Web;

public static class AuthData
{
    public const string USERNAME = "zheref";
    public const string PASSWORD = "Altairis";
} 
```

我正在尝试从我的 Razor 代码（auth.cshtml 文件）访问我的 AuthData 类中的 USERNAME 和 PASSWORD 常量：

```
@{    
if(IsPost)
{
    var u = Request.Form["username"];
    var c = Request.Form["password"];

    if(u == AuthData.USERNAME && c == AuthData.PASSWORD)
    {
        Response.Redirect("~/default");
    }
    else
    {
        Response.Redirect("~/logon");
    }
}
} 
```

这会产生编译错误：“在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。”

如果那不是我不知道该怎么做的方式。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T02:45:04.227

您需要将 funcs.cs 文件放在 App_Code 文件夹中，如果它不存在，请创建它。这假定所有命名空间都是可解析的，并且您的剃刀文件中不需要任何 using 语句。

# c++ - 使用 goto 干净地退出循环

> ID：12792154
> 
> 赞同：6
> 
> 时间：2012-10-09T02:41:52.767
> 
> 标签：c++, while-loop, goto

我有一个关于在 C++ 中使用 goto 语句的问题。我知道这个话题是有争议的，并且对任何笼统的建议或论点不感兴趣（我通常不使用`goto`）。相反，我有一个特定的情况，想了解我使用 goto 语句的解决方案是否是一个好的解决方案。我不会称自己是 C++ 新手，但也不会将自己归类为专业级程序员。生成我的问题的代码部分一旦开始就会在无限循环中旋转。伪代码中线程的一般流程如下：

```
void ControlLoop::main_loop()
{
    InitializeAndCheckHardware(pHardware) //pHardware is a pointer given from outside
    //The main loop
    while (m_bIsRunning)
    {
        simulated_time += time_increment; //this will probably be += 0.001 seconds
        ReadSensorData();
        if (data_is_bad) {
            m_bIsRunning = false;
            goto loop_end;
        }    
        ApplyFilterToData();
        ComputeControllerOutput();
        SendOutputToHardware();
        ProcessPendingEvents();

        while ( GetWallClockTime() < simulated_time ) {}
        if ( end_condition_is_satisified ) m_bIsRunning = false;
    }
    loop_end:
    DeInitializeHardware(pHardware);
} 
```

phardware 指针是从 ControlLoop 对象外部传入的，并且具有多态类型，因此使用 RAII 并在 main_loop 内部创建和销毁硬件接口本身对我来说没有多大意义。我想我可以让 phardware 创建一个临时对象，表示硬件的一种“会话”或“使用”，可以在 main_loop 退出时自动清理，但我不确定这个想法是否会让某人更清楚否则我的意图是什么。退出循环只有三种方式：第一种是从外部硬件读取坏数据；第二个是如果 ProcessPendingEvents() 指示用户发起的中止，这只会导致 m_bIsRunning 变为假；最后一个是在循环的底部是否满足结束条件。`m_bIsRunning = false`然后。

另外，我意识到我可以在这里使用 break 关键字，但是 main_loop 中的大多数伪代码函数调用并没有真正封装为函数，仅仅是因为它们要么需要有很多参数，要么都需要访问成员变量。在我看来，这两种情况都会比简单地将 main_loop 保留为更长的函数更令人困惑，并且由于大 while 循环的长度，这样的语句`goto loop_end`对我来说似乎更清晰。

现在的问题是：如果你用自己的代码编写这个解决方案，会不会让你感到不舒服？我确实觉得有点不对劲，但是我以前从未在 C++ 代码中使用过 goto 语句——因此我请求专家的帮助。还有其他我遗漏的基本想法可以使这段代码更清晰吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T02:44:34.273

在面向对象的开发中，避免使用`goto`通常是一件非常可靠的事情。

在您的情况下，为什么不直接使用`break`退出循环？

```
while (true)
{
    if (condition_is_met)
    {
        // cleanup
        break;
    }
} 
```

至于你的问题：你的使用`goto`会让我不舒服。可读性较差的唯一原因`break`是您承认自己不是一个强大的 C++ 开发人员。对于类 C 语言的任何经验丰富的开发人员来说，`break`都将比`goto`.

特别是，我根本不同意

```
if (something)
{
    goto loop_end;
} 
```

比

```
if (something)
{
    break;
} 
```

它从字面上说与内置语法相同的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T02:51:27.120

**更新**

如果您主要关心的是 while 循环太长，那么您应该着眼于使其更短，C++ 是一种 OO 语言，而 OO 用于将事物拆分为小块和组件，即使在一般的非 OO 语言中，我们通常仍然认为我们应该将一个方法/循环分成小一个，并使其简短易读。如果一个循环中有 300 行，那么无论 break/goto 并不能真正节省您的时间，不是吗？

**更新**

我不反对**goto**但我不会像你一样在这里使用它，我更喜欢只使用**break**，一般来说，对于一个开发人员来说，他在那里看到了一个**break**，他知道这意味着 goto 到最后，并且使用**m_bIsRunning = false**他可以很容易地意识到它实际上在几秒钟内就退出了循环。是的，**goto**可以节省几秒钟的时间来理解它，但它也可能让人们对你的代码感到紧张。

我可以想象我正在使用 goto 将退出一个两级循环：

```
while(running) 
{
    ...
    while(runnning2)
    {
        if(bad_data)
        {
            goto loop_end;
        }
    }
    ...
}
loop_end: 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T02:58:15.183

对于导致循环提前中断的单一条件，我只需使用`break`. 不需要`goto`就是`break`为了这个。

但是，如果这些函数调用中的*任何*一个可能引发异常，或者如果您最终需要多个`break`s，我更喜欢 RAII 样式的容器，这正是析构函数的用途。您总是执行对 的调用`DeInitializeHardware`，所以...

```
// todo: add error checking if needed
class HardwareWrapper {
public:
    HardwareWrapper(Hardware *pH) 
      : _pHardware(pH) { 
        InitializeAndCheckHardware(_pHardware);
    }

    ~HardwareWrapper() {
        DeInitializeHardware(_pHardware);
    }

    const Hardware *getHardware() const {
        return _pHardware;
    }

    const Hardware *operator->() const {
        return _pHardware;
    }

    const Hardware& operator*() const {
        return *_pHardware;
    }

private:
    Hardware *_pHardware;
    // if you don't want to allow copies...
    HardwareWrapper(const HardwareWrapper &other);
    HardwareWrapper& operator=(const HardwareWrapper &other);
}

// ...

void ControlLoop::main_loop()
{
    HardwareWrapper hw(pHardware);
    // code
} 
```

现在，无论发生什么，您总是会`DeInitializeHardware`在该函数返回时调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T02:44:53.577

而不是使用`goto`，你应该使用`break;`来逃避循环。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T06:44:16.050

:有几种替代方法`goto`，`break`具体`continue`取决于`return`具体情况。

但是，您需要记住，两者`break`都是`continue`有限的，因为它们只影响最内部的循环。`return`另一方面不受此限制的影响。

通常，如果您使用 a*退出*`goto`特定范围，则可以改用另一个函数和语句进行重构。作为奖励，它可能会使代码更易于阅读：*`return`*

 *```
// Original
void foo() {
    DoSetup();
    while (...) {
        for (;;) {
            if () {
                goto X;
            }
        }
    }
    label X: DoTearDown();
}

// Refactored
void foo_in() {
    while (...) {
        for (;;) {
            if () {
                return;
            }
        }
    }
}

void foo() {
    DoSetup();
    foo_in();
    DoTearDown();
} 
```

*注意：如果您的函数体不能舒适地放在屏幕上，则说明您做错了。*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T03:01:40.420

Goto 不是退出循环的好习惯，当`break`是一个选项。

此外，在复杂的例程中，最好只在最后放置一个退出逻辑（带有清理）。Goto 有时用于跳转到返回逻辑。

来自 QEMU vmdk 块驱动程序的示例：

```
static int vmdk_open(BlockDriverState *bs, int flags)
{
    int ret;
    BDRVVmdkState *s = bs->opaque;

    if (vmdk_open_sparse(bs, bs->file, flags) == 0) {
        s->desc_offset = 0x200;
    } else {
        ret = vmdk_open_desc_file(bs, flags, 0);
        if (ret) {
            goto fail;
        }
    }
    /* try to open parent images, if exist */
    ret = vmdk_parent_open(bs);
    if (ret) {
        goto fail;
    }
    s->parent_cid = vmdk_read_cid(bs, 1);
    qemu_co_mutex_init(&s->lock);

    /* Disable migration when VMDK images are used */
    error_set(&s->migration_blocker,
              QERR_BLOCK_FORMAT_FEATURE_NOT_SUPPORTED,
              "vmdk", bs->device_name, "live migration");
    migrate_add_blocker(s->migration_blocker);

    return 0;

fail:
    vmdk_free_extents(bs);
    return ret;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-09T06:53:14.647

我看到很多人建议`break`而不是`goto`. 但是`break`并不比`goto`.

`goto`早在 1968 年， Dijkstra 的[“Go To Considered Harmful”论文](http://www.u.arizona.edu/~rubinson/copyright_violations/Go_To_Considered_Harmful.html)就开始有效地进行调查，当时意大利面条代码是规则，块结构`if`和`while`语句之类的东西仍然被认为是*尖端的*。ALGOL 60 有它们，但它本质上是学术界使用的一种研究语言（参见今天的 ML）；Fortran，当时的主流语言之一，再过 9 年都不会得到它们！

Dijkstra 论文的要点是：

1.  人类擅长空间推理，而块结构程序利用了这一点，因为在时间上彼此靠近的程序动作在“空间”（程序代码）中被描述为彼此靠近；
2.  如果你避免`goto`各种形式，那么就有可能*了解*程序中每个词汇位置的变量可能状态。特别是，在`while`循环结束时，您知道该循环的条件必须为假。这对于调试很有用。（Dijkstra 并没有完全这么说，但你可以推断出来。）

`break`, 就像`goto`(and early `return`s, and exceptions...) 一样，减少 (1) 并消除 (2)。当然，`break`经常使用可以避免为`while`条件编写复杂的逻辑，从而获得可理解性的净收益——这同样适用于`goto`.*

# java - 无法为 HTML 抓取网站？

> ID：12792155
> 
> 赞同：1
> 
> 时间：2012-10-09T02:42:15.123
> 
> 标签：java, android, eclipse, parsing, jsoup

所以我试图让我的应用程序访问网站，从该网站获取 HTML，从 HTML 中删除不必要的元素，然后在我的 make shift 应用程序中加载“内容”，因为我没有 API或饲料。我正在使用 Jsoup，如果我不是在 android 中进行网络抓取，它就可以工作，但 android 不喜欢它。

```
public class SimpleDiggActivity extends Activity {

private WebView browser;
final Activity activity = this;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.getWindow().requestFeature(Window.FEATURE_PROGRESS);

    setContentView(R.layout.main);

    getWindow().setFeatureInt(Window.FEATURE_PROGRESS, Window.PROGRESS_VISIBILITY_ON);

    String url = "http://www.digg.com";
    Document digg;
    browser = (WebView) findViewById(R.id.mybrowser);
    final Button homeDigg = (Button) findViewById(R.id.button1);

    browser.setWebViewClient(new SimpleWebViewClient());

    browser.getSettings().setJavaScriptEnabled(true);
    browser.getSettings().setUseWideViewPort(true);
    browser.getSettings().setLoadWithOverviewMode(true);
    browser.getSettings().setDisplayZoomControls(false);
    browser.getSettings().setEnableSmoothTransition(true);
    browser.getSettings().setBuiltInZoomControls(true);
    browser.getSettings().setUserAgentString("Android");

    // progressCircle = ProgressDialog.show(SimpleDiggActivity.this, "", "Loading...");
    final ProgressDialog progressCircle = new ProgressDialog(activity);
    progressCircle.setProgressStyle(ProgressDialog.STYLE_SPINNER);
    progressCircle.setMessage("Loading...");
    progressCircle.setCancelable(false);

    try{
        Toast.makeText(getApplicationContext(), "No Steps down", Toast.LENGTH_SHORT).show();
        Document diggTest = Jsoup.connect("http://digg.com/enable/mobile").get();
        Toast.makeText(getApplicationContext(), "1 Steps down", Toast.LENGTH_SHORT).show();
        String diggTitle = diggTest.title();
        Toast.makeText(getApplicationContext(), "2 Steps down"    , Toast.LENGTH_SHORT).show();
        Document compressed = Jsoup.parseBodyFragment(diggTitle);
        Toast.makeText(getApplicationContext(), "3 Steps down", Toast.LENGTH_SHORT).show();
        org.jsoup.select.Elements div = diggTest.select("div");
        Toast.makeText(getApplicationContext(), "4 Steps down", Toast.LENGTH_SHORT).show();
        String divBrow = div.toString();
        Toast.makeText(getApplicationContext(), "5 Steps down", Toast.LENGTH_SHORT).show();
        browser.loadUrl(divBrow);
    }catch (Exception e){
        e.printStackTrace();

        Toast.makeText(getApplicationContext(), "Gave up", Toast.LENGTH_SHORT).show();
        String diggBrow = url;
        browser.loadUrl("http://www.google.com");
    } 
```

对不起，如果它很乱，我只是在胡闹，这是我的第一次。Toasts 是让我知道代码何时尝试失败并求助于捕获。当我运行它时，它不会过去

```
 Document diggTest = Jsoup.connect("http://digg.com/enable/mobile").get(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:31:40.643

我用 JSOUP 1.7.1 版尝试了你的代码，它在我的最后工作正常。以下是工作代码：

```
public class SimpleDiggActivity extends Activity {

    final Activity activity = this;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.getWindow().requestFeature(Window.FEATURE_PROGRESS);

        setContentView(R.layout.activity_simple_digg);

        getWindow().setFeatureInt(Window.FEATURE_PROGRESS,
                Window.PROGRESS_VISIBILITY_ON);

        String url = "http://www.digg.com";
        Document digg;

        // progressCircle = ProgressDialog.show(SimpleDiggActivity.this, "",
        // "Loading...");
        final ProgressDialog progressCircle = new ProgressDialog(activity);
        progressCircle.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        progressCircle.setMessage("Loading...");
        progressCircle.setCancelable(false);

        try {
            Toast.makeText(getApplicationContext(), "No Steps down",
                    Toast.LENGTH_SHORT).show();
            Document diggTest = Jsoup.connect("http://digg.com/enable/mobile")
                    .get();
            Toast.makeText(getApplicationContext(), "1 Steps down",
                    Toast.LENGTH_SHORT).show();
            String diggTitle = diggTest.title();
            Toast.makeText(getApplicationContext(), "2 Steps down",
                    Toast.LENGTH_SHORT).show();
            Document compressed = Jsoup.parseBodyFragment(diggTitle);
            Toast.makeText(getApplicationContext(), "3 Steps down",
                    Toast.LENGTH_SHORT).show();
            org.jsoup.select.Elements div = diggTest.select("div");
            Toast.makeText(getApplicationContext(), "4 Steps down",
                    Toast.LENGTH_SHORT).show();
            String divBrow = div.toString();
            Toast.makeText(getApplicationContext(), "5 Steps down",
                    Toast.LENGTH_SHORT).show();
            Log.d(this.getClass().getSimpleName(), "data is " + divBrow);
        } catch (Exception e) {
            e.printStackTrace();

            Toast.makeText(getApplicationContext(), "Gave up",
                    Toast.LENGTH_SHORT).show();
            String diggBrow = url;
        }
    }
} 
```

以下是 divBrow 的值：

```
10-10 11:58:45.631: D/SimpleDiggActivity(350): data is <div class="site-header-container page-container"> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):  <header class="site-header"> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):   <h1 class="site-header-logo-container"><a href="/" id="site-header-logo" class="image-replace">Digg</a></h1> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):  </header> 
10-10 11:58:45.631: D/SimpleDiggActivity(350): </div>
10-10 11:58:45.631: D/SimpleDiggActivity(350): <div id="container" class="page-container"> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):  <ul id="top-stories"> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):   <li class="story-container story-1" data-content-id="Racz8K" id="story-Racz8K"> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):    <div class="story-details"> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):     <div class="story-kicker">
10-10 11:58:45.631: D/SimpleDiggActivity(350):       NO FILTER 
10-10 11:58:45.631: D/SimpleDiggActivity(350):     </div> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):     <div class="story-headline"> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):      <a data-position="0" class="story-link" href="http://www.fastcompany.com/3001994/no-filter-inside-hipstamatics-lost-year-searching-next-killer-social-app" data-content-id="Racz8K"> Inside Hipstamatic’s Lost Year Searching For The Next Killer Social&nbsp;App </a> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):     </div> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):     <div class="story-domain"> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):      <div class="story-link-wrapper"> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):       <a data-position="0" class="story-link" href="http://www.fastcompany.com/3001994/no-filter-inside-hipstamatics-lost-year-searching-next-killer-social-app" data-content-id="Racz8K">fastcompany.com</a> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):      </div> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):      <div class="story-actions"> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):       <span class="story-action-item story-score"> <span class="story-score-details"> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):         <ul class="story-score-details-list"> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):          <li class="story-score-thumb-Racz8K story-score-thumb">20</li> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):          <li class="story-score-tweets-Racz8K story-score-twitter">402</li> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):          <li class="story-score-fb_shares-Racz8K story-score-facebook">72</li> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):         </ul> </span> <span class="story-score-Racz8K">494</span> </span> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):      </div> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):     </div> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):     <div class="story-image"> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):      <a data-position="0" class="story-link" href="http://www.fastcompany.com/3001994/no-filter-inside-hipstamatics-lost-year-searching-next-killer-social-app" data-content-id="Racz8K"><img src="http://static.digg.com/images/Racz8K_1_www_large_thumb.jpeg" alt="" width="312" height="170" /></a> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):     </div> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):     <div class="story-preview">
10-10 11:58:45.631: D/SimpleDiggActivity(350):      From rooftop bashes and acquisition talks to staff clashes and layoffs, Hipstamatic’s founders and ex-employees describe the startup’s losing struggle to keep pace with Instagram, Facebook, and others in the white-hot photo-sharing space.
10-10 11:58:45.631: D/SimpleDiggActivity(350):     </div> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):    </div> </li> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):   <li class="story-container story-1" data-content-id="Qa2sP3" id="story-Qa2sP3"> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):    <div class="story-details"> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):     <div class="story-kicker">
10-10 11:58:45.631: D/SimpleDiggActivity(350):       PHOTOGRAPHY 
10-10 11:58:45.631: D/SimpleDiggActivity(350):     </div> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):     <div class="story-headline"> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):      <a data-position="1" class="story-link" href="http://lens.blogs.nytimes.com/2012/10/09/looking-into-the-eyes-of-made-in-china/" data-content-id="Qa2sP3"> Looking Into The Eyes Of 'Made In&nbsp;China' </a> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):     </div> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):     <div class="story-domain"> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):      <div class="story-link-wrapper"> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):       <a data-position="1" class="story-link" href="http://lens.blogs.nytimes.com/2012/10/09/looking-into-the-eyes-of-made-in-china/" data-content-id="Qa2sP3">lens.blogs.nytimes.com</a> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):      </div> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):      <div class="story-actions"> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):       <span class="story-action-item story-score"> <span class="story-score-details"> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):         <ul class="story-score-details-list"> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):          <li class="story-score-thumb-Qa2sP3 story-score-thumb">0</li> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):          <li class="story-score-tweets-Qa2sP3 story-score-twitter">252</li> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):          <li class="story-score-fb_shares-Qa2sP3 story-score-facebook">411</li> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):         </ul> </span> <span class="story-score-Qa2sP3">663</span> </span> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):      </div> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):     </div> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):     <div class="story-image"> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):      <a data-position="1" class="story-link" href="http://lens.blogs.nytimes.com/2012/10/09/looking-into-the-eyes-of-made-in-china/" data-content-id="Qa2sP3"><img src="http://static.digg.com/images/Qa2sP3_1_www_large_thumb.jpeg" alt="" width="312" height="170" /></a> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):     </div> 
10-10 11:58:45.631: D/SimpleDiggActivity(350):     <div class="story-preview">
10-10 11:58:45.631: D/SimpleDiggActivity(350):      In “Faces of Made in China,” a series of typological portraits looking at workers inside six Chinese factories, the photographer Lucas Schifres seeks to consider the otherwise anonymous people who produce our essential possessions by looking directly into their eyes.
10-10 11:58:45.631: D/SimpleDiggActivity(350):     </div> 
```

请在你的最后尝试一下，让我知道它是怎么回事。

# c - 整数常量对于“long”类型来说太大了

> ID：12792157
> 
> 赞同：3
> 
> 时间：2012-10-08T22:34:46.487
> 
> 标签：c, random

我正在使用以下算法创建随机整数：

```
int random;

int i;
for (i = 0; i < RANDOM_COUNT; i++) {
    random = (((int) rand() << 0) & 0x0000FFFFd)
            | (((int) rand() << 16) & 0xFFFF0000d);
    fprintf(outputFile, " %d\n", random);
} 
```

我收到以下警告：

`warning: integer constant is too large for "long" type`

在这条线上：

`| (((int) rand() << 16) & 0xFFFF0000d);`

我正在使用 GCC 3.4.3 来编译代码。

有谁知道操作的哪一部分触发了警告？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T22:44:18.987

> 有谁知道操作 [ `(((int) rand() << 16) & 0xFFFF0000d);`] 的哪个部分触发了警告？

是的，它是`0xFFFF0000d`，因为它的大小是 36 位。请注意，此数字等于`0xFFFF0000D`。你可能的意思是`0xFFFF0000`。

同样，`0x0000FFFFd`等于`0x0000FFFFD`。你可能的意思是`0x0000FFFF`。

# c# - C# - 替换 .txt 资源中的文本

> ID：12792160
> 
> 赞同：0
> 
> 时间：2012-10-09T02:42:42.110
> 
> 标签：c#, text, resources, replace

我正在查看来自 VB.NET 的一些代码，并且想知道如何在 C# 中做到这一点。

```
Dim Source As String = My.Resources.TextFile1.Replace("[TextToReplace]", TextBoxWithInfo.Text) 
```

我将其改写为：

```
string source = myProgramName.Properties.Resources.TextFile1.Replace("[TextToReplace],TextBoxWithInfo.Text) 
```

我还在 Visual Studio 中使用“添加资源”功能放入了一个文本文件。然后我将“构建操作”更改为“嵌入式资源”，因为我希望它是一个独立的应用程序。我得到的问题是“myProgramName.Properties.Resources'不包含'TextFile1'的定义”。我找错地方了吗？我有一种感觉，这与我更改构建操作有关，但我不确定如何让它工作。

提前致谢。

# c# - IQueryable 和模型绑定魔法？

> ID：12792166
> 
> 赞同：2
> 
> 时间：2012-10-09T02:43:58.033
> 
> 标签：c#, asp.net

我正在测试 Web 窗体的新 ASP.NET 4.5 模型绑定，其中包含一个公开 IQueryable 的简单存储库。存储库使用 EF 5，数据库优先方法。我正在投影 EF 自动生成的实体以使用我的 DTO。

一切正常，这就是重点，我期待看到某种异常......

这是代码：

### 存储库

```
 public IQueryable<JobDto> GetJobs()
    {
        var ctx = this.contextResolver.GetCurrentContext<pubsEntities>();

        return ctx.jobs.Select(x => new JobDto
            {
                Description = x.job_desc,
                ID = x.job_id,
                Maximum = x.max_lvl,
                Minimum = x.min_lvl
            });
    } 
```

如您所见，我将我的 EF 实体投影到自定义 DTO 中，并且属性完全不同。

### ASPX 代码背后

```
 public IQueryable<JobDto> gv_GetData()
    {
        return this.jobsRepository.GetJobs();
    } 
```

### ASPX

```
 <asp:GridView runat="server" ID="gv" AllowPaging="true" AllowSorting="true"
        DataKeyNames="ID"
        AutoGenerateColumns="true"
        SelectMethod="gv_GetData"
        ItemType="QueryRepository.JobDto, QueryRepository">
        <Columns>
            <asp:BoundField DataField="Description" HeaderText="My custom description" SortExpression="Description" />
        </Columns>
    </asp:GridView> 
```

当使用很棒的存储库时，这就像一个魅力，*开箱*即用的分页和排序（现在我不必使用 an`ObjectDataSource`来简化分页和排序之类的事情）

**我的问题是：**

如果我的存储库正在返回`IQueryable<JobDto>`，并且我的 DTO 的属性与我的 EF 实体的属性（它是一个名为: 的不同实体`job`）的属性不同。

`GridView`既然我`GridView`配置了我的 DTO 实体中定义的属性名称，EF 怎么可能正确地对我进行排序？？？据我所知，使用 LINQ 的动态排序是使用字符串来设置顺序标准的。不知何故 LINQ to Entities -`IQueryable`将我的 DTO 属性自动映射到我的 EF 实体公开的属性。

谁能帮助这个可怜的灵魂=（了解幕后发生的事情？？

我运行 SQL 配置文件只是为了确认查询在数据库中正确执行：

```
SELECT TOP (10) 
[Project1].[C1] AS [C1], 
[Project1].[job_desc] AS [job_desc], 
[Project1].[job_id] AS [job_id], 
[Project1].[max_lvl] AS [max_lvl], 
[Project1].[min_lvl] AS [min_lvl]
FROM ( SELECT [Project1].[job_id] AS [job_id], [Project1].[job_desc] AS [job_desc], [Project1].[min_lvl] AS [min_lvl], [Project1].[max_lvl] AS [max_lvl], [Project1].[C1] AS [C1], row_number() OVER (ORDER BY [Project1].[job_desc] DESC) AS [row_number]
    FROM ( SELECT 
        [Extent1].[job_id] AS [job_id], 
        [Extent1].[job_desc] AS [job_desc], 
        [Extent1].[min_lvl] AS [min_lvl], 
        [Extent1].[max_lvl] AS [max_lvl], 
        1 AS [C1]
        FROM [dbo].[jobs] AS [Extent1]
    )  AS [Project1]
)  AS [Project1]
WHERE [Project1].[row_number] > 0
ORDER BY [Project1].[job_desc] DESC 
```

**请特别注意这些行 (ASPX)：**

```
<asp:BoundField DataField="Description" SortExpression="Description" /> 
```

**以及生成的 SQL**

```
ORDER BY [Project1].[job_desc] DESC 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T23:27:32.357

使用此代码：

```
return ctx.jobs.Select(x => new JobDto
    {
        Description = x.job_desc,
        ID = x.job_id,
        Maximum = x.max_lvl,
        Minimum = x.min_lvl
    }); 
```

`Select`您调用的重载实际上是创建一个`IQueryable`影响 EF 发出的实际 SQL 的新的。您实际上还没有将数据对象投影到您的 DTO，而是为 EF 提供了一个表达式，它可以用来为结果集创建查询，一旦查询运行，该结果集将投影到您的 DTO。请注意，在`Select`被调用的重载中，`Expression<Func<Job, JobDto>>`传递的是 an，而不仅仅是 a `Func<Job, JobDto>`。因为 EF 分析表达式，所以它能够在可能的情况下对 SQL 进行复杂的转换。

当`OrderBy`您添加表达式时`GridView`，它也只是`IQueryable`使用可以转换为 SQL 的新表达式修改您。

**编辑**：

当您调用上下文`Select`的`IQueryable<Job> jobs`属性时，EF 能够查看您`Expression<Job, JobDto>`并确定：

1.  `JobDto`您的投影需要哪些列
2.  如何从表`JobDto`中填充投影。`Job`

如果你看一下`Expression`BCL 中的许多类，你就会明白它是如何做到这一点的。编译器在遇到 时`x => new JobDto { Description = x.job_desc, ... }`，会创建一个看起来像这样的复杂表达式树（我正在严重简化它）：

```
LambdaExpression<Func<Job, JobDto>>
    MemberInitExpression
        NewExpression
        Bindings
            MemberAssignment
                Member = Description property
                Expression = MemberExpression representing access to the Job property
            MemberAssignment...
            MemberAssignment...
            MemberAssignment...
            etc. 
```

您可以看到此树如何包含足够的信息，以便 EF 遍历表达式并生成内部映射并生成等效的 SQL 命令。他们基本上是将 .NET 表达式投影到 SQL 表达式。并非所有内容都具有 1:1 映射，但在您的情况下，您可以看到映射是多么简单：

```
Job type          -> Extent1 alias   -> dbo.jobs table
JobDto projection -> Project1 alias  -> subquery 
```

您会注意到还有其他预测；它引入了一个行号属性和一些包含该值的神秘属性`1`；我不确定那是用来做什么的。

然后是分析`OrderBy`an 的附加扩充`Expression`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:42:49.033

这个问题的答案在于 IQueryable 运算符的工作方式。由于 LINQ 查询在延迟模式下执行，因此不会在调用 GetJobs 方法后立即获得结果。

为了在 ASP.NET GridView 上启用排序，我们将属性 SortExpression 设置为列。当我们单击列对数据进行排序时，会创建一个动态 lambda 表达式，并对从 GridView 的 SelectMethod 获得的结果调用 OredrBy 运算符。我们可以说，当我们应用排序时，会调用以下模式的语句：

```
gv_GetData().OrderBy(j => j.Description); 
```

运算符的执行取决于 GetJobs() 方法返回的类型。再往下走，我们可以说返回给 GridView 的数据是以下结果：

```
this.jobsRepository.GetJobs().OrderBy(j => j.Description); 
```

再往下走，我们可以假设，最终要评估的 LINQ 查询是：

```
ctx.jobs.Select(x => new JobDto
        {
            Description = x.job_desc,
            ID = x.job_id,
            Maximum = x.max_lvl,
            Minimum = x.min_lvl
        }).OrderBy(j => j.Description); 
```

解析完所有表达式后，将形成 SQL 查询。在这里，我们有 2 个表达式要解析：一个传递给 Select 运算符，另一个传递给 OrderBy 运算符。解析这两个表达式后获得的数据用于形成 SQL 查询。

如果我们使用返回 IEnumerable 作为 SelectMethod 的方法，则会出现异常。因为，IEnumerable 运算符接受 Func，不能动态形成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T23:26:35.903

我认为 EF 完全有可能知道如何生成查询，因为在应用排序之前 IQueryable 可能没有查询任何内容。我想如果你运行这个，你会得到相同的 sql 输出：

```
var ctx = this.contextResolver.GetCurrentContext<pubsEntities>();

var jobs = ctx.jobs.Select(x => new JobDto
    {
        Description = x.job_desc,
        ID = x.job_id,
        Maximum = x.max_lvl,
        Minimum = x.min_lvl
    }).OrderBy(x => x.Description).ToArray(); 
```

编辑：为后代保留我的答案，但雅各布的写得更好。

# c++ - 新的不分配内存？

> ID：12792167
> 
> 赞同：4
> 
> 时间：2012-10-09T02:43:58.587
> 
> 标签：c++, pointers, new-operator

我有这段代码（在函数中`abc`）

```
matriz = new (nothrow) int*[qnt_objetos]; 
if (matriz == 0)
     exit(0);

for (int i = 0; i < qnt_objetos; i++)
{
    matriz[i] = new (nothrow) int[tam_mochila];
    if (matriz[i] == 0)
        exit(0);
} 
```

`matriz`是这样声明的二维数组（在 main 上）

```
int **matriz = NULL; 
```

但是，使用运算符时不会分配内存空间`new`。我做错了什么？而且，直接在`main`函数中分配内存更好吗？这不是让代码更难以辨认吗？

PS：在NetBeans（或终端）上调试它我得到了那个`matriz`地址= `0x0`（`NULL`如果我没记错的话）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T02:48:29.643

这意味着新操作悄然失败（nothrow），并返回 NULL，您分配了多少内存？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T02:51:54.577

我在代码块中使用 G++ 编译并运行它。它运行得很好，没有任何问题。您应该提供一些错误检查以确保分配器具有适当的值，并且不会大得离谱（即：收到 -1 的无符号长整数）。所以一定要检查缓冲区有多大。

# java - 使用 for-each 循环 java 将最后一个条目对象添加到数组列表中

> ID：12792172
> 
> 赞同：0
> 
> 时间：2012-10-09T02:44:13.547
> 
> 标签：java

我正在尝试获取 Entry 对象的最后一个元素并添加到 Entry 对象的数组列表中（因此它只会在数组列表中存储一个 Entry 对象）。我这样做的原因是我需要使用该 ArrayList另一个班级。

源代码：

```
ArrayList<Entry<String,Integer>> allEntries = new ArrayList<Entry<String,Integer>>();
Iterator <Entry <String,Integer>> entries = post.getCategory().entrySet().iterator();
 while(entries.hasNext()) {
  Entry <String,Integer> entry = entries.next();
if(topic.getField("categoryName").equals(entry.getKey())){                                                            
  int increaseCount = entry.getValue();
  increaseCount++;
  entry.setValue(increaseCount);
}
for(Entry<String,Integer> entrySet : post.getCategory().entrySet()){
  if(!entries.hasNext()){
     allEntries.add(entrySet);                      
  }
} 
```

# c++ - VisualAssist 找不到 boost::bind 的声明

> ID：12792173
> 
> 赞同：0
> 
> 时间：2012-10-09T02:44:26.427
> 
> 标签：c++, visual-studio, boost, visual-assist

这本身不是编程问题。但是你们知道如何正确地让 VisualAssist (v10.7.1916.0) 解析 boost::bind (v1.51) 的声明吗？它目前在我的代码中总是用红色下划线。也许所有这些模板都`bind/bind_mf_cc.hpp`让它发疯了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:26:50.217

Visual Assist X 在处理复杂的 c++ 模板（例如 boost 标头）时确实存在问题。我经常遇到这种情况。我建议你禁用 VAX 中的错误下划线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T02:49:24.113

你的代码编译了吗？如果`#include <bind/bin_mf_cc.hpp>`在您的文件中，并且在编译器的包含路径中添加了boost库的路径，那么Visual AssistX应该会自动解析它...

# c# - 使用 C# 将字节转换为图像并将图像转换为字节

> ID：12792175
> 
> 赞同：0
> 
> 时间：2012-10-09T02:44:29.457
> 
> 标签：c#, mysql, arrays, image, typeconverter

目前我正在使用 ASP.NET 和 C# 将图像存储到 MySQL（使用 blob 数据类型）。我已成功将其存储到数据库中，但现在的问题是，如何将其检索`byte[]`为图像格式？

功能：`code to convert byte[] to image`

```
public Image byteArrayToImage(byte[] byteArrayIn)
    {
        MemoryStream ms = new MemoryStream(byteArrayIn);
        Image returnImage = Image.FromStream(ms); --> here gives me error as `parameter is not valid`
        return returnImage;

    } 
```

检索为数据表...

```
if (dt1.Rows.Count > 0)
        {
            byteArrayToImage((byte[]) dt1.Rows[0]["PortfolioSlideImages"]);
            //MemoryStream ms = new MemoryStream((byte[])dt1.Rows[0]["PortfolioSlideImages"]);
            //Image returnImage = Image.FromStream(ms);
            //return returnImage;
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T02:46:15.457

试试这个功能，

```
public Image byteArrayToImage(byte[] byteArrayIn)
{
     Image returnImage = null;
     using (MemoryStream ms = new MemoryStream(byteArrayIn))
     {
         returnImage = Image.FromStream(ms);
     }
     return returnImage;
} 
```

[欲了解更多信息，请访问此链接](http://www.codeproject.com/Articles/15460/C-Image-to-Byte-Array-and-Byte-Array-to-Image-Conv)

# asp.net-mvc - MVC，更新模型，剃刀

> ID：12792179
> 
> 赞同：1
> 
> 时间：2012-10-09T02:44:58.850
> 
> 标签：asp.net-mvc, razor

我有一个视图、模型和一个控制器，我希望用户开始编辑新联系人的页面。

他们将

1.  输入名字和姓氏
2.  点击保存
3.  控制器提交保存。
4.  展开页面以显示显示名称以进行编辑。

在表单 Asp.net 中，我将已保存记录的主键粘贴在视图状态中，因此在下一次保存时，我会进行更新与插入。

我如何在 MVC、Razor 中做到这一点？我已经看到使用隐藏字段的示例，但我认为有更好的方法。我希望它根本不显示，或者至少是加密的，但我不想构建加密或解密例程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:28:47.890

Html 帮助类的用户`HiddenFor()`方法。`@Html.HiddenFor(model => model.Id)`. 顺便说一句，ViewState 存储在 ASP.NET 中的隐藏字段中。

如果您真的想像在 viewState 中那样加密数据，您可以使用`Html.Serialize()`在视图中序列化和加密整个模型的方法，然后您必须在发布后在控制器中对其进行反序列化。看看这篇[文章](http://blog.maartenballiauw.be/post/2009/10/08/Leveraging-ASPNET-MVC-2-futures-ViewState.aspx)

# python - 关于python金字塔视图

> ID：12792187
> 
> 赞同：0
> 
> 时间：2012-10-09T02:46:02.033
> 
> 标签：python, pyramid

我的项目基于 Pyramid。

Pyramid 的默认脚手架非常简单：`view.py`, `models.py`, 等等。

我创建了一些目录来替换它们。例如：

`view.py`--> 查看目录

`models.py`--> 模型目录

然后我创建一个名为`login.py`：

```
from pyramid.httpexceptions import HTTPForbidden
from pyramid.response import Response
from pyramid.view import view_config
import logging

from ..model import (
    DBSession,
    DynUser,
    )

log = logging.getLogger(__name__)

def find_user(account):
    #user = None
    try:
        user = DBSession.query(DynUser).filter(DynUser.username==account).first()
        #one = DBSession.query(MyModel).filter(MyModel.name=='one').first()
    except ValueError:
        #log.warning("invalidate id %s input." % request.matchdict['id'])
        log.warning("invalidate id %s input.")
    except Exception:
        log.error("database error!")

    if not user:
        return HTTPForbidden()

    return dict(user=user) 
```

我已经导入了 DBSession。为什么我仍然会收到此错误？

```
tip
--------------------------------------------------------------------------
Undefined variable from import: DBSession

Undefined variable from import: DBSession

DBSession Found at: dyncms.model.meta

DBSession = scoped_session(sessionmaker(extension=ZopeTransactionExtension())) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:24:31.220

你没有提到它，但我假设你搬到`models.py`了`model/__init__.py`.

`from ..models`仅`login.py`在位于子目录中时才有效（例如`login/login.py`）。如果不是这种情况，您应该使用`from .models import`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:04:03.813

在模型目录中

```
__init__.py 
# package
from .meta import DBSession
from .meta import Base
from .book import Book

meta.py
from sqlalchemy.ext.declarative import declarative_base

from sqlalchemy.orm import (
    scoped_session,
    sessionmaker,
    )

from zope.sqlalchemy import ZopeTransactionExtension

DBSession = scoped_session(sessionmaker(extension=ZopeTransactionExtension()))
Base = declarative_base() 
```

# node.js - heroku 上的 exec 和 PATH 与 buildpacks

> ID：12792191
> 
> 赞同：1
> 
> 时间：2012-10-09T02:46:16.230
> 
> 标签：node.js, heroku, environment-variables, child-process, buildpack

我使用[这个 buildpack](https://github.com/abernier/heroku-buildpack-casperjs)是为了在 heroku 上使用[casperjs](http://casperjs.org/)。

一旦我的应用程序创建，我检查我的`PATH`

```
$ heroku config:get PATH
/usr/local/bin:/usr/bin:/bin:/app/vendor/phantomjs/bin:/app/vendor/casperjs/bin 
```

好的，casperjs 在这里！

--

*档案*

```
scraper: node scraper.js 
```

*刮刀.js*

```
var exec = require('child_process').exec;
exec('casperjs casper-script.js'); 
```

--

但是当我启动爬虫进程时，它会崩溃并显示以下日志：

```
2012-10-09T02:23:38+00:00 heroku[scraper.1]: Starting process with command `node scraper.js`
2012-10-09T02:23:39+00:00 app[scraper.1]: bash: node: command not found 
```

* * *

为什么[`exec`](http://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback)找不到`casperjs`哪个在里面`PATH`？

PS：我试过了，[`spawn`](http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options)但没有更多的运气......

**[编辑]：**这里有一个可测试的要点[https://gist.github.com/3856317](https://gist.github.com/3856317)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:04:19.523

知道了！

@vinayr：[你是对](https://stackoverflow.com/questions/12792191/exec-and-path-on-heroku-with-buildpacks#comment17295473_12792191)的，这个问题既不涉及命令，`exec`也不涉及命令，它是！`casperjs``node``command not found`

`phantomjs`我认为使用and安装 buildpack `casperjs`（例如：[heroku-buildpack-casperjs](https://github.com/misza222/heroku-buildpack-casperjs)）会为我的应用程序保留节点功能，但似乎并非如此。

为了让它工作（node+phantomjs+ca​​sperjs），我宁愿分叉[heroku-buildpack-nodejs](https://github.com/heroku/heroku-buildpack-nodejs) buildpack 并向它添加`phantomjs`/`casperjs`二进制文件，我可以称之为：[heroku-buildpack- **nodejs** - casperjs](https://github.com/abernier/heroku-buildpack-nodejs)。

换句话说，当使用自定义 buildpack 时，您必须自己包含节点支持。

# silverlight - Silverlight 自动完成框显示 SelectedItem 或 Text

> ID：12792192
> 
> 赞同：0
> 
> 时间：2012-10-09T02:46:24.027
> 
> 标签：silverlight, autocompletebox

我在表单中使用 Silverlight 的工具包 AutoCompleteBox 控件，希望它显示绑定到 SelectedItem 的值，或者如果它为空，则显示绑定到 Text 属性的值。

问题是当 SelectedItem 为空时，它会自动清除 Text 属性，即使它绑定到具有值的 VM 属性也是如此。

这是一些 XAML：

```
<c:AutoCompleteBox
            MinimumPopulateDelay="500"
            ItemsSource="{Binding SuburbSearchResults}"
            SelectedItem="{Binding SelectedSuburb}"
            Text="{Binding SuburbText, Mode=OneWay}"
            MinimumPrefixLength="3" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T07:11:56.363

First of all using Binding on Text and SelectedItem properties together ? Maybe it's not a good idea.

Its right when you use binding on SelectedItem this manages Text properties value for you.

If you use a ViewModel, I suggest you to bind one property of AutocompleteBox and just use SuburbText prop. in VM. (or just bind SelectedItem and you may use ValueMemberPath with it)

**Edit 1:**

```
//Suppose myVM.SuburbText is a local variable in VM, this shows Text prp. binding
//But I prefer Object binding with ValueMemberPath,you may use one of them
//But not both together

public string TextWillBeBound
{
  get
  {
    if(SearchResults.SelectedItem!=null)
    {
      myVM.SuburbText=SearchResults.SelectedItem.TextProperty;
    }
  else if(myVM.SuburbText="")
 {
   myVM.SuburbText="Please write...";
 }
  return myVM.SuburbText;
}
set
 {
   if(SearchResults.SelectedItem==null)     
  { 
    myVm.SuburbText=value; 
    //with value you may create Suburb object ? and set as Selected. 
    //Depending  on what you aim. I suggest using SelectedItem & ValueMemberPath
  }
 }
} 
```

//How did I used this control before

//You can also bind SelectedItem and use ValueMemberPath as shown below.

```
<sdk:AutoCompleteBox MinimumPopulateDelay="500" MinimumPrefixLength="3"
                     Populating="AutoCompleteBox_Populating"
                     SelectedItem="{Binding Path=SELECTEDITEM,Mode=TwoWay}"
                     ValueMemberPath="DESCRIPTION"> 
```

# python - 使用 simpleparse EBNF 解析 nuke 脚本

> ID：12792198
> 
> 赞同：3
> 
> 时间：2012-10-09T02:46:58.457
> 
> 标签：python, parsing, ebnf, nuke

我正在尝试使用以下 EBNF 传递一个 nuke 脚本（foundry .nk 文件），但我似乎在我的“内容”文字中捕捉到了太多。此外，我很确定我在格式化时犯了一些重大的菜鸟错误。谁能帮我一把？

EBNF：

```
file           := header, content
header         := shebang, version
shebang        := '#!', ts, word, ('-',[a-zA-Z0-9]+)?,'\n'
version        := 'version', ts, [0-9], '.', [0-9], ts, 'v', [0-9], '\n'
content        := node*
node           := word, ts, '{\n', nodecontent*, '}\n'
nodecontent    := ts, knobname, ts, knobvalue, '\n'
knobname       := word
knobvalue      := word / string / multiknobgroup / knobgroup
knobgroup      := '{', (word / string, ts)*, '}'
multiknobgroup := '{\n', (ts, knobgroup, '\n')*, ts, '}\n'
string         := '"', word*, '"'
word           := ([a-zA-Z0-9-_()/\~.<>?;:])+,ts
ts             := [ \t]* 
```

核子脚本：

```
#! /opt/foundry/Nuke/6.3v7-x64/Nuke6.3 -nx
version 6.3 v7
Root {
 inputs 0
 name /path/to/file_name.nk
 first_frame 0
 last_frame 100
 lock_range true
 format "2048 1556 0 0 2048 1556 1 2K_Super_35(full-ap)"
 proxy_type scale
 proxy_format "1024 778 0 0 1024 778 1 1K_Super_35(full-ap)"
 addUserKnob {20 custom l Custom}
 addUserKnob {1 scene l Scene}
 views {
  {left ""}
  {right ""}
 }
} 
```

当前的 EBNF 阻塞了“视图”旋钮值。通过从节点中删除它，我的代码按预期工作。我的完整代码在这里： http: [//pastebin.com/z01RWpqW](http://pastebin.com/z01RWpqW)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T23:09:02.710

这是固定的声明：

```
declaration = """
file           := header, content
header         := shebang, version
shebang        := '#!', ts, word, ('-',[a-zA-Z0-9]+)?,'\n'
version        := 'version', ts, [0-9], '.', [0-9], ts, 'v', [0-9], '\n'

content        := node*
node           := word, ts, '{\n', nodecontent*, ts, '}', '\n'*
nodecontent    := ts, knobname, ts, knobvalue, '\n'
knobname       := word
knobvalue      := word / string / multiknobgroup / knobgroup
knobgroup      := '{', (word / string)*, ts, '}'
multiknobgroup :=  '{\n', (ts, knobgroup, '\n')*, ts, '}'
string         := '"', word*, '"'
word           := ([a-zA-Z0-9-_()/\~.<>?;:])+,ts
ts             := [ \t]*
""" 
```

1.  **节点**可能以 \n 结尾，所以这就是为什么您需要将 '\n'* 附加到节点定义的原因
2.  **multiknobgroup**定义**不允许**以 }\n 结尾，因为 \n 由 nodecontent 定义（键值 \n）附加，并且会导致 multiknobgroup 与 nodecontent 不匹配

# ruby-on-rails - 用户类认证 NoMethodError

> ID：12792199
> 
> 赞同：1
> 
> 时间：2012-10-09T02:47:44.733
> 
> 标签：ruby-on-rails, nomethoderror

在示例登录程序中，我有两个类。会话和用户。用户表有两个字段名，密码。调用用户类的身份验证方法时，会话方法继续获取“NoMethodError”。

用户类如下所示：

```
class UserController < ApplicationController
  def index
    @user = User.find(:first, :order => 'RANDOM()')
  end

  def show
   @user = User.find(:all)
  end

  def new
    @user = User.new
   #redirect_to user_path
  end

  def create
    @user = User.new(params[:user])
    @user.save
    #redirect_to 'http://localhost:3000/user/show'
  end

  def self.authenticate( password)
    #user = User.find_by_name(name)

    if user.find_by_password(password)#match_password(password)
      return true
    else
      return false
    end
  end

 def self.match_password(password="")
   encrypted_password == BCrypt::Engine.hash_secret(password, salt)
 end  
end 
```

session 类有 create 方法，该方法调用用户的 authenticate fn。这是创建方法

```
def create
   user = User.find_by_name(params[:session][:name].downcase)

   if user && user.authenticate(params[:session][:password])
     # Sign the user in and redirect to the user's show page.
     sign_in user
     redirect_to user
   else
     flash.now[:error] = 'Invalid email/password combination' # Not quite right!
     render 'new'
   end
end 
```

这是堆栈

```
Started POST "/sessions" for 127.0.0.1 at Sun Sep 30 15:21:02 -0400 2012
Processing by SessionsController#create as HTML
  Parameters: {"commit"=>"Sign in", "session"=>{"name"=>"ar", "password"=>"[FILTERED]"}, "authenticity_token"=>"vxYHw/4JV2fJuvvBN4GVLv31aBl8ETEtQPBB/483q/Q=", "utf8"=>"✓"}
  User Load (0.5ms)  SELECT "users".* FROM "users" WHERE "users"."name" = 'ar' LIMIT 1
Completed 500 Internal Server Error in 4ms

NoMethodError (undefined method `authenticate' for #<User:0xb69650e4>):
  app/controllers/sessions_controller.rb:10:in `create' 
```

提前致谢，A。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T07:45:31.353

这个块应该在你的用户模型中而不是在 UserController 中：

```
def self.authenticate( password)
  #user = User.find_by_name(name)

  if user.find_by_password(password)#match_password(password)
    return true
  else
    return false
  end
end 
```

原因是您想调用`.authenticate`User 对象的实例，这是在模型中发生的事情。

控制器中的函数通常用于处理请求，例如响应访问您应用程序上的 URL 的人`/users/123/authenticate`（在这种情况下，这不是您想要的）。

# android - Android将连续整数添加到一个textview中

> ID：12792201
> 
> 赞同：-1
> 
> 时间：2012-10-09T02:48:23.410
> 
> 标签：android

我有 10 个按钮 1-0 和一个名为“显示”的文本视图。我有成功的编码程序来添加和减去单个数字的 textView。我需要能够按下按钮让 inegers 一个接一个地显示在文本视图中。因此，如果我按按钮 1 三次，我希望文本视图显示 111 而不是 3。

我的代码是这样的：

```
one.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            subtotal = 1;
            if (variable1==1) { counter++;} 
            else if (variable1==2) { counter--; }
            display.setText(""+counter);
        }
    });

    two.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            variable1 = 1;

            display.setText("ADD");
        }

        private void then(int i) {
            // TODO Auto-generated method stub

        }
    });

    three.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            variable1 = 2;
            display.setText("SUBTRACT");
        }
    }); 
```

我只是想单独按下我的 1-0 按钮并填充 textView 没有总计，直到我继续代码...... =？

非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T02:59:34.567

这是我要做的：

```
one.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {

        String text = (String)display.getText();
        text = text + "1";
        display.setText(text);
    }
}); 
```

你可以对 2,3,4 做类似的事情......

不确定这是你想要的。

编辑：

如果你的按钮有文本“1”，你可以做这样的事情。

```
one.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        Button btn = (Button)v;
        CharSequence text = display.getText();
        text = text + btn.getText();
        display.setText(text);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T03:01:46.297

```
String num = "";   // Declare num outside of the block
one.setOnClickListener(new View.OnClickListener() {

public void onClick(View v) {

    num = num + display.getText().toString();// here is the logic which you are looking for..
    display.setText(num);
}
}); 
```

# python - 为什么我的二分算法不起作用？Python

> ID：12792208
> 
> 赞同：1
> 
> 时间：2012-10-09T02:49:37.630
> 
> 标签：python, bisection

我正在为我的 Python 课程编写一个信用卡支付计算器。任务是为计算器编写一个定义，该计算器计算出在 x 个月内使您的余额为零所需的每月付款。

该定义采用 3 个参数：initialBalance、apr、months。

据我所知，作业的重点是让我们使用二分法来找到我们的答案，我还写了另外两个有助于作业的定义：

1) newBalance() - 确定付款后的新余额；2) balances() - 在付款后返回余额列表；

鉴于此，balances()[-1] 返回最终余额，因此我的行动计划是评估列表中的最后一项等于 0（或至少在 0 的 0.005 以内！），如果是，则返回让我到达那里的付款。

如果最终余额为负数（我付出了太多！）：付款=付款-（付款/ 2）；如果余额为正（我还没有付足够的钱！）：付款=付款+（付款/2）；

尽我所能，我的算法最终应该得出结论，但它永远找不到足够接近的答案......

这是我的代码，（最后是教授的测试定义）：

```
def newBalance(prevBalance, apr, payment):
    """
    - prevBalance: the balance on the credit card statement.
    - apr: the annual percentage rate (15.9 here means 15.9%).
    - payment: the amount paid this month to the credit card company.
    - returns: the new balance that will be owed on the credit card
      (assumes no purchases are made). 
    """
    interestCharge = float(((apr / 12.0) / 100) * prevBalance)
    return float((interestCharge + prevBalance) - payment)

def balances(initialBalance, apr, payments):
    """
    - initialBalance: the initial balance on the credit card.
    - apr: the annual percentage rate (15.9 here means 15.9%).
    - payments: a list of monthly payments made on the credit card.
    - returns: a list giving the balance on the credit card each
      month. The first number in the list is the initial
      balance, the next number is the balance after the first
      payment is made, and so on. Note that the length of the returned
      list is len(payments) + 1.
      """
    balancelist = []
    balancelist.append(initialBalance)
    for x in range(0, len(payments)):
        balancelist.append(newBalance(balancelist[x], apr, payments[x]))
    return balancelist

def findMonthlyPayment(initialBalance, apr, months):
    """
    - initialBalance: the starting balance on the card.
    - apr: the APR.
    - months: the number of equal monthly payments you wish to
      make in order to reduce the balance to zero.
    - returns: the monthly payment amount needed to reduce the
      balance to zero (well, "zero" to within $0.005, anyway)
      in the given number of months.
    """
    guess = float(initialBalance / months)
    listo = months*[guess]

    while True:

        if abs(float(balances(initialBalance, apr, listo)[-1]) - initialBalance) < 0.006:
            print "BINGO", guess  ##for debugging
            print balances(initialBalance, apr, listo)[-1]
            return guess

        else:
            if float(balances(initialBalance, apr, listo)[-1]) < -0.005:
                guess = guess - (guess / 2)

                print "BOO", guess ##for debugging
                print balances(initialBalance, apr, listo)[-1]

            else:
                guess = guess + (guess / 2)
                print "NAY", guess  ##for debugging
                print balances(initialBalance, apr, listo)[-1]

        listo = months*[guess]

def testFindMonthlyPayment():
    answer = findMonthlyPayment(1000, 18.9, 60)
    print
    myString = "Monthly payment to pay off $%.2f in %d months at %.2f%% APR:"
    print myString % (1000, 60, 18.9)
    print "$%.2f" % answer
    # Output should look approximately like this:
    """
    iteration: 1 guess: 500.0 final bal: -46777.3384635
    iteration: 2   guess: 250.0   final balance: -22111.7016729
    iteration: 3   guess: 125.0   final balance: -9778.88327752
    iteration: 4   guess: 62.5   final balance: -3612.47407985
    iteration: 5   guess: 31.25   final balance: -529.269481021
    iteration: 6   guess: 15.625   final balance: 1012.3328184
    iteration: 7   guess: 23.4375   final balance: 241.531668687
    iteration: 8   guess: 27.34375   final balance: -143.868906167
    iteration: 9   guess: 25.390625   final balance: 48.83138126
    iteration: 10   guess: 26.3671875   final balance: -47.5187624535
    iteration: 11   guess: 25.87890625   final balance: 0.656309403241
    iteration: 12   guess: 26.123046875   final balance: -23.4312265251
    iteration: 13   guess: 26.0009765625   final balance: -11.387458561
    iteration: 14   guess: 25.9399414062   final balance: -5.36557457885
    iteration: 15   guess: 25.9094238281   final balance: -2.35463258781
    iteration: 16   guess: 25.8941650391   final balance: -0.849161592282
    iteration: 17   guess: 25.8865356445   final balance: -0.0964260945206
    iteration: 18   guess: 25.8827209473   final balance: 0.27994165436
    iteration: 19   guess: 25.8846282959   final balance: 0.0917577799204
    iteration: 20   guess: 25.8855819702   final balance: -0.00233415730086

    Monthly payment to pay off $1000.00 in 60 months at 18.90 APR:
    $25.89
    """ 
```

谢谢您的帮助。除非我用谷歌搜索的所有内容都在 stackoverflow 上，否则可能不会加入 compsci。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T03:12:40.160

这不是你如何一分为二

```
guess = guess - (guess / 2) 
```

通常你会保留一个 low_guess 和一个 high_guess。你试试

```
guess = (low_guess+high_guess)/2 
```

然后根据结果，您可以设置

```
low_guess = guess 
```

或者

```
high_guess = guess 
```

并重复

注意：在 Python2 中，`/`如果分母和分子都是整数，则为整数除法，因此最好确保初始`guess`值是浮点数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T03:51:17.437

```
def findMonthlyPayment(initialBalance, apr, months):
    """
    - initialBalance: the starting balance on the card.
    - apr: the APR.
    - months: the number of equal monthly payments you wish to
      make in order to reduce the balance to zero.
    - returns: the monthly payment amount needed to reduce the
      balance to zero (well, "zero" to within $0.005, anyway)
      in the given number of months.
    """
    low_guess = 0
    high_guess = initialBalance
    guess = float((low_guess + high_guess) / 2)
    listo = months*[guess]

    while True:

        if abs(float(balances(initialBalance, apr, listo)[-1])) < 0.006:
            print "BINGO", guess  ##for debugging
            print balances(initialBalance, apr, listo)[-1]
            return guess

        elif float(balances(initialBalance, apr, listo)[-1]) < -0.005:
            high_guess = guess
            print "BOO", guess ##for debugging
            print balances(initialBalance, apr, listo)[-1]

        else:
            low_guess = guess
            print "NAY", guess  ##for debugging
            print balances(initialBalance, apr, listo)[-1]
        guess = float((low_guess + high_guess) / 2)
        listo = months*[guess] 
```

# cocoa-touch - UIButton：自动高度调整的问题

> ID：12792209
> 
> 赞同：0
> 
> 时间：2012-10-09T02:49:39.930
> 
> 标签：cocoa-touch, uibutton

我有一个 UIButton，其标题不断变化，有时，我设置它的字符串超出了框架的范围。这是我看到的问题的硬编码示例。

![有问题的问题](../Images/a127292803f60c0e8d1cb45b24aefcb3.png)

我希望宽度保持不变，文字要换行，高度要相应调整。到目前为止，第三个没有运气。这是我目前用于设置按钮标题的代码：

```
[self.button    setTitle:@"The quick brown fox jumps over the lazy dog, the quick brown fox jumps over the lazy dog"
            forState:UIControlStateNormal];
[self.button sizeToFit];
[self.button setNeedsDisplay]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T01:18:08.043

我最终做的是为按钮的高度约束创建一个 IBOutlet（不知道我可以这样做）并将常量设置为 self.button.titleLabel.height。

# javascript - jQuery offset() 为折叠以下的元素返回 null

> ID：12792211
> 
> 赞同：2
> 
> 时间：2012-10-09T02:49:56.170
> 
> 标签：javascript, jquery, lazy-loading

我怀疑我在这里误解了一些东西，但我想确保我没有疯。我有一些延迟加载一些图像的 JS。这是我正在做的一个截断版本：

```
jQuery(window).scroll(function() {
    self.image_holders = jQuery('.image-holder');
    jQuery.each(self.image_holders, function(i, placeholder){
        if ( jQuery(placeholder).offset() ){
            //compare offsets and load image if appropriate
        }
    });                
}); 
```

位于首屏下方甚至部分位于首屏下方的匹配元素正在返回`null`for `offset()`。我想要完成的是在用户滚动到文件夹之前加载文件夹下方某个阈值内的图像。这是 jQuery 的预期行为吗？如何在偏移量出现在首屏之前获取它们的值？

编辑：为了澄清这些元素，我需要的偏移量不是隐藏或不可见的，它们只是“首屏下方”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T02:52:08.993

就在[文档](http://api.jquery.com/offset/)中：

> 注意：jQuery 不支持获取隐藏元素的偏移坐标或考虑在 body 元素上设置的边框、边距或填充。
> 
> 虽然可以通过 visibility:hidden 设置获取元素的坐标，但 display:none 被排除在渲染树之外，因此具有未定义的位置。

# bash - Bash - 获取包含空格的整个文件名

> ID：12792212
> 
> 赞同：1
> 
> 时间：2012-10-09T02:50:09.847
> 
> 标签：bash

我有一个文件夹，其中有几个文件：

```
a b.jpg
c d.jpg 
```

基本上，我想列出文件并对它们进行一些操作，但是我没有做到：

`for i in $( ls $folder ); do echo $i; done`

每一行输出都是文件名的一部分，而不是整个文件名：

```
a
b.jpg
c
d.jpg 
```

我怎样才能在 Bash 中避免这种情况，

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T02:59:40.937

```
for i in $folder/*; do echo "$i"; done 
```

或者：

```
( cd $folder; for i in *; do echo "$i"; done ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T02:53:14.623

我确信有一种更优雅的方法可以做到这一点，但这是我通常的做法：

```
ls $folder | while read filename; do
  echo $filename
done 
```

# c# - 时间到时 C# 进程和线程终止 - 等待计时器

> ID：12792214
> 
> 赞同：0
> 
> 时间：2012-10-09T02:50:36.287
> 
> 标签：c#, multithreading, process, timer

我正在尝试创建以下效果：

我有 x 个线程同时运行，我希望它们在计时器关闭时全部停止。

我唯一能想到的就是拥有一个共享的布尔值，该值会在时间到时发生变化。有谁知道如何使用线程计时器和 AutoResetEvent 来做到这一点？

我很难找出如何使用 Autoreset 事件...

您知道实现此效果的更好方法吗？

流程呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T03:57:01.357

与其共享布尔值，不如使用[ManualResetEvent](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)并让每个线程等待它。

```
private static void ThreadDelegate(object state)
{
    object[] stateArray = (object[])state;
    ManualResetEvent resetEvent = (ManualResetEvent)stateArray[0];

    //Do some work.
    ...

    resetEvent.WaitOne();
} 
```

这将阻塞线程，直到您调用`resetEvent.Set();`我想对此的最佳答案实际上取决于您如何构建代码。我的建议取决于`//Do some work`做一些事情，比如创建一个`Timer`并在某个时间间隔调用一个回调。

# javascript - 输入更改不起作用时的Jquery触发器

> ID：12792220
> 
> 赞同：0
> 
> 时间：2012-10-09T02:51:55.950
> 
> 标签：javascript, jquery, html, forms

当用户更改我的输入中的值时，我正在尝试使用 Jquery 来触发事件。

这应该很容易，但是，我尝试了所有方法，但没有一个对我有用。

这是我的 HTML：

```
<input id="size" type="text" name="Size[mm]" style="width:40px; margin-top:5px; padding-left:10px;" value="1.00" maxlength="6" size="10"> 
```

这是我的 jQuery：

我试过：

```
<script>
$('#size').bind('keyup mouseup change',function(){
       alert('Yeah!');
});
</script> 
```

和

```
<script>
$("input#size").change(function(){
          alert('Yeah!');
}).change();
  </script> 
```

和

```
<script>
$("#size").change(function(){
          alert('Yeah!');
});
</script> 
```

但是，这些都不起作用，在我的 Firebug 中也没有发生任何事情。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T02:55:13.217

如果它们不起作用，则可能是在呈现元素之前添加了事件处理程序。使用[准备好的文件](http://api.jquery.com/ready/)。

```
<script>
    $( function(){
        $('#size').bind('keyup mouseup change',function(){
            alert('Yeah!');
        });
    });
</script> 
```

# jsf - 如何升级 GlassFish 中的 JSF API？

> ID：12792222
> 
> 赞同：6
> 
> 时间：2012-10-09T02:52:09.267
> 
> 标签：jsf, glassfish, glassfish-3

我[下载](http://javaserverfaces.java.net/download.html)了具有`javax.faces-2.1.13`最新二进制版本的二进制文件。我想升级我的 GlassFish JSF 库，但它有`jsf-api-jar`和其他 impl。如何更新以及在哪里下载 jars？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T11:00:37.767

只需将Glassfish 文件夹中的*和* `jsf-api.jar`替换为单个文件即可。`jsf-impl.jar``/modules``javax.faces.jar`

自 Mojarra 2.1.6 以来，构建系统已更改为符合 Java EE Maven 规则，另请参见[issue 2028](http://java.net/jira/browse/JAVASERVERFACES-2028)。这导致 API 和 impl 被合并到一个 JAR 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-04T02:47:33.390

如果您在替换 glassfish/modules 文件夹中的 faces 文件后遇到一些问题，例如您的框架版本与 jsf 2.2、2.3 等不兼容（例如“icefaces 4.1.1 error 200 during update: javax.faces.viewstate not found ") 或一些意外行为 - 不要忘记清理 glassfish/domains/somedomain/osgi-cache

# javascript - 通过javascript将用户发送到页面底部

> ID：12792236
> 
> 赞同：1
> 
> 时间：2012-10-09T02:55:37.587
> 
> 标签：javascript

我正在尝试将用户发送到页面底部

通过 javascript

我正在尝试这段代码

```
window.scrollTo(0,document.body.scrollHeight); 
```

这没用

但如果我尝试

```
window.scrollTo(0,9999999999999999); 
```

它工作得很好

页面高度是否可以大于`9999999999999999`？

还是有更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T02:57:17.333

试试这个：

```
document.body.scrollTop = document.body.scrollHeight;
document.documentElement.scrollTop = document.documentElement.scrollHeight; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T02:57:23.637

您可以随时将它们发送到`Number.MAX_VALUE`，这保证是最大的可能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-24T06:18:56.313

对于在 Selenium 中向下滚动，请使用以下代码：

```
JavascriptExecutor jse = (JavascriptExecutor) driver;  
// (driver is your browser webdriver object)
jse.executeScript("window.scrollBy(0,document.body.scrollHeight || document.documentElement.scrollHeight)", ""); 
```

对于向上滚动使用下面的代码：

```
jse.executeScript("window.scrollBy(0,-document.body.scrollHeight || -document.documentElement.scrollHeight)", ""); 
```

# c++ - 向量中不存在 C++ 字符串成员变量

> ID：12792237
> 
> 赞同：4
> 
> 时间：2012-10-09T02:56:02.203
> 
> 标签：c++, pointers, vector

我正在创建一个包含指向基类的指针的向量。在这个向量中，我动态存储指向包含一些成员变量的派生类的指针，其中一个是字符串变量名。

```
#include "stdafx.h"
#include <iostream>
#include <vector>
#include <string>
#include <cstdlib>

bool hasDirection = false;
bool hasDiameter = false;
int direction;
float diameter;
int starDimension = 0;
int animalDimension = 0;
int fishDimension = 0;
 class MovingObject
{
protected:
    std::string name;
    int direction;
    float diameter;
    int dimension;
    float movingSpeed;

public:
    std::string getName(){ return name;};
    int getDirection(){ return direction;};
    float getDiameter(){ return diameter;};
    float getMovingSpeed(){ return movingSpeed;};
    int getDimension(){ return dimension;};
    void setName(std::string v){ name = v;};
    void setDirection(int d){ direction = d;};
    void setDiameter(float f){ diameter = f;};
    void setMovingSpeed(float s){ movingSpeed = s;};
    void setDimension (int d){ dimension = d;};
    virtual void PrintContents()=0;
};

static std::vector<MovingObject*> data;

class starObject : public MovingObject
{
public:
    void PrintContents()
    {
        std::cout << "(" << getName() << "," << getDiameter() << "," << getDirection() << ")";
    }
};

class animalObject : public MovingObject
{
public:
    void PrintContents()
    {
        std::cout << "(" << getName() << "," << getDiameter() << "," << getDirection() << ")";
    }
};

class fishObject : public MovingObject
{
public:
    void PrintContents()
    {
        std::cout << "(" << getName() << "," << getDiameter() << "," << getDirection() << ", [" << getDimension() << "], " << getMovingSpeed() << ")";
    }
}; 
```

我后来在一个主函数中设置了所有这些成员变量。问题是当我尝试输出成员变量的内容时，除了字符串名称之外，它们都显示出来。现在，我已检查以确保在调用 PrintContent() 方法之前设置了字符串，并且它显示该值在向量中。但是，当我通过代码进行调试时，该值不再存在，而是包含一个空字符串。

有更好的 c++ 知识的人可以向我解释为什么会这样吗？这是主要课程：

```
int main()
{
        std::string type;
        Reader reader;

        while (!std::cin.eof())
        {
            try
            {
                std::string type;
                std::cin >> type;

                if (type =="int")
                {
                    reader.ReadDirection();
                }
                else if (type =="float")
                {
                    reader.ReadDiameter();
                }
                else if (type == "string")
                {
                    std::string name;
                    std::cin >> name;

                    if (hasDirection && hasDiameter)
                    {
                        int dimension;
                        if (diameter > 0 && diameter < 10)
                        {   
                            //fish
                            fishObject fish;
                            fish.setName(name);
                            fish.setDiameter(diameter);
                            fish.setDirection(direction);

                            dimension = fishDimension;
                            fishDimension += 50;
                            fish.setDimension(dimension);
                            fish.setMovingSpeed(0.1);
                            data.push_back(&fish);
                        }
                        else if (diameter >= 10 < 500)
                        {
                            //animal
                            animalObject animal;
                            animal.setName(name);
                            animal.setDiameter(diameter);
                            animal.setDirection(direction);

                            dimension = animalDimension;
                            animalDimension += 800;
                            animal.setDimension(dimension);
                            animal.setMovingSpeed(5.0); 
                            data.push_back(&animal);
                        }
                        else if (diameter >=500)
                        {
                            //star
                            starObject star;
                            star.setName(name);
                            star.setDiameter(diameter);
                            star.setDirection(direction);

                            dimension = starDimension;
                            starDimension += 5000;
                            star.setDimension(dimension);
                            star.setMovingSpeed(30.0);
                            data.push_back(&star);
                        }

                    }
                    else
                    {
                        throw (IncompleteData(name));
                    }
                }
            }
            catch (IncompleteData e)
            {
                std::cerr << "No diameter or direction given for object " << e.objectName << "\n";
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T03:12:01.473

您推送到`data`向量的对象是本地的，因为它们是在 if/else 块中声明的（请参阅`fish`and的声明`animal`）。

当您将此类对象的地址推送到向量时，它将继续指向本地对象，该对象在本地范围的末尾不再存在。您需要创建超出本地范围的对象。一种方法是在堆上创建本地对象的副本并将它们推送到向量：

```
data.push_back(new fishObject(fish)); 
```

当然，这意味着您会发生内存泄漏，除非您确保在程序结束前的某个时间明确删除向量的元素。避免考虑这一点的通常建议是使用向量`std::unique_ptr<MovingObject>`而不是裸指针向量。

# floating-point - IEEE 浮点表示的数值

> ID：12792238
> 
> 赞同：2
> 
> 时间：2012-10-09T02:56:03.063
> 
> 标签：floating-point, binary, ieee

我正在准备考试，我很困惑在浮点代表中找到“V”（表示的数值）和“f”分数

让我们使用这个
16 位的例子：

`|S (1 bit)|exp( 7 bit)|M (8 bit)|`

查找：
exp：通过将指数字段视为无符号整数
`E`表示的值：偏置后的指数
`M`值：显着
`V`的值：表示
`f`的数值：分数的值

开始于：10.0000001

1.  找到我们的偏差：2^(k-1)-1，偏差 = 2(^6)-1 = 63
2.  移位小数：1.00000001，E = 1 从 2^1 移位
3.  M在小数点右边，M = 00000001
4.  求 exp = E = exp - Bias, exp = 64
5.  当查看小数点后的位时，符号位为 0

到目前为止这是正确的吗？

所以我们的 fp 代表是：`0100000000000001 Hex: 0x4001`

现在我的问题是什么是 f 和 V？

我知道 V 是从中找到的，`-1^s*M*2^E`但我似乎有些搞砸了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:57:28.530

*V*是您开始时的值， 10.0000001 [2]。*要么V*的公式不正确（它应该用*f*代替*M*，所以*V* = (-1) ² · *f* ·2 ^(*E*)）或者*M*的定义不正确（它应该是整个分数，而不是带有最初的 1 被删除）。

*f*是表示的小数部分。对于正常值，*f* = 1+ *M*。（对于次正规值，*f* = 0+ *M*。）因此，在此示例中，*f*为 1.00000001 [2]。

此外，符号位不取自小数点右侧的位。如果数字为正数，符号位为 0，如果数字为负数，则符号位为 1。

# css - 如何制作css类映射

> ID：12792239
> 
> 赞同：2
> 
> 时间：2012-10-09T02:56:04.107
> 
> 标签：css, google-closure-stylesheet

任何人都可以帮我解释有关如何使用闭包样式表的更多细节。

我想重命名我的 css 类变得更简单

例如我有一个css文件

```
.long-class {
      font-weight : bold;
      color : red;
}
.another-class .and-long {
      background-color : #FFFFF;
} 
```

像这样变得更简单

```
.a-b {
      font-weight : bold;
      color : red;
}
.c-b .d-a {
      background-color : #FFFFF;
} 
```

我已经阅读了这个[文档](http://code.google.com/p/closure-stylesheets/#Renaming)，但我没有发现[文档](http://code.google.com/p/closure-stylesheets/#Renaming)很清楚。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:30:00.453

也许你应该使用[http://lesscss.org/](http://lesscss.org/)

# java - 蛇游戏Java Gui

> ID：12792243
> 
> 赞同：2
> 
> 时间：2012-10-09T02:56:50.607
> 
> 标签：java, swing, jpanel, actionlistener, keylistener

您好我最近开始开发一个蛇游戏。我处于开始阶段，我有一个移动的物体和一个可以吃的点，但我的主要问题是如何检查蛇是否“吃”了这个点，我怎样才能让它消失？
任何帮助将不胜感激。

这是以下代码：

```
import java.awt.event.ActionEvent;    
import java.awt.event.ActionListener;    
import java.awt.event.KeyEvent;    
import java.awt.event.KeyListener;    
import javax.swing.*;    
import java.awt.*;    
import java.util.Random;    
import javax.swing.JPanel;

public class Gui extends JPanel implements ActionListener,KeyListener{

    Random rnd= new Random();

 int pointx=100 + (int)(Math.random() * ((400- 100) + 1));;

 int pointy=100 + (int)(Math.random() * ((300 - 100) + 1));

 private String text;

    Timer tm = new Timer(5, this);

    int x = 300, y = 178, velx = 0, vely = 0;

      public Gui() 
      {
          tm.start();

          addKeyListener(this);

          setFocusable(true);

      }
      public void paintComponent(Graphics g) {
            super.paintComponent(g);
            g.setColor(Color.green);
            g.fillRect(x, y, 35, 15);
            g.setColor(Color.BLACK);
            g.fillOval(pointx,pointy, 20,20);

        }

      public void keyPressed(KeyEvent e)
      {
          int c = e.getKeyCode();
          if (c == KeyEvent.VK_LEFT)
          {
              velx = -1;
              vely = 0;
          }
          if (c == KeyEvent.VK_UP)
          {
              velx = 0;
              vely = -1;
          }
          if (c == KeyEvent.VK_RIGHT)
          {
              velx = 1;
              vely = 0;
          }
          if (c == KeyEvent.VK_DOWN)
          {
              velx = 0;
              vely = 1;
          }
      }

      public void actionPerformed(ActionEvent e)
      {
          x += velx;
          y += vely;
          repaint();
          borders(e);

      }
      public void borders(ActionEvent e) {
          if (x < 0) {
              velx = 0;
              x = 0;
              JOptionPane
                      .showMessageDialog(null, "you hit the borders you lost!");
              System.exit(0);
          }
          if (x > 530) {
              velx = 0;
              x = 530;
              JOptionPane
                      .showMessageDialog(null, "you hit the borders you lost!");
              System.exit(0);
          }
          if (y < 0) {
              velx = 0;
              y = 0;
              JOptionPane
                      .showMessageDialog(null, "you hit the borders you lost!");
              System.exit(0);
          }
          if (y > 330) {
              velx = 0;
              y = 330;
              JOptionPane
                      .showMessageDialog(null, "you hit the borders you lost!");
              System.exit(0);

          }
      }
      public static void main(String[] args)
      {
         JFrame frame = new JFrame("gui");
          frame.add(new Gui());
          frame.setVisible(true);
          frame.setSize(600, 400);
         frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

      } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T03:09:21.470

首先要做的事情：您的 GUI 应该与您的游戏逻辑分开。

基本上，您需要一个或多个类来封装游戏状态。这个 GameState 类有一个函数，它返回一个要绘制的圆列表，以及另一个接受输入的函数。GUI 类处理设置面板和执行绘制请求。然后事情变得非常简单。要使一个点消失，只需将其从列表中删除即可。要检查两个物体是否发生碰撞，请比较它们的位置。

实际上，不久前我自己用 Java 制作了一个 Snake 游戏。这是我的课程列表。请记住，这只是一个建议：您需要更多或更少的课程，具体取决于个人喜好和游戏的复杂性。

*   GameInstance - 保存游戏逻辑
*   GameWindow - gui 部分
*   MainLoop - 设置事件循环
*   Snake - 保存有关蛇的信息
*   Pnt2 - 一个二维点，具有加法、减法、距离测试等逻辑

显然，这只是做事的一种方法，但这是我推荐的方法。

# multiline - 正则表达式换行符错误

> ID：12792244
> 
> 赞同：0
> 
> 时间：2012-10-09T02:56:57.630
> 
> 标签：multiline

我试图让我的正则表达式跨多行工作，“m”似乎也不起作用。所以，我的正则表达式适用于第一行，而不适用于以下几行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T03:03:11.970

您可以跳过该`match`部分，只需一步完成所有操作：

```
> "the  *text* is to be replaced \n by *text*".replace(/\*([\s\S]*?)\*/g, '<i>$1</i>');
"the  <i>text</i> is to be replaced \n by <i>text</i>" 
```

*   `.`匹配任何字符，但不包括换行符。`[\s\S]`匹配任何字符*，包括*换行符。

*   我将您的搜索正则表达式更改为`\*([\s\S]*?)\*`，它非贪婪地匹配星号之间的内容。

*   替换字符串是`<i>$1</i>`. `$1`替换为第一个捕获组的内容，即您的文本。

另外，因为看起来您正在尝试将 Markdown 转换为 HTML，请尝试使用预制的 JS 转换器：[http ://www.showdown.im/](http://www.showdown.im/)

* * *

你可以像这样使用它：

```
var str = "the  *text* is to be *replaced \n by* *text*";

alert(str.replace(/\*([\s\S]*?)\*/g, '<i>$1</i>')); 
```

# c# - 如何使用 Windows 服务跟踪数据库活动

> ID：12792256
> 
> 赞同：0
> 
> 时间：2012-10-09T02:59:30.203
> 
> 标签：c#, asp.net, windows-services

在这里，我目前在我的 SQL Server 2008 DB 中有一些日期值。当日期值等于当前日期时，我想向特定邮件地址发送电子邮件警报。想象一下一个自动化的生日祝福软件。

这是我用于电子邮件功能的代码。它可以正常工作。

```
private void sendMailMessage()
        {
            try
            {

                MailMessage myMessage = new MailMessage();
                myMessage.From = new MailAddress("noreply@somewhere.com", "Online Alert System");
                myMessage.To.Add(new MailAddress("someone@somewhere.com"));
                myMessage.Subject = "Test Mail";
                myMessage.Body = "This is test mail from OAS.";
                myMessage.IsBodyHtml = true;

                SmtpClient mySmtpClient = new SmtpClient();
                mySmtpClient.Host="smtp.gmail.com";
                mySmtpClient.Port= 587;
                mySmtpClient.Credentials = new NetworkCredential("noreply@somewhere.com", "password");
                mySmtpClient.EnableSsl = true;
                mySmtpClient.Send(myMessage);
            }

            catch (Exception ex)
            {
                throw new Exception(ex.Message);
            }

        } 
```

但我想使用寡妇服务来做到这一点。请解释我该怎么做。在这种情况下，我对 Windows 服务知之甚少。

提前致谢..！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:03:52.820

```
 // try the following code  
 //in app.config add the following key
 // <add key="starttime" value="00.00"/>
    public static System.Timers.Timer Timer;
     Double _timeinterval;
    public static bool IstimerEnabled = false;
      protected override void OnStart(string[] args)
    {
        try
        {
            Timer = new System.Timers.Timer();
            string starttime = Convert.ToString(System.Configuration.ConfigurationManager.AppSettings["starttime"]);
           double mins = Convert.ToDouble(starttime);
            DateTime t = DateTime.Now.Date.AddHours(mins); 
            TimeSpan ts = new TimeSpan();
           ts = t.AddDays(1) - System.DateTime.Now;
            log.WriteEntry("BBPush Service timespan ts--" + ts.ToString());
            if (ts.TotalMilliseconds < 0)
            {
               ts = t.AddDays(1) - System.DateTime.Now;
            }
            _timeinterval = ts.TotalMilliseconds;
           Timer.Elapsed += new ElapsedEventHandler(OnTimedEvent);
            Timer.Interval = _timeinterval;
            Timer.Enabled = true;

        }
        catch (Exception ex)
        {
            log.WriteEntry("exception :" + ex.ToString());

        }
        finally
        {
            IstimerEnabled = false;
            Timer.Start();
        }
    }
    protected override void OnStop()
    {
        Timer.Stop();
        Timer.Dispose();

    }
    private void OnTimedEvent(object source, ElapsedEventArgs e)
    {

       // write your code here or call the method that checks the current date with dob in your table ,fetch the matching emailid and call the mail sending method. 
      //after this method timer is set for 24 hrs.
        Timer.Interval = 86400000;
    } 
```

# java - 如何在 Java 中声明一个常量？

> ID：12792260
> 
> 赞同：73
> 
> 时间：2012-10-09T03:00:01.753
> 
> 标签：java, constants

我们总是写：

```
public static final int A = 0; 
```

问题：

1.  是在类`static final`中声明**常量**的唯一方法吗？
2.  如果我改写`public final int A = 0;`，`A`仍然是一个**常量**还是只是一个**实例字段**？
3.  什么是**实例变量**？**实例变量**和**实例字段**有什么区别？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-10-09T03:08:13.800

`final`意味着初始化后该值不能更改，这就是使其成为常量的原因。`static`意味着不是为每个对象中的字段分配空间，而是为类创建一个实例。

因此，`static final`意味着无论创建多少对象，都只有一个变量实例，并且该变量的值永远不会改变。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-10-09T03:05:43.630

1.  您可以将`enum`Java 5 及更高版本中的类型用于您所描述的目的。它是类型安全的。
2.  A 是一个实例变量。（如果它有 static 修饰符，那么它就变成了一个静态变量。）常量只是意味着值不会改变。
3.  实例变量是属于对象而不是类的数据成员。实例变量 = 实例字段。

如果您在谈论实例变量和类变量之间的区别，则每个创建的对象都存在实例变量。而无论创建的对象数量如何，类变量每个类加载器只有一个副本。

Java 5 及以上**`enum`**类型

```
public enum Color{
 RED("Red"), GREEN("Green");

 private Color(String color){
    this.color = color;
  }

  private String color;

  public String getColor(){
    return this.color;
  }

  public String toString(){
    return this.color;
  }
} 
```

如果您希望更改您创建的枚举的值，请提供一个 mutator 方法。

```
public enum Color{
 RED("Red"), GREEN("Green");

 private Color(String color){
    this.color = color;
  }

  private String color;

  public String getColor(){
    return this.color;
  }

  public void setColor(String color){
    this.color = color;
  }

  public String toString(){
    return this.color;
  }
} 
```

访问示例：

```
public static void main(String args[]){
  System.out.println(Color.RED.getColor());

  // or

  System.out.println(Color.GREEN);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-09T03:05:07.587

任何东西`static`都在班级级别。您不必创建实例来访问静态字段/方法。静态变量将在加载类时创建一次。

实例变量是与对象关联的变量，这意味着为您创建的每个对象创建实例变量。所有对象都将拥有自己的实例变量的单独副本。

在您的情况下，当您将其声明为 时`static final`，这只是变量的一份副本。如果您从多个实例更改它，则会更新相同的变量（但是，您有`final`变量，因此无法更新）。

在第二种情况下，`final int a`它也是常量，但是每次创建声明该变量的类的实例时都会创建它。

看看[这个 Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)以获得更好的理解，

# java - Java 中用于 AES 加密的用户输入种子

> ID：12792263
> 
> 赞同：1
> 
> 时间：2012-10-09T03:00:22.097
> 
> 标签：java, aes, seed

所以我一直在编写这个加密文件然后解密的程序，我希望伪随机密钥生成器将用户输入作为种子，以便可以从中创建密钥。请注意，我希望密钥依赖于字符串（即：如果我多次输入种子“hello”，它将每次使用相同的密钥加密文件），因为最终我会将加密和解密函数拆分为两个文件。

这是我的第一次尝试，基于 SecureRandom。还有更多代码，但只有 main 相关：

```
protected static final String ALGORITHM = "AES";

public static void main(String args[]) {

    String stringKey = args[1];
    byte[] seedArray = stringKey.getBytes();
    SecureRandom sRandom = new SecureRandom(seedArray);
    byte[] keyArray = new byte[16];
    SecretKey sKey = new SecretKeySpec(keyArray, ALGORITHM);

    try
    {   

        Encrypter2 encrypter = new Encrypter2(sKey);

        FileInputStream efis = new FileInputStream(args[0]);
        FileOutputStream efos = new FileOutputStream("Encrypted");
        encrypter.encrypt(efis, efos);

        FileInputStream dfis = new FileInputStream("Encrypted");
        FileOutputStream dfos = new FileOutputStream("Decrypted.txt");
        encrypter.decrypt(dfis, dfos);

    } catch (FileNotFoundException e1) {
        System.out.println("File not found.");
        e1.printStackTrace();
    } catch (Exception e) {
        System.out.println(e);
    }
} 
```

现在这将为 Java 1.7 中的字符串输入创建一个唯一键，但在 Java 1.6 中它是随机的。是否有另一种方法可以生成取决于用户输入的字符串的用户种子密钥？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T03:09:23.253

对于 AES 加密，您真正想要的是 16（或 32）字节的数据用作密钥。在这里，您正在获取用户提供的字节，将它们用作随机字节生成器的种子，然后生成一些随机字节。

相反，您可以直接从用户提供的字符串生成字节，而无需使用 SecureRandom。使用“单向”散列算法（如 SHA，代表安全散列算法），您可以将用户提供的字符串转换为您需要的字节数。如果用户提供的 String 相同，则生成的字节将始终相同，而与 JVM 无关。

# eclipse - 直接在项目文件夹中创建包

> ID：12792264
> 
> 赞同：0
> 
> 时间：2012-10-09T03:00:23.290
> 
> 标签：eclipse

几天前我在使用 Eclipse Indigo，我可以直接在我的项目文件夹中成功创建一个包，但我最近将我的版本更改为 Juno，当我创建一个包时，它会创建一个普通文件夹。如果我将它放在源文件夹中，它将创建一个包，但源文件夹是完全没有必要的。有没有办法直接在 Juno 的项目文件夹中创建一个包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T05:54:32.220

这取决于创建 Java 项目的向导中“项目布局”选项的选择值。在您的 Indigo 安装中，您选择了第一个选项，在 Juno 中您使用了第二个选项。

![在此处输入图像描述](../Images/95b98fa1117b98ee20028f83afaa8ccd.png)

之后您仍然可以在 Project Properties -> Build Path -> Source 上更改它。

# c - 无法使用 C 中的 Visual Studio 从双向链表中删除

> ID：12792267
> 
> 赞同：0
> 
> 时间：2012-10-09T03:01:12.977
> 
> 标签：c, visual-studio-2010

你好我目前正在做一个应该读入文件，使用信息，然后打印出另一个文件的作业。全部使用双向链表。目前我正在尝试将文件读入双向链表，将其打印到屏幕和文件上，最后删除列表并关闭程序。只要我不调用应该删除字符串的 dlist_distroy 函数，该程序就可以正常工作。一旦我这样做，程序就会开始运行，然后会弹出一个窗口说

```
"Windows has triggered a breakpoint in tempfilter.exe.

This may be due to a corruption of the heap, which indicates a bug in tempfilter.exe or any of the DLLs it has loaded.

This may also be due to the user pressing F12 while tempfilter.exe has focus.

The output window may have more diagnostic information." 
```

我已经修改了销毁和删除功能，但无法理解问题所在。我的程序如下

主程序

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "dlinklist.h"
#include "DlistElmt.h"
#include "Dlist.h"
#include "dlistdata.h"

/****************************************************************************/

int main (int argc, char *argv[])
{
    FILE *ifp, *ofp;
    int hour, min;
    Dlist *list;
    DlistElmt *current = NULL, *current2 = NULL;
    float temp;

    list  = (Dlist *)malloc(sizeof(list));
    element  = (DlistElmt *)malloc(sizeof(element));

    if (argc != 3) { /* argc should be 3 for correct execution */
        /* We print argv[0] assuming it is the program name */

        /* TODO: This is wrong, it should be: usage: %s inputfile outputfile */
        printf( "usage: %s filename", argv[0] );
    } else {
        // We assume argv[1] is a filename to open
        ifp = fopen(argv[1], "r");
        if (ifp == 0) {
            printf("Could not open file\n");
        } else {
            ofp = fopen(argv[2], "w");
            dlist_init(list);//, (destroy)(hour, min, temp));
            while (fscanf(ifp, "%d:%d %f ", &hour, &min, &temp) == 3) {
                current=list->tail;
                if (dlist_size(list) == 0) {
                    dlist_ins_prev(list, current, hour, min, temp);
                } else {
                    dlist_ins_next(list, current, hour, min, temp);
                }
            }
            current = list->head;
            while (current != NULL) {
                if (current==list->head) {
                    current=current->next;
                } else
                    if ((current->temp > (current->prev->temp +5)) || 
                            (current->temp < (current->prev->temp -5))) {
                        current2 = current->next
                            dlist_remove(list, current);
                        current = current2;
                    } else
                        current=current->next;
            }

            current = list->head;
            while(current != NULL) {
                printf("%d:%d %2.1lf\n",
                    current->time, 
                    current->time2, 
                    current->temp
                );
                fprintf(ofp, "%d:%d %2.1lf\n", 
                    current->time, 
                    current->time2, 
                    current->temp
                );
                current = current->next;
            }
            //dlist_destroy(list);
            //}

            fclose(ifp);
            fclose(ofp);
        }
    }

    getchar();
} 
```

dlistdata.c

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "dlinklist.h"
#include "DlistElmt.h"
#include "dlistdata.h"

/****************************************************************************/

void dlist_init(Dlist *list)
{
    list->size = 0;
    list->head = NULL;
    list->tail = NULL;
    return;
}

void dlist_destroy(Dlist *list) {
    while (dlist_size(list) > 0) {
        dlist_remove(list, list->head);
    }
    memset(list, 0, sizeof(Dlist));

    return;
}

int dlist_ins_next(Dlist *list, DlistElmt *element, const int time, 
        const int time2, const float temp)
{
    DlistElmt *new_element;

    if (element == NULL && dlist_size(list) != 0)
        return -1;
    if ((new_element = (DlistElmt *)malloc(sizeof(new_element))) == NULL)
        return -1;

    new_element->time  = (int)time;
    new_element->time2 = (int)time2;
    new_element->temp  = (float)temp;

    if (dlist_size(list) == 0) {
        list->head = new_element;
        list->head->prev = NULL;
        list->head->next = NULL;
        list->tail = new_element;
    } else {
        new_element->next = element->next;
        new_element->prev = element;

        if (element->next == NULL)
            list->tail = new_element;
        else
            element->next->prev = new_element;
        element->next = new_element;
    }

    list->size++;

    return 0;
}

int dlist_ins_prev(Dlist *list, DlistElmt *element, const int time, 
        const int time2, const float temp)
{
    DlistElmt *new_element;

    if (element == NULL && dlist_size(list) != 0)
        return -1;

    if ((new_element = (DlistElmt *)malloc(sizeof(new_element))) == NULL)
        return -1;

    new_element->time  = (int)time;
    new_element->time2 = (int)time2;
    new_element->temp  = (float)temp;

    if (dlist_size(list) == 0){
        list->head = new_element;
        list->head->prev = NULL;
        list->head->next = NULL;
        list->tail = new_element;
    } else {
        new_element->next = element;
        new_element->prev = element->prev;

        if (element->prev == NULL)
            list->head = new_element;
        else
            element->prev->next = new_element;
        element->prev = new_element;
    }

    list->size++;

    return 0;
}

int dlist_remove(Dlist *list, DlistElmt *element)
{ /*, int time, int time2, float temp){ */

    if (element == NULL || dlist_size(list) == 0)
        return -1;
    if (element == list->head) {
        list->head = element->next;
        if (list->head == NULL)
            list->tail = NULL;
        else
            element->next->prev = NULL;
    } else {
        element->prev->next = element->next;
        if (element->next == NULL)
            list->tail = element->prev;
        else
            element->next->prev = element->prev;
    }

    free(element);

    list->size--;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T03:36:20.813

这条线是个坏消息：

`if (element->next = NULL)`（接近底部`dlistdata.c`）

您分配`NULL`to`element->next`而不是检查它是否是`NULL`。

`==`与`=`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T03:39:42.617

由于这是一项任务，我的回答是为您指明正确的方向，但我不会完全说明。

你觉得这里会发生什么？

```
dlist_remove(list, current);
current = current->next; 
```

# javascript - jQuery 选择器只有一级 div

> ID：12792271
> 
> 赞同：0
> 
> 时间：2012-10-09T03:01:44.403
> 
> 标签：javascript, jquery, jquery-selectors

鉴于此 HTML：

```
​&lt;div class="foo">
    select this
    <div class="foo">​don't select this</div>
</div>
<div class="foo">
    select this
</div> 
```

什么是选择器只抓取第一级的 div，而不是嵌套的？

所以查询`​$('.foo WHATEVER').length`应该返回 2。

请参阅此处的**[jsfiddle](http://jsfiddle.net/marcgrabow/Ge7qL/)**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T03:03:54.440

您可以使用`>`子选择器：

```
$('body > .foo').length; 
```

[http://jsfiddle.net/pSBxv/](http://jsfiddle.net/pSBxv/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T03:04:19.790

也许是这样的？哪里 foo 不是后代？

```
$('.foo').not('.foo .foo').length 
```

[http://jsfiddle.net/DmDBV/](http://jsfiddle.net/DmDBV/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T03:04:05.597

您可以`body`用作父元素并使用[子选择器选择它的子元素](http://api.jquery.com/child-selector/)

```
$('body > .foo').length 
```

[演示](http://jsfiddle.net/Ge7qL/1/)

# java - 如何在局域网中运行java应用程序

> ID：12792274
> 
> 赞同：0
> 
> 时间：2012-10-09T03:02:29.533
> 
> 标签：java, lan

我已经完成了我的应用程序，并且我还将我的代码转换为可运行的 jar 文件并将其转换为 .exe。我的问题是如何配置我的应用程序以便可以在局域网中使用它？

例如，我可以使用我们的一个站来编码或更新一些数据，然后数据将保存到我们的服务器中，如果我愿意，我也可以从另一个站调用这些数据。为了澄清，我想将我的应用程序从服务器部署到其他计算机，以便它们可以在本地运行应用程序（我的应用程序是一个摇摆应用程序）。我是否需要指定要保存数据的路径，如果需要，我应该由谁执行？你能给我一个关于如何实现这个目标的提示吗？

# actionscript-3 - 在动作脚本中连接不显示符号

> ID：12792280
> 
> 赞同：0
> 
> 时间：2012-10-09T03:03:22.820
> 
> 标签：actionscript-3, actionscript, concatenation

我有这个 flash 程序，它应该根据你给它的评级来计算账单的小费。在我的提示百分比框中，我尝试将其连接起来以显示相应的值 + 百分比符号，但百分比符号未显示；只有价值在那里。下面是代码

```
import flash.events.MouseEvent;

var tipTotal:Number = 0;
var split:Number = 0;
var tipPercent:Number = 0;
var bill:Number = 0;
var eachShare: Number = 0;

oneStar.addEventListener(MouseEvent.CLICK, percentPopUp);
twoStar.addEventListener(MouseEvent.CLICK, percentPopUp);
threeStar.addEventListener(MouseEvent.CLICK, percentPopUp);
tipAmount_btn.addEventListener(MouseEvent.CLICK, calculateTip);
share_btn.addEventListener(MouseEvent.CLICK, calculateShare);

function percentPopUp(event:MouseEvent):void /*Tip percentage textbox will be filled with a percentage when a star is clicked on*/
{
    tipPercent = 0;
    if(event.target.name == "oneStar")
    {
        tipPercent = 5;
    }
    if (event.target.name == "twoStar")
    {
        tipPercent = 10;
    }
    if (event.target.name == "threeStar")
    {
        tipPercent = 20;
    }
    tipPercentage.text = tipPercent + "%";

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T05:54:53.530

检查您的嵌入。可能是您忘记在 FLA 中为该字体嵌入“%”。

# objective-c - iOS TableView 结合了静态单元格和动态原型

> ID：12792281
> 
> 赞同：0
> 
> 时间：2012-10-09T03:03:23.510
> 
> 标签：objective-c, ios, uitableview

我有一个`UITableView`正在开发的应用程序。我目前将它设置为使用静态单元格，这样我就可以使用它`UITableView`，就像它由视图上的常规文本字段组成一样，但呈现在漂亮的滚动表格视图中。

虽然这对于应用程序的当前功能非常有用，但我希望能够有一个表格视图，顶部有一个部分，其中包含静态单元格，而底部的另一个部分设置为使用定期`-tableView:cellForRowAtIndexPath:indexPath`使用动态单元原型。

这是可能的，还是这是糟糕的应用程序设计？我的静态单元格应该位于表格视图顶部的某种标题中，还是可以与表格的其余部分一起放入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T03:07:10.400

您不能将静态和动态表视图合并到一个表中。

您最好的选择是创建一个动态表格视图，并通过 cellForRowAtIndexPath 和 willDisplayRowAtIndexPath 例程为相应部分提供代码中的“静态”内容。

# javascript - 如何在 HTML 中显示 jQuery 和 Javascript 生成的二维数组？

> ID：12792283
> 
> 赞同：2
> 
> 时间：2012-10-09T03:03:37.877
> 
> 标签：javascript, jquery, matrix

我正在尝试创建一个包含 100 个随机数的表，随机数从 0 到 100。我需要使用 JS 和 jQuery 在 HTML 中将 100 个随机数显示为 10 x 10 矩阵。我一直在处理的代码显示最后一个数组 10 次。这是代码：

```
<html>
    <head>
        <title>My Web Page</title>
        <script type = "text/javascript" src = "http://code.jquery.com/jquery-1.8.2.min.js" />
        </script>
    </head>
    <body>
        <h1 id = "randData">Randomize Data</h1>
        <button id = "myRandomizeBtn">Randomize</button>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
    </body>
    <script type="text/javascript">
    $("#myRandomizeBtn").bind("click",randomizeHandler);
    function randomizeHandler(evt)
    {
        var n = 10;
        var data = new Array();
        for (var i = 0; i < n; i++)
        {
            for (var j = 0; j < n; j++)
            {
                data[i,j] = Math.floor(100*Math.random());
                $("p").text(data);
            }
            $("br").text(data);
        }
    }
    </script>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T03:09:56.717

我真的不明白你现在是如何打印出数据的。你不能设置 a 的 text 属性`br`。

您现在拥有的方式`$('p')`将选择`p`页面上的所有元素。您可以使用该[`.eq()`](http://api.jquery.com/eq/)函数选择第 i 个`p`元素（每行一个）并设置其文本内容。

[演示](http://jsbin.com/iqolis/2)

```
$("#myRandomizeBtn").bind("click",randomizeHandler);

function randomizeHandler(evt)
{
  var n = 10;
  var data = [];
  for (i=0; i<n; i++)
  {
    data[i] = [];
    for (j=0; j<n; j++)
    {
      data[i][j] = Math.floor(100*Math.random());
    }
    $("p").eq(i).text(data[i]);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T03:09:01.490

添加：

**数据[i] = 新数组（）；**

修改的：

**数据[i][j]** = Math.floor(100*Math.random());

```
 function randomizeHandler(evt)
    {
            var n = 10;
            var data = new Array();
            for (i=0; i<n; i++)
            {
                    data[i] = new Array();
                    for (j=0; j<n; j++)
                    {
                            data[i][j] = Math.floor(100*Math.random());
                            $("p").text(data);
                    }
                    $("br").text(data);
            }
    } 
```

我不明白这一行：

```
$("p").text(data);

$("br").text(data); 
```

如果要访问表格中的单元格，请使用**data[i][j]**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T04:03:05.740

也许这就是你要找的，

css...

```
 table {
        font: 11px/24px Verdana, Arial, Helvetica, sans-serif;
        border-collapse: collapse;
        width: 320px;
        }

    td {
        border: 1px solid #CCC;
        padding: 0 0.5em;
        } 
```

html...

```
 <head>        
    </head>
    <body>
        <div id='mydiv'></div>
        <button id = "myRandomizeBtn">Randomize</button> 
    </body> 
```

javascript....

```
$("#myRandomizeBtn").bind("click",randomizeHandler); 

function randomizeHandler(evt){     
var root=document.getElementById('mydiv');
var tab=document.createElement('table');
tab.className="mytable";
var tbo=document.createElement('tbody');
var row, cell;
var n = 2;  
var data;    

for (i=0; i<n; i++)
{
    row=document.createElement('tr');
    for(var j=0;j<n;j++){
        cell=document.createElement('td');
        data = Math.floor(100*Math.random()); 
        cell.appendChild(document.createTextNode(data));
        row.appendChild(cell);
    }
    tbo.appendChild(row);
}
tab.appendChild(tbo);
root.appendChild(tab);
} 
```

这是一个链接...
[http://jsfiddle.net/ZzuHt/](http://jsfiddle.net/ZzuHt/)

希望能帮助到你...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T03:35:07.213

这是一个工作示例：http: [//jsfiddle.net/VGdpJ/](http://jsfiddle.net/VGdpJ/)

我认为你的问题在这里：

```
data[i,j] which should be ---> data[i][j] 
```

您并没有真正制作这样的二维数组。

您还需要声明 data[i] 处的元素是一个数组（只是为了安全，并不是真正必要的）。IE

```
data[i] = []; 
```

你也在做这个：

```
$("p") which is equal to document.getElementsByTagName("p"); 
```

哪个结果是所有`p`标签的数组！！！这就是为什么*所有* `p`标签都有相同的文本。

玩弄风格：P [http://jsfiddle.net/VGdpJ/1/](http://jsfiddle.net/VGdpJ/1/)

# node.js - 使用节点上的骨干配置 $.ajax 以使用誓言进行测试

> ID：12792289
> 
> 赞同：0
> 
> 时间：2012-10-09T03:04:32.350
> 
> 标签：node.js, backbone.js, webstorm, vows

（经过编辑大大简化）

在节点上，我有以下 server.js 文件。

```
var Backbone = require('backbone');

var Tweet = Backbone.Model.extend({});
var Tweets = Backbone.Collection.extend({
    model : Tweet,
    url: function () {
        return 'http://search.twitter.com/search.json?q=backbone'
}
});

var myTweets = new Tweets();
myTweets.fetch(); 
```

当我运行它时，我收到一条错误消息。“无法调用未定义的方法 'ajax'” (1359:14)

基本上这是 $ 未定义的结果。为什么它是未定义的？好吧，有许多中间步骤，但是当文件加载时，它期望“this”是浏览器中的“window”或服务器上的“global”。在节点 "this" = {​​} 上执行。

所以问题，“我如何将'this'设置为全局”在主干.js文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T03:14:52.517

在 Backbone >= 1.x 上，您可以简单地分配`Backbone.$`而不是使用`Backbone.setDomLibrary`.

### Backbone < 0.9.9 的解决方案

您需要解决的第一个问题是无论如何您如何在 Node 上运行它。Nodejs 是一个服务器端的 JS 环境，但它不包含任何控制 DOM 的逻辑。为此，您需要加载类似 JSDo 的内容。

当您设置了一些 DOM 环境时，您可以将 jQuery 和您的代码加载到其中，它应该像浏览器一样工作。

不过，要具体回答您的问题，将 jQuery 加载到 jQuery`global`中有点丑陋。您应该使用 Backbone 的`setDomLibrary`功能将 $ 设置为您想要的。

尝试这样的事情：

```
if (typeof exports !== 'undefined') {
    MyModels = exports;
    Backbone.setDomLibrary(require('jquery'));
    server = true;
} else {
    MyModels = this.MyModels = {};
} 
```

但是，如果您尝试执行任何 DOM 功能，这将失败。

# xcode - 在带有 Cordova 2.1 的 xcode 4.5 中启动图像不会更新

> ID：12792295
> 
> 赞同：3
> 
> 时间：2012-10-09T03:05:18.727
> 
> 标签：xcode, ios6, cordova

我正在使用 Xcode 4.5, Cordova 2.1 , iPhone4 (IOS6)。添加启动图像非常简单——只需将图像拖到 Project->Summary->Launch Images 窗口即可。

所以我之前设置了一个启动图像并且它起作用了。但是当我拖动一张不同的图像并再次在我的 iPhone 上运行该应用程序时，启动图像仍然与旧图像相同。即使我从“启动图像”窗口中删除了启动图像，旧图像仍会在启动时显示。

我也尝试过清除构建。我试图删除我设备中的应用程序。在模拟器中它运行良好。但在我的 iPhone4（带有 ios6）中它没有。我一次又一次地尝试这个。但我找不到解决方案。

以前，我经常使用我的图像来更改文件夹中的默认启动图像。但这一次，它不起作用。

有人知道这个问题的解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T12:37:36.070

您必须在项目中更改这些图像

```
Splash/Default@2x~iphone
Splash/Default~iphone 
```

要么确保在 Cordova.plist 中有启动画面选项，AutoHideSplashScreen 为 YES。

但是将我的图像以正确的格式放置可以正常工作。对我来说，它首先显示全屏图像，然后显示启动目录的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T16:27:52.640

最后我自己解决了这个问题。按照这些步骤，希望你能成功。

1、准备好你的图片文件并添加到项目文件夹中。记住你应该使用xcode将你的文件添加到组中。

2，编辑您的info.plist文件。添加一个键->“启动图像”，值->“[您的文件名]”；键->“启动图像（iPhone）”->“[您的文件名]”；

尝试测试您的项目。如果它不起作用，您应该编辑您的 CDVViewController.m。（它在 CordovaLib 中（Cordova Lib -> Classes -> Cleaver -> CDVViewController.m ）。

3，在CDVViewController.m中将“默认”替换为您的文件名

好的。现在可以了。

（PS默认的png文件来自哪里......？:-(）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T23:41:47.263

“启动图像与旧图像保持一致” - 不幸的是，这不是 Cordova 的事情，只是 Xcode 和您的设备发生了一些奇怪的事情。尝试重新启动它。对于模拟器，有时它会在人们重置模拟器后为人们修复它。

# javascript - ColdFusion - 检测顶部窗口

> ID：12792296
> 
> 赞同：0
> 
> 时间：2012-10-09T03:05:21.173
> 
> 标签：javascript, iframe, coldfusion, window

ColdFusion 中是否有检测浏览器窗口是否为顶部窗口的功能？（类似于`(if (window == window.top)`JavaScript 中的 ））

我问的原因是因为我想让某些页面元素在用户直接访问页面时出现，如果我的页面是 iframed 则不出现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T05:46:26.590

CFML 代码在 CF 服务器上运行，而关于浏览器窗口的任何考虑显然都在客户端上运行。CF 完全不知道客户端系统的 UI 配置，它看到的只是“一个请求”。事实上，请求甚至不是来自客户端，它们来自充当 CF 服务请求的中间人的 Web 服务器：CF 与客户端本身没有交互。

*Web 服务器*向 CF 提供的唯一与客户端浏览器相关的信息是 CGI 范围内的一些内容，显然这是有限的。而且这些都与浏览器窗口/ iframe 的配置无关。

您将需要使用 Javascript 解决此问题（我将添加到您问题的标签中）。

要在给定的浏览情况下触发不同的代码在 CF 上执行，您需要使用 Javascript 向请求中添加一些信息，以向 CF 识别情况。这可能是在查询字符串上添加一个参数，或者类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:18:59.037

如果有人“包装”我的产品之一，我想知道谁以及如何改进用户和网站所有者的体验。考虑到这一点，我会默认自动跳出任何帧。然后，我将创建一个简单的 api，并向其他网站管理员提供有关包含您的内容的正确方法的说明。一旦您确定您的内容是否正确包含在另一个站点中，就显示不同的内容。对于想要包含您的内容的网站管理员：

1.  为 iFrame 提供推荐的高度/宽度，以便您可以在内容中包含您的徽标或广告。
2.  提供您希望他们包含在查询字符串中的任何内容以帮助跟踪使用情况。
3.  您甚至可以在您的 api 中添加有趣的东西，以使您的内容看起来更加集成到包括网站中，例如对 url.bgcolor 或 url.bgimage 做出反应。

您可以像查找和记录某些 url 变量（如 url.remoteSiteAddress）的值一样简单，也可以像注册站点并提供唯一键一样复杂。当然，在执行密钥时还需要考虑其他因素。由于您并不真正关心内容是否显示在远程站点上，因此我怀疑仅记录一个简单的 url 变量会提高您的速度。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-09T04:48:32.460

如果其他网站将您的页面放在他们网站上的 iframe 中，那么您可以使用该`CGI.HTTP_REFERRER`变量来检查网站域是否属于您，并根据需要加载内容。

# node.js - Connect-Auth vs Everyauth vs Passport vs Authom - 用于实时网络应用程序？

> ID：12792298
> 
> 赞同：1
> 
> 时间：2012-10-09T03:05:25.050
> 
> 标签：node.js, authorization, passport.js, everyauth, socketstream

对于开发实时网络应用程序，它们之间有哪些正面和负面的比较？我`SocketStream`现在用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T22:46:07.523

# php - 使用 javascript 编辑包含文件

> ID：12792299
> 
> 赞同：0
> 
> 时间：2012-10-09T03:05:24.677
> 
> 标签：php, javascript, html, include

我想在我的网站页面上有一个标准菜单。我正在使用包含文件，如下所示：

```
<div class="header box">
<ul class="nav box">
<li class="current" id="home"><a href="index.php" onclick="current('home')">Home</a></li>
<li class="" id="onlineSchedule"><a href="onlineSchedule.php" onclick="current(this)">Online Schedule</a></li>
<li class="" id="partners"><a href="partners.php" onclick="current(this)">Partners/Centers</a></li>
<li class="" id="services"><a href="services.php" onclick="current(this)">Services</a></li>
<li class="" id="products"><a href="products.php" onclick="current(this)">Products</a></li>
<li class="" id="newsHighlights"><a href="newsHighlights.php" onclick="current(this)">News/Highlights</a></li>
<li class="" id="signup"><a href="signup.php" onclick="current(this)">Sign Up!</a></li>
<li class="" id="feedback"><a href="feedback.php" onclick="current(this)">Feedback</a></li>
</ul> 
```

但是我希望每当我单击不同的页面时该类都会更改，因为“当前”类会突出显示菜单中的链接。我该怎么做呢？我在下面尝试了 Javascript 作为 shwon 但它不起作用......提前谢谢

```
function current(page)
{
    //alert(page);
    document.getElementById("home").setAttribute("class", "");
    document.getElementById("onlineSchedule").setAttribute("class", "");
    document.getElementById("partners").setAttribute("class", "");
    document.getElementById("services").setAttribute("class", "");
    document.getElementById("products").setAttribute("class", "");
    document.getElementById("newsHighlights").setAttribute("class", "");
    document.getElementById("signup").setAttribute("class", "");
    document.getElementById("feedback").setAttribute("class", "");

    document.getElementById(page).className += "current";
    var temp = document.getElementById("home").getAttribute("class");
    alert(temp);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:21:54.100

这是工作代码的示例：

```
<style type="text/css">
.current {
    color: red;
}
.current a {
    color: green;
}
</style>
<div class="header box">
<ul class="nav box">
<li class="current" id="home"><a href="index.php" onclick="current('home')">Home</a></li>
<li class="" id="onlineSchedule"><a href="onlineSchedule.php" onclick="current(this)">Online Schedule</a></li>
<li class="" id="partners"><a href="partners.php" onclick="current(this)">Partners/Centers</a></li>
<li class="" id="services"><a href="services.php" onclick="current(this)">Services</a></li>
<li class="" id="products"><a href="products.php" onclick="current(this)">Products</a></li>
<li class="" id="newsHighlights"><a href="newsHighlights.php" onclick="current(this)">News/Highlights</a></li>
<li class="" id="signup"><a href="signup.php" onclick="current(this)">Sign Up!</a></li>
<li class="" id="feedback"><a href="feedback.php" onclick="current(this)">Feedback</a></li>
</ul>
<script type="text/javascript">
function current(page)
{
    document.getElementById("home").setAttribute("class", "");
    document.getElementById("onlineSchedule").setAttribute("class", "");
    document.getElementById("partners").setAttribute("class", "");
    document.getElementById("services").setAttribute("class", "");
    document.getElementById("products").setAttribute("class", "");
    document.getElementById("newsHighlights").setAttribute("class", "");
    document.getElementById("signup").setAttribute("class", "");
    document.getElementById("feedback").setAttribute("class", "");

    document.getElementById(page).className = "current";
}

current("home");
</script> 
```

我假设你也想格式化链接，所以我展示了如何通过添加`.current a { }`你将为当前链接放置 CSS 的位置。`.current { }`主要只会影响列表项。

# php - move_uploaded_file() 在 PHP 中不起作用

> ID：12792320
> 
> 赞同：0
> 
> 时间：2012-10-09T03:09:47.357
> 
> 标签：php

我正在尝试使用此 PHP 脚本上传文件（图像），但出现错误。是的，我知道这里还有其他问题会问同样的问题，但我没有发现其中任何一个有用。

这是我的脚本（简短版）：

```
//*** FILE IS NAMED 'imageUpload' IN THE INC FOLDER ***

$image_name = addslashes($_FILES['image']['name']);
$image_tmpName = $_FILES['image']['tmp_name'];

$location = "usr/profile/$image_name";
move_uploaded_file($image_tmpName,'../img/'.$location); 
```

这是我的文件树（CAPITOLS-folders，lower-file）：

```
1\. IMG
    -USR
        *PROFILE
2\. INC
    -imageUpload.php 
```

我得到的错误：

```
Warning: move_uploaded_file(../img/usr/profile/Cheese.jpg) [function.move-uploaded-file]: failed to open stream: No such file or directory in /home/content/35/9611635/html/chsyearbook/inc/imageUpload.php on line 12

Warning: move_uploaded_file() [function.move-uploaded-file]: Unable to move '/tmp/phpuLkkjE' to '../img/usr/profile/Cheese.jpg' in /home/content/35/9611635/html/chsyearbook/inc/imageUpload.php on line 12 
```

现在这些错误清楚地表明该目录不存在，但我向你保证，我现在正在查看它。

我认为这可能是 PHP.ini 文件的问题。如果是这样，这里是 PHP.ini（为什么不呢，嗯？）

```
max_execution_time = 60;
memory_limit = 256M;
upload_max_filesize = 256M;
post_max_size =  256M; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T03:23:24.023

该函数的 php 手册页上有一些注释，建议在此处使用相对路径不能按预期工作。

[http://us3.php.net/move_uploaded_file](http://us3.php.net/move_uploaded_file)

[编辑]

`getcwd()`在调用 move_uploaded_file 之前尝试使用该函数检查工作目录。这应该告诉您相对路径是...相对于哪个目录。

# zend-framework - Zend 适配器事务回滚失败 MSSQL

> ID：12792324
> 
> 赞同：1
> 
> 时间：2012-10-09T03:11:03.553
> 
> 标签：zend-framework, rollback

我有这个奇怪的错误，我使用 MSSQL 2008 R2 和 ZendFw 1.12

* * *

首先..回滚在尝试中没有失败..

```
 // Zend_DB_Table Adapter
   $adapter = Zend_Db_Table::getDefaultAdapter();

   // Start Transaction
   $adapter->beginTransaction();

   try {
          $adapter->rollBack();
          return (int) 1;
   } catch (Exception $e) {
          throw new Api_Exception($e->getMessage(), $e->getCode(), $e);
   } 
```

* * *

但是..回滚在catch里面失败了..

是的，我故意在尝试下面创建错误以使其进入 catch ..

```
 // Zend_DB_Table Adapter
   $adapter = Zend_Db_Table::getDefaultAdapter();

   // Start Transaction
   $adapter->beginTransaction();

   try {
          return (int) A;
   } catch (Exception $e) {
          $adapter->rollBack();
          throw new Api_Exception($e->getMessage(), $e->getCode(), $e);
   } 
```

* * *

它返回..`Zend_Db_Adapter_Sqlsrv_Exception: A transaction must be started by calling sqlsrv_begin_transaction before calling sqlsrv_commit or sqlsrv_rollback.`

请问有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-06-02T04:44:09.340

嗨去看看这个链接[Rollback in SQL](https://stackoverflow.com/questions/18588471/rollback-in-sql)

您可以使用安全简单的代码来运行 100%（运行所有查询行）或不运行任何代码

```
|query 1| = like insert into or select or ...
|count of lines| = number off query

DECLARE @rowcount int  set @rowcount = 0 ; 
BEGIN TRANSACTION [Tran1]
BEGIN TRY 
 <Query 1> ; set @rowcount = (@rowcount + @@ROWCOUNT); 
 <Query 2> ; set @rowcount = (@rowcount + @@ROWCOUNT); 
...
IF @rowcount =  <count of lines>
  COMMIT TRANSACTION[Tran1]
ELSE
  ROLLBACK TRANSACTION[Tran1]
END TRY
  BEGIN CATCH
  ROLLBACK TRANSACTION[Tran1]
END CATCH 
```

例如，此代码运行 2 插入行查询，但或运行所有他或不运行任何内容和 ROLLBACK

```
DECLARE @rowcount int  set @rowcount = 0 ; 
BEGIN TRANSACTION [Tran1]
BEGIN TRY 
 insert into [database].[dbo].[tbl1] (fld1) values('1') ;
    set @rowcount = (@rowcount + @@ROWCOUNT); 
 insert into [database].[dbo].[tbl2] (fld1) values('2') ;
    set @rowcount = (@rowcount + @@ROWCOUNT); 

IF @rowcount =  2
  COMMIT TRANSACTION[Tran1]
ELSE
  ROLLBACK TRANSACTION[Tran1]
END TRY
  BEGIN CATCH
  ROLLBACK TRANSACTION[Tran1]
END CATCH 
```

# visual-studio-2010 - Web.config 转换 - 缺少的手册

> ID：12792325
> 
> 赞同：7
> 
> 时间：2012-10-09T03:11:10.377
> 
> 标签：visual-studio-2010, xslt, deployment, xpath, web-config

[您可以在这里](http://msdn.microsoft.com/en-us/library/dd465326%28VS.100%29.aspx)和[那里](http://vishaljoshi.blogspot.com/2009/03/web-deployment-webconfig-transformation_23.html)阅读 web.config 转换文档，但是似乎没有人讨论两个白象：

1.  您如何在 a`Condition`或`XPath`转换中执行变量替换，以及...
2.  a`Locator`可以*有意义地*嵌套在 a 中`Transform`吗？

让我举一个可以从这两种选择中受益的例子。假设我有这个：

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
      <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
    </dependentAssembly>
    <dependentAssembly>
      <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
      <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

假设我想完全擦除`dependentAssembly`与 xpath 匹配的节点及其子节点`//runtime/assemblyBinding/dependentAssembly[assemblyIdentity@name='System.Web.Mvc']`。为此，我可能想要这样的东西：

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity 
          name="System.Web.Mvc" 
          xdt:Remove 
          xdt:Locator="Condition(..[*@name=$name])" 
      />
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

`@name=$name`很明显，我根据[xpath 变量概念编写](http://www.w3.org/MarkUp/Forms/wiki/Variables_in_XPath)了语法，但这个例子说明了为什么我想要那个特性。这支持吗？我必须如何调整我的语法以利用这一点？我可以输入一个字符串文字，但我只想知道这是否可能。

我可能尝试删除`dependentAssembly`节点的另一种方法是：

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1" xdt:Transform="Remove">
    <dependentAssembly>
      <assemblyIdentity name="System.Web.Mvc" xdt:Locator="Match(name)" />
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

请注意，`Transform`它位于祖父节点上，而定位器位于叶节点上。以上合法吗？这个想法是只删除`dependantAssembly`具有内部定位器匹配的节点。

除了这两种方法，您将如何删除定位`dependantAssembly`及其所有子节点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-23T13:18:39.587

问题是 assemblyBinding 标记上的命名空间属性。

删除 AspNetHelper 参考对我有用：

```
<runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
        <dependentAssembly xdt:Transform="Remove" 
                           xdt:Locator="Condition(./_defaultNamespace:assemblyIdentity/@name='Microsoft.VisualStudio.Enterprise.AspNetHelper')">
        </dependentAssembly>
    </assemblyBinding>
</runtime> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-22T20:58:44.747

@Thommy 的解决方案对我有用，@LifeintheGrid 的解决方案使用了我想要删除的实际程序集，所以我将两者结合起来并简化为：

```
<runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
        <dependentAssembly xdt:Transform="RemoveAll"
                           xdt:Locator="Condition(starts-with(./_defaultNamespace:assemblyIdentity/@name,'Microsoft.VisualStudio.QualityTools'))">
        </dependentAssembly>
    </assemblyBinding>
</runtime> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T16:47:08.103

这段代码最终为我工作。我将转换移动到dependentAssembly 节点。

```
<runtime>
  <assemblyBinding>
    <!-- ending /dependentAssembly is required or tranforms fail -->
    <dependentAssembly xdt:Transform="Remove" xdt:Locator="Condition(assemblyIdentity/@name='Microsoft.VisualStudio.QualityTools.HostAdapters.ASPNETAdapter')"  ></dependentAssembly>
    <dependentAssembly xdt:Transform="Remove" xdt:Locator="Condition(assemblyIdentity/@name='Microsoft.VisualStudio.QualityTools.Common')"  ></dependentAssembly>
    <dependentAssembly xdt:Transform="Remove" xdt:Locator="Condition(assemblyIdentity/@name='Microsoft.VisualStudio.QualityTools.ExecutionCommon')"></dependentAssembly>
    <dependentAssembly xdt:Transform="Remove" xdt:Locator="Condition(assemblyIdentity/@name='Microsoft.VisualStudio.QualityTools.Resource')"  ></dependentAssembly>
  </assemblyBinding>
</runtime> 
```

# ruby-on-rails - 如何使用我的刷新令牌刷新我的 google_oauth2 访问令牌？

> ID：12792326
> 
> 赞同：8
> 
> 时间：2012-10-09T03:11:28.220
> 
> 标签：ruby-on-rails, google-api, oauth-2.0, omniauth

我有一个 RoR 应用程序，我在其中使用omniauth 和google_oauth2 对Google 进行身份验证，我在其中请求离线访问。

如何使用我的刷新令牌来请求当前的访问令牌？另外，当我的访问令牌不再有效时，如何刷新它？我不想在这种情况下有任何用户界面，当然假设授权没有被取消。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-23T23:51:00.497

对于使用 Ruby HTTParty gem 的示例：

其中@auth 是一个 ActiveRecord 记录，它存储您尝试为其刷新令牌的特定用户的身份验证密钥。

```
 # Refresh auth token from google_oauth2 and then requeue the job.
  options = {
    body: {
      client_id: <YOUR GOOGLE API CLIENT ID HERE>,
      client_secret: <YOUR GOOGLE API SECRET KEY HERE>,
      refresh_token: @auth.refresh_token,
      grant_type: 'refresh_token'
    },
    headers: {
      'Content-Type' => 'application/x-www-form-urlencoded'
    }
  }
  @response = HTTParty.post('https://accounts.google.com/o/oauth2/token', options)
  if @response.code == 200
    @auth.token = @response.parsed_response['access_token']
    @auth.expires_in = DateTime.now + @response.parsed_response['expires_in'].seconds
    @auth.save        
  else
    Rails.logger.error("Unable to refresh google_oauth2 authentication token.")
    Rails.logger.error("Refresh token response body: #{@response.body}")
  end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T09:20:22.343

我没有看到任何`google_oauth2`处理`access_token`使用刷新令牌获取新令牌的内容，因此看起来您需要直接进行交换。

[Google 的官方 OAuth 2.0 文档](https://developers.google.com/accounts/docs/OAuth2WebServer#refresh)解释了如何在低级别执行此操作。在您的服务器端代码中，使用您最喜欢的 HTTP 客户端构造一个如下所示的请求：

```
POST /o/oauth2/token HTTP/1.1
Host: accounts.google.com
Content-Type: application/x-www-form-urlencoded

client_id=CLIENT_ID&
client_secret=CLIENT_SECRET&
refresh_token=REFRESH_TOKEN&
grant_type=refresh_token 
```

where`CLIENT_ID`和`CLIENT_SECRET`与您用于原始身份验证的相同，并且`REFRESH_TOKEN`是原始身份验证流程中的刷新令牌。如果交换成功，您将在响应中收到一个新的访问令牌，如下所示：

```
{
  "access_token":"1/fFBGRNJru1FQd44AzqT3Zg",
  "expires_in":3920,
  "token_type":"Bearer",
} 
```

您可以按照此过程在需要时获取新的访问令牌。您可以使用该`expires_in`值来估计何时需要新的，或者在您的 API 请求以 401 HTTP 状态响应时尝试刷新。

# java - GWT 错误：“输出流已提交，无法再写入”

> ID：12792329
> 
> 赞同：0
> 
> 时间：2012-10-09T03:11:50.143
> 
> 标签：java, rest, gwt

Java 和 GWT 的新手。这是我的问题。我收到此错误消息：“OutputStream 已提交，无法再写入。” 当我试图通过 REST API 将 xml 发布到远程服务器时。

它发生在下面代码的这一行：

```
out.write("Content-Type: application/x-www-form-urlencoded\r\n"); 
```

这适用于终端：

```
curl -d "OPERATION_NAME=ADD_REQUEST&TECHNICIAN_KEY=DxxxxxxxxxxxxxxxxxxxB6&INPUT_DATA=<?xml version=%221.0%22 encoding=%22utf-8%22?><Operation><Details><requester>Me</requester><subject>Test</subject><description>Testing curl input again</description></Details></Operation>" http://app.company.com/sdpapi/request/ 
```

我无法将上面的 curl 命令转换为下面的代码。我从教程中获得了以下代码，但我不确定如何正确传递 URL 和参数。任何建议或其他故障排除方法将不胜感激。我在谷歌上没有找到很多东西。

```
package com.gwt.HelpDeskTest.server;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.net.URL;
import java.net.URLConnection;
import com.google.gwt.user.server.rpc.RemoteServiceServlet;
import com.gwt.HelpDeskTest.client.HelpDeskTestService;
import com.gwt.HelpDeskTest.shared.HelpDeskTestException;

@SuppressWarnings("serial")
public class HelpDeskTestImpl extends RemoteServiceServlet implements
    HelpDeskTestService {

@Override
public String getFromRemoteServer(String serviceUrl)
        throws HelpDeskTestException {

    String result = "";

    try {
        final URL url = new URL(serviceUrl);

        final BufferedReader in= new BufferedReader(new InputStreamReader(url.openStream()));

        String inputLine;
        while ((inputLine= in.readLine()) != null) {

            result+= inputLine;
        }

        in.close();
        return result;

    } catch (final Exception e) {
        throw new HelpDeskTestException();

    }

}

@Override
public String postToRemoteServer(String serviceUrl)
        throws HelpDeskTestException {

    try {

        final String serverHost= "http://app.company.com/";
        final String serverPath= "http://app.company.com/sdpapi/request/";

        final String serverParameters= 
                "OPERATION_NAME=ADD_REQUEST&TECHNICIAN_KEY=Dxxxxxxxxxx6&INPUT_DATA=%3C?xml%20version=%25221.0%2522%20encoding=%2522utf-8%2522?%3E%3COperation%3E%3CDetails%3E%3Crequester%3EMe%3C/requester%3E%3Csubject%3ETest%3C/subject%3E%3Cdescription%3ETesting%20GWT%20input%20again%3C/description%3E%3C/Details%3E%3C/Operation%3E"; //put parameters here for testing.

        final  URL url = new URL(serverHost);

        final URLConnection connection= url.openConnection();
        connection.setDoOutput(true);
        connection.setConnectTimeout(10000); //added this to see if I can address the timeout issue.
        connection.setReadTimeout(10000);

        final OutputStreamWriter out= new OutputStreamWriter(connection.getOutputStream());

        final BufferedReader in= new BufferedReader(new InputStreamReader(
                connection.getInputStream()));

        out.write("POST " + serverPath + "\r\n");
        out.write("Host: " + serverHost + "\r\n");
        out.write("Accept-Encoding: identity\r\n");
        out.write("Connection: close\r\n");
        out.write("Content-Type: application/x-www-form-urlencoded\r\n"); //This    is where the error is occuring
        out.write("Content-Length: " + serverParameters.length() + "\r\n\r\n" +
            serverParameters + "\r\n");

        String result = "";
        String inputLine;

        while ((inputLine=in.readLine()) != null) {
            result+= inputLine;
        }

        in.close();
        out.close();

        return result;

    }  catch (final Exception e) {
        System.out.println(e.getMessage());
        throw new HelpDeskTestException();

    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:25:51.517

我认为使用 HttpURLConnection 而不是普通的 URLConnection 会更容易。它具有设置标题和其他属性的便捷方法。有关如何使用它进行 POST 的一个很好的示例，请参阅此问题的已接受答案：

[Java - 通过 POST 方法轻松发送 HTTP 参数](https://stackoverflow.com/questions/4205980/java-sending-http-parameters-via-post-method-easily)

# visual-c++ - 在 PropertySheet 中更改字体大小

> ID：12792333
> 
> 赞同：-1
> 
> 时间：2012-10-09T03:12:37.363
> 
> 标签：visual-c++, propertysheet

如何更改 PropertySheet 中标题中的字体大小？顺便说一句，我没有使用 MFC。我用谷歌搜索并没有找到答案。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T19:54:57.457

如果您使用的是`embarcardero`，只需转到属性，单击`Font`并单击将出现在侧面的椭圆，然后将显示字体设置。同样与`borland`.

否则，您可以对其进行编码。这是`embarcardero`, `nameOfcomponent`-> `Font`-> `Style`<<的代码`fsBold`。例如，这是为了使您的字体加粗。

# javascript - 可以 .slideToggle() 一个特定的 ?

> ID：12792336
> 
> 赞同：1
> 
> 时间：2012-10-09T03:13:11.000
> 
> 标签：javascript, jquery

有一个`<ul>`导航链接。一个特定`<li>`的实际上变成了 3 个链接。希望那个特定`<li>`的滑动打开和关闭以显示其他三个链接。

在这里举办[。](http://students.thenet.ca/dcameron/)

```
<ul id="courseLinks">
    <li><a href="#"><strong>Week 1</strong> introduction</a></li>
    <li><a href="./homework/week2/week2homework.htm"><strong>Week 2</strong> dev tools + standards</a></li>
    <li><a href="./homework/week3/week3homework.htm"><strong>Week 3</strong> HTML 5 &amp; SEO</a></li>
    <li><a href="#" id="homeworkSlide"><strong>Week 4</strong> css concepts</a></li>
    <li id="slider"><a href="homework/week4/exercise1.htm">Exercise 1</a>
            <a href="homework/week4/exercise2.htm">Exercise 2</a>
            <a href="homework/week4/week4homework.htm">Homework</a></li>
    <li><a href="#"><strong>Week 5</strong> advanced css</a></li>
    <li><a href="#"><strong>Week 6</strong> server side includes</a></li>
    <li><a href="#"><strong>Week 7</strong> site construction</a></li>
    <li><a href="#"><strong>Week 8</strong> development methodology 1</a></li>
    <li><a href="#"><strong>Week 9</strong> user experience</a></li>
    <li><a href="#"><strong>Week 10</strong> social software</a></li>
    <li><a href="#"><strong>Week 11</strong> project work</a></li>
    <li><a href="#"><strong>Week 12</strong> final examination</a></li>
</ul><!--nav--> 
```

查询：

```
$('#homeworkSlide').click(function() {
  $('#slider').slideToggle('slow', function() {
    // Animation complete.
  });
}); 
```

拒绝工作。此时自学javascript，难道就不能这样修改`<ul>`吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:24:45.673

看了你[主机](http://students.thenet.ca/dcameron/javascript/slide.js)上的源码，发现绑定操作没有绑定在a`$(document).ready(...)`中，可能是这个原因。

所以，修改代码。

```
$(document).ready( function() { 
    $('#homeworkSlide').click(function() {
      $('#slider').slideToggle('slow', function() {
        // Animation complete.
      });
    });
} ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T03:18:46.863

粘贴到控制台时，该代码在该页面上对我来说很好。确保您在准备好的 DOM 上运行它

# c# - C#中文件读取的优化

> ID：12792338
> 
> 赞同：-3
> 
> 时间：2012-10-09T03:13:30.270
> 
> 标签：c#, data-structures

我需要复制一个文件，解析它的内容，删除换行符，沿着管道分割内容，然后将生成的 string[] 存储在数据库中。我的文件每个可以有 65000 条有效记录，因此性能至关重要。

以下是我目前拥有的。问题是它非常慢（处理 65000 行需要 3 小时）。我将不胜感激改进优化这件作品的任何帮助，以便我的运行可以明显更快。

```
public void ReadFileLinesIntoRows()
    {
        try
        {
            using (var reader = new TextFieldParser(FileName))
            {
                reader.HasFieldsEnclosedInQuotes = false;
                reader.TextFieldType = FieldType.Delimited;
                reader.SetDelimiters("|");
                String[] currentRow;
                while (!reader.EndOfData)
                {
                    try
                    {
                        currentRow = reader.ReadFields();
                        int rowcount = currentRow.Count();
                        //if it is less than what you need, pad it.  
                        if (rowcount < 190)
                        {
                            Array.Resize<string>(ref currentRow, 190);  
                            rows.Add(currentRow);
                        }
                        else
                        {
                            rows.Add(currentRow);
                        }
                    }
                    catch (MalformedLineException mex)
                    {
                        unreadlines.Add(reader.ErrorLine);//continue afterwards
                    } 
                }
                this.TotalRowCount  = rows.Count();
            }
        }
        catch (Exception ex)
        {

            throw ex;
        }
    }

   public void cleanfilecontent(String tempfilename, Boolean? HeaderIncluded)
    {
        try
        { 
            //remove the empty lines in the file 
            using (var sr = new StreamReader(tempfilename))
            {
                // Write new file
                using (var sw = new StreamWriter(CleanedCopy))
                {
                    using (var smove = new StreamWriter(duptempfileremove))
                    {
                        string line;

                        Boolean skippedheader = false;
                        while ((line = sr.ReadLine()) != null)
                        {
                            // Look for text to remove
                            if (line.Contains("----------------------------------"))
                            { 
                                smove.Write(line);
                            }
                            else if (HeaderIncluded.HasValue && HeaderIncluded.Value==true && ! skippedheader)
                            {
                                smove.Write(line);
                                skippedheader = true;
                            }
                            else if(skippedheader)
                            {
                                // Keep lines that does not match
                                sw.WriteLine(line);
                            } 
                        }
                        smove.Flush();
                    }
                    sw.Flush();
                }
                sr.Close();
            }
        }
        catch (Exception ex)
        {

            throw ex;
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T03:27:11.010

65000 条记录并不是那么大。如果您有足够的内存，我建议您将整个文件读入内存，执行解析并构造您的行并使用批量插入将数据提交到数据库。这将是最快的！我怀疑您 3 个小时的大部分时间都花在了一次将数据库记录插入数据库中。

# c# - 使用C#提取和替换href属性值

> ID：12792341
> 
> 赞同：1
> 
> 时间：2012-10-09T03:13:50.550
> 
> 标签：c#, regex, href

我有以下一组图像地图标签；

```
<map name="planetmap">
  <area shape="rect" coords="0,0,82,126" href="sun.htm" alt="Sun">
  <area shape="circle" coords="90,58,3" href="mercur.htm" alt="Mercury">
  <area shape="circle" coords="124,58,8" href="venus.htm" alt="Venus">
</map> 
```

我需要提取 href 属性并将其替换为另一个 url

我正在使用以下代码，但似乎不起作用；

```
string input = @"<area shape=""rect"" href=""http://www.google.com"">";
            string pattern = "(href=([^ ]+))";
Regex rgx = new Regex(pattern);
string result2 = rgx.Replace(input, m => m.Groups[1].Value.Replace(result,"test.com")); 
```

有人可以帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T03:21:25.043

我可以看到可能导致问题的两件事。第一个是，您的正则表达式正在检查格式为`href=http://example.com`. 请注意，URL 周围没有引号。因此，我们需要更新正则表达式以处理您的输入所包含的双引号。

第二个是您正在使用匹配的组`1`，但您的正则表达式实际上匹配两个单独的组（并且您想替换第二个组）。您根本不需要第一个匹配组，因此我们实际上可以删除这部分。

总之，尝试将您的正则表达式更新为：

```
href="([^"]+)" 
```

在您的变量中，它将如下所示：

```
string pattern = @"href=""([^""]+)"""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T03:38:08.627

看看这个例子：

```
StreamReader reader = new StreamReader("D:\\stack.html");
string testString = reader.ReadToEnd();

string replacedString = Regex.Replace(testString, @"(?<=href=).+?(?=\s)", "\"test.com\"");

StreamWriter writer = new StreamWriter("D:\\stack1.html");
writer.WriteLine(replacedString);

writer.Close();
reader.Close(); 
```

希望你明白了。

# html - 如何使用drawImage在画布中平滑缩放大图像？

> ID：12792342
> 
> 赞同：0
> 
> 时间：2012-10-09T03:14:00.827
> 
> 标签：html, canvas

当我使用drawImage缩放一个大图像（比如5M）时，结果看起来很糟糕，有没有更简单的方法可以用抗锯齿缩放图像？[MDN](https://developer.mozilla.org/en-US/docs/Canvas_tutorial/Using_images)提到了这一点：

注意：放大时图像可能会变得模糊，如果缩小太多，图像会变得有颗粒感。如果您有一些需要保持清晰的文本，则最好不要进行缩放。

**EIDT：**我想将图像缩放到 90x90，我的代码是这样的：

```
that.avatar_height >= that.avatar_width ?
that.context.drawImage($(this)[0], 86, 2, 90, that.avatar_height*90/that.avatar_width) :
that.context.drawImage($(this)[0], 86, 2, that.avatar_width*90/that.avatar_height, 90); 
```

avatar 是要缩放的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T05:04:25.797

While scaling the image first get the uploaded image aspect ratio.

```
/* Calculating aspect ratio */
var imageAspectRatio = imgWidth / imgHeight;

/* Give the needed width and height of the image*/
/*For example you need like this */
var newWidth = 1024;
var newHeight = 768;

if( imgWidth <= 1024 ) {
    var newWidth =  newHeight * imageAspectRatio;
} else if(imgHeight <= 768) {
    var newHeight = newWidth / imageAspectRatio;
} else if( imgWidth >= newWidth ) {
    var newWidth =  newHeight * imageAspectRatio;
} else if(imgHeight >= newHeight) {
    var newHeight = newWidth / imageAspectRatio;
} 
```

If you do this you can't loss you aspect ratio so scaling looks good

# ios - 旋转CCSprite Cocos2D？

> ID：12792345
> 
> 赞同：0
> 
> 时间：2012-10-09T03:14:06.867
> 
> 标签：ios, animation, cocos2d-iphone, ccsprite

我正在尝试在 Cocos2D 中旋转 CCSprite，但很难用语言来解释，所以这里是我想要实现的动画的 GIF：[http ://max.wilsonsd.org:8080/Clip_Art/Pmpa3/symbols/miscellaneous /peace_sign_spinning_hw.gif](http://max.wilsonsd.org:8080/Clip_Art/Pmpa3/symbols/miscellaneous/peace_sign_spinning_hw.gif)

无论如何，它是 360 度旋转，但不是顺时针或逆时针旋转。无论如何，我将如何在 Cocos2D 中实现这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T04:08:15.207

该效果称为翻转，请尝试使用 CCFlipX/CCFlipX3D 动作。例如

```
[sprite runAction:[CCRepeatForever actionWithAction:[CCFlipX3D actionWithDuration:1.0]]] 
```

祝你好运！

# php - 试图传递一个参数，不工作:(

> ID：12792348
> 
> 赞同：-3
> 
> 时间：2012-10-09T03:14:56.733
> 
> 标签：php, html

我正在尝试将参数传递给 php 函数。但是什么都没有发生，我的意思是代码没有将 index.php 中的参数传递给 newPHPClass.php 并且可以在表单操作中调用函数吗？这是我的代码。

索引.php

```
 <?php include '../con_db/connect.php'; ?>
    <?php include '../class/newPHPClass.php'; ?>

<form action="index.php" method="post">
        <label>Username:</label><input type="text" name="username"/><br/>
        <label>Password:</label><input type="text" name="password"/><br/>
        <input type="submit" value="Submit" name="submit"/>
    </form>

    <?php
    if (isset($_POST['submit'])) {
        $username = $_POST['username'];
        $password = $_POST['password'];
        $check = new newPHPClass();
        $check->checkLogin($username, $password);
        }
    ?> 
```

和班级

```
include '../con_db/connect.php';

class newPHPClass {

    public function checkLogin($username, $password) {
        $select = mysql_query('SELECT * FROM users WHERE username = "' . $username . '" AND password = "' . $password . '"');
        if (count($select) > 0) {
            echo "true";
            return true; 
        } else {
            echo "false";
            return false;   
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:18:26.167

你的`INSERT`语法不正确，

```
$select = mysql_query("INSERT FROM users (username, password)
                          VALUES ('$username', '$password')"); 
```

您当前的查询存在漏洞`SQL Injection`，请花点时间阅读下面的文章，

[**在 PHP 中防止 SQL 注入的最佳方法是什么？**](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

**更新 1**

```
$sql = "SELECT COUNT(*) totalCount 
        FROM users
        WHERE username = '$username' AND password = '$password'");
$result = mysql_query($sql, $link) or die(mysql_error());
$row = mysql_fetch_assoc($result);
if($row["totalCount"] > 0)
{
    echo "true";
    return true; 
} 
else 
{
     echo "false";
     return false;   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T03:27:55.443

类中的语法完全混乱。首先，您为什么要调用 INSERT 来检查登录。其次，它是 INSERT INTO，即使它是您在此处需要的 INSERT，但事实并非如此。

```
$select = mysql_query("SELECT * FROM users WHERE username = '$username' AND password = '$password'");
if($select->num_rows()==1){
        echo "true";
        return true; 
    } else {
        echo "false";
        return false;   
    }
} 
```

永远不要在登录时检查 > 0，你只希望返回一行。还将查询放在 " 而不是 ' 中意味着它可以读取变量而无需按照您的方式连接查询。

# ruby - 当有一个杂散的开始标签时，Nokogiri/Mechanize xpath 定位器会中断

> ID：12792349
> 
> 赞同：1
> 
> 时间：2012-10-09T03:15:07.397
> 
> 标签：ruby, nokogiri, mechanize

我使用机械化加载了一个页面：

```
url = 'http://www.blah.com'
agent = Mechanize.new
page = agent.get(url) 
```

并尝试使用 XPath 选择器访问元素：

```
found = page.at('/html/body/table') 
```

它返回`nil`是因为我无法控制的 HTML 有一个不应该出现的开始标签：

```
<html>
  <body>
    <tr>
    <table>
      . . . 
```

当浏览器在现实生活中呈现页面时，Firefox 称之为“流浪开始标记”，它会被忽略（并且 Firefox 给了我忽略它的 xpaths），但是 Nokogiri 看不到任何超出这个额外的`<tr>`.

有没有办法像这样清理悬挂标签的HTML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:38:59.850

使用不那么脆弱的 XPath 查询？

```
found = page.at('//table') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T03:57:48.800

在您的示例中，它将是：

```
page.at '/html/body/tr/table' 
```

但也许这样做更有意义：

```
page.at 'table' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T16:23:58.277

您可以使用 Nokogiri 轻松清洁它：

```
require 'nokogiri'

html = '<html><body><tr><table><tr><td>foo</td></tr></table></tr></body></html>'
doc = Nokogiri::HTML(html)

inner_table = doc.at('//body/tr/table')
if (inner_table)
  doc.at('body tr').replace(inner_table)
end

puts doc.to_html 
```

结果是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><table><tr><td>foo</td></tr></table></body></html> 
```

如果您的 HTML 更复杂，则找到某种类似于`<body><tr><table>`节点链的标记，并将其替换为上面的代码。

请注意，我混合了 XPath 和 CSS 访问器。我更喜欢 CSS 的可读性，但有时 XPath 更容易获得某些东西，或者更能自我记录。

另请注意，我在 Nokogiri 的`at`方法中同时使用了 XPath 和 CSS。尽管 Nokogiri 支持`at`,`at_css`和，但除非我需要明确告诉 Nokogiri 我使用的访问器是 CSS 或 XPath ，否则我`at_xpath`依赖它。`at`这是一个方便的事情。这同样适用于 Nokogiri 的`search`方法。

# c++ - 表达结果未使用，图像生成

> ID：12792350
> 
> 赞同：0
> 
> 时间：2012-10-09T03:15:44.277
> 
> 标签：c++

我正在尝试使用此代码生成圆形图像。

```
#include <fstream>
#include <iostream>
#include <iomanip>
using namespace std;

double e, f;

double scaler (double a, double b) {
    if (a < 256) {  e = (-1) * a / 256.0;
        if (b < 256) {
            f = b / 256.0;
        } else {
            f = (-1) * (b - 256.0) / 256.0;
        }
    } else { e = (a - 256.0) / 256.0;
        if (b < 256) {
            f = b / 256.0;
        } else {
            f = (-1) * (b - 256.0) / 256.0;
        }
    }
    return e, f;
}

int main () {

    int max_color = 255;
    int dimention = 512;

    ofstream fout;
    fout.open("mandeloutput.ppm");

    fout << "P3\n" << dimention << " " << dimention << endl << max_color << endl;
    for (int i = 0; i < dimention; i++) { f = i;
        for (int j = 0; j < dimention; j++) { e = j;
            scaler (e, f);
            cout << fixed << setprecision(5) << e << " " << f << endl;
            if ( e*e + f*f <= 1) {
                fout << right << setw(4) << 0 << setw(4) << 0 << setw(4) << 0 << "   ";
            } else {fout << right << setw(4) << 255 << setw(4) << 255 << setw(4) << 255 << "   ";}
        }
        fout << endl;
    }
} 
```

我不明白为什么我的变量**e**总是 0，为什么我得到标题中描述的关于缩放器内部变量的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:18:26.947

`return e, f;`不做你认为它做的事。逗号运算符简单地评估和丢弃`e`，然后将值`f`作为函数结果返回。由于这些都是全局变量，因此不需要从该函数返回任何内容，但最好不要使用全局变量并正确执行此操作。删除全局声明`double e, f;`并将函数更改为如下内容：

```
void scaler (int a, int b, double &e, double &f) {
    if (a < 256) {  e = (-1) * a / 256.0;
        if (b < 256) {
            f = b / 256.0;
        } else {
            f = (-1) * (b - 256.0) / 256.0;
        }
    } else { e = (a - 256.0) / 256.0;
        if (b < 256) {
            f = b / 256.0;
        } else {
            f = (-1) * (b - 256.0) / 256.0;
        }
    }
} 
```

然后，在您的主要功能中，您将更改以下几行：

```
for (int i = 0; i < dimention; i++) { f = i;
    for (int j = 0; j < dimention; j++) { e = j;
        scaler (e, f);
        ... 
```

对此：

```
for (int i = 0; i < dimention; i++) {
    for (int j = 0; j < dimention; j++) {
        double e, f;
        scaler (j, i, e, f);
        ... 
```

# math - 用特征方程求解递推关系

> ID：12792351
> 
> 赞同：1
> 
> 时间：2012-10-09T03:16:16.383
> 
> 标签：math, recurrence

由于没有看到能够将其输入特征方程的步骤，我在解决这个问题时遇到了一些麻烦。

T(n) = 4T(n-2) +n + n^2 * 2^n; T(0)=0；T(1)=1

我不明白将其转换为 (Rx)(Ry) 形式的步骤。我知道我应该将其转换为 tn - 4T(n-2) - n - n^2 * 2^n = 0 但在这里我迷路了。有人可以给我一个提示（不解决它，我不会从中学到任何东西）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:23:50.297

那是因为您无法将其转换为 (Rx)(Ry) 形式。它甚至不是线性关系，所以通常的方法没有帮助。

至于我将如何处理它，您应该注意到`T(n)`仅取决于`T(n-2)`. 因此偶数和奇数是独立的。因此，请先尝试仅针对偶数索引来解决它。

如果你让`T(2k) = F(k)`那么你有 `F(k) = 4F(k-1) + 4k^2*4^k`

希望这足以开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T03:26:23.293

要求解一个非齐次（即右手边不为 0）递推关系，您需要求解齐次情况，然后找到一个特解。因此，找到解`T(n) - 4T(n-2) = 0`，然后利用[待定系数的方法](http://en.wikipedia.org/wiki/Method_of_undetermined_coefficients)来计算通解。

# visual-studio-2010 - UpdateLayeredWindow 和 16 位显示颜色深度

> ID：12792352
> 
> 赞同：0
> 
> 时间：2012-10-09T03:16:44.653
> 
> 标签：visual-studio-2010, winapi, windows-7, windows-xp, gdi

适用于 32 位颜色。当切换到 16 位时，使用 UpdateLayeredWindow 绘制的窗口会变得混乱。您可以单击和/或更改颜色。

对我自己的源代码以及其他人的源代码都不好。例如： http: [//www.codeproject.com/Articles/20758/Alpha-Blended-Windows-Forms](http://www.codeproject.com/Articles/20758/Alpha-Blended-Windows-Forms)

在 Windows7 和 XP 上测试。

如何摆脱这种行为。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T05:52:18.087

Alpha 混合和 Alpha 透明度不适用于 16 位颜色深度，因为没有 Alpha 通道可以使用。您需要 32 位颜色深度才能拥有 Alpha 通道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:03:54.610

我用谷歌搜索了一下，这对我有用

[http://www.myexception.cn/vc-mfc/170082.html](http://www.myexception.cn/vc-mfc/170082.html)

这个想法是不要在 16 位模式下创建兼容的位图，而是显式创建 32 位的位图。

# php - 任何给定国家的未来三个假期 - MySQL 还是 API？

> ID：12792354
> 
> 赞同：0
> 
> 时间：2012-10-09T03:16:54.697
> 
> 标签：php, mysql, api, floating

我不是很精通后端，真的可以使用更聪明的人的指导。

我希望有一个网站，根据当前日期列出任何给定国家的未来三个假期。

我还没有找到一种免费的方法来查询数据库以获取此信息。我不介意在我的 MySQL 数据库中创建自己的表，但我想不出每天更新它的方法（除了手动）。

我通过 Stack Overflow 搜索找到了[这一点](http://pear.php.net/package/Date_Holidays)，但我的目光转向了如何在我的网格服务服务器上实现这一点。

有人可以阐明如何做到这一点吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:23:54.177

不是每个国家，但它是一个非常棒的免费资源！

[http://kayaposoft.com/enrico](http://kayaposoft.com/enrico)

# orchardcms - 如何访问 Orchard 中的 ContentItemfield 文本字段

> ID：12792355
> 
> 赞同：0
> 
> 时间：2012-10-09T03:16:57.583
> 
> 标签：orchardcms

这听起来像是一个（非常）愚蠢的问题，但我只是找不到访问我刚刚添加到 Orchard 中的内容类型的文本字段的方法。我知道在将字段添加到内容部分时如何访问该字段，但在将其直接添加到内容类型本身时不知道。

内容类型称为产品，它是可包含的并且显示在列表中。我添加了普通部分和两个自定义字段：一个名为“Image”的 MediaPicker 字段和一个名为“About”的具有 HTML 风格的 Text 字段。我用来呈现包含它的列表的代码如下：

```
@using Orchard.DisplayManagement.Shapes;
@{
    var list = Model.List;
    var items = list.Items;
    var count = items.Count;
    var listTag = Tag(list, "ul");
    listTag.AddCssClass("historia");
    var index = 0;
}

<div class="produtos">
    @foreach (var item in items)
    {
        var itemTag = Tag(item, "div");
        itemTag.AddCssClass("item-" + index);
        @itemTag.StartElement;
        <h3>@item.ContentItem.TitlePart.Title</h3>
        <img src="@Href(item.Image.Url)" 
            class="@item.Image.Class"
            alt="@item.Image.AlternateText" 
            width="@item.Image.Width" 
            height="@item.Image.Height" 
            style="@item.Image.Style" />
        <p>@item.About.Text</p>
        @itemTag.EndElement;
        ++index;
    }
</div>
@Display(Model.List)
@Display(Model.Pager) 
```

问题是 @item.Image 不会产生 Image 字段，@item.About 也不会产生“About”文本字段。我什至不知道一个 Text 字段是否有一个 .Text 属性来访问它的值，毕竟它可以有 HTML 风格......我什至不知道在哪里查看源代码来帮助我找出这个已经完成了！

我尝试了一些不同的方法，例如@item.ContentFields.About.Text 或@item.ContentField.About.Text、@item.Fields[0]、@item.ContentItem.About.Text、@item.ContentItem.ContentFields。 About.Text （最后两个抛出一个异常，告诉我 ContentItem 没有这些字段......）

我知道如果我将字段添加到内容部分并将此部分添加到内容类型，我可以这样做：@item.ContentItem.TheNameOfTheContentPart.Image.Url ...

我越来越沮丧，因为我不知道如何在 Orchard 做最简单的事情。我需要那个 Eureka 时刻，让我能够知道在源代码中的何处查找这些问题的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T17:51:08.780

一个字段*总是*在一个部分之下。只是如果你从 admin 中添加字段，会自动为你创建一个与类型同名的部分。

[http://orchard.codeplex.com/discussions/396280](http://orchard.codeplex.com/discussions/396280)

您不能将字段添加到内容类型，您始终将其添加到内容部分。只是如果该部分与类型具有相同的名称，就会发生神奇的事情。

[http://orchard.codeplex.com/discussions/397426](http://orchard.codeplex.com/discussions/397426)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T07:31:51.093

不要尝试用你的运气来取代价值观，它会浪费你的时间，你最终几乎没有真正的结果。推荐的方法是使用形状跟踪来执行此操作。在 Internet 上搜索 Orchard Shape Tracing，您就可以开始了。:)

# javascript - Onclick 仅添加到循环中的最后一个元素

> ID：12792358
> 
> 赞同：7
> 
> 时间：2012-10-09T03:18:03.763
> 
> 标签：javascript

> **可能重复：**
> [在 for 循环中分配点击处理程序](https://stackoverflow.com/questions/4091765/assign-click-handlers-in-for-loop)

我需要有关代码中循环的帮助。

我遍历一个数组并添加对 div 的点击。但它总是将 onclicks 添加到循环的最后一个循环，并有效地取消之前的循环。

所以我有这个作为我的循环：

```
 start = 0;

for(i = start; i < (start+8); i++){ //8 per page
    if(i == array.length){ 
        break;  //page end
    } else {
        (function(i){
             document.getElementById('cell'+i).onclick = function(){ select(i); }
        })(i);  
    }
} 
```

这里发生的是 div id`cell7`获得了点击添加，但 div id`cell0`没有`cell6`。我猜这与`i`循环中的变化有关，因此也会影响`i`函数中的变化？

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T03:45:46.537

你很接近：

```
(function(i){
    document.getElementById('cell' + i).onclick = function(){ select(i); }
})(i); 
```

我想你想要的是：

```
document.getElementById('cell'+i).onclick = (function(i){
    return function(){ select(i); }
})(i); 
```

另外，因为你有：

```
for(i = start; i < (start+8); i++) 
```

`i`没有声明，所以它变成了全局的。声明 'i' 使其保持在本地（假设这是功能代码）：

```
for (var i = start; i < (start+8); i++) 
```

如果它是全局代码，它不会有任何区别（但无论如何都要声明它）。

### 编辑

以上并不能解决您的问题，它只是改变了语法。

以下对我来说“有效”，cell0 到 cell7 得到一个监听器，其余的没有。`select`显示正确的值（0 到 7，具体取决于单击的值）。

```
<script>
    function addListener() {
      var start = 0;
      for(i = start; i < (start+8); i++){ 
        document.getElementById('cell'+i).onclick = (function(i){
            return function(){ select(i); }
        })(i);  
      }
    }
    function select(arg) {
      alert(arg);
    }
    window.onload = addListener;
</script>

<p id="cell0">0</p>
<p id="cell1">1</p>
<p id="cell2">2</p>
<p id="cell3">3</p>
<p id="cell4">4</p>
<p id="cell5">5</p>
<p id="cell6">6</p>
<p id="cell7">7</p>
<p id="cell8">8</p>
<p id="cell9">9</p> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T03:59:06.237

试试这个[例子](http://jsfiddle.net/qbqsS/1/)。var i = 1 假设您的 HTMLElement id 从 1 开始。更改以反映情况。

```
var select = function(i) {
    console.log(i);
};

var arr = ["1", "2", 3, 4, 5, 6];

var start = 0;
var max = 8;

for (var i=1; i<(start + max); i++) {
    if (i === arr.length) {
        break;
    } else {
        (function(i) {
            var element = document.getElementById(['cell', i].join(''));
            element.onclick = function() {
                 select(i);  
            };
        })(i);
    }
} 
```

​ 然而，调用外部函数应该是更快的实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T04:12:16.997

我不知道为什么，但这些建议并没有解决我的问题 - 但我设法通过在循环期间显示 div 时添加到 onclicks 来解决它，所以我最终做了：

```
innerHTML = '<Div onclick="">'; //etc etc 
```

而不是将 div 添加到输出“然后”稍后分配 onclicks ......不知道我的新方法是否是最佳选择，但它有效，所以我必须坚持下去！

# php - Magento中的子类别下拉顶部菜单

> ID：12792365
> 
> 赞同：0
> 
> 时间：2012-10-09T03:18:54.137
> 
> 标签：php, magento, navigation

由于我对 Magento 和 PHP 的了解有限，我发现自己可能走上了正轨，但仍然没有达到目标，希望有人能帮助我。

我目前有 4 个类别（光纤、网络、测试和测量、促销）嵌套在根类别中。根类别是主导航中名为“产品”的下拉菜单项。

例如主页 | 产品 | 克拉伦斯 | 联系我们

我想对此进行更改，以便这 4 个类别显示在主导航中，并且它们的子类别在翻转时显示为下拉菜单。

例如主页 | 光纤 | 网络 | 测试与测量 | 促销 | 联系我们

我已经尝试编辑 top.phtml 文件来显示它，但是我无法弄清楚。

有没有人能帮我解决这个问题，或者能指出我正确的方向？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T05:10:06.327

我做过这样的事情。在您的情况下，将“产品”类别设为“默认类别”的子类别。在“产品”子类别下添加其他类别，如光纤、网络等。

现在，在您的 app/design/frontend/base/default/template/page/html/topmenu.phtml 中进行编辑。在其中包含您的新菜单：例如：

```
<ul>
<li><a href="<?php echo $this->getBaseUrl() ?>"><span>Home</span></a></li>
<li><?php echo $_menu ?></li>   
<li><a href="<?php echo $this->getBaseUrl() ?>contacts"><span>Contact Us</span></a>
</ul> 
```

希望你现在有一个线索......

好吧，如果您有以下方式的菜单：例如 Home | 光纤 | 网络 | 测试与测量 | 促销 | 联系我们

将“默认类别”更改为“产品”，将光纤、网络等更改为子类别。我不确定，更改默认类别名称的名称是正确的方法，但这会起作用..

# vb.net - vb中的基本收银机应用程序

> ID：12792366
> 
> 赞同：1
> 
> 时间：2012-10-09T03:18:59.550
> 
> 标签：vb.net

我正在尝试制作一个收银机窗口表单（如下图所示），我知道我想多了，但我对 vb 真的很陌生，真的被这一切弄糊涂了。但它只需要加减余额。我需要帮助弄清楚如何在这里进行数学运算，例如由于用户将输入所有值，我们如何预期他们将在代码中输入什么？

这是我到目前为止所拥有的：

```
Public Class frmCashRegister

    Dim Total As Decimal
    Dim Subtract As Decimal
    Dim Balance As Decimal

    Private Sub btnAdd_Click(sender As System.Object, e As System.EventArgs) Handles btnAdd.Click
        txtBalance.Text = FormatCurrency(Val(txtAmount.Text))
    End Sub

    Private Sub txtBalance_TextChanged(sender As System.Object, e As System.EventArgs) Handles txtBalance.TextChanged
        If (txtBalance.Text < 0) Then
            MsgBox("Transaction resulted in negative balance, please try again!")
        End If
    End Sub

    Private Sub txtAmount_KeyPress(sender As System.Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles txtAmount.KeyPress
        If Asc(e.KeyChar) <> 8 Then
            If Asc(e.KeyChar) < 48 Or Asc(e.KeyChar) > 57 Then
                e.Handled = True
            End If
        End If
    End Sub
End Class 
```

![在此处输入图像描述](../Images/6278da97bd70ff073d66f6df01cb5366.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:17:01.800

首先，您需要筛选所有输入以确保用户无法输入任何会导致错误的内容。对于简单的收银机，您需要确保数字、减号和可能的回车键有效。就您的数学而言，在这种情况下，您需要在运行总计中保留一个变量，然后当您添加和减去您的值并使用该值更新您的余额 TextBox 时，您将更新此变量。这是一个关于如何做到这一点的想法。

```
Dim Total As Decimal
Dim Subtract As Decimal
Dim Balance As Decimal

Private Sub btnAdd_Click(sender As System.Object, e As System.EventArgs) Handles btnAdd.Click
    Balance += Decimal.Parse(txtAmount.Text) 'Same as  Balance = Balance + Decimal.Parse(txtAmount.Text)
    txtBalance.Text = FormatCurrency(Balance)
    txtAmount.Text = ""
End Sub

Private Sub btnSubtract_Click(sender As System.Object, e As System.EventArgs) Handles btnSubtract.Click
    Balance -= Decimal.Parse(txtAmount.Text) 'Same as  Balance = Balance - Decimal.Parse(txtAmount.Text)
    txtBalance.Text = FormatCurrency(Balance)
    txtAmount.Text = ""
End Sub

Private Sub txtAmount_KeyPress(sender As System.Object, e As System.Windows.Forms.KeyPressEventArgs) Handles txtAmount.KeyPress
    If Asc(e.KeyChar) <> 8 AndAlso Asc(e.KeyChar) <> &H2E Then
        If Asc(e.KeyChar) = &H2B OrElse Asc(e.KeyChar) = &HD Then
            e.Handled = True
            btnAdd.PerformClick()
        ElseIf Asc(e.KeyChar) = &H2D Then
            e.Handled = True
            btnSubtract.PerformClick()
        ElseIf Asc(e.KeyChar) < 48 Or Asc(e.KeyChar) > 57 Then
            e.Handled = True
        End If
    End If
End Sub 
```

# javascript - 为什么 Chrome 显示一个值已从数组中删除？

> ID：12792368
> 
> 赞同：5
> 
> 时间：2012-10-09T03:19:16.350
> 
> 标签：javascript, google-chrome, google-chrome-devtools

> **可能重复：**
> [Chrome 的 JavaScript 控制台是否懒于评估数组？](https://stackoverflow.com/questions/4057440/is-chromes-javascript-console-lazy-about-evaluating-arrays)

Chrome 的 js 控制台在删除值之前显示一个包含已删除值的数组。为什么？

[jsFiddle 演示了这种行为](http://jsfiddle.net/FvKLE/)。

```
var list=[];
list.push("one");
list.push("two");
list.push("three");
console.log(list);                        //["two", "three", undefined × 1] 
$("#output").append(JSON.stringify(list));//["one","two","three"]

list.shift();

$("#output").append($("<br>"));

console.log(list);                        //["two", "three"] 
$("#output").append(JSON.stringify(list));//["two","three"] 
```

​</p>

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T03:21:53.570

在 Chrome`console.log`中是“延迟的”；在这种情况下，我相信该计划的结束。

也就是说，在 Chrome 中，`console.log` *不会立即对输入对象*进行字符串化，而是在“一段时间后”执行字符串化（在这种情况下，对象已被修改）但在*实际*显示结果之前，

`console.log(JSON.stringify(list))`将显示预期的结果。

* * *

[这早在 Chrome 5 就](http://code.google.com/p/chromium/issues/detail?id=50316)被报告为一个错误（错误修复目标是 Mstone-22，所以不是 Chrome 20/21？）并且已经在[webkit](http://trac.webkit.org/changeset/125174)基础中添加了一个修复：

> 到今天为止，将对象（数组）转储到控制台将导致对象的属性在控制台对象扩展时被读取（即延迟）。这意味着在改变它的同时转储同一个对象将很难使用控制台进行调试。
> 
> 此更改在记录对象/数组时开始生成简短预览，并将此信息传递到前端。这仅在前端已经打开时发生，它仅适用于 console.log()，不适用于实时控制台交互。

# templates - cython 模板的限制在哪里？

> ID：12792370
> 
> 赞同：0
> 
> 时间：2012-10-09T03:19:32.280
> 
> 标签：templates, typedef, cython

我有这门课，但不知道如何用 cython 进行外部定义。内部 typedef 困扰着我：

```
public:

 typedef ReturnType (*Method)(Parameter); 
```

这是完整的课程：

```
#ifndef LABCALLBACK2_H_
#define LABCALLBACK2_H_

namespace elps {

template < typename ReturnType, typename Parameter >
class LabCallBack2
{
public:

 typedef ReturnType (*Method)(Parameter);

 LabCallBack2(Method _method)
 {
    method         = _method;
 };

 ReturnType operator()(Parameter parameter)
 {
    return (*method)(parameter);
 };

 ReturnType execute(Parameter parameter)
 {
    return operator()(parameter);
 };

private:

 Method  method;

};

}  // namespace elps

#endif /* LABCALLBACK2_H_ */ 
```

我从这个开始，但接下来呢？cython 是否提供了一种方法来做到这一点？

```
cdef extern from "../inc/LabCallBack2.h" namespace "elps" :
    cdef cppclass LabCallBack2[ReturnType, Parameter]:
        LabCallBack2(?????????  _method) 
```

谢谢你帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:42:44.253

请尝试下一个：

```
LabCallBack2(**void ***_method) 
```

我在其他情况下使用过这个技巧，它适用于 cython

# android - 异步任务不会停止

> ID：12792376
> 
> 赞同：2
> 
> 时间：2012-10-09T03:20:44.553
> 
> 标签：android, multithreading, android-asynctask

```
package com.example.asynctask;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.ProgressBar;

public class MainActivity extends Activity {
    ProgressBar progressbar;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        progressbar = (ProgressBar) findViewById(R.id.progressBar);
    }

    class ProgressTask extends AsyncTask<Integer, Integer, Void> {

        private boolean flag = true;

        @Override
        protected void onPreExecute() {
            progressbar.setMax(100);
        }

        @Override
        protected void onCancelled() {
            //progressbar.setMax(0);
            flag = false;
            Log.v("onCancelled:flag", String.valueOf(flag));
        }

        @Override
        protected Void doInBackground(Integer... params) {
            // TODO Auto-generated method stub
            int start = params[0];
            for (int i = start; i <= 100; i=i+10) {

                if (!flag) {
                    break;
                } else {
                    publishProgress(i);
                    try {
                        Thread.sleep(3000);
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        Log.e("ThreadError", e.toString());
                    }
                }
            }
            return null;
        }

        @Override
        protected void onProgressUpdate(Integer... values) {
            progressbar.setProgress(values[0]); 
        }

        @Override
        protected void onPostExecute(Void result) {
            Log.v("Progress", "Finish");
        }

    }

    public void onClick(View v) {
        ProgressTask task = new ProgressTask();

        switch (v.getId()) {
        case R.id.start:
            task.execute(10);
            break;

        case R.id.stop:
            task.cancel(true);
            break;
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
} 
```

这是一个简单的 AsyncTask 应用程序，当您点击开始时，它会开始更新进度条。但是当你停止时，它不会停止。事情是当你调用***task.cancel(true)***时， onCancelled ***()***方法会被调用并将 flag 的值更改为**false**，但在***onCancelled()***中 flag 的值仍然为 true。我也尝试过***isCancelled()***代替标志变量，但没有成功。有一刻我的问题类似于[Ollie C](https://stackoverflow.com/questions/4959628/android-asynctask-wont-stop-when-cancelled-why)，但在我的情况下没有抛出异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:23:12.517

正如文辉在评论中指出的那样，我犯了一个愚蠢的错误，我在***onClick(View v)***中声明并实例化了任务。

# ruby-on-rails-3 - Rails 3 路由嵌套

> ID：12792377
> 
> 赞同：0
> 
> 时间：2012-10-09T03:21:01.203
> 
> 标签：ruby-on-rails-3, routing, rails-routing

我的 Rails 应用程序路由如下所示：

```
match 'Events/New' => 'event#new'
match 'Events/:date' => 'event#show', :date => /[A-Z][a-z]{2}-\d{2}-\d{4}/
match 'Events/:date/Venue' => 'event#venue', :date => /[A-Z][a-z]{2}-\d{2}-\d{4}/
match 'Events/:date/Speakers' => 'event#speakers', :date => /[A-Z][a-z]{2}-\d{2}-\d{4}/ 
```

有什么方法可以嵌套并清理它吗？我怀疑它在 :date 上多次运行正则表达式，而嵌套理论上可以使它运行一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:18:45.827

看看： http: [//guides.rubyonrails.org/routing.html#controller-namespaces-and-routing](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing) `scope`应该可以解决您的问题！就像是：

```
scope :module => "events" do
  // ...
end 
```

# c# - System.ArgumentNullException：值不能为空

> ID：12792378
> 
> 赞同：3
> 
> 时间：2012-10-09T03:21:01.203
> 
> 标签：c#, asp.net-mvc-3, unit-testing, razor

我正在为我的 CRUD 创建一个单元测试，并在我的 Delete 测试方法中收到这种错误：

```
System.ArgumentNullException: Value cannot be null. 
```

我检查并发现每当我运行测试时，我的用户 ID 下的内容已经被删除，但在我的测试结果栏中收到“失败”状态。谁能帮我解决我的问题？

```
Error Message: Test method TestProject1.UserTest.Delete threw exception: 
System.ArgumentNullException: Value cannot be null.
Parameter name: entity 
```

这是我的代码：

```
[TestMethod]
public void Delete()
{
taskModelContainer db = new taskModelContainer();

int userID = 7;

TaskMgr.Models.User UserEntity = new TaskMgr.Models.User();

UserEntity.userID = userID;

UserController User = new UserController();

ActionResult result = User.DeleteConfirmed(UserEntity.userID);
int id = Convert.ToInt32(User.ViewBag.id);
User Users = db.Users.Single(e => e.userID == id);

Assert.IsNull(Users.userID);

} 
```

控制器：

```
[HttpPost, ActionName("Delete")]
    public ActionResult DeleteConfirmed(int id)
    {
        User user = db.Users.Find(id);
        db.Users.Remove(user);
        db.SaveChanges();
        var qry = from e in db.Users orderby e.userID descending select e.userID;
        int eID = qry.First();
        ViewBag.id = user.userID;
        return RedirectToAction("Index");
    } 
```

它停在控制器的这一行：db.Users.Remove(user);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T06:42:09.183

我通过这样做解决了我的问题：

```
[TestMethod]
    public void Delete()
    {
        taskModelContainer db = new taskModelContainer();

        int userID = 41;

        TaskMgr.Models.User UserEntity = new TaskMgr.Models.User();

        UserEntity.userID = userID;

        UserController User = new UserController();

        ActionResult result = User.DeleteConfirmed(UserEntity.userID);

        var del = from e in db.Users where e.userID == UserEntity.userID select e;
        var delete = del.Count();

        Assert.AreEqual(0, delete);

    } 
```

我进行了查询并检查了用户ID及其内容是否被删除。我没有更改控制器中的任何内容。

# xml - 已发布记录目录的数据库与 XML

> ID：12792379
> 
> 赞同：1
> 
> 时间：2012-10-09T03:21:05.807
> 
> 标签：xml, database, relational

我正处于一个项目的最后阶段，该项目作为几个仅购物车提供商的后端（他们只提供“购物车”服务）。该应用程序允许供应商创建项目、图像等目录并将它们“发送”到他们的服务。繁重的工作是通过关系数据库完成的。现在是决定目录访问方法的时候了。

目前，每个部分（面包屑、项目等）都被创建并存储在只读数据库中，供应商在该数据库中，只需一行代码，就可以显示他们的分类日志的不同部分。不需要关系查询。这种方法没有问题。事实上，他们的整个目录是一个单一文件的解决方案。图像和数据存储在我们的服务器上。不在供应商网站上。

我说了这么多是为了问这个。将整个目录（不包括图像）作为 XML 文件提供给每个供应商并将访问我们数据库的供应商代码更改为访问“他们的”本地 XML 文件的代码会更好吗？

如果我能澄清，请告诉我。

我应该提到供应商访问的数据只能通过允许的 SELECT 语句来实现。准备好记录以允许*极其*轻松的数据访问（即从面包屑表中选择面包屑，其中供应商 = 1 和类别 = 2）并交付整个路径。列表等也是如此。目标是具有简单的访问代码。

从目录中选择类别、面包屑、项目列表，其中 itemid = 1 和 vendor = 2 提供所需的 html：回显面包屑；回声类别；在需要的地方在他们的网页上回显项目列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T03:26:38.003

第二种方法的危险 - 允许外部各方访问您的数据库以检索值，随着时间的推移，您可能需要拥有复杂的规则或新的业务逻辑，而您将无法交付。

如果您的客户可能会调用您的 Web 服务，您可以在其中嵌入业务逻辑。

根据我的经验，我们的系统以批发方式向一些外部系统开放，即它们能够`select`在我们的 DBMS 上执行语句。这会导致我们的 DBMS 性能下降，并且我们完全无法限制使用，因为我们没有正确计划这种非功能性预期。

因此，我对您的建议是针对您的情况，使用网络服务并通过`XML`/交换信息`JSON`。

# jsf-2 - 如何获取rich:pickList 中的信息？

> ID：12792382
> 
> 赞同：0
> 
> 时间：2012-10-09T03:21:26.723
> 
> 标签：jsf-2, richfaces

[我按照richfaces http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=pickList&skin=blueSky](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=pickList&skin=blueSky)中的示例创建了我的rich:pickList

我的问题是选定列表中没有信息显示。那么我怎样才能得到它呢？

```
My Edit.xhtml file:
<rich:pickList value="#{controller.selectedStudent}" var="f" sourceCaption="Available" targetCaption="Selected" listWidth="195px" listHeight="100px" orderable="true">
    <f:selectItems value="#{controller.studentList}" var="test" itemValue="#{test}" itemLabel="#{test.name}" />
</rich:pickList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T03:01:19.163

我认为这是来自 Richfaces 选择列表的错误，因为所选项目（右）必须与左选择列表中的对象相同

1.  创建 2 个列表：左选择列表和右选择列表。
2.  在左选择列表中找到元素并将其放入右选择列表中。

# javascript - 如何让 Angular.js 在 Windows 8 商店应用程序中工作？

> ID：12792383
> 
> 赞同：14
> 
> 时间：2012-10-09T03:21:37.897
> 
> 标签：javascript, angularjs, windows-8, microsoft-metro, winjs

应用程序运行但 Angular 数据对象无法识别。

这是我得到的 JavaScript 错误：

```
Exception was thrown at line 1059, column 11 in ms-appx://28934b41-4dd2-4414-b9a9-
a73c11c1b743/js/angular.js
0x800a139e - JavaScript runtime error: No module: ngLocale
Exception was thrown at line 4473, column 9 in ms-appx://28934b41-4dd2-4414-b9a9-
a73c11c1b743/js/angular.js
0x800a139e - JavaScript runtime error: HierarchyRequestError
The program '[5112] WWAHost.exe' has exited with code 1 (0x1). 
```

这是 angular.js 中第 1059 行附近的函数：

```
return ensure(modules, name, function() {
    if (!requires) {
      throw Error('No module: ' + name);
    } 
```

这是第 4473 行附近的函数：

```
 if (parent) {
    parent.replaceChild(newNode, oldNode);
  } 
```

我能够修复遇到的第一个错误：

```
Unhandled exception at line 2031
 JavaScript runtime error: Unable to add dynamic content 
```

通过包装所有 angular.js`MSApp.execUnsafeLocalFunction`

```
 MSApp.execUnsafeLocalFunction(function () {
          ....
      }); 
```

这些错误来自我按照 Angular.js 主页中的待办事项列表示例创建的测试应用程序。

怎么办？根据我参加的免费 Microsoft 活动，“将任何第三方 JavaScript 框架/库添加到 Windows 8 应用程序很容易！” 我可能对此很陌生……但我认为这并不容易！

甚至可以将 Angular.js 与 Windows 8 应用程序一起使用吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-28T05:07:27.243

原因是 Angular`<!-- -->`为 ng-repeat 和类似指令放置了 html 注释标签。不幸的是，微软认为这些在使用 .innertHTML 从 Javascript 中输入时是不安全的，并且是不允许的。这可以在这里找到：

[http://msdn.microsoft.com/en-us/library/windows/apps/hh465388.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465388.aspx)

它发生在 jQLite 的第 1534 行：

```
var div = document.createElement('div');
            // Read about the NoScope elements here:
            // http://msdn.microsoft.com/en-us/library/ms533897(VS.85).aspx
            div.innerHTML = '<div>&#160;</div>' + element; // IE insanity to make NoScope elements work!
            div.removeChild(div.firstChild); // remove the superfluous div 
```

发生的事情是元素是

```
<!-- ngRepeat: item in arrayTest --> 
```

然后当 angular 执行 div.innerHTML = ... 时，元素被删除。如果在 div.removeChild 处设置断点，您会注意到 div.innerHTML 没有该元素。

[编辑] 写完这个回复后，我尝试添加

```
MSApp.execUnsafeLocalFunction(function () { div.innerHTML = '<div>&#160;</div>' + element }); 
```

有用！显然，您必须将所有 angularjs 包装在 MSApp.execUnsafeLocalFunction 中，然后专门包装该行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-24T22:09:55.630

I got it working by adding `ng-csp` to the HTML tag in my store app. This enables Content Security Policy, which disables things like 'eval'. I used the jQuery(v2.1.1) and the Angular(v1.3.0-beta.13).

More on `ng-csp` in the [AngularJS documentation](https://docs.angularjs.org/api/ng/directive/ngCsp).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-12T16:45:31.640

在我的情况下，我用 MSApp.execUnsafeLocalFunction 包装了**angularjs**，我只使用了 data-ng-repeat 而不是 ng-repeat

# jquery - 每个动态加载的按钮的点击功能

> ID：12792387
> 
> 赞同：0
> 
> 时间：2012-10-09T03:22:28.827
> 
> 标签：jquery

我已经动态加载了带有按钮的字段，例如

```
<input class="upload_image_23" type="text" size="36" name="products_image_large_new_23" value="" />
<input class="upload_image_button_24" type="button" value="Upload Image" />
<input class="upload_image_23" type="text" size="36" name="products_image_large_new_23" value="" />
<input class="upload_image_button_24" type="button" value="Upload Image" /> 
```

`upload_image_button_[any-number]`现在我想为所有人修改这个 jquery 函数`products_image_large_new_[any-number]`

```
jQuery(document).ready(function() {

jQuery('.upload_image_button_[any-number]').click(function() {
 formfield = jQuery('.upload_image_[any-number]').attr('name');
 tb_show('', 'media-upload.php?type=image&amp;TB_iframe=true');
 return false;
});

window.send_to_editor = function(html) {
 imgurl = jQuery('img',html).attr('src');
 jQuery('.upload_image_[any-number]').val(imgurl);
 tb_remove();
}

}); 
```

我应该包括`[any-number]`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:26:31.407

`id`要匹配以s 开头的所有元素`#upload_image_`，请使用此选择器：

```
input[id^="upload_image_"] 
```

你的代码会变成：

```
jQuery('input[class^="upload_image_button_"]').click(function() {
  var id = jQuery(this).attr('class').split('_').slice(-1);
  formfield = jQuery('.upload_image_' + id).attr('name');

  tb_show('', 'media-upload.php?type=image&amp;TB_iframe=true');
  return false;
}); 
```

在此处阅读有关属性选择器的更多信息：http: [//api.jquery.com/category/selectors/attribute-selectors/](http://api.jquery.com/category/selectors/attribute-selectors/)

如果你的元素是在那个*确切的*顺序，你也可以使用它来获得`formfield`：

```
 formfield = jQuery(this).prev().attr('name'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T03:27:26.037

尝试

```
 $(document.body).click(function () {
      $("div").each(function (i) {
       formfield = jQuery('#upload_image_[any-number]').attr('name');
      tb_show('', 'media-upload.php?type=image&amp;TB_iframe=true');
     return false;

      });
    }); 
```

# asp.net - 我在 IIS 服务器中本地托管的 asp.net C# 站点出现错误

> ID：12792388
> 
> 赞同：0
> 
> 时间：2012-10-09T03:22:39.907
> 
> 标签：asp.net, iis-7.5

我在 IIS 服务器中本地托管的 asp.net C# 站点出现错误“HTTP 错误 500.19 - 内部服务器错误无法访问请求的页面，因为该页面的相关配置数据无效。” ....请提前帮助和感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T03:37:22.147

这可能会有所帮助... [asp.net iis7.5 http 500.19 错误](http://forums.asp.net/t/1836605.aspx/1?IIS%207%205%20HTTP%20Error%20500%2019%20Internal%20Server%20Error)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T03:28:18.597

它可能是格式错误的 Web.Config 文件。使用浏览器打开 Web.Config 文件。如果格式错误，它将无法打开。

类似的问题和答案在这里：

[无法访问请求的页面，因为该页面的相关配置数据无效错误](https://stackoverflow.com/questions/9216158/the-requested-page-cannot-be-accessed-because-the-related-configuration-data-for)

# windows-server-2008 - 如何在 Windows Server 上管理低于 85% 的 CPU 利用率？

> ID：12792389
> 
> 赞同：-1
> 
> 时间：2012-10-09T03:23:05.423
> 
> 标签：windows-server-2008

我们面临一个问题，**java.exe**进程占用完整的**cpu 利用率 (100 %)**，
**操作系统：** Windows Server SP2 2007 版，
**处理器：** Intel(R) Xeon(R) CPU X7542 @ 2.67 Ghz 2.67 Ghz
**内存（RAM）：** 8.00 GB
系统类型：32 位操作系统
**Java 堆内存：** 1 GB 已分配

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:02:28.530

CPU 使用率高达 100% 的原因有很多。
Java以其线程和排队过程而闻名。所以让它一一处理。
怀疑您的 java.exe 是否命中任何数据库，它是否调用任何数据库来处理。
如果您能详细说明，我可以提供更准确的解决方案

# extjs4 - Sencha Ext JS4.. [Grid ActionColumn] 不显示

> ID：12792392
> 
> 赞同：0
> 
> 时间：2012-10-09T03:23:33.117
> 
> 标签：extjs4, extjs

我是 sencha js 4 的新手。我已经按照 sencha 文档指南中关于如何使用的说明进行操作`actioncolumn`，但它没有显示在我的网格上。

“我错过了哪里？。有什么我跳过的吗？还是有什么我没有包括在内的？帮助..”

我使用`kitchenSink`sencha 提供给我的样本。我试图操纵它并从示例`actioncolumn`中的一个网格中添加了一个`kitchenSink`

这是我的代码：

```
Ext.define('PayrollLite.view.GridExample', {
extend: 'Ext.grid.Panel',

frame: true,
width: 1200,
height: 750,

store: 'Employees',

columns: 
[
    { text: 'Employee Code', width: '10%', dataIndex: 'EmployeeCode' },
    { text: 'Last Name', width: '22%', dataIndex: 'LastName'},
    { text: 'First Name', width: '25%', dataIndex: 'FirstName' },
    { text: 'Middle Name', width: '15%', dataIndex: 'MiddleName' },
    { text: 'Position', width: '15%', dataIndex: 'PositionID', sortable: false },
    {
        xtype:'actioncolumn',
        width:50,
        items: [{
            icon: 'extjs/examples/shared/icons/fam/cog_edit.png',  // Use a URL in the icon config
            tooltip: 'Edit',
            handler: function(grid, rowIndex, colIndex) {
                var rec = grid.getStore().getAt(rowIndex);
                alert("Edit " + rec.get('firstname'));
            }
        },{
            icon: 'extjs/examples/restful/images/delete.png',
            tooltip: 'Delete',
            handler: function(grid, rowIndex, colIndex) {
                var rec = grid.getStore().getAt(rowIndex);
                alert("Terminate " + rec.get('firstname'));
            }
        }]
    }
]
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:23:03.750

我最好的猜测是宽度 - 尝试将其他列设置为 flex 宽度。像这样：

```
Ext.define('PayrollLite.view.GridExample', {
extend: 'Ext.grid.Panel',

frame: true,
width: 1200,
height: 750,

store: 'Employees',

columns: 
[
    { text: 'Employee Code', flex: '1', dataIndex: 'EmployeeCode' },
    { text: 'Last Name', flex: '2.2', dataIndex: 'LastName'},
    { text: 'First Name', flex: '2.5', dataIndex: 'FirstName' },
    { text: 'Middle Name', flex: '1.5', dataIndex: 'MiddleName' },
    { text: 'Position', flex: '1.5', dataIndex: 'PositionID', sortable: false },
    {
        xtype:'actioncolumn',
        width:50,
        items: [{
            icon: 'extjs/examples/shared/icons/fam/cog_edit.png',  // Use a URL in the icon config
            tooltip: 'Edit',
            handler: function(grid, rowIndex, colIndex) {
                var rec = grid.getStore().getAt(rowIndex);
                alert("Edit " + rec.get('firstname'));
            }
        },{
            icon: 'extjs/examples/restful/images/delete.png',
            tooltip: 'Delete',
            handler: function(grid, rowIndex, colIndex) {
                var rec = grid.getStore().getAt(rowIndex);
                alert("Terminate " + rec.get('firstname'));
            }
        }]
    }
]
}); 
```

# mysql - 如何在 MySQL 查询中将一周中的每一天打印为第 1 列，其中并非所有天都有结果

> ID：12792401
> 
> 赞同：1
> 
> 时间：2012-10-09T03:25:10.750
> 
> 标签：mysql, left-join, inner-join, outer-join

我有以下查询，它显示了一周中每一天的计费小时数

```
SELECT DAYNAME(record_date),
      sum(value)
FROM acx_time_records
WHERE
  acx_time_records.state = 3
  AND record_date >= '2012-10-1' AND record_date <= '2012-10-7'    
  AND user_id = 7 
  GROUP BY
  dayname(acx_time_records.record_date)
  ORDER BY weekday(acx_time_records.record_date) 
```

上述查询输出以下结果：

```
Tuesday    9.75
Friday     1 
```

我遇到的问题是我需要将值绘制到一个图表中，该图表已经将 X 轴定义为一周中的每一天：

```
 Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, Sunday 
```

因此，我需要传递一周中的每一天以获得结果，而不仅仅是结果中显示的特定天/小时。我考虑过加入一个新表，该表具有一周中的每个日历日和一天索引，但我不确定这怎么可能。理想的输出是：

```
Monday    0
Tuesday   9.75
Wednesday 0
Thursday  0
Friday    1
Saturday  0
Sunday    0 
```

任何有关我如何完成此任务的提示/建议将不胜感激。我知道这也可以通过将 MySQL 与 PHP 结合来促进，但我正在尝试以一种尽可能只需要 MySQL 的方式来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T05:27:54.423

LEFT JOIN 的解决方案。

您可以按照 newfurniturey 的建议使用附加表或使用一些带有 UNION 的 SELECT。我还在连接表中找到了 WHERE 过滤器。

```
CREATE TABLE week_days(
  week_day_num INT(11) DEFAULT NULL
);

INSERT INTO week_days(week_day_num) VALUES (1),(2),(3),(4),(5),(6),(7);

SELECT
  DAYNAME(atrrecord_date),
  SUM(atr.value),
  COALESCE(SUM(atr.value) , 0)
FROM week_days wd
  LEFT JOIN (
      SELECT * FROM acx_time_records
      WHERE
        acx_time_records.state = 3
        AND record_date >= '2012-10-1' AND record_date <= '2012-10-7'    
        AND user_id = 7 
    ) atr
    ON wd.week_day_num = DAYOFWEEK(atr.record_date)
GROUP BY
  DAYOFWEEK(atr.record_date); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T03:52:04.773

实际上，我建议您按照最初的想法加入另一个表，但是您可以将其设置为带有`LEFT JOIN`子句的简单别名表：

```
SELECT
    days.day,
    IF (value IS NULL, 0, SUM(value))
FROM
    (SELECT 'Monday' AS day UNION SELECT 'Tuesday' UNION SELECT 'Wednesday' UNION SELECT 'Thursday' UNION SELECT 'Friday' UNION SELECT 'Saturday' UNION SELECT 'Sunday') AS days
    LEFT JOIN (
        SELECT * FROM acx_time_records
        WHERE 
            acx_time_records.state = 3
            AND record_date >= '2012-10-1' AND record_date <= '2012-10-7'    
            AND user_id = 7 
    ) AS acx_time_records
        ON DAYNAME(record_date) = days.day
GROUP BY
    days.day
ORDER BY weekday(acx_time_records.record_date) 
```

这将导致选择一周中的每一天（作为单独的行），并且`SUM()`对于每一天，`0`如果没有定义天，将相应地分组。

# functional-programming - 为什么这个 Mathematica 函数会这样？

> ID：12792404
> 
> 赞同：1
> 
> 时间：2012-10-09T03:26:07.163
> 
> 标签：functional-programming, wolfram-mathematica

我对这个函数的行为感到非常困惑：

```
david[x_] := 5; 6; 7

david[] 
```

返回

```
7 
```

但`david[3]`返回`5`

为什么会这样？我认为第二种情况也应该返回 7；为什么不呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T03:42:56.840

令人惊讶的是，该功能并没有出现异常。事实上，它的行为是正确的。定义函数 david 后，用分号终止它，然后是常数 (6)，其值被分号抑制，然后是未抑制的常数。因此，当您尝试评估单元格时，函数 david 的值在每次运行时都设置为 5：

```
david[x_] := 5; (* This is where the 5 comes from when you try to evaluate the cell*) 
```

**你得到 7 的事实是因为你有一个未压缩的常数。**

与此相比：

```
david[x_] := 5; 6; 7; 9; 12; (* 6, 7, 9 and 12 will never show up, since they are suppressed *) 
```

相对：

```
david[x_] := 5; 6; 7; 9; 12; 17 (* 17 will **always** show up, since it is unsuppressed *) 
```

您观察到的是 Mathematica 语言的怪癖之一。

# php - 使用 PHP 和/或 jQuery 验证克隆/可重复输入

> ID：12792405
> 
> 赞同：1
> 
> 时间：2012-10-09T03:26:17.677
> 
> 标签：php, jquery, validation, clone

我正在尝试在 PHP 中使用`jQuery.clone()`. 一切正常，除了克隆数据的返回。

在我的 PHP 文件中，我有：

```
$i = 0;
$valid_input['image'] = $input['image'][$i]; 
```

然后

```
return $valid_input; 
```

在图像上传输入中使用：

```
<input type="hidden" class="image" name="image[image]['.$i.']" value="'.$theme_options['image'].'" />
    <input type="button"  class="upload-button button" value="'. __( 'Upload Image', 'theme' ).'" /> 
```

$i 的值设置为 0 并使用 jQuery 克隆进行计数。

问题是克隆的字段在提交后消失了。原始字段“image['image'][0]”被保存并返回有效，但其他字段（image['image'][1]、[2]、[3]...）不验证！

如果我改变这样的值`$i`：

```
$i = 1;
$valid_input['image'] = $input['image'][$i]; 
```

那么原始输入不提交，只提交克隆，因为原始为[0]，克隆为[1]，但提交后克隆返回为[0]。

我试过这样的事情：

```
$i = 0;
$valid_input['image'] = $input['image'][$i];
$i++; //-- I know, I'm stupid...this will not count the input! 
```

拜托，有人可以帮我解决这个问题吗？我怎样才能验证克隆的字段？我的谷歌搜索都被标记为已访问，我发誓我没有找到任何可以解决这个问题的方法！任何帮助将不胜感激，在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:45:58.153

请试试这个

使用输入名称作为图像[]，因此您将通过使用 foreach 将图像的值作为一个简单的数组进行验证。

IE，

```
$arrValue = $_POST['image'];

foreach ($arrValue as $key=>$value) {
//do the operations here

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T04:14:26.067

你的意思是这样的：

```
for($i = 0; $i < count( $input["image"] ); $i++) {
   echo $input["image"][$i];
} 
```

还是我误会了你

# javascript - 查找和替换 Javascript 变量中的文本

> ID：12792411
> 
> 赞同：-1
> 
> 时间：2012-10-09T03:26:42.473
> 
> 标签：javascript, jquery, ajax

我有这个 Javascript：

```
var = "<form action="/issues/[[issue_id]]/create-condition/" method="post" class="r_issueform" name="testform">" 
```

我在同一页面上有这个 HTML：

```
<input type="hidden" class="issue" name="issue_name" value="20"/> 
```

现在使用 Javascript，我想用隐藏文本框的值替换 issue_id。关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:34:32.950

试试[这个](http://jsfiddle.net/C37Jh/)jsFiddle 例子。添加了正确的 var 声明。

```
var form = '<form action="/issues/[[issue_id]]/create-condition/" method="post" class="r_issueform" name="testform">';

form  = form.replace('[[issue_id]]', $('input.issue').val()); 
```

# algorithm - 组合最佳匹配

> ID：12792414
> 
> 赞同：2
> 
> 时间：2012-10-09T03:26:55.283
> 
> 标签：algorithm, combinatorics, mathematical-optimization

假设我有一个`Group`包含`Element`对象列表的数据结构，这样每个组都有一组*唯一*的元素。：

```
public class Group
{
  public List<Element> Elements;
} 
```

假设我有一个需要某些元素的人口列表，每个人口都有一*组独特*的所需元素：

```
public class Population
{
  public List<Element> RequiredElements;
} 
```

我有无限数量的每个定义的组，即它们*不被人群消费*。

假设我正在查看一个特定的`Population`. 我想找到组的*最佳匹配*，以使多余的元素最少，并且*没有不匹配的元素*。

例如：我的人口需要木材、钢铁、谷物和煤炭。唯一可用的组是 {wood, herbs}, {steel, coal, oil}, {grain, steel} 和 {herbs, meat}。

最后一组 - {herbs，meat} 我的人群根本不需要，所以没有使用。所有其他的都是需要的，但不需要草药和油，所以它被浪费了。此外，钢在最小集合中存在两次，因此也浪费了一批钢。此示例中的*最佳匹配*浪费了 3。

所以对于几百个`Population`对象，我需要找到*最小浪费的最佳匹配*并计算浪费了多少元素。

我什至如何开始解决这个问题？一旦我找到了一个匹配，计算浪费是微不足道的。一开始就很难找到匹配项。我可以列举所有的可能性，但有几千个人口和数百个群体，这是一项艰巨的任务。特别是考虑到整个事情都在模拟退火算法的每次迭代中。

我想知道我是否可以将整个事情制定为一个混合整数程序并在每次迭代时调用像 GLPK 这样的求解器。

我希望我已经正确解释了这个问题。我可以澄清任何不清楚的地方。

* * *

这是我的二进制程序，对于那些感兴趣的人...

`x`是决策向量，是 {0,1} 的一个元素，表示有问题的总体是否从组 i 接收。每个组都有一个条目。

`b`是列向量，是 {0,1} 的一个元素，它表示所讨论的人口需要/不需要哪些资源。每个资源都有一个条目。

`A`是一个矩阵，是 {0,1} 的一个元素，表示哪些资源属于哪些组。

该程序是：

最小化：((Ax - b)' * 1-vector) + (x' * 1-vector);

服从：Ax >= b；

约束只是说必须满足所有必需的资源。目标是最小化所有多余的和使用的组总数。（即使用 1 组 0 过量优于使用 5 组 0 过量）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T03:40:56.210

你的意思是[最大匹配](http://en.wikipedia.org/wiki/Matching_%28graph_theory%29#Maximal_matchings)问题吗？

您需要构建一个[二分图](http://en.wikipedia.org/wiki/Bipartite_graph)，其中一侧是您的人口，另一侧是组，如果组 A 和人口 B 在其集合中，则边缘存在于组 A 和人口 B 之间。

要找到最大**边缘**匹配，您可以轻松使用 Kuhn 算法，[TopCoder 上](http://apps.topcoder.com/forums/?module=Thread&threadID=684427&start=0&mc=10#1276996)有详细描述。
但是，如果你想找到最小边支配集（覆盖所有顶点的最小边集），问题就变成了 NP-hard 并且不能在多项式时间内解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T04:29:30.813

您可以为每个总体制定一个整数规划，`P`如下所示。使用二元变量 x [j]来表示是否选择了组 j。令 A 为二元矩阵，当且仅当项目 i 存在于组 j中时 A [ij为 1。]那么整数程序是：

最小*E* [i,j] (x [j] A [ij] )

st *E* [j] x [j] A [ij] >= 1 对于所有 i in `P`。

x [j] = 0，对于所有 j 为 1。

请注意，您可以通过`|P|`从上述 IP 的最佳解决方案中减去来获得最小的浪费。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T06:34:40.833

看看加权集覆盖问题，我认为这正是你上面描述的。可以在[此处](http://en.wikipedia.org/wiki/Set_cover)找到（未加权）问题的基本描述。

找到上面定义的最小浪费等效于找到一个集合覆盖，使得覆盖集的基数之和最小。因此，每个集合（=一组元素）的权重必须定义为等于其基数。

Since even the unweighted the set cover problem is NP-complete, it is not likely that an efficient algorithm for your problem instances exist. Maybe a good greedy approximation algorithm will be sufficient or your purpose? Googling weighted set cover provides several promising results, e.g. this [script](http://pages.cs.wisc.edu/~shuchi/courses/880-S07/scribe-notes/lecture03.pdf).

# python - 如何在 python 中将 OAuth2Credentials 与 Google API gdata 客户端一起使用？

> ID：12792422
> 
> 赞同：0
> 
> 时间：2012-10-09T03:28:02.627
> 
> 标签：python, oauth-2.0, gdata, gdata-api, google-data-api

我已经弄清楚了 OAuth2 的工作原理（通过[https://developers.google.com/api-client-library/python/guide/aaa_oauth](https://developers.google.com/api-client-library/python/guide/aaa_oauth)`credentials` ），现在有一个我想用于的 OAuth2Credentials 对象（我们称之为 object ） Google Apps 配置目的（此处的示例使用站点，但可以是任何 gdata api）

如果我尝试：

```
client = gdata.sites.client.SitesClient(site="test-site",domain='my.domain')
client = credentials.authorize(client) 
```

我明白了

```
TypeError: new_request() got an unexpected keyword argument 'http_request' 
```

当我尝试做任何事情时

如果我尝试

```
client = gdata.sites.client.SitesClient(site="test-site",domain='my.domain', auth_token=credentials) 
```

或者

```
client = gdata.sites.client.SitesClient(site="test-site",domain='my.domain', auth_token=credentials.access_token) 
```

我得到一个 AttributeError 相关对象（凭据或凭据。access_token）没有属性“修改请求”

有什么想法我可以尝试吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T06:11:11.257

这个[答案](https://stackoverflow.com/questions/7359725/google-sites-api-oauth2-on-appengine)说你必须在将 OAuth2Credentials 对象传递给`SitesClient(auth_token=credentials)`. 它有一个答案，向您展示如何进行猴子修补

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T05:38:16.580

我不完全确定谷歌的客户端代码，但你总是可以尝试（无耻插件）[制裁](https://github.com/demianbrecht/sanction)。这是我不久前在 Github 和 PyPI 上编写的 OAuth 2.0 客户端。

优点：

*   作为一个惊人的 55 LOC，它*非常*容易摸索。如果出现问题，您不必在这里提问。您*应该*能够理解发生了什么；）
*   它已经过 8 个不同的提供商（包括 Google）的测试

缺点：

*   显然需要重构您当前的代码
*   不假设（因此提供）持久性实现
*   不提供 API 实现（您必须对您正在处理的 OAuth 2.0 公开的 API 有基本的了解）

# java - 声明 List l = new ArrayList() 和 ArrayList al = new ArrayList()

> ID：12792423
> 
> 赞同：1
> 
> 时间：2012-10-09T03:28:06.013
> 
> 标签：java

> **可能重复：**
> [List 与 ArrayList 作为引用类型？](https://stackoverflow.com/questions/4062982/list-versus-arraylist-as-reference-type)

声明 List l = new ArrayList() 和 ArrayList al = new ArrayList() 有什么区别

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T03:30:32.360

声明`List l = new ArrayList()`l 时仅限于接口 List 提供的方法，而声明 l 时`ArrayList al = new ArrayList()`可以使用 arraylist 中的所有方法和字段。

当您声明它时`List l`，您可以为自己提供更大的灵活性，因为如果您想在不破坏任何代码的情况下，您可以在以后将 ArrayList 更改为更合适的东西。

编辑

正如 Chin Boon 指出的那样，您可以强制`l`转换为 ArrayList，从而在其上使用 ArrayLists 的方法。但是，*通常*如果您发现自己依赖于 ArrayList 的特定方面，那么对接口（List）进行编程就没有什么意义了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T03:31:27.240

`List`是一个`Interface`（ArrayList 的超类型，LinkedList）。当您坐着时，`List l = new ArrayList();` 您正在创建一个具有超类引用的子类对象，因此您只能访问超类的方法，但如果方法被覆盖，则将调用子类方法。

在你的情况下：

```
List l = new ArrayList() 
```

您将只能调用在列表接口内声明的方法和字段。

```
ArrayList al = new ArrayList() 
```

您将能够从列表和数组列表中调用方法和字段。

当您使用方法 1 创建数组列表时

```
List l = new ArrayList(); 
```

稍后您可以使用相同的引用来创建一个 LinkedList

```
l = new LinkedList(); 
```

你不能使用方法2：

```
ArrayList al = new ArrayList()

al = new LinkedList()// cannot do this 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T03:34:47.253

将变量声明为 List 类型可以准确地告诉编译器它将允许您使用该变量做什么。在这种情况下，您可以执行 List 接口定义的所有操作。由于 ArrayList 实现了 List，您当然可以将 ArrayList 分配给您的 List 变量，但您只能访问 List 接口中定义的内容，即使 ArrayList 定义了 List 接口指定之外的其他方法。另一方面，将类型声明为 ArrayList 可以让您执行 ArrayList 类定义的任何操作，即使它不是由 List 类型定义的。但是，如果您想稍后将变量重新分配给其他类型的列表，您将无法这样做，因为编译器的类型检查器将需要 ArrayList。

# regex - 为 '\c+' 、' \i\c* ' 和 ' [\i-[:]][\c-[:]]* ' 评估 ' regexp ' 的问题

> ID：12792424
> 
> 赞同：5
> 
> 时间：2012-10-09T03:28:12.810
> 
> 标签：regex, user-interface, xsd, tcl, validation

我正在研究 TCL GUI，我从 XML 模式获取 GUI 的数据树结构，并且我必须验证 XML 模式中的限制的输入字段。在我正在使用的 XML 模式中，我有简单的类型 NMTOKEN Name 和 NCName ，它们分别具有模式限制 ' `\c+`' 、 ' `\i\c*`' 和 ' `[\i-[:]][\c-[:]]*`' 。我用来检查的代码是

```
method validatePatternValue { value } { 
    set patternCheck 1

    set pattern "^($patternValue)\$"
    set patternCheck [regexp $pattern $value]

    if {$patternCheck == 0} {
        tk_messageBox -message "Only Characters within range $patternValue for $patternValueType is\
                                accepted "
        return 0
    } 

    return 1
} 
```

并且每当 $pattern 是这些 ' `\c+`' 、 ' `\i\c*`' 和 ' `[\i-[:]][\c-[:]]*`' 之一时，我的文本字段不接受任何输入并不断抛出错误异常对话。

只是为了添加更多信息，我遇到了这个网站，其中提供了一些关于我关于处理“ `\i`”和“ `\c`”组合的问题的好信息。但是除了以下链接中建议的方法之外没有其他方法：[XML Schema Character Classes](http://www.regular-expressions.info/xmlcharclass.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T07:58:55.283

转义序列在 Tcl regexp 中的`\c`作用与在 XML-Schema regexp 中的作用不同。

在 XML 模式中

> `\c`匹配 XML 名称中第一个字符之后可能出现的任何字符，即`[-._:A-Za-z0-9]`

在 Tcl 中

> `\cX`（其中 X 为任意字符）低 5 位与 X 相同，其他位全为零的字符

您发送的链接中也明确说明了

> 请注意，\c 速记语法与许多其他正则表达式风格中使用的控制字符语法冲突。

您应该尝试使用`[-.:\w]`而不是`\c`

也是如此`\i`，它在 Tcl 和 XML 中不一样

# vba - Excel 在 msgbox 中显示变量数据

> ID：12792428
> 
> 赞同：2
> 
> 时间：2012-10-09T03:28:24.033
> 
> 标签：vba, excel

有两列。一个有一些表的名称，第二个有它的值。

```
Dim rng As Range
    Set rng = [AH3:AH50]  ' <-- adjust to your requirements    
    If Application.WorksheetFunction.Max(rng) > 95 Then    
    MsgBox "tables has sixe more than 95"    
End If 
```

需要的帮助是：
1\. Msgbox 还应该显示它找到的大于 95 的单元格的实际值。
2\. 它还应该显示在第一步中显示值的相应表的名称。

msgbox 输出应该是：
“ABCD 表的当前大小：96.6”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:36:24.350

此代码假定表名位于表值之前的列中。如果不是这种情况，请更改`Offset`参数。`-1`

```
Sub TestRange()
    Dim rngValues As Range
    Dim strTableName As String
    Dim cell As Range

    ' Adjust ranges to suit
    Set rngValues = [C2:C8]

    For Each cell In rngValues
        If cell.Value > 95 Then
            MsgBox Range(cell.Address).Offset(0, -1).Value _
                & " table has current size: " & cell.Value
        End If
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T05:19:40.213

试试这个

更新以查找所有实例 > 阈值

```
Sub TestRange()
    Dim rngValues As Range
    Dim rngTables As Range
    Dim mxVal As Variant
    Dim idx As Long

    ' Adjust ranges to suit
    Set rngValues = [F1:F10]
    Set rngTables = [E1:E10]
    mxVal = Application.WorksheetFunction.Max(rngValues)
    Do While mxVal > 95
        idx = Application.Match(mxVal, rngValues, 0)
        MsgBox Application.Index(rngTables, idx) & " table has current size: " & mxVal

        If idx < rngValues.Rows.count Then
            Set rngValues = rngValues.Offset(idx, 0).Resize(rngValues.Rows.count - idx)
            Set rngTables = rngTables.Offset(idx, 0).Resize(rngTables.Rows.count - idx)
            mxVal = Application.WorksheetFunction.Max(rngValues)
        Else
            mxVal = 0
        End If
    Loop
End Sub 
```

# java - 为什么 AbstractAction 不实现 actionPerformed()？

> ID：12792433
> 
> 赞同：1
> 
> 时间：2012-10-09T03:29:23.137
> 
> 标签：java, awt, actionlistener, abstract-action

类`AbstractAction`实现了接口`Action`，但是in `Action`，有一个方法 `actionPerformed(ActionEvent e)`继承自接口`ActionListener`
我知道类实现一个接口必须提供该接口中方法的所有实现但是我发现in
没有实现，为什么？`actionPerformed(ActionEvent e)``AbstractAction`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T03:35:41.697

AbstractAction 是一个抽象类，因此它不必实现接口上的所有方法。抽象类不能被实例化，因此如果不创建它的子类就不能使用它们。只有具体类（即非抽象类）必须提供接口所有方法的实现。如果您将 AbstractAction 子类化，您的子类将必须实现 actionPerformed() 或者它也必须是抽象的。

现在这些是规则，但 AbstractAction 实现 actionPerformed() 没有意义，因为它不可能提供有用的实现。每个子类都必须覆盖它的定义，这使其成为标记为抽象的良好候选者。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T03:34:10.733

> 我知道类实现一个接口必须提供该接口中方法的所有实现

在抽象类的情况下不正确。只有具体的类应该为它扩展的超类（将是抽象的）中的所有抽象方法以及它实现的接口中的所有方法提供实现。

> 但是我发现AbstractAction中没有actionPerformed(ActionEvent e)的实现，为什么？

他们希望在该类中保持抽象，以确保扩展该类的任何具体都提供该方法的实现。

此外，它会执行什么默认操作（可能是空的或什么都没有）？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T03:38:15.360

一个`abstract`类是允许不完整的。抽象类不需要实现接口或父抽象类指定的任何或所有方法。此外，抽象类可以声明任何子类必须实现的新抽象方法。

将类抽象化的代价是它不能被直接实例化。也就是说，必须扩展抽象类才能使用。

# php - 将字符串值设置为 SimpleXMLElement

> ID：12792434
> 
> 赞同：0
> 
> 时间：2012-10-09T03:29:34.820
> 
> 标签：php, xml

如何将 Moo 设置为元素，如下所示：

```
$xmlEl = new SimpleXMLElement('<Get>Moo</Get>'); 
```

如果我这样初始化元素：

```
$xmlEl = new SimpleXMLElement('<Get></Get>'); 
```

这是一件简单得可笑的事情。但我知道它既不是 addAttribute() 也不是 addChild()。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:35:58.653

设置根元素的值：

```
<?php
  $xmlEl = new SimpleXMLElement('<Get></Get>');
  $xmlEl[0] = 'Moo';
?> 
```

# c# - virtual 关键字对 Entity Framework 5 中的实体属性有什么影响？

> ID：12792435
> 
> 赞同：5
> 
> 时间：2012-10-09T03:29:40.263
> 
> 标签：c#, asp.net, .net, entity-framework, entity-framework-5

我知道实体框架中的导航属性必须在它们前面有 virtual 关键字，否则 EF 无法做到导航属性的魔力。但是把 virtual 关键字放在其他属性前面有什么效果呢？我最近看到一个例子，其中实体上的每个属性都用 virtual 关键字声明。如果我这样做，EF 5 真的会延迟加载每个属性，还是我错过了它的工作原理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:41:19.550

延迟加载需要对导航属性使用 virtual 关键字。在所有映射属性上使用虚拟关键字对于动态更改跟踪是必要的。两个选项的所有要求都[在文档中进行了描述](http://msdn.microsoft.com/en-us/library/vstudio/dd468057%28v=vs.100%29.aspx)。

在 EF 4.0 中建议使用动态更改跟踪方法，因为 POCO T4 生成器使用虚拟属性，但由于 EF 4.1[快照更改跟踪被推荐作为初始选项](http://blog.oneunicorn.com/2011/12/05/should-you-use-entity-framework-change-tracking-proxies/)，仅当快照更改跟踪是性能问题的受害者时才转换为动态更改跟踪。

# java - Swingbuilder的多个实例？

> ID：12792444
> 
> 赞同：2
> 
> 时间：2012-10-09T03:30:51.330
> 
> 标签：java, swing, groovy, swingx, swingbuilder

我参加 Groovy 派对（和大多数其他派对一样）有点晚了，而且我能够在网上找到的文档`SwingBuilder`有些有限。我正在尝试在 Groovy 中构建一个游戏应用程序（将我当前的 Java 代码转换为 Groovy）。在 Java 中，我有一个`JFrame`和多个`JPanel`s，其中包括标签、文本字段和按钮以及您可以在构建 GUI 时使用的所有其他有趣的摇摆项目。

所有这些的代码可能很麻烦，必须为每个等等声明变量`JButton`等等`JPanel`，所以当我`SwingBuilder`几天前在 groovy 中发现时，我很自然地欣喜若狂。

然而，这些例子有些有限。所以这是我的初始代码。

```
def Game(){
    mainMenu = new MainMenuPanel()
    gPane = new SwingBuilder()
    gPane.edt{
        frame(size:[1024,768],
            defaultCloseOperation: JFrame.EXIT_ON_CLOSE, location:[75,50], show:true, pack:false){
            container(container:mainMenu){}
            widget(mainMenu)
            }
        }
    }
    mainMenu.shell.show()
} 
```

在`MainMenuPanel`我有这个代码

```
class MainMenuPanel extends JPanel implements ActionListener, KeyListener, ItemListener { 
    public shell
shell = new SwingBuilder()
    shell.panel(id: "mainM",/*size:[512, 354],
    shell.edt{frame(show:true){panel(size:[512, 354],
            layout: new GridLayout(cols:1, rows: 7),*/
            visible:true, constraints: BL.NORTH){

            textLabel = label(text: "Welcome Travelers", horizontalAlignment: 0)
            speak = button(CreateButton("Say Hello", 83), 
                actionPerformed:{ shell.optionPane(message: "Hello World").createDialog(null, "Hello").show()})
            }
        } 
```

当我运行 groovy 脚本时，我得到一个`JFrame`, 里面什么都没有。我尝试了这段代码的各种组合，有时我得到两个框架，但它们并没有相互嵌套。大多数时候我什么都得不到。

我试图做的目的是有一个`MainMenu`类，它返回一个菜单面板，该面板具有控制该面板的功能，并有各种其他类也返回面板，这些面板执行其他各种事情并将它们全部嵌套在窗格中。

是否有可能做到这一点？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:19:15.403

我相信这在功能上与您上面的内容相似：

```
import groovy.swing.SwingBuilder

def mainMenu = { builder ->
  builder.panel( id:'mainM' ) {
    label( text: 'Welcome Travelers' )
    button( text: 'Say Hello', actionPerformed:{
      builder.optionPane( message:'Hello World' )
             .createDialog( null, 'Hello' )
             .show()
    } )
  }
}

new SwingBuilder().with { builder ->
  builder.edt {
    frame( size:[ 1024, 768 ], show:true ) {
      panel()
      mainMenu( builder )
    }
  }
} 
```

希望能帮助到你？

# android - 如何在 Windows 7 中运行“android.bat sdk”

> ID：12792446
> 
> 赞同：7
> 
> 时间：2012-10-09T03:31:04.577
> 
> 标签：android, windows-7, sdk

我已经下载并安装了 Android SDK 并尝试启动`android.bat sdk`但出现以下异常：

```
C:\products\Android\tools>android.bat sdk
Exception in thread "main" java.lang.UnsatisfiedLinkError: no swt-win32-3550 or swt-win32 in swt.library.path,
        java.library.path or the jar file
        at org.eclipse.swt.internal.Library.loadLibrary(Unknown Source)
        at org.eclipse.swt.internal.Library.loadLibrary(Unknown Source)
        at org.eclipse.swt.internal.C.<clinit>(Unknown Source)
        at org.eclipse.swt.widgets.Display.<clinit>(Unknown Source)
        at com.android.sdkmanager.Main.showSdkManagerWindow(Main.java:328)
        at com.android.sdkmanager.Main.doAction(Main.java:302)
        at com.android.sdkmanager.Main.run(Main.java:118)
        at com.android.sdkmanager.Main.main(Main.java:101) 
```

我已经寻找了很长时间的解决方案，但我无法让它发挥作用。有什么我必须先设置的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-08T02:11:49.503

这对我有用：在您的 android.bat 文件中添加以下内容：

```
 -Dswt.library.path = {swt.jar folder path} 
```

在这句话之前：

```
com.android.manager.Main 
```

运行android.bat

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T15:02:09.683

以防万一这仍然困扰着任何人：我遇到了同样的问题。我最终做的是：

1.  搜索 swt.jar 文件（在您的 Android SDK 目录中，查看 tools\lib\x86 或 tools\lib\x86_64）。
2.  使用 jar 解压：

    `mkdir tmp`

    `cd tmp`

    `jar xf <path>\tools\lib\x86\swt.jar`

3.  将dll复制到`tools`文件夹中。

    `copy tmp\*.dll <path>\tools`

之后，我能够运行 SDK 管理器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T04:01:44.087

我认为 jar 文件没有放在正确的位置。

SWT 由两个“部分”组成——独立于平台的纯 java 部分和一个依赖于平台的片段。您是否也添加了平台相关片段？
所以你需要

```
org.eclipse.swt_VERSION.jar

org.eclipse.swt_WINDOWSYSTEM_PLATFORM_VERSION.jar 
```

请参阅此链接以获取设置类[路径](http://docs.oracle.com/javase/1.3/docs/tooldocs/win32/classpath.html)。

[使用 Eclipse 进行 SWT 编程。](http://www.developer.com/java/other/article.php/3330861/SWT-Programming-with-Eclipse.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-11T08:30:39.023

Change the path to swt.jar.

1.  edit "[your sdk_path]\tools\android.bat" file.
2.  find words "%Swt_path%\swt.jar"
3.  Find your Eclipse plugin folder path.
4.  be replace path by [your eclipse\plugins\swt.jar]

example

*   before `classpath "% jar_path%;% swt_path%\swt.jar"`
*   after `classpath "% jar_path%; C:\eclipse\plugins\ org.eclipse.swt.win32.win32.x86_3.102.1.v20130827-2048.jar"`

I hope this will help resolve the way.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-28T19:23:42.600

当我尝试从 Eclipse 中加载 sdk 管理器时，Eclipse 控制台中显示了相同的消息。修复它所需要做的就是以管理员身份运行 eclipse，它应该可以正常工作

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-06T15:52:11.880

这个问题相当老了，但我在 2015 年遇到了与今天相同的问题。另外我预计答案可能不起作用，但引导我在不需要以管理员身份运行的情况下运行这个问题，特别是“Mehdi golnari”答案。

根据 Mehdi 的回答，我们需要添加他添加的相同参数，但已更新以适用于新的 SDK 工具（或 android SDK）。我的是版本 24.3.3，SDK，所以`com.android.manager.Main`对我来说不再适用，但我们需要它`com.android.sdkmanager.Main`。我们也可以使用之前在同一个 bat 中设置的变量：`%swt_path%`.

因此，几乎在`android.bat`文件末尾添加以下内容：

```
"-Dswt.library.path=%swt_path%" 
```

生成的调用代码应该是这样的**一行**：

```
call "%java_exe% %REMOTE_DEBUG%" "-Dcom.android.sdkmanager.toolsdir=%tools_dir%" "-Dcom.android.sdkmanager.workdir=%work_dir%" -classpath "%jar_path%;%swt_path%\swt.jar" "-Dswt.library.path=%swt_path%" com.android.sdkmanager.Main %* 
```

这应该有助于以 管理员的需要运行 、 和 不`android.bat`运行`SDK Manager.exe`。`AVD Manager.exe`

# c++ - 如何在 GLSL 中使用 4x4 矩阵作为顶点属性？

> ID：12792448
> 
> 赞同：2
> 
> 时间：2012-10-09T03:31:54.137
> 
> 标签：c++, opengl, glsl, vertex-shader

我正在尝试使用 4x4 矩阵作为顶点属性，使用以下代码：

```
Mat4 matrices[numVerts];

int mtxBoneID = glGetAttribLocation(hProgram, "aMtxBone");

glEnableVertexAttribArray(mtxBoneID + 0);
glEnableVertexAttribArray(mtxBoneID + 1);
glEnableVertexAttribArray(mtxBoneID + 2);
glEnableVertexAttribArray(mtxBoneID + 3);
glVertexAttribPointer(mtxBoneID + 0, 4, GL_FLOAT, GL_FALSE, sizeof(Mat4), ((Vec4*)matrices) + 0);
glVertexAttribPointer(mtxBoneID + 1, 4, GL_FLOAT, GL_FALSE, sizeof(Mat4), ((Vec4*)matrices) + 1);
glVertexAttribPointer(mtxBoneID + 2, 4, GL_FLOAT, GL_FALSE, sizeof(Mat4), ((Vec4*)matrices) + 2);
glVertexAttribPointer(mtxBoneID + 3, 4, GL_FLOAT, GL_FALSE, sizeof(Mat4), ((Vec4*)matrices) + 3);

// shader:
// ...
attribute mat4 aMtxBone;
// ... 
```

但我在屏幕上看到的都是垃圾。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:42:03.690

你可以在你的着色器使用布局中尝试这样的事情

```
layout(location=x) in mat4 <name>; 
```

x 不会等于`glGetAttribLocation`，你必须自己维护它。它等于你调用的次数`glVertexAttribPointer`。例子

```
layout(location=0) in vec4 in_Position;
layout(location=1) in vec4 in_Color;
layout(location=2) in vec4 in_Normal;

glVertexAttribPointer(0, xxxxxxxx);
glVertexAttribPointer(1, xxxxxx);
glVertexAttribPointer(2, xxxxxx); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-13T21:14:44.983

因此，由于未知原因，我的答案被删除了。

我又来了，这次我会换一种格式。

我遇到了与问题完全相同的问题，事情会被搞得一团糟。至少描述是这样的。

为我解决的问题是打电话

```
glDrawElementsInstancedBaseVertex(GL_TRIANGLES,
                                    d->drawCount,
                                    GL_UNSIGNED_INT,
                                    0,
                                    p_objects.size(),
                                    0); 
```

画我的东西，仅此而已。

然而！

如果您的东西绘制不正确，这可能不是您遇到的唯一问题。你需要纠正它的整个清单是巨大的。所以我要在这里放一个链接，它有一个关于如何画很多东西的很棒的教程。此外，您可以获取源代码并自己尝试。

[http://ogldev.atspace.co.uk/www/tutorial33/tutorial33.html](http://ogldev.atspace.co.uk/www/tutorial33/tutorial33.html)

来源：http: [//ogldev.atspace.co.uk/ogldev-source.zip](http://ogldev.atspace.co.uk/ogldev-source.zip)

再次对我投反对票并删除我的答案，它的内容根本没有改变。

禁止我进入网站，你的损失。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-09T07:54:30.163

首先，您需要`glGenBuffers`为您的矩阵创建 VBO ( )，然后将其 ( `glBindBuffer`) 绑定为当前，然后使用

```
glVertexAttribPointer(mtxBoneID + 0, 4, GL_FLOAT, GL_FALSE, 0, 0);
glVertexAttribPointer(mtxBoneID + 1, 4, GL_FLOAT, GL_FALSE, 0, 4);
glVertexAttribPointer(mtxBoneID + 2, 4, GL_FLOAT, GL_FALSE, 0, 8);
glVertexAttribPointer(mtxBoneID + 3, 4, GL_FLOAT, GL_FALSE, 0, 12); 
```

而不是你的`glVertexAttribPointer`电话。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-21T16:24:24.837

看起来您的偏移量已关闭。它应该是

```
((Vec4*)matrices) + sizeOf(Vec4)*i 
```

代替

```
((Vec4*)matrices) + i 
```

# android - 如何为活动应用浅色主题并同时为对话框保留深色主题？

> ID：12792453
> 
> 赞同：4
> 
> 时间：2012-10-09T03:32:45.940
> 
> 标签：android, android-alertdialog, android-dialog, android-theme

有没有一种方法可以为 PreferenceActivity 应用自定义样式，该样式将从 Theme.Sherlock.Light 或 Theme.Light 继承，并为 preferenceDialog 和 AlertDialogs 保留深色样式？我可以轻松地从应用灯光样式中排除对话框吗？如果没有，我应该设置哪些属性，以及在浅色主题中分隔线、文本活动、非活动、标题和副标题等中使用的默认颜色的参数是什么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T03:50:11.487

我通过将活动主题更改为浅色来解决它，然后我以编程方式将警报对话框的主题设置为深色，内置 android 样式：

```
this.setTheme(android.R.style.Theme_Holo_Dialog); 
```

由于 PreferenceDialog 继承自 Dialog，因此它也将此主题设置为所有 PreferenceDialogs。更具体地说，并为特定对话框添加样式，您可以使用 ContextThemeWrapper，如 android 源代码中的 Dialog.java 中使用的那样：

```
builder = new AlertDialog.Builder(new ContextThemeWrapper(this, android.R.style.Theme_DeviceDefault_Dialog)) 
```

# python - 在子进程中打印到标准输出

> ID：12792454
> 
> 赞同：0
> 
> 时间：2012-10-09T03:32:55.680
> 
> 标签：python, subprocess

我有一个运行子进程的脚本，如下所示：

```
child_process = subprocess.Popen(["python", testset['dir'] + testname, \                                                                                                                                     
                              output_spec_file, plugin_directory],\                                                          
                              stderr=subprocess.PIPE, stdout=subprocess.PIPE) 
```

在那个过程中，我试图插入打印语句，但它们没有出现在标准输出中。我尝试`sys.stdout.write()`在该子进程中使用，然后立即使用`sys.stduout.read()`，`child_process`但它没有捕获输出。

我是 Python 新手，我还没有达到 Python 的复杂程度。我实际上在 C 语言中工作，并且有一些 Python 测试脚本，我不确定如何从子进程中打印出来。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:37:27.683

`sys.stdout.read`(and ) 用于*当前进程*（不是子进程`write`）的标准输入/输出。如果要写入子进程的标准输入，则需要使用：

 *```
child_process.stdin.write("this goes to child")  #Popen(..., stdin=subprocess.PIPE) 
```

与从孩子的标准输出流中读取类似：

```
child_process = subprocess.Popen( ... , stdout=subprocess.PIPE)
child_process.stdout.read("This is the data that comes back") 
```

* * *

当然，通常使用更习惯用法：

```
stdoutdata, stderrdata = child_process.communicate(stdindata) 
```

（注意`subprocess.PIPE`在适当的情况下传递给 Popen 构造函数）前提是您的输入数据可以一次全部传递。*

# web-services - 配置主机名

> ID：12792455
> 
> 赞同：1
> 
> 时间：2012-10-09T03:32:55.760
> 
> 标签：web-services, networking, dns, hostname, dedicated

我想知道如何正确配置我的服务器的主机名例如我有这个域“gamemode.com.br”我只设置了主机名“gamemode.com.br”或“server.gamemode.com.br”（我将使用连接到同一网络的多台服务器），谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T05:31:59.177

如果您计划使用多台服务器，最好使用不同的主机名，如您所建议的那样 - “server.gamemode.com.br”，或者使用每个服务器的角色来命名它们例如“master.gamemode.com.br”、“maps.gamemode.com.br”。

# javascript - Firefox 不支持字体系列 Verdana-Bold

> ID：12792456
> 
> 赞同：1
> 
> 时间：2012-10-09T03:32:56.787
> 
> 标签：javascript, jquery, css, fonts, webfonts

如果我将 font-family 设置为`Verdana-Bold`，它在 FF（版本 18）中不起作用，但 Chrome（版本 24）很好。

如果我将 font-family 更改为`Verdana`，它可以在两个浏览器中使用。

同样，`CourierNewPS-BoldMT`, 不起作用，但`Courier`确实起作用。

有谁知道解决这个问题的通用解决方案？像可以转换特定于浏览器的字体的 JS 或 CSS 技术？

[http://jsfiddle.net/skUxK/4/](http://jsfiddle.net/skUxK/4/)

这是用例的描述：我有一个 HTML5 应用程序，它也有一个等效的 windows 桌面版本、一个 mac 应用程序以及一个 iOS 和 android 应用程序。

所有这些应用程序都可以对文本进行更改，然后将这些更改存储在 XML 文件中。然后可以加载该文件任何应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T03:38:31.257

如果您只想使用字体的粗体版本，请使用该`font-weight`属性。

```
font-family: verdana;
font-weight: bold; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T03:35:44.803

使用`@font-face`以便[每个浏览器](http://caniuse.com/#feat=fontface)都可以显示完全相同的字体。

欲了解更多信息：[http ://www.css3.info/preview/web-fonts-with-font-face/](http://www.css3.info/preview/web-fonts-with-font-face/)

```
@font-face {
    font-family: MyFont;
    src: url('mybeautifulfont.otf');
}

body{
    font-family: 'MyFont', 'Verdana-Bold', 'Verdana';
} 
```

* * *

如果您只想要粗体文本，那么：

```
body{
    font-family: 'Verdana-Bold', 'Verdana';
    font-weight: bold;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T03:36:43.087

据我所知，加粗的 Verdana 在 Firefox 上显示良好。![在此处输入图像描述](../Images/3bce01178403434712812ced0ccb28bf.png)

# ruby - 使用 Ruby 和 Pandoc 将 Markdown 文本转换为 RTF？

> ID：12792458
> 
> 赞同：1
> 
> 时间：2012-10-09T03:33:16.733
> 
> 标签：ruby, markdown, rtf, richtext, pandoc

使用 Ruby 和 Ruby-Pandoc。似乎是一个不错的工具，如果我能让它工作的话。

我想将一些 Markdown 文本（带有嵌入式列表和其他花哨）转换为富文本。这是我正在转换的文本：

```
Title
===

This is a paragraph. Hallelujah.

Here comes a nested list.
---

* List item 1
  * List item 1.1
  * List item 1.2
* List item 2
  * List item 2.1 
```

这是我的 Ruby 代码...

```
require 'pandoc-ruby'

input = File.read(test.md)
converter = PandocRuby.new(input, from: :markdown, to: :rtf)
puts converter.convert 
```

...它（在将输出保存到文件后）生成一个除了标题之外没有任何内容的文档：

![RTF 截图](../Images/d6ec31f7cb70bb693ca130ba19fcf8ba.png)

这是 RTF 文件的代码：

```
{\pard \ql \f0 \sa180 \li0 \fi0 \b \fs36 Title\par}
{\pard \ql \f0 \sa180 \li0 \fi0 This is a paragraph. Hallelujah.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 \b \fs32 Here comes a nested list.\par}
{\pard \ql \f0 \sa0 \li360 \fi-360 \bullet \tx360\tab List item 1\par}
{\pard \ql \f0 \sa0 \li360 \fi-360 \bullet \tx360\tab List item 1.1\par}
{\pard \ql \f0 \sa0 \li360 \fi-360 \bullet \tx360\tab List item 1.2\par}
{\pard \ql \f0 \sa0 \li360 \fi-360 \bullet \tx360\tab List item 2\par}
{\pard \ql \f0 \sa0 \li360 \fi-360 \bullet \tx360\tab List item 2.1\sa180\par} 
```

此外，即使它确实出现在我的 RTF 查看器（Mac TextEdit）中，RTF 代码似乎也失去了所有的列表嵌套。我不知道如何诊断这一点，无论我是否没有在 Ruby-Pandoc 中说明必要的标头信息或某些内容。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T03:50:32.203

将您的输出包装在序言和右大括号中。像这样：

```
{\rtf1\ansi\deff0{\fonttbl{\f0 Times New Roman;}}
{\pard \ql \f0 \sa180 \li0 \fi0 \b \fs36 Title\par}
{\pard \ql \f0 \sa180 \li0 \fi0 This is a paragraph. Hallelujah.\par}
{\pard \ql \f0 \sa180 \li0 \fi0 \b \fs32 Here comes a nested list.\par}
{\pard \ql \f0 \sa0 \li360 \fi-360 \bullet \tx360\tab List item 1\par}
{\pard \ql \f0 \sa0 \li360 \fi-360 \bullet \tx360\tab List item 1.1\par}
{\pard \ql \f0 \sa0 \li360 \fi-360 \bullet \tx360\tab List item 1.2\par}
{\pard \ql \f0 \sa0 \li360 \fi-360 \bullet \tx360\tab List item 2\par}
{\pard \ql \f0 \sa0 \li360 \fi-360 \bullet \tx360\tab List item 2.1\sa180\par}
} 
```

**更新**

*我是否缺少“包装器”配置设置？*

是的，根据[gem 自述文件](https://github.com/alphabetum/pandoc-ruby#pandoc-hint)。

> 如果您尝试生成具有完整文件头而不是标记片段的独立文件，请记住传递 :standalone 选项，以便添加正确的页眉和页脚。

*缺少嵌套列表怎么办？*

根据[PanDoc 文档](http://johnmacfarlane.net/pandoc/README.html#the-four-space-rule)，您的源文本缺少 2 个缩进空格。

因此，将它们放在一起，这是完整的解决方案。

您的源文件：

```
Title
===

This is a paragraph. Hallelujah.

Here comes a nested list.
---

* List item 1
    * List item 1.1
    * List item 1.2
* List item 2
    * List item 2.1 
```

转换代码：

```
require 'pandoc-ruby'
input = File.read('./test.md')
puts PandocRuby.markdown(input).to_rtf(:standalone) 
```

# simplemembership - 如何使用 SimpleMembership 验证用户

> ID：12792465
> 
> 赞同：2
> 
> 时间：2012-10-09T03:34:23.427
> 
> 标签：simplemembership

我在我的 Web 应用程序中使用 SimpleMembership 进行用户登录。我编写了一个控制台来实际访问我的 Web 应用程序类以避免重复代码。但是，由于我的控制台应用程序没有与用户会话相关的任何内容，因此 Login 方法不起作用。

但是有没有办法只使用 SimpleMembership 来验证用户？如果我必须手动操作..我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-23T13:35:23.043

[在 SimpleMembership 中验证用户](https://stackoverflow.com/questions/18875571/validating-user-in-simplemembership)

[http://msdn.microsoft.com/en-us/library/webmatrix.webdata.simplemembershipprovider.validateuser(v=vs.111).aspx](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.simplemembershipprovider.validateuser(v=vs.111).aspx)

# python - 作为可迭代对象访问时指向属性的对象

> ID：12792467
> 
> 赞同：0
> 
> 时间：2012-10-09T03:34:41.420
> 
> 标签：python, class, iteration

我试图弄清楚是否有一种优雅而简洁的方式让一个类在“用作”字典时访问它自己的属性之一，基本上将在有序字典中实现的所有方法重定向到它的一个特性。

目前我从 IterableUserDict 继承并将其数据显式设置为另一个属性，它似乎正在工作，但我知道 UserDict 被认为有点旧，我担心我可能会忽略一些东西。

是）我有的：

```
class ConnectionInterface(IterableUserDict):
    def __init__(self, hostObject):
        self._hostObject= hostObject

        self.ports= odict.OrderedDict()
        self.inputPorts= odict.OrderedDict()
        self.outputPorts= odict.OrderedDict()

        self.data= self.ports 
```

这样，我希望对象按照我的意思表现和响应（并被使用），除了我想在迭代时在其属性“端口”上获得一个免费的有序字典行为，项目是通过键获取的，有些东西是如果在 myObject 中查找 ala，依此类推。

欢迎任何建议，以上似乎工作正常，但我有一个奇怪的痒，我可能会遗漏一些东西。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:49:02.683

In the end inheriting IterableUserDict and setting self.data explicitly worked out to what I needed and hasn't had any unforeseen consequences or added dodgyness when serialising and deserialising.

Sticking to my original solution I guess and can recommend it if anybody needs a simple and full fledged dict like behaviour on a selected subset of data in their own objects.

It's fairly simple and doesn't have particularly strict scalability or complexity requirements stressing it though.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T03:48:52.403

当然，你可以做到这一点。字典的主要功能是 getattr 和 setattr 方法，因此您可以实现魔术方法`__getattr__`，`__setattr__`如下所示：

```
def __getattr__(self, key):
    return self.ports[key]

def __setattr__(self, key, value):
    self.ports[key] = value 
```

如果你想要实现 .keys() 和 .values() 之类的东西，只需用这种风格编写它们：

```
def keys(self):
    return self.ports.keys() 
```

# java - seekbar 的 onStartTrackingTouch 和 getProgress() 方法。第一个值始终为 0。

> ID：12792470
> 
> 赞同：0
> 
> 时间：2012-10-09T03:35:00.657
> 
> 标签：java, android, seekbar

对于锁定/解锁系统，我使用`onStartTrackingTouch`and`onStopTrackingTouch`方法。和测试，我不明白一件事：

```
public void onStartTrackingTouch(SeekBar seekBar) {

Log.d(TAG,"Progress: "+seekBar.getProgress());

    } 
```

第一个值始终为零。

为什么？我需要真正的价值！

有谁能够帮助我？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T00:52:35.907

我改变了主意，最后我使用了onProgressChanged：

```
public void onProgressChanged(SeekBar seekBar, int progress,
        boolean fromUser) {
    if(progress>95){
        seekBar.setVisibility(SeekBar.INVISIBLE);
                    //code

    }

public void onStopTrackingTouch(SeekBar seekBar) {
    seekBar.setProgress(0);

} 
```

谢谢

# c# - ASP.NET 上传图像、调整大小并保存到文件系统。

> ID：12792480
> 
> 赞同：0
> 
> 时间：2012-10-09T03:36:07.630
> 
> 标签：c#, asp.net

我在尝试使用 FileUpload 对话框上传图像时没有运气，在保持纵横比的同时调整大小，然后使用 c# 和 ASP.NET 将其保存到我的文件系统中是否有人有有效的解决方案或指向某个地方的链接可以给我看一个工作的例子吗？我查看并尝试过的许多解决方案仅适用于 C#，但不适用于 ASP.NET

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T03:48:13.713

ImageResizer 会给你你想要的一切：

[http://imageresizing.net/](http://imageresizing.net/)

```
string fileExt = System.IO.Path.GetExtension(imageUpload.FileName);
if (string.Equals(fileExt, ".jpg", StringComparison.OrdinalIgnoreCase))
{
    foreach (string fileKey in HttpContext.Current.Request.Files.Keys)
    {
        HttpPostedFile file = HttpContext.Current.Request.Files[fileKey];
        if (file.ContentLength <= 0) continue; //Skip unused file controls.

        try
        {
             ImageJob i = new ImageJob(file, "~/eventimages/<guid>_<filename:A-Za-z0-9>.<ext>",
                 new ResizeSettings("width=60&height=60&format=jpg&crop=auto"));
             i.Build();

             ImageJob j = new ImageJob(file, "~/eventimages/<guid>_<filename:A-Za-z0-9>.<ext>",
                 new ResizeSettings("width=250&height=250&format=jpg&crop=auto"));
             j.Build();

             string sitePath = MapPath(@"~");
             thumbImagePath = i.FinalPath.Replace(sitePath, "~\\");
             mainImagePath = j.FinalPath.Replace(sitePath, "~\\");
         }
         catch
         {
  // Had to swallow the exception here: 
  // http://stackoverflow.com/questions/7533845/system-argumentexception-parameter-is-not-valid
         }
     }
  } 
```

# java - 在 App Engine Java servlet 中重定向所有 URL 以返回 index.html

> ID：12792481
> 
> 赞同：2
> 
> 时间：2012-10-09T03:36:07.850
> 
> 标签：java, google-app-engine, servlets, restlet-2.0

Web 应用程序在 Google App Engine 上运行的后端使用 Java Restlet。

我想为所有 url (/*) 返回 index.html。

在这里，我不想使用`response.redirect`，我的意思是，客户端不应该知道重定向。

我在 web.xml 中使用了以下代码。

```
 <servlet>
    <servlet-name>RestletServlet</servlet-name>
    <servlet-class>org.restlet.ext.servlet.ServerServlet</servlet-class>
    <init-param>
        <param-name>org.restlet.application</param-name>
        <param-value>com.post.PostApplication</param-value>
    </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>RestletServlet</servlet-name>
    <url-pattern>/api/v1/*</url-pattern>
</servlet-mapping>

 <servlet>
    <servlet-name>StartPageServlet1</servlet-name>
    <jsp-file>/client/index.html</jsp-file>  
</servlet>
<servlet-mapping>
    <servlet-name>StartPageServlet1</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

它使用 Restlet 为所有 /api/v1 请求提供服务。它工作正常。但是 /* 应该总是返回 index.html。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-16T11:37:31.773

您可以插入[过滤器](https://www.javatpoint.com/servlet-filter)并检查请求 URI，并根据它决定是否将其转发到您的主页：

`RequestDispatcher rd = request.getRequestDispatcher("/index.html"); rd.forward(request, response);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T03:53:31.013

您只想提供静态文件（没有动态文件、JSP 文件）。

您可以尝试从您的所有 servlet 中删除`web.xml`并使用该`welcome-file-list`功能：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE web-app PUBLIC
 "-//Oracle Corporation//DTD Web Application 2.3//EN"
 "http://java.sun.com/dtd/web-app_2_3.dtd">

<web-app xmlns="http://java.sun.com/xml/ns/javaee" version="2.5">

    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>

</web-app> 
```

试一试，让我知道这是否有效。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-09T08:00:35.803

您可以使用拦截器。对于每个传入的请求，您可以将目标页面设置为您的 index.html

# maven - Maven真的很灵活吗？

> ID：12792484
> 
> 赞同：-1
> 
> 时间：2012-10-09T03:36:22.327
> 
> 标签：maven

我了解 Maven 如何处理 src/java/main 中的 .java 文件。但它可以用于更一般的情况吗？让我们更抽象一点：假设我已经有一些 a.exe 从目录 A1、A2、A3 读取一些（不一定只有 .java）源，并将一些文件（可能有些是生成的 .java）放到目录 B1、B2 . 我还有一些 b.exe 当前从 B1、B2、B3 读取文件并生成其他内容。一些类似的步骤。（一个现实生活中的问题就在后面）。

我想编写一个 POM.xml 文件，以便 maven 完成这项工作。那可能吗？我认为 a.exe 和 b.exe 应该被扭曲为 maven 插件。接下来，在 Maven 文档中，我看到：

```
<build>
    <sourceDirectory>${basedir}/src/main/java</sourceDirectory>
    <scriptSourceDirectory>${basedir}/src/main/scripts</scriptSourceDirectory>
    <testSourceDirectory>${basedir}/src/test/java</testSourceDirectory>
    <outputDirectory>${basedir}/target/classes</outputDirectory>
    <testOutputDirectory>${basedir}/target/test-classes</testOutputDirectory>
    ...
</build> 
```

困扰我的是“sourceDirectory”本身看起来是一个硬编码的名称。Maven 会接受 A1 和 A2 标签吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:49:51.997

（你会考虑接受你之前的一些问题，让其他人更愿意回答你吗？）

Maven 强调约定优于配置。您可以将`sourceDirectory`其视为约定之一，我们已经预定义了一些要与 (Java) 编译器插件一起使用的元素。

你想做的事都能实现。您可以自己编写一个插件/MOJO，它可以从您想要的任何目录读取并调用您想要的任何外部 exe。通过在你的 MOJO 中设置合理的默认值，你可以让你的项目 POM 看起来像

```
<project>
  :
  :
  <build>
    <plugins>
      <plugin>
        <groupId>yourPluginGroup</group>
        <artifactId>generate-A-data</artifactId>
        <!-- if you want extra configuration, you can have <configuration> elements -->
      </plugin>

      <plugin>
        <groupId>yourPluginGroup</group>
        <artifactId>generate-B-data</artifactId>
      </plugin>
    </plugins>
  </build>
<project> 
```

没那么糟糕吧？

但是，要说 Maven 是否“灵活”，还是很值得商榷的。我相信灵活性从来都不是 Maven 的目标。Maven 专门用于构建，它定义了不同的骨架供您遵循（例如构建阶段、依赖范围），您永远无法使 Maven 像 Ant 等其他基于脚本的工具那样“灵活”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T01:13:00.260

答案是：不，Maven 不灵活。这是一个即使在世界上所有 maven 论坛的帮助下我也无法解决的简单任务：编写一个 POM

1.  编译一些包含 Java 文件的目录
2.  做其他事情（如果你愿意 - 执行一个示例 Hello World Mojo 插件）
3.  用一些其他 Java 文件编译其他目录。

    ```
     NO WAY ! 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-15T03:21:31.587

通过将 exec 插件和编译器插件绑定到“generate-sources”或“process-classes”阶段，您可以在不编写插件的情况下做到这一点。构建助手插件也可能对添加源路径有用。

对于原始情况，您可以尝试以下绑定：

*   build-helper-maven-plugin 绑定到初始化阶段，添加任何必要的源目录（例如 B1 和 B2）
*   exec-maven-plugin 绑定到 generate-sources 阶段，有两次执行，一次用于 a.exe，一次​​用于 b.exe

对于 Hello World Mojo 案例，如果将以下内容添加到流程类阶段（按顺序）会怎样？

*   Hello World Mojo 插件
*   构建 Helper 插件以添加源目录
*   编译器插件

我能看到的唯一缺点是第一个源目录将被重新编译。但是编译器应该足够聪明，知道什么都没有改变，这是否是一个问题取决于你为什么要这样做。为什么在运行 Hello World 之前需要目录 A 中的类文件？也许您真的在看应该成为独立模块的两段独立代码？

# javascript - Emscripten 绑定：如何从 Javascript 创建可访问的 C/C++ 数组？

> ID：12792486
> 
> 赞同：2
> 
> 时间：2012-10-09T03:36:30.453
> 
> 标签：javascript, arrays, box2d, typed-arrays, emscripten

我正在使用[box2d](https://github.com/kripken/box2d.js/)并尝试创建链形。

为了创建链形状或多边形形状，我必须传递一个向量数组以指定几何形状。

我没有看到任何文档可以帮助我完成此操作，并且[此处](https://github.com/kripken/ammo.js/blob/master/README.markdown)有关绑定的说明也没有涉及有关数组的任何细节。

如何构造数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T15:38:24.123

我已经通过使用这些（尚未记录的）emscripten 功能解决了这个问题。

请注意，我从 Box2D 对象中访问函数和值（如`ALLOC_STACK`和`wrapPointer`）只是因为这是我发现它们被公开的范围。它们是特定于 emscripten 的值，因此对于不同的项目和/或构建设置，它会有所不同。

```
// an alternative method that may work (shorter, less obvious code) is 
// allocate([v1x,0,0,0,v1y,0,0,0,v2x,0,0,0,...], 'float', Box2D.ALLOC_STACK);
// 8 byte per vector * 4 vectors = 32 bytes of memory required 
var buffer = Box2D.allocate(32, 'float', Box2D.ALLOC_STACK);
Box2D.setValue(buffer, left, 'float'); // v1x
Box2D.setValue(buffer+4, bottom, 'float'); // v1y
Box2D.setValue(buffer+8, right, 'float'); // v2x
Box2D.setValue(buffer+12, bottom, 'float'); // v2y
Box2D.setValue(buffer+16, right, 'float'); // v3x
Box2D.setValue(buffer+20, top, 'float'); // v3y
Box2D.setValue(buffer+24, left, 'float'); // v4x
Box2D.setValue(buffer+28, top, 'float'); // v4y
var ptr_wrapped = Box2D.wrapPointer(buffer, Box2D.b2Vec2);
shape.CreateLoop(ptr_wrapped, 4);
body.CreateFixture(shape,0.0); 
```

# c# - IDataErrorInfo 调用绑定对象而不是 DataContext

> ID：12792494
> 
> 赞同：5
> 
> 时间：2012-10-09T03:38:06.020
> 
> 标签：c#, wpf, mvvm

我有一个模型：

```
public class Product
{
    public int Rating { get; set; }
    ...
} 
```

和一个视图模型：

```
public class ProductViewModel: IDataErrorProvider
{
    public int Temperature { get; set; }
    public Product CurrentProduct { get; set; }

    public string this[string columnName]
    {
        get
        {
            if (columnName == "Rating")
            {
                if (CurrentProduct.Rating > Temperature)
                    return "Rating is too high for current temperature";
            }
            return null;
        }
    }
} 
```

我的视图有一个 ProductViewModel 实例作为 DataContext。该视图具有以下字段：

```
<TextBox Text={Binding Path=CurrentProduct.Rating, ValidatesOnDataErrors=True} .../> 
```

默认情况下，验证发生在绑定对象 (Product) 的 IDataErrorProvider 上，而不是 DataContext (ProductViewModel) 上。所以在上面的例子中，ProductViewModel 验证永远不会被调用。这只是一个简单的例子，但说明了问题。该模型不（也不应该）知道温度，因此设计规定 VM 应该在该字段上执行验证。

是的，我可以破解它并直接在 ViewModel 中复制模型的绑定属性，但我原以为必须有一种更简单的方法将调用重定向到 VM 而不是模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T07:49:19.260

如果您希望您的视图模型通过 IDataErrorInfo 验证名为“Rating”的属性，那么您的视图模型实际上必须有一个名为 Rating 的属性并且您必须绑定到它，这意味着在视图模型中复制模型的绑定属性。

无论如何，这篇[博客文章](http://rachel53461.wordpress.com/2012/01/22/validating-business-rules-in-mvvm/)对您来说可能很有趣（Validating Business Rules in MVVM）。作者在viewmodel可以设置的模型中添加了一个Validation delegate。这使您可以使用未知的数据来验证模型，例如示例中的温度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:57:17.380

我以前遇到过这个问题，我的解决方案是从我的验证委托中公开一个验证委托，`Models`在验证类时检查它，并且可以使用它来将附加验证挂钩到与自身`ViewModel`无关的类`Model`

例如，我会使用看起来像这样的代码`ViewModel`将验证委托附加到`Model`它的集合

```
public class ProductViewModel
{
    public int Temperature { get; set; }

    private product _currentProduct;
    public Product CurrentProduct 
    { 
        get { return _currentProduct; }
        set
        {
            if (value != _currentProduct)
            {
                if (_currentProduct != null)
                    _currentProduct.RemoveValidationDelegate(ValidateProduct);

                _currentProduct = value;

                if (_currentProduct != null)
                    _currentProduct.AddValidationDelegate(ValidateProduct);

                RaisePropertyChanged("CurrentProduct");
            }
        }
    }

    // Product Validation Delegate to verify temperature
    private string ValidateProduct(object sender, string propertyName)
    {
        if (propertyName == "Rating")
        {
            if (CurrentProduct.Rating > Temperature)
                return "Rating is too high for current temperature";
        }

        return null;
    }
} 
```

`ValidationDelegate`添加到的实际代码`Model`非常通用，因此我通常将它放在 a 中`BaseViewModel`，因此所有模型都可以拥有此功能，而无需我为每个模型输入

```
#region IDataErrorInfo & Validation Members

#region Validation Delegate

public delegate string ValidationDelegate(
    object sender, string propertyName);

private List<ValidationDelegate> _validationDelegates = new List<ValidationDelegate>();

public void AddValidationDelegate(ValidationDelegate func)
{
    _validationDelegates.Add(func);
}

public void RemoveValidationDelegate(ValidationDelegate func)
{
    if (_validationDelegates.Contains(func))
        _validationDelegates.Remove(func);
}

#endregion // Validation Delegate

#region IDataErrorInfo for binding errors

string IDataErrorInfo.Error { get { return null; } }

string IDataErrorInfo.this[string propertyName]
{
    get { return this.GetValidationError(propertyName); }
}

public string GetValidationError(string propertyName)
{
    string s = null;

    foreach (var func in _validationDelegates)
    {
        s = func(this, propertyName);
        if (s != null)
            return s;
    }

    return s;
}

#endregion // IDataErrorInfo for binding errors

#endregion // IDataErrorInfo & Validation Members 
```

如果您想查看另一个示例，我也在我的博客文章中概述了这种方法[。](http://rachel53461.wordpress.com/2012/01/22/validating-business-rules-in-mvvm/)

# qt - 部署 Qt 应用程序

> ID：12792501
> 
> 赞同：3
> 
> 时间：2012-10-09T03:38:53.403
> 
> 标签：qt, deployment, portability

*简而言之，问题是：我刚刚在运行 Linux Ubuntu 的计算机上使用 Qt Creator 完成了我的第一个应用程序，现在如何让每个人都可以使用它。现在遵循更详细的版本；）*

我必须为提出这个问题而道歉，我知道这个问题可能已经被问过很多次了，而且我可以阅读官方文档。我对编程完全陌生，到目前为止我读过的所有内容都让我感到非常困惑。如果您愿意提供帮助，请假设我一无所知:)

开始吧：我刚刚在我的笔记本电脑上使用 Qt creator 完成了我的第一个应用程序（一个科学程序）的设计，该笔记本电脑在 Linux Ubuntu 下运行。它工作正常，我为此感到非常自豪；）

这是我的项目包含的内容：40 个头文件、42 个源文件、1 个 pro 文件、1 个 qrc 文件、1 个 html 文件和 7 个 png 文件。在代码中，我使用`#include`了一堆相当标准的 Qt 类（`QWidget`等等`QTextBrowser`，可能有 40 个）。

现在我想将它提供给其他人。对于 Linux 和 Mac 用户，我想出了一个方法：我可以压缩包含我的项目的文件夹，告诉他们在他们的计算机上安装 Qt，然后下载并解压缩他们硬盘上的文件，在文件夹并运行

```
qmake myProject.pro
qmake
make 
```

这似乎工作正常（顺便说一句，这不正是Qt创建者所做的重要吗？`qmake`那里的步骤`qmake-qt4 myProject.pro -r -spec linux-g++`和制作步骤是`make -w`）。现在，我假设有一个解决方案，我不要求他们下载和安装诸如 200Mo 的 Qt 材料之类的东西。至于 Microsoft Windows 用户，我不知道。

如果您能以非常具体的方式向我解释我需要做什么，我将不胜感激。不用说，我会选择最好和最简单的解决方案，我不需要了解有关部署的所有内容。提前谢谢了！

编辑：如果有用：我一直在使用基于 Qt 4.8.1（64 位）的 Qt Creator 2.5.0，我正在使用 Ubuntu 12.04 64 位的笔记本电脑

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T07:55:36.163

对于 Linux 和 Mac 用户，我会为他们编译 32 位和 64 位格式的软件——没有人喜欢从源代码编译未知软件。显然，为那些在更不寻常的架构/操作系统上的人保留源代码选项（并为他们提供一个模仿 Qt Creator 调用的命令的 shell 脚本！）。*由于几乎每个*发行版上的包管理器都可以使用 Qt 运行时（并且无论如何都预装在大多数发行版上，例如 KDE 需要它们），通过不要求它们从源代码编译，您的用户将获得更少的下载（如果有的话）并且不会要求他们从他们可能不知道的网站下载软件。当然，最好的方法是尝试将您的软件作为一个包添加到主要发行版的存储库中，但这可能需要一些时间来组织。

为 Windows 用户编译 32 位和 64 位格式的软件。通常不赞成要求用户下载他们可能不知道的运行时库，并将它们放入他们的 system32 文件夹中......所以大多数应用程序将他们需要的*所有*库与他们的应用程序捆绑在一起。基于 Qt 的应用程序也不例外，因此将运行时放入可执行文件所在的文件夹中。此外，创建一个合适的安装程序更专业，有一些适用于 Windows 的免费安装程序应用程序，网络搜索将为您提供最受欢迎的（我想我也看到了关于它的一个线程）。

正如你所看到的平台并没有太大的不同，我想说的要点是：**不要强迫人们从源代码编译！** 地球上绝大多数人甚至不知道编译*是*什么，所以自己提供主要的架构/操作系统。

# php - 如何在 PHP 中格式化日期

> ID：12792502
> 
> 赞同：-4
> 
> 时间：2012-10-09T03:38:52.963
> 
> 标签：php, sql-server-2008

我有一个带有表的数据库，它有一个日期时间类型的字段。当我从该字段收集数据并在 PHP 中显示时，它显示“2012 年 10 月 9 日下午 2:06”。我想将其格式转换为“10/09/2012 14:06:00”。请注意，在我转换它之前，它没有“秒”，我希望它在转换后有“00”秒。

如何在 PHP 中格式化这个日期？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T03:41:49.283

您应该熟悉 PHP 的[`date()`](http://php.net/date)功能。

可以使用以下方法创建类似的日期格式：

```
$formatted = date('m/d/Y H:i:s', strtotime($dateFromDb)); 
```

首先[`strtotime()`](http://php.net/strtotime)需要从数据库中调用日期，以便将日期转换为 Unix 时间戳，然后将其传递给`date()`函数（用于格式化）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T03:55:38.003

您可以使用函数`strtotime()`将任何英文文本日期时间描述解析为 Unix 时间戳，因此您可以使用`date()`函数来解析您的格式！

# xcode4.5 - 新的 xcode 是否由于内存不足而崩溃？

> ID：12792504
> 
> 赞同：1
> 
> 时间：2012-10-09T03:39:04.693
> 
> 标签：xcode4.5

我最近经常得到这个：

```
Process:         Xcode [30248]
Path:            /Applications/Xcode.app/Contents/MacOS/Xcode
Identifier:      com.apple.dt.Xcode
Version:         4.5 (1839)
Build Info:      IDEApplication-1839000000000000~3
App Item ID:     497799835
App External ID: 10747437
Code Type:       X86-64 (Native)
Parent Process:  launchd [140]
User ID:         501

Date/Time:       2012-10-09 10:32:37.454 +0700
OS Version:      Mac OS X 10.8.2 (12C60)
Report Version:  10

Interval Since Last Report:          136816 sec
Crashes Since Last Report:           2
Per-App Interval Since Last Report:  134365 sec
Per-App Crashes Since Last Report:   1
Anonymous UUID:                      1CBC3344-3A0F-4006-F51E-8FF9902D7CC5

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000

Application Specific Information:
ProductBuildVersion: 4G182
UNCAUGHT EXCEPTION (NSMallocException): Out of memory. We suggest restarting the application. If you have an unsaved document, create a backup copy in Finder, then try to save.
UserInfo: (null)
Hints: None
Backtrace:
  0  0x00007fff93d7308e __exceptionPreprocess (in CoreFoundation)
  1  0x00007fff96bd13f0 objc_exception_throw (in libobjc.A.dylib)
  2  0x00007fff8b3ff914 ___NSInitializePlatform_block_invoke_0 (in Foundation)
  3  0x00007fff93ce7fe0 __CFStringChangeSizeMultiple (in CoreFoundation)
  4  0x00007fff93d0d722 CFStringReplaceAll (in CoreFoundation)
  5  0x00007fff93d0bd55 _CFBundleTryOnePreferredLprojNameInDirectory (in CoreFoundation)
  6  0x00007fff93d0b3a0 _CFBundleAddPreferredLprojNamesInDirectory (in CoreFoundation)
  7  0x00007fff93d0ba7e _CFBundleGetLanguageSearchList (in CoreFoundation)
  8  0x00007fff93dbcf99 _CFBundleCreateQueryTableAtPath (in CoreFoundation)
  9  0x00007fff93db9817 _CFBundleCopyQueryTable (in CoreFoundation)
 10  0x00007fff93dbdeb9 _CFBundleCopyURLsOfKey (in CoreFoundation)
 11  0x00007fff93dbb3ad _CFBundleCopyFindResources (in CoreFoundation)
 12  0x00007fff93d1b757 CFBundleCopyResourceURL (in CoreFoundation)
 13  0x00007fff907b4165 MTUOpenResourceFile (in SpeechSynthesis)
 14  0x00007fff907b40a7 MTUReadResourceDataFile (in SpeechSynthesis)
 15  0x00007fff907b3c1f ReadVoiceDescriptionFileFromBundle(__CFBundle*, VoiceDescription*) (in SpeechSynthesis)
 16  0x00007fff907b3a41 RegisterVoiceBundle(VoiceListRec**, SpeechEngine*, __CFBundle*, int) (in SpeechSynthesis)
 17  0x00007fff907b392f RegisterVoices(int, SpeechEngine*, VoiceListRec**) (in SpeechSynthesis)
 18  0x00007fff907b355f RebuildVoiceList(SpeechEngine*, VoiceListRec**) (in SpeechSynthesis)
 19  0x00007fff907afd4d RebuildVoiceListIfNecessary() (in SpeechSynthesis)
 20  0x00007fff907b01e6 NewSpeechChannel (in SpeechSynthesis)
 21  0x00007fff907b9e99 StartSpeakingNow (in SpeechSynthesis)
 22  0x00007fff93d2fda4 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ (in CoreFoundation)
 23  0x00007fff93d2f8bd __CFRunLoopDoTimer (in CoreFoundation)
 24  0x00007fff93d15099 __CFRunLoopRun (in CoreFoundation)
 25  0x00007fff93d146b2 CFRunLoopRunSpecific (in CoreFoundation)
 26  0x00007fff924640a4 RunCurrentEventLoopInMode (in HIToolbox)
 27  0x00007fff92463e42 ReceiveNextEventCommon (in HIToolbox)
 28  0x00007fff92463cd3 BlockUntilNextEventMatchingListInMode (in HIToolbox)
 29  0x00007fff94ea4613 _DPSNextEvent (in AppKit)
 30  0x00007fff94ea3ed2 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] (in AppKit)
 31  0x00007fff94e9b283 -[NSApplication run] (in AppKit)
 32  0x00007fff94e3fcb6 NSApplicationMain (in AppKit)
 33  0x000000010080bd17 (in Xcode)
 34  0x000000010080bca8 (in Xcode) 
```

内存量很丰富。8GB，还有很多。更不用说虚拟内存了。我不确定我是否应该向超级用户询问这个问题。

xcode 版本是 4.5 (4G182)

我是否设置错误或者这只是 xcode 4.5 中的错误？

是否应该在 superuser.com 上询问这个问题（但那里的大多数人可能不使用 xcode）。

很多时候，当我更改标签时，xcode 会变慢。

# c# - 如何正确定义 PRINT_NOTIFY_INFO_DATA？

> ID：12792508
> 
> 赞同：12
> 
> 时间：2012-10-09T03:39:59.047
> 
> 标签：c#, interop, pinvoke

我正在玩 codeproject 的一个项目，它基本上监控计算机上的打印活动。但是，它不适用于 64 位配置。代码的以下部分是问题所在。每当打印完成时都会调用此代码。

```
PRINTER_NOTIFY_INFO info = (PRINTER_NOTIFY_INFO)Marshal.PtrToStructure(pNotifyInfo, typeof(PRINTER_NOTIFY_INFO));                        
int pData = (int)pNotifyInfo + Marshal.SizeOf(typeof(PRINTER_NOTIFY_INFO));
PRINTER_NOTIFY_INFO_DATA[] data = new PRINTER_NOTIFY_INFO_DATA[info.Count];
for (uint i = 0; i < info.Count; i++)
{
    data[i] = (PRINTER_NOTIFY_INFO_DATA)Marshal.PtrToStructure((IntPtr)pData, typeof(PRINTER_NOTIFY_INFO_DATA));
    pData += Marshal.SizeOf(typeof(PRINTER_NOTIFY_INFO_DATA));
} 
```

调试显示 data[i].field 值始终为 0。但在 32 位中它可以正常工作。我认为 PRINTER_NOTIFY_INFO_DATA 定义不正确。目前我正在使用以下代码。任何人都可以修复它以在 64 位下正常工作吗？

```
[StructLayout(LayoutKind.Sequential)]
public struct PRINTER_NOTIFY_INFO
{
    public uint Version;
    public uint Flags;
    public uint Count;
}

[StructLayout(LayoutKind.Sequential)]
public struct PRINTER_NOTIFY_INFO_DATA_DATA
{
    public uint cbBuf;
    public IntPtr pBuf;
}

[StructLayout(LayoutKind.Explicit)]
public struct PRINTER_NOTIFY_INFO_DATA_UNION
{
    [FieldOffset(0)]
    private uint adwData0;
    [FieldOffset(4)]
    private uint adwData1;
    [FieldOffset(0)]
    public PRINTER_NOTIFY_INFO_DATA_DATA Data;
    public uint[] adwData
    {
        get
        {
            return new uint[] { this.adwData0, this.adwData1 };
        }
    }
}

// Structure borrowed from http://lifeandtimesofadeveloper.blogspot.com/2007/10/unmanaged-structures-padding-and-c-part_18.html.
[StructLayout(LayoutKind.Sequential)]
public struct PRINTER_NOTIFY_INFO_DATA
{
    public ushort Type;
    public ushort Field;
    public uint Reserved;
    public uint Id;
    public PRINTER_NOTIFY_INFO_DATA_UNION NotifyData;
} 
```

我正在使用 MS XPS 驱动程序测试打印。代码项目文章在[这里](http://www.codeproject.com/Articles/51085/Monitor-jobs-in-a-printer-queue-NET)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-09T08:07:35.430

[由于Data Alignment](http://msdn.microsoft.com/en-us/library/aa290049%28v=vs.71%29.aspx)的原因，它不适用于 64 位配置。

所以我建议你改变 PRINTER_NOTIFY_INFO 如下：

```
[StructLayout(LayoutKind.Sequential)]
public struct PRINTER_NOTIFY_INFO
{
    public uint Version;
    public uint Flags;
    public uint Count;
    public PRINTER_NOTIFY_INFO_DATA_UNION aData;
} 
```

然后使用[`Marshal.OffsetOf`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.offsetof.aspx)而不是 Marshal.SizeOf：

```
PRINTER_NOTIFY_INFO info = (PRINTER_NOTIFY_INFO)Marshal.PtrToStructure(pNotifyInfo, typeof(PRINTER_NOTIFY_INFO));                        
long pData = (long)pNotifyInfo + (long)Marshal.OffsetOf(typeof(PRINTER_NOTIFY_INFO), "aData");
PRINTER_NOTIFY_INFO_DATA[] data = new PRINTER_NOTIFY_INFO_DATA[info.Count];
for (uint i = 0; i < info.Count; i++)
{
    data[i] = (PRINTER_NOTIFY_INFO_DATA)Marshal.PtrToStructure((IntPtr)pData, typeof(PRINTER_NOTIFY_INFO_DATA));
    pData += (long)Marshal.SizeOf(typeof(PRINTER_NOTIFY_INFO_DATA));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-29T20:25:38.410

另一种解决方案是在制作后添加4个字节：PRINTER_NOTIFY_INFO来填充数据对齐（32int只是64位的一半）+ 4个字节组成64位。

另请注意：PRINTER_NOTIFY_INFO_DATA_DATA => IntPtr pBuf; 是一个 inptr，因此在 Windows 64 位中是 64 位。这使得整个类的数据价值为 128 位。（所以不要忘记在这里添加额外的 4 个字节。

保留的或 Id 似乎也有 4 个额外的字节，所以我最终为每个 info_data 添加了 8 个额外的字节，以使其工作。

# php - PHP登录错误

> ID：12792509
> 
> 赞同：-2
> 
> 时间：2012-10-09T03:40:20.600
> 
> 标签：php

您好，我有一个大问题.. 我正在创建一个用户登录站点，但问题是如果我在数据库中有 2 个或更多用户，并且如果我尝试使用我的第二个用户的凭据登录，它只会给我第一个用户信息. 任何帮助将不胜感激。

登录.php

```
include '../init/init.php';

if (empty($_POST) === false) {
    // ...
    $username = $_POST['log_username'];
    $password = $_POST['log_password'];

    $login = login($username, $password);
    if ($login === false){
        die(msg1(0, 'Password is incorrect.'));
    }else{
        $_SESSION['id'] = $login;
        die(msg1(1,"members.php"));
        exit();
    }
} 
```

users.php（我这里有我所有的用户功能）

```
 <?php

// ...
function user_id_from_username($username) {
    $username = sanitize($username);
    $query_user_id = mysql_query("SELECT (`id`) FROM `users` WHERE `username` = '$username'");
    return mysql_result($query_user_id, 0, 'id');
}

function login($username, $password) {
    $id = user_id_from_username($username);

    $username = sanitize($username);
    $password = md5($password);

    $query_login = mysql_query("SELECT COUNT(`id`) FROM `users` WHERE `username` = '$username' AND `password` = '$password'");
    return (mysql_result($query_login, 0) == 1) ? $id : false;

}
?> 
```

这显示了登录后的个人资料：

```
// ...
if (logged_in() === true){ 
  $session_user_id = $_SESSION['id']; 
  $sql = mysql_query("SELECT * FROM users"); 
  $id = 'id'; 
  $username = 'username'; 
  $rows = mysql_fetch_assoc($sql); 
}
$errors = array();

// show profile based on $rows 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T05:11:14.453

从评论部分的代码来看，我建议将代码更改为：

```
$session_user_id = $_SESSION['id']; 
$sql = mysql_query("SELECT * FROM users WHERE `id`='$session_user_id'"); 
```

我假设您`$_SESSION['id']`事先进行了消毒。

# ruby-on-rails - Ruby on Rails 新应用程序错误：没有要加载的文件

> ID：12792514
> 
> 赞同：1
> 
> 时间：2012-10-09T03:41:23.377
> 
> 标签：ruby-on-rails, ruby, rubygems

我刚刚在 Ubuntu 10.04 上安装了 Ruby、RubyGems 和 Rails。现在我尝试创建一个新应用程序：

```
rails new blog 
```

它返回一个错误：

```
run  bundle install
/usr/local/lib/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require': no such file to load -- net/https (LoadError)
...
Fetching gem metadata from https://rubygems.org/.Unfortunately, a fatal error has occurred. Please see the Bundler 
troubleshooting documentation at http://bit.ly/bundler-issues. Thanks! 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T03:44:07.030

尝试：

```
apt-get install libopenssl-ruby 
```

# meteor - Meteor - 如何限制向客户端发布的字段？

> ID：12792519
> 
> 赞同：8
> 
> 时间：2012-10-09T03:42:44.773
> 
> 标签：meteor

我只想向客户端发布有限数量的数据。

我试过这样做：

```
# server
Meteor.publish('users', ->
  Meteor.users.find({},
    fields:
      services: 0
  )
) 
```

但是客户端仍然接收到整个对象。

```
# client
Meteor.startup( ->
  Meteor.subscribe('users')
)

# ... 
# in another function
Meteor.users.find().observe( ->
  changed: (updated) ->
    console.log updated
) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T11:57:49.727

```
Meteor.publish '', ->
    Posts.find({}, { fields: { title: 1, content: true, secret: false } }); 
```

添加那些{}怎么样

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T08:56:42.170

下面的代码适用于我（咖啡脚本）。该`pwd`字段未发布。

### 服务器

```
Meteor.publish "users", (userId) ->
  user = Users.find userId,
    fields:
      pwd: false

  return user 
```

### 客户

```
Meteor.autosubscribe ->
    userId = Session.get SESSION_USER

    Meteor.subscribe 'users', userId 
```

我看到的唯一区别是

*   `0`vs `false`...（应该只是口味问题）
*   您的收藏可通过以下方式访问`Meteor`
*   `autosubscribe`在客户端中，当您使用该`observe`方法时，我的订阅被放置在回调中。

这些字段是否也存在于`Meteor.users.find().fetch()`浏览器控制台的结果中？

# sql - SQL：在这个查询中使用“all”和“min”的条件有什么不同？

> ID：12792522
> 
> 赞同：3
> 
> 时间：2012-10-09T03:43:17.297
> 
> 标签：sql

有什么不同？

对：

```
select distinct maker, price from product
inner join printer
on product.model = printer.model
where color = 'y' and price <= (select min(price) from printer where color = 'y') 
```

错误的：

```
select distinct maker, price from product
inner join printer
on product.model = printer.model
where color = 'y' and price <= all (select distinct price from printer where color = 'y') 
```

我知道使用“min”在性能上会更好。但是任何人都可以解释结果有什么错误和不同吗？

表结构：

```
Product(maker, model, type)
Printer(code, model, color, type, price) 
```

内克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:57:54.803

如果有 NULL ，第二个将失败`printers.price`。考虑一下（我在这里使用 PostgreSQL）：

```
=> select 0 <= (select min(x) from (values (null), (1), (2)) as t(x));
 ?column? 
----------
 t
(1 row) 
```

还有这个：

```
=> select 0 <= all (select x from (values (null), (1), (2)) as t(x));
 ?column? 
----------

(1 row) 
```

这是第一种情况下的真实结果，而第二种情况下为 NULL（这是错误的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T04:05:09.437

**ALL**是针对所有行扩展比较运算符并将条件与 AND 组合的缩写形式。
**ANY**是针对所有行扩展比较运算符并将条件与 OR 组合的缩写形式。

具体来说，

```
price <= all (select distinct price from printer where color = 'y') 
```

展开为，假设子查询返回 4 行

```
price <= <price1> AND
price <= <price2> AND
price <= <price3> AND
price <= <price4> 
```

当其中任何一个解析为 NULL 时，结果为**false**，因为 NULL 无法使用`<=`. MIN 没有这个问题（因为 MIN 跳过了 NULL），除了没有结果行的边缘情况，在这种情况下`<= (select MIN..)`也会给你一个意想不到的结果。

使用 ALL in 对可空列执行测试*几乎总是*应使用过滤器进行限定，例如

```
select distinct maker, price from product
inner join printer
on product.model = printer.model
where color = 'y' and price <=
      all (select distinct price from printer where color = 'y'
           where price is not null) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T03:51:07.083

1.  ~~ALL 是一个 Transact-SQL 扩展；并非所有数据库引擎都支持它。~~哎呀。
2.  在谈论数据库时，性能是不可忽视的。该`min`解决方案可能会使用索引来非常快速地执行（假设 RDBMS 构建 B 树或类似的排序索引），而 all 解决方案强制进行全表扫描。
3.  如果`price`允许为空，你会得到不同的答案。`min`忽略所有 null 值，因此如果`price`为 null，则 min 的结果将是一个数字。但是您的不同查询的结果将尝试将该 null 与所有价格进行比较，这将为每个价格返回，这意味着该子句`UNKNOWN`中没有价格匹配。`where`

# transactions - 是否有任何其他 NoSQL 数据库支持像 Redis 这样的事务？

> ID：12792523
> 
> 赞同：0
> 
> 时间：2012-10-09T03:43:33.027
> 
> 标签：transactions, nosql

我一直在其他一些 NoSQL 数据库中寻找类似[redis 事务](http://redis.io/topics/transactions)的东西，但我找不到类似的东西。我知道[这个答案](https://stackoverflow.com/questions/2212230/transactions-in-nosql)确实有一些有效的观点，但是没有深入了解我的问题的原因，我是否在另一个 NoSQL 数据库中忽略了这个功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T19:14:55.250

[FoundationDB](http://foundationdb.com/)是一个支持 ACID 事务的 NoSQL 键值存储。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T00:30:46.303

Neo4J 有 ACID 事务。它是一个[图形数据库](http://en.wikipedia.org/wiki/Graph_database)而不是键值存储，但仍被归类为 NoSQL。

[http://docs.neo4j.org/chunked/stable/transactions.html](http://docs.neo4j.org/chunked/stable/transactions.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T05:18:38.010

ZODB

[http://www.zodb.org/](http://www.zodb.org/)

[http://www.zodb.org/documentation/guide/transactions.html?highlight=transaction](http://www.zodb.org/documentation/guide/transactions.html?highlight=transaction)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T13:51:20.690

NoSQL 的世界非常广阔，有许多提供事务功能的 NoSQL 解决方案。我最了解的是[GT.M](http://sourceforge.net/projects/fis-gtm/)，它实现了对 ACID（Atomic、Consistent、Isolated、Durable）的全面支持。

# ios - 应用程序仅在 iPod Touch 第 4 代上崩溃

> ID：12792526
> 
> 赞同：3
> 
> 时间：2012-10-09T03:44:24.133
> 
> 标签：ios, xcode, memory, crash, ipod-touch

我有一个在 iTouch 4th gen 上经常崩溃的应用程序。它适用于所有其他设备，包括 iPhone 和 iPad。当我在此设备上使用 Xcode 运行它时，它确实崩溃了，但没有错误消息。我还对 Leaks 进行了分析，没有看到任何泄漏，但它再次崩溃，没有错误消息。我确实收到内存警告。Live Bytes 永远不会超过 5MB，所以我不太了解内存警告。

无论如何，我希望有人对这个设备有经验，并且可能对问题的原因有一些想法。

在所需的设备功能下，我只有这个：Item 0 - armv7

运行 iOS6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:34:05.557

可能是 iTouch 4th gen 的内存容量比其他设备小。或者可能会打开其他应用程序，从而使您正在运行的应用程序的内存也更小。

# mysql - phpmyadmin 在以 SQL 格式导出时更改表引擎

> ID：12792533
> 
> 赞同：0
> 
> 时间：2012-10-09T03:45:06.333
> 
> 标签：mysql, phpmyadmin, innodb, myisam

我在 mysql 中有一个包含 10 个表的数据库模式。有些表有`innodb`引擎，有些表有`myisam`. 但是，当使用 phpmyadmin 以 SQL 格式导出模式时，**它会将所有表引擎转换为 mysiam**。
那么为什么 phpmyadmin 会自动更改表引擎呢？
使用 phpmyadmin 导出时，如何保持表引擎相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:26:57.413

使用“自定义 - 显示所有可能的选项”导出时，检查您是否将数据转储为“结构和数据”选择的选项。

# sql - 交叉引用 SQL 数据

> ID：12792536
> 
> 赞同：0
> 
> 时间：2012-10-09T03:45:35.213
> 
> 标签：sql, cross-reference

我有两个这样的表：

```
Table 1
id    code     classID
43    EDGE-10  13

Table 2
classID   class
13        T-Shirts 
```

如何交叉引用第一个表中的 classID 以将类加入视图中的表 1？

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T03:48:38.717

像这样的东西怎么样

```
SELECT  *
FROM    Table1 t1 INNER JOIN
        Table2 t2   ON  t1.classID = t2.classID 
```

也许也可以在这里阅读

[JOIN 简介 – JOIN 基础](http://blog.sqlauthority.com/2009/04/13/sql-server-introduction-to-joins-basic-of-joins/)

# ruby-on-rails - Rails 语义，控制器中的 Model.find()（是或否？）

> ID：12792539
> 
> 赞同：2
> 
> 时间：2012-10-09T03:46:15.820
> 
> 标签：ruby-on-rails, ruby

我刚刚和一个朋友进行了一次简短的交谈，他提到有些人不喜欢`Model.find(params[:id])`控制器。

他说另一种选择是有一个接口。您没有使用其他方法向对象发送消息。

有人可以解释一下并举个例子吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T05:27:22.887

我认为这篇文章：['Making Rails Models Thin'](http://solnic.eu/2011/08/01/making-activerecord-models-thin.html)很好地解释了这个概念。

# c - c在for循环中编程测验平均数组

> ID：12792541
> 
> 赞同：0
> 
> 时间：2012-10-09T03:46:20.670
> 
> 标签：c, arrays

我被困在一个问题上。我试图在这个程序分配中找到测验的平均值。这是我的代码。粗体代码是我的问题所在。

```
 #include <stdlib.h>
 #include <stdio.h>
 #define STUDENTS 4
 #define QUIZZES 5

 main () {

int quizScores [STUDENTS] [QUIZZES] = {
    { 90, 90, 90, 90, 90 },
    { 90, 80, 70, 60, 50 },
    { 90, 89, 88, 87, 86 },
    { 90, 85, 80, 75, 70 }
 };
 int studentTotal = 0, quizTotal, row, col;
 double studentAverage, quizAverage;

 for ( row = 0; row < STUDENTS; row++) {
     studentTotal = 0;
     for ( col = 0; col < QUIZZES; col++) {
         studentTotal += quizScores[row][col];
     }
     studentAverage = (double) studentTotal / QUIZZES;
     printf("Student %i has average %.2lf\n", row, studentAverage);
 }

 **for ( col = 0; col < QUIZZES; col++) {
     quizTotal = 0;
     for ( row = 0; row < STUDENTS; row++) {
         quizTotal += quizScores[col][row];  
     }
     quizAverage = (double) quizTotal / STUDENTS;
     printf("Quiz %i has an average %.2lf\n",col, quizAverage);
     // output the average for this quiz
 }**

system("pause");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:50:35.323

您将索引混合在`quizTotal += quizScores[col][row];`. 应该是`quizTotal += quizScores[row][col];`。

# machine-learning - 我们如何在数据集上使用无监督学习技术，然后标记集群？

> ID：12792542
> 
> 赞同：7
> 
> 时间：2012-10-09T03:46:21.513
> 
> 标签：machine-learning, neural-network, matlab, unsupervised-learning

首先，这肯定是功课（所以请不要完整的代码示例）。那就是说...

我需要使用 Matlab 中的神经网络工具箱测试监督算法旁边的无监督算法。数据集是[UCI 人工字符数据库](http://archive.ics.uci.edu/ml/datasets/Artificial+Characters)。问题是，我有一个关于监督算法的很好的教程，却被无监督地淹没了。

所以我知道如何使用 . 创建自组织地图 `selforgmap`，然后使用`train(net, trainingSet)`. 我不明白接下来要做什么。我知道它把我给它的数据聚集成（希望）10个集群（每个字母一个）。

那么两个问题：

*   然后我如何标记集群（假设我有一个比较模式）？
    *   当我这样做时，我是否试图将其变成一个监督学习问题？
*   如何在（另一个）测试集上创建混淆矩阵以与监督算法进行比较？

我想我在这里遗漏了一些基于概念或行话的东西——我所有的搜索都提出了监督学习技术。一个正确方向的观点将不胜感激。我现有的代码如下：

```
P = load('-ascii', 'pattern');
T = load('-ascii', 'target');

% data needs to be translated
P = P';
T = T';

T = T(find(sum(T')), :);

mynet = selforgmap([10 10]);
mynet.trainparam.epochs = 5000;
mynet = train(mynet, P);

P = load('-ascii', 'testpattern');
T = load('-ascii', 'testtarget');

P = P';
T = T';
T = T(find(sum(T')), :);

Y = sim(mynet,P);
Z = compet(Y);

% this gives me a confusion matrix for supervised techniques:
C = T*Z' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T02:40:19.563

由于您不使用标记数据的任何部分，因此根据定义，您正在应用无监督方法。

> *“然后我如何标记集群（鉴于我有一个比较模式）？”*

您可以尝试对标签集进行不同的扰动，并使比较模式的平均误差（或准确度）最小化。使用集群，您可以以任何您喜欢的方式标记集群。可以将其想象为尝试不同的标签分配，直到您最小化指定的性能指标。

> *“当我这样做时，我是否试图把它变成一个监督学习问题？”*

这取决于。如果您在聚类过程中明确使用（已知）数据点，那么这是半监督的。如果没有，您只需使用标签信息来评估和“比较”有监督的方法。它是一种监督形式，但不是基于训练集，而是基于最佳情况的预期性能（即“代理”为集群指定正确的标签）。

> *“如何在（另一个）测试集上创建混淆矩阵以与监督算法进行比较？”*

您需要一种将集群转换为标记类的方法。对于少数集群（例如`C <= 5)`，您基本上可以创建`C!`矩阵，并保留一个使您的平均分类错误最小化的矩阵。但是，在您的情况下，`C = 10,`这显然是不切实际的，而且开销很大！

作为替代方案，您可以使用以下方法标记集群（从而获得混淆矩阵）：

*   半监督方法，其中集群可以先验地标记，或者通过属于已知集群/类的数据引导通过播种过程。
*   对估计的聚类质心和真实标签之间的距离进行排名或查找。这将为每个集群分配最接近或最相似的标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:18:50.503

[这个视频](https://class.coursera.org/ml/lecture/preview/81)有帮助吗？它没有回答您的问题，但它表明甚至可能需要人工交互才能选择集群数量。自动标记集群更加困难。

如果您考虑一下，则不能保证会根据描述的数字进行聚类。网络可能会根据线的宽度或字体的平滑度等对数字进行分组。

# java - 当我将 Oauth 用于 android subscirption 时，我必须面对这个异常：403 User Rate Limit Exceeded

> ID：12792543
> 
> 赞同：1
> 
> 时间：2012-10-09T03:46:36.283
> 
> 标签：java, android, oauth, google-api, subscription

```
com.google.api.client.auth.oauth2.TokenResponseException: 403 User Rate Limit Exceeded
<HTML>
<HEAD>
<TITLE>User Rate Limit Exceeded</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>User Rate Limit Exceeded</H1>
<H2>Error 403</H2>
</BODY>
</HTML>

    at com.google.api.client.auth.oauth2.Tenter code hereokenResponseException.from(TokenResponseException.java:103)
    at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:303)
    at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:323)
    at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:340)
    at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:505)
    at com.google.api.client.auth.oauth2.Credential.handleResponse(Credential.java:292)
    at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1023)
    at com.google.api.client.googleapis.json.GoogleJsonResponseException.execute(GoogleJsonResponseException.java:182)
    at com.google.api.client.googleapis.services.GoogleClient.executeUnparsed(GoogleClient.java:279)
    at com.google.api.client.http.json.JsonHttpRequest.executeUnparsed(JsonHttpRequest.java:207)
    at com.google.api.services.androidpublisher.Androidpublisher$Purchases$Get.execute(Androidpublisher.java:416)
    at com.uks.jbipaper.android.Subscription.subscriptionVerification(Subscription.java:71)
    at com.uks.jbipaper.android.Subscription.main(Subscription.java:29) 
```

**我的示例代码是：**

```
GoogleCredential credential = new GoogleCredential.Builder().setTransport(HTTP_TRANSPORT).setJsonFactory(JSON_FACTORY).setServiceAccountId(Constants.ACCOUNT_ID).setServiceAccountScopes(Constants.ACCOUNT_SCOPE).setServiceAccountPrivateKeyFromP12File(new File( Constants.P12)).build();

Androidpublisher publisher = new Androidpublisher.Builder(HTTP_TRANSPORT,JSON_FACTORY, credential).setApplicationName(Constants.APP_NAME).build();
Androidpublisher.Purchases purchases = publisher.purchases();
Get get = purchases.get(Constants.APP_PACKAGE_NAME,"android.test.purchased", Constants.TOKEN);
SubscriptionPurchase subscripcion = get.execute(); 
```

# javascript - 画布动画

> ID：12792548
> 
> 赞同：0
> 
> 时间：2012-10-09T03:47:12.917
> 
> 标签：javascript, html, canvas

只是为了在画布上绘制图像，我很想逐帧制作动画，但到目前为止，我的谷歌还没有任何结果，或者答案相当模糊。这是代码。我的 javascript

```
<script>
      function drawOnCanvas() {
          var firstImg=1;
          var lastImg=75;
        var ctx=document.getElementById("mycanvas").getContext('2d');
        var image=new Image();
        image.src="iglesiafls75.png";
        image.onload=function() {
          ctx.drawImage(image,0,0,550,800,0,0,550,800);
        }
      }

      window.addEventListener('load', drawOnCanvas, true);
    </script> 
```

该图像是另外 75 个图像的一部分，我想知道如何制作然后在画布中阅读，因为它是一个常规的逐帧动画，任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T06:43:08.717

1）不要把画布放在函数里面——那会很慢。

```
// instead of
function () {
    var ctx = document.get......;
}

// do this
var ctx = document.getElement...
function draw () { ctx.drawImage(); }

// or
var ctx...
function draw (context) { context.drawImage(); }
draw(ctx); 
```

它不必是全局的——只是不要把它***放在***你每秒调用 60 次的函数中。

2）你不能用图像做到这一点。图片需要100%下载才能使用。
您拥有的功能将在几 1/1000 秒内完成。这甚至没有足够的时间*开始*下载您的图像。

因此，为您的图像制作一个加载系统，当它们全部加载时，*然后*开始您的画布动画。

3）在管理图像绘制方面，要么你要在每帧图片之间切换，要么你要使用图片图集，并切换坐标以指向正确的部分（如动画条，或纹理贴图）。

4) 要循环，您将使用`window.requestAnimationFrame`（当前为“webkitRequestAnimationFrame”、mozRequest...、msRequest...）或 setTimeout。

# eclipse - 使用 Google Gson 库时出现 java.lang.NoClassDefFoundError

> ID：12792551
> 
> 赞同：6
> 
> 时间：2012-10-09T03:47:45.497
> 
> 标签：eclipse, classpath, gson, apache-httpclient-4.x, apache-httpcomponents

我正在使用`Gson library`将对象转换为`Json`，反之亦然。我已`jars`将该库复制到一个新文件夹中`lib`，并将其添加到我的`Eclipse IDE`.

我有一个主类，我使用`toJson()`如下所示将对象转换为 Json 并将其发送到`servlet`using `Apache HttpClient's HttpPost()`。

```
Gson gson= new Gson();
String json = gson.toJson(names); 
```

但是在执行以下代码时，我`servlet`无法将其转换`Json`为`Object`使用。`fromJson()`

```
Gson gson = new Gson();
Names names = gson.fromJson(s, Names.class); 
```

它抛出以下异常：

```
java.lang.NoClassDefFoundError: com/google/gson/Gson 
```

知道为什么会发生这种情况吗？我应该将其复制`jars`到`WebContent/WEB-INF/lib`文件夹而不是一个名为的新文件夹`lib`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T05:41:49.013

好的，我通过这篇文章找到了答案。请阅读第一个答案中的评论。

[我收到“java.lang.ClassNotFoundException：com.google.gson.Gson”错误，即使它是在我的类路径中定义的](https://stackoverflow.com/questions/4961336/i-am-getting-java-lang-classnotfoundexception-com-google-gson-gson-error-even)

我只需要将外部文件`jars`放入我的`WebContent/WEB-INF/lib`文件夹并自行`Eclipse`处理`build path`。

# workflow-foundation-4 - 恢复托管在工作流服务中的状态机工作流

> ID：12792552
> 
> 赞同：1
> 
> 时间：2012-10-09T03:48:04.710
> 
> 标签：workflow-foundation-4, workflow-foundation

我正在尝试创建托管在 IIS 中的状态机工作流的原型。客户端是一个 Web 表单应用程序。

我想要实现的是一个长期运行的“向导”风格的过程，它会持续存在于数据库中。状态机工作流基本上根据工作流的状态控制当前的 Web 表单页面。

我想知道如何找到当前状态名称以“恢复”工作流实例。想象一下，有人正在完成向导过程的一半，然后决定停下来稍后再回来完成它。

我找到了一种解决方案，即根据与工作流实例相关的字段将当前状态名称存储在数据库中；但是，这对我来说并不是一个优雅的解决方案。肯定有一种简单的方法可以使用工作流服务来确定工作流实例的当前状态吗？

谢谢大家，非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:35:51.680

没有这样做的标准方法。基本方法是使用[TrackingParticipant](http://msdn.microsoft.com/en-us/library/system.activities.tracking.trackingparticipant.aspx)并跟踪事件。请参阅[此示例](http://wf.codeplex.com/wikipage?title=Tracking%20states%20with%20WorkflowApplication)作为起点。

# asp.net-mvc - Razor 输出的 XSLT 转换

> ID：12792553
> 
> 赞同：0
> 
> 时间：2012-10-09T03:48:05.413
> 
> 标签：asp.net-mvc, iis, xslt, razor, httpmodule

我想使用 XSLT 执行 HTML 到 HTML 的转换。问题是，我希望在剃刀视图引擎“完成”渲染之后以及在响应发送回客户端之前完成转换*步骤*。

我看到一篇[处理响应转换](https://stackoverflow.com/questions/2281173/how-can-i-perform-xslt-transformations-in-an-httpmodule)的帖子，但我不确定是否有更好的扩展点，或者关于 Razor 响应的某些内容是否会使特定的 HttpModule 成为不可能。如果那个例子 HttpModule 是正确的想法，它是正确的技术吗？

在我投入大量时间*之前，*我只是想要一些见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:32:29.173

利用：

```
using (var sw = new StringWriter())
{
    var viewResult = ViewEngines.Engines.FindView(ControllerContext, "ViewName", null);
    var viewContext = new ViewContext(ControllerContext, viewResult.View, view.ViewData, view.TempData, sw);

    viewResult.View.Render(viewContext, sw);

    var html = sw.ToString();
} 
```

# iphone - 在 ios 中未检测到 Mapview 触摸

> ID：12792554
> 
> 赞同：1
> 
> 时间：2012-10-09T03:48:08.923
> 
> 标签：iphone, objective-c, ios, uitouch

我的xib中有一个mapview。

```
-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    NSLog(@"Touch Description %@",[[touch view]description]);
    if ([touch view]  == self.mapView) 
   {
      //rest of my code
   }
} 
```

我得到的描述是

> MKAnnotationContainerView: 0x19057360; 帧 = (0 0; 4096 4096); 自动调整子视图 = 否；层=CALayer：0x1900df20

if 循环没有被执行。我该如何解决这个问题。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:16:17.050

```
 -(void) touchesBegan :(NSSet *) touches withEvent:(UIEvent *)event
    {
        UITouch *touch = [touches anyObject];
        NSLog(@"%@",[[touch view]description]);
        if ([touch view]  == self.mapView) 
       {
           //rest of my code
       }

       [super touchesBegan:touches withEvent:event ];
    } 
```

# java - Java 复制构造函数不复制值

> ID：12792556
> 
> 赞同：-1
> 
> 时间：2012-10-09T03:48:13.390
> 
> 标签：java, copy-constructor

我编写了一个模拟股票的类：

```
public Stock(String ticker, int shares, float purchasePrice) throws IllegalArgumentException
{
    if(ticker == null || ticker == "" ||
        shares <= 0 || purchasePrice <= 0)
        throw new IllegalArgumentException(Messages.enterAppropriateValues());

    this.ticker = ticker;
    this.shares = shares;
    this.purchasePrice = purchasePrice;
    latestPrice = purchasePrice;
    updatePercentGain();
} 
```

复制构造函数如下所示：

```
public Stock(Stock other) throws IllegalArgumentException
{
    this(other.ticker, other.shares, other.purchasePrice);
} 
```

以下是我用来测试的命令：

```
 Stock bac = new Stock("BAC", 100, 42.22f);
    System.out.println(bac);

    bac.setLatestPrice(43.35f);
    System.out.println(bac);

    Stock bacCopy = new Stock(bac);
    System.out.println(bacCopy); 
```

输出是：

```
 BAC 100 42.22 42.22 0.00%
    BAC 100 42.22 43.35 2.68%
    BAC 100 42.22 42.22 0.00% 
```

出于某种原因，代表**增益百分比**的最后一个值没有被复制？

这是百分比增益方法顺便说一句：

```
public void updatePercentGain()
{
    percentGain = ((latestPrice - purchasePrice) / purchasePrice) * 100;
} 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T03:50:42.843

当您的构造函数运行时，它会使用传入构造函数`Stock`的参数来初始化。由于这些值相同，因此百分比增益将为 0.00%。`latestPrice``purchasePrice`

如果您还希望`latestPrice`在复制构造函数中复制当前，您也必须这样做：

```
public Stock(Stock other) throws IllegalArgumentException
{
    this(other.ticker, other.shares, other.purchasePrice);
    this.latestPrice = other.latestPrice;
    updatePercentGain();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T03:51:26.213

在您的实际构造函数（不是您的复制构造函数）中，您没有复制 latestPrice，您只是将其设置为等于当前价格：

```
latestPrice = purchasePrice; 
```

因此，您的复制构造函数仅传递“42.22”而不是“43.35”，并且您的副本没有获得最新价格。

# string - 使用一对字符串过滤字符串列表

> ID：12792557
> 
> 赞同：0
> 
> 时间：2012-10-09T03:48:20.217
> 
> 标签：string, list, haskell, functional-programming, tuples

我想定义一个 Haskell 函数，它从字符串列表中删除一对字符串中包含的任何字符串，并只返回一个包含所有剩余字符串的列表。所以一个例子是：

```
function ["football","basketball","soccer"] ("football", "basketball") = ["soccer"] 
```

我知道您可以使用该`filter`函数来过滤满足给定谓词的列表。我知道我可以通过这种方式过滤掉一个列表：

```
function' xs s = filter (/=s) xs 
```

但我不知道如何让它与元组一起工作。运行代码时，我不断收到错误。知道怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T04:22:25.513

更通用的解决方案是使用一个字符串列表来过滤，而不仅仅是一对。一个更通用的解决方案将使用支持的任何内容的列表，`Eq`而不仅仅是字符串。

因此，我们正在寻找具有以下类型的东西：

```
Eq a => [a] -> [a] -> [a] 
```

快速搜索 hoogle 产量`(\\)`

```
import Data.List ((\\))

main = print $ ["football","basketball","soccer"] \\ ["football", "basketball"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T03:52:59.733

```
myfunc :: Eq a => [a] -> (a, a) -> [a]
myfunc xs (a,b) = filter (\x -> (x /= a) && (x /= b)) xs 
```

让我们看看类型`filter`

```
filter :: (a -> Bool) -> [a] -> [a] 
```

当你这样做时`filter f xs`，它只是对列表的所有元素应用`f`type 函数，`a -> Bool`删除那些该函数返回的元素`False`。

我在元组的元素上进行了模式匹配，`(a,b)`并且我刚刚将函数定义`f`为`\x -> (x /= a) && (x /= b)`。这是一个匿名函数，它接受列表中的一个元素，`True`仅当它既不等于元组的第一个元素也不等于第二个元素时才返回。`&&`是布尔值`and`，因此`True`仅当它的两个参数都是. 时才返回`True`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T04:06:32.690

最直接的方法是运行过滤器两次，就像这样。

```
tupleFilter :: (Eq a) => [a] -> (a, a) -> [a]
tupleFilter xs (a, b) = function' (function' xs a) b 
```

不过，这里的关键是在使用过滤器中的元素之前，您对元组进行模式匹配（或解构）。

这是一个没有中间过滤器功能的版本，在这种情况下可能应该内联以供将来阅读。

```
tupleFilter xs (a, b) = filter (\x -> (x /= a) && (x /= b)) xs 
```

# api - Magento Soap API V2 响应内容长度不正确

> ID：12792563
> 
> 赞同：3
> 
> 时间：2012-10-09T03:49:15.210
> 
> 标签：api, magento, soap, magento-1.7

我们正在尝试将我们的 magento 安装与第三方库存管理应用程序（建立在 .net 上）连接起来。但是同步不起作用，第三方告诉我soap api正在返回一个空响应。

我一直在倾听，因为每当我在 PHP 中做任何事情时，API 都可以正常工作。此外库存更新工作正常，但检索订单/发票信息不能（实际上它偶尔会在 1% 的时间里）

由于间歇性的性质，我们认为这一定是网络问题，但经过大量搜索并将 mage::log() 添加到核心 api 文件中，我可以看到连接正在发生，并且响应对象正在创建更多Magento。

所以我的推论是 SOAP API 有问题（我使用的是版本 2）

我已经安装了soapUI并设置了我们的集成，它正确地接收来自WSDL文件的方法，但是当我尝试访问“登录”方法时，我得到一个空响应，即使我输入了不正确的登录详细信息，它也是空的。

soapUI 输出以下错误：

**ERROR: 发生错误 [Premature end of Content-Length delimited message body (expected: 267; received: 266]，详见错误日志**

因此，似乎 http 标头存在问题，某些函数能够返回响应（当然，如果没有登录哈希，它只是无效的，但至少它是一个响应）。从我对 java 和 .net 的（非常有限的）理解来看，它们在这些方面比 php 更严格，这表明为什么 php 集成没有问题。

谁能告诉我为什么会发生这个错误以及如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T04:26:29.310

我假设您使用的是符合 WS-I 的 SOAP API v2，因为我遇到了同样的问题；如果不是，那么这仍然可能适用。如果不符合 WS-I，我永远无法连接到 v2 API，这就是我发现这个 bug 的原因。

如果您查看该`app/code/core/Mage/Api/Model/Server/Wsi/Adapter/Soap.php`文件，您将在公共运行函数中看到该文件基本上分为两部分 - 1 用于 WSDL 定义响应，1 用于实际 SOAP 响应。

在 SOAP 响应中有一些字符串替换、替换`<soap:operation soapAction=""></soap:operation>`等等`<soap:operation soapAction="" />`。这显然会导致内容长度计算出现问题 - 这也发生在 WSDL 定义响应中，但似乎不会导致问题。

通过将 try 大括号之间的代码替换为下面的代码，我能够成功连接到 SOAP API。基本上，在字符串替换发生***后***，我最终清除了标题并重新计算了内容长度：

```
 $this->_instantiateServer();

            $content = preg_replace(
                        '/(\>\<)/i',
                        ">\n<",
                        str_replace(
                                '<soap:operation soapAction=""></soap:operation>',
                                "<soap:operation soapAction=\"\" />\n",
                                str_replace(
                                        '<soap:body use="literal"></soap:body>',
                                        "<soap:body use=\"literal\" />\n",
                                        preg_replace(
                                            '/<\?xml version="([^\"]+)"([^\>]+)>/i',
                                            '<?xml version="$1" encoding="'.$apiConfigCharset.'"?>',
                                            $this->_soap->handle()
                                        )
                                )
                        )
                    );

            $this->getController()->getResponse()
                      ->clearHeaders()
                      ->setHeader('Content-Type','text/xml; charset='.$apiConfigCharset)
                      ->setHeader('Content-Length',strlen($content))
                      ->setBody($content); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T01:31:14.953

作为参考，如果您使用的是 V2 版本，则需要更改：

```
/app/core/Mage/Api/Model/Server/V2/Adapter/Soap.php 
```

关于第 62 行的内容替换为`try{}`：

```
$this->_instantiateServer();
$content = preg_replace(
    '/<\?xml version="([^\"]+)"([^\>]+)>/i',
    '<?xml version="$1" encoding="'.$apiConfigCharset.'"?>',
    $this->_soap->handle()
);
$this->getController()->getResponse()
    ->clearHeaders()
    ->setHeader('Content-Type','text/xml; charset='.$apiConfigCharset)
    ->setHeader('Content-Length',strlen($content))
    ->setBody($content); 
```

这并没有为我解决所有问题，有一些神秘的空白将所有事情都搞砸了，一个是结束标签后的空格，另一个是客户在他们的电话号码末尾添加了两个空格（？？ )

无论如何，为了清除这两个我做了......

这并没有为我解决所有问题，仍然存在一些空白问题，我添加了一些额外的 preg_replace 以快速修复它

```
$content = preg_replace('/\s+/', ' ', $content);
$content = preg_replace('/Envelope> /', 'Envelope>', $content); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-24T13:00:51.927

对我有用的唯一解决方案是将 API 端点切换为不使用 index.php

变化来自： `domain.com/index.php/api/v2_soap/index/wsdl/1`

到： `domain.com/api/v2_soap/?wsdl=1`

注意从 url 中删除了 index.php。这样，请求将通过 api.php 入口点而不是 index.php。作为一个副作用，api 开始工作得更快，因为 api.php 更轻量级。

# 采取的步骤：

*   确保您在 nginx 或 .htaccess 中设置了正确的重定向规则（见下文）
*   清除 Magento 缓存
*   在浏览器中打开 WSDL (domain.com/api/v2_soap/?wsdl=1) 并验证它是否正确。soap:address 节点不应包含 index.php 部分：

    `<soap:address location="http://domain.com/api.php/?type=v2_soap"/>`

*   在您的客户端脚本中使用 domain.com/api/v2_soap/?wsdl=1 url

## Nginx 配置：

```
location /api {
    rewrite ^/api/rest /api.php?type=rest last;
    rewrite ^/api/v2_soap /api.php?type=v2_soap last;
    rewrite ^/api/soap /api.php?type=soap last;
} 
```

## 阿帕奇.htaccess：

取消注释行：

```
RewriteRule ^api/([a-z][0-9a-z_]+)/?$ api.php?type=$1 [QSA,L] 
```

## 其他对我不起作用的解决方案：

*   编辑 V2/Adapter/Soap.php
*   编辑 Wsi/Adapter/Soap.php

我正在开发 Magento 1.9.2.4

# database - 设计图书馆管理数据库

> ID：12792564
> 
> 赞同：0
> 
> 时间：2012-10-09T03:49:29.707
> 
> 标签：database

我正在设计一个图书馆管理数据库，我是否应该将图书馆资源（例如书籍，视频，音频）分成三个表，或者只有一个表包含所有资源信息，这是因为它们的大部分列是相同的。

```
**Books**
id
title
author
isbn
... 
```

* * *

```
**Audios**
id
title
author
isbn
duration
... 
```

* * *

```
**Videos**
id
title
author
isbn
duration
cast 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:54:40.500

我会将公共列保留在一个表中，并根据类型将它们分开：

```
library_items {id, type_id, title, author, isbn}
item_types {id, name} 
```

类型表将包含书籍、音频、视频。

然后拥有包含附加列的附加表：

```
library_audios (id, duration}
library_videos {id, duration, cast} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-25T11:42:46.147

请为书籍、多媒体......为书籍制作单独的表格 --- 类别然后是子类别，类别 sr no - 用于书籍

对于 cd/dvd 类型的音频/视频 .... 它将更有助于过滤数据... 便于数据库访问

# php - post_excerpt 而不是 post_content，在循环之外

> ID：12792569
> 
> 赞同：4
> 
> 时间：2012-10-09T03:50:26.127
> 
> 标签：php, wordpress

我正在尝试从页面中获取 wordpress 摘录以显示在页脚的样式区域中。我目前有以下内容，它给了我标题和所有内容：

```
<?php
$page_id = 2;
$page_data = get_page( $page_id );
$content = $page_data->post_content;
$title = $page_data->post_title;
echo '<h3>'. $page_data->post_title .'</h3>';
echo '<p>'. $page_data->post_content .'</p>'; ?> 
```

我尝试了 post_excerpt 而不是 post_content 的各种组合，并尝试在此处模拟和编辑示例：http://codex.wordpress.org/Function_Reference/get_page[但](http://codex.wordpress.org/Function_Reference/get_page)没有任何运气。有几次我尝试过其他人的例子，但根本没有内容。

这可能是因为我试图让它在循环之外显示，还是我只是没有找到正确的组合？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T04:30:22.950

为什么不使用[substr()](http://php.net/manual/en/function.substr.php)来限制字符串？

```
$content = $page_data->post_content;
$excerpt = substr($content, 0, 155); 
```

大意的东西

以这种速度，您无需尝试找到摘录的真实变量，并且可以控制长度，以及结尾是否有省略号等。

此外，如果您需要找到摘录变量，您可以只执行 a `var_dump($page_data)`，然后查看返回您需要的值，不是吗？

**编辑：**

您可以尝试在 functions.php 中使用类似这样的函数向页面添加手动摘录

```
add_action( 'init', 'my_add_excerpts_to_pages' );
function my_add_excerpts_to_pages() {
    add_post_type_support( 'page', 'excerpt' );
} 
```

**编辑编辑：**

所以我只是挖得更深一点，这里的这个小家伙可能会帮助你。把它放到你的functions.php文件中（[source](http://wordpress.mfields.org/2010/excerpts-for-pages-in-wordpress-3-0/)）

```
add_post_type_support( 'page', 'excerpt' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T04:13:55.810

也许尝试通过将其直接放在您发布的代码之前来重置 wordpress 查询。

```
<?php wp_reset_query(); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T06:55:00.343

使用此代码摘录...

```
<?php query_posts('cat=ID'.'&showposts=NO. OF POST') ?>
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
<h3><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h3>
<p><?php echo substr(get_the_excerpt(), 0,65).' [...]'; ?></p>
<a href="<?php the_permalink(); ?>">Read More...</a>
<?php endwhile; ?>
<?php wp_reset_query(); ?>
<?php endif;?> 
```

# ios - 无法连接 Storyboard Unwind Segue

> ID：12792573
> 
> 赞同：24
> 
> 时间：2012-10-09T03:50:42.943
> 
> 标签：ios, xcode, uistoryboard

我正在尝试创建一个展开 segue，但是当 ctrl+拖动时没有任何东西可以连接到它。此外，当我右键单击“退出”图标时，没有可用选项。

![在此处输入图像描述](../Images/1b6af5f9887648de3fd83dae3a8891cc.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-10-09T04:16:03.803

您需要在视图控制器上定义一个 IBAction，该控制器采用“UIStoryboardSegue *”类型的参数。

像这样的东西：

```
@interface MyViewController
...
- (IBAction)unwindFromConfirmationForm:(UIStoryboardSegue *)segue {
}
...
@end 
```

**斯威夫特 3 版本**

```
@IBAction func unwindToViewController(segue: UIStoryboardSegue) {

    //code

} 
```

*由[DoruChidean](https://stackoverflow.com/users/6505084/doruchidean)*在[https://stackoverflow.com/a/46199117/250190提供](https://stackoverflow.com/a/46199117/250190)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-11T16:14:41.843

只是为了澄清，为了在情节提要中将其链接起来，在将上述方法添加到“您想要展开的视图控制器”之后，您需要从按钮或“您想要展开的视图控制器”中的任何内容向下拖动到**它自己**的底部栏中的绿色小“退出”图标。

应该有一个弹出窗口链接到“- unwindFromConfirmationForm”。

完成后， unwind segue 应该可以工作。

* * *

只是添加到 Travis 的优点：要完全清楚：

假设您刚刚开始尝试使用故事板，因此您 (a) 制作了一个新的 iOS7 Xcode 项目，并且 (b) 制作了带有一个导航控制器的故事板，然后 (c) 您制作了五六个视图控制器。您的目标是能够使用 unwinds 在六个视图控制器之间进行切换。{通过控制从一个按钮拖动到下一个按钮来“前进”是微不足道的。}

现在，此时：所有六个视图控制器，**确实将是“默认”类“ViewController”**。请注意，Xcode（有点毫无意义）为您提供了 ViewController.h 和 ViewController.m 文件。

同样，此时您的所有六个“简单示例”视图确实只是使用该文件 ViewController.m。所以，很简单，如果你添加这个：

```
-(IBAction)unwindUnused:(UIStoryboardSegue *)segue
    {
    NSLog(@"I did an unwind segway! Holy crap!");
    } 
```

对于那个“存根”文件 ViewController.m - 事实上，**您的六个视图中的每一个现在都将“工作”**，您将能够拖动到臭名昭著的绿色小“退出”按钮。就这么容易。

现在只是 TBC 通常在实际项目中，您永远不会使用默认的“ViewController.m”文件。所以，去这里：

[https://developer.apple.com/library/ios/referencelibrary/GettingStarted/RoadMapiOS/SecondTutorial.html](https://developer.apple.com/library/ios/referencelibrary/GettingStarted/RoadMapiOS/SecondTutorial.html)

并找到精确的“创建自定义视图控制器”，如果您是新手，它当然会非常详细地解释该过程。

但同样，如果你只是在胡闹，想让绿色按钮用于展开，只需将代码片段放在“ViewController.m”存根文件中，然后你就走了。（请记住，在“现实生活”中，您会在每个自定义屏幕中放置一个自定义的此类调用 - 可能处理数据等）希望它有所帮助！

*额外的事实：*请注意，无论如何，当您像这样进行测试时，“返回”按钮会自动出现在导航栏上！（即，即使您不添加展开存根方法。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-13T13:38:00.837

为乔恩·赫斯点赞！这是 swift 3 的等价物

```
@IBAction func unwindToViewController(segue: UIStoryboardSegue) {

    //code

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-31T08:19:42.400

您正在使用 xcode6-beta 版本吗？在 beta 1-3 中是一个错误，它会阻止界面生成器检测展开 segues。在 xcode6-beta4 中，此错误已得到修复。

# android - Android 2.3 webview loadData 只显示编码字符

> ID：12792576
> 
> 赞同：4
> 
> 时间：2012-10-09T03:51:22.630
> 
> 标签：android, android-webview

我正在尝试使用带有 loadData 的 webview 来显示图像：

```
 String data = "<html><head><title>Photo</title></head>";
        data = data + "<body><center><img width=\"100%\" src=\"" + imageUrl + "\" /></center></body></html>";

        imageWebView.getSettings().setLoadWithOverviewMode(true);
        imageWebView.getSettings().setUseWideViewPort(true);
        imageWebView.getSettings().setBuiltInZoomControls(true);
        imageWebView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
        imageWebView.setScrollbarFadingEnabled(false);
        imageWebView.loadData(data, "text/html", "UTF-8");
        imageWebView.setBackgroundColor(0x00000000); 
```

在 4.1 模拟器中，这可以正常工作，我可以看到图像。在 2.3 中，它只显示编码的 html 代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T15:14:57.547

这似乎是由[WebView 中的一个已知错误](http://code.google.com/p/android/issues/detail?id=4401)引起的，如果您在提供的数据中有任何百分比，则数据将被解释为 URL。

正如错误报告中提到的，一个已知的解决方法是`%`用`&#37;`.

[在类似的 SO 帖子](https://stackoverflow.com/questions/10317977/web-page-at-datatext-html-not-available-with-certain-webview-text-html-cont)中建议了另一种似乎效果很好的解决方法，并且还应涵盖可能导致相同问题的任何其他字符：

```
mWebView.loadData(URLEncoder.encode(data,"utf-8").replaceAll("\\+"," "), "text/html", "utf-8"); 
```

# sql - 选择 5 个最新的 SQL Server

> ID：12792578
> 
> 赞同：6
> 
> 时间：2012-10-09T03:51:29.347
> 
> 标签：sql, sql-server, tsql, sql-server-2012

我有一张这样的记录表：

```
id        timestamp               dose             drug_id
1     2012-10-04 09:10:54          05                 2
1     2012-10-04 09:12:34          15                 2
1     2012-10-04 09:15:12          20                 2
1     2012-10-04 09:35:32          25                 2
1     2012-10-04 09:37:34          25                 2
1     2012-10-04 09:39:24          25                 2
1     2012-10-04 09:42:16          35                 2
1     2012-10-04 09:43:07          35                 2 
```

我想要做的是选择给定药物的最后 5 个使用剂量值，所以在这种情况下，查询应该返回**35, 25, 20, 15, 05**。

我知道我可以使用 TOP 和 ORDER BY 来获取最新的 5 个条目，但在这种情况下，它会返回重复项（35、35、25、25、25）。

我应该用什么来获得我想要的输出？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T03:54:44.993

我无权访问我的服务器来测试这个，但不应该

```
SELECT TOP 5 dose 
FROM table_id 
GROUP BY dose 
ORDER BY max(time) desc; 
```

工作？

编辑：在[http://sqlfiddle.com/#!6/610c4/2](http://sqlfiddle.com/#!6/610c4/2)上测试过，请注意我没有使用`timestamp`过`time`. 适当修复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T04:07:44.350

```
SELECT top 5 dose
FROM table_id
GROUP BY dose
ORDER BY max(timestamp) desc 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T10:56:46.253

这有帮助吗

```
DECLARE @T TABLE(ID INT,Time_Stamp DATETIME,Dose INT, Drug_Id INT)
INSERT INTO @T VALUES
(1,'2012-10-04 09:10:54',05,2),
(1,'2012-10-04 09:12:34', 15,2),
(1,'2012-10-04 09:15:12',20,2),
(1,'2012-10-04 09:35:32',25,2),
(1,'2012-10-04 09:37:34',25,2),
(1,'2012-10-04 09:39:24',25,2),
(1,'2012-10-04 09:42:16',35,2),
(1,'2012-10-04 09:43:07',35,2)

;WITH CTE AS(
SELECT *, Rn = ROW_NUMBER()OVER(PARTITION BY Dose ORDER BY Time_Stamp DESC) 
FROM @T)
SELECT TOP 5 ID,Time_Stamp,Dose,Drug_Id 
FROM CTE
WHERE Rn = 1
ORDER BY Dose DESC 
```

![在此处输入图像描述](../Images/f099ab41469d6e6703a76e3959395d48.png)

# ruby-on-rails - Rails 3.2 ActiveRecord 事务

> ID：12792582
> 
> 赞同：3
> 
> 时间：2012-10-09T03:52:11.203
> 
> 标签：ruby-on-rails, activerecord, transactions, ruby-on-rails-3.2

我一直在阅读 ActiveRecord 事务会自动包裹保存和销毁操作。我的问题与以下情况有关。

我有一个库存系统，用于跟踪货件并在创建货件时调整产品的库存量。当我删除一个货件时，我已经将货件数量重新添加到产品的库存量中。这种情况是为用户弄乱货物而设计的。删除货件会将已发货的物品重新添加到库存中。

我的问题是当 product_shipments 循环通过时，是否有必要提供 Product.transaction 块，或者我可以省略这个，因为 destroy 方法自动包装在事务中？可以像我一样将整个循环包装在事务中吗？如果出现问题，我怎样才能最好地确保所有这些数据库操作都回滚？

```
def destroy
  @shipment = Shipment.find(params[:id])
  @shipments = @shipment.product_shipments
  Product.transaction do
    @shipments.each do |s|
      @difference = -(s.qty_shipped.to_i)
      Product.update_inventory_quantities(@difference, s.product_id)
    end
  end
  @shipment.destroy
  respond_with @shipment, :location => shipments_url
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T05:42:09.037

为了详细说明 Mischa 的建议，ActiveRecord 回调将允许您从几个重要方面改进此代码。首先，它删除了提示你写这个问题的丑陋交易块。几乎总是，如果你在 Rails 中看到这样的事务块，你可能做错了什么。其次，它开始将事情转移到他们关注的地方。这不仅会使维护变得更容易，因为它们位于直观的位置并且很大程度上利用了内置的 Rails 方法，而且它还会使测试变得更加容易。

我怀疑这个应用程序没有测试。这可能是写几个的好借口，因为你正在做这个调整。它开始分解到一些简单的规范可能会大有帮助的地步，而您的应用程序复杂性看起来可能已经到了可以从增加的头脑中受益的地步（尤其是由于涉及到金钱）。

我将对您的对象的关系做出某些假设，并将它们排除在下面的示例代码之外，但我正在想象一个 has_many :through 类型的情况，涉及 Shipments、Products 和 ProductShipments。

您的控制器已清理：

```
def destroy
  # note: you may not need the additional scope of @shipment - depending on your view, you may be able to omit the @
  @shipment = Shipment.destroy(params[:id])
  respond_with @shipment, :location => shipments_url
end 
```

您的发货型号：

```
class Shipment < ActiveRecord::Base

  before_destroy :restore_unshipped_inventory

  def restore_unshipped_inventory
    product_shipments.each(&:restore_unshipped_inventory)
  end

end 
```

您的加盟模式：

```
class ProductShipment < ActiveRecord::Base  

  def restore_unshipped_inventory
    difference = -(s.qty_shipped.to_i)
    Product.update_inventory_quantities(difference, product.id)
  end

end 
```

老实说，我什至会更进一步，让 ProductShipment 中的 restore_unshipped_inventory 对 product ( `product.update_inventory_quantities`) 的实例进行操作，即使该实例方法所做的只是调用您在那里的类方法，只是为了进一步隔离不相关的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T03:59:52.853

你所做的是对的。但您需要在交易中添加**@shipment.destroy**。因此，如果交易失败，您的货物将不会被销毁。如果您的事务由于某种原因失败，则不会触发任何提交并且您的事务将回滚。

# java - 创建 Web 服务客户端时没有主题替代名称存在异常

> ID：12792586
> 
> 赞同：2
> 
> 时间：2012-10-09T03:52:46.687
> 
> 标签：java, ssl, ssl-certificate, axis2, wsdl2java

我想使用 wsdl2java 实用程序创建一个 Web 服务客户端。我必须通过 SSL 连接到此服务器

这个 wsdl 看起来像这样：

```
https://xxx.xx.xx.xx:8443/api/wsdl/xxxxxxx.wsdl 
```

我使用以下方法生成了证书：

```
openssl s_client -connect xxx.xx.xx.x:8443 </dev/null | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' > abcCertificate.pem 
```

并使用以下命令将其添加到密钥库：

```
keytool -import -noprompt -trustcacerts -alias testcert -file abcCertificate.pem -keystore /usr/java/jdk1.7.0_06/jre/lib/security/cacerts -ext san=ip:xxx.xx.xx.xx 
```

当我尝试使用`wsdl2java`创建*Web 服务*客户端时，它*会抛出异常*：

```
javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: No subject alternative names present 
```

我使用 [此链接](https://stackoverflow.com/questions/8744607/how-to-add-subject-alernative-name-to-ssl-certs/8744717#8744717)中的这些信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:44:50.810

您似乎对“导入”和“生成”证书感到困惑。

您`openssl s_client`的命令不会生成证书，它会检索该服务器上正在使用的证书。

您之后使用的`keytool -import`命令将该证书原样导入您的信任库。在那里使用没有意义`-ext san=ip:xxx.xx.xx.xx`：您没有生成证书，您只是在导入它。

如果您控制该服务器，则应该生成（或从其他地方获取证书）具有 IP 地址 SAN（因为[Java 严格遵循此规范](https://stackoverflow.com/a/8444863/372643)）。

如果您无法控制该服务器，请使用其主机名（前提是现有证书中至少有一个与该主机名匹配的 CN）。

通常，将仅从这样的服务器获得的证书直接导入到您的信任库中并不是很好，因为您假设该特定连接没有被篡改。

# c++ - 析构函数中的 C++ SDL_FreeSurface 崩溃

> ID：12792592
> 
> 赞同：1
> 
> 时间：2012-10-09T03:53:53.790
> 
> 标签：c++, vector, sdl, destructor

我有一个`Block`调用`SDL_FreeSurface(surface)`析构函数的类。在`main()`我创建 Block 的实例时，该对象正常运行，但是当我在另一个`Control`具有`vector<Block> block_vector`作为数据成员的类中使用它时，当我将实例添加`Block`到`block_vector`. 我缩小了`Block`调用时的析构函数的问题`SDL_FreeSurface(surface)`。向向量中添加对象与 is 有什么关系吗？问题是什么？

```
 class Block{

public:

    Block(int x, int y);
   ~Block();

    void Load_Image(MediaFunctions &M_Functions);

    void SetPosition(int x, int y);

    void BlitBlock(SDL_Event &event, MediaFunctions &M_Functions, SDL_Surface *destination);

    bool DetectionNames(SDL_Event &event, MediaFunctions &M_Functions, SDL_Surface *destination);

    bool DetectionHours(SDL_Event &event, MediaFunctions &M_Functions, SDL_Surface *destination);

    bool return_error();

private:

    SDL_Surface *block_surface_names;
    SDL_Surface *block_surface_hours;

    SDL_Surface *block_names_detected;
    SDL_Surface *block_hours_detected;

    SDL_Rect     block_rect_names;
    SDL_Rect     block_rect_hours;

    bool error;

    };

    //the problem
    Block::~Block(){

    SDL_FreeSurface(block_surface_hours);
    SDL_FreeSurface(block_surface_names);

    SDL_FreeSurface(block_hours_detected);
    SDL_FreeSurface(block_names_detected);

    }

    //when doing this 
    void Control::HandleEvents(SDL_Event &event, MediaFunctions &M_Functions){

if(event.type == SDL_KEYDOWN){

    if( event.key.keysym.sym == SDLK_a ){

            //append a block instance
            BlockVector.push_back(Block (Block(100,100)));
            BlockVector.at(block_index).Load_Image(M_Functions);

            block_index++;

    }

    }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T05:19:50.950

当您将一个 Block 对象插入向量中时，会生成一个副本。由于您没有提供复制构造函数，因此使用了编译器生成的复制构造函数。编译器生成的复制构造函数将简单地复制您的指针。它不会复制实际的 SDL 表面。

这意味着您的原始 Block 对象和插入向量中的 Block 对象都具有指向相同 SDL 表面的指针。当其中一个 Block 对象的生命周期结束时，将调用析构函数，从而释放 SDL 表面。现在另一个 Block 对象有一个悬空指针，当它的生命周期结束并调用析构函数时，您在悬空指针上调用 SDL_FreeSurface。

这几乎肯定是导致您崩溃的原因。这就是为什么您需要遵循[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)，并正确实现复制构造函数和赋值运算符。实施取决于您。在大多数情况下，我建议对您的对象进行完整的深拷贝。但是对于像 SDL 表面这样的重量级对象，我建议您考虑实现某种引用计数机制，或者`std::shared_ptr`与调用`SDL_FreeSurface`而不是调用`delete`.

# c# - 使用经过测试的内部方法对公共方法进行单元测试

> ID：12792593
> 
> 赞同：3
> 
> 时间：2012-10-09T03:53:57.943
> 
> 标签：c#, .net, unit-testing

我发现自己经常陷入这种模式，我编写了一个由非常小的方法组成的类，这些方法完全由我的单元测试执行。然后我发现我需要构建另一个调用这些方法的方法，我必须为此编写一个更复杂的单元测试——一个简单的例子就可以说明问题：

```
namespace FooRequest
{
    static public class Verifier
    {
        static public bool IsValid(string request)
        {
            return (!IsAllCaps(request) && !ContainsTheLetterB(request));
        }

        static internal bool IsAllCaps(string request)
        {
            return (request.Equals(request.ToUpper()));
        }

        static internal bool ContainsTheLetterB(string request)
        {
            return request.ToLower().Contains("b");
        }
    }
} 
```

对于代码，我会编写单元测试来涵盖两个内部方法，如下所示：

```
namespace UnitTest
{
    using Microsoft.VisualStudio.TestTools.UnitTesting;
    using FooRequest;

    public class VerifierTest
    {
        [TestClass]
        public class ContainsTheLetterB
        {
            [TestMethod]
            public void ShouldReturnTrueForStringContainsB()
            {
                Assert.IsTrue(Verifier.ContainsTheLetterB("burns"));
            }

            [TestMethod]
            public void ShouldReturnFakseForStringDoesNotContainB()
            {
                Assert.IsFalse(Verifier.ContainsTheLetterB("urns"));
            }
        }

        [TestClass]
        public class IsAllCaps
        {
            [TestMethod]
            public void ShouldReturnTrueForStringIsAllCaps()
            {
                Assert.IsTrue(Verifier.IsAllCaps("IAMALLCAPS"));
            }

            [TestMethod]
            public void ShouldReturnFakseForStringDoesNotContainB()
            {
                Assert.IsFalse(Verifier.IsAllCaps("IAMnotALLCAPS"));
            }
        }
    }
} 
```

对于公共方法，我真的只想测试“如果你调用的方法返回 false，则返回 false”——令人讨厌的是，我必须以强制我的内部方法返回 true 或 false 的方式设置输入——我的测试这个方法不应该关心它调用的内部方法（对吗？）

```
 [TestClass]
    public class IsValid
    {
        [TestMethod]
        public void ShouldReturnFalseForInvalidStringBecauseContainsB()
        {
            Assert.IsFalse(Verifier.IsValid("b"));
        }

        [TestMethod]
        public void ShouldReturnFalseForInvalidStringBecauseIsAllCaps()
        {
            Assert.IsFalse(Verifier.IsValid("CAPS"));
        }

        [TestMethod]
        public void ShouldReturnTrueForValidString()
        {
            Assert.IsTrue(Verifier.IsValid("Hello"));
        }
    } 
```

显然，对于这个例子来说，这并不算太糟糕，但是当有很多内部方法并且输入的配置并不简单时，测试我的公共“此输入是否有效”方法会变得复杂。

我应该为所有内部方法创建一个接口，然后将其存根以进行测试，还是有更简洁的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T20:25:46.927

我正在输入评论，但它太大了。我认为您处于违反 SRP 的边缘，但您肯定违反了开放/封闭原则。如果您需要更改验证字符串的方式，则需要修改您的验证程序类。

我会与@seldary 有点不同，但差别不大......

```
 public interface IStringRule
    {
        bool Matches(string request);
    }

    public class AllCapsRule : IStringRule
    {
        public bool Matches(string request)
        {
            //implement
        }
    }

    public class IsContainingBRule : IStringRule
    {
        public bool Matches(string request)
        {
            //implement
        }
    }

    public class Verifier
    {
        private List<IStringRule> Rules;

        public Verifier(List<IStringRule> rules)
        {
            Rules = rules;
        }

        public bool IsValid(string request)
        {
            return (!Rules.Any(x=>x.Matches(request) == false));
        }
    } 
```

现在您的验证者可以扩展，但不能修改。您可以根据需要添加任意数量的新规则，并且实施不会改变。测试验证器就像传入一些返回任意真假值的模拟字符串规则一样简单，并确保验证器返回适当的结果。

每个 IStringRule 都会像您一样单独进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T07:36:26.300

更整洁的方法如下：

1.  将您的类重构`Verifier`为三个类，在这种情况下，每个方法一个类：`Verifier`, `AllCapsChecker`, `LetterBChecker`.
2.  相应地重构您的测试类 - 现在应该有三个测试类。
3.  `Verifier`使用您最喜欢的 DI 方法将两个内部逻辑类注入。
4.  该类`VerifierTests`应该将两个依赖项安排并注入到`Verifier`中，并且**只测试`Verifier`逻辑**（在这种情况下只测试逻辑运算符）。

`Verifier`在这里你可以找到和类的改编`VerifierTests`，只是为了了解这个想法（我在这里使用了 Moq）：

```
namespace FooRequest
{
    public interface IAllCapsChecker
    {
        bool IsAllCaps(string request);
    }

    public interface ILetterBChecker
    {
        bool IsContainingB(string request);
    }

    public class Verifier
    {
        private readonly IAllCapsChecker m_AllCapsChecker;
        private readonly ILetterBChecker m_LetterBChecker;

        public Verifier(IAllCapsChecker allCapsChecker, ILetterBChecker letterBChecker)
        {
            m_AllCapsChecker = allCapsChecker;
            m_LetterBChecker = letterBChecker;
        }

        public bool IsValid(string request)
        {
            return (!m_AllCapsChecker.IsAllCaps(request) && !m_LetterBChecker.IsContainingB(request));
        }
    }

    [TestClass]
    public class IsValid
    {
        [TestMethod]
        public void ShouldReturnFalseForInvalidStringBecauseContainsB()
        {
            var allCapsMock = new Mock<IAllCapsChecker>();
            allCapsMock.Setup(checker => checker.IsAllCaps("example")).Returns(true);

            var letterBChecker = new Mock<ILetterBChecker>();
            letterBChecker.Setup(checker => checker.IsContainingB("example")).Returns(true);

            var verifier = new Verifier(allCapsMock.Object, letterBChecker.Object);

            Assert.IsFalse(verifier.IsValid("example"));
        }
    }
} 
```

# ios - 将嵌入的 URL 加载到 UIWebView

> ID：12792594
> 
> 赞同：0
> 
> 时间：2012-10-09T03:54:01.730
> 
> 标签：ios, uiwebview

任何人都可以帮助我如何将嵌入式 URL 加载到 UIWebView 吗？URL 可以是指向 Youtube 的 URL，也可以是加载任何页面的简单 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T04:26:19.827

就是这么简单，下面是`code for youTube:`

```
 NSString *embedHTML = @"\
    <html><head>\
    <style type=\"text/css\">\
    body {\
    background-color: transparent;\
    color: white;\
    }\
    </style>\
    </head><body style=\"margin:0\">\
    <embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" \
    width=\"%0.0f\" height=\"%0.0f\"></embed>\
    </body></html>";

    NSString *html = [NSString stringWithFormat:embedHTML,@"http://www.youtube.com/watch?v=qe39vPFabuA", 64.0, 64.0];
    [webView loadHTMLString:html baseURL:nil]; 
```

如果您必须使用它**`UIWebView`来加载一些网站**，只需使用它：

```
 NSString *urlAddress = @"http://www.google.com";

    //Create a URL object.
    NSURL *url = [NSURL URLWithString:urlAddress];
    //URL Requst Object
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

    //Load the request in the UIWebView.
    [webView loadRequest:requestObj]; 
```

只需在您的 viewWillAppear 中或根据您的要求添加此方法。

# scala - 如何将此地图/平面地图转换为Scala中的理解？

> ID：12792595
> 
> 赞同：19
> 
> 时间：2012-10-09T03:54:30.653
> 
> 标签：scala, monads, for-comprehension

如何将此地图/平面地图转换为理解，请解释它是如何工作的，谢谢。

```
 def compute2(maybeFoo: Option[Foo]): Option[Int] =
      maybeFoo.flatMap { foo =>
      foo.bar.flatMap { bar =>
          bar.baz.map { baz =>
          baz.compute
      }
    }
  } 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-09T04:23:08.937

您的代码可以翻译成这样：

```
def compute2(maybeFoo: Option[Foo]): Option[Int] =
  for {
    foo <- maybeFoo
    bar <- foo.bar
    baz <- bar.baz
  } yield baz.compute 
```

**[Scala 编程的](http://www.artima.com/shop/programming_in_scala_2ed)引述，第二版：**

通常，for 表达式的形式为：

```
for ( seq ) yield expr 
```

这里，seq 是一系列生成器、定义和过滤器，在连续元素之间使用分号。

这个 for 表达式包含一个生成器、一个定义和一个过滤器：

```
for {
p <- persons // a generator
n = p.name // a definition
if (n startsWith "To") // a filter
} yield n 
```

**用一个生成器翻译表达式**

首先，假设您有一个简单的 for 表达式：

```
for (x <- expr1) yield expr2 
```

其中 x 是一个变量。这样的表达式被翻译为：

```
expr1.map(x => expr2) 
```

**翻译以生成器和过滤器开头的表达式**

现在，考虑将前导生成器与其他一些元素组合在一起的表达式。A 为形式的表达：

```
for (x <- expr1 if expr2) yield expr3 
```

被翻译成：

```
expr1 withFilter (x => expr2) map (x => expr3) 
```

**翻译以两个生成器开头的表达式**

下一个 case 处理以两个生成器开头的表达式，如下所示：

```
for (x <- expr1; y <- expr2) yield expr3 
```

上面的 for 表达式被翻译成 flatMap 的一个应用：

```
expr1.flatMap(x => for (y <- expr2) yield expr3) 
```

# ios - Mach-O Linker 引用错误，但找不到源文件

> ID：12792598
> 
> 赞同：0
> 
> 时间：2012-10-09T03:54:47.957
> 
> 标签：ios, cordova, facebook-ios-sdk

我正在尝试使用[https://github.com/mgcrea/cordova-facebook-connect](https://github.com/mgcrea/cordova-facebook-connect)插件将 facebook 连接登录添加到我的 phonegap/cordova 应用程序。

当我去构建应用程序时，我收到一个错误

```
Apple Mach-O 链接器错误
“_OBJC_CLASS_$_Facebook”，引用自：
     FacebookConnect.o 中的 objc-class-ref
     （也许你的意思是：_OBJC_CLASS_$_FacebookConnect）
ld：未找到架构 armv7 的符号
铿锵声：错误：链接器指令失败，退出代码为 1（用户 -v 查看调用）

```

我一直在浏览我的文件`FacebookConnet.o`，`FacebookConnect.h`并且没有任何名为.`FacebookConnect.m``Facebook.h``FacebookSDK.framework`

```
-插件
   FacebookConnect.h
   FacebookConnect.m
   -FacebookSDK.framework
       -标题
          脸书.h
          FacebookSDK.h
          等等等等等等

```

文件是否`.o`在构建过程中创建，如果是，我可以找到这个错误可能在哪里，以便我可以尝试修复它？或任何其他解决此问题的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T04:08:07.413

转到您的 Facebook.h，显示实用程序（右侧选项卡），然后单击文件检查器。

是否检查了您在 Target Membership 中的项目？如果没有，请确保已检查并重试。

# javascript - Backbone.js 获取 JSON 的问题

> ID：12792599
> 
> 赞同：0
> 
> 时间：2012-10-09T03:54:49.047
> 
> 标签：javascript, ajax, json, jquery, backbone.js

我正在研究一些教程代码，并且像大多数教程代码一样，“json”对象是通过将它作为一个简单的对象添加到 javascript 文件中来伪造的。我正在尝试从我托管在服务器上的文件中获取 JSON。我试图让这更现实一点。尽管如此，我似乎无法让绑定工作。

我的演示代码（我已经开始工作了），但是可以在这里看到 javascript 中的“json”对象。

[有效的jsfiddle](http://jsfiddle.net/rsturim/veD3C/)

我想要的工作可以在这里看到。

[没有的jsfiddle](http://jsfiddle.net/rsturim/sfzun/)

我的远程 json 位于此处的[json 文件](http://sturim.me/contacts.json)——如果你“分叉”我的 2 个小提琴，测试工具就在那里供你测试（骨干、下划线、jquery 全部板载）。

我相信我的问题的症结在于“集合”和使用该集合的“视图”。

```
var Contacts = Backbone.Collection.extend({
    model: Contact,
    url: 'http://sturim.me/contacts.json',
    parse: function(data) {
        return data.objects;
    }            
});

//define master view
var ContactsView = Backbone.View.extend({
    el: $("#contacts"),

    initialize: function() {
        this.collection = new Contacts();
        this.collection.fetch();
        this.render();
    },

    render: function() {
        this.$el.find("article").remove();
        _.each(this.collection.models, function(item) {
            this.renderContact(item);
        }, this);
    },

    renderContact: function(item) {
        var contactView = new ContactView({
            model: item
        });
        this.$el.append(contactView.render().el);
    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T04:04:04.193

首先，由于浏览器安全重构，第二个 jsfiddle 不起作用。您不能从 jsfiddle 内部查询您的个人域。

其次，在您的`Contacts` `parse`函数中，`data`是一个包含文件内容的字符串，因此您可以将该响应转换为对象。

```
parse: function(data) {
    return JSON.parse(data).objects;
} 
```

最后，`fetch`是一个异步请求，因此您的逻辑将在请求完成之前尝试呈现。您应该根据视图上触发的事件进行渲染。

```
initialize: function() {
    this.collection = new Contacts();

    // When the contents of the collection are set, render the view.
    this.collection.on('reset', function(){
        this.render();
    }, this);

    this.collection.fetch();
}, 
```

# parsing - 表索引是如何确定的？

> ID：12792600
> 
> 赞同：1
> 
> 时间：2012-10-09T03:55:09.097
> 
> 标签：parsing, snmp, mib

我正在查看 VMWare 的 MIB 文件，它们具有以下结构（显然已精简）：

```
vmwVmTable OBJECT-TYPE SYNTAX      
    SEQUENCE OF VmwVmEntry 
    ....

vmwVmEntry OBJECT-TYPE 
    SYNTAX VmwVmEntry 
    ....
VmwVmEntry ::= SEQUENCE { vmwVmIdx  Integer32, ... 

vmwVmIdx OBJECT-TYPE 
    SYNTAX Integer32 (0..65535) 
    MAX-ACCESS  not-accessible 
```

所以 vmwVmIdx 是表的索引，但它被标记为不可访问。果然，如果您请求它，则不会返回任何内容。那么表的索引是如何确定的呢？我见过可以显示此表的应用程序，但是如何显示呢？

所有应用程序是否只查看检索到的每个对象的 OID 的最后一个整数并假设它是索引？如果是这样的话，它与我的[其他一些相关的问题有什么关系？](https://stackoverflow.com/questions/12438363/reading-snmp-object-index-of-type-ipaddress)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T18:18:20.820

在进行了一些研究之后，将索引列设为不可访问被认为是最佳实践。所以你真的只取 OID 的最后一点并将其用于索引。

因此，在查看表中的条目时，您附加 table.entryName。在其下方，您将拥有列名（因此您必须有一个 MIB 才能知道这一点，无论如何您都需要知道您正在查看一个表）。

一旦你有了 table.entryName.columnName，然后看看你在下面有什么条目。之后，每个检索到的值的 OID 就是索引。

# java - 3DES的手动实现（学术）

> ID：12792604
> 
> 赞同：4
> 
> 时间：2012-10-09T03:55:41.387
> 
> 标签：java, cryptography, 3des

对于我正在学习的一门课程，我们正在手动实施 3DES 方案，这在纸上非常简单（双键，使用 EDE 加密）。我选择了 Java 作为实现语言，但遇到了一个问题，即它如何使用不同的密钥处理加密/解密。在尝试应用第二轮（即使用 K2 进行“解密”）时，我不断收到 javax.crypto.BadPaddingException 错误。默认的 DES 密码使用 PKCS5Padding，我认为这是问题所在，但我不确定如何解决它。我的加密代码如下（我希望它不是太直截了当，更不用说我忽略了一些简单的东西）。先感谢您。

键定义（非常基本，我会改进它，因为我在浏览时看到了一些不同的方法）

```
 KeyGenerator kgen = KeyGenerator.getInstance("DES");
        SecretKey sk_1 = kgen.generateKey(); 
        SecretKey sk_2 = kgen.generateKey();
        byte[] raw_1 = sk_1.getEncoded();
        byte[] raw_2 = sk_2.getEncoded();

        spec_1 = new SecretKeySpec(raw_1, "DES"); //key 1
        spec_2 = new SecretKeySpec(raw_2, "DES"); //key 2

        cipher = Cipher.getInstance("DES"); //standard mode is ECB which is block-by-block w/PKCS5Padding
        cipher2 = Cipher.getInstance("DES");

    protected byte[] get3DESEncryption(byte[] plaintext) throws Exception{
        byte[] output = new byte[plaintext.length];
        System.out.println("output len init: " + output.length);
        cipher.init(Cipher.ENCRYPT_MODE, spec_1);
        cipher2.init(Cipher.DECRYPT_MODE, spec_2);

        //first encryption round, key 1 used
        output = cipher.doFinal(plaintext);
        //second "encryption" round, key 2 used but decrypt run
        output = cipher2.doFinal(output);
        //third encryption round, key 1 used
        output = cipher.doFinal(output);

        //return ciphertext
        return output;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T04:03:45.030

问题是您不应该在第二步（解密）和第三步（加密）中使用任何填充。当你实际应用时`EDE`，你应该只填充纯文本。

> 转换的形式为：
> 
> “算法/模式/填充”或“算法”（在后一种情况下，使用模式和填充方案的特定于提供程序的默认值）。

因此，您应该明确告诉它不要在 cipher2 和 cipher3 上使用填充（您还没有创建后者）。

因此，您应该拥有三个密码对象：

*   cipher1 DES/ECB/PKCS5Padding
*   cipher2 DES/ECB/NoPadding
*   密码 3 DES/ECB/NoPadding

[额外提示]

对于解密，您应该以不同的方式初始化密码，并且还应该重新排序密码。

# asp.net-mvc - 浏览 jqgrid 中的其他页面（导航）

> ID：12792605
> 
> 赞同：0
> 
> 时间：2012-10-09T03:56:11.300
> 
> 标签：asp.net-mvc, jqgrid

```
var jqDataUrl = "@Url.Action("transaction")";
$(document).ready(function () {
    $('#jqgProducts').jqGrid({
        url: jqDataUrl,
        datatype: 'json',
        mtype: 'POST',
        colNames: ['Name', 'Reson', 'Start Date', 'End Date', 'No of Days'],
        //columns model
        colModel: [
            { name: 'Name', index: 'Name', align: 'left', width:175},
            { name: 'Reson', index: 'Reson', align: 'left' , width:75},
            { name: 'Start Date', index: 'StartDate', align: 'left', width:100 },
            { name: 'End Date', index: 'EndDate', align: 'left',width:100  },
            { name: 'No Of Days', index: 'NoOfDays', align: 'left', width:75 },
        ],
        pager: $('#jpProducts'),
        rowNum: 10,
        sortname: 'StartDate',
        sortorder: 'desc',
        viewrecords: true,
        height: '100%'
    }); 
```

这是我的 jquery 网格。它的工作。但我无法通过网格页面。它只查看第一页。网格底部的箭头不起作用。我无法转到下一页。谁能帮我解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T06:14:25.067

我想您在操作中的代码`@Url.Action("transaction")`忽略了jqGrid 发送到服务器的`page`和。`rows`你使用`datatype: 'json'`没有`loadonce: true`选项。所以你必须实现数据的**服务器端分页**。

例如，参见代码示例[的答案](https://stackoverflow.com/a/5501644/315935)，它显示了如何实现服务器端分页、排序和搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T06:19:18.383

如果您不想实现服务器端分页/排序，您可以使用`loadonce:true`option.

但是如果你想实现服务器端排序，首先你的方法`transaction`应该准备好接受以下参数

```
public ActionResult transaction(string page, string rows, string sidx, string sord)
{} 
```

如果您之前使用过 JqGrid，那么您无疑会熟悉传递给任何 ajax 请求的默认参数：“page”、“rows”、“sidx”和“sord”。

这些参数分别对应当前页、每页记录、排序列和排序顺序。

这里有一篇文章：[How to use JqGrid with ASP.NET MVC](http://yassershaikh.com/how-to-use-jqgrid-with-asp-net-mvc/)还有一篇 Phil Haack 写的很棒的文章在[这里](http://haacked.com/archive/2009/04/13/using-jquery-grid-with-asp.net-mvc.aspx)。

[本文](http://www.dotnetcurry.com/ShowArticle.aspx?ID=618)在为任何事物实现服务器端分页和排序时也很有用。

# android - Android - 在后台按下硬键的监听器

> ID：12792606
> 
> 赞同：6
> 
> 时间：2012-10-09T03:56:18.770
> 
> 标签：android, keyevent

Android 提供了一些回调方法来帮助我们处理应用程序内部的关键事件。但是，如果我想在我的应用程序在后台运行时监听关键事件怎么办？例如。我想听搜索按钮上的长按事件来做一个特殊的功能。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T05:52:49.600

KeyEvents 只能由活动处理，因为它们是用户按下键的界面，并且仅当它们位于前台时。即使是在后台运行的服务也不打算对用户输入做出反应。

但是通过使用服务，您可以获得解决方法。您可以通过注册 BroadcastReceiver 创建响应硬按键事件的服务。例如，在 AOSP 音乐应用程序中，它们有一个服务 ( [MediaPlaybackService )，它通过注册一个 BroadcastReceiver (](https://github.com/android/platform_packages_apps_music/blob/master/src/com/android/music/MediaPlaybackService.java) [MediaButtonIntentReceiver](https://github.com/android/platform_packages_apps_music/blob/master/src/com/android/music/MediaButtonIntentReceiver.java) )来响应音量键事件。

这是它注册接收器的代码：

```
mAudioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
ComponentName rec = new ComponentName(getPackageName(),
        MediaButtonIntentReceiver.class.getName());
mAudioManager.registerMediaButtonEventReceiver(rec); 
```

即使音乐应用程序不在前台，这也有效。[此](https://stackoverflow.com/a/11510564/1369222)答案的代码片段。

# appcelerator - iPhone 没有收到推送通知 - Appcelerator/Xtify

> ID：12792607
> 
> 赞同：1
> 
> 时间：2012-10-09T03:56:20.500
> 
> 标签：appcelerator, appcelerator-mobile, xtify

我目前正在使用 Appcelerator 和 Xtify 处理推送通知的移动项目。

我的 iPhone 令牌已成功存档并注册到 Xtify（它在 Xtify 门户上列出），但是当我尝试从 Xtify 测试页面发送推送通知时，我的 iPhone 没有收到任何消息

我还需要用 Xtify 做些什么来获取推送消息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T03:33:36.610

听起来像你的推送证书。您是否使用正确的密码将正确的开发推送证书上传到 Xtify？

# c# - 消除字符串中“无关紧要”的重复字符的最简单方法

> ID：12792609
> 
> 赞同：4
> 
> 时间：2012-10-09T03:56:59.470
> 
> 标签：c#, .net, string

我有一个类似于“foo-bar----baz--biz”的字符串

消除无关紧要的重复字符（`-`）并使字符串“foo-bar-baz-biz”最简单、最快捷的方法是什么？

我试过做类似的事情`.Replace("--","-")`，但这似乎只能在某种程度上起作用。我必须在循环中运行它才能完全做到这一点，我知道有更好的方法。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T04:01:21.947

尝试这个，

```
string finalStr = string.Join("-", x.Split(new[] { '-' }, StringSplitOptions.RemoveEmptyEntries)) 
```

如果将其转换为`Extension method`

```
static class StringExtensions 
{
    public static string RemoveExtraHypen(this string str) 
    {
        return string.Join("-", str.Split(new []{'-'}, StringSplitOptions.RemoveEmptyEntries));
    }
} 
```

用法

```
private void SampleDemo()
{
    string x = "foo-bar----baz--biz";
    Console.WriteLine(x.RemoveExtraHypen());
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T04:00:37.690

试`Regex`课

```
using System.Text.RegularExpressions;

string input = "foo-bar----baz--biz";

Regex regex = new Regex("\\-+");

string output = regex.Replace(input, "-"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T04:18:50.527

非常简单的解决方案:)

```
 private string RemoveDuplicates(string s, char toRemove)
    {
        if (s.Length <= 1) return s;
        char s1,s2;
        string result="";
        result = s[0].ToString();
        s1 = s[0];
        for (int i = 0; i < s.Length-1; i++) 
        {

            s2 = s[i + 1];
            if ( s2.Equals(toRemove)&& s1.Equals(s2))
            {
                s1 = s[i]; 
                continue;
            }
            result += s2.ToString();
            s1 = s[i + 1];

        }
        return result;
    } 
```

string s = RemoveDuplicates("f---oo-bar----baz--biz", '-');

# php - 使用 PHP 通过 cURL 发布 XML，无需先生成 XML 文件

> ID：12792621
> 
> 赞同：1
> 
> 时间：2012-10-09T03:58:26.677
> 
> 标签：php, file-upload, curl

我正在尝试通过 POST 将 XML 文件发送到远程服务器上的表单。我正在动态生成 XML 数据，并将其作为字符串存储在名为 $XmlData 的变量中。这是一个以我的开始标签开头的字符串（参见下面的示例）......所以这个字符串中没有“标题”。我可以轻松地将它作为 XML 文件写入临时目录中的服务器……但理想情况下，我只想将其作为文件发布，但没有添加创建文件的步骤（然后我必须删除后记）......下面是我认为应该允许我上传我的 XML 文件的代码，如果我真的先创建它......

```
 $url  = 'http://www.mydomain.com/path/to/form/process.php';

    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_VERBOSE, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible;)");
    curl_setopt($ch, CURLOPT_URL, _VIRUS_SCAN_URL);
    curl_setopt($ch, CURLOPT_POST, true);
    // same as <input type="file" name="xmlfileresource">
    $post = array(
        "xmlfileresource"=>"@/path/to/myfile.xml",
        "action"=>"incomingXml",
        "user"=>"JohnSmith",
    );
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post); 
    $response = curl_exec($ch);
    curl_close($ch); 
```

我的问题是：如何将我的 $XmlData 字符串的内容流式传输/blob/任何内容到此 cURL 执行中，以便远程服务器认为它只是一个正在发布的普通文件？

不是很相关，但万一它有帮助......我的 $XmlData 字符串可能看起来像这样：

```
<clientversion>
    <component>
    <type>module</type>
    <name>resources</name>
    <version>2.7.3</version>
    <date>2012-09-01 02:18:33</date>
    </component>
    <component>
    <type>module</type>
    <name>staff</name>
    <version>3.1</version>
    <date>2011-04-01 07:12:48</date>
    </component>
</clientversion> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:50:10.863

最终不得不编写临时文件，发布，然后删除临时文件。没有我希望的那么优雅，但效果很好。感谢 Brenton Alker 提供的链接……但按照其他帖子中的概述进行操作似乎不切实际。

# csv - 在 VB 脚本中锁定到 CSV 单元格

> ID：12792622
> 
> 赞同：0
> 
> 时间：2012-10-09T03:59:03.617
> 
> 标签：csv, vbscript

我在 VB 脚本中创建了以下 CSV 文件。

```
Set CSVFile = FS.OpenTextFile(Server.MapPath(FilePath),2,True)

CSVFile.WriteLine "Name, English, Math"
CSVFile.WriteLine "Aung Aung, 100, 90"
CSVFile.WriteLine "Ko Ko, 80, 60"

Name       English            Math
Aung Aung  100                90
Ko Ko      80                 60 
```

在这种情况下，我想锁定某个单元格（姓名、英语、数学、Aung Aung、Ko Ko）。其他单元格仍应可编辑。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T04:17:13.270

据我所知，您无法锁定 CSV 文件中的单元格。单元格锁定是仅在电子表格（如 Excel）中可用的元数据选项。如果您使用的是 VBScript，则可以使用[脚本选项来操作 Excel 电子表格](http://www.activexperts.com/activmonitor/windowsmanagement/scripts/msoffice/excel/)。

另一方面，如果您正在讨论继续使用此脚本来读取用户输入并将其写入 CSV 文件，那么您可以简单地拒绝更新某些列位置（如果您希望它们锁定）。

# twitter-bootstrap - 如何将 LESS @import... 转换为 LESS 变量？

> ID：12792625
> 
> 赞同：2
> 
> 时间：2012-10-09T03:59:29.063
> 
> 标签：twitter-bootstrap, less, lessphp

我正在使用来自 [http://leafo.net/lessphp/的lessphp](http://leafo.net/lessphp/)

有些文件根据条件不应该编译

风格**.less**

**我有：**

```
@import "@{bootstrap}";
@import "layout.less";
@import "grid.less";
@import "color.less";
@import "@{fontawesome}";
@import "@{vars}"; 
```

和更少的 var 在 php

```
if($bootstrap){
    $less->setVariables(array(
      "bootstrap"   => "'bootstrap.less'",
      "fontawesome" => "'font-awesome.less'",
      "vars"        => "'variables.less'"
    ));
} 
```

这很好用，只是当 $bootstrap 不存在时

我的 css 文件以

```
@import "";@import "";@import "";@import "";... 
```

在头上，

如何将其转换为实际的 lessphp var

```
@import "bootstrap.less"; 
```

并在我的较少文件中使用

```
@{bootstrap} 
```

反而

```
@import "@{bootstrap}"; 
```

所以当 boostrap 不存在时，我不会在 css 文件中以空 @import 结束。

我试过了

```
 "bootstrap"    => "'@import "bootstrap.less";'" 
```

但它没有返回任何东西

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:18:15.520

我看不出可以使用更少的变量来管理这样的导入。即使 less 编译器在编译期间正确解析了字符串，它也很可能不会触发实际的导入。

如果您将管理导入的逻辑完全留给 PHP，您可以根据配置生成导入语句列表并解析它们，而无需在较少的文件中导入。

# c++ - C/C++ 读取具有多个字符串和字符的二进制文件

> ID：12792627
> 
> 赞同：2
> 
> 时间：2012-10-09T03:59:57.237
> 
> 标签：c++, c, pointers, malloc, fread

我的目标是从二进制文件中读取超过一百个“序列”（非技术术语），每个序列都包含一个 char1（要跟随的字符串的长度）、string1、char2、string2。这里的关键似乎是动态内存分配、指针和循环。我是这样做的：

```
char *ColumnNameLength = (char *) malloc(Repetitions * sizeof(char));
char *DataTypeLength = (char *) malloc(Repetitions * sizeof(char)); 
char **ColumnName = (char **) malloc(Repetitions * sizeof(char));
char **DataType = (char **) malloc(Repetitions * sizeof(char));

for (int ctr = 0; ctr <= Repetitions ; ColumnNameLength[ctr] = DataTypeLength[ctr] = NULL, ctr++)
    ;
for (int ctr = 0; ctr <= Repetitions ; *(ColumnName+ctr) = DataType[ctr] = NULL, ctr++)
    ;

for (int ctr = 0; ctr <= FieldCount; ctr++)
{
    fread((ColumnNameLength + ctr), sizeof(char), 1, pInfile);

    *(ColumnName + ctr) = (char *) malloc(ColumnNameLength[ctr] * sizeof(char));
    fread(ColumnName[ctr], sizeof(char), ColumnNameLength[ctr], pInfile);
    //I should add '\0' at the end of each read string, but no idea how

    fread((DataTypeLength + ctr), sizeof(char), 1, pInfile);

    *(DataType + ctr) = (char *) malloc(DataTypeLength[ctr] * sizeof(char));
    fread(&DataType[ctr], sizeof(char), DataTypeLength[ctr], pInfile);
    //I should add '\0' at the end of each read string, but no idea how

} 
```

不幸的是，这不起作用，我什至不知道要开始调试。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T06:14:11.737

*   确保使用`sizeof(char*)`not分配字符串数组`sizeof(char)`。
*   也许`unsigned char`用于长度，以避免符号混淆。
*   为尾随再分配一个字符`'\0'`。
*   使用 . 添加尾随空字节`ColumnName[ctr][ColumnNameLength[ctr]] = '\0'`。
*   添加一些错误检查以防`malloc`返回`NULL`。
*   添加错误检查以防`fread`返回长度以外的内容。
*   在未来的问题中，更具体地说明实际失败的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:12:30.357

我在您的代码中看到的第一个错误是使用 <= 而不是 < ，您需要`ColumnNameLength`遍历字符，因此从 index 0 到 index `ColumnNameLength -1`。

对我来说很奇怪，您使用指向指针的指针而不是使用 char 数组来保存字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T06:53:15.457

```
char *ColumnNameLength = (char *) malloc(Repetitions * sizeof(char));
char *DataTypeLength = (char *) malloc(Repetitions * sizeof(char)); 
char **ColumnName = (char **) malloc(Repetitions * sizeof(char*));
char **DataType = (char **) malloc(Repetitions * sizeof(char*));

for (int ctr = 0; ctr <= Repetitions ; ColumnNameLength[ctr] = DataTypeLength[ctr] = NULL, ctr++)
    ;
for (int ctr = 0; ctr <= Repetitions ; ColumnName[ctr] = DataType[ctr] = NULL, ctr++)
    ;

for (int ctr = 0; ctr <= FieldCount; ctr++)
{
    fread((ColumnNameLength + ctr), sizeof(char), 1, pInfile);

    ColumnName[ctr] = (char *) malloc((ColumnNameLength[ctr]+1) * sizeof(char));
    fread(ColumnName[ctr], sizeof(char), ColumnNameLength[ctr], pInfile);
    //I should add '\0' at the end of each read string, but no idea how
    ColumnName[ctr][ColumnNameLength[ctr]] = '\0';

    fread((DataTypeLength + ctr), sizeof(char), 1, pInfile);

    DataType[ctr] = (char *) malloc((DataTypeLength[ctr]+1) * sizeof(char));
    fread(DataType[ctr], sizeof(char), DataTypeLength[ctr], pInfile);
    //I should add '\0' at the end of each read string, but no idea how
    DataType[ctr][DataTypeLength[ctr]] = '\0';

} 
```

# asp.net - azure上的Ajax控件工具包AsyncFileUpload文件上传控件

> ID：12792628
> 
> 赞同：0
> 
> 时间：2012-10-09T04:00:10.153
> 
> 标签：asp.net, file-upload, azure

是否有人在 azure 上实现了多文件附加和上传功能 - asp.net Web 应用程序。

我正在寻找带有 azure 的示例实现 AsyncFileUpload 控件（Azure 上的 asp.net C# Web 应用程序）？

```
protected void btnClick_Click(object sender, EventArgs e)
{
     if (AsyncFileUpload1.HasFile)
     {
         AsyncFileUpload1.SaveAs(@"C:\Upload Files\" + AsyncFileUpload1.PostedFile.FileName);
     }
} 
```

如何保存到 azure blob ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-09-18T07:13:12.343

```
protected void AjaxFileUpload1_UploadComplete(object sender, AjaxControlToolkit.AjaxFileUploadEventArgs e)

{

        CloudBlobContainer cont = client.GetContainerReference("Your containerName");          
        var stream = e.GetStreamContents(); // get streams of data from AjaxFileUpload control
        CloudBlockBlob cblob = cont.GetBlockBlobReference("Blob reference name");
        cblob.UploadFromStream(stream); //upload file on Azure Storage

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T04:15:32.837

网上有一些不错的文章。我想让你知道在 Windows azure 上上传大文件并不是那么简单。为此，我使用了 Silverlight。我建议您也使用一些客户端技术，而不是 ASP.NET 上传控件或 Ajax 上传控件。无论如何，您可以使用 ASP.NET 文件上传控件或 Ajax 上传控件上传文件。而且我不认为您可以使用 SaveAs 方法在 Windows Azure 上上传文件。将文件转换为流，然后上传。我正在分享一些很好的链接。研究它们。

[http://www.codeproject.com/Articles/83481/Windows-Azure-Storage](http://www.codeproject.com/Articles/83481/Windows-Azure-Storage) http://blog.smarx.com/posts/uploading-windows-azure-blobs-from-silverlight-part-1-shared-access -签名 [http://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/](http://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T04:38:18.917

是的，我也使用 silverlight 多文件上传器。它提供了上传多个文件的最佳方式，客户端验证文件类型和文件大小等。此外，我们可以轻松地在 Silverlight 中显示进度条（上传）。

看到这个链接。

[http://silverlightfileupld.codeplex.com/](http://silverlightfileupld.codeplex.com/)

# php - 使用 jQuery/AJAX 发布和验证 PHP 数组

> ID：12792630
> 
> 赞同：0
> 
> 时间：2012-10-09T04:00:15.360
> 
> 标签：php, jquery

我有一个表单，我正在尝试使用 jQuery ajax 发布到 php，并且需要首先对其进行验证。

该字段如下所示：

```
<select name="inquirymodule[]" id="inquirymodule[]">
<option value="" selected>Select an Inquiry Module</option>
<option value="1">Module 1</option>
</select> 
```

可以使用 jQuery 添加其他选择器，以允许根据需要进行尽可能多的选择，并将所有值发布在查询模块变量中。

我在其他地方读到过，我认为我可以使用该值发布此变量

```
jQuery('#inquirymodule').serialize() 
```

但是我在选择上运行了验证，以确保在提交之前选择了某些内容。在将其设为数组变量之前，此方法有效：

```
jQuery('#inquirymodule').bind('change', function (event) {
    wizard.validate(true);
}); 
```

但是我知道`[]`在变量名中添加 ' ' 会破坏这里的 javascript。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:30:24.027

Please remove the `[]` from `id`, then try the validation.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T05:18:55.640

您可以使用选择器：

```
 $("select[name='inquirymodule[]']") 
```

要将更改事件绑定到所有查询模块元素：

```
 $("select[name='inquirymodule[]']").on('change',function() 
        {
           //code here

        }); 
```

# java - MongoDB DBObject 和 org.json.JSONObject 之间的桥梁？

> ID：12792632
> 
> 赞同：5
> 
> 时间：2012-10-09T04:00:34.787
> 
> 标签：java, json, mongodb, org.json

我正在使用本机 MongoDB 驱动程序和 API，用于`com.mongodb.DBObject`表示 JSON 对象，但是出于一般目的，我使用了`org.json.JSONOBject`.

我想过替换它并使用 DBObject 作为通用 JSON 库，但感觉不对。

但是为了与两者互操作，使用了低级别的字符串/映射格式/解析接口，我也不喜欢。

是否有一个已知的库可以实现这两个接口以实现更轻松的互操作性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T14:35:26.837

一般来说，在 BSON 和 JSON 之间进行转换是一种轻松的操作，因此您不必编写更多类。[这个](https://stackoverflow.com/questions/3117167/creating-bson-object-from-json-string)答案有帮助吗？

# c# - C# - 如何解析 http 标头多部分

> ID：12792637
> 
> 赞同：3
> 
> 时间：2012-10-09T04:01:21.497
> 
> 标签：c#, .net, wcf, wcf-data-services

我创建了一个 WCF Rest 服务，并且正在读取由 multipart/form 数据发送的内容。但是我得到了内容配置和额外信息。有没有办法像使用 HttpContext 一样解析它。我不想依赖asp...

如果可能的话，不要使用外部库、第三方 dll 等......除非我可以实现其简单且一致的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T11:49:42.770

在解析多部分数据的情况下，您应该使用一些库/类或手动进行。没有内置功能。解析器非常简单。但是您可以重用一些已经编写好的解析器类。

1.  尝试以下项目（MIT 许可证）并从此项目中文件 HttpMultipartParser.cs：

    [https://bitbucket.org/lorenzopolidori/http-form-parser/src](https://bitbucket.org/lorenzopolidori/http-form-parser/src)

2.  [http://multipartparser.codeplex.com/](http://multipartparser.codeplex.com/)

    [http://multipartparser.codeplex.com/SourceControl/changeset/view/69709#458003](http://multipartparser.codeplex.com/SourceControl/changeset/view/69709#458003)

# jsp - 如何在单个jsp程序中调用多个servlet表单动作？

> ID：12792639
> 
> 赞同：0
> 
> 时间：2012-10-09T04:01:26.147
> 
> 标签：jsp, servlets

现在我只能在一个 JSP 程序中调用一个 Servlet 表单动作。但是我想在一个 JSP 程序中调用多个 Servlet 表单动作。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T06:12:52.640

通常a`HTML FORM`只有一个动作，你应该只练习那种方式。

您可以有多个`HTML FORM`内部`JSP`，您可以为它们设置不同的操作。

如果这不是您想要的，请提供更多详细信息。

# php - 邮件黑猩猩订阅联系表

> ID：12792645
> 
> 赞同：2
> 
> 时间：2012-10-09T04:02:21.560
> 
> 标签：php, forms, checkbox, newsletter, mailchimp

我正在尝试“整合”从我的联系表格中订阅 mailchimp 通讯/列表的能力。因此，当用户单击复选框并提交表单时，它会订阅它们。

我试过这个教程：[http ://www.joshuawinn.com/subscribe-to-mailchimp-newsletter-option-on-contact-form/](http://www.joshuawinn.com/subscribe-to-mailchimp-newsletter-option-on-contact-form/)

这是我的PHP代码：

```
<?php
if( isset($_POST) ){

//cut//

// SUBSCRIBE TO MAILING LIST OPTION – ADD TO MAILCHIMP USING API
if ( $_POST['emailUpdates'] == ‘yes’ )
{
// Include Mailchimp API class
require_once(‘http://22twenty.com/wordpress/wp-content/themes/~~~~HIDDEN/MCAPI.class.php’);

// Your API Key: http://admin.mailchimp.com/account/api/
$api = new MCAPI(‘KEYHIDDEN’);

// Your List Unique ID: http://admin.mailchimp.com/lists/ (Click “settings”)
$list_id = “IDHIDDEN”;

// Variables in your form that match up to variables on your subscriber
// list. You might have only a single ‘name’ field, no fields at all, or more
// fields that you want to sync up.
$merge_vars = array(
‘FNAME’ => $_POST['name'],
);

// SUBSCRIBE TO LIST
if ( $api->listSubscribe($list_id, $_POST['email'], $merge_vars) === true ){
$mailchimp_result = ‘Success! Check your email to confirm sign up.’;
} else {
$mailchimp_result = ‘Error: ‘ . $api->errorMessage;
}
} 
```

希望有人可以帮助杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:10:55.617

尝试这个：

```
<link href="http://cdn-images.mailchimp.com/embedcode/slim-081711.css" rel="stylesheet" type="text/css">
<style type="text/css">
    #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }
    /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
       We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="your-action-url" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank">
    <label for="mce-EMAIL">Subscribe to our mailing list</label>
    <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
</form>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T03:55:33.517

解决它！

方法如下，`

```
//form validation vars
$formok = true;
$errors = array();

//sumbission data
$ipaddress = $_SERVER['REMOTE_ADDR'];
$date = date('d/m/Y');
$time = date('H:i:s');

//form data
$name = $_POST['name']; 
$email = $_POST['email'];
$telephone = $_POST['telephone'];
$enquiry = $_POST['enquiry'];
$message = $_POST['message'];
$apikey = 'key';
$listID = 'id';

    //
    if (!empty($_POST['newsletter'])) {
        $url = sprintf('http://api.mailchimp.com/1.2/?method=listSubscribe&apikey=%s&id=%s&email_address=%s&merge_vars[OPTINIP]=%s&merge_vars[NAME]=name&output=json', $apikey, $listID, $email, $_SERVER['REMOTE_ADDR']);
        $ch = curl_init($url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        $data = curl_exec($ch);
        curl_close($ch);
        $arr = json_decode($data, true);

}
//validate form data

//validate name is not empty
if(empty($name)){
    $formok = false;
    $errors[] = "You have not entered a name";
}

//validate email address is not empty
if(empty($email)){
    $formok = false;
    $errors[] = "You have not entered an email address";
//validate email address is valid
}elseif(!filter_var($email, FILTER_VALIDATE_EMAIL)){
    $formok = false;
    $errors[] = "You have not entered a valid email address";
}

//validate message is not empty
if(empty($message)){
    $formok = false;
    $errors[] = "You have not entered a message";
}
//validate message is greater than 20 charcters
elseif(strlen($message) < 20){
    $formok = false;
    $errors[] = "Your message must be greater than 20 characters";
}

//send email if all is ok
if($formok){
    $headers = "From: email.ca" . "\r\n";
    $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

    $emailbody = "<p>You have recieved a new message from the enquiries form on your website.</p>
                  <p><strong>Name: </strong> {$name} </p>
                  <p><strong>Email Address: </strong> {$email} </p>
                  <p><strong>Telephone: </strong> {$telephone} </p>
                  <p><strong>Message: </strong> {$message} </p>
                  <p>This message was sent from the IP Address: {$ipaddress} on {$date} at {$time}</p>";

    mail("email@gmail.com","New Enquiry",$emailbody,$headers);

}

//what we need to return back to our form
$returndata = array(
    'posted_form_data' => array(
        'name' => $name,
        'email' => $email,
        'telephone' => $telephone,
        'message' => $message
    ),
    'form_ok' => $formok,
    'errors' => $errors
);

//if this is not an ajax request
if(empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) !== 'xmlhttprequest'){
    //set session variables
    session_start();
    $_SESSION['cf_returndata'] = $returndata;

    //redirect back to form
    header('location: ' . $_SERVER['HTTP_REFERER']);
} 
```

}`

我改变了一点，但现在效果很好！

# android - 来自json的android永无止境的列表

> ID：12792648
> 
> 赞同：0
> 
> 时间：2012-10-09T04:02:30.467
> 
> 标签：android, android-layout, android-listview

我想制作一个列表，其中包含来自服务器的数据。但我只想显示前 10 个列表，如果有一些数据，则加载更多。这是我的代码：

> mylist.java

```
 public class ResultRestoActivity extends ListActivity {

    Context ctx;

    List<Map<String,String>> listData =  new ArrayList<Map<String,String>>();
    List <Map<String,String>> list = new ArrayList<Map<String,String>>();

    ListAdapter adap;

    String bank,group,city,merchant,address,telpon,handphone,bb;

    TextView tv_GName,tv_city,tv_merchant,tv_address,tv_telpon,tv_handphone,tv_bb;

    int itemsPerPage = 10;
    boolean loadingMore = false;

    @Override
    public void onCreate (Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        group = getIntent().getStringExtra("GROUP");
        bank = getIntent().getStringExtra("BANK");
        city = getIntent().getStringExtra("CITY");
        merchant = getIntent().getStringExtra("MERCHANT");
        address = getIntent().getStringExtra("ADDRESS");
        telpon = getIntent().getStringExtra("TELPON");
        handphone = getIntent().getStringExtra("HANDPHONE");
        bb = getIntent().getStringExtra("BB");

        ctx = this;
        setContentView(R.layout.activity_restoresult);

        tv_GName = (TextView)findViewById(R.id.tvRestoResult);
        tv_GName.setText(""+group+"");

        list = (ArrayList<Map<String,String>>) getIntent().getSerializableExtra("LIST");        

        for(int i=0;i<list.size();i++){
            final Map<String, String> map = list.get(i);
            for (Map.Entry<String, String> entry : map.entrySet()) {
//              String key = entry.getKey();
                final String value = entry.getValue();
                if(value.equalsIgnoreCase(bank)){
                    listData.add(list.get(i));
                }
            }
        }

        ListView lv = getListView();
        adap = new ListAdapter(listData);
        lv.setAdapter(adap);
        lv.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> arg0, View v, int position,
                    long arg3) {
                merchant = ((TextView) v.findViewById(R.id.tv_merchantname)).getText()
                            .toString();

                Intent i = new Intent(ResultRestoActivity.this, DetailRestoActivity.class);
                    i.putExtra("GROUP", group);
                    i.putExtra("CITY", city);
                    i.putExtra("MERCHANT", merchant);
                    i.putExtra("ADDRESS", address);
                    i.putExtra("TELPON", telpon);
                    i.putExtra("HANDPHONE", handphone);
                    i.putExtra("BB", bb);
                startActivity(i);
            }
        });

        View footerView = ((LayoutInflater)ctx.getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(R.layout.listfooter, null, false);
        this.getListView().addFooterView(footerView);
        this.setListAdapter(adap);
        this.getListView().setOnScrollListener(new OnScrollListener() {

            @Override
            public void onScrollStateChanged(AbsListView view, int scrollState) {
                // TODO Auto-generated method stub
            }

            @Override
            public void onScroll(AbsListView view, int firstVisibleItem,
                    int visibleItemCount, int totalItemCount) {

                int lastInScreen = firstVisibleItem + visibleItemCount;

                if ((lastInScreen == totalItemCount) && !(loadingMore)) {
                    Thread thread = new Thread(null, loadMoreListItems);
                        thread.start();
                }
            }
        });
        Thread thread = new Thread(null, loadMoreListItems);
            thread.start();
    }

    private Runnable loadMoreListItems = new Runnable() {
        @Override
        public void run() {
            loadingMore = true;

            listData = new ArrayList<Map<String,String>>();

            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
                Log.d("Gagal Load :", e.toString());
            }
            for (int i=0; i<itemsPerPage; i++) {
                final Map<String, String> map = list.get(i);
                for (Map.Entry<String, String> entry : map.entrySet()) {
//                  String key = entry.getKey();
                    final String value = entry.getValue();
                    if(value.equalsIgnoreCase(bank)){
                        listData.add(list.get(i));
                    }
                }
            }
            runOnUiThread(returnRes);
        }
    };

    private Runnable returnRes = new Runnable() {
        @Override
        public void run() {
            if (listData != null && listData.size() > 0) {
//              for (int i=0; i<list.size(); i++) {
//                  final Map<String, String> map = list.get(i);
//                  for (Map.Entry<String, String> entry : map.entrySet()) {
////                        String key = entry.getKey();
//                      final String value = entry.getValue();
//                      if(value.equalsIgnoreCase(bank)){
//                          listData.add(list.get(i));
//                      }
//                  }
//              }
                for(int i=0; i<listData.size(); i++) {
                    final Map<String, String> map = list.get(i);
                for (Map.Entry<String, String> entry : map.entrySet()) {
//                  String key = entry.getKey();
                    final String value = entry.getValue();
                    if(value.equalsIgnoreCase(bank)){
                        listData.add(list.get(i));
                    }}
                }
                setTitle(String.valueOf(adap.getCount())+ "items");

                adap.notifyDataSetChanged();

                loadingMore = false;
            }
        }
    };
} 
```

我已经尝试过，但仍然没有为我工作。请纠正我的错误。谢谢提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:32:21.707

改变，

```
for(int i=0;i<list.size();i++) 
```

有了这个，

```
for(int i=0;i<list.size()&& i<=10;i++){
//your code for data loading
list.size()-10;
} 
```

# terminal - 如何在 Vim 中的行号和文本之间创建边框

> ID：12792649
> 
> 赞同：6
> 
> 时间：2012-10-09T04:03:01.473
> 
> 标签：terminal, vim

我想在行号右侧和文本左侧有一条细边框线。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T04:39:18.983

您可以使用不同的颜色来突出显示`LineNr`。例如：

```
:hi LineNr   cterm=bold ctermbg=gray ctermfg=black gui=bold guibg=gray guifg=white 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T04:05:04.570

我不认为这是可能的。

但是，您可以使排水沟变宽。

```
:set numberwidth=3 
```

# ruby-on-rails - 我需要帮助从 ruby /rails 中的 xml 中提取值

> ID：12792660
> 
> 赞同：0
> 
> 时间：2012-10-09T04:05:14.973
> 
> 标签：ruby-on-rails, ruby, xml, nokogiri

我正在从事个人项目并使用 Rails 来学习框架。该项目是基于音乐的，我正在使用 ChartLyrics.com 的 API 来检索歌词。API 返回 XML，我无法从 XML 中提取实际的歌词元素。

我已经安装了 Nokogiri gem 来帮助解析 XML。以下是我用来检索数据的内容。从 rails 控制台：

```
doc = Nokogiri::XML(open(http://api.chartlyrics.com/apiv1.asmx/SearchLyricDirect?artist=michael%20jackson&song=bad))
puts doc

<?xml version="1.0" encoding="utf-8"?>
<GetLyricResult xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://api.chartlyrics.com/">
  <TrackId>0</TrackId>
  <LyricChecksum>a4a56a99ee00cd8e67872a7764d6f9c6</LyricChecksum>
  <LyricId>1710</LyricId>
  <LyricSong>Bad</LyricSong>
  <LyricArtist>Michael Jackson</LyricArtist>
  <LyricUrl>http://www.chartlyrics.com/28h-8gWvNk-Rbj1X-R7PXg/Bad.aspx</LyricUrl>
  <LyricCovertArtUrl>http://ec1.images-amazon.com/images/P/B000CNET66.02.MZZZZZZZ.jpg</LyricCovertArtUrl>
  <LyricRank>9</LyricRank>
  <LyricCorrectUrl>http://www.chartlyrics.com/app/correct.aspx?lid=MQA3ADEAMAA=</LyricCorrectUrl>
  <Lyric>
     Because I'm bad (bad-bad), I'm bad, come on (really, really bad)
     You know I'm bad (bad-bad), I'm bad, you know it (really, really bad)
     You know I'm bad (bad-bad), I'm bad, you know it (really, really bad) you know
     And the whole world has to answer right now
     Just to tell you once again
  </Lyric>
</GetLyricResult> 
```

我缩短了歌词以节省空间。如何提取“歌词”元素？我已经尝试了以下所有方法：

```
> lyrics = doc.xpath('//Lyric')
=> []

> lyrics = doc.xpath('/Lyric')
=> []

> lyrics = doc.xpath('//GetLyricResult/Lyric')
=> []

> lyrics = doc.xpath('//GetLyricResult//Lyric')
=> []

> lyrics = doc.xpath('/GetLyricResult/Lyric')
=> [] 
```

“歌词”每次都是零。谁能告诉我我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T04:26:53.757

默认情况下，nokogiri 会查找不在任何命名空间中的元素，但此文档是有命名空间的：

```
doc.namespaces
#=> {"xmlns:xsi"=>"http://www.w3.org/2001/XMLSchema-instance", "xmlns:xsd"=>"http://www.w3.org/2001/XMLSchema", "xmlns"=>"http://api.chartlyrics.com/"} 
```

因此，您必须将`xmlns`命名空间附加到您正在搜索的标签（您可以省略实际的 URL，因为[nokogiri 将为您填写默认命名空间的 URL](http://tenderlovemaking.com/2009/04/23/namespaces-in-xml.html)）：

```
doc.xpath('//xmlns:Lyric') 
```

或者，您可以使用 css 进行搜索：

```
doc.css('Lyric') 
```

另请参阅：[为什么 Nokogiri xpath 不像 xmlns 声明](https://stackoverflow.com/questions/1737572/why-doesnt-nokogiri-xpath-like-xmlns-declarations)

# ios - 如何检测 UICollectionView 中单元格上的双击

> ID：12792661
> 
> 赞同：30
> 
> 时间：2012-10-09T04:05:31.993
> 
> 标签：ios, objective-c, uicollectionview, uikit, uitapgesturerecognizer

我想响应在 UICollectionView 中双击单元格，并有一个双击操作取消单元格选择。

这是我尝试过的：

```
UITapGestureRecognizer *tapRecogniser = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTapGesture:)];
tapRecogniser.numberOfTapsRequired = 2;

 for (UITapGestureRecognizer *recogniser in [self.collectionView gestureRecognizers]) {
    [recogniser requireGestureRecognizerToFail:tapRecogniser];
}

[self.collectionView addGestureRecognizer:tapRecogniser]; 
```

也就是说，如果我的双击手势识别器成功，我试图让默认手势识别器失败。

这似乎不起作用，因为我的集合视图委托`collectionView:didSelectItemAtIndexPath:`在双击后仍然被调用

* * *

### 关于 Apple 的 UICollectionViewController 文档的注意事项

[Apple 的文档](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/CollectionViewPGforIOS/IncorporatingGestureSupport/IncorporatingGestureSupport.html#//apple_ref/doc/uid/TP40012334-CH4-SW4)在这一点上具有误导性，声称默认手势识别器是 UITapGestureRecognizer 子类的一个实例，因此可以很容易地用`[recogniser isKindOfClass:[UITapGestureRecognizer class]]`. 不幸的是，这是一个错误。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-07T08:44:17.867

我不明白你为什么需要requireToFail。我在 UICollectionView 中使用双击，它不会干扰我的单击（用于选择）。

我使用以下内容：

```
UITapGestureRecognizer *doubleTapFolderGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(processDoubleTap:)];
[doubleTapFolderGesture setNumberOfTapsRequired:2];
[doubleTapFolderGesture setNumberOfTouchesRequired:1];
[self.view addGestureRecognizer:doubleTapFolderGesture]; 
```

然后，这个：

```
- (void) processDoubleTap:(UITapGestureRecognizer *)sender
{
    if (sender.state == UIGestureRecognizerStateEnded)
    {
        CGPoint point = [sender locationInView:collectionView];
        NSIndexPath *indexPath = [collectionView indexPathForItemAtPoint:point];
        if (indexPath)
        {
            NSLog(@"Image was double tapped");
        }
        else 
        {
            DoSomeOtherStuffHereThatIsntRelated;
        }
    }
} 
```

似乎工作正常 - 双击被识别，我可以按照我的意愿处理它（在这种情况下，我正在扩展文件夹的内容）。但是单击会导致选择被点击的卖出，我没有为此编写任何手势识别。

**重要编辑：**

**我正在重新审视这个问题，因为我已经看到我的原始答案在某些情况下可能是错误的，并且有一个明显的修复方法似乎有效。**

需要添加以下行：

```
doubleTapFolderGesture.delaysTouchesBegan = YES; 
```

这消除了对单元选择的单击的干扰。这提供了更强大的设置。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-03-19T20:38:20.293

这里有很多很好的解决方案，但不幸的是它们对我来说并不可靠（例如，我无法让双击持续触发，可能是因为我还实现了 didSelectItemAtIndexPath）。

对我有用的是将（双击）手势识别器添加到集合视图而不是单元格中。在其动作选择器中，我将确定双击哪个单元格并执行我需要执行的任何操作。希望这可以帮助某人：

```
- (void)viewDidLoad
{
    UITapGestureRecognizer *doubleTapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(didDoubleTapCollectionView:)];
    doubleTapGesture.numberOfTapsRequired = 2;
    [self.collectionView addGestureRecognizer:doubleTapGesture];
}

- (void)didDoubleTapCollectionView:(UITapGestureRecognizer *)gesture {

    CGPoint pointInCollectionView = [gesture locationInView:self.collectionView];
    NSIndexPath *selectedIndexPath = [self.collectionView indexPathForItemAtPoint:pointInCollectionView];
    UICollectionViewCell *selectedCell = [self.collectionView cellForItemAtIndexPath:selectedIndexPath];

    // do something
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-03T16:35:29.543

我的解决方案是不实现 collectionView:didSelectItemAtIndexPath 而是实现两个手势识别器。

```
 self.doubleTapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(processDoubleTap:)];
    [_doubleTapGesture setNumberOfTapsRequired:2];
    [_doubleTapGesture setNumberOfTouchesRequired:1];   

    [self.view addGestureRecognizer:_doubleTapGesture];

    self.singleTapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(processSingleTap:)];
    [_singleTapGesture setNumberOfTapsRequired:1];
    [_singleTapGesture setNumberOfTouchesRequired:1];
    [_singleTapGesture requireGestureRecognizerToFail:_doubleTapGesture];

    [self.view addGestureRecognizer:_singleTapGesture]; 
```

这样我就可以处理单击和双击。我能看到的唯一问题是在 doubleTaps 上选择了单元格，但如果这让您感到困扰，您可以在两个选择器中处理它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-10T05:44:18.823

默认手势识别器上的`requireGestureRecognizerToFail:`调用确实有效（也就是说，如果识别到双击，它们的状态将变为 UIGestureRecognizerStateFailed）。

但似乎 UICollectionView 的`collectionView:didSelectItemAtIndexPath:`委托回调没有考虑到这一点，即。当默认手势识别器失败时仍会调用它。

因此，答案/解决方法是确保委托`collectionView:shouldSelectItemAtIndexPath:`和`collectionView:shouldDeselectItemAtIndexPath:`实现检查默认手势识别器（其中一个？）的状态，因此：

```
- (BOOL)collectionView:(UICollectionView *)collectionView shouldSelectItemAtIndexPath:(NSIndexPath *)indexPath {

    UITapGestureRecognizer *defaultGestureRecogniser = [[self.collectionView gestureRecognizers] objectAtIndex:0];
    return defaultGestureRecogniser.state != UIGestureRecognizerStateFailed;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-30T15:49:51.563

对于寻求快速答案的读者，这是@RegularExpression 和@Edwin Iskandar 答案的混合。

在您的控制器中`collectionView`添加以下行：

```
 private var doubleTapGesture: UITapGestureRecognizer!
  func setUpDoubleTap() {
    doubleTapGesture = UITapGestureRecognizer(target: self, action: #selector(didDoubleTapCollectionView))
    doubleTapGesture.numberOfTapsRequired = 2
    collectionView.addGestureRecognizer(doubleTapGesture)

    // This line delay the single touch message to the collection view.
    // Simple touch will be sent only when the double tap recogniser is sure
    // this is a simple tap.
    // You can remove it if you don't mind having both a simple tap and double
    // tap event.
    doubleTapGesture.delaysTouchesBegan = true  
  }

  @objc func didDoubleTapCollectionView() {
    let pointInCollectionView = doubleTapGesture.location(in: collectionView)
    if let selectedIndexPath = collectionView.indexPathForItem(at: pointInCollectionView) {
      let selectedCell = collectionView.cellForItem(at: selectedIndexPath)

      // Print double tapped cell's path
      print(selectedCell)
    }
  } 
```

# matlab - 加载存储在文件中的纪元时间并在matlab上绘图

> ID：12792663
> 
> 赞同：0
> 
> 时间：2012-10-09T04:05:49.110
> 
> 标签：matlab, plot, epoch

我有一个文件，其中包含

```
1349542114842,2
1349542114872,4
1349542116037,1
1349542126680,5
1349542190738,3
1349542190775,4 
```

其中第一列是纪元时间。

我正在使用

```
load('path to file') 
```

一旦我加载它，我可以看到第一列正在更改为显示

```
1.349542114842000e+12 
```

这对我来说会很困惑，因为当我绘图时，我的轴值是非常倾斜的纪元时间。有任何想法吗 ？？（我能想到的技巧是在绘图时减去 e+3 但这并不能完全解决我的问题）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T06:38:09.897

如果第一列确实包含非负整数值，则可以将其转换为[`uint64`](http://www.mathworks.de/de/help/matlab/ref/uint64.html)以获得完整精度：

```
format long % just for display purpose: 

% with double precision
a = [
    1349542114842,2
    1349542114872,4
    1349542116037,1
    1349542126680,5
    1349542190738,3
    1349542190775,4
    ]; 
```

这导致

```
>> a

a =

  1.0e+012 *

   1.349542114842000   0.000000000002000
   1.349542114872000   0.000000000004000
   1.349542116037000   0.000000000001000
   1.349542126680000   0.000000000005000
   1.349542190738000   0.000000000003000
   1.349542190775000   0.000000000004000 
```

现在转换为 uint64：

```
% now with unsigned integer 64 precision
a = uint64([
    1349542114842,2
    1349542114872,4
    1349542116037,1
    1349542126680,5
    1349542190738,3
    1349542190775,4
    ]); 
```

这导致：

```
>> a

a =

        1349542114842                    2
        1349542114872                    4
        1349542116037                    1
        1349542126680                    5
        1349542190738                    3
        1349542190775                    4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T07:24:07.183

您的时代看起来像[unix 时间戳](http://en.wikipedia.org/wiki/Unix_time)，以毫秒为单位。您可以将这些转换为`datenums`：

```
a = [
1349542114842,2
1349542114872,4
1349542116037,1
1349542126680,5
1349542190738,3
1349542190775,4
];

b = a(:,1)/1000/86400 + datenum(1970,1,1); 
```

然后你用它来制作情节。您可以像这样正确显示它们：

```
datetick('y', 'mmm dd, HH:MM:SS') 
```

结果是：

![不错的标签](../Images/017975f1bb07bb4f0735efa49f5d9b8a.png)

或者，如果您希望它们在`x`-axis 上，您可能需要旋转标签。你最好不要[在文件交换中使用这个实用程序](http://www.mathworks.com/matlabcentral/fileexchange/27812-rotate-x-axis-tick-labels)，因为手工操作是一件很**痛苦**的事情（而且是 Matlab 应该开始原生支持恕我直言）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T06:39:07.723

如果问题是绘图的 yaxis 没有显示完整的数字（例如，`1.35e12`而不是`1349542114840`等`1349542114870`），您可以使用此工具更改格式：http: [//www.mathworks.com/matlabcentral/fileexchange/36254-ticklabelformat](http://www.mathworks.com/matlabcentral/fileexchange/36254-ticklabelformat)

例子：

```
plot(1:10, (1:10) + 1e12);
ticklabelformat(gca,'y','%d') 
```

结果：

![在此处输入图像描述](../Images/199622170c0d12d61993934cf477a2f2.png)

# jquery - 在每张幻灯片上更改字体颜色的幻灯片+回调字体以在滚动时设置颜色

> ID：12792666
> 
> 赞同：0
> 
> 时间：2012-10-09T04:06:00.730
> 
> 标签：jquery, callback, scroll, slideshow, opacity

我正在尝试在标题元素中完成几件事。首先，我想要一个 jquery 幻灯片设置为相对。其次，我将把我的 png 标志和导航链接固定在幻灯片前面。因为有些幻灯片会很暗，有些会很亮，所以我需要更改徽标 + 导航链接以在图像循环时统一设置颜色，以便始终可以阅读它们。

到目前为止，似乎我可以通过循环遍历 div 来完成这两个任务，但是由于图像是相对的，并且 logo+nav 将是固定的，我需要固定 div 的背景的不透明度来改变它的不透明度0 - 100 向下滚动，幻灯片向上滚动并移出视图。

而且由于 logo+nav 的颜色有时会是一种颜色，有时会是另一种颜色，具体取决于显示的幻灯片，我需要添加一个额外的回调，告诉 logo+nav 在滚动时返回黑色，无论滚动时它们是什么开始了。

我在[这里有一个半工作的演示](http://jsfiddle.net/MNFTT/83/)。

此演示显示滚动时的幻灯片 + div 不透明度。由于他们在小提琴中玩得不好，他们在我的实际网站上一起工作得很好。

随意撕开这个。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T06:46:11.733

这就是你想要的？ [http://jsfiddle.net/MNFTT/89/](http://jsfiddle.net/MNFTT/89/)

CSS：

```
#slideshow{

    position:relative;
    top:0;
    left:0;

} 

#slideshow ul, #slideshow li{

    margin:0;
    padding:0;
    list-style-type:none;

} 

.slideshow_item{

    position:absolute;
    left:0;
    top:0;
    list-style-type:none;

} 

.slideshow_item img{

    margin:0;
    padding:0;
    vertical-align:bottom;

} 

div.fademe {
    width: 100%; 
    position: fixed; 
    display: block; 
    height: 150px; 
    background: #ffffff; 
    z-index: 8; 
}

#header-wrapper {
    padding: 0;
    margin: 0 auto;
}

#header {
    position: fixed; 
    width: 100%; 
    height: 100px; 
    z-index: 9; 
    margin: 0 auto;
}

#header .inner {
    margin: 0 auto; 
    padding: 0 25px 0 25px; 
    width: 950px; 
    height: 100px; 
    z-index: 10;
}

#header-logo {
    background:url(http://img585.imageshack.us/img585/4227/xlogo.png);
    width:71px;
    height:51px;
    margin: 0 auto;
    margin-top: 31px;
    background-repeat: no-repeat;
}

#navbar {
    text-align: justify;
    margin-top: 25px;
}

#navbar a{
    font-family: "ss-bol", Helvetica, Arial, sans-serif;
    font-size: 14px;
    color: #000000;
}

#navbar a:hover{
    font-family: "ss-bol", Helvetica, Arial, sans-serif;
    font-size: 14px;
    color: #595959;
}

#navbar span {
    width: 100%;
    display: inline-block;
}

#page {
    width: 100px;
    height: 100%;
}​ 
```

HTML

```
<div id="header-wrapper">
<div class="fademe"></div>
            <div id="header">
        <div class="inner">
            <a href="/" title"logo"><div id="header-logo"></div></a>
            <div id="navbar">
              <a href="#">NEW</a>
              <a href="/shop">SHOP</a>
              <a href="/wine">ART</a>
              <a href="/blog">BLOG</a>
              <a href="#">MUSIC</a>
              <a href="#">CONTACT</a>
            <a href="#">ABOUT</a>
            <span></span></div>
        </div>
        </div>
</div>

<div id="slideshow"> 

    <ul>

        <li class="slideshow_item">

            <a href="#"><img src="http://img829.imageshack.us/img829/6969/newslide2.jpg" alt="persiannewyear11-hp" /></a> 

        </li>

        <li class="slideshow_item">

            <a href="#"><img src="http://img696.imageshack.us/img696/3193/newslide1.jpg" alt="holi11-hp" /></a> 

        </li>

    </ul> 

</div>
<div id="page">
TEXT FOR SCROLLING
.....
</div> 
```

JS：

```
/* slideshow */
$(function(){

var slide_pos = 0;
var slide_len = 0;

    slide_len = $(".slideshow_item").size() - 1;

    $(".slideshow_item:gt(0)").hide();

    slide_int = setInterval(function() {

        slide_cur = $(".slideshow_item:eq(" + slide_pos + ")");
        slide_cur.fadeOut(2000);

        slide_pos = (slide_pos == slide_len ? 0 : (slide_pos + 1));

        slide_cur = $(".slideshow_item:eq(" + slide_pos + ")");
        slide_cur.fadeIn(2000);

    }, 5000);

    var divs = $('.fademe');
    var navbar_a=$('#navbar a');
    var navbar=$('#navbar');
    divs.css('opacity', 0);
    $(window).scroll(function() {
    var imgH=$('.slideshow_item').height();
        var percent = $(document).scrollTop()/imgH;
       divs.css('opacity', percent);
        var bg=Math.round(255-(percent*255));
        bg=bg>0?bg:0;
        var fg=255-(bg/2+128);
       console.log(percent,imgH,fg);
       divs.css('background-color','rgb('+bg+','+bg+','+bg+')');
       navbar_a.css('color','rgb('+fg+','+fg+','+fg+')');
    });
});​ 
```

# android - 为什么单击 Activity 时我的 ProgressDialog 退出？

> ID：12792667
> 
> 赞同：7
> 
> 时间：2012-10-09T04:06:01.287
> 
> 标签：android

我正在使用以下代码显示 ProgressDialog：

```
void showProccess() {    
    p = new ProgressDialog(this);
    p.setTitle("PleaseWait");                   
    p.setMessage("data loading");
    p.show();
} 
```

在 Android 2.3.1`ProgressDialog`中显示 a 时，我无法单击`Activity`. 但是在 Android 4.0.3 中，我点击`Activity`它`ProgressDialog`就会退出。我希望`ProgressDialog`不退出，与 Android 2.3.1 相同。你能帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T04:17:49.397

您应该设置以下内容：

```
 p.setCancelable(false); 
```

这样，无法取消进度对话框。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T04:15:15.880

试试下面的代码和你现有的代码，

```
p.setCancelable(false); 
```

# actionscript-3 - 使用 messagepack 和 as3 序列化对象

> ID：12792672
> 
> 赞同：0
> 
> 时间：2012-10-09T04:06:49.263
> 
> 标签：actionscript-3, serialization, msgpack, messagepack

这是一个非常简单的问题，但找不到任何文档。

我有一个简单的课程：

```
public class User
{
    public var name:String;
    public var age:int;
} 
```

我想用这个序列化它：

```
var user:User = new User();
user.age = 15;
user.name = "mike";
//now serialize
var bytes:ByteArray = MessagePack.encoder.write(vo); 
```

但我收到一个错误：

```
Error: MessagePack handler for type base not found 
```

如何让 MessagePack 知道 User 类是什么，如何序列化它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:41:14.963

MessagePack 看起来不像大多数序列化程序那样能够序列化 Class。

我建议您在 User 类中添加一个`toObject`方法：

```
public function toObject():Object
{
    return {age:this.age, name:this.name}:
} 
```

然后你可以序列化你的用户：

```
var bytes:ByteArray = MessagePack.encoder.write(user.toObject()); 
```

您还可以添加一个静态`fromObject`方法，该方法接受一个对象并返回一个使用该对象初始化的新用户。

```
static public function fromObject(o:Object):User
{
    var u = new User();
    u.age = o.age;
    u.name = o.name;

    return u;
} 
```

# javascript - 复选框点击事件执行顺序并渲染

> ID：12792676
> 
> 赞同：1
> 
> 时间：2012-10-09T04:07:12.913
> 
> 标签：javascript, events, dom

我在下面的代码中遇到了一个有趣的问题：

```
<html>
<head>
    <meta charset="UTF-8"/>
    <script src="jquery-1.3.2.min.cache.js">
    </script>
    <script>
        $(function(){
        var c = function(){
                  console.log('checked:' + $('#test').attr('checked'));
                };
        $('#test').click(c);
    });
    </script>
</head>

<body>
    <input id="test" type="checkbox" value="1">test
  </input>
</body>
</html> 
```

问题是当我手动单击复选框时，它将打印

```
checked:true
checked:false
checked:true
checked:false 
.... 
```

但是如果我使用 js 代码触发点击事件，例如：

```
$('#test').click() 
```

它会像这样打印

```
checked:false
checked:true 
```

听起来像手动单击，复选框本身将呈现为选中/未选中，然后触发单击事件。

但是，对于 的 JS 代码`.click()`，情况并非如此。

我的猜测对吗？有没有我可以参考的文档寻求帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T05:48:30.753

> 问题是当我手动单击复选框时，它将打印
> 
> 已检查：真已检查：假

我得到：

```
> checked:true
> checked:undefined 
```

该`attr`方法非常糟糕（它曾经混淆属性和属性，可能现在仍然如此），要么直接读取属性，要么使用`prop`. 编写起来效率更高：

```
 console.log('checked:' + this.checked); 
```

无论如何，这是我以前的评论：

可能是因为 jQuery 使用它自己的事件注册和触发框架来绕过 DOM 方法。手动单击按钮时，您将获得 DOM 事件序列。使用 jQuery 时，您将获得 jQuery 的事件序列。

# spring - 春季指南针休眠集成

> ID：12792678
> 
> 赞同：0
> 
> 时间：2012-10-09T04:07:33.593
> 
> 标签：spring, hibernate, compass-geolocation

任何人都可以举例说明 Web 应用程序的 Spring compass hibernate 集成吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:26:06.393

[恕我直言，这](http://sanjsuya.wordpress.com/2012/02/01/compass-spring-hibernate-integration/)很好解释。

# c# - 从 Timer 内的 ListBox 中删除

> ID：12792683
> 
> 赞同：2
> 
> 时间：2012-10-09T04:08:02.430
> 
> 标签：c#, multithreading

```
ObservableCollection<String> listBoxItems = new ObservableCollection<String>();
scheduledRecordingListBox.ItemsSource = listBoxItems;

public void timerElapsed(object sender, ElapsedEventArgs e)
{
    listBoxItems.Remove(itemToBeRemoved);
} 
```

只是我实际尝试做的一小部分。我相信这个错误是因为计时器运行在与我试图从中删除的 ObservableCollection 的 GUI 主线程不同的线程上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T05:59:27.507

如果您使用的是 WinForms，那么只需使用[System.Windows.Timer](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)类。它的[Tick](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.tick.aspx)事件在 UI 线程上自动执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T04:33:09.357

这应该可以解决问题：

```
public void timerElapsed(object sender, ElapsedEventArgs e)
{
    this.Invoke(new Action(() => listBoxItems.Remove(itemToBeRemoved)));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T04:17:21.410

尝试使用[Invoke](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.invoke.aspx)它在拥有控件底层窗口句柄的线程上执行委托。

您还可以查看此[页面中的部分计时器](http://www.albahari.com/threading/part3.aspx)

# c - 检查'puts'返回值，然后呢？

> ID：12792689
> 
> 赞同：3
> 
> 时间：2012-10-09T04:08:57.860
> 
> 标签：c, error-handling, return-value

我开始编写代码检查函数的返回值，但我不确定在捕获一些错误后如何进行。

例如，在 fgets 中：

```
while( fgets( rta, 3, stdin ) == NULL ) {
        printf( "Ocurrio un error al evaluar su respuesta. Intente nuevamente./n" );
} 
```

但是对于`puts`?

它会在错误时返回 EOF，所以我做了：

```
if( puts( "Message" ) == EOF ) {
    error handle...
} 
```

问题是，如果失败了我应该怎么做。我会考虑在控制台中显示一条消息（这是一个控制台应用程序），但如果`puts`失败，那么我的消息也会失败。（因为我也会使用`puts`）。

我应该用它`assert`来显示消息并结束应用程序吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T04:16:42.370

除非您迫切需要与不再可用的某人/某事进行通信，否则您通常会忽略此类函数的返回值。

如果您确实需要记录您的进度或失败，请打开一个日志文件并在其中写入所有消息（或使用 syslog 之类的东西）。

基本上，如果您使用的是 stdio，那么很可能有人在某个时候将您的程序挂接到管道（例如 | less）或执行其他一些会导致 stdout 消失的事情。

当您忽略 printf 和 puts 的返回值时，像 lint 这样的程序会报错，但事实是 99% 的返回值是无用的，除非在极端情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T05:36:08.643

好吧，正如他们所说，*如果有任何疑问，那就没有疑问。*

融入纪律性思维，例如确保所有案例都得到考虑，这对您非常有益。但是如果你不确定如何处理返回值，那么显然你不需要对它做任何事情。

要在代码中传达此决定，您可以通过将表达式强制转换为 void 来显式丢弃返回值。

```
(void)puts(""); 
```

这将隐藏任何有关忽略返回值的警告消息。

# jbutton - JButton 不显示图像

> ID：12792690
> 
> 赞同：1
> 
> 时间：2012-10-09T04:09:08.130
> 
> 标签：jbutton, imageicon

作为设计的一部分，我正在编写一个应用程序并做我自己的自定义窗口按钮。然而有一件事一直困扰着我。我将图像添加到我的 jButton 中，如下所示：

```
ImageIcon iExit = new ImageIcon("icons/exit.png");
System.out.print(iExit.getIconHeight());
base.setLayout(null);

winex = new PINGButton(iExit); 
```

但是我在测试中一直得到-1，所以我显然没有得到任何结果。但是，这不是文件的问题，当我添加这段代码进行测试时，我没有遇到任何异常：

```
try {
    BufferedImage img = ImageIO.read(getClass().getResource("icons/exit.png"));
} catch (IOException e) {
    System.out.println("yep");
} 
```

我用不同的输入运行它以确保但该文件路径是有效的。

这里有一些注意事项。我关掉了窗饰。我认为这不会影响它，但应该说明一些事情。此按钮静态放置在无布局 jPanel 的窗口中。我还设置了自定义颜色鼠标悬停效果（可能有更好的方法来做到这一点，但 atm 这是我正在使用的）：

```
package main.java.com.hackathon.ping.objects;

import javax.swing.Icon;
import javax.swing.JButton;
import java.awt.Color;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;

public class PINGButton extends JButton {

    private final Color defaultColor, hoverColor;

    /**
     * Keeping Eclipse Happy
     */
    private static final long serialVersionUID = 1L;

    public PINGButton(String text) {
        super(text);
        defaultColor = Color.WHITE;
        hoverColor = Color.LIGHT_GRAY;
        this.setBackground(defaultColor);
        addMouse();
        this.setBorderPainted(false);
        this.setIcon(getIcon());
    }

    public PINGButton(Icon i) {
        super(i);
        defaultColor = Color.WHITE;
        hoverColor = Color.LIGHT_GRAY;
        this.setBackground(defaultColor);
        addMouse();
        this.setBorderPainted(false);
    }

    public PINGButton(String text, Color main, Color hover) {
        super(text);

        defaultColor = main;
        hoverColor = hover;
        super.setBackground(defaultColor);
        addMouse();
        this.setBorderPainted(false);
    }

    private void addMouse() {
        super.addMouseListener(new MouseListener() {

            @Override
            public void mouseClicked(MouseEvent a) { /* NOTHING */}

            @Override
            public void mouseEntered(MouseEvent a) {
                doMouseEnt();
            }

            @Override
            public void mouseExited(MouseEvent a) {
                doMouseEx();
            }

            @Override
            public void mousePressed(MouseEvent arg0) {/* NOTHING */}

            @Override
            public void mouseReleased(MouseEvent arg0) {/* NOTHING */}

        });
    }

    public void doMouseEx() {
        this.setBackground(defaultColor);
        this.setIcon(getIcon());
    }

    public void doMouseEnt() {
        this.setBackground(hoverColor);
        this.setIcon(getIcon());
    }
} 
```

图像大小不是问题，我尝试将图像和按钮调整为多种尺寸，似乎没有任何变化。

有任何想法吗？

# java - 需要在java中找到最多三个数字

> ID：12792692
> 
> 赞同：15
> 
> 时间：2012-10-09T04:11:24.713
> 
> 标签：java, max

> **可能重复：**
> [在 Java 中查找具有不同数据类型的最多 3 个数字（基本 Java）](https://stackoverflow.com/questions/4982210/find-the-max-of-3-numbers-in-java-with-different-data-types-basic-java)

编写一个程序，使用扫描仪读取三个整数（正数），显示最大的三个数。（请不要使用任何运算符`&&`或完成`||`。这些运算符将很快在课堂上介绍。类似的循环不是必需的。）

```
Some sample run: 

Please input 3 integers: 5 8 3
The max of three is: 8

Please input 3 integers: 5 3 1
The max of three is 5

import java.lang.Math;
import java.util.Scanner;
public class max {
    public static void main(String[] args) {
        Scanner keyboard = new Scanner(System.in);
        System.out.println("Please input 3 integers: ");
        String x = keyboard.nextLine();
        String y = keyboard.nextLine();
        String z = keyboard.nextLine();
        int max = Math.max(x,y,z);
        System.out.println(x + " " + y + " "+z);
        System.out.println("The max of three is: " + max);
    }
} 
```

我想知道这段代码有什么问题，以及当我输入 3 个不同的值时如何找到最大值。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-09T05:00:39.963

两件事：更改变量`x`, `y`, `z`as`int`并调用方法 as`Math.max(Math.max(x,y),z)`因为它只接受两个参数。

总之，更改如下：

```
 String x = keyboard.nextLine();
    String y = keyboard.nextLine();
    String z = keyboard.nextLine();
    int max = Math.max(x,y,z); 
```

至

```
 int x = keyboard.nextInt();
    int y = keyboard.nextInt();
    int z = keyboard.nextInt();
    int max =  Math.max(Math.max(x,y),z); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T04:42:11.513

您应该了解更多`java.lang.Math.max`：

1.  `java.lang.Math.max(arg1,arg2)`只接受 2 个参数，但您在代码中编写了 3 个参数。
2.  2 个参数应该是`double`, `int`,`long`但`float`您正在`String`Math.max 函数中编写参数。您需要以所需的类型解析它们。

由于上述不匹配，您的代码将产生**编译时错误。**

尝试以下更新的代码，这将解决您的目的：

```
import java.lang.Math;
import java.util.Scanner;
public class max {
    public static void main(String[] args) {
        Scanner keyboard = new Scanner(System.in);
        System.out.println("Please input 3 integers: ");
        int x = Integer.parseInt(keyboard.nextLine());
        int y = Integer.parseInt(keyboard.nextLine());
        int z = Integer.parseInt(keyboard.nextLine());
        int max = Math.max(x,y);
        if(max>y){ //suppose x is max then compare x with z to find max number
            max = Math.max(x,z);    
        }
        else{ //if y is max then compare y with z to find max number
            max = Math.max(y,z);    
        }
        System.out.println("The max of three is: " + max);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T04:20:06.097

如果您提供您看到的错误，这将有所帮助。查看[http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html)，您会看到 max 仅返回两个数字之间的最大值，因此您的代码可能甚至没有编译。

首先解决所有编译错误。

然后你的作业将包括通过比较前两个数字来找到三个数字的最大值，并将最大值结果与第三个值进行比较。你现在应该有足够的能力找到答案了。

# c++ - CUDA 设备到主机复制非常慢

> ID：12792693
> 
> 赞同：4
> 
> 时间：2012-10-09T04:11:27.390
> 
> 标签：c++, performance, cuda, copy, device

我正在运行 Windows 7 64 位、cuda 4.2、Visual Studio 2010。

首先，我在 cuda 上运行一些代码，然后将数据下载回主机。然后进行一些处理并移回设备。然后我做了以下从设备到主机的复制，它运行得非常快，比如 1 毫秒。

```
clock_t start, end;
count=1000000;
thrust::host_vector <int> h_a(count);
thrust::device_vector <int> d_b(count,0);
int *d_bPtr = thrust::raw_pointer_cast(&d_b[0]);
start=clock();
thrust::copy(d_b.begin(), d_b.end(), h_a.begin());
end=clock();
cout<<"Time Spent:"<<end-start<<endl; 
```

大约需要 1 毫秒才能完成。

然后我再次在 cuda 上运行了一些其他代码，主要是原子操作。然后我将数据从设备复制到主机，这需要很长时间，比如~9s。

```
__global__ void dosomething(int *d_bPtr)
{
....
atomicExch(d_bPtr,c)
....
}

start=clock();
thrust::copy(d_b.begin(), d_b.end(), h_a.begin());
end=clock();
cout<<"Time Spent:"<<end-start<<endl; 
```

~ 9s

我多次运行代码，例如

```
int i=0;
while (i<10)
{
clock_t start, end;
count=1000000;
thrust::host_vector <int> h_a(count);
thrust::device_vector <int> d_b(count,0);
int *d_bPtr = thrust::raw_pointer_cast(&d_b[0]);
start=clock();
thrust::copy(d_b.begin(), d_b.end(), h_a.begin());
end=clock();
cout<<"Time Spent:"<<end-start<<endl;

__global__ void dosomething(int *d_bPtr)
{
....
atomicExch(d_bPtr,c)
....
}

start=clock();
thrust::copy(d_b.begin(), d_b.end(), h_a.begin());
end=clock();
cout<<"Time Spent:"<<end-start<<endl;
i++
} 
```

结果几乎相同。
可能是什么问题呢？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T05:05:50.640

问题是时间问题之一，而不是复制性能的任何变化。内核启动在 CUDA 中是异步的，因此您要测量的不仅仅是时间，`thrust::copy`还包括您启动的先前内核完成的时间。如果您将用于计时复制操作的代码更改为如下所示：

```
cudaDeviceSynchronize(); // wait until prior kernel is finished
start=clock();
thrust::copy(d_b.begin(), d_b.end(), h_a.begin());
end=clock();
cout<<"Time Spent:"<<end-start<<endl; 
```

您应该会发现传输时间已恢复到以前的性能。所以你真正的问题不是“为什么`thrust::copy`慢”，而是“为什么我的内核慢”。根据您发布的相当糟糕的伪代码，答案是“因为它充满了`atomicExch()`序列化内核内存事务的调用”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-09T05:50:14.277

我建议你使用**cudpp**，在我看来比推力更快（我正在写关于优化的硕士论文，我尝试了这两个库）。如果拷贝很慢，可以尝试自己写内核拷贝数据。

# python - `operator.itemgetter` 的逆

> ID：12792694
> 
> 赞同：0
> 
> 时间：2012-10-09T04:11:40.780
> 
> 标签：python, list, indexing

我最近正在研究[这个问题](https://stackoverflow.com/questions/12787650/finding-the-index-of-n-biggest-elements-in-python-array-list-efficiently/12787706#12787706)。本质上，[我的回答](https://stackoverflow.com/a/12787706/198633)涉及调用`sorted`a `lambda`as `key`：

```
sorted(range(len(L)), key=lambda i : L[i]) 
```

鉴于性能是问题的核心，并且 lambdas 本身很慢，我可以通过定义一个函数并使用它来代替`lambda`.

不过，我觉得我会重新发明轮子。`import`必须在某处或某个能够提供功能的模块中存在一个内置函数`__getitem__`（我不想使用的唯一原因是使用重整方法并不是真正的pythonic）。

我知道`operator.getitem`哪个让我预定义一个索引并在任何输入序列中`i`获取元素。`i`但是是否有一个功能（比如`foo`）如下工作：

```
In [14]: g = operator.itemgetter(1)

In [15]: d = {'a':1, 'b':2, 'c':3, 'd':4}

In [16]: for i in d.iteritems():
   ....:     print g(i),
   ....:     
1 3 2 4

In [17]: L = list('abcd')

In [18]: g = foo(L)

In [19]: for i in range(4):
   ....:     print g(i),
   ....:     
'a' 'b' 'c' 'd' 
```

抱歉，如果这是一个重复的问题，但我能想到的搜索词没有产生结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T06:12:49.770

如果我已经正确理解了您想要的内容，那么以下内容将做到这一点：

```
import functools
import operator

L = list('abcd')

def foo(indexable):
    return functools.partial(operator.__getitem__, indexable)

g = foo(L)

for i in xrange(len(L)):
    print g(i), 
```

更新：

我进行了进一步的实验，并惊讶地发现了一个稍微快一点的解决方案，这只不过是这个：

```
def foo2(indexable):
    return indexable.__getitem__ 
```

当使用我拼凑的一个小测试台运行时，产生了以下结果：

```
fastest to slowest *_test() function timings:
 10,000 elements, 1,000 timeit calls, best of 3

  foo2_test() : 1.46 (0.00 times slower)
lambda_test() : 4.15 (1.84 times slower)
   foo_test() : 4.28 (1.93 times slower) 
```

使用的每个测试函数只是使用不同的技术在紧密循环中访问列表的每个元素。

好奇这如何应用于您对链接问题的排序答案，我使用它对列表进行排序而不是仅访问列表的每个元素一次，获得了这些不同的结果：

```
fastest to slowest *_test() function timings:
 10,000 elements, 1,000 timeit calls, best of 3

  foo2_test() : 13.03 (0.00 times slower)
   foo_test() : 14.70 (0.13 times slower)
lambda_test() : 16.25 (0.25 times slower) 
```

虽然`foo2()`在这两种情况下都是最快的，但在排序版本中它只是很小的一部分。

以下是用于获取第一组结果以进行简单访问的完整测试平台的列表：

```
import functools
import operator

import timeit
import types

N = 1000
R = 3
SZ = 10000
SUFFIX = '_test'
SUFFIX_LEN = len(SUFFIX)

def setup():
    import random
    global a_list
    a_list = [random.randrange(100) for _ in xrange(SZ)]

def lambda_test():
    global a_list
    f = lambda i: a_list[i]
    for i in xrange(len(a_list)): f(i)

def foo(indexable):
    return functools.partial(operator.__getitem__, indexable)

def foo_test():
    global a_list
    g = foo(a_list)
    for i in xrange(len(a_list)): g(i)

def foo2(indexable):
    return indexable.__getitem__

def foo2_test():
    global a_list
    g = foo2(a_list)
    for i in xrange(len(a_list)): g(i)

# find all the functions named *SUFFIX in the global namespace
funcs = tuple(value for id,value in globals().items()
            if id.endswith(SUFFIX) and type(value) is types.FunctionType)

# run the timing tests and collect results
timings = [(f.func_name[:-SUFFIX_LEN],
            min(timeit.repeat(f, setup=setup, repeat=R, number=N))
           ) for f in funcs]
timings.sort(key=lambda x: x[1])  # sort by speed (ironic use of lambda?)
fastest = timings[0][1]  # time fastest one took to run
longest = max(len(t[0]) for t in timings) # len of longest func name (w/o suffix)

print 'fastest to slowest *_test() function timings:\n' \
      ' {:,d} elements, {:,d} timeit calls, best of {:d}\n'.format(SZ, N, R)

def times_slower(speed, fastest):
    return speed/fastest - 1.0

for i in timings:
    print "{0:>{width}}{suffix}() : {1:.2f} ({2:.2f} times slower)".format(
                i[0], i[1], times_slower(i[1], fastest), width=longest, suffix=SUFFIX) 
```

这是测试排序用法时不同的部分：

```
def setup():
    import random
    global a_list
    a_list = [random.randrange(100) for _ in xrange(SZ)]

def lambda_test():
    global a_list
    sorted(range(len(a_list)), key=lambda i:a_list[i])

def foo(indexable):
    return functools.partial(operator.__getitem__, indexable)

def foo_test():
    global a_list
    sorted(range(len(a_list)), key=foo(a_list))

def foo2(indexable):
    return indexable.__getitem__

def foo2_test():
    global a_list
    sorted(range(len(a_list)), key=foo2(a_list)) 
```

# casting - TypeScript 强制转换数组

> ID：12792695
> 
> 赞同：74
> 
> 时间：2012-10-09T04:12:00.480
> 
> 标签：casting, typescript

我正在尝试对需要数组作为输入参数的库使用包装器。

我尝试转换 Array，但出现错误：无法将 'any[]' 转换为 'Array'

有没有办法使这项工作？

```
var rows = new Array(10);
var rows2 = <Array>rows; //<--- Cannot convert 'any[]' to 'Array' 
```

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2016-02-03T16:09:05.860

TypeScript 中有 4 种可能的数组转换方法：

```
let x = []; //any[]

let y1 = x as number[];
let z1 = x as Array<number>;
let y2 = <number[]>x;
let z2 = <Array<number>>x; 
```

该`as`运算符主要是为`*.tsx`文件设计的，以避免语法歧义。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-02-03T15:10:06.940

我认为正确的语法是：

```
var rows2 = <Array<any>>rows; 
```

这就是你如何投射到`interface Array<T>`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-09T04:33:12.350

我认为这只是一个错误 - 您可以在 CodePlex 网站上记录问题吗？

作为一种解决方法，您可以编写`<Array><any>rows`;

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-01-02T21:12:44.157

适用于所有类型的简单解决方案

```
const myArray = <MyType[]>value; 
```

# wordpress - Wordpress 购物车插件

> ID：12792700
> 
> 赞同：0
> 
> 时间：2012-10-09T04:12:25.847
> 
> 标签：wordpress, plugins, shopping-cart

我正在寻找一个在 wordpress 中工作的购物车插件，其中幻灯片在单击时显示父类别图像，它应该转到相应类别的页面。我希望人们能够登录并订购产品 检查他们的订单状态..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T04:19:53.910

这个问题非常模糊和开放式，意见很有可能影响答案，但这里有一些很棒的 Wordpress 购物车。您可以浏览他们的功能页面。我个人使用了所有这些（但对其中任何一个都没有兴趣/所有权）：

[WooCommerce](http://www.woothemes.com/woocommerce/)（免费）- 迄今为止我用过的最好的

[Cart66](http://cart66.com/)（付费）

[WP E-Commerce](http://getshopped.org/)（免费） - 对某些人来说效果很好 - 我遇到了一些问题

# jquery - 在 jQuery 代码中添加 MouseOut

> ID：12792702
> 
> 赞同：2
> 
> 时间：2012-10-09T04:12:39.857
> 
> 标签：jquery, mouseover, mouseout

我正在尝试制作一个 div jQuery 代码以在鼠标悬停在另一个 div 上后显示一个 div！

jQuery：

```
$(document).ready(function() {
    $('.pic').mouseover(function() {
        $('.rank').fadeOut(200);        
        $(this).next('.rank').fadeIn(400);   
    });

    $("div.rank").hide();
});​ 
```

HTML：

```
<div class="pic">Mouse Over</div>
<div class="rank">Show Somthing</div>​ 
```

演示：http: [//jsfiddle.net/CaMwL/](http://jsfiddle.net/CaMwL/)

现在，问题是，我需要在这段代码中添加 mouseout 事件，当我将鼠标移出时，我想隐藏一个 div！我不知道我该怎么做！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T04:16:03.973

试试这个：http: [//jsfiddle.net/633hD/1/](http://jsfiddle.net/633hD/1/)

您可以链接 API：`.mouseout` [http ://api.jquery.com/mouseout/](http://api.jquery.com/mouseout/)

希望它适合原因`:)`

**代码**

```
$(document).ready(function() {
    $("div.rank").hide();

    $('.pic').mouseover(function() {
        $('.rank').fadeOut(200);        
        $(this).next('.rank').fadeIn(400);   
    }).mouseout(function() {
           $("div.rank").hide();
    });
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T04:16:20.433

你的意思是：

```
$(document).ready(function() {
    $('.pic').hover(
        function() {
            $('.rank').fadeOut(200);        
            $(this).next('.rank').fadeIn(400);   
        },
        function() {
            $('.rank').fadeIn(400);        
            $(this).next('.rank').fadeOut(200);   
        });

    $("div.rank").hide();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T04:15:34.333

只需添加

```
$(document).ready(function() {
$('.pic').mouseout(function() {
    $("div.rank").hide();
});   
}); 
```

此外，您可以将 onmouseover 和 onmouseout 属性添加到 div 元素，并使用 jquery 将值设置为 javascript 函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T04:15:58.297

尝试这个

```
$('.pic').mouseout(function() {
    $("div.rank").hide();
}); 
```

找到 jsfiddle [http://jsfiddle.net/CaMwL/5/](http://jsfiddle.net/CaMwL/5/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T04:16:59.463

```
$(document).ready(function() {
    $('.pic').mouseover(function() {
        $('.rank').fadeOut(200);        
        $(this).next('.rank').fadeIn(400);   
    });

     $('.pic').mouseout(function() {

         $("div.rank").hide();   
    });

}); 
```

# ios - 使用 SDWebImage 将本地图像从文档目录加载到 tableview

> ID：12792704
> 
> 赞同：3
> 
> 时间：2012-10-09T04:12:39.733
> 
> 标签：ios, performance, tableview, local, sdwebimage

我正在使用一个表格视图，它从文档目录中加载图像，创建一个缩略图并将其显示在表格视图中。但是，我有一个问题：使用相机拍摄的图片很大，它变得很慢并且崩溃。

我已经探索了几种解决方案，包括 GCD 在后台线程中完成工作，但结果是一样的。所以，我想研究一下 SDWebImage 但我不知道它是否也适用于本地文件，在这种情况下不适用于网络图像。有人可以给我建议吗？如果不是，这个问题如何解决？是否有 API 可以帮助解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T05:39:56.580

这个问题不容易回答，因为这个问题问得相当广泛，但我会尽力而为。

首先，如果我要进行昂贵的处理以不阻塞主线程，我通常会调度一个后台线程，这非常重要。我真的不知道你为什么不使用普通的 UIImageView 来做你正在做的事情，但尝试实现以下内容：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"YourCell";
    MyCellClass *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[MyCellClass alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
/*
 Whatever Code you want 
*/
    NSArray* params =@[cell.myImageView, @"http://myfancyimages.com/image.png"];
    [self performSelectorInBackground:@selector(loadEventImageWithParameters:) withObject:params];
    return cell;
} 
```

现在添加功能：

```
- (void) loadEventImageWithParameters:(id) parameters {
    NSArray* params = [[NSArray alloc] initWithArray:(NSArray*)parameters];
    NSURL *url = [NSURL URLWithString:[params objectAtIndex:0]];
    UIImage *image = [UIImage imageWithData: [NSData dataWithContentsOfURL:url]];
    UIImageView* theImageView = (UIImageView*) [params objectAtIndex:0];
    [theImageView setImage:image];
} 
```

如果您要加载大量图片，建议您将进程排队，这样您就不会使用 Grand Central Dispatch “窃取”所有资源。阅读这篇出色的文章[http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)了解更多详情。

希望有帮助

# bash - 为什么bash中的反斜杠？

> ID：12792705
> 
> 赞同：7
> 
> 时间：2012-10-09T04:13:03.650
> 
> 标签：bash, ubuntu, bash-completion

我在 ~/.bashrc 中导出了一个变量，如下所示（后跟 source ~/.bashrc）

```
export w=/home/user/workspace/ 
```

当我在命令行上时，我尝试通过以下方式访问 $w 的子目录

```
user$ vi $w/ 
```

在此之后，当我按 Tab 键时，会出现一个神秘的反斜杠

```
user$ vi \$w/ 
```

它会禁用进一步的制表符补全。为什么？可能并不`vi`具体，因为即使使用`ls`.

运行 Ubuntu 11.04 的 Bash 版本 4.2.24(1)-release (i686-pc-linux-gnu)

**编辑** [解决方法](http://lists.gnu.org/archive/html/bug-bash/2011-02/msg00274.html)：在点击选项卡之前点击 Esc+Ctrl+E。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T04:45:14.597

Bash 有点聪明，但没那么聪明。它无法扩展您的变量，*然后*制表符完成到任何评估的目录。所以这不是反斜杠“禁用”选项卡完成，而是bash找不到任何完成建议的事实。

鉴于如果您的路径中确实有环境变量，补全不会对您有所帮助，补全可以帮助您的唯一方法是如果您打算输入文字美元符号。我认为 bash 只是过于热心地试图完成某件事。

尽管如此，我还是将其称为错误，因为在您的情况下，它不仅无法完成，而且还会改变您输入的内容的含义。

# windows - Windows批处理脚本复制最大文件和模式

> ID：12792706
> 
> 赞同：0
> 
> 时间：2012-10-09T04:13:13.490
> 
> 标签：windows, batch-file, copy, pattern-matching

谁能告诉我如何创建一个批处理文件来执行以下操作：

1.  以以下日期格式创建文件夹 MMDDYYYY
2.  在当前目录中搜索最大的文件并将其复制到步骤 1 中创建的文件夹中。
3.  还要在当前目录中搜索与找到的最大文件匹配的第二个文件，并将其复制到步骤 1 中创建的目录中。

> ```
> For example: 
> file1test.txt (3kb) 
> file2test.txt (10 kb)
> file1test.log (2kb) 
> file2test.log (2kb) 
> ```

**选择file2test.txt**并将其复制到文件夹中，因为它是最大的文件，并且选择了**file2test.log**并将其复制到同一文件夹中，因为它与最大文件的模式匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T07:34:52.600

正如 Andriy 已经指出的那样，您的帖子中有三个问题，第一和第二已经在 SO 中得到回答。

要解决您的最新问题，您需要遍历`FOR`文件列表并仅比较要匹配的文件名部分。

为了帮助您并帮助您入门，请参阅以下示例代码。我从您的示例中假设您只想使用名称部分，而不使用扩展名，并且我假设在此示例中您想要的扩展名是 .log 和 .txt。您必须完成文件夹部分，更改和扩展它以满足您的需求。而且，作为额外的奖励，为了让这个样本可以理解，我也必须解决你的第二个问题，抱歉:)

```
@echo off
setlocal enabledelayedexpansion enableextensions
set destfolder=Folder01012001
set largest=
set largestname=
set /a largestsize=0
for %%a in (*.txt) do (
  if %%~za gtr !largestsize! (
    set largest=%%a
    set largestname=%%~na
    set /a largestsize=%%~za
  )
)
set match=
for %%a in (*.log) do (
  if %%~na==!largestname! (
    set match=%%a
  )
)
echo copy "!largest!" %destfolder%
echo copy "!match!" %destfolder%
endlocal 
```

# django - django-调试工具栏。我可以从 views.py 中查看堆栈跟踪吗？

> ID：12792709
> 
> 赞同：2
> 
> 时间：2012-10-09T04:13:58.017
> 
> 标签：django, django-debug-toolbar

在过去，我记得我可以在`django-debug-toolbar`. 刚刚将它安装在我的新 PC（运行 django 1.4）中，我只能看到 sql 查询和模板上下文。

这是我的配置：

```
DEBUG_TOOLBAR_PANELS = (
    'debug_toolbar.panels.version.VersionDebugPanel',
    'debug_toolbar.panels.timer.TimerDebugPanel',
    'debug_toolbar.panels.settings_vars.SettingsVarsDebugPanel',
    'debug_toolbar.panels.headers.HeaderDebugPanel',
    'debug_toolbar.panels.request_vars.RequestVarsDebugPanel',
    'debug_toolbar.panels.template.TemplateDebugPanel',
    'debug_toolbar.panels.sql.SQLDebugPanel',
    'debug_toolbar.panels.signals.SignalDebugPanel',
    'debug_toolbar.panels.logger.LoggingPanel',
)

DEBUG_TOOLBAR_CONFIG = {
    'INTERCEPT_REDIRECTS': True,
    'ENABLE_STACKTRACES' : True,
    'HIDE_DJANGO_SQL': False,
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:38:30.037

您使用的是 <= 0.9.4 的版本吗？如果是这样，这是一个[已知问题](https://github.com/django-debug-toolbar/django-debug-toolbar/issues/272#issuecomment-5094725)。

[您可以按照此 SO answer](https://stackoverflow.com/questions/9352158/how-to-show-stacktrace-in-django-debug-toolbar)上的说明手动修补您的 0.9.4 安装，或者只需升级到更新的版本。

# c++ - 关于返回不存在数据引用的设计

> ID：12792710
> 
> 赞同：1
> 
> 时间：2012-10-09T04:14:09.853
> 
> 标签：c++, reference

我遇到了这个设计问题。这是故事：

我有一个基类，它定义了一些这样的方法：

```
virtual double & f(double x); 
```

在回答某些查询时，基类将调用其中一个来请求对子类中某些数据的引用。问题是，这些 f 方法在子类中返回一条可选的数据。换句话说，根据子类， f 要求返回的内容可能根本不存在。基类中的逻辑可以保证在子类不存在的时候不会调用这样的f()，所以原则上这个子类不需要实现这个方法，但是我不想做方法纯虚拟，因为无论如何子类都需要可实例化。不方便的是 f 的返回类型需要引用，所以我不能简单地返回一些垃圾值。

所以基本上我正在寻找一种“优雅”的方式来返回一个虚拟引用，如果程序正常工作，无论如何都不会调用它，但理想情况下会通过捕获错误调用来帮助调试。f 的签名对于可读性很重要，所以理想情况下我不想更改它。

我想我可以在类中声明一个虚拟的静态双精度 DATA_NOT_EXIST 变量并返回它，但它看起来有点难看。有更好的想法吗？当你不得不返回“null”引用时，你最喜欢的方式是什么？

提前致谢。

* * *

编辑：

我想将这些方法保留在基类中，尽管在子类中声明它们似乎更好，因为基类试图处理一些不适用于所有子类的逻辑（这本身是一个糟糕的设计吗？）。像这样：基类代表鼠标，子类中的可选数据代表左/中/右按钮。任何特定的子类可能没有某些按钮，但无论如何基类仍然处理按钮点击，假设可能有也可能没有按钮。

* * *

编辑：这里有一些源代码来说明我的意思。在基类中：

```
#include <cassert>
struct Base
{
  double & basef(int x)
  {
    assert(x >= 0 && x < 20);
    if (x < 10) return f1(x);
    else return f2(x);
  }
  virtual double & f1(int x);
  virtual double & f2(int x);
};

struct Sub1 : Base
{
  double & f1(int x) { return a[x]; }
  double & f2(int x) { return b[x - 10]; }
  double a[10];
  double b[10];
};

struct Sub2 : Base
{
  double & f1(int x) { return a[x]; }
  double & f2(int x) { /* nothing to return here! */ }
  double a[10];
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:15:19.007

您有几个选择，没有一个要求您通过取消引用空指针将未定义的行为引入程序中，正如现在两个答案所建议的那样。

1）抛出异常。消除不可预测性并使其成为您设计的一部分：

```
// default implementation in base class
virtual double& f2(int x)
{
    throw std::runtime_error("No value defined");
} 
```

2）使用`boost::optional<double&>`：

```
// default implementation in base class
virtual boost::optional<double&> f2(int x)
{
    return boost::optional<double&>();
}

// call-site
auto value = x->f2(0);
if (value)
    do_something(*value); 
```

3）使用`double*`（穷人的`boost::optional`）：

```
// default implementation in base class
virtual double* f2(int x)
{
    return nullptr;
}

// same call-site as before 
```

4）从根本上改变设计以避免这种情况。

所有这些都是更好的解决方案，因为它们可靠且可预测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:56:39.903

```
double& Dummy() { return *(double*)nullptr; } 
```

如果您的编译器足够聪明地意识到这是一个 nullptr 访问并发出警告，请尝试使用另一个可能导致崩溃的值，例如 <4096 的任何值（合理地，现代系统应该完全禁止第一个内存页来捕获 nullpointer取消引用），〜0或类似的东西，或者使指针成为全局变量。

当然，我通常会做类似的事情

```
double& Dummy() { ASSERT(false); } 
```

并且仅在编译器不知道不返回的函数时才返回引用。

# java - 在Android中创建多个目录

> ID：12792713
> 
> 赞同：2
> 
> 时间：2012-10-09T04:14:54.773
> 
> 标签：java, android

这是我的 Android sdcard 上的目录结构

```
 sdcard/alQuranData/Reader1/Surah 
```

这是我制作目录的代码

```
File SDCardRoot = new File(Environment.getExternalStorageDirectory().toString() + "alQuranData/Reader1/Surah");
                Toast.makeText(getApplicationContext(), SDCardRoot.toString(), Toast.LENGTH_LONG).show();
                if (!SDCardRoot.exists()) {
                    Log.d("DIRECTORY CHECK", "Directory doesnt exist creating directory");
                    SDCardRoot.mkdir();
                } 
```

现在`alQuranData`已经在我的`sdcard`根目录中创建了。如果我只创建 Reader1 目录，那么它可以正常工作，但是添加的时候`Reader1/Surah`比它没有创建。

我也试过`mkdirs()`，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T05:16:04.853

您是否收到任何错误或异常。请尝试检查`mkdirs()`方法调用的返回值。还可以尝试以下代码：

```
File SDCardRoot = new File(Environment.getExternalStorageDirectory().toString() + "/alQuranData/Reader1/Surah");
Toast.makeText(getApplicationContext(), SDCardRoot.toString(), Toast.LENGTH_LONG).show();
if (!SDCardRoot.exists()) {
    Log.d("DIRECTORY CHECK", "Directory doesnt exist creating directory");
    SDCardRoot.mkdirs();
} 
```

还请检查您是否在清单文件中添加了以下权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

我刚刚测试了以下代码，它正在为我工​​作：

```
File SDCardRoot = new File(Environment.getExternalStorageDirectory()
        .toString() + "/alQuranData/Reader1/Surah");
Toast.makeText(getApplicationContext(), SDCardRoot.toString(),
        Toast.LENGTH_LONG).show();
if (!SDCardRoot.exists()) {
    Log.d("DIRECTORY CHECK",
            "Directory doesnt exist creating directory "
                    + Environment.getExternalStorageDirectory()
                            .toString());
    boolean outcome = SDCardRoot.mkdirs();

    Log.d("DIRECTORY CHECK",
            "outcome for " + SDCardRoot.getAbsolutePath() + "     "
                    + outcome);
} 
```

如您的帖子中所述，我已经手动添加了 alQaranData 文件夹并添加了权限，它在我的最后开始工作。请检查此代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T04:27:45.697

使用 Java，您不能一次创建多个目录。您将需要一个一个声明一个文件夹名称并继续创建一个目录。所以首先创建

1.  古兰经数据
2.  alQuranData/Reader1/
3.  alQuranData/Reader1/Surah

使用您提供的同一段代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T04:20:40.707

使用此代码.....）

```
 private void createSdCatalogs(String str1){
    //str1 = "/alQuranData"
File folder = new File(Environment.getExternalStorageDirectory() + str1);
boolean success = false;
if (!folder.exists()) {
    success = folder.mkdir();
    Log.v("Adding line", "/");
}}
private void createSdCatalogs(String str2)   { 
//str2 = "/alQuranData/Reader1";
File folder1 = new File(Environment.getExternalStorageDirectory() + str2);
boolean success1 = false;
if (!folder1.exists()) {
    success1 = folder1.mkdir();
    Log.v("Adding line", "/");
}

} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2022-01-04T15:35:23.643

默认情况下，android 无法一次创建多个目录。您必须一一创建并检查是否创建。

**但我创建了一个下面的代码来实现类似的目标。您可以使用一次创建多个目录...**

```
 public static boolean recursivelyMakeDir(File endDirectory,File baseDir) {

        if (!baseDir.exists()){
            return false;
        }
        ArrayList<String> allDirectoryList = parseAndGetListDir(endDirectory.getAbsolutePath().substring(baseDir.getAbsolutePath().length()));

        File  currentDir = baseDir;

        for (int i=0; i< allDirectoryList.size() ; i++){

            File dir = new File(currentDir.getAbsolutePath() + "/" + allDirectoryList.get(i) );

            if (!dir.exists()){

                if (!dir.mkdir()){
                    return false;
                }
            }

            currentDir  = dir;
        }

        return true;
    }

    public static ArrayList<String> parseAndGetListDir(String data) {

        ArrayList<String> allDirectoryList = new ArrayList<>();
        boolean exit = false;
        String dir = "";

        for (int i=0; i<data.length() ; i++){

            if (data.charAt(i) == '/'){
                if (!dir.equals("")){
                    allDirectoryList.add(dir);
                    dir = "";
                }
            }else {
                dir = dir + data.charAt(i);
            }

        }

        if (!dir.equals("")){
            allDirectoryList.add(dir);
        }

        return allDirectoryList;
    } 
```

**用法 ：**

```
// you 100% sure that this  directory is already exist.
File baseDir = Environment.getExternalStorageDirectory();

// desire directory wanted to create.
File endDirectory = new File(Environment.getExternalStorageDirectory() +"kkk/SSS/aaa/ddd/b");

if(recursivelyMakeDir(endDirectory ,baseDir )){

  // dir created sucessessfully
}else{
  // failed
} 
```

# android - 多个微调器上的 OnItemSelectedListener 不起作用

> ID：12792714
> 
> 赞同：3
> 
> 时间：2012-10-09T04:15:04.753
> 
> 标签：android, android-spinner

我有一个包含多个 Spinner 的活动（大约 8-9）。我正在使用的代码如下：

```
Spinner sp1, sp2, sp3, sp4, sp5;
sp1 = (Spinner) findViewById(R.id.spinner1);
sp2 = (Spinner) findViewById(R.id.spinner2);
sp3 = (Spinner) findViewById(R.id.spinner3);
sp4 = (Spinner) findViewById(R.id.spinner4);
sp5 = (Spinner) findViewById(R.id.spinner5);

sp1.setOnItemSelectedListener(this);
sp2.setOnItemSelectedListener(this);
sp3.setOnItemSelectedListener(this);
sp4.setOnItemSelectedListener(this);
sp5.setOnItemSelectedListener(this);

//Outside onCreate I'm using the following to handle the spinner Item Selected event.

@override
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {
    // TODO Auto-generated method stub
    switch (arg0.getId()) {
    case R.id.spinner1:
        Toast.makeText(getApplicationContext(), arg0.getItemAtPosition(arg2).toString(), Toast.LENGTH_LONG).show();
        break;
    case R.id.spinner2:
        Toast.makeText(getApplicationContext(), arg0.getItemAtPosition(arg2).toString(), Toast.LENGTH_LONG).show();         
        break;
    case R.id.spinner3:
        Toast.makeText(getApplicationContext(), arg0.getItemAtPosition(arg2).toString(), Toast.LENGTH_LONG).show();
        break;
    case R.id.spinner4:
        Toast.makeText(getApplicationContext(), arg0.getItemAtPosition(arg2).toString(), Toast.LENGTH_LONG).show();
        break;
    case R.id.spinner5:
        Toast.makeText(getApplicationContext(), arg0.getItemAtPosition(arg2).toString(), Toast.LENGTH_LONG).show();
        break;
    }
}

@Override
public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

} 
```

但问题是我没有`Toast`在任何微调器中选择项目。任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T04:38:17.733

```
package com.meta;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.Spinner;
import android.widget.Toast;

import com.meta.R;

public class SpinnerActivity extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Spinner sp1, sp2, sp3, sp4, sp5;
        sp1 = (Spinner) findViewById(R.id.spinner1);
        sp2 = (Spinner) findViewById(R.id.spinner2);
        sp3 = (Spinner) findViewById(R.id.spinner3);
        sp4 = (Spinner) findViewById(R.id.spinner4);
        sp5 = (Spinner) findViewById(R.id.spinner5);

        sp1.setOnItemSelectedListener(myListener);
        sp2.setOnItemSelectedListener(myListener);
        sp3.setOnItemSelectedListener(myListener);
        sp4.setOnItemSelectedListener(myListener);
        sp5.setOnItemSelectedListener(myListener);

    }

    OnItemSelectedListener myListener=new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
             switch (arg2) {
                case 1:
                    Toast.makeText(SpinnerActivity.this,"Spinner 1", Toast.LENGTH_LONG).show();
                    break;
                case 2:
                    Toast.makeText(SpinnerActivity.this, "Spinner 2", Toast.LENGTH_LONG).show();         
                    break;
                case 3:
                    Toast.makeText(SpinnerActivity.this, "Spinner 2", Toast.LENGTH_LONG).show();
                    break;
                case 4:
                    Toast.makeText(SpinnerActivity.this,"Spinner 2", Toast.LENGTH_LONG).show();
                    break;
                case 5:
                    Toast.makeText(SpinnerActivity.this, "Spinner 2", Toast.LENGTH_LONG).show();
                    break;
                }

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    };

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-21T14:25:45.753

多个微调器的可重用 onItemSelected 方法。

```
 public void onItemSelected(AdapterView<?> parent, View view,int pos, long id) {
        switch (parent.getId()) {
            case R.id.your_spinner_1_id:
                // get the selected value of spinner 1
                 parent.getSelectedItem().toString();
                break;
            case R.id.your_spinner_2_id:
                // do stuffs with your spinner 2
                break;
            default:
                break;
            }
    } 
```

# c - 在使用 fgets 的 for 循环之前使用 scanf 将 a[0] 返回为空

> ID：12792724
> 
> 赞同：0
> 
> 时间：2012-10-09T04:16:26.427
> 
> 标签：c

所以我真的不明白为什么scanf搞砸了[0]。当我打印出数组时，a[0] 为空，而我想要 a[0] 的位置存储在 a[1] 中。

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{
    char *a[128];
    int i;
    int num;

    scanf("%d", &num);

    for (i = 0; i < 2; i++) {
        a[i] = malloc(50*sizeof(char));
        fgets(a[i], 100, stdin);
    }

    printf("[0] = %s [1] = %s", a[0], a[1]);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T04:23:14.833

您`scanf()`并*没有*`a[0]`通过以某种方式破坏其存储区域来弄乱您的 . 这对于混合不同的输入“方法”来说是一个非常大的问题。

您的`scanf/fgets`组合实际发生的`scanf`是获取整数，但没有读取您在该数字末尾输入的换行符，因此第一个`fgets`选择了它。

ISO 标准是这样说明的（按照指定的顺序）：

> 输入空白字符（由 isspace 函数指定）将被跳过，除非规范包含 [、c 或 n 说明符。
> 
> 从流中读取输入项，除非规范包含 n 说明符。输入项被定义为最长的输入字符序列，它不超过任何指定的字段宽度，并且是匹配输入序列的前缀。
> 
> 输入项之后的第一个字符（如果有）保持未读状态。

第一段和最后一段很重要。第一个表示跳过前导空格，最后一个表示尾随空格留在输入流中以供稍后读取。

* * *

但是，我会告诉你什么*可能会*搞砸（取决于输入行的长度），事实上你为每个字符分配了 50 个字符空间，`a[i]`然后最多读取 100 个字符。那是未定义的行为。

* * *

如果您想要一个健壮的输入解决方案来正确处理缓冲区大小、检测太长的行、丢弃这些行的其余部分等等，请参阅[此答案](https://stackoverflow.com/questions/4023895/how-to-read-string-entered-by-user-in-c/4023921#4023921)。

或者，如果你想用非基于行的行为来模拟基于行的行为`scanf`（并且你确定你的行总是小于 100 字节），你可以改变：

```
scanf("%d", &num); 
```

进入：

```
char junk[100];
scanf ("%d", &num);
fgets (junk, sizeof (junk), stdin); 
```

这样它就可以抓住并扔掉其余的线。

并且您应该确保最大大小参数`fgets`与可用内存量相匹配（例如通过`sizeof`在上面的代码中使用）。

另一件事，请不要通过乘以使代码复杂化`sizeof(char)`- 根据标准，该值*始终*为 1。

# android - 如何将菜单项添加到 webview 的上下文操作栏菜单

> ID：12792725
> 
> 赞同：2
> 
> 时间：2012-10-09T04:16:37.387
> 
> 标签：android, android-layout

**In an android webview is it possible to add an menu item in the webview's default contextual action bar menu.This contextual action bar appears when some webview page contents are selected.The menu item should appear above share in the menu items list.**

![在此处输入图像描述](../Images/8da7f67fc19f5e2572b56ef3ebf21713.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:33:03.343

> 在 android webview 中，可以在 webview 的默认上下文操作栏菜单中添加菜单项。

不，对不起。很少有 Android 小部件允许您为其操作模式做出贡献——`EditText`确实如此，这是我能想到的唯一一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T05:21:22.443

您想了解的有关操作上下文操作栏菜单的所有信息都[在这里](http://developer.android.com/guide/topics/ui/menus.html#context-menu)。您可以简单地为上下文操作模式外观扩展菜单。

```
@Override
public boolean onCreateActionMode(ActionMode mode, Menu menu) {
    // Inflate a menu resource providing context menu items
    MenuInflater inflater = mode.getMenuInflater();
    inflater.inflate(R.menu.context_menu, menu);
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T05:39:46.910

如果您正在寻找教程，这里有一些您可以使用的资源：

[https://developer.android.com/guide/topics/ui/menus.html#context-menu](https://developer.android.com/guide/topics/ui/menus.html#context-menu)

[http://wptrafficanalyzer.in/blog/creating-a-contextual-menu-bar-contextual-action-mode-for-a-single-view-in-android/](http://wptrafficanalyzer.in/blog/creating-a-contextual-menu-bar-contextual-action-mode-for-a-single-view-in-android/)

[http://mobile.tutsplus.com/tutorials/android/android-sdk-context-menus/](http://mobile.tutsplus.com/tutorials/android/android-sdk-context-menus/)

基本上，您可以创建一个布局并在单击按钮时对其进行膨胀：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/menu_layout"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical"
android:padding="10dip" >

<TextView
    android:id="@+id/menuItem1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dip"
    android:text="@string/menu1" />

<TextView
    android:id="@+id/menuItem2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dip"
    android:text="@string/menu2" />
<TextView
    android:id="@+id/menuItem3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dip"
    android:text="@string/menu3" />
</LinearLayout> 
```

在您的 showPopup() 方法中，您可以执行以下操作：

```
public void showPopup(View v) {
    LayoutInflater inflater = (LayoutInflater) MainActivity.this
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        PopupWindow pw = new PopupWindow(inflater.inflate(
                R.layout.container, null, false), 400, 500, true);
        pw.showAtLocation(findViewById(R.id.menu_layout), Gravity.CENTER, 0,
                0);
} 
```

# ajax - 如何使 django 中的用户资料查看编辑类似于 facebook 方式？

> ID：12792726
> 
> 赞同：1
> 
> 时间：2012-10-09T04:16:40.683
> 
> 标签：ajax, django, facebook, django-forms, profile

我正在 django 中创建一个网站，其中包含用户和公司的个人资料，包括文本字段、照片、选择等，我希望它们在查看或编辑它们时看起来相同（如果是个人资料的所有者）。基本上用户必须点击某个地方，所有信息都变得可编辑，而无需进入其他“配置文件编辑”页面。

我能想到的唯一方法是制作不同的页面，一个仅用于“查看”数据，另一个用于编辑数据，并尝试使它们看起来一样。

我想知道，是否有一种优雅而简单的方法可以在 django 中集成这两个功能？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:42:38.183

您说的是在不加载页面的情况下操作 DOM。您将使用 AJAX 来检索您的表单。我建议使用[Tastypie](http://django-tastypie.readthedocs.org/en/latest/index.html)创建 REST 端点。然后你需要做 AJAX 调用来获取你的表单。我会推荐使用[jQuery](http://api.jquery.com/jQuery.ajax/)。

如果你更喜欢更简单的东西。您总是可以使用隐藏的表单字段，然后使用[jQuery](http://jquery.com/)操作 DOM 。

# javascript - 在 Chrome 的控制台中显示控制字符？

> ID：12792732
> 
> 赞同：5
> 
> 时间：2012-10-09T04:17:04.723
> 
> 标签：javascript, google-chrome, console

有什么办法可以强制 Chrome 的 JS 控制台像 Firefox 一样显示换行符？

**铬合金：**

![在此处输入图像描述](../Images/3e6ac56097707c680728d79fd87ce8fe.png)

**火狐：**

![在此处输入图像描述](../Images/874a5c9b21b0f3ea1bfc24809e7f7187.png)

可能是某个地方的隐藏开关？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T05:18:33.297

您可以[`encodeURI`](http://www.w3schools.com/jsref/jsref_encodeuri.asp)用于显示隐藏的东西。

像这样的东西`encodeURI("a\nb")`而不是`"a\nb"`.

![Chrome 编码URI](../Images/8d84954ae015ee89a6f20b2539151085.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T22:46:12.023

在 node.js 中，[`require("util").inspect`](http://nodejs.org/api/util.html#util_util_inspect_object_showhidden_depth_colors)做一些非常相似的事情。我还没有找到等效的浏览器，但幸运的是[node.js 实现](https://github.com/joyent/node/blob/19d29aa0e8136cba87ab6bf1649b91b687e31a7a/lib/util.js#L308)相当简单：

```
JSON.stringify(value)
    .replace(/^"|"$/g, '')
    .replace(/'/g, "\\'")
    .replace(/\\"/g, '"')
; 
```

在你的情况下，`JSON.stringify(value)`应该工作。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T04:22:38.093

You can try this way

```
var x = 'a\\nb'; 
```

EDIT:

You can use hexadecimal character in string.

```
\ = '\u005C'
> var x = 'a\u005Cnb';
> x
<- "a\nb"
> x === "a\nb" is false.
> x === "a\\nb" is true or x === 'a\u005Cnb' is true. 
```

You can take a look at links.

[http://mathiasbynens.be/notes/javascript-escapes](http://mathiasbynens.be/notes/javascript-escapes) http://code.cside.com/3rdpage/us/javaUnicode/converter.html

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-11T12:22:19.877

您可以对值进行字符串化以获取这些不可见字符：

```
> JSON.stringify("a\nb")
<- ""a\nb"" 
```

# java - 如何降低以下代码的“循环复杂度”

> ID：12792736
> 
> 赞同：6
> 
> 时间：2012-10-09T04:17:29.337
> 
> 标签：java, code-complexity

我想知道如何降低以下代码的循环复杂度，如果这甚至是我应该担心的事情。

请参考方法 ValuePojo.getSomething() （请不要担心变量命名，为了清楚起见，本问题已重新编写）

```
public class ValuePojo
{
    private ValueTypeEnum type;

    private BigDecimal    value1;

    private BigDecimal    value2;

    private BigDecimal    value3;

    public ValuePojo()
    {
        super();
    }

    /**
     * This method reports as "HIGH Cyclomatic Complexity"
     * 
     * @return
     */
    public BigDecimal getSomething()
    {
        if (this.type == null)
        {
            return null;
        }

        switch (this.type)
        {
            case TYPE_A:
            case TYPE_B:
            case TYPE_C:
            case TYPE_D:
                return this.value1;

            case TYPE_E:
            case TYPE_F:
            case TYPE_G:
            case TYPE_H:
                return this.value2;

            case TYPE_I:
            case TYPE_J:
                return this.value3;
        }

        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T05:01:19.453

如果确实需要降低圈复杂度，可以考虑使用 Map。显然，在您的实现中，它应该只被创建和初始化一次。

```
 public BigDecimal getSomething() {
      if (this.type == null) {
          return null;
      }
      Map<Type,BigDecimal> map = new HashMap<Type,BigDecimal>();
      map.put(TYPE_A, value1);
      map.put(TYPE_B, value1);
      map.put(TYPE_C, value1);
      map.put(TYPE_D, value1);
      map.put(TYPE_E, value2);
      map.put(TYPE_F, value2);
      map.put(TYPE_G, value2);
      map.put(TYPE_H, value2);
      map.put(TYPE_I, value3);
      map.put(TYPE_J, value3);

      return map.get(type);
  } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-09T04:32:07.830

圈复杂度由代码中执行分支的数量决定。`if - else`块、`switch`语句——所有这些都增加了代码的循环复杂性，也增加了确保适当的代码覆盖率所需的测试用例的数量。

为了降低代码的复杂性，我建议您删除`case`没有定义行为的语句，并将其替换为语句中的`default`行为`switch`。

这是另一个[关于](https://stackoverflow.com/questions/5853343/how-can-i-reduce-the-cyclomatic-complexity-of-this)Stack Overflow 的问题，它解决了这个问题。

# algorithm - 快速排序 - 应该首先对哪个子部分进行排序？

> ID：12792738
> 
> 赞同：9
> 
> 时间：2012-10-09T04:17:46.987
> 
> 标签：algorithm, sorting, quicksort

我正在阅读一些关于两个递归快速排序调用的排序的文本：

> ...首先调用较小的子问题很重要，这与尾递归相结合可确保堆栈深度为 log n。

我完全不确定这意味着什么，为什么我要先在较小的子数组上调用 Quicksort？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T05:36:52.703

将快速排序视为隐式二叉树。枢轴是根，左右子树是您创建的分区。

现在考虑对这棵树进行深度优先搜索。递归调用实际上对应于对上述隐式树进行深度优先搜索。还假设树总是有较小的子树作为左孩子，所以建议实际上是在这棵树上做一个预排序。

现在假设您使用堆栈实现预排序，您只推送左子节点（但将父节点保留在堆栈中），以及何时推送右子节点（假设您保持一个状态，您知道一个节点是否有它的左孩子探索与否），你替换堆栈的顶部，而不是推动右孩子（这对应于尾递归部分）。

最大堆栈深度是最大“左深度”：即，如果您将前往左孩子的每条边标记为 1，将前往右孩子的每条边标记为 0，那么您正在查看具有最大边总和的路径（基本上您不要计算右边缘）。

现在由于左子树的元素不超过一半，因此每次向左（即遍历和标记为 1 的边）时，您将要探索的节点数减少至少一半。

因此，您看到的标记为 1 的最大边数不超过 log n。

因此，如果您总是选择较小的分区并使用尾递归，则堆栈使用量不会超过 log n。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T04:35:42.693

Some languages have tail recursion. This means that if you write f(x) { ... ... .. ... .. g(x)} then the final call, to g(x), isn't implemented with a function call at all, but with a jump, so that the final call does not use any stack space.

Quicksort splits the data to be sorted into two sections. If you always handle the shorter section first, then each call that consumes stack space has a section of data to sort that is at most half the size of the recursive call that called it. So if you start off with 10 elements to sort, the stack at its deepest will have a call sorting those 10 elements, and then a call sorting at most 5 elements, and then a call sorting at most 2 elements, and then a call sorting at most 1 element - and then, for 10 elements, the stack cannot go any deeper - the stack size is limited by the log of the data size.

If you didn't worry about this, you could end up with the stack holding a call sorting 10 elements, and then a call sorting 9 elements, and then a call sorting 8 elements, and so on, so that the stack was as deep as the number of elements to be sorted. But this can't happen with tail recursion if you sort the short sections first, because although you can split 10 elements into 1 element and 9 elements, the call sorting 9 elements is done last of all and implemented as a jump, which doesn't use any more stack space - it reuses the stack space previously used by its caller, which was just about to return anyway.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T04:35:26.427

理想情况下，该列表划分为两个大小大致相似的子列表。您首先处理哪个子列表并不重要。

但是，如果在糟糕的日子里，列表以最不平衡的方式划分，一个包含两个或三个项目的子列表，可能是四个，并且一个子列表几乎和原来的一样长。这可能是由于分区值的错误选择或恶意设计的数据造成的。想象一下，如果你先处理更大的子列表会发生什么。快速排序的第一次调用是在其堆栈帧中保存短列表的指针/索引，同时递归地为长列表调用快速排序。这也严重划分为一个非常短的列表和一个很长的列表，我们先做更长的子列表，重复......

最终，在最糟糕的最糟糕的日子里，我们将建立与原始列表长度成正比的堆栈帧。这是快速排序最坏的情况，递归调用的 O(n) 深度。（注意我们说的是快速排序的递归深度，而不是性能。）

首先做较短的子列表可以很快地摆脱它。我们仍然处理大量的小列表，与原始列表长度成比例，但现在每个列表都由浅的一两个递归调用处理。我们仍然进行 O(n) 次调用（性能），但每次调用的深度都是 O(1)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T05:15:27.717

令人惊讶的是，即使快速排序没有遇到严重不平衡的分区，甚至当实际使用 introsort 时，这也很重要。

当正在排序的容器中的值非常大时，就会出现问题（在 C++ 中）。我的意思并不是说它们指向非常大的物体，而是它们本身非常大。在这种情况下，一些（可能很多）编译器也会使递归堆栈帧变得非常大，因为它至少需要一个临时值才能进行交换。Swap 在分区内部调用，它本身不是递归的，因此您会认为快速排序递归驱动程序不需要怪物堆栈帧；不幸的是， partition 通常最终会被内联，因为它又好又短，并且不会从其他任何地方调用。

通常 20 和 40 个堆栈帧之间的差异可以忽略不计，但如果值的重量为 8kb，那么 20 和 40 个堆栈帧之间的差异可能意味着工作和堆栈溢出之间的差异，如果堆栈的大小已减小允许许多线程。

如果使用“总是递归到较小的分区”算法，堆栈不能每次超过 log [2] N 帧，其中 N 是向量中的元素数。此外，N 不能超过可用内存量除以元素的大小。所以在 32 位机器上，一个向量中只能有 2 个^(19) 8kb 元素，并且快速排序调用深度不能超过 19。

简而言之，正确编写快速排序使其堆栈使用*可预测*（只要您可以预测堆栈帧的大小）。即使在非病态的情况下，不考虑优化（以保存单个比较！）也很容易导致堆栈深度加倍，并且在病态的情况下它会变得更糟。

# r - 并行选项给出不同的结果

> ID：12792739
> 
> 赞同：3
> 
> 时间：2012-10-09T04:17:47.330
> 
> 标签：r, parallel-processing, plyr

这与我之前的问题[mclapply vs for loops for plotting: speed and scaling focus](https://stackoverflow.com/questions/12790504/mclapply-vs-for-loops-for-plotting-speed-and-scalability-focus)相关，我想我现在有三/四种方法来做同样的事情，但即使设置随机种子也会得到不同的结果。

首先...为什么结果不同...

是否`results2`并且`results3`实际上在做同样的事情？

尽管在第一个示例中未显示（如下所示）...有时 results2 比不使用该`.parrallel = TRUE`选项时花费的时间更长，这是为什么呢？

```
> rm(list=ls())
> gc()
         used (Mb) gc trigger  (Mb) max used  (Mb)
Ncells 253264 13.6    1801024  96.2  1643320  87.8
Vcells 829208  6.4   22407472 171.0 28009341 213.7
> require(ggplot2)
Loading required package: ggplot2
> require(plyr)
Loading required package: plyr
> require(foreach)
Loading required package: foreach
foreach: simple, scalable parallel programming from Revolution Analytics
Use Revolution R for scalability, fault tolerance and more.
http://www.revolutionanalytics.com
> require(doMC)
Loading required package: doMC   
Loading required package: iterators
Loading required package: multicore
> registerDoMC(cores=4)
> gc()
          used (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  409261 21.9    1440819  77.0  1643320  87.8
Vcells 1039134  8.0   17925977 136.8 28009341 213.7
> df <- expand.grid(i = 1:100, j = 1:2 , k = seq(100, 500, 100))
> params <- mapply(list, n = df[, 3], mu = df[, 1], stdev = df[,2], SIMPLIFY = F)
> ff <- function(tlist) {
+     set.seed(123)
+     n <- tlist$n
+     mu <- tlist$mu
+     stdev <- tlist$stdev
+     x1 <- c(1:n)
+     y1 <- rnorm(n,mu,stdev)
+     z1 <- data.frame(cbind(x1,y1))
+     ggplot(z1, aes(x=x1,y=y1))+
+         geom_point()+
+         labs(title=paste("n=",n,"mu=",mu, "stdev=",stdev))
+ }
> system.time(results <- llply(params, ff))
   user  system elapsed 
  5.363   0.009   5.368 
> system.time(results2 <- llply(params, ff,.parallel=TRUE))
   user  system elapsed 
  2.689   0.259   2.938 
> system.time(results3 <- mclapply(params, ff, mc.cores = 4, mc.preschedule = TRUE))
   user  system elapsed 
  7.488   0.685   2.501 
> identical(results,results2)
[1] FALSE
> identical(results,results3)
[1] FALSE
> identical(results2,results3)
[1] FALSE 
```

比较：

```
require(rbenchmark)
benchmark(results <- llply(params, ff),
          results2 <- llply(params, ff,.parallel=TRUE), 
           results3 <- mclapply(params, ff, mc.cores = 4, mc.preschedule = TRUE),
             replications=5 ) 
```

给出以下结果：

```
 test replications elapsed relative user.self sys.self user.child sys.child
 1                                          results <- llply(params, ff)            5  27.869    1.521    27.833    0.043      0.000     0.000
 2                       results2 <- llply(params, ff, .parallel = TRUE)            5 109.990    6.003     5.455    2.472     37.565     7.048
 3 results3 <- mclapply(params, ff, mc.cores = 4, mc.preschedule = TRUE)            5  18.322    1.000     1.582    1.545     42.730    10.441 
```

更奇怪的是，当进行 10 次复制而不是 5 次时......

```
 benchmark(results <- llply(params, ff),
      results2 <- llply(params, ff,.parallel=TRUE), 
      results3 <- mclapply(params, ff, mc.cores = 4, mc.preschedule = TRUE),
       replications=10 ) 
```

你得到这个：

```
 test replications elapsed relative user.self sys.self user.child sys.child
  1                                          results <- llply(params, ff)           10  55.031    1.000    54.641    0.144      0.000     0.000
  2                       results2 <- llply(params, ff, .parallel = TRUE)           10 107.801    1.959     9.877    6.045     80.022    23.062
  3 results3 <- mclapply(params, ff, mc.cores = 4, mc.preschedule = TRUE)           10 297.556    5.407     3.576    5.624     96.493    31.035 
```

这里发生了什么？

# android - 我无法使用内容提供商在 android 应用程序中更新我的电子邮件

> ID：12792743
> 
> 赞同：1
> 
> 时间：2012-10-09T04:18:31.980
> 
> 标签：android, android-contentprovider

我正在开发检索所有 android 联系人并且还可以删除和更新联系人的应用程序。一切正常的问题是当联系人没有电子邮件地址时，我无法使用我的应用程序更新它（无法从我的更新中添加电子邮件地址联系页面）。我在下面写了用过的代码。提前致谢。

```
private void updateEmaill(String id, String email) {

    ContentResolver cr = getContentResolver();

    String where = ContactsContract.Data.RAW_CONTACT_ID + " = ? AND "
            + ContactsContract.Data.MIMETYPE + " = ?";

    String[] params = new String[] { id,
            ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE };

    Cursor phoneCur = managedQuery(ContactsContract.Data.CONTENT_URI, null,
            where, params, null);

    ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();

    if ((null == phoneCur)) {

        System.out.println("we have got null value from the cursor");

    } else {

        System.out.println("phone cursor count" + phoneCur.getCount());

        ops.add(ContentProviderOperation
                .newUpdate(ContactsContract.Data.CONTENT_URI)
                .withSelection(where, params)
                .withValue(ContactsContract.CommonDataKinds.Email.ADDRESS,
                        email).build());

    }

    phoneCur.close();

    try {

        cr.applyBatch(ContactsContract.AUTHORITY, ops);

    } catch (RemoteException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (OperationApplicationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T05:26:07.663

已知 newUpdate() 仅在给定字段已存在时才有效。

作为一种解决方法，您可以使用以下一个简单的逻辑：

```
 -check if email exists for contacts
  -if it does call update
  -if it doesn't save all the fields of this contact in some variables and delete the  contact
  -use newInsert() to create a new contact with the saved fields from old contact and also the email that you need to add. 
```

# jquery - Rails 3.2.6 - .js.erb 什么都不做

> ID：12792747
> 
> 赞同：0
> 
> 时间：2012-10-09T04:19:13.053
> 
> 标签：jquery, ruby-on-rails

我有一个相当简单的演示应用程序来学习 AJAX / jQuery。

1.  在 assets/javascripts/runner.js 我有以下代码：

    ```
    $(document).ready(function() {
        $.ajaxSettings.accepts.html = $.ajaxSettings.accepts.script;

        $.ajax({
            type: "POST",
        url: "http://localhost:3000/home/index",
            data: { name: "John", age: "35" },
            dataType: 'html'
        });
    } 
    ```

2.  这正确地调用了 home/index，我在 index 操作中有以下代码：

    respond_to 做 |格式| format.js 结束

3.  这似乎正确地调用了 index.js.erb，我有：

    警报（“嗨”）；

4.  问题是警报没有出现！我可以在 FireBug 的控制台中看到我在 XHR 响应中正确地获得了“alert("hi")”，但是警报没有执行！

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T04:31:01.903

您实际上并没有处理 ajax 调用的结果。返回的 javascript 永远不会被浏览器评估。它应该更像这样：

```
$(document).ready(function() {
    $.ajaxSettings.accepts.html = $.ajaxSettings.accepts.script;

    $.ajax({
        type: "POST",
        url: "http://localhost:3000/home/index",
        data: { name: "John", age: "35" },
        dataType: 'html',
        success: function(data) {
            eval(data);  // where data is the javascript generated by home#index
        }
    });
} 
```

请记住，如果有人能够控制此返回的 javascript 的内容，您可能会将自己暴露在令人讨厌的脚本注入漏洞中。

# sql - 对视图及其基础表运行查询之间的区别

> ID：12792748
> 
> 赞同：0
> 
> 时间：2012-10-09T04:19:33.990
> 
> 标签：sql, sql-server, oracle

在视图或基础表上运行查询之间是否存在性能或其他方面的差异。

查询中可能涉及聚合、排序。

欢迎任何涉及此主题的资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T04:35:46.220

Ideally a View is just a projection on the underlying tables with optional criteria, generally used to hide certain columns or simplify the complexity involved in joining multiple tables to achieve a particular task etc., and wouldn't have any physical existence in the database. So, a query that is run on the view and a query same as the previous one run on the underlying tables perform in the same way.

# php - PHP时区问题

> ID：12792750
> 
> 赞同：0
> 
> 时间：2012-10-09T04:19:41.573
> 
> 标签：php, jquery

我在这里使用倒计时[http://keith-wood.name/countdown.html并且我已经添加了服务器时间和所有内容，但是现在有了夏令时，我的应用程序在](http://keith-wood.name/countdown.html)[http://www](http://www.artfido.com)的所有倒计时时间上增加了一个小时。 [artfido.com](http://www.artfido.com)

我尝试将服务器时间更改为不使用夏令时更新，但我的倒计时仍然增加了一个小时。

UTC 时间为 +10，但不知道如何更改为没有额外的小时。

代码示例

```
server-time.php  
<?php 
header("Cache-Control: no-cache, must-revalidate"); // HTTP/1.1 
header("Expires: Fri, 1 Jan 2010 00:00:00 GMT"); // Date in the past 
header("Content-Type: text/plain; charset=utf-8"); // MIME type 
$now = new DateTime();
echo $now->format("M j, Y H:i:s O")."\n";
?>

Countdown script
$('#defaultCountdown').countdown({
until: endAuction,
serverSync: serverTime,
timezone: +10,
format: 'DHMS',...

function serverTime() { 
var time = null; 
$.ajax({url: 'server-time.php?random=' + Math.floor(Math.random() * 1000000), 
 async: false, dataType: 'text', 
 success: function(text) { 
 time = new Date(text); 
}, error: function(http, message, exc) { 
time = new Date(); 
}}); 
return time; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:27:00.260

您以这种方式使用了代码：

```
function serverTime() {
    var time = null;
    $.ajax({url: 'cgi/server-time.php?random=' + Math.floor(Math.random() * 1000000),
        async: false, dataType: 'text',
        success: function(text) {
            time = new Date(text);
        }, error: function(http, message, exc) {
            time = new Date();
    }});
    return time;
} 
```

此函数不返回任何内容，因为 AJAX 调用是异步的。一种好方法是在成功函数中进行。我的意思是定时器的初始化。

因为，当你调用这个`serverTime()`函数时，它总是返回`null`. 它不是即时的。做一件事。调用一个函数，`startTimer(time)`并将`time`变量中的服务器时间传递给`startTimer()`函数内部，定义如下：

```
function startTimer(time)
{
    var endAuction = "";
    $(function () {
        endAuction = new Date(
            2012,
            10,
            08,
            12,
            24,
            26                                                                );
        $('#defaultCountdown8077').countdown('destroy')
        $('#defaultCountdown8077').countdown({
            until: endAuction,
            serverSync: time,
            timezone: +10,
            format: 'DHMS',
            expiryUrl: 'http://www.artfido.com'
        });
    });
} 
```

另外，`serverTime();`您在中间的某个地方打电话，绝不会有用。

### 您的 JavaScript 代码将是：

```
function initTimer() {
    var time = null;
    $.ajax({url: 'cgi/server-time.php?random=' + Math.floor(Math.random() * 1000000),
        async: false, dataType: 'text',
        success: function(text) {
            time = new Date(text);
            startTimer(time);
        }
    });
} 
```

# objective-c - 具有多个页面的 ScrollView

> ID：12792756
> 
> 赞同：0
> 
> 时间：2012-10-09T04:21:38.157
> 
> 标签：objective-c

通常，教程`UIScrollView`谈论多个页面与屏幕的大小。

从屏幕的第一页开始，第二页出现在右侧：
![Ex01](../Images/90e2b53c2f541116e5d09b52f076ebde.png)

当滚动时，第二页也会发生同样的事情：第一页和第三页出现在左侧/右侧。
![Ex02](../Images/5b6d8f0a555f360b57e616ee4674e06c.png)

这个滚动视图是“可实现的”吗？有一种方法可以使用页面但不是整个屏幕宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:37:01.430

尝试设置您的滚动视图内容大小

```
scrollView.contentSize = CGSizeMake(W, 1); 
```

请记住，“W”必须是大于滚动视图宽度的数字才能水平滚动。1 是您设置内容大小高度的位置，如果您希望它垂直滚动，您可以使“1”大于滚动视图的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T04:39:26.840

是的，您可以这样做，只需将滚动视图的大小更改为您想要的大小，内容大小为滚动视图的 (numberOfPages * width) 还启用分页

```
scrollView.pagingEnabled = YES;
scrollView.contentSize = CGSizeMake(numberOfPages * scrollView.frame.size.width, 1); 
```

有关更多想法，请参阅此[示例项目](https://github.com/ykyuen/ScrollViewWithPaging/downloads)，只需更改 xib 中的滚动视图大小 :) 希望它有所帮助 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T05:03:42.683

您需要实现一个滚动视图容器（例如 ScrollViewContainer）来处理`-hitTest:withEvent:`方法：

ScrollViewContainer.h：

```
@interface BookAlbumScrollViewContainer : UIView {
  UIScrollView * theScrollView_;
}

@property (nonatomic, retain) UIScrollView * theScrollView;

@end 
```

ScrollViewContainer.m：

```
@implementation BookAlbumScrollViewContainer

@synthesize theScrollView = theScrollView_;

//...

- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {
  UIView * child = [super hitTest:point withEvent:event];
  if (child == self)
    return self.theScrollView;
  return child;
}

@end 
```

[**这里**](https://stackoverflow.com/questions/4961386/event-handling-for-ios-how-hittestwithevent-and-pointinsidewithevent-are-r)是一个相关的 QA on`-hitTest:withEvent:`method。

设置滚动视图时，将其设置为：

```
CGFloat yourScrollViewPageWidth = 280.f;
CGRect yourScrollViewFrame = CGRectMake((320.f - yourScrollViewPageWidth) / 2.f, 0.f, yourScrollViewPageWidth, 200.f);
CGRect theScrollViewContainerFrame = CGRectMake(0.f, 0.f, 320.f, 200.f);

// Your scroll view
yourScrollView_ = [[UIScrollView alloc] initWithFrame:yourScrollViewFrame];
//...
[self.view addSubview:bookScrollView_];

// Your scroll view container to handle touches, it should be over |yourScrollView_|
theScrollViewContainer_ = [ScrollViewContainer alloc];
[theScrollViewContainer_ initWithFrame:theScrollViewContainerFrame];
[theScrollViewContainer_ setBookAlbumScrollView:yourScrollView_];
[self.view theScrollViewContainer_]; 
```

# javascript - 为什么我不能使用 jQuery 访问元素的数据属性。

> ID：12792757
> 
> 赞同：2
> 
> 时间：2012-10-09T04:21:59.810
> 
> 标签：javascript, jquery

我有以下 HTML：

```
 <div  class="button disabled dialogLink"
        id="edit"  
        data-action="Edit" >
        <div class="sprite-blank" ></div>
    </div> 
```

这个 javascript

```
$('.dialogLink')
    .click(function () {
        adminDialog(this);
        return false;
    });

function adminDialog($link) {
    "use strict";
        link = {
            action: $link.data('action') || '' 
```

我收到一条错误消息

```
Uncaught TypeError: Object #<HTMLDivElement> has no method 'data' 
```

有谁知道我做错了什么。看起来很简单的代码，所以我不明白出了什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T04:25:49.277

您应该首先创建一个 jQuery 对象以使用 jQuery 对象的方法，例如`data`method. 您可以使用 `dataset`对象：

```
$link.dataset.action 
```

或 jQuery`data`方法：

```
$($link).data('action') 
```

# apache - Foursquare OAuth2.0 请求在 Apache & PHP 升级后不起作用

> ID：12792758
> 
> 赞同：1
> 
> 时间：2012-10-09T04:22:09.893
> 
> 标签：apache, foursquare

我有从 Foursquare 获得授权的foursquare 应用程序。它曾经可以工作，但在服务器升级后，它在 30 秒后超时停止工作。

我们使用 Apache 2.2.6 和 PHP 5.2.12 并将其升级到 Apache 2.2.22 和 PHP 5.3.17。我们根据 5.3.17 更新了 php 代码，这些代码主要是 db 的东西。无论如何，我们的 Foursquare 服务器端应用程序从那以后就无法正常工作了。我们在其他具有旧设置的旧服务器上尝试了它，然后它就可以工作了。

具体来说，当用户尝试使用访问令牌时，我们的应用程序的授权请求不会返回访问令牌。

我们使用下面的这种格式来提出请求。

`https://foursquare.com/oauth2/access_token ?client_id=YOUR_CLIENT_ID &client_secret=YOUR_CLIENT_SECRET &grant_type=authorization_code &redirect_uri=YOUR_REGISTERED_REDIRECT_URI &code=CODE`

相应地填充所有值。

任何提示或线索都会有所帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:34:12.003

您可以尝试从浏览器请求 URL，并查看生成的响应。这应该为您提供有关发生错误的更多信息。

在您的浏览器中，您可以模仿用户并按照他们用来授权您的应用程序的流程进行操作。然后，您可以从 url 中获取 code 参数，并在浏览器中访问 access_token 链接以查看响应。

# javascript - 避免在 IE 中出现“此网站想要运行以下插件”

> ID：12792760
> 
> 赞同：0
> 
> 时间：2012-10-09T04:22:30.247
> 
> 标签：javascript, jquery, internet-explorer, cross-browser, add-on

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T04:32:51.543

如何避免警告？

如果您是 Web 开发人员，则应使用这些控件的更安全版本。请不要鼓励您的用户在预先批准更安全的选项时批准控件。如果您收到这些警告，您可能正在使用一些非常古老的示例代码：

*   Windows Media Player：不要使用 MediaPlayer.MediaPlayer.1 或其他旧技术。使用 wmplayer.ocx。
*   QuickTime：不要使用 QuickTimeCheckObject.QuickTimeCheck.1。相反，请使用 QuickTime.QuickTime。
*   MSXML：不要使用 MSXML 5.0。请参阅此示例代码以在 IE7 中检测正确版本的 MSXML。

取自[这里](http://blogs.msdn.com/b/ie/archive/2007/04/25/this-website-wants-to-run-the-following-add-on.aspx)。

# objective-c - Is GDataXML supported by apple

> ID：12792761
> 
> 赞同：1
> 
> 时间：2012-10-09T04:22:32.063
> 
> 标签：objective-c, ios, cocoa-touch, ipad, xml-parsing

Is GDataXML supported by apple ? I want to write an xml but NSXMLParser do not support writing of xml. So i thought of using third party library GDataXML but will my app be rejected due to this ? I am working on iOS 6\. And is there any library which i can use for writing xml without getting app rejected ? I used [this](http://www.raywenderlich.com/725/how-to-read-and-write-xml-documents-with-gdataxml) and [this](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project) for reference .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T04:32:52.180

在[GDataXML GitHub 页面上](https://github.com/neonichu/GDataXML)，它这样说：

> 目前，只有我自己的应用 Republizierer，尚未提交到 App Store。在这个时间点上，我不能**保证这个库**在你的 iOS 应用程序中使用是安全的。

所以也许你应该推迟在你的应用程序中使用它。

# oracle - How to return a empty cursor from a stored procedure?

> ID：12792768
> 
> 赞同：6
> 
> 时间：2012-10-09T04:23:08.810
> 
> 标签：oracle, stored-procedures, ref-cursor

I have `OUT` parameter of a stored procedure as a `REF CURSOR`. Based on a particular condition, I would want to either return a result set (already implemented).

But how do I return an empty cursor when the condition fails? Without raising an exception? Just pasting pseudo code:

```
IF condition = true THEN
   OPEN OUT_CUR FOR 
   Select Some query

ELSE

   Return empty OUT_CUR

END IF 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-09T04:33:24.877

你可以试试这个

```
IF condition = true THEN
   OPEN OUT_CUR FOR 
   Select Some query;
ELSE
   OPEN OUT_CUR FOR 
       Select * from mtable where 1=2;
END IF
return OUT_CUR; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-28T15:32:50.573

```
IF condition = true THEN
   OPEN OUT_CUR FOR 
   Select Some query

ELSE

    OPEN OUT_CUR FOR select * from unnest(array[1,2]) arr where  false 

END IF 
```

# php - PHP foreach 循环，独一无二getElementById 的 id 我感兴趣的是下拉列表中的字符串中的 $option_value['price']，而不是 . 使用 .value 返回后者。我有在 foreach() 循环中创建的选择菜单。下拉菜单将保留价格选项。我正在尝试为每个产品提供它自己的 ID，以便我可以使用 javascript onChange() 函数来更新屏幕上的价格。选择标签如下所示： <select name="option[<?php echo</h1>
<blockquote>
        <p>ID：12792770</p>
        <p>赞同：0</p>
        <p>时间：2012-10-09T04:23:17.343</p>
        <p>标签：php, javascript, drop-down-menu, getelementbyid, unique-id</p>
        </blockquote>

            <hr/>
            <h2>回答 #1</h2>
            <blockquote>
            <p>赞同：3</p>
            <p>时间：2012-10-09T04:28:42.933</p>
            </blockquote>

<p>改变 ：</p>

<pre>//jsfiddle.net/FCnUQ/ （请注意，如果未选择任何选项，则为selectedIndex。-1） 您根本不需要使用getElementById()，因为您已经引用了元素el. 回答 #3 赞同：1 时间：2012-10-09T04:29:14.487 试试这个代码，document.getElementById(id).value而不是document.getElementById(id).text function getIt(id) { a = document.getElementById(id).value; alert(a); } 回答 #4 赞同：0 时间：2012-10-09T04:34:31.237 当你像这样传递它时，getit(this)你应该像这样编写代码 function getIt(el) { var id = el.id; a = document.getElementById(id).value; alert(el.value); //you can directly alert like this }<code>  a = document.getElementById(id).text;
</code></pre>

<p>至：</p>

<pre><code>  a = document.getElementById(id).value;
</code></pre>

<p>这将提醒所选选项的值。</p>

            <hr/>
            <h2>回答 #2</h2>
            <blockquote>
            <p>赞同：1</p>
            <p>时间：2012-10-09T04:45:33.540</p>
            </blockquote>

<blockquote>
  <p><em>“有没有办法让我获得下拉列表中显示的文本 ($xx.xx)，而不是值？”</em></p>
</blockquote>

<p>我认为这就是你要找的：</p>

<pre><code>function getIt(el) {
   var a = el.options[el.selectedIndex].text;
   alert(a);
}
</code></pre>

<p><code>el.selectedIndex</code>显然，为您提供当前所选选项的索引，您可以将其用作选项集合的索引<code>el.options</code>，然后获取该选项的<code>text</code>. 该<code>text</code>属性属于每个选项，而不是选择。</p>

<p>演示：http: <a href=" http:="" jsfiddle.net="" fcnuq="" "="" rel="nofollow"></select>

# html - Rails: Static html content in database

> ID：12792772
> 
> 赞同：0
> 
> 时间：2012-10-09T04:24:29.653
> 
> 标签：html, ruby-on-rails, database, models

in my Rails application, a user can refer to a "sample" list of policies and create their own policies based on these samples. I am currently storing the list of "sample" policies and their associated textual HTML descriptions in a **SamplePolicy** model with a column name *Content*. Users can read about these sample policies and then create their own versions which are in turn stored in another model called **Policy** which holds a one-to-many relation with **SamplePolicy** model. See database structure below:

```
SamplePolicy
--------------------------------------------------------------
|  ID  |  Name                |  Content | 
--------------------------------------------------------------
|   1  |    Privacy           | <html>Sample..</html>
--------------------------------------------------------------
|   2  |    Copyright policy  |  <html> Sample....</html>
--------------------------------------------------------------

Policy
---------------------------------------------------------------------------------------
|  ID  |  Name                       |        Content               | samplepolicy_id
---------------------------------------------------------------------------------------
|   1  |   Custom Privacy            | <html>My Sample..</html>     |   1
--------------------------------------------------------------------------------------
|   2  |   Custom Copyright policy  |  <html> My Sample....</html> |   2
-------------------------------------------------------------------------------------- 
```

Question is:

Is this the best way to structure my models? Since the list of "Sample policies" does not change, I guess I can use "seeds.rb" to populate my application but then I will not be able to refer to these sample policies in my **Policy** model (See foreign key samplepolicy_id). But then again, I am not sure about storing HTML content in my database.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:13:39.077

如果您有多个示例策略，我认为单独的模型既干净又简单。存储 HTML 很好。您可以使用纺织品，以便用户可以更轻松地将样本复制和编辑到他们自己的策略中。

如果您确实存储 HTML，则只需在渲染时使用 html_safe。

# c - 我可以将 extern 用于宏吗？

> ID：12792774
> 
> 赞同：5
> 
> 时间：2012-10-09T04:25:13.803
> 
> 标签：c, macros, extern

我知道`extern`默认情况下函数在 C 中标记，也可以`extern`在 C 中使用变量（如果它在其他文件中初始化或者如果我编写`extern int foo = 1;`）。但是我可以使用`extern`C 宏，因为它们的行为类似于函数吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-09T04:28:43.833

除非在 C99 中发生了根本性的变化，否则预处理器宏没有存储类。您不能在不同时定义它们的情况下声明它们。编译器甚至不会以与处理其他标识符相同的方式处理它们——它们是一种纯文本翻译，（至少在概念上）甚至在编译器尝试任何类型的名称查找之前就发生了。

# python - 将基于 arcpy 的 python 脚本转换为 OGR 以实现半自动元数据创建

> ID：12792775
> 
> 赞同：2
> 
> 时间：2012-10-09T04:25:37.143
> 
> 标签：python, gis, qgis, arcpy, osgeo

我创建了一个脚本来使用基于 arcpy 的编码自动生成基本 ANZLIC 标准元数据。谁能帮我把它转换成 OGR/GDAL python？这样它就可以在 QGIS 中运行并处理所有类型的矢量和栅格数据。

![在此处输入图像描述](../Images/8d48cc1a498077c4ff97e885b61d51bc.png)

下面是对重要部分进行一些注释的工作代码。

```
import os, xml, arcpy, shutil, datetime
from xml.etree import ElementTree as et 
```

添加/替换为以下内容

```
import osgeo, os
from osgeo import ogr 
```

...

```
Count=0
DECLARATION = """<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type='text/xsl' href='ANZMeta.xsl'?>\n"""

RootDirectory=arcpy.GetParameterAsText(0)
LogDirectory=arcpy.GetParameterAsText(1)
Metadata_Template=arcpy.GetParameterAsText(2)
ANZMeta=arcpy.GetParameterAsText(3)

#RootDirectory=os.getcwd()
#LogDirectory=os.getcwd()

currentPath=RootDirectory
arcpy.env.workspace = RootDirectory
root = Tk()
InputStrings = StringVar()
Entry(root, textvariable=InputStrings).pack()

Generated_XMLs=LogDirectory+'\GeneratedXML_LOG.txt'
f = open(Generated_XMLs, 'a')
f.write("Log of Metadata Creation Process - Update: "+str(datetime.datetime.now())+"\n")
f.close()

for root, dirs, files in os.walk(RootDirectory, topdown=False):
    #print root, dirs
    for directory in dirs:
        try:
            currentPath=os.path.join(root,directory)
        except:
            pass
        os.chdir(currentPath)
        arcpy.env.workspace = currentPath
        print currentPath
#def Create_xml(currentPath): 
```

在这里，我们将需要一个类似的调用来列出 ogr 可访问的数据集（ogrinfo 似乎只列出文件的属性 - 有没有类似于 arcpy.List 的东西......）

```
 FileList = arcpy.ListFeatureClasses()
        zone="_Zone"

        for File in FileList:
            Count+=1
            FileDesc_obj = arcpy.Describe(File)
            FileNm=FileDesc_obj.file 
```

上面的代码需要调用 osgeo.ogr.Open(File) 对吧？

```
 check_meta=os.listdir(currentPath)
            existingXML=FileNm[:FileNm.find('.')]
            existingExtension=FileNm[FileNm.find('.'):]
            print "XML: "+existingXML
            #print check_meta
            #if  existingXML+'.xml' in check_meta:
            #newMetaFile='new'
            for f in check_meta:
                if f.startswith(existingXML) and f.endswith('.xml'):
                    print "exists, file name:", f
                    newMetaFile=FileNm+"_2012Metadata.xml"
                    try:
                        shutil.copy2(f, newMetaFile)
                    except:
                        pass
                    break
                else:
                    #print "Does not exist"
                    newMetaFile=FileNm+"_BaseMetadata.xml"

            print "New meta file: "+newMetaFile+ " for: "+File
            if newMetaFile.endswith('_BaseMetadata.xml'):
                    metafile=Metadata_Template
                    shutil.copy2(metafile,newMetaFile)
                    print "copied: "+metafile

            else:
                    shutil.copy2(Metadata_Template, newMetaFile)
                    shutil.copy2(ANZMeta, 'ANZMeta.xsl')

            print "Parsing meta file: "+newMetaFile
            tree=et.parse(newMetaFile)
            print "Processing: "+str(File)

            # Update following info only if no old metadata was found

            # Update all XML files with following data
            for node in tree.findall('.//procstep/srcused'):
                node.text = str(currentPath+"\\"+existingXML+".xml")

            dt=str(datetime.datetime.now())
            for node in tree.findall('.//procstep/date'):
                node.text = str(dt[:10])
            for node in tree.findall('.//procstep/time'):
                node.text = str(dt[11:13]+dt[16:19])
            for node in tree.findall('.//metd/date'):
                node.text = str(dt[:10]) 
```

以下需要为osgeo重写...

```
 for node in tree.findall('.//northbc'):
                node.text = str(FileDesc_obj.extent.YMax)
            for node in tree.findall('.//southbc'):
                node.text = str(FileDesc_obj.extent.YMin)
            for node in tree.findall('.//westbc'):
                node.text = str(FileDesc_obj.extent.XMin)
            for node in tree.findall('.//eastbc'):
                node.text = str(FileDesc_obj.extent.XMax)

            for node in tree.findall('.//nondig/formname'):
                node.text = "File: "+str(os.getcwd()+"\\"+File)

            for node in tree.findall('.//native/digform/formname'):
                node.text = "Type: "+str(FileDesc_obj.featureType)
            for node in tree.findall('.//avlform/nondig/formname'):
                node.text = "Ext: "+str(FileDesc_obj.extension)
            for node in tree.findall('.//avlform/digform/formname'):
                size= str(int(os.path.getsize(currentPath+"\\"+File))/int(1024))+" KB"
                node.text = "Size: "+size
                print size
            for node in tree.findall('.//theme'):
                node.text = str(FileDesc_obj.spatialReference.name +" ; EPSG: "+str(FileDesc_obj.spatialReference.factoryCode))
                print str(FileDesc_obj.spatialReference.name +" ; EPSG: "+str(FileDesc_obj.spatialReference.factoryCode))
            #print node.text
            projection_info=[]
            Zone=FileDesc_obj.spatialReference.name

            if "GCS" in str(FileDesc_obj.spatialReference.name):
                projection_info=[FileDesc_obj.spatialReference.GCSName, FileDesc_obj.spatialReference.angularUnitName, FileDesc_obj.spatialReference.datumName, FileDesc_obj.spatialReference.spheroidName]
                #print "Geographic Coordinate system"
            else:
                projection_info=[FileDesc_obj.spatialReference.datumName, FileDesc_obj.spatialReference.spheroidName, FileDesc_obj.spatialReference.angularUnitName, Zone[Zone.rfind(zone)-3:]]
                #print "Projected Coordinate system"
            x=0
            for node in tree.findall('.//spdom'):
                for node2 in node.findall('.//keyword'):
                    #print node2.text
                    node2.text = str(projection_info[x])
                    #print node2.text
                    x=x+1

            tree.write(newMetaFile)

            # CODE to add declaration back into xml (sometimes required)
##            s = open(currentPath+"\\"+newMetaFile).read()
##            s = s.replace('<anzmeta>', DECLARATION+'<anzmeta>')
##            #s = s.replace('P.O. Box 1616', 'P.O. Box 573')
##            f = open(currentPath+"\\"+newMetaFile, 'w')
##            f.write(s)
##            f.close()

            f = open(Generated_XMLs, 'a')
            f.write(str(Count)+": "+File+"; "+newMetaFile+"; "+currentPath+";"+existingXML+"\n")
            f.close() 
```

我看到我可以使用以下内容

```
dataSource=osgeo.ogr.Open(fn)
layer = dataSource.GetLayer(0)
projection = layer.GetSpatialRef() #Get spatial reference
feature = layer.GetFeature(0)
extent=layer.GetExtent()
numFeatures=layer.GetFeatureCount() 
```

# javascript - 用jquery比较两个元素，根据结果更改类

> ID：12792780
> 
> 赞同：0
> 
> 时间：2012-10-09T04:26:09.187
> 
> 标签：javascript, jquery, html

我正在尝试从数据库中获取结果，将其插入`<li>`并突出显示我从这两个 HTML`<li>`元素中获得的两个值中的较大者。我做了一个[jsfiddle](http://jsfiddle.net/zachs/syKWz/3/)，但不确定如何根据比较两个值的结果`addClass()`来更改。`<li>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T04:45:05.533

**小提琴**

[http://jsfiddle.net/syKWz/6/](http://jsfiddle.net/syKWz/6/)

**固定的**

*   css 类`li.leader`，无效的 7 位颜色
*   逻辑应该将`leader`&添加`follower`到比较对`li`

**代码**

```
$(function() {
    var val1 = parseInt($('.leader1').text(), 10);
    var val2 = parseInt($('.leader2').text(), 10);
    if(val1 > val2) {
        $('.leader1').addClass('leader'); 
        $('.leader2').addClass('follower');
    } else {
        $('.leader1').addClass('follower'); 
        $('.leader2').addClass('leader');
    }
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T04:29:50.517

这是我所做的：

```
$(function()
{
      var val1 = parseInt($('.leader1').text(), 10);
      var val2 = parseInt($('.leader2').text(), 10);
      if(val1 > val2){
        **$('.leader1').attr('class','.li.leader');** 
      }
      else{
            **$('.leader2').attr('class','.li.follower');**
      }
 }
 ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T04:31:44.397

`toggleClass`这是一个使用接受函数作为参数的签名的示例。

```
$(function() {
    $("li").toggleClass(function() {
        if(parseInt($(this).text(), 10) >
           parseInt($(this).siblings().text(), 10)) {
               return "leader";
           } else {
               return "follower";
           }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T04:33:23.753

试试这个

```
$(function()
{
  var val1 = parseInt($('.leader1').text(), 10);
  var val2 = parseInt($('.leader2').text(), 10);
  if(val1 > val2){
    $('.leader1').addClass('leader'); 
  }
    else{
        $('.leader2').addClass('follower');
   }
} 
```

);

jsfiddle：http: [//jsfiddle.net/syKWz/5/](http://jsfiddle.net/syKWz/5/)

# selenium-webdriver - 如何为 Flex 应用程序编写 selenium webdriver 自动化脚本

> ID：12792783
> 
> 赞同：4
> 
> 时间：2012-10-09T04:26:37.173
> 
> 标签：selenium-webdriver

我正在使用 Selenium-Web 驱动程序为 Flex 应用程序编写自动化脚本，但我不知道确切的步骤和为 Flex 应用程序捕获的 id。我已经看了好几次，但我无法得到任何确切的解决方案和答案。

请让我知道使用任何工具或从 Selenium IDE 编写自动化脚本和捕获 id 的明确步骤。

目前他们通过使用应用程序 URL 只为我提供了应用程序 URL，我只需要使用 Web 驱动程序编写脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:44:01.837

虽然这只适用于 Selenium 1（不是 webdriver），但请看一下 Flex Monkey：

[http://www.gorillalogic.com/testing-tools/flexmonkium](http://www.gorillalogic.com/testing-tools/flexmonkium)

安装控制台，然后启动 selenium 服务器，加载 zip 文件中提供的用户扩展（也可在下载页面上找到）。

如果您打开您正在测试的页面，然后打开控制台，控制台应该会指示它已连接 - 然后您将在 selenium IDE 中看到操作。

如果没有，您需要使用适当的 SWC 项目部署被测应用程序，以便 Flex Monkey 识别页面上的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T15:59:13.527

据我所知，您无法使用 webdriver 自动化 Flex Web 应用程序（至少是简单的方法）。您可以使用 Selenium RC 来完成，将 FlexUISelenium 扩展添加到 RC 并使用 Flex 库编译应用程序。

我听说过使用 flex 处理编写自己的 javascript 方法，但我没有尝试（很快就会调查）。 [检查此链接。](http://www.intexsoft.com/blog/item/21-automation-of-flex-applications.html)

但是我确实希望我错了，因为我现在正面临这个问题；）

# c# - 如何在 EF 5 中使用具有公共基类的多个 DbSet？

> ID：12792790
> 
> 赞同：4
> 
> 时间：2012-10-09T04:27:01.727
> 
> 标签：c#, entity-framework

我有 2 个 POCO 课程：

```
class Email: Base
{
   public int SomeProperty { get; set; } 
}

class Photo: Base
{
   public int SomeOtherProperty { get; set; } 
} 
```

和一个基类

```
abstract class Base
{
     public DateTime DateCreated { get; set; }
} 
```

这是我的上下文定义：

```
public class EntitiesContext : DbContext
{
    public DbSet<Email> Emails { get; set; }
    public DbSet<Photo> Photos { get; set; }
} 
```

当然这里的这些类只是为了举例，事情要复杂得多。

基类仅旨在为每个表提供通用属性 - 修改日期、状态等。我相信我使用 Table-Per-Type 方法。

**问题：**我有一些需要针对每个表运行的通用业务逻辑（例如，计算每种类型的未处理项目）。**我需要一种方法来遍历一组具有公共基类的表。**我希望做这样的事情：

```
private void GoThroughAllTables(Action<DbSet<Base>> fnProcess, bool needSave)
{
    using (var db = new EntitiesContext())
    {
        fnProcess(db.Emails);
        fnProcess(db.Photos);

        if (needSave == true)
        {
            db.SaveChanges();
        }
    }
}

public IEnumerable<QueueStatus> GetQueueStatus()
{
    var res = new List<QueueStatus>();

    GoThroughAllTables((set) =>
    {
        res.Add(new QueueStatus
        {
            Count = set.Cast<Base>().Count(x => x.DateCreated > someDate),
        });
    }, false);

    return res;
}

public void DeleteFailedItems()
{
    GoThroughAllTables((set) =>
    {
        set.Cast<Base>().Remove(x => x.DateCreated > someDate);
    }, true);

    return res;
} 
```

这不会编译：

```
fnProcess(db.Emails); 
```

> 参数 1：无法从 'System.Data.Entity.DbSet|Email|' 转换 到 'System.Data.Entity.DbSet|Base|'

传递非类型化 DbSet 将不起作用，因为 Cast 将失败。

所以我不确定我还能尝试什么。有什么建议么？

# php - 如何配置页面搜索外部布局代码？

> ID：12792791
> 
> 赞同：0
> 
> 时间：2012-10-09T04:27:15.690
> 
> 标签：php, templates, layout, external

我正在寻找让我的页面从外部模板页面搜索页面布局的方法。请看下面的例子。

```
<head>
<title></title>
</head>
<body>

<search for header, css, layout, etc from external page>

Page contents

<search for footer>

</body> 
```

有没有办法使用 PHP 或 HTML 来做到这一点？我希望能够编辑所有页面的布局，而不必逐页进行。我欢迎任何其他方式来达到相同的效果，只要它适用于所有浏览器。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T04:32:46.597

这正是 PHP 的用途。PHP 脚本可以使用该`include`语句包含另一个脚本的内容。

因此，应用程序中的每个页面都可以有一个相关的 PHP 脚本来生成内容，并包含`footer.php`在页脚布局中。这样，当您更改`footer.php`所有使用它的页面时，将自动获取更改。

你不能用纯 HTML 做到这一点，但你可以用一些 javascript 和 Ajax。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T04:56:00.583

就像安德鲁说的那样，使用[include](http://php.net/manual/en/function.include.php) s。我将设置 2 个基本示例。

* * *

最简单的，有多个由主文件调用的布局文件：

header.php：

```
<div id="header">
    Menu can go here.
    <?php echo 'I make all my files .php, so they can use PHP functions if needed.'; ?>
</div> 
```

页脚.php

```
<div id="footer">
    <a href="#">Footer Link</a>
</div> 
```

索引.php

```
<html>
    <head></head>
    <body>
        <?php include('/path/to/header.php'); ?>
        Specific index.php content here.
        <?php include('/path/to/footer.php'); ?>
    </body>
</html> 
```

* * *

另一种选择是拥有一个 PHP 文件，其中包含函数中所有不同的布局元素。我喜欢这个的原因是因为你可以包含一个文件，然后为不同的部分调用特定的函数。这也可以用于传递变量，如页面标题。

布局.php

```
<?php
function makeHeader($title) {
    return 'My title is: '.$title;
}

function makeFooter() {
    $html = '
        <div id="footer">
            <a href="#">Footer Link</a>
        </div>
    ';
    return $html;
}
?> 
```

索引.php

```
<?php include('/path/to/include.php'); ?>
<html>
    <head></head>
    <body>
        <?php echo makeHeader('Page Title'); ?>
        Specific index.php content here.
        <?php echo makeFooter(); ?>
    </body>
</html> 
```

* * *

只需确保`no http://www.`在包含文件时使用相对路径 ( )。这将允许变量和函数顺利转移。最简单的方法是使用 PHP 变量`$_SERVER['DOCUMENT_ROOT']`，因此如果您有一个文件[http://mysite.com/includes/layout.php](http://mysite.com/includes/layout.php)，`include($_SERVER['DOCUMENT_ROOT'].'/includes/layout.php')`无论您包含的文件位于何处，都可以包含它。

# scheme - 在Scheme中组合一个间隔数字列表

> ID：12792797
> 
> 赞同：1
> 
> 时间：2012-10-09T04:27:56.833
> 
> 标签：scheme

我有一个函数，它接受一个数字，比如 36，然后把它倒过来说

```
'（6 3）
```

有没有办法把 6 3 组合成一个数字？

这是我编写的代码。

```
    （定义（数字-> rdigits 数字）
      (如果 (rdigits (/ (- num (mod num 10)) 10)))))

    （定义可逆？
      (λ (n)
        （条件
          [（空？n）#f]
          [else (odd? (+ n (list (number->rdigits n))))])))

```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:38:56.953

您可以使用迭代函数来执行此操作，该函数依次获取列表的每个元素，并累积一个结果。例如：

```
(define (make-number lst)
  (define (make a lst)
     (if (null? lst)
         a
         (make (+ (* 10 a) (car lst)) (cdr lst))))
  (make 0 lst))

(display (make-number '(6 3))) 
```

该`make`函数使用累加器`a`和 in 的其余数字`lst`一步一步地建立最终结果：

```
a = 0
a = 0*10 + 6 = 6
a = 6*10 + 3 = 63 
```

如果您的列表中有更多数字，这将继续：

```
a = 63*10 + 5 = 635
a = 635*10 + 9 = 6359 
```

* * *

A less efficient implementation that uses a single function could be as follows:

```
(define (make-number lst)
  (if (null? lst)
      0
      (+ (* (expt 10 (length (cdr lst))) (car lst)) (make-number (cdr lst))))) 
```

This function needs to calculate the `length` of the remainder of the list for each iteration, as well as calling the `expt` function repeatedly. Also, this implementation is not properly tail recursive so it builds up multiple stack frames during execution before unwinding them all after it reaches its maximum recursion depth.

# php - 如何在name =“admin [email]”的jquery ajax中发布二维数组？

> ID：12792801
> 
> 赞同：1
> 
> 时间：2012-10-09T04:28:32.490
> 
> 标签：php, jquery

```
<form enctype="multipart/form-data" method="post" name="settingsForm" id="settingsForm">
        Admin Name: <input type="text" value="Vipul Sharma" name="admin[admin_name]" id="admin_name"><br>
        Admin Email: <input type="text" value="vsharma1@seasiaconsulting.com" name="admin[admin_email]" id="admin_email"><br>
        Site Logo: <input type="file" name="site[logo]" id="site_logo"><img width="150px" height="100px" src="http://localhost/grublies/public/images/Atomic-Bomb-Explosion-600x450.jpg"><br>
        Records Per Page in user side: <input type="text" value="12" name="admin[rpp_user]" id="rpp_user"><br>
        Records Per Page in admin side: <input type="text" value="15" name="admin[rpp_admin]" id="rpp_admin"><br>
        Site Address: <textarea name="admin[site_address]" id="site_address">C 136</textarea><br> <input type="submit" value="Submit" id="" name=""> </form> 
```

如果我在 php 中提交表单后使用 post 方法，那么它会创建一个像这样的数组

```
Array
(
    [admin] => Array
        (
            [admin_name] => Vipul Sharma
            [admin_email] => vsharma1@seasiaconsulting.com
            [rpp_user] => 12
            [rpp_admin] => 15
            [site_address] => C 136
        )

) 
```

但我希望通过 jQuery ajax 发布相同的数组，但不幸的是它考虑 admin[admin_name] 作为变量。我使用了 jQuery 序列化，它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T06:44:10.823

我认为这会对您有所帮助我已经更改了您 HTML 中的一些属性，请仔细查看表单提交

```
<html>
    <script src="jquery-1.7.2.js"></script> 
<head>
</head>
<body>
    <div id="mainfomr">
<form enctype="multipart/form-data" method="post" name="settingsForm" id="settingsForm">
        Admin Name: <input type="text" value="Vipul Sharma" name="admin[admin_name]" id="admin_name"><br>
        Admin Email: <input type="text" value="vsharma1@seasiaconsulting.com" name="admin[admin_email]" id="admin_email"><br>
        Site Logo: <input type="file" name="site[logo]" id="site_logo"><br>
        Records Per Page in user side: <input type="text" value="12" name="admin[rpp_user]" id="rpp_user"><br>
        Records Per Page in admin side: <input type="text" value="15" name="admin[rpp_admin]" id="rpp_admin"><br>
        Site Address: <textarea name="admin[site_address]" id="site_address">C 136</textarea><br> <input type="button" value="Submit" id="formsubmit" name=""> </form>
</body>
<script>
    $("#mainfomr").on("click", "#formsubmit", function(event){

        var order = $("#settingsForm").serialize()
     $.post("yourphpfile.php",order, function(data){

     });
    });
    </script>
</html> 
```

# android - 关闭应用程序后显示最后查看的页面

> ID：12792811
> 
> 赞同：2
> 
> 时间：2012-10-09T04:29:31.320
> 
> 标签：android, android-intent

我是android新手，在我的第一个应用程序中遇到了一些问题。我在手机上安装了应用程序，但是当我再次关闭应用程序（使用手机的关闭按钮）后，当我重新打开应用程序时，上次启动时最后打开的页面再次显示.我很困惑..谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T04:46:31.010

当您创建活动时，如下所示

```
 @Override
protected void onCreate(Bundle savedInstanceState) 
    {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
            // Your stuffs
     startActivity(new Intent(present_activity.this, Next_Acitivity.class));
     finish();
} 
```

当您将旧活动转移到新活动时，调用此`finish()`方法以完成旧活动。

`onKeyDown`当您单击后退按钮时，应使用方法完成或关闭活动。

```
 @Override
public boolean onKeyDown(int keyCode, KeyEvent event) 
    {
if (keyCode == KeyEvent.KEYCODE_BACK) 
    {
finish();
}
return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T04:35:08.577

你不能在android中关闭任何应用程序它只是进入后台

你可以试试这个它会工作

写`finish();`在`startActivity(intentName);`你的代码之后

并且不要按关闭按钮按后退按钮退出

# c - Segmentation Fault 11, Looking for a flag as input - C

> ID：12792812
> 
> 赞同：0
> 
> 时间：2012-10-09T04:29:32.287
> 
> 标签：c, infinite-loop

Hello I'm working on a version of Mastermind and I'm almost done. I tried implementing a "debug mode" where it would show the answer if a flag is entered as input. My implementation has gone very wrong as it's stuck in an infinite loop. The problem is in the function getGuess. any suggestions on a fix or alternate solution will be greatly appreciated

I updated the code with suggestions from you great people. but now upon executing I run into a segmentation error 11\.

```
#include<stdio.h>
 #include<math.h>
 #include<stdlib.h>
 #include<time.h>
 #define CODELENGTH 4
 #define NUMSYMBOLS 6

void genCode (int MasterCode[])
{
int i=0;
int k;
while (i < CODELENGTH){

MasterCode[i] =rand() %NUMSYMBOLS +1;
    i++;

}//end while loop.
for ( k = 0 ; k < 4; k++ ) {
    printf( "%d ", MasterCode[ k ] );
}

printf( "\n" );
}

void printMasterCode(int MasterCode[]){
int k;
for ( k = 0 ; k < 4; k++ ) {
    printf( "%d ", MasterCode[ k ] );
    printf("\n");
}
}

void getGuess (int guess[], int argc, char **argv, int MasterCode[])
{

int number = 0;
int j;
int k;
printf( "Please enter your list of 4 numbers between 1 and 6: " );

    if (strcmp(argv[1], "-b") == 0) {
        printf("Flag -b passed\n");
        printMasterCode(MasterCode);

    }

for ( j = 0 ; j < 4; j++ ) {
    scanf( "%d", &number );
    guess[ j ] = number;
}

printf( "The guess of " );

for ( k = 0 ; k < 4; k++ ) {
    printf( "%d ", guess[ k ] );
}

printf( "\n" );
}

int main (int argc, char **argv)
{
srand ( time(NULL) );
int MasterCode[4];
int guess[ 4 ];
int exactMatch;
int closeMatch=0;
int exactResult;
int closeResult = 0;

genCode(MasterCode);
do {
    getGuess(guess, argc, argv, MasterCode);
    exactResult = checkExactMatches(MasterCode, guess, exactMatch);
    closeResult = checkCloseMatches(MasterCode, guess, closeMatch);
    printf("%d = Ending exactMatches \n", exactResult);
    printf("%d  = Ending closeMatches \n", closeResult);

} while (exactResult != CODELENGTH);

}
int checkExactMatches (int MasterCode[], int guess[], int exactMatch )
{
int woot;
for(woot=0; woot<4; woot++){

        if (MasterCode[woot] == guess[woot]){
            printf("Exact Match found \n");
            exactMatch ++;
            printf( "%d = Guess \n" , guess[ woot ]);
            printf( "%d = MasterCode \n", MasterCode[ woot ]);
            printf("%d = exactMatch \n", exactMatch);

        }// end if

        if (MasterCode[woot] != guess[woot])
            printf("No EXACT match \n");

}//end for loop

return exactMatch;
} // end checkExactMatches

int checkCloseMatches (int MasterCode[], int guess[], int closeMatch )
{
int k;
int j;
for(k=0; k<4; k++){

    for (j=0; j<4; j++) {

        if (MasterCode[j] == guess[k]){
    printf("CLOSE Match found \n");
    closeMatch ++;
    printf( "%d = Guess \n" , guess[ j ]);
    printf( "%d = MasterCode \n \n", MasterCode[ k ]);
    printf("%d = closeMatch \n \n", closeMatch);

}// end if

if (MasterCode[j] != guess[k])
    printf("No CLOSE match \n");

    }//end nested for loop
}//end for loop

return closeMatch;
} // end checkCloseMatches 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T04:40:23.897

这不是传统意义上的无限循环。您的程序要求输入第五个数字。
参数“-b”也应该在 argv[1] 中。
argv[0] 将包含程序名称。

当没有命令行参数时，段错误现在是由于 argv[1] 为 NULL。
所以应该检查

```
if (argc>1 && strcmp(argv[1],"-b")==0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T04:53:30.587

您#define CODELENGTH，然后在整个代码中使用幻数（某些地方为 4，其他地方为 5）。使用#defined 值，您将不再有无限循环（您需要输入 5 个数字才能工作）。

正如其他人所说： argv[0] 包含程序运行时的名称（或者来自 Ed S. 的更多细节 - 也许它没有）。您要查看的参数是 argv[1]。但请确保首先测试 argc，因为 argv[1] 不能保证存在！（如果 argc 为 0，则 argv[0] 也不是）。

# function - How do I return a value from the Function used to initialize an array in Mathematica

> ID：12792813
> 
> 赞同：1
> 
> 时间：2012-10-09T04:29:48.390
> 
> 标签：function, math, wolfram-mathematica

In this example I'm trying to create an Array of length 5 where each ellement contains the number of times .3 can be summed without exceeding 1\. i.e. 3 times. So each element should contain the number 3\. Here is my code:

```
Array[(
  workingCount = 0; 
  workingSum = 0; 
  done = false; 
  While[! done, 
   workingSum = workingSum + .3; 
   If[workingSum > 1, done = true; workingCount, workingCount++]
  ])
  , 5] 
```

In the 3rd to last line there I have `workingCount` without a `;` after it because it seems like in Mathematica omitting the `;` causes the value a statement resolves to to be returned.

Instead I get this:

```
{Null[1], Null[2], Null[3], Null[4], Null[5]} 
```

Why does this happen? How can I get my program to do what I want it to do? i.e. In the context of the function passed to Array to initialize it's elements, how to I use complicated multi-line functions?

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T05:13:13.263

两件事情：

首先，在 Mathematica 中能够做到这一点的一种方法是

```
Array[
 Catch[
   workingCount = 0;
   workingSum = 0;
   done = False;
   While[! done,
    workingSum = workingSum + .3;
    If[workingSum > 1,
     done = True; Throw@workingCount,
     workingCount++]]] &,
 5] 
```

其次，也是最重要的：你永远不应该在 Mathematica 中这样做！真的。

请访问例如[Mathematica 的 Stack Exchange 站点](http://mathematica.stackexchange.com)，并阅读那里的问题和答案，以掌握编程风格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T05:12:37.110

您的问题来自这样一个事实，即您正在尝试初始化数组，但在没有显式函数调用的情况下尝试这样做 - 这是您需要做的。

有关 Mathematica 中数组的文档，请参见此处： [http ://reference.wolfram.com/mathematica/ref/Array.html](http://reference.wolfram.com/mathematica/ref/Array.html)

除此之外，还有一些小错误（True 和 False 必须大写），这就是你想要做的：

```
f[x_] :=
  (
   workingCount = 0;
   workingSum = 0;
   done = False;

   While[done != True, workingSum = workingSum + 0.3; 
    If[workingSum > 1, done = True, workingCount++]
    ];
   Return[workingCount];
   );

Array[f, 5] (* The array here is generating 5 values of the return value of f[x_] *) 
```

# php - Loading a page when logging in and only when logging in

> ID：12792818
> 
> 赞同：0
> 
> 时间：2012-10-09T04:30:10.960
> 
> 标签：php, javascript, ajax

I have a login page that when you login in successfully you will be redirected to a page called `gallery.html`. However, when you type in the url with /gallery.html it will take you to the page that im trying to secure with logging in. What's the best way to use a conditional statement to prevent the page from being opened by typing in the exact URL? like a check before the page starts to load,

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T04:34:44.877

很简单，`session`在登录时使用变量，`gallery.html`如果设置了会话 ID，则将用户重定向到，否则重定向到登录页面，类似这样

```
if($_SESSION['userid']){
  header( 'Location: gallery.html' ) ;
  exit();
}elseif($_SESSION['userid'] == ''){
  header( 'Location: login.html' ) ;
  exit();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T07:04:39.000

我喜欢创建一个函数来处理这种事情：

```
function loggedin() {
    if ( isset($_SESSION['user_id']) ) {
        return true;
    } else {
        return false;
    }
} 
```

或者使用三元运算符更短的东西：

```
function loggedin() {
    return (isset($_SESSION['user_id'])) ? true : false;
} 
```

现在进行检查，只需在 if 语句中调用该函数：

```
if ( loggedin() ) {
    // only logged in users can see this
} 
```

或者

```
if ( !logged_in() ) {
    // only users who aren't looged in can see this
} 
```

比`if (!isset($_SESSION['user_id'])) {`每次都输入类似的东西要容易得多！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T04:34:24.737

如果您不想向匿名用户显示gallery.html，请在页面顶部使用此代码

```
if(!isset($_SESSION['your_user_login_id']))
{
    //redirect to home page
} 
```

此代码将阻止匿名用户查看此页面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T04:37:51.913

Use $_SESSION variable in gallery.php to check if the $_SESSION is set.

Although, I believe you will have to change the file name from gallery.html to gallery.php

```
 <?php
    if (!isset($_SESSION['secret_variable'])
    {
        echo "<br/>Error Message<br/>";
        return;
    }
    ?> 
```

Continue with the rest of the code. If the user access the gallery.php by specifying the URL, he/she will end up with `Error Message`.

The `$_SESSION['secret_variable']` should be set after you figure out that the user has a valid username and password to ensure a valid login.

Thanks.. :)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T04:41:18.480

您需要在会话中设置您的登录状态，并在您的待保护页面中检查会话。

```
 <?php 
        session_start();
        if (!isset($_SESSION['login_status'])) {
              // Add permission denied message or redirect back to the login page
         }

   ?> 
```

但是，这可以在 PHP 页面中完成，而不是在具有 .html 扩展名的页面中完成（除非您使用“AddType x-httpd-php .html”指令明确指定了 Web 服务器配置。）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-09T04:53:52.377

最简单的方法是使用 php。将您的gallery.html 保存为gallery.php 或在所有编码之前在gallery.html 页面顶部输入以下代码。然后使用 SESSION 变量（此处为 $_SESSION['userID']）来存储当前登录详细信息。

`<?php` `if(! isset($_SESSION['userID'])){ //userID or something to identify the user` `header('Location:login.php'); //redirects to the login page` `}else{` `header('Location:gallery.php'); //redirect to the gallery.php for valid login` `}` `?>`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-09T04:36:16.130

There is no way of preventing someone from typing in the URL and requesting the page. THe only thing you'll be able to do is check if they are logged in on the page itself.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-09T04:37:52.290

用户登录后，您必须设置 cookie 或会话。因此，您将为用户设置会话或 cookie。每次输入该特定 url 时，您必须检查会话以显示该页面或重定向到登录页面

# dojo - acces each label id in dojo

> ID：12792822
> 
> 赞同：0
> 
> 时间：2012-10-09T04:30:57.937
> 
> 标签：dojo

> `a=dojo.query('label');`

by this command i get

```
<label id=​"labelforclientname">​
                Client name
            ​&lt;/label>​
, 
<label id=​"labelforphysical">​
                Physical 
                ​&lt;/label>​
, 
<label id=​"labelforpostal">​
                Postal 
                ​&lt;/label>​
, 
<label id=​"labelfortele">​
                Telephone No 
                ​&lt;/label>​
, 
<label id=​"labelforfax">​
                Fax No
                ​&lt;/label>​
, 
<label id=​"labelformail">​
                Email
                ​&lt;/label>​
, 
<label id=​"labelforaddress">​
                Address to :
            ​&lt;/label>​ 
```

that is all the label in my form

now i want to access each label id. is it possbile in dojo ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:18:53.463

您还可以通过以下方式访问标签：

```
require(["dojo/dom"], function(dom){
    // fetch a node by id="someNode"
    var node = dom.byId("someNode");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T07:41:03.443

`id`如果您只想要一个带有s的数组，那么`map()`这是最直接的方法：

```
// map
var ids1 = dojo.query('label').map(function(label) {
    return label.id
}); 
```

或使用`forEach`：

```
// forEach
var ids2 = [];
dojo.query("label").forEach(function(label) {
    // do whatever you need with a label here
    ids2.push(label.id);          
}); 
```

在 jsFiddle 上查看它的实际效果：http: [//jsfiddle.net/phusick/nfMGC/](http://jsfiddle.net/phusick/nfMGC/)

[`dojo/query`](http://livedocs.dojotoolkit.org/dojo/query)返回[`dojo/NodeList`](http://dojotoolkit.org/api/1.8/dojo/NodeList)它是一个*类似数组的对象，它为链接添加语法糖*。您可以使用它的许多方法，例如`filter`、`style`等`toggleClass`。有关其他详细信息，请参阅[使用 dojo/query](http://dojotoolkit.org/documentation/tutorials/1.8/using_query/)和[NodeList 扩展](http://dojotoolkit.org/documentation/tutorials/1.8/nodelist_extensions/)教程。

# android - Android: Want to show layout on top when user scroll up and hide when scroll down in webview

> ID：12792823
> 
> 赞同：1
> 
> 时间：2012-10-09T04:30:57.360
> 
> 标签：android, android-webview, android-gesture, android-websettings

I'm building an application in which I have loaded the webpage on webview. I have one layout which contains edittext in that. I want to hide the layout when user is scrolling down in the webview and show it again when user scrolls to the top. I have tried using `onTouch` but it only takes the `MotionEvent.ACTION_MOVE` and all that. Here what my code looks like:

```
@Override
public boolean onTouch(View v, MotionEvent event) {
    if (v.getId() == R.id.web
            && event.getAction() == MotionEvent.ACTION_MOVE) {
        handler.sendEmptyMessageDelayed(CLICK_ON_URL, 2000);
    }
    return false;
}

@Override
public boolean handleMessage(Message msg) {
    if (msg.what == CLICK_ON_URL) {
        top.setVisibility(LinearLayout.GONE);
        return true;
    }
    return false;
} 
```

As you can see here I'm using `top.setVisibility(LinearLayout.GONE);`, but this is not solving my problem, it completely hides my layout.

Any idea how to overcome this problem.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T04:40:24.080

您可以将布局和 webView 都包装在一个滚动视图中。这样当用户向下滚动时，父级将捕获滚动事件。以供参考，

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/bg_main" >

<!-- Both your views goes here -->

</ScrollView> 
```

希望有帮助。

# qt - how to call an ActiveX method in QT?

> ID：12792825
> 
> 赞同：0
> 
> 时间：2012-10-09T04:31:13.507
> 
> 标签：qt

I know class id of the ActiveX.then how to call a function defined in the ActiveX? For example, int f(string *).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:42:45.593

QT 在其 COM/ActiveX 集成方面有很好的文档和示例：http: [//qt-project.org/doc/qt-4.7/examples-activeqt.html](http://qt-project.org/doc/qt-4.7/examples-activeqt.html)

# visual-studio-2010 - Microsoft Report Viewer 版本 9.0 到 10.0 报告不加载

> ID：12792829
> 
> 赞同：0
> 
> 时间：2012-10-09T04:31:46.237
> 
> 标签：visual-studio-2010, reportviewer, microsoft-reporting

我们正在使用 WinForms Reoprt 查看器控件。一切正常，直到我们从 VS2008 迁移到 VS2010。VS2010 将我们的项目转换为相应的版本，同时将 Microsoft.ReportViwer.Common 和 Microsoft.WinForms 的版本从 9.0 更改为 10.0。同样在第一次打开 .rdlc 文件时，VS2010 建议对其进行转换。

此类操作报告崩溃并显示以下错误后：

“本地报表处理过程中出现错误。报表处理过程中出现错误。Groping 中使用的 Group 表达式返回的数据类型无效。”

但是，如果我将程序集版本更改回 9.0，一切正常。

有人对如何使其与较新的库一起使用有任何想法或帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:12:47.220

我找到了解决方案。此问题与嵌套字段属性有关，并已在 VS2010 SP1 中修复。本文解释了这个问题[http://blogs.msdn.com/b/brianhartman/archive/2010/10/27/nested-objects-in-local-mode.aspx](http://blogs.msdn.com/b/brianhartman/archive/2010/10/27/nested-objects-in-local-mode.aspx)

# java - 无法在 IntelliJ 中打开调试器端口

> ID：12792833
> 
> 赞同：52
> 
> 时间：2012-10-09T04:32:13.803
> 
> 标签：java, debugging, intellij-idea

无法在 intellij 中打开调试器端口。端口号 9009 与在应用程序配置文件中设置的端口号匹配。

```
<java-config debug-options="-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=9009" system-classpath="" native-library-path-prefix="D:\Project\lib\windows\64bit" classpath-suffix="">
    <jvm-options>-XX:MaxPermSize=192m</jvm-options>
    <jvm-options>-client</jvm-options>
    <jvm-options>-XX:+UnlockDiagnosticVMOptions</jvm-options>
    <jvm-options>-XX:+LogVMOutput</jvm-options>
    <jvm-options>-XX:LogFile=${com.sun.aas.instanceRoot}/logs/jvm.log</jvm-options>
    <jvm-options>-Djava.endorsed.dirs=${com.sun.aas.installRoot}/modules/endorsed${path.separator}${com.sun.aas.installRoot}/lib/endorsed</jvm-options>
    <jvm-options>-Djava.security.policy=${com.sun.aas.instanceRoot}/config/server.policy</jvm-options>
    <jvm-options>-Djava.security.auth.login.config=${com.sun.aas.instanceRoot}/config/login.conf</jvm-options>
    <jvm-options>-Dcom.sun.enterprise.security.httpsOutboundKeyAlias=s1as</jvm-options>
    <jvm-options>-Djavax.net.ssl.keyStore=${com.sun.aas.instanceRoot}/config/keystore.jks</jvm-options>
    <jvm-options>-Djavax.net.ssl.trustStore=${com.sun.aas.instanceRoot}/config/cacerts.jks</jvm-options>
    <jvm-options>-Djava.ext.dirs=${com.sun.aas.javaRoot}/lib/ext${path.separator}${com.sun.aas.javaRoot}/jre/lib/ext${path.separator}${com.sun.aas.instanceRoot}/lib/ext</jvm-options>
    <jvm-options>-Djdbc.drivers=org.apache.derby.jdbc.ClientDriver</jvm-options>
    <jvm-options>-DANTLR_USE_DIRECT_CLASS_LOADING=true</jvm-options>
    <jvm-options>-Dcom.sun.enterprise.config.config_environment_factory_class=com.sun.enterprise.config.serverbeans.AppserverConfigEnvironmentFactory</jvm-options>
    <jvm-options>-Dosgi.shell.telnet.port=4766</jvm-options>
    <jvm-options>-Dosgi.shell.telnet.maxconn=1</jvm-options>
    <jvm-options>-Dosgi.shell.telnet.ip=127.0.0.1</jvm-options>
    <jvm-options>-Dfelix.fileinstall.dir=${com.sun.aas.installRoot}/modules/autostart/</jvm-options>
    <jvm-options>-Dfelix.fileinstall.poll=5000</jvm-options>
    <jvm-options>-Dfelix.fileinstall.debug=1</jvm-options>
    <jvm-options>-Dfelix.fileinstall.bundles.new.start=true</jvm-options>
    <jvm-options>-Dorg.glassfish.web.rfc2109_cookie_names_enforced=false</jvm-options>
    <jvm-options>-XX:NewRatio=2</jvm-options>
    <jvm-options>-Xmx2048m</jvm-options>
  </java-config> 
```

IntelliJ 中的配置：

![在此处输入图像描述](../Images/eca7c3a93c763a4f4dfcf6f40dd01afe.png)

当我尝试为此应用程序启用远程调试时，会出现以下错误： ![在此处输入图像描述](../Images/5c73a02040096ed54c491b9d84b9197a.png)

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2015-05-15T08:58:09.263

如果您的端口已被另一个程序使用，您可能必须更改调试器端口。为此：

*   跑
*   编辑配置
*   启动/连接选项卡
*   调试
*   在此处更改端口

* * *

或者，也许在其他版本中：

*   跑
*   编辑配置
*   左侧列表中的远程 > 远程调试
*   配置选项卡，设置部分
*   端口：在此处更改端口

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-09T06:02:59.160

在 glassfish 配置的这一行中添加以下参数 debug-enabled="true"。例子：

```
<java-config  debug-options="-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=9009" debug-enabled="true"
  system-classpath="" native-library-path-prefix="D:\Project\lib\windows\64bit" classpath-suffix=""> 
```

启动和停止使用此配置的 glassfish 域或服务。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-09-06T11:42:41.383

我遇到了同样的问题，这个解决方案也为我解决了问题：在 Intellij Debug 配置中提供 IP 127.0.0.1 而不是主机名“localhost”，以防您使用此主机名。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-09-26T04:02:18.457

您必须设置 CHMOD +x（对 *.sh 或 *.bat 文件执行）。例如，我使用的是 macOS

```
cd /Users/donhuvy/Documents/tools/apache-tomcat-9.0.12/bin
sudo chmod +x *.sh 
```

然后 IntelliJ IDEA 和 Apache Tomcat 运行或调试就好了。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-04T21:08:00.677

我希望你的问题现在已经解决了。如果没有，试试这个......看起来你`server=y`的应用程序和 IDEA 都有。IDEA 应该是`server=n`. 此外，（IDEA）客户端应该有一个包含主机名和端口的地址，例如`address=127.0.0.1:9009`.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-10-09T10:05:23.543

1.  在`glassfish\domains\domain1\config\domain.xml`启动服务器之前设置

```
<java-config classpath-suffix="" debug-options="-agentlib:jdwp=transport=dt_socket,address=9009,server=y,suspend=n" java-home="C:\Program Files\Java\jdk1.8.0_162" debug-enabled="true" system-classpath=""> 
```

或在 http://localhost:4848/common/index.jsf 中设置 debug-enabled="true" server=y,suspend=n [![Glassfish 4 地址=9009，服务器=y，挂起=n](../Images/7d88575e41bb96f1fd66710338de06fc.png)](https://i.stack.imgur.com/X4cAU.png)

2.  在当前的 Idea 2018 - 服务器运行配置 - 调试 - 端口 - 地址 [![服务器运行配置-调试-端口-地址](../Images/e96cfabbad33e66390f2e54c7d5f5a03.png)](https://i.stack.imgur.com/pOJL0.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-14T11:15:38.893

这个对我有用——如果问题仍然存在（如果你没有使用 glassFish 服务器），那么关闭你的 Jidea 并停止服务器。这将禁用端口连接。然后启动您的服务器和 JIdea，这将开始与端口的新连接，从而解决问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-03-09T03:31:09.893

对我来说，问题是 catalina.sh 没有执行权限。Intellij 中出现“无法在 intellij 中打开调试器端口”消息，但它在某种程度上掩盖了之前出现在日志中的“无法执行 catalina.sh”错误。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-07-26T20:51:21.210

可能会发生此错误 Tomcat 已在运行。因此，如果您要求 Intellij 启动它（默认），请确保 Tomcat 没有在后台运行。

此外，检查完整的输出窗口是否有更多错误。因为这个错误之前可能有一个更有用的错误（就像我刚才的配置一样）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-04-25T06:20:03.523

答案很简单，我也遇到了这个问题，最后我得到了完美的解决方案。 [创建](https://i.stack.imgur.com/jJv7P.jpg) [调试使用以下配置创建远程调试](https://i.stack.imgur.com/GQBjj.jpg) 首先由调试运行。它让您等待套接字 5005，然后使用远程调试运行

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-06-09T20:50:07.910

尝试使用 telnet 连接，如果连接，则显示如下：

$telnet 10.238.136.165 9999 正在尝试 10.238.136.165... 连接到 10.238.136.165。转义字符是 '^]'。外部主机关闭连接。

如果端口不可用（或者因为其他人已经连接到它或者端口未打开等），那么它会显示如下所示的内容：

$telnet 10.238.136.165 9999 Trying 10.238.136.165... telnet：连接到地址 10.238.136.165：连接被拒绝 telnet：无法连接到远程主机

所以我认为需要看看是否：

*   应用程序是否是监听端口的属性

*   或者其他人已经连接到它

还尝试先连接该 m/c 本身，例如 $telnet localhost 9999

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-04-03T22:10:54.377

当服务器在端口 8090 上运行时，使用给定命令运行 Spring Boot 应用程序以在端口 6006 上启用调试：

```
mvn spring-boot:run -Drun.jvmArguments='-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=6006' -Dserver.port=8090 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-04-03T23:22:01.847

**设置 MAVEN_OPTS。它应该工作！**

export MAVEN_OPTS="-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=4000,server=y,suspend=n"

mvn spring-boot:run -Dserver.port=8090

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-06-12T11:43:41.120

您的服务/应用程序可能已经在运行。在搜索中输入服务，您将获得服务列表。停止你的，然后再试一次。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-07-10T00:45:57.743

我有同样的问题，我只需要从 URL 中删除 HTTP 协议。就是这样。

我希望这个对你有用。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-12-19T09:22:21.497

我曾经也有这个问题。我的解决方案是通过终止使用该端口的应用程序来解决此问题。 [这](https://veerasundar.com/blog/2009/10/how-to-check-which-application-is-using-which-port/)是一篇文章，教我们如何检查哪个应用程序正在使用哪个端口，找到它并杀死/关闭它。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-02-11T20:17:44.943

只需再次点击调试图标即可在几秒钟内解决我的问题。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-08-24T17:54:31.547

确保在 File --> Project Structure (Project | SDKs) 下为您的应用指定 SDK 和 Project SDK

# c - 线程安全队列实现

> ID：12792839
> 
> 赞同：4
> 
> 时间：2012-10-09T04:32:50.063
> 
> 标签：c, multithreading

在我的应用程序中，我有 2 个线程加上主线程。

一个线程是在发生中断时从 I/O 模块获取数据（缓冲区的 4096 字节）。另一个线程是使用这些数据（处理和格式化并将数据写入文件）。

实现这一目标的最佳方法是什么？

我不能从快速发生的生产者线程中丢失数据。

我可以研究的任何示例将不胜感激。

我正在尝试实现线程安全队列并且遇到了困难。

对不起，我忘了包括平台和其他信息。我正在使用 windows xp(32bit) 和 Microsoft Visual Studio 5.0 编译器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:27:20.727

我将在 POSIX 平台上做一个假设。

使用[互斥锁](http://en.wikipedia.org/wiki/Mutual_exclusion)

然后消费者可以在生产者失明的情况下切掉蛴螬。

[对隐喻](http://en.wikipedia.org/wiki/Metaphor)感到抱歉

# php - OpenTBS - 来自 MySQL 的 HTML 内容

> ID：12792850
> 
> 赞同：1
> 
> 时间：2012-10-09T04:33:54.980
> 
> 标签：php, cakephp, opentbs

我已将 OpenTBS 设置为从我的联系人数据库动态生成。现在我想将电子邮件的实际内容设置为来自使用 CKeditor 或其他 WYSISYG JS 编辑器创建的 MySQL 表。

我已经能够让内容显示在输出的 docx 文件上，但它是作为带有 h​​tml 标签的应变出现的，我不知何故需要它来格式化，所以它是由客户端放入的。我只允许他们使用基本的、段落、粗体、斜体和其他一些标签。

这是不是我可以将此html字符串转换为文字副本/文本？或者以某种方式使用不同的所见即所得编辑器将其保存在 MySQL 中作为 word 代码而不是 html 代码。

谢谢

它并不真正相关，但下面是从模板和数据库（我使用的是 CakePHP）生成 OpenTBS 文档的函数 MailMerge.description 是目前带有 html 代码的主体。

```
// FUNCTION EXPORT MAIL MERGE
// -------------------------------------------------------------->
function mail_merge()
{
     Configure::write('debug',2);

    $this->layout = null;
    $this->autoRender = FALSE;  

    // GET THE CONTACTS
    // ------------------------------------------------------------->
    $contacts = $this->Contact->find('all', array('limit' => 20,  'contain' => FALSE));

    $this->loadModel('MailMerge');
    $content = $this->MailMerge->find('first', array(
                                                'conditions' => array('MailMerge.id' => 1),
                                                'fields' => array('MailMerge.description')
                                                ));

    // Get a new instance of TBS with the OpenTBS plug-in
    // ------------------------------------------------------------->
     $otbs = $this->Tbs->getOpenTbs(); 

    // Load the template file
    // ------------------------------------------------------------->
    $otbs->LoadTemplate(APP . DS . WEBROOT_DIR . '/files/data_files/enquiry_letter_sample_redcliffe.docx');

    // Merge data in the template
    // ------------------------------------------------------------->
    $otbs->MergeBlock('r', $contacts);
    $otbs->MergeBlock('content', $content);

    // End the merge and export
    // ------------------------------------------------------------->
    $file_name = 'export.docx';
    $otbs->Show(OPENTBS_DOWNLOAD, $file_name);

} 
```

# rabbitmq - RabbitMQ 使用哪些端口？

> ID：12792856
> 
> 赞同：145
> 
> 时间：2012-10-09T04:34:41.853
> 
> 标签：rabbitmq, port

RabbitMQ 服务器使用或需要在防火墙上为节点集群打开哪些端口？

我`/usr/lib/rabbitmq/bin/rabbitmq-env`的设置低于我假设需要（35197）。

```
SERVER_ERL_ARGS="+K true +A30 +P 1048576 \   
-kernel inet_default_connect_options [{nodelay,true}] \  
-kernel inet_dist_listen_min 35197 \   
-kernel inet_dist_listen_max 35197" 
```

我还没有`rabbitmq.config`设置自定义`tcp_listener`，所以它应该在默认的 5672 上监听。

以下是相关的 netstat 行：

```
tcp        0      0 0.0.0.0:4369           0.0.0.0:*           LISTEN      728/epmd 
tcp        0      0 0.0.0.0:35197          0.0.0.0:*           LISTEN      5126/beam
tcp6       0      0 :::5672                :::*                LISTEN      5126/beam 
```

我的问题是：

1.  为了让其他节点能够连接到集群，是否需要打开所有 3 个端口 4369、5672 和 35197？

2.  为什么 5672 不在 tcp 而不仅仅是 tcp6 上运行？

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-10-10T03:36:41.650

端口 4369：Erlang 使用端口映射器守护程序 (epmd) 来解析集群中的节点名称。节点必须能够相互访问，并且端口映射器守护程序才能使集群工作。

由 inet_dist_listen_min/max 设置的 PORT 35197 防火墙必须允许此范围内的流量在集群节点之间通过

RabbitMQ 管理控制台：

*   用于 RabbitMQ 版本 3.x 的端口 15672
*   RabbitMQ pre 3.x 的端口 55672

PORT `5672`RabbitMQ 主端口。

对于节点集群，它们必须在和`35197`上相互开放。`4369``5672`

对于任何想要使用消息队列的服务器，only`5672`是必需的。

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2014-09-08T21:53:05.697

## RabbitMQ 使用哪些端口？

默认值：5672，手册有答案。它在`RABBITMQ_NODE_PORT`变量中定义。

[https://www.rabbitmq.com/configure.html#define-environment-variables](https://www.rabbitmq.com/configure.html#define-environment-variables)

**如果有人在 rabbitmq 配置文件中更改该数字可能会有所不同：**

```
vi /etc/rabbitmq/rabbitmq-env.conf 
```

**询问 nmap 是否可以看到：**

```
sudo nmap -p 1-65535 localhost

Starting Nmap 5.51 ( http://nmap.org ) at 2014-09-19 13:50 EDT
Nmap scan report for localhost (127.0.0.1)
Host is up (0.00041s latency).
PORT      STATE         SERVICE
443/tcp   open          https
5672/tcp  open          amqp
15672/tcp open  unknown
35102/tcp open  unknown
59440/tcp open  unknown 
```

哦，看，5672 和 15672

**询问 netstat 是否可以看到：**

```
netstat -lntu
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address               Foreign Address        State
tcp        0      0 0.0.0.0:15672               0.0.0.0:*              LISTEN
tcp        0      0 0.0.0.0:55672               0.0.0.0:*              LISTEN
tcp        0      0 :::5672                     :::*                   LISTEN 
```

哦，看 5672。

**lsof 查看端口：**

```
eric@dev ~$ sudo lsof -i | grep beam
beam.smp  21216    rabbitmq   17u  IPv4 33148214      0t0  TCP *:55672 (LISTEN)
beam.smp  21216    rabbitmq   18u  IPv4 33148219      0t0  TCP *:15672 (LISTEN) 
```

**使用另一台机器上的 nmap，查看 5672 是否打开：**

```
sudo nmap -p 5672 10.0.1.71
Starting Nmap 5.51 ( http://nmap.org ) at 2014-09-19 13:19 EDT
Nmap scan report for 10.0.1.71
Host is up (0.00011s latency).
PORT     STATE SERVICE
5672/tcp open  amqp
MAC Address: 0A:40:0E:8C:75:6C (Unknown)    
Nmap done: 1 IP address (1 host up) scanned in 0.13 seconds 
```

**尝试使用 telnet 手动连接端口，5671 已关闭：**

```
telnet localhost 5671
Trying 127.0.0.1...
telnet: connect to address 127.0.0.1: Connection refused 
```

**尝试使用 telnet 手动连接端口，5672 已打开：**

```
telnet localhost 5672
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'. 
```

**检查您的防火墙：**

```
sudo cat /etc/sysconfig/iptables 
```

它应该告诉您打开了哪些端口：

```
-A INPUT -p tcp -m tcp --dport 5672 -j ACCEPT 
```

**重新应用防火墙：**

```
sudo service iptables restart
iptables: Setting chains to policy ACCEPT: filter          [  OK  ]
iptables: Flushing firewall rules:                         [  OK  ]
iptables: Unloading modules:                               [  OK  ]
iptables: Applying firewall rules:                         [  OK  ] 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-04-16T22:17:47.237

**要找出 rabbitmq 使用的端口**：

```
$ epmd -names 
```

**输出：**

```
epmd: up and running on port 4369 with data:
name rabbit at port 25672 
```

**以root身份运行这些：**

```
lsof -i :4369
lsof -i :25672 
```

[有关 epmd 选项的更多信息。](http://www.erlang.org/doc/man/epmd.html)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-07-09T20:38:51.573

端口访问

防火墙和其他安全工具可能会阻止 RabbitMQ 绑定到端口。发生这种情况时，RabbitMQ 将无法启动。确保可以打开以下端口：

4369：epmd，RabbitMQ 节点和 CLI 工具使用的对等发现服务

5672、5671：由不带和带 TLS 的 AMQP 0-9-1 和 1.0 客户端使用

25672：由 Erlang 发行版用于节点间和 CLI 工具通信，并从动态范围分配（默认限制为单个端口，计算为 AMQP 端口 + 20000）。有关详细信息，请参阅网络指南。

15672：HTTP API 客户端和 rabbitmqadmin（仅在启用管理插件的情况下）

61613、61614：不带和带 TLS 的 STOMP 客户端（仅在启用 STOMP 插件的情况下）

1883、8883：（如果启用了 MQTT 插件，则不带和带 TLS 的 MQTT 客户端

15674：STOMP-over-WebSockets 客户端（仅当 Web STOMP 插件启用时）

15675：MQTT-over-WebSockets 客户端（仅当启用 Web MQTT 插件时）

参考文档： [https ://www.rabbitmq.com/install-windows-manual.html](https://www.rabbitmq.com/install-windows-manual.html)

# mysql - 在 MYSQL 中查询以获取来自另一个查询的两个值的结果

> ID：12792859
> 
> 赞同：1
> 
> 时间：2012-10-09T04:34:59.000
> 
> 标签：mysql, sql, phpmyadmin

```
SELECT l.name 
FROM locations as l 
WHERE
    l.location_id =',2,32,' 
```

我们从另一个表中得到的“,2,32”值。这个查询给出的结果为零，尽管有 location_id=2 的值和 32。请帮助我如何使用“,2,32”来获得结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T04:38:31.543

您需要将 where 子句更改为`WHERE l.location_id LIKE '%2,32%'`.

它允许在位置 ID 中不仅仅是 2 和 32。

另一个建议是每个 location_id 使用一行。这称为[规范化](http://en.wikipedia.org/wiki/Database_normalization%20normalization)，重要的是要了解为什么要使用它。是的，它复制了一些数据，但它会使您的查询更容易。然后你就可以做到了`WHERE l.location_id IN (2,32)`。

**编辑：**

我刚刚重新阅读了您的问题，看来您的位置表已经标准化。您只想使用我发布的第二个 WHERE 子句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T04:39:24.373

假设您要返回 ID 2 和 32 的值，您可以使用以下查询：

```
SELECT l.name FROM locations AS l WHERE l.location_id IN (2, 32); 
```

`IN`运算符允许您`multiple-values`在`WHERE`子句中指定

您还可以`NOT IN`用来消除某些 ID，也可以添加更多 ID，只需用逗号分隔它们即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T04:42:49.553

如果您的 location_id 列是`VARCHAR`包含逗号分隔值的列，那么您的`WHERE`子句应该是

```
WHERE 
    (l.location_id LIKE '2,32%' OR l.location_id LIKE '%,2,32%' OR l.location_id LIKE '%,2,32') 
```

但是，如果您的 location_id 列是一`NUMERIC`列，那么您想要获取 location_id 为 2 或 32 的行的意图应该由

```
WHERE location_id IN (2, 32) 
```

# objective-c - Three20 navigator 需要rootViewcCntroller

> ID：12792862
> 
> 赞同：0
> 
> 时间：2012-10-09T04:35:21.087
> 
> 标签：objective-c, ios, three20

我是使用Three20的新手，当我使用导航器时，xcode总是报错：**应用程序窗口应该在应用程序启动结束时有一个根视图控制器**

这是我的代码：

```
TTNavigator *navigator = [TTNavigator navigator];
navigator.persistenceMode = TTNavigatorPersistenceModeAll;
navigator.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

TTURLMap *map = navigator.URLMap;
[map from:@"tt//view" toViewController:[ViewController class]];
[map from:@"tt//test" toSharedViewController:[TestViewController  class]];
if (![navigator restoreViewControllers]) {
    [navigator openURLAction:[TTURLAction actionWithURLPath:@"tt://view"] ];
}

return YES; 
```

我不明白为什么会这样？谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:56:41.520

我之前遇到过类似的问题，因为视图控制器层次结构不是由 nib 文件创建的。

解决方案是在调用 restoreViewControllers 后手动设置根视图控制器：

```
TTNavigator *navigator = [TTNavigator navigator];
navigator.persistenceMode = TTNavigatorPersistenceModeAll;
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
navigator.window = self.window;

TTURLMap *map = navigator.URLMap;
[map from:@"tt//view" toViewController:[ViewController class]];
[map from:@"tt//test" toSharedViewController:[TestViewController  class]];
if (![navigator restoreViewControllers]) {
    [navigator openURLAction:[TTURLAction actionWithURLPath:@"tt://view"] ];
}

// Set the root view controller
[self.window setRootViewController:navigator.rootViewController];

return YES; 
```

# vb6 - 如何加载 WinIo 3.0？

> ID：12792865
> 
> 赞同：1
> 
> 时间：2012-10-09T04:35:34.653
> 
> 标签：vb6

```
Declare Function MapPhysToLin Lib "WinIo32.dll" (ByVal PhysAddr As Long, ByVal PhysSize As Long, ByRef PhysMemHandle) As Long
Declare Function UnmapPhysicalMemory Lib "WinIo32.dll" (ByVal PhysMemHandle, ByVal LinAddr) As Boolean
Declare Function GetPhysLong Lib "WinIo32.dll" (ByVal PhysAddr As Long, ByRef PhysVal As Long) As Boolean
Declare Function SetPhysLong Lib "WinIo32.dll" (ByVal PhysAddr As Long, ByVal PhysVal As Long) As Boolean
Declare Function GetPortVal Lib "WinIo32.dll" (ByVal PortAddr As Integer, ByRef PortVal As Byte, ByVal bSize As Byte) As Boolean
Declare Function SetPortVal Lib "WinIo32.dll" (ByVal PortAddr As Integer, ByVal PortVal As Byte, ByVal bSize As Byte) As Boolean
Declare Function InitializeWinIo Lib "WinIo32.dll" () As Boolean
Declare Function ShutdownWinIo Lib "WinIo32.dll" () As Boolean
Declare Function InstallWinIoDriver Lib "WinIo32.dll" (ByVal DriverPath As String, ByVal Mode As Integer) As Boolean
Declare Function RemoveWinIoDriver Lib "WinIo32.dll" () As Boolean 
```

`InitializeWinIo` 或者`InstallWinIoDriver`all 总是 return `False`，无论何时在 Win XP 或 Win 7 中（以管理员身份运行）。

但是 winio 2.0 可以通过初始化/安装正确运行。

anyboby 也遇到这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:06:46.560

这是WinIo的示例代码，可能会出错

在form中，添加Check1、Text1、Combo1、Timer1

```
Private Sub Check1_Click()
    Text1.Text = 100
    If Check1.Value = 1 Then
        Timer1.Interval = (Text1.Text)
        Timer1.Enabled = True
    Else
        Timer1.Enabled = False
    End If
End Sub

Private Sub Form_Load()
    Combo1.AddItem "0"
    Combo1.AddItem "1"
    Combo1.AddItem "2"
    Combo1.AddItem "3"
    Combo1.AddItem "4"
    Combo1.AddItem "5"
    Combo1.AddItem "6"
    Combo1.AddItem "7"
    Combo1.AddItem "8"
    Combo1.AddItem "9"
    Combo1.AddItem "F1"
    Combo1.AddItem "F2"
    Combo1.AddItem "F3"
    Combo1.AddItem "F4"
    Combo1.AddItem "F5"
    Combo1.AddItem "F6"
    Combo1.AddItem "F7"
    Combo1.AddItem "F8"
    Combo1.AddItem "F9"
    Combo1.AddItem "F10"

    If InitializeWinIo = False Then
        MsgBox "Driver Loading Failed"
        Unload Me
    End If
End Sub

Private Sub Form_Unload(Cancel As Integer)
    ShutdownWinIo                                                            
End Sub

Private Sub Timer1_Timer()
    If Check1.Value = 1 Then
        Set Button = Form1.Combo1
        Mafan
    End If
End Sub 
```

在模块中：

```
Public Declare Function MapPhysToLin Lib "WinIo.dll" (ByVal PhysAddr As Long, ByVal PhysSize As Long, ByRef PhysMemHandle) As Long
Public Declare Function UnmapPhysicalMemory Lib "WinIo.dll" (ByVal PhysMemHandle, ByVal LinAddr) As Boolean
Public Declare Function GetPhysLong Lib "WinIo.dll" (ByVal PhysAddr As Long, ByRef PhysVal As Long) As Boolean
Public Declare Function SetPhysLong Lib "WinIo.dll" (ByVal PhysAddr As Long, ByVal PhysVal As Long) As Boolean
Public Declare Function GetPortVal Lib "WinIo.dll" (ByVal PortAddr As Integer, ByRef PortVal As Long, ByVal bSize As Byte) As Boolean
Public Declare Function SetPortVal Lib "WinIo.dll" (ByVal PortAddr As Integer, ByVal PortVal As Long, ByVal bSize As Byte) As Boolean
Public Declare Function InitializeWinIo Lib "WinIo.dll" () As Boolean
Public Declare Function ShutdownWinIo Lib "WinIo.dll" () As Boolean
Public Declare Function InstallWinIoDriver Lib "WinIo.dll" (ByVal DriverPath As String, ByVal Mode As Integer) As Boolean
Public Declare Function RemoveWinIoDriver Lib "WinIo.dll" () As Boolean
Public Declare Function MapVirtualKey Lib "user32" Alias "MapVirtualKeyA" (ByVal wCode As Long, ByVal wMapType As Long) As Long
Public Declare Sub Sleep Lib "kernel32" (ByVal dwMilliseconds As Long)

Public Const KBC_KEY_CMD = &H64
Public Const KBC_KEY_DATA = &H60
Public Const VK_LBUTTON = &H1
Public Const VK_RBUTTON = &H2
Public Const VK_CANCEL = &H3
Public Const VK_MBUTTON = &H4
Public Const VK_BACK = &H8
Public Const VK_TAB = &H9
Public Const VK_CLEAR = &HC
Public Const VK_RETURN = &HD
Public Const VK_SHIFT = &H10
Public Const VK_CONTROL = &H11
Public Const VK_MENU = &H12
Public Const VK_PAUSE = &H13
Public Const VK_CAPITAL = &H14
Public Const VK_ESCAPE = &H1B
Public Const VK_SPACE = &H20
Public Const VK_PRIOR = &H21
Public Const VK_NEXT = &H22
Public Const VK_END = &H23
Public Const VK_HOME = &H24
Public Const VK_LEFT = &H25
Public Const VK_UP = &H26
Public Const VK_RIGHT = &H27
Public Const VK_DOWN = &H28
Public Const VK_Select = &H29
Public Const VK_PRINT = &H2A
Public Const VK_EXECUTE = &H2B
Public Const VK_SNAPSHOT = &H2C
Public Const VK_Insert = &H2D
Public Const VK_Delete = &H2E
Public Const VK_HELP = &H2F
Public Const VK_0 = &H30
Public Const VK_1 = &H31
Public Const VK_2 = &H32
Public Const VK_3 = &H33
Public Const VK_4 = &H34
Public Const VK_5 = &H35
Public Const VK_6 = &H36
Public Const VK_7 = &H37
Public Const VK_8 = &H38
Public Const VK_9 = &H39
Public Const VK_A = &H41
Public Const VK_B = &H42
Public Const VK_C = &H43
Public Const VK_D = &H44
Public Const VK_E = &H45
Public Const VK_F = &H46
Public Const VK_G = &H47
Public Const VK_H = &H48
Public Const VK_I = &H49
Public Const VK_J = &H4A
Public Const VK_K = &H4B
Public Const VK_L = &H4C
Public Const VK_M = &H4D
Public Const VK_N = &H4E
Public Const VK_O = &H4F
Public Const VK_P = &H50
Public Const VK_Q = &H51
Public Const VK_R = &H52
Public Const VK_S = &H53
Public Const VK_T = &H54
Public Const VK_U = &H55
Public Const VK_V = &H56
Public Const VK_W = &H57
Public Const VK_X = &H58
Public Const VK_Y = &H59
Public Const VK_Z = &H5A
Public Const VK_STARTKEY = &H5B
Public Const VK_CONTEXTKEY = &H5D
Public Const VK_NUMPAD0 = &H60
Public Const VK_NUMPAD1 = &H61
Public Const VK_NUMPAD2 = &H62
Public Const VK_NUMPAD3 = &H63
Public Const VK_NUMPAD4 = &H64
Public Const VK_NUMPAD5 = &H65
Public Const VK_NUMPAD6 = &H66
Public Const VK_NUMPAD7 = &H67
Public Const VK_NUMPAD8 = &H68
Public Const VK_NUMPAD9 = &H69
Public Const VK_MULTIPLY = &H6A
Public Const VK_ADD = &H6B
Public Const VK_SEPARATOR = &H6C
Public Const VK_SUBTRACT = &H6D
Public Const VK_DECIMAL = &H6E
Public Const VK_DIVIDE = &H6F
Public Const VK_F1 = &H70
Public Const VK_F2 = &H71
Public Const VK_F3 = &H72
Public Const VK_F4 = &H73
Public Const VK_F5 = &H74
Public Const VK_F6 = &H75
Public Const VK_F7 = &H76
Public Const VK_F8 = &H77
Public Const VK_F9 = &H78
Public Const VK_F10 = &H79
Public Const VK_F11 = &H7A
Public Const VK_F12 = &H7B
Public Const VK_F13 = &H7C
Public Const VK_F14 = &H7D
Public Const VK_F15 = &H7E
Public Const VK_F16 = &H7F
Public Const VK_F17 = &H80
Public Const VK_F18 = &H81
Public Const VK_F19 = &H82
Public Const VK_F20 = &H83
Public Const VK_F21 = &H84
Public Const VK_F22 = &H85
Public Const VK_F23 = &H86
Public Const VK_F24 = &H87
Public Const VK_NUMLOCK = &H90
Public Const VK_OEM_SCROLL = &H91
Public Const VK_OEM_1 = &HBA
Public Const VK_OEM_PLUS = &HBB
Public Const VK_OEM_COMMA = &HBC
Public Const VK_OEM_MINUS = &HBD
Public Const VK_OEM_PERIOD = &HBE
Public Const VK_OEM_2 = &HBF
Public Const VK_OEM_3 = &HC0
Public Const VK_OEM_4 = &HDB
Public Const VK_OEM_5 = &HDC
Public Const VK_OEM_6 = &HDD
Public Const VK_OEM_7 = &HDE
Public Const VK_OEM_8 = &HDF
Public Const VK_ICO_F17 = &HE0
Public Const VK_ICO_F18 = &HE1
Public Const VK_OEM102 = &HE2
Public Const VK_ICO_HELP = &HE3
Public Const VK_ICO_00 = &HE4
Public Const VK_ICO_CLEAR = &HE6
Public Const VK_OEM_RESET = &HE9
Public Const VK_OEM_JUMP = &HEA
Public Const VK_OEM_PA1 = &HEB
Public Const VK_OEM_PA2 = &HEC
Public Const VK_OEM_PA3 = &HED
Public Const VK_OEM_WSCTRL = &HEE
Public Const VK_OEM_CUSEL = &HEF
Public Const VK_OEM_ATTN = &HF0
Public Const VK_OEM_FINNISH = &HF1
Public Const VK_OEM_COPY = &HF2
Public Const VK_OEM_AUTO = &HF3
Public Const VK_OEM_ENLW = &HF4
Public Const VK_OEM_BACKTAB = &HF5
Public Const VK_ATTN = &HF6
Public Const VK_CRSEL = &HF7
Public Const VK_EXSEL = &HF8
Public Const VK_EREOF = &HF9
Public Const VK_PLAY = &HFA
Public Const VK_ZOOM = &HFB
Public Const VK_NONAME = &HFC
Public Const VK_PA1 = &HFD
Public Const VK_OEM_CLEAR = &HFE
Public Button As ComboBox

Public Sub KBCWait4IBE()
    Dim dwVal As Long
    Do
        GetPortVal &H64, dwVal, 1
    Loop While (dwVal And &H2)
End Sub

Public Sub MyKeyDown(ByVal vKeyCoad As Long)
    KBCWait4IBE
    SetPortVal KBC_KEY_CMD, &HD2, 1
    KBCWait4IBE
    SetPortVal KBC_KEY_DATA, MapVirtualKey(vKeyCoad, 0), 1
    Sleep 100
    KBCWait4IBE
    SetPortVal KBC_KEY_CMD, &HD2, 1
    KBCWait4IBE
    SetPortVal KBC_KEY_DATA, (MapVirtualKey(vKeyCoad, 0) Or &H80), 1
End Sub

Public Sub Mafan()
    Select Case Button.Text
    Case "F1"
        MyKeyDown VK_F1
    Case "F2"
        MyKeyDown VK_F2
    Case "F3"
        MyKeyDown VK_F3
    Case "F4"
        MyKeyDown VK_F4
    Case "F5"
        MyKeyDown VK_F5
    Case "F6"
        MyKeyDown VK_F6
    Case "F7"
       MyKeyDown VK_F7
    Case "F8"
        MyKeyDown VK_F8
    Case "F9"
        MyKeyDown VK_F9
    Case "F10"
        MyKeyDown VK_F10
    Case "0"
        MyKeyDown VK_0
    Case "1"
        MyKeyDown VK_1
    Case "2"
        MyKeyDown VK_2
    Case "3"
        MyKeyDown VK_3
    Case "4"
        MyKeyDown VK_4
    Case "5"
        MyKeyDown VK_5
    Case "6"
        MyKeyDown VK_6
    Case "7"
        MyKeyDown VK_7
    Case "8"
        MyKeyDown VK_7
    Case "9"
        MyKeyDown VK_9
    End Select
End Sub 
```

# actionscript-3 - 填充字符的有效方法

> ID：12792874
> 
> 赞同：1
> 
> 时间：2012-10-09T04:37:12.460
> 
> 标签：actionscript-3

我在想用填充字符构建字符串的最快方法。定义一个函数：

```
fillString('A',12); // return 'AAAAAAAAAAAA' 
```

一个简单的循环可以做到这一点，但如果我想填充数百万个字符，它不是很快。

这是在动作脚本中组合字符串的最快方法吗？

```
array.join(''); 
```

如果是这样，首先你需要先构建一个数组，那会占用太多空间。

曾经我在考虑一个[stringbuffer 类](http://code.google.com/p/as3-commons/source/browse/trunk/as3-commons-lang/src/main/actionscript/org/as3commons/lang/StringBuffer.as?r=242)，但我认为它会比直接使用 String 慢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T05:02:33.710

这可能不是正确的 actionscript 语法，但您应该明白：

```
public function fillString(filler:String, count:integer):String {
    var result:String = filler;
    while (result.length <= count/2)
        result += result;
    return result+result.substr(0,count-result.length);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:21:27.500

关于加入字符串的最快方法，[本文](http://jacksondunstan.com/articles/1790)有一些基准：

[http://jacksondunstan.com/articles/1790](http://jacksondunstan.com/articles/1790)

基本上，只使用 bigString = stringA + stringB 就可以了，但是使用 ByteArray 技巧可以提高速度。

顺便说一句，jacksondunstan.com 是获取有关 AS3 性能的可靠科学数据的重要来源。

# ios - iOS 6 上的序列化问题

> ID：12792875
> 
> 赞同：0
> 
> 时间：2012-10-09T04:37:13.147
> 
> 标签：ios, ios5, soap, dictionary, ios6

在我的项目中，我实施了多项服务并获得响应。在返回一个数据集作为响应的一项 WSDL 服务中，

```
+ (id)deserializeAsDictionary:(CXMLNode*)element {
    NSLog(@"deserializeAsDictionary = %@, children: %d", element.stringValue, [element childCount]);

    if([element childCount] == 1) {
        CXMLNode* child = [[element children] objectAtIndex:0];
        if([child kind] == CXMLTextKind) {
            NSLog(@"child %@ added", [child stringValue]);
            return [[[element children] objectAtIndex:0] stringValue];
        }
    }

    NSMutableDictionary* d = [NSMutableDictionary dictionary];
    NSInteger i = 1;
    NSString *objKey;
    for(CXMLNode* child in [element children]) {
        id v = [Soap deserialize:child];
        if(v == nil) { 
            v = [NSNull null]; 
        } else {
            if([[child name] isEqualToString:@"(null)"]) {
                objKey = [NSString stringWithFormat:@"%@",[child stringValue]];
            } else if([[child name] isEqualToString:@"key"] || [[child name] isEqualToString:@"value"]) { 
                objKey = [NSString stringWithFormat:@"%@",[child name]];
            } else {
                objKey = [NSString stringWithFormat:@"%@%d",[child name],i++];
            }

        }

        [d setObject:v forKey:objKey];
        NSLog(@"child %@ added", objKey);
    }
    return d;
} 
```

soap 类将使用此方法将该数据集转换为字典。它在 IOS 5 中运行良好，但在 ios 6 中无法运行。应用程序将在 ios 6 中崩溃，并出现“**带区域的 CXML 副本**”错误，请帮助我解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:03:02.930

我想你得到了为 ios6 启用了 ARC 的肥皂类。如果是这样，你需要更新肥皂请求类。请参考这个链接[Sudzc with iOS 5 and ARC](https://stackoverflow.com/questions/8645637/sudzc-with-ios-5-and-arc) 我认为它可能对你有用

# windows-installer - Select and Disable Features in Feature Tree Dialog in Installshield

> ID：12792879
> 
> 赞同：1
> 
> 时间：2012-10-09T04:37:27.517
> 
> 标签：windows-installer, installshield-2011, installscript-msi

I have created an Installer using Installscript msi. I perform a custom installation installing only selective features. Now during the Maintenance Install, when I chose the Installation type to be "Custom', all features installed as part of fresh Installation (first time install) appear to be selected in the feature tree. I dont want the user to be able to deselect these features. Instead, I want these featured/sub features to appear as selected and grayed out. Basically user should not be able to remove any feature/subfeature selected during fresh install. How can I achieve this ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T06:00:06.963

Windows Installer 不支持这种情况。维护安装旨在允许用户删除或添加功能。

# jquery - Tinyscrollbar 在我的自定义字体之前加载并计算内容高度错误

> ID：12792894
> 
> 赞同：0
> 
> 时间：2012-10-09T04:38:33.867
> 
> 标签：jquery, font-face, tinyscrollbar

我在我的网站上使用带有自定义字体的 tinyscrollbar.js。在自定义字体加载完成之前脚本执行的问题，导致内容高度计算错误，部分内容在滚动区域的末端被削减。

我为此找到的唯一解决方案是使用 window.load() 而不是 document.ready() 函数加载脚本。

此解决方案的问题是滚动条在加载所有页面之前无法工作，包括不属于滚动区域内主要内容的图像。

我考虑过在字体 url 上使用 load 事件，但是每个浏览器都有一个字体文件，所以这也行不通。任何帮助请。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T04:56:59.767

我为此找到的最佳解决方案是在准备好的文档上加载 tinyscrollbar 并在窗口加载时更新它。

```
<script type="text/javascript">
   jQuery(document).ready(function() {
        jQuery('#scrollbar1').tinyscrollbar({ sizethumb: 50 });
    });
   jQuery(window).load(function () {
        jQuery('#scrollbar1').tinyscrollbar_update();
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T04:45:15.483

您可以尝试在 tinyscrollbar.js 上设置超时。只需调整“400”数字，直到它在正确的时间加载。

```
$(document).ready(function() {
setTimeout(function() {
//Call tinyscrollbar here   
}, 400)
}); 
```

更好的方法是等到字体加载的确切时刻。例如，TypeKit 提供了三个回调，其中一个允许您在字体全部加载后立即调用另一个脚本：http: [//blog.typekit.com/2010/10/18/more-control-with-typekits -字体事件/](http://blog.typekit.com/2010/10/18/more-control-with-typekits-font-events/)。

如果您使用的是 Typekit，这是他们提供的示例：

```
<script type="text/javascript" src="http://use.typekit.com/xxxxxxx.js"></script>
<script type="text/javascript">
 try {
   Typekit.load({
     loading: function() {
       // Javascript to execute when fonts start loading
     },
     active: function() {
       // Javascript to execute when fonts become active
     },
     inactive: function() {
       // Javascript to execute when fonts become inactive
     }
   })
 } catch(e) {}
 </script> 
```

`active`当 TypeKit 处于该状态时，您会想调用 tinyscollbar 。

# r - 通过 apply 将参数传递给迭代函数

> ID：12792896
> 
> 赞同：35
> 
> 时间：2011-01-21T15:37:09.363
> 
> 标签：r

我有一个像这样的函数：

```
FUN <- function(x, parameter){
  if (parameter == 1){
      z <- DO SOMETHING WITH "x"}
  if (parameter ==2){
      z <- DO OTHER STUFF WITH "x"}
return(z)
} 
```

现在，我想使用 apply 在数据集上使用该函数。问题是，那`apply(data,1,FUN(parameter=1))`

不会工作，因为 FUN 不知道“x”是什么。有没有办法告诉应用以“x”作为当前行/列来调用 FUN？`

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2011-01-21T15:55:53.000

你想要`apply(data,1,FUN,parameter=1)`。注意`...`函数定义中的：

```
> args(apply)
function (X, MARGIN, FUN, ...) 
NULL 
```

以及文档中的相应条目：

> ...：“FUN”的可选参数。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2011-01-21T15:57:41.810

您可以在调用中创建一个匿名函数，`apply`以便 FUN 知道“x”是什么：

```
apply(data, 1, function(x) FUN(x, parameter = 1)) 
```

请参阅`?apply`底部使用此方法的示例。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T19:05:49.890

`...`这是一个使用对象传递参数的实际示例，并且`*apply`. 它很光滑，这似乎是一个解释使用的简单示例。要记住的重要一点是，当您定义一个参数时，因为`...`对该函数的所有调用都必须具有命名参数。（所以 R 明白你想把什么放在哪里）。例如，我本可以调用`times <- fperform(longfunction, 10, noise = 5000)`，但离开`noise =`会给我一个错误，因为它正在通过`...` 我的个人风格是命名所有参数，如果 a`...`只是为了安全而使用。

您可以看到参数`noise`是在调用中定义的，`fperform(FUN = longfunction, ntimes = 10, noise = 5000)`但没有被用于另外 2 个级别，`diff <- rbind(c(x, runtime(FUN, ...)))`最终调用`fun <- FUN(...)`

```
# Made this to take up time
longfunction <- function(noise = 2500, ...) {
  lapply(seq(noise), function(x) {
    z <- noise * runif(x)
  })
}

# Takes a function and clocks the runtime
runtime <- function(FUN, display = TRUE, ...) {
  before <- Sys.time()
  fun <- FUN(...)
  after <- Sys.time()
  if (isTRUE(display)) {
    print(after-before)
  }
  else {
    after-before
  }
}

# Vectorizes runtime() to allow for multiple tests
fperform <- function(FUN, ntimes = 10, ...) {   
  out <- sapply(seq(ntimes), function(x) {
    diff <- rbind(c(x, runtime(FUN, ...)))
  })
}

times <- fperform(FUN = longfunction, ntimes = 10, noise = 5000)

avgtime <- mean(times[2,])
print(paste("Average Time difference of ", avgtime, " secs", sep="")) 
```

# google-app-engine - Google App Engine 无法上传项目文件

> ID：12792901
> 
> 赞同：1
> 
> 时间：2012-10-09T04:38:46.977
> 
> 标签：google-app-engine

我进行了更改`backends.py`，我正在尝试上传项目并遇到错误。我也使用了回滚命令，但我不断收到错误消息。

```
 Error 409: --- begin server output ---
 Another transaction by user admin is already in progress for app: s~test-appx, 
 backend: urlstat. That user can undo the transaction with "appcfg backends rollback".
--- end server output --- 
```

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:02:08.940

这种情况有时会在推送过程中发生可怕的事情时发生。如果您等待的时间足够长，它最终会超时，您将能够再次正常更新。

该锁特定于您的应用程序的某个版本。因此，如果时间很短，您可以通过推送到不同的版本来解决此错误，然后从 appspot.com 仪表板将其设为默认版本。

该`-V`标志允许您指定要定位的版本。

```
appcfg.py -V 2 update ./myapp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:38:40.323

我在“中断”更新时遇到了同样的错误，是的，回滚也无济于事。对我有用的是不断更新直到错误消失 - 这不是一个真正的答案，但我似乎无法添加评论

# php - PHP cURL 不返回 Content-Encoding 标头

> ID：12792910
> 
> 赞同：1
> 
> 时间：2012-10-09T04:39:53.880
> 
> 标签：php, curl

当我`curl -I http://api.stackoverflow.com/1.1/badges`从终端运行时，它会显示以下标题：

```
HTTP/1.1 200 OK
Cache-Control: private
Content-Length: 42804
Content-Type: application/json; charset=utf-8
Content-Encoding: gzip
X-AspNetMvc-Version: 4.0
X-RateLimit-Max: 300
X-RateLimit-Current: 297
X-AspNet-Version: 4.0.30319
Set-Cookie: .ASPXBrowserOverride=; expires=Mon, 08-Oct-2012 04:29:28 GMT; path=/
Date: Tue, 09 Oct 2012 04:29:27 GMT 
```

然而，当我通过 PHP 运行相同的 cURL 请求时，我得到了这个：

```
Array
(
    [url] => http://api.stackoverflow.com/1.1/badges?10102
    [content_type] => application/json; charset=utf-8
    [http_code] => 200
    [header_size] => 277
    [request_size] => 85
    [filetime] => -1
    [ssl_verify_result] => 0
    [redirect_count] => 0
    [total_time] => 0.168343
    [namelookup_time] => 0.023417
    [connect_time] => 0.046293
    [pretransfer_time] => 0.046365
    [size_upload] => 0
    [size_download] => 42804
    [speed_download] => 254266
    [speed_upload] => 0
    [download_content_length] => 42804
    [upload_content_length] => 0
    [starttransfer_time] => 0.097563
    [redirect_time] => 0
    [certinfo] => Array
        (
        )

    [redirect_url] => 
) 
```

对我来说重要的主要区别是，当通过 PHP 运行时，我没有得到`Content-Encoding`标题，没有它我不知道内容是否需要 gzip 膨胀。

有没有办法获取`Content-Encoding`标题，或者以其他方式检查 gzip 压缩？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T05:56:06.520

返回的[getinfo](http://php.net/manual/en/function.curl-getinfo.php)数组中没有`header_response`也没有。我认为getinfo 会给出响应头，但只给出请求头。`accept-encoding``CURLINFO_HEADER_OUT`

`CURLOPT_HEADER`但是您可以使用设置为 true的选项来获取原始标头。所以我建议你做一些不那么自然的事情：

```
$curl = curl_init();

$opts = array (
        CURLOPT_URL => 'http://api.stackoverflow.com/1.1/badges',
        CURLOPT_TIMEOUT => 120,
        CURLOPT_RETURNTRANSFER => true,
        CURLOPT_FOLLOWLOCATION => true,
        CURLOPT_ENCODING => 'gzip',
        CURLOPT_HEADER => true,
);
curl_setopt_array($curl, $opts);

$return = curl_exec($curl);

list($rawHeader, $response) = explode("\r\n\r\n", $return, 2);

$cutHeaders = explode("\r\n", $rawHeader);
$headers = array();
foreach ($cutHeaders as $row)
{
    $cutRow = explode(":", $row, 2);
    $headers[$cutRow[0]] = trim($cutRow[1]);
}

echo $headers['Content-Encoding']; // gzip 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T05:32:34.347

如果设置`CURLOPT_HEADER`为`true`，curl 会在正文旁边返回标题。如果您只对标头感兴趣，您可以设置`CURLOPT_NOBODY`为`true`并且不返回正文（它模拟`-I`命令行上的标志）。

此示例仅设置`CURLOPT_HEADER`，读取`Content-Encoding`标头（如果已设置）并解压缩正文：

```
$curl = curl_init();

curl_setopt($curl, CURLOPT_URL, "http://api.stackoverflow.com/1.1/badges");
curl_setopt($curl, CURLOPT_HEADER, 1);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);

$response = curl_exec($curl);
curl_close($curl);

list($header, $body) = explode("\r\n\r\n", $response, 2);
if(preg_match('@Content-Encoding:\s+(\w+)@i', $header, $match)) {
    switch (strtolower($match[1])) {
        case 'gzip':
            $body = gzdecode($body);
        break;

        case 'compress':
            $body = gzuncompress($body);
        break;

        case 'deflate':
            $body = gzdeflate($body);
        break;
    }
}
echo $header;
echo $body; 
```

免责声明：[`gzdecode`](http://php.net/manual/en/function.gzdecode.php)可能在您的 PHP 版本中不可用。我已经使用 PHP 5.4.4 对其进行了测试，并且可以正常工作。

您还可以安装[`HTTP_Request2`](http://pear.php.net/manual/en/package.http.http-request2.intro.php)-PEAR 包，它会为您执行此操作（此外，您无需进行 HTTP 标头解析即可轻松访问标头）：

```
include 'HTTP/Request2.php';
$request  = new HTTP_Request2('http://api.stackoverflow.com/1.1/badges',
    HTTP_Request2::METHOD_GET);

$response = $request->send();

echo $response->getBody(); 
```

# r - 如何在 ggplot 的背景中绘制一些东西？

> ID：12792911
> 
> 赞同：10
> 
> 时间：2012-10-09T00:42:00.290
> 
> 标签：r, data-visualization, ggplot2

我正在制作篮球投篮图表。我需要弄清楚如何在背景中实际绘制篮球场的轮廓。有任何想法吗？

![在此处输入图像描述](../Images/e17a65d1195531b9113dbbaba5027bf5.png)

![在此处输入图像描述](../Images/672b98dd29521a5100c01bf917e757bc.png)

![在此处输入图像描述](../Images/b0483077ef01b8826d8902b032a66d8c.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T15:03:33.757

![在此处输入图像描述](../Images/00f9184be1af278c5b325973261609a7.png)

以下代码用于获取此图像：

```
    ggplot(shots, aes(X,Y)) + stat_binhex(binwidth=c(3,3)) +
    geom_point(size=3, alpha=0.5, aes(color=RESULT), position="jitter") +
    coord_equal() + theme_grey() + opts(title="金州勇士队 2012 投篮图") +
    geom_path(data=ft_line, aes(x,y), colour="white", size=2) +
    geom_path(data=court, aes(x,y), colour="white", size=2)

```

geom_path 命令中的数据包含白色球场图的 (x,y) 坐标。

# c - 读取 TEXT 文件 C

> ID：12792916
> 
> 赞同：0
> 
> 时间：2012-10-09T04:40:42.237
> 
> 标签：c, file, text, fgets

下面的文本文件是我正在处理的标准。

基本上我想记录在处理下面的文本文件过程中涉及多少时间步。

重要的行是第一行，行以'if'开头。'if' 行的处理方式如下：如果 i < 3 i=i+1 goto 8 我假设 i 初始化为 0。

这意味着只要 i 小于 3，控件就应该跳转到第 8 行

```
10
1fi
if i < 3 i=i+1 goto 8
3sdkfj
4ksdkk
5kdkfk
6kdkjf
7dkjkfd
if k < 2 k=k+1 goto 2
9dkkf
10dku
if j < 2 j=j+1 goto 2 
```

我的问题是，使用 fopen 打开文本文件并使用 fgets 收集行...我将如何使用 fgets 返回到 fgets 已经处理的行，即执行上述文本文件中的 if 语句建议并返回到第 2 行。无需再次打开文本文件并执行任何操作...

到目前为止，我的代码可以收集 in.file 中任何给定文本文件中的第一行和行数，如下所示：

```
./JobA.txt
./JobB.txt
./JobC.txt
./JobD.txt 
```

我的代码：

```
 #include <errno.h>
    #include <limits.h>
    #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>
    #include <unistd.h>
    #include <ctype.h>

    #include "projscheduler.h"

    /* I/O Files */
    //static char *inputFile;
    char * in;
    static FILE *input;
    static FILE *cur;
    /*Scheduled jobs indexed by PID*/
    struct job list[20];

    /* the next job to schedule */
    //static struct job *job_next = NULL;

    /* Time */
    time 

clock;

/*Initialises job list*/
static void initialise_list(void) {
    for(int i = 0; i < sizeof(list)/sizeof(list[0]); i++) {
        list[i].parameters.pid = -1;
    }
}

/*Order Jobs*/
/*=static void order_jobs(void)
{
    for(int i=0; i < sizeof(list)/sizeof(list[0]); i++)
    {

}
*/

/** Read and parse input from input file */
static void parse_input(void) 
{
    char    buffer[BUFSIZ];
    char    lines[BUFSIZ];
    int jobs = 0;
    struct  job *current;

    initialise_list();

    while( fgets(buffer, sizeof(buffer), input) )   
    {

        time start;
        char buf[BUFSIZ];
        sscanf(buffer,"./%s/", buf);
        cur = fopen(buf, "r" );

        int steps = 0;

        while( fgets(lines, sizeof(lines), cur) )
        {

            if( steps == 0 )
            {
                current = &list[jobs];
                strcpy(current->job_id, buf);
                sscanf(lines,"%ld", &start);
                current->parameters.start = start;              
            }

            steps++;
        } 
        current->parameters.scheduled = steps;

        jobs++;

        fclose(cur);

    } 

    for (int i = 0; i < jobs; i++)
    {
        printf("%s %ld  %ld\n", list[i].job_id, list[i].parameters.start, list[i].parameters.scheduled);
    }   

}   

int main(int argc, char **argv) 
{
    in = argv[1];
    if ( (input = fopen(in, "r")) == NULL ) {
        fprintf(stderr, "cannot open %s\n", argv[1]);
    }

    parse_input();

    fclose(input);

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:48:45.057

在文件中向后退有几种可能性：

1.  将文件的所有行存储在一个数组中（这不能很好地扩展！！）
2.  关闭文件并重新打开它，跳到第 n 行（很多不必要的文件打开和关闭）
3.  使用 fseek 转到正确的行（在每行的开头记录 ftell 的内容，然后使用 fseek 回到它们）。这可以更好地扩展。

[这是fseek](http://www.cplusplus.com/reference/clibrary/cstdio/fseek/)和[ftell](http://www.cplusplus.com/reference/clibrary/cstdio/ftell/)中的一些信息

# android - 'cursor.getString(1)' 中的整数“1”是什么意思？

> ID：12792920
> 
> 赞同：-3
> 
> 时间：2012-10-09T04:41:44.283
> 
> 标签：android

请问cursor.getString(1)这个括号里填的整数“1”或者其他整数是什么意思？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T04:44:04.613

这是列*索引。*

例如，如果查询是`select a, b, c from ...`，则列索引 1 将是`b`（从零开始，该查询的列索引是`0 = a`,`1 = b`和`2 = c`）。

有关更多详细信息，请参见[此处](http://developer.android.com/reference/android/database/Cursor.html#getString%28int%29)。

另一种方法是使用`cursor.getString (cursor.getColumnIndex ("b"))`假设您确定该列存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T04:44:36.687

它是游标中的列索引，从查询返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T04:45:50.197

根据文档，整数是您要检索的列的从零开始的索引：

[http://developer.android.com/reference/android/database/Cursor.html#getString(int](http://developer.android.com/reference/android/database/Cursor.html#getString(int) )

# php - 如何在 HTML 代码中的 PHP 日期中添加 2 个月？

> ID：12792926
> 
> 赞同：4
> 
> 时间：2012-10-09T04:42:39.590
> 
> 标签：php, html, date

我是 PHP 新手，我想在 html 代码中为特定日期添加 2 个月。我该怎么做？请指导我，

这是我使用的代码：

```
 private function inputExpiryDate() {
    $value = $this->expiryDate;
    $html = "";
    $html .= '<label for="expirydate">Expiry Date:</label>';
    $html .= '<input type="text" readonly name="expirydate" id="expirydate" value="'.$value.'">';
    $html .= '<input type="button" id="expirydatebutton" onclick="getExpiryDate()">' . PHP_EOL;
    return $html;
} 
```

问题是我将如何添加这个

```
$date = strtotime(date("Y-m-d", strtotime($date)) . " +2 month"); ?? 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T04:49:12.460

`$date`在进行相对日期更改时，您不必分解该值来使用它。这应该可以按预期工作：

```
$date = date('Y-m-d', strtotime("$date +1 month")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T04:51:10.603

后

```
$date = strtotime(date("Y-m-d", strtotime($date)) . " +1 month"); 
```

添加行

```
echo date("Y-m-d", $date); 
```

由于第一句将返回您的 Unix Timestamp，因此您再次需要将其转换为可读格式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T04:47:50.110

你只需要`date('Y-m-d)`像这样添加`date('Y-m-d',strtotime(date("Y-m-d", strtotime($date)) . " +1 month"))`

# php - 本地服务器上的 MySQL 开销

> ID：12792932
> 
> 赞同：0
> 
> 时间：2012-10-09T04:43:06.360
> 
> 标签：php, mysql, json, wamp

我有一个使用 JQuery mobile 构建的移动应用程序，响应时间对我来说非常重要，因为我想为我的用户提供流畅的体验。

我只是将网站的安装移动到本地服务器，以提高应用程序的性能，因为它连接到本地 Web 服务器，而不是托管服务器。

我在联网计算机（最新版本）上安装了 WAMP，但由于某种原因，通过本地 MySQL 服务器发送给我的结果比以前托管的要大得多。如果我在本地服务器上运行与托管服务器完全相同的查询/输出，则输出大小会有很大差异。

例如; 我正在生成一个输出并使用 JSON 对其进行编码，以便在 JQuery 中使用。我的托管 Web 服务器吐出的结果是 1kb，但在我的本地服务器上也是 6kb。这反过来会导致更长的响应时间（100-200 毫秒对 1-1.5 秒）。

正如我所说，这是全新安装的 WAMP，运行它的计算机在 CPU 使用率为 0% 时处于空闲状态。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T04:54:43.767

实际内容不一样吗？如果没有，您可能需要查看您的 Apache 设置，即压缩。

[https://stackoverflow.com/a/9856879/675934](https://stackoverflow.com/a/9856879/675934)

# arrays - matlab：在元素之后插入元素？

> ID：12792934
> 
> 赞同：6
> 
> 时间：2012-10-09T04:43:15.657
> 
> 标签：arrays, matlab, insert, indexing

有没有办法在验证某个元素值后将元素插入到数组中？例如，取

```
A = [0 0 1 1 0 1 0] 
```

在数组中的每个 1 之后，我想插入另一个 1 以获得

```
Anew = [0 0 1 1 1 1 0 1 1 0] 
```

但是，我想要一种针对一般情况进行编码的方法（任何长度为 1 的行数组，并且这些数组可能按任何顺序排列）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T05:05:29.683

```
A = [0 0 1 1 0 1 1];

i = (A == 1);  % Test for number you want insert after
t = cumsum(i);              
idx = [1 (2:numel(A)) + t(1:end-1)];

newSize = numel(A) + sum(i);
N = ones(newSize,1)*5;             % Make this number you want to insert

N(idx) = A 
```

Output:

```
N =

     0     0     1     5     1     5     0     1     5     0 
```

I made the inserted number 5 and split things onto multiple lines so it's easy to see what's going on.

If you wanted to do it in a loop (and this is how I would do it in real life where no-one can see me showing off)

```
A = [0 0 1 1 0 1 0];

idx = (A == 1);  % Test for number you want insert after
N = zeros(1, numel(A) + sum(idx));
j = 1;
for i = 1:numel(A)
    N(j) = A(i);
    if idx(i)
        j = j+1;
        N(j) = 5;       % Test for number you want to insert after
    end
    j = j+1;
end

N 
```

Output:

N =

```
 0     0     1     5     1     5     0     1     5     0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T07:42:55.817

这应该可以解决问题：

```
>> A = [0 0 1 1 0 1 0] 
>>
>> sumA = sum(A);
>> Anew = zeros(1, 2*sumA+sum(~A));
>> I = find(A) + (0:sumA-1);
>> Anew(I) = 1;
>> Anew(I+1) = 8.2;

Anew =
    0  0  1  8.2  1  8.2  0  1  8.2  0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T05:05:04.250

This code is not the most elegant, but it'll answer your question...

```
 A=[0 0 1 1 0 1 0];
 AA=[];
 for ii=1:length(A);
     AA=[AA A(ii)];
     if A(ii)
         AA=[AA 1];
     end
 end 
```

I'm sure there will be also a vectorized way...

# java - 使 Web 应用程序自动确定并知道其版本

> ID：12792939
> 
> 赞同：1
> 
> 时间：2012-10-09T04:44:14.627
> 
> 标签：java, web-applications, build, build-process

我的团队有两个团队：服务器团队和客户端团队。我们服务器团队将提供 API 供客户端团队调用。API 有很多版本，因此我们需要匹配服务器构建和各自的客户端构建 - 例如，如果服务器构建号远大于其支持版本并需要更新，旧客户端将拒绝工作。

由于上述原因，我们需要将服务器的构建版本发送回客户端。目前我们通过在 Config 类中添加一个静态字段来做到这一点。但我担心每次构建新服务器时我们都必须手动增加它——尤其是在我们进行日常构建时。这个过程很容易出错，也不是很优雅。

在我的搜索中，我看到许多建议使用 maven 插件来管理构建版本。尽管我非常感谢自动进程，但它仍然不会让服务器知道内部版本号。服务器应用程序应该能够通过 API 调用将其构建版本返回给客户端。

我曾想过在某处写数字版本（远程数据库，服务器上的文件）。 **有没有办法让构建过程自动增加构建版本，但应用程序本身也可以在运行时检索这个数字？**

我们正在使用 Maven 构建并将 Jenkins 作为集成构建服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T06:13:34.193

`MANIFEST.MF`我通常从Maven 打包在 JAR 中的文件中读取版本。默认情况下，它看起来像这样：

```
Manifest-Version: 1.0
Built-By: user
Build-Jdk: 1.6.0_35
Created-By: Apache Maven 3.0.4
Archiver-Version: Plexus Archiver

Name: Artifact
Implementation-Build: 1.14-SNAPSHOT
Version: 1.14-SNAPSHOT 
```

从这个文件中，我读取了 Version 元素并使用它来显示应用程序的构建版本（例如，以及 WAR/EAR 中打包 jar 的所有版本）。像这样的代码应该可以工作：

```
public static String getApplicationVersion() {
        String version = null;
        try {
            final List<VersionsUtil.Version> moduleVersions = VersionsUtil.getModuleVersions(Thread.currentThread().getContextClassLoader());
            for (VersionsUtil.Version moduleVersion : moduleVersions) {
                if (moduleVersion.name.equals("<NAME OF ARTIFACT TO GET>")) {
                    version = moduleVersion.version;
                    break;
                }
            }
        } catch (IOException e) {
            // We'll return null...
        }
        return version;
    }

public class VersionsUtil {
    private static final Logger LOG = LoggerFactory.getLogger(VersionsUtil.class);

    /**
     * Returns a list of the module versions available for the given class loader.
     *
     * @param classLoader the class loader to return module versions for
     * @return a list of module versions
     * @throws IOException in case there's an error reading the manifest
     */
    public static List<Version> getModuleVersions(final ClassLoader classLoader) throws IOException {
        return processResources(classLoader.getResources("META-INF/MANIFEST.MF"));
    }

    private static List<Version> processResources(final Enumeration<URL> resources) throws IOException {
        final List<Version> moduleVersions = new ArrayList();
        while (resources.hasMoreElements()) {
            URL resource = resources.nextElement();
            Version v = process(resource);
            if (v != null) {
                moduleVersions.add(v);
            }
        }
        return moduleVersions;
    }

    private static Version process(final URL resource) {
        try {
            Properties p = readResource(resource);
            return createVersion(p);
        } catch (IOException e) {
            LOG.warn("Failed to read resource: " + resource, e);
            return null;
        }
    }

    private static Version createVersion(final Properties p) {
        Object name = p.get("Name");
        if (name != null) {
            return new Version((String) name, (String) p.get("Version"));
        }
        return null;
    }

    private static Properties readResource(final URL resource) throws IOException {
        LOG.trace("Reading resource: " + resource);
        InputStream is = resource.openStream();
        Properties p = new Properties();
        p.load(is);
        is.close();
        return p;
    }

    public static final class Version {
        String name;
        String version;

        private Version(final String name, final String version) {
            this.name = name;
            this.version = version;
        }

    }
} 
```

更新：如果您想要 Jenkins 内部版本号，`MANIFEST.MF`您可以使用以下内容进行配置`POM.XML`：

```
 ...
  <plugin>
    <artifactId>maven-jar-plugin</artifactId>
    <version>2.2</version>
    <configuration>
      <archive>
        <manifestSections>
          <manifestSection>
            <name>${project.name} (${project.artifactId})</name>
            <manifestEntries>
              <Version>${project.version}${build.number}</Version>
            </manifestEntries>
          </manifestSection>
        </manifestSections>
      </archive>
    </configuration>
  </plugin>
  ...
  <properties>
     <build.number />
  </properties>
  ... 
```

如果您对标记 WAR/EAR 文件感兴趣，则必须相应地添加清单配置。然后在您的 Jenkins 作业配置中，只需将`BUILD_NUMBER`参数传递给 maven 进程，如下所示`-Dbuild.number=$BUILD_NUMBER`：

# objective-c - 如何将导航栏的Title View改成一些Custom View并填充原来的大小

> ID：12792940
> 
> 赞同：2
> 
> 时间：2012-10-09T04:44:16.807
> 
> 标签：objective-c, uinavigationcontroller, uinavigationbar, xcode4.5

我想用常规文本字段更改 navigationBar 的 titleView。然后我想设置 textField 的大小来填充旧的“正常”titleView。

我似乎无法在故事板中做到这一点。将文本字段拖到导航标题视图所在的位置不起作用。

所以我在

```
-(void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    PO(self.navigationItem.titleView);
    CGRect theFrame= self.navigationItem.titleView.frame;
    self.navigationItem.titleView=self.searchBar;
    //self.searchBar.frame = theFrame;
    while (false);
... 
```

它正在使用一个缓存。该 PO 是一个打印对象内容的宏。结果在 viewDidAppear，self.navigationItem.titleView 为空。

所以虽然我可以显示搜索栏，但我不能让搜索栏“填充”它的空间，因为我不知道空间是什么。

我不喜欢硬编码，因为你知道，未来可能会发生变化。

所以我该怎么做？

我曾经看过代码，而不是设置 self.navigationItem.titleView，您只需向其中添加子视图。即使在 viewDidAppear、self.navigationItem.titleView 上，这种方法的问题也是 0。

我添加了这些代码：

```
CGRect theFrame= self.navigationItem.titleView.frame;
CGRect theFrame2 = self.searchBar.frame;
CGRect theFrame3 = self.navigationController.navigationItem.titleView.frame; 
```

而且，我不知道如何nslog结构值，但是，theFrame和theFrame3都是0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T05:06:25.923

**你可以在viewWillAppear**里面试试这个：

 **```
UIView *customTitleView = [[UIView alloc]initWithFrame:CGRectMake((320-210)/2, 0, 210, 50)];
customTitleView.backgroundColor = [UIColor clearColor];

//create your UITextField or UILabel or other view and add as subview of customTitleView

self.navigationItem.titleView = customTitleView; 
```**

# java - Java 字符串实习的替代方案

> ID：12792942
> 
> 赞同：8
> 
> 时间：2012-10-09T04:44:47.597
> 
> 标签：java, string, memory, string-interning

由于 Java 的默认字符串实习受到了很多负面报道，因此我正在寻找替代方案。

你能推荐一个 API 来替代 Java 字符串实习吗？我的应用程序使用 Java 6。我的要求主要是通过实习避免重复字符串。

### 关于坏消息：

*   字符串实习生是通过本机方法实现的。并且 C 实现使用一些 1k 条目的固定大小，并且对于大量字符串的扩展性非常差。
*   Java 6 将实习字符串存储在 Perm gen 中。因此不是 GC'd 并可能导致 perm gen 错误。我知道这在 java 7 中已修复，但我无法升级到 java 7。

### 为什么我需要使用 intering？

*   我的应用程序是一个堆大小为 10-20G 的服务器应用程序，用于不同的部署。
*   在分析过程中，我们发现数十万个字符串是重复的，我们可以通过避免存储重复的字符串来显着提高内存使用率。
*   内存一直是我们的瓶颈，因此我们将其作为目标，而不是进行任何过早的优化。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T06:12:26.307

> 字符串实习生是通过本机方法实现的。并且 C 实现使用一些 1k 条目的固定大小，并且对于大量字符串的扩展性非常差。

对于数千个字符串，它的扩展性很差。

> Java 6 将实习字符串存储在 Perm gen 中。因此不是 GC'd

当 perm gen 被清理时它会被清理，这并不常见，但如果你不增加它，这可能意味着你达到了这个空间的最大值。

> 我的应用程序是一个堆大小为 10-20G 的服务器应用程序，用于不同的部署。

我建议您考虑使用堆外内存。我在一个应用程序中有 500 GB 的堆外内存和大约 1 GB 的堆。它并非在所有情况下都有用，但值得考虑。

> 在分析过程中，我们发现数十万个字符串是重复的，我们可以通过避免存储重复的字符串来显着提高内存使用率。

为此，我使用了一个简单的字符串数组。这是非常轻量级的，您可以轻松控制存储的字符串的上限。

* * *

这是一个通用内部的例子。

```
class Interner<T> {
    private final T[] cache;

    @SuppressWarnings("unchecked")
    public Interner(int primeSize) {
        cache = (T[]) new Object[primeSize];
    }

    public T intern(T t) {
        int hash = Math.abs(t.hashCode() % cache.length);
        T t2 = cache[hash];
        if (t2 != null && t.equals(t2))
            return t2;
        cache[hash] = t;
        return t;
    }
} 
```

这个缓存的一个有趣属性是它不是线程安全的并不重要。

为了获得额外的速度，您可以使用 2 的幂和一个位掩码，但它更复杂，并且可能无法很好地工作，具体取决于您的 hashCode 的计算方式。

# c - strcmp 使用节点

> ID：12792948
> 
> 赞同：-1
> 
> 时间：2012-10-09T04:45:28.760
> 
> 标签：c, nodes, strcmp

```
int wordCmp (struct lnode* n1, struct lnode* n2) 
```

您将如何返回一个整数值，指示两个节点中的字符串之间的关系？我不太确定如何比较节点中的字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T04:48:32.300

我不知道您的 Inode 结构的结构，但认为它是这样的：

```
struct Inode
{
    char str[20];
}; 
```

那么您可以将 wordCmp 函数编写为：

```
int wordCmp(struct Inode *n1, struct Inode *n2)
{
    return strcmp(n1->str, n2->str);
} 
```

我希望这有帮助！

# ios - iOS - 未调用 viewDidUnload，但调用了 didReceiveMemoryWarning

> ID：12792950
> 
> 赞同：1
> 
> 时间：2012-10-09T04:45:47.607
> 
> 标签：ios, memory-management, didreceivememorywarning, viewdidunload

试图找出某些设备崩溃的原因。我注意到我的视图控制器正在接收`didReceiveMemoryWarning`，但不是`viewDidUnload`。根据苹果的说法：

> 您不会使用 didReceiveMemoryWarning 来释放对视图对象的引用，您可能会使用它来释放您尚未在 viewDidUnload 方法中释放的任何与视图相关的数据结构。（视图对象本身应始终在 viewDidUnload 方法中释放。）

所以，

- 答：为什么`viewDidUnload`不叫？如果从不调用它，我无法在此处删除我的视图对象。

B：如果我不应该删除 中的视图对象`didReceiveMemoryWarning`，我还能在哪里执行此操作？

C: 使用 ARC，我还需要删除视图对象、将数组设置为 nil 等吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:57:00.267

正如另一个提到`viewDidUnload:`的在 iOS 6 中已弃用。但作为附加信息，您应该知道，很少需要卸载 a，`UIView`因为 iOS 6 在后台执行其神奇的事情 - 它正在破坏`CALayer`视图支持的位图层（这是迄今为止最大的“部分” a `UIView`）。如果再次需要该视图，iOS 将调用`drawRect:`您在哪里编写视图，一切都会好起来的。

有关更多信息，请阅读 Joe Conway 的这篇精彩文章：[iOS 6 中的 ViewController 生命周期](http://thejoeconwayblog.wordpress.com/2012/10/04/view-controller-lifecycle-in-ios-6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T04:56:06.440

`viewDidUnload`在 iOS6 中已弃用。如果您认为有必要，您“可以”删除视图`didReceiveMemoryWarning`，但这取决于您。

该线程也可能有所帮助。

[ios6 中不再调用 viewDidUnload](https://stackoverflow.com/questions/12509102/viewdidunload-no-longer-called-in-ios6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T04:49:42.813

`didReceiveMemoryWarning`专门针对不卸载视图，而是让视图控制器*释放可以轻松重新创建的对象*（即 UIIamges 等）。除非可以根据需要轻松重新创建对象，否则不应释放视图中的对象。

# android - 错误：android.support.v4.content.Loader 处的 java.lang.NullPointerException

> ID：12792953
> 
> 赞同：5
> 
> 时间：2012-10-09T04:45:54.623
> 
> 标签：android, android-support-library, android-loadermanager

我想`LoaderManager`在我的应用程序中实现以减少启动时间[正如您在此处看到](https://stackoverflow.com/questions/12767014/how-to-make-the-android-app-load-faster)的，但在该线程中实现建议后，我收到以下错误`initLoader(int, Bundle, LoaderManager.LoaderCallbacks) in the type LoaderManager is not applicable for the arguments (int, null, MainActivity)`。在这里搜索后，我在这里找到了第二个错误的解决[方案](https://stackoverflow.com/questions/9918397/initializing-a-loader-in-an-activity)。但是在实施了后来的建议之后，现在我得到了错误`java.lang.NullPointerException at android.support.v4.content.Loader`。我正在提交我目前拥有的代码，谁能告诉我，我该如何解决这个问题

**完整的代码可以在** [这里看到](http://pastebin.com/gNa3jcYW)

**原木猫**

```
10-03 20:11:34.849: E/AndroidRuntime(2968): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.test.sms.it/com.test.sms.it.MainActivity}: java.lang.NullPointerException
10-03 20:11:34.849: E/AndroidRuntime(2968):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
10-03 20:11:34.849: E/AndroidRuntime(2968):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
10-03 20:11:34.849: E/AndroidRuntime(2968):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-03 20:11:34.849: E/AndroidRuntime(2968):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
10-03 20:11:34.849: E/AndroidRuntime(2968):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-03 20:11:34.849: E/AndroidRuntime(2968):     at android.os.Looper.loop(Looper.java:123)
10-03 20:11:34.849: E/AndroidRuntime(2968):     at android.app.ActivityThread.main(ActivityThread.java:3683)
10-03 20:11:34.849: E/AndroidRuntime(2968):     at java.lang.reflect.Method.invokeNative(Native Method)
10-03 20:11:34.849: E/AndroidRuntime(2968):     at java.lang.reflect.Method.invoke(Method.java:507)
10-03 20:11:34.849: E/AndroidRuntime(2968):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-03 20:11:34.849: E/AndroidRuntime(2968):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-03 20:11:34.849: E/AndroidRuntime(2968):     at dalvik.system.NativeStart.main(Native Method)
10-03 20:11:34.849: E/AndroidRuntime(2968): Caused by: java.lang.NullPointerException
10-03 20:11:34.849: E/AndroidRuntime(2968):     at android.support.v4.content.Loader.<init>(Loader.java:91)
10-03 20:11:34.849: E/AndroidRuntime(2968):     at android.support.v4.content.AsyncTaskLoader.<init>(AsyncTaskLoader.java:92)
10-03 20:11:34.849: E/AndroidRuntime(2968):     at com.test.sms.it.MainActivity$ContactsDataLoader.<init>(MainActivity.java:104)
10-03 20:11:34.849: E/AndroidRuntime(2968):     at com.test.sms.it.MainActivity.onCreateLoader(MainActivity.java:496)
10-03 20:11:34.849: E/AndroidRuntime(2968):     at android.support.v4.app.LoaderManagerImpl.createLoader(LoaderManager.java:487)
10-03 20:11:34.849: E/AndroidRuntime(2968):     at android.support.v4.app.LoaderManagerImpl.createAndInstallLoader(LoaderManager.java:496)
10-03 20:11:34.849: E/AndroidRuntime(2968):     at android.support.v4.app.LoaderManagerImpl.initLoader(LoaderManager.java:550)
10-03 20:11:34.849: E/AndroidRuntime(2968):     at com.test.sms.it.MainActivity.onCreate(MainActivity.java:91)
10-03 20:11:34.849: E/AndroidRuntime(2968):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-03 20:11:34.849: E/AndroidRuntime(2968):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611) 
```

**MainActivity.java**

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;
import android.app.AlertDialog;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.SharedPreferences;
import android.database.Cursor;
import android.graphics.Color;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.provider.ContactsContract;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.LoaderManager;
import android.support.v4.content.AsyncTaskLoader;
import android.support.v4.content.Loader;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.AutoCompleteTextView;
import android.widget.Button;
import android.widget.EditText;
import android.widget.SimpleAdapter;
import android.widget.Spinner;
import android.widget.Toast;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.activity_main);
    editUser1UserName = (EditText) findViewById(R.id.editTextUser1UserName);
    editUser1Password = (EditText) findViewById(R.id.editTextUser1Password);
    editUser2UserName = (EditText) findViewById(R.id.editTextUser2UserName);
    editUser2Password = (EditText) findViewById(R.id.editTextUser2Password);
    editUser3UserName = (EditText) findViewById(R.id.editTextUser3UserName);
    editUser3Password = (EditText) findViewById(R.id.editTextUser3Password);
    editUser4UserName = (EditText) findViewById(R.id.editTextUser4UserName);
    editUser4Password = (EditText) findViewById(R.id.editTextUser4Password);
    editUser5UserName = (EditText) findViewById(R.id.editTextUser5UserName);
    editUser5Password = (EditText) findViewById(R.id.editTextUser5Password);
    mTxtPhoneNo = (AutoCompleteTextView) findViewById(R.id.mmWhoNo);
    mTxtPhoneNo.setThreshold(1);
    mTxtPhoneNo.setTextColor(Color.BLACK);
    editText = (EditText) findViewById(R.id.editTextMessage);
    spinner1 = (Spinner) findViewById(R.id.spinnerGateway);
    btnsend = (Button) findViewById(R.id.btnSend);
    btnContact = (Button) findViewById(R.id.btnContact);
    btnClear = (Button) findViewById(R.id.btnClear);
    btnClear.setOnClickListener(this);
    btnsend.setOnClickListener(this);
    btnContact.setOnClickListener(this);
    mPeopleList = new ArrayList<Map<String, String>>();
    getSupportLoaderManager().initLoader(0, null, this);
    mTxtPhoneNo.setOnItemClickListener(this);
    readPerson();
    Panel panel;
    topPanel = panel = (Panel) findViewById(R.id.mytopPanel);
    panel.setOnPanelListener(this);
    panel.setInterpolator(new BounceInterpolator(Type.OUT));
    getLoginDetails();
}

public class ContactsDataLoader extends
        AsyncTaskLoader<ArrayList<Map<String, String>>> {
    public ContactsDataLoader(Context context) {
        super(context);
    }

    @Override
    public ArrayList<Map<String, String>> loadInBackground() {
        mPeopleList.clear();
        Cursor people = getContentResolver().query(
                ContactsContract.Contacts.CONTENT_URI, null, null, null,
                null);
        while (people.moveToNext()) {
            String contactName = people
                    .getString(people
                            .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
            String contactId = people.getString(people
                    .getColumnIndex(ContactsContract.Contacts._ID));
            String hasPhone = people
                    .getString(people
                            .getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER));

            if ((Integer.parseInt(hasPhone) > 0)) {
                Cursor phones = getContentResolver().query(
                        ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                        null,
                        ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                                + " = " + contactId, null, null);
                while (phones.moveToNext()) {
                    String phoneNumber = phones
                            .getString(phones
                                    .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                    String numberType = phones
                            .getString(phones
                                    .getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE));
                    Map<String, String> NamePhoneType = new HashMap<String, String>();
                    NamePhoneType.put("Name", contactName);
                    NamePhoneType.put("Phone", phoneNumber);
                    if (numberType.equals("0"))
                        NamePhoneType.put("Type", "Work");
                    else if (numberType.equals("1"))
                        NamePhoneType.put("Type", "Home");
                    else if (numberType.equals("2"))
                        NamePhoneType.put("Type", "Mobile");
                    else
                        NamePhoneType.put("Type", "Other");
                    mPeopleList.add(NamePhoneType);
                }
                phones.close();
            }
        }
        people.close();
        startManagingCursor(people);
        return mPeopleList;
    }

    @Override
    protected void onStartLoading() {
        super.onStartLoading();
        forceLoad();
    }
}

public Loader<ArrayList<Map<String, String>>> onCreateLoader(int id,
        Bundle args) {
    return new ContactsDataLoader(context);
}

public void onLoadFinished(Loader<ArrayList<Map<String, String>>> loader,
        ArrayList<Map<String, String>> data) {
    mPeopleList = data;
    mAdapter = new SimpleAdapter(this, mPeopleList, R.layout.custcontview,
            new String[] { "Name", "Phone", "Type" }, new int[] {
                    R.id.ccontName, R.id.ccontNo, R.id.ccontType });
    mTxtPhoneNo.setAdapter(mAdapter);
}

public void onLoaderReset(Loader<ArrayList<Map<String, String>>> loader) {
    mPeopleList = new ArrayList<Map<String, String>>();
    mAdapter = new SimpleAdapter(this, mPeopleList, R.layout.custcontview,
            new String[] { "Name", "Phone", "Type" }, new int[] {
                    R.id.ccontName, R.id.ccontNo, R.id.ccontType });
    mTxtPhoneNo.setAdapter(mAdapter);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:30:56.950

`RC`的评论是您问题的答案。您将 a （因为我在您发布使用有效引用初始化`null` `Context`的变量的代码中的任何地方都看不到）传递给您的自定义加载器，并且代码将失败并显示. 如果您使用了我之前回答中的代码，那么这些回调将在您的. 在这种情况下，只需将当前实例的引用传递给您的自定义加载器：`context``NullPointerException``Activity``this``Activity`

```
public Loader<ArrayList<Map<String, String>>> onCreateLoader(int id,
        Bundle args) {
    return new ContactsDataLoader(this);
} 
```

此外，如果您关闭光标，则无需使用`startManagingCursor()`它，`Cursor`因为您可能会遇到麻烦。

# haskell - Haskell拆分列表函数无限类型错误

> ID：12792954
> 
> 赞同：0
> 
> 时间：2012-10-09T04:45:54.643
> 
> 标签：haskell

我正在研究 Haskell 中的一个函数，它将获取一个列表并将其分成两个大小均匀的列表。这是我所拥有的：

```
split (x:y:xs) = split2 ([((length(x:y:xs) `div` 2)-2) : x ++ y] : [xs])
split2 (x:xs:[y:ys]) = split2 ((x-1) : [xs] ++ y : [ys])
split2 (0:xs:[y:ys]) = (xs:[y:ys]) 
```

该函数获取列表的前两个元素，并将它们放在列表 #2 中，并将第一个列表作为第二个元素附加。然后它获取列表的长度，并将其除以 2 以找出运行次数，同时考虑到它已经从第一个列表中删除了两个元素。然后它将这两条信息放入 split2 中，它从第一个列表中获取另一个元素并将其附加到第一个元素中的第二个列表中，它还从运行次数倒数 1，然后再次运行。

问题是，当我运行它时，我得到了这个：

```
Functions.hs:19:49:
    Occurs check: cannot construct the infinite type: t0 = [t0]
    In the first argument of `(:)', namely `(y)' 
```

19 指的是第 2 行，第一个 split2 函数。不完全确定如何解决此错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T05:32:56.117

很难知道从哪里开始...

让我们从更大的表达式块中定义函数`split2`。

```
f1 (x:y:xs) = (length(x:y:xs) `div` 2)-2
f1 :: [a] -> Int 
```

好的，所以参数是一些东西的列表，它返回一个`Int`

```
f2 (x:y:xs) = ((length(x:y:xs) `div` 2)-2) : x
f2 :: [[Int]] -> [Int] 
```

在这里，`length` `Int`is 与`x`, so `x`must be `[Int]`, so `(x:y:xs)`must be相矛盾`[[Int]]`。我们还可以推断出 与`y`具有相同类型的`x`，并且`xs`是相同类型事物的列表；`[[Int]]`. 所以`x ++ y`也会`[Int]`。

所以，`[xs]`会有 type `[[[Int]]]`。现在，我们将结果包装在一个列表构造函数中，并使用`[xs]`：

```
f3 (x:y:xs) = [((length(x:y:xs) `div` 2)-2) : x ++ y] : [xs]
f3 :: [[Int]] -> [[[Int]]] 
```

我猜你没想到参数是`Int`s 列表的列表。

现在，如果我们查看`split2`，参数模式`(x:xs:[y:ys])`暗示它是以下类型：

```
split2 :: [[a]] -> b
     x :: [a]
    xs :: [a]
     y ::  a
    ys :: [a] 
```

的第一个定义的 rhs`split2`尝试通过连接`(x-1) : [xs]`和来构造一个新列表`y : [ys]`。但是，如果我们将类型替换为`y : [ys]`，我们会发现：

```
y : [ys] :: a : [[a]] 
```

但是由于`(:) :: a -> [a] -> [a]`，这意味着它`[[a]]`必须与 的类型相同`[a]`，或者`a`必须是自身的列表，这是不可能的。

`(x-1)`也输入错误，因为它试图从列表中减去一个。

我不知道您是否要将列表拆分为偶数和奇数元素，或者拆分为前半部分和后半部分。

以下是分为前半部分和后半部分的两个版本，如果长度为奇数，则向下取整 (RD) 或向上取整 (RU)：

```
splitRD xs = splitAt (length xs `div` 2) xs
splitRU xs = splitAt ((length xs + 1) `div` 2) xs 
```

这是一个将列表拆分为偶数和奇数元素的版本：

```
splitEO [] = ([], [])
splitEO [e] = ([e], [])
splitEO (e:o:xs) = (e:es, o:os) where (es, os) = splitEO xs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T05:09:46.313

几点建议

*   将类型写入所有函数。它使代码更具可读性，也有助于捕捉错误。

*   的类型`++`是`[a] -> [a] -> [a]`，您正在添加列表的长度以及元素。由于 list 必须是统一类型并且长度返回`Int`类型，所以编译器推断类型为`split`as `[[Int]] -> t`（假设 split2 返回 type `t`）。

*   当您将 `([((length(x:y:xs)`div传递`2)-2) : x ++ y] : [xs])`给 split2. `xs`is of type`[[Int]]`这意味着 `[xs]`is of type `[[[Int]]]` ，因此编译器推断类型为`split2`to `[[[Int]]] -> t`。

现在在 split2 的定义中

```
 split2 (x:xs:[y:ys]) = split2 ((x-1) : [xs] ++ y : [ys]) 
```

`ys`是类型的`[[Int]]`，所以`y`也是类型的`[Int]`。`xs`是类型`[[Int]]`，但你正在做`[xs] ++ y`，这意味着两者都`[xs]`应该`y`是相同的类型（`[a]`对于某些`a`）。

由于您没有提供任何类型，编译器完全混淆了如何推断这种类型。

如果您只是想将列表分成两个相等的部分，为什么不做一些更简单的事情，比如

```
split3 :: [a] -> ([a], [a])
split3 [] = ([],[])
split3 [x] =  ([x],[])
split3 (x:y:xs) = let (xs',ys') = split3 xs in (x:xs',y:ys') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T05:24:57.760

在 Haskell 中，列表的元素必须是相同的类型。在您的函数中，列表包含 Ints、原始列表的元素和原始列表的子列表的混合，所有这些都可能是不同的类型。

您对如何附加列表和元素也有一些困惑。x ++ y 只能在 x 和 y 本身是列表时使用，而 x : y 只能在 y 是列表且 x 是列表的元素时使用；要创建一个包含 x 和 y 作为元素的新列表，请改用 [x, y] （尽管 x:[y] 也可以）。同样 [xs] ++ y 需要改为 xs ++ [y] 。

在不改变基本算法的情况下，最简单的解决方案可能是让 split2 采用 3 个单独的参数。

```
split (x:y:xs) = split2 ((length(x:y:xs) `div` 2)-2) [x,y] xs
split2 n xs (y:ys) = split2 (n-1) (xs++[y]) ys
split2 0 xs ys = [xs,ys] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T05:26:00.350

您似乎在列表中传递状态而不是作为值传递给函数，当编译器看起来好像您正在创建异构值列表时会产生问题，而 Haskell 中的列表应该是同质类型.

代替

```
split2 (0:xs:[y:ys]) 
```

您应该像这样将不同的参数/值分别传递给函数

```
split2 n xs (y:ys) 
```

您正在寻找的功能也在标准库函数中重现。

```
halveList xs = splitAt (length xs `div` 2) xs 
```

# ruby-on-rails - 有没有办法在 Rails 中做到这一点而无需批量分配？

> ID：12792957
> 
> 赞同：0
> 
> 时间：2012-10-09T04:46:04.207
> 
> 标签：ruby-on-rails, mass-assignment

成员创建属于他们和另一个模型问题的投票。目前我正在使用隐藏表单并传递适当的参数来执行此操作。这是问题索引视图的代码：

```
<%= form_for(@vote) do |f| %>
    <%= f.hidden_field "issue_id", :value => issue.id %>
    <%= f.hidden_field "member_id", :value => session[:member_id] %>
    <%= f.hidden_field "type", :value => :Upvote %>
    <%= f.label issue.upvotes_count(issue.id) %>
    <%= submit_tag "Up", :class => 'up-vote' %>
<% end %> 
```

这似乎并不理想，因为它使 issue_id 和 member_id 对批量分配开放。有没有更好的方法来使用 button_to 标签或其他东西？

这是控制器代码：

```
class VotesController < ApplicationController

  #GET
  def new
    @vote = Vote.new
  end

  # POST
  def create
    @vote = Vote.new(params[:vote])
    @vote.member_id = current_member

    if @vote.save
        redirect_to issues_path
    else
        redirect_to issues_path, notice: "you must be logged in to vote"
    end
  end
end 
```

和

```
class IssuesController < ApplicationController

  # GET
  def index
    @issues = Issue.find(:all)
    @vote = Vote.new
  end

  # GET
  def show
    @issue = Issue.find(params[:id])

    respond_to do |format|
      format.html
      format.js
    end 

  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T04:51:20.970

如果`issue`和`member_id`在您之前在控制器中可用`vote.save!`，您可以在那里手动设置它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T04:55:14.137

通常，您`member_id`从`current_user`控制器中获取值，而不是通过表单参数传递它。您目前拥有它的方式确实使您面临大规模分配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T12:13:02.330

在控制器中使用范围：

```
@issue = Issue.find(params[:issue_id])
@vote = @issue.votes.new(params[:vote])
@vote.save 
```

并且不要将 member_id 和 issue_id 传递给隐藏字段。

如果您有适当的嵌套 RESTful 路由，您应该能够直接获取 params[:issue_id]。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T05:05:35.033

会员必须在投票前登录吗？如果是这样，那么您不需要将 member_id 作为隐藏字段包含在内，因为您可以在控制器中获取 current_user，这将提供良好的保护，因为成员破解 issue_id 或类型不会有任何优势。

# c++ - 读者-作者锁多线程场景？

> ID：12792959
> 
> 赞同：3
> 
> 时间：2012-10-09T04:46:29.203
> 
> 标签：c++, multithreading, synchronization

我已经阅读了一些关于 Readers-writer lock 的链接。我几乎没有怀疑。

1.  如果系统必须设计为多读单写，写应该优先。
2.  如果系统必须设计为多读多写

那么我们是否应该为多次读取实现信号量并为多次写入实现互斥锁？或者我什么时候使用临界区？另外，它是否取决于操作系统？（在 Unix 和 Windows 的情况下是否有所不同）？

# java - 无法获取用于删除的 Struts2-jquery-grid 行 ID

> ID：12792961
> 
> 赞同：2
> 
> 时间：2012-10-09T04:47:09.883
> 
> 标签：java, jquery, struts2, jqgrid

我正在使用 Jquery Grid 在 struts 2 中开发一个小型应用程序，用于显示数据结果。

当我单击编辑按钮时，特定的行 ID 即将到来。但是当我单击删除按钮删除该行时，它的 id 不会出现。使用选定的行（Struts2 Jquery Grid）执行删除操作时如何获取行的ID？

请帮我解决这个问题。

## myJspFile.jsp

```
 <%@ page contentType="text/html; charset=UTF-8"%>
        <%@ taglib prefix="s" uri="/struts-tags"%>
        <%@ taglib prefix="sj" uri="/struts-jquery-tags"%>

        <%@ taglib prefix="sjg" uri="/struts-jquery-grid-tags"%>
        <jsp:include page="../../loginCheck.jsp" />
        <html>
        <head>
        <title>Hello World</title> 
        <style type="text/css">
        @import
        url(<%=request.getContextPath()%>/css/style1.css);
        </style> 
         <sj:head jqueryui="true" jquerytheme="le-frog"/>
        </head>
        <body> 
            <div id="setpage"> <s:url id="editurl" action="nedit"/>
                <s:url id="editurl" action="nedit"/>
                <s:url  id="remoteurl" action="ntable"/> 
              <sjg:grid
                id="gridtable"
                caption="Subject Setup Navigator"
                dataType="json"
                href="%{remoteurl}"
                pager="true"
                rowList="10,20,100"
                 rowNum="5"
                navigator="true"
                width="999"
                navigatorSearchOptions="{sopt:['eq','ne','lt','gt']}"
                navigatorAddOptions="{height:280,reloadAfterSubmit:true}"
                navigatorEditOptions="{height:280,reloadAfterSubmit:false}"
                navigatorEdit="false"
                navigatorView="false"
                navigatorDelete="true"
                navigatorDeleteOptions="{height:280,reloadAfterSubmit:true}"
                gridModel="gridModel" 
                editurl="%{editurl}"
                editinline="true"
                onSelectRowTopics="rowselect"

            >
                   <sjg:gridColumn name="subjectId" index="subjectId" title="SubjectId" formatter="integer" sortable="false" key="true"    hidden="true"   />
                   <sjg:gridColumn name="subjectName" index="subjectName" title="Subject Name" sortable="true" search="true"
                                    editable="true"
                                    edittype="text" />
                </sjg:grid> 
            <br/>

            </div>
        </body>
        </html> 
```

## MyActionClass.java

```
 /*
         * To change this template, choose Tools | Templates
         * and open the template in the editor.
         */
        package v.esoft.actions.subjectdetails; 
        import com.opensymphony.xwork2.ActionSupport; 
        import java.text.SimpleDateFormat; 
        import com.opensymphony.xwork2.ModelDriven; 
        import v.esoft.dao.SubjectdetailsDAO.SubjectdetailsDAO; 
        import v.esoft.pojos.Subjectdetails;

        public class SubjectdetailsEditAction   extends ActionSupport  implements ModelDriven<Subjectdetails>
        {
            private static final long serialVersionUID = -6659925652584240539L; 
           private String oper; 
            int subjectId;
             Subjectdetails subject=new Subjectdetails();
           SimpleDateFormat formatter1 = new SimpleDateFormat("yyyy-MM-dd"); 
           SubjectdetailsDAO dao=new SubjectdetailsDAO();       

           @Override
           public Subjectdetails getModel()
        {   
              return subject;
           }

          public String execute() throws Exception
            {    
              System.out.println(subject.getSubjectId());
              if(oper.equalsIgnoreCase("add"))
                {
                  System.out.println ("inside action");
                  dao.saveOrUpdateSubject(subject);  
                }
                else if (oper.equalsIgnoreCase("edit"))
                { 
                     dao.saveOrUpdateSubject(subject);  
                }
                else if (oper.equalsIgnoreCase("del"))
                {
                    System.out.println("subjectId");
                    System.out.println(subject.getSubjectId());
                //  dao.deleteSubject(subjectId);
                }
                return SUCCESS;
            } 
          //---------------
            public String getOper() {
                return oper;
            }

            public void setOper(String oper) {
                this.oper = oper;
            }

            public Subjectdetails getSubject() {
                return subject;
            }

            public void setSubject(Subjectdetails subject) {
                this.subject = subject;
            }
            public int getSubjectId() {
                return subjectId;
            }
            public void setSubjectId(int subjectId) {
                this.subjectId = subjectId;
            }

        } 
```

## Subjectdetails.java [我的pojo]

```
 package v.esoft.pojos;

        // Generated Oct 6, 2012 1:58:21 PM by Hibernate Tools 3.4.0.CR1

        import java.util.Date;

        /**
         * Subjectdetails generated by hbm2java
         */
        public class Subjectdetails implements java.io.Serializable {

            private int subjectId;
            private String subjectName;
            private Integer createrId;
            private Date createdDate;
            private Integer updateId;
            private Date updatedDate;

            public Subjectdetails() {
            }

            public Subjectdetails(int subjectId) {
                this.subjectId = subjectId;
            }

            public Subjectdetails(int subjectId, String subjectName, Integer createrId,
                    Date createdDate, Integer updateId, Date updatedDate) {
                this.subjectId = subjectId;
                this.subjectName = subjectName;
                this.createrId = createrId;
                this.createdDate = createdDate;
                this.updateId = updateId;
                this.updatedDate = updatedDate;
            } 

            public int getSubjectId() {
                return this.subjectId;
            }

            public void setSubjectId(int subjectId) {
                this.subjectId = subjectId;
            }

            public String getSubjectName() {
                return this.subjectName;
            }

            public void setSubjectName(String subjectName) {
                this.subjectName = subjectName;
            }

            public Integer getCreaterId() {
                return this.createrId;
            }

            public void setCreaterId(Integer createrId) {
                this.createrId = createrId;
            }

            public Date getCreatedDate() {
                return this.createdDate;
            }

            public void setCreatedDate(Date createdDate) {
                this.createdDate = createdDate;
            }

            public Integer getUpdateId() {
                return this.updateId;
            }

            public void setUpdateId(Integer updateId) {
                this.updateId = updateId;
            }

            public Date getUpdatedDate() {
                return this.updatedDate;
            }

            public void setUpdatedDate(Date updatedDate) {
                this.updatedDate = updatedDate;
            }

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T01:58:48.923

我有完全相同的问题。log4j 调试帮助我解决了它。即使您在 .jsp 中的 subjectId 字段中使用了“key="true"”，该 id 仍然简单地作为“id”传递。

所以，在你的行动中，而不是：

```
int SubjectId; 
```

尝试：

```
private int id; 
```

并定义它的 getter 和 setter。

# ruby - 在开发环境中使用 Rails 服务器启动 Sidekiq

> ID：12792962
> 
> 赞同：11
> 
> 时间：2012-10-09T04:47:13.207
> 
> 标签：ruby, ruby-on-rails-3.1, background-process, sidekiq

我将[Sidekiq](http://mperham.github.com/sidekiq/)用于我的一些后台进程。

**目前我做的是：**

在一个终端上启动`bundle exec rails s` ，然后在另一个终端上启动`bundle exec sidekiq`，以便 sidekiq 自行启动并查找要处理的作业。

**我想要的是：**

一旦我开始`bundle exec rails s`它也应该启动 sidekiq `bundle exec sidekiq`。我如何将它集成到***开发***环境中？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-09T07:23:21.133

对于像您这样需要运行多个服务的应用程序，请考虑使用[foreman](https://github.com/ddollar/foreman)和 a`Procfile`来定义这些进程。然后，您可以使用`foreman start`在单个终端中运行所有这些。

# python - PyQt4：在加载 qtsql 表时显示进度条

> ID：12792965
> 
> 赞同：1
> 
> 时间：2012-10-09T04:47:37.497
> 
> 标签：python, qt, pyqt, pyqt4, qtsql

是否可以在`QtSql.QSqlTableModel.setTable(tableName)`前后获取表中的记录数`QtSql.QSqlTableModel.select()`？**关于setTable**函数的 Qt 文档说：

> *将模型操作的数据库表设置为 tableName。不从表中选择数据，但获取其字段信息。*

所以这些是我的问题:) 哪些字段信息？它是否包含记录数？必要时如何访问它？（我想在加载表格时显示进度条）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:16:28.547

调用后`setTable`可以通过`QSqlQuery`对象通过`SQL`命令获取表的字段数、字段名和记录数，例如：

```
model = QSqlTableModel(db=your_db)
model.setTable("your_table")
...
query = QSqlQuery("SELECT column_name FROM information_schema.columns WHERE table_name='your_table'")
query.next()
print query.numRowsAffected() # print the number of fields
query.previous()
while query.next():
    print query.value(0).toString()  # print the field name 
```

将打印表“your_table”的字段数和字段名称。

要在不填充模型的情况下获取行数，可以使用 `COUNT`如下命令：

```
query = QSqlQuery("SELECT COUNT(*) FROM your_table")
query.next()
print query.value(0).toString()  # print the number of records
print model.rowCount()  # print 0 as the model has not been populated yet 
```

我认为这比它`COUNT(1)`表现得更好，`COUNT(*)`但这似乎是一个神话（参见[这个 SO question](https://stackoverflow.com/questions/1221559/count-vs-count1)）。

# java - 如何从服务器获取客户端套接字的确认？

> ID：12792967
> 
> 赞同：0
> 
> 时间：2012-10-09T04:47:47.170
> 
> 标签：java, sockets, tcp, tcpclient, apache-mina

我有一个向服务器发送消息的客户端套接字。每当服务器收到消息时，我都希望在客户端得到确认。是否有可能获得这种认可。我使用 apache mina 开发了客户端。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T04:50:54.580

TCP 中没有消息，只有一个字节流。有一个内部 ACK 机制可以跟踪正确接收​​了多少流，但它对应用程序不可用。如果您想从服务器获得确认，您的服务器将不得不发送它。

# matlab - 如何在 Matlab simulink 中修复步数（不是时间）

> ID：12792968
> 
> 赞同：0
> 
> 时间：2012-10-09T04:47:47.777
> 
> 标签：matlab, simulink

这可能是一个简单的问题。但我找不到解决这个问题的方法。我正在使用 s 功能块将波形信号输入到我的算法中。正在从大约 2000 点的文件中读取波形信号

首先，我从等于 50 的模拟时间开始。然后它只读取 50 分。我检查了“tout”变量。它是 0,1,2,....50

然后我将模拟时间增加到 100。仍然结果相同。只读取 50 点。但是 tout 是 0,2,4,6..50

我尝试了多达 10000 个。无论我做什么，它只读取 50 个值，时间步长为 0,200,400,600 等。这是我的 s-function 或 simulink 设置的问题吗？这是c s-function文件

```
 /* Give S-function a name */
#define S_FUNCTION_NAME  Readip
#define S_FUNCTION_LEVEL 2

/* Include SimStruct definition and file I/O functions */
#include "simstruc.h"
#include <stdio.h>
#include <stdlib.h>

static FILE* file2;
/* Called at the beginning of the simulation */
    static void mdlInitializeSizes(SimStruct *S)

{

        ssSetNumSFcnParams(S, 0); 

   if (ssGetNumSFcnParams(S) != ssGetSFcnParamsCount(S)) {
        return;
    }
    if (!ssSetNumOutputPorts(S, 3)) return;
    ssSetNumContStates(S, 0);
    ssSetNumDiscStates(S, 0);
    ssSetOutputPortWidth(S, 0, 1);
    ssSetOutputPortDataType(S,0,DYNAMICALLY_SIZED);
    ssSetOutputPortOptimOpts(S, 0, SS_REUSABLE_AND_LOCAL);
    ssSetOutputPortWidth(S, 1, 1);
    ssSetOutputPortDataType(S,1,DYNAMICALLY_SIZED);
    ssSetOutputPortOptimOpts(S, 1, SS_REUSABLE_AND_LOCAL);
    ssSetOutputPortWidth(S, 2, 1);
    ssSetOutputPortDataType(S,2,DYNAMICALLY_SIZED);
    ssSetOutputPortOptimOpts(S, 2, SS_REUSABLE_AND_LOCAL);

       ssSetNumPWork(S,1);
        ssSetNumSampleTimes(S, 1);
    }

    /* Set sample times for the block */
    static void mdlInitializeSampleTimes(SimStruct *S)
    {
        ssSetSampleTime(S, 0, CONTINUOUS_SAMPLE_TIME);
        ssSetOffsetTime(S, 0, 0.0);
    }

        #define MDL_START  /* Change to #undef to remove function */
        #if defined(MDL_START) 
          /* Function: mdlStart ========

    ===============================================
       * Abstract:
       *    This function is called once at start of model execution. If you
       *    have states that shou

ld be initialized once, this is the place
   *    to do it.
   */
  static void mdlStart(SimStruct *S)
  {
      /*at start of model execution, open the file and store the pointer
       *in the pwork vector */
      void** pwork = ssGetPWork(S);
      FILE *datafile;

      datafile = fopen("table.data","r");
      pwork[0] =  datafile;

      }
    #endif /*  MDL_START */

/* Function: mdlOutputs =======================================================
 * Abstract:
 *    In this function, you compute the outputs of your S-function
 *    block. Generally outputs are placed in the output vector, ssGetY(S).
 */
static void mdlOutputs(SimStruct *S, int_T tid)
{
    //get pointer to the block's output signal
    real_T       *y1 = ssGetOutputPortSignal(S,0);
    real_T       *y2 = ssGetOutputPortSignal(S,1);
    real_T       *y3 = ssGetOutputPortSignal(S,2);
    char a[10];
    char b[10];
    char c[10];
    /*get pointer to array of pointers, where the first element is the address
     *of the open file */
    void** pwork = ssGetPWork(S);

/*read a floating point number and then the comma delimiter
 *store the result in y*/

fscanf(pwork[0],"%s    %s    %s",&a,&b,&c);
*y1=atof(a);
*y2=atof(b);
    *y3=atof(c);

}

/* Function: mdlTerminate =====================================================
 * Abstract:
 *    In this function, you should perform any actions that are necessary
 *    at the termination of a simulation.  For example, if memory was
 *    allocated in mdlStart, this is the place to free it.
 */
static void mdlTerminate(SimStruct *S)
{
    //close the file
    void** pwork = ssGetPWork(S);
      FILE *datafile;

      datafile = pwork[0];
      fclose(datafile);

}

/*=============================*
 * Required S-function trailer *
 *=============================*/

    #ifdef  MATLAB_MEX_FILE    /* Is this file being compiled as a MEX-file? */
    #include "simulink.c"      /* MEX-file interface mechanism */
    #else
    #include "cg_sfun.h"       /* Code generation registration function */
    #endif 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T11:19:54.100

这似乎只是一个设置问题。如果您没有为求解器指定步长并且您的模块没有指示采样时间，Simulink 将选择默认的`Simulation Time / 50`. 只需打开“[模型配置参数](http://www.mathworks.com/help/simulink/gui/configuration-parameters-dialog-box-overview.html)”对话框并单击左侧窗格中的求解器。如果您使用的是固定步长求解器，则可以显式设置步长。如果您使用可变步长求解器，则可以指定最大/最小步长。

此外，如果您正在寻找专门为您的 S-Function 指定离散采样周期，那么您可能需要查看此[链接](http://www.mathworks.com/help/simulink/sfg/mdlinitializesampletimes.html)以确保您`mdlInitializeSampleTimes`按照需要实施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T14:44:14.263

您需要使用固定步长离散求解器。将定期采样时间约束设置为“无约束”输入固定步长和模拟停止时间，以便获得 2000 步。

例如 1s/step 和 2000s 的停止时间，或 0.1s/step 和 200s 的停止时间。

# ruby - Ruby：Topic.methods 和 Topic#methods 之间的区别

> ID：12792979
> 
> 赞同：2
> 
> 时间：2012-10-09T04:48:52.030
> 
> 标签：ruby, pry

> **可能重复：**
> [之间的差异。和 ＃](https://stackoverflow.com/questions/12764188/difference-between-and)

Pry gem 提供了通过在 pry 控制台中输入 ls -m 来查看对象上所有方法的能力。当我在主题模型上执行 ls -m 时，它显示了这两种类型的方法

Topic.methods 和 Topic#methods。有什么区别？

**主题.方法**

```
Topic.methods: _create_callbacks  _save_callbacks  _update_callbacks  _validate_callbacks  _validators  after_add_for_posts  after_add_for_posts=  after_add_for_posts?  after_remove_for_posts  after_remove_for_posts=  after_remove_for_posts?  before_add_for_posts  before_add_for_posts=  before_add_for_posts?  before_remove_for_posts  before_remove_for_posts=  before_remove_for_posts?  reflections 
```

**主题#methods**

```
Topic#methods: _one_time_conditions_valid_12?  _one_time_conditions_valid_14?  _one_time_conditions_valid_18?  _one_time_conditions_valid_22?  _one_time_conditions_valid_24?  after_add_for_posts  after_add_for_posts=  after_add_for_posts?  after_remove_for_posts  after_remove_for_posts=  after_remove_for_posts?  autosave_associated_records_for_posts  autosave_associated_records_for_user  before_add_for_posts  before_add_for_posts=  before_add_for_posts?  before_remove_for_posts  before_remove_for_posts=  before_remove_for_posts?  joe  validate_associated_records_for_posts 
```

更新

需要注意的是，这两种方法只有在我进入 Topic 的第一个实例之后才会出现。即光盘`Topic.first`

如果我只 cd 进入主题，然后执行 ls -m，我只会看到

```
Topic.methods 
```

# java - Android 应用 - 单选按钮、TextView 和布局选项

> ID：12792980
> 
> 赞同：2
> 
> 时间：2012-10-09T04:48:56.390
> 
> 标签：java, android, xml, radio

我正在创建我的第一个 android 应用程序。这似乎相当简单。但我完全是 Java 和 Android 的菜鸟（我更熟悉 C、C++ 等）。如果这是有史以来最愚蠢的问题，我很抱歉。无论如何，我按照 android dev 网站上的步骤进行操作。

该应用程序应该让用户输入他们的姓名并点击第一、第二或第三班单选按钮，当他们点击停机按钮时，他们将被带到另一个页面（活动），显示他们的姓名和班次选择然后显示另一个文本框和时间输入。

到目前为止，我的 MainActivity.java 是这样完成的：

```
package com.cyapps.downtime;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;

public class MainActivity extends Activity {
    public final static String EXTRA_MESSAGE = "com.cyapps.downtime.MESSAGE";

    public void clickedButton1(View view) {
        Intent intent = new Intent(this, WinderDTActivity.class);
        EditText editText = (EditText) findViewById(R.id.edit_message);
        String message = editText.getText().toString();
        intent.putExtra(EXTRA_MESSAGE, message);
        startActivity(intent);
    }

    public void clickedButton2(View view) {
        Intent intent = new Intent(this, ClamperDTActivity.class);
        EditText editText = (EditText) findViewById(R.id.edit_message);
        String message = editText.getText().toString();
        intent.putExtra(EXTRA_MESSAGE, message);
        startActivity(intent);
    }

    public void clickedButton3(View view) {
        Intent intent = new Intent(this, OtherDTActivity.class);
        EditText editText = (EditText) findViewById(R.id.edit_message);
        String message = editText.getText().toString();
        intent.putExtra(EXTRA_MESSAGE, message);
        startActivity(intent);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

和这样的activity_main.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <EditText
        android:id="@+id/edit_message"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="41dp"
        android:ems="10"
        android:hint="@string/edit_message" />

    <RadioButton
        android:id="@+id/radioButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/edit_message"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="26dp"
        android:text="@string/radio_button1" />

    <RadioButton
        android:id="@+id/radioButton2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/radioButton1"
        android:layout_centerHorizontal="true"
        android:text="@string/radio_button2" />

    <RadioButton
        android:id="@+id/radioButton3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/radioButton2"
        android:layout_centerHorizontal="true"
        android:text="@string/radio_button3" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/button2"
        android:layout_centerHorizontal="true"
        android:text="@string/button_send1"
        android:onClick="clickedButton1" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/button3"
        android:layout_centerHorizontal="true"
        android:text="@string/button_send2"
        android:onClick="clickedButton2" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="40dp"
        android:text="@string/button_send3"
        android:onClick="clickedButton3" />

</RelativeLayout> 
```

我现在有另一个活动，当您完成输入您的姓名并单击班次时会显示该活动。该页面应该显示您的姓名和班次编号，并有一个文本框可以在其中写一些其他内容，还有一个时间输入和一个提交按钮。我知道如何做按钮，我在 Eclipse 的界面上看到了时间输入。但我不明白如何使单选按钮能够“提交”并显示在页面上，以及如何编辑活动以显示某些内容。我很困惑。

这是 WinderDTActivity.java 的样子：

```
package com.cyapps.downtime;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TextView;

public class WinderDTActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Get the message from the intent
        Intent intent = getIntent();
        String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

        // Create the text view
        TextView textView = new TextView(this);
        textView.setTextSize(20);
        textView.setText(message);

        // Set the text view as the activity layout
        setContentView(textView);
    }
} 
```

这就是 activity_winder_dt.xml 的样子：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >    
</RelativeLayout> 
```

如果您能帮助我，请提前非常感谢您。你不知道我会多么感激。我一直在努力理解这一点，但我对如何让 xml 和 java 一起工作感到非常困惑。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T05:09:37.183

你不能用`Button b1=(Button)findViewById(R.id.Button1)`methid`onCreate`写

这就是您没有收到按钮单击事件的原因

同样为 button2 和 button3 编写代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T06:07:54.103

您已经将文本框的内容发送到第二个活动就好了，对吧？然后你只需要再做两件事来发送单选按钮状态：

1.  为单选按钮实现 onClick 处理程序。您已经为提交按钮完成了该操作，所以我假设您已经了解了 onClick 的内容。在单选按钮 onClick 中，在 MainActivity 中设置一个变量。

2.  将无线电标志设置的变量打包到意图的额外数据中，如下所示：

    ```
    intent.putExtra("radioButtonState", radioButtonState); 
    ```

    您可以使用适当的`intent.getxxxxExtra()`函数在第二个活动中读回结果（`getIntExtra`例如，如果您保存了一个 int）。

# birt - 从脚本设置 BIRT 交叉表单元格的宽度

> ID：12792984
> 
> 赞同：0
> 
> 时间：2012-10-09T04:49:21.833
> 
> 标签：birt

如何从事件中设置交叉表单元格？我试着做

```
 this.width="0in"; 
```

来自 onCreate() 事件，但它不起作用。我需要帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T21:09:38.420

如果您只是想隐藏单元格，您可以在交叉表脚本中尝试这样的操作：

```
function onCreateCell( cellInst, reportContext )
{
    if (cellInst.getCellID() == cellID#){
        cellInst.getStyle().setDisplay("none");
    }
} 
```

这是指向实际帖子的链接。它显示了另一个选项，用于设置实际宽度： http: [//www.birt-exchange.org/org/forum/index.php/topic/22736-dynamically-change-column-width-cross-tab/](http://www.birt-exchange.org/org/forum/index.php/topic/22736-dynamically-change-column-width-cross-tab/)

# c# - 无法将“数据”类型的对象转换为“System.IConvertible”类型

> ID：12792985
> 
> 赞同：2
> 
> 时间：2012-10-09T04:49:36.047
> 
> 标签：c#, asp.net

我收到此错误“无法将'Data'类型的对象转换为'System.IConvertible'类型。” 在我的代码中

```
foreach (Data p in clusters[i])
 {
   for(int z=0; z<53;z++)
    {
      if (values[z] = Convert.ToInt32(p))
      {
         lray[z].BackColor = colorSet[i];
      }
    }
  } 
```

“values”是一个整数数组，p 来自 Data 类

```
class Data
    {

        public int X, ClusterId;
        public Data(int x)
        {
            this.X = x;
        }
        public override string ToString()
        {
            return String.Format("({0})", X);
        }
        public static int DistanceSquared(Data p1, Data p2)
        {
            int diffX = p2.X - p1.X;
            return diffX * diffX;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T04:52:38.747

您的代码并不清楚您的意图。

`p`在一个对象中`Data`。似乎您想访问您保存在 p 的成员 X 中的数据

但你可以这样做

```
foreach (Data p in clusters[i])
 {
   for(int z=0; z<53;z++)
    {
      if (values[z] == p.X)
      {
         lray[z].BackColor = colorSet[i];
      }
    }
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T04:54:16.950

只是错误所说的。您必须在 Data 类中实现 IConvertible 才能像这样使用它。

[IConvertible 接口](http://msdn.microsoft.com/en-us/library/system.iconvertible%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T04:55:13.597

Youe`Data`类显然没有实现`System.IConvertible`。因此，您可以这样做，也可以在 if 中执行其他一些检查。

```
class Data : System.IConvertible
{// implement necessary methods of System.IConvertible here 
} 
```

旁注：`=`是作业，您可能的意思是`if (values[z] == ...)`

# webrtc - 如何在 Windows 服务器上安装和开始使用 webrtc

> ID：12792988
> 
> 赞同：6
> 
> 时间：2012-10-09T04:50:14.460
> 
> 标签：webrtc

嗨，谁能告诉我如何安装 depot 工具。我浏览了文档并尝试在 Windows 中安装 webrtc，我安装了 Visual Studio 2010 以及文档中给出的一些相关内容，我仍然很困惑，还有很多问题，比如为什么 Visual Studio 是必需的？我们是否在 Visual Studio 中编写过代码？它就像 webrtc 的 IDE？

如果不是，请告诉我我们必须将我们的项目放在本地文件系统中的哪个位置以及如何实现我的第一个演示应用程序。我发现谷歌发布的一个视频演示了 webrtc，因为他们在 html 文件中编写了代码，html 文件本身也是如此足够发展。？

虽然我已经在 html 文件中完成了一个示例应用程序，但我仍然得到空白页面，并且在控制台中，我在 navigator.webkitGetUserMedia() 附近得到了 UNCAUGHT EXCEPTION，请帮助我了解有关 webrtc 的更多信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T18:20:59.827

我建议您首先观看[Justin Uberti](http://www.youtube.com/watch?v=E8C8ouiXHHk)和 [Cullen Jennings](http://vimeo.com/47682405)的关于 WebRTC 的优秀视频，然后（无耻的自我宣传）掌握HTML5 Rocks 上的[WebRTC 入门中的代码和示例。](http://www.html5rocks.com/en/tutorials/webrtc/basics/)

[webrtc.org](http://webrtc.org)是 WebRTC 项目的所在地——那里有很多资源和演示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T03:35:52.960

就在上个月，我们发布了一个开源项目，旨在让开发人员快速轻松地进入 WebRTC。

[http://www.easyrtc.com/](http://www.easyrtc.com/)

它包括一个可以在 Windows 中运行的跨平台服务器工具包。包括工作演示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-08T06:13:29.577

[我只是按照此](http://www.webrtc.org/reference/getting-started/)网页说明使用 VS2010 构建了 webrtc 解决方案，而不是使用 cygwin。我只有一个要解决的问题，需要手动将两个文件复制到正确的文件夹中，您将知道哪两个文件应该看到这些文件的名称并阅读错误，然后您将知道构建失败时的预期位置.

最终，您将通过示例获得一个 peerconnection_server.exe 和一个 peerconnection_client.exe。我能够轻松地修改它们。

希望这可以帮助。请务必安装先决条件并按照说明进行操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-19T22:55:45.820

澄清一下，webrtc C++ 库是您可以用于该协议的一种实现。另一个是在（非常）现代的网络浏览器中使用 webrtc 实现，例如 Firefox 或 Chrome。然后，根据 HTML5 Rocks 中的文章，您只需要 HTML + JS。

# ios - 获取facebook好友列表

> ID：12792990
> 
> 赞同：0
> 
> 时间：2012-10-09T04:50:26.453
> 
> 标签：ios, facebook, facebook-graph-api

我知道我可以使用`me/friends`. 但我需要的是获取任何公开他们的朋友列表的用户的朋友列表。例如，假设我朋友的 Facebook ID 是“XXXXX”。当我尝试时，`[fbAgent requestWithGraphPath:@"XXXXX/" andParams:[NSMutableDictionary dictionaryWithObjects:values forKeys:keys] andDelegate:self];`我得到了我朋友的名字和一些细节。尝试时我也得到了一些东西。但是当它抛出`[fbAgent requestWithGraphPath:@"XXXXX/feed" andParams:[NSMutableDictionary dictionaryWithObjects:values forKeys:keys] andDelegate:self];`时我没有得到朋友列表`[fbAgent requestWithGraphPath:@"XXXXX/friends" andParams:[NSMutableDictionary dictionaryWithObjects:values forKeys:keys] andDelegate:self];`

`2 : <CFString 0x6854230 [0x1473b38]>{contents = "type"} = <CFString 0x6854370 [0x1473b38]>{contents = "FacebookApiException"} 3 : <CFString 0x6854310 [0x1473b38]>{contents = "message"} = <CFString 0x68542c0 [0x1473b38]>{contents = "Unsupported operation"} 6 : <CFString 0x6847c60 [0x1473b38]>{contents = "code"} = 100`

那么如何获取任何用户的好友列表。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T05:07:54.273

您只能获取登录用户的好友列表。向您显示任何用户的朋友列表会导致显示 Facebook 从不支持的所有 ID。

# oauth - 在我的代码中使用 google 身份验证和 google 组

> ID：12792995
> 
> 赞同：4
> 
> 时间：2012-10-09T04:51:00.917
> 
> 标签：oauth, openid, google-api, google-api-client

我想使用谷歌身份验证来验证用户，然后希望使用谷歌 API 来查看该用户是否是某个组的成员。如果是，我的程序就会运行，否则程序会让用户采取一些行动。我作为 google 组的经理，我可以从 google 站点手动添加/删除用户。

我阅读并理解了 OAuth 部分。所以我知道我可以毫无问题地授权用户。问题是确认组成员身份。

# python - ElementTree 迭代解析策略

> ID：12792998
> 
> 赞同：24
> 
> 时间：2012-10-09T04:51:47.420
> 
> 标签：python, xml, sax, elementtree, iterparse

我必须处理足够大（最大 1GB）的 xml 文档并用 python 解析它们。我正在使用[iterparse()](http://effbot.org/zone/element-iterparse.htm)函数（SAX 样式解析）。

我关心的是以下，假设你有一个这样的 xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<families>
  <family>
    <name>Simpson</name>
    <members>
        <name>Homer</name>
        <name>Marge</name>
        <name>Bart</name>
    </members>
  </family>
  <family>
    <name>Griffin</name>
    <members>
        <name>Peter</name>
        <name>Brian</name>
        <name>Meg</name>
    </members>
  </family>
</families> 
```

问题是，当然要知道我何时获得姓氏（如辛普森一家）以及何时获得该家庭成员之一的姓名（例如荷马）

到目前为止我一直在做的是使用“开关”，它会告诉我我是否在“成员”标签内，代码看起来像这样

```
import xml.etree.cElementTree as ET

__author__ = 'moriano'

file_path = "test.xml"
context = ET.iterparse(file_path, events=("start", "end"))

# turn it into an iterator
context = iter(context)
on_members_tag = False
for event, elem in context:
    tag = elem.tag
    value = elem.text
    if value :
        value = value.encode('utf-8').strip()

    if event == 'start' :
        if tag == "members" :
            on_members_tag = True

        elif tag == 'name' :
            if on_members_tag :
                print "The member of the family is %s" % value
            else :
                print "The family is %s " % value

    if event == 'end' and tag =='members' :
        on_members_tag = False
    elem.clear() 
```

这很好用，因为输出是

```
The family is Simpson 
The member of the family is Homer
The member of the family is Marge
The member of the family is Bart
The family is Griffin 
The member of the family is Peter
The member of the family is Brian
The member of the family is Meg 
```

我担心的是，对于这个（简单的）示例，我必须创建一个额外的变量来知道我在哪个标签（on_members_tag）中，想象一下我必须处理的真正的 xml 示例，它们有更多的嵌套标签。

另请注意，这是一个非常简化的示例，因此您可以假设我可能面临一个带有更多标签、更多内部标签的 xml，并试图获取不同的标签名称、属性等。

所以问题是。我在这里做一些非常愚蠢的事情吗？我觉得必须有一个更优雅的解决方案。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-09T06:24:35.747

这是一种可能的方法：我们维护一个路径列表并向后查看以找到父节点。

```
path = []
for event, elem in ET.iterparse(file_path, events=("start", "end")):
    if event == 'start':
        path.append(elem.tag)
    elif event == 'end':
        # process the tag
        if elem.tag == 'name':
            if 'members' in path:
                print 'member'
            else:
                print 'nonmember'
        path.pop() 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-09T07:24:14.627

[pulldom](http://docs.python.org/py3k/library/xml.dom.pulldom.html)非常适合这个。你得到一个萨克斯流。您可以遍历流，当您找到感兴趣的节点时，将该节点加载到 dom 片段中。

```
import xml.dom.pulldom as pulldom
import xpath # from http://code.google.com/p/py-dom-xpath/

events = pulldom.parse('families.xml')
for event, node in events:
    if event == 'START_ELEMENT' and node.tagName=='family':
        events.expandNode(node) # node now contains a dom fragment
        family_name = xpath.findvalue('name', node)
        members = xpath.findvalues('members/name', node)
        print('family name: {0}, members: {1}'.format(family_name, members)) 
```

输出：

```
family name: Simpson, members: [u'Hommer', u'Marge', u'Bart']
family name: Griffin, members: [u'Peter', u'Brian', u'Meg'] 
```

# ios6 - iOS 6 中 UITextAlignmentCenter 的替代品有哪些？

> ID：12792999
> 
> 赞同：53
> 
> 时间：2012-10-09T04:51:52.023
> 
> 标签：ios6

`UITextAlignmentCenter`似乎在 iOS 6 中已被弃用。我的替代方案是什么？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-10-09T04:57:57.637

对于 IOS 6，您应该使用`NSTextAlignmentCenter`而不是`UITextAlignmentCenter`：

```
button.titleLabel.textAlignment = NSTextAlignmentCenter; 
```

[资源](https://stackoverflow.com/questions/604632/how-do-you-add-multi-line-text-to-a-uibutton/12776945#12776945)

如果你想向后兼容 IOS 5，你也可以这样做，

```
#ifdef __IPHONE_6_0
# define ALIGN_CENTER NSTextAlignmentCenter
#else
# define ALIGN_CENTER UITextAlignmentCenter
#endif 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-03T10:41:12.847

```
#ifdef __IPHONE_6_0
# define ALIGN_CENTER NSTextAlignmentCenter
#else
# define ALIGN_CENTER UITextAlignmentCenter
#endif

UILabel* label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 50, 30)];
label.text = @"There is no spoon";
label.textAlignment = ALIGN_CENTER;
[self addSubview:label]; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-05-09T09:41:30.257

你可以做

```
newLabel.textAlignment = NSTextAlignmentCenter; 
```

代替

```
newLabel.textAlignment = UITextAlignmentCenter; 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-09T04:53:45.683

您应该`NSTextAlignmentCenter`根据 Apple 的文档使用。

您还应该分别使用`NSTextAlignmentLeft`and`NSTextAlignmentRight`而不是`UITextAlignmentLeft`and `UITextAlignmentRight`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-28T16:05:10.423

在斯威夫特：`NSTextAlignment.Center`