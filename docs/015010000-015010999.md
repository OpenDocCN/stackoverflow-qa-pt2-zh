# StackOverflow 问答 15010000-15010999

# python - python将unicode存储到mysql

> ID：15010005
> 
> 赞同：0
> 
> 时间：2013-02-21T18:47:44.340
> 
> 标签：python, unicode

将 unicode 存储到数据库时遇到问题。供你参考你=你..

```
>> a='你'
>>a <\br>
'\xc4\xe3' 
```

问题是

```
 # -*- coding: utf-8 -*-
 import MySQLdb
 db = MySQLdb.Connect(host="127.0.0.1", port=3306, user="root", passwd="root",db="mydata", charset="utf8", use_unicode=True)

 cursor = db.cursor()

  insert = "insert into testing (english,chinese,frequency) values(%s,%s,1) on duplicate KEY UPDATE frequency=frequency+1;"
  a='你'
 data=('you',a)
 try:
    cursor.execute(insert,data) 
 except:
    print "error"

 db.commit() 
```

这给我一个错误，但是当我改变这个

```
data=('you','你') 
```

有用....

谁能帮我？？我需要使用“data =（'you'，a）”，因为稍后我将导入中文字符文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:49:11.357

尝试告诉 python 将字符串视为 unicode，如下所示：`a= u'你'`

如果您不使用交互式提示，则可以通过该`unicode`功能完成此操作。加载数据的一种方法的示例是：

```
fname = 'somefile.txt'
with open(fname,'r') as f
    unicode_data = unicode(f.read()) 
```

如果这不起作用，您应该能够在 python 文档中详细说明更多细节：http: [//docs.python.org/2/howto/unicode.html](http://docs.python.org/2/howto/unicode.html)并且您可能会发现这个 SO 答案很有帮助：[Character reading from Python中的文件](https://stackoverflow.com/questions/147741/character-reading-from-file-in-python)

# jquery - 在 jquery 模型中运行脚本

> ID：15010015
> 
> 赞同：0
> 
> 时间：2013-02-21T18:48:23.017
> 
> 标签：jquery, html, css

我正在使用 jquery 插件（[jQuery Image Scale](http://imgscale.kjmeath.com/)）来调整我页面上的单个图像的大小。一个简单的例子：

```
 // HTML:     
 <div class='parent_container'>
      <img src='image.jpg' class='resize_image' />
 </div>
 <div class='parent_container'>
      <img src='image.jpg' class='resize_image' />
 </div>

 // CSS:
 .parent_container {
      width: 200px;
      padding: 200px;
 }

 // jQuery:
 $('.resize_image').imgscale({
    fade : 1000,
    scale : "fill"
 }); 
```

简而言之，无论图像大小如何，它都会“填充” .parent_container 并且不会溢出。基于 jQuery 中的选择器，它将获取所有图像并检查父容器 (.parent_container) 的宽度/高度并填充容器。

我已经设法让它工作，但在我的例子中，我有一个“阅读更多”按钮，当按下它时，将打开一个 jQuery 对话窗口，并在其中具有与副本相同的图像。我想对对话框窗口中的图像执行相同的操作，但似乎 jQueryUI 对图像进行了添加或减去（或执行某些操作），因此尽管脚本运行并向普通图像和对话图像添加了必要的修改，但图像的样式被破坏，几乎就像对话框窗口删除了脚本分配的边距一样。

我现在要做的是在窗口加载后将上面的 jQuery 脚本添加到活动对话框窗口，这样它应该重新应用使其工作所需的样式。这是我的脚本中的示例 HTML：

```
 $(document).ready(function() {

// Assign to all images with .resize_image as class
$('.resize_image').imgscale({
    fade : 1000,
    scale : "fill"
});

// Dialog box default properties (also, on open, re-assign the plugin to the all the images with the class .resize_image
var dialog_properties = {
    "width"   : "600",
    open    : function(event,ui) {
        $('.resize_image').imgscale({
            fade : 1000,
            scale : "fill"
        });
    }
};

var popup_to_open;

 // When I click the read more button, load the appropriate hidden container with it's content
$(".popup_content .big_button").click(function() {

    popup_to_open = $(this).attr("rel");

    $("div[rel='"+popup_to_open+"']").dialog(dialog_properties);
    return false;
});

 }); 
```

我实际上需要在模型加载后运行脚本，以便我可以让脚本添加必要的样式。

我的问题是，上面的 open: function() 部分不起作用，或者如果它起作用，它就没有起作用。是否有另一种方法来做到这一点（我做错了吗）和b）是否有一个更简洁的版本来执行此操作而无需在每次有人单击对话框时再次应用脚本（可能将其隔离为仅打开的图像对话框？）

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:58:36.137

我设法让它工作。为了创建一个名为 dialog_properties 的变量并在单击事件之前分配默认对话框属性，我将该对象直接移动为对话框打开框示例的属性：

```
 $(".popup_content .big_button").click(function() {

      popup_to_open = $(this).attr("rel");

      $("div[rel='"+popup_to_open+"']").dialog(
           {
               "width"   : "600",
               open    : function(event,ui) {
                   $('.resize_image').imgscale({
                         fade : 1000,
                         scale : "fill"
                   });
           }
      );
      return false;
  }); 
```

以这种方式显示，当对话框打开时打开事件运行，其中通过在分配值之前使用它运行的打开事件创建一个变量。不确定这是否有意义，但它有效:)

# jenkins - 使用 NAnt 将工件从 Jenkins 部署到 Archiva

> ID：15010016
> 
> 赞同：1
> 
> 时间：2013-02-21T18:48:29.453
> 
> 标签：jenkins, continuous-integration, nant, archiva

诚然，我对整个持续集成的想法很陌生。因此，我一直在网上搜索以找到一种方法来获取我的 ASP.NET 项目，通过 Jenkins 提供它以在 Linux 机器上使用 NAnt 和 mono 自动构建，并最终将工件部署到 Apache Archiva 中以进行检索稍后进行安装等。

我的问题是，我不知道如何将这种从 Jenkins 移交给 Archiva 的工件集成。

所以，这就是我的理解：

*   Archiva 可用于存储任何类型的工件。`.zip`文件（这是我想要使用的）、`.jar`文件等。
*   Jenkins 可以使用 NAnt 构建源代码来调用 Mono 到我的 .NET 4.0 项目
*   Jenkins 还可以将文件压缩到合适的工件中

这是我不明白的：

*   我如何将`.zip`文件（工件）从 Jenkins 构建时存储的位置获取到 Archiva 存储库？

这是我正在使用的：

*   Jenkins (1.502) 服务器和 Archiva (1.3.4) 服务器在同一台 Ubuntu 12.04 机器上
*   NAnt (0.92) 构建脚本
*   单声道 (2.10)

我什么都不知道（但可能有帮助？）：

*   马文
*   常春藤

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T19:05:04.323

设置一个单独的 Jenkins “任务”，使用 Maven 进行部署。

*注意：您不需要对 Maven 有太多了解即可完成这项工作。你必须安装它。您必须按照下面页面中的说明对其进行配置，并且需要使用该信息从命令行调用它。（如果您想了解更多信息，可以使用替代建议。）*

使用此页面中的信息设置 settings.xml：

[http://archiva.apache.org/docs/1.4-M2/userguide/deploy.html](http://archiva.apache.org/docs/1.4-M2/userguide/deploy.html)

同一页面显示了如何从命令行运行 Maven。要使用它，您将创建一个运行 shell 脚本并直接从构建任务创建它的位置部署的 Jenkins 任务。然后，您要么手动运行部署，要么让 Jenkins 构建任务在部署任务完成时运行部署任务，而不会出现错误。

您可能不熟悉的一件事是 Archiva/Maven 的每个文件的坐标系统。

每个工件都有一个组、工件 ID 和版本。如果需要，可以有一个分类器等。

*   该组通常是公司的域名倒序加上内部分类指标——com.microsoft.phone.web 是由微软电话部门创建的网络应用程序。
*   工件 id 是特定工件的名称。
*   版本是版本字符串的正常形式 - 1.0a 或 2.0-asl 或 3.2.1。
*   分类器的使用方式类似于我们使用文件扩展名——zip、jar。

这是解释的简短版本。谷歌是你的朋友。

您也可以使用 Maven 任务来执行此操作。Archiva 页面上有关 pom.xml 文件的信息将是必需的，但您必须谷歌“Maven deploy”并阅读如何针对您的特定情况执行此操作。当工件位于本地 Maven 存储库（在构建机器上）并且该存储库具有您需要的特定文件和文件夹结构时，将部署默认情况。这就是 Maven 在创建和“安装”工件时安排工件的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T13:26:52.103

为非 Maven 构建从 Jenkins 轻松部署到 Archiva 的可能性可以编写类似于[https://wiki.jenkins-ci.org/display/JENKINS/Artifactory+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Artifactory+Plugin)的插件（注意：我可以帮助你，但没有时间 ATM做任何事 ：-） ）。我不太了解 NAnt，但对于 ant，我们构建了一些 maven ant 任务来部署工件，请参阅[http://maven.apache.org/ant-tasks/](http://maven.apache.org/ant-tasks/)

# lwuit - 选定按钮

> ID：15010018
> 
> 赞同：0
> 
> 时间：2013-02-21T18:48:39.473
> 
> 标签：codenameone, lwuit, codenameone

在[codenameone](/questions/tagged/codenameone "显示标记为“代号”的问题")的 Theme-Builder 中，我可以更改所选按钮的布局。默认情况下，按钮的文本在被选中时带有下划线。

所以我的问题是，我怎样才能选择一个按钮？单选按钮没有 setSelected() 之类的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T21:05:59.610

选择意味着焦点不同于复选框/单选按钮的选中/未选中状态。使用小键盘将焦点移至按钮时，您将进入此状态。

如果您想要一个保持按下状态的按下按钮（切换按钮），那么只需使用一个复选框并将其设置为切换按钮模式。

# python - 保存图片Python的红色像素值不正确

> ID：15010021
> 
> 赞同：3
> 
> 时间：2013-02-21T18:48:43.950
> 
> 标签：python, python-imaging-library

我有图片中红色像素的多维数组。我正在调整它以使用我已更改的新红色像素制作新图片。我仍然保留蓝色和绿色，我不会改变它们。当我在保存新图片之前打印出红色像素以查看它们是否正确时，一切都是正确的，直到我通过打开并显示红色值来实际检查新图片，这就是值错误的时候。继承人的代码：

```
 from PIL import Image
import numpy as np

picture = Image.open('flower.jpg')
red, green, blue = np.array(picture).T
print red
picture.save('output.jpg') 
```

第一个打印语句的输出是图片的红色像素：

```
[[112 114  111 ..., 12 13  7]
 [111 112  112 ..., 13 15 11]
 [111 110  110 ..., 12 17 17]
  ...,
 [181 180  180 ..., 25  17 11]
 [180 181  182 ..., 18  14  9]
 [179 179  179 ..., 13  14 15]] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T19:03:09.533

PIL 保存的 JPEG 总是有损的。

# css - Chrome 会混淆使用 SVG 格式的网络字体样式的文本（有时）

> ID：15010029
> 
> 赞同：4
> 
> 时间：2013-02-21T18:49:02.870
> 
> 标签：css, google-chrome, svg, webfonts

**演示： http:** [//jsbin.com/onixik/2](http://jsbin.com/onixik/2) （内容如下）

如果您在 Windows 上的 Chrome 中查看该演示，它可能看起来正常，也可能不正常。“OK”是指它不起眼，只是一些文字。如果不行，则部分文字覆盖其他文字；这很明显。

如果 Chrome 让它看起来不错，然后尝试随机调整窗口大小几次。奇怪的是，一旦它开始出错，就很难（也许不可能）让浏览器重新开始正确显示它。（*编辑*——与我一起工作的一些人像我一样看到了这个问题，但他们的浏览器随后开始工作，就像我的最终所做的那样；也许你们中很少有人会看到它。）

这是“不正常”时的样子： ![在此处输入图像描述](../Images/b3bcb2c4767c935fc3dfca3b32232846.png)

（字体是 Signika；它是 Google、FontSquirrel 和 Adob​​e 提供的免费字体。我将它托管在我自己的服务器上，因为 Google 不会提供 SVG，或者我不知道如何制作它。您将无法在 Firefox 中看到任何内容，因为我没有提供正确的 CORS 标头并且 Firefox 很挑剔。）

我知道如何解决这个问题：在 SVG 文件之前提供 WOFF 文件。但是，我目前首先提供 SVG 文件，因为我在各种博客（以及此处的问题）上一遍又一遍地阅读 Chrome 渲染 SVG 比 WOFF 更好。在这种情况下，这显然不会发生 :-) 有没有人看到这个并找到了另一种解决方法？

的HTML：

```
 <div style='position: relative'>
    <div class=wf style='font-size: 135%'>
      Hello This is a test of some formatting issues
      <span style='margin-top: -3px; font-size: 120%'>*</span>
      The problem is strange.
    </div>
  </div> 
```

CSS：

```
 @font-face {
    font-family: 'Signika';
    src: url('http://gutfullofbeer.net/fonts/Signika-Semibold-webfont.eot#') format('embedded opentype'),
      url('http://gutfullofbeer.net/fonts/Signika-Semibold-webfont.svg') format('svg'),
      url('http://gutfullofbeer.net/fonts/Signika-Semibold-webfont.woff') format('woff'),
      url('http://gutfullofbeer.net/fonts/Signika-Semibold-webfont.ttf') format('truetype');
  }

.wf {
  font-family: "Signika";
  font-weight: normal;
  padding: 2em;
  max-width: 12em;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T18:04:52.793

Chrome 似乎在字体和文本方面存在问题。我也有这个问题，只有我的文字扭曲了，而且是付费字体。不知道为什么会这样，但我最终通过 google-fonts 尝试了一种不同的字体，它适用于所有 4 个浏览器。

尝试在谷歌字体上找到与您想要的字体相匹配的字体并改用它。它更容易使用，您不必将所有这些不同的格式加载到您的服务器中，它只是从 google 网站的标题中的标签中提取。不需要CSS。

# php - 父对象初始化后初始化相关对象

> ID：15010031
> 
> 赞同：2
> 
> 时间：2013-02-21T18:49:08.080
> 
> 标签：php, activerecord, yii

我有一个相同类的 Active Record 对象数组。该对象具有定义的关系。初始化“父”对象后，有没有办法以“批量”方式读取相关对象？

示例我定义了 AR 类**Post**、**User**、**Comment** * *Post* * 有关系**所有者**(BELONGS_TO) 到类**User**和关系**评论**(HAS_MANY) 到类**Comments**

**我有一个$posts**类对象的数组**Post**。由于不同的原因，**$posts**不能从一开始就初始化

```
'with' => array('owner', 'comments') 
```

如果我这样做：

```
foreach ($posts as $post) {
   var_dump($post->owner);
   var_dump($post->comments);
} 
```

对于每一个**$post** ，都应该为 retriving **owner**和 retriving **comments**进行查询。这可能导致大量查询和脚本执行缓慢。更好的方法是一步读取一种类型的所有相关对象。

是否存在这样的东西来检索对象数组的某个关系的所有相关对象？：

```
Post::readRelatedObject($posts, 'owner'); 
Post::readRelatedObject($posts, 'comments'); 
```

我需要这种方法有几个原因：

1.  有时我无法提前知道是否需要初始化关系。
2.  在“父母”之后读取相关对象可能会快得多，因为连接可能很慢。
3.  缓存可能会受到影响，因为有时“父”对象不能与相关对象具有相同的缓存时间，因此在从缓存中提取父对象之后以分组/批量方式读取相关对象可能很有用。例如：**$post**已缓存，但我无法将最后 3 条评论与帖子一起缓存。

yii 是否包含这样的内容？或者可以提供帮助的插件？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:27:36.590

如果您正在尝试针对这样的大型结果集进行优化，您几乎总是最好自己滚动。Yii 开发人员[甚至建议](http://www.yiiframework.com/doc/guide/1.1/en/database.ar)不要在这样的复杂情况下使用 activerecord（加载顺序非常不同）。

# 虽然

首先，我建议根据您检索到的所有帖子的 ID 构建自己`CDBCriteria`的。如果您在`Posts`模型中执行此操作，它也与为关系定义的标准很好地绑定（显然不完美）。

```
static public function loadComments(array $ids)
{
    $crit = Comment::model()->dbCriteria;
    $crit->addInCondition('post_id', .....

    .....
    return Comment::model()->findAll($crit);
} 
```

这将为您返回该组 ID 的所有评论，您甚至可以进行一些额外的处理以通过它们所属的帖子 ID 来索引它们。

# 但是，真的

在您的评论中，您说这 100 条帖子每条有 200 条评论可能意味着加载 2000 条（实际上是 20 000 条）。但是，如果您在一个页面上加载了这么多帖子 + 评论，那么您的优化就错了。

在我看来，在担心数据库查询大小之前，您有一些事情需要实现：

1.  在需要之前不要加载评论，无论是单击按钮，滚动到该帖子的标题，还是只是逐步向下页面直到完成。这样，服务器一次只查找一个帖子的评论，用户甚至可能不想看到第 99 号帖子的评论。

2.  不要每页加载 100 个帖子，除非它们是非常小的帖子（在这种情况下，有什么好担心的）。再次渐进式滚动将有所帮助，甚至[分页](http://www.codinghorror.com/blog/2012/03/the-end-of-pagination.html)

3.  过滤你的结果，只显示那些相关的，用户想看的帖子很可能没有 100 条，如果有 200 条评论，有多少用户会阅读超过 10 条？

如果你实现其中之一，我认为结果集大小的问题就会消失。

# 然而

如果您*确实*需要担心 20 000 行，那么您应该首先关注 ActiveRecord 实例化。20 000 行在任何正常设置中都无需担心，但 20 000 活动记录对象肯定是，即使在更高规格的系统上也是如此。如果您正在处理非常大和/或复杂的数据集，您应该使用 DAO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T11:32:20.617

我不知道可以做到这一点的扩展。也许你可以创建一个 yii 应该知道关于数据的一切来解决这个任务。

假设`comment`有一个指向表中的`post_id`链接。`id``post`

有几个选项可以加载帖子的相关评论。

**选项 1**：使用 ID 查询所需的评论。一些 DBMS 限制了 SQL 查询的长度，因此您可能必须小心，不要在 IN 子句中放置许多 ID。也许这必须分成多个查询。

1.  迭代给定`$posts`的并将 post 存储`id`在列表中。
2.  运行 SQL 查询，例如`SELECT * FROM comments WHERE post_id IN ([the IDs from the list])`.
3.  将结果合并到您的`$posts`.

**选项 2**：要修复可能的 IN 子句限制，请改用 JOIN。

1.  运行 SQL 查询，如`SELECT * FROM comments JOIN [the SELECT query for the posts]`.

**选项 3**（我的首选）：根据您的用例，重新加载所有带有评论和作者的帖子（通过在模型中定义）可能是最`with`干净的`criteria`。`posts`

1.  添加条件`with`：`if ($loadDetails) { criteria->'with' => array('owner', 'comments'); }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T04:02:18.313

如果您主要关心的是避免延迟加载并希望检索所有 Post 及其相关的所有者和评论记录。

这可能对你有用。

```
$criteria = new CDbCriteria();
$criteria->with = array('comments','owner');
$result = $Post->together()->findAll($criteria); 
```

参考： [http ://www.yiiframework.com/doc/api/1.1/CActiveRecord#together-detail](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#together-detail) [http://www.yiiframework.com/doc/api/1.1/CDbCriteria#with-detail](http://www.yiiframework.com/doc/api/1.1/CDbCriteria#with-detail)

希望这能回答您的问题。

# ruby - 如何将语法高亮添加到 sublime 文本 2

> ID：15010032
> 
> 赞同：13
> 
> 时间：2013-02-21T18:49:09.267
> 
> 标签：ruby, sublimetext2

给定字符串`"text text #{interpolation}"`Sublime Text 2 用一种颜色突出显示整个字符串。我想突出显示内插文本，以便轻松挑选。当我在插值部分按 ctrl-shift-alt-p 时，Sublime 告诉我命名空间：`source.ruby string.quoted.double.ruby source.ruby.embedded.source`

我想知道我会在哪里定义一个规则来突出显示这一点（我认为在 tmLanguage 文件中），该规则将采用什么格式，以及如何为其分配颜色。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T19:40:21.407

如果您深入研究包含的`Dawn.tmTheme`文件（唯一正确突出显示的包含主题之一），您会发现这些突出显示规则`String embedded-source`，出于某种原因，某些主题完全忽略了这一点：

```
<dict>
    <key>name</key>
    <string>String embedded-source</string>
    <key>scope</key>
    <string>string source</string>
    <key>settings</key>
    <dict>
        <key>background</key>
        <string>#6F8BBA26</string>
        <key>fontStyle</key>
        <string></string>
        <key>foreground</key>
        <string>#080808</string>
    </dict>
</dict> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-10T09:54:50.290

这更好，因为它实际上将插值中的代码突出显示为普通代码，而不是所有相同的颜色。

```
<dict>
   <key>name</key>
      <string>Embedded Ruby Punctuation</string>
   <key>scope</key>
      <string>string punctuation.section.embedded.ruby</string>
   <key>settings</key>
   <dict>
      <key>foreground</key>
      <string>#F92672</string>
   </dict>
</dict>
<dict>
   <key>name</key>
      <string>Embedded Ruby Source</string>
   <key>scope</key>
      <string>string source.ruby.embedded.source</string>
   <key>settings</key>
   <dict>
      <key>foreground</key>
      <string>#FFFBF7</string>
   </dict>
</dict> 
```

# windows - 如何检查虚拟机上添加的原始磁盘是否在线独立于 Windows 语言环境

> ID：15010038
> 
> 赞同：0
> 
> 时间：2013-02-21T18:49:26.323
> 
> 标签：windows, shell, powershell, locale, vmware

我有一个场景，我将原始磁盘从 vmware 添加到虚拟机。然后我运行一个脚本来格式化原始磁盘并挂载它。脚本看起来像这样

```
#!/bin/sh
target=$1
mount=$2
format=$3
script=/tmp/diskpart.$$
echo "list disk" >> $script
disks=$($diskpart /s $wscript | tee ${logfile} | awk '$1 == "Disk" && ($3 == "Online" || $3 == "Offline") {print $2}') 
```

当 windows 平台是英文时，这工作正常，但是当 windows 平台不是英文时说法语，这会失败，因为 'Disk' 拼写为 'Disque'。是否有一种独立于语言环境的方法来确定磁盘是否在线并对其进行格式化？我确实搜索了很多但找不到方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:13:41.820

这是 Unix bash 脚本。我百分百确定。它以 shebang 开头并包含 PS 不兼容的语法。

对不起。

# python - 在 Web 应用程序中将颜色信息存储在哪里？

> ID：15010043
> 
> 赞同：1
> 
> 时间：2013-02-21T18:49:43.897
> 
> 标签：python, django, web

我一直在为调度系统开发 Django 应用程序（使用 AJAX dhtmlScheduler 库），我需要对事件类型进行颜色编码。作为每个事件的一部分，客户希望我返回一个`#00F162`指示事件颜色的字符串。然后由客户端解析并由 Javascript 显示。

样式指南如下所述：http://docs.dhtmlx.com/doku.php?id=dhtmlxscheduler: [custom_styling](http://docs.dhtmlx.com/doku.php?id=dhtmlxscheduler:custom_styling)

第一个选项是在数据库中存储一个十六进制值，也许在`event_type`数据库中。第二个选项是将其逻辑放在我的应用程序中，并根据所选的班次进行计算。

将条目存储在`event_type`数据库中似乎很奇怪，因为我觉得我将外观与模型混合在一起并且颜色不会改变。第二个选项意味着我在应用程序中对值进行硬编码。

哪个是最好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:54:59.957

在这种特殊情况下，我会将十六进制颜色代码存储在模型中的字段中。

在本质上：

```
class Event(models.Model):
    ALERT   = "alert"
    WARNING = "warning"
    ERROR   = "error"
    EVENT_TYPES = (
        (ALERT,   "Alert"),
        (WARNING, "Warning"),
        (ERROR,   "Error"),
    )

    YELLOW = "FF6A00"
    ORANGE = "FFE800"
    RED    = "FF0000"
    COLOURS = (
        (YELLOW, "Yellow"),
        (ORANGE, "Orange"),
        (RED,    "Red"),
    )

    event_type = models.CharField(max_length=16, choices=EVENT_TYPES, default=ALERT)
    event_colour = models.CharField(max_length=6, choices=COLOURS, default=YELLOW) 
```

附加说明，“常量”的原因是为了使使用此模型的代码简洁明了。

```
# example 1
error_events = Event.objects.filter(event_type=Event.ERROR)

# example 2
if my_event.event_type == Event.Error:
    # this is an error event
    pass 
```

此外，这是一种在模型上没有颜色字段的情况下可以做到的方法：

```
class Event(models.Model):
    ALERT   = "alert"
    WARNING = "warning"
    ERROR   = "error"
    EVENT_TYPES = (
        (ALERT,   "Alert"),
        (WARNING, "Warning"),
        (ERROR,   "Error"),
    )

    # map events to colours
    COLOUR = {
        ALERT:   "FF6A00",
        WARNING: "FFE800",
        ERROR:   "FF0000",
    }

    event_type = models.CharField(max_length=16, choices=EVENT_TYPES, default=ALERT)

    @property
    def colour(self):
        """
        Return the hexadecimal colour of this event
        """
        self.COLOUR[event_type]

# now this would return True
my_error_event.colour == "FF0000" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:53:36.633

有几种方法可以做到这一点。

如果 event_type 的颜色需要可编辑，我会将其作为 varchar 存储在数据库中。

如果颜色由您决定，那么我可能会处理`__unicode__`event_type 并使用 CSS 来定位该类。如果需要添加新的 event_type，这确实会为您提供少量维护，但它可以让您分离关注点。

# c++ - 从 32 位迁移到 64 位并在处理 Oracle DB 时获取不相关的 sqlcode

> ID：15010049
> 
> 赞同：1
> 
> 时间：2013-02-21T18:50:07.957
> 
> 标签：c++, oracle10g

以前我们有 32 位 C++。现在，我们已将其迁移到 64 位。我们的 C++ 程序与 Oracle 10g DB 交互。

我们的 C++ 程序在 32 位上运行良好。但是一旦我们迁移到 64 位，我们就会面临一个程序的问题：

> FETCH(执行 SQL FETCH SUBP1 INTO :newTabRec;)

来自 Oracle 数据库。

当我们得到时，我们退出 C++ 程序中的 for 循环：

> 未找到（sqlca.sqlcode=1403）

在执行 FETCH 语句时。

为 NOT FOUND 场景生成的 sqlcode 是`1403`. 但是，在迁移到 64 位 C++ 之后，我们看不到 sqlcode，`1403`而是看到了不同的代码`7124089117159473`。

由于 sqlcode 不是`1403`，我们的程序不会退出 for 循环并继续无限循环。

我是否遗漏了任何使我无法获得确切 sqlcode 的内容？

# internet-explorer - 无法使用 ie9 和 firefox 制作 SVG 动画

> ID：15010056
> 
> 赞同：1
> 
> 时间：2013-02-21T18:50:27.597
> 
> 标签：internet-explorer, firefox, svg, svg-animate

我不知道我错过了什么。SVG 动画在 chrome 中显示正常，但虽然我在 ie9 和 firefox 中看到了图像，但我看不到动画。

我已经从 Corel Draw x5 导出了 svg 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"        "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Creator: CorelDRAW -->
<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="100%" height="100%" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"
viewBox="0 0 25.4 2.64582"
 xmlns:xlink="http://www.w3.org/1999/xlink">
 <defs>
  <style type="text/css">
   <![CDATA[
    .str0 {stroke:#898989;stroke-width:0.05}
    .fil0 {fill:none}
   ]]>
  </style>
 </defs>
 <g id="Capa_x0020_1">
    <path class="fil0 str0" d="M0.10261 2.04656c0.08134,0 0.25217...
    /> 
```

然后我添加了动画：

```
<path class="fil0 str0" d="M0.10261 2.04656c0.08134,0 0.25217...
    stroke-dasharray="">
  <animate id="first" attributeName="stroke-dashoffset" from="" to="0" dur="10s" begin="0s"
  onload="var length = parentNode.getTotalLength();
                   parentNode.setAttribute('stroke-dasharray',length+','+length);
                   this.setAttribute('from',length)" />
  </path> 
```

代码可见jsfiddle [http://jsfiddle.net/calamar888/WsxHs/](http://jsfiddle.net/calamar888/WsxHs/)

非常感谢！

PS 1：不得不说我已经在寻找答案，但到目前为止我找不到任何可以解决我问题的东西。

PS 2：Firebug 控制台不显示任何内容

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T19:02:05.937

IE9 不支持动画，Firefox 只在`<svg>`元素上触发 onload 事件，因此您必须将 onload 代码工作移出根`<svg>`元素。

# knockout.js - 动态添加属性到可观察对象

> ID：15010058
> 
> 赞同：8
> 
> 时间：2013-02-21T18:50:41.793
> 
> 标签：knockout.js

我有一个像这样的视图模型，

```
 function viewModel() {
            this.loadData = function() {
                this.Items().C = 3;
            };

            this.Items = ko.observable({ A: 1});
            this.Items().B = 2;
        }

        var vm = new viewModel();
        ko.applyBindings(vm);
        vm.loadData(); 
```

我正在打印出这样的值，

```
 <span data-bind="text: $root.Items().A"></span>
        <span data-bind="text: $root.Items().B"></span>
        <span data-bind="text: $root.Items().C"></span> 
```

它打印出 A 和 B 的值，而不是 C？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T19:48:34.160

由于`C`它本身最初是不可观察的，因此绑定不会知道它需要在进行更改时进行更新。

要使其更新，您需要`Items`完全重置：

```
this.loadData = function() {
    var existing = this.Items();
    existing.C = 3;
    this.Items(existing);
}; 
```

或调用`valueHasMutated`observable 的函数，以强制任何订阅者更新，例如：

```
this.loadData = function() {
    this.Items().C = 3;
    this.Items.valueHasMutated();
}; 
```

# php - 尝试删除带有php文件的文件夹时权限被拒绝

> ID：15010062
> 
> 赞同：0
> 
> 时间：2013-02-21T18:51:05.927
> 
> 标签：php, file-permissions

我有一个 php 脚本，首先创建一个文件夹并将图片放入其中，但真正的问题是，我无法删除其中的文件夹和文件，我在创建文件时授予该文件夹 755 权限，问题是，当我尝试使用 unlink 或 system("rm -rf") 删除它，我收到权限被拒绝的错误。我尝试使用 chmod 和 umask 更改文件和文件夹的权限，但也没有用。

有什么我可以给 php 权限的吗？或任何其他解决方案，

--- 我尝试了可以​​在 stackoverflow 和其他网站上找到的所有可能的脚本，所以我的脚本没有任何问题。谢谢

# ios - 通过触摸 uibutton 打开带有 URL 参考方案的主题演讲

> ID：15010072
> 
> 赞同：0
> 
> 时间：2013-02-21T18:51:26.600
> 
> 标签：ios, objective-c, ipad, properties, keynote

这可能吗？我在下面尝试了这段代码，但无法编译：

```
- (IBAction)KeynoteButton:(id)sender {

    UIDocumentInteractionController *controller = [UIDocumentInteractionController interactionControllerWithURL:[NSURL fileURLWithPath:@"2bm iPad presentation.key"]];
    self.controller.delegate = self;
    CGRect navRect = self.view.frame;
    [self.controller presentOptionsMenuFromRect:navRect inView:self.view animated:YES];
}

#pragma mark - UIDocumentInteractionControllerDelegate

//===================================================================
- (UIViewController *)documentInteractionControllerViewControllerForPreview:(UIDocumentInteractionController *)controller
{
    return self;
}

- (UIView *)documentInteractionControllerViewForPreview:(UIDocumentInteractionController *)controller
{
    return self.view;
}

- (CGRect)documentInteractionControllerRectForPreview:(UIDocumentInteractionController *)controller
{
    return self.view.frame;
} 
```

它在 self.controller 上崩溃，因为它不是属性。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:01:03.303

我认为你需要拿出“自我”。由于控制器是局部变量。

# javascript - 嵌入社交插件时使用 Facebook Javascript SDK

> ID：15010084
> 
> 赞同：-2
> 
> 时间：2013-02-21T18:52:04.867
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-social-plugins

我在我的网站上使用 Facebook[社交插件（Like Box）](https://developers.facebook.com/docs/reference/plugins/like-box/)。我可以看到 Facebook Javascript SDK 也已包含在我的页面中。现在我可以使用了吗？例如，我可以使用这个 sdk 获得粉丝的数量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:57:43.603

是的，您只需调用您的页面 ID：

```
FB.api('/' + pageId, function( r ) {
  var likes = r.likes
}); 
```

但是，您必须确保之前已经加载了 FB sdk（如果它是异步加载的）。因此，请确保通过分配一个函数来加载它`fbAsyncInit`：

```
window.fbAsyncInit = function () {}; 
```

加载 SDK 后将调用此函数。

# xml - 什么是空的 xml 元素？

> ID：15010088
> 
> 赞同：0
> 
> 时间：2013-02-21T18:52:24.200
> 
> 标签：xml

这是真的？空 XML 元素是没有文本上下文的元素。空元素也没有子元素。不过它可以有属性。它使用开始标签和结束标签来表示，中间没有文本。它也可以使用空元素标签来表示。空元素标记表示是互操作性的首选。

它有哪些不同的用途？比如它是用来做什么的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:00:29.473

表示一个空值，而不是做一些愚蠢的事情

```
<element>null</element> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:06:16.823

没有属性的 HTML 示例包括`<hr/>`和`<br/>`。具有属性的示例包括`<imc src="a.jpg"/>`. 在面向数据的 XML 中，有时会使用一个空元素（例如），`<mobile/>`而不是在没有已知值时完全省略该元素。

更复杂的用途是使用“重叠”标记，以标记跨越主要层次结构中节点的构造的开始和/或结束；例如，当主要层次结构表示节和段落时，标记页面边界的位置。

你说：“空元素标记表示是互操作性的首选。” 被谁偏爱？任何符合标准的 XML 解析器都将接受这两种形式。

# php - 显示每个循环中的最后一项

> ID：15010093
> 
> 赞同：0
> 
> 时间：2013-02-21T18:52:51.320
> 
> 标签：php, joomla, joomla-k2

我有一个 php 文档，我想显示数组中最后一项的变量。

这就是我的方式：

```
<?php if(count($items)): ?>
<?php foreach ($items as $key=>$item):?>

    <?php echo $lastone ?>

<?php endforeach; ?>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T18:56:17.880

use php end() method [http://php.net/manual/en/function.end.php](http://php.net/manual/en/function.end.php) to get last element.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:09:31.387

如果您的数组是 assoc 数组，$items[0] 可能不起作用。

只需使用 array_pop($items) 和 array_shift($items) 分别获取最后一项和第一项。正如前面的答案所建议的，尽可能使用 end() 。

# r - 为什么不“？？” 使用 ESS 时运行 help.search()？

> ID：15010097
> 
> 赞同：0
> 
> 时间：2013-02-21T18:53:06.583
> 
> 标签：r, ess

在我工作的 Windows 机器上，当我`??topic`使用 ESS 在 R 终端中键入时，我没有得到预期的结果`help.search(topic)`，而是得到一个名为 的新缓冲区`*help[R](?topic)*`，其内容为：

```
No documentation for '?topic' in specified packages and libraries:
you could try '???topic' 
```

到目前为止，我的 google-fu 未能找到原因，但我确信其他人现在已经解决了这个问题。我需要在配置中进行哪些更改才能使其正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:21:49.507

这在 ESS 中已经解决了很长一段时间。尝试升级。

使用新版本的 ESS，您可以获得与`C-c C-d C-a`代表`apropos`.

# content-management-system - 导出词汇表内容（到其他 CMS 和 PDF 格式）

> ID：15010098
> 
> 赞同：1
> 
> 时间：2013-02-21T18:53:14.157
> 
> 标签：content-management-system, export, vote, glossary

如何将词汇表（及其内容）从 Plone 导出到另一个 CMS？

网站用户如何导出词汇表内容？（例如作为 PDF 文件）？

如何在词汇表中实施投票机制，以使用户能够投票是否应该发布词汇表术语？

提前致谢并致以最诚挚的问候！

# git - Gerrit 工作流程 - 没有新变化

> ID：15010099
> 
> 赞同：0
> 
> 时间：2013-02-21T18:53:21.200
> 
> 标签：git, gerrit

我目前在使用 gerrit 工作流程时遇到了一些问题。我已经推送了一些代码进行审查，但审查被 -1 拒绝了，我需要向同一审查提交另一个补丁集。

我正在执行以下操作并遇到一些问题：

1.  git fetch [repo] refs/changes/93/493/1 && git checkout FETCH_HEAD
2.  3 个文件：A、B、C 是提交的一部分
3.  根据审查，我对 A 进行了更改
4.  git add A（暂存新版本）
5.  git commit --amend --all （changeId 保持不变 - 文件 A、B、C）
6.  git推送评论

我收到错误消息：

！[远程拒绝] master -> refs/for/master（没有新的变化）

有人可以向我解释我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:33:03.337

Gerrit 只会回答如果两个提交（当前在 gerrit 上设置的补丁和本地 HEAD）相同。您确定您已经对任何文件进行了更改并提交了它们吗？

您可以像这样找到两个 SHA-1：

*   在 gerrit 中寻找“补丁集 1
*   本地`git log -n1`

# asp.net - 如何调试托管在 IIS 上的 asp.net 网站代码？

> ID：15010101
> 
> 赞同：1
> 
> 时间：2013-02-21T18:53:29.317
> 
> 标签：asp.net, iis-6, visual-studio-debugging

我的代码中出现了一些问题/错误。我需要从我的 Visual Studio 调试代码，但代码部署在 IIS 上。

您能否提供一些解决方案，以便我可以调试代码并找到错误

我正在使用 Windows XP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:32:35.457

如果您需要调试远程服务器，那么您应该参考以下链接：

[远程 IIS 调试：调试托管在“远程 IIS 服务器”上的 ASP.NET 应用程序](http://www.codeproject.com/Articles/38132/Remote-IIS-Debugging-Debug-your-ASP-NET-Applicatio)

（有趣的是，作者与@Gaurav123 提供的链接相同）

**编辑：** 这是一个相当复杂的过程，这就是为什么人们发布链接而不是给你一个完整的答案。

# ios - TabBarController 中的 UIImagePickerController

> ID：15010105
> 
> 赞同：0
> 
> 时间：2013-02-21T18:53:42.757
> 
> 标签：ios, uitabbarcontroller, uiimagepickercontroller, viewdidload, loadview

我正在尝试在 UITabBarController 中实现 imagepickercontroller。到现在为止还挺好....

在我的 ViewController 中，我启动了 imagePickerController，然后将其放入我的 TabBarViewController 标签栏数组中，我实现了“loadview”方法：

```
- (void)loadView{
    self.arController = [[IFAugmentRealityController alloc] initWithViewController:self];
    [self showCamera];
    [self initOverlayController];
    self.picker.delegate = self;
    [self.view addSubview:self.picker.view];

}

- (void)initOverlayController {
    overlay = [[IFAROverlayView alloc] initWithFrame:CGRectMake(0, 0, SCREEN_WIDTH, SCREEN_HEIGTH)];
    overlay.delegate = self;    
}

- (void)showCamera {
    self.picker = [[UIImagePickerController alloc] init];
    self.picker.navigationBarHidden = YES;
    self.picker.toolbarHidden = YES;
    self.picker.sourceType = UIImagePickerControllerSourceTypeCamera;
    self.picker.showsCameraControls = NO;
    self.picker.cameraViewTransform = CGAffineTransformScale(self.picker.cameraViewTransform, CAMERA_TRANSFORM_X, CAMERA_TRANSFORM_Y);
    self.picker.cameraOverlayView = overlay;
} 
```

但是当我运行该应用程序时，该应用程序似乎在 loadView 方法中创建了一个 inifite 循环，并且标签栏不再反应。我错过了什么吗？

我不希望 ImagePickerController 全屏并使用“presentviewcontroller”方法推送，而是在其中一个选项卡内作为“普通”视图加载。

所以我的问题是：

1）我应该使用“viewdidload”而不是“loadview”吗？因为使用 viewdidload 它似乎正在工作

2) 但是当使用 viewdidload 时，我无法修复应该显示图像选择器的框架。视频屏幕下方和 tabBar 上方始终有一个黑条。

非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:44:21.517

我认为当您在设置视图本身之前发送`-addSubview`消息时会进入无限循环，因为从技术上讲，虽然您应该设置视图控制器的视图。`self.view``self.view = [[UIView alloc] initWithFrame:someFrame];``loadView`

如果`self.view`是`nil`并且您尝试向它发送消息，`-loadView`则再次调用它，从而导致无限循环。

# html - 浏览器不会反映在 html 文件中所做的更改

> ID：15010109
> 
> 赞同：5
> 
> 时间：2013-02-21T18:53:55.650
> 
> 标签：html, css, internet-explorer, google-chrome, firefox

我正在开发一个网站，但遇到了一个非常令人不安的问题。我的代码不会在任何浏览器中刷新，这不仅意味着 Internet Explorer，还意味着 Google Chrome 和 Firefox。

问题是，在以前版本的 HTML 文件中，我有一个 div，其中包含一个链接 ( `<a href="">Send request</a>`)。今天，我把那个链接改成了一个段落（`<p>Send request<p>`）。

当我加载我的页面时，它仍然显示链接。当我注释掉该段落并重新加载页面时，没有链接并且我的段落已被签出。我在 Chrome 中检查了源文件，是的，源文件是正确的。但是，浏览器仍然显示一个不存在的链接，删除浏览器历史记录也无济于事。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T18:57:08.753

You can try out the following

1.  Clear the cache of the browser.
2.  Do a clean build of the Webapp

OR

Open the Browser in InCognito or Private Browsing Mode

OR

Try to put a meta tag in your HTML

```
 <meta http-equiv="pragma" content="no-cache" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T03:54:30.367

问题可能是由于您的浏览器缓存了 HTML 页面。这个问题可以通过——

*   清除浏览器缓存

*   尝试使用错误查询，例如 mypage.html?random=6 此方法会导致浏览器完全根据 GET 请求重新加载页面。

*   使用元标记如下

    ```
    <meta http-equiv="pragma" content="no-cache" /> 
    ```

    这有时伴随着另一个元数据，如下所示

    ```
    <meta http-equiv="expires" content="-1" /> 
    ```

    据观察，有时上述两个标签在 IE 中都会被忽略。建议的解决方法是使用该标签两次，即在页面的开头和结尾处。这是由于浏览器在页面加载时首先填充了 64K 缓冲区的原因。如果缓冲区没有被填满，“pragma”就会被忽略。将其放在文档末尾有助于无缓存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T19:03:12.300

如果您使用的是 Firefox，请安装名为[web developer](https://addons.mozilla.org/en-US/firefox/addon/web-developer/?redirectlocale=en-US&redirectslug=Web_Developer_Extension_%28external%29)的扩展程序。

然后去禁用 -> 禁用缓存 -> 禁用整个缓存。

如果您使用的是 Chrome 或 Chrommium 打开开发者萤火虫 (f12)，请转到设置（右下角）并启用带有文本“禁用缓存”的复选框。

在这两种情况下，请记住使用 control+shift+R（不同时间：P）为网页充电。

并记住在结束工作时禁用此选项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T19:07:20.177

另一个技巧是在你的 html 标签后面添加一个错误的查询并强制浏览器获取一个新页面。

例如：

MySite.html -> MySite.html?q=1、MySite.html?q=2、MySite.html?q=3 等等。

正如其他人所提到的，它似乎在您的主机提供商上启用了缓存。

# php - 将用户的位置存储在数据库中并为他找到最近的用户

> ID：15010113
> 
> 赞同：2
> 
> 时间：2013-02-21T18:54:04.357
> 
> 标签：php, geolocation, location

我正在尝试实现一个用户系统，系统要求之一是找到您附近的其他用户。

位置将按国家/地区过滤，而不是按城市过滤，因此用户可以从同一国家/地区获得来自不同城市的其他用户。

问题是如何计算城市之间的距离？它不必是 100% 准确的，但它必须为更接近的用户提供一些优先级。

Google 地理位置 API 会满足这些要求吗？有哪些替代方案？

知道如何在没有非常繁重的计算的情况下实现它吗？

我想问用户它的国家和城市只是为了写在他的个人资料中，并从它的 IP 中获取它的地理位置，或者导入一个包含所有城市及其地理位置的数据库。

请指导我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T19:48:04.200

您可以使用[**Haversine**](http://rosettacode.org/wiki/Haversine_formula)公式在数据库中搜索最近的用户。

```
$stmt = $dbh->prepare("SELECT  name, lat, lng, ( 3959 * acos( cos( radians(?) ) * cos( radians( lat ) ) * cos( radians( lng ) - radians(?) ) + sin( radians(?) ) * sin( radians( lat ) ) ) ) AS distance FROM mytable HAVING distance < ? ORDER BY distance LIMIT 0 , 20");
    // Assign parameters
    $stmt->bindParam(1,$center_lat);//lat coordinate of user
    $stmt->bindParam(2,$center_lng);//lng coordinate of user
    $stmt->bindParam(3,$center_lat);
    $stmt->bindParam(4,$radius);//Radius in miles 
```

城市数据库可以在[**Geonames上找到**](http://download.geonames.org/export/dump/)

# javascript - 如何像 facebook 一样更新文档标题并正确删除？

> ID：15010115
> 
> 赞同：-1
> 
> 时间：2013-02-21T18:54:17.117
> 
> 标签：javascript, jquery, facebook

在 facebook 中收到通知时，文档标题将自动更新

> (1) 脸书

如何用javascript做到这一点？

**更新：** 我想知道如何插入 (N) 并在用户单击指定的 div 时将其删除。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T18:54:17.117

There is an easy way to update the **[document title](https://developer.mozilla.org/en-US/docs/DOM/document.title)**:

```
document.title = 'My new title'; 
```

Here is a code snippet which will update the title when a new notification is available and update it again (remove the number of new notifications) when the user clicks the `#foo` div.

```
var title = document.title;
var notifications = 0;
jQuery.post(url, data, function(response) {

    // this regex will test if the document title already has a notification count in it, e.g. (1) My Document
    if (/\([\d]+\)/.test(title)) {
        // we will split the title after the first bracket
        title = title.split(') ');
        // get the first part of the splitted string and save it - this will be the count of the unseen notifications in our document string
        notifications = title[0].substring(1);

        // only proceed when the notification count is difference to our ajax request
        if (notifications == response)
            return;
        // else update the title with the new notification count
        else
            document.title = '(' + sp_response + ') ' + title[1];   
    }   
    // when the current document title does not contain any notification count, just update it
    else {
        document.title = '(' + sp_response + ') ' + title;
    }

});

jQuery('#foo').click(function(event){
    var title = document.title;
    if (/\([\d]+\)/.test(title)) {
        title = title.split(') ');
        document.title = title[1];  
    }
}); 
```

# r - R grep sublist from master list from dataframe

> ID：15010117
> 
> 赞同：0
> 
> 时间：2013-02-21T18:54:25.947
> 
> 标签：r, list

How to grep a sublist of a list like grep -f in unix? say I have a dataframe

```
A 1 3 4 
B 4 5 6
C 7 8 9
D 1 3 4
E 1 3 3
F 2 4 5 
```

and I only need

```
A 1 3 4 
C 7 8 9
E 1 3 3
F 2 4 5 
```

by like `grep c(A C E F)` ? Thanks a lot!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:58:53.983

I'm assuming the `A` `C` `E` `F` are rownames. Assumming that your data frame is called `dd`, basic subsetting should do the trick:

```
##Select rows where the rownames are in a particular vector
dd[rownames(dd) %in% c("A", "C", "E", "F"), ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:21:39.010

假设`A..F`来自 column `V1`，您可以使用`grepl`which 返回`TRUE/FALSE`：

```
# gives TRUE when V1 != B, D
df[grepl("[^BD]", df$V1), ]

#   V1 V2 V3 V4
# 1  A  1  3  4
# 3  C  7  8  9
# 5  E  1  3  3
# 6  F  2  4  5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T19:37:11.617

如果您想要第一列中的情况是 A、C、E 或 F 并且需要使用，`grep`那么：

```
 dfrm[ grep("^[ACEF]$", dfrm[,1]), ] 
```

如果这些字母是行名，则使用`rownames(dfrm)`而不是`dfrm[,1]`

要创建新对象：

```
 newobj <- dfrm[ grep("^[ACEF]$", dfrm[,1]), ] 
```

对您的评论：要保存为 R 对象以稍后`load`进入会话：

```
 save( newobj , file='newobj_file.rda') 
```

要另存为文本文件：

```
 write.table( newobj, file='newobj_out.txt') 
```

有关各种选项，请参阅 ?write.table，并参阅导入/导出手册了解更多背景信息。它是 R 安装的一部分。使用您的帮助设施。在我的机器上，它位于 R 目录中： .... /doc/manual/R-data.html

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T22:13:43.247

感谢 DWin 和 csgillespie！诀窍是我应该更加注意的向量。

```
>dfrm
A 1 3 4 
B 4 5 6
C 7 8 9
D 1 3 4
E 1 3 3
F 2 4 5 
```

我的兴趣列表存储在一个文件中

```
subset <-read.table("infile", header=F)
>subset
1 A
2 C
3 E
4 F
> dfrm[rownames(dfrm) %in% subset[,1], ]
A 1 3 4 
C 7 8 9
E 1 3 3
F 2 4 5 
```

我应该知道子集也是一个数据框。子集[,1] 发挥了作用。谢谢csgillespie！

# ruby-on-rails - 设计重定向到登录路径时如何闪烁.keep

> ID：15010124
> 
> 赞同：5
> 
> 时间：2013-02-21T18:54:51.940
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

注册后，需要确认，我的应用程序重定向到经过身份验证的页面，因此身份验证失败，并且 Devise 重定向到登录路径。

由于第二次重定向，我注册后的 Flash 消息丢失了。

`flash.keep`在重定向到登录路径之前，我可以在 application_controller.rb 或助手中添加一个吗？如果有替代方案，我不希望为此覆盖设计控制器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T14:45:43.647

注册后，在重定向到登录路径开始之前，我在会话中存储了一条 flash 消息（因为用户未确认它是“ **after_inactive_sign_up_path_for** ()”）

设计注册控制器：

```
class RegistrationsController < Devise::RegistrationsController
  protected
    def after_inactive_sign_up_path_for(resource)
      # store message to be displayed after redirection to login screen
      session[:registration_flash] = flash[:notice] if flash[:notice]
      super
    end
end 
```

然后，如果在登录请求期间出现此消息，我将显示此消息。设计会话控制器：

```
class SessionsController < Devise::SessionsController
  def new
    flash[:notice] = session.delete(:registration_flash) if session[:registration_flash]
    super
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T17:41:27.667

[使用Devise Failure App 方法](https://github.com/plataformatec/devise/wiki/How-To%3a-Redirect-to-a-specific-page-when-the-user-can-not-be-authenticated)更新@rigyt 对最新设计的回答

如上面的链接所示，创建一个自定义故障应用程序。

lib/devise_failure.rb ：

```
 def respond
    if http_auth?
      http_auth
    else
      # From original Devise Failure App
      store_location!
      if flash[:timedout] && flash[:alert]
        flash.keep(:timedout)
        flash.keep(:alert)
      else
        flash[:alert] = i18n_message
      end

      # Store flash temporarily in session because devise strips it
      session[:login_flash] = flash.to_hash

      redirect_to new_user_session_path
    end
  end 
```

会话控制器：

```
 def new
    flash_from_session
    super
  end

  def flash_from_session
    if session[:login_flash]
      session[:login_flash].each do |arr|
        flash[arr.first] = arr.last
      end
      session.delete(:login_flash)
    end
  end 
```

这将按预期设置闪烁并将它们从会话中删除。我还发现它适用于关键的[cacheable_flash](https://github.com/pivotal/cacheable-flash)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-21T19:38:57.003

为什么不将默认的设计闪存消息更改为您希望消息说的任何内容？您可以编辑文件中的闪存消息`devise.en.yml`。我想你要找的在下面`registrations` `signed_up_but_unconfirmed`

# c++ - 从控制台应用程序到 .NET Windows 窗体

> ID：15010130
> 
> 赞同：0
> 
> 时间：2013-02-21T18:55:04.270
> 
> 标签：c++, visual-studio, visual-c++

我已经编写一些控制台应用程序有一段时间了，我想把自己投入到 Visual C++ Windows 窗体编程中。

我想说我之前使用的是另一个 IDE，devc++，现在我发现自己迷失在这个全新的 .NET 世界中。

我的问题是我在哪里可以找到针对我的情况的任何材料？从控制台应用程序跳转到 Windows 窗体应用程序？有人可以向我发送任何教程/指南吗？

我很感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:22:15.513

如果您是 Windows UI 应用程序 (C++) 的初学者。您必须学习三种编程类型。

1.  Windows API 应用程序（无 MFC）
2.  没有 CLR 支持的 MCF（没有 .NET 框架）
3.  CLR 支持应用程序（使用 .NET 框架）

首先找出它们的优点和缺点。然后，我打算让您通过本教程开始 Win32 编程。 [http://www.winprog.org/tutorial/start.html](http://www.winprog.org/tutorial/start.html)

# libgdx - linear particles in particle editor for libgdx

> ID：15010134
> 
> 赞同：1
> 
> 时间：2013-02-21T18:55:33.360
> 
> 标签：libgdx, particles

I need to make a particle effect of a firework explosion for libgdx, i need the particles to be lines, something like this : ![enter image description here](../Images/27a725623ee8b88b620dfceecc3557d3.png)

the problem is how do i make the lines rotate so they all point to the center of the explosion i cant find how to achieve this in the particle editor, i can only set a rotation value for all the particles together, anyone know a solution?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T16:42:37.563

“对齐”复选框（在编辑器底部）应该做你想要实现的。

# ios - ios imagepickerview取消按钮功能

> ID：15010145
> 
> 赞同：0
> 
> 时间：2013-02-21T18:56:09.020
> 
> 标签：ios, objective-c, image, camera, uiimagepickercontroller

无论如何，我的取消按钮正在拉起相机胶卷。我该如何删除它。

```
-  (void)cameraButtonClick:(id)sender {
        mediaPicker = [[UIImagePickerController alloc] init];
        //[mediaPicker setDelegate:self];
        mediaPicker.allowsEditing = YES;
        if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {
            UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil
                                                                     delegate:self
                                                            cancelButtonTitle:@"Cancel"
                                                       destructiveButtonTitle:nil
                                                            otherButtonTitles:@"Take photo", @"Choose Existing", nil];
            [actionSheet showInView:self.view];
        }
        // If device doesn't has a camera, Only "Choose Existing" option will show up.
        else {
            UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil
                                                                     delegate:self
                                                            cancelButtonTitle:@"Cancel"
                                                       destructiveButtonTitle:nil
                                                            otherButtonTitles:@"Choose Existing", nil];
            [actionSheet showInView:self.view];

        }
    }

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {

        if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]){
            if (buttonIndex == 0) {
                [capture showImagePicker:self.navigationController popoverRect:CGRectMake(0.0f, 0.0f, 0.0f, 0.0f)];
            } else if (buttonIndex == 1) {
                capture     = [[VFPhotoCaptureController alloc] init];
            } 
        }
        else{
            if (buttonIndex == 0) {
                capture     = [[VFPhotoCaptureController alloc] init];
            }

        }
        [self presentModalViewController:mediaPicker animated:YES];
    }

    - (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker {
        [picker dismissModalViewControllerAnimated:YES];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:04:56.353

您需要更好的操作表按钮处理：

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
    if (buttonIndex != actionSheet.cancelButtonIndex) {
        if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {
            if (buttonIndex == actionSheet.firstOtherButtonIndex) {
                [capture showImagePicker:self.navigationController popoverRect:CGRectMake(0.0f, 0.0f, 0.0f, 0.0f)];
            } else if (buttonIndex == actionSheet.firstOtherButtonIndex + 1) {
                capture = [[VFPhotoCaptureController alloc] init];
            } 
        } else {
            if (buttonIndex == actionSheet.firstOtherButtonIndex) {
                capture = [[VFPhotoCaptureController alloc] init];
            }
        }

        [self presentModalViewController:mediaPicker animated:YES];
    }
} 
```

# android - How to send a keystroke through adb during a phone call?

> ID：15010146
> 
> 赞同：1
> 
> 时间：2013-02-21T18:56:09.497
> 
> 标签：android, events, call, adb, dtmf

I would like to be able to use ADB to fully manage the process of a phonecall (primarily as I have cracked my screen and cannot see anything).

I know I can initiated a phonecall through:

```
adb shell am start -a android.intent.action.CALL -d tel:1234567890 
```

Similarly I know I can use key events to end a call:

```
adb shell input keyevent KEYCODE_ENDCALL 
```

However I have run into issues when the voicemail asks "press 1 to listen to your message, 2 for settings, etc".

I was hoping that the following command would work:

```
adb shell input keyevent KEYCODE_1 
```

or at least the following:

```
adb shell sendevent /dev/input/event0 1 2 1
adb shell sendevent /dev/input/event0 1 2 0 
```

However the voicemail does not recognise the selection and just repeats the message. I have no way to validate visually as I have no access to the screen.

Any suggestions?

Thanks for your help.

*References:*

1.  Making a call through adb [How to make a call via pc by ADB command on android?](https://stackoverflow.com/questions/4923550/how-to-make-a-call-via-pc-by-adb-command-on-android)
2.  Input event and events' list [ADB Shell Input Events](https://stackoverflow.com/questions/7789826/adb-shell-input-events)
3.  Send event [https://groups.google.com/forum/?fromgroups=#!topic/android-beginners/il2PqSKRFNI](https://groups.google.com/forum/?fromgroups=#!topic/android-beginners/il2PqSKRFNI)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:18:20.817

在通话过程中，您需要切换到“拨号盘”选项卡才能发送 DTMF 代码

# android - Android使用Paint绘制两种不同颜色的虚线

> ID：15010156
> 
> 赞同：4
> 
> 时间：2013-02-21T18:56:38.403
> 
> 标签：android, graphics, paint

我想用两种颜色画一条虚线。我希望这条线以均匀的间隔在红色和白色之间交替。到目前为止我所拥有的效果很好，但是破折号之间的空间是透明的。这就是我想要改变的。到目前为止我的工作：

```
 Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
  paint.setColor(Color.parseColor("#ED1C24"));
  paint.setStyle(Paint.Style.STROKE);
  paint.setPathEffect(new DashPathEffect(new float[] {10,10}, 0)); 
```

谢谢大家！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T20:01:16.620

尝试用两种颜色创建两种颜料，并用不同的颜料画线两次，其中第一个没有虚线，而第二个在上面。

如果您想要虚线之间的透明空间，请调整虚线效果并尝试更改偏移量，例如：

```
paint.setPathEffect(new DashPathEffect(new float[] {10,10}, 0)); 
paint2.setPathEffect(new DashPathEffect(new float[] {5,15}, 15)); 
```

# php - 如何使用 Simple HTML DOM 检查两个属性？

> ID：15010157
> 
> 赞同：1
> 
> 时间：2013-02-21T18:56:44.440
> 
> 标签：php, html, simple-html-dom

我需要使用简单的 HTML DOM 获得一个非常具体的标签，并且必须检查两个属性才能做到这一点，但我不确定如何。现在我有这个：

```
foreach($html->find("ul[class=someclass]") as $step1) 
```

但是在同一个`<ul>`标​​签中，还有一个`id`属性等于“xyz”。那么如何同时检查两者？我假设这样的事情（尽管它似乎不起作用）：

```
foreach($rt_html->find("ul[class=results_ul, id=xyz]") as $step1) 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:02:39.187

这些中的任何一个都应该起作用：

*   ul#xyz[class=results_ul]
*   ul.results_ul[id=xyz]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:02:12.300

我不知道那个图书馆，但如果 Musa 的回答没有帮助，试试这个：

```
$myElements = array();
foreach($html->find("ul[class=someclass]") as $step1) {
    echo "found some class\n";
    if (isset($step1->id) {
       echo "found {$step->id}\n";
    }
    if (isset($step1->id) && $step1->id == 'xyz') {
        $myElements[] = $step1;
    }
}
var_dump($myElements); 
```

# c# - Keep text in the textbox when open and close the app

> ID：15010159
> 
> 赞同：-1
> 
> 时间：2013-02-21T18:57:00.327
> 
> 标签：c#, winforms, textbox

I have created an app where users can store their passwords in iv used an image which is an icon and then a textbox next to it and also a login system and logout button. When the user types in the textbox and logouts out when they log back in the textbox is empty.

So far for my other textboxes I have put search in the textbox and when the users clicks the textbox it disappears and the comes back again now I just need to figure out how to keep the text in the textbox unless the user deletes it themselves.

I'm not sure if its simple by using one of the events.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:01:26.473

```
 private void button2_Click(object sender, EventArgs e)  // Read the data...
      {
        StreamReader sr = new StreamReader("f:\\hg.txt");

        textBox1.Text = sr.ReadToEnd().ToString();
        sr.Close();

    }

    StreamWriter sw;
    private void button1_Click(object sender, EventArgs e) // write the data in the txt file
    {

            sw = new StreamWriter(textBox2.Text);

            sw.WriteLine(textBox3.Text);

            sw.Close();

        } 
```

我正在尝试解决您的问题。我粘贴了两个按钮和两个文本框。我在用英语写作时遇到了这个问题。

# c++ - 从字符串中提取整数

> ID：15010164
> 
> 赞同：-1
> 
> 时间：2013-02-21T18:57:28.253
> 
> 标签：c++, string, parsing

我正在从整数列表中生成一个字符串键，以将相应的值存储在地图中。现在我想从键重新生成整数列表。这是我生成密钥的功能：

```
void generateKey( const std::vector<unsigned int>& varSet, string& key )
    {
    // Generate a string by concatinating intergers as v_12_34_5
    stringstream varNames;
    varNames <<"v";

    for (unsigned int i = 0; i < varSet.size(); i++) 
        {
        varNames <<"_"<<varSet[i];
        }
    key = varNames.str();
    } 
```

感谢帮助我编写了一个代码，用于将此字符串键反向解析为整数向量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:07:24.617

在相反的情况下，您应该忽略第一个字符，然后`_<value>`在循环中提取剩余的 s。这是一个可能的解决方案：

```
vector<unsigned int> generateKey(string key)
{
  stringstream varNames(key);
  varNames.ignore(); // Ignore the initial v

  vector<unsigned int> varSet;
  unsigned int value;

  // While we can ignore a character and extract an integer, add them
  // to varSet
  while (varNames.ignore() &&
         varNames >> value) {
    varSet.push_back(value);
  }

  return varSet;
} 
```

另一种解决方案是使用`std::getline`, 将`_`其视为行分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:55:59.880

看起来像是被打了一拳。尽管如此：您可能想检查您的输入是否格式正确；如果是这样，这是一个示例程序：

```
#include <iostream>
#include <sstream>
#include <vector>
#include <cassert>

namespace {
  std::vector<unsigned int> parse(std::istream &is) {
     assert(is.get() == 'v');
     std::vector<unsigned int> res;
     while (is.good()) {
      unsigned int tmp;
      assert(is.get() == '_');
      is >> tmp;
      res.push_back(tmp);
    }
    assert(!is.fail());
    return res;
  }

  std::vector<unsigned int> parse(const std::string &s) {
    std::istringstream ss(s);
    return parse(ss);
  }
}

int main(int, char **) {
  for (unsigned int i : parse("v_1_23_4")) {
    std::cout << i << std::endl;
  }
  return 0;
} 
```

我使用了断言，但您可能想要使用异常或返回错误值。高温高压

# c# - WPF How to show Gif animation when GUI is freezy?

> ID：15010166
> 
> 赞同：1
> 
> 时间：2013-02-21T18:57:34.443
> 
> 标签：c#, wpf, animation, gif

Code sample:

XAML

```
<Window x:Class="TestWpfApp.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:testWpfApp="clr-namespace:TestWpfApp"
    Title="MainWindow" Height="350" Width="525">
<Grid>

    <testWpfApp:GifImage x:Name="gifImage" Stretch="None" GifSource="/loading.gif" AutoStart="True" Width="50" Height="50" Margin="0,0,300,0"/>
    <ComboBox Width="200" Height="40" Name="Cb"></ComboBox>
</Grid>
</Window> 
```

where `GifImage` is class from high rated answer from [How do I get an animated gif to work in WPF?](https://stackoverflow.com/questions/210922/how-do-i-get-an-animated-gif-to-work-in-wpf)

C# code-behind

```
public partial class MainWindow : Window
{

    public MainWindow()
    {
        InitializeComponent();
        for (int i = 0; i < 14000; i++)
        {
            Cb.Items.Add("Item number" + i);
        }

    }
} 
```

When I make first click on combobox I get GUI freeze on 5-7 seconds and I want to show animated gif when GUI is freeze. How can I make it?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T19:34:33.490

你想要这样的东西：

一级`VisualWrapper`：

```
[ContentProperty("Child")]
    public class VisualWrapper : FrameworkElement
    {
        public Visual Child
        {
            get
            {
                return _child;
            }

            set
            {
                if (_child != null)
                {
                    RemoveVisualChild(_child);
                }

                _child = value;

                if (_child != null)
                {
                    AddVisualChild(_child);
                }
            }
        }

        protected override Visual GetVisualChild(int index)
        {
            if (_child != null && index == 0)
            {
                return _child;
            }
            else
            {
                throw new ArgumentOutOfRangeException("index");
            }
        }

        protected override int VisualChildrenCount
        {
            get
            {
                return _child != null ? 1 : 0;
            }
        }

        private Visual _child;
    } 
```

然后`VisualTargetPresentationSource`：

```
public class VisualTargetPresentationSource : PresentationSource
    {
        public VisualTargetPresentationSource(HostVisual hostVisual)
        {
            _visualTarget = new VisualTarget(hostVisual);
        }

        public override Visual RootVisual
        {
            get
            {
                return _visualTarget.RootVisual;
            }

            set
            {
                Visual oldRoot = _visualTarget.RootVisual;

                // Set the root visual of the VisualTarget.  This visual will
                // now be used to visually compose the scene.
                _visualTarget.RootVisual = value;

                // Tell the PresentationSource that the root visual has
                // changed.  This kicks off a bunch of stuff like the
                // Loaded event.
                RootChanged(oldRoot, value);

                // Kickoff layout...
                UIElement rootElement = value as UIElement;
                if (rootElement != null)
                {
                    rootElement.Measure(new Size(Double.PositiveInfinity,
                                                 Double.PositiveInfinity));
                    rootElement.Arrange(new Rect(rootElement.DesiredSize));
                }
            }
        }

        protected override CompositionTarget GetCompositionTargetCore()
        {
            return _visualTarget;
        }

        public override bool IsDisposed
        {
            get
            {
                // We don't support disposing this object.
                return false;
            }
        }

        private VisualTarget _visualTarget;
    } 
```

这在您的 XAML 中：

```
<Window x:Class="TestWpfApp.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:testWpfApp="clr-namespace:TestWpfApp"
    Title="MainWindow" Height="350" Width="525"
    xmlns:vw="--NamespaceHere--">
<Grid>

    <testWpfApp:GifImage x:Name="gifImage" Stretch="None" GifSource="/loading.gif" AutoStart="True" Width="50" Height="50" Margin="0,0,300,0"/>
    <ComboBox Width="200" Height="40" Name="Cb"></ComboBox>

<vw:VisualWrapper Height="160" Width="160" VerticalAlignment="Center" HorizontalAlignment="Center" x:Name="visualWrapper" />
</Grid>
</Window> 
```

然后`LoadingPanel`上课：

```
public class LoadingPanel
    {
        private VisualWrapper.VisualWrapper visualWrapper;

        public LoadingPanel(VisualWrapper.VisualWrapper _visualWrapper)
        {
            visualWrapper = _visualWrapper;
        }

        public VisualWrapper.VisualWrapper VisualWrapper
        {
            get { return visualWrapper; }
            set { visualWrapper = value; }
        }

        #region WaitDailog

        public HostVisual CreateMediaElementOnWorkerThread()
        {
            // Create the HostVisual that will "contain" the VisualTarget
            // on the worker thread.
            HostVisual hostVisual = new HostVisual();

            // Spin up a worker thread, and pass it the HostVisual that it
            // should be part of.

            Thread thread = new Thread(new ParameterizedThreadStart(MediaWorkerThread));
            thread.SetApartmentState(ApartmentState.STA);
            thread.IsBackground = true;
            thread.Start(new object[] { hostVisual, visualWrapper });

            // Wait for the worker thread to spin up and create the VisualTarget.
            s_event.WaitOne();

            return hostVisual;
        }

        private FrameworkElement CreateMediaElement(VisualWrapper visualWrapper)
        {
            BitmapImage bi = new BitmapImage(new Uri(--YOURIMAGEPATH--));//Image path goes here
            Image image = new Image();
            image.Source = bi;
            image.Height = 150;
            image.Width = 150;
            //image.Margin = new Thickness(-150, -150, -150, -150);

            ImageBehavior.SetAnimatedSource(image, bi);//See http://wpfanimatedgif.codeplex.com/

            BrushConverter conv = new BrushConverter();
            //SolidColorBrush brush = conv.ConvertFromString("#6C8BBA") as SolidColorBrush;
            Border border = new Border();
            border.Background = Brushes.Transparent;
            //border.BorderBrush = brush;
            //border.BorderThickness = new Thickness(3);
            //border.Margin = new Thickness(-85, -140, 0, 0);

            border.Child = image;

            return border;
        }

        private void MediaWorkerThread(object arg)
        {
            // Create the VisualTargetPresentationSource and then signal the
            // calling thread, so that it can continue without waiting for us.
            HostVisual hostVisual = (HostVisual)((object[])arg)[0];
            VisualWrapper visualWrapper = (VisualWrapper)((object[])arg)[1];

            VisualTargetPresentationSource visualTargetPS = new VisualTargetPresentationSource(hostVisual);
            s_event.Set();

            // Create a MediaElement and use it as the root visual for the
            // VisualTarget.
            visualTargetPS.RootVisual = CreateMediaElement(visualWrapper);

            // Run a dispatcher for this worker thread.  This is the central
            // processing loop for WPF.
            System.Windows.Threading.Dispatcher.Run();
        }

        private static AutoResetEvent s_event = new AutoResetEvent(false);

        public bool ShowWaitDialog()
        {
            if (visualWrapper != null)
            {
                if (visualWrapper.Child == null)
                {
                    visualWrapper.Child = CreateMediaElementOnWorkerThread();
                }
            }

            return true;
        }

        public bool DisposeWaitDialog()
        {
            if (visualWrapper != null)
            {
                visualWrapper.Child = null;
            }

            return true;
        }

        #endregion

    } 
```

内码：

```
public MainWindow()
{
    InitializeComponent();

    VisualWrapper visualWrapper = (VisualWrapper)this.FindName("visualWrapper");

    LoadingPanel loadingPanel = new LoadingPanel(visualWrapper);

    Dispatcher.Invoke((Action)(() =>
    {
        loadingPanel.ShowWaitDialog();
    }), DispatcherPriority.Send, null);

     Task.Factory.StartNew(() =>
    {
        List<string> list = new List<string>();

        for (int i = 0; i < 14000; i++)
        {
            list.Add("Item number" + i);
        }

        Dispatcher.BeginInvoke((Action)(() =>
        {
            Cb.ItemsSource = list;
        }), DispatcherPriority.Normal, null);
    }, TaskCreationOptions.LongRunning);
} 
```

编辑`VirtualizingStackPanel`：

```
An easy way to implement this is to create an ItemsPanelTemplate as a Resource and reference it in the ComboBox markup.  

  <Window.Resources>
    <ItemsPanelTemplate x:Key="VSP">
      <VirtualizingStackPanel/>
    </ItemsPanelTemplate>
  </Window.Resources>

    <ComboBox Height="23" Margin="27,10,10,0" Name="ComboBox1"
             VerticalAlignment="Top"
             ItemsSource="{Binding}"
             ItemsPanel="{StaticResource VSP}"
             ScrollViewer.IsDeferredScrollingEnabled="True">
    </ComboBox>  
Specifically, the ItemsPanel property of the ComboBox is set to that ItemsPanelTemplate Resource.

If you prefer, you can include the VirtualizingStackPanel right in the ComboBox creation markup: 

   <ComboBox Height="23" Margin="27,10,10,0" Name="ComboBox1"
             VerticalAlignment="Top"
             ItemsSource="{Binding}"
             ScrollViewer.IsDeferredScrollingEnabled="True">
      <ComboBox.ItemsPanel>
        <ItemsPanelTemplate>
          <VirtualizingStackPanel />
        </ItemsPanelTemplate>
      </ComboBox.ItemsPanel>
    </ComboBox> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-21T19:15:49.543

您的问题是您正在创建一个包含 14000 个项目的 ComboBox。这将需要很长时间才能创建，并且在创建后将无法使用。您真的希望您的用户从 14000 个列表中选择一个项目吗？

重新考虑你的用户界面。如果您确实需要让用户从 14000 种可能性的列表中进行选择，请考虑使用预先输入的搜索文本字段。

如果您绝对必须拥有一个包含数千个项目的 ComboBox，请查看[控制虚拟化](https://stackoverflow.com/questions/2511686/)。

# mysql - MySql 中的复合索引是否双向工作？

> ID：15010170
> 
> 赞同：2
> 
> 时间：2013-02-21T18:58:00.827
> 
> 标签：mysql, indexing, composite-index

考虑具有以下架构的 MySql 表

```
+-------------------+------------+------+-----+-
| Field             | Type       | Null | Key | 
+-------------------+------------+------+-----+-
| id                | int(11)    | NO   | PRI | 
| user_id           | int(11)    | YES  | MUL | 
| following_user_id | int(11)    | NO   | MUL | 
+-------------------+------------+------+-----+- 
```

现在我需要像这样的查询

```
select * from table where user_id = <x> and following_user_id = <y>; 
```

并且

```
select * from table where following_user_id = <x> and user_id = <y>; 
```

所以我正在考虑对 2 列进行复合索引，如下所示：

```
index(user_id, following_user_id) 
```

和

```
index(following_user_id, user_id) 
```

1）索引是根据需要创建的，但是当记录很多（〜百万）时它们会起作用吗？

2) 索引会在正确的时间使用正确的索引来加速查询吗？

PS：我不需要`sort/range selection`查询，只需要直接匹配查询。是否有更好的索引方案可用于此要求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:59:27.983

从编译器的角度来看，您的查询是相同的。任何一个索引都可以。语句中子句的顺序`where`对于限定查询以获取索引并不重要。

但是，如果您有不等式或只有一个子句，则索引中的排序会有所不同。

因此，该索引`index(user_id, following_user_id)`对于以下情况很有用：

*   直接在 user_id 上进行任何比较（<> 除外）
*   user_id = XXX 和以下_user_id = YYY
*   user_id = XXX 和以下_user_id /IN 值

它*不会*用于：

*   以下_user_id < YYY

# php - 防止用户刷新页面以在 php/sql 中添加空白值

> ID：15010173
> 
> 赞同：0
> 
> 时间：2013-02-21T18:58:14.307
> 
> 标签：php, sql

config.php 是具有连接代码的全局文件。

我更新的 Insert.php 代码是：

```
<?php

include("config.php");

if (isset($_POST[firstname]) && isset($_POST[lastname]) && isset($_POST[age])) {
    $sql = "INSERT INTO Persons (FirstName, LastName, Age) VALUES ('$_POST[firstname]','$_POST[lastname]','$_POST[age]')";
    mysql_query($sql, $connect); 
    header("Location: add.htm");
    // "1 record added";
}

else {
    echo "No record added";
    echo "<meta http-equiv=\"refresh\" content=\"5;url=add.htm\"/>";
}

if (!mysql_query($sql,$connect))
  {
  die('Error: ' . mysql_error());
  }

mysql_close($connect);
?> 
```

我的 View.php 代码是：

```
<?php
include("config.php");

$sql = mysql_query("SELECT * FROM Persons");
while($results = mysql_fetch_array($sql)) {
    echo $results['FirstName'] . ', ' . $results['LastName'] . ', ' . $results['Age'] . '<br/>';
}

if (!mysql_query($sql,$connect))
{
  die('Error: ' . mysql_error());
}

mysql_close($connect);
?> 
```

我的 Config.php 代码是：

```
<?php

$dbhost="MYWEBHOST";
$dbusername="MYUSERNAME";
$dbpassword="MYPASSWORD";
$dbname="MYDATABASE";

$connect = mysqli_connect($dbhost, $dbusername, $dbpassword);
mysql_select_db($dbname,$connect) or die ("Could not connect to database");

?> 
```

Insert.php 显示消息“添加了 1 条记录”并将用户重定向回 html 表单。哪个工作正常，但我不想在用户刷新或直接进入 Insert.php 时添加重复/空白值。如何在现有的 Insert.php 代码中完成此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:02:36.540

不要使用元重定向，而是进行标头重定向

```
echo "1 record added";
        echo "<meta http-equiv=\"refresh\" content=\"10;url=add.htm\"/>"; 
```

请执行下列操作

```
header("Location: add.htm"); 
```

如果你重定向他们，那么如果他们回击它就不会发送帖子数据，你应该没问题。

# php - xml解析第二个标签

> ID：15010174
> 
> 赞同：0
> 
> 时间：2013-02-21T18:58:17.557
> 
> 标签：php, xml-parsing

我正在使用 php*`simplexml_load_file`*函数解析 XML。XML 是；

```
<item>
 <Title>TEST</Title>
 <Image primary="true"/>
 <Image>
  http://www.domain.com/image.jpg
 </Image>
</item> 
```

我正在真正解析标题标签；

```
$var->item->Title 
```

但是解析图像标签会给出错误的结果；

```
$var->item->Image 
```

我怎样才能取到；`http://www.domain.com/image.jpg`结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:04:50.220

您的 XML 格式不正确 - 如果您有多个图像并且想要将一个设置为主要图像，您可以使用

```
<item>
<Title>TEST</Title>
<Images>
    <Image primary="true">http://www.domain.com/image1.jpg</Image>
    <Image>http://www.domain.com/image2.jpg</Image>
</Images>
</item> 
```

然后循环遍历`Images`PHP 中的数组以访问图像的路径。

或者，如果您知道您只使用单个图像，请`Primary`在同一图像节点上设置属性：

```
<item>
<Title>TEST</Title>
<Image primary="true">http://www.domain.com/image1.jpg</Image>
</item> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:06:33.900

您可以像这样获取“图像”节点的属性

```
var_dump($var->Title);
var_dump($var->Image->attributes()->primary); 
```

# java - 在不重新开始数组的情况下更改数组元素的值 X 次

> ID：15010179
> 
> 赞同：0
> 
> 时间：2013-02-21T18:58:29.050
> 
> 标签：java

我正在尝试将数组的数量更改 2 次，并且在 [5][4] 数组中仅更改 2 次。

所以说我只想将= 0的前2个元素更改为= 1，然后退出循环。所以元素[0] = 1，[1] = 1，然后[2] = 0，[3] = 0。然后我想将更改元素[2]和[3]添加到1，但留下元素[0]并且 [1] = 1。（这只是一维数组的示例）。

这仅适用于 5 行和 2 列，但我怎样才能在循环中执行此操作？例如，如果我有一个 [30][6] 数组，显然这不会有效。我试过用 for 循环来解决这个问题，但我就是想不出一个可行的方法。

```
int numPassengers = 2;
int count = 0;

while (count < numPassengers){

        if(array[0][1] == 0){
            array[0][1] = 1;
            count++;
        }
        else if(array[1][1] == 0){
            array[1][1] = 1;
            count++;
        }
        else if(array[2][1] == 0){
            array[2][1] = 1;
            count++;
        }
        else if(array[3][1] == 0){
            array[3][1] = 1;
            count++;
        }
        else if(array[4][1] == 0){
            array[4][1] = 1;
            count++;
        }
    } 
```

稍微改了一下代码。

```
for(int i = 0; i < ROW; i++){
        for(int j = 1; j <= 2 ; j++){

            if( array[i][j] == 0){

                if(count < numPassengers){
                    array[i][j]++;
                    count++;
                }
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:10:24.813

我知道您想在二维数组中找到前两个为 0 的元素，并将它们更改为 1。

这很简单，您构建两个嵌套的 for 循环，逐个浏览元素：

```
for (int i=0; i<array.length; i++) {
    for (int j=0; j<array[i].length; j++) {
        int currentValue = array[i][j];
        // stuff
    }
} 
```

（使用`length`数组的属性有助于使您的代码通用）

然后你每次都`currentValue`与0进行比较。如果比较为真，则将元素更改为1。

```
 if (currentValue == 0) {
            array[i][j] = 1;
        } 
```

但是一旦你修改了两个元素，你就必须停下来。为此，您必须使用`count`代码中的变量。

```
 if (currentValue == 0) {
            array[i][j] = 1;
            count ++;
        } 
```

当 count 等于 时`numPassengers`，你必须退出你的两个循环。您可以使用带标签的`break`语句来做到这一点（一个简单的中断只会让您脱离内部循环）：

在第一个之前`for`：

```
outerloop:
for (int i=0; i<array.length; i++) { 
```

然后之后`count++`：

```
 count ++;
            if (count == numPassengers) {
                break outerloop;
            } 
```

# c# - Self-Hosting WCF and System.ServiceModel.FaultException

> ID：15010183
> 
> 赞同：0
> 
> 时间：2013-02-21T18:58:46.777
> 
> 标签：c#, wcf, self-hosting, faultexception

I have a simple WCF Service Library Project (call this Project W) with a handful of DLLs in directory X. I set the startup directory of W to X, all methods work correctly using WcfServiceHost in Visual Studio 2010\.

I want to self-host W, so, I created a console Project (call this Project C), added a reference to W, set the startup directory of W to X, then have essentially the following main lines of code

```
var host = new ServiceHost(typeof(EvalService));
host.Open(); 
```

When I now test the methods in W, I am getting `System.ServiceModel.FaultException` with `{"The specified module could not be found. (Exception from HRESULT: 0x8007007E)"}`.

What can this mean? How can I tell what module it is trying to load?

I am fairly new to both C# and WCF, any hint would be apprecited.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T05:18:09.410

您需要确定此错误是在服务中还是在客户端中。

从错误消息看来，这是一个服务端错误。[您可以从http://msdn.microsoft.com/en-us/library/gg281715.aspx](http://msdn.microsoft.com/en-us/library/gg281715.aspx)实现 IErrorHandler 。

这将使您能够访问服务中的所有错误。然后，您可以记录所有异常及其内部异常。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T04:13:38.690

您可以订阅事件 AppDomain.AssemblyResolve 并在调试器中查看哪个程序集有问题。

```
AppDomain currentDomain = AppDomain.CurrentDomain;
currentDomain.AssemblyResolve += OnAssemblyResolve;

...

private static Assembly OnAssemblyResolve(object sender, ResolveEventArgs args)
{
   Console.WriteLine(args.RequestingAssembly); //set breakpoint there
   return null;
} 
```

# nlp - LingPipe 和情绪分析

> ID：15010184
> 
> 赞同：0
> 
> 时间：2013-02-21T18:58:48.383
> 
> 标签：nlp, sentiment-analysis

我正在关注这份文件：

[http://alias-i.com/lingpipe/demos/tutorial/sentiment/read-me.html](http://alias-i.com/lingpipe/demos/tutorial/sentiment/read-me.html)使用 lingpipe 进行情绪分析。

其中一个步骤说“假设数据在 POLARITY_DIR 目录中并且存在 SentimentDemo.jar 文件（如果 jar 不存在，则编译它），可以从命令行运行演示”

我找不到 SentimentDemo.jar 文件。试过windows搜索。那么我们如何编译它呢？我不熟悉在 Windows 上使用 Ant 以及如何使用它编译 lingpipe jar 文件 - 感谢任何指导！

另外当我尝试运行代码时：

```
java
-cp "sentimentDemo.jar;
     ../../../lingpipe-4.1.0.jar"
PolarityBasic POLARITY_DIR 
```

我收到错误消息：“错误：无法找到或加载主类 PolarityBasic”

我已经配置了polarity_dir，所以我猜这不是问题。

附加信息：

> 我在 Windows 7 上使用 lingpipe 4.1.0

任何完成本教程的指导表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:21:45.813

您应该能够使用“ant jar”构建 jar 文件。

该命令稍后会在教程中提出（[LingPipe：情绪分析教程](http://alias-i.com/lingpipe/demos/tutorial/sentiment/read-me.html)）

> ...（如果没有，请运行 ant jar 来创建它）...

您需要安装 Ant（来自[ant.apache.org](http://ant.apache.org/)），并将其添加到您的 PATH 中。您可能必须在运行 ant 之前设置 ANT_HOME 和/或 JAVA_HOME 环境变量。

# objective-c - 如何将不同的 JSON 输入映射到 RestKit 中的同一个对象？

> ID：15010190
> 
> 赞同：1
> 
> 时间：2013-02-21T18:58:56.863
> 
> 标签：objective-c, json, model, internationalization, restkit

我正在建模没有问题的普通 JSON 对象，但现在为了国际化，我想建模以下场景，其中属性可以是字符串或键/值对字典：

```
"objects": [{"title": "non internatinalizaed title", ...},
    {"title": {"en": "english string", "es": "spanish string"}, ...},
    ....] 
```

由于我不知道服务器是要发送单个字符串还是多个字符串，所以我正在考虑创建一个这样的模型对象：

```
@interface I18NString : Object
@property (copy) NSString *forced; // Set when there is no i18n
@property (copy) NSDictionary *strings; // Set with i18n.
- (NSString*)stringValue; // Returns forced or one of strings 
```

类似于 C 结构联合，根据`strings`不是 nil，我会在`stringValue`方法中选择一个属性或另一个属性。我已经阅读了restkit wiki 中的[动态对象映射](https://github.com/RestKit/RestKit/wiki/Object-Mapping)部分，但我看不到如何使用它来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:01:06.733

您要建模的是一对多关系，其中许多可能是 500、1 或 0。所以，服务器发送一个只有一个键/值（甚至 0，尽管我猜你的多关系是1..n 而不是 0..n)

# php - 如何制作用于上传带有进度条的图片并在上传图片时显示图片的 PHP 表单？

> ID：15010194
> 
> 赞同：1
> 
> 时间：2013-02-21T18:59:44.530
> 
> 标签：php, image, upload, progress

我为 PHP 制作了上传脚本，但问题是我需要制作进度条来显示上传了多少图片，而且当上传完成时，我需要在上传表单时显示图片的缩略图，以免混淆用户。完成后，如果用户对他所做的输入感到满意（因为也有照片的描述），那么他点击“保存”以结束过程。谁能帮我这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:05:12.200

这些可能会帮助您入门：

[HTML PHP 进度条](https://stackoverflow.com/questions/1802734/html-php-progress-bar)

[http://docs.jquery.com/UI/Progressbar](http://docs.jquery.com/UI/Progressbar)

一旦你弄清楚如何实现进度条，你就可以有一些逻辑来检查该任务是否完成，回显`<img src="path of newly uploaded image" />`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:04:11.187

好吧，我认为您需要首先将您的目标划分为不同的步骤，我建议从 SWFuploader 开始，我在我的项目中经常使用它。我在上传时显示进度条。对于接下来的步骤，您需要了解 javascript 才能完成上传过程。

# vba - 如何在 VBA 中编写此单元格引用的 Excel 公式以在 MS Access 中使用：(b2-a1)

> ID：15010196
> 
> 赞同：0
> 
> 时间：2013-02-21T18:59:53.937
> 
> 标签：vba

这是在 Excel 中进行的一个非常简单的计算，但我很难理解如何在 Access 中使用不同记录中的表中的 2 个字段来执行此操作。我有一个应用程序需要找到操作 STOPTime 和下一个 STARTTime 之间的区别。任何帮助将不胜感激。我是 VBA 新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:03:26.710

```
Sub samPle()
Dim startTime As Date
Dim endTime As Date

startTime = Time
'''Your Code

endTime = Time

Debug.Print DateDiff("n", startTime, endTime) ' difference in minutes

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T21:00:05.073

根据您的数据，有多种方法可以解决问题，这使得发布有关 SQL 问题的数据非常重要。例如：

桌子：

```
ID  EventTime           EventType
1   17/02/2013 08:52:00 start
2   17/02/2013 09:52:00 stop
3   17/02/2013 11:52:00 start
4   17/02/2013 15:52:00 stop 
```

SQL：

```
SELECT a.id,
       a.eventtime                    AS Start,
       a.eventtype,
       (SELECT TOP 1 eventtime
        FROM   times b
        WHERE  eventtype = "stop"
               AND eventtime > a.eventtime
        ORDER  BY eventtime,
                  id)                 AS Stop,
       Datediff("n", [start], [stop]) AS RunTime
FROM   times AS a
WHERE  (( ( a.eventtype ) = "start" ))
ORDER  BY a.eventtime; 
```

结果：

```
ID  Start               EventType   Stop                RunTime
1   17/02/2013 08:52:00 start       17/02/2013 09:52:00     60
3   17/02/2013 11:52:00 start       17/02/2013 15:52:00     240 
```

重新评论

```
SELECT a.id, 
       a.eventtime                         AS Start, 
       a.eventtype, 
       (SELECT TOP 1 eventtime 
        FROM   times b 
        WHERE  eventtype = "stop" 
               AND eventtime > a.eventtime 
        ORDER  BY eventtime, 
                  id)                      AS Stop, 
       Datediff("n", [start], [stop])      AS RunTime, 
       (SELECT TOP 1 eventtime 
        FROM   times b 
        WHERE  eventtype = "start" 
               AND eventtime > a.eventtime 
        ORDER  BY eventtime, 
                  id)                      AS NextStart, 
       Datediff("n", [start], [nextstart]) AS StartDiff, 
       Datediff("n", [stop], [nextstart])  AS DownTime 
FROM   times AS a 
WHERE  (( ( a.eventtype ) = "start" )) 
ORDER  BY a.eventtime; 
```

# java - 如何使用 android USB 端口作为主机？

> ID：15010200
> 
> 赞同：0
> 
> 时间：2013-02-21T19:00:07.113
> 
> 标签：java, android, usb, usbserial

我有一部 Gingerbread Android 手机（我说的是所有 v2.3 手机，所以品牌和型号不是选择）

目前我正在尝试将它与 USB 到 TTL/串行转换器连接，该转换器将进一步将数据发送到某些设备（超出范围）。那么是否有任何标准 API 可以使 android 应用程序将数据从其 USB 端口发送到 USB 到串行转换器？（忽略驱动程序问题）。

从技术上讲，android充当主机，我想以字节显式发送数据

比如发送 0xAB 然后发送 0xC3 等等。

一个明显的类比是 J2SE 等中的串行通信 API，它允许将数据作为字符发送。

# node.js - 是否有客户端唯一的方法来处理 socket.io 中的发射完成

> ID：15010204
> 
> 赞同：0
> 
> 时间：2013-02-21T19:00:21.587
> 
> 标签：node.js, socket.io

在我的情况下，我必须使用 socket.io 通过套接字同步存储库。在我的本地机器上它运行良好（高带宽，无延迟......）。但是我坚持向服务器发送更大的对象，然后在发送这些对象期间需要在客户端上进行一些锁定。

因此，第一个已知的可能方法是发出“gotData”并在客户端上侦听。但是有没有办法只从客户端检测完成？

例如像 DUMMY 的例子：

```
//Some dummy code
socket.emit('syncObject', oObj).complete(function(evt){
    console.log('finished emit');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:28:16.467

这有点小技巧，但是您可以在发出时包含一个回调，并在收到消息时立即在服务器端调用它。

客户

```
socket.emit('syncObject', oObj, function() {
  console.log('got message');
}); 
```

服务器

```
var io = require('socket.io').listen(80);

io.sockets.on('connection', function (socket) {
  socket.on('syncObject', function (obj, cb) {
    cb();
    // handle obj data
  });
}); 
```

# css - CSS：抱歉，at-rule @keyframes 未实现

> ID：15010209
> 
> 赞同：3
> 
> 时间：2013-02-21T19:00:38.543
> 
> 标签：css

尝试使用[http://www.w3schools.com/cssref/tryit.asp?filename=trycss3_keyframes2](http://www.w3schools.com/cssref/tryit.asp?filename=trycss3_keyframes2)中的示例制作一个简单的动画作为参考

但是，我试图制作动画的图像静止不动。Aptana 编辑器吐出这些错误——“属性动画不存在”、“属性动画迭代计数不存在”、“抱歉，@keyframes 规则未实现”。

我的html：

```
<div id="animate"><img src="flower.jpg"> </div> 
```

我的CSS：

```
#animate img 
{
    width:50px;
    height:50px;
    animation: test 25s;
    animation-iteration-count: 10;
    -moz-animation: test 25s;
}

@keyframes test
{
0%   {left:0px; top:0px;}
25%  {left:200px; top:0px;}
50%  {left:200px; top:200px;}
75%  {left:0px; top:200px;}
100% {left:0px; top:0px;}
}

@-moz-keyframes test
{
0%   {left:0px; top:0px;}
25%  {left:200px; top:0px;}
50%  {left:200px; top:200px;}
75%  {left:0px; top:200px;}
100% {left:0px; top:0px;}
} 
```

第三个错误，“抱歉，@keyframes 规则没有实现”——这是否意味着这个功能没有在全球范围内正式实现？如果是这样，为什么 W3schools 的示例代码可以正常工作，但我的编辑器中的代码不起作用？

在 Windows 上使用 Mozilla 18.0.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:00:06.823

这似乎对我有用。为了确定，我添加了一个包含类。

[http://codepen.io/anon/pen/JBdgk](http://codepen.io/anon/pen/JBdgk)

此外，您只编写了 moz 关键帧。您正在 Firefox 中进行测试，对吧？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-29T10:57:31.560

Wc3 验证器认为 @-webkit-keyframes 未实现，因为它是特定于供应商的。所以这不是你的问题，也不是编辑的问题，而是 wc3 验证标准。

# java - 不指定格式的自动日期/时间解析器

> ID：15010210
> 
> 赞同：6
> 
> 时间：2013-02-21T19:00:51.170
> 
> 标签：java, datetime, date-parsing

我正在寻找一个可以将字符串解析为 POJO 而无需指定格式的 java 库。我研究[过 POjava](http://www.pojava.org/)。有没有其他图书馆做类似的事情？

```
DateTime dateTime = DateTimeParser.parse("21/02/13");

//If unclear use the cultural information passed
DateTime dateTime = DateTimeParser.parse("01/02/13", new Locale("en-us"));

//Should also work with time zones
DateTime dateTime = DateTimeParser.parse("2011/12/13T14:15:16+01:00"); 
```

我发现以下链接具有相同的问题[Intelligent date/time parser for Java](https://stackoverflow.com/questions/4216191/intelligent-date-time-parser-for-java)，但不是很有用的答案。Joda 或 JChronic 都没有做我想要的。如果我错了，请纠正我。

更新：

我说 Joda 没有解决我的目的的原因是，Joda 希望字符串以 ISO8601 格式或您指定的任何格式（如“yyyyMMdd”）进行解析。我将无法对这种格式进行硬编码，因为我需要处理多种格式。

我有一个解决方案来消除美国或欧洲日期格式的歧义，即 mm/dd/yy 或 dd/mm/yy。假设我可以访问日期的时区，我可以确定它是美国还是欧洲格式？有人可以告诉我这样做的方法吗？谷歌搜索但一无所获。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T19:07:03.587

问题是有些格式**无法**正确猜到。

一个简单的例子是`01/02/2013`。这是2月1日还是1月2日？甚至更糟：`01/02/09`？

**两种**格式都存在。（谢谢英国和美国！）

因此，任何格式猜测者都必须依靠运气来获得这些格式，或者故意为这些格式失败。

python 模块`dateutil.parser`可以用作尽力而为解析器的示例。抱歉，我不知道 java 等价物。但你可能想看看[Joda Time](http://joda-time.sourceforge.net/)

[http://labix.org/python-dateutil#head-b95ce2094d189a89f80f5ae52a05b4ab7b41af47](http://labix.org/python-dateutil#head-b95ce2094d189a89f80f5ae52a05b4ab7b41af47)

它实际上有参数`dayfirst`和`yearfirst`。

然后是一个perl模块：

[https://metacpan.org/pod/Time::ParseDate](https://metacpan.org/pod/Time%3a%3aParseDate)

您也许可以使用该模块中的优先级列表。盲目地尝试多种模式并不是很快（优化的词法分析器会更快），但它可能对您来说已经足够了，除非您猜测数百万条记录的格式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T16:26:09.957

我找到了我的问题的答案。我使用了这个特殊的库[POjava](http://www.pojava.org/)。本页[说明](http://www.pojava.org/howto/datetime.html)如何在不指定任何格式的情况下格式化日期+时间字符串。但是，要使库正常工作，您必须指定日期顺序，例如 Day 后接 Month 或 Month 后接 Day。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T19:11:51.283

对此没有神奇的解决方案。请记住，日期/时间格式也可能取决于您的语言环境。

实际上，您能做的最好的事情是定义一个格式列表，然后逐个“尝试”它们，直到找到适合的（或没有）。

```
private static final FORMAT_1 = "MM/dd/yyyy'T'HH:mm:ss.SSS"
private static final FORMAT_2 = "MM/dd/yyyy'T'HH:mm:ss"
private static final FORMAT_3 = "MM/dd/yyyy" 
```

在 Java 中使用日期/时间对象时，请记住考虑线程安全。我有一个班级正在做这种名为“ThreadSafeDateTimeFormatter”的东西。

祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-04T14:46:38.833

由于我没有找到适合我的情况的方便解决方案，我编写了一个简单的静态实用程序方法来帮助我。如果添加更多格式，将格式包装在集合中并对其进行迭代可以使事情变得更容易。

```
public static Date returnDateFromDateString(String propValue) throws Exception {

    SimpleDateFormat sdfFormat1 = new SimpleDateFormat(IDateFConstants.DATE_STRING_FORMAT_1);
    SimpleDateFormat sdfFormat2 = new SimpleDateFormat(IDateFConstants.DATE_STRING_FORMAT_2);
    SimpleDateFormat sdfISO8601 = new SimpleDateFormat(IDateFConstants.DATE_STRING_ISO_8601);

    try {
        return sdfFormat1.parse(propValue);
    } catch (ParseException e) { }

    try {
        return sdfFormat2.parse(propValue);
    } catch (ParseException e) { }

    try {
        return sdfISO8601.parse(propValue);
    } catch (ParseException e) { }

    throw new Exception(IDateFConstants.DATE_FORMAT_ERROR);
} 
```

`IDateFConstants`看起来像哪里

```
public interface IDateFConstants {

public static final String DATE_STRING_ISO_8601 = "yyyy-MM-dd'T'HH:mm:ss";
public static final String DATE_STRING_FORMAT_1 = "dd.MM.yyyy";
public static final String DATE_STRING_FORMAT_2 = "dd.MM.yyyy HH:mm:ss";

public static final String DATE_FORMAT_ERROR = "Date string wasn't" + 
                                            + "formatted in known formats";

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-18T14:41:25.690

您至少需要有一个有序的候选模式列表。一旦你有了它，[Apache DateUtils](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/time/DateUtils.html)有一个`parseDate(String dateString, String[] patterns)`方法可以让你轻松地尝试日期字符串上的模式列表，并通过第一个匹配的模式对其进行解析：

```
public static Date parseDate(String str,
                         String[] parsePatterns)
                  throws ParseException
Parses a string representing a date by trying a variety of different parsers. 
```

> 解析将依次尝试每个解析模式。仅当解析整个输入字符串时，解析才被视为成功。如果没有匹配的解析模式，则抛出 ParseException。
> 
> 解析器将对解析的日期宽容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-04T12:54:32.987

```
 public static String detectDateFormat(String inputDate, String requiredFormat) {
        String tempDate = inputDate.replace("/", "").replace("-", "").replace(" ", "");
        String dateFormat;

        if (tempDate.matches("([0-12]{2})([0-31]{2})([0-9]{4})")) {
            dateFormat = "MMddyyyy";
        } else if (tempDate.matches("([0-31]{2})([0-12]{2})([0-9]{4})")) {
            dateFormat = "ddMMyyyy";
        } else if (tempDate.matches("([0-9]{4})([0-12]{2})([0-31]{2})")) {
            dateFormat = "yyyyMMdd";
        } else if (tempDate.matches("([0-9]{4})([0-31]{2})([0-12]{2})")) {
            dateFormat = "yyyyddMM";
        } else if (tempDate.matches("([0-31]{2})([a-z]{3})([0-9]{4})")) {
            dateFormat = "ddMMMyyyy";
        } else if (tempDate.matches("([a-z]{3})([0-31]{2})([0-9]{4})")) {
            dateFormat = "MMMddyyyy";
        } else if (tempDate.matches("([0-9]{4})([a-z]{3})([0-31]{2})")) {
            dateFormat = "yyyyMMMdd";
        } else if (tempDate.matches("([0-9]{4})([0-31]{2})([a-z]{3})")) {
            dateFormat = "yyyyddMMM";
        } else {
//add your required regex
            return "";
        }
        try {
            String formattedDate = new SimpleDateFormat(requiredFormat, Locale.ENGLISH).format(new SimpleDateFormat(dateFormat).parse(tempDate));

            return formattedDate;
        } catch (Exception e) {

            return "";
        }

    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-01T11:14:34.757

此日期/时间解析器支持 20 多种日期格式，用户可以将日期格式设置为输入配置。查看完整的文档，它比其他日期时间库做得更多。

Github 链接：[https](https://github.com/zoho/hawking) ://github.com/zoho/hawking 。由 ZOHO ZIA 团队下放。

Hawking Parser 是一个基于 Java 的 NLP 解析器，用于解析日期和时间信息。最流行的解析器，如 Heidel Time、SuTime 和 Natty Date 时间解析器显然是基于规则的。因此，他们往往难以解析日期/时间信息，其中需要考虑更复杂的因素，如上下文、时态、多个值等。

考虑到这一点，霍金解析器旨在解决许多这些挑战，并且与其他可用的日期/时间解析器相比具有许多明显的优势。

It's an open source Library under GPL v3 and the best one. To know why it's best, check out this blog that explains in detail: [https://www.zoho.com/blog/general/zias-nlp-based-hawking-date-time-parser-is-now-open-source.html](https://www.zoho.com/blog/general/zias-nlp-based-hawking-date-time-parser-is-now-open-source.html)

P.S: I'm one of the developers of this project

# ios - 为不同的屏幕尺寸加载不同的视图

> ID：15010211
> 
> 赞同：0
> 
> 时间：2013-02-21T19:00:55.923
> 
> 标签：ios, xcode, storyboard

如何在代码的标签栏中加载视图？为了确定我正在处理的屏幕尺寸，我使用`[[UIScreen mainScreen] bounds].size.height`了，但是之后，我如何加载视图？
目前，我正在使用 and 中的两个“模态序列” `First View Controller`，`[self performSegueWithIdentifier:@"3.5" sender:self];`但是当我这样做时，视图会覆盖标签栏。

![故事板](../Images/c20f91d69e359e582b9b858a771be9dd.png)

# javascript - JavaScript 表单验证：为什么第一个有效而第二个无效？

> ID：15010214
> 
> 赞同：0
> 
> 时间：2013-02-21T19:01:09.897
> 
> 标签：javascript, html, forms

我有以下表格：

```
<form action="next.html" id="userInput" method="post" onsubmit="return validate();">
     Age: <input type="text" name="age" id="age"/>

function validate() {
            var age = document.getElementById("age").value;

            if(age > 100 || age < 0) {

                alert("Age must be within 0 and 100");
                return false;
            } else {
                return true;
            }

        } 
```

这正常工作。如果我在年龄文本框中输入一个大于 100 的数字，它将显示错误消息并停留在当前表单页面。

但是，如果我使用如下的变量 errorMessage 来显示警告框，则它不起作用。它将转到下一页而不弹出警报错误消息。

```
function validate() {
            var age = document.getElementById("age").value;

            var errorMessage="";
            if(age > 100 || age < 0) {
                errorMessage = "Age must be within 0 and 100";
            }

            if( errorMessage !== "" )
                alert(errorMessage);
                return false;
            } else {
                return true;
            }
        } 
```

那么为什么第一个有效而第二个无效呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T19:06:47.210

我看到条件后缺少左大括号。代码应该是：

```
 if( errorMessage !== "" ){
        alert(errorMessage);
        return false;
    } else {
        return true;
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T19:07:57.003

```
function validate() {
        var age = parseInt(document.getElementById("age").value),
        errorMessage;

        if(age > 100 || age < 0) errorMessage = "Age must be within 0 and 100";
        if(errorMessage) {
            alert(errorMessage);
            return false;
        } 
        else {
            return true;
        }
    } 
```

我把它缩短了一点，但你的主要问题是 if(errorMessage != "") 之后没有括号:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T19:19:00.120

您的错误是其他人指出的语法......您在 if 语句之后缺少 { 。您可能需要考虑复制未来的代码并将其粘贴到在线 javascript 语法检查器中。例如[http://www.javascriptlint.com/online_lint.php](http://www.javascriptlint.com/online_lint.php)

# html - 是否可以将“:before”css 伪元素中的“内容”推出容器？

> ID：15010216
> 
> 赞同：4
> 
> 时间：2013-02-21T19:01:23.343
> 
> 标签：html, css, pseudo-element

是否可以在不添加更多类或包装器元素的情况下使“和评论：”出现（显然有评论时）在对象名之后内联？我想让这个尽可能简单。我可以通过在评论中添加一个包装器来做到这一点，但这并不漂亮。

不工作：

```
.username, .objectname { font-weight:bold; }

    .objectname:before {content: "'"; }
    .objectname:after { content: "'"; }

    .comment { font-style: italic; display: block; margin: 3px 0px 3px 0px; background-color: pink; }
    .comment:before {content: "and commented:"; display:inline; background-color: purple;}

    .eventtime { display: block; background-color: yellowgreen;margin: 3px 0px 3px 0px; color: #A1A1A0; }
 <div class="item">
    <span class="username">Some Person</span>
    completed the task
    <span class="objectname">A Random Task</span>
    <span class="comment">silly comment silly comment silly comment silly comment silly comment silly comment silly</span>
    <span class="eventtime">Today @ 12:37PM</span>
</div> 
```

在职的：

```
 .username, .objectname { font-weight: bold; }
    .objectname:before {content: "'";}
    .objectname:after { content: "'"; }
    .comment { font-style: italic; display: block;margin: 3px 0px 3px 0px; background-color: pink;color: #919190;}
    .commentwrapper:before {content: "and commented:"; display:inline; background-color: purple;}
    .eventtime { display: block; background-color: yellowgreen;margin: 3px 0px 3px 0px; color: #A1A1A0; }
     <div id="item1" class="item">
    <span class="username">Some Person</span>
    completed the task
    <span class="objectname">A Random Task</span>
    <span class="commentwrapper">
        <span class="comment">silly comment silly comment silly comment silly comment silly comment silly comment silly comment silly comment silly comment silly comment silly comment silly comment</span>
    </span>
    <span class="eventtime">Today @ 12:37PM</span>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:19:55.660

您将无法拥有两种不同的`display`设置（`inline`和`block`），一种用于父元素，一种用于伪元素（其行为类似于两个单独的元素）。但是您可以伪造它并将伪元素推到父元素之外并放到它上面的行上（实际上，将注释推到它下面）。

诀窍是使用`:before`插入换行符 ( `\a`) 并`white-space: pre`使其显示。然后`:after`用于“和评论”部分。将父级设置为`position: relative;`和。使用在父级上腾出足够的空间，然后用和定位。`:after``position: absolute``padding-left``:after``:after``left: 0``top: 0`

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/C5Hvf/)]]]

### 输出：

> ![在此处输入图像描述](../Images/37363daf900a1f20f5a9bcfeaaa40c6b.png)

### CSS：

```
.comment {
    background-color: pink;
    display: inline;
    font-style: italic;
    margin: 3px 0 3px 0;
    padding-left: 110px;
    position: relative;
}

.comment:after {
    background-color: purple;
    content: "and commented:";
    left: 0;
    padding-right: 4px;
    position: absolute;
    top: 0;
    white-space: nowrap;
}

.comment:before {
    content: '\a';
    white-space: pre;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:28:58.183

如果`span`没有评论时不生成a，那么CSS3的解决方案如下：

[**请参阅小提琴示例**](http://jsfiddle.net/vybKu/5/)。请注意，我必须从任务周围的单引号中删除粗体，否则它也会使“和评论”变为粗体。

```
.username, .objectname { font-weight: bold; }
.objectname:before {content: "'"; font-weight: normal;}
.objectname:after { content: "'"; font-weight: normal;}
.objectname:nth-last-child(3):after { /*<-- only targeted if a comment generated */
   content: "' and commented";
 } 
.comment { 
   font-style: italic; 
   display: block;
   margin: 3px 0px 3px 0px; 
   background-color: pink;
   color: #919190;
}
.eventtime { display: block; background-color: yellowgreen;margin: 3px 0px 3px 0px; 
```

[我最初的想法](http://jsfiddle.net/vybKu/4/)，现在是可选解决方案（请参阅下面的评论了解更改的原因）：

```
.objectname:nth-last-of-type(3):after { /*<-- only targeted if a comment generated */
   content: "' and commented";
 } 
```

# .htaccess - htaccess 重定向（非 www 到 www，语言默认选择，正确的 URL 重写）

> ID：15010217
> 
> 赞同：0
> 
> 时间：2013-02-21T19:01:23.670
> 
> 标签：.htaccess

我需要一些关于正确编写`.htaccess`文件的帮助。我确实尽了最大努力，但它并不总是按预期工作。我想要实现的是：

*   首先，如果浏览器请求`favicon.ico`，它立即得到 404，没有异常，没有重写/重定向（我当前的代码仍然重写它，然后返回 404），
*   如果子域是`admin.`，则将流量重写到`/admin/`文件夹（保留`admin.`在 URL 中），否则重写到`www.`
*   检查 URL 是否`www.`在域前面，即使在任何“子文件夹”（例如：domain.com/en/sub1/sub2/）上，否则重定向，
*   检查是否选择了语言 (en|sl)，否则选择默认`sl`并将其他请求重定向到根目录中的 index.php（包含语言代码，例如：www.domain.com/en/example/#selection，?a= b 不需要发，我不会用）

**当前`.htaccess`：**

```
Options +FollowSymlinks -Indexes
RewriteEngine on

// this works somewhat (still rewrites 2 times... I can see it in apache log)
RedirectMatch 404 favicon.ico
// this doesn't work at all
Redirect 404 /favicon.ico

RewriteCond %{HTTP_HOST} ^admin\. [NC]
RewriteRule ^(.*)$ /admin/$1 [L]

RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

# Check if lang. code is provided otherwise select sl
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !^/(sl|en)/ [NC]
RewriteRule ^(.*)$ /sl/$1 [R,L]

# Add trailing slash if not found
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ /$1/ [R,L]

# Process virtual links/directories
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/?$1 [QSA,L] 
```

**问题：**

*   访问时`admin.domain.com`我得到`500 Internal Server Error`，
*   `favicon.ico`在第一次实例中不返回 404，
*   其他一切正常，但如果您对如何改进它有建议，我将不胜感激。

**解决方案：**

我删除了`RedirectMatch`规则并使用`Redirect 404 /favicon.ico`，但除此之外，我几乎必须在任何地方添加`RewriteCond %{REQUEST_FILENAME} !favicon.ico`才能获得正确的 404 响应（没有任何重写/重定向）。

关于 admin 子域：我留下了完全相同的规则，但我`.htaccess`在 /admin 文件夹中创建了额外的规则，用于整理到达那里的流量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:38:50.510

## admin.domain.com - 500 错误

您的管理员重写匹配范围太广，从而将其发送到无限循环中。

```
RewriteCond %{HTTP_HOST} ^admin\. [NC]
RewriteRule ^(.*)$ /admin/$1 [L] 
```

尝试添加条件`RewriteCond %{REQUEST_URI} !^/admin [NC]`以避免循环（如果*真正的*请求以`/admin`.

```
RewriteCond %{HTTP_HOST} ^admin\. [NC]
RewriteCond %{REQUEST_URI} !^/admin [NC]
RewriteRule ^(.*)$ /admin/$1 [L] 
```

## Favicon.ico

[RedirectMatch](https://httpd.apache.org/docs/current/mod/mod_alias.html#redirectmatch)和[Redirect](https://httpd.apache.org/docs/current/mod/mod_alias.html#redirect)指令都有两个必需的参数：正则表达式/路径和重定向 URL 。状态码是可选的。从理论上讲，您的规则`RedirectMatch 404 favicon.ico`可能被解释为“如果路径匹配 404 则重定向到 favicon.ico”。我建议在指令 ala: 中添加一个虚拟 url（不存在）`Redirect 404 /favicon.ico /dev/null`。

# html - 如何将 Fullcalendar 与 addEventSource 一起使用

> ID：15010218
> 
> 赞同：1
> 
> 时间：2013-02-21T19:01:25.823
> 
> 标签：html, jquery, ajax, fullcalendar, jquery-events

我正在尝试使用 jQuery Fullcalendar 制作动态日历，如果它们在月、周或日视图中，我想在事件上显示不同的标题。我正在尝试使用`addEventSource`and `removeEventSource`，但我无法让事件获得渲染。这是我的代码：

```
<script type='text/javascript'>

$(document).ready(function() {

    var date = new Date();
    var d = date.getDate();
    var m = date.getMonth();
    var y = date.getFullYear();

daySource = new Object();       
daySource.title = 'MONTH'; // this should be string
daySource.start = new Date(y, m, d); // this should be date object
daySource.end = new Date(y, m, d);

var day =new Array();
day[0]= daySource;

monthSource = new Object();       
monthSource.title = 'MONTH'; // this should be string
monthSource.start = new Date(y, m, d); // this should be date object
monthSource.end = new Date(y, m, d);

var month =new Array();
month[0]= monthSource;

$('#calendar').fullCalendar({
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'month,agendaWeek,agendaDay'
            },
            columnFormat: {
                month: 'ddd',
                week: 'ddd d/M',
                day: 'dddd d/M'
            },          
            defaultView: 'agendaDay',     

        viewDisplay: function(view) {
            if (lastView == undefined) { lastView = 'firstRun';  }

            if (view.name != lastView ) {

            if (view.name == 'agendaWeek') { 
                $('#calendar').fullCalendar( 'addEventSource', month ); 
                $('#calendar').fullCalendar( 'removeEventSource', day ); 
                $('#calendar').fullCalendar( 'removeEventSource', day ); 
                $('#calendar').fullCalendar('renderEvents');
            }
            if (view.name == 'agendaDay') { 
                $('#calendar').fullCalendar( 'addEventSource', day ); 
                $('#calendar').fullCalendar( 'removeEventSource', month ); 
                $('#calendar').fullCalendar( 'removeEventSource', month ); 
                $('#calendar').fullCalendar('renderEvents');
            }

            if (view.name == 'month') { 
                $('#calendar').fullCalendar( 'addEventSource', month ); 
                $('#calendar').fullCalendar( 'removeEventSource', day ); 
                $('#calendar').fullCalendar( 'removeEventSource', day );
                $('#calendar').fullCalendar('renderEvents'); 
            }
            lastView = view.name;
            }
        },

        timeFormat: { // for event elements
            agendaDay: '',
            agendaWeek: '',
            month: '',
            '': 'h(:mm)t' // default
        },          

    });  $('#calendar').fullCalendar( 'addEventSource', month );        $('#calendar').fullCalendar('rerenderEvents'); 
}); 
```

首先我不知道为什么 avents 不渲染，然后标题是否会根据视图而改变。我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T00:19:43.843

需要是数组，而`eventSources`不仅仅是事件对象。将您的对象封装在数组中，看看是否可行。

检查这个小提琴的演示 - [jsfiddle.net/100thGear/CBPW8/1](http://jsfiddle.net/100thGear/CBPW8/1)

# jquery - 将图像拆分为 N 个 100x100 像素的图像（马赛克）

> ID：15010221
> 
> 赞同：1
> 
> 时间：2013-02-21T19:01:35.820
> 
> 标签：jquery, html

我有一个未知大小的图像，我需要：

*   将其裁剪为 4:5 图像
*   将裁剪后的图像以 1:1 的比例拆分为 20 张图像，这些图像可以在 4x5 网格中拖尾以构成完整图像

我需要做在这个 jfiddle 中所做的事情：

[http://jsfiddle.net/j76Ke/](http://jsfiddle.net/j76Ke/)

但是我需要有一个“背景图像”，其中图像的一部分设置为每个单元格的专有，所以我可以隐藏一个单元格来显示背景

我认为是这样的：

```
.cell { background-image: url(data:mypartofimage); } 
```

我不能像在我的小提琴中那样设置我的背景，因为我需要隐藏一个单元格并显示背景，这将是一个动态内容。

有什么建议吗？（我不能使用 PHP 或服务器端脚本）

编辑：我的小提琴现在是这样的：http:
[//jsfiddle.net/LAWnx/](http://jsfiddle.net/LAWnx/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:05:30.643

而不是对每个单元格应用不同的背景图像，你可以用一些 JS 来做......你可以在单元格上使用背景颜色。

```
.grid .cell  {
    background-color:#ccc;
}

.grid .cell:hover {
    background-color:transparent;
} 
```

[演示](http://jsfiddle.net/j76Ke/1/)

如果您真的想为每个单元格应用背景，则必须使用一些 JS 来计算偏移量并使用[`background-position`](https://developer.mozilla.org/en-US/docs/CSS/background-position). 它将是相同的图像，但它的不同部分将显示在每个框中。

# java - Resteasy Tomcat 部署中的问题

> ID：15010226
> 
> 赞同：0
> 
> 时间：2013-02-21T19:01:48.613
> 
> 标签：java, jax-rs, resteasy

我正在尝试在 Tomcat 6.0 中部署 Resteasy webservice 应用程序，但它在 catalina.out 中给了我错误

```
 INFO [main] (Log4jLogger.java:82) - Adding scanned resource: com.xxxxx.xxxxx.xxxx.xxxxxx
    DEBUG [main] (Log4jLogger.java:60) - Unable to retrieve ServletContext: expandEntityReferences defaults to true
    DEBUG [main] (Log4jLogger.java:60) - Unable to retrieve ServletContext: expandEntityReferences defaults to true
    Feb 22, 2013 12:24:22 AM org.apache.catalina.core.StandardContext start
    SEVERE: Error listenerStart
    Feb 22, 2013 12:24:22 AM org.apache.catalina.core.StandardContext start
    SEVERE: Context [/xxxxxx-0.0.1-SNAPSHOT] startup failed due to previous errors 
```

我的 web.xml 是

```
 <?xml version="1.0" encoding="UTF-8"?>
    <web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
<display-name>resteasy</display-name>
<session-config>
    <session-timeout>30</session-timeout>
</session-config>
<welcome-file-list>
    <welcome-file>index.html</welcome-file>
</welcome-file-list>
<context-param>
  <param-name>resteasy.scan</param-name>
  <param-value>true</param-value>
</context-param>
<context-param>
  <param-name>resteasy.document.expand.entity.references</param-name>
  <param-value>false</param-value>
</context-param>
<listener>
  <listener-class>org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap</listener-class>
</listener>
<servlet>
  <servlet-name>Resteasy</servlet-name>
  <servlet-class>org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher</servlet-class>
</servlet>
<servlet-mapping>
  <servlet-name>Resteasy</servlet-name>
  <url-pattern>/*</url-pattern>
</servlet-mapping>
</web-app> 
```

这里可能出了什么问题？

引发此错误的 Resteasy 代码是[https://github.com/ronsigal/Resteasy/blob/1ddd469a1ddcf51796f1926477903915e41e94b8/jaxrs/resteasy-jaxrs/src/main/java/org/jboss/resteasy/plugins/中的第 47-61 行提供者/DocumentProvider.java](https://github.com/ronsigal/Resteasy/blob/1ddd469a1ddcf51796f1926477903915e41e94b8/jaxrs/resteasy-jaxrs/src/main/java/org/jboss/resteasy/plugins/providers/DocumentProvider.java)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:56:34.677

实际上，此错误与`DocumentProvider`. 我检查了 localhost.log，它缺少一个我忘记复制的**slf4j-api.jar**，而 RESTEasy 对此有所抱怨。

故事的寓意——当你遇到这种错误时，不要忘记检查 localhost.log。

# vb6 - VB6 编译代码机器是特定的吗？

> ID：15010229
> 
> 赞同：1
> 
> 时间：2013-02-21T19:02:04.953
> 
> 标签：vb6

我找到了一些在线资源，这些资源展示了如何在 windows 7 64 位机器上编译 vb6 代码。由于我没有计算机科学背景，我不确定将在 windows 7 64 位机器上生成的 dll 部署到 windows server 2003 32 位机器上是否有任何障碍。

是否可以在我的 Windows 7 机器上编译 vb6，即使它适用于 Windows 2003 服务器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T19:08:45.223

是的，这样做很好。VB6 总是编译 32 位应用程序，它链接到 VB6 运行时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T19:38:38.597

我遇到了在 Win 7 64 位机器上编译的 VB 6 代码未在 XP 和 Vista 机器上运行的问题。我的解决方案是将代码复制到 XP 32 位机器并在那里编译。之后，该应用程序将在包括 Win 8 机器在内的所有设备上运行。

# android - 找不到自定义maven项目android的maven依赖项

> ID：15010231
> 
> 赞同：0
> 
> 时间：2013-02-21T19:02:12.220
> 
> 标签：android, maven, android-maven-plugin

我已经安装了 m2e eclipse 插件。我创建了一个自定义 maven 项目，但它没有显示 maven 依赖项并且工作区有错误。“在工作区中找不到依赖项=[XXXXXXXXXXXX:shared:apklib:1.0-SNAPSHOT:compile]”。我遵循了以下但没有任何效果。

[m2eclipse 找不到 Maven 依赖项，找不到工件](https://stackoverflow.com/questions/2393685/m2eclipse-not-finding-maven-dependencies-artifacts-not-found)

浪费了很多时间，因为 eclipse 在编译期间抱怨缺少类。

谢谢 ！

# c++ - OpenCV：C++ API 和 C API 在功能或速度上是否不同？

> ID：15010233
> 
> 赞同：0
> 
> 时间：2013-02-21T19:02:13.030
> 
> 标签：c++, c, opencv

我看到这里的大多数人都在问关于 C++ 版本的问题——例如数据类型`cv::Mat`和`cv::`一般的命名空间，而我自己使用 C 版本`IplImage`和 C 函数。

这两个 API 之间是否有任何显着的功能和速度差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:41:10.573

我不相信 OpenCV 中有任何活跃的 C 开发，因此引入库的任何新功能（例如广泛的机器学习模块）都将使用 C++。当然，您始终可以将您的 C 数据结构转换为它们的 C++ 等价物并继续使用它们，但我发现 C++ Mat 类比 CvMat 和 IplImage 更灵活且易于使用。

# java - 文件夹 Java 的 Zip 内容

> ID：15010234
> 
> 赞同：0
> 
> 时间：2013-02-21T19:02:14.677
> 
> 标签：java, zip, unzip

我正在尝试压缩文件夹的内容。这意味着当我解压缩 zip 时，我不想获取文件夹，而是获取文件夹的内容。内容是各种文件和子文件夹

问题：但是，当我这样做时，创建的 zip 不会显示我的文件，它只显示文件夹。当我使用不同的解压缩实用程序时，我可以看到文件在那里。感觉就像应用了某种安全设置，或者它们被隐藏了。我需要能够看到这些文件，因为它会导致我的其他程序出现问题。

结构应该是这样的

*   压缩
    *   我的.html
    *   我的.css
    *   其他文件夹

不喜欢这样

*   压缩
    *   我的文件夹
        *   我的.html
        *   我的.css
        *   其他文件夹

这是我正在使用的代码

```
//create flat zip
  FileOutputStream fileWriter = new FileOutputStream(myfolder +".zip");
  ZipOutputStream zip = new ZipOutputStream(fileWriter);
  File folder = new File(myfolder);
   for (String fileName: folder.list()) {
        FileUtil.addFileToZip("", myfolder + "/" + fileName, zip);
    }
   zip.flush();
   zip.close();
 //end create zip 
```

这是我的 FileUtil 中的代码

```
 public static void addFileToZip(String path, String srcFile,ZipOutputStream zip) throws IOException {
        File folder = new File(srcFile);
        if (folder.isDirectory()) {
          addFolderToZip(path, srcFile, zip);
        }
        else {
          byte[] buf = new byte[1024];
          int len;
          FileInputStream in = new FileInputStream(srcFile);
          zip.putNextEntry(new ZipEntry(path + "/" + folder.getName()));
          while ((len = in.read(buf)) > 0) {
            zip.write(buf, 0, len);
          }
          zip.closeEntry();
          zip.flush();
          in.close();
          //zip.close(); 
        }
   }

  public static void addFolderToZip(String path, String srcFolder, ZipOutputStream zip) throws IOException {
        File folder = new File(srcFolder);
        //System.out.println("Source folder is "+srcFolder+" into file "+folder);
        for (String fileName: folder.list()) {
          if (path.equals("")) {
            addFileToZip(folder.getName(), srcFolder + "/" + fileName, zip);
          }
          else {
          //System.out.println("zipping "+path + "/" + folder.getName()+" and file "+srcFolder + "/" + fileName);
            addFileToZip(path + "/" + folder.getName(), srcFolder + "/" + fileName,  zip);
          }
        }
      } 
```

感谢您提前提供的任何帮助，我觉得这只是我可能在这里遗漏的一件小事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T19:13:01.783

在`addFileToZip`方法中，你有

```
zip.putNextEntry(new ZipEntry(path + "/" + folder.getName())); 
```

当为空白时，您将获得一个`"/"`附加的。这可能是你的问题？`folder.getName()``path`

尝试

```
if (path.equals("")) {
    zip.putNextEntry(new ZipEntry(folder.getName()));
}
else {
    zip.putNextEntry(new ZipEntry(path + "/" + folder.getName()));
} 
```

# php - 将 mysql 查询添加到此电子邮件功能

> ID：15010237
> 
> 赞同：0
> 
> 时间：2013-02-21T19:02:31.350
> 
> 标签：php, function, email

我在注册过程中有以下功能，将在完成注册过程后向用户发送电子邮件。我希望电子邮件的文本根据他们是什么类型的用户而有所不同。我有商业用户和个人用户，它们在数据库中被标识为 1 或 0。这就是我到目前为止所拥有的。

```
 function SendBusWelcomeEmail(&$user_rec)
    {
 $result = mysql_query("SELECT business FROM users")
               or die(mysql_error());

                while ($row = mysql_fetch_array($result))
            {

            $actiontype = $row['business'];
            switch ($actiontype)
{
case "0":
        $mailer = new PHPMailer();

        $mailer->CharSet = 'utf-8';

        $mailer->AddAddress($user_rec['email'],$user_rec['name']);

        $mailer->Subject = "Welcome to ".$this->sitename;

        $mailer->From = $this->GetFromAddress();        

        $mailer->Body ="Hello ".$user_rec['name']."\r\n\r\n".
        "Welcome! Your registration  with ".$this->sitename." is completed.\r\n".
        "\r\n".
        "Regards,\r\n".
        "Webmaster\r\n".
        $this->sitename;

        if(!$mailer->Send())
        {
            $this->HandleError("Failed sending user welcome email.");
            return false;
        }
        return true;
break;
case "1":
  $mailer = new PHPMailer();

        $mailer->CharSet = 'utf-8';

        $mailer->AddAddress($user_rec['email'],$user_rec['name']);

        $mailer->Subject = "Welcome to ".$this->sitename;

        $mailer->From = $this->GetFromAddress();        

        $mailer->Body ="Hello ".$user_rec['name']."\r\n\r\n".
        "Welcome! thanks for your business etc etc with ".$this->sitename." is completed.\r\n".
        "\r\n".
        "Regards,\r\n".
        "Webmaster\r\n".
        $this->sitename;

        if(!$mailer->Send())
        {
            $this->HandleError("Failed sending user welcome email.");
            return false;
        }
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:29:20.723

可能是这样的。

```
function SendBusWelcomeEmail(&$user_rec)
{
    $mailer = new PHPMailer();
    $mailer->CharSet = 'utf-8';
    $mailer->AddAddress($user_rec['email'], $user_rec['name']);
    $mailer->Subject = "Welcome to ".$this->sitename;
    $mailer->From = $this->GetFromAddress();        

    $result = mysql_query("SELECT business FROM users") or die(mysql_error());
    if (mysql_num_rows($result))
    {
        $row = mysql_fetch_assoc($result);

        $actiontype = $row['business'];
        switch ($actiontype)
        {
            case "0":
                $mailer->Body = "Hello ".$user_rec['name']."\r\n\r\n"."Welcome! Your registration  with ".$this->sitename." is completed.\r\n"."\r\n"."Regards,\r\n"."Webmaster\r\n".$this->sitename;
                break;

            case "1":
                $mailer->Body = "Hello ".$user_rec['name']."\r\n\r\n"."Welcome! thanks for your business etc etc with ".$this->sitename." is completed.\r\n"."\r\n"."Regards,\r\n"."Webmaster\r\n".$this->sitename;
                break;
        }

        if (!$mailer->Send())
        {
            $this->HandleError("Failed sending user welcome email.");
            return false;
        }
    }

    return true;
} 
```

我假设查询应该包含某种 where 子句，这样您就不会每次都查询整个用户表。我删除了`while`循环，因为您在发送电子邮件后返回。

# c# - asp：IE中的图像错误加载

> ID：15010238
> 
> 赞同：1
> 
> 时间：2013-02-21T19:02:36.467
> 
> 标签：c#, javascript, jquery, asp.net

我在 mypage.aspx 中有一个标签：

```
 <asp:Image ID="imgDedoPid"  runat="server"  Height="100%" data-big="" 
                                        ImageAlign="AbsBottom" /> 
```

在 mypage.aspx.cs 我有这个电话：

```
 Image imgDedoPid.ImageUrl = "Handler1.ashx?file=" + pathImgLoad
        imgDedoPid.Attributes["data-big"] = imgDedoPid.ImageUrl;
        imgDedoPid.Attributes.Add("onload", "lupa();"); 
```

js页面是这样的：

```
<script type="text/javascript">       
    function lupa() {                                
        $("#imgDedoPid").mlens(
        {
            imgSrc: $("#imgDedoPid").attr("data-big"), // path of the hi-res version of the image
            lensShape: "circle",            // shape of the lens (circle or square)
            lensSize: 180,              // size of the lens (in px)
            borderSize: 4,              // size of the lens border (in px)
            borderColor: "#fff",            // color of the lens border (#hex)
            borderRadius: 0                 // border radius (optional, only if the shape is square)
        });           

</script> 
```

此代码在 google chrome 中完美运行，但在 IE9 中不起作用（图像已加载自动缩放，但我想要这种效果： http: [//mlens.musings.it/](http://mlens.musings.it/)）

谁能帮我？

谢谢！

# emacs - 如何让 Emacs ido-dired 在文件上方首先列出目录？

> ID：15010240
> 
> 赞同：4
> 
> 时间：2013-02-21T19:02:40.050
> 
> 标签：emacs, dired, ido-mode

在 GNU Emacs 中，使用 ido-mode，ido-dired 混合列表中的文件和目录。

如何让 Emacs ido-dired 在文件的顶部列出目录？

（奖励问题：如何让 ido-dired 以不区分大小写的顺序列出文件？）

# salesforce - 从 Force.com 身份服务获取组织名称？

> ID：15010241
> 
> 赞同：2
> 
> 时间：2013-02-21T19:02:49.490
> 
> 标签：salesforce

将 OAuth2 和 REST 与自定义创建的远程应用程序一起使用，我可以成功地从[Force.com 身份服务](http://wiki.developerforce.com/page/Digging_Deeper_into_OAuth_2.0_on_Force.com#The_Force.com_Identity_Service)获取用户信息，但是它只返回组织 ID，而不是组织名称。这是一个类似于我得到的示例数据包：

```
{
"id":"https://login.salesforce.com/id/00D50000000IZ3ZEAW/00550000001fg5OAAQ",
"asserted_user":true,
"user_id":"00550000001fg5OAAQ",
"organization_id":"00D50000000IZ3ZEAW",
"username":"user@example.com",
"nick_name":"user1.2950476911907334E12",
"display_name":"Sample User",
"email":"user@example.com",
"status":{
    "created_date":"2010-11-08T20:55:33.000+0000",
    "body":"Working on OAuth 2.0 article"
},
"photos":{
    "picture":"https://c.na1.content.force.com/profilephoto/005/F",
    "thumbnail":"https://c.na1.content.force.com/profilephoto/005/T"
},
"urls":{
    "enterprise":"https://na1.salesforce.com/services/Soap/c/{version}/00D50000000IZ3Z",
    "metadata":"https://na1.salesforce.com/services/Soap/m/{version}/00D50000000IZ3Z",
    "partner":"https://na1.salesforce.com/services/Soap/u/{version}/00D50000000IZ3Z",
    "rest":"https://na1.salesforce.com/services/data/v{version}/",
    "sobjects":"https://na1.salesforce.com/services/data/v{version}/sobjects/",
    "search":"https://na1.salesforce.com/services/data/v{version}/search/",
    "query":"https://na1.salesforce.com/services/data/v{version}/query/",
    "recent":"https://na1.salesforce.com/services/data/v{version}/recent/",
    "profile":"https://na1.salesforce.com/00550000001fg5OAAQ"
},
"active":true,
"user_type":"STANDARD",
"language":"en_US",
"locale":"en_US",
"utcOffset":-28800000,
"last_modified_date":"2011-01-14T23:28:01.000+0000"
} 
```

如何发送带有组织 ID 的查询（可能是 SOQL）以获取组织名称？我想用[这种数据格式](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_objects_organization.htm)列出的数据返回一个 JSON 响应。

我正在通过 PHP 使用 CURL 来实现这一目标。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T01:24:41.777

我认为您指的是组织对象。它有一个名为 Name 的属性。 [来自此文档](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_objects_organization.htm)：Organization.Name：组织的名称

您可以进行 REST 调用来获取此信息。 [从这个文档](http://www.salesforce.com/us/developer/docs/api_rest/api_rest.pdf)

curl [https://na1.salesforce.com/services/data/v27.0/sobjects/Organization/00D50000000IZ3ZEAW?fields=Name](https://na1.salesforce.com/services/data/v27.0/sobjects/Organization/00D50000000IZ3ZEAW?fields=Name) -H“授权：不记名**令牌**”

编辑：更正了“组织”的拼写。

# debugging - Visual Studio 2012 asp.net 4.0 中没有达到断点

> ID：15010242
> 
> 赞同：3
> 
> 时间：2013-02-21T19:02:51.907
> 
> 标签：debugging, visual-studio-2012, asp.net-4.0, visual-studio-debugging, windows-server-2012

我已将我的应用程序从 ASP.NET 2.0 升级到 ASP.NET 4.0（也从 VS 2005 升级到 VS 2012）。在调试我的应用程序时，我遇到了一个奇怪的问题。我的 Web 应用程序的代码隐藏文件中没有任何断点命中。它说：“断点当前不会被命中。没有为此文档加载任何符号”。

项目配置如下：

```
<compilation defaultLanguage="c#" debug="true" targetFramework="4.0"> 
```

*   平台目标：任何 CPU
*   配置：调试
*   环境：Windows Sever 2012、IIS 8.0、VS 2012

我努力了：

*   删除 .pdb 文件/bin 文件夹
*   清理，重建整个项目
*   重置 IIS (8.0)
*   断点在代码执行路径中
*   附加 w3wp.exe 进程

但它没有任何好处。

**我已经在 Windows Server 2008 R2 SP1 上安装了 Visual Studio 2012 并且“它工作得非常好”：o**

**但**

当我准备一台具有 Windows Server 2012 和 VS 2012 的新机器（物理）时，断点不再被击中。所以我认为 Windows 2012 和 VS 2012 存在一些兼容性问题（或任何其他问题或错误）。请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-21T17:47:10.220

我在 VS2012 中遇到了类似的问题。我能够通过转到项目属性 | 来解决。构建 | 高级。然后在 Advanced Build Setting 对话框中，我将 Output 'Debug Info' 设置为 full。

# jquery - 带有链接的 Jquery 自动完成结果 - Ruby on Rails

> ID：15010245
> 
> 赞同：4
> 
> 时间：2013-02-21T19:03:04.403
> 
> 标签：jquery, ruby-on-rails, ruby, autocomplete

我的应用程序有自动完成功能。自动完成工作正常，输入给我正确的结果。但是，除了简单地填充搜索框之外，我希望这些结果是可点击的链接。

产品控制器：

```
def index
 @products = Product.where("title like ?", "%#{params[:title]}%")
  respond_to do |format|
    format .js
    format.html # index.html.erb
    format.json {  render json: @products.map(&:id) }
  end
end 
```

咖啡脚本：

```
jQuery ->
  $('#search').autocomplete
  source: $('#search').data('autocomplete-source') 
```

看法：

```
<%= text_field_tag :search, params[:search], data: {autocomplete_source: products_path(id: 'product.id') } %> 
```

所以我想在某个地方我需要在 JSON 中传递 id，然后让 Jquery 在我链接时显示该 id，但我不知道如何。谢谢。

# expandablelistview - mvvmcross可扩展列表视图

> ID：15010246
> 
> 赞同：9
> 
> 时间：2013-02-21T19:03:05.450
> 
> 标签：expandablelistview, mvvmcross

我只是想知道 ExpandableListViews 的功能或类似的功能是否潜伏在 Mvvmmcross 框架中，或者这种类型的控件是否不适用于多平台要求。在 [http://deapsquatter.blogspot.com/2013/02/mvvmcrossdeapextensions.html](http://deapsquatter.blogspot.com/2013/02/mvvmcrossdeapextensions.html)找到的功能很酷，但不确定展开/折叠功能是否可用。

任何指针/示例代码将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-18T21:49:28.930

这就是它（我把它放在 Deepsqautter 的代码中）。整理完代码后，我会把它放在方便的地方，或者它可能是 mvvmcross 本身的有用补充......

风景：

```
public class BindableExpandableListView : ExpandableListView
    {
        public BindableExpandableListView(Context context, IAttributeSet attrs)
            : this(context, attrs, new BindableExpandableListAdapter(context))
        {
        }
    public BindableExpandableListView(Context context, IAttributeSet attrs, BindableExpandableListAdapter adapter)
        : base(context, attrs)
    {
        var groupTemplateId = MvxAttributeHelpers.ReadAttributeValue(context, attrs,
                                                                           MvxAndroidBindingResource.Instance
                                                                            .ListViewStylableGroupId,
                                                                           AndroidBindingResource.Instance
                                                                           .BindableListGroupItemTemplateId);

        var itemTemplateId = MvxAttributeHelpers.ReadListItemTemplateId(context, attrs);
        SetAdapter(adapter);
        adapter.GroupTemplateId = groupTemplateId;
        adapter.ItemTemplateId = itemTemplateId;
    }

    // An expandableListView has ExpandableListAdapter as propertyname, but Adapter still exists but is always null.
    protected BindableExpandableListAdapter ThisAdapter { get { return ExpandableListAdapter as BindableExpandableListAdapter; } }

    private IEnumerable _itemsSource;
    [MvxSetToNullAfterBinding]
    public virtual IEnumerable ItemsSource
    {
        get { return ThisAdapter.ItemsSource; }
        set { ThisAdapter.ItemsSource = value; }
    }

    public int ItemTemplateId
    {
        get { return ThisAdapter.ItemTemplateId; }
        set { ThisAdapter.ItemTemplateId = value; }
    }

    private ICommand _itemClick;
    public new ICommand ItemClick
    {
        get { return _itemClick; }
        set { _itemClick = value; if (_itemClick != null) EnsureItemClickOverloaded(); }
    }

    public ICommand GroupClick { get; set; }

    private bool _itemClickOverloaded = false;
    private void EnsureItemClickOverloaded()
    {
        if (_itemClickOverloaded)
            return;

        _itemClickOverloaded = true;
        base.ChildClick += (sender, args) => ExecuteCommandOnItem(this.ItemClick, args.GroupPosition, args.ChildPosition);
    }

    protected virtual void ExecuteCommandOnItem(ICommand command, int groupPosition, int position)
    {
        if (command == null)
            return;

        var item = ThisAdapter.GetRawItem(groupPosition, position);
        if (item == null)
            return;

        if (!command.CanExecute(item))
            return;

        command.Execute(item);
    }
} 
```

和适配器

```
public class BindableExpandableListAdapter : MvxAdapter, IExpandableListAdapter
    {
    private IList _itemsSource;

    public BindableExpandableListAdapter(Context context)
        : base(context)
    {

    }

    int groupTemplateId;
    public int GroupTemplateId
    {
        get { return groupTemplateId; }
        set
        {
            if (groupTemplateId == value)
                return;
            groupTemplateId = value;

            // since the template has changed then let's force the list to redisplay by firing NotifyDataSetChanged()
            if (ItemsSource != null)
                NotifyDataSetChanged();
        }
    }

    protected override void SetItemsSource(System.Collections.IEnumerable value)
    {
        Mvx.Trace("Setting itemssource");
        if (_itemsSource == value)
            return;
        var existingObservable = _itemsSource as INotifyCollectionChanged;
        if (existingObservable != null)
            existingObservable.CollectionChanged -= OnItemsSourceCollectionChanged;

        _itemsSource = value as IList;

        var newObservable = _itemsSource as INotifyCollectionChanged;
        if (newObservable != null)
            newObservable.CollectionChanged += OnItemsSourceCollectionChanged;

        if (value != null)
        {
            // dit weggehaald FlattenAndSetSource(value);
        }
        else
            base.SetItemsSource(null);
    }

    public int GroupCount { get { return (_itemsSource != null ? _itemsSource.Count : 0); } }
    public void OnGroupExpanded(int groupPosition)
    {
        // do nothing
    }

    public void OnGroupCollapsed(int groupPosition)
    {
        // do nothing
    }

    public bool IsChildSelectable(int groupPosition, int childPosition)
    {
        return true;
    }

    public View GetGroupView(int groupPosition, bool isExpanded, View convertView, ViewGroup parent)
    {
        var item = _itemsSource[groupPosition];
        return base.GetBindableView(convertView, item, GroupTemplateId);
    }

    public long GetGroupId(int groupPosition)
    {
        return groupPosition;
    }

    public Java.Lang.Object GetGroup(int groupPosition)
    {
        return null;
    }

    public long GetCombinedGroupId(long groupId)
    {
        return groupId;
    }

    public long GetCombinedChildId(long groupId, long childId)
    {
        return childId;
    }

    public object GetRawItem(int groupPosition, int position)
    {
        return ((_itemsSource[groupPosition]) as IEnumerable).Cast<object>().ToList()[position];
    }

    public View GetChildView(int groupPosition, int childPosition, bool isLastChild, View convertView, ViewGroup parent)
    {
        var sublist = ((_itemsSource[groupPosition]) as IEnumerable).Cast<object>().ToList();

        var item = sublist[childPosition];
        return base.GetBindableView(convertView, item, ItemTemplateId);
    }

    public int GetChildrenCount(int groupPosition)
    {
        return ((_itemsSource[groupPosition]) as IEnumerable).Cast<object>().ToList().Count();
    }

    public long GetChildId(int groupPosition, int childPosition)
    {
        return childPosition;
    }

    public Java.Lang.Object GetChild(int groupPosition, int childPosition)
    {
        return null;
    }

    //public object GetRawItem
} 
```

以及示例 XAML 代码：

```
<DeapExtensions.Binding.Droid.Views.BindableExpandableListView
    android:minWidth="25px"
    android:minHeight="25px"
    android:id="@+id/toclist"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    local:MvxBind="ItemsSource Chapters; ItemClick ShowCommand"
    local:MvxItemTemplate="@layout/indextocsectionlistitem"
    local:GroupItemTemplate="@layout/indextocitem"
    android:background="@android:color/white" /> 
```

然后甚至是一些数据示例（伪代码）：

```
public class SubItem {
  public String Name {get; set;}
}

// this is the special part: a chapter does not CONTAIN a sublist, but IS a list of subitems.
public class Chapter : List<Subitem> {
  public String Name {get; set;}
}

// en some usage code
var chapters = new List<Chapter>();
var chapter = new Chapter(){Name = "chap 1"};
chapter.Add(new SubItem(){Name = " 1"});
chapter.Add(new SubItem(){Name = "item 2"});
chapters.Add(chap); 
```

这是我的 MvxBindingAttributes.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  <declare-styleable name="MvxBinding">
    <attr name="MvxBind" format="string"/>
    <attr name="MvxLang" format="string"/>
  </declare-styleable>
  <declare-styleable name="MvxControl">
    <attr name="MvxTemplate" format="string"/>
  </declare-styleable>
  <declare-styleable name="MvxListView">
    <attr name="MvxItemTemplate" format="string"/>
    <attr name="MvxDropDownItemTemplate" format="string"/>
    <attr name="GroupItemTemplate" format="string"/>

  </declare-styleable>
  <item type="id" name="MvxBindingTagUnique"/>
  <declare-styleable name="MvxImageView">
    <attr name="MvxSource" format="string"/>
  </declare-styleable>
</resources> 
```

BTW：我在 MvvmCross 中只剩下一个项目，其余的已转换为 Xamarin.Forms 甚至远离 Xamarin。所以代码不再更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:31:30.950

据我所知，以前没有人这样做过

但是您可以相当简单地将现有的 Android 控件转换为绑定控件 - 您已经在 @deapsquatter 的 repo 中看到了它是如何完成的。

要转换 ExpandableListView，我会一步一步来。

1.  首先获取要使用的结构中的数据
2.  然后手工制作一个非绑定的 UI - 只是快速原型设计
3.  最后以@deapsquatter 的样本并尝试应用相同的原则。

当/如果您遇到特定问题时，您可以随时回到这里询问这些问题。但是，首先将 1 和 2 放在适当的位置，那么您将有一些可靠的问题要问。

希望有帮助。

# sql - 如何通过 ODBC 从 Postgresql 链接到 SQL Server？

> ID：15010248
> 
> 赞同：6
> 
> 时间：2013-02-21T19:03:07.073
> 
> 标签：sql, sql-server, postgresql, odbc, linked-server

我需要能够从 Postgresql 中查询 SQL Server 数据库。Postgres 实例在本地运行，并且 SQL 服务器设置为 ODBC 数据源。如何将其添加为链接服务器？有更好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T00:30:31.567

两个可用选项是：

*   DBI-链接；或者
*   ODBC-FDW（SQL/MED 外部数据包装器）

DBI-link 更加成熟，可以在 Windows 上运行。正确完成后，ODBC FDW 可能会更好，但目前情况并非如此，而且 AFAIK 在 Windows 上不可用。

看：

*   [http://wiki.postgresql.org/wiki/Foreign_data_wrappers](http://wiki.postgresql.org/wiki/Foreign_data_wrappers)
*   [http://pgfoundry.org/projects/dbi-link](http://pgfoundry.org/projects/dbi-link)

# c# - 我应该在每个事务中打开和关闭套接字吗？

> ID：15010255
> 
> 赞同：1
> 
> 时间：2013-02-21T19:03:27.490
> 
> 标签：c#, .net, sockets, asynchronous, client-server

[我有一个运行此MSDN 文章](http://msdn.microsoft.com/en-us/library/fx6588te.aspx)的略微修改版本的异步服务器。这一次只允许一个客户加入。

我的问题是，我可以为每个事务打开和关闭套接字（它使用 TCP）吗？如果我允许多个客户端加入（通过修改代码监听更多客户端），似乎有些消息是交叉连接的。例如，如果我尝试从两个客户端从服务器下载文件，则无论哪个客户端最后启动都会获取文件，而第一个客户端会超时。或者，如果我开始从一个客户端发送一些数据，然后从另一个客户端开始，服务器会收到两者的混合。

由于我的程序不需要高性能（就像游戏一样），每个事务打开/关闭套接字是否有任何问题，或者是否有更好的方法来处理多个客户端？

编辑-我忘了提到侦听器本身将在整个生命周期中保持打开状态，但是每个客户端都会为事务本身打开和关闭一个新套接字。在 MSDN 链接中的代码中，变量是“处理程序”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T19:06:09.510

打开和关闭套接字有开销，所以简短的回答是否定的（在监听端）。这只是最佳实践，所以如果您不担心这一点，请使用任何有效的方法。

当涉及到客户端时，套接字的使用实际上取决于您计划发送数据的频率。如果不经常，那么在短时间内打开套接字可能是常态。如果您注意到任何形式的“串扰”，这很可能是由于您的代码中的错误。对于一些参考，请查看 MSDN 上的 TcpClient 和 TcpListener 类。

# image - 修剪PNG图像的边框

> ID：15010260
> 
> 赞同：0
> 
> 时间：2013-02-21T19:03:41.440
> 
> 标签：image, google-maps, web-applications, image-processing

我有几千张从 Google 上抓取的 PNG 图像，无论出于何种原因，生成的图像在图像的顶部和左侧边缘都有一个细的蓝色边框。这些图像都是 769 x 564 像素或 1109 x 877 像素（我认为）。

我希望能够剥离这个蓝色边框。以自动化方式完成此任务的最佳方法是什么？

这里有一些例子：

![1](../Images/f40222fd32bbb3fd4b980232e0ba338a.png) ![2](../Images/1f0932b067a314773ddab84b2d759b69.png) ![3](../Images/6484b1160d41add5238fb6acb3d1e18a.png) ![4](../Images/eec7562cb254034d814ba717968d77e6.png)

# ios - 无法让 Restkit 0.20 + CoreData 工作

> ID：15010261
> 
> 赞同：0
> 
> 时间：2013-02-21T19:03:43.900
> 
> 标签：ios, json, core-data, restkit

我正在尝试从 http json 资源（类别列表）中获取内容并将其与 restkit 和 coredata 连接。

当我不使用 CoreData 时，我的映射曾经可以工作。然后我决定使用以下教程：

[http://www.alexedge.co.uk/portfolio/introduction-restkit-0-20/](http://www.alexedge.co.uk/portfolio/introduction-restkit-0-20/)

但是，我遇到了一个奇怪的错误，我无法找出原因：

```
the entity (null) is not key value coding-compliant for the key "remoteId" 
```

我的类别模型/实体将 remoteId 映射到我的服务器上的 id，所以这不是问题。但是，从错误看来，Restkit 或 CoreData 无法弄清楚我在说哪个实体（他们说它是一个空实体？？）

这是请求代码：

```
- (NSFetchedResultsController *)fetchedResultsController{
        if (!_fetchedResultsController) {
            NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:NSStringFromClass([Category class])];
            fetchRequest.sortDescriptors = @[[NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES]];
            self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:[RKManagedObjectStore defaultStore].mainQueueManagedObjectContext sectionNameKeyPath:nil cacheName:@"Category"];
            self.fetchedResultsController.delegate = self;
            NSError *error;
            [self.fetchedResultsController performFetch:&error];
            NSLog(@"%@",[self.fetchedResultsController fetchedObjects]);
            NSAssert(!error, @"Error performing fetch request: %@", error);
        }

        return _fetchedResultsController;
    } 
```

和映射：

```
 +(void) prepareMapping {
        RKObjectManager *manager = [RKObjectManager sharedManager];

        NSDictionary *categoryAttributes = @{
                                              @"id" : @"remoteId",
                                              @"created_at" : @"updatedAt",
                                              @"created_at" : @"createdAt",
                                              @"name" : @"name",
                                              @"ads_count": @"adsCount",
                                            };

        RKEntityMapping *categoryMapping = [RKEntityMapping mappingForEntityForName:@"Category" inManagedObjectStore:manager.managedObjectStore];

        [categoryMapping addAttributeMappingsFromDictionary:categoryAttributes];

        categoryMapping.identificationAttributes = @[@"remoteId"];

        [manager addResponseDescriptorsFromArray:@[
         [RKResponseDescriptor responseDescriptorWithMapping:categoryMapping
                                                 pathPattern:@"neighborhoods/:neighborhoodId/categories.json"
                                                     keyPath:@"index_categories.index_category"
                                                 statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)]
         ]];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:38:45.337

I don't know if `NSStringFromClass([Category class])` will work. Did you try the following code?

```
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Category"]; 
```

Additionally you could check out the example core data project inside of the RestKit v.020-rc1 zip file to see how things are going.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T00:48:30.527

[http://nsscreencast.com/episodes/52-restkit-coredata](http://nsscreencast.com/episodes/52-restkit-coredata)

深入整合

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T23:52:24.247

我认为您提到的博客现在已移至：[http ://www.alexedge.co.uk/blog/2013/03/08/introduction-restkit-0-20/](http://www.alexedge.co.uk/blog/2013/03/08/introduction-restkit-0-20/)

# ios - iOS 内部应用分发

> ID：15010265
> 
> 赞同：1
> 
> 时间：2013-02-21T19:03:56.010
> 
> 标签：ios, distribution, enterprise

我的客户想要控制运行应用程序的设备，但还需要将应用程序分发到 100 多个设备。

如果有人设法获得 .ipa，他不希望他能够在非授权设备上运行它。

我不确定以下几点：在企业开发计划下，应用程序是否可以绑定到设备 UUID（如临时部署），或者我是否必须完全保护应用程序分发过程？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T19:15:38.400

如果要确保企业应用程序不会安装在未经授权的设备上，则需要实施自己的复制保护方法。企业配置文件不包括 UDID，它们不是 Apple 指定允许设备的其他方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T19:15:58.803

如果您将应用程序作为企业应用程序分发，则无法将其绑定到像 ad-hoc 部署这样的 UDID（作为企业开发人员，您仍然有 100 台可以作为 ad-hoc 分发的设备）。

您可以使用 TestFlight 分发企业应用程序，它允许您维护授权用户/设备的列表，并且您可以管理谁获得构建等，这样**Testflight 的安装过程只会将您的应用程序安装到您授权的设备上**。即使在未经授权的设备上打开电子邮件，它也不会安装。用户仍然可以尝试将您的应用程序从他们的设备上移除并尝试将其安装在其他地方，但是......

如果设备都 < iOS6，您可以引用设备`uniqueIdentifier`并对照维护的 UDID 列表进行检查，这样应用程序显然仍然可以安装，但无法运行。

另一种选择是要求他们在启动时登录应用程序，否则它将无法运行。

# ruby - 正则表达式替换单词的某些实例而不是其他实例

> ID：15010266
> 
> 赞同：0
> 
> 时间：2013-02-21T19:03:56.967
> 
> 标签：ruby, regex

我试图找出一个正则表达式来替换一些字符串中包含的单词，从“Name1”到“N1”，在 RUBY 中：

```
Name1_Instance_1 --> N1_Instance_1
Name1_Instance_2 --> N1_Instance_2 
```

但如果字符串末尾包含 .xml 则不是：

```
Name1.xml
Name1_Instance.xml 
```

我试过这个：

```
Name1[\w_]*[^.xml] 
```

但不排除这种情况

`Name1_Instance.xml`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:16:31.553

尝试以下方式：

```
Name(?=\d+)(?!\w*\.xml) 
```

在这里`(?=\d+)`，我使用了前瞻`(?!\w*\.xml)`断言`.xml`（任何种类的前瞻断言都不会消耗任何字符串，并且不会在结果中返回前瞻断言的任何部分。

在 Ruby 中，您可以这样做：

```
t = """Name1_Instance_1    
.. .. .. .. Name1_Instance_2    
.. .. .. .. Name1.xml    
.. .. .. .. Name1_Instance.xml""".gsub /Name(?=\d+)(?!\w*\.xml)/, 'N'

print t
N1_Instance_1   
.. .. .. N1_Instance_2   
.. .. .. Name1.xml   
.. .. .. Name1_Instance.xml 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:15:58.213

你可以试试这个：

```
Name1\w*(?!\.xml) 
```

`?!`是[负前瞻](http://www.regular-expressions.info/lookaround.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T19:16:13.387

您可以使用如下所示的负前瞻：

```
Name1[\w]*(?!\.xml) 
```

# sql - 在 SQL Server 中存储 XML 文件

> ID：15010268
> 
> 赞同：3
> 
> 时间：2013-02-21T19:04:06.757
> 
> 标签：sql, sql-server, xml, sql-server-2000

我目前正在研究在 SQL Server 2000 中存储 XML 文件的最佳方式。

我不一定需要映射 XML 字段并将 XML 文件分解到数据库中。我真的只是在寻找一种将整个文件保存在 SQL Blob 字段或类似内容中的方法。

基本上，我将从一个类型化数据集转换为该类型化数据集的 XML 表示。

然后，我想获取该 XML 文件并将其存储在 SQL Server 中以供以后检索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T01:37:05.153

我会使用 IMAGE 类型，而不是任何类型的 TEXT。虽然我没有争论 Rickard Andersson 所说的内容，`XML is text`但我仍然记得一个问题，由于 XML 处理指令编码声明的组合，当作为文本读取时（如在[XmlDocument.LoadXml](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.loadxml.aspx)中），带有法语字符的 XML 的内容会被破坏, 数据库中的字符集（也许还有别的）；基本上往返不起作用（写/读）。

使用二进制存储，它可以保证工作，因为您的应用程序完全控制二进制流的编码/解码。您还可以很容易地使用压缩，如果您的 XML 文件很大或将来会变大，这是一个非常需要的功能。

唯一的缺点与更容易“窥视”XML 的能力有关（即工具不会尝试向您显示文本，而是十六进制字节）。否则，全文索引可以正常工作......

# vim - 更改 vim yankring 历史文件的位置

> ID：15010271
> 
> 赞同：12
> 
> 时间：2013-02-21T19:04:17.013
> 
> 标签：vim, vim-plugin, yank

Vim 的 yankring 插件会在我的主目录中创建一个名为 yankring_history_v2.txt 的文件。如何告诉插件将此文件存储在另一个位置？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-21T19:04:17.013

Yankring 会寻找一个名为 yankring_history_dir 的变量来了解该文件的存储位置。将以下行添加到您的 .vimrc 中：

```
let g:yankring_history_dir = 'path/to/history/dir' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-12-02T01:16:49.033

您还可以使用 更改文件名`yankring_history_file`。例如，如果您希望它成为主目录中的隐藏文件，请保持`yankring_history_dir`原样，并将其添加到您的 . `vimrc`：

```
let g:yankring_history_file = '.yankring_history' 
```

# javascript - 带有异步加载图像的 jQuery 幻灯片循环

> ID：15010273
> 
> 赞同：0
> 
> 时间：2013-02-21T19:04:28.103
> 
> 标签：javascript, jquery

我正在尝试创建一个简单的 jQuery 幻灯片，它不会在开始时加载所有图像，下一个要使用的图像将改为异步加载以减小页面大小。

我有幻灯片工作，但下一张图片的预加载似乎没有完全正常工作？

**例子 jQuery**

```
var i = 2;
var total = 9;

var obj = setInterval(function(){    

    $(".slides_container img").fadeOut("slow", function(){
        $(this).attr("src" ,"/images/slide-" + i + ".jpg").load(function() {
            $(this).fadeIn();
        });
    });

    if(i < total){
        i++;
        //Preload Next Image
        (new Image()).src = "/images/slide-" + i + ".jpg";
    }
    else   
        i = 1;
}, 4000); 
```

**问题的可能原因**

预加载注释下方的行必须加载下一个图像，但是下面突出显示的代码似乎没有使用任何缓存的图像，而是再次从服务器中提取它们？

我必须使用`.load()`才能`.fadeIn()`正确完成工作

```
$(this).attr("src" ,"/images/slide-" + i + ".jpg").load(function() {
    $(this).fadeIn();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:55:29.120

```
$(this).attr("src" ,"/images/slide-" + i + ".jpg").load(function() {
    $(this).fadeIn();
}); 
```

应该：

```
$(this).load(function() {
    $(this).fadeIn();
});

$(this).attr("src" ,"/images/slide-" + i + ".jpg") 
```

或尝试: :

```
$(this).onload = function () {
   ....
}) 
```

# ubuntu - 集群和独立系统中的 Hadoop 处理时间

> ID：15010274
> 
> 赞同：0
> 
> 时间：2013-02-21T19:04:33.357
> 
> 标签：ubuntu, hadoop, hbase, distributed-computing

我已经在相同的 hdfs 之上建立了一个 3 节点的 hadoop 集群（1 个 Namenode，2 个数据节点）和 hbase。每个节点都是在我的 windows 8 机器上运行的 512 MB Ubuntu Virtual box 映像（Intel i5，4GB RAM，2.4Ghz）
我已经根据这个博客 [http://ankitasblogger.blogspot.in/2011/01/hadoop配置了 hbase-hadoop -cluster-setup.html](http://ankitasblogger.blogspot.in/2011/01/hadoop-cluster-setup.html)

我编写了一个程序，它分析美国人口普查数据，大约有 500,000 条记录（缩减集）。我只是在 MAP 任务中读取文件（来自 hdfs）并将其存储为 HBASE 。稍后根据过滤器检索数据。

当我在独立（512 MB 虚拟机）hadoop-hbase 中运行程序时，大约需要 23 分钟。但是当我在集群（512*3 MB）中运行同一个 jar 时，需要 40 分钟以上。

为什么集群需要更多时间来处理？还是预期的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:19:58.443

在虚拟机中运行集群只会减慢您的 map-reduce（因为运行虚拟操作系统和多个 hadoop 实例的开销），特别是如果您的内存不足并且它必须使用主机操作系统的交换。

请记住，虚拟机都共享 1 个物理 CPU，并且只能用于开发。

# php - 使用 MySQL LOAD DATA INFILE 导致基于相同执行查询的结果不一致

> ID：15010275
> 
> 赞同：0
> 
> 时间：2013-02-21T19:04:40.883
> 
> 标签：php, mysql, sql

我试图确定为什么这两个 LOAD DATA INFILE 会产生不同的结果。下面的两个查询都会导入数据。

**在第一个带有 exec 的查询中，引号不会从表字段中删除**。第二个查询按预期删除引号。我已经尝试了 exec 查询的所有变体 - 同样的问题......例如，我试过：

```
'\"' - (as is now)

"' . " . '"

'"' - (this of course won't work because it needs escaping \ )

'" . " . "' - (this also needs escaping)

\"\" 
```

还有很多其他的变化。

**示例输出（在表字段中）：**

查询 1：“乔·斯莫”

查询 2：乔·斯莫

**我看错问题了吗？**我也尝试过多次重写查询，但确定我的查询写得正确。

**我正在针对完全相同的数据运行这些查询。**他们都加载数据，但第**一个查询未能**从字符串中删除 " （引号）。

**查询 1**

```
exec(mysql -u root -e \"USE mydb; LOAD DATA INFILE '" . $file . "' INTO TABLE  myTable FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '\"' LINES TERMINATED BY '\\n'\"; "); 
```

和

**查询 2**

```
LOAD DATA INFILE 'filepath' INTO TABLE myTable FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' LINES TERMINATED BY '\n'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T00:02:03.157

通过这样做解决了这个问题：

```
$mysqli->query("LOAD DATA INFILE '" . $file . "' INTO TABLE  myTable FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '\"' LINES TERMINATED BY '\n'"); 
```

# scala - Maven 与 Jacoco 和 Sonar 0% 覆盖率

> ID：15010284
> 
> 赞同：4
> 
> 时间：2013-02-21T19:05:00.617
> 
> 标签：scala, maven, sonarqube, scalatest, jacoco

我有一个使用 maven（scala-maven-plugin）构建的 scala 项目（带有一些 java 文件）。我们已经为代码覆盖（jacoco-maven-plugin）插入了 jacoco，这会产生良好的 scala 代码覆盖。我们可以在 /target 的典型位置看到 html / csv 报告，并且 scala 覆盖范围很好。

但是，我们无法使用声纳获得代码覆盖率来处理 scala 文件。该插件运行并发送 java 覆盖，所以我知道它从 jacoco 输出中获取了一些东西，但是缺少 scala 覆盖。

此外，如果我将 jacoco:check 目标作为构建的一部分运行，它会在覆盖率上失败，再次仅引用 java 覆盖率作为总覆盖率数字。这让我相信这个问题与我配置 jacoco 的方式有关，而不是与声纳有关。

任何帮助表示赞赏。

这是pom的相关部分

```
 <plugin>
                <groupId>net.alchim31.maven</groupId>
                <artifactId>scala-maven-plugin</artifactId>
                <version>3.1.3</version>
                <configuration>
                    <args>
                        <arg>-g:vars</arg>
                    </args>
                </configuration>
                <executions>
                    <execution>
                        <goals>
                            <goal>compile</goal>
                            <goal>testCompile</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.jacoco</groupId>
                <artifactId>jacoco-maven-plugin</artifactId>
                <version>0.6.2.201302030002</version>
                <executions>
                    <execution>
                        <id>prepare-agent</id>
                        <goals>
                            <goal>prepare-agent</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>report</id>
                        <phase>prepare-package</phase>
                        <goals>
                            <goal>report</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
           <!-- disable surefire -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>${maven.plugin.surefire.version}</version>
                <configuration>
                    <skipTests>true</skipTests>
                </configuration>
            </plugin>
            <!-- enable scalatest -->
            <plugin>
                <groupId>org.scalatest</groupId>
                <artifactId>scalatest-maven-plugin</artifactId>
                <version>1.0-M2</version>
                <executions>
                    <execution>
                        <id>test</id>
                        <phase>test</phase>
                        <goals>
                            <goal>test</goal>
                        </goals>
                        <configuration>
                            <reportsDirectory>${project.build.directory}/surefire-reports</reportsDirectory>
                            <junitxml>.</junitxml>
                            <parallel>true</parallel>
                            <tagsToExclude>IntegrationTest</tagsToExclude>
                            <filereports>ScalaTestSuite.txt</filereports>
                        </configuration>
                    </execution>
                    <execution>
                        <id>integration-test</id>
                        <phase>integration-test</phase>
                        <goals>
                            <goal>test</goal>
                        </goals>
                        <configuration>
                            <reportsDirectory>${project.build.directory}/surefire-reports</reportsDirectory>
                            <junitxml>.</junitxml>
                            <parallel>true</parallel>
                            <tagsToInclude>IntegrationTest</tagsToInclude>
                            <filereports>ScalaIntegrationTestSuite.txt</filereports>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.codehaus.sonar</groupId>
                <artifactId>sonar-maven3-plugin</artifactId>
                <version>3.4.1</version>
            </plugin>

  <sonar.host.url>http://vltapp02:9000/</sonar.host.url>
    <sonar.jdbc.url>jdbc:h2:tcp://vltapp02:9092/sonar</sonar.jdbc.url>
    <sonar.language>java</sonar.language>
    <sonar.core.codeCoveragePlugin>jacoco</sonar.core.codeCoveragePlugin>
    <sonar.jacoco.reportPath>target/jacoco.exec</sonar.jacoco.reportPath>
    <sonar.dynamicAnalysis>reuseReports</sonar.dynamicAnalysis>
    <sonar.surefire.reportsPath>target/surefire-reports</sonar.surefire.reportsPath> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:30:13.283

可能是针对源文件夹的 jacoco/sonar 检查。在这种情况下，您应该尝试将 scala 源文件夹公开给其他插件（通过 'add-source' 目标）：

```
 <plugin>
            <groupId>net.alchim31.maven</groupId>
            <artifactId>scala-maven-plugin</artifactId>
            <version>3.1.3</version>
            <configuration>
                <args>
                    <arg>-g:vars</arg>
                </args>
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>add-source</goal>
                        <goal>compile</goal>
                        <goal>testCompile</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

# objective-c - 如何以编程方式进入目标显示模式？

> ID：15010291
> 
> 赞同：8
> 
> 时间：2013-02-21T19:05:15.827
> 
> 标签：objective-c, cocoa, osx-mountain-lion

我使用雷电电缆将 MBA 连接到 iMac。在 iMac 上按 CMD+F2 可使目标显示模式使用 iMac 作为 MBA 的显示器。有没有人知道如何以编程方式触发该事件？

我的第一种方法是发送`CGEventPost`到`kCGHIDEventTap`

```
CGEventRef f2CommandDown = CGEventCreateKeyboardEvent(src, (CGKeyCode)120, YES);
CGEventSetFlags(f2CommandDown, kCGEventFlagMaskCommand);
CGEventRef f2CommandUp = CGEventCreateKeyboardEvent(src, (CGKeyCode)120, NO);
CGEventPost(kCGHIDEventTap, f2CommandDown);
CGEventPost(kCGHIDEventTap, f2CommandUp); 
```

那是行不通的。它所做的只是一个错误“哔”。（也尝试以 root 用户身份运行）。我认为，`kCGHIDEventTap`这只是错误的目标，CMD+F2 可能存在于更高级别的操作系统中（又名。“某处”）

运行一些关键事件捕获代码不会显示 CMD+F2 的任何内容。

有人有提示吗？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-25T12:31:33.053

我已经开始了一个这样做的项目，即监控 iMac 并在连接 Macbook 时自动触发目标显示模式并关闭蓝牙。您可以从[https://github.com/duanefields/VirtualKVM](https://github.com/duanefields/VirtualKVM)下载它。我正在使用 AppleScript 来触发按键。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-18T13:13:09.767

实际上，您可以使用 osascript 无需程序即可轻松完成此操作。

```
osascript -e 'tell application "System Events" to key code 144 using command down' 
```

但是当您插入电缆时，它不会自动执行此操作。

如果您还想使用单个蓝牙键盘和触控板，那么您可以将它们切换到 macbook，方法是使用 blueutil 暂时禁用 imac 上的蓝牙，以便 macbook 可以抓取键盘和触控板。每当您想退出目标显示模式时，只需关闭我的 macbook 上的蓝牙并等待几秒钟，让 imac 重新连接到键盘和触控板。

在您的 imac 上，将以下脚本放入文件 ~/bin/target-display-mode，然后运行 ​​`chmod +x ~/bin/target-display-mode

然后在您的 imac 上，在术语窗口中，将 target-display-mode 作为命令运行。如果您的 macbook 上启用了蓝牙，并且它已经知道您的键盘和触控板，那么它将连接到它们。或者打开蓝牙首选项并找到每个设备并“连接”（使用 macbook 的内置键盘和触控板）。

```
#! /usr/bin/env bash

#  Enter target-display mode with a macbook connected by cable;
#  then, temporarily turn off bluetooth so the macbook can the
#  bluetooth keyboard, trackpad and other devices that are currently
#  connected to the imac.
#
#  Later, turn bluetooth back on so the imac can later reconnect to it's 
#  bluetooth devices.
#
#  To exit target display mode, turn off bluetooth on the macbook and 
#  disconnect the cable.  After a few seconds, the imac will reconnect to
#  the keyboard and trackpad.
#
osascript -e 'tell application "System Events" to key code 144 using command down'
sleep 5
(
/usr/local/bin/blueutil off
sleep 60
/usr/local/bin/blueutil on
) & 
```

请注意，脚本会等待 60 秒，然后在 imac 上重新打开蓝牙。没有其他键盘或硬连线鼠标，这一点非常重要。如果蓝牙仍然关闭，您将无法在不使用 ssh 或重新启动的情况下重新连接它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-22T13:01:04.370

想知道你有没有想过这个。我见过的唯一解决方案是运行全屏窗口并像这样触发按键

[http://bogner.sh/2013/07/os-x-how-to-use-an-imac-as-monitor/#comment-50925](http://bogner.sh/2013/07/os-x-how-to-use-an-imac-as-monitor/#comment-50925)

# android - 动态更改 ListView 的每个项目的视图

> ID：15010294
> 
> 赞同：2
> 
> 时间：2013-02-21T19:05:23.330
> 
> 标签：android, listview, children

我想`ListView`在单击外部按钮时更改 a 的每个项目的图像的可见性（我的意思是这不是 的一部分`ListView`）。

所以我需要访问 a 的所有子视图`ListView`。然后我做了一个这样的循环：

```
for (int i = 0...
{
     View child_view = list_view.getChildAt(i);
     ...
} 
```

问题是，这样，我只能访问当前可见的孩子，我**需要**访问`ListView`.

我怎么能做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:13:35.263

解决方法很简单

在您的适配器类中采用这样的 int 数组

```
int visibilities[]={ImageView.VISIBLE,ImageView.GONE,ImageView.INVISIBLE}; 
```

如果您从 Drawable Resources 设置图像，那么您可能会将 ids 传递给 ArrayList 项目，如下所示

```
CountriesList.add(new Country("India",R.drawable.india)); 
```

比在 Country 类（您的 Bean 类（Getter setter 类））中创建另一个变量并将其设置为 int 类型，如下所示

```
class Country{
String name;
int flag;
int visibility;
} 
```

在将元素添加到列表时传递这样的可见性

```
 CountriesList.add(new Country("India",R.drawable.india,1)); 
```

在适配器的 getView() 方法中，您可能会像这样设置资源

```
holder.image.setImageResource(country.getFlag()); 
```

还要添加这一行

```
holder.image.setVisibility(visibilities[country.getVisibility]); 
```

为了解释这一点，我添加了国家/地区示例。我在以前的应用程序中使用了相同的技巧来获取列表……它就像魅力一样。我希望这会对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T22:00:47.597

我通过以下方式解决了这个问题：

*   用这个改变所有可见的孩子：[在此处输入链接描述](https://stackoverflow.com/questions/6740089/android-getting-a-count-of-the-visible-children-in-a-listview)

*   在适配器的 getView 函数中更改不可见的子项，因为 getView 在滚动时刷新很重要。

# r - R中的颜色序列

> ID：15010295
> 
> 赞同：10
> 
> 时间：2013-02-21T19:05:29.823
> 
> 标签：r, colors, color-picker, color-palette

有没有办法在 R 中创建颜色序列？

例如，任何类似的东西：

```
 seq("#000000", "#999999", length=20) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T19:23:06.170

见`colorRampPalette`及相关`colorRamp`功能。

```
palette <- colorRampPalette(colors=c("#000000", "#FFFFFF"))
cols <- palette(20)
plot(1:20, col=cols, pch=16, cex=3) 
```

![在此处输入图像描述](../Images/432e431adf45dea4b48562569483ec80.png)

对于其他一些有趣的选项，请查看**colorspace**包，加载它然后执行`example(rainbow_hcl)`，然后，如果您对所看到的内容感兴趣，`vignette("hcl-colors")`.

# xml - 相对于前一个兄弟的位置

> ID：15010296
> 
> 赞同：2
> 
> 时间：2013-02-21T19:05:30.243
> 
> 标签：xml, xslt

我正在尝试将 XML 文档转换为一个列表，其中的值基于前面兄弟姐妹的属性。

示例 XML：

```
<myRoot>
    <Person>Craig</Person>
    <Person rank="10">Woody</Person>
    <Person>Brian</Person>
    <Person>Michael</Person>    
    <Person rank="20">Emily</Person>
    <Person>Chris</Person>
</myRoot> 
```

我想要的是：

```
<myNewRoot>
    <Index>1: Craig</Index>
    <Index>10: Woody</Index>
    <Index>11: Brian</Index>
    <Index>12: Michael</Index>
    <Index>20: Emily</Index>
    <Index>21: Chris</Index>
</myNewRoot> 
```

我被卡住了，无法确定使用 @rank 属性的最后一个先前兄弟与当前节点之间的距离。

这是我当前的样式表

```
<xsl:template match="Person">
    <xsl:element name="Index">
        <xsl:choose>

            <xsl:when test="./@rank">
                <xsl:value-of select="./@rank"/>
            </xsl:when>

            <xsl:when test="preceding-sibling::Person[@rank]">
                <xsl:value-of select="count(.|preceding-sibling::*[. &gt; current()/preceding-sibling::Person[@rank][1]])   +       preceding-sibling::Person[@rank][1]/@rank"/>

            </xsl:when>

            <xsl:otherwise>
                <xsl:value-of select="position()"/>
            </xsl:otherwise>

        </xsl:choose>

        <xsl:text>: </xsl:text>
        <xsl:value-of select="."/>
    </xsl:element>
</xsl:template> 
```

我只是无法让 count() 功能正常工作并继续以

```
<myNewRoot>
    <Index>1: Craig</Index>
    <Index>10: Woody</Index>
    <Index>11: Brian</Index>
    <Index>11: Michael</Index>
    <Index>20: Emily</Index>
    <Index>21: Chris</Index>
</myNewRoot> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:36:57.107

一种解决方案是使用递归模板根据打印的先前值获取当前值，该值作为参数传递给模板。

```
<xsl:output method="xml" indent="yes" />

<xsl:template match="myRoot">
    <myNewRoot>
        <xsl:call-template name="make-index" />
    </myNewRoot>
</xsl:template>

<xsl:template name="make-index">
    <xsl:param name="element" select="Person" />
    <xsl:param name="count" select="'0'" />

    <!-- Continue if there is some element left -->
    <xsl:if test="$element">
        <!-- Obtain number to be printed next -->
        <xsl:variable name="next-rank">
            <xsl:choose>
                <!-- If the rank attribute is present, output its value -->
                <xsl:when test="$element[1]/@rank">
                    <xsl:value-of select="$element[1]/@rank" />
                </xsl:when>
                <!-- If the rank attribute is not present, increase the previous
                     printed value by one -->
                <xsl:otherwise>
                    <xsl:value-of select="$count + 1" />
                </xsl:otherwise>                    
            </xsl:choose>
        </xsl:variable>
        <!-- Output the index along with the value of the current index -->
        <Index>
            <xsl:value-of select="concat($next-rank, ': ',  $element[1])" />
        </Index>
        <!-- Recurse until we do not have any element left -->
        <xsl:call-template name="make-index">
            <xsl:with-param name="element" select="$element[position() > 1]" />
            <xsl:with-param name="count" select="$next-rank" />
        </xsl:call-template>
    </xsl:if>
</xsl:template> 
```

* * *

更新。下面的解决方案不依赖递归，可能不如前一个有效（在这个有更复杂的 XPath 操作），但更短并且依赖于对兄弟进行分组，这是与前一个不同的方法。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="xml" indent="yes" />

    <xsl:template match="myRoot">
        <myNewRoot>
            <!-- Print all the elements before the first element with a rank
                 attribute defined -->
            <xsl:apply-templates select="Person[(preceding-sibling::Person[@rank])][not(@rank)]" mode="print" />
            <!-- Match all the elements with a rank attribute defined -->
            <xsl:apply-templates select="Person[@rank]" />
        </myNewRoot>
    </xsl:template>

    <!-- Match the set of Person elements with @rank defined -->
    <xsl:template match="Person[@rank]">
        <!-- Obtain id of current node before losing the context -->
        <xsl:variable name="id" select="generate-id()" />
        <!-- Match the current node along all the following siblings without @rank such
             as their nearest preceding-sibling with @rank defined is the current
             element, i.e all the elements between the current element and the next
             element with @rank defined -->
        <xsl:apply-templates select=".|following-sibling::Person[not(@rank)][generate-id(preceding-sibling::Person[@rank][1]) = $id]" mode="print">
            <xsl:with-param name="rank" select="@rank" />
        </xsl:apply-templates>
    </xsl:template>

    <!-- Print the information from a Person node, using rank to determine
         the position -->
    <xsl:template match="Person" mode="print">
        <xsl:param name="rank" select="'1'" />
        <Index>
            <xsl:value-of select="concat($rank + position() - 1, ': ', .)" />
        </Index>
    </xsl:template> 
```

* * *

注意：我假设您使用 XSLT 1.0 的两种解决方案。如果您使用的是 XSLT 2.0，该解决方案将比以前的解决方案更容易。

# mysql - 如何在 MySQL 数据库中插入图像并使用 vb.net 检索它？

> ID：15010300
> 
> 赞同：0
> 
> 时间：2013-02-21T19:05:40.510
> 
> 标签：mysql, sql, .net, vb.net, visual-studio-2008

我正在使用 longblob 数据类型插入图像，但它给出了错误。

我想将图片从图片框中插入到 mysql 数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:52:38.827

我这里有 ac# 实现，但你可以使用[ac# 到 VB.Net 转换器](http://codeconverter.sharpdevelop.net/SnippetConverter.aspx)

在.aspx 文件中：

```
<asp:FileUpload runat="server" ID="fuPersonPicture" />
<asp:Button runat="server" ID="btnPhotoUpload" Text="Upload" OnClick="btnPhotoUpload_Click" /> 
```

在代码隐藏中：

```
protected void btnPhotoUpload_Click(object sender, EventArgs e)
{
    byte[] rawData = new byte[fuPersonPicture.FileBytes.Length];
    int fileSize = fuPersonPicture.FileBytes.Length;
    fuPersonPicture.FileContent.Read(rawData, 0, fileSize);

    string extension = Path.GetExtension(fuPersonPicture.PostedFile.FileName);
    switch (extension.ToLower())
    {
        // Only allow uploads that look like images.
        case ".jpg":
        case ".jpeg":
        case ".gif":
        case ".png":
        case ".bmp":
            System.Drawing.Image myImage = System.Drawing.Image.FromStream(fuPersonPicture.PostedFile.InputStream);

            fuPersonPicture.FileContent.Close();

            PersonPictureManager.Insert(fuPersonPicture.FileName, fileSize, rawData, myImage.Height, myImage.Width);

            //lbUploadMessage.Text = string.Empty;
            break;

        default:
            //lbUploadMessage.Text = "<br>File is not a valid image file (JPG, JPEG, GIF, BMP, PNG).";
            break;
    }
    fuPersonPicture.FileContent.Close();
} 
```

的定义`PersonPictureManager.Insert()`

```
public static void Insert(string FileName, int FileSize, byte[] RawData, int ImageHeight, int ImageWidth)
{
        string strSQL = "insert into person_picture (file_id, file_name, file_size, file, width, height) values (NULL, @file_name, @file_size, ?file, @width, @height)";
        using (MySqlCommand cmd = new MySqlCommand(strSQL))
        {
            cmd.Parameters.Add(new MySqlParameter("@file_name", FileName));
            cmd.Parameters.Add(new MySqlParameter("@file_size", FileSize));
            cmd.Parameters.Add(new MySqlParameter("@height", ImageHeight));
            cmd.Parameters.Add(new MySqlParameter("@width", ImageWidth));
            cmd.Parameters.Add(new MySqlParameter("?file", RawData));
            DatabaseConnection.ExecuteNonQuery(cmd); // Just a DB helper class
        }
} 
```

# mysql - 通过 bluehost 中的 php 连接到 MySQL 数据库

> ID：15010304
> 
> 赞同：1
> 
> 时间：2013-02-21T19:06:13.663
> 
> 标签：mysql, bluehost

嗨，我在 bluehost 上有一个 MYSQL 数据库，我正在尝试使用 PHP 连接到它。使用的 PHP 文件存储在我的域下的 public_html 中。下面给出两个代码

db_config.php

```
<?php

/*
* All database connection variables
*/

define('DB_USER', "siveradi_root"); // db user
define('DB_PASSWORD', "Tesh123"); // db password (mention your db password here)
define('DB_DATABASE', "siveradi_test"); // database name
define('DB_HOST', "localhost:3306"); // db server
define('DB_PORT',"3306");
?> 
```

db_connect.php

```
<?php

/**
* A class file to connect to database
*/
class DB_CONNECT {

// constructor
function __construct() {
    // connecting to database
    $this->connect();
}

// destructor
function __destruct() {
    // closing db connection
    $this->close();
}

/**
 * Function to connect with database
 */
function connect() {
    // import database connection variables
    require_once __DIR__ . 'http://mangominds.info/test_mera/db_config.php';

    // Connecting to mysql database
    $con = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD) or die(mysql_error());

    // Selecing database
    $db = mysql_select_db(DB_DATABASE) or die(mysql_error()) or die(mysql_error());

    // returing connection cursor
    return $con;
}

/**
 * Function to close db connection
 */
function close() {
    // closing db connection
    mysql_close();
}

}

?> 
```

但是，当我尝试通过

```
<?php
$db = new DB_CONNECT(); // creating class object(will open database connection)

?> 
```

[显示错误消息“服务器错误网站在检索http://mangominds.info/test_mera/tt.php](http://mangominds.info/test_mera/tt.php)时遇到错误。它可能因维护而停机或配置不正确。”

请就需要做什么提出建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T05:00:44.597

也许如果你从`define('DB_HOST', "localhost:3306"); // db server`

并使它：

```
define('DB_HOST', "localhost"); // db server 
```

也尽量不要用端口号注释最后一行，只留下没有端口的 DB_HOST 定义

# mysql - 在mysql中使用3个字符长度的大写字符串更新列

> ID：15010311
> 
> 赞同：1
> 
> 时间：2013-02-21T19:06:51.890
> 
> 标签：mysql, sql

我有一个类别表。
我有这样的记录

```
id    |    name    |    symbol
1     | Feeders    |    FEE
2     | Ovens      |
3     | Routers    | 
```

我在这张表中有很多记录。我想用这样的类别名称更新符号字段，获取类别名称，提取 3 个随机字符（必须按顺序并始终选择第一个随机字符），然后将它们转换为大写并应用更新。我怎样才能做到这一点。
例如，我希望使用 OVE 或 OVN 或 OVS 或 OEN 或 OES 等更新烤箱。
我如何在一个查询中做到这一点。

这是我尝试过的，但有时会带来 1 个字符，有时会带来 2 个字符，有时会带来 3 个字符

```
UPDATE category
SET symbol = (select
        upper(SUBSTRING(name, 1+ FLOOR(RAND()*LENGTH(name)),3))
          from default_category
          where category_id = 2)
where category_id = 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:10:16.297

这是你要找的吗？

```
UPDATE YourTable
SET symbol = UPPER(LEFT(name,3)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:36:25.500

您可以使用这样的查询来计算符号的随机值：

```
SELECT
  id,
  name,
  UPPER(CONCAT(
    LEFT(name,1),
    SUBSTRING(name, FLOOR(r1), 1),
    SUBSTRING(name, FLOOR(FLOOR(r1) + rand()*(LENGTH(name) - r1 DIV 1) + 1), 1))) symbol
FROM (
  SELECT
    id,
    name,
    case when LENGTH(name)<=3 THEN 2 ELSE rand()*(
    LENGTH(name)-2)+2 END r1
  FROM
    categories
  ) s; 
```

这可能是您的 UPDATE 查询：

```
UPDATE
  categories INNER JOIN (
    SELECT
      id,
      name,
      UPPER(CONCAT(
        LEFT(name,1),
        SUBSTRING(name, FLOOR(r1), 1),
        SUBSTRING(name, FLOOR(FLOOR(r1) + rand()*(LENGTH(name) - r1 DIV 1) + 1), 1))) symbol
    FROM (
      SELECT
        id,
        name,
        case when LENGTH(name)<=3 THEN 2 ELSE rand()*(
        LENGTH(name)-2)+2 END r1
      FROM
        categories
      ) s
  ) symb
  ON categories.id=symb.id
SET
  categories.symbol = symb.symbol 
```

请看[这里](http://sqlfiddle.com/#!2/3a8ea/1)的小提琴。

# javascript - timeago.js 的对面？

> ID：15010313
> 
> 赞同：0
> 
> 时间：2013-02-21T19:07:00.333
> 
> 标签：javascript, jquery, date, timeago

我发现了一个漂亮的小时间到文本 jQuery 插件，名为[timeago.js](http://timeago.yarp.com/)（想想 Twitter 时间戳）。它[不是一个复杂的插件](https://github.com/rmm5t/jquery-timeago/blob/master/jquery.timeago.js)，但它节省了很好的开发时间，我特别喜欢它自动更新。

唯一的问题是，我需要这个功能来处理**未来的日期**，而不仅仅是过去。（即“timeuntil.js”？）

有没有人遇到过模拟所描述功能的插件（或他们自己的解决方案）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T19:09:30.187

嗯...只需将“以前”更改为“从现在开始”或其他任何内容并翻转日期的顺序

[编辑] 或者只是稍微*阅读一下文档 :)*

```
jQuery.timeago.settings.allowFuture = true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:08:24.220

试试[**momentjs**](http://momentjs.com/)，它比其他任何 js 日期库都要好得多

# android - 在Android中编写后台服务

> ID：15010316
> 
> 赞同：2
> 
> 时间：2013-02-21T19:07:14.943
> 
> 标签：android, service, background

我的 android 应用程序需要在特定时间安排任务。它可以是每天、每周、每月等。因此，在插入输入数据时，如果用户选择“每天”。会有后台服务，每天都会插入相同的数据。

我试图创建服务和相应的接收器类，但是看起来服务没有自动运行。有人可以告诉我缺少什么吗？

接收器类

```
 public class MyScheduleReceiver extends BroadcastReceiver {

      // Restart service every 30 seconds
      private static final long REPEAT_TIME = 1000 * 30;

      @Override
      public void onReceive(Context context, Intent intent) {
        AlarmManager service = (AlarmManager) context
            .getSystemService(Context.ALARM_SERVICE);
        Intent i = new Intent(context, MyStartServiceReceiver.class);
        PendingIntent pending = PendingIntent.getBroadcast(context, 0, i,
            PendingIntent.FLAG_CANCEL_CURRENT);
        Calendar cal = Calendar.getInstance();
        // Start 30 seconds after boot completed
        cal.add(Calendar.SECOND, 30);
        //
        // Fetch every 30 seconds
        // InexactRepeating allows Android to optimize the energy consumption
        service.setInexactRepeating(AlarmManager.RTC_WAKEUP,
            cal.getTimeInMillis(), REPEAT_TIME, pending);

        // service.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
        // REPEAT_TIME, pending);
        Toast.makeText(context, "Receving", Toast.LENGTH_SHORT).show();

      }

   public class MyStartServiceReceiver extends BroadcastReceiver {

      @Override
      public void onReceive(Context context, Intent intent) {
        Intent service = new Intent(context, LocalWordService.class);
        context.startService(service);
      }
    } 
```

Android Menifest.xml

```
 <service
    android:name=".LocalWordService"
    android:label="LocalWordService" >
    </service>

    <receiver android:name="MyScheduleReceiver" >
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
</receiver>
<receiver android:name="MyStartServiceReceiver" >
</receiver> 
```

现在，当我启动应用程序时，我调用一个活动类，它基本上使用下面的代码调用服务......但每 30 秒后什么都没有发生。

```
 Intent mServiceIntent = new Intent(this, LocalWordService.class);
        startService(mServiceIntent); 
```

服务等级

```
 public class LocalWordService extends Service {
private final IBinder mBinder = new MyBinder();
private ArrayList<String> list = new ArrayList<String>();

@Override
public void onCreate() {
    // TODO Auto-generated method stub
    super.onCreate();

}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {

    Toast.makeText(this, "Starting", Toast.LENGTH_SHORT).show();
    Random random = new Random();
    if (random.nextBoolean()) {
        list.add("Linux");
    }
    if (random.nextBoolean()) {
        list.add("Android");
    }
    if (random.nextBoolean()) {
        list.add("iPhone");
    }
    if (random.nextBoolean()) {
        list.add("Windows7");
    }
    if (list.size() >= 20) {
        list.remove(0);
    }
    return Service.START_NOT_STICKY;
    }

  @Override
  public IBinder onBind(Intent arg0) {
    return mBinder;
  }

  public class MyBinder extends Binder {
    LocalWordService getService() {
        return LocalWordService.this;
    }
}

public List<String> getWordList() {
    return list;
}

   } 
```

请指教，缺少什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T01:42:28.493

```
Current Alarm Manager state:

 Realtime wakeup (now=2013-02-27 20:32:52):

 RTC_WAKEUP #1: Alarm{412e05f0 type 0 com.android.providers.calendar}
    type=0 when=+20h57m39s289ms repeatInterval=0 count=0
    operation=PendingIntent{412e05e0: PendingIntentRecord{412e04f0 com.androi
roviders.calendar broadcastIntent}}
  RTC_WAKEUP #0: Alarm{41566480 type 0 android}
    type=0 when=+10h56m12s700ms repeatInterval=3725515 count=0
    operation=PendingIntent{4162dbc0: PendingIntentRecord{41591808 android br
castIntent}}
  RTC #1: Alarm{41532120 type 1 android}
    type=1 when=+22h27m7s419ms repeatInterval=0 count=0
    operation=PendingIntent{4154e7c8: PendingIntentRecord{415adb68 android br
castIntent}}
  RTC #0: Alarm{414eb330 type 1 com.android.calendar}
    type=1 when=+3h27m7s419ms repeatInterval=0 count=0
    operation=PendingIntent{414eb320: PendingIntentRecord{4166c020 com.androi
alendar broadcastIntent}}

  Elapsed realtime wakeup (now=+1h5m9s472ms):
  ELAPSED_WAKEUP #1: Alarm{415608e0 type 2 android}
    type=2 when=+56m18s779ms repeatInterval=0 count=0
    operation=PendingIntent{412fbbc0: PendingIntentRecord{412d26f0 android br
castIntent}}
  ELAPSED_WAKEUP #0: Alarm{41b31c20 type 2 com.android.phone}
    type=2 when=+21s200ms repeatInterval=0 count=0
    operation=PendingIntent{41b31c10: PendingIntentRecord{4163fea8 com.androi
hone broadcastIntent}}
  ELAPSED #3: Alarm{41b21d40 type 3 android}
    type=3 when=+22h57m0s588ms repeatInterval=0 count=0
    operation=PendingIntent{41567800: PendingIntentRecord{41b61370 android br
castIntent}}
  ELAPSED #2: Alarm{41b792e8 type 3 android}
    type=3 when=+9m50s528ms repeatInterval=1800000 count=1
    operation=PendingIntent{415af0b0: PendingIntentRecord{41b791c0 android br
castIntent}}
  ELAPSED #1: Alarm{415d6648 type 3 android}
    type=3 when=+7m30s477ms repeatInterval=0 count=0
    operation=PendingIntent{415652b0: PendingIntentRecord{41bba838 android br
castIntent}}
  ELAPSED #0: Alarm{417b4448 type 3 android}
    type=3 when=+7s294ms repeatInterval=0 count=0
    operation=PendingIntent{4162f708: PendingIntentRecord{415c23a0 android br
castIntent}}

  Broadcast ref count: 0

  Alarm Stats:
  android
    20685ms running, 0 wakeups
    65 alarms: act=android.intent.action.TIME_TICK flg=0x40000014
    2 alarms: act=com.android.server.action.NETWORK_STATS_POLL flg=0x14
    6 alarms: act=com.android.server.ThrottleManager.action.POLL flg=0x14
    1 alarms: act=com.android.server.NetworkTimeUpdateService.action.POLL flg
14
  com.android.providers.calendar
    8935ms running, 1 wakeups
    1 alarms: act=com.android.providers.calendar.intent.CalendarProvider2 flg
14
  com.android.phone
    2632ms running, 63 wakeups
    63 alarms: act=com.android.internal.telephony.gprs-data-stall flg=0x14 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T08:10:47.873

创建服务的简单方法。

创建一个类名作为 DocService

```
 import java.io.File;
     import java.util.ArrayList;
     import android.app.Service;
     import android.content.Intent;
     import android.os.Bundle;
     import android.os.Environment;
     import android.os.IBinder;
     import android.os.ResultReceiver;
     import backup.PostFile;

     public class DocService extends Service{

    Intent intent;
    ArrayList<File>fileList;
    String fileType;

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

    @SuppressWarnings("deprecation")
    @Override
    public void onStart(Intent intent, int startId) {
        // TODO Auto-generated method stub
        super.onStart(intent, startId);

        this.intent = intent;
        fileList = new ArrayList<File>();
        //new PostFile().execute();

        if(intent.hasExtra("doc"))
        {
            fileType = intent.getStringExtra("doc");
            new PostDocFileThread().start();
        }
    }

    class PostDocFileThread extends Thread
    {
        public void run()
        {

            try 
            {
    Thread.sleep(5000);
    //Do your Stuff here.           

            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
} 
```

然后在调用服务的活动中

```
public class MainActivity extends Activity {

    static Button docBtn;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        docBtn = (Button)findViewById(R.id.backup_documents);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void onBackupDocumentClick(View v)
    {

            //new BackupDocument().execute();
            docBtn.setEnabled(false);
            Intent i = new Intent("com.example.backuprestore.DocService");
            i.putExtra("doc", "doc");
            i.putExtra("resReceiver", theReceiver);
            startService(i);
            Toast.makeText(getApplicationContext(), "Backup process has been started in background.",Toast.LENGTH_LONG).show();
        }

    }

And Finally declare your service in AndroidManifest XML

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.backuprestore.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

    <service android:name="com.example.backuprestore.DocService" >
        <intent-filter>
            <action android:name="com.example.backuprestore.DocService" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </service>
   </application> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T00:28:16.990

我制作了一个教程来描述它是如何工作的（所有代码都可以下载和描述）。也许它可以帮助你。注意，法语！

[http://julien-dumortier.fr/service-et-binding-sous-android/](http://julien-dumortier.fr/service-et-binding-sous-android/)

# ios - 精灵数组不响应触摸移动

> ID：15010317
> 
> 赞同：1
> 
> 时间：2013-02-21T19:07:17.313
> 
> 标签：ios, xcode, ipad, cocos2d-iphone

我正在实现一种移动精灵的方法，我在放置所有精灵的地方放置了一个数组，并且我想为该数组提供触摸移动的动作。但是当我运行它时，什么也没有发生：

```
-(void)onEnter
{
    [super onEnter];
    self.isTouchEnabled = YES;
}

- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *myTouch = [touches anyObject];
    CGPoint location = [myTouch locationInView:[myTouch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];

    mSpriteOnHand = nil;

    for(CCSprite *cloth in mSpriteArray)
    {
        if(CGRectContainsPoint([cloth boundingBox], location))
        {
            mSpriteOnHand = cloth;
            break;
        }
    }
}

- (void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];

    CGPoint location = [touch locationInView: [touch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];

    if(mSpriteOnHand)
        mSpriteOnHand.position = location;

}

- (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    mSpriteOnHand = nil;
}

-(void)onExit
{
    [mSpriteArray release];
    mSpriteArray = nil;
    [super onExit];
} 
```

有什么不对？我认为问题出在 Touch Began 上，但我不确定...

编辑：

我的精灵没有响应，但方法似乎没问题。这是我的初始化：

```
-(id) init
{
    if( (self=[super init]) )
    {
        CGSize winSize = [[CCDirector sharedDirector] winSize];
        CCSprite * backGround = [CCSprite spriteWithFile:@"background_ipad.png"];
        backGround.position = ccp(winSize.width/2, winSize.height/2);
        [self addChild:backGround z:0];

        cloth1 = [CCSprite spriteWithFile:@"clothe_1.png"];
        cloth1.position = ccp(380, 500);
        [self addChild:cloth1 z:1];

        cloth2 = [CCSprite spriteWithFile:@"clothe_2.png"];
        cloth2.position = ccp(530, 500);
        [self addChild:cloth2 z:2];

        cloth3 = [CCSprite spriteWithFile:@"clothe_3.png"];
        cloth3.position = ccp(700, 500);
        [self addChild:cloth3 z:3];

        cloth4 = [CCSprite spriteWithFile:@"clothe_4.png"];
        cloth4.position = ccp(380, 270);
        [self addChild:cloth4 z:4];

        cloth5 = [CCSprite spriteWithFile:@"clothe_5.png"];
        cloth5.position = ccp(530, 270);
        [self addChild:cloth5 z:5];

        cloth6 = [CCSprite spriteWithFile:@"clothe_6.png"];
        cloth6.position = ccp(700, 270);
        [self addChild:cloth6 z:6];

        [mSpriteArray addObject: cloth1];
        [mSpriteArray addObject: cloth2];
        [mSpriteArray addObject: cloth3];
        [mSpriteArray addObject: cloth4];
        [mSpriteArray addObject: cloth5];
        [mSpriteArray addObject: cloth6];
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:56:45.627

如果这是从 CCSprite 派生的，它将无法工作。在这种情况下，使用：

```
-(void) onEnter {
    [[CCDirector sharedDirector].touchDispatcher addStandardDelegate:self priority:0];
    [super onEnter];
} 

-(void) onExit {
    [[CCDirector sharedDirector].touchDispatcher removeDelegate:self];
    [super onExit];
} 
```

编辑 1：

```
CGPoint location = [touch locationInView:[touch view]];
CGPoint convertedLocation = [[CCDirector sharedDirector] convertToGL:location];

MPLOG(@"Touch at location %@", NSStringFromCGPoint(convertedLocation)); 
```

编辑 2：

在初始化中：

```
mSpriteArray = [[NSMutableArray array] retain]; // without ARC 
```

在 dealloc 中：

```
-(void) dealloc {
    [mSpritesArray release];
    [super dealloc];
} 
```

我没有足够的“ARC”知识来提出任何建议。此外，取决于“自我”是什么，即你有哪些孩子，你可能不需要一个数组，因为每个 CCNode 已经有一个。如下：

```
for (CCSprite* cloth in self.children) {        
    if(CGRectContainsPoint([cloth boundingBox], location))
        {
            mSpriteOnHand = cloth;
            break;
        }
} 
```

编辑 3：排除背景：

一个 iVar：

```
int tag:UNIQUE_TAG_FOR_BACKGROUND; 
```

在初始化中：

```
UNIQUE_TAG_FOR_BACKGROUND = 4367;  // pick a number 
[self addChild:backGround z:0 tag:UNIQUE_TAG_FOR_BACKGROUND]; 
```

在循环中：

```
for (CCSprite* cloth in self.children) { 
    if(cloth.tag == UNIQUE_TAG_FOR_BACKGROUND) continue;       
    if(CGRectContainsPoint([cloth boundingBox], location))
        {
            mSpriteOnHand = cloth;
            break;
        }
} 
```

# c# - Zedgraph X 轴缩放值

> ID：15010319
> 
> 赞同：5
> 
> 时间：2013-02-21T19:07:21.777
> 
> 标签：c#, vb.net, zedgraph

我想以这样的方式增加我正在处理的图表的 X 轴中显示的值：

X 轴从 开始`0.125`，然后显示`0.250, 0.5, 1.0`，然后数字`1.5, 2, 3,4,5,6,8,12`如下图（当然图表不正确，但我想显示 X 轴值的缩放比例）

![在此处输入图像描述](../Images/2fdfc1ebb79586c9a8b726171c25271c.png)

目前我有这个：

![在此处输入图像描述](../Images/554f65aaf861b1112c942a197ecc09b4.png)

为此我有（vb.net 版本）

```
Imports System.Collections.Generic
Imports System.ComponentModel
Imports System.Data
Imports System.Drawing
Imports System.Text
Imports System.Windows.Forms
Imports ZedGraph

Namespace Grid
    Partial Public Class graficaControl
        Inherits Form
        Public Sub New()
            InitializeComponent()
            DrawGraph()
        End Sub

        Private Function h(ByVal x As Double) As Double
            If x = 0 Then
                Return 1
            End If

            Return Math.Sin(x) / x
        End Function

        Private Function f(ByVal x As Double) As Double
            If x = 0 Then
                Return 1
            End If

            Return Math.Sin(x)
        End Function

        Private Function g(ByVal x As Double) As Double
            If x = 1 Then
                Return 0
            End If

            Return Math.Cos(x)
        End Function

        Private Sub DrawGraph()
            Dim masterPane As ZedGraph.MasterPane = zedGraph.MasterPane
            Dim pane As New GraphPane()
            masterPane.PaneList.Clear()

            pane.XAxis.Title.Text = "X"
            pane.XAxis.Title.FontSpec.IsUnderline = False
            pane.XAxis.Title.FontSpec.IsBold = True
            pane.XAxis.Title.FontSpec.FontColor = Color.Blue
            pane.YAxis.Title.Text = "Y"
            pane.Title.Text = "Right - FF1"
            pane.Title.FontSpec.Fill.IsVisible = True
            pane.Title.FontSpec.IsBold = False

            'X AXIS UP
            pane.X2Axis.IsVisible = True
            pane.XAxis.IsVisible = False
            pane.YAxis.Scale.IsReverse = True

            'Grid
            pane.XAxis.MajorGrid.IsVisible = True
            pane.XAxis.MajorGrid.DashOn = 10
            pane.XAxis.MajorGrid.DashOff = 5
            pane.YAxis.MajorGrid.IsVisible = True
            pane.YAxis.MajorGrid.DashOn = 10
            pane.YAxis.MajorGrid.DashOff = 5
            pane.YAxis.MinorGrid.IsVisible = True
            pane.YAxis.MinorGrid.DashOn = 1
            pane.YAxis.MinorGrid.DashOff = 2
            pane.XAxis.MinorGrid.IsVisible = True
            pane.XAxis.MinorGrid.DashOn = 1
            pane.XAxis.MinorGrid.DashOff = 2

            'FOR TEXT
            pane.Legend.Position = LegendPos.Float
            pane.Legend.Location.CoordinateFrame = CoordType.ChartFraction
            pane.Legend.Location.AlignH = AlignH.Right
            pane.Legend.Location.AlignV = AlignV.Bottom
            pane.Legend.Location.TopLeft = New PointF(1.0F - 0.02F, 1.0F - 0.02F)

            iGraph(pane)

            ' Add to master 
            masterPane.Add(pane)

            'later add second graph
            Using g As Graphics = CreateGraphics()
                masterPane.SetLayout(g, PaneLayout.SquareColPreferred)
           End Using

            zedGraph.AxisChange()
            zedGraph.Invalidate()
        End Sub

        Private Sub iGraph(ByVal izq As GraphPane)
            izq.CurveList.Clear()
            Dim list As New PointPairList()
            Dim xmin As Double = -50
            Dim xmax As Double = 3
            Dim x As Double = xmin
            While x <= xmax
                list.Add(x, h(x))
                x += 0.01
            End While
            Dim myCurve As LineItem = izq.AddCurve("sen(x)/x", list, Color.ForestGreen, SymbolType.None)
        End Sub
        Private WithEvents zedGraph As ZedGraph.ZedGraphControl

        Private Sub InitializeComponent()            
        Me.zedGraph = New ZedGraph.ZedGraphControl()
        Me.SuspendLayout()
        '
        'zedGraph
        '
        Me.zedGraph.Dock = System.Windows.Forms.DockStyle.Fill
        Me.zedGraph.Location = New System.Drawing.Point(0, 0)
        Me.zedGraph.Name = "Name"
        Me.zedGraph.ScrollGrace = 0.0R
        Me.zedGraph.ScrollMaxX = 0.0R
        Me.zedGraph.ScrollMaxY = 0.0R
        Me.zedGraph.ScrollMaxY2 = 0.0R
        Me.zedGraph.ScrollMinX = 0.0R
        Me.zedGraph.ScrollMinY = 0.0R
        Me.zedGraph.ScrollMinY2 = 0.0R
        Me.zedGraph.Size = New System.Drawing.Size(732, 461)
        Me.zedGraph.TabIndex = 1
        '
        'component
        '
        Me.AutoScaleDimensions = New System.Drawing.SizeF(6.0!, 13.0!)
        Me.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font
        Me.ClientSize = New System.Drawing.Size(732, 461)
        Me.Controls.Add(Me.zedGraph)
        Me.Name = "graph"
        Me.Text = "test" 
        Me.ResumeLayout(False)

    End Sub 
End Class
End Namespace 
```

也是c#版本

```
using Microsoft.VisualBasic;
using System;
using System.Collections;
using System.Collections.Generic;
using System.Data;
using System.Diagnostics;
using System.ComponentModel;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using ZedGraph;

namespace Grid
{
    public partial class graficaControl : Form
    {
        public graficaControl()
        {
            InitializeComponent();
            DrawGraph();
        }

        private double h(double x)
        {
            if (x == 0) {
                return 1;
            }

            return Math.Sin(x) / x;
        }

        private double f(double x)
        {
            if (x == 0) {
                return 1;
            }

            return Math.Sin(x);
        }

        private double g(double x)
        {
            if (x == 1) {
                return 0;
            }

            return Math.Cos(x);
        }

        private void DrawGraph()
        {
            ZedGraph.MasterPane masterPane = zedGraph.MasterPane;
            GraphPane pane = new GraphPane();
            masterPane.PaneList.Clear();

            pane.XAxis.Title.Text = "X";
            pane.XAxis.Title.FontSpec.IsUnderline = false;
            pane.XAxis.Title.FontSpec.IsBold = true;
            pane.XAxis.Title.FontSpec.FontColor = Color.Blue;
            pane.YAxis.Title.Text = "Y";
            pane.Title.Text = "Right - FF1";
            pane.Title.FontSpec.Fill.IsVisible = true;
            pane.Title.FontSpec.IsBold = false;

            //X AXIS UP
            pane.X2Axis.IsVisible = true;
            pane.XAxis.IsVisible = false;
            pane.YAxis.Scale.IsReverse = true;

            //Grid
            pane.XAxis.MajorGrid.IsVisible = true;
            pane.XAxis.MajorGrid.DashOn = 10;
            pane.XAxis.MajorGrid.DashOff = 5;
            pane.YAxis.MajorGrid.IsVisible = true;
            pane.YAxis.MajorGrid.DashOn = 10;
            pane.YAxis.MajorGrid.DashOff = 5;
            pane.YAxis.MinorGrid.IsVisible = true;
            pane.YAxis.MinorGrid.DashOn = 1;
            pane.YAxis.MinorGrid.DashOff = 2;
            pane.XAxis.MinorGrid.IsVisible = true;
            pane.XAxis.MinorGrid.DashOn = 1;
            pane.XAxis.MinorGrid.DashOff = 2;

            //FOR TEXT
            pane.Legend.Position = LegendPos.Float;
            pane.Legend.Location.CoordinateFrame = CoordType.ChartFraction;
            pane.Legend.Location.AlignH = AlignH.Right;
            pane.Legend.Location.AlignV = AlignV.Bottom;
            pane.Legend.Location.TopLeft = new PointF(1f - 0.02f, 1f - 0.02f);

            iGraph(pane);

            // Add to master 
            masterPane.Add(pane);

            //later add second graph
            using (Graphics g = CreateGraphics()) {
                masterPane.SetLayout(g, PaneLayout.SquareColPreferred);
            }

            zedGraph.AxisChange();
            zedGraph.Invalidate();
        }

        private void iGraph(GraphPane izq)
        {
            izq.CurveList.Clear();
            PointPairList list = new PointPairList();
            double xmin = -50;
            double xmax = 3;
            double x = xmin;
            while (x <= xmax) {
                list.Add(x, h(x));
                x += 0.01;
            }
            LineItem myCurve = izq.AddCurve("sen(x)/x", list, Color.ForestGreen, SymbolType.None);
        }
        private ZedGraph.ZedGraphControl zedGraph;

        private void InitializeComponent()
        {
            this.zedGraph = new ZedGraph.ZedGraphControl();
            this.SuspendLayout();
            //
            //zedGraph
            //
            this.zedGraph.Dock = System.Windows.Forms.DockStyle.Fill;
            this.zedGraph.Location = new System.Drawing.Point(0, 0);
            this.zedGraph.Name = "Name";
            this.zedGraph.ScrollGrace = 0.0;
            this.zedGraph.ScrollMaxX = 0.0;
            this.zedGraph.ScrollMaxY = 0.0;
            this.zedGraph.ScrollMaxY2 = 0.0;
            this.zedGraph.ScrollMinX = 0.0;
            this.zedGraph.ScrollMinY = 0.0;
            this.zedGraph.ScrollMinY2 = 0.0;
            this.zedGraph.Size = new System.Drawing.Size(732, 461);
            this.zedGraph.TabIndex = 1;
            //
            //component
            //
            this.AutoScaleDimensions = new System.Drawing.SizeF(6f, 13f);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(732, 461);
            this.Controls.Add(this.zedGraph);
            this.Name = "graph";
            this.Text = "test";
            this.ResumeLayout(false);

        }
    }
} 
```

# 更新

我做了以下，几乎解决了

```
 'disable old axis scale
    pane.X2Axis.Scale.IsVisible = False
    pane.X2Axis.MajorTic.IsAllTics = False

    ' new labels
    Dim x_vals = {0.125, 0.25, 0.5, 0.75, 1.0, 1.5, 2.0, 3.0, 4.0, 6.0, 8.0, 12.0, 16.0}

    ' create custom labels and custom grid-lines using LineObj
    For Each val As Double In x_vals

        'add line
        Dim line As New LineObj(pane.YAxis.Scale.Min, val, pane.YAxis.Scale.Max, val)
        line.Line.Style = System.Drawing.Drawing2D.DashStyle.Dash
        line.Line.Width = 1.0F
        pane.GraphObjList.Add(line)
        'add label
        Dim text As New TextObj(val.ToString(), pane.YAxis.Scale.Min, val)
        text.Location.AlignH = AlignH.Right
        text.FontSpec.Border.IsVisible = False
        text.FontSpec.Fill.IsVisible = False
        pane.GraphObjList.Add(text)
    Next 
```

得到：

![在此处输入图像描述](../Images/93d90ff8661d941f827c3025b12736a5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:25:21.480

您想要的比例是非线性的，因此您需要将其更改为对数比例。尝试使用[AxisType Enumeration](http://zedgraph.sourceforge.net/documentation/html/T_ZedGraph_AxisType.htm)。乍一看，我猜你需要一个缩放的对数轴，或者如果这不起作用，只需使用一个序数轴。它不会“挤压”数据点，但至少它们会被正确标记。如果一切都失败了，请尝试使用字符串数组方法（基本上你用你想要标记的数据点填写一个数组）。祝你好运！

前任：

```
pane.XAxis.Type = AxisType.Log; 
```

请注意，这将是一个以 10 为底的对数轴类型，因此不会是您想要的完全相同的数字。

# spring - 从 spring 2 迁移到 spring 3 后：org.springframework.expression.spel.SpelEvaluationException

> ID：15010321
> 
> 赞同：0
> 
> 时间：2013-02-21T19:07:26.920
> 
> 标签：spring, hibernate

异常的完整堆栈跟踪：

```
ERROR CheckboxTag:86 - Property not found
org.springframework.binding.expression.PropertyNotFoundException: Property not found
    at org.springframework.binding.expression.spel.SpringELExpression.getValueType(SpringELExpression.java:103)
    at org.springframework.webflow.mvc.view.BindingModel.getFormattedValue(BindingModel.java:228)
    at org.springframework.webflow.mvc.view.BindingModel.getFieldValue(BindingModel.java:142)
    at org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:120)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:178)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:198)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getName(AbstractDataBoundFormElementTag.java:164)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.autogenerateId(AbstractDataBoundFormElementTag.java:151)
    at org.springframework.web.servlet.tags.form.AbstractCheckedElementTag.autogenerateId(AbstractCheckedElementTag.java:80)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.resolveId(AbstractDataBoundFormElementTag.java:142)
    at org.springframework.web.servlet.tags.form.AbstractSingleCheckedElementTag.writeTagContent(AbstractSingleCheckedElementTag.java:82)
    at org.springframework.web.servlet.tags.form.CheckboxTag.writeTagContent(CheckboxTag.java:52)
    at org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102)
    at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79)
    at org.apache.jsp.WEB_002dINF.jsp.Location_jsp._jspx_meth_form_005fcheckbox_005f3(Location_jsp.java:2283)
    at org.apache.jsp.WEB_002dINF.jsp.Location_jsp._jspService(Location_jsp.java:648)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:419)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:391)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    at org.springframework.webflow.mvc.servlet.ServletMvcView.doRender(ServletMvcView.java:55)
    at org.springframework.webflow.mvc.view.AbstractMvcView.render(AbstractMvcView.java:187)
    at org.springframework.webflow.engine.ViewState.render(ViewState.java:296)
    at org.springframework.webflow.engine.ViewState.doEnter(ViewState.java:186)
    at org.springframework.webflow.engine.State.enter(State.java:194)
    at org.springframework.webflow.engine.Flow.start(Flow.java:535)
    at org.springframework.webflow.engine.impl.FlowExecutionImpl.start(FlowExecutionImpl.java:366)
    at org.springframework.webflow.engine.impl.RequestControlContextImpl.start(RequestControlContextImpl.java:234)
    at org.springframework.webflow.engine.SubflowState.doEnter(SubflowState.java:101)
    at org.springframework.webflow.engine.State.enter(State.java:194)
    at org.springframework.webflow.engine.Transition.execute(Transition.java:227)
    at org.springframework.webflow.engine.impl.FlowExecutionImpl.execute(FlowExecutionImpl.java:393)
    at org.springframework.webflow.engine.impl.RequestControlContextImpl.execute(RequestControlContextImpl.java:214)
    at org.springframework.webflow.engine.TransitionableState.handleEvent(TransitionableState.java:119)
    at org.springframework.webflow.engine.Flow.handleEvent(Flow.java:555)
    at org.springframework.webflow.engine.impl.FlowExecutionImpl.handleEvent(FlowExecutionImpl.java:388)
    at org.springframework.webflow.engine.impl.RequestControlContextImpl.handleEvent(RequestControlContextImpl.java:210)
    at org.springframework.webflow.engine.ViewState.handleEvent(ViewState.java:232)
    at org.springframework.webflow.engine.ViewState.resume(ViewState.java:196)
    at org.springframework.webflow.engine.Flow.resume(Flow.java:545)
    at org.springframework.webflow.engine.impl.FlowExecutionImpl.resume(FlowExecutionImpl.java:258)
    at org.springframework.webflow.executor.FlowExecutorImpl.resumeExecution(FlowExecutorImpl.java:169)
    at org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handle(FlowHandlerAdapter.java:183)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:183)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.springframework.expression.spel.SpelEvaluationException: EL1008E:(pos 0): Field or property 'aHCS' cannot be found on object of type 'ca.ups.tundra.model.Location'
    at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:208)
    at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:72)
    at org.springframework.expression.spel.standard.SpelExpression.getValueType(SpelExpression.java:117)
    at org.springframework.binding.expression.spel.SpringELExpression.getValueType(SpringELExpression.java:100)
    ... 103 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T13:21:07.797

当我们在休眠配置文件和模型类中使用 getter 和 setter 方法时，通常会发生这种情况。

# vba - 逐行计算Excel文本中的＆符号和感叹号的数量

> ID：15010325
> 
> 赞同：0
> 
> 时间：2013-02-21T19:07:55.417
> 
> 标签：vba

我需要有关如何计算 Excel 文本中与号和感叹号数量的帮助。我只能获得第一行，但值没有更新。这是我到目前为止的代码。谢谢你。

```
Sub Display_Readability_Scores()
    Dim Stats As Variant
    Dim Words As String
    Dim Characters As String
    Dim Paragraphs As String
    Dim Sentences As String
    Dim Sentences_per_paragraph As String
    Dim Words_per_sentence As String
    Dim Characters_per_word As String
    Dim Ratio_of_passive_sentences As String
    Dim Flesch_Reading_Ease_score As String
    Dim Flesch_Kincaid_Grade_Level_score As String
    Dim Coleman_Liau_Readability_Score As String
    Dim ActiveDocument As Object
    Dim row As Integer
    Dim column As Integer
    Dim amp As String

    row = 2

    Set ActiveDocument = CreateObject("Word.Document")

    Do While Worksheets("Sheet1").Cells(row, 1) <> ""

    ActiveDocument.Content = Worksheets("Sheet1").Cells(row, 2)

    column = 3

    Words = ActiveDocument.Content.ReadabilityStatistics(1).Value
    Characters = ActiveDocument.Content.ReadabilityStatistics(2).Value
    Paragraphs = ActiveDocument.Content.ReadabilityStatistics(3).Value
    Sentences = ActiveDocument.Content.ReadabilityStatistics(4).Value
    Sentences_per_paragraph = ActiveDocument.Content.ReadabilityStatistics(5).Value
    Words_per_sentence = ActiveDocument.Content.ReadabilityStatistics(6).Value
    Characters_per_word = ActiveDocument.Content.ReadabilityStatistics(7).Value
    Ratio_of_passive_sentences = ActiveDocument.Content.ReadabilityStatistics(8).Value
    Flesch_Reading_Ease_score = ActiveDocument.Content.ReadabilityStatistics(9).Value
    Flesch_Kincaid_Grade_Level_score = ActiveDocument.Content.ReadabilityStatistics(10).Value

    amp = Application.WorksheetFunction.CountIf("Worksheets("Sheet1").Cells(row, 2), "&")    

    For Each Stats In Worksheets("Sheet1").Cells(row, 2)

        Worksheets("Sheet1").Cells(row, column) = Words
        column = column + 1

        Worksheets("Sheet1").Cells(row, column) = Characters
        column = column + 1

        Worksheets("Sheet1").Cells(row, column) = Paragraphs
        column = column + 1

        Worksheets("Sheet1").Cells(row, column) = Sentences
        column = column + 1

        Worksheets("Sheet1").Cells(row, column) = Sentences_per_paragraph
        column = column + 1

        Worksheets("Sheet1").Cells(row, column) = Words_per_sentence
        column = column + 1

        Worksheets("Sheet1").Cells(row, column) = Characters_per_word
        column = column + 1

        Worksheets("Sheet1").Cells(row, column) = Ratio_of_passive_sentences
        column = column + 1

        Worksheets("Sheet1").Cells(row, column) = Flesch_Reading_Ease_score
        column = column + 1

        Worksheets("Sheet1").Cells(row, column) = Flesch_Kincaid_Grade_Level_score
        column = column + 1

        Worksheets("Sheet1").Cells(row, column) = amp

    row = row + 1

    Next Stats

    Loop    
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:39:07.357

```
Sub Display_Readability_Scores()
    Dim Stats As Variant
    Dim Words As String
    Dim Characters As String
    Dim Paragraphs As String
    Dim Sentences As String
    Dim Sentences_per_paragraph As String
    Dim Words_per_sentence As String
    Dim Characters_per_word As String
    Dim Ratio_of_passive_sentences As String
    Dim Flesch_Reading_Ease_score As String
    Dim Flesch_Kincaid_Grade_Level_score As String
    Dim Coleman_Liau_Readability_Score As String
    Dim ActiveDocument As Object
    Dim row As Integer
    Dim column As Integer
    Dim amp As Long, ex As Long

    Dim RS As Object, txt As String

    row = 2

    Set ActiveDocument = CreateObject("Word.Document")

    Do While Worksheets("Sheet1").Cells(row, 1) <> ""

        txt = Worksheets("Sheet1").Cells(row, 2).Value
        ActiveDocument.Content = txt

        Set RS = ActiveDocument.Content.ReadabilityStatistics

        Words = RS(1).Value
        Characters = RS(2).Value
        Paragraphs = RS(3).Value
        Sentences = RS(4).Value
        Sentences_per_paragraph = RS(5).Value
        Words_per_sentence = RS(6).Value
        Characters_per_word = RS(7).Value
        Ratio_of_passive_sentences = RS(8).Value
        Flesch_Reading_Ease_score = RS(9).Value
        Flesch_Kincaid_Grade_Level_score = RS(10).Value

        amp = CountChar(txt, "&")
        ex = CountChar(txt, "!")

        Worksheets("Sheet1").Cells(row, 3).Resize(1, 12).Value = _
              Array(Words, Characters, Paragraphs, Sentences, Sentences_per_paragraph, _
              Words_per_sentence, Characters_per_word, Ratio_of_passive_sentences, _
              Flesch_Reading_Ease_score, Flesch_Kincaid_Grade_Level_score, amp, ex)

        row = row + 1
    Loop
End Sub

Function CountChar(txt As String, char As String) As Long
    CountChar = Len(txt) - Len(Replace(txt, char, ""))
End Function 
```

# java - 按钮不会在 Android 中禁用

> ID：15010329
> 
> 赞同：0
> 
> 时间：2013-02-21T19:08:03.197
> 
> 标签：java, android, button

```
public void enableButton(){
      exitButton.setEnabled(true);
}
public void disableButton(){
      exitButton.setEnabled(false);
}
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_second_page);
    InputFilter[] FilterArray = new InputFilter[1];
    FilterArray[0] = new InputFilter.LengthFilter(4);
    initializeEverything();
    text1.setFilters(FilterArray);
    text2.setFilters(FilterArray);
    text3.setFilters(FilterArray);
    text4.setFilters(FilterArray);
    text5.setFilters(FilterArray);

    final TextView textfinal = (TextView)findViewById(R.id.finaltext);

    TextWatcher textWatcher = new TextWatcher() {

      public void afterTextChanged(Editable s) {
          textfinal.setText(calculateTotal());
          if(Double.parseDouble(textfinal.getText().toString())>100)
              textfinal.setTextColor(Color.RED);
              disableButton();
              Log.i("yo","gray this out");
          if(Double.parseDouble(textfinal.getText().toString())<100)
              textfinal.setTextColor(Color.BLACK);
              enableButton();
      }

      public void beforeTextChanged(CharSequence s, int start, int count, int after) {
      }

      public void onTextChanged(CharSequence s, int start, int before,
              int count) {

      }
    };
    text1.addTextChangedListener(textWatcher);
    text2.addTextChangedListener(textWatcher);
    text3.addTextChangedListener(textWatcher);
    text4.addTextChangedListener(textWatcher);
    text5.addTextChangedListener(textWatcher); 
```

我有一个灰色退出按钮的问题。在 initializeEverything() 中，我设置了 exitButton.setEnabled(false)，它在开始时是灰色的。在我向 editTexts(text1, text2 ...) 输入一些低于 100 的数值后，该按钮变为启用状态。但是当我超过 100 时，它应该再次被禁用，但它保持启用状态。发送了 Logcat 消息“灰色这个狗屎”，所以我知道 textWatcher 工作正常，我不确定为什么按钮不会禁用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T19:12:29.540

问题在于这些行

```
if(Double.parseDouble(textfinal.getText().toString())>100)
          textfinal.setTextColor(Color.RED);
          disableButton();
          Log.i("yo","gray this out");
 if(Double.parseDouble(textfinal.getText().toString())<100)
          textfinal.setTextColor(Color.BLACK);
          enableButton(); 
```

`if`请注意，如果您不使用括号，则仅附加一行。像这样替换这些行：

```
if(Double.parseDouble(textfinal.getText().toString())>100){
          textfinal.setTextColor(Color.RED);
          disableButton();
          Log.i("yo","gray this out");
}else if(Double.parseDouble(textfinal.getText().toString())<100){
          textfinal.setTextColor(Color.BLACK);
          enableButton();
} 
```

# macos - pylab 与 ipython 的 EPD 版本有关的问题

> ID：15010330
> 
> 赞同：0
> 
> 时间：2013-02-21T19:08:04.243
> 
> 标签：macos, matplotlib, ipython, egg, enthought

我最近切换到了 ipython 的 EPD 版本（我有 64 位学​​生版），现在我在使用 pylab 时遇到了问题。当我输入“import pylab”时，它给了我以下错误

```
ImportError                               Traceback (most recent call last)
<ipython-input-1-0c66bb86b884> in <module>()
----> 1 import pylab

/Library/Python/2.7/site-packages/matplotlib-1.1.0-py2.7-macosx-10.7-intel.egg/pylab.py in <module>()
----> 1 from matplotlib.pylab import *
      2 import matplotlib.pylab
      3 __doc__ = matplotlib.pylab.__doc__

/Library/Python/2.7/site-packages/matplotlib-1.1.0-py2.7-macosx-10.7-intel.egg/matplotlib/pylab.py in <module>()
    219      silent_list, iterable, dedent
    220 
--> 221 from matplotlib import mpl  # pulls in most modules
    222 
    223 from matplotlib.dates import date2num, num2date,\

/Library/Python/2.7/site-packages/matplotlib-1.1.0-py2.7-macosx-10.7-intel.egg/matplotlib/mpl.py in <module>()
      1 from matplotlib import artist
----> 2 from matplotlib import axis
      3 from matplotlib import axes
      4 from matplotlib import cbook
      5 from matplotlib import collections

/Library/Python/2.7/site-packages/matplotlib-1.1.0-py2.7-macosx-10.7-intel.egg/matplotlib/axis.py in <module>()
      8 from matplotlib.artist import allow_rasterization
      9 import matplotlib.cbook as cbook
---> 10 import matplotlib.font_manager as font_manager
     11 import matplotlib.lines as mlines
     12 import matplotlib.patches as mpatches

/Library/Python/2.7/site-packages/matplotlib-1.1.0-py2.7-macosx-10.7-intel.egg/matplotlib/font_manager.py in <module>()
     50 import matplotlib
     51 from matplotlib import afm
---> 52 from matplotlib import ft2font
     53 from matplotlib import rcParams, get_configdir
     54 from matplotlib.cbook import is_string_like

ImportError: dlopen(/Library/Python/2.7/site-packages/matplotlib-1.1.0-py2.7-macosx-10.7-intel.egg/matplotlib/ft2font.so, 2): Symbol not found: _FT_Attach_File
  Referenced from: /Library/Python/2.7/site-packages/matplotlib-1.1.0-py2.7-macosx-10.7-intel.egg/matplotlib/ft2font.so
  Expected in: flat namespace
 in /Library/Python/2.7/site-packages/matplotlib-1.1.0-py2.7-macosx-10.7-intel.egg/matplotlib/ft2font.so 
```

我需要 pylab/matplotlib 才能生存，所以这很糟糕。有趣的是，当我双击 /Applications/Enthought/ 文件夹中的 PyLab (64-bit).app 时，它会打开一个终端并且 pylab 运行良好，但当我从命令行调用它时它就不起作用，或者当我使用笔记本时。如果我可以让 python 使用我从 EPD 获得的 pylab 版本，那么一切都会好起来的，但默认情况下它会从 /Library/Python/2.7/site-packages/matplotlib-1.1.0-py2.7 导入东西-macosx-10.7-intel.egg/matplotlib/ ft2font.so 出了点问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T03:23:04.590

看起来您的 EPD python 和您使用 Apple 的 python 安装的软件包之间存在冲突。

1) 正如 tsyu80 所指出的，您的 PATH 可能会将您指向 Apple 的 python，因此您可能正在启动它的 ipython 而不是 EPD。如果是这种情况，将以下行添加到您的 ~/.bash_profile 文件中应该可以解决此问题（尽管在 EPD 安装期间应该已经添加了这些行）

```
# Setting PATH for EPD-7
PATH="/Library/Frameworks/EPD64.framework/Versions/Current/bin:${PATH}"
export PATH 
```

请注意，您应该新建一个终端会话以使这些设置生效。

2) 即使您启动 EPD 的 (i)python，它也可能是从安装在 Apple 的软件包中导入的。请参阅[https://support.enthought.com/entries/22094157-OS-X-Conflict-with-installed-packages-in-earlier-Python-installation](https://support.enthought.com/entries/22094157-OS-X-Conflict-with-installed-packages-in-earlier-Python-installation)

3）一旦你解决了这个问题，一定要更新到最新版本的 ipython： https: [//support.enthought.com/entries/22415022-Using-enpkg-to-update-EPD-packages](https://support.enthought.com/entries/22415022-Using-enpkg-to-update-EPD-packages)

# python - 如何清理由 cython 扩展编译的文件

> ID：15010331
> 
> 赞同：2
> 
> 时间：2013-02-21T19:08:10.333
> 
> 标签：python, cython, setuptools

我有几个`cython`使用以下构建的扩展`setuptools`：

```
python setup.py build 
```

我本来希望他们被删除调用：

```
python setup.py clean --all 
```

但他们不是，你对如何处理这个有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:22:41.377

（我不确定它是否是你想要的）你想删除生成的文件吗？

```
FileIO.purge(Path.currentPath() , r".*\.c$")
FileIO.purge(Path.currentPath() , r".*\.pyd$")
FileIO.purge(Path.currentPath() , r".*\.pyc$")

def purge(path, pattern):
    for f in os.listdir(path):
        filename = re.search(pattern, f) 
        if filename is None:
            pass
        else:
            os.remove(os.path.join(path, f)) 
```

# macos - 使用 CoreAudio OSX 读取输入音量

> ID：15010334
> 
> 赞同：1
> 
> 时间：2013-02-21T19:08:16.537
> 
> 标签：macos, audio, core-audio, volume

该文档有点令人困惑-有人可以指出我可以阅读CoreAudio上的输入音量的代码吗？我正在使用的代码使用：

```
AudioUnitGetParameter(mMixerUnit, k3DMixerParam_PreAveragePower, kAudioUnitScope_Input, 0, &levels[0]);
AudioUnitGetParameter(mMixerUnit, k3DMixerParam_PrePeakHoldLevel, kAudioUnitScope_Input, 0, &peaks[0]); 
```

这适用于某些设备，但不适用于所有设备。我需要适用于所有设备的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:11:33.483

如果没有更多的上下文，很难完全诊断这一点。但是，您是否明确启用了混音器上的输入计量？你会这样做：

```
UInt32 enable = 1;
AudioUnitSetProperty(mMixerUnit,
                     kAudioUnitProperty_MeteringMode,
                     kAudioUnitScope_Input,
                     0,
                     &enable,
                     sizeof(enable)); 
```

# nsis - 如何检查是否在 NSIS 中选择了组件？

> ID：15010336
> 
> 赞同：6
> 
> 时间：2013-02-21T19:08:21.793
> 
> 标签：nsis

如果选择了某个组件，我想提示用户提供额外信息，但我不确定如何检查是否选择了给定组件。似乎[http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.13.2](http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.13.2)可能有某种相关性，但我的印象是一个部分是一组组件......

在安德斯的帮助下，我有这个工作：

```
!include MUI.nsh
!include nsDialogs.nsh
!include LogicLib.nsh
!include sections.nsh

Name A
InstProgressFlags smooth colored
LicenseBkColor /windows
OutFile A.exe
InstallDir $PROGRAMFILES\A

Var Dialog

Section "A" SEC_A
SectionEnd
Section "B" SEC_B
SectionEnd

!insertmacro MUI_PAGE_COMPONENTS
Page custom getA setA # {{{
!insertmacro MUI_PAGE_DIRECTORY # {{{ install
Function getA

   ${Unless} ${SectionIsSelected} ${SEC_A}
      Abort
   ${EndUnless}

   nsDialogs::Create 1018
   Pop $Dialog

   ${If} $Dialog == error
      Abort
   ${EndIf}

   ${NSD_CreateLabel} 0 0 100% 12u "Test"

   nsDialogs::Show
FunctionEnd
Function setA
   MessageBox MB_OK "clicked?"
FunctionEnd
# }}}
!insertmacro MUI_PAGE_INSTFILES
!insertmacro MUI_UNPAGE_CONFIRM
!insertmacro MUI_UNPAGE_INSTFILES 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T20:18:25.547

每个部分（带有名称）在组件页面上都显示为一个复选框。（节组可用于形成树形布局，但只有实际节包含可执行代码）

`sections.nsh`包含方便的辅助宏来操作设置，如果你使用`logiclib.nsh`你可以做`${If} ${SectionIsSelected} ${MYSECTION}`......

# javascript - 有时使用 jquery holdReady 函数持有 document.Ready()

> ID：15010339
> 
> 赞同：2
> 
> 时间：2013-02-21T19:08:29.217
> 
> 标签：javascript, jquery

在这里，我遇到了 jquery holdReady 的问题。

```
 $.holdReady(true);
    $.getScript("someXJqueryPlugin.js", function() {
    $.holdReady(false);
    }); 
```

在我准备好的功能中

```
$(document).ready(function(){
 someFunctionFromMyPlugin();
}); 
```

因为`someXJqueryPlugin.js` 是一些更大的尺寸。所以我试图延迟准备功能，直到我的插件加载。

我仍然收到错误 someFunctionFromMyPlugin not a function 。

任何提示？？我错过了什么？请帮忙 。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T19:22:25.407

我建议将文档准备好放在 done 回调中。

```
$.getScript(url,function(){
    $(document).ready(function(){
        // do stuff
    });
}); 
```

或使用延迟：

```
$.when( $.getScript(url), $.ready ).done(function(){
    // do stuff
}); 
```

*注意* `$.ready`没有记录并且可能会发生变化，您可以将其替换为以下更稳定的版本：

```
$.when( $.getScript(url), $.Deferred(function(def){
    $(def.resolve);
})).done(function(){
    // do stuff
}); 
```

# c# - 字符串比较不匹配（使用正则表达式过滤器）& 仅通知新值

> ID：15010340
> 
> 赞同：0
> 
> 时间：2013-02-21T19:08:32.557
> 
> 标签：c#, .net, regex, string, compare

我正在开发一个应用程序，用于检查分类广告网站上的最新广告。当有特价新广告时，它应该通知我。

`i`是我准备支付的价格值，`m1`是网站上的所有价格，此外，它以`textbox`. 由于某种原因，比较不起作用。最终，我想进一步改变，以便它只通知我新的值。

为了澄清我的意思：产品的价格是一个字符串，我知道找到便宜价格的唯一方法是比较两个字符串：一个原始价格和一个我准备支付的价格。

我希望它现在清楚我的意思:)

**在按钮单击时**：

```
{
    int i =0;
    List<string> codes = new List<string>();
    WebClient web = new WebClient();
    String html = web.DownloadString("http://www.dhd24.com/azl/index.php?sortorder=51&zeilen_pro_seite=60&suchstring=graupapagei&plz=&umkreis=20&classid=0&nav=classtypeid%3AMQ%3B");
    MatchCollection m1 = Regex.Matches(html, @"(.....,-)", 
        RegexOptions.Singleline);               

    while (i < 700) {
        foreach (Match m in m1) {
            i++;
            string test = (i.ToString() + ",-");
            string d = test.Replace("  ", string.Empty);
            string f = m.Groups[1].Value.Replace("  ", string.Empty); ;

            if (d == f)
                MessageBox.Show("found one!");

            string code = m.Groups[1].Value;
            codes.Add(code);
        }                           
    }      

    listBox1.DataSource = codes;  
} 
```

# c# - 添加网格 C# MVC 项目

> ID：15010344
> 
> 赞同：0
> 
> 时间：2013-02-21T19:09:01.963
> 
> 标签：c#, html, asp.net-mvc

我的项目是一个 C# MVC Web 应用程序。在视图中，我将所有元素创建为

```
<input type="text" id="fname" name="fName" /> 
```

而不是使用 HTML 辅助标签；

现在，我需要添加一个网格，我可以添加/更新/删除记录。`add`如上代码所示，我如何使用 html 来创建网格；我应该能够在网格中添加/删除行。

注意：我不想使用 HTML 助手来创建网格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:30:05.567

你试过什么了？另外，您是否有不想使用 MvcContrib HTML.Grid 之类的帮助程序的原因？助手让事情变得简单多了，尤其是模型绑定。

如果您不使用帮助器，则需要使用循环从视图中的元素`foreach`构建网格，例如：`<table>`

```
@Model User
       <table id="user-index" >
                <thead>
                <tr>
                    <th>
                       First Name
                    </th>
                    <th>
                       Last Name
                    </th>
                    <th>
                        Phone
                    </th>
                </tr>
                </thead>
                <tbody>
        @foreach (var user in Model.UserList)
        {
             <tr>
                    <td>
                    //I'm using helpers in my example, you can output however you like
                    @Html.DisplayFor(model => user.firstname)
                    </td>
                    <td>
                    @Html.DisplayFor(model => user.lastname)
                    </td>
                    <td>
                    @Html.DisplayFor(model => user.phone)
                    </td>
            </tr>   
        }
            </tbody>
            </table> 
```

网格也有 jQuery 选项，看看[DataTables](http://datatables.net/extras/tabletools/)

**编辑**：HTML 助手还可以更轻松地处理模型返回的空值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:17:28.377

很难理解你在这里问什么。

在 HTML 中，网格是使用`<table>`标签创建的。所以答案是使用`<table>`标签。

你在哪里卡住？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T19:21:37.513

MVC 有很多网格选项，您也可以创建自己的网格选项，但为了节省时间，请使用 jQuery Grid 或 Kendo 之类的东西。

[这可能会帮助您为 ASP.NET MVC](https://stackoverflow.com/questions/177275/grid-controls-for-asp-net-mvc)选择所需的网格控件？

# cordova - 关于PhoneGap inappbrowser video play stop

> ID：15010350
> 
> 赞同：2
> 
> 时间：2013-02-21T19:09:30.347
> 
> 标签：cordova

我使用 PhoneGap 2.4.0。对于安卓应用。

当我使用 inappbrowser 打开外部网页（包含 youtube 视频）时，视频播放良好。但是通过完成按钮关闭网页后，音频播放不会停止。为了停止视频声音，我不得不关掉手机。

这对我来说是个大问题。上周我试图修复它。

我能得到一些帮助吗？

* * *

这是我的代码。

```
.......................

  function chamgae(juso) {
        var ref = window.open(juso, '_blank', 'location=yes');
        ref.close();
        }
..........................

<a href="#" onclick="chamgae('http://m.youtube.com')">

.......................... 
```

或者

```
.......................

      function chamgae(juso) {
            window.open(juso, '_blank', 'location=yes');
            }
    ..........................

    <a href="#" onclick="chamgae('http://m.youtube.com')">

    .......................... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:40:28.020

Did you do .close() after opening the InAppBrowser.

```
var ref = window.open(url, '_blank', 'location=no');
ref.close(); 
```

I removed the .close() code and I got the same problem as you of continued playback. This should solve your problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T05:37:26.580

可以跟踪 Web 视图的焦点或模糊事件。您只需要像这样向窗口添加侦听器：-

```
var win = window.top;
win.onfocus = function() { };
win.onblur  = function() { fnDoSomething() };
function fnDoSomething(){
player=$f(document.getElementById('player_1'));
player.api('pause');
} 
```

每当 web 视图失去焦点时都会调用 win.onblur，任何操作都可以在该侦听器中执行。如上例所示，我调用了 vimeo 播放器的“暂停”方法。

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T00:51:41.687

你想做什么，设置`_blank`为`_self`当你回去时它会停止。我遇到了同样的问题，这是我发现解决该问题的唯一方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-09T13:01:30.153

在尝试了 SO 的几个解决方案后，我终于找到了一个适用于 Win10 的解决方案：

```
var ref = window.open(file, '_blank', 'location=yes,hardwareback=yes,fullscreen=yes');
ref.addEventListener('loadstop', function () {
    ref.executeScript({ file: "videofix.js" });
}); 
```

视频修复.js：

```
var video = document.getElementsByTagName("video")[0];

let videoStopped = false;
// is executed every 100ms
var id = window.setInterval(function () {
    if (document.hidden && !videoStopped) {
        video.pause();
        videoStopped = true;
        // stop execution of this method
        window.clearInterval(id);
    }
}, 100); 
```

# java - 当我反复单击链接时出现错误。（休眠和春季 3）

> ID：15010352
> 
> 赞同：0
> 
> 时间：2013-02-21T19:09:31.077
> 
> 标签：java, spring, hibernate, jdbc

```
HTTP Status 500 - Request processing failed; nested exception is org.hibernate.exception.GenericJDBCException: Cannot open connection

type Exception report

message Request processing failed; nested exception is org.hibernate.exception.GenericJDBCException: Cannot open connection

description The server encountered an internal error that prevented it from fulfilling this request.

exception

org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.hibernate.exception.GenericJDBCException: Cannot open connection
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:659)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:552)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
root cause

org.hibernate.exception.GenericJDBCException: Cannot open connection
    org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:103)
    org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:91)
    org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
    org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:29)
    org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:426)
    org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:144)
    org.hibernate.jdbc.AbstractBatcher.prepareQueryStatement(AbstractBatcher.java:139)
    org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1547)
    org.hibernate.loader.Loader.doQuery(Loader.java:673)
    org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:236)
    org.hibernate.loader.Loader.doList(Loader.java:2213)
    org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2104)
    org.hibernate.loader.Loader.list(Loader.java:2099)
    org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:94)
    org.hibernate.impl.SessionImpl.list(SessionImpl.java:1569)
    org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:283)
    com.killerlinks.dao.LinkformDaoImpl.getCategory(LinkformDaoImpl.java:42)
    com.killerlinks.service.LinkformServiceImpl.getCategory(LinkformServiceImpl.java:38)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)
    org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:108)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    com.killerlinks.controllers.CategoryController.getCategory(CategoryController.java:43)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.doInvokeMethod(HandlerMethodInvoker.java:710)
    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:167)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:414)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:402)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:771)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:716)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:647)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:552)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
root cause

java.sql.SQLException: Listener refused the connection with the following error:
ORA-12519, TNS:no appropriate service handler found
The Connection descriptor used by the client was:
localhost:1521:XE

    oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112)
    oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:261)
    oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:387)
    oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:414)
    oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:165)
    oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:35)
    oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:801)
    java.sql.DriverManager.getConnection(DriverManager.java:582)
    java.sql.DriverManager.getConnection(DriverManager.java:154)
    org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriverManager(DriverManagerDataSource.java:173)
    org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver(DriverManagerDataSource.java:164)
    org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnectionFromDriver(AbstractDriverBasedDataSource.java:149)
    org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnection(AbstractDriverBasedDataSource.java:119)
    org.springframework.orm.hibernate3.LocalDataSourceConnectionProvider.getConnection(LocalDataSourceConnectionProvider.java:81)
    org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:423)
    org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:144)
    org.hibernate.jdbc.AbstractBatcher.prepareQueryStatement(AbstractBatcher.java:139)
    org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1547)
    org.hibernate.loader.Loader.doQuery(Loader.java:673)
    org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:236)
    org.hibernate.loader.Loader.doList(Loader.java:2213)
    org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2104)
    org.hibernate.loader.Loader.list(Loader.java:2099)
    org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:94)
    org.hibernate.impl.SessionImpl.list(SessionImpl.java:1569)
    org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:283)
    com.killerlinks.dao.LinkformDaoImpl.getCategory(LinkformDaoImpl.java:42)
    com.killerlinks.service.LinkformServiceImpl.getCategory(LinkformServiceImpl.java:38)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)
    org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:108)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    com.killerlinks.controllers.CategoryController.getCategory(CategoryController.java:43)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.doInvokeMethod(HandlerMethodInvoker.java:710)
    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:167)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:414)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:402)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:771)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:716)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:647)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:552)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
note The full stack trace of the root cause is available in the Apache Tomcat/7.0.33 logs. 
```

这是我反复单击链接时遇到的错误，如果我再次刷新链接，它工作正常。这是不时出现的错误。

这是我的休眠配置文件。

```
<bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="annotatedClasses">
            <list>
                <value>com.killerlinks.model.Reg</value>
                <value>com.killerlinks.model.Linkform</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.OracleDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop>                
            </props>
        </property>
    </bean>

    <bean id="hibernateTransactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>
</beans> 
```

我应该添加任何休眠属性吗？

# wpf - WPF 我用于 Validation.ErrorTemplate 的 ControlTemplate 无法访问父控件

> ID：15010353
> 
> 赞同：0
> 
> 时间：2013-02-21T19:09:31.657
> 
> 标签：wpf, controltemplate

当我的自定义 ComboBox 出现验证错误时，我正在尝试设置它的边距。这是我尝试使用的代码：

```
<ComboBox x:Class="Emsc.Prestige.Windows.AutoCompleteComboBox"
          xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
          xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
          x:Name="MyComboBox">

    <Validation.ErrorTemplate>
        <ControlTemplate>
            <Border x:Name="ErrorBorder" BorderThickness="2" CornerRadius="2">
                <AdornerElementPlaceholder x:Name="adorner"/>
            </Border>
        <ControlTemplate.Triggers>
            <DataTrigger Binding="{Binding Path=AdornedElement.(Validation.Errors)[0].ErrorContent, ElementName=adorner, Converter={StaticResource ErrorContentToErrorTypeConverter}}"
                                                        Value="Critical">
                <Setter TargetName="ErrorBorder" Property="BorderBrush" Value="Red" />
                <Setter TargetName="MyComboBox" Property="Margin" Value="0,0,10,0" />
            </DataTrigger>
        </ControlTemplate>
    </Validation.ErrorTemplate>
</ComboBox> 
```

因此，当我为 ErrorBorder 元素设置 BorderBrush 时，它工作正常。但是，当我尝试访问 MyComboBox 的 Margin 属性（或任何属性）时，出现以下错误：

> 属性“TargetName”不代表“Setter”的有效目标，因为找不到名为“MyComboBox”的元素。确保在使用它的任何设置器、触发器或条件之前声明目标。

我想在 XAML 中而不是在后面的代码中访问 MyComboBox 的边距。有没有办法通过我的 DataTrigger 中的 Setter 访问“TemplatedParent”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T22:48:24.137

尝试使用样式元素，像这样

```
<Style TargetType="ComboBox">
  <Style.Triggers>
    <Trigger Property="Validation.HasError" Value="True">
      <Setter Property="Margin" Value="2" />
    </Trigger>
  </Style.Triggers>
</Style> 
```

将此样式应用于您的组合框

# haskell - Haskell 解析错误，用于平均程序

> ID：15010354
> 
> 赞同：0
> 
> 时间：2013-02-21T19:09:33.070
> 
> 标签：haskell

我需要得到平均值，所以输入停止，直到用户输入一个负数，然后输出是平均值

```
 {
    getFloat :: IO Float
    getFloat = do line <- getLine
                    return (read line:: Float) 

    average :: IO Float
    average =  helper summ n
                    where
                    helper :: Float->Float->IO Float
                    helper summ n = do val<-getFloat
                                       if (val<0)
                                          then (return average)
                                          else ( do summ = summ + val
                                                    n = n+1
                                                    average= summ/n
                                                    average)
                                                         } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:28:05.687

最好将纯计算和不纯计算分开。即，`average`可能只是`[a] -> b`没有 IO 影响。

```
main = print =<< average `fmap` go []
  where
    go :: [Int] -> IO [Int]
    go xs = do
      x <- (read :: String -> Int) `fmap` getLine
      if x < 0 then return (x : xs) else go (x : xs)

    average :: [Int] -> Float
    average xs = (fromIntegral $ sum xs) / (fromIntegral $ length xs) 
```

* * *

顺便说一句，这不是最好的解决方案：

*   [`readLn :: Read a => IO a`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#v%3areadLn)
*   平均值可以在不遍历`List`两次的情况下变得更容易

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:28:22.423

尝试这样的事情：

```
main = do (s,n) <- getnums
          putStrLn $ show $ s / (fromIntegral n)

getnums :: IO (Float, Int)
getnums = go 0.0 0
  where go s n = do line <- getLine
                    let f = read line :: Float
                    if f < 0 then return (s,n)
                             else go (s+f) (n+1) 
```

# java - JTabbedPane 未显示添加的其他选项卡

> ID：15010356
> 
> 赞同：3
> 
> 时间：2013-02-21T19:09:51.110
> 
> 标签：java, swing, jpanel, jtabbedpane

我一直在寻找有关 JTabbedPane 的信息，但似乎找不到任何解决方案。

我使用 GridBagLayout 作为管理器，因为我对此更满意（我是 Java 编程新手）。

我已经创建了这个类，并用 JPanel 对其进行了扩展，并将所有类添加到另一个类上，当我运行程序时，我看到的只是空白屏幕，我将发布代码以便你看到。

（测试类/GUI类）

```
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import javax.swing.JComboBox;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class test1 extends JPanel {

    JTextField ID, Name, Address1, Address2,
            Post_Code, Landline, Mobile, Card_Name,
            Card_Number, Expiry_Date, Security_Number,
            Identification = new JTextField();
    ResultSet rs1;
    Connection conn;
    PreparedStatement pst;
    //JFrame frame = new JFrame("Test");
    String items[] = {"Yes", "No"};
    JComboBox box = new JComboBox(items);

    public test1() {
        JPanel jp2 = new JPanel(new GridBagLayout());
        GridBagConstraints c1 = new GridBagConstraints();
        c1.insets = new Insets(5, 5, 5, 5);
        c1.gridx = 1;
        c1.gridy = 0;
        c1.anchor = GridBagConstraints.CENTER;
        jp2.add(new JLabel("Customer Registration"), c1);
        c1.gridx = 0;
        c1.gridy = 1;
        c1.anchor = GridBagConstraints.EAST;
        jp2.add(new JLabel("ID"), c1);
        c1.gridx = 1;
        c1.gridy = 1;
        c1.anchor = GridBagConstraints.WEST;
        jp2.add(ID = new JTextField(10), c1);
        c1.gridx = 0;
        c1.gridy = 2;
        c1.anchor = GridBagConstraints.EAST;
        jp2.add(new JLabel("Name"), c1);
        c1.gridx = 1;
        c1.gridy = 2;
        c1.anchor = GridBagConstraints.WEST;
        jp2.add(Name = new JTextField(10), c1);
        c1.gridx = 0;
        c1.gridy = 3;
        c1.anchor = GridBagConstraints.EAST;
        jp2.add(new JLabel("Address"), c1);
        c1.gridx = 1;
        c1.gridy = 3;
        c1.anchor = GridBagConstraints.WEST;
        jp2.add(Address1 = new JTextField(15), c1);
        c1.gridx = 1;
        c1.gridy = 4;
        c1.anchor = GridBagConstraints.WEST;
        jp2.add(Address2 = new JTextField(15), c1);
        c1.gridx = 0;
        c1.gridy = 5;
        c1.anchor = GridBagConstraints.EAST;
        jp2.add(new JLabel("Post Code"), c1);
        c1.gridx = 1;
        c1.gridy = 5;
        c1.anchor = GridBagConstraints.WEST;
        jp2.add(Post_Code = new JTextField(10), c1);
        c1.gridx = 0;
        c1.gridy = 6;
        c1.anchor = GridBagConstraints.EAST;
        jp2.add(new JLabel("Landline"), c1);
        c1.gridx = 1;
        c1.gridy = 6;
        c1.anchor = GridBagConstraints.WEST;
        jp2.add(Landline = new JTextField(10), c1);
    }
} 
```

将所有 JTabbedPane 组合在一起的类：

导入 javax.swing.JFrame；导入 javax.swing.JTabbedPane；导入 javax.swing.SwingUtilities；

公共类 tabadd 扩展 JFrame {

```
JTabbedPane tab = new JTabbedPane();
Customer_Registration CR = new Customer_Registration();
test1 g = new test1();

public tabadd() {
    tab.add("Customer Registration", CR);
    tab.add("Equipment Registration", g);
    getContentPane().add(tab);
}

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            tabadd m = new tabadd();
            m.setTitle("Test");
            m.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            m.setSize(1280, 720);
            m.setLocationByPlatform(true);
            m.setVisible(true);
        }
    });
} 
```

}

将有多个类，因此 Customer_Registration 类。

再次感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:43:42.997

您没有在任何地方添加 jp2 面板。`test1`在类构造函数的末尾添加以下行。

```
add(jp2); 
```

另一种选择是将`GridBagLayout`集合作为布局管理器`test1` `JPanel`并将所有组件直接添加到其中。这样您就可以避免使用额外的`jp2`面板。

并且请使用标准的 Java 命名类，例如`test1`become `Test1`。

# mobile - 通过 Checkpoint SSL VPN 访问时移动 xPage 出现问题

> ID：15010358
> 
> 赞同：0
> 
> 时间：2013-02-21T19:10:04.307
> 
> 标签：mobile, xpages, checkpoint

我有一个使用扩展库移动控件（8.5.3 升级包 1）构建的功能齐全的移动 xPage 应用程序。从防火墙内的无线网络访问应用程序（通过 iOS）时效果很好。移到外面，当通过我们的 Checkpoint SSL VPN 门户访问时，根本不会显示相同的应用程序。我最初怀疑是检查点设置问题，但是当我修改有问题的 xpage 以仅包含基本的“Hello World”文本时，它显示得很好。似乎扩展库移动控件的某些东西通过 SSL VPN 完全禁止显示 xpage（只是一个普通的空白屏幕）。有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:58:00.383

您想使用[Fiddler](http://www.fiddler2.com/fiddler2/)、[Charles](http://www.charlesproxy.com/)或[TCPMon](http://ws.apache.org/commons/tcpmon/)之类的工具来观察设备端到底发生了什么。然后与您的代理人员谈谈他们配置的过滤类型。VPN 通常会过滤内容以“保护”用户免受 XSS 或其他线程的影响。如果内容过滤处于活动状态，您几乎无能为力（没有打电话给有很多纹身的人）

# java - 为什么像 Java 这样的语言可以区分字符串和字符，而其他语言则不区分？

> ID：15010360
> 
> 赞同：7
> 
> 时间：2013-02-21T19:10:11.890
> 
> 标签：java, python, ruby, string, char

我注意到像 Java 这样的语言有一个 char 原语和一个字符串类。Python 和 Ruby 等其他语言只有一个字符串类。这些语言改为使用长度为 1 的字符串来表示字符。

我想知道这种区别是否是由于历史原因。我了解直接影响 Java 的语言有 char 类型，但没有字符串。相反，字符串是使用 char* 或 char[] 形成的。

但我不确定这样做是否有实际目的。我也很好奇在某些情况下一种方式是否比另一种方式更具优势。

**为什么像 Java 这样的语言会区分 char 原语和字符串类，而像 Ruby 和 Python 这样的语言却没有？**

当然，它必须有某种设计方面的考虑，比如约定、效率、清晰度、易于实现等。语言设计师真的只是从帽子里挑出一个字符表示，可以这么说吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T19:15:02.280

底线是语言设计者决定如何做到这一点。很难比这更进一步。

然而，关于 C 的一点是，它通常被认为是一种低级语言，因为它的语法更准确地反映了正在执行的数据和任务的性质。将字符视为字符串将是一个抽象级别，这与 C 语言不同。这会使数据在幕后的样子变得不太清楚。当你只需要一个角色时，它几乎肯定会增加开销。

请注意，C 类型语言确实支持单字符串，因此在我看来，您确实拥有两全其美的优点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T08:28:44.013

**编辑 1**添加了许多指向来源的链接；改进了 Lisp 的历史故事；回答了为什么 Java 有原语。 **编辑 2**评论现代脚本语言，解释效率如何不再是一个问题

在过去，内存很昂贵——即使是简单的计算机也只有几千字节。您必须同意的典型服务条款将超过整个系统的 RAM。这意味着数据结构必须比您今天可以设计*的*要小得多。

计算机于 1940 年代在英国和美国开始出现，这些工程师所需的最小字符集是西欧字母，没有任何令人兴奋的口音。0-9，AZ 和 az 是 62 个字符。添加 31 个控制字符、空格和一些标点符号，您可以将所有内容放入 7 位中。非常适合电传打字机。

现在，这 7 位可以在不同的架构上以不同的方式布局。如果您使用 IBM，则必须知道与[ASCII](http://en.wikipedia.org/wiki/ASCII)完全不同的[EBCDIC](http://en.wikipedia.org/wiki/EBCDIC)。

60 年代和 70 年代的语言反映了这些问题，并将字符串打包到尽可能小的空间中：

*   Pascal：压缩的字节数组 - 固定长度且不以 null 结尾
*   C：以空值结尾的字节序列（通常被认为是一个数组，使用了一种疯狂的黑客思想，即数组下标只是[指针算术](http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/BitOp/pointer.html)）
*   Fortran 66：字符串？你不需要它们。将**一对**字符存储在一个**整数**中并使用 READ、WRITE 和 FORMAT

作为这些语言的程序员，我可以说这很糟糕。特别是因为大多数商业程序需要大量的文本输入和操作。随着内存变得更便宜，程序员倾向于先编写字符串实用程序，以便能够做任何有成效的事情。

固定长度的字符串（例如 Pascal）很有效，但如果您需要扩展或收缩它们，即使是单个字符也很麻烦。

C 的空终止方法的缺点是长度不与字符串一起存储，因此很容易覆盖缓冲区并使应用程序崩溃。此类错误仍然是计算机不安全的主要原因。有两种方法可以解决这个问题：

*   每次写入时检查字符串长度：这意味着扫描内存，直到找到空字符。丑陋
*   `malloc`新内存并将字符串复制到新内存中，然后`free`

在 80 年代，越来越多的标准库被引入来处理字符串——这些是由工具供应商和操作系统提供商提供的。标准化有大动作，但各方为了控制标准而争吵不休，很丑陋。

日益国际化也带来了另一个问题——国际字符集。首先，ASCII 被扩展到 8 位作为[ISO 8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)用于不同的欧洲语言（口音、希腊语、西里尔语），然后[Unicode](http://en.wikipedia.org/wiki/Unicode)将计算机完全带到了世界的各个角落。这带来了[UTF-8](http://en.wikipedia.org/wiki/UTF-8)、[UTF-16](http://en.wikipedia.org/wiki/UTF-8)等字符编码以及如何在这些不同方法之间进行转换的问题。

我还应该注意到[Lisp](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)引入了垃圾收集。这解决了 C 与`malloc`/的复杂性`free`。Lisp 非常强大的数组和序列库可以自然地处理字符串。

将这些趋势结合在一起的第一个主要流行语言是 Java。*它结合了语言的*三项改进：

1.  国际化和 Unicode：一种独特的数据类型`Character`和原语`char`
2.  封装：固定长度与空终止的问题通过以下方式消除：
    1.  不可变
    2.  VM 和 GC 中的巧妙优化
3.  库：所有基本的字符串操作功能都在语言中标准化。

如今，有些语言的每个值都是一个对象。然而，当 Java 在 90 年代后期构思时，GC 和 JIT/Hotspot 技术远没有现在这么快（至少部分是由于 RAM 的限制，但算法也得到了改进）。[Gosling 关心性能](http://www.artima.com/intv/gosling313.html)并保留原始数据类型。

还有一点：在 Java 中，有一个 Character 类是很自然的——它是许多操作和实用方法的天然家园，例如`isWhiteSpace()`and `isLetter()`，后者在日语、韩语和印度语言中有些复杂。

Python[早期决定](http://docs.python.org/2/howto/unicode.html)将字符定义为 8 位 ASCII 是一个糟糕的决定。您可以通过首先引入另一种略有不同且不兼容的数据类型（unicode）来看到随之而来的问题，并且现在只能通过复杂的迁移到 Python 3.x 来解决。

现代语言（包括脚本语言）遵循关于字符串库外观的广泛共识，如 Java 和 Python 所示。

每种语言都是为特定目的而设计的，因此以不同的方式平衡相互竞争的设计问题。现代语言受益于过去 60 年来在性能和内存方面的巨大改进，因此它们更倾向于*泛化、纯度和实用性，而*不是 CPU 和 RAM 的效率。这对于脚本语言来说是明确的，因为脚本的性质已经做出了这个决定。因此，现代语言往往只有高级字符串类型。

**TL/DR**早期的计算机在内存方面受到了可怕的限制，不得不采用最简单的实现。现代语言受益于 GC 识别国际化（8bit->16bit）字符并封装字符串数据类型以使字符串操作安全且容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T07:45:55.113

现在，我对此事的看法可能会以一种或另一种形式反映这里的一些答案，但无论如何我都会说：

是的，（就像其他人提到的那样）像 C 这样的低级语言比 Perl、Ruby 或 Python 这样的脚本语言更注重优化、性能和机器级别的细节。现在，这种“完全控制”心态的结果是，与脚本语言相比，您通常需要担心更多的事情。

那我想说什么？好吧，SO 的一个成员曾经给我传过“Python 之禅”，该文档中的一些摘录包含了一些核心 Python 哲学，例如“可读性计数”、“简单胜于复杂”，`"There should be one-- and preferably only one --obvious way to do it.`我强调了最后一个摘录因为某种原因。

继续前进，这里有一个具有 char 类型的抽象编程语言的示例**：** SML。以我在交互模式下的两条语句为例：

```
- val a = "a"
val a = "a" : string    #interpreter type feedback

- val a = #"a"
val a = #"a" : char     #interpreter type feedback 
```

在上面的两个例子中，我有两种方法来表示一个人类可读的字符，尽管它们是根本不同的类型。尽管按照今天的标准，SML 是一种相对抽象的语言，但它的核心理念在于计算、数学表达语法和错误安全。最后一点更适用于纯函数式语言（SML 不是纯函数式）。因此，尽管抽象强调远离低级语言的可怕细节，但它仍然没有像 Python 这样的语言那样强调“可读性”和“易用性”等概念。

事实上，脚本语言通常强调代码的快速生成，以及易于学习和使用的语法。就 Ruby 而言，松本本人甚至宣称该语言应该“使用起来很有趣”。本质上，在我最谦虚的估计中，我认为在 Python 等语言中不区分 char 和 string 数据类型的原因包含在简单性的概念中。冗长和卷积似乎是脚本语言的敌人。此外，最后一点，如果有人如此倾向于使用与 C 兼容的数据类型，那么还有`ctypes`Python 库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T19:39:29.843

> 我不确定这种区别是否是由于历史原因（C 只有字符，字符串由 char* 或 char[] 组成），或者这样做是否有实际目的。我也很好奇在某些情况下一种方式是否比另一种方式更具优势。

在`C`“字符串”的概念中，是由结束字符终止的字符数组/字符序列`\0`。否则，“字符串”就像`C`.

在 eg`C#`和其他几种语言中，字符串被视为抽象，字符串更像是一个不透明的对象。该对象包含对字符串起作用的方法，但字符串的存储方式对程序员来说是“隐藏的”。

原因是 C 是一种更古老的语言，并且比新语言更接近硬件。

如何在语言中定义字符串（无论使用单引号还是双引号）实际上只是设计语言的人当时认为是一件好事的实现细节。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-21T21:17:55.140

在 C 和 C++ 中，a`char`只是一个“小”整数。虽然正如其名称所暗示的那样，它被用于字符编码，但至少在桌面系统或任何需要支持各种语言和字母的系统上面对 Unicode 时，它​​的用途正在减少。然而，由于这些是能够直接访问硬件的“系统级”语言，因此还必须具有能够寻址特定架构上最小的可寻址内存单元的数据类型；这就是为什么 a`char`是必要的。

C# 区分`char`用于字符编码的类型（实际上是 16 位）和最小的可寻址单元类型`byte`，即 8 位。这种清晰也许是晚会的优势。

C 当然实际上根本没有字符串数据类型，它只有一个以 nul 结尾的字符数组的约定和一个使用该约定的函数库（顺便说一下，这是一个简单但效率低下的约定，如[这里](http://www.joelonsoftware.com/articles/fog0000000319.html)所解释的）。在 C++ 中，字符串类带来了真正字符串类型的优点，并且可以避免一些低效率和危险——尽管减轻危险会增加其自身不同的性能影响）。

# python - 为什么我的 clojure shell 结果与 python 中的不同？

> ID：15010364
> 
> 赞同：3
> 
> 时间：2013-02-21T19:10:35.700
> 
> 标签：python, clojure

在 python 中工作时，`repl`我经常需要编辑多行代码。

所以我`import os`当时用`os.system("notepad npad.py")`

在clojure中，我首先运行`(use '[clojure.java.shell :only [sh]])`

然后我跑`(sh "notepad" "jpad.clj")`

这会启动记事本，但不是有用的方式，因为 clojure`repl`现在挂起。换句话说，在我关闭记事本之前，我无法在其中输入代码，`repl`并且我想保持两者都打开。

我知道我可以轻松打开记事本而无需使用clojure，所以没什么大不了的。但是，clojure 有没有办法在不挂起的情况下启动外部进程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T19:46:35.103

`future`是一种让工作在后台运行的便捷方式，并且以后可以轻松检查进程。

```
user> (def notepad-process (future (sh "emacs" "jpad.clj")))
#'user/notepad-process 
```

编辑该文件一段时间，如果需要退出代码，请稍后检查该过程：

```
user> @notepad-process
{:exit 0, :out "", :err ""} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:36:26.007

听起来您想`sh`立即返回而不是等待记事本的退出代码。编写一个在新线程上`sh!`运行原始命令的宏或类似的东西怎么样？`sh`如果您只是在 REPL 中使用它作为一种便利，那将是完全没有问题的。

*编辑*

亚瑟的答案更好，更符合 Clojurian - 去吧。

# android - Android Internet 连接检查失败

> ID：15010367
> 
> 赞同：3
> 
> 时间：2013-02-21T19:10:50.473
> 
> 标签：android, android-networking

我正在使用以下代码来识别手机是否连接到互联网。

```
public static boolean isOnline(Context context) {  
    try {
        ConnectivityManager cm = (ConnectivityManager) 
        context.getSystemService(Context.CONNECTIVITY_SERVICE);  
        return cm.getActiveNetworkInfo().isConnectedOrConnecting();
    } catch(Exception e) {
        return false;
    }
} 
```

通过此检查，当手机连接家庭 wifi 但请注意没有互联网连接时，此方法仍然返回 true。这导致我的应用程序崩溃，因为当它尝试假设互联网存在的代码时，我可以进行进一步的异常处理以防止崩溃，但我需要一种更好的方法来检查可以返回实际互联网连接状态的互联网连接......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:12:33.127

用这个 ：

```
public  boolean isConnected() {
        boolean conectado;
        if (conectivtyManager.getActiveNetworkInfo() != null
                && conectivtyManager.getActiveNetworkInfo().isAvailable()
                && conectivtyManager.getActiveNetworkInfo().isConnected()) {
            conectado = true;
        } else {
            conectado = false;
        }
        return conectado;
    } 
```

放置此权限：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:17:41.467

我总是使用：

```
public static boolean isOnline(Context ctx) {

    NetworkInfo info = (NetworkInfo) ((ConnectivityManager) ctx.getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo();
    if (info == null || !info.isConnected()) {
        return false;
    }
    if (info.isRoaming()) {
        // here is the roaming option you can change it if you want to
        // disable internet while roaming, just return false
        return false;
    }
    return true;
} 
```

如果设备正在漫游，则需要额外检查，当 时`true`，它表明在此网络上使用数据可能会产生额外费用。

不要忘记在`<application>`标签之外为您的清单添加正确的权限：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T19:18:07.593

这对我有用：

```
public boolean networkCheckIn(){
try{

ConnectivityManager networkInfo = (ConnectivityManager) getSystemService(MapViewActivity.CONNECTIVITY_SERVICE) ;
networkInfo.getActiveNetworkInfo().isConnectedOrConnecting() ;

Log.d("1", "Net avail:"
                + networkInfo.getActiveNetworkInfo().isConnectedOrConnecting());

ConnectivityManager cm = (ConnectivityManager) getSystemService(MapViewActivity.CONNECTIVITY_SERVICE);
 NetworkInfo netInfo = cm.getActiveNetworkInfo();
 if (netInfo != null && netInfo.isConnectedOrConnecting()) {
    //Log.d("2", "Network available:true");
     return true;

  } else {
            //Log.d("3", "Network available:false");
            return false;
   }

}catch(Exception e){
        return false ;
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T20:20:23.017

你的问题是方法[`getActiveNetworkInfo()`](http://developer.android.com/reference/android/net/ConnectivityManager.html#getActiveNetworkInfo%28%29)。

例如，获取 Wi-Fi 的网络状态：

```
public static boolean isWifiAvailable(Context context) {
    ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    if (cm == null)
        return false;

    NetworkInfo[] networkInfos = cm.getAllNetworkInfo();
    for (NetworkInfo ni : networkInfos) {
        if (ni.getType() == ConnectivityManager.TYPE_WIFI && ni.isConnected())
            return true;
    }
    return false;
}// isWifiAvailable() 
```

有更多类型[`ConnectivityManager`](http://developer.android.com/reference/android/net/ConnectivityManager.html)（它们以 开头`TYPE_*`）。

# python - 如何将原始输入数字转换为python中的整数列表？

> ID：15010368
> 
> 赞同：0
> 
> 时间：2013-02-21T19:10:58.323
> 
> 标签：python, string, list, integer

我有这个代码：

```
guess = list()

playerNumber = raw_input
('Please enter a four digit number for which all the digits are different.')
p = str(playerNumber)

guess = [int(p[0]),int(p[1]),int(p[2]),int(p[3])] 
```

我正在尝试将用户给出的四位数字的原始输入转换为单个整数的列表。我的代码不起作用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T19:11:54.400

我会简单地完成，而不会影响可读性。Python 内置映射，将回调应用到序列和/或可迭代的每个元素。这里它调用`int`将序列的每个元素转换为整数。另外需要注意的是，字符串是可迭代的，可以迭代单个字符

```
playerNumber = raw_input('Please enter a four digit number for which all the digits are different.')

playerNumber = map(int, playerNumber) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-25T11:34:37.423

在以逗号（或任何其他分隔符）分隔的方式输入整数列表方面，可以为用户提供更多的独立性 -

```
 listOfIntRaw = raw_input("Enter the numbers separated by comma - ")
    listOfInt = list(map(int,listOfIntRaw.split(','))) 
```

# ios - 为什么我在设置 CIAdditionCompositing 过滤器时会看到 NSUnknownKeyException？

> ID：15010372
> 
> 赞同：1
> 
> 时间：2013-02-21T19:11:09.083
> 
> 标签：ios, core-image

我正在尝试使用以下代码设置 CIAdditionCompositing 过滤器：

```
CIImage *imageOne = [CIImage imageWithCGImage:[UIImage imageNamed:@"picOne"].CGImage];
CIImage *imageTwo = [CIImage imageWithCGImage:[UIImage imageNamed:@"picTwo"].CGImage];

filter = [CIFilter filterWithName:@"CIAdditionCompositing"];
[filter setDefaults];
[filter setValue:imageOne forKey:kCIInputImageKey];
[filter setValue:imageTwo forKey:kCIInputBackgroundImageKey];

CIImage *imageResult  = [filter outputImage];
CGImageRef imageRef = [context createCGImage:imageResult fromRect:imageResult.extent];
_imageView.image = [UIImage imageWithCGImage:imageRef]; 
```

并看到以下错误：

> 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[<__NSCFConstantString 0x2e2d60> setValue:forUndefinedKey:]：此类与键 inputImage 的键值编码不兼容。”

在线上

```
[filter setValue:imageOne forKey:kCIInputImageKey]; 
```

我在这个核心图像过滤器的设置中做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:29:00.003

很奇怪，这种方法有效......

```
filter = [CIFilter filterWithName:@"CIAdditionCompositing" keysAndValues:kCIInputImageKey, imageOne, kCIInputBackgroundImageKey, imageTwo, nil]; 
```

谁能解释其中的区别？

# html - 如何让我的 CSS 页脚在移动浏览器上停留在网站底部？

> ID：15010373
> 
> 赞同：0
> 
> 时间：2013-02-21T19:11:19.057
> 
> 标签：html, css, cross-browser, mobile-safari, android-styles

我的网站页脚在所有浏览器中都能完美运行，除了 iPad、iPhone 和 Android 手机。从本质上讲，在移动设备上，页脚并不像应有的那样位于网站底部。这是页脚的css：

```
.Footer { width: 100%; padding:10px 0; margin:0px 0 0 0; text-align:center; border-top:1px solid #b3b3b3; background-color:#d9d9d9; min-width: 1024px;}
.Footer p { color:#959595; padding:0; margin:0; font:normal 10px 'Verdana';}
.Footer a { color:#959595; text-decoration:underline;} 
```

这是 body 和 html 标签的 CSS：

```
body { font:12px Arial, Helvetica, sans-serif; padding:0; margin:0; color:#101010; width: 100%;}
html { padding:0; margin:0;} 
```

该网站位于 avidest.com。如何使页脚在 iPad 和移动设备上正确显示？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:38:13.623

每次我需要一个粘性页脚时，我总是最终回到这个人

[http://ryanfait.com/sticky-footer/](http://ryanfait.com/sticky-footer/)

# javascript - 加载时运行脚本

> ID：15010375
> 
> 赞同：0
> 
> 时间：2013-02-21T19:11:29.320
> 
> 标签：javascript, jquery

SO上的某个人帮助我为一个选择框编写了这个脚本，它将根据下拉列表中的选择显示隐藏的行

```
function showNext(opt)  {
    takeAway()
    var optMap={
        "Picked Up":"#pickedup",
        "Bus to alternate":"#altad2,#altad1",
        "Walk to alternate":"#altad2,#altad1",
    }
    $(optMap[opt]).css("display","") ;
}

function takeAway(){
    $("#pickedup,#altad2,#altad1").css("display", "none");
} 
```

我需要一些可以运行 onload 的东西，所以如果已经选择了某些东西，行会显示

这是将受脚本影响的选择

```
<tr class="~[evenoddrow]"> 
            <td class="bold">In the event of early dismissal I would like my child to:</td><td id="Emergclose_Action">~([01]Emergclose_Action)</td><td class="gwCen"></td>
            <td><select name="eReg|Emergclose_Action" id="eReg|Emergclose_Action" onChange="showNext(value);">
                    <option></option><option value="Walk home as normal">Walk home as normal</option><option value="Ride the bus as normal">Ride the bus as normal</option>
<option value="Picked Up">Be picked up immediately after dismissal</option><option value="Bus to alternate">Ride the bus to an alternate address</option><option value="Walk to alternate">Walk to an alternate address</option>
                </select>           
            </td>
        </tr> 
```

我尝试了以下，它没有工作..

```
function showNext(opt)  {
        takeAway()

      var optMap={
             "Picked Up":"#pickedup",
             "Bus to alternate":"#altad2,#altad1",
             "Walk to alternate":"#altad2,#altad1",
              }
           $(optMap[opt]).css("display","") ;       

}
function takeAway(){
    $("#pickedup,#altad2,#altad1").css("display", "none");
 }
$(function(){
   $('#eReg|Emergclose_Action').trigger('onchange');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:20:54.563

尝试`onChange="showNext(value);"`从您的选择元素中删除并更改 ID。在选择器中使用管道`|`不是一个好习惯，[需要进行一轮工作](https://groups.google.com/forum/?fromgroups=#!topic/jquery-en/3CVzhy5N1vk)......没有它会更容易。将其替换为下划线`_`。

所以你的选择 html 是：

```
<select name="eReg|Emergclose_Action" id="eReg_Emergclose_Action"> 
```

然后以这种方式执行javascript：

```
$(function(){

   //anything in here will run after the page loads

   //assign showNext to the change event
   $('#eReg_Emergclose_Action').change(function(){
      showNext($(this).val());
   }).change();//manually trigger the change event after its attached

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:37:37.587

如果有人之前已经选择了“是”，则必须在页面加载时运行的脚本可以使用 Jquery 进行如下优化

$('#eReg|Emergclose_Action').trigger('onchange');

# java - 使用 Hibernate 和 Spring 框架的简单 DAO，不起作用：无法找到 XML 模式命名空间的 Spring NamespaceHandler

> ID：15010378
> 
> 赞同：1
> 
> 时间：2013-02-21T19:11:44.680
> 
> 标签：java, spring, hibernate, spring-mvc, dao

我在春天的世界里很新。我正在尝试按照本教程并使用 Maven 创建一个作为 DAO 工作的 Spring 项目：

[http://singgihpraditya.wordpress.com/2010/02/13/spring-3-0-and-hibernate-tutorial-part-1/](http://singgihpraditya.wordpress.com/2010/02/13/spring-3-0-and-hibernate-tutorial-part-1/)

我在这个例子中创建了我的项目（更改属性文件以访问我的数据库）

这是我的**pom.xml**文件（由我自己创建，因为示例中没有显示）

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>org.andrea.myexample</groupId>
<artifactId>myHibernateExample</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>jar</packaging>

<name>myHibernateExample</name>
<url>http://maven.apache.org</url>

<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>3.8.1</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>3.2.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>3.2.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.2.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context-support</artifactId>
        <version>3.2.1.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.23</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-hibernate</artifactId>
        <version>1.2.9</version>
    </dependency>

    <dependency>
        <groupId>javax.persistence</groupId>
        <artifactId>persistence-api</artifactId>
        <version>1.0-rev-1</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-annotations</artifactId>
        <version>3.5.6-Final</version>
    </dependency>

    <dependency>
        <groupId>c3p0</groupId>
        <artifactId>c3p0</artifactId>
        <version>0.9.0.4</version>
    </dependency>

</dependencies> 
```

为了测试我的应用程序，我没有使用 Junit（如示例中所示），但我创建了一个包含 main 方法的*MainApp* * 类，这个：

```
package org.andrea.myexample.myHibernateExample.test;

import org.andrea.myexample.myHibernateExample.dao.UserDao;
import org.andrea.myexample.myHibernateExample.entity.User;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class MainApp {

/**
 * @param args
 */
public static void main(String[] args) {

    /*
     * Crea il contesto in base alle impostazioni dell'applicazione definite
     * nel file Beans.xml
     */
    ApplicationContext context = new ClassPathXmlApplicationContext(
            "app-config.xml");

    /*
     * Recupera un bean avente id="textEditor" nel file di configurazione
     * Beans.xml
     */
    UserDao dao = (UserDao) context.getBean("userDao");

    int expectedResult = 1;

    User user = new User();
    user.setAge(23);
    user.setUserName("Adit");
    user.setRegistered(true);

    dao.saveUser(user);

  }

} 
```

在这堂课中，我只是：

1.  从上下文中获取“userDao”对象（我认为我可以这样做，因为正如您在示例链接中看到的那样，UserDao 类使用 ** @Repository("userDao")** 注释进行了注释

2.  创建一个新的 valorized User 对象并使用我的 DAO 对象将其插入数据库。

问题是当我尝试运行我的**MainApp**类时，我在堆栈跟踪中获得以下错误：

```
**
INFO: Loading XML bean definitions from class path resource [db-config.xml]
Exception in thread "main" org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Failed to import bean definitions from relative location [db-config.xml]
Offending resource: class path resource [app-config.xml]; nested exception is org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Unable to locate Spring NamespaceHandler for XML schema namespace [http://www.springframework.org/schema/tx]
Offending resource: class path resource [db-config.xml]

    at org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:68)
    at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:85)
    at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:76)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(DefaultBeanDefinitionDocumentReader.java:271)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseDefaultElement(DefaultBeanDefinitionDocumentReader.java:196)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:181)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:140)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:111)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:243)
    at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:127)
    at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:93)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:537)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:451)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    at org.andrea.myexample.myHibernateExample.test.MainApp.main(MainApp.java:20)
Caused by: org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Unable to locate Spring NamespaceHandler for XML schema namespace [http://www.springframework.org/schema/tx]
Offending resource: class path resource [db-config.xml]

    at org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:68)
    at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:85)
    at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:80)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.error(BeanDefinitionParserDelegate.java:318)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1435)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1428)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:184)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:140)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:111)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(DefaultBeanDefinitionDocumentReader.java:255)
    ... 20 more
** 
```

为什么？你有什么想法吗？有什么办法可以尝试解决？

谢谢

安德烈亚

# ddl - 如果我想从我的 talend 工作中创建一个表格，最好使用什么组件？

> ID：15010380
> 
> 赞同：1
> 
> 时间：2013-02-21T19:11:46.557
> 
> 标签：ddl, sqlexception, talend

在我的工作中，我正在尝试通过从我的 talend 工作中加入几个表（例如 create table xx select * from t1 inner t2 等）来创建一个表（如果不存在）。我正在使用 tMysqlRow 组件。我不确定，它是否适合用于 DDL 操作..!! 请建议使用正确的组件。

使用 tMysqlRow，有时工作正常但不一致。有时它会因“java.sql.SQLException：超过锁定等待超时；尝试重新启动事务”而失败。是因为我的查询时间太长，还是使用 tMysqlRow 进行 DDL 操作是错误的？我在哪里做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:38:32.940

我能够弄清楚问题。问题是，我试图将表放在 tMysqlRow 组件中，并将其连接到另一个 tMysqlRow 以再次创建它。并且这两个不能使用单个 tMysqlConnection 对象。所以一个正在等待另一个提交。

有一次，我让这两个 tMySqlRow 组件与同一个 tMySqlConnection 对象一起工作，问题得到了解决。

这里要学习的一点是，它们都应该使用同一个连接对象。

# firefox - Firefox 19 控制台上的 Firebug 1.11.1 不起作用

> ID：15010385
> 
> 赞同：0
> 
> 时间：2013-02-21T19:12:09.967
> 
> 标签：firefox, console, firebug

Windows 7 是最新的并且相当新。

这工作了几周，然后在 5 天前停止工作 ~ 2013 年 2 月 16 日。

我已经加载并重新加载了这两个程序。我在清除注册表后加载了旧版本。仍然没有运气。

如果有人有任何想法 - 可能是第三个程序干扰，但我在这台计算机上加载的很少。

任何帮助，将不胜感激。我每天都用它来开发。任何可以让我在线编辑“css”的其他组合的想法都会受到欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-12T06:41:43.033

There is an problem with this version, i tried same and didn't work for me. Now i am using Firebug 1.11.4 which is working just perfect for me with marklogic console for firebug 1.1.11. hope it will help.

Thanks, AKD

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T20:04:53.540

最近我桌面上的 firefox 浏览器升级到了 19.0 ，并且将 bug 升级到了 1.11.2 。在运行时应用断点和调试脚本时遇到问题。一周前的旧版本并非如此。

尝试不将其添加为“答案”，但无法找出仅添加细节的选项。

# android - IMediaReader 和 IMediaWriter 在 android 中工作吗？

> ID：15010389
> 
> 赞同：2
> 
> 时间：2013-02-21T19:12:27.160
> 
> 标签：android, xuggler, xuggle

我想将在线流保存到文件中，我在 java 中使用了 IMediaReader 和 IMediaWriter（在 PC 中），它可以正常读写，但是当我尝试在 android 中使用它时，会出现 ExceptionInInitializeError。这是我的代码

```
 IMediaReader reader = ToolFactory.makeReader("rtsp://217.115.145.185:1935/live/mp4:alexlivestream_2");
        IMediaWriter writer = ToolFactory.makeWriter("output.mp4", reader);

        // add a debug listener to the writer to see media writer events
       writer.addListener(ToolFactory.makeDebugListener());
       reader.addListener(writer);

        // read and decode packets from the source file and
        // and dispatch decoded audio and video to the writer
       int i=0;
        while (i++<1000) {
            System.out.println(i);
            if (reader.readPacket() != null) {
                break;
            }
        }
        writer.close(); 
```

例外：

```
 Exception Ljava/lang/ExceptionInInitializerError; thrown while initializing Lcom/xuggle/ferry/Ferry;
 Exception Ljava/lang/ExceptionInInitializerError; thrown while initializing Lcom/xuggle/xuggler/XugglerJNI;
 Exception Ljava/lang/ExceptionInInitializerError; thrown while initializing Lcom/xuggle/xuggler/IContainer;
 FATAL EXCEPTION: main
 java.lang.ExceptionInInitializerError
at com.xuggle.mediatool.MediaReader.<init>(MediaReader.java:137)
at com.xuggle.mediatool.ToolFactory.makeReader(ToolFactory.java:77)
at com.example.yeni.MainActivity.startMediaToolsConversion(MainActivity.java:84)
at com.example.yeni.MainActivity.onCreate(MainActivity.java:75)
at android.app.Activity.performCreate(Activity.java:5206)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
at android.app.ActivityThread.access$600(ActivityThread.java:140)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4898)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
at dalvik.system.NativeStart.main(Native Method)
    Caused by: java.lang.ExceptionInInitializerError
at com.xuggle.xuggler.IContainer.<clinit>(IContainer.java:1622)
... 18 more
    Caused by: java.lang.ExceptionInInitializerError
at com.xuggle.xuggler.XugglerJNI.<clinit>(XugglerJNI.java:19)
... 19 more
    Caused by: java.lang.ExceptionInInitializerError
at com.xuggle.ferry.Ferry.<clinit>(Ferry.java:25)
... 20 more
     Caused by: java.lang.UnsatisfiedLinkError: Couldn't load xuggle: findLibrary returned null
at java.lang.Runtime.loadLibrary(Runtime.java:365)
at java.lang.System.loadLibrary(System.java:535)
at com.xuggle.ferry.JNILibraryLoader.loadLibrary0(JNILibraryLoader.java:268)
at com.xuggle.ferry.JNILibraryLoader.loadLibrary(JNILibraryLoader.java:171)
at com.xuggle.ferry.JNILibrary.load(JNILibrary.java:161)
at com.xuggle.ferry.FerryJNI.<clinit>(FerryJNI.java:16)
... 21 more 
```

对不起英语不好:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:18:27.623

没有 xuggler 的本地端口到 android 准备就绪。

Xuggler 基于 ffmpeg，这里有一个关于可用端口的讨论，这是一个起点：[FFmpeg on Android](https://stackoverflow.com/questions/4725773/ffmpeg-on-android)

# c - 文本文件中的本地化字符无效

> ID：15010390
> 
> 赞同：1
> 
> 时间：2013-02-21T19:12:29.060
> 
> 标签：c, unicode, wchar-t, c89

我学习C语言。我需要用 Unicode 数据创建一些文本文件。我写了这样的代码：

```
#include<stdio.h>
#include<stdlib.h>
#include<wchar.h>

int main(int argc, char *argv[]) {

    wchar_t *s1 = L"Привет, мир!\n";
    wchar_t *s2 = L"Hello, World!";

    FILE *fp = fopen("./hello.txt", "w");

    fputws(s1, fp);
    fputws(s2, fp);

    fclose(fp);

    exit(EXIT_SUCCESS);
} 
```

但我得到这样的结果：

```
??????, ???!
Hello, World! 
```

为什么我没有得到俄罗斯字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:53:59.560

您运行程序的终端中的语言环境可能存在问题。如果是这样，您只需像这样设置语言环境：

`setlocale(LC_CTYPE,"");`

更多信息[在这里](http://en.cppreference.com/w/c/locale/setlocale)

# ruby - 为什么有时 Ruby 会用块错误地散列文字

> ID：15010398
> 
> 赞同：0
> 
> 时间：2013-02-21T19:12:57.237
> 
> 标签：ruby, syntax

这有效：

```
[1, 2].inject({}) do |result, item| end 
```

这也有效：

```
[1, 2].inject Hash.new do |result, item| end 
```

这会引发 SyntaxError：

```
[1, 2].inject {} do |result, item| end 
```

`{}`在哪些情况下散列文字`Hash.new`不可互换？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T19:17:27.047

*   可以使用可选块调用任何方法。
*   块可以具有形式`do |params| ... end`或形式`{ |params| ... }`
    *   *在 Ruby 社区中，将前者用于多行块，将后者用于单行块是惯用的。*
*   块不必接受参数，在这种情况下，它们实际上可以显示为`do ... end`或`{ ... }`。
*   因此`foo {}`可以解释为将空哈希作为参数`foo({})`的方法，即，或者作为传递空块的方法，类似于`foo{ |x| }`or `foo{ nil }`。Ruby 选择将其解释为前者，这使您的示例成为采用两个块的方法，这在语法上无效。

由于您似乎不知道更简洁的块语法，您可以像这样使用它：

```
squares = [1,2,3,4,5].map{ |x| x*x } #=> [1,4,9,16,25] 
```

这是合法空块语法的（不是很有用）示例：

```
p [1,2,3].map{} #=> [nil,nil,nil] 
```

该块没有语句，因此块中最后一个表达式的值为 ，块中`nil`的每个值都映射到该值。

# android - Android Emulator，ADB 命令清除“不幸的是，MyApp 已停止运行”？

> ID：15010400
> 
> 赞同：2
> 
> 时间：2013-02-21T19:13:05.303
> 
> 标签：android, modal-dialog, adb

我正在将单元测试的一些任务自动化到 Android 调试器。不幸的是，该应用程序似乎崩溃了，并提供了一个带有 OK 框的精彩系统级模式对话框。我希望我可以通过 adb 命令行实用程序向模拟器发送某种命令，以虚拟单击“确定”或以其他方式关闭窗口，以便我们可以在后台再次启动程序。有人知道我该怎么做吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T19:55:33.203

您可以使用`input tap <x> <y>`命令单击确定按钮。

该`input`命令在 JB4.2 中有以下选项：

```
usage: input ...
   input text <string> [delay]
   input keyevent <key code number or name>
   input [touchscreen|touchpad] tap <x> <y>
   input [touchscreen|touchpad] swipe <x1> <y1> <x2> <y2>
   input trackball press
   input trackball roll <dx> <dy> 
```

# ruby-on-rails - 无法用 .where 查询替换动态查找器

> ID：15010401
> 
> 赞同：0
> 
> 时间：2013-02-21T19:13:07.760
> 
> 标签：ruby-on-rails, rails-activerecord

在会话控制器中，我尝试用 .where(email: params[:email]) 替换“.find_by_email(params[:email])”，并使用 Rails 内置的 has_secure_password 验证密码，但未成功。虽然前者有效，但后者导致捕获的异常：

```
undefined method `authenticate' for #<ActiveRecord::Relation:0x0000010384e690> 
```

这是控制器中不起作用的完整代码：

类 SessionsController < ApplicationController def new end

```
def create
  user = User.where(email: params[:email])
  if user && user.authenticate(params[:password])
    session[:user_id] = user.id
    redirect_to texts_path, notice: "Logged in!"
  else
    render "new"
  end
end 
```

结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:26:09.353

你只需要做一个很小的改变

```
user = User.where(email: params[:email]).first 
```

正如 Cyle 所提到的，您需要一个元素，而不是 where 返回的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:23:25.020

这`authenticate`是`User`该类的实例方法，但是`where`在不知道该方法的 ActiveRecord::Relation 中返回这些对象的分类。该代码以前使用该`find_by_email`方法，因为它返回单个 User 对象。要修复，您可以更改此行：

```
user = User.where(email: params[:email]) 
```

至：

```
user = User.where(email: params[:email]).first 
```

# postgresql - PostgreSQL 中奇怪的 ORDER BY 顺序

> ID：15010402
> 
> 赞同：4
> 
> 时间：2013-02-21T19:13:08.090
> 
> 标签：postgresql, sql-order-by, postgresql-9.1

```
SELECT vm.value FROM vm ORDER BY vm.value ASC; 
```

结果是：

```
.
0
0%
0.0
0.964
%.0f
%.0f mph
-1.0°
11/1
11-14-1981
112 mph
11:48:43
%1$.1f mph %2$@
1/2
12.5˚
1/4
195 lb
%.1f°
2 days ago
%.2f
2º out-in
3/4
3.5
3.6
3D
3 days ago
4º closed
5'10''
5”10”
Account 
```

我记得 ASCII/Unicode 数字应该紧紧地跟随在一起，而不是与百分比和其他字符交替。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T19:27:32.377

> 我记得 ASCII/Unicode 数字应该紧紧地跟随在一起，而不是与百分比和其他字符交替。

这适用于某些语言环境，但不适用于其他语言环境。显然它不适用于您正在使用的那个。在 SQL 中发出`show lc_collate`以查看正在使用的语言环境。

对于最新版本的 PG，包括 9.1，您可以使用每个查询特定的语言环境进行排序，如下所示：

```
SELECT vm.value FROM vm ORDER BY vm.value COLLATE "C"; 
```

对于问题中显示的特定数据，这将按您的预期排序。

# compression - Office 和类似程序中的分形图像压缩和图像压缩

> ID：15010406
> 
> 赞同：0
> 
> 时间：2013-02-21T19:13:32.680
> 
> 标签：compression, image-scaling, fractals

我读过分形图像压缩能够重建图像，然后以任何比例重建它们。

我已经看到像 Word (97, 2000) 这样的程序可以包含看起来与原始图像一样小或更小的图像，如果使用“特殊粘贴”，并且可以调整图像大小。

Word 97/2000（和其他程序，如现代网络浏览器）是否有可能使用分形图像压缩来实现我所描述的？

它是否与分形压缩有关，还是有一些类似的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T03:14:35.713

众所周知，Microsoft 使用分形压缩，但这不是 Word 中正在发生的事情。可以使用许多不同的插值方法来放大图像。双线性和双三次插值是最常见的。在我看来，Word 似乎正在使用双三次插值。矢量量化也可用于放大图像。重要的是要意识到通过这种方式放大图像不会获得新的细节。分形解压缩的有趣之处在于它会生成细节，但事实上，这个细节并不是真实的，只是该特定插值方法的方便副产品。

# c# - 如何更改 ListView (XAML) 中所选项目的前景色

> ID：15010409
> 
> 赞同：1
> 
> 时间：2013-02-21T19:13:49.970
> 
> 标签：c#, winrt-xaml

我正在创建我的第一个 Windows 8 应用程序，但遇到了一个有趣的困境。我有一个 ListView 并为项目使用自定义 UserControl。我创建了一个应用于项目的 ListViewItem 样式。使用这种风格，我设法改变了选择背景，但我想改变选择前景。我已经在整个 syle 中搜索了前景并更改了每一个，但它似乎没有任何效果。

我不知道它是否相关，但是其中`UserContol`包含所有 TextBox 的样式，并且该样式设置了`Foreground`属性（通过多层`BasedOn =`，所以我可以在 UserControl 中重新设置它，但还没有找到将其设置为）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:21:54.783

如果`Foreground`您的意思是复选标记，那么您可能会发现此答案很有帮助，因为它显示了如何编辑样式： [Listview selection display with no padding and no checkmark](https://stackoverflow.com/questions/14987745/listview-selection-display-with-no-padding-and-no-checkmark/14990251#14990251)

如果你的意思是`Foreground`你`TextBoxes`的`UserControl`- 你可以简单地在你的`UserControl`.

# xmlhttprequest - 响应 WebRequest

> ID：15010411
> 
> 赞同：0
> 
> 时间：2013-02-21T19:13:57.150
> 
> 标签：xmlhttprequest, webrequest, webresponse

我在**test.aspx**页面上创建了一个简单的 XML 请求。

```
System.Net.WebRequest req = System.Net.WebRequest.Create("http://server.loc/rq.aspx");

            req.ContentType = "text/xml";
            req.Method = "POST";

            string strData = "<root><test>test1 </test></root>";
            byte[] bytes = System.Text.Encoding.ASCII.GetBytes(strData);
            req.ContentLength = bytes.Length;
            Stream os = req.GetRequestStream();
            os.Write(bytes, 0, bytes.Length);

            System.Net.WebResponse resp = req.GetResponse();
            if (resp == null) return;
            System.IO.StreamReader sr = new System.IO.StreamReader(resp.GetResponseStream());

            string responsecontent = sr.ReadToEnd().Trim(); 
```

现在，在**rq.aspx**上，我想预测 webrequest 并根据 strData 生成某种响应。我真的不知道如何从网络请求访问 strData。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:18:03.787

这可能是您正在寻找的

```
private void Page_Load(object sender, EventArgs e)
{
    // Read XML posted via HTTP
    using (var reader = new StreamReader(Request.InputStream))
    {
        string xmlData = reader.ReadToEnd();
        // do something with the XML
    }
} 
```

从[这个答案](https://stackoverflow.com/a/6547486/2089625)

# android - SherlockListFragment 中的 ExpandableListView 与扩展 BaseExpandableListAdapter 的自定义适配器

> ID：15010412
> 
> 赞同：-1
> 
> 时间：2013-02-21T19:14:04.913
> 
> 标签：android, listview, actionbarsherlock, expandablelistview

**你好呀！**

我有这个设置。

MainActivity - 扩展 SherlockFragmentActivity - 使用 TabsAdapter 显示 4 个片段

我在需要此选项卡的其中一个选项卡上遇到问题：

FragmentSkills - 扩展 SherlockListFragment - 现在显示一些硬编码测试字符串的 ExpandableListView

==================================================== ================================ 问题：此时我得到一个 NullPointerException ，我似乎无法旋转：

// 在我的 onActivityCreated() 中 FragmentSkills.java expandList = (ExpandableListView) getActivity().findViewById(R.id.ExpList);

==================================================== =================================

我有点卡在这里，我不知道还能尝试什么。我发现了很多类似的例子，但它们都只展示了如何在正常的活动中做到这一点。由于我缺乏经验，这可能是我看不到的小东西，所以请看一下并尝试帮助我解决这个问题。

我是Android新手，所以请耐心等待。任何帮助表示赞赏。提前谢谢了。这是相关的代码。如果您需要查看更多信息，请告诉我。**非常感谢！**

.

片段技能.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ExpandableListView android:id="@+id/ExpList"
        android:layout_height="match_parent"
        android:layout_width="match_parent"
       android:groupIndicator="@null" />

</LinearLayout> 
```

list_item_skill_groups.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView android:id="@+id/tvSkillGroup"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginRight="15dp"
        android:textColor="@color/black"
        android:textIsSelectable="false"
        android:textSize="17sp" />

</LinearLayout> 
```

list_item_skills.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingTop="10dp"
    android:paddingLeft="16dp"
    android:paddingRight="16dp"
    android:paddingBottom="10dp"
    android:orientation="vertical" >

    <TextView android:id="@+id/tvSkillTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textIsSelectable="false"
        android:textSize="19sp"
        android:textStyle="normal"
        android:paddingBottom="4dp" />

</LinearLayout> 
```

片段技能.java

```
public class FragmentSkills extends SherlockListFragment {
    private ExpandableListView expandList;
    private ArrayList<ExpandableSkillsGroup> expListItems;
    private SkillsAdapter skillsAdapter;
    ArrayList<ExpandableSkillsChild> list1;
    ArrayList<ExpandableSkillsChild> list2;
    ArrayList<ExpandableSkillsChild> list3;

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        expandList = (ExpandableListView) getActivity().findViewById(R.id.ExpList);
        expListItems = getListItems();
        skillsAdapter = new SkillsAdapter(getActivity(), expListItems);
        expandList.setAdapter(skillsAdapter);
    }

    private ArrayList<ExpandableSkillsGroup> getListItems() {
        list1 = new ArrayList<ExpandableSkillsChild>();
        list1.add(new ExpandableSkillsChild("Android", null));
        list1.add(new ExpandableSkillsChild("Java", null));
        list1.add(new ExpandableSkillsChild("Javascript", null));

        ExpandableSkillsGroup group1 = new ExpandableSkillsGroup("Software Development");
        group1.setItems(list1);

        list2 = new ArrayList<ExpandableSkillsChild>();
        list2.add(new ExpandableSkillsChild("MySQL", null));
        list2.add(new ExpandableSkillsChild("PostgreSQL", null));
        list2.add(new ExpandableSkillsChild("SQLite", null));

        ExpandableSkillsGroup group2 = new ExpandableSkillsGroup("Databases");
        group2.setItems(list2);

        list3 = new ArrayList<ExpandableSkillsChild>();
        list3.add(new ExpandableSkillsChild("MySQL", null));
        list3.add(new ExpandableSkillsChild("PostgreSQL", null));
        list3.add(new ExpandableSkillsChild("SQLite", null));

        ExpandableSkillsGroup group3 = new ExpandableSkillsGroup("Operating Systems");
        group3.setItems(list3);

        ArrayList<ExpandableSkillsGroup> groupList  = new ArrayList<ExpandableSkillsGroup>();
        groupList.add(group1);
        groupList.add(group2);
        groupList.add(group3);
        return groupList;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:33:41.643

首先替换`FragmentSkills extends SherlockListFragment`为`FragmentSkills extends SherlockFragment`，这里不需要`SherlockListFragment`。现在将此方法添加到您的`FragmentSkills`：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    return inflater.inflate(R.layout.fragment_skills, container, false);
} 
```

也在你的`public void onActivityCreated(Bundle savedInstanceState)`而不是

```
 expandList = (ExpandableListView) getActivity().findViewById(R.id.ExpList); 
```

做这个

```
 expandList = (ExpandableListView) getView().findViewById(R.id.ExpList); 
```

# ruby - 在文件目录中搜索具有相同起始字符的文件或多个文件

> ID：15010414
> 
> 赞同：0
> 
> 时间：2013-02-21T19:14:16.423
> 
> 标签：ruby

我正在尝试创建一个 ruby​​ 脚本，它将打开一个 csv 文件并根据 csv 文件中每一行的内容在目录中搜索文件

```
e.g

**.csv file**    **directory**
13456            13456.jpg
13567            13456a.jpg
13687            13456b.jpg
                 13567.jpg
                 13687.jpg
                 13687a.jpg 
```

一旦我发现我想将找到的文件复制到一个名为 Keep 的文件夹中

我一直在搞不清楚如何搜索目录

所以我做了一些编码，但我仍然卡住了

```
 #require 'fileutils'
require 'spreadsheet'

input = "/Users/eccleshall/ImageCleanUp/" #where images are stored
output = "/Users/eccleshall/ImageCleanUp/Keep" #where images will be copied to

book = Spreadsheet.open '/Users/eccleshall/Desktop/ImageCleanUpScript/B002.xls' #opens workbook

sheet1 = book.worksheet 0 # sets worksheet

sheet1.each do |row| #for each row output
    puts row

    Dir.glob("/Users/eccleshall/ImageCleanUp/" row).each do|f| #search /Users/eccleshall/ImageCleanUp/ for files startig with row
        puts f
    end
end 
```

虽然我在运行时不断收到错误

ImageCleanUp.rb:14：语法错误，意外的 tIDENTIFIER，期待 ')' ...s/eccleshall/ImageCleanUp/" 行).each do|f| #search /Users/e...

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:26:44.060

您可以通过以下方式搜索它：

```
require 'fileutils'
Dir.glob('/path_to_file_directory/*.csv').each do |f|  # you can replace the extension you're looking for.
     # the 'f' will give a string representing the path of each file
end 
```

或者：

```
Dir.foreach('/path_to_file_directory/') do |i|
  next if i == '.' or i == '..'
  # do something with each file
end 
```

# iphone - 使用 monodevelop 和 Xcode 4 创建自定义表格单元格

> ID：15010415
> 
> 赞同：0
> 
> 时间：2013-02-21T19:14:20.870
> 
> 标签：iphone, uitableview, xamarin.ios, custom-cell

我想通过 Monodevelop 和基于 monotouch 的 xcode 4 为我的 iPhone 应用程序创建一个自定义表格单元格。我找到了这篇文章：

[http://www.alexyork.net/blog/2011/07/18/creating-custom-uitableviewcells-with-monotouch-the-correct-way/](http://www.alexyork.net/blog/2011/07/18/creating-custom-uitableviewcells-with-monotouch-the-correct-way/)

[http://slodge.blogspot.co.uk/2013/01/uitableviewcell-using-xib-editor.html](http://slodge.blogspot.co.uk/2013/01/uitableviewcell-using-xib-editor.html)

通过这两篇文章，我创建了一个这样的类：

```
[Register("ListingCell")]
public partial  class ListingCell : UITableViewCell
{
    public ListingCell () : base()
    {
    }

    public ListingCell (IntPtr handle) : base(handle)
    {

    }

    public void BindDataToCell(DrivedProperty  _property)
    {
        LocatoinLbl.Text  = _property .LocationString ;

    }
    public void AddImageToCell(UIImage _image){
        ListingThumbnail .Image = _image ;
    }
} 
```

我设计了我自己`UITableViewCell`定义的网点。然后在我的`GetCell`方法中，我使用了这样的代码：

```
 public override UITableViewCell GetCell (UITableView tableView, MonoTouch.Foundation.NSIndexPath indexPath)
        {
            ListingCell  cell;
cell = (ListingCell) tableView.DequeueReusableCell (identifier )  ;
            if (cell == null) {
                cell = new ListingCell ();
                var views = NSBundle.MainBundle.LoadNib("ListingCell", cell, null);
                cell = Runtime.GetNSObject( views.ValueAt(0) ) as ListingCell;
            }
var item = Controller.Items [indexPath.Row];
            cell.Tag = indexPath.Row;
            cell .BindDataToCell (item );
cell.AddImageToCell ( item .Image);
return cell;
        } 
```

现在，应用程序构建良好，但是当我运行它时，调试器会出现以下错误：

```
 var views = NSBundle.MainBundle.LoadNib("ListingCell", cell, null); 
```

并说：

```
MonoTouch.Foundation.MonoTouchException: Objective-C exception thrown.  Name: NSInternalInconsistencyException Reason: Could not load NIB in bundle: 'NSBundle </Users/john/Library/Application Support/iPhone Simulator/6.0/Applications/08FFAA89-4AC4-490D-9C1A-4DE4CBC6EBB7/Realtyna_iPhone_Project.app> (loaded)' with name 'ListingCell' 
```

真的我不知道这是为了什么。当我删除它时。该应用程序在我的`ListingCell`班级中使用单元格对象生成错误。我在互联网上进行了很多搜索，但没有找到任何解决方案。有没有人对此有任何想法？

我发现可以以编程方式创建自定义单元格。它会起作用，但问题是在运行时以编程方式创建困难的单元格非常困难。我们通过 excode 创建这个单元很简单，但我不知道为什么它不起作用:-S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:08:27.317

我不太确定您看到的问题是什么。

但是，**如果您只在 iOS6 上**，那么如果您切换到用于注册 NIB 和使表格单元出队而不是使用 LoadNib 代码的新 API 可能会有所帮助。

我发现切换有助于使我的代码更可靠地工作。

所以，注册你的手机：

```
tableView.RegisterNibForCellReuse(UINib.FromName("ListingCell", NSBundle.MainBundle), ListingCell.Identifier); 
```

然后，将出队代码更改为：

```
public override UITableViewCell GetCell (UITableView tableView, MonoTouch.Foundation.NSIndexPath indexPath)
{
    ListingCell  cell = (ListingCell) tableView.DequeueReusableCell (ListingCell.Identifier, indexPath)  ;
    var item = Controller.Items [indexPath.Row];
    cell.Tag = indexPath.Row;
    cell .BindDataToCell (item );
    cell.AddImageToCell ( item .Image);
    return cell;
} 
```

这是基于您提到的一篇文章 - [http://slodge.blogspot.co.uk/2013/01/uitableviewcell-using-xib-editor.html](http://slodge.blogspot.co.uk/2013/01/uitableviewcell-using-xib-editor.html)（免责声明 - 我写的！）

* * *

> 真的我不知道这是为了什么

我也不 - 所以不确定这是否有帮助......

* * *

Aside> 你的`AddImageToCell`代码对我来说是错误的 - 如果你的列表很大，你可能会遇到内存问题。

# python - 将 JSON 数组解析为类实例对象？

> ID：15010418
> 
> 赞同：8
> 
> 时间：2013-02-21T19:14:35.487
> 
> 标签：python, json

我正在尝试在 Python 中解析一些数据我有一些 JSON：

```
{
    "data sources": [
        "http://www.gcmap.com/"
    ],
    "metros": [
        {
            "code": "SCL",
            "continent": "South America",
            "coordinates": {
                "S": 33,
                "W": 71
            },
            "country": "CL",
            "name": "Santiago",
            "population": 6000000,
            "region": 1,
            "timezone": -4
        },
        {
            "code": "LIM",
            "continent": "South America",
            "coordinates": {
                "S": 12,
                "W": 77
            },
            "country": "PE",
            "name": "Lima",
            "population": 9050000,
            "region": 1,
            "timezone": -5
        }
    ]
} 
```

如果我想将`"metros"`数组解析为 Python 类`Metro`对象数组，我将如何设置该类？

我刚在想：

```
class Metro(object):
    def __init__(self):
        self.code = 0
        self.name = ""
        self.country = ""
        self.continent = ""
        self.timezone = ""
        self.coordinates = []
        self.population = 0
        self.region = "" 
```

所以我想遍历每个地铁并将数据放入相应的`Metro`对象中，然后将该对象放入 Python 对象数组中......如何循环遍历 JSON 地铁？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T19:19:32.320

如果您总是获得相同的密钥，您可以使用它`**`来轻松地构建您的实例。如果您只是使用它来保存值，那么制作`Metro`a将简化您的生活：`namedtuple`

```
from collections import namedtuple
Metro = namedtuple('Metro', 'code, name, country, continent, timezone, coordinates,
                   population, region') 
```

然后简单地

```
import json
data = json.loads('''...''')
metros = [Metro(**k) for k in data["metros"]] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T20:10:04.027

这相对容易做到，因为您已经阅读了数据，`json.load()`在这种情况下，它将为“metros”中的每个元素返回一个 Python 字典——只需遍历它并创建`Metro`类实例列表。我修改了方法的调用顺序，`Metro.__init__()`以便更容易从返回的字典中向它传递数据`json.load()`。

由于结果中“metros”列表的每个元素都是一个字典，因此您可以将其传递给 class`Metro`的构造函数，使用`**`符号将其转换为关键字参数。然后构造函数可以将这些值传递给它自己`update()`。`__dict__`

通过以这种方式做事，而不是将 a 之类的东西`collections.namedtuple`用作数据容器，这`Metro`是一个自定义类，它使添加您希望的其他方法和/或属性变得微不足道。

```
import json

class Metro(object):
    def __init__(self, **kwargs):
        self.__dict__.update(kwargs)

    def __str__(self):
        fields = ['    {}={!r}'.format(k,v)
                    for k, v in self.__dict__.items() if not k.startswith('_')]

        return '{}(\n{})'.format(self.__class__.__name__, ',\n'.join(fields))

with open('metros.json') as file:
    json_obj = json.load(file)

metros = [Metro(**metro_dict) for metro_dict in json_obj['metros']]

for metro in metros:
    print('{}\n'.format(metro)) 
```

输出：

```
Metro(
    code='SCL',
    continent='South America',
    coordinates={'S': 33, 'W': 71},
    country='CL',
    name='Santiago',
    population=6000000,
    region=1,
    timezone=-4)

Metro(
    code='LIM',
    continent='South America',
    coordinates={'S': 12, 'W': 77},
    country='PE',
    name='Lima',
    population=9050000,
    region=1,
    timezone=-5) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-21T19:21:56.480

假设您正在使用 json 加载数据，我将在这里使用 namedtuple 列表将数据存储在键“metro”下

```
>>> from collections import namedtuple
>>> metros = []
>>> for e in data[u'metros']:
    metros.append(namedtuple('metro', e.keys())(*e.values()))

>>> metros
[metro(code=u'SCL', name=u'Santiago', country=u'CL', region=1, coordinates={u'S': 33, u'W': 71}, timezone=-4, continent=u'South America', population=6000000), metro(code=u'LIM', name=u'Lima', country=u'PE', region=1, coordinates={u'S': 12, u'W': 77}, timezone=-5, continent=u'South America', population=9050000)]
>>> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-21T19:18:13.377

使用库[http://docs.python.org/2/library/json.html](http://docs.python.org/2/library/json.html)中的 json 模块将 json 转换为 Python 字典

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-21T19:24:09.147

也许像

```
import json
data = json.loads(<json string>)
data.metros = [Metro(**m) for m in data.metros]

class Metro(object):
    def __init__(self, **kwargs):
        self.code = kwargs.get('code', 0)
        self.name = kwargs.get('name', "")
        self.county = kwargs.get('county', "")
        self.continent = kwargs.get('continent', "")
        self.timezone = kwargs.get('timezone', "")
        self.coordinates = kwargs.get('coordinates', [])
        self.population = kwargs.get('population', 0)
        self.region = kwargs.get('region', 0) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T19:28:43.993

```
In [17]: def load_flat(data, inst):
   ....:     for key, value in data.items():
   ....:         if not hasattr(inst, key):
   ....:             raise AttributeError(key)
   ....:         else:
   ....:             setattr(inst, key, value)
   ....:             

In [18]: m = Metro()

In [19]: load_float(data['metros'][0], m)

In [20]: m.__dict__
Out[20]: 
{'code': 'SCL',
 'continent': 'South America',
 'coordinates': {'S': 33, 'W': 71},
 'country': 'CL',
 'name': 'Santiago',
 'population': 6000000,
 'region': 1,
 'timezone': -4} 
```

它不仅非常易读且非常明确，而且还提供了一些基本的字段验证（在不匹配的字段上引发异常等）

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-21T19:22:02.860

我会尝试[ast](http://docs.python.org/2/library/ast.html)。就像是：

```
metro = Metro()
metro.__dict__ = ast.literal_eval(a_single_metro_dict_string) 
```

# java - 使用 Java 代码进行 Storm 拓扑重新平衡

> ID：15010420
> 
> 赞同：6
> 
> 时间：2013-02-21T19:14:36.557
> 
> 标签：java, apache-kafka, apache-storm, topology, apache-zookeeper

我正在尝试重新平衡使用 KafkaSpout 的 Storm 拓扑。我的代码是：

```
 TopologyBuilder builder = new TopologyBuilder();
    Properties kafkaProps = new Properties();
    kafkaProps.put("zk.connect", "localhost:2181");
    kafkaProps.put("zk.connectiontimeout.ms", "1000000");
    kafkaProps.put("groupid", "storm");

    builder.setSpout( "kafkaSpout" , new KafkaSpout(kafkaProps, "test"), 3);
    builder.setBolt( "eventBolt", new EventBolt(), 2 ).shuffleGrouping( "kafkaSpout", "eventStream" );
    builder.setBolt( "tableBolt", new TableBolt(), 2 ).shuffleGrouping( "kafkaSpout", "tableStream");

    Map<String, Object> conf = new HashMap<String, Object>();
    conf.put(Config.TOPOLOGY_DEBUG, true);

    LocalCluster cluster = new LocalCluster();
    cluster.submitTopology("test", conf, builder.createTopology());

    Utils.sleep( 1000*5 );

    List<TopologySummary> topologySummaries = cluster.getClusterInfo().get_topologies();
    for ( TopologySummary summary : topologySummaries ) {
        StormTopology topology = cluster.getTopology( summary.get_id() );
        RebalanceOptions options = new RebalanceOptions();
        options.set_wait_secs( 0 );
        options.set_num_workers( 4 );

        for ( String name : topology.get_bolts().keySet() ) {
            System.err.println( name + "   " + topology.get_bolts().get(name).get_common().get_json_conf() );
            options.put_to_num_executors( name , 5);
        }
        for ( String name : topology.get_spouts().keySet() ) {
            System.err.println( name + "   " + topology.get_spouts().get(name).get_common().get_json_conf() );
            options.put_to_num_executors( name , 5);
        }

        cluster.rebalance( summary.get_name() , options);
    } 
```

但是，在重新平衡期间，会显示以下错误跟踪：

```
10341 [storm_rishabh-1361473654345-95461d10_watcher_executor] INFO  kafka.consumer.ZookeeperConsumerConnector - storm_rishabh-1361473654345-95461d10 begin rebalancing consumer storm_rishabh-1361473654345-95461d10 try #1
10341 [storm_rishabh-1361473654345-3b26ed76_watcher_executor] INFO kafka.consumer.ZookeeperConsumerConnector - storm_rishabh-1361473654345-3b26ed76 begin rebalancing consumer storm_rishabh-1361473654345-3b26ed76 try #1
10342 [storm_rishabh-1361473654345-95461d10_watcher_executor] ERROR kafka.consumer.ZookeeperConsumerConnector - storm_rishabh-1361473654345-95461d10 error during syncedRebalance
java.lang.NullPointerException: null
at kafka.utils.ZkUtils$.getChildrenParentMayNotExist(ZkUtils.scala:181) ~[kafka_2.9.2-0.7.0.jar:na]
at kafka.utils.ZkUtils$.getCluster(ZkUtils.scala:202) ~[kafka_2.9.2-0.7.0.jar:na]
at kafka.consumer.ZookeeperConsumerConnector$ZKRebalancerListener$$anonfun$syncedRebalance$1.apply$mcVI$sp(ZookeeperConsumerConnector.scala:447) ~[kafka_2.9.2-0.7.0.jar:na]
at scala.collection.immutable.Range.foreach$mVc$sp(Range.scala:78) ~[scala-library-2.9.2.jar:na]
at kafka.consumer.ZookeeperConsumerConnector$ZKRebalancerListener.syncedRebalance(ZookeeperConsumerConnector.scala:444) ~[kafka_2.9.2-0.7.0.jar:na]
at kafka.consumer.ZookeeperConsumerConnector$ZKRebalancerListener$$anon$1.run(ZookeeperConsumerConnector.scala:401) ~[kafka_2.9.2-0.7.0.jar:na]
10342 [storm_rishabh-1361473654345-3b26ed76_watcher_executor] ERROR kafka.consumer.ZookeeperConsumerConnector - storm_rishabh-1361473654345-3b26ed76 error during syncedRebalance
java.lang.NullPointerException: null
at kafka.utils.ZkUtils$.getChildrenParentMayNotExist(ZkUtils.scala:181) ~[kafka_2.9.2-0.7.0.jar:na]
at kafka.utils.ZkUtils$.getCluster(ZkUtils.scala:202) ~[kafka_2.9.2-0.7.0.jar:na]
at kafka.consumer.ZookeeperConsumerConnector$ZKRebalancerListener$$anonfun$syncedRebalance$1.apply$mcVI$sp(ZookeeperConsumerConnector.scala:447) ~[kafka_2.9.2-0.7.0.jar:na]
at scala.collection.immutable.Range.foreach$mVc$sp(Range.scala:78) ~[scala-library-2.9.2.jar:na]
at kafka.consumer.ZookeeperConsumerConnector$ZKRebalancerListener.syncedRebalance(ZookeeperConsumerConnector.scala:444) ~[kafka_2.9.2-0.7.0.jar:na]
at kafka.consumer.ZookeeperConsumerConnector$ZKRebalancerListener$$anon$1.run(ZookeeperConsumerConnector.scala:401) ~[kafka_2.9.2-0.7.0.jar:na]
10342 [storm_rishabh-1361473654345-95461d10_watcher_executor] INFO  kafka.consumer.ZookeeperConsumerConnector - storm_rishabh-1361473654345-95461d10 stopping watcher executor thread for consumer storm_rishabh-1361473654345-95461d10
10343 [storm_rishabh-1361473654345-3b26ed76_watcher_executor] INFO  kafka.consumer.ZookeeperConsumerConnector - storm_rishabh-1361473654345-3b26ed76 stopping watcher executor thread for consumer storm_rishabh-1361473654345-3b26ed76 
```

有人可以告诉我可能是什么问题吗？我是否需要在 kafkaSpout 中定义更多内容，以便在重新平衡时正确关闭然后重新启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:03:36.767

`LocalCluster`在（出于开发目的）运行时，我遇到了同样的问题。我更改了我的测试配置 YAML 以将工作人员的数量减少到 1：

```
topology.workers: 1 
```

这纠正了问题。我还没有尝试在实际的分布式集群上运行它，所以我不知道这是否只是在`LocalCluster`模式下运行的产物。

（在我的代码中，我从不调用`LocalCluster.rebalance`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-28T07:38:54.547

使用来自主管或 nimbus 节点的风暴重新平衡命令。

例如，storm rebalance mytopology -n 5 -e blue-spout=3 -e yellow-bolt=10。

请参考这个网站。 [www.michael-noll.com。](http://www.michael-noll.com/blog/2012/10/16/understanding-the-parallelism-of-a-storm-topology/)

# android - 如何在 Android 中维护软键盘和刷新布局

> ID：15010433
> 
> 赞同：1
> 
> 时间：2013-02-21T19:16:08.360
> 
> 标签：android, android-edittext, android-softkeyboard, android-configchanges

当设备旋转时，我有基于纵向/横向的不同布局。所以我不能把这条线放在清单中：

```
android:configChanges="orientation|screenSize|keyboardHidden" 
```

但是，如果用户在一个`EditText`字段中并且键盘不在，并且在该字段中填充了文本，然后他们旋转设备，键盘隐藏并且文本丢失（让用户感到沮丧）。

有没有适当的方法来处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:23:38.367

为什么不能使用`android:configChanges`然后覆盖`onConfigurationChanged`然后将 EditText 中的任何内容存储在临时变量中，调用 UI 初始化方法（从 onCreate 中取出 findViewById 并将其放在单独的方法中），然后将 EditText 设置为临时变量。

这是我为按钮所做的示例

`@Override`

```
public void onConfigurationChanged(Configuration newConfig){
    super.onConfigurationChanged(newConfig);
    setContentView(R.layout.main);
    Log.i("configChange", "configChange");      
    String tmp = connect.getText().toString();
    boolean onTmp = on.isEnabled();
    boolean offTmp = off.isEnabled();
    boolean connTmp = reconnect.isEnabled();
    InitializeUI();
    connect.setText(tmp);
    on.setEnabled(onTmp);
    off.setEnabled(offTmp);
    reconnect.setEnabled(connTmp);
} 
```

# iphone - 在“等待上传”时添加应用内购买

> ID：15010437
> 
> 赞同：3
> 
> 时间：2013-02-21T19:16:14.700
> 
> 标签：iphone, ios, in-app-purchase, app-store-connect

我正在开发我的第一个包含应用内购买的应用。该应用程序经过测试并且工作正常。我在 iTunes Connect 中的应用内购买是“准备提交”，而我的应用状态是“等待上传”。我还没有为此应用程序提交二进制文件。

当我在 iTunes Connect 中选择我的应用程序的第一个（也是唯一一个）版本（即“等待上传”）并向下滚动到“应用内购买”部分时，我看到以下消息：“应用内购买不能被添加到此版本，因为它已经提交审核。要管理您的应用内购买，请返回应用摘要页面并单击管理应用内购买按钮。

我想我应该看到我在该部分中列出的应用内购买。是否有可能因为我在将应用内购买添加到 iTunes Connect**之前选择了“准备上传二进制文件”而被忽略了？**我已经阅读了 Apple 的文档，但找不到任何关于这个问题的参考资料。

我想知道应用程序上线时是否可以使用应用内购买。我是否需要从“等待上传”中回溯才能添加它？如果是这样，如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T10:06:35.203

好的，我在这里找到了答案：[https ://stackoverflow.com/a/10366377/700769](https://stackoverflow.com/a/10366377/700769)

我提交了一个二进制文件，然后自己拒绝了它。我的应用状态更改为“开发者被拒绝”，并且我能够按预期添加应用内购买。

# c# - wpf datagrid 专注于 selectemItem

> ID：15010444
> 
> 赞同：0
> 
> 时间：2013-02-21T19:16:32.307
> 
> 标签：c#, wpf, datagrid, focus

我以编程方式在数据网格中选择项目。问题是我必须手动向下滚动到 selectItem。我需要自动执行此操作。到目前为止，我已经尝试了很多东西，但没有什么对我有用......

数据网格：

```
 <DataGrid x:Name="coreServiceLogDataGrid"
              ItemsSource="{Binding}"
              IsReadOnly="True"
              RowDetailsVisibilityMode="VisibleWhenSelected"
              SelectionMode="Single"
              IsSynchronizedWithCurrentItem="True"
              SelectedItem="{Binding Path=CurrentCoreServiceLogDataItem,Source={StaticResource synchronizer}, Mode=TwoWay}"
              GotFocus="coreServiceLogDataGrid_GotFocus_1"
              Style="{DynamicResource ResourceKey=dataGridStyle}"
              ...>
              ...
    </DataGrid> 
```

和后面的代码`GotFocus`：

```
 private void coreServiceLogDataGrid_GotFocus_1(object sender, System.Windows.RoutedEventArgs e) {
          if (coreServiceLogDataGrid.SelectedItem != null) {
            coreServiceLogDataGrid.ScrollIntoView(coreServiceLogDataGrid.SelectedItem);
          }
         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:26:05.770

我过去遇到过类似的问题。我已经这样做了，`DataGridRow`但它是基于在`TreeViewItem`这个[站点](http://www.codeproject.com/Articles/28959/Introduction-to-Attached-Behaviors-in-WPF)上找到的附加行为。

这是代码`code-behind`：

```
/// <summary>
/// Exposes attached behaviors that can be
/// applied to DataGridRow objects.
/// </summary>
public static class DataGridRowBehavior
{
    #region IsBroughtIntoViewWhenSelected

    public static bool GetIsBroughtIntoViewWhenSelected(DataGridRow dataGridRow)
    {
        return (bool)dataGridRow.GetValue(IsBroughtIntoViewWhenSelectedProperty);
    }

    public static void SetIsBroughtIntoViewWhenSelected(
      DataGridRow dataGridRow, bool value)
    {
        dataGridRow.SetValue(IsBroughtIntoViewWhenSelectedProperty, value);
    }

    public static readonly DependencyProperty IsBroughtIntoViewWhenSelectedProperty =
        DependencyProperty.RegisterAttached(
        "IsBroughtIntoViewWhenSelected",
        typeof(bool),
        typeof(DataGridRowBehavior),
        new UIPropertyMetadata(false, OnIsBroughtIntoViewWhenSelectedChanged));

    static void OnIsBroughtIntoViewWhenSelectedChanged(
      DependencyObject depObj, DependencyPropertyChangedEventArgs e)
    {
        DataGridRow item = depObj as DataGridRow;
        if (item == null)
            return;

        if (e.NewValue is bool == false)
            return;

        if ((bool)e.NewValue)
            item.Selected += OnDataGridRowSelected;
        else
            item.Selected -= OnDataGridRowSelected;
    }

    static void OnDataGridRowSelected(object sender, RoutedEventArgs e)
    {
        // Only react to the Selected event raised by the TreeViewItem
        // whose IsSelected property was modified. Ignore all ancestors
        // who are merely reporting that a descendant's Selected fired.
        if (!Object.ReferenceEquals(sender, e.OriginalSource))
            return;

        DataGridRow item = e.OriginalSource as DataGridRow;
        if (item != null)
            item.BringIntoView();
    }

    #endregion // IsBroughtIntoViewWhenSelected
} 
```

在您的`XAML`中，将此代码放在您的标签之间`DataGrid`：

```
<DataGrid.ItemContainerStyle>
    <Style TargetType="{x:Type DataGridRow}">
        <Setter Property="uc:DataGridRowBehavior.IsBroughtIntoViewWhenSelected" Value="True" />
    </Style>
</DataGrid.ItemContainerStyle>
/// note: uc is a namespace I have defined for where the DataGridRowBehavior class is located 
```

附加评论：我有`SelectionUnit`设置为`FullRow`和`SelectionMode`设置为`Single`。我不确定更改这些属性是否会影响这是否会起作用。

# jquery - jquery RESTful Web 服务

> ID：15010445
> 
> 赞同：0
> 
> 时间：2013-02-21T19:16:39.480
> 
> 标签：jquery, rest

将以下 url 粘贴到地址栏会提示输入用户名和密码。一旦通过身份验证，它就会以 json 格式发送结果。 [http://metabolomics.pharm.uconn.edu:2480/connect/iimdb](http://metabolomics.pharm.uconn.edu:2480/connect/iimdb)

但是以下代码不起作用。结果警报“失败”。我还尝试对用户名和密码进行硬编码。有人可以发现问题。提前致谢。

```
 <script type="text/javascript" src="jquery-1.9.1.min.js"></script>
        <script type="text/javascript">
        $(document).ready(function(){   
            var userName = $('#username').val();
            var password = $('#password').val();
            var submitButton = $('#submitButton');
            submitButton.click(function(){
    $.ajax( {
        type: 'Get',
    url : 'http://metabolomics.pharm.uconn.edu:2480/connect/iimdb',
    dataType : 'json',
        username : userName,
        password : password,
    success : function(data) {
        alert("success");
        response(data);
    },
        error : function()
        {
        alert("failed");
        }
});
    });
        }); 
        </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:25:39.453

从客户端您不能向任何其他域（甚至不是相同的域，不同的端口，如：81）然后主机本身发出请求。这是[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。

如果您希望实现此身份验证，则需要将 AJAX 发布在您的主机（应用程序运行的地方）上，并且应用程序本身需要将此请求传播到所需的地址 - 在您的情况下为`metabolomics`.

收到答复后，您可以以任何您喜欢的方式回复客户的 ajax 请求。

如果您真的想坚持您的 JavaScript 格式，可以使用一种解决方法来代理此类请求，请参阅[Q: Make cross-domain ajax JSONP request with jQuery](https://stackoverflow.com/questions/11736431/make-cross-domain-ajax-jsonp-request-with-jquery?lq=1)和[Q: Ajax cross domain call](https://stackoverflow.com/questions/2558977/ajax-cross-domain-call?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T10:20:46.763

您还可以使用[$.getJSON()](http://api.jquery.com/jQuery.getJSON/)，它没有“同源策略”的问题。

相当于：

```
$.ajax({
  dataType: "json",
  url: url,
  data: data,
  success: success
}); 
```

# asp.net - 编译器错误消息：CS0103：当前上下文中不存在该名称

> ID：15010446
> 
> 赞同：0
> 
> 时间：2013-02-21T19:16:40.870
> 
> 标签：asp.net, compiler-errors

我收到一条错误消息，提示 Compiler Error Message: CS0103: The name 'ActionIcon' does not exist in the current context

但 ActionIcon 确实存在于我当前的内容中。

它在这里定义

```
<input type="image" ID="ActionIcon" class="JSActionIcon" 
      runat="server" Width="13" Height="13" src="image.gif" /> 
```

我试着把它变成一个像这样的asp图像

```
<asp:Image ID="ActionIcon" CssClass="JSActionIcon" 
     runat="server" ImageUrl="image.gif"/> 
```

但这不起作用....这是它抱怨名称“ActionIcon”在当前上下文中不存在的地方...

```
<td>&nbsp;
    <span style="text-align:center;">

        <a class="LinkButtonBlueSmall" name="ApproveBtn"
           onclick="ChangeOne('Approve','<%#ActionIcon.ClientID %>');">
                  Approve</a>

        <a class="LinkButtonOrangeSmall" name="RejectBtn"
           onclick="ChangeOne('Reject', '<%#ActionIcon.ClientID %>');">
                    Reject</a>

        <a class="LinkButtonMutedSmall" name="ClearBtn"
           onclick="ChangeOne('Clear', '<%#ActionIcon.ClientID %>');">
                    Clear</a>

     </span>
</td> 
```

任何人都对为什么会出现错误有任何想法。

我在一个 ListView 内的 ItemTemplate 内有这个，它在一个 ContentTemplate 内，它在一个更新面板内。

# html - 跨越页面的整个宽度

> ID：15010447
> 
> 赞同：0
> 
> 时间：2013-02-21T19:16:55.483
> 
> 标签：html, css, twitter-bootstrap

所以我使用 Bootstrap 来编写带有页脚的页面。这是页脚的 HTML：

```
<div class="row">
             <div class="footer1 span12">
                 <span class="offset2">&copy 2013 Me</span>
            </div>
        </div> 
```

这是它的CSS：

```
.footer1{
    margin-top:520px;
    background-color:#EFEFEF;
    font-size:.5em;
    padding-top:25px;
    padding-bottom:25px;
    border-top:1px solid black;
    border-bottom:1px solid black;
} 
```

然而由于某种原因，页脚没有跨越页面的整个宽度。我有一个 12 列的导航栏，它远远超出了页脚的宽度。页脚看起来只跨越 8 或 10 列。知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:22:36.087

像下面这样使用`row-fluid`，不要把它放在`container`div 内，否则它不会跨越全角。

```
<div class="container">
 dont put footer inside it 
 </div>

<div class="row-fluid">
         <div class="footer1 span12">
             <span class="offset2">&copy 2013 Me</span>
        </div>
    </div> 
```

# java - 如何为返回键设置一个新的监听器？

> ID：15010448
> 
> 赞同：2
> 
> 时间：2013-02-21T19:17:03.510
> 
> 标签：java, android, eclipse, keyboard

我希望当用户按下 android 键盘上的后退按钮时，活动将关闭（并显示预览活动），除此之外，我希望应用程序做另一件事。
当我尝试按照此处的说明进行操作时： [android 中是否有默认的返回键（在设备上）侦听器？](https://stackoverflow.com/questions/2592037/is-there-a-default-back-keyon-device-listener-in-android)当我按下后退按钮时，活动关闭并再次打开。当我再次按下后退按钮时，活动关闭并打开预览活动。
有人知道为什么吗？有人对此有其他想法吗？

这是我尝试过的一些代码： 选项一：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if(keyCode == KeyEvent.KEYCODE_BACK){
        //Show the dialog and get the response
        ArrayList<User> lstChosenContacts = new ArrayList<User>();
        for(int i = 0; i < this.lstContacts.size(); i++) {
            if(this.lstContacts.get(i).getIsChecked()) {
                lstChosenContacts.add(this.lstContacts.get(i).getUserContact());
            }
        }
        Intent data = new Intent();
        data.putExtra("lstChosenContacts", lstChosenContacts);
     setResult(RESULT_OK,data);

    }
    return super.onKeyDown(keyCode, event);
} 
```

选项 2：

```
@Override
public void onBackPressed() {
    ArrayList<User> lstChosenContacts = new ArrayList<User>();
    for(int i = 0; i < this.lstContacts.size(); i++) {
        if(this.lstContacts.get(i).getIsChecked()) {
            lstChosenContacts.add(this.lstContacts.get(i).getUserContact());
        }
    }
    Intent data = new Intent();
    data.putExtra("lstChosenContacts", lstChosenContacts);
     setResult(RESULT_OK,data);
    super.onBackPressed();
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:51:38.163

尝试这个：

```
public boolean dispatchKeyEvent(KeyEvent event) {
            int action = event.getAction();
            int keyCode = event.getKeyCode();

            switch (keyCode) {
            case KeyEvent.KEYCODE_BACK:
                if (action == KeyEvent.ACTION_DOWN ){ 
            //Do something in the back button       
            Log.d("BackButton","back");
                }
                return true;
            default:
                return super.dispatchKeyEvent(event);
              }
          } 
```

# svn - 轮询詹金斯工作中的条件svn结帐

> ID：15010449
> 
> 赞同：4
> 
> 时间：2013-02-21T19:17:05.663
> 
> 标签：svn, jenkins, jenkins-plugins

我试图根据条件阻止 svn 轮询 Jenkins 作业的 svn 结帐。结帐后执行预步骤，并通过 svn 轮询触发此作业。请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T13:57:46.330

有一个插件允许在 SVN 结帐之前执行一个步骤
[https://wiki.jenkins-ci.org/display/JENKINS/pre-scm-buildstep](https://wiki.jenkins-ci.org/display/JENKINS/pre-scm-buildstep)
~~但是，即使那些 pre-scm 也不会阻止工作继续步骤失败。~~如果此预构建步骤失败，最新版本允许构建失败。

我能想到的一件事是设置 2 个工作。一个作业的任务是单独轮询 SVN，如果满足条件，则使用第二个作业触发构建。第二个作业甚至可以使用“自定义工作区”选项并使用第一个作业的工作区来防止额外的结帐

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-11T15:51:13.593

我不知道它是否仍然相关，但我可能已经找到了解决此问题的方法。假设您有一个 SVN 存储库，其根名为“svn_root”，在它下面有您的主干文件夹，您的标签文件夹，您的分支文件夹等。
您只希望 Jenkins 轮询您的“svn_root”，而不必检查您的主干/标签/分支的内容。为此，在您的工作配置中，在颠覆部分中，输入您的“存储库 url” ' 将您的高级 url 框起来（例如：svn://ip/svn_root）并在 'repository depth' 下拉列表中选择 'immediates'。当作业开始时，jenkins 只会检查高级文件夹（svn_root）并触发只有当它发生变化时。例如，如果主干中有一个提交，高级文件夹的主干条目会改变，并且工作将被触发。
这完全对我有用。
希望我有帮助
祝你好运

# rest - WSO2 ESB：记录并将来自 RDF REST 服务的响应转换回 SOAP

> ID：15010453
> 
> 赞同：0
> 
> 时间：2013-02-21T19:17:21.910
> 
> 标签：rest, soap, wso2, wso2esb

我正在为我的公司开发 WSO2 ESB POC，其中涉及通过 ESB 上的 SOAP 端点公开内部 RESTful 服务。我已阅读与 SOAP-REST 中介相关的所有主题和博客文章，但仍然找不到答案。我的 RESTful 服务返回“application/rdf+xml”消息格式。这是我的顺序：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="CQProxy" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>
         <send>
            <endpoint>
               <address uri="http://<MYURL>/cqweb/oslc/repo/eraprototype/db/CQT_T/simpleQuery/16783484?oslc.select=dcterms:title,cq:CM_Label,dcterms:type,cq:Assigned_To,oslc_cm:status,cq:AutoDeployment,cq:SentToEADS_By&oslc.where=oslc:shortTitle=CQT_T00000131" format="get"/>
               <property xmlns:ns="http://org.apache.synapse/xsd" name="Authorization" expression="fn:concat('Basic ', base64Encode('user:password'))" scope="transport"/>
               <property name="OSLC-Core-Version" value="2.0" scope="transport"/>
               <property name="Accept" value="application/rdf+xml" scope="transport"/>
            </endpoint>
         </send>
      </inSequence>
      <outSequence>
         <log level="full"/>
         <send/>
      </outSequence>
   </target>
   <publishWSDL key="gov:/services/cqproxy/CQProxy.wsdl">
      <resource location="CQProxy.xsd" key="gov:/services/cqproxy/CQProxy.xsd"/>
      <resource location="eads_ws.xsd" key="gov:/services/eads_ws/eads_ws.xsd"/>
   </publishWSDL>
   <description></description>
</proxy> 
```

我能够成功地将请求发送到 RESTful 服务。但是我的 OUT 序列无法处理“application/rdf+xml”响应。日志显示以下错误：

```
INFO {org.apache.axis2.builder.BuilderUtil} -  OMException in getSOAPBuilder {org.apache.axis2.builder.BuilderUtil}
org.apache.axiom.soap.SOAPProcessingException: First Element must contain the local name, Envelope , but found RDF 
```

两个问题：
1\. 如何在 Axis2 对其应用 SOAP 转换之前记录从 REST 服务接收到的实际响应？我的日志中介只生成空的 SOAP 信封。

```
INFO {org.apache.synapse.mediators.builtin.LogMediator} -  To: http://www.w3.org/2005/08/addressing/anonymous, WSAction: , SOAPAction: , MessageID: urn:uuid:4c06fcb9-4e45-4fb3-bc5a-4350e3d86533, Direction: response, Envelope: <?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope"><soapenv:Body/></soapenv:Envelope> {org.apache.synapse.mediators.builtin.LogMediator} 
```

2\. 如何从 RDF+XML 转换回 SOAP 格式？我应该为此在 OUT 序列中使用 XSLT 中介吗？

感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:16:08.720

我编写了一个简单的 Nodejs 服务来发送 RDF 格式的消息。这是我使用 Advanced Rest Client Chrome 扩展程序调用它时的样子。

![调用 rdf 端点](../Images/7550172627c51bb7651686fcd26170c6.png)

然后我在 ESB 4.5.1 中创建了一个代理服务。这是我的代理服务配置，

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="TestProxy" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>
         <log level="full"/>
         <send>
            <endpoint>
               <address uri="http://localhost:8080/" format="pox"/>
            </endpoint>
         </send>
         <log level="full"/>
         <drop/>
      </inSequence>
      <outSequence>
         <log level="full"/>
         <send/>
      </outSequence>
   </target>
   <description></description>
</proxy> 
```

然后我使用 tryIt 工具向这个代理服务发送一条 XML 消息。我正在使用日志中介来记录传入的 XML 消息。

在输出序列中，我再次使用日志中介，我可以看到 RDF 被记录在那里。

您尝试使用的 ESB 版本是什么？

# ios - UIAlertview 在后台线程加载数据时挂起

> ID：15010458
> 
> 赞同：0
> 
> 时间：2013-02-21T19:17:35.797
> 
> 标签：ios, animation, uialertview, uiactivityindicatorview

我有一个名为“刷新数据”的 UIBarButtonItem。当用户单击它时，应用程序应刷新其数据。单击该按钮时发生的情况是启动 Web 服务并带来 xml 数据，它们的顺序为 30000-40000 条记录。所以为了防止 UI 挂起，我写了一个后台线程并在那里加载。

```
- (void)refreshDataAction
{
NSLog(@"Refresh Data");
//Put up an alert box indicating user to wait while data is loading.

UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Data is Loading"
                                                        message:@"Please wait while data is being refreshed."
                                                       delegate:self
                                              cancelButtonTitle:@"OK"
                                          otherButtonTitles:nil, nil];
alert.tag = 10;
[alert show];
 }

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
NSLog(@"hit in clickedbuttonatindex alertview at 259");
self.refreshActIndicator.hidden = NO;
[self.refreshActIndicator startAnimating];
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,
                                         (unsigned long)NULL), ^(void) {
    [self getAllCustomerValues];

    NSError *nwerror = nil;
    if (![self.secondMOC save:&nwerror])
    {
        NSLog(@"209 Failed to save second MOC");
    }
    else
    {
        //NSLog(@"saved success");
    }
 });
} 
```

就像您可以看到警报视图一样。我单击“确定”，该框仍然“变黑”并挂在屏幕上。然后 7-8 秒后，该框消失，活动指示器开始动画。我的目标是得到这样的东西。1.用户点击刷新数据按钮。2.警报视图出现。3.用户点击确定。4.警报框消失，后台线程立即开始工作，我看到活动指示器工作/动画。

用户将知道在活动指示器动画时要等待。那么我如何让应用程序在用户单击“确定”后立即开始动画并且警报视图确定不会变黑。我清楚了吗？如果您需要更多信息，请询问。谢谢

编辑：该屏幕在当天第一次加载时有一个后台线程在运行。在此之前有一个屏幕。在它上面我有继续按钮并单击它启动后台线程，它与这里的这个完全一样。我不会杀死它或任何东西。

编辑2：

```
 - (void)refreshDataAction
   {
NSLog(@"Refresh Data");
self.txtCustomerSearch.text =@"";
[self cleanUPPreviousLabels];

//Put up an alert box indicating user to wait while data is loading.

UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Data is Loading"
                                                message:@"Please wait while data is being refreshed."
                                               delegate:self
                                      cancelButtonTitle:@"OK"
                                      otherButtonTitles:nil, nil];
//alert.tag = 10;
//[alert show];
[alert performSelectorOnMainThread:@selector(show) withObject:nil waitUntilDone:FALSE];

NSLog(@"hit in willpresenet alertview at 221");
    self.refreshActIndicator.hidden = NO;
    [self.refreshActIndicator startAnimating];
NSLog(@"Dispatching");

//Disable the view and all the other controls
self.txtCustomerSearch.userInteractionEnabled =NO;
self.txtCustomerSearch.enabled =NO;
self.btnSearch.enabled =NO;
self.btnSearch.userInteractionEnabled = NO;
self.scrollView.userInteractionEnabled = NO;
//self.view.userInteractionEnabled =NO;
self.chkButton.enabled = NO;

[self deletePreviousValues]; 

dispatch_async(dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
    NSLog(@"Getting customer values");
    [self getAllCustomerValues];
    NSLog(@"Got customer values");

    NSError *nwerror = nil;
    if (![self.secondMOC save:&nwerror])
    {
        NSLog(@"209 Failed to save second MOC");
    }
    else
    {
        //NSLog(@"saved success");
    }

    self.txtCustomerSearch.userInteractionEnabled = YES;
    self.txtCustomerSearch.enabled =YES;
    self.btnSearch.enabled =YES;
    self.btnSearch.userInteractionEnabled = YES;
    self.scrollView.userInteractionEnabled = YES;
    self.view.userInteractionEnabled =YES;
    self.chkButton.enabled = YES;

    [self.refreshActIndicator stopAnimating];

    NSLog(@"Saved");

});
NSLog(@"Dispatched"); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:49:50.347

您说这一切都发生在后台线程上-确保在主线程上加载 UIAlertView：

```
//[alert show];
[alert performSelectorOnMainThread:@selector(show) withObject:nil waitUntilDone:FALSE]; 
```

这可能会解决问题。您的异步调用实际上发生在运行循环中的当前线程上（因为它是后台线程），阻止了您尝试显示的警报视图（在同一个运行循环中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:40:32.697

使用`alertView:didDismissWithButtonIndex:`而不是`alertView:clickedButtonAtIndex:`. 这样，当您的代码被调用时，警报已经被解除。

问题 - 为什么要打扰警报视图？用户知道他们点击了“刷新”图标。您已经显示了一个活动指示器，并且警报不会让用户有机会取消刷新。

更新：对 dispatch_async 的调用似乎有点不对劲。尝试这个：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    [self getAllCustomerValues];

    NSError *nwerror = nil;
    if (![self.secondMOC save:&nwerror]) {
        NSLog(@"209 Failed to save second MOC");
    } else {
        //NSLog(@"saved success");
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T19:55:41.367

添加一些 NSLog 以查看它挂起的位置并停止活动指示器以查看整个挂起是否由于调度而发生可能会有所帮助。

```
 NSLog(@"hit in clickedbuttonatindex alertview at 259");
 self.refreshActIndicator.hidden = NO;
 [self.refreshActIndicator startAnimating];
 NSLog(@"Dispatching");
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,
                                     (unsigned long)NULL), ^(void) {
    NSLog(@"Getting customer values");
    [self getAllCustomerValues];
    NSLog(@"Got customer values");

    NSError *nwerror = nil;
    if (![self.secondMOC save:&nwerror])
    {
        NSLog(@"209 Failed to save second MOC");
    }
    else
    {
        //NSLog(@"saved success");
    }
    [self.refreshActIndicator stopAnimating];
    NSLog(@"Saved");
 });
 NSLog(@"Dispatched"); 
```

正在发生的事情是主（UI）队列由于某种原因被停止，这导致事情看起来挂起。因为它已停止，所以即使您告诉它们开始动画，刷新活动指示器之类的东西也不会动画。请记住，您不能异步更新 UI，因此不应使用 secondMOC 导致任何表重新加载数据和 [self getAllCustomerValues]; 不应该做任何 UI 的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T19:22:12.243

尝试改变

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,
                                     (unsigned long)NULL), ^(void) { 
```

到后台优先

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND,
                                     (unsigned long)NULL), ^(void) { 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T20:24:49.353

我们使用 MBProgressHUD ( [https://github.com/jdg/MBProgressHUD](https://github.com/jdg/MBProgressHUD) ) 这使得这种 UI 通知变得容易。通常，您提供一个可以检查*原子*BOOL 值的调用方法。设置HUD时设置BOOL，后台进程完成后清除BOOL，HUD会自动消失。

# python - askopenfilename 处理取消对话

> ID：15010461
> 
> 赞同：9
> 
> 时间：2013-02-21T19:17:44.203
> 
> 标签：python, user-interface, tkinter

我有一个 gui，它在按下按钮时初始化 askopenfilename，但我希望能够解释用户何时在 askopenfilename 对话框中选择取消

这是我处理单击按钮的功能，但 if 语句行似乎不起作用！

```
def openFileClicked(self):
  self.filename=filedialog.askopenfilename()
  if self.filename== None: 
        self.e.config(state= NORMAL)
        self.e.delete(0,END)
        self.e.insert(0,"...")
        self.e.config(state="readonly")
  self.e.config(state= NORMAL)
  self.e.delete(0,END)
  self.e.insert(0, self.filename)
  self.e.config(state="readonly")
  print ((self.filename)) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T23:07:38.090

`.askopenfilename()`取消时返回一个空字符串，而不是无。因此，您可以比较`''`或`False`。为了获得代码示例：

```
def openFileClicked(self):
    self.filename = filedialog.askopenfilename()
    if not self.filename:
        # config...delete...etc.
    # Rest of function 
```

至少我会这样做，你可能有自己的喜好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-11-22T14:20:46.657

我知道这是几年后的事，但我发现了一个相关的怪癖，找不到任何信息。希望这些信息对遇到此答案的任何人都有用。

基本上，如前所述，单击**取消**将返回一个空字符串...除非您实际上先选择/突出显示文件，然后单击取消。这似乎返回一个空元组！！！

使用python 2.6.6（IDK，问RedHat）
运行以下代码产生后续结果

`f_picked = tkFileDialog.askopenfilename() test = type(f_picked) print (test)`
结果：
`<type 'unicode'>`# 未选择任何内容，单击**取消**
`<type 'tuple'>`# 选择文件，单击**取消**
`<type 'str'>`# 选择文件，单击**确定**
`<type 'tuple'>`# 选择多个文件，单击**确定**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-21T01:32:20.503

您可以考虑用户选择取消，如下所示：

```
def openFileClicked(self):
    self.filename = filedialog.askopenfilename()
    # When user select cancel
    if (len(self.filename) == 0): 
        # put your code here in case the user selected cancel

    # Otherwise the user selected a file
    else:
        # put your code here in case the user selected a file 
```

# graphics - 如何将 2.5D 等距立方体纹理转换为可用于 3D 的纹理？

> ID：15010464
> 
> 赞同：3
> 
> 时间：2013-02-21T19:18:06.110
> 
> 标签：graphics, 3d, 2d, isometric

我想以编程方式将[2.5D 等距立方体纹理](http://planar-studios.com/img/blog/isometric-tile2.png)转换为可在 3D 立方体上使用的纹理/纹理。有什么好方法可以做到这一点？我将使用 Direct3D 渲染立方体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:26:50.173

1.  将等距立方体纹理拆分为 3 个子纹理，其中包含左侧、顶部和右侧表面。您将在顶部有一部分左右表面，但无需担心（实际上这种方式效果更好），因为稍后您可以使用调整后的 UV 坐标来平衡。
2.  使用调整后的 UV 坐标创建 3D 表面，其执行类似于拉伸纹理的操作
3.  将这 3 个子纹理应用到实际的 3D 表面并进行渲染。然后你就得到了你的 3D 版本！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-11T19:29:28.513

将等距立方体转换为 3d 模型的问题在于它不是“方形纹理”。将 UV 贴图的角放置在立方体的角上会导致表面的侧面出现锯齿状，显示侧面的片段或“空白”背景。将 UV 放置在内部，使其永远不会看到锯齿状边缘，从而保留边缘的细节。不知何故，等轴测面必须平整，以便与 UV 完美对齐。

等距立方体的侧面可以调整为平坦的。它是立方体的顶部，菱形，不是简单转换的。

# mysql - MySQL：如何使用差异数据更新远程 Web 服务器

> ID：15010467
> 
> 赞同：1
> 
> 时间：2013-02-21T19:18:09.257
> 
> 标签：mysql, mysql-python, database-replication

在我的本地机器上，我维护了几个 InnoDB 表，它们是我的 Web 服务器上的表的镜像副本。每当我有新的或更新的数据时，我都会在本地表上执行。对于更新，通常只针对某些表的几个字段。在本地执行有助于我在暂存前执行数据处理和验证。最后，我想将这些差异数据移动到远程服务器。

我怎样才能最好地完成数据迁移的整个过程。我正在寻找您的意见/经验的几个阶段：

*   从所有表中识别和获取差异数据的命令，
*   在远程站点上，使用此数据更新相应表的命令，
*   如何确保更新的原子性不会破坏用它创建的网页内容的完整性。

我计划将整个过程自动化。将来，可能会有 1000 次这样的更新，因此我希望优化这个时间和大小。

我使用python并计划使用fabric来运行命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:30:05.733

我会尝试使用二进制日志来记录对本地数据库的更改。然后，您只需使用[mysqlbinlog](http://dev.mysql.com/doc/refman/5.5/en/mysqlbinlog.html)工具将二进制日志转换为 SQL 脚本，并将其应用到您的网站。与执行时间点恢复的过程类似。

将本地二进制日志转换为 SQL 后，在本地系统上使用[FLUSH LOGS](http://dev.mysql.com/doc/refman/5.5/en/flush.html)（或[mysqladmin flush-logs ）。](http://dev.mysql.com/doc/refman/5.5/en/mysqladmin.html)这样您就可以准确地知道从哪里停下来，并且可以在下次上传更改时从那里开始。

我不确定以真正原子的方式在 Web 服务器上应用更改。你必须使用交易来做到这一点。您可以将 SQL 脚本夹在 START TRANSACTION 和 COMMIT 之间，但我想确保 binlog 本身不包含事务语句。

另一个比较两个数据库并找出最小更改集的工具是 Percona Toolkit 的[pt-table-sync](http://www.percona.com/doc/percona-toolkit/pt-table-sync.html)。但该工具通常旨在使数据库相同。您的 Web 服务器上可能有不在本地开发人员实例中的生产数据，因此您可能需要过滤到特定表，或者 pt-table-sync 可能具有“插入但不删除”选项或其他内容。我鼓励您仔细阅读文档并在测试实例上进行实验。

# hibernate - hibernate - 当集合是惰性的时调用father.getSons()会发生什么

> ID：15010468
> 
> 赞同：0
> 
> 时间：2013-02-21T19:18:12.243
> 
> 标签：hibernate, jakarta-ee

假设我得到了

```
 class Father{

private Integer fatherId;

@Id
@GeneratedValue(strategy=GenerationType.IDENTITY)
@Column(name="FATHERID", nullable=false)
public Integer getFatherId() {
    return fatherId;
}    

Set<Son> sons;

@OneToMany(fetch=FetchType.LAZY)
@JoinColumn(name="FATHERID")
public Set<Son> getSons() {
    return airlineFlights;
}
} 
```

和儿子

```
 class Son{

Integer sonId
@Id
@GeneratedValue(generator="identity")
@GenericGenerator(name="identity", strategy="identity")
@Column(name="SONID", nullable=false)
public Integer getSonId() {
    return sonId;
}

 Father father;

     @ManyToOne(fetch=FetchType.LAZY)
@JoinColumn(name="FATHERID", nullable=false)
public Father getFather() {
    return father;
}

} 
```

现在让我们假设我得到了这个代码：

```
 Father f = session.load(Father.class, 1);
 f.getSons(); 
```

f 是一个简单的 POJO 并且儿子的集合是惰性的，那么这里会发生什么？gonig 如何进入数据库并查询这些儿子，我们在简单的 JVM 中调用简单的 get，hibernate 如何在那里工作？

**编辑**：调用 getSons() 时会发生什么，你能给出完整的循环吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:25:36.140

它的工作原理与在任何环境中一样。假设存在活动会话，Hibernate 将调用数据库以检索延迟加载的集合。请注意，如果您的会话与用于加载父对象的会话不同，则首先需要父对象`merge`。

至于它是如何工作的——[字节码检测](http://docs.jboss.org/hibernate/core/3.5/reference/en/html/performance.html#performance-fetching)。在幕后，Hibernate 创建一个“代理”对象来包装您的实体，并根据需要从该代理进行方法调用以满足调用者的请求。

***非常粗略地***，会发生这样的事情：

```
Father (FatherProxy) -> Lazy Collection Reference -> Session -> Load Entities 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:25:12.610

您将在日志中看到 2 个查询。第一个加载父亲，然后因为您正在调用 getSons()，它将去获取儿子，因此您将看到第二个查询。

# date - 我应该如何在 Crystal Reports 中显示这个明显很旧的日期？

> ID：15010470
> 
> 赞同：1
> 
> 时间：2013-02-21T19:18:13.613
> 
> 标签：date, crystal-reports, formatting, crystal-reports-xi

我有一个字符串字段，其中日期有时输入为 YYYY-MM-DD，并在 Crystal Report 上显示为日期。我正在使用

```
DateValue ({Table.Field}) 
```

显示日期，然后将日期格式化为 MM/DD/YYYY。这看起来不错，直到我看到 1931 年 10 月 12 日的日期并且发现它与数据库中的内容不匹配：“0010-12-31”。

我知道这只是一个错字，我可以看到日期可能应该是 2010 年 12 月 31 日，但我想显示他们输入的内容。所以，就在这一次，我输入了以下内容：

```
if {Table.Field} = '0010-12-31' then
  Date(0010, 12, 31)
else
  DateValue ({Table.Field}) 
```

当我这样做时，它显示 12/31/10，即使我已请求 4 位数年份。我想我对此很满意，因为它没有那么具有欺骗性。

但是，Crystal 应该如何处理看似很旧的日期呢？

而且，更重要的是，如果日期以不同的格式输入，这是否会令人窒息？我认为会的。

```
if NOT (IsNull({Table.Field})) then
  Date(ToNumber (Left ({Table.Field}, 4)),
       ToNumber (Mid ({Table.Field}, 6, 2)),
       ToNumber (Right ({Table.Field}, 2))
      ) 
```

这确实是一个问题：

在 1) 错误地显示错误日期或 2) 如果自由格式的字符串日期格式不同时报告窒息，是否有第 3 个（和更好的）选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:01:11.780

您可以创建两个公式：一个是日期，一个是字符串。显示“新”日期的日期版本和“旧”日期的字符串一。字符串 one 将根据需要连接值。

```
// {@date_version}
DateValue ({Table.Field}) 
```

抑制逻辑：`CurrentFieldValue<Date(1980,1,1)`

```
// {@stirng_version}
{Table.Field}[6 to 7] + "/" + {Table.Field}[9 to 10] + "/19??" 
```

抑制逻辑：`{@date_version}>Date(1980,1,1)`

# coldfusion - 电子表格单元格格式

> ID：15010472
> 
> 赞同：2
> 
> 时间：2013-02-21T19:18:22.833
> 
> 标签：coldfusion, coldfusion-9, cfspreadsheet

**最后编辑**

谁能看到我做错了什么？以下是我的期望和观察：

我希望名为“搜索参数”的工作表具有粗体红色字体的单元格 a1。我得到了我的期望。

我希望有一个名为“4D，CCCU，SDAU”的工作表，其中的数据从第 3 行开始。我明白了。

我希望第 3 行有文本“bold font 3 green true”，并且是粗体绿色字体。我得到了文本，但我得到了粗体红色字体，它与另一张表中的单元格 a1 匹配。实际上，此单元格中的格式将始终与另一张表中的单元格 a1 匹配。

我希望剩余的单元格具有像“normal font 4 blue true”这样的值，并且是蓝色粗体。我得到了值，但根本没有格式。

我的 writedumps 总是向我展示我期望的值。

代码如下。AddNewRow 是一个 udf。

重申一下，问题是，为什么单元格没有按照我期望的方式格式化？

```
 <cfscript>
    FileName = "d:\dw\dwweb\work\Antibiotics.xls";

    SearchParameters = QueryNew("Item,Value","varchar,varchar");
    AddNewRow(SearchParameters, "Item,Value","Date Range,#DateRange#");

    SearchParametersSheet = Spreadsheetnew("SearchParameters");
    SpreadSheetAddRows(SearchParametersSheet, SearchParameters);
    SheetNumber = 1;
    DrugsByCategory = QueryNew("Item,font","varchar,varchar");
    format1 = StructNew();
    format1.bold = true;
    format1.color = "red";
    SpreadsheetFormatCell(SearchParametersSheet, format1, 1, 1); 
    </cfscript>

    <cfspreadsheet action="write" filename="#FileName#"
                name="SearchParametersSheet"  
    sheet=1 sheetname="Search Parameters" overwrite=true>

    <cfoutput query="AllDrugs" group="CategoryName">
    <cfset AddNewRow(DrugsByCategory,"Item#Chr(30)#font"
                 ,"#CategoryName##Chr(30)#bold",Chr(30))>
    <cfoutput>
    <cfset AddNewRow(DrugsByCategory,"Item#Chr(30)#font"
                 ,"#StandardSpelling##Chr(30)#normal",Chr(30))>
    </cfoutput>
    </cfoutput>

    <cfquery name="units" dbtype="query">
    select distinct unit
    from initialresults
    </cfquery>

    <cfloop query="units">
    <cfscript>
    SheetNumber ++;
    ThisSpreadSheet = SpreadSheetNew(unit);
    RowNumber = 3;

    for (i = 1; i <= DrugsByCategory.recordcount; i ++) {
    // note that the data might contain commas, so we have to use two commands 
    SpreadsheetAddRow(ThisSpreadSheet, "", RowNumber, 1);
    SpreadSheetSetCellValue(ThisSpreadSheet, DrugsByCategory.Item[i], RowNumber, 1);

    if (DrugsByCategory.font[i] == "bold"){
    format1.bold = true;
    format1.color = "green";
    writedump(var="#format1#" label="#RowNumber#");

    SpreadSheetSetCellValue(ThisSpreadSheet
                , "bold font #Rownumber# #format1.color# #format1.bold#"
                , RowNumber, 1);
    SpreadsheetFormatCell(ThisSpreadSheet, format1, RowNumber, 1); 

    }
    else {
    format1.color = "blue";
    format1.bold = true;
    writedump(var="#format1#" label="#RowNumber#");
    SpreadSheetSetCellValue
                 (ThisSpreadSheet, "normal font 
                  #Rownumber# #format1.color# #format1.bold#"
                , RowNumber, 1);
    SpreadsheetFormatCell(ThisSpreadSheet, format1, RowNumber, 1); 
    }
    RowNumber ++;

    }

    </cfscript>
    <cfspreadsheet action="update" filename="#FileName#" name="ThisSpreadSheet"  
        sheet=#SheetNumber# sheetname="#unit#" >

    </cfloop> 
```

**编辑从这里开始**

这是 Leigh 建议的自包含代码。特拉维斯建议的 wrt 格式方法被注释掉了，但是当我使用它们时，结果并没有改变。

```
<cfscript>
Sheet1 = Spreadsheetnew("Sheet1");
SpreadSheetAddRow(Sheet1, "fred");
SheetNumber = 1;

Format = {};
format.bold = true;
format.color = "blue";
MYfile = "d:\dw\dwtest\dan\abc.xls";
writedump(format);
SpreadsheetFormatCell(Sheet1, Format, 1, 1); 

Values = "a,b,a,b";

</cfscript>
<cfspreadsheet action="write" filename="#MYFile#" name="Sheet1"  
    sheet=1 sheetname="fred" overwrite=true>

<cfloop list="a" index="letter">
<cfscript>
RowNumber = 1;
SheetNumber ++;
ThisSheet = SpreadSheetNew(letter);
for (i = 1; i <= 4; i ++) {

SpreadsheetAddRow(ThisSheet, ListGetAt(Values, i));
if (ListGetAt(Values, i) == "a") {
format.color = "green";
SpreadsheetFormatCell(ThisSheet, Format, RowNumber, 1); 
       //SpreadsheetFormatCell(ThisSheet, {bold="true",color="green"}, RowNumber, 1); 
}
else {
format.color = "red";
SpreadsheetFormatCell(ThisSheet, Format, RowNumber, 1); 
      //SpreadsheetFormatCell(ThisSheet, {bold="true",color="green"}, RowNumber, 1); 

}
RowNumber ++;   
}

</cfscript>
<cfspreadsheet action="update" filename="#MYFile#" name="ThisSheet"  
    sheet="#sheetNumber#" sheetname="#letter#" >

</cfloop> 
```

结果是：工作表 fred 符合预期，单元格 a1 中的粗体蓝色字体。

在工作表 a 中，单元格 a1 和 a3 的字母 a 为蓝色粗体。我期待大胆的绿色。单元格 a2 和 a4 有字母 b，未​​格式化。我期待大胆和红色。

我是在做一些愚蠢的事情，还是做错了什么。我正在使用 ColdFusion 9.01 和 Excel 2010。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T15:42:07.867

我怀疑您可能遇到了`<cfspreadsheet action="update" ..>`.

当 CF 执行“更新”时，它会尝试将工作表中的所有内容`"a"`（值、格式、公式等）复制到您保存在磁盘上的工作簿中的新工作表中。显然 CF 并没有复制所有内容。因此缺少格式。`"a"`您可以通过将工作表（*仅*）保存到单独的文件来证明这一点。注意你使用`action="write"`的单元格格式是否正确（出现红色和绿色）？

```
 ...
  <!--- save separate copy of "ThisSheet" only --->
  <cfspreadsheet action="write" filename="c:/thisSheetOnly.xls" name="ThisSheet"  ....>
  <!--- attempt to combine the sheets --->
  <cfspreadsheet action="update" filename="#MyFile#" name="ThisSheet" ... > 
```

老实说，创建​​整个工作表的完整副本很棘手。有*很多*动人的部分，很容易错过一些东西，这似乎就是这里发生的事情。就个人而言，我会`action="update"`尽可能避免使用。太多的事情可能会出错。此外，在大多数情况下，您不需要它。您可以轻松创建工作簿，然后添加和填充多个工作表。这是一个简化的示例，它创建并保存两个工作表，然后将它们保存到磁盘。（用CF10测试）

```
<cfscript>
    // Create new sheet and add one row
    Workbook = Spreadsheetnew("Sheet1");
    SpreadSheetAddRow(Workbook, "fred");

    // Apply formatting to new cell 
    format = {bold = true, color = "blue"};
    SpreadsheetFormatCell(Workbook, Format, 1, 1); 
    WriteDump(format);

    //Add another worksheet and make it active
    letter = "a";
    SpreadSheetCreateSheet(Workbook, letter);
    SpreadSheetSetActiveSheet(Workbook, letter);

    //Add rows to the active worksheet
    RowNumber = 1;
    Values = "a,b,a,b";
    for (i = 1; i <= 4; i ++) {
        SpreadsheetAddRow(Workbook, ListGetAt(Values, i), RowNumber, 1);
        if (ListGetAt(Values, i) == "a") {
            Format = {bold = true, color = "green"};
            SpreadsheetFormatCell(Workbook, Format, RowNumber, 1); 
            WriteDump(var=format, label="RowNumber="& RowNumber);
        }
        else {
            Format = {bold = true, color = "red"};
            SpreadsheetFormatCell(Workbook, Format, RowNumber, 1); 
            WriteDump(var=format, label="RowNumber="& RowNumber);
        }
        RowNumber++;   
    }

    // Set the active worksheet back to the original.  If you don't 
    // the last worksheet name will be the name of the spreadsheet
    // object, in this case, workbook.
    SpreadSheetSetActiveSheetNumber(Workbook, 1);

    //Finally, save it to disk
    SpreadSheetWrite(Workbook, "c:/path/to/yourFile.xls", true);
</cfscript> 
```

# php - 从网页到 Android 应用程序的 tcp 连接

> ID：15010474
> 
> 赞同：1
> 
> 时间：2013-02-21T19:18:29.043
> 
> 标签：php, android, tcp, ip, tcp-ip

想要在我的 Android 上的 TCP/IP 套接字运动应用程序和我的网站托管的网页上的 PHp 中的类似 TCP/IP 含义之间建立一个 TCP/IP 聊天接口。我之前已经形成了 TCP/IP 应用程序，它能够与我的计算机（其中加载了另一个 java tcp 服务器）通信，但现在我想与我的网页通信，只是让我的 Android 上的客户端具有相同的功能就这么简单吗我网站的 IP 地址和特定端口？

基本上我正在尝试制作一个网页，该网页连接到我的android上的应用程序，并在点击网页上的按钮时发送一些信息，如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:43:57.270

抱歉拖了太久才回答，前几天我没有太多工作的机会。

假设您还没有找到答案，并且您的 android 设备配置为侦听特定端口，您可以使用以下方法。

您的（非常基本的）html：

```
<!doctype html>

<html>
        <head>
                <title>Chat</title>
                <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
                <script type="text/javascript" src="jquery.js" ></script>
                <script type="text/javascript" src="contact.js" ></script>
        </head>
        <body>
                <form>
                    <input type="text" id="my_text">
                </form>
                <button id="send">Send!</button>
        </body>
</html> 
```

您的 contact.js 文件：

```
$(function(){
        $('#send').click(function(){
                var your_text = $('#my_text').html();
                send_to_droid(your_text);
        });
})

function send_to_droid(your_text){
        $.ajax({
                url: "send_to_droid.php",
                type: "GET",
                data: {
                        "your_text": your_text
                }
        })
} 
```

最后，你 send_to_droid.php 文件：

```
<?php
    $handle = fsockopen(<android device's ip>,<android device's port>);
    fwrite( $handle , $_GET['your_text'] );
?> 
```

我没有花太多时间来测试它，当然你可以更好地实现它来管理失败的连接等，但我希望这能让你开始。

# algorithm - 理解和构建社交网络算法

> ID：15010481
> 
> 赞同：6
> 
> 时间：2013-02-21T19:19:10.490
> 
> 标签：algorithm, social-networking, graph-algorithm, bigdata

我不确定这是否是提出这个问题的正确平台。但我的问题陈述是：我有一家书店 & x 没有客户（x 很大）。

客户可以告诉我一本书是好书还是坏书（不推荐）。我有一个将书籍放在一起的内部逻辑，所以如果客户说一本书不好，他是在说类似的书也不好，不要给他看。

我有义务并隐藏那些书。客户之间也可以互动，并在他们之间建立相互信任的水平。当客户 A 说 Book X1 不好时，就会出现这种情况。因此，我将 X1、X2、X3、X4 等列入黑名单。

但是他的朋友客户B说X3很好。所以现在我必须向 A 展示 X3。我想建立一个基于所有客户互动的社交网络，并能够计算他们的相互信任水平。所以在上面的情景中，如果相互信任度非常高，将向 A 显示 X3，否则我不会向 A 显示 X3。

我想让自己开始建立社交网络并分配一个重量。到 2 个节点（我的客户）之间的路径。请给我一些好的建议，我可以从哪里开始。任何书籍、网站等。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-21T19:27:01.943

从高层次上看，您将希望研究机器学习、数据挖掘和图挖掘/分析领域。

在机器学习和数据挖掘方面，你会想要研究协同过滤——我推荐[这本书](https://rads.stackoverflow.com/amzn/click/com/0596529325)。在这个领域有很多工作，请注意像亚马逊这样的网站是如何有一个功能的，它可以向您显示购买了哪些其他商品以及您当前正在查看的商品。

在构建社交网络方面，您首先需要弄清楚要使用什么数据库系统。存在像[Neo4J](http://www.neo4j.org/)和[FlockDB](http://engineering.twitter.com/2010/05/introducing-flockdb.html)这样的图形数据库，它们在设计时就考虑到了图形。你也可以选择更通用的东西，比如 MySQL，这取决于你想走多远。

一旦你做出决定，你就会想要利用这个“社交图”数据，这是随机游走、社区结构/检测和中心性等概念的用武之地。我建议阅读Twitter 在加州大学伯克利分校提供的[这一系列](http://blogs.ischool.berkeley.edu/i290-abdt-s12/)讲座更好地利用社交数据。

# javascript - 在淘汰赛中从另一个具有相同索引的数组中获取一个项目

> ID：15010482
> 
> 赞同：0
> 
> 时间：2013-02-21T19:19:12.237
> 
> 标签：javascript, knockout.js

情况是：我有两个具有相同数量的行和列的表（为了这个解释，我将它们称为**table1**和**table2**）。

**基本上我必须在table2**中同一行和列的值旁边显示**table1**的值。例如：

 ****表1**：

```
1 | 2
3 | 4 
```

**表2**：

```
5 [1: this value comes from the same row and column from table1] | 6 [2]
7 [3] | 8[4] 
```

*现在，我有一个矩阵（一个数组，带有数组），在敲除*中具有以下结构：

```
var vm = header([{ 
    lots: [1, 2], 
    otherLots: [3, 4] 
}, { 
    lots: [5, 6], 
    otherLots: [7, 8] 
}]); 
```

然后我将这个模型应用于一些绑定，正如你在[这个小提琴](http://jsfiddle.net/8vece/)中看到的那样。

问题是它`$parent.lots[$index].count`没有像我预期的那样返回任何东西。我也试过了`ko.computed`，但没有用。

这个值也是`ko.observable`如此，当我在**table1**中修改它时，这个变化应该反映在**table2中**

是否有解决此要求的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:51:50.640

看来您根本没有调用底层的可观察对象。看看我的小提琴叉子。

[http://jsfiddle.net/cellenburg/kWh2V/1/](http://jsfiddle.net/cellenburg/kWh2V/1/)

```
<p data-bind="text: $parent.lots()[$index()] ? $parent.lots()[$index()].count : ('nothing to show at index ' + $index())"  /> 
```

我将上一行更改为调用 observable`$index()`和`lots()`.

希望这可以帮助。**

# ios - ImagePickerController 未正确定位在视图中

> ID：15010487
> 
> 赞同：0
> 
> 时间：2013-02-21T19:19:37.523
> 
> 标签：ios, uitabbarcontroller, uiimagepickercontroller

在我将 ImagePickerController 实现到我的一个 viewController 中并将其放入我的 TabController 之后，我在启动时得到了以下效果。到目前为止一切正常..但是..看看视图：

![图像选择器控制器](../Images/160658370b13d21350e9fb95c6bf32c7.png)

这就是我刚刚实现的代码：

```
- (void)loadView{
    self.arController = [[IFAugmentRealityController alloc] initWithViewController:self];
    [self showCamera];
    self.view = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
    [self.view addSubview:self.picker.view];
} 
```

框架已设置..但是如何摆脱选择器和标签栏之间的黑条？

谢谢！！

[TabBarController 中的 UIImagePickerController](https://stackoverflow.com/questions/15010105/uiimagepickercontroller-in-tabbarcontroller)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:38:14.030

是的..刚刚得到它...这是我的解决方案：黑条是由于相机和屏幕之间的尺寸比不同。您可以通过非常轻微地变换相机来解决此问题：

CGAffineTransform 变换 = CGAffineTransformMakeScale(1.3, 1.3); imagePickerController.cameraViewTransform = 变换；

结果是全屏相机图像！它比以前稍微大一点，但除非你把它和一个未变形的版本放在一起，否则它并不明显。

# php - 如何将 JSON 数据存储在平面文件数据库中？

> ID：15010495
> 
> 赞同：-2
> 
> 时间：2013-02-21T19:20:00.743
> 
> 标签：php, database, json, flat-file

我需要将一些数据存储在 JSON 文件中。我知道如何使用 json_encode 但我找不到任何关于如何将编码数据写入外部文件的信息。这是一段打印出编码数据的代码，但是如何将数据写入单独的 JSON 文件中？

```
<?php
$array1 = array('key1' => "data1",
        'key2' => "data2",
        'key3' => "data3",
        'key4' => "data4",
        'key5' => "data5");

echo json_encode($array1);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:22:30.413

```
file_put_contents('array1.json', json_encode($array1)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:22:25.983

利用[`fwrite(...)`](http://www.php.net/manual/en/function.fwrite.php)

来自文档：

```
// Let's make sure the file exists and is writable first.
if (is_writable($filename)) {

    // In our example we're opening $filename in append mode.
    // The file pointer is at the bottom of the file hence
    // that's where $somecontent will go when we fwrite() it.
    if (!$handle = fopen($filename, 'a')) {
         echo "Cannot open file ($filename)";
         exit;
    }

    // Write $somecontent to our opened file.
    if (fwrite($handle, $somecontent) === FALSE) {
        echo "Cannot write to file ($filename)";
        exit;
    }

    echo "Success, wrote ($somecontent) to file ($filename)";

    fclose($handle);

} else {
    echo "The file $filename is not writable";
}
?> 
```

或者只是使用[`file_put_contents(...)`](http://php.net/manual/en/function.file-put-contents.php)

```
file_put_contents($filname, $data); 
```

# xml - 将 XML 转换为 ac# 对象

> ID：15010496
> 
> 赞同：2
> 
> 时间：2013-02-21T19:20:03.973
> 
> 标签：xml, c#-4.0, object, c#-2.0

我正在尝试创建一个类，该类从目录中获取一个小的 xml 文件并将其变成一个对象，但我总是遇到属性问题。我希望班级有一个维度列表，以便可以将其称为。维度[x].id、维度[x].name....等。该类将被多次引用，但我希望它仅在第一次将 xml 填充到对象中。

这是 XML，在 Advanced 中感谢您：

```
 <?xml version="1.0"?>
     <dimensions>
      <dimensions id="0" name="Test"  serverAddress = "cm.dt.funcom.com" port = "7509" />
      <dimensions id="1" name="Atlantean"  serverAddress = "cm.d1.funcom.com" port = "7501" />
      <dimensions id="2" name="Rimor"  serverAddress = "cm.d2.funcom.com" port = "7502" />
     </dimensions> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T01:06:52.130

我会尝试一些应该消除属性焦虑的东西。

生成（或使用现有的）适用于您的 XML 的 XSD。像这样的东西：

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:element name="dimensions">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element maxOccurs="unbounded" name="dimensions">
          <xsd:complexType>
            <xsd:attribute name="id" type="xsd:unsignedByte" use="required" />
            <xsd:attribute name="name" type="xsd:string" use="required" />
            <xsd:attribute name="serverAddress" type="xsd:string" use="required" />
            <xsd:attribute name="port" type="xsd:unsignedShort" use="required" />
          </xsd:complexType>
        </xsd:element>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
</xsd:schema> 
```

使用 .NET 提供的 xsd.exe 工具（Visual Studio 命令提示符会很好地为您设置路径）生成类（假设上述 XSD 保存为`converting-xml-into-a-c-sharp-object.xsd`）：

```
xsd /c <fullpath-if-not-in-the-current-folder>converting-xml-into-a-c-sharp-object.xsd 
```

生成的代码将类似于（只是标题）：

```
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.17929
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System.Xml.Serialization;

// 
// This source code was auto-generated by xsd, Version=4.0.30319.1.
// 

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true)]
[System.Xml.Serialization.XmlRootAttribute(Namespace="", IsNullable=false)]
public partial class dimensions {

    private dimensionsDimensions[] dimensions1Field;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("dimensions")]
    public dimensionsDimensions[] dimensions1 {
        get {
            return this.dimensions1Field;
        }
        set {
            this.dimensions1Field = value;
        }
    }
} 
```

下一步是编写引用这个生成的类的代码；您可以找到很多参考资料；[SO 上](https://stackoverflow.com/questions/2232182/how-to-use-xsd-exe-c-output)的介绍可能是这样的。

上面的 XSD（“Russian Doll”）创作风格给看起来不聪明的类命名；[这](https://stackoverflow.com/questions/14853905/can-we-control-type-name-in-xsd-exe-tool-generated-class/14857993#14857993)是一种可能的解决方法。

# winforms - 托管 C++ 中表单之间的数据扩展

> ID：15010502
> 
> 赞同：2
> 
> 时间：2013-02-21T19:20:40.567
> 
> 标签：winforms, visual-studio, managed-c++

我需要从 form2->textBox 获取数据并放入 form1->textBox；

在 Form1.hi 中写

```
#pragma once
#include "Form2.h"

Form2^ f2 = gcnew Form2();
f2->ShowDialog(); 
```

那有效！但在那之后我添加到 Form2.h

```
#pragma once
#include "Form1.h" 
```

来写

```
Form1^ f1;
f1->textBox1->Text = this.textBox1->Text; 
```

但这给了我很多错误，比如

```
Form1, Form2, f1, f2 : undeclared identifiers 
```

# 这是完整的代码

### 表格1.h

```
#pragma once
#include "Form2.h"

namespace test76 {

    using namespace System;
    ....

    public ref class Form1 : public System::Windows::Forms::Form
    {
    public:
        Form1(void)
        {
            InitializeComponent();              
        }

    protected:          
        ~Form1()
        {
            if (components)
            {
                delete components;
            }
        }
    private: System::Windows::Forms::Button^  button1;
    protected: 
    private: System::Windows::Forms::TextBox^  textBox1;

    private:
        System::ComponentModel::Container ^components;

#pragma region Windows Form Designer generated code
        void InitializeComponent(void)
        {
            this->button1 = (gcnew System::Windows::Forms::Button());
            this->textBox1 = (gcnew System::Windows::Forms::TextBox());
            this->SuspendLayout();
            ....

        }
#pragma endregion

    private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {
                Form2^ f2 = gcnew Form2();
                f2->ShowDialog();

             }
    };
} 
```

### 表格2.h

```
#pragma once
#include "Form1.h"  //  <- do I need to put it here?

namespace test76 {

    using namespace System;
    ....

    public ref class Form2 : public System::Windows::Forms::Form
    {
    public:
        Form2(void)
        {
            InitializeComponent();              
        }

    protected:          
        ~Form2()
        {
            if (components)
            {
                delete components;
            }
        }
    private: System::Windows::Forms::Button^  button1;
    protected: 
    private: System::Windows::Forms::TextBox^  textBox1;

    private:
        System::ComponentModel::Container ^components;

#pragma region Windows Form Designer generated code
        void InitializeComponent(void)
        {
            this->button1 = (gcnew System::Windows::Forms::Button());
            this->textBox1 = (gcnew System::Windows::Forms::TextBox());
            this->SuspendLayout();
            ....

        }
#pragma endregion

    private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {
                Form1->textBox1->Text = textBox1->Text;
             }
    };
} 
```

### 入口点

```
// test76.cpp : main project file.

#include "stdafx.h"
#include "Form1.h"

using namespace test76;

[STAThreadAttribute]
int main(array<System::String ^> ^args)
{
    Application::EnableVisualStyles();
    Application::SetCompatibleTextRenderingDefault(false); 

    Application::Run(gcnew Form1());
    return 0;
} 
```

没有 #include "Form2.h" 错误是 Form1 : undeclared identifier in Form2.h, button1_Click,

使用 #include "Form2.h" 会给我很多错误，例如 Form1, Form2, f2 : undeclared identifiers

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:50:36.743

看起来你还没有初始化你`textBox1`我说的样子，因为我没有看到你背后的设计器代码`Form1.h`（但这只是一个即兴猜测，`Windows Form Designer generated code`在你的标题中寻找类似的东西）。

具体到您的错误问题

如果您想在运行时生成文本框，那么这样的东西将允许访问文本框

```
int main (array <System :: String ^> ^ args)
{
   // Run the application 

   auto form = gcnew MyForm();
   auto myTextBox = gcnew Windows::Forms::TextBox();
   myTextBox->Name = "myTxtBox";
   myTextBox->Text = "This is my txt box";
   form->Controls->Add(myTextBox);
   Application::Run(form);

   // return to main
   return 0;
}
```

但是，如果您正在使用设计器并已命名控件，`textBox1`那么我建议您检查设计器的属性并确保该`Modifiers`属性设置为其他内容`Private`并且您的`Name`属性匹配。如果这两个都是真的，那么以下应该工作。

```
int main (array <System :: String ^> ^ args)
{
   // Run the application 

   auto form = gcnew MyForm();
   form->myDesignTimeTextbox->Text = "I am a design time textbox";
   Application::Run(form);

   // return to main
   return 0;
}
```

## 同时使用两个表格

虽然我确信还有其他方法可以做到这一点，但一种可靠的方法是实例化现有表单的新实例（或另一个表单类的实例），清除其内容并将新内容附加到表单。 （注意我省略了示例中生成的代码，因为它非常冗长）查看`button1_Click event`

## 例子

### 表单类

```
 public ref class MyForm : public System::Windows::Forms::Form
   {
   public:
      MyForm(void)
      {
         InitializeComponent();
         //
         //TODO: Add the constructor code here
         //
      }

   protected:
      /// <summary>
      /// Clean up any resources being used.
      /// </summary>
      ~MyForm()
      {
         if (components)
         {
            delete components;
         }
      }
   public: System::Windows::Forms::TextBox^  myDesignTimeTextbox;
   protected: System::Windows::Forms::Button^  button1;
   public: 

   public: 
   protected: 

   protected: 

   protected: 

   private:
      /// <summary>
      /// Required designer variable.
      /// </summary>
      System::ComponentModel::Container ^components;

#pragma region Windows Form Designer generated code
 //omitted for brevity
//I have a button named button1 and a TextBox named myDesignTimeTextbox
#pragma endregion

   private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) 
            {
               this->myDesignTimeTextbox->Text = L"You clicked Teh Button, You R Win";

               //create new form and add a textbox
               auto form2 = gcnew MyForm();
               form2->Controls->Clear();
               auto getTxt = gcnew TextBox();
               getTxt->Name = L"Generated_Textbox";

               //the content of the txtbox will be that of the design Time text box
               getTxt->Text = myDesignTimeTextbox->Text;
               form2->Controls->Add(getTxt);

               form2->ShowDialog();
            }

   };
```

### 入口点

```
 int main (array  ^ args)
   {
      // Run the application 
      auto form1 = gcnew MyForm();

      Application::Run(form1);

      // return to main
      return 0;
   } 
```

注意* 如果您还不知道，关键字[auto](http://msdn.microsoft.com/en-us/library/6k3ybftz%28v=vs.80%29.aspx)是一种无需指定已知类型的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-13T11:32:44.833

唯一的问题在于您的`Form2.h`代码：

```
//Form2.h
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {
                Form1->textBox1->Text = textBox1->Text;
         } 
```

不能`Form1->textBox1`直接使用。您需要一个可以捕获地址/指向 running 的变量`form1`。将其修改为如下内容：

```
//Form1.h
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {
            Form2^ f2 = gcnew Form2(this);
            f2->ShowDialog();
         }

//Form2
private: Form1^ f1;
Form2(Form1^ f)
{ f1=f; }
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e)
         { f1->textBox1->Text = textBox1->Text; } 
```

# javascript - 使用 javascript 更改初始比例

> ID：15010503
> 
> 赞同：2
> 
> 时间：2013-02-21T19:20:46.457
> 
> 标签：javascript, html, css

我用phonegap做了一个应用程序。我不想使用媒体查询，因为我不得不更改所有参数以适应不同的视口大小。我的想法是我只用 javascript 更改 html 文档的初始比例。我知道我可以使用如下所示的函数更改初始比例：

```
 if (document.documentElement.clientWidth < 480) {
        document
            .querySelector("meta[name=viewport]")
            .setAttribute('content', 'initial-scale=0.4', 'maximum-scale=0.4', 'width=768');
    }; 
```

但我希望初始比例的宽度为视口 0 的 320 像素，即 100%。并且在视口宽度为 720 (Galaxy S3) 时为 110%，即初始比例为 0.1。对于位于 javascript 之间的所有视口大小，应计算比例。我不知道如何实现这一目标！我对每一次帮助感到非常高兴！希望你能理解我，我来自德国！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T19:34:55.753

尝试这个：

```
 if (document.documentElement.clientWidth < 480) { 
    document.querySelector("meta[name=viewport]").setAttribute(
          'content', 
          'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0');
 } 
```

参考：[我可以动态更改移动 safari 中的视口元标记吗？](https://stackoverflow.com/questions/3588628/can-i-change-the-viewport-meta-tag-in-mobile-safari-on-the-fly)

# java - ExecutorService、newFixedThreadPool 和 setPrioirty

> ID：15010507
> 
> 赞同：0
> 
> 时间：2013-02-21T19:21:02.720
> 
> 标签：java, multithreading

setPrioirty 方法在 newFixedThreadPool 和常规线程上的工作方式是否相同？

天呐！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:49:42.617

默认情况下 a`ThreadPoolExecutor`将使用`Executors.defaultThreadFactory()`，这反过来会将`Thread`执行程序中的所有 's设置为`NORM_PRIORITY`.

如果你想改变`Thread`executor 中的属性，你需要提供你自己的属性，`ThreadFactory`你可以在其中指定线程优先级、组、名称等。

查看[ThreadPoolExecutor 的 javadoc 以](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.html)了解更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:32:16.847

所有线程池中的线程都是一样的东西。如果您`Thread.currentThread().setPriority(...)`在线程池中运行时这样做，它将与在任何其他线程中执行完全相同的操作。

# image - 为什么 Flash 应用程序中的颜色较浅？

> ID：15010508
> 
> 赞同：0
> 
> 时间：2013-02-21T19:21:07.097
> 
> 标签：image, apache-flex, background

当我指定应用程序的 backgroundColor 或应用程序的元素（任何类型）时，或者我将应用程序背景图像设置为

```
<s:BitmapImage left="0" right="0" top="0" bottom="0" fillMode="repeat" source="assets/bg1.png"/> 
```

，我总是得到比我用十六进制代码或背景图像/或纯色指定的颜色更浅的颜色。

这是我在浏览器中看到的应用程序背景的示例屏幕截图：

![浏览器](../Images/d26d367cf4483cbe10f103e6e1cd151f.png)

这是带有图像的原始图像编辑器的示例屏幕截图，我将其保存到源文件夹中：

![像素化器](../Images/5d25de7ebced6a4d469643f8da802a4d.png)

**原始图像明显比浏览器中显示的更暗、更生动。**

*   我清除了项目，清除了缓存，尝试了 Firefox 和 Chrome，都一样。
*   应用程序 alpha 设置为 1。
*   嵌入式 swf 没有任何基于 css 的 alpha 属性。
*   我尝试将纯 swf 加载到浏览器，都一样。
*   我正在使用 Flash Builder 4.6。

谢谢你的帮助。

# python - 2 函数 save() 到一个模型

> ID：15010512
> 
> 赞同：0
> 
> 时间：2013-02-21T19:21:33.613
> 
> 标签：python, django

我需要将 2 个函数 save() 添加到一个模型。怎么做？

```
def save(self, *args, **kwargs):
    self.slug = slugify(self.title)
    super(Property, self).save(*args, **kwargs)

def save(self, *args, **kwargs):
    self.key = ''.join(random.choice(string.letters) for i in xrange(132))
    ..........
    return self 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:27:03.137

你不能。即使它们有两个不同的签名，在 Python 中也不可能有两个同名的函数（在您的情况下，它们几乎没有签名）。

你可以这样做：

```
def save(self, which_save, *args, **kwargs):
    if(which_save == 1):
        do_something()
    elif(which_save == 2):
        do_something_else()
    else:
        raise ValueError 
```

或两个不同的名称：

```
def save_a(self, *args, **kwargs):
    # some code

def save_b(self, *args, **kwargs):
    # some other code 
```

或者您可以将两者混合使用 - have`save`和。`save_a``save_b`

# python - 我收到一个错误，但我的程序可以正常工作并按预期运行。最后只是一条不需要的错误消息

> ID：15010518
> 
> 赞同：0
> 
> 时间：2013-02-21T19:21:39.733
> 
> 标签：python, python-3.x, literals, divide

```
f = open("arvud.txt", "r")
arv = f.readline()
arv = arv.strip()

while arv != " ":
    if int(arv)%2 > 0:
        print("Arv " + str(arv) + " on paaritu arv.")
    else:
        print("Arv " + str(arv) + " on paarisarv.")
    arv = f.readline()
    arv = arv.strip() 
```

这是我的代码，它可以确定数字是否除以 2。它从每一行的文件中读取数字。

arvud.txt

```
10
2
1
6
17
36665
1000000001
25832864968 
```

这就是它在 IDLE 中的样子。

```
>>> ================================ RESTART ================================
>>> 
Arv 10 on paarisarv.
Arv 2 on paarisarv.
Arv 1 on paaritu arv.
Arv 6 on paarisarv.
Arv 17 on paaritu arv.
Arv 36665 on paaritu arv.
Arv 1000000001 on paaritu arv.
Arv 25832864968 on paarisarv.
Traceback (most recent call last):
  File "C:\Python33\9.veebruar\2\. kodutöö\1paarispaaritu.py", line 8, in <module>
    if int(arv)%2 > 0:
ValueError: invalid literal for int() with base 10: ''
>>> 
```

我需要添加更多文字... grrhh。我只需要有关如何绕过此问题的帮助。我是这个程序的新手，我真的很想得到一些帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:23:53.147

在文件末尾，`f.readline()`将返回一个空字符串。因此，您应该测试一个空字符串：

```
while arv: 
```

而不是针对`arv != " "`.

# ruby - 事件机系统命令

> ID：15010521
> 
> 赞同：1
> 
> 时间：2013-02-21T19:21:46.253
> 
> 标签：ruby, command, system, eventmachine

我正在使用[事件机器](https://github.com/eventmachine/eventmachine)

需要在服务器上运行一个命令系统，并将终端的输出实时发送到客户端。

尝试：

**服务器**

```
EM.run{
       EM.system('#command'){ |output| 
       send_data output 
                            }
      } 
```

**客户**

```
def receive_data(data)
    puts data 
end 
```

有效，但在命令完成运行时发送数据，而不是实时发送。

任何想法 ？

# python - 使用 groupby 计算复制中的平均值

> ID：15010523
> 
> 赞同：0
> 
> 时间：2013-02-21T19:21:55.250
> 
> 标签：python, pandas

我有以下形式的实验数据，其中每个实验和治疗都重复运行，命中是与特定事件相关的基因：

```
experiment  treatment   replicate   hit
1   1   1   gene1
1   1   1   gene2
1   1   1   gene1
1   1   1   gene1
1   1   2   gene1
1   1   2   gene1
1   2   1   gene1
1   2   1   gene2
1   2   2   gene2
1   2   2   gene2 
```

我想要做的是计算治疗中每个基因的平均计数。

我可以使用以下方法计算每个实验的基因计数`value_counts()`：

```
counts = df['hit'].groupby([df['experiment'], df['treatment'],
                            df['replicate']]
                          ).value_counts().unstack() 
```

产生如下输出：

```
experiment  treatment   replicate    gene1  gene2
1   1   1   3   1
1   1   2   2   NA
1   2   1   1   1
1   2   2   NA  2 
```

但我真正想要的是每次治疗的平均计数，所以（假设用 0 替换 NA）：

```
experiment  treatment   gene1   gene2
1   1   2.5 0.5
1   2   0.5 1.5 
```

有任何想法吗？应用于`.mean()`value_counts 似乎可以计算出所有列的平均值，而不是每个重复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:36:05.393

只需拿起你的桌子，然后再做一个 groupby：

```
>>> g = d.hit.groupby([d.experiment, d.treatment, d.replicate]).value_counts().unstack().reset_index()
>>> print g
   experiment  treatment  replicate  gene1  gene2
0           1          1          1      3      1
1           1          1          2      2    NaN
2           1          2          1      1      1
3           1          2          2    NaN      2
>>> print g.fillna(0).groupby(['experiment', 'treatment']).mean()
                      replicate  gene1  gene2
experiment treatment                         
1          1                1.5    2.5    0.5
           2                1.5    0.5    1.5 
```

你得到一个额外的无意义的列，它是重复数的平均值，但你可以把它扔掉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:46:46.393

您还可以使用被低估的`pd.get_dummies`：

```
In [31]: pd.get_dummies(df.hit)
Out[31]:
   gene1  gene2
0      1      0
1      0      1
2      1      0
3      1      0
4      1      0
5      1      0
6      1      0
7      0      1
8      0      1
9      0      1

In [32]: df2 = pd.get_dummies(df.hit).groupby([df.experiment,df.treatment,df.replicate]).sum(); df2
Out[32]:
                                gene1  gene2
experiment treatment replicate
1          1         1              3      1
                     2              2      0
           2         1              1      1
                     2              0      2

In [34]: df2.groupby(level='treatment').mean()
Out[34]:
           gene1  gene2
treatment
1            2.5    0.5
2            0.5    1.5 
```

# jquery - 年份的 JQuery Datepicker 下拉列表仅显示单年

> ID：15010524
> 
> 赞同：0
> 
> 时间：2013-02-21T19:21:56.873
> 
> 标签：jquery, datepicker

我在 2 个字段上有一个日期选择器：开始日期和结束日期。选择开始日期后，结束日期日期选择器会更新最小和最大日期选项以及 yearRange 选项。

如果我选择 29/12/2013，则用户只能从此处选择 10 天作为结束日期。

因此，我打开结束日期的日期选择器，它的 yearRange 为 2013:2014，changeYear 选项设置为 true。

但年份下拉列表仅显示 2013 年。2014 年不在列表中。

如果我点击日期选择器的右箭头（下一个）移动到下一年，它会移动到 2014 年，然后如果我点击年份下拉列表，现在会显示 2014 年。

> $("#EndDate").datepicker("option", "yearRange", '2013:2014');

如果在此代码前放置警报，则年份的下拉菜单会按预期显示 2013 年和 2014 年。

我正在使用 JQuery 1.4.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:24:21.520

[这个问题](https://stackoverflow.com/questions/269545/jquery-datepicker-years-shown)似乎解决了同样的问题。看起来您可能没有正确的格式来指定您的日期范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:07:40.403

找到了解决方案：

原始代码在更改 yearRange 选项之前将 changeYear 选项设置为 true - 这不会在下拉年份列表中显示更新范围：

```
$("#EndDate").datepicker("option", "changeYear", true);
$("#EndDate").datepicker("option", "yearRange", yearRange); 
```

在 yearRange 选项后放置 changeYear 选项代码解决了该问题。现在下拉列表按预期显示年份范围。因此，排序很重要。

```
 $("#EndDate").datepicker("option", "yearRange", yearRange);
    $("#EndDate").datepicker("option", "changeYear", true); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-17T10:22:41.637

尝试这个：

```
$(function () {
       $("#txtDateofBirth").datepicker({

           changeYear: true,
           dateFormat: 'dd/mm/yy',
           yearRange: '1970:2025'
       }
       );
   }); 
```

# c# - HTTP 错误 401.0 - 未经授权

> ID：15010526
> 
> 赞同：2
> 
> 时间：2013-02-21T19:22:01.640
> 
> 标签：c#, session, authentication, iis

我有这 4 个课程：

```
public class Personal
        {
            public int Id { get; set; }
            public string Name { get; set; }
        }

public class LoginRepository
    {
        Context context = new Context();
        public Personal GetByUsernameAndPassword(Personal user)
        {
            return context.Personals.Where(u => u.Name==user.Name).FirstOrDefault();
        }
    }

public class LoginApplication
    {
        LoginRepository userRepo = new LoginRepository();
        public Personal GetByUsernameAndPassword(Personal user)
        {
            return userRepo.GetByUsernameAndPassword(user);
        }
    }

public class SessionContext
    {
        public void SetAuthenticationToken(string name, bool isPersistant, Personal userData)
        {
            string data = null;
            if (userData != null)
                data = new JavaScriptSerializer().Serialize(userData);

            FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(1, name, DateTime.Now, DateTime.Now.AddYears(1), isPersistant, data);

            string cookieData = FormsAuthentication.Encrypt(ticket);
            HttpCookie cookie = new HttpCookie(FormsAuthentication.FormsCookieName, cookieData)
            {
                HttpOnly = true,
                Expires = ticket.Expiration
            };

            HttpContext.Current.Response.Cookies.Add(cookie);
        }

        public Personal GetUserData()
        {
            Personal userData = null;

            try
            {
                HttpCookie cookie = HttpContext.Current.Request.Cookies[FormsAuthentication.FormsCookieName];
                if (cookie != null)
                {
                    FormsAuthenticationTicket ticket = FormsAuthentication.Decrypt(cookie.Value);

                    userData = new JavaScriptSerializer().Deserialize(ticket.UserData, typeof(Personal)) as Personal;
                }
            }
            catch (Exception ex)
            {
            }

            return userData;
        }
    } 
```

在我的控制器中，我有这个：

```
 public class HomeController : Controller
    {
        LoginApplication userApp = new LoginApplication();
        SessionContext context = new SessionContext();
        public ActionResult Index()
        {
            return View();
        }
        [HttpPost]
        public ActionResult Index(Personal user)
        {
            var authenticatedUser = userApp.GetByUsernameAndPassword(user);
            if (authenticatedUser != null)
            {
                context.SetAuthenticationToken(authenticatedUser.Name, false, authenticatedUser);
                return RedirectToAction("Index", "Asp");
            }
            return View();
        }
    } 
```

但问题是，即使我使用正确的登录名，我也会看到这个错误：

HTTP 错误 401.0 - 未经授权 您无权查看此目录或页面。

我认为没有创建会话。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T19:32:08.207

这听起来像您没有正确处理请求/路由的 IIS 配置，因此 IIS 没有使用 MVC 路由来选择正确的控制器，而是看到了目录的路径并抛出未经授权的路径，因为目录列表被禁用。

如何设置它在某种程度上取决于您正在运行的 IIS 版本。从技术角度来看，配置基本相同，但由于管理控制台从 6 到 7 发生了巨大变化。如何在 IIS7(+) 中执行此操作已被私下询问，而不是重写答案，我认为它符合精神这个社区的更好地转发[答案](https://stackoverflow.com/a/5087652/112407)

# android - Android：模拟器：Python：在表单中的字段之间切换

> ID：15010537
> 
> 赞同：0
> 
> 时间：2013-02-21T19:22:39.597
> 
> 标签：android, python, keyboard, emulation, monkeyrunner

我正在编写的 Android 应用程序中自动输入 SQLite 数据。该应用程序是用 Java 编写的。功能性 ui 测试是使用 MonkeyRunner 用 python 编写的，并针对在我的 Win7 笔记本电脑上运行的 Android 4.2 模拟器运行。

```
#Touch the new alliance button
device.touch(358, 78, 'DOWN_AND_UP')
MonkeyRunner.sleep(3)
# Type name of new alliance
device.type("Legion of Anarchy")
MonkeyRunner.sleep(3)
#Touch the allc leader edittext
device.touch(88, 348, 'DOWN_AND_UP')
# Type name of alliance leader
device.type("DeathAngel") 
```

在表单中，第一个字段已经有了焦点，所以我只需输入条目。下一个触摸命令点击以下字段，但这并不总是有效。从我的笔记本电脑键盘上，我可以 TAB 到下一个字段...我只需要知道如何在 python/MonkeyRunner 中执行此操作。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T05:41:03.877

如果您可以通过键盘 TAB，那么您也应该可以通过 Monkeyrunner 进行 TAB：

```
device.press('KEYCODE_TAB', MonkeyDevice.DOWN_AND_UP) 
```

[但是，使用AndroidViewClient](https://github.com/dtmilano/AndroidViewClient)并执行以下操作可能要容易得多：

```
vc = ViewClient(*ViewClient.connectToDeviceOrExit())
newAlliance = vc.findViewByIdOrRaise('id/new_alliance')
newAlliance.type('Legion of Anarchy')
allianceLeader = vc.findViewByIdOrRaise('id/alliance_leader')
allianceLeader.type('DeathAngel') 
```

而且您不必担心屏幕坐标和其他东西。查看[示例](https://github.com/dtmilano/AndroidViewClient/blob/master/AndroidViewClient/examples)，您会发现很多想法。

# python-2.7 - paramiko sftp 服务器连接断开

> ID：15010540
> 
> 赞同：10
> 
> 时间：2013-02-21T19:22:42.763
> 
> 标签：python-2.7, paramiko

我正在尝试使用 paramiko sftp 复制大文件（~650mb）文件。我可以复制小文件，但是当我尝试复制大文件时看到以下错误。我可以直接使用 sftp 从终端复制文件。

```
Traceback (most recent call last):
  File "/usr/lib/python2.7/threading.py", line 551, in __bootstrap_inner
    self.run()
  File "/usr/lib/python2.7/threading.py", line 504, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/usr/lib/python2.7/dist-packages/paramiko/sftp_file.py", line 453, in _prefetch_thread
    self.sftp._async_request(self, CMD_READ, self.handle, long(offset), int(length))
  File "/usr/lib/python2.7/dist-packages/paramiko/sftp_client.py", line 656, in _async_request
    self._send_packet(t, str(msg))
  File "/usr/lib/python2.7/dist-packages/paramiko/sftp.py", line 172, in _send_packet
    self._write_all(out)
  File "/usr/lib/python2.7/dist-packages/paramiko/sftp.py", line 136, in _write_all
    n = self.sock.send(out)
  File "/usr/lib/python2.7/dist-packages/paramiko/channel.py", line 701, in send
    self.transport._send_user_message(m)
  File "/usr/lib/python2.7/dist-packages/paramiko/transport.py", line 1426, in _send_user_message
    self._send_message(data)
  File "/usr/lib/python2.7/dist-packages/paramiko/transport.py", line 1406, in _send_message
    self.packetizer.send_message(data)
  File "/usr/lib/python2.7/dist-packages/paramiko/packet.py", line 310, in send_message
    self.write_all(out)
  File "/usr/lib/python2.7/dist-packages/paramiko/packet.py", line 260, in write_all
    raise EOFError()
EOFError

Traceback (most recent call last):
  File "./extract.py", line 107, in <module>
    main()
  File "./extract.py", line 81, in main
    getFiles()
  File "./extract.py", line 58, in getFiles
    'ABC.zip')
  File "/usr/lib/python2.7/dist-packages/paramiko/sftp_client.py", line 614, in get
    data = fr.read(32768)
  File "/usr/lib/python2.7/dist-packages/paramiko/file.py", line 153, in read
    new_data = self._read(read_size)
  File "/usr/lib/python2.7/dist-packages/paramiko/sftp_file.py", line 152, in _read
    data = self._read_prefetch(size)
  File "/usr/lib/python2.7/dist-packages/paramiko/sftp_file.py", line 132, in _read_prefetch
    self.sftp._read_response()
  File "/usr/lib/python2.7/dist-packages/paramiko/sftp_client.py", line 668, in _read_response
    raise SSHException('Server connection dropped: %s' % (str(e),))
paramiko.SSHException: Server connection dropped: 
```

此外，仅在读取一定数量的字节后才会抛出此错误。我在 sftp_client.py 中引入了一个打印语句，这是输出（字节）

```
reading bytes data_size: 11
reading bytes data_size: 28
reading bytes data_size: 28
reading bytes data_size: 32776
reading bytes data_size: 32776
reading bytes data_size: 32776
reading bytes data_size: 32776
reading bytes data_size: 32776
reading bytes data_size: 32776
reading bytes data_size: 32776 
```

我不清楚为什么连接会在文件中间被丢弃。有关如何处理此问题的任何建议？

谢谢！

# javascript - 在 GmapPanel - EXTJS 4 中添加动态标记

> ID：15010542
> 
> 赞同：0
> 
> 时间：2013-02-21T19:22:52.047
> 
> 标签：javascript, ajax, google-maps, extjs, extjs4

## 这是使用 id`mygooglemap`代码创建 googlemap 面板

```
var layout = Ext.create('Ext.panel.Panel', {
            //renderTo: 'layout',
            width: window.innerWidth,
            height: window.innerHeight,
            //title: 'Border Layout', //no title will be blank
            layout: 'border',
            items: [{
                title: 'Message List',
                region: 'south',     // position for region
                xtype: 'panel',
                height: 100,
                split: true,         // enable resizing
                collapsible: true,
                margins: '0 5 5 5',
                collapsed: true
            },tree,{
                    xtype: 'gmappanel',
                    id : 'mygooglemap',
                    gmapType: 'map',
                    zoomLevel: 7,
                    mapConfOpts: ['enableScrollWheelZoom','enableDoubleClickZoom','enableDragging'],
                    mapControls: ['GSmallMapControl','GMapTypeControl','NonExistantControl'],  
                    setCenter: {
                        lat: 3.951941,
                        lng: 102.052002,
                    }
                }],
            renderTo: Ext.getBody() //get the body and display Layout at there
        });
    }); 
```

这是当检查树单击复选框并且复选框的状态为真时，然后在 googlemap 上添加标记

```
 Ext.define('GoogleMarkerModel', {
            extend: 'Ext.data.Model',
            fields: ['Locating','MainPower','Acc','PowerOff','Alarm','Speed','Direction','Latitude','Longitude','DateTime','MainID', 'DeviceID','IOState','OilState']
        });

        var MarkerStore = Ext.create('Ext.data.JsonStore', {
            model: 'GoogleMarkerModel',
            autoLoad: true,
            proxy: {
                type: 'ajax',
                url: 'get-googlemarker.php',
                baseParams: {  //here you can define params you want to be sent on each request from this store
                            mainid: 'value1'
                            },
                reader: {
                    type: 'json',
                    root: 'images'
                }
            }
        });

        tree.on('checkchange', function(node){
            var data = node.data;
            Ext.MessageBox.show({
            title: 'Changed checkbox status',
            msg: 'MainID: ' + data.MainID + ' <br /> Checkbox status: ' + data.checked,
            icon: Ext.MessageBox.INFO
            });
            if (data.checked = true){

                MarkerStore.load({
                            params: {
                                    mainid: data.MainID
                                    }
                            })  
                         //after markerstore get the longtitude and latitude,add google map a marker at here
            }
        }) 
```

当复选框被选中时，然后将传递一个 id`get-googlemarker.php`并在 MarkerStore 的数据库存储中获取最新的经度和纬度，并在 googlemap 上显示标记。
所有编码都完成了，只是在googlemap上留下了添加标记，如何在googlemap上动态添加标记？
标记将在函数内部创建`tree.on('checkchange', function(node)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T01:18:01.277

```
 function addDoctorLocation(options) 
    {
     var gm = Ext.getCmp('mygooglemap');
     var mpoint = new google.maps.LatLng(options.lat,options.lng);
     var marker = gm.addMarker(mpoint,options.marker,false,false, options.listeners);
    }

tree.on('checkchange', function(node){
        var data = node.data;

        if (data.checked == true){

        var options = {
        lat:lati,
        lng:longi,
        marker: {title:"Hello World!"},
        listeners: {
                     click: function(e){

                                         }
                    }     
        }     
        addDoctorLocation(options);           
        }       
    }) 
```

## 用这段代码解决了

# mysql - LEFT JOIN 比 INNER JOIN 快得多

> ID：15010543
> 
> 赞同：0
> 
> 时间：2013-02-21T19:22:52.947
> 
> 标签：mysql, left-join, inner-join, explain

我有两张桌子->

*   用户

    ```
    user_id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY
    username VARCHAR(200) NOT NULL 
    ```

*   ping

    ```
    ping_id INT UNSIGNED NOT NULL AUTO_INCREMENT PPRIMARY KEY
    disqus_id VARCHAR(32) NOT NULL
    user_id INT UNSIGNED NOT NULL

    INDEX combo1(disqus_id,user_id) 
    ```

我运行这个查询->

```
EXPLAIN SELECT pings.*, username
          FROM pings
    INNER JOIN users USING(user_id)
         WHERE pings.disqus_id = 'post_168' AND user_id = '1'
      ORDER BY pings.ping_id DESC LIMIT 2 
```

`Extra`pimgs下的列表示`Using where; Using temporary; Using filesort`，users 下的列表示`Using where; Using join buffer`。

我运行这个查询->

```
EXPLAIN SELECT pings.*, username
          FROM pings
     LEFT JOIN users USING(user_id)
         WHERE pings.disqus_id = 'post_168' AND user_id = '1'
      ORDER BY pings.ping_id DESC LIMIT 2 
```

`Extra`pimgs下的列表示`Using where`，而 users 下的列是空的。

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:34:42.227

*   [USING(column_list)](http://dev.mysql.com/doc/refman/4.1/en/join.html)子句命名必须存在于两个表中的列列表。

因此，如果您使用`user_id`必须在两个表中，但左连接将返回表 a 中的值而不是表 b 中的值

以下两个子句在语义上是相同的：

```
a LEFT JOIN b USING (c1,c2,c3)
a LEFT JOIN b ON a.c1=b.c1 AND a.c2=b.c2 AND a.c3=b.c3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T19:45:43.760

您正在创建 2 个不同的查询，它们具有 2 组不同的生产要求，可能会发生相同的结果集：

**查询1：（INNER JOIN）**：您说它只能从表中返回表`ping`中存在匹配`user_id`值的行`users`。这就是为什么有额外`using`的 s 用于检查。

**查询 2： (LEFT JOIN)**：您说它可以返回table 中的*所有行*`ping`以及与table*匹配的任何行* 。`user_id``users`

这里的区别问题是您是否**要求**第二个表中存在匹配值。在查询 1 中，它必须添加额外的检查以确保有匹配的值，在查询 2 中，它没有。

# android - Android 可见经过时间（以秒为单位更新）

> ID：15010544
> 
> 赞同：0
> 
> 时间：2013-02-21T19:22:53.360
> 
> 标签：android, xamarin.android

我正在尝试在活动中显示经过的时间（计时器仅限于活动）检查时间流逝没有问题

```
SystemClock.CurrentThreadTimeMillis 
```

但是我不知道如何更新我有显示的片段。有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:28:49.597

我会首先研究[Handler](http://developer.android.com/reference/android/os/Handler.html)或[CountDownTimer](http://developer.android.com/reference/android/os/CountDownTimer.html)，它们中的任何一个都应该能够帮助你做你想做的事情。你的问题有点模糊，所以我能做的最好的就是为你指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:28:59.067

如果您使用支持片段：

`getSupportFragmentManager().findFragmentById(R.id.frag_container).updateView(time)`

如果没有，请使用：

`getFragmentManager().findFragmentById(R.id.frag_container).updateView(time)`

`R.id.frag_container`保存片段的框架 在哪里。`updateView(Time t)`是您片段中的一种方法。

如果您没有使用框架，并且片段通过`<fragment.../>`在您的 xml 中使用嵌入到您的活动中，那么您只需使用`R.id.fragId`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T22:51:02.420

我刚刚意识到存在一个名为[Chronometer](http://developer.android.com/reference/android/widget/Chronometer.html)的类，它完全可以满足我的需要。

# c++ - 使用命名空间std然后包括boost？

> ID：15010549
> 
> 赞同：0
> 
> 时间：2013-02-21T19:23:30.023
> 
> 标签：c++, boost, c++11

考虑以下 C++11 程序：

```
 #include <stdhdr1>
 #include <stdhdr2>
 #include <stdhdr3>

 using namespace std;

 #include <boost1>
 #include <boost2>
 #include <boost3>

 int main()
 {
 } 
```

where`stdhdrn`是标准库头文件，并且`boostn`是 boost 头文件。

是否存在无法编译的情况？

此外，考虑到 main 中的一些额外用户代码，是否存在因打开 std 命名空间而导致的歧义（或其他错误），无法通过明确限定歧义（或错误）实体来解决？

（例如，因为 ADL 考虑了开放的 std 命名空间还是其他？）

（换句话说，可以在打开的 std 命名空间之后包含 boost 句柄吗？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T19:31:14.963

我不相信会有问题，因为`std`不包含名为 的命名空间`boost`，所以仍然不会有任何名称冲突。

至于 ADL：ADL 只考虑类类型的封闭命名空间。ADL 为 boost 类类型找到的任何函数都必须位于`boost`命名空间中的某个位置。

`::std_entity`只需对标准库实体和`boost::boost_entity`boost 实体执行操作，您就可以解析所有实体。

但是，如果不明确尝试，我想不出一个好方法来证明这一点。当然，避免任何问题的可靠方法是不做`using namespace std;`，如果你真的必须（你没有），只有在所有包含后才做。

# html - 有没有办法阻止 Exchange 服务器重新格式化我的 HTML 邮件？

> ID：15010550
> 
> 赞同：1
> 
> 时间：2013-02-21T19:23:30.223
> 
> 标签：html, transformation, exchange-server

我有一个 C# 程序（除其他外）创建 HTML 消息体。消息有一点内联 CSS，标签有一些样式属性。发送时，消息完全符合规范。

但是，Exchange 服务器对 HTML 邮件正文中的所有 CSS 和格式标记执行（残酷的）转换，并且几乎将所有内容重新写入其自己的“等效”格式。大多数结果实际上在视觉上是相同的，但由于某种原因，某些格式在翻译中丢失了 - 即转换似乎是“正确但有损”。

我们使用标准的 Microsoft.Exchange.WebServices.Data.EmailMessage 对象。发件人有没有办法抑制 Exchange 的翻译行为，只推送原始 HTML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:01:52.500

简单的答案：使用 SMTP，而不是 Exchange。

# gtk - 获取 GtkEntry 的背景颜色

> ID：15010551
> 
> 赞同：1
> 
> 时间：2013-02-21T19:23:30.773
> 
> 标签：gtk, gtk3

获取常规小部件 (GtkWidget) 的颜色非常容易。

我只是获取`GtkStyleContext`和调用`get_background_color`函数。但我无法获得像`GtkTreeView`或之类的小部件的背景颜色`GtkEntry`。

那么问题是如何获得它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T08:13:59.330

好的，我找到了解决方案：gtk_style_context_get_style_property(in context,in prop_str, out value)。prop_str 是样式属性名称（小部件文档中的“样式属性”部分，不同的小部件有不同的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-14T04:53:15.170

是的，你是对的......你应该在 gtk_style_context_get_style_property 函数中提供“背景颜色”作为 prop_str ，它将返回背景颜色。

# overlap - 计算单元格的重叠

> ID：15010555
> 
> 赞同：0
> 
> 时间：2013-02-21T19:23:39.310
> 
> 标签：overlap

我正在尝试随机排列不同大小的单元格，然后计算不同单元格之间的重叠区域。因此，重叠可以是以下任何一种，也可能是其他一些。我正在不同单元格之间进行一对一的比较，以检查重叠并计算它。

![在此处输入图像描述](../Images/e83676f19496ea0302a024a78390f792.png)

所以我必须检测重叠并计算绿色区域。假设我将单元格命名为单元格 1 和单元格 2，左侧的值为 x1，右侧的值为 x2。底部为 y1，顶部为 y2。所以这是我现在的代码，但似乎并没有涵盖它的所有部分。将黑色单元格视为 cell1，将红色单元格视为 cell2，

```
if (cell1.x2 > cell2.x1)
{
    if(cell1.y2 > 
     if ((cell1.y2 > cell2.y1) && (cell2.y1 >= cell1.y1))
    {
    if(cell1.y2 > cell2.y2)
    {
         if (cell1.x2 > cell2.x2)
        {   
            Area = cell2.h * cell2.w;
            continue;
        }
        Area = cell2.h * cell2.x1 - cell1.x2);
        continue;
        }

    Area = cell1.x2 - cell1.x1) * cell1.y2 - cell2.y1);
    continue;
    } 
```

我想我缺少一些条件，但这看起来像很多 if 语句。计算面积的理想方法是什么？

# python - 外部访问时的 Python Bottle 问题

> ID：15010556
> 
> 赞同：1
> 
> 时间：2013-02-21T19:23:43.937
> 
> 标签：python, html, port, bottle

所以我使用python的bottle模块来监听我服务器上的请求。我已经在本地完成了所有测试，现在已经到了部署的时间，我无法让它在我的服务器上运行。

```
from bottle import route, get, post, request, Bottle, run, template

@route('/Request/<UniqueID>') #Build Temporary Webpage
def login_form(UniqueID):
    return '''<form method="POST" action="/SLR_Creation">
                ID: <input name="UID" type="text" value="''' +UniqueID+ '''" /><br />
                Scale: <input name="Scale" type="text" value="10000"/><br />
                <input type="submit" value="CLick here to create report"/>
              </form>'''

@route('/<UniqueID>', method='POST') # Return
def PHPH_Script(UniqueID):
     # Big long script to create a report
     return '''<p>The report has been created. Click this button to access it.<br /></p>
            <form action="''' + WebLocation +'''.html">
                <input type="submit" value="CLick here to access report">
            </form>'''    

# Create and Run Page
#run(host='localhost', port=8080)
run(host='12.34.255.89', port=80) # This is not my actually IP Address. 
```

现在最后一行代码一直给我一个错误：**错误：[Errno 10049]请求的地址在其上下文中无效。**现在，如果我使用注释掉的行，它就像一个魅力。

我知道我的 IP 是正确的并且端口是开放的，所以有人知道我的问题是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:19:04.183

可能有几个问题：

1.  端口 80 可能正在被另一个任务使用，即使它崩溃了。

2.  如果你使用说端口 8080 你必须使用

    `http://12.34.255.89:8080/Request/...`

3.  `method='POST'`在某些情况下可能会遇到保护问题并且不可靠。

4.  查看路线是否匹配，包括以下内容`.html`

# coffeescript - coffeescript中的应用范围

> ID：15010558
> 
> 赞同：0
> 
> 时间：2013-02-21T19:23:47.423
> 
> 标签：coffeescript

我正在使用coffeescript 开发一个Web 应用程序。

*   我将所有类都放在单独的文件中。
*   这些类引用了一些全局常量（声明了我的应用程序）。

我想从另一个文件 main.coffee 创建这些对象的实例。

如何在应用程序范围内拥有类和常量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:47:27.487

我注意到 100% 知道 amd 是如何工作的，但是尽管有`MyNamespace`和编译器的选项，`--bare`你可以在使用 coffeescript 编译器编译之前将文件连接到一个“大”文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:51:02.760

其他答案建议这样做，但您可能不想使用 编译`--bare`，因为它会使文件中的*所有*顶级声明都是全局的：不仅是类，还有辅助函数、常量和仅用于该文件，您可能不想放入全局命名空间。

最好是显式的和 use `class window.MyClass`，这会将*那个*类放在全局命名空间中。

或者更好的是，如果您的应用程序有一个命名空间，例如，在您声明的文件中：

```
# Namespace for application stuff.
window.App = {} 
```

然后，您可以通过以下方式将类放入该命名空间：

```
# In another file; make sure the first file gets executed before so `App` exists.
class App.MyClass 
```

然后，您可以通过引用它（包括其命名空间）从任何地方实例化和使用该类：

```
c = new App.MyClass
c.someMethod() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T19:35:02.373

您要么需要使用该`--bare`选项编译所有文件，这使得您的所有类都可以通过“全局”范围（`window`浏览器环境中的变量）使用，或者您可以定义自己的`window.MyNamespace = {}`并明确地使您的类可用，例如：

```
class MyClass
   ...

window.MyNamespace.MyClass = MyClass 
```

你已经标记了你的帖子`requirejs`，我相信它比我对你的问题给出的任何建议都有更好的解决方案，其中每个模块实例都被明确传递，但 requirejs 本身就是一个完整的主题。

# orchardcms - 尝试设置果园站点时出错

> ID：15010561
> 
> 赞同：1
> 
> 时间：2013-02-21T19:24:07.823
> 
> 标签：orchardcms

尝试在果园设置站点得到以下任何人都可以帮助

> > 连接对象不能在事务范围内登记。说明：在执行当前 web >>request 期间发生了未处理的异常。请查看堆栈跟踪以获取有关错误的更多信息以及它在代码中的来源>>。
> > 
> > 异常详细信息：System.InvalidOperationException：连接对象不能>>在事务范围内登记。
> > 
> > 源错误：
> > 
> > 第 332 行：contentItemCriteria.SetCacheable(true); 第 333 行：第 334 行：返回 contentItemVersionCriteria.List()；第 335 行：} 第 336 行：

# javascript - 在 JavaScript 中使用 screen.width 检测平板电脑

> ID：15010565
> 
> 赞同：1
> 
> 时间：2013-02-21T19:24:19.570
> 
> 标签：javascript

我正在尝试检测客户端是否在 JavaScript 中使用平板电脑。如果可以的话，我不想使用 CSS3 或 UserAgents。我想到的一种方法是使用`screen.width`浏览器内的属性来获取设备宽度并检测平板电脑是否`screen.width`小于某个阈值。

大家觉得这会是一个好的解决方案吗？

对这个属性的支持是什么？大多数平板电脑都支持此功能吗？

对于任何反馈，我们都表示感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:35:20.400

我不认为你会用这种方法实现你想要的。如果你真的想只使用 javascript 而没有“魔术方式”（CSS3、UserAgents 等......），我建议你像语言按钮一样简单地添加一个“切换按钮”......比如“切换到视图：平板电脑/台式机”。

# php - 在 CakePHP 2.3 中创建公共函数的最佳方法

> ID：15010571
> 
> 赞同：1
> 
> 时间：2013-02-21T19:24:36.750
> 
> 标签：php, cakephp

我需要创建 1 个或多个文件来集中有关特定操作的所有功能，例如：

*   返回客户支票的总和。
*   关闭特定客户的支票。
*   将特定表的所有项目转移到其他。

但函数使用 2 个或更多模型，并在数据库（crud）中执行一些操作。

我需要创建一个行为或组件？

如何在行为/组件中使用 1 个或多个模型？**参考**？**类注册表**？**加载模型**（）？

最好的做法是什么？

* * *

*如果某些用户可以编辑我的文本，以便其他人更清楚，我很感激。并且，如果标题不正确，也要更改。谢谢你。*

*对不起我的英语。我知道这很糟糕*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:05:21.837

您的票缺少大量信息，但让我尝试猜测一下：

这听起来像您有三个或四个模型，它们的数据应该相互关联。我认为它是这样的：

表：

*   顾客
*   查看
*   购物车项目
*   购买物品

协会：

*   客户有很多支票
*   客户有很多购物车项目
*   BuyItem 属于客户

您所谓的“lib”并且您想要触发的内容肯定是由单个操作触发的，例如“结帐”或“运行报告”操作。对我来说，这听起来像是您想要结帐购物车或为客户生成商品列表。

在您的 Customer 模型中有这样的方法：

```
public function report($customerId, $checkid) {
    $sum = $this->Check->calculateSum($customerId, $checkId);
    $checkClosed = $this->Check->close($checkId);
    $items = $this->CartsItem->find('all', array(
        'conditions' => array('CartsItem.customer_id' => $customerId)));
    foreach ($items as $item) {
        $this->BoughtItem->save($item['CartsItem']);
    }
    $this->CartsItem->deleteAll(array('CartsItem.customer_id' => $customerId));
    return compact('sum', 'checkClosed', 'items');
} 
```

如果您的数据不相关，请使用 ClassRegistry::init('ModelName'); 获取另一个模型的实例。

但关键是您所做的一切都是数据操作，因此对于模型方法来说这是一项明确的工作。如果您需要请求中的参数，只需将它们作为参数传递给该方法。您的方法可以返回您需要的任何内容，这取决于您。

“lib”*不是*您想要做的事情的正确位置甚至模式。

# php - PHP MSSQL (Transact-SQL) - 带有 IN 子句和数组中的多个值的参数化查询

> ID：15010572
> 
> 赞同：0
> 
> 时间：2013-02-21T19:24:38.893
> 
> 标签：php, sql-server, tsql, parameterized

我被一段 PHP 代码（PHP 5）困住了，我在其中运行 SQL 查询（Transact SQL）。

代码（不起作用）：

```
$query = "
  UPDATE my_table
  SET my_column = 'some_value'
  WHERE my_id IN (?);" // does not work :-(
sqlsrv_query($my_connection, $query, array('abc', 'def', 'ghi')); // does not work :-( 
```

我正在尝试做的事情：为 my_id 等于 abc、def 和 ghi 的行更新 my_column 中的 my_table。

但是，当我编写没有参数的相同 SQL 查询时（这有效）：

```
$query = "
  UPDATE my_table
  SET my_column = 'some_value'
  WHERE my_id IN ('abc', 'def', 'ghi');" // works :-)
sqlsrv_query($my_connection, $query); // works :-) 
```

我试过像这样执行 sqlsrv_query 命令

```
sqlsrv_query($my_connection, $query, array('abc', 'def', 'ghi')); 
```

像这样

```
sqlsrv_query($my_connection, $query, array(array('abc', 'def', 'ghi'))); 
```

像这样

```
sqlsrv_query($my_connection, $query, 'abc', 'def', 'ghi'); 
```

它们都不起作用。

有人可以帮帮我吗？我已经很好地阅读了手册。像这样写SQL

```
... WHERE my_id IN (?,?,?)... 
```

不是一个选项，因为我的数组将包含可变数量的值！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:13:21.650

Colin 和 ESDictor 给出了我的问题的答案：

```
$params = array('abc', 'def', 'ghi');
$query = "
  UPDATE my_table
  SET my_column = 'some_value'
  WHERE my_id IN (" . implode(',', array_fill(0, count($params), '?')) . ");" // works like a charm
sqlsrv_query($my_connection, $query, $params); 
```

感谢你们！科林，我想特别支持你的回答（但不能因为你“只是”评论。ESDictors 的回答基本上是一样的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:43:24.127

我只是在 Visual Studio 中处理了同样的问题。首先，我创建了一串参数以添加到 SQL 语句中。您只需要处理问号 (?)，我所做的很多事情都超出了您的需要：

```
string[] inClause = new string[keywordTerms.Length];

for (int i = 0; i < keywordTerms.Length; i++)
    inClause[i] = ":keyword" + i.ToString("00"); 
```

然后在创建我的选择时，我输入以下内容：

```
sqlStatement += "WHERE kw.keyword IN (" + String.Join(", ", inClause) + ")" 
```

最后，我在这段代码中添加了参数：

```
for (int i = 0; i < keywordTerms.Length; i++)
    cmd.Parameters.Add(inClause[i], OracleDbType.Varchar2, 20, "keyword").Value = keywordTerms[i]; 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T19:37:50.353

尝试这个：

```
$params = array('abc', 'def', 'ghi'); //assume it dinamic
$query = "
UPDATE my_table
SET my_column = 'some_value'
WHERE my_id IN (";
$inside = "";
foreach ($params as $key => $value) {

$inside = $inside."?,";
}

$inside = trim ($inside,",");
$query = $query.$inside.");";

sqlsrv_query($my_connection, $query, $params); 
```

PS：现在代码可以处理动态数组 XD

萨卢多斯 ;)

# regex - 可能包含 8 或 9 个数字的正则表达式 - 怎么办？

> ID：15010573
> 
> 赞同：0
> 
> 时间：2013-02-21T19:24:44.287
> 
> 标签：regex, digits

我使用这个正则表达式来验证巴西手机：

```
/^(\([0-9]{2}\))\s([9]{1})?([0-9]{4})-([0-9]{4})$/ 
```

输出：`(31) 8876-3234`有效

但*圣保罗*州有 9 位数的手机：

输出*SP*：`(31) 98876-3234`

当前的正则表达式需要调整以接受它也是有效的，关于我应该改变什么的任何提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T19:26:04.107

您可以使用`{m,n}`量词创建一个范围：

```
/^(\([0-9]{2}\))\s([0-9]{4,5})-([0-9]{4})$/ 
```

尽管您的正则表达式似乎很好，因为它`9`在 4 位数字之前可以选择匹配。但是，如果有任何可能存在其他任何东西`9`，那么您可以使用这个正则表达式。

# java - 用于机场航班的 Java 生产者-消费者

> ID：15010574
> 
> 赞同：1
> 
> 时间：2013-02-21T19:24:45.153
> 
> 标签：java, producer-consumer

我有一个 40 个定期航班的数组；每个航班对象都存储了数据：航班号、航空公司、出发城市、到达城市、飞行时间、飞行长度。

随着每个航班时间的发生，**航班事件生成器线程**将更改每个航班的状态，从 Scheduled、Departed、Departed、Delayed、Arrived 等。这部分不是问题。

生产者-消费者方面如下。随着这些事件的发生（出发、到达、延误），上述航班事件生成器线程必须将这些更改发布到**航空公司线程**，每个航空公司都有一个线程（由航班对象指定：西南航空、美国航空等）。然后，这些航空公司线程会将更改发布到每个**机场航班监控线程**，每个机场一个线程（同样，由航班对象指定）。这些线程依次发布对文件的更改。

我的问题是，我究竟应该如何处理这个看似复杂的生产者-消费者问题？另外，我应该如何处理两个出发时间相同的航班？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:30:17.897

通常在java中实现Producer/Consumer模式使用[`java.util.concurrent.BlockingQueue`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)。

看看[这篇](http://blog.ilandos.com/producer-consumer-blocking-queue)博文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:34:10.457

通过 Caveofprogramming 在 YouTube 上浏览这些视频教程：

这是使用 Java 开箱即用支持的阻塞队列：
[http ://www.youtube.com/watch?v=Vrt5LqpH2D0&list=PLBB24CFB073F1048E](http://www.youtube.com/watch?v=Vrt5LqpH2D0&list=PLBB24CFB073F1048E)

这是如果您想使用等待、通知等编写我们自己的同步逻辑：
[http ://www.youtube.com/watch?v=gx_YUORX5vk&list=PLBB24CFB073F1048E](http://www.youtube.com/watch?v=gx_YUORX5vk&list=PLBB24CFB073F1048E)

实际上，您应该在他的频道上阅读有关多线程的整个系列。非常好的教程。

# jquery - jQuery函数在运行前不等待整个页面加载

> ID：15010580
> 
> 赞同：0
> 
> 时间：2013-02-21T19:25:23.263
> 
> 标签：jquery, html, css, facebook-graph-api

我正在根据第二个 div 的高度动态生成一个 div 的高度。#admin_table_2 正在生成一个表，我希望它的高度与它所包含的 div 的高度相同。问题是我正在查询 Facebook 图表，所以它需要一分钟来布置表格。基本上，jQuery 函数在完全加载完成之前会获取 #admin_table_2 的高度，因此虽然 div 可能是 1000px 高，但它会生成更大 div 的高度为“236px”，例如，因为它会在 div 完成之前获取值加载。这是我的代码：

```
$(document).ready(function() {  
$("#left").css({'height':($("#admin_table_2").height()+'px')});
}); 
```

它正在做正确的事情，只是没有等到文档完全加载完成。我假设文档实际上已完成加载，但 Facebook Graph 花费的时间比页面长。关于如何在生成高度之前等待图形查询完成的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:01:10.053

如果您想等到页面完成加载，请使用窗口的加载事件。根据资产的数量和大小，文档就绪事件可以在加载事件之前触发很长时间。

# mysql - 将运算符发送到 mysql 语句

> ID：15010582
> 
> 赞同：0
> 
> 时间：2013-02-21T19:25:31.593
> 
> 标签：mysql, perl, cgi

我已经坚持了大约三个小时并在网上搜索，我需要做的就是让 popup_menu 将运算符发送到 mysql 语句，这就是我到目前为止所拥有的。

```
$sqltest=$dbh->prepare("SELECT Time, Date, Event FROM Events WHERE Date ? ?");
$sqltest->execute(param('1'),(param('4')."-".param('3')."-".param('2')));

popup_menu({-values=>["<",">","="], -name=>'1'}) 
```

如果我删除第一个问号并将其替换为运算符，则代码可以完美运行，因此所有其他参数都可以正常工作，只是发送运算符时出现问题。

祝大家欢呼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:33:06.907

您只能将值绑定到参数。运算符不是值，因此您不能将其绑定到参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:27:23.407

如您所见，您不能绑定运算符。如果您不想动态构建查询字符串，则有一种编程方法：

```
%sqltest = (
    '<' => $dbh->prepare("SELECT Time, Date, Event FROM Events WHERE Date < ?"),
    '=' => $dbh->prepare("SELECT Time, Date, Event FROM Events WHERE Date = ?"), 
    '>' => $dbh->prepare("SELECT Time, Date, Event FROM Events WHERE Date > ?")
);
$sqltest{param(1)}->execute( param('4')."-".param('3')."-".param('2') ); 
```

# amazon-web-services - 如何保存 JPG/PNG 文件并让它保留正确的 Content-Type

> ID：15010585
> 
> 赞同：0
> 
> 时间：2013-02-21T19:25:36.370
> 
> 标签：amazon-web-services, amazon-s3, boto, django-storage

我通过以下方式将服务器中的图片文件保存在 S3 中的存储桶中：

```
request = urllib2.Request('http://link.to/file.jpg')
response = urllib2.urlopen(request)
jpg_data = response.read()

storage = S3BotoStorage(bucket='icanhazbukkit')
my_file = storage.open(path_to_new_file, 'w')
my_file.write(jpg_data)
my_file.close() 
```

该文件被写入，但在某个地方 MIME 上下文丢失，保存的图像将返回`Content-Type: binary/octet-stream`，浏览器将尝试下载而不是在其 URL 被击中时显示。

有什么办法可以减轻这种情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T08:35:12.050

当你这样做

```
jpg_data = response.read() 
```

我相信 boto 会丢失有关文件扩展名的信息，它用于猜测 mimetype。所以当你存储它的时候

```
my_file.write(jpg_data) 
```

boto/S3 所知道的是它有某种二进制数据要写入。

如果您在程序中替换这些行：

```
storage = S3BotoStorage(bucket='icanhazbukkit')
my_file = storage.open(path_to_new_file, 'w')
my_file.write(jpg_data)
my_file.close() 
```

和

```
bucket = conn.create_bucket('icanhazbukkit')
k = Key(bucket)
k.name = "yourfilename"
header = {'Content-Type' : 'image/jpeg'}
k.set_contents_from_string(jpg_data, header) 
```

您可以通过使用标头参数指定 Content-Type 来控制它

如果要保留原始获取的 Content-Type，可以执行以下操作：

```
request = urllib2.Request('http://link.to/file.jpg')
response = urllib2.urlopen(request)
file_data = response.read()

bucket = conn.create_bucket('icanhazbukkit')
k = Key(bucket)
k.name = "yourfilename"
origType = response.info().gettype()
header = {'Content-Type' : origType}
k.set_contents_from_string(file_data, header) 
```

# optimization - 使用 r.js 优化项目并包含已经 r.js 优化的模块

> ID：15010589
> 
> 赞同：0
> 
> 时间：2013-02-21T19:25:59.120
> 
> 标签：optimization, requirejs, r.js

我有两个使用 RequireJS 的应用程序。一个使用另一个作为插件，如果你愿意的话，一个模块。插件/模块已经使用`r.js`.

当我在我的服务器上运行应用程序时，一切正常，在这种状态下，应用程序尚未优化，只有插件/模块。

当我通过优化应用程序`r.js`并包含插件/模块`r.js`时会引发错误，因为它找不到插件/模块使用但最终在插件/模块得到优化时被捆绑的文件。

那么我该如何解决呢？我想我有以下选择：

1.  当我构建我的主应用程序时，我包含未优化的插件/模块并一次优化它。
2.  我将优化插件/模块中的所有 URL 添加到配置中并将它们指向`:empty`，但这将是一个球痛，因为这些路径是*动态*的。

那我还能做什么？有没有办法告诉`r.js`任何一个：

1.  不要费心在我优化的插件/模块中寻找所需的路径。
2.  以某种方式编译我的插件/移动设备，但从其中删除所有痕迹`define`，`require`从而使其自包含，如果可能的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T08:33:42.663

所以我通过将我的插件/模块作为依赖项而不是应用程序的一部分来解决这个问题。

由于为您的应用程序拥有一个主配置文件是个好主意，因此我告诉`r.js`使用它，但随后将我的插件/模块的 URL 欺骗为特殊`empty:`值。

然后停止`r.js`尝试查找已经优化的插件/模块的所有依赖项，并允许我将其作为依赖项包含在内；现在一切都很好。

# java - 从我的 Service 类中的 MainActivity 修改变量，然后用变量更新 TextView

> ID：15010590
> 
> 赞同：0
> 
> 时间：2013-02-21T19:25:59.070
> 
> 标签：java, android

每当运行服务时，我都会尝试从 MainActivity.class SharedPrefs 修改变量（幸福）。我似乎无法弄清楚如何做到这一点。请在我的代码下面找到，我的结果以幸福 = -1 结束，这是因为我理解 prefEditor.putInt 但不确定如何继续修改和返回值。

```
public class MainActivity extends Activity {

int Health = 100;
private static final int Happiness = 100;
int Hunger = 0;
int Level = 1;
EditText happiness_display,
         health_display,
         hunger_display,
         level_display;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        SharedPreferences settings = getSharedPreferences("APP_PREFS",
                                                  MODE_PRIVATE);
        SharedPreferences.Editor prefEditor = settings.edit();
        prefEditor.putInt("HAPPINESS", Happiness);
        prefEditor.commit();

        WebView myWebView = (WebView) findViewById(R.id.pet_display);
        myWebView.loadUrl("file:///android_asset/renamon.gif");
        myWebView.setInitialScale(10000);

        ShowToast();

        TextView happiness = (TextView) findViewById(R.id.happiness_display);
        happiness.setText(Integer.toString(Happiness));

        Calendar cal = Calendar.getInstance();

        Intent intent = new Intent(this, chronos.class);
        PendingIntent pintent = PendingIntent.getService(this, 0, intent, 0);

        AlarmManager alarm = (AlarmManager)getSystemService(Context.ALARM_SERVICE);

        // Start every 30 seconds
        alarm.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), 30*1000, pintent); 
    }

    private void ShowToast() {
        Toast.makeText(getApplicationContext(), "Toast method invoked from on create " + Happiness, Toast.LENGTH_LONG).show();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

}

public class chronos extends Service {

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        SharedPreferences settings = getSharedPreferences("APP_PREFS",
                MODE_PRIVATE);
        SharedPreferences.Editor prefEditor = settings.edit();
        prefEditor.putInt("HAPPINESS",  - 1);
        prefEditor.commit();
        Toast.makeText(getBaseContext(), "Chronos running" + settings.getInt("HAPPINESS", 0), Toast.LENGTH_LONG).show();

        return super.onStartCommand(intent, flags, startId);
    }
} 
```

如果我的方法是错误的（可能是：P），任何帮助表示赞赏或指向正确的方向

这可能是我的不连贯，但我基本上想修改幸福，健康等的值。每次运行服务时，就像一个游戏循环，但对于虚拟宠物。

我的 IntentService 中的示例代码

```
happiness = happiness - 1;
        SharedPreferences.Editor prefEditor = settings.edit();
        prefEditor.putInt("HAPPINESS", happiness);
        prefEditor.commit(); 
```

我只希望每次服务运行时从一些变量中减去一定数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:34:00.997

尝试这个。

首先，使用`IntentService`而不是`Service`它会阻塞 UI 线程。

像这样

```
public class chronos extends IntentService {

    int happiness;
    public chronos() {
        super("chronos");
        // TODO Auto-generated constructor stub
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        // TODO Auto-generated method stub

        SharedPreferences settings = getSharedPreferences("APP_PREFS",
                MODE_PRIVATE);

            happiness = settings.getInt("HAPPINESS",0) - 1;

            SharedPreferences.Editor prefEditor = settings.edit();
            prefEditor.putInt("HAPPINESS",happiness);
            prefEditor.commit();

        Toast.makeText(getBaseContext(),
                "Chronos running" + settings.getInt("HAPPINESS", 0),
                Toast.LENGTH_LONG).show();

    }

} 
```

如果`TextView`要从 Service 更新 MainActivity 的值，需要使用[BroadcastReceiver](http://www.websmithing.com/2011/02/01/how-to-update-the-ui-in-an-android-activity-using-data-from-a-background-service/)

# jquery - 显示 facebook 专辑封面照片 _n 而不是 _s

> ID：15010598
> 
> 赞同：0
> 
> 时间：2013-02-21T19:26:39.883
> 
> 标签：jquery, facebook-graph-api, getjson

我正在使用以下代码来获取 facebook 专辑封面照片

[将 Facebook 相册嵌入网站](https://stackoverflow.com/questions/12005215/embed-facebook-albums-into-website)

```
<script>
  $(document).ready(function() {
    var albumIdsUrl = "https://graph.facebook.com/<myname>/albums?callback=?";

    $.getJSON(albumIdsUrl, function(data) {
       var len = data.data.length;
       for(var i=0;i<len;i++){
        var aid = data.data[i].id;
        getAlbumCoverPhoto(data.data[i].cover_photo, data.data[i].id, data.data[i].name, data.data[i].count);
   }
}); 

});

function getAlbumCoverPhoto(coverPhoto, albumId, albumName, count) {
    var coverPhotoUrl = "https://graph.facebook.com/" + coverPhoto + "?callback=?";
        $.getJSON(coverPhotoUrl, function(coverPhotoData) {
            if(typeof(coverPhotoData.picture)!="undefined"){
                    htmlData = '<li><figure><a class="imageLink" href="fb_album_photos.html?id='+ albumId + '"><img src="' + coverPhotoData.picture + '" /></a></figure><figcaption>'+albumName+'</br>'+count+' Photos</figcaption></li>';
                    $('#FBalbum').append(htmlData);
            }
        });             
}  
</script> 
```

这会正确返回，但会获得低分辨率 _s 照片 [http://photos-d.ak.fbcdn.net/hphotos-ak-prn1/75750_121602837899727_4898592_s.jpg](http://photos-d.ak.fbcdn.net/hphotos-ak-prn1/75750_121602837899727_4898592_s.jpg)

而不是更高分辨率的 _n 照片。 [http://photos-d.ak.fbcdn.net/hphotos-ak-prn1/75750_121602837899727_4898592_n.jpg](http://photos-d.ak.fbcdn.net/hphotos-ak-prn1/75750_121602837899727_4898592_n.jpg)

如何更改它以获得正确的照片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:14:15.457

Facebook 相册对象有一个称为照片的连接。照片连接将给出此相册下的照片列表。这个 Photo 对象有一个名为 images 的字段。图像字段将给出 4 种不同的照片存储表示。

```
https://graph.facebook.com/me/albums?fields=photos.fields(picture,images)

"data": [
    {
      "id": "10150146071831729", 
      "from": {
        "category": "Product/service", 
        "name": "Facebook", 
        "id": "20531316728"
      }, 
      "picture": "https://fbcdn-photos-a.akamaihd.net/hphotos-ak-ash3/168119_10150146071831729_5116892_s.jpg", 
      "source": "https://fbcdn-sphotos-g-a.akamaihd.net/hphotos-ak-ash3/168119_10150146071831729_5116892_n.jpg", 
      "height": 483, 
      "width": 720, 
      "images": [
        {
          "height": 1373, 
          "width": 2048, 
          "source": "https://fbcdn-sphotos-g-a.akamaihd.net/hphotos-ak-ash3/s2048x2048/168119_10150146071831729_5116892_n.jpg"
        }, 
```

在图片下，您可以看到带有 _n.jpg 的图片。

# asp.net - 在 ASP.NET 中创建日历应用程序，处理时区

> ID：15010600
> 
> 赞同：0
> 
> 时间：2013-02-21T19:26:42.653
> 
> 标签：asp.net, datetime, calendar, timezone

我正在使用 ASP.NET 3.5 和 SQL Server 2008 编写日历网站，并希望以最佳方式处理时区。我已经阅读了这些资料：

[夏令时和时区最佳实践](https://stackoverflow.com/questions/2532729/daylight-saving-time-and-timezone-best-practices)

[http://noda-time.blogspot.com/](http://noda-time.blogspot.com/)

[http://msdn.microsoft.com/en-us/library/ms973825.aspx](http://msdn.microsoft.com/en-us/library/ms973825.aspx)。

我已经记下了所有的一般信息，但是很难将其转换为实际代码。不是在找人为我编写代码，但如果我知道其他人为这个非常具体的案例做了什么（日历应用程序，事件的日期/时间，因为“东部时间下午 5 点”应该始终是“东部时间下午 5 点”，那么我会有所帮助。规则改变）。

你在使用 .NET DateTimeOffset 和 TimeZoneInfo 类吗？我不认为他们支持“使用 2011 年 1 月 2 日存在的规则将此 UTC 时间转换为 EST”之类的东西，我认为这是创建“正确”处理时区的日历应用程序所需的控制级别。我也不认为这样做的每个人都在使用 Noda Time，因为我几乎找不到任何关于该库的示例或讨论。可能Java版本用的比较多，但是很多app都是用.NET写的，那他们在干嘛呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:22:20.047

并不是真的认为这是正确的答案，但认为最好将其作为答案发布-如果这是正确的，也只是因为这样更容易阅读/遵循。

**如果我朝着正确的方向前进，请告诉我：**

1.  使用 DateTimeOffset 和 TimeZoneInfo 类

2.  在数据库中保存 DateTimeOffset 值和偏移量。同时保存 TimeZoneInfo.id (tz id)。

3.  在使用数据库中的值之前，始终将保存的偏移量与当前的 TimeZoneInfo 偏移量进行比较，并根据差值调整 DateTimeOffset 值。这就是解决“政府更改规则”问题并将“东部时间下午 4 点”时间保持为“东部时间下午 4 点”的方法（即使由于新规则而与 UTC 的偏移量发生了变化）。

4.  为了使查找特定日期/时间或范围的查询起作用，只要规则发生变化（由政府），请检查并“修复”数据库中的每条记录。修复与上述 #3 使用的步骤相同，但在修复后保存新值。

这是别人正在做的吗？对#4 并不是很疯狂，因为我需要在 Windows 更新应用新规则的同时执行此操作……在 Windows 更新和我的数据库更新完成之间的任何时间，它都可能产生无效的查询结果。我想这就是“定期维护”的用途，但我们目前对此没有如此严格的政策。

# linux - 在交换器中执行时 Linux 内核模块中的任务所有者 pid

> ID：15010602
> 
> 赞同：0
> 
> 时间：2013-02-21T19:26:44.783
> 
> 标签：linux, module, kernel, task, pid

给定一个具有 pid 0 和 comm "swapper/0" 的任务实例，如何获取所有者 pid？

==编辑==

这使用 Netfilter 钩子发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:48:06.323

> 在操作系统 Unix 中，除了进程 0（交换器）之外的每个进程都是在另一个进程执行 fork() 系统调用时创建的。调用fork的进程是父进程，新创建的进程是子进程。每个进程（进程 0 除外）都有一个父进程，但可以有许多子进程。
> 
> 操作系统内核通过进程标识符来识别每个进程。进程0是系统启动时创建的特殊进程；在 fork 一个子进程（进程 1）之后，进程 0 成为交换进程（有时也称为“空闲任务”）。进程 1，称为 init，是系统中所有其他进程的祖先。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:28:39.397

如果数据包是 UDP，netfilter 传出挂钩上下文中的`current`任务将始终具有 TGID（用户空间中的 PID）。

对于 SYN TCP 数据包，`current`任务将具有 TGID，但 ACK 数据包将没有它。要检索 TGID，您必须使用数据包长度从 SYN 数据包中计算套接字序列。

# android - android发布带有HttpClient崩溃的json

> ID：15010603
> 
> 赞同：-2
> 
> 时间：2013-02-21T19:26:45.780
> 
> 标签：android, json, http, gson

我有一个项目，我在使用 HttpClient 但它崩溃了，

我的 json 记录正常，

我有互联网许可，

我在 HTTPClient 中测试了我的请求，并且正在工作，

但我不知道为什么会崩溃？

这是我的代码，

```
public void empaquetaYmanda() {

        Log.d("mensa", "empaquetaYmanda copio");

        //build my dictionary!
        Map<String, String> comment = new HashMap<String, String>();
        comment.put("resource_uri", "pa que esto");
        comment.put("guid", "345");
        comment.put("dob", "13-07-1990");
        comment.put("address", "23 rue sante");
        comment.put("name", "Sakuraba");
        comment.put("mobile", "333456888");
        comment.put("email", "saku@sa.sss");
        comment.put("points", "333999");
        comment.put("surname", "Cerezin");
        comment.put("devicetoken", "token334455Droid");

        Log.d("mensa", "tu dicto :: " + comment);

        //lo serializo dicto a json
        String json = new GsonBuilder().create().toJson(comment, Map.class);

        Log.d("mensa", "tu json :: " + json);

        postData("http://sasa.com/api/v1/client/", json); //my

    }

    public void postData(String uri, String json) {
        // Create a new HttpClient and Post Header
        HttpClient httpclient = new DefaultHttpClient();

        HttpPost httppost = new HttpPost(uri);

     // Url Encoding the POST parameters
            try {
                Log.d("mensa", "tu Encoding");

                httppost.setEntity(new StringEntity(json)); //revisa!
                //httppost.setHeader("Accept", "application/json");
                httppost.setHeader("Content-type", "application/json");

            } catch (UnsupportedEncodingException e) {
                // writing error to Log
                e.printStackTrace();
            }

            Log.d("mensa", "tu request::"+httppost);

            // Making HTTP Request
            try {
                HttpResponse response = httpclient.execute(httppost);

                // writing response to log
                Log.d("Http Response:", response.toString());
                Log.d("mensa", "tu respuesta ::"+response.toString());

            } catch (ClientProtocolException e) {
                // writing exception to log
                e.printStackTrace();
            } catch (IOException e) {
                // writing exception to log
                e.printStackTrace();

            }

    } 
```

这里是错误日志

```
02-22 06:17:40.980: E/AndroidRuntime(19016): FATAL EXCEPTION: main
02-22 06:17:40.980: E/AndroidRuntime(19016): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.hyper.gsonex/com.hyper.gsonex.Main}: android.os.NetworkOnMainThreadException
02-22 06:17:40.980: E/AndroidRuntime(19016):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-22 06:17:40.980: E/AndroidRuntime(19016):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-22 06:17:40.980: E/AndroidRuntime(19016):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-22 06:17:40.980: E/AndroidRuntime(19016):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-22 06:17:40.980: E/AndroidRuntime(19016):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-22 06:17:40.980: E/AndroidRuntime(19016):    at android.os.Looper.loop(Looper.java:137)
02-22 06:17:40.980: E/AndroidRuntime(19016):    at android.app.ActivityThread.main(ActivityThread.java:5039)
02-22 06:17:40.980: E/AndroidRuntime(19016):    at java.lang.reflect.Method.invokeNative(Native Method)
02-22 06:17:40.980: E/AndroidRuntime(19016):    at java.lang.reflect.Method.invoke(Method.java:511)
02-22 06:17:40.980: E/AndroidRuntime(19016):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-22 06:17:40.980: E/AndroidRuntime(19016):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-22 06:17:40.980: E/AndroidRuntime(19016):    at dalvik.system.NativeStart.main(Native Method)
02-22 06:17:40.980: E/AndroidRuntime(19016): Caused by: android.os.NetworkOnMainThreadException
02-22 06:17:40.980: E/AndroidRuntime(19016):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
02-22 06:17:40.980: E/AndroidRuntime(19016):    at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
02-22 06:17:40.980: E/AndroidRuntime(19016):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
02-22 06:17:40.980: E/AndroidRuntime(19016):    at java.net.InetAddress.getAllByName(InetAddress.java:214)
02-22 06:17:40.980: E/AndroidRuntime(19016):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
02-22 06:17:40.980: E/AndroidRuntime(19016):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
02-22 06:17:40.980: E/AndroidRuntime(19016):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
02-22 06:17:40.980: E/AndroidRuntime(19016):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
02-22 06:17:40.980: E/AndroidRuntime(19016):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
02-22 06:17:40.980: E/AndroidRuntime(19016):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
02-22 06:17:40.980: E/AndroidRuntime(19016):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
02-22 06:17:40.980: E/AndroidRuntime(19016):    at com.hyper.gsonex.Main.postData(Main.java:116)
02-22 06:17:40.980: E/AndroidRuntime(19016):    at com.hyper.gsonex.Main.empaquetaYmanda(Main.java:85)
02-22 06:17:40.980: E/AndroidRuntime(19016):    at com.hyper.gsonex.Main.onCreate(Main.java:46)
02-22 06:17:40.980: E/AndroidRuntime(19016):    at android.app.Activity.performCreate(Activity.java:5104)
02-22 06:17:40.980: E/AndroidRuntime(19016):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-22 06:17:40.980: E/AndroidRuntime(19016):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144) 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:27:18.600

您不能在主线程上发出 HTTP 请求，您必须在 AsyncTask 或 Thread 中进行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:32:31.477

您正在尝试在 UI 线程上执行网络操作，这就是它抛出 NetWorkOnUIThreadException 的原因。尝试将与网络相关的代码保存在单独的线程中并执行它。更好的解决方案是使用异步任务。

# javascript - 从多个表单字段中获取数据并动态创建 JSON 字符串

> ID：15010604
> 
> 赞同：0
> 
> 时间：2013-02-21T19:26:49.537
> 
> 标签：javascript, jquery, json, html

我想使用具有相同 cla 的多个输入字段创建一个 JSON 字符串。请允许我向您展示我的 HTML 以供解释

```
<div>
    Email:<input title="QA" type="text" class="email">
    Name: <input type="text" class="name">
</div>

<div>
    Email:<input title="DEV" type="text" class="email">
    Name: <input type="text" class="name">
</div>

<div>
    Email:<input title="PROD" type="text" class="email">
    Name: <input type="text" class="name">
</div> 
```

目前我的JavaScript如下：

```
 var ServerUser = [];

 $("input[class=email]").each(function() {
    var id = $(this).attr("title");
    var email = $(this).val();

    tmp = {};
    tmp['id '] = id;
    tmp['email '] = email;

    ServerUser.push(tmp);
 }); 
```

但是它会产生以下结果

```
[{title: QA, email: 'a@a.com'}, {title: PROD, email: 'b@b.com'},{title: DEV, email: 'c@c.com'}] 
```

我想做的如下

```
[{title: QA, email: 'a@a.com', name: 'Paul'}, {title: PROD, email: 'b@b.com', name: 'Mark'},{title: DEV, email: 'c@c.com', name: 'Mike'}] 
```

名称值将来自相应的名称输入字段。

我该如何解决这个问题？感谢您的帮助和阅读本文。

问候。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T19:34:18.017

```
var inputs = $('input.email'), tmp;
$.each(inputs, function(i, obj) {
  tmp = {
    'title': $(obj).attr('title'),
    'email': $(obj).val(),
    'name' : $(obj).siblings('.name').val()
  };

  ServerUser.push(tmp);
}); 
```

应该这样做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:35:33.293

为什么您不通过将变量插入预写字符串来手动执行此操作？

按每个标题重命名输入。

例子：

var onejson = "[{title: **QA** , email: **emailQA** , name: **nameQA** }, {title: **DEV** , email: **emailDEV** , name: **nameDEV** }, {title: **PRO** , email: **emailPRO** , name: **namePRO** }];

我知道这是一个小步骤，但我认为这不是一个糟糕的解决方案，我会像我描述的那样去做。希望有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T19:59:34.267

这是一种糟糕的编程实践，因为您的输入字段应该具有可用于获取其值的可破译的唯一标识符，但对于您的示例，使用[Next Sibling Selector](http://api.jquery.com/next-siblings-selector/)将允许您选择 div 中的下一个输入元素。

例子：

```
 var ServerUser = [];
    $("input[class=email]").each(function() {

    var id = $(this).attr("title");
    var email = $(this).val();
    var name = $(this).parent().first().find('input:last').val();

    tmp = {};
    tmp['TaskID'] = id;
    tmp['ClientEmail'] = email;
    tmp['ClientName'] = name;

    ServerUser.push(tmp);
 }); 
```

这是一个长选择器，可能有更好的方式来构建表单，因此您不需要这样做，但只要名称输入是您将拥有的最后一个，这将起作用。

# java - 如何从 .sh 脚本中启动可执行 jar？

> ID：15010609
> 
> 赞同：0
> 
> 时间：2013-02-21T19:27:05.887
> 
> 标签：java, linux, shell, sh

我有一个可执行的 jar 文件，我想从 Ubuntu Linux 上的 *.sh 脚本开始。

目前 myapp.sh 文件看起来像这样（**错误：“没有发生”**）：

```
java -jar myapp.jar --start 
```

我也试过（**错误：“/bin/sh：0：无法打开java”**）：

```
/bin/sh java -jar myapp.jar --start 
```

和（**错误：“/bin/sh：0：无法打开 java -jar myapp.jar --start”**）：

```
/bin/sh "java -jar myapp.jar --start" 
```

myapp.sh 文件具有 rwx 权限...当我调用 ./myapp.jar 时没有任何反应。

有人有解决这个问题的办法吗？

提前谢谢了。

编辑 1：这是我的 MANIFEST.MF ：

```
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.8.3
Created-By: 1.6.0_38-b05 (Sun Microsystems Inc.)
Class-Path: lib/gf-client.jar lib/security.jar lib/eclipselink-2.3.2.j
 ar lib/javax.persistence-2.0.3.jar lib/org.eclipse.persistence.jpa.jp
 ql_1.0.1.jar lib/org.eclipse.persistence.jpa.modelgen.processor-2.3.2
 .jar lib/javaee-api-6.0.jar lib/LawSuiteFXW.jar lib/AbsoluteLayout.ja
 r lib/beansbinding-1.2.1.jar lib/antlr-2.7.7.jar lib/antlr-runtime-3.
 3.jar lib/bootstrapconnector.jar lib/commons-codec-1.5.jar lib/common
 s-collections-3.2.1.jar lib/commons-compress-1.3.jar lib/commons-dige
 ster-1.7.jar lib/commons-email-1.2.jar lib/commons-io-2.4.jar lib/com
 mons-lang-2.4.jar lib/commons-lang3-3.1.jar lib/commons-logging-1.1.1
 .jar lib/commons-vfs2-2.0.jar lib/glazedlists_java15-1.9-20111127.203
 634-11.jar lib/icepdf-core.jar lib/icepdf-viewer.jar lib/jasypt-1.9.0
 .jar lib/jcommon-1.0.17.jar lib/jfreechart-1.0.14.jar lib/jhall.jar l
 ib/jms.jar lib/joda-time-2.1.jar lib/junit-3.8.1.jar lib/log4j-1.2.15
 .jar lib/migcalendarbean.jar lib/PDFRenderer-0.9.1.jar lib/xmlsec-2.0
 .jar lib/avalon-framework-api-4.3.1.jar lib/avalon-framework-impl-4.3
 .1.jar lib/docx4j-2.8.1.jar lib/fop-1.0.jar lib/itext-2.1.7.jar lib/j
 axb-svg11-1.0.2.jar lib/jaxb-xmldsig-core-1.0.0.jar lib/jaxb-xslfo-1.
 0.1.jar lib/poi-3.8.jar lib/poi-scratchpad-3.8.jar lib/serializer-2.7
 .1.jar lib/stringtemplate-3.2.1.jar lib/wmf2svg-0.9.0.jar lib/xalan-2
 .7.1.jar lib/xhtmlrenderer-1.0.0.jar lib/xml-apis-1.3.04.jar lib/xmlg
 raphics-commons-1.4.jar lib/poi-ooxml-3.8-20120326.jar lib/poi-ooxml-
 schemas-3.8-20120326.jar lib/batik-1.1.1.jar lib/ftp4j-1.7.2.jar lib/
 AppleJavaExtensions-1.4.jar lib/swingx-all-1.6.4.jar lib/swingx-beani
 nfo-1.6.4.jar lib/pdfbox-1.7.1.jar lib/fontbox-1.7.1.jar lib/jempbox-
 1.7.1.jar lib/jai_codec.jar lib/jai_core.jar lib/java-mail-1.4.6.jar 
 lib/LawSuiteSE.jar
X-COMMENT: Main-Class will be added automatically by build
Main-Class: ch.acme.core.Main 
```

编辑2：

我使用以下代码来启动我的 GUI 应用程序：

```
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            Main m = new Main();
            m.setVisible(true);
        }
    });
} 
```

将其删除到以下内容，解决了问题。有任何想法吗 ？？？

```
public static void main(String[] args) {
    Main m = new Main();
    m.setVisible(true);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:32:27.323

您可能会添加一些内容以帮助我们帮助您

*   向我们展示 JAR（清单）的内容
*   你如何构建你的可执行 Jar（Maven？）

为了能够从可执行 Jar 启动应用程序，您需要：

在清单中定义主类在清单中定义类路径，并在 jar 中包含所有依赖项，或者将 -cp 添加到 java 调用中，并带有依赖项的类路径的路径

编辑：好的，从评论中我了解 java 命令工作正常......所以你的问题是 sh

将此添加到您的 sh 的顶部

# !/bin/ksh

并通过键入 ./scriptname.ksh 来启动它

（如果您绝对需要在 sh 中运行，请用 sh 替换 ksh）

编辑 2：我使用的 Ksh 示例：

```
#!/bin/ksh

JAVA_HOME16=/usr/java16/bin

${JAVA_HOME16}/java -Drunningenv=dev -Dbatch.jdbc.user=${DB2_CODE_USAGER}     -Dbatch.jdbc.password=${DB2_MOT_PASSE} -jar ${BASEDIR}/BD_PVFI/bin/spring-batch-    conciliation-1.0.0-SNAPSHOT.jar input.desj.file=${INPUTFILE_DESJ}
rc=$? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:31:50.353

尝试使用完整路径运行 java。

运行“which java”以找出完整路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T14:29:39.647

我使用以下代码来启动我的 GUI 应用程序：

```
EventQueue.invokeLater(new Runnable() {
    @Override
    public void run() {
        Main m = new Main();
        m.setVisible(true);
    }
}); 
```

删除这个，解决了这个问题。有任何想法吗 ？

# html - 父项下的左对齐下拉菜单

> ID：15010610
> 
> 赞同：0
> 
> 时间：2013-02-21T19:27:06.760
> 
> 标签：html, css, drop-down-menu, parent-child

我花了几天时间试图将我的下拉菜单左对齐在他们父母的下方。我所知道的唯一 CSS 和 HTML 是我在过去几天通过这个过程学到的东西，所以在你的回复中把我当作孩子一样对待，哈哈。你会看到，到目前为止，我只是通过记下每件事的含义而幸存下来……

这是我的博客，因此您可以看到它在做什么 crittndesign.blogspot.com 我最初创建菜单时仅使用“特色产品”选项卡和下拉菜单。为了在父项下对齐下拉菜单，我将实际值放在我想要的距离左侧多远（68px 似乎有效）。它暂时完成了我想要的，但后来我决定添加“灵感...”选项卡，现在你看到我需要真正解决我的问题并为菜单设置正确的编码以左对齐在他们自己的父标签。

我的代码可能是一团糟，因为我现在尝试了很多不同的东西，但我需要有人具体告诉我要改变什么才能使它正确！我读了很多关于需要将位置设置为“相对”或“内联块”的内容，但我显然不知道将其粘贴在哪里，因为它总是在我移除固定位置后立即打破下拉（左：68px ）。让我知道您是否需要任何其他信息以帮助我解决问题！

提前致谢！！

CSS

```
 .navigation ul ul { 
        display: none;
    }
    .navigation ul li:hover > ul {
        display: block;
    }
    .navigation li ul {    
        position: absolute;  /*makes the list actually drop down*/
        z-index:100;    /*makes it stay visible when moving mouse down to it*/
        left: -999em;    /*em=scaleable*/
        width: 165px;    /*width of drop down box*/
        margin: 19px 0 0 0; 
        padding: 0; 
    }
    .navigation li:hover ul {   
        left: 68px;    /* position of drop down menu aligned under parent */
    }
    .navigation li li a {    /*how the drop down menu itself looks*/
        display: block; 
        background: #663300; 
        width: 140px;     /*width of background color on drop down*/
        color: #FF9900; 
        font:normal 12px Helvetica, sans-serif; 
        padding: 9px 13px 12px 12px; 
        text-decoration: none; 
        text-align:center;
        border-bottom: 2px dotted #060505; /*dotted line under each menu item in drop down*/
    }
    .navigation li li a:hover { /*how the drop down menu looks when hovered over*/
        background: #060505; 
        color: #FFFFFF;  
        margin: 0; 
        padding: 9px 13px 12px 12px; /*for the list names when hovered over them*/
        text-decoration: bold; 
        border-bottom: 1px #060505; 
        text-align:center;
        box-shadow: inset 0 0 10px #222222, inset 0 10px 10px #222222;
    } 
    li:hover > a { /*Color all hovered links, and keep menu item colored when hovering sub-menu*/ 
        background-color: #663300; 
    } 
    .navigation li ul ul { 
        /*margin: -35px 0 0 145px;*/
    } 
    .navigation li:hover ul ul { 
        left: -9999em; 
    } 
    .navigation li ul li:hover ul { 
       left: auto;  
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:36:43.923

我不知道你的标记，但试试这个......

```
.navigation ul{
 padding:0;
} 
```

所有的 ul 都有默认的 padding 和 margin，所以对于在父 ul 中删除的 ul，它们应该有 0 padding 来对齐到左边。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:39:52.627

这就是你得到的所有css吗？任何父CSS？
您是否为(body) 属性分配了定位 ？您指定的所有位置都相对于它的位置。

# android - EGL_BAD_PARAMETER 调用 eglSwapInterval() 的结果

> ID：15010613
> 
> 赞同：0
> 
> 时间：2013-02-21T19:27:15.910
> 
> 标签：android, opengl-es-2.0, kindle-fire, egl

我有一个在几个 Android 设备上运行的 OpenGL 程序，没有任何问题。但是，当我在 Kindle Fire 上运行我的应用程序时，我的调用`eglSwapInterval()`返回`EGL_BAD_PARAMETER`.

我的电话看起来像：

```
eglSwapInterval( eglGetDisplay( EGL_DEFAULT_DISPLAY ), 1 );

```

我知道 1 是默认值，并且接受的最小值和最大值之外的值将被静默钳制。这就是为什么我对为什么“1”是一个不好的参数感到困惑的原因。我的代码允许基于 init 结构传入其他值，但我现在正在调试的错误是传入 1 导致的。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T04:19:50.440

也许这会有所帮助：

> 目前你永远不能直接在屏幕上绘制，所以这没有意义。您总是在绘制到表面抛掷表面，完成后将其合成到屏幕上，并且屏幕合成是​​垂直同步的。 [https://groups.google.com/forum/#!topic/android-developers/HvMZRcp3pt0](https://groups.google.com/forum/#!topic/android-developers/HvMZRcp3pt0)

*（这意味着它作为一个可能的参考，它什么都不做。但我还不能评论答案。）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T19:05:37.490

看起来 Kindle 的 EGL 实现有一个错误。我将描述原因，然后提出解决方法。

默认的交换间隔确实是 1。来自 EGL 1.4 规范，第 3.9.3 节 Posting Semantics：

```
EGLBoolean eglSwapInterval(EGLDisplay dpy, EGLint
interval);

[...]

The default swap interval is 1. 
```

该部分还指出

```
interval is silently clamped to minimum and
maximum implementation dependent values before being stored; these values are
defined by EGLConfig attributes EGL_MIN_SWAP_INTERVAL and EGL_MAX_-
SWAP_INTERVAL respectively. 
```

因此，`eglSwapInterval`需要接受`interval=1`，即使实现不支持它。该实现需要静默钳制它而不会出错。

我怀疑 Kindle在超出范围`EGL_BAD_PARAMETER`时会发出声音。您可以使用 发现查询范围。`interval``[EGL_MIN_SWAP_INTERVAL, EGL_MAX_INTERVAL]``eglGetConfigAttrib`

作为一种解决方法，我建议您的应用程序查询交换间隔界限，并在调用`eglSwapInterval`.

作为对 Clyde 的回复：即使在 Android 等复合环境中，交换间隔也确实有意义并且符合您的预期。如果 vsync 间隔为 60Hz，上下文的交换间隔为 2，则 eglSwapBuffers 将限制为 30Hz。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:22:19.727

据我所知， eglSwapInterval 在 Android 上什么也没做。所以调用它可能没有什么意义，如果 Kindle 实现没有实现任何调用它可能会简单地抛出一个错误。

# msbuild - 如何设置 MSBuild 扩展以在 MSBuild 步骤中使用 Jenkins 版本环境变量？

> ID：15010618
> 
> 赞同：0
> 
> 时间：2013-02-21T19:27:31.553
> 
> 标签：msbuild, jenkins, jenkins-plugins

我指的是关于stackoverflow的以下问题。

[在 MSBuild 步骤中使用 Jenkins 版本环境变量。](https://stackoverflow.com/questions/12345356/using-jenkins-version-environment-variable-in-the-msbuild-step)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:03:23.933

如果 jenkins 创建了一个名为 version 的环境变量，那么您可以使用 $(VERSION) 在 msbuild 中引用它。

# c# - 如何验证文本框和标签值

> ID：15010621
> 
> 赞同：0
> 
> 时间：2013-02-21T19:27:39.427
> 
> 标签：c#, javascript, asp.net, ajax

需要验证标签值（从数据库中获取）和文本框值（用户输入）。如果文本框字段值大于标签值意味着，必须显示错误或警告消息。

![在此处输入图像描述](../Images/dfe9a86c04572c8c1634a5190dd3b4b7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T01:25:17.780

这是一个简单的 Javascript 验证器，可以满足您的需求。

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/rzLWq/)]]]

### 输出：

> ![输出](../Images/d3fa8b869fd7cf3c4b3479d3c0fb5132.png)

### 脚本：

```
document.getElementById( 'numbers' ).addEventListener( 'keyup', function ( event ) {
    if( event.srcElement.className == 'validate' ) {
        var value = event.srcElement.value,
            validationValue = event.srcElement.nextSibling.textContent;
        if( isNaN( value ) ) {
            event.srcElement.nextSibling.className = 'error-nan';
        } else if( parseInt( value ) > parseInt( validationValue ) ) {
            event.srcElement.nextSibling.className = 'error-too-large';
        } else {
            event.srcElement.nextSibling.className = '';
        };
    };
} ); 
```

### HTML：

```
<form id="numbers">
    <input class="validate" /><label>15</label><br />
    <input class="validate" /><label>7</label><br />
</form> 
```

### CSS：

```
.error-too-large::after {
    color: red;
    content: 'value too large';
    padding-left: 5px;
}
.error-nan::after {
    color: red;
    content: 'value not a number';
    padding-left: 5px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:31:07.923

您可以使用[ASP.NET 验证控件](http://msdn.microsoft.com/en-us/library/debza5t0%28v=vs.100%29.aspx)。他们使用客户端和服务器验证。

# xml - W3C XML 示例文件生成“有多个根元素。第 4 行。位置 9。” 错误

> ID：15010623
> 
> 赞同：0
> 
> 时间：2013-02-21T19:28:01.307
> 
> 标签：xml

所以我被敦促在自己创建一个之前测试示例 xml 文件，当我尝试验证第一个示例 xml 文件时偶然发现了这个错误

这是示例 xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns ="http://my-company.com/namespace" targetNamespace="http://my-company.com/namespace" 
elementFormDefault="qualified" attributeFormDefault ="unqualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" />
       <xs:element name="Company">
                <xs:annotation> 
                <xs:documentation>Root element</xs:documentation> 
                </xs:annotation>
                        <xs:complexType>  
                            <xs:sequence>  
                                <xs:element name="Address"/>
                                    <xs:complexType>
                                        <xs:sequence>
                                            <xs:element name="Name" type="xs:string"/>
                                            <xs:element name="Street" type="xs:string"/>
                                            <xs:element name="City" type="xs:string"/>
                                        </xs:sequence>
                                    </xs:complexType>
                                <xs:element name="Person"  maxOccurs="unbounded"/>
                                        <xs:complexType> 
                                            <xs:sequence> 
                                                <xs:element name="First"  type="xs:string"/> 
                                                <xs:element name="Last" type="xs:string"/> 
                                                <xs:element minOccurs="0" name="Title"  type="xs:string"/> 
                                                <xs:element name="PhoneExt"> 
                                                <xs:simpleType> 
                                                <xs:restriction  base="xs:integer"> 
                                                <xs:maxInclusive value ="99"/> 
                                                </xs:restriction> 
                                                </xs:simpleType> 
                                            </xs:element> 
                                            <xs:element name="Email"  type="xs:string"/>
                                                </xs:sequence>
                                        </xs:complexType>
                            </xs:sequence>  
                        </xs:complexType>
        </xs:element>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:44:31.933

不知道你从哪里得到的，但是

```
<?xml version="1.0" encoding="utf-8"?>
    <xs:schema xmlns ="http://my-company.com/namespace" targetNamespace="http://my-company.com/namespace" 
    elementFormDefault="qualified" attributeFormDefault ="unqualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" /> 
```

将其更改为

```
<?xml version="1.0" encoding="utf-8"?>
    <xs:schema xmlns ="http://my-company.com/namespace" targetNamespace="http://my-company.com/namespace" 
    elementFormDefault="qualified" attributeFormDefault ="unqualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" > 
```

即摆脱最后一个/

它正在关闭模式节点，但要遵守规则，其他一切都必须在根节点内。

# extjs - Extjs 窗口/iframe getBody 掩码/取消掩码

> ID：15010628
> 
> 赞同：1
> 
> 时间：2013-02-21T19:28:22.070
> 
> 标签：extjs, window, mask

我有一个网格面板，面板中的每一行都有一些按钮。单击按钮时，会弹出一个新的 Ext.window 加载远程 url 。由于远程 URL 是在 iframe 中打开的，因此我不能在父网格中使用 Ext.getBody().mask 和在 iframe 中使用 Ext.getBody().unmask，因为这是两个不同的页面。我之所以要这样做（父页面中的Ext.getBody（）.mask，以及iframe中的unmask）是因为iframe中加载的url有很多js和图像正在加载。因此，如果我在 iframe 中使用掩码和取消掩码，仍然需要大量时间来加载 iframe 标头中的内容，直到它达到我可以使用 Ext.getBody().mask 的程度

我的问题是：可以在父窗口上以某种方式使用 Ext.getBody().unmask() 吗？（隐藏从父母打开的面具）？

谢谢，丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:11:35.480

尝试`window.parent.Ext.getBody().unmask()`从 iframe 运行。

我假设您的 iframe 与父级具有相同的来源。

# git - 如何从 git repo 中删除重复的历史记录？

> ID：15010632
> 
> 赞同：2
> 
> 时间：2013-02-21T19:28:29.737
> 
> 标签：git, version-control

我尝试使用`git filter-branch`我在相关帖子中看到的命令来重命名一批旧提交。结果是，现在我的 repo 有许多与不同作者相同的提交。它给我留下了以下场景：

```
A' -> B' -> C'
               \
A  -> B  -> C -> D -> E -> F 
```

`A'``A`除了提交作者之外，与 相同，对于和`B'`相同`C'`。我想删除 、 和 的所有引用和`A'`历史`B'`记录`C'`。注意：这些提交都不是在分支上或有标签。

如何删除重复的提交历史？这是我追求的结果：

```
A  -> B  -> C -> D -> E -> F 
```

* * *

我这样做的原因是简单地清理历史。我是唯一接触此代码的人，而且我知道尝试任何非平凡的回购都不是一件好事。此外，似乎有很多类似的问题，但我似乎无法拼凑出一个可行的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:42:38.647

**编辑：**嗯，这几乎奏效了。我从中看到的唯一问题是它覆盖了最近提交 (D+) 的提交时间。

* * *

看来我找到了解决方案。我整天都在跳舞，但最终找到了正确的提交来参考。按照我上面的例子，我用最新的 master 分支克隆了一个新的 repo。从那里我找到了`C`提交的哈希，它代表了最后一次知道的良好状态。然后我以交互模式运行 rebase：

```
git rebase -i <the C commits' hash> 
```

在出现的编辑器中，只出现了我想要删除的重复提交（直到当前历史记录）。所以我删除了所有旧的重复条目，直到`D`提交。保存后rebase命令完成没有错误。

此时我的本地存储库似乎一切都井井有条，所以我将其强制到服务器上：

```
git push --force origin master 
```

最终结果似乎正是我想要的：

```
A  -> B  -> C -> D -> E -> F 
```

不确定这是否是最好的方法，但话说回来，这并不是你真正想做的事情。

# html - 水平布局 - 粘性页脚隐藏水平滚动条

> ID：15010633
> 
> 赞同：1
> 
> 时间：2013-02-21T19:28:34.303
> 
> 标签：html, css, layout, horizontal-scrolling, sticky-footer

我在 div 中有用于水平布局的代码，但是当我添加页脚时，它应该粘在底部，水平滚动条消失了。

容器和页脚的高度和宽度也应该与浏览器窗口互补。

这是我的代码：

HTML

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <title>Project</title>

        <link rel="stylesheet" type="text/css" href="css/normalize.css">
        <link rel="stylesheet" type="text/css" href="css/style.css">
    </head>

    <body>
        <div id="wrap">

        <div class="container">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        </div><!-- end CONTAINER -->

        </div><!-- end WRAP -->

        <div id="footer">
        <ul id="nav">
        <li>Menu 1</li>
        <li>Menu 2</li>
        <li>Menu 3</li>
        <li>Menu 4</li>
        <li>Menu 5</li>
        <li>Menu 6</li>
        </ul>
        </div><!-- end FOOTER -->

        <!-- JAVASCRIPT -->
        <script type='text/javascript' src='js/jquery-1.6.js'></script>
        <script type='text/javascript'>//<![CDATA[ 
        $(window).load(function(){
            $(function(){
                var width = 0;
                $('#wrap .container div').each(function() {
                width += $(this).outerWidth( true );
            });
            $('#wrap .container').css('width', width + "px");
        });
        });//]]>  
        </script>

    </body>
</html> 
```

CSS

```
html, body {
height: 100%;}

body:before,#wrap:before{content:'';float:left;height:100%;margin-top:-999em;} 

#wrap{
min-height: 100%;
margin:0 auto;
width:100%;
overflow-x:scroll;overflow-y:hidden;
background-color: red;}

#wrap:after {
content:'';
height:200px;
display:block;
clear:both;}

#wrap .container{  }
#wrap .container div{
border:1px solid #CCC;
float:left;
width:200px;
height:200px;}

#footer{
margin:-200px auto 0;
height:200px;
width:100%;
background-color: blue;}

ul#nav{list-style-type: none;margin:0;padding: 0}
ul#nav li{display: inline;} 
```

这是 d fiddle [http://jsfiddle.net/MsF59/1/](http://jsfiddle.net/MsF59/1/)

粘性页脚取自 [http://www.websitecodetutorials.com/code/css/css3-sticky-footer.php](http://www.websitecodetutorials.com/code/css/css3-sticky-footer.php)（方法 2）

我想页脚中的 d 负边距使其消失，但没有它，页脚不会粘在 d 底部。

d问题基本上在哪里？

# c# - 在实体框架上插入/更新主从细节

> ID：15010635
> 
> 赞同：1
> 
> 时间：2013-02-21T19:28:39.840
> 
> 标签：c#, entity-framework, asp.net-web-api

我一直在研究 Master-Detail relotionship 以及如何使用 Entity Framework (4.1) 来实现它。我有两节课：

```
[Table("master")]
public class Master
{
    [Key]
    [Column("id")]
    public int id {get; set;}
    public virtual ICollection<Detail> Children { get; set;}
}

[Table("detail")]
public class AuthGrantDetailEntity
{
    [Key]
    [Column("id")]
    public int Id { get; set; }
    [ForeignKey("MasterId")]
    public virtual Master MasterEntity { get; set; }
} 
```

所以，到目前为止，一切看起来都很好。我一直在阅读很多关于这种情况的评论，但我没有找到答案（或者我可能不明白）。如果我想同时插入 Master 和 Detail，我确实理解并且可以正常工作。例如：

```
using (var repo = MasterRepository)
{
    Master masterEntity = new Master();
    master.id = 1;
    Detail detailEntity = new Detail();
    detailEntity.id = 1;
    masterEntity.Children = new List<Detail>;
    masterEntity.Childern.add(detailEntity);
    repo.Add(masterEntity);
 } 
```

我的问题如下：假设在插入 Master 和 Detail 并保存这些更改后，我必须添加一些属于之前插入的 Master 的新细节。为此，我必须检查 Master 是否存在，如果存在则添加新的细节（所有这些都是通过编码。我现在正在这样做）。有没有办法让 EF 检查 Master 是否存在，然后使用上面编写的代码将新的详细信息插入其中？我的意思是重新使用上面编写的代码（或适用于我的情况的其他代码），以便无论 Master 是否存在都可以正常工作，并且不会出现重复的主键异常。

这样做的原因是我想从代码中删除一些逻辑并避免多个数据库访问。对于我在搜索中看到的内容，我认为可以做到，除非我手动检查 Master 是否存在，但我仍然希望你们中的任何人都面临同样的问题，并找到解决方法。

问候，马蒂亚斯。

# php - Netbeans PHP 抛出 404 未找到

> ID：15010639
> 
> 赞同：1
> 
> 时间：2013-02-21T19:28:53.210
> 
> 标签：php, apache, netbeans, mamp

大家好，我是 PHP 新手，我正在尝试在 Mac 上使用 Netbeans 在本地设置一个项目。我已经使用 MAMP 来设置我的 apache 服务器并对其进行测试并且服务器正在运行。但是，当尝试运行我的简单 hello world PHP 项目时，我得到一个 404 未找到：

用于项目的当前 URL：`http:/localhost/PhpProject1/index.php`

> `/PhpProject1/index.php`错误：在此服务器上找不到请求的 URL 。
> 
> 此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。

**我的项目位于：** `/Applications/MAMP/dtdocs/PhpProject1/`

www 的目录树：MAMP>htdocs>PhpProject1>index.php

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2020-09-14T14:56:02.620

我也有这个问题，这是我在 Xampp 中解决的方法：

**在htdoc**中创建文件夹

 **`C:\xampp\htdocs\FolderName\phpfile.php`

要运行此文件，URL 将设置为：

`http://localhost/FolderName/phpfile.php`

就是这样..享受:)**

# android - 加载带有 vermagic 不匹配的 android 内核模块

> ID：15010642
> 
> 赞同：2
> 
> 时间：2013-02-21T19:29:00.477
> 
> 标签：android, linux, linux-kernel

对于手机来说，很少有模块是专有的，并且没有在 GPL 下获得许可，并且内核源代码没有提供它们的源代码。所以我的问题是当我添加自定义内核名称或添加上游补丁时，内核的版本魔法发生了变化，它与专有模块的不匹配，并且这些模块的版本魔法不匹配，它们不匹配加载。

那么除了手动保留内核的vermagic和模块的vermagic之外，还有什么解决方法吗？该模块当然与内核兼容，因为它意味着它，只是这种vermagic不匹配导致问题

也没有办法为 Android 内核强制加载模块。你们中的任何人都有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-11T11:38:10.410

您应该避免将模块加载到具有不同版本魔法字符串的内核中。

该模块可能具有与其他内核资源/模块的内部内核接口，这些接口可能会因不同的内核版本而中断。这真的会破坏你的系统/内核。

如果您想冒险，请使用尽可能接近您的模块版本的内核版本并加载您的模块：

```
modprobe -f module-name 
```

`-f`将绕过 vermagic 检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-01T20:06:48.870

您可以在模块信息部分更改 vermagic 变量。您需要一个十六进制编辑器或[此软件](https://github.com/D1W0U/vermagic)，并且新版本字符串小于或等于最旧的字符串。

# achartengine - 即使启用了缩放，achartengine 图表也不会缩放

> ID：15010644
> 
> 赞同：1
> 
> 时间：2013-02-21T19:29:13.153
> 
> 标签：achartengine, ace-editor

我正在线程上运行来自服务的数据请求。我似乎无法获得`pan`或`zoom`为这个应用程序工作。这是我将其设置为允许的方法`zoom`。我还检查了`zoom`是否已启用。

```
private void getRPData2() 
{

    final ScadaDataList l = new ScadaDataList();
    final long value = new Date().getTime() - 3 * TimeChart.DAY;
    new Thread(new Runnable()
    {
        public void run()
        {
            try 
            {
                //System.out.println("made it");
                l.Load(Cookie);

                final Date d = new Date();

                runOnUiThread(new Runnable() {
                    public void run() {

                        /*for (int i = 0; i < 100; i++) {
                            time_series.add(new Date(value + i * TimeChart.DAY / 4), i);
                        }*/
                        for (ScadaData sd: l) 
                        {    
                            if (sd.getDataTS().compareTo(d) <= 0)
                            {
                                time_series.add(sd.getDataTS(),sd.getActualLoad() * 1000);
                                ProtectedLoadSeries.add(sd.getDataTS(),sd.getProtectedLoad() * 1000);
                            }

                        }
                        mRenderer.setXLabels(12);
                        mRenderer.setYLabels(8);
                        mRenderer.setXLabelsAngle(60);
                        mRenderer.setXLabelsAlign(Align.LEFT);
                        //mRenderer.setYLabelsAngle(-60);
                        mRenderer.setYLabelsAlign(Align.RIGHT);
                        mRenderer.setPanEnabled(true);
                        mRenderer.setShowGrid(true);
                        mRenderer.setGridColor(Color.argb(180, 66, 66, 66));

                        mRenderer.setZoomEnabled(true);

                        mChartView.repaint();
                        progress.dismiss();
                    }
                });
            } 
            catch (Exception e) 
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }).start();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:58:42.290

看起来您使用的方法版本错误。改用这些：

```
mRenderer.setPanEnabled(true, true
mRenderer.setZoomEnabled(true, true); 
```

# maven - 不支持的命名空间 annox xjc maven 1

> ID：15010649
> 
> 赞同：1
> 
> 时间：2013-02-21T19:29:36.563
> 
> 标签：maven, jaxb2, annox

我需要在我生成的类中定义的 XmlRootElement。但是，得到这个错误：

```
 [jaxb] [ERROR] [ERROR] Unsupported binding namespace "http://annox.dev.java.net". Perhaps you meant "http://java.sun.com/xml/ns/jaxb/xjc"? 
```

这是我的绑定文件：

```
<jaxb:bindings  xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
xmlns:xs="http://www.w3.org/2001/XMLSchema"
xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:annox="http://annox.dev.java.net"
xsi:schemaLocation="http://java.sun.com/xml/ns/jaxb
http://java.sun.com/xml/ns/jaxb/bindingschema_2_0.xsd http://annox.dev.java.net "
jaxb:extensionBindingPrefixes="xjc annox"  version="2.1">

<jaxb:bindings schemaLocation="../target/src/schema/xmlSchema.xsd" node="/xs:schema">
<jaxb:bindings node="xs:complexType[@name='ReportSubmission']">
<annox:annotate>
<annox:annotate annox:class="javax.xml.bind.annotation.XmlRootElement"
name="ReportSubmission"/>
</annox:annotate>
</jaxb:bindings>
</jaxb:bindings>
</jaxb:bindings> 
```

我正在使用 Maven 1 和一个具有 ant 任务的插件。扩展在 plugin.properties 中设置为 true。我在另一个使用 Maven 2 的应用程序中使用了非常相似的架构，所以我认为架构是正确的并且错误消息有点误导。也许我错过了一个罐子？我正在使用的罐子是：

```
<dependency>
        <groupId>javax.xml.bind</groupId>
        <artifactId>jaxb-api</artifactId>
        <version>2.2.1</version>
        <properties/>
    </dependency>
    <dependency>
        <groupId>com.sun.xml.bind</groupId>
        <artifactId>jaxb-impl</artifactId>
        <version>2.2.1</version>
        <properties/>
    </dependency> 
```

任何想法表示赞赏，谢谢。

# python - 如何通过 python 子进程与 mac 上的应用程序交互？

> ID：15010650
> 
> 赞同：2
> 
> 时间：2013-02-21T19:29:37.167
> 
> 标签：python, macos, subprocess

我知道已经发布了类似的问题，但我见过的方法似乎都不起作用。我想在 mac 上使用 python 子进程启动应用程序 xfoil，并使用脚本发送 xfoil 一堆命令（xfoil 是一个在终端窗口中运行的应用程序，您可以通过文本命令与之交互）。我可以使用脚本启动 xfoil，但我似乎不知道如何向它发送命令。这是我目前正在尝试的代码：

```
import subprocess as sp

xfoil = sp.Popen(['open', '-a', '/Applications/Xfoil.app/Contents/MacOS/Xfoil'], stdin=sp.PIPE, stdout=sp.PIPE)

stdout_data = xfoil.communicate(input='NACA 0012') 
```

我也试过

```
xfoil.stdin.write('NACA 0012\n') 
```

为了向 xfoil 发送命令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T19:33:21.133

正如[手册页](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/open.1.html)所说，

> **open**命令打开一个文件（或目录或 URL），就像您双击文件的图标一样。

最终，应用程序由 LaunchServices 启动，但这并不重要——重要的是它不是您的 shell 或 Python 脚本的子级。

此外，它的全部意义`open`在于打开应用程序本身，因此您不必深入研究它并找到 Unix 可执行文件。如果您已经拥有它，并且想将其作为 Unix 可执行文件运行……只需运行它：

```
xfoil = sp.Popen(['/Applications/Xfoil.app/Contents/MacOS/Xfoil'], stdin=sp.PIPE, stdout=sp.PIPE) 
```

事实证明，在这种情况下，`MacOS/Xfoil`甚至不是正确的程序。它显然是某种包装器`Resources/xfoil`，它实际上等同于您`/usr/local/bin/xfoil`在 linux 上得到的东西。所以你想这样做：

```
xfoil = sp.Popen(['/Applications/Xfoil.app/Contents/Resouces/xfoil'], stdin=sp.PIPE, stdout=sp.PIPE) 
```

（此外，从技术上讲，您的命令行甚至根本不应该工作；`-a`指定一个应用程序，而不是 Unix 可执行文件，并且您应该传递至少一个文件来打开。但是因为 LaunchServices 可以启动 Unix 可执行文件，就好像它们一样是应用程序，并且`open`不检查参数是否有效，`open -a /Applications/Xfoil.app/Contents/MacOS/Xfoil`最终会有效地做与 .) 相同的事情`open /Applications/Xfoil.app/Contents/MacOS/Xfoil`。）

* * *

为了未来读者的利益，我将在评论中包含以下信息：

If you just write a line to `stdin` and then return from the function/fall off the end of the main script/etc., the `Popen` object will get garbage collected, closing both of its pipes. If `xfoil` hasn't finished running yet, it will get an error the next time it tries to write any output, and apparently it handles this by printing `Fortran runtime error: end of file` (to stderr?) and bailing. You need to call [`xfoil.wait()`](http://docs.python.org/2/library/subprocess.html#subprocess.Popen.wait) (or something else that implicitly `wait`s) to prevent this from happening.

# android - Android 持久缓存：使用来自点火的 ModelCache

> ID：15010652
> 
> 赞同：1
> 
> 时间：2013-02-21T19:29:42.267
> 
> 标签：android, performance, caching

我在我的应用程序中使用了点火来缓存我的复合对象，比如说 mStudentObject。我已经成功缓存了我的数据，问题是，当我从最近运行的应用程序按钮（从当前正在运行的任务按钮）杀死应用程序后检索我的对象时，我没有找到任何针对密钥的数据（自动缓存清除）。当我重新-启动应用程序（不从最近的任务中杀死应用程序）对象正确检索。我不知道代码有什么问题。我想将我的对象永久缓存 2 天。当我启动我的应用程序时，应用程序应该从缓存对象中获取数据，或者我是否从当前正在运行的任务中终止应用程序。任何想法，请分享。这是我的完整代码：

```
public class MainActivity extends Activity {

    Button[] buttons = null;

    // ObjectLRUCache objectLRUCache = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        buttons = new Button[2];
        buttons[0] = (Button) findViewById(R.id.button1);// to save data
        buttons[1] = (Button) findViewById(R.id.button2); // to get data
        // final Student s = new Student("imran", 23, 16);
        buttons[0].setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                if (IgnetionHelper.getInstance()!= null) {
                    Log.d("test", "key contains, updating");
                    Student s = new Student("imran", 23, 16);

                    IgnetionHelper.getInstance().putData(s);
                } else{
                Log.d(""test),"instance is null..");

            }
        });
        buttons[1].setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                IgnetionHelper ddd = IgnetionHelper.getInstance();
                if (IgnetionHelper.getInstance().getData()!= null) {
                    Student s = (Student)  IgnetionHelper.getInstance().getData();
                    Log.d("test", "key contains, age is: " + s.age);

                } else {
                    Log.d("test", "data is null...");
                }

            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

我的 Person 类是：

```
public abstract class Person extends CachedModel implements Serializable{
    public String name = "";
    public int age = 0;

    public Person(){};

    public Person (String name,int age) {
        this.name=name;
        this.age=age;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public int getAge() {
        return age;
    }
    public void setAge(int age) {
        this.age = age;
    }

} 
```

学生班级如下：

```
public class Student extends Person{
    public String name = "";
    public int age = 0;

    public int rollNo = 0;

    public Student(){

    }

    public Student(String name, int age, int rollno) {

        this.rollNo = rollno;
        this.name=name;
        this.age=age;
    }

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public int getAge() {
        return age;
    }
    public void setAge(int age) {
        this.age = age;
    }

    public int getRollNo() {
        return rollNo;
    }

    public void setRollNo(int rollNo) {
        this.rollNo = rollNo;
    }

    @Override
    public boolean reloadFromCachedModel(ModelCache modelCache,
            CachedModel cachedModel) {

        Student student = (Student) cachedModel; 
        name =  student.name;
        age = student.age; 
        rollNo = student.rollNo; 

        return false;
    }

    @Override
    public String createKey(String id) {
        // TODO Auto-generated method stub
        return id;
    }
} 
```

最后，点火助手类如下：

```
 public class IgnetionHelper {
        private static final String KEY_FOR_MYOBJECT = "MY_TEST_KEY";
        private static ModelCache cache;
        private final static int initialCapacity = 1000;
        private final static int maxConcurrentThreads = 3;
        private final static long expirationInMinutes = 60 * 24 * 2;
        private static IgnetionHelper mIgnetionHelper = null;

        public static IgnetionHelper getInstance() {
            if (cache == null)
                cache = new ModelCache(initialCapacity, expirationInMinutes,
                        maxConcurrentThreads);
            if (mIgnetionHelper == null)
                mIgnetionHelper = new IgnetionHelper();
            return mIgnetionHelper;
        }

        public boolean putData(CachedModel model) {

            model.setId(KEY_FOR_MYOBJECT);
            if (model.save(cache)) {
                Log.d("IgnetionHelper", "saved.....");
                return true;
            } else {
                Log.d("IgnetionHelper", "saved.....");
                return false;
            }
            // CachedModel model = Feed.find(cache, key, Feed.class);
            // if (model != null) {
            // Log.d("test", "key contains, updating");
            // Feed s = (Feed) model;
            // return s.save(cache);
            // }
        }

        public CachedModel getData() {
            return Student.find(cache, KEY_FOR_MYOBJECT, Student.class);

        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T07:04:28.383

我找到了我的问题的解决方案。假设你有学生对象

```
Student s = new Student("imran",16,23); 
```

然后在您的 ignetionhelper 类中实现这些方法：

```
public static boolean putData(Object object, Context context,String key) {
    return GenericStore.saveObject(GenericStore.TYPE_MEMDISKCACHE,key, (Serializable) object, context.getApplicationContext());
}

public static Object getData(Context context,String key) {
    return GenericStore.getObject(GenericStore.TYPE_MEMDISKCACHE,key, context.getApplicationContext());
} 
```

[https://github.com/wareninja/generic-store-for-android](https://github.com/wareninja/generic-store-for-android) 导入库给定[野兔](https://github.com/wareninja/generic-store-for-android)然后使用上述方法：

```
IgnetionHelper.putData(s, context, IgnetionHelper.YOUR_KAY);
Student s=(Student)IgnetionHelper.getData(context,IgnetionHelper.YOUR_KAY); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:30:35.837

您将需要使用存储到磁盘的缓存，当应用程序被终止时，您正在使用的缓存似乎已被清除。

Google 提供了一些关于缓存存储的信息[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)并查看这个现有的 SO 答案，了解应用程序中数据缓存的一些选项[最佳方式在 Android 中缓存数据](https://stackoverflow.com/questions/2004040/best-way-to-cache-data-in-android)

# jquery-mobile - JQM 1.3 changePage'角色对话框'在 Chrome 中失败

> ID：15010658
> 
> 赞同：0
> 
> 时间：2013-02-21T19:30:35.043
> 
> 标签：jquery-mobile

我需要在启动时更改为不同的页面，我希望它是一个对话框。 **这适用于 1.2，适用于 1.3 中的 IE 和 FireFox。** Chrome 显示对话框，然后立即返回到第一页。如果我删除“角色：对话框”，它适用于所有人。我尝试了一个隐藏的超链接，我强制点击...相同的结果。Chrome（最新版本）恢复到 page1。

有想法该怎么解决这个吗？

这是一个简化的小提琴[http://jsfiddle.net/stocksp/P4ZWj/3/](http://jsfiddle.net/stocksp/P4ZWj/3/)

```
 div data-role="page" id="page1">
       <div data-role="content">
           <h6>page one content</h6>
       </div>
    </div>
    <div data-role="page" id="page2">
        <div data-role="header">
            <h1 class="title">My DIALOG </h1>
        </div><!-- /header -->
        <div data-role="content">
            Dialog Content
        </div>
    </div>

$(document).delegate("#page1", "pageinit", function () {
            $.mobile.changePage('#page2', { transition: 'pop', role: 'dialog' });
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:16:55.220

快速解决方法，直到解决此问题：将 changePage 方法包装在 setTimeout ...

```
$(document).delegate("#page1", "pageinit", function () {
    setTimeout(function () {
        $.mobile.changePage('#page2', { transition: 'pop', role: 'dialog' });
    }, 100);
}); 
```

# emacs - 如何在 Emacs 中创建收藏夹文件列表？

> ID：15010659
> 
> 赞同：4
> 
> 时间：2013-02-21T19:30:38.153
> 
> 标签：emacs, bookmarks, recent-file-list

在 GNU Emacs 中，我想创建一个按键，它会显示我最喜欢的文件（不是最近的文件）的列表，以便我可以轻松打开它们。

列表书签是这样做的方法吗？有没有更好的方法来创建和保存这样的列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T21:04:37.853

我认为书签功能可以为您提供您想要的，实际上还有更多，因为您可以在文件中命名书签和书签位置。

`C-x r m`在当前点为当前文件添加书签

`C-x r b`按名称打开书签

`C-x r l`列出所有书签

# javascript - 需要使用eclipse为Chrome制作一个打包的app

> ID：15010660
> 
> 赞同：2
> 
> 时间：2013-02-21T19:30:42.973
> 
> 标签：javascript, eclipse, html, google-chrome, gwt

我一直在努力弄清楚如何使用 eclipse 创建打包的应用程序。我已经安装了 GWT 插件，我可以制作一个 Web 应用程序。我查看了教程，并希望了解如何做到这一点。我有什么办法可以将该 Web 应用程序转换为具有 .html、.css、清单等的打包应用程序。如果没有，我需要哪些插件才能在 Eclipse 中编写打包的应用程序。谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T05:04:09.570

**您可以轻松地将 GWT 应用程序（具有正常限制）推送为 Chrome 扩展程序。**

开始阅读这些 -

教程 1 - [http://blog.tomtasche.at/2011/08/chromegwt-building-chrome-extensions.html](http://blog.tomtasche.at/2011/08/chromegwt-building-chrome-extensions.html)

教程 2 - [http://tech-drum.blogspot.in/2012/06/building-chrome-extensions-with-gwt.html](http://tech-drum.blogspot.in/2012/06/building-chrome-extensions-with-gwt.html)

您也可以尝试使用它作为参考 - [gwt-chrome](http://code.google.com/p/gwt-chrome/)

注意 - 有一个针对 GWT 记录的[问题](http://code.google.com/p/google-web-toolkit/issues/detail?id=5577)，用于简化此过程。请给它“星”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:55:28.727

`The difference between a Packaged App and a Hosted App is the offline behavior`

打包应用程序是可在浏览器上安装的应用程序，而 Web 应用程序由 Web 服务器托管，不会脱机。

但是您可以在浏览器离线时借助 .json 文件运行打包的文件 ..hardly 调用为 manifest.json

[Helloworld 打包应用](http://developer.chrome.com/apps/first_app.html)

[关于打包应用程序的 Chrome 文章](http://developer.chrome.com/extensions/apps.html)

最后，您不需要使用`Eclipse` 创建打包文件，因为它们都是普通文件（.html，.js，.css......）。如果您想轻松浏览文件并更好地维护，您可以用它 。我

# php - 符合 HIPAA 的 PHP/MySQL 应用程序

> ID：15010664
> 
> 赞同：1
> 
> 时间：2013-02-21T19:31:06.780
> 
> 标签：php, mysql, encryption, amazon-web-services, hipaa

我正在开发一个必须符合 HIPAA 的 PHP/MySQL 应用程序。根据我的阅读，任何可以识别某人或任何医疗信息的个人数据都必须在静态和传输过程中进行 256 位加密。我试图找出最有效的方法是什么。

我正在使用 Amazon Web Services，我想对 HTTP 和数据库请求使用 SSL 加密来保护传输中的数据。至于静态数据，我想用 AES 256 编译一个自定义 MySQL 服务器，以便使用 AES_ENCRYPT 和 AES_DECRYPT——但是我是否必须为我加密的每个字段存储一个 IV？否则，在应用程序本身内进行加密/解密将花费太长时间，并且查询数据库将是地狱。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-13T04:13:46.010

HIPAA 实际上并不要求您的 ePHI 在存储在 MySQL 数据库中时被“静态”加密，只要它是隔离的，这样未经授权的人就无法访问它。

也就是说，如果可能的话，通常最好对您的数据进行静态加密，因为这样可以防止数据泄露时发生违规行为。

在此处详细阅读有关 mySQL 和加密选项的 HIPAA 合规性（我与此网站没有关系）：

[https://luxsci.com/blog/encryption-and-auditing-for-mysql-databases-under-hipaa.html](https://luxsci.com/blog/encryption-and-auditing-for-mysql-databases-under-hipaa.html)

# django - POST 后的 Django 管理员 BaseInlineFormSet 验证

> ID：15010668
> 
> 赞同：1
> 
> 时间：2013-02-21T19:31:12.923
> 
> 标签：django, django-forms, django-admin

寻找 django 表单集验证如何工作的信息，尽管它比听起来更复杂。我有一个带有值的表单集，其中部分值可以通过 javascript 插入其中（这意味着它们在数据库中尚不存在）。

```
class RequireOneFormSet(BaseInlineFormSet):
    def clean(self):        
        if any(self.errors):
            return

        form_count = len([f for f in self.forms if f.cleaned_data])
        if form_count < 1:
            raise ValidationError(_('At least one %(object)s is required.') %
                                  {'object':
                                   _(self.model._meta.object_name.lower())})

class VariantInline(admin.StackedInline):
    model = Variant
    extra = 1
    formset = RequireOneFormSet

class ProductAdmin(admin.ModelAdmin):
    class Meta:
        model = Product

    class Media:
        js = (os.path.join(STATIC_URL, 'js', 'admin_utils.js'), )

    exclude = ('slug',)
    filter_horizontal = ('category',)
    inlines = [ImageInline, DetailInline, VariantInline]
    manufacturer = ModelChoiceField(Manufacturer.objects.all())
    list_filter = ('name', 'manufacturer', 'category')
    list_display = ('name', 'manufacturer')
    search_fields = ('name',)
    save_as = True 
```

接下来，基于这些条目，我想在表单集验证期间创建对象。单击“保存”按钮时，Django 抱怨数据库中没有这样的对象。

我试图覆盖模型的清理方法、ModelAdmin 的清理、formset 的 save_formset 但没有运气，因为这些由 javascript 创建的值在进程的早期被过滤掉了。我正在寻找哪种方法可以解决此问题的信息，并且可以覆盖它吗？

编辑：添加了一些代码，使用的视图是 Django 的通用视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:48:41.370

我已经设法解决了。关键是创建我自己的字段并在那里覆盖 clean() 方法。正如您在文件 django/forms/models.py 中看到的，ModelMultipleChoiceField clean() 类负责检查发送值。

```
class DetailsField(ModelMultipleChoiceField):
    def clean(self, value):     
        (code here)

class VariantForm(ModelForm):
    details = DetailsField(queryset=Detail.objects.all(),
                           widget=FilteredSelectMultiple('details', False))

class VariantInline(admin.StackedInline):
    model = Variant
    extra = 1
    formset = RequireOneFormSet
    form = VariantForm 
```

# java - 发票查询总是返回不超过 10 个结果

> ID：15010671
> 
> 赞同：1
> 
> 时间：2013-02-21T19:31:16.860
> 
> 标签：java, intuit-partner-platform, quickbooks-online

使用 IPP Java DevKit 2.0.9（也尝试使用 2.0.6），我实现了一个包装方法，用于通过客户 ID 在 QBO 中查找特定发票并在某个日期之前发生。我正在测试一个在大约 16 个月内有 65 张发票的特定客户，但查询始终返回*dateFinish*（*endTransactionDate*）之前发生的 10 张“最新”发票。我也尝试了各种排列：只包括客户 ID 标准，只包括*endTransactionDate*，添加“非常早”的*startTransactionDate*，开发版本和生产版本。就好像 API 正在切断结果列表，只包括前 10 条记录，似乎没有充分的理由。

```
public static List<QBInvoice> findInvoices(PlatformSessionContext context, String dataSource, Calendar dateFinish, List<String> customerIds) throws QBInvalidContextException, Exception {
    QBInvoiceService invoiceService = QBServiceFactory.getService(context, QBInvoiceService.class);
    QBInvoiceQuery invoiceQuery = new QBInvoiceQuery(context);
    invoiceQuery.setEndTransactionDate(QuickbooksUtil.dateToQbDate(dateFinish));
    if (!customerIds.isEmpty()) {
        IdSet idSet = QuickbooksUtil.stringListToIdSet(context, dataSource, customerIds);
        invoiceQuery.setContactIdSet(idSet);
    }
    return invoiceService.getInvoices(context, invoiceQuery);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T20:31:25.067

在您的请求中指定 PageNum 和 ResultsPerPage。您将返回默认值，即 Page=1 和 ResultsPerPage=10。

[https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/0100_Calling_Data_Services/0030_Retrieving_Objects#Paging](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/0100_Calling_Data_Services/0030_Retrieving_Objects#Paging)

# php - 使用php格式化字符串以插入mysql db

> ID：15010674
> 
> 赞同：0
> 
> 时间：2013-02-21T19:31:38.730
> 
> 标签：php, arrays, string, explode

我有以下字符串：

```
$result = "category,date,product,cost
car,10/10/2005,toyota,3000
bike,12/12/2007,yamaha,1000"; 
```

我需要将字符串排列为插入数据库的最佳格式（需要高效，因为可能有很多数据，也不需要第一行）。

字符串在新行上，所以我可以：

```
$n = explode("\n", $result); 
```

它采用这种格式：

```
[0] => category,date,product,cost
[1] => car,10/10/2005,toyota,3000
[2] => bike,12/12/2007,yamaha,1000 
```

现在我将如何格式化它以插入数据库，再次解决方案需要高效（为了性能），我也希望第一行不被插入，最后在插入时我希望日期不被插入。

希望这是有道理的，提前感谢您的帮助。

- - - - 编辑 - - - - - - - -

表（项目）由以下字段构成：

```
category, product, cost 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:39:23.550

如果您每次都有一个具有相同列的类似字符串，那么您可以执行以下操作：

```
$n = explode("\n", $result);

// skip the first row since it's just column names
for ($i = 1; $i <= count($n); $i++)
{
  $cat = $n[$i][[0]; // category
  $date = $n[$i][[1]; // date
  $prod = $n[$i][[2]; // product
  $cost = $n[$i][[3]; // cost

  // and you can put it into a query like so
  $sql = "insert into myTable ('category', 'date', 'product', 'cost') values ('$cat', '$date', '$prod', '$cost')";
} 
```

这回答了你的问题了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:59:07.917

从之前回答的帖子中改进：

```
$n = explode("\n", $result);

// skip the first row since it's just column names

$sql = "insert into myTable ('category', 'date', 'product', 'cost') values ";

for ($i = 1; $i <= count($n); $i++)
{
  $cat = $n[$i][[0]; // category
  $date = $n[$i][[1]; // date
  $prod = $n[$i][[2]; // product
  $cost = $n[$i][[3]; // cost

  $sql .= "('$cat', '$date', '$prod', '$cost'),";
}

$sql = trim($sql, ",");

if(count($n) != 0)
    mysql_query($sql) 
```

这只会给您一个查询，该查询将插入多行。

# c++ - (WinSocket) 断开连接时的垃圾邮件

> ID：15010684
> 
> 赞同：-5
> 
> 时间：2013-02-21T19:32:30.633
> 
> 标签：c++, sockets, chat

我正在尝试为客户端/服务器聊天程序编写服务器。唯一的问题是，一旦客户端断开连接，服务器就会开始向服务器发送他们的最后一条消息。即使他们重新连接，它也会不断发送垃圾邮件。我试过谷歌搜索，但找不到任何东西。这是服务器代码：

```
#include "MasterServer.h"
using namespace std;
SOCKADDR_IN Server;
int addrlen = sizeof(Server);
SOCKET sListen;
SOCKET Connect; 
SOCKET* Connections;
int port = 444;
int ConCounter = 0;
char* Recv = new char[256];
int ServerThread(int ID)
{

ZeroMemory(Recv, sizeof(Recv));
for(;;)
{
    if(recv(Connections[ID],Recv ,256 ,NULL))
    {
        cout << Recv << endl;
    }
}
}

int InitWinSock()
{
int RetVal = 0;
      WSAData wsa;
      WORD Version = MAKEWORD(2,1);
      RetVal = WSAStartup(Version, &wsa);

      return RetVal;
}

int main()
{
    int RetVal = 0;
    RetVal = InitWinSock();
    if(RetVal != 0)
    {
        cout << "WinSock Start Up Failure";
    }
      Connections = (SOCKET*)calloc(64, sizeof(SOCKET));

       sListen = socket(AF_INET, SOCK_STREAM, NULL);
       Connect = socket(AF_INET, SOCK_STREAM, NULL);
       cout << "\t\t----====ModernBacon Server====----"<< endl;

        cout << "What Port Would You Like To Run On [Default 444]: ";
        cin >> port;

        system("cls");
      Server.sin_addr.s_addr = inet_addr("127.0.0.1");
      Server.sin_family = AF_INET;
      Server.sin_port = htons(port);

      bind(sListen, (SOCKADDR*)&Server, sizeof(Server));
      //Listening
      listen(sListen, 64);
cout << "Listening For Connections IP:"<<inet_ntoa(Server.sin_addr);"Port:"<<port<< 
endl;

      for(;;)
          {
            if(Connect = accept(sListen, (SOCKADDR*)&Server, &addrlen))
            {
                Connections[ConCounter] = Connect;
                char* ID = new char[64];
                ZeroMemory(ID, sizeof(ID));
                itoa(ConCounter, ID, 10);
                send(Connections[ConCounter], ID, sizeof(ID),NULL);

                ConCounter = ConCounter + 1;
                CreateThread(NULL,NULL, (LPTHREAD_START_ROUTINE) 
ServerThread, (LPVOID)(ConCounter -1), NULL, NULL);

                cout << "\t\tClient Connected!\tID: " <<
ConCounter << endl;

            }

      }
      return(0);
} 
```

我不知道发生了什么...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:35:36.187

你的代码有很多问题。尝试更多类似的东西：

```
#include "MasterServer.h"
#include <string>

using namespace std;

static const int MAX_CLIENTS = 64;
static const int MAX_RECV = 256;

struct ClientInfo
{
    int ID;
    SOCKET Connection;
    char Recv[MAX_RECV];
};

ClientInfo Clients[MAX_CLIENTS];

DWORD WINAPI ServerThread(LPVOID lpParam)
{
    ClientInfo *Client = (ClientInfo*) lpParam;
    char szID[64] = {0};

    itoa(Client->ID, szID, 10);

    int RetVal = send(Client->Connection, szID, sizeof(szID), NULL);
    if (RetVal != sizeof(szID))
    {
        cout << "Client " << Client->ID << " Send Failure. Error " << WSAGetLastError() << endl;
    }
    else
    {
        do
        {
            RetVal = recv(Client->Connection, Client->Recv, MAX_RECV, NULL);
            if (RetVal == SOCKET_ERROR)
            {
                cout << "Client " << Client->ID << " Recv Failure. Error " << WSAGetLastError() << endl;
                break;
            }

            if (RetVal == 0)
            {
                cout << "Client " << Client->ID << " disconnected" << endl;
                break;
            }

            cout << "Client " << Client->ID << ": " << string(Client->Recv, RetVal) << endl;
        }
        while (true);
    }

    closesocket(Client->Connection);
    Client->Connection = INVALID_SOCKET;

    return 0;
}

int InitWinSock()
{
    WSAData wsa;
    return WSAStartup(MAKEWORD(2,1), &wsa);
}

int main()
{
    SOCKADDR_IN addr;
    int addrlen;
    SOCKET sListen;
    SOCKET sClient;
    int port = 444;
    int index;

    cout << "\t\t----====ModernBacon Server====----"<< endl;

    for (int i = 0; i < MAX_CLIENTS; ++i)
        Connections[i] = INVALID_SOCKET;

    int RetVal = InitWinSock();
    if (RetVal != 0)
    {
        cout << "WinSock Start Up Failure. Error " << RetVal << endl;
        return 0;
    }

    sListen = socket(AF_INET, SOCK_STREAM, NULL);
    if (sListen == INVALID_SOCKET)
    {
        cout << "WinSock Socket Failure. Error " << WSAGetLastError() << endl;
        return 0;
    }

    cout << "What Port Would You Like To Run On [Default 444]: ";
    cin >> port;
    system("cls");

    ZeroMemory(&addr, sizeof(addr));
    addr.sin_addr.s_addr = inet_addr("127.0.0.1");
    addr.sin_family = AF_INET;
    addr.sin_port = htons(port);

    RetVal = bind(sListen, (SOCKADDR*)&addr, sizeof(addr));
    if (RetVal != 0)
    {
        cout << "WinSock Bind Failure. Error " << WSAGetLastError() << endl;
        return 0;
    }

    //Listening
    RetVal = listen(sListen, MAX_CLIENTS);
    if (RetVal != 0)
    {
        cout << "WinSock Listen Failure. Error " << WSAGetLastError() << endl;
        return 0;
    }

    cout << "Listening For Connections. IP: " << inet_ntoa(addr.sin_addr) << ", Port: " << port << endl;

    do
    {
        addrlen = sizeof(addr);
        sClient = accept(sListen, (SOCKADDR*)&addr, &addrlen);
        if (sClient == INVALID_SOCKET)
        {
            cout << "WinSock Accept Failure. Error " << WSAGetLastError() << endl;
            return 0;
        }

        index = -1;
        for (int i = 0; i < MAX_CLIENTS; ++i)
        {
            if (Clients[i].Connection == INVALID_SOCKET)
            {
                 index = i;
                 break;
            }
        }

        if (index == -1)
        {
            closesocket(sClient);
            cout << "\t\tClient Connected. Max Clients Exceeded!" << endl;
            continue;
        }

        Clients[index].ID = index + 1;
        Clients[index].Connection = sClient;

        CreateThread(NULL, NULL, &ServerThread, &Clients[index], NULL, NULL);

        cout << "\t\tClient Connected!\tID: " << Clients[index].ID << endl;
    }
    while (true);

    return 0;
} 
```

# functional-programming - OCaml 中的排序函数是否使用不可变或可变数据结构？

> ID：15010687
> 
> 赞同：0
> 
> 时间：2013-02-21T19:32:36.577
> 
> 标签：functional-programming, ocaml

OCaml在实现排序时是否使用`mutable`或数据结构？`immutable`

对于许多排序算法，我们需要在列表或数组之类的位置之间交换数据。

我只是想知道，如果 OCaml 总是打算使用`immutable data structures`，那么每次交换操作都会创建一个新副本？

会影响`performance`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:46:49.443

> 对于许多排序算法，我们需要在列表或数组之类的位置之间交换数据。

不必要。

> 我只是想知道，如果 OCaml 总是打算使用不可变的数据结构

不，OCaml 具有可变和不可变的数据结构。不过，通常首选使用不可变数据结构。

> 那么每次交换操作都会创建一个新副本吗？

这将取决于所讨论的数据结构。但一般来说，在使用不可变数据结构时，您不希望通过交换单个元素来表达您的排序算法（正如我在上面指出的，您当然不需要）。

`List.sort`例如适用于不可变的数据结构（列表）并且非常有效。它使用归并排序算法（在当前的 OCaml 实现中）。

# sql-server - 将 KILL 与声明的变量一起使用

> ID：15010689
> 
> 赞同：16
> 
> 时间：2013-02-21T19:32:40.357
> 
> 标签：sql-server, tsql

我正在尝试使用带有声明变量的 KILL 语句，但它给了我一个语法错误。无论如何不使用常量并以编程方式更改 SPID？

例如：

```
DECLARE @SPID smallint
SET @SPID = 100
Kill @SPID 
```

顺便说一句，这只是一个例子。我需要使用光标在循环中运行 kill 以摆脱旧的持久用户连接。（不要问）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-21T19:36:46.420

我认为您需要为此使用动态 SQL。请在使用动态 SQL 之前阅读[此基本页面。](http://www.sommarskog.se/dynamic_sql.html)

```
DECLARE @SPID smallint
DECLARE @SQL nvarchar(1000)

SET @SPID = 100

SET @SQL = 'KILL ' + CAST(@SPID as varchar(4))

EXEC (@SQL) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:44:05.270

您也可以随时通过 SMO 执行此操作，使用 powershell 或 C#：

[http://msdn.microsoft.com/en-gb/library/microsoft.sqlserver.management.smo.server.killprocess(v=sql.110).aspx](http://msdn.microsoft.com/en-gb/library/microsoft.sqlserver.management.smo.server.killprocess(v=sql.110).aspx)

这种对sql server及其代码的管理，正是powershell和SMO所擅长的，而T-SQL有时也可以玩弄。

# r - 将GIS形状文件转换为R中的栅格？

> ID：15010690
> 
> 赞同：2
> 
> 时间：2013-02-21T19:32:49.980
> 
> 标签：r, shape, spatial, raster

我需要将 shapefile 转换为光栅格式。

我在 R 包“raster”中使用了函数“rasterize”，但结果看起来不正确。

```
tst <- rasterize(shpfile, r, fun="count")  
Found 5 region(s) and 5 polygon(s) 
```

没有出现记录的网格：

```
range(tst[],na.rm=TRUE)
[1]  Inf -Inf
Warning messages:
1: In min(x) : no non-missing arguments to min; returning Inf
2: In max(x) : no non-missing arguments to max; returning -Inf

sum(tst[],na.rm=TRUE)
[1] 0 
```

我写的 R 脚本：

```
# download the GIS shape file
download.file("http://esp.cr.usgs.gov/data/little/abiebrac.zip",
              destfile = "abiebrac.zip")

# unzip
unzip("abiebrac.zip")

# Read shapefile into R
library(maptools)

shpfile <- readShapePoly("abiebrac")
extent(shpfile)

# mapping
plot(shpfile)

library(maps)
map("world",xlim=c(-180,-50),ylim=c(7,83),add=FALSE)
plot(shpfile,add=TRUE,lwd=10)

# rasterize
library(raster)

GridSize <- 0.5 # degree
r <- raster(ncol= round(abs(-180-(-50))/GridSize), 
            nrow=round(abs(83-7)/GridSize))
extent(r) <- extent(c(-180, -50, 7, 83))
tst <- rasterize(shpfile, r, fun="count")

# summary
sum(tst[],na.rm=TRUE)
range(tst[],na.rm=TRUE)

# mapping
plot(tst,col="red",main="abiebrac")  
map("world",xlim=c(-180,-50),ylim=c(7,83),add=TRUE) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T19:49:44.773

我不确定你为什么在 fun 参数中使用“count”，但在这种情况下，因为没有重叠，它会产生 NA 结果。您还需要在 spatialPolygonDataFrame 对象中定义一个属性字段以将值分配给您的栅格。您也可以直接从 sp 对象中提取范围。

这段代码似乎产生了你想要的。

```
require(raster)
require(rgdal)
require(sp)

setwd("D:/TMP")
shpfile <- readOGR(getwd(), "abiebrac")
r <- raster(extent(shpfile))
  res(r)=0.05
    r <- rasterize(shpfile, field="ABIEBRAC_", r)

plot(r)
  plot(shpfile,lwd=10,add=TRUE) 
```

# java - 仅将最后一行打印到文本文件中，而不是 java 中的其余部分

> ID：15010692
> 
> 赞同：1
> 
> 时间：2013-02-21T19:33:07.840
> 
> 标签：java, text-files

我正在尝试将文件打印到文本文件。虽然我已经设法让它工作，但它只打印出控制台上打印的最后一行。例如，我的控制台大约有 8000 行，但它只打印出文本文件中的最后一行，我想将所有行打印到文本文件中。这是代码：

```
 try {
        BufferedReader reader = new BufferedReader(new FileReader("JDT.txt"));
        Writer output = null;
        File file = new File("output.txt");
        output = new BufferedWriter(new FileWriter(file));

        String line = reader.readLine();
        int count=0;
        while(line !=null)
        {
            for(int i = 0 ; i<faults.length;i++){
                if(line.contains(faults[i]))
                    System.out.println(line);
                count++; 
                output.write(line +"Total: "+count);
                //System.out.println("File Written");
        }
            line=reader.readLine();
            }                  
        System.out.println("Printed Lines =" +count); 
                   output.close();     
        }
    catch (Exception ex) {
        System.out.println(ex.getMessage());
        }       
}
    } 
```

提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:37:12.580

您在每个循环中重新创建和覆盖您的文件。创建你的文件和你`BufferedWriter`的循环之前，并在你的循环完成后关闭它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:41:07.407

您应该将这些行放在`while`循环开始之前。

```
Writer output = null;
File file = new File("output.txt");
output = new BufferedWriter(new FileWriter(file)); 
```

并关闭`Writer`while循环退出后。

```
output.close(); 
```

该语句`output.write(line +"Total: "+count);`还试图将每一行写在另一行的末尾，从而产生一大行输出。将其替换为：

```
output.write(line + "Total: " + count + "\n"); 
```

这应该导致每一行都打印在新行上。

不确定它是否是预期的，但在您的代码中可能会根据变量`output.write`的长度在同一行执行多次。`faults`这将导致同一行被多次打印。

如果 的长度`faults`是`n`将`write`被调用`n`次数为 相同的`line`。

我认为你需要这个：

```
while (line != null) {
    for (int i = 0; i < faults.length; i++) {
        if (line.contains(faults[i])) {
            count++;
            output.write(line + "Total: " + count + "\n");
            System.out.println(line);
            break;
        }
    }
    // System.out.println("File Written");
    line = reader.readLine();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T20:00:41.687

我想我会把它放在这里以供参考。这只是将行从输入文件复制到输出文件的一般方法。

```
final class Sample
{
   private static final String inputFile = "input_file.txt";
   private static final String outputFile = "output_file.txt";

   public void start()
   {

      BufferedReader bufferedReader;
      BufferedWriter bufferedWriter;
      try
      {
         bufferedReader = new BufferedReader(new FileReader(inputFile));
         bufferedWriter = new BufferedWriter(new FileWriter(outputFile));
         copyContents(bufferedReader, bufferedWriter);
         bufferedReader.close();
         bufferedWriter.close();
      }
      catch (final IOException e)
      {
         e.printStackTrace();
      }
   }

   private void copyContents(final BufferedReader bufferedReader, final BufferedWriter bufferedWriter)
   {
      try
      {
         String line = bufferedReader.readLine();
         while (null != line)
         {
            bufferedWriter.write(line + '\n');
            line = bufferedReader.readLine();
         }
      }
      catch (IOException e)
      {
         e.printStackTrace();
      }
   }
} 
```

# php - 为什么这个 php 文件上传不起作用？

> ID：15010697
> 
> 赞同：0
> 
> 时间：2013-02-21T19:33:34.977
> 
> 标签：php

我已经玩了一段时间了，但根本无法将提交的文件上传到服务器。

有人有想法么？

```
<?php
  if ($_POST["file"]){

    $allowedExts = array("mp3", "txt");
    $extension = end(explode(".", $_FILES["file"]["name"]));

    echo "Upload: " . $_FILES["file"]["name"] . "<br>";
    echo "Type: " . $_FILES["file"]["type"] . "<br>";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

    if (file_exists("upload/" . $_FILES["file"]["name"]))
    {
       echo $_FILES["file"]["name"] . " already exists. ";
    }
    else
    {
       move_uploaded_file($_FILES["file"]["tmp_name"],
                     "upload/" . $_FILES["file"]["name"]);
       echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
    }

  }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:50:37.080

确保您的表单具有 enctype ...

```
<form action=".." method=".." enctype="multipart/form-data">
.
.
</form> 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T19:40:34.640

您应该检查 的返回值`move_uploaded_file`，因为如果由于任何原因无法移动文件，它将返回 FALSE。如果您打开了警告，那么 PHP 将发出警告，为您提供有关失败原因的更多信息。您可以使用脚本顶部的以下代码打开警告：

```
error_reporting(E_WARNING);
ini_set('display_errors', '1'); 
```

你的上传目录是可写的吗？如果它不可写，那么显然`move_uploaded_file`会失败。

编辑：

正如另一位用户指出的那样，该`if ($_POST["file"])`行必须是`if ($_FILES["file"])`. 这可能就是所有的错误。

# c++ - HRESULT“类未注册”实现简单的 COM 服务器 DLL

> ID：15010702
> 
> 赞同：2
> 
> 时间：2013-02-21T19:34:05.730
> 
> 标签：c++, com, regsvr32

我正在关注这个网站教程：

[http://progtutorials.tripod.com/COM.htm](http://progtutorials.tripod.com/COM.htm)

初步证据：Visual Studio 2010，Windows 7 64 位。

我正在编写第 3 节中的示例。（实现服务器 DLL）。我已经完全按照所示输入了代码，并且在第 4.1 节中概述的代码的第 12 行执行此代码时出现“类未注册”异常（本教程向您展示了如何访问 DLL，我有遵循 3.1 至信）：

```
 hresult hr = CoGetClassObject(CLSID_Car, CLSCTX_SERVER, NULL, IID_IClassFactory, (void **) &pClassFactory); 
```

我尝试运行：

```
 regsvr32 xyz.dll 
```

xyz.dll 是我的 dll 的路径，以便注册 DLL。这导致尝试查找 DLLRegisterServer 时出错：

![在此处输入图像描述](../Images/7ef4cf139cfb7dcd008324edbc376b0d.png)

我已经跑了

```
 REGEDIT
 HKEY_CLASSES_ROOT\CarDLL.Car\CLSID = {d969084c-b758-43ea-a218-a48763167abd}
 HKEY_CLASSES_ROOT\CLSID\{d969084c-b758-43ea-a218-a48763167abd} = CarDLL.Car
 HKEY_CLASSES_ROOT\CLSID\{d969084c-b758-43ea-a218-a48763167abd}\InProcServer32 = C:\Users\wiocl2\Documents\Visual Studio 2010\Projects\CarDLL\debug\CarDLL.dll 
```

我假设将我需要的所有 GUIDS 都放在注册表中（GUIDS 是由我生成的）。

我假设需要将一个函数添加到允许它注册的类中，但我不知道如何执行此操作以及如何解决它。我有点迷茫，因为我已经很久没有使用 COM 了。如果有人可以在正确的方向上推动我，那将很有帮助。

编辑：哦，是的，我移动了#include // 包含 DEFINE_GUID 的定义

从 iid.cpp 到 iid.h 文件，否则我在构建时遇到未解决的外部错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T19:28:48.133

最可能的解释：您将 COM 对象构建为 32 位 DLL，但注册已作为 64 位 DLL 执行。

处理方法：打开一个管理员权限的命令窗口并导航到 DLL 的位置（C:\Users\wiocl2\Documents\Visual Studio 2010\Projects\CarDLL\debug）。在那里，输入：

```
c:\windows\sysWOW64\regedit <filename of .reg file whose contents are displayed above> 
```

这将运行 REGEDIT 的 32 位版本，确保在配置单元的正确部分创建注册表项。要验证这一点，您应该`{d969084c-b758-43ea-a218-a48763167abd}`在 HKLM\Software\Wow6432Node\Classes\CLSID 中看到一个条目，**而不是**HKLM\Software\Classes\CLSID。

`DllRegisterServer`是您可以在 COM 服务器 DLL 中实现的一种方法，如果您想使用它`regsvr32`来执行当前使用 .REG 方法的相同操作，则该方法是必需的。同样的警告适用：对于 32 位 DLL，您需要调用`c:\windows\sysWOW64\regsvr32.exe`.

是的！COM**大部分**仍然存在并且运行良好 :) 至少在 VS 2012 中仍然有对它的标准支持。

希望有帮助。

# java - 使用java计算字符串中字母的出现次数

> ID：15010706
> 
> 赞同：-2
> 
> 时间：2013-02-21T19:34:22.767
> 
> 标签：java

最近我做了一个问题，我发现是否可以在字符串中找到一个字符。我想知道如何使用 Java 计算字符串中每个字母的出现次数，然后按字母顺序打印？例如，如果字符串是“alabama”，那么函数将返回“a:4, b:1, l:1, m:1”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:40:01.283

就像是：

```
TreeMap<Character, Integer> map = new TreeMap<Character, Integer>();

for (char c: str.toCharArray())
{
  Integer i = map.get(c);
  if (i == null)
    i = 0;
  map.put(c, i+1);
}
System.out.println(map); 
```

如果数字仅限于“a”到“z”或 ASCII 范围 (0-255)，则将其存储在数组中会更有效（代码具有相同的想法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:24:16.420

另一个使用地图的例子。

```
String myString = "alabama";        
NavigableMap<Character, Integer> myMap = new TreeMap<Character, Integer>();
for(char c : myString.toCharArray()) {
    if(myMap.get(c)==null){
        myMap.put(c, 1);
    }else {
        myMap.put(c, myMap.get(c)+1);
    }           
}       
for (Map.Entry<Character, Integer> entry : myMap.entrySet()) {
    System.out.print(entry.getKey() + ":" + entry.getValue() );
    if(!myMap.lastKey().equals(entry.getKey())){
        System.out.print(", ");
    }
} 
```

或者...

**更新**

```
String str = "alabama";     
Map<Character, Integer> auxMap = new TreeMap<Character, Integer>();
    for(char c : str.toCharArray()) {
        if(auxMap.get(c)==null){
            auxMap.put(c, 1);
        }else {
            auxMap.put(c, auxMap.get(c)+1);
        }           
    }   
    System.out.println(auxMap); 
```

# android - xml居中的textview到左边

> ID：15010708
> 
> 赞同：0
> 
> 时间：2013-02-21T19:34:25.673
> 
> 标签：android, xml, android-linearlayout

我尝试在我的屏幕上创建某种中风，显示 4 件事。左侧是一个后退按钮，中间是关卡名称，右侧是 scoreInfoOne 和 scoreInfoTwo，但在彼此下方。我使用以下代码，但奇怪的是关卡名称似乎没有居中，scoreInfoTwo 的值越长，关卡名称在左侧越多。有任何想法吗？

```
<LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="35dp"
        android:background="#25ab89"
        android:orientation="horizontal"
        android:weightSum="4" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="1"
            android:gravity="center"
            android:orientation="vertical" >

            <ImageView
                android:id="@+id/ivBackButton"
                android:layout_width="18dp"
                android:layout_height="18dp"
                android:src="@drawable/arrow" />
        </LinearLayout>

        <TextView
            android:id="@+id/tvScoreBoard"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="2"
            android:gravity="center"
            android:text="level"
            android:textColor="#ffffff"
            android:textSize="18dp" />

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="1"
            android:gravity="right"
            android:orientation="vertical"
            android:paddingRight="2dp" >

            <TextView
                android:id="@+id/tvScoreInfoOne"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:text="0/30"
                android:textColor="#ffffff"
                android:textSize="12dp" />

            <TextView
                android:id="@+id/tvScoreInfoTwo"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:text="score:"
                android:textColor="#ffffff"
                android:textSize="12dp" >
            </TextView>
        </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:53:39.087

您的子视图必须将 layout_width 设置为零：

```
android:layout_width="0px" 
```

所以你的布局看起来像：

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="35dp"
    android:background="#25ab89"
    android:orientation="horizontal"
    android:weightSum="4" >

    <LinearLayout
        android:layout_width="0px"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:gravity="center"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/ivBackButton"
            android:layout_width="18dp"
            android:layout_height="18dp"
            android:src="@drawable/arrow" />
    </LinearLayout>

    <TextView
        android:id="@+id/tvScoreBoard"
        android:layout_width="0px"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="2"
        android:gravity="center"
        android:text="level"
        android:textColor="#ffffff"
        android:textSize="18dp" />

    <LinearLayout
        android:layout_width="0px"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:gravity="right"
        android:orientation="vertical"
        android:paddingRight="2dp" >

        <TextView
            android:id="@+id/tvScoreInfoOne"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:text="0/30"
            android:textColor="#ffffff"
            android:textSize="12dp" />

        <TextView
            android:id="@+id/tvScoreInfoTwo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:text="score:"
            android:textColor="#ffffff"
            android:textSize="12dp" >
        </TextView>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:57:14.753

首先，您不能`android:layout_gravity="anything"`在`LinearLayout`. 对于`LinearLayout`s，您使用权重来定义要使用的空间量。对于你想要做的事情，我建议使用 a`RelativeLayout`然后你可以`TextView`通过使用来定义你想要你的或其他项目的位置，`android:layout_below="@+id/other_textview`并且有很多`android:layout_[direction]`可供选择，你可以使用`layout_gravity="center_horizontal"`这些。

```
 <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="35dp"
            android:background="#25ab89">

                <ImageView
                    android:id="@+id/ivBackButton"
                    android:layout_width="18dp"
                    android:layout_height="18dp"
                    android:layout_alignParentLeft="true"
                    android:layout_alignParentTop="true"
                    android:src="@drawable/arrow" />

                <TextView
                    android:id="@+id/tvScoreBoard"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_horizontal"
                    android:layout_below="@id/ivBackButton"
                    android:gravity="center"
                    android:text="level"
                    android:textColor="#ffffff"
                    android:textSize="18dp" />

                 <TextView
                    android:id="@+id/tvScoreInfoOne"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="right"
                    android:layout_below="@id/tvScoreBoard"
                    android:alignParentRight="true"
                    android:text="0/30"
                    android:textColor="#ffffff"
                    android:textSize="12dp" />

                <TextView
                    android:id="@+id/tvScoreInfoTwo"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="right"
                    android:layout_below="@id/tvScoreInfoTwo"
                    android:alignParentRight="true"
                    android:text="score:"
                    android:textColor="#ffffff"
                    android:textSize="12dp" />
</RelativeLayout> 
```

# cocoa - 如何将加密的 NSData 转换为纯文本字符串

> ID：15010709
> 
> 赞同：1
> 
> 时间：2013-02-21T19:34:28.817
> 
> 标签：cocoa, encryption, aes

我正在接受用户输入的 NSString，使用 NSUTF8StringEncoding 将其转换为 NSData。然后，我使用 CCCrypt 使用随机盐和 IV 以及用户输入的密码来加密该数据。

我的问题是，如何将此加密的 NSData 转换为可以由纯文本 AES 解密器解密的格式，例如[http://www.everpassword.com/aes-encryptor](http://www.everpassword.com/aes-encryptor)？

此外，CCCrypt 是否会自动将盐和轮数添加到加密数据中？还是我需要以某种方式手动添加它们，然后才能通过仅访问秘密密码来解密数据？

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:24:17.180

您发布的网站使用[Gibberish-aes](https://github.com/mdp/gibberish-aes)和 giberish aes 使用 openssl 兼容格式。CCCrypt 不会自己给你这种格式，但是你不必自己做。[RNCryptor](https://github.com/rnapier/RNCryptor)恰好有一个 OpenSSL 格式模式`RNOpenSSLEncryptor`。

# javascript - 如何制作javascript自定义上传文件？

> ID：15010711
> 
> 赞同：1
> 
> 时间：2013-02-21T19:34:30.693
> 
> 标签：javascript, file-upload, upload

我一直在努力使用自定义 UI 创建一个全新的上传控件。我已经完成了 UI 部分，但我无法获得正在获取要上传文件的完整路径名的后台作业。请帮我做真正的上传部分。

** 老实说，我在网上找到了这个代码 **

这是链接 - [http://jsfiddle.net/c3kyX/](http://jsfiddle.net/c3kyX/)

这是下面的代码

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
    <html>
    <head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <style type="text/css">
    #container {
        position: relative;
        width: 100px;
        height: 100px;
        border: 1px solid red;
        overflow: hidden;
    }
    #doit, #hid {
        position: absolute;
        cursor: default;
    }
    #doit {
        top: 0;
        left: 0;
        border: 1px solid #000;
    }
    #hid {
        opacity: 0.001;
        font-size: 300%;
        top: -5px;
        right: -5px;
    }
    </style>
    <!--[if IE]>
    <style type="text/css">
    #hid {
    display: none;
    }
    </style>
    <![endif]-->
    </head>
    <body>
    <div id="container" title="Choose File">
    <div id="doit">
    <img src="upload.png" width="100" width="100" />
    </div>
    <input id="hid" type="file" size=1>
    </div>
    <script type="text/javascript">
    doit.onclick = function(){hid.click();};
    </script>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:38:01.807

问题是你没有对文件做任何事情。您需要将其发布到某个地方以进行处理，并且表单需要具有正确的 enctype。例如：

```
 <form action="upload.php" ENCTYPE="multipart/form-data" method="post"> 
```

显然，您需要编写处理实际文件处理的脚本（当然它不必是 php 文件）。

# ajax - 使用 ember-data/DataStore 将外部数据加载到 Ember 模板中

> ID：15010713
> 
> 赞同：0
> 
> 时间：2013-02-21T19:34:34.480
> 
> 标签：ajax, json, ember.js, handlebars.js, ember-data

这是我很想做的事情：

1.  发出 ajax 请求以从 PHP 脚本中检索 JSON 数据
2.  将该信息插入到 DataStore 模型中
3.  将这些模型存储在控制器中
4.  使用带有把手模板的 {{#each}} 显示信息

* * *

*   ember-data 是否有内置的数据检索方式？如果不是，应该在哪里实现 AJAX 请求？

*   将 JSON 数据插入 DS 模型的最佳方法是什么？

*   然后将模型与控制器同步的最佳方法是什么？

* * *

任何实现所有 4 个步骤的示例也将非常有帮助，因为我似乎找不到任何示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T21:10:13.910

**发出 AJAX 请求**

```
// Find all pets.
var pets = App.Pet.find();

// Find pet with ID of 1.
var pet = App.Pet.find(1); 
```

**进入 DataStore 模型**

`pets`上面将是一个 DS.RecordArray 包含许多`App.Pet`模型，而`pet`只是一个`App.Pet`。

**存储在控制器中**

```
App.IndexRoute = Ember.Route.extend({
   model: function() {
       return App.Pet.find(4);
   } 
}); 
```

路由器用于设置控制器，因此我们在这里指定`IndexController`应该持有一个`App.Pet`ID 为 4 的路由器。这当然可以是动态的。由于你的控制器只代表一个模型，它应该是 type `ObjectController`，但如果它用于存储**许多**宠物，那么它应该是 type `ArrayController`。

`IndexController`通过指定模型，您将可以在您的和索引视图 ( `data-template-name="index"`)中访问它。这是因为当您进入您的索引路由时，`IndexController`位于/实例化、`IndexView`实例化并放置到 DOM 中，所有这些都是在咨询`IndexRoute`设置控制器之后。

你现在可以在你的模板中做这样的事情（虽然`model.`不是必须的）：，`{{model.name}}`这会得到你宠物的名字。

**使用#each 显示**

使用上述代码的修改版本查找所有宠物，但返回所有宠物。请记住，这是通过不为您的`find`方法指定任何参数来完成的：

```
App.IndexRoute = Ember.Route.extend({
   model: function() {
       return App.Pet.find();
   }
}); 
```

现在我们可以循环遍历索引模板中的所有宠物。虽然有很多方法可以循环，例如包括`content.`/ `model.`，排除`.content`/ `model`，使用`this`,`controller`等等......，但这不是必需的，但那是另一天。目前重要的是这对你有用，并且是最直观的：

```
{{#each pet in controller}}
    {{pet.name}}
{{/each}} 
```

如果您愿意，我会为此编写一个 jsFiddle。请告诉我。

**问题**

> ember-data 是否有内置的数据检索方式？如果不是，应该在哪里实现 AJAX 请求？

是的，这就是[Ember Data 模块，它](https://github.com/emberjs/data)[在 EmberJS.com 上](http://emberjs.com/guides/models/)有一些很好的指南。

> 将 JSON 数据插入 DS 模型的最佳方法是什么？

按照上面的示例使用 Ember 数据。

> 然后将模型与控制器同步的最佳方法是什么？

在适当的路由中使用`model`钩子来指定你的控制器代表的模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T21:11:09.697

**<编辑>**

就像我在评论中说的那样，这个问题一次问了很多，所以要跟进，这是一个正在进行的小提琴：http: [//jsfiddle.net/schawaska/dWcUp/](http://jsfiddle.net/schawaska/dWcUp/)

这不是 100%，但涵盖了您的一些问题。它使用 FixtureAdapter。我会在有时间的时候更新它。

**</编辑>**

> 1 发出 ajax 请求以从 PHP 脚本中检索 JSON 数据

Ember-Data 将为您解决这些问题。考虑以下：

```
window.App = Em.Application.create();

App.Store = DS.Store.extend({
    revision: 12,
    adapter: 'DS.RESTAdapter'
});

App.Product = DS.Model.extend({
    name: DS.attr('string'),
    imageUrl: DS.attr('string')
}) 
```

上面的代码在您的客户端应用程序中定义了一个数据存储（几乎就像一个 ORM）。Ember 使用约定优于配置（大量），因此根据配置，此代码希望您的后端在与`/products`GET、POST、PUT 和 DELETE 对话的同一域中拥有资源。

> 2 将该信息插入到 DataStore 模型中

考虑到我上面所说的，通过调用以下方法之一：

`App.store.find(App.Product)`或者`App.Product.find()`

EmberData 将通过针对您的资源的 AJAX 触发 GET 请求`/products`，如果您说`App.Product.find(1)`，它将针对`/products/1`。您的应用程序`store`将使用它`adapter`和适配器`serializer`来转换 JSON 结果并将其数据具体化到您的`App.Product`模型中。

> 3 将这些模型存储在控制器中

这是在定义应用程序路由器时完成的。无论您做什么，Ember 都会运行它自己的工作流程，但它为您提供了几个挂钩，让您可以控制该特定操作。考虑以下：

```
App.Router.map(function() {
  this.resource('products');
});

App.ProductsRoute = Ember.Route.extend({
  model: function() {
    return App.Product.find();
  }
}); 
```

上面的代码填充了`products`路由中使用的模型（您可以通过[http://yourdomain.com/#/products](http://yourdomain.com/#/products)访问）。在内部它将为您生成代码`ProductsController`，或者您可以定义自己的代码，它应该扩展`ArrayController`. 控制器将有一个`content`属性，它是模型或模型集合的别名。同样，约定优于配置。

> 4 使用带有把手模板的 {{#each}} 显示信息

如果您遵循约定，在您的车把模板中，您应该像这样遍历您的集合：

```
{{#each product in controller}}
    {{#linkTo 'product' product}}
        {{product.name}}
    {{/linkTo}}
{{/each}} 
```

* * *

> *   ember-data 是否有内置的数据检索方式？如果不是，应该在哪里实现 AJAX 请求？

是的，只需调用一个产品模型，它会在向后端的产品资源发出 AJAX 请求时`App.Product.find()`返回一个空白，然后在从服务器接收到数据后将数据具体化/填充到每个模型中。`ModelArray`

> *   将 JSON 数据插入 DS 模型的最佳方法是什么？

如果您使用的是 ember-data，则不必担心这一点。在大多数情况下，该框架会为您做到这一点。这就是我们喜欢它的原因。但是，您可能必须根据后端配置映射、命名空间和复数。

> *   然后将模型与控制器同步的最佳方法是什么？

与此类似的东西：

```
var product = App.Product.createRecord({
    name: 'laptop',
    imageUrl: 'path/to/image.png'
});
product.save(); 
```

这应该向您的后端 API 发出一个`POST`或`PUT`请求。

* * *

您绝对应该检查：

[http://emberjs.com/guides/](http://emberjs.com/guides/)

[https://peepcode.com/products/emberjs](https://peepcode.com/products/emberjs)

[http://toranbillups.com/blog/archive/2013/01/03/Intro-to-ember-js-and-the-new-router-api/](http://toranbillups.com/blog/archive/2013/01/03/Intro-to-ember-js-and-the-new-router-api/)

# python - 如何在 Python 中封装类时访问上下文标签？

> ID：15010720
> 
> 赞同：0
> 
> 时间：2013-02-21T19:35:01.850
> 
> 标签：python, oop, object-oriented-analysis

我正在尝试从封装类中获取封装的类抓取上下文，例如标签。一种方法是传递标签，就像我在下面显示的实例化期间一样。

我已经看到日志模块如何允许您使用 get_logger 函数订阅子日志，并且我想要一个 get_context() 函数。有没有办法做到这一点？

如果这个标签的传递达到一个级别，就像下面的 YetAnotherClass，它似乎可以容忍......但是如果你必须将它传递到 3 或 4 个级别 --- 这就是我真正想要另一个解决方案来传递这个标签的地方。

我应该以不同的方式思考这个问题吗？这是一些示例代码：

```
class RootClass(object) :
    def __init__(self) :
        self.ac = AnotherClass('root_class_context')
    def do_insert(self) :
        """ use DataTableMgr class to update table """
        self.ac.insert_to_table('field1', 'field2', 'field3')

class AnotherClass(object) :
    def __init__(self, label) :
        self.context = label
        self.dtm = DataTableMgr('arg1','arg2', 'arg3', 'arg4', self.context)

    def insert_to_table(self, field1, field2, field3) :
        """ insert args to database using DataTableMgr """
        self.dtm.insert_to_table(field1, field2, field3)

class YetAnotherClass(object) :
    def __init__(self) :
        self.dtm = DataTableMgr('arg1','arg2', 'arg3', 'arg4', 'yetanother_context')

    def do_insert(self) :
        """ use DataTableMgr class to update table """
        self.dtm.insert_to_table('field1', 'field2', 'field3')

class DataTableMgr(object) :
    """ manage insert, updates to some table """
    def __init__(self, arg1, arg2, arg3, arg4, user_id) :
        self.context = user_id

    def insert_to_table(self, field1, field2, field3) :
        """ insert fields to table, while updating user id"""
        print( "inserting...(pretending to be updating sql database)")
        print(field1, field2, field3, self.context)
        print

if __name__ == "__main__" :
    #instantiate a class once removed from the inserting class and do insert
    rc = RootClass()
    rc.do_insert()

    #instantiate a class directly accessing the class for inserting
    yac = YetAnotherClass() 
    yac.do_insert()             

    #note how the context changes       
    print                                   
    print("Notice how the context changes?  "   
        ".. is there a better way to pass around this context information?") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:01:09.717

好吧，我能想到的最简单的方法是使用继承：

```
class DataTableMgr(object):
    """ manage insert, updates to some table """
    def __init__(self, arg1, arg2, arg3, arg4, context):
        self.context = context

    def insert_to_table(self, field1, field2, field3):
        """ insert fields to table, while updating user id"""
        print("inserting...(pretending to be updating sql database)")
        print(field1, field2, field3, self.context)
        print

    def do_insert(self):
        """ use DataTableMgr class to update table """
        self.insert_to_table('field1', 'field2', 'field3')

class AnotherClass(DataTableMgr):
    def __init__(self, context):
        DataTableMgr.__init__(self, 'arg1', 'arg2', 'arg3', 'arg4', context)

class RootClass(AnotherClass):
    def __init__(self):
        AnotherClass.__init__(self, 'root_class_context')

class YetAnotherClass(DataTableMgr):
    def __init__(self):
        DataTableMgr.__init__(
            self, 'arg1', 'arg2', 'arg3', 'arg4', 'yetanother_context') 
```

* * *

但也许你不想使用继承，因为`RootClass`不是 a `DataTableMgr`，而是*有一个* `DataTableMgr`. 在这种情况下，您可能会考虑使用多态性将上下文传递给委托的封装对象。

```
class Base(object):
    def do_insert(self):
        """ use DataTableMgr class to update table """
        self.dtm.insert_to_table('field1', 'field2', 'field3', self.context)

    def insert_to_table(self, field1, field2, field3, context):
        """ insert args to database using DataTableMgr """
        self.dtm.insert_to_table(field1, field2, field3, context) 
```

为了促进多态性，委托对象应该可以使用`self.dtm`. 因此，当`do_insert`被调用时，委托对象`self.dtm`调用它的`insert_to_table`方法。如果`self.dtm`是一个`DataTableMgr`实例，则`DataTableMgr.insert_to_table`调用 then。但如果`self.dtm`是另一个`Base`实例，则调用*委托的* `insert_to_table`方法。依此类推，直到代表是`DataTableMgr`.

这是一个带有可运行代码的示例：

```
class Base(object):
    def do_insert(self):
        """ use DataTableMgr class to update table """
        self.dtm.insert_to_table('field1', 'field2', 'field3', self.context)

    def insert_to_table(self, field1, field2, field3, context):
        """ insert args to database using DataTableMgr """
        self.dtm.insert_to_table(field1, field2, field3, context)

class RootClass(Base):
    def __init__(self):
        self.context = 'root_class_context'
        self.dtm = AnotherClass()

class AnotherClass(Base):
    def __init__(self):
        self.dtm = DataTableMgr('arg1', 'arg2', 'arg3', 'arg4')

class YetAnotherClass(Base):
    def __init__(self):
        self.context = 'yetanother_context'
        self.dtm = DataTableMgr('arg1', 'arg2', 'arg3', 'arg4')

class DataTableMgr(object):
    """ manage insert, updates to some table """
    def __init__(self, arg1, arg2, arg3, arg4):
        pass

    def insert_to_table(self, field1, field2, field3, context):
        """ insert fields to table, while updating user id"""
        print("inserting...(pretending to be updating sql database)")
        print(field1, field2, field3, context)
        print

if __name__ == "__main__":
    # instantiate a class once removed from the inserting class and do insert
    rc = RootClass()
    rc.do_insert()

    # instantiate a class directly accessing the class for inserting
    yac = YetAnotherClass()
    yac.do_insert()

    # note how the context changes
    print
    print("Notice how the context changes?  "
          ".. is there a better way to pass around this context information?") 
```

# wpf - 比较剪贴板中的 IDataObject

> ID：15010724
> 
> 赞同：2
> 
> 时间：2013-02-21T19:35:16.720
> 
> 标签：wpf, c#-4.0, .net-4.0, clipboard

我的 WPF 应用程序检查剪贴板上的数据以查看它是否可以使用这些数据。因为我根据数据（通过`ICommand`实现）设置了一些要启用/禁用的按钮，所以经常调用此代码。

确定我的应用程序是否可以处理数据的工作有时可能很重要，因此导致我的应用程序随机“挂起”。我不相信我可以将这项工作推到另一个线程，因为 WPF 运行时期望快速响应。

为了解决这个问题，我想我会比较`IDataObject`s （剪贴板中的当前与上一次尝试中的缓存。直接比较（甚至 an`object.ReferenceEquals`不会返回所需的结果，所以我想我会试试这个方法`Clipboard.IsCurrent`。描述听起来正是我想要的，但是当我评估以下内容时：

```
Clipboard.IsCurrent(Clipboard.GetDataObject()) 
```

结果是`false`。当前的解决方法是比较 IDataObject 上的数据格式，但这不是一个好的答案，因为我的应用程序可以处理文件系统中的一些文件，但不是全部。因此，即使格式相同，我的应用程序是否可以处理数据的结果也可能并不总是相同的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-13T05:54:22.967

不幸的是，`IsCurrent`不能与`GetDataObject`. [MSDN 对`OleIsCurrentClipboard`](http://msdn.microsoft.com/de-de/library/windows/desktop/ms679667%28v=vs.85%29.aspx)（`IsCurrent`内部使用）的描述对此非常明确：

OleIsCurrentClipboard 仅适用于 OleSetClipboard 函数中使用的数据对象。**数据对象的使用者无法调用它来确定在上一次 OleGetClipboard 调用时位于剪贴板上的对象是否仍在剪贴板上。**

一种解决方法可能是订阅剪贴板更新（参见例如 [剪贴板事件 C#](https://stackoverflow.com/questions/621577/clipboard-event-c-sharp)）并仅在数据更改时评估数据，可能在后台线程中。

# c# - 匹配包含嵌套 HTML 的术语

> ID：15010726
> 
> 赞同：4
> 
> 时间：2013-02-21T19:35:20.417
> 
> 标签：c#

我一直无法找到解决此问题的方法。
我正在解析一些电子书的内容，找到特定的术语和字符，标记每个术语的位置和长度。

一个正常的情况是这样的（摘自《权力的游戏》）：

> “当他停下来往下看时，他头晕目眩，手指在滑落。布兰大叫着，紧紧抓住生命。”

如果我们搜索字符“Bran”，它的位置是 85，长度是 4。很容易。

当有这样的段落时，我的问题就出现了：

```
<span height="-0em"><font size="7">D</font></span>aenerys Targaryen wed Khal Drogo 
```

我们需要匹配“Daenerys Targaryn”。剥离 HTML 并匹配字符串很容易，但在此示例中，结果需要包含 HTML。因此，这里的预期结果将是位置 = 0，长度 = 67。

另一种情况，由散布在各处的随机锚标签引起：

```
Did anyone outside the Vale even suspect where Catelyn <a></a>Stark had taken him? 
```

同样，搜索“Catelyn Stark”需要包含 HTML，因此 location = 47，length = 20。

通过添加这些特定案例（专门搜索“Catelyn <a></a>Stark），我已经能够暂时解决它，但显然我应该有一个更强大的解决方案，我似乎无法理解。我的尝试一直在使用 RegEx，但成功有限。
我发现了有关 HTML 匹配/剥离（以及是否使用 RegEx =)）的各种问题，但这种情况似乎有些独特。
剥离标签不是一种选择因为必须保留内容。
这是在独立的 C# 应用程序中。
如果您的搜索比我的更好，任何想法、正确方向的步骤或类似示例将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T19:45:31.747

一种可能的方法是在搜索字符串的每个字母之间插入以下内容：

```
(?:<[^>]*>)* 
```

因此，在搜索字符“Bran”时，您的正则表达式将变为以下内容：

```
(?:<[^>]*>)*B(?:<[^>]*>)*r(?:<[^>]*>)*a(?:<[^>]*>)*n 
```

这将允许您的正则表达式匹配搜索字符串中任意位置的任意数量的 HTML 标记。请注意，这仅在您的搜索字符串总是像字符名称这样简单的东西而不是正则表达式时才有效（如果您的搜索字符串中有重复，此方法将失败`a*`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:01:15.640

我将创建一个将“Daenerys Targaryn”作为参数的函数，然后去掉第一个字母。然后，它只会搜索“aenerys Targaryn”，如果找到，它会搜索“>D<”或第一个变量字母。比有意义吗？

例子：

```
public static string searchFor(string str)
{
  // strip first letter of search string (in this case "D")
  // search for the rest of the string ("aenerys Targaryn")
  // if found, search for ">D<"
  // if found, search for HTML tags with "D" inside (using regex)
  // if found, search for HTML tags with the previous HTML tag in them (using regex)
  return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T19:44:50.940

好吧，使用 Javascript 或 Php，您可以获得元素的文本和文档的文本并在那里搜索，然后执行正则表达式以返回最接近的匹配项（包含 html）：

### 另外一个选项：

* * *

将首先使用诸如 Lucene 搜索引擎之类的东西来索引书籍（它恰好可以让您以不同的格式进行索引（html 格式就是其中之一）。

然后，您可以使用 Lucene api 更轻松地搜索您的文档。在 php 中，我们有[Zend_Search_Lucene](http://framework.zend.com/manual/1.12/en/zend.search.lucene.html)非常适合这种事情。

* * *

Lucene 搜索可以在以下位置找到：http: [//lucene.apache.org/core/](http://lucene.apache.org/core/)

玩得开心！

# html - knitr 的 html 输出中的标题

> ID：15010732
> 
> 赞同：13
> 
> 时间：2013-02-21T19:35:50.947
> 
> 标签：html, r, markdown, knitr, r-markdown

编织以下`Rmd`文件时

```
```{r, fig.cap="mycaption"}
plot(0,0,axes=FALSE,xlab=NA,ylab=NA)

``` 
```

使用 RStudio 的“Knit HTML”按钮，则标题不会出现在 html 输出文件中。确实上图对应的html源码是：

```
<p><img src="data:image/png;base64,..." alt="mycaption"/></p> 
```

要查看标题，它应该是例如：

```
<p><img src="data:image/png;base64,..." alt="mycaption"/><p class="caption">mycaption</p></p> 
```

如何轻松获得带有可见标题的 html 输出？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-21T23:24:49.367

我通常只`results='asis'`在块选项中使用并在块中包含原始 html，将其包裹起来，`cat()`但正如 Yihui 提到的，您可以创建自己的钩子：

```
```{r}
knit_hooks$set(htmlcap = function(before, options, envir) {
  if(!before) {
    paste('<p class="caption">',options$htmlcap,"</p>",sep="")
    }
    })
```

```{r, htmlcap="Hello Dolly"}
library(ggplot2)
ggplot(diamonds,aes(price,carat)) + geom_point()
``` 
```

# objective-c - UIAlertView的基本使用导致EXC_BAD_ACCESS

> ID：15010734
> 
> 赞同：0
> 
> 时间：2013-02-21T19:35:59.453
> 
> 标签：objective-c, cocoa-touch, crash, uialertview, exc-bad-access

我正在实现一个非常简单的 iOS 应用程序，只是为了练习在其中显示弹出警报，当我按下警报按钮时出现错误：

> 线程 1：EXC_BAD_ACCESS（代码=1，地址=0x676f6f57）

这是代码：

```
- (IBAction)AlertButton {

    alert = [[UIAlertView alloc]
         initWithTitle:@"Alert" message:@"Alert"
         delegate:self
         cancelButtonTitle:@"Dismiss"
         otherButtonTitles:@"Apple", "Google" ,nil];
    [alert show];}

-(void)alertView :(UIAlertView *)alertView clickedButttonAtIndex:(NSInteger)buttonIndex{

    if(buttonIndex == 1){
        [[UIApplication sharedApplication]openURL:[NSURL URLWithString:@"http://apple.com"]];
    }
    if(buttonIndex == 2){
        [[UIApplication sharedApplication]openURL:[NSURL URLWithString:@"http://google.com"]];
    }} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T19:57:01.037

问题出在 , 的构造函数上`UIAlertView`：

```
otherButtonTitles:@"Apple", "Google" ,nil]; 
```

你忘了`@`以前`"Google"`。最后改变：

```
-(void)alertView :(UIAlertView *)alertView clickedButttonAtIndex:(NSInteger)buttonIndex{ 
```

经过

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:52:25.353

真正的问题是你错过了`@`前面的一个`"Google"`，所以它不是一个`NSString`，因此是崩溃。

使用这个.h

不需要 IBOutlet.just

```
 UIAlertView *alert; 
```

.m

```
alert = [[UIAlertView alloc]
        initWithTitle:@"Alert"
              message:@"Alert"
             delegate:self
    cancelButtonTitle:@"Dismiss"
    otherButtonTitles:@"Apple", @"Google", nil
]; 
```

# iphone - 单击按钮删除后TableView删除

> ID：15010736
> 
> 赞同：0
> 
> 时间：2013-02-21T19:36:12.633
> 
> 标签：iphone, ios

所以我试图删除表视图中的行。

这是我的代码：

```
- (IBAction)done:(UIStoryboardSegue *)segue
{
    DetailGodsViewController *detailController = [segue sourceViewController];  
    NSIndexPath *path = [NSIndexPath indexPathForRow:detailController.row inSection:detailController.section];
    [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:path]
                     withRowAnimation:NO];
    [self.listOfGoods deleteGood: detailController.row];
    [[self tableView] reloadData];
    [self dismissViewControllerAnimated:YES completion:NULL];
} 
```

我在storyBoard中有ControlViewTable，单击ControlViewTable中的一行后，它会跳转到详细信息视图还有其他信息，我也在此函数中存储有关行和部分的信息：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"ShowGoodDetails"]) {
    DetailGodsViewController *detailViewController = [segue destinationViewController];

    detailViewController.row = [self.tableView indexPathForSelectedRow].row;
    detailViewController.section = [self.tableView indexPathForSelectedRow].section;
    detailViewController.good = [self.listOfGoods getGoodAtIndex:detailViewController.row ];
} 
```

在详细视图中还有一个按钮用于删除，点击后跳转到功能：

```
- (IBAction)done:(UIStoryboardSegue *)segue. 
```

但它总是在 deleteRows 中崩溃。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:58:01.767

您在该`done:`方法中的代码正在做一些无序的事情以及一些您不需要的额外事情。它应该是：

```
- (IBAction)done:(UIStoryboardSegue *)segue
{
    DetailGodsViewController *detailController = [segue sourceViewController];  
    NSIndexPath *path = [NSIndexPath indexPathForRow:detailController.row inSection:detailController.section];
    [self.listOfGoods deleteGood: detailController.row];
    [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:path]
                     withRowAnimation:NO];
    [self dismissViewControllerAnimated:YES completion:NULL];
} 
```

基本上，您需要在更新表之前更新数据。另外，打电话后不要`reloadData`在桌子上打电话`deleteRowsAtIndexPaths:`。做一个或另一个，而不是两个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:54:03.397

一个问题可能是当您试图摆脱包含该按钮的单元格时，您仍在响应该按钮。您需要让该操作方法结束，*然后*调用 deleteRows。你可能应该做我在这里推荐的那种事情：

[https://stackoverflow.com/a/13907375/341994](https://stackoverflow.com/a/13907375/341994)

但是，最大的问题可能是您必须在删除表的一行之前更新模型数据。

# javascript - 合并两个对象数组的最有效方法

> ID：15010737
> 
> 赞同：1
> 
> 时间：2013-02-21T19:36:21.883
> 
> 标签：javascript, arrays, performance, algorithm, merge

我已经解决了这个问题。但是，我正在寻找更快的解决方案，因为我的变量有数千个对象。

我有两个这样的数组：

```
var full = [{a:'aa1',b:'bb1'},{a:'aa3',b:'bb2'},{a:'aa3',b:'bb3'},{a:'aa2',b:'bb3'}],
some = [{a:'aa1',b:'bb1'},{a:'aa3',b:'bb3'}]; 
```

如果对象存在于某些对象上，我正在尝试**标记**一个称为`c`in的新属性。`full`预期结果：

```
 [{a:'aa1',b:'bb1',c:true},{a:'aa3',b:'bb2'},{a:'aa3',b:'bb3',c:true},{a:'aa2',b:'bb3'}] 
```

一些重要提示：

*   有些元素的元素总是少于完整的
*   两个数组排序相等

我目前的做法是：

```
var getIndexByAB = function(arr, a,b){
     var initialIndex =  getIndexByAB.initialIndex || 0,
     len = arr.length;
     for(initialIndex; initialIndex < len ;initialIndex++ ){
         var el = arr[initialIndex];
         if( el.b === b && el.a === a ){
             getIndexByAB.initialIndex = initialIndex;
             return initialIndex;
         }
     }
     return -1;
}

var len = some.length;
for(var i = 0; i < len ; i++){
 var el=some[i],
 index = getIndexByAB(full,el.a,el.b);
 if(index > -1) full[index].c = true;
} 
```

**UPDADE**：使用 Juan 评论改进了原始解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:47:34.690

由于它们是排序的，你可以只传递一个索引来开始搜索，这将避免 O(n^2)。您已经这样做了，但是通过将索引存储在全局变量中。相反，您应该将其作为参数传递给`getIndexByAB`.

```
function getIndexByAB(arr, a,b , initialIndex){
    // Was tracking last index by storing it in a global 'this.initialIndex'. 
    // 'this' points to 'window' in global functions. That's bad, it 
    // means this function can't be called on different arrays without
    // resetting the global 

    // var initialIndex =  this.initialIndex || 0,

    initialIndex = initialIndex || 0;
    var len = arr.length;
    for(initialIndex; initialIndex < len ; initialIndex++ ){
        var el = arr[initialIndex];
        if( el.b === b && el.a === a ){
            // Bad globals
            // this.initialIndex = initialIndex;
            return initialIndex;
        }
    }
    return -1;
}

var len = some.length;
var lastValidIndex = 0;
for(var i = 0; i < len ; i++){
    var el = some[i];
    // Pass the index here, so it doesn't start from scratch
    var index = getIndexByAB(full, el.a, el.b, lastValidIndex);
    if(index > -1) {
        full[index].c = true;
        lastValidIndex = index;
    }
} 
```

顺便说一句，如果你确实想要一个函数来缓存一些值，这里是如何避免全局变量的方法。（不是说你应该在这种情况下使用它）

```
var getIndexByAB = (function(){
     // This will only be executed once, and is private
     // to getIndexByAB (all invocations)
     var lastGoodIndex = 0;

     return function(arr, a,b, resetIndex){
         if (resetIndex) {
            lastGoodIndex = 0;
         }

         var len = arr.length;
         for(var index = lastGoodIndex; index < len ; index++ ){
             var el = arr[index];
             if( el.b === b && el.a === a ){                 
                 lastGoodIndex = index;
                 return index;
             }
         }
         return -1;
    };
})(); 
```

或者，您可以通过缓存它来实现以下功能，`getIndexByAB.initialIndex`但它不是很优雅。避免这种情况的主要原因是`getIndexByAB.initialIndex`任何人都可以修改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:42:12.400

由于数组都已排序并且`some`严格小于`full`，因此您可以通过使用不同索引同时遍历两个数组来节省一些时间。实际上，您`full`每次都在遍历以获取匹配元素的索引，因此您有**O(N^2)**运行时间，但您只需要从匹配的最后一个元素继续搜索即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:18:43.930

不如@Juan 的回答高效（它利用了排序的性质等），但我认为我仍然会提出我的解决方案，因为它偶然迫使我想出一个克隆和比较 Javacript 对象的解决方案。

### 实用程序

```
// Create a copy of x without reference back to x
function clone(x){
  return JSON.parse(JSON.stringify(x));
}

// Pass any number of arguments of any type. Returns true if they are all identical.
function areEqual(){
  for(var i = 1, l = arguments.length, x = JSON.stringify(arguments[0]); i < arguments.length; ++i){
    if(x !== JSON.stringify(arguments[i])){
      return false;
    }
  }

  return true;
} 
```

### 标记功能

```
// Your flagLabel being 'c'
function matchAndFlagWith(flagLabel,aFull,aSome){
  var aFlagged = clone(aFull);

  for(var i1 = 0, l1 = aSome.length, oSome; oSome = aSome[i1], i1 < l1; ++i1){
    for(var i2 = 0, l2 = aFlagged.length, oFlagged; oFlagged = aFlagged[i2], i2 < l2; ++i2){
      if(areEqual(oFlagged,oSome)){
        oFlagged[flagLabel] = true;
      }
    }
  }

  return aFlagged;
} 
```

### 演示

[http://jsfiddle.net/barney/p2qsG/](http://jsfiddle.net/barney/p2qsG/)

# security - Nexus Pro 如何自动验证下载工件的真实性？

> ID：15010743
> 
> 赞同：3
> 
> 时间：2013-02-21T19:36:37.817
> 
> 标签：security, maven, build, nexus, pgp

我对 Maven 中央存储库安全性进行了一些研究，尤其是交叉构建注入攻击 (XBI)。我阅读了一些链接，我在下面列出了这些链接：

[http://www.sonatype.com/people/2010/01/how-to-generate-pgp-signatures-with-maven/](http://www.sonatype.com/people/2010/01/how-to-generate-pgp-signatures-with-maven/)

[http://maven.apache.org/guides/mini/guide-central-repository-upload.html](http://maven.apache.org/guides/mini/guide-central-repository-upload.html)

[在基于 Maven POM 的自动构建系统中验证依赖项真实性](https://stackoverflow.com/questions/3307146/verification-of-dependency-authenticy-in-automated-build-systems)

以下是我理解的关键点

1.  所有上传到中央存储库的工件都需要由开源项目的发布经理拥有的 PGP 私钥签名的工件。
2.  公钥应提交给密钥服务器，例如 MIT 密钥服务器
3.  手动验证下载的工件很麻烦。
4.  Nexus Pro 等存储库管理器提供了自动验证下载工件签名的功能。

但是，Nexus Pro 是如何进行自动验证的呢？Nexus 是否维护 Maven Central 托管的所有开源项目的 PGP keyid 存储库？sonatype 是否对开源项目上传到密钥服务器的 PGP 公钥进行验证和签名？有人知道内幕吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T22:34:48.743

所有 GPG 密钥都在公钥服务器上可用，并且 Nexus 会针对每个下载的组件验证这些密钥。每次上传到 Central 都需要一个已知的、注册的和批准的密钥。

有关该过程的更多详细信息，请参见[https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide](https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide)

# python - 需要用 def 语句编写代码吗？& 不能使用全局变量

> ID：15010755
> 
> 赞同：0
> 
> 时间：2013-02-21T19:37:12.807
> 
> 标签：python, function

我遇到了 def 语句的问题。我似乎无法真正理解他们。我必须为类似于赌场老虎机的课程制作代码。我有一个可以做到这一点的代码，但不是我需要的 def 语句。我也不能使用全局变量。谁能指出我正确的方向？

```
import random

money=''

b1=''

def greeting():

        print("Project 2")

def myMoney(money=0): 

    money=int(input("Let's play the slots!\nHow much money do you want to start with?\nEnter the starting number of dollars."))
    return money
    while True:
        if money>0:
            break
        if money==0:
            break

def getBet(bet=''):

        b1=int(input("How much do you want to bet?"))
        while True:
            if bet==0:
                break
            while True:
                if bet>money:
                    print("ERROR: You don't have that much left.")
                    print()
                    b1=int(input("How much do you want to bet?"))
                if bet<money:
                    input("Press enter to pull the slot machine handle!")
                    break
        return money
        return bet

    num1=random.randint(1, 5)
    num2=random.randint(1, 5)
    num3=random.randint(1, 5)
    print("/---+---+---\ ")
    print("|-"+str(num1)+"-|-"+str(num2)+"-|-"+str(num3)+"-|")
    print("\---+---+---/")

greeting()

myMoney()

getBet() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:36:31.897

在您的“def 语句”（函数）中，您可以根据需要定义变量。他们不会是全球性的

```
def A_function():
    money = 0
    #do all sorts of things 
```

基本上相当于：

```
money=''
def Another_function(money=0):
    #do all sorts of things 
```

这就是你所拥有的。看看我如何使用第一个函数在函数*内部*定义变量“money” ？在第二个中，您将变量重新定义为您需要的变量。最终效果是相同的，但是，首选首选，因为它有助于跟踪所有变量并且不会全局定义变量。在您的代码中，不需要在顶部定义“b1”和“money”，因为您已经从位于每个函数中的输入语句中获得了一个值。

# qt - AttributeError：“QTextEdit”对象没有属性“文本”

> ID：15010756
> 
> 赞同：4
> 
> 时间：2013-02-21T19:37:16.170
> 
> 标签：qt, python-2.7, pyside, qlineedit

有时我需要使用递增的数字制作多个代码副本。在我正在编码的表单中，我需要制作超过 12 个复选框，每个复选框都需要以下代码：

```
 self.checkBox1 = QtGui.QCheckBox()
    self.checkBox1.setGeometry(QtCore.QRect(20, 20, 70, 17))
    self.checkBox1.setObjectName(_fromUtf8("checkBox1")) 
```

下面的脚本使我能够避免手动更改每个复选框的数字的无聊任务。我只是将上面的 3 行复制到 windows 剪贴板中，然后...我将“checkBox”插入表单的第一个字段，将“1”插入第二个字段，将 12 插入第三个字段。当我点击“确定”按钮时，3 行的 12 个按顺序编号的副本出现在表单的第 4 个字段中。我希望这对其他人提供一些帮助。马克

这是我的代码：

```
 # -*- coding: latin-1 -*-
"""
duplicate_text_with_incrementing_nos_for_programming_and_paste_to_clipboard.py
Harvest text from clipboard and run functions below, and then paste back to clipboard

"""

import sys
from PyQt4 import QtCore
from PyQt4 import QtGui
from PyQt4.QtCore import (Qt, SIGNAL)
from PyQt4.QtGui import (QApplication, QDialog, QHBoxLayout, QLabel,
        QPushButton)

class Form(QDialog):

    def __init__(self, parent=None):
        super(Form, self).__init__(parent)

        self.initUI()

    def initUI(self):
        okButton01 = QtGui.QPushButton("OK")
        cancelButton01 = QtGui.QPushButton("Cancel")
        okButton01.clicked.connect(self.fn_okButton01_clicked)
        cancelButton01.clicked.connect(QtCore.QCoreApplication.instance().quit)
        self.cancelButton01 = cancelButton01

        prefix_label = QtGui.QLabel('Prefix')
        digit_label = QtGui.QLabel('Digit')
        iterations_label = QtGui.QLabel('Iterations')
        clip_label = QtGui.QLabel('Clip')

        prefixEdit = QtGui.QLineEdit()
        digitEdit = QtGui.QLineEdit()
        iterationsEdit = QtGui.QLineEdit()
        reviewEdit = QtGui.QTextEdit()

        self.prefix_label = prefix_label
        self.digit_label = digit_label
        self.iterations_label = iterations_label
        self.clip_label = clip_label

        self.prefixEdit = prefixEdit
        self.digitEdit = digitEdit
        self.iterationsEdit = iterationsEdit
        self.reviewEdit = reviewEdit

        hbox01 = QtGui.QHBoxLayout()
        hbox01.addWidget(prefix_label)
        hbox01.addWidget(prefixEdit)

        hbox01.addWidget(digit_label)
        hbox01.addWidget(digitEdit)
        hbox01.addWidget(iterations_label)
        hbox01.addWidget(iterationsEdit)

        hbox03 = QtGui.QHBoxLayout()
        hbox03.addWidget(clip_label)
        hbox03.addWidget(reviewEdit)

        self.reviewEdit.setText(fn_getText())

        hbox00 = QtGui.QHBoxLayout()
        hbox00.addStretch(1)
        hbox00.addWidget(okButton01)
        hbox00.addWidget(cancelButton01)

        vbox0 = QtGui.QVBoxLayout()
        vbox0.addLayout(hbox01)
        vbox0.addStretch(1)
        vbox0.addLayout(hbox03)
        vbox0.addStretch(1)
        vbox0.addLayout(hbox00)

        self.setLayout(vbox0)

        self.setGeometry(300, 300, 600, 300) #class PySide.QtCore.QRectF(left, top, width, height)   http://srinikom.github.com/pyside-docs/PySide/QtCore/QRectF.html#PySide.QtCore.QRectF
        self.setWindowTitle('Duplicate Code Strings W/Increasing Numbers')  
        self.show()

    def fn_okButton01_clicked(self):
        prefixEditText = str(self.prefixEdit.text())
        digitEditText = str(self.digitEdit.text())
        iterationsEditText = str(self.iterationsEdit.text())

        nutext = prefixEditText + ' ' + digitEditText + ' ' + iterationsEditText 
        print 'Line 89: nutext = ' + str(nutext)
        original_clip = self.reviewEdit.toPlainText() # PySide.QtGui.QLineEdit.text(),  http://srinikom.github.com/pyside-docs/PySide/QtGui/QLineEdit.html

        txt2paste2clipbd = fn_duplicate_code_with_increments(texte=str(original_clip), no_of_copies=str(iterationsEditText), string_b4_digits=str(prefixEditText), digits=str(digitEditText))

        self.reviewEdit.setPlainText(txt2paste2clipbd)

        setWinClipText(txt2paste2clipbd)

        #self.deleteLater()
        #event.accept() #http://www.qtcentre.org/threads/20895-PyQt4-Want-to-connect-a-window-s-close-button
        #self.destroy()

def formm():
    app = QApplication(sys.argv)
    form = Form()
    form.show()
    app.exec_()

def fn_getText(): 
    # get text from clipboard
    win32clipboard.OpenClipboard()
    text = win32clipboard.GetClipboardData(win32clipboard.CF_TEXT)
    win32clipboard.CloseClipboard()
    return text

def setWinClipText(aString):
    # Send text to clipboard
    import win32clipboard
    win32clipboard.OpenClipboard()
    win32clipboard.EmptyClipboard()
    win32clipboard.SetClipboardText(aString)
    win32clipboard.CloseClipboard()

def fn_duplicate_code_with_increments(texte, no_of_copies, string_b4_digits, digits):
    """
    to do: combine args 2 and 3, and use re module to determine with chars are the digits to increment
    """
    import re
    import string
    i = 0
    tempclipDup = texte[:]
    temp_instance = ''
    accumulator = ''
    while i <= int(no_of_copies) - 1:
        i +=1
        orig_str = string_b4_digits + str(digits)
        replact_st = string_b4_digits + str(i)
        temp_instance = tempclipDup.replace(orig_str, replact_st)
        if len(accumulator) > 2:
            accumulator = accumulator + '\n' + temp_instance
        else:
            accumulator = temp_instance

    return accumulator

if 1 == 1:
    import os
    import sys
    import subprocess
    import win32clipboard
    import win32con

    fn_operation_log = ''
    arg_sent_2this_script = ''
    alternative = 1
    if alternative == 1:
        formm()
    elif alternative == 2:
        txt2paste2clipbd = fn_duplicate_code_with_increments(texte=fn_getText(), no_of_copies=3, string_b4_digits='hbox', digits=1)
        setWinClipText(txt2paste2clipbd) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T19:41:27.483

对于 QTextEdit ，该属性称为[plainText](http://qt-project.org/doc/qt-4.8/qtextedit.html#plainText-prop)。

（与具有 text 属性的单行 QLineEdit 相反）

# c++ - 如何在 C++ 中将类放在一起？

> ID：15010757
> 
> 赞同：-1
> 
> 时间：2013-02-21T19:37:19.973
> 
> 标签：c++, class, object, struct, orientation

我的任务是编写一个代表骑士的类（名称，等级，xp），他最多可以有10个项目（它必须是另一个类）（item_name，value）

所以，我想做这样的事情，但是有了课程，我怎么能做到呢？

```
struct item
{
    char itemName[21];
    int value;
};

struct knight
{
   char name[21];
   int xp;
   int level;
   struct item cucc[10];
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:38:12.180

> 如何在 C++ 中将类放在一起？

好吧，只要嵌套它们，如果这就是你的意思：

```
struct knight
{
    struct item
    {
        char itemName[21];
        int value;
    };

    char name[21];
    int xp;
    int level;
    item cucc[10]; // Notice, that the struct keyword isn't necessary here
}; 
```

**更新：（**在更好地考虑了您*实际*要问的问题之后）

> 所以，我想做这样的事情，但是有了课程，我怎么能做到呢？

首先，`struct`s 是 C++ 中的类。但是您的意思可能是*“我如何将这些数据封装到类中并在它们之间建立定向关联？”*

在这种情况下，我会选择这样的东西：

```
class item
{
public:
    // The constructor to set an item's name and value
    item(std::string name, int value);
    // Supposing your item's names and values don't change,
    // so only getters on the class's interface
    std::string get_name() const;
    int get_value() const;
private:
    // Member variables are private (encapsulated).
    std::string itemName;
    int value;
};

// Skipping member function definitions. You should provide them.

class knight
{
public:
    // The constructor to set a knight's name
    knight(std::string name);
    // Supposing the name is unchangeable, only getters on the interface
    std::string get_name() const;
    // ...
    // What goes here very much depends on the logic of your application
    // ...
private:
    std::string name;
    int xp;
    int level;
    std::vector<item> cucc; // If you need reference semantics, consider
                            // std::vector<std::shared_ptr<item>> instead
};

// Skipping member function definitions. You should provide them. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:42:16.117

> 所以，我想做这样的事情，但是有了课程，我怎么能做到呢？

你已经有了。关键字在 C++中`struct`定义了一个类，就像`class`关键字一样；唯一的区别是，对于使用`struct`.

另外，请注意，在`item`类的定义之后，`struct item`和`item`命名完全相同的类型；C++ 没有 C 所具有的类型和结构标记之间的分离。

有关详细信息，请参阅 C++11 标准的第 9 节（或免费提供的[n3337 最终工作草案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf)）。特别是，**9.1 类名称**以：

> 类定义引入了一种新类型。*[例子：*

```
struct X { int a; }; 
```

它继续解释这个声明将类名引入范围，`struct X`根据是否`X`在范围内等阐明其本身的含义。

`struct`和之间的区别`class`稍后在**11 成员访问控制**和**11.2 基类和基类成员的可**访问性中讨论：

> 默认情况下，使用关键字 class 定义的类的成员是私有的。默认情况下，使用关键字 struct 或 union 定义的类的成员是公共的。

…</p>

> 在基类没有*访问说明符*的情况下，当派生类使用 class-key 定义时假定为 public，而当使用class *-* *key* `struct`定义类时假定为 private 。 *`class`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T19:42:09.220

类和结构（我在语义上使用这些术语，而不是在语法上——见下文）可以任意嵌套：

```
#include <string>
#include <array>

struct Knight {
  struct Item {
    std::string name;
    int value;
  };

  std::string name;
  int xp;
  int level;
  std::array<Item,10> cucc; // us an `std::vector` if the size is *not* fixed  
}; 
```

关于类：在语法上，结构和类之间几乎没有区别，但是*应该*区分您想要的对象是什么。如果它只是数据的聚合，它在概念上是一个结构，这应该通过使用`struct`关键字来表示。如果是智能数据结构，通过成员函数管理自己的私有成员，从概念上讲就是一个类，所以一般用`class`关键字声明。

但是，在语法上`class`，`struct`仅更改成员和父类型的默认可见性（`class`隐式`private`、`struct`隐式`public`）。*

# boolean - 将 4 个 NAND 门简化为 1 个 XOR 门布尔代数？

> ID：15010758
> 
> 赞同：3
> 
> 时间：2013-02-21T19:37:28.390
> 
> 标签：boolean, xor, boolean-logic

我试图用布尔代数来理解使用 4 个 NAND 门如何等同于 1 个 XOR 门。

如果我们从维基百科看这张图片[http://en.wikipedia.org/wiki/XOR_gate#Alternatives](http://en.wikipedia.org/wiki/XOR_gate#Alternatives)

有门的示意图。

这是我想出的表达原理图的大表达式。也许这是错误的，这可能是我的问题？但是我仍然看不到如何将方程转换为我期望的 XOR 表达式。

我有：`!X!Y + X(!X!Y) + Y(!X!Y) + XY(!X!Y)`

我知道 XOR 逻辑如下所示 `X!Y + !XY`：

谁能解决我的困惑？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T19:56:05.647

你在维基百科上对示意图的翻译有点不对劲。我把它翻译成

```
!(!(A!(AB))!(B!(AB))) 
```

请注意 !(XY) 和 !X!Y 是不同的，并且原理图没有任何或门（因此没有`+`运算符）。从那里我们可以使用各种布尔逻辑进行简化：

```
(!(!(A!(AB))) + !(!(B!(AB))))
(A!(AB) + B!(AB))
(A(!A + !B) + B(!A + !B))
(A!B + B!A) 
```

# java - AspectJ 在复杂层次结构上声明父级

> ID：15010759
> 
> 赞同：0
> 
> 时间：2013-02-21T19:37:32.103
> 
> 标签：java, parent, aspectj, declare

在 AspectJ 中可以使用**声明**语句修改类层次结构：

```
declare parents : TypePattern extends Type; 
```

来自[http://eclipse.org/aspectj/doc/released/adk15notebook/annotations-decp.html](http://eclipse.org/aspectj/doc/released/adk15notebook/annotations-decp.html)

基本上它允许您在层次结构中“插入”一个类，在这里我插入 X 类：

```
 1\. Child extends Parent                   -->   Child extends X extends Parent 
 2\. Child extends SomeClass extends Parent -->   Child extends X extends SomeClass extends X extends Parent 
```

但是，我正在寻找一种表示法，可以让我将第二种情况解决为：

```
 2\. Child extends SomeClass extends Parent  -->   Child extends SomeClass extends X extends Parent 
```

我的问题是我有 Child 扩展 X 和 SomeClass 扩展 X。你知道 AspectJ 符号可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:29:44.093

这不起作用吗？

```
declare parents : Child extends SomeClass;
declare parents : SomeClass extends X;
declare parents : X extends Parent; 
```

我想我不确定你的目标是什么。

# android - 如何检查游标是否为空？

> ID：15010761
> 
> 赞同：25
> 
> 时间：2013-02-21T19:37:42.517
> 
> 标签：android, android-contacts, android-cursor

当我试图从电话的联系人列表中获取电话号码时。问题是，当我在手机中的联系人列表为空时运行该应用程序时，该应用程序已停止。我检查了它，这是因为光标是空的。

如何查看光标是否为空或手机的联系人列表中是否有联系人？

```
ArrayList<String> lstPhoneNumber = new ArrayList<String>();
Cursor phones = getContentResolver().query(
        ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,null,null, null); 
lstPhoneNumber = new ArrayList<String>();

phones.moveToFirst();
// The problematic Line:
lstPhoneNumber.add(phones.getString(phones.getColumnIndex(
        ContactsContract.CommonDataKinds.Phone.NUMBER))); 
while (phones.moveToNext()) {
    lstPhoneNumber.add(phones.getString(phones.getColumnIndex(
            ContactsContract.CommonDataKinds.Phone.NUMBER))); 
}
phones.close(); 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-02-21T20:19:16.590

测试“有效”游标的一般模式是

```
((cursor != null) && (cursor.getCount() > 0)) 
```

Contacts Provider 不会返回 null，但如果其他内容提供者遇到某种数据错误，他们可能会这样做。内容提供者*应该*处理异常，将光标设置为零，并记录异常，但不能保证。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-21T19:40:34.527

使用`cursor.getCount() == 0`. 如果为真，则光标为空

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-21T19:50:43.230

我添加了一个投影，所以你只得到你需要的列。

```
String[] projection = new String[] { ContactsContract.CommonDataKinds.Phone.NUMBER };
ArrayList<String> lstPhoneNumber = new ArrayList<String>();
Cursor phones = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
        projection, null, null, null);
if (phones == null)
    return; // can't do anything with a null cursor.
try {
    while (phones.moveToNext()) {
        lstPhoneNumber.add(phones.getString(0));
    }
} finally {
    phones.close();
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-21T19:40:45.337

试试这个。您的代码的问题是无论光标的长度如何，它都会执行 add 。我将phones.moveToFirst() 包含在if 语句中，因为如果光标为空或没有记录集，它将返回false。

```
 if(phones.moveToFirst()){
       do{
          lstPhoneNumber.add(phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER))); 
        }while(phones.moveToNext())
   } else {
        //do something else
   } 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-12-01T15:02:29.673

```
public boolean isCursorEmpty(Cursor cursor){
   return !cursor.moveToFirst() || cursor.getCount() == 0;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-07-24T17:25:42.880

```
System.out.println("count "+ cursor.getCount()); 
```

这将显示光标的值`logcat`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-03-05T22:29:59.703

```
cursor.moveToFirst();
if (cursor.isBeforeFirst()) //means empty result set
        ; //do your stuff when cursor is empty 
```

`isBeforeFirst()`经过一个`moveToFirst()`作品也很好。

根据[游标文档](http://developer.android.com/reference/android/database/Cursor.html)：

> isBeforeFirst()：返回光标是否指向第一行之前的位置。

# mysql - 如何从 MySQL 中的字段中仅选择第一个不同的匹配项？

> ID：15010763
> 
> 赞同：3
> 
> 时间：2013-02-21T19:37:44.490
> 
> 标签：mysql, sql, group-by, distinct

如何只返回 MySQL 中字段的第一个不同匹配项？

我的表：

```
name     hash
----------------
Anna     ABC
Barb     DEF
Charlie  GHI
Anna     JKL
Andrea   MNO 
```

我的查询（对于`%An%`）：

```
SELECT DISTINCT(name) as name, hash FROM my_table WHERE name LIKE '%An%'; 
```

这将返回：

```
name     hash
----------------
Anna     ABC
Anna     JKL
Andrea   MNO 
```

而不是：（*我追求的结果）*

```
name     hash
----------------
Anna     ABC
Andrea   MNO 
```

我怎样才能只获得每个不同名称的第一个匹配项？

我想返回第一个`Anna`，跳过第二个（以及任何后续匹配），但仍然得到`Andrea`（以及任何其他不同的匹配，如`Andrew`or `Anthony`）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T19:43:40.920

`DISTINCT`不能那样工作，返回的所有列的值必须是不同的。

您始终可以在函数上使用聚合函数，该`hash`函数`GROUP BY name`将为每个返回一个`hash`值`name`：

```
SELECT name, min(hash) hash
FROM my_table 
WHERE name LIKE '%An%' 
GROUP BY name; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/4e3c3/8)。

*注意：*将聚合函数与 结合使用`GROUP BY`将确保您始终返回`hash`列的预期值。如果您不这样做`GROUP BY`或聚合`SELECT`列表中的项目，您可能会返回意外的结果。（参见[MySQL 扩展`GROUP BY`](https://dev.mysql.com/doc/refman/8.0/en/group-by-handling.html)）

来自 MySQL 文档：

> MySQL 扩展了 GROUP BY 的使用，以便选择列表可以引用未在 GROUP BY 子句中命名的非聚合列。...您可以使用此功能通过避免不必要的列排序和分组来获得更好的性能。但是，这主要在每个未在 GROUP BY 中命名的非聚合列中的所有值对于每个组都相同时很有用。服务器可以从每个组中自由选择任何值，因此除非它们相同，否则选择的值是不确定的。此外，从每个组中选择值不会受到添加 ORDER BY 子句的影响。在选择了值之后对结果集进行排序，并且 ORDER BY 不会影响服务器选择的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-21T16:41:29.813

使用`GROUP BY,`MySQL 时，在同一查询级别上销毁 desc 顺序。

代替：

```
SELECT name, hash 
FROM my_table
GROUP BY name
ORDER BY name ASC, hash DESC 
```

按降序使用子查询：

```
SELECT * FROM(
  SELECT name, hash
  FROM my_table
  ORDER BY name ASC, hash DESC
)Q 
GROUP BY name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T19:46:20.237

尝试这个

```
SELECT name , hash FROM my_table WHERE name LIKE '%An%'
GROUP BY name; 
```

[**在这里演示 SQLFIDDLE**](http://www.sqlfiddle.com/#!2/4e3c3/12)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T19:40:56.520

```
SELECT 
  name, hash 
FROM 
  my_table 
WHERE 
  name LIKE '%An%' 
GROUP BY 
  name; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T19:44:43.430

`DISTINCT`提供唯一的数据行。在您的示例中，哈希是不同的，因此为什么您没有得到您想要的结果。

**问题：**哈希是用来做什么的？你需要它是独一无二的，还是不需要它？

如果您不需要它，请将其从`SELECT`子句中删除，您将拥有唯一的名称。

如果您需要它，但它不需要是唯一的，您可以添加一个`GROUP BY`子句，即`GROUP BY name`按名称对您的结果进行分组（只给您唯一的名称）。注意，using`GROUP BY`表示当 name 为 'Anna' 时，hash 的值可以是 'ABC' 或 'JKL'。

# java - Android“返回”按钮

> ID：15010764
> 
> 赞同：2
> 
> 时间：2013-02-21T19:37:49.090
> 
> 标签：java, android, back-button

我是苹果 iPhone 用户。我从来没有拥有过任何类型的安卓，所以我习惯了我必须点击屏幕才能返回屏幕的按钮，而不是安卓拥有的物理“后退按钮”。iPhone 开发人员必须为用户操作游戏编写返回按钮，但 Android 开发人员不一定必须编写返回按钮，只需依靠手机上的物理按钮即可。

我的问题是我是否可以不为我的 Android 应用程序编写一个按钮而只让用户使用他们手机上的硬件后退按钮？如果没有可点击的后退按钮，Android 用户会本能地知道点击物理后退按钮以跳回屏幕吗？我真的不知道这个答案，因为我从来没有拥有过 Android 并且总是依赖于按钮编码的 iPhone。

下图是我在后退按钮中编码，而不是依赖手机上的物理按钮。我想从我的代码中退出后退按钮。

![在此处输入图像描述](../Images/1b5f5ee6d811260b897146e9f7acb43a.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-21T19:40:42.417

您不应该在您的应用程序上编写后退按钮。有关android 应用程序外观和感觉的更多信息，请参阅此处的纯 android[指南。](http://developer.android.com/design/patterns/pure-android.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T19:40:34.880

每个 Android 设备都包含返回按钮。自从第一个版本的 android 发布以来，Android 用户使用返回按钮。他们都有关于后退按钮的想法，无需单独实现，用户已经习惯了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T19:50:17.560

我已经为 iOS 和 Android 开发了，并找到了同时使用两者的最佳答案。Android 用户知道使用硬件后退按钮，但新用户或以前的 iPhone 用户通常期望屏幕上的按钮。两者兼有并没有什么坏处，而且屏幕上的按钮可能是一种很好的视觉触感。

您可能决定不使用后退按钮的情况包括较小屏幕的布局 - 当屏幕空间非常宝贵时。请记住，应用程序最重要的部分是用户体验。

关键是要让你的应用对所有用户都友好——但不要剥夺专门 Android 用户的预期体验（例如，如果你正在开发一个带有多个 popup`View`的单 Activity 应用，那么理想的性能后退按钮将关闭视图，而不是关闭整个应用程序）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T19:56:01.037

此外，如果您想在活动的右上角有一个返回按钮，还有一种方法可以在操作栏上添加一个。如果需要，请查看[Android 开发者](http://developer.android.com/guide/topics/ui/actionbar.html)页面。

# jquery - 无法在可见溢出内容上使用悬停

> ID：15010766
> 
> 赞同：1
> 
> 时间：2013-02-21T19:37:54.910
> 
> 标签：jquery, css, hover, overflow, jquery-hover

不幸的是，我发现自己试图解决一个不能完全满足我需求的布局。也就是说，完全改变它目前不是一种选择。

也就是说，我基本上有一些溢出内容，我设置了溢出：可见，还有一个空白：nowrap。这基本上就像一个列跨度。

这是一个 [Js Fiddle](http://jsfiddle.net/D639t/1/)

由于 SO 需要它，这里有一些示例代码。

的HTML：

```
<div class='container'>
<div class='third'>one</div>
<div class='third'>two</div>
<div class='third'>three</div>
</div>
<div class='container'>
<div class='third overflow'>this is some really long <a> hover </a></div>
<div class='third'>&nbsp;</div>
<div class='third'>has to align w/ three</div>
</div> 
```

的CSS：

```
div {float:left;}
div.third {width: 33%;}
div.container {width: 400px;overflow:hidden;}
div.overflow { overflow:visible; white-space:nowrap;}
a {color: green;font-weight:bold;}
a:hover {color: red; } 
```

js：

```
$(document).ready(function () {

$('div.overflow a').bind('mouseenter', function() {
    alert('mouse enter');
});

$('div.overflow a').bind('hover', function() {
    alert('hover');
});
/* just to prove it is wired up */
$('div.overflow a').trigger('hover');}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:46:57.570

第**一个**问题不是溢出，而是下面的`.third`元素在它上面并且它*吸收*了鼠标事件。

要解决此添加和`position:relative`元素。`z-index:999``div.overflow a`

第二**个**问题是这`hover`不是一个事件。它是`mouseenter`和`mouseleave`事件的捷径。

所以你需要按以下方式使用它（*注意它会在进入和离开时触发*）

```
$('div.overflow a').hover(function() {
    alert('hover');
}); 
```

**[在http://jsfiddle.net/D639t/3/](http://jsfiddle.net/D639t/3/)**演示**（*使用`console.log`代替`alert`*）**

# ruby-on-rails - 如何重写它以使用指南针功能？

> ID：15010774
> 
> 赞同：0
> 
> 时间：2013-02-21T19:38:25.187
> 
> 标签：ruby-on-rails, css, compass-sass

谁能帮我用指南针功能重写它？

```
-webkit-transition: opacity .15s ease, -webkit-transform .15s ease
-moz-transition: opacity .15s ease, -moz-transform .15s ease
-o-transition: opacity .15s ease, -o-transform .15s ease 
```

我不知道如何处理 -*-transform 参数。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T00:28:05.967

目前 Compass 中没有任何帮助程序，但您可以在 github 上提出问题，我们将对其进行调查。同时，很多情况可以通过使用'all'来解决：

```
@include transition(all .15s ease); 
```

# android - 替换 Android 上的 HTTP 请求

> ID：15010775
> 
> 赞同：0
> 
> 时间：2013-02-21T19:38:31.290
> 
> 标签：android

我需要修改第 3 方遗留库发出的 HTTP 请求。

在 iOS 上，我们有一个 NSURLProtocol 允许我们控制 HTTP 请求。在 Android 上，有什么办法可以解决问题吗？

更新：
我有兴趣修改的请求是浏览器对 Web 视图的请求。
我需要完成的是两件事。
1.添加headers
2.避免跨域请求限制问题。因此，我不想请求像[http://something.com/myResource.doc](http://something.com/myResource.doc)这样的资源，而是想提供该文件的本地副本（嵌入在 apk 中）。

# javascript - ExtJs 4 - 在窗口调整大小时调整表单项的大小

> ID：15010776
> 
> 赞同：0
> 
> 时间：2013-02-21T19:38:41.253
> 
> 标签：javascript, layout, extjs, hbox

我正在使用 ExtJs 4.0.7，但我遇到了一个问题。当我调整包含它（或它们）的窗口大小时，我想调整表单（面板）中元素的大小。我知道，当您没有列并且正在使用`anchor`布局时，这很简单。到目前为止，我的代码如下所示：

```
initComponent: function ()
    {
        var me = this;

        me.terminalImage = Ext.create('Ext.Img', {
            src: 'http://www.sencha.com/img/20110215-feat-html5.png',
            width: 50,
            margin: '0 10 0 0'
        });

        me.nameField = Ext.create('Ext.form.Text', {
            xtype: 'textfield',
            name: 'defname',
            fieldLabel: 'myFLabel',
            allowBlank: false,
            listeners: {

            }
        });
        me.terminalTypeCmb = Ext.create('Ext.form.field.ComboBox', {
            fieldLabel: me.getTrans('lblTerminalType.Text', 'Type'),
            parentRecord: me.parentRecord,
            store: 'myStore',
            queryMode: 'local',
            name: 'typename',
            width: 300,
            valueField: 'deftype',
            displayField: 'typename',
            listeners: {

            }
        });

        me.form = Ext.create('Ext.form.Panel', {
            xtype: 'form',
            autoScroll: true,
            defaultType: 'textfield',
            defaults: { layout: 'anchor', flex: 1},
            padding: '10',
            items: [{
                xtype: 'container',
                layout: 'hbox',
                items: [
                    me.terminalImage,
                    {
                        items: [me.nameField, me.terminalTypeCmb]
                    }
                ]
            }
            ]
        });

        Ext.apply(this,
        {
            defaults: {
        },
        defaultType: 'textfield',
        items: [me.form]
       });

        if (me.parentRecord)
        {
            me.form.loadRecord(me.parentRecord);
        }
        this.callParent(arguments);
    } 
```

我想得到这样的东西：

```
 My Image      |   My TextField (resizable width on window resize)
 (fixed size)  |   My ComboBox (I know it is not resizable)
               | 
```

现在，我的文本字段在窗口调整大小时保持恒定宽度。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:43:15.710

你快到了:)

只需删除默认 flex : `defaults: { layout: 'anchor', flex: 1},`// 不确定是否需要布局。

并`flex:1` **仅**添加到 TextField。
将其他项目固定为，将使 TextField 占用所有剩余空间。

# .net - 检查可用页面文件大小

> ID：15010778
> 
> 赞同：0
> 
> 时间：2013-02-21T19:38:51.023
> 
> 标签：.net, memory, memory-management, paging

我的页面大小设置为 10 gb，我想使用 .net api 来确定可用页面大小是否小于 25%（即 2.5 gb），在这种情况下我想终止进程。

有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:05:26.127

你想看看`System.Diagnostics.Process.PagedMemorySize64`，这个属性会告诉你你的进程正在使用多少分页内存。如果您有一个硬上限，只需计算您当前的使用量与该上限并在必要时终止该过程。

# jquery - 使用 JQuery 切换 div

> ID：15010780
> 
> 赞同：2
> 
> 时间：2013-02-21T19:38:59.757
> 
> 标签：jquery, html, css

我是 JQuery 的新手，我在让我的代码正常工作时遇到了一些麻烦。出于某种原因，我的 JQuery 隐藏了链接 (a) 元素。我需要链接来切换“包装”div。我可能做错了什么？

查询：

```
$(document).ready(function() {
   $('.wrap').hide();
   $('.open').toggle(
      function() {
     ('.wrap').show();
  },
  function() {
     ('.wrap').hide();
      }
   ); // end toggle
}); // end ready 
```

[JSFIDDLE](http://jsfiddle.net/AbXYp/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T19:41:47.487

[http://jsfiddle.net/AbXYp/4/](http://jsfiddle.net/AbXYp/4/)

```
$('.wrap').hide();
$('.open').click(function() {
    $('.wrap').toggle();
    return false;
}); 
```

因此，在每个“通知”链接上单击您正在切换`.wrap`

您的代码问题的真正根源：`.toggle()`事件处理程序已在 jquery 1.9 中删除 - **http://api.jquery.com/toggle-event/** [，](http://api.jquery.com/toggle-event/)因此您在代码示例中使用的是动画方法[http： //api.jquery.com/toggle/](http://api.jquery.com/toggle/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:45:20.433

只需将您的 jquery 替换为

```
$(document).ready(function() {
 $('.wrap').hide();
    $('.open').click(function(e){e.preventDefault();$('.wrap').toggle();return false;}); // end toggle
}); // end ready 
```

它应该工作

# javascript - CSS跨越列高到窗口高度？

> ID：15010781
> 
> 赞同：0
> 
> 时间：2013-02-21T19:39:03.927
> 
> 标签：javascript, css, twitter-bootstrap

我想让左右列跨越到窗口高度，并给用户一个滚动条来独立滚动两列。我怎样才能做到这一点？

我一直在尝试`min-height: 100%`，`height: 100%`但无论我在哪里使用它似乎都不起作用。

我在这里设置了一个 JSFiddle：http: [//jsfiddle.net/Legend/t5cUA/1/](http://jsfiddle.net/Legend/t5cUA/1/)

**编辑**：我不想添加`position: fixed`。如果用户减小浏览器窗口的宽度，我仍然希望列对齐。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:17:35.320

如果您想独立滚动左右列的内容，您必须添加

```
overflow: auto; 
```

到它的CSS。另外，请注意，可以将 100% 高度设置为相对或绝对块的子级，或具有定义高度的块的子级。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T20:18:17.717

您需要确保所有以前的包装器都设置为`height: 100%`and `overflow: hidden`。像[这样的小提琴节目](http://jsfiddle.net/t5cUA/8/)（可能需要一些调整，具体取决于你想要什么）：

```
html, body, .container-fluid, .container-fluid > .row-fluid {
    height: 100%;
    overflow: hidden;
}

.span-fixed-sidebar {
    height: 100%;
    overflow: auto;
} 
```

## 澄清更新

您只需要更深入地继续该过程。关键是您需要在要滚动的实际列元素上设置滚动，并将其他所有内容显式设置为包裹该列的`height: 100%`和。[可能这适合你](http://jsfiddle.net/t5cUA/12/)：`overflow: hidden`

```
html, body, .container-fluid, .container-fluid > .row-fluid, .span-fixed-sidebar {
    height: 100%;
    overflow: hidden;
}

.span-fixed-sidebar > div {
    height: 100%;
    overflow-x: hidden;
    overflow-y: auto;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T20:06:26.943

我不确定我是否理解这个问题，但如果你想跨越到窗口高度并在列高于窗口时滚动：

```
.column {
  overflow: auto /* scroll */;
  height: 100%;
} 
```

编辑：是的，`overflow: auto`如果您不想在列不够高的情况下显示滚动条，这将是一个更好的选择。

# javascript - 是否需要使用 var foo = new RegExp？

> ID：15010783
> 
> 赞同：1
> 
> 时间：2013-02-21T19:39:13.113
> 
> 标签：javascript, regex

在研究 javascript 中正则表达式的使用时，可以遇到两种类型的示例：

A：

```
var regex = /^[a-zA-Z0-9]+$/; 
```

乙：

```
var regex = new RegExp ("^[a-zA-Z0-9]*$"); 
```

**有必要使用`var foo = new RegExp`吗？或者，什么时候应该选择每种方法？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T19:41:28.133

当`RegExp()`您必须在运行时动态组装正则表达式时，构造函数很有用。如果表达式是完全静态的，则使用本机正则表达式语法（您的“A”）更容易。本机语法的易用性源于您不必担心引用反斜杠这一事实，就像您在正则表达式开始作为字符串常量时所做的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:42:27.643

> 有必要使用`var foo = new RegExp`吗？

不，显然不是。另一个也有效。

> 或者，什么时候应该选择每种方法？

[正则表达式文字](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)更易于阅读和编写，因为您不需要对正则表达式转义字符进行字符串转义 - 您可以只使用它们（反斜杠、引号）。此外，它们仅在脚本“编译”期间被解析一次 - 每次评估该行时都不需要执行任何操作。

仅当您想动态构建正则表达式时才需要使用[`RegExp`构造函数。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T19:50:38.410

这是您可能需要的“动态”正则表达式示例`new RegExp`。

```
var search = 'dog',
    re = new RegExp('.*' + search + '.*'); 
```

如果它是静态正则表达式，那么文字语法（您的 A 选项）会更好，因为它更易于编写和阅读。

# php - MySQL 查询行，3 个最高值？

> ID：15010784
> 
> 赞同：0
> 
> 时间：2013-02-21T19:39:13.180
> 
> 标签：php, mysql

我正在创建一个博客，我决定按 ID 对我的博客进行排序，这是因为我想在主页上显示 3 并在博客中显示所有这些。无论如何，这不是我的问题，我需要有关我的 MySQL 查询的帮助。

例如，我在数据库中有以下 ID：1 2 3 4 5 6 7 8 9 10。

我只想显示 3，最新的 3 是 8，然后是 9，然后是 10。我不知道如何查询这个我可以请我的 MySQL 查询行吗？

我知道这是一个愚蠢的问题，我已经找到了我的意思的例子，但它是在谈论将 2 个数字加在一起？我只需要按顺序排列的一个数字。

总之，谢谢各位！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:40:39.230

您可以按 ID 降序排序。这会将具有最高 ID 的帖子放在结果集的开头。然后，您可以使用`LIMIT`仅返回 3 个结果（即最新的 3 个）。

```
SELECT `post_id` FROM `tblName` ORDER BY `post_id` DESC LIMIT 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:46:23.217

尝试这个：

```
SELECT * 
FROM [TableName] 
ORDER BY ID DESC
LIMIT 3 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-21T19:40:46.367

```
SELECT * FROM table  WHERE true ORDER BY id DESC LIMIT 3 
```

# javascript - 将 Javascript 日期解析为 java.utils.date.Date

> ID：15010786
> 
> 赞同：0
> 
> 时间：2013-02-21T19:39:19.853
> 
> 标签：javascript, android, node.js, date

我有一个服务提供日期，我需要在 mi Android App 中处理这个

在我的节点服务器中：

```
server.send({'date': new Date() }); 
```

在我的安卓应用中：

```
Date date = new Date(jsonObject.getString('date')); 
```

这给我一个`java.lang.IllegalArgumentException`错误

如果在 android 日志中打印，我将了解`2013-02-21T17:55:27.885Z`如何处理这种格式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:58:03.407

长期`Date`使用

```
date.getTime() 
```

让你的电话看起来像这样：

```
server.send({'date': new Date().getTime() }); 
```

和

```
Date date = new Date(jsonObject.getString('date')); 
```

# javascript - 本地存储方法

> ID：15010788
> 
> 赞同：0
> 
> 时间：2013-02-21T19:39:24.250
> 
> 标签：javascript, local-storage

```
function Todo(id, task, who, dueDate) {
    this.id = id;
    this.task = task;
    this.who = who;
    this.dueDate = dueDate;
    this.done = false;
}    

function updateDone(e) { 
      var spanClicked = e.target;
      var id = spanClicked.parentElement.id;
      var done = spanClicked.parentElement.done;
      spanClicked.innerHTML = "&nbsp;&#10004;&nbsp;";
      spanClicked.setAttribute("class", "done");

      var key = "todos" + done;
      localStorage.setItem(key, "true");
      console.log(key);
    } 
```

在最后一个函数的第二部分中，当为 localStorage 单击目标对象时，我试图将 done 属性的值更改为“true”。相反，当我在 Web 控制台中检查 localStorage 时，该对象的值没有改变，而是将另一个对象添加到名为“todosundefined:'true'”的 localStorage 中。我不明白为什么当我单击一个对象时，某些东西会作为一个单独的未定义对象添加到 localStorage，而不是更改我单击的对象的值。有什么建议可以修改它，以便我更改我为 localStorage 单击的对象的完成值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:06:02.177

正如上面评论中提到的，DOM 对象没有`done`属性。我不完全确定您要做什么，但是为了获取 DOM 对象的 class 属性的内容，您应该使用该`className`属性。例如：

```
var done = spanClicked.parentElement.className; 
```

再说一次，根据您发布的代码，这似乎没有任何意义。我假设您想使用本地存储来跟踪待办事项列表中的哪些项目已完成。在这种情况下，存储所有已完成项目的 id 数组不是更好吗（或相反）？您不能将数组直接存储在本地存储中，但您可以使用例如 JSON.stringify() 来获取可以存储的数组的字符串表示形式。

# hadoop - 我可以使用 Sqoop 将数据导入为 RCFile 格式吗？

> ID：15010794
> 
> 赞同：1
> 
> 时间：2013-02-21T19:40:02.770
> 
> 标签：hadoop, format, hdfs, sqoop

根据[http://sqoop.apache.org/docs/1.4.0-incubating/SqoopUserGuide.html#id1764646](http://sqoop.apache.org/docs/1.4.0-incubating/SqoopUserGuide.html#id1764646)

> 您可以导入以下两种文件格式之一的数据：分隔文本或 SequenceFiles。

但是 RCFile 呢？

是否可以使用 Sqoop 以 RCFile 格式将数据从 Oracle DB 导入 HDFS？

如果是，该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T02:12:19.450

Sqoop 目前不支持 RC 文件。有一个 jira [SQOOP-640](https://issues.apache.org/jira/browse/SQOOP-640)可以添加此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-04T13:22:29.320

```
Step 1: Create a ORC formatted table (base) in Hive.
    CREATE TABLE IF NOT EXISTS  tablename (hivecolumns)   STORED AS RCFILE

 Step 2 : Sqoop import to this RC table using HCatalog tool.  
     SQOOP IMPORT 
    --connect sourcedburl
    --username XXXX
    --password XXXX
     --table source_table
     --hcatalog-database hivedb
    --hcatalog-table tablename 
```

[ HCatalog 的表抽象为用户提供了 Hadoop 分布式文件系统 (HDFS) 中数据的关系视图，并确保用户无需担心他们的数据存储在何处或以何种格式 - RCFile 格式、文本文件、SequenceFiles 或 ORC 文件.]

# python - Python绘图线链接值似乎从最后一个点回到第一个点

> ID：15010795
> 
> 赞同：2
> 
> 时间：2013-02-21T19:40:06.937
> 
> 标签：python, plot

我遇到了一个 python 绘图问题。看起来我绘制的线从最后一个值点回到第一个值点，所以这条线是封闭的，没有两个开口端。很难描述，我在这里上传了一张图片： ![圆形图](../Images/de9af8b6cd5d347f778115f63cfc75f3.png)

这是相关代码：

```
plt.plot(newx, newy0Normalized, color='red', linewidth=2, marker='1');
plt.plot(newx, newy1Normalized, color='green', linewidth=2, marker='2'); 
```

其中 newx 是 50-200 范围内的整数，newy0Normalized 是相应的百分比

newx 和 newy0Normalized 的生成方式有点长。我在这里打印数据，以便您了解数据（和结构）的样子：

```
for i in range(len(newx)):
    print "%d\t%.2f" % (newx[i], newy0Normalized[i])
100 7.69
101 14.81
102 9.09
103 8.33
more data here
135 40.00
136 60.00
137 50.00
139 0.00
66  100.00
67  0.00
68  0.00
69  0.00
more data here
97  11.54
98  14.81
99  11.11 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:51:41.970

这就是 matplotlib 线图的工作原理：它从列表中的第一个数据点开始，然后画一条线到列表中的下一个数据点，依此类推，直到到达列表中的最后一个点。不过，这不是一个闭环。请注意图表中间 x = 99 和 x = 100 之间的中断。在您的情况下，您的数据从 x = 139 跳转到列表中间的 x = 66，因此 matplotlib 将相应地从该点绘制一条线从 x = 139 到 x = 66。

如果您不希望发生这种情况，只需在绘制数据点之前按其 x 坐标对数据点进行排序。或者，您可以使用`','`or`'.'`格式说明符将它们绘制为没有连接线的点。（基于科学的理由，在大多数情况下，我会建议后者，但哪个是正确的当然取决于您对数据的解释。）

# php - php cURL 库和 REST POST 请求出现问题

> ID：15010796
> 
> 赞同：0
> 
> 时间：2013-02-21T19:40:07.557
> 
> 标签：php, rest, post, curl

在我发布的 API 发布了他们的 API 的最终版本之后，我遇到了 REST POST 请求的问题。它工作正常，并且有人告诉我，在新版本中，服务器对“应用程序/json”的类型更加严格。以下 cli curl 命令可以正常工作：

```
cat json.txt|curl -v -k -u user:password -F 'exchangeInstance=@-;type=application/json'  https://my.url.here 
```

但是，我需要在代码中执行它。使用 php curl 库，我得到了一个简单的测试脚本，如下所示：

```
 $post = array(
    "exchangeInstance" => $json_string,
    "type" => "application/json",
  );
  $url = 'myurlhere';

  $ch = curl_init();
  curl_setopt($ch, CURLOPT_URL, $url);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
  curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
  curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
  curl_setopt($ch, CURLOPT_USERPWD, "user:pass");
  curl_setopt($ch, CURLOPT_POST, true);
  curl_setopt($ch, CURLOPT_POSTFIELDS, $post);

  $result = curl_exec($ch);
  $info = curl_getinfo($ch);

  var_dump($post);
  var_dump($result);
  echo $result;
  var_dump($info); 
```

当我阅读文档时，如果我将数组作为 CURLOPT_POSTFIELDS 传递，标题中的 Content-type 应自动设置为“multipart/form”，然后我将元素传递的类型设置为“application/json”数组。

但是，该 api 没有收到我的 POST 请求。我从他们那里得到一个错误，清楚地表明他们正在接收一个 GET 请求。这怎么可能？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:48:21.970

卷曲`-F`！==`-d`

```
$post = array(
    "exchangeInstance" => sprintf('@%s;type=application/json', $json_string),   
); 
```

# php - PHP - header() 重定向：Firebug 记录 404 - 为什么？

> ID：15010800
> 
> 赞同：1
> 
> 时间：2013-02-21T19:40:24.440
> 
> 标签：php, redirect, header, http-headers, firebug

我在我的一个项目中使用 PHP 重定向。我这样做：

```
header( 'Location: http://domain.net/?cig=warn&onum=' . $onum . '&cnum=' . $cnum . '&c=' . $c . '#Form' ); 
```

所以你看，这是PHP`header()`函数的正常使用，其中一些变量包含在URL中。
它正在工作，但使用 Firebug 测试页面时，我在控制台中收到此错误：

```
"NetworkError: 404 Not Found - http://domain.net/?cig=warn&onum=12&cnum=73&c=ui#Form" 
```

我这样做的方式实际上是否有问题，或者这只是 Firebug 因为所有参数和锚点而变得挑剔？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:21:05.207

由于此页面位于 WordPress 环境中，因此您必须在发送标头之前手动设置 200 状态代码（使用 WordPress [status_header()](http://codex.wordpress.org/Function_Reference/status_header)函数）：

```
<?php
// This must appear before any output is sent!
status_header(200);
?> 
```

显然，您必须引入 WordPress 功能才能做到这一点。问题是 WordPress 在您的页面有机会处理它之前拦截了请求。它无法找到“页面”并设置 404 响应代码，最终将其发送回。

过去，当我不得不引入 WordPress 功能时，我通过在页面上包含以下两行来做到这一点：

```
define('WP_USE_THEMES', false);
require_once("/path/to/my/site/wp-blog-header.php"); 
```

现在，也就是说，我过去使用的页面与我的 WordPress 安装中的页面具有相同的外观和感觉。可能有更好的方法来单独引入函数；您必须查阅 WordPress 文档才能找到（我不知道是否有）。[对于WordPress StackExchange 站点](https://wordpress.stackexchange.com/)来说，如何正确地做到这一点可能是一个很好的问题。

# python - 删除大文件中的空列

> ID：15010801
> 
> 赞同：4
> 
> 时间：2013-02-21T19:40:25.927
> 
> 标签：python, linux, sed, awk, pandas

什么是删除文件中空列的最快方法。下面给出了一个示例文件。

我使用了 python 'pandas' 包，但是加载我的 2 GB 文件需要太多时间（大约 10 分钟后我没有得到答案，所以退出，因为我必须对许多文件执行此操作）。

```
df = read_table(inFileName, sep="\t")
df = df.dropna(axis=1,how='all') #remove columns

aaa bbb ccc ddd eee
1   a       c   
2   s       d   
3   d           
    f       d   
4   g       d   
5   h       e 
```

我事先不知道哪些字段是空的。我正在使用 0.9.1 版本的“熊猫”

> > > pkg_resources.get_distribution("pandas").version '0.9.1'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T21:03:41.657

好吧，我猜你发现你根本不想删除那些列。但这里是你如何做到这一点`gawk`。

```
awk -F "\t" 'ARGIND==1{
    for(i=1;i<=NF;i++)n[i]+=$i!=""
}ARGIND==2{
    if(!ok){for(i in n)if(!n[i])delete n[i];asorti(n);ok=1}
    for(i in n)printf("%s\t",$n[i]);printf("\n")
}' input.txt{,} > output.txt 
```

这通过对文件进行两次传递来工作。第一个计算每列中的条目数，而第二个只打印至少有一次命中的列。对于您的示例文件（假设制表符分隔的列，并删除 aaa bbb 等标题，我得到了结果

```
1   a   c   
2   s   d   
3   d       
    f   d   
4   g   d   
5   h   e 
```

但是糟糕，2 GB 的文本文件。你没有更合适的二进制格式来存储它吗？

# actionscript-3 - 这是游戏循环的一个很好的实现吗

> ID：15010803
> 
> 赞同：2
> 
> 时间：2013-02-21T19:40:34.323
> 
> 标签：actionscript-3, game-loop, starling-framework

我已经在 Flash/Actionscript/Starling 中实现了一个游戏循环，我想把它扔给你看看这是否是一个有效的实现。我想有一个可变的时间步长方法。

```
private var _deltaTime:Number = 0;
private var _lastTime:Number = 0;
private var _speed = 1000 / 40;

private function onEnterFrame() {
    var now = new Date().getTime();
    var delta = now - _lastTime;
    _deltaTime += delta - _speed;
    _lastTime = now;

    //skip if frame rate to fast
    if (_deltaTime <= -_speed) {
        _deltaTime += _speed;
        return;
    }
    update();
}

private function update() {
    updateGameState();

    if (_deltaTime >= _speed) {
        _deltaTime -= _speed;
        update();
    }
} 
```

到目前为止我得到的是我有一个恒定的速度（或多或少）。

我的问题是有没有更好的方法让动作看起来更流畅。

让我真正感到惊讶的是，即使你的 FPS 几乎是恒定的（60FPS），运动有时也比简单的游戏循环更颠簸但更流畅。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T19:50:27.923

你在正确的轨道上 - 假设 onEnterFrame 是由 Event.ENTER_FRAME 以某种方式触发的 - 而不是跳过更新，而是在每一帧上调用它，但传递经过的时间：

```
private function onEnterFrame() {
    var now = new Date().getTime();
    var delta = now - _lastTime;
    _lastTime = now;
    updateGameState(delta/1000);//divide by 1000 to give time in seconds
} 
```

在 updateGameState 中，您可以利用 'delta' 来计算移动等，例如：

```
function updateGameState(timeElapsed:Number):void {
    myAlien.x += myAlienSpeedPerSecond*timeElapsed;
} 
```

这样，即使帧速率发生变化，您也可以获得流畅的移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T15:24:52.437

从 Starling 介绍页面中，它显示经过的时间已内置到 EnterFrameEvent 类中。

```
// the corresponding event listener
private function onEnterFrame(event:EnterFrameEvent):void
{
    trace("Time passed since last frame: " + event.passedTime);
    enemy.moveBy(event.passedTime * enemy.velocity);
} 
```

[http://wiki.starling-framework.org/manual/animation#enterframeevent](http://wiki.starling-framework.org/manual/animation#enterframeevent)

# java - org.hibernate.engine.jdbc.spi.SqlExceptionHelper - 表权限不存在

> ID：15010813
> 
> 赞同：1
> 
> 时间：2013-02-21T19:40:48.583
> 
> 标签：java, hibernate

我有一个 Spring 3.1、Hibernate 4 和 Primefaces 应用程序。它在我的本地机器上运行良好，但是当我在我的网络主机上部署 ant 生成的 war 文件时，当我尝试登录时出现错误。

```
org.hibernate.engine.jdbc.spi.SqlExceptionHelper - Table 'brutteng_adaptiveonlinetesting.Authorities' doesn't exist 
```

我已经在我的网络主机上创建了具有权限表的数据库。我向网络主机支持团队提出了此事，但​​他们建议这是由于表的情况，但我对此表示怀疑，因为我没有在任何地方使用表名。它被 Hibernate 使用，在 Authorities 表名中带有大写的“A”。

期待帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:14:34.840

可能它们是正确的，并且表名在本地计算机上的数据库中不区分大小写，而在 Web 主机中则区分大小写。这可以解释为什么在您的本地设置中不会出现问题，而脚本中的大小写无关紧要。

将脚本中表名的第一个字符大写，并且可能在两者中都可以使用。

# c++ - 删除参考

> ID：15010820
> 
> 赞同：0
> 
> 时间：2013-02-21T19:41:25.447
> 
> 标签：c++, reference

我想知道如何取消引用。例如：我有

```
class Student {...}; 
```

然后我创建对象：

```
Student Caroline; 
```

后来我参考：

```
Student &princess = Caroline; 
```

从现在开始，我可以使用 Princess 或 Caroline 来查看我的对象，但我决定不再叫 Her Princess，我想删除这个引用：怎么做？我知道我不能更改引用，但有人告诉我不能调用它。提前谢谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:59:35.453

不可能（据我所知）。一旦引用指向一个对象，就不会改变它。

另一种方法是指针：

```
Student *princess = &Caroline;
princess->name = "Still Caroline";
princess = &Sarah;
princess->name = "Still Sarah"; 
```

# .net - 实体框架类可以有非实体框架成员吗？

> ID：15010822
> 
> 赞同：2
> 
> 时间：2013-02-21T19:41:27.210
> 
> 标签：.net, entity-framework

我在数据库中有我想要的某些属性，但我是否也可以在同一类的数据库中拥有我不想要的函数和成员？这是个坏主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:45:12.930

函数不存储在数据库中。您可以从数据库映射中排除成员（属性或类不会存储在数据库中）。您可以使用[NotMapped](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.schema.notmappedattribute.aspx)属性执行此操作：

```
[NotMapped]
public string Bar { get; set; } 
```

或在流利的映射中[忽略：](http://msdn.microsoft.com/en-us/library/gg671225%28v=vs.103%29.aspx)

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<Foo>().Ignore(f => f.Bar);
    base.OnModelCreating(modelBuilder);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:47:04.753

也许不是最干净的设计，但没有理由不向您的实体添加方法......

# perl - 在字符串中搜索递归模式

> ID：15010829
> 
> 赞同：2
> 
> 时间：2013-02-21T19:42:00.097
> 
> 标签：perl

使用 Perl，我想搜索一串核苷酸 (AGCT) 以查找不少于且不多于三个连续重复至少七次的核苷酸的模式。我还需要保存该组合以打印到文件以及总数。

这三个核苷酸的模式将是未知的，因为虽然只有 64 种可能的组合，但我们不知道哪一种是重复组合。

关于如何解决这个问题，我脑子里有两条思路：

创建一个可能组合的列表并检查它，同时产生一个计数。这似乎不可行，因为每三个核苷酸就会产生一个匹配。它仍然不能解决连续匹配的问题。

或 检查前三个核苷酸与接下来的三个，如果匹配，检查接下来的三个。如果不匹配，则将阅读框移至字符串中的第二个核苷酸并再次尝试搜索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T20:11:56.387

这个正则表达式应该可以解决问题：

```
/( ([ACGT]{3}) \2{6,} )/x 
```

匹配三个 ACGT 字符，然后再重复捕获`$2`至少六次。整个匹配的字符串在`$1`并且将具有实际组长度的三倍：`$n = length($1)/3`.

测试：

```
my $regex = qr/( ([ACGT]{3}) \2{6,} )/x;
"TACGACGACGACGACGACGACGACGT" =~ $regex;
printf "Matched %s exactly %d times\n", $2, length($1)/3; 
```

输出：

```
Matched ACG exactly 8 times 
```

看起来挺好的。

# php - 由父母获取所有孩子。递归。MySQL

> ID：15010835
> 
> 赞同：1
> 
> 时间：2013-02-21T19:42:19.823
> 
> 标签：php, mysql, pdo

我有一个查询，显示了孩子的所有父母。但我会以另一种方式来做，即为父母显示所有孩子。

这是我对显示所有父母的查询：

```
 SELECT T2.category_id ,T2.category_name
   FROM (
      SELECT
         @r AS _id,
         (SELECT @r := parent FROM categories WHERE category_id = _id) AS parent,
         @l := @l + 1 AS lvl
      FROM
          (SELECT @r := 1, @l := 0) vars,
          categories m
      WHERE @r <> 0) T1
      JOIN categories T2 ON T1._id = T2.category_id
      ORDER BY T1.lvl DESC 
```

我的数据库结构只有：category_id | 类别名称 | 父母

并且无法更改。

如何递归地显示父母的所有孩子？

# c# - 使用 OAuth1.0 为 Twitter 创建 RestRequest

> ID：15010839
> 
> 赞同：1
> 
> 时间：2013-02-21T19:42:33.460
> 
> 标签：c#, oauth, twitter, restsharp

我正在尝试创建一个有效的 RestRequest 以利用Twitter API 提供的[GET statuses/user_timeline.json 。](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline)

我有一个开发帐户和我的消费者密钥/秘密和 AccessToken/TokenSecret

```
_restClient.Timeout = 60000;
_restClient.BaseUrl = "http://api.twitter.com/1.1"

_restClient.Authenticator = OAuth1Authenticator.ForProtectedResource(cKey, cSecret, aT, aTSecret)

var request = new RestRequest("statuses/user_timeline.json?screen_name=default", Method.GET)

var response = _restClient.Execute(request) 
```

对于这个请求，我收到了回复

> {"errors":[{"message":"Could not authenticate you","code":32}]}

我怀疑我错过了一步，因为我发现许多资源首先会访问“api.twitter.com”的 BaseUrl 以进行 TokenRequest，但我已经有了我的令牌，所以我没有确定为什么需要这一步。

谢谢！

**解决方案：**

我已经通过使用 c# 包 TweetSharp 解决了这个问题

```
var service = new TwitterService(_twitterConfiguration.ConsumerKey, _twitterConfiguration.ConsumerSecret);
service.AuthenticateWith(_twitterConfiguration.AccessToken, _twitterConfiguration.AccessTokenSecret); 
```

以上是连接到 twitter-api-1.1 服务所需的一切（以及您是相关令牌）

# api - 如何使用 Sinatra + rspec 测试我的 JSON API

> ID：15010843
> 
> 赞同：8
> 
> 时间：2013-02-21T19:42:58.390
> 
> 标签：api, rspec, sinatra

我有一个接受 JSON 的 post 方法：

```
post '/channel/create' do
  content_type :json

  @data = JSON.parse(env['rack.input'].gets)

  if @data.nil? or !@data.has_key?('api_key')
    status 400
    body({ :error => "JSON corrupt" }.to_json)
  else
    status 200
    body({ :error => "Channel created" }.to_json)
  end 
```

作为 rspec 的新手，我很困惑试图弄清楚如何使用可接受的 JSON 有效负载针对该 POST 编写测试。我最接近的是这是非常不准确的，但我似乎并没有向谷歌上帝问正确的问题来帮助我。

```
 it "accepts create channel" do
    h = {'Content-Type' => 'application/json'}
    body = { :key => "abcdef" }.to_json
    post '/channel/create', body, h
    last_response.should be_ok
  end 
```

在 Sinatra 中测试 API 的任何最佳实践指南也将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-23T06:37:20.590

您使用的代码很好，尽管我不喜欢以`it`您通常看到的方式使用块的方式来构造它，但我认为它鼓励一次测试系统的多个方面：

```
let(:body) { { :key => "abcdef" }.to_json }
before do
  post '/channel/create', body, {'CONTENT_TYPE' => 'application/json'}
end
subject { last_response }
it { should be_ok } 
```

我使用[let](https://www.relishapp.com/rspec/rspec-core/v/2-12/docs/helper-methods/let-and-let)是因为它比`before`块中的实例变量更好（感谢您不这样做）。它`post`位于一个`before`块中，因为它实际上并不是规范的一部分，而是在您指定之前发生的副作用。这`subject`是响应，这是`it`一个简单的调用。

因为经常需要检查响应是否正常，所以我将其放在一个[共享示例](https://www.relishapp.com/rspec/rspec-core/v/2-12/docs/example-groups/shared-examples!)中：

```
shared_examples_for "Any route" do
  subject { last_response }
  it { should be_ok }
end 
```

然后这样称呼它：

```
describe "Creating a new channel" do
  let(:body) { { :key => "abcdef" }.to_json }
  before do
    post '/channel/create', body, {'CONTENT_TYPE' => 'application/json'}
  end
  it_should_behave_like "Any route"
  # now spec some other, more complicated stuff…
  subject { JSON.parse(last_response.body) }
  it { should == "" } 
```

而且因为内容类型经常变化，我把它放在一个助手中：

```
 module Helpers

    def env( *methods )
      methods.each_with_object({}) do |meth, obj|
        obj.merge! __send__(meth)
      end
    end

    def accepts_html
      {"HTTP_ACCEPT" => "text/html" }
    end

    def accepts_json 
      {"HTTP_ACCEPT" => "application/json" }
    end

    def via_xhr      
      {"HTTP_X_REQUESTED_WITH" => "XMLHttpRequest"}
    end 
```

通过 RSpec 配置将其添加到需要的地方很容易：

```
RSpec.configure do |config|
  config.include Helpers, :type => :request 
```

然后：

```
describe "Creating a new channel", :type => :request do
  let(:body) { { :key => "abcdef" }.to_json }
  before do
    post '/channel/create', body, env(:accepts_json)
  end 
```

说了这么多，就个人而言，我不会使用 JSON 发布。HTTP POST 处理起来很简单，每个表单和 javascript 库都可以轻松地完成它。无论如何都用 JSON 响应，但不要发布 JSON，HTTP 会容易得多。

* * *

编辑：写出`Helpers`上面的内容后，我意识到[它作为 gem 会更有帮助](https://github.com/yb66/rack-test-accepts)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T16:39:49.220

看起来这样做的能力`post :update, '{"some": "json"}'`已添加到 rspec 在此提交中使用的内部 ActionPack test_case.rb： [https ://github.com/rails/rails/commit/5b9708840f4cc1d5414c64be43c5fc6b51d4ecbf](https://github.com/rails/rails/commit/5b9708840f4cc1d5414c64be43c5fc6b51d4ecbf)

由于您使用的是 Sinatra，因此我不确定获得这些更改的最佳方式——您可能能够直接升级 ActionPack，或者从上述提交中进行补丁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-12T02:41:58.000

如果您想将 last_response 视为 JSON，您可以尝试[rack-test-json 这使得这变得微不足道](https://github.com/ioquatix/rack-test-json)：

```
expect(last_response).to be_json
expect(last_response.as_json['key']).to be == 'value' 
```

# jquery - 如何通过 jQuery click() 函数循环浏览 ICON 按钮上的系列

> ID：15010846
> 
> 赞同：0
> 
> 时间：2013-02-21T19:43:04.193
> 
> 标签：jquery, click

我有一个大约 20 行和 10 列的网格。

在每个单元格交叉点中，我希望能够单击已显示的 ICON 图像，并能够在每次单击时循环浏览一系列 3 个图形图像 ICON，而不必结束。换句话说，只要我点击，循环就可以继续。ICON 按钮的存在有 120 个实例。

这是我的 HTML 的片段：

```
<td class="rights"><img src="../images/button1.png" alt="First of 3 ICONS" class="button" /></td> 
```

相应的 CSS 对场景来说是微不足道的。

这是我的 jQuery 的一个片段：

```
// jQuery Functions
$(document).ready(function() {
    // Toggle ICONS
    $('img.button').click(function(){
        if ($(this).attr('src') == '../images/button1.png') $(this).closest('img.arcButton').attr('src', '../images/button2.png');
        else if ($(this).attr('src') == '../images/button2.png') $(this).closest('img.arcButton').attr('src', '../images/button3.png');
        else if ($(this).attr('src') == '../images/button3.png') $(this).closest('img.arcButton').attr('src', '../images/button1.png');
    }); // end Toggle ICONS
}) // end jQuery Functions 
```

我的图标是`button1.png`, `button2.png`, 和`button3.png`

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:16:17.747

这是我可以使用、测试并开始工作的 jQuery 解决方案。

```
 if ($(this).attr('src') == '../images/button1.png') $(this).closest('img.arcButton').attr('src', '../images/button2.png');
    else if ($(this).attr('src') == '../images/button2.png') $(this).closest('img.arcButton').attr('src', '../images/button3.png');
    else if ($(this).attr('src') == '../images/button3.png') $(this).closest('img.arcButton').attr('src', '../images/button1.png'); 
```

# sql - 如何使用查询在 vb.net 的不同表中查找字段

> ID：15010849
> 
> 赞同：0
> 
> 时间：2013-02-21T19:43:11.550
> 
> 标签：sql, vb.net

我有一个查询，我想使用下面的查询在所有表中搜索一个公共字段 ismy 代码----

```
 Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        Try
            'Dim da As OleDb.OleDbDataAdapter
            Dim dbprovider As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\Taher\Documents\Visual Studio 2010\Projects\WindowsApplication1\WindowsApplication1\Database1.accdb;Persist Security Info=False;"
            Me.con = New OleDb.OleDbConnection
            Dim sqlquery As String = "SELECT * FROM **mba mca mscit** WHERE urno='" & TextBox2.Text & "';"
            Dim command As New OleDb.OleDbCommand(sqlquery, con)
            Dim reader As OleDb.OleDbDataReader
            con.ConnectionString = dbprovider
            con.Open()

            reader = command.ExecuteReader()
            reader.Read()
            TextBox1.Text = reader(1).ToString
            TextBox2.Text = reader(2).ToString
            TextBox3.Text = reader(3).ToString
            TextBox4.Text = reader(4).ToString
            TextBox5.Text = reader(5).ToString
        Catch ex As Exception
            MsgBox("Not Found")
            con.Close()
        End Try 
```

我想在所有具有相同名称字段的表中搜索 urno....？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:48:39.443

假设表 mba、mca 和 mscit 具有相同的列，则

```
SELECT * FROM mba
WHERE urno=@urno
UNION
SELECT * FROM mca
WHERE urno=@urno
UNION
SELECT * FROM mscit
WHERE urno=@urno 
```

并为@urno 提供一个 SQL 参数 (qv)

# java - 如何在 Linux 上的 Java 中命名调用目录？

> ID：15010852
> 
> 赞同：1
> 
> 时间：2013-02-21T19:43:20.983
> 
> 标签：java, linux, file, directory, filepath

抱歉，如果这似乎是一个基本问题，但我似乎找不到任何答案。

我有一些在 Windows 上运行良好的 java 代码。在其中，我有一行说：

```
File dir = new File("F:\\some\\files\\here"); 
```

我在 Linux 上的远程服务器上运行此代码，但现在它给我带来了问题。因为我不知道驱动器名称是什么，所以我将行更改为以下内容（我认为这在 Linux 上不重要？）：

```
File dir = new File("\\some\\files\\here"); 
```

这条线没有错误，但后来，我打电话

```
File[] data = dir.listFiles(); 
```

在我的 Windows 代码上这工作正常，但在 Linux 上它返回一个空对象。我进一步研究了一下，似乎我的原始代码没有让我回到 Linux 中的目录。

```
dir.isDirectory() 
```

返回`false`Linux 代码。

有谁知道可能是什么问题？我也尝试过使用 / 而不是 \ 但同样的问题。

一些附加信息：

我可以访问 dir 方法的任何部分，除了 listFiles() 或 list()。我尝试过的一件事是做 dir.getParent().listFiles()[0]。getParent() 无论如何都应该给我一个目录，但是 listFiles() 调用再次给了我一个空对象，它还告诉我 getParent() 的结果是一个文件，而不是一个目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:49:39.220

您应该使用 File.separator。这是一个独立于平台的工具，因此在 Windows 或 Linux 中构建路径都不会出现任何问题

# asp.net-mvc - 具有多个存储库的良好 MVC 设计

> ID：15010855
> 
> 赞同：2
> 
> 时间：2013-02-21T19:43:38.377
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我开始怀疑我最初的设计决定，因为我到处都能找到关于 MVC 的教程，他们只是将访问层直接转储到 MVC 项目中。（这与我所学到的一切背道而驰）

![我的设计的UML图](../Images/fea630f1c7faffea18e491b8e7493c78.png)

*   **BarRepo**：处理对 API 的访问。
*   **FooRepo**：处理对我的数据库的访问（使用 EF）。
*   **FooBarHandler**：将来自两个 repos 的数据连接成对控制器有用的数据。
*   **控制器**：控制器，没什么特别的。

正如你在图片中看到的那样，我已经将每个部分拆分到自己的项目中，并尝试获得松散耦合。所以我不会将实体框架类发送出数据库层等等。但是，我遇到了一点泡菜。获取的数据量已经变得如此之大，以至于在前端很明显，所以我需要引入分页。所以我跟着[这个教程](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application)。我的“问题”是现在 MVC、Logic 和数据库项目都依赖于 PagedList，所以事情不再那么整洁和闪亮了。

所以我的问题是你会怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:52:59.130

您不需要使用 PagedList，因为您可以自己创建项目的分页列表。查看[这个 StackOverflow 问题](https://stackoverflow.com/questions/21184/how-do-i-use-linq-for-paging-a-generic-collection)，了解如何执行此操作的示例。

总结一下：

```
var pageNum = 3;
var pageSize = 20;

var pagedItems = data.Skip((pageNum - 1) * pageSize).Take(pageSize).ToList(); 
```

这样您就不会依赖 PagedList，这将有助于减少设计中的耦合。

# html - IE7 文本对齐：右不工作

> ID：15010859
> 
> 赞同：0
> 
> 时间：2013-02-21T19:43:53.197
> 
> 标签：html, css, internet-explorer, internet-explorer-7, text-align

我有一个 h3 和一个 h1 标签：

```
<div id="header">
    <div class="title">
        <img class="logo" src="images/logo.png" />
        <h3>Title1</h3>
        <h1><a href="#">Title2</a></h1>
    </div><!-- end .title -->
</div><!-- end #header -->

#header {
 background: transparent url(images/header_bg.png) top center no-repeat;
 margin: 30px auto 0;
 width: 960px;
 height: 240px;
}
#header .title { float: right }
#header h1,
#header h2,
#header h3 {
 text-align: right;
 border: none;
 padding: 0;
} 
```

在 IE7 中，h3 正确对齐，但 h1 没有。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:57:57.420

指定显式宽度`.title div`- 您应该使用 IE 开发人员工具（按 F12）来解决这类问题。

也看看[这个](https://stackoverflow.com/questions/9233683/how-to-deal-with-ie7-not-determining-the-width-of-floated-items-correctly)类似的问题

# java - Java StAX、XMLEvent、SPACE 作为字符返回

> ID：15010864
> 
> 赞同：0
> 
> 时间：2013-02-21T19:44:26.760
> 
> 标签：java, stax

根据文档，如果已解析可忽略的空白，则会返回 SPACE 事件。

我提供了一个 DTD，因此 StAX 解析器应该知道哪些空白是可忽略的。但是，我仍然收到 CHRACTERS 类型的 XMLEvent（其中`event.asCharacters().isIgnorableWhiteSoace()`返回 true）。

我的问题：如果不是这种情况，StAX 解析器何时返回 SPACE 类型的 XMLEvent？

# r - 如何在 R 中向量化这个循环

> ID：15010865
> 
> 赞同：0
> 
> 时间：2013-02-21T19:44:28.373
> 
> 标签：r, loops, for-loop, vectorization

我在 R 方面没有太多经验。我正在尝试编写一个 Gibbs 采样器，其中我有一个这样的 for 循环：

```
for (iNum in 1:totNum) {
    rateNum <- Y3[iNum]
    if(Y3[iNum] > 0) {
        yStar3[iNum] <- rtnorm(1, mean = Mean3[iNum], sd = sqrt(Var3), 
                 lower = gz[rateNum], upper = gz[rateNum + 1])
    } else if(Y3[iNum] == 0) {
    yStar3[iNum] <- rtnorm(1, mean = Mean3[iNum], sd = sqrt(Var3), 
                  lower = -Inf, upper = Inf);
    }
} 
```

这需要太多时间。我尝试使用`lapply`，但这也不够快。有没有办法向量化这个循环？

感谢你并致以真诚的问候！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:00:24.827

因此，迭代之间似乎没有依赖关系，这使得向量化变得非常简单

```
 lhs = rtnorm(length(Y3), mean = Mean3, sd = sqrt(Var3), lower = gz[Y3],
              upper = gz[Y3 + 1])
  rhs = rtnorm(length(Y3), mean=Mean3, sd = sqrt(Var3), lower=-Inf, upper=Inf)

  ifelse(Y3 > 0, lhs, rhs) 
```

这里的问题是 rtnorm 必须在其输入参数均值、下限和上限上进行矢量化。情况可能并非如此，在这种情况下，您将不得不做更多的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T20:02:28.223

最简单的方法是生成条件的两半并选择你想要的。该`mean`参数将采用向量均值，因此您会得到如下信息：

```
yStar3 <- ifelse(
  Y3 > 0,
    rtnorm(totNum, mean=Mean3, sd=sqrt(Var3), lower=gz[ratenum], upper=gz[rateNum+1]),
    rtnorm(totNum, mean=Mean3, sd=sqrt(Var3), lower=-Inf, upper=Inf)) 
```

`ifelse`对于 Y3 小于零的情况，您必须改进, 可能还有一个附加条件，但这是一般的想法。

更新：@hadley 建议在 rtnorm 中移动 ifelse：

```
yStar3 <- rtnorm(totNum, mean=Mean3, sd=sqrt(Var3),
  lower=ifelse(Y3>0,gz[rateNum], -Inf),
  upper=ifelse(Y3>0,gz[rateNum+1], Inf)) 
```

现在基本上零不必要的计算正在进行。

更新：当然，1 是错误的，正如评论者指出的那样；它应该是 totNum 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T20:25:46.543

如果您的变量没有一些值，这有点问题，但是您想要做的是相当直截了当的。为此，您要坚持使用所有矢量化语句，并尽量不要占用太多内存。这是基本策略：

**第 1 步**：弄清楚如何计算所有数字。

```
# The number of values you need from 'rtnorm'
sum(Y3 > 0)
sum(Y3 == 0)

# The means you need from the 'Mean3' array
Mean3[Y3 > 0]
Mean3[Y3 == 0]

# Lower and upper limits for Y3 > 0
gz[Y3[Y3 > 0]]
gz[Y3[Y3 > 0] + 1] 
```

**第 2 步**：在 yStar3 的矢量滤波器上使用这些值。如果没有一些示例数据和变量值，我不能绝对确定我的所有语法都是完美的，但它应该看起来像这样：

```
yStar3[Y3 > 0] <- rtnorm(
  sum(Y3 > 0), 
  mean = Mean3[Y3 > 0], 
  sd = sqrt(Var3), 
  lower = gz[Y3[Y3 > 0]], 
  upper = gz[Y3[Y3 > 0] + 1])

yStar3[Y3 == 0] <- rtnorm(
  sum(Y3 == 0), 
  mean = Mean3[Y3 == 0], 
  sd = sqrt(Var3), 
  lower = -Inf, 
  upper = Inf) 
```

# mysql - MySQL，选择一个 .ini 文件

> ID：15010867
> 
> 赞同：0
> 
> 时间：2013-02-21T19:44:37.943
> 
> 标签：mysql

我已经安装了 MySQL 服务器，并且在 MySQL 文件夹中我有多个配置 .ini 文件，例如：

*   **我的巨大.ini**
*   **我的innodb-heavy-4G.ini**
*   **我的大.ini**
*   **我的媒体.ini**
*   **我的小.ini**

我知道我应该有**1 个**我应该配置的 my.ini 文件，以便它适合我的服务器，我搜索了**my.ini**文件但没有找到它，所以我假设 MySQL 服务器配置为使用其中一种配置上面的文件，如果有人能告诉我配置文件在哪里，我可以编辑并选择我自己的**.ini**文件来使用，另外，如果有任何好的教程解释上面的每个**.ini**，谢谢大家，祝你愉快天。

# javascript - 用于菜单中应用样式幻灯片的 jQuery 函数

> ID：15010868
> 
> 赞同：0
> 
> 时间：2013-02-21T19:44:42.963
> 
> 标签：javascript, jquery

我的名字是亚当，我是 Stack Exchange 的新手，但我发现这个网站对我过去遇到的许多问题非常有用。

我在使用 jquery 函数时遇到问题，并想在这里寻求建议。我对 html 和 css 有相当的了解，对 php 有一点了解，但几乎没有 javascript 或 jquery。

我目前正在开发一个使用特定 html 标签来启用动态内容的网站，因为不允许使用 php。然而，Javascript 是所以我一直在寻找它。我没有现场示例来向您展示，因为我只能在我的帐户中预览设计，但是我已经粘贴了下面的脚本。

我想创建一个响应式设计，流向移动设备。遵循最近的设计趋势，我想从屏幕的一侧创建“滑入/滑出”风格的菜单（想想 Facebook Mobile、Dolphin Browser）。在查看了一些示例后，我编写了一个更改 CSS 的函数，将主 div#site 模板向右移动，显示左侧菜单。一切都很好，而且效果很好。

今天我决定最好有两个滑出菜单，一个在左边，另一个在右边。

我在函数中添加了我认为会起作用的东西，它确实起作用了。

我有一个按钮（带有 .open-sidebar-right 类）将主站点（div#site）向左滑动，显示右侧菜单。然后我可以单击相同的按钮或 div#site 来关闭菜单。

当我单击左侧按钮时会出现问题。左侧菜单绝对完美地打开和关闭，但是它使右侧按钮完全无用并且根本不起作用。

我尝试将其编写为两个单独的函数，对具有不同值的两个菜单使用一个变量，并且在使用左键后它总是使右键无用。

正如我之前提到的，我几乎不了解 Javascript 或 jQuery，所以它的代码可能很糟糕，但我不明白为什么这不起作用。

如果有人有任何意见或建议，我将不胜感激。

在此先感谢，亚当。

```
jQuery(function () {
var sidebarleft;
var sidebarright;

// ------------
// Left sidebar

jQuery(".open-sidebar-left").click(function () {
    if (!sidebarleft) {
        jQuery("#site").css({
            'left':'50%',
        });
        sidebarleft = true;
        return false;
    } else {
        jQuery("#site").css({
            'left':'0%',
        });
        sidebarleft = false;
        return false;
    }
});

// ------------
// Right sidebar

jQuery(".open-sidebar-right").click(function () {
    if (!sidebarright) {
        jQuery("#site").css({
            'right':'50%',
        });
        sidebarright = true;
        return false;
    } else {
        jQuery("#site").css({
           'right':'0%',
        });
        sidebarright = false;
        return false;
    }
});

// ----------------------------------
// Close sidebars by clicking on site

jQuery("#site").click(function () {
    if (sidebarleft) {
        jQuery("#site").css({
            'left':'0%',
        });
        sidebarleft = false;
        return false;
    } else if (sidebarright) {
        jQuery("#site").css({
            'right':'0%',
        });
        sidebarright = false;
        return false;
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:15:23.710

亚当，

@zgood 说你的代码很好，但我想我会指出一些错误并提出一些可以解决你问题的建议：

```
$(document).ready(function(){ // in the jQuery doc, they don't suggest you use $(<func>)
    var sidebarleft = false, // sidebarleft and sidebarright has to be equal to something
    sidebarright = false; // either true or false (I would use false since you're testing false in your conditional

    $(".open-sidebar-left").click(function() {
        if( !sidebarleft ) {
             $("#site").css({
                 left: '50%' // remove the comma, and do not put quotes around single-word identifiers
             });
             sidebarleft = true; 
             return false;
        } else {
           $("#site").css({
              left: '0'
           });
           sidebarleft = false;
           return false;
        }
    });

    $(".open-sidebar-right").click(function() {
        if( !sidebarright ) {
             $("#site").css({
                 right: '50%' // remove the comma, and do not put quotes around single-word identifiers
             });
             sidebarright = true; 
             return false;
        } else {
           $("#site").css({
              right: '0'
           });
           sidebarright = false;
           return false;
        }
    });
}); 
```

正如您在上面代码中的注释中看到的那样，

1.  jQuery 说它是有效的，但不建议你使用`jQuery(function(){});`所以查询`document`元素然后测试准备好，然后调用函数
2.  `sidebarright`并且`sidebarleft`是`undefined`（既不是真也不是假）所以你的 if 语句没有意义。
3.  在`css()`声明中，您不应该在最后一个元素上加逗号。仅当有多个元素时才使用逗号。

我还建议使用`animate()`而不是`css()`，并且（如果您使用 Chrome）使用检查器和（如果您使用 Firefox）使用 FireBug 来测试您的 javascript 代码中的任何错误。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:07:24.867

您的代码是正确的，问题似乎是 CSS 问题。

当您单击左键时，您的单击事件会向您的#site div 添加内联样式，如下所示：

```
<div id="site" style="left:50%;"> 
```

然后，当您单击右键时，您的代码会将新样式附加到您的#site div，如下所示：

```
<div id="site" style="left: 0%; right: 50%;"> 
```

看到问题了吗？

要解决此问题，您必须做两件事。由于您没有发布 CSS，我不知道您的样式是如何设置的，但请从您的样式声明`#site`中删除任何`left`或样式。`right``#site`

接下来更新您的 jQuery 代码以删除任何以前的内联样式，如下所示：

```
 // ------------
// Left sidebar

jQuery(".open-sidebar-left").click(function () {
    jQuery("#site").removeAttr('style');
    if (!sidebarleft) {
        jQuery("#site").css({
            'left':'50%',
        });
        sidebarleft = true;
        return false;
    } else {
        jQuery("#site").css({
            'left':'0%',
        });
        sidebarleft = false;
        return false;
    }
}); 
```

和

```
jQuery(".open-sidebar-right").click(function () {
    jQuery("#site").removeAttr('style');
    if (!sidebarright) {
        jQuery("#site").css({
            'right':'50%',
        });
        sidebarright = true;
        return false;
    } else {
        jQuery("#site").css({
           'right':'0%',
        });
        sidebarright = false;
        return false;
    }
}); 
```

`removeAttr`是你的朋友吗？此外，您可能想要使用动画而不是仅仅更改 css 值，但那是您的电话

[jQuery .animate()](http://api.jquery.com/animate/)

# android - TextView 小部件错误加载小部件

> ID：15010869
> 
> 赞同：0
> 
> 时间：2013-02-21T19:44:43.793
> 
> 标签：android, android-widget, textview, timertask

我的小部件在尝试使用它时给了我“问题加载小部件”，我不知道为什么。

这是我的代码：

班级

```
 public class DigitalClock extends AppWidgetProvider {

public void onUpdate(Context context,
        final AppWidgetManager appWidgetManager, int[] appWidgetIds) {
    final int N = appWidgetIds.length;

    final RemoteViews views = new RemoteViews(context.getPackageName(),
            R.layout.digitalclock);

    for (int i = 0; i < N; i++) {
        int appWidgetId = appWidgetIds[i];

        Intent clockIntent = new Intent(context, DeskClock.class);
        PendingIntent pendingIntent = PendingIntent.getActivity(context, 0,
                clockIntent, 0);

        views.setOnClickPendingIntent(R.id.gl, pendingIntent);

        Timer timer = new Timer();
        timer.scheduleAtFixedRate(new UpdateTimeTask(context,
                appWidgetManager), 1, 1000);

        appWidgetManager.updateAppWidget(appWidgetId, views);
    }
}

private class UpdateTimeTask extends TimerTask {
    RemoteViews views;
    AppWidgetManager appWidgetManager;
    ComponentName thisWidget;

    public UpdateTimeTask(Context context, AppWidgetManager appWidgetManager) {
        this.appWidgetManager = appWidgetManager;
        views = new RemoteViews(context.getPackageName(), R.id.gl);
        thisWidget = new ComponentName(context, DigitalClock.class);
    }

    @Override
    public void run() {
        java.util.Date noteTS = Calendar.getInstance().getTime();
        String time = "kk:mm";
        String date = "dd MMMMM yyyy";

        views.setTextViewText(R.id.tvTime, DateFormat.format(time, noteTS));

        views.setTextViewText(R.id.tvDate, DateFormat.format(date, noteTS));

        appWidgetManager.updateAppWidget(thisWidget, views);
    }

}

    } 
```

XML 布局

```
<?xml version="1.0" encoding="utf-8"?>
<GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<GridLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:orientation="vertical"
    android:id="@+id/gl"
    tools:ignore="UselessParent" >

    <TextView
        android:id="@+id/tvTime"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/time"
        android:textColor="#cccccc"
        android:textSize="80sp" />

    <TextView
        android:id="@+id/tvDate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal|bottom"
        android:text="@string/date"
        android:textColor="#cccccc"
        android:textSize="20sp" />
</GridLayout>

</GridLayout> 
```

显现

```
 <receiver
        android:name="com.timmo.clock.DigitalClock"
        android:label="@string/app_name_dc" >
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            <action android:name="com.timmo.clock.ACTION_WIDGET_RECEIVER" />
        </intent-filter>

        <meta-data
            android:name="android.appwidget.provider"
            android:resource="@xml/digitalclocksettings" />
    </receiver> 
```

我是不是哪里出错了？或者计时器方法是更新我的 TextView 的错误方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-13T09:32:52.483

一个应用程序有多个小部件。你的“thisWidget”是错误的。一个小部件由小部件 ID 定义，它由 Android 生成，您可以通过以下方式获得它：

```
 mAppWidgetId = AppWidgetManager.INVALID_APPWIDGET_ID; 
```

在配置小部件活动中或

```
ComponentName cn = new ComponentName(context,
                MoneyWidgetAccountDark.class);
        int[] appWidgets = appWidgetManager.getAppWidgetIds(cn);

        for (int appWidget : appWidgets) { 
```

在此处插入代码以更新您的文本视图！

# javascript - 如何编写正则表达式来检查某个特定数量的字符？

> ID：15010872
> 
> 赞同：0
> 
> 时间：2013-02-21T19:44:58.220
> 
> 标签：javascript, regex

我正在尝试测试状态代码的字符串，我拥有的正则表达式是

```
^A[LKSZRAEP]|C[AOT]|D[EC]|F[LM]|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEHINOPST]|N[CDEHJMVY]|O[HKR]|P[ARW]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY]$ 
```

问题是，如果我有像“CTA12”这样的测试字符串，它将得到 CT 的匹配。如何修改我的正则表达式以使其仅匹配不属于较大字符串的状态代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T19:48:31.243

您使用交替的锚点是不正确的，`^AB|DC$`意思是“以”开头`AB`或结尾的字符串`DC`。要使`^`and`$`都适用于交替的每个元素，您需要将交替放在一个组中，例如`^(AB|DC)$`。

尝试将您的正则表达式更改为以下内容：

```
^(A[LKSZRAEP]|C[AOT]|D[EC]|F[LM]|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEHINOPST]|N[CDEHJMVY]|O[HKR]|P[ARW]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$ 
```

使用组的替代方法是将`^`and`$`作为交替中每个元素的一部分，例如`^AB$|^DC$`，但这会使您的正则表达式显着更长，因此组是要走的路。

# .htaccess - htaccess https 关闭条件

> ID：15010874
> 
> 赞同：1
> 
> 时间：2013-02-21T19:45:01.700
> 
> 标签：.htaccess, codeigniter, codeigniter-2

我创造了以下条件：

```
DirectoryIndex index.php
RewriteEngine on

RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} !^/(shop|delivery-checkout|delivery-order|delivery-offer|confirm-sms-code|show-delivery-product|auto-search-product|add-product|update-product|remove-product|destroy-cart|get-cart|cuisine|og-shop) [NC]
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [R,L]

RewriteCond %{HTTPS} on 
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ https://www.%{HTTP_HOST}/ [R=301,L]

RewriteCond $1 !^(index\.php|robots\.txt|website|shop_files|shop_list|client|favicon\.ico|style\.css|sitemap.xml)
RewriteRule ^(.*)$ ./index.php?/$1 [L]

AddCharset utf-8 .js 
```

我基本上想做的是检查 URL 中是否不存在（https）。
因此，除了引用的 URL，将其重写为`https://www.`

**注意**：我正在 iframe 中加载这些 url：**domain.com/shop、domain.com/delivery-checkout、domain.com/delivery-order，**这就是为什么我希望那些被排除和安全的原因取决于父站点。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:49:05.927

用这个改变你的代码：

```
RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} !^/(shop|delivery-checkout|delivery-order) [NC]
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [R,L] 
```

# javascript - 如何从 MVC 控制器方法中的 HTTP Post 方法中提取数据？

> ID：15010876
> 
> 赞同：1
> 
> 时间：2013-02-21T19:45:17.767
> 
> 标签：javascript, spring-mvc

我试图为我们正在构建的网页实现一些客户端日志记录。这个想法是针对客户端的一些特定错误事件，当一些关键信息没有从服务器端返回时会发生（页面上的信息是从多个服务聚合的）。

在我的客户端 Javascript 上，我有：

```
$.ajax({
  url: 'MyURL',
  type: 'POST',
  data: 'MyErrorMessage',
}); 
```

在我的服务器端控制器上，我想要：

```
@RequestMapping(value = "MyURL", method = RequestMethod.POST)
protected ModelAndView logErrorMessages(String errorMessage)
{
     /* Log the error message using the server side logging framework */
} 
```

现在，我不确定如何访问控制器中的错误消息字符串。我尝试了上述方法，字符串为“空”。我考虑的另一种方法是将错误消息字符串作为 a 放入请求 URL `@RequestParam`，定义如下：[here](http://www.jpalace.org/docs/tutorials/spring/mvc_4.html)。但我对这样做有点不安，因为我觉得消息不应该真正成为 URL 参数的一部分。我确定我在这里遗漏了一些非常明显的东西（比如创建一个错误消息对象作为“模型”的一部分或类似的东西），但我的问题是我是 MVC 和 Web 开发世界的新手，还没有看过在模型/视图代码中，只有“控制器”代码。非常感谢任何能让我走上正轨的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:33:40.533

使用 @ModelAttribute 注释：

客户端

数据：“错误='系统错误'” ...

服务器端

logErrorMessage(@ModelAttribute(name="error") 字符串错误消息 ...

# jquery - 引导选项卡（Chrome 和 Firefox）

> ID：15010878
> 
> 赞同：0
> 
> 时间：2013-02-21T19:45:26.097
> 
> 标签：jquery, google-chrome, twitter-bootstrap, brightcove

我有 2 个使用 Bootstrap 选项卡的选项卡。每个选项卡都有一个带有 Brightcove Flash 播放器代码的对象标签。

**每次在 Firefox 中切换选项卡时，Flash 播放器的状态（如果视频已暂停）都会保持，而在 Chrome 中视频会重新加载。**

在每个选项卡单击时，我们都会显示相应的视频播放器。使用 templateLoadHandler 我们跟踪播放器加载了哪些选项卡，并且在每个选项卡切换上我们暂停其他选项卡上的视频。

这似乎在 Firefox 和 IE 上运行良好，但在 Chrome 上，我们看到每次选项卡处于活动状态（或使用淡入淡出聚焦）时 templateLoadHandler 都会触发。因此，每次切换选项卡都会在 Chrome 中触发 templateLoadHandler，而在 FF 和 IE 中则不会。

```
<script type="text/javascript" src="http://admin.brightcove.com/js/BrightcoveExperiences.js"></script>

<script type="text/javascript">
    var player;
    var modVP;
    var playerlist = new Array();

  function myTemplateLoaded(experienceID) {
        playerlist.push(experienceID);
        console.log(experienceID);
        player = brightcove.api.getExperience(experienceID);
        modVP = player.getModule(brightcove.api.modules.APIModules.VIDEO_PLAYER);
    }

</script>

<ul id="myTab" class="nav-tabs ">

      <li class="active">Tab 1</li>
      <li class="">Tab 2</li>
  </ul>

       <div id="myTabContent" class="tab-content">

<div id="tab1" class="tab-pane fade active in">
     <object class="BrightcoveExperience" id="myExperience0">
                            <param name="bgcolor" value="#FFFFFF">
                            <param name="width" value="700">
                            <param name="height" value="440">
                            <param name="playerID" value="XXXXXXXXX">
                            <param name="@videoPlayer" value="XXXXXXXXXXX">
                            <param name="isVid" value="true">
                            <param name="autoStart" value="false">
                            <param name="isUI" value="true">
                            <param name="dynamicStreaming" value="true">
                            <param name="wmode" value="Transparent">
                            <param name="templateLoadHandler" value="myTemplateLoaded">
                            <param name="includeAPI" value="true">
                            <param name="htmlFallback" value="false">
                        </object>

</div>

<div id="tab2" class="tab-pane fade">
      <object class="BrightcoveExperience" id="myExperience1">
                            <param name="bgcolor" value="#FFFFFF">
                            <param name="width" value="700">
                            <param name="height" value="440">
                            <param name="playerID" value="XXXXXXXXX">
                            <param name="@videoPlayer" value="XXXXXXXXXXX">
                            <param name="isVid" value="true">
                            <param name="autoStart" value="false">
                            <param name="isUI" value="true">
                            <param name="dynamicStreaming" value="true">
                            <param name="wmode" value="Transparent">
                            <param name="templateLoadHandler" value="myTemplateLoaded">
                            <param name="includeAPI" value="true">
                            <param name="htmlFallback" value="false">
                        </object>

</div>

</div> 
```

在上面的代码中：播放器列表数组在 Chrome 中不断增长，而在 Firefox 中修复了 2 个选项卡。

Chrome：每次加载视频播放器时，控制台输出为 myTemplateLoaded 都会触发。

```
myExperience0
myExperience1
myExperience0
myExperience1
myExperience0
myExperience1
..... every time tab is switched. Video player reloads. 
```

Firefox/IE9：控制台输出。myTemplateLoaded 只为每个玩家触发一次。

```
myExperience0
myExperience1 
```

... 只有一次。视频播放器的先前状态保持不变。

有人对此有任何想法吗？我不认为它的 Brightcove API 问题，而是与带有 Chrome 的引导选项卡或仅 Chrome 处理选项卡内的视频有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T08:59:09.253

Chrome 不会在隐藏元素中加载 swf，直到它们显示出来。它在隐藏时卸载 swf，并在再次显示时重新加载它们。一种绕过它的方法，`width:0;height:0;overflow:hidden`而不是`display:none`在隐藏选项卡时使用它。

# c++ - C++中的字符串和索引

> ID：15010881
> 
> 赞同：-1
> 
> 时间：2013-02-21T19:45:42.323
> 
> 标签：c++, string, indexing

我正在学习 C++ 并做一些在线挑战。但是，似乎大多数“正常”挑战我总是卡住。我不确定是我缺乏知识，还是只是想多了。无论如何，如果有人可以帮助我，我将不胜感激。

我正在尝试做这个挑战：例如，我的输入是一个数字“N”，之后我将不得不输入“N”个字符串。

然后我必须为每个字符串类型找到最少数量的前缀，并确保它们不重复。

例如，字符串“stackoverflow”有很多前缀：s,st,sta,stac,stack,stacko,stackov,stackove,stackover,stackoverf,stackoverfl,stackoverflo,stackoverflow。

这些都是stackoverflow的前缀。因此，如果我们有另一个字符串“standup”，我们必须输入 stackoverflow - stac，因为standup 中已经有 sta，所以standup 将是 stan。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:11:29.897

我能想到的最简单的版本；

*   按字母顺序对单词列表进行排序。将倒数第二个单词的副本附加到列表中。

*   对于列表中的每个单词，其唯一前缀是与列表中的下一个单词相比使其唯一的字母数。

一个例子，`stackoverflow`，`standup`，`seer`。

列表变为；

```
seer
stackoverflow
standup
stackoverflow

seer only requires `se` to be unique as compared to `stackoverflow`.
stackoverflow requires `stac` to be unique as compared to `standup`.
standup requires `stan` to be unique as compared to `stackoverflow`. 
```

完毕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:11:17.167

**创建一棵树：（**尝试？）

让这棵树中的每个节点最多有 26 个孩子，每个字母 (az) 一个。

从根到叶的路径表示一个字符串。

```
 root
          \
           s
           |
           t
           |
           a
           /\
          c n
         /  |
        k   d
        |   |
        o   u
         ... 
```

只需将所有项目添加到此树中即可。

然后，使用深度优先搜索处理树，每当您获得一个在其子树中只有 1 个叶子的节点（您可以跟踪这些计数）时，打印该字符串并递归。因此，在`c`和`n`将只有 1 片叶子，因此您将分别打印`stac`和`stan`。

我不会说上述方法特别适合更大的 C++ 程序员，但这里有一些代码应该可以工作：（请原谅下面的 C 和 C++ 的灾难性混合以及各种其他暴行，这只是一个超级快速-和肮脏的方法）

（[链接](http://ideone.com/WZu6Ui)）

```
#include <string>
#include <iostream>
using namespace std;

class Node
{
  public:
    int count;
    Node *(children[26]); // array of pointers
    Node() { count = 0; for (int i = 0; i < 26; i++) children[i] = NULL; };
};

void add(char *s, Node &n)
{
    if (*s == 0) // null-terminator
      return;
    if (n.children[*s-'a'] == NULL)
      n.children[*s-'a'] = new Node();
    n.count++;
    add(s+1, *n.children[*s-'a']);
}

void print(char *start, char *end, Node &n)
{
    if (n.count == 1)
    {
        *end = 0; // null-terminator
        cout << start << endl;
        return;
    }
    for (int i = 0; i < 26; i++)
    {
        if (n.children[i] != NULL)
        {
            *end = (char)(i+'a');
            print(start, end+1, *n.children[i]);
        }
    }
}

int main()
{
    char *s = "stackoverflow";
    Node root;
    add(s, root);
    s = "standup";
    add(s, root);
    char output[1000]; // big buffer
    print(output, output, root);
} 
```

# liferay-6 - 无法使用 Liferay 友好的 URL 映射器

> ID：15010883
> 
> 赞同：1
> 
> 时间：2013-02-21T19:45:56.243
> 
> 标签：liferay-6

我正在关注 Liferay 网站上的这份文档来工作 Map Firendly URL Mappings

[http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/adding-friendly-url-mapping-to-the-portlet](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/adding-friendly-url-mapping-to-the-portlet)

我正在使用 Liferay 版本=6.1.0

在超链接导航期间，我得到了以下网址

```
http://localhost:8080/web/guest/what-we-do?p_p_id=sai_WAR_Saiportlet&
p_p_lifecycle=0&p_p_state=normal&p_p_mode=view&p_p_col_id=column-1
&_sai_WAR_Saiportlet_jspPage=%2Fhtml%2Fsai%2Fedit.jsp 
```

要修改上述内容，我尝试使用 Friendly URL Mapper，并且我已经完成了以下方式

在 liferay-portlet.xml 文件中。

```
<portlet>
        <portlet-name>sai</portlet-name>
        <icon>/icon.png</icon>
         <friendly-url-mapper-class>com.liferay.portal.kernel.portlet.DefaultFriendlyURLMapper</friendly-url-mapper-class>
         <friendly-url-mapping>sai</friendly-url-mapping>
         <friendly-url-routes>com/test/sai-friendly-url-routes.xml</friendly-url-routes>
        <instanceable>false</instanceable>
        <header-portlet-css>/css/main.css</header-portlet-css>
        <footer-portlet-javascript>
            /js/main.js
        </footer-portlet-javascript>
        <css-class-wrapper>sai-portlet</css-class-wrapper>
    </portlet> 
```

在里面创建了一个名为 sai-friendly-url-routes.xml 的新文件

```
D:\liferay-plugins-sdk-6.1.0-SNAPSHOT\portlets\Sai-portlet\docroot\WEB-INF\src\com\test\sai-friendly-url-routes.xml 
```

sai-friendly-url-routes.xml 里面的内容是

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE routes PUBLIC "-//Liferay//DTD Friendly URL Routes 6.1.0//EN" "http://www.liferay.com/dtd/liferay-friendly-url-routes_6_1_0.dtd">

<routes>
   <route>
      <pattern>/{mvcPathName}</pattern>
      <generated-parameter name="mvcPath">/{mvcPathName}.jsp</generated-parameter>
   </route>
</routes> 
```

但我观察到网址没有变化

```
http://localhost:8080/web/guest/what-we-do?p_p_id=sai_WAR_Saiportlet&p_p_lifecycle=0&p_p_state=normal&p_p_mode=view&p_p_col_id=column-1&p_p_col_count=1&_sai_WAR_Saiportlet_jspPage=%2Fhtml%2Fsai%2Fedit.jsp 
```

请让我知道我到底在哪里做错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T16:09:30.923

您将值保留原样。也就是说，您将 {mvcPathName} 和“mvcPath”保持原样。

当生成友好 URL 时，它会从 URL 解析 mvcPath（即 edit.jsp 或 view.jsp），然后应用该模式，将 .../edit.jsp 替换为 .../edit。

此示例适用于编辑 JSP。它适用于视图页面；但不是在单击 Save ... 时，这是我可以研究的。但是，如果您去编辑然后单击返回链接，则会显示视图 JSP 的友好 URL。

我创建了一个票证来完成这个示例，以便在单击保存时它也会转到一个友好的 URL。当我们完成修复时，我将更新此部分。谢谢。

# powershell - 通过 powershell 修改 CSV 的每一行

> ID：15010889
> 
> 赞同：0
> 
> 时间：2013-02-21T19:46:23.290
> 
> 标签：powershell, powershell-3.0

我有一堆 CSV 文件，其中包含来自各种机器的文件数据。它包括诸如文件哈希之类的信息 - SHA1、MD5 等。

标头
*** *MD5、SHA-1、SHA-256* ***

示例数据 **ecfc9af8d1a6e16223e1b17ea732fa08 ,1db05a7a663a0de3b4913bf57f55e81d2b7e3663,bf74e48e2f14dcba257473fccec3e512c7283335610205e3b365cb16449e**

我的挑战是如何将 0x 附加到 CSV 文件中的每个 SHA-1 条目。我尝试了几件事，但似乎没有任何效果。我想克服的另一个小问题是，一旦我将数据重新导出回 CSV，数据就会在每个文件哈希中添加双引号。通常这不是问题，但在这种情况下，我想获取这些文件哈希并将它们从 SQL DB 中反弹出来。这就是为什么我需要为每个条目添加 0x 以使其与现有的哈希数据库兼容。

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:05:46.550

Import-Csv 将为您提供一些方法：

```
Import-Csv .\samplehash.csv -Header MD5,SHA1,SHA256 
```

产生这样的输出：

```
MD5                                                     SHA1                                                    SHA256                                                
---                                                     -----                                                   -------                                               
ecfc9af8d1a6e16223e1b17ea732fa08                        1db05a7a663a0de3b4913bf57f55e81d2b7e3663                bf74e48e2f14dcba257473fccec3e512c7283335610205e3b84...
ecfc9af8d1a6e16223e1b17ea732fa08                        1db05a7a663a0de3b4913bf57f55e81d2b7e3663                bf74e48e2f14dcba257473fccec3e512c7283335610205e3b84... 
```

现在将结果通过管道传输到 foreach (%) 以创建 SQL 字符串。

```
Import-Csv .\samplehash.csv -Header MD5,SHA1,SHA256 | 
%{ "insert into hashes(md5,sha1,sha256) values('0x{0}','0x{1}','0x{2}')" -f $_.MD5,$_.SHA1,$_.SHA256 } 
```

现在将这些字符串与 Invoke-SqlCmd 或类似（取决于数据库系统）一起使用来插入行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:46:58.083

使用 Import-CSV 导入您的 CSV：

```
$csv = Import-CSV import.csv; 
```

将 0x 附加到每个 SHA-1：

```
$csv | %{ $_.{SHA-1} += '0x' }; 
```

使用第一个数据行的属性名称创建标题行：

```
$header = @(,$csv[0].psobject.properties | %{,$_.name}); 
```

将条目转换为值数组而不是行对象：

```
$data = ($csv | %{,($_.psobject.properties | select -expand value)}); 
```

手动输出没有引用字段的基本 CSV：

```
( $header+$data | %{ $_ -join ',' }) -join "`r`n" | sc import.csv 
```

# sql - 使用 Oracle XE 10g 通过 sql developer 创建连接

> ID：15010891
> 
> 赞同：0
> 
> 时间：2013-02-21T19:46:26.993
> 
> 标签：sql, oracle

我安装了 Oracle XE 10g 并尝试创建与 SQL Developer 的连接。输入是： 连接名称：XE 用户名；SYS 密码：主机名：localhost 端口：1521 SID：XE

错误：侦听器拒绝连接并出现以下错误：ORA-12505 TNS：侦听器当前不知道连接描述符中给出的 SID。

请帮忙！！！！！！！！！！！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T07:20:57.327

内部注册表项提供 tnsnames.ora 的路径，即，创建一个名为“TNS_ADMIN”的键字符串并将值作为 tnsnames.ora 文件的路径。

# c# - 在 SSMS 中运行良好的 SQL 查询在 ASP.NET 中运行速度非常慢

> ID：15010892
> 
> 赞同：1
> 
> 时间：2013-02-21T19:46:30.683
> 
> 标签：c#, asp.net, .net, sql-server

我有一个 asp.net 页面，它加载一个我们知道从 SQL Server Management Studio 执行时可以正常运行的查询（在 1 到 2 秒内），但是当在 SQLCommand 中从 ASP.NET 执行时，查询需要更长的时间，我不能自问题开始以来，似乎弄清楚除了一行已添加到查询中之外发生了什么，但是我无法找到问题所在。

添加的有问题的代码行是第 6 行：`bi.INGR_CODE != 0`

SQL 语句

```
 SELECT  bh.JOB_NUMBER, j.DESCRIPTION, SUM(bi.INGR_ACTUAL) AS TOTAL
    FROM    BATCH_HEADER AS bh LEFT OUTER JOIN 
        BATCH_INGR AS bi
            ON bh.BATCH_ID = bi.BATCH_ID AND
            bh.FACTORY = bi.FACTORY AND
            bi.INGR_CODE <> 0 LEFT OUTER JOIN
    ServerNameReplaced.man_prod.dbo.JOBS AS j
        ON bh.JOB_NUMBER = j.JOB_NUMBER COLLATE database_default AND
           bh.FACTORY = j.FACTORY COLLATE database_default
    WHERE   ( bh.FACTORY = @Factory ) AND
            ( bh.DATETIME_DUMP >= @StartDate ) AND
            ( bh.DATETIME_DUMP < @EndDate )
    GROUP BY bh.JOB_NUMBER, j.DESCRIPTION
    ORDER BY bh.JOB_NUMBER 
```

ASP.NET 代码隐藏文件

```
//Temporary List
List<BatchItem> data = new List<BatchItem>();

string SQLCommand = DBHelper.LoadSQLStatement( "batchdescription.sql" );

System.Data.SqlClient.SqlConnection sqlConnection = new System.Data.SqlClient.SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionStringNameReplaced"].ConnectionString);
System.Data.SqlClient.SqlCommand sqlCommand = new System.Data.SqlClient.SqlCommand(SQLCommand, sqlConnection );

try
{
    sqlCommand.Parameters.Add( "@StartDate", System.Data.SqlDbType.DateTime ).Value = StartDate;
    sqlCommand.Parameters.Add( "@EndDate ", System.Data.SqlDbType.DateTime ).Value = EndDate;
    sqlCommand.Parameters.Add( "@Factory", System.Data.SqlDbType.VarChar, 2 ).Value = Factory;

    sqlConnection.Open();

    SqlDataReader DataReader = sqlCommand.ExecuteReader();

    while ( DataReader.Read() )
    {
        data.Add(
            new BatchItem()
            {
                JobNumber = DataReader[0].ToString(),
                Description = DataReader[1].ToString(),
                Total = decimal.Parse( DataReader[2].ToString() )
            } );
    }
}
catch ( Exception ex )
{
    //handle exceptions
}
finally
{
    sqlConnection.Close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T21:08:26.717

I've had to trouble shoot these before, and they're not fun, but in my experience what I've seen is different execution plans between ASP.NET & running the query in SSMS. ASP.NET doesn't cache the query, SSMS does, but sometimes the execution plan is actually different. The culprit often times is a bad index that is being accessed out of order, here's the guide I tend to use:

[http://www.sommarskog.se/query-plan-mysteries.html](http://www.sommarskog.se/query-plan-mysteries.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T20:58:21.453

有各种各样的事情可能会发生。

首先，Ivan G. 是正确的，SSMS 和您的 ASP.NET 客户端之间的连接参数和 SET 选项可能不同。如果您可以访问它，那是值得在 Profiler 中研究的东西。

其次，如果您在 SSMS 中连续多次运行查询，则可能会缓存结果，这就是它在 SSMS 中运行速度如此之快的原因。如果它在您第一次打开 SSMS 并尝试运行它时运行缓慢，但随后又加快了速度，则表明正在进行缓存。

至于为什么在连接中添加一个额外的子句会减慢速度，如果不了解更多有关您的表的信息，很难说为什么，但这样做并非不可能。是否有一个`BATCH_INGR`同时包含`FACTORY`和的索引`INGR_CODE`？您现在可能需要一个，因为您已将其包含`INGR_CODE`在您的加入条件中。

找出答案的最好方法是查看带有和不带有`INGR_CODE`子句的查询计划，看看它有什么不同。一个查询的成本数字是否大于另一个？有没有以前没有的表扫描？索引搜索是否变成了索引扫描？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T13:06:10.587

这是因为查询计划缓存不一样。

这是因为您的代码和 SSMS 没有使用相同的设置并且因为参数欺骗（即 Sql Server 根据第一次 sp 执行和您这次发送的参数创建计划缓存）=> 当您通过代码和通过 SSMS 执行时您没有相同的查询执行计划。

确保您使用相同的计划：工具 -> 查询执行 -> SQL Server -> 高级 -> 取消选中“SET ARITHABORT”

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-07-25T09:53:13.893

避免在您提到的 stroredprocedure 中调用另一个存储过程。这将解决您的问题

# java - 初学者的继承

> ID：15010901
> 
> 赞同：5
> 
> 时间：2013-02-21T19:46:50.833
> 
> 标签：java, inheritance

我刚开始学习java，所以现在我读到了继承这样的可能性，所以尝试创建必须创建对象的类-box。并使用继承为创建的对象实现新属性。我尝试将每个类放在单独的文件中，因此在创建类后，尝试在

```
public static void main(String[] args) 
```

所以类继承：

```
 public class Inheritance {
double width;
double height;
double depth;
Inheritance (Inheritance object){
    width = object.width;
    height = object.height;
    depth = object.depth;
}
Inheritance ( double w, double h, double d){
    width = w;
    height = h;
    depth = d;
}
Inheritance (){
    width = -1;
    height = -1;
    depth = -1;
}
Inheritance (double len){
    width=height=depth=len;
}
double volumeBox (){
    return width*height*depth;
}
class BoxWeight extends Inheritance {
    double weight;
    BoxWeight (double w, double h, double d, double m){
        super(w,h,d);
        weight = m;
    }
} 
```

但是，当我尝试在主类中使用 BoxWeight 时，在使用过程中出现错误

```
public class MainModule {
    public static void main(String[] args) {
    Inheritance.BoxWeight mybox1 = new Inheritance.BoxWeight(9, 9, 9, 9);
.... 
```

错误 - 没有可访问类型 Inheritance 的封闭实例。我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T19:50:42.210

就目前而言，`BoxWeight`需要一个实例`Inheritance`才能工作（就像访问非静态变量或函数需要一个实例一样，因此访问非静态内部类也可以）。如果您将其更改为`static`它会起作用，但这不是必需的。

`BoxWeight`不需要在`Inheritance`课堂内。

相反，`BoxWeight`从`Inheritance`班级中删除。

并更改`Inheritance.BoxWeight`为`BoxWeight`.

**编辑：**为了完整起见，你也可以做到：

```
Inheritance.BoxWeight mybox1 = new Inheritance().new BoxWeight(...); 
```

`Inheritance.BoxWeight`只是类型，所以上述不适用。但是要创建 的实例`BoxWeight`，您需要一个`Inheritance`对象，您可以使用`new Inheritance()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T19:48:43.803

改变

```
class BoxWeight extends Inheritance 
```

至

```
static class BoxWeight extends Inheritance 
```

这应该允许您的代码编译。但是，除了使用 java 的继承特性之外，您还使用了一个内部类，在这种情况下这并不是必需的，并且可能会让您感到困惑。如果你拉出`BoxWeight`它自己的文件，并在没有`Inheritance.`前缀的情况下引用它，我想你会发现事情更容易理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T20:10:09.037

```
Inheritance.BoxWeight mybox1 = new Inheritance().new BoxWeight(9, 9, 9, 9); 
```

您在这里使用了继承和内部类的原则。假设你的类`BoxWeight`没有扩展`Inheritance class`。您的内部类可以访问外部类的一些属性和方法，这些属性和方法是对象实例级别的属性。所以你应该创建`new Inheritance()`然后使用这个实例创建一个`BoxWeight`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T19:52:24.363

如果你想让你的类保持嵌套而不是静态的（我看不出有什么好的理由），你也可以使用：

```
Inheritance.BoxWeight mybox1 = new Inheritance().new BoxWeight(9, 9, 9, 9); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T19:51:47.160

忽略这样一个事实，即这是一个带有疯狂名称的完全任意的作业问题，在抽象类中扩展一个类是一种奇怪的情况，并且 a 在 a`BoxWeight`中是没有意义的`Inheritance`：

```
 ...
   Inheritance i = new Inheritance(0, 0, 0, 0);
   Inheritance.BoxWeight mybox1 = i.new BoxWeight(9, 9, 9, 9);
   ... 
```

`i`是“封闭对象”。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-21T19:50:31.567

问题出在这一行

```
Inheritance.BoxWeight mybox1 = new Inheritance.BoxWeight(9, 9, 9, 9); 
```

利用

```
BoxWeight mybox1 = new BoxWeight(9.0, 9.0, 9.0, 9.0); 
```

# twitter-bootstrap - 结合 input-append input-prepend 附加组件和 spanX 类

> ID：15010902
> 
> 赞同：0
> 
> 时间：2013-02-21T19:46:50.280
> 
> 标签：twitter-bootstrap

我正在做一个小项目，并决定使用 Twitter Bootstrap，因为我不太擅长设计！

好吧，当我尝试将它们与类组合以使它们具有相同的大小时，我遇到了`input-append`和元素的问题。`input-prepend``.spanX`

目前这里是问题

当我这样做时：

```
<div class="row-fluid">
    <div class="span12 input-append input-prepend">
        <span class="add-on">
            <i class="icon-user"></i>
        </span>
        <span class="span8 uneditable-input text-right">0</span>
        <span class="add-on">
            <i class="icon-tint"></i>
        </span>
    </div>
</div> 
```

一切都很好

如果我将 a 添加`spanX`到前置元素，它会完美运行。

```
<div class="row-fluid">
    <div class="span12 input-append input-prepend">
        <span class="span2 add-on">
            <i class="icon-user"></i>
        </span>
        <span class="span8 uneditable-input text-right">0</span>
        <span class="add-on">
            <i class="icon-tint"></i>
        </span>
    </div>
</div> 
```

但是，如果我尝试将一个`spanX`元素添加到附加元素，它就不再起作用并且布局被破坏

```
<div class="row-fluid">
    <div class="span12 input-append input-prepend">
        <span class="span2 add-on">
            <i class="icon-user"></i>
        </span>
        <span class="span8 uneditable-input text-right">0</span>
        <span class="span2 add-on">
            <i class="icon-tint"></i>
        </span>
    </div>
</div> 
```

那么有人已经有同样的问题了吗？我查看了该站点，但没有找到与此问题相关的任何内容。

我有时知道`span`代码中没有内联的元素会导致问题，但我没有遇到过这种情况，即使所有内容都是内联的，问题仍然存在。

谢谢阅读。欢迎任何帮助或建议=）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T21:21:20.913

所有`span*`类都带有`float:left;`声明 - 这就是导致您的问题的原因。您可能会更好地创建一个类并根据需要定义宽度。这样你就不会得到使用 span 类带来的麻烦浮动。

您的示例在此处更新：

[http://jsfiddle.net/dusthaines/77XEk/3/](http://jsfiddle.net/dusthaines/77XEk/3/)

# node.js - 在nodejs frappe中需要路径

> ID：15010904
> 
> 赞同：1
> 
> 时间：2013-02-21T19:46:54.650
> 
> 标签：node.js, coffeescript, frappe

![在此处输入图像描述](../Images/144db856ab45a77da4b3eb97fd33f886.png)所以我正在尝试使用 nodejs，并选择了 frappe 作为学习的骨架（因为我已经在前端使用了 coffeescript 等等等等）。无论如何，我才刚刚开始，遇到了一个问题，所以很笨，我在谷歌上找不到答案。上图应该说明一切。

我的 /config/globals 路径有什么问题？我努力了：

```
 ./config/globals
  /config/globals
  globals 
```

无济于事。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:55:50.617

路径应该是`./globals`因为您需要来自同一目录的文件。

`../config/globals`也可以。

一个没有路径信息的 require 值在本地 node_modules 或全局 npm 位置中查找由 npm 加载的模块。

# jquery - 使用 jQuery 在悬停时播放音频

> ID：15010909
> 
> 赞同：1
> 
> 时间：2013-02-21T19:47:22.943
> 
> 标签：jquery, html

通过这里的信息：[http ://forums.blackmesasource.com/showthread.php?t=13235](http://forums.blackmesasource.com/showthread.php?t=13235)

我正在尝试在导航链接中悬停时播放音频文件。快速移动链接时播放音频文件的问题在于，它会在再次播放之前播放整个文件，导致在链接上快速悬停时音频有所延迟。

上面链接中该问题的解决方案是添加 load();

到目前为止，这是我的 jQuery 代码：

```
<script type="text/javascript">
    $("nav ul li").hover(function(){
        nav_audio.play();
        },
    function(){
        nav_audio.load();
    });
</script> 
```

我的 HTML5 代码：

```
<audio id="nav_audio">
    <source src="nav.mp3" type="audio/mpeg"></source>
    <source src="nav.ogg" type="audio/ogg"></source>
</audio> 
```

悬停时不会播放音频，浏览器控制台（Chrome）中也不会显示错误。

知道我做错了什么，或者为什么它不起作用？我已经链接到 jQuery 文件，并且音频标签可以工作，因为它们在没有 jQuery 的其他地方使用。我只能猜测这里的问题出在 jQuery 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T01:51:56.553

我想到了。它需要文档准备功能。因此，脚本稍作更改：

```
<script type="text/javascript">
$(document).ready(function(){
    $("nav ul li").hover(function(){
        nav_audio.play();
        },
    function(){
        nav_audio.load();
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:58:45.627

```
 $(document).ready(function() {
     var audioElement = document.createElement('audio');
     audioElement.setAttribute('src', 'audio.mp3');
     audioElement.setAttribute('autoplay', 'autoplay');
     $.get();
     audioElement.addEventListener("load", function() {
     audioElement.play();
    }, true);

    $('.play').on('hover',function(event) {
       audioElement.play();
    }); 

    $('play)..unbind("mouseleave"); 
```

});

# javascript - 使用 jQuery 作为选择器，使用 JavaScript，可以吗？

> ID：15010916
> 
> 赞同：1
> 
> 时间：2013-02-21T19:47:57.527
> 
> 标签：javascript, jquery, selector

```
var helper, kitti, amount;
if (i == 0) { 
    helper = "#k" + ids+ " .contain";
}
else {
    helper = "#k" + ids + " .d" + i;
}    
kitti = "$(" + helper + ").get(0)";
amount = (MouseX-kitti.width / 2) * layer[i - 1] * 2;
kitti.style.transform = "rotateY(" + amount * 50 + "deg)";
kitti.style.left = amount + "px"; 
```

我的这部分代码似乎不起作用，但是。我敢打赌我做错了什么选择它？我读了几篇文章，得出了这个结论。但它不起作用，你能解释一下为什么吗？如何使用 jQuery 选择类，然后继续使用纯 Javascript？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T19:53:59.367

您在这里犯了一些简单的语法错误。我个人并不关心您编写代码的风格，但我会尽我所能建议修复可能是什么。

在第二行中，您编写`kitti = "$(" + helper + ").get(0)"`. 这里的问题是，这`$`是 jQuery 库中定义的函数，您将其视为字符串。

这里的结果是为变量分配一个字符串值`kitti`。您似乎`ids`还在第 1 行中使用了未定义的变量。正确的语法应该是这样的：

```
var kitti = $(helper).get(0); 
```

我不想太霸道，但是从您问题中代码的语法来看，您可能会受益于阅读 Douglas Crockford 的“JavaScript: The Good Parts”等关于优秀 JavaScript 的书。他的网站上也有很多免费的好信息。

# c# - 使用 C# mvc 添加链接

> ID：15010917
> 
> 赞同：1
> 
> 时间：2013-02-21T19:47:57.467
> 
> 标签：c#, asp.net-mvc, html-helper

我有一个可以访问的视图，`http://localhost:49467/About/`它被称为`index.cshtml`.

我有另一个视图，其中可以访问并被`http://localhost:49467/Food/`称为`index2.cshtml`

我想在`index.cshtml`页面内放置一个链接，以便我可以访问`index2.cshtml`。我该怎么做。我的代码；

```
@Html.ActionLink("link", "Food/index" ) 
```

但我最终在 URL`http://localhost:49467/About/Food/`中找不到该页面。我想要做的就是导航到`http://localhost:49467/Food/`。我该如何纠正这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T19:55:31.177

'ActionLink 助手调用的是控制器动作，而不是静态 URL

```
@HTML.ActionLink("linktext", "ControllerName") 
```

您的 Index2.cshtml 是否与 Food Contoller's Index 操作相关联？如果是这样，您可以这样做：

```
@Html.ActionLink("Linktext", "Index2", "Food", null, null) 
```

上面的第三个参数是关联操作的控制器名称。

如果`index.cshtml`还与食品控制器相关联，则无需指定控制器名称：

```
@Html.ActionLink("Linktext", "Index2") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:50:02.490

```
@Html.ActionLink("link", "/Food/index" ) 
```

注意额外的斜线。或者您的路线似乎规定 /Food 使用 index2.cshtml。所以你应该能够逃脱

```
@Html.ActionLink("link", "index2", "Food" ) 
```

使用 MVC，您不必担心视图的文件名，而是需要通过哪些控制器和操作才能访问该视图。

# css - 在 HTML 电子邮件中按比例缩放字体大小以删除孤儿

> ID：15010918
> 
> 赞同：0
> 
> 时间：2013-02-21T19:47:59.400
> 
> 标签：css, html-email

我们有一个 HTML 电子邮件，其单行标题设置为 16px Georgia 在表格单元格内。

我们使用的是相对值，因此表格会针对移动设备重新调整大小，但这会产生第二行只有一个单词的孤儿。

有什么技术可以按比例缩小表格的类型吗？

我知道字体大小可以设置为一个百分比，但想知道是否有任何方法可以将它与容器的重新大小联系起来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:39:06.153

我采用了两种方法来处理响应式电子邮件中出现的孤儿：

*   您可以尝试`&nbsp;`代替普通空间
*   当您的电子邮件出现在移动设备上时，您可以使用它`@media`来声明一个较小的电子邮件，请参阅：http: [//www.campaignmonitor.com/guides/mobile/coding/](http://www.campaignmonitor.com/guides/mobile/coding/)`font-size`

# c# - 带有复选框的 MVVM WPF 组合框

> ID：15010920
> 
> 赞同：0
> 
> 时间：2013-02-21T19:48:02.553
> 
> 标签：c#, wpf, mvvm, checkbox, combobox

我已经尝试搜索了很长一段时间，但没有找到有帮助的结果。（也许我的 google-foo 需要工作？）我对 WPF MVVM 也很陌生，所以我还在学习很多东西。

我的问题实际上分为两部分......首先，我有一个组合框，其中在视图中包含复选框。代码：

```
 <ComboBox Grid.Column="0"
                      Grid.ColumnSpan="5"
                      Margin="15,0,0,0"
          ItemsSource="{Binding StaffNames}" 
                      SelectedValue="{Binding SelectedStaffNames}"
          Grid.Row="4">
                <ComboBox.ItemTemplate>
                    <DataTemplate>
                        <CheckBox Content="{Binding Path=FullName}"
                                  VerticalAlignment="Center"
                                  IsChecked="{Binding RelativeSource={RelativeSource FindAncestor,AncestorType={x:Type ComboBoxItem}},     Path=IsSelected,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}"
                                  Command="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window},
                            Path=DataContext.CheckBoxSelected}"
                                  Margin="3">  
                        </CheckBox>
                    </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox> 
```

每次我检查一个复选框时，似乎这些复选框都会自动取消选中。

我的 ViewModel 代码如下。

```
private bool _isSelected;
        public bool IsSelected
        {
            get
            {
                return _isSelected;
            }
            set
            {
                _isSelected = value;
                RaisePropertyChanged("IsSelected");
            }
        } 
```

这里有什么问题？

我的第二个问题是：一旦上述问题得到解决，我需要将所有检查过的姓名（在这种情况下为员工姓名）附加到一个列表中，并将这些值传递回一个单独的视图/视图模型。

我完全不知道如何做到这一点。任何帮助或建议将不胜感激。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:31:35.603

2 可能出错的事情

1.  您是否尝试在命令中设置复选框值 - “DataContext.CheckBoxSelected”？由于您已经有一个绑定，这可能会重置该值。

2.  单击复选框不会更新组合框中的选定项目，而只会更新复选框。

# jquery - 使 div 在页面加载 jquery 上可见

> ID：15010921
> 
> 赞同：0
> 
> 时间：2013-02-21T19:48:03.230
> 
> 标签：jquery

这可能是一个简单的解决方案..

我有一个设置为 display:none; 的 div

我还使用一个标签来显示是否在隐藏的 div 中禁用了 javascript。我试图弄清楚如何使隐藏的显示显示但没有任何效果......（当页面加载启用 javascript 时让 div 在那里）

```
<div class="carousel-container"></div>

<style> .carousel-container {display:none;} </style>

<noscript> <div id="blah"></div> </noscript> 
```

```
$(document).ready(function(){

    $(".carousel-container").show(10);

    });

</script> 
```

我知道显示效果会使其移动，但是否有不同的效果，仅在页面加载时显示 div

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:51:45.680

$('.target').show(); 匹配的元素将立即显示，没有动画。这大致相当于调用 .css('display', 'block')，除了 display 属性恢复到最初的样子。如果一个元素的显示值为 inline，然后被隐藏并显示，它将再次被显示为 inline。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:56:19.297

你在找这个吗？？

您可以制作之前制作`visible`的div 。`jquery``display:none`

```
$('.carousel-container').css("visibility", "visible"); 
```

我希望我以正确的方式理解你的问题:)

# function - 装配功能基础？

> ID：15010923
> 
> 赞同：1
> 
> 时间：2013-02-21T19:48:05.867
> 
> 标签：function, assembly, stack

我需要一点帮助来理解汇编中的一些函数。我可以创建一个简单的函数，它接受一个参数或 2，然后通过将它放在寄存器 %eax 中返回类似数字的东西。我的问题是如何返回列表？我正在创建一个函数，它将搜索可能包含 100 个数字的已定义数据集，并且我需要保持运行特定范围（0-9、10-19、20-29 等）中数字的总数，因此是一个变量对于每个范围。由于寄存器的数量是有限的，我显然必须通过调整堆栈等来为局部变量创造空间。但是，我如何返回所有这些值？我假设您会在 %eax 中返回一个指向这些变量所在位置的地址，但是由于这些值是本地的并且是在堆栈上创建的，因此不会 t 我无法访问这些？我的意思是我猜你可以，但这与我所知道的关于局部变量及其范围的一切背道而驰。这些值应该放在堆上还是什么的？我没有被教过任何涉及组装堆的东西，所以我不知道这是我应该做的还是我不理解什么......？任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:07:40.517

如果您知道列表/数组中有多少元素，您可以在该函数中（使用 C`malloc()`或等价物）或在其外部（再次使用`malloc()`或声明数组/列表为一个变量或一组相互引用的变量）并将列表/数组的第一个元素的地址传递给函数。

或者，您可以在函数中逐个元素构建列表/数组元素，并从中返回第一个元素的地址。自然，您需要分配第一个元素，然后增加分配以便为后续元素留出一些空间（使用 C's `realloc()`），或者您可以单独分配所有元素（使用 C's `malloc()`）并将它们链接起来（也就是说，元素需要包括一个指针/地址，以便将它们链接到一个列表中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:52:38.350

我将通过“列表”假设您的意思是“数组”。如果要返回指向数字数组的指针，则需要为该数组分配一些内存。要么让调用者把它传入，要么调用`malloc`分配一个缓冲区——它对汇编程序和 C 程序一样有效。最后，返回指向数组的指针`eax`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T19:52:49.800

您将内存索引返回到在堆上创建的列表。或者您将它传递到内存索引中以将数据作为参数写入，并将其用作输出变量。那么该内存索引可以是基于堆栈或堆的。

# python - 使用 Python，如何在不知道密码的情况下将 FDF 数据写入受保护的 PDF？

> ID：15010925
> 
> 赞同：0
> 
> 时间：2013-02-21T19:48:06.573
> 
> 标签：python, pdf, pdftk

首先，我尝试使用 Python 将数据动态输入到我从政府来源下载的安全 PDF 文件中。我没有取消保护它们的密码，但可以用 PDF 阅读器打开它们并输入数据。我尝试使用 pdftk 和从 fdf_forge 创建的 FDF 文件。

我无法从中获取字段名称，`pdftk dump_data_fields`因为如果没有正确的所有者密码，它就无法打开文件。我能够使用第三方程序从文件中删除密码并创建一个没有密码的文件，所以我从中得到了字段。然而，虽然我用来删除密码的程序保留了文件中的字段，但它做了一些奇怪的事情，使它们带有粗黑边框。所以我不想将我的 FDF 数据写入破解的 PDF，我想将我的数据添加到原始的安全 PDF 中，就像我手动打开并添加数据一样。但是，我无法将 FDF 数据合并到受保护的 PDF 文件中，因为我不知道密码。

关于如何在不知道密码的情况下以编程方式打开受保护的 PDF 文件并将数据输入到使用 Python、FDF 和从 Python shell 中调用 pdftk 指定的字段中的任何建议？

# asp.net-mvc - linq中的分面搜索

> ID：15010929
> 
> 赞同：1
> 
> 时间：2013-02-21T19:48:16.563
> 
> 标签：asp.net-mvc, linq, faceted-search

在我的项目中，我正在尝试使用 Linq 实现 Faceted 搜索。我不想使用 Solr、Lucene 等...

我的数据库：

**产品**

```
+----+------+
| id | name |
+----+------+
| 1  | prod1|
+----+------+
| 2  | prod2|
+----+------+ 
```

**属性**

```
+----+--------+---------+
| id |  name  | alias   | 
+----+--------+---------+
| 1  | Weight | weight  |
+----+--------+---------+
| 2  | Height | height  |
+----+--------+---------+ 
```

**价值观**

```
+----+---------------+---------+---------+
| id |  attribute_id | value   |  alias  | 
+----+---------------+---------+---------+
| 1  |      1        |  10 g   |  10m    |
+----+---------------+---------+---------+
| 2  |      1        |  20 g   |  20m    | 
+----+---------------+---------+---------+
| 3  |      2        |  10 m   |  10m    | 
+----+---------------+---------+---------+
| 4  |      2        |  20 m   |  20m    | 
+----+---------------+---------+---------+ 
```

**产品价值**

```
+---------------+---------+
|  product_id   | value_id| 
+---------------+---------+
|      1        |  1      | 
+---------------+---------+
|      1        |  2      | 
+---------------+---------+
|      1        |  3      | 
+---------------+---------+
|      2        |  1      | 
+---------------+---------+ 
```

查询选择，例如：`site.com/filter/weight=10g_20g;height=10h/`

过滤器的 POCO 模型：

```
public class Filter
{
 public string Attribute { get; set; }
 public IEnumerable<Value> Values{ get; set; }
} 
```

此模型用于自定义模型绑定。

但是从现在开始，填充过滤器模型后，我不知道如何实现选择产品并在过滤器中选择“活动”值（启用计数的产品）。填充过滤器和产品表必须分开吗？或者，可能是单次行动？我很高兴看到使用 Linq 实现分面搜索的分步指南。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T22:35:49.097

关系数据库和 LINQ 是 Faceting 搜索的糟糕开端，但我分享你的梦想......我在上面看到的内容在技术障碍意义上对我来说并不多面，因为你可以动态建立 OR 关系以从产品中检索结果使用 PredicateBuilder 的表。如果我了解您想要一个查询，该查询检查每个别名的一堆 OR 关系以及每个值的 OR 关系。与别名和任何一个值匹配的任何产品都是匹配项。如果别名不匹配，那么您不必担心这些值。生成基本查询后，您可以进行分组以删除重复项。

这是一个迭代值列表并建立 AND 关系查询的示例。在您的情况下，您将在别名之间建立 OR 关系。在这种情况下，我的 queryBuilders 包含要匹配的值的集合，我传入当前的 Queryable，因为您需要将语句链接在一起。

```
 public static IQueryable<MeetingPayment> GetViewSpecificQuery(IQueryable<MeetingPayment> query, IInvoiceViewDetail viewToUse, IEnumerable<IInvoiceViewQueryBuilder> queryBuilders)
        {
            Expression<Func<MeetingPayment, bool>> predicate = PredicateBuilder.True<MeetingPayment>();

            foreach (IInvoiceViewQueryBuilder builder in queryBuilders)
            {
                Expression<Func<MeetingPayment, bool>> predicateItem = builder.GetQuery(predicate, viewToUse);

                if (predicateItem != null)
                {
                    predicate = predicate.And(predicateItem.Expand()).Expand();
                }
            }

            return query.Where(predicate.Expand());
        } 
```

这是一个单独的过滤器，其中在一组值之间创建 OR 关系，就像您对 10g 和 20g 所做的那样。

```
public Expression<Func<MeetingPayment, bool>> GetQuery(Expression<Func<MeetingPayment, bool>> query, IInvoiceViewDetail viewToUse)
            {
                    var ids = viewToUse.InvoiceStatuses.Select(x => x.Id).ToList();

                    if (!ids.Any()) return null;

                    var predicate = PredicateBuilder.False<MeetingPayment>();

                    foreach (var id in ids)
                    {
                        int? closure = id;
                        predicate = predicate.Or(x => x.InvoiceStatus == (InvoiceStatusEnum) closure);
                    }

                    return predicate;
            } 
```

祝你好运。

# eclipse - antlr3如何使用ant

> ID：15010932
> 
> 赞同：2
> 
> 时间：2013-02-21T19:48:30.917
> 
> 标签：eclipse, ant, antlr, antlr3

我的问题是关于将 ANT 与 ANTLR3 一起使用。

我下载了ant-antlr3，放到目录下

```
eclipse-jee-helios-SR2-win32-x86_64\eclipse\plugins\org.apache.ant_1.7.1.v20100518-1145\lib 
```

在我的 build.xml 中放：

```
`<path id="classpath">
     <pathelement location="${lib}/antlr-3.4-complete.jar"/>
     <pathelement location="${lib}/ant-antlr3.jar"/>
 </ path>`

   `<target name="antlr" depends="init">
   <antlr: ant-antlr3 xmlns: antlr = "antlib: org / apache / tools / ant / antlr"
    target = "$ {Analyzers} / AnalizadorLexer.g"
    outputdirectory = "$ {AnalizadoresBuild}"
    verbose = "true">
    <classpath refid="classpath"/>
   </ antlr: ant-antlr3>
</ target>` 
```

运行 antlr 目标得到这个错误：

```
BUILD FAILED
C: \ Users \ melmar \ Documents \ workspace \ PL \ Prac12 \ build_pol.xml: 68: Problem: failed to create task or type antlib: org / apache / tools / ant / antlr: ant-antlr3
Cause: The name is undefined.
Action: Check the spelling.
Action: Check That any custom tasks / types Have Been declared.
Action: Check That any <presetdef> / declarations have taken place <macrodef>.
No types or tasks Have Been In This namespace defined yet
This appears to be an antlib declaration.
Action: Check That the Implementing library exists in one of:

         -C: \ Users \ melmar \. Ant \ lib (don´t exist)
         -a directory added on the command line argument With The-lib 
```

请问有人知道该怎么做吗？，在类路径中没有找到ant-antlr3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:36:11.807

我不使用该`antlr`任务，而只是将 ANTLR JAR 放入`libs`，然后执行以下操作：

```
<path id="classpath">

    <!-- more entries here -->

    <fileset dir="lib">
        <include name="*.jar" />
    </fileset>
</path>

<target name="generate">
    <echo>generating the parser and lexer</echo>
    <java classname="org.antlr.Tool" fork="true" failonerror="true">
        <arg value="-fo" />
        <arg value="path/to/output/generated/files" />
        <arg value="path/to/Grammar.g" />
        <classpath refid="classpath" />
    </java>
</target> 
```

# visual-studio-2010 - 如何跳回到在 Visual Studio 2010 调试器中引发异常的代码行？

> ID：15010935
> 
> 赞同：13
> 
> 时间：2013-02-21T19:48:35.923
> 
> 标签：visual-studio-2010, visual-studio, debugging, exception, exception-handling

使用 Visual Studio 2010 调试器，我熟悉使用“调用堆栈”窗口查看当前执行的函数是从何处调用的。

我正在使用一些具有相当大块的应用程序`try`。假设我在块中的断点处暂停代码的执行`catch`，那么判断异常从 try 块中的哪一行引发的最简单方法是什么？

我知道“堆栈跟踪”包括行号等详细信息，但有没有更简单的方法（例如快捷键）导航回引发异常的代码行？

**更新**：我想强调我不希望将执行点移回`try`块；我只是想要一种更简单的方法来了解异常是从哪一行引发的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T20:33:17.653

如果您转到“DEBUG”、“Exceptions...”，然后针对“Common Language Runtime Exceptions”选择“Thrown”。

![例外](../Images/3941f9608efccda1890758551dfadeb9.png)

然后，当您的代码遇到异常时，它将在出现错误的行停止。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T20:11:17.127

一个解决方案可能是让 VS 在所有异常上中断：

选择菜单`Exceptions`下`Debug`，勾选相关的“Thrown”框`Common Language Runtime Exceptions`。

现在 VS 现在应该停止并标记引发异常的行。您可以像往常一样**继续**，点击播放按钮或 F5。

这样做的缺点是所有异常都会以相同的方式被捕获，如果你有很多异常，这可能会很烦人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-26T13:36:03.377

对于 Visual Studio 2019：

转到`Debug`-> `Windows`->`Exception Settings`并在`Common Language Runtime Exceptions`.

[![在此处输入图像描述](../Images/117d22b659fb1a01b9e28f07e2ae2561.png)](https://i.stack.imgur.com/tSa7V.png)

# .htaccess - 通过 IP 地址限制网页内容访问

> ID：15010936
> 
> 赞同：1
> 
> 时间：2013-02-21T19:48:40.370
> 
> 标签：.htaccess

我想在我的域中安装一个 Symfony2，但在开发之前我需要将域的访问限制为我的 IP 地址。

我对位于 webroot 中的 .htaccess 进行了尝试：

```
order deny,allow
deny from all
allow from 222.222.222.222 
```

这没用。

它只是让没有人看到该网站...如果我将全部拒绝更改为全部允许..它正在工作，但我不需要这个。有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:55:29.673

这将阻止除来自 222.222.222.222 的流量之外的所有流量

```
Order Deny,Allow
Deny from all
Allow from 222.222.222.222 
```

如果您只想阻止 1 个 ip，则需要

```
Order Deny,Allow
Deny from 222.222.222.222
Allow from all 
```

# c++ - 奇怪的多线程问题

> ID：15010937
> 
> 赞同：0
> 
> 时间：2013-02-21T19:48:42.853
> 
> 标签：c++, multithreading, cpp-netlib

我有一个创建服务器的两个线程的构造函数（我正在使用 cpp-netlib 库）。我得到的奇怪问题是，即使我没有在构造函数中调用 servlet1.join() 和 servlet2.join()，由于某种原因，构造函数会等待两个线程结束。即使这些线程永远不会结束。但是，如果我将相同的代码放在 main() 中，它不会等待两个线程，除非我调用 join()。看看版本 A 和 B。

> http_server* 服务；

**一个-**

```
Server()
{
    boost::network::utils::thread_pool thread_pool(2);
    Server handler();
    serv = new http_server(0.0.0, 800, handler, thread_pool);
    boost::thread servlet1(boost::bind(&http_server::run, serv));
    boost::thread servlet2(boost::bind(&http_server::run, serv));
    serv->run();
    std::cout << "This never prints" << std::endl;
}
~Server()
{
    serv->stop(); //this kills all threads and stops server gracefully
    delete serv;
} 
```

主要的：

```
int main()
{
    std::cout << "hi" << std::endl; //this prints
    Server* test = new Server();
    std::cout << "hi" << std::endl; //this never prints
    delete test;
} 
```

**乙-**

```
int main()
{
    boost::network::utils::thread_pool thread_pool(2);
    Server handler();
    serv = new http_server(0.0.0, 800, handler, thread_pool);
    boost::thread servlet1(boost::bind(&http_server::run, serv));
    boost::thread servlet2(boost::bind(&http_server::run, serv));
    serv->run();
    std::cout << "This always prints" << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:56:17.410

您有一个无限循环，因为您在 Server() 构造函数中实例化了一个 Server

在一个-

```
Server()
{
    boost::network::utils::thread_pool thread_pool(2);

    ***--> Server handler(); <--***

    serv = new http_server(0.0.0, 800, handler, thread_pool);
    boost::thread servlet1(boost::bind(&http_server::run, serv));
    boost::thread servlet2(boost::bind(&http_server::run, serv));
    serv->run();
    std::cout << "This never prints" << std::endl;
} 
```

# mongodb - Grails、GORM 和 MongoDB 的 UUID 问题

> ID：15010941
> 
> 赞同：1
> 
> 时间：2013-02-21T19:48:51.400
> 
> 标签：mongodb, grails, grails-orm

我是 Grails 的新手，我尝试使用 UUID 类型的 id 持久化模型。我知道有 ObjectId，但现在我会坚持 UUID。

```
class Book {
  UUID id
  String title
} 
```

我有一个启用脚手架的 BookController。当我现在加载控制器并尝试添加一本新书时，我从 Grails 收到以下错误消息：

```
错误 500：内部服务器错误
URI /GrailsTest/book/save
类 org.springframework.core.convert.ConverterNotFoundException
消息找不到能够从 java.lang.String 类型转换为 java.util.UUID 类型的转换器
grails-app/controllers/ch/teamrg/test/BookController.groovy 的第 24 行左右
PageFragmentCachingFilter.java 的第 186 行附近
183：如果（方法==空）{
184: log.debug("No cacheable method found for {}:{} {}",
185: 新对象 [] { request.getMethod(), request.getRequestURI(), getContext() });
186：链.doFilter（请求，响应）；
187：返回；
188：}
189：集合cacheOperations = cacheOperationSource.getCacheOperations（
AbstractFilter.java 的第 63 行附近
60：试试{
61: // 为 RequestDispatcher 转发设置 NO_FILTER 以避免双重 gzip
62: if (filterNotDisabled(request)) {
63：doFilter（请求，响应，链）；
64：}
65：否则{
66: 链.doFilter(req, res);
痕迹
   线 | 方法
->> 18 | 在 org.grails.datastore.mapping.model.types.conversion.DefaultConversionService 中转换
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
| 365 | org.grails.datastore.mapping.engine.NativeEntryEntityPersister 中的 cacheNativeEntry
| 725 | 持久实体。在 ''
| 125 | 坚持在 org.grails.datastore.mapping.engine.EntityPersister
| 第479章 坚持。. . . 在 org.grails.datastore.mapping.core.AbstractSession
| 166 | doSave 在 org.grails.datastore.gorm.GormInstanceApi
| 143 | 呼叫。. . . . 在 org.grails.datastore.gorm.GormInstanceApi$_save_closure4
| 301 | 在 org.grails.datastore.mapping.core.DatastoreUtils 中执行
| 34 | 执行 。. . . 在 org.grails.datastore.gorm.AbstractDatastoreApi
| 142 | 保存在 org.grails.datastore.gorm.GormInstanceApi
| 258 | 称呼 。. . . . . 在 org.grails.datastore.gorm.InstanceMethodInvokingClosure
| 24 | 保存在 BookController.groovy
| 186 | 过滤器。. . . 在 PageFragmentCachingFilter.java
| 63 | AbstractFilter.java 中的 doFilter
| 第886章 运行任务。. . . 在 java.util.concurrent.ThreadPoolExecutor$Worker
| 908 | 跑进 ''
^ 680 | 跑 。. . . . . 在 java.lang.Thread

```

我在 org.grails.datastore.mapping.engine.NativeEntryEntityPersister 设置了一个断点。当应用程序到达那里时，我可以解析返回 org.grails.datastore.mapping.model.types.conversion.DefaultConversionService 实例的 getMappingContext().getConversionService() 部分。此实例配置了 10 个转换器，包括 ObjectId 和 Binary 的转换器。我现在问自己，我可以在哪里配置我自己的转换器，以便我可以在 String 和 UUID 之间进行转换？

由于我是 Grails 的新手，所以我不知道在哪里放置所需的 Java 文件以及我必须在哪个文件中放置什么样的配置。如果有人能指出我正确的方向会很酷。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:42:40.140

文档中有一个 session for [custom user types](http://springsource.github.com/grails-data-mapping/mongo/manual/guide/3.%20Mapping%20Domain%20Classes%20to%20Mongo%20Collections.html#3.6%20Custom%20User%20Types)。

因此，您需要创建扩展`AbstractMappingAwareCustomTypeMarshaller`并注册为 a的类型类`Spring Bean`（参见文档的最后部分）。

# jquery - 目标 c iOS 应用程序的类似 Jquery 的效果

> ID：15010944
> 
> 赞同：0
> 
> 时间：2013-02-21T19:49:05.913
> 
> 标签：jquery, objective-c, api, animation, user-interface

我想知道是否有一个库或内置于objective c的东西，它允许平滑的动画，比如jquery提供的。

我不是在问如何将 jquery 与目标 c 一起使用，因为我知道它们是两种语言。我要问的是是否有用objective c编写的东西，比如jquery和动画等。

如果没有，有人可以指出我正确的方向，从头开始为目标 c 构建类似的东西。

谢谢，

迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:56:39.590

查看动画指南以获取视图：

[http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/animatingviews/animatingviews.html](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/animatingviews/animatingviews.html)

这是一个很棒的教程：

[http://www.raywenderlich.com/2454/how-to-use-uiview-animation-tutorial](http://www.raywenderlich.com/2454/how-to-use-uiview-animation-tutorial)

你可以做一些很酷的事情，比如淡出视图然后在：

```
[UIView animateWithDuration:1.0
                      delay: 0.0
                    options: UIViewAnimationOptionCurveEaseIn
                 animations:^{
                     self.view.alpha = 0.0;
                 }
                 completion:^(BOOL finished){
                     // Wait one second and then fade in the view
                     [UIView animateWithDuration:1.0
                                           delay: 1.0
                                         options:UIViewAnimationOptionCurveEaseOut
                                      animations:^{
                                          self.view.alpha = 1.0;
                                      }
                                      completion:nil];
                 }]; 
```

# mysql - 具有固定宽度和 blob 列的 MySQL 表设计

> ID：15010948
> 
> 赞同：3
> 
> 时间：2013-02-21T19:49:19.877
> 
> 标签：mysql, sql

我正在设计一个存储有关产品项目信息的表（InnoDB）。

项目->

*   item_id (PK)
*   价格
*   重量
*   库存计数
*   类别ID
*   说明（BLOB，最大 2K）

此表主要用于获取给定项目的所有数据，但有时仅可以读取描述字段。项目数据很少更新，包括描述字段。

我有 2 个查询：

*   为了更快的读取操作，最好将表分成 2 部分，1 部分具有固定宽度字段，而其他部分具有 blob 'description' 字段？我认为我缺少的基本理解是描述字段的可变长度是否会影响项目数据的查找时间。

*   如果我有很多item数据，比如10M，这个表的更新速度和上面提到的隔离表相比如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:21:59.507

InnoDB 没有从固定宽度的行中获得优势。这是一个 MyISAM 优化。

在 InnoDB 中，长 BLOB/TEXT/VARCHAR 列可能会溢出到额外的存储页面（和内存，因为缓冲池与表空间具有相同的页面组织）。

适合该行主页的短 BLOB/TEXT/VARCHAR 将与其他列一起存在。即使它们溢出，默认行格式 (COMPACT) 仍然包括这么大列的前 768 个字节。

有关更多详细信息，您可能想阅读[http://www.mysqlperformanceblog.com/2010/02/09/blob-storage-in-innodb/](http://www.mysqlperformanceblog.com/2010/02/09/blob-storage-in-innodb/)

因此，如果您担心每页适合更多行，您可以拆分表并将您的描述列存储在另一个表中。

更新时，它就更不重要了，因为 InnoDB 在更新时写入其日志文件，并且日志文件不像表空间那样按页面组织。稍后，缓冲池中修改的页面被写入表空间，但您的应用程序不必等待，它发生在后台。

但是，它可能没有您想象的那么大的好处，并且通过使用索引来缩小查询必须访问的行数可能是一种更好的优化策略。

# html - 填充给定 div 的高度

> ID：15010949
> 
> 赞同：0
> 
> 时间：2013-02-21T19:49:26.347
> 
> 标签：html, css

无论黄色的内容如何，​​我都试图让绿色 div 填充高度。

绿色和黄色 div 位于灰色 div 内。

这是代码：http: [//jsbin.com/ofelov/1/edit](http://jsbin.com/ofelov/1/edit)

（关于这个问题，我什至不知道标题应该是什么，所以如果它不是正确的，我很抱歉，并随时修改它）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:02:03.017

如果黄色 div 在绿色 div 中会容易得多。黄色div在外面有什么原因吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:15:15.450

Chris Coyier 的解决方案：

[http://css-tricks.com/equal-height-blocks-in-rows/][1]

还有许多其他方法，只需 google 'javascript equal columns'。Javascript 是处理需要相等高度的浮动 div 问题的最佳解决方案。当然，这可以通过表格和 css 来完成，但表格不应该用于布局。

# jquery - jQuery 脚本每隔一段时间在 IE 中工作一次

> ID：15010956
> 
> 赞同：0
> 
> 时间：2013-02-21T19:49:47.697
> 
> 标签：jquery, internet-explorer

我正在使用 jQuery 构建一个应用程序，该应用程序从 php 文件请求 json 格式的数据以显示项目列表。我的脚本在 Chrome 和 Firefox 中运行良好，但在 IE 中我有一个奇怪的行为：我没有从控制台返回任何错误，但脚本卡在“正在加载数据......”然后。 .. 休息一段时间后，大多数时候它会加载。我不知道 IE 是否只需要大量秒来加载所有数据（这很奇怪，因为 Chrome 和 Firefox 会在几毫秒内加载所有内容），或者我的脚本有问题而未被检测到。

在这里，我发布了与加载有关的脚本部分：

```
/*
This function hides the div containing the "Loading data..." message  
as the loading is complete.
*/  

$.hideLoading = function() {
        $("#loading").hide();
        $("#searcharea").show();
    };
/*
This function is responsible for getting the data from the php file and "shouts"
when it's finished.  
*/      
$.getData = function(field) {
    return $.ajax({
        url: 'lib/getData.php',
        data: { d: field },
        datatype: 'json'
    }).promise();
};

/*
When the two functions are done, hideLoading() is fired causing the "Loading data..."
message to disappear. 
*/ 

$.when(catData = $.getData('cat'), giftsData = $.getData('gifts') ).done(function() {
    $.hideLoading();
});

/*
They hand the loaded data to functions that will process it.
*/ 
catData.then(function(data) {
    $.parseCategories(data);
});

giftsData.then(function(data) {
    $.parseGiftData(data, targetId);
    giftsDataObj = data;
}); 
```

这段代码有什么问题让 IE 每隔一段时间工作一次吗？我可以以任何方式检测是否有一些实际加载？因为坦率地说，我不明白它是如何工作的，然后……卡住了。

**编辑：**我已经`console.log`从脚本中删除了所有内容，现在看来，当我启动 IE 并且它第一次加载页面时，脚本工作正常，但是如果我尝试重新加载页面，那么脚本就会卡住。

# ruby-on-rails - Rails 新手，尝试测试设计确认和电子邮件即使在“确认！”之后在测试中也是空白的。

> ID：15010962
> 
> 赞同：0
> 
> 时间：2013-02-21T19:50:17.400
> 
> 标签：ruby-on-rails, email, testing, devise, confirm

Rails 新手，非常感谢您的时间。所以我正在运行以下测试：

```
 test "does not validate without" do
@user.update_attributes(email: "example@example.com", password: "12345699", password_confirmation: "12345699")
@user.confirm!
assert(!@user.save, "this should not be valid since it lacks a zipcode")
@user.update_attributes(password: "12345678", password_confirmation: "12345678")
assert(!@user.save, "this should be invalid straight up")
@user.update_attributes(sex: "male")
@user.update_attributes(zipcode: "33333")
@user.save
puts @user.errors.to_yaml
assert(@user.save, "this should be valid straight up")
end 
```

我得到这个输出：

```
 Run options: 

  # Running tests:

  --- !ruby/object:ActiveModel::Errors
  base: !ruby/object:User
 attributes:
id: 980190962
username: 
email: ''
encrypted_password: !binary |-
  JDJhJDA0JEFHc0RaOG9zWDlGcWguNGtTN0tuTi5SeEtGNGpqcVR3bU4uVFdD
  VzZ6eWxMVGxFbXJzUmhh
reset_password_token: 
reset_password_sent_at: 
remember_created_at: 
sign_in_count: 0
current_sign_in_at: 
last_sign_in_at: 
current_sign_in_ip: 
last_sign_in_ip: 
created_at: 2013-02-21 19:42:48.000000000 Z
updated_at: 2013-02-21 19:42:48.985150392 Z
first_name: 
last_name: 
zipcode: 33333
sex: male
provider: 
uid: 
avatar_image: 
confirmation_token: GjCHVfywWX2hqUHTqBgN
confirmed_at: 2013-02-21 19:42:49.195009552 Z
confirmation_sent_at: 2013-02-21 19:42:49.035655702 Z
unconfirmed_email: example@example.com
messages: !omap
- :email:
- can't be blank
- can't be blank
  F

 Finished tests in 2.479095s, 0.4034 tests/s, 1.2101 assertions/s.

1) Failure:
test_does_not_validate_without(UserTest) [test/unit/user_test.rb:105]:
this should be valid straight up 
```

是什么赋予了？？即使我确认了，为什么电子邮件是空白的？如果我在更新邮政编码之前将确认调用移动到，但在更新性别之后，即使我验证性别和邮政编码都存在，这仍然有效（测试运行没有错误并且全部通过）！我目前没有测试宝石。

这是我的模型的相关部分：

```
 class User < ActiveRecord::Base

     devise :database_authenticatable, :confirmable, :registerable,:omniauthable, :recoverable, :rememberable, :trackable, :validatable

# Setup accessible (or protected) attributes for your model
attr_accessible :username, :sex, :email, :password, :first_name, :last_name, :zipcode,
              :password_confirmation, :remember_me, :provider, :uid, :avatar_image, :remote_avatar_image_url

validates :username, :uniqueness => true
validates :email, :uniqueness => true
validates_presence_of :sex, :zipcode, :password_confirmation
validates_presence_of :email
validates_length_of :zipcode, :is => 5
# attr_accessible :title, :body
has_one :gallery, :dependent => :destroy

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-22T08:19:01.467

我想你不能打电话确认！除非用户是有效的

[这](https://github.com/plataformatec/devise/blob/master/lib/devise/models/confirmable.rb#L59)是确认文件！方法 ：

```
# Confirm a user by setting it's confirmed_at to actual time. If the user
# is already confirmed, add an error to email field. If the user is invalid
# add errors 
```

# sql-server-2008 - 通配符匹配一个或零个字符

> ID：15010964
> 
> 赞同：8
> 
> 时间：2013-02-21T19:50:19.970
> 
> 标签：sql-server-2008, tsql, wildcard

这有短手吗？
是否有匹配任何或空的通配符？
另一个是说它是匹配零或一。

```
select [id], [word] from [FTSwordDef]
 where [word] like 'system_'
    or [word] like 'system' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T23:27:29.553

是的，有一种更短的方法，但它可能会使您的查询不可[sargable](http://en.wikipedia.org/wiki/Sargable "Sargable（维基百科）")（除非它已经如此）：

```
WHERE word + ' ' LIKE 'system_' 
```

它之所以起作用，是因为左侧的任何额外空间都`LIKE`被忽略了，而如果它不是额外的，即如果它在右侧参数的长度范围内，它会像任何其他字符一样参与匹配模式字符串。

因此，例如，以下所有情况都会导致`true`：

```
(1) 'system ' LIKE 'system_'
(2) 'systemA' LIKE 'system_'
(3) 'systemA ' LIKE 'system_' 
```

在 (1) 中，空格与`_`模式字符串的 匹配。在 (2) 中，它`A`与`_`. 在`(3)`中，也`A`同时忽略了空间。

这是一个很好的小演示来说明这一点：[http](http://sqlfiddle.com/#!3/d41d8/9521) ://sqlfiddle.com/#!3/d41d8/9521 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T00:31:58.503

效率极低，我更喜欢[Andriy 的答案](https://stackoverflow.com/a/15057961/146077)，但您可以使用通配符并比较长度。

```
select [id], [word] from [FTSwordDef]
  where [word] like 'system%'
    and LEN([word]) <= LEN('system%') 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-21T19:52:28.240

没有。

[http://msdn.microsoft.com/en-us/library/ms179859.aspx](http://msdn.microsoft.com/en-us/library/ms179859.aspx)

如果百分比字符不起作用，则需要 OR。这是该子句的一个额外部分，所以是的，它不太干净，但首先使用 LIKE 会导致效率低下。经验法则是，如果可能，请避免 LIKE，如果性能是一个问题。

# c# - MVVM ViewModel 将参数传递给另一个 ViewModel

> ID：15010965
> 
> 赞同：1
> 
> 时间：2013-02-21T19:50:23.710
> 
> 标签：c#, mvvm, mvvm-light

我正在使用 MVVM-Light，并且我有一个列出了销售人员的 DataGrid 工作。用户可以双击打开一个子窗口，该窗口将在网格上列出他们的销售，并且用户将能够填写该网格下的一些文本框以添加新的销售。

我正在尝试使用两个单独的 ViewModel 来实现这一点 - 一个用于销售人员列表，一个用于销售列表。让我感到困惑的部分是 Salesman 网格将 Selected Salesman 传递给 Sales Items 代码隐藏，但我真正需要它的地方是在 ViewModel 中。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:26:42.517

创建一个 ViewModel 将推销员分配给 viewmodel 的一个属性。然后将 Viewmodel 改为您的 View。

或者，如果您使用依赖注入，您可以创建 ViewModel，将视图接口注入构造函数，设置 ViewModel.SalesPerson = person，然后调用 ViewModel.Present() 来调用 IView.ShowDialog()。

# database - 自然连接可以看作是等连接和θ连接的子集吗？

> ID：15010966
> 
> 赞同：2
> 
> 时间：2013-02-21T19:37:27.030
> 
> 标签：database, math, join, relational-database, relational-algebra

我有一个关于[关系代数](http://en.wikipedia.org/wiki/Relational_algebra)的问题，以及如何将 theta-join、equi-join 和 natural-join 相互分类。

在对 stackoverflow.com 的评论中，[sqlvogel](https://stackoverflow.com/users/191708/sqlvogel)引用了[EF Codd](http://en.wikipedia.org/wiki/Edgar_F._Codd)的话，他是发明数据库管理关系模型的计算机科学家，“[the] Natural[-join] 是 Equi[-join] 的一个子集，它是 Theta[-加入]。” `*`（[stackoverflow.com](https://stackoverflow.com/questions/7870155/difference-between-a-theta-join-equijoin-and-natural-join#comment16876413_7870203)于 2 月 12 日晚上 9:01 检索）。

我了解如何将 equi-join 视为 theta-join 的子集。它们都连接并且都使用固定数量的属性，但是等连接仅限于使用相等运算符 (=)。另一方面，自然连接是连接两个关系的所有元组组合（不是固定数量的属性）的集合，并且仅限于使用相等运算符 (=)。equi-join 和 theta-join 在它们可以使用的运算符上有所不同，但我认为自然连接在不同的*维度*上是不同的，因为它的定义中不需要任何属性。

任何人都可以对这个问题有所了解吗？

`*`我找不到这句话的原始来源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T04:41:12.057

**摘要：**如果您忽略技术细节并专注于连接的意图，自然连接是等连接的子集。如果您包含这些技术细节，事情会变得更加复杂。然后，自然连接可以是等连接的子集，具体取决于使用的定义。

* * *

在我看来，这实际上取决于所采用的子集。

*[编辑：本段在下面的维基百科关系代数部分中得到了大量扩展，但保留在此处以保留原始答案的上下文。]*

如果我们谈论的是操作在技术上的作用，那么 equi-join 显然是 theta-join 的一个子集，因为它只能在相等时加入，而 theta 可以在大于比较、小于比较等情况下加入。此外, equi-join 和 theta-join 都对任意属性进行操作。但是，自然连接在这方面与其他两个连接不同。严格来说，equi-join 和 theta-join 只能对不共享公共属性名称的关系进行操作。自然连接将连接两个公共属性名称相等的关系并“删除”重复属性。我相信这是当您说自然连接不同时所采用的定义，在这种情况下您是正确的。

如果我们谈论的是操作在语义上（或实际上）做了什么，那么我会说它们是彼此的子集。Theta-join 基于任意属性之间的各种布尔条件进行连接。Equi-join 仅限于相等比较。自然连接进一步受到限制，因为属性不是任意的，它们必须共享名称。

* * *

**编辑：更技术性的答案：**

*免责声明：我假设集合论的第一年水平知识。*

# 定义

对于技术答案，*我们需要技术定义。*那么我们遵守哪些技术定义呢？如果你用谷歌搜索关系代数，在第一页你可能会从各种大学数据库课程中获得维基百科链接、Youtube 视频和讲义（值得注意的是，没有指向 Codd 论文的链接）。他们都同意选择、投影、连接等的“基础”。但是，在一些细节上他们不同，例如：

*   我们是否允许在共享属性名称的两个关系之间发生 theta-joins，如果允许，我们如何处理它？
*   在选择和 theta 连接中，允许哪些谓词和命题？
*   当没有属性共享名称时（在这种情况下它退化为笛卡尔积），是否可以执行自然连接？

**我将看一下关系代数的两个定义：维基百科和 Codd 的**。

# 维基百科的关系代数

我从[维基百科的关系代数文章](http://en.wikipedia.org/wiki/Relational_algebra)开始，因为它与现在大学在介绍性数据库课程中所教授的内容非常接近。然而，这篇文章未能有效地引用其来源，尤其是在技术方面。它也是相当数学的。因此，我真的不向第一次看关系代数的人推荐这篇文章。

## 自然连接

维基百科将自然连接定义为：

> [...] *R*和*S*中的所有元组组合的集合，它们的公共属性名称相同。

还，

> 通常要求*R*和*S*必须至少有一个公共属性，但是如果省略这个约束，并且*R*和*S*没有公共属性，那么自然连接就变成了笛卡尔积。

正如我们将看到的，因为 Codd 需要一个公共属性名称，所以我们将使用允许退化自然连接的定义。请注意，公共属性仅在结果关系中出现一次。所以如果关系*R*有*m*个属性，关系*S*有*n 个*属性，并且它们有*x 个*共同的属性（*x* ≥ 0, *x* ≤ *m* , *x* ≤ *n*），那么结果关系*R* NATURAL JOIN *S*有*m + n - x*属性.

## Theta-joins 和 equi-joins

Wikipedia 将关系*R*和*S*之间的 θ 连接定义为满足 θ 关系*a* θ *b*或*a* θ *v*的连接，其中*a*和*b*是属性名称，v 是常数值，θ 是 {<, ≤, =，≥，>}。

还，

> 此操作的结果由*R*和*S*中满足关系 θ 的所有元组组合组成。*仅当S*和*R*的标头不相交，即不包含公共属性时，才定义 θ-join 的结果。

等值连接只是一个 θ 连接，其操作是“=”。

## 联接之间的关系

简单来说，equi-join 是 theta-join 的一个子集。

如果*R*和*S*具有共同的属性，则 theta-join 不能直接对关系进行操作。因此，自然连接可以产生 theta-join 不能产生的关系。如果它们没有共同的属性，那么自然连接将退化为笛卡尔积。theta-join 现在是合法的。它将能够加入，但可以根据所使用的特定 θ 关系产生不同的结果。那么在一般情况下，theta-joins 可以产生自然连接不能产生的关系。

所以总而言之，我们有 equi-joins 是 theta-joins 的子集，自然连接不是 theta-joins 的子集，theta-joins 也不是自然连接的子集（这就是我最初说它们时的意思是不同的）。由此可见，**自然连接不是 equi-joins 的子集**。

# Codd 的原始关系代数¹

现在，让我们去源头看看[Codd 的早期论文](http://www.seas.upenn.edu/~zives/03f/cis550/codd.pdf)。诚然，这是我第一次阅读它，所以请随时指出我可能犯的任何错误。然而，在我看来，如果你放弃任何关于关系代数的假设，这篇论文比维基百科的文章更容易阅读。

几点注意事项：

*   在本文中，Codd 从未真正将他的运算称为“代数”。
*   Codd 关注二元关系（即只有两个属性的关系），但在第 2.1.3 节的末尾表明，更大程度的关系很容易简化为二元关系。
*   实际上，唯一与 Wikipedia 定义相同的操作是投影。

## 域和角色

在 1.3 节中，关系被定义为有限数量集合的笛卡尔积的子集。这些集合中的每一个都称为一个*域*，并具有一个*域名*²。关系*可以*有具有相同域名的列（即，其中两个列来自同一个集合）。在这种情况下，具有相同域名的列可以通过唯一的*角色名称*来区分。因此，Wikipedia 的属性名称类似于 Codd 的 domain_name.role_name ³。

## 加入

在 2.1.3 节中，Codd 将连接定义为只有当两个关系共享一个域时才可能。此外，他指出，

> 如果存在三元关系*U*使得 π [12] ( *U* ) = *R*和 π [23] ( *U* ) = *S* ，则二元关系*R*可与二元关系 S 连接。任何这样的三元关系称为*R与 S 的**连接*。如果*R*和*S*是二元关系，使得 π [2] ( *R* ) = π [1] ( *S* )，则*R*与*S*是可连接的。

 ***这是相当理论上的，但它本质上的意思是，如果关系*R*和*S*可以从连接关系中完全恢复，则连接只能在*R*和*S之间发生。*这意味着要连接的列的值集在*R*和*S中**必须*相同。

 ***这比 SQL 的连接和 Wikipedia 文章中定义的连接（包括自然连接）更具限制性。

## 自然连接

鉴于上述情况，自然连接的定义很容易失败：

> *R* x *S* = { ( *a* , *b* , *c* ): *R* ( *a* , *b* ) ⋀ *S* ( *b* , *c* ) }

## 限制

我们将从连接中快速绕道查看描述限制的第 2.1.5 节。它是一种类似于[选择（由维基百科定义）](http://en.wikipedia.org/wiki/Selection_%28relational_algebra%29)的操作。关系*R*可以通过以下方式受到关系*S*的限制：形成一个新关系*R'*，由 R 的元组组成，*其中*其列值的子集是*S*列子集的元素。我不确定我是否能很好地解释这一点，所以这里有一些等效的 SQL：

```
SELECT * FROM R 
WHERE some_attributes IN (
    SELECT some_comparable_attributes FROM S) 
```

## Theta-joins 和 equi-joins

该论文没有*为*theta 和 equi-joins 提供明确的定义。此外，似乎不可能简单地定义一个 theta-join（尽管如果我错了请纠正我）。*但是，我们可以在关系R*和*S*上定义一系列操作，其结果与 Wikipedia 文章中定义的 equi-join几乎相同^(4 。)

我们将利用我们只需要考虑二元关系的事实。所以让*R*有列（*a*，*b*），*S*有列（*b*，*c*）。它们不一定是可连接的，因为 π [*b*] ( *R* ) 不一定等于 π [*b*] ( *S* )。然后通过关于属性*b*用*S*限制*R来形成关系**R'*，并且通过关于属性*b*再次通过*R*限制*S来形成关系**R '********. 现在，π [*b*] ( *R'* ) = π [*b*] ( *S'* )，所以我们可以采用*R'*和*S'*的自然连接。*******

 **## 联接之间的关系

它不属于给定的等连接定义，但如果 π [*b*] ( *R* ) = π [*b*] ( *S* )，则等连接等价于自然连接。因此，**自然连接是 equi-join 的一个子集**。

* * *

进一步阅读：我发现[这个答案](https://stackoverflow.com/a/7564836/1607043)提供了有关 theta-joins 和关系代数的更多有用信息。

* * *

### 脚注

1.  我不确定称这个 Codd 的*原始*关系代数是否公平，因为我在两年后的[CS.SE 答案](https://cs.stackexchange.com/questions/10158/origin-of-theta-joins)中发现，他会定义一个与维基百科非常相似的关系代数（尽管谢天谢地允许 ≠ 在 θ -加入）。然而，这个答案的重点是强调关系代数有不同的定义，必须先建立定义，然后才能进行任何形式的证明。

2.  我忽略了首先定义域位置的步骤，以及关系和关系之间的区别。

3.  Codd 定义了一个额外的*生成标识符*，我们将再次忽略它。

4.  在 Codd 的理论中，要连接的列必须具有相同的域。根据 Wikipedia 中提出的理论，这不是要求，但实际上，无论如何您都不应该进行此类连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T23:51:38.240

他大概提到了以下几点：

自然连接是等连接，其中相等比较将应用于具有相同名称的属性。

TABLE_A JOIN TABLE_B ON TABLE_A.X = TABLE_B.Y 是等连接，但不是自然连接。

因此，所有自然连接确实是等连接，但并非所有等连接都是自然连接。

因此，表之间所有可能的自然连接的集合是那些相同表之间所有可能的等连接集合的子集（通常是正确的）。********

# django - 显示更多突出显示的上下文

> ID：15010967
> 
> 赞同：3
> 
> 时间：2013-02-21T19:50:25.580
> 
> 标签：django, django-haystack

我想知道如何让 django-haystack 突出显示模板标签显示更多突出显示之前的文本？

它当前显示“此处***突出显示的文本***一些其他文本”，它必须显示更多以前的上下文，例如：“此处的一些其他文本***突出显示的文本***此处的一些其他文本”

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T20:32:40.557

我认为最好的方法是[按照文档中的](http://django-haystack.readthedocs.org/en/latest/highlighting.html#highlighter)`Highlighter`描述进行扩展。

就像是：

```
from haystack.utils import Highlighter

class ShowMoreTextHighlighter(Highlighter):
    def find_window(self, highlight_locations):
        their_start, their_end = super(ShowMoreTextHighlighter, self).find_window(highlight_locations)
        # perform some clever operations here to find an earlier start location
        my_start = their_start/2 # or just do something simple
        return (my_start, their_end) 
```

# git - 添加远程仓库 - Git 添加远程 - Beanstalk

> ID：15010973
> 
> 赞同：1
> 
> 时间：2013-02-21T19:50:40.180
> 
> 标签：git, repository, git-remote

我刚刚使用以下命令添加了一个远程（repo？）：

```
 git remote add my_remote_repo git@abc.beanstalkapp.com:/g_my_remote.git 
```

我期待这个 Repo 出现在 beantalk 中。或者我可能在这里遗漏/不理解某些东西。我是 git 新手。

上面的命令是成功的，它与其他 repos 一起显示。

```
 git remote -v 
```

当你说`remote`我们在谈论新的回购时（正如我假设的那样）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:55:20.823

对于 git，远程只是它知道的另一个存储库。实际上，远程就像存储库 URL 的别名。添加远程时，您只是添加到存储库知道的存储库列表（跟踪分支）。在 git 可以使用它们之前，这些存储库必须存在。您必须先通过他们的 Web 界面将存储库添加到 beanstalkapp.com，然后才能将其作为远程链接到您自己的存储库。该`git remote`命令不执行存储库初始化。

顾名思义，遥控器通常位于偏远地区，但不一定是偏远地区。远程可以是本地计算机上的存储库。如果您运行命令`git remote add local ../my_repo_copy`，您将看到 git 不会在该位置创建新的存储库。为此，您必须首先在 处创建一个目录`../my_repo_copy`，将其更改为 ( `cd ../my_repo_copy`)，并将其初始化为新的 git 存储库 ( `git init`)。以这种方式初始化新存储库后，您可以将其用作原始存储库的远程。

# ios - HTTPS 服务不工作

> ID：15010975
> 
> 赞同：2
> 
> 时间：2013-02-21T19:50:42.857
> 
> 标签：ios, objective-c, ios6, https, nsurlrequest

我想使用网络服务登录。

我的网站是基于 https 的。我正在使用以下教程。

```
http://agilewarrior.wordpress.com/2012/02/01/how-to-make-http-request-from-iphone-and-parse-json-result/ 
```

以下代码工作正常。

```
responseData = [NSMutableData data];
NSURLRequest *request = [NSURLRequest requestWithURL:
                         [NSURL URLWithString:@"https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=AIzaSyAbgGH36jnyow0MbJNP4g6INkMXqgKFfHk"]];
[[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

但我的代码是

```
responseData = [NSMutableData data];
NSURLRequest *request = [NSURLRequest requestWithURL:
                         [NSURL URLWithString:@"https:myurl/login?userId=username&password=111111"]];
[[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

它给出了错误

```
Connection failed: Error Domain=NSURLErrorDomain Code=-1202 "The certificate for this server is invalid. You might be connecting to a server that is pretending to be --My URL-- which could put your confidential information at risk." UserInfo=0xa294260 {NSErrorFailingURLStringKey=https://mywebsite/login?userId=username&password=111111, NSLocalizedRecoverySuggestion=Would you like to connect to the server anyway?, NSErrorFailingURLKey=https://mywebsite/login?userId=username&password=111111, NSLocalizedDescription=The certificate for this server is invalid. You might be connecting to a server that is pretending to be --My URL-- which could put your confidential information at risk., NSUnderlyingError=0xa5befc0 "The certificate for this server is invalid. You might be connecting to a server that is pretending to be --My URL-- which could put your confidential information at risk.", NSURLErrorFailingURLPeerTrustErrorKey=<SecTrustRef: 0xa5768d0>} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T20:03:09.190

发生的事情是您的证书无效（从您的应用程序的角度来看）。如果您想冒险，可以添加以下代码。

```
- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace {
    return [protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust];
}

- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
NSArray * trustedHosts = @[@"your domain"];
if ([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust])
    if ([trustedHosts containsObject:challenge.protectionSpace.host])
        [challenge.sender useCredential:[NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust] forAuthenticationChallenge:challenge];

[challenge.sender continueWithoutCredentialForAuthenticationChallenge:challenge];
} 
```

所以证书将被忽略。（记得用您的域替换“您的域”。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:54:19.503

这是您要连接的网站的问题，而不是代码的问题。如果它没有已知的证书，它将被视为安全风险。

# css - Spring MVC 3 & Tiles 2：静态资源不显示，即使在非磁贴页面中

> ID：15010977
> 
> 赞同：2
> 
> 时间：2013-02-21T19:50:43.577
> 
> 标签：css, spring-mvc, spring-security, tiles

我正在尝试使用**Spring MVC 3**和**Spring Security 3配置****Tiles 2.2**并将其集成到 webapp 构建中，但我遇到了一些困难：

 *****   没有显示瓷砖定义。
*   也没有加载静态资源（css、js），即使是从不使用 Tiles 的页面调用的资源。

**注意 1：**当我单击**不使用 Tiles 的 jsp 文件**的 .css 和 .js 链接时，我总是被重定向到索引页面。

**注意 2：**在添加 Tiles 之前，一切正常。

**web.xml**

```
<servlet-mapping>
    <servlet-name>myapp</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>myapp</servlet-name>
    <url-pattern>/myapp/*</url-pattern>
</servlet-mapping> 
```

**myapp-servlet.xml**

```
<mvc:resources mapping="/resources/**" location="/WEB-INF/resources/" />

<!-- JSP View Resolver -->  
<bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/pages/" />
    <property name="suffix" value=".jsp" /> 
</bean>

<!-- Tiles View Resolver -->    
<bean id="tilesViewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver" >
    <property name="viewClass" value="org.springframework.web.servlet.view.tiles2.TilesView"/> 
</bean> 

<bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer" >
    <property name="definitions">
        <list>
            <value>/WEB-INF/tiles.xml</value>
        </list>
    </property>
</bean> 
```

**瓷砖.xml**

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE tiles-definitions PUBLIC
       "-//Apache Software Foundation//DTD Tiles Configuration 2.1//EN"
       "http://tiles.apache.org/dtds/tiles-config_2_1.dtd" >

<tiles-definitions>

  <definition name="baseLayout" template="/WEB-INF/pages/layouts/base-layout.jsp">
    <put-attribute name="header" value="/WEB-INF/pages/tiles/header.jsp" />
    <put-attribute name="body" value="" />
    <put-attribute name="footer" value="/WEB-INF/pages/tiles/footer.jsp" />
  </definition>

  <definition name="template2-tiles" extends="baseLayout">
    <put-attribute name="title" value="FixealaBA" /> 
    <put-attribute name="body" value="/WEB-INF/pages/template2.jsp" />
 </definition>

</tiles-definitions> 
```

**基本布局.jsp**

```
<%@ taglib uri="http://tiles.apache.org/tags-tiles" prefix="tiles"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags" %>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>

<!DOCTYPE html>
<html>
<head>
    <title><tiles:insertAttribute name="title" ignore="true" /></title>
    <script type="text/javascript" src="${pageContext.request.contextPath}/resources/js/myjquery.js"></script>      
    <link type="text/css" href="${pageContext.request.contextPath}/resources/css/mystyle.css" rel="stylesheet">           
</head>
<body>
        <tiles:insertAttribute name="header" />      
        <tiles:insertAttribute name="body" />     
        <tiles:insertAttribute name="footer" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T21:22:23.310

您应该从“myapp-servlet.xml”文件中删除“Jsp View Resolver”，因为您计划仅使用“Tiles View Resolver”。

关于静态资源，您在 baselayout.jsp 中引用静态资源的方式，您必须将静态资源文件夹移到“WEB-INF”文件夹之外。更新 myapp-servlet.xml 文件上的资源位置：

```
<mvc:resources mapping="/resources/**" location="/resources/" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:45:43.283

我让它工作了。Tiles 的实现帮助我发现了我的 webapp 中的一些配置问题。添加 Tiles 后，不仅 Title 不起作用，而且静态资源（css、js、图像）都无法正确显示。我尝试删除 Tiles 并返回之前的状态（当一切似乎都正常时），但资源问题仍然存在。

为了解决资源不显示的问题，我遵循了这些帖子中的一些指南：[使用 Spring，映射到 web.xml 中的根目录，找不到静态资源](https://stackoverflow.com/questions/2129876/using-spring-mapping-to-root-in-web-xml-static-resources-arent-found)， [Servlet 映射 / vs /*以及来自](https://stackoverflow.com/questions/4140448/servlet-mapping-vs)[官方 Maven 页面](http://maven.apache.org/plugins/maven-war-plugin/examples/adding-filtering-webresources.html)的图表。

我**将资源和 jsp 文件夹移出 WEB-INF**并将以下 servlet 添加到**web.xml**以处理所有静态文件：

```
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>/static/*</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>default</servlet-name>    
    <url-pattern>*.js</url-pattern>
    <url-pattern>*.css</url-pattern>
    <url-pattern>*.png</url-pattern>
    <url-pattern>*.gif</url-pattern>
    <url-pattern>*.jpg</url-pattern>
    <url-pattern>*.jpeg</url-pattern>
    <url-pattern>*.eot</url-pattern>
    <url-pattern>*.svg</url-pattern>
    <url-pattern>*.ttf</url-pattern>
    <url-pattern>*.woff</url-pattern>
</servlet-mapping> 
```

最后，我更新了**tiles.xml**中的所有路径以适应新目录。****

# c# - 动态 IFrame 调整大小在 IE 中不起作用？

> ID：15010980
> 
> 赞同：1
> 
> 时间：2013-02-21T19:50:54.550
> 
> 标签：c#, javascript, asp.net, iframe

我有一些代码可以动态调整 iframe 的大小：

```
function autoResizeFrames() {
    frames = document.getElementsByTagName("iFrame");
    window.setInterval("autoresize_frames()", 400);
}

function autoresize_frames() {

    for (var i = 0; i < frames.length; ++i) {
        if (frames[i].contentWindow.document.body) {
            var frames_size = frames[i].contentWindow.document.body.offsetHeight;
            if (document.all && !window.opera) {
                frames_size = frames[i].contentWindow.document.body.scrollHeight;
            }
            frames[i].style.height = frames_size + 'px';
        }
    }
} 
```

此功能在 Firefox 和 Chrome 中运行良好，但在 IE 10 和 9 中具有 mo 效果。

这是我有一个 IFrame 的地方

```
<div id="projectModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="projectModalLabel"
            aria-hidden="true">
            <div class="modal-header">
                   <button type="button" runat="server" onserverclick="btnClose_Click"  class="close" aria-hidden="true">
                    ×</button>
                <h3 id="projectModalLabel">Edit Project</h3>
            </div>
            <div class="modal-body">
                <iframe src="" style="width: 100%; height: 200px; border: none;" frameborder="0" id="projectFrame" name="projectFrame" scrolling="no" allowtransparency="true"></iframe>
            </div>
            <div class="modal-footer">
                      <button type="button" runat="server" onserverclick="btnClose_Click"  class="btn" aria-hidden="true">
                    Close</button>
            </div>
        </div> 
```

为什么它在除 IE 之外的所有地方都有效？我认为javascript无处不在？

谢谢

它说：

```
SCRIPT5007: Unable to get property 'document' of undefined or null reference 
kezcommon.js, line 62 character 5

if (frames.contentWindow.document.body) { 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T20:17:14.760

`window.frames`是一个本地 DOM 集合，并且您正在分配一个具有相同名称的节点列表。不知何故，IE 搞砸了这两个`frames`，它们并不相似。

`autoresize_frames()`似乎使用`window.frames`集合而不是`frames`节点列表（定义在 中`autoResizeFrames()`）。但是，当通过此集合访问时，IE 中`iframe`没有`contentWindow`或可用，因为在 s中包含实际对象。`contentDocument``window.frames``window``iframe`

您需要直接访问`frames[i].document`或`frames[i]`在`window`.`iframe`

快速修复将使用其他名称而不是`frames`节点列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:57:41.477

尝试

```
window.setInterval(autoresize_frames, 400); 
```

只是看看设置回调的替代方法是否有效。您可能还需要将 autoresize_frames() 函数放在 autoResizeFrames() 函数之上，以确保它在被 setInterval() 调用之前存在于内存中。

# javascript - 自定义属性仅适用于 element.getAttribute("attribute") 但不适用于 "element.attribute"

> ID：15010981
> 
> 赞同：9
> 
> 时间：2013-02-21T19:50:59.220
> 
> 标签：javascript, getattribute, custom-attribute

我刚刚注意到，如果我为 html 元素提供自定义属性，例如：

```
<input type="button" id="my_button" custom_attr="custom_attr_text" value="value_text" /> 
```

然后我可以像这样检索它：

```
document.getElementById("my_button").getAttribute("custom_attr"); 
```

它会回来`"custom_attr_text"`，但如果我这样做

```
document.getElementById("my_button").custom_attr; 
```

然后它返回`undefined`！

我还注意到，使用内置属性（例如`value`或`id`），上述两种方法都可以正常工作！有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-21T19:54:08.340

只有某些标准属性直接映射到属性。这不是非标准（自定义）属性的定义行为。

使用自定义属性的前向兼容方式是在它们前面加上`data-`.

```
<input ... data-custom_attr="custom_attr_text" ... /> 
```

然后它们在兼容 HTML5 的浏览器中可用，如下所示：

```
element.dataset.custom_attr 
```

但在旧版浏览器中，您仍然需要使用`.getAttribute()`.

# linux - 如果文件名不包含“ls”和“grep”等系统程序名称，我需要编写一个shell脚本以使文件默认可执行

> ID：15010986
> 
> 赞同：-2
> 
> 时间：2013-02-21T19:51:40.523
> 
> 标签：linux, shell

**xprog（程序名称）** 检查这是否是程序的合适名称，如果是，则启动编辑器并确保默认情况下文件是可执行的。

**不允许使用像“ls”这样的系统程序名称使用“which”来查看命令是否存在检查返回码“$？” touch (program) 使新的 prog 可执行启动编辑器**

测试

xprog grep - 拒绝 xprog newprog - 好的，已创建，可执行，编辑器已启动

我对shell脚本真的很陌生，任何帮助都将不胜感激，如果我得到我的全部答案，那就太好了，但任何建议都会对我有很大帮助。我一直在寻找大约 2 个小时的答案，不幸的是我似乎找不到开始的地方。以上是我要遵循的指导方针，我理解描述是什么，我似乎无法找到在 shell 脚本上实现它的方法。多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:55:22.697

```
#!/bin/bash

for i; do
    type &>/dev/null "$i" || { chmod +x "$i"; $EDITOR "$i"; }
done 
```

家庭作业/菜鸟版：

```
#!/bin/bash

for i in $@; do
    if which &>/dev/null "$i"; then
        true
    else
        chmod +x "$i"
        $EDITOR
    fi
done 
```

总菜鸟版本：

```
#!/bin/bash

for i in $@; do
    which &>/dev/null "$i"
    if [[ $? == 0 ]]; then
        chmod +x "$i"
        $EDITOR
    fi
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:57:42.223

测试`which`，检查返回码（隐含在 中`if`），触摸，使可执行，启动编辑器。

```
if which $1 > /dev/null; then
    echo "rejected"
    exit 1
else
    touch $1
    chmod +x $1
    ${EDITOR} $1
fi 
```

# ruby-on-rails - Devise::TestHelpers 文档不清楚 Devise.mappings[:mapping] 用法

> ID：15010997
> 
> 赞同：7
> 
> 时间：2013-02-21T19:52:14.453
> 
> 标签：ruby-on-rails, rspec, devise

在使用 Devise TestHelpers 的文档中，它声明使用诸如...

```
@request.env["devise.mapping"] = Devise.mappings[:admin] 
```

或者

```
@request.env["devise.mapping"] = Devise.mappings[:user] 
```

...让 Devise 知道要使用哪个资源或映射，因为控制器测试绕过 routes.rb。我不清楚这些映射是什么。在这方面我没有设置任何特殊的东西，我也没有想到具体的映射。我有用户、管理员、炼油厂和超级用户角色，一个 la Rolify，我使用 Cancan 是因为它的功能。

你能澄清一下吗？...也许资源名称就是我们的意思？

TIA。-马特

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T19:52:14.453

由于等待答案，我的研究似乎表明文档中指示的映射实际上是指附加设计所针对的资源。

*以下是我的推测，但它似乎有效，并且与我对代码的扫描一致。* 例如，如果您只有一个名为 User 的资源，您已使用 Devise 进行身份验证，则只需在控制器规范设置中使用以下内容：

```
@request.env["devise.mapping"] = Devise.mappings[:user] 
```

但是，如果您有多个要对其进行身份验证的模型，例如用户和管理员，则需要分别使用以下内容。

```
@request.env["devise.mapping"] = Devise.mappings[:user] 
```

和

```
@request.env["devise.mapping"] = Devise.mappings[:admin] 
```

如果您有更好的意见，请随时更新此问题/答案。