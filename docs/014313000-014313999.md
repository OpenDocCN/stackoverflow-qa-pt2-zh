# StackOverflow 问答 14313000-14313999

# javascript - 如果选择隐藏，Select2 无法正确计算“已解析”宽度

> ID：14313001
> 
> 赞同：47
> 
> 时间：2013-01-14T03:29:06.303
> 
> 标签：javascript, jquery, css, twitter-bootstrap, jquery-select2

我正在使用 Twitter 引导程序和[出色的 Select2 插件](http://ivaynberg.github.com/select2/)。

这些工作得很好，我意识到你需要`{width: 'resolve'}`在启动 Select2 时进行设置，否则它看起来会一团糟！。

但是我的一个选择有问题，如下图所示，`Referee Type`选择的宽度不正确。

这是由于该字段最初是隐藏的，并且只有在“*组*”字段中选择了“*裁判”时才可见。*

 *那么，我该如何解决这个问题？

![输入](../Images/8edd8d98d1f695670e0fe0a246082e34.png)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2016-01-14T01:41:41.267

`Select 2`只要您在`select`标签中设置它，它就足够聪明，可以重新计算它的大小。像这样：

`<select style="width: 100%"></select>`

类上的 CSS 格式不起作用！

在“[响应式设计 - 百分比宽度](https://select2.github.io/examples.html)”中阅读更多内容

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-19T05:20:43.570

`<select>`您可以像这样设置元素中的宽度：

```
<select style="width:260px"> 
```

直到找到所需的宽度。其实select2插件官方网站上的例子就是这样完成的。

但是，如果您打算远离内联样式，则始终可以简单地覆盖 select2 的 CSS 并以生成的容器为目标。

```
.select2-container {
  width: 260px;
} 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-08-02T09:53:41.440

我用简单的 CSS 解决了我的类似问题：

```
.select2-container {
    width: 100% !important;
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-07-19T09:22:51.673

不是`select2()`在页面加载时调用Referee Type，而是`select2`在第一次显示Referee Type后调用。这样，选择将是可见的（具有适当的宽度），并且该`'width': 'resolve'`选项应该可以工作。如果您提供一个小的 jsfiddle 示例，则更容易指出这一点。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-01-29T03:14:33.173

`select`设置宽度为 100% 的元素的样式属性

```
<select class="js-example-responsive" style="width: 100%"></select> 
```

请参阅[响应式设计 - 百分比宽度](https://select2.github.io/examples.html#templating)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-12-17T06:31:38.533

```
.select2-container {
  width: 100% !important;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-01-10T09:50:46.190

当您取消隐藏附加了 Select2 的控件时执行此操作：

```
//refresh select2 controls (to correct offscreen size bad calculation)
$("SELECT.select2-offscreen").select2(); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-05-17T12:44:51.763

您可以将单击事件绑定到打开隐藏元素的元素并在那里设置 select2 宽度。为我工作，这很简单。我使用了单击事件，因为仅使用“文档准备就绪”进行操作是行不通的。

```
$('#click-me').on('click', function(event) { 
   $('.select2').select2({width: '100%'});
 } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-12-11T05:42:58.850

我首选的解决方案是停止`select2`分配这些`width`并让它们自动进行。在 中评论以下内容`select2.full.js`：

对于容器：

```
 Select2.prototype._placeContainer = function ($container) {
    $container.insertAfter(this.$element);

      //##!!
      /*
    var width = this._resolveWidth(this.$element, this.options.get('width'));

    if (width != null) {
      $container.css('width', width);
    }*/
  }; 
```

对于容器内的搜索：

```
 Search.prototype.resizeSearch = function () {

    //##!!
    /*
    this.$search.css('width', '25px');

    var width = '';

    if (this.$search.attr('placeholder') !== '') {
      width = this.$selection.find('.select2-selection__rendered').innerWidth();
    } else {
      var minimumWidth = this.$search.val().length + 1;

      width = (minimumWidth * 0.75) + 'em';
    }

    this.$search.css('width', width);
    */
  };

  return Search;
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-21T07:14:47.487

根据[文档](https://select2.org/appearance#container-width)，您可以在初始化设置中添加适当的宽度：

```
$(".js-example-responsive").select2({
    width: '100%' // or 'resolve' or 'style' or 'element' - see docs
}); 
```

对我来说就像一个魅力，而其他食谱没有帮助。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2018-04-13T15:36:27.127

这对我有用

```
.select2-container  {
    width: 100% !important;
} 
```

也是固定宽度

```
.select2-container  {
    width: 300px !important;
} 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-08-21T02:57:35.160

让它工作的黑客是运行：

`$('.filter-modal select').css('width', '100%');` 前 `$('select').select2().`

[https://github.com/select2/select2/issues/4269](https://github.com/select2/select2/issues/4269)

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2018-05-18T08:27:30.800

Select2 有一个奇怪的错误，它不能以正确的方式“解决”隐藏的 Select2 元素。它不起作用，`width: "resolve"`因为这已经是默认值。相反，解决方法是显示 select2 并在声明后一秒钟突然隐藏它们。

```
$("#div_container_of_select2").show(); //make it visible for a millisecond
$("select[name=referee_type]").select2(); //declare Select2
$("#div_container_of_select2").hide(); //back to darkness 
```

这将正确呈现 select2。

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2016-06-09T13:06:54.220

```
$("span.select2").css("width", "100%"); 
```*

# javascript - 找出带有萤火虫或其他元素的元素调用了什么javascript函数？

> ID：14313006
> 
> 赞同：0
> 
> 时间：2013-01-14T03:29:42.570
> 
> 标签：javascript, firebug, nextgen-gallery

我有加载图像的 NextGEN javascript 图像库。我需要找出加载图像以插入跟踪代码的函数。

什么没有奏效：

1.  在整个代码中搜索元素的名称。
2.  Firebug 命令行不执行任何命令或正常工作，例如 console.trace 等。

我正在寻找“showImage”或等效功能。有很多可能性，我宁愿通过点击图像在萤火虫中查明——这样我就可以确定是哪个功能，而不是猜测。

有没有办法按元素查看 Javascript 代码？

# javascript - Javascript 根本不存储变量。每个变量“未定义”

> ID：14313007
> 
> 赞同：1
> 
> 时间：2013-01-14T03:29:46.087
> 
> 标签：javascript, variables, undefined

我想知道是否有人可以帮助我。问题是 javascript 没有存储任何变量并且正在运行。

```
<script type="text/javascript" language="javascript">

var name = document.getElementById('text_field').value;

var test = "foobar";

function test_function(){
alert("hello"+test);    
}

alert('test '+test);

</script> 
```

第二个警报根本没有发生，当我单击按钮触发 test_function() 时，它会发出 "helloundefined" 警报。我只是不知道该怎么办，它工作正常，然后突然停止了。我应该提到这是在一个 php 页面上，但这不应该有所作为。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T03:34:52.403

如果没有 ID 为 text_field 的元素，则其余代码将不会运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T03:35:34.367

尝试改变：

```
var name = document.getElementById('text_field').value; 
```

到

```
var name = document.getElementById('text_field').value || "some default value; 
```

或者

```
var name;
if(document.getElementById('text_field')) { 
  name = document.getElementById('text_field').value 
} else { 
  name = "some value" 
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-14T03:35:52.843

在没有看到其余代码的情况下，罪魁祸首很可能是这一行：

```
var name = document.getElementById('text_field').value; 
```

如果脚本块在 'text_field' 存在之前运行，你会得到一个错误并且 javascript 的其余部分不会执行。结果是您看不到警报，并且永远不会设置测试变量。您需要在 DOM 存在后调用代码，方法是在 onload（或 jQuery 中的就绪函数）中运行它，或者将脚本块放在页面末尾。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-14T03:38:00.313

将该脚本块移动到页面底部。text_field 尚不存在。如果您在浏览器中调试，请使用 Chrome 或 Firefox，并使用开发工具栏中的“控制台”窗口。它会告诉你这样的事情......

# php - 带有所有小写 XML 元素和属性的 WP RSS Feed 输出

> ID：14313017
> 
> 赞同：0
> 
> 时间：2013-01-14T03:31:40.150
> 
> 标签：php, xml, wordpress, apache, rss

我们的 Wordpress RSS 提要有些古怪。起初我们注意到发布日期被输出为 1969 年 12 月 31 日。这当然是向 PHP 的 Date() 传递无效日期的副作用。

在查看为提要呈现的 XML 时，我注意到所有 XML 元素和属性都被强制小写。例如，`<pubDate>`显示为`<pubdate>`和`<lastBuildDate>`显示为`<lastbuilddate>`等。所有元素和属性都被强制为全部小写。

我所看到的没有其他数据受到影响。实际数据内容以大写和小写形式显示。只有 XML 元素名称及其属性受到影响。

这就解释了为什么我们看到 1969 年 12 月 31 日是发布日期……但我离解决方案还差得远。

我认为 WP Dashboard 中没有设置会影响这一点。我怀疑它与 Apache HTTP 服务器有什么关系。PHP 更有可能存在与 XML 相关的设置，但这只是猜测。

有没有人知道什么会导致 XML 元素名称/属性被强制为全小写？

谢谢。

# python - 在 Ubuntu 中与 EPD python 一起安装 NLTK

> ID：14313025
> 
> 赞同：5
> 
> 时间：2013-01-14T03:32:45.020
> 
> 标签：python, installation, ubuntu-12.04, nltk, epd-python

我最近从 Matlab/Windows 转换到 Python/Ubuntu。我已经安装了 EPD python，它是一个包含大多数科学软件包的 python 发行版，到目前为止我非常高兴。接下来，我需要安装 NLTK 来进行一些文本分析，并按照 nltk 网页上的说明进行操作。问题是所有软件包（pyyaml，nltk 等）都安装到

```
/usr/local/lib/python2.7 
```

但是，我已经更改了我的 .bashrc（在 EPD 的安装后说明中指定）并在其末尾添加了以下行。

```
export PATH=/home/myname/epd/bin:$PATH 
```

和我的 python shell 中的 sys.path 返回

```
['',
 '/home/myname/epd/bin',
 '/home/myname/epd/lib/python2.7/site-packages/pandas-0.10.0-py2.7-  linux-i686.egg',
 '/home/myname/epd/lib/python27.zip',
 '/home/myname/epd/lib/python2.7',
 '/home/myname/epd/lib/python2.7/plat-linux2',
 '/home/myname/epd/lib/python2.7/lib-tk',
 '/home/myname/epd/lib/python2.7/lib-old',
 '/home/myname/epd/lib/python2.7/lib-dynload',
 '/home/myname/epd/lib/python2.7/site-packages',
 '/home/myname/epd/lib/python2.7/site-packages/PIL',
 '/home/myname/epd/lib/python2.7/site-packages/IPython/extensions'] 
```

非常感谢有关如何将新的 python 包安装到正确路径的任何帮助。如果您有时间，请详细说明为什么会发生这种情况以及我做错了什么。非常感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T11:44:29.443

我最近安装了 NLTK 和 PyYAML，因为我正在研究“使用 Python 进行自然语言处理”。我惊喜地发现两者都可以通过 EPD 包管理器[enpkg 获得](https://support.enthought.com/entries/22415022)（尽管 NLTK 并未在 Enthought 网站上列为可用）。

```
$ enpkg -s pyyaml
Name                   Versions           Note
------------------------------------------------------------
PyYAML                 3.9-2              
                       3.10-1      

$ enpkg -s nltk
Name                   Versions           Note
------------------------------------------------------------
nltk                   2.0.1rc1-1         
                       2.0.1rc1-2         
                       2.0.1-1 
```

您可以使用以下方式安装两者：

```
$ enpkg pyyaml
$ enpkg nltk 
```

你可以走了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T09:51:41.333

在 ubuntu 中设置 python 环境有两个不错的选择：

1.  使用 ubuntu 软件包，就像 Thorsten 建议的那样。

2.  在 virtualenv 中使用[pip包管理器。](http://pypi.python.org/pypi)通过这种方式，您可以设置多个环境并从一个环境跳到另一个环境。可以将[virtualenv](http://www.virtualenv.org/en/latest/)配置为还包括系统范围的 ubuntu 包。

    nltk 作为 pip 包存在：http: [//pypi.python.org/pypi/nltk/2.0.4](http://pypi.python.org/pypi/nltk/2.0.4)

    当链接到 c 库时，pip 在 ubuntu 上会遇到一些问题，因为 ubuntu 将它们放在安装脚本看不到的地方。确保还安装依赖包的 -dev 版本，因为它们包含 pip 需要的头文件，并将库从 /usr/lib/*你的 linux 架构*/lib/ 复制或链接到 /usr/local/lib 所以那个点子可能会找到他们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T15:36:31.063

对于 NLTK 中的科学 Python 模块，通常`scipy`具有足够`numpy`的基本科学功能并涵盖统计数据。NLTK 安装站点`pip`也强烈推荐。[http://nltk.org/install.html](http://nltk.org/install.html)

1.  打开 Finder>Applications>Utilities>Terminal 并输入 python -V 以找出安装的 Python 版本

2.  安装 Setuptools：从[http://pypi.python.org/pypi/setuptools](http://pypi.python.org/pypi/setuptools)下载对应版本的 Setuptools （滚动到底部，选择包含正确版本号且扩展名为 .egg 的文件名）。通过键入 sudo sh Downloads/setuptools-...egg 来安装它，并给出下载文件的位置。

3.  安装 Pip：运行 sudo easy_install pip

4.  安装 Numpy（可选）：运行 sudo pip install -U numpy

5.  安装 PyYAML 和 NLTK：运行 sudo pip install -U pyyaml nltk

6.  测试安装：运行python然后输入import nltk

# tomcat - 如何在 IntelliJ 的远程 Tomcat 运行配置中启用“更新”操作选项？

> ID：14313026
> 
> 赞同：0
> 
> 时间：2013-01-14T03:32:54.847
> 
> 标签：tomcat, intellij-idea

鉴于：

*   智能 11
*   具有 Web 和 Spring 方面的项目。
*   远程 Tomcat 运行配置

运行配置对话框上应该有**执行“更新”操作**选项，但没有！我如何让它出现？

这是我的远程 tomcat 运行配置对话框：

![在此处输入图像描述](../Images/96c3e81093fd0c119ad31858e4e264a6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:44:10.137

“更新时”配置取决于您在服务器上部署的工件类型以及服务器是本地还是远程。

检查您是否首先选择了要部署的工件，然后更新配置应该变得可见。

来自 jetbrains[文档](http://www.jetbrains.com/idea/webhelp/run-debug-configuration-tomcat.html)：

> 在远程服务器的运行/调试配置中，可用的应用程序更新选项仅限于打包工件。此外，重新启动服务器选项不可用。

HIH

# jquery - jquery中的可重用函数，如何传递调用项的值/id？

> ID：14313032
> 
> 赞同：2
> 
> 时间：2013-01-14T03:34:05.910
> 
> 标签：jquery

我有一个大约 3 项的清单。我想创建一个 jquery 函数，只要单击其中一个列表项就会触发。然后该函数应该能够使用 html 列表项的值或属性来执行某些操作。因此，在下面的代码中，当我单击按钮 2 时，我会收到一个显示值 2 的警报框。

```
<ul>
 <li class="myclick" id="1">Test Me</li>
 <li class="myclick" id="2">Test Me 2</li>
 <li class="myclick" id="3">Test Me 3</li> 
```

```
 $.fn.myFunction = (function() {
          alert(this.id);
          });         
 $(function () {
       $(".myclick").click(function(){
                $().myfunction("Test");
      }); 
```

我知道这是一个非常基本的问题，但我对 Jquery 非常陌生，并且正在尝试自学。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T03:37:05.927

## *[jsBin 演示](http://jsbin.com/ayokeb/1/edit)*

```
// PLUGIN method
$.fn.myFunction = (function() {
   this.click(function(){
          alert(this.id);
   });
});   

$(function(){  // DOM READY

    $(".myclick").myFunction(); // BIND PLUGIN TO .myclick elements

}); 
```

PS，如果有一天你害怕看到`prototype`某处的使用，......现在试试，而不是`fn`使用`prototype`：D

比您还可以使用*命名函数：*

```
function alertID() {
   alert(this.id);
}   

$(function(){

    $(".myclick").click( alertID );

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T03:37:17.483

您不必扩展 jQuery 来执行此操作.. 您可以使用任何旧的通用函数：

```
myFunction = function () { alert(this.id); }
$(".myclick").on('click', myFunction); 
```

这调用`myFuntion`使用单击的元素作为上下文。

如果你想使用你已经拥有的代码，你只需要使用`$(this).myFunction();`而不是`$().myFunction`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-14T04:31:04.797

首先，**你不需要**为这个小任务扩展 jQuery。

这是你可以做的..

```
//looping through each li in ul
$('ul li').each(function(){
    //attach click event to li this refers to li here
    $(this).click(function(){
      //to alert ID of this list this refers to li here
     alert($(this).attr('id'));
      // to alert Text or html within li
     alert($(this).html());
    });
}); 
```

希望这可以帮助

# c++ - CreateNamedPipe 导致 ERROR_ACCESS_DENIED？

> ID：14313036
> 
> 赞同：2
> 
> 时间：2013-01-14T03:34:51.160
> 
> 标签：c++, winapi, named-pipes

我需要为客户端和服务器（在同一主机中）之间的通信创建一个命名管道，这是代码：

```
WCHAR wszPipeName[MAX_FILE_LENGTH];
swprintf_s(wszPipeName, MAX_FILE_LENGTH, L"\\\\.\\pipe\\TEST%d", uniqueID);
pipe = CreateNamedPipe(
           wszPipeName, // name of the pipe
           PIPE_ACCESS_DUPLEX,
       PIPE_TYPE_MESSAGE | PIPE_READMODE_MESSAGE | PIPE_NOWAIT,
       1,
           MAX_MSG_SIZE, 
           MAX_MSG_SIZE , //inbound buffer
           MAX_READ_DATA_TIMEOUT,
           NULL // use default security attributes
       ); 
```

处理程序返回的始终是 INVALID_HANDLE_VAULE，错误是 ERROR_ACCESS_DENIED。

这里有什么问题吗？它在 Windows 7/8 上运行。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-08-01T20:15:03.217

这是 Python 代码，但这会为本地用户设置一个安全描述符并拒绝远程：

```
dacl = ACL()

# Deny NT AUTHORITY\NETWORK SID
sid = CreateWellKnownSid(WinNetworkSid)
dacl.AddAccessDeniedAce(ACL_REVISION, GENERIC_ALL, sid)

# Allow current user SID
token = OpenProcessToken(GetCurrentProcess(), TOKEN_QUERY)
sid = GetTokenInformation(token, TokenUser)[0]
dacl.AddAccessAllowedAce(ACL_REVISION, GENERIC_READ | GENERIC_WRITE, sid)

security_descriptor = SECURITY_DESCRIPTOR()
security_descriptor.SetSecurityDescriptorDacl(True, dacl, False)

security_attributes = SECURITY_ATTRIBUTES()
security_attributes.SECURITY_DESCRIPTOR = security_descriptor

pipe = CreateNamedPipe(
    <your other params here>
    security_attributes
) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T20:57:42.010

找到原因了，是因为安全限制。提供合适的安全描述符后，它就可以工作了！

# c# - 从 WebBrowseTask 返回时杀死一个应用程序

> ID：14313044
> 
> 赞同：0
> 
> 时间：2013-01-14T03:35:55.007
> 
> 标签：c#, windows-phone-7

我做了一个小应用程序，我有一个按钮而不是 pin 来通过 xaml 启动网络博客，所以当瓷砖是 pin 时，它会转到 xaml，它会自动重定向到博客`WebBrowserTask`。我的问题是，如果他们从网页按下后退按钮，他们会转到 xaml，我希望他们直接进入开始菜单，所以我正在寻找一种方法来杀死应用程序，当他们从

xml代码是

```
private void WebPages_Loaded(object sender, RoutedEventArgs e)
    {
        try
        {
            WebBrowserTask task = new WebBrowserTask();
            task.Uri = new Uri(NavigationContext.QueryString["uri"]);
            task.Show();
        }
        catch (KeyNotFoundException)
        {
            MessageBox.Show("No URI was passed to the app.");
        } 
```

}

我不知道这是否可能，但如果有人知道我会很高兴。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:38:05.397

您可能希望在 WebBrowser 控件中加载您的博客，而不是运行 WebBrowseTask。然后，如果需要在 OnBackKeyPress 事件中清除返回堆栈。如果您打开 WebBrowserTask，用户将不得不回击以恢复您的应用程序，然后再次回击以返回开始菜单。恢复后您将无法自动退出您的应用程序。它违反了市场准则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T03:50:26.267

试试这个：[Windows Phone 7 close application](https://stackoverflow.com/questions/3659195/windows-phone-7-close-application) to kill an app，你可能想试试这个解决方案：

```
if (NavigationService.CanGoBack)
{
 while (NavigationService.RemoveBackEntry() != null)
 {
     NavigationService.RemoveBackEntry();
 }
} 
```

# gcc - 仅使用 getpid() 和 gettimeofday() 实现随机数生成器？

> ID：14313048
> 
> 赞同：0
> 
> 时间：2013-01-14T03:36:42.297
> 
> 标签：gcc, random-sample

我正在使用 gcc 编译器来实现仅使用 getpid() 和 gettimeofday() 的随机数生成器。这是我的代码

```
#include <stdio.h>
#include <sys/time.h>
#include <sys/time.h>
#include <time.h>
#include <stdlib.h>

int main(int argc, char **argv)
{
    struct timeval tv;
    int count;
    int i;
    int INPUT_MAX =10;
    int NO_OF_SAMPLES =10;
    gettimeofday(&tv, NULL); 
    printf("Enter Max: \n");
    scanf("%d", &INPUT_MAX);
    printf("Enter No. of samples needed: \n");
    scanf("%d", &NO_OF_SAMPLES);
    /*printf("%ld\n",tv.tv_usec);
    printf("PID  :%d\n", getpid());*/
    for (count = 0; count< NO_OF_SAMPLES; count++) {
    printf("%ld\n", (getpid() * tv.tv_usec) % INPUT_MAX + 1);
    for (i = 0; i < 1000000; ++i)
    {
        /* code */
    }
    }
    return 0;
} 
```

我为延迟目的提供了一个内部 for 循环，但我得到的结果总是相同的。像这样

```
./a.out 
Enter Max: 
10
Enter No. of samples needed: 
10
1
1
1
1
1
1
1
1
1
1 
```

请纠正我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:27:28.770

将 gettimeofday 放入循环中。看看 getpid() 是否可以被 INPUT_MAX + 1 整除，你总是会得到相同的答案。相反，您可以将 getpid()（虽然 () 没有任何意义）添加到 tv.tv_usec。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T07:42:20.500

`getpid()`在程序执行期间是常数，所以你也得到常数值。

但即使您`gettimeofday()`在循环内使用，这也可能无济于事：

1.  gcc 可能会优化您的延迟循环。
2.  即使它没有被优化掉，延迟也会非常相似，你的值也不会很随机。

我建议您查找“线性同余生成器”，以获取生成更多随机数的简单方法。

# algorithm - 在由 BDD 表示的关系中查找唯一元组

> ID：14313049
> 
> 赞同：2
> 
> 时间：2013-01-14T03:36:43.770
> 
> 标签：algorithm, binary-decision-diagram

假设我使用 BDD 来表示关系中的元组集。为简单起见，考虑具有 0 或 1 值的元组。例如：R = {<0,0,1>, <1,0,1>, <0,0,0>} 表示 BDD 中的三元关系，它具有三个变量，例如 x、y 和 z（一个用于每个元组的元素）。我想要的是实现一个操作，给定一个像 R 的 bdd 和一个多维数据集 C 在 C 中的变量被抽象时返回包含唯一元组的 R 的子集。

例如，如果 C 包含变量 x（表示每个元组中的第一个元素），则函数的结果必须是 {<0,0,0>}。请注意，当 x 被抽象出来时，元组 <0,0,1> 和 <1,0,1> 变得“相同”。

现在假设 R = {<0,0,1>, <1,0,1>, <0,0,0>, <1,0,0>} 我们想再次抽象 x。在这种情况下，我希望结果是常量 false，因为在抽象 x 之后 R 中没有唯一的元组。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-02T11:29:02.190

这可以通过三个简单的步骤完成：

*   使用要抽象的变量的限制值制作两个 BDD：
    *   R[x=0] = 用 x = 0 限制 R
    *   R[x=1] = 用 x = 1 限制 R
*   对这个新的 BDD 应用*XOR操作*
    *   Q = R[x=0] xor R[​​x=1]
*   枚举Q的所有模型

将此应用于您的示例：

*   R = {<0,0,1>, <1,0,1>, <0,0,0>} = (¬x ∧ ¬y ∧ z) ∨ (x ∧ ¬y ∧ z) ∨ (¬x ∧ ¬y ∧ ¬z)
*   R[x=1] = {<0,1>} = (¬y ∧ z)
*   R[x=0] = {<0,1>,<0,0>} = (¬y ∧ z) ∨ (¬y ∧ ¬z)
*   Q = R[x=1] xor R[​​x=0] = (¬y ∧ ¬z)

这里的直觉是 XOR 将取消两个 BDD 中出现的条目。
这很容易（但具有指数复杂性）推广到具有几个抽象变量的情况。

# codeigniter - CodeIgniter - 未定义的变量 & 试图获取非对象的属性

> ID：14313059
> 
> 赞同：0
> 
> 时间：2013-01-14T03:38:25.257
> 
> 标签：codeigniter, variables, controller, undefined

我正在尝试从我的控制器中的 API 获取数据并将数据传递给视图。但它似乎不起作用并导致错误：

**消息：未定义变量：数据**和 **消息：试图获取非对象的属性**

当我调用变量 $data 时，这两个错误都发生在我的 View.php 中。

这是与我想要获取的数据相关的控制器的一部分

```
$jdwl['jadwal'] = $this->bolalob->api('schedules/bydate|'.$start.'/'.$end.'/10');
$data['jadwal'] = $this->load->view('jadwal', $jdwl, TRUE);

$template['content'] = $this->load->view('jadwal',$data, TRUE);
$this->load->view('template', $template); 
```

这是我的观点

```
<div class="float-left first-column">
    <div class="box box-shadow red round-top round-bottom">
      <div class="title-box"><strong>JADWAL</strong> TV</div>
      <ul class="text-center no-padding">
        <?php if ($data->data == 'no data') { ?>
        <li class="jadwal-tv"><strong>Belum ada jadwal</strong>
        </li>
        <?php } else { ?>
        <?php foreach ($data->data as $key=>$row) { ?>
        <?php if ($key == 0) { ?>
        <li class="jadwal-tv"><strong><?php echo $row->team_1->name; ?></strong><br />VS<br /><strong><?php echo $row->team_2->name; ?></strong><br /><span><?php echo $row->television; ?> <?php echo date('d/m/y H:i', $row->pubdate); ?> WIB</span></li>
        <?php } else { ?>
        <li class="side-padding">
          <strong><?php echo $row->team_1->name; ?></strong> vs <strong><?php echo $row->team_2->name; ?></strong>
          <br />
          <?php echo $row->television; ?> <?php echo date('d/m/y H:i', $row->pubdate); ?> WIB
        </li>
        <?php } ?>
        <?php if ($key == 5) break; ?>
        <?php } ?>
        <?php } ?>
      </ul>
    </div>    
  </div> 
```

错误发生在第 5 行和第 9 行的 $data 上。我用谷歌搜索它并尝试在我的视图中使用 $data['jadwal'] 而不是 $data 但我似乎也没有工作。

任何人都可以帮助我吗？感谢：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T04:23:45.773

在您看来，无需访问`$data`数组。您可以直接将数据键称为变量。

前任：

**在控制器中**

```
$data['myVar']="Some string";
$this->load->view('viewName',$data); 
```

**在视图中**

```
echo $myVar; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T04:24:46.573

尝试使用以下视图页面..

```
<div class="float-left first-column">
<div class="box box-shadow red round-top round-bottom">
    <div class="title-box"><strong>JADWAL</strong> TV</div>
    <ul class="text-center no-padding">
        <?php if (empty($jadwal)) { ?>
            <li class="jadwal-tv"><strong>Belum ada jadwal</strong>
            </li>
        <?php } else { ?>
            <?php foreach ($jadwal as $key => $row) { ?>
                <?php if ($key == 0) { ?>
                    <li class="jadwal-tv"><strong><?php echo $row->team_1->name; ?></strong><br />VS<br /><strong><?php echo $row->team_2->name; ?></strong><br /><span><?php echo $row->television; ?> <?php echo date('d/m/y H:i', $row->pubdate); ?> WIB</span></li>
                <?php } else { ?>
                    <li class="side-padding">
                        <strong><?php echo $row->team_1->name; ?></strong> vs <strong><?php echo $row->team_2->name; ?></strong>
                        <br />
                        <?php echo $row->television; ?> <?php echo date('d/m/y H:i', $row->pubdate); ?> WIB
                    </li>
                <?php } ?>
                <?php if ($key == 5) break; ?>
            <?php } ?>
        <?php } ?>
    </ul>
</div> 
```

# python - 如何在 GTK+2 的表格中拥有完整的彩色背景？

> ID：14313060
> 
> 赞同：1
> 
> 时间：2013-01-14T03:38:42.633
> 
> 标签：python, gtk, pygtk, gtk2, gtktreeview

我采用的方法是

```
self.table.insert_column_with_attributes(-1, 'Node IP Address', IPAdd, text=0, background=3) 
```

但我意识到单元格之间的间隙，或者更确切地说，边界，不应用背景颜色。有没有一种很好的方法来完全着色该部分？

![带背景颜色的表格](../Images/3710b6995f2ca921522e5c3e92b312bf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T00:21:56.507

尝试设置文本渲染器的“单元格背景”属性，而不是设置列的背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:43:23.933

尝试使用以下代码示例

```
treeview.set_model(model)
col = gtk.TreeViewColumn("Header")
cell = gtk.CellRendererText()
treeview.append_column(col)
col.pack_start(cell, 0)
col.set_attributes(cell, text=0) 
cell.set_property('background', '#color') 
```

更多 gtk.CellRendererText 属性：[CellRendererText](http://www.pygtk.org/docs/pygtk/class-gtkcellrenderertext.html)

# ruby-on-rails-3 - 是否可以重新皮肤 activeadmin 以使用 JQuery-Mobile？

> ID：14313062
> 
> 赞同：0
> 
> 时间：2013-01-14T03:39:19.137
> 
> 标签：ruby-on-rails-3, jquery-mobile, activeadmin

我有一个使用 JQueryMobile 的应用程序，它也广泛使用了很棒的 ActiveAdmin。虽然我喜欢 ActiveAdmin 界面的易用性和简单性，但我真的希望与我的应用程序的其余部分保持一致。

是否有可能（即使用标准 ActiveAdmin 并且不修改其源代码）重新设计 ActiveAdmin 以使用 JQuery-Mobile 的外观和感觉？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:24:21.533

很有可能重新设计 ActiveAdmin，尽管这需要做一些工作，而且可能有很多东西不能完美地与移动演示相匹配，特别是如果你不想进入覆盖标记渲染。

您总是可以简单地开始将您自己的样式添加到为您生成的 active_admin.css 文件中。如果您想完全不使用任何 ActiveAdmin 样式，您可以注释掉该 css 文件中的两个 sass 导入：

```
@import "active_admin/mixins";
@import "active_admin/base"; 
```

或者至少只是基本文件。在没有基本 css 或在浏览器中完全关闭 css 的情况下查看当前管理页面可能对您本身很有吸引力，或者对标记的组织提供信息。从这个有利的角度，您可以开始思考如何重新设计裸标记以匹配移动演示文稿。

# xcode - 如何将我的地图视图设置为自动放大用户的当前位置？

> ID：14313063
> 
> 赞同：2
> 
> 时间：2013-01-14T03:39:24.303
> 
> 标签：xcode, location, mkmapview, zooming

当我点击标签栏中的“地图”按钮时，它会拉出我的地图视图控制器，并在地图视图上显示用户的当前位置（我正在使用以下代码）：

```
[mapview setShowsUserLocation:YES]; 
```

超级容易。但是，如果我希望地图自动放大用户的当前位置，我该怎么做（在 xCode 中）？

谢谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-19T19:33:40.447

我想这就是你需要的

```
 - (void)viewDidLoad
 {
    [super viewDidLoad];
    self.mapView.showsUserLocation=YES;
    self.mapView.delegate = self;
    [self.mapView setUserTrackingMode:MKUserTrackingModeFollow animated:YES];
    //some code
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T04:19:40.187

[mapview setUserTrackingMode:MKUserTrackingModeFollow];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T05:05:25.670

这应该做你正在寻找的

```
 MKCoordinateRegion region;

    region = (MKCoordinateRegion){(current user location).location.coordinate, (current user location).locationCoordinateSpan};        
    [theMapView setRegion:region animated:NO/YES]; 
```

# regex - 选择字符串中除前 3 个单词之外的所有单词的正则表达式

> ID：14313067
> 
> 赞同：-1
> 
> 时间：2013-01-14T03:40:24.020
> 
> 标签：regex

我需要一个正则表达式来选择字符串中除前 3 个单词之外的所有单词。例如一个字符串：“Have a very nice day”应该返回“nice day”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T04:27:04.540

假设“单词”是字母和撇号（例如“can't”）：

```
^([a-zA-Z']+\s+){3}(.*) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T03:49:29.233

`(\w+ ){3}(.*)`

第二个捕获括号, `$2`, 是你想要的

# php - 基于关系数据库构建 RESTful API

> ID：14313070
> 
> 赞同：0
> 
> 时间：2013-01-14T03:41:17.323
> 
> 标签：php, api, rest

我正在尝试构建一个 RESTful API。我了解 RESTful API 的工作原理，并且我为我的 api 开发了一个很好的数据库结构和模型，以及用于检测请求类型和分别循环遍历每个“节点”的代码。

> # API 模型
> 
> ```
> Collection      Resource               Table
> 
> associations    associations/AID       Associations
> 
> Users           Users/UID              Users
> 
> groups          groups/GID             Groups
> 
> events          events/EID             Events 
> 
> UID/events      UID/events/EID         Events_Map
> 
> UID/groups      UID/groups/GID         Group_Map 
> 
> GID/events      GID/events/EID         Group_Events
> 
> AID/events      GID/events/EID         Association_Events 
> ```
> 
> * * *
> 
> ## 关系
> 
> *   关联 -> 组
>     
>     
> *   关联 -> 用户
>     
>     
> *   关联 -> 事件
>     
>     
> *   用户 -> 组
>     
>     
> *   用户 -> 事件
>     
>     
> *   组 -> 用户
>     
>     
> *   组 -> 事件

我无法编写将数据库资源转换为 api 资源的 php 代码。我已经阅读了很多关于编写 REST API 的在线教程，但没有一篇涉及如何处理嵌套数据。我很想为这个项目使用一个框架，但它是为学校设计的。

* * *

总之，我如何编写代码来处理复杂的 api 请求并生成必要的数据库查询，即使它们包含诸如 join 之类的高级功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T03:47:13.927

我没有试图解释我的大脑，而是发现 Apigee 的博客是构建对开发人员友好的 API 的最佳资源。现在，我已经构建了 3 个 API，这些 API 被数千个使用 Apigee 策略的电子商务网站所依赖，并且开发人员的反馈非常好，因为我被告知它非常直观。在很大程度上归功于 Apigee。

[http://blog.apigee.com/detail/slides_for_restful_api_design_second_edition_webinar](http://blog.apigee.com/detail/slides_for_restful_api_design_second_edition_webinar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T03:47:33.597

示例：当我需要使用 UID 查找用户时，会将 UID 传递给基于该 UID 选择用户的存储过程。

对于我的 REST API，我创建了充当 API 和数据库调用之间的中介的对象

另外，看看这个[问题](https://stackoverflow.com/questions/7982897/building-a-rest-api-quickly-from-a-database-model?rq=1)

# actionscript-3 - Greensocks Imageloader如何在加载图像之前检查图像是否存在

> ID：14313074
> 
> 赞同：0
> 
> 时间：2013-01-14T03:41:37.427
> 
> 标签：actionscript-3, gsap

我想替换一个精灵的形象。

但在此之前，我想检查图像是否存在于目录中。有没有办法做到这一点？

```
newImage = new ImageLoader(dir + temChild.category + '/' + temChild.productUrl + '.png', {
                                                                    container : temChild,
                                                                    height : 80,
                                                                    width : 80,
                                                                    scaleMode : 'proportionalInside',
                                                                    onComplete : onColorImageLoad, 
                                                                    centerRegistration : true,
                                                                    noCache: true,
                                                                    autoDispose : true
                                                                  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T05:19:58.017

如果您使用 ImageLoader 加载一张图像，您可以使用回调（事件）。 *由于自动完成，我使用 ImageLoaderVars 类*

```
var loaderVars:ImageLoaderVars = new ImageLoaderVars();
loaderVars.container=temChild;
loaderVars.height=80;
loaderVars.width=80;
loaderVars.scaleMode='proportionalInside';
loaderVars.centerRegistration=true;
loaderVars.noCache=true;
loaderVars.autoDispose=true;
loaderVars.onComplete=temChild;
loaderVars.onComplete=onColorImageLoad;

//lets watch for errors if we don't have file on the server or something else
loaderVars.onError=onErrorCallback;
loaderVars.onFail=onFailCallback;                                                        

newImage = new ImageLoader(dir+temChild.category+'/'+temChild.productUrl+'.png',
loaderVars);

private function onFailCallback(event:LoaderEvent):void
{
 //do something if you want here
}

private function onErrorCallback(event:LoaderEvent):void
{
 //do something if you want here
} 
```

如果您在一个 LoaderMax 中有多个 ImageLoder，请决定您想要从失败的加载器中获得什么，默认情况下 LoaderMax skipFailed=true;。还有 LoaderMax 事件：childFail、ioError、securityError。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:52:28.000

尝试将属性添加`name`到`loaderVars`并使用`LoaderMax.getContent`方法：

```
import com.greensock.loading.ImageLoader;
import com.greensock.loading.LoaderMax;
import com.greensock.events.LoaderEvent;

var loaderVars:Object = {
    container : this,
    height : 80,
    width : 80,
    scaleMode : 'proportionalInside',
    onComplete : onColorImageLoad, 
    centerRegistration : true,
    noCache: true,
    autoDispose : true,
    name: 'photo1' // Put your image id here
};

var newImage:ImageLoader = new ImageLoader('http://images.apple.com/es/home/images/hero_ipad_retina.jpg', loaderVars);

// Loads if photo1 has not been loaded
if (LoaderMax.getContent('photo1') && !LoaderMax.getContent('photo1').rawContent)
{
    newImage.load();
}

function onColorImageLoad (event:LoaderEvent):void 
{
    trace(event);
} 
```

# php - 获取两个字符串之间的字符串

> ID：14313075
> 
> 赞同：9
> 
> 时间：2013-01-14T03:41:49.277
> 
> 标签：php, regex, preg-match, pcre

我的字符串是：“reply-234-private”，我想得到“reply-”之后和“-private”之前的数字，它是“234”。我尝试使用以下代码，但它返回一个空结果：

```
$string = 'reply-234-private';
$display = preg_replace('/reply-(.*?)-private/','',$string);
echo $display; 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-14T03:46:30.077

你可以[爆炸](http://php.net/manual/en/function.explode.php)它：

```
<?php
$string = 'reply-234-private';
$display = explode('-', $string);

var_dump($display);
// prints array(3) { [0]=> string(5) "reply" [1]=> string(3) "234" [2]=> string(7) "private" }

echo $display[1];
// prints 234 
```

或者，使用[preg_match](http://php.net/manual/en/function.preg-match.php)

```
<?php
$string = 'reply-234-private';
if (preg_match('/reply-(.*?)-private/', $string, $display) === 1) {
    echo $display[1];
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-14T03:48:12.683

看看[explode()函数](http://php.net/manual/en/function.explode.php)

像这样的东西：

```
$myString = 'reply-234-private';

$myStringPartsArray = explode("-", $myString);

$answer = $myStringPartsArray[1]; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-12-15T11:49:31.257

本文向您展示如何获取两个标签或两个字符串之间的所有字符串。

[http://okeschool.com/articles/312/string/how-to-get-of-everything-string-between-two-tag-or-two-strings](http://okeschool.com/articles/312/string/how-to-get-of-everything-string-between-two-tag-or-two-strings)

```
<?php
 // Create the Function to get the string
 function GetStringBetween ($string, $start, $finish) {
    $string = " ".$string;
    $position = strpos($string, $start);
    if ($position == 0) return "";
    $position += strlen($start);
    $length = strpos($string, $finish, $position) - $position;
    return substr($string, $position, $length);
}
?> 
```

如果你的问题，你可以试试这个：

```
$string1='reply-234-private';
echo GetStringBetween ($string1, "-", "-") 
```

或者我们可以使用任何“标识符字符串”来获取标识符字符串之间的字符串。例如：

```
echo GetStringBetween ($string1, "reply-", "-private") 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-26T15:58:31.637

使用 php 的内置正则表达式支持函数 [preg_match_all](http://php.net/manual/en/function.preg-match-all.php)

这将有所帮助，假设您想要在以下示例中 @@ 之间的字符串（键）数组，其中 '/' 不介于两者之间，您可以使用不同的**开始**和**结束**变量构建新示例

```
function getInbetweenStrings($start, $end, $str){
    $matches = array();
    $regex = "/$start([a-zA-Z0-9_]*)$end/";
    preg_match_all($regex, $str, $matches);
    return $matches[1];
}

$str = "C://@@ad_custom_attr1@@/@@upn@@/@@samaccountname@@";
$str_arr = getInbetweenStrings('@@', '@@', $str);

print_r($str_arr); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-29T14:59:02.373

```
$myString = 'reply-234-private';
echo str_replace('-','',filter_var($myString,FILTER_SANITIZE_NUMBER_INT)); 
```

那应该做的工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-30T15:30:33.133

如果你想在 js 中做，试试这个功能 -

```
function getStringBetween(str , fromStr , toStr){
  var fromStrIndex = str.indexOf(fromStr) == -1 ? 0 : str.indexOf(fromStr) + fromStr.length;
  var toStrIndex = str.slice(fromStrIndex).indexOf(toStr) == -1 ? str.length-1 : str.slice(fromStrIndex).indexOf(toStr) + fromStrIndex;
  var strBtween = str.substring(fromStrIndex,toStrIndex);
  return strBtween;
} 
```

# php - 关闭浏览器后保持会话

> ID：14313076
> 
> 赞同：0
> 
> 时间：2013-01-14T03:41:52.740
> 
> 标签：php, session, session-variables, session-cookies, session-timeout

即使在浏览器关闭后，我也希望能够保持 PHP 会话。我知道在[这个](https://stackoverflow.com/questions/3684620/is-possible-to-keep-session-even-after-the-browser-is-closed)问题上，他们建议使用*session_set_cookie_parameters()*参数，但我找不到一个不会过期且适用于我域上所有目录的工作示例。如果有人能帮忙，那就太棒了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T03:46:53.630

在会话开始之前使用`session_set_cookie_parameters()`非零值。

参考[这里](http://www.php.net/manual/en/function.session-set-cookie-params.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T03:53:06.013

会话代表“直到浏览器关闭”。会话是过期的东西。如果您不希望它过期，那么您可能根本不想要会话。你最好也阅读[饼干](http://php.net/manual/en/features.cookies.php)。我想这就是你需要的。

但是您可以使用[session_set_cookie_parameters()](http://www.php.net/manual/en/function.session-set-cookie-params.php)在开始会话之前为会话 cookie 赋予非零生命周期，或将[session.cookie_lifetime](http://www.php.net/manual/en/session.configuration.php#ini.session.cookie-lifetime) e 设置为非零。

`session_set_cookie_params()`对于每个单页请求，都需要在 session_start() 之前调用Remeber 。[阅读更多](http://www.devguru.com/technologies/php/5963.asp)

***代码：***

```
<?php 

session_set_cookie_params(30 * 60, "/");
session_start();
print_r(session_get_cookie_params());

?> 
```

***输出：***

数组（[生命周期] => 1800 [路径] => / [域] => [安全] =>）

***解释：***

将 cookie 设置为在 30 分钟后过期，并可在站点的任何位置使用。

# c# - 有没有办法在实体框架中为可选的多对多关系建模？

> ID：14313079
> 
> 赞同：4
> 
> 时间：2013-01-14T03:42:15.333
> 
> 标签：c#, entity-framework

实体框架中是否有一种方法（我假设它将使用流畅的语法，因为数据注释在一定程度上受到限制）来建模双方都是可选的多对多关系（0..M 到 0..N关系）？用例是这样的：我想允许用户向实体添加标签。实体的标签是 M:N 关系，但两者都不是必需的。也就是说，可以存在不应用于任何实体的标记，并且可以不标记实体。这对我来说似乎相当合理。我不能简单地使用以下方法建模：

```
public virtual ICollection<Tag> Tags { get; set; } 
```

和

```
public virtual ICollection<Entity> Entities { get; set; } 
```

因为每个类都有其他关系，我得到一个“外键约束可能导致循环或多个级联路径”。我希望也许我可以做类似的事情：

```
modelBuilder.Entity<Tag>().HasOptional(t => t.Entities);
modelBuilder.Entity<Entity>().HasOptional(t => t.Tags); 
```

但我被警告说 EF 是“无法确定关联的主体端”。从阅读来看，这种关系似乎必须有一个主要目的，但就我而言，这是不可取的。

我可以添加一个类来表示桥接表并手动处理映射，但我不希望代码混乱。我想知道是否有另一种方法可以在 EF 中对此进行建模。

为了更详细地填写，还有一个 Author 类（相当于用户）。作者和标签是 1:M，实体的作者也是 1:M。所以当然，问题在于 Entities 类在级联树中出现了两次。将标签/实体关系设为可选可以解决此问题。如果有办法通过实体访问标签，我也可以修复它，但由于标签可以在不连接到实体的情况下存在，我认为这是不可能的。

以下是相关代码的摘要：

```
public class Author
{
    public Guid Id { get; set; }
    public virtual List<Entity> Entities { get; set; }
    public virtual List<Tag> Tags { get; set; }
}

public class Tag
{
    public Guid Id { get; set; }
    public Guid AuthorId { get; set; }
    public virtual Author Author { get; set; }
    public virtual ICollection<Entity> Entities { get; set; }
}

public class Entity
{
    public Guid Id { get; set; }
    public Guid AuthorId { get; set; }
    public virtual Author Author { get; set; }
    public virtual ICollection<Tag> Tags { get; set; }
} 
```

编辑：

按照下面的建议使用`.HasMany().WithMany()`给了我这个：

```
CREATE TABLE [dbo].[TagEntities] (
    [Tag_Id] [uniqueidentifier] NOT NULL,
    [Entity_Id] [uniqueidentifier] NOT NULL,
    CONSTRAINT [PK_dbo.TagEntities] PRIMARY KEY ([Tag_Id], [Entity_Id])
) 
```

但我想要的是 Tag_Id 和 Entity_Id 在这个表上可以为空。也许这个模型没有我想象的那么有意义？？你能有一个两边都可以为空的桥接表吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T03:50:46.380

利用

```
modelBuilder.Entity<Tag>().HasMany(t => t.Entities)
    .WithMany(t => t.Tags); 
```

代替

```
modelBuilder.Entity<Tag>().HasOptional(t => t.Entities);
modelBuilder.Entity<Entity>().HasOptional(t => t.Tags); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:45:51.167

我不知道这是否是正确的答案，但我通过创建一个名为 DbEntity 的基类来解决这个问题，其他类继承自该基类。所以现在作者刚刚：

```
// Both entities and tags are part of this collection
public virtual List<DbEntity> Entities { get; set; } 
```

“实体”（在我的代码中具有特殊含义）和“标签”子类 DbEntity。这消除了多个级联路径，同时保留了导航属性，尽管我确实需要这样做：

```
author.Entities.OfType<Tag>(); 
```

或者

```
author.Entities.OfType<Entity>(); 
```

获取特定的实体集。

# ruby-on-rails - SELECT ... AS ... 使用 ActiveRecord

> ID：14313081
> 
> 赞同：5
> 
> 时间：2013-01-14T03:43:04.050
> 
> 标签：ruby-on-rails

是否可以使用rails进行这样的查询？

```
SELECT items.*, (select count(*) from ads where item_id = items.id) as adscount WHERE 1 
```

然后像这样访问这个字段？

```
@item.adscount 
```

例如，每个项目有一百个左右的广告。在项目索引视图中，我需要显示每个项目有多少广告。

现在我只知道如何对每个项目进行唯一查询，例如：

```
select count(*) from ads where item_id = 1
select count(*) from ads where item_id = 2
select count(*) from ads where item_id = 3
etc 
```

编辑：

做了一个计数器缓存列。

这给了我巨大的性能提升。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T05:22:31.113

一种解决方案是使用[Scopes](http://guides.rubyonrails.org/active_record_querying.html#scopes)。你可以让它成为一个特殊的查询，比如

```
class Item < ActiveRecord::Base
  scope :with_adscount, select("items.*, (select count(*) from ads where item_id = items.id) as adscount")
end 
```

然后在控制器中，或者你从哪里查询，你可以像这样使用它：

```
@items = Item.with_adscount
@items.each do |item|
  item.adscount
end 
```

或者，您可以使用以下命令将其作为[默认范围](http://guides.rubyonrails.org/active_record_querying.html#applying-a-default-scope)：

```
class Item < ActiveRecord::Base
  default_scope select("items.*, (select count(*) from ads where item_id = items.id) as adscount")
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T06:30:35.427

使用 Rails `Counter Cache` [http://railscasts.com/episodes/23-counter-cache-column](http://railscasts.com/episodes/23-counter-cache-column)

然后您将能够像使用它一样使用它`@item.ads.count`，这不会产生任何数据库查询。此外（如果你真的想以你的方式使用它）你可以创建一个模型方法

```
def adscount
  self.ads.count
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T07:33:54.980

您可以像这样在控制器上执行此操作

```
a = MyModel.find_by_sql('SELECT *, (select count(*) from table) as adscount FROM table').first
a.adscount #total
a.column1 #value of a column
a.column2 #value of another column 
```

# oracle - 将更新不同 DSN 中的表的 Oracle 触发器

> ID：14313082
> 
> 赞同：0
> 
> 时间：2013-01-14T03:43:08.550
> 
> 标签：oracle, triggers

在更新或插入 1 个表期间，有没有办法更新位于不同 DSN 上的表？我想连接使用不同数据库的 2 个系统，并希望有一个可以进行此类更新的触发器。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T05:27:44.897

您可以创建从一个 Oracle 数据库到另一个数据库的[数据库链接。](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_5005.htm)这使您可以从触发器中访问参考远程表。

此解决方案具有简单的优点，但不是最有效的（考虑批量更新）或健壮的（考虑远程数据库的停机时间）。

Oracle Replication 是一个全面的解决方案，允许您在一致性、可用性、性能等方面进行权衡。

# php - CodeIgniter 多步骤注册

> ID：14313085
> 
> 赞同：0
> 
> 时间：2013-01-14T03:43:37.437
> 
> 标签：php, forms, codeigniter, session

我目前正在开发一个使用 CodeIgniter 的网络应用程序，具体来说，我正在构建注册表单。

此表单由 3 个不同的步骤组成，我只是想知道在 2 个步骤之间保存信息的最佳方法是什么？我只想在最后一步完成后将所有信息保存到数据库中。

我应该只使用本机 PHP 会话来执行此操作吗？或者我应该使用 CI flashdata？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T04:48:35.680

我使用了隐藏的字段和会话。我倾向于在每个阶段结束时将所有表单值保存到文本文件中。然后，如果在任何给定阶段发生某些事情，我可以选择如何处理保存在文本文件中的数据。

例如，如果您希望可以在第一页捕获电子邮件地址。如果表单没有完成（因为所有阶段都已成功完成），那么您可以在适当的阶段向潜在用户发送一封电子邮件，其中包含指向注册表单的链接。潜在用户不必重新填写他们已填写的任何字段，您就有机会重新获得他们作为用户的身份。

我倾向于使用文本文件作为保存多阶段表单任何阶段的所有数据的默认方式。在表格的最后，我可以将数据处理到数据库中并删除文本文件。为了捕捉部分完整的注册，我可以编写一个脚本，该脚本通过每分钟运行的 cronjob 执行。我总是在数据文件中保存一个时间戳，代表上次更新文件的时间。如果时间戳超过 X 分钟，则在其上运行未完成的注册脚本或将其删除。

在每个阶段保存数据很简单。在第一阶段之后，您`$dataFile`使用`$dataFile = file_put_contents(json_encode($data));`where创建`$data = array('timestamp'=>...) + $_POST;`。每个阶段之后我第一次使用`$data = json_decode(file_get_contents($dataFile), TRUE) + $_POST;`, 和`$data['timestamp'] = ...;`. 然后使用 file_put_contents 将其保存回文件。显然，您将需要跟踪 $dataFile 变量，但这很容易通过隐藏字段或会话数据完成。

该文件在被处理和删除之前只会存在 X 分钟，但是如果您希望在短时间内对文本文件进行安全保护，那么我建议您查找密码或在简单的 Ceasar 密码上创建自己的变体. 对字段名称和值使用密码。

早在 12 月，我正在为自己解决最新 CodeIgniter 中的多阶段表单问题。我不能说这是一个普遍接受的最佳实践，但文本文件过去对我来说效果很好。我在这里发布了一些多阶段表单的示例代码：[多阶段表单示例](http://webtechnote.blogspot.com/2012/12/codeigniter-multi-stage-form-example.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T04:19:16.687

您可以将值发布到下一个表单，您可以在其中使用隐藏字段来存储这些值，这样当您发布最后一个表单时，您就会拥有所有值并且您可以一次处理它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-06T07:41:44.037

我在我的最新项目中遇到了这种情况，我使用 Codeigniter 的会话将在 userdata 会话中验证后提交的数据保存为最后一步中的数组，我将数据发送到数据库

# c - 具有非连续布局的 C 位域元素

> ID：14313088
> 
> 赞同：5
> 
> 时间：2013-01-14T03:44:11.120
> 
> 标签：c, struct, embedded, unions, bit-fields

我正在寻找最优雅的界面上的输入，以放置一个内存映射寄存器接口，其中目标对象在寄存器中被拆分：

```
union __attribute__ ((__packed__)) epsr_t {
    uint32_t storage;
    struct {
        unsigned reserved0    : 10;
        unsigned ICI_IT_2to7  :  6; // TOP HALF
        unsigned reserved1    :  8;
        unsigned T            :  1;
        unsigned ICI_IT_0to1  :  2; // BOTTOM HALF
        unsigned reserved2    :  5;
    } bits;
}; 
```

在这种情况下，访问单个位`T`或任何`reserved`字段都可以正常工作，但读取或写入`ICI_IT`需要的代码更像：

```
union epsr_t epsr;
// Reading:
uint8_t ici_it = (epsr.bits.ICI_IT_2to7 << 2) | epsr.bits.ICI_IT_0to1;
// Writing:
epsr.bits.ICI_IT_2to7 = ici_it >> 2;
epsr.bits.ICI_IT_0to1 = ici_it & 0x3; 
```

在这一点上，我已经失去了位域抽象试图提供的简单性/便利性。我考虑了宏观解决方案：

```
#define GET_ICI_IT(_e)      ((_e.bits.ICI_IT_2to7 << 2) | _e.bits.ICI_IT_0to1)
#define SET_ICI_IT(_e, _i)  do {\
    _e.bits.ICI_IT_2to7 = _i >> 2;\
    _e.bits.ICI_IT_0to1 = _i & 0x3;\
    while (0); 
```

但作为一般规则，我不是这样的宏的超级粉丝，我讨厌在阅读别人的代码时追逐它们，而且我绝不会给别人造成这样的痛苦。我希望有一个涉及结构/联合/what-have-you 的创意技巧来更优雅地隐藏这个对象的拆分性质（理想情况下作为对象的简单成员）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T04:05:51.733

我不认为有任何“好”的方式，实际上我不会依赖位域......有时最好有一堆详尽的宏来做你想做的一切，把它们记录好，然后依靠他们封装你的问题......

```
#define ICI_IT_HI_SHIFT   14
#define ICI_IT_HI_MASK    0xfc
#define ICI_IT_LO_SHIFT   5
#define ICI_IT_LO_MASK    0x02

// Bits containing the ICI_IT value split in the 32-bit EPSR
#define ICI_IT_PACKED_MASK  ((ICI_IT_HI_MASK << ICI_IT_HI_SHIFT) |     \
                             (ICI_IT_LO_MASK << ICI_IT_LO_SHIFT))

// Packs a single 8-bit ICI_IT value x into a 32-bit EPSR e
#define PACK_ICI_IT(e,x)  ((e & ~ICI_IT_PACKED_MASK) |                 \
                           ((x & ICI_IT_HI_MASK) << ICI_IT_HI_SHIFT) | \
                           ((x & ICI_IT_LO_MASK) << ICI_IT_LO_SHIFT)))

// Unpacks a split 8-bit ICI_IT value from a 32-bit EPSR e
#define UNPACK_ICI_IT(e)  (((e >> ICI_IT_HI_SHIFT) & ICI_IT_HI_MASK) | \
                           ((e >> ICI_IT_LO_SHIFT) & ICI_IT_LO_MASK))) 
```

请注意，为了便于阅读，我没有放入类型转换和普通宏的内容。是的，我在提到可读性时得到了讽刺......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T03:51:32.973

如果您非常不喜欢宏，请使用内联函数，但是您拥有的宏解决方案很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T13:03:26.640

您的编译器是否支持**匿名联合**？

我发现它是一个优雅的解决方案，可以摆脱你的`.bits`部分。它不符合 C99，但大多数编译器都支持它。它成为 C11 中的标准。

另请参阅此问题：[结构中的匿名联合不在 c99 中？](https://stackoverflow.com/questions/3228104/anonymous-union-within-struct-not-in-c99).

# php - 正则表达式修改反斜杠

> ID：14313089
> 
> 赞同：1
> 
> 时间：2013-01-14T03:44:15.880
> 
> 标签：php, regex

我怎么能修改这个正则表达式：

```
preg_match_all('/\[startstring\](.*?)\[endstring\]/s', $input, $matches); 
```

寻找`@`而不是`[startstring]`，而`;`不是`[endstring]`？

当我尝试这个时：

```
preg_match_all('/\@\(.*?)\=(.*?)\;\/s', $input, $matches); 
```

它不起作用。:( 它说类似`No ending delimiter '/' found in /home/content/76/7290476/html/newr.php on line 3`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T03:48:07.217

由于某种原因，您逃脱了最后的反斜杠。你也在逃避`@`and `;`，这是不必要的：

```
#@(.*?)=(.*?);#s 
```

您不必将斜线用作分隔符（在上面，我使用了`#`）。小心转义你不应该的字符。我不认为你打算逃避第一个父母。

# iphone - 是否有 iOS 可访问的 API 来检测醉酒的人？

> ID：14313090
> 
> 赞同：4
> 
> 时间：2013-01-14T03:44:36.937
> 
> 标签：iphone, ios

是否可以通过图像识别或面部扫描来检测一个人是否喝醉了？如果可能，是否有可用的 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T03:51:43.317

您可以尝试再次对加速度计进行编码。也许一个喝醉了的人仍然无法握住电话？

[http://www.technobuffalo.com/2011/05/15/introduction-to-ios-development-playing-with-the-accelerometer/](http://www.technobuffalo.com/2011/05/15/introduction-to-ios-development-playing-with-the-accelerometer/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T03:52:52.100

这是一个 RESTful 人脸识别 api，也许是你想要的[http://www.faceplusplus.com](http://www.faceplusplus.com)。但我不知道它是否可以检测醉酒的脸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T03:54:54.677

开放简历！[训练！](http://note.sonots.com/SciSoftware/haartraining.html#e134e74e)

> *仅供参考：我建议您同时进行不同的训练，因为您必须在训练期间等待很多天（可能需要一周时间）。我通常进行实验 1\. 在周五运行 haartraining 2\. 完全忘记它 3\. 在下周五查看结果 4\. 运行另一个 haartraining（循环）。*

# html - 如何将内容与 div 的底部对齐？

> ID：14313094
> 
> 赞同：8
> 
> 时间：2013-01-14T03:46:07.687
> 
> 标签：html, css

[**jsFiddle**](http://jsfiddle.net/gv4qd/)

**HTML**

```
<div id="a">
  <div id="b">bbb</div>
  <div id="c">ccc</div>
</div> 
```

**CSS**

```
#a {
  border: 1px solid black;
   *zoom: 1;
}
#a:before, #a:after {
   display: table;
    content: "";
    line-height: 0;
}
#a:after {
  clear: both;
}

#b {
  float: left;
  font-size: 36px;
  background-color: blue;
}

#c {
  float: right;
  background-color: red;
} 
```

我希望红色框 ( `#c`) 与右下角对齐。

如果我添加`position:relative`到它`#a`并添加`position:absolute;bottom:0;right:0`到`#c`它，但只要我添加它，蓝色框以及容器 ( `#a`) 就会折叠。我不知道哪个会更高，`#b`或者`#c`我想将定位应用于他们两个。通常的 clear-fix 不适用于绝对定位的元素。

那么如何在不折叠容器 div 的情况下定位`#b`到左下角和右下角？`#c``#a`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:29:43.243

在测试了几个不同的选项后，我发现在父容器上使用 position:relative 允许子标签绝对定位，但相对于父容器，而不是文档窗口。

```
#a {
    border: 1px solid black;
    height: 500px;width:500px;
    position:relative;
    }

#b, #c{
       position:absolute;bottom:0;
      }
#b{
    left:0;
    font-size: 36px;
    background-color: blue;
    }

#c {
    right:0;
    background-color: red;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T15:24:28.510

好吧，这是一个非常深奥的解决方案，但它有效:)

设置 #b 和 #c`inline-block`以便它们像常规内联一样相互协作，我们可以使用`vertical-align`. 然后添加`text-align:justify;`到容器并`:after`使用`width:100%`将#b 和#c 拉到左侧和右侧。将容器的字体设置为零（并在内部块中恢复）以避免下/下线和其他间隙，并将零字体设置为 :after。

```
#a {
  border: 1px solid black;
  text-align:justify;
  font-size:0;
  line-height:0;
}
#a:after {
  content:"";
  display:inline-block;
  width:100%;
}

#b, #c {
  display:inline-block;
}

#b {
  vertical-align:top;
}
#c {
  vertical-align:bottom;
} 
```

`font-size:0;`看起来在 IE 中不起作用，所以我们几乎不需要 1px 负边距的解决方法：

```
/* ie fix */
#a {
  font:1px/0 sans-serif;
}
#b, #c {
  margin:0 0 -1px;
} 
```

小提琴：http: [//jsfiddle.net/gv4qd/35/](http://jsfiddle.net/gv4qd/35/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T16:46:18.617

我相信这应该这样做

```
position: absolute;
top: auto;
bottom: 0px; 
```

目前无法测试但稍后会测试，只需使用您希望在底部对齐的 div 上的 css

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T17:02:57.773

经过一番搞砸后，这似乎可行。诀窍是绝对定位`#a`，`#b`并将`#c`所有三个放置在相对定位的 div 中。

## HTML

```
<div id="alpha">
  <p>Here is a box to give the<br /> outer<br /> container<br /> some<br /> height</p>
  <div id="a">
    <div id="b">bbb</div>
    <div id="c">ccc</div>
  </div>
</div> 
```

## CSS

```
#alpha {
  position: relative;

}

#a {
  border: 1px solid black;
   *zoom: 1;
  position:absolute;
  height:100%;
  width:100%;
  top:0;bottom:0;
}
#a:before, #a:after {
   display: table;
    content: "";
    line-height: 0;
}
#a:after {
  clear: both;
}

#b {
  font-size: 36px;
  background-color: blue;
  position: absolute;
  left:0;
  bottom:0;
}

#c {
  background-color: red;
  position: absolute;
  right:0;
  bottom:0;
} 
```

**JSFiddle** [http://jsfiddle.net/mrikemccabe/gv4qd/36/](http://jsfiddle.net/mrmikemccabe/gv4qd/36/)

我在外部 div 中放置了一个段落，以使框具有一定的高度。如果您在外部 div 中没有任何内容，只需在 CSS 中为外部 div 声明一个固定高度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T09:10:10.557

尝试以下操作：

```
#a {
  border: 1px solid black;
  *zoom: 1;
}
#a:before, #a:after {
  display: table;
  content: "";
  line-height: 0;
}
#a:after {
 clear: both;
}

#b {
  float: left;
  font-size: 36px;
  background-color: blue;
}

#c {
   float: right;
   background-color: red;
   position:absolute;
   bottom:0; right:0;
   vertical-align:bottom;
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T10:52:13.127

给 auter div 位置：相对

给内部div位置：绝对和底部：0px；左：0px；或任何你喜欢的地方。

给出外部 div 位置非常重要：相对。如果不是有时它会工作，有时不是。当然，它不会像所有东西一样在非常古老的 Internet Explorer 中工作。

绝对元素没有高度，所以如果你不能使用指定的（比如高度：120px）你就是 f* *** *。您只能通过 javascript 来检查一个绝对元素和第二个元素的高度，并使用特殊边距添加它。

要确定哪个容器在顶部，您可以使用 z-index。

我忘了还有另一种方法。使用两个 div 的虚假重复内容，但工作量很大，因此使用 javascript 会更快。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-14T16:47:56.343

试试这个你的css文件：

```
 #a {
        border: 1px solid black;  
        position:relative;
       *zoom: 1;
    }
    #a:before, #a:after {
       display: table;
        content: "";
        line-height: 0;
    }
    #a:after {
      clear: both;
    }

    #b {
      float: left;
      font-size: 36px;
      background-color: blue;
    }

    #c {
        float: right;
        background-color: red;
        position: absolute;
        bottom:0px;
        right:0px;
    } 
```

# django - 如何在视图中获取视图的 URL？

> ID：14313109
> 
> 赞同：1
> 
> 时间：2013-01-14T03:47:55.387
> 
> 标签：django

在 Django 模板中，我可以通过以下方式获取视图的 URL

```
{% url my_view arg1 %} 
```

我怎样才能在视图中做同样的事情，例如

```
def my_view(request):
  view_url = some_how_get_view_url('name_of_my_view')
  return HttpResponse('<a href="' + view_url + '"> Hello world.</a>') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T03:54:55.377

您正在寻找`django.core.urlresolvers.reverse`功能。

[https://docs.djangoproject.com/en/dev/topics/http/urls/#reverse-resolution-of-urls](https://docs.djangoproject.com/en/dev/topics/http/urls/#reverse-resolution-of-urls)

这正是`{% url %}`标签在幕后所做的。

```
url = reverse('my_view', args=['arg1']) 
```

# .net - 使用 Visual Studio 制作的所有程序都需要 .NET Framework？

> ID：14313113
> 
> 赞同：1
> 
> 时间：2013-01-14T03:48:22.120
> 
> 标签：.net, visual-studio, frameworks

我问是因为在机器上安装 .NET Framework 大约需要 20-30 分钟，我只是想知道我的小程序是否真的需要它。我想我会看看我是否不能包含它以及它是如何工作的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T03:49:53.667

如果您使用非托管 C++ 编写应用程序，则不需要 .NET 框架。

但坦率地说，较新的 Windows 操作系统已经包含 .NET Framework：

.NET Framework 3.0 版包含在 Windows Server 2008 和 Windows Vista 中

3.5 版包含在 Windows 7 和 Windows Server 2008 R2 中

4.5 版包含在 Windows 8 和 Windows Server 2012 中

并且大多数其他计算机已经通过 Windows 更新或其他需要 .NET 的应用程序安装了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T03:54:42.867

如果您在应用程序中定位它，则只需要 .net 框架

您可以编写不需要 .net 框架的 javascript、Office、c++、SQL server 等应用程序。

[http://msdn.microsoft.com/en-US/hh487283.aspx](http://msdn.microsoft.com/en-US/hh487283.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T03:58:24.630

这不是您问题的直接答案，但您应该注意大多数版本的 Windows 都预装了 .NET 框架。

见这里：[https ://stackoverflow.com/questions/71390/which-operating-systems-come-with-net](https://stackoverflow.com/questions/71390/which-operating-systems-come-with-net)

如果您想使用 C# 或 VB.NET 编写应用程序，您可以尝试以 .NET 框架版本 2 或 3 为目标。运行 Vista 或更高版本的任何人都应该能够在不安装 .NET 框架的情况下运行您的应用程序。

# google-maps-api-3 - Google KmlLayer 不显示自定义标记

> ID：14313115
> 
> 赞同：2
> 
> 时间：2013-01-14T03:48:39.037
> 
> 标签：google-maps-api-3, kml

我编写了一个 R 脚本来创建一个 KML 文件，当在 Google 地球中查看时，下面生成的 KML 可以很好地加载 icon18.png：

```
 <kml xmlns:xsd="http://schemas.opengis.net/kml/2.2.0/ogckml22.xsd" xmlns:xmlns="http://www.opengis.net/kml/2.2/" version="1.0">
      <Document>
        <name>Member locations</name>
    <open>1</open>
    <Folder>
      <name>SpatialPointsDataFrame</name>
      <Style id="pnt1">
        <IconStyle>
          <Icon>
            <href>http://maps.google.com/mapfiles/kml/pal2/icon18.png</href>
          </Icon>
        </IconStyle>
        <BalloonStyle>
          <text>$[description]</text>
        </BalloonStyle>
      </Style>
      <Placemark>
        <name>1</name>
        <styleUrl>#pnt1</styleUrl>
        <Point>
          <extrude>1</extrude>
          <altitudeMode>clampToGround</altitudeMode>
          <coordinates>151.26250,-33.89374,0</coordinates>
        </Point>
      </Placemark>
    </Folder>
  </Document>
</kml> 
```

但是，当使用地图 API 和以下代码加载到 KmlLayer 时，它会显示为默认的蓝色“泪珠”标记：

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=mykey&sensor=false">
    </script>
    <script type="text/javascript">
      function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(-34.397, 150.644),
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
    var ctaLayer = new google.maps.KmlLayer('http://www.peter-johnson.com.au/test.kml');
    ctaLayer.setMap(map);
      }
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html> 
```

在这里查看其他问题，我只能看到发布的问题没有未回答的代码，或者与未公开提供的 Web 服务器相关的一些问题。一些表明存在问题的问题现在可以了，所以我想支持将自定义图标加载到 KmlLayer 中，但我对 KML 格式或我加载它的方式有一些问题？

正如评论中所建议的，我刚刚将 KML 放置在此处的公开区域中：

[http://www.peter-johnson.com.au/test.kml](http://www.peter-johnson.com.au/test.kml)

这是HTML：

[http://www.peter-johnson.com.au/test.htm](http://www.peter-johnson.com.au/test.htm)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T06:40:59.267

您发布的 KML 无法与[Google 地图](https://maps.google.com/maps?q=http%3a%2F%2Fwww.geocodezip.com%2Fgeoxml3_test%2FcustomIconKml_SOa_kml.xml&hl=en&sll=32.824552,-117.108978&sspn=0.641638,0.883026&t=m&z=10)或[KmlLayer](http://www.geocodezip.com/v3_GoogleEx_layer-kml_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/customIconKml_SOa_kml.xml)一起使用，即使我对其进行了[验证](http://feedvalidator.org/check.cgi?url=http%3A%2F%2Fwww.geocodezip.com%2Fgeoxml3_test%2FcustomIconKml_SOa_kml.xml)

*   [您在 Google 地图上的 KML](https://maps.google.com/maps?q=http%3a%2F%2Fwww.peter-johnson.com.au%2Ftest.kml&hl=en&t=m&z=19) - 蓝色默认标记
*   [您在 Google Maps API v3 地图上的 KML](http://www.geocodezip.com/v3_GoogleEx_layer-kml_linktoB.html?filename=http://www.peter-johnson.com.au/test.kml) - 蓝色默认标记

对于它的价值，它确实[适用于 geoxml3](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/customIconKml_SOa_kml.xml)

您的版本确实有无效的架构（至少根据[feedvalidator](http://feedvalidator.org/check.cgi?url=http%3A%2F%2Fwww.peter-johnson.com.au%2Ftest.kml)）

**更新：** 问题在于共享样式定义的位置。

[这](http://www.geocodezip.com/geoxml3_test/peter-johnson_com_au_testA.kml) [适用](http://www.geocodezip.com/v3_GoogleEx_layer-kml_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/peter-johnson_com_au_testA.kml)于[谷歌地图](https://maps.google.com/maps?q=http%3a%2F%2Fwww.geocodezip.com%2Fgeoxml3_test%2Fpeter-johnson_com_au_testA.kml&hl=en&sll=37.6,-95.665&sspn=54.71142,78.046875&t=m&z=19)

[样式](https://developers.google.com/kml/documentation/kmlreference#style)定义在您拥有它的地方不起作用。 [共享样式](https://developers.google.com/kml/documentation/kmlreference#document)看起来必须在文档中。

# mapping - 将点从一个 2D 平面映射到另一个平面

> ID：14313121
> 
> 赞同：2
> 
> 时间：2013-01-14T03:49:38.107
> 
> 标签：mapping, points, nonlinear-functions

给定平面 A 上的一个点，我希望能够映射到它在平面 B 上的对应点。我在两个平面之间有一组 N 对应的参考点对，但是，整体映射不是简单的仿射变换（对我来说没有单应性）。

我尝试过的事情：

*   对于给定的点，在平面 A 中找到三个最近的参考点，计算该三角形的重心坐标，然后将该变换应用于平面 B 中的相应参考点。它是如何失败的：有时三个最近的点几乎共线，所以错误很大。此外，跨越边界时的映射也没有一致性。这是非常“紧张”的。

*   给定 N 个参考点 (N^3)，计算所有可能的三角形。按尺寸订购。对于给定的点，找到它所在的最小三角形。这解决了点的线性问题，但仍然非常紧张和缓慢。

*   从三角平面 A 开始。遍历参考点，将每个参考点添加到参考平面。每次添加一个点时，它至少存在一个三角形中。使用新的参考点作为顶点将该三角形分成三个三角形。您最终将平面 A 进行了三角剖分，因此您可以轻松地从平面 A 映射到平面 B。问题：您可以证明每个三角形都有一个位于平面边缘的点。如果您的参考点远离平面边缘，这会导致巨大的错误。

我觉得这应该是一个相当标准的问题。是否有为此的标准算法/库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T04:04:18.937

你去我的朋友..我自己用过它，只能推荐你试一试。

> ### 卡恩学院 - 矩阵变换
> 
> 了解我们如何将一组向量映射到另一组。用于定义线性变换的矩阵
> 
> [https://www.khanacademy.org/math/linear-algebra/matrix_transformations](https://www.khanacademy.org/math/linear-algebra/matrix_transformations)

# javascript - 如何在 dojox 网格中添加自定义按钮？

> ID：14313124
> 
> 赞同：0
> 
> 时间：2013-01-14T03:49:58.143
> 
> 标签：javascript, dojo, grid

我用Dojo开发web应用一年多了，dojox grid用的比较多，但是没有办法在DataGrid或者EnhancedGrid上添加自定义按钮，因为我知道ExtJS，或者EasyUI，jQuery jqgrid都是有能力做到这一点。

所以我想问一下有没有什么方法可以在 ? 中添加按钮或其他 HTML DOM `dojox.DataGrid`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:11:21.627

至少，您可以在`dojo.form.Button`其中添加 's。只需将一个元素添加到`structure`您喜欢的 -property 中`DataGrid`（对不起，由于没有时间，我只是从我的实际项目中复制粘贴它......）：

```
 {
    name: ' ',
    field: 'idx',
    type: dojox.grid.cells._Widget,
    editable: false,
    formatter: function (idx) {
      return new dijit.form.Button({
        _destroyOnRemove: true,
        label: 'Bearbeiten',
        onClick: function () {
          dojo.byId('clickedItemIdx').value = idx + '';

          if (reports.entries[idx].type == 'Rufbereitschaft') {
            dojo.byId('addOrEditEntry_OCD_btn').click();
          } else {
            dojo.byId('addOrEditEntry_ASS_btn').click();
          }
        }
      });
    }
  }, 
```

请注意，我`data`包含一个`idx`-`field`我提交给`onclick`-function 以便知道单击了哪个元素。这是我让它工作的唯一方法。

您可能知道，您可以添加多个`structure`引用相同的 - 元素`field`。

# java - 使用 Axis2 和 WAS 7 时发生 Java 内存泄漏

> ID：14313129
> 
> 赞同：2
> 
> 时间：2013-01-14T03:50:50.453
> 
> 标签：java, websphere, out-of-memory, axis2

我有一个在 IBM Websphere 7.0.0.19 中运行的独立应用程序。它在 Java 6 中运行，我们在 EAR 中打包了一个 Axis2 JAR。我们加载了“最后一个父级”样式类，并且我们禁用了默认情况下与 WAS7 一起打包的 Axis 服务。

最近，在连续运行 6 周以上后，该应用程序出现了 OOM。令人困惑的是，应用程序分别部署在 2 台不同的机器上。但只有一台机器坏了。第二台机器还在。

我们使用 WAS 控制台检查了操作系统、服务器配置（如类加载器策略），它们在两台机器上都是相似的。

当应用程序崩溃时，它会生成一个 .phd 文件，我们使用 Eclipse 内存分析器工具 (MAT) 对其进行分析。分析显示在屏幕截图中。

![Eclipse 内存分析工具输出](../Images/4970ae77e137c9c006a82911267ee181.png)

如果我是正确的，则引导类加载器会重复加载并保留 AxisConfiguraiton 的引用，因此 GC 在运行时无法收集它们。但是，如果是这种情况，那么两台服务器都必须停机。但只有一台服务器经历了 OOM。分配给 JVM 的内存在两台机器上是相同的。

我们不确定问题出在 WAS 7 上，还是与 axis2-kernel-1.4.1.jar 或其他问题有关。

[http://www.slideshare.net/leefs/axis2-client-memory-leak](http://www.slideshare.net/leefs/axis2-client-memory-leak)
[https://issues.apache.org/jira/browse/AXIS2-3870](https://issues.apache.org/jira/browse/AXIS2-3870)
[http://java.dzone.com/articles/12-岁的 bug-jdk 仍然存在](http://java.dzone.com/articles/12-year-old-bug-jdk-still-out)

（链接可能不涉及当前问题。但它们只是指针）

有没有人经历过类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:34:43.997

过去，我们在 Axis 2 1.4 上看到 WebSphere 6.1 上的内存增长和套接字保持打开状态。已经很长时间了，但我的笔记建议可能值得考虑升级到至少 Axis 2 1.5.1 以修复[这个带有开放套接字的错误，](https://issues.apache.org/jira/browse/AXIS2-2883)并确保您不会在存在单例的地方重复创建新对象（例如服务对象）。

# ios - 为什么这在主线程上运行？

> ID：14313130
> 
> 赞同：2
> 
> 时间：2013-01-14T03:50:54.730
> 
> 标签：ios, objective-c, cocoa-touch

非常简单的代码：

```
queue = [[NSOperationQueue alloc] init];
[queue addOperationWithBlock:^{
    NSLog(@"%@", [NSThread mainThread]? @"main" : @"not main");    
}]; 
```

打印“主要”。

为什么？除非我打电话，否则不是应该在 bg 线程中异步运行`[NSOperationQueue mainQueue]`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T03:56:35.337

`[NSThread mainThread]`总是返回一个对象（因此`YES`在转换为 时会产生`BOOL`），因为程序运行时有一个主线程。

如果要检查当前线程是否是主线程，需要`currentThread`使用`NSThread`.

```
NSLog(@"%@", [[NSThread currentThread] isEqual:[NSThread mainThread]] 
      ? @"main" : @"not main"); 
```

`NSThread`有更好的方法；看来您可以使用该`isMainThread`方法检查当前线程是否是主线程：

```
if ([[NSThread currentThread] isMainThread]) {
   //
} 
```

正如用户@borrrden 指出的那样，您只需要使用`[NSThread isMainThread]`,

```
if([NSThread isMainThread]){
   //
} 
```

请参阅[`NSThread`文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSThread_Class/Reference/Reference.html)。

# ruby-on-rails-3.2 - Rails 3.2：从 Rspec 切换到 Test::Unit

> ID：14313131
> 
> 赞同：1
> 
> 时间：2013-01-14T03:51:09.217
> 
> 标签：ruby-on-rails-3.2, rspec-rails, testunit

我创建了一个带有 -T 选项的新 Rails 3.2.x 应用程序，因为我想使用 Rspec 进行测试。

现在我想将其恢复为 Test::Unit。我怎样才能做到这一点，以便所有 rake 任务都能正常工作，并使用 Test::Unit 而不是 RSpec 测试外壳生成新的脚手架？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T16:25:52.993

在搜索和破解之后，这就是它为我工作的原因。

1.  从 Gemfile 中删除 rspec 和 rspec-rails
2.  运行“gem list rspec --local”，并为每个 rspec gem 执行“gem uninstall”。
3.  删除 Gemfile.lock
4.  rm -r 规格/
5.  捆绑安装
6.  mkdir 测试/
7.  将“require 'rails/all'”添加到 config/application.rb
8.  创建一个文件 test/test_helper.rb 并将以下代码放入其中：

    ```
    ENV["RAILS_ENV"] = "test"
    require File.expand_path('../../config/environment', __FILE__)
    require 'active_support'
    require 'rails/test_help'
    # require 'factory_girl_rails'  #use if you are using FactoryGirl for fixtures

    class ActiveSupport::TestCase
      # Setup all fixtures in test/fixtures/*.(yml|csv) for all tests in alphabetical order.
      #
      # Note: You'll currently still have to declare fixtures explicitly in integration tests
      # -- they do not yet inherit this setting 
      fixtures :all

      # Add more helper methods to be used by all tests here...
    end 
    ```

之后，您可以使用生成测试

```
rails g integration_test SomeStories 
```

或者您可以在 test/unit 下添加单元测试，然后使用

```
rake test
rake test:recent 
```

# python - 我可以在另一个 python 文件中运行 python 文件吗？

> ID：14313140
> 
> 赞同：1
> 
> 时间：2013-01-14T03:51:51.507
> 
> 标签：python

> **可能重复：**
> [从另一个 python 脚本运行一个 python 脚本，传入 args](https://stackoverflow.com/questions/3781851/run-a-python-script-from-another-python-script-passing-in-args)

假设我有返回 int 值的 script2.py。

是否可以仅在我的 shell 上运行 script.py 并在 script.py 中根据我传递给 script.py 的参数以某种方式获取 script2.py 返回的 int 值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T04:08:16.650

是的，这是可能的。这就是模块的用途:)。

首先，您必须将您在 script2.py 中使用的方法放入一个函数中。我将使用与我上面的人使用的相同示例（因为这是一个很好的示例：p）。

```
def myFunction(a, b):
    return a + b 
```

现在在您的 script.py 上，您需要输入：

```
import script2 
```

在顶部。这仅在两个文件位于同一目录中时才有效。

要使用该功能，您可以键入：

```
# Adding up two numbers
script2.myFunction(1, 2) 
```

那应该返回3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T04:10:16.093

尝试这个：

```
import subprocess

x = 55

print "running bar.py..."
subprocess.call("python bar.py " + x) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T04:02:08.340

可能[`execfile`](http://docs.python.org/2/library/functions.html#execfile)是你所追求的吗？`execfile('script2.py')`就像您将 的全部内容复制并粘贴`script2.py`到控制台一样。

例如假设`script2.py`有：

```
 def myFunction(a, b):
     return a + b 
```

然后`script.py`我可以这样做：

```
 # reads in the function myFunction from script2.py
 execfile('script2.py')
 myFunction(1, 2) 
```

如果您想`script2.py`使用传入的参数执行，`script.py`那么我建议将 的内容`script2.py`封装在一个函数中。也就是说，如果你`script2.py`是：

```
a = 1
b = 2
result = a + b 
```

我建议您将其转换为：

```
 def myFunction(a, b):
     return a + b 
```

以便您可以指定`a`和`b`从`script.py`.

# actionscript-3 - as3 为什么在 Android 和 IOS 设备上使用 Starling 进行游戏？

> ID：14313141
> 
> 赞同：1
> 
> 时间：2013-01-14T03:51:55.673
> 
> 标签：actionscript-3, flash-cs5.5, starling-framework

我有一个很好的设置，我在 Flash Pro CS5.5 中发布、编译、设计等，并在 Sulbime Text 2 中编写 as3 代码（和一些 xml）。

被迫导入每个图像或生成精灵表似乎是一件白费力气的事。

我的 apk 应用程序使用鼠标事件运行良好，那么切换到八哥有什么意义呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-09T12:23:43.493

我可以用 3 个字母**FPS**回答你。

[当您使用Adob​​e Stage3D](http://www.adobe.com/devnet/flashplayer/stage3d.html)的法律级 API 时，您的性能会得到很大提升。而且您无需担心如何处理它，因为 Starling 正在使用漂亮的 2D 游戏引擎为您扭曲它。

我建议您使用 Starling 进行核心游戏开发和[Gazman SDK](http://gazman-sdk.com)的 UI。

八哥怎么会有一个问题。它没有对矢量的原生支持，因此在许多情况下缩放可能是一个问题，在构建您希望在许多屏幕分辨率下支持的 android 应用程序时在空间上是一个问题。您可以阅读这篇关于解决该问题[的](http://wiki.starling-framework.org/manual/multi-resolution_development)八哥解决方案的文章。

# django - 如何从 Django 的表单或数据库中获取用户 ID？

> ID：14313143
> 
> 赞同：-1
> 
> 时间：2013-01-14T03:52:33.403
> 
> 标签：django

我在 Django 中有一个简单的表单 login.html。我从登录表单中获取用户名和密码，并用于在我的 Django 视图中进行验证：

```
def login_upload(request):
    if request.method == 'POST':
        username = request.POST['username']
        username1 = ''.join(username)
        password = request.POST['password']
        password = ''.join(password)    
        password1 = hashlib.sha1(password).hexdigest()
        user = authenticate(username=username1, password=password1)
        user_id = request.galaxyuser.id
        if len(user) > 0:
            return render_to_response('right.html', {'user_id':user_id}, context_instance=RequestContext(request))
        else:
            return render_to_response('wrong.html', context_instance=RequestContext(request))

    else:
        return render_to_response('login.html', context_instance=RequestContext(request)) 
```

我还想获取稍后必须使用的用户 ID。我尝试使用：

```
user_id = request.galaxyuser.id 
```

但它返回`None`值。这是我的models.py：

```
class GalaxyUser(models.Model):
    id = models.IntegerField(primary_key=True)
    create_time = models.DateTimeField(null=True, blank=True)
    update_time = models.DateTimeField(null=True, blank=True)
    email = models.CharField(max_length=765)
    password = models.CharField(max_length=120)
    external = models.IntegerField(null=True, blank=True)
    deleted = models.IntegerField(null=True, blank=True)
    purged = models.IntegerField(null=True, blank=True)
    username = models.CharField(max_length=765, blank=True)
    form_values_id = models.IntegerField(null=True, blank=True)
    disk_usage = models.DecimalField(null=True, max_digits=16, decimal_places=0, blank=True)
    class Meta:
        db_table = u'galaxy_user' 
```

**编辑：** 我的自定义身份验证功能：

```
def authenticate(username='username', password='password'):
    return GalaxyUser.objects.filter(username=username, password=password) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T03:59:22.977

我不知道`request.galaxyuser`应该是什么，但给定一个用户对象，id 是该对象的一个​​属性。如果凭据有效，该`authenticate`函数应该返回一个用户对象。

```
user = authenticate(username=username1, password=password1)
user_id = request.galaxyuser.id  # what are you doing here?

user_id = user.id  # this is the user ID. 
```

根据您实现自定义`User`类的方式，此问题可能有不同的答案。我假设它是由`authenticate`.

### 更新：

您的示例显示您返回`QuerySet`(a `.filter`) ，它是行列表。

您需要返回一个对象以便查找 ID 属性，或者您需要修改视图以解决这种奇怪的行为。Authenticate 应该返回经过身份验证的用户对象，所以我会做前者。

```
def authenticate(.....):
    try:
        return GalaxyUser.objects.get(username=username, password=password)
    except GalaxyUser.DoesNotExist:
        return None

user = authenticate(...)
user_id = user.id 
```

# c# - 从列表中的列表中按项目排序

> ID：14313144
> 
> 赞同：2
> 
> 时间：2013-01-14T03:52:34.360
> 
> 标签：c#, .net, linq, sorting

我有以下类别的物品清单：

```
public class MonthlyConsumption : UserData
{
    public string Unit { get; set; }

    public List<DailyConsumption> DailyConsumptions { get; set; }
}

public class DailyConsumption
{
    public DateTime Day { get; set; }
    public double? Value { get; set; }
} 
```

如您所见，我有项目列表，其中每个项目还包含天数列表。

我的问题是如何通过内部列表中的特定元素对我的主列表进行排序。

示例：我有 MonthlyConsumption 类型的列表。该列表的每个元素都有 DailyConsumption 类型的集合，并且该集合从今年 1 月开始有 10 天。如何在 1 月 1 日之前订购我的主列表？

**更新**：恐怕我把我的问题用错误的话来表达，我真正想做的是订购我的 MonthlyConsumption 类型列表，其中每个项目**在特定日期**都有自己的 DailyConsumption 类型列表，所以如果我列表中的每个项目都有从 1 月 1 日到 10 日在他的内部收藏中的 10 天，我想在 1 月 1 日按价值订购我的主要清单。

**更新** 我试过

```
return monthlyConsumption.OrderBy(x => x.DailyConsumptions.Where(y => y.Day.Day == 1))
                         .ToList(); 
```

但它给了我至少一个对象必须实现`IComparable`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T04:28:18.167

我还没有测试过，但我相信你可以用 Linq 做到这一点。

假设“monthlyConsumptions”是`List<MonthlyConsumption>`.

```
monthlyConsumptions.OrderBy(mc => mc.DailyConsumptions.Min(dc => dc.Day)); 
```

`MonthlyConsumption`这将按它们最早的顺序排列您的 s 列表`DailyConsumption`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T05:40:37.667

如果我理解正确，也许这就是你所追求的：

```
var targetDay = DateTime.Now; //set to Jan 1st
var result =
    monthylConsumptions.OrderBy(
        x =>
        x.DailyConsumptions.Where(y => y.Day.Date == targetDay.Date).Select(z => (!z.Value.HasValue ? 0 : z.Value.Value)).SingleOrDefault()); 
```

根据您的示例，“targetDay”应设置为 1 月 1 日。

这将在您指定的日期按值升序排序，并在该特定月度中没有值时考虑默认值。

**编辑：** 我刚刚测试了以下单元测试，它通过了，没有显示您描述的错误：

```
[TestFixture]
public class LinqSortTest
{
    public class MonthlyConsumption
    {
        public string Unit { get; set; }

        public List<DailyConsumption> DailyConsumptions { get; set; }
    }

    public class DailyConsumption
    {
        public DateTime Day { get; set; }
        public double? Value { get; set; }
    }

    [Test]
    public void SomeTest()
    {
        var targetDay = new DateTime(2013, 1, 1);
        var monthlyConsumptions = new List<MonthlyConsumption>();
        monthlyConsumptions.Add(new MonthlyConsumption
            {
                Unit = "first",
                DailyConsumptions = new List<DailyConsumption>
                    {
                                new DailyConsumption { Day = new DateTime(2013, 1, 1), Value = 5 },
                                new DailyConsumption { Day = new DateTime(2013, 1, 5), Value = 100 }
                    }
            });
        monthlyConsumptions.Add(
            new MonthlyConsumption
                {
                    Unit = "second",
                    DailyConsumptions =
                        new List<DailyConsumption>
                            {
                                new DailyConsumption { Day = new DateTime(2013, 1, 1), Value = 2 },
                                new DailyConsumption { Day = new DateTime(2013, 1, 5), Value = 1 }
                            }
                });

        var result =
            monthlyConsumptions.OrderBy(
                x =>
                x.DailyConsumptions.Where(y => y.Day.Date == targetDay.Date).Select(
                    z => (!z.Value.HasValue ? 0 : z.Value.Value)).SingleOrDefault()).ToList();

        Assert.AreEqual("second", result[0].Unit);
    }
} 
```

如您所见，`Assert`确认确实将第二项放在第一位，因为“第二”的 1 月 1 日值低于“第一”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T10:08:46.990

尝试：

```
monthlyConsumptions
    .SelectMany(mc => mc.DailyConsumptions)
    .Where(dc = > dc.Day.Date.Day == 1 && dc.Day.Date.Month == 1)
    .OrderBy(dc => dc.Value)
    .Select(dc => dc.MonthlyConsumption); 
```

这将得到 all `DailyConsumptions`for all `MonthlyConsumptions`，然后仅过滤来自 1 月 1 日的那些，对它们进行排序，`Value`而不是从中获取任何数据，而是返回父实体，即`MonthlyConsumption`.

所以你得到`IQuerable<MonthlyConsumption>`你想要的命令。

编辑：这将在 LINQ to Entities 中起作用，在您的情况下可能不会很遗憾，除非您在`DailyConsumption`调用中具有父属性`MonthlyConsumption`。

# github - 使用来自 master 分支的 html/javascript 文件作为 github 页面

> ID：14313146
> 
> 赞同：1
> 
> 时间：2013-01-14T03:52:42.840
> 
> 标签：github, github-pages

我的项目是一个 javascript doohicky，所以整个代码都在 javascript/html/css 中。为了托管该项目，我创建了一个 github 页面。

github页面有没有办法“指向”我的主分支中的javascript和html？

比如：我的主分支有一个index.html，有没有办法告诉github把这个index.html作为gh页面的索引页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:08:17.127

不，没有办法做到这一点（谷歌代码可以做到这一点，AFAIK）。你能做的最好的事情是：

a) 使 gh-pages 分支成为 master 的一个分支（而不是重置它），并且`git rebase`每次对 master 进行更新时，只将 gh-pages 分支到 master 分支

或者，

b) 以托管在 gh-pages 分支上的方式使 index.html 页面“智能”，但它只是一个从主分支获取其内容的空“shell”页面。我想这可以通过一个覆盖整个页面并指向主分支中的 index.html 的 iframe 来完成（因此，实际上，iframe 变成了页面）。或者，gh-pages 分支上的网页可以通过 AJAX+GitHub API 从 master 分支动态获取内容，然后将获取的内容注入自身（这仅适用于 HTML 内容，因为脚本和样式很容易通过和标签注入）。

对于基本上是 webapps 的项目，我通常采用 a) 方法。

# javascript - 从 this.parent 获取 ID

> ID：14313148
> 
> 赞同：1
> 
> 时间：2013-01-14T03:52:46.453
> 
> 标签：javascript, this

尝试通过 $(this).parent() 使用 javascript 获取 div 的 id 名称。

Javascript代码如下：

```
$(function() {
        $('a.close').click(function() {
            $(this).parent().fadeOut(1500);
            $.cookie($(this).attr('id'), 'true', { expires: null});
            alert($.cookie($(this).attr('id')));
            return false;
        });
        if($.cookie('hidden') == 'true'){
            $('#errororganinfoinchide-this').hide();
        }
    }); 
```

试图从下面的 HTML 中获取 id errororganinfoinchide-this。尝试这种方式，因为该 id 可能因页面而异。

```
 <aside class='warning' id='errororganinfoinchide-this'>
            <a href='#errororganinfoinchide-this' class='close'><img src='http://resources.site.co.nz/backgrounds/close.png' /></a>
            <img src='http://resources.site.co.nz/backgrounds/icon_warning.png' class='messageimg' />
            <h4>Warning - Organisation Info</h4>
            <p>Sorry, there was an error opening the "Organisation Info" Box. Please try again later.</p>
        </aside> 
```

非常感谢所有帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T03:57:03.547

你有没有尝试过这样的事情：

```
 $(this).parent().attr('id') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T04:08:45.830

你也可以这样做：

```
$(this).parent("aside.warning").attr("id"); 
```

或者

```
$(this).parent(".warning").attr("id"); 
```

# c#-4.0 - 检测应用程序是否在远程应用程序中运行

> ID：14313149
> 
> 赞同：1
> 
> 时间：2013-01-14T03:52:48.200
> 
> 标签：c#-4.0, rdp

有没有办法从用 C# 编写的应用程序中检测它是否作为使用 RDP 的远程应用程序启动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T05:40:30.230

获取应用程序进程的父进程并检查它是否由 rdpinit.exe 引发。如果是这样，它是一个 RemoteApp。

获取父进程 ID 的快速示例（对不起，vb.net）：

```
<Extension()>
    Public Function GetParentProcessId(process As Process) As Integer
        If process Is Nothing Then Throw New NullReferenceException()

        Dim parentProcessId As Integer
        Dim snapShot As IntPtr = IntPtr.Zero

        Try
            snapShot = CreateToolhelp32Snapshot(SnapshotFlags.Process, 0)

            If snapShot <> IntPtr.Zero Then
                Dim procEntry As New PROCESSENTRY32
                procEntry.dwSize = CUInt(Marshal.SizeOf(GetType(PROCESSENTRY32)))

                If Process32First(snapShot, procEntry) Then
                    Do
                        If process.Id = procEntry.th32ProcessID Then
                            parentProcessId = CInt(procEntry.th32ParentProcessID)
                            Exit Do
                        End If
                    Loop While Process32Next(snapShot, procEntry)
                End If
            End If
        Catch ex As Exception
            Throw
        Finally
            If snapShot <> IntPtr.Zero Then
                CloseHandle(snapShot)
            End If
        End Try

        Return parentProcessId
    End Function 
```

现在您可以轻松获取父进程。

问候，扬

# split - 如何将演讲拆分为单词

> ID：14313150
> 
> 赞同：1
> 
> 时间：2013-01-14T03:52:48.247
> 
> 标签：split, speech-recognition, voice

我正在玩语音识别。是否可以将语音拆分为多个单词？

如果可能，请向我推荐支持将语音拆分为单词的库。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T11:36:13.577

如果您知道说话者所说的内容，您可以执行*[强制对齐](http://www.isip.piconepress.com/projects/speech/software/tutorials/production/fundamentals/v1.0/section_04/s04_04_p01.html)*以生成单词（或音素）时间对齐。[CMU Sphinx](http://cmusphinx.sourceforge.net/)、[HTK](http://htk.eng.cam.ac.uk/)和[Kaldi](http://kaldi.sourceforge.net/about.html)等工具包可以执行此操作。如果不知道说话者说了什么，您可以执行标准语音识别并使用时间信息来获取单词边界，尽管识别输出中可能存在错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:11:22.090

没有关于已发音的短语的先验信息，这项任务非常具有挑战性。作为一种方法，您可以尝试将 VAD 应用于语音并通过停顿将声音分成单词。但是在自发讲话的情况下，人们通常不会在某些单词之间进行间隔。所以肯定会有问题。

[这里](https://stackoverflow.com/questions/5367214/any-simple-vad-implementation)建议使用一些 VAD 库。

# php - 使用 msaccess 的 php

> ID：14313154
> 
> 赞同：1
> 
> 时间：2013-01-14T03:53:15.233
> 
> 标签：php, database, ms-access, odbc

因为没有人回答我的问题[Codeigniter using ms access database](https://stackoverflow.com/questions/14274274/codeigniter-using-ms-access-database)，所以我提出了新问题我不使用 codeigniter

如果我在我的计算机上使用 mdb，它可以工作，但如果我在网络中的另一台计算机上使用 mdb

我收到错误这是我的代码

```
<?php

$connect = odbc_connect("testdb", "", "");
$query = "SELECT * FROM ACGroup";
$result = odbc_exec($connect, $query);

while(odbc_fetch_row($result)){
  $name = odbc_result($result, 1);
  echo("$name");
}

?> 
```

我制作 odbc，其中数据来自我网络中的另一台计算机

```
"testdb" are data sourcename and database \\ip\folder\testdb.mdb 
```

我得到了这个错误

```
 Warning: odbc_connect() [function.odbc-connect]: SQL error: [Microsoft][ODBC Microsoft Access Driver] 
    The Microsoft Jet database engine cannot open the file '(unknown)'. It is already opened exclusively by another user, or you need permission to view its data.,
     SQL state S1000 in SQLConnect in D:\blabla\coba.php on line 3 
```

我已经尝试了文件夹设置，但它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T04:40:47.380

您使用的 ODBC 连接字符串 ( `"testdb"`) 甚至没有指定数据库驱动程序，更不用说数据库文件了。您需要阅读`$dsn`. （[php.net 页面](http://us2.php.net/odbc_connect)甚至有一些 Access 文件的示例。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-13T09:57:56.200

问题可能在于您的 Apache 用户对 mdb 文件的权限。

转到您的 mdb 文件，右键单击文件 -> 属性 -> 安全选项卡，查看您的 Apache 用户是否在对 mdb 文件具有访问/控制权的用户组中。

要查看/更改您的 Apache 用户，请转到控制面板-> 管理工具 -> 服务，右键单击 Apache 服务 -> 属性 -> 登录选项卡。在登录为选项中，查看所选用户是否属于有权访问 mdb 文件的用户组。如果没有，请创建一个并将其添加到用户组，然后将其用作 Apache 帐户。

# css - CSS :not() 选择器指定前一个元素

> ID：14313158
> 
> 赞同：1
> 
> 时间：2013-01-14T03:54:17.560
> 
> 标签：css, css-selectors

这是一个非常简单的问题，我无法完全理解。

我有一系列这样的div：

```
<h1>Heading 1</h1>

<h2>Heading 2</h2>

<p>Paragraph text</p>

<h2>Heading 3</h2>

<p>Paragraph text</p> 
```

在 CSS 中，我可以将 h1 标签后面的 h2 标签作为目标：`h1+h2{}`，但是我似乎不能`:not()`以这种方式使用。例如，我想使用：

```
#text h2:not(h1+h2){
    margin-top:3em;
} 
```

但这似乎不起作用。我是在做某种愚蠢的语法错误还是不可能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T04:02:24.410

如前所述，CSS选择器不允许在其中使用组合器，因此确实是语法错误[。](https://stackoverflow.com/questions/14251393/css3-not-selector-to-test-parents-class/14251700#14251700)`:not()`

在这种情况下，由于`+`组合器的工作方式，您*应该*能够简单地`+ h2`移出`:not()`并删除它`h2`之前的，如下所示：

```
#text :not(h1) + h2 {
    margin-top: 3em;
} 
```

如果`h2`将永远是第一个孩子（根据您的示例，它不应该是），并且您想要匹配它，您需要稍微扩展选择器：

```
#text h2:first-child, #text :not(h1) + h2 {
    margin-top: 3em;
} 
```

然而，如果这两种方法中的任何一种都失败了，你总是可以使用好的 ol' override，[正如 Joseph Silber 演示](https://stackoverflow.com/questions/14313158/css-not-selector-specifying-previous-element/14313177#14313177)的那样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T03:57:24.367

CSS`not`伪选择器不允许使用复杂的选择器。你对此无能为力。

要获得所需的功能，您必须覆盖它：

```
#text h2 {
    margin-top:3em;
}

#text h1 + h2 {
    margin-top: 0;
} 
```

# vb6 - 带图片的数据网格

> ID：14313165
> 
> 赞同：0
> 
> 时间：2013-01-14T03:54:58.103
> 
> 标签：vb6

我在 Visual Basic 6 中有一个 DataGrid。这个 DataGrid 显示产品列表，如下所示： ![在此处输入图像描述](../Images/a66edac93e59add90ddfcf6ecfaeedc9.png)

每当用户从 DataGrid 中选择产品时，我都想更改 Image 控件中的图像。我正在通过以下代码执行此操作：

```
Private Sub txtBarcode_Change()
On Error GoTo nosuchfile
    picture.picture = App.Path & "Images\products\" & txtBarcode.Text & ".jpg"
nosuchfile:
picture.picture = App.Path & "Images\products\no_image.jpg"
End Sub 
```

txtBarcode 是一个隐藏的文本框，其中包含当前在 DataGrid 中选择的条形码/id。

我的问题：图像似乎没有改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:45:49.403

要加载图片，您需要调用 LoadPicture()

```
Picture1.Picture = LoadPicture("c:\temp\pic.bmp") 
```

# java - 如何在Java中查找字符串描述的类

> ID：14313168
> 
> 赞同：-1
> 
> 时间：2013-01-14T03:55:22.307
> 
> 标签：java, types, getmethod

> **可能重复：**
> [Java 中的 Class.getArrayType？](https://stackoverflow.com/questions/4719932/class-getarraytype-in-java)

我需要获取由字符串表示的类型的类。我正在尝试调用 getMethod，但我只有它所需类型的字符串列表。

Class.forName(str) 当 str 是一个简单的类时有效，但不是，例如，像这样的数组：

```
Class<?>[] typeClasses = new Class<?>[]{Class.forName("my.type.class[]")};
Method method = someClass.getMethod(methodString, typeClasses); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T04:08:46.180

获取`Class`数组类型对象的一种方法是调用`getClass()`反射创建的数组实例。例如

```
Class someClass = Some.class;
Class someArrayClass = java.reflect.Array.newInstance(someClass, 0).getClass(); 
```

也可以使用`Class.forName()`，但需要以内部形式指定类名；例如 an 的类名`Object[]`是`"[Ljava.lang.Object;"`。有关类名格式的详细信息，请参见[Class.getName()](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getName%28%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T04:15:22.660

问题是您在示例中传递的字符串不是该类的正确字符串表示形式。此示例代码运行良好并打印为 true：

```
String[] array = new String[] { "hello" };
Class<?> arrayClass = array.getClass();
String stringClass = arrayClass.getName();
Class<?> parsedClass;
try {
    parsedClass = Class.forName(stringClass);
} catch (ClassNotFoundException e) {
    throw new RuntimeException(e);
}
System.out.println(arrayClass.equals(parsedClass)); 
```

有关如何将数组类型表示为字符串的示例，请参阅[Class#getName()的 Javadoc。](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getName%28%29)如果这些字符串来自其他地方，并且您知道期望的格式，则可以编写一个方法将字符串转换为类加载器期望的格式。

# java - java/javascript读取在线XML文件

> ID：14313171
> 
> 赞同：2
> 
> 时间：2013-01-14T03:55:34.510
> 
> 标签：java, javascript, jsp, servlets

我想从在线 xml 文件中获取数据，例如[http://data.one.gov.hk/others/td/speedmap.xml](http://data.one.gov.hk/others/td/speedmap.xml)。当我在本地（没有 servlet）从 HTML 调用 javascript 时，它可以工作。但是，当我通过 jsp 和 java servlet 调用它时，它不起作用。是否有另一种方法可以让我从在线 xml 文件中获取数据？

contentXML.jsp：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <p>CONTENT_XML</p>

        <%@ include file="source_file/js_workable.js" %>
        <%@ include file="source_file/data_retrieve.js" %>

    </body>
</html> 
```

data_retrieve.js

```
<script  LANGUAGE="JavaScript">

         if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
           xmlhttp=new XMLHttpRequest();
         }
         else { // code for IE6, IE5
           xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
         }

         document.write(xmlhttp.status);
         document.write(xmlhttp.readyState);
         document.write(xmlhttp.statusText);

         xmlhttp.open("GET","http://data.one.gov.hk/others/td/speedmap.xml",false);
         xmlhttp.send(); 

         xmlDoc=xmlhttp.responseXML; 

         document.write("<table border='1'>");
         var x=xmlDoc.getElementsByTagName("jtis_speedmap");
         for (i=0;i<x.length;i++){ 
           document.write("<tr><td>");
           document.write(x[i].getElementsByTagName("LINK_ID")[0].childNodes[0].nodeValue);
           document.write("</td><td>");
           document.write(x[i].getElementsByTagName("ROAD_TYPE")[0].childNodes[0].nodeValue);
           document.write("</td></tr>");
         }
         document.write("</table>");

</script> 
```

.html 文件：

```
<html>
 <body>

<script>
 if (window.XMLHttpRequest)
   {// code for IE7+, Firefox, Chrome, Opera, Safari
   xmlhttp=new XMLHttpRequest();
   }
 else
   {// code for IE6, IE5
   xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
   }
 xmlhttp.open("GET","http://data.one.gov.hk/others/td/speedmap.xml",false);
 xmlhttp.send();
 xmlDoc=xmlhttp.responseXML; 

document.write("<table border='1'>");
 var x=xmlDoc.getElementsByTagName("jtis_speedmap");
 for (i=0;i<x.length;i++)
   { 
  document.write("<tr><td>");
   document.write(x[i].getElementsByTagName("LINK_ID")[0].childNodes[0].nodeValue);
   document.write("</td><td>");
   document.write(x[i].getElementsByTagName("ROAD_TYPE")[0].childNodes[0].nodeValue);
   document.write("</td></tr>");
   }
 document.write("</table>");
 </script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T04:02:13.870

它是跨域 ajax 请求，因此被 Access-Control-Allow-Origin 规则阻止。

解决方案你可以使用 jsp/servlet 发出一个 HTTP 请求来首先检索 XML 内容，然后你的 ajax 请求在本地继续你的 javascript。

# windows-8 - 如何以编程方式更改 winjs 列表视图的列表视图项大小？

> ID：14313180
> 
> 赞同：0
> 
> 时间：2013-01-14T03:57:57.720
> 
> 标签：windows-8, winjs

我有模板与我正在使用 html5 和 javascript 开发的 windows 商店应用程序中的列表视图绑定。我需要以编程方式更改列表视图项的大小。基本上我的页面上有一个输入类型范围。用户将更改输入的值，根据该值我应该能够以编程方式更改列表视图项的大小。

任何帮助或指针将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-22T01:38:18.990

我知道这很旧，但我刚刚花了几个小时进行广泛的测试（因为我不想切换到网格模式），我找到了一种非常简单的方法，可以让你拥有任何高度的物品而不会重叠，我虽然我会分享它，但您需要做的就是将其添加到您的 css 中：

```
.win-listview .win-listlayout .win-container { 
    height:auto; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T04:22:52.720

您可以使用模板中项目上设置的类来设置列表视图中项目的大小。你可以：

1.  为您想要的不同尺寸定义不同的类
2.  在 CSS 中定义尺寸。例子：

    ```
    .small {
        height: 150px;
        width: 150px;
    }

    .large {
        height: 300px;
        width: 300px;
    } 
    ```

3.  在模板项上设置适当的类：

    ```
    var templateItem = document.querySelector("#regularListIconTextTemplate .regularListIconTextItem");
    WinJS.Utilities.addClass(templateItem, "large"); 
    ```

4.  刷新列表视图：

    ```
    element.querySelector("#listView").winControl.forceLayout(); 
    ```

# javascript - JavaScript 和正则表达式：如何检查字符串是否仅为 ASCII？

> ID：14313183
> 
> 赞同：39
> 
> 时间：2013-01-14T03:58:20.950
> 
> 标签：javascript, regex

我知道我可以通过`W`像这样应用正则表达式来验证带有单词（0-9 AZ az 和下划线）的字符串：

```
function isValid(str) { return /^\w+$/.test(str); } 
```

但是如何检查字符串是否仅包含 ASCII 字符？（我想我已经接近了，但我错过了什么？）

参考：[https ://stackoverflow.com/a/8253200/188331](https://stackoverflow.com/a/8253200/188331)

**更新**：标准字符集对我来说就足够了。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-01-14T04:04:15.637

您需要做的就是测试字符是否在正确的字符范围内。

```
function isASCII(str) {
    return /^[\x00-\x7F]*$/.test(str);
} 
```

或者，如果您想使用扩展的 ASCII 字符集：

```
function isASCII(str, extended) {
    return (extended ? /^[\x00-\xFF]*$/ : /^[\x00-\x7F]*$/).test(str);
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-14T04:02:44.317

您不需要 RegEx 来执行此操作，只需检查该字符串中的所有字符是否具有 0 到 127 之间的字符代码：

```
function isValid(str){
    if(typeof(str)!=='string'){
        return false;
    }
    for(var i=0;i<str.length;i++){
        if(str.charCodeAt(i)>127){
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-01-11T07:02:29.780

对于 ES2018，Regexp 支持[Unicode 属性转义](https://github.com/tc39/proposal-regexp-unicode-property-escapes)，可以`/[\p{ASCII}]+/u`用来匹配 ASCII 字符。现在很清楚了。

支持的浏览器：

*   铬 64+
*   Safari/JavaScriptCore 从 Safari Technology Preview 42 开始

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-05T15:42:30.230

```
var check = function(checkString) {

    var invalidCharsFound = false;

    for (var i = 0; i < checkString.length; i++) {
        var charValue = checkString.charCodeAt(i);

        /**
         * do not accept characters over 127
         **/

        if (charValue > 127) {
            invalidCharsFound = true;
            break;
        }
    }

    return invalidCharsFound;
}; 
```

# linux - aoe 磁盘作为 /proc/partitions 中的 /dev/sda

> ID：14313185
> 
> 赞同：0
> 
> 时间：2013-01-14T03:58:44.700
> 
> 标签：linux

我将 AoE 磁盘用于特定的 Linux 安装。

我需要告诉 linux 系统将 /dev/etherd/e0.0 视为 /dev/sda，我已经创建了 /dev/etherd/e0.0 到 /dev/sda 的硬链接，并且它可以工作。

但现在我需要让系统在 /proc/partitions 中看到 /dev/sda (/dev/etherd/e0.0)。

有一个命令可以做到这一点吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T04:36:45.540

没有办法做到这一点。该`/dev/sda`节点保留给可以使用 SCSI/SATA/IDE 磁盘驱动程序访问的设备；AoE 设备不使用该机制，因此它们总是会以不同的方式显示。创建硬链接只会使事情变得混乱；这样做是不可取的。

我不能 100% 确定是否可以通过 AoE 启动机器。如果所有配置都是自动的，可以直接进行，也可以通过设置内核命令行参数来进行；您可能需要创建一个自定义 initrd 来初始化网络并调出卷。

# eclipse - 以别名执行脚本

> ID：14313188
> 
> 赞同：2
> 
> 时间：2013-01-14T03:59:33.863
> 
> 标签：eclipse, alias, zshrc

我正在尝试使用别名`eclipse`来执行`eclipse -data $(pwd)`. 但是，由于某种原因，将此添加到我的 zshrc 不起作用：

`alias eclipse="eclipse -data $(pwd)"`

我似乎找不到正确的语法 - 有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T05:29:48.957

我认为您不能在别名中使用参数（[其他](https://stackoverflow.com/questions/2904677/alias-with-parameters) [帖子](https://stackoverflow.com/questions/2174298/zsh-alias-function)似乎表明了这一点）。您可以改为定义一个函数：

```
function eclipse () {
     eclipse -data "$(pwd)"
} 
```

当然，如果你这样做，跑步`eclipse`会给你：

```
eclipse: maximum nested function level reached 
```

这是因为一旦你定义了一个名为`eclipse`屏蔽外部命令的函数，就会导致无限递归循环。

相反，您可以使用[命令](http://lavica.fesb.hr/cgi-bin/info2html?(zsh)Precommand%20Modifiers)来告诉`zsh`忽略任何名为的别名或函数`eclipse`：

```
function eclipse () {
     command eclipse -data "$(pwd)"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:22:20.960

在这种情况下，您可以使用 `command` 来执行 pwd：

```
alias eclipse="eclipse -data `pwd`" 
```

# c# - 构造 WaveIn 时出现 NAudio InvalidOperationException

> ID：14313191
> 
> 赞同：8
> 
> 时间：2013-01-14T04:00:03.080
> 
> 标签：c#, .net, audio, audio-recording, naudio

我对 NAudio 很陌生，正在尝试编写一个小程序来记录来自麦克风的一些音频并将其写入 Wave 文件。当我在程序的 Main 函数中调用 recordStuff() 函数时，程序无法通过 WaveIn 对象的构造，并且程序因 InvalidOperationException 而死，其中显示消息“使用 WaveInEvent 在后台线程上录制” . 了解 NAudio 的人可以告诉我这意味着什么吗？我曾尝试在它自己的线程中调用 recordStuff() 函数，但最终得到相同的结果。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using NAudio.Wave;

namespace SimpleWave
{
    class Recorder
    {
        public Recorder()
        {
            writer = new WaveFileWriter("C:\\Users\\Paul\\Desktop\\yeah.wav", new NAudio.Wave.WaveFormat(44100, 1));
        }

        public static List<byte> buff = new List<byte>();
        public static WaveFileWriter writer;

        public void recordStuff()
        {
            // WaveIn Streams for recording
            WaveIn waveInStream;

            waveInStream = new WaveIn();
            waveInStream.DeviceNumber = 0;
            waveInStream.WaveFormat = new WaveFormat(44100, 2);
            writer = new WaveFileWriter(@"C:\Users\Paul\Desktop\this.wav", waveInStream.WaveFormat);

            waveInStream.DataAvailable += new EventHandler<WaveInEventArgs>(waveInStream_DataAvailable);
            waveInStream.StartRecording();
        }

        public void waveInStream_DataAvailable(object sender, WaveInEventArgs e)
        {
            writer.Write(e.Buffer, 0, e.BytesRecorded);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-14T06:52:57.470

默认`WaveIn`构造函数使用 Windows 消息进行回调。但是，如果您正在运行控制台应用程序或从后台线程运行，则不会处理这些 Windows 消息。最简单的解决方案是改用`WaveInEvent`该类。

```
waveInStream = new WaveInEvent(); 
```

您的代码的另一个问题是您需要`waveInStream`在完成录制之前保持活动状态（即您需要能够`StopRecording`在某个时候调用），因此您应该创建`waveInStream`一个类的字段`Recorder`。

# extjs - Extjs4 设置下边框为假

> ID：14313193
> 
> 赞同：1
> 
> 时间：2013-01-14T04:00:19.240
> 
> 标签：extjs, extjs4, extjs-mvc

我有一个表单，我需要将底部边框设置为 false。但我无法做到。而且不知道该怎么做。谁能帮我解决这个问题？！下面是我的代码：

```
Ext.define('Ext4Example.view.sme.Smeform' ,{
extend: 'Ext.form.Panel',
alias : 'widget.smeform',
title: '<div style="text-align:center;">Basic Info</div>',
bodyPadding : '10 10 0 10',
bottomBorder: false, 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T05:00:58.943

刚刚使用了一个css，它就可以工作。这是下面的答案：

在我看来 ：

```
border: false,
componentCls: 'bottom-border', 
```

在css文件中：

```
.bottom-border {
    border-left: 1px solid #99BBE8;
    border-right: 1px solid #99BBE8;
    border-top: 1px solid #99BBE8;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T12:30:04.553

我不确定，因为它取决于上下文，但你应该试试这个：

```
style: 'border-bottom: 0' 
```

# vb.net - 正确大小写字母

> ID：14313196
> 
> 赞同：-1
> 
> 时间：2013-01-14T04:00:45.663
> 
> 标签：vb.net, casing

我的套管功能有问题。我使用替换将所有连词更改为较低的但我仍然有一个错误>

```
Private Function UpCsing(ByVal sValue As String) As String
    Dim toConvert As String() = sValue.Split(" ")
    Dim lst As New List(Of String)

    For i As Integer = 0 To toConvert.Length - 1
        Dim converted As String = ""
        If toConvert(i).Contains("^") Then
            converted = toConvert(i).ToUpper.Replace("^", "")
        Else
            converted = StrConv(toConvert(i), VbStrConv.ProperCase).Replace("^", "")
        End If
        lst.Add(converted)

    Next
    Dim ret As String = ""
    For i As Integer = 0 To lst.Count - 1
        If i = 0 Then
            ret = lst(0)
        Else
            ret += " " + lst(i)
        End If
    Next
    Return ret.Replace(" For ", " for ").Replace(" In ", " in ").Replace(" Of ", " of ").Replace(" And ", " and ").Replace(" And/Or ", " and/or ").Replace(" By ", " by ") _
.Replace(" By ", " by").Replace(" 2Nd ", " 2nd ").Replace(" 3Rd ", " 3rd ").Replace(" At ", " at ").Replace("And/Or ", "and/or ").Replace("1St", "1st").Replace("2Nd", "2nd").Replace("3Rd", "3rd") _
.Replace("At ", "at ").Replace(" At", " at").Replace(" Of", " of").Replace(" & ", " and ").Replace("Poc", "POC").Replace(" As ", " as ") _
.Replace("C/O", "c/o").Replace("$ ", "$").Replace(" And/Or ", " and/or ")

End Function 
```

错误示例：'For' 应该是 'for' 但我的输出中的单词 'Forward' 必须是 'Forward' 将其更改为 'forward'

示例 'For the main event and for us to forward' 输出应该是 'For the Main Event and for us to Forward'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T05:04:54.907

我试过这段代码：

```
MessageBox.Show(UpCsing("for kelvzy sake I am paying^ this forward... forward^ for-ward...")) 
```

我得到了正确的结果：

> * * *
> 
> * * *
> 
> 为了 Kelvzy 的缘故，我正在为这个前锋付出代价...... FORWARD 前锋......
> 
> * * *
> 
> 好的
> 
> * * *

**编辑：**

> 示例 'For the main event and for us to forward' 输出应该是 'For the Main Event and for us to Forward'

您的代码以大写 F 输出 Forward，这正是您所期望的。

![在此处输入图像描述](../Images/6e1fd80790e0d622e230424751fd308f.png)

编辑2：

原因是因为所有没有前缀/附加 ^ 的单词都使用这行代码转换为 ProperCase：

```
converted = StrConv(toConvert(i), VbStrConv.ProperCase).Replace("^", "") 
```

*提示：无需将 ^ 替换为“”，因为转换为 ProperCase 的单词不会重新固定/附加 ^。*

# javascript - Javascript数学库

> ID：14313210
> 
> 赞同：0
> 
> 时间：2013-01-14T04:03:18.950
> 
> 标签：javascript, math, formula

我正在开发一个项目，其中用户定义要针对用户输入执行的公式。

例如，在 UI 端，用户将输入 varA 和 varB 的值。javascript 代码应该获取这两个值，将它们注入如下公式：

```
varA + varB ** (1/2.0) 
```

然后返回结果。

我面临的问题是某些操作（如`**`上面的示例）不会直接映射到 javascript，必须以某种方式将这些公式转换为它。是否有任何库可以实现我可以使用的这种东西？

编辑：我找到[了这个](https://github.com/silentmatt/js-expression-eval "解析器.js")，它完全符合我的需要（并且合并`^`而不是`**`，这是一个`replace`远离。）

还有更好的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T17:57:34.960

您可以使用 math.js 库中的表达式解析器。不过，也使用`^`角色来获得力量。

[http://mathjs.org](http://mathjs.org)

示例用法：

```
var parser = math.parser();
parser.eval('a = 1.2 / (2.3 + 0.7)');   // 0.4
parser.eval('2 * a');                   // 0.8
parser.eval('5.08 cm in inch');         // 2 inch
parser.eval('sin(45 deg) ^ 2');         // 0.5
parser.eval('9 / 3 + 2i');              // 3 + 2i
parser.eval('det([-1, 2; 3, 1])');      // -7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-10T19:26:44.697

使用[ES6](https://github.com/tc39/proposal-exponentiation-operator)，您可以执行以下操作：

```
let varA = 1
let varB = 5
const answer = varA + varB ** (1 / 2.0) 
```

```
let varA = 1
let varB = 5
const answer = varA + varB ** (1 / 2.0)
const output = `${varA} + ${varB} ** (1 / 2.0) =\n${answer}`
document.querySelector('.output').innerHTML = output
```

```
.output {
  font-size: 1.5em;
}
```

```
<pre class="output"></pre>
```

# r - 循环遍历 R 中的选定值

> ID：14313211
> 
> 赞同：0
> 
> 时间：2013-01-14T04:03:20.907
> 
> 标签：r, loops, next

我只想为某些值迭代一个循环，所以我使用这个：

```
present <- c(3,5,7,8)
for(i in present)
{
   print(i)
} 
```

这给了我

```
[1] 3
[1] 5
[1] 7
[1] 8 
```

但是我需要跳转到循环中的下一个值，比如我不想在上面的示例中打印 5。

我不能使用下一个，因为我希望它像这样嵌套

```
present <- c(3,5,7,8)
for(i in present)
{
    k <- i
    "Jump to next value of present"
    while(k < "The next value for i should come here")
    {
        k <- k + 1
        print(k)
    }
} 
```

输出将是 3 4 5 6 7 8 但条件必须检查 k 的值是否超过 i 的下一个值。

有没有办法做到这一点？

我将借助 C 进一步解释，

```
for(i=0; i < 10; i++)
{
   for(k=i;k <= i+1;k++)
   {
       printf("%d", k);
   }
} 
```

该链接包含上述代码 [http://codepad.org/relkenY3的输出](http://codepad.org/relkenY3)

在 C 中这很容易，因为下一个值是按顺序排列的，但在这里下一个值是未知的，因此出现了问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T04:48:22.887

你应该做的是遍历两个向量：

```
x <- head(present, -1)
# [1] 3 5 7
y <- tail(present, -1)
# [1] 5 7 8 
```

并且这样做的功能是`mapply`（看看`?mapply`）。您的伪代码的近似翻译是：

```
invisible(mapply(function(x, y) while(x < y) {x <- x + 1; print(x)}, x, y)) 
```

但也许你会发现这更有趣：

```
mapply(seq, x + 1, y) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T05:09:31.167

我怀疑答案是使用`seq_along`并将其用作“当前”的索引，但正如其他人指出的那样，即使进行简单的修改，您的代码也不承诺提供您期望的内容。`K <- K=1`赋值跳得太远，无法在任何时候提供 3 的值，并且终止条件同样不清楚。它以您构造的形式变成无限循环。处理这个；

```
present <- c(3,5,7,8)
    for(i in seq_along(present))
    {
        k <- i
        while(k < length(present) )
        {
            k <- k + 1
            print(present[k])
        }
    } 
```

# google-maps-api-3 - Google Places API 这是否违反了 TOC？

> ID：14313215
> 
> 赞同：6
> 
> 时间：2013-01-14T04:04:29.460
> 
> 标签：google-maps-api-3, google-places-api

我想要一个小搜索框，用户可以在其中搜索一个地方（使用 API），然后当他们选择一个地方时，例如“自由女神像，纽约”，我想把他们带到一个详细页面 IE mysite/ ID/纽约自由女神像

然后让他们在那个页面上做一些事情，

我想在详细信息页面上从谷歌获得的唯一数据是地点 ID，当然还有地点的名称和地址，就是这样，然后我想做自己的事情并将自己的数据附加到地点。

我有点恼火，很难理解什么是可以接受的，他们应该用外行的方式表达这个 TOC。

[以下是他们TOC](https://developers.google.com/maps/terms)的一些相关信息：

a) 不得未经授权复制、修改、创作衍生作品或展示内容。除非本条款明确允许，否则您不得复制、翻译、修改或创建任何内容或其任何部分的衍生作品（包括创建或贡献于数据库）或公开展示任何内容或其任何部分。例如，禁止以下行为： (i) 创建地图图块的服务器端修改；(ii) 将多个静态地图图像拼接在一起以显示大于 Maps API 文档中允许的地图；(iii) 根据内容创建邮件列表或电话营销列表；(iv) 将内容导出、写入或保存到第三方的基于位置的平台或服务。

(b) 不得预取、缓存或存储内容。您不得预取、缓存或存储任何内容，除非您可以存储：(i) 有限数量的内容，以提高 Maps API 实施的性能，前提是您临时这样做（在任何情况下都不得超过 30 个日历日）、安全且不允许在服务之外使用内容的方式；(ii) Maps API 文档明确允许您存储的任何内容标识符或密钥。例如，您不得使用内容创建独立的“地点”数据库或其他本地列表信息。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T16:57:27.647

您可以在此处找到与您的问题相关的政策：[https ://developers.google.com/places/policies](https://developers.google.com/places/policies)

1.  您**可以**使用搜索框，**也可以**使用结果在页面上显示它们而不显示谷歌地图

2.  目前尚不清楚您是否在应用程序中使用任何类型的地图，但是当您这样做时，您**可能不会**使用地点服务提供的任何数据在此地图上使用它们（例如，您可能不会使用地点的纬度-在此地图上创建标记的结果）

3.  您**必须**显示 google-logo（因为您显示从服务收到的数据名称和地址）

4.  当响应包含`html_attributions`该地点时，您还**必须**显示这些`html_attributions`

# wpf - 无法加载文件或程序集“Windows，版本=255.255.255.255，文化=中性，PublicKeyToken=null，ContentType=WindowsRuntime”

> ID：14313216
> 
> 赞同：1
> 
> 时间：2013-01-14T04:04:29.360
> 
> 标签：wpf, visual-studio-2010, xaml, visual-studio-2012

安装 vs2012 并更新我的 vs2010 WPF 项目后，我在 WPF 设计器中收到以下错误：无法加载文件或程序集“Windows，版本=255.255.255.255，文化=中性，PublicKeyToken=null，ContentType=WindowsRuntime”或其依赖项之一. 不支持操作。（来自 HRESULT 的异常：0x80131515）

项目中的每个 xaml 页面都会发生这种情况。

```
<dx:DXWindow.DataContext>
    <vm:MyViewModel/>
</dx:DXWindow.DataContext> 
```

VS 将 vm:MyViewModel 标记为问题行。如果我将其注释掉，设计器窗口会显示一个空白页面。同样的项目在 VS2010 中运行良好。在两个版本的 Visual Studio 中，目标框架都设置为 4。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-13T05:27:40.400

当与 Visual Studio 2012 一起使用或在引用 winmd 程序集的项目中使用时，这是实体框架 (EF5) 中的一个错误。

EF 尝试加载所有引用的程序集以检查它们是否包含预编译视图。在此过程中，EF5 在尝试加载 winmd 程序集时失败。尝试使用 Assembly.Load 加载 winmd 程序集会导致在 EF5 中未处理的 System.IO.FileLoadException。

注意：虽然您的应用程序可能没有对任何 .winmd 程序集的引用，但 VS2012 WPF 设计器的宿主进程 (xdesproc.exe) 具有对 Windows.winmd 程序集的引用。这解释了为什么项目在 VS2010 和运行时都能正常工作。您可以使用 .NET Reflector 来确认这一点。

此问题已在 EF6 中修复。

已为此[http://entityframework.codeplex.com/workitem/609提交了一个错误](http://entityframework.codeplex.com/workitem/609)

并在变更集 50c1e5a2c46d [http://entityframework.codeplex.com/SourceControl/changeset/50c1e5a2c46d中修复](http://entityframework.codeplex.com/SourceControl/changeset/50c1e5a2c46d)

# php - PHP Pdo在数组中没有列名

> ID：14313218
> 
> 赞同：3
> 
> 时间：2013-01-14T04:04:52.733
> 
> 标签：php, mysql, pdo

我在 PHP 中有以下查询：

```
$stmt = $conn->prepare('SELECT 
        date, 
        avg(sells) as sells
FROM `table` WHERE product_id = :id group by date having count(id) > 1');
$stmt->execute(array('id' => $product));
$res = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

正如预期的那样，这返回了我：

```
array(2) { 
    [0]=> array(2) { 
        ["date"]=> "2013-1-11" ["sells"]=> "73.5000" 
    } 
    [1]=> array(2) { 
        ["date"]=> "2013-1-11" ["sells"]=> "77.0000" 
    }
} 
```

无论如何，我可以在不使用 php 循环的情况下获得以下输出？

```
array(2) { 
    [0]=> array(2) { 
        "2013-1-11",
        "73.5000" 
    } 
    [1]=> array(2) { 
        "2013-1-11",
        "77.0000" 
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T04:07:39.593

而不是`PDO::FETCH_ASSOC`使用`PDO::FETCH_NUM`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T04:09:33.427

既然您声明要使用 JSON，请尝试以下操作：

```
$result = $stmt->fetchAll(PDO::FETCH_ASSOC);
echo json_encode($result); 
```

这将为您提供基于返回数据的有效 JSON 结构。

# javascript - jQuery 移动 $.mobile.changePage()

> ID：14313228
> 
> 赞同：2
> 
> 时间：2013-01-14T04:06:27.880
> 
> 标签：javascript, jquery, mobile

我对 $.mobile.changePage(); 有疑问 我有这个选择控件用作跳转到页面控制器。代码如下：

```
$( document ).one( "pagechange", function() {
    $("#jumptopage").bind("change", function(){
        var val = $(this).val();
        $.mobile.changePage( "http://localhost/mchild/dashboard/videos/all/20/" + val, {reloadPage : "true",transition: "fade", allowSamePageTransition : "true"} );
        return false;
    });
}); 
```

现在这段代码第一次工作；但是当我跳转到另一个页面时，它会导致 jQuery Mobile 来回抖动到当前页面和之前加载的上一个页面，或者在其他情况下 bind() 将不再工作。

我试图通过添加来记录活动

```
console.log('i was triggered') 
```

在 $( document ).one().... 中，紧跟在 bind 语句之后，除了绑定之外它仍然会触发。

我不确定我是否做错了什么......请帮助......

# jquery - jQuery 只允许数字和句号

> ID：14313230
> 
> 赞同：0
> 
> 时间：2013-01-14T04:07:05.877
> 
> 标签：jquery

```
 <script type="text/javascript">
         $(document).ready(function () {
             $(".qty").keydown(function (event) {
                 // Allow: backspace, delete, tab, escape, and enter
                 if (event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 ||
                     // Allow: Ctrl+A
                     (event.keyCode == 65 && event.ctrlKey === true) ||
                     // Allow: home, end, left, right
                     (event.keyCode >= 35 && event.keyCode <= 39)) {
                     // let it happen, don't do anything
                     return;
                 }
                 else {
                     // Ensure that it is a number and stop the keypress
                     if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105)) {
                         event.preventDefault();
                     }
                 }
             });
         });

</script> 
```

上面的代码只接受数字，我想接受数字和句号（。）

不是 . 46??

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T04:10:36.843

以下是使用模糊正则表达式的方法：

```
$('.qty').on('blur', function () {
    $(this).val(function (i, v) {
        return v.replace(/[^a-z.]/ig, '');
    });
}); 
```

这是小提琴：http: [//jsfiddle.net/mfrUx/](http://jsfiddle.net/mfrUx/)

* * *

如果你能放下一分钟*我必须使用 jQuery*的心态，那么使用这个：

```
$('.qty').on('blur', function () {
    this.value = this.value.replace(/[^a-z.]/ig, '');
}); 
```

这是小提琴：http: [//jsfiddle.net/mfrUx/1/](http://jsfiddle.net/mfrUx/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T04:12:29.223

他们的键码对`.`我来说似乎是 190。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T04:16:35.280

```
 if (event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 || event.keyCode == 110 
```

# javascript - 单击后将 MULTIPLE 数组的结果附加到初始生成的 ul 中，该怎么做？

> ID：14313231
> 
> 赞同：1
> 
> 时间：2013-01-14T04:07:13.633
> 
> 标签：javascript, jquery, jquery-ui, autocomplete, jquery-ui-autocomplete

所以，我有一堆自动完成的来源，像这样：

```
var search1 = [{
    search: "authors1"
}, {
    search: "autocomplete1"
}, {
    search: "automatic1"
}];
var search2 = [{
    search: "authors2"
}, {
    search: "autocomplete2"
}, {
    search: "automatic2"
}];
var search3 = [{
    search: "authors3"
}, {
    search: "autocomplete3"
}, {
    search: "automatic3"
}]; 
```

**我必须**将数据存储在不同的数组中，所以请不要建议我加入它们。
HTML：

```
<input data-source="search1,search2,search3" type="text" value="" />
<div id="loadingmsg" style="display:none">Searching...</div> 
```

我想要一个**递归**函数，它将通过“数据源”属性中指定的所有源并将结果附加到一个菜单。例如，当我输入“auth”时，我想看到这个：

1.  `#loadingmsg`显露出来。
2.  结果菜单（包含“authors1”、“authors2”和“authors3”）出现。
3.  `#loadingmsg`消失。
    可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T03:12:08.330

和`<input data-source="1,2,3" />`

```
//bind a response to typing for each of these inputs
$("img[data-source]").on('keyup', function () {

   //get typed value
   var value = $(this).val();

   //clear the current menu
   $("#menu").empty();

   //show loading image (probably ineffective)
   $("#loadingimg").show();

   //iterate over source keys acquired from <input> data
   $.each($(this).data('source').split(','), function () {

      //iterate over corresponding object in `search`
      $.each(search[this], function () {

         //typed value matches string
         if (this.indexOf(value) > -1) {
            $("#menu").append('<span>' + this + '</span>');
         }
      });
   });
   $("#loadingimg").hide();
}); 
```

# php - 如果单击选择按钮并将其值传递到文本框中，如何获取所选单选按钮的值？

> ID：14313233
> 
> 赞同：0
> 
> 时间：2013-01-14T04:07:37.080
> 
> 标签：php, javascript

```
 //this is saved in president.php
if ($result = $mysqli->query("SELECT * FROM candidate_info WHERE position= 'president'"))
                    {
     // display records if there are records to display
       if ($result->num_rows > 0)
                            {
          // display records in a table
           echo "<table border='1' cellpadding='10'>";

              // set table headers

          echo "<tr><th>Student ID</td><th>Course</th><th>Name</th><th></th></tr>";

  while ($row = $result->fetch_object())
             {
        // set up a row for each record
   echo "<tr>";
    echo "<td>" . $row->studid . "</td>";
    echo "<td>" . $row->course . "</td>";
    echo "<td>" . $row->fname . " ". $row->mname ." ". $row->lname ."</td>";
echo "<td><input type ='radio' name='radio'  value='". $row->studid ."'> </td>";
    echo "</tr>";
                               }

  echo "<td> <input type='button' name='button' value='select' onclick='". get_radio_value() ."'></td>";

    echo "</table>";
     }

     else {
        echo "No results to display!";
                            }
      } 
```

//这是我的javascript来读取和获取我的收音机的值

```
 function get_radio_value()
      {
      for (var i=0; i < document.orderform.radio.length; i++)
        {
          if (document.orderform.radio[i].checked)
            {
             var rad_val = document.orderform.radio[i].value;
             }
        }
       } 
```

//在这里我将显示我选择的收音机的值，因为我点击了表单内的 //文本框上的选择按钮“ />

//但是当我加载我的页面时，我得到了一个错误

```
// like this Fatal error: Call to undefined function get_radio_value() 
```

//这是我的voting.php的代码

```
 <div id="TabbedPanels1" class="TabbedPanels">
      <ul class="TabbedPanelsTabGroup">
    <li class="TabbedPanelsTab" tabindex="0">President</li>
      <li class="TabbedPanelsTab" tabindex="0">Secretary</li>
      </ul>
    <div class="TabbedPanelsContentGroup">
      <div class="TabbedPanelsContent"><p>&nbsp;</p>
   <p><?php require_once('candidate/president.php'); ?></p>
     <p>&nbsp;</p></div>

              <td width="292" valign="top">
    <form method="post" action="voting.php" >
         <table width="289" height="76" border="0" cellspacing="1">

          <tr>
            <td width="131" height="24" ><div align="right">President</div></td>
            <td width="151"><div align="left">
                <input type="text" name="president" id="radio_value"/>
            </div></td>
          </tr>

        </table>
   </form></td> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T04:11:40.423

改变这个

```
echo "<td> <input type='button' name='button' value='select' onclick='". get_radio_value() ."'></td>"; 
```

这里它调用了php的`get_radio_value()`函数，但函数是用javascript编写的，所以使用下面的代码。

```
echo "<td> <input type='button' name='button' value='select' onclick='get_radio_value()'></td>"; 
```

**用于在文本框中传递单选按钮的值**

```
<input type="text" name="president" value="WHAT CODE SHOULD I PUT HERE?" id="radio_value"/> 
```

更改此行

```
var rad_val = document.orderform.radio[i].value; 
```

至

```
return document.getElementById('radio_value').innerHTML = document.orderform.radio[i].value; 
```

# asp.net - Web API 中的每个路由格式化程序配置

> ID：14313241
> 
> 赞同：6
> 
> 时间：2013-01-14T04:08:34.817
> 
> 标签：asp.net, asp.net-web-api

标题或多或少说明了一切。我正在尝试将 JSON MediaTypeFormatter 配置为每条路由的行为不同。

具体来说，我的 WebAPI 中有两条路由映射到同一个控制器。每条路由都执行相同的操作并返回相同的数据，但出于与现有消费者向后可比性的原因，它们的输出格式必须略有不同。

我可以在控制器中放置一些代码来确定请求是来自旧路由还是新路由，并相应地更改格式化程序。

我还可以在需要时使用 ActionFilter 来更改格式化程序。

然而，我想知道是否有一种方法可以在每个路由级别配置格式化程序，因为这是我的 API 行为不同的抽象级别。这可以在路由配置点或委托处理程序中。

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T04:37:23.553

我不完全确定你的两个 JSON 有多大不同，以及你到底在用它们做什么，但如果你问我，我会在格式化程序中做：

```
public class MyJsonMediaTypeFormatter : JsonMediaTypeFormatter
{
    private IHttpRouteData _route;

    public override MediaTypeFormatter GetPerRequestFormatterInstance(Type type, HttpRequestMessage request, System.Net.Http.Headers.MediaTypeHeaderValue mediaType)
    {
        _route = request.GetRouteData();
        return base.GetPerRequestFormatterInstance(type, request, mediaType);
    }

    public override System.Threading.Tasks.Task WriteToStreamAsync(Type type, object value, System.IO.Stream writeStream, HttpContent content, TransportContext transportContext)
    {
        if (_route.Route.RouteTemplate.Contains("legacy"))
        {
            //here set the SerializerSettings for non standard JSON
            //I just added NullValueHandling as an example
            this.SerializerSettings = new JsonSerializerSettings
                {
                    NullValueHandling = NullValueHandling.Ignore
                };
        }

        return base.WriteToStreamAsync(type, value, writeStream, content, transportContext);
    }
} 
```

然后，您将用这个替换默认的 JsonMEdiaTypeFormatter。

```
 config.Formatters.RemoveAt(0);
    config.Formatters.Insert(0, new MyJsonMediaTypeFormatter()); 
```

在 Web API 中，您可以`DelegatingHandler`让它仅在特定路由上运行，但这并没有真正意义，因为`Formatters`集合是全局的，因此即使从路由范围的处理程序在运行时修改它也没有意义。

# svn - 无法在 SVN 上获取特定版本下的文件

> ID：14313242
> 
> 赞同：2
> 
> 时间：2013-01-14T04:08:35.970
> 
> 标签：svn, svnkit

我的项目用于`SVNKit`以编程方式从一个签出文件`(repo A)`并签入另一个`(repo B)`.

`repo A`Eclipse 提前签入了所有文件。

用户指定特定版本下的特定文件`repo A`，程序会将其从复制`repo A`到`repo B`。

它大部分时间都可以正常工作，但在以下情况下会失败：

**前任：**

1.  一开始，我签入了文件，例如：`InfoStruc.java`，到`repo A`，它返回给我修订号（例如：61）

2.  用户选择`InfoStruc.java`版本 2 进行传输。（事实上​​，任何修订`1~60`都失败了）

返回以下错误消息

> > org.tmatesoft.svn.core.SVNException: svn: E160013: '/svntest/arthur/!svn/bc/2/DPS/src/main/java/idv/arthur/work/InfoStruc.java' 找不到路径：404未找到 (http://10.134.231.56)

在对 repo A 进行多次承诺后，修订版`InfoStruc.java`增加到 946。并且它仍然在修订版时出错`1~60`，但在`61~946`.

我的颠覆服务器的版本是`1.6.11`. 而 SVNKit 是`1.7.8`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T05:40:32.707

这是“按设计工作”。如果`file`in`repo`是在修订版 61 中创建的，您可以参考`repo@60`并且可以参考`repo/file@61`但不能参考，`repo/file@60`因为如错误消息所示，它指的是该修订版中不存在的内容。它与试图引用不存在的文件在概念上并没有完全不同。

# objective-c - 从 1 个数组 2 中添加另一个按字典键过滤的项目

> ID：14313246
> 
> 赞同：0
> 
> 时间：2013-01-14T04:08:49.870
> 
> 标签：objective-c, nsarray, nsdictionary

一段时间以来，我一直在尝试从逻辑上思考这个问题，通常我可以通过写出来或在做其他与编程无关的事情时思考它来解决它。但是我尝试的一切都不起作用。所以基本上我有 2 `NSArrays`，它们都是从 2 个不同的 plist 中填充的。每个数组都填充了所有字典：所有字典都具有相同的键，并且都具有相同的结构，但有些可能具有与键相关联的信息，而有些则没有。我基本上需要检查每个项目`array1`，看看它是否存在`array2`，如果它不存在，`array2`然后将它添加到`array1`（或者`array3`看看你如何在迭代数组时不能改变它）。我需要它来查看它是否通过特定键“ `name_key`”存在。

所以...简而言之，我的最终结果需要是一个`NSArray`包含两个数组中的所有对象，而没有具有重复名称的对象（来自字典`name_key`）。

下面是我的实际代码不起作用。

在下面的代码中：`originalWhiskiesListArray`= `array1` `newWhiskiesListArray`= `array2` `combinedWhiskiesListArray`= `array3`（因为您不能在迭代数组时对其进行变异。

```
BOOL whiskyExists = YES;
    for (NSDictionary *newWhisky in newWhiskiesListArray) {

        for (NSDictionary *originalWhisky in originalWhiskiesListArray) {
            NSString * newWhiskyNameString = [[newWhisky objectForKey:NAME_KEY] lowercaseString];
            NSString * origWhiskyNameString = [[originalWhisky objectForKey:NAME_KEY] lowercaseString];

           //Compare lowercase strings and if they don't match then add them to the original plist array.
            if ([newWhiskyNameString isEqualToString:origWhiskyNameString]) {
                whiskyExists = YES;
                break;
            } else {
                whiskyExists = NO;
                break;
                //NSLog(@"Whisky names do not match. New Whisky: %@ Old Whisky: %@",[newWhisky objectForKey:NAME_KEY],[originalWhisky objectForKey:NAME_KEY]);
                //doesn't match so add it
                                }
        }
        if (whiskyExists == NO) {
            [combinedWhiskiesListArray addObject:newWhisky];
            NSLog(@"newWhisky added");
            whiskyExists = YES;
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T04:57:09.367

如果我对您的理解正确，您可以将每个字典中的所有值添加到 NSMutableSet 中，如果它已经存在于集合中，则不会添加项目。然后，您可以使用 NSSet 方法 allObjects 将集合转换回数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T06:33:12.020

威士忌名称字符串中的任何一个都可以为零吗？如果是这样，那么这会破坏 isEqualToString 比较，因为您始终可以发送返回 NO 的消息 nil。

我也相信休息是错误的。您只需要在遇到匹配时退出内部循环。如果不是，您必须继续前进，直到内循环结束。

# c# - C#读/写物理磁盘

> ID：14313249
> 
> 赞同：2
> 
> 时间：2013-01-14T04:10:03.830
> 
> 标签：c#, io, hard-drive

只是想知道是否有任何 API 可以让 .NET 程序在不进入内核模式的情况下写入分区。我正在开发一个操作系统，只想在 Windows 上编写一个快速程序，这样我就可以将文件添加到与 VMware 共享的分区中。如果我有时间，我会为它编写实际的驱动程序，但我只是想要一些东西来快速完成一些事情。我记得看到一个 .NET 程序用于修改 Xbox 游戏，它可以直接读取和写入 FatX 格式的 USB 闪存驱动器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T04:14:56.593

尝试像“\\?\Device\Harddisk0\Partition1”这样的路径。

# javascript - event.target/srcElement 在 Chrome 和 Opera 中不能 100% 工作

> ID：14313252
> 
> 赞同：3
> 
> 时间：2013-01-14T04:10:46.433
> 
> 标签：javascript, events, google-chrome, opera, target

我正在尝试获取图像映射`target/srcElement`的 HTML`"area"`元素。

这是我到目前为止所拥有的（请原谅数据 URI）：

```
<map name="dpad">
  <area id="dpad"shape="rect" alt="" title="" coords="1,14,12,24" onmousedown="move('l',false,event);" target="" />
  <area shape="rect" alt="" title="" coords="15,2,24,12" onmousedown="move('u');" target="" />
  <area shape="rect" alt="" title="" coords="27,15,38,24" onmousedown="move('r');" target="" />
  <area shape="rect" alt="" title="" coords="15,27,25,38" onmousedown="move('d');" target=""/>
</map>
<img width="40"height="40"src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAABp0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuMTAw9HKhAAADDElEQVRYR+2ZvYoiQRSFW1EMVkEzI2XfydQH2GwGDTfczFRYNNBBUDFQUFN9ATXQwEEDRQ3UB3ADQajpr7Gkp8f+k2G6F2bg0jVVt+qcrp9zb5cBxeVfMpmMnE6nX+fz+U8kEvkRCoUsR7hcLorq+0/1/R2NRv8ej8ezS0h37uFwOBEMBkupVErk83lRKBQsDR986UNfd2gPeAcCgYRqpUwmI+bzuTgcDjcbj8cC09fhgy996PsApLsukmA2mxWLxeJGhnKz2dTMWI+vpwRXq5XodDqi3W5rRpk6ZhKynhLc7XZiMBiIVqsler2eZpSpo81zgqPRSDQaDdHtdkW/39eMMnXsR08JTqdTUSqVRK1WE/V6/Z1RVy6XBT6eLTEzNJlMLA0fzwjqT6teWvRlT5f4myASnU6nI4SgqwA7ef5UfV+MQu1giV/UfvR1gpGAE9wUNYA/EyevSu/kCdDrAwRfeTGnOHCKxWLPipqNnAjmxEtAnVqxWBTr9fpd3L03i/jg63Rc/OACJ7gxg1pWQlBn0+sNDZNia2wDeL/f3wgSNWazmWaUJVl88DX253/GBsPYBhc4wU2Jx+NauqR/ewCIEIgwOme2v6jfbDZiOByKarWqCTZWqVS0UEebVV/GBgMs/UvRB05w+0CQIM/ghCrA7AhCjihCDJahjjJ1tNkRBAMsMGWCYUqQqSYTIdgTTwGxIshbM3N6cnqStG23W1OSjA0GWGCCLbX1wwyyH8jlSJckoB1B9hszIEkZn7ThYzaLkiD9wAQbDnD5/wjylsvl8lOXmMPidonh8GWHhI3/qYdEDsbmZx+Qz9md4nsyw+HgBDuRGTDAMpUZxDCXy5kKNQTviaxRqFlKKdT6ZbUSasY2E2o4aULt+1BHQPZ1suD7dMvdZ7uimH24O8gHvb1Z+CbodKn1Sywvi+yenn12omEIrUyZSJuk+eLDXWbFvr36gKDvL484vb6+fpPy4rsLTN9eAesv0ck47C7R8fnSS3R+hlDToCeV6Il0iE9DK8Pn6vtEX6d6K/3eAH0oKaUOiMCyAAAAAElFTkSuQmCC"usemap="#dpad"/> 
```

因此，对于 dpad 上的左箭头，我有一个要调用的函数`onmousedown`, `move(dir,hold,e)`。

这是启动的功能：

```
function move(dir,hold,e){
    var p=document.getElementById('test');
    alert(e);
} 
```

这让我很困惑，为什么我`"undefined"`在点击该区域时会得到。有人可以详细解释我如何获得目标吗？

我需要`'event'`在我的 HTML 代码中包含作为参数吗？我什至需要一个参数吗？

另一方面，这确实让我感到困惑。

所以，我无法获得该元素的目标，但这很好用：

```
<div class="male1-d" id="test" data-sprite="male1" onclick="alert(event.target+' '+this.style.left+' '+this.style.top);"></div> 
```

## 完毕。获得目标。现在为什么我不能在函数中做到这一点？

我忘了提到对于 Opera，我的意思是移动（？）版本 9.50。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T04:51:30.397

在某些浏览器中，'event' 是 window 的一个属性。但是您需要在其他浏览器中包含 'event' 作为参数。所以您的移动功能应该如下所示：

```
 <html>
   <body>
     <button onmousedown='move(event)' id='btn' name='a button'>click</button>
   </body>
   <script>
     function move(e){
       var e=e||window.event;
       var target=e.target||e.srcElement;
       alert(target);
       alert(target.id);
       alert(target.name);
    }
  </script>
 </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T05:33:08.473

看来，这是点击事件中的问题。他们说，这是 jquery 中的一个错误。并在

[移动Safari中未触发li元素中div的Jquery单击事件](https://stackoverflow.com/questions/8692072/jquery-click-event-of-a-div-in-li-element-not-fired-in-mobile-safari)

它说了两件事：

```
Add cursor:pointer to the DIV class.
Add onclick="" to the element 
```

# excel - 在 Excel 中使用 OR 函数时出错

> ID：14313259
> 
> 赞同：0
> 
> 时间：2013-01-14T04:12:08.320
> 
> 标签：excel, excel-formula

我在 Excel 公式`OR`中使用 Excel 公式，并且对它的行为方式并不感到惊讶。

我正在使用以下 Excel 公式：

```
=IF(OR(ISERROR(funct(A1:A5)), funct(A1,A5)=0), "ERROR", funct(A1,A5)) 
```

我的理解是，如果`ISERROR(funct(A1:A5))` `True(or False)`，OR 运算的结果将是 True（或 False）。

在我的实验中，我期望答案是**“错误”**，因为.`ISERROR(funct(A1:A5))``true`

但我收到`#VALUE!`错误。任何想法可能是错的。或者，如果我可以改写公式以使其发挥作用。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T06:29:52.947

```
=IF(ISERROR(funct(A1:A5)),"ERROR",IF(funct(A1:A5)=0,"ERROR",funct(A1:A5))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:32:53.470

我推荐蒂姆的答案，但如果`func()`是一个大函数，如你所说，那么你可能希望尽量减少它的使用次数。我假设应该在整个公式中调用相同的函数，即 func(A1:A5)

在 Excel 2007 或更高版本中，您可以使用 IFERROR 函数：

`=IFERROR(IF(func(A1:A5)=0,"ERROR",func(A1:A5)),"ERROR")`

或者在早期版本中，您可以通过将 1 除以 func(A1:A5) 来强制 func(A1:A5) 在等于 0 时给出错误：

`=IF(ISERROR(1/func(A1:A5)),"ERROR",func(A1:A5))`

编辑：更进一步，您可以在 Excel 2007 或更高版本中结合这两种方法，以便您只需要调用 func 一次：

`=IFERROR(1/(1/func(A1:A5)),"ERROR")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T04:17:23.560

我认为您缺少一个右括号。

试试这个：

```
=IF(OR(ISERROR(funct(A1:A5)), func(A1,A5)=0), "ERROR", func(A1,A5)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T07:01:20.220

`=IF(OR(ISERROR(funct(A1:A5)), funct(A1,A5)=0), "ERROR", func(A1,A5))`- 仔细查看您的公式得出的建议：确实是**不同**`funct(A1,A5)=0`的功能，或者这是您的公式中的**错字**？也许就是这样。`func(A1,A5)`

# jquery - jquery ui 标签不再支持 cookie？怎么办？

> ID：14313270
> 
> 赞同：18
> 
> 时间：2013-01-14T04:14:41.420
> 
> 标签：jquery, jquery-ui, cookies, jquery-ui-tabs

对于这是一个开放式问题，我深表歉意，但我不知所措。

从 jquery UI 的 1.9 版开始，他们使用该`cookie`选项贬值，以便跨多个页面保存选项卡的活动状态。[http://jqueryui.com/upgrade-guide/1.9/#deprecated-cookie-option](http://jqueryui.com/upgrade-guide/1.9/#deprecated-cookie-option)

我现在还没有看到有关如何完成此任务的任何其他文档！所以我只能摸不着头脑。

我最好的猜测是使用某种方式`event`创建 cookie，然后加载 cookie？或者是否有其他方法可以跨多个页面并根据用户偏好保存选项卡的活动状态？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-09-03T22:25:18.347

今天有同样的问题咬我。这似乎有效：

1.  使用 jquery.cookie 插件（[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)）（这一步不是必须的，但它让处理 cookie 的工作更轻松）
2.  使用以下代码片段：

    ```
    $( ".selector" ).tabs({
        active   : $.cookie('activetab'),
        activate : function( event, ui ){
            $.cookie( 'activetab', ui.newTab.index(),{
                expires : 10
            });
        }
    }); 
    ```

这会设置一个名为“activetab”的 cookie，该 cookie 在 10 天后过期（有关更多选项，请参阅[jquery.cookie 文档](https://github.com/carhartl/jquery-cookie/blob/master/README.md)），以便在单击任何选项卡时记住当前选定的选项卡。在初始化时读取此 cookie 以显示最后保存的选项卡。第一次访问页面时，选项卡将被折叠。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-03-03T02:54:04.137

[使用localStorage](https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API)执行此操作的简短、独立于布局的方式：

```
$("#tabs").tabs({
  active: localStorage.getItem("currentIdx"),
  activate: function(event, ui) {
      localStorage.setItem("currentIdx", $(this).tabs('option', 'active'));
  }
}); 
```

* * *

一种使用自定义数据属性的特定于布局的方法（如果要在脚本的其他地方以某种方式使用属性值，则可能很有用）。

**jQuery 用户界面：**

```
$("#tabs").tabs({
    active: localStorage.getItem("currentTabIndex"),
    activate: function(event, ui) {
        localStorage.setItem("currentTabIndex", ui.newPanel[0].dataset["tabIndex"]);
    }
}); 
```

**示例 HTML 布局：**

```
<div id="tabs">
    <div id="tabs-1" data-tab-index="0">
       tab 1 stuff...
    </div>
    <div id="tabs-2" data-tab-index="1">
       tab 2 stuff...
    </div>    
    <div id="tabs-3" data-tab-index="2">
       tab 3 stuff...
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-12-07T10:09:10.693

事件 tabsactivate 然后存储到 sessionStorage 或 localStorage。

```
$(function() {
    var selectedTabId = sessionStorage.getItem("selectedTab");
    selectedTabId = selectedTabId === null ? 0 : selectedTabId; //your default being 0
    $("#tabs").tabs({
        active: selectedTabId,
        activate : function( event, ui ) {
            selectedTabId = $("#tabs").tabs("option", "active");
            sessionStorage.setItem("selectedTab", selectedTabId);
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-10-22T14:26:26.797

使用 HTML5 的 localStorage 特性可以解决这个问题，现在是推荐的做这类事情的方法。Cookie 会导致将额外数据添加到每个 Web 请求和响应中。

您会发现像 IE8 这样过时[的浏览器都支持](http://caniuse.com/#search=localstorage)localStorage ，如果您真的想要支持 IE6 和 IE7，那么可以使用[shim](https://github.com/inexorabletash/polyfill/blob/master/storage.js)。

**HTML**

```
<div class="mytab" id="mytab_1">
 <ul>....</ul>
 <div id="xx1">...</div>
 ...
</div> 
```

**JS**

```
currTabIndex=sessionStorage['mytab_1']; 
```

和制表功能调用

```
$('.mytab').tabs({
 active:currTabIndex,
 load:function(event,ui){
  sessionStorage[''+this.id]=(ui.panel.index()-1);
 }
}); 
```

希望这会有所帮助。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-03-11T11:26:25.260

简单地：

```
activate: function(event, ui) {        
    localStorage.setItem("accIndex", $(this).tabs("option", "active"))
},
active: parseInt(localStorage.getItem("accIndex")) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-14T04:22:44.437

您可以使用活动选项设置活动选项卡，例如

```
$( ".selector" ).tabs({ active: 1 }); 
```

除了 cookie，还有很多方法可以将值传递给网页。例如，您可以使用查询参数和隐藏字段。然后，您将创建一个 onload 脚本，该脚本将使用 jQuery 的 onload 示例读取任一示例。$（函数（）{}）。

要阅读查询字符串，请查看此页面，它为您提供方法

[jquery读取查询字符串](https://stackoverflow.com/questions/4548487/jquery-read-query-string)

```
function getParameterByName( name )
{
  name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
  var regexS = "[\\?&]"+name+"=([^&#]*)";
  var regex = new RegExp( regexS );
  var results = regex.exec( window.location.href );
  if( results == null )
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

并读取隐藏字段。

```
$( ".selector" ).tabs({ active: $('#my-hidden-fiel').val() }); 
```

我同意 jquery ui 删除此功能的决定，因为在我看来，cookie 实际上应该只用于保持会话，而不是形成字段或选项卡。

# javascript - 带有分隔符的jQuery砌体？

> ID：14313273
> 
> 赞同：3
> 
> 时间：2013-01-14T04:15:15.647
> 
> 标签：javascript, css, css-float, jquery-masonry

我正在实现 jQuery Masonry，我得到它就好了。

然后我想在`headings/separators`整个过程中添加（日期分隔符）......为了完成这项工作，我必须将每一个`"group"`放入它自己的容器中并砌筑每一个。`covering/ignoring`如果我只是砌筑主容器，它绝对会将它们全部定位在标题分隔线的最顶部。

有什么办法可以`"switch"`介于两者之间吗？如果我`hide()`分离器并重新加载每个砖石，它们仍然会形成自己的组。如果我`float`每个容器，它就会变得一团糟。

`HTML/JS`如果不重新加载和格式化调用，我怎么能做到这一点？

# android - 重新刷机后开启USB调试

> ID：14313276
> 
> 赞同：-1
> 
> 时间：2013-01-14T04:15:37.200
> 
> 标签：android, testing, adb

我想在我的手机刷机后自动启用android手机中的usb调试选项。有没有什么可能的方法可以告诉我的设备没有 USB 调试选项。我想要的只是自动打开我的 USB 调试选项。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T04:35:11.493

将 Settings.System 与 A​​DB_EN​​ABLED 和 android.permission.WRITE_SECURE_SETTINGS 一起使用，但无法通过普通应用程序更改设置，它需要 root 手机:(

# php - 变量具有 utf8 值时的 PHP 错误

> ID：14313281
> 
> 赞同：2
> 
> 时间：2013-01-14T04:16:12.007
> 
> 标签：php, apache

当为变量分配 utf8 值时，我遇到了 php 问题。例如，我有 2 个脚本：

```
script1:
<?php
$var = "джиган";
echo '<a href="test2.php?var='.$var.'">test</a>';
?>

script2:
<?php
$var = $_GET['var'];
echo $var;
?> 
```

编辑：我不认为错误是在浏览器中显示，所以方法如下：

```
header('Content-Type: text/html; charset=utf-8'); 
```

不工作。我已经在 2 个服务器上测试了上述脚本：在 localhost 和共享主机上。共享主机出现问题。我猜是服务器配置的问题。

当我从脚本 1 中的链接调用脚本 2 时，我的服务器给了我以下错误：

```
Forbidden

You don't have permission to access /agayan/test2.php on this server. 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T04:34:48.567

希望这可以帮助你

```
<?php
        $var = "джиган";
        echo '<a href="test2.php?var='.$var.'">test</a>';
?> 
```

你的第二个脚本应该是

```
<?php
        header('Content-Type: text/html; charset=utf-8');
        $var = $_GET['var'];
        echo $var;
?> 
```

并且您的全局目录设置应该类似于（httpd.conf 行 ~188）：

```
<Directory />

            AllowOverride All
            Order deny,allow
            Allow from all
        </Directory> 
```

# jquery - jquery ajax jqXHR.status 始终为 0

> ID：14313283
> 
> 赞同：4
> 
> 时间：2013-01-14T04:16:34.627
> 
> 标签：jquery

我正在尝试使用 jquery 提交带有 AJAX 的表单：

```
<form name="myform" action="">
<table id="webcam-table">
    <thead>
        <tr>
            <th>Name</th>
            <th>...</th>
            <th><input type="checkbox" name="checkboxselectall" title="Select All" />&nbsp;&nbsp;
                <button type="submit" class="deletebutton" name="delete_video" title="Delete the selected videos">Delete</button></th>
        </tr>
    </thead>
    <tbody>
        <tr >
            <td>some data</td>
            ...
            <td><input type="checkbox" value="<?php echo $this->result_videos[$i]["video_name"]; ?>" title="Mark this video for deletion"/></td>
        </tr>
    </tbody>
</table>
</form> 
```

如果有人选中一个复选框并点击提交按钮，我有以下代码：

```
jQuery(".deletebutton").on("click", function() {
    var testchecked = jQuery(':checkbox:checked').length;
    if (testchecked == 0) {
        alert('Please select at least one video');
        e.preventDefault();
    }
    else
    {
        if (confirm("Are you sure you want to delete the selected videos?"))
        {
            var checked = jQuery('input:checkbox:checked').map(function () {
                return this.value;
            }).get();
            var $this = jQuery(this);
            jQuery.ajax({
                type: 'POST',
                url: 'index.php?option=com_recordings&task=deletevideos&format=raw',
                data: {checkedarray:checked},
                success: function(data){
                    alert(data);

                }
            });
        }
    }
}); 
```

奇怪的是，这段代码在 IE 中运行良好（如何改变）但在 Chrome 或 FF 中不行。如果我检查错误：

```
error: function(jqXHR, textStatus, errorThrown) {
        if (jqXHR.status === 0) {
            alert("Not connected. Verify Network.");
        } 
```

它似乎总是抛出这个警报。那为什么总是0呢？这是真正奇怪的事情。在玩了很多之后，如果我将表格更改为表格，它就会起作用：

```
<table id="webcam-table">
    <thead>
        <tr>
            <th>Name</th>
            <th>...</th>
            <th><input type="checkbox" name="checkboxselectall" title="Select All" />&nbsp;&nbsp;
                <button type="submit" class="deletebutton" name="delete_video" title="Delete the selected videos">Delete</button></th>
        </tr>
    </thead>
    <tbody>
<form name="myform" action="">
... //the rest is the same 
```

这将在 FF 和 Chrome 中工作，但现在 IE 无法正确呈现表格。所以这不是一个解决方案（无论如何它不是 w3c 有效代码）。那么……有什么想法吗？有什么我可以尝试调试的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T01:02:03.977

这是因为您没有取消提交按钮的单击事件。您需要对这两种情况都这样做，而不仅仅是 if 中的部分。将该行移到 if 之前，代码将神奇地不再为零。

# r - 没有轴或网格的ggplot2主题

> ID：14313285
> 
> 赞同：37
> 
> 时间：2013-01-14T04:17:02.440
> 
> 标签：r, ggplot2

我正在尝试绘制一个没有数据以外信息的图。没有轴；没有网格；无题; 只是情节。

但是我不断获得无法删除的额外边距和填充。

```
library(ggplot2)
library(grid)

theme_bare <- theme(
  axis.line = element_blank(), 
  axis.text.x = element_blank(), 
  axis.text.y = element_blank(),
  axis.ticks = element_blank(), 
  axis.title.x = element_blank(), 
  axis.title.y = element_blank(), 
  #axis.ticks.length = unit(0, "lines"), # Error 
  axis.ticks.margin = unit(c(0,0,0,0), "lines"), 
  legend.position = "none", 
  panel.background = element_rect(fill = "gray"), 
  panel.border = element_blank(), 
  panel.grid.major = element_blank(), 
  panel.grid.minor = element_blank(), 
  panel.margin = unit(c(0,0,0,0), "lines"), 
  plot.background = element_rect(fill = "blue"),
  plot.margin = unit(c(0,0,0,0), "lines")
)

ggplot() + 
  geom_area (data=economics, aes(x = date, y = unemploy), linetype=0) +
  theme_bare 
```

生成此图像：![阴谋](../Images/31a60c76405da8b342af918f21d67436.png)

我想要的是这样的：![情节理想](../Images/4fa7174b7b5b926d2cd92b1819f1a00a.png)

我不知道如何摆脱蓝色并使深灰色与边缘齐平。

有人可以提供一些建议吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-14T11:00:22.533

这是仅绘制面板区域的方法：

```
p <- ggplot() + geom_area (data=economics, aes(x = date, y = unemploy), linetype=0) +
  scale_x_date(expand = c(0,0)) + scale_y_continuous(expand = c(0,0)) +
  theme(line = element_blank(),
        text = element_blank(),
        title = element_blank())

gt <- ggplot_gtable(ggplot_build(p))
ge <- subset(gt$layout, name == "panel")

grid.draw(gt[ge$t:ge$b, ge$l:ge$r]) 
```

![在此处输入图像描述](../Images/521d88fd31a384266844c4125329f1d4.png)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2016-03-01T22:14:15.097

您[`ggplot2_2.0.0`](http://blog.rstudio.org/2015/12/21/ggplot2-2-0-0/)可以使用`theme_void`：

```
ggplot() + 
  geom_area(data = economics, aes(x = date, y = unemploy), linetype = 0) +
  theme_void() 
```

[![在此处输入图像描述](../Images/4dc953e1812fb7668d09ab12f0a151b5.png)](https://i.stack.imgur.com/JbDIT.png)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-14T07:53:16.757

尝试

```
last_plot() + theme(axis.ticks.length = unit(0.001, "mm")) + labs(x=NULL, y=NULL) 
```

您可能需要为 0 刻度长度提交错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-22T07:32:35.933

如果您只想删除 theme_bw() 中的网格，可以使用：

```
+ theme_bw() + theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank()) 
```

# java - Spring Security 3.1.3 @Autowired 在使用 WebApplicationInitializer 时不起作用

> ID：14313289
> 
> 赞同：2
> 
> 时间：2013-01-14T04:17:20.547
> 
> 标签：java, spring-security

spring security 3.1.3 在使用 WebApplicationInitializer 时是否有问题 @Autowired 不起作用？

我得到 NullPointerException

```
SEVERE: java.lang.NullPointerException
    at com.x.y.service.impl.UserDetailsServiceImpl.loadUserByUsername(UserDetailsServiceImpl.java:29)
    at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:101)
    at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:132)
    at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:156)
    at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:174)
    at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:94)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:195)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

**UserDetailsS​​erviceImpl**

```
package com.x.y.service.impl;

import com.x.y.dao.UserDao;
import com.x.y.dto.User;
import com.x.y.util.Assembler;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.core.userdetails.UserDetailsService;
import org.springframework.stereotype.Component;
import org.springframework.transaction.annotation.Transactional;

@Component
public class UserDetailsServiceImpl implements UserDetailsService {

    @Autowired UserDao userDao;
    @Autowired Assembler assembler;

    @Override
    @Transactional(readOnly = true)
    public UserDetails loadUserByUsername(String username) {

        try{
            User user = userDao.findByUserName(username);
            if(user == null) {
                System.out.println("[Login] username: " + username + " not found! back to login page");
                //throw new UsernameNotFoundException("[Login] User : " + username + " not found!");
            } else {
                System.out.println("[Login] username: " + username + " found! try to assemble user");
            }

            return assembler.assembleUser(user);
        } catch(Exception ex) {
            System.out.println(ex);
            return null;
        }

    }

} 
```

**WebAppInitializer**

```
package com.x.y.config;

import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.ServletRegistration;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.web.WebApplicationInitializer;
import org.springframework.web.context.ContextLoaderListener;
import org.springframework.web.context.support.AnnotationConfigWebApplicationContext;
import org.springframework.web.servlet.DispatcherServlet;

@ComponentScan(basePackages = "com.x.y")
public class WebAppInitializer implements WebApplicationInitializer {

    @Override
    public void onStartup(ServletContext servletContext) throws ServletException {
        /* read configuration */
        AnnotationConfigWebApplicationContext acwac = new AnnotationConfigWebApplicationContext();
        acwac.setServletContext(servletContext);
        acwac.scan("com.x.y.config");
        acwac.refresh();

        /* dispatcher-servlet */
        ServletRegistration.Dynamic d = servletContext.addServlet("dispatcher", new DispatcherServlet(acwac));
        //d.setInitParameter("contextConfigLocation", "/WEB-INF/spring-security.xml");
        d.setLoadOnStartup(1);
        d.addMapping("/");

        /* context loader listiner */
        //servletContext.addListener(new ContextLoaderListener(acwac));

    }

} 
```

**网络应用配置**

```
package com.x.y.config;

import org.apache.commons.dbcp.BasicDataSource;
import org.hibernate.SessionFactory;
import org.springframework.context.annotation.*;
import org.springframework.orm.hibernate4.HibernateTransactionManager;
import org.springframework.orm.hibernate4.LocalSessionFactoryBean;
import org.springframework.web.servlet.ViewResolver;
import org.springframework.web.servlet.config.annotation.EnableWebMvc;
import org.springframework.web.servlet.view.InternalResourceViewResolver;

@Configuration
@EnableWebMvc
@ComponentScan(basePackages = "com.x.y")
@ImportResource("classpath:applicationContext.xml")
public class WebAppConfig {

    /* spring view configuration */
    @Bean
    public ViewResolver viewResolver() {
        InternalResourceViewResolver viewResolver = new InternalResourceViewResolver();
        viewResolver.setPrefix("/WEB-INF/view/");
        viewResolver.setSuffix(".jsp");
        return viewResolver;
    }

    /* hibernate data source configuration */
    @Bean
    public BasicDataSource basicDataSource() {
        BasicDataSource dataSource = new BasicDataSource();

        /* data source properties */
        dataSource.setDriverClassName("com.mysql.jdbc.Driver");
        dataSource.setUrl("jdbc:mysql://localhost:3306/cadb_v1");
        dataSource.setUsername("cadb_admin");
        dataSource.setPassword("cadb_password");
        dataSource.setDefaultAutoCommit(false);

        return dataSource;
    }

    /* hibernate session factory configuration */
    @Bean
    public LocalSessionFactoryBean sessionFactoryBean() {
        LocalSessionFactoryBean factoryBean = new LocalSessionFactoryBean();

        /* session factory bean properties */
        factoryBean.setDataSource(basicDataSource());
        factoryBean.setPackagesToScan("com.x.y.dto");

        return factoryBean;
    }

    @Bean
    public SessionFactory sessionFactory() {
        return sessionFactoryBean().getObject();
    }

    /* hibernate transaction manager configuration */
    @Bean
    public HibernateTransactionManager transactionManager(){
        HibernateTransactionManager manager = new HibernateTransactionManager();
        manager.setSessionFactory(sessionFactory());

        return manager;
    }

} 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app 
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://java.sun.com/xml/ns/javaee
        http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0">

    <session-config>
        <session-timeout>1</session-timeout>
    </session-config>

    <!-- Spring Security Configuration -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring-security.xml</param-value>
    </context-param>

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
</web-app> 
```

**应用程序上下文.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans 
    xmlns="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:tx="http://www.springframework.org/schema/tx" 
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd 
        http://www.springframework.org/schema/tx 
        http://www.springframework.org/schema/tx/spring-tx.xsd 
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

    <mvc:resources mapping="/resources/**" location="/resources/" />

    <tx:annotation-driven transaction-manager="transactionManager" />

</beans> 
```

**弹簧安全.xml**

```
<beans 
    xmlns="http://www.springframework.org/schema/beans"
    xmlns:security="http://www.springframework.org/schema/security" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
           http://www.springframework.org/schema/security
           http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <security:http auto-config="true" access-denied-page="/WEB-INF/view/error/access-denied.jsp">
        <security:intercept-url pattern="/index*" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <security:intercept-url pattern="/resources/**" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <security:intercept-url pattern="/**" access="ROLE_ADMIN" />

        <security:form-login login-page="/index" default-target-url="/home" authentication-failure-url="/index?error=true" />
    </security:http>

    <bean id="userDetailsService" class="com.x.y.service.impl.UserDetailsServiceImpl" />
    <bean id="daoAuthenticationProvider" class="org.springframework.security.authentication.dao.DaoAuthenticationProvider">
        <property name="userDetailsService" ref="userDetailsService" />
    </bean>

    <security:authentication-manager>
        <security:authentication-provider ref="daoAuthenticationProvider" />
        <!--    <security:password-encoder hash="sha-256" />
        </security:authentication-provider>-->
    </security:authentication-manager>

</beans> 
```

请帮我解决这个问题，如果您需要更多信息，请告诉我，

**注意：只是这个@Autowired 不起作用**

问候，

**财团法人**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T06:31:14.893

谢谢你给我“这个问题没有显示任何研究工作；不清楚或没有用”，指的是[这个链接](https://stackoverflow.com/questions/11374904/spring-security-null-pointer-exception)

我只需要添加

```
<context:component-scan base-package="com.x.y" />
<context:annotation-config /> 
```

在**spring-security.xml**中，它现在可以工作了。谢谢，如果我错了，请纠正我

# mysql - 保存/发布 wordpress 时 MySQL 超级 CPU 峰值

> ID：14313294
> 
> 赞同：3
> 
> 时间：2013-01-14T04:18:46.337
> 
> 标签：mysql, wordpress, apache

我有一个大约 WP 数据库。10k+ 个帖子。每次用户保存/发布（插入或更新查询）时，apache 服务器 CPU 使用率飙升至 100%，MySQL 使用率飙升至 100%，最终崩溃。我假设这里的罪魁祸首是 MySQL，但是日志中的错误为零，并且没有相对慢的查询日志。wp_posts 表是基于 myisam 而不是 innodb（使用全文搜索）。这可能是 myisam 的配置问题吗？

规格：Wordpress：3.4.2 服务器：Amazon EC2 小型实例（1.7gb 内存，40% 免费）

谢谢，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:00:52.833

确定的问题：它是一个插件。确保您始终测试您的插件！

# ember.js - 在 ember 路由器 v2 中使用非 ID 动态参数

> ID：14313295
> 
> 赞同：4
> 
> 时间：2013-01-14T04:18:50.953
> 
> 标签：ember.js, ember-router

有没有人在新的 ember 路由器中使用非 ID 参数？

回到旧版本的路由器，这似乎更容易做，因为您可以访问路由上的序列化和反序列化方法。实际上，您理论上可以将模型的非 ID 属性反序列化为 params 哈希，并且您可以分别使用路由上的反序列化和序列化方法从该非 ID 属性序列化对象。据我了解，序列化和反序列化方法不再是公开的，这使得处理起来有点棘手。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T04:48:21.157

使用新路由器，您仍然可以访问序列化和反序列化。

*   `deserialize`已重命名`model`，并将参数作为参数。如果您从`model`（或任何其他[Promises/A+ 兼容的 promise](https://github.com/promises-aplus/promises-spec)）返回 Ember Data 对象，则其余挂钩将在对象加载之前不会运行。
*   `serialize`仍然命名为`serialize`。它将模型（传递给`linkTo`助手或`transitionTo`方法的对象）作为其第一个参数，并应返回参数的哈希值。

# powershell - Octopus Deploy - 用于在 IIS 上设置 SSL 绑定的 Deploy.ps1 脚本

> ID：14313296
> 
> 赞同：6
> 
> 时间：2013-01-14T04:19:01.890
> 
> 标签：powershell, iis-7, ssl-certificate, octopus-deploy

使用 octopus deploy 脚本创建网站，可在[此处找到](http://octopusdeploy.com/documentation/features/iis)

我正在尝试建立一个使用 SSL 的网站。我已更改`http -> https`并且变量设置为此`$MyWebAppIisBindings = "*:433:"`

除了设置证书之外，此脚本会执行所有操作来创建新站点并部署我的应用程序。

我有一个证书`'webserver'`，可以从 IIS 7 管理器的编辑站点绑定对话框的组合框中选择。手动选择此项可使 SSL 按预期工作。

`cmdlet`为了将我的证书与我在 IIS 上的绑定相关联，我需要向部署脚本添加什么 Powershell ？

（我是一个完整的 Powershell 菜鸟，请不要假设我在您的回答中对此一无所知）

编辑：我进步了一点，但我还是迷路了

```
# think I need to do something like this to get the certificate 
# Get-Item cert:\LocalMachine\My\$siteCertThumb 
# but I have no idea how to assign it to the 443 binding 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-07T23:31:53.860

为了扩展 Jared 的答案，这里有一个来自最近使用 HTTP 和 HTTPS 的项目的完整脚本：

```
#
# Settings
#---------------
$appPoolName = ("Kraken-Pool-" + $OctopusEnvironmentName)
$siteName = ("Kraken - " + $OctopusEnvironmentName) 
$siteBindings = ":80:octopushq.com"
$siteBindingsSecure = ":443:octopushq.com"
$siteCertificate = "CERT:\LocalMachine\WebHosting\A347FC4B77A2C176E451D8CE4973C7D0FB3E19AA"
$appPoolFrameworkVersion = "v4.0"
$webRoot = (resolve-path .)

# Installation
#---------------
Import-Module WebAdministration

cd IIS:\

$appPoolPath = ("IIS:\AppPools\" + $appPoolName)
$pool = Get-Item $appPoolPath -ErrorAction SilentlyContinue
if (!$pool) { 
    Write-Host "App pool does not exist, creating..." 
    new-item $appPoolPath
    $pool = Get-Item $appPoolPath
} else {
    Write-Host "App pool exists." 
}

Write-Host "Set .NET framework version:" $appPoolFrameworkVersion
Set-ItemProperty $appPoolPath managedRuntimeVersion $appPoolFrameworkVersion

Write-Host "Set identity..."
Set-ItemProperty $appPoolPath -name processModel -value @{identitytype="NetworkService"}

Write-Host "Checking site..."
$sitePath = ("IIS:\Sites\" + $siteName)
$site = Get-Item $sitePath -ErrorAction SilentlyContinue
if (!$site) { 
    Write-Host "Site does not exist, creating..." 
    $id = (dir iis:\sites | foreach {$_.id} | sort -Descending | select -first 1) + 1
    new-item $sitePath -bindings @{protocol="http";bindingInformation=$siteBindings} -id $id -physicalPath $webRoot
} else {
    Write-Host "Site exists. Complete"
}

Write-Host "Set app pool..."
Set-ItemProperty $sitePath -name applicationPool -value $appPoolName

Write-Host "Set bindings..."
Set-ItemProperty $sitePath -name bindings -value @{protocol="http";bindingInformation=$siteBindings}
New-ItemProperty $sitePath -name bindings -value @{protocol="https";bindingInformation=$siteBindingsSecure}
Get-Item $siteCertificate | Set-Item IIS://SslBindings/0.0.0.0!443

Write-Host "Set path..."
Set-ItemProperty $sitePath -name physicalPath -value "$webRoot"

Write-Host "IIS configuration complete!" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-10T08:36:12.903

在 15below 中，我们使用 octopus 并构建了一个开源 octopus 助手。

辅助 powershell 中的功能之一包括安装到 IIS 和添加 SSL 证书。

项目本身可以在这里找到：[https ://github.com/15below/Ensconce](https://github.com/15below/Ensconce)

关于如何使用helper，首先参考createWebSite.ps1。- 如果您使用的是 IIS6 或 7，这可以解决。然后创建应用程序池、网站并添加 ssl 证书。

这是一个小例子

```
$deployTools = "D:\DeployTools\"
. $deployTools\createWebSite.ps1
CreateAppPool "MyAppPool"
CreateWebsite "MyWebsite" "D:\WebsiteDir" "MyAppPool" "MyAppName" "myWebsite.com" "D:\Logs\MyWebsite"
AddSslCertificate "MyWebsite" "CertificateName" "myWebsite.com" 
```

您还可以使用 ensconce 工具来部署您的应用程序并更新任何配置数据。- 更多信息可以在 GitHub wiki 上找到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T05:11:34.377

除了您已经进行的两项更改之外，`http -> https`还有`80 -> 443`.

将以下内容添加到部署脚本的末尾。其中 $siteCertThumb 是存储在 LocalMachine\My 商店中的证书的指纹。

```
Write-Host "Add certificate to binding..."
Get-Item CERT:\LocalMachine\MY\$siteCertThumb | New-Item IIS://SslBindings/$siteBindings 
```

# android - 如何在android中制作像原生的视频播放器

> ID：14313301
> 
> 赞同：0
> 
> 时间：2013-01-14T04:19:44.290
> 
> 标签：android, android-mediaplayer

我想制作带有下一个选项的视频播放器，以便在旋转设备后继续播放视频。

我使用旋转屏幕创建了服务`MediaPlayer`并设置`SurfaceHolder`了一组。`SurfaceView`它仅适用于 Android 4.x。对于 Android 2.3.X，更换第二次通话后`setDisplay`用户看不到视频，但听到视频声音。

您能给我指导或示例如何在自定义播放器中实现此选项吗？

PS。播放器显示流媒体视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:51:40.590

好的，我找到了解决方案。它是如此容易。我为自定义播放器的活动设置了 configChanges="orientation|screenSize"。在这种情况下，旋转设备后不会重新创建活动，它在同一个实例上进行了更改。

结果，我不需要维护服务，`MediaPlayer`也不需要 replace `SurfaceHolder`。

# c# - 创建文件后发生文件共享冲突？

> ID：14313303
> 
> 赞同：1
> 
> 时间：2013-01-14T04:19:59.127
> 
> 标签：c#, text, streamreader, sharing, streamwriter

所以，我正在尝试创建一个 .txt 文件，然后向其中写入一些愚蠢的数据。但是我遇到了共享违规。我觉得这可能是因为我试图在创建文件后直接为文件创建 StreamWriter，但这没有意义。所以我有点失落。除了错误的行之外，我已经尝试删除班级中的所有其他 StreamWriters 和 Readers，但我仍然遇到违规行为。我得到的错误，

```
IOException: Sharing violation on path C:\Users\USER\Desktop\Accessible\Assets\IO\Books\A community of learners\frog\frog_status.txt
System.IO.FileStream..ctor (System.String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, Boolean anonymous, FileOptions options)
System.IO.FileStream..ctor (System.String path, FileMode mode, FileAccess access, FileShare share)
(wrapper remoting-invoke-with-check) System.IO.FileStream:.ctor (string,System.IO.FileMode,System.IO.FileAccess,System.IO.FileShare) 
```

指向线：

```
StreamWriter sw = new StreamWriter(statusTxtPath); 
```

在以下函数中：

```
private IEnumerator GatherStatusInfo(string folderPath, string mediaName) {

        string statusTxtPath = folderPath + @"/" + mediaName + "_status.txt";
        _currentInfoBeingCreated._readingStatusTxtPath = statusTxtPath;

        if(BuildManager.instance._isResetStatusFilesWhenStarting) {
            if(File.Exists(statusTxtPath)) 
                File.Delete(statusTxtPath);
        }

        if(!File.Exists(statusTxtPath)) {
            File.Create(statusTxtPath);
            StreamWriter sw = new StreamWriter(statusTxtPath);
            sw.WriteLine(MediaStatus.Unread);
            sw.WriteLine("0");
            _currentInfoBeingCreated._status = MediaStatus.Unread;
            _currentInfoBeingCreated._pageLastRead = 0; 
            sw.Flush();
            sw.Close();

        } else {

            StreamReader statusReader = new StreamReader(statusTxtPath);
            _currentInfoBeingCreated._status = (MediaStatus) Enum.Parse(typeof(MediaStatus), statusReader.ReadLine());
            _currentInfoBeingCreated._pageLastRead = (int) ConversionUtils.instance.String2Float(statusReader.ReadLine());
            statusReader.Close();
        }

        yield return 0;
    } 
```

知道为什么那条狗不会打猎吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T04:29:17.387

您是否有理由要创建文件然后重新打开它以写入它。[StreamWriter](http://msdn.microsoft.com/en-us/library/36b035cb%28v=vs.100%29.aspx)有一个方法可以做到这一点。如果它不存在，它将创建一个新文件。

从上面的链接：

> 使用默认编码和缓冲区大小为指定路径上的指定文件初始化 StreamWriter 类的新实例。如果文件存在，它可以被覆盖或附加到。如果文件不存在，则此构造函数创建一个新文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T04:34:52.160

`StreamWriter`无法访问该文件，因为`File.Create`返回了`FileStream`您没有使用的文件。

如上所述，这`File.Create`不是必需的。您还可以使用：

```
using (var writer = new StreamWriter(File.Create(statusTxtPath)))
{
   // do work here.
} 
```

这将消耗文件流并关闭它。每当使用流和与流交互的大多数类时，请务必使用该`using()`块来确保正确释放句柄。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T04:26:25.687

这可能是因为`StreamWriter`尚未释放非托管资源：尝试使用块`using`而不是手动打开和关闭它。

```
using (StreamWriter writer = new StreamWriter(statusTxtPath))
    {
        // do work here
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-01T17:24:46.520

我是这种编程语言的新手，我知道一些 Ansi C 主要来自编程微控制器，但我现在正在学习 C#，我遇到了同样的问题。

> System.IO.IOException
> 路径 /.../... 上的共享冲突

我发现拥有以下代码会引发异常。

```
if(!File.Exists(path))
   File.Create(path); 
```

我发现解决这个问题的解决方案实际上使用了更少和更简单的代码。

```
File.AppendAllText(path, str); 
```

使用这一行，如果文件已经存在，程序将打开文件并将文本附加到文件的末尾，如果不存在，将创建它并附加文本。

是：路径->文件的路径
            str->要写入文件的文本

[我在此](https://forums.xamarin.com/discussion/comment/68426/#Comment_68426)Xamarin 论坛页面上找到了解决方案的提示。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-12-15T17:24:03.693

我在多线程编程中也面临同样的问题，我认为它的线程同步问题，但问题是在 File.Create() 之后我使用了 StreamWriter。在这里，您可以尝试而不是使用两个不同的步骤，您可以在一个步骤中组合起来。这段代码对我来说很好。

```
using (var writer = new StreamWriter(File.Exists(path) ? File.Open(path, FileMode.Open) : File.Create(path)))
{
    writer.Write(str);
    writer.Close();
} 
```

# java - 如何在 StringTemplate 中显示列表长度

> ID：14313306
> 
> 赞同：5
> 
> 时间：2013-01-14T04:20:33.150
> 
> 标签：java, stringtemplate

我想显示将出现在表格中的搜索结果的数量，有没有办法显示元素的数量或者你是否必须计算它，即我想显示如下内容：

```
Found $results.size$ result$if(rest(contacts))$s$endif$. 
```

当有多个搜索结果时，“s”正确显示，但`$results.size$`没有返回任何内容。不确定它是否重要，但我使用的是 Java，所以它是一个正在传递的列表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T04:41:07.683

找到了答案，有一个length()函数，即：

```
Found $length(results)$ result$if(rest(contacts))$s$endif$. 
```

# c# - Microsoft.Dynamics.BusinessConnectorNet 混合模式程序集错误

> ID：14313309
> 
> 赞同：1
> 
> 时间：2013-01-14T04:21:07.623
> 
> 标签：c#, ax

“FileLoadException 未被用户代码处理”（混合模式程序集是针对运行时的版本“v2.0.50727”构建的，如果没有额外的配置信息，则无法在 4.0 运行时中加载）

如上所述。我在尝试执行时遇到异常

```
 Axapta axapta;
        AxaptaRecord axaptaRecord;

        List<Vendor> vendors = new List<Vendor>();

        public void Submit(Vendor vendor)
        {

            axapta = new Axapta();
            axapta.Logon(null,null, null, null);
            using (axaptaRecord = axapta.CreateAxaptaRecord("IDS_Pelajar"))
            {
                axaptaRecord.Clear();
                axaptaRecord.InitValue();
                axaptaRecord.set_Field("TenteraPolisNo", vendor.VendorAccount);
                axaptaRecord.set_Field("Poskod", vendor.InvoiceAccount);
                axaptaRecord.set_Field("Keturunan", vendor.Name); 
                axaptaRecord.Insert();
            }
            axapta.Logoff();
            vendors.Add(vendor); 
```

我已经尝试在 app.config 中添加这行代码

```
<startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0"/>
  </startup> 
```

但它仍然不起作用。

我在控制台中执行该代码块没有问题。只有当我尝试在 WCF 服务库中执行该代码块时才会弹出异常

抱歉麻烦，但我现在真的输了..Tq 4帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T06:30:46.910

检查以下任何一项是否对您有帮助

[混合模式程序集是针对运行时版本“v2.0.50727”构建的，如果没有额外的配置信息，则无法在 4.0 运行时中加载 - 发布构建](http://social.msdn.microsoft.com/Forums/vstudio/en-US/2a5bf31e-df96-4bf1-a846-699da46b62fb/mixed-mode-assembly-is-built-against-version-v2050727-of-the-runtime-and-cannot-be-loaded-in-the)

[处理 WCF 服务主机中的混合模式程序集错误](http://blogs.claritycon.com/blog/2011/05/handling-mixed-mode-assembly-error-in-wcf-service-host/)

作为 WCF，我觉得第二个链接可能很有用。WCF 服务主机的配置文件位于 C:\Program Files (x86)Microsoft Visual Studio 10.0Common7IDEWcfSvcHost.exe.config，因此在此配置文件中进行更改应该可以修复它。

希望这可以帮助。

# javascript - 实现命名空间函数javascript

> ID：14313310
> 
> 赞同：0
> 
> 时间：2013-01-14T04:21:20.853
> 
> 标签：javascript, design-patterns

我正在实现 Stoyan Stefanov 的 javascript 命名空间函数，因为我一直在阅读他的内容丰富的 JavaScript 模式书；在我的网络应用程序中，但不确定我是否以正确的方式使用它

这是我在此页面[http://dalydd.com/projects/module_example/上的 Web 应用程序上使用的功能实现](http://dalydd.com/projects/module_example/)

```
 var COOP = COOP || {};

    COOP.namespace = function (ns_string) {
    var parts = ns_string.split('.'),
    parent = COOP,
    i;
     // strip redundant leading global
    if (parts[0] === "COOP") {
        parts = parts.slice(1);
    }
    for (i = 0; i < parts.length; i += 1) {
    // create a property if it doesn't exist
        if (typeof parent[parts[i]] === "undefined") {
            parent[parts[i]] = {};
        }

        parent = parent[parts[i]];
    }
    return parent;
};

     COOP.namespace('sliderContainer')
     COOP.sliderContainer = function () {
     return slider = ($('#slider').length > 0) ? $('#slider') : $('#element_temp'); 
}   // we need this at the beginning as others are dependent on it and call it initially 
```

我的目标是检查 COOP 的每个新属性，以查看它在实施之前是否存在 --- 所以如果我创建一个名为 COOP.sliderContainer 的 COOP 属性 - 我想确保 COOP.sliderContainer 不存在。当我使用命名空间函数时，它返回一个对象，但 COOP.sliderContainer 是一个函数。我觉得我必须做一个额外的抽象层才能命名这个命名空间函数正常工作

```
 var sliderContainer = COOP.namespace('sliderContainer');
 sliderContainer.sliderContainer = function () {
 return slider = ($('#slider').length > 0) ? $('#slider') : $('#element_temp'); 
 } 
```

这对我来说似乎很愚蠢和多余 - 有没有更好的方法来做到这一点？

任何信息都会一如既往地受到赞赏 - 该页面上有一个指向 js 文件的直接链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T04:36:36.587

命名空间功能在 COOP 内部创建子命名空间时很有用，它有助于避免多次检查。例如，您要创建**COOP.module.module1**，您必须进行 2 次检查以查看模块和模块 1 是否未定义。

但是，在这种情况下，sliderContainer 只是 COOP 的一个属性。无需使用命名空间。您只需自己检查一下：

```
if(COOP.sliderContainer === undefined){
    // define it
} 
```

**编辑**

您可以为您提供一个函数句柄：

```
COOP.createProperty = function(name, prop){
    if(COOP[name] === undefined){
        COOP[name] = prop;
    }
} 
```

然后

```
COOP.createProperty("sliderContainer", function(){  
    // do whatever you want
}); 
```

# eclipse - 提交完成时的 Subclipse SVN 内容过滤

> ID：14313311
> 
> 赞同：1
> 
> 时间：2013-01-14T04:21:38.730
> 
> 标签：eclipse, svn, eclipse-plugin, tortoisesvn, subclipse

我已经在 Eclipse 上为 SVN 设置了 subclipse。有时，我们忘记`console.logs()`在`JavaScript`源文件中删除，这些会导致一些错误`IE`

所以我在想，如果 subclipse 在 SVN 提交期间检测到任何内容，是否可以显示一条警报消息，`console.logs()`或者如果它可以完全擦除这些信息会更好`console.logs()`！（我知道我在这里要求更多！）。

提前谢谢各位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:56:12.050

您最好的选择是通过`pre-commit`挂钩脚本在服务器上执行检查。检查进来的内容；如果任何 JS 文件包含未注释`console.logs()`的语句（或 , 句点的任何实例`console.logs()`），则拒绝提交并告知用户原因。

您可能必须在服务器上维护一个工作副本以应用差异，以正确执行此检查。

如果您尝试在客户端进行任何检查，则必须分别配置每个客户端*并*相信用户只使用您配置的客户端。假设您有任何提供此功能的 SVN 客户端（我只知道 TortoiseSVN 允许这样的远程操作）。

您的 Subversion 客户端和服务器不应该*按照*您在最后一段中的建议自动“清除”行。您将不可避免地丢失您不想丢失的内容，并破坏您的构建。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-14T04:38:00.930

您可以使用 svn:ignore 忽略 JavaScript 或 Logs 目录。这是 IBM 的一篇文章，介绍了如何将 Subversion 与 Eclipse 一起使用。您可以查看“忽略文件”部分。[http://www.ibm.com/developerworks/opensource/library/os-ecl-subversion/](http://www.ibm.com/developerworks/opensource/library/os-ecl-subversion/)

> 如果您的项目生成文件，或者包含您不想签入 Subversion 存储库的文件，您可以告诉 Subclipse 忽略它们。右键单击要从版本控制中排除的文件或目录，然后选择 Team > Add to svn:ignore 以显示 Add to svn:ignore 对话框。

# html - MVC4 和 JQuery Mobile - 有时某些 ActionLink 按钮在某些时候不起作用，直到我刷新页面或在新选项卡中打开

> ID：14313316
> 
> 赞同：0
> 
> 时间：2013-01-14T04:23:33.793
> 
> 标签：html, jquery-mobile, asp.net-mvc-4

我试图弄清楚为什么在我的应用程序中创建记录后，相同的“创建新”按钮似乎不再起作用，直到我刷新页面或在新窗口中打开链接。

1.  我将点击右上角的“新建”按钮： ![在此处输入图像描述](../Images/cc75d0fba4b4b37707115203511a4e97.png)

2.  我被带到创建视图。然后我将填写表格并单击创建： ![在此处输入图像描述](../Images/e183ff46688164005af045ae2a1db16d.png)

3.  现在注意我列表中的新记录： ![在此处输入图像描述](../Images/2f35c56f56ad58244432115e2351b3c9.png)

4.  但是看看我是如何点击同一个创建新按钮的，**它只是保持突出显示的蓝色**（这是当你点击它时它变成的颜色）？什么都没有发生，但是如果我右键单击并在新选项卡中打开此链接，那么新选项卡将具有“创建新”表单。我也可以通过 JavaScript 进行程序化页面重新加载，这将解决这个问题，但我不想这样做。将鼠标悬停在链接上会在浏览器窗口底部显示正确的路线，所以我不确定为什么这不起作用！！请帮忙！！！ ![在此处输入图像描述](../Images/00cd72e929725aee819bbbc6c7ad5bfe.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:39:21.920

我终于自己想出了这个。在我的情况下，当我在索引视图中查看项目列表时，然后单击“创建”以创建一个新项目。创建它后，它会将我重定向回索引视图（如预期的那样）。正是在这一点上，我不能再单击 Create New 按钮（如上所述）。

所以，这是我的解决方案。

在您的创建视图中，在 BeginForm() 中指定调用您的操作和控制器，并添加一个名为“ `data_ajax = "false"`”的 Html 属性。这就是你需要做的。

```
@using (Html.BeginForm("Create", "Fillers", FormMethod.Post, new { data_ajax = "false" }))
{
    @Html.ValidationSummary(true)

    @Html.Partial("_CreateOrEdit", Model)

    <p>
        <input type="submit" value="Create" data-ajax="false" />
    </p>
} 
```

现在，当您创建一个新项目并被重定向回 Index 视图时，您现在可以再次单击 Create New 按钮。但请记住，这样做您将失去酷炫的旋转 GIF 动画，上面写着“嘿，正在处理，等等”。目前我不知道有任何其他方法可以解决它。

# javascript - 声明空变量以使其成为全局变量

> ID：14313317
> 
> 赞同：1
> 
> 时间：2013-01-14T04:23:36.713
> 
> 标签：javascript, global-variables

在 JavaScript 环境中，我可以在函数之前声明一个变量，以使该变量在全局级别上可访问。例如：

```
var a;
function something(){
  a = Math.random()
} 
```

这会使“a”成为全局变量吗？

或者正在使用...

```
var a = function(){
  var b = Math.random();
  return b;
}
document.write(a()) 
```

真的是唯一的方法吗？

除了调用函数“a()”之外，有没有办法让“b”成为全局变量？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T04:24:36.493

基本上有 3 种方式来声明一个全局变量：

1.  **在全局范围内声明它，在**任何函数范围之外。
2.  **将其显式分配**为窗口对象的属性：`window.a = 'foo'`.
3.  **根本不声明**（不推荐）。如果您[`var`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var)在第一次使用该变量时省略了关键字，那么无论您的代码在哪里发生，它都会被全局声明。

**注意#1：**在[严格模式下](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode)，如果你没有声明你的变量，你会得到一个错误（如上面的#3）。

**注意＃2：**使用`window`对象分配全局变量（如上面的＃2）在浏览器环境中可以正常工作，但在其他实现（例如[nodejs](http://nodejs.org/)）中可能无法正常工作，因为全局范围没有`window`对象。如果您使用不同的环境并想显式分配全局变量，则必须知道全局对象的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T04:25:50.890

> 这会使“a”成为全局变量吗？

[`var`声明](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var)使变量成为封闭范围的局部变量，通常是函数的。如果您在全局范围内执行代码，那么`a`将是一个全局变量。您也可以省略`var`, 那么您的变量将是隐式全局的（尽管显式声明更好地表明您的意图）。

> 除了调用函数“a()”之外，有没有办法让“b”成为全局变量？

您的`b`变量始终是函数的本地变量，`a`并且永远不会离开它，除非您删除`var`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T04:49:52.843

在考虑创建变量全局范围之前，您应该考虑[JavaScript 全局命名空间污染](http://www.gnucitizen.org/blog/javascript-global-namespace-pollution/)。您声明的全局变量越多，您的应用程序就越有可能与另一个应用程序的命名空间发生冲突并中断。因此，尽量减少全局变量的数量非常重要。

# mingw - 在 mingw 中进行 sed 就地编辑时权限被拒绝

> ID：14313318
> 
> 赞同：43
> 
> 时间：2013-01-14T04:23:40.747
> 
> 标签：mingw

我正在使用mingw。

```
 $ sed -i "s/a/b/" test.txt
  sed: preserving permissions for `./sed003480': Permission denied 
```

我可以在当前目录中触摸/rm 文件。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-19T03:57:42.020

这是由 Windows 安全设置引起的。

从上下文菜单中打开文件夹的属性设置。在 Security 选项卡中，单击*Edit* ，在弹出窗口中按*Add...*并将您的用户添加到列表中，在*Allow*列中选中**Full Control 。**按*OK*两次以应用更改。

 *** * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-02-15T08:56:25.927

对我来说，文件夹是只读的。取消选中只读选项可以解决我的问题。感谢 Zenadix 的评论

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-06-19T20:27:59.750

在 Windows 10 WSL 上，我遇到了类似的问题。该问题是由 VS 代码打开并显然使用该文件引起的。关闭 VS 代码解决了我的问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-10-24T12:20:44.063

TL;DR：使用`sudo`

* * *

就我而言，我正在运行一个在 Windows Subsystem for Linux (WSL) 上运行的 bash 脚本，如下所示：

```
./generate.sh 
```

该脚本创建了一堆文件，但是由于未知原因，sed 被拒绝修改这些文件的权限，原因如下：

实际的 sed 命令用于执行看起来有点像这样的搜索替换：

```
grep -rl $PATTERN $PUBLIC_API_FOLDER/ \
    | xargs sed -i 's/$PATTERN/$REPLACE/g' 
```

如您所见，尽管在任何时候都没有提升权限，但我仍然无法修改脚本创建的文件：

```
sed: preserving permissions for ‘public_api/models/sedt0qk4D’: Operation not permitted
sed: preserving permissions for ‘public_api/models/sedOxoc1O’: Operation not permitted
sed: cannot rename public_api/models/sedOxoc1O: Permission denied
sed: preserving permissions for ‘public_api/controllers/sedx5BafW’: Operation not permitted
sed: preserving permissions for ‘public_api/models/sedVkdqzc’: Operation not permitted
sed: preserving permissions for ‘public_api/models/sedLvyS3s’: Operation not permitted
sed: cannot rename public_api/models/sedLvyS3s: Permission denied
sed: preserving permissions for ‘public_api/controllers/sedE7GSe8’: Operation not permitted
sed: cannot rename public_api/controllers/sedE7GSe8: Permission denied
sed: preserving permissions for ‘public_api/controllers/sednHZBQf’: Operation not permitted
sed: cannot rename public_api/controllers/sednHZBQf: Permission denied 
```

我的解决方案是简单地使用 sudo 运行脚本。

```
sudo ./generate.sh 
```**

# jquery-ui - JTable jQuery 与 Spring MVC 3 问题集成

> ID：14313322
> 
> 赞同：2
> 
> 时间：2013-01-14T04:24:20.210
> 
> 标签：jquery-ui, jquery, spring-mvc, jquery-jtable

我在`JTable`集成到 Spring MVC时遇到问题

****** *** *******JSP代码******* *** ** *** ** *** *********

 *****```
<link href="http://www.jtable.org/Scripts/jtable/themes/metro/blue/jtable.css" rel="stylesheet" type="text/css" />
<link href="http://www.jtable.org/Content/themes/metroblue/jquery-ui.css" rel="stylesheet" type="text/css" />

<script src="http://www.jtable.org/Scripts/jquery-1.8.3.min.js" type="text/javascript"></script>
<script src="http://www.jtable.org/Scripts/jquery-ui-1.9.2.min.js" type="text/javascript"></script>
<script src="http://www.jtable.org/Scripts/jtable/jquery.jtable.js" type="text/javascript"></script>

<script>
$(document).ready(function() {

//setup the jtable that will display the results
$('#PeopleTableContainer').jtable({
        title: 'Table of people',

        actions: {
            listAction: '/admin/getalltherole',
            createAction: '/admin/addRole',
            updateAction: '/admin/updateRole',
            deleteAction: '/admin/deleteRole'
        },
        fields: {
         custId: {
                key: true,
                list: false
            },
            name: {
                title: 'Full Name',
                width: '30%'
            },
            birthYear: {
                title: 'Birth Year',
                width: '15%'
            },
            employer: {
                title: 'Employer',
                width: '25%'
            },
            infoAsOfDate: {
                title: 'As Of Date',
                width: '15%'
            },
            disabled: {
                title: 'Status',
                width: '15%'
            }
        }
    });
    $('#PeopleTableContainer').jtable('load');
});

</script>

<div id="PeopleTableContainer" style="width: 600px;"></div> 
```

****** *** ******弹簧控制器* ****** *** ** *** ** *** **********

 *****```
@RequestMapping(value = "/admin/getalltherole", method = RequestMethod.POST)
@ResponseBody
public JsonJtableResponse getalltherole(){
    JsonJtableResponse jstr = new JsonJtableResponse();
    jstr.setResult("OK");
    List<Role> roleList = testService.getAllRoles();
    jstr.setRecords(roleList);
    return jstr;
}

@RequestMapping(value = "/admin/addRole", method = RequestMethod.POST)
@ResponseBody
public JsonJtableResponse insert(@ModelAttribute Role role, BindingResult result) {
    JsonJtableResponse jsonJtableResponse = new JsonJtableResponse();
    if (result.hasErrors()) {
        jsonJtableResponse.setResult("ERROR");
    }
    try {
        Role newRole = testService.saveRole(role);
        //jsonJtableResponse.setRole(newRole);
    } catch (Exception e) {
        jsonJtableResponse.setResult(e.getMessage());
    }
    return jsonJtableResponse;
}

@RequestMapping(value = "/admin/updateRole", method = RequestMethod.POST)
@ResponseBody
public JsonJtableResponse update(@ModelAttribute Role role, BindingResult result) {
    JsonJtableResponse jsonJtableResponse = new JsonJtableResponse();
    if (result.hasErrors()) {
        jsonJtableResponse.setResult("Error");
        return jsonJtableResponse;
    }
    try {
        testService.updateRole(role);
        jsonJtableResponse.setResult("OK");
    } catch (Exception e) {
        jsonJtableResponse.setResult(e.getMessage());          
    }
    return jsonJtableResponse;
}

@RequestMapping(value = "/admin/deleteRole", method = RequestMethod.POST)
@ResponseBody
public JsonJtableResponse delete(@RequestParam Integer custId) {
    JsonJtableResponse jsonJtableResponse = new JsonJtableResponse();
    try {
        testService.deleteRole(custId);
        jsonJtableResponse.setResult("OK");
    } catch (Exception e) {
        jsonJtableResponse.setResult(e.getMessage());            
    }
    return jsonJtableResponse;
}

JSON response object

public class JsonJtableResponse {

    private String Result;

    private List<Role> Records;

    public String getResult() {
        return Result;
    }

    public void setResult(String Result) {
        this.Result = Result;
    }

    public List<Role> getRecords() {
        return Records;
    }

    public void setRecords(List<Role> Records) {
        this.Records = Records;
    }   
} 
```

****** *** ** *****获得 JSON 响应***** ** *** ** *** ******

 **```
 {
   "result":"OK",
   "records":[
      {
         "custId":"1",
         "name":"aaa",
         "birthYear":"1982",
         "employer":"xxx",
         "infoAsOfDate":"20130110",
         "disabled":"true"
      },
      {
         "custId":"2",
         "name":"bbb",
         "birthYear":"1982",
         "employer":"xxx",
         "infoAsOfDate":"20130111",
         "disabled":"true"
      },
      {
         "custId":"3",
         "name":"ccc",
         "birthYear":"1982",
         "employer":"xxx",
         "infoAsOfDate":"20130108",
         "disabled":"false"
      },
      {
         "custId":"4",
         "name":"ddd",
         "birthYear":"1981",
         "employer":"xxx",
         "infoAsOfDate":"20130107",
         "disabled":"true"
      }
   ]
} 
```

****问题*** ** *** ** *** ** *** ** *** ********

 **我可以使用 firebug 控制台获取给定的 JSON 响应。

但是当页面加载时，即使正确加载了 JSON 数据，它也会在 firebug 控制台上引发此错误，

```
 "NO Data available" 
```

信息显示在数据表上。

控制台上也有错误。

```
 "TypeError: this._$errorDialogDiv.html(message).dialog is not a function" 
```

正如我所搜索的，此错误通常是由于未正确添加 jquery UI 库。

当我改变 - listAction:`'/admin/getalltherole'`到一些不存在的 URL

```
 "An error occured while communicating to the server." is displayed in a dialog box. 
```

**jquery-ui-1.9.2.min.js**包含所有必需的 jquery UI 库，我也尝试单独添加所有库，但没有任何运气。

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-01T04:41:40.740

在 pom.xml 中添加 Jackson 库、maven 依赖项：

```
<properties>
    <jackson.version>1.9.10</jackson.version>
</properties>
<dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-mapper-asl</artifactId>
    <version>${jackson.version}</version>
</dependency> 
```

现在，您可以将 json 属性注释添加到类中的字段，以便按预期呈现 json 输出。您可以编写一个通用类（您的问题中的 JsonJtableResponse），如下所示：

```
public class JTableJSONResponse<T> {
    @JsonProperty("Result")
    private String result;

    @JsonProperty("Records")
    private List<T> records;

    @JsonProperty("Message")
    private String message;

    @JsonProperty("TotalRecordCount")
    private int totalRecordCount;

    public JTableJSONResponse(String result, List<T> records, int totalRecordCount) {
        super();
        this.result = result;
        this.records = records;
        this.totalRecordCount = totalRecordCount;
    }
    //getters and setters
} 
```

现在，您的控制器可能会说

```
List<Role> roleList = roleService.getAllRoles();
return new JTableJSONResponse<Role>("OK",roleList,roleList.size()); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T09:26:32.717

JSON 区分大小写。所以它将无法将“结果”与“结果”匹配。我的应用程序也遇到了同样的问题。

因此，请确保您的 JSON 响应以正确的大小写返回 Result 和 Records。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T22:59:14.750

问题是 JTable 需要区分大小写的 JSON 响应。

不是

```
 {
 "result":"OK",
 "records":[
  .......
  ]} 
```

但

```
 {
   "Result":"OK",
   "Records":[
   .......
   ]} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T08:01:10.263

从您面临的错误类型来看，您缺少一些要导入的 js 文件。

您是否添加了`json2.js`jtable 的外部依赖项

[https://github.com/hikalkan/jtable/tree/master/lib/external](https://github.com/hikalkan/jtable/tree/master/lib/external)

下面的 jtable 示例中提到了它，但您的代码中缺少它

[http://www.jtable.org/Tutorials/UsingWithAspNetWebFormsPageMethods#CreatePage](http://www.jtable.org/Tutorials/UsingWithAspNetWebFormsPageMethods#CreatePage)

还可以在 firebug 的帮助下检查所有 js 文件是否已加载。**************

# jquery - SIMPLE jQuery 需要验证

> ID：14313336
> 
> 赞同：3
> 
> 时间：2013-01-14T04:27:05.907
> 
> 标签：jquery, asp.net

所以我有这个文本框和按钮

```
<asp:TextBox ID="txtName" runat="server"></asp:TextBox>
<asp:Button ID="btnAdd" runat="server" Text="Add New Category" OnClick="btnAdd_Click" /> 
```

如何在单击 btnAdd 时编写一个非常简单的 jQuery 方法，它会检查 lblName 是否为空，如果为空则在文本框后显示一个红色 *。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T04:29:30.007

由于标签呈现为跨度，因此您必须采用 jQuery 的 html() 函数，如下所示

```
 $('lblName').html() 
```

创建一个函数并在客户端单击时调用它。

```
 <asp:Button ID="btnAdd" runat="server" Text="Add New Category" 
    OnClientClick="return Check();" OnClick="btnAdd_Click" /> 
```

和jQuery函数如下

```
 function check()
 {
     if($("#lblName").html()=="")
     {
         alert("your message");
         return false;
     }
     else
        return true;

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T04:42:26.397

我有点猜测你希望你的前景是什么，希望我能接近。

我建议创建一个位于文本框旁边的标签，如下所示：

```
<asp:TextBox ID="txtName" runat="server"></asp:TextBox><asp:Label ID="ErrorLabel" runat="server"></asp:Label>
<asp:Button ID="btnAdd" runat="server" Text="Add New Category" OnClick="btnAdd_Click" /> 
```

然后使用此处的功能检查并填写`*`是否需要：

```
<script type="text/javascript">
    function btnAdd_Click()
    {
        if($("#txtName").val()=="")
        {
            //Textbox is empty
            $("#ErrorLabel").val("*");
        }
        else
        {
            $("#ErrorLabel").val("");
        }
    }
</script> 
```

还有一些简单的 CSS 来给它上色：

```
<style type="text/css">
    #ErrorLabel {color:red;}
</style> 
```

# c++ - 密码过滤器无法在 vs2012 中编译

> ID：14313337
> 
> 赞同：1
> 
> 时间：2013-01-14T04:27:28.623
> 
> 标签：c++, visual-studio-2010, compiler-errors, visual-studio-2012, passwords

我在这个[地方](http://sourceforge.net/scm/?type=svn&group_id=77994&source=navbar)下载了一些关于密码过滤器的代码。原始项目是在vs2008和vs2010编译的。我更新到vs2012，发现无法编译。我该如何解决这个问题，谢谢。

这是错误消息： ![错误信息](../Images/34aad5ef0cdcc57c03f52db86613afaf.png)

```
Error   1   error C2440: '=' : cannot convert from 'char *' to 'TCHAR *'    D:\SVN\branch\nobull-branch\util.cpp    72  1   passwdHk
Error   2   error C2664: 'int sprintf_s(char *,size_t,const char *,...)' : cannot convert parameter 1 from 'TCHAR *' to 'char *'    D:\SVN\branch\nobull-branch\util.cpp    89  1   passwdHk
Error   3   error C2664: '_strdup' : cannot convert parameter 1 from 'TCHAR *' to 'const char *'    D:\SVN\branch\nobull-branch\util.cpp    91  1   passwdHk
Error   4   error C2664: 'strlen' : cannot convert parameter 1 from 'TCHAR *' to 'const char *' D:\SVN\branch\nobull-branch\util.cpp    188 1   passwdHk
Error   5   error C2664: 'pshk_log_write_w' : cannot convert parameter 2 from 'const char [28]' to 'LPCWSTR'    D:\SVN\branch\nobull-branch\util.cpp    202 1   passwdHk
Error   6   error C2664: 'strlen' : cannot convert parameter 1 from 'TCHAR *' to 'const char *' D:\SVN\branch\nobull-branch\util.cpp    208 1   passwdHk
Error   7   error C2664: 'strlen' : cannot convert parameter 1 from 'TCHAR *' to 'const char *' D:\SVN\branch\nobull-branch\util.cpp    211 1   passwdHk
Error   8   error C2664: '_strdup' : cannot convert parameter 1 from 'TCHAR *' to 'const char *'    D:\SVN\branch\nobull-branch\util.cpp    224 1   passwdHk
Error   9   error C2664: 'strlen' : cannot convert parameter 1 from 'TCHAR *' to 'const char *' D:\SVN\branch\nobull-branch\util.cpp    229 1   passwdHk
Error   10  error C2446: ':' : no conversion from 'const char *' to 'TCHAR *'   D:\SVN\branch\nobull-branch\util.cpp    249 1   passwdHk
Error   11  error C2664: 'int _snprintf_s(char *,size_t,size_t,const char *,...)' : cannot convert parameter 1 from 'TCHAR *' to 'char *'   D:\SVN\branch\nobull-branch\util.cpp    249 1   passwdHk
Error   12  error C2664: 'int _snprintf_s(char *,size_t,size_t,const char *,...)' : cannot convert parameter 1 from 'TCHAR *' to 'char *'   D:\SVN\branch\nobull-branch\util.cpp    254 1   passwdHk 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T05:24:00.537

您很可能不希望为当前的困境（呃...项目）进行 unicode 编译。

1.  在项目资源管理器中右键单击您的项目，选择“属性...”
2.  属性对话框的最顶部是一个配置选择下拉列表。您可能想要更改*所有*配置（除非出于某种奇怪的原因您想要构建非 Unicode 调试，而是 Unicode 版本）。如果您希望它们都是非 Unicode（并且您可能会这样做），请选择“所有配置”。
3.  在配置属性下的左窗格中，选择“常规”
4.  在右窗格中，在 Project Defaults 下，找到“Character Set”
5.  如果当前设置为 Unicode 字符集，如果您不打算使用 MBCS 功能，请将其更改为“多字节字符集”或“未设置”。
6.  保存您的项目文件，然后重建世界。

注意：您的 API 中的一些函数调用希望是通过宏定义选择的。我特别关心的是`pshk_log_write_w()`，选择它的名称是因为您正在编译为 Unicode（我希望）。运气好的话， `pshk_log_write_a()`当您进行上述更改时，该函数的相关窄版本将自动被选为预期目标。如果没有，可能在某些地方您需要进行一些从宽到窄的转换，但我只能希望不要。这样做很痛苦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T04:35:06.367

TCHAR 是 Microsoft 用于 8 位字符 (char) 或 16 位字符 (wchar_t) 的宏，用于帮助区分 Unicode 和 ASCII 字符串。他们在 SDK 中有两个不同的 API 集，这就是编译器是编译器的原因。似乎 Visual Studio 2012 默认为 wchar_t 而不是 char。您可以通过项目的选项禁用它：右键单击项目，然后单击属性。在一般部分下，应该有一个字符集选项。将其从使用 Unicode 字符集更改为使用多字节字符。阅读以下页面了解更多详情：http: [//msdn.microsoft.com/en-us/library/c426s321%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/c426s321%28v=vs.71%29.aspx)希望对您有所帮助。

# magento - 一页结帐上的 Magento 新用户注册活动

> ID：14313338
> 
> 赞同：0
> 
> 时间：2013-01-14T04:27:53.057
> 
> 标签：magento

我已经建立了一个观察者，它监听在新用户注册时发出的**registration_success_observer**事件（来自帐户页面）。观察者处理各种功能，最重要的是，如果传入会员 ID，则将用户升级到*会员组*。

问题是我需要为正在签出和注册为新客户的用户提供相同的功能。除了重新计算总数之外，我还需要一种方法来确定他们是否在单页结帐屏幕上注册为新客户（通过事件？）——我们商店中的某些商品对团体有特殊定价。

有谁知道解决这个问题的最佳方法？我应该监听的特定事件，或用于处理单页结帐屏幕中的功能的任何其他代码片段会很有帮助。

****更新****

我突然想到，直到订单完成后才真正创建了客户。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T15:03:57.063

您可以使用以下逻辑创建自己的“自定义事件”，以检查他们使用哪种方法来检查 success.phtml 或将其合并到 `sales_order_place_before`

```
$quoteId = Mage::getModel('sales/order')->loadByIncrementId($this->getOrderId())->getQuoteId();
$quote = Mage::getModel('sales/quote')->load($quoteId);
$method = $quote->getCheckoutMethod(true);
if ($method == 'register'){
//the customer registered...do your stuff
} 
```

来源： http: [//www.magentocommerce.com/boards/viewthread/273690/#t375160](http://www.magentocommerce.com/boards/viewthread/273690/#t375160)

但是，如果不重写单页结帐​​，您可能无法尝试执行此操作，因为在订单存储在数据库中之前创建了客户，但在处理信用卡之后，因此信用卡账单金额不等于订单总额.

您可以尝试在结帐过程的第一步中添加第三个选项（“注册为会员”），允许他们在开始结帐之前创建一个帐户。

# google-app-engine - 使用 google appengine maven 插件部署 Jax-RS 战争

> ID：14313341
> 
> 赞同：5
> 
> 时间：2013-01-14T04:28:14.723
> 
> 标签：google-app-engine, maven, jax-rs, web-deployment, web-inf

我正在尝试制作一个简单的基础项目，以将我使用 Jax-RS 库制作的服务部署到我的 Google 应用引擎云空间。问题是我不知道如何正确配置插件以不继续查找目标文件夹下的 webapp 目录。Jax-rs 项目的结构将 web.xml 和所有其他 WEB-INF 文件放在资源目录而不是 webapp 目录下。有没有办法配置 maven 插件来部署我已经构建和压缩的 war 文件？

这是我看到的错误

> [INFO] 更新 Google App Engine 应用程序找不到 webapp 目录 C:\dev\gameTrunk\server\target\HOMMTG-server-1.0 用法：AppCfg [options] [] []
> 
> 操作必须是以下之一： help：打印特定操作的帮助。
> download_app：下载之前上传的应用版本。
> request_logs：以 Apache 通用日志格式写入请求日志。
> rollback：回滚正在进行的更新。start：启动指定的服务器版本。

它适用于所有 appengine 插件目标......

这是我的pom

```
<plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <version>2.5.1</version>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.3</version>
            <configuration>
                <archiveClasses>true</archiveClasses>
                <webResources>
                    <!-- in order to interpolate version from pom into appengine-web.xml -->
                    <resource>
                        <directory>${basedir}/src/main/resources/WEB-INF</directory>
                        <filtering>true</filtering>
                        <targetPath>WEB-INF</targetPath>
                    </resource>
                </webResources>
            </configuration>
        </plugin>
        <plugin>
            <groupId>com.google.appengine</groupId>
            <artifactId>appengine-maven-plugin</artifactId>
            <version>${appengine.target.version}</version>
        </plugin>
    </plugins> 
```

这只是插件部分，但它几乎与留言簿示例项目完全相同，除了 WEB-INF 目录的路径

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T00:32:00.170

目前无法将 appengine-maven-plugin 配置为使用不同的目录存储战争内容。最好创建一个多模块构建，其中一个子模块只使用 maven-ant-plugin 来组装 war 目录，然后在其上运行插件。我认为我们不想在插件中进行配置，因为它与 maven-war-plugin 并不真正对齐，并且配置它会使您的项目难以设置为无缝使用 maven-war-plugin在将来。

您当前在 pom 中为 war-plugin 进行的配置不是必需的，除非您希望将版本号插入 appengine-web.xml。我很乐意帮助您设置 pom，以便官方的 Google App Engine Maven 插件为您正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T07:22:21.880

（下面的说明适用于[maven-gae-plugin](http://www.kindleit.net/maven_gae_plugin/)，而不是 appengine-maven-plugin。我有没有告诉过你今天谷歌在开源方面有多糟糕？）

我认为您必须在您的 maven-gae-plugin 中添加一个名为`appDir`指向您的 webapp 目录的属性，如下所示：

```
 <plugin>
        <groupId>net.kindleit</groupId>
        <artifactId>maven-gae-plugin</artifactId>
        <configuration>
          <appDir>PATH-TO-YOUR-BUILT-EXPLODED-WAR-PATH</appDir>
        </configuration>
   </plugin> 
```

但是，我必须强调，更改 Maven 中的路径会产生不良结果（您正在混合源代码和目标代码，您的 .ignore 文件会变得混乱，以及其他奇怪的事情）

请注意，您仍然需要在某个地方进行未打包的战争。实现这一点的一种方法是创建另一个 .war 项目并使用 dependencies-unpack 到其中。见[http://maven.apache.org/plugins/maven-dependency-plugin/unpack-dependencies-mojo.html](http://maven.apache.org/plugins/maven-dependency-plugin/unpack-dependencies-mojo.html)

（参考：[https](https://github.com/maven-gae-plugin/maven-gae-plugin/blob/master/maven-gae-plugin/src/main/java/net/kindleit/gae/EngineGoalBase.java) ://github.com/maven-gae-plugin/maven-gae-plugin/blob/master/maven-gae-plugin/src/main/java/net/kindleit/gae/EngineGoalBase.java ）

（以防万一，我前段时间写了一个基于 JAX-RS 的 GAE 项目，并且它是开放的。有关概述，请参阅[https://github.com/ipeirotis/ReadabilityMetrics/ ）](https://github.com/ipeirotis/ReadabilityMetrics/)

# c++ - scanf(%s) EOF 的问题

> ID：14313344
> 
> 赞同：0
> 
> 时间：2013-01-14T04:29:17.230
> 
> 标签：c++, c, codeblocks

我使用 scanf 因为我们必须使用它。问题如下：（这只是问题的一个例子）：

```
 int main() {
        char ch [10]={0};
        scanf("%s",ch);

        printf("%s",ch);
    } 
```

如果我运行程序并输入例如：当 ^Z 为 EOF 时，单词 ^Z。程序停留在原地，卡在 scanf 中，尽管我确实输入了 word 然后 ctrl+z 然后 Enter。但不知何故，它停留在 scanf 中，与重定向相同，就像 ctr+z 或任何东西都没有问题。

我希望我能得到一些帮助

在此先感谢，完全欣赏它:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T05:25:41.080

`scanf`使用空格作为分隔符将读取的数据存储到各个字段中。从命令行输入`Control``Z`，然后`Enter`只将`EOF`字符放入输入流并`scanf()`继续等待空格。如果`Enter`再次点击，`scanf`将收到空白字符，并且包括 在内的所有内容都`EOF`将存储到`ch`数组中。

这是一个示例运行。第一行是输入，第二行是输出。

```
Hello^Z
Hello→ 
```

# ruby - 解析 Latex 文档时的树顶无限循环

> ID：14313346
> 
> 赞同：1
> 
> 时间：2013-01-14T04:29:21.540
> 
> 标签：ruby, treetop

我正在尝试使用 treetop 编写一个解析器来将一些乳胶命令解析为 HTML 标记。通过以下内容，我在生成的代码中得到了一个死角。我已经构建了源代码`tt`并逐步完成，但它并没有真正阐明根本问题是什么（它只是在_nt_paragraph中旋转）

`Test input: "\emph{hey} and some more text."`

```
grammar Latex
  rule document
    (paragraph)* {
      def content
        [:document, elements.map { |e| e.content }]
      end
    }
  end

  # Example: There aren't the \emph{droids you're looking for} \n\n. 
  rule paragraph
    ( text / tag )* eop {
      def content
        [:paragraph, elements.map { |e| e.content } ]
      end
    }
  end

  rule text
    ( !( tag_start / eop) . )* {
      def content
        [:text, text_value ]
      end
    }
  end

  # Example: \tag{inner_text}
  rule tag
    "\\emph{" inner_text '}' {
      def content
        [:tag, inner_text.content]
      end
    }
  end 

  # Example: \emph{inner_text}
  rule inner_text
    ( !'}' . )* {
      def content
        [:inner_text, text_value]
      end
    }
  end

  # End of paragraph.
  rule eop
    newline 2.. {
      def content
        [:newline, text_value]
      end
    }
  end

  rule newline
    "\n"
  end

  # You know, what starts a tag
  rule tag_start
    "\\"
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:23:40.703

对于任何好奇的人，树顶开发谷歌小组的克利福德（Clifford）发现了这一点。

问题在于段落和文本。

文本是 0 个或多个字符，并且一个段落中可以有 0 个或多个文本，所以发生的情况是在第一个 \n 之前有无限数量的 0 长度字符，导致解析器死机。修复方法是将文本调整为：

```
( !( tag_start / eop) . )+ 
```

所以它必须至少有一个字符才能匹配。

# android - Cocos2D-X for android, Symbol 'cocos2d' 无法解析

> ID：14313349
> 
> 赞同：7
> 
> 时间：2013-01-14T04:29:40.087
> 
> 标签：android, eclipse, macos, android-ndk, cocos2d-x

[在http://www.raywenderlich.com/11283/cocos2d-x-for-ios-and-android-getting-started](http://www.raywenderlich.com/11283/cocos2d-x-for-ios-and-android-getting-started)之后，我从 Cocos2D-X for android 开始。

我在 xcode 和 android 中运行演示没有问题，直到我转到**“在 Eclipse 中定义组合的 Java/C++ 项目”**部分。

在我完成所有这些之后，我得到了`Symbol 'cocos2d' could not be resolved`in`using namespace cocos2d;`和`jni/hellocpp/main.cpp`许多其他类似错误的错误。我发现`#include "cocos2d.h"`这个文件中缺少，所以我添加了这一行，但错误仍然存​​在。

我不知道为什么，但我认为一定是某些库没有被导入。

在我的 android 项目中，有一个`includes`包含 NDK 和 $(COCOS2DX_HOME)/cocos2dx/include 的目录，但在 $(COCOS2DX_HOME)/cocos2dx/include 中只有 7 个 .h 文件（包括 cocos2d.h）。我不知道这是否正确。

有没有人可以帮帮我，谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T10:50:50.143

我已经根据另一篇文章解决了这个问题（[http://www.cnblogs.com/young40/archive/2012/10/19/cocos2d-x-mac-os-x-android-xcode-ios-development-setup.中文写的html](http://www.cnblogs.com/young40/archive/2012/10/19/cocos2d-x-mac-os-x-android-xcode-ios-development-setup.html)）。

[http://www.raywenderlich.com/11283/cocos2d-x-for-ios-and-android-getting-started](http://www.raywenderlich.com/11283/cocos2d-x-for-ios-and-android-getting-started)之间的重要区别，我在下面列出：

1.  右键单击项目，然后选择 Properties\C/C++ General\Paths and Symbols\Source 位置。单击链接文件夹，选中链接到文件系统中的文件夹复选框，然后浏览到**$COCOS2DX_HOME**文件夹内的**cocos2dx**目录。（与添加类相同）

***   右键单击项目并选择 Properties\C/C++ General\Path and Symbols\GNU C++。添加`$(COCOS2DX_HOME)/CocosDenshion/include`** 

 **起初，我怀疑不包括`cocos2dx`上课。实际上，在我链接`$COCOS2DX_HOME/cocos2dx`到项目之后，所有错误都消失了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T05:48:45.547

只需检查您是否在项目属性中包含了 Cocos2d-x headers 文件夹的路径？如果没有右键单击您的项目 -> 属性 -> C/C++ 常规 -> 路径和符号 -> 包含选项卡 -> 程序集 -> 添加 -> PATH_TO_YOUR_COCOS2DX/cocos2dx/include 以及 GNU C++ 选项卡

您必须将 PATH_TO_YOUR_COCOS2DX 替换为下载 cocos2dx 的实际绝对路径**

# mongodb - 基于另一个查询的mongodb计算字段

> ID：14313350
> 
> 赞同：0
> 
> 时间：2013-01-14T04:29:46.697
> 
> 标签：mongodb, computed-field

我有一个 mongodb 查询，我想添加一个计算字段。计算字段基于项目在另一个查询结果中的位置。所以我的查询返回列 a、b、c、d，然后列 e 应该基于当前行是否会被另一个查询匹配。

有没有一种有效的方法可以在 mongo 中做到这一点？我真的不知道如何做到这一点......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:21:24.880

当通过标准函数（例如`find`. 社区已提出要求，但一般要求是仅对单个文档进行操作。

聚合框架中有使用 $project 的计算字段。但是，它们只对管道中的当前文档进行操作。因此，他们无法总结其他查询。

`e`作为数据访问层的一部分，您可能需要构建您的价值。

# html - 在 Windows Phone 模拟器上获取整页背景图像时遇到问题

> ID：14313355
> 
> 赞同：0
> 
> 时间：2013-01-14T04:30:38.183
> 
> 标签：html, windows-phone-7, css

**背景**：我正在尝试为 Windows Phone 7 修改现有的 Web 应用程序。我的开发环境是 Microsoft Visual Studio 2010 高级版，并且我已经安装了 Windows Phone SDK 7.1。我的 Web 应用程序仅包含 HTML 和 CSS。模拟器上的网络浏览器是 Internet Explorer Mobile 9。

**问题**：我无法让我的网页全屏显示（宽度很好，但**我的页面高度仅为显示区域的 80% 左右，**其余 20% 显示为纯白色。

例如，我尝试为我的页面获取背景图像并将其显示为整页。

```
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="Cache-control" content="no-cache" />
    <title>index</title>
    <link rel="stylesheet" type="text/css" media="only screen and (max-device-width: 500px)" href="mobile.css" />          
  </head>

  <body>
    <img src="background2.jpg" id="bbg" alt=""/>
  </body>

</html> 
```

以下是mobile.css：

```
#bbg {
  position:fixed; 
  top:0; 
  left:0; 

  /* Preserve aspet ratio */
  min-width:100%;
  min-height:100%;
} 
```

![样本输出](../Images/d22841d459364eb3d2821680f97805e3.png)

我怎么能纠正这个？有任何想法吗？？

**编辑（解决方案）**
正如 Fabian 在接受的答案中提到的，这是我必须添加到标记中的内容：

```
<meta name="Viewport" content= "height= device-height; user-scaleable=no; initial-scale=1.0" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T06:53:19.803

尝试正确设置您的[元视口](http://blogs.msdn.com/b/iemobile/archive/2010/11/22/the-ie-mobile-viewport-on-windows-phone-7.aspx)标签。这些控制浏览器窗口内页面的缩放。

如果这仍然没有帮助，请尝试将背景图像设置为设备分辨率（800x480px），看看是否有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-14T09:09:36.277

可能是由于未在 xaml 文件中指定 shell:SystemTray.IsVisible="False" 引起的。

```
<phone:PhoneApplicationPage 
    ....
    shell:SystemTray.IsVisible="False">
... 
```

此代码删除标准 Windows Phone Silverlight 应用程序的上部“状态栏”

# github - WWW 和 Github 文件夹同步

> ID：14313358
> 
> 赞同：2
> 
> 时间：2013-01-14T04:31:20.053
> 
> 标签：github, wamp, github-for-windows

Github 还是新手，想知道是否可以将 WWW 特定文件夹同步到 Github 项目文件夹。

假设，我正在处理**/www/my-project/**并且我有 github 文件夹**/github/my-project-repo/** 主要问题是，我怎样才能轻松地将文件从 my-project 移动到 my-project-repo类似于提交。复制粘贴似乎是一种枯燥的方法。任何提示都有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:59:31.293

使用git 命令的`--git-dir`and选项：`--work-tree`

如果您正在修改 my_project 中的文件，但希望在 my-project-repo git repo 中考虑它们，您可以执行以下操作：

```
git --work-tree=/www/my-project/ --git-dir= /github/my-project-repo/.git status
git --work-tree=/www/my-project/ --git-dir= /github/my-project-repo/.git add -A .
git --work-tree=/www/my-project/ --git-dir= /github/my-project-repo/.git commit -m "add files from my-project" 
```

[您](https://stackoverflow.com/questions/3107789/using-git-how-do-you-reset-the-working-tree-to-the-state-of-the-index)可能希望在`/github/my-project-repo`使用`git add`.

```
cd /github/my-project-repo
git checkout . 
```

请注意您可能对*公共*文件进行的并发修改：最后一次签出会被您从`/www/my-project`.

如果您想确保保留任何正在进行的工作`/github/my-project-repo`：

```
 git stash save --keep-index
 git stash drop 
```

* * *

OP 找到了一个更简单的解决方案，并且：

*   将存储目录移至`/www/`.
*   `cd /my-project/`,
*   `git config`,`git init`等。

> 我停止跟踪保存在`Docs/Github/`我的第一个存储目录上的存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:57:45.990

终于弄明白了......这里有一些视频教程对我有帮助：

[http://www.youtube.com/watch?feature=player_embedded&v=mYjZtU1-u9Y](http://www.youtube.com/watch?feature=player_embedded&v=mYjZtU1-u9Y)

*   Git的基本原理
*   Git 和 GitHub 的区别
*   Git的安装和设置教程
*   Git的基本（但核心）命令行

[http://www.youtube.com/watch?feature=player_embedded&v=8r_IErxmoUc](http://www.youtube.com/watch?feature=player_embedded&v=8r_IErxmoUc)

*   GitHub 帐户注册教程和一般提示
*   将 GitHub 与 Git 结合使用（配置和演示）
*   GitHub Windows客户端安装教程（GUI）
*   分支、合并、克隆和分叉简介

[http://www.youtube.com/watch?feature=player_embedded&v=STJBFXskfCc](http://www.youtube.com/watch?feature=player_embedded&v=STJBFXskfCc)

*   使用 Git 和 GitHub 的开发周期示例
*   有关分支、合并、克隆和分叉的更多详细信息
*   合并冲突简介

[http://www.youtube.com/watch?v=LCv2BIQpPgI&feature=player_detailpage](http://www.youtube.com/watch?v=LCv2BIQpPgI&feature=player_detailpage)

*   深入了解合并冲突
*   标记
*   恢复提交

# asp.net-mvc-3 - 程序化 LESS 导入

> ID：14313359
> 
> 赞同：0
> 
> 时间：2013-01-14T04:31:33.267
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, less, dotless

有什么方法可以告诉我们根据实际情况少导入不同的外部文件？

我用无点处理我的LESS，但找不到任何暗示这可能的东西。

编辑：也只是这样这个信息是可用的。我知道如何将特定文件导入另一个文件。我的问题是能否根据其他一些数据指定要导入的文件....用户角色...某事的状态...等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:52:03.003

在使用 ASP 生成 LESS 文件时，您是否有理由不能这样做：

```
If userRole1 Then     

  code to load imports for userRole1   

Else    

  code to load default imports

End If 
```

换句话说，使用 ASP 生成您的 LESS 文件，访问您需要的内容，然后让它输出带有所需导入的 LESS 代码，然后 LESS 接管构建 CSS。

# php - .getJSON() 中的 jsoncallback 参数有什么用？

> ID：14313365
> 
> 赞同：3
> 
> 时间：2013-01-14T04:33:28.587
> 
> 标签：php, jquery, ajax, json, getjson

在许多示例代码中，我看到 .getJSON() 的格式类似于

```
$.getJSON("url?jsoncallback=?", function(data){
...} 
```

在后端，响应写成

```
$response = $_GET["jsoncallback"]."(".json_encode($orders).")";
echo $reponse 
```

我删除“？jsoncallback =？” 从 url 和 $_GET["jsoncallback"] 以及后端的方括号，似乎一切仍然有效。那么那个 jsoncallback 的东西到底有什么用呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T04:35:08.733

回调名称用于[JSONP](http://en.wikipedia.org/wiki/JSONP)，这是一种规避[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T05:07:27.487

如果你没有它，`jsoncallback=?`它只会做普通的 JSON 请求而不是 JSONP ^*。[您可以在自己的服务器或发送CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)标头的服务器上执行正常的 JSON 请求。

* * *

^*忘记 JSONP，这是一个花哨的名称，用于在您的文档中插入一个脚本元素，该元素运行来自外部服务器的代码，但与您自己的脚本具有相同的授权。,`$_GET["jsoncallback"]`使它成为一个像这样的javascript函数调用：

```
fn({"data": "value"}); 
```

这是脚本中的代码，例如`<script src="http://foreign.org/data?jsoncallback=fn"></script>`. 如您所见，这是 Javascript，而不是 JSON。有了这个，foreign.org（或黑客攻击他们的人）可以更改他们的脚本以在您的页面上执行任何授权操作，因此在使用“JSONP”时要小心并更喜欢 CORS JSON。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T04:41:48.573

JSON 回调可用于通过 jQuery 显示跨域数据。JSONP 用于进行跨域调用，因为同源策略不允许。看看下面的例子。

[http://www.9lessons.info/2009/12/display-cross-domain-data-json-callback.html](http://www.9lessons.info/2009/12/display-cross-domain-data-json-callback.html)

# jquery - Facebook Like 插件在使用 jquery 拖动或排序插件 div 后重新加载

> ID：14313366
> 
> 赞同：-1
> 
> 时间：2013-01-14T04:33:31.783
> 
> 标签：jquery, facebook

我正在使用 jquery 拖放将 Facebook 插件放置到 div 当我移动插件时，它会重新加载...我没有在拖放/排序事件中触发 fbml 解析

这是一个例子

```
[Demo Link here](http://jsfiddle.net/aneeshsudhakaran/BSggz/embedded/result/)! 
```

当我排序时，喜欢按钮会重新加载

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:47:45.230

我想通了，但你不会喜欢它......

所以 jquery 做可排序的事情的方式是，它删除元素并为其创建一个占位符，然后当你释放它时，它会将它添加回可排序列表中。

因此，据我所知，您对此无能为力，除非您在没有可排序的情况下进行操作，并且以不同的方式进行操作。

因此，要亲自查看检查器中的结构（假设您使用的是好的浏览器:-D）并拖动元素，您将看到它的作用。

# android - 矩阵操作矩形的命中测试

> ID：14313381
> 
> 赞同：1
> 
> 时间：2013-01-14T04:36:20.893
> 
> 标签：android, matrix

我有一个位图图像，我正在尝试对其进行命中测试。如果它只是一个普通的位图，命中测试就可以工作。但我需要旋转和缩放位图，我似乎无法正确地计算出命中测试。

x 和 y 这里是光标 x 和 y。我需要检查是否在操纵的位图中单击了光标（手指按下）。规模似乎工作正常，但旋转似乎没有影响。

```
float[] pts = new float[4];
float left = m.getX();
float top = m.getY();
float right = left + mBitmaps.get(i).getWidth();
float bottom = top + mBitmaps.get(i).getHeight();
pts[0] = left;
pts[1] = top;
pts[2] = right;
pts[3] = bottom;

float midx = left + mBitmaps.get(i).getWidth()/2;
float midy = top + mBitmaps.get(i).getHeight()/2;

Matrix matrix = new Matrix();
matrix.setRotate(m.getRotation(), midx, midy);
matrix.setScale(m.getSize(), m.getSize(), midx, midy);

matrix.mapPoints(pts);

if(x >= pts[0] && x <= pts[2] && y >= pts[1] && y <= pts[3])
{
    return i;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T05:53:32.847

您的测试失败，因为旋转后矩形不再与坐标轴对齐。

您可以做的一个技巧是使用逆变换矩阵将光标位置转换回来，然后将转换后的位置与原始矩形进行比较。

```
Matrix matrix = new Matrix();
matrix.setRotate(m.getRotation(), midx, midy);
matrix.postScale(m.getSize(), m.getSize(), midx, midy);

Matrix inverse = new Matrix();
matrix.invert(inverse);
pts[0] = x;
pts[1] = y;
inverse.mapPoints(pts);
if(pts[1] >= top && pts[1] <= bottom && pts[0] >= left && pts[0] <= right)
{
    return i;
} 
```

# .net - 关于svcutil.exe生成的schemas.microsoft.com.2003.10.Serialization.xsd的问题

> ID：14313386
> 
> 赞同：0
> 
> 时间：2013-01-14T04:36:47.270
> 
> 标签：.net, wcf, wsdl, asmx, svcutil.exe

我想将`WSDL`我的文件分`WCF service`发给所有利益相关者。有些人会从中生成实际的 Web 服务，而有些人会编写它的客户端部分。

当我生成`wsdl`时，我发现它`schemas.microsoft.com.2003.10.Serialization.xsd`也生成了。我的问题是：

1.  分发包中是否需要此文件/模式？（我想是的。）
2.  是否符合标准？
3.  会有互操作性问题吗？一些利益相关者在`Java`平台`Delphi`上。
4.  为什么没有为`ASMX`服务生成类似的模式定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T05:37:29.580

> *我的问题是：*
> 
> *1）分发包中是否需要此文件/模式？（我认为，是的。）
> 2）它是否符合标准？
> 3) 会有任何互操作性问题吗？一些利益相关者在 Java 和 Delphi 平台上。
> 4) 为什么没有为 ASMX 服务生成类似的模式定义？*

我的回答是：

1) 是的，这是必要的——通常，WCF 不会生成不必要的东西....
2) 是的，它**100%**符合所有 WS-* 和 XML Schema 标准。
3) 仅当等式的*另*一边不符合记录的标准时......
4) 只有微软的设计师才能回答......我不知道 - 坦率地说我不知道小心，因为 ASMX 是*传统*技术

# ios - NSPredicate 过滤数组，但只返回一个对象的一个 字段

> ID：14313396
> 
> 赞同：1
> 
> 时间：2013-01-14T04:38:54.830
> 
> 标签：ios, objective-c, cocoa, nspredicate

我确定有人问过这个问题，但我不知道要搜索什么。

我有一组带有以下字段的 Message 对象`{selected[BOOL], messageText[STR]}`。我想过滤此数组以仅获取带有`selected=TRUE`. 到现在为止还挺好。

```
NSArray *messagesFiltered = [self.fetchedResultsController.fetchedObjects filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"selected == TRUE"]]; 
```

但是，我不需要返回数组中的对象本身，我需要一个`messageText`字符串数组。如何修改`predicate`为只返回`messageText`字符串而不是整个对象？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-14T04:46:31.203

这不是谓词的真正工作。谓词仅用于*过滤*而不是*修改*您应用它们的数组。

但是，有一个有趣的小技巧：该方法[`-valueForKey:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/doc/uid/20000137-BBCIBCDJ)会将您想要的转换类型应用于您的数组。只需使用`messageText`您想要的密钥调用它：

```
NSArray *messagesFiltered = [self.fetchedResultsController.fetchedObjects filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"selected == TRUE"]];
NSArray *realMessages = [messagesFiltered valueForKey:@"messageText"]; 
```

在数组上，`-valueForKey:`向每个元素询问给定键的值，然后返回一个包含所有元素返回的数组。`nil`（为您传递的键返回的任何元素都显示`[NSNull null]`在结果数组中。）

# python - 从 Python 中的数据中去除尖峰噪声

> ID：14313401
> 
> 赞同：2
> 
> 时间：2013-01-14T04:39:51.710
> 
> 标签：python, matlab, scipy, noise

我正在将所有数据分析从 MATLAB 转移到 Python，我终于遇到了一个无法快速找到交钥匙解决方案的障碍。我有来自许多仪器的时间序列数据，包括需要去尖峰的 ADV（声学多普勒测速仪）。以前我在 MATLAB 中使用过这个功能非常好： http: [//www.mathworks.com/matlabcentral/fileexchange/15361-despiking](http://www.mathworks.com/matlabcentral/fileexchange/15361-despiking)

有人知道 Python 中有类似的功能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T05:27:24.693

我会使用[中值过滤器](http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.filters.median_filter.html)，并且有很多选项取决于您的数据类，例如

```
import scipy.ndimage as im
x= im.median_filter(x, (self.m,self.m)) 
```

# c# - 我的 WCF 服务的引用名称 - Customers.svc 还是 CustomersWcfDS.svc？

> ID：14313404
> 
> 赞同：0
> 
> 时间：2013-01-14T04:40:03.570
> 
> 标签：c#, asp.net, visual-studio-2010, wcf

我有以下 Visual Studio Web 应用程序结构：

```
CustomerManagement\
  - Services
    - Customers.aspx
      - Customers.aspx.cs
    - CustomersWcfDS.svc
  - Default.aspx
  - web.config 
```

以下代码位于`<configuration>`web.config 文件中：

```
<system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpBinding_ICustomers" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings>
<client>
  <endpoint address="http://localhost:1112/Services/Customers.svc" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ICustomers" contract="CustomersService.ICustomers" name="BasicHttpBinding_ICustomers" />
</client>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
</system.serviceModel> 
```

我构建项目并输入以下 URL，但没有任何反应。

```
http://localhost:1112/Services/Customers.svc 
```

我还尝试了以下方法：

```
http://localhost:1112/Services/CustomersWcfDS.svc 
```

并且

```
http://localhost:1110/Services/Customers.svc 
```

和

```
http://localhost:1110/Services/CustomersWcfDS.svc 
```

（端口 1110 已测试，因为项目属性`Port number`设置为`1110`。）

但它仍然无法显示类似下图的内容

![在此处输入图像描述](../Images/65052f41ec6c9a83ebd146b63a1d4135.png)

那么，有没有专家可以告诉我我的 WCF 服务 URL 去了哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T04:59:40.780

您好，根据您的图片，

我认为您已将服务名称重命名为 Customers.svc 。但它仍然指的是前一个。您可以做的是尝试在整个解决方案中找到“SimpleService.svc”并将其重命名为Customers.svc。如果您有任何问题，请将其作为评论。

# php - MYSQL PHP 基于重复列将多行合二为一

> ID：14313408
> 
> 赞同：1
> 
> 时间：2013-01-14T04:41:10.670
> 
> 标签：php, mysql, merge, duplicates

我有一个包含大量重复数据的电子邮件列表，我想合并在某一列中具有重复数据的行。

这是我的表：

```
autoid,title,lastname,firstname,middlename,prefix,
fulladdress,address1,address2,
city,state,zip,country,county,phone1,phone2,email,id, ts 
```

我想根据 email 和 phone1 合并重复的行。如果这些内容在两行中相同，那么我想合并这些行并填写任何空白，然后删除第二行。具有较低 autoid 的行中的数据将优先于具有较高 id 的行。

如果我们可以使用单个 mysql 查询来做到这一点，那就太好了，但如果我们必须使用 PHP，那也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:51:38.913

您可以使用类似的东西将多行组合成一个单行

```
GROUP BY email, phone1 
```

如果你只是插入这个，你会得到任何一个组合行。如果您希望值优先于`NULL`字段，则可以使用聚合函数，例如`MIN`：

```
SELECT MIN(title), MIN(lastname), …
FROM tableName
GROUP BY email, phone1 
```

但这会决定为每一行分别取哪个值。组合行但以您描述的方式进行的查询在 MySQL 中会相当棘手。您可以有一个查询，它按匹配列的顺序列出所有行，然后降序排列`autoid`，使用用户变量来填补空白。但是不填补不匹配行中的空白会很困难，因此每个匹配对的一个子查询可能会更好。除了查询的性能和可读性之外，总的来说，使用 PHP 解决方案可能会更好。

在 PHP 中，事情应该相当简单：查询数据库

```
ORDER BY email, phnone1, autoid ASC 
```

然后在 PHP 端，对于您从数据库中读取的每一行，检查它是否与两个特定列中先前读取的行匹配。如果是这样，请遍历列，随时替换`null`s 。这些天我不是一个 PHP 编码器，所以其他人可能更适合为此编写代码片段。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-16T14:38:41.120

我们真的不喜欢在 StackOverflow 上提供完整的代码解决方案，通常我们会帮助您编写自己的代码解决方案，但我不确定我是否可以在没有实际编写代码自己弄清楚的情况下解释所有步骤，所以在这里是一些入门代码。

**这是未经测试的原始代码**

首先***复制您现有的表格***，直到我们知道此代码不会损害或删除您现有的数据，然后在副本上执行所有操作，然后在解决它并且您已经验证它可以正常工作然后将其应用到正确的桌子。

使用以下命令创建副本：

```
CREATE TABLE EmailListCopy LIKE EmailList; 
INSERT EmailListCopy SELECT * FROM EmailList; 
```

PHP代码：

```
<?php

//This script will first query the table for ALL results, store them in arrays, 
//then loop through the arrays to search the table for duplicates using individual
//sql queries and then compare the results, update the entry as needed and delete the
//duplicate row. THIS CODE IS NOT OPTIMIZED!! DO NOT RUN CONTINUOUSLY!! This should be
//used for OCCASIONAL merging ONLY!! i.e. Once-a-day or once-a-week etc...
$result="";
$duplicatesFound;
//Setup arrays to hold the original query information
$autoidArray = array();
$titleArray = array();
$lastnameArray = array();
$firstnameArray = array();
$middlenameArray = array();
$prefixArray = array();
$fulladdressArray = array();
$address1Array = array();
$address2Array = array();
$cityArray = array();
$stateArray = array();
$zipArray = array();
$countryArray = array();
$countyArray = array();
$phone1Array = array();
$phone2Array = array();
$emailArray = array();
$idArray = array();
$tsArray = array();
$link=mysqli_connect($hostname,$dbname,$password,$username);
if(mysqli_connect_errno())
{
    $result="Error connecting to database: ".mysqli_connect_error();
}
else
{
    $stmt=mysqli_prepare($link,"SELECT autoid,title,lastname,firstname,middlename,prefix,fulladdress,address1,address2,city,state,zip,country,county,phone1,phone2,email,id,ts FROM " . $table);
    mysqli_stmt_execute($stmt);
    mysqli_stmt_bind_result($stmt, $autoid, $title, $lastname, $firstname, $middlename, $prefix, $fulladdress, $address1, $address2, $city, $state, $zip, $country, $county, $phone1, $phone2, $email, $id, $ts);
    if(mysqli_stmt_errno($stmt))
    {
        $result="Error executing SQL statement: ".mysqli_stmt_error($stmt);
    }
    else
    {
        mysqli_stmt_store_result($stmt);
        if(mysqli_stmt_num_rows($stmt)==0)
        {
            $result="0 rows returned (Empty table)";
        }
        else 
        {
            while(mysqli_stmt_fetch($stmt))
            {
                //Load results into arrays
                array_push($autoidArray, $autoid);
                array_push($titleArray, $title);
                array_push($lastnameArray, $lastname);
                array_push($firstnameArray, $firstname);
                array_push($middlenameArray, $middlename);
                array_push($prefixArray, $prefix);
                array_push($fulladdressArray, $fulladdress);
                array_push($address1Array, $address1);
                array_push($address2Array, $address2);
                array_push($cityArray, $city);
                array_push($stateArray, $state);
                array_push($zipArray, $zip);
                array_push($countryArray, $country);
                array_push($countyArray, $county);
                array_push($phone1Array, $phone1);
                array_push($phone2Array, $phone2);
                array_push($emailArray, $email);
                array_push($idArray, $id);
                array_push($tsArray, $ts);
            }
        }
        mysqli_stmt_free_result($stmt);
    }
    for($i=0;$i<count($emailArray);$i++)
    {
        $duplicatestmt=mysqli_prepare($link,"SELECT autoid,title,lastname,firstname,middlename,prefix,fulladdress,address1,address2,city,state,zip,country,county,phone1,phone2,email,id,ts FROM " . $table . " WHERE email=? OR phone1=?");
        mysqli_stmt_bind_param($duplicatestmt, 'si', $emailArray[$i], $phone1Array[$i]);
        mysqli_stmt_execute($duplicatestmt);
        mysqli_stmt_bind_result($duplicatestmt, $autoid, $title, $lastname, $firstname, $middlename, $prefix, $fulladdress, $address1, $address2, $city, $state, $zip, $country, $county, $phone1, $phone2, $email, $id, $ts);
        if(mysqli_stmt_errno($duplicatestmt))
        {
            $result="Error executing SQL statement: ".mysqli_stmt_error($duplicatestmt);
        }
        else
        {
            mysqli_stmt_store_result($duplicatestmt);
            if(mysqli_stmt_num_rows($duplicatestmt)==0)
            {
                //NO Duplicate entry found, loop again;
                echo "<p>No Dublicate Found</p>";
            }
            else 
            {
                while(mysqli_stmt_fetch($duplicatestmt))
                {
                    //Found a duplicate
                    echo "<p>Dublicate Found</p>";
                    if($autoid > $autoidArray[$i])
                    {
                        if($email=="" && $phone1=="")
                        {
                            echo "<p>Both email and phone1 are empty. Skipping...</p>";
                        else
                        {
                        $duplicatesFound++;
                        //The autoid of the duplicate just found is greater then the autoid of the
                        //one used to find the duplicate (older). Therefor update the entry and remove the
                        //duplicate
                        //
                        //This checks each of the values and if the lower autoid one is blank, then will add the
                        //value to the table in the lower autoid row
                        //NOTE:** If having any problems with the queries below try removing the single quotes -> ' <- from any "autoid=" portion of the query
                        if($titleArray[$i]==""){mysqli_query($link,"UPDATE EmailListCopy SET title='".$title."' WHERE autoid='".$autoidArray[$i]."'");}
                        if($lastnameArray[$i]==""){mysqli_query($link,"UPDATE EmailListCopy SET title='".$firstname."' WHERE autoid='".$autoidArray[$i]."'");}
                        if($firstnameArray[$i]==""){mysqli_query($link,"UPDATE EmailListCopy SET title='".$lastname."' WHERE autoid='".$autoidArray[$i]."'");}
                        if($middlenameArray[$i]==""){mysqli_query($link,"UPDATE EmailListCopy SET title='".$middlename."' WHERE autoid='".$autoidArray[$i]."'");}
                        if($prefixArray[$i]==""){mysqli_query($link,"UPDATE EmailListCopy SET title='".$prefix."' WHERE autoid='".$autoidArray[$i]."'");}
                        if($fulladdressArray[$i]==""){mysqli_query($link,"UPDATE EmailListCopy SET title='".$fulladdress."' WHERE autoid='".$autoidArray[$i]."'");}
                        if($address1Array[$i]==""){mysqli_query($link,"UPDATE EmailListCopy SET title='".$address1."' WHERE autoid='".$autoidArray[$i]."'");}
                        if($address2Array[$i]==""){mysqli_query($link,"UPDATE EmailListCopy SET title='".$address2."' WHERE autoid='".$autoidArray[$i]."'");}
                        if($cityArray[$i]==""){mysqli_query($link,"UPDATE EmailListCopy SET title='".$city."' WHERE autoid='".$autoidArray[$i]."'");}
                        if($stateArray[$i]==""){mysqli_query($link,"UPDATE EmailListCopy SET title='".$state."' WHERE autoid='".$autoidArray[$i]."'");}
                        if($zipArray[$i]==""){mysqli_query($link,"UPDATE EmailListCopy SET title='".$zip."' WHERE autoid='".$autoidArray[$i]."'");}
                        if($countryArray[$i]==""){mysqli_query($link,"UPDATE EmailListCopy SET title='".$country."' WHERE autoid='".$autoidArray[$i]."'");}
                        if($countyArray[$i]==""){mysqli_query($link,"UPDATE EmailListCopy SET title='".$county."' WHERE autoid='".$autoidArray[$i]."'");}
                        if($phone1Array[$i]==""){mysqli_query($link,"UPDATE EmailListCopy SET title='".$phone1."' WHERE autoid='".$autoidArray[$i]."'");}
                        if($phone2Array[$i]==""){mysqli_query($link,"UPDATE EmailListCopy SET title='".$phone2."' WHERE autoid='".$autoidArray[$i]."'");}
                        if($emailArray[$i]==""){mysqli_query($link,"UPDATE EmailListCopy SET title='".$email."' WHERE autoid='".$autoidArray[$i]."'");}
                        if($idArray[$i]==""){mysqli_query($link,"UPDATE EmailListCopy SET title='".$id."' WHERE autoid='".$autoidArray[$i]."'");}
                        if($tsArray[$i]==""){mysqli_query($link,"UPDATE EmailListCopy SET title='".$ts."' WHERE autoid='".$autoidArray[$i]."'");}

                        //Now that it has been updated, delete the duplicate entry
                        mysqli_query($link, "DELETE FROM EmailListCopy WHERE autoid='".$autoid."'");
                        echo "<p>Duplicate to be updated DELETE FROM EmailListCopy WHERE autoid='".$autoid."'</p>";
                        }
                    }
                    else
                    {
                        //The duplicate autoid is lower then the one used to query either an entry we already but is still in the arrays, or something else. 
                        //This is to be skipped.
                        echo "<p>Duplicate not to be updated</p>";
                    }

                }
                $result="Merged ".$duplicatesFound." rows.";
            }
            mysqli_stmt_free_result($stmt);
        }
    }
    mysqli_stmt_close($duplicatestmt);
    mysqli_stmt_close($stmt);
    mysqli_close($link);
}
echo $result;
?> 
```

# database - 将普通 SQL 查询转换为 Zend_Db？

> ID：14313412
> 
> 赞同：0
> 
> 时间：2013-01-14T04:41:54.163
> 
> 标签：database, zend-framework

我无法将以下查询转换为 Zend_Db：

```
SELECT `mfaq`.* FROM `m_faq` AS `mfaq`
WHERE (mfaq.delete_flg <> 'D' OR mfaq.delete_flg IS NULL)
AND ((mfaq.title like '%$title%')
OR (mfaq.title like '%$title%')
AND (mfaq.title like '%$title%') 
OR (mfaq.title like '%$title%'))
ORDER BY `create_date` DESC 
```

一些帮助？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:51:25.457

首先，您需要创建 dbtable 模型：

```
class Application_Model_DbTable_Mfaq extends Zend_Db_Table_Abstract
{
    protected $_name = 'm_faq';
} 
```

然后按如下方式使用它：

```
$table = new Application_Model_DbTable_Mfaq();

$select = $table->getAdapter()->select()
            ->from(array('mfaq'=>$table->info(Zend_Db_Table::NAME)))
            ->where("( mfaq.delete_flg <> 'D'")
            ->orWhere("mfaq.delete_flg IS NULL )")
            ->where("( mfaq.title like ?", "%$title%")
            ->orWhere("mfaq.title like ? ", "%$title%")
            ->where(" mfaq.title like ?", "%$title%")
            ->orWhere("mfaq.title like ? )", "%$title%")
            ->order("create_date DESC");

// echo $select; // shows your sql
$results = $select->query()->fetchAll(); 
```

我希望，您考虑到 AND 比 OR 具有更高的优先级。

# java - 如何在java中响应android的多点触控

> ID：14313414
> 
> 赞同：2
> 
> 时间：2013-01-14T04:42:15.000
> 
> 标签：java, android, bluetooth, multi-touch

我目前正在使用具有客户端-服务器系统的游戏手柄/游戏控制器功能的 android 应用程序，其中客户端是 android，服务器是 PC 中的 java 桌面应用程序，蓝牙作为连接。到目前为止，我的应用程序仅使用 1 根手指（按住或单击）工作，现在我正在使用 2 根手指在事件按住按钮 A + 单击按钮 B 或按住按钮 A + 按住按钮 B 处使用多点触控。但我没有不知道如何在 android 上执行此操作，使用 mCommandService(BluetoothCommandService.valueOfButon) 将事件发送到 java，在 java 中读取按钮 B 已在按住按钮 A 时单击，并使用 robots.keyPress 执行值表示。

我实现了这个博客[http://luugiathuy.com/2011/02/android-java-bluetooth/](http://luugiathuy.com/2011/02/android-java-bluetooth/)中的示例，用于 android 和 java 之间的蓝牙连接。这是我在 android 上的 onTouch 方法

```
public boolean onTouch(View v, MotionEvent event) {
switch(v.getId()){
    case R.id.tombolL1:
        cmd = BluetoothCommandService.aksi_l1;
    break;

    case R.id.tombolL2:
        cmd = BluetoothCommandService.aksi_l2;
    break;

    case R.id.tombolR1:
        cmd = BluetoothCommandService.aksi_r1;
    break;

    case R.id.tombolR2:
        cmd = BluetoothCommandService.aksi_r2;
    break;

    case R.id.tombolAtas:
        cmd = BluetoothCommandService.arah_atas;
    break;

    case R.id.tombolBawah:
        cmd = BluetoothCommandService.arah_bawah;
    break;

    case R.id.tombolKiri:
        cmd = BluetoothCommandService.arah_kiri;
    break;

    case R.id.tombolKanan:
        cmd = BluetoothCommandService.arah_kanan;
    break;

    case R.id.tombolSegitiga:
        cmd = BluetoothCommandService.aksi_segitiga;
    break;

    case R.id.tombolBulat:
        cmd = BluetoothCommandService.aksi_bulat;
    break;

    case R.id.tombolSilang:
        cmd = BluetoothCommandService.aksi_silang;
    break;

    case R.id.tombolKotak:
        cmd = BluetoothCommandService.aksi_kotak;
    break;

}

switch(action){
    case MotionEvent.ACTION_DOWN:
        handler1.removeCallbacks(mUpdateTask);
        handler1.postAtTime(mUpdateTask, 200);
    break;

    case MotionEvent.ACTION_UP:
        handler1.removeCallbacks(mUpdateTask);
    break;
}
return false;
}

private Runnable mUpdateTask = new Runnable() {

    @Override
    public void run() {
        mCommandService.write(cmd);
        handler1.postAtTime(this, SystemClock.uptimeMillis() + 100);
        //handler1.postAtTime(this, 200);
    }
}; 
```

和java中的这个processCommand方法

```
private void processCommand(int command) {
    try {
        Robot robot = new Robot();
        int key = 0;
        switch(command){
            case arah_atas:
                key = KeyEvent.VK_UP;
            break;
            case arah_bawah:
                key = KeyEvent.VK_DOWN;
            break;
            case arah_kiri:
                key = KeyEvent.VK_LEFT;
            break;
            case arah_kanan:
                key = KeyEvent.VK_RIGHT;
            break;
            case aksi_segitiga:
                key = KeyEvent.VK_A;
            break;
            case aksi_bulat:
                key = KeyEvent.VK_X;
            break;
            case aksi_silang:
                key = KeyEvent.VK_Z;
            break;
            case aksi_kotak:
                key = KeyEvent.VK_S;
            break;
            case aksi_l1:
                key = KeyEvent.VK_Q;
            break;
            case aksi_l2:
                key = KeyEvent.VK_W;
            break;
            case aksi_r1:
                key = KeyEvent.VK_R;
            break;
            case aksi_r2:
                key = KeyEvent.VK_E;
            break;
            case aksi_select:
                key = KeyEvent.VK_SPACE;
            break;
            case aksi_start:
                key = KeyEvent.VK_M;
            break;
        }

        robot.keyPress(key);
        Thread.sleep(50);
        robot.keyRelease(key);
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

请让我知道我该怎么做才能满足我的需要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T04:57:24.403

作为在 Android 中涉足多点触控的人，我建议使用[这个](http://code.google.com/p/android-multitouch-controller/)库。它抽象了处理多点触控细节的头痛。您可以缩放、旋转等。它为多点触控有问题的手机提供支持，并且有一些演示项目。此外（我之前已经这样做过），您可以提取转换矩阵并将此信息存储在您的数据库中，然后将其重新应用于您的图形，以便正确初始化它们。

# mysql - 使用循环将列添加到 mySQL 表

> ID：14313418
> 
> 赞同：2
> 
> 时间：2013-01-14T04:42:27.877
> 
> 标签：mysql, loops, alter, sequential

我对 mySQL 相当陌生。假设我正在向我的表中添加列，如下所示：

```
ALTER TABLE table ADD client_input_2.0_1 LONGTEXT; 
```

我想添加一些类似的连续列，即

```
ALTER TABLE table ADD client_input_2.0_2 LONGTEXT;
ALTER TABLE table ADD client_input_2.0_3 LONGTEXT;
ALTER TABLE table ADD client_input_2.0_4 LONGTEXT; 
```

等一直到足够大的数量，如果我手动执行此操作将需要相当长的时间。在我的例子中，2.0 代表一个部分/部分，最后一个数字代表一个问题编号，根据部分的不同，它可能在 1-50 左右之间，因此手动创建此表将花费大量时间。

有没有办法让我使用某种循环在脚本中执行此操作，每次都增加 col#？

非常感激，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T04:55:45.267

编辑代码

尝试使用存储过程

```
DELIMITER $$
DROP PROCEDURE IF EXISTS RepeatLoopProc$$
CREATE PROCEDURE RepeatLoopProc()
  BEGIN
          DECLARE x  INT;
          DECLARE str  VARCHAR(255);
          Declare @sql nvarchar(4000);
          SET x = 0;

          REPEAT
                      SET str =  '';
                      SET  str = CONCAT(str,'client_input_2.0_',x);
                      SET  x = x + 1;
                      set @sql='ALTER TABLE table_name ADD '+ str +' column-definition';
                      exec sp_executesql @sql;
          UNTIL x  > 50
          END REPEAT;

  END$$
DELIMITER ; 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T04:45:06.127

我想也许你应该使用另一种方法：

ALTER TABLE 表添加 col LONGTEXT，添加 col_index INT。

并使用 col_index 来跟踪 col 的用途

# php - 如何在另一个字符串之前找到一个字符串

> ID：14313422
> 
> 赞同：-2
> 
> 时间：2013-01-14T04:43:03.337
> 
> 标签：php, string, search

我有一个字符串，例如：

```
"{{foo-1 456}}{{foo-2 abc}} {{foo-3 ghi}}{{foo-4 456}}{{foo-5 abc}}{{foo-6ghi}}"
              **                                      **
              find this position (1st)                not this position (2nd) 
```

我需要找到第一个`{{`前面的`foo`（在这种情况下`foo-2`）前面的位置`abc`

`foo`内容和长度总是未知的，并且`foo`每次都可能不同，但我知道它在 a`{{`和之间，然后通过从该位置`abc`找到第一个从字符串中提取它。`}}`

结果应该是

```
"foo-2 abc" 
```

我可以通过做很多单独的搜索来完成这个，但它会减慢我的脚本速度，因为这些字符串的大小可能会很大。

有没有办法从第一个开始向后搜索`abc`？

这就是我现在使用的；它正在工作，但变大了。

```
//$Temp is found by the parameter $item in another routine. 
//but $Temp can change so its never the same.
//i just put it here like this so i dont have to put all the code.

$Temp = "__NOTOC__== Weak Potion of Centaur Slaying =={{Item infobox| name = Weak Potion of Centaur Slaying| icon = Weak Potion of Centaur Slaying.png| rarity = basic| description = Nourishment(30 m): +3% damage vs. centaur<BR>+10 Experience from kills| type = consumable| level = 5| value = 2}}{{Recipe| name = Weak Potion of Centaur Slaying| quantity = 5| mat-1 = Jug of Water| amt-1 =1| mat-2 = Rawhide Leather Scrap| amt-2 =1| mat-3 = Carrot| amt-3 =1| mat-4 = Pile of Glittering Dust| amt-4 =1| discipline = Artificer| level = 25}}{{clear}}== Minor Potion of Centaur Slaying =={{Item infobox| name = Minor Potion of Centaur Slaying| icon = Minor Potion of Centaur Slaying.png| rarity = basic| description = Nourishment(30 m): +5% damage vs. centaur<BR>+10 Experience from kills| type = consumable| level = 20| value = 2}}{{Recipe| name = Minor Potion of Centaur Slaying| quantity = 5| mat-1 = Jug of Water| amt-1 =1| mat-2 = Thin Leather Section | amt-2 =1| mat-3 = Carrot| amt-3 =1| mat-4 = Pile of Shimmering Dust| amt-4 =1| discipline = Artificer| level = 100}}{{clear}}== Potion of Centaur Slaying =={{Item infobox| name = Potion of Centaur Slaying| icon = Potion of Centaur Slaying.png| rarity = basic| description = Nourishment (30 m): 7% damage vs centaur<BR>-4% damage from centaur<BR>+10 Experience from kills| type = consumable| level = 35| value = 2}}{{Recipe| name = Potion of Centaur Slaying| quantity = 5| mat-1 = Jug of Water | amt-1 =1| mat-2 = Coarse Leather Section| amt-2 =1| mat-3 = Carrot| amt-3 =1| mat-4 = Pile of Radiant Dust| amt-4 =1| discipline = Artificer| level = 175}}{{clear}}== Strong Potion of Centaur Slaying =={{Item infobox| name = Strong Potion of Centaur Slaying| icon = Strong Potion of Centaur Slaying.png| rarity = basic| description = Nourishment (30 m): 8% damage vs centaur<BR>-6% damage from centaur<BR>+10 Experience from kills | type = consumable| level = 50| value = 2}}{{Recipe| name = Strong Potion of Centaur Slaying| quantity = 5| mat-1 = Jug of Water| amt-1 =1| mat-2 = Rugged Leather Section | amt-2 = 3 Carrot| amt-3 = 1| mat-4 = Pie of Luminous Dust| amt-4 = 1| discipline = Artificer| level = 250}}{{clear}}== Potent Potion of Centaur Slaying =={{Item infobox| name = Potent Potion of Centaur Slaying| icon = Potent Potion of Centaur Slaying.png| rarity = basic| description = Nourishment (30 m): 9% damage vs centaur<BR>-7% damage from centaur<BR>+10 Experience from kills | type = consumable| level = 65| value = 2}}{{Recipe| name = Potent Potion of Centaur Slaying| quantity = 5| mat-1 = Jug of Water| amt-1 =1| mat-2 = Thick Leather Section| amt-2 =1| mat-3 = Carrot| amt-3 =1| mat-4 = Pile of Incandescent Dust| amt-4 =1| discipline = Artificer| level = 325}}{{clear}}== Powerful Potion of Centaur Slaying =={{Item infobox| name = Powerful Potion of Centaur Slaying| icon = Powerful Potion of Centaur Slaying.png| rarity = basic| description = Nourishment (1 h): 10% damage vs centaur<BR>-10% damage from centaur<BR>+10 Experience from kills | type = consumable| level = 80| value = 2}}{{Recipe| name = Powerful Potion of Centaur Slaying| quantity = 10| mat-1 = Jug of Water | amt-1 =1| mat-2 = Hardened Leather Section | amt-2 =1| mat-3 = Carrot| amt-3 =1| mat-4 = Pile of Crystalline Dust| amt-4 =1 | discipline = Artificer| level = 400}}{{clear}}== Notes ==*== Trivia ==*== Bugs ==* Currently, entering the recipe for the Powerful variant of the potion in the discovery pane twice will discover the recipe for the Extended variant of the potion. These potions are identical to Powerful potions, only of Rare quality, soulbound, and worth 1c";
$Item = "Minor Potion of Centaur Slaying";

// start : is there an item infobox this time? (for the specific item)
if(stristr($Temp, '{{Item infobox |') !== FALSE)
{
    // check to see if its the one i want
    do
    {
        $Item_infobox = substr($Temp, strpos($Temp, "{{Item infobox |") + 2, strpos($Temp, "}}",strpos($Temp, "{{Item infobox |") + 2) - strpos($Temp, "{{Item infobox |") - 2);
        $Temp = str_replace("{{" . $Item_infobox . "}}", "", $Temp);
        if(stristr($Item_infobox, '| name = ' . $Item) !== FALSE)
        {
            // found it
            echo $Item_infobox . "<br/><br/>";  
            break;  
        }
    } 
    while (stristr($Temp, '{{Item infobox |') !== FALSE);
}
// stop : is it an item infobox this time? (for the specific item)

// start : is there an crafting infobox this time? (for the specific item)
if(stristr($Temp, '{{Crafting infobox |') !== FALSE)
{
    // check to see if its the one i want
    do
    {
        $Crafting_infobox = substr($Temp, strpos($Temp, "{{Crafting infobox |") + 2, strpos($Temp, "}}",strpos($Temp, "{{Crafting infobox |") + 2) - strpos($Temp, "{{Crafting infobox |") - 2);
        $Temp = str_replace("{{" . $Crafting_infobox . "}}", "", $Temp);
        if(stristr($Crafting_infobox, '| name = ' . $Item) !== FALSE)
        {
            // found it
            echo $Crafting_infobox . "<br/><br/>";  
            break;  
        }
    } 
    while (stristr($Temp, '{{Crafting infobox |') !== FALSE);
}
// stop : is it an crafting infobox this time? (for the specific item)

// repeat this routine for every different infobox (around 50) until i find the correct one. 
```

这里有一些其他示例 $Temp 和 $Item 属于一起。再次。我每次都必须根据 $item 获得 $temp，因为 $temp 我一定会随着时间的推移而改变。这只是为了展示字符串的多样性。

```
//exammple 2
$Temp = "{{stub}}{{Crafting infobox| name = Gift of Color| type = legendary| description = A gift of color used to create [[The Bifrost]].| rarity = legendary }}==Acquisition==A [[Gift of Color]] can be crafted by a level 400 [[Cook]]. The required [[Recipe: Gift of Color]] can be bought from [[Miyani]] at the [[Mystic Forge]].{{Recipe | name = Gift of Color| mat-1 = Pile of Crystalline Dust| amt-1 = 250| mat-2 = Opal Orb| amt-2 = 100| mat-3 = Gift of Zhaitan| amt-3 = 1| mat-4 = Unidentified Dye| amt-4 = 250|discipline=Chef|level=400|exp}}";
$Item = "Gift of Color";

//exammple 3
$Temp = "{{Inventory infobox| name = 20 Slot Safe Box| slots= 20| property =| description = 20 Slots, Items in this box will never appear in a sell-to-vendor list and will not move when inventory is sorted.| rarity = fine| type = box| value = 54}}{{clear}}== Recipes  =={{Recipe| name = 20 Slot Safe Box| mat-1 = Orichalcum Ingot| amt-1 = 10| mat-2 = Superior Rune of Holding| amt-2 = 1| mat-3 = Pile of Crystalline Dust| amt-3 = 3| discipline = Armorsmith| level = 400}}==See also==*[[20 Slot Invisible Bag]]*[[20 Slot Invisible Leather Pack]][[Category:Armorsmith recipes]]";
$Item = "20 Slot Safe Box"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:41:52.227

在 substr 中使用 preg_replace。我认为这会有所帮助。

# opengl - wxErlang openGL 文本示例

> ID：14313423
> 
> 赞同：1
> 
> 时间：2013-01-14T04:43:17.680
> 
> 标签：opengl, wxerlang

有没有人有一个关于如何在openGL，erlang绑定中绘制文本的工作示例？

我现在使用纹理来加载由 wxBitmap 创建的纹理。我正在考虑将 GL 代码移至 Java 或 C++。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T14:17:26.023

你有没有从 erlang shell 运行“wx:demo()”，它包含一个如何做的例子。单击 OpenGL 并查看代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-29T09:09:03.110

一个最小的 Elixir 示例如下所示：创建模块（顶部）。在终端（中间）执行。在带有 wxExamples 的窗口中选择“gl”（底部）：

[![在此处输入图像描述](../Images/009071c81e737b371db754ac821bf2ae.png)](https://i.stack.imgur.com/iTP4r.png)

# jquery - 如何在鼠标悬停时向easySlider jquery插件添加启动和停止功能

> ID：14313426
> 
> 赞同：0
> 
> 时间：2013-01-14T04:44:41.237
> 
> 标签：jquery

我正在使用[easySlider 1.7](http://cssglobe.com/easy-slider-17-numeric-navigation-jquery-slider/) jQuery 插件将幻灯片添加到[我的设计网站](http://panjohaft.com/)。
这个插件有一个**自动选项，我们可以通过将其设置为****真**值来在页面加载时启动幻灯片。但是当我们单击相对导航按钮转到幻灯片时，slideShow 不再自动移动幻灯片。我想添加一项功能，这样当用户进入幻灯片部分时，所有幻灯片都会停止，然后在鼠标移出事件时开始

这是一段我的幻灯片代码：

```
 <section id="slideShow">
      <div id="slider">
         <ul>
           <li><a href="#"><img src="timthumb.php?src=uploads/4406f06c590a7a7bb6ab60f36653c7419b8bbfbd.jpg&w=730&h=410"></a></li> 
           <li><a href="#"><img src="timthumb.php?src=uploads/6a56ff2601034e783c4f7cab9a5f0fed6896dcbd.jpg&w=730&h=410"></a></li>
        </ul>

        </div>
        </section> 
```

这是我初始化插件的jQuery代码

```
$("#slider").easySlider({
                auto: true,
                continuous: true,
                numeric: true,
                speed: 600,
                prevId:         "prevBtn",
                nextId:         "nextBtn"
        }); 
```

我需要什么。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T19:32:09.190

好吧，据我所知，这个插件不支持这个。你可以修改插件的代码来实现你想要的。以下是修改（对我有用，我使用的是 easySlider 的 1.7 版：easySlider1.7.js）：

第 161 行：替换 `t = dir;` 为 `t = parseInt(dir);`

第 198 行替换 `if(options.auto && dir=="next" && !clicked){;` 为 `if(options.auto)`

就这样

# c# - 如何将纯 XML 分配给 C# 变量

> ID：14313427
> 
> 赞同：5
> 
> 时间：2013-01-14T04:44:41.947
> 
> 标签：c#, xml, linq, vb6

> **可能重复：**
> [在 C# 中使用 XML 文字？](https://stackoverflow.com/questions/8768762/use-xml-literals-in-c)

我可以在 Visual Basic 中执行此操作，如何在 C# 中执行此操作

```
 Dim xmlTree As XElement = <Employees></Employees> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T04:47:54.180

尝试：

```
XDocument document = XDocument.Parse("<Employees></Employees>") 
```

或者

```
XElement root = new XElement("Employees") 
```

另一种方法是使用`XmlDocument`类：

```
XmlDocument document = new XmlDocument();
document.LoadXml("<Employees></Employees>"); 
```

但我建议使用[XDocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)。它比它更新`XmlDocument`，它有更干净的 API 并支持[Linq To Xml](http://msdn.microsoft.com/en-us/library/bb387098.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T04:54:22.283

```
XDocument document = XDocument.Parse("<Employees></Employees>") 
```

# asp.net - formview 文本框控件 textchanged 事件不会触发

> ID：14313428
> 
> 赞同：1
> 
> 时间：2013-01-14T04:44:49.310
> 
> 标签：asp.net, vb.net, autopostback

我在 VB 中需要帮助（请不要使用 C# 或 Javascript——我对这些语言一无所知）我还检查了所有“可能已经有你答案的问题——而那些在 VB 中的问题与我的情况不符或通过使用 AutoPostback、编码 textChanged 事件或将 ontextchanged= 添加到文本框字段来解决 --- 我的代码中已经包含所有这些。

尽管将 AutoPostBack 设置为 true，但我似乎无法触发 TextChanged 事件。即使在提交按钮创建后它仍然不会触发，我遗漏了什么？

我要完成的工作：当且仅当用户编辑开始日期时，我希望完成日期设置为开始日期后 30 天的日期。否则，只需在完成日期中显示最初显示在那里的任何内容。两个日期在数据库中都允许为空，并且都定义为日期时间。

在 Default.aspx 中

```
<asp:FormView ID="FormView1" runat="server" DataKeyNames="MASTERID_Action" 
DataSourceID="srcAction">
<EditItemTemplate>
MASTERID_Action:
<asp:Label ID="MASTERID_ActionLabel1" runat="server" 
Text='<%# Eval("MASTERID_Action") %>' />
<br />
Action_StartDate:
<asp:TextBox ID="Action_StartDateTextBox" runat="server" 
Text='<%# Bind("Action_StartDate") %>' 
ontextchanged="Action_StartDateTextBox_TextChanged" AutoPostBack="True" />         <rjs:PopCalendar ID="StartDateCal" runat="server" Control="Action_STartDateTextBox" />
<br />
Action_FinishDate:
<asp:TextBox ID="Action_FinishDateTextBox" runat="server" 
Text='<%# Eval("Action_FinishDate") %>' />
<br />
<asp:Button ID="SubmitButton1" runat="server" Text="Refresh" 
onclick="SubmitButton1_Click" />
<asp:LinkButton ID="UpdateButton" runat="server" CausesValidation="True" 
CommandName="Update" Text="Update" />
&nbsp;<asp:LinkButton ID="UpdateCancelButton" runat="server" 
CausesValidation="False" CommandName="Cancel" Text="Cancel" />
</EditItemTemplate> 
```

在 Default.aspx.vb

```
Partial Class _Default
Inherits System.Web.UI.Page

Protected Sub Action_StartDateTextBox_TextChanged(sender As Object, e As System.EventArgs)
Dim txtStartDate As TextBox = Me.FormView1.FindControl("Action_StartDateTextBox")
Dim txtFinishDate As TextBox = Me.FormView1.FindControl("Action_finishdatetextbox")
Dim strNewFinishDate As String

If txtFinishDate.Text = "" And txtStartDate.Text <> "" Then
strNewFinishDate = Convert.ToString(Convert.ToDateTime(txtStartDate).AddDays(30))
ElseIf txtFinishDate.Text <> "" Then
strNewFinishDate = txtFinishDate.Text
Else
strNewFinishDate = ""
End If

txtFinishDate.Text = strNewFinishDate

End Sub

Protected Sub SubmitButton1_Click(sender As Object, e As System.EventArgs)
Dim mytest As String
End Sub
End Class 
```

* * *

16/01/2013 编辑：在受保护的子 Action_StartDateTextBox_TextChanged 中有一个错字运行页面，但它仍然没有触发。仍然需要帮助，请。

17/01/2013 编辑：我的问题仍未得到解答，我收到的回复导致更多错误。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:19:45.320

我认为您可能在编写相应的事件后删除了您的控件。如果是这样，结果它将删除您为事件指定的所有处理程序。

```
'---This is your code, by the way it seems to be missing its handler
... Action_StartDateTextBox_TextChanged(sender As Object, e As System.EventArgs) 
```

尝试像这样添加它的处理程序，

```
'---Adding hanler
... Action_StartDateTextBox_TextChanged(sender As Object, e As System.EventArgs) Handles Action_StartDateTextBox.TextChanged 
```

如果您需要有关事件处理程序的更多详细信息，请参阅[此。](http://visualbasic.about.com/od/learnvbnet/a/eventhandler.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T00:35:49.907

对此没有回应，但我必须继续前进。因此，我选择了可​​能更聪明的方法——将我的回发作为客户端 javascript 来处理。对于这个问题，我会接受“asp.net 无法做到这一点。Javascript 会让你的生活变得如此轻松”的答案......

# node.js - nodejs：node-gyp 重建 - 访问被拒绝

> ID：14313432
> 
> 赞同：3
> 
> 时间：2013-01-14T04:45:13.697
> 
> 标签：node.js, npm, node-gyp

我正在尝试安装`nodetime`模块来分析我的`nodejs`应用程序..

当我`run > npm`安装`nodetime` 文件时下载。但是当`node-gyp`重建运行时。

我收到以下错误。

> 命令失败：CreateProcessW：访问被拒绝

同样的事情发生，当我尝试下载`v8-profiler`.

> Nodejs 版本：0.8.15
> 
> 节点gyp：0.7.1

我已经在运行窗口 7 的开发机器和将托管此应用程序的 Windows Server 2008 上尝试了此操作。

任何帮助表示赞赏。如果需要更多解释，请告诉我

**更新：**

抱歉，我有一段时间忽略了这篇文章。与我认为是 nodetime 的作者的人聊天，这里是 nodetime 在 Windows 上运行所需的东西。

*   Python 2.7 版

*   如果在 Windows 上，python 的 PATH 环境变量应该包括 python.exe 例如：C:\Python27\Python.exe

*   它需要 Visual C++ Express 版本和 Windows 7 64 位 SDK 附带的 CPP 编译器（64 位版本的 nodejs 需要 SDK 编译器）。

希望这可以帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-10T11:01:57.667

试一试`set PATH=C:\Python27;%PATH%`

**不要**设置 PYTHON 变量（检查它是否未在您的机器上设置）。

前段时间我错误地设置了 PYTHON 变量——这让我很头疼很久，直到我设法弄清楚出了什么问题。

# clojure - var 与 atom 用于运行时常量

> ID：14313433
> 
> 赞同：8
> 
> 时间：2013-01-14T04:45:18.440
> 
> 标签：clojure

根据命令行输入，我需要设置一些下游函数将使用的运行时常量。这些函数中的代码可能在其他线程中执行，所以我不考虑“声明 var 并使用绑定宏”组合。与使用原子相比，使用 var（带有 alter-var-root）的优点/缺点是什么？那是，

```
(declare *dry-run*) ; one of my constants

(defn -main [& args]
   ; fetch command line option
   ;(cli args ...)
   (alter-var-root #'*dry-run* (constantly ...))
   (do-stuff-in-thread-pool)) 
```

相对

```
(def *dry-run* (atom true))   

(defn -main [& args]
   ; fetch command line option
   ;(cli args ...)
   (reset! *dry-run* ...)
   (do-stuff-in-thread-pool)) 
```

如果我应该考虑这两个之外的其他选择，我很想知道。

此外，理想情况下，我宁愿不向 atom 提供初始 val，因为我想在其他地方设置默认值（使用 cli 调用），但我可以忍受它，特别是如果使用 atom 与替代方案相比具有优势（ s)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T06:47:03.497

一次性写入值正是为用例设计的承诺：

```
(def dry-run (promise))

(defn -main []
  (deliver dry-run true))

(defn whatever [f]
  (if @dry-run
    ...)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T05:52:14.120

AFAIK`alter-var-root`仅保证同步变量值更改，不保证在此更改期间安全读取。另一方面，它`atom`真正提供了原子地改变身份的状态。

如果您不想提供初始值，您可以将其设置为`nil`：

```
(def *dry-run* (atom nil)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T10:45:26.940

仅使用 var 和 有什么问题`alter-var-root`？在你真正启动工人之前，你在你的启动函数中设置了新值。所以阅读没有种族。您可以在`@`任何需要的地方保存价值。

# php - 仅当配置文件所有者不属于角色 X 时才显示内容（在 Drupal 7 中）

> ID：14313436
> 
> 赞同：1
> 
> 时间：2013-01-14T04:45:37.603
> 
> 标签：php, arrays, drupal

我有一个 Drupal 7 站点，我想根据配置文件用户（不是登录用户）的角色在配置文件页面内打印出一些字段内容。**仅当个人资料所有者没有角色**作者时，我才需要显示特定字段：

```
<?php
  if (!in_array('autor', array_values($user->roles))) {
print drupal_render(field_view_field('profile2', $profile['main'], 'field_nombrecompleto1', 'value'));
  }
  else {print "yada yada";} 
```

注意：有问题的配置文件字段是 rofile2 字段，而不是核心配置文件字段。

那个代码有什么问题？因为无论配置文件所有者的角色如何，**它都会在任何情况下打印出有问题的字段。**

我已经尝试过其他代码，在这种情况下，该字段在任何情况下都不会打印出来：

```
<?php
if (is_array($user->roles) &&
    in_array('authenticated user', $user->roles) &&
    !in_array('autor', $user->roles)) {
    print drupal_render(field_view_field('profile2', $profile['main'], 'field_nombrecompleto1', 'value'));
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T21:44:17.247

这是在 Drupal 7 中修改表单以编辑您的个人资料时如何完成的：

```
function MYMODULE_form_profile2_edit_main_form_alter(&$form, $form_state) {
  global $user;
  $roles = $user->roles;
  if(!in_array('authenticated user', $roles)) {
    $form['profile_main']['MY_FIELD_ID']['#access'] = FALSE;
  }
} 
```

# ruby-on-rails - Access-Control-Allow-Origin Rails 3 不允许来源 http://localhost

> ID：14313437
> 
> 赞同：7
> 
> 时间：2013-01-14T04:46:14.080
> 
> 标签：ruby-on-rails, cross-domain

按照这个问题[How to set access-control-allow-origin in webrick under rails?](https://stackoverflow.com/questions/2535454/how-to-set-access-control-allow-origin-in-webrick-under-rails) `GET`，我可以`POST`从***localhost***到***localhost:3000***。

但是，错误发生在`DELETE`和`PUT`

这就是我允许跨域访问的方式

```
class ApplicationController < ActionController::Base
    protect_from_forgery
    before_filter :allow_cross_domain_access
    def allow_cross_domain_access
        response.headers["Access-Control-Allow-Origin"] = "*"
        response.headers["Access-Control-Allow-Methods"] = "*"
    end
end 
```

知道如何解决吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T03:53:38.823

`*``Access-Control-Allow-Methods`不是响应标头的有效值。您需要列出实际的方法：

```
response.headers["Access-Control-Allow-Methods"] = "GET, PUT, POST, DELETE" 
```

此外，如果您的请求有任何自定义请求标头，您还需要列出这些标头：

```
response.headers["Access-Control-Allow-Headers"] = "Content-Type, X-Requested-With" 
```

最后请注意，您的控制器应该允许`OPTIONS`http 请求。这是为了允许 CORS 预检请求，在发出 PUT 或 DELETE 请求时需要这些请求。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-21T17:52:17.523

这个解决方案（[http://www.tsheffler.com/blog/?p=428](http://www.tsheffler.com/blog/?p=428)）对我有用：

```
before_filter :cors_preflight_check
after_filter :cors_set_access_control_headers

# For all responses in this controller, return the CORS access control headers.

def cors_set_access_control_headers
  headers['Access-Control-Allow-Origin'] = '*'
  headers['Access-Control-Allow-Methods'] = 'POST, GET, OPTIONS'
  headers['Access-Control-Max-Age'] = "1728000"
end

# If this is a preflight OPTIONS request, then short-circuit the
# request, return only the necessary headers and return an empty
# text/plain.

def cors_preflight_check
  if request.method == :options
    headers['Access-Control-Allow-Origin'] = '*'
    headers['Access-Control-Allow-Methods'] = 'POST, GET, OPTIONS'
    headers['Access-Control-Allow-Headers'] = 'X-Requested-With, X-Prototype-Version'
    headers['Access-Control-Max-Age'] = '1728000'
    render :text => '', :content_type => 'text/plain'
  end
end 
```

此外，您可能希望在选定的方法中启用 CORS：

```
before_filter :cors_preflight_check, :only => [ :my_method]
after_filter :cors_set_access_control_headers, :only => [ :my_method] 
```

我希望它有帮助

# windows - 为什么 windows 上的 clang/llvm 需要 Visual Studio 的 Link.exe？

> ID：14313439
> 
> 赞同：10
> 
> 时间：2013-01-14T04:46:18.190
> 
> 标签：windows, linker, llvm, clang, llc

根据[LLVM 的入门（Windows）站点](http://llvm.org/docs/GettingStartedVS.html)：

> ... Clang 可用于发出位码、直接发出目标文件甚至使用 Visual Studio 的 link.exe 链接的可执行文件。

为什么`Link.exe`需要在 Windows 上使用？而且，就此而言，Mac/Linux 上使用什么？再往下说：

```
Compile the program to object code using the LLC code generator:
    C:\..> llc -filetype=obj hello.bc
Link to binary using Microsoft link:
    C:\..> link hello.obj -defaultlib:libcmt 
```

为什么 LLC 不能执行最后一步？LLI 似乎工作正常，所以我假设它`link.exe`在引擎盖下以某种方式互操作 - 为什么 LLC 不能？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-14T05:20:58.323

因为没有人为 LLVM 编写过链接器。

有一个项目可以这样做（称为，unimaginatively `lld`）但它还没有准备好。

有关详细信息，请参阅[http://lld.llvm.org 。](http://lld.llvm.org)

在 mac 上，人们使用 Apple 的链接器，`ld`.

在 Linux 上，大多数人使用 gnu 链接器，通常（也）命名为`ld`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T14:02:19.087

试试 MinGW-W64 的 ld。我一直将它与 llvm 的 clang 一起使用，而不是我最初用于构建 clang 的 VS 工具。

# windows-8 - 使用 Pre-build 命令将 appxmainfest 文件的内容复制到另一个文件

> ID：14313441
> 
> 赞同：1
> 
> 时间：2013-01-14T04:46:51.313
> 
> 标签：windows-8, visual-studio-2012, windows-runtime, pre-build-event, prebuild

我一直试图让这个重新构建命令适用于 Visual Studio 2012 中的 Windows 8 项目。

```
if "$(ConfigurationName)"==ReleaseOEM copy "$(ProjectDir)PackageOEM.appxmainfest" "$(ProjectDir)Package.appxmainfest" copy "$(ProjectDir)StoreManifestOEM.xml" "$(ProjectDir)StoreManifest.xml" 
```

`StoreManifest.xml`每次我进行重建时都会复制xml 文件；但是 Package.appxmainfest 永远不会改变。

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T06:51:11.337

这在一个测试项目中工作......

```
if "$(ConfigurationName)"=="Debug" copy "$(ProjectDir)Package.appxmanifest" "$(ProjectDir)Package2.appxmainfest" 
```

唯一真正的区别是我在 Debug 周围添加了引号。它不会复制没有引号的文件。根据[MSDN](http://msdn.microsoft.com/en-us/library/ms165412%28v=vs.110%29.aspx)，您需要通过换行符分隔命令。你的应该看起来像......

```
if "$(ConfigurationName)"=="ReleaseOEM" copy "$(ProjectDir)PackageOEM.appxmainfest" "$(ProjectDir)Package.appxmainfest"
if "$(ConfigurationName)"=="ReleaseOEM" copy "$(ProjectDir)StoreManifestOEM.xml" "$(ProjectDir)StoreManifest.xml" 
```

# javascript - 使用整数键创建关联数组

> ID：14313444
> 
> 赞同：3
> 
> 时间：2013-01-14T04:47:45.420
> 
> 标签：javascript, arrays, associative-array

我需要在javascript中创建一个关联数组，其中的`integer`键如下；

```
a["10"] = "ten"; 
```

但是当我创建一个数组时，它会将值放入数组的`10th`索引中，并创建一个长度为 11 的数组。我希望它是一个键值对。我知道这可以通过使用对象来完成，但我只需要一个数组。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T04:49:10.770

JavaScript 没有关联数组。在 JavaScript 中做到这一点的唯一方法是使用对象：

```
var a = {
    '10': 'ten'
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T05:17:03.517

ECMAScript*确实*有[关联数组](http://en.wikipedia.org/wiki/Associative_array)¹ - 对象（以及扩展的数组）就是一个例子

*但是*，**[数组的某些属性会被特殊处理](http://es5.github.com/#x15.4)**：

> *数组对象对某一类属性名称给予特殊处理。*属性名称`P`（以字符串值的形式）是数组索引当且仅当`ToString(ToUint32(P))`等于`P`..
> 
> ..*具体来说，每当添加名称为数组索引的属性时，如有必要，长度属性会更改*为比该数组索引的数值大一..

因此，给定`arr = []`，表达式`arr["1"]`和`arr[1]`引用*相同的属性*名称。由于`P`（属性名称）是“1”并且`length`从上面是 0，因此分配给此类属性将设置`arr.length`为`ToUint32(P)+1`或 2。

*无法*更改此行为。*如果您不*希望有特殊`length`属性，请使用“普通”对象而不是数组。但是，许多`Array.prototype`函数*可以*`length`与具有属性的任意对象（除了一些实现怪癖）一起使用，并且*可以*创建一个 Object 以便它`Array.prototype`用作自己的原型。

尽管如此，帖子*并没有说明真正的问题是什么*。与其假设它必须以那种特定的方式完成，不如考虑解释其意图是什么：例如为什么 a["10"]？如果对象将在列表中使用，那么如果有“11 个项目”有什么问题？

* * *

¹请在辩论此声明之前阅读文章：名称中的术语“数组”并不意味着有序序列，也不排除长度的*附加*概念或哈希的使用等。如果您使用*不同*的定义，请确保指定它是什么以及给定操作所需的行为是什么。

# python - Python - 为什么在 __init__() 期间调用方法

> ID：14313446
> 
> 赞同：3
> 
> 时间：2013-01-14T04:48:16.583
> 
> 标签：python, qt

我一直在看一些关于 PyQt4 东西的教程，它很好，但我不太明白为什么创建对象时的语法是这样的：

```
class Example(QtGui.QMainWindow):

    def __init__(self):
        super(Example, self).__init__()

        self.initUI()

    def initUI(self):               

        #code to set up instance variables and show() the window 
```

以这种方式执行此操作究竟获得了什么，而不仅仅是`self.initUI()`完全消除调用并将任何设置属性的代码放在调用`__init__()`之后`super`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-14T04:56:35.480

有时出于可读性目的，代码被分成函数。

如果您的对象初始化需要三个步骤，那么从逻辑上讲，将其分解为三个函数是有意义的。这些函数的名称可以描述它们处理的初始化部分。

您可能会看到从 true 调用的“init”函数的另一个原因`__init__`是该函数是否将对象恢复到新状态；在这种情况下，您可能希望从外部调用“clean”函数`__init__`，例如对象池。

您还暗示了在您自己的问题中重用的第三个原因：如果子类需要更改部分初始化发生的顺序（或完全省略/替换某些部分！）这对于单片机是不可能的，`__init__`但是如果将其拆分为单独的部分，则很容易。

第四个也是最后一个原因是分析。如果您跟踪函数条目/存在和时间，单独的函数可以为您提供更精细的时间指标。

无论如何，你如何编码取决于你——但你在这里质疑的方法*确实*有优点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T04:57:23.690

也许这样可以再次调用 initUI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T04:59:11.610

我只知道一个原因，与大多数语言一样——可用性。面向对象编程的核心是重用事物的能力——无论是类、方法还是变量。通过分离我们不同的方法/函数，我们可以稍后调用它们。你以后是否*会*打电话给他们......这是有争议的。我认为这归结为良好的编程实践。

# c# - 为什么在 OnNavigatedTo() 事件中设置焦点没有设置焦点？

> ID：14313447
> 
> 赞同：1
> 
> 时间：2013-01-14T04:48:21.093
> 
> 标签：c#, windows-store-apps

我在页面 OnNavigatedTo() 事件中有此代码：

```
if (string.IsNullOrWhiteSpace(textBoxGroupName.Text))
{
    textBoxGroupName.Focus(FocusState.Programmatic);
} 
```

...但是当页面显示时 textBoxGroupName 没有焦点。为什么不？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T05:51:07.657

`OnNavigatedTo`发生在页面生命周期的早期，以便将焦点设置为工作。`Loaded`您应该在事件中调用您的代码：

```
private void MainPage_OnLoaded(object sender, RoutedEventArgs e)
{
    if (string.IsNullOrWhiteSpace(textBoxGroupName.Text))
    {
        textBoxGroupName.Focus(FocusState.Programmatic);
    }
} 
```

当然，您需要在`.xaml`文件中设置处理程序（我省略了`Page`元素中的其他属性：

```
<Page
    Loaded="MainPage_OnLoaded"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T05:45:35.107

只有 GroupBox 控件中包含的控件可以被选择或接收焦点。好像您没有正确使用 GroupBox。

### 来自[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.groupbox.aspx)

> 无法选择完整的 GroupBox 本身或接收焦点。有关此控件如何响应 Focus 和 Select 方法的详细信息，请参阅以下控件成员：CanFocus、CanSelect、Focused、ContainsFocus、Focus、Select。

### 暗示：

您可能想使用[Controls](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controls.aspx)属性来访问子控件：

```
if (string.IsNullOrWhiteSpace(textBoxGroupName.Text))
{
    var child_TextBox = textBoxGroupName.Controls["myTextBox"]
    if(child_TextBox.CanFocus)
        child_TextBox.Focus(FocusState.Programmatic);
} 
```

# linux - 为什么 Nvidia Visual Profile 在纯同步代码的时间线中显示重叠的数据传输？

> ID：14313453
> 
> 赞同：0
> 
> 时间：2013-01-14T04:49:13.960
> 
> 标签：linux, cuda, centos, profile, nvidia

Nsight Visual Profile 生成的时间线看起来很奇怪。我没有写任何传输重叠的代码，但是你可以看到`MemCpy`和`Compute`内核之间的重叠。

这使我无法调试真正的重叠代码。

我使用 CUDA 5.0、Tesla M2090、Centos 6.3、2x CPU Xeon E5-2609

有人有类似的问题吗？它只发生在某些 linux 发行版上吗？如何解决？

这是代码。

```
#include <cuda.h>
#include <curand.h>
#include <cublas_v2.h>
#include <thrust/device_vector.h>
#include <thrust/host_vector.h>
#include <thrust/device_ptr.h>

int main()
{
    cublasHandle_t hd;
    curandGenerator_t rng;
    cublasCreate(&hd);
    curandCreateGenerator(&rng, CURAND_RNG_PSEUDO_MTGP32);

    const size_t m = 5000, n = 1000;
    const double alpha = 1.0;
    const double beta = 0.0;

    thrust::host_vector<double> h(n * m, 0.1);
    thrust::device_vector<double> a(m * n, 0.1);
    thrust::device_vector<double> b(n * m, 0.1);
    thrust::device_vector<double> c(m * m, 0.1);
    cudaDeviceSynchronize();

    for (int i = 0; i < 10; i++)
    {
        curandGenerateUniformDouble(rng,
                thrust::raw_pointer_cast(&a[0]), a.size());
        cudaDeviceSynchronize();

        thrust::copy(h.begin(), h.end(), b.begin());
        cudaDeviceSynchronize();

        cublasDgemm(hd, CUBLAS_OP_N, CUBLAS_OP_N,
                m, m, n, &alpha,
                thrust::raw_pointer_cast(&a[0]), m,
                thrust::raw_pointer_cast(&b[0]), n,
                &beta,
                thrust::raw_pointer_cast(&c[0]), m);
        cudaDeviceSynchronize();
    }

    curandDestroyGenerator(rng);
    cublasDestroy(hd);

    return 0;
} 
```

这是捕获的配置文件时间线。

![时间线](../Images/f515df961c30c46d785427b3d693e5b6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-09T22:05:10.093

计算能力 2.* (Fermi) 设备能够同时实现内核级并发以及内核和复制并发。为了跟踪并发内核，内核开始和结束时间戳被收集在与内存复制时间戳不同的时钟域中。该工具负责关联这些不同的时钟。在您的屏幕截图中，我相信存在不同的缩放因子（相关性不好），因为您可以看到每个内存副本都不是由一个常数值关闭，而是由一个缩放的偏移量关闭。

如果您使用`--concurrent-kernels off`nvprof 中的选项，我认为问题将消失。当并发内核被禁用时，内存复制和内核时序使用相同的源时钟作为时间戳。

Compute Capability 3.* (Kepler) 和 5.* (Maxwell) 具有不同的计算内核计时机制。对于这些设备，可以在工具中看到与内核的结束时间戳和内存副本或内核的开始重叠。工作不重叠。工具中有一个设计决策，即具有重叠的潜力（通常<500ns）或将其作为依赖工作之间的恒定开销引入。这些工具决定避免引入开销，代价是可能在序列化工作上表现出非常小的重叠。

# nginx - 运行比核心更多的龙卷风进程是否有优势？

> ID：14313457
> 
> 赞同：0
> 
> 时间：2013-01-14T04:50:17.133
> 
> 标签：nginx, tornado, nonblocking

我见过的 nginx + tornado 的一个常见配置是让 nginx 提供静态文件，然后充当一些上游 tornado 应用服务器的反向代理。我知道这种配置通常用于通过阻止龙卷风的 wsgi（例如 Django）为应用程序提供服务。在这种情况下，通常的方法是在内存中运行尽可能多的龙卷风进程，然后让 nginx 前端轮询跨进程。

如果我使用 CDN 而不是 nginx 来提供静态文件并以非阻塞方式运行 tornado，那么运行比机器上的内核更多的总进程（即每个核心 1 个 nginx 和 1 个龙卷风）是否有任何优势?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T10:56:58.777

如果 Tornado 实例没有阻塞代码，那么运行更多的 Tornado 实例并没有比 CPU 内核数量带来太多好处。对于阻塞代码（例如在 IOLoop 中使用阻塞库或数据库驱动程序），建议运行比内核更多的实例以更好地利用 CPU 资源（每个内核 2-3 个）。

# excel - 将 xls 作为数据库读取时确定 Excel 文件的第一个工作表名称

> ID：14313458
> 
> 赞同：2
> 
> 时间：2013-01-14T04:50:26.033
> 
> 标签：excel, oledb

我需要从 Excel 工作表中读取一些客户数据。`*.xls`我发现通过这种方式读取 as 数据非常快速和容易：

```
string connString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\\MyExcelFile.xls;Extended Properties=\"Excel 8.0;HDR=YES\"";
using (var conn = new System.Data.OleDb.OleDbConnection(connString)) {
    conn.Open();
    System.Data.OleDb.OleDbCommand cmd = new System.Data.OleDb.OleDbCommand("Select * From [SheetName$]", conn);
    OleDbDataReader reader = cmd.ExecuteReader();
    int firstNameOrdinal = reader.GetOrdinal("First Name");
    int lastNameOrdinal = reader.GetOrdinal("Last Name");
    while (reader.Read()) {
        Console.WriteLine("First Name: {0}, Last Name: {1}", 
            reader.GetString(firstNameOrdinal), 
            reader.GetString(lastNameOrdinal));
    }
} 
```

问题出现在第 4 行：`SELECT * FROM [SheetName$]`. 在此示例中，您需要替换`"SheetName"`为您尝试阅读的工作表的名称。大多数时候，客户的名字都是一样的，一切都很好。

但有时他们不会，这意味着我们需要进行一些手动工作来修复它。总是只有一张纸（在这种情况下无论如何），所以我宁愿告诉代码“使用第一张纸，不管它的名字是什么”。

我还没有找到一种方法来使用这种技术来实现这一点，所以我正在与社区联系。提前感谢您的任何建议。

**PS** - 我们必须通过外部文件（例如 FileHelpers）的长度审批流程，我更喜欢使用这个流程，因为它不需要第三方库。如果可能的话，我宁愿限制对这种方法的回答。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T17:45:11.220

这里的答案可能适合您的需求：

[http://social.msdn.microsoft.com/forums/en-US/adodotnetdataproviders/thread/711cf5f9-75fc-4a02-9a96-08aec48dad69/](http://social.msdn.microsoft.com/forums/en-US/adodotnetdataproviders/thread/711cf5f9-75fc-4a02-9a96-08aec48dad69/)

它用于`.GetOleDbSchemaTable()`获取工作簿中的工作表名称列表。

# extjs - 未触发自定义事件的处理程序：“无法调用未定义错误的方法”应用

> ID：14313459
> 
> 赞同：0
> 
> 时间：2013-01-14T04:50:33.263
> 
> 标签：extjs, sencha-touch-2

对于我的应用程序中的每个视图，我都在尝试为创建和销毁视图时创建一个`fhActivate`和`fhDeactivate`事件，以便我可以执行不同的必要功能。在我的主控制器中，创建视图后，我执行以下操作：

```
view.fireEvent('fhActivate'); 
```

在另一个控制器中，我试图监听这样的事件：

```
config: {

    refs: {
       rankings: {
             selector: 'fhrankingspanel',
             xtype: 'fhrankingspanel',
             autoCreate: true
        }
    },

    control: {
        rankings : {
            fhActivate: 'onRankingsActivate'
        }
    },

    onRankingsActivate: function() {
        console.log('activate');
    }
} 
```

视图加载正常，xtype 在该类中定义如下：

```
alias: 'widget.fhrankingspanel' 
```

但我得到这个错误：

```
Uncaught TypeError: Cannot call method 'apply' of undefined 
```

我错过了什么？

**更新**

我还要注意，我已经在控制配置对象中尝试过这个：

```
rankings : {
            fhActivate: this.onRankingsActivate
        } 
```

我还尝试将我的 ref 设置为简单的东西：

```
rankings: 'fhrankingspanel' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T05:58:08.100

当回调方法未定义时会发生此错误。在您注册活动时，您可能会遇到拼写错误或范围问题。

在您的情况下，您应该首先尝试编写 this.onRankingsActivate 而不是 'onRankingsActivate'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:56:47.720

如果您不将方法包装在配置对象中，它也会有所帮助。在这里参考文档时，我注意到了我的愚蠢错误：

[http://docs.sencha.com/touch/2-0/#!/api/Ext.app.Controller](http://docs.sencha.com/touch/2-0/#!/api/Ext.app.Controller)

一旦我改变了它，并使我的控​​制方法看起来像这样，它就起作用了：

```
control: {
        rankings : {
            fhActivate: 'onRankingsActivate'
        }
    } 
```

# c - C中奇怪的 [1, 2] 样式数组

> ID：14313461
> 
> 赞同：7
> 
> 时间：2013-01-14T04:50:52.687
> 
> 标签：c

是否有一个非常早期的 C“标准”，其中以下对于二维数组的定义是合法的？

```
int array[const_x, const_y];
int array2[2, 10]; 
```

我偶然发现了一些旧的遗留代码，它使用这个（而且只有这个）符号来表示多维数组。除了这种奇怪之外，代码是完全有效的 C（并且在当时设计得非常好）。

由于我没有找到任何在`[,]`和之间转换的宏`[][]`，并且我认为这不是一种恶作剧，似乎从前有一个接受这种符号的旧 C 编译器。还是我错过了什么？

**编辑：**如果有帮助，它适用于嵌入式微控制器（atmel）。从我的经验来看，嵌入式编译器在标准兼容性方面并不那么出名。

如果我将 all 更改`[,]`为`[][]`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T04:53:09.020

看看[这个论坛帖子](http://www.rhinocerus.net/forum/language-c-moderated/79742-2d-array-comma-operator-c.html)。

> 逗号运算符评估左侧，丢弃结果，然后评估右侧。因此“2,5”与“5”相同，“5,2”与“2”相同。

这可能是正在发生的事情，尽管它的原因超出了我的范围。

> 请注意，逗号不能用于索引多维数组：代码 A[i, j] 的计算结果为 A[j]，其中 i 被丢弃，而不是正确的 A[i][j]。这与 Pascal 中的语法不同，其中 A[i, j] 是正确的，并且可能是错误的来源。

来自[维基百科](http://en.wikipedia.org/wiki/Comma_operator#Examples)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T05:44:14.720

第一个正式标准是 ANSI X3.159-1989，第一个非正式标准通常被认为是 Kernighan & Ritchie 的第一版。这些都不允许使用逗号来声明二维数组。

它似乎是您的特定编译器的一种特质（使其不符合标准的编译器，因为它会改变某些符合标准的程序的语义）。

# ms-access - 在产品列表表的查询中添加描述列

> ID：14313462
> 
> 赞同：0
> 
> 时间：2013-01-14T04:51:17.703
> 
> 标签：ms-access

我是一个初学者，我创建了一个数据库，目前我有两个表：

1.  具有 3 列的产品列表表：ProductID、Description、Description2

2.  用户将使用条形码扫描仪并将条形码扫描到表中的扫描表。它只有 2 列：ID 和 Barcode

我有一个查询，其中第一列是原始条形码，第二列是中间函数表达式（？），我从中提取产品代码等信息（稍后我将添加不同的列，提取重量、包装日期、序列）条形码。

目前，我希望第三列显示产品列表表中的描述和描述字段。在excel中我可以做一个vlookup，我一直在阅读Dlookup，但我想知道是否有比Dlookup更简单的替代品，因为我无法让它工作。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:45:06.977

假设提取产品代码的查询是：

```
SELECT Barcode, Mid(Barcode,6,3) As ProductID FROM Barcodes 
```

您可能在 Products 表中有 ProductID 的数字数据类型，在这种情况下，您必须确保查询中有数字数据类型，您可以这样做：

```
SELECT Barcode, CLng(Mid(Barcode,6,3)) As ProductID FROM Barcodes 
```

您可以将此保存的查询与 Product 表一起添加到查询设计窗口，并将 ProductID 字段从一个表拖到另一个表以创建连接：

![查询设计窗口](../Images/01af486b05e4d8f695b503c9d0c2e525.png)

或者您可以使用查询设计窗口的 SQL 视图构建查询：

```
SELECT q.Barcode, Products.ProductID, Products.Description
FROM (
   SELECT Barcode, Mid(Barcode,6,3) As ProductID 
   FROM Barcodes) As q
INNER JOIN Products
ON q.ProductID = Products.ProductID 
```

当然，对于第二个选项，您必须为您的设置做好一切准备。

# c# - 带有 Select 子句的 ExpandoObject

> ID：14313466
> 
> 赞同：0
> 
> 时间：2013-01-14T04:51:33.287
> 
> 标签：c#, linq, dynamic, types

我必须在 Linq Query 中填充下面的类

```
public class Emp             
{       
    public string name {get; set;}      
    public dynamic Obj { get; set; }       
    public Emp()
    {
        Obj = new ExpandoObject();
    }  
}

public LoadData()  
{
   var emp = (from d in dbContext.Employees         
              select new Emp   
              {  
                 name = d.name,  
                 Obj.DOB = d.DOB,  
                 Obj.BirthPlace = d.BirthPlace  
              }).ToList();

}

OR

    public LoadData()  
    {
       var emp = (from d in dbContext.Employees         
                  select new Emp   
                  {  
                     name = d.name,  
                    Obj.DOB = new ExpandoObject { DOB = d.DOB, BirthPlace =   d.BirthPlace }      }).ToList();

    } 
```

它不允许我像上面那样动态分配属性，谁能帮我实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T05:07:24.833

试试这个方法：

```
var emp = (from d in dbContext.Employees         
          select new Emp   
          {  
             name = d.name,  
             Obj = { DOB = d.DOB, BirthPlace = d.BirthPlace } 
          }).ToList(); 
```

它与@gowansg 答案非常相似，但没有`new`关键字。它只是属性值的设置。如果我们会尝试得到`Type`我们`Obj`将收到`System.Dynamic.ExpandoObject`。使用`new`关键字，它将是一些匿名类型。分别，这样的结构如：

```
emp[0].Obj.OtherProperty = 1; 
```

在使用匿名类型的情况下将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T05:14:13.733

您在第二个示例中很接近，您只需要设置`Obj`等于 a`new anonymous object`而不是 a `new ExpandoObject`：

```
var emp = (from d in dbContext.Employees         
          select new Emp   
          {  
             name = d.name,  
             Obj = new { DOB = d.DOB, BirthPlace = d.BirthPlace }
          }).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T04:03:47.000

var emp = (from d in dbContext.Employees
select new Emp
{
name = d.name,
Obj = { DOB = d.DOB, BirthPlace = d.BirthPlace }
}).ToList();

# browser - 浏览器、Safari/IE 负边距不起作用

> ID：14313470
> 
> 赞同：0
> 
> 时间：2013-01-14T04:51:51.960
> 
> 标签：browser, safari, position, margin, absolute

我对 safari 有疑问。我已经连续搜索了 6 个小时来解决问题，如果我的解释不好，请原谅我。所以问题是：我在缩略图上添加了悬停效果，它适用于所有浏览器，但在 safari 和 IE 中没有正确放置拇指。我曾尝试使用：

```
 @media screen and (-webkit-min-device-pixel-ratio:0){
    img.a {
position: absolute;
top: -500;
z-index: 10;
}

   img.b {
position: absolute;
top: -500;
}
    } 
```

但这适用于 webkit 浏览器，也意味着 chrome。

我目前使用的 css 适用于 chrome 和 firefox：

```
 img.a {
position: absolute;
top: -500;
margin-left: -115px;
    z-index: 10;
width: 230px;
height: 120px;
border: none;
}

   img.b {
position: absolute;
top: -500;
margin-left: -115px;
width: 230px;
height: 120px;
border: none;
} 
```

如果有人有解决方案，那真的可以节省我的时间:)

如果您需要检查，请访问以下网站：www.janthorb.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T05:45:39.397

摆脱 CSS

div#thumbnails { 文本对齐：中心；}

并且还摆脱了你的 margin-left: -115px 的图像，你将拥有在两个浏览器中都可以使用的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T06:11:48.847

你的页面代码很乱，没有对齐。HTML结构不合理，导致CSS也很不科学。我重写了你的结构，你可以参考。

```
.demo{ width:820px;margin:0 auto;}
.list{ margin-right:-20px; zoom:1;}
.list li{ float:left; width:230px; height:135px; margin:0 36px 25px 0; overflow:hidden; zoom:1;}
.link{ position:relative;width:228px; height:120px; display:block;border:thin dashed #1b1b1b; overflow:hidden;}
.link img{ position:absolute;top:0;left:0; }
.link .gray{ z-index:11;}
.link .hover{ z-index:10;}

<ul class="list">
    <li>
        <a class="link" href="#">
            <img class="gray" src="http://www.janthorb.com/thumb1_bw.jpg" alt="">
            <img class="hover" src="http://www.janthorb.com/thumb1.jpg" alt="">
        </a>
    </li>
    <li>
        <a class="link" href="#">
            <img class="gray" src="http://www.janthorb.com/thumb1_bw.jpg" alt="">
            <img class="hover" src="http://www.janthorb.com/thumb1.jpg" alt="">
        </a>
    </li>
</ul> 
```

[演示在这里](http://jsfiddle.net/6PHTN/)

# bluetooth - 蓝牙配置文件如何工作？

> ID：14313473
> 
> 赞同：4
> 
> 时间：2013-01-14T04:52:36.610
> 
> 标签：bluetooth

我了解蓝牙配置文件包含其他配置文件和协议。我不明白蓝牙设备之间究竟是如何交互的。例如，如果您使用任何实现 A2DP 配置文件的附件并将其连接到 iPad，那么 iPad 会将所有音频输出流式传输到它。这让我相信配置文件只不过是定义明确的生态系统中的模块化组件。例如，网络浏览器可以使用您在工具栏中选择的任何一种搜索引擎；我是否正确地说 iPad 相当于浏览器而 A2DP 附件相当于搜索引擎？我说 A2DP 的使用完全取决于与之配对的设备是否也是正确的？那是，苹果本可以选择（尽管不明智）让 iPad 只输出按键和铃声，对吗？因此，A2DP 配置文件中没有任何内容表明“所有使用 A2DP 配置文件的设备都必须向其输出所有音频”，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:02:29.283

我对整个蓝牙并不是 100% 熟悉。我一直在为 BT Low-Energy 起草一份配置文件，因此有人可能能够提供有关标准蓝牙的更多详细信息。

但是，据我了解，配置文件本质上是连接参考的大型地图。因此，A2DP 配置文件将有一个属性列表，或者更确切地说，是一个十六进制值列表，这些值指向较大配置文件中的属性。这些属性通常对所有配置文件普遍可用，但仅由需要它们的配置文件实现。这些属性定义了将要传输的一些信息。此配置文件需要在两个设备上进行通信，因为这允许蓝牙传输通过仅引用它正在传输的数据的众所周知的定义来更小（而不是像某些通信类型那样定义每次传输中的数据是什么）。

因此，对于 A2DP，传输可能非常简单，例如“0x1351458 0”，它会跟踪设备，无论该配置文件属性是什么，它的值都是 0。因此该属性可能是“播放”属性，因此设置为 0 可能会停止音乐。

同样，这就是我从低能耗的角度理解蓝牙配置文件的方式，它往往更多的是状态传输而不是实际数据，因此它可能与常规蓝牙有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-01T10:10:13.210

蓝牙配置文件是蓝牙协议栈中主机端实现的蓝牙协议规范。

bluetooth.org 的以下链接将提供有关蓝牙配置文件的基础知识 [https://developer.bluetooth.org/TechnologyOverview/Pages/Profiles.aspx](https://developer.bluetooth.org/TechnologyOverview/Pages/Profiles.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-15T12:48:53.320

蓝牙配置文件是一组由 bluetooth.org 定义的标准互操作指南，以确保不同蓝牙设备之间的互操作性。

声称支持蓝牙配置文件的蓝牙设备应获得蓝牙认证委员会 [BQB] 的互操作性认证。

您可以购买任何支持 A2DP 的设备并使用任何平板电脑/计算机进行测试[支持蓝牙 A2DP 配置文件]。

A2DP 并非特定于 iPad。它是一个通用配置文件，代表高级音频分发配置文件，用于在两个蓝牙设备之间交换音频。

# opera - 阅读（和写作）Opera .adr 书签

> ID：14313474
> 
> 赞同：0
> 
> 时间：2013-01-14T04:52:40.733
> 
> 标签：opera, bookmarks

是否有任何库可以解析`.adr`Opera 书签使用的文件格式？它是否也支持以这种格式书写？

起初，我会要求一个 Python 库，但我也很好奇是否有其他语言的此类库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:10:44.010

There is parser example for Perl language [https://github.com/cosimo/Bookmarks-Parser/](https://github.com/cosimo/Bookmarks-Parser/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T18:10:45.050

我最近一直在修改这个并[用 PHP](https://gist.github.com/Rarst/4755736)为它编写了解析器。

我不确定编写或修改它是否可行，因为项目包含一些可能与 Opera Link 相关的内部 ID。

# c# - 如何在这个 HtmlHelper 中添加 htmlAttributes？

> ID：14313475
> 
> 赞同：0
> 
> 时间：2013-01-14T04:52:48.950
> 
> 标签：c#, asp.net, .net, asp.net-mvc-4, html-helper

我现在正在使用[这段代码](http://jonlanceley.blogspot.mx/2011/06/mvc3-radiobuttonlist-helper.html)来使用 MVC4 实现 RadioButtonList。

如您所见，该函数没有 htmlAttributes 参数。所以我想添加它，这就是问题所在。请检查 RadioButtonFor() 的 htmlAttributes 是否被 id 占用。

我试图添加它但抛出错误，因为循环的 id 已经存在。

```
public static class HtmlExtensions
{
    public static MvcHtmlString RadioButtonForSelectList<TModel, TProperty>(
        this HtmlHelper<TModel> htmlHelper,
        Expression<Func<TModel, TProperty>> expression,
        IEnumerable<SelectListItem> listOfValues)
    {
        return htmlHelper.RadioButtonForSelectList(expression, listOfValues, null);
    }

    public static MvcHtmlString RadioButtonForSelectList<TModel, TProperty>(
        this HtmlHelper<TModel> htmlHelper,
        Expression<Func<TModel, TProperty>> expression,
        IEnumerable<SelectListItem> listOfValues,
        object htmlAttributes)
    {
        return htmlHelper.RadioButtonForSelectList(expression, listOfValues, new RouteValueDictionary(htmlAttributes));
    }

    public static MvcHtmlString RadioButtonForSelectList<TModel, TProperty>(
        this HtmlHelper<TModel> htmlHelper,
        Expression<Func<TModel, TProperty>> expression,
        IEnumerable<SelectListItem> listOfValues,
        IDictionary<string, object> htmlAttributes)
    {
        var metaData = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData);
        var sb = new StringBuilder();
        if (listOfValues != null)
        {
            foreach (SelectListItem item in listOfValues)
            {
                var id = string.Format(
                    "{0}_{1}",
                    metaData.PropertyName,
                    item.Value
                );

                var radio = htmlHelper.RadioButtonFor(expression, item.Value, new { id = id }).ToHtmlString();
                sb.AppendFormat(
                    "{0}<label for=\"{1}\">{2}</label>",
                    radio,
                    id,
                    HttpUtility.HtmlEncode(item.Text)
                );
            }
        }
        return MvcHtmlString.Create(sb.ToString());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T05:46:12.390

在第三种方法中，看起来传递给正在创建的 radion 按钮的 html 属性是`new { id = id }`. 尝试用方法中的参数替换它。

**更新**

在 html 属性中包含 id 并在每次循环迭代中为 id 分配一个新值。

```
if (listOfValues != null)
{
    if (!htmlAttributes.ContainsKey("id"))
    {
        htmlAttributes.Add("id", null);
    }
    foreach (SelectListItem item in listOfValues)
    {
        var id = string.Format(
            "{0}_{1}",
            metaData.PropertyName,
            item.Value
        );
        htmlAttributes["id"] = id;
        var radio = htmlHelper.RadioButtonFor(expression, item.Value, htmlAttributes).ToHtmlString();
        sb.AppendFormat(
            "{0}<label for=\"{1}\">{2}</label>",
            radio,
            id,
            HttpUtility.HtmlEncode(item.Text)
        );
    }
} 
```

# c# - 将数据永久保存在数据库中

> ID：14313480
> 
> 赞同：3
> 
> 时间：2013-01-14T04:54:32.300
> 
> 标签：c#

伙计们，我在将数据保存在数据库中时遇到了问题。
我正在开发的系统将数据保存在数据库中并在数据网格中显示数据并且运行平稳，但问题是每当我重新启动或重新启动应用程序时，数据都会消失，数据库再次为空，但数据直接输入数据库使用显示表数据，并没有消失。
我在我的程序中遗漏了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-25T09:12:03.807

执行以下步骤：

1.  从解决方案资源管理器中右键单击您的 Database.mdf 或 Database.accdb 数据库文件
2.  点击属性
3.  从复制到输出目录下拉列表中选择“不复制”
4.  如果在访问时打开数据库，请记住关闭数据库

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T05:16:00.817

很久以前我有同样的问题。我记得我在执行中输入的数据会在下一次执行时消失，这是因为本地数据库文件在每次执行时都被复制（并因此被覆盖）。

我通过将`Copy to Output Directory`本地数据库的属性设置为**Do not copy**我想解决了它，测试它，如果不是**Do not Copy**那么它可能是**Copy Always**。

但我确信我的（同样的）问题以这种方式解决了。
希望它也适用于您的情况。

**编辑**：Eman，请执行以下步骤。它应该可以解决您的问题。

1.从解决方案资源管理器中右键单击您的 abc.mdf 数据库文件 2.点击
属性
3.更改复制到输出目录
4.运行您的应用程序，添加一行，退出应用程序，再次运行
5.如果行丢失，转到步骤1，否则退出

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-14T05:10:24.273

尝试使用 sql server 数据库。在 form_load() 中编写代码。

# javascript - 如何在 HTML id 标签中打印 javascript

> ID：14313485
> 
> 赞同：1
> 
> 时间：2013-01-14T04:56:12.593
> 
> 标签：javascript, html, css, web

所以我构建了随机化脚本来打印从 1 到 20 的随机数。这些都是我的 css 文件中的 css 类。所以这就是我想要做的。

我想让javascript打印出随机`header id=""`数

```
<!-- This is my js file -->
<script type="text/javascript" src="/assets/quotes.js"></script>

<!-- This is what I want -->
<header id="<script>showClass();</script>"> 
```

这是我的 js 代码：

```
var Classes=new Array()

Classes[0] = "one";
Classes[1] = "two";
Classes[2] = "three";
Classes[3] = "four";
Classes[4] = "five";
Classes[5] = "six";
Classes[6] = "seven";
Classes[7] = "eight";
Classes[8] = "nine";
Classes[9] = "ten";
Classes[10] = "eleven";
Classes[11] = "twelve";
Classes[12] = "thirteen";
Classes[13] = "fourteen";
Classes[14] = "fifteen";
Classes[15] = "sixteen";
Classes[16] = "seventeen";
Classes[17] = "eighteen";
Classes[18] = "nineteen";
Classes[19] = "twenty";
Classes[20] = "green";

var Q = Classes.length;
var whichClass=Math.round(Math.random()*(Q-1));
function showClass(){document.write(Classes[whichClass]);}
var random =document.getElementById('random').innerHTML="showClass()"; 
```

我怎样才能使javascript呈现在`id=""`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T05:02:41.543

JS 不会在引号中呈现，因为这只是一个字符串。相反，请执行以下操作：

```
<script type="text/javascript">
   document.write("<header id=\"");
   showClass();
   document.write("\">");
</script> 
```

就个人而言，我更喜欢按照 roXon 的建议在 onLoad 处理程序中添加元素，但我认为上面的内容应该适合你所拥有的。

编辑以匹配问题修订。

# iphone - 使用 Instruments 工具检查内存分配、泄漏

> ID：14313486
> 
> 赞同：1
> 
> 时间：2013-01-14T04:56:31.903
> 
> 标签：iphone, objective-c, xcode, memory-management, instruments

![在此处输入图像描述](../Images/3304e1c24a87daca628642b1e69016f5.png)

正如许多人所建议的那样，instruments 工具是捕获内存分配和泄漏的最佳方法。但对我来说，instruments 工具很容易使用，但我对上面屏幕截图中显示的详细结果感到困惑。

想知道以下几点的含义，1）All Allocations，2）Live Bytes，3）Overall Bytes，4）Overall。

简单但令人困惑！任何答案将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T05:07:45.147

**live bytes：**已分配但尚未释放的字节数。
**生活：** *已创建并仍在堆上的对象数。
**Transitory：** 创建和销毁的对象数Total
**byte：已分配和释放的
*总***字节数 total ：分配和释放的对象总数。
**all allocations**：应用程序运行时的所有分配。

# python - Python.27 - MySQL utf8 编码

> ID：14313488
> 
> 赞同：0
> 
> 时间：2013-01-14T04:56:37.960
> 
> 标签：python, mysql

在我从 Python 调用 MySQL 时，我用“ `SET NAMES 'utf8'`”来准备它，但还是有些不对劲。我得到这样的序列：

```
å½å®¶1çº§è¯ä¹¦ 
```

当我应该得到汉字时，其他地方总是被utf8覆盖。

当我查看 utf8 代码/序列时，它显然与真实的不匹配。相同的格式，但不同的数字。

这是 Python 2.7 端的错误编码还是我端的错误编程？我知道 Python 3.x 已经解决了这些问题，但我无法在以后的版本中使用我想要的模块。

我知道 Python 2.7 实际上可以通过使用 print 运算符显示中文，但它以其他方式存储和查看为 utf8 代码。看：

```
>>> '你好'

'\xc4\xe3\xba\xc3'

>>> print '\xc4\xe3\xba\xc3'

你好 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T02:18:45.763

好的..似乎在添加

“设置名称'gbk'”

在 MySQL SELECT 查询成功之前。现在至少可以比较我的字典和 sql 数据库中的字符串。gbk 似乎也是中国首选的字符格式。

# ios - 横向模式下应用程序的背景颜色 iOS 6

> ID：14313491
> 
> 赞同：1
> 
> 时间：2013-01-14T04:57:18.057
> 
> 标签：ios, background

我在函数中有以下代码`viewWillAppear`：

```
CAGradientLayer *bgLayer = [BackgroundLayer yellowGradient];
[bgLayer setBounds:self.view.bounds];
[self.view.layer insertSublayer:bgLayer atIndex:0]; 
```

它在纵向上完美运行。但是，当设备进入横向模式时，它会在侧面产生白色（或默认颜色）背景。我已经看到了为什么会发生这种情况的其他示例，但没有关于如何解决它的信息。

我看到发生的是横向（iPad）上的 1024 分辨率下降到 1004，我认为它正在将其调整`0,20`为`x, y`.

有没有其他人遇到过这个问题并找到了解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T05:04:33.477

这是因为当您将屏幕侧向时，具有一定背景颜色的视图不会侧向。视图保持纵向。所以你有这个面向纵向的彩色视图，它从 iPad 的*新*“顶部”到屏幕下方，在右侧，视图不够宽，无法触及，所以你只看到应用程序的默认值 (白色）背景颜色。

你可以：

*   对您的 90º应用`CGAffineTransformMakeRotation`旋转`self.view`，以便它现在可以在您现在的横向应用程序中正确显示，
*   使您的视图足够大以覆盖整个设备，无论是横向还是纵向，
*   制作具有适当横向尺寸的视图，并在 iPad 旋转时添加它，或者
*   在 Xcode 主项目文件中禁用那些允许的界面方向。

`CGAffineTransformRotation`SO上的演示代码链接：[如何使用CGAffineTransformMakeRotation？](https://stackoverflow.com/questions/5725099/how-to-use-cgaffinetransformmakerotation)

# pypy - 为什么pypy无法加载shedskin生成的扩展模块

> ID：14313499
> 
> 赞同：1
> 
> 时间：2013-01-14T04:57:43.957
> 
> 标签：pypy

我使用的是 PyPy 和 shedskin。但是如何在 pypy 中导入 shedskin 生成的模块呢？谁能举个例子来帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T08:40:04.147

简短的回答是不要。使用纯 Python，PyPy 的 JIT 通常可以从 shedskin 无论如何都可以编译的代码中获得很多意义。

更长的答案是 PyPy 有一个 CPython C API 兼容层（shedskin 用来创建扩展模块），但这就是它的本质 - 一个兼容层。它很慢，并不总是有效。我不是 100% 肯定 shedskin 会遵守规则，并且总是使用官方 API 而不是在内部戳。

干杯，菲亚尔

# android - 屏幕录像FPS

> ID：14313501
> 
> 赞同：0
> 
> 时间：2013-01-14T04:58:23.250
> 
> 标签：android, screen, video-recording

我在谷歌上搜索了很多，但不幸的是没有找到任何屏幕录像的解决方案。如果您使用过google play的**[Screencast Video Recorder ，您可以更好地理解我的问题。](https://play.google.com/store/apps/details?id=com.ms.screencast&hl=en)****谁能帮我解决如何以编程**方式实现屏幕录像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-10T11:27:19.487

AFAIK Screencast 通过读取 /dev/graphics/fb0 来记录，这很慢。

以编程方式，性能最高的方法是创建虚拟显示器。目前仅适用于 Android 4.4。请参阅 screenrecorder.cpp 了解如何执行此操作：

[https://android.googlesource.com/platform/frameworks/av/+/android-4.4_r1/cmds/screenrecord/screenrecord.cpp](https://android.googlesource.com/platform/frameworks/av/+/android-4.4_r1/cmds/screenrecord/screenrecord.cpp)

对于 Android 4.1 及更高版本，您可以使用 SurfaceComposerClient（来自本机代码或 Java 代码），尽管它在 4.3 上相当损坏。

除非您想自己编写屏幕录像机，否则我不会打扰，只需使用现成的录像机之一。

有关更多详细信息，请参阅[此答案](https://stackoverflow.com/questions/8697099/screen-video-recording-android/22985257#22985257)。

# java - 从 Java 代码调用 shell 脚本

> ID：14313503
> 
> 赞同：-2
> 
> 时间：2013-01-14T04:58:42.157
> 
> 标签：java, multithreading, unix, process

我想从java调用一个shell脚本。可以使用 Runtime.exec 方法来完成。但问题是 shell 脚本将需要大约 3-4 小时才能执行，并且不建议将 Process.waitFor() 应用于如此长的进程，因为它会使当前线程处于等待状态 4 小时。这将发生在多线程环境中，其中多个 java 线程将调用多个 shell 脚本，每个脚本耗时超过 3 小时。（虽然线程数会很少）

我怎样才能使它异步，以便我的 java 进程不必等待，并且它以某种方式知道 shell 脚本何时完成。我没有使用 JMS 的选项。

请提出一个强大的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T05:18:30.390

使用`Callable`and`Future`异步启动你的脚本，你可以在单独的线程中等待它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T05:23:05.107

可能是这样的

```
class AsyncProcessRunner {

    class AsyncProcess implements Runnable {
        String cmd;
        int rc;
        String out;
        String err;

        AsyncProcess(String cmd) {
            this.cmd = cmd;
        }

        @Override
        public void run() {
            // run process here
            processEnded(this);
        }
    }

    void processEnded(AsyncProcess p) {
        // process termination
    }

    public void runAsync(String cmd) {
        new Thread(new AsyncProcess(cmd)).start();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T05:37:04.183

> 但问题是 shell 脚本将需要大约 3-4 小时才能执行，并且不建议将 Process.waitFor() 应用于如此长的进程，因为它会使当前线程保持等待状态 4 小时。这将发生在多线程环境中，其中多个 java 线程将调用多个 shell 脚本，每个脚本耗时超过 3 小时。（虽然线程数会很少）

老实说，我认为你试图解决的问题在很大程度上是虚构的。

等待 4 小时什么都不做的单个线程的成本几乎没有。这是使用（通常）1Mb 的非堆空间来表示堆栈的成本。如果这些线程的数量很少，那么总空间就是几兆字节。除非您在内存受限的系统上运行，否则根本不值得担心。（称其为*“不可取的”* ...... IMO）。

如果您的内存*受到*限制，那么首先要尝试分配具有减小堆栈大小的线程；例如使用[这个构造函数](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#Thread%28java.lang.ThreadGroup,%20java.lang.Runnable,%20java.lang.String,%20long%29)。我认为 10Kb 的线程堆栈足以完成这项任务。

# ios - NSDateFormatter stringFromDate 在模拟器中工作而不是在 iPad 上

> ID：14313506
> 
> 赞同：1
> 
> 时间：2013-01-14T04:58:58.650
> 
> 标签：ios, ipad, nsdateformatter

我有一个通用应用程序，同时针对`iPhone`且`iPad`仅支持`iOS 6+`

我有一段非常简单的代码可以从中提取时间`NSDate`并将其格式化以进行显示：

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"h:mm a"];
validFromField.text = [formatter stringFromDate:fromDate]; 
```

在 fromDate 中的日期，`'01/01/2012 10:00'`在 iPhone Simulator、iPad Simulator 和真正的 iPhone 4S 上，我得到预期值`'10:00 AM'`

但是，在我的 iPad（3，新 iPad）上，我`'10:00'`好像`'a'`忽略了格式化程序中的 。

iPhone 和 iPad 都在运行`iOS 6.0.1`

有没有人遇到过这个问题，或者知道如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:22:17.517

我在这里的另一个 SO 问题中找到了我的问题的答案：[NSDateFormatter has different results when iPad has a 24-hour format](https://stackoverflow.com/questions/4730779/) ...

由 Apple 技术问答支持：http: [//developer.apple.com/library/ios/#qa/qa1480/_index.html](http://developer.apple.com/library/ios/#qa/qa1480/_index.html)

所以本质上，如果设备设置为 24 小时制，那么`'a'`格式化程序中的标志将被忽略，时间将以 24 小时格式返回。

# iphone - iOS insertSubview:belowSubview: 使用 SIGABRT 崩溃

> ID：14313507
> 
> 赞同：1
> 
> 时间：2013-01-14T04:59:01.660
> 
> 标签：iphone, ios, ipad

我有一个`TabbarViewController`基本上隐藏标准选项卡视图的自定义。我附加了一个按钮，当按下该按钮时，会在屏幕上显示一个菜单。长时间使用该应用程序时一切正常，但在某些时候它会因 a`EXC_BAD_ACCESS`或 a而崩溃`SIGABRT`。

奇怪的是，当我添加了一个`NSLog`用于打印`tabbarController`并且`menuView`就在检查 menuView 是否是 的子视图之前`tabbarController`，它在线上崩溃了`NSLog`（在我看来，其中一个已被释放，但没有显式调用，它们都被保留）。

这种崩溃从未在模拟器上发生过。关于有什么问题的任何想法？

**AppDelegate.h**

```
UIButton *ribbon;
RibbonMenu* menu;
@property (nonatomic, retain) CustomTabbarController* tabbarController;
@property (nonatomic, retain) UIView* menuView; 
```

**AppDelegate.m**

```
@synthesize tabbarController;
@synthesize menuView;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
tabbarController = [[CustomTabbarController alloc] init];
    [tabbarController setTabBarHidden:YES animated:NO];
    tabbarController.viewControllers = [NSArray arrayWithObjects: EventsNavigation, StyleNavigation, BrandNavigation, MemberNavigation, settingsNavigation, nil];

    ribbon = [UIButton buttonWithType:UIButtonTypeCustom];
    [ribbon retain];
    UIImage* img = [UIImage imageNamed:@"toppart.png"];
    [ribbon setImage:img forState:UIControlStateNormal];
    ribbon.frame = CGRectMake(234,0,86,97);    
    //MENU SELECTOR
    [ribbon addTarget:self action:@selector(didClickMenu) forControlEvents:UIControlEventTouchUpInside];
    [tabbarController.view addSubview:ribbon];

    self.window.rootViewController = tabbarController;    
    [self.window makeKeyAndVisible];
}

- (void) didClickMenu {
    if (!menuView) {
        menu = [[RibbonMenu alloc] init];
        menuView = menu.view;
        menuView.backgroundColor = [UIColor clearColor];
        [blinkTimer invalidate];
        ribbon.selected = NO;
    }

    if ([tabbarController.view.subviews containsObject:menuView]) {
        [self removeMenu];
    } else {
        menuView.frame = CGRectMake(235,-370,82,432);
        //**CRASH HERE**
        [tabbarController.view insertSubview:menuView belowSubview:ribbon];
        [UIView transitionWithView:menuView
                          duration:0.2
                           options:UIViewAnimationOptionCurveLinear
                        animations:^ { menuView.frame = CGRectMake(235,0,82,432);}
                        completion:nil];
    }
}

-(void) removeMenu {
    [UIView transitionWithView:menuView
                      duration:0.2
                       options:UIViewAnimationOptionCurveLinear
                    animations:^ { menuView.frame = CGRectMake(235,-370,82,432);}
                    completion:^(BOOL finished) {[menuView removeFromSuperview];}];
} 
```

这是崩溃日志

```
Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                  0x35a5388f __exceptionPreprocess + 163
1   libobjc.A.dylib                 0x33677259 objc_exception_throw + 33
2   CoreFoundation                  0x35a53789 +[NSException raise:format:] + 1
3   CoreFoundation                  0x35a537ab +[NSException raise:format:] + 35
4   UIKit                           0x33313cf1 __windowForView + 157
5   UIKit                           0x33155ccd -[UIView(Hierarchy) _postMovedFromSuperview:] + 21
6   UIKit                           0x3315680d -[UIView(Internal) _addSubview:positioned:relativeTo:] + 1169
7   UIKit                           0x33172071 -[UIView(Hierarchy) insertSubview:belowSubview:] + 29
8   MyAppName                       0x000c6af3 -[AppDelegate didClickMenu] (AppDelegate.m:247) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T05:06:18.693

这种崩溃也应该发生在模拟器上。在`didClickMenu`您尝试访问 menuView。但是，从外观上看，您没有名为 menuView 的实例变量。您有一个名为 menuView的**属性**`self.menuView`，但您需要使用.

或者，如果您使用的是 Xcode 4.4 或更高版本并且您没有合成您的属性，编译器将为您创建一个实例变量。此实例变量与属性同名，但带有 _ 前缀——在本例中为`_menuView`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:43:38.330

我认为关键是**编码风格**。

功能区和菜单是全局的吗？无论您是否拥有菜单，而是将 menu.view 分配给 menuView，而不是使用 self.menuView 来保留。是的，我知道代码只是分配菜单而不释放它。

在 Mac 上运行的模拟器上很难发生，但在内存较少且功能较差的 iPod touch 上可能更容易。

正如我们所知，EXC_BAD_ACCESS 是由于访问释放的对象。如果我是你我会 ：

1.  将 Xcode 更新到最新版本。
2.  不要为属性编写任何@synthesize 代码。Xcode 将@synthesize menuView = _menuView。
3.  尽可能避免使用全局变量，而是使用 OOP 中的属性。所以，我会写信`self.menuView = [[[RibbonMenu alloc] init] autorelease];`来拥有 RibbonMenu 的视图以供使用。

仅供参考：http: [//developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T16:51:14.887

当您将值分配给 时`menuView`，您没有使用属性，而是使用 的 iVar `menuView`。

要使用该属性，您应该使用 self 将值分配给 menuView。

```
self.menuView = menu.view; 
```

通过访问属性，它将保留它。通过访问 iVar，它不会保留它。因此，一旦你`menuView`从它的中删除`superView`，它就有可能被删除。

```
- (void) didClickMenu {
    if (!menuView)
    {
        menu = [[RibbonMenu alloc] init];
        **self.menuView = menu.view;**
        menuView.backgroundColor = [UIColor clearColor];
        [blinkTimer invalidate];
        ribbon.selected = NO;
    }
 } 
```

# jquery - jQuery 不能在表中工作？

> ID：14313508
> 
> 赞同：0
> 
> 时间：2013-01-14T04:59:05.133
> 
> 标签：jquery, forms, html-table

我一直在制作一个简单的产品订单表格，该表格需要数量，计算总行，然后将每行总和相加以形成总计。

我正在使用 jQuery 来执行计算，并且一切都运行良好，除非表格在表格中格式化。

这是一个`jsFiddle`-> [http://jsfiddle.net/WekLs/](http://jsfiddle.net/WekLs/)

如果我只是删除打开的表格标签，那么一切都会正常运行。

```
<table class="twelve"> 
```

我怀疑它与任何一个有关`.next()`，`.index()`但我不完全确定。

我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T05:05:40.017

正确结束你的`img`标签`<img src="" />`

正确结束您的`h5`标签`<h5> </h5>`
...

编辑和审查您的所有 HTML 标记，您就可以开始新的测试了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T05:09:24.380

改变你的

```
$this.next('.linetotal').val(getPrice(qty, idx)); 
```

到

```
$this.parents('tr').find('.linetotal').val(getPrice(qty, idx)); 
```

# python - 如何使用 python + NumPy / SciPy 计算滚动/移动平均值？

> ID：14313510
> 
> 赞同：180
> 
> 时间：2013-01-14T04:59:12.233
> 
> 标签：python, numpy, time-series, moving-average, rolling-computation

似乎没有函数可以简单地计算 numpy/scipy 上的移动平均值，从而导致[复杂的解决方案](https://stackoverflow.com/questions/12816011/weighted-moving-average-with-numpy-convolve)。

我的问题有两个：

*   （正确）使用 numpy 实现移动平均线的最简单方法是什么？
*   既然这看起来不简单且容易出错，那么是否有充分的理由不将[电池包含](https://www.python.org/dev/peps/pep-0206/#batteries-included-philosophy)在这种情况下？

* * *

## 回答 #1

> 赞同：219
> 
> 时间：2013-01-14T06:15:57.527

如果您只想要一个简单的非加权移动平均线，您可以使用 轻松实现它`np.cumsum`，这~~可能~~ **比**基于 FFT 的方法更快：

**编辑**更正了 Bean 在代码中发现的错误索引。**编辑**

```
def moving_average(a, n=3) :
    ret = np.cumsum(a, dtype=float)
    ret[n:] = ret[n:] - ret[:-n]
    return ret[n - 1:] / n

>>> a = np.arange(20)
>>> moving_average(a)
array([  1.,   2.,   3.,   4.,   5.,   6.,   7.,   8.,   9.,  10.,  11.,
        12.,  13.,  14.,  15.,  16.,  17.,  18.])
>>> moving_average(a, n=4)
array([  1.5,   2.5,   3.5,   4.5,   5.5,   6.5,   7.5,   8.5,   9.5,
        10.5,  11.5,  12.5,  13.5,  14.5,  15.5,  16.5,  17.5]) 
```

所以我猜答案是：它真的很容易实现，也许 numpy 已经有点臃肿了，有专门的功能。

* * *

## 回答 #2

> 赞同：178
> 
> 时间：2019-02-11T10:11:13.497

实现此目的的一种简单方法是使用[`np.convolve`](https://docs.scipy.org/doc/numpy-1.14.1/reference/generated/numpy.convolve.html). 这背后的想法是利用计算[离散卷积](https://en.wikipedia.org/wiki/Convolution#Discrete_convolution)的方式并使用它来返回*滚动平均值*。这可以通过与[`np.ones`](https://docs.scipy.org/doc/numpy-1.14.0/reference/generated/numpy.ones.html)长度等于我们想要的滑动窗口长度的序列进行卷积来完成。

为此，我们可以定义以下函数：

```
def moving_average(x, w):
    return np.convolve(x, np.ones(w), 'valid') / w 
```

该函数将采用序列的卷积`x`和长度为的序列`w`。请注意，选择`mode`的是`valid`卷积乘积仅针对序列完全重叠的点给出。

* * *

一些例子：

```
x = np.array([5,3,8,10,2,1,5,1,0,2]) 
```

对于具有长度窗口的移动平均线，`2`我们将有：

```
moving_average(x, 2)
# array([4\. , 5.5, 9\. , 6\. , 1.5, 3\. , 3\. , 0.5, 1\. ]) 
```

对于一个长度的窗口`4`：

```
moving_average(x, 4)
# array([6.5 , 5.75, 5.25, 4.5 , 2.25, 1.75, 2\.  ]) 
```

* * *

## 如何`convolve`工作？

让我们更深入地了解计算离散卷积的方式。以下函数旨在复制`np.convolve`计算输出值的方式：

```
def mov_avg(x, w):
    for m in range(len(x)-(w-1)):
        yield sum(np.ones(w) * x[m:m+w]) / w 
```

对于上面的相同示例，这也会产生：

```
list(mov_avg(x, 2))
# [4.0, 5.5, 9.0, 6.0, 1.5, 3.0, 3.0, 0.5, 1.0] 
```

因此，每一步所做的就是在数组和当前*窗口*之间取内积。在这种情况下，`np.ones(w)`考虑到我们直接取`sum`序列的 ，乘法是多余的。

Bellow 是如何计算第一个输出的示例，以便更清晰一些。假设我们想要一个窗口`w=4`：

```
[1,1,1,1]
[5,3,8,10,2,1,5,1,0,2]
= (1*5 + 1*3 + 1*8 + 1*10) / w = 6.5 
```

以下输出将计算为：

```
 [1,1,1,1]
[5,3,8,10,2,1,5,1,0,2]
= (1*3 + 1*8 + 1*10 + 1*2) / w = 5.75 
```

依此类推，一旦执行了所有重叠，就返回序列的移动平均值。

* * *

## 回答 #3

> 赞同：84
> 
> 时间：2013-01-14T06:38:58.603

NumPy 缺少特定领域的功能可能是由于核心团队的纪律和对 NumPy 主要指令的忠实：*提供 N 维数组类型*，以及用于创建和索引这些数组的函数。像许多基本目标一样，这个目标并不小，而 NumPy 做得非常出色。

（更多）更大的***SciPy***包含更多特定领域的库（SciPy 开发人员称为***子包***）——例如，数值优化 ( *optimize* )、信号处理 ( *signal* ) 和积分 ( *integrate* )。

我的猜测是，您所追求的功能至少在一个 SciPy 子包中（可能是*scipy.signal*）；但是，我会首先查看***SciPy scikits***的集合，确定相关的 scikit(s) 并在那里寻找感兴趣的功能。

[Scikits](http://scikits.appspot.com)是基于 NumPy/SciPy 独立开发的软件包，并针对特定的技术学科（例如*scikits-image*、*scikits-learn*等）。其中一些（特别是用于数值优化的[出色 OpenOpt](http://openopt.org/Welcome) ）受到高度评价，早在选择驻留在相对较新的*scikits*标准下的成熟项目。上面喜欢的*Scikits主页列出了大约 30 个这样**的 scikits*，尽管其中至少有几个不再处于积极开发中。

遵循此建议将引导您进入*scikits-timeseries*；但是，该软件包不再处于积极开发中；实际上，[***Pandas***](http://pandas.pydata.org)已成为 AFAIK，*事实上的基于* *NumPy*的时间序列库。

*Pandas*有几个函数可以用来计算*移动平均线*；其中最简单的可能是**rolling_mean**，您可以这样使用：

```
>>> # the recommended syntax to import pandas
>>> import pandas as PD
>>> import numpy as NP

>>> # prepare some fake data:
>>> # the date-time indices:
>>> t = PD.date_range('1/1/2010', '12/31/2012', freq='D')

>>> # the data:
>>> x = NP.arange(0, t.shape[0])

>>> # combine the data & index into a Pandas 'Series' object
>>> D = PD.Series(x, t) 
```

现在，只需调用传入 Series 对象和*窗口大小的函数***rolling_mean**，在下面的示例中为*10 days*。

 **```
>>> d_mva = PD.rolling_mean(D, 10)

>>> # d_mva is the same size as the original Series
>>> d_mva.shape
    (1096,)

>>> # though obviously the first w values are NaN where w is the window size
>>> d_mva[:3]
    2010-01-01         NaN
    2010-01-02         NaN
    2010-01-03         NaN 
```

验证它是否有效 - 例如，将原始系列中的值 10 - 15 与使用滚动平均值平滑的新系列进行比较

```
>>> D[10:15]
     2010-01-11    2.041076
     2010-01-12    2.041076
     2010-01-13    2.720585
     2010-01-14    2.720585
     2010-01-15    3.656987
     Freq: D

>>> d_mva[10:20]
      2010-01-11    3.131125
      2010-01-12    3.035232
      2010-01-13    2.923144
      2010-01-14    2.811055
      2010-01-15    2.785824
      Freq: D 
```

函数 rolling_mean 以及大约十几个其他函数被非正式地分组在 Pandas 文档中的标题*移动窗口*函数下；Pandas 中的第二组相关函数称为指数加权函数（例如*ewma*，它计算指数移动加权平均值）。*第二组不包括在第一组（移动窗口*函数）中的事实可能是因为指数加权变换不依赖于固定长度的窗口

* * *

## 回答 #4

> 赞同：46
> 
> 时间：2019-09-11T21:37:44.703

这里有多种方法可以做到这一点，以及一些基准。最好的方法是使用来自其他库的优化代码的版本。该`bottleneck.move_mean`方法可能是最好的。该`scipy.convolve`方法也非常快速、可扩展，并且在语法和概念上都很简单，但是对于非常大的窗口值不能很好地扩展。如果您需要纯粹的方法，该`numpy.cumsum`方法很好`numpy`。

**注意：**其中一些（例如`bottleneck.move_mean`）没有居中，并且会改变您的数据。

```
import numpy as np
import scipy as sci
import scipy.signal as sig
import pandas as pd
import bottleneck as bn
import time as time

def rollavg_direct(a,n): 
    'Direct "for" loop'
    assert n%2==1
    b = a*0.0
    for i in range(len(a)) :
        b[i]=a[max(i-n//2,0):min(i+n//2+1,len(a))].mean()
    return b

def rollavg_comprehension(a,n):
    'List comprehension'
    assert n%2==1
    r,N = int(n/2),len(a)
    return np.array([a[max(i-r,0):min(i+r+1,N)].mean() for i in range(N)]) 

def rollavg_convolve(a,n):
    'scipy.convolve'
    assert n%2==1
    return sci.convolve(a,np.ones(n,dtype='float')/n, 'same')[n//2:-n//2+1]  

def rollavg_convolve_edges(a,n):
    'scipy.convolve, edge handling'
    assert n%2==1
    return sci.convolve(a,np.ones(n,dtype='float'), 'same')/sci.convolve(np.ones(len(a)),np.ones(n), 'same')  

def rollavg_cumsum(a,n):
    'numpy.cumsum'
    assert n%2==1
    cumsum_vec = np.cumsum(np.insert(a, 0, 0)) 
    return (cumsum_vec[n:] - cumsum_vec[:-n]) / n

def rollavg_cumsum_edges(a,n):
    'numpy.cumsum, edge handling'
    assert n%2==1
    N = len(a)
    cumsum_vec = np.cumsum(np.insert(np.pad(a,(n-1,n-1),'constant'), 0, 0)) 
    d = np.hstack((np.arange(n//2+1,n),np.ones(N-n)*n,np.arange(n,n//2,-1)))  
    return (cumsum_vec[n+n//2:-n//2+1] - cumsum_vec[n//2:-n-n//2]) / d

def rollavg_roll(a,n):
    'Numpy array rolling'
    assert n%2==1
    N = len(a)
    rolling_idx = np.mod((N-1)*np.arange(n)[:,None] + np.arange(N), N)
    return a[rolling_idx].mean(axis=0)[n-1:] 

def rollavg_roll_edges(a,n):
    # see https://stackoverflow.com/questions/42101082/fast-numpy-roll
    'Numpy array rolling, edge handling'
    assert n%2==1
    a = np.pad(a,(0,n-1-n//2), 'constant')*np.ones(n)[:,None]
    m = a.shape[1]
    idx = np.mod((m-1)*np.arange(n)[:,None] + np.arange(m), m) # Rolling index
    out = a[np.arange(-n//2,n//2)[:,None], idx]
    d = np.hstack((np.arange(1,n),np.ones(m-2*n+1+n//2)*n,np.arange(n,n//2,-1)))
    return (out.sum(axis=0)/d)[n//2:]

def rollavg_pandas(a,n):
    'Pandas rolling average'
    return pd.DataFrame(a).rolling(n, center=True, min_periods=1).mean().to_numpy()

def rollavg_bottlneck(a,n):
    'bottleneck.move_mean'
    return bn.move_mean(a, window=n, min_count=1)

N = 10**6
a = np.random.rand(N)
functions = [rollavg_direct, rollavg_comprehension, rollavg_convolve, 
        rollavg_convolve_edges, rollavg_cumsum, rollavg_cumsum_edges, 
        rollavg_pandas, rollavg_bottlneck, rollavg_roll, rollavg_roll_edges]

print('Small window (n=3)')
%load_ext memory_profiler
for f in functions : 
    print('\n'+f.__doc__+ ' : ')
    %timeit b=f(a,3)

print('\nLarge window (n=1001)')
for f in functions[0:-2] : 
    print('\n'+f.__doc__+ ' : ')
    %timeit b=f(a,1001)

print('\nMemory\n')
print('Small window (n=3)')
N = 10**7
a = np.random.rand(N)
%load_ext memory_profiler
for f in functions[2:] : 
    print('\n'+f.__doc__+ ' : ')
    %memit b=f(a,3)

print('\nLarge window (n=1001)')
for f in functions[2:-2] : 
    print('\n'+f.__doc__+ ' : ')
    %memit b=f(a,1001) 
```

时序，小窗口 (n=3)

```
Direct "for" loop : 

4.14 s ± 23.7 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)

List comprehension : 
3.96 s ± 27.9 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)

scipy.convolve : 
1.07 ms ± 26.7 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)

scipy.convolve, edge handling : 
4.68 ms ± 9.69 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)

numpy.cumsum : 
5.31 ms ± 5.11 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)

numpy.cumsum, edge handling : 
8.52 ms ± 11.1 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)

Pandas rolling average : 
9.85 ms ± 9.63 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)

bottleneck.move_mean : 
1.3 ms ± 12.2 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)

Numpy array rolling : 
31.3 ms ± 91.9 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)

Numpy array rolling, edge handling : 
61.1 ms ± 55.9 µs per loop (mean ± std. dev. of 7 runs, 10 loops each) 
```

时序，大窗口 (n=1001)

```
Direct "for" loop : 
4.67 s ± 34 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)

List comprehension : 
4.46 s ± 14.6 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)

scipy.convolve : 
103 ms ± 165 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)

scipy.convolve, edge handling : 
272 ms ± 1.23 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)

numpy.cumsum : 
5.19 ms ± 12.4 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)

numpy.cumsum, edge handling : 
8.7 ms ± 11.5 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)

Pandas rolling average : 
9.67 ms ± 199 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)

bottleneck.move_mean : 
1.31 ms ± 15.7 µs per loop (mean ± std. dev. of 7 runs, 100 loops each) 
```

内存，小窗口 (n=3)

```
The memory_profiler extension is already loaded. To reload it, use:
  %reload_ext memory_profiler

scipy.convolve : 
peak memory: 362.66 MiB, increment: 73.61 MiB

scipy.convolve, edge handling : 
peak memory: 510.24 MiB, increment: 221.19 MiB

numpy.cumsum : 
peak memory: 441.81 MiB, increment: 152.76 MiB

numpy.cumsum, edge handling : 
peak memory: 518.14 MiB, increment: 228.84 MiB

Pandas rolling average : 
peak memory: 449.34 MiB, increment: 160.02 MiB

bottleneck.move_mean : 
peak memory: 374.17 MiB, increment: 75.54 MiB

Numpy array rolling : 
peak memory: 661.29 MiB, increment: 362.65 MiB

Numpy array rolling, edge handling : 
peak memory: 1111.25 MiB, increment: 812.61 MiB 
```

内存，大窗口 (n=1001)

```
scipy.convolve : 
peak memory: 370.62 MiB, increment: 71.83 MiB

scipy.convolve, edge handling : 
peak memory: 521.98 MiB, increment: 223.18 MiB

numpy.cumsum : 
peak memory: 451.32 MiB, increment: 152.52 MiB

numpy.cumsum, edge handling : 
peak memory: 527.51 MiB, increment: 228.71 MiB

Pandas rolling average : 
peak memory: 451.25 MiB, increment: 152.50 MiB

bottleneck.move_mean : 
peak memory: 374.64 MiB, increment: 75.85 MiB 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2018-12-12T15:20:06.230

这个使用 Pandas 的答案改编自上面，因为`rolling_mean`它不再是 Pandas 的一部分

```
# the recommended syntax to import pandas
import pandas as pd
import numpy as np

# prepare some fake data:
# the date-time indices:
t = pd.date_range('1/1/2010', '12/31/2012', freq='D')

# the data:
x = np.arange(0, t.shape[0])

# combine the data & index into a Pandas 'Series' object
D = pd.Series(x, t) 
```

现在，只需`rolling`使用窗口大小调用数据框上的函数，在下面的示例中为 10 天。

```
d_mva10 = D.rolling(10).mean()

# d_mva is the same size as the original Series
# though obviously the first w values are NaN where w is the window size
d_mva10[:11]

2010-01-01    NaN
2010-01-02    NaN
2010-01-03    NaN
2010-01-04    NaN
2010-01-05    NaN
2010-01-06    NaN
2010-01-07    NaN
2010-01-08    NaN
2010-01-09    NaN
2010-01-10    4.5
2010-01-11    5.5
Freq: D, dtype: float64 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2020-12-25T10:27:48.800

从 开始`Numpy 1.20`，[`sliding_window_view`](https://numpy.org/devdocs/reference/generated/numpy.lib.stride_tricks.sliding_window_view.html#numpy-lib-stride-tricks-sliding-window-view)提供了一种在元素窗口中滑动/滚动的方法。然后您可以单独平均的窗口。

例如，对于`4`-element 窗口：

```
from numpy.lib.stride_tricks import sliding_window_view

# values = np.array([5, 3, 8, 10, 2, 1, 5, 1, 0, 2])
np.average(sliding_window_view(values, window_shape = 4), axis=1)
# array([6.5, 5.75, 5.25, 4.5, 2.25, 1.75, 2]) 
```

* * *

注意中间结果`sliding_window_view`：

```
# values = np.array([5, 3, 8, 10, 2, 1, 5, 1, 0, 2])
sliding_window_view(values, window_shape = 4)
# array([[ 5,  3,  8, 10],
#        [ 3,  8, 10,  2],
#        [ 8, 10,  2,  1],
#        [10,  2,  1,  5],
#        [ 2,  1,  5,  1],
#        [ 1,  5,  1,  0],
#        [ 5,  1,  0,  2]]) 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2019-01-17T11:42:01.460

我觉得这可以很容易地使用[瓶颈解决](https://github.com/kwgoodman/bottleneck)

请参阅下面的基本示例：

```
import numpy as np
import bottleneck as bn

a = np.random.randint(4, 1000, size=(5, 7))
mm = bn.move_mean(a, window=2, min_count=1) 
```

这给出了沿每个轴的移动平均值。

*   “mm”是“a”的移动平均值。

*   “窗口”是要考虑的移动平均值的最大条目数。

*   “min_count”是移动均值考虑的最小条目数（例如，对于第一个元素或数组是否具有 nan 值）。

好的部分是瓶颈有助于处理 nan 值，它也非常有效。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-09-21T09:40:27.440

如果您想仔细处理边缘条件（**仅从边缘处的可用元素计算平均值**），以下函数可以解决问题。

```
import numpy as np

def running_mean(x, N):
    out = np.zeros_like(x, dtype=np.float64)
    dim_len = x.shape[0]
    for i in range(dim_len):
        if N%2 == 0:
            a, b = i - (N-1)//2, i + (N-1)//2 + 2
        else:
            a, b = i - (N-1)//2, i + (N-1)//2 + 1

        #cap indices to min and max indices
        a = max(0, a)
        b = min(dim_len, b)
        out[i] = np.mean(x[a:b])
    return out

>>> running_mean(np.array([1,2,3,4]), 2)
array([1.5, 2.5, 3.5, 4\. ])

>>> running_mean(np.array([1,2,3,4]), 3)
array([1.5, 2\. , 3\. , 3.5]) 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-05-26T21:31:04.883

所有的答案似乎都集中在预计算列表的情况上。对于实际运行的用例，数字一个一个出现，这里有一个简单的类，它提供对最后 N 个值求平均的服务：

```
import numpy as np
class RunningAverage():
    def __init__(self, stack_size):
        self.stack = [0 for _ in range(stack_size)]
        self.ptr = 0
        self.full_cycle = False
    def add(self,value):
        self.stack[self.ptr] = value
        self.ptr += 1
        if self.ptr == len(self.stack):
            self.full_cycle = True
            self.ptr = 0
    def get_avg(self):
        if self.full_cycle:
            return np.mean(self.stack)
        else:
            return np.mean(self.stack[:self.ptr]) 
```

用法：

```
N = 50  # size of the averaging window
run_avg = RunningAverage(N)
for i in range(1000):
    value = <my computation>
    run_avg.add(value)
    if i % 20 ==0: # print once in 20 iters:
        print(f'the average value is {run_avg.get_avg()}') 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-11-12T23:19:05.173

如果有人需要一个简单的解决方案，这里有一个

```
def moving_average(a,n):
    N=len(a)
    return np.array([np.mean(a[i:i+n]) for i in np.arange(0,N-n+1)]) 
```

您可以通过在中添加 step 参数来更改窗口之间的重叠`np.arange(0,N-n+1,step)`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-09-20T13:55:40.920

[talib](https://mrjbq7.github.io/ta-lib/)包含一个简单的移动平均工具，以及其他类似的平均工具（即指数移动平均）。下面将该方法与其他一些解决方案进行比较。

* * *

```
%timeit pd.Series(np.arange(100000)).rolling(3).mean()
2.53 ms ± 40.5 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)

%timeit talib.SMA(real = np.arange(100000.), timeperiod = 3)
348 µs ± 3.5 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)

%timeit moving_average(np.arange(100000))
638 µs ± 45.1 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each) 
```

* * *

一个警告是，真实的必须有元素`dtype = float`。否则会引发以下错误

> 例外：real 不是 double

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-12-04T11:54:45.233

```
for i in range(len(Data)):
    Data[i, 1] = Data[i-lookback:i, 0].sum() / lookback 
```

试试这段代码。我认为它更简单并且可以完成工作。回顾是移动平均线的窗口。

在`Data[i-lookback:i, 0].sum()`我`0`提到的数据集的第一列中，您可以放置​​您喜欢的任何列，以防您有多个列。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-02-20T18:39:07.717

> 移动平均线
> 
> 迭代器方法
> 
> *   在 i 处反转数组，并简单地从 i 到 n 取平均值。
>     
>     
> *   使用列表推导即时生成迷你数组。

```
x = np.random.randint(10, size=20)

def moving_average(arr, n):
    return [ (arr[:i+1][::-1][:n]).mean() for i, ele in enumerate(arr) ]
d = 5

moving_average(x, d) 
```

> 张量卷积

```
moving_average = np.convolve(x, np.ones(d)/d, mode='valid') 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-02-23T11:03:02.537

我使用[接受的答案](https://stackoverflow.com/questions/14313510/how-to-calculate-moving-average-using-numpy/14314054#14314054)的解决方案，稍微修改为具有与输入相同的输出长度，或`pandas`' 另一个答案的评论中提到的版本。我在这里总结了一个可重复的示例以供将来参考：

```
import numpy as np
import pandas as pd

def moving_average(a, n):
    ret = np.cumsum(a, dtype=float)
    ret[n:] = ret[n:] - ret[:-n]
    return ret / n

def moving_average_centered(a, n):
    return pd.Series(a).rolling(window=n, center=True).mean().to_numpy()

A = [0, 0, 1, 2, 4, 5, 4]
print(moving_average(A, 3))    
# [0\.         0\.         0.33333333 1\.         2.33333333 3.66666667 4.33333333]
print(moving_average_centered(A, 3))
# [nan        0.33333333 1\.         2.33333333 3.66666667 4.33333333 nan       ] 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2021-10-29T12:11:00.500

移动平均很简单：

```
def avg(x,n=1):
    return avg((x[1:]+x[:-1])/2 ,n-1) if n>1 else (x[1:]+x[:-1])/2 
```

numpy平均是：

```
def avg(x,n=1):
    return np.convolve(x, np.ones(n):Valid)/n 
```

重点是最多300个数据点 ryzen 5 5900 单核速度更快，上面那个numpy更快...

多达 5000 个数据点使用**多处理**库 24 线程（进程）ryzen 5 5900 速度更快。再次超过 numpy 更快。

使用 GPU 的 CuPy 是另一回事：

```
import cupy as cp
import numpy as np

def avgnp(x,n=1):
    return np.convolve(x,np.ones(n),mode='valid')/n
def avgcp(x,n=1):
    return cp.convolve(x,cp.ones(n)/n,mode='full')

print('Moving Average for, ')
for i in range(3,8):

    s=time.time();
    t_cpu=np.linspace(0,2*np.pi,10**i)
    x_cpu=np.sin(t_cpu)
    avgnp(x_cpu,5)
    print(10**i,'data points via Numpy(CPU):\t',time.time()-s,'*')

    time.sleep(1)

    s=time.time()
    t=cp.linspace(0,2*np.pi,10**i)
    x=cp.sin(t)
    avgcp(x,5)
    print(10**i,'data points via CuPy(GPU) :\t',time.time()-s)

    time.sleep(1) 
```

结果是：

```
Moving Average for, 
1000 data points via Numpy(CPU):     0.0005373954772949219 *
1000 data points via CuPy(GPU) :     0.00930333137512207
10000 data points via Numpy(CPU):    0.00034356117248535156 *
10000 data points via CuPy(GPU) :    0.0007426738739013672
100000 data points via Numpy(CPU):   0.0014045238494873047 *
100000 data points via CuPy(GPU) :   0.0006258487701416016
1000000 data points via Numpy(CPU):  0.014684438705444336 *
1000000 data points via CuPy(GPU) :  0.0006639957427978516
10000000 data points via Numpy(CPU): 0.1448352336883545 *
10000000 data points via CuPy(GPU) : 0.0006761550903320312 
```

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2019-07-22T20:35:16.277

我实际上想要一个与接受的答案略有不同的行为。我正在为管道构建移动平均特征提取器`sklearn`，因此我要求移动平均的输出与输入具有相同的维度。我想要的是移动平均线假设系列保持不变，即`[1,2,3,4,5]`窗口 2 的移动平均线会给出`[1.5,2.5,3.5,4.5,5.0]`.

对于列向量（我的用例），我们得到

```
def moving_average_col(X, n):
  z2 = np.cumsum(np.pad(X, ((n,0),(0,0)), 'constant', constant_values=0), axis=0)
  z1 = np.cumsum(np.pad(X, ((0,n),(0,0)), 'constant', constant_values=X[-1]), axis=0)
  return (z1-z2)[(n-1):-1]/n 
```

对于数组

```
def moving_average_array(X, n):
  z2 = np.cumsum(np.pad(X, (n,0), 'constant', constant_values=0))
  z1 = np.cumsum(np.pad(X, (0,n), 'constant', constant_values=X[-1]))
  return (z1-z2)[(n-1):-1]/n 
```

当然，不必为填充假定恒定值，但在大多数情况下这样做就足够了。

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2019-11-16T02:50:36.193

这是使用 numba 的快速实现（注意类型）。请注意，它确实包含移位的 nans。

```
import numpy as np
import numba as nb

@nb.jit(nb.float64[:](nb.float64[:],nb.int64),
        fastmath=True,nopython=True)
def moving_average( array, window ):    
    ret = np.cumsum(array)
    ret[window:] = ret[window:] - ret[:-window]
    ma = ret[window - 1:] / window
    n = np.empty(window-1); n.fill(np.nan)
    return np.concatenate((n.ravel(), ma.ravel())) 
```

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2020-05-24T23:13:51.913

通过将下面的解决方案与使用 numpy 的 cumsum 的解决方案进行比较，这个解决方案几乎花费了**一半的时间**。这是因为它不需要遍历整个数组来做 cumsum 然后做所有的减法。此外，如果数组很大并且数量很大（**可能溢出**） ，则**cumsum**可能是“**危险的”。**当然，这里也存在危险，但至少只将必要的数字加在一起。

 **```
def moving_average(array_numbers, n):
    if n > len(array_numbers):
      return []
    temp_sum = sum(array_numbers[:n])
    averages = [temp_sum / float(n)]
    for first_index, item in enumerate(array_numbers[n:]):
        temp_sum += item - array_numbers[first_index]
        averages.append(temp_sum / float(n))
    return averages 
```****

# c# - 如何正确绑定数据网格和文本框并仅在单击按钮后更新数据网格？

> ID：14313511
> 
> 赞同：3
> 
> 时间：2013-01-14T04:59:28.847
> 
> 标签：c#, wpf, xaml, mvvm

我有 WPF 应用程序并且无法绑定。我的 UI 看起来像链接上的图像。（我很抱歉没有嵌入图像，因为我是新用户并且需要获得积分才能发布图像）

[http://i.stack.imgur.com/a1koN.jpg](http://i.stack.imgur.com/a1koN.jpg)

基本上 1 个产品可以有许多定价细节。该屏幕用于从数据库中检索信息的编辑模式（为了这个示例，我只是对值进行了硬编码）。在 中选择一个项目`datagrid`将在其各自的文本框中加载信息。这目前工作正常。我唯一要修改的是更改文本框中的值时的行为，因为它`datagrid`会立即更新。`EDIT`单击按钮后是否可以仅更新数据网格？请注意，此时所做的任何更改都尚未保存在数据库中，只有在`UPDATE`单击按钮（顶部）时才会保存。

这是 XAML 文件的片段：

**数据网格**

```
<DataGrid AutoGenerateColumns="False" AlternationCount="2" Height="100" ItemsSource="{Binding ProductPrices, Mode=TwoWay}" SelectedItem="{Binding ProductPrice}" IsReadOnly="True" SelectionMode="Single" GridLinesVisibility="Horizontal">
    <DataGrid.Columns>
        <DataGridTextColumn Binding="{Binding UnitPrice, StringFormat=\{0:N\}}" Header="Unit Price" Width="100" />
        <DataGridTextColumn Binding="{Binding LowestPrice, StringFormat=\{0:N\}}" Header="Lowest Price" Width="100"/>
        <DataGridTextColumn Binding="{Binding EffectiveDate, StringFormat=\{0:d\}}" Header="Effective Date" Width="150"/>
    </DataGrid.Columns>
</DataGrid> 
```

**文本框**

```
<TextBox Grid.Column="1" Grid.Row="0" Text="{Binding Path=ProductPrice.UnitPrice, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, NotifyOnValidationError=True, ValidatesOnDataErrors=True, ValidatesOnExceptions=True, StringFormat=\{0:N\}}" Width="100" />
<TextBox Grid.Column="3" Grid.Row="0" Text="{Binding Path=ProductPrice.LowestPrice, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, NotifyOnValidationError=True, ValidatesOnDataErrors=True, ValidatesOnExceptions=True, StringFormat=\{0:N\}}" Width="100" />
<DatePicker Grid.Column="1" Grid.Row="1" Text="{Binding Path=ProductPrice.EffectiveDate, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, NotifyOnValidationError=True, ValidatesOnDataErrors=True, ValidatesOnExceptions=True}" Width="100" /> 
```

**视图模型**

```
 private Product _product;
    public Product Product
    {
        get { return _product; }
        set
        {
            _product = value;
            NotifyPropertyChanged(m => m.Product);
        }
    }

    private ProductPrice _productPrice;
    public ProductPrice ProductPrice
    {
        get { return _productPrice; }
        set
        {
            _productPrice = value;
            NotifyPropertyChanged(m => m.ProductPrice);
        }
    }

    private ObservableCollection<ProductPrice> _productPrices;
    public ObservableCollection<ProductPrice> ProductPrices
    {
        get { return _productPrices; }
        set
        {
            _productPrices = value;
            NotifyPropertyChanged(m => m.ProductPrices);
        }
    } 
```

`UpdateSourceTrigger=PropertyChanged`一定是罪魁祸首。但我仍然不知道如何解决这个案子。`MVVM`使用方法可以实现吗？

[我已经在SkyDrive](https://skydrive.live.com/?cid=974337211B5F9E8B&id=974337211B5F9E8B!109)上上传了源代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T05:38:50.200

您可以在绑定中使用 Explicit UpdateSourceTrigger，然后在单击按钮时手动调用 UpdateSource：

[触发 Button.Click 时的 XAML Binding.UpdateSourceTrigger？](https://stackoverflow.com/questions/1317706/xaml-binding-updatesourcetrigger-when-a-button-click-is-fired)

如果您想简化该过程，请为所有绑定定义一个 BindingGroup，然后在单击按钮时调用 BindingGroup 上的 UpdateSources。您可以通过简单的行为或附加属性来实现对 UpdateSources 的调用。

# java - 从java中的方法调用方法

> ID：14313512
> 
> 赞同：-2
> 
> 时间：2013-01-14T04:59:31.377
> 
> 标签：java

这是如何从java中的另一个方法正确调用一个方法吗？有人可以描述如何创建一个重载的攻击方法，允许我使用基本攻击修饰符运行攻击吗？actionPerformed 是控制以正确的 java swing 样式实例化的所有按钮的提交操作的方法。该命令取决于按钮，该程序将帮助模拟 rpg 的第一次战斗。攻击函数调用所有布尔函数来接收按钮提交结果的各种可能性。actionPerformed 函数应该调用损坏函数，该函数应该更新 Jtable 中的 hp 值。附上演示所描述功能的代码。如果有人可以帮助我，我需要一些关于代码故障排除的帮助，我将不胜感激。

```
public void actionPerformed(ActionEvent event) 
{
    String command = event.getActionCommand();

    this.getRows(table);

    rows = this.rows;

    firstRow = rows[0];

    lastRow = rows[1];

    if(command == "Shield Bash") {
        this.attack(firstRow, lastRow, command, table);
        damage = this.damage;
        this.damage(table, firstRow, damage);
    }else if(command == "Run Threw") {

    }else if(command == "React") {
        this.attack(firstRow, lastRow, command, table);
        damage = this.damage;
        this.damage(table, firstRow, damage);
    }else if (command == "Attack") {
        this.attack(firstRow, lastRow, command, table);
        damage = this.damage;
        this.damage(table, firstRow, damage);
    }else if (command == "Skill") {

    }else if (command == "Heal") {

    }else if (command == "Rest") {

    }else if (command == "Skulk") {

    }else {

    }

}

public boolean block (JTable table, int defendersRow) {
    defendersRow = this.defendersRow;
    blockChanceObject = table.getValueAt(defendersRow, 15);
    blockChance = (Integer) blockChanceObject;
    blockRoll = generator.nextInt(100) + 1;
    if(blockRoll < blockChance) {
        blocked = true;
    }
    return blocked;
}

public boolean fumble (JTable table, int attackersRow) {
     attackersRow = this.attackersRow;
     fumbleChanceObject = table.getValueAt(attackersRow, 7);
     fumbleChance = (Integer) fumbleChanceObject;
     int fumbleRoll = generator.nextInt(100) + 1;
     if (fumbleRoll < fumbleChance) {
         fumbled = true;
     }
     return fumbled;

}

public boolean dodge (JTable table, int defendersRow) {

    defendersRow = this.defendersRow;

    dodgeChanceObject = table.getValueAt(defendersRow,12);

    dodgeChance = (Integer) dodgeChanceObject;

    dodgeRoll = generator.nextInt(100) + 1;

    if (dodgeRoll < dodgeChance) {
        dodged = true;
    }

    return dodged;

}

public boolean critical (JTable table, int attackersRow, int attackRoll) {
    attackersRow = this.attackersRow;
    attackRoll = this.attackRoll;
    criticalChanceObject = table.getValueAt(attackersRow, 8);
    criticalChance = (Integer) criticalChanceObject;
    if (attackRoll >= criticalChance) {
        criticaled = true;
    }
    return criticaled;
}

public int[] getRows(JTable table) {    
    rows[0] = table.getSelectedRow();
    rowCount = table.getSelectedRowCount() - 1;
    rows[1] = rows[0] + rowCount;
    return rows;
}

public int attack(int firstRow, int lastRow, String command, JTable table) {
    command = this.command;
    firstRow = this.firstRow;
    lastRow = this.lastRow;
    table = this.table;

    if (command == "Bludgeon" || command == "React" || command == "ShieldBash") {
        attackersRow = this.lastRow;
        defendersRow = this.firstRow;
    }else if(command == "Attack" || command == "Skill") {
        attackersRow = this.firstRow;
        defendersRow = this.lastRow;
    }else {

    }

    this.fumble(table, attackersRow);
    if (fumbled == true) {
        outputString = "fumbled";
    }

    attackRoll = generator.nextInt(100) + 1;
    this.critical(table, attackersRow, attackRoll);
    if (criticaled == true) {
        outputString = "criticaled";
    }
    this.dodge(table, defendersRow);
    if (dodged == true) {
        outputString = "dodged";
    }
    this.block(table, defendersRow);
    if (blocked == true) {
        outputString = "blocked";
    }
    defenseRoll = generator.nextInt(100) + 1;
    attackBaseObject = table.getValueAt(attackersRow, 6);
    defenseBaseObject = table.getValueAt(defendersRow, 11);
    attackBase = (Integer) attackBaseObject;
    defenseBase = (Integer) defenseBaseObject;
    attack = attackRoll + attackBase;
    defense = defenseRoll + defenseBase;
    minDamageObject = table.getValueAt(attackersRow, 9);
    minDamage = (Integer) minDamageObject;
    maxDamageObject = table.getValueAt(attackersRow, 10);
    maxDamage = (Integer) maxDamageObject;
    damage = generator.nextInt((maxDamage - minDamage))+minDamage;
    if (criticaled == true) {
        damage = maxDamage * 2;
    }else if (attack >= (defense + 50)) {
        damage = damage * 2;
    }else if (attack >= defense) {
        damage = damage;
    }else {
        damage = 0;
    }
    this.outputSelection(outputString, attackersRow, defendersRow, table, command, damage);
    return damage;
}

private void damage(JTable table, int defendersRow, int damage) {
    damage = this.damage;
    defendersRow = this.defendersRow;
    hpObject = table.getValueAt(defendersRow, 3);
    hp = (Integer) hpObject;
    hp = hp - damage;
    table.setValueAt(hp, defendersRow, 3);
}

private void outputSelection(String outputString, int attackersRow, int defendersRow, JTable table, String command, int damage) { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T05:03:56.090

一些快速观察 - 不要使用 == 比较字符串。使用 .equals 方法。其次，您似乎没有遵循面向对象的范例。您可能应该创建几个类，正确设计它们，然后开始您的实现。

# php - 通过 jquery jeditable 插件代码点火器向控制器发送数据

> ID：14313515
> 
> 赞同：1
> 
> 时间：2013-01-14T04:59:41.997
> 
> 标签：php, jquery, ajax, codeigniter, jeditable

我有一个数据显示在我的视图页面的表格中.. 我正在使用一个 jeditable 插件，如果我点击让我们说一些文本它变得可编辑，然后我想将新的编辑值发送到控制器。我不知道如何将新值发送到控制器..这是我正在做的，但它不起作用。这是我的视图页面..如果可以通过 ajax 完成，那么它对我来说会更好..

```
 <?php foreach($records as $row){?>
    <tr>
    <td class = "click"><?php echo $row->cat_name; ?>  </td> 
```

我的 javascript

```
 <script type="text/javascript">
      $(document).ready(function() {
       $('.click').editable('<?php echo site_url('categoryController/editCategory');?>',
           {

         });

            }); 
```

# javascript - twitter bootstrap“.input-append”不适用于popover

> ID：14313517
> 
> 赞同：3
> 
> 时间：2013-01-14T05:00:10.157
> 
> 标签：javascript, twitter-bootstrap

当我同时使用 input append 和 popover 时 popover 不起作用，但是当我删除附加的输入（通过删除 input-append 类）时它可以工作。这是我的代码：

```
<span class="input-append">

                <button class="span2" id="filter" type="text" name="filter" placeholder="Type your filter">itest</button>
          <button class="btn" id="filterSubmits">Go</button>
</span>
<script>
jQuery(function() {

        $('#filter').attr('data-title', 'Search tips').
            attr('data-content', 'Search format: -|+').
            attr('data-placement', 'bottom').
            attr('data-trigger', 'focus');

        $('#filter').popover('show');
})
</script> 
```

这里有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T08:50:31.903

如果您查看 input-append 的 css，您会看到它将 font-size 设置为 0。添加以下样式将解决您的问题：

```
.popover {
    font-size: 14px;
} 
```

# android - 在具有一定半径的圆形路径上移动 ImageView

> ID：14313518
> 
> 赞同：3
> 
> 时间：2013-01-14T05:00:16.750
> 
> 标签：android, animation, android-animation

我一直在阅读与动画相关的所有帖子，但无法找到一种方法来实现我被问到的内容。

我被要求在具有一定半径的圆形路径上移动图像，例如这里 [http://www.4shared.com/photo/RtYILTLO/circularpath.html](http://www.4shared.com/photo/RtYILTLO/circularpath.html)

我掌握了动画的基础知识，仅此而已。任何类型的教程或提示都将受到热烈欢迎。

谢谢

**更新 1：**

我正在浏览一个示例，它可以围绕某个路径为视图设置动画，并找到了这个 [http://code.google.com/p/android-path-animation/](http://code.google.com/p/android-path-animation/)

此代码围绕复杂的曲线路径移动按钮，我尝试用它制作一个圆圈但徒劳无功，有人可以帮我修改一下此代码，以便按钮在圆形路径中移动吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-09-15T10:01:52.177

首先请更新[此链接](http://www.4shared.com/photo/RtYILTLO/circularpath.html)它不起作用！

要在 lolliPop 之后制作圆形动画路径，请按照谷歌的[建议](https://developer.android.com/training/animation/reposition-view#UsePath)使用此代码：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
  Path path = new Path();
  path.arcTo(0f, 0f, 1000f, 1000f, 0f, 359f, true); //with first four parameters you determine four edge of a rectangle by pixel , and fifth parameter is the path'es start point from circle 360 degree and sixth parameter is end point of path in that circle
  ObjectAnimator animator = ObjectAnimator.ofFloat(view, View.X, View.Y, path); //at first parameter (view) put the target view
  animator.setDuration(2000);
  animator.start();
} 
```

# c#-4.0 - 隐藏表单加载进度条

> ID：14313519
> 
> 赞同：0
> 
> 时间：2013-01-14T05:00:21.100
> 
> 标签：c#-4.0

我正在创建 ac# 应用程序。

我想隐藏表单加载的进度条。所以我使用这段代码。

```
private void Form1_Load(object sender, EventArgs e)
{
   progressBar1.Visible = false;
} 
```

但是进度条仍然显示在表单加载中。

有什么帮助吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T05:13:12.037

我们不能尝试将进度条的可见性默认设置为隐藏状态，并在应用程序中需要它时让它可见吗？

# android - Android中的异步任务

> ID：14313526
> 
> 赞同：2
> 
> 时间：2013-01-14T05:01:53.870
> 
> 标签：android, android-listview, android-asynctask, arrays

我的 ArrayAdapter 现在出现问题...我收到错误“构造函数 ArrayAdapter(VideoPlay.ShowTitlesTask, int, int, ArrayList) 未定义。” 我究竟做错了什么？

问题出在 ShowTitlesTask 类中

```
package com.aer.illbehonest;

import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;
import java.util.concurrent.ExecutionException;

import net.sf.json.JSONArray;
import net.sf.json.JSONObject;
import net.sf.json.JSONSerializer;

import org.apache.commons.io.IOUtils;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class VideoPlay extends Activity {   
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_video_play);

        new ShowTitlesTask().execute("");
    }

    class ShowTitlesTask extends AsyncTask<String, Void, ArrayList<String>> {

    ArrayList<String> titlesList;

    @Override
protected ArrayList<String> doInBackground(String... args) {

    URL jsonURL = null;
    try {
           jsonURL = new URL("http://gdata.youtube.com/feeds/api/users/illbehonest/uploads?v=2&alt=jsonc");
        } catch (MalformedURLException e3) {
            e3.printStackTrace();
        }
            URLConnection jc = null;
            try {
                jc = jsonURL.openConnection();
            } catch (IOException e2) {
                e2.printStackTrace();
            }
            InputStream is = null;
            try {
                is = jc.getInputStream();
            } catch (IOException e1) {
                e1.printStackTrace();
            }
            String jsonTxt = null;
            try {
                jsonTxt = IOUtils.toString(is);
            } catch (IOException e) {
                e.printStackTrace();
            }

            JSONObject json = (JSONObject) JSONSerializer.toJSON(jsonTxt);

            JSONObject jdata = json.getJSONObject("data");

            JSONArray jentry = jdata.getJSONArray("items");
            for (int entryNumber = 0; entryNumber<=25; entryNumber++){
                    JSONObject entry = jentry.getJSONObject(entryNumber);
                    titlesList.add(entry.getString("title"));
            }

            return titlesList;
    }
    protected void onPostExecute(ArrayList<String> result) {
        ListView listView = (ListView)VideoPlay.this.findViewById(R.id.videolist);

        ArrayAdapter<String> adapter = new ArrayAdapter<String> (this,
                android.R.layout.simple_list_item_1, android.R.id.text1, titlesList);
        titlesList.setAdapter(arrayAdapter);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T05:10:15.880

您将需要从 doInBackground 返回一个 ArrayList 并将 ArrayList 添加到 onPostExecute 中的 ListView，因为当 doInBackground 执行完成时会调用此方法。创建您的 AsyncTask 为：

```
 private class GetTitlesTask extends AsyncTask<String, Void, ArrayList<String>> {
   Activity activity;
        ArrayList<String> titlesList;
       public GetTitlesTask(Activity activity){
           this.activity=activity;
       }
          @Override
          protected void onPreExecute() {
            // show progress bar here
          }
        @Override
        protected ArrayList<String> doInBackground(String... args) {

             titlesList=new ArrayList<String>;

              // get titles here and add to titlesList ArrayList

             return titlesList; //<< return titlesList ArrayList
         }
        @Override
         protected void onPostExecute(ArrayList<String> result) {

            // set result ArrayList as datasouce to Adapter here
             ListView listview=
                (ListView)activity.findViewById(R.id.videolist);
         }
     } 
```

并从 UI 启动这个 GetTitlesTask AsyncTask：

```
new GetTitlesTask(Your_Current_Activity.this).execute(""); 
```

要了解有关 AsyncTask 的更多信息，请参阅

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T05:10:49.010

当您使用时，您应该从方法`AsyncTask`更新您的 ui 。`onPostExecute`在此处设置适配器，您就准备好了。

```
protected void onPostExecute(Void result) {
titlesList.setAdapter(arrayAdapter);                      
}; 
```

# java - 返回一个通用的空列表

> ID：14313528
> 
> 赞同：1
> 
> 时间：2013-01-14T05:02:21.613
> 
> 标签：java, generics

如何返回使用泛型作为空列表的自定义对象？

我扩展了 List 接口并创建了我自己的自定义类型

```
public interface MyCustomList<T>
  extends List<T>
{ 
```

在一个类中，我有一个返回自定义列表的方法，但我总是以编译器错误告终。基本上这个方法的默认实现应该返回一个空列表，但我无法让它工作，因为我遇到了以下错误。'不兼容的类型'

```
public MyCustomList<MyCustomBean> getCodes(String code)
{
    return  Collections.<MyCustomList<MyCustomBean>>emptyList();
} 
```

发回“通用”空列表实现的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T05:06:33.810

敷衍的 impl 有什么问题吗？

```
class MyCustomListImpl<T> extends ArrayList<T> implements MyCustomList<T> {}

return new MyCustomListImpl<MyCustomBean>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T05:21:43.207

`Collections.emptyList`返回 a `List<T>`，其实现是[隐藏](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/Collections.java#Collections.EmptyList)的。由于您的`MyCustomList`界面是 的*扩展*，`List`因此无法在此处使用该方法。

为了让它工作，你需要实现一个 empty `MyCustomList`，就像核心 API`Collections`实现一个空`List`实现一样，然后使用它。例如：

```
public final class MyEmptyCustomList<T> extends AbstractList<T> implements MyCustomList<T> {

    private static final MyEmptyCustomList<?> INSTANCE = new MyEmptyCustomList<Object>();

    private MyEmptyCustomList() { }

    //implement in same manner as Collections.EmptyList

    public static <T> MyEmptyCustomList<T> create() {

        //the same instance can be used for any T since it will always be empty
        @SuppressWarnings("unchecked")
        MyEmptyCustomList<T> withNarrowedType = (MyEmptyCustomList<T>)INSTANCE;

        return withNarrowedType;
    }
} 
```

或者更准确地说，将类本身隐藏为实现细节：

```
public class MyCustomLists { //just a utility class with factory methods, etc.

    private static final MyEmptyCustomList<?> EMPTY = new MyEmptyCustomList<Object>();

    private MyCustomLists() { }

    private static final class MyEmptyCustomList<T> extends AbstractList<T> implements MyCustomList<T> {
        //implement in same manner as Collections.EmptyList
    }

    public static <T> MyCustomList<T> empty() {
        @SuppressWarnings("unchecked")
        MyCustomList<T> withNarrowedType = (MyCustomList<T>)EMPTY;
        return withNarrowedType;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T05:04:51.003

在您的情况下，在您正确实现您的接口之前，这是不可能的`MyCustomList`。

**UPD：** `Collections.emptyList()`返回接口的特殊实现，`List`当然不能转换为你的`MyCustomList`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T05:29:42.277

你不能`Collections.emptyList()`用于这个目的。这是类型安全的，似乎可以满足您的需求！

# node.js - 在 Express 中自动记录 HTTP 500 响应？

> ID：14313530
> 
> 赞同：4
> 
> 时间：2013-01-14T05:02:49.297
> 
> 标签：node.js, express

我的 Express 应用程序中的一个常见模式是在我的所有路线中包含以下内容：

```
//...code which could result in an err
if (!err) return res.send(200);
console.log(err); // Would prefer to omit this line
res.send(500); 
```

现在，我需要写下`console.log(err)`我所有的路线。我宁愿在`err`每次发送 500 时自动记录变量。有没有办法连接到 Express 并自动记录调用堆栈和/或`err`所有 500 个响应？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T05:16:00.877

根据您的解释，您似乎在所有路线中都包含错误处理。您可能应该创建一个全局拦截器错误处理程序，它可以为您执行日志记录，并且如果您有 500 错误类型，它仍然是基本错误处理程序。

```
//if your express var is app

var errorHandler = function(err, req, res, next){
   console.log(err.stack);
   res.send(500);
   // or you could call res.render('error'); if you have a view for that.
};

app.use(app.router); // this has to come before your interceptors
app.use(notFound);  // your page not found interceptor
app.use(errorHandler); 
```

# php - 更新到 php 5.4.9 后出现静态标准错误

> ID：14313533
> 
> 赞同：6
> 
> 时间：2013-01-14T05:03:46.833
> 
> 标签：php, cakephp, strict

将 php 更新到 5.4 版后出现以下错误

```
Strict Standards: Non-static method Debugger::invoke() should not be called statically, assuming $this from incompatible context in /usr/share/php/cake/libs/debugger.php on line 575 
Strict Standards: Non-static method Debugger::getInstance() should not be called statically, assuming $this from incompatible context in /usr/share/php/cake/libs/debugger.php on line 575 
```

我已经尝试过以下解决方案

[在 CakePHP 中禁用错误​​报告时出错](https://stackoverflow.com/questions/8075826/error-while-disabling-error-reporting-in-cakephp)

[安装 php5-curl 包后 Cakephp 不起作用](https://stackoverflow.com/questions/9905706/cakephp-doesnt-work-after-installing-php5-curl-package)（由于我已经烘焙了我的项目，因此无法找到“Cake”文件夹）

[Wampserver cakephp 1.3 严格标准错误](https://stackoverflow.com/questions/12565328/wampserver-cakephp-1-3-strict-standards-error)

[如何消除 php5 Strict 标准错误？](https://stackoverflow.com/questions/12229113/how-to-eliminate-php5-strict-standards-errors)

[PHP 5 禁用严格标准错误](https://stackoverflow.com/questions/1248952/php-5-disable-strict-standards-error)

[https://stackoverflow.com/questions/11799085/turn-off-php-strict-standards?lq=1](https://stackoverflow.com/questions/11799085/turn-off-php-strict-standards?lq=1)（无法关闭错误）

每次更改后清除蛋糕缓存、Web 浏览器缓存、cookie 并重新启动服务器。甚至在私人浏览和chrome、firefox中也试过。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-26T04:31:23.037

我相信这是因为这个应用程序是基于旧版本的 CakePHP 构建的，它可能使用了一些不推荐使用的功能。如果您（或其他人）可以将 Cake 升级到新的稳定分支，那就太棒了。到目前为止，在您的 core.php 中尝试此操作，您可以从错误报告中删除 E_STRICT：

即去 app/Config/core.php 找到

```
Configure::write('Error', array(
    'handler' => 'ErrorHandler::handleError',
    'level' => E_ALL & ~E_DEPRECATED,
    'trace' => true
)); 
```

将其替换为

```
Configure::write('Error', array(
    'handler' => 'ErrorHandler::handleError',
    'level' => E_ALL & ~E_STRICT & ~E_DEPRECATED,
    'trace' => true
)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-21T08:43:02.407

更改 error_reporting 函数确实可以解决此问题。但是，cakephp 似乎在几个地方设置了这些标志，这就是为什么该解决方案可能对您不起作用的原因（我也经历过同样的事情）

在源代码范围内搜索“error_reporting”，您会发现它在多个文件中使用。尽可能添加标志“~E_STRICT”。例如：

```
error_reporting(E_ALL & ~E_STRICT & ~E_DEPRECATED); 
```

You'll see it in places like /cake/bootstrap.php, /cake/libs/configure.php, /cake/console/cake.php, etc. I just changed them all to exclude E_STRICT and the problem was fixed.

# joomla - joomla 2.5 中未显示的文章

> ID：14313536
> 
> 赞同：0
> 
> 时间：2013-01-14T05:04:18.407
> 
> 标签：joomla, joomla2.5, joomla-extensions

我正在尝试将 joomla 与 yoo 催化剂主题一起使用。我试图在我的页面上有一篇文章。但问题是我的主题中没有显示该文章。但是当我选择默认主题时，它会显示准确的结果。这个主题有什么我缺少的设置吗？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T05:27:03.367

如果相当简单，请考虑答案。您提供的链接：

[http://www.2ademo.com/MedFit2.5/index.php?option=com_helloworld&view=helloworld](http://www.2ademo.com/MedFit2.5/index.php?option=com_helloworld&view=helloworld)

是一个虚拟组件，因此是**“option=com_helloworld&view=helloworld”**，而不是实际文章。当我访问该网站时，我点击了“隐私政策”链接，该链接将我引导至以下页面：

[http://www.2ademo.com/MedFit2.5/index.php?option=com_content&view=article&id=56&Itemid=106](http://www.2ademo.com/MedFit2.5/index.php?option=com_content&view=article&id=56&Itemid=106)

这篇文章在这里显示得很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T07:22:19.960

@user1929236 这不是实际问题，它实际上是由模板配置引起的。由于您在模板配置中的主页上设置了隐藏内容，因此 url 中的内容也被隐藏（没有 itemid 的 url 将使用与主页相同的模板配置文件）。

# python - 在 django python 中为多个站点使用相同的库存

> ID：14313538
> 
> 赞同：0
> 
> 时间：2013-01-14T05:04:35.553
> 
> 标签：python, django, inventory

嗨，有没有一种方法可以让我在**django**中为**多个****站点* 使用***相同**的**库存** 。我在 django 中使用带有夹层的墨盒。我需要使用单个墨盒创建一个多站点项目。

 ****** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:48:11.683

我认为您可以尝试将[多个数据库](https://docs.djangoproject.com/en/1.4/topics/db/multi-db/)与路由器一起使用：

```
DATABASES = {
    'default': {
        ...
    },
    'cartridge': {
        'NAME': 'cartridge_data',
         ...
    }
}

class CartridgeRouter(object):
    def db_for_read(self, model, **hints):
        if model._meta.app_label == 'cartridge':
            return 'cartridge'
        return 'default'

    def db_for_write(self, model, **hints):
        if model._meta.app_label == 'cartridge':
            return 'cartridge'
        return 'default' 
```*****

# javascript - Backbone - 插入 JavaScript 以操作 DOM 的最佳位置是什么

> ID：14313546
> 
> 赞同：0
> 
> 时间：2013-01-14T05:05:42.277
> 
> 标签：javascript, dom, backbone.js

我希望 JavaScript 与我的 Backbone 模板紧密集成，并且作为视图引用要使用的模板，我相信这将是存储 JavaScript 的最佳位置，对吧？但是怎么做？

特别是，我有 JavaScript 在视图呈现并准备好（不是事件）时设置 DOM。我最初在模板中设置了这个脚本，但这只是在首次加载应用程序时触发，当您通过 Backbone 的路由器导航回视图时，没有触发 JavaScript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T05:25:19.553

模板并不意味着存储您的 JavaScript - 它们应该是由您的视图呈现的愚蠢的 html 模板。

当您从视图加载模板时，该视图需要与所有将与您的应用程序交互的 DOM 元素绑定。

如果您的视图只有到 DOM 的绑定，这是一种很好的做法，因此它可以触发内部事件。

然后，您可以创建“控制器”来监听您的视图实例并与之交互，触发方法以在 DOM 中进行一些更改，或者准备集合和模型以供您的视图使用。

但是，您可以使用许多其他库来组织代码逻辑加载。

我喜欢[requirejs](http://requirejs.org/)，但是[commonjs](http://wiki.commonjs.org/wiki/Modules)有很多有用的选项。

将 JavaScript 放入模板中就像将其与 HTML 混合在一起。这不是一个好主意，因为您将逻辑与结构混合在一起，并且您的应用程序一旦增长就会变得难以维护。

我用 MVC 风格组织我的代码，这使得开发和测试大型应用程序变得简单。例如，如果我想要模型/集合，它们位于 MODEL/COLLECTION 文件夹中，CONTROLLER 文件夹将保留我的应用程序的逻辑部分，VIEW 文件夹将保留与 DOM 交互的文件，就像 Django 我添加了一个模板模板的文件夹，尽可能简单。

只是为了解释你的问题：

当您使用脚本加载模板时，您将执行该脚本。在此之后，您的模板将被存储在内存中，这意味着您的脚本将永远不会再次被触发。你可以修复它，但你会做错事。通过在 Backbone 中绑定视图渲染方法，可以在渲染之后触发您的脚本。

# html - 为什么我的图像没有粘在一起？

> ID：14313549
> 
> 赞同：4
> 
> 时间：2013-01-14T05:06:19.620
> 
> 标签：html, css

我有这个简单的 HTML / CSS

```
<div class="image-group">
  <img src="http://placehold.it/80x80" />
  <img src="http://placehold.it/120x120" />
  <img src="http://placehold.it/80x80" />
</div>

.image-group img {
  margin: 0;
  padding: 0;
} 
```

[JSFiddle](http://jsfiddle.net/QrKDj/)

为什么图像没有粘在一起？我使用 Chrome 的 Inspector 检查元素，它在图像之间没有显示任何内容，但它们是间隔开的。

我可以通过应用负边距让它们粘在一起，但据我说，它们无论如何都应该粘在一起。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T05:08:30.763

您的 html 代码中有空格。试试下面

```
<div class="image-group">
    <img src="http://placehold.it/80x80" /><img src="http://placehold.it/120x120" /><img src="http://placehold.it/80x80" />
</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T05:14:06.153

查看这篇博客文章，了解如何处理具有连续内联块元素（例如图像）的空格。

[http://css-tricks.com/fighting-the-space-between-inline-block-elements/](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)

# android - 在 Android 中从 SQLITE 读取总是返回 0 行

> ID：14313558
> 
> 赞同：2
> 
> 时间：2013-01-14T05:07:45.313
> 
> 标签：android, sqlite, android-sqlite

我正在尝试在 Android 中首次使用 Sqlite，但结果好坏参半。

在我的第一个活动中，我使用这样的代码将许多行加载到表中

```
public void addTableStatus(String tableId, String name) {

    Log.d("DB", "Before Insert :: " + "Id=[" + tableId + "]");

    if (sd == null) {
        Log.d("DB", "Get Database");
        sd = getWritableDatabase();
    }

    ContentValues cv = new ContentValues();
    cv.put(V2VocabsTable.ID, tableId);
    cv.put(V2VocabsTable.NAME, name);
    cv.put(V2VocabsTable.LOADED, "NO");

    long result = sd.insert(V2VocabsTable.TABLE_NAME, null, cv);

    Log.d("DB", "After Insert :: " + result);

    String query = "SELECT * from " + V2VocabsTable.TABLE_NAME ;

    Log.i("DB2", "Query    : " + query);
    Cursor mCursor = sd.rawQuery(query, null);
    Log.i("DB2", "Result : " + mCursor.getCount());
} 
```

日志文件显示的数据如下：

```
01-13 21:54:09.788: D/DB(22744): Before Insert :: Id=[ZU055]
01-13 21:54:09.798: D/DB(22744): After Insert :: 129
01-13 21:54:09.798: I/DB2(22744): Query    : SELECT * from v2TableStatus
01-13 21:54:09.798: I/DB2(22744): Result : 129
01-13 21:54:09.798: D/DB(22744): ZU055 :: WaitingListType-v1.0.xml
01-13 21:54:09.798: D/DB(22744): Before Insert :: Id=[ZU056]
01-13 21:54:09.798: D/DB(22744): After Insert :: 130
01-13 21:54:09.798: I/DB2(22744): Query    : SELECT * from v2TableStatus
01-13 21:54:09.798: I/DB2(22744): Result : 130
01-13 21:54:09.798: D/DB(22744): ZU056 :: DCRConsentToShareIndicator-v1.0.xml 
```

但是，当我尝试在另一个活动中读取表格时，表格中似乎没有任何数据。我执行相同的查询（作为测试）并且总是得到 0 行。

```
public void test(String tableName) {

    if (sd == null) {
        sd = getWritableDatabase();
    }

    tableName = tableName.substring(5).trim();

    String query;

    Log.i("DB_", "Test for : [" + tableName + "]");

    query = "SELECT * from " + V2VocabsTable.TABLE_NAME ;

    Log.i("DB2", "Query    : " + query);
    Cursor mCursor = sd.rawQuery(query, null);
    Log.i("DB2", "Result : " + mCursor.getCount());
}

01-13 21:54:18.838: I/DB_(22744): Test for : [0136]
01-13 21:54:18.838: I/DB2(22744): Query    : SELECT * from v2TableStatus
01-13 21:54:18.838: I/DB2(22744): Result : 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:01:27.860

我的错误，我的 dbHelper 类在启动时错误地清除了表。因此，当它在第二个活动中启动时，它会从第一个活动中删除所有放置在其中的内容。

# sql - 将空值设置为 0，然后在运算符中使用 0？

> ID：14313561
> 
> 赞同：1
> 
> 时间：2013-01-14T05:08:22.730
> 
> 标签：sql

所以我有下面的代码

```
SELECT PICK_SO_NUMBER, CUSTOMER, SO_PRODUCT, DO_QUANTITY, DO_PACKING, DO_DATE,
COALESCE(INVOICED_QTY, 0) AS INVOICED_QTY, 
DO_QUANTITY-INVOICED_QTY AS NOT_INVOICED, 
INVOICE_PACKING 
FROM VW_TRAFFIC_PO_SIDE
WHERE  DO_QUANTITY > INVOICED_QTY OR (INVOICED_QTY IS NULL AND DO_QUANTITY IS NOT NULL) 
```

合并下面的行，假设从 INVOICED_QTY 中减去 DO_QUANTITY，但是当 INVOICED_QTY 为 NULL 时，它不再减去 0，而是减去 null，因此新列返回 null，其中 INVOICED_QTY 为 null

我尝试了多种方法：尝试合并到一个案例，将合并写为 INVOICED，然后在减法表达式中使用 INVOICED，我尝试在减法的同一行中使用合并（中间没有逗号，我觉得这是解决方案效果最好，但无法编译）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T05:10:41.247

你不能`ALIAS`在`WHERE`子句上使用

```
SELECT  PICK_SO_NUMBER, 
        CUSTOMER, 
        SO_PRODUCT, 
        DO_QUANTITY, 
        DO_PACKING, 
        DO_DATE,
        COALESCE(INVOICED_QTY, 0) AS INVOICED_QTY, 
        DO_QUANTITY-INVOICED_QTY AS NOT_INVOICED, 
        INVOICE_PACKING 
FROM    VW_TRAFFIC_PO_SIDE
-- note that INVOICE_QTY in WHERE  DO_QUANTITY > INVOICED_QTY
-- does not compare the result of COALESCE(INVOICED_QTY, 0)
-- but to the original value of INVOICE_QTY
WHERE  DO_QUANTITY > COALESCE(INVOICED_QTY, 0) OR 
        (INVOICED_QTY IS NULL AND DO_QUANTITY IS NOT NULL) 
```

原因如下：

*   FROM 子句
*   WHERE 子句
*   GROUP BY 子句
*   HAVING 子句
*   选择子句
*   ORDER BY 子句

该`WHERE`子句位于`SELECT`（*设置 ALIAS 的地方*）子句之后。

但如果您真的想使用该别名，请将其包装在子查询中，例如

```
SELECT  *
FROM
(
    SELECT  PICK_SO_NUMBER, 
            CUSTOMER, 
            SO_PRODUCT, 
            DO_QUANTITY, 
            DO_PACKING, 
            DO_DATE,
            COALESCE(INVOICED_QTY, 0) AS INVOICED_QTY, 
            DO_QUANTITY-INVOICED_QTY AS NOT_INVOICED, 
            INVOICE_PACKING 
    FROM    VW_TRAFFIC_PO_SIDE
) s
WHERE    DO_QUANTITY > INVOICED_QTY OR 
        (INVOICED_QTY IS NULL AND DO_QUANTITY IS NOT NULL) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T05:12:40.413

当您在选择列表和 WHERE 子句中使用相同的别名“invoiced_qty”时，它会变得混乱。减法中的值是原始列值，而不是来自前一个选择列表项的合并值。WHERE 子句也是如此。

```
SELECT PICK_SO_NUMBER, CUSTOMER, SO_PRODUCT, DO_QUANTITY, DO_PACKING, DO_DATE,
       COALESCE(INVOICED_QTY, 0) AS INVOICED_QTY, 
       DO_QUANTITY - COALESCE(INVOICED_QTY, 0) AS NOT_INVOICED, 
       INVOICE_PACKING 
  FROM VW_TRAFFIC_PO_SIDE
 WHERE DO_QUANTITY > INVOICED_QTY
    OR (INVOICED_QTY IS NULL AND DO_QUANTITY IS NOT NULL) 
```

# asp.net-mvc-3 - 实体在同时的 AJAX 帖子上失败

> ID：14313562
> 
> 赞同：0
> 
> 时间：2013-01-14T05:08:25.117
> 
> 标签：asp.net-mvc-3, entity-framework, asp.net-mvc-4, linq-to-entities, entity-framework-5

我有一个基于 Jquery Droppable/Sortable 更新数据库的操作。第一个 AJAX 帖子工作正常，但第二个给我错误：

```
 New transaction is not allowed because there are other 
threads running in the session. 
```

它被发布到同一控制器上的 2 个单独的操作，在控制器中使用相同的 UnitOfWork。不知道我必须做什么来解决这个问题。

编辑：这些是被调用的两种服务方法：

```
public void   NavItemSort(List<string> orderArray, string navID, string subNavID)
{

    var newOrderArray = orderArray.Where(s => !string.IsNullOrWhiteSpace(s)).ToList();

    var orderArrayIDs = newOrderArray.Select(x => x.Replace("ContentItem", "")).ToList();

    var itemToBeSorted = Convert.ToInt32(orderArrayIDs.FirstOrDefault());

    var itemContext = cmsUnitOfWork.NavigationItems.Find().Where(x => x.ID == itemToBeSorted).ToList().FirstOrDefault();

    var currentSortOrder = cmsUnitOfWork.NavigationItems.Find()
                                                        .Where(x => x.NavID == itemContext.NavID && 
                                                        (itemContext.ParentID == null) ? x.ParentID == null :  
                                                        x.ParentID == itemContext.ParentID).ToList();

    var existingItems = currentSortOrder.Select(x => x.ID).ToList();

    List<string> existingItemsString = existingItems.ConvertAll<string>(x => x.ToString()).ToList();

    var newNavItemID = existingItemsString.Except(orderArray).FirstOrDefault();

    var currentSortOrderExcept = currentSortOrder.Where(x => x.ID != Convert.ToInt32(newNavItemID));

    foreach (var x in currentSortOrderExcept)
        {
            int sortOrderInt = orderArrayIDs.IndexOf(orderArrayIDs.Where(z => int.Parse(z) == x.ID).ToList().FirstOrDefault()) + 1; 

            NavigationItem navigationItem = new NavigationItem()
            {
                HasChild = x.HasChild,
                Level = x.Level,
                NavID = x.NavID,
                ID = x.ID,
                ParentID = x.ParentID,
                PageID = x.PageID,
                URL = x.URL,
                Title = x.Title,
                SortOrder = sortOrderInt,

            };

            if (navigationItem.SortOrder != null && navigationItem.SortOrder != 0)
            {
                cmsUnitOfWork.NavigationItems.Update(x, navigationItem);

            }

        }
        cmsUnitOfWork.Commit();
}
public void NavItemAdd(List<string> orderArray, string NavID, string subNavID){

    var newOrderArray = orderArray.Where(s => !string.IsNullOrWhiteSpace(s)).ToList();
    var orderArrayIDs = newOrderArray.Select(x => x.Replace("ContentItem", "")).ToList();

    NavID = NavID.Replace("nav", "");

    int NavIDInt = int.Parse(NavID);
    int subNavIDInt = int.Parse(subNavID);

    var existingNavItems = cmsUnitOfWork.NavigationItems.Find().Where(x => x.NavID == NavIDInt && x.ParentID == subNavIDInt).ToList();

    int currentSortOrder = 0;

    if (existingNavItems.Count() != 0)
    {
        currentSortOrder = existingNavItems.Max(x => x.SortOrder);
    }

    var existingItems = existingNavItems.Select(x => x.ID).ToList();

    List<string> existingItemsString = existingItems.ConvertAll<string>(x => x.ToString()).ToList();

    var newNavItemID = orderArray.Except(existingItemsString).FirstOrDefault();
    int newNavIDInt = int.Parse(newNavItemID);

    var newNavItemList = cmsUnitOfWork.NavigationItems.Find().Where(x => x.ID == newNavIDInt).ToList();

    var newNavItem = newNavItemList.FirstOrDefault();

    var parentNav = cmsUnitOfWork.NavigationItems.Find().Where(x => x.ID == subNavIDInt).ToList().FirstOrDefault();

    NavigationItem navigationItemUpdated = new NavigationItem()
    {
        ID = newNavItem.ID,
        Level = 2,
        NavID = NavIDInt,
        PageID = newNavItem.PageID,
        Title = newNavItem.Title,
        URL = newNavItem.URL,
        ParentID = subNavIDInt,
        SortOrder = currentSortOrder + 1
    };

    cmsUnitOfWork.NavigationItems.Update(newNavItem, navigationItemUpdated);
    cmsUnitOfWork.Commit();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:05:42.243

我猜你是针对那个上下文启动了一个事务，你从不处理它，也不提交它。只是猜测，因为您没有丢失任何代码（请发布代码）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:29:54.733

也许您已将 cmsUnitOfWork 声明为静态变量？必须在每个请求上创建和销毁上下文

# python - 如何解决大量 Lucene 索引写入中的 MergeException？

> ID：14313568
> 
> 赞同：0
> 
> 时间：2013-01-14T05:09:26.663
> 
> 标签：python, multithreading, merge, lucene, indexing

我有一个 python 脚本来简单地将 unicode 语句索引到 lucene 索引中。它适用于 100 句和我的 1000 句试验。但是，当我需要索引 200,000 个句子时，我在第 4514 个句子出现合并错误，问题是什么，如何解决？

**错误**：_

```
Exception in thread "Thread-4543" org.apache.lucene.index.MergePolicy$MergeException: java.io.FileNotFoundException: /home/alvas/europarl/index/_70g.tii (Too many open files)
    at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:271)
Traceback (most recent call last):
Caused by: java.io.FileNotFoundException: /home/alvas/europarl/index/_70g.tii (Too many open files)
    at java.io.RandomAccessFile.open(Native Method)  File "indexer.py", line 183, in <module>

    at java.io.RandomAccessFile.<init>(RandomAccessFile.java:216)
    at org.apache.lucene.store.FSDirectory$FSIndexOutput.<init>(FSDirectory.java:593)
    at org.apache.lucene.store.FSDirectory.createOutput(FSDirectory.java:435)
    at org.apache.lucene.index.TermInfosWriter.initialize(TermInfosWriter.java:91)
    at org.apache.lucene.index.TermInfosWriter.<init>(TermInfosWriter.java:83)
        at org.apache.lucene.index.TermInfosWriter.<init>(TermInfosWriter.java:77)
incrementalIndexing(sfile,tfile,indexDir)
    at org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:381)
    at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:134)  File "indexer.py", line 141, in incrementalIndexing

    at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:3109)
    at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2834)
    at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:240)
    writer.optimize(); writer.close()
lucene.JavaError: java.io.IOException: background merge hit exception: _70e:c4513 _70f:c1 into _70g [optimize]
    Java stacktrace:
java.io.IOException: background merge hit exception: _70e:c4513 _70f:c1 into _70g [optimize]
    at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1749)
    at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1689)
    at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1669)
Caused by: java.io.FileNotFoundException: /home/alvas/europarl/index/_70g.tii (Too many open files)
    at java.io.RandomAccessFile.open(Native Method)
    at java.io.RandomAccessFile.<init>(RandomAccessFile.java:216)
    at org.apache.lucene.store.FSDirectory$FSIndexOutput.<init>(FSDirectory.java:593)
    at org.apache.lucene.store.FSDirectory.createOutput(FSDirectory.java:435)
    at org.apache.lucene.index.TermInfosWriter.initialize(TermInfosWriter.java:91)
    at org.apache.lucene.index.TermInfosWriter.<init>(TermInfosWriter.java:83)
    at org.apache.lucene.index.TermInfosWriter.<init>(TermInfosWriter.java:77)
    at org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:381)
    at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:134)
    at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:3109)
    at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2834)
    at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:240) 
```

我的代码： http: [//pastebin.com/Ep133W5f](http://pastebin.com/Ep133W5f)

示例输入文件： http: [//pastebin.com/r5qE4qpt](http://pastebin.com/r5qE4qpt) , [http://pastebin.com/wxCU277x](http://pastebin.com/wxCU277x)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T08:37:41.280

您有来自 Java 的“打开的文件过多”错误。尝试分批添加文档，然后在每批（例如）1000 个文档之后提交和优化。存在其他解决方案，但与搜索后端相关，而不是您的 Python 脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T09:02:03.040

您`filedir`在第 169 行重新分配，而没有关闭您在第 116 行所做的。我认为这是一个错误，因为您不需要创建新的，您可以重用旧的。另外，然后你会在每个循环左右创建它，它只会泄漏句柄，因为它们永远不会关闭。

如果有其他一些方法，您将在`filedir`不关闭它的情况下创建一个新方法，即第 106`createEmptyIndex`行和第 97 行`deleteFromIndex`。

还有一个不太明显，在`retrieveUniqID`. 您正在创建，但仅在第 87 行的条件为真`searcher`时才关闭它。`if cont == content:`在没有匹配的情况下，并且您`return None`在第 91 行，您永远不会关闭该搜索器。在这种情况下，由于您将一个字符串传递给`IndexSearcher`构造函数，因此它在内部创建了一个`Directory`您在某些情况下不会关闭的。如果愿意，您可以使用 try/finally 块来确保始终关闭它。

上述所有调用都是从 in 的主循环中进行的`incrementalIndexing`，因此泄漏的句柄数量迅速增加。

此外，需要考虑的一点是：所有这些类、`IndexSearcher`、`IndexReader`和`IndexWriter`都是`Directory`线程安全的，并且每次创建新类的成本都很高。重新设计可能会更好，以最大程度地减少打开和关闭它们所需的时间。它实际上可能只是您的代码，因为您可以传递已经创建的实例，这将清除不同方法中的大量初始化混乱。

由于您似乎还希望能够立即访问已编入索引的文档，`IndexReader`因此我会考虑通过该方法获取您的（以及您的 IndexSearcher）`IndexWriter.GetReader()`，或者通过刷新阅读器，如下所示`reader = reader.Refresh()`：

# ios - MonoTouch UIImage.FromResource 加载 Retina 图像

> ID：14313570
> 
> 赞同：3
> 
> 时间：2013-01-14T05:09:29.380
> 
> 标签：ios, xamarin.ios, uiimage, embedded-resource

我有一个类，它从引用的 MonoTouch 库中的嵌入式资源加载图像，如下所示：

```
UIImage.FromResource (null, "Resources.Items"); 
```

如果是这样，`UIImage.FromFile ("abc.png");`并且我包含了一个名为`abc@2x.png`视网膜图像的文件，它将显示在兼容的设备上。

我如何达到同样的效果，即加载视网膜图像，使用`UIImage.FromResource (null, "Resources.Items");`

我不能使用`UIImage.FromFile ("abc.png");`，因为资源位于引用的 DLL 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:40:55.660

很容易[检测到视网膜显示器](https://stackoverflow.com/q/9611784/220643)。从那里您可以从您的程序集中加载*正确*的资源。例如

```
UIImage.FromResource (null, (UIScreen.MainScreen.Scale > 1.0)
    ? "Resources.Items.Retina" : "Resources.Items"); 
```

使用它，您可以随意命名您的视网膜资源，包括使用*标准* `@2x`符号（如果您喜欢它）。

# angularjs - AngularJS - 如何强制更新范围（数组项的承诺）

> ID：14313573
> 
> 赞同：7
> 
> 时间：2013-01-14T05:09:54.380
> 
> 标签：angularjs

我在 Angular 中创建了一个如下所示的控制器（为简洁起见进行了编辑）：

```
function AppCtrl($scope, $http, $location, $dataService) {
    $scope.projects = $dataService.data.projects;
} 
```

这正确地加载了我的服务的`$scope.projects`承诺。`$dataService`

```
app.service('$dataService', function($q, $http, $location, $rootScope) {
    var dataService = this; //Provides access 'this' inside functions below
    var projectsDeferred = $q.defer();

    $http.get('/api').success(function(data, status, headers, config) {
        projectsDeferred.resolve(data.projects);
    }).error(function(err) {
        projectsDeferred.reject(err);
    });

    this.data = {projects: projectsDeferred.promise};

    //UPDATE FUNCTION
    function updateObjectInArray(array, object, newData) {
        for(i in array) {
            if(array[i] == object) {
                if(newData != undefined) {
                    array[i] = newData;
                } else {
                    return array[i];
                }
            }
        }
        return undefined;
    }

    this.updateProject = function(project, updateData) {
        $http.put('/api/projects/' + project._id, updateData)
            .success(function(data, status, headers, config) {
            updateObjectInArray(dataService.data.projects.$$v, project, data);
        }).error(function(data, status, headers, config) {});
    };

}); 
```

我创建了另一个看起来像这样的控制器，它根据当前 URL 从项目数组中选择一个项目：

```
function ProjectCtrl($scope, $route) {
    //Getting the current project from the array of projects
    $scope.project = $scope.projects.then(function(projects) {
        for(i in projects) {
            if(projects[i]._id == $route.current.params.projectId) {
                return projects[i];
            }
        }
    });
} 
```

当我尝试运行我的`updateObjectInArray()`函数时（在我的`$http.put()`请求成功时），我`$scope.projects`的 in`AppCtrl`已正确更新（项目数组）但我**的**`$scope.project`in`ProjectCtrl`未更新。我可以在函数内部登录，它会准确地记录我的期望，我可以登录，它会相应地更新，但是当我尝试登录我的控制器时，它**不会**相应地更新。**`array[i]``updateObjectInArray()``$scope.projects``AppCtrl``$scope.project``ProjectCtrl`**

 ****我认为原因是因为我必须调用`$rootScope.$apply()`或者`$rootScope.$digest()`在我更新了中的`array[i]`对象之后`updateObjectInArray()`，但是，我得到了`$digest is already in progress`.

我需要做些什么来确保我`$scope.project`的数组中的项目在我的`ProjectCtrl`? 我需要为它解决一个新的承诺吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-15T12:05:36.053

加载后`projects`，您将使用数组中的一项，`projects[i]`理论上假设它是`0x1`内存中的对象。问题是，当加载一个新项目（假设`0x2`）并更新数组时，您正在更改驻留在数组位置（`0x1`）中的对象，但`$scope.project`仍引用现在废弃的 object `0x1`。不能只在数组中更改，必须修改，所以不需要重新绑定`$scope.project`变量。

最好的解决方案是**更改** `array[i] = newData` **为** `angular.extend(array[i], newData)`. 这样，您只需更改 array[i] 的所有属性，并且当您`$scope.project`指向内存中的同一个对象时，它将被更新。

Anyway, I also believe you may want to **change** `if(array[i] == object) {` **to** `if(array[i]._id === object._id) {` and your *equality comparisons (`==`)* to *strictly equality comparisons (`===`)*. This `if` suits better your cause, as the new created object is not the same as the old one.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T08:46:32.220

你`$scope.projects`在绑定中使用吗？还是代码中的其他地方？

因为你正在返回而询问，并且承诺永远不会被它的结果改变，尽管你可以将承诺直接绑定到期望它的内容的 HTML。发生这种情况是因为，在内部，Angular 似乎在关注它的结果。

所以，如果你在其他地方使用这个变量，那么你需要使用[`$q.when($scope.projects)`](http://docs.angularjs.org/api/ng.%24q#when). 您将获得一个新的承诺，如果它已经解决，它将立即解决。****

# ruby-on-rails - 如何使用 R 在 ruby / ruby on rails 中实现数据可视化？

> ID：14313583
> 
> 赞同：0
> 
> 时间：2013-01-14T05:11:22.817
> 
> 标签：ruby-on-rails, ruby, highcharts, analytics

免责声明：我们是一群刚刚进入 python/ruby 的科学家。

项目摘要：我们有来自社交网站的分析和使用数据，我们正在使用**R**和 Highcharts（通过lazy_high_chart gem）通过网站向用户展示分析。用户可以通过指定他们想要调查社交媒体细分的时间和地点来与这些数据进行交互。因此，用户定义了主题，网站以一系列指标做出响应。

问题：到目前为止，我们一直在使用直接 ruby​​ 来提取社交网络数据（一个类），将其发送到分析引擎（另一个类），并在绘制的荣耀中呈现它（最终类）。但是，这一切都是原理证明和控制台驱动的，因此从一开始就将其推送到站点似乎效率低下。我们是否应该从头开始使用 Rails 框架，然后在站点中内置所有这些分析引擎来构建站点？或者...用 ruby​​ 编写这个后端管道是否更好，它只通过另一个对象与 rails 框架接口？

关于如何将后端数据处理与前端导轨集成的一般文档的建议或指针会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:28:14.973

您的问题基本上是如何构建系统，这有点难回答，因为它通常取决于很多事情：系统要求、应用程序环境、项目规划、技能等。

但是看看你提到的两个替代方案，我认为创建一个新的 Rails 应用程序，将你的原型模块复制到`lib/`目录中并以标准方式连接事物并没有错。您可以使用`rake tasks`来保留您已有的控制台界面。最后，您的设置看起来与标准 Web 应用程序非常相似。（通常你有一个数据库在做“数据处理”，在你的情况下它是 R 引擎。）

我不知道任何关于 Rails 与 R 集成的具体文档，但是一些关于通用系统与 Rails 集成的研究应该会给你一个很好的起点。（但是，只有当您真的想构建两个独立的系统时才需要这样做。）

# typescript - 作为数组的函数签名

> ID：14313587
> 
> 赞同：0
> 
> 时间：2013-01-14T05:12:13.533
> 
> 标签：typescript

这应该工作吗？

```
interface MyInterface{
}

class MyClass {
    DoSomething(callback: (MyInterface[]) => void) {
        ...
    }
} 
```

编译器不喜欢参数是 MyInterface 的数组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T06:21:35.953

您缺少参数名称：

```
interface MyInterface{
}

class MyClass {
    DoSomething(callback: (arg:MyInterface[]) => void) {
    }
} 
```

# c# - 在 C# 中创建一个自循环方法

> ID：14313589
> 
> 赞同：-2
> 
> 时间：2013-01-14T05:12:42.883
> 
> 标签：c#, javascript, .net

我想制作一种方法，通过在固定时间间隔后访问数据库中的数据来自动更新标签的值。
是否可以制作这样一种方法，在后端自动运行并在固定时间间隔后自行循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T05:22:52.100

AJAX 的线程和计时器控制在您的情况下可能很有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T05:29:39.980

使用 AJAX。成分：1个ScriptManager、1个定时器、1个UpdatePanel

代码 ：

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<asp:Timer ID="Timer1" runat="server" Interval="5000" ontick="Timer1_Tick">
</asp:Timer>
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <asp:Label ID="lblTime" runat="server"></asp:Label>
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="Timer1" EventName="Tick" />
    </Triggers>
</asp:UpdatePanel> 
```

代码背后：

```
protected void Timer1_Tick(object sender, EventArgs e)
{
    lblTime.Text = (new Random()).Next(1000).ToString() ;
} 
```

此示例每五秒用一个随机数填充标签，现在您可以将计时器和 C# 代码的间隔更改为您喜欢的。例如，您可以将标签文本设置为数据库中的值或其他值。

# producer-consumer - 生产者可以在Kafka 0.8中找到经纪人的添加和删除吗？

> ID：14313590
> 
> 赞同：1
> 
> 时间：2013-01-14T05:12:44.697
> 
> 标签：producer-consumer, apache-zookeeper, messagebroker, apache-kafka

我们知道，在 kafka 0.7 中，我们可以为 producer 指定 zk.connect，以便 producer 可以找到 broker 的添加和删除。但是在 kafka 0.8 中，我们不能为生产者指定 zk.connect。kafka 0.8中的生产者可以找到吗？如果不是，系统的扩展性不比0.7版本差吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T22:40:01.523

您仍然可以使用 ZooKeeper 客户端来检索代理列表：

```
ZkClient zkClient = new ZkClient("localhost:2108", 4000, 6000, new BytesPushThroughSerializer());
List<String> brokerList = zkClient.getChildren("/brokers/ips"); 
```

据此，您不必在客户端“硬编码”代理列表，并且就系统架构而言，您是灵活的。但无论如何，这会再次添加 ZooKeeper 依赖项，这实际上对多个环境中的生产者来说是一个劣势。

如果您想详细了解所谓的“集群元数据 API”解决方案，请查看此链接：[https ://issues.apache.org/jira/browse/KAFKA-369](https://issues.apache.org/jira/browse/KAFKA-369)

最好的

预

PS：很抱歉将其重新发布到您的其他问题 - 但答案适合两者;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T11:09:05.120

有点困惑您到底在寻找什么，在 0.8 中我们必须指定`metadata.broker.list`属性中的经纪人列表

```
 Properties props = new Properties();
    props.put("metadata.broker.list", "broker1:9092,broker2:9092"); 
```

从他们说的卡夫卡消费者[示例中](https://cwiki.apache.org/confluence/display/KAFKA/0.8.0+Producer+Example)

> 属性“metadata.broker.list”定义了生产者可以在哪里找到一个或多个代理来确定每个主题的领导者。这不需要是集群中的全套代理，但应至少包括两个，以防第一个代理不可用。无需担心找出哪个 Broker 是主题（和分区）的领导者，生产者知道如何连接到 Broker 并请求元数据，然后连接到正确的 Broker。

说添加是指将新节点添加到集群中吗？

# python - 将大量查询写入文本文件

> ID：14313591
> 
> 赞同：0
> 
> 时间：2013-01-14T05:12:47.903
> 
> 标签：python, rest, data-mining

我有一个大约 200,000 个实体的列表，我需要为每个实体查询一个特定的 RESTful API，并最终将所有 200,000 个实体以 JSON 格式保存在 txt 文件中。最简单的做法是遍历 200,000 个实体的列表并逐个查询，将返回的 JSON 添加到列表中，完成后，将所有内容添加到文本文件中。就像是：

```
from apiWrapper import api
from entities import listEntities #list of the 200,000 entities
a=api()
fullEntityList=[]
for entity in listEntities:
fullEntityList.append(a.getFullEntity(entity))

with open("fullEntities.txt","w") as f:
    simplejson.dump(fullEntityList,f) 
```

显然这是不可靠的，因为对 API 的 200,000 次查询大约需要 10 个小时左右，所以我猜在将其写入文件之前会导致错误。我想正确的方法是分块编写，但不确定如何实现。有任何想法吗？另外，我不能用数据库做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T07:00:56.067

我建议将它们写入 SQLite 数据库。这就是我为自己的小型网络蜘蛛应用程序做的方式。因为您可以很容易地查询密钥，并检查您已经检索到哪些密钥。这样，您的应用程序可以轻松地从中断的地方继续。特别是如果您下周添加了大约 1000 个新条目。

从一开始就将“恢复”设计到您的应用程序中。如果有一些意外的异常（比如，由于网络拥塞而超时），您不想从头开始重新启动，而只希望那些您尚未成功检索的查询。在 200.000 次查询时，99.9% 的正常运行时间意味着您必须预期 200 次失败！

为了空间效率和性能，使用压缩格式可能会有所回报，例如在将 json 转储到数据库 blob 之前使用 zlib 压缩 json。

SQLite 是一个不错的选择，除非您的爬虫同时在多个主机上运行。对于单个应用程序，sqlite 是完美的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T05:22:29.680

简单的方法是以`'a'`（附加）模式打开文件，并在它们进入时一一写入。

更好的方法是使用作业队列。这将允许您产生`a.getFullEntity`对工作线程的调用并在/如果它们返回时处理您想要的结果，或者安排重试失败等。请参阅[`Queue`](http://docs.python.org/2/library/queue.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T08:27:33.413

我还将使用一个单独的线程来进行文件写入，并用于`Queue`记录所有实体。刚开始的时候，我以为这会在 5 分钟内完成，但后来发现有点困难。`simplejson` **和我知道的所有其他此类库不支持部分写入**，因此您不能先编写列表的一个元素，然后再添加另一个等。因此，我尝试手动解决此问题，方法是`[`分别写入文件`,`和`]`然后分别倾倒每个实体。

如果无法检查它（因为我没有你的 api），你可以尝试：

```
import threading
import Queue
import simplejson
from apiWrapper import api
from entities import listEntities #list of the 200,000 entities

CHUNK_SIZE = 1000

class EntityWriter(threading.Thread):
    lines_written = False
    _filename = "fullEntities.txt"

    def __init__(self, queue):
        super(EntityWriter, self).__init()
        self._q = queue
        self.running = False

    def run(self):
        self.running = True
        with open(self._filename,"a") as f:
            while True:
                try:
                    entity = self._q.get(block=False)
                    if not EntityWriter.lines_written:
                        EntityWriter.lines_written = True
                        f.write("[")
                        simplejson.dump(entity,f)
                    else:
                        f.write(",\n")
                        simplejson.dump(entity,f)
                except Queue.Empty:
                    break
        self.running = False

    def finish_file(self):
         with open(self._filename,"a") as f:
             f.write("]")

a=api()
fullEntityQueue=Queue.Queue(2*CHUNK_SIZE)
n_entities = len(listEntities)
writer = None
for i, entity in listEntities:
    fullEntityQueue.append(a.getFullEntity(entity))
    if (i+1) % CHUNK_SIZE == 0 or i == n_entities-1:
        if writer is None or not writer.running:
            writer = EntityWriter(fullEntityQueue)
            writer.start()
writer.join()
writer.finish_file() 
```

**这个脚本的作用**

主循环仍然遍历您的实体列表，获取每个实体的完整信息。之后，每个实体现在都被放入一个队列中。每 1000 个实体（在列表的末尾），就会启动一个与主线程并行运行的 EntityWriter-Thread。此 EntityWriter`get`来自`Queue`并将其转储到所需的输出文件。

需要一些额外的逻辑来使 JSON 成为一个列表，如上所述，我是手动编写`[`的。原则上，当你重新加载它时，结果文件应该被理解。`,``]``simplejson`

# sql-server - 为什么将总和乘以其他数字时精度会降低

> ID：14313598
> 
> 赞同：14
> 
> 时间：2013-01-14T05:15:03.960
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

我在 SQL Server 中遇到了以下错误（或功能）。

当我使用`SUM (*column*)`where`column`有一个`numeric(18, 8)`类型并将其乘以任何其他数字（整数或小数）时，结果精度会降低到`numeric(18, 6)`.

这是要演示的示例脚本。

```
CREATE TABLE #temp (Qnty numeric(18,8))

INSERT INTO #temp (Qnty) VALUES (0.00000001)
INSERT INTO #temp (Qnty) VALUES (0.00000002)
INSERT INTO #temp (Qnty) VALUES (0.00000003)

SELECT Qnty, 1*Qnty
FROM #temp

SELECT (-1)*SUM(Qnty), SUM(Qnty), -SUM(Qnty), SUM(Qnty) * CAST(2.234 as numeric(18,8))
FROM #temp

DROP TABLE #temp 
```

第二次 SELECT 查询的结果

```
0.000000    0.00000006  -0.00000006 0.000000 
```

如您所见，我将 SUM 相乘，结果为 0.000000

谁能解释这种奇怪的行为？

UPD。我在 2000、2005 和 2008 SQL Server 上的 SQL Management Studio 中执行了这个查询。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T07:42:43.763

`numeric(18, 8)`用[SUM](http://msdn.microsoft.com/en-us/library/ms187810%28v=SQL.90%29.aspx)聚合 a 会产生数据类型`numeric(38, 8)`。

可以在此处找到将某些内容与数字相乘时如何计算结果数据类型：[精度、比例和长度 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms190476.aspx)

常量 -1 的数据类型是`numeric(1, 0)`

精度`p1 + p2 + 1`= 40
比例`s1 + s2`= 8

最大精度为 38，剩下的就是`numeric(38, 6)`.

阅读更多关于为什么在`numeric(38, 6)`这里：[乘法和除法与数字](http://blogs.msdn.com/b/sqlprogrammability/archive/2006/03/29/564110.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T07:53:04.603

如果您阅读[SUM 的参考页](http://msdn.microsoft.com/en-us/library/aa259238(v=SQL.80).aspx)，您会看到在十进制列上它会产生一种`NUMERIC(38,6)`. 您需要将 to 的结果`SUM`转换`NUMERIC(18,8)`为您想要的工作方式。

按照您的预期执行`SELECT CAST(SUM(Qnty) as numeric(18,8)) * 2.234 FROM #temp`收益率。`0.00000013404`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T07:34:30.580

技术解释可以在[http://social.msdn.microsoft.com/Forums/en/transactsql/thread/233f7380-3f19-4836-b224-9f665b852406找到](http://social.msdn.microsoft.com/Forums/en/transactsql/thread/233f7380-3f19-4836-b224-9f665b852406)

# jquery - jQuery 按列表内容日期或字母顺序排序列表

> ID：14313603
> 
> 赞同：1
> 
> 时间：2013-01-14T05:16:24.377
> 
> 标签：jquery, date, sorting, alphabetical

我想按列表项的内容对无序列表进行排序。默认情况下，我希望它按日期排序，并可以选择按名称按字母顺序排序。

```
<select id="test">
    <option selected="selected" value="date">Date</option>
    <option value="alphabetically">Alphabetically</option>
</select>
<ul id="list">
  <li><p class="name">Peter</p><span class="date">10.12.12</span></li>
  <li><p class="name">Mary</p><span class="date">06.01.13</span></li>
  <li><p class="name">Paul</p><span class="date">19.12.12</span></li>
  <li><p class="name">Allen</p><span class="date">21.12.12</span></li>
  <li><p class="name">James</p><span class="date">03.01.13</span></li>
  <li><p class="name">Vicki</p><span class="date">12.01.13</span></li>
  <li><p class="name">Brock</p><span class="date">01.01.13</span></li>
  <li><p class="name">Dana</p><span class="date">31.12.12</span></li>
  <li><p class="name">Frank</p><span class="date">16.12.12</span></li>
  <li><p class="name">Gil</p><span class="date">09.01.13</span></li>
  <li><p class="name">Helen</p><span class="date">14.01.13</span></li>
</ul> 
```

到目前为止我的尝试：

```
function sortUnorderedList(ul, sortDescending) {
  if (typeof ul == "string") ul = document.getElementById(ul);
  var lis = ul.getElementsByTagName("li");
  var vals = [];
  for (var i = 0, l = lis.length; i < l; i++)
  vals.push(lis[i].innerHTML);
  vals.sort();
  if (sortDescending) vals.reverse();
  for (var i = 0, l = lis.length; i < l; i++)
  lis[i].innerHTML = vals[i];
}
$(document).ready(function () {
  var desc = false;
  document.getElementById("test").onchange = function () {
    sortUnorderedList("list", desc);
    desc = !desc;
    return false;
  };
});
function sortDescending(a, b) {
  var date1 = $(a).find(".date").text();
  date1 = date1.split('.');
  date1 = new Date(date1[2], date1[1] - 1, date1[0]);
  var date2 = $(b).find(".date").text();
  date2 = date2.split('.');
  date2 = new Date(date2[2], date2[1] - 1, date2[0]);
  return date1 < date2 ? 1 : -1;
}
$(document).ready(function () {
  $('ul > li').sort(sortDescending).appendTo('ul');
}); 
```

当页面加载时，列表按“日期”跨度内容的值排序，在选择菜单更改时，它按字母顺序对列表进行排序。但是当我将它改回“日期”时，列表日期没有按降序正确排序。

[http://jsfiddle.net/s2JxC/](http://jsfiddle.net/s2JxC/)

有人可以帮忙吗？我希望按字母排序按类“名称”排序。与日期按“日期”类排序的方式相同。

干杯，合资企业

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T05:39:22.807

你的代码有很大的逻辑缺陷。我已经更新了你的 jsfiddle。( [http://jsfiddle.net/s2JxC/4/](http://jsfiddle.net/s2JxC/4/) )

您有一个`sortUnorderedList()`按字母顺序（升序和降序）`sortDescending()`排序的函数，并且您有一个使用日期对列表进行排序的函数（总是降序）。

我已经做到了，当您单击按字母顺序时，它总是按字母顺序排序，当您从下拉列表中选择日期时，它总是按日期（降序）排序。

其余的取决于您，您希望它如何实际工作。我希望这有帮助！

编辑：根据要求[jsfiddle.net/s2JxC/7](http://jsfiddle.net/s2JxC/7) < - 当您按字母顺序单击时，按“.name”的字母顺序排序。单击日期时按“.date”降序排序。

* * *

您之前所做的是在页面加载时按日期（降序）排序。当您按字母顺序和非字母顺序单击时，按字母顺序？（降序）当您单击日期时。

# python - Python/tKinter/ttk - 在按钮点击时传递一个对象

> ID：14313604
> 
> 赞同：1
> 
> 时间：2013-01-14T05:16:49.917
> 
> 标签：python, tkinter, ttk

顶级编辑：这个问题原则上已在原始线程中得到回答 - 但是，有一些基本问题我想了解更多。请不要直截了当地回答这个问题。如果它杂乱无章，我很高兴删除这个 Q！

* * *

与我昨天问的这个问题相关：[Python/ttk/tKinter - 通过按钮单击函数传递参数？](https://stackoverflow.com/questions/14301078/python-ttk-tkinter-passing-an-argument-with-a-button-click-func)

我正在尝试一种新方法，并且我可以（在某种程度上）让它工作，但是，只有当我对函数进行“硬”编码时，我才试图避免......

我有 36 个按钮 [az] 和 [0-9]。当用户单击按钮时，会`askcolor`弹出对话框，我希望记录返回的颜色。

在类 init 中，我声明了一些变量（都将颜色值设置为白色）：

```
class MakeGUI(Frame):
    def __init__(self,root):
        Frame.__init__(self, root)
        self.root = root
        ##colour values
        self.AVal = "#FFFFFF"
        self.BVal = "#FFFFFF"
        self.CVal = "#FFFFFF"
        etc. 
```

当我填充文本框时，我使用颜色变量作为 bg arg：

```
 ## letter labels
    self.boxA = Text(self.mainframe, state='normal', width=3, height=1, background=self.AVal).grid(column=2, row=2, padx=4)
    self.boxB = Text(self.mainframe, state='normal', width=3, height=1, background=self.BVal).grid(column=3, row=2, padx=4)
    self.boxC = Text(self.mainframe, state='normal', width=3, height=1, background=self.CVal).grid(column=4, row=2, padx=4)
    etc. 
```

然后我设置了按钮：

```
 self.bloba = ttk.Button(self.mainframe, text="A",style= 'mainSmall.TButton', command= lambda: self.getColour("self.AVal")).grid(column=2, row=3)
    self.blobb = ttk.Button(self.mainframe, text="B",style= 'mainSmall.TButton', command= lambda: self.getColour("self.BVal")).grid(column=3, row=3)
    self.blobc = ttk.Button(self.mainframe, text="C",style= 'mainSmall.TButton', command= lambda: self.getColour(("self.CVal")).grid(column=4, row=3) 
```

注意 - 我正在“发送” var 的字符串，因为我无法让对象正确传递 - 理想情况下我只想发送对象，但这是我可以开始工作的唯一解决方法。

然后我设置了按钮功能：

```
def getColour(self,glyphRef):
    print self.AVal
    (triple, hexstr) = askcolor()
    if hexstr:
        eval(glyphRef+"=hexstr")
    print self.AVal 
```

这两个打印语句仅用于监视目的，因为我弄清楚如何让它工作。

我也很清楚这种`eval`方法是不可取的或不理想的。我只是找不到让我接近理想解决方案的替代方法....

此方法会引发错误：

```
#FFFFFF
Exception in Tkinter callback
Traceback (most recent call last):
  File "/usr/lib/python2.7/lib-tk/Tkinter.py", line 1413, in __call__
    return self.func(*args)
  File "colourPicker/colourTest.py", line 109, in <lambda>
    self.bloba = ttk.Button(self.mainframe, text="A",style= 'mainSmall.TButton', command= lambda: self.getColour("self.AVal")).grid(column=2, row=3)
  File "colourPicker/colourTest.py", line 161, in getColour
    eval(glyphRef+"=hexstr")
  File "<string>", line 1
    self.AVal=hexstr
         ^
SyntaxError: invalid syntax 
```

为了尝试测试发生了什么，我尝试在按钮 func 中对 var 进行硬编码：

```
def getColour(self,glyphRef):
    print self.AVal
    (triple, hexstr) = askcolor()
    if hexstr:
        self.AVal=hexstr
    print self.AVal 
```

这确实会导致 var 被更改：

```
#FFFFFF
#24d9d9 
```

这意味着我可以编写 36 种不同的按钮点击函数，但这似乎违反直觉……尤其是当我对类函数了解甚少时，它就是要应对这种挑战！

任何建议都非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:44:37.710

我最终将 init 值放入 self.dict，然后从 click func 更改 dict。

所以现在初始化是：

```
 self.colourDict = \
    {"AVal":"#FFFFFF",
     "BVal":"#FFFFFF",
     "CVal":"#FFFFFF",
     "DVal":"#FFFFFF",
      etc. 
```

文本框制造商是：

```
 self.boxA = Text(self.mainframe, state='normal', width=3, height=1, background=self.colourDict['AVal'])
    self.boxB = Text(self.mainframe, state='normal', width=3, height=1, background=self.colourDict['BVal'])
    self.boxC = Text(self.mainframe, state='normal', width=3, height=1, background=self.colourDict['CVal'])
    etc. 
```

然后将其网格化：

```
 self.boxA.grid(column=2, row=2, padx=4)
    self.boxB.grid(column=3, row=2, padx=4)
    self.boxC.grid(column=4, row=2, padx=4)
    etc. 
```

然后是按钮：

```
 self.bloba = ttk.Button(self.mainframe, text="A",style= 'mainSmall.TButton', command= lambda: self.getColour(self.boxA,"AVal")).grid(column=2, row=3)
    self.blobb = ttk.Button(self.mainframe, text="B",style= 'mainSmall.TButton', command= lambda: self.getColour(self.boxB,"BVal")).grid(column=3, row=3)
    self.blobc = ttk.Button(self.mainframe, text="C",style= 'mainSmall.TButton', command= lambda: self.getColour(self.boxC,"CVal")).grid(column=4, row=3)
    etc. 
```

哪个点在按钮功能上：

```
def getColour(self,glyphRef, value):
    (triple, hexstr) = askcolor()
    if hexstr:
        glyphRef.config(bg=hexstr)
        self.colourDict[value] = hexstr 
```

它既设置了视觉颜色，又给了我一个可调用的字典，我可以用它来将结果保存在 XML 中以供以后分析。任务完成。:)

# c++ - 命名空间中的静态变量

> ID：14313608
> 
> 赞同：2
> 
> 时间：2013-01-14T05:17:35.277
> 
> 标签：c++, static, namespaces

我正在编写一个游戏框架，并且我正在尝试概括和封装依赖于平台的代码，例如渲染器，以便它更容易移植。我正在尝试实现这一点，同时仍然拥有使用框架的干净方式。我目前遇到静态变量和命名空间的问题......

```
    // 渲染器.h

    命名空间渲染器
    {
        静态 IRenderer* g_pRenderer = NULL；

        静态 IRenderer* Get(void) { return g_pRenderer; }

        静态 IRenderer* CreateD3DRenderer()
        {
            g_pRenderer = new RendererD3D(); // 派生自 IRenderer
            返回 g_pRenderer；
        }
    }

```

所以在 my 中`main()`，我可以调用`CreateD3DRenderer()`它并返回一个实例就好了；`g_pRenderer`保持它的值，因为它是在其函数范围内创建和返回的......但是，`Renderer::Get()`返回`NULL`. `'static'`在其他文件中使用时，从 init of 中删除`g_pRenderer`会导致冲突。

这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T05:22:55.747

首先，参数列表中的 void 仅在 C 中是必需的。在 C++ 中，您只需编写`Get()`.

至于主要问题，`static`变量仅限于编译单元。由于您将它们放在标题中，这会导致为包含它的每个编译单元（即每个 cpp 文件）创建一个单独的变量。删除`static`部件时会出现错误，因为您有多个具有相同名称的变量，从而导致链接错误。

如果要在多个文件之间共享单个变量，请使用`extern`. 但是，这被认为是不好的做法。你最好重构，所以你不需要这样的全局变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T05:23:16.170

您应该将所有函数定义保存在`.cpp`文件中，而不是`.h`

发生的情况是，当以这种方式使用 static 时，函数或变量仅限于该`.cpp`文件，这意味着`g_pRenderer`每个`.cpp`文件中的情况都不同。由于每个定义仅限于一个`.cpp`文件，因此不会发生多个定义。

您需要将其删除才能使全局指针正常工作。您可以在 getter 函数上保留静态，但我会删除它。您应该将函数和全局变量的定义移动到一个`.cpp`文件中，并在`.h`. 将变量声明为`extern`。

# ios - cocos2d ios应用程序的spritesheet应该放入什么样的图像？

> ID：14313613
> 
> 赞同：2
> 
> 时间：2013-01-14T05:18:30.233
> 
> 标签：ios, cocos2d-iphone, sprite-sheet

我为这个冗长的问题预先道歉，有多个子问题，但问题确实如标题中所述。接下来是对问题不同方面的详细分解。

在我使用 cocos2d 构建的通用 ios 游戏中，我有四类图像 - 我想确定哪些应该进入 spritesheets，哪些最好作为单独的图像加载。我目前的猜测是，只有在整个游戏中运行的角色动画才能提供作为 spritesheets 加载到内存中的值：

1.  在整个游戏过程中运行的角色动画（用户在菜单中时除外）：对于这些，我假设将图像放在 spritesheet 中将减少运行时内存使用量（由于单个文件的填充到两个字节边界的幂），因此它们是精灵表的候选者。那是对的吗？
2.  小图像（大约 200 个），其中 0 到 4 个在游戏过程中随时显示，随机选取。对于这些，我不确定是否值得将所有 200 张图像加载到内存中，而一次最多只能使用 4 张。因此，直接将它们作为图像访问可能会更好。那是对的吗？
3.  一些（大约 20 个）小的菜单元素，例如仅在静态菜单中使用的按钮：由于菜单项仅在菜单显示期间使用，我认为它们在通过 spritesheets 改善内存访问方面没有太大价值。那是对的吗？
4.  一些用作菜单背景、游戏场景等的大图像。这些图像大多数与屏幕分辨率一样大。由于屏幕分辨率大致等于单个图像的最大尺寸（例如，对于 ipad Retina，图像尺寸为 4096 x 4096 与屏幕尺寸为 2048 x 1536），使用 spritesheets 最多没有太多增益 1或 2 个大图像将适合一个精灵表。此外，由于这些大文件中的每一个都只在一个场景中使用，因此将所有这些大图像作为 spritesheets 预先加载到内存中似乎是一种不必要的开销。因此，直接将它们作为 spritesheets 访问。那是对的吗？

几个常见的相关问题：

a) 将不同场景中使用的图像打包到同一个 spritesheet 中，即使在该场景中只使用了图像的一个子集，我们也可以将它们加载到内存中。我认为这是一个坏主意。正确的？

b) 仅在较旧的设备（iPad 1 和 iPhone 3gs）上玩游戏时会出现口吃。spritesheets 会帮助减少这种卡顿吗？

c) 我假设 spritesheets 只会有利于运行时内存占用，而不是应用存档的磁盘大小。例如，我注意到一组大小为 11.8 MB 的文件在放入 spritesheet 时为 11 Mb - 压缩优势不大。这是一个有效的假设吗？

请让我知道您对上述理由的看法。

谢谢

阿南德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T20:43:02.503

经验法则：一切都在 spritesheet（纹理图集）中，除非有充分的理由不这样做。

1.  绝对是纹理图集。

2.  Cocos2d 的缓存机制将导致所有单独的图像被缓存并保留在内存中，因此最终它们会比在纹理图集中使用更多。如果很少需要它们，我只会使用单个图像（即菜单图标），并且在将它们添加到场景后，我也会将它们从 CCTextureCache 中删除，以确保在离开该菜单屏幕时将它们从内存中删除.

3.  假设可能是错误的。320x480 图像使用 512x512 作为内存中的纹理。如果您有多个，最好将它们全部放在一个纹理图集中。除非你在 cocos2d 中启用了 NPOT 支持。同样，不要忘记 CCTextureCache 正在缓存纹理。

4.  请记住，大型纹理从 spritebatching 中受益匪浅。因此，即使纹理图集中可能只有 2-3 张图像，它也可以在性能上产生差异。

a）这真的取决于。如果您的应用程序内存不足，您可能需要单独的纹理图集。否则，不将图像打包到单个纹理图集中（如果可能的话）将是一种浪费。

b) 这取决于导致口吃的原因。最常见的问题：在游戏过程中加载资源（即图像），或者每帧创建和删除许多节点而不是重新使用现有节点。

c) 可能。它可能取决于纹理图集工具（我推荐 TexturePacker）。这绝对取决于文件格式。如果您可以将多个 PNG 打包到一个 .pvr.ccz 纹理图集中，您将节省大量内存（并提高加载速度）。

有关更多信息，请参阅我的[cocos2d 内存优化博客文章](http://www.learn-cocos2d.com/2012/11/optimize-memory-usage-bundle-size-cocos2d-app/)。

# sql - 将行号设置为各种操作

> ID：14313623
> 
> 赞同：0
> 
> 时间：2013-01-14T05:20:32.863
> 
> 标签：sql, sql-server, sql-server-2005, row-number

我正在尝试将行号设置为表的输出。

表看起来像

```
AccountNum  DataAction  ActionType  ActionStartCounter
123         11/01/2013  HELLO       1
123         12/01/2013  NONO        NULL
123         16/01/2013  YESYES      NULL
123         1/02/2013   HELLO       2
123         4/02/2013   YESYES      NULL
456         10/01/2013  HELLO       1
456         13/01/2013  NONO        NULL
456         14/01/1900  WHYWHY      NULL
456         15/01/2013  YESYES      NULL
456         20/03/2013  HELLO       2
456         31/03/2013  YESYES      NULL 
```

这是试图做的是

1）每次有一个帐户的 Hello 时，它都会根据列下的 DateAction 对表进行排序`ActionStartCounter`

2)`NULLs`表示这些动作不是 HELLO 并且是先前编号行的一部分

```
i.e. for AccountNum 123 NONO on 12/01/2013 is linked to HELLO on 11/01/2013. 
```

3) YESYES 是任何账户对任何由 HELLO 开始的最后一个动作。

我希望输出是

```
AccountNum  DataAction  ActionType  ActionStartCounter    ActionCounter
123         11/01/2013  HELLO       1                     11
123         12/01/2013  NONO        NULL                  12
123         16/01/2013  YESYES      NULL                  13
123         1/02/2013   HELLO       2                     21
123         4/02/2013   YESYES      NULL                  22
456         10/01/2013  HELLO       1                     11
456         13/01/2013  NONO        NULL                  12
456         14/01/1900  WHYWHY      NULL                  13
456         15/01/2013  YESYES      NULL                  14
456         20/03/2013  HELLO       2                     21
456         31/03/2013  YESYES      NULL                  22 
```

新字段 ActionCounter 本质上将连接

`ActionStartCounter`和中的行`accountNum`号`ActionStartCounter`

意义

连接中的第二部分是关于 HELLO 开头的 row_number ，只要有新的 HELLO 进入，计数器就会重置。

ActionStartCounter 也基于结束时的情况`ActionType ='Hello' then row_number()`（按 AccountNum 顺序按 DateAction 分区）

如果你们认为应该改变，我们可以完成。如果您认为 AccountNum 或 Date 可以成为新列的一部分以使其独一无二，我们可以这样做。我们需要转换到最后一列的字段数量没有限制。

谢谢你的帮助。

**PS：**平台SQL Server 2005

这里是 DDL

```
Create Table ActionDetails
(
AccountNum Int,
DataAction datetime,
ActionType Varchar(25),
ActionStart int 
)

Insert into ActionDetails
Select 123,CONVERT(datetime,'20130111' ,112),'HELLO',1 UNION 
Select 123,CONVERT(datetime,'20130112' ,112),'NONO',NULL UNION 
Select 123,CONVERT(datetime,'20130116' ,112),'YESYES',NULL UNION 
Select 123,CONVERT(datetime,'20130201' ,112),'HELLO',2 UNION 
Select 123,CONVERT(datetime,'20130204' ,112),'YESYES',NULL UNION 
Select 456,CONVERT(datetime,'20130110' ,112),'HELLO',1 UNION 
Select 456,CONVERT(datetime,'20130113' ,112),'NONO',NULL UNION 
Select 456,CONVERT(datetime,'20130114' ,112),'WHYWHY',NULL UNION 
Select 456,CONVERT(datetime,'20130115' ,112),'YESYES',NULL UNION 
Select 456,CONVERT(datetime,'20130320' ,112),'HELLO',2 UNION 
Select 456,CONVERT(datetime,'20130331' ,112),'YESYES',NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T05:53:08.860

（456 不开头`HELLO`- 不知道如何处理）。不得不重写你的日期，可能在那里出错了。机制应该是健全的。

```
;WITH MyTable (AccountNum,  DataAction,  ActionType,  ActionStartCounter) AS
(
SELECT 123,         CAST('01/11/2013' AS DATETIME),  'HELLO',       1       UNION ALL
SELECT 123,         '01/12/2013',  'NONO',        NULL  UNION ALL
SELECT 123,         '01/16/2013',  'YESYES',      NULL  UNION ALL
SELECT 123,         '2/1/2013',   'HELLO',       2      UNION ALL
SELECT 123,         '2/4/2013',   'YESYES',      NULL   UNION ALL
SELECT 456,         '1/10/2013',  'HELLO',       1      UNION ALL
SELECT 456,         '1/13/2013',  'NONO',        NULL   UNION ALL
SELECT 456,         '1/14/1900',  'WHYWHY',      NULL   UNION ALL
SELECT 456,         '01/15/2013',  'YESYES',      NULL  UNION ALL
SELECT 456,         '03/20/2013',  'HELLO',       2     UNION ALL
SELECT 456,         '3/31/2013',  'YESYES',      NULL   
)
,CTE AS
(
    SELECT   * 
            ,SeqGroupAcc    = ROW_NUMBER() OVER (PARTITION BY AccountNum ORDER BY DataAction)
    FROM MyTable
)
,CTE2 AS
(
    SELECT   *
            ,MyCounting = 1
    FROM CTE
    WHERE SeqGroupAcc = 1
    UNION ALL
    SELECT   T2.AccountNum
            ,T2.DataAction
            ,T2.ActionType
            ,CASE WHEN T2.ActionStartCounter IS NULL THEN T1.ActionStartCounter ELSE  T2.ActionStartCounter END
            ,T2.SeqGroupAcc
            ,CASE WHEN T2.ActionType = 'HELLO' THEN 1 ELSE T1.MyCounting + 1 END
    FROM CTE2   T1
    JOIN CTE    T2 ON T1.SeqGroupAcc = T2.SeqGroupAcc - 1 AND T1.AccountNum = T2.AccountNum
)                                                       
SELECT   AccountNum
        ,DataAction
        ,ActionType
        ,ActionStartCounter
        ,ActionCounter  = (ActionStartCounter) * 10 + MyCounting
--OR: ,ActionCounter    = CAST(ActionStartCounter AS VARCHAR(5)) + CAST(MyCounting AS VARCHAR(5))
FROM CTE2
WHERE AccountNum = 123 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T06:59:37.140

我认为[这](http://sqlfiddle.com/#!3/676c9/17)基本上是相同的方法 - 必须有更好的方法不是吗？

# php - 更新 php 网站的程序脚本

> ID：14313624
> 
> 赞同：0
> 
> 时间：2013-01-14T05:20:41.067
> 
> 标签：php

我有一个用 PHP 编写的基于 Web 的项目，该项目被分发到 5 个不同的服务器。

当我进行更改时，保持这 5 台服务器更新的最佳方式是什么？

我正在考虑编写一个 cron shell 脚本来读取我的源文件夹并可能通过 FTP 将更新传播到单独的服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T05:38:03.743

使用 cron 无法通过 ftp

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T06:06:50.710

我使用一个调用 rsync 的脚本将我的网站从本地机器上传到服务器。这是一个例子：

```
rsync -razv --exclude '.svn' --exclude '.settings' --exclude '.buildpath' -e "ssh -l user" --delete ~/workspace/website/ www.example.com:/var/www/ 
```

我必须排除 .svn、.settings 和 .buildpath 文件和文件夹，因为我不希望它们出现在网站上。我的服务器是 www.example.com。服务器上的路径是/var/www，用户是“用户”。

--delete 参数告诉 rsync 删除本地机器上不存在的远程机器上的文件（我删除的前文件）

我使用 pub-private 密钥身份验证，因此脚本无需输入密码即可运行。如果您想使用密码，则需要更改

-e "ssh -l 用户 1"

至

-e "sshpass -p 密码 ssh -l 用户"

我可以想象你会做这样的事情：

```
rsync -razv --exclude '.svn' --exclude '.settings' --exclude '.buildpath' -e "ssh -l user1" --delete ~/workspace/website/ www.server1.com:/var/www/
rsync -razv --exclude '.svn' --exclude '.settings' --exclude '.buildpath' -e "ssh -l user2" --delete ~/workspace/website/ www.server2.com:/var/www/
rsync -razv --exclude '.svn' --exclude '.settings' --exclude '.buildpath' -e "ssh -l user3" --delete ~/workspace/website/ www.server3.com:/var/www/
rsync -razv --exclude '.svn' --exclude '.settings' --exclude '.buildpath' -e "ssh -l user4" --delete ~/workspace/website/ www.server4.com:/var/www/
rsync -razv --exclude '.svn' --exclude '.settings' --exclude '.buildpath' -e "ssh -l user5" --delete ~/workspace/website/ www.server5.com:/var/www/ 
```

注意：如果要使用密码，则需要在本地计算机上安装 sshpass。Rsync 需要安装在本地和远程机器上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T06:15:22.387

我会使用 git (http://git-scm.com/)。您可以为每台服务器创建遥控器 (https://github.com/resmo/git-ftp)。然后，您可以将 git repos 推送到每个服务器。

# html - 为嵌套元素设置不同的不透明度

> ID：14313626
> 
> 赞同：6
> 
> 时间：2013-01-14T05:20:45.677
> 
> 标签：html, css

我想做一个类似win7文件exporlor的效果：标题栏的不透明度小于1，而内容没有不透明度。

然后我尝试将两个元素组合在一起来制作它：

```
<div id="outer" style="background-color:black;opacity:0.6;padding:30px;position:absolute;width:400px;height:400px;">
    <div id="inner" style="background-color:gray;opacity:1;height:100%;"></div>
</div> 
```

我想让`div#outer`不透明度为0.8，然后使`div#inner`不透明度（不透明度= 1）。

但是，这似乎不起作用。由于 的不透明度`div#outer`会影响`div#inner`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T05:30:03.583

> 但是，这似乎不起作用。由于 div#outer 的不透明度会影响 div#inner 的不透明度。

正确的。

* * *

但是如果你想要的只是一个半透明的背景，那么设置[RGBA 颜色](http://dev.w3.org/csswg/css3-color/#rgba-color)就`background-color`可以满足需要。像这样：

```
<div id="outer" style="background-color: rgba(0,0,0,0.6);padding:30px;position:absolute;width:400px;height:400px;">
    <div id="inner" style="background-color:gray;height:100%;"></div>
</div> 
```

* * *

有关更多信息，请在此处阅读 MDN 文档：[https ://developer.mozilla.org/en-US/docs/CSS/color](https://developer.mozilla.org/en-US/docs/CSS/color)

* * *

对于 IE 7 支持，我相信[这](https://stackoverflow.com/a/12588020/90172)（使用生成的背景图像文件）是一个可以接受的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:25:27.657

内部 div 将继承其容器的不透明度。

跨浏览器的解决方法是避免嵌套元素并改用绝对定位。您可以在此处看到一个示例，其中不透明度应用于背景，但文本的不透明度为 1： [http ://www.pathtosharepoint.com/Lists/May2010/calendar.aspx?CalendarDate=5%2F5%2F2010](http://www.pathtosharepoint.com/Lists/May2010/calendar.aspx?CalendarDate=5%2F5%2F2010)

代码示例（两个跨度元素并排放置在主跨度内，第二个是获取不透明度的背景）：

```
<span style="position:relative;display:inline-block;width:100%;height:100%;">
    <span style="width:100%;height:100%;display:inline-block;text-align:center;cursor:pointer;border:1px solid Red;position:absolute;color:Red;font-weight:bold;">
    11:00 AM  Image Capture &amp; ECM Using SharePoint
    </span>
    <span style="display:inline-block;width: 100%;height:100%;background-color:Red;text-align:center;border:1px solid;z-index:-1;filter:alpha(opacity=20);opacity:0.2;font-weight:bold;">
    11:00 AM Image Capture &amp; ECM Using SharePoint
    </span>
</span> 
```

# ios - 暂停 ASIHTTP 队列

> ID：14313627
> 
> 赞同：0
> 
> 时间：2013-01-14T05:20:50.340
> 
> 标签：ios, asihttprequest

我正在使用`ASINetworkQueue`一个 iPad 应用程序下载大约 50 个文件。我正在寻找一种允许用户`pause`和`resume`队列的方法。

`ASIHTTP`文档参考

> `[request setAllowResumeForFileDownloads:YES];`

但这在单个请求级别上运行，而不是在队列级别上。作为我也尝试过`ASINetworkQueue`的子类`NSOperationQueue`

```
[queue setSuspended:YES]; 
```

虽然这会暂停一个队列，但它不会影响正在进行的下载，它只是等到它们完成然后暂停队列，这在我的情况下意味着用户按下按钮和队列实际暂停之间的许多秒，这不是我想要的 UI 体验。

任何人都可以提出另一种解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:01:37.733

您可以在队列中迭代您的请求并暂停或恢复它们

```
for (ASIHTTPRequest *request in [self.netWorkQueue operations]) {
   //your code
} 
```

# java - JAVA GUI：在 MSP430 和笔记本电脑之间发送和接收数据

> ID：14313632
> 
> 赞同：-2
> 
> 时间：2013-01-14T05:21:48.207
> 
> 标签：java, serial-port, communication, msp430

我有一个要求，我需要在笔记本电脑和 MSP 430 设备之间建立通信。界面应该是JAVA GUI。

我有使用 MSP430 的经验和一点 JAVA 知识。

有人可以建议如何进行此操作或为此提供任何可用资源吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T05:28:48.623

> 我需要在笔记本电脑和 MSP 430 设备之间建立通信。界面应该是JAVA GUI。

请区分GUI界面和通信界面。他们不一样。

对于 Java GUI，您可以从[Swing](http://docs.oracle.com/javase/tutorial/uiswing/)开始。有一个`JButton`，`ActionListener`它会根据您的设备格式生成网络消息，并在单击按钮后发送。

# php - PHP - 未定义的数组

> ID：14313634
> 
> 赞同：0
> 
> 时间：2013-01-14T05:21:52.050
> 
> 标签：php, arrays, undefined

下面的类是我为我的网站构建的 mvc 结构的一部分。如果在 url 中没有任何请求的情况下调用 index.php，则该类可以生成一个页面。这是否是好的做法，我不知道。我是 php 新手，这是我第一次实现 mvc 结构。

```
<?php

class Default_Model
{
    private $defaultPage = array
    (
        'headline' => 'JOBBSÖKAREN', 
        'instruction' => 'logga in nedanför'    
    );

    public function __construct()
    {
    }

    public function getContent()
    {
line 17     return $defaultPage;
    }
}
?> 
```

这是错误消息：注意：未定义变量：第 17 行 /home/mengus/dev/www/models/default.php 中的 defaultPage

所以我不明白为什么数组是未定义的。我在其他类中使用类似的代码，它工作得很好。这是范围问题吗？我似乎因为盯着这个而失明了:)谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T05:22:39.957

要访问您需要使用的字段`$this`和`->`运算符

```
return $this->defaultPage; 
```

# admob - 从服务上下文 Android 显示 Admob 广告

> ID：14313641
> 
> 赞同：3
> 
> 时间：2013-01-14T05:22:57.507
> 
> 标签：admob

我想展示来自正在运行的服务的广告。我的服务检查剪贴板中的文本，并显示带有信息的弹出窗口（字典服务）。但是当我调试应用程序时，它显示错误：

```
Could not initialize AdView: AdView was initialized with a Context that wasn't an Activity. 
```

有人说没有活动上下文就无法启动。有什么解决办法吗？

我更新了下面的代码： 显示弹出窗口的代码：

```
 private void showCaptureWindow() {

    setTextToKeywordEdit(mClipboardText);

    makeDictContent(mClipboardText);

    if(!mDictContentView.hasFocus())
        mDictContentView.requestFocus();

    if(false == bHasAddedView)
    {
        int bgColor = MultiDictUtils.GetBgColor();
        int textColor = MultiDictUtils.GetTextColor();
        mParentViewLayout.setBackgroundColor(bgColor);
        mDictContentView.setBackgroundColor(bgColor);
        mLineView0.setBackgroundColor(textColor);
        mLineView1.setBackgroundColor(textColor);
        mLineView2.setBackgroundColor(textColor);
        mLineView3.setBackgroundColor(textColor);
        mLineView4.setBackgroundColor(textColor);           

        updateDisplaySize(true);

        mWindowParams.x = mWindow_Default_X;
        mWindowParams.y = mWindow_Default_Y;

        mWinStatus = 0;
        mWindowResizeBtn.setImageResource(R.drawable.ic_btn_max_win);
        // Look up the AdView as a resource and load a request.
        adView = (AdView)mCaptureWindowLayout.findViewById(R.id.adView);
        adView.loadAd(new AdRequest());
        mWindowManager.addView(mCaptureWindowLayout, mWindowParams);
        bHasAddedView = true;
    }
} 
```

初始化服务：

```
 private void initService() {
    MyLog.v(TAG, "initService()");

    mClipboardManager = (ClipboardManager) getSystemService(Context.CLIPBOARD_SERVICE);

    if(mClipboardManager.hasText())
    {
        mClipboardText = mClipboardManager.getText().toString();
    }

    LayoutInflater factory = LayoutInflater.from(this);
    mCaptureWindowLayout = (LinearLayout)factory.inflate(R.layout.capture_window, null);

    mWindowCloseBtn = (ImageButton)mCaptureWindowLayout.findViewById(R.id.windowCloseBtn);
    mWindowResizeBtn = (ImageButton)mCaptureWindowLayout.findViewById(R.id.windowResizeBtn);
    mWindowMoveBtn = (ImageButton)mCaptureWindowLayout.findViewById(R.id.windowMoveBtn);
    mWindowSchBtn = (ImageButton)mCaptureWindowLayout.findViewById(R.id.windowSchBtn);

    mKeywordEdit = (EditText)mCaptureWindowLayout.findViewById(R.id.keywordTxt);

    mParentViewLayout = (LinearLayout) mCaptureWindowLayout.findViewById(R.id.parentView);
    mLineView0 = (View) mCaptureWindowLayout.findViewById(R.id.lineView0);
    mLineView1 = (View) mCaptureWindowLayout.findViewById(R.id.lineView1);
    mLineView2 = (View) mCaptureWindowLayout.findViewById(R.id.lineView2);
    mLineView3 = (View) mCaptureWindowLayout.findViewById(R.id.lineView3);
    mLineView4 = (View) mCaptureWindowLayout.findViewById(R.id.lineView4);
    mDictContentView = (WebView)mCaptureWindowLayout.findViewById(R.id.dictContentWindow);
    mDictContentView.setWebViewClient(new DictWebViewClient(new ServiceWebViewClientCallback()));

    WebSettings webSettings = mDictContentView.getSettings();
    webSettings.setLayoutAlgorithm(WebSettings.LayoutAlgorithm.NARROW_COLUMNS);
    webSettings.setJavaScriptEnabled(true);
    webSettings.setSupportZoom(true); 
```

创建：

```
 @Override
public void onCreate() {

    mMultiDictUtils = new MultiDictUtils(this);

    mHandler = new Handler();

    mClipboardTask = new Runnable() {
        public void run() {

            clipboardCheck();

            mHandler.postDelayed(mClipboardTask, CLIPBOARD_TIMER);
        }
    };

    Runnable initServiceTask = new Runnable() {
        public void run() {

            initService();

            mHandler.postDelayed(mClipboardTask, CLIPBOARD_TIMER);
        }
    };

    mHandler.postDelayed(initServiceTask, 5000);

    super.onCreate();
} 
```

对不起，因为我不能在这里发布完整的代码。有服务检查剪贴板，然后在视图布局中显示内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:32:35.820

您可以在弹出窗口中显示广告（我假设您的意思是您从服务开始的活动）。您收到的错误是因为您正在使用不是 Activity 的 Context 对象创建 AdView。传入作为您的弹出窗口的 Activity。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-21T04:56:03.633

无法编辑您的代码，但可以，我们可以通过服务展示 Admob 广告。这是我在 InterstitialAd 应用程序中使用的代码：

```
public class ServiceAd extends Service {

private InterstitialAd mInterstitialAd;

@Nullable
@Override
public IBinder onBind(Intent intent) {
    return null;
}

@Override
public void onCreate() {
    super.onCreate();

    mInterstitialAd = new InterstitialAd(getApplicationContext());
    mInterstitialAd.setAdUnitId("ca-app-pub-3940256099942544/1033173712");
    mInterstitialAd.loadAd(new AdRequest.Builder().build());

    mInterstitialAd.setAdListener(new AdListener() {
        @Override
        public void onAdClosed() {
            // Load the next interstitial.
            mInterstitialAd.loadAd(new AdRequest.Builder().build());
            Log.d("tag", "on closed ad");
        }

    });

}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {

    new Handler().postDelayed(new Runnable() {
        @Override
        public void run() {
            if (mInterstitialAd.isLoaded()) {
                mInterstitialAd.show();
            } else {
                Log.d("tag", "The interstitial wasn't loaded yet.");
            }
        }
    }, 5000);   // 5 mins
    return START_STICKY;
}} 
```

首先，我在没有处理程序的情况下运行代码并且没有加载广告，所以我给了一些时间先加载广告。

希望这会有所帮助。

# jquery - 在 jQuery 的 $('selector').each() 中保存对此的引用

> ID：14313645
> 
> 赞同：0
> 
> 时间：2013-01-14T05:23:20.973
> 
> 标签：jquery

我正在将有关链接的信息存储在数组中。我希望以后能够通过 jQuery 引用这些链接。如何将每个链接的引用保存为与元素关联的信息的一部分？当我定义`reference: $(this)`, then总是指*每个*`reference`链接的 for 循环中的最后一个链接（即某种类型的引用问题）。

 *```
var linkInfo = new Array();

$("a").each(function(index, elt)  {
    var currentInfo = {};

    currentInfo.i = index;

    // Gather info about the <a> tag
    currentInfo.link = {
        reference: $(this), // todo fix this reference: info.link.reference yields last object
        offset: $(this).offset(), 
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T05:28:10.313

你的意思是：

```
$("a").each(function(index, elt)  {
    var currentInfo = {};
    var $that = $(this);
    currentInfo.i = index;

    // Gather info about the <a> tag
    currentInfo.link = {
        reference: $that, // todo fix this reference: info.link.reference yields last object
        offset: $(this).offset()
    }
} 
```*

# c# - 我可以将表单设为单例吗？

> ID：14313646
> 
> 赞同：4
> 
> 时间：2013-01-14T05:23:31.520
> 
> 标签：c#, winforms, singleton

我有一个 Visual C# 2010 应用程序，它有一个`MainWnd`与其他工具窗口和对话框一起调用的主窗体。我希望其他工具窗口能够与主窗体“对话”，并调用其方法。但这需要一个 的实例`MainWnd`，并且由于在任何给定时间只会创建这些表单中的一个，因此我没有理由枚举所有实例`MainWnd`或查找第一个实例。所以我希望我的主应用程序表单`MainWnd`是一个单例，以便其他窗口可以轻松地从中调用代码。

这是我想做一个单例的主要形式的代码：

```
using System;
using System.ComponentModel;
using System.Windows.Forms;

namespace MyLittleApp
{
    public partial class MainWnd : Form
    {
        public MainWnd()
        {
            InitializeComponent();
        }

        public void SayHello()
        {
            MessageBox.Show("Hello World!");

            // In reality, code that manipulates controls on the form
            // would go here. So this method cannot simply be made static.
        }
    }
} 
```

我希望能够`SayHello()`从另一种形式调用，只需编写：

```
MainWnd.SayHello(); 
```

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T05:29:08.000

您可能会找到一种使主窗口成为单例的方法，但这不是实现您想要的结果的最佳方式，也不是使用单例模式的合适情况。

如果所有其他工具窗口/对话框都封装在主窗口中，那么用于通信的更好的模式将是事件。

让内部窗口/对话框引发事件以表示主窗口执行某些操作的“请求”。让主窗口订阅这些事件，并通过事件处理程序完成工作。

通过避免单例方法，您可以避免测试单例的困难，也避免了广泛的显式循环引用，主窗口不仅引用了封装的窗口/对话框，而且它们又显式引用回主窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T05:31:31.850

见下文。

```
using System;
using System.ComponentModel;
using System.Windows.Forms;

namespace MyLittleApp
{
    public partial class MainWnd : Form
    {
       public static MainWnd Instance;
        public MainWnd()
        {
            Instance = this;
            InitializeComponent();
        }

        public void SayHello()
        {
            MessageBox.Show("Hello World!");

            // In reality, code that manipulates controls on the form
            // would go here. So this method cannot simply be made static.
        }
    }
} 
```

您现在可以通过调用在代码中的任何位置使用它`MainWnd.Instance` 所有成员也可用于实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T05:26:07.837

你当然可以做到这一点。

```
 public MainWnd Instance = new MainWnd(); 
```

然后访问为`MainWnd.Instance.SayHello()`.

替换以下调用

```
MainWind instance = new MainWnd(); 
```

到

```
 MainWnd instance = MainWnd.Instance; 
```

我不确定 Visual Studio 设计器在将构造函数设为私有后会如何反应。但如果不允许，那将是 Visual Studio 问题，而不是语言/编译器问题。

# android - 限制缩放卡在 Android 中

> ID：14313647
> 
> 赞同：1
> 
> 时间：2013-01-14T05:23:47.743
> 
> 标签：android, imageview, zooming

我使用以下代码来获得在 ImageView 上工作的图像缩放功能：

```
@Override
    public boolean onTouch(View v, MotionEvent event) {
        ImageView view = (ImageView) v;
        // Dump touch event to log
        dumpEvent(event);
        // Handle touch events here...
        switch (event.getAction() & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN:
            savedMatrix.set(matrix);
            start.set(event.getX(), event.getY());
            mode = DRAG;
            break;
        case MotionEvent.ACTION_POINTER_DOWN:
            oldDist = spacing(event);
            if (oldDist > 10f) {
                savedMatrix.set(matrix);
                midPoint(mid, event);
                mode = ZOOM;
            }
            break;
        case MotionEvent.ACTION_UP:
        case MotionEvent.ACTION_POINTER_UP:
            mode = NONE;
            break;
        case MotionEvent.ACTION_MOVE:
            if (mode == DRAG) {
                // ...
                matrix.set(savedMatrix);
                matrix.postTranslate(event.getX() - start.x, event.getY()
                        - start.y);
            } else if (mode == ZOOM) {
                float[] f = new float[9];
                matrix.getValues(f);
                float scaleX = f[Matrix.MSCALE_X];
                float scaleY = f[Matrix.MSCALE_Y];

                if (scaleX > MAX_ZOOM || scaleY > MAX_ZOOM || scaleX < MIN_ZOOM
                        || scaleY < MIN_ZOOM) {
                    System.out.println("@@@ true!!!");
                } else {
                    System.out.println("@@@ false!!!");
                    float newDist = spacing(event);
                    if (newDist > 10f) {
                        matrix.set(savedMatrix);
                        float scale = newDist / oldDist;
                        matrix.postScale(scale, scale, mid.x, mid.y);
                    }
                }
            }
            break;
        }

        view.setImageMatrix(matrix);
        return true; // indicate event was handled
    }

    /** Show an event in the LogCat view, for debugging */
    private void dumpEvent(MotionEvent event) {
        String names[] = { "DOWN", "UP", "MOVE", "CANCEL", "OUTSIDE",
                "POINTER_DOWN", "POINTER_UP", "7?", "8?", "9?" };
        StringBuilder sb = new StringBuilder();
        int action = event.getAction();
        int actionCode = action & MotionEvent.ACTION_MASK;
        sb.append("event ACTION_").append(names[actionCode]);
        if (actionCode == MotionEvent.ACTION_POINTER_DOWN
                || actionCode == MotionEvent.ACTION_POINTER_UP) {
            sb.append("(pid ").append(
                    action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
            sb.append(")");
        }
        sb.append("[");
        for (int i = 0; i < event.getPointerCount(); i++) {
            sb.append("#").append(i);
            sb.append("(pid ").append(event.getPointerId(i));
            sb.append(")=").append((int) event.getX(i));
            sb.append(",").append((int) event.getY(i));
            if (i + 1 < event.getPointerCount())
                sb.append(";");
        }
        sb.append("]");
    }

    /** Determine the space between the first two fingers */
    private float spacing(MotionEvent event) {
        float x = event.getX(0) - event.getX(1);
        float y = event.getY(0) - event.getY(1);
        return FloatMath.sqrt(x * x + y * y);
    }

    /** Calculate the mid point of the first two fingers */
    private void midPoint(PointF point, MotionEvent event) {
        float x = event.getX(0) + event.getX(1);
        float y = event.getY(0) + event.getY(1);
        point.set(x / 2, y / 2);
    } 
```

我这里有问题。我修改了代码以设置最大放大和缩小限制。我在这里面临的问题是，一旦我达到任何一个限制，因为我在“if”块中什么都没有，图像就会卡住。我应该在这里放什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T19:16:50.907

如果您使用 ScaleGestureDetector.SimpleOnScaleGestureListener 类，事情会容易得多......

```
class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {

  public boolean onScale(ScaleGestureDetector detector) {
        //update the current scale  
        scaleFactor *= detector.getScaleFactor();
        if(scaleFactor < MIN_SCALE_FACTOR || scaleFactor > MAX_SCALE_FACTOR){
            scaleFactor = Math.max(MIN_SCALE_FACTOR, 
                                      Math.min(scaleFactor, MAX_SCALE_FACTOR));
        transformMatrix.setScale(scaleFactor, scaleFactor);
    }
} 
```

`transformMatrix`是 imageview 的图像矩阵；您可以致电`imageView.getImageMatrix()`保存副本，然后像我一样重新申请`transformMatrix.setScale(scaleFactor, scaleFactor)`

如果您达到 MAX/MIN 缩放级别，这种方式不会冻结

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T05:32:57.380

希望这可能对面临同样问题的人有所帮助，此链接上的库帮助我轻松实现了缩放功能：

[https://github.com/sephiroth74/ImageViewZoom/blob/master/ImageViewTouchTest/src/it/sephiroth/android/library/imagezoom/test/ImageViewTestActivity.java](https://github.com/sephiroth74/ImageViewZoom/blob/master/ImageViewTouchTest/src/it/sephiroth/android/library/imagezoom/test/ImageViewTestActivity.java)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-14T06:36:49.817

试试这个代码。使用前请编辑。

```
public class GuessImageView extends ImageView {

    Matrix matrix = new Matrix();

    // We can be in one of these 3 states

    static final int NONE = 0;

    static final int DRAG = 1;

    static final int ZOOM = 2;

    public GuessImageActivity guessImage/* =new GuessImageActivity() */;

    public GuessImageView(Context context) {

        super(context);

        sharedConstructing(context);

    }

    public GuessImageView(Context context, AttributeSet attrs) {

        super(context, attrs);

        sharedConstructing(context);

    }

private void sharedConstructing(Context context) {

        super.setClickable(true);

        this.context = context;

        mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());

        matrix.setTranslate(1f, 1f);

        m = new float[9];

        setImageMatrix(matrix);

        setScaleType(ScaleType.MATRIX);

        setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {

                mScaleDetector.onTouchEvent(event);

                matrix.getValues(m);
                Log.e("Touch Count","Touch Count"+event.getPointerCount());
//              checkTouchEvent=event.getPointerCount();
                float x = m[Matrix.MTRANS_X];

                float y = m[Matrix.MTRANS_Y];

                PointF curr = new PointF(event.getX(), event.getY());

                switch (event.getAction()) {

                case MotionEvent.ACTION_DOWN:

                    last.set(event.getX(), event.getY());

                    start.set(last);

                    mode = DRAG;
                    isDrag=false;
                    // isDraw=false;

                    break;

                case MotionEvent.ACTION_MOVE:

                    // Log.i("onTouch", "origWidth : " + origWidth +

                    // " origHeight : " + origHeight);

                    if (mode == DRAG) {
Log.d("GuessImage","MODE:Drag");
                        // isDraw=false;

                        float deltaX = curr.x - last.x;

                        float deltaY = curr.y - last.y;

                        scaleWidth = Math.round(origWidth * saveScale);

                        scaleHeight = Math.round(origHeight * saveScale);

                        if (scaleWidth < width) {

                            deltaX = 0;

                            if (y + deltaY > 0)

                                deltaY = -y;

                            else if (y + deltaY < -bottom)

                                deltaY = -(y + bottom);

                        } else if (scaleHeight < height) {

                            deltaY = 0;

                            if (x + deltaX > 0)

                                deltaX = -x;

                            else if (x + deltaX < -right)

                                deltaX = -(x + right);

                        } else {

                            if (x + deltaX > 0)

                                deltaX = -x;

                            else if (x + deltaX < -right)

                                deltaX = -(x + right);

                            if (y + deltaY > 0)

                                deltaY = -y;

                            else if (y + deltaY < -bottom)

                                deltaY = -(y + bottom);

                        }

                        matrix.postTranslate(deltaX, deltaY);
                        last.set(curr.x, curr.y);

                    }
                    isDrag=true;
                    break;

                case MotionEvent.ACTION_UP: {

                    mode = NONE;

                    int xDiff = (int) Math.abs(curr.x - start.x);

                    int yDiff = (int) Math.abs(curr.y - start.y);

                    if (xDiff < CLICK && yDiff < CLICK) {

                        // isDraw=false;

                        Log.v("ACTION_UP", "ACTION_UP");

                        mPosX = curr.x;

                        mPosY = curr.y;

                        performClick();

//                      if (guessImage.guess_mode) {
                        checkTouchEvent=event.getAction();
                        Log.d("checkTouchEvent",checkTouchEvent+"checkTouchEvent");
                            lastTouchEvent = event.getAction();

                            isDrag=false;
//                      }

//                      else {
//
//                          lastTouchEvent = -1;
//
//                      }

                        // invalidate();

                    }

                    break;

                }

                case MotionEvent.ACTION_POINTER_UP:

                    mode = NONE;

                    break;

                }

                setImageMatrix(matrix);

                scaleWidth = Math.round(origWidth * saveScale);

                scaleHeight = Math.round(origHeight * saveScale);

                invalidate();

                return true; // indicate event was handled

            }

        });

    }

    @Override
    public void setImageBitmap(Bitmap bm) {

        super.setImageBitmap(bm);

        if (bm != null) {

            bmWidth = bm.getWidth();

            bmHeight = bm.getHeight();

        }

    }

    public void setMaxZoom(float x) {

        maxScale = x;

    }

    private class ScaleListener extends
    ScaleGestureDetector.SimpleOnScaleGestureListener {

        @Override
        public boolean onScaleBegin(ScaleGestureDetector detector) {

            mode = ZOOM;

            return true;

        }

        @Override
        public boolean onScale(ScaleGestureDetector detector) {

            float mScaleFactor = detector.getScaleFactor();

            float origScale = saveScale;

            saveScale *= mScaleFactor;

            if (saveScale > maxScale) {

                saveScale = maxScale;

                mScaleFactor = maxScale / origScale;

            } else if (saveScale < minScale) {

                saveScale = minScale;

                mScaleFactor = minScale / origScale;

            }

            right = width * saveScale - width
                    - (2 * redundantXSpace * saveScale);

            bottom = height * saveScale - height
                    - (2 * redundantYSpace * saveScale);

            // mPosX = mPosX + right / saveScale;

            // mPosY = mPosY + bottom / saveScale;

            if (origWidth * saveScale <= width
                    || origHeight * saveScale <= height) {

                float xMove = 0, yMove = 0;

                matrix.postScale(mScaleFactor, mScaleFactor, width / 2,
                        height / 2);

                if (mScaleFactor < 1) {

                    matrix.getValues(m);

                    float x = m[Matrix.MTRANS_X];

                    float y = m[Matrix.MTRANS_Y];

                    if (mScaleFactor < 1) {

                        if (Math.round(origWidth * saveScale) < width) {

                            if (y < -bottom) {

                                matrix.postTranslate(0, -(y + bottom));

                                xMove = 0;

                                yMove = -(y + bottom);

                            } else if (y > 0) {

                                matrix.postTranslate(0, -y);

                                xMove = 0;

                                yMove = -y;

                            }

                        } else {

                            if (x < -right) {

                                matrix.postTranslate(-(x + right), 0);

                                xMove = -(x + right);

                                yMove = 0;

                            } else if (x > 0) {

                                matrix.postTranslate(-x, 0);

                                xMove = -(x + right);

                                yMove = 0;

                            }

                        }

                        Log.i("onScale", "mPosX " + mPosX + " mPosX " + mPosX);

                    }

                }

            } else {

                float xMove = 0, yMove = 0;

                matrix.postScale(mScaleFactor, mScaleFactor,
                        detector.getFocusX(), detector.getFocusY());

                matrix.getValues(m);

                float x = m[Matrix.MTRANS_X];

                float y = m[Matrix.MTRANS_Y];

                if (mScaleFactor < 1) {

                    if (x < -right) {

                        matrix.postTranslate(-(x + right), 0);

                        xMove = -(x + right);

                        yMove = 0;

                    } else if (x > 0) {

                        matrix.postTranslate(-x, 0);

                        xMove = -x;

                        yMove = 0;

                    }

                    if (y < -bottom) {

                        matrix.postTranslate(0, -(y + bottom));

                        xMove = 0;

                        yMove = -(y + bottom);

                    } else if (y > 0) {

                        matrix.postTranslate(0, -y);

                        xMove = 0;

                        yMove = -y;

                    }

                }

                Log.i("onScale", "mPosX " + mPosX + " mPosX " + mPosX);

            }

            return true;

        }

    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {

        if (!isCheckLoadImage) {

            width = MeasureSpec.getSize(widthMeasureSpec);

            height = MeasureSpec.getSize(heightMeasureSpec);

            // Fit to screen.

            float scale;

            float scaleX = (float) width / (float) bmWidth;

            float scaleY = (float) height / (float) bmHeight;

            scale = Math.min(scaleX, scaleY);

            matrix.setScale(scale, scale);

            setImageMatrix(matrix);

            saveScale = 1f;

            // Center the image

            redundantYSpace = (float) height - (scale * (float) bmHeight);

            redundantXSpace = (float) width - (scale * (float) bmWidth);

            redundantYSpace /= (float) 2;

            redundantXSpace /= (float) 2;

            matrix.postTranslate(redundantXSpace, redundantYSpace);

            origWidth = width - 2 * redundantXSpace;

            origHeight = height - 2 * redundantYSpace;

            right = width * saveScale - width
                    - (2 * redundantXSpace * saveScale);

            bottom = height * saveScale - height
                    - (2 * redundantYSpace * saveScale);

            setImageMatrix(matrix);

        }

        super.onMeasure(widthMeasureSpec, heightMeasureSpec);

    }

} 
```

# c# - 使用 C# 驱动程序更新/删除 mongodb 中的子文档

> ID：14313649
> 
> 赞同：4
> 
> 时间：2013-01-14T05:23:49.910
> 
> 标签：c#, mongodb, mongodb-.net-driver

我有 2 节课：

```
public class Vote
{
    public string VoteId { get; set; }
    public string Question { get; set; }
    public List<VoteAnswer> AnswerList { get; set; }
} 
```

和：

```
public class VoteOption
{
    public string OptionId { get; set; }
    public string OptionName { get; set; }
    public double VoteCount { get; set; }
} 
```

如何更新/删除where`VoteOption`和？使用驱动程序。`Vote``VoteId = voteId``OptionId = optionId``C#`

首先，我通过以下方式获得 VoteOption：

```
 var v = col.FindOneAs<Vote>(Query.EQ("VoteID", voteId));
        VoteOption vo = v.AnswerList.Find(x => x.OptionId == optionId); 
```

End 为其设置一些值：

```
vo.OptionName = "some option chose";
vo.VoteCount = 1000; 
```

但我不知道下一步将其更新`vo`为`Vote parent`.

而且，如果我想删除它`vo`，请告诉我！

MongoDB中的数据是这样的：

```
{
  "_id" : "460b3a7ff100",
  "Question" : "this is question?",
  "AnswerList" : [{
      "OptionId" : "1",
      "OptionName" : "Option 1",
      "VoteCount" : 0.0
    }, {
      "OptionId" : "2",
      "OptionName" : "Option 2",
      "VoteCount" : 0.0
    }, {
      "OptionId" : "3",
      "OptionName" : "Option 3",
      "VoteCount" : 0.0
    }
    }]
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-14T09:03:20.627

要更新子文档，您可以使用：

```
var update = Update.Set("AnswerList.$.OptionName", "new").Set("AnswerList.$.VoteCount", 5);
collection.Update(Query.And(Query.EQ("_id", new BsonObjectId("50f3c313f216ff18c01d1eb0")), Query.EQ("AnswerList.OptionId", "1")), update); 
```

分析器：

```
"query" : { "_id" : ObjectId("50f3c313f216ff18c01d1eb0"), "AnswerList.OptionId" : "1" },
"updateobj" : { "$set" : { "AnswerList.$.OptionName" : "new", "AnswerList.$.VoteCount" : 5 } } 
```

并删除：

```
var pull = Update<Vote>.Pull(x => x.AnswerList, builder => builder.EQ(q => q.OptionId, "2"));
collection.Update(Query.And(Query.EQ("_id", new BsonObjectId("50f3c313f216ff18c01d1eb0")), Query.EQ("AnswerList.OptionId", "2")), pull); 
```

分析器：

```
"query" : { "_id" : ObjectId("50f3c313f216ff18c01d1eb0"), "AnswerList.OptionId" : "2" },
"updateobj" : { "$pull" : { "AnswerList" : { "OptionId" : "2" } } } 
```

另一种方法是使用修改后的子集合更新父文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-17T12:23:32.950

```
// Example function for update like count add like user  using c#    
public PostModel LikeComment(LikeModel like)
{
    PostModel post = new PostModel();

    _client = new MongoClient();
    _database = _client.GetDatabase("post");
    var collection = _database.GetCollection<PostModel>("post");

    var _filter = Builders<PostModel>.Filter.And(
    Builders<PostModel>.Filter.Where(x => x.PostId == like.PostId),
    Builders<PostModel>.Filter.Eq("Comments.CommentId", like.CommentId));

    var _currentLike = collection.Find(Builders<PostModel>.Filter.Eq("PostId", like.PostId)).FirstOrDefault().Comments.Find(f => f.CommentId == like.CommentId).Like;

    var update = Builders<PostModel>.Update.Set("Comments.$.Like", _currentLike + 1);
    collection.FindOneAndUpdate(_filter, update);

    var addUser = Builders<PostModel>.Update.Push("Comments.$.LikeUsers", like.UserId);
    collection.FindOneAndUpdate(_filter, addUser);

    var _findResult = collection.Find(_filter).FirstOrDefault();

    return _findResult;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-17T12:26:36.433

```
//Delete comment
public PostModel delcomment(int postId, int commentId)
{
    _client = new MongoClient();
    _database = _client.GetDatabase("post");
    var collection = _database.GetCollection<PostModel>("post");

    var filter = Builders<PostModel>.Filter.Eq("PostId", postId);

    var update = Builders<PostModel>.Update.PullFilter("Comments",
    Builders<Comments>.Filter.Eq("CommentId", commentId));

    collection.FindOneAndUpdate(filter, update);

    var _findResult = collection.Find(filter).FirstOrDefault();
    return _findResult;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-30T16:09:12.903

**迟到的答案**，但这是你在没有字符串的情况下如何做到的。如果您修改您的属性代码将无法编译。第一次在生产代码中使用表达式尝试！他们真棒！

楷模：

```
class Phone
{
  public string _id { get; set; }
  public string Name { get; set; }
  public DateTime DateCreated { get; set; }

            // Contain multiple lines as subdocument
  public List<Line> Lines { get; set; }
}

class Line
{
   public string Name { get; set; }
   public string PhoneNumber { get; set; }
} 
```

**代码：** 这就是我不依赖字符串创建更新语句的方式。

```
var update = new UpdateDocument<Phone>();

// set filter
update.SetFilter(x => x._id == "123456789");

update.AddValueToUpdate(p => p.Name, "New Name");
update.AddValueToUpdate(p => p.Lines[0].Name, "Line 1");
update.AddValueToUpdate(p => p.Lines[1].Name, "Line 2");
update.AddValueToUpdate(p => p.DateCreated, DateTime.UtcNow);

var updateQuery = update.Build(); 
```

这创造了这个！这就是您需要传递给 mondo 才能进行更新的内容

```
{ "_id" : "123456789" },
{$set:
  {"Name":"New Name","Lines.0.Name":"Line 1","Lines.1.Name":"Line 2","DateCreated":ISODate("2021-04-30T16:04:59.332Z")}
} 
```

如果您希望该代码在此处工作，请使用帮助程序类：

```
 using MongoDB.Bson;
using System.Linq.Expressions;
using MongoDB.Bson.Serialization;

class UpdateDocument<T>
{
    /// <summary>
    ///     _id of document to update. 
    /// </summary>
    private string _filter;

    /// <summary>
    ///     Example:
    ///     FirstName, Antonio
    ///     Education.Elementary.Year, 2004
    /// </summary>
    private List<KeyValuePair<string, object>> _valuesToUpdate { get; set; } = new List<KeyValuePair<string, object>>();

    public void SetFilter(Expression<Func<T, bool>> filterDefinition)
    {
        var documentSerializer = BsonSerializer.SerializerRegistry.GetSerializer<T>();
        var where = Builders<T>.Filter.Where(filterDefinition).Render(documentSerializer, BsonSerializer.SerializerRegistry);
        _filter = where.ToJson();
    }

    public void AddValueToUpdate(string name, object value)
    {
        _valuesToUpdate.Add(new KeyValuePair<string, object>(name, value));
    }

    public void AddValueToUpdate(Expression<Func<T, object>> name, object value)
    {
        var memberExpression = name.Body as MemberExpression;
        if (memberExpression == null)
        {
            var unaryExpression = name.Body as UnaryExpression;
            if (unaryExpression != null && unaryExpression.NodeType == ExpressionType.Convert)
                memberExpression = unaryExpression.Operand as MemberExpression;
        }

        var result = memberExpression.ToString();
        result = result.Substring(result.IndexOf('.') + 1);

        if (result.Contains("get_Item"))
            result = Regex.Replace(result, @"(?x) get_Item \( (\d+) \)", m => $"{m.Groups[1].Value}");

        AddValueToUpdate(result, value);
    }

    public string Build()
    {
        if (_valuesToUpdate.Any() == false)
        {
            // nothing to update
            return null;
        }

        /*
update({ 
_id: 7, 
"comments._id": ObjectId("4da4e7d1590295d4eb81c0c7")
},{
$set: {"comments.$.type": abc}
}, false, true
);
            */

        StringBuilder sb = new StringBuilder();

        sb.Append(_filter);
        sb.Append(',');

        sb.Append("{");
        {
            sb.Append("$set:{");
            foreach (var item in _valuesToUpdate)
            {
                sb.Append('"');
                sb.Append(item.Key);
                sb.Append('"');
                sb.Append(':');

                var value = BsonExtensionMethods.ToJson(item.Value);
                sb.Append(value);
                sb.Append(',');
            }
            // remove last comma
            sb.Length--;
            sb.Append('}');
        }
        sb.Append("}");

        return sb.ToString();

    }

} 
```

# c# - C# 和 .NET 框架

> ID：14313651
> 
> 赞同：-5
> 
> 时间：2013-01-14T05:24:30.207
> 
> 标签：c#, .net, frameworks

我将开始与一家使用 .NET 框架的公司合作，我是一名专业的 java 开发人员，我认为我应该切换到 .NET，因为我再也看不到 java 的任何光明未来。我的问题：现在我决定迁移到 .NET，作为一个初学者应该学习什么。我应该学习 C# 还是应该先了解 .NET 的基础知识？我只知道 .Net 是一个框架，而 c# 是在其上运行的一种语言。我只对 C# 感兴趣，因为它不像在 VB 或任何其他中的 java。请告诉我我想学什么，并请给我参考一些书。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T05:30:22.683

您的理解是正确的，.Net 是通过多种语言（如 C#、VB 等）支持的底层可移植框架。如果您正在寻找编程语言方面的 Java 等价物，那么 C# 正是您想要工作的和。

最好的 C# 书籍之一是[C# via CLR](https://rads.stackoverflow.com/amzn/click/com/0735667454) ，它通过对底层 CLR 的理解教你 C#。它更像是一本中高级水平的书，但考虑到你的 Java 背景，基础知识应该很容易掌握。

# ruby-on-rails - ruby on rails 中的字符串操作

> ID：14313652
> 
> 赞同：0
> 
> 时间：2013-01-14T05:24:38.837
> 
> 标签：ruby-on-rails, regex, string

我有一个格式的字符串，

```
/d.phpsoft_id=369242&url=http://f.1mobile.com/mobile_software/finance/com.mshift.android.achieva_2.apk 
```

我需要使用正则表达式编辑这个字符串，结果字符串应该从http开始：即resultatnt字符串应该是

```
http://f.1mobile.com/mobile_software/finance/com.mshift.android.achieva_2.apk 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T05:46:30.257

对于这些类型的情况，我更喜欢使用现成的工具来帮助提供解决方案，或者至少可以为我指明正确的方向。我最喜欢的正则表达式是[txt2re](http://txt2re.com/)，因为它会输出多种语言的示例代码，包括 ruby​​。

通过解析器运行您的字符串并选择 httpurl 进行匹配后，它会[输出](http://txt2re.com/index-ruby.php3?s=/d.phpsoft_id=369242&url=http://f.1mobile.com/mobile_software/finance/com.mshift.android.achieva_2.apk&1)：

```
txt='/d.phpsoft_id=369242&url=http://f.1mobile.com/mobile_software/finance/com.mshift.android.achieva_2.apk'

re1='.*?'   # Non-greedy match on filler
re2='((?:http|https)(?::\\/{2}[\\w]+)(?:[\\/|\\.]?)(?:[^\\s"]*))'   # HTTP URL 1

re=(re1+re2)
m=Regexp.new(re,Regexp::IGNORECASE);
if m.match(txt)
    httpurl1=m.match(txt)[1];
    puts "("<<httpurl1<<")"<< "\n"
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T05:34:38.087

```
str = "/d.phpsoft_id=369242&url=http://f.1mobile.com/mobile_software/finance/com.mshift.android.achieva_2.apk"

str.spl­it("url=")­[1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T05:54:52.407

**简单的答案**

您需要执行以下操作

```
str = "/d.phpsoft_id=369242&url=http://f.1mobile.com/mobile_software/finance/com.mshift.android.achieva_2.apk"

start=str.index('http://')

resultant=str[start,str.length] 
```

# java - 如何在Android中单击功能的下一个活动中获取href路径

> ID：14313658
> 
> 赞同：0
> 
> 时间：2013-01-14T05:25:26.683
> 
> 标签：java, android

```
 <html>

    <a href="\\\\192.168.1.102\\\\Data\\ACT\\OTHERACTS\\HTMLFILES\\2009\\ftn1acsdiv2.htm");'><span class=GramE>1a</span></a></sup>[(</span><i><span
    style='mso-bidi-font-family:AsterV'>ca</span></i><span 
style='mso-bidi-font-family:
    AsterV'>)<span style='mso-tab-count:1'>  
</span>“firm” shall have the meaning
    assigned to it in section 4 of the Indian Partnership Act, 1932 (9 of 1932),
    and includes,—&lt;o:p></o:p>
</span></p>
     </html>

in this 1a[(ca)  is click able . this is Html content i want to print
 <a href="\\\\192.168.1.102\\\\Data\\ACT\\OTHERACTS\\HTMLFILES\\2009\\ftn1csdiv2.htm");'> its file path in another activity on click 
```

函数我有动态href我将如何在android的另一个活动中获得它的路径

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T05:58:57.383

你好@Joan 我认为只需提取链接并通过意图传递它就足够了。或首先通过意图将其发送到另一个活动，然后提取。如果我没有错误地理解这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T07:07:35.033

根据您的评论，我理解的是，您想打开 webview 在新活动中包含的每个链接（可能有另一个 webivew）。正确的？

```
 webView.setWebViewClient(new WebViewClient() {            
        public boolean shouldOverrideUrlLoading(WebView view, String url) {

            Bundle b = new Bundle();                
            Intent intent = new Intent(MyThisActivity.this, MySecondActivity.class);
            b.putString("newURL", url);                
            startActivity(intent);
            return true;
        }
    }); 
```

# java - 具有 HTML 样式语法的编程语言

> ID：14313669
> 
> 赞同：0
> 
> 时间：2013-01-14T05:27:17.070
> 
> 标签：java, html, xml

从理论上讲，是否可以使用冗长的“HTML 样式”标记来表示 Java 编程语言的语法，然后将其转换为普通的 Java 代码？我认为这种类型的修改语法可能会提高代码的可读性，但可能会牺牲简洁性。

一个由两个类组成的示例程序，使用普通的 Java 语法：

```
public class HelloWorld{
    public void doStuff(){
        System.out.println("Hello World!");
    }
}

public class MainClass{
    public static void main(String[] args){
        HelloWorld.doStuff();
    }
} 
```

相同的程序，带有建议的“HTML 样式”标记（被翻译成普通的 Java 语法）：

```
<class = "public class HelloWorld">
    <function = "public void doStuff()">
        System.out.println("Hello World!");
    </function>
</class>

<class = "public class MainClass">
    <function = "public static void main(String[] args)">
        HelloWorld.doStuff();
    </function>
</class> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T05:35:36.960

[Coldfusion](http://en.wikipedia.org/wiki/Adobe_ColdFusion)是一种具有 HTML 或 XML 样式语法的语言，用于构建 Web 应用程序。

我认为他们认为 HTML 程序员会熟悉它（事实上，我认为它的一些标签是 HTML 标签，但我不是 CF 专家）。

我所看到的很少，并没有压倒我在未来以这种方式编码的愿望。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T05:31:50.453

我认为您正在寻找类似 JHTML 的东西：

从这个链接[http://docs.oracle.com/cd/E13222_01/wls/docs45/classdocs/API_jhtml.html](http://docs.oracle.com/cd/E13222_01/wls/docs45/classdocs/API_jhtml.html)我可以引用：

您可以在 JHTML 文件的标记之间声明类范围对象，例如变量、方法和内部类。您可以在 JHTML 中使用任意数量的此类 java 标记，但出于可维护性的原因，我们建议您在 JHTML 的开头将相关变量组合在一起。在以下示例中，我们设置了一些由 HTTP servlet 类使用的变量。我们已经从上面的标签中取出了这些，以便可以从其他方法访问它们，并且它们不会在每次调用时都实例化。新的变量声明现在如下所示：

```
<html>
<java type=class>
String jdbcClass = "weblogic.jdbc.oci.Driver";
String jdbcURL   = "jdbc:weblogic:oracle:goldengate";
String user = "scott";
String password = "";
</java>
</html> 
```

在大多数情况下，由于 servlet 线程问题，最好使用方法范围的变量。这意味着要么在其他方法中声明变量，要么直接在服务方法的主体中（即，仅在普通标签内）。有关线程和 servlet 的更多详细信息，请参阅 servlet 开发人员指南中的 HTTP servlet 中的线程问题。

他的示例说明了如何在从主块调用的 JHTML 文件中定义一个类方法。

简短的方法 getCon() 初始化 JDBC Connection 对象，该对象在 servlet 的其他地方使用。请注意，我们将方法的工作包装在 try 块中，因此失败不会破坏 servlet。

```
<java type=class>
  static final String jdbcClass = 
        "weblogic.jdbc.oci.Driver";
  static final String jdbcURL   = 
        "jdbc:weblogic:oracle:goldengate";
  static final String user      = "scott";
  static final String password  = "tiger";

  protected Connection getCon() {
    Connection conn  = null;
    try { 
      Class.forName(jdbcClass).newInstance();
      conn = DriverManager.getConnection(jdbcURL, 
                                         user, password);
    }
    catch (Exception f) {
    }
    return conn;
  }
</java> 
```

您可以从 JHTML 中的任何其他 Java 代码调用此方法。请注意，在此块中声明的其他变量位于类范围内，因此它们也可以从 JHTML 中的任何块中引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T05:41:05.160

是的，这是可能的，但不要——这真的很可怕。

像这样的语言的另一个例子是蚂蚁。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T08:33:39.400

是的，这当然是可能的。可以使用 BNF 语法描述的任何语言都可以使用 XML 标记来表达，并且可以使用 HTML 标记进行更多的扭曲（在 HTML 中更难，因为您有固定的词汇表，但您可以使用`<div class="X">`而不是来解决这个问题`<X>`） .

执行此操作的示例是语言对 XQuery / XQueryX，其中 XQueryX 是 XQuery 语言的 XML 表示。

是否有用是另一个问题。对输入和输出都是 XML 的语言（例如 XSLT）使用基于 XML 的语法是有好处的，但是要付出冗长的代价。

# magento - 使用自定义模块显示块

> ID：14313672
> 
> 赞同：0
> 
> 时间：2013-01-14T05:27:27.350
> 
> 标签：magento

我创建了一个自定义模块来处理我们的会员系统的各种任务。我现在正在尝试修改模块，以便我可以在任何我想要的地方放入一个块。我一直在关注[Gravitywell.com](http://www.gravitywell.co.uk/blog/post/how-to-creating-your-own-custom-block-in-magento)上的教程，但我感觉我在某个地方掉队了。

**应用程序/etc/modules/Hatclub_MembershipHandler.xml**

```
<config>
<modules>
    <Hatclub_MembershipHandler>
        <active>true</active>
        <codePool>local</codePool>
    </Hatclub_MembershipHandler>
</modules> 
```

**应用程序/代码/本地/Hatclub/MembershipHandler/Block/lookup.php**

```
<?php

class Hatclub_MembershipHandler_Block_Lookup extends Mage_Core_Block_Template {    

} 
```

**应用程序/代码/本地/Hatclub/MembershipHandler/etc/config.xml**

```
<modules>
    <Hatclub_MembershipHandler>
        <version>1.0.0</version>
    </Hatclub_MembershipHandler>
</modules>

<global>

    <models>
        <hatclub_membership_handler>
            <class>Hatclub_MembershipHandler_Model</class>
        </hatclub_membership_handler>
    </models>

    <blocks>
        <hatclub_membership_handler>
            <class>Hatclub_MembershipHandler_Block</class>
        </hatclub_membership_handler>
    </blocks>

    <events>

        <customer_register_success>
            <observers>
                <registration_success_observer>
                    <class>hatclub_membership_handler/observer</class>
                    <method>registrationSuccess</method>
                    <type>singleton</type>
                </registration_success_observer>
            </observers>
        </customer_register_success>

    </events>

</global> 
```

**app/code/local/Hatclub/MembershipHandler/Model/Observer.php**

```
<?php

class Hatclub_MembershipHandler_Model_Observer {

    // members group id
    const GROUP_ID = 4;

    // called when a customer registers for the site
    public function registrationSuccess(Varien_Event_Observer $observer) {

        // extract customer data from event
        $customer = $observer->getCustomer();

        // a cookie should have been set with the membership id
        if (isset($_COOKIE['membership_account_id'])) {

            $customer
                ->setGroupId(self::GROUP_ID)
                ->setRmsId($_COOKIE['membership_account_id']);

        }

        return $this;

    }

} 
```

**/app/design/frontend/enterprise/hatclub/template/persistent/customer/form/register.phtml**

```
<?php 
    echo $this->getLayout()->createBlock('hatclub_membership_handler/lookup')->setTemplate('membership_lookup/lookup.phtml')->toHtml(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T05:55:22.877

**文件app/code/local/Hatclub/MembershipHandler/etc/config.xml中****blocks**节点下的代码应如下所示

 **```
<blocks>
            <membershiphandler>
                <class>Hatclub_MembershipHandler_Block</class>
            </membershiphandler>
</blocks> 
```

**memberhandler**代表你的模块名称的小写版本和

```
<?php 
    echo $this->getLayout()->createBlock('hatclub_membership_handler/lookup')->setTemplate('membership_lookup/lookup.phtml')->toHtml(); ?> 
```

应该

```
<?php 
        echo $this->getLayout()->createBlock('membershiphandler/lookup')->setTemplate('path to the template file')->toHtml(); ?> 
```**

# ruby - 红宝石到底是什么|变量| 退货，我为什么要使用它？

> ID：14313673
> 
> 赞同：0
> 
> 时间：2013-01-14T05:27:38.650
> 
> 标签：ruby

我正在关注 Rails 教程，并在我`class User < ActiveRecord::Base`编写以下代码以使电子邮件地址小写：

```
before_save { |user| user.email = email.downcase } 
```

但是这`|user|`在红宝石中有什么意义呢？以前我在红宝石循环中看到过它。我没有得到合适的搜索关键字。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T05:29:54.410

```
{ |user| user.email = email.downcase } 
```

这是一个块。`user`是块参数。`before_save`是一个方法，它接受一个块，保存它并稍后调用，将 User 的当前实例作为参数传递。

# php - 在特定时间使用 PHP 定期发送邮件

> ID：14313676
> 
> 赞同：1
> 
> 时间：2013-01-14T05:28:12.643
> 
> 标签：php, mysql, triggers, cron

我有三个mysql表；`Users`,`Tasks`和`Task_Users`, 每个用户都可以通过我用 PHP 开发的 web 应用程序来创建他们的任务。

问题是，我希望我的应用程序在任务发生前一天向用户发送一封电子邮件。我想到的第一件事是做一个 MySQL 工作或触发发送电子邮件，但我不知道如何做 id，

实现这一点的最佳方法是什么，或者我如何通过 PHP 调用一项工作并每天执行它并验证在任务发生前只剩下一天，然后如果这是真的发送电子邮件？

这是我的表定义。提前致谢。

```
Users
----------
UserId,Names,email,pass

Tasks
------------
TaskId,TaskName,Descripcion,TaskDateTime

Tasks_Users
------------
TaskId,UserID 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T05:36:46.060

您可以为此编写 CRON 作业。

***什么是 CRON 工作？***

Cron 是使 unix 用户能够在指定的时间/日期自动执行命令或脚本（命令组）的程序的名称。它通常用于系统管理员命令，例如 makewhatis，它为 man -k 命令构建搜索数据库，或用于运行备份脚本，但可以用于任何事情。今天它的一个常见用途是连接到互联网并下载您的电子邮件。

***你必须做什么？***

只需编写一个普通的 PHP 脚本。如果它直接从浏览器启动，则可以制作一个。然后将相同的 PHP 文件安排在 cron 中运行，以此为指导：

***编写完成后如何运行 CRON 作业？***

[http://www.inmotionhosting.com/support/edu/cpanel/301-run-cron-job](http://www.inmotionhosting.com/support/edu/cpanel/301-run-cron-job)

如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T05:34:07.417

我会做一个定期运行脚本的 cron 作业（比如每 5 分钟一次？），它检查需要发送电子邮件的任务。然后脚本脚本发送必要的电子邮件。

```
*/5 * * * * php /path/to/script.php 
```

将调用每 5 分钟检查和发送电子邮件的 script.php。

有关 cron 的一些信息在这里： http: [//www.pantz.org/software/cron/croninfo.html](http://www.pantz.org/software/cron/croninfo.html)

# ruby - 使用 shoes ruby 框架访问 Msacess 数据库

> ID：14313679
> 
> 赞同：1
> 
> 时间：2013-01-14T05:28:33.883
> 
> 标签：ruby, ms-access, shoes

谁能告诉我如何使用鞋子（ruby 框架）访问 ms 访问数据库。我想在鞋子中创建一个表格，任何人都可以帮助我解决这个问题。

# objective-c - iOS - 解析 xml 数据集

> ID：14313681
> 
> 赞同：0
> 
> 时间：2013-01-14T05:28:55.317
> 
> 标签：objective-c, soap, xml-parsing, nsurlconnection, nsxmlparser

这是我需要解析的 XML 数据

```
 <GetMessagesResult>
    <NewDataSet xmlns="">
       <Table>
          <Date>21:52:59</Date>
          <Message>ABC</Message>
          <GroupName>ALL</GroupName>
       </Table>
       <Table>
          <Date>11:23:27</Date>
          <Message>DEF</Message>
          <GroupName>ALL</GroupName>
       </Table>
   </NewDataSet>
 </GetMessagesResult> 
```

这是我的 SCMessages.h 文件

```
#import <Foundation/Foundation.h>
@interface SCMessages : NSObject
{
    NSDate *Date;
    NSString *Message;
    NSString *GroupName;
}
@property (nonatomic, retain) NSDate *Date;
@property (nonatomic, retain) NSString *Message;
@property (nonatomic, retain) NSString *GroupName; 
```

这是我的 SCMessages.m 文件

```
#import "SCMessages.h"
@implementation SCMessages
@synthesize Date;
@synthesize Message,GroupName;
- (void)dealloc
{
    [super dealloc];
    [Date release];
    [Message release];
    [GroupName release];
}
@end 
```

我使用下面的代码使用`NSXMLParser`委托方法解析数据

```
#pragma mark - NSXMLParser Delegate

-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *) namespaceURI qualifiedName:(NSString *)qName
   attributes: (NSDictionary *)attributeDict
{
    if( [elementName isEqualToString:@"GetMessagesResult"])
    {
        if(!soapResults)
        soapResults = [[NSMutableString alloc] init];
        recordResults = TRUE;
    }

    if([elementName isEqualToString:@"NewDataSet"]) {
        //Initialize the array.
        messages = [[NSMutableArray alloc] init];
    }
    else if([elementName isEqualToString:@"Table"]) {
        //Initialize the message.
        aMessage = [[SCMessages alloc] init];
    }
}
-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if( recordResults )
        [soapResults appendString: string];
}
-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if([elementName isEqualToString:@"Table"]) {
        [messages addObject:aMessage];
            NSLog(@"MESSAGES COUNT: %d",messages.count);
            NSLog(@"MESSAGE: %@",aMessage);
        [aMessage release];
        aMessage = nil;
    }
    // as this is the last element
    if( [elementName isEqualToString:@"NewDataSet"])
    {
        recordResults = FALSE;
    }
} 
```

**问题** *我没有得到所需的带有日期、消息和组名的消息对象。*

我把`NSLog`它们打印出来，但我总是得到空值。奇怪的是消息数组被分配了内存并且元素也被添加到数组中，因为我可以看到消息数组计数`NSLog`但数组元素的数据为空值。

我正在解析在 NSURLConnection 委托方法中的 SOAP 响应中收到的 XML 数据`connectionDidFinishLoading`

```
NSString *theXML = [[NSString alloc] initWithBytes: [webData mutableBytes] length:[webData length] encoding:NSUTF8StringEncoding];
    NSLog(@"theXML: \n%@",theXML); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:27:20.080

您的 didEnd 方法缺少将累积的字符串存储到属性中的代码。您需要当前 SCMessage 对象的 ivar。

将文本内容附加到可变字符串 ivar。然后在关闭一个元素时，您必须决定在 SCMessage 上设置哪个属性。您可能必须将日期解析为 NSDate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:09:06.620

您需要将值存储在`aMessage`. 您已将特定对象添加到数组，但您忘记将数据存储在 SCMessages 类的该对象中。您还可以在调试时检查您是否在`aMessage`对象中获得值。

您需要在此`didEndElement`方法中存储这样的值。

```
 [aMessage setValue: soapResults forKey:elementName]; 
```

我想这会对你有所帮助。

# c# - 远程服务器返回意外响应：(405) Method Not Allowed

> ID：14313685
> 
> 赞同：0
> 
> 时间：2013-01-14T05:29:11.090
> 
> 标签：c#, asp.net, visual-studio-2010, wcf

我有以下代码：

这给我返回了以下异常：

```
ProtocolException was unhandled by user code

The remote server returned an unexpected response: (405) Method Not Allowed. 
```

我尝试使用以下命令（`Administrator`在命令提示符中使用）：

```
C:\Windows\Microsoft.NET\Framework\v3.0\Windows Communication Foundation>ServiceModelReg.exe -i 
```

并出现以下内容：

```
Microsoft(R) Windows Communication Foundation Installation Utility
[Microsoft (R) Windows (R) Communication Foundation, Version 3.0.4506.5420]
Copyright (c) Microsoft Corporation.  All rights reserved.

Installing: Machine.config Section Groups and Handlers (WOW64)

Installing: Machine.config Section Groups and Handlers

Installing: System.Web Build Provider (WOW64)

Installing: System.Web Compilation Assemblies (WOW64)

Installing: HTTP Handlers (WOW64)

Installing: HTTP Modules (WOW64)

Installing: System.Web Build Provider

Installing: System.Web Compilation Assemblies

Installing: HTTP Handlers

Installing: HTTP Modules

Installing: Protocol node for protocol net.tcp (WOW64)

Installing: TransportConfiguration node for protocol net.tcp (WOW64)

Installing: ListenerAdapter node for protocol net.tcp

Installing: Protocol node for protocol net.tcp

Installing: TransportConfiguration node for protocol net.tcp

Installing: Protocol node for protocol net.pipe (WOW64)

Installing: TransportConfiguration node for protocol net.pipe (WOW64)

Installing: ListenerAdapter node for protocol net.pipe

Installing: Protocol node for protocol net.pipe

Installing: TransportConfiguration node for protocol net.pipe

Installing: Protocol node for protocol net.msmq (WOW64)

Installing: TransportConfiguration node for protocol net.msmq (WOW64)

Installing: ListenerAdapter node for protocol net.msmq

Installing: Protocol node for protocol net.msmq

Installing: TransportConfiguration node for protocol net.msmq

Installing: Protocol node for protocol msmq.formatname (WOW64)

Installing: TransportConfiguration node for protocol msmq.formatname (WOW64)

Installing: ListenerAdapter node for protocol msmq.formatname

Installing: Protocol node for protocol msmq.formatname

Installing: TransportConfiguration node for protocol msmq.formatname

Installing: HTTP Modules (WAS)

Installing: HTTP Handlers (WAS) 
```

但是，异常仍然存在！

感谢任何建议。

（可能是由于 .NET Framework 造成的吗？）

我尝试了以下方法：

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319>ServiceModelReg.exe -i 
```

但它返回给我以下内容：

```
[Error]Switch '-c' requires a component to be specified for installation or uninstallation. Please specify which components to install or uninstall. 
```

感谢任何有用的建议。

**添加信息**

**客户.aspx.cs**

```
public partial class Services_Customers : System.Web.UI.Page
{

    private System.Data.DataTable countryDataTable = null;

    protected void Page_Load(object sender, EventArgs e)
    {
        // Retrieve DataTable from cache
        countryDataTable =
        (System.Data.DataTable)Cache["Countries"];

    }
    protected void GetCountriesButton_Click(object sender, EventArgs e)
    {

        // Does cached item exist?
        if (countryDataTable == null)
        {

            CustomersClient customersService = new CustomersClient();
            // Retrieve DataTable from WCF Service
            countryDataTable = customersService.GetCountries(StartingLettersTextBox.Text);

            // Save DataTable to cache
            Cache["Countries"] = countryDataTable;

        }

        // Set GridView DataSource
        CustomersGridView.DataSource = countryDataTable;
        CustomersGridView.DataBind();
    }
} 
```

**网络配置**

以下代码位于`<configuration>`web.config 文件中：

```
<system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpBinding_ICustomers" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings>
<client>
  <endpoint address="http://localhost:1112/Services/Customers.svc" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ICustomers" contract="CustomersService.ICustomers" name="BasicHttpBinding_ICustomers" />
</client>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:56:45.247

错误是不允许的方法。我在您的代码中没有看到您在代理上设置用户名/密码组合的任何地方......可能就是这样吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T05:48:04.510

尝试将以下行添加到您的 web.config 中。

```
 <webHttpBinding>
    <binding name="crossDomain" crossDomainScriptAccessEnabled="true" />
  </webHttpBinding> 
```

最终结果如下：

```
<system.serviceModel>
<bindings>
  <webHttpBinding>
    <binding name="crossDomain" crossDomainScriptAccessEnabled="true" />
  </webHttpBinding>
  <basicHttpBinding>
    <binding name="BasicHttpBinding_ICustomers" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings>
<client>
  <endpoint address="http://localhost:1112/Services/Customers.svc" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ICustomers" contract="CustomersService.ICustomers" name="BasicHttpBinding_ICustomers" />
</client>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
</system.serviceModel> 
```

# html - css/html：在固定高度的容器内连续垂直显示无序列表

> ID：14313690
> 
> 赞同：0
> 
> 时间：2013-01-14T05:29:50.017
> 
> 标签：html, css

不确定在不使用 Javascript 的情况下是否可行，但我有一个无序列表，它垂直显示在一个具有有限高度的容器内，比如 150 像素。我希望无序列表在到达底部后继续显示在右侧。

就像是：

*   项目清单 ...*   项目清单 ...*   项目清单 ...*   项目清单 ...*   项目清单 ...*   项目清单 ...*   项目清单 ...*   项目清单 ...*   项目清单 ...*   项目清单 ...

# windows - Windows 7 上各个程序的峰值表

> ID：14313692
> 
> 赞同：12
> 
> 时间：2013-01-14T05:29:55.147
> 
> 标签：windows, audio, wasapi

是否可以在 Windows 7 上获取单个程序的峰值仪表读数，如果可以，如何获取？

使用 WASAPI 可以通过环回设备捕获整个系统音频，但这并不能区分来自不同程序的输出。[这个问题](https://stackoverflow.com/questions/6084550/capture-audio-of-a-single-application-on-windows-7)涉及为单个指定应用程序捕获音频，但在处理捕获所有单独播放音频的程序时，答案似乎令人望而却步。这一定是可能的，因为 SndVol 可以做到，如下图所示。问题是它是如何实现的？它是通过未公开的 API 调用来完成的，还是实际上也可以通过 WASAPI 来实现这样的事情？

![在此处输入图像描述](../Images/b4e0bdea0632557e2601bd007e8e548a.png)

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T21:05:59.413

您正在枚举音频会话并获取`IAudioSessionControl`接口（MSDN[代码片段](http://msdn.microsoft.com/en-us/library/windows/desktop/dd368281%28v=vs.85%29.aspx)）。缺少的部分是您可以查询您已经持有的`IAudioMeterInformation`接口。`IAudioSessionControl`

如果音频端点支持峰值计，您将能够获取此接口，并`IMeterInformation::GetPeakValue`用于单个会话。这就是 SndVol 应该做的事情。

这是[一段代码](http://www.alax.info/trac/public/browser/trunk/Utilities/Miscellaneous/AudioSessionVolumeNotification/AudioSessionVolumeNotification.cpp#L74)：

```
CComPtr<IAudioSessionControl> pSessionControl;
...
CComQIPtr<IAudioMeterInformation> pMeterInformation = pSessionControl;
FLOAT fPeakValue;
pMeterInformation->GetPeakValue(&fPeakValue);
_tprintf(_T("nSessionIndex %d, fPeakValue %.2f\n"), nSessionIndex, fPeakValue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T05:55:44.787

查看 WASAPI 有一个从给定客户端[捕获音频的接口](http://msdn.microsoft.com/en-us/library/windows/desktop/dd370858%28v=vs.85%29.aspx)，但我没有看到任何更高级别的接口来确定峰值电平。您可能需要编写一些代码来执行此操作，除非有人创建了一个库来使用此 WASPI 进行一些更高级别的音频工作。干杯！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T18:52:32.550

这是另一个镜头：[IChannelAudioVolume::GetChannelVolume](http://msdn.microsoft.com/en-us/library/ms678846.aspx)。我从 SndVol 关注了 MSDN 上的线程，这就是我结束的地方。引用网页：“GetChannelVolume 方法检索音频会话中指定通道的音量级别。” 您必须编写一些软件来从该流中提取峰值。我的快速猜测只是比较当前值是否大于上一个最大值。如果是这样，则当前值变为峰值。

干杯！

# android - 从 Facebook 发布图片不起作用

> ID：14313693
> 
> 赞同：0
> 
> 时间：2013-01-14T05:29:59.013
> 
> 标签：android, facebook

我正在尝试在我的 Android 应用程序的用户墙上发布带有标题的图像。但它不起作用。它不会在我的墙上显示任何内容。

这是我的代码：

```
 String APP_ID = " My ID";
                fb = new Facebook(APP_ID);
                sp = getPreferences(MODE_PRIVATE);
                access_token = sp.getString("access_token", null);
                long expires = sp.getLong("access_expires", 0);

                if(access_token!= null){
                    fb.setAccessToken(access_token);
                }

                if(expires != 0){
                    fb.setAccessExpires(expires);
                }

btnLogin.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                facebook.authorize(FbdemoActivity.this, new String[]{ "user_photos,publish_checkins,publish_actions,publish_stream"},new DialogListener() {
                    @Override
                    public void onComplete(Bundle values) {
                    }

                    @Override
                    public void onFacebookError(FacebookError error) {
                    }

                    @Override
                    public void onError(DialogError e) {
                    }

                    @Override
                    public void onCancel() {
                    }
                });

               posttowall();
            }
        });

public void postToWall() {
        // post on user's wall.
         try {
                if (fb.isSessionValid()) {
                    byte[] data = null;

                     Bitmap bi = BitmapFactory.decodeFile("/sdcard/Asa.jpg");
                     ByteArrayOutputStream baos = new ByteArrayOutputStream();
                     bi.compress(Bitmap.CompressFormat.JPEG, 100, baos);
                     data = baos.toByteArray();

                     Bundle params = new Bundle();
                     params.putString(Facebook.TOKEN, fb.getAccessToken());
                     params.putString("message", "Test from Android AVD");
                     params.putString("method", "photos.upload");
                     params.putByteArray("picture", data);

                     AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(fb);
                     mAsyncRunner.request(null, params, "POST", new SampleUploadListener(), null);

                }
            }catch(Exception e){
                e.printStackTrace();
            }

    }

public class SampleUploadListener extends BaseRequestListener {

        public void onComplete(final String response, final Object state) {
            try {
                // process the response here: (executed in background thread)
                Log.d("Facebook-Example", "Response: " + response.toString());
                JSONObject json = Util.parseJson(response);
                final String src = json.getString("src");

                // then post the processed result back to the UI thread
                // if we do not do this, an runtime exception will be generated
                // e.g. "CalledFromWrongThreadException: Only the original
                // thread that created a view hierarchy can touch its views."

            } catch (JSONException e) {
                Log.w("Facebook-Example", "JSON Error in response");
            } catch (FacebookError e) {
                Log.w("Facebook-Example", "Facebook Error: " + e.getMessage());
            }
        }

        @Override
        public void onFacebookError(FacebookError e, Object state) {    
        }
    } 
```

它没有显示任何错误，但也没有发布任何内容。谁能指出我的代码中缺少什么或有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T05:35:52.860

是的，您的代码中有一个问题，缺少一个权限..

```
 String[] permissions = { "offline_access", "publish_stream", "user_photos", "publish_checkins",
        **"photo_upload"** }; 
```

添加此权限然后检查它...

# wsdl - 在 mule 中使用 cxf 发布 WSDL

> ID：14313694
> 
> 赞同：0
> 
> 时间：2013-01-14T05:30:03.180
> 
> 标签：wsdl, cxf, mule

我想在 MULE 中发布我的 WSDL 并使用以下代码：

```
<flow name="cxfProxy">
<http:inbound-endpoint
      address="http://localhost:8080/fed-ach"
      exchange-pattern="request-response">
    **<cxf:proxy-service
        wsdlLocation="http://wsf.cdyne.com/WeatherWS/Weather.asmx?wsdl"
        namespace="http://wsf.cdyne.com/"
        service="FedACH"
        payload="body" />**
</http:inbound-endpoint>
<copy-properties propertyName="SOAPAction" />
<http:outbound-endpoint
      address="http://wsf.cdyne.com/WeatherWS/Weather.asmx"
      exchange-pattern="request-response">
    **<cxf:proxy-client payload="body" />**
</http:outbound-endpoint> 
```

但是用粗体线我有这个错误

> 元素：Proxy-Service 不允许是元素 HTTP 的子元素

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:28:24.953

Mule Studio 显示嵌入元素的错误（这是一个错误），但您的配置看起来很好并且运行提供的命名空间被正确声明

# html - CSS选择孩子，需要绕过吗？

> ID：14313697
> 
> 赞同：-1
> 
> 时间：2013-01-14T05:30:06.100
> 
> 标签：html, css, children

我不知道如何解决请帮助。

在第一个 ul 之后，我有一个适用于所有人的 css 属性

```
 .a ul ul {
    display:none;
} 
```

如果 html 在下面，则 css 工作正常。

```
<section class="a">
    <ul>
      <li>  
        <ul> </ul>
      </li>
    </ul>
</section> 
```

但是，如果 html 是

```
<section class="a">
  <ul>
    <li> <div> </div> 
      <ul> </ul>
    </li>
  </ul>
</section> 
```

css 不会通过`div`标签。

请高手指点解决方法，万分感谢。

**问题**

CSS 是否能够在这种情况下找到子元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T05:48:26.487

好的，你想像这样使用 > 选择器：

```
.a ul > ul {
    display:none;
} 
```

选择器 X > Y 从 X 类型中选择 Y 类型的孩子

[http://www.w3schools.com/cssref/css_selectors.asp](http://www.w3schools.com/cssref/css_selectors.asp)

希望这可以帮助

弥敦道

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T05:55:45.423

如果你真的希望它“在第一个之后全部隐藏”，那么你可以使用像 #26 这样的 CSS 伪类[（你必须记住 30 个 CSS 选择器）](http://net.tutsplus.com/tutorials/html-css-techniques/the-30-css-selectors-you-must-memorize/)

```
.a ul {display:none;}
.a ul:first-child {display:block;} 
```

以上是一个很棒的资源，应该为每个使用 CSS 的人添加书签。

# fluid-layout - 带有文本溢出省略号的固定宽度部分之间的流体宽度部分

> ID：14313699
> 
> 赞同：1
> 
> 时间：2013-01-14T05:30:10.013
> 
> 标签：fluid-layout, css

我在调和这些元素时遇到了很大的困难。

这是我需要做什么的视觉解释。棘手的部分是因为我希望一个元素为 72 像素，另一个为 10 像素，而另一个占据“其余部分”。

![在此处输入图像描述](../Images/028ba00154a8d5720ea083a0d8169ef3.png)

这是我的第一次尝试：http: [//jsfiddle.net/cutcopypaste/7gXRg/](http://jsfiddle.net/cutcopypaste/7gXRg/)

HTML：

```
<ul id="albums" class="rows">
    <li>
      <a>
        <img class="thumb" src="http://placehold.it/350x150"/>
        <span>
          <em>An item with a great deal of text that continues on and on but should not wrap to a new line</em>
          <strong>Short content</strong>
         </span>
       </a>
    </li>
    <li>
      <a>
        <img class="thumb" src="http://placehold.it/350x150"/>
        <span>
          <em>Some ofr words,</em>
          <strong>An item with a great deal of text that continues on and on but should not wrap to a new line</strong>
         </span>
       </a>
    </li>
    <li>
      <a>
        <img class="thumb" src="http://placehold.it/350x150"/>
        <span>
          <em>This and That and that and this and what and for and never you miss</em>
          <strong>Johnnyycakes</strong>
         </span>
       </a>
    </li>
</ul> 
```

这里正在尝试使用表格，但它似乎真的不起作用！ [http://jsfiddle.net/cutcopypaste/PwBms/](http://jsfiddle.net/cutcopypaste/PwBms/)

只需要 webkit 支持。

# blackberry - 黑莓 facebook 风格幻灯片

> ID：14313702
> 
> 赞同：-1
> 
> 时间：2013-01-14T05:30:32.947
> 
> 标签：blackberry, blackberry-jde

我喜欢从黑莓 6 设备的 URL（ [Android Facebook 样式幻灯片](https://stackoverflow.com/questions/8657894/android-facebook-style-slide)）实现类似的实现。请建议我实施此示例/架构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:27:56.433

我得到了这个工作，

在一个水平字段管理器中使用了两个垂直字段管理器。使用 Timer 更新了左侧 Menu Hold VFM 的折叠和打开事件的宽度，还调整了子字段的 xpos。

# php - For a property declared outside of constructor, is it overkill to initialize its value to null inside the constructor?

> ID：14313703
> 
> 赞同：0
> 
> 时间：2013-01-14T05:30:53.077
> 
> 标签：php

I was looking at this implementation of a single linked list and noticed that inside the constructor the property `$this->next` is set to `null`.

[http://code.activestate.com/recipes/576498-implementation-of-a-single-linked-list-in-php/](http://code.activestate.com/recipes/576498-implementation-of-a-single-linked-list-in-php/)

Since php automatically sets the value of the property `$next` to `null` when it is declared outside of the constructor (ex `public $next`), isn't the line of code `$this->next = NULL` overkill?

```
class ListNode
{
    public $data;
    public $next;

    function __construct($data)
    {
        $this->data = $data;
        $this->next = NULL;
    }

    function readNode()
    {
        return $this->data;
    }
} 
```

Also - I've seen this convention be used several times in php OOP. Is this a required convention in some other language?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T06:59:46.720

$this->next already is NULL, so there is no need to redeclare it.

# mysql - 将文本文件导入mysql工作台？

> ID：14313708
> 
> 赞同：3
> 
> 时间：2013-01-14T05:31:38.183
> 
> 标签：mysql, database, csv, import, mysql-workbench

我想知道如何将文本文件导入 MySQL 工作台？

我有一个由分隔的文本文件`|`，第一行是表格，

```
FEATURE_ID|FEATURE_NAME|FEATURE_CLASS 
```

然后是数据信息

```
1388627|Etena|Populated Place 
```

将此 .txt 文件导入 MySQL 工作台的最佳方法是什么？

谢谢1

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T05:56:15.127

目前尚不清楚您打算实现什么，但如果您想将分隔的文本文件导入 db，那么您可以[`LOAD DATA INFILE`](http://dev.mysql.com/doc/refman/5.6/en/load-data.html)像这样使用：

```
LOAD DATA INFILE '/path/file.txt' 
INTO TABLE tablename 
FIELDS TERMINATED BY '|'
LINES TERMINATED BY '\n'
IGNORE 1 LINES; 
```

**更新：**

首先，您需要像这样创建表（如果尚未完成）：

```
CREATE TABLE `tablename` (
  `FEATURE_ID` int(11) unsigned NOT NULL,
  `FEATURE_NAME` varchar(512) DEFAULT NULL,
  `FEATURE_CLASS` varchar(512) DEFAULT NULL,
  PRIMARY KEY (`FEATURE_ID`)
) 
```

您可能需要调整该表的数据类型、长度和约束。例如，您可能不需要该表上的 PK。

# fortran - 在 Mac gfortran 4.7.2 中，isatty(6) 不起作用

> ID：14313711
> 
> 赞同：0
> 
> 时间：2013-01-14T05:31:52.337
> 
> 标签：fortran, gfortran

在 Mac 10.8.2 中，使用 gfortran 4.7.2 编译以下代码：

```
program test
    write(*, *) isatty(6)
end program test 
```

程序只是不响应也不返回。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:32:23.873

我不确定你为什么没有输出，它在 Linux 上使用 gfortran 4.7.2 对我来说很好。您可以尝试编写自己的 C 接口是否`isatty`有任何不同：

```
program test
  implicit none

  interface
    function my_isatty(fd) bind(C, name = 'isatty')
      use, intrinsic :: iso_c_binding, only: c_int
      integer(c_int)        :: my_isatty
      integer(c_int), value :: fd
    end function
  end interface

  ! Standard output should be at 1 in C:
  print*, my_isatty(1) 
end program test 
```

我得到以下输出：

```
$ ./a.out
    1
$ ./a.out > b && cat b
    0 
```

# wireless - 如何使用 Zigbee 与智能手机通信

> ID：14313712
> 
> 赞同：1
> 
> 时间：2013-01-14T05:32:21.880
> 
> 标签：wireless, smartphone, zigbee

我需要监控有多少智能手机连接到某个区域的无线网络。我发现 Zigbee 可以用来完成这项任务。我至少需要区分每部连接的电话。我需要做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T05:46:39.973

在不了解 Zigbee 的情况下，您可以使用设备的 BSSID 作为您的唯一标识符。每个 WiFi 无线电都有一个唯一的 BSSID。只是一个想法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T16:29:23.513

ZigBee (802.15.4) 和 Wi-Fi (802.11) 是不同的网络标准。它们都使用 2.4GHz，但 ZigBee 无线电无法识别 Wi-Fi 网络上的节点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-04T12:45:52.747

Zigbee (IEEE 802.15.4) 和 WiFi (IEEE 802.11) 是两种不同的 PHY/MAC 规范。你要做的第一件事是：

1.  在 Zigbee 和 WiFi 网络之间建立网关。
2.  每部智能手机都应该能够连接到 Zigbee 网络。
3.  每部智能手机都应充当终端设备，Zigbee 控制器应跟踪每部智能手机的位置。此控制器应通过网关 [1] 连接到 Wifi。然后，您可以轻松跟踪连接到网络的智能手机数量。

# jquery - 按钮关闭、按钮最小化和按钮设置无法使用以下 javascript

> ID：14313713
> 
> 赞同：0
> 
> 时间：2013-01-14T05:32:24.667
> 
> 标签：jquery, twitter-bootstrap

使用下面的 javascript，按钮关闭、按钮最小化和按钮设置不起作用。

我使用 boostrap 2.0.4

```
//datatable
    $('.datatable').dataTable({
            "sDom": "<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid'<'span12'i><'span12 center'p>>",
            "sPaginationType": "bootstrap",
            "oLanguage": {
            "sLengthMenu": "_MENU_ records per page"
            }
        } );
    $('.btn-close').click(function(e){
        e.preventDefault();
        if (e.target === this)
                $(this).parent().parent().parent().fadeOut();
    });
    $('.btn-minimize').click(function(e){
        e.preventDefault();
        var $target = $(this).parent().parent().next('.box-content');
        if($target.is(':visible')) $('i',$(this)).removeClass('icon-chevron-up').addClass('icon-chevron-down');
        else                       $('i',$(this)).removeClass('icon-chevron-down').addClass('icon-chevron-up');
        $target.slideToggle();
    });
    $('.btn-setting').click(function(e){
        e.preventDefault();
        $('#myModal').modal('show');
    }); 
```

编辑 1：我正在尝试使用此模板表[http://usman.it/themes/charisma/table.html](http://usman.it/themes/charisma/table.html) 您可以在那里下载 table.html 文件。我无法理解的另一件事是当我检查 html 代码时，没有 SEARCH 文本输入，没有页面导航。它们是如何出现在浏览器中的？

编辑 2：我正在使用 Google App Engine、Django、Jinja2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T05:38:43.830

如果您将 动态添加`button`到`DOM`，则`click()`可能无法正常工作。

试试这个：

```
$(document).on("click", '.btn-close', function(e){
    e.preventDefault();
    if (e.target === this)
            $(this).parent().parent().parent().fadeOut();
});

$(document).on("click", '.btn-minimize', function(e){
    e.preventDefault();
    var $target = $(this).parent().parent().next('.box-content');
    if($target.is(':visible')) $('i',$(this)).removeClass('icon-chevron-up').addClass('icon-chevron-down');
    else                       $('i',$(this)).removeClass('icon-chevron-down').addClass('icon-chevron-up');
    $target.slideToggle();
});

$(document).on("click", '.btn-setting', function(e){
    e.preventDefault();
    $('#myModal').modal('show');
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-09-25T09:19:57.750

```
$('.datatable').dataTable({
        "sDom": "<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid'<'span12'i><'span12 center'p>>",
        "sPaginationType": "bootstrap",
        "oLanguage": {
        "sLengthMenu": "_MENU_ records per page"
        }
    } );
$('.btn-close').click(function(e){
    e.preventDefault();
    $(this).parent().parent().parent().fadeOut();
});
$('.btn-minimize').click(function(e){
    e.preventDefault();
    var $target = $(this).parent().parent().next('.box-content');
    if($target.is(':visible')) 
      $('i',$(this)).removeClass('icon-chevron-up').addClass('icon-chevron-down');
    else
      $('i',$(this)).removeClass('icon-chevron-down').addClass('icon-chevron-up');
    $target.slideToggle();
});
$('.btn-setting').click(function(e){
    e.preventDefault();
    $('#myModal').modal('show');
}); 
```

# ios - 使用陀螺仪检测 360° iOS 设备旋转

> ID：14313714
> 
> 赞同：4
> 
> 时间：2013-01-14T05:32:41.757
> 
> 标签：ios, objective-c, cocoa-touch, gyroscope

我希望我的应用能够在设备水平放置时检测到设备旋转。我可以使用指南针的读数，但我相信陀螺仪的偏航值会更准确。给定偏航读数，确定 360° 旋转（顺时针或逆时针）的最佳算法是什么。它必须是一个完整的 360°，而不仅仅是将手机向一个方向旋转 180°，然后在相反方向返回 180°。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T06:18:05.853

您将使用 CoreMotion 来获得围绕垂直轴的旋转。您需要添加旋转事件的增量。每次超过最小值时，其方向都与上一次不同时，您会重置起点。然后，当你从这个起点到达正负 360 度时，你就有了旋转。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T06:22:31.087

这是一个想法，假设您可以在短时间内获得读数，并且偏航可以在特定起点归零。这与另一个答案不同，后者从连续调整的起点检测完整的圆圈。

在这种方法中，我们不断将当前偏航角与之前的偏航角进行比较，询问是否通过了 180 度的检查点或`PI`是否已通过。最初，检查点标志`cp_pi`是`NO`，并且在任一方向传递它都会切换其状态。请注意，yaw 在两个位置改变其符号，在零点和再次在`PI`to `-PI`。

`tick`假设您的对象具有两个在检测器的 s 和`BOOL cp_pi;`之间持续存在的属性`float prev_yaw;`，我们认为它`d_yaw`小于`PI`穿过 0 并且大于`PI`穿过圆的另一端。当穿过另一端时，我们切换`cp_pi`。当`cp_pi`是`YES`越过 0 时，我们保证已经通过了一个完整的圆圈 - 因为否则，`cp_pi`将被切换回`NO`：

```
-(void)tick
{
    float yaw = [self zeroedYaw];
    if ((fabs(yaw) == PI) || (yaw == 0.0f)) return;

    if (yaw * prev_yaw < 0)
    {
        float d_yaw = fabs(yaw - prev_yaw);
        if (d_yaw > PI)
        {
            cp_pi = ! cp_pi;
        }
        else if (cp_pi)
        {
            // fire detection event
        }
    }
    prev_yaw = yaw;
} 
```

请注意，为了让我们的生活更轻松，如果检测器`yaw`正好位于其中一个检查点上，我们将完全跳过检测器功能。

# css - 使用css将块移动到中心

> ID：14313721
> 
> 赞同：1
> 
> 时间：2013-01-14T05:34:04.623
> 
> 标签：css

我在我的 Rails Web 应用程序的视图页面中有一个部分，它只不过是一个显示 facebook like、twitter 推文和其他共享选项的代码。代码是这样的： -

```
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
<a class="addthis_button_tweet"></a>
<a class="addthis_button_pinterest_pinit"></a>
<a class="addthis_counter addthis_pill_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-50effbad1fc26ade"></script>
<!-- AddThis Button END --> 
```

我想把这个 div 移到中心。所以我的css代码是这样的：

```
 .center {
text-align: center;
} 
```

然后我将其添加`<div class="center">`到我的代码中......

但它的节点移动一切中心。可能是什么原因？？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:07:33.970

尝试为 .center 的宽度设置一个值！为方便起见，您可以使用背景颜色来关注不同的 div 有什么不同。

```
.center {
text-align: center;
width: 70%

/*For the sake of understanding divs sometimes background color helps*/
background-color:#b0e0e6;

} 
```

# mysql - 从两个不同的表中选择数据

> ID：14313724
> 
> 赞同：1
> 
> 时间：2013-01-14T05:34:51.770
> 
> 标签：mysql, sql, archive

我需要从两个不同的表中选择数据来为我的网站创建历史/存档，如下所示：

2012

*   八月（6）
*   九月(4)
*   十月(2)

我知道stackoverflow中有一个类似的问题：[PHP MYSQL Blog Archive Menu by Year and Month](https://stackoverflow.com/questions/13053636/php-mysql-blog-archive-menu-by-year-and-month)

但是，我有两个相似但不同的表。

我试过使用这个例子：[mysql select data from two tables and different structure](https://stackoverflow.com/questions/5032995/mysql-select-data-from-two-tables-and-different-structure)，但我总是收到“#1271 - Illegal mix of collat​​ions for operation 'UNION'”的错误

有没有其他方法可以组合来获取我的数据？

我的两个表的字段和结构是：

1) 新闻

*   id (int 5)
*   标题（varchar 200）
*   内容（文字）
*   date_added (日期时间)

2) 设备

*   id (int 5)
*   标题（varchar 45）
*   内容（varchar 250）
*   date_added (日期)

注意：表格的 id 是它们自己的文章 id。我的桌子彼此没有任何共同之处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T05:37:38.443

这是因为您试图将不同的类型联合在一起，这是不可能的。列数和类型应该匹配，以便您可以合并它们的表。

日期和日期时间 - 你认为这些真的匹配吗？

好的，批评就够了 :) 现在解决方案，我认为您需要类似临时表的东西，以便您可以 1.查询您的一个表，2.将类型转换为与您的另一个表匹配的任何内容，3.插入临时表。

现在您的临时表与您的表匹配。去联合他们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T05:41:49.497

起初我认为数据类型是问题，您需要转换类型以匹配：

```
SELECT id, title, content, cast(date_added as Date) FROM NEWS
UNION ALL 
SELECT id, title, cast(content as text), date_added FROM EQUIPMENT; 
```

但是，当我自己尝试时，我发现所有类型都隐式转换。我又看了你的描述，并深入研究了整理问题。我相信表中的`content`列与表中的列`news`是不同的字符集和/或不同的排序规则类型。这可能适用于标题列或整个表格。您需要尝试转换。我建议这样做：`content``Equipment`

```
SELECT 
  id, 
  convert(title using utf8) collate utf8_bin, 
  convert(content using utf8) collate utf8_bin, 
  date_added 
FROM 
  NEWS
UNION ALL

SELECT 
  id, 
  convert(title using utf8) collate utf8_bin, 
  convert(content using utf8) collate utf8_bin, 
  date_added 
FROM 
  EQUIPMENT; 
```

那应该可以解决您的问题。

# google-apps-script - 在 EmbeddedChart 中切换行和列

> ID：14313725
> 
> 赞同：4
> 
> 时间：2013-01-14T05:35:05.903
> 
> 标签：google-apps-script, google-visualization, google-sheets

我正在使用 Google Docs 和 Google Apps Script 为我们的 sprint 制作一些自动生成的报告。

我想在我的工作表中添加一个图表，并且使用以下代码一切正常：

```
 var lChartBuilder = SpreadsheetApp.getActiveSheet().newChart();
    lChartBuilder.addRange(SpreadsheetApp.getActive().getRange("Tasks!C39:S40"));
    lChartBuilder.setOption("title", "Task Burndown");

    var lChart = lChartBuilder.asLineChart().build();
    SpreadsheetApp.getActiveSheet().insertChart(lChart); 
```

但是我的系列是水平组织的，而不是垂直组织的。在编辑器中，我看到了“切换行/列”选项和另一个选项“使用 C 列作为标签”我尝试了很多选项（例如`lChartBuilder.setOption("reverseCategories", true);`或`lChartBuilder.setOption("isStacked", true);`），但它们似乎都与最后一个选项卡有关，我担心，而不是开始选项卡。

那么，有没有办法（除了转置我的数据）来做到这一点，或者我必须在每次生成它时手动触发图表编辑器来修复这个问题？

*额外的问题*：然后我如何设置（也通过 Google Apps 脚本）第一行/列是标题并用作图例？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-05T14:31:48.050

对于奖金问题，我有你的奖金答案。创建/修改图表时使用此选项：

```
setOption('useFirstColumnAsDomain','true') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T18:53:55.547

对于嵌入式图表，您需要转置数据，因为嵌入式图表使用电子表格数据，并且本身不支持转置。但是，您可以通过编程方式处理此问题，并且转置操作本身很简单。

在下面的代码中，我假设存在一个名为“Scratch”的工作表，它将用于存储转置数据的工作副本。您可以创建然后隐藏此工作表，以免妨碍工作。

```
// Uses 2D Arrays Library, see https://sites.google.com/site/scriptsexamples/custom-methods/2d-arrays-library

function buildChart() {
  var taskSheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Tasks");
  var lChartBuilder = taskSheet.newChart(); taskSheet.removeChart(chart)
  var srcData = taskSheet.getRange("Tasks!C39:S40").getValues();

  // Transpose the table (using 2D Array Library)
  var scratchData = ArrayLib.transpose(srcData);

  var numRows = scratchData.length;
  var numCols = scratchData[0].length; // assume all rows are same width

  // Write scratch values to scratch sheet.
  var scratchSheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Scratch");
  scratchSheet.getRange(1, 1, numRows, numCols).setValues( scratchData );
  SpreadsheetApp.flush();

  lChartBuilder.addRange(scratchSheet.getDataRange());
  lChartBuilder.setOption("title", "Task Burndown");

  var lChart = lChartBuilder.asLineChart().setPosition(1, 1, 1, 1).build();
  taskSheet.insertChart(lChart);
}; 
```

*对于奖金...*以这种方式格式化数据可确保第一行/列是标题并用作图例。

![结果图表](../Images/c58fac51074742e6d6d9516eafe65fbd.png)

现在，你还有一些问题需要解决。

*   此代码每次运行时都会创建一个新图表，但您可能想要修改它。（相反，您需要更新转置后的数据，并修改图表以获取新范围（如果已更改）。）
*   X 轴不显示所有任务名称 - 您也许可以控制它。

* * *

你说你不想转置你的数据。不幸的是，目前的 Charts 没有任何办法解决这个问题——你必须自己处理你的数据。插入带有不同图表库的小部件可能会起作用，但不推荐使用对表格的小部件支持。幸运的是，我已经有类似的代码，所以它的工作量比看起来要少。你应该看看 ArrayLib 中的其他一些过滤功能，你可以用它做很多事情。

# eclipse-plugin - Eclipse 将 APK 转换为 BAR 文件

> ID：14313729
> 
> 赞同：0
> 
> 时间：2013-01-14T05:35:37.227
> 
> 标签：eclipse-plugin, blackberry-eclipse-plugin, blackberry-playbook

几个月前，我安装了黑莓插件 Eclipse，用于将 apk 转换为 bar 并在 blackberry playbook 上运行它。之前，当我在 playbook 上运行 apk（通过添加黑莓性质）时。eclipse 本身在 bin 文件夹中沿 apk 制作 bar 文件。但现在它不制作 bar 文件，而是制作 .wrn 文件。我不明白这是怎么回事。我错过了任何附加插件或其他任何东西都发生了变化。请帮助谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:30:03.410

我忘记了一步..当我“为应用程序世界签名apk”时，它会将apk转换为bar文件..在我只是验证apk并加载到剧本而不是为应用程序世界签名之前

# spring - Spring AOP 声明式事务管理不起作用

> ID：14313731
> 
> 赞同：1
> 
> 时间：2013-01-14T05:35:54.247
> 
> 标签：spring, transactions, declarative

我正在尝试编写一个简单的应用程序来了解事务在 Spring 中的工作方式（声明式 AOP 样式）。我将一条记录插入到客户表中，然后抛出 NullPointerException 以查看插入的数据是否回滚。但令我惊讶的是，它并没有回滚数据。这是代码

ApplicationContext.xml 文件

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:aop="http://www.springframework.org/schema/aop"
xsi:schemaLocation="

    http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
    http://www.springframework.org/schema/tx 
        http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
    http://www.springframework.org/schema/aop 
        http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
    ">

<aop:aspectj-autoproxy />

<bean id="BoardingService" class="com.learning.maven.services.BoardingServiceImpl"/>

<tx:advice id="txAdvice" transaction-manager="transactionManager" >
    <tx:attributes>
        <tx:method name="getUser*" rollback-for="throwable" propagation="REQUIRES_NEW"/>
    </tx:attributes>
</tx:advice>

<aop:config>
    <aop:pointcut id="boardingServiceOperation" expression="execution(* com.learning.maven.services.BoardingService.*(..))"/>
    <aop:advisor advice-ref="txAdvice" pointcut-ref="boardingServiceOperation"/>
</aop:config>

<bean id="transactionManager"  class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSource"/>
</bean>

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver"/>
    <property name="url" value="jdbc:oracle:thin:@localhost:1521:XE"/>
    <property name="username" value="system"/>
    <property name="password" value="Manager"/>
</bean>

<bean id="customerDAO" class="com.learning.maven.dao.CustomerDAOImpl">
    <property name="dataSource" ref="dataSource" />
</bean> 
```

这就是我调用方法的方式

```
public static void main(String[] args) {

    context = new FileSystemXmlApplicationContext("C:\\workspace\\learning\\cxf\\SpringTransaction\\cxf.xml");
    BoardingService bean = (BoardingService) context.getBean("BoardingService");
    bean.getUser("1");

} 
```

BoardingService 类如下所示

```
public class BoardingServiceImpl implements BoardingService, ApplicationContextAware {

    ApplicationContext context = null;

    public String getUser(String id) {

        String response = "SUCCESS";
        try{
            System.out.println("Testing");
            CustomerDAO customerDAO = (CustomerDAO) Testing.context.getBean("customerDAO");

            Customer c = new Customer();
            c.setAge(31);
            c.setCustId(1);
            c.setName("Jagadeesh");

            customerDAO.insert(c);

            customerDAO.insert(null);
        }
        catch(Exception e){
            throw new RuntimeException();
        }

        return response;
    }

    @Override
    public void setApplicationContext(ApplicationContext arg0)
            throws BeansException {
        this.context = arg0;

    } 
```

和 CustomerDAOImpl

```
private DataSource dataSource;

public void setDataSource(DataSource dataSource) {
    this.dataSource = dataSource;
}

public void insert(Customer customer) {

    String sql = "INSERT INTO CUSTOMER (CUST_ID, NAME, AGE) VALUES (?, ?, ?)";
    Connection conn = null;

    try {
        conn = dataSource.getConnection();
        PreparedStatement ps = conn.prepareStatement(sql);
        ps.setInt(1, customer.getCustId());
        ps.setString(2, customer.getName());
        ps.setInt(3, customer.getAge());
        ps.executeUpdate();
        ps.close();

    } catch (SQLException e) {
        throw new RuntimeException(e);

    } finally {
        if (conn != null) {
            try {
                conn.close();
            } catch (SQLException e) {}
        }
    }       
}

public Customer findByCustomerId(int custId) {
    // TODO Auto-generated method stub
    return null;
} 
```

不知道我哪里错了。任何指针都会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:29:15.117

你有 rollback-for`"throwable"`而不是`"Throwable".`

PS 不确定您是否应该将`REQUIRES_NEW`其用作默认策略。

*更新*：来自[DataSourceTransactionManager](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/jdbc/datasource/DataSourceTransactionManager.html)文档

> 应用程序代码需要通过 DataSourceUtils.getConnection(DataSource) 而不是标准 J2EE 风格的 DataSource.getConnection() 调用来检索 JDBC 连接。JdbcTemplate 等 Spring 类隐式使用此策略。如果不与此事务管理器结合使用，DataSourceUtils 查找策略的行为与本机 DataSource 查找完全相同；因此，它可以以便携式方式使用。

在您的情况下，您直接打开连接，然后 Oracle 在关闭时提交事务（这是 Oracle RDBMS 的一个功能）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T06:52:15.560

您也可以省略 rollback-for 属性。然后，如果发生任何 RuntimeException，它将回滚。

# android - 隐藏和显示线性布局

> ID：14313732
> 
> 赞同：12
> 
> 时间：2013-01-14T05:36:22.097
> 
> 标签：android, android-linearlayout

我有一个线性布局，里面还有几个按钮。我想让它在触摸时可见，再次触摸时不可见。

我怎样才能做到？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-11-06T07:27:09.427

```
LinearLayout one = (LinearLayout) findViewById(R.id.one);
one.setVisibility(View.GONE); 
```

我建议您在 onclick 事件中使用 GONE 而不是 INVISIBLE，因为 `View.GONE`布局的位置将不可见，并且应用程序中不会出现未使用的空间，这与会`View.INVISIBLE`留下用于布局的间隙不同

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T06:21:33.263

在您的代码上添加一个布尔值

```
boolean flag = false; 
```

然后在 xml 的线性布局中添加**android:clickable = true**

然后使用此代码作为参考

```
your_linear_layout = new OnClickListener(){
    @Override
    public void onClick(View v) {
        if (flag){
        // means true
        your_linear_layout.setVisibility(View.INVISIBLE);
        flag = false; 
        }
        else{
        your_linear_layout.setVisibility(View.VISIBLE) 
        flag = true;
        }

    }

}; 
```

还没有尝试过，但这应该可以工作..

干杯

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T05:43:41.070

将[setOnTouchListener](http://developer.android.com/reference/android/view/View.html#setOnTouchListener%28android.view.View.OnTouchListener%29)添加到 linearLayout 获取触摸事件为：

```
linearLayout.setOnTouchListener(new OnTouchListener(){
  public boolean onTouch(View v, MotionEvent event){

     if (event.getAction() == MotionEvent.ACTION_DOWN) {

         // show-hide view here

        return true;
      }

     if (event.getAction() == MotionEvent.ACTION_UP) {

         // show-hide view here

        return true;
      }

   return false;
  }
}); 
```

用于使视图可见使用`yourview.setVisibility(View.VISIBLE)`和不可见使用`yourview.setVisibility(View.INVISIBLE)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T05:40:40.623

你应该用户

无形的 -：`mButton.setVisibility(View.INVISIBLE);`

可见-： `mButton.setVisibility(View.VISIBLE);`

将此代码放入按钮的 onclick 侦听器中，并检查是否条件。

# linux-kernel - Linux 设备驱动程序 - 线程 IRQ 处理程序

> ID：14313735
> 
> 赞同：3
> 
> 时间：2013-01-14T05:36:39.977
> 
> 标签：linux-kernel, linux-device-driver, drivers, interrupt-handling

最近，我遇到了一种情况，我想将线程`IRQ's`用于键盘驱动程序。对于线程`IRQ`处理程序的一些背景：

[http://lwn.net/Articles/302043/](http://lwn.net/Articles/302043/)

据我了解，每次`IRQ`发生时`IRQ`都会唤醒处理程序线程。所以，如果我按下`KEY A`，它会唤醒线程并运行到完成。现在，当处理程序线程在为from`KEY B`提供服务时仍在运行时，我应该按什么行为...... from会被忽略吗？`IRQ``KEY A``IRQ``KEY B`

预期的行为是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T06:18:51.310

理想情况下，系统将始终确认 Key A->Key B 的顺序。

然而，为了确认一个键被按下，系统必须在每个键被按下的时候做一些事情，即当键盘中断发生时——至少它必须记录按键，也许在一个队列中。

而从单处理器的角度来看，它一次只能做一件事，所以如果它在记录按键A的过程中，那么它不能同时记录按键B。它要么有放弃 A 并记录 B，否则将不得不忽略 B。

因此，中断处理的目标是尽量减少处理器花费在确认任何给定中断所需的最少时间上。

线程中断的目标是将更多的工作推给单独的线程，从而减少确认中断所需的最小值，从而减少处理中断所花费的时间（它不能同时处理任何其他中断） ） 降低了。

即使那样，仍然没有理论上的保证处理器不必丢弃或忽略中断，但它确实使它在实践中不太可能发生。

对于按键的具体示例，如果您能够在处理器完成其对 A 的最小处理之前以某种方式足够快地按下 B，那么由于两个中断都来自同一源，因此具有相同的优先级，B 会被忽略，你会觉得好像 B 从未被按下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-09T06:57:15.407

它处理中断的方式是处理器将一遍又一遍地调用启用的中断，直到应用程序清除相应的中断标志。所以你要做的是禁用硬件处理程序中的特定中断并唤醒你的线程。当硬件处理程序退出时，将设置中断标志但不会再次调用中断。所以你然后在你的线程中检查每个标志并在你去的时候清除它。当您检测到设置了按键标志时，您会读出该键，然后将其清除。如果在读取数据寄存器后按下了一个新键并且硬件中没有 fifo，那么该键按下将丢失。然后清除中断标志并再次启用硬件中断。

在 USB 等情况下（即，如果您编写与 pc 通信的 USB 驱动程序），您可以选择在完成读取数据时告诉 USB 外围设备，以便它可以告诉主机它可以接受更多数据。在这种情况下，您永远不会丢失数据，因为您将读取数据并清除标志，然后才告诉外围设备您已准备好。在此之前，外设一直会告诉主机它尚未准备好，因此不会通过 USB 总线输入任何数据。

# css - 将 div 的宽度设置为相对于浏览器窗口的宽度

> ID：14313738
> 
> 赞同：7
> 
> 时间：2013-01-14T05:37:07.900
> 
> 标签：css

如何设置`width`a 的属性`div`，使其始终是浏览器窗口宽度的百分比？

例如，

*   当浏览器窗口宽度为 1920px 时，其`div`宽度为 1536px (80%)
*   当浏览器窗口宽度为 1600px 时，其`div`宽度为 1280px (80%)

等等？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T05:38:27.397

您应该使用包装器 div 并将其设置为等于浏览器宽度的 100%，然后放置所需的 div 并将其设置为`width:80%`. 这也将允许您将所需的 div 居中。（`margin:0 auto`用于此。）

这是一个带有演示的 JSFiddle：http: [//jsfiddle.net/6Lwpr/](http://jsfiddle.net/6Lwpr/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-03T02:38:27.870

vw：相对于视口宽度的 1%

[https://www.w3schools.com/cssref/tryit.asp?filename=trycss_unit_vw](https://www.w3schools.com/cssref/tryit.asp?filename=trycss_unit_vw)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T06:18:24.423

用这个

```
.main
{width:100%;
margin-left:auto; 

margin-right:auto;

}
.content
{
width:80%;
margin-left:auto; 

margin-right:auto;

} 
```

# yii - 数据提供者到 EExcelView

> ID：14313739
> 
> 赞同：0
> 
> 时间：2013-01-14T05:37:23.237
> 
> 标签：yii, phpexcel, yii-extensions, yii-events

假设我有一张名为

```
cars{
'id','name','brand_id', 
} 
```

和另一张桌子

```
brand{
'id','brand_name',
} 
```

我有一种情况，我想生成一个具有以下属性 的**Excel 报告。**`'name','brand_name'`IE`SELECT cars.name, brand.brand_name FROM cars INNER JOIN on brand WHERE cars.brand_id = brand.id`

所以我创建了一个这样的数据提供者：

```
$sql = "SELECT cars.name, brand.brand_name FROM cars INNER JOIN brand on cars.brand_id = brand.id";
$result = Yii::app()->db->createCommand($sql)->queryAll();
$this->render('doc', array('dataprovider' => $result)); 
```

现在我想生成带有结果的 Excel 文件，`dataProvider`所以我编写了以下代码：

// 假设我在名为 doc.php 的视图页面中执行此操作

```
$factory = new CWidgetFactory(); 
Yii::import('ext.eexcelview.EExcelView',true);  
        $widget = $factory->createWidget($this,'EExcelView', array(
            'dataProvider'=>$dataprovider->search(),
            'grid_mode'=>'export',
            'title'=>'Title',
            'creator'=>'TNC',
            'autoWidth'=>false,
            'filename'=>'Report.xlsx',
            'stream'=>false,
            'disablePaging'=>false,
            'exportType'=>'Excel2007',
            'columns'=>array(
                'name',
                'brand_name',),
            'showTableOnEmpty' => false,
        ));

        $widget->init();
        $widget->run(); 
```

**我已经包含了我必须的所有扩展。**. **当我用单个表格条目**`dataProvider`输入该字段时，此代码正在工作。**但是当我包含多个表**时就会出现这种情况。

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:41:46.190

这些行实际上并不构成数据提供者：

```
$result = Yii::app()->db->createCommand($sql)->queryAll();
 $this->render('doc', array('dataprovider' => $result)); 
```

您需要执行以下操作：

```
$dataprovider = new CSqlDataProvider($sql, array(
    'pagination'=>false,
);
$this->render('doc', array('dataprovider' => $dataprover); 
```

更多信息在这里：[http ://www.yiiframework.com/doc/api/1.1/CSqlDataProvider](http://www.yiiframework.com/doc/api/1.1/CSqlDataProvider)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:58:52.140

这适用于 2 个表，不知道是否适用于 2 个以上。

```
$dataProvider = new CArrayDataProvider($dataprovider, array('id' => 'brand', 'sort' => array('attributes' => array('brand_name', ), ), 'pagination' => false));
$this -> render('doc', array('dataprovider' => $dataProvider,)); 
```****

# java - 为什么我会收到这个名为 java.lang.ArrayIndexOutOfBoundsException 的错误？

> ID：14313742
> 
> 赞同：-1
> 
> 时间：2013-01-14T05:37:44.907
> 
> 标签：java, exception

我在我的 64 位 Linux 系统上用 Java 编写了这段代码：

```
 class WrapperClass1
    {
       public static void main(String s [])
       {
            int noinput=s.length;
            System.out.println("Number of values entered is :- " + noinput);
            System.out.println( s[0] + "," + s[1] );
            int x = Integer.parseInt(s[0]);
            int y = Integer.parseInt(s[1]);
            int z = x + y;
            System.out.println(" Sum = " + z);
       }
    }; 
```

现在，当我尝试编译它时，它会成功编译，但是当我执行程序时，它会显示一个名为的异常：

```
 Number of values entered is :- 0
           Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 0
           at WrapperClass1.main(WrapperClass1.java:7) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T05:39:00.547

您没有传递任何导致此问题的参数。

`ArrayIndexOutOfBoundsException`是

> 抛出以指示已使用非法索引访问数组。索引为负数或大于或等于数组的大小。

在您的情况下，您在执行程序时没有通过。所以它在访问`s[0]`or时抛出异常`s[1]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T05:41:18.623

您的数组 s 是空的，因此，当您尝试像 s[0] 一样从中弹出项目时，它会抛出此异常，因为那里没有任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T06:09:24.603

输入：字符串[]

用什么方法？-->`main(String[] args)`

什么时候给？--> 当我们说`java <className> <input1> <input2> ...`执行时

当它抛出`ArrayIndexOutOfBoundsException`？-->

初始：字符串 s[]

但是在初始化变量（数组）之前，尝试访问不可用的索引...

解决方案：通过命令提供输入（因为这些是命令行参数）

即使没有给出输入，如何避免错误？--> 检查数组的大小，

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T06:10:04.800

您应该考虑使用*if*语句来检查是否`noinput`至少为 2。然后您可以自由使用 s[0] 和 s[1] 而不会得到`ArrayIndexOutOfBoundsException`.

# libgit2 - 如何使用 libgit2 从 git 中获取？

> ID：14313744
> 
> 赞同：2
> 
> 时间：2013-01-14T05:37:56.893
> 
> 标签：libgit2

我阅读了[fetch.c](https://github.com/libgit2/libgit2/blob/development/tests-clar/online/push.c)并尝试更新本地存储库中的内容（就像“git fetch”），但 git_remote_connect 返回 -1。

*   `err:Unexpected HTTP status code: 401`

连接到遥控器时在哪里设置凭据？代码有什么问题？？谢谢。

```
(IBAction)Fetch:(id)sender {
git_remote *remote = NULL;
const git_error *err = NULL;
int ret = -1;
bool invoked = false;

git_repository *repo = NULL;
NSArray *str = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docPath = [str objectAtIndex:0];
NSString *localPath = [docPath stringByAppendingPathComponent:@"abc/.git"];
NSLog(@"localPath:%@", localPath);
ret = git_repository_open(&repo, [localPath UTF8String]);
NSLog(@"git_repository_open ret:%d",ret);
err = giterr_last();
if(err == NULL)
{
    NSLog(@"NULL");
}
else
{
    NSLog(@"err:%s", err->message);
}

ret = git_remote_load(&remote, repo, "origin");
NSLog(@"git_remote_load ret:%d", ret);
err = giterr_last();
if(err == NULL)
{
    NSLog(@"No error");
}
else
{
    NSLog(@"err:%s", err->message);
    return;
}
ret = git_remote_load(&remote, repo, "origin");
NSLog(@"git_remote_load ret:%d", ret);
ret = git_remote_connect(remote, GIT_DIRECTION_FETCH);
NSLog(@"git_remote_connect ret:%d", ret);
err = giterr_last();
if(err == NULL)
{
    NSLog(@"No error");
}
else
{
    NSLog(@"err:%s", err->message);
    return;
}
ret = git_remote_download(remote, &transferProgressCallback, &invoked);
NSLog(@"git_remote_download ret:%d", ret);
err = giterr_last();
if(err == NULL)
{
    NSLog(@"No error");
}
else
{
    NSLog(@"err:%s", err->message);
    return;
}
ret = git_remote_update_tips(remote);
NSLog(@"git_remote_update_tips ret:%d", ret);
err = giterr_last();
if(err == NULL)
{
    NSLog(@"No error");
}
else
{
    NSLog(@"err:%s", err->message);
    return;
}
} 
```

这是远程配置

```
[remote "origin"]
    url = http://remote_path/git/share.git
    fetch = +refs/heads/*:refs/remotes/origin/*
[branch "master"]
    remote = origin
    merge = refs/heads/master 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T07:56:35.267

我找到下面的功能来设置远程获取的信用

```
bool invoked = false;
git_remote_set_cred_acquire_cb(remote, cred_acquire_cb, &invoked); 
```

cred_acquire_cb 的代码如下：

```
static int cred_acquire_cb(git_cred **cred, const char *url, unsigned int allowed_types, void *payload)
{
    char *_remote_user = "user";
    char *_remote_pass = "pass";

    *((bool*)payload) = true;

    if ((GIT_CREDTYPE_USERPASS_PLAINTEXT & allowed_types) == 0 ||
        git_cred_userpass_plaintext_new(cred, _remote_user, _remote_pass) < 0)
        return -1;

    return 0;
} 
```

# android - Android：按钮文本的渐变颜色

> ID：14313751
> 
> 赞同：-1
> 
> 时间：2013-01-14T05:38:42.103
> 
> 标签：android, button, text, colors, gradient

> **可能重复：**
> [Android 中带有渐变的文本](https://stackoverflow.com/questions/2680607/text-with-gradient-in-android)

我正在尝试为我的应用程序制作一个带有白色背景和渐变色文本的按钮。但是，我发现的所有内容都提供了使用单独的 XML 文件仅将背景设置为渐变颜色的建议。有人可以告诉我是否可以只使用渐变颜色的按钮文本以及如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T05:54:43.423

使用渐变颜色制作可点击的 textView 并根据需要设置其背景。按照@SidharthLele 指定的链接。

# java - 在单个文件夹中包含带有 Jar 文件的属性文件

> ID：14313761
> 
> 赞同：0
> 
> 时间：2013-01-14T05:40:03.807
> 
> 标签：java, eclipse, helios

我正在 Eclipse Helios 中创建一个 java 应用程序。我创建了一个类，我需要在其中获取 .properties 文件中的数据，该文件我添加到包含解决方案的文件夹中。通过此代码，我可以访问 .properties 文件中的值当我尝试在 Eclipse 中运行它时。

代码是：

```
Properties prop = new Properties();
prop.load(new FileInputStream("config.properties"));
_url = prop.getProperty("url"); 
```

通过这段代码，我得到了 Url 的正确值。

在此之后，我创建了我的项目的可执行 jar。当我尝试使用命令行执行 jar 时，我得到了 FileNotFoundException，这意味着 jar 无法找到 .properties 文件。

我将 .properties 文件保存在与 Jar 文件相同的文件夹中，因为我们提供了编辑 .properties 文件的功能。

由于我开始使用 Java 仅 4 天，我无法弄清楚 .properties 文件的放置位置以及如何访问它。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T05:47:32.973

对于 jar 尝试使用：

```
prop.load(getClass().getClassLoader().getResourceAsStream("config.properties")); 
```

如果您从静态上下文中调用，请使用：

```
prop.load(YourClassName.class.getClassLoader().getResourceAsStream("config.properties")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T05:42:20.323

您需要让类加载器获取资源。请参阅[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ClassLoader.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ClassLoader.html)

```
Properties prop = new Properties();
prop.load(classLoader.getResourceAsStream("config.properties"));
_url = prop.getProperty("url"); 
```

# javascript - 数组中的 Javascript/Jquery OOP 数组

> ID：14313762
> 
> 赞同：0
> 
> 时间：2013-01-14T05:40:05.637
> 
> 标签：javascript, jquery

简而言之，我正在对我的数据库进行 REST 调用并获取一份成分列表。JSON 看起来像：

```
[{"SubItemID":1,"MainItemID":1,"SubName":"2%","MainName":"Milk"},
{"SubItemID":2,"MainItemID":1,"SubName":"Skim/Fat Free","MainName":"Milk"},
{"SubItemID":3,"MainItemID":2,"SubName":"Chedder","MainName":"Cheese"}] 
```

我想要做的是将其转换为一个有用的数组，该数组组织为：

1.  牛奶
    1.  2%
    2.  脱脂/脱脂
2.  起司
    1.  切德

除了这样订购之外，我还想维护与每个项目关联的 ID。所以奶酪有“2”，切德有“3”。

我已经能够将 Milk and Cheese 的独特值输入到一个数组中，但我不确定如何进行。建议将不胜感激！

这是我到目前为止所拥有的：

```
 $.ajax({
            url: "../api/IngredientChoices",
            contentType: "json",
            success: function (data) {
                var _subCategories = {};
                var _mainCategories = [];
                $.each(data, function (index, item) {
                    if ($.inArray(item.MainName, _mainCategories) === -1) {
                        _mainCategories.push(item.MainName);
                    }
                });
                $.each(_mainCategories, function () {
                    alert(this);
                });
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T05:51:44.193

详细的工作答案。数据被添加到关联数组中。

```
obj = JSON.parse(data);

console.log(obj);

d = {}

$.each(obj, function (index, item) {
    if (!(item.MainItemID in d)) {
        d[item.MainItemID] = [];
        d[item.MainItemID][0] = item.MainName;
        d[item.MainItemID][1] = {}
    }

    d[item.MainItemID][1][item.SubItemID] = item.SubName;
});

console.log(d); 
```

输出：

```
Object {1: Array[2], 2: Array[2]}
1: Array[2]
    0: "Milk"
        1: "2%"
        2: "Skim/Fat Free"
2: Array[2]
    0: "Cheese"
        3: "Chedder" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T05:54:52.497

您可能想编辑您的问题。您想要的“有用”数组实际上不是数组。你可能想要这个：
[
  {
   name : 'Milk',
   subTypes : [ '2%', 'Fat Free'],
  },
  {
   name : 'Cheese',
   subTypes : [ 'Cheddar' ],
  }
]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T05:58:17.847

[jsfiddle 示例](http://jsfiddle.net/r5ZeT/2/)

```
var data = [{"SubItemID":1,"MainItemID":1,"SubName":"2%","MainName":"Milk"},
{"SubItemID":2,"MainItemID":1,"SubName":"Skim/Fat Free","MainName":"Milk"},
{"SubItemID":3,"MainItemID":2,"SubName":"Chedder","MainName":"Cheese"}];

var ordered = {};

for(var i = data.length; i--;) {
  var mainItemID = data[i].MainItemID;
  if(!ordered[mainItemID]) {
    ordered[mainItemID] = {};
    ordered[mainItemID].MainName = data[i].MainName;
    ordered[mainItemID].MainItemID = mainItemID;
  }
  ordered[mainItemID][data[i].SubItemID] = data[i];
}

console.log(ordered); 
```

您可以在对象集合中创建一个数组，这样您就可以对其进行排序：

```
var dataArray = [];

for(var k in ordered) {
  dataArray.push(ordered[k]);
}

console.log(dataArray); 
```

如果您计划进行更复杂的数据解析或操作，我会推荐一些模型/集合框架，例如：[Backbonejs](http://backbonejs.org/)、[SpineJS](http://spinejs.com/)，甚至使用[webSQL](http://html5doctor.com/introducing-web-sql-databases/)或[IndexedDB](https://developer.mozilla.org/en-US/docs/IndexedDB)。

# asp.net - 在 IE 上使用主机名时设计崩溃？

> ID：14313772
> 
> 赞同：0
> 
> 时间：2013-01-14T05:41:46.890
> 
> 标签：asp.net, internet-explorer, iis-7, cross-browser

我对 IE 有一个非常奇怪的问题，在开发环境中，我的设计看起来很完美，在已发布的环境中也很完美，但只有当我通过服务器 ip 调用它时，

**例如：**

如果在地址栏 (IE) 中写 `"http://10.0.0.13:700"`i，我的设计看起来很完美。

如果 `"http://MyHostName"`在地址栏 (IE) 中写入 i，我的设计会崩溃。

请注意，我只在 IE 上遇到这个问题。

使用的技术如下：

```
ASP.NET 3.5

IIS 7.0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:29:17.650

我发现问题出在哪里，由于某种原因，当您通过主机名浏览器模式调用您的站点时，浏览器模式更改为兼容性视图。

我的设计不支持 IE 7，因此问题将出现在兼容性视图模式下。

所以我通过将浏览模式更改为 IE9 解决了这个问题

谢谢大家。

# html - 如何让 span 或 li 的背景图像出现在文本上方的顶部？

> ID：14313776
> 
> 赞同：0
> 
> 时间：2013-01-14T05:42:32.323
> 
> 标签：html, css, background-image

我在水平导航菜单中有这个项目：

```
<li class="menu">
   <a href="---">Our Users</a>
</li> 
```

我希望它看起来像这样：

![截屏](../Images/b695c05d82a615cbbe2bffdf0f6e5d4e.png)

我会弄清楚文本颜色等。我想知道的是，如何让图像出现在文本上方，文本居中位于其下方。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T05:49:35.533

它很容易将 li 的背景设置为 2 人图标，并为 li 提供一个填充顶部。

```
li { background: url(image.png) no-repeat; 
     padding: 40px 0 0 0; 
     text-align: center;
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T06:17:52.250

试试这个。假设您的图像不可点击...将宽度和填充应用于您的 li 标签。

```
li { background: url(urimage.png) no-repeat; 
 padding: 72px 0 0 0; 
 text-align: center;
 width: 100px;
 list-style: none; 
```

}

如果您希望您的图像可点击，只需将您的文本“我们的用户”包装到一个 div 中并应用与上述相同的样式。

[试试这个 jsfiddle 演示](http://jsfiddle.net/ydx47/)

希望它会帮助你。谢谢你

# silverlight - CheckBox 的 DataContextChanged 事件

> ID：14313777
> 
> 赞同：0
> 
> 时间：2013-01-14T05:42:49.407
> 
> 标签：silverlight, silverlight-4.0, silverlight-3.0, silverlight-2.0

我在 Silverlight4 VS 2010 中工作。我在我的 .xaml 文件中放置了一个 CheckBox。我需要它的 DataContextChanged 事件。但不幸的是我没有找到它。

这是我的复选框：

```
<CheckBox x:Name="chkRegion" Content="{Binding name}" Click="CheckBox_Click" ></CheckBox> 
```

您能否帮我在 SL 4 VS 2010 中找到 DataContextChanged。

谢谢，拉杰比尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:09:21.880

实现一个转换器（它只是一个从 IValueConverter 派生并实现接口方法的简单类）

> ```
> public class ChangeIsCheckedValConverter : IValueConverter
> {
>     public object Convert(object value,
>                           Type targetType,
>                           object parameter,
>                           System.Globalization.CultureInfo culture)
>     {
>         if (value != null)
>         { 
> ```
> 
> //这里的值是你绑定到 Checkbox 的 DataContext 的对象；//根据绑定到复选框的值返回布尔值（真或假）
> 
> ```
>  }
> 
>     public object ConvertBack(object value,
>                               Type targetType,
>                               object parameter,
>                               System.Globalization.CultureInfo culture)
>     {
>         return null;
>     } 
> ```

```
You will have to add the name space of you newly implemnted converter whereever you will want to use . 
```

然后使用此转换器，其中您的复选框在数据模板中定义如下： //首先定义键如下：

```
 <converters:VisibilityConverter x:Key="changeConverter" />

<CheckBox x:Name="chkRegion" Content="{Binding name}" IsChecked={Binding ,Converter={StaticResource changeConverter}}"} Click="CheckBox_Click" ></CheckBox> 
```

# ios - MPMovieplayerController playableDuration 为 m3u8 文件波动

> ID：14313785
> 
> 赞同：1
> 
> 时间：2013-01-14T05:43:58.753
> 
> 标签：ios, objective-c, video-streaming, mpmovieplayercontroller, http-live-streaming

我正在缓冲 m3u8 格式的视频，并将此 url 设置为 MPMovieplayerController 的 contenturl

我正在运行一个每 0.3 秒运行一次的后台线程，我用它来检查缓冲和播放的持续时间并相应地执行检查

```
if(!mPlaybackProgressTimer)
    mPlaybackProgressTimer = [[NSTimer scheduledTimerWithTimeInterval:0.2 target:self selector:@selector(didPlayback:) userInfo:nil repeats:YES] retain]; 
```

在 didplayback 中

..

```
- (void)didPlayback:(id)sender {

    NSTimeInterval totalDuration = [mVideoPlayerController duration];

    NSTimeInterval playbackTime = [mVideoPlayerController currentPlaybackTime];
    float playbackProgress = 0.0;

   if(playbackTime > 0.0 && totalDuration > 0.0)
       playbackProgress = playbackTime / totalDuration;

   mPercentWatched = round(100 * playbackProgress);

   NSTimeInterval bufferedTime = [mVideoPlayerController playableDuration];
   float bufferProgress = 0.0;

   if(playbackTime > 0.0 && totalDuration > 0.0)
       bufferProgress = bufferedTime / totalDuration;

   [self setProgress:bufferProgress forProgressType:eProgressTypeBuffer];
   [self setProgress:playbackProgress forProgressType:eProgressTypePlay];
} 
```

问题是*bufferedTime*在某些情况下会波动：-
- 我将 m3u8 文件分成不同的文件以用于不同的分辨率和比特率
- 我有一个 index.m3u8 文件，它决定了哪个 m3u8 文件服务于什么带宽
- 当然可以不提供整个 m3u8 文件，而是提供单个 *.ts 文件，具体取决于用户如何立即获得最佳体验（所有这些都在内部进行管理） - 我也按照[苹果开发者指南遵循了所有这些](https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/StreamingMediaGuide/UsingHTTPLiveStreaming/UsingHTTPLiveStreaming.html)

我不确定为什么会发生波动，但对我来说似乎有意义的是......一定数量的数据被缓冲但我认为数据可能被丢弃（只是一个理论）

**注意：**我使用 encoding.com 来分割媒体

更新：日志

2013-01-14 11:46:57.731 IronStudios[7724:c07] 缓冲进度：0.139779
2013-01-14 11:46:57.930 IronStudios[7724:c07] 缓冲进度：0.139779
2013-01-14 11:46:58.130 IronStudios[7724:c07] 缓冲进度：0.139790
2013-01-14 11:46:58.331 IronStudios[7724:c07] 缓冲进度：0.139790
2013-01-14 11:46:58.530 IronStudios[7724:c07]244 缓冲进度：0.1250
2013-01-14 11:46:58.730 IronStudios[7724:c07] 缓冲进度：0.126391
2013-01-14 11:46:58.930 IronStudios[7724:c07] 缓冲进度：0.124450
2013-01-14 11:46:59.130 IronStudios[7724:c07] 缓冲进度：0.125799

如您所见，某些实例的缓冲区进度正在减少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:43:29.243

持续时间可以从下载量得出，而 playableDuration 可以从可以播放的内容得出。

下载整个块后，iOS 才会开始播放 mpeg2-ts 块。

假设您正在使用 10 秒的块。

```
Downloaded: 2.2 chunks (22 seconds)
Playable:   2   chunks (20 seconds)
Progress bar = 2 / 2.2 = ~91% 
```

几秒后……

```
Downloaded: 2.9 chunks (29 seconds)
Playable:   2   chunks (20 seconds)
Progress bar = 2 / 2.9 = ~69% 
```

你的进度条倒退了...

几秒后……

```
Downloaded: 3.1 chunks (31 seconds)
Playable:   3   chunks (30 seconds)
Progress bar = 3 / 3.1 = ~97% 
```

并再次转发...

# configuration - ConfigurationSection - StringValidator 失败

> ID：14313788
> 
> 赞同：2
> 
> 时间：2013-01-14T05:44:14.733
> 
> 标签：configuration

我想在我的 ASP.NET web.config 文件中的自定义元素中存储三个值，所以这是我的 web.config：

```
<?xml version="1.0"?>
<configuration>
    <configSections>
        <section name="mySection" type="Foobar.MySection,Foobar" />
    </configSections>

    <mySection baseUri="https://blargh" sid="123" key="abc" />

    <!-- etc, including <system.web> configuration -->
</configuration> 
```

这是我的配置代码：

```
namespace Foobar {

public class MySection : ConfigurationSection {

    public MySection () {
    }

    [ConfigurationProperty("baseUri", IsRequired=true)]
    [StringValidator(MinLength=1)]
    public String BaseUri {
        get { return (String)this["baseUri"]; }
        set { this["baseUri"] = value; }
    }

    [ConfigurationProperty("sid", IsRequired=true)]
    [StringValidator(MinLength=1)]
    public String Sid {
        get { return (String)this["sid"]; }
        set { this["sid"] = value; }
    }

    [ConfigurationProperty("key", IsRequired=true)]
    [StringValidator(MinLength=1)]
    public String Key {
        get { return (String)this["key"]; }
        set { this["key"] = value; }
    }
}
} 
```

我使用以下代码加载它：

```
MySection section = ConfigurationManager.GetSection("mySection") as MySection;
String x = section.BaseUri; 
```

但是，当我在 ASP.NET 中运行我的代码时，我得到了这个异常：

```
[ArgumentException: The string must be at least 1 characters long.]
System.Configuration.StringValidator.Validate(Object value) +679298
System.Configuration.ConfigurationProperty.Validate(Object value) +41

[ConfigurationErrorsException: The value for the property 'baseUri' is not valid. The error is: The string must be at least 1 characters long.]
System.Configuration.BaseConfigurationRecord.CallCreateSection(Boolean inputIsTrusted, FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentConfig, ConfigXmlReader reader, String filename, Int32 line) +278
System.Configuration.BaseConfigurationRecord.CreateSectionDefault(String configKey, Boolean getRuntimeObject, FactoryRecord factoryRecord, SectionRecord sectionRecord, Object& result, Object& resultRuntimeObject) +59
System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject) +1431
System.Configuration.BaseConfigurationRecord.GetSection(String configKey, Boolean getLkg, Boolean checkPermission) +56
System.Configuration.BaseConfigurationRecord.GetSection(String configKey) +8
System.Web.HttpContext.GetSection(String sectionName) +47
System.Web.Configuration.HttpConfigurationSystem.GetSection(String sectionName) +39
System.Web.Configuration.HttpConfigurationSystem.System.Configuration.Internal.IInternalConfigSystem.GetSection(String configKey) +6
System.Configuration.ConfigurationManager.GetSection(String sectionName) +78
<my code that calls GetSection> 
```

当在我的 web.config 中设置正确格式的值时，为什么 StringValidator 会失败？我在看什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T06:09:53.077

因为`StringValidator`是异常的原因，我做了一些谷歌搜索，显然这是 .NET Framework 中的一个错误：具有`StringValidator`最小长度参数意味着它将始终拒绝`""`属性的空字符串默认值，该值将由框架。

有一些变通方法，但我无法证明在它们上花费时间是合理的，所以我去掉了`StringValidator`属性，我的代码现在可以正常工作了。

这是我发现的 QA：[为什么自定义配置部分的 StringValidator 总是失败？](https://stackoverflow.com/questions/3585407/why-does-stringvalidator-always-fail-for-custom-configuration-section)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T05:49:34.053

它明确指出

> 属性“baseUri”的值无效

我认为应该是

```
<mySection baseUri="https://blargh"  sid="123" key="abc" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-26T23:52:01.270

StringValidator 是根本问题，它可以通过以下任何一种方式解决：

*   删除 MinLength 参数
*   设置 MinLength = 0
*   删除 StringValidator 属性
*   将 DefaultValue 添加到 ConfigurationProperty 属性

该属性的理想定义如下：

```
 [ConfigurationProperty("title", IsRequired = true, DefaultValue = "something")]
    [StringValidator(InvalidCharacters = "~!@#$%^&*()[]{}/;’\"|\\"
      , MinLength = 1
      , MaxLength = 256)]
    public string Title
    {
        get { return this["title"] as string; }
        set { this["title"] = value; }
    } 
```

# asp.net - 使用asp.net自动输入用户名和密码

> ID：14313790
> 
> 赞同：0
> 
> 时间：2013-01-14T05:44:36.200
> 
> 标签：asp.net, .net

我正在使用带有某些参数的 http post 访问 url，并且在单击 url 时会出现一个框，要求输入用户名和密码。现在我将网址粘贴到浏览器中，并在输入时要求输入用户名和密码。

当我知道如何向 url 发送请求时，我想使用 asp.net 执行此操作，但我想知道如何使用代码自动输入用户名和密码。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:22:04.597

您要做的是使用用户名和密码向服务器发送 POST 请求。大多数服务器不会接受直接的身份验证请求，并且需要一些 Http 标头，例如 cookie，在其之前设置引用者。

您可以使用[fiddler](http://www.fiddler2.com/fiddler2/)之类的工具来查看浏览器实际发送到服务器的内容。

这是一个将发布数据发送到服务器的小示例。

```
// create the POST request
var postParams = "user=userName&password=userPassword";
var webRequest = (HttpWebRequest)WebRequest.Create(yourUrl);
webRequest.Method = "POST";
webRequest.ContentType = "application/x-www-form-urlencoded";
webRequest.ContentLength = postParams.Length;

// send POST data
using (StreamWriter sw = new StreamWriter(webRequest.GetRequestStream()))
{
    sw.Write(postParams);
} 
```

**编辑**：这是设置基本授权标头的最简单方法

```
webRequest.Credentials = new NetworkCredential("userName", "userPassword"); 
```

您提供的链接说他们使用基本的 HTTP 身份验证。

# java - SQL Server 2008 上的 JDBC、休眠和隐式事务

> ID：14313791
> 
> 赞同：1
> 
> 时间：2013-01-14T05:44:47.070
> 
> 标签：java, sql-server, hibernate, transactions, glassfish

`'stuck'`当从 Hibernate 发出并在 Glassfish 实例上运行时，我们在连接到 SQL Server 2008 时遇到了一些问题。

有时，将有 10 或 20 次对存储过程的调用，这些调用都是`'sleeping'`，并且保持打开多个事务。

当我`DBCC INPUTBUFFER`用来了解更多关于它们的信息时，它有：

> 名称：implicit_transaction

这是否意味着 java 应用程序正在设置`'SET IMPLICIT_TRANSACTIONS ON'`为批处理的一部分？我能够在数据库端复制该事务名称的唯一方法是使用该语法。

似乎 java 应用程序挂在连接上，但不知何故丢失了调用本身的上下文，因此它永远不会回来提交事务。

Java 开发人员说他们没有明确定义任何连接，也没有说他们故意设置任何其他连接属性。这些调用都是在 READ COMMITTED 隔离级别下进行的。

我怎样才能知道是否有一些隐藏的属性集，或者某些休眠设置是否导致了这种烦人的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:23:48.457

您可以要求 Hibernate 记录它正在执行的 sql 语句。

本文[介绍](http://www.javalobby.org/java/forums/t44119.html)了两种方法来做到这一点。

```
SessionFactory sf = new Configuration()
    .setProperty("hibernate.show_sql", "true")
    // ...
    .buildSessionFactory(); 
```

或在 log4j 配置中

```
log4j.logger.org.hibernate.SQL=DEBUG, SQL_APPENDER
log4j.additivity.org.hibernate.SQL=false 
```

# php - PDOStatement 类的对象无法转换为 int

> ID：14313792
> 
> 赞同：0
> 
> 时间：2013-01-14T05:44:55.607
> 
> 标签：php, pdo

我的代码：

```
$pdo = new PDO('mysql:host=localhost; dbname=test', 'root', 'password');
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$pdo->exec('SET NAMES "utf8"');
...
$count = $pdo->query('SELECT COUNT(*) FROM myTable'); 
```

我正在尝试计算所有记录`myTable`并将该数字存储为`$count`. 我怎样才能做到这一点？

我收到这条消息：`Object of class PDOStatement could not be converted to int`。据我了解，它不是一个整数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T05:55:38.277

实际上，该查询将返回一个 PDO 语句。然后，您可以使用该语句来获取感兴趣的项目。

```
$statement = $pdo->query('SELECT COUNT(*) FROM myTable');
$result = $statement->fetch();
$count = $result[0]; 
```

这会从您的查询中获取语句，然后获取第一行（此查询中的唯一行），然后将计数 $result[0] 存储到名为 $count 的变量中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T06:01:59.113

事情是`query`函数返回您对语句的引用。来自[PHP 手册](http://php.net/manual/en/pdo.query.php)

```
Return Values

PDO::query() returns a PDOStatement object, or FALSE on failure. 
```

为了获得特定领域，请使用类似的东西

```
$result = $pdo->query('SELECT COUNT(*) total FROM myTable LIMIT 1');
$row = $result->fetch(PDO::FETCH_ASSOC);
$count = $row['total']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-03T14:58:10.757

Object [PDO::fetachAll()](http://php.net/manual/es/pdostatement.fetchall.php)的方法，返回一个数组；

和函数[count()](http://php.net/manual/es/function.count.php)，接受混合参数并返回整数值。

```
$pdo = new PDO('mysql:host=localhost; dbname=test', 'root', 'password');

$query = $pdo->query('SELECT COUNT(*) FROM myTable')->fetchAll();

$countQuery = count($query); 
```

# javascript - 试图理解执行字符串解析的 JavaScript eval 的输出

> ID：14313796
> 
> 赞同：0
> 
> 时间：2013-01-14T05:46:05.013
> 
> 标签：javascript, eval, string-parsing

谁能解释一下为什么下面执行 JavaScript 的 Java 代码在这里返回“Smith”？

```
 ScriptEngineManager manager = new ScriptEngineManager();
    ScriptEngine engine = manager.getEngineByName("js");
    String jsSnippet = "var fullName = 'Joe Smith'; fullName.substring(fullName.indexOf(' ') + 1);";
    System.out.println(engine.eval(jsSnippet)); 
```

提供与上述 Java 代码相同的输出的类似 JavaScript 代码 ( [jsFiddle](http://jsfiddle.net/hs2501/xaJg4/1/) ) 是

```
var jsSnippet = "var fullName = 'Joe Smith'; fullName.substring(fullName.indexOf(' ') + 1);";
document.write(eval(jsSnippet)); 
```

PS：我知道 eval 是邪恶的，但这是我必须使用 JavaScript eval 的情况之一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T06:17:23.110

eval 函数计算传递给它的最后一个表达式，并返回它的值。请参阅Mozilla 开发者网络中[有关 eval 的相关部分。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval#Return_value)

# android - Android 中的 PDF 查看器

> ID：14313799
> 
> 赞同：0
> 
> 时间：2013-01-14T05:46:18.787
> 
> 标签：android, pdf, plugins, android-intent, adobe

在我的 android 中，我安装了 Adob​​e PDF 阅读器。现在我要做的是，当我的 PDF 被下载并显示 PDF 被点击时，我试图在 Adob​​e PDF 阅读器中打开 PDF。

以下是 Adob​​e PDF Reader Comes 的意图，但没有选项：

```
public String showPdf(String fileName) {
File file = new File(fileName);
Log.i("PdfViewer", "open file "+ fileName);
// if (file.exists()) {
Log.i("PdfViewer", "file exist");
try {
Uri path = Uri.fromFile(file);
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(path, "application/pdf");
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
//intent.setData(Uri.parse(fileName));
this.ctx.startActivity(intent);
return "";
} catch (android.content.ActivityNotFoundException e) {
System.out.println("PdfViewer: Error loading url "+fileName+":"+ e.toString());
return e.toString();
} 
```

你能建议一个使用意图吗？

谢谢，安基特。

# ravendb - 当 NServiceBus 尝试安排超时时，Raven 返回 400“请求太长”错误

> ID：14313800
> 
> 赞同：3
> 
> 时间：2013-01-14T05:46:28.757
> 
> 标签：ravendb, nservicebus, http-status-code-400

我有一个 NServiceBus 传奇，它试图使用 Raven 超时持久器来安排超时，但是当它尝试时它会收到此错误：

```
NServiceBus.Unicast.Transport.Transactional.TransactionalTransport [(null)] <(null)> - Failed raising 'transport message received' event for message with ID=90dadfbd-9eb6-4558-96ec-37edb642330a\17275422
    System.InvalidOperationException: <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN""http://www.w3.org/TR/html4/strict.dtd">
    <HTML><HEAD><TITLE>Bad Request</TITLE>
    <META HTTP-EQUIV="Content-Type" Content="text/html; charset=us-ascii"></HEAD>
    <BODY><h2>Bad Request - Request Too Long</h2>
    <hr><p>HTTP Error 400\. The size of the request headers is too long.</p>
    </BODY></HTML>
     ---> System.Net.WebException: The remote server returned an error: (400) Bad Request.
       at System.Net.HttpWebRequest.GetResponse()
       at Raven.Client.Connection.HttpJsonRequest.ReadStringInternal(Func`1 getResponse)
       --- End of inner exception stack trace ---
       at Raven.Client.Connection.HttpJsonRequest.ReadStringInternal(Func`1 getResponse)
       at Raven.Client.Connection.HttpJsonRequest.ReadResponseString()
       at Raven.Client.Connection.HttpJsonRequest.ReadResponseJson()
       at Raven.Client.Connection.ServerClient.DirectPut(RavenJObject metadata, String key, Nullable`1 etag, RavenJObject document, String operationUrl)
       at Raven.Client.Connection.ServerClient.<>c__DisplayClass10.<Put>b__f(String u)
       at Raven.Client.Connection.ServerClient.TryOperation[T](Func`2 operation, String operationUrl, Boolean avoidThrowing, T& result)
       at Raven.Client.Connection.ServerClient.ExecuteWithReplication[T](String method, Func`2 operation)
       at Raven.Client.Connection.ServerClient.Put(String key, Nullable`1 etag, RavenJObject document, RavenJObject metadata)
       at Raven.Client.Document.HiLoKeyGenerator.PutDocument(JsonDocument document)
       at Raven.Client.Document.HiLoKeyGenerator.GetNextMax()
       at Raven.Client.Document.HiLoKeyGenerator.NextId()
       at Raven.Client.Document.HiLoKeyGenerator.GenerateDocumentKey(DocumentConvention convention, Object entity)
       at Raven.Client.Document.MultiTypeHiLoKeyGenerator.GenerateDocumentKey(DocumentConvention conventions, Object entity)
       at Raven.Client.Document.DocumentStore.<>c__DisplayClass1.<Initialize>b__0(Object entity)
       at Raven.Client.Document.InMemoryDocumentSessionOperations.GetOrGenerateDocumentKey(Object entity)
       at Raven.Client.Document.InMemoryDocumentSessionOperations.StoreInternal(Object entity, Nullable`1 etag, String id)
       at Raven.Client.Document.InMemoryDocumentSessionOperations.Store(Object entity)
       at NServiceBus.Timeout.Hosting.Windows.Persistence.RavenTimeoutPersistence.Add(TimeoutData timeout)
       at NServiceBus.Timeout.Core.TimeoutTransportMessageHandler.Handle(TransportMessage message)
       at NServiceBus.Unicast.Transport.Transactional.TransactionalTransport.OnTransportMessageReceived(TransportMessage msg) 
```

我已经重新启动了 Raven 服务和 nservicebus 主机。我已经尝试重新创建这个传奇，但它仍然会发生。

正在安排的超时状态消息很小：

```
<Messages xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://tempuri.net/Invoicing.Service">
    <IPartPaymentTimeout>
        <Amount>10.00</Amount>
        <OriginalTransactionTimeUtc>2013-01-14T05:49:04.8180938Z</OriginalTransactionTimeUtc>
        <PaymentNumber>7</PaymentNumber>
        <Id>123456</Id>
        <InvoiceNumber>1234567/34567</InvoiceNumber>
    </IPartPaymentTimeout>
</Messages> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-14T00:52:34.393

在我的案例中，这通过阻止 New Relic 对自定义应用程序进行检测来解决。看起来 New Relic 中有一个错误，它附加了一个请求标头`X-NewRelic-ID`，它会附加相同的数据，直到它变得太长：

`X-NewRelic-ID: <hash>, <samehash>, <samehash>,.....<samehash>`

在 NewRelic.xml 文件中禁用 NServiceBus.Host 检测会阻止发送标头。

在 NewRelic.xml 中，您还可以禁用`crossApplicationTracingEnabled`.

要检测这一点，请使用 System.Diagnostics 中的跟踪：

```
 <system.diagnostics>
<trace autoflush="true" />
<sources>
  <source name="System.Net" maxdatasize="1024">
    <listeners>
      <add name="MyTraceFile"/>
    </listeners>
  </source>
</sources>

<sharedListeners>
  <add
    name="MyTraceFile"
    type="System.Diagnostics.TextWriterTraceListener"
    initializeData="System.Net.trace.log"
            />
</sharedListeners>

<switches>
  <add name="System.Net" value="Verbose" />
</switches> 
```

# knockout.js - 淘汰变量解析

> ID：14313802
> 
> 赞同：0
> 
> 时间：2013-01-14T05:46:33.950
> 
> 标签：knockout.js, knockout-2.0

```
 <tbody id="sortable" data-bind="foreach: rows">
    <tr id="tableId" data-bind="foreach: $root.activeColumns">
        <td data-bind="visible:!deleted()">
          <div data-bind="text: ($parent.id)==1"></div>
        </tr>
 </tbody> 
```

嗨，在我的以下代码中，如果我正在打印 'parent.id'，它会将 id 打印为 1、2、3、4、5，但如果我像 '($parent.id)==1' 这样写，它应该打印一个true 和其他为 false 但它在所有条件下都打印为 false。我认为这是一些变量解析问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:23:55.903

你有奇怪的视图模型架构。
您正在使用`root`元素`activeColumns`并想要获取`parent`. `root`根元素没有父元素。

[我在这里](http://jsfiddle.net/PR3n8/)写了最简单的例子，效果很好。

# tinymce - 捕获来自 tinymce 的关闭窗口调用

> ID：14313809
> 
> 赞同：1
> 
> 时间：2013-01-14T05:47:52.453
> 
> 标签：tinymce

每当 tinymce 窗口关闭时，我想通过 ajax 重新加载页面中的某些元素，但我找不到对我可以使用的任何事件调用的任何引用。[这个页面](http://www.tinymce.com/wiki.php/API3:method.tinymce.WindowManager.close)提到了一个 onClose 事件，但我在 tinymce api 中找不到它的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:28:35.123

不，没有 onClose 事件，但你是我的用户[onRemove](http://www.tinymce.com/wiki.php/API3%3aevent.tinymce.Editor.onRemove)事件。这是此配置的初始化代码

```
// Adds an observer to the onRemove event using tinyMCE.init
tinyMCE.init({
   ...
   setup : function(ed) {
      ed.onRemove.add(function(ed) {
          console.debug('Editor was removed: ' + ed.id);
      });
   }
}); 
```

# c# - 文本框中只允许一个小数点

> ID：14313810
> 
> 赞同：1
> 
> 时间：2013-01-14T05:47:55.180
> 
> 标签：c#, string, parsing, textbox

我正在使用 C# 设计一个基本的计算器。我在输入小数点时遇到了困难。例如，如果我输入 0.8，那么它给我 0.8，如果显示屏上没有任何内容，这是正确的，但之后如果我输入十进制符号，那么它也接受 0.8 ..... 我想要一个数字只接受一个十进制符号。我的代码是

```
private void btn_Decimal_Click(object sender, EventArgs e)
{
    if (txt_Result.Text == "" || LastcharIssymbol==true)
    {
         txt_Result.Text = txt_Result.Text + 0 + ".";
    }
    else
         txt_Result.Text = txt_Result.Text + ".";
} 
```

在这里，如果我输入 0.9.999 那么它也接受，如果我输入 999..... 那么它也接受。我希望一个数字 999.999 只接受一个十进制符号。请帮我。我还添加了两个额外的标签，可以显示当前系统日期和时间。我无法显示日期和时间，但我可以使用 VB.Net 显示日期和时间。我不知道我在哪里得到错误。我的整个代码是

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace CS_Calculator
{
    public partial class Form1 : Form
    {
        Boolean LastcharIssymbol {get;set;}
        string op;
        double a, memory;
        public Form1()
        {
            InitializeComponent();
        }

        private void btn_1_Click(object sender, EventArgs e)
        {
            txt_Result.Text = txt_Result.Text + "1";
            LastcharIssymbol= false;
        }

        private void btn_2_Click(object sender, EventArgs e)
        {
            txt_Result.Text = txt_Result.Text + "2";
            LastcharIssymbol = false;
        }

        private void btn_3_Click(object sender, EventArgs e)
        {
            txt_Result.Text = txt_Result.Text + "3";
            LastcharIssymbol = false;
        }

        private void btn_4_Click(object sender, EventArgs e)
        {
            txt_Result.Text = txt_Result.Text + "4";
            LastcharIssymbol = false;
        }

        private void btn_5_Click(object sender, EventArgs e)
        {
            txt_Result.Text = txt_Result.Text + "5";
            LastcharIssymbol = false;
        }

        private void btn_6_Click(object sender, EventArgs e)
        {
            txt_Result.Text = txt_Result.Text + "6";
            LastcharIssymbol = false;
        }

        private void btn_7_Click(object sender, EventArgs e)
        {
            txt_Result.Text = txt_Result.Text + "7";
            LastcharIssymbol = false;
        }

        private void btn_8_Click(object sender, EventArgs e)
        {
            txt_Result.Text = txt_Result.Text + "8";
            LastcharIssymbol = false;
        }

        private void btn_9_Click(object sender, EventArgs e)
        {
            txt_Result.Text = txt_Result.Text + "9";
            LastcharIssymbol = false;
        }

        private void btn_0_Click(object sender, EventArgs e)
        {
            txt_Result.Text = txt_Result.Text + "0";
            LastcharIssymbol = false;
        }

        private void btn_Decimal_Click(object sender, EventArgs e)
        {
            if (txt_Result.Text == "" || LastcharIssymbol==true)
            {
                txt_Result.Text = txt_Result.Text + 0 + ".";
            }
            else
                txt_Result.Text = txt_Result.Text + ".";
        }

        private void btn_Plus_Click(object sender, EventArgs e)
        {
            if(txt_Result.Text=="" || LastcharIssymbol)
            {
                MessageBox.Show("Please Enter first number to perform the addition operation.");
            }
            else
            {
                op = "+";
                txt_Result.Text = txt_Result.Text + op;
                LastcharIssymbol=true;
            }
        }

        private void btn_Minus_Click(object sender, EventArgs e)
        {
            if (txt_Result.Text == "" || LastcharIssymbol)
            {
                MessageBox.Show("Please enter first number to erform the substraction operation.");
            }
            else
            {
                op = "-";
                txt_Result.Text = txt_Result.Text + op;
                LastcharIssymbol = true;
            }
        }

        private void btn_Division_Click(object sender, EventArgs e)
        {
            if (txt_Result.Text == "" || LastcharIssymbol)
            {
                MessageBox.Show("Please enter first number to perform the division operation.");
            }
            else
            {
                op = "/";
                txt_Result.Text = txt_Result.Text + op;
                LastcharIssymbol = true;
            }
        }

        private void btn_Mult_Click(object sender, EventArgs e)
        {
            if (txt_Result.Text == "" || LastcharIssymbol)
            {
                MessageBox.Show("Please enter first number to perform the multiplication operation.");
            }
            else
            {
                op = "*";
                txt_Result.Text = txt_Result.Text + op;
                LastcharIssymbol = true;
            }
        }

        private void btn_Equal_Click(object sender, EventArgs e)
        {

        }

        private void button4_Click(object sender, EventArgs e)
        {
            txt_Result.Text = "";
        }

        private void btn_Clear_All_Click(object sender, EventArgs e)
        {
            txt_Result.Text = "";
            op = "";
            a = 0;
            memory = 0;
        }

        private void btn_Memory_Click(object sender, EventArgs e)
        {
            memory = Convert.ToDouble(txt_Result.Text);
        }

        private void btn_Show_Memory_Click(object sender, EventArgs e)
        {
            txt_Result.Text = memory.ToString();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T05:51:56.087

您应该在单击后禁用小数点，并在按下任何运算符或“C”时再次启用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T05:51:16.500

您可以使用[decimal.TryParse](http://msdn.microsoft.com/en-us/library/system.decimal.tryparse%28v=vs.90%29.aspx)来测试字符串是否是有效的十进制数。如果不是，例如您的输入有两个小数点，则 TryParse 调用将失败。

TryParse 是一个不错的选择，因为除了双倍小数点之外，输入的数字可能存在许多问题，例如……三倍小数点、放错位置的减号、字母字符等。

尝试：

```
private void btn_Decimal_Click(object sender, EventArgs e)
{
    decimal num;
    if (!Decimal.TryParse(txt_Result.Text, out num))
    {
        MessageBox.Show(txt_Result.Text + " is not a valid number.");
        return;
    }

    if (txt_Result.Text == "" || LastcharIssymbol==true)
        txt_Result.Text = txt_Result.Text + 0 + ".";
    else
        txt_Result.Text = txt_Result.Text + ".";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T05:51:25.167

```
if (!txt_Result.Text.Contains("."))
    if(txt_Result.Text == string.Empty)
        txt_Result.Text = "0.";
    else
        txt_Result.Text += ".";
else
    MessageBox.Show("more dots are not allowd"); 
```

如果您有像“11.9+12”这样的文本，其中有操作，您可以执行以下操作

```
string formula = "11.9/1.2*99.9+19";

string lastPiece = formula.Split(new char[] { '+', '-', '*', '/' })[formula.Split(new char[] { '+', '-', '*', '/' }).Count() - 1];
if (!lastPiece.Contains('.')) formula += ".";
//adds dot

lastPiece = formula.Split(new char[] { '+', '-', '*', '/' })[formula.Split(new char[] { '+', '-', '*', '/' }).Count() - 1];

if (!lastPiece.Contains('.')) formula += ".";
//does not add dot

MessageBox.Show(formula);
//output : 11.9/1.2*99.9+19. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T14:57:44.337

```
private void txtPrice_KeyPress(object sender, KeyPressEventArgs e)//textprice key pressed
    {
        if ((e.KeyChar < '0' || e.KeyChar > '9') && (e.KeyChar != '\b') && (e.KeyChar != '.'))
        {
            e.Handled = true;
        }
        else
        {
            e.Handled = false;
        }
        if (Char.IsControl(e.KeyChar))
        {
            e.Handled = false;
        }
        else if (Char.IsNumber(e.KeyChar) || e.KeyChar == '.')
        {
            TextBox tb = sender as TextBox;
            int cursorPosLeft = tb.SelectionStart;
            int cursorPosRight = tb.SelectionStart + tb.SelectionLength;
            string result = tb.Text.Substring(0, cursorPosLeft) + e.KeyChar + tb.Text.Substring(cursorPosRight);
            string[] parts = result.Split('.');
            if (parts.Length > 1)
            {
                if (parts[1].Length > 2 || parts.Length > 2)
                {
                    e.Handled = true;
                }
            }
       } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T05:51:19.167

将您的最后一个更改`else`为：

```
else if (!txt_Result.Text.Contains (".")) {
    txt_Result.Text = txt_Result.Text + ".";
} 
```

或者考虑禁用小数点按钮。

您可能应该对该值进行一些验证，以确保它是一个有效数字。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-21T23:01:38.613

**另一个例子，100% **

```
 private void txtPrice_KeyPress(object sender, KeyPressEventArgs e)
    {

        if (txtPrice.Text.Length == 0)
        {
            if (e.KeyChar == '.')
            {
                e.Handled = true;
            }
        }
        if (!char.IsDigit(e.KeyChar) && e.KeyChar != 8 && e.KeyChar != 46)
        {
            e.Handled = true;
        }
        if (e.KeyChar == '.' && txtPrice.Text.IndexOf('.') > -1)
        {
            e.Handled = true;
        }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-23T08:16:09.383

这对我有用：

```
if (!txt_Result.Text.Contains("."))
if(txt_Result.Text == string.Empty)
    txt_Result.Text = "0.";
else
 MessageBox.Show("Sorry, invalid number format!    
Value can't have more than a decimal point");   
else
txt_Result.Text += "."; 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2017-03-08T12:41:46.763

将此代码放入 textbox_keypress 此处 txtweight 是您使用的我的文本框名称

私人无效txtweight_KeyPress（对象发送者，KeyPressEventArgs e）{

```
 if (txtweight.Text.Length == 0)
        {
            if (e.KeyChar == '.')
            {
                e.Handled = true;
            }
        }
        if (!char.IsDigit(e.KeyChar) && e.KeyChar != 8 && e.KeyChar != 46)
        {
            e.Handled = true;
        }
        if (e.KeyChar == '.' && txtweight.Text.IndexOf('.') > -1)
        {
            e.Handled = true;
        }

    } 
```

# python - 为什么 Queue.qsize 不准确？

> ID：14313814
> 
> 赞同：5
> 
> 时间：2013-01-14T05:48:06.083
> 
> 标签：python, queue

根据[Python 2.7](http://docs.python.org/2/library/queue.html#Queue.Queue.qsize)文档，`Queue.qsize`不可靠，并`help(Queue.Queue.qsize)`说它不可靠。是否有我不知道的特定实施问题？

PS我知道`Queue.Queue.qsize`使用互斥锁，并且`Queue`在我调用方法和获得结果之间可能会发生变化，但是对于单线程应用程序，`Queue`安全吗？

来自`help(Queue.Queue.qsize)`：

```
>>> 帮助（队列.Queue.qsize）
模块队列中方法 qsize 的帮助：

qsize(self) 未绑定 Queue.Queue 方法
    返回队列的大致大小（不可靠！）。

>>>

```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T05:55:28.210

`Queue.Queue.qsize`在单线程应用程序中工作正常（甚至在多线程应用程序中用于其目的的许多应用程序）。您根本无法使用它来可靠地确定调用`put`或`get`将阻塞。

请注意，如果您不需要并发，[`collections.deque`](http://docs.python.org/2/library/collections.html#collections.deque)则比`Queue.Queue`. 或者，如果性能不重要，您可以走简单的路线，只使用常规列表。

# c# - 返回交叉连接而不是内部连接

> ID：14313820
> 
> 赞同：1
> 
> 时间：2013-01-14T05:48:45.743
> 
> 标签：c#, .net, linq

我有两个从数据库到对象的结果集，当我内部连接它们时，它返回交叉连接。以下是我的代码：

```
var nw = new NorthwindEntities();
var employee1 = (from emp in nw.Employees
                 join ord in nw.Orders on emp.EmployeeID equals ord.EmployeeID
                 where emp.EmployeeID == 5
                 select new
                 {
                     empID = emp.EmployeeID,
                     empName = emp.FirstName,
                     ordDate = ord.OrderDate
                 }).ToList();

var employee2 = (from emp in nw.Employees
                 join ord in nw.Orders on emp.EmployeeID equals ord.EmployeeID
                 where emp.EmployeeID == 5
                 select new
                 {
                     empID = emp.EmployeeID,
                     empName = emp.FirstName,
                     shpAddress = ord.ShipAddress
                 }).ToList();

var employee = from e1 in employee1
               join e2 in employee2 on new { e1.empID } equals new { e2.empID }
               select new
               {
                   empID = e1.empID,
                   empName = e1.empName,
                   ordDate = e1.ordDate,
                   orAdd = e2.shpAddress
               };

gvAll.DataSource = employee.ToList(); 
```

现在，当我将employee1 和employee2 加入员工时，我得到了这些数据集的交叉连接。任何帮助将不胜感激。

我背后的主要目标是将从数据库返回的数据临时存储在某个地方，以便稍后与从数据库检索的其他数据一起使用。

employee1 和employee2 对员工ID (5) 使用相同的查询，但employee1 有empID、empName 和OrderDate，而employee2 有empID、empName 和shipAddress。现在我想从employee1 和employee2 中取出empID、empName、OrderDate 和ShipAddress。empID 在两者中都很常见，但我得到了一个交叉连接。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:14:56.770

在其中`employee1`，`employee2`您还需要该`OrderId`列，然后将它们连接起来，因为您需要在两个表上获得相同的唯一键。

从你写的内容来看，我认为这`empID`在任何一张桌子上都不是独一无二的，因为你可以有更多相同的订单`empID`

所以首先你需要一个唯一的密钥`employee1`，`employee2`然后你可以加入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-09T05:10:15.327

从函数返回的结果在逻辑上是正确的，它不是交叉连接。`empID`在某个表中有一些重复的行，所以数据看起来像一个交叉连接。然后使用`distinct`它将返回您想要的输出。

# php - 用于创建 gmail/google group/facebook 类型的界面（和一些功能）的开源框架

> ID：14313821
> 
> 赞同：0
> 
> 时间：2013-01-14T05:49:23.653
> 
> 标签：php, jquery, ajax, jquery-ui, cakephp

我正在开始一个新的开源项目。这将是一个具有现代`layout/functionalities`. 我希望这个应用程序像`gmail/facebook/google`组一样工作......或其他一些谷歌产品。我只想`js/css`一次加载所有资产和其他资产，并使用 ajax 请求加载部分页面。

我想使用 PHP（可能是 cakePHP、jQuery）。我知道如何从头开始创建这种应用程序，但我正在寻找某种开源框架来帮助我不要从头开始创建所有东西。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:24:09.300

有一个名为 Elgg ( [http://www.elgg.org/](http://www.elgg.org/) ) 的 php 框架，它是为基于社交网络的应用程序设计的 php 框架。

# facebook - 在 facebook iframe 中添加发送按钮，如按钮

> ID：14313822
> 
> 赞同：0
> 
> 时间：2013-01-14T05:49:31.307
> 
> 标签：facebook, iframe, facebook-like, jsfiddle

我有这个 iframe 并且正在显示类似 facebook 的按钮，但我无法添加发送按钮。我应该添加什么？我正在尝试`send=true&amp;`，但这似乎不起作用

[这是小提琴](http://jsfiddle.net/xjJsk/45/)

```
 <div style="float:left; margin-left:10px">
  <iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com/Eurekavi&amp;layout=button_count&amp;show_faces=false&amp;width=450&amp;action=like&amp;colorscheme=light&amp;height=20" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:100%; height:20px;" allowTransparency="true">
  </iframe>
  <style>.fbook{position: absolute; font-color:#ddd; top:-1668px; font-size:10;}</style>
  <style>.fbook-style_map:initreaction=10false_attempt10-border</style>
  <style>closemap"init"if=fb_connect-start="25"check_bandwith</style>
    </div>
  <div style="clear:both"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T23:21:50.250

Facebook 开发人员文档说：“发送按钮（仅限 XFBML）”。所以你必须为你的喜欢/发送按钮使用 XFBML：

包含一次 js-api：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
 var js, fjs = d.getElementsByTagName(s)[0];
 if (d.getElementById(id)) return;
 js = d.createElement(s); js.id = id;
 js.src = "//connect.facebook.net/de_DE/all.js#xfbml=1&appId=[your_app_id_here]";
 fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script> 
```

包括命名空间：

```
<html xmlns:fb="http://ogp.me/ns/fb#"> 
```

插入喜欢/发送按钮（如果需要，可以多次）：

```
<fb:like href="http://stackoverflow.com" send="true" layout="button_count" width="250" show_faces="false" font="tahoma"></fb:like> 
```

希望有帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-11T01:58:10.153

根据 Facebook 文档，您现在不能这样做！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-16T08:22:28.520

现在 facebook 用推荐替换了发送

```
<div class="fb-like" data-href="http://example.com" data-layout="standard" data-action="recommend" data-show-faces="true" data-share="true"></div> 
```

# css - CSS中的多个图像交叉淡入淡出 - 没有（java）脚本

> ID：14313825
> 
> 赞同：7
> 
> 时间：2013-01-14T05:49:45.880
> 
> 标签：css

是否可以在不使用 java 脚本的情况下在 CSS 中交叉淡入淡出 5 个图像？我发现了一个类似的问题： [css3 image crossfade (no javascript)](https://stackoverflow.com/questions/8540906/css3-image-crossfade-no-javascript)，但是，它只有 CSS 代码片段；我试过了，但无法让它工作。我是 CSS 新手，因此无法将上面页面中提到的 CSS 链接到我的以下 HTML：

```
 <div id= "crossfade">
     <img class = "cone" src = "1.png" alt = "png">
     <img class = "ctwo" src = "2.png" alt = "png">
     <img class = "cthree" src = "3.png" alt = "png">
     <img class = "cfour" src = "4.png" alt = "png">
     <img class = "cfive" src = "5.png" alt = "png">
  </div> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-14T08:28:25.157

如果你知道你有多少张图片，这可以很容易地用 CSS3 完成。

jsFiddle：http: [//jsfiddle.net/hajmd/](http://jsfiddle.net/hajmd/)

```
#crossfade > img { 
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0px;
    left: 0px;
    color: transparent;
    opacity: 0;
    z-index: 0;
    -webkit-backface-visibility: hidden;
    -webkit-animation: imageAnimation 30s linear infinite 0s;
    -moz-animation: imageAnimation 30s linear infinite 0s;
    -o-animation: imageAnimation 30s linear infinite 0s;
    -ms-animation: imageAnimation 30s linear infinite 0s;
    animation: imageAnimation 30s linear infinite 0s; 
} 
```

“ *-webkit-animation: imageAnimation **30s** linear **infinite** 0s;* ”中的“30s”表示每个图像的动画将无限次持续 30 秒。

```
#crossfade > img:nth-child(2)  { 
    background-image: url(../images/2.jpg);
    -webkit-animation-delay: 6s;
    -moz-animation-delay: 6s;
    -o-animation-delay: 6s;
    -ms-animation-delay: 6s;
    animation-delay: 6s; 
}
#crossfade > img:nth-child(3) { 
    background-image: url(../images/3.jpg);
    -webkit-animation-delay: 12s;
    -moz-animation-delay: 12s;
    -o-animation-delay: 12s;
    -ms-animation-delay: 12s;
    animation-delay: 12s; 
}
#crossfade > img:nth-child(4) { 
    background-image: url(../images/4.jpg);
    -webkit-animation-delay: 18s;
    -moz-animation-delay: 18s;
    -o-animation-delay: 18s;
    -ms-animation-delay: 18s;
    animation-delay: 18s; 
}
#crossfade > img:nth-child(5) { 
    background-image: url(../images/5.jpg);
    -webkit-animation-delay: 24s;
    -moz-animation-delay: 24s;
    -o-animation-delay: 24s;
    -ms-animation-delay: 24s;
    animation-delay: 24s; 
}

@-webkit-keyframes imageAnimation { 
    0% { opacity: 0;
    -webkit-animation-timing-function: ease-in; }
    8% { opacity: 1;
         -webkit-animation-timing-function: ease-out; }
    17% { opacity: 1 }
    25% { opacity: 0 }
    100% { opacity: 0 }
}

@-moz-keyframes imageAnimation { 
    0% { opacity: 0;
    -moz-animation-timing-function: ease-in; }
    8% { opacity: 1;
         -moz-animation-timing-function: ease-out; }
    17% { opacity: 1 }
    25% { opacity: 0 }
    100% { opacity: 0 }
}

@-o-keyframes imageAnimation { 
    0% { opacity: 0;
    -o-animation-timing-function: ease-in; }
    8% { opacity: 1;
         -o-animation-timing-function: ease-out; }
    17% { opacity: 1 }
    25% { opacity: 0 }
    100% { opacity: 0 }
}

@-ms-keyframes imageAnimation { 
    0% { opacity: 0;
    -ms-animation-timing-function: ease-in; }
    8% { opacity: 1;
         -ms-animation-timing-function: ease-out; }
    17% { opacity: 1 }
    25% { opacity: 0 }
    100% { opacity: 0 }
}

@keyframes imageAnimation { 
    0% { opacity: 0;
    animation-timing-function: ease-in; }
    8% { opacity: 1;
         animation-timing-function: ease-out; }
    17% { opacity: 1 }
    25% { opacity: 0 }
    100% { opacity: 0 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T05:53:41.630

您引用的示例应该适用于您引用的示例。但是请注意，并非所有浏览器（例如 IE8 和 IE7）都支持 CSS3，因此在这些浏览器中不起作用。

# javascript - 如何从视图内部获取网格视图的客户端 ID 以在 javascript 中使用

> ID：14313826
> 
> 赞同：1
> 
> 时间：2013-01-14T05:49:59.687
> 
> 标签：javascript, asp.net, gridview

我有一个网格视图，我想用 JavaScript 来计算在文本框中输入的值。

我正在添加`onkeyup`到`onrowcreated`函数中的文本框，它工作正常。

然后我把gridview放在a`multiview`中，它停止工作。

这是我的 JavaScript 函数：

```
 function margin1(rowIndex, price, gridId) {
        var grid = document.getElementById(gridId);
        var volumeQuota = grid.rows[rowIndex].cells[2].innerText;
        alert(volumeQuota);
        var coef = grid.rows[rowIndex].cells[5].childNodes.item(1).value;
        alert(coef);
        var prevSites = grid.rows[rowIndex].cells[4].innerText;;
        grid.rows[rowIndex].cells[6].childNodes.item(1).value = parseFloat(coef) * (parseFloat(volumeQuota) - parseFloat(prevSites));
        grid.rows[rowIndex].cells[7].childNodes.item(1).value = price;

    } 
```

在这后面的代码中，我是如何添加它的。

```
 if (e.Row.RowType == DataControlRowType.DataRow)
        {
            TextBox t1 = (TextBox)e.Row.FindControl("p98Margin1");
            t1.Attributes.Add("onkeyup",
                 string.Format("javascript:margin1('{0}', {1}, {2})", e.Row.RowIndex + 2,       a98.Text , GridView1.ClientID)); 
```

当我在 JavaScript 函数中发出警报`Gridview1.clientId`时，我得到了`[objectHTMLTableElement]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:26:36.150

用这个

```
 t1.Attributes.Add("onkeyup",
             string.Format("javascript:margin1('{0}', '{1}', '{2})'", e.Row.RowIndex + 2,       a98.Text , GridView1.ClientID)); 
```

我认为这应该有效。
我认为该值应该用单引号括起来`'`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T08:27:04.820

就像你说的那样，你把你的网格放在一个多视图中，一切都停止了，这意味着你的网格视图已经被掩埋了，你需要进一步钻取以暴露它。

做这个

```
 GridView myGridView=(GridView)(MultiView1.FindControl("GridView1")); 
```

现在你已经找到了它，优雅地引用了它的 ID

```
 if (e.Row.RowType == DataControlRowType.DataRow)
    {
        TextBox t1 = (TextBox)e.Row.FindControl("p98Margin1");
        t1.Attributes.Add("onkeyup",
             string.Format("javascript:margin1('{0}', {1}, {2})", e.Row.RowIndex + 2,       a98.Text ,myGridView.ClientID));
   } 
```

希望这可以帮助。

# javascript - 寻找闭合路径的多边形近似

> ID：14313828
> 
> 赞同：1
> 
> 时间：2013-01-14T05:50:26.420
> 
> 标签：javascript, image-processing, geometry, curve-fitting, feature-detection

我希望能够找到闭合路径的最佳拟合多边形近似（可以是从图像中拉出的任何路径），但是在如何编写算法来找到它时遇到了问题。

我可以想到一种幼稚的方法：沿路径的每 x 个像素，为这些像素选择最佳拟合线，然后针对不同的起始偏移和长度进行蛮力，并找到以最小数量最小化最小二乘误差的那个的行。

必须有更优雅的东西。有人知道吗？另外，（畏缩）但这将在javascript中实现，除非我真的很绝望，所以为你做事的好图书馆几乎被排除在外，（例如，opencv有一个多边形拟合器）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:25:52.537

D3.js [1](http://d3js.org/)有一些您可以使用的[自适应重采样代码。](http://bl.ocks.org/3795544)还有所[用算法的图解说明](http://bost.ocks.org/mike/simplify/)（Visvalingam 算法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:10:45.617

[Ramer-Douglas-Peucker](http://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm)算法在这里似乎很合适，并且易于实现。请注意，可接受的错误是该算法的输入，因此如果您有目标行数，则可以使用错误参数进行二进制搜索以命中目标。

# javascript - 如何通过要求将数据从另一个 HTML 页面添加到行中来在一个 HTML 页面中的表中添加行（可能使用“提示”和 javascripts）？

> ID：14313829
> 
> 赞同：0
> 
> 时间：2013-01-14T05:50:28.923
> 
> 标签：javascript, html

我使用了以下代码：

**Form1.html**

```
<html>

<head>
<title>Table of Data</title>
</head>

<body>

<form method="POST">

<table border="1" id="tblQuery">
<tr>
   <th>Query</th>
   <th>Answer</th>
   <th>Data Type</th>
   <th>Screen No.</th>
</tr>

<tr>
   <td>Name</td>
   <td><input type="text"/></td>
   <td>Textbox</td>
   <td>1</td>
   <td><input type="button" value="Edit" /><input type="button" value="Delete" /></td>
</tr>

<tr>
   <td>Gender</td>
   <td><input type="radio" name="gender" value="male" />Male<br><input type="radio" name="gender" value="female" />Female</td>
   <td>Radio Buttons</td>
   <td>2</td>
   <td><input type="button" value="Edit" /><input type="button" value="Delete" /></td>
</tr>

<tr>
   <td>Qualification</td>
   <td><input type="checkbox" name="qualification" value="graduate" />Graduate<br><input type="checkbox" name="qualification" value="post graduate" />Post Graduate</td>
   <td>Checkbox</td>
   <td>1</td>
   <td><input type="button" value="Edit" /><input type="button" value="Delete" /></td>
</tr>

<tr>
   <td>City</td>
   <td><select>
      <option value="new_delhi">New Delhi</option>
      <option value="mumbai">Mumbai</option>
      <option value="kolkata">Kolkata</option>
      <option value="chennai">Chennai</option>
      </select></td>
   <td>Select List</td>
   <td>4</td>
   <td><input type="button" value="Edit" /><input type="button" value="Delete" /></td>
</tr>

<tr>
   <td>Academic Record</td>
   <td><input type="button" value="Add Table" onclick="addTable.html" /></td>
   <td>Table</td>
   <td>3</td>
   <td><input type="button" value="Edit" /><input type="button" value="Delete" /></td>
</tr>

</table>

<br>

</form>

</body>

</html> 
```

**Form2.html**

```
<html>

<head>
<title>Action</title>

<script src="scripts/newQuery.js"></script>

</head>

<body>

<input type="button" value="Add Query" onclick="openPage()" />

&nbsp; &nbsp;

<input type="button" value="Create Metafile" />

</body>

</html> 
```

后来，我使用元素将两个页面添加到`"index.html"`文件中`"frameset"`，如下所示：

**索引.html**

```
<html>

<head>
<title>Main Application case Study</title>
</head>

<frameset rows="75%, *">
   <frame src="Form.html" />
   <frame src="Form2.html" />
</frameset>

</html> 
```

现在，如果我打开`"index.html"`页面并单击`"Add Query"`按钮，我会收到一条`"prompt"`消息，要求我添加我的查询并将其添加到`"Form1.html"`页面。

我在这里面临的问题是，当我提交要添加到表中的查询时，查询实际上是提交到`"Form2.html"`页面，因为在`"prompt"`该页面上编码。但我需要在`"Form1.html"`.

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:38:07.610

你让你的生活变得比必要的困难得多。

您想打开一个页面，该页面打开一个执行类似操作的页面

[http://www.dzone.com/snippets/add-rows-html-table](http://www.dzone.com/snippets/add-rows-html-table)

```
function addRow(table,content,morecontent,evenmorecontent) {
     var tabBody=table.getElementsByTagName("TBODY")[0];
     var row=document.createElement("TR");
     var cell1 = document.createElement("TD");
     var cell2 = document.createElement("TD");
     var cell3 = document.createElement("TD");
     var textnode1=document.createTextNode(content);
     var textnode2=document.createTextNode(morecontent);
     var textnode3=document.createTextNode(evenmorecontent);
     cell1.appendChild(textnode1);
     cell2.appendChild(textnode2);
     cell3.appendChild(textnode3);
     row.appendChild(cell1);
     row.appendChild(cell2);
     row.appendChild(cell3);
     tabBody.appendChild(row);
}
var table = opener.opener.document.getElementById("tblQuery");
addRow(table,"cell1 content","cell2 content","cell3 content"); 
```

# c++ - C++ 位或运算符

> ID：14313832
> 
> 赞同：1
> 
> 时间：2013-01-14T05:50:39.790
> 
> 标签：c++, bit-manipulation

```
bool OrderUtils::shouldCptyAutoexecute(int Id)
{

bool res = 
    dummyCache::instance().getVal(Id).getWhitelabelType() == "ABCD";
if (!res)
    res |= dummyCache::instance().getVal(Id).getIsPlc() == 1;

return res;
} 
```

上面的代码检查 2 个 Id，如果数据库中存在任何 id，则返回 true 给 res。

您能否建议一种方法，使我可以比较数据库表中的另一个值并将 true 值返回到 res ..您还可以解释第二个 if 语句和按位 OR 运算符的作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T05:53:17.637

先生，让短路评估为您执行此操作：

```
return dummyCache::instance().getVal(Id).getWhitelabelType() == "ABCD" ||
       dummyCache::instance().getVal(Id).getIsPlc() == 1; 
```

如果第一个为真，则第二个不会触发。此外，我向您保证，如果返回的对象在and调用`instance().getVal(id)`之间没有改变，那么远程合理的优化编译器将不会重新触发。事实上，如果是的话，我几乎可以保证。（当然看起来应该是这样）。`getWhitelabelType()``getisPlc()``getWhiteLabelType()``const`

关于钻头工作。表情几乎是一团糟。虽然它会工作。除非我读错了（相信我，会告诉我我的人的名单会很快让我知道）它正在执行布尔评估，将结果 true/false`bool`提升为 an ，将from`int`的当前值提升为(这是零，所以没什么特别的），用表达式按位或运算，然后将最终的 int 降级为 bool 以存储在. 我很惊讶这至少没有在编译器上发出警告。`res``bool``int``int``res`

它可能应该是`if (!res) res ||= expr`，即使那样，它也是没有意义的，因为你可以在这个答案的顶部使用短路评估来`res`完全切断本地。考虑如果`res`是`false`。那么等价的表达式就是`res = false || expr`。但这只是`res = expr`。在`!res`它执行的状态下，你也可以只使用一个赋值。

最后，关于将第三个字段添加到您的评估中，这完全取决于您希望如何添加它。对于额外的逻辑 OR，它非常简单。

对于像 (A || B || C) 这样的表达式，您可以

```
return dummyCache::instance().getVal(Id).AField() == ATestValue ||
       dummyCache::instance().getVal(Id).BField() == BTestValue ||
       dummyCache::instance().getVal(Id).CField() == CTestValue; 
```

对于更复杂的操作，一些明智的使用括号将大有帮助。例如，要返回`(A || B) && C`：

```
return (dummyCache::instance().getVal(Id).AField() == ATestValue ||
        dummyCache::instance().getVal(Id).BField() == BTestValue) &&
       dummyCache::instance().getVal(Id).CField() == CTestValue; 
```

或者也许`(A && C) || (B && !C)`（好吧，这有点过火了......）

```
return (dummyCache::instance().getVal(Id).CField() == CTestValue) 
       ? (dummyCache::instance().getVal(Id).AField() == ATestValue)
       : (dummyCache::instance().getVal(Id).BField() == BTestValue); 
```

# matlab - 访问存储为 container.Map 对象值的数组元素的内容

> ID：14313833
> 
> 赞同：1
> 
> 时间：2013-01-14T05:50:40.423
> 
> 标签：matlab

> **可能重复：**
> [如何在不首先将函数返回的 MATLAB 数组分配给局部变量的情况下对其进行索引？](https://stackoverflow.com/questions/3627107/how-can-i-index-a-matlab-array-returned-by-a-function-without-first-assigning-it)

我有一个关于访问存储为 containers.Map 对象值的数组元素的问题。我已经成功创建了我的 containers.Map 对象，其中键是字符串，值是 zeros(1,3) 数组。

```
myHashTable = containers.Map(keys,values);
myHashTable(keyString) 
```

会给我：

> 答案=
> 
> > > 0 0 0

我遇到的问题是访问存储在这些数组中特定索引处的值。例如尝试这样做：

```
myHashTable(keyString)(1) 
```

会给我错误：

> ()-索引必须出现在索引表达式的最后。

在不使用另一个变量的情况下，我将如何访问存储为容器中的值的数组元素，例如：

```
tempArray = myHashTable(keyString);
tempArray(1) 
```

编辑：找到问题的答案。之前有人问过，但我在初步搜索中没有找到它。无法结束我的问题，因为我没有立即这样做所需的声誉点。对于那些感兴趣的检查：

[如何在不首先将其分配给局部变量的情况下索引函数返回的 MATLAB 数组？](https://stackoverflow.com/questions/3627107/how-can-i-index-a-matlab-array-returned-by-a-function-without-first-assigning-it)

# sql - 将相同的聚合应用于表中的每一列

> ID：14313834
> 
> 赞同：2
> 
> 时间：2013-01-14T05:50:47.727
> 
> 标签：sql, postgresql, postgresql-8.3

我正在使用已分叉的专有 mpp 数据库`psql 8.3`。我正在尝试对一个宽表（大约 450 列）应用一个简单的计数，所以我想知道是否是用简单的 sql 函数来执行此操作的最佳方法。我只是在计算给定列中不同值的数量以及该列中空值的数量。例如，我想为每一列概括的查询是

如果我想对我写的列名运行查询

```
select
count(distinct names) d_names,
sum(case when names is not null then 1 else 0 end) n_s_ip
from table; 
```

> 如果列数是 450，我如何概括上面的查询以遍历表中的每一列而不手动写出每个列名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T06:14:40.567

首先，由于`COUNT()`只计算非空值，您的*查询*可以简化：

```
SELECT count(DISTINCT names) AS unique_names
      ,count(names) AS names_not_null
FROM   table; 
```

但这**是非空**值的数量，与您的描述相矛盾：

> 列中空值数量的计数

为此*，*您将使用：

```
count(*) - count(names) AS names_null 
```

由于`count(*)`计算*所有*行，并且`count(names)`仅计算具有非 null 的行`names`。
[在@Andriy 提示后删除了劣质替代品。]

要为*所有列***自动执行**此操作，请从目录表中动态构建 SQL 语句。您可以在 PL/pgSQL 函数中使用以立即执行它。在这些密切相关的问题下查找带有手册链接和解释的完整代码示例：*`pg_attribute``EXECUTE`*

 **   [如何在不列出列的情况下对每一列执行相同的聚合？](https://stackoverflow.com/questions/13760230/how-to-perform-the-same-aggregation-on-every-column-without-listing-the-columns)
*   [postgresql - 表中每列的计数（无空值）](https://stackoverflow.com/questions/9841568/postgresql-count-no-null-values-of-each-column-in-a-table)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T06:18:21.937

您可以使用 生成查询的重复部分`information_scheam.columns`。

```
select 'count(distinct '||column_name||') d_names, sum(case when '||column_name||' is not null then 1 else 0 end) n_s_ip,' 
from information_schema.columns where table_name='table'
order by ordinal_position; 
```

上述`count(...)`查询将为`sum(...)`. `table`此结果可用作查询的选择列表。您可以将结果剪切并粘贴到以下查询：

```
select 
-- paste here
from table; 
```

粘贴后，您必须删除最后一个逗号。

这样，您可以避免写入`select-list`450 列。*

# php - 使用 PDO 获取最后插入的行 ID（不合适的结果）

> ID：14313837
> 
> 赞同：2
> 
> 时间：2013-01-14T05:51:08.923
> 
> 标签：php, mysql, pdo, last-insert-id

我的`PDO::lastInsertId()`方法不返回最后插入行的 id（主键），而是返回另一个作为外键字段的字段。

***PHP代码：***

```
$pdo = new PDO(...);
$stmt = $pdo->prepare($sql);
$stmt->bindParam(...);
$stmt->bindParam(...);
$stmt->execute();
$id = $pdo->lastInsertId();
// or
$id = $pdo->lastInsertId('services_id_seq'); // I think 'services_id_seq' is not necessary in MySQL
// both of them don't return the primary key of last inserted row

echo 'last inserted id: ' . $id; 
```

***MySQL表结构：***

```
...
id          int unsigned not null primary key auto_increment
customer_id int unsigned not null
user_id     int unsigned not null
.... 
```

***在 MySQL 中插入行：***

```
id    customer_id    user_id    ...
1     19             31         ... 
```

***PHP 输出：***

```
last inserted id: 19 
```

`1`它不应该返回`19`。我不知道我的代码有什么问题……或者这可能是正常行为：？

**返回值（PHP 文档）：**

*   如果没有为 name 参数指定序列名称，则 `PDO::lastInsertId()`返回一个字符串，该字符串表示`ID`插入数据库的最后一行的行。

*   如果为 name 参数指定了序列名称，则`PDO::lastInsertId()`返回一个字符串，该字符串表示从指定序列对象中检索到的最后一个值。

*   如果`PDO`驱动程序不支持此功能，则`PDO::lastInsertId()`触发`IM001 SQLSTATE`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:57:51.180

运行`"SELECT LAST_INSERT_ID()"`查询。
如果返回的 ID 仍然是 19，而不是 2（或者在所有尝试之后应该是任何主键），则 MySQL 存在问题，与 PDO 无关。您必须将其作为一个单独的案例（并且可能是单独的问题）进行调查，提供完整的 SQL 证明代码，能够在控制台中运行，包括创建表、运行插入和选择 LAST_INSERT_ID()

如果此函数返回正确的值但 PDO 仍然是错误的值 - 您可能必须在 bugs.php.net 上报告它，再次提供完整的可复制代码和所有软件名称以及提供的确切版本号。

只有一件事要说清楚：您确定`$sql`问题中的变量包含正确的 INSERT 语句，而不是 INSERT ON DUPLICATE 之类的吗？还是在此 INSERT 上设置了任何触发器？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-14T06:11:45.440

I looked at PDO::lastInsertId() recently but found the description in the manual insufficiently convincing (or indeed comprehensible) and so opted for using something like this instead:

```
...
$stmt->execute();
$row = $stmt->fetch();
... 
```

which seems to work for me.

I'm no PDO or MySQL expert, so this may not be quite right, but I also thought that the above approach would circumvent the possible problem of another row being inserted in the database (by a different user/thread) in between this thread's execute() and lastInsertID() calls.

If you're keen to keep lastInsertID() have you investigated whether, in your setup, the ID returned has to be an auto-increment field? The manual sort of hints that this should be so but is hopeless vague (IMHO).

Hope that's of some help.

Cheers, Ian.

# java - 如何使用父对象引用调用子类的非覆盖方法

> ID：14313844
> 
> 赞同：0
> 
> 时间：2013-01-14T05:51:44.747
> 
> 标签：java

这是我的代码想要使用 AdapterVersion 的对象引用（父类）访问 AdapterVer1 getAdaptObj1() 的子类方法（没有类型转换）

```
abstract class AdapterVersion {

public abstract void getMObject();
public abstract void getCObject();

}

public class AdapterVer1 extends AdapterVersion {

@Override
public void getMObject() {
    System.out.println("AdapterVer1 Mont");

}

@Override
public void getCObject() {
    System.out.println("AdapterVer1 Conf");

}

public void getAdaptObj1() {

}

}

public class AdapterFactory {

public static void main(String []a){
    AdapterFactory adapterFactory= new AdapterFactory();
    AdapterVersion adpater = adapterFactory.getMyObject("ver1");
    adpater.getAdaptObj1();  // Unable to do that
            ((AdapterVer1)adpater).getAdaptObj1(); // Working but DONT WANT THIS

}

public AdapterVersion getMyObject(String version){
    if(version.equals("ver1")){
        return new AdapterVer1();
    }else{
        return new AdapterVer2(); // another declared class
    }
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T05:56:48.680

你不能那样做。因为在编译时，编译器会检查您调用的方法在您正在使用的引用的类中是否可访问或可见。

因此，在这种情况下，由于引用是`Parent`类的，因此编译器会首先在 Parent 类中查找方法声明，以便成功编译代码。

**记住： -**

编译器担心*Reference*类型，在运行时会考虑实际的对象类型，以决定实际调用哪个方法。

您唯一的选择是进行类型转换，在这种情况下，编译器现在会查看您对引用进行类型转换的类。另一种选择是，您可以在 Parent 类中声明一个具有该名称的抽象方法，但是从您的问题来看，您似乎没有明确地这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T05:59:18.470

您需要将方法声明移至抽象类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T06:09:49.490

Rohit 已经很好地解释了它。只需添加我的 2 美分，您应该首先检查子类类型，然后进行类型转换，例如：

```
if(adapter instanceof Adapterver1) {
    ((AdapterVer1)adpater).getAdaptObj1();
} 
```

这样，如果您的代码尝试处理未声明此类方法的新子类，您的代码将更加安全。

但是您必须要问的问题是，如果您已经知道要调用哪个子类方法，为什么要从超类引用中访问它？

# c# - 在不使用任何 for 循环的情况下写入前 10 个数字的逻辑

> ID：14313845
> 
> 赞同：-2
> 
> 时间：2013-01-14T05:51:54.830
> 
> 标签：c#, loops

我比较新鲜，周五刚接受了我的第一次面试。

在机器测试中，他们要求我编写一个程序来添加前十个数字，即 1-10，而不使用任何 for 循环。我尝试了很多，但找不到解决方案。我们如何编写程序逻辑来获得前 10 个自然数的总和而不使用 for 循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T05:53:24.750

如果他们要求您不要使用 for 循环，那么您可以使用 while 或 do while。如果您不想使用任何 knd 循环，还有另一种方法。您可以使用公式 **1+2+3+.........+(n-1)+n=(n* (n+1))/2**。

你必须添加前 10 个数字，这样你就可以像这样使用它

**(10*(10+1))/2。**

```
Console.WriteLine("{0}",(10*(10+1))/2); 
```

您可以通过询问用户 n 等的值来使其更通用。我希望这会对您有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T05:54:21.720

[自然数是算术级数](http://en.wikipedia.org/wiki/Arithmetic_series)的特例。*任何*算术级数的总和都可以用一个简单的公式计算出来，而不需要循环。

S = (n / 2) * (a [1] + a [n] )

就个人而言，我认为面试官期望你只记住这个公式是不公平的。但是，您可能会通过阅读该系列并自己弄清楚公式给面试官留下深刻印象！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T05:55:54.360

如果我理解你所说的正确，你可以使用简单的数学。

```
x = firstnaturalnumber; 
```

你想拥有：

```
(x + 0) + (x + 1) + (x + 2) ... (x + 9) 
```

自然数是整数，这在数学上是合理的。最后的等式是：

```
sum = 10x + 45 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T05:58:36.427

如果他们指定不使用“for”循环，那么还有其他可用的循环，例如 do-while 或 while。递归函数也是一个不错的选择。

实际上，他们已经指定了要添加的数字。所以，不要成为一个聪明的笨蛋，而是使用“+”直接添加它们。是的，我是一个愚蠢的答案，但这是一个答案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T06:00:06.050

```
static void Main(string[] args) {
    Console.WriteLine("{0}", SumRecursive(1,10));
}

static int SumRecursive(int min, int max) {
    return _SumRecursive(min, max);
}

static int _SumRecursive(int min, int val) {
    if (val == min)
        return val;
    return val + _SumRecursive(min, val - 1);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-14T06:04:21.457

可以用递归方法实现，也没有for循环

```
public int AddDown(int i)
{
    return i += (i >= 1 ? AddDown(--i) : 0);
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-14T06:19:23.477

x= 1 + 2 + 3+.....+n-2 +n-1+n

x =n +n-1+ n-2+ ....3+2 +1 只是倒车

总结双方

2x= (n+1) +(n+1) +(n+1)+ .....+(n+1) ///n 次

2x= n(n+1)

x= n(n+1)/2

所以在你的情况下 x= 10(10+1)/2 = 55

# php - 如何验证国际化域名

> ID：14313849
> 
> 赞同：8
> 
> 时间：2013-01-14T05:52:02.287
> 
> 标签：php, regex, dns

我想验证 php 中的域 url，它可能是国际化域名格式，如希腊域名 = http://παράδειγμα.δοκιμή 他们有什么方法可以使用正则表达式验证它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-24T08:32:52.490

If you want to create your own library, you need to use the table of permitted codepoints ([IANA — Repository of IDN Practices](https://www.iana.org/domains/idn-tables), [IDN Character Validation Guidance](https://www.icann.org/resources/pages/idna-protocol-2012-02-25-en), [IDNA Parameters](http://www.iana.org/assignments/idna-tables-7.0.0/idna-tables-7.0.0.xhtml)) and the table of Unicode Script properties ([UNIDATA/Scripts.txt](http://www.unicode.org/Public/UNIDATA/Scripts.txt)).

Gmail adopts the Unicode Consortium’s “<a href="http://www.unicode.org/reports/tr39/#Restriction_Level_Detection" rel="nofollow noreferrer">Highly Restricted” specification ([Protecting Gmail in a global world](http://googleonlinesecurity.blogspot.jp/2014/08/protecting-gmail-in-global-world.html)). The following combinations of Unicode Scripts are permitted.

*   Single script
*   Latin + Han + Hiragana + Katakana
*   Latin + Han + Bopomofo
*   Latin + Han + Hangul

You may need to pay attention to special script property values (Common, Inherited, Unknown) since some of characters has multiple properties or wrong properties.

For example, U+3099 (COMBINING KATAKANA-HIRAGANA VOICED SOUND MARK) has two properties ("Katakana" and "Hiragana") and PCRE function classify it as "Inherited". Another example is U+x2A708\. Although the right script property of U+2A708(combination of U+30C8 KATAKANA LETTER TO and U+30E2 KATAKANA LETTER MO) is "Katakana", The Unicode Specification misclassify it as "Han".

You may need to consider [IDN homograph attack](http://en.wikipedia.org/wiki/IDN_homograph_attack). Google Chrome's [IDN policy](http://www.chromium.org/developers/design-documents/idn-in-google-chrome) adopts [the blacklist chars](http://kb.mozillazine.org/Network.IDN.blacklist_chars).

My recommendation is to use Zend\Validator\Hostname. This library uses [the table of permitted code points](https://github.com/zendframework/zf2/tree/master/library/Zend/Validator/Hostname) for Japanese and Chinese.

If you use Symfony, consider upgrade the app of version to 2.5 which adopts egulias/email-validatornd ([Manual](http://symfony.com/doc/current/reference/constraints/Email.html)). You need extra validation whether the string is well-formed byte sequence. See my [report](https://github.com/egulias/EmailValidator/issues/30)a> for the detail.

Don't forget XSS and SQL injection. The following address is valid email address based RFC5322.

```
// From Japanese tutorial
// http://blog.tokumaru.org/2013/11/xsssqlrfc5322.html
"><script>alert('or/**/1=1#')</script>"@example.jp 
```

I think it's doubtful for using idn_to_ascii for validation since idn_to_ascii passes almost all characters.

```
for ($i = 0; $i < 0x110000; ++$i) {
    $c = utf8_chr($i);

    if ($c !== '' && false !== idn_to_ascii($c)) {
        $number = strtoupper(dechex($i));
        $length = strlen($number);

        if ($i < 0x10000) {
            $number = str_repeat('0', 4 - $length).$number;
        }

        $idn = $c.'example.com';

        echo 'U+'.$number.' ';
        echo ' '.$idn.' '. idn_to_ascii($idn);
        echo PHP_EOL;
    }
}

function utf8_chr($code_point) {

    if ($code_point < 0 || 0x10FFFF < $code_point || (0xD800 <= $code_point && $code_point <= 0xDFFF)) {
        return '';
    }

    if ($code_point < 0x80) {
        $hex[0] = $code_point;
        $ret = chr($hex[0]);
    } else if ($code_point < 0x800) {
        $hex[0] = 0x1C0 | $code_point >> 6;
        $hex[1] = 0x80  | $code_point & 0x3F;
        $ret = chr($hex[0]).chr($hex[1]);
    } else if ($code_point < 0x10000) {
        $hex[0] = 0xE0 | $code_point >> 12;
        $hex[1] = 0x80 | $code_point >> 6 & 0x3F;
        $hex[2] = 0x80 | $code_point & 0x3F;
        $ret = chr($hex[0]).chr($hex[1]).chr($hex[2]);
    } else  {
        $hex[0] = 0xF0 | $code_point >> 18;
        $hex[1] = 0x80 | $code_point >> 12 & 0x3F;
        $hex[2] = 0x80 | $code_point >> 6 & 0x3F;
        $hex[3] = 0x80 | $code_point  & 0x3F;
        $ret = chr($hex[0]).chr($hex[1]).chr($hex[2]).chr($hex[3]);
    }

    return $ret;
} 
```

If you want to validate domain by Unicode Script properties, use PCRE functions.

The following code show how to get the name of Unicode script property. If you want to the the Unicode Script properties in JavaScript, use [mathiasbynens/unicode-data](https://github.com/mathiasbynens/unicode-data).

```
function get_unicode_script_name($c) {

  // http://php.net/manual/regexp.reference.unicode.php
  $names = [
    'Arabic', 'Armenian', 'Avestan', 'Balinese', 'Bamum', 'Batak', 'Bengali', 
    'Bopomofo', 'Brahmi', 'Braille', 'Buginese', 'Buhid', 'Canadian_Aboriginal',
    'Carian', 'Chakma', 'Cham', 'Cherokee', 'Common', 'Coptic', 'Cuneiform',
    'Cypriot', 'Cyrillic', 'Deseret', 'Devanagari', 'Egyptian_Hieroglyphs',
    'Ethiopic', 'Georgian', 'Glagolitic', 'Gothic', 'Greek', 'Gujarati', 
    'Gurmukhi', 'Han', 'Hangul', 'Hanunoo', 'Hebrew', 'Hiragana', 'Imperial_Aramaic',
    'Inherited', 'Inscriptional_Pahlavi', 'Inscriptional_Parthian', 'Javanese',
    'Kaithi', 'Kannada', 'Katakana', 'Kayah_Li', 'Kharoshthi', 'Khmer', 'Lao', 'Latin',
    'Lepcha', 'Limbu', 'Linear_B', 'Lisu', 'Lycian', 'Lydian', 'Malayalam', 'Mandaic',
    'Meetei_Mayek', 'Meroitic_Cursive', 'Meroitic_Hieroglyphs', 'Miao', 'Mongolian',
    'Myanmar', 'New_Tai_Lue', 'Nko', 'Ogham', 'Old_Italic', 'Old_Persian',
    'Old_South_Arabian', 'Old_Turkic', 'Ol_Chiki', 'Oriya', 'Osmanya', 'Phags_Pa',
    'Phoenician', 'Rejang', 'Runic', 'Samaritan', 'Saurashtra', 'Sharada', 'Shavian',
    'Sinhala', 'Sora_Sompeng', 'Sundanese', 'Syloti_Nagri', 'Syriac', 'Tagalog',
    'Tagbanwa', 'Tai_Le', 'Tai_Tham', 'Tai_Viet', 'Takri', 'Tamil', 'Telugu', 'Thaana',
    'Thai', 'Tibetan', 'Tifinagh', 'Ugaritic', 'Vai', 'Yi'
  ];

  $ret = [];

  foreach ($names as $name) {

    $pattern = '/\p{'.$name.'}/u';

    if (preg_match($pattern, $c)) {
        return $name;
    }
  }

  return '';
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T08:30:48.417

这是一个所谓的[IDN 域](http://en.wikipedia.org/wiki/Internationalized_domain_name)。[支持 IDN 域的客户端使用RFC 5890](https://www.rfc-editor.org/rfc/rfc5890)中指定的 IDNA2008 标准对其进行规范化，然后在提交 DNS 解析之前使用[RFC 3492](https://www.rfc-editor.org/rfc/rfc3492)中定义的[Punycode](http://en.wikipedia.org/wiki/Punycode)编码替换剩余的 unicode 字符。

根据规范，从字面上看，UTF-8 字符集中的每个字符都可以在 IDN 域中使用，但每个顶级域权限都可以在 Unicode 字符集中定义有效字符，因此很难[创建和维护真正的正则表达式](https://stackoverflow.com/questions/161738/what-is-the-best-regular-expression-to-check-if-a-string-is-a-valid-url)。

如果您想在您的应用程序中接受 IDN 域，您应该在内部使用编码版本。[PHP 扩展 intl](http://php.net/manual/en/book.intl.php)带来两个函数来编码和解码 IDN 域名

```
echo idn_to_ascii('täst.de'); 
```

> xn--tst-qla.de

编码后，域将通过任何[传统的正则表达式检查](http://www.apps.ietf.org/rfc/rfc3986.html#sec-B)

简单验证：

```
$url = "http://example.com/";
if (preg_match('/^(http|https|ftp):\/\/([A-Z0-9][A-Z0-9_-]*(?:\.[A-Z0-9][A-Z0-9_-]*)+):?(\d+)?\/?/i', $url)) {
    echo 'OK';
} else {
    echo 'Invalid URL.';
} 
```

**编辑：**

如果您想要真正的 DNS 验证，您可以使用[dns_get_record](http://php.net/manual/en/function.dns-get-record.php) (PHP 5) 或[gethostbyaddr](http://php.net/manual/de/function.gethostbyaddr.php)

例如

```
$domain = 'ελληνικά.idn.icann.org';
$idnDomain = idn_to_ascii( $domain );

if ( $dnsResult = dns_get_record( $idnDomain, DNS_ANY ) )
{
    echo $idnDomain , "\n";
    print_r( $dnsResult );
}
else
{
    echo "failed to lookup domain\n";
} 
```

结果：

```
xn--hxargifdar.idn.icann.org
Array 
(
    [0] => Array
    (
        [host] => xn--hxargifdar.idn.icann.org
        [class] => IN
        [ttl] => 21456
        [type] => A
        [ip] => 199.7.85.10
    )
    [1] => Array
    (
        [host] => xn--hxargifdar.idn.icann.org
        [class] => IN
        [ttl] => 21600
        [type] => AAAA
        [ipv6] => 2620::2830:230:0:0:0:10
    )
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T06:04:13.940

这是[idn](http://en.wikipedia.org/wiki/Internationalized_domain_name)域，我会先将其转换为[微不足道的代码](http://php.net/manual/en/function.idn-to-ascii.php)版本，然后[验证](http://splunk-base.splunk.com/answers/9736/revisiting-regex-to-extract-domain-name-from-an-fqdn)域。

但是，如果您真的想通过正则表达式验证

```
<?php

$domain = 'παράδειγμα.gr';
$regex = '#^([\w-]+://?|www[\.])?([^\-\s\,\;\:\+\/\\\?\^\`\=\&\%\"\'\*\#\<\>]*)\.[a-z]{2,7}$#';
if (preg_match($regex, $domain)) {
    echo "VALID";
} 
```

但这会让你在误报中运行，因为验证一个 IDN 域真的很复杂，我试图验证其中没有无效字符，但列表不完整。

更好地将bevore转换为punny代码

```
$regex = '#^([\w-]+://?|www[\.])?[a-z0-9]+[a-z0-9\-\.]*[a-z0-9]+\.[a-z]{2,7}$#';
if (preg_match($regex, idn_to_ascii($domain))) {
    echo "VALID";
} 
```

如果您还想测试是否可以解析域，请尝试：

```
$regex = '#^([\w-]+://?|www[\.])?[a-z0-9]+[a-z0-9\-\.]*[a-z0-9]+\.[a-z]{2,7}$#';
$punny_domain = idn_to_ascii($domain);
if (preg_match($regex, $punny_domain)) {
    if (gethostbyname($punny_domain) != $punny_domain) {
        echo "VALID";
    }
} 
```

# emacs - Emacs：在大型 repo 中打开任何文件

> ID：14313851
> 
> 赞同：13
> 
> 时间：2013-01-14T05:52:17.233
> 
> 标签：emacs

## 我需要的

一种快速/高效的方式来打开大型 ( `git`) 存储库（约 9.8k 文件）下的任何文件。

## 语境

我尝试了各种解决方案，例如[`Textmate.el`](http://www.emacswiki.org/TextMate)和[`find-file-in-repository`](http://marmalade-repo.org/packages/find-file-in-repository). 我通过以前的 SO 问题（例如[this](https://stackoverflow.com/q/8552659/117750)和[this](https://stackoverflow.com/q/7970537/117750) ）以及[LocateFilesAnywhere EmacsWiki](http://www.emacswiki.org/emacs/LocateFilesAnywhere)找到了这些解决方案。

虽然这两种解决方案都适用于中小型存储库，但在这种情况下它们实际上是不可用的。当我开始输入文件名时，会延迟几秒钟才能看到任何结果。并且更改搜索的任何部分也非常滞后。

我认为主要问题是在输入任何字符时，`emacs`/会`find-file-in-repository`启动一个 shell 命令 ( `git ls-files...`)。我真的只需要在我停止打字时这样做。

## 问题

*   这个用例有更好的库吗？
*   如果没有，我在输入时如何在命令中引入延迟？即，当我在时`find-file-in-repository`，我希望仅在我停止输入时才调用 find-command（假设间隔为 300 毫秒）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-16T06:34:50.377

## 概括

在收到三个答案后，我尝试了它们（也回答了我自己的问题，因为上述解决方案都不适合我）。我终于安顿下来了`helm-ls-git`。以下是我个人观点的比较：

### [弹丸](https://github.com/bbatsov/projectile)

*   花了大约 30 分钟来索引回购。由于 projectile 不知道`.gitignore`，实际文件数更像是 52k。
*   可以定制，但可以使用的东西（即理解 git）更可取
*   可能需要不时[使缓存重新索引无效。](https://github.com/bbatsov/projectile#basic-setup)这将是昂贵且频繁的，因为每天都会将新文件添加到存储库中。

### [掌舵-cmd-t](https://github.com/lewang/helm-cmd-t)

*   从描述和来源看起来不错。
*   很难安装，因为它没有在 melpa/marmalade 等中发布。我打开了[这个问题的更多细节。](https://github.com/lewang/helm-cmd-t/issues/2)

### GNU 全球

*   没有尝试，因为它可能有与 Projectile 相同的问题（git 不知道，需要它自己的“索引”，可能需要不时维护）

[然而event-jr](https://stackoverflow.com/users/903943/event-jr)的[答案](https://stackoverflow.com/a/14314435/117750)开辟了更多选择：我`helm`直到现在才知道。查看[melpa](http://melpa.milkbox.net/)的 helm 相关插件，我发现以下内容：

### [`helm-git`](https://github.com/maio/helm-git)

*   这看起来很有希望
*   `package.el`由于它在 melpa 中，因此易于安装
*   我也使用和喜欢`magit`- 所以这看起来很合适。
*   但是，它一直因`magit-git-dir: symbol is void`某种错误而失败。没有深入研究，但看起来需要更新。打开了[一个问题](https://github.com/maio/helm-git/issues/5)

### [`helm-ls-git`](https://github.com/emacs-helm/helm-ls-git/blob/master/helm-ls-git.el)

*   正如自述文件所说，这是独立于 magit 的。
*   到目前为止一直工作得很好。易于安装（melpa）并且速度很快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T06:48:42.190

我为此使用 GNU global。我的项目中有大约 20K 文件。您可以运行 `M-x gtags-find-file` 并键入前几个字符。TAB 将完成并显示所有匹配项。您可以键入作为文件名一部分的任何字符，然后按 Enter。将显示包含这些字符的所有文件。

我试图为此使用弹丸。但是对于“项目索引”来说太慢了。即使在 1.5 小时后它也没有完成索引，我必须杀死它！不确定这里有什么问题。GNU global 速度更快，并在 15 分钟内完成整个标签的创建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T07:03:58.833

我`helm-cmd-t`愉快地使用。它将文件列表缓存在内存中。缓存控件足够灵活，可以满足我的需要。

我刚刚在这里回答了您关于新回购地址的问题：

[https://stackoverflow.com/a/8025310/903943](https://stackoverflow.com/a/8025310/903943)

这是 [https://github.com/lewang/helm-cmd-t](https://github.com/lewang/helm-cmd-t)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T07:25:53.280

您可以查看[Projectile](https://github.com/bbatsov/projectile)。它基本上是为了提供类似于 的东西而创建的`C-p`，但也有很多额外的项目级功能。在如此大的项目上，第一次项目索引会相当慢，但之后 Projectile 将缓存项目文件（在内存和硬盘上），随后的 projectile 调用应该几乎是瞬时的。

Projectile 还有一个 Helm 插件，可以使用 Helm 显示项目文件和缓冲区。

# css - Twitter bootstrap 流体布局设计问题

> ID：14313852
> 
> 赞同：0
> 
> 时间：2013-01-14T05:52:18.473
> 
> 标签：css, twitter-bootstrap

我正在使用 twitter bootstrap 设计一个流畅的布局，但不幸的是，我的处理方式存在一些错误。

请告知我在哪里做错了。我创建了一个导航栏 div，其中包含 navbar-inner 并且在其中我有容器。一个容器内一排。

在一行中，我有 3 个元素，项目名称、导航栏和登录部分。

在缩小页面时，项目名称保持在正确的位置，导航栏被隐藏以仅在单击时显示，并且第三个登录部分错位。我不明白为什么它会被定位。

我已经在 ---> [http://jsfiddle.net/GgzgB/2/](http://jsfiddle.net/GgzgB/2/)上上传了代码， 但是由于缺少图像，所以没有显示背景。PS：这是我的第一次 css 尝试

```
<body>
<div class="navbar navbar-fixed-top">
    <div id='cssmenu' class="navbar-inner">
    <!--<div class="navbar-custom">-->
        <div class="container">
        <div class="row">
                <div class="span2">
                    <!--<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>-->
                    <a class="brand" href="#">Project name</a>
                </div><!--end of first col -span2-->
                <div class="span7">
                    <div class="nav-collapse collapse">
                        <ul class="nav">
                            <li class='active '><a href='#'><span>Home</span></a></li>
                            <li><a href='#'><span>Products</span></a></li>
                            <li><a href='#'><span>Company</span></a></li>
                            <li><a href='#'><span>Contact</span></a></li>
                        </ul>
                    </div><!--end of nav-collapse collapse-->
                </div><!--end of second col - span5-->
                <div class="span3">
                    <div class="login">
                        <form class="form-signin">
                            <div class="row">
                                <div class="span1"> 
                                    <div class="row">    
                                        <input type="text" class="input-header-small pull-left" placeholder="Username">
                                    </div>
                                    <div class="row">
                                        <input type="password" class="input-header-small pull-left" placeholder="Password">
                                    </div>
                                </div>
                                <div class="span1">
                                    <div class="row">
                                        <button type="submit" class="btn btn-success btn-medium pull-right">Sign in</button></div>
                                    </div>
                                </div><!--end of inner 1st row-->
                            </form>
                        </div><!--end of login-->
                    </div><!-- end of span3--> 
                </div><!-- end of row -->
            </div><!-- end of container -->
        </div><!-- end of inner -->
    </div><!-- end of navbar navbar-fixed-top -->
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:52:29.133

通常使用 CSS 少即是多，所以我认为您可以通过删除导航栏中的所有行/跨度定义来稍微简化您的代码，它们并不是真正必要的。接下来，[Bootstrap 文档](http://twitter.github.com/bootstrap/components.html#navbar)非常好，因此总是值得仔细阅读它们，看看是否已经在其中定义了您想要的内容。

来自文档：“对齐导航链接、搜索表单或文本，使用 .pull-left 或 .pull-right 实用程序类。这两个类都将在指定方向添加 CSS 浮动。” 此外，我们可以使用“navbar-form”类来布局登录表单，而不是网格类。所以让我们把代码删减一点，然后你也许可以更接近你所追求的。

```
<body>
    <div class="navbar navbar-fixed-top">
        <div id='cssmenu' class="navbar-inner">
            <div class="container">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
                <a class="brand" href="#">Project name</a>
                <div class="nav-collapse collapse">
                    <ul class="nav">
                        <li class='active '><a href='#'><span>Home</span></a></li>
                        <li><a href='#'><span>Products</span></a></li>
                        <li><a href='#'><span>Company</span></a></li>
                        <li><a href='#'><span>Contact</span></a></li>
                    </ul>
                </div><!--end of nav-collapse collapse-->
                <div class="login pull-right">
                    <form class="form-signin navbar-form">
                        <input type="text" class="input-header-small pull-left" placeholder="Username">
                        <input type="password" class="input-header-small pull-left" placeholder="Password">
                        <button type="submit" class="btn btn-success btn-medium pull-right">Sign in</button></div>
                    </form>
                </div><!--end of login-->
            </div><!-- end of container -->
        </div><!-- end of inner -->
    </div><!-- end of navbar navbar-fixed-top -->
</body> 
```

这可能不是您的最终解决方案，但我认为这将是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T06:10:02.723

First off, if you are trying to create a fluid layout, you'd use row-fluid as opposed to just row.

Additionally, you're putting the login form in the same row as the project-name and navbar.

I'm not going to perfect this for you, but this gets you much closer by using row-fluid, and creating a new row after the navigation:

```
<body>
    <div class="navbar navbar-fixed-top">
        <div id='cssmenu' class="navbar-inner">
            <div class="container">

                <div class="row-fluid">

                    <div class="span2">
                        <a class="brand" href="#">Project name</a>
                    </div>

                    <div class="span7">
                        <div class="nav-collapse collapse">
                            <ul class="nav">
                                <li class='active '><a href='#'><span>Home</span></a></li>
                                <li><a href='#'><span>Products</span></a></li>
                                <li><a href='#'><span>Company</span></a></li>
                                <li><a href='#'><span>Contact</span></a></li>
                            </ul>
                        </div><!--end of nav-collapse collapse-->
                    </div><!--end of second col - span5-->

                </div>

                <div class="row-fluid">
                    <div class="span12">
                        <div class="login">
                            <form class="form-signin">
                                <div class="row-fluid">
                                    <div class="span12"> 
                                        <div class="row-fluid">    
                                            <input type="text" class="input-header-small pull-left" placeholder="Username">
                                        </div>
                                        <div class="row-fluid">
                                            <input type="password" class="input-header-small pull-left" placeholder="Password">
                                        </div>
                                    </div>
                                <div class="row-fluid">
                                    <div class="span12">
                                        <div class="row-fluid">
                                            <button type="submit" class="btn btn-success btn-medium pull-right">Sign in</button></div>
                                         </div>
                                    </div>
                                </div>
                            </form>
                        </div><!--end of login-->
                    </div><!-- end of span3--> 

                </div><!-- end of row -->
            </div><!-- end of container -->
        </div><!-- end of inner --> 
    </div><!-- end of navbar navbar-fixed-top --> 
```

# java - 将数据存储在内存中

> ID：14313862
> 
> 赞同：5
> 
> 时间：2013-01-14T05:53:57.153
> 
> 标签：java, jsp, servlets, pojo

我`"TABLE A"`在数据库中包含 3 列`"COL 1" , "COL 2" and "COL 3"`大约`1000000`（100 万）条记录。

针对这张表，我已经映射了一个简单的例子`POJO`，比如`"ClassA"`3 个实例变量，并`"var1" , "var2" , "var3"`在那里定义了方法。`set()``get()`

我的应用程序包含简单的 JSP、Servlet 和 POJO，没有花哨的框架和其他技术。

我真正想要的是，当我的应用程序第一次部署在应用程序服务器上并且它收到的第一个请求时，仅针对该请求（仅 1 次），我的 Servlet 将从中获取 100 万条记录`TABLE A`，用这些记录映射 ClassA 并开始填充对象`ClassA`并将它们保存在 Vector 或 an`ArrayList`中，正如您可能已经理解的那样，我现在将包含 100 万个对象，`Vector/ArrayList`每个对象代表`record/tupple`.`"TableA"`

好的，现在进入真正困难的部分，我希望这`Vector/ArrayList`是`stored/persisted/added`应用程序上下文或虚拟机或任何其他内存存储位置（实际上我不知道），以便每次我的 JSP`pages/Servlets`访问对象记住获取数据而不是每次都访问数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T05:58:38.980

您必须使用**Java 缓存系统**（[请参阅此处](http://jakarta.apache.org/jcs/index.html)）或**Ehcache**（[请参阅此处](http://ehcache.org/)）将数据存储在缓存中，**Spring****中的控制反转**在某种程度上也有帮助，但不确定是否有助于将 100 万个数据存储在堆中，如堆内存是有限的。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T06:00:35.597

如果我说得对，您似乎需要缓存。我建议在这里查看[EHcache](http://ehcache.org/)或[Infinispan](http://www.jboss.org/infinispan)。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T06:04:34.267

我认为您正在寻找某种方法来缓存您的对象。

你可能想看看[ehcache](http://ehcache.org/)

或者，

因为你有大对象，你可以看看实现对象存储库，比如 [noDB](http://code.google.com/p/nodb/)**

# jquery - jQuery / CSS3 动画阴影效果

> ID：14313863
> 
> 赞同：7
> 
> 时间：2013-01-14T05:53:57.523
> 
> 标签：jquery, css

所以这个问题可能会被否决，但我认为有人可能会提供帮助。

我正在寻找的效果是蓝色块像气球一样上下盘旋，并且随着块在循环上上下移动，它下面的阴影会增长和缩小。

![在此处输入图像描述](../Images/3a021a23cb40eb9814f2ab4c32d1104c.png)

关于如何编程的任何想法，或者是否有人知道可能完成的教程/插件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-14T06:54:10.430

你可以用 jQuery 或**CSS3**来做，你的电话，我会告诉你：

## *[CSS3 演示](http://jsbin.com/ikumaf/6/edit)*

CSS3：

```
#box{
  position:absolute;
  top:100px;
  left:0;
  width:200px;
  height:200px;
  background:#6CB8E9;
     -moz-animation:jump 2s infinite ease-in-out;
  -webkit-animation:jump 2s infinite ease-in-out;
}

#shadow{
  position:absolute;
  top:290px;
  height:20px;
  border-radius:30px;
  left: -200px;
  background:transparent;
  width:200px;
  box-shadow:200px 0 10px 2px rgba(0,0,0,0.4);
  margin-left:0;
  opacity: 1;
     -moz-animation:shadowSize 2s infinite ease-in-out;
  -webkit-animation:shadowSize 2s infinite ease-in-out;
}

@-moz-keyframes jump {
    0%   { top:100px;}
    50%  { top:25px;}
    100% { top:100px;}
}
@-webkit-keyframes jump {
    0%   { top:100px;}
    50%  { top:25px;}
    100% { top:100px;}
}

@-moz-keyframes shadowSize {
    0%   { width:200px; margin-left:0px; opacity:1;   box-shadow:200px 0 10px rgba(0,0,0,0.7);}
    50%  { width:150px; margin-left:25px;opacity:0.3; box-shadow:200px 0 30px rgba(0,0,0,0.3);}
    100% { width:200px; margin-left:0px; opacity:1;   box-shadow:200px 0 10px rgba(0,0,0,0.7);}
}
@-webkit-keyframes shadowSize {
    0%   { width:200px; margin-left:0px; opacity:1;   box-shadow:200px 0 10px rgba(0,0,0,0.7);}
    50%  { width:150px; margin-left:25px;opacity:0.3; box-shadow:200px 0 30px rgba(0,0,0,0.3);}
    100% { width:200px; margin-left:0px; opacity:1;   box-shadow:200px 0 10px rgba(0,0,0,0.7);}
} 
```

* * *

现在，与我们亲爱的 jQ... 只需使用 .png 图像作为阴影，而不是我丑陋的`box-shadow`:)

## *[jQuery 演示](http://jsbin.com/amereb/1/edit)*

```
var li = 1; // a LoopIterations variable

function loop(){  

    li = ++li%2;  // reset evenly to '0' // results in 0, 1, 0, 1, 0, .... 

  $('#shadow').animate({
      width:       !li ? 150:200 ,
      marginLeft:  !li ? 25:0 ,
      opacity:     !li ? 0.3:1
  }, 2000);

  $('#box').animate({
    top:        !li ? 25 : 100
  },2000, loop);   // THIS 'loop' callback will recall the loop() function creating ... a loop :D

}

loop(); // start loop 
```

解释一下：每次奇数迭代都会`li`被设置为 在 Javascript 中可以表示为，非常适合使用将检查两个布尔值的三元运算符，例如： `0``1``%`
`0``false``[true or false statement] ? [do this if true] : [do that if false] ;`

`!li ? 150:200`表示 if `!li`(= 0 = is false) 使用`200`else 使用`150`

此外：

```
<div id="box"></div>
<div id="shadow"></div> 
```

和 CSS：

```
#box{
  position:absolute;
  top:100px;
  width:200px;
  height:200px;
  background:#6CB8E9;
}

#shadow{
  position:absolute;
  top:310px;
  height:1px;
  background:rgba(0,0,0,0.26);
  width:200px;
  box-shadow:0 0 14px 2px #000;
  margin-left:0;
  opacity: 1;
} 
```

# android - overridePendingTransition 在安卓设备上不起作用

> ID：14313873
> 
> 赞同：1
> 
> 时间：2013-01-14T05:54:53.080
> 
> 标签：android, transition

默认情况下，新活动从右侧进入，并从右侧退出。我想让它进入和退出表单底部，但我尽力了，我只能让它从底部出来，从右边退出，这是我的代码。我需要一些帮助，谢谢。

```
private void show() {
        Intent intent = new Intent();
        intent.setClass(this, PromotionActivity.class);
        startActivity(intent);
        overridePendingTransition(R.anim.slide_bottom_enter,R.anim.slide_bottom_exit); 
    } 
```

slide_bottom_exit.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/linear_interpolator"
    android:fromYDelta="0%p"
    android:toYDelta="200%p" 
    android:duration="@android:integer/config_mediumAnimTime">
</translate> 
```

R.anim.slide_bottom_enter.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/linear_interpolator"
    android:fromYDelta="200%p"
    android:toYDelta="0%p" 
    android:duration="@android:integer/config_mediumAnimTime">
</translate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T06:09:26.890

try this code to make transitions and then tell me:

*   when you want to appear your activity from bottom

    ```
    overridePendingTransition(R.anim.top_to_bottom_in,R.anim.top_to_bottom_out); 
    ```

*   top_to_bottom_in

    ```
     <?xml version="1.0" encoding="utf-8"?>
        <translate xmlns:android="http://schemas.android.com/apk/res/android"
        android:duration="1000"
        android:fromYDelta="-100%p"
        android:toYDelta="0%p" /> 
    ```

*   top_to_bottom_out

    ```
     <?xml version="1.0" encoding="utf-8"?>
        <translate xmlns:android="http://schemas.android.com/apk/res/android"
        android:duration="1000"
        android:fromYDelta="0%p"
        android:toYDelta="100%p" /> 
    ```

*   when you want to make exit you activity

    ```
    overridePendingTransition(R.anim.bottom_to_top_in, R.anim.bottom_to_top_out);

    -bottom_to_top_in

    <?xml version="1.0" encoding="utf-8"?>
    <translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="1000"
    android:fromYDelta="100%p"
    android:toYDelta="0%p" /> 
    ```

*   bottom_to_top_out

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="1000"
    android:fromYDelta="0%p"
    android:toYDelta="-100%p" /> 
    ```

# php - HTML 打印文本框值

> ID：14313874
> 
> 赞同：0
> 
> 时间：2013-01-14T05:55:02.440
> 
> 标签：php, html

我希望用户像这样填写注册：

```
<h1>Enlistment Form</h1>
<form name="input" action="http://spartancorps-gil.comyr.com/Enlistment.php" method="get">
<p>First Name?: </p> 
<input type="text" name="FirstName" value="" />
<p>Last Name?: </p>
<input type="text" name="lastname" value=""/>
<input type="submit" value="Submit" />
</form> 
```

它使用这个 php 发送到服务器：

```
<html>
<head>
<title>A BASIC HTML FORM</title>
<?PHP
$Firstname = $_POST['FirstName'];
print ($Firstname);
$Lastname = $_POST['lastname'];
print ($Lastname);
</head>
</html> 
```

由于某种原因，它没有打印出这些值。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:05:35.323

因为您`method="GET"`在表单和第二个文件中使用，所以您`$_POST`用于获取该值：

这样做：`method="POST"`在你的表格中使用：

例子：

```
<form name="input" action="http://spartancorps-gil.comyr.com/Enlistment.php" method="POST"> 
```

并使用这样做：

```
echo $_POST['FirstName'];

echo $_POST['LastName']; 
```

阅读 PHP 中的“superglobals”。

[http://php.net/manual/en/language.variables.superglobals.php](http://php.net/manual/en/language.variables.superglobals.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T06:07:29.083

请将您的代码更改为此并尝试...请更改表单的方法以发布并关闭 php 标签

```
<form name="input" action="http://spartancorps-gil.comyr.com/Enlistment.php" method="post">

<?PHP
$Firstname = $_POST['FirstName'];
print_r($Firstname);
$Lastname = $_POST['lastname'];
print_r($Lastname);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T06:07:04.703

1.  您使用 提交表单`GET`，但尝试阅读`$_POST`。因此，要么将方法更改为`POST`您的表单，要么用于`$_GET`读取提交的值。
2.  确保 url in`action`指向正确的 php 文件。
3.  之后关闭php标签`print ($Lastname);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T06:26:32.543

试试这个，只需关闭你的 php 标签。

```
<html>
<head>
<title>A BASIC HTML FORM</title>
<?PHP
$Firstname = $_POST['FirstName'];
echo $Firstname;
$Lastname = $_POST['lastname'];
echo $Lastname;
?>
</head>
</html> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-14T06:05:02.857

您必须像这样将“打印”更改为“回声”：

```
<html>
<head>
<title>A BASIC HTML FORM</title>
<?PHP
$Firstname = $_POST['FirstName'];
echo $Firstname;
$Lastname = $_POST['lastname'];
echo $Lastname;
</head>
</html> 
```

# c# - 如何将 DateTime 数据类型与 DateTime.Now 进行比较

> ID：14313875
> 
> 赞同：-1
> 
> 时间：2013-01-14T05:55:03.847
> 
> 标签：c#, .net

我有一个使用`datetime`数据类型的数据表中的变量。此数据类型是`"scheduledTime"`列。我正在尝试将 datatime 变量与系统时钟进行比较，这将在我的桌子上返回不同的背景颜色。我的代码没有得到任何结果，我需要一些指导......我也不确定如何`"scheduledTime"`在我的情况下定义 datetime 变量

这是条件：

如果晚了，则背景颜色`scheduledTime`为`0-15mins`红色..

如果晚了`scheduledTime`，`15min-30mins`那么背景颜色黄色..

如果晚了，则背景颜色`scheduledTime`为`30mins-2hours`绿色..

```
//Row Rendering event
public void Row_Rendering()
{
    DateTime currentTime = DateTime.New();
    DateTime scheduledTime = "SCHD DTM"   //<--- this is the name of the column from the table

    int i = DateTime.Compare(scheduleTime,currentTime); 
    if (i <= 0.25)
    {
        Style.SelectionBackColor = Color.Red;
        ForeColor = Color.White;
    }
    else if (i > 0.25 && i <=0.5)
    {
       Style.SelectionBackColor = Color.Yellow;
       ForeColor = Color.Black;
    }
    else if (i > 0.5 && i <=2)
    {
       Style.SelectionBackColor = Color.Green;
       ForeColor = Color.White;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T06:01:57.063

为了获得两个 DateTime 值之间的分钟差，您可以减去两个 DateTimes 然后在它们上调用 TotalMinutes：

```
double differenceInMinutes = (currentTime - scheduledTime).TotalMinutes; 
```

然后，您可以`differenceInMinutes`相应地用于您的计算：

```
if (differenceInMinutes <= 15) then
Style.SelectionBackColor = Color.Red;
ForeColor = Color.White;

else if (differenceInMinutes > 15 & differenceInMinutes <= 30) then
Style.SelectionBackColor = Color.Yellow;
ForeColor = Color.Black;

else if (differenceInMinutes > 30 & differenceInMinutes <= 120)
Style.SelectionBackColor = Color.Green;
ForeColor = Color.White; 
```

**更新**

下面是有关如何从 DataTable 中获取 DateTime 值的示例。假设 DataTable 存储在一个名为的变量中`myDataTable`，并且您当前位于第一行（行索引为 0）：

```
DateTime scheduledTime = myDataTable.Rows[0]["SCHD DTM"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T05:58:21.670

尝试使用[TimeStan](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)对象进行操作，例如：

```
TimeSpan timeSpan = currentTime - scheduleTime; 
```

之后，您可以简单地使用`timeSpan.TotalMinutes`属性或其他`Total...`属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T06:13:37.537

您可以直接比较 TimeSpan 值

```
 DateTime currentTime = DateTime.Now;
            DateTime scheduledTime = dataReader.GetDateTime(0);

            TimeSpan timeDifference = scheduledTime - currentTime;
            if (timeDifference <= new TimeSpan(0, 15, 0)) //less 15m
            {
                Style.SelectionBackColor = Color.Red;
                ForeColor = Color.White;
            }
            else if (timeDifference <= new TimeSpan(0, 30, 0)) //15m - 30m
            {
                Style.SelectionBackColor = Color.Yellow;
                ForeColor = Color.Black;
            }
            else if (timeDifference <= new TimeSpan(2, 0, 0))//30m - 2hr
            {
                Style.SelectionBackColor = Color.Green;
                ForeColor = Color.White;
            }
            else // > 2hr
            {
                //:todo: create styles for time difference > 2 hr
            } 
```

# html - 在 HTML5 中，如何按照需要的方式对齐标题

> ID：14313876
> 
> 赞同：1
> 
> 时间：2013-01-14T05:55:05.700
> 
> 标签：html, css

我目前正在练习一些 HTML 5 Web 应用程序开发，但我什至无法让我的标题正确对齐。

访问[http://www.sithhappens.net](http://www.sithhappens.net)看我的意思，（查看页面源代码看我的 html）和[http://www.sithhappens.net/iphone.css](http://www.sithhappens.net/iphone.css) 看 CSS

我希望“Route.me”对齐中间，并且按钮（在我在那里实现按钮之前只是一个占位符）保持在左侧。谢谢。

（在您的移动设备上访问网页）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T06:12:40.063

这是正确的 HTML，我已将样式注入 HTML，因此您可以看到它是如何完成的。诀窍是使按钮位置：绝对，因此它不会影响文本“Route.Me”的间距。

```
<article>
<header><button style="
    position: absolute;
">Button</button> <div align="center" style="display: block; text-align: center;">Route.Me </div>
</header>
</article> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T06:01:43.557

仅使用

```
<div align="center" style="margin-top:-20px;">Route Me</div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-14T06:14:21.777

您必须在元素中放置`button`文本。`<p>`像这样设置样式：

```
<div class="btn">Button</div>
<div align="center" class="txt" >Route.Me </div> 
```

CSS

```
.btn {
    float:left;
}

.txt {
    display:block;
} 
```

# android - 如何在 android 的 qualcomm sdk 的视频播放中更改图像目标和视频

> ID：14313886
> 
> 赞同：0
> 
> 时间：2013-01-14T05:55:56.747
> 
> 标签：android, augmented-reality, vuforia

如何在 qualcomm sdk 的视频播放中更改图像目标和视频，我有两个新目标图像的 dat 和 xml 文件，但现在可以为这些图像目标播放视频，我应该遵循两个步骤来处理两个新目标图像和播放视频对应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:43:42.740

如果您只想跟踪新图像并播放新视频，请执行以下操作：

对于新的目标图像：

用从 Vuforia trackermaneger 站点下载的 dat 和 xml 替换 android videoplayback 示例项目中资产文件夹中的 dat 和 xml。如果您不想再次构建 JNI 代码，请不要忘记将它们重命名为默认值。

对于要播放的新视频：要么用相同的名称替换资产文件夹中的视频文件，要么（我推荐这个）你使用任何服务器 url 作为视频链接，像这样-

```
Uri videolink = Uri.parse("http://commonsware.com/misc/test2.3gp");
                        mMediaPlayer.setDataSource(mParentActivity,videolink); 
```

在 videoplaybackhelper 类中

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:26:42.307

你必须在你的项目中给出这些 XML 的引用，就像其他 XML 给出的参考一样，这里也是 ImageTarget 项目中的示例。在图像目标项目中，JNI Imagetarget.cpp 中有一个方法

```
Java_com_qualcomm_QCARSamples_Imagtargets_Imagetargets_loadTrackerData(JNIEnv *, jobject) 
```

此方法处理多个 XML 文件，它将帮助您如何加载多个 XMLS

相反，如果您想检测多个标记但使用单个 XML 和 DAt 文件从 Vuforia 服务器识别您的目标将其组合在单个 Xml 文件中，然后您可以像这样使用

```
static const int NUM_TARGETS =4;
static const int Test1 = 0;
static const int Test2 = 0;
static const int Test3 = 0;
static const int Test4 = 0;
static const int Test5 = 0; 
```

并在像这样的renderframe方法中

```
if (strcmp(trackable->getName(), "Test1 ") == 0)
            currentTarget=Test1 ;
if (strcmp(trackable->getName(), "Test2 ") == 0)
            currentTarget=Test2 ;
if (strcmp(trackable->getName(), "Test3 ") == 0)
            currentTarget=Test3 ;
if (strcmp(trackable->getName(), "Test4 ") == 0)
            currentTarget=Test4 ;
if (strcmp(trackable->getName(), "Test5 ") == 0)
            currentTarget=Test5 ; 
```

# ios - xcode 自定义覆盖捕获

> ID：14313887
> 
> 赞同：1
> 
> 时间：2013-01-14T05:56:02.490
> 
> 标签：ios, objective-c, xcode, uiimagepickercontroller, cgrectmake

我正在开发 OCR 识别应用程序，我想为用户提供手动选择执行 OCR 的区域（在相机选择期间）的选项。现在，我面临的问题是我通过简单地覆盖 - (void)drawRect:(CGRect)rect 方法在相机屏幕上提供了一个矩形，但是，尽管有一个矩形，相机还是试图聚焦在整个捕获区域而不仅仅是在指定的矩形内。

换句话说，我不希望发送整个图片进行处理，而是只发送矩形内捕获的图像的一部分。我设法提供了一个矩形，但是没有任何功能。我不希望聚焦整个屏幕区域，而只聚焦矩形下方的区域。

我希望这是有道理的，因为我已尽力解释它。谢谢，让我知道

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:08:20.010

Stream the camera's image to a `UIScrollView` using an `AVCaptureOutput` then allow the user to pinch/pull/pan the camera into the proper place... now use `UIGraphics` Image `Context` to take a "screen-shot" of this area and send that `UIImage.CGImage` in for processing.

# android - android google map v2 ---点击指南针后倾斜重置为零...

> ID：14313892
> 
> 赞同：0
> 
> 时间：2013-01-14T05:56:21.303
> 
> 标签：android, google-maps

我尝试了谷歌地图 v2 示例，“相机”。我知道下面的代码将倾斜设置为 50 以启用 3D 倾斜功能。

```
static final CameraPosition BONDI =
        new CameraPosition.Builder().target(new LatLng(-33.891614, 151.276417))
                .zoom(15.5f)
                .bearing(300)
                .**tilt(50)**
                .build(); 
```

但点击谷歌地图指南针后，“倾斜”似乎设置为零，现在 3D 功能消失了，就像原始的 2D 地图一样。

我的问题是如何重新设置“倾斜”。我知道一种方法是使用“moveCamera（）”并给它一个带有“倾斜”的CameraUpdate。但是还有其他方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T12:43:15.447

就像在 Google 地图应用程序中一样，向下拖动两根手指。

# html - 不透明元素中的透明元素

> ID：14313895
> 
> 赞同：-1
> 
> 时间：2013-01-14T05:57:31.903
> 
> 标签：html, css, transparent

我想在主要内容上设置一个白色背景，但留下另一个嵌套在里面的元素是透明的。

布局是这样的。

```
<div id="content">
  <p>Lorem Ipsum dolor sit amet, etc...</p>

  <div id="morecontent">
    <p>stuff</p>
  </div>

</div> 
```

我想要一个白色背景`#content`，但我不希望那个背景应用到`#morecontent`. 换句话说`#morecontent`，将具有与身体相同的背景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:37:55.380

您必须将样式应用于子元素以覆盖父 div 上的样式。没有其他方法可以停止继承父级的属性。将背景应用于“更多内容”div ..

谢谢

# javascript - 从 scriptlet 访问 css 属性？

> ID：14313897
> 
> 赞同：0
> 
> 时间：2013-01-14T05:57:48.717
> 
> 标签：javascript, html, css, image, scriptlet

css

```
.myStyle {
height: 10px;
background-image: url(../myImage.png);
} 
```

jsp

```
<img class=myStyle src=<% imageurl != null ? imageurl: (bacground-image property from my css)%> > 
```

有什么办法可以做到这一点？我不想在我的代码中硬编码默认 url，以允许通过更改 css 属性来更改默认图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:41:38.307

你真正想要的是一个属性文件 - 例如像这样[http://www.easywayserver.com/blog/java-resourcebundle-properties-file-jsp/](http://www.easywayserver.com/blog/java-resourcebundle-properties-file-jsp/)

```
# image default
myimage.default=../myImage.png 
```

和

```
<%@ page language="java" import="java.util.*" %>
<%
ResourceBundle resource = ResourceBundle.getBundle("commonVariable");
/// commonVariable.properties file will be in WEB-INF/classess  folder

String defaultImage=resource.getString("myimage.default");
.
.
.
if (imageurl==null) imageurl=defaultImage;

%>

<img class="myStyle" src="<%= imageurl  %>" /> 
```

* * *

如果必须的话，可以选择

[https://stackoverflow.com/a/2104580/295783](https://stackoverflow.com/a/2104580/295783)

```
function setImageFromBG(img) {
  var style = img.currentStyle || window.getComputedStyle(img, false),
  img.src = style.backgroundImage.slice(4, -1);
}

<img class="myStyle" src="<%= imageurl %>" onerror="setImageFromBG(this)" /> 
```

如果 bgimage 代码也无法提供良好的图像，则可能会循环

# java - 从 Ninite.com 更新后 Eclipse 无法打开

> ID：14313902
> 
> 赞同：0
> 
> 时间：2013-01-14T05:58:19.703
> 
> 标签：java, android, eclipse

我在 Win 8 笔记本电脑上安装了 Eclipse Juno。然后我访问了[http://ninite.com/](http://ninite.com/)，并与大约 10 个其他应用程序一起选择了 Eclipse 和 JDK。我运行了 Ninite 安装程序，回来后我的 Eclipse 关闭了。我已经重新启动了我的计算机，但我无法再打开我的 Eclipse。之前不知道Eclipse在哪里，但是搜索我的C盘，发现C盘根目录下存在一个eclipse文件夹。我单击它，然后单击 eclipse.exe 并没有任何反应。有什么想法吗？

**Eclipse.ini**

```
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.200.v20120522-1813
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-product
org.eclipse.epp.package.java.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
256M
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Dhelp.lucene.tokenizer=standard
-Xms40m
-Xmx512m 
```

**java版本**

```
java version "1.7.0_11"
Java(TM) SE Runtime Environment (build 1.7.0_11-b21)
Java HotSpot(TM) 64-Bit Server VM (build 23.6-b04, mixed mode) 
```

从 cmd 运行 eclipse.exe 不会产生任何输出。

```
C:\eclipse>eclipse.exe
HIT ENTER
C:\eclipse> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:00:23.063

从 eclipse.org 站点获取 Eclipse 的副本，然后备份/删除硬盘上的 eclipse 文件夹。然后提取您从 Eclipse.org 获得的包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:38:04.630

尝试查看 eclipse 日志文件。

[http://wiki.eclipse.org/FAQ_Where_can_I_find_that_elusive_.log_file%3F](http://wiki.eclipse.org/FAQ_Where_can_I_find_that_elusive_.log_file%3F)

# iphone - 如何更改 UIAlertView 的语言以匹配设备语言？

> ID：14313907
> 
> 赞同：1
> 
> 时间：2013-01-14T05:58:42.383
> 
> 标签：iphone, ios, sdk, localization, uialertview

我的应用程序有一个 localizable.strings 文件，它支持英语、法语和德语，我有一个警报视图，当您点击一个按钮时会弹出一个警报视图，那么如何使这个警报视图的语言与设备设置的语言相匹配？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-14T06:03:40.233

与应用程序中的任何其他本地化字符串一样，`UIAlertView`在 Localizable.strings 文件中本地化消息、标题和按钮标题。

看这个例子：

```
UIAlertView *alert2 = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Connection Error", nil) message:NSLocalizedString(@"Couldn't connect to the internet. Please check your network connection", nil) delegate:self cancelButtonTitle:NSLocalizedString(@"Ok", nil) otherButtonTitles:nil, nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T06:04:04.917

检查设备语言环境设置。

```
NSString *localeLang = [[NSLocale preferredLanguages] objectAtIndex:0]; 
```

这将返回该语言的代码...您可以通过此 google 搜索找到哪些代码用于哪些语言的列表：

[http://www.google.com/search?client=safari&rls=en&q=ISO+639-1+codes&ie=UTF-8&oe=UTF-8](http://www.google.com/search?client=safari&rls=en&q=ISO+639-1+codes&ie=UTF-8&oe=UTF-8)

需要注意的是，某些语言****可能****有多个代码，我从未检查过所以我不知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-18T01:35:13.727

对于 Swift 2.0，请参见以下示例：

```
let alert = UIAlertController(
        title: (NSLocalizedString("alert_Title" , comment: "Alert title.") as String),
        message: "Your message here",
        preferredStyle: .Alert)

    alert.addAction(UIAlertAction(
        title: (NSLocalizedString("alert_RateButton" , comment: "Alert button to rate in App Store.") as String),
        style: .Default,
        handler: { action in UIApplication.sharedApplication().openURL(NSURL(
            string: "https://itunes.apple.com/your_app_at_app_store")!)
            print("Going to App at AppStore")
    }))

    // DISMISS
    alert.addAction(UIAlertAction(
        title: (NSLocalizedString("alert_BackButton" , comment: "Alert back button.") as String),
        style: .Default,
        handler: nil))
    presentViewController(
        alert,
        animated: true,
        completion: nil)
} 
```

享受。

# ios - FB - 应用程序无权执行此操作（错误 10）

> ID：14313909
> 
> 赞同：4
> 
> 时间：2013-01-14T05:59:10.327
> 
> 标签：ios, objective-c, facebook

在我的 iPhone 应用程序的 Facebook 开发人员页面中，我在**Insights->Developer->Activity & Errors** 下看到*auth.extendssoaccesstoken*错误。我不明白是什么导致了这个以及如何解决这个问题。

 **另外请帮助我如何检查此问题是否已从客户端解决。

我在我的 iPhone 应用程序中集成了 Facebook SDK 3.1。**

# php - 自动将记录分配给用户

> ID：14313912
> 
> 赞同：0
> 
> 时间：2013-01-14T05:59:57.117
> 
> 标签：php, mysql

我有一个有多个表的 MySQL 数据库。使用 VIEW 我根据条件生成结果，例如这是我的视图查询：

```
select * from 
 (
  (
   (`customer_info` join `deals`) 
   left join 
   `account_info` 
   on
   (
    (`account_info`.`custID` = `customer_info`.`custID`)
   )
  ) 
  left join `phone_details` 
  on
  (
   (`phone_details`.`dealID` = `deals`.`dealID`)
  )
 ) 
 where 
 (
  (`customer_info`.`custID` = `deals`.`custID`) 
  and
  (`deals`.`precredit` <> 'Complete')
 ) 
 group by 
  `deals`.`dealID` 
 having 
 (
  (100 - ((
   (sum(`phone_details`.`ordered`) - sum(`phone_details`.`received`)) 
   / sum(`phone_details`.`ordered`)) * 100)) 
  >= 60
 ) 
```

这几乎给了我一份已收到至少 60% 订单的客户列表：

```
custID |  customer name  | ordered  | received
1      |  Customer 1     | 5        | 3  
2      |  Customer 2     | 4        | 3
3      |  Customer 3     | 2        | 2
4      |  Customer 4     | 1        | 1 
```

现在，我想做的是根据这些结果，自动为它分配一个用户，假设我有 user1、user2 和 user3。所以我的结果现在看起来像这样：

```
custID |  customer name  | ordered  | received  | user
1      |  Customer 1     | 5        | 3         | user1
2      |  Customer 2     | 4        | 3         | user2
3      |  Customer 3     | 2        | 2         | user3
4      |  Customer 4     | 1        | 1         | user1 
```

我将如何去做这个场景？

# magento - 为结帐时选择注册的客户举办的活动

> ID：14313915
> 
> 赞同：0
> 
> 时间：2013-01-14T06:00:12.790
> 
> 标签：magento

**我已经为 customer_registration_success 创建了一个观察者，但是当用户选择注册**时，我需要监听一页结账时触发的事件。[http://cl.ly/image/2F3L0s1E3g1e](http://cl.ly/image/2F3L0s1E3g1e)

关于这可能是什么事件的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:24:22.760

您可以使用以下逻辑创建自己的“自定义事件”，以检查他们使用哪种方法来检查 success.phtml 或将其合并到`sales_order_place_after`

```
$quoteId = Mage::getModel('sales/order')->loadByIncrementId($this->getOrderId())->getQuoteId();
$quote = Mage::getModel('sales/quote')->load($quoteId);
$method = $quote->getCheckoutMethod(true);
if ($method == 'register'){
//the customer registered...do your stuff
} 
```

来源： http: [//www.magentocommerce.com/boards/viewthread/273690/#t375160](http://www.magentocommerce.com/boards/viewthread/273690/#t375160)

# c++ - 如何随机选择最大化空间占用的样本点？

> ID：14313916
> 
> 赞同：7
> 
> 时间：2013-01-14T06:00:16.530
> 
> 标签：c++, algorithm

我想生成可以随机填充/覆盖空间的样本点（如附图中所示）。我认为他们有一种称为“准随机”的方法可以生成这样的样本点。但是，这离我的知识有点远。有人可以提出建议或帮助我找到可以做到这一点的图书馆吗？或者建议如何开始编写这样的程序？

![样本点覆盖空间](../Images/5c4a5964baa16fa278b11ddb3c2207cd.png)

*在图像中，256 个采样点应用于给定空间，随机放置在整个给定空间。*

更新：我只是尝试使用[Halton Quasi-random Sequence](http://people.sc.fsu.edu/~jburkardt/cpp_src/halton/halton.html)中的一些代码，并与下面朋友发布的伪随机结果进行比较。在我看来，Halton 方法的结果更好。我想分享一些结果如下；

![伪随机序列和 Halton 序列](../Images/2fe87ed7def43ccea53f25dad461c229.png)

我写的代码是

```
#include "halton.hpp"
#include "opencv2/opencv.hpp"
int main()
{
    int m_dim_num = 2;
    int m_n = 50;
    int m_seed[2], m_leap[2], m_base[2];
    double m_r[100];
    for (int i = 0; i < m_dim_num; i++)
    {
        m_seed[i] = 0;
        m_leap[i] = 1;
        m_base[i] = 2+i;
    }

    cv::Mat out(100, 100, CV_8UC1);
    i4_to_halton_sequence( m_dim_num, m_n, 0, m_seed, m_leap, m_base, m_r);

    int displaced = 100;
    for (int i = 0; i < 100; i=i+2)
    {
        cv::circle(out, cv::Point2d((m_r[i])*displaced, (m_r[i+1])*displaced), 1, cv::Scalar(0, 255, 0), 1, 8, 0);
    }
    cv::imshow("test", out);
    cv::waitKey(0);

    return 0;
} 
```

由于我对 OpenCV 有点熟悉，我在 OpenCV (Mat) 的矩阵上绘制了这段代码。“i4_to_halton_sequence()”是我上面提到的库中的函数。

结果并没有更好，但可能会以某种方式用于我的工作。有人有其他想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T08:51:10.963

我将给出一个看似半途而废的答案。但是，该主题已在文献中进行了广泛的研究，因此我将仅向您推荐来自 Wikipedia 和其他在线地方的一些摘要。

您想要的也称为低差异序列（或准随机，正如您所指出的）。您可以在此处阅读更多相关信息：[http](http://en.wikipedia.org/wiki/Low-discrepancy_sequence) ://en.wikipedia.org/wiki/Low-discrepancy_sequence 。它对许多事情都很有用，包括数值积分，以及最近模拟视网膜神经节马赛克。

有很多方法可以生成低差异序列（或伪准随机序列：p）。其中一些在 ACM 收集算法 (http://www.netlib.org/toms/index.html) 中。

我认为，其中最常见的称为 Sobol 序列（来自 ACM 的算法 659）。你可以在这里得到一些细节：[http ://en.wikipedia.org/wiki/Sobol_sequence](http://en.wikipedia.org/wiki/Sobol_sequence)

在大多数情况下，除非你真的很喜欢它，否则这些东西看起来很可怕。为了快速获得结果，我会使用 GNU 的 GSL（GNU 科学图书馆）：[http ://www.gnu.org/software/gsl/](http://www.gnu.org/software/gsl/)

该库包括生成准随机序列的代码 (http://www.gnu.org/software/gsl/manual/html_node/Quasi_002dRandom-Sequences.html)，包括 Sobol 序列 (http://www.gnu.org/software /gsl/manual/html_node/Quasi_002drandom-number-generator-examples.html）。

如果你仍然卡住，我可以在这里粘贴一些代码，但你最好还是深入研究 GSL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T07:10:40.160

那么这是另一种方法来做覆盖整个空间的准随机。

由于您有 256 个点可供使用，您可以首先将这些点绘制为 16x16 网格。

然后应用一些函数，为每个点提供一些随机偏移（比如点的 x 和 y 坐标为 0 到 ±2）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T06:50:03.490

您可以创建等距点（所有点与相邻点的距离相同），然后在第二步中随机移动每个点，使它们看起来“随机”。

我的第二个想法是：
1.从一个领域开始。
2\. 在您所在区域的“中间”创建一个随机点 P rand。
3\. 按该点将区域划分为 4 个区域。P是左下子区域的右上角，右下区域的左上角等等。
4\. 对所有 4 个子区域重复步骤 2..4。当然，不是永远，而是直到你满意为止。

该算法确保每个“洞”（即新的子区域）都被一个点填充。

更新：由于步骤 (2)，您的初始区域应该是您的区域的两倍。这确保在边缘和角落也有点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T08:44:12.133

这被称为[“低差异序列”](http://en.wikipedia.org/wiki/Low-discrepancy_sequence)。链接的 Wikipage 解释了如何生成它们。

但我怀疑您已经知道这一点，因为您的图像与 Wikipedia中的[2,3 Halton 序列示例](http://en.wikipedia.org/wiki/Halton_sequence)非常相似

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-01-14T06:08:21.610

您只需要库 rand() 函数：

```
#include <stdlib.h>
#include <time.h>

unsigned int N = 256; //number of points
int RANGE_X = 100; //x range to put sample points in
int RANGE_Y = 100;

void PutSamplePoint(int x, int y)
{
   //some your code putting sample point on field
}

int main()
{
    srand((unsigned)time(0)); //initialize random generator - uses current time as seed
    for(unsigned int i = 0; i < N; i++)
    {
        int x = rand() % RANGE_X; //returns random value in range [0, RANGE_X)
        int y = rand() % RANGE_Y;
        PutSamplePoint(x, y);
    }

    return 0;
} 
```

# ruby-on-rails - 计数器缓存是否尊重 counter_sql 或条件？

> ID：14313918
> 
> 赞同：0
> 
> 时间：2013-01-14T06:00:32.227
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations, counter-cache

在 Rails 3.2 中，关联选项是否`counter_cache`链接到其他选项，例如`counter_sql`或`conditions`？

例如，如果我有这样的关联：

```
class User
  has_many :items, :through => :orders
  has_many :active_items, :through => :orders
           :conditions => 'active = true', :source => :item

class Order
  belongs_to :users, :counter_cache => :active_items_count
  belongs_to :items

class Item
  has_many :users, :through => :orders 
```

计数器缓存会尊重该*活动*条件吗？（意味着不活动的项目不会被计算在内）那么使用`finder_sql`/`counter_sql`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:25:57.157

由于您提到的原因，我最终很少使用计数器缓存，而是始终创建自己的。对 on_save 和 on_create 回调做出反应并调用一个方法来更新计数。

如果您确实创建了自己的一个提示，请使用`@instance.update_column(:column, value)`. 这将确保不会递归调用回调。

# css - 使用 twitter 引导程序居中内容

> ID：14313921
> 
> 赞同：1
> 
> 时间：2013-01-14T06:00:42.410
> 
> 标签：css, twitter-bootstrap

我正在创建一个登录屏幕，其中有一个登录框，无论用户的分辨率如何，我都希望它出现在屏幕的中心（水平和垂直）。

我环顾四周，只能找到水平居中内容的教程/文章，这是我想要的一半。

知道如何在两个平面上实现集中化吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T07:54:08.520

最好的方法是对旧 IE 版本使用 CSS 和 Javascript 回调。

### CSS

```
.center {
   width: 300px;          // your login div width
   height: 300px;         // your login box height
   position: absolute;
   left: 50%;
   top: 50%; 
   margin-left: -150px;   // width/2
   margin-top: -150px;    // height/2
} 
```

### HTML

```
<div class="center">
    Hey dude, I'm in the middle!
</div> 
```

### 活生生的例子

[http://jsfiddle.net/86Asb/](http://jsfiddle.net/86Asb/)

负边距正好是高度和宽度的一半，它将元素拉回到完美的中心。仅适用于固定高度/宽度的元素。这可能适用于除 IE6、IE7 之外的所有浏览器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T06:19:51.963

我知道将项目垂直居中的唯一方法是使用 javascript。这是一个简单的示例，说明如何使用 jquery 和通过 CSS 进行绝对定位。链接到 jsfiddle 和要遵循的代码。

[http://jsfiddle.net/AlienHoboken/XCPGe](http://jsfiddle.net/AlienHoboken/XCPGe)

Javascript：

```
$(document).ready(function() {
  var width = $('#test').css('width');
  var height = $('#test').css('height');
  width = width.replace('px', '');
  height = height.replace('px', '');
  $('#test').css('left', ($(window).width()/2) - (width/2));
  $('#test').css('top', ($(window).height()/2) - (height/2));
}); 
```

CSS：

```
#test {
  position: absolute;
  width: 50px;
  height: 50px;
  background: #000000;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-27T13:35:54.890

我正在使用以下解决方案（没有固定宽度的对话框），使其水平居中。

```
#test {
  position: absolute;
  max-width: 300px;
  left: 1%;
  right: 1%;
} 
```

任何反馈/缺点表示赞赏！

# macos - bash：按没有特定分隔符的列拆分命令输出

> ID：14313922
> 
> 赞同：0
> 
> 时间：2013-01-14T06:00:46.157
> 
> 标签：macos, bash

我正在尝试提取给定列的内容，但已使用空格来格式化列，因此我没有可使用的特定分隔符。

我正在使用的数据是以下 OS X 命令的结果：

```
diskutil list | grep 'Apple' 
```

示例输出：

```
 2:                  Apple_HFS Macintosh SSD           511.8 GB   disk0s2
   2:                  Apple_HFS External                79.7 GB    disk1s2 
```

我要提取的列是磁盘名称，即“Macintosh SSD”和“External”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T06:10:58.207

您应该`diskutil list -plist`改为使用和解析属性列表。人类可读的输出并不意味着机器可读，并且可能看起来与您预期的不同（列边界可能会移动以适应长输出或宽终端窗口等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:35:10.403

如果我理解正确，您需要打印从第 3 到第 N-3 的单词。如果是这样，以下 awk 将执行以下操作：

```
gawk '{disk=""; for (i = 3; i <= NF-3; i++){disk=disk $i " "};print disk}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T11:48:06.383

您还可以使用`tr -s ' '`折叠（挤压）空间：

```
diskutil list | tr -s ' ' | cut -d ' ' -f 3 | grep Apple 
```

或者只是正则表达式：

```
diskutil list | sed -En 's/^[ 0-9]+: +(Apple[^ ]+).+/\1/p' 
```

# sql - Heroku 上的 PostgreSQL 数据库上的 SQL 错误 - 无法运行更新

> ID：14313929
> 
> 赞同：0
> 
> 时间：2013-01-14T06:01:43.253
> 
> 标签：sql, ruby-on-rails-3, postgresql, heroku

我需要对我在 heroku 上的 rails 站点上设置的数据库运行更新查询。它是一个简单的查询，但是由于某种原因，当我尝试从 sql 控制台运行 sql 时，即`Heroku sql`出现语法错误。我不知道 sql 有什么问题，对我来说似乎很好：

```
SQL> UPDATE service_types SET desc = replace(desc, ' Charge', '');
PGError: ERROR:  syntax error at or near "desc"
LINE 1: UPDATE service_types SET desc = replace(desc, ' Charge', '')... 
```

有任何想法吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T06:02:50.617

使用双引号将其转义（*最简单的方法，我知道还有另一种方法*）

```
UPDATE service_types SET "desc" = replace("desc", ' Charge', ''); 
```

*   [PostgreSQL 保留关键字](http://www.postgresql.org/docs/9.0/interactive/sql-keywords-appendix.html)

~~或分配别名~~

 ~~```
UPDATE service_types a SET a.desc = replace(a.desc, ' Charge', ''); 
```~~

# pca - 推荐降维算法（PCA不适合）

> ID：14313931
> 
> 赞同：1
> 
> 时间：2013-01-14T06:01:55.737
> 
> 标签：pca, encoder, unsupervised-learning, dimensionality-reduction, factor-analysis

对于这个应用程序，我想使用一种降维算法，这样给定数量的组件都可以解释数据中相同数量的方差。

因此，主成分分析不适合，因为解释的方差从第一个主成分到每个后续主成分急剧下降。

我可以使用哪些算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T02:29:26.107

如果您只是不喜欢 PC 之间的差异排序，您可以选择一些 PC，然后随机旋转它们。知道额外的订购信息如何对您的应用程序产生负面影响仍然很有趣。

# matrix - 有人可以解释 glMatrix 中的 mat4.translate 函数吗？

> ID：14313934
> 
> 赞同：5
> 
> 时间：2013-01-14T06:02:19.123
> 
> 标签：matrix, webgl, vector-graphics

有谁知道为什么 glmatrix （ 1.x ）这样定义 mat4.translate ：

```
/**
 * Translates a matrix by the given vector
 *
 * @param {mat4} mat mat4 to translate
 * @param {vec3} vec vec3 specifying the translation
 * @param {mat4} [dest] mat4 receiving operation result. If not specified result is written to mat
 *
 * @returns {mat4} dest if specified, mat otherwise
 */
mat4.translate = function (mat, vec, dest) {
    var x = vec[0], y = vec[1], z = vec[2],
        a00, a01, a02, a03,
        a10, a11, a12, a13,
        a20, a21, a22, a23;

    if (!dest || mat === dest) {
        mat[12] = mat[0] * x + mat[4] * y + mat[8] * z + mat[12];
        mat[13] = mat[1] * x + mat[5] * y + mat[9] * z + mat[13];
        mat[14] = mat[2] * x + mat[6] * y + mat[10] * z + mat[14];
        mat[15] = mat[3] * x + mat[7] * y + mat[11] * z + mat[15];
        return mat;
    }

    a00 = mat[0]; a01 = mat[1]; a02 = mat[2]; a03 = mat[3];
    a10 = mat[4]; a11 = mat[5]; a12 = mat[6]; a13 = mat[7];
    a20 = mat[8]; a21 = mat[9]; a22 = mat[10]; a23 = mat[11];

    dest[0] = a00; dest[1] = a01; dest[2] = a02; dest[3] = a03;
    dest[4] = a10; dest[5] = a11; dest[6] = a12; dest[7] = a13;
    dest[8] = a20; dest[9] = a21; dest[10] = a22; dest[11] = a23;

    dest[12] = a00 * x + a10 * y + a20 * z + mat[12];
    dest[13] = a01 * x + a11 * y + a21 * z + mat[13];
    dest[14] = a02 * x + a12 * y + a22 * z + mat[14];
    dest[15] = a03 * x + a13 * y + a23 * z + mat[15];
    return dest;
}; 
```

看起来向量值乘以（缩放）矩阵的方向向量（ dir, left, up ）。但我不明白为什么。还有为什么要分配 mat[15]。我以为它应该永远是1...

我大部分时间都在使用它，我很高兴：

```
mat4.translate_alt = function (mat, vec, factor) {
            factor = factor || 1;
        mat[12] += vec[0]*factor;
        mat[13] += vec[1]*factor;
        mat[14] += vec[2]*factor;
    } 
```

我什么时候应该使用 mat4.translate 什么时候我的 mat4.translate_alt 够用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T15:47:33.870

`mat4.translate`使用给定向量 (vec3) 平移矩阵，这与乘以平移矩阵相同。

另一种看待它的方式是说`mat4.translate = mat4.multiply(someMatrix, mat4.create_translate_matrix(someVec3))`（伪代码）。

# model - Wicket：如何将 AJAX 行为“传递”到包装的表单组件？

> ID：14313936
> 
> 赞同：1
> 
> 时间：2013-01-14T06:02:42.213
> 
> 标签：model, wicket, word-wrap

如果我有一个包含在 div 中的输入（连同其他东西），
我如何将任何添加到包装器的行为传递给该输入？

示例：
组件 HTML 就像`<div> <img> <input> ...`
然后我想添加它`add( new MyComponent("foo", model).add( new AjaxEventBehavior("onupdate"){ ... }`（但这不起作用，因为只能`FormComponent`接收（AjaxEventBehavior`s）。

我假设我可以将此行为对象从包装器移动到输入，但不知道在哪里 - 是否有一些“构建后”侦听器？
还是我应该完全不同，比如将行为作为参数传递？
保持它像上面那样的原因是为了使它对组件的用户透明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:41:56.547

您可以覆盖`MarkupContainer#add(Behavior... behaviors)`包装组件的方法。这当然意味着包装组件永远不会收到任何行为：

```
public class MyWrappingComponent extends Panel {
    private TextField<?> field;

    // Constructors and stuff..

    @Override
    public Component add(Behavior... behaviors) {
        field.add(behaviors);
        return this;
    }
} 
```

一种选择是将包装组件分离为 a [`Border`](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/markup/html/border/Border.html)，它可用于用内容包围组件。然而，这会降低包装元件的“透明度”。（参见[Javadoc 页面](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/markup/html/border/Border.html)上的示例）。

```
public class MyWrappingBorder extends Border {
    public MyWrappingBorder(String id) {
        // add the <img />
        // add the <div />
    }
    ...
 }

 // The markup
 <wicket:border>
     <div>
        <img />
        <wicket:body /> <!-- Will be replaced with the added content -->
     </div>
 </wicket:border> 
```

然后像这样使用它：

```
 add(new MyWrappingBorder("border")
     .add(new TextField<String>("input").add(/* the behaviors */))); 
```

有了这种标记

```
 <div wicket:id="border">
     <input type="text" wicket:id="input" />
 </div> 
```

该`Border`方法将使您能够重用没有“TextField”的边框组件？零件。例如，如果你想添加一个下拉菜单：

```
 add(new MyWrappingBorder("border")
     .add(new DropDownChoice<String>("input", listOfChoices))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T09:08:03.780

在返回组件的包装器中包含一个抽象方法。

```
public abstract class WrapperComponent extends Panel 
{
       public WrapperComponent(String id)
       {
              super(id);

              add(getInnerComponent("whateveridyouwant"));

              //Other wrapper stuff
       } 

      public abstract Component getInnerComponent(String id);         
} 
```

然后调用 WrapperComponent 将强制您重写 getInnerComponent 方法。

```
WrapperComponent wrapperComponent = new WrapperComponent("wrapperComponent")
{
     @Override
     public Component getInnerComponent(String id)
     {
          TextField textfield = new TextField(id);
          textField.add(behavior);
          return textfield; 
     }  

} 
```

这种方式允许您在实际决定使用 WrapperComponent 时定义您想要的内部组件和行为。它可以更好地控制您可以使用 innerComponent 做什么。

希望你觉得这很有帮助。

# groovy - 用于静态方法的 IntelliJ GroovyDSL

> ID：14313940
> 
> 赞同：0
> 
> 时间：2013-01-14T06:03:04.280
> 
> 标签：groovy, intellij-idea, groovydsl

我正在[为 IntelliJ 使用 GroovyDSL](http://confluence.jetbrains.net/display/GRVY/Scripting+IDE+for+DSL+awareness)，我想描述一个静态方法，它返回同一类的实例。这是一种方法，例如：

```
MyEntity x = MyEntity.get(1) 
```

据我了解，我应该使用上下文`ctype`for `java.lang.Class`。但我不知道如何指定返回类型，目前我将其指定为`java.lang.Object`：

```
def domainCtx = context(
        ctype: 'java.lang.Class'
)
contributor([domainCtx]) {
    method name: 'get',
           params: [id: 'long'],
           type: 'java.lang.Object'
} 
```

问题：如何设置`type`为实际的类名？不是“对象”，而是“我的实体”

PS 有没有关于 GroovyDSL 的文档，JavaDoc 描述`contributor`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:19:26.743

使用这样的东西

```
private String extractParameter(def type) {
  def parameters = type.parameters
  if (!parameters || parameters.length != 1) return 'java.lang.Object'
  return parameters[0].canonicalText
}

contributor(ctype:'java.lang.Class') {
    method(type:extractParameter(psiType), name: 'create')
} 
```

在您的情况下，“psiType”属性具有“com.intellij.psi.PsiClassType”类型。它具有“getParameters()”方法，该方法返回泛型参数或类型。'getCanonicalText()' 返回类型的规范表示（具有泛型的限定类名）。

在某些情况下 java.lang.Class 可以有 '? 扩展 MyEntity' 甚至 '?' 范围。因此，您可以添加一些处理这些情况的代码。

# c++ - QByteArray 数据格式说明

> ID：14313942
> 
> 赞同：1
> 
> 时间：2013-01-14T06:03:21.290
> 
> 标签：c++, c, char, ascii, qbytearray

我对 QByteArray 数据感到困惑。有人可以为我解释以下情况。 ![在此处输入图像描述](../Images/f7c356f85fb5b9333cef165da8c70971.png)

这里每个数组索引的数据类型是 char。我理解其中的一些价值观。就像`74 'J'` 我理解的第一个是 ASCII 和第二个是相应的字符。但是什么意思`-1 '\\377'`

还有下面的gui是什么意思？我将上面的 QByteArray 发送到一个函数，该函数将 QByteArray 作为`unsigned char* source`. 下面的 gui 显示了 that 的值`source`。 ![在此处输入图像描述](../Images/3f8ce373b0a183e466f346d4c42f634f.png)

主要令人困惑的部分是第一行的值`0x87089e8 "\377\330\377\340"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T06:19:45.117

`char`在 C/C++ 中是有*符号*的1 字节整数。此 GUI 只是将该值表示为带符号的十进制数和等效的[ASCII](http://www.asciitable.com/)字符。

您在询问字节值 -1，可以通过以下方式解释：

```
Binary     11111111
Octal      0377
Hex        0xFF
Decimal    -1    (Signed)
           255   (Unsigned)

ASCII      \377
           \xFF 
```

请注意，255 没有标准的可打印 ASCII 字符，这就是为什么他们会像现在这样显示它的原因。

另一个例子：

```
Binary     01001010
Octal      0112
Hex        0x4A
Decimal    74    (Signed)
           74   (Unsigned)
ASCII      'J' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T12:35:19.950

我正在回答 的含义`0x87089e8 "\377\330\377\340"`。

`0x87089e8`是`source`指针的值，即它是内存中的地址。`"\377\330\377\340"`是存储在该地址的字符串，写为八进制转义序列。之所以这样写，是因为这些字符都不是 ASCII（ASCII 仅从 0 到 127）。在十六进制中，字节串是`ff d8 ff e0 00`. `00`末尾的 被解释为字符串结束标记（ASCII NULL）。

# xamarin.ios - Monotouch 对话框：样式元素

> ID：14313946
> 
> 赞同：4
> 
> 时间：2013-01-14T06:04:02.820
> 
> 标签：xamarin.ios, monotouch.dialog

我正在使用 Dialog 并想为我的所有单元格设置样式。我有一个背景图像，在示例中我可以看到如何使用 StyledStringElement 来使用该图像。

但是，在实际使用中，某些部分会使用其他元素。例如，一个部分中的最后一个元素是 RootElement - 但它没有要设置的 BackgroundUri 属性。布尔元素也是如此。

我发现了这个问题 -[将所有 monotouch.dialog TableViewCells 自定义为相同样式（背景等）的最佳方法是什么？](https://stackoverflow.com/questions/7694386/whats-the-best-way-to-customise-all-monotouch-dialog-tableviewcells-to-the-same)这是一年半前的一个类似问题。提到的 UIAppearance 样式确实存在于表格单元中，但不适用于 MTDialog。krtrego 对此的回答[在 monotouch.dialog 中可以轻松设置 RootElement 样式吗？](https://stackoverflow.com/questions/6033284/in-monotouch-dialog-can-rootelement-be-easily-styled/12394735#12394735)问题声称可以完成这项工作，但在我实施它时没有出现任何样式。

现在有没有改进的方法来做到这一点？实现这些其他控件类型的我自己的“样式化”版本将是一项巨大的努力，并且查看 styledstringelement 这超出了我目前的技能水平。

这是我想要实现的示例（“标签”单元格下方的阴影，但该元素实际上是一个 RootElement，其下方有一组单选选项）。删除默认的灰线等很容易，但是在每个部分的底部单元格上放置一个微妙的阴影是我无法解决的。

非常感谢！

PS。在删除单元格背景和边框的普通 MTDialog 屏幕上，每个部分下方都有一条微妙的白色阴影/线条。如果我能重新着色，我将离我想去的地方还有很长的路要走……

![在此处输入图像描述](../Images/05c60fd6774276f854a7ddef7cfc04b2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-13T14:00:52.850

子类化元素将允许您通过覆盖 GetCell 方法来设置它的样式，但这会变得非常乏味。我遇到的最好的解决方案是通过继承它来制作一个自定义的 DialogViewController，并使用你自己的 SizingSource 和 GetCell() 方法覆盖 CreateSizingSource 方法，使用你想要的每个单元格场景的图像（顶部，中间，底部，独自的）。它有点代码，我的示例不会处理不均匀的行，但它是我见过的唯一不修改 MT.D 源代码的解决方案。

这是您将在 DialogViewController 子类中覆盖的内容：

```
public override Source CreateSizingSource(bool unevenRows)
{
     return new CustomSource(unevenRows);
} 
```

然后您将创建一个自定义源类：

```
public class CustomSource : Source
{
    public CustomSource(DialogViewController parent) : base (parent)
    {

    }

    public override UITableViewCell GetCell(UITableView tableView, NSIndexPath indexPath)
    {
        var theCell = base.GetCell(tableView, indexPath);

        if (RowsInSection(tableView, indexPath.Section) == 1) //use one with top and bottom rounded
        {
            theCell.BackgroundView = new UIImageView(Theme.CellBackgroundFull);
            theCell.SelectedBackgroundView = new UIImageView(Theme.CellBackgroundFullActive); 

        } else if (indexPath.Row == 0) //top only
        {
            theCell.BackgroundView = new UIImageView(Theme.CellBackgroundTop);
            theCell.SelectedBackgroundView = new UIImageView(Theme.CellBackgroundTopActive); 

        } else if (indexPath.Row+1 == RowsInSection(tableView, indexPath.Section)) // bottom only
        {
            theCell.BackgroundView = new UIImageView(Theme.CellBackgroundBottom);
            theCell.SelectedBackgroundView = new UIImageView(Theme.CellBackgroundBottomActive); 
        } else //anything in the middle
        {
            theCell.BackgroundView = new UIImageView(Theme.CellBackgroundMiddle);
            theCell.SelectedBackgroundView = new UIImageView(Theme.CellBackgroundMiddleActive); 
        }
        return theCell;
    }
} 
```

Theme 只是一个返回 UIImages 的静态类，类似于 Xamarin 中的示例 Field Service 应用程序。所以在这里我总共制作了8张图片。4 表示元素的顶部、中间、底部和单独。每个都有不同的圆角以显示正确。然后是每个触摸时的“突出显示”版本。

这里最大的缺点是您必须为您需要的每个不同样式的控制器执行此操作。如果您可以修改 MT.D 源代码，您可以获得不同的解决方案，允许您在此处的部分级别控制它：http: [//fastchicken.co.nz/2012/05/20/earnest-简报-视觉样式-in-ios-apps-uiappearence-custom-sections-in-monotouch-dialog/](http://fastchicken.co.nz/2012/05/20/earnest-debrief-visual-styles-in-ios-apps-uiappearence-custom-sections-in-monotouch-dialog/)

这具有相同的效果，但是您只需要为每个不同的样式子类化 Section，这使得在一个 Root 中包含多个样式更容易。对此更改提出了拉取请求，但 Miguel 更喜欢第一个解决方案，见此处：[https ://github.com/migueldeicaza/MonoTouch.Dialog/pull/180](https://github.com/migueldeicaza/MonoTouch.Dialog/pull/180)

# android - 在 Activity 中处理 AsyncTask.doInBackground 中的异常？

> ID：14313952
> 
> 赞同：1
> 
> 时间：2013-01-14T06:04:28.160
> 
> 标签：android, android-asynctask

我正在按照[关于进程和线程的指南](http://developer.android.com/guide/components/processes-and-threads.html)来实现`AsyncTask`一个 android 活动，我将在其中执行一些数据库访问。但是，我的代码必须处理`doInBackground`.

我目前的想法是提供一个`Toast`弹出窗口来通知用户这个异常，但现在我担心这也“*违反了单线程模型的第二条规则：不要从 UI 线程外部访问 Android UI 工具包*”（如根据指南）。

提供 Toast 弹出窗口我会错吗？有没有更好的方法来处理`doInBackground`方法中的异常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T06:09:19.780

异常会导致您停止`doInBackground`正在处理的内容吗？

如果是，请存储您遇到`doInBackground`的异常，退出并显示 Toast in`onPostExecute`

如果不是，则将异常信息传递给`onProgressUpdate`with `publishProgress`。

试图弹出`Toast`in 是`doInBackground`行不通的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T06:14:30.060

您可以使用`runOnUIThread`从后台线程更新 UI

```
 @Override
  protected void doInBackground(Void... params) {
   try{
        // do some stuff
    }catch(Exception ex){
    ex.printStackTrace();
    final String message = ex.getMessage();
        yourActivity.runOnUiThread(new Runnable() {
            public void run() {
               // show toast
                Toast.makeText(getApplicationContext, message, Toast.LENGTH_SHORT).show();
            }
        });
    } 
```

}

# oracle - 如何在动态更改 ORDER_BY 子句时在 Oracle Forms 中重复查询？

> ID：14313953
> 
> 赞同：1
> 
> 时间：2013-01-14T06:04:28.163
> 
> 标签：oracle, plsql, oracleforms

我有一个 Oracle Forms 6i 表单，其中包含一个由几列组成的数据块。

```
------------------------------------------------------------------------------
| FIRST_NAME | LAST_NAME | DEPARTMENT | BIRTH_DATE | JOIN_DATE | RETIRE_DATE |
------------------------------------------------------------------------------
|            |           |            |            |           |             |
|            |           |            |            |           |             |
|            |           |            |            |           |             |
|            |           |            |            |           |             |
------------------------------------------------------------------------------ 
```

用户可以按`F7`（进入查询模式，例如，他/她在字段中输入 JOH%`first_name`和 H% `DEPARTMENT`），然后`F8`执行查询并查看结果。在此示例中，将列出姓氏以 JOH 开头并在任何以 H 开头的部门工作的所有员工的列表。这是该查询的示例输出

```
------------------------------------------------------------------------------
| FIRST_NAME | LAST_NAME | DEPARTMENT | BIRTH_DATE | JOIN_DATE | RETIRE_DATE |
------------------------------------------------------------------------------
| MIKE       | JOHN      | HUMAN RES. | 05-MAY-82  | 02-FEB-95 |             |
| BEN        | JOHNATHAN | HOUSING    | 23-APR-76  | 16-AUG-98 |             |
| SMITH      | JOHN      | HOUSING    | 11-DEC-78  | 30-JUL-91 |             |
|            |           |            |            |           |             |
------------------------------------------------------------------------------ 
```

然后，我在每列顶部添加了一个小按钮，以允许用户通过执行`WHEN-BUTTON-PRESSED`触发器按所需列对数据进行排序：

```
set_block_property('dept', order_by, 'first_name desc'); 
```

好消息是 ORDER_BY 确实发生了变化。坏消息是用户永远不会注意到更改，因为他/她将需要执行另一个查询并执行以查看按他们选择的列排序的输出。换句话说，用户只会注意到他/她将执行的下一个查询的变化。

我尝试在更改 ORDER_BY 子句时自动执行查询，如下所示：

```
set_block_property('dept', order_by, 'first_name desc');
go_block('EMPLOYEE');
do_key('EXECUTE_QUERY');
/* EXECUTE_QUERY  -- same thing */ 
```

但是发生的情况是选择了表中的所有数据，而忽略了用户在进入查询模式时最初设置的条件。

我还搜索了这个问题的解决方案，其中大多数处理`SYSTEM.LAST_QUERY`和`default_where`. 问题是，last_query 可以从不同的表单引用不同的块，这在当前显示的数据块上无效。

如何一键完成以下操作：

1-更改`ORDER_BY`当前活动数据块的子句

并且： 2- 使用设置的相同条件执行用户执行的最后一个查询？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T08:42:49.680

您可以使用 get_block_property 内置函数获取块的最后一个查询：

```
GET_BLOCK_PROPERTY('EMPLOYEE', LAST_QUERY); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T07:02:52.850

另一种选择是在表单上提供单独的搜索字段，而不是使用 QBE 功能。

# visual-studio-2010 - NVIDIA SDK 缺少头文件

> ID：14313956
> 
> 赞同：1
> 
> 时间：2013-01-14T06:04:36.313
> 
> 标签：visual-studio-2010, cuda, gpu, nvidia

我正在编写一个简单的程序并尝试将此文件包含在我的代码中`#include <cutil_inline.h>`，但出现错误..

> > 致命错误 C1083：无法打开包含文件：'cutil_inline.h'：没有这样的文件或目录

我已经尝试过了，但仍然出现错误

```
 Error:
fatal error C1083: Cannot open include file: 'cutil_inline.h': No such file or directory

Solution:
1- right-click on project name in solution explorer window
2- Click "Properties"
3- in left window Click Configuration Properties -> Linker
4- set the value of "Additional Library Directories" to 
"$(CUDA_PATH)/lib/$(PlatformName)";"$(NVSDKCOMPUTE_ROOT)/C/common/lib"

5- Right-click on your .cu file
6- Click Properties
7- Click on Cuda Runtime API
8- Set Additional Include Directories to :
$(CUDA_PATH)/include;./;$(NVSDKCOMPUTE_ROOT)/C/common/inc;$(NVSDKCOMPUTE_ROOT)/shared/inc 
```

任何人都可以在这里帮助我。?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:31:07.363

请注意，您缺少标题，而不是库。做出改变对`Additional Library Directories`你没有帮助。

1.  找到路径`cutil_inline.h`。确保您的 SDK 版本包含它；如果没有，请查看您的代码是否可以没有它。另请注意，根据@talonmies 的评论，该`cutil`包在 CUDA 5 中不存在。
2.  将路径放入配置属性 -> C/C++ -> 常规 -> 附加包含目录。

对我来说，它低于`$(NVSDKCUDA_ROOT)\common\inc`，但您的里程可能会有所不同。

# c# - 定位堆栈面板中的动态项目

> ID：14313958
> 
> 赞同：1
> 
> 时间：2013-01-14T06:04:55.953
> 
> 标签：c#, silverlight, windows-phone-7, xaml, windows-8

我对这种编码有点陌生，但我试图在计时器`TextBlock`的每个滴答声中访问动态创建的属性（如 TextBlock.Tag、Name 等） 。`StackPanel`我打算对每个属性做的`TextBlock`是查看它的`tag`属性是什么，以及它是否与条件匹配，以便计时器以`TextBlock`某种方式更改属性。

因此，需要找到一种方法来对每个计时器 Tick 进行编码：“对于`TextBlock.Tag`StackPanel 中的每个，如果`TextBlock.Tag == this`，对 . 执行此操作`TextBlock`。”

这是一些代码来帮助可视化我在做什么：

**Xml代码：**

```
<StackPanel Name="StackP" Margin="6,0,6,0"/> 
```

**C#代码：**

```
{
    for (var i = 0; i < MaxCountOfResults; ++i)
    {
        TextBlock SingleResult= new TextBlock { Text = Resultname.ToString(), FontSize = 20, Margin = new Thickness(30, -39, 0, 0) };

        //a condition to alter certain TextBlock properties.
        if (i == .... (irrelevant to this example))
        {
            SingleResult.Foreground = new SolidColorBrush(Colors.Yellow);
            SingleResult.Tag = "00001";
        }

        //Add this dynamic TextBlock to the StackPanel StackP
        StackP.Children.Add(SingleResult);
    }

//the timer that starts when this entire function of adding the TextBlocks to the StackPanel StackP tree is done.
Atimer = new Timer(new TimerCallback(Atimer_tick), 0, 0, 100);
}

public void Atimer_tick(object state)
{
       The area where I have no idea how to reference the Children of stackpanel StackP with every timer tick. I need help :(

} 
```

谢谢你们。我仍在学习这一点，需要帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T06:12:24.207

您应该可以使用计时器，但我建议您使用`BackgroundWorker`来执行循环而不是计时器事件，这可能会发生冲突。更好的是 - 使用带有触发器的 SilverLight 风格的动画。

在非 UI 线程上，您希望使用 Dispatcher 调用在 UI 线程上调用异步代码，例如：

```
 Deployment.Current.Dispatcher.BeginInvoke(() =>
  {
    try
    {
        foreach (TextBlock txb in StackP.Children){
          txb.Text = "xyz";
        }
    }
    catch (Exception ex)
    {
      Debug.WriteLine("error: "+ex);
    } 
  }); 
```

# yii - CArrayDataProvider 中的 Yii 多排序

> ID：14313960
> 
> 赞同：0
> 
> 时间：2013-01-14T06:05:02.913
> 
> 标签：yii

Yii 是否支持 CArrayDataProvider（Yii 1.1.2）的内置多列排序，如果是，请告诉我我们该怎么做，我是 yii 的新手。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T11:06:38.897

尝试以下（Yii API Doc 示例）：

```
$dataProvider=new CArrayDataProvider($rawData, array(
    'id'=>'user',
    'sort'=>array(
        'multiSort'=>true,
        'attributes'=>array(
             'id', 'username', 'email',
        ),
    ),
    'pagination'=>array(
        'pageSize'=>10,
    ),
)); 
```

# regex - 用于匹配 URL 的最后两部分的正则表达式

> ID：14313965
> 
> 赞同：3
> 
> 时间：2013-01-14T06:05:44.867
> 
> 标签：regex, pattern-matching

我试图找出`regex`仅匹配 url 中最后两个字符串的最佳方法。

例如**www.stackoverflow.com**我只想匹配**stackoverflow.com**

我遇到的问题是一些字符串可以有大量的句点，例如

```
a-abcnewsplus.i-a277eea3.rtmp.atlas.cdn.yimg.com 
```

也应该只返回**yimg.com**

我正在使用的 URL 集没有任何路径信息，因此可以假设字符串的最后一部分总是`.org`或`.com`或某种性质的东西。

> 什么正则表达式在针对 www.stackoverflow.com 运行时会返回 stackoverflow.com，而在上述条件下针对 a-abcnewsplus.i-a277eea3.rtmp.atlas.cdn.yimg.com 运行时会返回 yimg.com？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T06:14:58.963

您不必使用正则表达式，而是可以使用简单的`explode`函数。

因此，您希望在句点处拆分您的 URL，例如

```
$url = "a-abcnewsplus.i-a277eea3.rtmp.atlas.cdn.yimg.com";
$url_split = explode(".",$url); 
```

然后你需要得到最后两个元素，这样你就可以从创建的数组中回显它们。

```
//this will return the second to last element, yimg
echo $url_split[count($url_split)-2];
//this will echo the period
echo ".";
//this will return the last element, com
echo $url_split[count($url_split)-1]; 
```

所以最后你会得到`yimg.com`最终的输出。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T06:24:01.903

如果您需要以 Perl 正则表达式兼容的方式使用多种语言的解决方案，您可以使用类似的解决方案 - 示例在 PHP

```
$url = "a-abcnewsplus.i-a277eea3.rtmp.atlas.cdn.yimg.com";

preg_match('|[a-zA-Z-0-9]+\.[a-zA-Z]{2,3}$|', $url, $m);
print($m[0]); 
```

此正则表达式保证您获取 url + 域名的最后一部分。例如，`a-abcnewsplus.i-a277eea3.rtmp.atlas.cdn.yimg.com`这样产生

```
yimg.com 
```

作为输出，并且有`www.stackoverflow.com`（有或没有前面的三重 w）它给你

```
stackoverflow.com 
```

因此

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T06:32:08.880

到目前为止，我不知道您尝试了什么，但我可以提供以下解决方案：

```
/.*?([\w]+\.[\w]+)$/ 
```

这里有几个技巧：

1.  使用 $ 匹配直到字符串的末尾。这样您就可以确保您的正则表达式引擎不会从一开始就赶上比赛。

2.  在 (...) 内使用分组。实际上它的含义如下：匹配至少包含一个字母的单词，然后应该有一个点（反斜杠，因为点在正则表达式中具有特殊含义，我们希望它“原样”，然后再次包含至少一个字母的一系列字母字母）。

3.  在模式的开头使用不情愿搜索，否则它将以贪婪的方式匹配所有内容，例如，如果您的文本是：

    abc.def.gh

贪婪的匹配将在您的组中提供 f.gh，这不是您想要的。

我假设你的主机中只能有字母（\w 匹配这个词，也许在你的例子中你需要更复杂的东西）。

我在这里发布了一个有效的 groovy 示例，您没有指定您使用的语言，但引擎应该是相似的。

```
def  s = "abc.def.gh"
def m = s =~/.*?([\w]+\.[\w]+)$/
println m[0][1] // outputs the first (and the only you have) group in groovy 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T15:52:31.067

较短的版本

```
/(\.[^\.]+){2}$/ 
```

# ios - libgit2 推送错误（GIT_ENNOFASTFORWARD）

> ID：14313966
> 
> 赞同：1
> 
> 时间：2013-01-14T06:05:47.677
> 
> 标签：ios, git, libgit2

当我使用 libgit2 推送到远程存储库时出现问题。它返回**GIT_ENNOFASTFORWARD**错误，但我只是从远程存储库克隆它，没有人推送它。此时本地和远程的提交对象应该相同。为什么？？？

这是我所做的。

*   从远程克隆一个 git，并更改一个文件的内容。

*   将更改推送到远程 git 存储库。

*   错误：git_push_finish 返回 -11，没有错误信息。（GIT_ENNOFASTFORWARD = -11）

配置：

```
[remote "origin"]
    url = http://path/git/share.git
    fetch = +refs/heads/*:refs/remotes/origin/*
[branch "master"]
    remote = origin
    merge = refs/heads/master 
```

代码：

```
-(IBAction)push:(id)sender {
    git_repository *repo = NULL;
    const git_error *err;
    int ret = -1;
    NSArray *str = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docPath = [str objectAtIndex:0];
    NSString *localPath = [docPath stringByAppendingPathComponent:@"abc/.git"];
    NSLog(@"localPath:%@", localPath);

    ret = git_repository_open(&repo, [localPath UTF8String]);
    NSLog(@"git_repository_open ret:%d",ret);
    err = giterr_last();

    char *remote_url = "http://path/git/share.git";
    git_remote *remote = NULL;
    bool cred_acquire_called = false;
    ret = git_remote_load(&remote, repo, "origin");
    NSLog(@"git_remote_load ret:%d", ret);

    git_remote_set_cred_acquire_cb(remote, cred_acquire_cb, &cred_acquire_called);
    ret = git_remote_connect(remote, GIT_DIRECTION_PUSH);
    NSLog(@"git_remote_connect ret:%d cred_acquire_called:%d", ret, cred_acquire_called);

    git_push *push;
    ret = git_push_new(&push, remote);
    NSLog(@"git_push_new ret:%d", ret);

    char* refspec = "refs/heads/master:refs/heads/master";
    ret = git_push_add_refspec(push, refspec);
    NSLog(@"git_push_add_refspec ret:%d", ret);

    ret = git_push_finish(push);
    NSLog(@"git_push_finish ret:%d", ret);

    ret = git_push_unpack_ok(push);
    NSLog(@"git_push_unpack_ok ret:%d", ret);
    err = giterr_last();

} 
```

# image - 什么是图像处理中的稀疏性？

> ID：14313967
> 
> 赞同：3
> 
> 时间：2013-01-14T06:05:56.757
> 
> 标签：image

我是图像处理的新手，我不知道基本术语的使用，我知道稀疏的基本定义，但是谁能详细说明图像处理方面的定义？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T06:13:48.443

好吧，Sajid，实际上几个月前我在做图像处理，我找到了一个网站，它给了我我认为是稀疏性的最佳定义。

> 稀疏性和密度是用于分别描述数据库表中未填充和填充的单元格百分比的术语。稀疏度和密度之和应等于 100%。
> 
> 一个 10% 密集的表有 10% 的单元格填充了非零值。因此它是 90% 稀疏的——这意味着它的 90% 的单元格要么没有填充数据，要么为零。

我在开/关黑白图像处理的背景下进行了此操作。如果许多像素关闭，则像素是稀疏的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-31T02:52:42.913

正如 The Obscure Question 所说，稀疏性是指向量或矩阵大多为零。要查看真实世界的示例，只需查看[小波变换](http://en.wikipedia.org/wiki/Wavelet_transform)，已知它对于任何真实世界的图像都是稀疏的。

![小波](../Images/9b90058714e7f65a3fba0ba094da8158.png)

（所有黑色值均为 0）

稀疏性具有强大的影响。它可以将两个 NxN 矩阵的矩阵乘法（通常是一次`O(N^3)`运算）转换为一次`O(k)`运算（具有 k 个非零元素）。为什么？因为这是一个众所周知的事实`for all x, x * 0 = 0`。

稀疏是什么*意思*？在我遇到的问题中，这意味着某些领域的相似性。例如，自然图像在某些区域中的颜色基本相同（天空是蓝色的，草是绿色的，等等）。如果您对该自然图像进行小波变换，则由于小波的递归性质，输出是稀疏的（嗯，至少在 Haar 小波中是递归的）。

# php - codeigniter 中的会话数组更新

> ID：14313975
> 
> 赞同：1
> 
> 时间：2013-01-14T06:07:32.970
> 
> 标签：php, arrays, codeigniter, session, session-variables

我必须完成以下任务。

1）取一个数组并将其保存到seesion中。一开始它是空错误，我正在这样做

```
 $id_array=array();
    $this->session->set_userdata('PID', $id_array); 
```

2）之后，我从用户那里获取一些值，然后转到控制器..从会话中获取一个数组。最初是空的。我将该用户值插入到数组中，然后再次将该数组插入到会话中。我正在这样做......

```
 $username['name']=$this->session->userdata['PID'];
 array_push($username,$PID);//this $PID is variable which i m getting from user
 $this->session->set_userdata('PID', $username); 
```

所以用户重复这个过程两次和三次。所以这意味着3个值已被插入到不同的索引中。但是当最后我从会话中获取数据并打印它时..这些值在那里但索引是相同的......但是根据我的reuqirement索引应该是不同的。我是这样打印的

```
 $username['name']= $this->session->userdata('PID');
 print_r($username); 
```

我在 3 次中输入了 6。6 应该在 0 1 2 索引上出现 3 次，但 6 出现 3 次但在这样的同一索引上。

```
Array ( [name] => Array ( [name] => Array ( [name] => Array ( [name] => Array ( [name] => Array ( ) [0] => 6 ) [0] => 6 ) [0] => 6 ) [0] => 6 ) ) 
```

我不知道是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:42:44.717

尝试这个。

```
 $username=$this->session->userdata['PID'];  // read the session
 array_push($username,$PID);//this $PID is variable which i m getting from user
 $this->session->set_userdata('PID', $username); 
```

这将从数组中删除“名称”索引。

# android - Error while opening Database through an IntentService, database accessible through an Activity

> ID：14313977
> 
> 赞同：0
> 
> 时间：2013-01-14T06:07:50.367
> 
> 标签：android, database, nullpointerexception, intentservice

I have a database helper class dbHelper which does the usual operation on the database. I have an activity which opens uses the database for its operation. Now i want to edit the database through a service. So I implemented the code below and it gives a null point exception error. When i removed all the code in onHandleIntent and put a log it compiled. But I dont understand why there is null point exception here. The database exists as it has been used through the activity.

Logcat says Null point exception at DbHelper.getAllItems(). I dont understand as to why there should be an exception in the Service class and not in the activity class.

```
public class ItemStateService extends IntentService {

public static final String C_NAME = "item";

static final String TAG = "ItemStateService";

public ItemStateService() {
    super(TAG);
}

protected void onHandleIntent(Intent intent) {

    DbHelper dbHelper= new DbHelper (this);
    Cursor cursor;
    cursor = dbHelper.getAllItems();
    int count = 0;
    for(cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext()) {
       count++;
    }
    Log.d(TAG, "dbHelper launched with item count "+count); 
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:51:19.913

替换这一行：

```
DbHelper dbHelper= new DbHelper (this); 
```

有了这个：

```
DbHelper dbHelper= new DbHelper (ItemStateService.this); 
```

# embedded-linux - Upgrading Uboot to support PCIe switch, PCIe to PCI bridge, POE

> ID：14313979
> 
> 赞同：0
> 
> 时间：2013-01-14T06:08:03.777
> 
> 标签：embedded-linux, bootloader, u-boot

What changes will be required (if any) in the UBoot bootloader if the following h/w is added to an existing arm based board. a) PCIe switch b) PCIe to PCI bridge c) Power over ethernet

# android - 如何打开ActivityGroup的子Activity

> ID：14313980
> 
> 赞同：1
> 
> 时间：2013-01-14T06:08:05.650
> 
> 标签：android, tabs, android-activity, activitygroup

如何在 Tab中打开一个子`Activity`项。`ActivityGroup`我想使用 Tab 从状态栏通知中打开子活动。我直接调用了活动，但选项卡不可见。任何人都知道如何打开`Activity`.`ActivityGroup`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T06:20:23.827

以此作为参考，这将帮助您解决问题。这里调用子活动解释得很漂亮。

[http://ericharlow.blogspot.in/2010/09/experience-multiple-android-activities.html](http://ericharlow.blogspot.in/2010/09/experience-multiple-android-activities.html)

**如果您不想使用该详细 URL，以下是您问题的答案**

创建

`ArrayList<String> mIdList = new ArrayList<String>`在`onCreate()`ActivityGroup 类中。

**注意：** 当您返回之前的活动时，此 mIdList 可为您提供帮助。

在您的类中创建一个扩展**ActivityGroup**的方法，如下所示：

```
public void startChildActivity(String Id, Intent intent) {   
      Window window = getLocalActivityManager().startActivity(Id,intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));

      if (window != null) {
          mIdList.add(Id);
          setContentView(window.getDecorView()); 
      }    
  } 
```

**在扩展Activity**的主类中执行以下操作：

```
Intent goOrderScreenActivity = new Intent(getParent(), CustomerInfoActivity.class);
            goOrderScreenActivity.putExtra("Flag", 1);
            **YourClassObjectWhichExtendsACtivityGroup** parentActivity = (YourClassObjectWhichExtendsACtivityGroup)getParent();
            parentActivity.startChildActivity("YOUR_ID", goOrderScreenActivity); 
```

# php - Zend Framework 2：选择元素 - 空选项

> ID：14313982
> 
> 赞同：-1
> 
> 时间：2013-01-14T06:08:19.757
> 
> 标签：php, zend-framework2

为什么选择 Zend\Form\Element\Select 中的空项也选择零元素？

在表单类中：

```
$this->add(array(
'type' => 'Zend\Form\Element\Select',
    'name' => 'active',
    'options' => array(
        'label' => _('Active'),
        'empty_option' => '',
        'value_options' => array(
            1 => 'Yes',
            0 => 'No',
    ),
 ),
)); 
```

在控制器中：

```
$searchForm->setData( $request->getPost() ); 
```

html，生成 ZF2：

```
<select name="active">
    <option value="" selected="selected"></option>
    <option value="1">Yes</option>
    <option value="0" selected="selected">No</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:27:27.687

这几乎与 PHP 如何解释`''`,`0`和`null`-context`array()`有关。我不确定这是否可以在给出当前实现时解决，但我建议你在 github 上打开一个关于此的问题。

这**可以**被认为是一个错误。

# android - Image View not getting displayed

> ID：14313996
> 
> 赞同：1
> 
> 时间：2013-01-14T06:09:46.450
> 
> 标签：android, android-layout, android-imageview

I'm stuck with this problem for 3 days. I have the following layout

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.confero.android.videoview.VideoView
        android:id="@+id/video"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true" />

    <RelativeLayout
        android:id="@+id/hitting_stumps_layout"
        android:layout_width="180dp"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/video" >

        <ImageView
            android:id="@+id/hitting_stumps_image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:layout_marginLeft="2dp"
            android:contentDescription="@string/app_name"
            android:src="@drawable/lbw_hitting_the_stumps" />

        <ImageView
            android:id="@+id/hitting_stumps_decision"
            android:layout_width="12dp"
            android:layout_height="12dp"
            android:layout_alignRight="@+id/hitting_stumps_image"
            android:layout_centerInParent="true"
            android:layout_marginRight="5dp"
            android:contentDescription="@string/app_name"
            android:src="@drawable/lbw_tick" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/impact_line_layout"
        android:layout_width="180dp"
        android:layout_height="wrap_content"
        android:layout_below="@+id/hitting_stumps_layout" >

        <ImageView
            android:id="@+id/impact_line_image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="2dp"
            android:contentDescription="@string/app_name"
            android:src="@drawable/lbw_impact_in_line" />

        <ImageView
            android:id="@+id/impact_line_decision"
            android:layout_width="12dp"
            android:layout_height="12dp"
            android:layout_alignRight="@+id/impact_line_image"
            android:layout_centerInParent="true"
            android:layout_marginRight="5dp"
            android:contentDescription="@string/app_name"
            android:src="@drawable/lbw_tick" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/pitched_line_layout"
        android:layout_width="180dp"
        android:layout_height="wrap_content"
        android:layout_below="@+id/impact_line_layout" >

        <ImageView
            android:id="@+id/pitched_line_image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="2dp"
            android:contentDescription="@string/app_name"
            android:src="@drawable/lbw_pitching_in_line" />

        <ImageView
            android:id="@+id/pitched_line_decision"
            android:layout_width="12dp"
            android:layout_height="12dp"
            android:layout_alignRight="@+id/pitched_line_image"
            android:layout_centerInParent="true"
            android:layout_marginRight="5dp"
            android:contentDescription="@string/app_name"
            android:src="@drawable/lbw_tick" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/shot_offered_layout"
        android:layout_width="180dp"
        android:layout_height="wrap_content"
        android:layout_below="@+id/pitched_line_layout" >

        <ImageView
            android:id="@+id/shot_offered_image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="2dp"
            android:contentDescription="@string/app_name"
            android:src="@drawable/lbw_shot_offered" />

        <ImageView
            android:id="@+id/shot_offered_decision"
            android:layout_width="12dp"
            android:layout_height="12dp"
            android:layout_alignRight="@+id/shot_offered_image"
            android:layout_centerInParent="true"
            android:layout_marginRight="5dp"
            android:contentDescription="@string/app_name"
            android:src="@drawable/lbw_tick" />
    </RelativeLayout>

</RelativeLayout> 
```

and I'm trying to make the image view visible at certain time as the video playback goes on. I have used a CountDownTimer.

```
/**
 *
 */

package com.confero.android.videoview;

import android.app.Activity;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnCompletionListener;
import android.media.MediaPlayer.OnPreparedListener;
import android.net.Uri;
import android.os.Bundle;
import android.os.CountDownTimer;
import android.os.Handler;
import android.os.Message;
import android.util.Log;
import android.view.View;
import android.widget.ImageView;

public class LbwTutorialActivity extends Activity {

    private String TAG = "LbwTutorialActivity";
    private VideoView video;
    private CountDownTimer videoTimer;

    private Handler handler = new Handler() {

        @Override
        public void handleMessage(Message msg) {
            // TODO Auto-generated method stub
            if (msg.arg1 == 1) {
                handleShotOffered(msg.arg2);
            } else if (msg.arg1 == 2) {
                handlePitchedInline(msg.arg2);
            } else if (msg.arg1 == 3) {
                handleImpactLine(msg.arg2);
            } else if (msg.arg1 == 4) {
                handleHittingStumps(msg.arg2);
            }
        }
    };

    @Override
    public void onCreate(Bundle icicle) {

        super.onCreate(icicle);
        setContentView(R.layout.main);

        Uri uri = Uri.parse("android.resource://com.confero.android.videoview/"
                + R.raw.lbw2_lh);

        handleShotOffered(0);
        handleImpactLine(0);
        handlePitchedInline(0);
        handleHittingStumps(0);

        if (uri != null) {

            video = (VideoView) findViewById(R.id.video);
            video.setVideoURI(uri);
            video.setKeepScreenOn(true);
            video.setOnCompletionListener(new OnCompletionListener() {

                @Override
                public void onCompletion(MediaPlayer mp) {
                    // TODO Auto-generated method stub
                    video.stopPlayback();
                    videoTimer.cancel();
                }
            });

            video.setOnPreparedListener(new OnPreparedListener() {

                @Override
                public void onPrepared(MediaPlayer mp) {
                    // TODO Auto-generated method stub
                    video.requestFocus();

                    videoTimer = new CountDownTimer(30000, 125) {

                        @Override
                        public void onTick(long millisUntilFinished) {
                            // TODO Auto-generated method stub
                            int stopTime = video.getCurrentPosition();
                            Message message;

                            if (stopTime >= 1500 && stopTime < 1620) {

                                message = new Message();
                                message.arg1 = 1;
                                message.arg2 = 1;
                                handler.sendMessage(message);
                            } else if (stopTime >= 4100 && stopTime < 4220) {
                                message = new Message();
                                Log.d(TAG, "Pause 1");
                                try {
                                    message.arg1 = 1;
                                    message.arg2 = 0;
                                    handler.sendMessage(message);
                                    video.pause();
                                    message.arg1 = 2;
                                    message.arg2 = 1;
                                    handler.sendMessage(message);
                                    this.wait(1500);                                    
                                    video.start();                                  
                                } catch (InterruptedException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                }
                            } else if (stopTime >= 4220 && stopTime < 4340) {
                                message = new Message();
                                Log.d(TAG, "Pause2");
                                try {
                                    message.arg1 = 2;
                                    message.arg2 = 0;
                                    handler.sendMessage(message);
                                    video.pause();
                                    message.arg1 = 3;
                                    message.arg2 = 1;
                                    handler.sendMessage(message);
                                    this.wait(1500);
                                    video.start();
                                } catch (InterruptedException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                }
                            } else if (stopTime >= 9400 && stopTime < 9520) {
                                message = new Message();
                                Log.d(TAG, "Pause 3");
                                try {
                                    message.arg1 = 3;
                                    message.arg2 = 0;
                                    handler.sendMessage(message);
                                    video.pause();
                                    message.arg1 = 4;
                                    message.arg2 = 1;
                                    handler.sendMessage(message);
                                    this.wait(1500);
                                    video.start();
                                } catch (InterruptedException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                }
                            }
                        }

                        @Override
                        public void onFinish() {
                            // TODO Auto-generated method stub
                        }
                    };

                    videoTimer.start();
                    video.start();                  
                }
            });
        }
    }

    private void handleShotOffered(int status) {

        if (status == 1) {
            ((ImageView) findViewById(R.id.shot_offered_image))
                    .setVisibility(View.VISIBLE);
            ((ImageView) findViewById(R.id.shot_offered_decision))
                    .setVisibility(View.VISIBLE);
        } else {
            ((ImageView) findViewById(R.id.shot_offered_decision))
                    .setVisibility(View.INVISIBLE);
            ((ImageView) findViewById(R.id.shot_offered_image))
                    .setVisibility(View.INVISIBLE);
        }
    }

    private void handlePitchedInline(int status) {

        if (status == 1) {
            ((ImageView) findViewById(R.id.pitched_line_image))
                    .setVisibility(View.VISIBLE);
            ((ImageView) findViewById(R.id.pitched_line_decision))
                    .setVisibility(View.VISIBLE);
        } else {
            ((ImageView) findViewById(R.id.pitched_line_decision))
                    .setVisibility(View.INVISIBLE);
            ((ImageView) findViewById(R.id.pitched_line_image))
                    .setVisibility(View.INVISIBLE);
        }
    }

    private void handleImpactLine(int status) {

        if (status == 1) {
            ((ImageView) findViewById(R.id.impact_line_image))
                    .setVisibility(View.VISIBLE);
            ((ImageView) findViewById(R.id.impact_line_decision))
                    .setVisibility(View.VISIBLE);
        } else {
            ((ImageView) findViewById(R.id.impact_line_decision))
                    .setVisibility(View.INVISIBLE);
            ((ImageView) findViewById(R.id.impact_line_image))
                    .setVisibility(View.INVISIBLE);
        }
    }

    private void handleHittingStumps(int status) {

        if (status == 1) {
            ((ImageView) findViewById(R.id.hitting_stumps_image))
                    .setVisibility(View.VISIBLE);
            ((ImageView) findViewById(R.id.hitting_stumps_decision))
                    .setVisibility(View.VISIBLE);
        } else {
            ((ImageView) findViewById(R.id.hitting_stumps_decision))
                    .setVisibility(View.INVISIBLE);
            ((ImageView) findViewById(R.id.hitting_stumps_image))
                    .setVisibility(View.INVISIBLE);
        }
    }
} 
```

My problem is that the image views are not getting visible. Is there a problem with layout or the Java code?

Please help. Thanks in advance.