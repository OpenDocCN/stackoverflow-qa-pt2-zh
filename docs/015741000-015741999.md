# StackOverflow 问答 15741000-15741999

# css - 包含 2 个浮动 div 的 div

> ID：15741005
> 
> 赞同：0
> 
> 时间：2013-04-01T09:37:51.757
> 
> 标签：css

需要你的帮助。我创建了一个包含 2 个浮动 DIV 的 div。第一个 Div 将是 leftnav。第二个 Div 也包含 2 个浮动 DIV。问题#container div 高度设置为自动但似乎不起作用。

这里：[jsfiddle](http://jsfiddle.net/seaamx/Y47sx/30/)

我在第二个 div 的末尾尝试了 clear:both ，但它没有用。

任何帮助，将不胜感激。谢谢

```
<div id="header">header</div>
<div id="container">
    <div id="first">first</div>

    <div id="second">
        <div id="scol1">
            <div id="scol1a">scol1a</div>
            <div id="scol1b">scol1b</div>
            <div id="scol1c">scol1c</div>
        </div>
        <div id="scol2">
            <div id="scol2a">scol2a</div>
            <div id="scol2b">scol2b</div>
            <div id="scol2c">scol2c</div>
        </div>
    </div><!--SECOND DIV-->

    <br style="clear: both;" />

</div> <!--CONTAINER DIV-->
<div id="footer">footer</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T09:42:52.580

改变`scol1`高度`auto`为好。[http://jsfiddle.net/Y47sx/31/](http://jsfiddle.net/Y47sx/31/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:00:23.997

您已为 scol1a、scol1b、scol1c 指定了 100px 的高度。这会导致容器出现问题。为了解决这个问题，你应该定义你的`#container` `height: 306px;`(100+100+100+6)= 306px。6px 为边框。看这个**[演示](http://jsfiddle.net/Y47sx/35/)**

**注意：我已删除`<br style="clear: both;" />`**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-01T09:44:45.637

在`<br style="clear: both;" />`使用`<div style="clear:both; float:none;"></div>`和去除高度`<div id="scol1"></div> <div id="scol2"></div>`

# javascript - 在 JavaScript 中将 div 元素添加到正文或文档

> ID：15741006
> 
> 赞同：176
> 
> 时间：2013-04-01T09:37:58.890
> 
> 标签：javascript

我正在用纯 JavaScript 创建一个灯箱。为此，我正在制作一个叠加层。我想将此叠加层添加到正文，但我也想将内容保留在页面上。我当前的代码添加了覆盖 div，但它也删除了正文中的当前内容。**如何添加 div 元素并将内容保留在正文上？**

```
var el = document.getElementById('element');
var body = document.getElementsByTagName('body');
el.innerHTML = '<p><a id="clickme" href="#">Click me</a></p>';
document.getElementById('clickme').onclick = function (e) {
    e.preventDefault();
    document.body.innerHTML = '<div style="position:absolute;width:100%;height:100%;opacity:0.3;z-index:100;background:#000;"></div>';
} 
```

* * *

## 回答 #1

> 赞同：263
> 
> 时间：2013-04-01T12:03:22.560

使用 Javascript

```
var elemDiv = document.createElement('div');
elemDiv.style.cssText = 'position:absolute;width:100%;height:100%;opacity:0.3;z-index:100;background:#000;';
document.body.appendChild(elemDiv); 
```

使用 jQuery

```
$('body').append('<div style="position:absolute;width:100%;height:100%;opacity:0.3;z-index:100;background:#000;"></div>'); 
```

* * *

## 回答 #2

> 赞同：205
> 
> 时间：2013-04-01T09:43:33.563

# 试试这个： -

**[http://jsfiddle.net/adioo7/vmfbA/](http://jsfiddle.net/adiioo7/vmfbA/)**

采用

```
document.body.innerHTML += '<div style="position:absolute;width:100%;height:100%;opacity:0.3;z-index:100;background:#000;"></div>'; 
```

代替

```
document.body.innerHTML = '<div style="position:absolute;width:100%;height:100%;opacity:0.3;z-index:100;background:#000;"></div>'; 
```

**编辑：-** 理想情况下，您应该使用`body.appendChild`方法而不是更改`innerHTML`

```
var elem = document.createElement('div');
elem.style.cssText = 'position:absolute;width:100%;height:100%;opacity:0.3;z-index:100;background:#000';
document.body.appendChild(elem); 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2016-11-04T10:47:24.313

而不是用 innerHTML 替换所有内容：

`document.body.appendChild(myExtraNode);`

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2015-11-12T11:04:18.670

*通过将所有解决方案集中在一个地方来改进@Peter T 的帖子。*

**[Element.insertAdjacentHTML()](https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentHTML)**

```
function myFunction() {
    window.document.body.insertAdjacentHTML( 'afterbegin', '<div id="myID" style="color:blue;"> With some data...</div>' );
}
function addElement(){
    var elemDiv = document.createElement('div');
    elemDiv.style.cssText = 'width:100%;height:10%;background:rgb(192,192,192);';
    elemDiv.innerHTML = 'Added element with some data'; 
    window.document.body.insertBefore(elemDiv, window.document.body.firstChild);
    // document.body.appendChild(elemDiv); // appends last of that element
}
function addCSS() {
    window.document.getElementsByTagName("style")[0].innerHTML += ".mycss {text-align:center}";
} 
```

*使用[`XPath`](https://stackoverflow.com/a/32201731/5081877)查找元素在 DOM 树中的位置，并将指定位置的指定文本插入到 XPath_Element。在浏览器控制台上尝试此代码。*

```
function insertHTML_ByXPath( xpath, position, newElement) {
    var element = document.evaluate(xpath, window.document, null, 9, null ).singleNodeValue;
    element.insertAdjacentHTML(position, newElement);
    element.style='border:3px solid orange';
}

var xpath_DOMElement = '//*[@id="answer-33669996"]';
var childHTML = '<div id="Yash">Hi My name is <B>\"YASHWANTH\"</B></div>';
var position = 'beforeend';
insertHTML_ByXPath(xpath_DOMElement, position, childHTML); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2021-01-27T10:45:40.677

最被低估的方法是`insertAdjacentElement`。您可以使用一行字面上添加您的 HTML。

```
document.body.insertAdjacentElement('beforeend', html) 
```

在这里阅读 - [https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentElement](https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentElement)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-04-12T10:33:20.803

现代方法是使用[`ParentNode.append()`](https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/append)，如下所示：

```
let element = document.createElement('div');
element.style.cssText = 'position:absolute;width:100%;height:100%;opacity:0.3;z-index:100;background:#000;';
document.body.append(element);
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-01T09:41:16.360

尝试做

```
document.body.innerHTML += '<div style="position:absolute;width:100%;height:100%;opacity:0.3;z-index:100;background:#000;"></div>' 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-01-11T19:37:15.510

您可以使用以下代码制作`div`HTML 代码并将其直接设置为`body`（或任何元素）：

```
var divStr = '<div class="text-warning">Some html</div>';
document.getElementsByTagName('body')[0].innerHTML += divStr; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-03-23T15:56:41.913

最好和更好的方法是创建一个元素并将其附加到`body`标签。第二种方法是首先获取 的`innerHTML`属性`body`并使用它添加代码。例如：

```
var b = document.getElementsByTagName('body');
b.innerHTML = b.innerHTML + "Your code"; 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2019-11-02T10:24:10.517

这是一个非常快速的技巧：假设您想在 div 标签中添加 p 标签。

```
<div>
<p><script>document.write(<variablename>)</script></p>
</div> 
```

就是这样。

# smartclient - 如何以编程方式提交 SmartClient DynamicForm？

> ID：15741009
> 
> 赞同：1
> 
> 时间：2013-04-01T09:38:09.743
> 
> 标签：smartclient

我正在尝试创建一个包含一些数据的隐藏表单，这些数据需要提交到 jsp 页面（在新窗口中打开），但这一切都将以编程方式发生，无需用户按下提交按钮。

我的示例代码

```
var fsquery = "abcd";
var emailId = "as@gmail.com";
var portalPsswd = "password";
var projectId = "123";
var kbUrl = "some url which will consume form post parameters";
var pv="1.2",pn="ADA";

this.kbform=isc.DynamicForm.create({
width: 300,
fields: [
{type: "hiddenitem", name: "EMAIL_ID", defaultValue:emailId },
{type: "hiddenitem", name: "PORTAL_PASSWORD", defaultValue:portalPsswd},
{type: "hiddenitem", name: "PROJECT_ID", defaultValue:projectId},
{type: "hiddenitem", name: "FSQUERY", defaultValue:fsquery},
{type: "hiddenitem", name: "PRODUCT_VERSION", defaultValue:pv},
{type: "hiddenitem", name: "PRODUCT_NAME", defaultValue:pn},
{type: "hiddenitem", name: "ORIGIN", defaultValue:"Administrator"},
{type: "submit", name: "submit", defaultValue: "submit"}
],
action: kbUrl,
target: "_blank",
method: "POST",
canSubmit: true
});

this.kbform.submit(); 
```

最后一条语句不会自动提交表单，但是如果我单击提供的提交按钮，它会根据需要完美运行。

请为我提供一个解决方案，帮助我模拟“提交”类型的按钮功能来提交表单。

您可以在“text.js”选项卡下尝试[此](http://smartclient.com/index.jsp#textItem)示例代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:51:35.103

我不确定这一点，但是您是否尝试过触发`window.onload`事件的提交？我认为在文档完全加载之前该表单不可用。对不起，我没有任何例子。

# ios - 如何在 UIWebview 中停止流式传输 mp3 文件

> ID：15741015
> 
> 赞同：0
> 
> 时间：2013-04-01T09:38:37.760
> 
> 标签：ios

我想停止在 UIWebview 中流式传输 mp3 文件而不重新加载页面。

所以我不想重新加载页面停止。这不是最好的方法。有没有人为我提出一个想法？

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:43:24.370

您只需加载空白页面即可停止流式传输 mp3 文件。

像这样 ：

```
[self.yrwebContent loadRequest:NSURLRequestFromString(@"about:blank")]; 
```

更新：另一种解决方案，使用AVAudioPlayer[播放声音](http://developer.apple.com/library/ios/DOCUMENTATION/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html)

```
NSURL *url = [NSURL fileURLWithPath:self.sFilePath];
NSData *yrSound = [NSData dataWithContentsOfURL:url];
AVAudioPlayer *SoundPlayer = [[AVAudioPlayer alloc] initWithData:yrSound  error:NULL];
SoundPlayer.numberOfLoops = 0;
[SoundPlayer play]; 
```

然后，您使用以下命令停止它：

```
[SoundPlayer stop]; 
```

# c# - 将查询插入 Access C#

> ID：15741016
> 
> 赞同：0
> 
> 时间：2013-04-01T09:38:45.747
> 
> 标签：c#, database

我正在使用 Access 数据库，我有一个用户表。

我有一个插入查询：

```
DataBase.Execute("Insert into Users(UserID,FirstName,SecondName,UserName,Password,Permission) Values(" +
    obj.PersonID +
    ",'" + obj.FirstName +
    "','" + obj.LastName +
    "','" + username +
    "','" + psw +
    "'," + permission + ")"); 
```

我检查了所有参数的值，它们与表的值相同……但它说我的 INSERT 查询中有语法错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:23:11.773

参数，参数，参数。您的代码的第一个好处是，您忘记了单引号。其次，您避免了可怕的 SQL 注入漏洞。第三，您的代码将更容易阅读。考虑一下：

```
string insertQuery = "INSERT INTO table (field1, field2, field3) VALUES (@par1, @par2, @par3)";
Database.Execute(insertQuery, var1, var2, var3); 
```

其中*var1*、*var2*和*var3*是包含您需要插入的值的变量。

有一个更简单（但更糟糕，因为它仍然容易受到 SQL 注入攻击）的解决方案，这将使您的代码比您发布的示例更具可读性：string.format。而不是这个：

```
DataBase.Execute("Insert into Users(UserID,FirstName,SecondName,UserName,Password,Permission) Values(" +
obj.PersonID +
",'" + obj.FirstName +
"','" + obj.LastName +
"','" + username +
"','" + psw +
"'," + permission + ")"); 
```

你可以做这样的事情，更清晰，更难忘记一些简单的引号：

```
string query = string.Format("Insert into Users (UserID,FirstName,SecondName,UserName,Password,Permission) Values({0}, '{1}', '{2}', '{3}', '{4}', {5})", obj.PersonID, obj.FirstName, obj.LastName, username, psw, permission);
Database.Execute(query); 
```

将此视为插入参数用法的简要示例：http: [//msdn.microsoft.com/en-us/library/webmatrix.data.database.execute (v=vs.111).aspx](http://msdn.microsoft.com/en-us/library/webmatrix.data.database.execute(v=vs.111).aspx)

# ios - dropbox linkFromController 检测取消

> ID：15741017
> 
> 赞同：0
> 
> 时间：2013-04-01T09:38:49.733
> 
> 标签：ios, dropbox-api

我在我的应用程序中升级了 DropBox 框架，现在我必须使用 linkFromController。

有一种方法可以检测用户是否点击取消按钮或 DropBox auth 弹出窗口是否可见？

谢谢，马克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:56:54.250

您可以使用以下委托来过滤加载 url。找到在取消按钮中加载的 url 并使用它来完成您的任务。

```
 - (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {

        NSString *url = [[request URL] absoluteString];

          if([url isEqualToString:@"Cancel Url"]){

            //Do what you want
            return NO;
        }
    } 
```

# java - 用于在 JTextArea 中显示输出的 Object 类型的 ArrayList

> ID：15741023
> 
> 赞同：0
> 
> 时间：2013-04-01T09:39:13.820
> 
> 标签：java, swing, arraylist, jtextarea

我有这个我在大学工作的任务，我们必须做一个 GUI 询问用户的输入并在 JTextArea 中显示最终输出（一个 Object 类型的 ArrayList），它们在不同的类中。问题是它只显示我覆盖的 toString() 方法的返回。这是我的代码，这是非 GUI 类中的 toString 方法：

```
 @Override
    public String toString() {

        int u = 1;

        System.out.println("Team " + name + " has " + players.size() + " players");
        for(int i=0; i< players.size();i++)  {
            System.out.print(u++ + ".");
            System.out.println(players.get(i));
        }
              return "Team " + name + " has " + size + " players";

}
        } 
```

这是从 GUI 类调用它的 JTextArea：

```
public class GUI extends Team  {    
        //buttons 
        /constructor
      public  GUI() {

                frame = new JFrame("Team Manager");
                frame.setLayout(new BorderLayout());
                frame.setSize(300, 300);

          jta = new JTextArea(super.toString());
          frame.add(jta, BorderLayout.CENTER);  } 
```

JTextArea 中仅显示 toString() 的返回值，如何使其逐行显示循环？我尝试过创建一个 foreach 循环并附加结果，也尝试过 setText() 和 append() 但它们不接受类型对象，我应该怎么做呢？

```
 for ( MyObject o : ArrayList1) {
                textarea1.append( o.toString() );
                  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:51:14.057

如果要将文本分成几行，请使用`textArea.setLineWrap(true);`

也不要`setText()`像@SHA33 所说的那样使用。据我所知，此方法只是更改 JTextArea 中的文本。使用`append`方法。如果要分隔文本，也可以`\n`在每行末尾附加。

你也可以看看这篇文章：

1.  [如何使用文本区域](http://docs.oracle.com/javase/tutorial/uiswing/components/textarea.html)
2.  [类 JTextArea](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTextArea.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:48:25.117

尝试在 for 循环内的 toString() 中返回结果，并改用 textarea1.setText(...) 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T09:59:47.903

这个怎么样？

```
String str = "";
for ( MyObject o : ArrayList1) {
    str = str + o.toString();
}
textarea1.setText(str); 
```

# ruby-on-rails-3 - 如何更新数据时间属性？

> ID：15741025
> 
> 赞同：0
> 
> 时间：2013-04-01T09:39:18.463
> 
> 标签：ruby-on-rails-3

我只想将 last_clicked_on:datetime 属性更新为当前时间。

```
class FeedEntriesController < ApplicationController
  def show
    @feed_article = FeedEntry.find(params[:id])
    @feed_article.update_attributes(is_to_read: 'false')
    @feed_article.update_attributes(last_clicked_on: Time.now)
    @way = @feed_article.url
    redirect_to @way
  end
end 
```

但是上面的代码不起作用。请有人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:44:06.347

我想你可以试试

```
@feed_article.is_to_read = 'false'
@feed_article.last_clicked_on =  Time.now
@feed_article.save! 
```

无论如何，仅凭此信息很难为您提供帮助。问题可能出在您的列类型上，您可能只是拼错了列的名称……其他的……

**附言**

数据库中的每个`update_attributes`问题事务，因此，您有 2 个事务而不是一个... 上面的代码将只有一个事务

# c++ - 用direct2d创建位图图集，“当前位图”指的是什么？

> ID：15741029
> 
> 赞同：0
> 
> 时间：2013-04-01T09:39:29.793
> 
> 标签：c++, oop, 2d, direct2d

所以我试图从带有direct2d 的图集中获取位图。这是我必须做的唯一方法，也许可以做我想要的，但是......当前位图指的是什么？如果我理解这一点，这不会从一个位图复制和区域到另一个位图，对吗？

```
virtual HRESULT CopyFromBitmap(
  [in, optional]  const D2D1_POINT_2U *destPoint,
  [in]            ID2D1Bitmap *bitmap,
  [in, optional]  const D2D1_RECT_U *srcRect
) = 0; 
```

destPoint [输入，可选]

类型：常量 D2D1_POINT_2U*

在***当前位图***中，由 srcRect 指定的区域被复制到的区域的左上角。

位图 [输入]

类型：ID2D1Bitmap*

要从中复制的位图。

srcRect [输入，可选]

类型：常量 D2D1_RECT_U*

要复制的位图区域

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:44:41.450

`CopyFromBitmap()`是`ID2D1Bitmap`接口上的一个方法，所以它暗示你已经有一个位图，它是调用复制函数的对象。像这样的东西...

```
ID2D1Bitmap *pSourceBitmap = 0;
ID2D1Bitmap *pDestinationBitmap = 0;

// some initialisation of the above bitmaps goes here ...

// copy a region from source to destination
pDestinationBitmap->CopyFromBitmap(/*point you want to copy to*/, pSourceBitmap, 
    /*rect to copy from*/); 
```

# ssis - 在 SSIS 中，如何为变量赋值？

> ID：15741031
> 
> 赞同：0
> 
> 时间：2013-04-01T09:39:35.150
> 
> 标签：ssis

我有提到的 SQL Query `@Result`。现在我想将值赋给 DFT`@Result`中声明的变量`Execute SQL task`。你能帮帮我吗？

这是查询：

```
DECLARE @Result SMALLINT 
DECLARE @VALUE  SMALLINT

BEGIN 
SET @VALUE = (SELECT Value 
              from dbo.LDMStockIntegrityCheck 
              where InterfaceName =  'I0180'
              and FileName = 'PIZ.ED.NBFS001.PICSHT.DATA.LDM')
SET @Result = 0;

IF (@VALUE = 1)
BEGIN 
Select @Result = count(*) from dbo.LDMIntegrityErrorLog 
where InterfaceName = 'I0180' and FileName = 'PIZ.ED.NBFS001.PICSHT.DATA.LDM'
and  CONVERT(VARCHAR(10), DateTime, 120) = CONVERT(VARCHAR(10), getdate(), 120);
END 

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:36:26.037

如果您想从查询`Output`中获取值，那么我看不到变量的重要性`count``count(*) from dbo.LDMIntegrityErrorLog``@Result`

```
DECLARE @VALUE  SMALLINT

BEGIN 
SET @VALUE = (SELECT Value 
              from dbo.LDMStockIntegrityCheck 
              where InterfaceName =  'I0180'
              and FileName = 'PIZ.ED.NBFS001.PICSHT.DATA.LDM')

IF (@VALUE = 1)
BEGIN 
Select count(*) as Result from dbo.LDMIntegrityErrorLog 
where InterfaceName = 'I0180' and FileName = 'PIZ.ED.NBFS001.PICSHT.DATA.LDM'
and  CONVERT(VARCHAR(10), DateTime, 120) = CONVERT(VARCHAR(10), getdate(), 120);
END 
ELSE
SELECT NULL AS Result
END 
```

`@Result`删除查询中的变量

现在创建一个`TaskResult`数据类型的变量。`int`将这个变量映射到`result`上面的查询中。

![在此处输入图像描述](https://i.stack.imgur.com/50XWe.png)

# ruby - 如何将游戏从 Player1 转到 Player2 并保持代码 DRY

> ID：15741032
> 
> 赞同：-1
> 
> 时间：2013-04-01T09:39:37.877
> 
> 标签：ruby, syntax, game-engine

我正在创建一个大富翁游戏。我寻找一种方法来创建一个 take_turn 方法（或一个类），这样我就可以在 player1 和 player2 之间自动切换（以及将来的 player3 等）。

[在这里](https://stackoverflow.com/questions/2641329/programming-technique-how-to-create-a-simple-card-game)寻找答案，还找到[了这个关于 OOP 的完整 PDF](http://www.itmaybeahack.com/book/oodesign-python-2.1/latex/BuildingSkillsinOODesign.pdf)用于开发游戏，但还没有找到这个特定问题的答案。

这是我用其他几个对象进行 TDD 和构建的代码。目前仅对 player1 一切正常，我只想自动为 player1 重复这些步骤，然后自动为 player2 重复这些步骤，而无需手动执行（DRY）。

```
class Engine

  attr_reader :dice, :player1, :player2, :move, :board

  def initialize
    @player1 = Player.new
    @board = Board.new
    @player2 = Player.new
    @dice = Dice.new
    @move = Move.new
  end

  def run
    3.times do
        roll_and_move
        print_current_balance
        player_action
    end
  end

  def roll_and_move
    dice.roll
    move.move(player1, board, dice.value)
  end

  def print_current_balance
    player1.balance
  end

  def player_action
    player1.buy(board.tile(player1.position))
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:44:28.760

好吧，我不确定你真正的问题是什么，但也许这会有所帮助：

将您的玩家放在一个数组中：

```
@players = [Player.new,Player.new] 
```

获取当前玩家的指数

```
@current_player_indice = 1
def current_player
  return @players[@current_player_indice]
end 
```

用一个简单的方法推进一个回合：

```
def next_player
  @current_player_indice = (@current_player_indice+1)%@players.size
end 
```

用 current_player 替换你对 player1 的调用，你应该很好。

# javascript - Javascript替换内容并用来自outerHTML的新内容刷新它

> ID：15741033
> 
> 赞同：0
> 
> 时间：2013-04-01T09:39:37.877
> 
> 标签：javascript

是否可以使用来自outerHTML 的新内容刷新页面？我有问题，我想刷新页面直到 2 秒，处理 0-2 秒以获取带有 innerHTML 等的新 HTML。但是在我从 outerHTML 获取新内容之后。我很难用outerHTML 中的HTML 刷新这些内容。

在我的示例代码下方：

```
<script>
    // code blablabla to get new content. This has been fix code, and below code to start refresh page with outerHTML.
    window.onload = function() {
        tes();
    };

    function tes() {
        var htmlAll = document.documentElement.outerHTML;
        setTimeout(function(){howCodeRefresh()}, 2000);
        function howCodeRefresh() {
            // how code to refresh page and replace all content with variable htmlAll
        };
    };
</script> 
```

我的问题：有可能做到吗？如果是，该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T03:19:01.840

你不是很清楚地解释你的问题，你可以在 jquery 中尝试 ajax 来解决你的问题。这是一个基本的演示：

```
 <div id = "target"></div>

    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript">
        window.onload = loadHtml;
        function loadHtml(){
             $.get("your/server/page.html",function(response){
                   $("#target").html(response);     //Here is your html response
             },'html');
         }
    </script> 
```

[这是 jquery ajax 的更多文档。](http://api.jquery.com/jQuery.get/)

# php - 无法在 PHP 中以 CLI 模式连接 MySQL DB（以 GUI 模式连接）

> ID：15741034
> 
> 赞同：0
> 
> 时间：2013-04-01T09:39:38.433
> 
> 标签：php, mysql, mysqli

我正在尝试在命令行 php 脚本文件中连接 MySQL。我有另一个文件，我在 GUI 模式下运行，但在命令行模式下，它在 mysqli_connect 时给我以下错误：

> mysqlnd 无法使用旧的不安全身份验证连接到 MySQL 4.1+。请使用管理工具通过命令 SET PASSWORD = PASSWORD('your_existing_password') 重置密码。这将在 mysql.user 中存储一个新的、更安全的哈希值。如果此用户在 PHP 5.2 或更早版本执行的其他脚本中使用，您可能需要从 my.cnf 文件中删除 old-passwords 标志

我了解我可以更新我的密码。但由于某种原因，我无法用新密码更新旧密码。所以我只需要在旧密码的支持下连接mysql。

**同样，我提到相同的代码在 GUI 模式下工作正常，但在同一台服务器上的 CLI 模式下却不行。它是如何发生的。有人有什么想法吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:46:55.837

你能检查 Web 服务器和命令行 PHP 使用了哪些 PHP.ini 文件吗？对于 Web 服务器，只需使用 phpinfo() 创建一个页面并检查 php.ini 文件的位置。一旦您获得 Web 服务器使用的 PHP.ini 文件位置，您就可以使用命令行从命令行执行您的 PHP 脚本

```
php -c <Path of PHP.ini> <Your PHP Script> 
```

# android - 日历中的垂直滚动

> ID：15741036
> 
> 赞同：1
> 
> 时间：2013-04-01T09:40:10.753
> 
> 标签：android, android-calendar, android-scroll

我正在尝试为 android 4.x 设备创建日历，其中日期应显示在顶部的单元格和月份名称中。现在，无论用户向上和向下滚动，它都应该更改月份（简而言之，我想实现通过向上/向下滚动更改月份的功能）。

我在 HTC 设备中看到了相同类型的日历控件。

任何人都知道如何实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:30:44.520

我认为你在这种情况下使用viewpager，但实际上它是垂直滚动。

应该尝试使用[DirectionalViewPager](https://github.com/JakeWharton/Android-DirectionalViewPager) - 由 JakeWharton 编写

# winforms - Windows窗体中的内存泄漏

> ID：15741037
> 
> 赞同：0
> 
> 时间：2013-04-01T09:40:23.723
> 
> 标签：winforms, memory-leaks

我们有一个表单formA，我们从那个表单中添加另一个表单，比如fromB到这个formA。在处置方法上，我正在使用 formA.Dispose() 处置 formA。通过这一步，它是否会处理 formA 中使用的所有子表单，或者我是否需要为每个表单及其控件显式调用 Dispose() 方法？

同样，在 fromB 中，我们使用了一些 Windows.Forms.Control 列表，并且我们没有在 formB 的 Dispose 方法中将这些列表设为 null。我们还需要处理这些列表吗？

# java - 使用谷歌应用域的身份验证应用引擎

> ID：15741041
> 
> 赞同：0
> 
> 时间：2013-04-01T09:40:34.207
> 
> 标签：java, google-app-engine

我创建了一个新应用程序，将身份验证设置为特定谷歌应用域的用户。我已创建帐户并将此应用程序添加到 myexampledomain.mygbiz.com

我在 Eclipse 中使用 java。当我将此应用程序上传到 GAE 时，没有登录请求。每个人都可以访问...

如何在访问此应用程序之前请求用户登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:54:14.310

我认为您只需要在 app.yaml 文件中设置所需的登录：

```
handlers:
- url: .*
  login: required 
```

欲了解更多信息：[https ://developers.google.com/appengine/docs/java/configyaml/appconfig_yaml#Requiring_Login_or_Administrator_Status](https://developers.google.com/appengine/docs/java/configyaml/appconfig_yaml#Requiring_Login_or_Administrator_Status)

# java - 单元测试条件注释

> ID：15741042
> 
> 赞同：2
> 
> 时间：2013-04-01T09:40:46.897
> 
> 标签：java, html, testing, conditional-comments, xmlunit

我正在使用 XMLUnit ( *org.custommonkey.xmlunit.Diff* ) 测试两个 HTML 字符串：一个由模板引擎生成，另一个来自静态文件。它工作正常，但我遇到了以下问题：

我的代码中有条件注释，如下所示：

```
<!--[if IE6]>
    <link type="text/css" href="ie6Style.css" rel="stylesheet" />
<![endif]--> 
```

如果我根据以下代码对其进行测试，我会收到一个错误（href 和 type 属性在以下片段中交换）：

```
<!--[if IE6]>
    <link href="ie6Style.css" type="text/css" rel="stylesheet" />
<![endif]--> 
```

我知道对于 XML 解析器，条件注释只是一个纯文本。但是有没有办法测试 HTML/XML 代码的条件注释内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:44:06.320

如果你想忽略评论，有`XMLUnit.setIgnoreComments(false)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:45:03.527

在运行测试之前删除`<!--[if IE6]>`和。`<![endif]-->`

# c# - 如何更改 WP8 silverlight 中状态栏的背景颜色？

> ID：15741044
> 
> 赞同：8
> 
> 时间：2013-04-01T09:40:53.563
> 
> 标签：c#, windows-phone-7, windows-phone-8

有什么方法可以更改 Windows Phone 8 silverlight 应用程序中状态栏的背景颜色？

![在此处输入图像描述](https://i.stack.imgur.com/nRRis.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-01T15:19:11.313

这样做很容易，但我不确定它是否反映在模拟器中（最好在真实设备上尝试）。

打开要更改状态栏的页面的 XAML，然后按照您希望的方式更改这些属性：

```
shell:SystemTray.IsVisible="True"
shell:SystemTray.BackgroundColor="#2440b2"
shell:SystemTray.ForegroundColor="White" 
```

*.IsVisible 属性确保状态栏可见，*.BackgroundColor 设置状态栏的正确背景，最后 *.ForegroundColor 更改文本和图标的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:44:49.173

检查此属性>> `PhoneBackgroundColor`

点击此链接了解更多详情>>

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769552%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769552%28v=vs.105%29.aspx)

# lotus-notes - 每个版本中 Notes.ini 变量的数量？

> ID：15741046
> 
> 赞同：1
> 
> 时间：2013-04-01T09:40:55.380
> 
> 标签：lotus-notes, lotus-domino, lotus

谁能告诉我每个 notes/domino 版本的 Notes.ini 变量的确切列表？

当我在谷歌搜索时，得到了一个基于类别的列表。

[关联](http://www.lntoolbox.com/en/notesini-reference/bycategory.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T09:56:24.967

除了您链接的内容之外，我不知道有一个公开的最终列表。

您可以查看以下站点，了解针对公共 SPR 添加的 Notes.ini 设置。

[http://www-10.lotus.com/ldd/fixlist.nsf/Notes.ini?OpenView](http://www-10.lotus.com/ldd/fixlist.nsf/Notes.ini?OpenView)

您也可以通过在 developerworks 中查找“ [Ask Professor INI](http://www.ibm.com/developerworks/views/lotus/libraryview.jsp?sort_by=&show_abstract=true&show_all=&search_flag=&contentarea_by=Lotus&search_by=Ask%20Professor%20INI&product_by=-1&topic_by=-1&industry_by=-1&type_by=All%20Types&ibm-search=Search) ”来找到其他人（虽然很旧，所以没有最近的 ini 设置）。

# java - 使用 oracle 11G 与 jboss 进行 JNDI 配置

> ID：15741049
> 
> 赞同：0
> 
> 时间：2013-04-01T09:41:12.017
> 
> 标签：java, jboss, jndi

我正在使用 jboss 服务器目前我正在使用 JDBC 连接，但我想使用 JNDI 数据源。因为我对它完全陌生。请逐步告诉我如何实现这一目标。另外请告诉我是否可以将其部署为 EAR（包括 xml 文件。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T09:44:27.273

看看[这个](http://docs.jboss.org/jbossweb/2.1.x/jndi-datasource-examples-howto.html)。

您通常在应用服务器本身上设置 JNDI 数据源。当然，您可以部署任何将其用作 EAR 的应用程序。

# jquery - JQuery Ajax 函数调用了两次第一次调用工作，而第二次不是

> ID：15741051
> 
> 赞同：2
> 
> 时间：2013-04-01T09:41:21.073
> 
> 标签：jquery, ajax

平台：春天我正在使用 ajax 调用相同的函数，首先是模糊函数，然后是点击函数。但是模糊功能正在工作，而点击功能却没有。我更改了我调用的函数的名称，然后它工作正常。

请帮我找到解决方案。我想在模糊和单击函数上向函数“isValidPassword”发送 ajax 调用。

在点击和模糊时，我必须执行下面的代码。

```
if (oldPassword != "") {
    $.ajax({
        url: 'isValidPassword.html?oldpassword=' + oldPassword,
        type: 'GET',
        contentType: 'application/json; charset=utf-8',
        success: function (data) {
            if (data != "Valid") $("#oldpassworderror").html(data);
            return false;
        }
    });
} 
```

编辑：我的问题。我正在尝试在页面中执行“更改密码”。所以首先我必须检查输入的密码是否与保存的密码相同。为此，我正在使用 ajax 调用。如果输入的密码与旧密码不同，我必须在标签输出（模糊）中显示错误消息，并且当用户单击“保存”（单击）按钮时也应显示相同的消息。但现在 ajax 调用仅适用于模糊功能而不适用于点击。

这是“isValidPassword”功能代码

```
@RequestMapping(value = "/isValidPassword", method = RequestMethod.GET)
    public @ResponseBody
    String isValidPassword(@RequestParam("oldpassword") String oldpassword,
            User user, HttpSession session ) throws Exception {
        String login = (String)session.getAttribute("userName");
        user.setLogin(login);
        user.setPassword(oldpassword);
        String message = null;
        // Check whether old password is valid and
        // give a message in front end
        if (userService.isValidPassword(user)) {
            message = "Valid";
        } else {
            message = "Incorrect old password";
        }
        return message;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-09T11:20:24.987

尝试缓存..

```
if (oldPassword != "") {
    $.ajax({
        url: 'isValidPassword.html?oldpassword=' + oldPassword,
        type: 'GET',
        cache: false, // disable caching
        contentType: 'application/json; charset=utf-8',
        success: function (data) {
            if (data != "Valid") $("#oldpassworderror").html(data);
            return false;
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:04:21.707

To test this code properly, you shall prepare the AJAX call this way:

```
$.ajax({
        url: 'isValidPassword.html?oldpassword=' + oldPassword,
        type: 'GET',
        contentType: 'application/json; charset=utf-8',
        success: function () {
            alert('success');
        },
        error: function () {
            alert('error');
        }
    }); 
```

so you can observe if the problem is on client or server side.

# javascript - Objective c - 如何使用 JS 自动播放 Vimeo 视频

> ID：15741057
> 
> 赞同：7
> 
> 时间：2013-04-01T09:41:33.777
> 
> 标签：javascript, iphone, ios, objective-c, vimeo

每个尝试让 Youtube/Vimeo 视频在 iOS 上自动开始播放的人都知道这可能是一项痛苦的任务。Apple 出于正确的原因阻止了“自动播放”参数，但有时您仍需要让此功能正常工作。

[我在自动播放 youtube 视频](https://stackoverflow.com/questions/15717754/objective-c-how-to-autoplay-a-youtube-video-in-a-uiwebview)时遇到了同样的问题，显然，要让自动播放正常工作，你需要做一些 javascript 魔术，监听播放器的“onReady”事件，而不是在播放器加载并准备好播放时调用“ player.play()' 在没有任何其他用户干预的情况下启动它。

Vimeo 也有一些 javascript API，我很确定你可以用它做自动播放技巧，我只是想不出如何使用它。

他们调用了 JS 迷你库`Froogaloop`以使事情变得更容易，我看到[了 @ila 的这个答案，](https://stackoverflow.com/questions/11990378/play-a-vimeo-video-on-iphone)他将它与以下 html 字符串结合使用：

```
NSString *htmlString = [NSString stringWithFormat:
                                                @"<html><head>"
                                                "<script src=\"froogaloop.js\"></script>"
                                                " <script>"
                                                    "function ready()"
                                                        "{$f(document.getElementById(\"player\")).api(\"play\");}"
                                                    "function func1() "
                                                        "{$f(document.getElementById(\"player\")).addEvent(\"ready\", ready);}"
                                                    "window.onload=func1;"
                                                "</script></head><body>"
                                                       "<iframe id=\"player\" src=\"http://player.vimeo.com/video/39287488?api=1&amp;player_id=player\" width=\"315\" height=\"455\" frameborder=\"0\" webkit-playsinline>"
                                               " </iframe></body></html>"];    

- (void)webViewDidFinishLoad:(UIWebView *)webView {
    NSLog(@"webview loaded");
    NSString *path = [[NSBundle mainBundle] pathForResource:@"froogaloop" ofType:@"js"];
    NSString *jsCode = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil];
    [webView stringByEvaluatingJavaScriptFromString:jsCode];
} 
```

但这对我不起作用，在向此代码添加警报后，我可以看到它`func1()`被调用并执行“addEvent”行，**但**它接缝该`ready()`方法永远不会被调用，因为“就绪”事件从未触发（？） ...

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T09:36:39.260

我对这个问题的第一个答案是一种不太理想的蛮力方法。我建议使用 Vimeo Javascript API 和 froogaloop 查看我的第二种方法。

我将假设您在 html 页面中使用 Vimeo iframe，并且您在 iOS 应用程序或 Safari 内部的 UIWebView 中使用此页面。

对 Vimeo iframe 的一点内省表明它最初没有加载 html 视频标签。您将不得不以编程方式点击“播放”按钮才能加载视频。

为了在今天（2013 年 4 月，可能会发生变化）做到这一点，您只需获取正确的元素并调用正确的函数即可。最好用一些工作示例代码来演示。

```
// You are loading this page inside a UIWebView
<html>
<head></head>
<body>
    <iframe width="" height="" src="http://player.vimeo.com/video/62207569 " frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
    <script>
    // Add a listener for the window's load event
    window.addEventListener('load', onWindowLoad, false);

    function onWindowLoad(event) {
        //use a loop to continue checking the vimeo iframe for the 'play' button
        checkForTrue(isIframeButtonLoaded, iFrameButtonLoaded);
    }

    function checkForTrue(func, callback) {
        setTimeout(function() {
            if (func()) {
                callback( iFrameButton() );
            } else {
                checkForTrue(func, callback);
            };
        }, 1000);
    }

    //finds the 'play' button within the Vimeo iframe
    function iFrameButton() {
                    //window.frames[0].document.getElementsByTagName('div')[1]; // this also works...
        return window.frames[0].document.getElementsByTagName('button')[5];
    }

    //simple boolean condition to check for the iframe button
    function isIframeButtonLoaded() {
        return ( iFrameButton() != null );
    }

    //once the button is loaded, click it
    function iFrameButtonLoaded(iFrameButton) {
        iFrameButton.click();
    }

    </script>
</body>
</html> 
```

[此源代码也可用作要点](https://gist.github.com/jessedc/5344465)

理智的人可能会说这不是最好的方法，但为了在您的 iOS 应用程序中自动播放 vimeo 视频，它似乎确实有效。

从包中加载 html 文件并将其加载到 UIWebView 中的代码是样板文件：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *htmlFile = [[NSBundle mainBundle] pathForResource:@"VimeoTrial" ofType:@"html"];
    NSString *htmlString = [NSString stringWithContentsOfFile:htmlFile encoding:NSUTF8StringEncoding error:nil];

    [self.webView loadHTMLString:htmlString baseURL:nil];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T08:49:04.560

由于Web 浏览器强制执行[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，无法在本地或通过 HTML 字符串加载文件。

`iframe`无法将其调用传播回`postEvent()`主窗口，因为 Vimeo`iframe`正在通过`http://`协议访问，而本地文件是通过`file://`协议进行的。“就绪”事件是通过这种机制发送的。

在这种情况下可以使用 Vimeo API，但为了自动播放视频，您需要知道 iframe 何时加载，但“ready”事件是通过 postEvent 从 iframe 发送到窗口的。

[Vimeo API 文档](http://developer.vimeo.com/player/js-api#universal-with-postmessage)中提供的代码清楚地表明了它使用 postEvent 的事实。Froogaloop 也使用相同的代码

```
window.addEventListener('message', onMessageReceived, false); 
```

如果您在机器上的 HTML 文件中运行 Vimeo API 的最基本示例，Google Chrome 将抛出描述性消息：（Safari 不显示此内容）

> 不安全的 JavaScript 尝试从具有 URL 的框架访问具有 URL`http://player.vimeo.com...`的框架 file:///...index.html 请求访问的框架具有“http”协议，被访问的框架具有“文件”协议。协议必须匹配。

有问题的代码很简单：（[请参阅此要点以获取完整源代码](https://gist.github.com/jessedc/5344465#file-vimeo-js-api-html)）

```
<iframe id="player" width="" height="" src="http://player.vimeo.com/video/62207569?api=1&player_id=player" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>

<script src="http://a.vimeocdn.com/js/froogaloop2.min.js"></script>

<script>    
  var player = $f(document.getElementById('player'));
  player.addEvent('ready', function() { 
  player.api('play');
});
</script> 
```

**正确的解决方案**是将 HTML 页面托管在与 Vimeo iframe 具有相同协议的远程服务上。在这种情况下，任何来自`http://`地址的东西。

如果您从中加载上述内容，`http://(insert your host here)`它会立即在 iOS 模拟器、Safari 和 Google chrome 中运行。

如果您想在设备上做更多事情，则必须合并我给出的两个答案；轮询 iframe，直到您认为它已准备好，然后告诉播放器对象播放。

# sql - sybase 中的派生列

> ID：15741059
> 
> 赞同：0
> 
> 时间：2013-04-01T09:41:36.940
> 
> 标签：sql, view, sybase

我正在编写一个查询来定义一个视图`Sybase Database`。考虑以下示例

```
SELECT a, (b+c+d-e) AS derived_1, (b+c+d-e)+2 AS derived_2, (b+c+d-e)+4 as derived_3
FROM TABLENAME 
```

您可以看到我使用一些逻辑（b+c+de）计算了一个值，应用了更多逻辑并为不同的派生列返回值。有什么办法可以让我只写一次 (b+c+de) 吗？

就像是

```
SELECT a, (b+c+d-e) AS derived_1, derived_1+2 AS derived_2, derived_1+4 as derived_3
FROM TABLENAME 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:43:29.117

将计算包装在子查询中，

```
SELECT  a, 
        derived_1 + 2 AS derived_2, 
        derived_1 + 4 AS derived_3
FROM
        (
            SELECT  a, (b+c+d-e) AS derived_1 
            FROM    TABLENAME
        ) x 
```

# sql-server - 在 sql server 2008 中重新创建快照的最佳方法

> ID：15741061
> 
> 赞同：1
> 
> 时间：2013-04-01T09:41:44.120
> 
> 标签：sql-server, snapshot

我想每小时更新一次数据库快照，保持其名称不变。我找到如何做到这一点的唯一方法 - 删除/创建模式。但是 DROP 和 CREATE 事件之间有 3 分钟的停机时间。有没有办法更快地更新快照？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:19:13.133

我之前的回答被证明是垃圾，因为您无法重命名数据库快照。但是，您可以做的是创建一个 shell 数据库，它的唯一工作是包含数据库快照中对象的同义词。它会像这样工作：

1.  创建新的数据库快照
2.  在新快照中创建对象的同义词，必要时删除旧同义词
3.  重新指向所有同义词后，删除旧快照。

# javascript - JS在IE上播放声音

> ID：15741066
> 
> 赞同：0
> 
> 时间：2013-04-01T09:42:02.153
> 
> 标签：javascript, internet-explorer, audio

我有一个简单的代码，用于在 onmouseover 事件中在 JS 中播放音效。它像这样工作

```
<script type="text/javascript">
    var sonido=document.getElementById("neonclip");
</script>
<audio preload id="neonclip">
    <source src="http://www.mysite/neon.ogg" type="audio/ogg" />
</audio> 
```

还有 onmouseover 位：

```
onmouseover="document.getElementById('neonclip').play();" 
```

问题是它适用于 Firefox/Opera/Chrome 但不适用于 IE，我需要它适用于所有主要浏览器。我知道这是声音文件格式的问题，IE 无法播放.ogg。所以我可能需要添加一个.mp3，我应该怎么做？添加一个如果在脚本中检测浏览器？

# joomla2.5 - 表单类型日历和编辑器

> ID：15741070
> 
> 赞同：0
> 
> 时间：2013-04-01T09:42:08.930
> 
> 标签：joomla2.5

我在前端的组件中有两个字段日历和编辑器。我对这两个都有问题，这是我的文件：

```
<field name="description"
type="editor"
label="COM_BETTING_FIELD_DESC_LABEL"
description = "COM_BETTING_FIELD_DESC_DESC"
class="inputbox"
filter="safehtml"
buttons="false"
/>

<field name="start_data" 
type="calendar"    
label="Select a date" 
description="" 
format="%d-%m-%Y" /> 
```

我的问题是日历不显示弹出窗口来选择数据。在编辑器中，我需要在字段下更改以不使用编辑器，默认只有 textarea。我尝试添加这个但不起作用。editor="desired" 当我使用 editor="none" 它工作，我只有 textarea 没有编辑器的选项更改。

# javascript - 如何访问我的 qt 代码中的 javascript 变量值

> ID：15741075
> 
> 赞同：1
> 
> 时间：2013-04-01T09:42:55.000
> 
> 标签：javascript, qt

我是Qt的初学者。有人会告诉我如何在 qt-code 中使用 javascript 变量值吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:22:03.843

这是一些应该回答您的问题的文档：

[http://qt-project.org/doc/qt-4.8/qwebframe.html#evaluateJavaScript](http://qt-project.org/doc/qt-4.8/qwebframe.html#evaluateJavaScript)

[http://qt-project.org/doc/qt-4.8/qtwebkit-bridge.html](http://qt-project.org/doc/qt-4.8/qtwebkit-bridge.html)

[http://qt-project.org/doc/qt-4.8/qwebframe.html#addToJavaScriptWindowObject](http://qt-project.org/doc/qt-4.8/qwebframe.html#addToJavaScriptWindowObject)

[http://qt-project.org/doc/qt-4.8/qwebframe.html#javaScriptWindowObjectCleared](http://qt-project.org/doc/qt-4.8/qwebframe.html#javaScriptWindowObjectCleared)

仅通过查看文档，您可能还需要调用`addToJavaScriptWindowObject()`，甚至可能需要确保在 javascript 完成时对象不会被清除。

希望有帮助。

# jms - WAS 7 中的 JMS MQ 连接池

> ID：15741086
> 
> 赞同：2
> 
> 时间：2013-04-01T09:43:29.433
> 
> 标签：jms, connection-pooling, ibm-mq, websphere-7

我们使用 JMS 通过 WebSphere Application Server [V7] 与 WebSphere MQ [V7] 进行通信。应用程序很重，负载约为 4-5 tps。我们使用连接工厂以及发送者和接收队列来实现同步 MQ 操作。目前，连接工厂已被定义为静态，并且队列是通过 JNDI 查找每个请求获得的。

**从性能的角度来看，我们是否需要显式地实现一个连接池，例如 Apache commons pool，或者 WAS 提供的连接池就足够了吗？**

JMS 设置已根据预期负载在 WAS 中进行配置。

# linq - 在 asp.net 2.0 中找不到类型或命名空间名称“var”

> ID：15741088
> 
> 赞同：1
> 
> 时间：2013-04-01T09:43:36.677
> 
> 标签：linq, visual-studio-2005, asp.net-2.0

我正在使用 Asp.Net 2.0。我正在尝试构建一个关于如何[使用 Google Maps API 构建商店定位器 ASP.NET 应用程序](http://www.4guysfromrolla.com/articles/051910-1.aspx)的应用程序。当我尝试在应用程序中使用“var”时，它会给出错误“类型或命名空间名称 'var' 找不到（您是否缺少 using 指令或程序集引用？）”。

我已经下载了上面的文章并且在vs2005中可以正常工作。我想知道为什么错误只出现在我的项目中？？

我在应用程序中使用的命名空间

```
using System;
using System.Collections.Generic;
using System.Web;
using System.Xml.Linq;
using System.Linq; 
```

这是我用过的课程

```
public static XElement GetGeocodingSearchResults(string address)
{
    // Use the Google Geocoding service to get information about the user-entered address
    // See http://code.google.com/apis/maps/documentation/geocoding/index.html for more info...
    var url = String.Format("http://maps.google.com/maps/api/geocode/xml?address={0}&sensor=false", HttpContext.Current.Server.UrlEncode(address));

    // Load the XML into an XElement object (whee, LINQ to XML!)
    var results = XElement.Load(url);

    // Check the status
    var status = results.Element("status").Value;
    if (status != "OK" && status != "ZERO_RESULTS")
        // Whoops, something else was wrong with the request...
        throw new ApplicationException("There was an error with Google's Geocoding Service: " + status);

    return results;
} 
```

我得到的错误如下

```
Error 1 : The type or namespace name 'var' could not be found (are you missing a using directive or an assembly reference?)

Error 2 : The best overloaded method match for 'System.Xml.Linq.XElement.Load(string)' has some invalid arguments

Error 3:cannot convert from 'var' to 'string' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:48:09.777

[var](http://msdn.microsoft.com/en-us/library/bb383973%28v=vs.90%29.aspx)关键字在 .NET 2.0 (C# 2.0) 中不可用。

它仅在 C# 3.0 及更高版本中可用。这是 C# 语言功能，在旧版本中不可用。

# java - 向导组件 PrimeFaces 更新其他变量

> ID：15741090
> 
> 赞同：2
> 
> 时间：2013-04-01T09:44:00.147
> 
> 标签：java, jsf, primefaces, updates, wizard

我有两个标签。使用向导组件，当我按下“下一步”按钮（从第一个选项卡）时，我需要填充一个列表（使用 SelectItem 对象），然后在第二个选项卡的 SelectOneMenu 标记中显示这些 SelectItems。我很快就在第一个选项卡上完成了输入数据，然后按“下一步”按钮，这个 SelectOneMenu 标记（在第二个选项卡上）没有任何内容。

**基本上，我需要更新下一个选项卡以及当前选项卡的处理。无论如何要这样做？**

提前致谢。

![在此处输入图像描述](https://i.stack.imgur.com/JWNzs.png)![在此处输入图像描述](https://i.stack.imgur.com/xarci.png)

这是我的代码：

```
<p:wizard widgetVar="wiz" showNavBar="true" flowListener="#{detentionForm.onFlowProcess}">
                <p:tab id="typeOfLeader" title="Leader Selection">
                    <p:panel header="Leader Selection">
                        <p:messages showSummary="true" showDetail="false"/>
                        <p:panelGrid columns="2">
                            #{msgs.typeOfLeaderPunishment}
                            <p:selectOneMenu value="#{detentionForm.typeOfLeaderSelectedID}" style="width:400px" panelStyle="width:150px" effect="fade">
                                <f:selectItems value="#{detentionForm.teacherTypes}" var="type" itemLabel="#{type.label}" itemValue="#{type.value}" />
                            </p:selectOneMenu>
                        </p:panelGrid> 
                    </p:panel>
                </p:tab>
                <p:tab id="typeOfPunishment" title="Punishment Type">
                    <p:panel header="Type of Punishment">
                        <p:panelGrid columns="2">
                            #{msgs.typeOfDetention}
                            <p:selectOneMenu value="#{detentionForm.typeOfPunishment}" style="width:400px" panelStyle="width:150px" effect="fade" >
                                <f:selectItems value="#{detentionForm.detentionTypes}" var="type" itemLabel="#{type.label}" itemValue="#{type.value}" />
                            </p:selectOneMenu> 
                        </p:panelGrid>

                    </p:panel>
                </p:tab>

            </p:wizard> 
```

`#{detentionForm.detentionTypes}`是一个数组列表，一旦我按下“下一步”按钮到第二个选项卡，就需要填充它。

这是我的支持bean：

```
@ViewScoped
@Named("detentionForm")
public class DetentionFormBean implements Serializable{
    @Resource(name="jdbc/DetentionCentre")
    private DataSource ds;

    private Details details = (Details) FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("userDetails");

    private String typeOfPunishment;
    private String typeOfLeader = details.getTypeOfLeader(); //Can change if user is House Leader. Eg. They can become a teacher when making a punishment
    private int typeOfLeaderID; //ID in the database of the teacher's type of leadership
    private int typeOfLeaderSelectedID = 1; //Set default to teacher as House leader can be teacher and normal teacher will be a teacher!
    private ArrayList<SelectItem> detentionTypes = new ArrayList<SelectItem>(); //SelectItem objects that shows what punishments each teacher can do
    private ArrayList<SelectItem> teacherTypes = new ArrayList<SelectItem>(); //SelectItem objects that shows what type of leadership a teacher can be (Teacher or House Leader)

    //gets all the data necessary from the database to show on the page
    @PostConstruct
    public void initialize(){
        this.setTypeOfLeaderID(details.getUserName()); //gets the ID from the database to find out the default type of leadership
        this.findTeacherTypes(this.typeOfLeader); 
    } 

    public String onFlowProcess(FlowEvent event) {  //change later for backing as well >>>>>>>>>>>>>>
            String stepToGo = event.getNewStep();
            if(stepToGo.equals("typeOfPunishment")){
                this.findDetentionTypes();

            }
        return stepToGo;

    }

    //populates teacherType Arraylist depending the user's teacher type. House Leader can be a Teacher or a House Leader.
    private void findTeacherTypes(String type) {
        if(type.equals("House Leadership Team")){
            this.teacherTypes.add(new SelectItem(Integer.toString(this.typeOfLeaderID), type)); //House leader is 2
            this.teacherTypes.add(new SelectItem(Integer.toString(this.typeOfLeaderID - 1), "Teacher" )); //Teacher is 1
        }else{ //type is Teacher
            this.teacherTypes.add(new SelectItem(Integer.toString(this.typeOfLeaderID), type)); //Teacher is 1
        }
    }

    //populates detentiontypes depending on type of leader
    private void findDetentionTypes() {
        System.out.println(">>>>Inside findDetentionTypes()!!!");
        PreparedStatement ps;
        Connection con;
        String sqlInitialData = "SELECT r.punishment_type, p.type FROM detentioncentredb.tbl_teacher_roles_allowed_punishments r, detentioncentredb.tbl_punishment_types p WHERE r.teacher_roles = ? AND p.ID = r.punishment_type";
        ResultSet rs;

        try {
            con = ds.getConnection();
            ps = con.prepareStatement(sqlInitialData);
            ps.setString(1, Integer.toString(this.typeOfLeaderSelectedID)); 
            rs = ps.executeQuery();
            while(rs.next()){
                SelectItem s = new SelectItem(rs.getString("punishment_type"), rs.getString("type"));
                this.detentionTypes.add(s);
            }
            rs.close();
            ps.close();
            con.close();

        } catch (SQLException ex) {
            Logger.getLogger(DetentionFormBean.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    //getter and setter methods

    public String getTypeOfPunishment() {
        return typeOfPunishment;
    }

    public void setTypeOfPunishment(String typeOfPunishment) {
        this.typeOfPunishment = typeOfPunishment;
    }

    public String getTypeOfLeader() {
        return typeOfLeader;
    }

    public ArrayList<SelectItem> getDetentionTypes() {
        return detentionTypes;
    }

    public ArrayList<SelectItem> getTeacherTypes() {
        return teacherTypes;
    }

    public int getTypeOfLeaderID() {
        return typeOfLeaderID;
    }

    //gets the typeOfLeader the current user is from the database. This retrieves the ID of the teacher's type of leadership. NOT WHAT THE TEACHER SELECTED.
    private void setTypeOfLeaderID(int userName){
        PreparedStatement ps;
        Connection con;
        String sqlTypeOfLeaderID = "SELECT TypeOfLeader FROM detentioncentredb.tbl_teachers WHERE RegNumber = ?";
        ResultSet rs;
        try {
            con = ds.getConnection();
            ps = con.prepareStatement(sqlTypeOfLeaderID);
            ps.setInt(1, userName);
            rs = ps.executeQuery();
            while(rs.next()){
                this.typeOfLeaderID = rs.getInt("TypeOfLeader");
            }
            rs.close();
            ps.close();
            con.close();
        } catch (SQLException ex) {
            Logger.getLogger(DetentionFormBean.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public int getTypeOfLeaderSelectedID() {
        return typeOfLeaderSelectedID;
    }

    public void setTypeOfLeaderSelectedID(int typeOfLeaderSelectedID) {
        this.typeOfLeaderSelectedID = typeOfLeaderSelectedID;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:02:49.137

您可以使用**ajax**通知服务器端您正在步入向导。来自[PF 文档](http://primefaces.org/documentation.html)：

如果您想在向导尝试返回或前进时在服务器端收到通知，请定义一个**flowListener**。

```
<p:wizard flowListener="#{userWizard.handleFlow}">
...
</p:wizard>

public String handleFlow(FlowEvent event) {
    String currentStepId = event.getCurrentStep();
    String stepToGo = event.getNextStep();
    if(skip)
        return "confirm";
    else
        return event.getNextStep();
    } 
```

在您的情况下，您需要根据用户在向导第一步中选择的内容在到达`detentionTypes`时加载数组：`stepToGo``typeOfPunishment`

```
public String handleFlow(FlowEvent event) {
    String stepToGo = event.getNextStep();
    if(stepToGo.equals("typeOfPunishment")){
        detentionTypes = service.loadDetentionTypes(this.TypeOfLeaderSelectedID);
    }
} 
```

# c# - 在构造函数中覆盖属性或计算属性

> ID：15741092
> 
> 赞同：4
> 
> 时间：2013-04-01T09:44:03.017
> 
> 标签：c#, .net, inheritance, polymorphism, virtual

例如，我有基类，我需要一个将在派生类中计算的属性。我有两个变体（`SomeProperty1`和`SomeProperty2`）：

```
public class BaseClass
{
    public int SomeProperty1{get;set;}
    public override int SomeProperty2{get;set;}
}

public class DerivedClass : BaseClass
{
    public DerivedClass()
    {
       SomeProperty1 = 100;
    }
    public override int SomeProperty2
    {
        get
        {
            return 100;
        }
    }
} 
```

问题是什么是最好的方法，`SomeProperty1`或者`SomeProperty2`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T09:50:34.000

向基类添加一个受保护的抽象方法，称为`CalcSomeProperty()`.

然后根据`CalcSomeProperty()`. 这将强制派生类实现它。

例如：

```
public abstract class BaseClass
{
    public int SomeProperty
    {
        get
        {
            return CalcSomeProperty();
        }
    }

    protected abstract int CalcSomeProperty();
} 
```

或者，您可以使属性本身抽象：

```
public abstract class BaseClass
{
    public abstract int SomeProperty { get; }
} 
```

无论哪种情况，您都在强制派生类实现属性计算。

将计算分离为受保护的方法（而不是使用更简单的抽象属性）的一个优点是，如果计算速度很慢，您可以在具体属性实现中执行缓存：

```
public abstract class BaseClass
{
    protected BaseClass()
    {
        _someProperty = new Lazy<int>(CalcSomeProperty);
    }

    public int SomeProperty
    {
        get
        {
            return _someProperty.Value;
        }
    }

    protected abstract int CalcSomeProperty();

    private readonly Lazy<int> _someProperty;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:51:54.407

这在很大程度上取决于计算的类型。如果它需要很长时间并且在对象的生命周期内没有改变，那么通过将它添加到属性中会浪费计算时间。所以在那种情况下，我肯定会保持你的代码干净并在你的构造函数中初始化属性。

如果它是一个常量值，将它保存在构造函数中会更清楚。您的构造函数反映了您的对象的外观。

显然，如果计算是动态的，则您需要在属性中包含该部分。

注意：如果你有一个虚拟属性并且你在你的构造函数上初始化它，那么如果你的类不是，你会引入一个警告`sealed`。这背后的“危险”在[这个线程](https://stackoverflow.com/questions/119506/virtual-member-call-in-a-constructor)中得到了比我更好的解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T09:54:35.937

选项1主要用于用例，当属性应该初始化一次时，初始化很容易和微不足道。

选项 2 允许控制初始化流程（例如，进行延迟初始化）。反过来，初始化流程取决于属性性质。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T09:57:26.863

如果您真的是要在子类中*覆盖*，那么也许您希望该属性是*virtual*：

```
public virtual int SomeProperty2{get;set;} 
```

虽然我最好在基类中声明一个公共属性和一个可以在子类中覆盖的受保护虚拟属性：

```
// base
protected virtual int SomePropertyInternal2
{
    get
    {
        return 10;
    }
}

public int SomeProperty2
{
    get
    {
        return SomePropertyInternal2;
    }

// child
protected override int SomePropertyInternal2
{
    return 100;
} 
```

在这种情况下，您将覆盖内部实现，而公共合同保持不变。

# wordpress - 如何在 24 小时内显示来自特定帖子类型的随机帖子然后刷新

> ID：15741095
> 
> 赞同：0
> 
> 时间：2013-04-01T09:44:09.717
> 
> 标签：wordpress

我什至不确定这是否可能，但我想知道是否有办法创建一个 Wordpress 查询，该查询将在早上 00:00 选择一个帖子并在 24 小时内显示该帖子。第二天早上 00:00 时，它应该会刷新并在另外 24 小时内显示另一个随机帖子。这可能吗，如果可以，怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:54:09.500

您可以使用[WordPress Transients API](http://codex.wordpress.org/Transients_API)和[WP_Query 类](https://codex.wordpress.org/Class_Reference/WP_Query)来完成。

```
$random_id = '';
if ( false === ( $random_id = get_transient( 'some_random_post_id' ) ) ) {
     // The transient expired, so create another
     $args = array(
      'posts_per_page' => 1, #return one value
      'orderby'        => 'rand',
      'post_type'      => 'yourposttype'
        );
     $single_post_query = new WP_Query( $args );
     while( $single_post_query->have_posts() ){
         $single_post_query->the_post();
         $random_id = get_the_ID(); 
         set_transient('some_random_post_id', $random_id, 60*60*24); # save the ID returned
     }

}
//do your stuff with $random_id as the post id. 
```

请注意，当有人访问您的网站时，WordPress 会更新其瞬态，因此可能不是 24 小时。此外，如果您使用 WordPress 3.5 或更高版本，您可以使用常量`DAY_IN_SECONDS`而不是`60*60*24`.

# c++ - 将小数取整数次方时保持准确性

> ID：15741101
> 
> 赞同：0
> 
> 时间：2013-04-01T09:44:28.427
> 
> 标签：c++, floating-accuracy, gmp, arbitrary-precision

我的代码如下（为了阅读方便，我做了简化，功能不足见谅）：

```
#include <stdio.h> 
#include <string.h>
#include <math.h>
#include <iostream>
#include <iomanip>
#include <fstream>
#include <time.h>
#include <stdlib.h>
#include <sstream>
#include <gmpxx.h>
using namespace std;
#define PI 3.14159265358979323846

int main()
{

  int a,b,c,d,f,i,j,k,m,n,s,t,Success,Fails;
  double p,theta,phi,Time,Averagetime,Energy,energy,Distance,Length,DotProdForce,
         Forcemagnitude,ForceMagnitude[201],Force[201][4],E[1000001],En[501],Epsilon[4],Ep,
         x[201][4],new_x[201][4],y[201][4],A[201],alpha[201][201],degree,bestalpha[501];

  clock_t t1,t2;
  t1=clock();

t=1;

/* Set parameter t, the power in the energy function */

while(t<1001){

n=2;

/*set parameter n, the number of points going onto the sphere */

while(n<51){

cout << "N=" << n << "\n";

  b=0;
  Time=0.0;

  /* Set parameter b, just a loop to distribute points many times (100) */

  while(b<100){

    clock_t t3,t4;
    t3=clock();

    if(n>200){
      cout << n << " is too many points for me :-( \n";
      exit(0);
    }

    srand((unsigned)time(0));  

    for (i=1;i<=n;i++){
      x[i][1]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;
      x[i][2]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;
      x[i][3]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;

      Length=sqrt(pow(x[i][1],2)+pow(x[i][2],2)+pow(x[i][3],2));

      for (k=1;k<=3;k++){
        x[i][k]=x[i][k]/Length;
      }
    }

    /* Points have now been distributed randomly and normalised so they sit on 
       unit sphere */

    Energy=0.0;

    for(i=1;i<=n;i++){
      for(j=i+1;j<=n;j++){
        Distance=sqrt(pow(x[i][1]-x[j][1],2)+pow(x[i][2]-x[j][2],2)
                    +pow(x[i][3]-x[j][3],2));

        Energy=Energy+1.0/pow(Distance,t);
      }
    }

    /*Energy has now been calculated for the system of points as a summation 
      function this is where accuracy is lost */

    for(i=1;i<=n;i++){
      y[i][1]=x[i][1];
      y[i][2]=x[i][2];
      y[i][3]=x[i][3];
    }

    m=100;

    if (m>100){
      cout << "The m="<< m << " loop is inefficient...lessen m \n";
      exit(0);
    }

    a=1;

    /* Distributing points m-1 times and choosing the best random distribution */

    while(a<m){

      for (i=1;i<=n;i++){
        x[i][1]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;
        x[i][2]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;
        x[i][3]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;

        Length=sqrt(pow(x[i][1],2)+pow(x[i][2],2)+pow(x[i][3],2));

        for (k=1;k<=3;k++){
          x[i][k]=x[i][k]/Length;
        }
      }

      energy=0.0;

      for(i=1;i<=n;i++){
        for(j=i+1;j<=n;j++){
          Distance=sqrt(pow(x[i][1]-x[j][1],2)+pow(x[i][2]-x[j][2],2)
                        +pow(x[i][3]-x[j][3],2));

          energy=energy+1.0/pow(Distance,t);
        }
      }

      if(energy<Energy)
        for(i=1;i<=n;i++){
          for(j=1;j<=3;j++){
            Energy=energy;
            y[i][j]=x[i][j];
          }
        }
      else
        for(i=1;i<=n;i++){
          for(j=1;j<=3;j++){
            energy=Energy;
            x[i][j]=y[i][j];
          }
        }

      a=a+1;
    }

    /* End of random distribution loop, the loop for a<m */

    En[b]=Energy;

    b=b+1;

    t4=clock();
    float diff ((float)t4-(float)t3);
    float seconds = diff / CLOCKS_PER_SEC;

    Time = Time + seconds;

  } 

  /* End of looping the entire body of the program, used to get an average reading */

  t2=clock();
    float diff ((float)t2-(float)t1);
    float seconds = diff / CLOCKS_PER_SEC;

  n=n+1;
  }

  /* End of n loop, here n increases so I get outputs for n from 2 to 50 for each t */

    if(t==1)
    t=2;
    else if(t==2)
    t=5;
    else if(t==5)
    t=10;
    else if(t==10)
    t=25;
    else if(t==25)
    t=50;
    else if(t==50)
    t=100;  
    else if(t==100)
    t=250;
    else if(t==250)
    t=500;
    else if(t==500)
    t=1000;
    else
    t=t+1;
}

/* End of t loop, t changes to previously decided values to estimate Tammes's problem
   would like t to be as large as possible but t>200 makes energy calculations lose 
   accuracy */

  return 0;

} /* End of main function and therefore program. In original as seen by following link 
     below the code will use gradient flow algorithm before end of b, n and t loops to 
     minimise the energy function and therefore get accurate solutions. */ 
```

每次我运行 t>200 的代码时，能量输出都会失去准确性（因为它被提高到高功率），我被告知我需要使用任意精度整数并获取 GMP 库。我已经做到了这一点，并设法让代码在我的范围内与 GMP 库一起运行，但我并没有真正得到我应该改变的东西。

我是否要更改 t 或能量（和能量）或距离或所有三个（/四个）？我真的不明白我应该改变什么，但我现在正在阅读如何从手册中做到这一点。

注意：我最初的问题是在这里，但我认为确实已经回答了，这需要一个新的问题。当这确实有效时，我将在那里接受答案：[Losing accuracy for large integers (pow?)](https://stackoverflow.com/questions/15735208/losing-accuracy-for-large-integers-pow?noredirect=1#comment22356654_15735208)

我已经更改了我的代码（如下所示），但我只是在初始化 En[b] 后立即提出分段错误 11。如果评论能更深入地说明我要做什么，我将不胜感激。感谢到目前为止的所有帮助，A.

```
#include <stdio.h> 
#include <string.h>
#include <math.h>
#include <iostream>
#include <iomanip>
#include <fstream>
#include <time.h>
#include <stdlib.h>
#include <sstream>
#include <gmpxx.h>
using namespace std;
#define PI 3.14159265358979323846

int main()
{

  int a,b,c,d,f,i,j,k,m,n,s,Success,Fails;
  double p,theta,phi,Time,Averagetime,Distance,Length,DotProdForce,
         Forcemagnitude,ForceMagnitude[201],Force[201][4],E[1000001],Epsilon[4],Ep,
         x[201][4],new_x[201][4],y[201][4],A[201],alpha[201][201],degree,bestalpha[501];
  unsigned long int t;

  mpf_t Energy,energy,Power,D,En[501];

  mpf_set_default_prec(1024);

  mpf_init(Power);
  mpf_init(D);

  clock_t t1,t2;
  t1=clock();

  t=1000;

/* Set parameter t, the power in the energy function */

while(t<1001){

n=2;

/*set parameter n, the number of points going onto the sphere */

while(n<51){

cout << "N=" << n << "\n";

  b=0;
  Time=0.0;

  /* Set parameter b, just a loop to distribute points many times (100) */

  while(b<101){

    clock_t t3,t4;
    t3=clock();

    if(n>200){
      cout << n << " is too many points for me :-( \n";
      exit(0);
    }

    srand((unsigned)time(0));  

    for (i=1;i<=n;i++){
      x[i][1]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;
      x[i][2]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;
      x[i][3]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;

      Length=sqrt(pow(x[i][1],2)+pow(x[i][2],2)+pow(x[i][3],2));

      for (k=1;k<=3;k++){
        x[i][k]=x[i][k]/Length;
      }
    }

    for(i=1;i<=n;i++){
      for(j=1;j<=3;j++){
        cout << "x[" << i << "][" << j << "]=" << x[i][j] << "\n";
      }
    }

    /* Points distributed randomly and normalised so they sit on unit sphere */

    mpf_init (Energy);

    for(i=1;i<=n;i++){
      for(j=i+1;j<=n;j++){
        Distance=sqrt(pow(x[i][1]-x[j][1],2)+pow(x[i][2]-x[j][2],2)
                     +pow(x[i][3]-x[j][3],2));

        mpf_set_d(D,Distance);

        mpf_pow_ui(Power,D,t);      
        mpf_ui_div(Power,1.0,Power);
        mpf_add(Energy,Energy,Power);

      }
    }

    cout << "Energy=" << Energy << "\n";

    /*Energy calculated as a summation function this is where accuracy is lost */

    for(i=1;i<=n;i++){
      y[i][1]=x[i][1];
      y[i][2]=x[i][2];
      y[i][3]=x[i][3];
    }

    m=100;

    if (m>100){
      cout << "The m="<< m << " loop is inefficient...lessen m \n";
      exit(0);
    }

    a=1;

    /* Distributing points m-1 times and choosing the best random distribution */

    while(a<m){

      for (i=1;i<=n;i++){
        x[i][1]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;
        x[i][2]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;
        x[i][3]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;

        Length=sqrt(pow(x[i][1],2)+pow(x[i][2],2)+pow(x[i][3],2));

        for (k=1;k<=3;k++){
          x[i][k]=x[i][k]/Length;
        }
      }

      for(i=1;i<=n;i++){
        for(j=1;j<=3;j++){
          cout << "x[" << i << "][" << j << "]=" << x[i][j] << "\n";
        }
      }

      mpf_init(energy);

      for(i=1;i<=n;i++){
        for(j=i+1;j<=n;j++){
          Distance=sqrt(pow(x[i][1]-x[j][1],2)+pow(x[i][2]-x[j][2],2)
                        +pow(x[i][3]-x[j][3],2));

        mpf_set_d(D,Distance);

        mpf_pow_ui(Power,D,t);      
        mpf_ui_div(Power,1.0,Power);
        mpf_add(energy,energy,Power);
        }
      }

      cout << "energy=" << energy << "\n";

      if(energy<Energy)
        for(i=1;i<=n;i++){
          for(j=1;j<=3;j++){
            mpf_set(Energy,energy);
            y[i][j]=x[i][j];
          }
        }
      else
        for(i=1;i<=n;i++){
          for(j=1;j<=3;j++){
            mpf_set(energy,Energy);
            x[i][j]=y[i][j];
          }
        }

      a=a+1;
    }

    /* End of random distribution loop, the loop for a<m */

    cout << "Energy=" << Energy << "\n";

    mpf_init(En[b]);
    mpf_set(En[b],Energy);

    for(i=0;i<=b;i++){
      cout << "En[" << i << "]=" << En[i] << "\n";
    }

    b=b+1;

    t4=clock();
    float diff ((float)t4-(float)t3);
    float seconds = diff / CLOCKS_PER_SEC;

    Time = Time + seconds;

  } 

  /* End of looping the entire body of the program, used to get an average reading */

  t2=clock();
    float diff ((float)t2-(float)t1);
    float seconds = diff / CLOCKS_PER_SEC;

  n=n+1;
  }

  /* End of n loop, here n increases so I get outputs for n from 2 to 50 for each t */

    if(t==1)
    t=2;
    else if(t==2)
    t=5;
    else if(t==5)
    t=10;
    else if(t==10)
    t=25;
    else if(t==25)
    t=50;
    else if(t==50)
    t=100;  
    else if(t==100)
    t=250;
    else if(t==250)
    t=500;
    else if(t==500)
    t=1000;
    else
    t=1001;
}

/* End of t loop, t changes to previously decided values to estimate Tammes's problem
   would like t to be as large as possible but t>200 makes energy calculations lose 
   accuracy */

  return 0;

} /* End of main function and therefore program. In original as seen by following link 
     below the code will use gradient flow algorithm before end of b, n and t loops to 
     minimise the energy function and therefore get accurate solutions. */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:49:23.613

代码现在看起来像这样，对于那些将来显然你必须真正学习如何使用可以在这里找到的 GMP 库[http://gmplib.org](http://gmplib.org)，我遇到的大多数问题都被评论中所有那些乐于助人的人解决了，所以如果您遇到问题，请检查它们。谢谢。

```
#include <stdio.h> 
#include <string.h>
#include <math.h>
#include <iostream>
#include <iomanip>
#include <fstream>
#include <time.h>
#include <stdlib.h>
#include <sstream>
#include <gmpxx.h>
using namespace std;
#define PI 3.14159265358979323846

int main()
{

  int a,b,c,d,f,i,j,k,m,n,s,Success,Fails;
  double p,theta,phi,Time,Averagetime,Distance,Length,DotProdForce,
         Forcemagnitude,ForceMagnitude[201],Force[201][4],E[1000001],Epsilon[4],Ep,
         x[201][4],new_x[201][4],y[201][4],A[201],alpha[201][201],degree,bestalpha[501];
  unsigned long int t;

  mpf_t Energy,energy,Power,D,En[501];

  mpf_set_default_prec(1024);

  mpf_init(Power);
  mpf_init(D);

  clock_t t1,t2;
  t1=clock();

  t=1000;

/* Set parameter t, the power in the energy function */

while(t<1001){

n=2;

/*set parameter n, the number of points going onto the sphere */

while(n<3){

cout << "N=" << n << "\n";

  b=0;
  Time=0.0;

  /* Set parameter b, just a loop to distribute points many times (100) */

  while(b<2){

    clock_t t3,t4;
    t3=clock();

    if(n>200){
      cout << n << " is too many points for me :-( \n";
      exit(0);
    }

    srand((unsigned)time(0));  

    for (i=1;i<=n;i++){
      x[i][1]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;
      x[i][2]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;
      x[i][3]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;

      Length=sqrt(pow(x[i][1],2)+pow(x[i][2],2)+pow(x[i][3],2));

      for (k=1;k<=3;k++){
        x[i][k]=x[i][k]/Length;
      }
    }

    for(i=1;i<=n;i++){
      for(j=1;j<=3;j++){
        cout << "x[" << i << "][" << j << "]=" << x[i][j] << "\n";
      }
    }

    /* Points distributed randomly and normalised so they sit on unit sphere */

    mpf_init (Energy);

    for(i=1;i<=n;i++){
      for(j=i+1;j<=n;j++){
        Distance=sqrt(pow(x[i][1]-x[j][1],2)+pow(x[i][2]-x[j][2],2)
                     +pow(x[i][3]-x[j][3],2));

        mpf_set_d(D,Distance);

        mpf_pow_ui(Power,D,t);      
        mpf_ui_div(Power,1.0,Power);
        mpf_add(Energy,Energy,Power);

      }
    }

    cout << "Energy=" << Energy << "\n";

    /*Energy calculated as a summation function this is where accuracy is lost */

    for(i=1;i<=n;i++){
      y[i][1]=x[i][1];
      y[i][2]=x[i][2];
      y[i][3]=x[i][3];
    }

    m=100;

    if (m>100){
      cout << "The m="<< m << " loop is inefficient...lessen m \n";
      exit(0);
    }

    a=1;

    /* Distributing points m-1 times and choosing the best random distribution */

    while(a<m){

      for (i=1;i<=n;i++){
        x[i][1]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;
        x[i][2]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;
        x[i][3]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;

        Length=sqrt(pow(x[i][1],2)+pow(x[i][2],2)+pow(x[i][3],2));

        for (k=1;k<=3;k++){
          x[i][k]=x[i][k]/Length;
        }
      }

      for(i=1;i<=n;i++){
        for(j=1;j<=3;j++){
          cout << "x[" << i << "][" << j << "]=" << x[i][j] << "\n";
        }
      }

      mpf_init(energy);

      for(i=1;i<=n;i++){
        for(j=i+1;j<=n;j++){
          Distance=sqrt(pow(x[i][1]-x[j][1],2)+pow(x[i][2]-x[j][2],2)
                        +pow(x[i][3]-x[j][3],2));

        mpf_set_d(D,Distance);

        mpf_pow_ui(Power,D,t);      
        mpf_ui_div(Power,1.0,Power);
        mpf_add(energy,energy,Power);
        }
      }

      cout << "energy=" << energy << "\n";

      if(energy<Energy)
        for(i=1;i<=n;i++){
          for(j=1;j<=3;j++){
            mpf_set(Energy,energy);
            y[i][j]=x[i][j];
          }
        }
      else
        for(i=1;i<=n;i++){
          for(j=1;j<=3;j++){
            mpf_set(energy,Energy);
            x[i][j]=y[i][j];
          }
        }

      a=a+1;
    }

    /* End of random distribution loop, the loop for a<m */

    cout << "Energy=" << Energy << "\n";

    mpf_init(En[b]);

    mpf_set(En[b],Energy);

    for(i=0;i<=b;i++){
      cout << "En[" << i << "]=" << En[i] << "\n";
    }

        for(i=1;i<=n;i++){
      for(j=i+1;j<=n;j++){
        Distance=sqrt(pow(x[i][1]-x[j][1],2)+pow(x[i][2]-x[j][2],2)
                        +pow(x[i][3]-x[j][3],2));

        degree=(180/PI);

        alpha[i][j]=degree*acos((2.0-pow(Distance,2))/2.0);
      }
    }

    for(i=1;i<=n;i++){
      for(j=i+1;j<=n;j++){
        cout << "alpha[" << i << "][" << j << "]=" << alpha[i][j] << "\n";
      }
    }

    for(i=1;i<=n-1;i++){
      for(j=i+1;j<=n-1;j++){
        if(alpha[i][j]>alpha[i][j+1])
          alpha[i][j]=alpha[i][j+1];
        else
          alpha[i][j+1]=alpha[i][j];
      }
    }

    for(i=1;i<=n;i++){
      for(j=i+1;j<=n;j++){
        cout << "alpha[" << i << "][" << j << "]=" << alpha[i][j] << "\n";
      }
    }

    for(i=1;i<=n-2;i++){
      if(alpha[i][n]>alpha[i+1][n])
        alpha[i][n]=alpha[i+1][n];
      else
        alpha[i+1][n]=alpha[i][n];
    }

    for(i=1;i<=n;i++){
      for(j=i+1;j<=n;j++){
        cout << "alpha[" << i << "][" << j << "]=" << alpha[i][j] << "\n";
      }
    }

    bestalpha[b]=alpha[n-1][n];

    for(i=1;i<=b;i++){
      cout << "Best Angle[" << i << "]: " << bestalpha[b] << "\n"; 
    }

    b=b+1;

    t4=clock();
    float diff ((float)t4-(float)t3);
    float seconds = diff / CLOCKS_PER_SEC;

    Time = Time + seconds;

  } 

  /* End of looping the entire body of the program, used to get an average reading */

  t2=clock();
    float diff ((float)t2-(float)t1);
    float seconds = diff / CLOCKS_PER_SEC;

  n=n+1;
  }

  /* End of n loop, here n increases so I get outputs for n from 2 to 50 for each t */

    if(t==1)
    t=2;
    else if(t==2)
    t=5;
    else if(t==5)
    t=10;
    else if(t==10)
    t=25;
    else if(t==25)
    t=50;
    else if(t==50)
    t=100;  
    else if(t==100)
    t=250;
    else if(t==250)
    t=500;
    else if(t==500)
    t=1000;
    else
    t=1001;
}

/* End of t loop, t changes to previously decided values to estimate Tammes's problem
   would like t to be as large as possible but t>200 makes energy calculations lose 
   accuracy */

  return 0;

} /* End of main function and therefore program. In original as seen by following link 
     below the code will use gradient flow algorithm before end of b, n and t loops to 
     minimise the energy function and therefore get accurate solutions. */ 
```

# java - 如何使用 JavaScript 将路径注入 type="file" 字段

> ID：15741102
> 
> 赞同：0
> 
> 时间：2013-04-01T09:44:28.553
> 
> 标签：java, javascript, webdriver

我在将文件路径发送到 type="file" 字段（文件上传场景）时遇到问题，该字段处理有点奇怪。

我正在使用带有 Java 的 webDriver，并且不希望使用诸如 autoIT 之类的 3rd 方工具。

请注意，尝试 element.sendKeys 不起作用，因为默认情况下此字段会打开一个操作系统浏览到文件类型的窗口，该窗口无法由 webDriver 处理。

您可以在下面看到它的外观：

```
<input type="file" size="40" name="filename"> 
```

这不会进一步扩展并代表字段 + 浏览按钮！

我发现这如何适用于上述场景（没有 sendKeys 和 autoIT）的唯一解决方案是通过 JavaScript 注入，但我不知道该怎么做。

谢谢，

薇薇安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:36:10.663

感谢所有的评论家伙！

解决方案确实是 sendKeys，但只有在使用 firepath 生成人类历史上最迟钝的 xpath 之后。

请注意，我之前的尝试不起作用，因为之前使用的 xpath`"//input..."`虽然有效，但将键发送到 Browse 按钮​​，xpath-wise 是与字段相同的元素（这是什么巫术？）。

所以，是的，对于通过 webDriver 文件上传表单也有问题的每个人 - 获得延迟的 xpath 和 element.sendKeys。

干杯!

# android - 在 onStop() 状态下闲置后，系统会杀死我的 android 应用程序。如何避免或发现这种情况？

> ID：15741104
> 
> 赞同：0
> 
> 时间：2013-04-01T09:44:31.083
> 
> 标签：android, android-activity, android-lifecycle

我有一个应用程序可以从远程服务器或它自己的缓存目录播放音频和视频文件。当我使用“home”或“back”按钮最小化我的应用程序时，它的状态会更改为 onStop()。然后，在一些空闲（20-50 分钟左右）之后，活动管理器向活动发送“不再需要”消息并关闭它。

在这种情况下，根据[活动生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)，应用程序跳转到 onCreate（图表上从 onStop() 左侧的分支）。当它发生时，我的 Activity 的表示不正确 - 带有曲目列表的片段开始加载到现有片段之上，UI 变得不可用，解决这种情况的唯一方法是完全重启应用程序。

我想有两种方法可以解决这个问题：

1) 让系统不要杀死我的应用程序（可能是不正确的，因为这种做法违反了Android中正常的应用程序生命周期并加速了电池放电）。

2）检测操作系统杀死我的应用程序并清理资源以让操作系统正确创建新活动的情况。

我认为第二种变体更可取。

有一些想法如何实施吗？有可能检测到 Android 会杀死我的应用程序并对这个动作做出反应吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T08:14:21.353

1.  如果您的应用程序创建了一个在空闲状态下什么都不做的服务，它不会消耗额外的电池，并且会固定您的进程（您还应该放置通知以使您的声明更强大）。但是无论您做什么，系统都可能在资源不足时破坏您的应用程序。请注意，您可以保证收到的唯一回调是`onPause()`，即使这样，如果需要太多时间才能完成，系统也会感到非常不安。如果系统绝望，所有其他调用（如 onStop() 甚至终结器）可能会被跳过。

2.  因此，您*还*必须遵循第二个策略 - 恕我直言，西蒙的评论实际上意味着 - 并`onStart()`正确处理`onRestart()`。

# css - 如何为 LESS CSS 应用 IE 修复

> ID：15741106
> 
> 赞同：-3
> 
> 时间：2013-04-01T09:44:34.443
> 
> 标签：css, internet-explorer, less

我的页面代码是：

```
<!doctype html>
<!--[if lt IE 7 ]><html class="no-js ie6" lang="en"><![endif]-->
<!--[if IE 7 ]><html class="no-js ie7" lang="en"><![endif]-->
<!--[if IE 8 ]><html class="no-js ie8" lang="en"><![endif]-->
<!--[if IE 9 ]><html class="no-js ie9" lang="en"><![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]--><head>
<meta charset="utf-8">

<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

<link rel="shortcut icon" href="favicon.ico">

<title>BLUE MONDAY-HOMEPAGE</title>

<!--Default style sheet-->
<link rel="stylesheet/less" href="css/blue.less" media="screen" type="text/css"      title="defaultBlue">
<script src="js/less-1.0.21.min.js"></script> 
```

现在实际的问题是：

```
/*IE hack */
.ie8 .headerPhone
{ width:200px; 
} 
```

以上 CSS hack 对 IE8 工作正常，但没有：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

我在标题中使用的这个元标记。一旦我再次放置那个元标记，这个黑客就会停止工作。

有什么解决方案可以让这两件事一起正常工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:15:03.627

LESS 被编译成 CSS，所以你所要做的就是确保编译后的 CSS 可以在 Internet Exploder 中工作。

如果您使用的是[特定于 ie 的类](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/)，那么您可以轻松地创建以 IE 为目标的 mixin，例如：

```
.inline-block() {
    display: inline-block;
    .lt-ie8 & {
        display: inline;
        zoom: 1;
    }
} 
```

# spring - 在tomcat 7.0 + spring MVC中使用Tomcat manager，Webapp reload给apachelifecycle异常

> ID：15741113
> 
> 赞同：0
> 
> 时间：2013-04-01T09:44:54.820
> 
> 标签：spring, exception, tomcat, spring-mvc, reload

在 tomcat 7.0 + sping MVC 中使用 Tomcat 管理器，Webapp reload 给 apachelifecycle 异常。一切正常启动，正常启动时工作正常。在启动重新加载 webapp 后，我们使用 tomcat 管理器。在 tomcat 管理器中，单击重新加载按钮后，它会显示重新加载成功（这会启用开始按钮）。单击 tomcat 中的开始按钮后，它会引发 apachelifecyle 异常。请帮忙...

> 1902) 在 org.apache.catalina.loader.WebappLoader.stopInternal(WebappLoader.java:661) 在 org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232) ... 26 更多 2013-03-27 01:13:39,155 [http-bio-443-exec-24] INFO LifecycleBase - 在 stop() 已被调用后，组件 [org.apache.catalina.deploy.NamingResources@2d204c14] 上调用了 stop() 方法。第二次调用将被忽略。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:49:30.167

这个组件是什么？

```
The stop() method was called on component [org.apache.catalina.deploy.NamingResources@2d204c14] 
```

我会试着弄清楚。也许 JMX 或启用进一步的日志记录或调试 Tomcat。

# ios - 在 plist 文件中存储值时出错

> ID：15741115
> 
> 赞同：0
> 
> 时间：2013-04-01T09:44:56.557
> 
> 标签：ios, objective-c, iphone, cocoa-touch, plist

我有一个步进器，在更改其值期间，我需要将值存储在 plist 中。

因此，根据 saveAppPlist 方法，我需要将 NSMutableDictionary 与更改的文件一起传递 - > dictData

```
NSData *plistData = [NSPropertyListSerialization dataFromPropertyList:dictData format:NSPropertyListXMLFormat_v1_0 errorDescription:&error];
if(plistData)
{
    [plistData writeToFile:plistPath atomically:YES];
} 
```

这是步进器的方法：

```
-(void)changeItemQuantityAtRow:(int)row
                       toValue:(double)value
{
    NSMutableDictionary *item = [[items objectAtIndex:row] mutableCopy];
    [item setObject:[NSNumber numberWithDouble:value] forKey:@"Quantity"];
    [items setObject:item atIndexedSubscript:row];
    NSLog(@"%@", items);
    NSMutableDictionary *plistDict = [NSDictionary dictionaryWithObjects:items forKeys:[NSArray arrayWithObjects:@"Name", @"Price", @"Quantity", nil]];
    NSLog(@"%@", plistDict);
    [self saveAppPlist:plistDict];
} 
```

plist 看起来像这样（这只是 4 个项目之一）：

```
<dict>
    <key>Items</key>
    <array>
        <dict>
            <key>Name</key>
            <string>The zero item</string>
            <key>Price</key>
            <integer>133</integer>
            <key>Quantity</key>
            <integer>17</integer>
        </dict> 
```

步进器正在更改项目的数量。但是当我尝试更改数量的值时出现这样的错误：

```
'NSInvalidArgumentException', reason: '*** -[NSDictionary initWithObjects:forKeys:]: count of objects (4) differs from count of keys (3)' 
```

我了解错误的根源，但不知道如何解决此问题。谁能帮我？还有一个 - 每次点击步进器后存储值可能不太好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:02:04.927

忘记要存储数组，将对象视为`id`实例。由于您想`id items`用密钥存储，所以`@"Items"`您要做的是使用

```
//[NSDictionary dictionaryWithObject:<#(id)#> forKey:<#(id<NSCopying>)#>]
NSMutableDictionary *plistDict = [NSDictionary dictionaryWithObject:items forKey:@"Items"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T10:02:19.787

这是简单的方法如果我想在 pList 文件中写入一些数据

Plist 文件名为“ **Contacts.plist** ”

1.  姓名
2.  地址
3.  电话号码。

您可以在下面的链接中找到有关如何使用 plist 文件的编译教程

> [iPhone教程中如何使用PList文件](http://rdcworld-iphone.blogspot.in/2013/03/how-to-use-plist-files-in-iphone.html)

下面是代码示例

```
- (void)saveDataInPlist {

    //get the plist document path
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *plistFilePath = [documentsDirectory stringByAppendingPathComponent:@"Contacts.plist"];    

    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSMutableDictionary *data = [[NSMutableDictionary alloc]init];
    NSMutableArray *contentArray= [[NSMutableArray alloc]init];

    if (![fileManager fileExistsAtPath: plistFilePath])
    {
        NSLog(@"File does not exist");

        // If the file doesn’t exist, create an empty plist file        
        plistFilePath = [documentsDirectory stringByAppendingPathComponent:@"Contacts.plist"];
        //NSLog(@"path is %@",plistFilePath);

    }
    else{
        NSLog(@"File exists, Get data if anything stored");

        contentArray = [[NSMutableArray alloc] initWithContentsOfFile:plistFilePath];       
    }       

    NSString *name = nameTextField.text;
    NSString *address = addressTextField.text;
    NSString *phone = phoneTextField.text;

    //add values to dictionary
    [data setValue:name forKey:@"Name"];
    [data setValue:address forKey:@"Address"];
    [data setValue:phone forKey:@"PhoneNo"];

    //add dictionary to array
    [contentArray addObject:data];

    //write array to plist file
    if([contentArray writeToFile:plistFilePath atomically:YES]){

       NSLog(@"saved");  
     }
     else {
       NSLog(@"Couldn't saved");
    }
    }

} 
```

希望这会帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T10:11:35.743

据我所知，问题出在字典结构上。您提供`items`作为值（每个项目可能包含`Name`,`Price`和`Quantity`键）并作为键提供`item`键。您可能需要将结构更改为： `[NSDictionary dictionaryWithObjects:@[items] forKeys:@[@"Items"]]`

# java - java.net.URISyntaxException：在 weblogic 中部署战争时，索引 69 处的字符无效

> ID：15741120
> 
> 赞同：1
> 
> 时间：2013-04-01T09:45:08.337
> 
> 标签：java, weblogic

我正在尝试在`weblogic`. 我得到以下信息`error message`：

```
 java.net.URISyntaxException: Illegal character in path [1] at index 69:
 https://xxxxxxxxxxx.test-secure-xxxxxxx-processing.com/xxxxxx/CNP_2_1 
```

问题中的字符是`_ (underscore)`。有什么办法可以解决吗？

该 URL 已在 bean`xml`文件中定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:10:43.263

索引 69 处有一个非法字符。

[看这里](https://stackoverflow.com/questions/4992317/illegal-character-in-path-at-index-16)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:12:29.263

像这样试试

请使用 encode utils 来去除 URL 中的特殊符号

```
String url = URLEncoder.encode("your url here","UTF-8")); 
```

也看看[这里](https://stackoverflow.com/questions/10786042/java-url-encoding)。

# asp.net - 以管理员身份复制到C盘（根）

> ID：15741122
> 
> 赞同：1
> 
> 时间：2013-04-01T09:45:24.643
> 
> 标签：asp.net

我想以管理员身份复制 C 根目录中的文件，它适用于某些路径。我使用的用户具有管理员权限，但我仍然无法复制。

我的代码是：

```
string strCmdText = string.Empty;
strCmdText = "copy /Y " + "\"" + fullpath + "\"" + " " + "\"" + _name.FullPath + "\\" + subject + ".msg" + "\"";
System.Diagnostics.Process process = new System.Diagnostics.Process();
System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo();
startInfo.FileName = "cmd.exe";
startInfo.Verb = "runas";
startInfo.CreateNoWindow = true;
startInfo.RedirectStandardOutput = true;
startInfo.RedirectStandardInput = true;
startInfo.UseShellExecute = false;
startInfo.Arguments = strCmdText;
startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
process.StartInfo = startInfo;
process.Start();
StreamWriter sw = process.StandardInput;
sw.WriteLine(strCmdText);
sw.Close();
process.WaitForExit();
string output = process.StandardOutput.ReadToEnd();
process.Dispose();
process.Close(); 
```

我收到以下错误： `You don't have appropriate permission to perform this operation.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:50:53.753

根据您在本地或通过网络运行 Web 应用程序，但通常要写入 C 驱动器，您可以将 NETWORK SERVICE 添加到目标文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:59:50.097

将此添加到您的代码中：

```
startInfo.UserName = "Administrator";
startInfo.Password = "password"; 
```

希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T11:53:19.140

取自评论。这看起来像 UAC。尝试关闭 UAC，如果可行，那么您就知道下一步该去哪里了！

# listview - 将 QML 元素从数据库加载到 ListView

> ID：15741124
> 
> 赞同：1
> 
> 时间：2013-04-01T09:45:32.547
> 
> 标签：listview, qml, meego, meego-harmattan

我正在为我的 n9 编写一个应用程序并且有一个数据库问题。我没有为应用程序使用 main.cpp 或其他 c++ 文件。我在 qml 中使用 javscript 创建、删除、添加等数据到数据库。现在我只是简单地输出一个包含所有条目的字符串。一切正常。但现在我想将数据库中的条目显示为 ListView。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:59:04.477

您可以为 ListView 动态创建模型。像这样的东西：

```
import QtQuick 2.0
import "main.js" as Main

Rectangle {
    id: root

    ListView {
         width: 180; height: 200

         model: Main.createModel(root)
         delegate: Text {
             text: name + ": " + number
        }
     }
} 
```

和`main.js`

```
function createModel(parent) {
    var s = 'import QtQuick 2.0; ListModel {\n';
    var data = ["a", "b"];  // your data from database will be here
    for(var x in data) {
        var s2 = "ListElement {name: \"" + x+ "\"; number: \"" + x + "\" }\n";
        s += s2;
    }

    s += "}\n";
    console.log(s);
    return Qt.createQmlObject(s, parent, "mainModel");
} 
```

# android - 为后台活动实现监听器android

> ID：15741125
> 
> 赞同：0
> 
> 时间：2013-04-01T09:45:34.723
> 
> 标签：android, interface

我正在使用**Data Droid 库**来加速异步任务。在数据机器人中有类似于异步任务的方法`onpostexecute`。我正在使用数据机器人执行一些异步任务来预取数据。我想实现监听器来通知后台进程完成到另一个活动。任何人都可以清楚地解释如何使用接口来实现这一点。我已经经历了许多 stackoverflow 问题，但仍然不清楚如何为此实现接口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:03:41.080

```
public abstract class BaseActivity extends Activity implements CompletionListener {
CompletionListener completionListener;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    completionListener=this;
}

class MyTask extends AsyncTask<Void, Void, Void>{

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub
        return null;
    }
    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        completionListener.onCompletion();
    }
}

} 
```

让您的 Activity 扩展此 BaseActivity 并且 MyTask 是您的异步​​任务，然后所有扩展此基类的 Activity 将收到来自 onPostExecute() 的调用；

```
public interface CompletionListener {
public void onCompletion();
} 
```

# node.js - 节点.js。对非阻塞方法感到困惑

> ID：15741129
> 
> 赞同：1
> 
> 时间：2013-04-01T09:45:50.687
> 
> 标签：node.js, callback, nonblocking

好吧，我似乎很难开始思考.. um.. 功能方式.. 或异步方式。

我对 node.js 比较陌生，但我在 c#、java、c++ 方面有多年的经验。

图片 我有简单的任务。这个任务的想法是每一行都应该在前一行完成之后执行（阻塞操作）。让我说，c# 中的正常方法。另外，（这就是这篇文章的原因）让我们假设我们的代码中有一个条件行。其伪代码如下：

```
f = OpenFile("aaa.txt")
If f.ReadLine(1) == "bbb" // read the first line
    line = f.ReadLine(2)  // read the second line
else
    line = ReadLine(3)    // read the third line
DataBase.Insert(line)     // store the line in some database, lets say in mysql
DeleteFile(f) 
```

很简单。现在，据我了解，node.js 通过向几乎每个函数添加回调来使用非阻塞方法。这样一来，这个简单的任务对我来说似乎成了一场噩梦。如果我尝试重现上面的代码，它将如下所示：

```
OpenFile(f, function() {
    ReadLine(f, 1, function(line) {
        if line == "bbb" {
            ReadLine(f,2, function(line) {
                DataBase.Insert(line, function() {
                    DeleteFile(f);
                });
            });
        {
        else {
            ReadLine(f,3, function(line) {
                DataBase.Insert(line, function() { // the same again
                    DeleteFile(f);
                });
            });
        }
    });    

}); 
```

好吧，你明白了。在这个例子中，如果我需要确保只有在文件成功打开后才会读取该行，我需要在回调中编写“下一行的逻辑”。而且我应该只在“上一行回调”中继续写“下一行逻辑”。如果我不这样做，我可能会遇到这种情况，例如，我会尝试读取未打开的文件的行我还要注意，在我的实际代码中，我确实使用了非阻塞函数，例如：

```
jsdom.env(..)
fs.exec(..) 
```

我在上面代码中的方法是否正确？或者我错过了什么，我的方法完全错误？我希望有更好的解决方案和方法。

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:04:57.377

您的方法似乎是正确的，这就是它的工作方式。你是对的，很难找到一种时尚的方式来编写异步代码。

处理此问题的一个工具是[Step](https://github.com/creationix/step)，它允许您定义一系列函数作为彼此的回调：

```
Step(
  function(...) {
    OpenFile...
  },
  function(...) {
    ReadLine(f, 2, this);
  },
  function(err, line) {
    if (err) throw err;
    if (line === "bbb")
      DataBase.Insert(line, this);
    else
      DataBase.Insert(line, this);
  },
  function(...) {
    DeleteFile...
  }
); 
```

In Step`this`充当回调函数，并被给定序列中的以下函数替换。也可以触发并行任务。文档是直截了当的。

可能你更喜欢这种方式。

* * *

**或者没有其他工具：**

无需使用匿名函数作为回调。您可以定义一个函数并将其名称插入为回调，这样您就可以在不使用其他工具的情况下消除代码重复。小草稿：

```
OpenFile(f, function() {
    ReadLine(f, 1, function(line) {
        if line == "bbb" {
            ReadLine(f,2, insertIntoDatabaseAndDeleteFile);
        {
        else {
            ReadLine(f,3, insertIntoDatabaseAndDeleteFile);
        }
    });    

});

function insertIntoDatabaseAndDeleteFile(line, f) {
  DataBase.Insert(line, function() { 
      DeleteFile(f);
  });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T07:10:25.147

作为一名长期的 C++ 开发人员，我可以告诉你：

a) 你的代码没问题 b) 你的感觉也没问题。c) 随着时间的推移，情况正在好转。与此同时，我觉得在 C++ 中调用同步 io 函数真的很不舒服

这是您的代码的另一个版本，它给您一个印象，您可以在 JS 中做什么：

```
OpenFile(f, function() {
    var myReadInsDel = function( f, n, callback ) {
        ReadLine(f,3, function( line ) {
            DataBase.Insert( line, function() {
                DeleteFile( f, callback );
            });
    });
    ReadLine(f, 1, function(line) {
        if line == "bbb" {
            myReadInsDel( f, 2 ); // you could provide also a callback here
        }
        else {
            myReadInsDel( f, 3 ); // you could provide also a callback here
        }
    });    
}); 
```

# magento - 禁用平板电脑和 iPad 的 Magento 移动主题

> ID：15741131
> 
> 赞同：4
> 
> 时间：2013-04-01T09:46:09.627
> 
> 标签：magento, magento-1.7

我制作了一个包含桌面和移动主题的网站。它工作得非常好，但在平板电脑和 iPad 中它显示了我不想要的移动主题。所以我使用以下异常

> (iPhone|iPod|BlackBerry|Pre|Palm|Googlebot-Mobile|mobi|Safari Mobile|Windows Mobile|Android|Opera Mini|mobile)|(!iPad|Silk|Kindle|Xoom|SCH-I800|平板电脑)

但现在它也显示移动主题。请帮助我如何在平板电脑和 iPad 中调用桌面主题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T04:40:01.297

我尝试了很多字符串。最后通过使用这个字符串：

```
iPhone|iPod|Mobile 
```

问题解决了。它在表格中显示桌面主题，在移动中显示移动主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:39:27.973

对我来说，当使用“iPhone|iPod|Mobile”作为表达式时，移动主题仍然会加载到 iPad 上。

最后，我为每个部分创建了两个例外，因为它们的工作方式类似于 if / elseif 语句。

第一个匹配是匹配我希望桌面主题加载的设备，例如 iPad|Tablet 加载“默认”。第二个匹配是让其他设备（例如“iPhone|Mobile”）加载移动主题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T10:30:14.903

我最近在我的项目中做了同样的事情。您需要指定一些宽度的用户代理，您可以向其显示移动站点，或者您的桌面站点。您可以通过在配置中创建一些选项卡并在其中指定宽度来从您正在使用的任何 API 的对象或后端部分获取宽度。

希望它会帮助你。

# ios - 防止键盘在 UITableView 的 headerview 下滚动 UITextField？

> ID：15741135
> 
> 赞同：0
> 
> 时间：2013-04-01T09:46:45.373
> 
> 标签：ios, uitableview, keyboard, uitextfield

我有一个带有标题的表格视图，在该标题下，我在 UITableViewCell 中有几个 UITextField。问题是当我按下顶部 UITextField 时，UITextField 在 headerView 下方滚动。我该如何防止这种情况发生？我在表格视图中禁用了滚动。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:22:39.820

我只需要将包含两个 UITextField 的 UITableViewCell 拆分为两个 UITableViewCell（每个都包含一个 UITextField）。

# php - 我可以将这两个查询合并到一个查询中吗

> ID：15741136
> 
> 赞同：-1
> 
> 时间：2013-04-01T09:46:47.287
> 
> 标签：php, pdo

你好，我可以将这两个查询合并到一个查询中吗？我的第一个查询获取数据库中的文章数量，第二个查询获取所有文章的所有访问的总和什么是使其成为一个查询的最佳方法

```
$stmt = $db->query('SELECT * FROM stories');
$story_count = $stmt->rowCount();

$stmt = $db->query("SELECT sum(visits) FROM stories");
$total_visits = $stmt->fetchColumn(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:49:30.973

试试喜欢

```
$stmt = $db->query('SELECT COUNT(*) as total_cnt,
                   SUM(visits) as total_visits FROM stories'); 
```

然后执行您的查询，您将从“total_cnt”和“total_visits”获得结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:49:00.630

```
SELECT COUNT(*) as total, SUM(visits) as total_visits FROM stories; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T09:52:00.963

```
SELECT Story.*, COUNT(*) as total, SUM(Story.visits) as total_visits FROM stories AS Story; 
```

如果您想获得其他字段`SUM`并`COUNT`使用`.*`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-01T09:53:32.913

是的，试试这个：

```
$stmt = $db->query('SELECT count(*),sum(visits) FROM stories');
$result = $stmt->fetch_array(MYSQLI_NUM);
$story_count = $result[0];
$total_visits = $result[1]; 
```

# java - Apache Ant 配置不工作

> ID：15741144
> 
> 赞同：-1
> 
> 时间：2013-04-01T09:47:06.317
> 
> 标签：java, ant

我是 Apache ant 的新手，已经下载了它，想自动化一些任务

我已经在系统环境中配置了 Ant_Home。当我在提示符中运行 Ant 时，它向我显示以下错误：

```
C:\>ant
Buildfile: build.xml does not exist!
Build failed

C:\> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T09:51:34.210

ant 需要（默认情况下）一个 build.xml 文件来指定要完成的任务。采用

```
c:\> ant -help 
```

了解适合您情况的 ant 命令的语法……并找出适合您项目的 build.xml。您的安装似乎有效 :) ...该消息来自 ant。

# java - LWJGL 中的纹理球体

> ID：15741146
> 
> 赞同：1
> 
> 时间：2013-04-01T09:47:31.580
> 
> 标签：java, opengl, geometry, textures, lwjgl

我想画一个 GLU Sphere，它可以工作，但现在我不知道如何纹理它。glTexCoord2f 没有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:57:57.340

如果您使用的是 LWJGL，我认为没有办法那么容易做到这一点。在它的windows文档上`gluSphere()`说：

> 如果打开纹理（使用 gluQuadricTexture）：生成纹理坐标，以使 t 的范围从 z = -radius 处的 0.0 到 z = 半径处的 1.0（t 沿纵向线线性增加）；s 的范围从正 y 轴的 0.0，到正 x 轴的 0.25，到负 y 轴的 0.5，到负 x 轴的 0.75，然后回到正 y 轴的 1.0。

但`gluQuadricTexture`不包含在 LWJGL 中（或者至少我没有找到它）。您可以尝试使用 UV 坐标导入 obj 球体，或制作自定义 Sphere 类来生成 UV。

对于那些不使用 LWJGL 的人，这是我在纹理上找到的一个不错的小教程： [http](http://acidleaf.com/texture-mapping-the-glusphere/)`gluSphere` : //acidleaf.com/texture-mapping-the-glusphere/

# ruby-on-rails - 只允许注册表格

> ID：15741147
> 
> 赞同：0
> 
> 时间：2013-04-01T09:47:39.287
> 
> 标签：ruby-on-rails, ruby-on-rails-3

如何创建一种方法，在访问者登录或注册之前将其导航到注册路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T09:56:45.553

在您的控制器上使用 before_filter 以确保用户已登录，如果未登录，则使用默认操作重定向到注册。

有一个名为 Devise 的 Gem，它对身份验证非常有用，值得努力学习。

另一个好去处是[http://ruby.railstutorial.org/ruby-on-rails-tutorial-book](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)

这将为您在 Rails 中打下良好的基础

# ruby-on-rails - 修改 Michael Hartl 的 railstutorial：在哪里放置 rspec 测试？

> ID：15741148
> 
> 赞同：0
> 
> 时间：2013-04-01T09:47:45.927
> 
> 标签：ruby-on-rails, rspec, railstutorial.org

我正在玩 Michael Hartl 的[railstutorial](http://ruby.railstutorial.org/)。我想限制对个人资料页面的访问，以便只有所有者才能看到他/她的个人资料。第一个任务是编写适当的 rspec 测试，但它的逻辑位置是什么：[user_pages](https://github.com/railstutorial/sample_app_2nd_ed/blob/master/spec/requests/user_pages_spec.rb)或[authentication_pages](https://github.com/railstutorial/sample_app_2nd_ed/blob/master/spec/requests/authentication_pages_spec.rb)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:15:29.813

可能是 user_pages，尽管它可以很容易地进行身份验证。我认为在这种情况下，您最好只编写测试并继续进行。如果稍后您发现它在不同的地方放置得更好，请移动它。

# push-notification - 在 php 中使用彗星构建实时通知

> ID：15741149
> 
> 赞同：2
> 
> 时间：2013-04-01T09:47:47.743
> 
> 标签：push-notification, comet

我想建立像 facebook 和 google+ 一样的实时通知系统。我知道他们为此使用了彗星和ajax推送技术。我从这个链接找到了教程[http://www.zeitoun.net/articles/comet_and_php/start](http://www.zeitoun.net/articles/comet_and_php/start)我只想知道如何使用iframe技术实现彗星（你可以在上面的链接上找到这个）使用 mysql 数据库以及我如何识别我向其推送数据的用户。

谢谢你。

# php - 用于 ODBC 的 mysql_data_seek 的 PHP 替代品

> ID：15741150
> 
> 赞同：5
> 
> 时间：2013-04-01T09:47:50.787
> 
> 标签：php, db2, odbc

我正在将 PHP-mySQL 应用程序转换为 PHP-ODBC 应用程序。即让数据库从mysql 迁移到DB2。

在使用 mysql 时，我使用`mysql_data_seek`函数来重置记录集指针，但这不适用于 ODBC 连接。我尝试并检查`odbc_fetch_row($recordset,0)`了重置记录集，但这不起作用。有谁知道如何通过 ODBC 连接重置记录集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-07T21:58:03.893

根据[文档](http://php.net/manual/en/function.odbc-fetch-row.php)，您需要`1`作为第二个参数而不是`0`.

> 要多次检查结果，您可以调用 odbc_fetch_row() 并使用 row_number 1，然后继续执行 odbc_fetch_row() 而不使用 row_number 来查看结果。

但是，请注意，如果您的驱动程序不支持此方法，则可能无法完成此任务：

> 如果驱动程序不支持按编号获取行，则忽略 row_number 参数。

# php - 在 Yii 上的 AjaxSubmitButton 之后，如何将部分视图渲染到 2 个不同的 DIV 中？

> ID：15741151
> 
> 赞同：2
> 
> 时间：2013-04-01T09:47:50.870
> 
> 标签：php, yii

在按下 CHTML:AjaxSubmitButton 并使用相同的控制器之后，有谁知道如何在同一页面中将 2 个不同的部分呈现为 2 个不同的 DIV？

我已经在网上搜索了这个，但到目前为止我没有找到任何可以帮助我的东西。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T13:31:29.477

你不需要一个`ajaxSubmitButton()`. 一个`ajaxButton()`就足够了。

在您看来：

```
<?php echo CHtml::ajaxButton('Click me', array('mycontroller/myaction'), array(
    'dataType' => 'json',
    'success' => 'js:function(res) { 
        $("#div1").html(res.div1); 
        $("#div2").html(res.div2);
    }',
)); ?> 
```

在您的控制器中：

```
public function actionMyaction()
{
    echo json_encode(array(
        'div1' => $this->renderPartial('div1', null, true),
        'div2' => $this->renderPartial('div2', null, true),
     ));
} 
```

# java - 使用变量或文本字段作为参数传递给碧玉报告中的其他文本字段

> ID：15741158
> 
> 赞同：0
> 
> 时间：2013-04-01T09:48:16.830
> 
> 标签：java, jasper-reports

我正在做一份显示资产负债表的报告，我的报告已完成，剩下的一件事是以文字显示最终金额，因此我使用了一个带有`int`参数的 Java 函数，该函数将把该金额转换为文字。

现在我的问题是我已经计算并存储了最终金额`textfield`（比如说`X`），我想将此金额传递给 Java 函数，但我尝试了很多方法，但我失败了，所以我的问题是如何传递变量或一个`textfield`以其他`textfield`作为参数？

建议一些方法或想法？我用谷歌搜索了同样的东西，也尝试在 jaspersoft 论坛上搜索。

# javascript - 如何在 Javascript 中创建字母数字序列号？

> ID：15741159
> 
> 赞同：1
> 
> 时间：2013-04-01T09:48:18.483
> 
> 标签：javascript

我正在尝试在 Javascript 中创建一个字母数字序列号，该序列号受以下规则约束：

1.  3位字母数字系列
2.  允许值 1-9（不包括零）和 AZ（所有大写字母，不包括 I 和 O）
3.  得到输入数字后，代码应该能够给出下一个数字。

最后一部分很棘手，基本上代码会获取序列号的现有值，然后将输出作为下一个数字。

例如：如果输入编号为 11D，则输出编号应为 11E。请让我知道这个描述是否足以解释我的要求。

[此处](https://docs.google.com/file/d/0BzoorscHTf6cckFxU0pZYlVGeDg/edit?usp=sharing)附有相同的excel表

脚本将获取起始值 11D 的代码部分也来自以下代码：

```
cur_frm.add_fetch('item_group','serial_number','serial_number'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T11:09:22.373

这应该这样做：

```
var nextSerialNumber = function(serialNumber) {
    return (parseInt(serialNumber, 36) + 1).toString(36).replace(
      /i/g,'j').replace(/o/g, 'p').replace(/0/g, '1').toUpperCase();
}

nextSerialNumber("99Z") //=> "9A1"
nextSerialNumber("11D") //=> "11E" 
```

我不确定你想在之后发生什么`ZZZ`。它跳到`1111`，但这可以改变。

如果您输入了无效的序列号（例如`11I`），它会为您提供下一个有效的编号（例如`11J`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:59:49.510

```
 var alphabet = "123456789ABCDEFGHJKLMNPQRSTUVWXYZ";
    var alphabetLen = alphabet.length;

    function nextDigit(digit) {
        nextDigitPos = (alphabet.indexOf(digit)+1) % alphabetLen;
        return alphabet.charAt(nextDigitPos);
    }

    /**
     * Computes the next serial id.
     * @param id the id to compute the successor of,
     *        if null or empty String the first id
     *        "111" is returned.
     */
    function nextSerial(id) {
        if(id==null || id.length==0) return "111";
        var digits = id.split("");
        digits[2] = nextDigit(digits[2]);
        if(digits[2] == "1") /* overflow */ {
            digits[1] = nextDigit(digits[1]);
            if(digits[1] == "1") /* overflow */ {
                 digits[0] = nextDigit(digits[0])
            }
        }
        return digits.join("");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T11:47:56.300

# asp.net-mvc - 使用 DDD 进行应用程序设计

> ID：15741161
> 
> 赞同：1
> 
> 时间：2013-04-01T09:48:49.163
> 
> 标签：asp.net-mvc, entity-framework, domain-driven-design

我正在为应用程序设计解决方案结构。我打算使用领域驱动设计。Asp.net MVC 和实体框架。在某些领域需要您的投入。

数据访问首先使用实体​​框架代码设计存储库构建在 EF 数据访问之上 域模型是在存储库之上使用域模型设计的 应用程序服务构建在 Damain 层之上 UI 开发在应用程序服务之上

流量是

UI（控制器）--> 应用服务--> 域层--> 存储库--> 数据访问--> 数据库。

我不太清楚如何在层之间共享数据。

My Domain 模型可用于在存储库、数据访问和域层之间存储数据。我只是在想数据应该从 Daomin Layert 传递到应用程序服务和应用程序服务到 UI 的方式。我可以使用 DTO，但不确定它是否是一个好的选择，因为我有一些模型已经在域模型中，在 UI 中查看模型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T00:23:44.023

给定您描述的流程，在 UI 层中创建视图模型以由控制器实例化。视图模型是视图绑定到的简单对象。这应该与底层域模型分离，以解决**namkha87**指出的问题。

至于数据访问层，您可以使用域对象本身进行对象关系映射，因为 EF 允许这样做。这里不需要中间 DTO。

要考虑的另一件事是将用于查询的模型与用于调用行为的模型分开。这样，您可以确保应用程序服务永远不会公开行为域对象，只会公开[read-models](http://gorodinski.com/blog/2012/04/25/read-models-as-a-tactical-pattern-in-domain-driven-design-ddd/)。让应用程序服务将域对象暴露给外层的问题在于，它将允许那些外层调用这些对象上的行为，结果是未定义的。当您只返回没有行为的只读对象时，这不是问题。对于返回的数据，不要让 UI 层直接创建域对象 -[您应该区分实体和简单数据](http://gorodinski.com/blog/2012/08/06/distinguishing-between-entities-and-data-in-domain-driven-design-ddd/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:43:14.467

重用 Domain Model 或 UI Model 不好，它会让你的层紧密耦合。以这种方式开发大规模应用程序非常困难。

你认为是正确的，Application 是一个薄层，它只是一堆 Actions，会直接从 UI 层调用，信息将通过一个名为 ActionParameter 的对象传递。ActionParameters 定义在Application 层，ActionParameter 对象构建在UI 层并传递给Application 层。

应用程序将通过数据访问层从数据库中检索数据。查询操作有时需要从许多源、不同的域实体中获取数据，并且需要在返回 UI 层之前对数据进行投影、转换或格式化。我们将有类似 ActionResult 的对象，其中包含要返回给 UI 层的所有数据。

似乎会有很多代码，但我认为这是必要的。每一层都有自己的用途，当我们改变一层时，其他层不会受到影响。

# jquery - jquery在asp.net中设置会话

> ID：15741163
> 
> 赞同：0
> 
> 时间：2013-04-01T09:49:08.283
> 
> 标签：jquery, asp.net, session

我正在尝试在 jquery 中设置会话。这是代码，但无法弄清楚。请查看评论下方的行。我该怎么做？

```
$(document).ready(function () {
    $("#demo-input-facebook-theme").tokenInput("http://xxx.com/MedService.aspx", {
        onAdd: function (item) {
            // *************************************
            // I want to add item.name to below code
            // *************************************
            <% HttpContext.Current.Session["Session_Post_Kategori"] += "item.name"; %>
        },
        onDelete: function (item) { },
        theme: "facebook"
     });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:50:38.150

> jquery在asp.net中设置会话

*无法*使用 jQuery / javascript 在客户端设置会话。会话在服务器端维护，并且必须在服务器端而不是在 jQuery 中设置，尽管您可以在 jQuery 中使用 sessoin 值。您可以向服务器发送**ajax 调用**以从 javascript 设置会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T10:02:59.857

你不能像你正在尝试的那样设置。

您可以做什么，您可以`generic http handler`
从 jquery 创建一个 Call it
在该处理程序中设置会话值。

```
public class AddSalesLead : IHttpHandler, IRequiresSessionState
{
    public void ProcessRequest(HttpContext context)
    {
        context.Response.Session= context.Request["yourvalue"];
    }
    public bool IsReusable
    {
        get{return false;}
    }
} 
```

并从 jquery 调用它

```
$(document).ready(function () {
    $("#demo-input-facebook-theme").tokenInput("http://xxx.com/MedService.aspx", {
        onAdd: function (item) {
          //call the handler here to set session value
          $.ajax({
               type: "POST",
               url: "yourhandler.ashx?yourvalue="+"value",
               success: function (data) {
               },
               error: function () {
               },
                async: true
           });
        },
        onDelete: function (item) { },
        theme: "facebook"
     });
}); 
```

## 编辑 1

这是一些链接
[在 jquery.click()](https://stackoverflow.com/questions/4397435/setting-a-asp-net-session-in-jquery-click)
[http://brijbhushan.net/2011/05/29/call-httphandler-from-jquery-pass-data-and-retrieve-in-json-中设置 ASP.NET 会话格式/](http://brijbhushan.net/2011/05/29/call-httphandler-from-jquery-pass-data-and-retrieve-in-json-format/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T09:51:47.657

会话存储在服务器端......而Javascript / Jquery是客户端脚本......所以你不能从Javascript访问会话......但是你可以使用[ajax](http://api.jquery.com/jQuery.ajax/)将值发布到服务器并将其存储在那里..

例子..

```
 onAdd: function (item) {
     $.post(yoururl,{data:item.name});//<--- this will post the data to your url (controller) and you can set the session there 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T10:00:36.770

无法设置会话客户端，因为 <%%> 将在页面加载时执行，并将与 HTML 的其余部分一起呈现。但是，您可以使用它来读取值并基于它执行一些操作。您可能想尝试@Adil 所说的。

我希望它让一切都非常清楚。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-27T19:20:40.707

我找到了这个网页，对解决这个问题很有帮助。它工作完美，非常干净。它可以帮助避免传递会话或 cookie。

[http://codewala.net/2011/05/29/call-httphandler-from-jquery-pass-data-and-retrieve-in-json-format/](http://codewala.net/2011/05/29/call-httphandler-from-jquery-pass-data-and-retrieve-in-json-format/)

# mysql - 如何组合2个mysql查询

> ID：15741167
> 
> 赞同：1
> 
> 时间：2013-04-01T09:49:26.033
> 
> 标签：mysql, nested-queries

我有以下 2 个查询。

```
Query 1 : 
select distinct(thread_id) from records where client_name='MyClient'

Query 2 :
select max(thread_no) from records 
where thread_id='loop_result_from_above_query' AND action='Reviewed' 
```

是否可以将它们组合成一个查询？

第二个查询针对第一个查询的每个结果运行。

## 谢谢你。

见附上一小段 mysql 记录的图片。 ![在此处输入图像描述](https://i.stack.imgur.com/7kdYN.png)

我需要一个 mysql 查询来仅输出具有 action="MyAction" 作为给定 thread_id 集的最新记录的记录。在样本数据集中：用 Sr 记录：7201

我希望这有助于帮助我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:53:04.723

您可以使用 SELF JOIN，但不建议这样做，并且会影响您的查询性能。请检查以下查询以供参考

```
SELECT DISTINCT r1.thread_id, MAX(r2.thread_no) from records r1 LEFT JOIN records r2 ON r2.thread_id=r1.thread_id WHERE r1.client_name='MyClient' AND r2.action='Reviewed' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:56:31.910

```
SELECT a.maxthreadid, 
       b.maxthreadno 
FROM   (SELECT DISTINCT( thread_id ) AS MaxThreadId 
        FROM   records 
        WHERE  client_name = 'MyClient') a 
       CROSS JOIN (SELECT Max(thread_no) AS MaxThreadNo 
                   FROM   records 
                   WHERE  thread_id = 'loop_result_from_above_query' 
                          AND action = 'Reviewed') b 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T10:03:57.970

```
SELECT  client_name, thread_id, MAX(thread_no) max_thread
FROM    records
WHERE   action='Reviewed' AND client_name='MyClient'
GROUP   BY client_name, thread_id 
```

**更新 1**

```
SELECT  a.*
FROM    records a
        INNER JOIN
        (
            SELECT  thread_id, max(sr) max_sr
            FROM    records
            GROUP   BY thread_id
        ) b ON a.thread_id = b.thread_id AND
                a.sr = b.max_sr
WHERE   a.action = 'MyAction' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T10:31:14.893

试试这个。

```
SELECT * 
FROM   (SELECT Row_number() 
                 OVER ( 
                   partition BY thread_id 
                   ORDER BY thread_no)      no, 
               Max(thread_no) 
                 OVER( 
                   partition BY thread_id ) Maxthread_no, 
               thread_id, 
               action, 
               client_name 
        FROM   records
        Where client_name = 'MyClient') AS T1 
WHERE  no = 1 
       AND action = 'Reviewed' 
```

# mysql - 带有 where 条件的 select 语句（选择全部或部分）

> ID：15741168
> 
> 赞同：0
> 
> 时间：2013-04-01T09:49:29.980
> 
> 标签：mysql, sql, database

我必须下表：

图片：

```
imageID    userId    Translated    theImage
--------------------------------------------
    1         2         1           image1
    2         3         0           image2
    3         3         0           image3 
    4         3         0           image4
    5         3         1           image5 
```

和翻译链：

```
imageID    sourceLang    targetLang
------------------------------------
   1           2            3
   2           4            1
   3           5            1
   4           4            2
   5           1            4 
```

现在我有两个选择：我想要么选择所有没有为特定用户翻译成任何语言的图像，要么选择所有未翻译成特定语言的用户的图像。

对于第一个选项，我有以下查询：

```
"Select images.imageid, images.theimage, images.translationRating 
From images where images.userID=? And images.translated =0" 
```

对于第二个选项，我有：

```
"Select images.imageid, images.theimage, images.translationRating 
From images, translationchains  
where images.userID=? And images.translated =0 and
translationchains.imageId = images.imageid
and translationchains.targetLang = ? " 
```

例如，如果我将第一个查询与用户 3 一起使用，我希望结果为：

```
2         3         0           image2
3         3         0           image3 
4         3         0           image4 
```

对于用户 3 和 targerLang = 1 的第二个查询，我希望结果为：

```
 2         3         0           image2
    3         3         0           image3 
```

我想将这两个查询组合成一个适用于所有情况的查询（根据我将发送的参数）

我该怎么做？

我试图将字符串“”（空字符串）作为第二个参数（translationchains.targetLang = ?）发送，因此它会忽略此条件，但它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:03:10.197

你可以试试这个

**第一个查询**

```
 Select * From images where userID=3 And translated =0 
```

[**在这里演示**](http://sqlfiddle.com/#!2/a37eb/4)

输出：

```
 imageID   userId  Translated  theImage 
   2          3          0      image2
   3          3          0      image3
   4          3          0      image4 
```

**第二个查询**

```
 Select i.imageID, userId, Translated, theImage 
   From images i
   inner join translationchains  t
   on t.imageId = i.imageid
   where i.userID=3 And i.translated =0 
   and t.targetLang = 1 
```

[**在这里演示**](http://sqlfiddle.com/#!2/a37eb/9)

输出：

```
 imageID    userId  Translated  theImage 
    2         3         0       image2
    3         3         0       image3 
```

组合：

```
 Select i.imageID, userId, Translated, theImage 
 From images i
 inner join translationchains  t
 on t.imageId = i.imageid
 where i.userID=3 And i.translated =0 
 and t.targetLang in (select targetLang from translationChains  )
                                ^^^^^-------replace this by 1 or 2 or 3 or let it like that for all

    //-- if you want change targetLang just replace it by any number
    //--like that (select 1 from translationChains  ) 
```

[**在这里演示**](http://sqlfiddle.com/#!2/a37eb/19)

OBS：当您选择语言然后输入时，您也可以在 php 中执行此操作

```
 $sql .= "AND t.targetLang = the_id_selected_of_language "; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:02:23.857

试试下面的查询

```
SELECT images.imageid, images.theimage, images.translationRating 
FROM images
INNER JOIN translationchains ON translationchains.imageId = images.imageid
WHERE images.userID=? 
AND (
    (images.translated =1 AND translationchains.targetLang = ?) 
    OR (images.translated =0)
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T10:14:11.440

试试下面的查询

```
SELECT a.imageid, a.theimage , a.translationRating
FROM images a , translationchains b
WHERE a.imageId = b.imageid
AND a.translated = 0
GROUP BY b.targetLang 
```

上述查询将根据目标语言对结果进行分组

# nginx - nginx 状态：请求？

> ID：15741175
> 
> 赞同：0
> 
> 时间：2013-04-01T09:50:14.913
> 
> 标签：nginx, monitoring

根据[nginx 统计模块](http://wiki.nginx.org/HttpStubStatusModule)

> 服务器接受已处理的请求——nginx 接受了 16630948 个连接，处理了 16630948 个连接（没有人关闭只是被接受），并处理 31070465 个请求（每个连接 1.8 个请求）

我想知道请求部分是什么意思，它说每个连接 1.8，这对我来说没有意义，提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:37:23.397

现在保持活动（或持久）http 连接是正常的，尤其是在 http 1.1 中。一个 keep-alive 连接可以处理超过 1 个请求。

参考：[http ://en.wikipedia.org/wiki/HTTP_persistent_connection](http://en.wikipedia.org/wiki/HTTP_persistent_connection)

# nhibernate - Nancy - 无法解析类型：NHibernate.ISession

> ID：15741176
> 
> 赞同：0
> 
> 时间：2013-04-01T09:50:17.963
> 
> 标签：nhibernate, nancy

我的`CustomBootstrapper`样子如下

```
public class CustomBootstrapper : DefaultNancyBootstrapper
{
    protected override NancyInternalConfiguration InternalConfiguration
    {
        get
        {
            //This will tell Nancy it won't have to look in the Nhibernate assemblies for implementations of our interfaces.
            return NancyInternalConfiguration
                .Default
                .WithIgnoredAssembly(asm => asm.FullName.StartsWith("NHibernate", StringComparison.InvariantCulture))
                .WithIgnoredAssembly(asm => asm.FullName.StartsWith("Fluent", StringComparison.InvariantCulture))
                .WithIgnoredAssembly(asm => asm.FullName.StartsWith("Iesi", StringComparison.InvariantCulture));
        }
    }

    protected override void ConfigureRequestContainer(TinyIoCContainer container, NancyContext context)
    {
        base.ConfigureRequestContainer(container, context);
        //container.Register((c, p) => SessionFactory.OpenSession());
        container.Register(SessionFactory.OpenSession());
    }
} 
```

我有一个接受`ISession`作为构造函数依赖项的存储库。当我运行我的应用程序时，我收到一条错误消息`Unable to resolve type: NHibernate.ISession`

我可以确认

1.  我的引导程序被 Nanacy 捡到了
2.  `ISession`注册码执行
3.  `.WithIgnoredAssembly(asm => asm.FullName.StartsWith("NHibernate", StringComparison.InvariantCulture))`我试过从属性中注释掉`InternalConfiguration`
4.  两种注册组件的方式都出现错误（一种在我的代码中注释）

我已经查看了关于 SO 的其他类似问题，但到目前为止没有任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:47:48.863

我已经完成了一个使用 NH 和 Nancy 的示例项目。在我设置的引导程序中：

1.  创建会话并将其绑定到会话上下文的 BeforeRequest 钩子
2.  提交会话的 AfterRequest 钩子
3.  回滚的 OnError 钩子

代码如下：

```
public class Bootstrapper : WindsorNancyBootstrapper
{

 // other stuff

 protected override void ApplicationStartup(IWindsorContainer container, IPipelines pipelines)
  {
    base.ApplicationStartup(container, pipelines);

    // other setup

    ConfigureNHibernateSessionPerRequest(container, pipelines);
  }

  private void ConfigureNHibernateSessionPerRequest(IWindsorContainer container, IPipelines pipelines)
  {
    pipelines.BeforeRequest += ctx => CreateSession(container);
    pipelines.AfterRequest += ctx => CommitSession(container);
    pipelines.OnError += (ctx, ex) => RollbackSession(container);
  }

  private Response RollbackSession(IWindsorContainer container)
  {
    var sessionFactory = container.Resolve<ISessionFactory>();
    if (CurrentSessionContext.HasBind(sessionFactory))
    {
      var requestSession = sessionFactory.GetCurrentSession();
      requestSession.Transaction.Rollback();
      CurrentSessionContext.Unbind(sessionFactory);
      requestSession.Dispose();
    }
    return null;
  }

  private Response CreateSession(IWindsorContainer container)
  {
    var sessionFactory = container.Resolve<ISessionFactory>();
    var requestSession = sessionFactory.OpenSession();
    CurrentSessionContext.Bind(requestSession);
    requestSession.BeginTransaction();

    return null;
  }

  private AfterPipeline CommitSession(IWindsorContainer container)
  {
    var sessionFactory = container.Resolve<ISessionFactory>();
    if (CurrentSessionContext.HasBind(sessionFactory))
    {
      var requestSession = sessionFactory.GetCurrentSession();
      requestSession.Transaction.Commit();
      CurrentSessionContext.Unbind(sessionFactory);
      requestSession.Dispose();
    }
    return null;
  }    
} 
```

# view - 如何创建没有默认权限的视图 db2/iseries？

> ID：15741178
> 
> 赞同：0
> 
> 时间：2013-04-01T09:50:33.477
> 
> 标签：view, permissions, ibm-midrange, db2-400

每次我创建一个新视图时，我都必须更改所有人的权限，而且做很多次相同的事情是非常痛苦的。

我还询问是否可以更改我创建视图的数据库中的一些默认选项，以便将权限设置为公共。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-14T03:47:49.493

听起来您正在使用 SQL 命名。改用系统命名，这将根据 QCRTAUT 系统值授予公共权限。请参阅[Birgitta Hauser 的文章](http://www.ibm.com/developerworks/ibmi/library/i-sqlnaming/)。

系统命名的另一个优点是使用作业的库列表来解析不合格的对象引用。通过不硬编码模式名称，而是允许系统根据库列表找到它们，使您的代码能够在不同的环境（例如开发、测试、培训、生产）中工作而无需修改代码，只需运行不同的图书馆列表。因此，您可以将与测试过的代码完全相同的代码安装到生产环境中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-13T17:57:38.723

以下来自[V6R1 文档](http://pic.dhe.ibm.com/infocenter/iseries/v6r1m0/topic/db2/rbafzhcview.htm)：

**授权**

> 该语句的授权ID所拥有的权限必须至少包括以下一项：
> 
> 在架构中创建的权限。有关更多信息，请参阅在架构中创建所需的权限。
> 
> 行政机关
> 
> 该语句的授权ID所拥有的权限必须至少包括以下一项：
> 
> 以下系统权限： *使用创建逻辑文件 (CRTLF) CL 命令 *如果创建视图的库是具有数据字典的 SQL 模式，则更改数据字典 管理权限
> 
> 该语句的授权ID所拥有的权限还必须至少包括以下一项：
> 
> 对于通过全查询直接引用或通过全查询中引用的视图间接引用的每个表和视图：表或视图的 SELECT 特权，以及 包含表或视图的库的系统权限 *EXECUTE 管理权限

**查看所有权：如果指定了 SQL 名称：**

> 如果存在与创建视图的架构同名的用户配置文件，则视图的所有者就是该用户配置文件。
> 否则，视图的所有者是执行语句的作业的用户配置文件或组用户配置文件。
> 
> 如果指定了系统名称，则视图的所有者是执行语句的作业的用户配置文件或组用户配置文件。

**查看权限：**

> 如果使用 SQL 名称，则在 *PUBLIC 上创建具有 *EXCLUDE 系统权限的视图。如果使用系统名称，则创建具有 *PUBLIC 权限的视图，该权限由模式的创建权限 (CRTAUT) 参数确定。
> 
> 如果视图的所有者是组配置文件的成员（GRPPRF 关键字）并且指定了组权限（GRPAUT 关键字），则该组配置文件也将拥有该视图的权限。
> 
> 所有者始终获得视图的 SELECT 特权 WITH GRANT OPTION 和删除视图的授权。
> 
> 所有者还可以获得视图的 INSERT、UPDATE 和 DELETE 权限。如果视图不是只读的，那么在新视图上将获得与所有者在全查询的第一个 FROM 子句中标识的表或视图上相同的权限。只有在也可以授予这些权限的派生权限时，才能授予这些权限。

# php - 相同的 SQL 查询在 Heidi 中有效，不通过 mysql_query

> ID：15741182
> 
> 赞同：0
> 
> 时间：2013-04-01T09:50:49.010
> 
> 标签：php, mysql, sql, request

我有一段代码（不包括与数据库的连接）：

```
$query = "SELECT ....... WHERE name='name1'";
echo $query;
$result = mysql_query($query); 
```

当我运行脚本时，`mysql_num_rows($result)`说找到了 0 行。我从浏览器复制`$query`到 Heidi，运行它，找到 1 行（如预期的那样）。然后我从浏览器直接复制`$query`到`mysql_query`，运行脚本，找到1行。

如果我更改`name1`为其他条目，则脚本运行良好！问题名称的示例没有特殊字符：`Uniwersalna  praline Бордюр 2,3x60`它是 Windows-1251 编码。脚本和数据库被编码在其中。

为什么`mysql_query`找不到行？甚至我们的主要开发人员也无法帮助我...

更新：将所有内容移至`mysqli_*`相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:21:02.780

我是`name`从外部文件中获取的。在文本编辑器和浏览器中（甚至在源代码查看器中）`space`字符看起来正常，但实际上它们是一些其他特殊字符。它们通常在浏览器的源代码查看器中呈现，这就是查询在 Heidi 中正确执行的原因。

# android - 转换后的 SVG 未显示在 android 画布中

> ID：15741185
> 
> 赞同：1
> 
> 时间：2013-04-01T09:51:12.020
> 
> 标签：android, canvas, svg, converter, eps

我有 eps 图像文件。我已经通过在线转换器 nut 转换为 .svg，现在这个转换后的 svg 没有显示在屏幕上。（代码适用于其他原始 svg 图像）。

有没有像我们不能在 android 应用程序中使用转换后的 svg 图像的东西？

这是我的代码：

```
 public void onCreate(Bundle savedInstanceState) 
    { 
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.main); 
    view = new GestureImageView(this);       
    svgImg=sVGParser.getSVGFromResource(getResources(),R.raw.american); 
    view.setImageDrawable(svgImg.createPictureDrawable()); 
    view.setLayoutParams(params); 
    view.setMaxScale(15f); 
    ViewGroup layout = (ViewGroup) findViewById(R.id.layout); 
    layout.addView(view); 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T18:33:32.087

问题很可能出在您使用的在线转换器生成的 SVG 上。

看起来好像您正在使用 svg-android。使用支持更多 SVG 规范的[AndroidSVG](http://code.google.com/p/svg-android/)可能会取得更大的成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:27:35.407

我个人建议你不要使用 SVG，因为 Android 不支持 SVG 光栅化，你可能想在[这里](https://stackoverflow.com/questions/9647770/what-are-best-practices-for-using-svg-icons-on-android)阅读更多讨论。

但如果你真的坚持使用 svg，那么这里有一些有用的解决方案可能会对你有所帮助。

[在 Android 中缩放 SVG](https://stackoverflow.com/questions/7370567/scaling-svgs-in-android?rq=1)

[是否有适用于 Android 的 lite SVG 查看器](https://stackoverflow.com/questions/1955335/is-there-any-lite-svg-viewer-for-android?rq=1)

[svg 图像文件 android](https://stackoverflow.com/questions/13722402/svg-image-files-android)

这里有一些在 android 中显示 SVG 的漂亮教程

[支持 SVG 的 Android ImageView 和 Drawable](http://www.codeproject.com/Articles/136239/Android-ImageView-and-Drawable-with-SVG-Support)

[安卓。支持 SVG 的 ImageView](http://www.codeproject.com/Articles/130791/Android-ImageView-with-SVG-Support)

我本可以为此创建一个示例代码，但我现在在 Xcode 中。

# javascript - 如何在不上传的情况下显示图像。

> ID：15741190
> 
> 赞同：-1
> 
> 时间：2013-04-01T09:51:29.113
> 
> 标签：javascript, jquery

如何上传图像而不保存在服务器中并每小时删除一次临时文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:02:38.413

通常，当用户上传图像时，它会自动存储在服务器上。在临时目录或您告诉的方向。如果您不想在服务器上保存该文件，请使用 html5 localStorage。 [https://www.ibm.com/developerworks/mydeveloperworks/blogs/bobleah/entry/html5_code_example_store_images_using_localstorage57?lang=en](https://www.ibm.com/developerworks/mydeveloperworks/blogs/bobleah/entry/html5_code_example_store_images_using_localstorage57?lang=en)

这是另一个可以帮助您的链接： [Loading an image to localStorage and setting an image src to that location](https://stackoverflow.com/questions/11582556/loading-an-image-to-localstorage-and-setting-an-image-src-to-that-location)

# postgresql - 根据某些条件显示计数

> ID：15741191
> 
> 赞同：1
> 
> 时间：2013-04-01T09:51:30.773
> 
> 标签：postgresql, postgresql-8.4

前几天我问了一个问题。这是那个链接。 [与max()对应的count()](https://stackoverflow.com/questions/15676574/count-corresponding-to-max-of-different-values-satisfying-some-condition)

现在使用同一组表[（SQL Fiddle）](http://www.sqlfiddle.com/#!11/f5243)我想检查不同的条件

如果第一个问题是关于与状态最大值相关的计数，那么这个问题是关于根据每个项目的下一个状态显示计数。

**解释**

正如您在表 user_approval 中看到的，appr_prjt_id=1 有 3 种不同的状态，即 10、20、30。下一个状态将是 40（每批准一次，状态会增加 10），依此类推。那么有没有可能表明有一个项目的状态是等待40呢？它的计数只能在输出中显示对应于 40 的状态（而不是状态 10、20、30 等）

**期望的输出：**

```
 10   |    20  |  30   |   40

location1     0    |    0   |   0   |   1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:47:24.840

不确定是什么`the next status will be 40`意思。但是假设每次获得批准时状态都会增加 10，那么以下应该可以工作：

```
SELECT * 
FROM user_projects pr
WHERE EXISTS (
  SELECT * FROM user_approval ex
  WHERE ex.appr_prjt_id = pr.proj_id
  AND ex.appr_status = 30
  )
AND NOT EXISTS (
  SELECT * FROM user_approval nx
  WHERE nx.appr_prjt_id = pr.proj_id
  AND nx.appr_status >= 40
  ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T05:22:12.763

您可以使用类似于以下的查询来获取每个下一个状态要求的计数：

```
select
    sum(case when ua.appr_status = 10 then 1 else 0 end) as app_waiting_20,
    sum(case when ua.appr_status = 20 then 1 else 0 end) as app_waiting_30,
    sum(case when ua.appr_status = 30 then 1 else 0 end) as app_waiting_40
from
    user_approval ua; 
```

这个解决方案的好处是只有一次表扫描，您也可以在查询结果中添加各种其他计数/总和。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T10:00:23.450

```
select * from user_approval where appr_status
= (select max(appr_status) from user_approval where appr_status < 40); 
```

SQL小提琴：-http://www.sqlfiddle.com/#!11 [/ f5243/10](http://www.sqlfiddle.com/#!11/f5243/10)

# php - 如何设置两个模块帐户和联系人之间的关系

> ID：15741200
> 
> 赞同：0
> 
> 时间：2013-04-01T09:52:01.533
> 
> 标签：php, soap, sugarcrm

我有以下使用方法“set_relationship”SOAP 方法设置关系的函数，

```
public function setrelationship() {
    $arr = array(
        "session" => $_SESSION['crm_sessionID'],
        'set_relationship_value' => array(
            "module_`entname" => 'Contacts',
            "id" => '667c8f2f-0fa7-d62f-350a-515447ae9054',
            "module_name" => 'Accounts',
            "module_id" => 'dd3a6387-e2e4-1ae6-4c37-515931596121'
        )
    );

    $res = $this->client->call('set_relationship', $arr);
    print_r($arr);

    return $res;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T11:57:29.720

您应该遵循以下模式来定义关系参数：

```
public function setrelationship() {
$arr= array(
  'session'=> $_SESSION['crm_sessionID'],
  'set_relationship_value'=>array(
  'module1'=>'Contacts',                                        //primary module
  'module1_id'=>667c8f2f-0fa7-d62f-350a-515447ae9054,           //primary module id
  'module2'=>'Accounts',                                        //secondary module
  'module2_id'=>'dd3a6387-e2e4-1ae6-4c37-515931596121'          //secondary module id
  )
 ); 
$res = $client->call('set_relationship', $arr);

    return $res;
} 
```

# linux - 在linux上安装phpsh，Python报错

> ID：15741212
> 
> 赞同：3
> 
> 时间：2013-04-01T09:52:47.287
> 
> 标签：linux, phpsh

我正在尝试在 Ubuntu 上安装 phpsh，并且我在安装指南中做了所有事情，但是我收到了这个错误：

```
Starting php
Traceback (most recent call last):
 File "/usr/local/bin/phpsh", line 47, in <module>
   verbose=opts.verbose)
 File "/usr/local/lib/python2.7/dist-packages/phpsh/__init__.py", 
   line 503, in __init__
   self.php_open_and_check()
 File "/usr/local/lib/python2.7/dist-packages/phpsh/__init__.py", 
   line 641, in php_open_and_check
   self.php_open()
 File "/usr/local/lib/python2.7/dist-packages/phpsh/__init__.py", 
   line 698, in php_open
   preexec_fn=os.setsid)
 File "/usr/lib/python2.7/subprocess.py", line 679, in __init__
   errread, errwrite)
 File "/usr/lib/python2.7/subprocess.py", line 1259, in _execute_child
   raise child_exception
OSError: [Errno 2] No such file or directory 
```

为什么我会收到这些错误？如何在 Linux 上安装 phpsh？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:56:05.577

使用以下命令从终端打开 ~/.bashrc：

```
linux@terminal:vi ~/.bashrc 
```

在其中设置 PYTHONPATH 和路径：

```
export PYTHONPATH=~/lib/python2.6/site-packages 

//Put the above value as your site-packages directory location, 
//yours may have a different python version number. 
```

然后`~/bin`根据您的目录结构添加到您的 PATH 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-13T04:13:57.693

## 在 linux 上安装 phpsh 的演练

[( http://www.phpsh.org/](http://www.phpsh.org/) ) 站点上的 phpsh 安装指南只为您提供了在 linux 上启动和运行的部分详细信息。

**陷阱：**

1.  如果您没有正确配置 PHP，phpsh 将无法在您的系统上运行。
2.  如果没有正确配置 python，phpsh 将无法正常运行。
3.  如果 gcc 未正确设置，则 phpsh 将无法正确安装。
4.  您可能需要 python 开发头文件才能使 phpsh 工作。

**这是我在 Fedora 17 机器上安装 phpsh 的所有具体步骤**

```
cd /home/el

sudo yum install php

sudo yum install php-posix

sudo yum install python

sudo yum install python-devel

git clone git://github.com/facebook/phpsh.git

cd /home/el/phpsh

sudo easy_install readline

python setup.py build

sudo python setup.py install 
```

在编辑器中打开 /home/el/.bashrc 并在底部添加这一行：

```
export PYTHONPATH="/home/el/lib/python2.7/site-packages" 
```

在将其粘贴到那里之前，请确保该目录存在。您可能必须将 更改`python2.7`为不同的数字以反映您的实际版本。重启终端。

**然后，最后，它按照宣传的方式运行：**

```
el@defiant ~ $ phpsh
Starting php
php> echo "sweet lady freedom lets make out!  " . 1337;
sweet lady freedom lets make out!  1337
php> 
```

然后看我的帖子试驾一下这个工具： [如何使用PHP交互shell](https://stackoverflow.com/questions/15767606/how-to-use-the-php-interactive-shell)

**如果您正在将其调整为其他版本的 Linux，请注意**

您可能必须使用 python-dev 而不是 python-devel。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-28T10:54:06.750

昨天我也遇到了这个问题，因为我是 PHP 的新手。最后我发现了问题。

在安装 phpsh 之前，您必须需要从 apt-get 安装**php5-cli 。**

另请记住，还应安装所需的 python 包。为此，请访问[https://github.com/facebookarchive/phpsh](https://github.com/facebookarchive/phpsh)。

我假设您已经拥有 python 并且您正在使用 Ubuntu 14.04 或更高版本。在安装 python 包时，您可能会遇到一些其他错误，因为它可能需要您安装 easy-install 等。但是不要担心，您会收到非常详细的错误，这些错误会告诉您确切的操作。

希望这能解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-03T02:18:12.390

Sooooooooooooooooooo 我也有这个问题。

## phpsh 正在检查您系统上的 php，但没有找到它。

`$ sudo apt-get install php5`

### 这部分是记录不良的问题。请参阅 Traceback 中的行：

`File "/usr/local/lib/python2.7/dist-packages/phpsh/__init__.py", line 641, in php_open_and_check self.php_open()`

关键是我试过`sudo apt-get install php`了，现在显然没有用，但由于某种原因我没有坚持下去！

# java - java中的意外输出

> ID：15741220
> 
> 赞同：-2
> 
> 时间：2013-04-01T09:53:35.880
> 
> 标签：java

我写了一个代码 -

```
// Node Class
class aNode {

    // Node Contents
    int NodeInt;
    char NodeChar;

    // constructor
    aNode() {
    }

    aNode(int x, char y) {
        NodeInt = x;
        NodeChar = y;
    }
}

class MainClass {

    static aNode node = new aNode();

    public static void main(String[] args) {

        node = null;
        function(node);

        if (node == null) {
            System.out.println("Node is null");
        }
    }

    static void function(aNode x) {
        if (x == null) {
            System.out.println("Node is null");
        }

        x = new aNode(5, 'c');

        System.out.println(x.NodeInt);
        System.out.println(x.NodeChar);
    }
} 
```

我预计输出是 -

```
Node is null
5
c 
```

但是当程序返回到 main 时，node 的值又被设置为 null。所以我得到的输出是 -

```
Node is null
5
c
Node is null 
```

请帮我修改代码以获得所需的输出。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T09:58:12.757

你应该知道，那`aNode node`是`aNode x`对不同对象的引用。它是 Java 功能之一 -**仅**按值传递。这意味着，当你打电话时

```
function(node); 
```

您没有传递`node`对方法的引用`function(...)`，而是创建了对同一对象的新引用。但是排队

```
x = new aNode(5,'c'); 
```

您正在设置`x`对新对象的引用。所以，`node` *仍然*引用 null 和`x`引用 new `aNode`。

要了解有关在 Java 中传递参数的更多信息，[请阅读下一篇文章](http://docs.oracle.com/javase/tutorial/java/javaOO/arguments.html)。

> 引用数据类型参数（如对象）也按值传递给方法。这意味着当方法返回时，传入的引用仍然引用与之前相同的对象。但是，如果对象字段的值具有适当的访问级别，则可以在方法中更改它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:58:03.133

您正在传递一个静态对象，但在方法 function() 中，您没有更改对象***node***的值。您仅更改其他对象的值。所以在 main 中，***节点***的值只有 null。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T09:58:07.057

通常，这是因为 Java 会将 aNode 对象的引用副本传递给您的方法。更改此参考不会更改原始参考。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T10:01:23.073

在 function() 内部，x 只是一个局部变量。当您在 Java 中重新分配引用时，您正在修改引用本身的内容，而不是被引用的对象之一。Java 中无法传递对象的地址。如果你想要这样的行为，你可以尝试使用像 Wrapper 这样的泛型类

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T10:01:30.097

**在 Java 中，真正的传递引用是不可能的。Java 通过值传递所有内容，包括引用。**. 因此，您必须稍微更改代码以获得所需的输出：

```
class aNode{

    //Node Contents
    int NodeInt;
    char NodeChar;

    //constructor
    aNode(){
    }
    aNode(int x, char y){
        NodeInt = x;
        NodeChar = y;
    }
}

class JavaApplication8{

    static aNode node = new aNode();

    public static void main(String[] args){

        node = null;
        node=function(node);

        if(node == null){
            System.out.println("Node is null");
        }
    }

    static aNode function(aNode x){
        if(x == null)
        {
            System.out.println("Node is null");
        }

        x = new aNode(5,'c');

        System.out.println(x.NodeInt);
        System.out.println(x.NodeChar);
        return x;
    }
} 
```

**输出：**

```
Node is null
5
c 
```

# android - 如何通过android应用程序执行Shell命令？

> ID：15741221
> 
> 赞同：0
> 
> 时间：2013-04-01T09:53:46.413
> 
> 标签：android

首先，我是 Android 新手。

如何执行以下shell命令

```
echo "1" > /sys/devices/enable 
```

在一个安卓应用程序中。

我参考了很多链接，但我没有得到解决方案。

我应该在清单文件中提到在应用程序中执行 shell 命令的任何权限吗？？？。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:02:30.027

为什么不用Java写？

```
try{
    FileWriter fw = new FileWriter(new File("/sys/devices/enable"));
    fw.write('1');
    fw.close();
}catch(IOExceprion e){} 
```

如果你真的想调用一个 shell，试试这个：

```
Runtime rt = Runtime.getRuntime();
Process p = rt.exec(new String[]{"/system/bin/sh", "-c", "echo \"1\" > /sys/devices/enable"); 
```

在尝试上述任何方法之前，请确保您的设备首先植根。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T10:07:41.880

```
 try{
            Process process;            
            process = Runtime.getRuntime().exec("echo "1" > /sys/devices/enable");
            BufferedReader in = new BufferedReader(new InputStreamReader(process.getInputStream()));
    }
    catch (InterruptedException e) 
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
} 
```

# haskell - Haskell WinGHC 运行程序与性能统计

> ID：15741224
> 
> 赞同：0
> 
> 时间：2013-04-01T09:53:59.960
> 
> 标签：haskell, compiler-construction

使用 WinGHC，我如何使用 +RTS -sstderr 选项运行我的程序以获取编译时间、内存使用或其他任何感兴趣的统计信息？

目前我正在使用命令行： ghc -rtsopts -O3 -prof -auto-all Main.hs

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:41:46.120

使用 WinGHCi 设置您的程序所在的活动目录，例如

```
 Prelude> :cd C:\Haskell 
```

然后，当您按照上面之前的评论进入正确的目录时，输入：

```
Prelude> :! ghc +RTS -s -RTS -O2 -prof -fprof-auto Main.hs 
```

“Main.hs”应该是您的程序名称。

这将提供如下统计信息：

```
 152,495,848 bytes allocated in the heap
  36,973,728 bytes copied during GC
  10,458,664 bytes maximum residency (5 sample(s))
   1,213,516 bytes maximum slop
          21 MB total memory in use (0 MB lost due to fragmentation)

                                Tot time (elapsed)  Avg pause  Max pause
 Gen  0       241 colls,     0 par    0.14s    0.20s     0.0008s    0.0202s
 Gen  1         5 colls,     0 par    0.08s    0.12s     0.0233s    0.0435s
 etc..........
 etc............. 
```

可以设置其他标志以查看其他统计信息。

# javascript - 窗口替换后执行函数

> ID：15741225
> 
> 赞同：0
> 
> 时间：2013-04-01T09:54:02.150
> 
> 标签：javascript, dom, angularjs

`angular.js`我用with发送请求`$http`并得到一些响应，之后我必须更新页面并调用`timer`函数：

```
$http({method: 'POST', url: url_api, data: {login_username: username, login_password: password}}).success(function(data, status, headers, config) {
 // parse data
 ....
 window.location.replace("/");
 // call timer
 timer();
} 
```

哪里`timer`：

```
function timer(){
  document.getElementById("span_count_down").innerHTML = 'Time is out!';
  return;
} 
```

但是当我更新页面时，我没有看到`Time is out!`，`innerHTML`我看到了以前`innerHTML`的。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:08:08.357

当您调用`location.replace()`时，页面被卸载并且不再执行脚本。当新页面加载时，您的脚本不会执行，因为它没有在此页面上调用。

# wpf - 当前线程不在单线程单元中

> ID：15741228
> 
> 赞同：1
> 
> 时间：2013-04-01T09:54:23.863
> 
> 标签：wpf, task

我正在开发一个 WPF 应用程序。我在按钮单击事件中使用了两个“任务”来并行执行。

一个任务调用“Method1”，它从服务器下载文件。第二个任务调用“Method2”。

Method2包含以下操作：

1.  从服务器下载 2 个文件
2.  解析和读取文件的内容
3.  抓取网站以获取网站详细信息

在抓取操作中，我们正在创建一个 WebBrowser 对象来加载站点的内容。

问题是 - 在执行 button_click 事件时 - 我收到以下错误：

![在此处输入图像描述](https://i.stack.imgur.com/GlgpV.png)

我该如何解决这个问题？任何帮助，将不胜感激。

谢谢，

兰尼什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:58:46.803

WebBrowser 是一个控件，不能用于跨线程。我的建议是使用 HttpWebRequest、HttpWebResponse 和[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)库来废弃 HTML

# android - 获取包含参数的 YouTube 视频 ID

> ID：15741234
> 
> 赞同：6
> 
> 时间：2013-04-01T09:54:53.740
> 
> 标签：android, youtube, video-streaming, android-videoview

在我的 Android 应用程序中，我有一个嵌入式 YouTube 视频。

我从原始网址获取 Youtube 视频 ID，如下所示：

```
private String extractYoutubeId(String url) {

    String video_id = "";
    if (url != null && url.trim().length() > 0 && url.startsWith("http")) {

        String expression = "^.*((youtu.be" + "\\/)"
                + "|(v\\/)|(\\/u\\/w\\/)|(embed\\/)|(watch\\?))\\??v?=?([^#\\&\\?]*).*";
        CharSequence input = url;
        Pattern pattern = Pattern.compile(expression, Pattern.CASE_INSENSITIVE);
        Matcher matcher = pattern.matcher(input);
        if (matcher.matches()) {
            String groupIndex1 = matcher.group(7);
            if (groupIndex1 != null && groupIndex1.length() == 11)
                video_id = groupIndex1;
        }
    }

    return video_id;
} 
```

这适用于这样的原始网址：[http ://www.youtube.com/watch?v=A7ry4cx6HfY](http://www.youtube.com/watch?v=A7ry4cx6HfY)

当我这样做时，视频被加载并播放得非常好，但质量很差。（我认为是 240p 甚至更糟）

因此，通过谷歌搜索，我知道您只需要添加一个参数，如`&vq=large`或`&vq=hd1080`获得 480p/1080p。

但是当我使用这样的网址[http://www.youtube.com/watch?v=A7ry4cx6HfY&vq=hd1080](http://www.youtube.com/watch?v=A7ry4cx6HfY&vq=hd1080)时，该参数被忽略并且质量仍然很差。

如何获得更好质量的视频？当然，假设视频以这种质量可用。为什么我的参数被忽略？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-16T03:09:43.160

在此处尝试此代码。

```
// (?:youtube(?:-nocookie)?\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})
final static String reg = "(?:youtube(?:-nocookie)?\\.com\\/(?:[^\\/\\n\\s]+\\/\\S+\\/|(?:v|e(?:mbed)?)\\/|\\S*?[?&]v=)|youtu\\.be\\/)([a-zA-Z0-9_-]{11})";

public static String getVideoId(String videoUrl) {
    if (videoUrl == null || videoUrl.trim().length() <= 0)
        return null;

    Pattern pattern = Pattern.compile(reg, Pattern.CASE_INSENSITIVE);
    Matcher matcher = pattern.matcher(videoUrl);

    if (matcher.find())
        return matcher.group(1);
    return null;
} 
```

你可以从这里找到我的整个解析器代码 [https://github.com/TheFinestArtist/YouTubePlayerActivity/blob/master/library/src/main/java/com/thefinestartist/ytpa/utils/YoutubeUrlParser.java](https://github.com/TheFinestArtist/YouTubePlayerActivity/blob/master/library/src/main/java/com/thefinestartist/ytpa/utils/YoutubeUrlParser.java)

这是我用来播放 Youtube 视频的有用开源。 [https://github.com/TheFinestArtist/YouTubePlayerActivity](https://github.com/TheFinestArtist/YouTubePlayerActivity)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-03T16:29:49.170

我通过使用**适用于 Android 的官方 Google Youtube API 解决了这个问题。**

尝试自己实现视频的获取可能不是最好的主意。使用 API 可以为您做到这一点，而且效果很好。

**编辑**

这里是 API 的链接：**[https ://developers.google.com/youtube/android/player/](https://developers.google.com/youtube/android/player/)**

# javascript - 在 Backbone.js 中的 collection.create 之后更新 id

> ID：15741242
> 
> 赞同：0
> 
> 时间：2013-04-01T09:55:29.077
> 
> 标签：javascript, jquery, model-view-controller, backbone.js

在集合上，我使用**create**函数将模型的新实例保存到服务器。此 POST 请求成功，我返回新模型。

```
{id:135, type:tweet, start:08:00:00, end:14:00:00, text:foo, date:2013-04-01} 
```

但是，我需要使用从服务器返回的新**model.id更新集合，并且****create中的****同步**方法似乎没有这样做。我应该向 create 函数添加回调以使用更改的属性更新模型吗？

 **```
var AddScheduleBlock = Backbone.View.extend({
    saveScheduleBlock: function (ev){ 
        var text = "foo"

        this.model.set({
            text: text
        });

        var block = blockCollection.create(this.model, {
                silent: true,
                wait: true
            });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:59:53.697

Backbone 的 Collection`create`方法调用`save`下面的 Model 方法（[代码参考](http://backbonejs.org/docs/backbone.html#section-108)）。您不需要自己设置 id，Backbone 会为您完成。

Model`save`方法将响应属性设置到模型中（[代码参考](http://backbonejs.org/docs/backbone.html#section-62)）

如果创建没有完成这项工作，您应该尝试调试它。**

# javascript - 替换任何地方的字符串，除非它在引号内

> ID：15741243
> 
> 赞同：3
> 
> 时间：2013-04-01T09:55:36.197
> 
> 标签：javascript, regex, string, quotes

我想全部替换`:)`为`:D`，除非它们在引号内`"`

示例 1：

```
Hey man :D, how're you? :) My friend told me "this can't be true :)" 
```

变成

```
Hey man :D, how're you? :D My friend told me "this can't be true :)" 
```

如您所见，`:)`如果它被 . 包围，则不会被替换`"`。如果没有这个条件，那就很简单了吧？我正在使用 Javascript (jQuery) 来完成这一切。

如果使用正则表达式显然无法做到这一点，那么替代建议是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T10:19:09.657

假设没有双引号是不平衡的，这是应该为您工作的正则表达式：

```
:\)(?=(?:(?:[^"]*"){2})*[^"]*$) 
```

**解释：**这个正则表达式使用了一个积极的前瞻，它基本上匹配 0 次或多次出现的一对`some text until a double quote is found`ie`([^"]*"){2}`在每个匹配项的右侧（RHS）`:)`。

简单来说，这意味着仅当 a 在双引号之外时才替换它，因为双引号内的所有匹配项在 RHS 上`:)`都将具有奇数个匹配项。`[^"]*"`

### 现场演示： 1\. [http://www.rubular.com/r/3aixZy5bYR](http://www.rubular.com/r/3aixZy5bYR)

### 现场演示：2\. [http://ideone.com/C679NW](http://ideone.com/C679NW)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:16:24.137

```
function parseSmiley(str){
    return str.replace(/(?!"):\)(?!")/g, ":D");
}

console.log(parseSmiley('Hey man :D, how\'re you? :) My friend told me "this can\'t be true :)"'); 
```

[和一个输入的小提琴，所以你可以测试](http://jsfiddle.net/Q8v4D/)。

`:)`基本上，我们只是将所有未封装的实例替换`" "`为`:D`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-03T19:33:32.140

如果您需要变量来控制这一点 - 那么您可以尝试

```
function doReplace(find, repl, str, fullWordsOnly, ignoreSQuotes,  ignoreDQuotes, caseSensitive) {
   if (caseSensitive == undefined) caseSensitive = false;

   var flags = 'gm';
   if (!caseSensitive) flags += 'i';

   var control = escapeRegExp(find);
   if (ignoreDQuotes) control = '(?!\\B"[^"]*)' + control + '(?![^"]*"\\B)';
   if (ignoreSQuotes) control = '(?!\\B\'[^\']*)' + control + '(?![^\']*\'\\B)';
   if (fullWordsOnly) control = '\\b' + control + '\\b';

   return str.replace(new RegExp(control, flags), repl);

} 
```

请注意，当使用诸如 how're 和 can't 之类的缩写词时，单引号可能会出现问题，因此我还提供了一个 hack 来解决这个问题：

```
// Fix any abbreviated words ('re or 't) 
str=str.replace(/'re\/b/gi, '&apos;re');
str=str.replace(/'t\b/gi, '&apos;t'); 
```

有关工作演示，请参见[http://jsfiddle.net/Abeeee/ct7vayz5/4/](http://jsfiddle.net/Abeeee/ct7vayz5/4/)

# android - 如何在后台返回从异步任务返回的结果

> ID：15741247
> 
> 赞同：0
> 
> 时间：2013-04-01T09:55:45.477
> 
> 标签：android

我正在后台运行一个任务，并从中返回一个结果。结果在异步任务完成之前返回为 null。我该如何解决它

```
public Result CallServer(String zObjectNameP, String zMethodNameP, String QueryStringP)
{
 aResultM=new Result();
MainAynscTask asyncTask = new MainAynscTask();
try
{
asyncTask.execute(zObjectNameP,zMethodNameP,QueryStringP);
}
catch(Exception ex)
{

}
return aResultM;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:32:37.957

4 个步骤 当一个异步任务被执行时，该任务会经历 4 个步骤：

1.  onPreExecute()，在任务执行之前在 UI 线程上调用。此步骤通常用于设置任务，例如通过在用户界面中显示进度条。

2.  doInBackground(Params...)，在 onPreExecute() 完成执行后立即在后台线程上调用。此步骤用于执行可能需要很长时间的后台计算。异步任务的参数传递到这一步。计算的结果必须由这一步返回，并将传递回最后一步。此步骤还可以使用 publishProgress(Progress...) 来发布一个或多个进度单位。这些值在 UI 线程上的 onProgressUpdate(Progress...) 步骤中发布。

3.  onProgressUpdate(Progress...)，在调用 publishProgress(Progress...) 后在 UI 线程上调用。执行的时间是不确定的。此方法用于在后台计算仍在执行时在用户界面中显示任何形式的进度。例如，它可用于动画进度条或在文本字段中显示日志。

4.  onPostExecute(Result)，**在后台计算完成后在 UI 线程上调用。后台计算的结果作为参数传递给该步骤。**

使用处理程序

在你的活动中

```
mHandler = new Handler() { 
@Override public void handleMessage(Message msg) { 
  String s=(String)msg.obj;
  tv.setText("Result = "+s);

}
}; 
```

在你的 onPostexecute

```
protected void onPostExecute(String result)//result returned in doInbackground
{
pd.dismiss();
if(result != null)
 {
 Message msg=new Message();
 msg.obj=result.toString();
 mHandler.sendMessage(msg);
 }
} 
```

# php - 将 php 表发送到电子邮件地址

> ID：15741248
> 
> 赞同：-1
> 
> 时间：2013-04-01T09:55:46.010
> 
> 标签：php, email, sendmail, phpmailer

我有从 sql 数据库中检索到的 php 格式的表，记录以表格式显示，我想邮寄从数据库中检索到的记录

这是我的php代码

```
$productList

$sql =mysql_query("Select * from products where id IN(".implode(",",$where).")")
$productCount=mysql_num_rows($sql);
    if ($productCount > 0)   {
while($row = mysql_fetch_array($sql)){
        $id = $row["id"];
         $product_name = $row["item_name"];
         $price = $row["price"];
$productList .= '<div class="coupon">
<table width="618" height="201" border="0">
<tr><td colspan="2" rowspan="4" align="left" valign="top">Name '.$product_name.'" </td>
<td> Expires&nbsp;'.$expiry.'</td>
<td width="129" bgcolor="#033B90">Price '.$price.'</td>
</tr>
</table></div>'; 
```

有没有办法将产品列表结果发送到邮件地址

```
<?php echo $dynamicList; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:04:26.690

Refer to the `mail` [function](http://php.net/manual/en/function.mail.php "function"):

```
mail('to@example.org', 'Subject', $dynamicList); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:17:26.580

```
<?php
// multiple recipients
$to  = 'test@example.com' . ', '; // note the comma
$to .= 'wez@example.com';

// subject
$subject = 'Birthday Reminders for August';

// message
$message = 'HTML message';

// To send HTML mail, the Content-type header must be set
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Additional headers
$headers .= 'To: Mary <mary@example.com>, Kelly <kelly@example.com>' . "\r\n";
$headers .= 'From: Birthday Reminder <birthday@example.com>' . "\r\n";
$headers .= 'Cc: birthdayarchive@example.com' . "\r\n";
$headers .= 'Bcc: birthdaycheck@example.com' . "\r\n";

// Mail it
mail($to, $subject, $message, $headers);
?> 
```

检查php[邮件功能](http://www.php.net/manual/en/function.mail.php)

# javascript - 获取id 包含特定值的标签

> ID：15741249
> 
> 赞同：2
> 
> 时间：2013-04-01T09:55:47.673
> 
> 标签：javascript, jquery, html

我有一个清单：

```
 <ul>
 <li id="l1">1</li>
 <li id="l2">2</li>
 <li id="l3">hi</li>
 </ul> 
```

通过使用jquery，我知道是否有任何`<li>`包含值（比如）嗨。为此，我使用了：

```
if($('li:contains('hi')')){
    alert('Got value');
} 
```

现在我想知道我`<li>`在其中找到值“hi”的 id。我怎么得到那个id？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T09:58:13.567

```
var id = $('li:contains("hi")').attr('id'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T09:59:04.280

用这个：

```
var id = $('li:contains("hi")').attr('id'); 
```

`[**JSFIDDLE**](http://jsfiddle.net/arulmr/XU53p/)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T09:58:04.387

那么 ID 是简单的属性，你可以这样做：

```
.attr("id") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T10:03:24.643

```
var id = jQuery('li:contains("hi")').attr('id'); 
```

# android - 从纵向更改为横向时强制关闭错误

> ID：15741255
> 
> 赞同：0
> 
> 时间：2013-04-01T09:56:07.530
> 
> 标签：android, landscape-portrait

我正在从 Ed Brunette “Hello,Android” 的书中学习 Android 编程

在其中给出了代码（以下），我按原样输入，但仍然出现强制关闭错误。

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@color/Background"
    android:gravity="center"
    android:padding="35dip"
    >
    <Textview
        android:text="@string/main_title"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_gravity="center"
        android:layout_marginBottom="20dip"
        android:textSize="24.5sp"        />
    <TableLayout
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_gravity="center"
        android:stretchColumns="*">
        <TableRow>
            <Button 
                android:id="@+id/continue_button"
                android:text="@string/continue_label"/>
        <Button
            android:id="@+id/new_button"
            android:text="@string/new_game_label"/>               
        </TableRow>
        <TableRow>
            <Button
                android:id="@+id/about_button"
                android:text="@string/about_label" />
            <Button
                android:id="@+id/exit_button"
                androidLtext="@string/exit_label" />

        </TableRow>
        </TableLayout>

</LinearLayout> 
```

原木猫：

```
04-01 15:12:08.370: D/AndroidRuntime(410): Shutting down VM
04-01 15:12:08.370: W/dalvikvm(410): threadid=1: thread exiting with uncaught exception (group=0x40015560)
04-01 15:12:08.420: E/AndroidRuntime(410): FATAL EXCEPTION: main
04-01 15:12:08.420: E/AndroidRuntime(410): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.example.sudoku/org.example.sudoku.Sudoku}: android.view.InflateException: Binary XML file line #10: Error inflating class Textview
04-01 15:12:08.420: E/AndroidRuntime(410):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
04-01 15:12:08.420: E/AndroidRuntime(410):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-01 15:12:08.420: E/AndroidRuntime(410):  at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:2832)
04-01 15:12:08.420: E/AndroidRuntime(410):  at android.app.ActivityThread.access$1600(ActivityThread.java:117)
04-01 15:12:08.420: E/AndroidRuntime(410):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
04-01 15:12:08.420: E/AndroidRuntime(410):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-01 15:12:08.420: E/AndroidRuntime(410):  at android.os.Looper.loop(Looper.java:123)
04-01 15:12:08.420: E/AndroidRuntime(410):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-01 15:12:08.420: E/AndroidRuntime(410):  at java.lang.reflect.Method.invokeNative(Native Method)
04-01 15:12:08.420: E/AndroidRuntime(410):  at java.lang.reflect.Method.invoke(Method.java:507)
04-01 15:12:08.420: E/AndroidRuntime(410):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-01 15:12:08.420: E/AndroidRuntime(410):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-01 15:12:08.420: E/AndroidRuntime(410):  at dalvik.system.NativeStart.main(Native Method)
04-01 15:12:08.420: E/AndroidRuntime(410): Caused by: android.view.InflateException: Binary XML file line #10: Error inflating class Textview
04-01 15:12:08.420: E/AndroidRuntime(410):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
04-01 15:12:08.420: E/AndroidRuntime(410):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
04-01 15:12:08.420: E/AndroidRuntime(410):  at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
04-01 15:12:08.420: E/AndroidRuntime(410):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
04-01 15:12:08.420: E/AndroidRuntime(410):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
04-01 15:12:08.420: E/AndroidRuntime(410):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
04-01 15:12:08.420: E/AndroidRuntime(410):  at android.app.Activity.setContentView(Activity.java:1657)
04-01 15:12:08.420: E/AndroidRuntime(410):  at org.example.sudoku.Sudoku.onCreate(Sudoku.java:11)
04-01 15:12:08.420: E/AndroidRuntime(410):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-01 15:12:08.420: E/AndroidRuntime(410):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-01 15:12:08.420: E/AndroidRuntime(410):  ... 12 more
04-01 15:12:08.420: E/AndroidRuntime(410): Caused by: java.lang.ClassNotFoundException: android.view.Textview in loader dalvik.system.PathClassLoader[/data/app/org.example.sudoku-1.apk]
04-01 15:12:08.420: E/AndroidRuntime(410):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
04-01 15:12:08.420: E/AndroidRuntime(410):  at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
04-01 15:12:08.420: E/AndroidRuntime(410):  at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
04-01 15:12:08.420: E/AndroidRuntime(410):  at android.view.LayoutInflater.createView(LayoutInflater.java:471)
04-01 15:12:08.420: E/AndroidRuntime(410):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:549)
04-01 15:12:08.420: E/AndroidRuntime(410):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
04-01 15:12:08.420: E/AndroidRuntime(410):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
04-01 15:12:08.420: E/AndroidRuntime(410):  ... 21 more
04-01 15:12:12.681: I/Process(410): Sending signal. PID: 410 SIG: 9
04-01 15:12:34.881: W/KeyCharacterMap(424): No keyboard for id 0
04-01 15:12:34.881: W/KeyCharacterMap(424): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
04-01 15:30:15.661: D/AndroidRuntime(495): Shutting down VM
04-01 15:30:15.661: W/dalvikvm(495): threadid=1: thread exiting with uncaught exception (group=0x40015560)
04-01 15:30:15.741: E/AndroidRuntime(495): FATAL EXCEPTION: main
04-01 15:30:15.741: E/AndroidRuntime(495): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.example.sudoku/org.example.sudoku.Sudoku}: android.view.InflateException: Binary XML file line #10: Error inflating class Textview
04-01 15:30:15.741: E/AndroidRuntime(495):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
04-01 15:30:15.741: E/AndroidRuntime(495):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-01 15:30:15.741: E/AndroidRuntime(495):  at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:2832)
04-01 15:30:15.741: E/AndroidRuntime(495):  at android.app.ActivityThread.access$1600(ActivityThread.java:117)
04-01 15:30:15.741: E/AndroidRuntime(495):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
04-01 15:30:15.741: E/AndroidRuntime(495):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-01 15:30:15.741: E/AndroidRuntime(495):  at android.os.Looper.loop(Looper.java:123)
04-01 15:30:15.741: E/AndroidRuntime(495):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-01 15:30:15.741: E/AndroidRuntime(495):  at java.lang.reflect.Method.invokeNative(Native Method)
04-01 15:30:15.741: E/AndroidRuntime(495):  at java.lang.reflect.Method.invoke(Method.java:507)
04-01 15:30:15.741: E/AndroidRuntime(495):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-01 15:30:15.741: E/AndroidRuntime(495):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-01 15:30:15.741: E/AndroidRuntime(495):  at dalvik.system.NativeStart.main(Native Method)
04-01 15:30:15.741: E/AndroidRuntime(495): Caused by: android.view.InflateException: Binary XML file line #10: Error inflating class Textview
04-01 15:30:15.741: E/AndroidRuntime(495):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
04-01 15:30:15.741: E/AndroidRuntime(495):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
04-01 15:30:15.741: E/AndroidRuntime(495):  at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
04-01 15:30:15.741: E/AndroidRuntime(495):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
04-01 15:30:15.741: E/AndroidRuntime(495):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
04-01 15:30:15.741: E/AndroidRuntime(495):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
04-01 15:30:15.741: E/AndroidRuntime(495):  at android.app.Activity.setContentView(Activity.java:1657)
04-01 15:30:15.741: E/AndroidRuntime(495):  at org.example.sudoku.Sudoku.onCreate(Sudoku.java:11)
04-01 15:30:15.741: E/AndroidRuntime(495):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-01 15:30:15.741: E/AndroidRuntime(495):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-01 15:30:15.741: E/AndroidRuntime(495):  ... 12 more
04-01 15:30:15.741: E/AndroidRuntime(495): Caused by: java.lang.ClassNotFoundException: android.view.Textview in loader dalvik.system.PathClassLoader[/data/app/org.example.sudoku-2.apk]
04-01 15:30:15.741: E/AndroidRuntime(495):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
04-01 15:30:15.741: E/AndroidRuntime(495):  at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
04-01 15:30:15.741: E/AndroidRuntime(495):  at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
04-01 15:30:15.741: E/AndroidRuntime(495):  at android.view.LayoutInflater.createView(LayoutInflater.java:471)
04-01 15:30:15.741: E/AndroidRuntime(495):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:549)
04-01 15:30:15.741: E/AndroidRuntime(495):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
04-01 15:30:15.741: E/AndroidRuntime(495):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
04-01 15:30:15.741: E/AndroidRuntime(495):  ... 21 more 
```

我还在学习，我搜索了其他可以帮助我解决问题的问题，但这让我很困惑，因为我仍然不太了解 Android 编程。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:09:23.413

您的布局文件中有一个简单的错字，它应该是`TextView`而不是`Textview`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T10:11:13.160

从您的日志猫：

```
Caused by: android.view.InflateException: Binary XML file line #10: Error inflating class Textview
E/AndroidRuntime(495):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581) 
```

所以我们知道文本视图是个问题。

```
<Textview
        android:text="@string/main_title"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_gravity="center"
        android:layout_marginBottom="20dip"
        android:textSize="24.5sp"        /> 
```

删除结束标记前的空格并将 Textview 更改为 TextView。

```
<TextView
        android:text="@string/main_title"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_gravity="center"
        android:layout_marginBottom="20dip"
        android:textSize="24.5sp"/> 
```

# sql - 带有 2 个变量的 SQL

> ID：15741258
> 
> 赞同：1
> 
> 时间：2013-04-01T09:56:13.897
> 
> 标签：sql, phpmyadmin

我正在做一个 SQL 来给我特定电影的特定电影院的放映日期

我做到了，它正在为电影院工作。我的意思是它显示特定电影院的放映日期...我需要一种方法来显示特定电影院和特定电影的放映日期

```
SELECT show.show_datetime
FROM `cinema`
JOIN `theater` ON `theater`.`cinema_id` = `cinema`.`cinema_id`
JOIN  `show` ON  `show`.`theater_id` =  `theater`.`theater_id` 
WHERE  `cinema`.`cinema_id` = 1 
```

请注意，我有一个表电影和带有 movie_id 的 PK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:14:55.563

我可以看到movie_id上​​的节目和电影表之间存在关系。所以使用下面的查询让我知道

```
SELECT show.show_datetime
FROM `cinema`
JOIN `theater` ON `theater`.`cinema_id` = `cinema`.`cinema_id`
JOIN  `show` ON  `show`.`theater_id` =  `theater`.`theater_id` 
JOIN 'movie' ON `show`.`movie_id` =  `movie`.`movie_id` = 
WHERE  `cinema`.`cinema_id` = 1  AND `movie`.`movie_id` = 2 
```

将电影 ID 从 2 更改为您需要的任何内容

# asp.net - 具有默认值的文本框

> ID：15741259
> 
> 赞同：4
> 
> 时间：2013-04-01T09:56:16.850
> 
> 标签：asp.net, textbox

我想使用显示文本的文本框。

例如：某人@example.com。当用户点击它时，文本框被清除并准备好供用户输入。

![示例文本框](https://i.stack.imgur.com/kXGma.jpg)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T09:57:34.110

如果您正在使用较新的浏览器，那么您可以使用`placeholder`HTML 5 中的新属性

```
<asp:TextBox ID="textBox1" runat="server" placeholder="Someone@exmaple.com"></asp:TextBox> 
```

否则，您也可以使用`onfocus`和事件来执行[此](https://stackoverflow.com/questions/1911301/javascript-watermarks-for-textboxes)`onblur`操作，如此处所述

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T11:10:44.747

你可以用这个，很简单

```
 <input class="status" type="text" size="5" placeholder="started"  /> 
```

占位符显示你想要的文本

希望对你有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T10:06:47.757

You can do the following:

1.  Add textbox to your webpage.
2.  Set the default text in the obj.Text property.
3.  Add properties ( focus & blur events).
4.  On focus event, check if the value = Someone@exmaple.com , then empty the text box.
5.  On blur, check if the textbox is empty, then set the text : Someone@exmaple.com

Hope that helps

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T10:19:19.100

你可以这样使用

```
<TextBox ID="txtone" runat="server" tooltip="Enter comments"
onblur="if(this.value=='') this.value='Someone@exmaple.com';"
onfocus="if(this.value == 'Someone@exmaple.com') this.value='';"
Text="Someone@exmaple.com"></TextBox> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T10:37:27.700

试试这个服务器控制：

```
<asp:TextBox ID="textBox1" runat="server" placeholder="Someone@exmaple.com"></asp:TextBox> 
```

对于 HTML 控件：

```
<input Type="Text" ID="textBox1"  placeholder="Someone@exmaple.com" /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-06T16:29:56.817

如果你想要一个跨浏览器兼容的版本，你可以使用这个 ajax。

```
<ajaxToolkit:TextBoxWatermarkExtender ID="EmailClear" runat="server" TargetControlID="EmailAddress" WatermarkText="Someone@example.com" /> 
```

您只需在每个字段下添加它。

# java - java不能引用类

> ID：15741260
> 
> 赞同：1
> 
> 时间：2013-04-01T09:56:18.280
> 
> 标签：java, reference

```
class MyClass {
   int value;
}
public MyClass test(){
   MyClass mc;
   myMethod(mc, 100);
   if (mc!=null) {
      mc = mc.value;
      return mc;
   }
   return mc;
}
public int myMethod(MyClass mc, int a) {
   mc.value = a + 10;
   return mc;
} 
```

我想让mc作为参考。如果objective-c与此类似：

```
public MyClass test(){
   MyClass *mc;
   myMethod(&mc, 100);

} 
```

请帮我。任何答案都值得赞赏。提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:15:25.633

在java中，我们使用引用变量而不是指针。看到[这个](http://www.csie.ntu.edu.tw/~htlin/course/oop10spring/doc/0301_c2java.handout.01.pdf)和[这个](http://www.horstmann.com/ccc/c_to_java.pdf)

```
class MyClass 
{
   int value;

/*All methods have to belong to a class*/

public MyClass test()
{
 /*MyClass mc; you don't need to pass this to assign value the value will be 
 assigned to the data members of the object(reference variable) which calls the
 function*/       

MyClass mc = myMethod(100);
return mc;
}

public MyClass myMethod(int a) 
{
   value = a + 10;
   return this; //This 'this' will return the current object
}
} 
```

# java - JaxB 读取类层次结构

> ID：15741264
> 
> 赞同：2
> 
> 时间：2013-04-01T09:56:29.663
> 
> 标签：java, xml-parsing, jaxb

只是[使用 JaxB](https://stackoverflow.com/questions/15676401/parsing-class-hierarchy-using-jaxb)问题扩展 Parsing 类层次结构。想要使用 JaxB 读取以下 xml 文件

```
<IMPORT>
    <TABLE NAME="USER">
        <ROW>
            <USER_ID>1</USER_ID>
            <ROW_VERSION>1</ROW_VERSION>
            <USER_NAME>Navnath</USER_NAME>
            <LOGIN>Navnath</LOGIN>
            <LOGIN_PASSWORD>Navnath</LOGIN_PASSWORD>
        </ROW>
        <ROW>
            <USER_ID>2</USER_ID>
            <ROW_VERSION>1</ROW_VERSION>
            <USER_NAME>Kumbhar</USER_NAME>
            <LOGIN>Kumbhar</LOGIN>
            <LOGIN_PASSWORD>Kumbhar</LOGIN_PASSWORD>
        </ROW>
    </TABLE>

    <TABLE NAME="WORK">
        <ROW>
            <WORK_ID>1</WORK_ID>
            <WORK_NAME>Work1</WORK_NAME>
            <ROW_VERSION TYPE="N">1</ROW_VERSION>
        </ROW>
        <ROW>
            <WORK_ID>2</WORK_ID>
            <WORK_NAME>Work2</WORK_NAME>
            <ROW_VERSION TYPE="N">1</ROW_VERSION>
        </ROW>
    </TABLE>
    <TABLE> ... </TABLE>
    <TABLE> ... </TABLE>
    <TABLE> ... </TABLE>
</IMPORT> 
```

您可以在上面的 xml 文件中看到每个表中的列名不同。我想将此数据插入数据库。我尝试为此创建类层次结构，但我不知道该怎么做。我的 ROW 类将包含每个表的不同 xml 元素，这是我无法配置的区域。请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:28:07.417

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

您可以在此用例中利用 MOXy 的`@XmlDescriminatorNode`/`@XmlDescriminatorValue`扩展（请参阅：[http](http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-moxy-extension.html) ://blog.bdoughan.com/2010/11/jaxb-and-inheritance-moxy-extension.html ）。

**进口**

```
import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement(name="IMPORT")
@XmlAccessorType(XmlAccessType.FIELD)
public class Import {

    @XmlElement(name="TABLE")
    private List<Table> tables;

} 
```

**桌子**

注释用于指定 XML 属性，该`@XmlDescriminatorNode`属性将用于指示将实例化哪个子类。JAXB 实现不能通过反射引入类的子类，我们将使用`@XmlSeeAlso`注解来引用它们。

```
import javax.xml.bind.annotation.XmlSeeAlso;
import org.eclipse.persistence.oxm.annotations.XmlDiscriminatorNode;

@XmlDiscriminatorNode("@NAME")
@XmlSeeAlso({UserTable.class, WorkTable.class})
public abstract class Table {

} 
```

**用户表**

`@XmlDescriminatorValue`注释用于指定`NAME`对应于特定子类的属性值。

```
import java.util.List;
import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlDiscriminatorValue;

@XmlDiscriminatorValue("USER")
@XmlAccessorType(XmlAccessType.FIELD)
public class UserTable extends Table {

    @XmlElement(name="ROW")
    private List<UserRow> rows;

} 
```

**用户行**

```
import javax.xml.bind.annotation.XmlElement;

public class UserRow {

    @XmlElement(name="USER_ID")
    private int userID;

    @XmlElement(name="USER_NAME")
    private String userName;

} 
```

**工作表**

```
import org.eclipse.persistence.oxm.annotations.XmlDiscriminatorValue;

@XmlDiscriminatorValue("WORK")
public class WorkTable extends Table {

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目（请参阅： [http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) )。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

```
import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Import.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum15741264/input.xml");
        Import result = (Import) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(result, System.out);
    }

} 
```

**输入.xml/输出**

下面是运行演示代码的输入和输出。

```
<?xml version="1.0" encoding="UTF-8"?>
<IMPORT>
   <TABLE NAME="USER">
      <ROW>
         <USER_ID>1</USER_ID>
         <USER_NAME>Navnath</USER_NAME>
      </ROW>
      <ROW>
         <USER_ID>2</USER_ID>
         <USER_NAME>Kumbhar</USER_NAME>
      </ROW>
   </TABLE>
   <TABLE NAME="WORK"/>
</IMPORT> 
```

**替代解决方案**

或者，仅使用标准 JAXB API，您可以尝试使用以下方法`XmlAdapter`

*   [http://blog.bdoughan.com/2012/01/jaxb-and-inhertiance-using-xmladapter.html](http://blog.bdoughan.com/2012/01/jaxb-and-inhertiance-using-xmladapter.html)

# php - 用javascript在php中隐藏html表单

> ID：15741265
> 
> 赞同：0
> 
> 时间：2013-04-01T09:56:29.723
> 
> 标签：php, javascript, html

我正在尝试使用 php 中的 html 表单传递参数，我有一个填充 html 表的 php 页面：

```
$html = '';
$html .= '<form id="form1" action="search.php" method="post">';
$html .= '<tr>';
$html .= '<td>id</td>';
$html .= '<td><a href="javascript:;"onclick="document.getElementById(\'form1\').submit();">name</a></td>';
$html .= '<td>surname</td>';
$html .= '<td>language_id</td>';
$html .= '<td><span class="label label-success">Status_code</span></td>';
$html .= '</tr>';
$html .= '<input type="hidden" name="mess" value=\'Hello\'>';
$html .= '</form>'; 
```

我可以在我的 html 中看到表格，当我点击 href 时，search.php 页面打开了，但我看不到“Hello”值，这是 search.php：

```
<?php

$name0 = $_POST['mess'];
echo $name0;

?> 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:00:56.470

正如您在单击 href 时所说的那样，您正在打开 search.php 并尝试获取帖子值是不可能的。

或者通过附加像 search.php?mess=YourValue 这样的 url 来传递值

或提交表格以便您可以使用 $_POST 阅读

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T10:05:18.557

以你的形式

```
<?php
$html = '';
$html .= '<form id="form1" action="search.php" method="post">';
$html .= '<tr>';
$html .= '<td>id</td>';
$html .= '<td><a href="javascript:;"onclick="document.getElementById(\'form1\').submit();">name</a></td>';
$html .= '<td>surname</td>';
$html .= '<td>language_id</td>';
$html .= '<td><span class="label label-success">Status_code</span></td>';
$html .= '</tr>';
$html .= '<input type="hidden" name="mess" value=\'Hello\'>';
$html .= '</form>';
echo $html;
?> 
```

在 search.php 中

```
<?php echo $_REQUEST['mess'];?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T10:06:17.643

我试过这个，老实说我不知道​​你为什么有`.=`这么多，我把它们都去掉了

```
<?php $html = '
<form id="form1" action="search.php" method="post">
<tr>
<td>id</td>
<td><a href="javascript:;"onclick="document.getElementById(\'form1\').submit();">name</a></td>
<td>surname</td>
<td>language_id</td>
<td><span class="label label-success">Status_code</span></td>
</tr>
<input type="submit" name="mess" value="Hello">
</form> ';

echo $html; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T10:06:36.693

问题在于您的浏览器而不是 php。一个好的浏览器不会显示这个错误。试试这个

```
<?php
$html = '';
$html = '<table>';
$html .= '<form id="form1" action="search.php" method="post">';
$html .= '<tr>';
$html .= '<td>id</td>';
$html .= '<td><a href="javascript:;"onclick="document.getElementById(\'form1\').submit();">name</a></td>';
$html .= '<td>surname</td>';
$html .= '<td>language_id</td>';
$html .= '<td><span class="label label-success">Status_code</span></td>';
$html .= '</tr>';
$html .= '<input type="hidden" name="mess" value=\'Hello\'>';
$html .= '</form>';
$html .= '</table>';
echo $html;
?> 
```

和 search.php

```
<?php

$name0 = $_POST['mess'];
echo $name0;

?> 
```

# windows-phone-7 - 在window phone 7中更改Listpicker项目的fontSize

> ID：15741267
> 
> 赞同：1
> 
> 时间：2013-04-01T09:56:37.410
> 
> 标签：windows-phone-7

我有两个 ListPicker。我已经绑定了来自数据库的 lpkfamilymember 和来自数组值的 lpkpaymentmode。我想要两个作为全屏模式和全屏我想要项目字体大小 40。在 lpkfamilymemberfrom 中，我实现了字体大小 40，因为我已经完成了以下代码。但我不知道如何实现这对于 lpkpaymentmode 因为它没有任何数据模板因为我使用数组绑定它。

```
 <DataTemplate x:Name="PickerFullModeItemTemplate">
            <StackPanel Orientation="Horizontal" Margin="16 21 0 20">
                <TextBlock Text="{Binding Name}" Margin="16 0 0 0" FontSize="43" FontFamily="{StaticResource PhoneFontFamilyLight}"/>
            </StackPanel>
        </DataTemplate>

   <toolkit:ListPicker Background="White" FontSize="44" ExpansionMode="FullScreenOnly"     x:Name="lpkpaymentmode"/>
  <toolkit:ListPicker ItemTemplate="{StaticResource PickerItemTemplate}" Background="White"  FullModeItemTemplate="{StaticResource PickerFullModeItemTemplate}" ExpansionMode="FullScreenOnly"       x:Name="lpkfamilymember"/> 
```

和绑定代码：

```
 String[] Mode = { "Cash", "Credit Card", "Debit Card","Net Banking" };

        InitCustomPickerDialog();

        this.lpkpaymentmode.ItemsSource = Mode;

        this.lpkfamilymember.ItemsSource = GetfamilyList();

     public IList<FamilyVO> GetfamilyList()
    {
        // Fetching data from local database
        IList<FamilyVO> FamilyList = null;
        using (ExpenseDataContext Empdb = new ExpenseDataContext(strConnectionString))
        {
            IQueryable<FamilyVO> ExpQuery = from Exp in Empdb.Family select Exp;
            FamilyList = ExpQuery.ToList();

        }

        return FamilyList;
    } 
```

我已经尝试了很多代码来将 lpkpaymentmode 的项目大小设置为 40 在完整模式下，但每次它显示一些没有改变的修复大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:28:52.567

这个怎么样：

```
<DataTemplate x:Name="ItemTemplateForPayment">
    <TextBlock Text="{Binding }" Margin="16 0 0 0" FontSize="40" FontFamily="{StaticResource PhoneFontFamilyLight}"/>
</DataTemplate> 
```

然后像这样申请：

```
<toolkit:ListPicker ItemTemplate="{StaticResource PickerItemTemplate}" Background="White"  FullModeItemTemplate="{StaticResource ItemTemplateForPayment}" ExpansionMode="FullScreenOnly" x:Name="lpkpaymentmode"/> 
```

# php - 有没有办法通过 .htaccess 文件得到这个？

> ID：15741268
> 
> 赞同：0
> 
> 时间：2013-04-01T09:56:38.493
> 
> 标签：php, apache, mod-rewrite

在我的站点根目录中。有donghua.php和index.php。现在，有没有办法使用`.htaccess`文件让访问者访问我的网站。默认显示`example.com/donghua.php`。不是`example.com/index.php`。谢谢你。服务器是 Apache。

ps：用户仍然可以访问`example.com/index.php`

我`DirectoryIndex donghua.php`在.htaccess 中使用。默认页面没问题。但是当我访问`example.com/index.php`它时重定向到`example.com/donghua.php`. 如果我禁止它重定向我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:03:56.793

If you have access to the virtual host config file (or you should even be able to do this in htaccess) you can set the DirectoryIndex to be donghua.php if you want, i.e. instead of something like this:

```
DirectoryIndex index.html index.php default.html 
```

Just do:

```
DirectoryIndex donghua.php 
```

So whenever someone goes to your website, example.com, your apache installation will read donghua.php as the default index file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:52:31.973

**使您的网址可爱并适合搜索引擎排名。**

```
 Options +FollowSymLinks
 RewriteEngine on
 RewriteCond %{HTTP_HOST} ^yoursite.com
 RewriteRule (.*) http://www.yoursite.com/$1 [R=301,L]
 RewriteCond %{THE_REQUEST} ^[A-Z]{3,9} /index.html HTTP/
 RewriteRule ^index.html$ http://www.yoursite.com/ [R=301,L] 
```

**重定向**

```
redirect 301 /old-page.php http://www.yoursite.com/new-page.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T11:30:10.277

在 index.php 的 .htaccess 文件中更改您的重定向规则。如果您打开 .htaccess 文件，您可以找到以下几行，

RewriteCond %{THE_REQUEST} ^.*/example.php

RewriteRule ^(.*)example.php$ [http://www.test.com/](http://www.test.com/) $1 [R=301,L]

更改或删除 index.php 的此规则。最好删除或评论它，然后它不会重定向到另一个页面

如果浏览器请求文件名 index.php，则“RewriteCond”此代码检查代码。如果满足条件，则将执行下一行，即“RewriteRule”。此“RewriteRule”将重定向您的 URL。

在 .htaccess 文件中搜索并找到名称“index.php”。注释掉那几行。注释的语法是“#”。

例子：

#RewriteCond

#重写规则

在更改 .htaccess 文件中的任何内容之前进行备份。

# google-sheets - 谷歌电子表格自定义范围

> ID：15741269
> 
> 赞同：1
> 
> 时间：2013-04-01T09:56:45.343
> 
> 标签：google-sheets

我必须将数据从 spreadhSheet A Column 复制`A3:Infinity`到 spreadhSheet B Column A `A253:Infinity`。我如何在范围内指定`Infinity`OR `endOfColumn`，而 A3,Infinity 和 A253, Infinity 之间也会有空行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:24:05.887

在电子表格 B 的单元格 A253 中，写入：

```
= IMPORTRANGE(<<key_of_spreadsheet_A>>; "<sheet_name>!A3:A") 
```

其中“key_of_spreadsheet_A”是电子表格 A 的键（您可以在 URL 中找到），“工作表名称”是电子表格 A 中要从中导入的工作表的名称。

# imagemagick - 如何获取 ImageMagick 过滤器目录

> ID：15741271
> 
> 赞同：0
> 
> 时间：2013-04-01T09:56:51.163
> 
> 标签：imagemagick

在某些版本之前，有一个命令可以获取`filters`（和`coders`）ImageMagick 目录：

```
MagickCore-config --filter-path 
```

但是现在（我使用 6.8.0 版本）似乎没有这样的命令了。此命令给出错误。似乎没有这样的选择`--filter-path`。

那么我应该如何获得`filters`目录？

MagickCore-config 是一个脚本。它执行 pkg-config 调用。/opt/local/lib/pkgconfig/ImageMagick.pc 的内容（不存在过滤器目录的链接）：

```
prefix=/opt/local
exec_prefix=${prefix}
libdir=${exec_prefix}/lib
includedir=${prefix}/include/ImageMagick

Name: ImageMagick
Description: ImageMagick - Convert, Edit, and Compose Images
Version: 6.8.0
Libs: -L${libdir} -lMagickCore
Cflags: -I${includedir} 
```

我在我的系统上手动找到了过滤器目录`/opt/local/lib/ImageMagick-6.8.0/modules-Q16/filters`。但我需要一种自动化的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:19:19.860

错误在下一个方式被超越：

根据[http://www.imagemagick.org/script/resources.php](http://www.imagemagick.org/script/resources.php)有一个过滤器和编码器的用户相关目录：`$HOME/.magick`。所以只需在你的脚本中使用它。

实际上，您需要设置以下环境变量：

```
export MAGICK_CODER_FILTER_PATH=$HOME/.magick/filters 
```

# mysql - mysql search LIKE 不适用于长短语

> ID：15741273
> 
> 赞同：2
> 
> 时间：2013-04-01T09:56:58.617
> 
> 标签：mysql, database

我有一个 MySQL 表，输入“MyISAM”，排序规则：“latin1_swedish_ci”。在其中，我有一个名为“内容”的列。

在里面，我有一排内容如下：

```
<p>The state will have a different advantage over most other states, with one of the largest populations in the nation to blablablabla. </p> 
```

我的查询在 phpMyAdmin 和我的 PHP 文件中是这样的：

```
SELECT *
FROM `pages`
WHERE `content` LIKE '%with one of the largest populations%'
ORDER BY `pages`.`title` ASC
LIMIT 0 , 30 
```

返回 0 行。

奇怪的是，如果我将查询编辑为：

```
SELECT *
FROM `pages`
WHERE `content` LIKE '%with one of the largest%'
ORDER BY `pages`.`title` ASC
LIMIT 0 , 30 
```

然后，返回 1 行，它可以工作。

是否有任何设置可能将搜索查询限制为几个单词或几个字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:17:44.627

很可能还有任何其他空白字符，否则，您的查询似乎很好。

试试这个`largest populations`也应该返回 0 recs。

因此，替换之前列中的那些字符，进行搜索。

[你可以在这里找到一些帮助](https://www.google.com/search?q=remove%20white%20space%20characters%20mysql&aq=f&oq=remove%20white%20space%20characters%20mysql&sourceid=chrome&ie=UTF-8#hl=en&newwindow=1&sclient=psy-ab&q=remove%20special%20invisible%20characters%20mysql&oq=remove%20special%20invisible%20characters%20mysql&gs_l=serp.3...211754.214750.1.216179.8.8.0.0.0.6.568.4369.5-8.8.0...0.0...1c.1.7.psy-ab.XQHsd20s9Y4&pbx=1&bav=on.2,or.r_cp.r_qf.&bvm=bv.44442042,d.bGE&fp=2582cfa7b828ddbd&biw=1280&bih=899)

# c# - 如何查找所有实现接口并调用方法的对象

> ID：15741274
> 
> 赞同：1
> 
> 时间：2013-04-01T09:57:03.377
> 
> 标签：c#, .net, wpf, reflection, interface

我有一个`UserControl`有几个孩子`UserControl`的，那些`UserControl`有孩子用户控件的。

考虑一下：

```
MainUserControl
  TabControl
    TabItem
      UserControl
        UserControl
          UserControl : ISomeInterface
    TabItem
      UserControl
        UserControl
          UserControl : ISomeInterface
    TabItem
      UserControl
        UserControl
          UserControl : ISomeInterface
    TabItem
      UserControl
        UserControl
          UserControl : ISomeInterface 
```

这是我到目前为止所拥有的，但没有找到`ISomeInterface`：

```
PropertyInfo[] properties = MainUserControl.GetType().GetProperties();
foreach (PropertyInfo property in properties)
{
    if (typeof(ISomeInterface).IsAssignableFrom(property.PropertyType))
    {
        property.GetType().InvokeMember("SomeMethod", BindingFlags.InvokeMethod, null, null, null);
    }
} 
```

是否有可能通过反射`UserControl`从`MainUserControl`该实现中找到所有 child 并在该接口上`ISomeInterface`调用方法（ ）？`void SomeMethod()`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T10:07:02.483

您将需要递归地遍历 MainUserControl 中的所有子控件。

这是您可以使用的辅助方法：

```
/// <summary>
/// Recursively lists all controls under a specified parent control.
/// Child controls are listed before their parents.
/// </summary>
/// <param name="parent">The control for which all child controls are returned</param>
/// <returns>Returns a sequence of all controls on the control or any of its children.</returns>

public static IEnumerable<Control> AllControls(Control parent)
{
    if (parent == null)
    {
        throw new ArgumentNullException("parent");
    }

    foreach (Control control in parent.Controls)
    {
        foreach (Control child in AllControls(control))
        {
            yield return child;
        }

        yield return control;
    }
} 
```

然后：

```
foreach (var control in AllControls(MainUserControl))
{
    PropertyInfo[] properties = control.GetType().GetProperties();
    ... Your loop iterating over properties 
```

或者（如果这对您有用，那就更好了，因为它更简单）：

```
foreach (var control in AllControls(MainUserControl))
{
    var someInterface = control as ISomeInterface;

    if (someInterface != null)
    {
        someInterface.SomeMethod();
    }
} 
```

或者，使用 Linq（需`using System.Linq`要这样做）：

```
foreach (var control in AllControls(MainUserControl).OfType<ISomeInterface>())
    control.SomeMethod(); 
```

这似乎是最好的。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T10:15:29.547

也许我自己看错了方向。我对马修斯回答的评论的意思是：

```
 foreach (var control in AllControls(MainUserControl))
 {
     if (control is ISomeInterface)
     {

     }
 } 
```

或者

```
 foreach (var control in AllControls(MainUserControl))
 {
     var someInterface = control as ISomeInterface;
     if (someInterface != null)
     {
          someInterface.SomeMethod();
     }
 } 
```

# razor - 在 MVC4 视图中使用模型时出现装配错误

> ID：15741276
> 
> 赞同：0
> 
> 时间：2013-04-01T09:57:10.127
> 
> 标签：razor, asp.net-mvc-4

```
@using System.Data.Entity;

@model SurveyBuilderViewModel.SurveyViewModel

@{
    ViewBag.Title = "addQuestions";
    Layout = "~/Views/Shared/_Layout.cshtml";

}

@Html.TextBoxFor(m => Model.QuestionModel.QuestionStatement); 
```

它给了我错误

```
'System.Data.Objects.DataClasses.EntityObject' 类型在未引用的程序集中定义。您必须添加对程序集 'System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' 的引用

```

我该如何解决它，我在哪里做错了..????

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:59:42.553

我认为问题很清楚

> 您必须添加对程序集 'System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' 的引用

在您的项目中引用该 DLL。

# iphone - 如何根据 Xcode 中的当前日期解析不同的文件？

> ID：15741277
> 
> 赞同：0
> 
> 时间：2013-04-01T09:57:11.367
> 
> 标签：iphone, xml, algorithm, parsing

我有以下问题：我正在构建一个电视指南应用程序。我正在从 Internet 上的 xml 文件中解析频道列表。这是我的代码：

```
-(void)loadListing
{
    NSURL *urlListing = [NSURL URLWithString:@"http://pik.bg/TV/bnt1/29.03.2013.xml"];

    NSData *webDataListing = [NSData dataWithContentsOfURL:urlListing];

    NSString *xPathQueryListing = @"//elem/title";

    TFHpple *parserListing = [TFHpple hppleWithXMLData:webDataListing];

    NSArray *arrayListing = [parserListing searchWithXPathQuery:xPathQueryListing];

    NSMutableArray *newArrayListing = [[NSMutableArray alloc] initWithCapacity:0];

    for (TFHppleElement *element in arrayListing)
    {
        Listing *shows = [[Listing alloc] init];
        [newArrayListing addObject:shows];
        shows.broadcast = [[element firstChild] content];
    }

    _shows = newArrayListing;
    [self.tableView reloadData];
} 
```

看第一行 - 我的文件名是**/.../01.04.2013.xml** 明天的文件将是**/.../02.04.2013.xml**等等。如何让它根据当前日期解析不同的文件？像这样：今天解析/.../01.04.2013，明天将解析/.../02.04.2013等等。？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:03:54.130

1.  首先，使用 URL 中使用的相同格式获取今天的日期。（您必须使用单独`date`的 ,`month`和`year`组件）

2.  然后，将该日期转换为`NSString`对象

3.  形成一个`NSString`赞`NSString *strToDay = [NSString stringWithFormat:@http://pik.bg/TV/bnt1/%@.xml",strToDay];`

4.  使用字符串进入`NSURL`,like; `NSURL *urlListing = [NSURL URLWithString:strToDay];`

**注意**此解决方案仅在您的 URL 包含您指定的日期格式时才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:31:14.283

您可以使用`NSDateFormatter`配置的 , 属性来生成适当格式的字符串。使用`NSDate`返回的实例`[NSDate date]`获取今天的日期，并使用格式化程序生成字符串。最后，将日期的字符串表示形式插入 URL 字符串并`NSURL`从中构建一个。

```
//  Assuming the TV schedule is derived from the Gregorian calendar
NSCalendar *gregorianCalendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

//  Use the user's time zone
NSTimeZone *localTimeZone = [NSTimeZone localTimeZone];

//  Instantiate a date formatter, and set the calendar and time zone appropriately
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setCalendar:gregorianCalendar];
[dateFormatter setTimeZone:localTimeZone];

//  set the date format. Handy reference here: http://unicode.org/reports/tr35/tr35-6.html#Date_Format_Patterns
[dateFormatter setDateFormat:@"dd.MM.yyyy"];

//  [NSDate date] returns a date corresponding to 'right now'.
//  Since we want to load the schedule for today, use this date.
//  stringFromDate: converts the date into the format we have specified
NSString *dateString = [dateFormatter stringFromDate:[NSDate date]];

//  insert the date string into the URL string and build the URL
NSString *URLString = [NSString stringWithFormat:@"http://pik.bg/TV/bnt1/%@.xml", dateString];
NSURL *URL = [NSURL URLWithString:URLString];

NSLog(@"URL = %@", URL); 
```

# ruby-on-rails - Rspec 或 Rake 哪个更好

> ID：15741284
> 
> 赞同：0
> 
> 时间：2013-04-01T09:57:41.370
> 
> 标签：ruby-on-rails, rspec, rake

我有一个简单的问题 rspec 或 rake 哪个更好更可靠。

问候， AB

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T10:02:58.953

RSpec 和 Rake 是两个不同的东西。

两者在他们打算做的事情上都是可靠的！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T10:01:33.697

苹果和橘子我的朋友。

Rspec - [http://en.wikipedia.org/wiki/RSpec](http://en.wikipedia.org/wiki/RSpec)

耙子 - [http://en.wikipedia.org/wiki/Rake_（软件）](http://en.wikipedia.org/wiki/Rake_(software))

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-01T11:48:39.053

Rake 是一种用于管理与您的应用程序相关的各种任务的工具，例如更新数据库模式或向其中添加示例数据。

RSpec 是一种工具，可帮助您为应用程序编写测试。

# python - Python：获取列表第 n 个元素的函数

> ID：15741287
> 
> 赞同：0
> 
> 时间：2013-04-01T09:57:56.253
> 
> 标签：python, list, map

我有一个字符串列表，例如

```
['ABC', 'DEF', 'GHIJ'] 
```

我想要一个包含每个字符串的第一个字母的字符串列表，即

```
['A', 'D', 'G']. 
```

我考虑过使用 map 和返回列表第一个元素的函数来做到这一点：`my_list[0]`。但我怎么能把这个传递给`map`？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T09:59:21.260

你可以试试

```
In [14]: l = ['ABC', 'DEF', 'GHIJ']

In [15]: [x[0] for x in l]
Out[15]: ['A', 'D', 'G'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T09:59:05.633

您*应该*使用列表推导，例如[@avasal](https://stackoverflow.com/a/15741308/1219006) ，因为它更 Pythonic，但这里是如何使用`map`：

```
>>> from operator import itemgetter   
>>> L = ['ABC', 'DEF', 'GHIJ'] 
>>> map(itemgetter(0), L)
['A', 'D', 'G'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T10:02:21.937

像这样使用列表理解：

```
results = [i[0] for i in mySrcList] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T10:05:45.977

单程：

```
l1=['ABC', 'DEF', 'GHIJ']
l1=map(lambda x:x[0], l1) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T10:02:08.373

```
a=['ABC','DEF','GHI']
b=[]
for i in a:
    b.append(i[0]) 
```

`b`是你需要的数组。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-01T10:11:24.417

试试这个。

```
>>> myArray=['ABC', 'DEF', 'GHIJ']
>>> newArray=[]
>>> for i in map(lambda x:x[0],myArray):
...     newArray.append(i)
...
>>> print(newArray)
['A', 'D', 'G'] 
```

# jquery - ajaxForm 不工作，即 10

> ID：15741300
> 
> 赞同：1
> 
> 时间：2013-04-01T09:58:50.950
> 
> 标签：jquery, form-submit

我正在使用 ajax 表单插件。这是插件的链接[http://www.malsup.com/jquery/form/#api](http://www.malsup.com/jquery/form/#api) ..

```
jQuery('#update-personal-information-form').ajaxForm( {

                            beforeSubmit: function() {
                jQuery('#update-personal-information-form').validate({

                errorClass: "error",
                    errorElement: "div",
                rules:{
                    first_name:{required:true},
                    last_name:{required:true},                  
                    email:{required: true, email:true},
                    dob:{required: true,dateISO: true}

                },
                messages:{
                    first_name:{required:" First Name:cannot be blank"},
                    last_name:{required:" Last Name:cannot be blank"},
                    email:{required:" Email:cannot be blank"},
                    dob:{required:" Date Of Birth:cannot be blank",dateISO: "Invalid date. Must be formatted yyyy-mm-dd"}

                }
                });
                return jQuery('#update-personal-information-form').valid();
            },

            success: function() {

                    var url1 = './index.php?r=user/personal_information';

                    jQuery("#dialog_edit_personalinfo").remove();

                    jQuery("#body1").load(url1);

            } 
    }); 
```

这在所有浏览器中都可以正常工作，但在 ie 10 中，它作为表单提交和页面正在刷新。我从过去四个小时开始搜索，但没有找到任何结果，请帮助我。谢谢你..

# asp.net-mvc-3 - linq to excel 的 64 位替代品

> ID：15741303
> 
> 赞同：2
> 
> 时间：2013-04-01T09:58:58.820
> 
> 标签：asp.net-mvc-3, excel, iis-7, linq-to-excel

我有一个 ASP.NET MVC 3 应用程序，我想在其中导入 excel 文件。

我设法使用`linq-to-excel`图书馆做到了这一点。但是当我在 IIS 上部署应用程序时，我得到了一个错误，原来是由 IIS 在 64 位系统上运行引起的。

这可以通过`32-bits applications`在 IIS 中启用池选项来解决。

这会影响应用程序的性能吗？如果是，是否有另一种替代方法`linq-to-excel`可以在 64 位上运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T10:02:40.173

[https://code.google.com/p/linqtoexcel/wiki/UsingLinqToExcel](https://code.google.com/p/linqtoexcel/wiki/UsingLinqToExcel)

> **x64 支持**
> 
> 如果您希望 LinqToExcel 在 64 位应用程序中运行，请确保使用 64 位版本的库。
> 
> [您还需要确保](http://www.microsoft.com/downloads/info.aspx?na=41&srcfamilyid=c06b8369-60dd-4b64-a44b-84b371ede16d&srcdisplaylang=en&u=http://download.microsoft.com/download/2/4/3/24375141-E08D-4803-AB0E-10F2E3A07AAA/AccessDatabaseEngine_x64.exe)在计算机上安装了 64 位版本的 Access 数据库引擎。
> 
> 并确保手动将 DatabaseEngine 属性设置为 DatabaseEngine.Ace

```
var excel = new ExcelQueryFactory("excelFileName");
excel.DatabaseEngine = DatabaseEngine.Ace; 
```

# windows-phone-7 - LongListSelector 前景色

> ID：15741306
> 
> 赞同：1
> 
> 时间：2013-04-01T09:59:10.500
> 
> 标签：windows-phone-7, windows-phone-8

一直在这里搜索没有运气，非常简单的问题，在我的模拟器上，所有字体颜色都是白色的（这是我想要的）。

在设备上测试字体现在都是黑色的，我已经设法通过在元素上设置前景色来改变它，但是我无法通过代码在 longlistselector 上这样做。

这对我有用：

```
longListSelector.Background = new SolidColorBrush(Colors.Transparent); 
```

但是，这没有效果：

```
longListSelector.Foreground = new SolidColorBrush(Colors.White); 
```

我可以尝试在 longlistselector 上设置文本颜色的任何其他方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T00:22:18.917

前景色不同的原因是因为默认样式。PhoneAccentBrush 会根据您的“电话”设置为白色背景还是黑色背景而变化。

您的 longListSelector.Foreground 无法正常工作的原因可能是因为 phoneaccentbrush 是在样式中的 longlistselector 内的项目上设置的？

# json - 杰克逊在将对象序列化为 json 时包含“类”字段

> ID：15741307
> 
> 赞同：2
> 
> 时间：2013-04-01T09:59:16.973
> 
> 标签：json, jackson

我需要我的 Grails 应用程序与使用 Jackson 的客户端进行通信 (JSON)。默认情况下，Grails 在生成的 json 中包含“类”。另一方面，默认杰克逊`ObjectMapper`不识别“类”，它会引发错误。

`@JsonTypeInfo(use=JsonTypeInfo.Id.CLASS, include=JsonTypeInfo.As.PROPERTY, property="class")`通过添加正在使用的每个 POJO 类，我找到了解决方案。

但是，我不喜欢这种方法。因为现在我的 POJO 将依赖于杰克逊的 jar。还有其他简单的选择吗？

我试图从中找出答案`objectMapper.getSerializationConfig(). ...`，但仍然找不到替换该注释的替代方法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:27:58.887

您是使用类型信息进行多态实例化还是忽略该信息？您可能可以`@JsonIgnoreProperties({"class"})`在您的课程中使用。

如果你真的不想给你的类添加注解，你可以使用 mix-in 机制。尽管将注释直接添加到您的类中要容易得多，但如果您当然控制类。

```
mapper.addMixInAnnotations(YourClass.class, TypeInfoMixIn.class);
mapper.addMixInAnnotations(YourSecondClass.class, TypeInfoMixIn.class);
// etc.

@JsonTypeInfo(use=JsonTypeInfo.Id.CLASS, include=JsonTypeInfo.As.PROPERTY, property="class")
public class TypeInfoMixIn {} 
```

# mysql - 如果任何字段包含 NULL，MySQL CONCAT 将返回 NULL

> ID：15741314
> 
> 赞同：213
> 
> 时间：2013-04-01T09:59:51.540
> 
> 标签：mysql, sql, null, concat

我的表“设备”中有以下数据

```
affiliate_name  affiliate_location  model     ip             os_type    os_version 

cs1             inter               Dell     10.125.103.25   Linux      Fedora  
cs2             inter               Dell     10.125.103.26   Linux      Fedora  
cs3             inter               Dell     10.125.103.27   NULL       NULL    
cs4             inter               Dell     10.125.103.28   NULL       NULL 
```

我执行了下面的查询

```
SELECT CONCAT(`affiliate_name`,'-',`model`,'-',`ip`,'-',`os_type`,'-',`os_version`) AS device_name
FROM devices 
```

它返回下面给出的结果

```
cs1-Dell-10.125.103.25-Linux-Fedora
cs2-Dell-10.125.103.26-Linux-Fedora
(NULL)
(NULL) 
```

如何摆脱这种情况，以便它应该忽略 NULL AND 结果应该是

```
cs1-Dell-10.125.103.25-Linux-Fedora
cs2-Dell-10.125.103.26-Linux-Fedora
cs3-Dell-10.125.103.27-
cs4-Dell-10.125.103.28- 
```

* * *

## 回答 #1

> 赞同：355
> 
> 时间：2013-04-01T10:01:32.447

通过将其包装在空字符串中来转换`NULL`值`COALESCE`

```
SELECT CONCAT(COALESCE(`affiliate_name`,''),'-',COALESCE(`model`,''),'-',COALESCE(`ip`,''),'-',COALESCE(`os_type`,''),'-',COALESCE(`os_version`,'')) AS device_name
FROM devices 
```

* * *

## 回答 #2

> 赞同：148
> 
> 时间：2013-04-01T10:03:45.773

改用[CONCAT_WS](https://dev.mysql.com/doc/refman/5.7/en/string-functions.html#function_concat-ws)：

> CONCAT_WS() 不会跳过空字符串。但是，它会跳过分隔符参数之后的任何 NULL 值。

```
SELECT CONCAT_WS('-',`affiliate_name`,`model`,`ip`,`os_type`,`os_version`) AS device_name FROM devices 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-11-27T00:04:18.007

`CONCAT_WS`如果第一个字段为 Null，仍会为我生成 null。我通过在开头添加一个零长度字符串来解决这个问题，如

```
CONCAT_WS("",`affiliate_name`,'-',`model`,'-',`ip`,'-',`os_type`,'-',`os_version`) 
```

然而

```
CONCAT("",`affiliate_name`,'-',`model`,'-',`ip`,'-',`os_type`,'-',`os_version`) 
```

当第一个字段为 Null 时生成 Null。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-01-05T13:04:19.323

要在 CONCAT_WS 中具有与 CONCAT 中相同的灵活性（例如，如果您不希望每个成员之间使用相同的分隔符），请使用以下命令：

```
SELECT CONCAT_WS("",affiliate_name,':',model,'-',ip,... etc) 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-04-01T10:15:32.870

```
SELECT CONCAT(isnull(`affiliate_name`,''),'-',isnull(`model`,''),'-',isnull(`ip`,''),'-',isnull(`os_type`,''),'-',isnull(`os_version`,'')) AS device_name
FROM devices 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2021-04-13T21:13:36.687

**原因：**

> [MySQL :: 参考手册 :: 12.8 字符串函数和运算符](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_concat)说：
> 
> `CONCAT()`如果任何参数为**NULL** ，则返回**NULL**。

 ****解决方案：**

> [MySQL :: 参考手册 :: 12.5 流控制功能](https://dev.mysql.com/doc/refman/8.0/en/flow-control-functions.html#function_ifnull)说：
> 
> ```
> IFNULL(expr1,expr2) 
> ```
> 
> 如果*expr1*不是**NULL**，**IFNULL()**返回*expr1*；否则返回 expr2。

```
SELECT
    CONCAT(
        IFNULL(`affiliate_name`, ''),
        '-',
        IFNULL(`model`, ''),
        '-',
        IFNULL(`ip`, ''),
        '-',
        IFNULL(`os_type`, ''),
        '-',
        IFNULL(`os_version`, '')
    ) AS device_name
FROM
    devices 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-09-24T13:42:26.603

您可以使用如下 if 语句

```
select CONCAT(if(affiliate_name is null ,'',affiliate_name),'- ',if(model is null ,'',affiliate_name)) as model from devices 
```**

# text - 随机文本淡出

> ID：15741315
> 
> 赞同：0
> 
> 时间：2013-04-01T09:59:55.273
> 
> 标签：text, random, ios6, fading

如何让随机文本从 to`text1`淡出`text2`？

我的代码如下：

```
 -(IBAction)generateNumbers; {
    int randomNumber = arc4random() % 1;
    switch (randomNumber) {
        case 0:
            label.text = @"text1";
            break;
        case 1:
            label.text = @"text2";
            break;
        default:
            break;
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:06:32.760

```
-(IBAction)generateNumbers; {
int randomNumber = arc4random() % 2;
switch (randomNumber) {
case 0:
    label.text = @"text1";
    break;
case 1:
    label.text = @"text2";
    break;
default:
    break;
 }
} 
```

For fadeIn/Out use this methods

```
- (void) setTextWithFade {
   [label setAlpha:1];
   [UIView beginAnimations:nil context:nil];
   [UIView setAnimationDuration:1];
   [UIView setAnimationDelegate:self];
   [UIView setAnimationDidStopSelector:@selector(fadeDidStop)];
   [lbl setAlpha:0];
   [UIView commitAnimations];
}

- (void)fadeDidStop {
   label.text = @"new text";
   [UIView beginAnimations:nil context:NULL];
   [UIView setAnimationDuration:1];
   [lbl setAlpha:1];
   [UIView commitAnimations];
} 
```

call the first method when you are click the button like this:

```
 [self setTextWithFade]; 
```

# android - 按下后关闭使用意图启动的应用程序

> ID：15741324
> 
> 赞同：0
> 
> 时间：2013-04-01T10:00:44.460
> 
> 标签：android, android-intent

从我的应用程序“myApp”中，我正在使用各自的包名和以下代码启动单独的应用程序（比如应用程序 A、B、C 等）：

```
Intent LaunchIntent =  getActivity().getPackageManager().getLaunchIntentForPackage(packagename);

if(null!=LaunchIntent)
   {
      startActivity(LaunchIntent);
   } 
```

现在，当我按下返回时，我想关闭启动的应用程序。我无法控制启动的应用程序。现在，当我按下返回时，我回到“myApp”，但启动的应用程序的音频一直在后台播放。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:07:06.393

据我了解，音频是在 Service 或 Activity 中播放的，您不熟悉[Activities](http://developer.android.com/guide/components/activities.html#ShuttingDown)和[Activity Lifecycle](http://developer.android.com/training/basics/activity-lifecycle/index.html)。如果音频在 Service 中播放，则必须在 onBackPressed 方法中停止 Service。如果音频在 Activity 中，则应在正在播放的 Activity 的覆盖 onPause 方法中添加停止音频播放。如果您启动第三方应用程序（并且您无法访问代码），您不能让它从您的应用程序中停止。

# jquery - jQuery mouseenter 切换

> ID：15741328
> 
> 赞同：0
> 
> 时间：2013-04-01T10:00:51.663
> 
> 标签：jquery

我有三个“标签”，我使用的图像如下：-

![在此处输入图像描述](https://i.stack.imgur.com/oCx1S.png)

对于每个选项卡，有三个图像：-

*   bookaccount.png （默认 - 橙色）
*   bookaccount-a.png（活动 - 白色）
*   bookaccount-h.png（悬停 - 蓝色）

bookcash.png 和 bookguest.png 也是如此。

默认情况下，我希望“来宾”保留为活动选项卡，而其他选项卡为橙色，这就是我所拥有的：

```
<div id="main-online-user">

    <a href="javascript:void(0)" onclick="changesrc('main-online-frame','http://www.marandy.com/one2oneob/login-guest.php')"><img alt="One 2 One Guest" id="img-onlinebooking-guest" class="left" src="images/bookguest-a.png" /></a>

    <a href="javascript:void(0)" onclick="changesrc('main-online-frame','http://www.marandy.com/one2oneob/login.php')"><img alt="One 2 One Account" id="img-onlinebooking-acc" class="left" src="images/bookaccount.png" /></a>

    <a href="javascript:void(0)" onclick="changesrc('main-online-frame','http://www.marandy.com/one2oneob/login-guest.php')"><img alt="One 2 One Cash" id="img-onlinebooking-cash" class="left" src="images/bookcash.png" /></a>

</div> 
```

对于悬停事件，我现在这样做：-

```
 $("#img-onlinebooking-guest").hover(function() { 
         $(this).attr("src", "images/bookguest-h.png");
    });

    $("#img-onlinebooking-guest").mouseleave(function() { 
         $(this).attr("src", "images/bookguest.png");
    }); 
```

问题是（假设访客处于活动状态 - 白色），并且我将鼠标悬停在它上面，当我离开该元素时，当它仍然是活动选项卡时，它会将图像更改回橙色（默认）。

我想要做的是： -

如果图像是一个活动元素，那么当您将鼠标悬停在它上面时，什么也不会发生。（这可能是更好的选择）

或者，如果活动元素悬停，则在 mouseout 时，它会恢复为 mouseenter 事件之前的颜色。

我不确定我该怎么做，所以我将不胜感激！

（我知道我可以使用 jQuery 选项卡，但客户想要这些图像，所以我别无选择）

**编辑：：**

我已将“活动”类添加到#img-onlinebooking-guest 并将 jQuery 更改为：-

```
 $("#img-onlinebooking-guest").click(function() { 

         $(this).addClass('active');
         $('#img-onlinebooking-cash, #img-onlinebooking-acc').removeClass('active');
         $(this).attr("src", "images/bookguest-a.png");
         $('#img-onlinebooking-acc').attr("src", "images/bookaccount.png");
         $('#img-onlinebooking-cash').attr("src", "images/bookcash.png");

    });

    $("#img-onlinebooking-acc").click(function() { 

         $(this).addClass('active');
         $('#img-onlinebooking-guest, #img-onlinebooking-cash').removeClass('active');
         $(this).attr("src", "images/bookaccount-a.png");
         $('#img-onlinebooking-guest').attr("src", "images/bookguest.png");
         $('#img-onlinebooking-cash').attr("src", "images/bookcash.png");

    });

    $("#img-onlinebooking-cash").click(function() { 
         $(this).addClass('active');
         $('#img-onlinebooking-guest, #img-onlinebooking-acc').removeClass('active');
         $(this).attr("src", "images/bookcash-a.png");
         $('#img-onlinebooking-guest').attr("src", "images/bookguest.png");
         $('#img-onlinebooking-acc').attr("src", "images/bookaccount.png");

    });

    $('#img-onlinebooking-guest:not(.active)').hover(

        function () {
            $(this).attr("src", "images/bookguest-h.png");
        },

        function () {
            $(this).attr("src", "images/bookguest.png");

    });

    $('#img-onlinebooking-acc:not(.active)').hover(

        function () {
            $(this).attr("src", "images/bookaccount-h.png");
        },

        function () {
            $(this).attr("src", "images/bookaccount.png");

    });

    $('#img-onlinebooking-cash:not(.active)').hover(

        function () {
            $(this).attr("src", "images/bookcash-h.png");
        },

        function () {
            $(this).attr("src", "images/bookcash.png");

    }); 
```

它看起来很乱，但无论如何，它适用于“访客”选项卡，我在 HTML 中添加了“活动”类，但不适用于其他选项卡。如果我单击“现金”，它会使图像处于活动状态（白色），但在鼠标移出时，当它应该保持白色时，它仍然会将颜色更改回橙色（默认），因为我已在单击时将“活动”类添加到此元素。

有任何想法吗？

你可以在这里看到这个；[关联](http://www.marandy.com/one2onev2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:28:07.467

你可以这样做：

单击图像设置一个名为的类，让我们说`active`

```
$("#img-onlinebooking-guest").click(function () {
    $(this).addClass('active');
}); 
```

然后如果它不是活动链接，我们可以做悬停逻辑

```
$('#img-onlinebooking-guest:not(.active)').hover(

function () {
    $(this).attr("src", "images/bookguest-h.png");
},

function () {
    $(this).attr("src", "images/bookguest.png");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:08:20.277

我想建议您`.active`在单击时为图像添加一个新的类名。

然后你可以使用这个脚本`.not() or :not()`：

```
$('[id^="img-onlinebooking"]').not('.active').hover(function() { 
     $(this).attr("src", "images/bookguest-h.png");
});

$('[id^="img-onlinebooking"]').not('.active').mouseleave(function() { 
     $(this).attr("src", "images/bookguest.png");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T10:12:35.850

`hover()`这是因为在更改或`mouseleave()`事件处理程序中的选项卡图像之前，您没有设置/检查任何标志。你可以这样做

```
$("#img-onlinebooking-guest").hover(function() {
         var pathname = window.location.pathname;
         if(pathname.indexOf("/login-guest.php")<0)
         {
           //guest is not active
           $(this).attr("src", "images/bookguest-h.png");
         }
    });

    $("#img-onlinebooking-guest").mouseleave(function() {
         var pathname = window.location.pathname;
         if(pathname.indexOf("/login-guest.php")<0)
         { 
           //guest is not active
           $(this).attr("src", "images/bookguest.png");
         }
    }); 
```

# c# - 即使创建了新连接，连接也会失去联系

> ID：15741347
> 
> 赞同：2
> 
> 时间：2013-04-01T10:02:12.497
> 
> 标签：c#, asp.net, oracle

我正在编写一个 ASP.NET Web 应用程序。数据库是甲骨文。我最近注意到，如果我让应用程序打开一段时间而不做任何事情，然后尝试访问数据库，我会收到“ORA-03135：连接丢失联系”错误。我首先想到的一个原因是连接超时，但我创建了一个新的连接，打开它，做我需要做的事情，并在每次访问数据库时“最终”关闭它。更有趣的是，在我收到此错误后，连接数据库不再有任何问题。您对可能出现的问题有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:14:23.383

你在使用连接池吗？在这种情况下，您可以获得此行为，因为 Oracle 连接池返回“断开连接”的连接。尝试添加 Validate Connection=True; 到您的连接字符串。

# php - 没有的教义

> ID：15741355
> 
> 赞同：0
> 
> 时间：2013-04-01T10:02:30.293
> 
> 标签：php, mysql, doctrine-1.2

我在数据库中有一张这样的表

我想选择除记录之外的所有内容包含 (x=1, y=1) 我的意思是 id=8

```
id  |  x  |  y
---------------
1   |  2  |  1
2   |  0  |  1
3   |  5  |  6
4   |  6  |  4
5   |  7  |  4
6   |  7  |  4
7   |  5  |  7
8   |  1  |  1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:08:17.910

试试这个：查看[**演示**](http://www.sqlfiddle.com/#!2/dd008/2/0)

```
select * from TableName where 1 NOT IN(x,y) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T10:05:18.020

试试这个查询

```
SELECT * FROM TableName where x!=1 OR y!=1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T11:57:18.063

遵循教义应该对你有用。

> Doctrine_Query::Create() ->from("tablename") ->where("x != 1 AND Y != 1") ->fetchArray();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T10:04:25.657

你可以试试这个-

```
select * from TableName where x!=1 and y!=1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T10:24:35.300

试试这个

```
 SELECT * FROM test where 1 NOT IN(x) OR 1 NOT IN (y) 
```

看演示... [http://www.sqlfiddle.com/#!2/dd008/12](http://www.sqlfiddle.com/#!2/dd008/12)

# python - 使用 python 脚本将“+”添加到所有数字作为前缀（数字存储在 csv 文件中）

> ID：15741357
> 
> 赞同：0
> 
> 时间：2013-04-01T10:02:35.917
> 
> 标签：python, file-io

**目标**

我从 hotmail 导出的 csv 文件中的所有号码都存储为，`91123456789`而要完成呼叫，我需要拨打`+91123456789`。这些联系人将被转换成一批vcf文件并导出到我的手机中。我想在开始时将 + 添加到我的所有联系人。

**方法**

编写一个 python 脚本，可以为无限数量的联系人执行此操作。

**先决条件**

csv 文件中的所有数字都没有 +。

**问题**

(a) 有一种可能性，数字本身可能有一个`91`，例如：`+919658912365`。这使得添加一个加号非常困难。

解释：我将此作为一个问题添加，就好像 91 只存在于数字的开头，那么我们可以通过检查两个连续数字来简单地添加它，如果它们匹配，`91`那么我们可以添加 + 否则我们不需要添加`+`，我们可以继续下一对数字。

(b) 字段用逗号分隔。我只想`+`在具有标题的字段前面添加前缀，`mobile`而不是在可能出现一组数字的任何其他字段中`91`（如固定电话号码或传真号码）

**研究**

我用excel试过这个，但是这个过程会花费不合理的时间（比如2小时！）

**眼镜**

我有 400 个联系人。视窗 XP SP 3

**请**帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:14:08.777

像下面这样的东西？？

```
import csv 
for row in csv.reader(['num1, 123456789', 'num2, 987654321', 'num3, +23456789']):
    phoneNumber = row[1].strip()
    if not phoneNumber.startswith('+'):
        phoneNumber = '+' + phoneNumber
    print phoneNumber 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T10:23:51.347

可以使用迭代器来测试每个电话号码，如下所示：

```
phone_numbers = ['12234', '91232324', '913746', '3453' '9145653', '95843']

for i, number in enumerate(phone_numbers):
    phone_numbers[i] = ''.join(['+', phone_numbers[i]]) if number.startswith('91') else phone_numbers[i] 
```

希望有帮助

# java - 如何在 android 的 webview 中播放 HTML5 视频？

> ID：15741360
> 
> 赞同：0
> 
> 时间：2013-04-01T10:02:47.393
> 
> 标签：java, android

如何在 android 的 Webview 中播放 HTML5 视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:04:11.727

Embed the video tag as below in yoru WebView

```
<video id="video" autobuffer width="320" height="240">
  <source src="movie.mp4">
  <source src="movie.ogg">
Your browser does not support the video tag.
</video> 
```

Set the event as below for `click`.

```
var video = document.getElementById('video');
video.addEventListener('click',function(){
  video.play();
},false); 
```

Though using `type="video/mp4"` is accepted HTML5 standard, Andorid browsers seem to mess up with it. So don't use it.

# asp.net - 使用精灵时出现错误消息无法加载类型“Microsoft.Samples.Web.ImageOptimizationModule”

> ID：15741367
> 
> 赞同：0
> 
> 时间：2013-04-01T10:03:10.970
> 
> 标签：asp.net, sprite

使用 ap sprites 时出现错误。我无法做到。

我在 web.config 中添加了以下代码

```
<system.webServer>
     <modules runAllManagedModulesForAllRequests="true">
      <add type="Microsoft.Samples.Web.ImageOptimizationModule"
       name ="Microsoft.Samples.Web.ImageOptimizationModule"/>
    </modules>
  </system.webServer>

  <system.web>
    <pages>
      <controls>
       <add tagPrefix="asp" namespace="Microsoft.Web.Samples" assembly="Microsoft.Web.Samples.ImageSprite" />

      </controls>

    </pages>
    <httpModules>
      <add type="Microsoft.Samples.Web.ImageOptimizationModule"
           name="Microsoft.Samples.Web.ImageOptimizationModule" />
    </httpModules>
        <compilation debug="true" targetFramework="4.0" />
    </system.web> 
```

我还创建了一个文件夹 App_Sprites。并添加了`ImageSprite`和`ImageOptimizationFramework`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:10:06.490

这主要是一种猜测，但您可能必须使用程序集名称来限定声明中的类型名称。

我不知道程序集名称`Microsoft.Samples.Web.ImageOptimizationModule`是什么，但假设它是`Microsoft.Web.Samples.ImageSprite`：

```
 <add type="Microsoft.Web.Samples.ImageOptimizationModule, Microsoft.Web.Samples.ImageSprite"
   name ="Microsoft.Web.Samples.ImageOptimizationModule"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:30:54.630

我在我的 web.config 文件中进行了以下更改，它工作正常，还添加了`WebForms.dll`参考。

```
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />

    <pages>
      <controls>
        <add tagPrefix="asp" namespace="Microsoft.Web.Samples" assembly="Microsoft.Web.Samples.ImageSprite" />
      </controls>
    </pages>

    <httpModules>
      <add type="Microsoft.Web.Samples.ImageOptimizationModule"
           name="Microsoft.Web.Samples.ImageOptimizationModule"/>
    </httpModules>
  </system.web>

  <system.webServer>
    <modules>
      <add type="Microsoft.Web.Samples.ImageOptimizationModule"
           name="Microsoft.Web.Samples.ImageOptimizationModule"/>
    </modules>
  </system.webServer>
</configuration> 
```

有关 Sprite 的详细说明以及演示和示例下载，请参见以下链接 [http://www.4guysfromrolla.com/articles/101310-1.aspx](http://www.4guysfromrolla.com/articles/101310-1.aspx)

# c# - 将图像保存在内存中的最佳方法

> ID：15741371
> 
> 赞同：0
> 
> 时间：2013-04-01T10:03:25.420
> 
> 标签：c#, image-processing

我想在内存中保留 1000-2000 张图像。我尝试使用 imageToByteArray 并将它们存储在键值对中，但显然会导致内存泄漏。还有其他方法还是我迷路了？将它们保存在内存中的原因是为了快速阅读，但这看起来是个坏主意。

非常小的图像 450、250 我将在 winforms 中使用它们。问题是它们被分组在剪辑中，所以在运行时我将显示 25 张图片/秒，这就是我需要内存的原因

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:31:30.357

有没有一次需要1000张图片的情况？

如果你保留它们，取决于图像大小，从长远来看，你肯定会达到内存上限。您需要有一些缓存机制来巧妙地管理。也许您可以处理像 SQLite 这样的简单数据库来有效地管理它们，或者根据您的应用程序偏好使用您自己的智能缓存方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:33:11.607

如果您正在使用 WinForms - 您是否考虑过[使用实际的动画 gif？](https://stackoverflow.com/questions/165735/how-do-you-show-animated-gifs-on-a-windows-form-c). 将它们从代表不同帧的一系列图像中制作出来并不难......

# javascript - 如何在表格中动态添加行

> ID：15741372
> 
> 赞同：1
> 
> 时间：2013-04-01T10:03:29.077
> 
> 标签：javascript, html

如何使用javascript修改代码以在表格中动态添加行？这是我现有的代码，它具有其他功能。需要表格下方的一个按钮来添加行。我不需要弹出窗口来说明您要添加多少行。每一次点击都会增加额外的行。

# Javascript

```
var editing = false;

function catchIt(e) {
    if (editing) return;
    if (!document.getElementById || !document.createElement) return;
    if (!e) var obj = window.event.srcElement;
    else var obj = e.target;
    while (obj.nodeType != 1) {
        obj = obj.parentNode;
    }
    if (obj.tagName == 'INPUT' || obj.tagName == 'A') return;
    while (obj.nodeName != 'TD' && obj.nodeName != 'HTML') {
        obj = obj.parentNode;
    }
    if (obj.nodeName == 'HTML') return;
    var x = obj.innerHTML;
    var y = document.createElement('input');
    var z = obj.parentNode;
    z.insertBefore(y, obj);
    z.removeChild(obj);
    y.value = x;
    y.className = 'inp-edit';
    y.onblur = saveEdit;
    y.focus();
    editing = true;
}

function saveEdit() {
    var area = this;
    var y = document.createElement('TD');
    var z = area.parentNode;
    y.innerHTML = area.value;
    z.insertBefore(y, area);
    z.removeChild(area);
    editing = false;
}

document.onclick = catchIt; 
```

# HTML

```
 <table border=1 class="display">
    <thead>
        <tr class="portlet-section-header results-header">
            <th class="sorting">Operator ID</th>
            <th class="sorting">Status</th>
            <th class="sorting">First Name</th>
            <th class="sorting">Last Name</th>
            <th class="sorting">Email</th>
            <th class="sorting">Role</th>
            <th class="sorting_disabled">Select All
                <br />
                <input type="checkbox" onclick="checkAll(this);" name="check" />
            </th>
        </tr>
    </thead>
    <tbody>
        <tr class="odd">
            <td>Test1</td>
            <td>Active</td>
            <td>wsrc</td>
            <td>wsrc</td>
            <td>aa@aa.com</td>
            <td>SE Admin</td>
            <td>
                <input type="checkbox" value="3" onclick="checkAllRev(this);" name="deleteItem" />
            </td>
        </tr>
        <tr class="even">
            <td>Test2</td>
            <td>Inactive</td>
            <td>EAI</td>
            <td>SUBSYSTEM</td>
            <td>aa@aa.com</td>
            <td>API</td>
            <td>
                <input type="checkbox" value="4" onclick="checkAllRev(this);" name="deleteItem" />
            </td>
        </tr>
        <tr class="odd">
            <td>Test3</td>
            <td>Inactive</td>
            <td>Dunning</td>
            <td>Portal</td>
            <td>aa@aa.com</td>
            <td>API</td>
            <td>
                <input type="checkbox" value="5" onclick="checkAllRev(this);" name="deleteItem" />
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:32:22.447

您可以为要添加的行制作模板 html，并在单击按钮时附加该 html。
例如，要添加的行包含两列，看起来像这样：

```
<tr>
    <td>Test</td>
    <td>Active</td>
</tr> 
```

您可以将此模板保存在变量中。例如：

```
var template = "<tr><td>Test</td><td>Active</td></tr>"; 
```

现在`append`可以使用 jQuery 的函数来动态添加行。
由于您需要将行添加到 tbody，因此可以使用以下代码：

```
$("tbody").append(template); 
```

可以使用类似的方法来实现您想要的任务。

# java - 用Java计算日期

> ID：15741373
> 
> 赞同：-2
> 
> 时间：2013-04-01T10:03:39.610
> 
> 标签：java, string, date, math, format

好的，所以我正在尝试以这种格式创建日期：

```
SimpleDateFormat dateformat = new SimpleDateFormat("dd-MM-yy"); 
```

我无法计算那个日期，所以它给了我 1/1/13。

```
Date newdate = new Date (136199001);
String date = dateformat.format(newdate); 
```

但是，我无法弄清楚如何才能达到我想要的日期。我知道我应该从 70 年 1 月 1 日开始解决，但我遇到了麻烦。问题：计算日期的公式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:14:06.960

我会说你正在寻找的是：

```
new SimpleDateFormat("dd/MM/yy").parse("1/1/13"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:10:17.640

您可以将日历对象用于特定日期。这要容易得多。

```
Calendar cal = Calendar.getInstance();
cal.set(2013, 0, 1); //1st january 2013
Date date = cal.getTime();
SimpleDateFormat dateformat = new SimpleDateFormat("dd-MM-yy");
String dateStr = dateformat.format(date); 
```

# asp.net - 如何禁用 TreeView 中的排序？

> ID：15741379
> 
> 赞同：3
> 
> 时间：2013-04-01T10:03:55.843
> 
> 标签：asp.net

我的 aspx 页面中有一个 TreeView，如下所示。

```
<asp:TreeView ID="TreeView1" runat="server" ExpandDepth="0" 
            ShowCheckBoxes="All" ShowLines="True">
        </asp:TreeView> 
```

当我向这个 TreeView 添加节点时，它总是按字母顺序排序。我真正想要的是我添加节点的顺序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:55:23.153

看看这个问题。这里有一些答案，涵盖了在 TreeView 控件上实现排序的一些基础知识。

[ASP.NET 树视图排序](https://stackoverflow.com/questions/776162/asp-net-treeview-sort)

# php - For loop involving a range of dates

> ID：15741383
> 
> 赞同：0
> 
> 时间：2013-04-01T10:04:13.143
> 
> 标签：php, datetime

I have a date range in which I want to process between each day. So for example between 2013-03-01 00:00:00 and 2013-04-01 00:00:00 there are 31 days

so my for loop is something like this

```
$date_next = $date_from;
for($i=0;$i<31-1;$i++)
{
    $date_next_str = new DateTime($date_next);
    $date_next_1_str = new DateTIme($date_next);
    $date_next_1_str->modify("+1 day");
    $date_next_1_str->modify("-1 second");

    $date_next_1_str->modify("+1 day");
    $date_next = $date_next_1_str->date;
} 
```

so in my first loop it will be from 2013-03-01 00:00:00 to 2013-03-01 23:59:59

However when I assign $date_next_1_str->date to $date_next at the end of the for loop, the $date_next still shows 2013-03-01 23:59:59, which was supposed to be 2013-03-02 00:00:00.

Anyone can help me with this? Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:14:25.433

你可以很容易地使用 PHP 的[DateTime](http://php.net/DateTime)、[DateInterval](http://php.net/DateInterval)和[DatePeriod](http://php.net/DatePeriod)对象来做到这一点：-

```
$startDate = \DateTime::createFromFormat('Y-m-d H:i:s', '2013-03-01 00:00:00');
$endDate = \DateTime::createFromFormat('Y-m-d H:i:s', '2013-04-01 00:00:00');
$interval = new \DateInterval('P1D');
$endDate->add($interval); //As otherwise last day will be missed off.
$period = new \DatePeriod($startDate, $interval, $endDate);

foreach($period as $date){
    //each $date is an instance of DateTime
    var_dump($date); // Or whatever you want to do with the DateTime object
} 
```

# jquery - jQuery button click to hide a div

> ID：15741384
> 
> 赞同：0
> 
> 时间：2013-04-01T10:04:12.773
> 
> 标签：jquery

I have a `<div>` which is hidden through jquery only inital when the page loads. I have button, in which on the click event the `<div>` gets visible. I want the `<div>` to be hidden on the button click event also. I have a event on the button click binding a grid in asp.net.

Following is the code I have tried in which `#dInner` is the div and `#bNextWeek` is the button.

```
$(document).ready(function () {
    $('#dInner').hide();

    $('#<%=bNextWeek.ClientID%>').live('click', function (e) {
         $('#dInner').hide();                                
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:05:59.217

Try with this

```
$('#'+<%=bNextWeek.ClientID%>).live('click', function (e) {
        $('#dInner').hide();                                
}); 
```

or you can try with

```
$('#'+<%=bNextWeek.ClientID%>).live('click', function (e) {
       $('#dInner').css('display','none');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:08:29.837

试试这个。我会工作的。

$(文档).ready(函数 () {

```
 $('#dInner').hide();

    $('#bNextWeek').live('click', function (e) {
        $('#dInner').css('display','none');

    }); 
```

});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T10:44:48.440

如果您试图通过在 jquery 中单击相同的按钮来隐藏和显示 div 元素，请使用切换：
**$('#bttnId').bind('click', function () { $('#dInner').toggle( ); });**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T10:56:05.633

CSS：

```
#dInner
{
visibility:hidden;
} 
```

查询：

```
 $(document).ready(function () {

    $('#bNextWeek').live('click', function (e) {
    $('#dInner').css('visibility','visible');
    });

  }); 
```

# objective-c - Calculate time taken to load a window once all async service call is done

> ID：15741389
> 
> 赞同：3
> 
> 时间：2013-04-01T10:04:32.517
> 
> 标签：objective-c, performance, macos, asynchronous

How to calculate the time taken to load a view/window? This can be done by this:

```
NSDate *startTime=[NSDate date];

//some code to load another window from winController

NSDate *endTime=[NSDate date];
NSTimeInterval diff = [endTime timeIntervalSinceDate:startTime];
NSLog(@"Time to load is %f seconds.\n\n\n",diff); 
```

* * *

But it will not calculate the total and exact time taken. To load a window, and then in init and awakeFromNib it asynchronously calls services, loads custom views, populates tableviews etc, and which is spread on dozens of classes/controllers and scores of methods.

If I use the above(program shown), the `endTime` is reached while spinner continues to spin and service calls are in progress.

I can check by watching Clock that it takes more than a minute to load the window, and to ready to perform any action on it, but `diff` is calculates to 0.5 seconds something.

Now the problem is that I can not change the whole code of project, however I can insert few things in between.

How to do this, suggestions will be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:01:31.253

我知道这已经晚了，不确定您是否仍在寻找答案（但其他人可能正在寻找类似问题的解决方案）。但在这种情况下，您必须跟踪您的代码，即您需要知道哪个您的异步调用的回调在最后被调用。这很容易追踪。我通常做的是非常普通和简单的，将 NSLog(%@"1​​")... NSLog(%@"any_number") 放在那些回调中。并检查最后打印的内容。这样你就可以将你的 endtimer 代码放在那个回调中，并知道加载你的窗口需要多少时间。希望这可以帮助某人。

# javascript - Hammer JS undefined

> ID：15741391
> 
> 赞同：0
> 
> 时间：2013-04-01T10:04:35.270
> 
> 标签：javascript, orbit, hammer.js

I am trying to use `yepnope` with `Modernizr` and `Hammer.js` to detect and trigger touch events for a slider. This is my code. I have two errors in console and don't manage to debug. Plus I don't understand where this `<`error comes from. If I remove the following bit of code, both errors disappear.

Any clue?

```
var slider = $('#featured');

yepnope({
test: Modernizr.touch,
yep: [ "/assets/javascripts/jquery.hammer.js", "/assets/javascripts/hammer.js"],
nope: [''],
complete: function () {
        slider.hammer({drag: false}).bind("swipe", function (ev) {
        if(ev.direction === 'left'){
            slider.trigger("orbit.next");
        } else if(ev.direction === 'right'){
            slider.trigger("orbit.prev");
            }
        });
    }
}); 
```

I have the following errors in my console.

```
SyntaxError: Unexpected token '<'
TypeError: 'undefined' is not a function (evaluating 'slider.hammer({drag: false})') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:16:10.950

检查这两个网址...“/assets/javascripts/jquery.hammer.js”、“/assets/javascripts/hammer.js”

我猜其中一个正在返回一个 html 页面，可能是一个错误页面。

此外，按 F12 打开网络选项卡并检查任何其他 .js 文件是否未作为 html 加载。

# javascript - Event execute simultaneously or continuously in Javascript?

> ID：15741395
> 
> 赞同：0
> 
> 时间：2013-04-01T10:04:49.730
> 
> 标签：javascript, events

I have action event click on a button in Javascript. If I click the button 2 times, the function handler of the action perform simultaneously or sequence? (the time between 2 click is faster than the function handler execution time).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:05:53.633

Your functions never run in parallel. When an event occurs, the user thread is awoken to execute the registered handler and only when your function finishes may the other function be called.

If you don't use webworkers, you never have two of your functions running at the same time in a page.

# database-design - Best way to store categories and product type in DB

> ID：15741398
> 
> 赞同：3
> 
> 时间：2013-04-01T10:05:10.133
> 
> 标签：database-design

I have three product types. It will be more later. Also I have product categories. category can't have multiple product type. So, how should I keep the categories.

1.`id | parent_id | name`

I'll set the product types as the root categories.
For example:

```
Electronic > computer > laptop 
```

Electronic's parent id will be 0 and next categories will linked due to that.

1.  `id | parent_id | product_type | name`

I'll get the electronic from product_type and computer's parent_id will be 0.

which way is better?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:14:03.627

对于类别：

```
ID | Name | Parent_ID 
```

（父 ID 用于类别树）

对于产品：

```
ID | Category_ID | Name | Description | Other 
```

假设类别树就像

```
Computers [ID: 1 | Parent: 0]
 |-Laptops [ID: 2 | Parent: 1]
 |-Desktop [ID: 3 | Parent: 1]
 |-Printers [ID: 4 | Parent: 1]
 |  |-Brand #1 [ID: 5 | Parent: 4]
 |  |-Brand #2 [ID: 6 | Parent: 4]
 |-Other stuff [ID: 7 | Parent: 1] 
```

然后，如果您想显示来自的所有产品，例如，`Printers`只需执行递归，从`Printers`类别及其子类别中获取所有项目。

# TL;博士

第一种方法更好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-06T15:31:05.097

我建议使用嵌套集设计而不是您当前使用的邻接列表设计。

虽然它确实有效，但如果您遇到性能问题，嵌套集上的单个查询可以产生比邻接列表（需要多次数据库调用）更多的关于类别的信息。

我[在 mysql 中使用过这篇关于分层数据的文章](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)，过去用于许多应用程序，并且效果很好。

**TL;博士：**

**邻接表**

*   优点：易于实施
*   缺点：需要递归数据库调用以确定树中的深度和位置等信息。

**嵌套集**

*   优点：可以在单个查询中生成您需要的有关数据的大多数信息
*   缺点：难以实施

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T10:23:39.623

正如您所提到的，您现在有三种产品类型，并且以后可以增加产品类型，您需要一个产品类型表 -

```
Product_type
------------
1> product_type_id - Primary Key

2> product_type_name 
```

现在您有类别表，该表将是分层类别数据，并且与 product_type 表具有一对多的关系。（正如您所说的类别不能有多个产品类型）所以您的表设计将像

```
Product_categories
------------------

1> product_cat_id - Primary key

2> product_type_desc 

3> parent_product_type_id (for hierarchical relationship)

4> product_type_id - foreign key to **Product_type** table. 
```

您可以在此处详细说明任何进一步的要求，以便我们为您提供帮助。

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T10:14:11.910

你的数据库看起来像这样吗？

表：product_type

```
id   | parent_id | name
-------------------------------
1    | null      | Electronics
------------------------------- 
2    | 1         | Computer
-------------------------------
3    | 2         | Laptop
------------------------------- 
```

如果是这样，为什么你需要一个进一步的表来获得结果？当您需要一个新类别时，只需添加一个新的父级及其子级。

# asp.net - 可以为 flex 和 asp.net 使用公共会话变量

> ID：15741408
> 
> 赞同：1
> 
> 时间：2013-04-01T10:05:38.997
> 
> 标签：asp.net, apache-flex, session-variables

我有一个 asp 网站，其中有一个嵌入了 swf 文件的页面。swf 文件是使用 flex 构建的。我想在 flex 中的会话变量中设置一个值，然后在 asp 中使用这个会话变量来检索值。

或者有什么方法可以知道在asp端的flex（swf文件）中所做的更改。请注意，swf 文件有一个网格，其中发生数据更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:13:30.780

您可以执行以下任一操作：

> *   将更改分配给网页中的隐藏变量。
> *   在 ASP .Net 中查询服务器端的变量。并将其置于会话中。

或者

> *   当您想更改 Session 中的任何内容时，只需从 JavaScript 调用 web 服务，该服务应该更改 Session 中的值（或在服务器中执行您想做的任何事情）。

了解如何[从 flex 调用 ASP.Net WebService](http://www.codeproject.com/Articles/37649/Flex-Communication-with-ASP-NET-WebService)。

# java - 如何在不使用任何 servlet 的情况下从 java 类调用 jsp 页面

> ID：15741409
> 
> 赞同：-2
> 
> 时间：2013-04-01T10:05:40.853
> 
> 标签：java, jsp

我只想从没有任何请求对象的简单 java 类中调用 jsp 页面。不使用任何 servlet。只需从 java 类转发到 jsp 页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-05T07:44:00.270

***首先***从 JSP 页面调用一个 java 类：你需要从这个类中实例化一个实例。

例如：如果您有一个名为“myclass”的类和一个名为“home.jsp”的 JSP，那么在您的 JSP 页面中导入 myclass ex，<@ page **import="yourpackagename.yourclassname** "> 然后在正文部分实例化一个实例通过键入**my1.callyourfunction() 从您的班级；**如下：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1" import="yourpackagename.myclass"%>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>home.jsp</title>
</head>
<body>
    <%
         myclass my1 = new myclass();
         my1.Openpage(response);
    %>
</body>
</html> 
```

***其次***从java类调用jsp：需要使用HttpServletResponse，如下：

```
package yourpackagename.myclass;

import java.io.IOException;
import javax.servlet.http.HttpServletResponse;

public class myclass{   
public void Openpage(HttpServletResponse res) throws IOException{
    // here type your JSP page that you want to open
    res.sendRedirect("To.jsp");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T10:19:22.407

如果我没有误解，您是否正在寻找通过 java 类在浏览器中打开的 JSP 页面？如果是，您可以使用 Desktop API。

您还可以查看以下答案：

[打开本地 html 页面 - java](https://stackoverflow.com/a/4649838/2164300)

[让java gui在网络浏览器中打开网页](https://stackoverflow.com/a/602045/2164300)

**还请记住，您的 JSP 页面应放置在 Web 容器（Tomcat 等）中，并在调用时运行，否则您将无法找到 JSP 未打开的原因。**

# java - 从 SOAP 响应中获取 HTTP 状态码

> ID：15741412
> 
> 赞同：12
> 
> 时间：2013-04-01T10:05:53.987
> 
> 标签：java, http, soap

如何从结果中获取 HTTP 状态`SOAPConnection.call()`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-01T19:34:53.003

摘自[W3C 关于 SOAP 的说明（第 6.2 节）](http://www.w3.org/TR/2000/NOTE-SOAP-20000508/#_Toc478383529)

> SOAP HTTP 遵循 HTTP 状态代码的语义，用于在 HTTP 中传递状态信息。例如，2xx 状态码表示客户端的包含 SOAP 组件的请求被成功接收、理解和接受等。
> 
> 如果在处理请求时出现 SOAP 错误，SOAP HTTP 服务器必须发出 HTTP 500“内部服务器错误”响应，并在响应中包含 SOAP 消息，其中包含指示 SOAP 处理错误的 SOAP Fault 元素（参见第 4.4 节）。

并来自[API 中有关 SOAPFault 的文档](http://docs.oracle.com/javaee/5/api/javax/xml/soap/SOAPFault.html)

> SOAPBody 对象中包含**错误和/或状态信息**的元素。此信息可能与 SOAPMessage 对象中的错误或与消息本身的内容无关的问题有关。

所以，一个可能的答案可能是

```
SoapMessage soapMessage = null;
soapMessage = MySOAPConnection.call(...);
soapMessage.getSOAPPart().getEnvelope().getBody().getFault().getFaultCode(); 
```

帮助我创建此答案的一些参考资料是：

*   [http://forums.devshed.com/java-help-9/java-httpstatus-code-59166.html](http://forums.devshed.com/java-help-9/java-httpstatus-code-59166.html)
*   [Apache Axis2 SAAP SoapConnectionImpl](https://svn.apache.org/repos/asf/axis/axis2/java/core/trunk/modules/saaj/src/org/apache/axis2/saaj/SOAPConnectionImpl.java)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-19T12:24:27.443

简单的答案是你不能。深入研究[HttpSOAPConnection](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b27/com/sun/xml/internal/messaging/saaj/client/p2p/HttpSOAPConnection.java#HttpSOAPConnection.post%28javax.xml.soap.SOAPMessage%2Cjava.net.URL%29)代码，HttpURLConnection 对象的本地实例用于与目标服务进行实际通信。这确实得到了 httpResponse 代码，但它或多或少地对调用者完全隐藏了它。您得出的结论是，如果您没有收到异常但返回的 SOAPMessage 包含 SOAPFault，则返回代码为 HttpURLConnection.HTTP_INTERNAL_ERROR（即 500）。没有例外，没有 SOAPFault 意味着返回代码是 200 到 206，所有这些都是“成功” - 不幸的是，来自 HttpURLConnection 对象中的 HTTP 标头的状态条目明确没有复制到返回的 SOAPMessage 中的 MIMEHeaders ...

```
// Header field 0 is the status line so we skip it. 
```

其他任何事情都会引发异常，代码将在异常消息字段中的左括号之后开始，并且可能是三位数，很难精确，因为有人忘记了消息之前的右括号或任何其他分隔符......

```
throw new SOAPExceptionImpl(
                    "Bad response: ("
                        + responseCode
                        + httpConnection.getResponseMessage()); 
```

例如：

```
com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl: Bad response: (502internal error - server connection terminated 
```

在异常中依赖文本消息的格式是很可怕的，但是响应代码不会在其他任何地方公开。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T21:02:43.503

您可以通过 MessageContext 接口访问 HTTP 标头。

[http://docs.oracle.com/javaee/5/api/javax/xml/ws/handler/MessageContext.html](http://docs.oracle.com/javaee/5/api/javax/xml/ws/handler/MessageContext.html)

最直接的方法可能是实现一个 SOAPHandler，它可以让您访问 MessageContext：

[http://docs.oracle.com/cd/E15051_01/wls/docs103/webserv_adv/handlers.html#wp222394](http://docs.oracle.com/cd/E15051_01/wls/docs103/webserv_adv/handlers.html#wp222394)

但是，SOAP 应用程序通常不应该在 HTTP 状态代码上构建交互，因为它们是特定于传输的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-24T09:28:32.907

另一种选择（java 8）：

```
public class HttpResponseHandler implements SOAPHandler<SOAPMessageContext> {
    private Logger log = Logger.create(HttpResponseHandler.class);

    @Override
    public boolean handleMessage(SOAPMessageContext context) {
        boolean outboundProperty = (boolean)context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY); // Response
        if(!outboundProperty) {
            int status = (int)context.get(MessageContext.HTTP_RESPONSE_CODE);
            log.debug("HTTP status code = " + status);
        }
        return true;
    }
}

// Usage : building your service

List<Handler> soapHandlers = new ArrayList();
soapHandlers.add(new HttpResponseHandler());

URL wsdlDocumentLocation = this.getClass().getResource("some_url");
Service service = Service.create(wsdlDocumentLocation, new QName("namespace", "servicename"));
service.setHandlerResolver(new HandlerResolver() {
    public List<Handler> getHandlerChain(PortInfo portInfo) {
        return soapHandlers;
    }
});
BindingProvider provider = (BindingProvider)service.getPort(new QName("namespace", "portname"), serviceInterface);
provider.getRequestContext().put("javax.xml.ws.service.endpoint.address", this.endpointAddress);
provider.getRequestContext().put("com.sun.xml.ws.connect.timeout", connectTimeout);
provider.getRequestContext().put("com.sun.xml.ws.request.timeout", requestTimeout);
return provider; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-14T14:13:16.550

我确实有与这个问题类似的要求，业务分析师想要记录与每个入站和出站肥皂调用相关的每个 http 响应代码。我的回答对 Apache CXF 2.7.5 有效。

您可以通过以下代码片段在 javax.xml.ws.handler.soap.SoapHandler 接口的实现中通过 MessageContext 接口访问 http 状态代码。

```
int status = (( javax.servlet.http.HttpServletResponse)messageContext.get("HTTP.RESPONSE")).getStatus(); 
```

# asp.net-mvc-4 - 如何正确处理使用 Autofac 注册的对象

> ID：15741417
> 
> 赞同：0
> 
> 时间：2013-04-01T10:06:00.433
> 
> 标签：asp.net-mvc-4, repository-pattern, enterprise-library, autofac, unit-of-work

我已经实现了工作单元/存储库模式，如此[处](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)所述，但我也在使用 autofac 和构造函数注入，所以我注册了 UnitOfWork 和 DbContext (PsyProfContext) 类，如下所示：

```
 builder.Register(context => new PsyProfContext()).InstancePerHttpRequest();
 builder.RegisterType<UnitOfWork>().As<IUnitOfWork>().InstancePerHttpRequest(); 
```

一切都很好！

除了一件事：我也在使用[企业库日志记录块](http://msdn.microsoft.com/en-us/library/ff664569%28v=pandp.50%29.aspx)，并且我已经实现了使用实体框架将日志条目写入数据库的 CustomTraceListener。

我的控制器看起来像这样（它是空的，因为目前我只是试图验证所有东西（IoC、日志记录、实体框架）是否都在工作）：

```
public class HomeController : Controller
{
    private readonly UnitOfWork unitOfWork;

    public HomeController(IUnitOfWork unitOfWork)
    {
        this.unitOfWork = (UnitOfWork) unitOfWork;
    }

    //
    // GET: /Home/
    public ActionResult Index()
    {
        throw new HttpException();
        return View();
    }

    protected override void Dispose(bool disposing)
    {
        unitOfWork.Dispose();
        base.Dispose(disposing);
    }
} 
```

在 CustomTraceListener 类的 Write 方法中，我尝试解决 UnitOfWork：

```
DependencyResolver.Current.GetService<IUnitOfWork>() as UnitOfWork; 
```

但是我得到了一个已经被处理的实例！所以我放了一些断点，发现在CustomTraceListener类的Write方法之前调用了控制器的Dispose方法，所以最后我没有找到直接使用DbContext（PsyProfContext）的其他解决方案：

```
public override void Write(object o)
    {
        using (var conext = new PsyProfContext())
        {
            var customLogEntry = o as CustomLogEntry;

            if (customLogEntry != null)
            {
                var logEntry = new LogEntry
                                   {
                                       //a bunch of properties
                                   };

                conext.Exceptions.Add(logEntry);
                conext.SaveChanges();
            }
        }
    } 
```

但我不喜欢这个解决方案！如果您直接访问 DbContext 对象，那么使用 UnitOfWork 和存储库模式有什么意义。或者，如果您在某些情况下手动创建注册对象，那么在项目中使用 DI 有什么意义。

所以我想听听你的意见，关于如何处理这种情况？我目前的实施是否良好，或者肯定是错误的，我应该考虑另一个。

任何帮助将不胜感激，欢迎任何想法！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T15:33:23.000

看起来你可能有几个问题。

首先，如果您在控制器中手动处理工作单元对象，您的控制器应该`Owned<IUnitOfWork>`在构造函数中使用一个。当请求生命周期被释放时，它将自动释放任何`IDisposable`组件 - 包括控制器和任何已解决的依赖项 - 除非您以某种方式指定您将接管生命周期的所有权。[您可以使用`Owned<T>`.](https://code.google.com/p/autofac/wiki/RelationshipTypes)

```
public class HomeController : Controller
{
  Owned<IUnitOfWork> _uow;
  public HomeController(Owned<IUnitOfWork> uow)
  {
    this._uow = uow;
  }
  protected override void Dispose(bool disposing)
  {
    if(disposing)
    {
      this._uow.Dispose();
    }
    base.Dispose(disposing);
  }
} 
```

（请注意那里的 Dispose 覆盖中的一个小逻辑修复 - 您需要检查 的值，`disposing`这样您就不会重复处理您的工作单元。）

或者，您可以将您的工作单元注册为`ExternallyOwned`，例如

```
builder
  .RegisterType<UnitOfWork>()
  .As<IUnitOfWork>()
  .ExternallyOwned()
  .InstancePerHttpRequest(); 
```

`ExternallyOwned`还告诉 Autofac 您将控制处置。在这种情况下，您的控制器看起来就像它已经完成的那样。（不过，**一般来说，我喜欢让 Autofac 完成工作**，如果可以避免的话，不要拥有所有权。）

事实上，看看事情的设置方式，**如果您让 Autofac 为您进行处理，您可能可以完全避免处理问题**- 调用`DependencyResolver`将返回尚未处理的工作单元，并且它没关系。

如果这不能解决问题......您可能想为您的问题添加一些细节。我看到您的控制器在哪里使用工作单元类，但我没有看到它在哪里记录任何内容，也没有看到侦听器实现中使用工作单元的任何内容。

（另外，正如对您的问题的第一条评论中所述，在您的控制器的构造函数中，您不应该将您的服务从`IUnitOfWork`to转换为`UnitOfWork`- 这首先破坏了接口提供的抽象。）

# c - 通过 postgresql ODBC 将数据从客户端导出到服务器

> ID：15741418
> 
> 赞同：0
> 
> 时间：2013-04-01T10:06:05.697
> 
> 标签：c, postgresql, odbc

我希望将我的文本数据从客户端应用程序上传到服务器数据库。现在，我正在使用`ODBC`与`PostgreSQL`. 我使用`ODBC`是因为需要连接到多种类型的数据库。

我的问题是，`PostgreSQL`用于在使用OUT`PQgetCopyData`时获取标准输出数据。`COPY`那么，是否有任何解决方法可以从输出流中获取数据而不使用`libpq API`并通过以下方式传输：

```
SQLExecDirect (hStmst,"COPY <table> FROM STDIN WITH CSV ",SQL_NTS) 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T13:36:27.120

基本上你有两个选择。第一个是使用旧`COPY`命令（有趣的是从 Quel 借来的）。第二种是使用您选择的 CSV 解析库并生成 INSERT 语句。

权衡是它的`COPY`工作速度会更快，whine`INSERT`也可以在其他数据库上工作。

# android - 通过采样率记录音频循环？

> ID：15741419
> 
> 赞同：0
> 
> 时间：2013-04-01T10:06:06.950
> 
> 标签：android, audio, record, rate

我正在尝试阅读和理解 Android 中的音频。在我的搜索中，我找到了[这篇文章](http://i-liger.com/article/android-wav-audio-recording)。在这里，他编写了一个以 wav 格式录制音频的代码。但是有一件事我并不完全理解，那就是他的[代码](http://i-liger.com/sites/default/files/ExtAudioRecorder.java)的第一个循环：

```
public class ExtAudioRecorder 
{
    private final static int[] sampleRates = {44100, 22050, 11025, 8000};

    public static ExtAudioRecorder getInstanse(Boolean recordingCompressed)
    {
        ExtAudioRecorder result = null;

        if(recordingCompressed)
        {
            result = new ExtAudioRecorder(  false, 
                                            AudioSource.MIC, 
                                            sampleRates[3], 
                                            AudioFormat.CHANNEL_CONFIGURATION_MONO,
                                            AudioFormat.ENCODING_PCM_16BIT);
        }
        else
        {
            int i=0;
            do
            {
                result = new ExtAudioRecorder(  true, 
                                                AudioSource.MIC, 
                                                sampleRates[i], 
                                                AudioFormat.CHANNEL_CONFIGURATION_MONO,
                                                AudioFormat.ENCODING_PCM_16BIT);

            } while((++i<sampleRates.length) & !(result.getState() == ExtAudioRecorder.State.INITIALIZING));
        }
        return result; 
```

他提供了有关它的基本信息，但我并不完全了解。这和不同类型安卓设备的性能有关系吗？无论如何，希望有人可以为我照亮这个:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:29:58.780

他正在尝试从这些 {44100, 22050, 11025, 8000} 中以不同的采样率初始化录音机。

根据底层硬件，设备可能不支持所有采样率。

虽然文档说：

*“44100Hz 是目前唯一保证适用于所有设备的速率，但其他速率（例如 22050、16000 和 11025）可能适用于某些设备。”*

我认为作者编写了代码以确保如果以采样率初始化失败，则尝试以其他采样率进行初始化，除非初始化成功，这是由他在循环条件中进行的检查给出的.

# javascript - 使用 jQuery 从 URL 读取#hash

> ID：15741421
> 
> 赞同：9
> 
> 时间：2013-04-01T10:06:09.383
> 
> 标签：javascript, jquery

如何`website.com/#something`使用 jQuery 从 URL 返回（某物）的哈希值？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-01T10:12:07.373

`window.location.hash` 就这么简单。

不要使用所有那些消耗 CPU 和影响性能的方法。

如果 DOM 提供了一些预定义的东西，请先使用它。

要将值传递给 PHP，请执行 ajax 调用 php。

```
var hash = window.location.hash;

$.ajax({
    url: 'someurl.php',
    data: {hash: hash},
    success: function(){}
}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T10:12:19.493

您可以使用[location.hash](https://developer.mozilla.org/en-US/docs/DOM/window.location)属性来获取当前页面的哈希：

```
var hash = window.location.hash; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T10:08:01.293

## 更新

因为有一个内置的方法可以通过 DOM 获取哈希，所以上面的答案是不合适的

```
 var hashTag = window.location.hash
   alert(hashTag); 
```

会变魔术。

## 旧答案

如果您的网址中有多个哈希值，您可以执行以下操作

```
//var href = location.href; // get the url in real worl scenario
var href = "www.bla.com#myhashtag"; // example url
var split = href.split("#"); // split the string; usually there'll be only one # in an url so there'll be only two parts after the splitting
var afterSplit = "Error parsing url";
if(split[1] != null){
    afterSplit = split[1];
}
// If everything went well shows split[1], if not then de default error message is shown
alert(afterSplit); 
```

这是一个例子`**[Live Fiddle](http://jsfiddle.net/mayooresan/JR8yU/)**`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-07-26T06:14:35.747

你可以用这个

```
h=new URL(location).hash.split`&`.find(e=>/hash_name/.test(e)).split`=`[1] 
```

# jquery - The ${n: in jQuery

> ID：15741423
> 
> 赞同：1
> 
> 时间：2013-04-01T10:06:12.357
> 
> 标签：jquery, plugins, bundle, aptana, code-assist

I use Aptana to write JS and I recently installed jQuery bundle (mostly for code-completion but also for new cool things that I do not know).

So when I type `ready` and press `Ctrl + <Space>` I get two options, `document ready` and `document ready (safe)` choosing one of which will automatically put `$(document).ready(function(){})` or `jQuery(document).ready(function($){})` respectively.

But that is irrelevant. When I use `$(someElement).cl` the code-completion feature gives me the option `click` and when I select it it puts down the following code for me:

```
$(someElement).click(function() {
  ${0:
\}}); 
```

(It's relevant. I'll talk about it later)

Similarly, I was trying to write a plugin and I typed `plugin` and pressed `Ctrl + <Space>` and selecting the option `plugin (method)` I got the following code:

```
;(function($) {
}
$.fn.pluginName = function(options) {
  var opts = $.extend({}, $.fn.pluginName.defaults, options);

  return this.each(function() {
    var $this = $(this);

    ${6:
    var o = $.meta ? $.extend({\}, opts, $this.data()) : opts;
  }

  });

  // private function for debugging
  function debug($obj) {
    if (window.console && window.console.log) {
      window.console.log($obj);
    }
  }
};

// default options
$.fn.pluginName.defaults = {
  defaultOne:true,
  defaultTwo:false,
  defaultThree:'yay!'
};

})(jQuery); 
```

First of all, as far as I know, a common method of writing a plugin goes like this

```
(function($) {
   $.fn.plugin = function(args) {
      //...
   }
})(jQuery); 
```

And I can define `defaults` as `$.fn.plugin.defaults = {...}` or just `var defaults = {...}` inside my plugin and in my plugin, extend a `{}` with `defaults` and `args`. That's just about all I am familiar with.

So:

*   Why does Aptana jQuery bundle put a `;` in the very beginning?
*   Why does it close the `function($){}` before `$.fn.pluginName`?
*   And most of all, what is this `${0:` in the `$.click()` example and `${6:` in `plugin (method)` example?
*   Also, what indeed is `$.meta` and `$this.data()`?

It's all very confusing (yet, strangely exciting)...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:25:49.577

*   自调用函数之前的分号是防止以前的，可能未终止的代码： [http ://debuggable.com/posts/how-to-write-jquery-plugins:4f72ab2e-7310-4a74-817a-0a04cbdd56cb](http://debuggable.com/posts/how-to-write-jquery-plugins:4f72ab2e-7310-4a74-817a-0a04cbdd56cb)
*   我想他们关闭了`function($){}`之前的，`$.fn.pluginName`以便`$.fn.pluginName`在自我调用的范围之外可用`function($){}`
*   无法找到并回答此`${number: var...`符号 - 希望有人可以在这里帮助我们。我在 jQuery 中唯一能找到的`${}`就是模板： jQuery[中表达式 ${variable_name} 的含义是什么？](https://stackoverflow.com/questions/6978630/what-is-the-meaning-of-the-expression-variable-name-in-jquery)
*   `$this.data()`只会返回`this.each(function(){})`被应用到的元素的内容：[http://api.jquery.com/jQuery.data/](http://api.jquery.com/jQuery.data/)。假设你有几个`p`'myPars' 类，你有：

    $(document).ready(function(){ $('.myPars').pluginName(); })

然后每个`p`类都将获得该函数的副本，并`$this.data()`包含`p`当前“this”的内容

我不是 jQuery 专家，所以我希望有更多消息灵通的人来帮助解决我无法很好解释的事情。

# c - Maximum stack size needed for a C program on MSP430

> ID：15741429
> 
> 赞同：9
> 
> 时间：2013-04-01T10:06:43.543
> 
> 标签：c, stack, elf, msp430

In a C program that doesn't use recursion, it should be possible in theory to work out the maximum/worst case stack size needed to call a given function, and anything that it calls. Are there any free, open source tools that can do this, either from the source code or compiled ELF files?

Alternatively, is there a way to extract a function's stack frame size from an ELF file, so I can try to work it out manually?

I'm compiling for the MSP430 using MSPGCC 3.2.3 (I know it's an old version, but I have to use it in this case). The stack space to allocate is set in the source code, and should be as small as possible so that the rest of memory can be used for other things. I have read that you need to take account of the stack space used by interrupts, but the system I'm using already takes account of this - I'm trying to work out how much extra space to add on top of that. Also, I've read that function pointers make this difficult. In the few places where function pointers are used here, I know which functions they can call, so could take account of these cases manually if the stack space needed for the called functions and the calling functions was known.

Static analysis seems like a more robust option than stack painting at runtime, but working it out at runtime is an option if there's no good way to do it statically.

**Edit:**

I found GCC's `-fstack-usage` flag, which saves the frame size for each function as it is compiled. Unfortunately, MSPGCC doesn't support it. But it could be useful for anyone who is trying to do something similar on a different platform.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T03:04:45.010

虽然静态分析是确定最大堆栈使用量的最佳方法，但您可能不得不求助于实验方法。这种方法不能保证你有一个绝对的最大值，但可以让你很好地了解堆栈的使用情况。

您可以检查链接描述文件以获取 __STACK_END 和 __STACK_SIZE 的位置。您可以使用它们以易于识别的模式（如 0xDEAD 或 0xAA55）填充堆栈空间。通过酷刑测试运行您的代码，以尝试确保生成尽可能多的中断。

测试后，您可以检查堆栈空间以查看有多少堆栈被覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:46:38.587

我认为唯一要做的就是通过静态分析。您需要考虑所有非静态局部变量的空间，这些变量主要是指针，但无论如何都将存储在堆栈中的指针，您还需要为当前运行地址保留空间调用者，因为它将由编译器存储在堆栈中，因此可以在函数返回后将控制权返回给调用者，而且，所有函数参数都需要空间。基于此，如果你有一个工具能够计算所有参数、自动变量并计算它们的大小，你应该能够计算出你需要的最小堆栈帧大小。请注意，编译器还可以尝试为您的特定架构对齐堆栈上的值，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T18:51:28.090

一些嵌入式 IDE 可以在运行时提供有关堆栈使用情况的信息我知道 IAR 嵌入式工作台支持它。

请注意，您需要考虑到中断是异步发生的，因此请采用最大的堆栈使用场景并为其添加中断上下文。如果像 ARM 处理器一样支持嵌套中断，您也需要考虑到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-03T20:42:37.573

TinyOS 在堆栈大小分析方面做了一些工作。它在这里描述：http: [//tinyos.stanford.edu/tinyos-wiki/index.php/Stack_Analysis](http://tinyos.stanford.edu/tinyos-wiki/index.php/Stack_Analysis)

他们只支持AVR，但说“MSP430不难支持，但这不是超高优先级”。无论如何，该页面提供了大量资源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T10:43:07.023

有趣的问题。

我希望这些信息在调试版本中包含的调试数据中静态可用。

我简要了解了[DWARF](http://dwarfstd.org/)标准，它确实为调用的函数指定了两个属性，`DW_AT_frame_base`可`DW_AT_static_link`用于“计算立即包含子例程或入口点的子例程的相关实例的框架基础”。

# asp.net-mvc-3 - Background Registration MVC3

> ID：15741431
> 
> 赞同：0
> 
> 时间：2013-04-01T10:06:47.960
> 
> 标签：asp.net-mvc-3, asp.net-membership, registration

Working on an MVC4 Application where users first fill in a form as the starting point. With this form there is a field to provide user email and a unique 9 digit number and other details. What I want to achieve is after submitting this form I want the user to be silently registered using the unique 9 digit number as username, and an auto-generated password hashed and saved as password in the membership(extended simplemembership) database. An email with password will be sent to the user afterwards. I will be grateful for any hints or help in this regards.

After the form is filled, I make the following redirection

```
return RedirectToAction("AutoRegister", new RouteValueDictionary(new { controller = "Account", action = "AutoRegister", Uname= ViewBag.Uname, Uemail = ViewBag.Uemail })); 
```

and I have the following code in Account Controller

```
 [AllowAnonymous]
    public ActionResult AutoRegister()
    {
        return View();
    }

    [AllowAnonymous]
    [HttpPost]
    public ActionResult AutoRegister(RegisterModel model,string Uname, string Uemail)
    {
        //if (ModelState.IsValid)
       if(Uemail!=null && Uname!=null)
        {
            string Upass = Membership.GeneratePassword(12, 1);
            model.Email = Uemail;
            model.UserName = Uname;
            model.Password = Upass;
            // Attempt to register the user
            MembershipCreateStatus createStatus;

            Membership.CreateUser(model.UserName, model.Password, model.Email, passwordQuestion: null, passwordAnswer: null, isApproved: false, providerUserKey: null, status: out createStatus);

            if (createStatus == MembershipCreateStatus.Success)
            {
                FormsAuthentication.SetAuthCookie(model.UserName, createPersistentCookie: false);
                return RedirectToAction("Welcome", "OnlineApplication");
            }
            else
            {
                ModelState.AddModelError("", ErrorCodeToString(createStatus));
            }
        } 
```

I have also set the `RouteConfig` to accept the url. When I fill the form it redirects allright to a page with the url parameters populated but nothing happens. The user is not created. As for emailing of password I can fix that with no problems.
Could anyone assist on how I can commit the new user details in database

# jquery - Create var's automatically from json key,value pairs for global use

> ID：15741433
> 
> 赞同：1
> 
> 时间：2013-04-01T10:06:48.990
> 
> 标签：jquery, arrays, json

> update: i remembered that i can store them as jQuery(document).data(key,value); for later use, but is this a good idea ? Would that be an expensive option performance-wise ?

I am trying to create var's automatically from a json array key,value pairs for later use.

So i basically created two sets of settings, 1- Default Settings (defSets) 2- User Settings (usrSets). The idea is to use user setting if it exists, otherwise fallback to default setting. I do not want to write in all vars one by one, so is there a way to create global vars from these arrays for later use in various places ?

sth along the lines like: `var [key_name] = [key_value_read_from_User_Setting_or_Default_Set];`

Here is my actual code below; the problem is, it seems to create the vars within the each loop, but i cant access them globally i think.

```
jQuery(document).ready(function(e) {
// read default settings array from cookie if exist, otherwise create initial default settings and save
  if (jQuery.cookie("defSets") != null) {
    var defSets = jQuery.parseJSON(jQuery.cookie("defSets"))
  } else {
    var defSets = { 'ord': 'true', 'itemc': 4, 'ratio': 'sq', 'sortby': 'def'};
    jQuery.cookie("defSets", JSON.stringify(defSets)); 
  };
  // read user settings array from cookie if exist, otherwise create initial empty user settings and save
  if (jQuery.cookie("usrSets") != null) {
    var usrSets = jQuery.parseJSON(jQuery.cookie("usrSets"))
  } else { 
    var usrSets = {};
    jQuery.cookie("usrSets", JSON.stringify(usrSets));
  }

  jQuery.each(defSets, function(key, value){
    // check every default setting
    if (usrSets[key] != undefined) {
  // if a user setting exists for respective default setting use that
      var key = usrSets[key];
      // uval = usrSets[key];
      // dval = defSets[key];
      // console.log("User have a setting for -" + key + "- So the value (" + uval + ") will be used instead of default: " + dval);
} else {
      var key = defSets[key];
      // console.log ("No user setting for -" + key + "- will use default val of :" + dval);
};
}); 
```

after these, ideally, i'd be able to use those var's anywhere below these lines, assuming var ratio has been already created from above; i could `jQuery(".selector").height(jQuery(this).width * ratio);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:27:25.770

如果您需要全局存储一些信息，我会使用[namespaces](http://elegantcode.com/2011/01/26/basic-javascript-part-8-namespaces/)。我认为这更好，但毕竟这是一个偏好问题，我猜

# r - 计算列表中特定字符组合的出现次数

> ID：15741434
> 
> 赞同：-1
> 
> 时间：2013-04-01T10:06:50.027
> 
> 标签：r, count, combinations

我的问题很简单..但我无法解决...我已经在 R 中使用 1000 次迭代对 2000 个基因运行了一个变量选择方法，并且在每次迭代中我得到了一个基因组合。我想计算每个基因组合在 R 中出现的次数。例如，我有

```
# for iteration 1
genes[1] "a" "b" "c"
# for iteration 2
genes[2] "a" "b"
# for iteration 3
genes[3] "a" "c"
# for iteration 4
genes [4] "a" "b" 
```

这会给我

```
"a" "b" "c"  1
"a" "b"      2
"a"  "c"     1 
```

我没有列出该列表并获得了每个基因的编号，但我感兴趣的是组合。我试图创建一个表，但每个基因向量的长度不相等。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:20:20.560

我能立即想到的方法是给`paste`他们，然后使用`table`如下：

```
genes_p <- sapply(my_genes, paste, collapse=";")
freq <- as.data.frame(table(genes_p))
#    Var1 Freq
# 1   a;b    2
# 2 a;b;c    1
# 3     c    1 
```

上述解决方案假定基因按名称排序，并且相同的基因 id 在列表的元素中不会出现多次。如果你想同时考虑两者，那么：

```
# sort genes before pasting
genes_p <- sapply(my_genes, function(x) paste(sort(x), collapse=";"))

# sort + unique
genes_p <- sapply(my_genes, function(x) paste(sort(unique(x)), collapse=";")) 
```

* * *

**编辑：**根据 OP 在评论中的问题，我们的想法是尽可能获得 2'ers 的所有组合（可以这么说），然后上桌。首先，我将分解代码并将它们分开编写以便理解。然后我将它们组合在一起得到一个单线。

```
# you first want all possible combinations of length 2 here
# that is, if vector is:
v <- c("a", "b", "c")
combn(v, 2)
#      [,1] [,2] [,3]
# [1,] "a"  "a"  "b" 
# [2,] "b"  "c"  "c" 
```

这给出了一次取 2 个的所有组合。现在，您可以类似地粘贴它。`combn`还允许函数参数。

```
combn(v, 2, function(y) paste(y, collapse=";"))
# [1] "a;b" "a;c" "b;c" 
```

因此，对于列表中的每组基因，您可以通过将其包裹在 a 周围来执行相同的操作`sapply`，如下所示：

```
sapply(my_genes, function(x) combn(x, min(length(x), 2), function(y) 
                                      paste(y, collapse=";"))) 
```

这`min(length(x), 2)`是必需的，因为您的某些基因列表可能只有 1 个基因。

```
# [[1]]
# [1] "a;b" "a;c" "b;c"

# [[2]]
# [1] "a;b"

# [[3]]
# [1] "c"

# [[4]]
# [1] "a;b" 
```

现在，您可以使用`unlist`它来获取 a `vector`，然后使用它`table`来获取频率：

```
table(unlist(sapply(l, function(x) combn(x, min(length(x), 2), function(y) 
                                           paste(y, collapse=";")))))

# a;b a;c b;c   c 
#   3   1   1   1 
```

您可以依次包装它`as.data.frame(.)`以获得`data.frame`：

```
as.data.frame(table(unlist(sapply(l, function(x) combn(x, min(length(x), 2), 
                     function(y) paste(y, collapse=";"))))))

#   Var1 Freq
# 1  a;b    3
# 2  a;c    1
# 3  b;c    1
# 4    c    1 
```

# android - 互补滤波器中的 alpha 计算

> ID：15741437
> 
> 赞同：0
> 
> 时间：2013-04-01T10:07:06.337
> 
> 标签：android, filter, sensor-fusion

我正在使用互补滤波器进行传感器融合。我使用的互补滤波器方程是

> 角度=(1-alpha)*(角度+陀螺*dT)+(alpha)*(accel_mag_angle)

我对阿尔法的计算有些困惑。我在某处读到 alpha 是使用公式计算的

```
alpha= dA/(dA+dT) 
```

其中 dA 是您希望值更改的速率（指滤波器的截止频率），dT 是采样时间。我正在使用 SENSOR_DELAY_UI。UI的采样率在15Hz左右。我使用了 alpha=0.2（通过试错法）并且应用程序运行良好。但后来我意识到根据方程式我不能使用 alpha=0.2（理论上），因为它会给我一个 60Hz 的截止频率，而我的采样频率只有 15Hz。我的截止频率计算错误吗？还是我对方程式的理解是错误的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:43:10.763

我不会出汗的。如果您`alpha=0.2`通过反复试验发现满意，请使用它。无论如何，滤波器必须在实践中进行调整。该理论有助于从哪里开始，但您（通常）无法避免调整。

我认为 60 Hz 截止频率没有任何问题。这意味着高于该频率的运动被切断。这是一件好事，因为无论如何它们很可能是噪音。

# ios - 用它的内容放大 UITextView 的层而不损失质量

> ID：15741438
> 
> 赞同：1
> 
> 时间：2013-04-01T10:07:06.297
> 
> 标签：ios, objective-c, calayer

所以，我想放大`UITextView`'s`layer`里面的文本并将其保存为图像而不损失质量。我怎样才能做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:18:23.230

也许你应该缩放`font`你的`UITextView`（实际上`size`是`font`）的属性？

# android - Android Facebook SDK 通过页面分享

> ID：15741440
> 
> 赞同：1
> 
> 时间：2013-04-01T10:07:15.470
> 
> 标签：android, facebook

我希望我的应用程序能够在 Facebook 上进行分享，该分享将通过我的页面显示为链接（以给予我的 Facebook 页面信用）。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:47:28.043

我尝试了两种方法

1.  官方 facebook SDK 实现，有点复杂。
2.  EasyFacebookImplementation 非常简单。

在这里试试我的答案。

[如何将 Facebook 集成到我的 android 应用程序中？](https://stackoverflow.com/questions/15357811/how-to-integrate-facebook-in-my-android-application/15520199#15520199)

# php - Web 浏览器拒绝呈现 PHP 代码

> ID：15741443
> 
> 赞同：2
> 
> 时间：2013-04-01T10:07:30.120
> 
> 标签：php, linux, browser, render, plaintext

我在 Windows 7 上通过 VMWare 在 Linux Backtrack5 R3 上运行。

在我的 Linux 操作系统上，我安装了 Apache2、PHP5 和 MySQL14。当我制作一个简单的 test.php 文件并尝试使用 Firefox 14.0.1 打开它时，它会尝试下载该文件。不是我想要的结果，因为我已经有了文件：/

在四处寻找并没有找到答案后，我决定安装 Opera 并尝试在 Opera 12.14 for Linux i386 上打开 test.php。即使它没有要求我下载文件，它仍然没有给我想要的结果。它根本没有渲染 PHP，它只是显示纯文本，就好像我在记事本中查看源代码一样。

例如，我的文件 text.php 包含`<?php echo '<p>Hello World</p>'; ?>`.

*   在 Firefox 中打开文件时，它会显示“您要保存还是打开文件 test.php？”
*   在 Opera 中打开文件时，它不会显示“Hello World”，而是显示“ `<?php echo '<p>Hello World</p>'; ?>`”。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:36:11.867

浏览器不执行 php 文件，服务器执行。您的服务器正在交付 php 文件而不是执行它。您应该将文件作为 text/html 返回，但我敢打赌它是以 php 形式提供的，没有浏览器知道如何处理。

在您的评论中，您说您是直接访问文件而不是通过服务器。这意味着服务器永远不会执行 php 文件。您必须将它放在服务器上的目录中，以便它可以解释您的 PHP 并将其正确地提供给浏览器。

# php - phpexcel setprintara 不工作

> ID：15741447
> 
> 赞同：2
> 
> 时间：2013-04-01T10:07:47.843
> 
> 标签：php, phpexcel

我需要将选定区域打印为 pdf。我用了

`$phpExcelObj->getActiveSheet()->getPageSetup()->setPrintArea('F1:O56');`

用于设置打印区域。但它不适合我。我将整个工作表作为 pdf 格式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T11:59:58.943

那是因为 setPrintArea() 没有按照你的想法做。

在 MS Excel 中打开 Excel 工作簿时，可以通过指定打印区域来打印工作表的指定区域而不是整个工作表。这就是 setPrintArea() 方法的目的，定义它。它适用于将文件保存为 Excel 文件（Excel5 或 Excel2007 Writers），然后在 MS Excel 中再次打开。

它不适用于任何其他作家。它不会告诉 PHPExcel 在使用编写器时只保存工作表的一部分。编写器将始终按照 PHPExcel 对象中的定义保存整个工作表，无论是 Excel 格式，还是 CSV、HTML 或 PDF。如果您只想保存工作表的一部分，那么您需要`remove`通过删除行和列来保存您不想要的工作表部分。

# iphone - 当我在我的应用程序中录制完整的音频时，如何在其他 iOS 应用程序中继续播放音乐？

> ID：15741450
> 
> 赞同：-4
> 
> 时间：2013-04-01T10:08:10.073
> 
> 标签：iphone, ios, audio, audio-recording

当我在我的应用程序中完全录制音频时，如何在其他`iOS`应用程序中继续播放音乐？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:38:44.737

如果您将音频会话设置为非活动状态并设置了通知其他人的标志，那么其他应用程序应该重新启动。对于带有 AVAudioSession 的 iOS5，您可以这样做：

```
[[AVAudioSession sharedInstance] setActive:NO withFlags:AVAudioSessionSetActiveFlags_NotifyOthersOnDeactivation error:nil]; 
```

请注意，这在 iOS6 中已被弃用并替换为：

```
[[AVAudioSession sharedInstance] setActive:NO withOptions:AVAudioSessionSetActiveOptionNotifyOthersonDeactivation error:nil]; 
```

也将有一个 C 接口。

# bash - crontab 挂在管道、范围或语法错误

> ID：15741457
> 
> 赞同：1
> 
> 时间：2013-04-01T10:08:31.190
> 
> 标签：bash, awk, cron, pipeline

我有一个 shell 脚本，它作为我的用户可以正常工作，并且在 crontab 中可以正常工作。然而，它只完成了 rm 行，并挂在 awk 行：

```
#!/bin/bash

get_listeners.pl > temp.txt
#accesses my icecast admin page and puts some useful metrics in temp.txt

date +\%s > unpaired.txt
grep "Current Listeners" temp.txt | sed 's/[^0-9]//g' >> unpaired.txt
#first line of unpaired.txt is time, second line is number of listeners

sed '$!N;s/\n/ /' unpaired.txt >> data.dat
#combine the two lines and append it to the data file

rm unpaired.txt
#tidy up

A=$(($(date +\%s) - 86400)) | awk -v a=$1 '{if ($1 >= a) print $1,$2}' data.dat > data2.dat
#get variable of 24 hours ago; only copy lines from last 24 hours to new file

gnuplot < demo.plt
#make plot from data in new file 
```

所有路径在 crontab 中都是明确的；我刚刚在这里删除了它们以保持简洁。

所有文件都设置为 777 并且 data.dat 稳步建立（作业每分钟运行一次），但从不将数据迁移到该 awk 行中的第二个文件。如果有人能指出 awk 线看起来有什么问题，我几乎可以肯定这就是它搞砸的地方。变量不能在 cron 中流水线化吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:19:11.223

*#获取24小时前的变量；仅将过去 24 小时的行复制到新文件*

从评论来看，你可能想要这样做：

```
A=$(($(date +\%s) - 86400))
awk -v a="$A" '$1 >= a{print $1,$2}' data.dat > data2.dat 
```

# c# - c# XML Schema 验证

> ID：15741469
> 
> 赞同：5
> 
> 时间：2013-04-01T10:09:24.767
> 
> 标签：c#, xml, validation, xsd

我有一个很好的 XML 文件，如下所示：

```
 <?xml version="1.0" encoding="utf-8" ?>
    <Assets Path="C:\Users\r3plica\Google Drive">
        <Assetd>
            <FileName>Boomerang - Error codes.xlsx</FileName>
            <DisplayName>Boomerang - Error codes</DisplayName>
            <Description>This is the Boomerang error codes file</Description>
            <Tags>
                <Tag>Excel</Tag>
                <Tag>Boomerang</Tag>
            </Tags>
            <Categories>
                <Category>1</Category>
                <Category>4</Category>
            </Categories>
        </Assetd>
        <Asset>
            <FileName>Issue Tracker v5.xlsx</FileName>
            <Description>This is the issue tracker for Skipstone</Description>
            <Tags>
                <Tag>Excel</Tag>
                <Tag>Skipstone</Tag>
            </Tags>
            <Categories>
                <Category>1</Category>
                <Category>4</Category>
            </Categories>
        </Asset>
    </Assets> 
```

然后我有我这样创建的架构：

```
 <?xml version="1.0" encoding="utf-8"?>
    <xs:schema id="data"
        targetNamespace="http://tempuri.org/data.xsd"
        elementFormDefault="qualified"
        xmlns="http://tempuri.org/data.xsd"
        xmlns:mstns="http://tempuri.org/data.xsd"
        xmlns:xs="http://www.w3.org/2001/XMLSchema"
    >
      <xs:element name="Assets">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="Asset" type="Asset" minOccurs="1" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>

      <xs:complexType name="Asset">
        <xs:sequence>
          <xs:element name="FileName" type="xs:string" minOccurs="1" maxOccurs="1" />
          <xs:element name="DisplayName" type="xs:string" minOccurs="0" maxOccurs="1" />
          <xs:element name="Description" type="xs:string" minOccurs="0" maxOccurs="1" />
          <xs:element name="Tags" type="Tags" minOccurs="0" maxOccurs="1" />
          <xs:element name="Categories" type="Categories" minOccurs="1" maxOccurs="1" />
        </xs:sequence>
      </xs:complexType>

      <xs:complexType name="Tags">
        <xs:sequence>
          <xs:element name="Tag" type="xs:string" minOccurs="1" maxOccurs="unbounded" />
        </xs:sequence>
      </xs:complexType>

      <xs:complexType name="Categories">
        <xs:sequence>
          <xs:element name="Category" type="xs:int" minOccurs="1" maxOccurs="unbounded" />
        </xs:sequence>
      </xs:complexType>
    </xs:schema> 
```

据我所见，xml文件无效，因为第一个元素是Assetd而不是Asset，但是如果我运行我的c#代码：

```
XmlSchemaSet schemas = new XmlSchemaSet();
schemas.Add("http://tempuri.org/data.xsd", "data.xsd");

XDocument doc = XDocument.Load(openFileDialog1.FileName);
string msg = "";
doc.Validate(schemas, (o, err) =>
{
    msg = err.Message;
});
Console.WriteLine(msg == "" ? "Document is valid" : "Document invalid: " + msg); 
```

它告诉我xml是有效的......如果我使用这个代码：

```
// Set the validation settings.
XmlReaderSettings settings = new XmlReaderSettings();
settings.ValidationType = ValidationType.Schema;
settings.Schemas.Add("http://tempuri.org/data.xsd", "data.xsd");
settings.ValidationFlags |= XmlSchemaValidationFlags.ProcessInlineSchema;
settings.ValidationFlags |= XmlSchemaValidationFlags.ProcessSchemaLocation;
settings.ValidationFlags |= XmlSchemaValidationFlags.ReportValidationWarnings;
settings.ValidationEventHandler += new ValidationEventHandler(ValidationCallBack);

// Create the XmlReader object.
XmlReader reader = XmlReader.Create(openFileDialog1.FileName, settings);

// Parse the file. 
while (reader.Read()) ; 
```

我在控制台中得到这个输出：

```
Warning: Matching schema not found.  No validation occurred. Could not find schema information for the element 'Assets'.
Warning: Matching schema not found.  No validation occurred. Could not find schema information for the attribute 'Path'.
Warning: Matching schema not found.  No validation occurred. Could not find schema information for the element 'Assetd'.
Warning: Matching schema not found.  No validation occurred. Could not find schema information for the element 'FileName'.
Warning: Matching schema not found.  No validation occurred. Could not find schema information for the element 'DisplayName'.
Warning: Matching schema not found.  No validation occurred. Could not find schema information for the element 'Description'.
Warning: Matching schema not found.  No validation occurred. Could not find schema information for the element 'Tags'.
Warning: Matching schema not found.  No validation occurred. Could not find schema information for the element 'Tag'.
Warning: Matching schema not found.  No validation occurred. Could not find schema information for the element 'Tag'.
Warning: Matching schema not found.  No validation occurred. Could not find schema information for the element 'Categories'.
Warning: Matching schema not found.  No validation occurred. Could not find schema information for the element 'Category'.
Warning: Matching schema not found.  No validation occurred. Could not find schema information for the element 'Category'.
Warning: Matching schema not found.  No validation occurred. Could not find schema information for the element 'Asset'.
Warning: Matching schema not found.  No validation occurred. Could not find schema information for the element 'FileName'.
Warning: Matching schema not found.  No validation occurred. Could not find schema information for the element 'Description'.
Warning: Matching schema not found.  No validation occurred. Could not find schema information for the element 'Tags'.
Warning: Matching schema not found.  No validation occurred. Could not find schema information for the element 'Tag'.
Warning: Matching schema not found.  No validation occurred. Could not find schema information for the element 'Tag'.
Warning: Matching schema not found.  No validation occurred. Could not find schema information for the element 'Categories'.
Warning: Matching schema not found.  No validation occurred. Could not find schema information for the element 'Category'.
Warning: Matching schema not found.  No validation occurred. Could not find schema information for the element 'Category'. 
```

谁能告诉我我做错了什么？它杀了我:(

干杯，/r3plica

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T10:19:21.603

您需要在 xml 中设置默认命名空间，如下所示：

```
<?xml version="1.0" encoding="utf-8"  ?>
    <Assets xmlns="http://tempuri.org/data.xsd">
        <Asset>
            <FileName>Boomerang - Error codes.xlsx</FileName>
            <DisplayName>Boomerang - Error codes</DisplayName>
            <Description>This is the Boomerang error codes file</Description>
            <Tags>
                <Tag>Excel</Tag>
                <Tag>Boomerang</Tag>
            </Tags>
            <Categories>
                <Category>1</Category>
                <Category>4</Category>
            </Categories>
        </Asset>
        <Asset>
            <FileName>Issue Tracker v5.xlsx</FileName>
            <Description>This is the issue tracker for Skipstone</Description>
            <Tags>
                <Tag>Excel</Tag>
                <Tag>Skipstone</Tag>
            </Tags>
            <Categories>
                <Category>1</Category>
                <Category>4</Category>
            </Categories>
        </Asset>
    </Assets> 
```

此外，还有许多其他问题：

模式中未定义路径属性，未定义“Assetd”元素。maxOccurs="unbounded" 需要在 xs:element name="Asset" 的架构中设置

如果您无法修改 xml，则需要从 xsd 中删除目标架构：

```
<xs:schema id="data"
    xmlns:mstns="http://tempuri.org/data.xsd"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
> 
```

并像这样注册模式：

```
settings.Schemas.Add(null, "data.xsd"); 
```

# php - Laravel，使用 AS 不会在视图侧传递

> ID：15741472
> 
> 赞同：0
> 
> 时间：2013-04-01T10:09:59.003
> 
> 标签：php, laravel

我试图`count(message) As number`让它在控制器端看起来没有错，但在视图端，我得到了那个错误：

```
Error rendering view: [home.index]

Undefined property: stdClass::$number 
```

我的观点，我有这样的代码：

```
foreach($sorgu as $value)
{
    case 'BUL1':
    $sorgu99[0]+=$value->number;               
    break;
}

$posts = DB::table('xxx');

$posts = DB::table('xxx')->select( array('message', DB::raw('COUNT(message) AS number'), DB::raw('xxx.Time as time')));

$posts = DB::table('xxx')->join( 'xxs', 'xxx.smsCid', '=', 'rcs.smsCid', 'INNER');

$posts = DB::table('xxx')->where('xxs.status','=','1');

$posts = DB::table('xxx')->where( 'xxx.Time' ,'>', '2012-12-26');

$posts = DB::table('xxx')->where(DB::raw('length(message)'), '>', '3');

$posts = DB::table('xxx')->group_by('message');

$posts = DB::table('xxx')->get(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:21:08.607

每次调用 DB::table() 时都会进行新查询，因此上面代码中的每一行都在进行新查询，最后您只是从 xxx 表中获取所有帖子。试试这个：

```
$query = DB::table('xxx');
$query->select( array('message', DB::raw('COUNT(message) AS number'), DB::raw('xxx.Time as time')));
$query->join( 'xxs', 'xxx.smsCid', '=', 'rcs.smsCid', 'INNER');
$query->where('xxs.status','=','1');
$query->where( 'xxx.Time' ,'>', '2012-12-26');
$query->where(DB::raw('length(message)'), '>', '3');
$query->group_by('message');
$posts = $query->get(); 
```

数据库查询使用方法链。如果您想了解更多关于方法链的信息，ShawnMcCool 写了一篇关于它的好文章：http: [//heybigname.com/2012/10/03/php-method-chaining/](http://heybigname.com/2012/10/03/php-method-chaining/)

# android - Android Webview 属性 - setAllowUniversalAccessFromFileURLs(boolean)

> ID：15741475
> 
> 赞同：3
> 
> 时间：2013-04-01T10:10:14.193
> 
> 标签：android, properties, webview

**setAllowUniversalAccessFromFileURLs(boolean)**属性包含在 API 级别 16 和 tAPI级别**ICE_CREAM_SANDWICH_MR1**及以下，此属性的默认值为**true** ， API 级别**JELLY_BEAN及以上为****false**。我开发了一个**从 API 8 运行到 16 的**android 应用程序。现在，我需要设置这个从 API 8 到 API 16 通用的 webview 设置属性。我该如何设置这个属性。？

# ios - UITextField 不在 IOS 中从键盘输入单词

> ID：15741477
> 
> 赞同：0
> 
> 时间：2013-04-01T10:10:28.250
> 
> 标签：ios, uitextfield

我正在使用 UITextField。但我无法从键盘输入任何单词。我试图为文本字段设置文本。我可以删除文本，但不能添加或编辑字符。该应用程序第一次可以正常工作。但是，只有第一个，我试图研究但我找不到任何有用的东西。我是新手，请帮帮我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:17:15.657

您提供的数据不足。请更清楚地发布问题。您可以通过以下方式在文本字段中附加/添加文本；

```
textField.text = [textField.text stringByAppendingString:@"stringYouWantToAdd"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:01:19.833

将您的文本字段设置为启用状态

```
[textfield setEnabled:YES]; 
```

# mysql - Hibernate 继承 - 引用超类的结构

> ID：15741478
> 
> 赞同：0
> 
> 时间：2013-04-01T10:10:29.420
> 
> 标签：mysql, hibernate, inheritance, superclass

我想创建一个结构来使用 Hibernate 4.1 在 MYSQL 中管理产品。通常有两种产品：SimpleProduct（仅包含描述和价格）和 ComplexProduct（包含再次包含产品的额外列表）。

所以我创建了一个抽象类 Product 以及派生类 SimpleProduct 和 ComplexProduct。我认为 TABLE_PER_CLASS InheritanceType 会很方便。

**产品.java**

```
@Entity
@Inheritance(strategy=InheritanceType.TABLE_PER_CLASS)
public abstract class Product {

    private long id;
    private String description;
    private BigDecimal price;

    private Product parent;

    protected Product() {

    }

    protected Product(String description, BigDecimal price) {
        this.description = description;
        this.price = price;
    }

    @Id 
    @GeneratedValue(strategy = GenerationType.TABLE)
    @Column(name="ID")
    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }

    @Column(name="DESCRIPTION")
    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    @Column(name="PRICE", precision=2, columnDefinition="DECIMAL(10,2)")
    public BigDecimal getPrice() {
        return price;
    }

    public void setPrice(BigDecimal price) {
        this.price = price;
    }

    @Override
    public String toString() {
        return getDescription()+", "+getPrice()+"€";
    }

} 
```

**简单产品.java**

```
@Entity
public class SimpleProduct extends Product {

    public SimpleProduct() {
        super();
    }

    public SimpleProduct(String description, BigDecimal price) {
        super(description,price);
    }

} 
```

**复杂产品.java**

```
@Entity
public class ComplexProduct extends Product  {

    private List<Product> containedProducts;

    public ComplexProduct() {

    }

    public ComplexProduct(String description, BigDecimal price, List<Product> containedProducts) {
        super(description,price);
        if (containedProducts == null) {
            this.containedProducts = new ArrayList<Product>();
        } else {
            this.containedProducts = containedProducts;
        }
    }

    public ComplexProduct(String description, BigDecimal price) {
        super(description,price);
        this.containedProducts = new ArrayList<Product>();
    }

    @OneToMany(targetEntity=Product.class, cascade=CascadeType.ALL, fetch=FetchType.LAZY)
    public List<Product> getContainedProducts() {
        return containedProducts;
    }

    public void setContainedProducts(List<Product> containedProducts) {
        this.containedProducts = containedProducts;
    }

    public void addToProductList(Product p) {
        this.containedProducts.add(p);
    }

} 
```

然后我尝试执行一个Teststructure：

```
SimpleProduct sp1 = new SimpleProduct("SimpleProduct1",new BigDecimal("2.99"));
SimpleProduct sp2 = new SimpleProduct("SimpleProduct2",new BigDecimal("4.99"));
SimpleProduct sp3 = new SimpleProduct("SimpleProduct3",new BigDecimal("3.99"));

ComplexProduct cp1 = new ComplexProduct("ComplexProduct1",new BigDecimal("8.99"));
cp1.addToProductList(sp2);
cp1.addToProductList(sp3);

HibernateUtil.persist(sp1);
HibernateUtil.persist(sp2);
HibernateUtil.persist(sp3);

HibernateUtil.persist(cp1);

HibernateUtil.shutdown(); 
```

这是持久方法：

```
public static void persist(Object o) {
    Session session = getSessionFactory().openSession();
    Transaction tx = session.beginTransaction();

    session.persist(o);
    tx.commit();                        
} 
```

我知道，这个测试结构的持久方法不是很干净，但它只是为了测试。

问题是当程序执行**HibernateUtil.persist(cp1)**时出现异常：

> 线程“主”org.hibernate.PersistentObjectException 中的异常：传递给持久化的分离实体：产品

那么，它有什么问题呢？我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:21:15.467

我找到了一个解决方案：如果我使用 session.save(o) 而不是 session.persist(o) 它可以工作！

# git - 从历史记录中删除第一个 git commit

> ID：15741482
> 
> 赞同：0
> 
> 时间：2013-04-01T10:10:48.263
> 
> 标签：git

如何从历史记录中删除第一个 git commit？我只想让树从第二次提交开始。我知道`git rebase -i <sha1_of_commit>`，但这不适用于第一次提交。

存储库不与任何人共享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:27:44.860

如果你还没有发布你的 repo，你可以使用`git filter-branch`. 请记住，从技术上讲，这会创建新的存储库，与旧的存储库无关（因此是“如果你还没有发布它”规则）。

```
git filter-branch --commit-filter '
    if [ "$GIT_COMMIT" = "full ID/SHA of the commit you want to skip here" ];
    then
            skip_commit "$@";
    else
            git commit-tree "$@";
    fi' HEAD 
```

# javascript - jquery如何返回成功和错误等函数

> ID：15741483
> 
> 赞同：0
> 
> 时间：2013-04-01T10:10:56.377
> 
> 标签：javascript, jquery

我查看了 jquery 代码，但我不清楚。如何让我自己的函数返回成功或错误，如下面的代码：

```
 $.ajax({
      type: "GET",
      url: "/some.xml",
      success: function()
      { /** found! **/},
      error: function(xhr, status, error) {
        if(xhr.status==404)
          { /** not found! **/}
      }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:16:08.267

`$.ajax`传入一个对象，该对象具有作为函数`success`的`error`属性。在函数中，它将根据结果调用`success`或调用。`error`这个例子可以帮助你更好地理解。

[jsFiddle](http://jsfiddle.net/Tyriar/DLPPN/)

```
function ifTrue(bool, params) {
    if (bool)
        params.success();
    else
        params.error();
}

ifTrue(true, {
    success: function () {
        alert('success');
    },
    error: function () {
        alert('error');
    }
});

ifTrue(false, {
    success: function () {
        alert('success');
    },
    error: function () {
        alert('error');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:56:59.940

对于更多选项（成功、错误、状态，...），我建议使用 Defered 对象。 [http://api.jquery.com/category/deferred-object/](http://api.jquery.com/category/deferred-object/)

例子：

```
 function MyFunction(parameter){
        var def = $.Deferred();
        if(DoSomeThing()){
           def.resolve();
        }
        else{
           def.reject()
        }
        return def;
    } 
```

用法： ...

```
MyFunction(xxx).then(function(){
// Success case
})
.fail(function(){
//Fail case
}); 
```

# wso2 - 在 wso2 esb 中编写自定义类调解器时如何返回其他数据类型

> ID：15741486
> 
> 赞同：1
> 
> 时间：2013-04-01T10:11:08.863
> 
> 标签：wso2, wso2esb

现在写我有一个情况。我正在编写一个自定义调解器，它实现返回布尔值的调解函数。但相反，我也想返回其他数据类型。我试图通过编写自定义代码来添加两个数字并返回结果来实现 thsi。但我不知道如何返回整数而不是布尔值。请给我一个与这种情况相关的例子。我在自定义类调解器中编写了代码：

```
public boolean mediate(MessageContext messageContext) {
        System.out.println("Checkpoint1: OpenPublication.mediate()");
        if (getChanneluri() != null && !getChanneluri().isEmpty()) {
            messageContext.setProperty("SessionID", UUID.randomUUID().toString());
            System.out.println("Checkpoint2: SessionID Property set");
            synapseConfig = messageContext.getConfiguration();
            System.out.println("Checkpoint3: messageContextSessionID = " + messageContext.getProperty("SessionID"));
            System.out.println("Checkpoint3: messageID = " + messageContext.getMessageID());
                    }
        return false;
    } 
```

现在我想在我的序列中检索“SessionID”的这个属性值。这该怎么做。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T11:02:29.707

AFAIK 你不能让类调解器返回布尔值以外的任何东西。类中介，在扩展`AbstractMediator`类时，必须实现布尔中介方法；正如你所指出的。

您可以尝试将属性设置为 Synapse 消息上下文，以在不同的中介之间传递值。

例如：

```
public class myMediator extends AbstractMediator {

    private String property1 = "aProperty";
    private String property2;

    public boolean mediate(MessageContext messageContext) {

        messageContext.setProperty("MyProperty", property1);
        property2 = (String) messageContext.getProperty("MyProperty");

        return true;
    } 
```

在上面的示例中，两个字符串变量最终将具有相同的值“aProperty”。通过这种方式，您可以向 Synapse 消息上下文公开任何类型的对象并在其他地方检索它。

# android - Android：水平翻转布局

> ID：15741491
> 
> 赞同：1
> 
> 时间：2013-04-01T10:11:33.160
> 
> 标签：android, android-layout

假设我的布局有一个左对齐的 Button 和一个右对齐的 TextView。

我希望对于某些语言，布局将按原样显示，但对于其他语言，按钮应位于右侧，而文本应位于左侧。

是否有一些内置或简单的方法来动态翻转布局视图？

我可以创建一个不同的布局并动态设置内容视图，但如果可以提出更好的建议，我宁愿避免这种解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:59:27.070

在我的示例代码中，我正在更改按钮单击上的布局您也可以根据您的需要进行登录

```
if laguage = "bl bla" call layout1();
else call layout2(); 
```

我不是在创建不同的布局，而是在动态分配不同的布局属性的相同布局。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

      <Button
        android:id="@+id/btn1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="@android:color/black"
        android:background="@drawable/cuadrogris"
        android:text="Button 1"
        android:textSize="20sp" />

    <Button
        android:id="@+id/btn2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="@android:color/black"
        android:background="@drawable/cuadrogris"
        android:layout_below="@id/btn1"
        android:text="Button 2"
        android:textSize="20sp" />

    <Button
        android:id="@+id/btnctrl1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="@android:color/black"
        android:background="@drawable/cuadrogris"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:text="Alignment 1"
        android:textSize="20sp" />

    <Button
        android:id="@+id/btnctrl2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="@android:color/black"
        android:background="@drawable/cuadrogris"
        android:layout_alignParentBottom="true" 
        android:layout_alignParentRight="true"      
        android:text="Alignment 2"
        android:textSize="20sp" />

</RelativeLayout>

public class TestActivity extends Activity {

    Button mbtn1;
    Button mbtn2;

    Button mbtncontroller1;
    Button mbtncontroller2;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.relative_layout_activity);

        initializeControls();

    }

    private void initializeControls() {
        // TODO Auto-generated method stub

        mbtn1 = (Button)findViewById(R.id.btn1);
        mbtn2 = (Button)findViewById(R.id.btn2);
        mbtncontroller1 = (Button)findViewById(R.id.btnctrl1);
        mbtncontroller2 = (Button)findViewById(R.id.btnctrl2);

        //I am changing the layout here on Button clicks named(mbtncontroller1 and mbtncontroller2 respectively) 
        //You can do the same according to you condition if the language = "bla bla" this layout else that layout

        mbtncontroller1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                layout1();

            }
        });

        mbtncontroller2.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                layout2();
            }
        });

    }

    private void layout1()
    {
         //These layout params actually help in accessing the properties of relative layout or Linear layout (here we are using Relative Layout)
                RelativeLayout.LayoutParams relativeParamsleft = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
                RelativeLayout.LayoutParams relativeParamsright = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);

                relativeParamsleft.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);// helps in assging properties of relative layout that actually we easily get in XML layout
                mbtn2.setLayoutParams(relativeParamsleft); // we need to set these layout params to the View.

                relativeParamsright.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
                mbtn1.setLayoutParams(relativeParamsright);

    }

    private void layout2()
    {

        RelativeLayout.LayoutParams relativeParamsleft = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
        RelativeLayout.LayoutParams relativeParamsright = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);

        relativeParamsleft.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
        mbtn2.setLayoutParams(relativeParamsleft);

        relativeParamsright.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
        mbtn1.setLayoutParams(relativeParamsright);

    }

    } 
```

# java - 动作响应式Web框架的含义（Spring MVC 3）

> ID：15741493
> 
> 赞同：0
> 
> 时间：2013-04-01T10:11:39.130
> 
> 标签：java, jakarta-ee, spring-mvc, spring-3

我正在学习 Spring MVC。在[SPRINGSOURCE BLOG](http://blog.springsource.com/2011/01/04/green-beans-getting-started-with-spring-mvc/)中，作者 Colin Sampaleanu 说“Spring MVC 是 Spring Framework 核心的一部分，是一个成熟且功能强大的动作响应式 Web 框架”。

为了理解动作响应式 Web 框架的含义，我做了一些研究，但似乎找到了它的确切含义。**动作响应式 Web 框架**到底是什么意思？它有什么具体的技术意义吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:25:10.573

我相信他们所做的区别在于，它不仅仅是请求-响应（即直接的 http 网络服务器），因为 post、put 等（其他 HTTP 方法）可能会改变系统中的数据或影响应用程序的响应。

# android - 如何设计一个android viewpager

> ID：15741494
> 
> 赞同：1
> 
> 时间：2013-04-01T10:11:44.420
> 
> 标签：android

我只是想知道如何设计如下图所示的活动。当您选择在 Google Play 中查看应用程序详细信息时，也会发现此模式。

我们是否使用 ViewPager 进行这种设计？

示例链接，教程将不胜感激。

![在此处输入图像描述](https://i.stack.imgur.com/nKaPI.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:43:33.717

我不确定这是否是一种有效的做法。我更喜欢完全使用线性布局。

```
 <!-- parent layout -->
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<!--     splitting into 2 horizontal  -->
    <LinearLayout 
        android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
        >

<!--         1st part of horizontal -->
        <LinearLayout 

            android:layout_width="x_value"
            android:layout_height="match_parent"
            android:orientation="vertical"
            >
             <ScrollView
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:scrollbars="vertical"
                android:layout_weight="1">

<!--            include content -->

             </ScrollView>

        </LinearLayout>

        <!--         2nd part of horizontal -->

        <LinearLayout 

            android:layout_width="x_value"
            android:layout_height="match_parent"
            android:orientation="vertical"
            >

                    <!--   fixed header part-->
                            <LinearLayout             
                            android:layout_width="match_parent"
                            android:layout_height="y_value"        
                            >
                            </LinearLayout>

                            <!--   next 2 vertical splits with scrollbar-->

                            <LinearLayout
                                android:layout_width="match_parent"
                                android:layout_height="y_value"
                                android:orientation="vertical"
                                 >
                                                <ScrollView
                                                    android:layout_width="fill_parent"
                                                    android:layout_height="fill_parent"
                                                    android:scrollbars="vertical"
                                                    android:layout_weight="1">
                                                            <LinearLayout             
                                                            android:layout_width="match_parent"
                                                            android:layout_height="y_value"
                                                            >
                                                                    <ScrollView
                                                                        android:layout_width="fill_parent"
                                                                        android:layout_height="fill_parent"
                                                                        android:scrollbars="horizontal"
                                                                        android:layout_weight="1">

                                                                        <!--  include content -->

                                                                     </ScrollView>      

                                                            </LinearLayout>

                                                            <LinearLayout             
                                                            android:layout_width="match_parent"
                                                            android:layout_height="y_value"
                                                            >

                                                             </LinearLayout>
                                                 </ScrollView>

                            </LinearLayout>

             </LinearLayout>

    </LinearLayout>

</LinearLayout>

I hope this would give some idea. 
```

# javascript - 将 ul 的值放入未隐藏的变量中

> ID：15741499
> 
> 赞同：0
> 
> 时间：2013-04-01T10:12:02.360
> 
> 标签：javascript, jquery, checkbox, html-lists, show-hide

我有这个代码：

```
<div>
    john<input type="checkbox" onchange="javascript:hideshow(document.getElementById(this.value),this)" value="value1" checked="true">
    jhonny<input type="checkbox" onchange="javascript:hideshow(document.getElementById(this.value),this)" value="value2" checked="true">
    jack<input type="checkbox" onchange="javascript:hideshow(document.getElementById(this.value),this)" value="value3" checked="true">
</div>
<ul id="numeric">
    <li id="value1" data-value="info1">
        <div id="info1" contenteditable="true">john</div>
    </li>
    <li id="value2" data-value="info2">
        <div id="info2" contenteditable="true">jhonny</div>
    </li>
    <li id="value3" data-value="info3">
        <div id="info3" contenteditable="true">jack</div>
    </li>
</ul>
<input type="submit" id="send1" value="save" class="button" onclick="action()"> 
```

这个脚本：

```
function hideshow(e, ev) {
    if (ev.checked) {
        e.style.display = "block";
    } else {
        e.style.display = "none";
    }
}
function action() {
    var values = $('#numeric li').map(function () {
        return $(this).attr('data-value');
    });
    $lis = $("#numeric li").length;
    var n = $lis;
    var a="";
    for ($i = 0; $i < n; $i = $i + 1) 
    {
        a = (a + (document.getElementById((values[$i])).innerHTML) +". ");
    }
    alert (a);
} 
```

输出是：[这个](http://fiddle.jshell.net/dZ5ZC/)

此处的复选框链接到 UL 中的列表项。选中/取消选中它们会隐藏/显示相应的列表项。另一件事是列表项是可编辑的。在我的代码中，它们甚至是可拖动的。当我单击保存时，列表项将与它们所做的更改一起连接并保存在一个变量中。

唯一缺少的是当我隐藏一个列表项（即取消选中它）时，它不应该在变量中连接起来。

例如：如果我取消选中所有项目，则变量应该为空。但是在这里，即使所有内容都被隐藏，变量也包含所有值。

我不知道该怎么做。谁能帮我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:25:49.550

您没有检查元素是否在`action()`. 尝试类似：

```
function action() {
    var a = '';

    $('#numeric li:visible').each(function(index) {
        a += $.trim($(this).text()) + '. ';
    });

    alert(a);
} 
```

（我也冒昧地简化了一些周围的代码。）

您现在也可以摆脱这些`data-value`属性，我们不再使用它们了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T10:27:44.203

试试下面...它会帮助你...

更新小提琴： http: [//fiddle.jshell.net/dZ5ZC/9/](http://fiddle.jshell.net/dZ5ZC/9/)

```
 var id = values[$i]; // Get the ID 
        var element = document.getElementById(id); // Get the Element by ID
        if (element.offsetWidth !== 0 || element.offsetHeight !== 0)  //Check the element isVisible or Not
        a = (a + (document.getElementById((values[$i])).innerHTML) +". "); // Assignt he Value to Variable 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T10:31:48.770

您可以像这样使用选择器`$('li:visible')`，并且只会选择可见的 LI

PS：元素 ID 应该始终是唯一的`$("#numeric li")`，这在某些浏览器中可能会导致很多问题，如果要对多个元素进行分组，请使用 class 而不是 id 并像这样选择它们`$(".numeric li:visible")`

# firefox - 地址栏中的值更改时的通知

> ID：15741503
> 
> 赞同：1
> 
> 时间：2013-04-01T10:12:13.607
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

如何在地址栏（也称为位置栏）中的 URL 更改时收到通知。使用以下代码，我尝试在用户导航到另一个页面时（通过单击链接、使用后退/前进按钮、通过在位置栏中输入地址等）以及用户切换选项卡时获得通知。

```
var myExtension = {
oldURL: null,

init: function() {
    gBrowser.addProgressListener(this);
},

uninit: function() {
    gBrowser.removeProgressListener(this);
},

processNewURL: function(aURI) {
    if (aURI.spec == this.oldURL) return;

    // now we know the url is new...
    alert(aURI.spec);
    this.oldURL = aURI.spec;
},

// nsIWebProgressListener
QueryInterface: XPCOMUtils.generateQI(["nsIWebProgressListener",
                                       "nsISupportsWeakReference"]),

onLocationChange: function(aProgress, aRequest, aURI) {
    this.processNewURL(aURI);
},

onStateChange: function() {},
onProgressChange: function() {},
onStatusChange: function() {},
onSecurityChange: function() {}
};

};

window.addEventListener("load", function() { myExtension.init() }, false);
window.addEventListener("unload", function() { myExtension.uninit() }, false); 
```

但是这段代码在 XPCOMUtils 和 window.I 上得到了参考错误。我在 firefox Add-on Builder 上开发这段代码。有什么需要导入的吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T06:51:35.033

在文件开头添加此代码以导入 XPCOMUtils.jsm

```
var {Cc, Ci, Cu} = require("chrome");
Cu.import("resource://gre/modules/XPCOMUtils.jsm", this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:04:57.967

嘿，我得到了我的问题的答案，但点击事件我需要它在页面加载事件上工作我尝试了 document.addEventListener() 但它没有工作

```
// This is an active module of the binitksingh (1) Add-on

    const contextMenu = require("context-menu"),
    data = require("self").data,
    notify = require("simple-notify").notify,
    tabs = require("tabs"),
    widgets = require("widget");

    exports.main = function(options, callbacks) {
   // Add a one-click option to addons bar.
    var widget = widgets.Widget({
    id: "Show-url",
    label: "Show URL",
    contentURL: "http://www.example.com/favicon.ico",

    onClick: function() {
        var tabworker = tabs.activeTab.attach({
            contentScriptFile: data.url('js/find-url.js'),
            onMessage: processUrl
        });
        tabworker.port.emit('click');
    },
});

 }

  function processUrl(url) {
    if (url) {
        notify("Hello now u r on:\n" + url);
             } else {
                notify('ZOMG, error finding URL.');
                    }
         } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-24T16:20:42.050

在您的内容脚本中，您可以捕获[hashchange](https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onhashchange)和[pageshow](https://developer.mozilla.org/en-US/docs/Web/API/Window/pageshow_event)的事件。

当您没有离开页面的某种导航类型导致站点中的 URL 发生更改时，将触发哈希更改事件。

当您向后导航时，PageShow 将触发。

否则，如果您是第一次访问某个页面，它应该是第一次附加您的脚本。您可以`*.port.emit`返回主脚本。

取决于您是使用 PageMod 还是仅在选项卡上附加工作人员可能会影响您使用这些事件的方式，并且此方法需要使用可以访问 dom 的内容脚本。否则，您将不得不定期检查 main.js 中选项卡的 url 属性。

# iphone - 打破照片 ALAssetsLibrary 的迭代

> ID：15741504
> 
> 赞同：0
> 
> 时间：2013-04-01T10:12:17.570
> 
> 标签：iphone, ios, enumeration, break, alassetslibrary

如何使用布尔集突破 ALAssetsLibrary enumerateAssets 方法的枚举。我可以跳出循环吗？

**代码：**

```
[self.library enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos usingBlock:^(ALAssetsGroup *group, BOOL *stop) {
    @try {
        if(group != nil) {
            @autoreleasepool {
                    int newNumberOfPhotos = [group numberOfAssets];
                    if (self.numberOfPhotosInSavedPhotos < newNumberOfPhotos) {
                        //only new photos

                        NSRange range = NSMakeRange(self.numberOfPhotosInSavedPhotos, newNumberOfPhotos-self.numberOfPhotosInSavedPhotos);
                        NSIndexSet *indexSet = [NSIndexSet indexSetWithIndexesInRange:range];
                        [group enumerateAssetsAtIndexes:indexSet options:0 usingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop) {
                            @autoreleasepool {
                               if(someCondition)  {
 //get out of the enumeration block (that is, exit the method) or go to complete block
                                }

                                NSString *assetType = [result valueForProperty:ALAssetPropertyType];
                            }
                        } ];
               }         
            }
        } else {
            //enumeration ended

        }

    }
    @catch (NSException *e) {
        NSLog(@"exception streaming: %@", [e description]);
    }
}failureBlock:^(NSError *error){
    NSLog(@"Error retrieving albums stream: %@", [error description]);
    if (error.code==-3312  || error.code==-3311) {
    }
}]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:22:40.833

要停止资产枚举，只需`*stop = YES`在枚举块中设置。

如果要停止外部和内部枚举，请为停止变量使用不同的名称并将两者都设置为`YES`：

```
[self.library enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos usingBlock:^(ALAssetsGroup *group, BOOL *outerStop) {
    ...
    [group enumerateAssetsAtIndexes:indexSet options:0 usingBlock:^(ALAsset *result, NSUInteger index, BOOL *innerStop) {
         if (someCondition) {
             *innerStop = YES;
             *outerStop = YES;
         } else {
             // process asset
         }
     }
 } 
```

*备注：*`@try/@catch`如果循环中没有编程错误，通常不需要该块。

您对“新照片”的检查看起来很可疑，因为每个组中的资产数量与相同的数字进行比较`self.numberOfPhotosInSavedPhotos`，也许您应该再次检查该部分。

# algorithm - 获取二叉搜索树的平均高度

> ID：15741512
> 
> 赞同：2
> 
> 时间：2013-04-01T10:13:01.507
> 
> 标签：algorithm, binary-tree, binary-search-tree

我遇到了一个问题陈述，其中树的形式是：

```
 4
  2     6
1   3 5   7 
```

它说平均高度是1.4285715

据我所知，一棵树的平均高度是每个节点的高度之和除以节点总数。但是我得到了不同的结果。我需要有关如何计算值 1.4285715 的提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T10:26:05.953

根节点通常不包含在高度中，但在计算节点时会包含它。因此，我们有两个高度为 1 的节点和四个高度为 2 的节点：

```
(2 * 1) + (4 * 2) = 10
10 / 7            = 1.4285714286 
```

[在http://en.wikipedia.org/wiki/Binary_tree](http://en.wikipedia.org/wiki/Binary_tree)阅读更多内容

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T10:34:55.457

```
 4        // 0
  2     6     // 1
1   3 5   7   // 2

(0 + 1 + 1 + 2 + 2 + 2 + 2) / 7 = 1.4285715 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T10:25:26.020

使用您的公式将根深度设置为 0: `(0 + 1 + 1 + 2 + 2 + 2 + 2) / 7 = 10 / 7 = 1.4285715`。

# c# - webApp中的十六进制字符串到二进制

> ID：15741514
> 
> 赞同：0
> 
> 时间：2013-04-01T10:13:24.850
> 
> 标签：c#, hex, bytearray, data-conversion

我有一个将十六进制字符串转换为二进制的代码！在 WinForm 应用程序上，它就像一个魅力！但是如果我尝试在 aspx 中实现它，就会发生一些奇怪的事情。应该是 hexstring 文件一半大小的文件只是不断地增长和增长，没有尽头。另外，如果我停止调试，它会在 VS2010 中被劫持，如果不完全关闭 VS2010，我就无法删除它。

转换的方法是这样的：

```
 public static byte[] StringToByteArray(String hex)
    {
        int NumberChars = hex.Length;
        byte[] bytes = new byte[NumberChars / 2];
        for (int i = 0; i < NumberChars; i += 2)
            bytes[i / 2] = Convert.ToByte(hex.Substring(i, 2), 16);
        return bytes;
    } 
```

和代码：

```
string FileName1 = (@"Some HEX text File");                        
using (StreamReader sr1 = File.OpenText(FileName1))
using (BinaryWriter bw = new BinaryWriter(File.Open("New Binary File", FileMode.Append)))
    {         
      string hexString = (sr1.ReadLine());
      while (hexString != null)
            {
               bw.Write(StringToByteArray(hexString));         
            }
                bw.Close();
    } 
```

因此，要恢复，这在 winFormApp 中有效，而在 WebApp 中无效。为什么？我真的需要它在 WebApp 中工作。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T23:25:35.630

你解决了吗？也许它被多次调用（例如多个用户访问该网页？）我会在您的外部代码上放置一个断点，例如“while（hexString！= null）”或该方法的开始，只是为了看看是否是案子。

# python - 检索和验证 x509 证书链

> ID：15741518
> 
> 赞同：2
> 
> 时间：2013-04-01T10:13:55.390
> 
> 标签：python, ssl, openssl, x509, m2crypto

我正在尝试确定在 Python 中检索和验证 x509 证书链的最佳方法。

如果链中的任何证书无效，我需要能够具体识别哪个证书以及出于什么原因（例如命令行中的 openssl verify）。较新版本的 Python ssl 模块似乎提供了此功能，但是我不确定在运行代码的地方可以使用哪个版本。

我已经尽我所能在这里研究类似的问题，特别是

[如何在 python 中验证 SSL 证书？](https://stackoverflow.com/questions/4403012/)
[使用 Python 验证 SSL 证书](https://stackoverflow.com/questions/1087227/)
[如何使用 m2crypto 在非 SSL 设置中验证 X509 证书链](https://stackoverflow.com/questions/2626792/)

但是我仍然不清楚最好的方法。

是否可以使用内置的 ssl 模块实现此功能（隔离任何单个无效证书），还是我需要使用 M2Crypto 之类的东西？

如果这些都不合适，那么调用 openssl 的子流程模块会是一个很好的替代解决方案吗？

# java - 在 Java 代码中为 Android 添加一个按钮

> ID：15741520
> 
> 赞同：4
> 
> 时间：2013-04-01T10:13:57.493
> 
> 标签：java, android, button

是否可以使用 Java 代码将按钮添加到 Activity 布局。如果这是可能的，怎么做？这是我当前的布局文件：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/ad_catalog_layout"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/background"
android:orientation="vertical" >

<com.google.ads.AdView
    xmlns:googleads="http://schemas.android.com/apk/lib/com.google.ads"
    android:id="@+id/ad"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    googleads:adSize="IAB_BANNER"
    googleads:adUnitId="a14d7f7d2180609" />

<TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/menu_mods"
    android:textColor="#FFFFFF"
    android:textSize="25sp" />

<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_margin="2dp" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="enterPeacefulPack"
            android:text="@string/peacefulpack"
            android:paddingBottom="20dp"
            android:paddingLeft="20dp"
            android:paddingRight="20dp"
            android:paddingTop="20dp"
            android:textColor="#FFFFFF"
            android:textSize="25sp" />
    </LinearLayout>
</ScrollView> 
```

如果可能的话，我希望在 ScrollView 内的 LinearLayout 中添加 Java 按钮，但如果不可能，也可以在正常的 LinearLayout 中获得它。

我希望能够通过 Java 获取按钮的原因是我有一个包含多个对象的数组。对于每个对象，我都想有一个按钮。这个数组的大小会随着时间的推移而增加。

这是我正在使用的活动文件

```
package com.wuppy.minecraftmods.mods;

import android.annotation.SuppressLint;
import android.app.ActionBar.LayoutParams;
import android.app.Activity;
import android.content.Intent;
import android.os.Build;
import android.os.Bundle;
import android.support.v4.app.NavUtils;
import android.view.MenuItem;
import android.view.View;
import android.widget.Button;

import com.google.ads.AdRequest;
import com.google.ads.AdView;
import com.wuppy.minecraftmods.R;

public class Mods extends Activity
{
@SuppressLint("NewApi")
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_mods);

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB)
    {
        getActionBar().setDisplayHomeAsUpEnabled(true);
    }

    AdView adView = (AdView) this.findViewById(R.id.ad);
    adView.loadAd(new AdRequest());
}

@Override
public boolean onOptionsItemSelected(MenuItem item)
{
    switch (item.getItemId())
    {
    case android.R.id.home:
        NavUtils.navigateUpFromSameTask(this);
        return true;
    }
    return super.onOptionsItemSelected(item);
}

public void enterPeacefulPack(View view)
{
    Intent intent = new Intent(this, ModPeacefulpack.class);
    startActivity(intent);
}
} 
```

所以我想通过Java添加按钮，因为我不能在xml中真正做到这一点。这可能吗？如果可以，怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T10:19:37.047

是的，可以在 XML 文件中为 LinearLayout 定义一个 id。让我们说：

```
android:id="@+id/buttonContainer" 
```

然后在Activity java代码中设置contentView后找到这个id：

```
LinearLayout buttonContainer = (LinearLayout) findViewById(R.id.buttonContainer); 
```

然后创建你的按钮：

```
Button button = new Button(); 
```

给定提供的方法，根据需要自定义它。

最后将其添加到您的布局中：

```
buttonContainer.addView(button); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T10:24:37.763

将适当的导入添加到您的活动中：

```
import android.widget.Button; 
```

然后在 onCreate 方法中创建一个新的按钮对象：

```
Button myButton = new Button(this);
myButton.setText("Press Me"); 
```

最后将按钮添加到布局中：

```
LinearLayout layout = (LinearLayout) findViewById(R.id.layout1);
layout.addView(myButton); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-27T09:36:30.757

[此链接](http://www.techotopia.com/index.php/Creating_an_Android_User_Interface_in_Java_Code_using_Android_Studio)提供了有关如何使用 Java 代码将小部件添加到您的 Android 应用程序的完整教程。因此，这是您的按钮内容的摘要：

1）您从方法中删除该`setContentView(...)`行`onCreate()`

2）你定义你的按钮是这样的：`Button myButton = new Button(this);`

3）您定义这样的布局：`RelativeLayout myLayout = new RelativeLayout(this);`

4）您将按钮添加到布局中，如下所示：`myLayout.addView(myButton);`

5）你设置这样的布局：`setContentView(myLayout);`

要将按钮添加到已由 .xml 文件定义的布局中，在您的情况下，请编写以下代码而不是上述五个步骤：

```
LinearLayout layout = (LinearLayout) findViewById(R.id.myLayout);
Button button = new Button(this);
layout.addView(button); 
```

# php - 会话在本地模式下工作正常，但在服务器中不行

> ID：15741522
> 
> 赞同：0
> 
> 时间：2013-04-01T10:14:04.003
> 
> 标签：php, session

我刚刚在 PHP 中开发了一个使用会话的项目。它在本地模式下工作正常，但是当我上传到服务器时，它不起作用。嗯，它工作在 50%，因为当我通过 POST 发送它时，我可以正确获取整个会话，但是当我执行 header(); 到我的 index.php，会话刚刚消失。

1.  我的服务器中启用了会话。
2.  所有文档都有 session_start(); 在页面顶部。
3.  当我做 header(); 我设置了 die(); 以下。
4.  语法正确。没有错误。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:44:50.177

我认为，由于您在将文件从本地移动到服务器时的错误而出现了问题。如果会话在服务器中不起作用，我们可以说它的服务器问题。但是你说会话正在工作。所以请检查你的编码。如果它在本地主机上工作，那么它也应该在服务器上工作。

**试试这个：** 在新服务器上，PHP 会话不工作。这个服务器之前安装了一个cpanel，我已经卸载了它，没有卸载cpanel的正确方法，所以我只是删除了所有相关的cron作业和cpanel文件夹。

为了解决 PHP 会话问题，我检查了设置为 /tmp 的 session.save_path，在检查时我发现它是只读的。

这可能是由于卸载期间禁用了 cpanel 的 securetmp 服务。我将路径设置为

```
session.save_path = “/var/tmp” 
```

在 php.ini 中并重新启动 apache，会话开始工作。

我在以下链接中创建了上面：http: [//blog.hostonnet.com/session-not-working-in-php](http://blog.hostonnet.com/session-not-working-in-php)

**其他可能性：** 会话未启用或未在服务器上的 php.ini 文件中正确配置。

# function - 将 Canvas 分层以制作背景

> ID：15741529
> 
> 赞同：1
> 
> 时间：2013-04-01T10:14:17.000
> 
> 标签：function, animation, canvas, jquery-animate, html5-canvas

在其他 Stack Overflow 成员的帮助下。我已经创建了我正在构建的网站的动画画布部分。

我对 Canvas 很陌生，我想做的是有一个动画弧/圆

```
function animate(elementId, endPercent) {
     var canvas = document.getElementById(elementId);
     var context = canvas.getContext('2d');
     var x = canvas.width / 2;
     var y = canvas.height / 2;
     var radius = 43.5;
     var curPerc = 0;
     var counterClockwise = false;
     var circ = Math.PI * 2;
     var quart = Math.PI / 2;

     context.lineWidth = 9;
     context.strokeStyle = '#c51414';
     context.lineCap = 'butt';

     context.shadowOffsetX = 1;
     context.shadowOffsetY = 1;
     context.shadowBlur = 1;
     context.shadowColor = "#c51414";

     function render(current) {
         context.clearRect(0, 0, canvas.width, canvas.height);
         context.beginPath();
         context.arc(x, y, radius, -(quart), ((circ) * current) - quart, false);
         context.stroke();
         curPerc++;
         if (curPerc <= endPercent) {
             requestAnimationFrame(function () {
                 render(curPerc / 100);
             });
         }
     }
     render();
 }

animate('skill1', 90);
animate('skill2', 80);
animate('skill3', 45);
animate('skill4', 92);
animate('skill5', 80);
animate('skill6', 65); 
```

这是我目前正在使用的脚本。在底部，它使用

```
 animate('skill3', 45); 
```

最后的 45 是弧行进到的百分比。这是一个小提琴，使它更容易看到。

[http://jsfiddle.net/dLAVe/](http://jsfiddle.net/dLAVe/)

我想做的仍然是使用画布，给每个弧线一个完整的背景圈。这是我想要实现的图像，（我在 Photoshop 中做了这个）

![带背景的弧线](https://i.stack.imgur.com/HrD4y.png)

我不想使用图像，并将其放在圆弧下方，我已经在画布上使用背景图像进行了尝试，但我对对齐方式非常不满，对齐背景实际上是微像素不同的到动画弧。另外我想用画布来做。

任何人都可以帮我弄清楚如何做吗？我想它会将动画弧放在一个静态圆圈的顶部。

请帮忙，因为这让我发疯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:47:37.510

好吧，这更像是一个 CSS 问题，因为分层画布只是确保它们彼此重叠。一个简单的解决方案是创建一个背景画布（调用它`#bgCanvas1`），将其添加到您旁边的标记中`#myCanvas1`，并`position: absolute`根据最近的定位祖先将它们设置为放置它们的位置，从而有效地堆叠它们。为了使一个显示在另一个与其 HTML 位置无关的上方，您可以将一个的`z-index`属性设置为比另一个更高的值。

因此，对于 CSS，应用我所说的：

```
#myCanvas1, #bgCanvas1 {
    position: absolute;
}
#bgCanvas1 {
    z-index: 1;
}
#myCanvas1 {
    z-index: 2;
} 
```

并且只是对 HTML 的简单更新：

```
<canvas id="myCanvas1" width="250" height="250"></canvas> 
<canvas id="bgCanvas1" width="250" height="250"></canvas> 
```

这是它的小提琴：http: [//jsfiddle.net/dLAVe/2/](http://jsfiddle.net/dLAVe/2/)

您可能会注意到我已经稍微更新了您的 JavaScript 函数，以允许传递圆圈的颜色来绘制。以后你可能想更多地自定义它，把它分成不同的功能，这样在背景画布上画一个静态的圆圈就更容易了。

# ios - 如何自定义矩形进度条？

> ID：15741533
> 
> 赞同：0
> 
> 时间：2013-04-01T10:14:51.027
> 
> 标签：ios, objective-c, progress-bar, uiprogressview, uiprogressbar

我想用 UIKIT 自定义一个矩形进度条，就像吸引图像一样。有没有源代码？Cocos2d 与 CCProgressTimer 有相同的，但我找不到任何 UIKIT 源代码。 ![矩形进度条](https://i.stack.imgur.com/ASsTq.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T10:27:19.357

创建一个 ShapedLayer

```
CAShapeLayer *layer = [CAShapeLayer layer];
[layer setStrokeColor:[UIColor greenColor].CGColor];
[layer setLineWidth:10.0f];

[layer setFillColor:[UIColor clearColor].CGColor]; 
```

在您想要动画的地方创建一个带有radius的矩形

```
UIBezierPath *path = [UIBezierPath bezierPathWithRoundedRect:CGRectMake(10, 10, 300, 200) cornerRadius:10.0f];
layer.path = path.CGPath;

CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"strokeEnd"];
animation.fromValue = [NSNumber numberWithFloat:0.0f];
animation.toValue = [NSNumber numberWithFloat:1.0f]; 
```

定义动画持续时间

```
animation.duration = 4.0f;
[layer addAnimation:animation forKey:@"myStroke"]; 
```

将动画添加到要显示的图层

```
[self.view.layer addSublayer:layer]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-23T06:16:45.643

**斯威夫特 5 版**

```
 func animation() {
    CATransaction.begin()

    let layer : CAShapeLayer = CAShapeLayer()
    layer.strokeColor = UIColor.white.cgColor
    layer.lineWidth = 3.0
    layer.fillColor = UIColor.clear.cgColor

    let path : UIBezierPath = UIBezierPath(roundedRect: CGRect(x: 0, y: 0, width: 84, height: 30), byRoundingCorners: .allCorners, cornerRadii: CGSize(width: 5.0, height: 0.0))
    layer.path = path.cgPath

    let animation : CABasicAnimation = CABasicAnimation(keyPath: "strokeEnd")
    animation.fromValue = 0.0
    animation.toValue = 1.0

    animation.duration = 4.0

    CATransaction.setCompletionBlock{ [weak self] in
        if self!.isAdvClick == false {
            self!.navigationController?.popViewController(animated: false)
        }
    }

    layer.add(animation, forKey: "myStroke")
    CATransaction.commit()
    self.btnSkip.layer.addSublayer(layer)
} 
```

**这是 swift 2.0 中用于 UIButton 边框动画的代码**

```
func animation(){
        CATransaction.begin()

        let layer : CAShapeLayer = CAShapeLayer()
        layer.strokeColor = UIColor.whiteColor().CGColor
        layer.lineWidth = 3.0
        layer.fillColor = UIColor.clearColor().CGColor

        let path : UIBezierPath = UIBezierPath(roundedRect: CGRect(x: 0, y: 0, width: 84, height: 30), byRoundingCorners: .AllCorners, cornerRadii: CGSize(width: 5.0, height: 0.0))
        layer.path = path.CGPath

        let animation : CABasicAnimation = CABasicAnimation(keyPath: "strokeEnd")
        animation.fromValue = 0.0
        animation.toValue = 1.0

        animation.duration = 4.0

        CATransaction.setCompletionBlock{ [weak self] in
            if self!.isAdvClick == false {
                self!.navController?.popViewControllerAnimated(false)
            }
        }

        layer.addAnimation(animation, forKey: "myStroke")
        CATransaction.commit()
        self.btnSkip.layer.addSublayer(layer)
    } 
```

**您可以在此** [链接上查看](https://appetize.io/app/65f124nng9uwpdccrq4pzmamdw)

# php - DB2 错误 字符串列、主变量、常量或函数的使用不当

> ID：15741539
> 
> 赞同：3
> 
> 时间：2013-04-01T10:15:18.650
> 
> 标签：php, sql, db2

我正在尝试在所有表和列中搜索某个值，并且我正在使用 php 连接到 IBM DB2 数据库。我想知道该错误是否是由于多次使用联合引起的。

这是我的错误信息：

```
Improper use of a string column, host variable, constant, or function "NAMABARANG". SQLSTATE=42907 SQLCODE=-134 
```

这是我的代码：

```
$keyword=$_GET['keyword'];
$query="SELECT * FROM INVENTORY WHERE NAMABARANG LIKE '%".$keyword."%'".
    " UNION ALL SELECT * FROM INVENTORY WHERE ARRIVALDATE LIKE '%".$keyword."%'".
     " UNION ALL SELECT * FROM INVENTORY WHERE PAPERNUMBER LIKE '%".$keyword."%'".
     " UNION ALL SELECT * FROM INVENTORY WHERE SERIALNUMBER LIKE '%".$keyword."%'".
     " UNION SELECT * FROM INVENTORY WHERE CONDITION LIKE '%".$keyword."%'".
     " UNION ALL SELECT * FROM INVENTORY WHERE LOCATION LIKE '%".$keyword."%'".
     " UNION ALL SELECT * FROM INVENTORY WHERE CONFIRMATIONDATE LIKE '%".$keyword."%'".
     " UNION ALL SELECT * FROM INVENTORY WHERE BARCODE LIKE '%".$keyword."%'".
     " UNION ALL SELECT * FROM USERANDPASSWORD WHERE USERNAME LIKE '%".$keyword."%'";
     " UNION ALL SELECT * FROM USERANDPASSWORD WHERE ACCESS LIKE '%".$keyword."%'"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:49:27.757

[在此处](http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/index.jsp?topic=/com.ibm.db2.luw.messages.sql.doc/doc/msql00134n.html)查看有关该错误消息的信息。问题似乎`NAMABARANG`是长字符/ clob 类型之一，在执行分组的查询中使用它是非法的。此查询执行分组，因为其中一个子查询使用`UNION`而不是`UNION ALL`. `UNION`删除重复行时进行分组。

像这样的查询可能不应该返回所有列 ( `SELECT *`)。相反，只返回你真正需要的东西。可能是一个 ID 列，可以识别匹配的每一行，以及匹配的列和表的名称。这将消除错误。

其他几点：

*   **您的代码非常不安全！**您直接从表单中获取参数并将其插入 SQL。有人可以用它来做各种邪恶的事情，甚至从你的数据库中删除表。请查看[此问题的第一个答案，](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)了解在查询中使用用户输入数据的安全方式。
*   **您正在合并来自两个不同表的行** 是否`USERANDPASSWORD`具有与 完全相同的列`INVENTORY`？否则，这个工会将无法运作。通过不选择 解决此问题`*`，而是从每个表中选择一组相似的列。
*   **联合还是联合所有？**如果多列包含搜索字符串，是否要从单行返回多个匹配项？如果是这样，请使用`UNION ALL`. 否则，用于`UNION`删除重复项。

# java - Java 服务器应用程序的 Tomcat 或 Jetty

> ID：15741541
> 
> 赞同：2
> 
> 时间：2013-04-01T10:15:20.040
> 
> 标签：java, tomcat, web-applications, architecture, jetty

假设我必须设计一个服务器来处理并发的完全独立的 HTTP 请求。该处理主要受 CPU 限制（不涉及数据库）。

请求相对较小（1-10K），延迟非常重要（越少越好）。并发请求的数量和“速率”（每秒请求数）仍然未知。

我们将用 Java 开发服务器。我们应该使用 Tomcat 还是应该使用嵌入式 HTTP 服务器（例如 Jetty）作为应用程序的一部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T10:24:15.237

任何一个都将满足您提出的要求。

Tomcat 需要安装 - 或者可以嵌入；感谢 Jayan 的更正。Jetty 可以嵌入或以独立模式运行。在此基础上进行选择。

但是，如果您正在设置一个集中式服务器，您可能会考虑使用 Netty 而非两者。NIO 可能会帮助您提高吞吐量。根据下面的 Joakim Erdfelt，Jetty 也使用 NIO。感谢您的教育和指正。不知道Tomcat有没有跟风。

# vba - 如何在 VBA 中添加 2 个不同的时间？

> ID：15741543
> 
> 赞同：0
> 
> 时间：2013-04-01T10:15:27.477
> 
> 标签：vba, excel

我需要将 GMT 时间转换为 UTC 时间，并想添加 2 个不同的时间。

这是我目前拥有的代码：

```
Dim CurDate, Correction, UTCTime As Date
CurDate = Format(DateTime.Now, "yyyy-MM-dd hh:mm:ss")
UTCTime = DateAdd("h", 4.5, CurDate) 
```

但是，它仅添加小时的整数部分，即 4 而不是 4.5

任何想法，如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:52:11.037

试试这个

```
UTCTime = DateAdd("n", 4.5 * 60, CurDate) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:52:36.803

在 Excel 中，日期的整数部分是天数，因此加 4.5 小时等于加 4.5/24

```
UTCTime = CurDate + 4.5 / 24 
```

# cassandra - cassandra 中用于 CDR 数据的数据建模

> ID：15741554
> 
> 赞同：1
> 
> 时间：2013-04-01T10:15:54.140
> 
> 标签：cassandra

我正在尝试在 cassandra 中为 CDR（呼叫详细记录）数据设计一个数据模型，以便我们可以在同一手机号码的同一行中存储并继续添加呼叫详细信息，或者为每个呼叫动态添加一组列手机号码。它还可以支持查询，例如，哪个手机号码。称为两个给定日期或给定时间之间的最大时间（例如，上午 9 点到晚上 7 点之间）？

您的建议非常值得赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:34:24.653

在设计 Cassandra 数据模型时，您需要做的第一件事就是列出所有需要满足的查询。考虑传入 CDR 数据的数量（以便您可以适当地对数据进行分片）以及每个查询可能运行的频率（以便高频查询与快速读取性能相匹配）也很重要。

由于 Cassandra 的非关系性质，以及 CQL 的有限查询能力（与传统的 RDS 相比），数据库设计很大程度上取决于您需要运行的查询。根据您的示例，您可能需要多个列族来满足这些类型的查询。

作为起点，就存储原始 CDR 而言，您可以有一个“宽行”列族，其中行键是手机号码，列名是拨打电话的时间戳。然后，对于每个进来的 CDR，您只需在与该手机号码匹配的行中添加一个新列。

```
CDR_column_family
    mobile_number <- row key
        timestamp:null <- column name:column value 
```

您需要注意的是行可能会变得多宽。如果您每天处理奇数电话，那么这可能就足够了，但如果它更像是每天数百个电话，您可能希望对数据进行分片，以免降低性能。因此，您的行键可以成为一个手机号码/月份组合（例如'07870 831137:201304'），并且每个手机号码每个月都有一行。

此 CF 将满足诸如“上午 9 点到晚上 7 点之间对 07870 831137 进行了多少次呼叫”之类的查询，但它不会告诉您“上午 9 点到晚上 7 点之间呼叫最多的号码”，而不查询 CF 中的每一行（其中，在分布式数据库，不会特别有效）。

对于像“上午 9 点到晚上 7 点之间哪个号码被呼叫最多”这样的查询，我会考虑第二个 CF，它将按时间顺序列出所有呼叫。

```
CallIndex_column_family
    month <- row key
        timestamp:mobile_number <- column name:column value 
```

因此，每次您写入 CDR CF 时，您还会向 CallIndex CF 添加一个新列，列出通话时间和拨打的号码。然后，您可以查询两个日期/时间范围之间的所有列的 CallIndex CF，并解析结果以获取调用次数最多的数字。

# php - 插入 MySql 并从 MySql 提取到屏幕时的 Php-MySql 安全方法

> ID：15741557
> 
> 赞同：0
> 
> 时间：2013-04-01T10:16:09.570
> 
> 标签：php, mysql, security, prepared-statement, parameterized

## 我在插入 MySql 时的方法

我想我在 stackoverflow.com 中读到“如果您需要转义或类似操作，请及时执行”，因此在验证页面中我验证了用户输入（空或不检查、长度检查和结构检查（例如：邮件结构，自定义标签结构）；我使用`$_POST['']`变量作为输入。在验证期间，即使在自定义错误打印部分，我的错误消息也不包含`$_POST['']`消息文本中的任何值。

作为临时说明：我使用**准备好的语句和php-MySql 交互期间的参数化查询**。如果验证输入；就在 INSERT'ing INTO MySql 之前，我**从输入中删除标签，**因为我不允许除自定义结构化标签以外的任何 html 标签。（例如`**bold text** === <strong>bold text</strong>`) 然后我将用户输入插入 MySql 数据库。

## 从 MySql 获取并将输出打印到屏幕时的我的方法

我只应用 htmlspecialchars() 命令从 MySql db 打印到屏幕

## 我的问题

我不确定自己。我的方法有什么明显或隐藏的弱点吗？提前感谢 php 大师的宝贵意见。BR

# 更新

在插入 MySql 数据库期间我不会剥离标签。原因请参考下方 ÁlvaroG.Vicario 的评论。BR。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:44:35.987

到目前为止的讨论都是关于防止 SQL 注入和持久性跨站点脚本。听起来你在正确的轨道上。

*   您使用准备好的语句是对抗 SQL 注入的“最佳实践”。
*   htmlspecialchars() 是防止 XSS 的良好开端，但您必须在适合您输出数据的位置的编码方案中转义数据。OWASP 有一个全面的页面来讨论这个问题：[XSS（跨站点脚本）预防备忘单](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet)。简短的回答：确保您使用的是“ `the escape syntax for the part of the HTML document you're putting untrusted data into.`”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:23:53.590

# 我在 trial.php 中尝试了下面的代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" lang="tr"> 
<head> 
<title>trial</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
<meta http-equiv="Content-Language" content="tr" /> 
<meta name="Description" content="trial page." /> 
<meta name="Robots" content="noindex, nofollow" />
</head>
<body>
<?php
$str1 = '<script>alert(\'inside of input with quote\')</script>';
$str2 = '<script>alert("inside of input with quote")</script>';
$str3 = "<script>alert(\"inside of input with quote\")</script>";
$str4 = '<script>alert("outside of form")</script>';
?>
<form method="post" action="">
    <fieldset>
        <legend>alert attempts inside form inputs</legend>
        <label for="input1">label 1:</label><br />
        <input type="text" value="<?php echo htmlspecialchars($str1) ; ?>" name="input1" id="input1" /><br /><br />

        <legend>attempt 2</legend>
        <label for="input2">label 2:</label><br />
        <input type="text" value="<?php echo htmlspecialchars($str2) ; ?>" name="input2" id="input2" /><br /><br />

        <label for="input3">Label 3:</label><br />
        <input type="text" value="<?php echo htmlspecialchars($str3) ; ?>" name="input3" id="input3" />
    </fieldset>
</form>    
<?php echo htmlspecialchars($str4) ; ?>
</body>
</html> 
```

# trial.php 的结果

1.  用户关心的内容没有中断，因此用户数据没有损坏
2.  我确切地看到了用户关心在屏幕上输入的内容
3.  脚本警报不起作用

# 插入 MySQL 并从 MySQL 获取并将输出打印到屏幕时产生的过程

1.  在 php-MySQL 交互期间利用准备好的语句和参数查询。在 INSERT'ing INTO MySQl db 时，这种方法已经防止了 SQL 注入，因此无需额外的转义。额外的努力`strip_tags()`会破坏用户真正关心的打字，就像`htmlspecialchars()`OR`htmlentities()`也会做的那样。
2.  在从 MySQL 数据库中获取数据的同时也利用准备好的语句和参数查询
3.  在将用户输入的数据打印到屏幕上时，使用 `htmlspecialchars()`这样用户完全关心的输入不会中断，并且可能的恶意特殊字符将被转换为相应的 HTML 实体

# javascript - 使用标记的谷歌地图 setCenter 无法正常工作，因为它在左上角而不是中心显示市场

> ID：15741562
> 
> 赞同：0
> 
> 时间：2013-04-01T10:16:17.873
> 
> 标签：javascript, google-maps

使用标记的谷歌地图 setCenter 无法正常工作，因为它在左上角而不是中心显示市场。以下是我使用的代码：

```
<body id="ViewMapScreen">
<div id="map" style="width: 600px; height: 349px;"></div>

   <script type="text/javascript"> 

   var address = 'Pune, Maharastra, India';

   var map = new google.maps.Map(document.getElementById('map'), { 
       mapTypeId: google.maps.MapTypeId.ROADMAP,
       zoom: 8
   });   

   var geocoder = new google.maps.Geocoder();
   geocoder.geocode({
      'address': address
   },
   function(results, status) {
      if(status == google.maps.GeocoderStatus.OK) {
         new google.maps.Marker({
            position: results[0].geometry.location,
            map: map
         });
         map.setCenter(results[0].geometry.location);
      }
   });   

   </script> 
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:29:30.010

更改 div 的宽度和高度，然后它会正常工作。

```
<div id="map" style="width: 1270px; height: 850px;"></div> 
```

# python - 使用 python 脚本从 csv 文件中删除重复的行

> ID：15741564
> 
> 赞同：36
> 
> 时间：2013-04-01T10:16:20.417
> 
> 标签：python, file-io

**目标**

我从 hotmail 下载了一个 CSV 文件，但里面有很多重复项。这些副本是完整的副本，我不知道为什么我的手机会创建它们。

我想摆脱重复。

**方法**

编写一个 python 脚本来删除重复项。

**技术规格**

```
视窗 XP SP 3
蟒蛇 2.7
包含 400 个联系人的 CSV 文件

```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-04-01T10:20:59.780

**更新：2016**

如果您乐于使用有用的[`more_itertools`](https://pythonhosted.org/more-itertools/api.html#more_itertools.unique_everseen)外部库：

```
from more_itertools import unique_everseen
with open('1.csv','r') as f, open('2.csv','w') as out_file:
    out_file.writelines(unique_everseen(f)) 
```

* * *

@IcyFlame 解决方案的更高效版本

```
with open('1.csv','r') as in_file, open('2.csv','w') as out_file:
    seen = set() # set for fast O(1) amortized lookup
    for line in in_file:
        if line in seen: continue # skip duplicate

        seen.add(line)
        out_file.write(line) 
```

要就地编辑同一个文件，您可以使用它

```
import fileinput
seen = set() # set for fast O(1) amortized lookup
for line in fileinput.FileInput('1.csv', inplace=1):
    if line in seen: continue # skip duplicate

    seen.add(line)
    print line, # standard output is now redirected to the file 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2017-02-02T19:27:14.990

您可以使用 Pandas 有效地实现去重，安装 pandas 使用

```
pip install pandas 
```

编码

```
import pandas as pd
file_name = "my_file_with_dupes.csv"
file_name_output = "my_file_without_dupes.csv"

df = pd.read_csv(file_name, sep="\t or ,")

# Notes:
# - the `subset=None` means that every column is used 
#    to determine if two rows are different; to change that specify
#    the columns as an array
# - the `inplace=True` means that the data structure is changed and
#   the duplicate rows are gone  
df.drop_duplicates(subset=None, inplace=True)

# Write the results to a different file
df.to_csv(file_name_output, index=False) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-01T10:16:20.417

您可以使用以下脚本：

**前提：**

1.  `1.csv`是包含重复项的文件
2.  `2.csv`是执行此脚本后将没有重复项的输出文件。

**代码**

```
 inFile = open('1.csv','r')

outFile = open('2.csv','w')

listLines = []

for line in inFile:

    if line in listLines:
        continue

    else:
        outFile.write(line)
        listLines.append(line)

outFile.close()

inFile.close() 
```

 `**算法说明**

在这里，我正在做的是：

1.  以读取模式打开文件。这是具有重复项的文件。
2.  然后在一个一直运行到文件结束的循环中，我们检查该行是否已经遇到。
3.  如果遇到它，我们不会将其写入输出文件。
4.  如果不是，我们会将其写入输出文件并将其添加到已经遇到的记录列表中

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-06T13:07:17.467

我知道这早已解决，但我遇到了一个密切相关的问题，即我要根据一列删除重复项。输入的 csv 文件非常大，可以通过 MS Excel/Libre Office Calc/Google Sheets 在我的电脑上打开；**147MB 约 250 万条记录**。由于我不想为这么简单的事情安装整个外部库，所以我编写了下面的 python 脚本在不到 5 分钟的时间内完成了这项工作。我没有专注于优化，但我相信它可以被优化以更快、更高效地运行更大的文件。该算法类似于上面的@IcyFlame，除了我基于列（'CCC'）而不是整行/行来删除重复项。

```
import csv

with open('results.csv', 'r') as infile, open('unique_ccc.csv', 'a') as outfile:
    # this list will hold unique ccc numbers,
    ccc_numbers = []
    # read input file into a dictionary, there were some null bytes in the infile
    results = csv.DictReader(infile)
    writer = csv.writer(outfile)

    # write column headers to output file
    writer.writerow(
        ['ID', 'CCC', 'MFLCode', 'DateCollected', 'DateTested', 'Result', 'Justification']
    )
    for result in results:
        ccc_number = result.get('CCC')
        # if value already exists in the list, skip writing it whole row to output file
        if ccc_number in ccc_numbers:
            continue
        writer.writerow([
            result.get('ID'),
            ccc_number,
            result.get('MFLCode'),
            result.get('datecollected'),
            result.get('DateTested'),
            result.get('Result'),
            result.get('Justification')
        ])

        # add the value to the list to so as to be skipped subsequently
        ccc_numbers.append(ccc_number) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-04T18:17:30.477

@jamylak 解决方案的更有效版本：（少了一条指令）

```
with open('1.csv','r') as in_file, open('2.csv','w') as out_file:
    seen = set() # set for fast O(1) amortized lookup
    for line in in_file:
        if line not in seen: 
            seen.add(line)
            out_file.write(line) 
```

要就地编辑同一个文件，您可以使用它

```
import fileinput
seen = set() # set for fast O(1) amortized lookup
for line in fileinput.FileInput('1.csv', inplace=1):
    if line not in seen:
        seen.add(line)
        print line, # standard output is now redirected to the file 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-10-20T09:28:01.737

您可以在 jupyter notebook 或相关 IDE 中使用 pandas 库，我将 pandas 导入 jupyter notebook 并读取 csv 文件

然后根据存在重复的参数对值进行排序，因为我首先定义了两个属性，它将按时间排序，然后按纬度

然后根据您删除时间列或相关列中存在的重复项

然后我将删除的重复文件存储为 gps_sorted

```
import pandas as pd
stock=pd.read_csv("C:/Users/Donuts/GPS Trajectory/go_track_trackspoints.csv")
stock2=stock.sort_values(["time","latitude"],ascending=True)
stock2.drop_duplicates(subset=['time'])
stock2.to_csv("C:/Users/Donuts/gps_sorted.csv",) 
```

希望这可以帮助`

# ios - NSMutableAttributedString 带有动画的删除线

> ID：15741567
> 
> 赞同：3
> 
> 时间：2013-04-01T10:16:26.137
> 
> 标签：ios, objective-c

```
- (void)setStrokeLabel:(BOOL)strokeLabel
{
    _strokeLabel = strokeLabel;

    if (_strokeLabel) {
        _timer = [NSTimer scheduledTimerWithTimeInterval:0.4 target:self selector:@selector(setStrokeThrough) userInfo:nil repeats:NO];
    } else {
        [self cancelStrokeThrough];
    }
}

- (void)setStrokeThrough
{
    NSMutableAttributedString *attributedString = [[NSMutableAttributedString alloc] initWithAttributedString:self.attributedText];

    for (NSUInteger i = 1; i <= [attributedString length]; i++) {
        [attributedString addAttribute:NSStrikethroughStyleAttributeName
                                 value:[NSNumber numberWithInt:1]
                                 range:NSMakeRange(0, i)];
        self.attributedText = attributedString;
    }
}

- (void)cancelStrokeThrough
{
    NSMutableAttributedString *attributedString = [[NSMutableAttributedString alloc] initWithAttributedString:self.attributedText];
    [attributedString removeAttribute:NSStrikethroughStyleAttributeName
                                range:NSMakeRange(0, [attributedString length])];
    self.attributedText = attributedString;

} 
```

我想制作动画`strike-through`，比如 todo done 动画。当我为它设置定时器时，定时器只处理如何逐个字母地显示笔触？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T07:10:34.460

**这是完成这项工作的两个函数。**

```
 BOOL setStrokethrough(UILabel *label, NSRange range)
    {
        if (range.location >= [label.attributedText length])
            return FALSE;

        if (range.location + range.length > [label.attributedText length])
            range.length = [label.attributedText length] - range.location;

        NSMutableAttributedString *attributedString = [[NSMutableAttributedString alloc] initWithAttributedString:label.attributedText];

        [attributedString addAttribute:NSStrikethroughStyleAttributeName
                                 value:@(NSUnderlineStyleSingle)
                                 range:range];

        label.attributedText = attributedString;
        return TRUE;
    }

    -(void)animateSetStrokethroughDuration:(float)duration
    {
        __block float const stepDuration = 0.1;
        float steps = duration / stepDuration;
        __block NSRange range = NSMakeRange(0, ceil((float)[self.label.attributedText length] / steps));

        void (^__block fn)();
        void (^__block __weak weakfn)();

        weakfn = fn = ^(){
            if (!setStrokethrough(self.label, range))
                return;
            range = NSMakeRange(range.location + range.length, range.length);
            [self performBlock:weakfn afterDelay:stepDuration];
        };
        fn();
    } 
```

**笔记**

1.  为了限制动画时间，我按角色块制作动画，而不是按角色制作动画。字符串越长，字符块就越长。
2.  __block __weak business 在[这里解释](https://stackoverflow.com/questions/15638751/how-to-fix-capturing-block-strongly-in-this-block-is-likely-to-lead-to-a-reta)
3.  self performBlock 是[Mike Ash](http://www.mikeash.com/pyblog/friday-qa-2009-08-14-practical-blocks.html)对 NSObject 的扩展，也在[这里](https://stackoverflow.com/questions/4007023/blocks-instead-of-performselectorwithobjectafterdelay)
4.  该代码假设您定义了 self.label 成员

# javascript - 使用 javascript 对页面进行后处理

> ID：15741568
> 
> 赞同：0
> 
> 时间：2013-04-01T10:16:31.537
> 
> 标签：javascript, google-chrome-extension, firefox-addon

这样的事情可能吗？

```
<script type="text/javascript">
    $(document).ready(function () {
        window.location = "http://example.com";
        setTimeout("", 10000);
        $("#some_div_element").empty();
    })
</script> 
```

我正在尝试设置一个重定向到另一个 URL 并在重定向页面上进行一些后期处理的页面。我知道有一些 Chrome/FireFox 扩展在页面加载后运行 javascript。我想知道我是否可以使用我的网络服务器获得相同的结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:19:29.233

您是否考虑过通过 get 将一些参数传递到目标页面，然后在该页面上根据该参数执行一些操作？

# asp.net - 没有调用editURL - JQGrid

> ID：15741578
> 
> 赞同：0
> 
> 时间：2013-04-01T10:17:20.943
> 
> 标签：asp.net, vb.net, jqgrid

我有一个可编辑的 jqGrid，带有事件的内联编辑，但没有调用 EditURL。

编辑数据是 vb.net 中的一种网络方法。当我单击一行时，该行变为可编辑并且我可以进行更改，但是当我点击输入时，EditURL 没有被调用。请提出任何必要的更改。

```
<ScriptMethod(ResponseFormat:=ResponseFormat.Json)> _
<WebMethod()> _
Public Shared Function LoadData() As jqGridResult

    'If MuList.SelectedValue <> "0" AndAlso MuList.SelectedValue <> String.Empty Then
    '    hirNodeMu = hirNodeMu.Parse(MuList.SelectedValue)
    'Else
    '    hirNodeMu = 0
    'End If

    'Dim hirNode As Integer = hirNodeMu
    'If hirNode = 0 Then
    '    hirNode = hirNodeCurrent
    'End If

    Dim sidx As String = ""
    Dim sord As String = "asc"
    Dim page As Integer = 1
    Dim rows As Integer = 1000

    Dim entryFieldsOnly As Integer = 1

    Dim hirNode As Integer = 5
    Dim fiscalYear As Integer = 2012
    Dim fiscalPeriod As Integer = 3

    Dim dtWORData As DataTable = New DataTable()

    Dim ConnectString As String = ConfigurationSettings.AppSettings("DbConnection")

    Using sqlConnection As New SqlConnection(ConnectString)

        Dim Conn As SqlConnection = New SqlConnection(ConnectString)
        Dim Cmd As SqlCommand = New SqlCommand("finWorFactView", Conn)
        Cmd.CommandType = CommandType.StoredProcedure
        Cmd.Parameters.Add("@hirNodeBase", SqlDbType.Int, 4).Value = hirNode
        Cmd.Parameters.Add("@FiscalYear", SqlDbType.Int, 4).Value = fiscalYear
        Cmd.Parameters.Add("@FiscalPeriod", SqlDbType.Int, 4).Value = fiscalPeriod
        Cmd.Parameters.Add("@EntryFieldsOnly", SqlDbType.Int, 4).Value = entryFieldsOnly
        Conn.Open()

        Dim DA As SqlDataAdapter = New SqlDataAdapter(Cmd)

        DA.Fill(dtWORData)

    End Using

    Dim pageIndex As Integer = page
    Dim pageSize As Integer = rows
    Dim startRow As Integer = (pageIndex * pageSize) + 1
    Dim totalRecords As Integer = dtWORData.Rows.Count()
    Dim totalPages As Integer = CInt(Math.Ceiling(CSng(totalRecords) / CSng(pageSize)))

    Dim row As List(Of jqGridRows) = New List(Of jqGridRows)

    For i As Integer = 0 To dtWORData.Rows.Count - 1

        Dim newRow As jqGridRows = New jqGridRows

        newRow.id = Convert.ToInt32(dtWORData.Rows(i)("DisplayOrder"))

        newRow.cell(0) = dtWORData.Rows(i)("DisplayOrder").ToString()
        newRow.cell(1) = dtWORData.Rows(i)("ColumnPosition").ToString()
        newRow.cell(2) = dtWORData.Rows(i)("ColumnName").ToString()
        newRow.cell(3) = dtWORData.Rows(i)("Week1").ToString()
        newRow.cell(4) = dtWORData.Rows(i)("Week2").ToString()
        newRow.cell(5) = dtWORData.Rows(i)("Week3").ToString()
        newRow.cell(6) = dtWORData.Rows(i)("Week4").ToString()
        newRow.cell(7) = dtWORData.Rows(i)("Week5").ToString()
        newRow.cell(8) = dtWORData.Rows(i)("DbFieldName").ToString()
        newRow.cell(9) = dtWORData.Rows(i)("Updateable").ToString()
        newRow.cell(10) = dtWORData.Rows(i)("PayrollActive").ToString()
        newRow.cell(11) = dtWORData.Rows(i)("PurchasingActive").ToString()
        newRow.cell(12) = dtWORData.Rows(i)("hirNode").ToString()
        newRow.cell(13) = dtWORData.Rows(i)("finWor1").ToString()
        newRow.cell(14) = dtWORData.Rows(i)("finWor2").ToString()
        newRow.cell(15) = dtWORData.Rows(i)("finWor3").ToString()
        newRow.cell(16) = dtWORData.Rows(i)("finWor4").ToString()
        newRow.cell(17) = dtWORData.Rows(i)("finWor5").ToString()
        newRow.cell(18) = dtWORData.Rows(i)("finWorP").ToString()
        newRow.cell(19) = dtWORData.Rows(i)("Total").ToString()
        newRow.cell(20) = dtWORData.Rows(i)("Projection").ToString()
        newRow.cell(21) = dtWORData.Rows(i)("HealthCareActive").ToString()

        row.Add(newRow)
    Next

    Dim result As jqGridResult = New jqGridResult

    result.total = totalPages
    result.page = page
    result.records = totalRecords
    result.rows = row

    Return result

End Function

<ScriptMethod(ResponseFormat:=ResponseFormat.Json)> _
<WebMethod()> _
Public Shared Function EditData(ByVal Week1 As String, ByVal Week2 As String, ByVal Week3 As String, ByVal Week4 As String, _
                                ByVal Week5 As String, ByVal Projection As String, _
                                ByVal DbFieldName As String, ByVal hirNode As String, _
                                ByVal FinWor1 As String, ByVal FinWor2 As String, ByVal FinWor3 As String, ByVal FinWor4 As String, _
                                ByVal FinWor5 As String, ByVal FinWorP As String, ByVal HealthCareActive As String, _
                                ByVal oper As String, ByVal id As String) As Boolean

    Dim objClass As New _Default
    objClass.LogError(Week1 + " " + Week2 + " " + Week3 + " " + Week4 + " " + Week5 + " " + Projection)

    Return True

End Function 
```

这是来自萤火虫 - 请求正文 Week1=+767%2C077+&Week2=+727%2C055+&Week3=+719%2C411+&Week4=+738%2C102+&Week5=+290%2C921+&Projection=False&DbFieldName=False&hirNode=&FinWor1 =&FinWor2=&FinWor3=&FinWor4=&FinWor5=+3%2C242%2C566+&FinWorP=+2%2C869%2C267+&HealthCareActive=假&oper=edit&id=14

JS代码

```
jQuery(document).ready(function($) {

var lastsel;

$(document).ready(function() {

    loadGrid();
});

function loadGrid() {
    jQuery("#tblWOR").jqGrid({
        url: 'Default.aspx/LoadData',
        mtype: 'POST',
        datatype: 'json',
        ajaxGridOptions: { contentType: 'application/json; charset=utf-8' },
        serializeGridData: function(postData) {
            return JSON.stringify(postData);
        },
        rowNum: 1000,
        width: 1200,
        height: 'auto',
        colNames: ['Display Order', 'Column P', 'Column N', 'Week1(1-7)', 'Week2(8-14)', 'Week2(15-21)', 'Week1(22-28)', 'Week1(29-31)',
                    'Total Month' + '</br>' + 'to Date', 'Projection' + '</br>' + 'for Month',
                    'DbFieldName', 'Updateable', 'PayrollActive', 'PurchasingActive', 'hirNode',
                    'WOR1', 'WOR2', 'WOR3', 'WOR4', 'WOR5', 'WORP', 'HealthCareActive',
                ],
        colModel: [
                { name: 'DisplayOrder', index: 'DisplayOrder', hidden: true },
                { name: 'ColumnPosition', index: 'Week1', width: 55 },
                { name: 'ColumnName', index: 'Week1', width: 80 },
                { name: 'Week1', index: 'Week1', width: 55, editable: true, edittype: 'text' },
                { name: 'Week2', index: 'Week2', width: 55, editable: false, edittype: 'text' },
                { name: 'Week3', index: 'Week3', width: 55, editable: false, edittype: 'text' },
                { name: 'Week4', index: 'Week4', width: 55, editable: false, edittype: 'text' },
                { name: 'Week5', index: 'Week5', width: 55, editable: false, edittype: 'text' },
                { name: 'Total', index: 'Total', width: 55 },
                { name: 'Projection', index: 'Projection', width: 55, editable: false, edittype: 'text' },
                { name: 'DbFieldName', index: 'DbFieldName', editable: false, hidden: true },
                { name: 'Updateable', index: 'Updateable', editable: false, hidden: true },
                { name: 'PayrollActive', index: 'PayrollActive', editable: false, hidden: true },
                { name: 'PurchasingActive', index: 'PurchasingActive', editable: false, hidden: true },
                { name: 'hirNode', index: 'hirNode', editable: false, hidden: true },
                { name: 'FinWor1', index: 'FinWor1', editable: false, hidden: true },
                { name: 'FinWor2', index: 'FinWor2', editable: false, hidden: true },
                { name: 'FinWor3', index: 'FinWor3', editable: false, hidden: true },
                { name: 'FinWor4', index: 'FinWor4', editable: false, hidden: true },
                { name: 'FinWor5', index: 'FinWor5', editable: false, hidden: true },
                { name: 'FinWorP', index: 'FinWorP', editable: false, hidden: true },
                { name: 'HealthCareActive', index: 'HealthCareActive', editable: false, hidden: true }
                ],
        pager: '#divWOR',
        jsonReader: {
            root: "d.rows",
            page: "d.page",
            total: "d.total",
            records: "d.records",
            repeatitems: false
        },
        sortname: 'DisplayOrder',
        viewrecords: true,
        sortorder: "asc",
        onSelectRow: function(DisplayOrder) {
            if (DisplayOrder && DisplayOrder !== lastsel) {
                jQuery('#tblWOR').jqGrid('restoreRow', lastsel);
                jQuery('#tblWOR').jqGrid('editRow', DisplayOrder, true);
                lastsel = DisplayOrder;
            }
        },
        cellsubmit: 'remote',
        editurl: "Default.aspx/EditData",
        caption: "WOR View Grid"           
    });
    jQuery("#tblWOR").jqGrid('navGrid', "#divWOR", { edit: false, add: false, del: false });
} 
```

});

我能够调试我的代码。数据正在由 web 方法返回，但未显示在网格中。

这是我得到的数据..（由于数据很大，我只显示一行）

```
{"d":{"__type":"LearnEveryday._Default+jqGridResult","total":1,"page":1,"records":25,"rows":[{"id":3,"cell ":["3","2","JWO 收入","921,300","899,595","912,983","941,659","805,100","RevenueJwo","False","False","False ","0","","","","","",""," 4,480,637 "," 5,378,594 ","False",null]}}

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:16:42.480

您需要以与添加`serializeRowData`相同的方式添加回调`serializeGridData`。以同样的方式，您需要添加`ajaxRowOptions`看起来像`ajaxGridOptions`. 选项定义`$.ajax`在编辑行期间执行的选项：

```
ajaxGridOptions: { contentType: 'application/json; charset=utf-8' },
ajaxRowOptions: { contentType: 'application/json; charset=utf-8' },
serializeGridData: function (postData) {
    return JSON.stringify(postData);
},
serializeRowData: function (postData) {
    return JSON.stringify(postData);
} 
```

您应该删除`$(document).ready(function()`在`$(document).ready`. 我的意思是代码

```
jQuery(document).ready(function($) {

    var lastsel;

    $(document).ready(function() {
        loadGrid();
    });

    function loadGrid() {
        jQuery("#tblWOR").jqGrid({
            ...
        });
        jQuery("#tblWOR").jqGrid('navGrid', "#divWOR", { edit: false, add: false, del: false });
    }
}); 
```

应更换为

```
jQuery(document).ready(function($) {
    var lastsel;
    $("#tblWOR").jqGrid({
        ...
    }).jqGrid('navGrid', "#divWOR", { edit: false, add: false, del: false });
}); 
```

我另外删除`loadGrid`了函数，因为该函数*创建*了网格。该函数只能调用*一次*。如果函数只能被调用一次，那么在函数中定义一些代码是什么意思？

# winapi - 处理 wm_nclbuttondown 时如何正确设置焦点？

> ID：15741580
> 
> 赞同：0
> 
> 时间：2013-04-01T10:17:31.507
> 
> 标签：winapi, user-interface

我想创建一个在 wm_nclbuttondown 处理程序中失去焦点时将关闭的窗口，就像 Firefox 的菜单按钮窗口所做的那样。但我没能做到。新窗口在创建后会立即失去焦点。

所以我用 spy++ 挖掘，发现 WM_NCLBUTTONDOWN 总是会导致主窗口集中，这是用 spy++ 记录的消息：

![在此处输入图像描述](https://i.stack.imgur.com/Q6kYr.png)

其中0xb13f2是主窗口的hwnd，0x46139a是新窗口的hwnd。

那么如何正确设置焦点呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:21:15.867

我尝试了很多方法：

1.  将 wm_nclbuttdown 预翻译为 wm_lbuttondown。
2.  nchittest 将所有窗口区域设置为 HTCLIENT，然后尝试手动处理移动和调整大小，但此修改太大而无法继续。
3.  在 wm_nclbuttondown 处理程序中，发送消息 wm_lbuttondown。
4.  调用 setfocus 很多。

...

有些工作，但带来其他问题。最后我用spy++记录了firefox的消息，发现只要在需要处理left button down消息的区域让nchittest返回HTCLIENT。

# javascript - java脚本我想添加两个变量x = y

> ID：15741584
> 
> 赞同：-4
> 
> 时间：2013-04-01T10:17:50.133
> 
> 标签：javascript

以下语法的含义是什么

```
var demoP=document.getElementById("demo");
demoP.innerHTML="x=" + x; 
```

还有这个呢`"x=" + x;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:36:59.310

`getElementById()`方法访问具有指定 id 的第一个元素。

因此，`document.getElementById("demo")`使用 id **demo**访问元素。

设置元素的`innerHTML` 内部 HTML。它用于动态修改文档的 HTML。

例如：

```
<head>
 <script type="text/javascript">
        function myFunction() {
            var x = 100;
            var demoP = document.getElementById("demo")
            demoP.innerHTML = "x=" + x;
        }
    </script>
</head>

<body>
<div id="demo"/>
<p>
    <a href="#" OnClick="myFunction()"> Click to call function</a>
</p>
</body>
</html> 
```

在上面的代码中，当点击链接触发事件时，会调用 js 方法`myFunction()`。在该方法中，demoP 包含 id 为**demo**的元素。

demoP.innerHTML 修改 demo id 并添加**demo div**`x=100`。即 demo div 更改为**`<div id="demo">x=100</div>`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T10:21:31.673

'x='+x 连接 'X=' 和变量 x 的值。

IE; 如果 x=5，则 id 为 'demo' 的 html 元素现在将具有内容 'x=5'

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T10:24:04.220

它只是在 DOM 上选择一个元素

```
var demoP=document.getElementById("demo") 
```

然后它用一个字符串替换它的内容

```
demoP.innerHTML="x=" + x; 
```

假设 x 变量的值为 42，则元素（可能是 div？）将包含文本

```
x=42 
```

`"x="+x`只是连接两个字符串：“x=”和x。如果 x 内容不是字符串，它将在连接之前被强制转换（转换）为字符串（尽管变量将包含原始值）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T10:21:45.347

这将`demo`通过连接字符串来设置的内容，其中`"x="`是静态部分，x 是变量的值。

假设你有以下

```
var x = 10;
var demoP=document.getElementById("demo");
demoP.innerHTML="x=" + x; 
```

比`demo`内容`x=10`**

# php - 通过调用 GET、SlimPHP、RedBeanPHP 的 POST 请求方法

> ID：15741587
> 
> 赞同：0
> 
> 时间：2013-04-01T10:18:01.527
> 
> 标签：php, http, rest, slim

我正在使用的工具：Slim Framework 和 RedBeanPHP

我正在研究这篇文章：[http](http://www.ibm.com/developerworks/library/x-slim-rest/) ://www.ibm.com/developerworks/library/x-slim-rest/ ，尤其是这种方法：

```
// handle POST requests to /articles
$app->post('/articles', function () use ($app) 
{    
try 
{   // get and decode JSON request body
        $request = $app->request();
        $body = $request->getBody();
        $input = json_decode($body); 

        // store article record
        $article = R::dispense('articles');
        $article->title = (string)$input->title;
        $article->url = (string)$input->url;
        $article->date = (string)$input->date;
        $id = R::store($article);    

        // return JSON-encoded response body
        $app->response()->header('Content-Type', 'application/json');
        echo json_encode(R::exportAll($article));

} catch (Exception $e) {
        $app->response()->status(400);
        $app->response()->header('X-Status-Reason', $e->getMessage());
}
}); 
```

我运行应用程序或刷新/输入您喜欢的任何内容，但在我的控制台中没有看到文章中的任何 POST 报告？

我期待看到：[http ://www.ibm.com/developerworks/library/x-slim-rest/#f5](http://www.ibm.com/developerworks/library/x-slim-rest/#f5)

在我的控制台中。

相反，我得到：[http ://acookson.org/?attachment_id=1221](http://acookson.org/?attachment_id=1221)

这是一个GET请求方法吧？那么作者是如何在不使用 HTML 表单的情况下欺骗浏览器将其报告为 POST 请求的呢？

有了这条线，我听到你说：

```
// get and decode JSON request body
$request = $app->request();
$body = $request->getBody();
$input = json_decode($body); 
```

好吧，我正在复制这篇文章，就像不喜欢一样 - 也没有任何东西添加到数据库中。

我可以用 CURL 实现类似的东西

```
$ curl -i -X POST -H 'Content-Type: application/json' -d '{"id": "3", "title": "Programming with C++", "url":"http:\/\/www.google.com\/programming\/C++","date":"2013-01-10"}' http://example.localhost/articles
HTTP/1.1 200 OK
Date: Mon, 01 Apr 2013 08:52:50 GMT
Server: Apache/2.2.22 (Ubuntu)
X-Powered-By: PHP/5.4.6-1ubuntu1.2
Content-Length: 116
Content-Type: application/json

POST
[{"id":3,"title":"Programming with C++","url":"http:\/\/www.google.com\/programming\/C++","date":"2013-01-10"}] 
```

将第 3 行添加到我的数据库中：

```
mysql> select * from articles\G;
*************************** 1\. row ***************************
id: 1
title: Search and integrate Google+ activity streams with PHP applications
url: http://www.ibm.com/developerworks/xml/library/x-googleplusphp/index.html
date: 2012-07-10
*************************** 2\. row ***************************
id: 2
title: Getting Started with Zend Server CE
url: http://devzone.zend.com/1389/getting-started-with-zend-server-ce/
date: 2009-03-02
*************************** 3\. row ***************************
id: 3
title: Programming with C++
url: http://www.google.com/programming/C++
date: 2013-01-10
3 rows in set (0.00 sec) 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T09:23:50.277

你问的不是很清楚。

> “这是一个 GET 请求方法，对吧？那么作者如何欺骗浏览器将其报告为 POST 请求而不使用 HTML 表单？”

是的，你是对的，作者没有提到他如何发布数据，比如使用 HTML 表单。

作者可能在他的浏览器中使用了一个 REST 客户端插件。也许是一个类似的[插件](https://addons.mozilla.org/en-US/firefox/addon/restclient/)。

> 我可以用 CURL 实现类似的东西

你当然可以。

实际上，您的问题不在上下文 slim 或 php.ini 中。

因此，您可能需要使用更正的标签更详细地阐明问题。

# scala - 期权与未来

> ID：15741589
> 
> 赞同：3
> 
> 时间：2013-04-01T10:18:14.610
> 
> 标签：scala, scala-option

我正在构建具有惊人数量抽象的 ubercool 应用程序。现在我要设计过度设计的EntityGetService。

我想要的第一件事是很多抽象类型，让我们这样说：

```
trait EntityGetService[ID, ENTITY, CONTAINER] {
  def get(id: ID): CONTAINER
} 
```

这里的 CONTAINER 是包含（或不包含）请求实体的类型。与 Option[ENTITY] 非常相似。但我想要的第二件事是，CONTAINER 也可以是 Future[ENTITY]。

所以我真的想写这样的特质：

```
trait EntityGetService[ID, ENTITY, CONTAINER <: Wrapper[ENTITY]] {
    def get(id: ID): CONTAINER
} 
```

并以下列方式指定它：

```
trait EntitySyncGetService[Long, Entity, Option[Entity]] {
    def get(id: Long): Option[Entity]
}

trait EntityAsyncGetService[Long, Entity, Future[Entity]] {
    def get(id: Long): Future[Entity]
} 
```

有没有办法在不重新扩展或混合选项和未来的情况下做到这一点？

看起来 Option 和 Future 有一些共同点（它们都是容器）。它与单子有关吗？

或者这只是我失眠的产物？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T10:31:16.183

不评论这一切的合理性，您可以使用高阶类型：

```
trait WrappedGetService[ID, ENTITY, WRAPPER[_]] {
  def get(id: ID) : WRAPPER[ENTITY]
} 
```

然后你可以声明一个`WrappedGetService[Long, Entity, Option]`.

**更新**：一些参考

该功能称为*高阶类型*（也可能是*高阶类型*）或*类型构造函数*。

*   在[语言规范](http://www.scala-lang.org/docu/files/ScalaReference.pdf)中，它应该主要出现在第 4.4 节，类型参数中，但不会有太多关于它的内容，它的工作原理与其他类型参数很相似。
*   该功能最初是在论文[Generics of a Higher kind](http://adriaanm.github.com/files/higher.pdf)中提出的，该论文可能无法完全按照语言实现，但应该非常接近。另一方面，收藏库则另辟蹊径，您可能会在[使用 Types 对抗 Bit Rot](http://drops.dagstuhl.de/opus/volltexte/2009/2338/pdf/09005.OderskyM.2338.pdf)中看到原因。
*   你可以看看[scalaz](http://code.google.com/p/scalaz/)库（不适合胆小的人）。如果你这样做，你可能也想看看 Haskell。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T11:03:54.540

您可以通过一些我称之为“手动 AOP”的方法来实现这一点。

首先定义一些基本特征来捕获将结果包装在 an `Option`、 a`Future`或任何其他容器中的概念，以及实际执行包装的 aa 方法：

```
import concurrent._

trait AbstractService {
  type Result[T]
  protected def result[T]( code: => T ) : Result[T]
} 
```

然后将这个基本特征专门用于`Future`和`Option`情况：

```
trait SyncService extends AbstractService {
  type Result[T] = Option[T]
  // Returns the original result wrapped in Some, 
  // or None if it was null or an exception occured
  protected def result[T]( code: => T ) : Option[T] = {
    try {
      Option( code )
    } catch{ case ex: Throwable =>
      ex.printStackTrace()
      None
    }
  }  
}

trait AsyncService extends AbstractService {
  type Result[T] = Future[T]
  protected val execContext: ExecutionContext
  protected def result[T]( code: => T ) : Future[T] = {
    future( code )( execContext )
  }
} 
```

现在您可以开始了，可以像这样定义您的 EntityGetService 特征：

```
trait EntityGetService[ID, ENTITY] extends AbstractService {
  def get( id: ID ): Result[ENTITY] = result {
    ???
  }

  // add all the other method implementations here, taking care to 
  // wrap the method bodies inside "result"
}

// Now specializing EntityGetService as a sync or async service is just a matter 
// of mixing SyncService or AsyncService:

class EntitySyncGetService[Long, Entity] extends EntityGetService[Long, Entity] with SyncService
class EntityAsyncGetService[Long, Entity]( implicit val execContext: ExecutionContext ) extends EntityGetService[Long, Entity] with AsyncService 
```

# java - 如何自定义spring webservice的PayloadValidatingInterceptor响应消息？

> ID：15741592
> 
> 赞同：2
> 
> 时间：2013-04-01T10:18:17.613
> 
> 标签：java, web-services, spring, xsd, spring-ws

我有一个用 jaxb 和 spring webservice 构建的 java web 服务应用程序。

我在 xsd 中有一个复杂的类型，如下所示：

```
...

<complexType name="GetRecordsRequest">
    <sequence>
        <element name="maxRecords" type="int" maxOccurs="1" minOccurs="1"/>
    </sequence>
</complexType>

... 
```

使用**xjc**，我得到了从 xsd 生成的 jaxb 类：

```
public class GetRecordsRequest {
    protected int maxRecords;

    public int getMaxRecords() {
        return maxRecords;
    }

    public void setMaxRecords(int value) {
        this.maxRecords = value;
    }
} 
```

我在 spring context.xml 中使用**了 PayloadValidatingInterceptor**来确保用户不能为 maxRecords 输入除整数以外的任何内容：

```
<bean class="org.springframework.ws.server.endpoint.mapping.PayloadRootAnnotationMethodEndpointMapping">
    <property name="interceptors">
        <list>
            <ref local="validatingInterceptor" />
        </list>
    </property>
</bean>

<bean id="validatingInterceptor" class="org.springframework.ws.soap.server.endpoint.interceptor.PayloadValidatingInterceptor">
    <property name="schema" value="/WEB-INF/schemas/webservice.xsd" />
    <property name="validateRequest" value="true" />
    <property name="validateResponse" value="true" />
</bean> 
```

当我在 Soap UI 中输入这个肥皂请求 xml 时：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://www.test.com/ns1">
   <soapenv:Header/>
   <soapenv:Body>
      <ns1:GetRecordsRequest>
         <ns1:maxRecords></ns1:maxRecords>
      </ns1:GetRecordsRequest>
   </soapenv:Body>
</soapenv:Envelope> 
```

我得到的回复信息是：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Header/>
   <SOAP-ENV:Body>
      <SOAP-ENV:Fault>
         <faultcode>SOAP-ENV:Client</faultcode>
         <faultstring xml:lang="en">Validation error</faultstring>
         <detail>
            <spring-ws:ValidationError xmlns:spring-ws="http://springframework.org/spring-ws">cvc-datatype-valid.1.2.1: '' is not a valid value for 'integer'.</spring-ws:ValidationError>
            <spring-ws:ValidationError xmlns:spring-ws="http://springframework.org/spring-ws">cvc-type.3.1.3: The value '' of element 'cis:maxRecords' is not valid.</spring-ws:ValidationError>
         </detail>
      </SOAP-ENV:Fault>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

您可以看到结果是仅针对一个字段的两行神秘消息。我可以通过只写一行来使响应消息更漂亮吗？有没有办法自定义验证错误响应消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:08:47.207

[您可以使用AbstractValidatingInterceptor](http://static.springsource.org/spring-ws/docs/1.0-m2/api/org/springframework/ws/endpoint/interceptor/AbstractValidatingInterceptor.html)（PayloadValidatingInterceptor 是这个抽象类的实现）的方法来自定义验证错误响应，即：

*   `setDetailElementName(QName detailElementName)`
*   `setFaultStringOrReason(String faultStringOrReason)`

**部分示例：**

```
public final class MyPayloadValidatingInterceptor
extends PayloadValidatingInterceptor {

    @Override
    protected Source getValidationRequestSource(WebServiceMessage webSerMessage_) {
        _source = webSerMessage_.getPayloadSource();
        validateSchema(_source);
        return _source;
    }

    private void validateSchema(Source source_) throws Exception {
        SchemaFactory _schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
        Schema _schema = _schemaFactory.newSchema(getSchemas()[0].getFile());

        Validator _validator = _schema.newValidator();
        DOMResult _result = new DOMResult();
        try {
            _validator.validate(source_, _result);
        } catch (SAXException _exception) {
            // modify your soapfault here                
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-05T04:11:18.960

您可以通过扩展 PayloadValidatingInterceptor 并覆盖 handleRequestValidationErrors 来自定义验证错误消息。我们可以在 messageContext 的正文中设置自定义错误消息。

1) 代替请求验证错误的 SOAP 错误，您可以返回带有验证错误消息的自定义 xml 响应。

2) SAXParseException[] 错误包含请求验证错误。您可以选择仅返回一个错误作为响应。(或) 对于某些预定义的错误，您可以返回自定义错误消息，而不是 SAXParseException 中返回的错误消息。

```
/**
* The Class CustomValidatingInterceptor.
*/
public class CustomValidatingInterceptor extends PayloadValidatingInterceptor{

/* (non-Javadoc)
 * @see org.springframework.ws.soap.server.endpoint.interceptor.AbstractFaultCreatingValidatingInterceptor#handleRequestValidationErrors(org.springframework.ws.context.MessageContext, org.xml.sax.SAXParseException[])
 */
@Override
protected boolean handleRequestValidationErrors(MessageContext messageContext, SAXParseException[] errors) throws TransformerException {
    JAXBContext jaxbContext;
    StringWriter stringWriter = new StringWriter();
    ResponseTransactionDetail transactionDetail = null;

    for (SAXParseException error : errors) {
        logger.debug("XML validation error on request: " + error.getMessage());
    }
    if (messageContext.getResponse() instanceof SoapMessage) {

        /**
         * Get SOAP response body in message context (SOAP Fault)
         */

        SaajSoapMessage soapMessage = (SaajSoapMessage)messageContext.getResponse();
        SoapBody body = soapMessage.getSoapBody();

        // marshal custom error response to stringWriter

        /**
        * Transform body
        */
        Source source = new StreamSource(new StringReader(stringWriter.toString()));
        identityTransform.transform(source, body.getPayloadResult());
        stringWriter.close();
    }
    return false;
} 
```

# ruby-on-rails - 如何在 Ruby on Rails 中的模型之间共享自定义 getter 和 setter 方法？

> ID：15741595
> 
> 赞同：1
> 
> 时间：2013-04-01T10:18:24.367
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我的一些模型中有这些自定义 getter 和 setter 方法：

```
def hourly_rate
  hourly_rate_in_cents.to_d / 100 if hourly_rate_in_cents
end

def hourly_rate=(number)
  self.hourly_rate_in_cents = number.to_d * 100 if number.present?
end 
```

是否可以跨模型共享这些？

如果是这样，我会将它们放在哪里以及如何将它们包含在需要它们的模型中？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:28:29.880

您可以将它们拉出到一个单独的模块中，该模块可以在模块目录中定义，例如`app/modules`

然后将它们包含在您的模型中，例如`include 'hourly_rate'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:28:09.987

最简单（不是最好，但取决于您的情况）的方法是将它们添加到您的

```
apps/controllers/application_controller.rb 
```

文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T10:31:19.120

使用一个模块。一些链接：

[混合](http://juixe.com/techknow/index.php/2006/06/15/mixins-in-ruby/)和[模块](http://www.tutorialspoint.com/ruby/ruby_modules.htm)

# jpa - 简单更新子句中的datanucleus + postgresql + jpql错误

> ID：15741600
> 
> 赞同：0
> 
> 时间：2013-04-01T10:18:39.597
> 
> 标签：jpa, datanucleus

我已经尝试修复此问题 6 小时，但我终其一生都无法弄清楚。

我在用着 ：

*   数据核 3.2.1，带有 JPA
*   x86_64-unknown-linux-gnu 上的 PostgreSQL 8.4.4，由 GCC gcc (GCC) 3.4.6 20060404 (Red Hat 3.4.6-10) 编译，64 位
*   postgres jdbc 驱动程序版本：9.1-901.jdbc4

我正在尝试通过 jpql 执行一个非常简单的更新查询。查询基本上是：

```
UPDATE MyClass x SET x.recordStatus='0' where x.token='1234' 
```

我的代码如下所示：

```
 String updateClause = "UPDATE MyClass x SET x.recordStatus='0' where x.token='1234'";
    EntityManager entityManager = getDefaultEntityManager();
    Query query = entityManager.createQuery(updateClause);
    query.executeUpdate();
    entityManager.close(); 
```

我遇到的问题是驱动程序抛出错误

```
Caused by: org.postgresql.util.PSQLException: ERROR: column "a0" of relation "my_class" does not exist
                                Position: 42
                                    at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2102)
                                    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1835) 
```

这是正常的，因为 postgres 接受以下形式的更新：

```
update some_table x set field=value where field2=another_value 
```

...但不是

```
update some_table x set x.field=value where x.field2=another_value 
```

（即执行更新时在 SET 或 WHERE 子句中没有别名）

我试过写我的 jpql 查询：

*   不在 SET 和 WHERE 子句中使用别名（更新 MyClass x set recordStatus='0' where token='1234'），但日志显示 datanucleus 将查询编译为无论如何都使用别名的本机查询。

*   根本不使用别名（甚至不使用类名），但在这种情况下，datanucleus 会抛出一个错误，我必须有一个别名。

有关依赖项的完整列表，请参阅本文末尾。

我的问题是：

*   我怎样才能克服这个问题？我究竟做错了什么 ？
*   一个重要特性的非常基本的用例在 Datanucleus 上失败了。这不是第一次发生这样的事情。例如看到这篇文章：[datanucleus + jpa + oracle。表不存在的奇怪错误](https://stackoverflow.com/questions/13764904/datanucleus-jpa-oracle-strange-error-with-tables-not-existing) 我还有其他示例。这看起来不太好，我不明白为什么，因为我真的找不到其他抱怨这类问题的帖子。这种组合（datanucleus + postgres）真的没用过吗？它几乎看起来被遗弃了。

感谢您的时间。亲切的问候，安德烈

我的依赖项列表：

```
 <dependency>
        <groupId>org.apache.geronimo.specs</groupId>
        <artifactId>geronimo-jpa_2.0_spec</artifactId>
        <version>1.0</version>
    </dependency>

    <dependency>
        <groupId>postgresql</groupId>
        <artifactId>postgresql</artifactId>
        <version>9.1-901.jdbc4</version>
    </dependency>

    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-core</artifactId>
        <version>3.2.1</version>
    </dependency>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-rdbms</artifactId>
        <version>3.2.0-release</version>
    </dependency>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-api-jpa</artifactId>
        <version>3.2.0-release</version>
    </dependency>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-connectionpool</artifactId>
        <version>2.0.3</version>
    </dependency>
    <dependency>
        <groupId>javax.jdo</groupId>
        <artifactId>jdo2-api</artifactId>
        <version>2.2</version>
    </dependency> 
```

# java - 光标离开 JMenu 时，JMenu 的弹窗不会关闭

> ID：15741602
> 
> 赞同：0
> 
> 时间：2013-04-01T10:18:45.020
> 
> 标签：java, swing, jmenu, jpopupmenu

```
JButton jButton1 = new JButton("Click Me");

public void showPopupMenu1(JButton invoker){
    JPopupMenu popupMenu = new JPopupMenu();
    popupMenu.setLayout(new GridLayout(5, 1));
    JMenu menu = new JMenu("Other");
    menu.add(new JMenuItem("A"));
    menu.add(new JMenuItem("B"));
    menu.add(new JMenuItem("C"));
    popupMenu.add(menu);
    popupMenu.add(new JButton("Apple"));
    popupMenu.add(new JButton("Banana"));
    popupMenu.add(new JButton("Carrot"));
    popupMenu.add(new JButton("Orange"));
    popupMenu.show(invoker, 0, invoker.getHeight());
}

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) 
{                                         
    showPopupMenu1(jButton1);
} 
```

当光标转到 Apple Button 时，菜单的弹出窗口不会关闭并仍标记为已选中。

# group-by - Windows azure 存储表上的聚合函数

> ID：15741604
> 
> 赞同：7
> 
> 时间：2013-04-01T10:18:58.803
> 
> 标签：group-by, aggregate-functions, azure-table-storage

我有一个 Windows Azure 存储表，其中存储了超过 1000k+ 行（实体）。我想在表上执行一些聚合函数，例如对特定条件的特定列进行计数，`average`, `total`, `min`, `max`and `group by`（如在普通 SQL 中一样）。如何在 Windows Azure 存储表中执行此操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T10:59:26.363

唯一的方法几乎是拉下所有实体并在内存中对它们运行聚合。

如果您必须使这些信息保持最新，我会将这些聚合存储在另一个地方，并在每次添加新实体时更新它们。例如，平均值是 ，`sum/count`因此您可以拥有一个存储当前总和和计数的表项，并且在添加新实体时还更新总和和计数值。

确保使用乐观并发，这样您就可以捕获任何竞争条件等。如果您的表实体共享相同的分区键，那么您甚至可以在同一个事务上执行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-30T22:27:20.523

简短的回答（据我所知，截至 2015 年 6 月）是你不能。请参阅：http: [//feedback.azure.com/forums/263030-documentdb/suggestions/6333963-add-support-for-aggregate-functions-like-count-su](http://feedback.azure.com/forums/263030-documentdb/suggestions/6333963-add-support-for-aggregate-functions-like-count-su)

**更新。** 上面链接的信息适用于 DocumentDB，而不是表存储 (doh)（DocumentDB 与 ATS 一样，也是 NoSQL 实现）。

也就是说（以及关于 OP 的问题）几乎相同的状态适用于表存储。这个建议：'[为 Select、Count 和 Contains 添加 TableStorage LINQ 查询支持](https://feedback.azure.com/forums/217298-storage/suggestions/415607-add-tablestorage-linq-query-support-for-select-co)'虽然与 OP 所追求的不同，但我想这是朝着正确的大方向迈出的一步。不幸的是，尽管他们似乎已经开始实现这些功能，但您仍然需要自己进行大量手动编码。

> **查询投影功能**
> 
> 投影是指查询一个或多个实体属性的子集。这类似于在 LINQ 中查询时选择某个表的列/属性的子集。它是一种机制，允许应用程序通过指定在响应中仅返回某些属性来减少查询返回的数据量。有关详细信息，您还可以参考 Windows Azure 表：查询实体、Windows Azure 表：编写 LINQ 查询、WCF 数据服务：查询投影和 OData：选择系统查询选项 ($select)。

感谢@abatishchev 礼貌地指出我无法阅读。

# java - liferay porlet 的操作 url 中的异常

> ID：15741606
> 
> 赞同：0
> 
> 时间：2013-04-01T10:19:03.703
> 
> 标签：java, liferay, portlet, jsr286

我写了portlet，之前它工作得很好，但现在它开始抛出异常

```
16:20:04,592 ERROR [PortletRequestDispatcherImpl:137] javax.servlet.ServletException: PWC1243: Filter execution threw an exception
javax.servlet.ServletException: PWC1243: Filter execution threw an exception
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.ApplicationDispatcher.doInvoke(ApplicationDispatcher.java:785)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:649)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:604)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:534)
    at com.liferay.portlet.PortletRequestDispatcherImpl.dispatch(PortletRequestDispatcherImpl.java:316)
    at com.liferay.portlet.PortletRequestDispatcherImpl.include(PortletRequestDispatcherImpl.java:134)
    at portlet.AnketaBVUPortlet.doView(AnketaBVUPortlet.java:1130)
    at javax.portlet.GenericPortlet.doDispatch(GenericPortlet.java:328)
    at javax.portlet.GenericPortlet.render(GenericPortlet.java:233)
    at com.liferay.portlet.FilterChainImpl.doFilter(FilterChainImpl.java:100)
    at com.liferay.portal.kernel.portlet.PortletFilterUtil.doFilter(PortletFilterUtil.java:64)
    at com.liferay.portal.kernel.servlet.PortletServlet.service(PortletServlet.java:93)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:70)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.ApplicationDispatcher.doInvoke(ApplicationDispatcher.java:785)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:649)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:604)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:534)
    at com.liferay.portlet.InvokerPortletImpl.invoke(InvokerPortletImpl.java:637)
    at com.liferay.portlet.InvokerPortletImpl.invokeRender(InvokerPortletImpl.java:722)
    at com.liferay.portlet.InvokerPortletImpl.render(InvokerPortletImpl.java:452)
    at org.apache.jsp.html.portal.render_005fportlet_jsp._jspService(render_005fportlet_jsp.java:1182)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:403)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:492)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:378)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:70)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.ApplicationDispatcher.doInvoke(ApplicationDispatcher.java:785)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:649)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:604)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:534)
    at com.liferay.portal.util.PortalImpl.renderPortlet(PortalImpl.java:4735)
    at com.liferay.portal.util.PortalUtil.renderPortlet(PortalUtil.java:1455)
    at com.liferay.portlet.layoutconfiguration.util.RuntimePortletImpl.processPortlet(RuntimePortletImpl.java:213)
    at com.liferay.portlet.layoutconfiguration.util.RuntimePortletImpl.processPortlet(RuntimePortletImpl.java:148)
    at com.liferay.portlet.layoutconfiguration.util.RuntimePortletImpl.processTemplate(RuntimePortletImpl.java:309)
    at com.liferay.portlet.layoutconfiguration.util.RuntimePortletImpl.processTemplate(RuntimePortletImpl.java:234)
    at com.liferay.portlet.layoutconfiguration.util.RuntimePortletUtil.processTemplate(RuntimePortletUtil.java:106)
    at org.apache.jsp.html.portal.layout.view.portlet_jsp._jspService(portlet_jsp.java:501)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:403)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:492)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:378)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:70)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.ApplicationDispatcher.doInvoke(ApplicationDispatcher.java:785)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:649)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:604)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:534)
    at com.liferay.portal.action.LayoutAction.includeLayoutContent(LayoutAction.java:412)
    at com.liferay.portal.action.LayoutAction.processLayout(LayoutAction.java:680)
    at com.liferay.portal.action.LayoutAction.execute(LayoutAction.java:244)
    at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:431)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:236)
    at com.liferay.portal.struts.PortalRequestProcessor.process(PortalRequestProcessor.java:174)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)
    at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:734)
    at com.liferay.portal.servlet.MainServlet.callParentService(MainServlet.java:533)
    at com.liferay.portal.servlet.MainServlet.service(MainServlet.java:510)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:113)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.secure.SecureFilter.processFilter(SecureFilter.java:201)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.autologin.AutoLoginFilter.processFilter(AutoLoginFilter.java:240)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:70)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.ApplicationDispatcher.doInvoke(ApplicationDispatcher.java:785)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:649)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:483)
    at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:454)
    at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:350)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:300)
    at com.liferay.portal.servlet.FriendlyURLServlet.service(FriendlyURLServlet.java:135)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.strip.StripFilter.processFilter(StripFilter.java:304)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.secure.SecureFilter.processFilter(SecureFilter.java:201)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.i18n.I18nFilter.processFilter(I18nFilter.java:241)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:113)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.etag.ETagFilter.processFilter(ETagFilter.java:55)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.autologin.AutoLoginFilter.processFilter(AutoLoginFilter.java:240)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.sso.ntlm.NtlmPostFilter.processFilter(NtlmPostFilter.java:83)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.sharepoint.SharepointFilter.processFilter(SharepointFilter.java:80)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.virtualhost.VirtualHostFilter.processFilter(VirtualHostFilter.java:208)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDirectCallFilter(InvokerFilterChain.java:184)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:92)
    at org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:738)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDirectCallFilter(InvokerFilterChain.java:164)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:92)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDirectCallFilter(InvokerFilterChain.java:164)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:92)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDirectCallFilter(InvokerFilterChain.java:184)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:92)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:70)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NoSuchMethodError: com.liferay.portal.kernel.portlet.LiferayPortletURL.setRemovedParameterNames(Ljava/util/Set;)V
    at com.liferay.taglib.portlet.ActionURLTag.doTag(ActionURLTag.java:161)
    at com.liferay.taglib.portlet.ActionURLTag.doEndTag(ActionURLTag.java:181)
    at org.apache.jsp.WEB_002dINF.jsp.AnketaBVUPortlet_005fview_jsp._jspx_meth_portlet_actionURL_0(AnketaBVUPortlet_005fview_jsp.java:779)
    at org.apache.jsp.WEB_002dINF.jsp.AnketaBVUPortlet_005fview_jsp._jspService(AnketaBVUPortlet_005fview_jsp.java:206)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:403) 
```

源代码是：

```
if (_jspx_th_portlet_actionURL_0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) { 
```

view.jsp 源代码

```
<%@ page import="java.util.Locale"%>
<%@ page import="java.util.ResourceBundle"%>
<%@ page session="true" %>
<%@ page contentType="text/html"%>
<%@ page pageEncoding="UTF-8"%>
<%@ page import="javax.portlet.*"%>
<%@ page import="javax.servlet.jsp.jstl.core.LoopTagStatus"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>
<%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet"%>
<%@ taglib uri="http://liferay.com/tld/ui" prefix="liferay-ui" %>

<fmt:setBundle basename = "portlet.messagesAnketa"/>

<portlet:defineObjects />
<%PortletPreferences prefs = renderRequest.getPreferences();%>
<%
    ResourceBundle bundle = ResourceBundle.getBundle("portlet.messagesAnketa", request.getLocale());
    Locale locale = renderRequest.getLocale();
%>
<c:set var="year" value="${Year}"/>
<form name="frm" action="<portlet:actionURL>
          <portlet:param name="COMMAND" value="NEXT"/>
      </portlet:actionURL>" method="post">
    ${Bank_Name}
    <table border="0" class="tableback">
        <tbody>
            <tr>
                <td><liferay-ui:message key="Year"/></td>
                <td><input type="text" name="Year" value="" maxlength="4"/></td>
            </tr>
            <tr>
                <td><liferay-ui:message key="Kvartal"/></td>
                <td><input type="text" name="Kvartal" value="" maxlength="1"/></td>
            </tr>
            <tr>
                <td><liferay-ui:message key="Executor"/></td>
                <td><input type="text" name="Executor" size="80" value=""/></td>
            </tr>
            <tr>
                <td><liferay-ui:message key="Phone"/></td>
                <td><input type="text" name="Phone" value=""/></td>
            </tr>
            <tr>
                <td><liferay-ui:message key="Appointment"/></td>
                <td><input type="text" name="Appointment" size="80" value=""/></td>
            </tr>
            <tr>
                <td><liferay-ui:message key="Email"/></td>
                <td><input type="text" name="Email" size="80" value=""/></td>
            </tr>
            <tr>
                <td><liferay-ui:message key="Ruk_Fio"/></td>
                <td><input type="text" name="Ruk_Fio" size="80" value=""/></td>
            </tr>
            <tr>
                <td><liferay-ui:message key="Ruk_Appointment"/></td>
                <td><input type="text" name="Ruk_Appointment" size="80" value=""/></td>
            </tr>
            <tr>
                <td><liferay-ui:message key="Ruk_Phone"/></td>
                <td><input type="text" name="Ruk_Phone" value=""/></td>
            </tr>
            <tr>
                <td><liferay-ui:message key="EmailRuk"/></td>
                <td><input type="text" name="EmailRuk" size="80" value=""/></td>
            </tr>
            <tr>
                <td><input type="submit" value="<liferay-ui:message key="Next"/>" onclick="return checkEnter()"/></td>
                <td></td>
            </tr>
        </tbody>
    </table>
</form>
<br>
<form name="frmUpload" action="<portlet:actionURL>
          <portlet:param name="COMMAND" value="SHOW_UPLOADS"/>
      </portlet:actionURL>" method="post">
    <table border="0" class="tableback">
        <tbody>
            <tr>
                <td><liferay-ui:message key="Year"/></td>
                <td><input type="text" name="YearUpload" value="" maxlength="4"/></td>
            </tr>
            <tr>
                <td><input type="submit" value="<liferay-ui:message key="ShowList"/>" onclick="return checkEnterUploads()"/></td>
                <td></td>
            </tr>
        </tbody>
    </table>
</form>
<br>
<table border="1" cellspacing="1" id="anketa-data-uploads">
    <tr align="center" class="portlet-section-header">
        <th><liferay-ui:message key="Delete"/></th>
        <th><liferay-ui:message key="EditTitle"/></th>
        <th><liferay-ui:message key="ViewEditAnketa"/></th>
        <th><liferay-ui:message key="BankName"/></th>
        <th><liferay-ui:message key="Year"/></th>
        <th><liferay-ui:message key="Kvartal"/></th>
        <th><liferay-ui:message key="Status"/></th>
        <th><liferay-ui:message key="StatusUTV"/></th>
        <th><liferay-ui:message key="Executor"/></th>
        <th><liferay-ui:message key="Appointment"/></th>
        <th><liferay-ui:message key="Executor_Email"/></th>
        <th><liferay-ui:message key="Phone"/></th>
        <th><liferay-ui:message key="Ruk_Fio"/></th>
        <th><liferay-ui:message key="Ruk_Appointment"/></th>
        <th><liferay-ui:message key="Ruk_Phone"/></th>
        <th><liferay-ui:message key="EmailRuk"/></th>
        <th><liferay-ui:message key="ReasonReject"/></th>
        <th><liferay-ui:message key="ReasonRejectNB"/></th>
        <th><liferay-ui:message key="UploadWord"/></th>
        </tr>
    <c:forEach var="itemUpload"
               items="${Uploads}"
               varStatus="status">
        <%
            LoopTagStatus status =
                    (LoopTagStatus) pageContext.getAttribute("status");
            String itemId = Integer.toString(status.getCount() - 1);
        %>
        <tr>
            <td align="center">
                <a href="<portlet:actionURL>
                       <portlet:param name="COMMAND" value="DELETE_FROM_TITLE"/>
                       <portlet:param name="ITEM_ID" value="<%=itemId%>"/>
                   </portlet:actionURL>" onclick="return confirm('<liferay-ui:message key="QuestionConfirmDelete"/>')"
                   ><img src="<%= renderResponse.encodeURL(renderRequest.getContextPath() + "/images/trash1.gif")%>" width="15" height="15" title="<liferay-ui:message key="Delete"/>" alt="<liferay-ui:message key="Delete"/>"/></a></td>
            <td align="center"><a href="<portlet:renderURL>
                                      <portlet:param name="DISPLAY" value="EDIT_UPLOAD_PAGE"/>
                                      <portlet:param name="ITEM_ID" value="<%=itemId%>"/>
                                  </portlet:renderURL>"
                                  ><img src="<%= renderResponse.encodeURL(renderRequest.getContextPath() + "/images/edit.gif")%>" width="15" height="15" title="<liferay-ui:message key="EditTitle"/>" alt="<liferay-ui:message key="EditTitle"/>"/></a></td>
            <td align="center"><a href="<portlet:actionURL>
                                      <portlet:param name="COMMAND" value="EDIT_ANKETA"/>
                                      <portlet:param name="ITEM_ID" value="<%=itemId%>"/>
                                  </portlet:actionURL>"
                                  ><img src="<%= renderResponse.encodeURL(renderRequest.getContextPath() + "/images/edit.gif")%>" width="15" height="15" title="<liferay-ui:message key="ViewEditAnketa"/>" alt="<liferay-ui:message key="ViewEditAnketa"/>"/></a></td>
            <td><c:out value="${itemUpload.bank_Name}"/></td>
            <td><c:out value="${itemUpload.year}"/></td>
            <td><c:out value="${itemUpload.kvartal}"/></td>
            <td><c:out value="${itemUpload.status_Name}"/></td>
            <td><c:out value="${itemUpload.status_Utv_Name}"/></td>
            <td><c:out value="${itemUpload.executor}"/></td>
            <td><c:out value="${itemUpload.appointment}"/></td>
            <td><c:out value="${itemUpload.mail_Address}"/></td>
            <td><c:out value="${itemUpload.phone}"/></td>
            <td><c:out value="${itemUpload.ruk_Fio}"/></td>
            <td><c:out value="${itemUpload.ruk_Appointment}"/></td>
            <td><c:out value="${itemUpload.ruk_Phone}"/></td>
            <td><c:out value="${itemUpload.ruk_Email}"/></td>
            <td><c:out value="${itemUpload.reason_Reject}"/></td>
            <td><c:out value="${itemUpload.reason_RejectNB}"/></td>
            <td align="center">
                <a href="<portlet:actionURL>
                       <portlet:param name="COMMAND" value="UPLOAD_WORD"/>
                       <portlet:param name="ITEM_ID" value="<%=itemId%>"/>
                   </portlet:actionURL>">
                    <img src="<%= renderResponse.encodeURL(renderRequest.getContextPath() + "/images/word.gif")%>" title="<%=bundle.getString("UploadWord")%>" alt="<%=bundle.getString("UploadWord")%>" />
                    <%=bundle.getString("UploadWord")%>
                </a>
            </td>
        </tr>
    </c:forEach>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:33:57.280

您的堆栈跟踪的相关部分似乎是

```
Caused by: java.lang.NoSuchMethodError: com.liferay.portal.kernel.portlet.LiferayPortletURL.setRemovedParameterNames(Ljava/util/Set;)V
    at com.liferay.taglib.portlet.ActionURLTag.doTag(ActionURLTag.java:161)
    at com.liferay.taglib.portlet.ActionURLTag.doEndTag(ActionURLTag.java:181)
    at org.apache.jsp.WEB_002dINF.jsp.AnketaBVUPortlet_005fview_jsp._jspx_meth_portlet_actionURL_0(AnketaBVUPortlet_005fview_jsp.java:779) 
```

看起来提交 25d348237f0ddf8f553a5a2f0787d8f93e9e4e1e 在 2012 年 3 月 5 日引入了这个方法，因此它应该安全地在 6.1.0 中 - 你最近做了升级吗？也许您忘记升级门户依赖项（属于全局类路径）或者您捆绑了来自不同版本的标记库？

此外，您可以（应该）升级到 6.1.1 并检查此问题是否可重现。毕竟 - 如果它是最新可用版本中已经修复的问题，你会在那里得到它。

最后，如果您使用 tomcat，您可能希望使用您创建的 jsps 的临时编译器输出清除工作目录。

# c++ - C++：关于字符串顺序无关的字符串序列的哈希函数的建议

> ID：15741615
> 
> 赞同：9
> 
> 时间：2013-04-01T10:19:39.680
> 
> 标签：c++, hash, map, sequence, string-hashing

假设你有这两个字符串序列

`abc cba bc`

`bc abc cba`

我正在尝试为此类序列创建一个映射（该序列也是一个字符串），以便将上述两个序列映射到同一个存储桶中。

我最初的想法是添加分别应用于每个字符串的散列函数的结果。这样他们的顺序就无关紧要了。如果我将散列函数作为一个整体应用于序列字符串，那么散列结果当然会有所不同。

但是，我对字符串散列函数的世界非常陌生，我不知道这种方法是否有效。

在这个网站[http://www.partow.net/programming/hashfunctions/index.html](http://www.partow.net/programming/hashfunctions/index.html)

我发现了许多不同的字符串散列实现，但是我不确定哪一个最适合我的需求。

关于序列中每个字符串的一些技术细节是每个字符串不超过 25 个字符。此外，每个序列不会有超过 3 个字符串。

**问题**

`1.`这种将字符串散列函数的结果添加到序列的每个字符串的方法是否有效？

`2.`如果是的话，我应该使用哪个字符串散列函数会产生少量的冲突并且还可以节省时间？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:42:26.557

只是想法演示（非常低效的字符串复制），复杂性 O(NlogN) 其中 N 是密钥的大小（=== O(1) 如果您的密钥在编译时具有已知的恒定长度），我不认为你可以做得更好的复杂性：

```
#include <boost/functional/hash.hpp>
#include <set>
#include <algorithm>

std::size_t make_hash(
  std::string const& a,
  std::string const& b,
  std::string const& c)
{
    std::string input[] = {a,b,c};
    std::sort(input, input + (sizeof(input)/sizeof(*input)));
    return boost::hash_range(input, input + (sizeof(input)/sizeof(*input)));
}

#include <iostream>
// g++ -I.../boost_1_47_0 string_set_hash.cpp
int main()
{
    std::cout << make_hash("abc", "bcd", "def") << std::endl; // 46247451276990640
    std::cout << make_hash("bcd", "def", "abc") << std::endl; // 46247451276990640
} 
```

一段 boost/functional/hash.hpp 供参考：

```
template <class T>
inline void hash_combine(std::size_t& seed, T const& v)

{
    boost::hash<T> hasher;
    seed ^= hasher(v) + 0x9e3779b9 + (seed<<6) + (seed>>2);
}

template <class It>
inline std::size_t hash_range(It first, It last)
{
    std::size_t seed = 0;

    for(; first != last; ++first)
    {
        hash_combine(seed, *first);
    }

    return seed;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:02:57.330

无论您选择哪种散列函数，您都需要一个运算符来对每个单独的散列进行最终组合，即：

*   可交换的
*   联想

总和、乘积和排他性或作为整数值的候选者。所以是的，添加会起作用。您仍然会在需要解决的不相关序列上发生冲突，因此您需要一个字符串比较函数，但同一组字符串的排列最终会出现在同一个存储桶中。

您还可以颠倒操作顺序：首先将字符串按字符添加在一起（例如，添加“ab”和“cba”变为 ('a' + 'c')('b' + 'b')('\0 ' + 'a') 对 sum 或 product 进行进位传播，因此 xor 在这里可能是一个有趣的候选者），然后应用哈希函数。您甚至可以在执行它们时结合这两个操作（伪代码如下）：

```
int hash(string a, string b, string c){
    int r = 0, k;
    int m = max(a.length(), max(b.length(), c.length()));
    for (int i = 0; i < m; i++) {
        k = ( i < a.length()? a[i] : 0) ^
              (i < b.length()? b[i] : 0) ^
              (i < c.length()? c[i] : 0);
        r = hash(r,k);
    }
    return r;
} 
```

使用`hash`增量散列函数。对足够大的素数（即大于桶数组的预期大小）进行简单的模运算对于正常用途来说应该没问题。

一个完全不同（并且更好？）的解决方案是简单地对序列进行排序（3 个条目表示准恒定时间），然后使用比较函数制作有序映射，将字符串视为 3 位数字的“数字”。但这超出了问题的范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T12:15:37.020

我会单独散列每个元素。

然后对这些哈希进行排序。排序 3`size_t`很快。

然后链接这些哈希。您的库可能具有哈希链函数，甚至可以`hash( a+b+c )`与溢出包装一起使用。

避免异或，因为异或两个相同的哈希值为零。并且相同字符串的哈希是相同的。因此，一个天真的异或可以导致`( a,a,b )`并`( c,c,b )`具有相同的哈希输出，这很糟糕。

# python - 在当前日期添加一年 PYTHON

> ID：15741618
> 
> 赞同：84
> 
> 时间：2013-04-01T10:19:56.530
> 
> 标签：python, date

我使用以下**变量**从**数据库中获取了一个****日期**

 ****```
{{ i.operation_date }} 
```

我得到了一个像

```
April 1, 2013 
```

我需要在上面加上一年，这样我才能得到

```
April 1, 2014 
```

请建议，我该怎么做？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2013-04-01T12:56:06.770

[AGSM 的回答](https://stackoverflow.com/a/15742722/68063)[`python-dateutil`](http://labix.org/python-dateutil)显示了使用该软件包解决此问题的便捷方法。但是，如果您不想安装该软件包怎么办？你可以像这样在原版 Python 中解决这个问题：

```
from datetime import date

def add_years(d, years):
    """Return a date that's `years` years after the date (or datetime)
    object `d`. Return the same calendar date (month and day) in the
    destination year, if it exists, otherwise use the following day
    (thus changing February 29 to March 1).

    """
    try:
        return d.replace(year = d.year + years)
    except ValueError:
        return d + (date(d.year + years, 1, 1) - date(d.year, 1, 1)) 
```

如果您想要另一种可能性（将 2 月 29 日更改为 2 月 28 日），那么最后一行应更改为：

```
 return d + (date(d.year + years, 3, 1) - date(d.year, 3, 1)) 
```

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2013-04-01T11:37:17.483

您可以使用[Python-dateutil](http://labix.org/python-dateutil) `relativedelta`来增加`datetime`对象，同时对闰年和月份长度等保持敏感。Python-dateutil 与 matplotlib 一起打包，如果你已经有的话。您可以执行以下操作：

```
from dateutil.relativedelta import relativedelta

new_date = old_date + relativedelta(years=1) 
```

（这个答案由@Max 给出了一个[类似的问题](https://stackoverflow.com/questions/5871168/how-can-i-subtract-or-add-100-years-to-a-datetime-field-in-the-database-in-djang)）。

但是，如果您的日期是一个字符串（即还不是一个`datetime`对象），您可以使用[datetime](http://docs.python.org/2/library/datetime.html)对其进行转换：

```
from datetime import datetime
from dateutil.relativedelta import relativedelta

your_date_string = "April 1, 2012"
format_string = "%B %d, %Y"

datetime_object = datetime.strptime(your_date_string, format_string).date()
new_date = datetime_object + relativedelta(years=1)
new_date_string = datetime.strftime(new_date, format_string).replace(' 0', ' ') 
```

`new_date_string`将包含“2013 年 4 月 1 日”。

注意：不幸的是，`datetime`仅将日期值输出为“十进制数字”-即，如果它们是个位数，则带有前导零。最后`.replace()`是处理从[@Alex Martelli](https://stackoverflow.com/a/904954/2074981)复制的此问题的解决方法（有关他和其他解决此问题的方法，请参阅[此](https://stackoverflow.com/questions/904928/python-strftime-date-without-leading-0)问题）。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-04-01T11:58:19.860

从您的问题看来，您只想简单地增加给定日期的年份，而不是担心闰年的影响。您可以使用日期类通过访问其成员年份来执行此操作。

```
from datetime import date
startDate = date(2012, 12, 21)

# reconstruct date fully
endDate = date(startDate.year + 1, startDate.month, startDate.day)
# replace year only
endDate = startDate.replace(startDate.year + 1) 
```

如果您在创建一个给定格式时遇到问题，请告诉我们。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-05-08T13:26:45.230

另一种方法是使用熊猫“DateOffset”类

链接：-https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.tseries.offsets.DateOffset.html

使用 ASGM 的代码（在答案中）：

```
from datetime import datetime
import pandas as pd

your_date_string = "April 1, 2012"
format_string = "%B %d, %Y"

datetime_object = datetime.strptime(your_date_string, format_string).date()
new_date = datetime_object + pd.DateOffset(years=1)

new_date.date() 
```

它将返回带有添加年份的日期时间对象。

像这样的东西： -

```
datetime.date(2013, 4, 1) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-01-16T20:11:02.843

当我需要添加几个月或几年并且不想导入更多库时，这就是我所做的。只需创建一个 datetime.date() 对象，调用 add_month(date) 添加一个月，调用 add_year(date) 添加一年。

```
import datetime
__author__ = 'Daniel Margarido'

# Check if the int given year is a leap year
# return true if leap year or false otherwise
def is_leap_year(year):
    if (year % 4) == 0:
        if (year % 100) == 0:
            if (year % 400) == 0:
                return True
            else:
                return False
        else:
            return True
    else:
        return False

THIRTY_DAYS_MONTHS = [4, 6, 9, 11]
THIRTYONE_DAYS_MONTHS = [1, 3, 5, 7, 8, 10, 12]

# Inputs -> month, year Booth integers
# Return the number of days of the given month
def get_month_days(month, year):
    if month in THIRTY_DAYS_MONTHS:   # April, June, September, November
        return 30
    elif month in THIRTYONE_DAYS_MONTHS:   # January, March, May, July, August, October, December
        return 31
    else:   # February
        if is_leap_year(year):
            return 29
        else:
            return 28

# Checks the month of the given date
# Selects the number of days it needs to add one month
# return the date with one month added
def add_month(date):
    current_month_days = get_month_days(date.month, date.year)
    next_month_days = get_month_days(date.month + 1, date.year)

    delta = datetime.timedelta(days=current_month_days)
    if date.day > next_month_days:
        delta = delta - datetime.timedelta(days=(date.day - next_month_days) - 1)

    return date + delta

def add_year(date):
    if is_leap_year(date.year):
        delta = datetime.timedelta(days=366)
    else:
        delta = datetime.timedelta(days=365)

    return date + delta

# Validates if the expected_value is equal to the given value
def test_equal(expected_value, value):
    if expected_value == value:
        print "Test Passed"
        return True

    print "Test Failed : " + str(expected_value) + " is not equal to " str(value)
    return False

# Test leap year
print "---------- Test leap year ----------"
test_equal(True, is_leap_year(2012))
test_equal(True, is_leap_year(2000))
test_equal(False, is_leap_year(1900))
test_equal(False, is_leap_year(2002))
test_equal(False, is_leap_year(2100))
test_equal(True, is_leap_year(2400))
test_equal(True, is_leap_year(2016))

# Test add month
print "---------- Test add month ----------"
test_equal(datetime.date(2016, 2, 1), add_month(datetime.date(2016, 1, 1)))
test_equal(datetime.date(2016, 6, 16), add_month(datetime.date(2016, 5, 16)))
test_equal(datetime.date(2016, 3, 15), add_month(datetime.date(2016, 2, 15)))
test_equal(datetime.date(2017, 1, 12), add_month(datetime.date(2016, 12, 12)))
test_equal(datetime.date(2016, 3, 1), add_month(datetime.date(2016, 1, 31)))
test_equal(datetime.date(2015, 3, 1), add_month(datetime.date(2015, 1, 31)))
test_equal(datetime.date(2016, 3, 1), add_month(datetime.date(2016, 1, 30)))
test_equal(datetime.date(2016, 4, 30), add_month(datetime.date(2016, 3, 30)))
test_equal(datetime.date(2016, 5, 1), add_month(datetime.date(2016, 3, 31)))

# Test add year
print "---------- Test add year ----------"
test_equal(datetime.date(2016, 2, 2), add_year(datetime.date(2015, 2, 2)))
test_equal(datetime.date(2001, 2, 2), add_year(datetime.date(2000, 2, 2)))
test_equal(datetime.date(2100, 2, 2), add_year(datetime.date(2099, 2, 2)))
test_equal(datetime.date(2101, 2, 2), add_year(datetime.date(2100, 2, 2)))
test_equal(datetime.date(2401, 2, 2), add_year(datetime.date(2400, 2, 2))) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-09-16T20:26:38.847

这是我发现非常简洁且不使用外部包的另一个答案：

```
import datetime as dt
import calendar

# Today, in `dt.date` type
day = dt.datetime.now().date()

one_year_delta = dt.timedelta(days=366 if ((day.month >= 3 and calendar.isleap(day.year+1)) or
                                            (day.month < 3 and calendar.isleap(day.year))) else 365)

# Add one year to the current date
print(day + one_year_delta) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-01T10:32:54.380

如果尚未将其转换为 python datetime 对象。然后添加增量时间

```
one_years_later = Your_date + datetime.timedelta(days=(years*days_per_year)) 
```

对于您的情况，天数 = 365。

您可以有条件检查年份是否为闰年并相应调整天数

您可以根据需要添加任意年

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-08T11:11:17.177

看这个：

```
#!/usr/bin/python

import datetime

def addYears(date, years):
    result = date + datetime.timedelta(366 * years)
    if years > 0:
        while result.year - date.year > years or date.month < result.month or date.day < result.day:
            result += datetime.timedelta(-1)
    elif years < 0:
        while result.year - date.year < years or date.month > result.month or date.day > result.day:
            result += datetime.timedelta(1)
    print "input: %s output: %s" % (date, result)
    return result 
```

示例用法：

```
addYears(datetime.date(2012,1,1), -1)
addYears(datetime.date(2012,1,1), 0)
addYears(datetime.date(2012,1,1), 1)
addYears(datetime.date(2012,1,1), -10)
addYears(datetime.date(2012,1,1), 0)
addYears(datetime.date(2012,1,1), 10) 
```

这个例子的输出：

```
input: 2012-01-01 output: 2011-01-01
input: 2012-01-01 output: 2012-01-01
input: 2012-01-01 output: 2013-01-01
input: 2012-01-01 output: 2002-01-01
input: 2012-01-01 output: 2012-01-01
input: 2012-01-01 output: 2022-01-01 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-03T19:39:49.960

您可以替换日期中的年份并获得预期结果

```
import datetime
date_now = datetime.date.today()
years_to_add = date_now.year + 1

date_1 = date_now.strftime('%Y-%m-%d')
date_2 = date_now.replace(year=years_to_add).strftime('%Y-%m-%d')

print(date_1)
print(date_2)

# 2021-08-03
# 2022-08-03 
```****

# c++ - occi 应用程序的前向兼容性

> ID：15741620
> 
> 赞同：0
> 
> 时间：2013-04-01T10:20:08.033
> 
> 标签：c++, oracle, occi

我们有一个`OCCI`动态链接到`occi`lib on的应用程序`Solaris`。现在在构建期间，我们将它与客户端链接`occi`，`Oracle 10.2.0.4`但我们希望相同的构建能够在 Oracle 10G 客户端和 Oracle 11G 客户端下运行。但它似乎`occi`不向后兼容，因为动态`occi`库的名称中有一个版本。

例如

```
md1sisun26:/tools/oracle/10.2.0.4/lib->dump -Lv libocci.so

libocci.so:

**** DYNAMIC SECTION INFORMATION ****
.dynamic:
[INDEX] Tag Value
[1] INIT 0xc6110
[2] FINI 0xc62b8
[3] SONAME libocci.so.10.1
[4] RUNPATH TLD_GLOBAL
[5] RPATH TLD_GLOBAL
[6] HASH 0xe8
[7] STRTAB 0x10488
[8] STRSZ 0x1fb42
[9] SYMTAB 0x41e8
[10] SYMENT 0x18
[11] CHECKSUM 0x25a3
[12] PLTSZ 0x4c80
[13] PLTREL 0x7
[14] JMPREL 0x3c450
[15] RELA 0x2ffd0
[16] RELASZ 0x11100
[17] RELAENT 0x18
[18] REGISTER 0x72
[19] REGISTER 0x86
[20] FEATURE_1 PARINIT
[21] FLAGS 0
[22] FLAGS_1 [ DISPRELDNE ]
[23] PLTGOT 0x1eb500
md1sisun26:/tools/oracle/10.2.0.4/lib->ls -lrt libocci.so
lrwxrwxrwx 1 oracle 15 Aug 10 2010 libocci.so -> libocci.so.10.1* 
```

正如您所见，当我们在 Oracle 11G 客户端下运行 occi 应用程序时，它会失败，因为没有`libocci.so.10.1`. 任何人都可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:46:41.573

前段时间我也遇到过同样的问题。经过深入研究，我发现唯一的选择是为不同的 ORACLE 服务器构建不同的可执行版本（分别与不同版本的库链接）。

[当然，这可以通过另一种方式完成 - 运行时区分您需要哪个版本的库，安装两个版本并动态加载库的正确版本，使用`dlopen`. 但我从未尝试过，因为我实际上并不需要它。但它可以工作，只要两个库版本可以同时安装在同一台机器上而不会相互冲突。对我来说听起来可能。]

* * *

这里有两个链接，可能会有所帮助：

*   [如何链接特定库（ g++; libstdc++.so.5 和 libstdc++.so.6 ）](https://stackoverflow.com/questions/3608010/how-to-link-with-specific-library-g-libstdc-so-5-and-libstdc-so-6)
*   [https://forums.oracle.com/forums/thread.jspa?messageID=4545221](https://forums.oracle.com/forums/thread.jspa?messageID=4545221)

第一个显示，您需要为您的特定环境提供特定的库版本。我的问题是，我必须有`occi 10.2.0.4`一个 RHEL5，它附带`libstdc++.so.6`，而`occi 10.2.0.4`依赖于`libstdc++.so.5`. *唯一*的解决方案是写在 OCCI 的论坛（第二个链接），过了一会儿，他们给了我正确的构建，它是`occi 10.2.0.4`用`libstdc++.so.6`而不是用`libstdc++.so.5`

幸运的是，你不会有这样的问题，但我决定，这可能对你有用。

# javascript - 使用 Javascript 在鼠标单击时更改表格单元格的颜色

> ID：15741625
> 
> 赞同：0
> 
> 时间：2013-04-01T10:20:44.023
> 
> 标签：javascript, colors, onclick, cell

如何为一个单元格分配 3 种颜色，并在每次单击时更改它们？假设我有一个 10x10 的表格，默认颜色是白色，第一次单击单元格时，它会变为黑色，第二次变为灰色，第三次变为白色，并且对于每种颜色，单元格也会得到一个值，例如：

白色：0
黑色：1
灰色：2。

我想做一个益智游戏（确切地说是 Griddler），如果正确解决了谜题，每个单元格都必须是黑色和灰色的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:26:39.590

[**这是一个工作小提琴**](http://jsfiddle.net/Xm5qp/)

内部`window.onload`（或准备好 DOM，随你喜欢）：

```
var colors = ["white","black","gray"]//array of colors 
var reverseRef = {"white":0,"black":1,"gray":2}; 

var cells = document.getElementsByClassName("block");//block is a class name you should give your blocks

for(var i=0;i<cells.length;i++){//attach an event to all blocks
    cells[i].onclick = function(){//when you click them
        //change the background color
        //(reverseRef[this.styles.backgroundColor]+1)%3 means get the number value for the color, increase it by one, and modulus it by 3 (which means you only get values between 0 and 2
        this.style.backgroundColor=colors[(reverseRef[this.style.backgroundColor]+1)%3];
    }
} 
```

（注意，在浏览器中，onclick 应该是在旧 IE 中使用`addEventListener`和填充的事件侦听器，`attachEvent`如果您需要支持它）

# c++ - 无法使用 std::move 移动内容

> ID：15741626
> 
> 赞同：2
> 
> 时间：2013-04-01T10:20:45.190
> 
> 标签：c++, std, move, move-semantics

我试图通过一个简单的示例（如下）来了解 std::move 的方式。基本上我试图将 p1 的内容移动到 p2，所以 p1 之后是空的，但这并没有发生。

我想我没有正确使用 std::move 。如果有人能向我解释这一点，我将不胜感激。

```
#include <iostream>
#include <utility>

int main()
{
    int * p1 = new int[10];
    for(int i = 0; i < 10; ++i)
        p1[i]=i;
    // moving contents of p1 to p2  
    int * p2 = std::move(p1);   
    // I was expeting p1 now to be empty but it's not...
    if(p1 != NULL)
        std::cout << "I'M NOT EMPTY\n";
    // prints I'M NOT EMPTY     
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:42:17.490

移动函数不能保证清除源对象的内容。但是，可以保证将其保留在您可以安全地销毁它或为其分配新值的状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T01:38:39.643

也许这
[为什么移动指针变量不会将其设置为空？](https://stackoverflow.com/questions/9452503/why-does-moving-a-pointer-variable-not-set-it-to-null)可以澄清你的代码中发生了什么。正如 riv 指出的那样，没有理由将 std::move 分配给您的指针。

此参考[http://en.cppreference.com/w/cpp/utility/move](http://en.cppreference.com/w/cpp/utility/move)在使用 std::move 时有很好的未定义行为示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-21T21:51:55.913

不幸的是，`std::move`它并没有像 C++11 新手经常期望的那样。它被 C++ 标准简单地定义为 a `static_cast`，因此它本身并没有实际修改给定的对象。通常有一种期望`std::move`会以某种方式清除或清零被移动的对象，但正如[这里](http://crascit.com/2015/09/21/when-moving-doesnt-move/)所解释的，这根本不是 C++ 标准所要求的。

此外，riv 的回答只是部分正确。他所说的保证与 r没有真正的关系`std::move`，它与右值引用更相关，并且通常与移动构造函数和移动赋值一起讨论该保证。如果您想了解更多关于`std::move`、rvalues 等的背景知识，我强烈推荐[Thomas Becker 的讨论](http://thbecker.net/articles/rvalue_references/section_01.html)，它是 Internet 上关于该主题的引用最多的站点之一。

# objective-c - NSCharacterSet 中的 NSArray

> ID：15741631
> 
> 赞同：26
> 
> 时间：2013-04-01T10:21:13.420
> 
> 标签：objective-c, nscharacterset

目前我可以制作如下的字母数组

```
[[NSArray alloc]initWithObjects:@"A",@"B",@"C",@"D",@"E",@"F",@"G",@"H",@"I",@"J",@"K",@"L",@"M",@"N",@"O",@"P",@"Q",@"R",@"S",@"T",@"U",@"V",@"W",@"X",@"Y",@"Z",nil]; 
```

知道这是可用的

```
[NSCharacterSet uppercaseLetterCharacterSet] 
```

如何用它制作一个数组？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-04-01T11:32:51.153

以下代码创建一个包含给定字符集的所有字符的数组。它也适用于“基本多语言平面”之外的字符（字符 > U+FFFF，例如 U+10400 DESERET CAPITAL LETTER LONG I）。

```
NSCharacterSet *charset = [NSCharacterSet uppercaseLetterCharacterSet];
NSMutableArray *array = [NSMutableArray array];
for (int plane = 0; plane <= 16; plane++) {
    if ([charset hasMemberInPlane:plane]) {
        UTF32Char c;
        for (c = plane << 16; c < (plane+1) << 16; c++) {
            if ([charset longCharacterIsMember:c]) {
                UTF32Char c1 = OSSwapHostToLittleInt32(c); // To make it byte-order safe
                NSString *s = [[NSString alloc] initWithBytes:&c1 length:4 encoding:NSUTF32LittleEndianStringEncoding];
                [array addObject:s];
            }
        }
    }
} 
```

这`uppercaseLetterCharacterSet`给出了一个包含 1467 个元素的数组。但请注意，字符 > U+FFFF 存储为 UTF-16 代理对`NSString`，因此例如 U+10400 实际上存储`NSString`为 2 个字符“\uD801\uDC00”。

**可以在此问题的其他答案中找到**Swift 2代码。**这是一个**Swift 3**版本，作为扩展方法编写：**

 **```
extension CharacterSet {
    func allCharacters() -> [Character] {
        var result: [Character] = []
        for plane: UInt8 in 0...16 where self.hasMember(inPlane: plane) {
            for unicode in UInt32(plane) << 16 ..< UInt32(plane + 1) << 16 {
                if let uniChar = UnicodeScalar(unicode), self.contains(uniChar) {
                    result.append(Character(uniChar))
                }
            }
        }
        return result
    }
} 
```

例子：

```
let charset = CharacterSet.uppercaseLetters
let chars = charset.allCharacters()
print(chars.count) // 1521
print(chars) // ["A", "B", "C", ... "] 
```

（请注意，用于显示结果的字体中可能不存在某些字符。）

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2018-09-02T03:03:16.637

受[Satachito answer](https://stackoverflow.com/a/51200984/1033581)的启发，这是一种从 CharacterSet 制作数组的高效方法`bitmapRepresentation`：

```
extension CharacterSet {
    func characters() -> [Character] {
        // A Unicode scalar is any Unicode code point in the range U+0000 to U+D7FF inclusive or U+E000 to U+10FFFF inclusive.
        return codePoints().compactMap { UnicodeScalar($0) }.map { Character($0) }
    }

    func codePoints() -> [Int] {
        var result: [Int] = []
        var plane = 0
        // following documentation at https://developer.apple.com/documentation/foundation/nscharacterset/1417719-bitmaprepresentation
        for (i, w) in bitmapRepresentation.enumerated() {
            let k = i % 0x2001
            if k == 0x2000 {
                // plane index byte
                plane = Int(w) << 13
                continue
            }
            let base = (plane + k) << 3
            for j in 0 ..< 8 where w & 1 << j != 0 {
                result.append(base + j)
            }
        }
        return result
    }
} 
```

### 大写字母示例

```
let charset = CharacterSet.uppercaseLetters
let chars = charset.characters()
print(chars.count) // 1733
print(chars) // ["A", "B", "C", ... "] 
```

### 不连续平面的示例

```
let charset = CharacterSet(charactersIn: "")
let codePoints = charset.codePoints()
print(codePoints) // [120488, 837521] 
```

### 表演

非常好，具体取决于数据/使用情况：这个内置版本的解决方案似乎比 Martin R 的解决方案或 Oliver Atkinson 的解决[`bitmapRepresentation`](https://developer.apple.com/documentation/foundation/characterset/1779849-bitmaprepresentation)方案快 2 到 10 倍。[`contains`](https://developer.apple.com/documentation/foundation/characterset/2908835-contains)[`longCharacterIsMember`](https://developer.apple.com/documentation/foundation/nscharacterset/1409757-longcharacterismember)

一定要根据自己的需要进行比较：性能最好在非调试版本中进行比较；所以避免在操场上比较表演。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-01T10:29:00.847

由于字符有一个有限的、有限的（而不是太宽的）范围，您可以测试哪些字符是给定字符集的成员（蛮力）：

```
// this doesn't seem to be available
#define UNICHAR_MAX (1ull << (CHAR_BIT * sizeof(unichar)))

NSData *data = [[NSCharacterSet uppercaseLetterCharacterSet] bitmapRepresentation];
uint8_t *ptr = [data bytes];
NSMutableArray *allCharsInSet = [NSMutableArray array];
// following from Apple's sample code
for (unichar i = 0; i < UNICHAR_MAX; i++) {
    if (ptr[i >> 3] & (1u << (i & 7))) {
        [allCharsInSet addObject:[NSString stringWithCharacters:&i length:1]];
    }
} 
```

备注：由于 unichar 的大小和 bitmapRepresentation 中附加段的结构，此解决方案仅适用于字符 <= 0xFFFF，不适用于更高的平面。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-11-25T13:24:30.177

我创建了 Martin R 算法的 Swift (v2.1) 版本：

```
let charset = NSCharacterSet.URLPathAllowedCharacterSet();

for var plane : UInt8 in 0...16 {
    if charset.hasMemberInPlane( plane ) {
        var c : UTF32Char;

        for var c : UInt32 = UInt32( plane ) << 16; c < (UInt32(plane)+1) << 16; c++ {
            if charset.longCharacterIsMember(c) {
                var c1 = c.littleEndian // To make it byte-order safe
                let s = NSString(bytes: &c1, length: 4, encoding: NSUTF32LittleEndianStringEncoding);
                NSLog("Char: \(s)");
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-18T15:05:48.710

这是使用更多的 swift for swift 来完成的。

```
let characters = NSCharacterSet.uppercaseLetterCharacterSet()
var array      = [String]()

for plane: UInt8 in 0...16 where characters.hasMemberInPlane(plane) {

  for character: UTF32Char in UInt32(plane) << 16..<(UInt32(plane) + 1) << 16 where characters.longCharacterIsMember(character) {

    var endian = character.littleEndian
    let string = NSString(bytes: &endian, length: 4, encoding: NSUTF32LittleEndianStringEncoding) as! String

    array.append(string)

  }

}

print(array) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-02T15:45:25.987

你不应该; 这不是字符集的目的。A`NSCharacterSet`是一组可能是无限的字符，可能在尚未发明的代码点中。你想知道的只是“这个角色或角色集合在这个集合中吗？”，为此它很有用。

想象一下这段 Swift 代码：

```
let asciiCodepoints = Unicode.Scalar(0x00)...Unicode.Scalar(0x7F)
let asciiCharacterSet = CharacterSet(charactersIn: asciiCodepoints)
let nonAsciiCharacterSet = asciiCharacterSet.inverted 
```

这类似于此 Objective-C 代码：

```
NSRange asciiCodepoints = NSMakeRange(0x00, 0x7F);
NSCharacterSet * asciiCharacterSet = [NSCharacterSet characterSetWithRange:asciiCodepoints];
NSCharacterSet * nonAsciiCharacterSet = asciiCharacterSet.invertedSet; 
```

说“遍历”中的所有字符很容易`asciiCharacterSet`；这只会循环遍历所有`U+0000`字符`U+007F`。但是循环遍历 中的所有字符是什么意思`nonAsciiCharacterSet`？你从 开始`U+0080`？谁说将来不会有负代码点？你在哪里结束？你跳过不可打印的字符吗？扩展的字形簇呢？由于它是一个集合（顺序无关紧要），您的代码可以处理此循环中的乱序代码点吗？

这些是您不想在这里回答的问题；功能`nonAsciiCharacterSet`上是无限的，您想要使用它的只是判断任何给定字符是否位于 ASCII 字符集之外。

* * *

你真正应该问自己的问题是：**“我想用这组大写字母来完成什么？”** 如果（并且可能仅当）您确实需要按顺序对其进行迭代，则将您关心的那些放入`Array`or `String`（也许从资源文件中读取）可能是最好的方法。如果你想检查一个字符是否是大写字母集合的一部分，那么**你不关心顺序，甚至不关心集合中有多少个字符**，并且应该使用`CharacterSet.uppercaseLetters.contains(foo)`（在 Objective-C 中：）`[NSCharacterSet.uppercaseLetterCharacterSet contains: foo]`。

也想想非拉丁字符。`CharacterSet.uppercaseLetters`涵盖 Unicode 通用类别[Lu](http://www.fileformat.info/info/unicode/category/Lu/list.htm)和[Lt](http://www.fileformat.info/info/unicode/category/Lt/list.htm)，其中包含`A`through`Z`以及`ǅ`,`和`Խ`. 你不想考虑这个。当 Unicode Consortium 将新字符添加到此列表中时，您绝对不想发布对您的应用程序的更新。**如果您要做的是确定某些内容是否为大写，请不要费心对任何内容进行硬编码。**`

 `* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-03-09T13:33:13.403

我发现 Martin R 的解决方案对于我的目的来说太慢了，所以我使用`CharacterSet`'`bitmapRepresentation`属性以另一种方式解决了它。

根据我的基准，这明显更快：

```
var ranges = [CountableClosedRange<UInt32>]()
let bitmap: Data = characterSet.bitmapRepresentation
var first: UInt32?, last: UInt32?
var plane = 0, nextPlane = 8192
for (j, byte) in bitmap.enumerated() where byte != 0 {
    if j == nextPlane {
        plane += 1
        nextPlane += 8193
        continue
    }
    for i in 0 ..< 8 where byte & 1 << i != 0 {
        let codePoint = UInt32(j - plane) * 8 + UInt32(i)
        if let _last = last, codePoint == _last + 1 {
            last = codePoint
        } else {
            if let first = first, let last = last {
                ranges.append(first ... last)
            }
            first = codePoint
            last = codePoint
        }
    }
}
if let first = first, let last = last {
    ranges.append(first ... last)
}
return ranges 
```

此解决方案返回一个 codePoint 范围数组，但您可以轻松调整它以返回单个字符或字符串等。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-12T18:20:18.413

仅针对拉丁字母的 AZ（没有带有希腊语、变音符号或其他不是该人要求的东西）：

```
for plane: UInt8 in 0...16 where characters.hasMemberInPlane(plane) {
    i = 0
    for character: UTF32Char in UInt32(plane) << 16...(UInt32(plane) + 1) << 16 where characters.longCharacterIsMember(character) {
        var endian = character.littleEndian
        let string = NSString(bytes: &endian, length: 4, encoding: NSUTF32LittleEndianStringEncoding) as! String
        array.append(string)
        if(array.count == 26) {
            break
        }
    }
    if(array.count == 26) {
        break
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-09-20T09:47:14.093

您当然可以使用以下方法创建字符集和字母集`CharacterSet`：

```
var smallEmojiCharacterSet = CharacterSet(charactersIn:  Unicode.Scalar("")...Unicode.Scalar("")) 
```

问题是它`CharacterSet`不是一个`Set`（尽管它符合`SetAlgebra`），而是一个 unicode 字符集。这会导致获取所有字符的序列，将其转换为`Array`.`Set`或`String`. 我[找到了解决方案](https://stackoverflow.com/questions/55473051/converting-a-characterset-to-a-string-or-to-an-array-or-set-of-characters)，但存在更好的解决方案。实际上，你想要的是从一个字符到另一个字符，有一个范围“a”...“z”。在标量级别上做起来并不难。在`Character`层面上，还有更多需要考虑的警告。

```
extension Unicode.Scalar: Strideable {
    public typealias Stride = Int

    public func distance(to other: Unicode.Scalar) -> Int {
        return Int(other.value) - Int(self.value)
    }

    public func advanced(by n: Int) -> Unicode.Scalar {
        return Unicode.Scalar(UInt32(Int(value) + n))!
    }
}

let alphabetScalarRange = (Unicode.Scalar("a")...Unicode.Scalar("z"))// ClosedRange<Unicode.Scalar>

let alphabetCharactersArr = Array(alphabetScalarRange.map(Character.init)) // Array of Characters from range
let alphabetStringsArr = Array(alphabetScalarRange.map(String.init)) // Array of Strings from range
let alphabetString = alphabetStringsArr.joined() // String (collection of characters) from range
// or simply
let uppercasedAlphabetString =  (("A" as Unicode.Scalar)..."Z").reduce("") { (r, us) -> String in
    r + String(us)
} 
```

如果您认为进行扩展是矫枉过正

```
let alphabetScalarValueRange = (Unicode.Scalar("a").value...Unicode.Scalar("z").value)
let alphabetStringsArr2 = Array(alphabetScalarValueRange.compactMap{ Unicode.Scalar($0)?.escaped(asASCII: false) })
let alphabetString2 = alphabetScalarValueRange.compactMap({ Unicode.Scalar($0)?.escaped(asASCII: false) }).joined(separator: ", ") 
```

但要小心：字符可以由多个标量组成。`**

# jquery - 从右向左滑动表格内容

> ID：15741635
> 
> 赞同：0
> 
> 时间：2013-04-01T10:21:23.007
> 
> 标签：jquery

我在我的例子中使用了以下 [http://jsfiddle.net/ZSFFS/27/](http://jsfiddle.net/ZSFFS/27/) 但它不会滑动我在下面附上我的代码请验证并让我知道我犯了什么错误，我不能能够发现我的错误

```
<html>
<head>
<style type="text/css">
.container{
    width:500px;
height:250px;
overflow:hidden;
margin:10px;
position:relative
}
.table{
position:absolute;
width:2000px;
height:250px;
left:0;

background: -moz-linear-gradient(to right, red, orange, yellow, green, blue, indigo,           violet);
}
</style>

<script type="text/javascript">
$('.next').click(function(event){
if($('.table').css('left') != '-1500px') {
$(this).prop('disabled', true)    
    $('.table').animate({left:'-=500px'}, 500, function() {
          $('.next').prop('disabled', false)    
    });
}
});

$('.prev').click(function(event){
if($('.table').css('left') != '0px') {
$(this).prop('disabled', true)   
    $('.table').animate({left:'+=500px'}, 500, function() {
          $('.prev').prop('disabled', false)    
    });
}
});
</script>
</head>
<body>
<div class="container">
<div class="table">
    <table border="2">
        <tr>
            <td>sam</td>
            <td>sam</td><td>sam</td><td>sam</td><td>sam</td><td>sam</td><td>sam</td> <td>sam</td><td>sam</td><td>sam</td><td>sam</td><td>sam</td><td>sam</td><td>sam</td><td>sam</td><td>sam</td><td>man</td><td>man</td><td>man</td><td>sam</td><td>sam</td><td>sam</td><td>sam</td><td>bool</td>
        </tr>
    </table>

</div>
</div>
<input type='button' class="prev" value='prev'>
<input type='button' class="next" value='next'>

</body>
</html> 
```

它在[http://jsfiddle.net/ZSFFS/27/](http://jsfiddle.net/ZSFFS/27/)中运行良好在此 先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:24:08.073

你已经省略`$(document).ready(function(){ });`了，也包括了 jQuery 框架：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>

$(document).ready(function(){
  $('.next').click(function(event){
  if($('.table').css('left') != '-1500px') {
  $(this).prop('disabled', true)    
    $('.table').animate({left:'-=500px'}, 500, function() {
          $('.next').prop('disabled', false)    
    });
  }
  });

  $('.prev').click(function(event){
  if($('.table').css('left') != '0px') {
  $(this).prop('disabled', true)   
    $('.table').animate({left:'+=500px'}, 500, function() {
          $('.prev').prop('disabled', false)    
    });
  }
  });

});
</script> 
```

# android - Android - S3 中的内存不足问题

> ID：15741636
> 
> 赞同：0
> 
> 时间：2013-04-01T10:21:29.613
> 
> 标签：android, uiimageview, out-of-memory

我正在开发一个 android 应用程序，它在一页中有七个滑块。即，有七个问题，每个问题对应一个滑块。用户可以通过在每个滑块中滑动指针来回答问题。在 S3 中，此页面正在崩溃。我们在本节中使用高分辨率图像。

这是由于 S3 中的堆大小较小吗？我们能解决这个问题吗？有什么方法可以解决这个问题吗？对于这个框架，我们是否需要使用质量较差的图像（这是不可取的）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:25:19.460

您是否[有效地加载位图](https://stackoverflow.com/a/12819091/726863)？

如果是，那么您可以尝试通过使用来增加堆大小

```
android:largeHeap="true" 
```

在`<application>`AndroidManifest 文件中的标签中。

> 警告：
> 
> *   更大的堆大小意味着更长的 GC（垃圾收集）时间。
> *   如果你让你的应用程序堆大小变大，它会显着降低其他应用程序的速度，用户很快就会知道你的应用程序是问题所在。
> *   不要仅仅因为你得到内存错误而使用这个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:27:44.767

[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)。

有效地加载位图。**请参阅将缩小的版本加载到内存**中主题下的链接。

**不使用时回收位图。**

[http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)。谈话是关于内存管理的。如果运行内存泄漏，您可以使用 MAT Analyzer 查找并修复问题。该视频还讨论了堆和 MAT Analyzer 的使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T10:29:58.997

使用下面的方法设置从[这个](https://stackoverflow.com/questions/11608064/bitmap-out-of-memory-error-in-android)链接获得的 ImageView 中的图像对我有用

```
 public Bitmap ShrinkBitmap(String file, int width, int height){

             BitmapFactory.Options bmpFactoryOptions = new BitmapFactory.Options();
                bmpFactoryOptions.inJustDecodeBounds = true;
                Bitmap bitmap = BitmapFactory.decodeFile(file, bmpFactoryOptions);

                int heightRatio = (int)Math.ceil(bmpFactoryOptions.outHeight/(float)height);
                int widthRatio = (int)Math.ceil(bmpFactoryOptions.outWidth/(float)width);

                if (heightRatio > 1 || widthRatio > 1)
                {
                 if (heightRatio > widthRatio)
                 {
                  bmpFactoryOptions.inSampleSize = heightRatio;
                 } else {
                  bmpFactoryOptions.inSampleSize = widthRatio;
                 }
                }

                bmpFactoryOptions.inJustDecodeBounds = false;
                bitmap = BitmapFactory.decodeFile(file, bmpFactoryOptions);
             return bitmap;
            } 
```

# jquery - jQuery 自动完成给出 TypeError: this._renderItem(...) is undefined

> ID：15741639
> 
> 赞同：1
> 
> 时间：2013-04-01T10:21:34.547
> 
> 标签：jquery, jquery-ui-autocomplete

我目前`.data( "ui-autocomplete" )._renderItem = function( ul, item )`在我的页面的三个地方使用。现在我需要再添加一个，我就完成了。

但是这次我收到错误消息

> TypeError: this._renderItem(...) 未定义

奇怪的是，如果我的`IF`测试是假的，我只会得到这个。

```
 .data( "ui-autocomplete" )._renderItem = function( ul, item ) {

  // If only one row is returned and ID = 0, then return 'no result' message
  if(item.id == '0') {
    return jQuery( "<li></li>" )
        .data( "item.autocomplete", item )
        .append( "<div class='no-result'>"+ item.value + "</div>" )
        .appendTo( ul );
  } 
```

我不知道为什么它在这里失败，而不是在其他 3 个地方。是不是哪里有冲突？

这是我的代码

```
jQuery('#my-selector').autocomplete({
  minLength: 2,
  source: function( request, response ) {
    jQuery.ajax({
        url: callback_url,
        dataType: "json",
        data: {
                term: request.term
        },
        success: function( data ) {
          response( jQuery.map( data, function( item ) {
            return {
              id: item.id,
              value: item.name,
              name_encoded: item.name_encoded
            }
        }));
      }
    });
  },
  select: function( event, ui ) {
        return false;
  }
}).data( "ui-autocomplete" )._renderItem = function( ul, item ) {
  if(item.id == '0') {
    return jQuery( "<li></li>" )
        .data( "item.autocomplete", item )
        .append( "<div class='no-result'>"+ item.value + "</div>" )
        .appendTo( ul );
  }
}; 
```

**更新**

这种改变有效。但是我仍然不明白为什么我必须`else`在这里使用一个语句，而我没有在其他两个`autocomplete`函数中使用它。

```
.data( "ui-autocomplete" )._renderItemData = function( ul, item ) {
        if(item.id == '0') {
                return jQuery( "<li></li>" )
                        .data( "item.autocomplete", item )
                        .append( "<div class='no-result'>"+ item.value + "</div>" )
                        .appendTo( ul );
        } else {
            return this._renderItem( ul, item ).data( "ui-autocomplete-item", item );
        }

}; 
```

从带有搜索词的查询中返回数据`some`

```
[
  {"id":"8186","name":"Some Are Thieves"},
  {"id":"6149","name":"Somet"},
  {"id":"6150","name":"Somethin'Else from SKECHERS"}
] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T10:25:15.850

这是因为测试，如果测试失败`_renderItem`则不返回任何值，相当于返回`undefined`。

但是`_renderItem`如下所示调用，这会导致错误，因为 jquery 尝试将数据值设置为返回值。

```
return this._renderItem( ul, item ).data( "ui-autocomplete-item", item ); 
```

在您的情况下，您必须覆盖`_renderItemData`而不是`_renderItem`

```
var el = $('<my-autocomplete-element>');
var _renderItemData = el.data("ui-autocomplete")._renderItemData;
el.data("ui-autocomplete")._renderItemData = function(ul, item) {

    // If only one row is returned and ID = 0, then return 'no result' message
    if (item.id == '0') {
        return jQuery("<li></li>").data("item.autocomplete", item).data(
                "ui-autocomplete-item", item).append("<div class='no-result'>"
                + item.value + "</div>").appendTo(ul);
    } else {
        _renderItemData.apply(this, arguments)
    }
} 
```

演示：[Plunker](http://plnkr.co/edit/bBJUWsZps3eZgLjYuHZp?p=preview)

# ruby-on-rails - 终端中的服务器日志问题

> ID：15741642
> 
> 赞同：0
> 
> 时间：2013-04-01T10:22:01.230
> 
> 标签：ruby-on-rails, ruby-on-rails-3

**我发现每个样式表都有这些问题，** 因此我无法在终端日志中找到东西。

我该如何解决这个问题？

```
ActionController::RoutingError (没有路由匹配 [GET] "/assets/calendar_date_select/calendar_date_select.js"):
  actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.3) lib/rails/engine.rb:479:in `call'
  railties (3.2.3) lib/rails/application.rb:220:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
  机架 (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  /home/rank3/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `服务'
  /home/rank3/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/httpserver.rb:94:在“运行”中
  /home/rank3/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:35:26.557

我认为您需要 rake assets:precompile 命令（将图像、css 和 js 从 app/assets 编译并复制到 public/

# php - PHP Simple HTML DOM Parser 查找特定文本

> ID：15741644
> 
> 赞同：0
> 
> 时间：2013-04-01T10:22:14.500
> 
> 标签：php, simple-html-dom

试图从这种糟糕的 HTML 格式中获取数据

```
http://www.weather.gov.sg/lws/zoneInfo.do 
```

我只需要获取 3 个地方的数据，例如勿洛、城市和加东。为此，如何将数据存储在数组中？

这就是我为获得商店的前 5 行所做的，这并不是我想要的。

```
$row_counter='0';
while($row_counter<5)
{
$ret['Name'][] = $html->find('.FORM1', $row_counter)->innertext;
$ret['Area'][] = $html->find('.FORM1', $row_counter)->next_sibling()->innertext;
$ret['Alert'][] = $html->find('.FORM1', $row_counter)->next_sibling()->next_sibling()->innertext;
$ret['From'][] = $html->find('.FORM1', $row_counter)->next_sibling()->next_sibling()->next_sibling()->innertext;
$ret['Till'][] = $html->find('.FORM1', $row_counter)->next_sibling()->next_sibling()->next_sibling()->next_sibling()->innertext;
$row_counter++;
} 
```

我能够成功地为整行和所有列存储数据。搜索某个名称的最有效方法是什么，例如 Bedok 并像 next_sibling 一样获取它旁边的列？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T11:34:13.237

是不是很容易。先试一试再问。`(:`

```
<?php
include 'simple_html_dom.php';
$html = file_get_html('http://www.weather.gov.sg/lws/zoneInfo.do');

$n = 0;
$table = $html->find('table',3)->find('table',0)->find('table',0)->find('table',0)->find('table',3)->find('table',0);

$i = -3;
$rows = $table->find('tr');
$holder = array();

foreach($rows as $element){
    $i++;
    if($i < 0) continue;

    $holder[$i]['name'] = $element->find('td',0)->plaintext;
    $holder[$i]['zone_or_school'] = $element->find('td',1)->plaintext;
    $holder[$i]['risk'] = $element->find('td',2)->plaintext;
    $holder[$i]['from'] = $element->find('td',3)->plaintext;
    $holder[$i]['till'] = $element->find('td',4)->plaintext;
}

var_dump($holder);
?> 
```

如果您想获取特定数据，则可以将其过滤掉：

```
foreach($holder as $key => $val)
{
if($holder[$key]['name']=='Bedoc')
$my_data = $holder[$key];
} 
```

此代码未调试，因为我现在在移动设备上。但也许你已经明白了，如果不工作的话。谢谢

# timeout - 安装 vmc 时 Cloud Foundry 超时

> ID：15741648
> 
> 赞同：0
> 
> 时间：2013-04-01T10:22:44.113
> 
> 标签：timeout, cloud-foundry

我想尝试云代工。安装过程在安装 vmc 时失败，因为：

```
root $ gem install vmc
vmc target
ERROR:  While executing gem ... (Gem::RemoteFetcher::FetchError)
    Errno::ETIMEDOUT: Connection timed out - connect(2) (http://rubygems.org/gems/addressable-2.3.3.gem) 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:17:01.400

最后它在等待一些之后工作（但 MongoDB 已停用......）。

# asp.net-mvc-3 - 在 asp.net mvc3 中返回每个控制器操作的单个视图

> ID：15741651
> 
> 赞同：0
> 
> 时间：2013-04-01T10:22:54.647
> 
> 标签：asp.net-mvc-3

我想为 asp.net mvc3 中的每个控制器操作请求返回相同的视图。实现此目的的最佳方法是什么。我不想在每个控制器操作中都写视图名称

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:00:28.180

如果您希望它用于单个控制器，则`OnActionExecuted`在此控制器中覆盖：

```
protected override void OnActionExecuted(ActionExecutedContext filterContext)
{
    var viewResult = filterContext.Result as ViewResultBase;

    if (viewResult != null)
    {
        viewResult.ViewName = "view-name";
    }

    base.OnActionExecuted(filterContext);
} 
```

如果您想要整个应用程序，请覆盖`ViewEngine`：

```
public class RazorViewEngineViewMobileSupport : RazorViewEngine
{
    public override ViewEngineResult FindPartialView(ControllerContext controllerContext, string partialViewName, bool useCache)
    {
        return base.FindPartialView(controllerContext, "view-name", useCache);
    }

    public override ViewEngineResult FindView(ControllerContext controllerContext, string viewName, string masterName, bool useCache)
    {
        return base.FindView(controllerContext, "view-name", masterName, useCache);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:50:11.833

你可以使用

```
Return RedirecToAction(ActionName) 
```

所以你可能有类似的东西

```
<ActionName("PageX")> _
Function PageX() As ActionResult
  Return RedirectToAction("CommonView")
End Function

<ActionName("PageY")> _
Function PageY() As ActionResult
  Return RedirectToAction("CommonView")
End Function

<ActionName("PageZ")> _
Function PageZ() As ActionResult
  Return RedirectToAction("CommonView")
End Function

<ActionName("CommonView")> _
Function CommonView() As ActionResult
  Return View()
End Function 
```

# elasticsearch - 来自 ElasticSearch 中 sqlserver jdbc 河的奇怪浮点数

> ID：15741653
> 
> 赞同：0
> 
> 时间：2013-04-01T10:23:24.567
> 
> 标签：elasticsearch, elasticsearch-jdbc-river

我有一个 SQLServer 数据库，当我导入浮点类型时，它导入了不正确的值：

DB值：9.0 ES值：90.0

DB 值：16.00 ES 值：16000000000000004

我已经为浮点类型的值设置了一个映射，并在河流配置中设置了 scale:2 参数，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:25:58.850

我的猜测是，沿着这条线的某个地方，该值被解析为字符串并以错误的文化格式化。例如，如果您的小数点是逗号，那么点将是千位分隔符（大多数情况下）并且将被忽略：

```
PS> Get-Culture

LCID             Name             DisplayName
----             ----             -----------
1031             de-DE            German (Germany)

PS> [double]::Parse('9.0')
90 
```

16 似乎并不是一个精确的 16，这就是为什么你会得到这么大的数字。

最简单的解决方法是更改​​服务器或机器上的语言环境。另一种选择是确定这是您的代码或框架中的错误。通常，在格式化或解析供机器使用的数字时，始终指定一种文化（例如，.NET 中的不变文化或 C 中的 C 语言环境）属于常识，但许多应用程序也会出错。

# c++ - 尝试使用 FFMpeg 和 openAL 同步音频/视频

> ID：15741654
> 
> 赞同：3
> 
> 时间：2013-04-01T10:23:34.623
> 
> 标签：c++, ffmpeg, blackberry-10, openal

我一直在研究 dranger ffmpeg 教程，该教程解释了如何在显示帧和播放音频后同步音频和视频，这是我所在的位置。

不幸的是，该教程已过时（Stephen Dranger 向我解释了他自己）并且还使用了我没有使用的 sdl - 这是针对 Blackberry 10 应用程序的。

我只是无法让视频帧以正确的速度显示（它们只是播放速度非常快），而且我已经尝试了一个多星期 - 说真的！

我有 3 个线程正在发生 - 一个从流中读取到音频和视频队列，然后是 2 个线程用于音频和视频。

如果有人可以在扫描我的相关代码后解释发生了什么，那么您将成为救命稻草。

延迟（我传递给 usleep(testDelay) 的内容似乎正在上升（递增），这对我来说似乎不合适。

```
count = 1;
    MyApp* inst = worker->app;//(VideoUploadFacebook*)arg;
    qDebug() << "\n start loadstream";
    w = new QWaitCondition();
    w2 = new QWaitCondition();
    context = avformat_alloc_context();
    inst->threadStarted = true;
    cout << "start of decoding thread";
    cout.flush();

    av_register_all();
    avcodec_register_all();
    avformat_network_init();
    av_log_set_callback(&log_callback);
    AVInputFormat   *pFormat;
    //const char      device[]     = "/dev/video0";
    const char      formatName[] = "mp4";
    cout << "2start of decoding thread";
    cout.flush();

    if (!(pFormat = av_find_input_format(formatName))) {
        printf("can't find input format %s\n", formatName);
        //return void*;
    }
    //open rtsp
    if(avformat_open_input(&context, inst->capturedUrl.data(), pFormat,NULL) != 0){
        // return ;
        cout << "error opening of decoding thread: " << inst->capturedUrl.data();
        cout.flush();
    }

    cout << "3start of decoding thread";
    cout.flush();
    // av_dump_format(context, 0, inst->capturedUrl.data(), 0);
    /*   if(avformat_find_stream_info(context,NULL) < 0){
        return EXIT_FAILURE;
    }
     */
    //search video stream
    for(int i =0;i<context->nb_streams;i++){
        if(context->streams[i]->codec->codec_type == AVMEDIA_TYPE_VIDEO)
            inst->video_stream_index = i;
    }
    cout << "3z start of decoding thread";
    cout.flush();
    AVFormatContext* oc = avformat_alloc_context();
    av_read_play(context);//play RTSP
    AVDictionary *optionsDict = NULL;
    ccontext = context->streams[inst->video_stream_index]->codec;

    inst->audioc = context->streams[1]->codec;

    cout << "4start of decoding thread";
    cout.flush();
    codec = avcodec_find_decoder(ccontext->codec_id);
    ccontext->pix_fmt = PIX_FMT_YUV420P;

    AVCodec* audio_codec = avcodec_find_decoder(inst->audioc->codec_id);
    inst->packet = new AVPacket();
    if (!audio_codec) {
        cout << "audio codec not found\n"; //fflush( stdout );
        exit(1);
    }

    if (avcodec_open2(inst->audioc, audio_codec, NULL) < 0) {
        cout << "could not open codec\n"; //fflush( stdout );
        exit(1);
    }

    if (avcodec_open2(ccontext, codec, &optionsDict) < 0) exit(1);

    cout << "5start of decoding thread";
    cout.flush();
    inst->pic = avcodec_alloc_frame();

    av_init_packet(inst->packet);

    while(av_read_frame(context,inst->packet) >= 0 && &inst->keepGoing)
    {

        if(inst->packet->stream_index == 0){//packet is video

            int check = 0;

            // av_init_packet(inst->packet);
            int result = avcodec_decode_video2(ccontext, inst->pic, &check, inst->packet);

            if(check)
                break;
        }
    }

    inst->originalVideoWidth = inst->pic->width;
    inst->originalVideoHeight = inst->pic->height;
    float aspect = (float)inst->originalVideoHeight / (float)inst->originalVideoWidth;
    inst->newVideoWidth = inst->originalVideoWidth;
    int newHeight = (int)(inst->newVideoWidth * aspect);
    inst->newVideoHeight = newHeight;//(int)inst->originalVideoHeight / inst->originalVideoWidth * inst->newVideoWidth;// = new height
    int size = avpicture_get_size(PIX_FMT_YUV420P, inst->originalVideoWidth, inst->originalVideoHeight);
    uint8_t* picture_buf = (uint8_t*)(av_malloc(size));
    avpicture_fill((AVPicture *) inst->pic, picture_buf, PIX_FMT_YUV420P, inst->originalVideoWidth, inst->originalVideoHeight);

    picrgb = avcodec_alloc_frame();
    int size2 = avpicture_get_size(PIX_FMT_YUV420P, inst->newVideoWidth, inst->newVideoHeight);
    uint8_t* picture_buf2 = (uint8_t*)(av_malloc(size2));
    avpicture_fill((AVPicture *) picrgb, picture_buf2, PIX_FMT_YUV420P, inst->newVideoWidth, inst->newVideoHeight);

    if(ccontext->pix_fmt != PIX_FMT_YUV420P)
    {
        std::cout << "fmt != 420!!!: " << ccontext->pix_fmt << std::endl;//
        // return (EXIT_SUCCESS);//-1;

    }

    if (inst->createForeignWindow(inst->myForeignWindow->windowGroup(),
            "HelloForeignWindowAppIDqq", 0,
            0, inst->newVideoWidth,
            inst->newVideoHeight)) {

    } else {
        qDebug() << "The ForeginWindow was not properly initialized";
    }

    inst->keepGoing = true;

    inst->img_convert_ctx = sws_getContext(inst->originalVideoWidth, inst->originalVideoHeight, PIX_FMT_YUV420P, inst->newVideoWidth, inst->newVideoHeight,
            PIX_FMT_YUV420P, SWS_BILINEAR, NULL, NULL, NULL);

    is = (VideoState*)av_mallocz(sizeof(VideoState));
    if (!is)
        return NULL;

    is->audioStream = 1;
    is->audio_st = context->streams[1];
    is->audio_buf_size = 0;
    is->audio_buf_index = 0;
    is->videoStream = 0;
    is->video_st = context->streams[0];

    is->frame_timer = (double)av_gettime() / 1000000.0;
    is->frame_last_delay = 40e-3;

    is->av_sync_type = DEFAULT_AV_SYNC_TYPE;
    //av_strlcpy(is->filename, filename, sizeof(is->filename));
    is->iformat = pFormat;
    is->ytop    = 0;
    is->xleft   = 0;

    /* start video display */
    is->pictq_mutex = new QMutex();
    is->pictq_cond  = new QWaitCondition();

    is->subpq_mutex = new QMutex();
    is->subpq_cond  = new QWaitCondition();

    is->video_current_pts_time = av_gettime();

    packet_queue_init(&audioq);

    packet_queue_init(&videoq);
    is->audioq = audioq;
    is->videoq = videoq;
    AVPacket* packet2  = new AVPacket();

    ccontext->get_buffer = our_get_buffer;
    ccontext->release_buffer = our_release_buffer;

    av_init_packet(packet2);
    while(inst->keepGoing)
    {

        if(av_read_frame(context,packet2) < 0 && keepGoing)
        {
            printf("bufferframe Could not read a frame from stream.\n");
            fflush( stdout );

        }else {

            if(packet2->stream_index == 0) {
                packet_queue_put(&videoq, packet2);
            } else if(packet2->stream_index == 1) {
                packet_queue_put(&audioq, packet2);
            } else {
                av_free_packet(packet2);
            }

            if(!videoThreadStarted)
            {
                videoThreadStarted = true;
                QThread* thread = new QThread;
                videoThread = new VideoStreamWorker(this);

                // Give QThread ownership of Worker Object
                videoThread->moveToThread(thread);
                connect(videoThread, SIGNAL(error(QString)), this, SLOT(errorHandler(QString)));
                QObject::connect(videoThread, SIGNAL(refreshNeeded()), this, SLOT(refreshNeededSlot()));
                connect(thread, SIGNAL(started()), videoThread, SLOT(doWork()));
                connect(videoThread, SIGNAL(finished()), thread, SLOT(quit()));
                connect(videoThread, SIGNAL(finished()), videoThread, SLOT(deleteLater()));
                connect(thread, SIGNAL(finished()), thread, SLOT(deleteLater()));

                thread->start();
            }

            if(!audioThreadStarted)
            {
                audioThreadStarted = true;
                QThread* thread = new QThread;
                AudioStreamWorker* videoThread = new AudioStreamWorker(this);

                // Give QThread ownership of Worker Object
                videoThread->moveToThread(thread);

                // Connect videoThread error signal to this errorHandler SLOT.
                connect(videoThread, SIGNAL(error(QString)), this, SLOT(errorHandler(QString)));

                // Connects the thread’s started() signal to the process() slot in the videoThread, causing it to start.
                connect(thread, SIGNAL(started()), videoThread, SLOT(doWork()));
                connect(videoThread, SIGNAL(finished()), thread, SLOT(quit()));
                connect(videoThread, SIGNAL(finished()), videoThread, SLOT(deleteLater()));

                // Make sure the thread object is deleted after execution has finished.
                connect(thread, SIGNAL(finished()), thread, SLOT(deleteLater()));

                thread->start();
            }

        }

    } //finished main loop

    int MyApp::video_thread() {
    //VideoState *is = (VideoState *)arg;
    AVPacket pkt1, *packet = &pkt1;
    int len1, frameFinished;

    double pts;
    pic = avcodec_alloc_frame();

    for(;;) {
        if(packet_queue_get(&videoq, packet, 1) < 0) {
            // means we quit getting packets
            break;
        }

        pts = 0;

        global_video_pkt_pts2 = packet->pts;
        // Decode video frame
        len1 =  avcodec_decode_video2(ccontext, pic, &frameFinished, packet);
        if(packet->dts == AV_NOPTS_VALUE
                && pic->opaque && *(uint64_t*)pic->opaque != AV_NOPTS_VALUE) {
            pts = *(uint64_t *)pic->opaque;
        } else if(packet->dts != AV_NOPTS_VALUE) {
            pts = packet->dts;
        } else {
            pts = 0;
        }
        pts *= av_q2d(is->video_st->time_base);
        // Did we get a video frame?

                if(frameFinished) {
                    pts = synchronize_video(is, pic, pts);
                    actualPts = pts;
                    refreshSlot();
                }
                av_free_packet(packet);
    }
    av_free(pic);
    return 0;
}

int MyApp::audio_thread() {
    //VideoState *is = (VideoState *)arg;
    AVPacket pkt1, *packet = &pkt1;
    int len1, frameFinished;
    ALuint source;
    ALenum format = 0;
    //   ALuint frequency;
    ALenum alError;
    ALint val2;
    ALuint buffers[NUM_BUFFERS];
    int dataSize;

    ALCcontext *aContext;
    ALCdevice *device;
    if (!alutInit(NULL, NULL)) {
        // printf(stderr, "init alut error\n");
    }
    device = alcOpenDevice(NULL);
    if (device == NULL) {
        // printf(stderr, "device error\n");
    }

    //Create a context
    aContext = alcCreateContext(device, NULL);
    alcMakeContextCurrent(aContext);
    if(!(aContext)) {
        printf("Could not create the OpenAL context!\n");
        return 0;
    }

    alListener3f(AL_POSITION, 0.0f, 0.0f, 0.0f);

    //ALenum alError;
    if(alGetError() != AL_NO_ERROR) {
        cout << "could not create buffers";
        cout.flush();
        fflush( stdout );
        return 0;
    }
    alGenBuffers(NUM_BUFFERS, buffers);
    alGenSources(1, &source);
    if(alGetError() != AL_NO_ERROR) {
        cout << "after Could not create buffers or the source.\n";
        cout.flush(  );
        return 0;
    }

    int i;
    int indexOfPacket;
    double pts;
    //double pts;
    int n;

    for(i = 0; i < NUM_BUFFERS; i++)
    {
        if(packet_queue_get(&audioq, packet, 1) < 0) {
            // means we quit getting packets
            break;
        }
        cout << "streamindex=audio \n";
        cout.flush(  );
        //printf("before decode  audio\n");
        //fflush( stdout );
        // AVPacket *packet = new AVPacket();//malloc(sizeof(AVPacket*));
        AVFrame *decodedFrame = NULL;
        int gotFrame = 0;
        // AVFrame* decodedFrame;

        if(!decodedFrame) {
            if(!(decodedFrame = avcodec_alloc_frame())) {
                cout << "Run out of memory, stop the streaming...\n";
                fflush( stdout );
                cout.flush();

                return -2;
            }
        } else {
            avcodec_get_frame_defaults(decodedFrame);
        }

        int  len = avcodec_decode_audio4(audioc, decodedFrame, &gotFrame, packet);
        if(len < 0) {
            cout << "Error while decoding.\n";
            cout.flush(  );

            return -3;
        }
        if(len < 0) {
            /* if error, skip frame */
            is->audio_pkt_size = 0;
            //break;
        }
        is->audio_pkt_data += len;
        is->audio_pkt_size -= len;

        pts = is->audio_clock;
        // *pts_ptr = pts;
        n = 2 * is->audio_st->codec->channels;
        is->audio_clock += (double)packet->size/
                (double)(n * is->audio_st->codec->sample_rate);
        if(gotFrame) {
            cout << "got audio frame.\n";
            cout.flush(  );
            // We have a buffer ready, send it
            dataSize = av_samples_get_buffer_size(NULL, audioc->channels,
                    decodedFrame->nb_samples, audioc->sample_fmt, 1);

            if(!format) {
                if(audioc->sample_fmt == AV_SAMPLE_FMT_U8 ||
                        audioc->sample_fmt == AV_SAMPLE_FMT_U8P) {
                    if(audioc->channels == 1) {
                        format = AL_FORMAT_MONO8;
                    } else if(audioc->channels == 2) {
                        format = AL_FORMAT_STEREO8;
                    }
                } else if(audioc->sample_fmt == AV_SAMPLE_FMT_S16 ||
                        audioc->sample_fmt == AV_SAMPLE_FMT_S16P) {
                    if(audioc->channels == 1) {
                        format = AL_FORMAT_MONO16;
                    } else if(audioc->channels == 2) {
                        format = AL_FORMAT_STEREO16;
                    }
                }

                if(!format) {
                    cout << "OpenAL can't open this format of sound.\n";
                    cout.flush(  );

                    return -4;
                }
            }
            printf("albufferdata audio b4.\n");
            fflush( stdout );
            alBufferData(buffers[i], format, *decodedFrame->data, dataSize, decodedFrame->sample_rate);
            cout << "after albufferdata all buffers \n";
            cout.flush(  );
            av_free_packet(packet);
            //=av_free(packet);
            av_free(decodedFrame);

            if((alError = alGetError()) != AL_NO_ERROR) {
                printf("Error while buffering.\n");

                printAlError(alError);
                return -6;
            }
        }
    }

    cout << "before quoe buffers \n";
    cout.flush();
    alSourceQueueBuffers(source, NUM_BUFFERS, buffers);
    cout << "before play.\n";
    cout.flush();
    alSourcePlay(source);
    cout << "after play.\n";
    cout.flush();
    if((alError = alGetError()) != AL_NO_ERROR) {
        cout << "error strating stream.\n";
        cout.flush();
        printAlError(alError);
        return 0;
    }

    // AVPacket *pkt = &is->audio_pkt;

    while(keepGoing)
    {
        while(packet_queue_get(&audioq, packet, 1)  >= 0) {
            // means we quit getting packets

            do {
                alGetSourcei(source, AL_BUFFERS_PROCESSED, &val2);
                usleep(SLEEP_BUFFERING);
            } while(val2 <= 0);
            if(alGetError() != AL_NO_ERROR)
            {
                fprintf(stderr, "Error gettingsource :(\n");
                return 1;
            }

            while(val2--)
            {

                ALuint buffer;
                alSourceUnqueueBuffers(source, 1, &buffer);
                if(alGetError() != AL_NO_ERROR)
                {
                    fprintf(stderr, "Error unqueue buffers :(\n");
                    //  return 1;
                }
                AVFrame *decodedFrame = NULL;
                int gotFrame = 0;
                // AVFrame* decodedFrame;

                if(!decodedFrame) {
                    if(!(decodedFrame = avcodec_alloc_frame())) {
                        cout << "Run out of memory, stop the streaming...\n";
                        //fflush( stdout );
                        cout.flush();

                        return -2;
                    }
                } else {
                    avcodec_get_frame_defaults(decodedFrame);
                }

                int  len = avcodec_decode_audio4(audioc, decodedFrame, &gotFrame, packet);
                if(len < 0) {
                    cout << "Error while decoding.\n";
                    cout.flush(  );
                    is->audio_pkt_size = 0;
                    return -3;
                }

                is->audio_pkt_data += len;
                is->audio_pkt_size -= len;
                if(packet->size <= 0) {
                    /* No data yet, get more frames */
                    //continue;
                }

                if(gotFrame) {
                    pts = is->audio_clock;
                    len = synchronize_audio(is, (int16_t *)is->audio_buf,
                            packet->size, pts);
                    is->audio_buf_size = packet->size;
                    pts = is->audio_clock;
                    // *pts_ptr = pts;
                    n = 2 * is->audio_st->codec->channels;
                    is->audio_clock += (double)packet->size /
                            (double)(n * is->audio_st->codec->sample_rate);
                    if(packet->pts != AV_NOPTS_VALUE) {
                        is->audio_clock = av_q2d(is->audio_st->time_base)*packet->pts;
                    }
                    len = av_samples_get_buffer_size(NULL, audioc->channels,
                            decodedFrame->nb_samples, audioc->sample_fmt, 1);
                    alBufferData(buffer, format, *decodedFrame->data, len, decodedFrame->sample_rate);
                    if(alGetError() != AL_NO_ERROR)
                    {
                        fprintf(stderr, "Error buffering :(\n");
                        return 1;
                    }
                    alSourceQueueBuffers(source, 1, &buffer);
                    if(alGetError() != AL_NO_ERROR)
                    {
                        fprintf(stderr, "Error queueing buffers :(\n");
                        return 1;
                    }
                }

            }

            alGetSourcei(source, AL_SOURCE_STATE, &val2);
            if(val2 != AL_PLAYING)
                alSourcePlay(source);

        }

        //pic = avcodec_alloc_frame();
    }
    qDebug() << "end audiothread";
    return 1;
}

void MyApp::refreshSlot()
{

    if(true)
    {

        printf("got frame %d, %d\n", pic->width, ccontext->width);
        fflush( stdout );

        sws_scale(img_convert_ctx, (const uint8_t **)pic->data, pic->linesize,
                0, originalVideoHeight, &picrgb->data[0], &picrgb->linesize[0]);

        printf("rescaled frame %d, %d\n", newVideoWidth, newVideoHeight);
        fflush( stdout );
        //av_free_packet(packet);
        //av_init_packet(packet);

        qDebug() << "waking audio as video finished";
        ////mutex.unlock();
        //mutex2.lock();
        doingVideoFrame = false;
        //doingAudioFrame = false;
        ////mutex2.unlock();

        //mutex2.unlock();
        //w2->wakeAll();
        //w->wakeAll();
        qDebug() << "now woke audio";

        //pic = picrgb;
        uint8_t *srcy = picrgb->data[0];
        uint8_t *srcu = picrgb->data[1];
        uint8_t *srcv = picrgb->data[2];
        printf("got src yuv frame %d\n", &srcy);
        fflush( stdout );
        unsigned char *ptr = NULL;
        screen_get_buffer_property_pv(mScreenPixelBuffer, SCREEN_PROPERTY_POINTER, (void**) &ptr);
        unsigned char *y = ptr;
        unsigned char *u = y + (newVideoHeight * mStride) ;
        unsigned char *v = u + (newVideoHeight * mStride) / 4;
        int i = 0;
        printf("got buffer  picrgbwidth= %d \n", newVideoWidth);
        fflush( stdout );
        for ( i = 0; i < newVideoHeight; i++)
        {
            int doff = i * mStride;
            int soff = i * picrgb->linesize[0];
            memcpy(&y[doff], &srcy[soff], newVideoWidth);
        }

        for ( i = 0; i < newVideoHeight / 2; i++)
        {
            int doff = i * mStride / 2;
            int soff = i * picrgb->linesize[1];
            memcpy(&u[doff], &srcu[soff], newVideoWidth / 2);
        }

        for ( i = 0; i < newVideoHeight / 2; i++)
        {
            int doff = i * mStride / 2;
            int soff = i * picrgb->linesize[2];
            memcpy(&v[doff], &srcv[soff], newVideoWidth / 2);
        }
        printf("before posttoscreen \n");
        fflush( stdout );

        video_refresh_timer();
        qDebug() << "end refreshslot";

    }
    else
    {

    }

}

void  MyApp::refreshNeededSlot2()
    {
        printf("blitting to buffer");
        fflush(stdout);

        screen_buffer_t screen_buffer;
        screen_get_window_property_pv(mScreenWindow, SCREEN_PROPERTY_RENDER_BUFFERS, (void**) &screen_buffer);
        int attribs[] = { SCREEN_BLIT_SOURCE_WIDTH, newVideoWidth, SCREEN_BLIT_SOURCE_HEIGHT, newVideoHeight, SCREEN_BLIT_END };
        int res2 = screen_blit(mScreenCtx, screen_buffer, mScreenPixelBuffer, attribs);
        printf("dirty rectangles");
        fflush(stdout);
        int dirty_rects[] = { 0, 0, newVideoWidth, newVideoHeight };
        screen_post_window(mScreenWindow, screen_buffer, 1, dirty_rects, 0);
        printf("done screneposdtwindow");
        fflush(stdout);

    }

void MyApp::video_refresh_timer() {
    testDelay = 0;
    //  VideoState *is = ( VideoState* )userdata;
    VideoPicture *vp;
    //double pts = 0    ;
    double actual_delay, delay, sync_threshold, ref_clock, diff;

    if(is->video_st) {
        if(false)////is->pictq_size == 0)
        {
            testDelay = 1;
            schedule_refresh(is, 1);
        } else {
            // vp = &is->pictq[is->pictq_rindex];

            delay = actualPts - is->frame_last_pts; /* the pts from last time */
            if(delay <= 0 || delay >= 1.0) {
                /* if incorrect delay, use previous one */
                delay = is->frame_last_delay;
            }
            /* save for next time */
            is->frame_last_delay = delay;
            is->frame_last_pts = actualPts;

            is->video_current_pts = actualPts;
            is->video_current_pts_time = av_gettime();
            /* update delay to sync to audio */
            ref_clock = get_audio_clock(is);
            diff = actualPts - ref_clock;

            /* Skip or repeat the frame. Take delay into account
     FFPlay still doesn't "know if this is the best guess." */
            sync_threshold = (delay > AV_SYNC_THRESHOLD) ? delay : AV_SYNC_THRESHOLD;
            if(fabs(diff) < AV_NOSYNC_THRESHOLD) {
                if(diff <= -sync_threshold) {
                    delay = 0;
                } else if(diff >= sync_threshold) {
                    delay = 2 * delay;
                }
            }
            is->frame_timer += delay;
            /* computer the REAL delay */
            actual_delay = is->frame_timer - (av_gettime() / 1000000.0);
            if(actual_delay < 0.010) {
                /* Really it should skip the picture instead */
                actual_delay = 0.010;
            }
            testDelay = (int)(actual_delay * 1000 + 0.5);
            schedule_refresh(is, (int)(actual_delay * 1000 + 0.5));
            /* show the picture! */
            //video_display(is);

            // SDL_CondSignal(is->pictq_cond);
            // SDL_UnlockMutex(is->pictq_mutex);
        }
    } else {
        testDelay = 100;
        schedule_refresh(is, 100);

    }
}

void MyApp::schedule_refresh(VideoState *is, int delay) {
    qDebug() << "start schedule refresh timer" << delay;
    typeOfEvent = FF_REFRESH_EVENT2;
    w->wakeAll();
    //  SDL_AddTimer(delay,

} 
```

我目前正在通过以下方式循环等待数据

```
QMutex mutex;
    mutex.lock();
    while(keepGoing)
    {

        qDebug() << "MAINTHREAD" << testDelay;

        w->wait(&mutex);
        mutex.unlock();
        qDebug() << "MAINTHREAD past wait";

        if(!keepGoing)
        {
            break;
        }
        if(testDelay > 0 && typeOfEvent == FF_REFRESH_EVENT2)
        {
            usleep(testDelay);
            refreshNeededSlot2();
        }
        else   if(testDelay > 0 && typeOfEvent == FF_QUIT_EVENT2)
        {
            keepGoing = false;
            exit(0);
            break;
            // usleep(testDelay);
            // refreshNeededSlot2();
        }
        qDebug() << "MAINTHREADend";
        mutex.lock();

    }
    mutex.unlock(); 
```

如果我需要提供更多相关代码，请告诉我。很抱歉我的代码不整洁——我还在学习 c++，并且已经修改了这个代码一个多星期了，如前所述。

刚刚添加了一个我从打印输出中看到的输出样本到控制台 - 我无法理解它（这对于我的专业水平来说几乎太复杂了）但是当你看到正在播放的帧和正在播放的音频时很难放弃，尤其是当我花了几个星期才达到这个阶段时。

如果他们发现问题，请帮助我。

MAINTHREAD 在 syncvideo= 1073394046 得到第 640 帧后过去的等待点，640 开始 video_refresh_timer 实际点 = 1.66833 帧 lastpts = 1.63497 开始计划刷新计时器需要延迟 123

syncvideo 之后的 pts= 1073429033 得到帧 640，刷新前 640 MAINTHREAD 循环延迟 = 123 开始 video_refresh_timer 实际pts = 1.7017 帧 lastpts = 1.66833 开始计划刷新计时器需要延迟 115

MAINTHREAD 在 syncvideo= 1073464021 得到第 640 帧后过去的等待点，640 开始 video_refresh_timer 实际点 = 1.73507 帧 lastpts = 1.7017 开始计划刷新计时器需要延迟 140

刷新前的 MAINTHREAD 循环延迟 = 140 点后同步视频 = 1073499008 得到帧 640, 640 开始 video_refresh_timer 实际点 = 1.76843 帧 lastpts = 1.73507 开始计划刷新计时器需要延迟 163

MAINTHREAD 在 syncvideo= 1073533996 得到第 640 帧后过去的等待点，640 开始 video_refresh_timer actualpts = 1.8018 帧 lastpts = 1.76843 开始计划刷新计时器需要延迟 188

刷新前的 MAINTHREAD 循环延迟 = 188 点后同步视频 = 1073568983 得到帧 640, 640 开始 video_refresh_timer 实际点 = 1.83517 帧 lastpts = 1.8018 开始计划刷新计时器需要延迟 246

MAINTHREAD 在 syncvideo= 1073603971 得到第 640 帧后过去的等待点，640 开始 video_refresh_timer actualpts = 1.86853 帧 lastpts = 1.83517 开始计划刷新计时器需要延迟 299

刷新前的 MAINTHREAD 循环延迟 = 299 点后同步视频 = 1073638958 得到帧 640, 640 开始 video_refresh_timer 实际点 = 1.9019 帧 lastpts = 1.86853 开始计划刷新计时器需要延迟 358

MAINTHREAD 在 syncvideo= 1073673946 得到第 640 帧后过去的等待点，640 开始 video_refresh_timer 实际点 = 1.93527 帧 lastpts = 1.9019 开始计划刷新计时器需要延迟 416

刷新前的 MAINTHREAD 循环延迟 = 416 pts 后 syncvideo = 1073708933 得到帧 640, 640 开始 video_refresh_timer 实际pts = 1.96863 帧 lastpts = 1.93527 开始计划刷新计时器需要延迟 474

MAINTHREAD 在 syncvideo= 1073742872 获得第 640 帧后过去的等待点，刷新前 640 MAINTHREAD 循环延迟 = 474 开始 video_refresh_timer 实际点 = 2.002 帧 lastpts = 1.96863 开始计划刷新计时器需要延迟 518

MAINTHREAD 在 syncvideo= 1073760366 得到第 640 帧后过去的等待点，640 开始 video_refresh_timer 实际点 = 2.03537 帧 lastpts = 2.002 开始计划刷新计时器需要延迟 575

# windows-phone-8 - 让 Windows Phone 8 使用网络连接接口

> ID：15741660
> 
> 赞同：1
> 
> 时间：2013-04-01T10:23:56.147
> 
> 标签：windows-phone-8, windows-phone-8-emulator

我正在为 Windows Phone 8 编写一个测试应用程序并在模拟器中进行测试。我想创建一个 UDP 套接字并确定使用的本地套接字端点。我遇到的问题是模拟器有两个网络接口，其中只有一个具有外部网络连接。默认情况下，使用未连接的接口。创建套接字时如何确保使用正确的适配器？

```
Socket m_socket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
m_socket.SetNetworkPreference(NetworkSelectionCharacteristics.NonCellular);

SocketAsyncEventArgs receiveArgs = new SocketAsyncEventArgs();
receiveArgs.RemoteEndPoint = new IPEndPoint(IPAddress.Any, 0);
receiveArgs.SetBuffer(new Byte[2048], 0, 2048);
receiveArgs.Completed += SocketRead_Completed;

// If I bind to the specific IP address of the connected adapter it will work.
//m_socket.Bind(new IPEndPoint(IPAddress.Parse("10.1.1.7"), 0));

// if I leave it up to WP8 the wrong adapter gets used.
m_socket.Bind(new IPEndPoint(IPAddress.Any, 0));

m_socket.ReceiveAsync(receiveArgs); 
```

# php - PHP：检查整数是否在某个区间内

> ID：15741673
> 
> 赞同：8
> 
> 时间：2013-04-01T10:24:55.943
> 
> 标签：php, symfony, attributes, doctrine

我目前正在为一个小型在线游戏开发成就系统。成就实体基本上有4个属性：

*   ID
*   赚取的
*   赚到
*   进步

最后一个应该是百分比，意思是 0 到 100 之间的数字。为了确保没有大于 100 或小于 0 的数字保存在数据库中，我的 setter 方法如下所示（我正在使用Symfony2 / Doctrine ORM）：

```
public function setProgress($progress)
    {
        $this->progress = max(min($progress, 100), 0);

        return $this;
    } 
```

这里重要的一行是`max(min($progress, 100), 0)`.

它工作得很好，我只是想问一下，PHP 中是否有另一个内置函数正在做这件事，以及我所做的是否可以（关于良好的开发风格）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T23:13:39.667

自 PHP 5.2 起，一些[`filter_var()`](http://php.net/manual/en/function.filter-var.php)函数具有相当多的可用[选项](http://www.php.net/manual/en/filter.filters.php)。

其中一个可让您检查数字是否在一个范围内：

```
$param = 10;

$result = filter_var( $param, FILTER_VALIDATE_INT, [
    'options' => [
        'min_range' => 20, 
        'max_range' => 40
    ]
]);

var_dump( $result ); // will return FALSE for 10 
```

[http://codepad.viper-7.com/kVwx7L](http://codepad.viper-7.com/kVwx7L)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T10:50:21.607

您应该考虑从Symfony2[的验证组件](http://symfony.com/doc/current/book/validation.html)中为您的实体添加一些约束。

```
use Symfony\Component\Validator\Constraints as Assert;

class Achievement
{
   /**
    * @Assert\Range(min=0, max=100)
    */
    protected progress;
} 
```

例如在验证表单时会自动调用验证器服务，但您甚至可以通过获取验证器服务来手动调用它，例如在您的控制器中。

```
$achievement = new Achievement();
$errors = $this->get('validator')->validate($achievement); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T10:50:05.520

您可以使用[`Range`](http://symfony.com/doc/master/reference/constraints/Range.html)约束：

```
use Symfony\Component\Validator\Constraints\Range;

class Achievement
{
    /**
     * @Range(min=0, max=100)
     */
    private $progress;
} 
```

[Symfony 中的验证](http://symfony.com/doc/master/book/validation.html)由一个单独的层处理，因此您*不*应该在 setter 中进行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T10:46:13.427

简短的回答是*否定*的，PHP 中没有内置函数可以在上下边界“截断”数字。写起来真的很好`min(max(x, max_value), min_value)`——它简短易读。

# c# - 如何在字典中查找值> 0且键匹配某个字符串模式的键值对？

> ID：15741674
> 
> 赞同：7
> 
> 时间：2013-04-01T10:24:57.630
> 
> 标签：c#, linq, dictionary

这是一本字典，

```
Dictionary<string, uint> oSomeDictionary = new Dictionary<string, uint>();

oSomeDictionary.Add("dart1",1);
oSomeDictionary.Add("card2",1);
oSomeDictionary.Add("dart3",2);
oSomeDictionary.Add("card4",0);
oSomeDictionary.Add("dart5",3);
oSomeDictionary.Add("card6",1);
oSomeDictionary.Add("card7",0); 
```

`oSomeDictionary`如何从以字符串“card”开头且值大于零的键获取键/值对？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-01T10:26:32.707

```
var result = oSomeDictionary.Where(r=> r.Key.StartsWith("card") && r.Value > 0); 
```

输出：

```
foreach (var item in result)
{
    Console.WriteLine("Key: {0}, Value: {1}", item.Key, item.Value);
} 
```

输出：

```
Key: card2, Value: 1
Key: card6, Value: 1 
```

*记得包括在内`using System.Linq`*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T10:26:52.943

您可以使用[Enumerable.Where](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.where.aspx)过滤字典元素

```
var result = oSomeDictionary.Where(c=>c.Key.StartsWith("card")  && c.Value > 0) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T10:27:47.023

您可以使用[`IEnumerable.Where()`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.where.aspx)和[`String.StartsWith()`](http://msdn.microsoft.com/en-us/library/baketfxw.aspx)方法，例如；

```
Dictionary<string, uint> oSomeDictionary = new Dictionary<string, uint>();

oSomeDictionary.Add("dart1", 1);
oSomeDictionary.Add("card2", 1);
oSomeDictionary.Add("dart3", 2);
oSomeDictionary.Add("card4", 0);
oSomeDictionary.Add("dart5", 3);
oSomeDictionary.Add("card6", 1);
oSomeDictionary.Add("card7", 0);

var yourlist = oSomeDictionary.Where(n => n.Key.StartsWith("card") && n.Value > 0);

foreach (var i in yourlist)
{
    Console.WriteLine("Key: {0}, Value: {1}", i.Key, i.Value);
} 
```

输出将是：

```
Key: card2, Value: 1
Key: card6, Value: 1 
```

这是一个[`DEMO`](http://ideone.com/cqIUcE).

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-01T10:35:56.877

```
class Program
    {
        private static void Main(string[] args)
        {
            Dictionary<string, uint> oSomeDictionary = new Dictionary<string, uint>();

            oSomeDictionary.Add("dart1", 1);
            oSomeDictionary.Add("card2", 1);
            oSomeDictionary.Add("dart3", 2);
            oSomeDictionary.Add("card4", 0);
            oSomeDictionary.Add("dart5", 3);
            oSomeDictionary.Add("card6", 1);
            oSomeDictionary.Add("card7", 0);

            var result = oSomeDictionary.Where(pair => pair.Key.StartsWith("card") && pair.Value > 0 );
            foreach (var kvp in result)
            {
                Console.WriteLine("{0} : {1}",kvp.Key,kvp.Value);
            }
            Console.ReadLine();
        }
   } 
```

上面的完整工作代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-01T10:27:23.897

`Dictionary`实现`<IEnumerable<KeyValuePair<TKey,TValue>>`，因此您可以使用简单的 LINQ 扩展方法对其进行迭代

```
var pairs = oSomeDictionary.Where(pair => pair.Key.StartsWith("card") && 
                                          pair.Value > 0);

Console.WriteLine (string.Join(Environment.NewLine, pairs)); 
```

印刷：

```
[card2, 1]
[card6, 1] 
```

# ruby-on-rails-3 - 已删除出现在 github 提交历史中的提交

> ID：15741675
> 
> 赞同：0
> 
> 时间：2013-04-01T10:24:58.063
> 
> 标签：ruby-on-rails-3, version-control, github

我了解以下命令会删除以前对 github 的提交 (^ = ntimes)

```
git push -f origin HEAD^^:master 
```

我想删除最后两个提交，现在当我进行更多本地更改时，

```
git add . 
git commit -m "example"
git push origin master 
```

我删除的提交再次出现？

我的意思是在跑步时

```
git status 
```

我明白了

您的分支领先于 'origin/master' 2 次提交。

所以之前的 2 个提交在那里

我需要做的任何事情来阻止这种情况的发生

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:37:48.840

回答是否有人遇到此问题，或者是否有人作为更好的方法让我们知道。反正我跑了

```
git reset --soft HEAD^^1 
```

我猜这撤消了我的最后两次提交，这让我保持了最新状态。然后我就可以正常运行了

```
git add .
git commit -m "message"
git push origin master 
```

以及之前所有未包含的提交

# c++ - 复杂/双精度类型的运算符重载“+”

> ID：15741676
> 
> 赞同：2
> 
> 时间：2013-04-01T10:25:05.247
> 
> 标签：c++

我只将有用的信息放在 Complex.cpp 中。

这是我的问题：我使类变得复杂，这意味着它可以进行复杂的计算。在`+`运算符中我想启用 complex + double，但我只能使用 complex + double in `main.cpp`。当我使用双变量+复数时出现错误。这是为什么？我可以修复它吗？

### 复杂的.h

```
#ifndef COMPLEX_H
#define COMPLEX_H
using namespace std;
class Complex
{
public:
    Complex( double = 0.0, double = 0.0 ); // constructor
    Complex operator+( const Complex & ) const; // addition
    Complex operator-( const Complex & ) const; // subtraction
    Complex operator*( const Complex & ) const; // mul
    bool operator==( const Complex & ) const;
    bool operator!=( const Complex & ) const;
    friend ostream &operator<<( ostream & , const Complex& ); 
    friend istream &operator>>( istream & , Complex& );
    Complex operator+( const double & ) const;
    //Complex &operator+( const double & ) const;
    void print() const; // output
private:
    double real; // real part
    double imaginary; // imaginary part
}; // end class Complex

#endif 
```

### 复杂的.cpp

```
Complex Complex::operator+( const Complex &operand2 ) const
{
    return Complex( real + operand2.real,imaginary + operand2.imaginary );
} // end function operator+

Complex Complex::operator+(const double &operand2) const
{
    return Complex( real + operand2 , this->imaginary );
} 
```

### 主文件

```
int main()
{
Complex x;
Complex y( 4.3, 8.2 );
Complex z( 3.3, 1.1 );

    double ss = 5;
    x = z + ss;
    x = ss + z;//this syntax is illegal 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T10:32:15.250

为了让您的类显示为右手操作数，操作员必须是非成员。因为（在这种情况下）它需要访问私有成员，所以它必须是一个朋友：

```
class Complex {
    // ...
    friend Complex operator+(double lhs, const Complex & rhs);
};

Complex operator+(double lhs, const Complex & rhs) {
    return Complex(lhs+rhs.real, rhs.imaginary);
} 
```

或者，由于您已经有一个成员以相反的方式接受参数，并且加法是对称的，您可以定义一个非成员、非朋友函数：

```
Complex operator+(double lhs, const Complex& rhs) {
    return rhs + lhs;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T10:34:22.527

`operator+`本质上是一个函数。`x = ss + z;`类似于`x = ss.operator(z);`But `ss`is `double`，内部没有`operator+`定义。您需要定义一个 out-of-class `operator+`。`friend`您可以在其他答案中建议的类似帮助下做到这一点，但如果没有：

```
Complex operator+(const double& x, const Complex& c)
{
    return (c + x);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T10:28:23.653

在这种情况下，您应该使用友元函数。

```
friend Complex operator+( const Complex&, const double & );
friend Complex operator+( const double&, const Complex&);
friend Complex operator+( const Complex&, const Complex&); 
```

简单示例： http: [//liveworkspace.org/code/A14xS](http://liveworkspace.org/code/A14xS) $0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T10:30:44.653

为此，您可以使用一个`friend`函数。将以下声明添加到您的班级

`friend Complex operator+(const double&, const Complex&)`

请注意，这不是类的成员函数，因此实现应如下所示：

```
Complex operator+(const double& x, const Complex& c)
{
    return Complex(c.real + x, c.imaginary);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T10:44:16.807

定义运算符时，应始终提供完整的集合。对于`operator+`，这也包括`operator+=`，因为用户会假设如果`cmpl = cmpl + 1.2`有效，那么`cmpl += 1.2`也应该有效。您甚至可以使用[Boost.Operators 之](http://www.boost.org/doc/libs/1_53_0/libs/utility/operators.htm)类的帮助程序库，或者，如果允许使用 C++11，还可以使用我的[df.operators](https://github.com/d-frey/operators/)来简化代码。对于`operator+`，您的代码将是：

```
#include <df/operators.hpp>

class Complex
  : df::commutative_addable< Complex >,
    df::commutative_addable< Complex, double >
{
public:
    Complex( double = 0.0, double = 0.0 ); // constructor
    Complex& operator+=( const Complex & ); // addition
    Complex& operator+=( const double & );

    // I skipped the rest...
}; 
```

这将自动提供必要的`operator+`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-01T13:11:04.670

定义一个成员函数，以及一个用于进行数学运算`operator+=(const Complex&)`的非成员函数。非成员函数不必是朋友。这是这类事情的常见模式。`operator+(const Complex&, const Complex)``operator+=`

# c# - LinqToSql 请求中的 C# 函数

> ID：15741680
> 
> 赞同：0
> 
> 时间：2013-04-01T10:25:16.490
> 
> 标签：c#, linq, linq-to-sql

我有一个问题。我需要在 linq to sql 请求中使用 c# 函数。例如：

```
 void request()
      {

            var db = new DataClasses1(connectionString);
            var result = 
                from a in db.Stats
                where Function(a.SourceName)
                select a;
        }
        bool Function(string sourceName)
        {

            return true;
        } 
```

这是行不通的，因为布尔函数（字符串源名称）无法更改为 sql 请求。在 linq to sql 中使用 c# 函数我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:32:26.073

如果您无法将函数转换为 linq2sql 语句，则无法执行此操作，但可以避免使用非 SQL 函数。

最后必须有一个**sql**来执行。

你可以做的是避免下面显示的非 sql 语句，

假设 a 是一个字符串，但您希望它是整数，

```
var int_a = int.Parse(a);
var result = from a in db.Stats
             where a==int_a
             select a; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T10:35:07.513

您的数据库不知道`Function`，所以分两步进行。

```
void request()
{
    var db = new DataClasses1(connectionString);
    var result = from a in db.Stats
                 select a;

    var finalResult = from b in a.AsEnumerable()
                      where Function(b.SourceName)
                      select b;
}
bool Function(string sourceName)
{
    return true;
} 
```

看看它是否有效

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T10:40:18.757

您只需要添加`AsEnumerable`到您的`linq`查询：

```
 void request()
  {

        var db = new DataClasses1(connectionString);
        var result = 
            from a in db.Stats.AsEnumerable()
            where Function(a.SourceName)
            select a;
    }
    bool Function(string sourceName)
    {

        return true;
    } 
```

# android - 从机场的列表视图中显示数据

> ID：15741687
> 
> 赞同：0
> 
> 时间：2013-04-01T10:25:42.457
> 
> 标签：android, android-listview, android-sqlite

我正在做一个项目，我想在 ListView 中显示机场列表。从本地数据库中检索机场名称。实际上我在 sqliteopenhelper 类中从数据库中获取所有数据

```
public List<AirportList> getAllAirportLists()
    {

        List<AirportList> airportList = new ArrayList<AirportList>();
        String selectQuery = "SELECT * FROM " + TABLE_AIRPORT;
        Log.i("query", selectQuery);

        SQLiteDatabase db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);
        if(cursor.moveToFirst())
        {
            do{
                AirportList airport = new AirportList();
                airport.setId(Integer.parseInt(cursor.getString(0)));
                airport.setName(cursor.getString(1));

            }while(cursor.moveToNext());
        }

        return airportList;

    } 
```

我是 android 新手，任何人都可以提供一个想法，以便在主类中调用此方法并在列表视图中显示机场列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:48:27.367

首先，在上面的方法中，您需要在“airportList”中添加您的机场对象，例如：

> `公共列表 getAllAirportLists() {

```
List<AirportList> airportList = new ArrayList<AirportList>();
String selectQuery = "SELECT * FROM " + TABLE_AIRPORT;
Log.i("query", selectQuery);

SQLiteDatabase db = this.getWritableDatabase();
Cursor cursor = db.rawQuery(selectQuery, null);
if(cursor.moveToFirst())
{
    do{
        AirportList airport = new AirportList();
        airport.setId(Integer.parseInt(cursor.getString(0)));
        airport.setName(cursor.getString(1));
        airportList.add(airport);
    }while(cursor.moveToNext());
}

return airportList; 
```

}`

然后在主类的 listView 中分配此列表。像：

> ```
> listView = (ListView) findViewById(R.id.listView);
> listView.setAdapter(new AppAdapter(airportList)); 
> ```

```
class AppAdapter extends ArrayAdapter<AirportList> {

        AppAdapter(List<AirportList> itemList) {
            super(YourAcitivity.this, R.layout.airport_item_list, itemList);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            if (null == convertView) {
                convertView = newView(parent);

            }
            bindView(position, convertView);
            return convertView;
        }

        private View newView(ViewGroup parent) {
            return getLayoutInflater().inflate(R.layout.airport_item_list, parent,
                    false);
        }

        private void bindView(int position, View row) {

        }
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-01T10:38:49.250

嘿首先检查以下教程

简单列表视图[简单列表](http://saigeethamn.blogspot.in/2010/04/simple-listview-android-developer.html)

自定义列表视图[自定义列表视图](http://saigeethamn.blogspot.in/2010/04/custom-listview-android-developer.html)

在创建适配器之前从数据获取列表并添加到适配器。

# iphone - 带有两行标签的 UIBarButtonItem 宽度

> ID：15741689
> 
> 赞同：0
> 
> 时间：2013-04-01T10:25:57.170
> 
> 标签：iphone, ios, objective-c, uinavigationbar, uibarbuttonitem

我想知道如何从 UIBarButtonItem 中的两行标签中去掉左右空格，它的视图由 setCustomView 设置，如下所示：

```
UIButton* forwardButton = [UIButton buttonWithType:101];

[forwardButton setTransform:CGAffineTransformMakeScale(-1.0, 1.0)];
[forwardButton.titleLabel setTransform:CGAffineTransformMakeScale(-1.0, 1.0)];

[forwardButton setTitle:@"Now\nPlaying" forState:UIControlStateNormal];
[forwardButton addTarget:self action:@selector(openPlayer) forControlEvents:UIControlEventTouchUpInside];

[forwardButton.titleLabel setNumberOfLines:2];
[forwardButton.titleLabel setLineBreakMode:NSLineBreakByWordWrapping];
[forwardButton.titleLabel setTextAlignment:NSTextAlignmentCenter];
[forwardButton.titleLabel setFont:[UIFont boldSystemFontOfSize:10]];

[navButton setCustomView:forwardButton]; 
```

[这](https://www.dropbox.com/s/wtjrdsogo7taffi/Screen%20Shot%202013-04-01%20at%201.16.41%20PM.png)是我得到的结果。

按钮的宽度就好像标签有这样的一行[文字](https://www.dropbox.com/s/i6iodu6q0p8ntgg/Screen%20Shot%202013-04-01%20at%201.17.19%20PM.png)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:37:11.500

您可以尝试更改按钮的边界。

```
UIButton* forwardButton = [UIButton buttonWithType:101];
[forwardButton setTransform:CGAffineTransformMakeScale(-1.0, 1.0)];
[forwardButton.titleLabel setTransform:CGAffineTransformMakeScale(-1.0, 1.0)];

[forwardButton setTitle:@"Now\nPlaying" forState:UIControlStateNormal];
[forwardButton.titleLabel setNumberOfLines:2];
[forwardButton.titleLabel setLineBreakMode:NSLineBreakByWordWrapping];
[forwardButton.titleLabel setTextAlignment:NSTextAlignmentCenter];
[forwardButton.titleLabel setFont:[UIFont boldSystemFontOfSize:10]];

forwardButton.bounds = CGRectMake(0, 0, 30, 30);

UIBarButtonItem* forwardButtonItem = [[UIBarButtonItem alloc] initWithCustomView: forwardButton];
self.navigationItem.rightBarButtonItem = forwardButtonItem; 
```

测试了这个并且有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:43:39.257

```
NSString   *titleStr=@"Now\Playing";
BarButton.titleLabel setLineBreakMode:UILineBreakModeWordWrap];

[BarButton setTitle:titleStr forState:UIControlStateNormal]; 
```

# ruby - Mongo 2.4 文本命令/使用 mongo-ruby-driver 的全文搜索

> ID：15741690
> 
> 赞同：1
> 
> 时间：2013-04-01T10:25:58.400
> 
> 标签：ruby, mongodb

我想对我的收藏进行全文搜索。因为我使用的是 mongo 2.4，所以我想用 mongodb 的[text 命令来做](http://docs.mongodb.org/manual/reference/command/text/#dbcmd.text)

在 mongo 的控制台中执行此操作的方法是（根据 mongo 的官方文档。）

```
db.collection.runCommand( "text", { search: <string> }) 
```

它返回预期的结果。

现在，我想在 ruby​​/rails 中实现相同的目标。我在用`mongo gem version 1.8.4`

根据他们的[更改日志/历史记录](https://github.com/mongodb/mongo-ruby-driver/wiki/History) ，支持新的 MongoDB 2.4 索引类型

但是我怎样才能`text command`用 ruby​​ 在一个集合上运行。

我浏览了这篇[博文](http://kylebanker.com/blog/2010/03/28/does-the-driver-support-feature-x/)。但它没有帮助

**更新：**

我试过，

```
 command = BSON::OrderedHash.new
  command['find'] = collection
  command['text'] = {'search' => 'string'}
  result = @db.command(command) 
```

但它给

```
Database command 'find' failed: (ok: '0.0'; errmsg: 'no such cmd: find'; bad cmd: '{"find"=>"project", "text"=>{"search"=>"string"}}'). 
```

**更新 2：**

[php](https://groups.google.com/forum/?fromgroups=#!searchin/mongodb-user/full%2420text%2420search%2420mongo/mongodb-user/59mNpQGa0xc/oHbsADcwd2sJ)也存在类似情况。我正在寻找 ruby​​ 的等价物。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T05:40:33.710

你只需要在 Ruby 1.8 中使用 BSON::OrderedHash。如果您运行的是 Ruby 1.9 或更高版本，您可以使用以下语法在文本索引上创建/查询。

```
require 'mongo'
include Mongo

client = MongoClient.new
db = client['my_database']
coll = db['my_collection']

# create a text index
coll.ensure_index({:field_name => Mongo::TEXT})

# run a text query
db.command({:text => 'my_collection', :search => 'search string'})
db.command({:text => 'my_collection', :search => 'search string', :filter => {:foo => 'bar'}}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T10:54:44.487

我这里没有工作 mongodb 安装，但以下应该可以解决问题：

```
command = OrderedHash.new
command['text'] = <collectionname>
command['search'] = <string>
result = @db.command(command) 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T11:47:33.007

我用了，

```
 command = {}
  command["text"] = collection_name
  command["search"] = "search_string"
  result = @db.command(command) 
```

看起来它有效。不过我会等待其他答案。

# cygwin - 如何使用 gcc 3.8.1 卸载 MinGW 并使 cygwin 'make' 作为默认的 make 程序

> ID：15741692
> 
> 赞同：21
> 
> 时间：2013-04-01T10:26:00.513
> 
> 标签：cygwin, mingw, uninstallation

1.  如何卸载 MinGW？

我已经为一些软件安装了它，但现在我根本不使用那个软件，所以我需要删除它`MinGW`才能使用 Cygwin 进行 android 开发。

2.  如何将 Cygwin 的“make”文件设置为默认值`GCC 3.8.1`？

我在 Windows 7 64 位

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-01T12:02:45.980

**答案1：**

1.  如果您使用过安装程序，请通过*程序管理器将其卸载*
2.  删除您的 MinGW 文件夹（例如`C:/MinGW`）
3.  `PATH`确保环境变量中没有 MinGW 路径

如果您没有使用安装程序，您可以跳过*1.*，但如果您有，则应手动检查*2.*和*3\. 。*

**答案 2：**

你使用 IDE 吗？如果是，您可以在那里指定您的 make / gcc。您也可以设置正确程序的绝对路径。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2020-01-08T13:15:59.623

我们无法使用程序管理器卸载 MinGW。只需删除文件夹和环境变量。

# oracle - 基于 2+ 表的 ORACLE 约束

> ID：15741697
> 
> 赞同：0
> 
> 时间：2013-04-01T10:26:13.350
> 
> 标签：oracle

我有以下三个表：

```
CREATE TABLE Flights (
  route_number INT NOT NULL PRIMARY KEY,
  operated_by INT NOT NULL,
  airplane_model  VARCHAR(30) NOT NULL,
  source VARCHAR(20),
  destination VARCHAR(20),
  FOREIGN KEY (operated_by) REFERENCES Airline(airline_id),
  FOREIGN KEY (airplane_model) REFERENCES Airplanes(airplane_id)
  );
CREATE TABLE outgoing (
  route_number INT NOT NULL PRIMARY KEY,
  poTime Date NOT NULL,
  FOREIGN KEY (route_number) REFERENCES Flights(route_number)
);

    CREATE TABLE incoming (
    route_number INT NOT NULL PRIMARY KEY,
    paTime date NOT NULL,
    FOREIGN KEY (route_number) REFERENCES Flights(route_number)
  );
  CREATE TABLE departures(
    depid int not null PRIMARY KEY,
  route_number INT NOT NULL,
   gate VARCHAR(3) NOT NULL,
    depT date NOT NULL,
    depD date NOT NULL,
status VARCHAR(10),
    FOREIGN KEY (route_number) REFERENCES Flights(route_number)
);  

      CREATE TABLE ARRIVALS(
  route_number INT NOT NULL,
   gate VARCHAR(3) NOT NULL,
    arrT date NOT NULL,
    arrD date NOT NULL,
status VARCHAR(10),
    arrid int not null PRIMARY KEY,
    FOREIGN KEY (route_number) REFERENCES Flights(route_number)
); 
```

我正在尝试创建一个约束，即在计划时间（paTime 和 poTime）的计划时间（paTime 和 poTime）间隔内，没有两个航班可以在计划时间周围有相同的登机口。

我想我应该创建一个视图并插入到视图中......但显然你不允许在可更新的视图表中使用子查询？我将如何添加此约束？

注：PaTime 和 PoTime 是计划到达时间和计划出发时间，而 arrT 和 depT 是实际到达和实际出发时间，允许不同。

所以基本上： 1\. 一个航班被添加到航班表中（不需要额外的约束） 2\. 如果它是一个入境航班，它的计划到达时间被添加到 Arrivals 表中（同样没有约束需要担心）。3\. 在 Arrivals 表中，将实际到达时间（可以与计划到达时间不同）、状态和门添加到表中。这是我需要约束的地方！检查此表和出发表中是否存在该门号，从他们的计划到达/出发时间开始 -1 到 +1 小时。所以对于这张表，我需要一种加入传入（用于 Patime）传出（用于 Potime）时间并检查约束的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:06:04.557

一个约束只能引用一个表。如果您需要使用此数据模型，则无法创建执行所需操作的约束。

你有几个选择

1.  `INSERT`您可以创建一个存储过程来执行新航班并实现您想要的任何验证，而不是创建约束。然后，您限制应用程序对表发出直接`INSERT`指令，并要求它改为使用存储过程。
2.  您可以保留现有数据模型并创建一个`ON COMMIT`物化视图，将出发和到达的数据组合起来，然后在该物化视图上创建一个约束。
3.  您可以修改数据模型，以便约束所需的所有信息都在一个表中。

# vb6 - 如何在VB6中打开或关闭Caps Lock键？

> ID：15741698
> 
> 赞同：1
> 
> 时间：2013-04-01T10:26:20.333
> 
> 标签：vb6

如何在 Visual Basic6 中打开或关闭 Caps Lock 键？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T11:46:03.340

由于**keybd_event**功能已被取代，**SendInput** ( [MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx) ) 是一种方法。顺便说一句，如果您打算在 VB6 中使用键盘做一些严肃的事情，请务必在此处查看 Carl E. Peterson 的文章和代码：http: [//vb.mvps.org/samples/SendInput/](http://vb.mvps.org/samples/SendInput/)

要设置 CapsLock 状态，可以使用以下代码（可选地放入标准模块）。 **SetCapsLockState** (True) 启用 CapsLock，而**SetCapsLockState** (False) 禁用它。

```
Option Explicit

Private Declare Function GetKeyState Lib "user32" _
    (ByVal nVirtKey As Long) As Integer
Private Declare Function MapVirtualKey Lib "user32" _
    Alias "MapVirtualKeyA" _
    (ByVal uCode As Long, ByVal uMapType As Long) As Long
Private Declare Function SendInput Lib "user32" _
    (ByVal nInputs As Long, pInputs As Any, ByVal cbSize As Long) As Long

Private Type KeyboardInput       '   typedef struct tagINPUT {
   dwType As Long                '     DWORD type;
   wVK As Integer                '     union {MOUSEINPUT mi;
   wScan As Integer              '            KEYBDINPUT ki;
   dwFlags As Long               '            HARDWAREINPUT hi;
   dwTime As Long                '     };
   dwExtraInfo As Long           '   }INPUT, *PINPUT;
   dwPadding As Currency         '
End Type

'SendInput constants
Private Const INPUT_KEYBOARD As Long = 1
Private Const KEYEVENTF_KEYUP As Long = 2

Private Const VK_CAPITAL = &H14

Public Function CapsLock() As Boolean
   ' Determine whether CAPSLOCK key is toggled on.
   CapsLock = CBool(GetKeyState(VK_CAPITAL) And 1)
End Function

Public Sub SetCapsLockState(bEnabled As Boolean)
    'CapsLock is already in desired state. Nothing to do.
    If CapsLock = bEnabled Then Exit Sub

    PressCapsLock
End Sub

Private Sub PressCapsLock()
    GenerateKeyboardEvent VK_CAPITAL, 0
    GenerateKeyboardEvent VK_CAPITAL, KEYEVENTF_KEYUP
End Sub

Private Sub GenerateKeyboardEvent(VirtualKey As Long, Flags As Long)
    Dim kevent As KeyboardInput

    With kevent
        .dwType = INPUT_KEYBOARD
        .wScan = MapVirtualKey(VirtualKey, 0)
        .wVK = VirtualKey
        .dwTime = 0
        .dwFlags = Flags
    End With
    SendInput 1, kevent, Len(kevent)
End Sub 
```

可以从这样的表单模块中调用它：

```
Option Explicit

Private Sub cmdCapsLockOff_Click()
    SetCapsLockState False
End Sub

Private Sub cmdCapsLockOn_Click()
    SetCapsLockState True
End Sub

Private Sub cmdShowState_Click()
    MsgBox "CapsLock is " & IIf(CapsLock, "ON", "OFF")
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T10:32:25.633

MS 知识库文章 177674：[如何切换 NUM LOCK、CAPS LOCK 和 SCROLL LOCK 键](http://support.microsoft.com/kb/177674)

# java - android将mp3解码为pcm数据的最快方法

> ID：15741701
> 
> 赞同：5
> 
> 时间：2013-04-01T10:26:40.340
> 
> 标签：java, android, mp3, decode

在我的应用程序中，我需要将 mp3 文件解码为 pcm 缓冲区。这是很多数据，所以我在读取和解码时将其下采样到单声道 22050Hz。

目前我正在使用 javazoom jlayer 解码器[http://www.javazoom.net/javalayer/javalayer.html](http://www.javazoom.net/javalayer/javalayer.html)

它可以工作，但速度很慢，在运行模式下解码一首 3 分钟的歌曲需要 30 秒，在调试模式下会老化。在我使用 libmpg 的 Windows 机器上，我可以在大约 1 秒内完成。

有没有更快的方法，任何人都知道肯定会更快？如果它没有明显更快，我不想浪费时间实施另一种方法。谢谢。

顺便说一句，在我的应用程序中，我需要将整个内容下载到内存中的 pcm 缓冲区，因此我对仅播放 mp3 文件的内容不感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T10:36:43.687

这是您在 android 中使用 Native 的时刻！

- 使用 NDK 并找到一个快速的 c/c++ 库（它们比 jlayer 快 20 倍，例如 18 秒内登录 9 分钟）

-这里有一些有用的库：

[http://www.mpg123.de/](http://www.mpg123.de/)

www underbit.com/products/mad/

www oracle.com/technetwork/java/javase/download-137625.html（不确定这个是否支持 MP3toPCM）

lame.sourceforge.net/about.php（这个在 github 上有一个 android 开源项目，我希望对你非常有用！ [https://github.com/intervigilium/liblame](https://github.com/intervigilium/liblame)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-11T15:45:51.300

JLayer 是原始 Fraunhofer mp3 C 代码的转换。可悲的是，转换它的人在整个代码中散布了大量不必要的缓冲区副本，因为他可能不太了解正在发生的事情（不是问题，那些事情发生了）。然而，结果是一个非常慢的 mp3 解码器。最终，我们开始删除所有不必要的缓冲区副本，并为 JLayer 源添加了精确的可搜索性。可以在[http://bpmdj.yellowcouch.org/credits.html](http://bpmdj.yellowcouch.org/credits.html)的 JLayer1.0.1 部分找到存储库和有关如何使用它的演示。结果比原来快了大约 2.5 倍。

# android - android如何编写蓝牙低功耗设备访问

> ID：15741708
> 
> 赞同：1
> 
> 时间：2013-04-01T10:27:07.710
> 
> 标签：android, bluetooth-lowenergy

我对 android 开发一无所知，但在 iOS 中，我们有一个名为 CoreBluetooth 的框架，用于蓝牙低功耗设备连接。

我们是否有 android 中的库来访问 BLE？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T09:38:14.350

Google 已宣布在 API 级别 18 中支持官方蓝牙 LE 的计划。请参阅此处：[http ://www.theverge.com/2013/5/15/4334882/google-adopts-bluetooth-smart-hints-android-update-within - 两个月](http://www.theverge.com/2013/5/15/4334882/google-adopts-bluetooth-smart-hints-android-update-within-two-months)

目前，HTC 提供了一个 API（当然，它适用于 HTC 设备）：

[http://www.htcdev.com/devcenter/opensense-sdk/partner-apis/bluetooth-low-energy/](http://www.htcdev.com/devcenter/opensense-sdk/partner-apis/bluetooth-low-energy/)

正如其他人所暗示的那样，三星肯定有一个秘密，因为一些蓝牙 LE 设备正在与三星设备配合使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:35:03.513

到目前为止，我认为 Android 本身并不支持 BLE。一些摩托罗拉设备据说具有 BLE 硬件，但我认为 API 级别没有任何东西可供我们使用。

[很多人在这个](https://code.google.com/p/android/issues/detail?id=33371)帖子里抱怨这个。你也可以加入。越早说服 Google 越好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T05:54:23.963

Htc 现在在 bluez 之上使用 Broadcom api，但将其命名为 htc 而不是 Broadcom，并且对类型进行了一些更改。

三星有一个秘密但有错误。

谷歌在去年 12 月和今年再次表示，BLE 将成为下一个重要功能。虽然没有发布。也许是安卓 5？

谷歌晚了几年。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-04T11:20:27.877

是的，谷歌终于宣布了一些与 BLE 相关的东西。查看此链接[http://developer.android.com/guide/topics/connectivity/bluetooth-le.html](http://developer.android.com/guide/topics/connectivity/bluetooth-le.html) 。

# c++ - 如何让每个子进程获得不同的客户端地址（UDP SOCKET）？

> ID：15741709
> 
> 赞同：4
> 
> 时间：2013-04-01T10:27:09.647
> 
> 标签：c++, linux, sockets, udp, fork

我有一个问题：
- 对于客户端发送的每条消息，服务器都会创建一个子进程（fork()），并且每条消息都由不同的子进程读取。
问题：
- 有什么办法可以删除 sockaddr_in 结构，这样当服务器再次进入无限循环时，它会等待不同的客户端，并且每个孩子都有不同的客户端地址。

```
A part of the server code:

    struct sockaddr_in from;
    int main(int argc, char *argv[]) {
            int32_t stringLen;
            initSocket();
            printf("waiting for a connection\n");
            while (true) {
                int n;
                socklen_t length = sizeof(struct sockaddr_in);
                n = recvfrom(sock, &stringLen, sizeof(stringLen), 0,
                        (struct sockaddr *) &from, &length);
                if (n > 0) {
                    int pid = fork();
                    printf("fork() pid = %d\n", pid);
                    if (pid < 0) {
                        error("handling request");
                    }
                    if (pid == 0) {
                        printf("Client connected...\n");
                        handle_request(stringLen);
                    }
                    cout << " PID : " << pid << endl;
                }
            }
        }

Thank you ! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:57:31.223

正如我的评论中已经提到的：读取是由同一个套接字上的所有进程完成的，因为后者在`fork()`ing 时是重复的。

您最好让父母阅读整条消息，然后`fork()`让孩子传递阅读的消息，然后重新开始阅读下一条消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:33:19.363

如果 fork() 创建了新的进程，同步操作可以简单地通过一个文件 IO 来进行。通过读写同一个配置文件，子进程可以从一个文件中获取可用的socket地址

# python - GAE：python代码检查我是在dev_appserver上还是部署到appspot

> ID：15741711
> 
> 赞同：4
> 
> 时间：2013-04-01T10:27:11.697
> 
> 标签：python, google-app-engine, oauth, dev-appserver

我的 GAE 应用程序使用 OAUTH 2。目前，我手动切换`redirect_uri`，`http://localhost:8081/oauth2callback`这`myapp.appspot.com/oauth2callback`取决于是否使用本地测试`dev_appserver`或部署到 appspot.com。

是否有一些代码（例如 using `os.environ`）可以用来自动执行此操作？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T10:38:59.433

您可以使用`os.environ['SERVER_NAME']`.

您也可以通过版本名称检查：

```
import os
if os.environ['APPLICATION_ID'].startswith('dev'):
  pass  # it's localhost
else:
  pass  # it's uploaded on gae 
```

如果您使用 webapp2，将更好地`self.uri_for('callback-uri-name', _full=True)`用于构建回调 uri。

你的路线中有这样的东西。

```
app = webapp2.WSGIApplication([
    webapp2.Route(r'/oauth/callback', handler='oauth.CallbackHandler', name='callback-uri-name'),
]) 
```

然后，如果你打电话`self.uri_for('callback-uri-name', _full=True)`，你会得到类似`http://localhost:8080/oauth/callback`or的东西`http://app-id.appspot.com/oauth/callback`。

更多信息：[http ://webapp-improved.appspot.com/guide/routing.html#building-uris](http://webapp-improved.appspot.com/guide/routing.html#building-uris)

# html - 两个链接重叠

> ID：15741712
> 
> 赞同：0
> 
> 时间：2013-04-01T10:27:14.040
> 
> 标签：html, hyperlink, overlapping

我遇到了 HTML 的问题。

我有一个包含链接图像的链接 div。当我单击图像时，我会打开（图像和 div 的）链接，而我只想打开图像一个。

我怎样才能让它工作？我需要当我点击整个 div 时，除了图像区域之外，我会到达 div 的链接，否则在图像的链接上。

在此先感谢，阿莱西奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:37:48.433

你可以这样做

```
<div id="mydiv" onclick="window.location.href=('Somepage.aspx')">
  Some text to fill the space... blah blah blah<br />
  <img id="myimg" onclick="window.location.href=('AnotherPage.html')" src="thisphoto.gif" />
</div> 
```

# 更新

您可以添加一个脚本来取消气泡，然后转发到您想要的页面它可能是两三行

```
<script type="text/vbscript" id="CancelMyBubble">
  function CancelMyBubble(link)
    window.event.cancelBubble = true
    window.location.href=link
  end function
</script>

<div id="mydiv" onclick="window.location.href=('Somepage.aspx')">
  Some text to fill the space... blah blah blah<br />
  <img id="myimg" src="shape1.jpg" onclick="CancelMyBubble('AnotherPage.html')" />
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:54:17.563

你可以这样做： -

```
function func1()
{
window.location.href="http://www.google.com";

}

function func2()
{
window.location.href="http://www.yahoo.com";

} 
```

代码

```
 <div id="divid" >
 <div onclick="func1()"> Some text to fill the space... blah blah blah</span></div>
<img id="imgid" onclick="func2()" src="SOMEIMAGE" />
</div> 
```

# mysql - 关系数据库如何获取未索引的列？

> ID：15741717
> 
> 赞同：1
> 
> 时间：2013-04-01T10:27:30.983
> 
> 标签：mysql, sql, indexing

我的问题涉及关系数据库访问数据的方式，以及使用仅索引扫描的特殊情况，即扫描检查所有“位置”条件并从某个索引中获取所有返回值，而不访问表本身。

1.  想象一下，我们需要访问一些不在索引中的列。我们需要出于以下两个原因之一（或两者）访问它们：与“where”子句进行比较并获取列值作为结果。在这种情况下，数据库将如何操作：它会获取整行，还是只获取它需要的列？

2.  由于第一个问题出现了这个问题：如果我们不使用 Index-Only-Scan，选择查询中返回的列数真的很重要吗？我的意思是，如果我们必须获取或与 'where' 子句比较某些未索引的列 - 我们返回多少列真的很重要，或者我们可以编写“select * from ...”而不用担心数据库获取反正整行？

3.  当我们使用 Index-Only-Scans 时，我们必须将查询处理的所有列包含在一个索引中。如果某个列包含在另一个索引中 - 这不会破坏性能。我对吗？

4.  我读过 MySQL InnoDB 引擎默认使用聚集索引，即表中的所有行都按某个索引进行物理排序。这意味着使用某个二级索引搜索该表的效率会降低，因为在该搜索之后，db 必须在主索引上创建第二个，因为在聚集索引中，db 不再存储 rowId。我对吗？如果是，为什么 MySQL 会以这种方式实现索引，从而限制二级索引的使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:50:59.860

其中一些解释可能会涵盖您已经知道的内容，但完整的细节可能会对未来的读者有所帮助。

1.  服务器很可能只获取所需的行。但是，这可能会受到数据存储方式的影响。例如，InnoDB 引擎通常存储大数据（如`TEXT`s 和`BLOB`s 离页，因此如果不需要，可能不会获取这些数据。

2.  我想我需要在这里澄清一下，所以如果我从你的问题中遗漏了什么，请纠正我。首先，最好只返回您需要的列并列出所有列而不是选择`*`更快。与 #1 一样，选择其他列会有多大的不同取决于。选择大列（如`TEXT`s 或`BLOB`s）通常比小列更昂贵。

3.  我不是 100% 确定你在这里的意思，但我想我可以回答这个问题。如果您有类似的查询，则类似`SELECT c1, c2, c3 FROM table WHERE c1 = 1 AND c2 = 2`的索引`(c1,c2,c3)`可能是最佳的；查询需要的所有列都在索引中，因此服务器不需要查找完整的数据行。`c1`、`c2`或`c3`是否包含在任何其他索引中都没有关系。

4.  在您的问题中，您说的是`a clustered index db is not storing the rowId anymore`，这并不完全正确。

    假设`rowId`是数据的唯一标识符，可能是数字标识符：

    在非集群数据库表中，所有索引都将某些列连接到物理数据位置。在主索引的情况下，这看起来像`rowId -> data location`。二级索引可能看起来像`column 1 -> column 2 -> data location`. 为了获取任何其他数据，服务器然后根据物理位置查找数据。

    在聚簇表中，物理数据基本上就是主索引。主索引看起来像`rowId -> data`，二级索引看起来像`column 1 -> column 2 -> rowId`。

    对于非聚集表，完整的查找路径看起来像`rowId -> data location -> data`使用主索引和`column 1 -> column 2 -> data location -> data`二级索引。

    对于聚簇表，它看起来像`rowId -> data`主索引和`column 1 -> column 2 -> rowId -> data`二级索引。

    因此，为了更正本节开头的引用，真正“存储”的唯一索引`rowId`是聚簇表上的二级索引。

    虽然聚簇表上的二级索引查找比非聚簇表慢，但如果您使用短主键，差异通常可以忽略不计。聚集表的主要好处之一是主索引查找速度更快，因此如果您主要使用主键查找，它们是有益的。

回应 KutaBeach 的评论：

获取不需要的列没有帮助。当服务器需要获取数据以获取不在索引中的行时，它并不总是获取该行的*所有*数据。一些存储配置将一些数据存储在主行之外，因为它可能非常大，否则会影响性能。一个示例可以是`TEXT`每行长度为 65535 个字符的列。`TEXT`如果存储引擎将该数据存储在页面外，那么在不需要列的情况下 从行获取数据会快得多。

听起来当您说 时`rowId`，您的意思是行的物理地址，而不是分配给每行的唯一编号。在这种情况下，您是正确的，只有聚集表上的二级索引不存储`rowId`; 所有其他索引都存储`rowId`. 然而，这并不是因为数据可以或不能移动；表中的数据*可以随时*移动，在这种情况下，索引会更新以反映移动。在 MySQL 中，a`PRIMARY INDEX`基本上只是表的主索引。它与索引几乎相同，`UNIQUE`因为它强制值是唯一的，唯一的区别是它用作表的主键。非聚集索引确实包含每个`rowId`.

# c# - 如何从 rdpcomapi 中的共享会话中删除应用程序/窗口？

> ID：15741730
> 
> 赞同：2
> 
> 时间：2013-04-01T10:28:30.847
> 
> 标签：c#, visual-studio-2012, rdp

我正在使用 WPF - Visual Studio 中的远程桌面共享。我的要求是隐藏指定的应用程序。我有那个应用程序的窗口。我在代码下面使用了“windows”变量。

```
 while(windows.MoveNext()){
                IRDPSRAPIWindow win = windows.Current as IRDPSRAPIWindow;
                win.Shared = false;
            } 
```

请帮助我，或者建议我以任何其他方式从共享会话中隐藏/删除应用程序。

谢谢，苏里巴布

# python - 使用自定义本地字典执行 Python 代码

> ID：15741734
> 
> 赞同：0
> 
> 时间：2013-04-01T10:28:46.513
> 
> 标签：python, python-3.x

[作为我之前提出](https://stackoverflow.com/questions/12265756/c-python-running-python-code-within-a-context)的这个问题的后续，我正在尝试执行 Python 代码，就好像它在外部函数的上下文中一样。我通过简单地用 包装一段代码`def outer():`，并进行一些简单的字符串处理以正确缩进内部代码来做到这一点。然后我编译它并通过执行`co_consts`列表中的第一个代码对象来执行编译的内部代码。

例子：

```
mycode = """
print("Hey!")
"""

wrapped_code = 'def outer():\n    ' + '\n    '.join(mycode.strip().split('\n'))
compiled_code = compile(wrapped_code, '<str>', 'exec')
exec(compiled_code.co_consts[0], {}, {}) 
```

这`print("Hey")`从外部函数的上下文中执行代码。（如果有人想知道我为什么要这样做，它是我一直在研究的 C 扩展模块的一部分。）

**问题**：我遇到的一个问题是，如果我将代码包装在外部函数中，然后执行内部函数代码块，我似乎无法将任何局部变量传递给执行上下文。

```
mycode = """
print(locals())
"""

wrapped_code = 'def outer():\n    ' + '\n    '.join(mycode.strip().split('\n'))
compiled_code = compile(wrapped_code, '<str>', 'exec')
exec(compiled_code.co_consts[0], {}, {"foo" : "bar"}) 
```

这输出：

```
{} 
```

请注意，我明确传递了一个包含`{"foo" : "bar"}`to的本地字典`exec`，但是当它实际执行代码并打印`locals()`时，它显示一个空字典。为什么 Python 不使用我传递的局部变量字典？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:44:16.110

您将一个函数作为第一个参数传递给 exec。一个函数将定义它自己的局部变量，这就是您要打印的局部变量。去掉包装（我看不出有什么用处），它就可以工作了。

# apache - 如何确保 apache-ant 应用任务在进一步执行之前完成

> ID：15741736
> 
> 赞同：0
> 
> 时间：2013-04-01T10:28:55.250
> 
> 标签：apache, ant

我使用以下代码来解析所有 PHP 包含并创建一个静态 html 文件。完成后，我想删除源 php 文件：

```
<apply executable="php" parallel="false" dir="${prod.dir}" output="${prod.dir}/index.html">
  <fileset dir="${prod.dir}" includes="index.php"/>
</apply>
<delete file="${prod.dir}/index.php"/> 
```

显然，index.php 在 php 运行时被删除。如何确保仅在 php 完成后才执行删除任务？

我知道我可以等待一秒钟左右，但不想依赖这个。

谢谢斯特凡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:52:03.063

如果该属性`spawn`设置为`false`（默认为`false`），则 ant 应该等到它完成。只有在`delete`php 完成后才会调用。

[应用任务手册](http://ant.apache.org/manual/Tasks/apply.html)

# jsf-2 - 通过javascript的managedbean更改selectonemenu primefaces的选定项

> ID：15741738
> 
> 赞同：6
> 
> 时间：2013-04-01T10:29:03.780
> 
> 标签：jsf-2, primefaces, selectonemenu

我想`selectOneMenu`通过托管 bean 或 javascript 更改 this 的选定值：

```
<p:selectOneMenu id="edit-article-famille" widgetVar="editFamille"
    required="true" requiredMessage="Veuillez choisir une famille"
    value="#{articlesMB.selectedFamille}">
  <f:selectItem itemLabel="selectionner famille" itemValue=""/>
  <f:selectItems value="#{articlesMB.listFamilles}"/>
</p:selectOneMenu> 
```

我该怎么做？在 primefaces 用户指南中，他们没有谈论这个。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-01T11:07:19.433

您可以在 JavaScript中设置`p:selectOneMenu`with的值：`widgetVar`

```
editFamille.selectValue(value); 
```

`value`是 的值`selectItem`。

或者在更新版本的 PrimeFaces 中，通过

```
PF('editFamille').selectValue(value) 
```

# php - 如何使用 csv 中的 php 作为参考下载多个文件？

> ID：15741743
> 
> 赞同：0
> 
> 时间：2013-04-01T10:29:35.653
> 
> 标签：php, csv, download

对 php 有点陌生，但我开始对它有所了解。

我想做的事...

我有一个 csv，其中包含对我可以下载的文件的引用。

我找到了这个页面：[How to download xml file through in php?](https://stackoverflow.com/questions/5154781/how-to-download-xml-file-through-in-php)

如果我编写要保存的 url 和目录，这使我能够下载 xml 文件而没有问题。

如何修改此 php 以获取 csv 中的所有 xml 文件？

我认为它将类似于：foreach 和变量函数等，但不知道如何。

同样在 csv 中只包含文件名而不是完整的 url，但 url 的第一部分将始终保持不变。下载目录也是如此。我希望将所有文件下载到我选择的同一目录中，并且文件名将与我下载的文件名相同。

另外，如果我想现在下载图像或任何其他文件类型，我将如何更改 php？我认为这将相当容易？

感谢您的帮助约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:47:05.070

我会假设 CSV 文件如下所示：

> “文件名”；“网址”
> 
> “文件 1”；“f1 的 URL”
> 
> “文件 2”；“f2 的 URL”
> 
> “文件 3”；“f3 的 URL”
> 
> “文件 4”；“f4 的 URL”
> 
> “文件 5”；“f5 的 URL”
> 
> “文件 6”；“f6 的 URL”

所以列分隔符是`;`和字符串分隔符`"`

所以代码会是这样的：

```
<?php

$fileContent = $file("path/to/csv/file"); // read the file to an array
array_shift( $fileContent ); // remove the first line, the header, from the array
foreach( $fileContent as $line ) {
    $columns = str_getcsv( $line, ";", '"' );
    $url = $columns[1]; // as suposed previously the url is in the second column
    $filename = $columns[0];
    downloadFile( $url, $filename );
}

function downloadFile( $url, $filename ) {
    $newfname = "/path/to/download/folder/" . $filename ;
    $file = fopen ($url, "rb");
    if ($file) {
        $newf = fopen ($newfname, "wb");
        if ($newf)
            while(!feof($file)) {
                fwrite($newf, fread($file, 1024 * 8 ), 1024 * 8 );
            }
    }
    if ($file) {
        fclose($file);
    }

    if ($newf) {
        fclose($newf);
    }
} 
```

# c# - 一个复杂的字符串拆分器——如何使这个工作代码更好？

> ID：15741744
> 
> 赞同：0
> 
> 时间：2013-04-01T10:29:39.997
> 
> 标签：c#

我有以下程序

```
class Program
    {
        static void Main(string[] args)
        {
            List<Assembly> failedAssemblies = LoadAssembly();
            string batchFile = "D:\\1" + ".bat";
            FileStream fs = File.Create(batchFile);
            fs.Close();

            using (StreamWriter outFile = new StreamWriter(batchFile))
            {
                string command = @"echo off";
                outFile.WriteLine(command);

                Process(outFile, failedAssemblies);

            }           
        }

        private static void Process(StreamWriter outFile, List<Assembly> assembliesList)
        {
            string command = "mstest.exe ";
            string testcontainer = " /testcontainer:";
            List<string> testContainerAssemblies = new List<string>(4);

            outFile.WriteLine("SET Path=%MsTestPath%");

            foreach (Assembly assmbly in assembliesList)
            {

                command = string.Empty;
                if (!testContainerAssemblies.Contains(assmbly.AssemblyName))
                {
                    outFile.WriteLine(' ');

                    testContainerAssemblies.Add(assmbly.AssemblyName);                   
                    command = "mstest.exe ";
                    command += testcontainer + "\\" + assmbly.AssemblyName + " ";
                    command += "/resultsfile:\"" + "\\Resultfile_" + assmbly.AssemblyName.Replace(".dll", "") + "_" + "1".ToString() + ".trx\"";
                    command += " /runconfig:";
                    command += " /detail:owner";
                    command += " /detail:duration";
                    command += " /detail:description";

                    command += " /unique ";
                }

                command += " /test:" + assmbly.NameSpaceName + "." + assmbly.ClassName + "." + assmbly.FunctionName;

                outFile.Write(command);
            }
        }

        private static List<Assembly> LoadAssembly()
        {
            var assemblyCollection = new List<Assembly>();

            assemblyCollection.Add(new Assembly { AssemblyName = "AccountTestBase.dll", NameSpaceName = "ECardTest", ClassName = "ECardTest", FunctionName = "ECardTestDownLoadPKGSuccess" });
            assemblyCollection.Add(new Assembly { AssemblyName = "AccountTestBase.dll", NameSpaceName = "AccountTest", ClassName = "IAccountTest", FunctionName = "Somefunc" });
            assemblyCollection.Add(new Assembly { AssemblyName = "TestPayment.dll", NameSpaceName = "TestPayment", ClassName = "CreditCardTestCases", FunctionName = "BoletoFunctionalTestCase" });
            assemblyCollection.Add(new Assembly { AssemblyName = "TestPayment.dll", NameSpaceName = "TestPayment", ClassName = "CreditCardTestCases", FunctionName = "BoletoEndToEndFunctionalTestCase" });
            assemblyCollection.Add(new Assembly { AssemblyName = "TestPayment.dll", NameSpaceName = "TestPayment", ClassName = "CreditCardTestCases", FunctionName = "BoletoPurcahseTestCase" });
            assemblyCollection.Add(new Assembly { AssemblyName = "TestPayment.dll", NameSpaceName = "TestPayment", ClassName = "CreditCardTestCases", FunctionName = "CreditCard_ResumeOrder_Success" });
            assemblyCollection.Add(new Assembly { AssemblyName = "TestPayment.dll", NameSpaceName = "TestPayment", ClassName = "CreditCardTestCases", FunctionName = "CreditCard_EURCurr_USBilling_ENUS" });
            assemblyCollection.Add(new Assembly { AssemblyName = "TestPayment.dll", NameSpaceName = "TestPayment", ClassName = "CreditCardTestCases", FunctionName = "DinersClubPayment" });

            return assemblyCollection;

        }
    }

    public class Assembly
    {
        public string AssemblyName { get; set; }
        public string ClassName { get; set; }
        public string FunctionName { get; set; }
        public string NameSpaceName { get; set; }

    } 
```

它生成以下输出

```
echo off
SET Path=%MsTestPath%

mstest.exe  /testcontainer:\AccountTestBase.dll /resultsfile:"\Resultfile_AccountTestBase_1.trx" /runconfig: /detail:owner /detail:duration /detail:description /unique  /test:ECardTest.ECardTest.ECardTestDownLoadPKGSuccess /test:AccountTest.IAccountTest.Somefunc 
mstest.exe  /testcontainer:\TestPayment.dll /resultsfile:"\Resultfile_TestPayment_1.trx" /runconfig: /detail:owner /detail:duration /detail:description /unique  /test:TestPayment.CreditCardTestCases.BoletoFunctionalTestCase /test:TestPayment.CreditCardTestCases.BoletoEndToEndFunctionalTestCase /test:TestPayment.CreditCardTestCases.BoletoPurcahseTestCase /test:TestPayment.CreditCardTestCases.CreditCard_ResumeOrder_Success /test:TestPayment.CreditCardTestCases.CreditCard_EURCurr_USBilling_ENUS /test:TestPayment.CreditCardTestCases.DinersClubPayment 
```

现在出现了一个新要求，我们需要根据通过的限制来打破输出。

假设如果限制为 300，则输出将是

```
echo off
SET Path=%MsTestPath%

mstest.exe  /testcontainer:\AccountTestBase.dll /resultsfile:"\Resultfile_AccountTestBase_1.trx" /runconfig: /detail:owner /detail:duration /detail:description /unique  /test:ECardTest.ECardTest.ECardTestDownLoadPKGSuccess
mstest.exe  /testcontainer:\TestPayment.dll /resultsfile:"\Resultfile_TestPayment_1.trx" /runconfig: /detail:owner /detail:duration /detail:description /unique  /test:TestPayment.CreditCardTestCases.BoletoFunctionalTestCase /test:TestPayment.CreditCardTestCases.BoletoEndToEndFunctionalTestCase 

mstest.exe  /testcontainer:\TestPayment.dll /resultsfile:"\Resultfile_TestPayment_1.trx" /runconfig: /detail:owner /detail:duration /detail:description /unique /test:TestPayment.CreditCardTestCases.BoletoPurcahseTestCase /test:TestPayment.CreditCardTestCases.CreditCard_ResumeOrder_Success /test:TestPayment.CreditCardTestCases.CreditCard_EURCurr_USBilling_ENUS /test:TestPayment.CreditCardTestCases.DinersClubPayment 
```

即第一个的总字符数限制为 210（大约），此后保持不变。第二个已经越界了，需要拆分成两部分。第一个被拆分（290），因为再添加一个命令会超过限制。这就是为什么我们需要将它拆分为两部分。

还有一点要说的是，我们不能仅仅根据提供的 Limit 值精确分割。因为它是一个需要运行的 MSTest 命令。今后，

`"mstest.exe /testcontainer:\TestPayment.dll /resultsfile:"\Resultfile_TestPayment_1.trx" /runconfig: /detail:owner /detail:duration /detail:description /unique"`总会来然后`"test/..."`

如何在 C# 中做同样的事情？

**MyShot（请改进）**

```
private static void Process(StreamWriter outFile, List<Assembly> failedAssemblies)
{
    int MAXLIMIT = 2000;
    string command = "mstest.exe ";
    string testcontainer = " /testcontainer:";
    List<string> testContainerAssemblies = new List<string>(4);
    int sum = 0;

    outFile.WriteLine("SET Path=%MsTestPath%");

    var failedAssemblyCollections = (from x in failedAssemblies
                                     group x by x.AssemblyName into g
                                     select new
                                     {
                                         AssemblyNames = g.Key,                                      
                                         FullyQualifiedTestMethods = g.Select(i => " /test:" + i.NameSpaceName + "." + i.ClassName + "." + i.FunctionName),
                                         FullyQualifiedTestMethodsLen = g.Select(i => Convert.ToString(" /test:" + i.NameSpaceName + "." + i.ClassName + "." + i.FunctionName).Length)
                                     });

        foreach (var item in failedAssemblyCollections)
        {
            var assemblyNames = item.AssemblyNames;
            var methodsLengths = item.FullyQualifiedTestMethodsLen.ToList();
            var flag = true;
            int counter = 0;

            //write for the very first time
            if (flag)
            {
                Write(outFile, ref command, testcontainer, assemblyNames);
                flag = false;
            }

            for (int i = 0; i < methodsLengths.Count; i++)
            {
                sum += methodsLengths[i];

                if (sum <= MAXLIMIT)
                {
                    command += item.FullyQualifiedTestMethods.ToList()[i];

                    //this will execute when a long command is splitted and is written in new trx files
                    if (flag)
                    {
                        counter++;
                        Write(outFile, ref command, testcontainer, assemblyNames);
                        flag = false;
                    }
                }

                //if the value crosses max limit
                //write the current output
                //then reset variables to original 
                if (sum >= MAXLIMIT)
                {
                    outFile.Write(command);
                    sum = 0;
                    flag = true;
                    i--;
                }
            }
            outFile.Write(command);

        }

}

private static void Write(StreamWriter outFile, ref string command, string testcontainer, string assemblyNames)
{
    outFile.WriteLine(' ');
    command = "mstest.exe ";
    command += testcontainer + "\\" + assemblyNames + " ";  
    command += " /runconfig:";
    command += " /detail:owner";
    command += " /detail:duration";
    command += " /detail:description";

    command += " /unique ";

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:11:27.383

我敲出的一个*非常粗略的例子是here。*我没有测试过边缘情况，例如：行长度非常接近或正好是限制，或者单个测试用例超过限制。我会把这些练习留给你。

有时最简单的方法就是编写单元测试，输出标准循环和长度检查以通过这些测试，然后使用 LINQ 或正则表达式或代码清理来获得可维护和可读的东西。

```
string input = @"mstest.exe  /testcontainer:\TestPayment.dll /resultsfile:""\Resultfile_TestPayment_1.trx"" /runconfig: /detail:owner /detail:duration /detail:description /unique  /test:TestPayment.CreditCardTestCases.BoletoFunctionalTestCase /test:TestPayment.CreditCardTestCases.BoletoEndToEndFunctionalTestCase /test:TestPayment.CreditCardTestCases.BoletoPurcahseTestCase /test:TestPayment.CreditCardTestCases.CreditCard_ResumeOrder_Success /test:TestPayment.CreditCardTestCases.CreditCard_EURCurr_USBilling_ENUS /test:TestPayment.CreditCardTestCases.DinersClubPayment";

const int LINE_LIMIT = 300;
const string TEST_MARKER = " /test:";

int testIndex = input.IndexOf(TEST_MARKER);
string prefix = input.Substring(0, testIndex);
int availableCharacters = LINE_LIMIT - prefix.Length;

Queue<string> tests = new Queue<string>(input.Substring(testIndex).Split(new []{TEST_MARKER}, StringSplitOptions.RemoveEmptyEntries));

List<string> testSets = new List<string>();
string currentTest = "";
while (tests.Count > 0)
{
    //restores the test marker from splitting
    string test = TEST_MARKER + tests.Dequeue(); 

    if (currentTest.Length + test.Length > availableCharacters)
    {
        testSets.Add(currentTest);
        currentTest = "";
    }
    else
    {
        currentTest += test;
    }
}

if (currentTest != "")
{
    testSets.Add(currentTest);
}

var lines = testSets.Select(t => prefix + t).ToList(); //your line outputs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T02:02:46.163

```
private static void Process(StreamWriter outFile, List<Assembly> failedAssemblies)
{
    int MAXLIMIT = 2000;
    string command = "mstest.exe ";
    string testcontainer = " /testcontainer:";
    List<string> testContainerAssemblies = new List<string>(4);
    int sum = 0;

    outFile.WriteLine("SET Path=%MsTestPath%");

    var failedAssemblyCollections = (from x in failedAssemblies
                                     group x by x.AssemblyName into g
                                     select new
                                     {
                                         AssemblyNames = g.Key,                                      
                                         FullyQualifiedTestMethods = g.Select(i => " /test:" + i.NameSpaceName + "." + i.ClassName + "." + i.FunctionName),
                                         FullyQualifiedTestMethodsLen = g.Select(i => Convert.ToString(" /test:" + i.NameSpaceName + "." + i.ClassName + "." + i.FunctionName).Length)
                                     });

        foreach (var item in failedAssemblyCollections)
        {
            var assemblyNames = item.AssemblyNames;
            var methodsLengths = item.FullyQualifiedTestMethodsLen.ToList();
            var flag = true;
            int counter = 0;

            //write for the very first time
            if (flag)
            {
                Write(outFile, ref command, testcontainer, assemblyNames);
                flag = false;
            }

            for (int i = 0; i < methodsLengths.Count; i++)
            {
                sum += methodsLengths[i];

                if (sum <= MAXLIMIT)
                {
                    command += item.FullyQualifiedTestMethods.ToList()[i];

                    //this will execute when a long command is splitted and is written in new trx files
                    if (flag)
                    {
                        counter++;
                        Write(outFile, ref command, testcontainer, assemblyNames);
                        flag = false;
                    }
                }

                //if the value crosses max limit
                //write the current output
                //then reset variables to original 
                if (sum >= MAXLIMIT)
                {
                    outFile.Write(command);
                    sum = 0;
                    flag = true;
                    i--;
                }
            }
            outFile.Write(command);

        }

}

private static void Write(StreamWriter outFile, ref string command, string testcontainer, string assemblyNames)
{
    outFile.WriteLine(' ');
    command = "mstest.exe ";
    command += testcontainer + "\\" + assemblyNames + " ";  
    command += " /runconfig:";
    command += " /detail:owner";
    command += " /detail:duration";
    command += " /detail:description";

    command += " /unique ";

} 
```

# api - API 服务网站和移动应用程序的身份验证选项

> ID：15741752
> 
> 赞同：2
> 
> 时间：2013-04-01T10:30:21.270
> 
> 标签：api, authentication, mobile, oauth, hmac

作为更广泛的学习过程的一部分，我希望构建一个网站和移动应用程序，使用一个通用的 api 进行数据存储和检索（将其视为一个简单的 cms）。移动应用程序将具有额外的功能，例如离线存储（草稿文章，例如离线）和访问媒体/相机等。将有一个面向公众的主页，每个成员都有一个安全区域，可以创建/修改自己的内容.

我已经做了很多阅读，但想就如何处理身份验证（我对构建应用程序和网站以及 api 本身感到满意）对此推荐的架构提供一些反馈。还可以说，在将来的某个时候，我可能想向第三方开放 api。那里有很多选项，但我似乎找不到任何代表流程的像样的图表。这种情况的利弊以及以下选项图表的链接会很棒。

宁愿不要求用户每次访问应用程序（或网站）时都登录，并且担心移动应用程序上也有任何私钥。

这一定是当今非常普遍的情况，我只是想知道人们对这些情况都有什么经验。

OAuth 1a OAuth 2 HMAC Basic with SSL Apache Shiro 托管服务，例如 StormPath 任何其他选项

如果最终用户能够使用他们的社交帐户（Twitter、Facebook 等）登录，并且还能够使用网站/应用程序创建帐户，那就太好了。

# rabbitmq - 通过 dotcloud 使用 CloudAMQP 时，如何最大限度地减少与 django-celery 的连接？

> ID：15741753
> 
> 赞同：3
> 
> 时间：2013-04-01T10:30:26.320
> 
> 标签：rabbitmq, celery, django-celery, dotcloud, cloudamqp

在花了几周时间让 django-celery-rabbitmq 在 dotcloud 上工作后，我发现 dotcloud 不再支持 rabbitmq。相反，他们推荐 CloudAMQP。所以我按照教程设置了 CloudAMQP：

*   [http://docs.dotcloud.com/tutorials/python/django-celery/](http://docs.dotcloud.com/tutorials/python/django-celery/)
*   [http://docs.dotcloud.com/tutorials/more/cloudamqp/](http://docs.dotcloud.com/tutorials/more/cloudamqp/)
*   [http://www.cloudamqp.com/docs-dotcloud.html](http://www.cloudamqp.com/docs-dotcloud.html)

而且服务很好。但是，即使我没有运行任何进程，CloudAMQP 也会说有 3 个连接。

我查看了他们的文档，他们说（[http://www.cloudamqp.com/docs-python.html](http://www.cloudamqp.com/docs-python.html)）对于芹菜最好设置

```
broker_pool_limit = 1 
```

我现在已经这样做了，但连接仍然是 3。知道我该怎么做

*   不使用应用程序时将连接数减少到0？

*   尽量减少连接数以确保我保持在配额范围内？

# mysql - MySQL Join 跨多个表

> ID：15741754
> 
> 赞同：1
> 
> 时间：2013-04-01T10:30:30.343
> 
> 标签：mysql, sql, join

我的 Web 应用程序需要所有用户组、组成员的列表，以及他们可以根据组成员身份访问的产品列表。

Web 应用程序支持多个“站点”；作为这些用户、组和产品的唯一标识符的站点。

我有以下查询：

```
SELECT u.id as user_id, u.username, ug.group_id, ug.group_name, u.firstname, u.surname, p.product_name, p.product_id, p.product_price, p.product_currency, p.is_public
    FROM user_groups ug
    LEFT JOIN user_group_users ugu ON ug.group_id = ugu.group_id
    RIGHT JOIN users u ON u.id  = ugu.user_id
    LEFT JOIN user_group_product ugp on ug.group_id = ugp.group_id
    LEFT JOIN product p on p.product_id = ugp.product_id
    WHERE u.site_id = 5
    ORDER BY ug.group_name desc, u.surname, u.firstname, u.username 
```

这运行良好，我使用 PHP 连接结果来传递数据。

**问题**：该`PRODUCTS`表还有一个`is_public`标志，我想在结果集中包含所有产品，这些产品也将此设置为 1，并返回用户有权访问的产品，但同样，仅适用于该站点。

因此，为清楚起见，我希望返回：

*   所有用户记录 - 无论他们是否具有组成员身份（将显示未分组的用户）
*   具有关联组成员身份的所有用户记录
*   所有组
*   所有产品 - 用户是该组的成员
*   所有产品 - 产品设置为公开 - is_public = 1

以上所有内容必须仅适用于相关网站。

**更新 3**：更新了要求的描述

**更新 2**：表结构：

```
--
-- Table structure for table `user_group_users`
--

CREATE TABLE IF NOT EXISTS `user_group_users` (
  `user_group_id` bigint(20) unsigned NOT NULL auto_increment,
  `user_id` mediumint(9) NOT NULL default '0',
  `group_id` mediumint(9) NOT NULL default '0',
  `created` timestamp NOT NULL default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP,
  PRIMARY KEY  (`user_group_id`),
  KEY `user_id` (`user_id`,`group_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=54 ;

--
-- Table structure for table `user_groups`
--

CREATE TABLE IF NOT EXISTS `user_groups` (
  `group_id` mediumint(8) unsigned NOT NULL auto_increment,
  `site_id` mediumint(9) NOT NULL,
  `group_name` varchar(100) NOT NULL default '',
  `is_default` tinyint(1) NOT NULL COMMENT 'Users are automatically added to default groups at registration',
  PRIMARY KEY  (`group_id`),
  KEY `site_id` (`site_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=4 ;

--
-- Table structure for table `user_group_product`
--

CREATE TABLE IF NOT EXISTS `user_group_product` (
  `user_group_product_id` bigint(20) unsigned NOT NULL auto_increment,
  `group_id` mediumint(9) NOT NULL default '0',
  `product_id` mediumint(9) NOT NULL default '0',
  `created` timestamp NOT NULL default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP,
  PRIMARY KEY  (`user_group_product_id`),
  KEY `product_id` (`product_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=124 ;

--
-- Table structure for table `product`
--

CREATE TABLE IF NOT EXISTS `product` (
  `product_id` mediumint(8) unsigned NOT NULL auto_increment,
  `payment_enabled` tinyint(1) NOT NULL default '0',
  `credit_enabled` tinyint(1) NOT NULL default '0',
  `product_name` varchar(100) NOT NULL default 'Default Product',
  `is_public` tinyint(1) NOT NULL default '1',
  `product_price` decimal(10,2) default NULL,
  `product_currency` varchar(5) default NULL,
  PRIMARY KEY  (`product_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=10 ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:09:54.527

如果我正确理解了您的要求，这应该有效：

```
SELECT u.id as user_id, u.username, ug.group_id, ug.group_name, u.firstname, u.surname, p.product_name, p.product_id, p.product_price, p.product_currency, p.is_public
FROM user_groups ug
JOIN user_group_users ugu ON ug.group_id = ugu.group_id
JOIN users u ON u.id  = ugu.user_id
JOIN user_group_product ugp on ug.group_id = ugp.group_id
JOIN product p on p.product_id = ugp.product_id
WHERE u.site_id = 5
UNION ALL
SELECT u.id user_id, u.username, NULL group_id, NULL group_name, u.firstname, u.surname, p.product_name, p.product_id, p.product_price, p.product_currency, p.is_public
FROM users
CROSS JOIN product p
WHERE p.is_public = 1
ORDER BY 4 desc, 6, 5, 2 
```

- 它应该返回站点 5 上的用户具有组访问权限的所有产品，以及所有用户的所有公共产品。

# jquery - 自动完成 TextBoxList 值提交为从 json 获取

> ID：15741755
> 
> 赞同：1
> 
> 时间：2013-04-01T10:30:37.083
> 
> 标签：jquery, autocomplete

我正在使用带有原型的自动完成文本框列表，并且对此有几个问题。

我正在从 demodata.js 文件中获取值，该文件为

```
[{
    "caption": "Name1",
    "value": "Name1"
}, {
    "caption": "Name2",
    "value": "Name2"
}] 
```

现在，当我提交值时，我在 servlet 收到的数据是

```
[{"caption": "Name1", "value": "Name1"}] 
```

Q1。我只需要它的价值`Name1`而不是全部，所以我怎样才能实现它的价值。

Q2。我还想更改用于选择值的分隔符。现在在键入值后，如果给定空格，则在文本框中选择了该值，我想将其更改为`,`. 当我按下`,`之后，应该在 texbox 中选择该值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:12:24.260

```
// Array
var myArray = [{
 "caption": "Name 1",
 "value": "Name 1"
}, {
 "caption": "Name 2",
 "value": "Name 2"
}];

// Read each index/object in Array
$.each(myArray, function (index, value) {
 alert('-index: ' + index + ' -caption: ' + value.caption + ' -value: ' + value.value);
});

// Values of first index/object
var first_caption = myArray[0].caption;
var first_value = myArray[0].value;

alert('First caption and value in myArray: ' + first_caption + ':' + first_value); 
```

如果*警报*让您烦恼，请将*警报*替换为*console.log*

**[演示](http://jsfiddle.net/Palestinian/2FFyN/)**

# c# - LINQ 动态案例

> ID：15741756
> 
> 赞同：-1
> 
> 时间：2013-04-01T10:30:42.387
> 
> 标签：c#, .net, sql, linq, linq-to-sql

我有这个方法：

```
private string GetLanguage(String currentLanguage, dynamic entity)
{
    return (currentLanguage == "de" ? entity.language.German :
     currentLanguage == "fr" ? entity.language.French :
     currentLanguage == "en" ? entity.language.English :
     entity.language.English);
} 
```

我需要它来返回一个 LINQ 表达式，它执行类似以下 SQL 语句的操作：

```
select (case when [french] is null then [english] else [french] end) as language 
from 
```

我怎样才能做到这一点？

Tks

编辑：

更具体：

我有这样的事情：

```
myId = 1;

from objects in context.Objects
                           where objects.Id== myId
select new
                           {
                               MyObject = new Models.MyObjects()
                               {
                                   Id = objects.ScrId,
                                   Title = LanguageFactory.GetLabelLanguage(objects.Labels)
                               }
                           }).FirstOrDefault(); 
```

并且 MyObject.Title 必须使用某种语言（英语、法语、荷兰语等）。在 SQL 中，我通过执行以下操作解决了这个问题：

```
select id, (case when [french] is null then [english] else [french] end) as language 
from table 
```

我怎样才能做一个 LINQ 表达式，它可以被翻译成类似于上面的 SQL 查询的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:52:46.560

您将无法在 Linq-to-SQL 中调用任意函数。但是你可以使用 a `Expression`，像这样：

```
private Expression<Func<DbObject, MyObject>> GetObjectWithLanguage =
    e => new MyObject
    {
        Id = e.ScrId,
        Title = e.currentLanguage == "de" ? e.Labels.language.German :
                e.currentLanguage == "fr" ? e.Labels.language.French :
                e.currentLanguage == "en" ? e.Labels.language.English :
                e.Labels.language.English
    };

...
var results = context.Objects.Where(e => e.Id == myId).Select(GetObjectWithLanguage); 
```

这将使用`currentLanguage`实体本身的属性来确定要返回的内容。但是，如果您想`currentLanguage`从 c# 代码作为参数传递，请尝试以下操作：

```
private Expression<Func<DbObject, MyObject>> GetObjectWithLanguage(string currentLanguage)
{
    if (currentLanguage == "de")
    {
        return e => new MyObject
        {
            Id = e.ScrId,
            Title = e.Labels.language.German
        }
    }
    else if (currentLanguage == "fr")
    {
        return e => new MyObject
        {
            Id = e.ScrId,
            Title = e.Labels.language.French
        }
    }
    ...
}

var results = context.Objects.Where(e => e.Id == myId).Select(GetObjectsWithLanguage("de")); 
```

如果你想创建一个通用的方法，我建议你使用泛型而不是`dynamic`参数，例如，假设你有一个类似的接口：

```
public interface ILanguageAware
{
    string CurrentLanguage { get; }
    string English { get; }
    string French { get; }
    string German { get; }
}

public class ObjectWithLanguage<T> where T : ILanguageAware
{
    public T OriginalObject { get; set; }
    string LanguageText { get; set; }
}

public Expression<Func<T, ObjectWithLanguage<T>>> GetObjectWithLanguage<T>() where T : ILanguageAware
{
    return x => new ObjectWithLanguage<T>
           {
               OriginalObject = x,
               LanguageText = x.CurrentLanguage == "de" ? x.German :
                              x.CurrentLanguage == "fr" ? x.French :
                              ...
           }
}

// extension method for convenience
public static IQueryable<ObjectWithLanguage<T>> SelectWithLanguage<T>(this IQueryable<T> queryable)
{
    return queryable.Select(GetObjectWithLanguage<T>());
}

var results = context.Objectss.Where(e => e.Id == myId).SelectWithLanguage(); 
```

# python - 使用 Pandas 查找列的最大值并返回相应的行值

> ID：15741759
> 
> 赞同：166
> 
> 时间：2013-04-01T10:31:01.700
> 
> 标签：python, pandas, dataframe, max

![数据结构；](https://i.stack.imgur.com/a34it.png)

使用 Python Pandas 我试图找到具有最大值的`Country`& 。`Place`

这将返回最大值：

```
data.groupby(['Country','Place'])['Value'].max() 
```

但是如何获得对应的`Country`和`Place`名称呢？

* * *

## 回答 #1

> 赞同：215
> 
> 时间：2013-04-01T10:58:15.587

假设`df`有一个唯一索引，这将给出具有最大值的行：

```
In [34]: df.loc[df['Value'].idxmax()]
Out[34]: 
Country        US
Place      Kansas
Value         894
Name: 7 
```

请注意，[`idxmax`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.idxmax.html)返回索引*标签*。因此，如果 DataFrame 在索引中有重复项，则标签可能无法唯一标识行，因此`df.loc`可能返回多行。

因此，如果`df`没有唯一索引，则必须先使索引唯一，然后再进行上述操作。根据 DataFrame，有时您可以使用`stack`或`set_index`使索引唯一。或者，您可以简单地重置索引（因此行重新编号，从 0 开始）：

```
df = df.reset_index() 
```

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2018-04-30T17:07:24.813

```
df[df['Value']==df['Value'].max()] 
```

这将返回具有最大值的整行

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-05-09T10:48:05.617

我认为返回具有最大值的行的最简单方法是获取其索引。`argmax()`可用于返回具有最大值的行的索引。

```
index = df.Value.argmax() 
```

现在索引可用于获取该特定行的特征：

```
df.iloc[df.Value.argmax(), 0:2] 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-04-01T10:50:04.710

国家和地方是系列的索引，如果不需要索引，可以设置`as_index=False`：

```
df.groupby(['country','place'], as_index=False)['value'].max() 
```

编辑：

似乎您想要每个国家/地区都具有最大值的地方，以下代码将满足您的需求：

```
df.groupby("country").apply(lambda df:df.irow(df.value.argmax())) 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-04-01T10:44:57.140

使用 的`index`属性`DataFrame`。请注意，我没有键入示例中的所有行。

```
In [14]: df = data.groupby(['Country','Place'])['Value'].max()

In [15]: df.index
Out[15]: 
MultiIndex
[Spain  Manchester, UK     London    , US     Mchigan   ,        NewYork   ]

In [16]: df.index[0]
Out[16]: ('Spain', 'Manchester')

In [17]: df.index[1]
Out[17]: ('UK', 'London') 
```

您还可以通过该索引获取值：

```
In [21]: for index in df.index:
    print index, df[index]
   ....:      
('Spain', 'Manchester') 512
('UK', 'London') 778
('US', 'Mchigan') 854
('US', 'NewYork') 562 
```

## 编辑

很抱歉误解了您想要的内容，请尝试以下操作：

```
In [52]: s=data.max()

In [53]: print '%s, %s, %s' % (s['Country'], s['Place'], s['Value'])
US, NewYork, 854 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-02-20T06:53:42.793

为了以最大值打印 Country 和 Place，请使用以下代码行。

```
print(df[['Country', 'Place']][df.Value == df.Value.max()]) 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2020-02-16T15:01:41.747

您可以使用：

```
print(df[df['Value']==df['Value'].max()]) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-01-14T21:12:12.637

我在列中查找最大值的解决方案：

```
df.ix[df.idxmax()] 
```

，也是最小值：

```
df.ix[df.idxmin()] 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-05-26T05:47:22.610

我建议使用`nlargest`以获得更好的性能和更短的代码。进口`pandas`

```
df[col_name].value_counts().nlargest(n=1) 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-03-23T07:22:45.157

import pandas
df 是您创建的数据框。

使用命令：

```
df1=df[['Country','Place']][df.Value == df['Value'].max()] 
```

这将显示值最大的国家和地区。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-03-10T12:18:10.967

### 使用[`DataFrame.nlargest`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.nlargest.html).

专门的方法是在后台`nlargest`使用[`algorithm.SelectNFrame`](https://github.com/pandas-dev/pandas/blob/f2c8480af2f25efdbd803218b9d87980f416563e/pandas/core/algorithms.py#L1263-L1277)，这是一种高效的方法：`sort_values().head(n)`

```
 x  y  a  b
0  1  2  a  x
1  2  4  b  x
2  3  6  c  y
3  4  1  a  z
4  5  2  b  z
5  6  3  c  z 
```

```
df.nlargest(1, 'y')

   x  y  a  b
2  3  6  c  y 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-11-29T04:16:48.180

我在尝试使用 pandas 导入数据时遇到了类似的错误，我的数据集上的第一列在单词开头之前有空格。我删除了空格，它就像一个魅力！

# scala - 为什么 sbt reload gen-idea 会使用 6GB 内存？

> ID：15741761
> 
> 赞同：1
> 
> 时间：2013-04-01T10:31:03.647
> 
> 标签：scala, intellij-idea, sbt

我正在使用命令

```
sbt reload gen-idea 
```

构建一个大型（数十万行代码）IntelliJ Scala 项目。

大约 30 分钟后，程序会因为内存不足而自动终止。我检查了一下，它在被杀死之前使用了 6GB。

这是怎么回事？我可以做些什么来改善这一点吗？

抱歉，我无法添加更多细节：我对 SBT 几乎一无所知。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:31:08.983

实际上使用 reload iwth sbt 是没用的，因为 reload 命令会在打开的 sbt 会话中重新加载您的构建配置，当您从命令行启动 sbt 时，它会自动读取您的配置文件的最新版本。至于时间我猜这是插件的问题。尝试添加`SBT_OPTS="-XX:+UseConcMarkSweepGC -XX:+CMSClassUnloadingEnabled -XX:PermSize=256M -XX:MaxPermSize=512M"`到您的 /.sbtconfig 文件中，这将限制 sbt 使用的内存量。

# java - 如何在 RMI 中使用 Kryo

> ID：15741770
> 
> 赞同：0
> 
> 时间：2013-04-01T10:31:47.950
> 
> 标签：java, serialization, rmi, kryo

我看到很多关于*是否*可以使用 Kryo 来替换 RMI 使用的默认 JVM 序列化的问题，但没有关于*如何*实际设置它的方式。我听说 Kryo 是 JVM 序列化的“插入式”替代品，但不确定这是否意味着您可以从运行时类路径中换出一些 JAR（例如 SLF4J 绑定等），或者其他什么别的。

所以我问：我如何使用 Kryo 而不是 Java 附带的默认 JVM 序列化来获得 RMI？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:40:53.443

Kryo 不是 Java 对象序列化的直接替代品：它是一个新的 API；并且不能让 RMI 使用它。

# android - 在我做某事并返回按钮的活动后，按钮上的 OnClick() 不起作用

> ID：15741772
> 
> 赞同：1
> 
> 时间：2013-04-01T10:31:50.540
> 
> 标签：android, onclick, onclicklistener

我已经调试过，发现从主活动启动的活动返回后，控制流永远不会到达**主活动**`OnClick()`中的方法。

 **怀疑这与“暂停”或“恢复”状态有关。

换句话说，主要活动是 A。从 A 启动的活动是 B。所以，我从 A 启动并在 B 上工作。当我返回 A（使用硬件按钮“返回”）时，`onClick`似乎没有调用函数。

出于隐私目的，我删除了下面显示的一些代码，如果编译会出错，但在我的实际代码中，我调用的活动 B 和列表视图运行良好。

请帮忙！:)

我的代码：

```
import java.io.Serializable;
import java.util.ArrayList;

import org.json.JSONObject;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;

public class Main extends Activity implements Serializable,
        OnClickListener {

    // fetch  data in form of string from the url
    public String InternetData;

     public static ArrayList<String> List;
    public static Boolean hasRanOnce;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Initialize();
        // begin AsyncTask doInBackground 
        RequestData();
    }

    private void Initialize() {
        hasRanOnce = Boolean.FALSE;

        List = new ArrayList<String>();
    }

    private void RequestData() {
            //string is a url, I removed it from here

        GetMethodEx requestObject = new GetMethodEx();
        requestObject.setActivity(this);
        requestObject.execute(string);
    }

    // function called by OnPostExecute of GetMethodEx
    public void BuildNodes() {

        try {
            // create JSON objects  
            rootNode = rootNode.createNode(jObject);

            passList.add(rootNode);
        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    protected void StartList() {
        // start new activity for publishing the results as a list
        Intent myList = new Intent(this, List.class);
        myList.putExtra("passList", passList);
        hasRanOnce = Boolean.TRUE;
        startActivity(myList);

    } 
```

///##我可能面临的问题

```
 @Override
    public void onClick(View v) {

        switch (v.getId()) {
        case R.id.Display:
            StartList();
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_menu, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:39:07.053

```
android:onClick="Click" 
```

将上面的代码放在你的 xml 文件中，然后在你的活动中编写函数，例如

```
public void Click(View v)
{
// do something 
} 
```

或者你可以这样做

```
button=(button) findViewById(R.id.btn);
    button.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
                                         }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:42:18.257

```
 Try this code

  button.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    // TODO Auto-generated method stub

    Intent myList = new Intent(this, List.class);
            myList.putExtra("passList", passList);
            hasRanOnce = Boolean.TRUE;
            startActivity(myList);
                }
            }); 
```**

# delphi - Delphi：以非默认非 Unicode 系统语言作为字符串 (ANSI) 的 TRichEdit 文本

> ID：15741774
> 
> 赞同：4
> 
> 时间：2013-04-01T10:31:58.390
> 
> 标签：delphi, delphi-7, richedit, input-language

**所以这里是设置：**

1.  制作一个带有 TRichEdit 控件的新 Delphi 7 应用程序。我们在这里讨论的是非 Unicode 应用程序。
2.  在 Windows 的区域和语言选项中安装新的输入语言，该语言的编码与**[*非 Unicode 程序*](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/int_pr_select_language_version.mspx?mfr=true)****的默认语言的编码不同[](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/int_pr_select_language_version.mspx?mfr=true)***- 例如希腊语。*
**   在应用程序中添加一个按钮，并在其`OnClick`处理程序中添加`Button1.Caption := RichEdit1.Text;`，并将其设置`Font.Charset`为您刚刚安装的输入语言的字符集（`GREEK_CHARSET`如果我们坚持这个例子）。*   运行应用程序，切换到新的（希腊语）输入语言，在 RichEdit 中键入几个字母并按下按钮 - 按钮的标题现在有`????`符号而不是希腊字符。

    *   现在，如果您将*非 Unicode 程序的默认语言*设置为希腊语（需要重新启动 Windows），这个问题就会消失 - 希腊字符会正确显示。将*非 Unicode 程序的默认语言*设置回原来的状态，问题又出现了。* 

 *所以我猜 TRichEdit 在内部使用 Unicode，因为更改其 Font.Charset 值永远不会改变任何东西 - RichEdit 正确接受任何已安装的输入语言，并且如果您安装了两种使用不同字符集的不同非拉丁语言（希腊语 / `GREEK_CHARSET`/ 和俄语 / `RUSSIAN_CHARSET`/ 例如）它会在不更改其 Font.Charset 的情况下同时接受它们。

我还猜想，当您获得 TRichEdit 的`.Text`（或`.Lines[i]`）值时，它会根据 Windws 的*非 Unicode 程序默认语言*将其内部 Unicode 文本转换为 ANSI 。

此外，将`.Text`值分配给 WideString 或 UnicodeString 也无法正常工作（文本再次出现`????`而不是正确的字符），不仅是在将其分配给字符串 (AnsiString) 时。

**那么问题来了：**

我希望能够根据我选择的字符集而不是系统*默认的非 Unicode 程序语言，*将 RichEdit 的文本正确转换为字符串 (ANSI) 。我怎样才能做到这一点？我更喜欢不涉及第三方组件的解决方案，但是，当然，如果不可能 - 任何事情都可以。

谢谢！

PS：切换到 Delphi 2009 或更高版本不是可接受的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T10:41:57.323

向底层富编辑窗口[`EM_GETTEXTEX`](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb774192.aspx)发送消息。您传递一个[`GETTEXTEX`](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb787913.aspx)指定代码页的结构。

因此，这样的事情会将文本拉出为 UTF-16 编码`WideString`：

```
function GetRichEditText(RichEdit: TRichEdit): WideString;
var
  GetTextLengthEx: TGetTextLengthEx;
  GetTextEx: TGetTextEx;
  Len: Integer;
begin
  GetTextLengthEx.flags := GTL_DEFAULT;
  GetTextLengthEx.codepage := 1200;
  Len := SendMessage(RichEdit.Handle, EM_GETTEXTLENGTHEX, 
    WPARAM(@GetTextLengthEx), 0);
  if Len=E_INVALIDARG then
    raise Exception.Create('EM_GETTEXTLENGTHEX failed');
  SetLength(Result, Len);
  if Len=0 then
    exit;
  GetTextEx.cb := (Length(Result)+1)*SizeOf(WideChar);
  GetTextEx.flags := GTL_DEFAULT;
  GetTextEx.codepage := 1200;
  GetTextEx.lpDefaultChar := nil;
  GetTextEx.lpUsedDefChar := nil;
  SendMessage(RichEdit.Handle, EM_GETTEXTEX, WPARAM(@GetTextEx), 
    LPARAM(PWideChar(Result)));
end; 
```

然后，您可以将该 UTF-16 字符串转换为您喜欢的任何代码页。如果您宁愿直接在特定代码页中将其拉出，请执行以下操作：

```
function GetRichEditText(RichEdit: TRichEdit; AnsiCodePage: UINT): AnsiString;
var
  GetTextLengthEx: TGetTextLengthEx;
  GetTextEx: TGetTextEx;
  Len: Integer;
begin
  GetTextLengthEx.flags := GTL_DEFAULT;
  GetTextLengthEx.codepage := AnsiCodePage;
  Len := SendMessage(RichEdit.Handle, EM_GETTEXTLENGTHEX, 
    WPARAM(@GetTextLengthEx), 0);
  if Len=E_INVALIDARG then
    raise Exception.Create('EM_GETTEXTLENGTHEX failed');
  SetLength(Result, Len);
  if Len=0 then
    exit;
  GetTextEx.cb := (Length(Result)+1)*SizeOf(AnsiChar);
  GetTextEx.flags := GTL_DEFAULT;
  GetTextEx.codepage := AnsiCodePage;
  GetTextEx.lpDefaultChar := nil;
  GetTextEx.lpUsedDefChar := nil;
  SendMessage(RichEdit.Handle, EM_GETTEXTEX, WPARAM(@GetTextEx), 
    LPARAM(PWideChar(Result)));
end; 
```*

# azure - 天蓝色项目的内部服务器错误

> ID：15741775
> 
> 赞同：1
> 
> 时间：2013-04-01T10:31:59.030
> 
> 标签：azure, visual-studio-express, internal-server-error

我正在关注本教程[http://blogs.msdn.com/b/jmeier/archive/2010/03/24/how-to-use-asp-net-forms-auth-with-sql-server.aspx](http://blogs.msdn.com/b/jmeier/archive/2010/03/24/how-to-use-asp-net-forms-auth-with-sql-server.aspx) 和我我现在正在运行该项目。在运行项目时，我收到内部服务器错误：由于发生内部服务器错误，无法显示页面。

我正在使用 Visual Studio Express 2012 for Web。我已经更改了 web.config 文件中的连接字符串，如下所示，但我不确定这是否会导致问题。

有什么方法可以让我看到确切的错误并修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:18:36.837

此配置中的关键部分是网络配置。您如何确保 Azure 云服务机器能够连接您的本地机器？您是否正确配置了所有防火墙和端口，以确保连接不是问题。对于网络特定问题，您可能会遇到一般错误，因此您可能需要自己解决网络特定问题以确保正确性。

您可以使用[此](http://msdn.microsoft.com/en-us/library/windowsazure/hh509003.aspx)更新的文档将本地 SQL Server 与 Azure 云服务连接起来。本文档使用 Azure Connect（仍处于 Beta 版且几乎已弃用），因此您可以了解您的网络应该如何对您的 Windows Azure 云应用程序可见。

如果您不想使用 On-Premise SQL Server 并且想要使用 SQL Azure 或 Azure Storage，那么表单身份验证过程可能会简单得多。如果您想使用它，这里有更多详细信息：

1.  [使用 Windows Azure 存储的基于表单的身份验证](http://msdn.microsoft.com/en-us/library/windowsazure/hh508987.aspx)
2.  [使用 SQL Azure 进行基于表单的身份验证](http://msdn.microsoft.com/en-us/library/windowsazure/hh508981.aspx)

# jquery - mvc3 中的选项卡验证

> ID：15741777
> 
> 赞同：0
> 
> 时间：2013-04-01T10:32:17.507
> 
> 标签：jquery, asp.net-mvc-3, validation

我使用带有 jquery 验证的 MVC3 应用程序。我使用此忽略禁用了 jquery.validate.unobtrusive.js 中的隐藏字段验证：“：hidden”。

我的应用程序中有两个选项卡。当我单击提交时，即使我有另一个选项卡，也只有突出显示的选项卡会得到验证，字段不会在另一个选项卡上得到验证。所以我决定使用一个 javascript 函数来获取我的选项卡上的所有输入字段并验证它们。

```
function NextOnclick() {
     for (var i = 0; i < 4; i++) {

            $('input', '#tab' + i).valid();

        }
} 
```

但是，当调用 validate 方法时，它会给我错误

```
Form is null or not an object 
```

我在这里做错了什么？除了急切验证之外，还有其他方法可以在 MVC3 中进行选项卡验证吗？我想对表单提交进行验证。谢谢！

# iphone - 如何擦除drawrect中绘制的线条？

> ID：15741782
> 
> 赞同：0
> 
> 时间：2013-04-01T10:32:28.093
> 
> 标签：iphone, objective-c, uiview, drawrect

我有一个 UIView BoardView 我在其中画线。当我在表格视图中推送一个单元格时，我在 BoardView 中画了一条线。

当我按下第一个单元格时，一切正常，线条被绘制出来。现在，如果我按下第二个单元格，我想擦除第一行并绘制第二行。

我有一个布尔值来知道我是否必须画线。

在 viewController 中：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    if(self.boardView.drawLine) {
        self.boardView.drawLine = NO;
       [self.boardView setNeedsDisplay]; //redisplay the context without lines
    }

    Path * path = [self.grid.sommesPathArray objectAtIndex:indexPath.row];
    [self.boardView drawPath:path];
    self.boardView.drawLine = YES;
    [self.boardView setNeedsDisplay]; // display the context with a line
} 
```

在 BoardView.m 中：

```
- (void)drawRect:(CGRect)rect {

    if (self.drawLine) {
            for(Line * line in lines)
            [self drawLineWithContext: UIGraphicsGetCurrentContext() andLine:line]; //draw lines
    }

} 
```

我的问题是这些行没有被删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:37:53.717

当您按下或选择第二个单元格或任何单元格时尝试这个。.

```
 [self.boardView.path removeAllObjects];  
    [self.boardView setNeedsDisplay]; 
```

或者

```
 [self.grid.sommesPathArray removeAllObjects];    
    [self.boardView setNeedsDisplay]; 
```

或者只是删除所有`UIBezierPath`用于在您的视图链接上绘制线的点波纹管..

```
[myPath removeAllPoints];
[self setNeedsDisplay]; 
```

# xml - ADF中EL中的#和$有什么区别

> ID：15741793
> 
> 赞同：1
> 
> 时间：2013-04-01T10:33:26.697
> 
> 标签：xml, xml-parsing, expression, el, oracle-adf

在评估 EL 时，对 # 和 $ 之间的区别有一个非常基本的问题。前任。

```
<c:if test="#{bindings.value == true}"> 
```

和

```
<c:if test="${bindings.value == true}"> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T11:57:35.990

$ 称为即时评估语法，而 # 称为延迟评估语法 查看此参考[http://docs.oracle.com/javaee/5/tutorial/doc/bnahq.html#bnahr](http://docs.oracle.com/javaee/5/tutorial/doc/bnahq.html#bnahr)

# linux - Linux如何启动“sftp-server”？

> ID：15741796
> 
> 赞同：7
> 
> 时间：2013-04-01T10:33:33.460
> 
> 标签：linux, sftp, openssh, rhel, sshd

我对它不是很熟悉，但是`openssh/sftp-server`（之前由供应商）安装了`RHEL`它，并且在我重新启动服务器之前它运行良好。然后当我重新启动后检查时：

```
# ps aux | grep ftp 
```

没有`sftp`正在运行，但正在运行`sshd`。

那么我该怎么做才能让这个`sftp`运行呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-26T19:05:06.373

您只需将以下行添加到您的 /etc/ssh/sshd_config 文件中：

```
Subsystem sftp /usr/libexec/openssh/sftp-server 
```

或者

```
Subsystem sftp /usr/lib/openssh/sftp-server 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T11:05:20.253

如果在 openssh 的配置文件中启用了 sftp 子系统，它会按需启动。检查配置文件（接近其末尾）以查看是否启用了 sftp 子系统以及 sftp 可执行文件的路径是否正确。

# c# - Protobuf.Net 可以序列化动态字典吗？

> ID：15741797
> 
> 赞同：3
> 
> 时间：2013-04-01T10:33:44.193
> 
> 标签：c#, protobuf-net

我有一本动态的字典。

`public Dictionary<int, dynamic> Data = new Dictionary<int, dynamic>();`

动态部分将包含仅由 5-6 个 get/set 属性组成的简单类，例如类的外观。

```
public class Class1
{
    public int Property1 { get; set; }
    public int Property2 { get; set; }
} 
```

和

```
public class Class2
{
    public string Property1 { get; set; }
    public string Property2 { get; set; }
} 
```

我尝试将这两个类添加到我的字典中，然后序列化字典但收到错误。只是想知道 Protobuf.Net 是否能够序列化和反序列化这样的字典？如果是这样，这是如何完成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:04:00.943

简短的回答是“不是真的”。可能有一些方法可以让它工作，但我不推荐它——它很难维护。

当序列化程序提前知道结构时，protobuf-net（通常是 protobuf）效果最好。

# pycuda - PyCUDA：调用函数的函数的语法

> ID：15741799
> 
> 赞同：1
> 
> 时间：2013-04-01T10:34:11.173
> 
> 标签：pycuda

当使用来自 SourceModule 的函数依赖于 SourceModule 中的另一个函数时，我如何在函数调用中传递它，即什么是“？？？” 在以下代码中：

```
import numpy
import pycuda.autoinit
import pycuda.driver as drv
from pycuda.compiler import SourceModule

mod = SourceModule("""
__global__ void make_square(float *in_array, float *out_array)
{
  int i;
  int N = 5;
  for (i=0; i<N; i++)
  {
    out_array[i] = pow(in_array[i],2);
  }
}
__global__ void make_square_add_one(float *in_array, float *out_array, void make_square(float *, float *))
{
  int N = 5;
  make_square(in_array,out_array);
  for (int i=0; i<N; i++)
    out_array[i] = out_array[i] + 1;
}
""")

make_square = mod.get_function("make_square")
make_square_add_one = mod.get_function("make_square_add_one")
in_array = numpy.array([1.,2.,3.,4.,5.]).astype(numpy.float32)
out_array = numpy.zeros_like(in_array).astype(numpy.float32)
make_square_add_one(drv.In(in_array), drv.Out(out_array), ??? , block = (1,1,1), grid = (1,1)) 
```

感谢您提供任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:05:29.327

在传统的 CUDA 执行模型中，__global__ 函数是内核，不能作为参数传递给其他内核，也不能被其他内核调用。看起来`make_square`应该真的是一个设备功能，例如：

```
__device__ void make_square(float *in_array, float *out_array)
{
  int i;
  for (i=0; i<5; i++)
  {
    out_array[i] = pow(in_array[i],2);
  }
} 
```

然后从正在运行的内核调用它：

```
__global__ void make_square_add_one(float *in_array, float *out_array)
{
  int N = 5;
  make_square(in_array,out_array);
  for (int i=0; i<N; i++)
    out_array[i] = out_array[i] + 1;
} 
```

值得注意的是，这个内核完全是串行的，并且与 CUDA 内核的预期编写方式几乎正交。

# css - HTML 5 字体大小

> ID：15741800
> 
> 赞同：-5
> 
> 时间：2013-04-01T10:34:16.447
> 
> 标签：css, html

我想为手机制作网站如何使字体大小随着手机屏幕的分辨率而延伸

```
<!DOCTYPE html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
p{font-size:1em;
/* font-size:20px; */
}
</style>
</head>

<body>

<p>
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard 
dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has s
urvived not only five centuries, but also the leap into electronic  .
</p>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T10:36:32.790

使用`em`而不是`px`

例子：

```
font-size: 1.1em; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:46:21.557

将元数据放在标题部分。

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

# php - CodeIgniter Hello World MVC 有两个模型

> ID：15741804
> 
> 赞同：0
> 
> 时间：2013-04-01T10:34:38.353
> 
> 标签：php, codeigniter

我的 CI 控制器如下所示：

```
 // Controller.
 class Hello extends CI_Controller
 {
     public function one($name)
     {
         $this->load->model("hello_model");

         $profile = $this->hello_model->getProfile("Me");
         //$profile2 = $this->hello_model->otherAction();

         $this->load->view('header');

         $data = array("name" => $name);
         $data['profile'] = $profile;
         $this->load->view('one.html', $data);
     }
 } 
```

这是/是模型

```
 class Hello_model extends CI_Model
 {
     public function getProfile($name)
     {
         return array("fullName" => "Martin", "Age" => 28);
     }
 }

 class Hello_model_2 extends CI_Model
 {
     public function otherAction()
     {
         echo "Data";
     }
 } 
```

当我启用该`$profile2`语句并在浏览器中访问控制器时，我在 Apache 错误日志中发现此错误消息：

```
[Mon Apr 01 ...] [error] [client 127.0.0.1]
PHP Fatal error: 
Call to undefined method Hello_model::otherAction() in 
/.../CodeIgniter_2.1.3/application/controllers/Hello.php on line x 
```

`x`声明的行在哪里`profile2`。

我可以在一个“”文件中没有两个类`model`吗？顺便说一句，`.php`CI-speak 中调用的文件是什么？模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:37:11.527

每个文件必须只有一个模型。

[http://ellislab.com/codeigniter/user-guide/general/models.html](http://ellislab.com/codeigniter/user-guide/general/models.html)

而是在同一类中创建另一个方法，例如-

```
class Hello_model extends CI_Model
 {
     public function getProfile($name)
     {
         return array("fullName" => "Martin", "Age" => 28);
     }

     public function otherAction()
     {
         echo "Data";
     }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T10:37:28.510

你必须创建两个单独的类文件

你好_model.php

```
 class Hello_model extends CI_Model
 {
     public function getProfile($name)
     {
         return array("fullName" => "Martin", "Age" => 28);
     }
 } 
```

hello_model_2.php

```
 class Hello_model_2 extends CI_Model
 {
     public function otherAction()
     {
         echo "Data";
     }
 } 
```

并调用控制器

```
 $this->load->model("hello_model");
     $this->load->model("Hello_model_2");

     $profile = $this->hello_model->getProfile("Me");
     $profile2 = $this->hello_model_2->otherAction(); 
```

或者

**您可以在模型中使用多种方法**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T11:35:46.380

如果你想创建 2 个模型文件`Hello_model`然后也像这样`Hello_model_2`加载`Hello_model_2`

```
class Hello extends CI_Controller
{
 public function one($name)
 {
     $this->load->model("hello_model");
     $this->load->model("hello_model_2");

     $profile = $this->hello_model->getProfile("Me");
     $profile2 = $this->hello_model_2->otherAction();

     $this->load->view('header');

     $data = array("name" => $name);
     $data['profile'] = $profile;
     $this->load->view('one.html', $data);
 }
} 
```

如果您使用一个模型和两个功能，那么您应该将此代码用于您的模型

```
class Hello_model extends CI_Model
{
   public function getProfile($name)
   {
       return array("fullName" => "Martin", "Age" => 28);
   }

   public function otherAction()
   {
      echo "Data";
   }
} 
```

希望你能理解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T10:54:12.297

您可以尝试将一个模型的“EXTENDS”转换为另一个模型

```
class Hello_model extends CI_Model
{
   public function getProfile($name)
   {
      return array("fullName" => "Martin", "Age" => 28);
   }

   public function otherAction()
   {
      echo "Data";
   }
} 
```

然后创建第二个模型，如 Hello_model_2.php

```
class Hello_model_2 extends Hello_model
{ 
    //Here access those from Hello_model
} 
```

# c++ - 在 C++ 中复制到剪贴板？

> ID：15741811
> 
> 赞同：4
> 
> 时间：2013-04-01T10:35:00.717
> 
> 标签：c++, qt, clipboard

我想在我的 C++ 应用程序中将一些字符串复制到剪贴板。我怎样才能做到这一点？也可以复制格式吗？谢谢你

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-01T10:59:59.937

您说您在其中一条评论中使用了 Qt。

Qt 有[QClipboard](http://qt-project.org/doc/qt-4.8/qclipboard.html)类，这是你想要的（奖励：这是跨平台的）。

你几乎可以放任何你想要的东西，数据是通过 MIME 类型管理的。这意味着您可以使用“自定义”MIME 类型在剪贴板中使用自己的数据格式。请注意，格式化通常使用 html 文本 ( `text/html`) 完成，而纯文本在`text/plain`(对于纯文本 Qt 提供了函数`text()`)。

# openerp - Openerp：即使进货处于完成状态，如何取消订单

> ID：15741821
> 
> 赞同：1
> 
> 时间：2013-04-01T10:35:48.847
> 
> 标签：openerp

所以我有一个订单，其中有一个已完成状态的进货。用户试图退货。交货单已经下达，但他们取消了。

现在我不确定如何退货并取消订单。

请指教。

谢谢你，维沙尔·基亚拉尼

# excel - excel数据格式化数字

> ID：15741823
> 
> 赞同：0
> 
> 时间：2013-04-01T10:35:56.563
> 
> 标签：excel, number-formatting

我的数据来自数据库并填充到 excel 中，但是当我的数据看起来像这个`65.90`excel 显示时`65.9`，如果我对其使用格式设置，那么我将面临问题：值`65`并且它显示`65.00`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:24:27.167

要保持前导零或尾随零，请将单元格格式化为文本。

# macos - aspell 在 mac 上不起作用 - 山狮，需要作为 guiguts 插件

> ID：15741828
> 
> 赞同：1
> 
> 时间：2013-04-01T10:36:14.250
> 
> 标签：macos, terminal, aspell

以普通用户身份在命令行中键入 aspell 时，我收到以下错误消息。

```
aspell
dyld: Library not loaded: /usr/local/lib/libaspell.15.dylib
  Referenced from: /usr/local/bin/aspell
  Reason: no suitable image found.  Did find:
/usr/local/lib/libaspell.15.dylib: stat() failed with errno=13
/usr/local/lib/libaspell.15.dylib: stat() failed with errno=13
Trace/BPT trap: 5 
```

但是，作为 root，我没有收到此错误。

当以普通用户身份从命令行使用 guiguts 时，我没有收到错误消息，但作为 root 我得到以下信息：

```
Guiguts 1.0.23: If you have any problems, please include any error messages that appear
here with your bug report.
Error: No word lists can be found for the language "en_US".
Error: No word lists can be found for the language "en_US". 
```

我该怎么做才能让 aspell 工作？

我试图导航到 /usr/local/lib 但无法作为普通用户。但是，作为 root 我可以看到 libaspell.15.dylib 文件在那里。

# php - 通过属性ID显示属性不在magento的产品页面上

> ID：15741829
> 
> 赞同：0
> 
> 时间：2013-04-01T10:36:15.407
> 
> 标签：php, magento, attributes

我正在尝试在 magento 中通过属性 id 显示带有 html 的属性...需要注意的是，我不必在产品页面上显示它，而是在自定义模块的 phtml 上显示它.....请帮助我因为我花了将近 8 个小时，所以这对我来说很重要

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:07:45.917

试试这个

```
$attributes = Mage::getSingleton('eav/config')
        ->getEntityType(Mage_Catalog_Model_Product::ENTITY)
        ->getAttributeCollection()
        ->addSetInfo();

foreach ($attributes as $attribute)
{
    if ($attribute->usesSource())
    {
        echo "{$attribute->getFrontendLabel()}:\n";
        foreach ($attribute->getSource()->getAllOptions() as $option)
        {
            echo "  {$option['label']}\n";
        }
        echo "\n";
    }
} 
```

或者试试下面的代码

```
$attributeModel = Mage::getSingleton('eav/config')
    ->getAttribute('catalog_product', $attributeCode); 
```

`$attributecode`属性代码在哪里，例如颜色，制造。

有关更多信息，您可以参考此[链接](http://blog.chapagain.com.np/magento-how-to-get-attribute-name-and-value/)

# jquery - jquery parent() 问题

> ID：15741830
> 
> 赞同：0
> 
> 时间：2013-04-01T10:36:19.940
> 
> 标签：jquery, parent

**我英语说得不好**，所以我现在展示我的代码和问题。

这是我的代码：

HTML：

```
<td class="yyyy">
    <a id="delete" href="#" >Anchor</a>
</td> 
```

JS：

```
$(function(){
    $("a#delete").click(function(e){
        e.preventDefault(); 
        var s = $(this).parent("td").attr("class");
        alert(s);           
    });    
}); 
```

它返回一个警报“未定义”。我认为它必须是“yyyy”。

谁能帮我？

谢谢！ [http://jsfiddle.net/NguyenThanh/WEaYw/4/](http://jsfiddle.net/NguyenThanh/WEaYw/4/)

***我解决了我编写表（tr，td）的完整html内容的问题。再次感谢！***

```
<table>
<tr>
    <td class="yyyy">
            <a id="delete" href="#" >Anchor</a>
    </td>
</tr>
</table>

$(function(){
    $("a#delete").click(function(e){
        var s = $(this).parent("td").attr("class");             
        alert(s);   
        e.preventDefault(); 
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:38:20.417

试试这个：

```
$("#delete").click(function(e){
    e.preventDefault(); 
    var s = $(this).closest("td").attr("class");
    alert(s);           
}); 
```

[**在这里演示**](http://jsfiddle.net/WEaYw/5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T10:39:32.053

尝试使用 [.closest](http://api.jquery.com/closest/)

```
 $(this).closest("td").attr("class"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T10:42:31.783

您不能`<td>`像在小提琴中那样拥有这样的东西，它应该包含在`<table>`and中`<tr>`：

```
<table>
<tr>
    <td class="yyyy"> 
     <a id="delete" href="#">Anchor</a>
    </td>
</tr>
</table> 
```

试试这个：

```
 $("a#delete").click(function (e) {
       var s = $(this).parent("td").attr("class");
       alert(s);
       e.preventDefault();
    }); 
```

### [在 FIDDLE 中查找](http://jsfiddle.net/WEaYw/17/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T10:43:26.810

```
jQuery("#delete").click(function(e){
    e.preventDefault(); 
    var s = jQuery(this).closest("td").attr("class");
    alert(s);           
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-01T10:47:38.067

我对您的代码进行了更改，请检查下面的 jsfiddle 链接

：http: [//jsfiddle.net/WEaYw/18/](http://jsfiddle.net/WEaYw/18/)

```
<table>
  <tr>
    <td class="yyyy">
            <a id="delete" href="#" >Anchor</a>
    </td>
  </tr>
</table>

 jQuery(function($){
   $("a#delete").click(function(e){
      var s = $(this).parent("td").prop("class");

      alert(s); 
      e.preventDefault();   
   });
}); 
```

# node.js - Node.js 快递

> ID：15741831
> 
> 赞同：1
> 
> 时间：2013-04-01T10:36:23.257
> 
> 标签：node.js, express

我有一个快递服务器，我想写一些类似的东西

```
for(p in params)
    app.get("/"+p,function (req, res) {res.send(p)}); 
```

现在，对于 params[0]，请求到达，但响应是 params[n-1]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:47:22.747

您可以使用匿名函数在每次迭代时复制“p”。

```
var http = require('http');
var express = require('express');
var app = express();

var params = {
    'a' : 1,
    'b' : 2,
    'c' : 3
};

for (p in params) {
    (function (p) {
        app.get('/' + p, function (req, res) { res.send(p); });
    })(p);
}

http.createServer(app).listen(1339, '0.0.0.0'); 
```

# jsp - 带有数据库值的下拉列表在 Liferay 中显示为空

> ID：15741838
> 
> 赞同：2
> 
> 时间：2013-04-01T10:36:46.137
> 
> 标签：jsp, liferay

我想在来自数据库的下拉列表中显示值。代码如下`<form>`：

```
<aui:select id="empName" name="empName">

<%
Employee employee;
Employee newEmployee = new EmployeeImpl();
int totalEmployees = EmployeeLocalServiceUtil.getEmployeesCount();
for(int i=0; i<totalEmployees;i++) {
%>

<aui:option name = "opt" value ='<%=String.valueOf(newEmployee.getEmpFname())%>' />

System.out.println("newEmployee.getFname string value in loop: " +newEmployee.getEmpFname());

<%
}
%>

</aui:select> 
```

它显示了一个很大的空列表。

我应该怎么做才能从数据库中获取下拉列表中的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T14:09:17.417

我可以从您提供的代码中得出以下信息：

```
Employee newEmployee = new EmployeeImpl();
int totalEmployees = EmployeeLocalServiceUtil.getEmployeesCount(); 
```

这段代码在`for`循环之前，所以你所做的只是得到`total-count`而不是实际的`Employees`.

在for循环内部：

```
<aui:option name = "opt" value ='<%=String.valueOf(newEmployee.getEmpFname())%>' /> 
```

您只是通过代码获取一个空字符串`""`或`null`值，`newEmployee.getEmpFname()`因为您的`newEmployee`对象不是来自数据库，而是在 JSP 本身中创建的，因此是一个很大的空列表:-)

我认为您还需要从数据库中返回`List<Employee>`带有`totalEmployees`（总计数）的 a ，而不是创建一个新实例然后只调用`.getEmpFname()`该实例。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-09-11T08:19:27.550

```
enter code here

<aui:select id="empName" name="empName">
<%

int totalEmployees = EmployeeLocalServiceUtil.getEmployeesCount();

List<Employee> list=  EmployeeLocalServiceUtil.getEmployees(0, totalEmployees );

for(Employee employeeList: list)
{

%>  

<aui:option value="<%=employeeList.getEmployeeName()%>"><%=employeeList.getEmployeeName()%> </aui:option>   

<% 
System.out.println(employeeList.getEmployeeName());
%>

<%
}
%>
</aui:select> 
```

# c# - TransactionScope 中的多个 NHibernate 事务

> ID：15741841
> 
> 赞同：2
> 
> 时间：2013-04-01T10:37:04.587
> 
> 标签：c#, nhibernate, transactions, transactionscope, rollback

我有旧版 dll，它在一种方法中使用多个 NHibernate 事务。我的任务是让这个方法充当一个事务，所以我认为 TransactionScope 应该对我有所帮助。但是，当我做了这样的事情时：

```
using (TransactionScope tx = new TransactionScope())
{
    #region.. code inside dll

    using (ISession session1 = ...)
    using (ITransaction tx1 = session.BeginTransaction())
    {
        // ...do work with session
        tx1.Commit();
    }

    using (ISession session2 = ...)
    using (ITransaction tx2 = session.BeginTransaction())
    {
        // ...do work with session
        tx2.Commit();
    }

    #endregion

    tx.Complete();
} 
```

...如果 tx2 下降，方法不会回滚！

我将非常感谢任何建议或提示..

先感谢您

# sql - 如何删除所有外键约束的表？

> ID：15741842
> 
> 赞同：0
> 
> 时间：2013-04-01T10:37:04.460
> 
> 标签：sql, sql-server, sql-server-2008, tsql

TSQL 中是否有任何方法可以删除所有外键约束的表？我搜索了很多但找不到任何东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:44:57.427

```
ALTER TABLE tablename NOCHECK CONSTRAINT all 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T10:52:55.187

要获取引用您的表的所有外键关系，您可以使用此 SQL（如果您使用的是 SQL Server 2005 及更高版本）：

使用下面的脚本

`SELECT * FROM sys.foreign_keys WHERE referenced_object_id = object_id(TableName)`

`SELECT 'ALTER TABLE ' + OBJECT_NAME(parent_object_id) + ' DROP CONSTRAINT ' + name FROM sys.foreign_keys WHERE referenced_object_id = object_id(TableName)`

# c# - 如何比较两个数据表并更新提供结果数据表的数据表中的不匹配行？

> ID：15741843
> 
> 赞同：2
> 
> 时间：2013-04-01T10:37:04.863
> 
> 标签：c#, asp.net

## 主要的数据

Id Name
1 CENTRAL
2 EAST
3 EAST CENTRAL
4 EAST COASTAL
5 NORTH
6 NORTH WEST

7 南

8 中南部

9 西

## 收到的数据

Id 名称 值
1 CENTRAL 125.65
5 NORTH 553.21

## 我希望结果如下

Id 名称 值
1 CENTRAL 125.65
2 EAST 0.0
3 EAST CENTRAL 0.0
4 EAST COASTAL 0.0
5 NORTH 553.21
6 NORTH WEST 0.0
7 SOUTH 0.0
8 SOUTH CENTRAL 0.0
9 WEST 0.0

请注意所有都是数据表我怎么能得到结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:01:34.063

假设您`DataTable`的声明如下：

```
var dt1 = new DataTable();
dt1.Columns.Add(new DataColumn("Id", typeof(int)));
dt1.Columns.Add(new DataColumn("Name", typeof(string)));

var dt2 = new DataTable();
dt2.Columns.Add(new DataColumn("Id", typeof(int)));
dt2.Columns.Add(new DataColumn("Name", typeof(string)));
dt2.Columns.Add(new DataColumn("Value", typeof(double))); 
```

您可以加入它并使用 LINQ to 对象获得所需的内容：

```
var query = from r1 in dt1.AsEnumerable()
            join r2 in dt2.AsEnumerable() on r1.Field<int>("Id") equals r2.Field<int>("Id") into r3
            from r4 in r3.DefaultIfEmpty()
            select new
            {
                Id = r1.Field<int>("Id"),
                Name = r1.Field<string>("Name"),
                Value = r4 == null ? 0.00 : r4.Field<double>("Value")
            }; 
```

有了它，`IEnumerable<Anonymous_Type>`您可以使用扩展方法取回`DataTable`对象：`ToDataTable<T>`

```
public static class EnumerableToDataTableConverter
{
    public static DataTable ToDataTable<T>(this IEnumerable<T> items)
    {
        DataTable dataTable = new DataTable(typeof(T).Name);
        //Get all the properties
        PropertyInfo[] Props = typeof(T).GetProperties(BindingFlags.Public | BindingFlags.Instance);
        foreach (PropertyInfo prop in Props)
        {
            //Setting column names as Property names
            dataTable.Columns.Add(prop.Name);
        }
        foreach (T item in items)
        {
            var newRow = dataTable.NewRow();
            for (int i = 0; i < Props.Length; i++)
            {
                //inserting property values to datatable rows
                newRow[Props[i].Name] = Props[i].GetValue(item, null);
            }
            dataTable.Rows.Add(newRow);
        }
        //put a breakpoint here and check datatable
        return dataTable;
    }
} 
```

您可以`DataTable`从`query`以下语句中获取：

```
var result = query.ToDataTable(); 
```

# map - mapreduce 中的 job.get() 和 job.getBoolean() 是什么

> ID：15741844
> 
> 赞同：0
> 
> 时间：2013-04-01T10:37:05.347
> 
> 标签：map, hadoop, mapreduce, hdfs, hadoop-streaming

我正在研究通过hadoop进行pdf文档聚类，所以我通过阅读互联网上的一些示例来学习mapreduce。在wordcount示例中有行

```
job.get("map.input.file")
job.getboolean() 
```

这些函数的功能是什么？map.input.file到底是什么，它在哪里设置？还是只是输入文件夹的名称？如果有人知道，请发布答案。

有关代码，请参见以下链接 wordcount 2.0 example= [http://hadoop.apache.org/docs/r1.0.4/mapred_tutorial.html](http://hadoop.apache.org/docs/r1.0.4/mapred_tutorial.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:17:05.830

这些是作业配置。即传递给每个映射器和reducer 的配置集。现在，这些配置包括[定义良好的 mapreduce/hadoop 相关配置](http://hadoop.apache.org/docs/r1.0.4/mapred-default.html)以及用户定义的配置。

在您的情况下，`map.input.file`是一个预定义的配置，是的，它被设置为您设置为输入路径的所有路径的逗号分隔列表。

While`wordcount.skip.patterns`是根据用户输入设置的自定义配置，您可能会看到此配置设置`run()`如下：

```
conf.setBoolean("wordcount.skip.patterns", true); 
```

至于何时使用`get`和何时使用`getBoolean`，应该是不言自明的，因为每当您想设置布尔类型的值时，您将使用`getBoolean`并`setBoolean`分别获取和设置特定的配置值。同样，您也有其他数据类型的特定方法。如果它是字符串，那么您可以使用`get()`.

# ios - 是否有任何 iOS SDK 等效于 gethostbyname 和 inet_ntoa 函数？

> ID：15741848
> 
> 赞同：0
> 
> 时间：2013-04-01T10:37:11.960
> 
> 标签：ios, objective-c, host, gethostbyname, nslookup

我在这里看到了几个问题，但对我来说仍然不清楚。苹果可以拒绝使用标准的 gethostbyname 函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:44:32.810

它在 C 标准库中（至少根据 POSIX）。您可以在 iOS 应用程序中使用所有 C 库函数。

# android - Android 的选定项目选择器不起作用

> ID：15741857
> 
> 赞同：4
> 
> 时间：2013-04-01T10:37:37.960
> 
> 标签：android, listview, css-selectors

我有一个列表视图，我想以自定义方式突出显示选定的项目。我在适配器的`getView`方法中设置每个项目属性，包括`itemView.setSelected(true)`.

主布局通过以下方式定义列表视图：

```
<ListView
android:id="@+id/list"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:choiceMode="multipleChoice"
android:listSelector="@drawable/list_selector" /> 
```

（玩选择模式也无济于事）。

list_selector**是**一个几乎空的存根：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:drawable="@android:color/transparent" />
</selector> 
```

我不需要整个列表视图的特定样式，所以我会保留一个默认样式，但是根据[这个答案](https://stackoverflow.com/a/10501314/1102014)，我们需要一个列表视图的选择器才能使项目选择器工作。无论如何，没有**list_selector**问题仍然存在。

列表视图项目布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:background="@drawable/listitem_background"
    android:orientation="vertical"> 
```

它引用了以下**listitem_background**选择器：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true" android:drawable="@android:color/white" />
    <item android:drawable="@android:color/transparent" />
</selector> 
```

问题是，所选项目没有白色背景。

例如，如果我将**listitem_background**`android:state_selected="true"`中的选择器更改为，则选择器开始工作，即如果触摸项目，项目背景将变为白色。**`android:state_pressed="true"`**

 **所以，我想，选择器或我选择项目的方式都有错误。

我可以通过从 Java 设置背景或利用可检查状态来编写解决方法，但我想了解并修复当前选择器的问题。提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-03T21:23:28.187

在您的项目视图中添加这一行怎么样？

```
android:background="?android:attr/activatedBackgroundIndicator" 
```

例如：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="?android:attr/activatedBackgroundIndicator"
android:orientation="vertical" >

<TextView
    android:id="@+id/textViewListRowOption"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical" />
</LinearLayout> 
```

然后选择器看起来像这样：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android"
android:exitFadeDuration="@android:integer/config_mediumAnimTime">

<item android:drawable="@drawable/list_pressed" android:state_pressed="true"/>
<item android:drawable="@drawable/list_selected" android:state_activated="true"/>
<item android:drawable="@drawable/list_default"/>

</selector> 
```

和列表视图：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ListView
    android:id="@+id/listViewMainFragment"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:listSelector="@drawable/list_item_selector"
    android:choiceMode="singleChoice">
</ListView>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:05:11.007

试试这个来改变选定的列表项。把它放在列表视图中。

```
if (currentSelectedView != null && currentSelectedView != v) {
                unhighlightCurrentRow(currentSelectedView);
            }

            currentSelectedView = v;
            highlightCurrentRow(currentSelectedView);

private void unhighlightCurrentRow(View rowView) {
        rowView.setBackgroundColor(Color.TRANSPARENT);//to set a color for un-seclected row
    }

    private void highlightCurrentRow(View rowView) {
        rowView.setBackgroundResource(R.drawable.selector_img);//to set a color for seclected row
    } 
```**

# web-services - 支持 servlet 3.0 的应用服务器..？

> ID：15741858
> 
> 赞同：-2
> 
> 时间：2013-04-01T10:37:44.617
> 
> 标签：web-services, jsp, web-applications, servlets, servlet-3.0

我需要一个支持 Servlet 3.0 的应用程序服务器..

目前我正在研究 Tomcat，但我需要了解其他一些支持 Servlet 3.0 的应用程序服务器。

如果知道请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:07:51.200

[Jboss Application Server 7](http://www.jboss.org/jbossas.html)支持 Servlet 3.0。还有[更多](https://stackoverflow.com/questions/1979473/available-servlet-3-0-implementations)的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:44:03.237

Tomcat 不是应用服务器，只是一个 servlet 容器。你可以试试 GlassFish。

# vb.net - 在 SSRS 中以 11.5 英寸打印

> ID：15741859
> 
> 赞同：0
> 
> 时间：2013-04-01T10:37:45.230
> 
> 标签：vb.net, reporting-services

我有一份 SSRS 数据报告。交互式尺寸和纸张尺寸均设置为 8.5 X 12 英寸。但是当我打印此报告时，它不会以 11.5 英寸打印。下边距也设置为 0

请指教。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:33:15.643

您可能正在使用横​​向模式将其更改为纵向模式并尝试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:03:11.403

据我所知，SSRS 会让你让报告的“正文”超出边距，这可能是一个问题，但纵向的默认尺寸也是 8.5 x 11。我会做三件事：

1.  转到报表设计器并单击空白处的任意位置以确保显示“报表”选项工具栏。单击它，您应该在此处设置方向以明确声明宽度：8.5 英寸，高度：12 英寸。在这里也明确设置边距。您可能已经这样做了，所以如果它是多余的，我深表歉意

2.  有一个名为“报告”的工具栏菜单视图，它包含一个 L，点位于左上角。这将显示为您标记的英寸。我会选择它，看看是否有任何明显超过或低于设定要求的地方。

3.  检查正在打印的打印机选项。打印机是否知道纸张不是标准尺寸？有时某些驱动程序不会使用 100% 的页面并使用一点点填充，或者假设您使用的是 8.5 x 11。我会使用 SSRS 以外的东西验证您也可以获得您想要的输出。

# udp - Delphi XE2 Indy10 udp 客户端-服务器交换使用 SendBuffer-ReceiveBuffer

> ID：15741862
> 
> 赞同：1
> 
> 时间：2013-04-01T10:37:50.977
> 
> 标签：udp, indy10

我使用 Delphi XE2 和 Indy10 UDP 协议。如果我使用 ReceiveBuffer 方法，我无法在客户端接收服务器回显。尽管我从服务器向客户端发送了非常小的回显消息，但我得到了“套接字错误 # 10040”。说明我的问题的控制台应用程序如下。提前致谢。

```
program Project1;
{$APPTYPE CONSOLE}
{$R *.res}

uses
  System.SysUtils, IdGlobal, IdBaseComponent, IdComponent, IdSocketHandle,
  IdUDPClient, IdUDPServer, IdUDPBase, IdStack;

type
  TUDP_Serv = class(TIdUDPServer)
    procedure udpSvUDPRead(AThread: TIdUDPListenerThread;
      AData: TIdBytes; ABinding: TIdSocketHandle);
  end;
var
  udpServer: TUDP_Serv;
  udpCl: TIdUDPClient;
  bSnd, bRcv: TBytes;
  s: string;
  k: integer;
//==============================================================================
procedure TUDP_Serv.udpSvUDPRead(AThread: TIdUDPListenerThread; AData: TIdBytes;
  ABinding: TIdSocketHandle);
begin
writeln(' Server read: ' + ToHex(AData, length(AData)));
with ABinding do SendTo(PeerIP, PeerPort, AData);
end;
//==============================================================================
begin
try
  udpServer := TUDP_Serv.Create;
  with udpServer do begin
    OnUDPRead := udpSvUDPRead; DefaultPort := 20001; BufferSize := 2048;
    ThreadedEvent := true; Active := True;
    if Active then writeln('Server started on port: ' + IntToStr(DefaultPort));
  end;
  udpCl := TIdUDPClient.Create;
  with udpCl do begin
    BufferSize := 2048; Host := '127.0.0.1'; Port := 20001;
  end;
  SetLength(bSnd, 5); bSnd[0] := $31; bSnd[1] := $0;
  bSnd[2] := $33; bSnd[3] := $0; bSnd[4] := $0;
  repeat
    writeln(' Client send: ' + ToHex(bSnd, length(bSnd)));
    with udpCl do SendBuffer(Host, Port, bSnd); sleep(100);
    try
      k := udpCl.ReceiveBuffer(bRcv, 10);
      if k > 0 then writeln(' Client read: ' + ToHex(bRcv, length(bRcv)));
    except
      on E: exception do begin
        writeln(Format(' Client read err: %s',[E.Message]));
      end;
    end;
    readln(s);
  until s <> '';
except
  on E: Exception do begin
    Writeln(E.ClassName, ': ', E.Message); readln(s);
  end;
end;
end. 
```

屏幕输出：

```
Server started on prot: 20001
 Client send: 3100330000
 Server read: 3100330000
Client read err: Socket Error # 10040
Message too long. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:16:23.213

10040 is `WSAEMSGSIZE`, which means the buffer you tried to receive into was smaller than the actual size of the message that was received.

You are not allocating any memory for `bRcv` before calling `ReceiveBuffer()`, so you are trying to receive into a 0-byte buffer, hense the error. You need to pre-allocate `bRcv` to at least the same size as your messages, if not larger.

`ReceiveBuffer()` does not allocate a new `TBytes` for each received message. You have to allocate the buffer yourself beforehand and then `ReceiveBuffer()` will merely fill it in, returning how many bytes were actually received into it.

# python - 尽管在 closeEvent 上有 event.accept，但 QMainWindow.close 不会关闭窗口

> ID：15741871
> 
> 赞同：0
> 
> 时间：2013-04-01T10:38:43.597
> 
> 标签：python, qt, pyqt

我正在尝试编写一个利用 QMainWindow 并在那里有一个 QMenuBar 的应用程序，该应用程序具有 File->Exit 功能，它也使用 UIC 文件。尽管我付出了努力，但我已经将我的项目剥离到无法正常工作的部分 - closeEvent 被调用，它被接受，但窗口没有关闭。这是我的test.py：

```
#! /usr/bin/env python
# -*- coding: utf-8 -*-

from __future__ import print_function

import sys
from PyQt4 import QtCore, QtGui, uic

class TruEdit(QtGui.QMainWindow):
    def __init__(self):
        QtGui.QDialog.__init__(self)

        self.ui = uic.loadUi("test.ui")
        self.ui.show()

        self.ui.actionWyj_cie.triggered.connect(self.wyjscie)

    def wyjscie(self):
        self.close()

    def closeEvent(self, event):
        event.accept()
        print("WTF, still alive")

    @QtCore.pyqtSlot()
    def reject(self):
        print("Never entered this")
        return None

if __name__=="__main__":
    app = QtGui.QApplication(sys.argv)
    app.setQuitOnLastWindowClosed(True)
    window = TruEdit()
    sys.exit(app.exec_()) 
```

这是test.ui：

```
<?xml version="1.0" encoding="UTF-8"?>
<ui version="4.0">
 <class>MainWindow</class>
 <widget class="QMainWindow" name="MainWindow">
  <property name="geometry">
   <rect>
    <x>0</x>
    <y>0</y>
    <width>800</width>
    <height>600</height>
   </rect>
  </property>
  <property name="windowTitle">
   <string>MainWindow</string>
  </property>

  <widget class="QMenuBar" name="menubar">
   <property name="geometry">
    <rect>
     <x>0</x>
     <y>0</y>
     <width>800</width>
     <height>21</height>
    </rect>
   </property>

   <widget class="QMenu" name="menuPlik">
    <property name="title">
     <string>Plik</string>
    </property>
    <addaction name="actionWyj_cie"/>
   </widget>
   <addaction name="menuPlik"/>
  </widget>
  <widget class="QStatusBar" name="statusbar">
   <property name="statusTip">
    <string/>
   </property>
  </widget>
  <action name="actionWyj_cie">
   <property name="text">
    <string>Wyjście</string>
   </property>
   <property name="shortcut">
    <string>Ctrl+K</string>
   </property>
  </action>
 </widget>
 <resources/>
 <connections/>
</ui> 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-25T07:26:20.207

您可能会在这里找到更好的答案

[PyQt：单击 X 不会触发 closeEvent](https://stackoverflow.com/questions/14834494/pyqt-clicking-x-doesnt-trigger-closeevent)

看来问题出在里面，

```
 self.ui = uic.loadUi("test.ui")
    self.ui.show() 
```

在哪里创建一个名为 self.ui 的实例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:34:00.757

在我看来，您正在覆盖 closeEvent，然后在其中什么也不做。调用`event.accept()`实际上并不执行事件。它只是告诉事件对象它已被接受，因此事件不会继续传播。在 C++ 领域，你需要做这样的事情

```
void closeEvent(QCloseEvent *Event) {
    // do some stuff
    QMainWindow::closeEvent(event);
} 
```

请注意对`QMainWindow`'s close 事件的调用，这是实际关闭窗口的代码所在的位置。

# java - 从 jar 中包含的文件初始化内存中的 H2？

> ID：15741874
> 
> 赞同：0
> 
> 时间：2013-04-01T10:38:53.880
> 
> 标签：java, h2

如何使用 jar 中包含[的文件初始化 H2 ？](http://www.h2database.com/html/features.html#execute_sql_on_connection)

目前我得到这个例外：

> testCase（CheckTest）：org.h2.jdbc.JdbcSQLException：IO异常：“java.io.FileNotFoundException：/Users/user1/.m2/repository/a/3.10-SNAPSHOT/a-SNAPSHOT-tests.jar！/h2_db。 sql (没有这样的文件或目录)"; “文件：/Users/user1/.m2/repository/a/3.10-SNAPSHOT/a-3.10-SNAPSHOT-tests.jar！/h2_db.sql”；SQL 语句：(..)

我想用 ( `h2_db.sql`) 初始化数据库的文件在 jar 文件中`a-3.10-SNAPSHOT-tests.jar`

代码看起来像

```
initSqlFile = getInitSqlFile();
//initSqlFile = "/Users/user1/.m2/repository/a/3.10-SNAPSHOT/a-SNAPSHOT-tests.jar!/h2_db.sql"
//initSqlFile is a file contained ina jar, note the "!"

url = String.format(
      "jdbc:h2:mem:%s;MODE=PostgreSQL;LOCK_TIMEOUT=500;ifexists=true;INIT=runscript from '%s';DB_CLOSE_DELAY=-1;MVCC=TRUE",
       testSuitName, initSqlFile);

// later ...
con = DriverManager.getConnection(url, user, passwd); 
```

虽然这个问题可以相对容易地解决，但我想知道 H2 是否支持从 jar 文件中的文件进行初始化。

或者也许是一个优雅的解决方法，这并不意味着临时文件。

**附加信息**：有一个查找资源的方法，如果在类路径[中找到](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getResource%28java.lang.String%29)资源，则该方法返回[资源的路径](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html#getFile%28%29)。然后将资源的路径 ( `/Users/user1/.m2/repository/a/3.10-SNAPSHOT/a-SNAPSHOT-tests.jar!/h2_db.sql`) 作为参数传递给[初始化数据库](http://www.h2database.com/html/features.html#execute_sql_on_connection)的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:03:01.710

[如文档所述，文件名必须以`zip:`前缀](http://h2database.com/html/advanced.html#file_system)开头：

```
zip:/Users/user1/.m2/repository/a/3.10-SNAPSHOT/a-SNAPSHOT-tests.jar!/h2_db.sql 
```

# sql - 从 3 个表中检索值

> ID：15741879
> 
> 赞同：0
> 
> 时间：2013-04-01T10:39:12.110
> 
> 标签：sql, oracle, plsql

我有三张桌子：

1.  具有字段 cons_id_no、key_id 的消费者
2.  bm_bill 具有字段 key_id、bill_id_no、amt_payable、bill_date（它将包含消费者的所有账单金额和日期）
3.  mreceipt 具有字段 key_id、receipt_no、amt_paid、fine、pay_date（它将包含消费者的所有付款详细信息）

消费者表与 bm_bill 和 mreceipt 是一对多的关系。我想根据消费者的 cons_id_no 创建分类帐信息。它应该包含他的 cons_id_no、key_id、bill_id_no（最新）、bill_date（最新）、amt_payable（最新）、receipt_no（最新）、amt_paid（最新）、fine（最新）、pay_date（最新），为此我创建了以下内容询问

我在***[这里](https://stackoverflow.com/questions/15575157/query-for-retrieving-data-from-3-tables)***提出了这个问题 ，我找到了一个解决方案，但这仍然不够，因为它正在从账单和付款表中检索整个数据。根据我从那里得到的提示，我已经找到了另一种解决方案，如下所示：

首先我创建了一个类型：

```
CREATE OR REPLACE TYPE key_id_row AS OBJECT
    (
        key_id number(10)
    ); 
```

然后创建了一个表类型：

```
CREATE OR REPLACE TYPE key_id_tab AS TABLE OF key_id_row; 
```

然后创建了一个函数：

```
CREATE OR REPLACE FUNCTION get_key_id(cons_id VARCHAR2) RETURN key_id_tab IS
    result_tab key_id_tab;    
BEGIN
    SELECT
        key_id_row(key_id)
    BULK COLLECT INTO 
        result_tab
    FROM
        consumer
    WHERE
        cons_id_no = cons_id;
    RETURN result_tab;    
END get_key_id; 
```

之后我在查询中使用它如下：

```
SELECT
    c.key_id,
    c.cons_id_no consumerid,
    b.bill_id_no,
    b.key_id,
    b.bill_date,
    m.key_id,
    m.receipt_no,
    m.pay_date    
FROM
    consumer c
LEFT OUTER JOIN
    (
        SELECT
            bb.bill_id_no,
            gk.key_id,
            bb.bill_date,
            ROW_NUMBER() OVER (PARTITION BY bb.key_id ORDER BY bb.bill_date DESC) AS rowNumber
        FROM
            bm_bill bb
        JOIN
            TABLE(get_key_id('2114109999')) gk
        ON
            (gk.key_id = bb.key_id)    
    ) b
ON
    (b.rowNumber = 1)
LEFT OUTER JOIN 
    (
        SELECT
            gk.key_id,
            mr.receipt_no,
            mr.pay_date,
            ROW_NUMBER() OVER (PARTITION BY mr.key_id ORDER BY mr.pay_date DESC) rowNumber
        FROM
            mreceipt mr
        JOIN
            TABLE(get_key_id('2114109999')) gk
        ON
            (gk.key_id = mr.key_id)
    ) m
ON
    (m.rowNumber = 1)        
WHERE
    c.cons_id_no='2114109999'; 
```

解决方案是否足够好，或者我是否必须通过以下方式解决问题：

从消费者表中选择 key_id 作为单独的查询，如下所示：

```
SELECT key_id FROM consumer WHERE cons_id_no = '2114109999'; 
```

并将其存储在一个变量中，并在我上面提到的查询中使用该值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:34:09.670

您的解决方案目前正在创建与每个消费者 ID 关联的 key_ids 表。如果您只需要最新的，那么您其他[线程](https://stackoverflow.com/a/15575901/2232918)上的答案是正确的。由于您正在汇总账单和付款表中的最新值，因此在有序表上连接子查询是最好的方法。

我不确定从账单和付款表中检索整个数据是什么意思。如果您的意思是全表扫描，那么这应该通过适当的索引和/或分区来缓解。

您是否希望您的分类帐成为消费者所有账单和付款的完整清单？你的问题给人的印象是你只关心最新的。

# matlab - 如何知道 sin(x) 函数的采样频率

> ID：15741881
> 
> 赞同：0
> 
> 时间：2013-04-01T10:39:18.737
> 
> 标签：matlab, sampling

考虑以下绘制正弦波的脚本。

```
t = 0:pi/100:2*pi;
y = sin(t);
plot(t,y)
grid on % Turn on grid lines for this plot 
```

这给了我一个正弦波图。我理解看起来连续的正弦波实际上应该是离散的（我的 PC 不能存储无限数量的连续信号样本），并且 matlab 绘图函数会进行某种插值来连接点。所以事实上我也使用 stem 而不是 plot 来查看正弦的采样值（在时间轴上）。

现在我的问题是这里必须使用一些采样频率。那个多少钱？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:45:24.350

*采样间隔*是信号的两个连续样本之间的时间间隔。

*采样频率*是指在固定时间间隔内您有多少信号样本，它与采样间隔成倒数。

你声明：

```
t = 0:pi/100:2*pi; 
```

所以你的采样间隔是 π/100。这意味着您的采样频率为 100/π。

如果您想要精确的单位，则必须确定`t`. 如果`t`以秒为单位，那么您的采样频率为 100/π Hz (1Hz = 1sec ^(-1) )。

顺便说一句，MATLAB`plot`用直线连接采样，不涉及额外的插值。

# iphone - 如何使 UITableViewController 在顶部透明？

> ID：15741883
> 
> 赞同：3
> 
> 时间：2013-04-01T10:39:39.333
> 
> 标签：iphone, ios, objective-c

在我的 iPhone 应用程序中，我展示了控制器：

```
 ShareResourceItemViewController* controller = [[ShareResourceItemViewController alloc] initWithSharedResourceItem:[selectedItems objectAtIndex:0]];    
    [self presentViewController:controller animated:YES completion:nil]; 
```

然后在这个控制器中，我想让它在顶部透明。我试过了：

```
-(void)viewDidLoad{
    [super viewDidLoad];
    [self performSelector:@selector(test) withObject:nil afterDelay:3];

}

-(void)test{
    self.tableView.backgroundColor = [UIColor clearColor];
    self.tableView.opaque = NO;
    self.tableView.backgroundView = nil;
} 
```

背景已清理，但控制器不透明，我看不到以前的控制器？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:36:38.243

尝试这个。

```
self.view.backgroundColor = [UIColor clearColor]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:46:55.937

我认为，如果您想查看以前的 View Controller，则不希望呈现新的 View Controller，而是`UIView`在 View Controller 之上放置一个新的 View Controller。视图控制器不能透明或不透明，但视图可以。试试看：

```
ShareResourceItemViewController* controller = [[ShareResourceItemViewController alloc] initWithSharedResourceItem:[selectedItems objectAtIndex:0]];
[self.view addSubview:controller.view]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T10:56:51.710

使表格视图单元格的背景颜色也可以清除颜色。

# asp.net - 如何在 ASP.NET 中更改禁用复选框的标签颜色？

> ID：15741884
> 
> 赞同：2
> 
> 时间：2013-04-01T10:39:40.343
> 
> 标签：asp.net, css, checkbox, controls

如何通过 CSS 更改 asp 控件的禁用复选框标签。检查已禁用，但即使我尝试通过 CSS，标签颜色也没有改变，所以 CSS 有任何线索或提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:52:41.993

使用加号 (+) 获取相邻元素 ( [http://www.w3.org/TR/CSS21/selector.html#adjacent-selectors](http://www.w3.org/TR/CSS21/selector.html#adjacent-selectors) )

```
input[type="checkbox"]:checked+label{ font-weight: bold; }

input[type="checkbox"]:disabled+label
{
     color:#ccc;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:43:48.247

试试下面的方法

```
<div>
  <input type="checkbox" class="check-with-label" />
  <label class="label-for-check">My Label</label>
<div>

.check-with-label:Enabled + .label-for-check {
  font-weight: bold;
  color:red;
} 
```

看到这个[检查设计](http://jsbin.com/oqeteh/11/edit)

更多讨论

[如何在单击切换选中/未选中状态时更改复选框标签的颜色](https://stackoverflow.com/questions/11596837/how-to-change-color-of-checkbox-label-while-toggling-checked-unchecked-state-on)

[选中复选框时更改标签](https://stackoverflow.com/questions/10833982/change-label-when-checkbox-is-checked)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T10:46:05.833

你可以这样使用

```
ListItem li = new ListItem("Richard Byrd", "11");
li.Selected = false;
li.Attributes.Add("Style", "color: red;");
CheckBoxList1.Items.Add(li); 
```

或者你可以像这样使用标签，`td`所以下面可以是一个解决方案

样式.css

```
.chkboxlist td 
{
    color:red;
} 
```

页面.aspx

```
<asp:CheckBoxList ID="chkboxlist1" runat="server" CssClass="chkboxlist" /> 
```

# python - 为什么包含类的名称不被识别为返回值函数注释？

> ID：15741887
> 
> 赞同：19
> 
> 时间：2013-04-01T10:40:13.273
> 
> 标签：python, python-3.x, annotations, type-hinting

我打算使用[Python 函数注释](https://stackoverflow.com/q/3038033/1106367)来指定静态工厂方法的返回值的类型。我知道这是注释[的理想用例之一。](http://www.python.org/dev/peps/pep-3107/#fundamentals-of-function-annotations)

```
class Trie:
    @staticmethod
    def from_mapping(mapping) -> Trie:
        # docstrings and initialization ommitted
        trie = Trie()
        return trie 
```

[PEP 3107](http://www.python.org/dev/peps/pep-3107/)指出：

> 函数注释只不过是在编译时将任意 Python 表达式与函数的各个部分相关联的一种方式。

`Trie`是 Python 中的有效表达式，不是吗？Python 不同意，或者更确切地说，找不到名称：

> `def from_mapping(mapping) -> Trie:`
> `NameError: name 'Trie' is not defined`

值得注意的是，如果指定了基本类型（例如`object`or `int`）或标准库类型（例如`collections.deque`），则不会发生此错误。

**是什么导致了这个错误，我该如何解决？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-01T10:48:58.767

`Trie`是一个有效的表达式，并计算为与名称 name 关联的当前值`Trie`。但是该名称尚未定义——类对象仅在类主体运行完成*后才绑定到其名称。*在这个更简单的示例中，您会注意到相同的行为：

```
class C:
    myself = C
    # or even just
    C 
```

通常，解决方法是在定义类之后在类主体之外设置类属性。这在这里不是一个很好的选择，尽管它有效。或者，您可以在初始定义中使用任何占位符值，然后将其替换为`__annotations__`（这是合法的，因为它是常规字典）：

```
class C:
    def f() -> ...: pass
print(C.f.__annotations__)
C.f.__annotations__['return'] = C
print(C.f.__annotations__) 
```

虽然它*确实*感觉相当hacky。根据您的用例，可能可以改用哨兵对象（例如`CONTAINING_CLASS = object()`）并将其解释给实际处理注释的任何内容。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-05-22T11:25:35.943

[PEP 484 以前向引用](https://www.python.org/dev/peps/pep-0484/#forward-references)的形式为此提供了官方解决方案。

> 当类型提示包含尚未定义的名称时，该定义可以表示为字符串文字，稍后再解析。

在问题代码的情况下：

```
class Trie:
    @staticmethod
    def from_mapping(mapping) -> Trie:
        # docstrings and initialization ommitted
        trie = Trie()
        return trie 
```

变成：

```
class Trie:
    @staticmethod
    def from_mapping(mapping) -> 'Trie':
        # docstrings and initialization ommitted
        trie = Trie()
        return trie 
```

# entity-framework - 将一个 Edmx 实体转换为一个业务实体的最佳方式

> ID：15741889
> 
> 赞同：0
> 
> 时间：2013-04-01T10:40:29.487
> 
> 标签：entity-framework, orm, linq-to-entities

我正在开发一个应用程序，其中数据是从 edmx 实体访问的，并且我们必须在从 edmx 实体检索数据后填充每个业务实体，例如：-

```
var tblproducts = tblproductsData
            .Select(t => new tblProduct()
                {
                    CategoryID = t.CategoryID,
                    Description = t.Description,
                    ID = t.ID,
                    Image = t.Image,
                    InsDt = t.InsDt,
                    Price = t.Price,
                    Quantity = t.Quantity,
                    Status = t.Status,
                    Title = t.Title,
                    tblCategory = new EFDbFirst.Models.tblCategory()
                        {
                            ID = t.tblCategory.ID,
                            status = t.tblStatus.StatusID,
                            Title_Category = t.tblCategory.Title_Category
                        },
                    tblStatu = new EFDbFirst.Models.tblStatu()
                        {
                            StatusDescription = t.tblStatus.StatusDescription
                            ,
                            StatusID = t.tblStatus.StatusID
                        }
                }); 
```

我对此感到厌烦，因为每次我必须在获取数据并在数据库中设置数据时将一个转换为另一个，有没有什么好的方法来创建一些采用一种匿名类型并将其转换为另一种匿名类型的常见方法。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:08:35.157

你的例子不是很清楚。

首先，EF 本身不适用于匿名类型，它适用于您首先使用 edmx 文件或代码定义的 EF 类型。但是，您可以通过定义 Select 语句自己创建匿名类型。

例如：

```
var products = context.tblProductsData
               .Select(r => new { Description = r.Description }); //new without typename is an 
                                                                  //anonymous object 
```

tblProduct、tblCategory 和 tblStatu 对象是 EF 类型吗？如果是这样，你就不需要写Select了，EF会在你执行的时候为你生成对象。

例如：

```
var products = context.tblProductsData.ToList(); 
```

这将自动为您生成 tblProduct 对象。当您尝试导航到 tblProduct.tblCategory 或 tblProduct.tblStatu 时，延迟加载将为您检索它们。如果您想在第一次查询（急切加载）期间显式加载它们，请使用该`Include`函数。

例如：

```
var products = context.tblProductsData.Include(r => r.tblCategory)
                                      .Include(r => r.tblStatu).ToList(); 
```

但是，如果 tblProducts、tblCategory 和 tblStatu 是业务对象而不是 EF 类型，则没有其他方法可以做到这一点，您必须在 Select 语句中显式创建它们。

# javascript - 数据安全图表

> ID：15741890
> 
> 赞同：3
> 
> 时间：2013-04-01T10:40:31.910
> 
> 标签：javascript, security, csv, highcharts

刚开始使用 Highcharts。如果我在 javascript 中的数组中包含数据，则任何人在查看源代码时都可以下载数据。当从 csv 文件调用数据时，这将是相同的。有没有办法保护数据不被复制/下载？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T16:56:40.680

不，因为 HighCharts 是一个客户端 JavaScript 库，它可用的数据也可能对最终用户可用。一旦数据到达用户的浏览器，确实没有办法“保护”它，尽管您可以使用 HTTPS、服务器端身份验证等来至少原则上保证只有目标用户接收数据。

如果您需要在保持实际原始数据安全的同时可视化数据，显而易见的解决方案是在服务器上呈现数据，然后（最终）向用户提供图像或其他静态内容。但是你会失去漂亮的交互式图表。

您也许可以使用 Flash 或 Silverlight 来检索数据，从而使部分过程更难进行逆向工程。这并没有保护任何东西，只是让有决心的用户更难了。

另一方面，用户可以在最终图表中看到数据。如果他们真的想下载数据，他们可以煞费苦心地识别每个数据点并创建自己的 CSV 文件，对吗？您需要弄清楚什么对您的特定用例来说足够好，并取得适当的平衡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:09:10.613

由于 HighCharts 是一个客户端 JS 系统，我不相信有一种方法可以安全地获取数据。如果您只是尝试通过 AJAX 调用在运行时获取数据，用户可以看到该调用和响应。正如您所说，您不能只在源中填充变量，因为它在那里可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-10T16:55:27.297

尝试服务器功能上的渲染图表： [http ://www.highcharts.com/docs/export-module/render-charts-serverside](http://www.highcharts.com/docs/export-module/render-charts-serverside)

# iphone - 证书身份 'iPhone Developer: 在钥匙串中出现多次。协同设计工具只需要一个

> ID：15741898
> 
> 赞同：1
> 
> 时间：2013-04-01T10:41:21.757
> 
> 标签：iphone, keychain

我删除了旧证书。但是这个错误会一次又一次地出现。但是在钥匙串中我只有一个证书。我用的是ios6.1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-02T03:41:21.470

通过遵循@CleverCoder 对[Codesign 错误的回答：证书身份出现两次](https://stackoverflow.com/questions/5932522/codesign-error-certificate-identity-appearing-twice)，我发现只删除私钥（通过单击证书的左三角形）而不是“钥匙串访问”中的证书对我有用。

[![](https://i.imgur.com/y0SoTKU.png)](https://imgur.com/y0SoTKU)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T11:07:16.813

一旦从您的钥匙串中删除您的证书的所有副本，然后再次将其安装在钥匙串中。它会解决你的问题。

希望这可以帮助。谢谢。

# android - android设计的屏幕尺寸（以像素为单位）？

> ID：15741904
> 
> 赞同：5
> 
> 时间：2013-04-01T10:42:14.573
> 
> 标签：android, dpi

正如我在`android`文档站点中发现的那样，Android 设备屏幕有`4`一般尺寸。但我在`dp`. 像这样 ：

```
xlarge screens are at least 960dp x 720dp
large screens are at least 640dp x 480dp
normal screens are at least 470dp x 320dp
small screens are at least 426dp x 320dp 
```

如何在 Photoshop 上做到这一点，如何获得像素大小？我需要有 4 个设计,`ldpi`和`mdpi`吗？我需要有 16 个版本的设计吗？?`hdpi``xhdpi`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T10:59:34.330

是的，您有 4 种设计，例如：

```
xhdpi = 100% image
hdpi = 75% image of xhdpi image
mdpi = 50% image of xhdpi image
ldpi = 50% image of hdpi image 
```

**IE ：**

如果你在 xhdpi 中有 96 x 96 的图像，你需要把

```
72 x 72 in hdpi folder - ( 75 % of xhdpi )
48 x 48 in mdpi folder - ( 50 % of xhdpi )
36 x 36 in ldpi folder - ( 50 % of hdpi ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-09T15:08:50.103

如何在**Photoshop**中做到这一点？

只需创建一个高分辨率版本的图像，其**宽度和高度为 16 的倍数**

然后使用我的 Photoshop **[Output Android Assets](https://gist.github.com/pdalfarr/10271735)**脚本生成

*   **图片的缩小版**
*   和他们的“ **drawable-XXXX** ”文件夹

为什么是 16 像素？为了获得良好的缩小结果：

```
ldpi   mdpi   tvdpi     hdpi    xhdpi   xxhdpi  xxxhdpi
0,75   1      1,33      1,5     2       3       4
3      4      5,32      6       8       12      16 
```

在此处查看我的 SO 答案以获取更多信息： [What is the best way to create drawables for different dpi](https://stackoverflow.com/questions/8934399/what-is-the-best-way-to-create-drawables-for-different-dpi/22966484#22966484)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T12:24:48.760

With my app I chose one screen size for it Hdpi And only used one image android:background="@drawable/imagename"

If you want one for all sizes make one image Resize it for each one Then edit the XML file so that it can be used by the activity

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T12:45:23.433

看看有很多方法，如果你的背景有重复图案，你可以使用九个 png，你会在互联网上得到很多相同的东西。但是如果没有重复的图案，你必须制作 4 张图像

你需要瞄准屏幕拳头，例如你瞄准 xhdpi 然后它的 960px*720 像素，每英寸密度为 320px

现在在 Photoshop 中进行所有设计，考虑最大长度为 960 像素，最大宽度为 720 像素，保持密度为 320。现在缩放图像的密度为 hdpi 的 240 为 mdpi 的 160 和 120 现在您的图像将增加尺寸现在缩放它们正如上面答案中的 ajay 所说

# xslt - xslt：从 xsl 本身获取属性

> ID：15741906
> 
> 赞同：0
> 
> 时间：2013-04-01T10:42:18.193
> 
> 标签：xslt, xslt-1.0

是否可以从 xsl 文档本身读取 xsl 属性？我需要这样的东西：

我的风格.xsl

```
<?xml version="1.0" encoding="iso-8859-1"?>
<xsl:stylesheet
    version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    id="I'm a special stylesheet">

    ...
    <!-- Output should be: "stylesheet id: I'm a special stylesheet" -->
    <xsl:text>stylesheet id:</xsl:text><xsl:value-of select="/@id"/>
    ...

</xsl:stylesheet> 
```

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:25:03.683

是的，您可以使用`<xsl:value-of select="document('')/xsl:stylesheet/@id"/>`，至少只要样式表是从 URI 加载的。

# android - 区分 SQLite 中的 update 和 inset

> ID：15741912
> 
> 赞同：0
> 
> 时间：2013-04-01T10:42:24.227
> 
> 标签：android, sqlite

在 SQlite 中，我怎么能说如果一行存在更新它，否则 createEntry？基本上我想要一个单行表，并在按下单个按钮左右时更新它。

```
entry.open();
if(the row already exist)
entry.updateContact(1, Double.toString(db1), Double.toString(db2), Double.toString(db3));
else
entry.createEntry(Double.toString(db1), Double.toString(db2), Double.toString(db3));
entry.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:49:03.977

听起来你想要`INSERT OR REPLACE`。[在http://www.buzzingandroid.com/2013/01/sqlite-insert-or-replace-through-contentprovider/](http://www.buzzingandroid.com/2013/01/sqlite-insert-or-replace-through-contentprovider/)上有一篇关于此主题的博文

# c# - 使用 .load jquery 时执行 C# 代码

> ID：15741915
> 
> 赞同：1
> 
> 时间：2013-04-01T10:42:28.653
> 
> 标签：c#, javascript, jquery, asp.net, ajax

同样，我环顾四周试图找到一些关于此的帖子，有很多但没有一个可以解决我的具体问题（我可以找到）。

我在看什么：我有一个项目，它在 iframe 中动态加载不同的页面（.aspx）。现在我正在尝试删除 iframe 并添加一个 div 并在该 div 中加载 aspx 页面，使用这个：

```
$("#containerDiv").load("test/default.aspx", function () {
}); 
```

它很容易加载 aspx 页面，但我无法执行`C#`编写的代码`default.aspx.cs`可能不是一个好习惯，但我想知道我的问题是否有任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:01:26.043

`$.load`不会你的 c# 代码为什么，因为它只加载你`aspx`页面的内容而不是`aspx.cs`. 请改用用户控件。

如果需要帮助如何实现用户控制，请参考[此](http://webproject.scottgu.com/CSharp/usercontrols/usercontrols.aspx)链接。

# bash - BASH let 命令..在填充数字上给出错误结果

> ID：15741918
> 
> 赞同：1
> 
> 时间：2013-04-01T10:42:33.070
> 
> 标签：bash, command, let

以下代码按预期打印 4：

```
let x=21
let x=$x-1
echo $x 
```

但以下打印 16：

```
let x=000021
let x=$x-1
echo $x 
```

有人可以解释其中的区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T10:53:40.600

00021 是八进制常数。输出 16 是正确的十进制结果。要获得八进制值，请使用

```
printf "%o\n" $x 
```

如果数字是十进制，则删除前导零。

# c++ - 类及其成员同时继承和多态（shared_ptr，C++11）

> ID：15741920
> 
> 赞同：0
> 
> 时间：2013-04-01T10:42:34.570
> 
> 标签：c++, oop, inheritance, c++11, polymorphism

我正在玩弄以下使用 std::shared_ptr (C++11) 的类结构：

```
#include <string>
#include <iostream>
#include <vector>
#include <memory>

//class Member is given by a 3rd party library, CAN'T modify its structure!
class Member {//no instance of this class allowed
   public:
     Member() {};//should never be called
     virtual ~Member() = 0;//pure virtual distructor;
     virtual void foo() {
       std::cout<<"Member"<<std::endl;
     }
};
Member::~Member() {} //need to define destructor because of child classes 

class ChildMember : public Member {
  public:
     ChildMember() {};
     virtual void foo() {
         std::cout<<"Child Member"<<std::endl;
     }

     virtual void foo2() {
        std::cout<<"unique foo in child"<<std::endl;
     }
};

class Base {
   public:
     Base() {};

   virtual
   std::shared_ptr< Member >
   get_var() {return var;}

   virtual void 
   set_var ( std::shared_ptr< Member > v) { var = v;}

   std::shared_ptr< Member > var;
};

class ChildBase : public Base {
  public:
     ChildBase() {
        //var = std::make_shared<ChildMember>();
     };

  virtual
  std::shared_ptr< ChildMember >
  get_var() {return var;} //(2) : try to comment

  virtual void 
  set_var ( std::shared_ptr< ChildMember > v) { var = v;}

  std::shared_ptr< ChildMember > var;
};

void func(std::shared_ptr<Base> b) {
    b->get_var()->foo();// process input using polymorphism
}

int main() 
{
    std::shared_ptr<ChildBase> cb( std::make_shared<ChildBase>());
    cb->set_var (std::make_shared<ChildMember>() );
    cb->get_var()->foo2();//(3) want to use unique functions of ChildBase;
    cb->var->foo2();      //can access directly as well;
    //cb->var = std::make_shared<ChildMember>();
    func(cb);
} 
```

我尝试做的是设计两个类 (`Base`和`ChildBase`)，其中每个类都有自己的成员`Member`/ `ChildMember`。在充分使用`ChildBase`object 及其类型的成员对象之后，`ChildMember`我将它传递给一个函数，该函数`func`接收`Base`并应该使用**多态性**调用成员的属性。`foo``var`

问题： **（1）** 在上面的变体中，编译器抱怨：

```
 overriding 'virtual std::shared_ptr<Member> Base::get_var()'
     get_var() {return var;}` 
```

**(2)** 如果我注释掉 的`ChildBase`实现`get_var`，则该函数被视为`Base`并因此返回一个`Member`不具有的指针`foo2`。

**(3)** 我也可以注释掉`cb->get_var()->foo2()`。整个事情都编译了，但它似乎没有调用`ChildMember::foo()`，因为没有输出`Child Member`；

有些东西（希望）有点混乱，但我不明白是什么。请各位大神帮忙纠正一下好吗？

**编辑1**：

基于 Abhijit Kadam 的回答，以下代码完全编译：

```
#include <string>
#include <iostream>
#include <vector>
#include <memory>

class Member {//no instance of this class allowed
   public:
     Member() {};
     virtual ~Member() = 0;//pure virtual distructor;
     virtual void foo() {
       std::cout<<"Member"<<std::endl;
     }
};
Member::~Member() {} //need to define destructor for child classes 

class ChildMember : public Member {
  public:
     ChildMember() {};
     virtual void foo() {
        std::cout<<"Child Member"<<std::endl;
     }

     void foo2() {
        std::cout<<"unique foo in child"<<std::endl;
     }
};

class Base {
   public:
     Base() {};

     std::shared_ptr< Member >
     get_var() {return var;}

     void set_var ( std::shared_ptr< Member > v) { var = v;}

     std::shared_ptr< Member > var;
};

class ChildBase : public Base {
  public:
     ChildBase() {
       //var = std::make_shared<ChildMember>();
     };  

     std::shared_ptr< ChildMember > var;
};

void func(std::shared_ptr<Base> b) {
    b->get_var()->foo();// process input using polymorphism
}

 void func_vec( std::vector< 
              std::shared_ptr<Base>
           > vec) {
     for (unsigned int i=0;i<vec.size();i++)
          vec[i]->get_var()->foo();
  }

int main() 
{
   std::shared_ptr<ChildBase> cb( std::make_shared<ChildBase>());
   cb->set_var (std::make_shared<ChildMember>() );

   func(cb);

   std::vector< std::shared_ptr<Base>> vec;
   vec.push_back(cb);
   func_vec(vec);

   cb->var->foo2();

   /*std::shared_ptr<ChildMember> ptr(std::dynamic_pointer_cast<ChildMember>(cb->get_var()) );
   if (ptr) {
      ptr->foo2();
   } */
} 
```

**EDIT2** 在下面添加了一个答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:54:25.423

```
virtual
std::shared_ptr< Member >
get_var() {return var;}

virtual
std::shared_ptr< ChildMember >
get_var() {return var;} //(2) : try to comment 
```

这是错误的覆盖。n3337 10.3/7

> 覆盖函数的返回类型应与被覆盖函数的返回类型相同或与函数的类协变。如果函数 D::f 覆盖函数 B::f，则函数的返回类型如果满足以下条件，则它们是协变的：
> 
> — 都是类的指针，都是类的左值引用，或者都是类的右值引用
> 
> — B::f 的返回类型中的类与 D::f 的返回类型中的类是同一类，或者是 D 的返回类型中的类的明确且可访问的直接或间接基类： ：F
> 
> — 指针或引用都具有相同的 cv 限定，并且 D::f 的返回类型中的类类型具有与 B::f 的返回类型中的类类型相同或更少的 cv 限定。

在您的情况下，所有条件都失败。您可以使用原始指针或参考，例如[http://liveworkspace.org/code/4eQWBI](http://liveworkspace.org/code/4eQWBI) $1 但我认为您应该重写您的界面而不是使用`foo2`，如果它不是虚拟的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T11:04:27.773

要解决您的问题，请查看您的代码的修改和注释版本：

```
#include <string>
#include <iostream>
#include <vector>
#include <memory>

class Member {//no instance of this class allowed
public:
    Member() {};
    virtual ~Member() = 0;//pure virtual distructor;
    virtual void foo() {
        std::cout<<"Member"<<std::endl;
    }
};
Member::~Member() {} //need to define destructor for child classes 

class ChildMember : public Member {
public:
    ChildMember() {};
    virtual void foo() {
        std::cout<<"Child Member"<<std::endl;
    }

    virtual void foo2() {
        std::cout<<"unique foo in child"<<std::endl;
    }
};

class Base {
public:
    Base() {};

    // maybe you should have a virtual dtor here
    virtual ~Base();

    // note: NOT virtual
    std::shared_ptr< Member >
    get_var() {return var;}

    // also NOT virtual
    void set_var ( std::shared_ptr< Member > v) { var = v;}

    std::shared_ptr< Member > var;
};

class ChildBase : public Base {
public:
    ChildBase() {
        //var = std::make_shared<ChildMember>();
    };

    // non-virtual version which casts var to the correct type
    std::shared_ptr< ChildMember >
    get_var() {return std::dynamic_pointer_cast<ChildMember>(var);}

    // note: no var here, use the one from Base
};

void func(std::shared_ptr<Base> b) {
    b->get_var()->foo();// process input using polymorphism
}

int main() 
{
    std::shared_ptr<ChildBase> cb( std::make_shared<ChildBase>());
    cb->set_var (std::make_shared<ChildMember>() );
    cb->get_var()->foo2();//(3) want to use unique functions of ChildBase;

    // This can't work:
    //cb->var->foo2();      //can access directly as well;

    //cb->var = std::make_shared<ChildMember>();
    func(cb);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T11:25:48.143

由于覆盖函数的返回类型不能不同，我将使用动态转换来实现解决方案。因此不需要为 `get_var 和 set_var' 提供虚函数。也不需要 foo2 是虚拟的，除非该类将由其他类进一步派生。

```
int main() 
{
    std::shared_ptr<ChildBase> cb( std::make_shared<ChildBase>());
    cb->set_var (std::make_shared<ChildMember>() );

    shared_ptr<ChildMember> ptr(dynamic_pointer_cast<ChildMember>(cb->get_var()) );
    if (ptr) {
        ptr->foo2();
    } 
}

class Member {//no instance of this class allowed
   public:
     Member() {};
     virtual ~Member() = 0;//pure virtual distructor;
     virtual void foo() {
       std::cout<<"Member"<<std::endl;
     }
};
Member::~Member() {} //need to define destructor for child classes 

class ChildMember : public Member {
  public:
     ChildMember() {};
     virtual void foo() {
         std::cout<<"Child Member"<<std::endl;
     }

     void foo2() {
        std::cout<<"unique foo in child"<<std::endl;
     }
};

class Base {
   public:
     Base() {};

   std::shared_ptr< Member >
   get_var() {return var;}

   void set_var ( std::shared_ptr< Member > v) { var = v;}

   std::shared_ptr< Member > var;
};

class ChildBase : public Base {
  public:
     ChildBase() {
        //var = std::make_shared<ChildMember>();
     };  

  std::shared_ptr< ChildMember > var;
};

void func(std::shared_ptr<Base> b) {
    b->get_var()->foo();// process input using polymorphism
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T11:25:19.220

`shared_ptr`不是指针，所以协方差*不*适用。

通常，无论如何，我对协方差的使用持怀疑态度。我通常发现派生类不更改返回类型并在需要返回指向派生函数的指针时提供新函数更简洁。在您的情况下，我会说这是必不可少的，因为您实际上有两个指针（最终可能指向不同的对象）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T19:46:48.760

过了一会儿，我虽然下面的代码可能是一个很好的解决方案：

```
#include <string>
#include <iostream>
#include <vector>
#include <memory>

class Member {//no instance of this class allowed
   public:
     Member() {};
     virtual ~Member() = 0;//pure virtual distructor;
     virtual void foo() {
       std::cout<<"Member"<<std::endl;
     }
};
Member::~Member() {} //need to define destructor for child classes 

class ChildMember1 : public Member {
  public:
     ChildMember1() {};
     virtual void foo() {
        std::cout<<"Child Member 1"<<std::endl;
     }

     void foo1() {
        std::cout<<"unique foo in child 1"<<std::endl;
     }
};

class ChildMember2 : public Member {
  public:
     ChildMember2() {};
     virtual void foo() {
        std::cout<<"Child Member 2"<<std::endl;
     }
};

class ChildChildMember2 : public ChildMember2 {
   public:
      ChildChildMember2() {};
      virtual void foo() {
         std::cout<<"Child-Child Member 2"<<std::endl;
      }
};

class Base {
   public:
     Base() {};
     virtual
     ~Base() {};

     virtual
     std::shared_ptr< Member >
     get_var() = 0; //purely abstract class

};

class ChildBase1 : public Base {
  public:
     ChildBase1() {
       var = std::make_shared<ChildMember1>();
     };

     virtual
     std::shared_ptr< Member >
     get_var() {return var;}

     std::shared_ptr< ChildMember1 > var;
};

class ChildChildBase : public ChildBase1 {
   public:
      ChildChildBase() {
         var2 = std::make_shared< ChildChildMember2>();
      }

   virtual
   std::shared_ptr< Member >
   get_var() { return var2; }

   std::shared_ptr< ChildChildMember2 > var2;
};

class ChildBase2 : public Base {
  public:
     ChildBase2() {
       var = std::make_shared<ChildMember2>();
     };  

     virtual
     std::shared_ptr< Member >
     get_var() {return var;}

     std::shared_ptr< ChildMember2 > var;
};

void func(std::shared_ptr<Base> b) {
    b->get_var()->foo();// process input using polymorphism
}

int main() 
{
   std::shared_ptr<ChildBase1> cb1( std::make_shared<ChildBase1>());
   cb1->var->foo1();
   func(cb1);

   std::shared_ptr<ChildBase2> cb2( std::make_shared<ChildBase2>());
   func(cb2);

   std::shared_ptr<ChildChildBase> ccb( std::make_shared<ChildChildBase>());
   func(ccb);

} 
```

我认为它在没有并行继承或动态转换的情况下实现了我所追求的。它也有超过1级的继承。

输出是：

```
unique foo in child 1
Child Member 1
Child Member 2
Child-Child Member 2 
```

# android - 在 ListView 中发出绘图自定义项

> ID：15741922
> 
> 赞同：0
> 
> 时间：2013-04-01T10:42:39.680
> 
> 标签：android, android-listview, customization

我需要创建一个带有 TextView 和彩色矩形的自定义 ListView 项。

为此，我有一个 ArrayAdapter：

```
public class JobQuickListAdapter extends ArrayAdapter<Job>{

    private int resource;

    public JobQuickListAdapter(Context context, int resource, List<Job> items) {
        super(context, resource, items);
        this.resource = resource;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        JobTagView jobView;

        Job item = getItem(position);
        String jobTitle = item.getTitle();

        if (convertView == null) {
            jobView = new JobTagView(getContext());
            String inflater = Context.LAYOUT_INFLATER_SERVICE;
            LayoutInflater vi = (LayoutInflater)getContext().getSystemService(inflater);
            vi.inflate(resource, jobView, true);
        } else {
            jobView = (JobTagView) convertView;
        }

        jobView.setColor(Color.BLUE);

        TextView jobTitleText = (TextView)jobView.findViewById(R.id.jobItemTitle);
        jobTitleText.setText(jobTitle);

        return jobView;
    }
} 
```

我的自定义视图从 LinearLayout 扩展：

```
public class JobTagView extends LinearLayout{

    private Paint paintOrig;
    private RectF originRect;
    private boolean pathCreated;

    private int color;

    public JobTagView(Context context) {
        super(context);
        initJobTag();
    }

    public JobTagView(Context context, AttributeSet attrs) {
        super(context, attrs);
        initJobTag();
    }

    private void initJobTag(){
        setWillNotDraw(false);

        paintOrig = new Paint();
        paintOrig.setStyle(Paint.Style.FILL);

        pathCreated = false;
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);

        if (!pathCreated){  
            float hR = h * 14 / 100;
            float wR = w * 2 / 100;
            originRect = new RectF(0, hR, wR, h - hR);

            pathCreated = true;
        }
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        canvas.drawRect(originRect, paintOrig);
    }

    public int getColor() {
        return color;
    }

    public void setColor(int color) {
        paintOrig.setColor(color);
        this.color = color;
        this.invalidate();
    }
} 
```

和布局：

```
<com.sinPlanB.jobSniffer.utils.JobTagView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:custom="http://schemas.android.com/apk/res/com.sinPlanB.jobSniffer.utils"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_margin="5dp"
    android:background="@drawable/job_tab_search">
    <TextView android:id="@+id/jobItemTitle"
        android:textIsSelectable="true"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:lines="2"
        android:textSize="16sp"/>
</com.sinPlanB.jobSniffer.utils.JobTagView> 
```

我的问题是在绘制彩色矩形时出现的，因为矩形似乎被绘制了多次并且每次都有一个小的位移。第一个位于正确位置的黑色矩形和一个错误的蓝色矩形（在更改矩形颜色后创建的那个 -> jobView.setColor(Color.BLUE)）完全移位。

我究竟做错了什么？有没有关于在列表视图中绘制自定义项目的教程？

# iphone - 状态栏点击应该将表格视图滚动到顶部

> ID：15741926
> 
> 赞同：6
> 
> 时间：2013-04-01T10:42:53.020
> 
> 标签：iphone, ios

谁能告诉我如何实现点击状态栏和表格视图应该滚动到顶部。我在该视图控制器中还有另一个滚动视图，用于某些不同的目的。

提前致谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-01T11:01:03.090

如果您在 viewcontroller 中有多个滚动视图，请将 setScrollsToTop 属性设置为 YES，以便在用户点击状态栏时滚动您想要滚动的滚动视图。并且还将所有其他滚动视图的该属性设置为 NO。如果只有一个scrollview/tableview，你甚至不需要这样做。它将自动设置。

**[myScrollView setScrollsToTop:YES];**

**[otherScrollview setScrollsToTop:NO];**

# vim - 如何在vim中启动代码块后自动插入大括号？

> ID：15741929
> 
> 赞同：1
> 
> 时间：2013-04-01T10:43:06.583
> 
> 标签：vim

在输入左大括号后插入右大括号真的很容易：

```
inoremap { {<CR>}<Esc>ko 
```

这边走

`if (true) {`

转换为

```
if (true) {
    |
} 
```

但我想节省时间并少输入 1 个字符：

`if (true)<CR>`

所以我想创建以下规则：如果按下返回并且该行以 if/for/while 开头，则执行`{<CR>}<Esc>ko`

这是可行的吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T11:01:00.307

在您之前的映射的基础上，这应该可以满足您的需求：

```
inoremap )<CR> ) {<CR>}<Esc>ko 
```

但是，您应该尝试使用 SnipMate 或 Ultisnips 之类的片段扩展插件。这两个插件都允许您定义带有占位符和镜像的片段（默认情况下包括很多），`<Tab>`在触发后按下 a 时会展开这些片段。

例如，您有一个与触发器关联的片段，该片段`if`扩展为：

```
if ([condition]) {

} 
```

`condition`被选中，准备好输入，完成后，您可以`<Tab>`再次点击以在大括号之间跳转光标，准备输入：

```
if (myVar == 5) {
  |
} 
```

这非常方便。

# html - Google Web Engine Api Channel vs Node.js+Socket.io

> ID：15741932
> 
> 赞同：3
> 
> 时间：2013-04-01T10:43:11.637
> 
> 标签：html, performance, google-app-engine, websocket, socket.io

请帮我选择哪一个用于我的大学项目（我想开发一个共享的多用户白板）。

特别是，我对使用[Channel API](https://developers.google.com/appengine/docs/python/channel/overview)和[Socket.io](http://socket.io/)在用户和服务器之间进行消息交换的性能感兴趣：哪个更快，为什么？

我按照本教程实现了白板[http://jvyrushelloworld.appspot.com/的初始版本：http:](http://jvyrushelloworld.appspot.com/) [//blog.greweb.fr/2012/03/30-minutes-to-make-a-multi- user-real-time-paint-with-play-2-framework-canvas-and-websocket/](http://blog.greweb.fr/2012/03/30-minutes-to-make-a-multi-user-real-time-paint-with-play-2-framework-canvas-and-websocket/) 我使用的代码几乎相同，除了边和消息交换方法：我使用python，Google Channel API for message交换; 编写本教程的人使用了 Play 2 框架和 Web 套接字。

如您所见，web socket 教程版本运行速度更快（不知道是我的错误还是google api 通道性能问题）。当然，可以做很多优化来提高性能，但我想知道是否值得为那个项目继续使用 Channel API 还是切换到 socket.io 更好？

# python - Python 将 timedeltas 转换为字符串格式的小时数

> ID：15741934
> 
> 赞同：2
> 
> 时间：2013-04-01T10:43:16.577
> 
> 标签：python, string, date, time

我有一个 timedelta 对象，它是 3457 小时

```
timedelta(hours=3457) 
```

我想以“HH:MM”格式表示它，即“3457:00”

我愿意：

```
from datetime import datetime
hours = timedelta(hours=3457)
hours_string =  time.strftime("%H:%M", time.gmtime(hours.seconds))
print hours_string

"01:00" 
```

我怎样才能得到“3457:00”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T10:54:34.347

请注意，3457:00 是一种无意义的格式。“小时-冒号-分钟”格式用于日期和时间，因此小时不能合理地高于 23。更合理的格式是：3457h 0m。

你可以像这样得到它：

```
from datetime import timedelta

delta = timedelta(hours=3457)
minutes, seconds = divmod(delta.seconds, 60)
hours, minutes = divmod(minutes, 60)
hours += delta.days * 24

print '%sh %sm' % (hours, minutes) 
```

当然，更简单的方法是：

```
from datetime import timedelta

delta = timedelta(hours=3457)
print delta 
```

但这会给你“144 天，1:00:00”，这是一种理智的格式，但不是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:42:46.550

正如[timedelta](http://docs.python.org/2/library/datetime.html?highlight=timedelta#datetime.timedelta)文档所述，只有*days*、*seconds*和*microseconds*存储在内部——这意味着您必须手动将它们转换为您想要的单位（小时和分钟）。这是一种方法：

```
from datetime import timedelta

d = timedelta(hours=3457, minutes=42)
wholehours, seconds = divmod(d.seconds, 60*60)
wholeminutes = seconds//60
deltahours = d.days*24 + wholehours
print('{:d}:{:02d}'.format(deltahours, wholeminutes))
# 3457:42 
```

这是产生相同结果的更简单的替代方法：

```
def deltatime_hours_mins(dt, sep=':'):
    secs = int(dt.total_seconds())
    return '{:d}{}{:02d}'.format(secs//3600, sep, secs//60 % 60)

print(deltatime_hours_mins(d)) 
```

# php - 将变量从 jQuery 传递到 PHP

> ID：15741937
> 
> 赞同：3
> 
> 时间：2013-04-01T10:43:28.353
> 
> 标签：php, javascript, jquery

我创建了一个脚本来读取哈希（www.website.com/#hash）并将哈希传递给 php。`alert(hash)`弹出散列值，但散列未在 post 变量中回显。知道为什么吗？

**jQuery 页面**

```
<script>
    var hash = location.hash;
    $.post("community.php", {
        hash: hash
    });
    alert(hash);
</script> 
```

**Community.php 页面**

```
<?php echo $_POST['hash']; ?> 
```

> **编辑**- 下面的 $_GET 最初是上面的 $_POST。

我有一个 foreach 循环遍历函数中的帖子（发布 ID）。我需要将 HASH 传递到函数中，并每次将其与发布 ID 进行比较。唯一的问题是，$_GET['hash'] 不会出现在函数内部。

```
function something() {
   echo $_GET['hash'];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T10:45:36.473

像这样使用ajax，发送哈希值

```
 function send_hash(hash) {
    $.ajax({
      url   : "community.php", 
      type  : "POST",
      cache : false,
      data  : {
        hash : hash
      }
    });
  } 
```

现在你会得到

```
<?php echo $_POST['hash']; ?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T10:45:51.143

```
<script>
    var hash = location.hash;
    $.post("community.php", {
        hash: hash
    }, function(responde){ alert(responde); });
</script> 
```

检查您的 PHP 响应:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T11:02:57.400

$.post 是一个 ajax 事件。您正在通过 ajax 发布数据，因此该页面不会转到 communitypage.php。对于您想要的行为，您必须执行普通表单发布而不是 ajax 发布。$.post 将使用此代码检索您在 communitypage.php 上回显的任何内容。

```
//Note the 3rd argument is a callback.
var hash = location.hash;
$.post('communitypage.php',{hash:hash},function(data){
    alert(data);
}); 
```

在该页面上处理哈希并在您找到哈希时发出警报。你会在`data`

您可以修改`communitypage.php`返回 html 如下

```
<?php
if($isset($_POST["hash"]) && strlen(trim($_POST["hash"])) > 0){
    echo "Hash found :: " . $_POST["hash"]; 
}else
    echo "No hash found";
?> 
```

请注意，这将返回 html，您可以根据需要修改响应以返回 xml、json。

有关更多信息，请参阅[jQuery post() 文档](http://api.jquery.com/jQuery.post/)。

**对于更新的问题**

它在外部工作，因为在函数内部进行 ajax 调用时调用它，因为没有调用该函数。如果你想这样做（我不知道为什么）你可以这样做。

```
function myfunction(){
    //your code goes here
}

myfunction(); //call the function so that the code in the function is called upon 
```

虽然这是一个矫枉过正，除非你想在同一个脚本中一遍又一遍地调用该函数。如果它在没有功能的情况下工作，你应该这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T10:50:24.480

```
 <script>
  var hash = location.hash;
   //Try this.
   window.location.href = 'community.php?val='+hash;
  </script> 
```

或者

```
 <script>
   $.post("community.php","val="+hash);
   </script> 
```

在 community.php

```
 $res=isset($_REQUEST['val'])?$_REQUEST['val']:''; 
```

希望它会给你一些解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T10:59:05.453

**但哈希没有在 post 变量中回显**

这是因为如果您想在页面加载时发送它，那么您必须在`doc ready`处理程序中使用它：

```
<script>
  $(function(){
     var hash = location.hash;
     $.post("community.php", { hash: hash });
     alert(hash);
  });
</script> 
```

# html - 如何将 jquery var 定义为 php 变量？

> ID：15741939
> 
> 赞同：0
> 
> 时间：2013-04-01T10:43:34.270
> 
> 标签：html, ajax, jquery

我有一个简单的问题，我一直在寻找并研究了一段时间，但我似乎无法得到它。这是我的代码。

```
<script>

 function calculate() {
    var total = (parseInt($('#studenttut option:selected').val()) + parseInt($('#campusrb>option:selected').val())) * parseInt($('#yearsatten>option:selected').val());
    $("#total").html("<table width='100%'><tr><td>Your calculated cost is: $" + total +"</td>" +
    "<td align='right'>" +
    "<?php $calculatedCost = " + total + ";" +
    " ?>");

    }
</script> 
```

关于如何将 jquery var 定义为 php 变量的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:46:15.850

您不能将 jquery 变量设置为 PHP .. 因为 PHP 是服务器端代码而 Javascript 是客户端.. 但是您可以使用[ajax](http://api.jquery.com/jQuery.ajax/)将 var 发送到服务器端..**或**使用 FORM 将 var 发布到服务器...您可以使用`val()`将值放置到表单中..

```
 $('#inputID').val(total); 
```

并张贴表格

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T10:45:27.280

您不能在客户端使用 javascript 将 javascript 变量的值分配给 php 变量，而是可以使用 ajax 调用在服务器上发送 value top php 代码并在需要的地方使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T10:53:34.200

这是不可能的，因为`jQuery`客户端脚本`PHP`是服务器端脚本。请考虑差异..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T11:04:51.853

尝试在隐藏的输入中获取它并在需要时发布它。：

```
"<td align='right'>" +
"<input type='hidden' id='total' value='" + total + "/>"); 
```

# java - 如何获取所有字段以及复合对象的值？

> ID：15741946
> 
> 赞同：0
> 
> 时间：2013-04-01T10:44:09.263
> 
> 标签：java, reflection

我面临的问题是通过反射来获取类的所有字段的值。

我有一个类可以有任意数量的字段，任意数量的类，而这些类又可以有任意数量的字段，如下所示

```
public class A{
    String string;
    int number;
    HashMap<String,String> map;
    B bclass;
} 
```

B 以上又是 A 类的类成员。

1.  我想获取**字符串**类型的字段及其值，如果字段是类
2.  如果 field 再次是**Class**，则获取 fields 和 values ，例如**map**属性是**HashMap**类类型，那么我需要**String**类型的 key 和 value 属性。

请查看我的代码片段以解决上述问题

```
private void extractStringFields(Object object) throws IllegalAccessException {
    for (Field field : object.getClass().getDeclaredFields()) {

        field.setAccessible(true);
        System.out.println("filesd : "+field.getName());
        Object value = field.get(object);

        if (field.getType().equals(String.class)) {
            System.out.println(field.getName() + "=" + value);
        }
        extractStringFields(field);
    }
} 
```

但不幸的是，它不起作用，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:07:06.850

路过的时候，

```
extractStringFields(field); 
```

它正在发送一个 Field 对象。所以当第二次调用时 object.getClass 会给你 Field.class。为此，您将永远不会获得适当的价值。
最好保留另一个重载类，在那里传递 Field 。在那种方法中，你可以写这个，

```
for (Field field : field.getType().getDeclaredFields()) 
```

希望这会给你一个良好的开端。

或者你可以使用这个：

```
if(value != null){
                extractStringFields(value);
            } 
```

# android - 如何在使用 Android 通用图像加载器在视图中显示图片之前调整其大小？

> ID：15741947
> 
> 赞同：7
> 
> 时间：2013-04-01T10:44:10.157
> 
> 标签：android, resize, image-resizing, universal-image-loader

我成功地将通用图像加载器库（1.8.3 版）应用到我的应用程序中，并且我试图在将图像显示在 gridview 项目中之前调整其大小（因为有时图像太大而无法将其缓存在内存中。）

这是我正在尝试的：

```
...
BitmapFactory.Options resizeOptions = new BitmapFactory.Options();
resizeOptions.inSampleSize = 3; // decrease size 3 times
resizeOptions.inScaled = true;

options = new DisplayImageOptions.Builder()
.showStubImage(R.drawable.blank)
.showImageForEmptyUri(R.drawable.no_image)
.cacheInMemory()
.cacheOnDisc()
.decodingOptions(resizeOptions)
.build();
... 
```

由于某种原因，此代码不会使图像缩小 3 倍。

有人有更好的方法来按指定的密度调整图像大小吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-01T13:04:31.520

仔细阅读 Java 文档：

> `Options.inSampleSize`的传入选项将不被考虑。图书馆根据`imageScaleType(...)`选项自行计算最合适的样本量。

还要查看`ImageSizeUtil.defineTargetSizeForView(ImageView imageView, int maxImageWidth, int maxImageHeight)`哪个定义了图像的目标大小：

> 尺寸由目标视图参数、配置参数或设备显示尺寸定义。尺寸计算算法：
> 
> 1.  获取实际绘制的视图`getWidth()`和`getHeight()`视图。如果视图尚未绘制，则转到第 2 步。
> 2.  得到`layout_width`和`layout_height`。如果它们都没有确切的值，则转到第 3 步。
> 3.  得到`maxWidth`和`maxHeight`。如果两者都未设置，则转到步骤#4。
> 4.  获取`maxImageWidth`参数 (maxImageWidthForMemoryCache) 和`maxImageHeight`参数 (maxImageHeightForMemoryCache)。如果两者均未设置（等于 0），则转到步骤 #5。
> 5.  获取设备屏幕尺寸。

UIL 根据`imageScaleType`and `targetSize`(and `ImageView`'s scaleType) 定义结果位图大小。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-09-12T07:09:36.587

试试这个：

```
options = new DisplayImageOptions.Builder()
.showStubImage(R.drawable.blank)
.showImageForEmptyUri(R.drawable.no_image)
.cacheInMemory()
.cacheOnDisc()
.decodingOptions(resizeOptions)
.postProcessor(new BitmapProcessor() {
    @Override
    public Bitmap process(Bitmap bmp) {
        return Bitmap.createScaledBitmap(bmp, 300, 300, false);
    }
})
.build(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T11:16:09.897

您可以在 xml 中设置 imageview 高度和 with。您的图像将完全适合上述高度和宽度。您下载的图像适合您的 xml 中提到的高度和宽度。

您也可以查看与您的问题类似的问题。

[https://github.com/nostra13/Android-Universal-Image-Loader/issues/183](https://github.com/nostra13/Android-Universal-Image-Loader/issues/183)

# unix - 将 sed -n 与变量一起使用

> ID：15741948
> 
> 赞同：1
> 
> 时间：2013-04-01T10:44:14.177
> 
> 标签：unix

我有一个日志文件 a.log，我需要从中提取一条信息。要找到模式的开始和结束行号，我使用以下内容。

```
start=$(sed -n '/1112/=' file9 | head -1)
end=$(sed -n '/true/=' file9 | head -1) 
```

我需要在以下命令中使用变量（开始，结束）：

```
sed -n '16q;12,15p' orig-data-file > new-file 
```

使上面的命令看起来像：

```
sed -n '($end+1)q;$start,$end'p orig-data-file > new-file 
```

我无法用变量替换行号。请建议正确的语法。

谢谢，罗西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-03T20:40:13.577

当我意识到如何做到这一点时，我一直在寻找将行号放入包含请求信息的文件中，并将该行中的文件显示到 EOF。

所以，这就是我的方式。

和

```
PATTERN="pattern"
INPUT_FILE="file1"
OUTPUT_FILE="file2" 
```

$PATTERN 第一次匹配到 $INPUT_FILE 的行号可以用

```
LINE=`grep -n ${PATTERN} ${INPUT_FILE} | awk -F':' '{ print $1 }' | head -n 1` 
```

并且输出文件将是从 $LINE 到 EOF 的文本。这边走：

```
sed -n ${LINE},\$p ${INPUT_FILE} > ${OUTPUT_FILE} 
```

*   这里的重点是变量如何与命令 sed -n 一起使用：

首先不使用变量

```
sed -n 'N,$p' <file name> 
```

使用变量

```
LINE=<N>; sed -n ${LINE},\$p <file name> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:50:26.117

因此删除单引号。单引号关闭字符串的 shell 解析。您需要 shell 解析来进行变量字符串替换。

```
sed -n '('$end'+1)q;'$start','$end''p orig-data-file > new-file 
```

# c# - C# 中的 MessageBox 显示错误

> ID：15741954
> 
> 赞同：8
> 
> 时间：2013-04-01T10:44:45.410
> 
> 标签：c#, messagebox

我正在尝试添加`MessageBox.Show(Message);`，但在我的 C# .net Web 应用程序（按钮单击方法和`Page_Load`）中找不到它。显示如下错误

> *'名称'MessageBox'在当前上下文中不存在'*

我需要为此添加任何程序集引用吗？（我正在使用 .net 框架 4）。有什么替代方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T10:47:38.017

您描述中的关键词是

> Web应用程序

此功能仅在基于客户端（WinForms、WPF）的应用程序中可用，在 ASP.NET 中不可用。要在 Web 应用程序中执行此操作，您需要使用 Javascript，如上[一个 Stack Overflow 问题](https://stackoverflow.com/questions/2220537/display-confirmation-box-in-asp-net-using-javascript)所示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T10:52:22.273

`System.Windows.MessageBox`用于**WPF 应用程序**并`System.Windows.Forms.MessageBox`用于**Windows 窗体应用程序**，但您的项目是**WebApplication**，因此您无权访问它们中的任何一个。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-01T10:58:49.863

用这个：

```
System.Web.UI.ScriptManager.RegisterStartupScript(this, typeof(Page), "alert", "alert('" + Message + "')", true); 
```

希望这有帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-01T10:48:13.513

命名空间中的`MessageBox`类可以从 ASP.NET Web 窗体使用，但不能用于 ASP.NET Web 窗体。`System.Windows.Forms``Windows Forms`

# entity-framework - 在实体框架中创建模型与逆向工程模型

> ID：15741960
> 
> 赞同：0
> 
> 时间：2013-04-01T10:44:57.617
> 
> 标签：entity-framework

实体框架中的创建模型和逆向工程模型有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:24:35.357

通过逆向工程，您可以从现有数据库开始并生成模型。

使用创建模型，您首先定义模型，然后让 EF 生成数据库脚本。

# html - 使用引导程序时，“leftmargin”属性不起作用：-

> ID：15741963
> 
> 赞同：0
> 
> 时间：2013-04-01T10:45:12.730
> 
> 标签：html, twitter-bootstrap

当我使用 twitter bootstrap 时，'leftmargin' 属性不起作用，我是它的初学者。我是这样用的

```
<body leftmargin="value">
 </body> 
```

我希望没有语法错误。我在 github 上发布了一个存储库，请查看此[链接中的 calc.html 文件](https://github.com/Anurag-Ans/Calc-By-Ans)

请帮助我，页面看起来不太好，因为所有内容都停留在左边距，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T10:58:56.587

Bootstrap 已经为 CSS 文件提供了一个文件夹。在那里创建您自己的 *.css 文件并从您的 HTML 文档中链接它：

```
<link href="/css/my-styles.css" rel="stylesheet" type="text/css"> 
```

然后，使用 CSS 语法编辑`my-styles.css`和设置左边距：

```
body{
    margin-left: 0;
} 
```

我无法在这里向您解释有关 CSS 的所有内容，但您应该能够找到一个不错的教程。

# asp.net - 无法将“System.Data.Entity.DynamicProxies”类型的对象转换为“System.Data.DataRowCollection”类型

> ID：15741964
> 
> 赞同：0
> 
> 时间：2013-04-01T10:45:17.447
> 
> 标签：asp.net, entity-framework

可能是我的问题很简单，或者我对此并不陌生，问题是在尝试在中继器的项目数据绑定中执行以下代码时，我遇到了错误无法转换 *System.Data.Entity.DynamicProxies 类型的对象。 AutoPublishLog_06BC2AA20C3D11E56D78DD544C2C7E5211D828344650C93B9AA23BDEE16A6DCE' 输入“System.Data.DataRowView”。*

错误线是

```
Dim row As System.Data.DataRowView = DirectCast(e.Item.DataItem,   System.Data.DataRowView) 
```

任何帮助，在此先感谢

代码片段

```
Protected Sub AutoPublishList_ItemDataBound(ByVal sender As Object, ByVal e As 
System.Web.UI.WebControls.RepeaterItemEventArgs) Handles AutoPublishList.ItemDataBound

    If e.Item.ItemType = ListItemType.AlternatingItem OrElse e.Item.ItemType = ListItemType.Item Then
        Try
             Dim row As System.Data.DataRowView = DirectCast(e.Item.DataItem, System.Data.DataRowView) 

            Dim pageID As Literal = DirectCast(e.Item.FindControl("PageID"), Literal)

             If Convert.ToInt32(row("PageID")) = Business.Objects.Constants.A Then
            pageID.Text = "Dummy A"
              End If
             If Convert.ToInt32(row("PageID")) = Business.Objects.Constants.B Then
            pageID.Text = "Dummy B"
               End If

        Catch ex As Exception
            AddErrInfo(ex)
            ErrHandler(ex)
        End Try
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:53:08.163

您正在混合经典 ADO.NET 和实体框架对象。这是两个不同的世界，不会自动互换。

EF 对象是强类型对象，我建议您将 e.Item.DataItem 转换为您的 EF 类型。从您的异常消息中，我怀疑 EF 类型名为 AutoPublishLog。

尝试将其转换为：

```
Dim row AS AutoPublishLog = DirectCast(e.Item.DataItem, AutoPublishLog)

'your code

If row.PageID = Business.Objects.Constants.A then
'your code 
```

这应该可以工作（也许您需要一些命名空间或 AutoPublishLog 的其他名称，但如果不知道您的模型就很难判断）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:42:31.393

我不知道如何使用 VB.Net，但我认为您`e.Item.DataItem`无法转换为您想要的类型......我对此表示怀疑。尝试查看类型。

# javascript - 如何在 phantomJS 中触发 window.scrollTo(x, y)

> ID：15741973
> 
> 赞同：2
> 
> 时间：2013-04-01T10:45:46.240
> 
> 标签：javascript, phantomjs

我打开一个网页，我想在 onLoadFinished 回调中触发滚动。但它不起作用。我还尝试了 scrollPosition 并设置计时器以发送关键事件。他们两个都不起作用。所以寻求帮助。

```
page.onLoadFinished = function() {
    window.scrollTo(0, document.height);
}

page.open('http://www.XXX.com', function (status) {
    if (status !== 'success') {
        console.log('Unable to open weibo.com');
    }
} 
```

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-04-01T21:57:05.623

如果可以以整个尺寸打开页面，为什么还需要滚动？只需将页面大小设置为您需要的任何大小。

# c# - 矩阵运算代码的最佳实践

> ID：15741975
> 
> 赞同：0
> 
> 时间：2013-04-01T10:45:54.023
> 
> 标签：c#, if-statement

下面是一个包含在我用来对矩阵执行操作的类中的函数。该函数返回一个布尔值，第一个 IF 语句如果 NOT TRUE，它返回一个 false 值，所以我假设一旦它返回这个值，函数的其余部分就不会执行，因为它已经返回了一个值。

如果我编写了该函数，我会将 FOR 循环包含在附加到原始 IF 语句的 ELSE 构造中。我不是专业程序员，所以如果答案很明显，我深表歉意，我只是不会以这种方式编写代码，而且我很好奇以这种方式编写的所有函数是否值得更改。

```
public bool IsIdentityMatrix()
{
    if (!this.IsSquareMatrix())
    {
        return false;
    }

    for (int i = 0; i < this.RowCount; i++)
    {
        for (int j = 0; j < this.ColumnCount; j++)
        {
            decimal checkValue = 0;
            if (i == j)
            {
                checkValue = 1;
            }

            if (mInnerMatrix[i, j] != checkValue)
            {
                return false;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:01:15.690

像这样的“提前返回”逻辑很常见，在“else”中不缩进方法的其余部分是很正常的。这确实往往只适用于“早期回报”，它应该一个接一个地位于方法的顶部。

严格来说，该方法可以分成两部分并稍微重新组织以使其更具可读性（这当然是主观陈述！）：

```
public bool IsIdentityMatrix()
{
    if (IsSquareMatrix())
        return checkSquareMatrixForIdentity();
    else
        return false;
}

private bool checkSquareMatrixForIdentity()
{
    for (int i = 0; i < this.RowCount; i++)
    {
        for (int j = 0; j < this.ColumnCount; j++)
        {
            decimal checkValue = 0;
            if (i == j)
            {
                checkValue = 1;
            }

            if (mInnerMatrix[i, j] != checkValue)
            {
                return false;
            }
        }
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T10:54:59.230

您当然是对的，return 语句在该点停止执行函数，并且不会执行 for 循环。

我不会认为不使用 else 语句是不好的风格，但它可能更清楚地表明只有在条件失败时才会执行循环。

我喜欢代码的地方在于它将中断逻辑与它分开。从技术上讲，an`if(this.IsSquareMatrix()){ <loop> }; return false;`是等价的，但由于这是一个递归函数，因此清楚地表示了中断条件，而且还少了一个缩进级别 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T10:56:05.710

> 所以我假设一旦它返回这个值，函数的其余部分就不会执行，因为它已经返回了一个值

那是对的。事实上，当您使用像 Resharper 这样的 IDE 生产力插件时，它会提示您以这种方式构建代码以防止过度嵌套（这会导致代码异味）。

# php - Smarty 的表格宽度

> ID：15741978
> 
> 赞同：0
> 
> 时间：2013-04-01T10:45:59.960
> 
> 标签：php, html, smarty

如何使用 php 在表格中使用替代宽度？我用这种方式但得到错误。

```
<table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
        <td width="{if $label_payment}{echo = 50%}{else}{echo = 100%}{/if}">Shipping Address
        </td>
        <td>Payment Address
        </td>
    </tr>
    <tr>
        <td width="{if $label_payment}{echo = 50%}{else}{echo = 100%}{/if}">{$address_label_shipping}
        </td>

        {if $address_label_payment}
            <td width="50%">{$address_label_payment}
            </td>
        {if}

    </tr>
</table> 
```

这是正确的方法吗？

```
{if $label_payment}{echo = 50%}{else}{echo = 100%}{/if} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T10:48:56.550

没有回声：

```
{if $label_payment}50%{else}100%{/if} 
```

导致：

```
<td width="{if $label_payment}50%{else}100%{/if}"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T10:49:03.473

试试这个...

```
 <td {if $label_payment}width="50%"{else}width="100%"{/if}>Shipping Address 
```

# image - 图像在插入 PdfCell 时调整大小

> ID：15741980
> 
> 赞同：2
> 
> 时间：2013-04-01T10:46:05.923
> 
> 标签：image, itextsharp

我正在尝试使用 itextsharp 创建 Pdf。我添加了一个包含两列的表，其中一列包含文本和其他图像。我想要恒定的图像大小

1.  如果另一个单元格中的文本增加并且其他单元格中的图像大小不同，我的图像会自动调整大小

    ```
     for (int i = 0; i < visitInfo.VisitsiteComplience.Count; ++i)
        {

            cellprop.Colspan = 1;
            cellprop.Pharse = visitInfo.VisitsiteComplience[i].Compliencedescription;
            cellprop.BaseColor = null;
            table.AddCell(AddCelltoTable(cellprop));
            yesicon.ScaleAbsolute(35f, 35f);
            noicon.ScaleAbsolute(35f, 35f);

            if (visitInfo.VisitsiteComplience[i].Status == "1")
            {

                statuscell.AddElement(new Chunk(noicon, 0, 0));

            }
            else
            {

               // statuscell.AddElement(new Chunk(noicon, 0, 0));
            }

           statuscell.FixedHeight = 10;

            //headerLeftCell.Border = PdfPCell.NO_BORDER;
            table.AddCell(statuscell);
        } 
    ```

![在此处输入图像描述](https://i.stack.imgur.com/ai00Z.jpg) 2.然后我更改了代码，但现在图像大小增加并占据了整个单元格

```
 for (int i = 0; i < visitInfo.VisitsiteComplience.Count; ++i)
        {

            cellprop.Colspan = 1;
            cellprop.Pharse = visitInfo.VisitsiteComplience[i].Compliencedescription;
            cellprop.BaseColor = null;
            table.AddCell(AddCelltoTable(cellprop));
            yesicon.ScaleAbsolute(35f, 35f);
            noicon.ScaleAbsolute(35f, 35f);

            if (visitInfo.VisitsiteComplience[i].Status == "1")
            {

                statuscell.AddElement(new Chunk(noicon, 0, 0));

            }
            else
            {

               // statuscell.AddElement(new Chunk(noicon, 0, 0));
            }

            //headerLeftCell.Border = PdfPCell.NO_BORDER;
            table.AddCell(statuscell);
        } 
```

![在此处输入图像描述](https://i.stack.imgur.com/B5vjh.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:06:47.067

我认为您正在像这样自己缩放图像：`noicon.ScaleAbsolute(35f, 35f);`

这也让我感到困惑，为什么您要将图像包装在`Chunk`. 您可以创建一个`PdfPCell`带有`Image`as 参数的 a 以及一个`Bool`to 定义 iText 是否应该缩放`Image`. [请参阅iText in Action](http://itextpdf.com/book)（我是其作者）一书的第 109 页，并查看[第 4 章](http://tinyurl.com/iiacsCH04)的 XMen 示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-10T07:52:21.327

```
Image image = Image.getInstance("D:/star.png");

PdfPCell cell = new PdfPCell();

cell.setFixedHeight(40f);

cell.addElement(image);

table.addCell(cell); 
```

# wso2 - 我们如何在 wso2 esb 的 txt 文件中存储数据或字符串

> ID：15741986
> 
> 赞同：1
> 
> 时间：2013-04-01T10:46:18.130
> 
> 标签：wso2, wso2esb, wso2dss

我的问题是我从前端或移动应用程序获取数据或 json 或字符串，其中包含错误的详细信息我需要在本地系统的单个 txt 文件中附加所有详细信息我该怎么做我们有任何调解人或我可以使用 vfs trnsport 让我知道我尝试使用此代码给出错误我的配置是：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="FileWrite" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
  <target>
     <inSequence>
        <log level="custom">
           <property name="sequence" value="fileWriteSequence"/>
        </log>
        <log>
           <property name="transport.vfs.ReplyFileName" expression="fn:substring-after(get-property('MessageID'), 'urn:uuid:')"/>
           <property name="OUT_ONLY" value="true"/>
        </log>
        <send>
           <endpoint>
              <address uri="///home/youtility2/Desktop/Errorlog"/>
           </endpoint>
        </send>
     </inSequence>
     <outSequence>
        <send/>
     </outSequence>
  </target>
  <parameter name="transport.vfs.ContentType">text/plain</parameter>
  <description></description>
</proxy> 
```

从 esb 端抛出错误

```
2013-04-01 15:58:04,707] ERROR - ClientUtils The system cannot infer the transport information from the ///home/youtility2/Desktop/Errorlog URL.
[2013-04-01 15:58:04,708] ERROR - Axis2Sender Unexpected error during sending message out
org.apache.axis2.AxisFault: The system cannot infer the transport information from the ///home/youtility2/Desktop/Errorlog URL.
       at org.apache.axis2.description.ClientUtils.inferOutTransport(ClientUtils.java:81 
```

）有任何参考让我知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:57:18.240

您需要将“transport.vfs.Append=true”附加到文件 URI 以将数据附加到现有文件中......在 stackoverflow 中有一个关于此的线程，请参阅 [1]。有关 VFS 的更多详细信息，请参阅 [2]。

[1][如何将响应消息附加到文本文件？](https://stackoverflow.com/questions/11964965/how-to-append-response-message-to-a-text-file)

[2] [http://docs.wso2.org/wiki/display/ESB403/VFS+Transport](http://docs.wso2.org/wiki/display/ESB403/VFS+Transport)

问候，

莫汉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-27T08:55:38.147

在 Log mediator.Define 中定义的序列，如下所示

```
<inSequence>
        <log level="full"/>
           <property name="sequence" value="fileWriteSequence"/>

   <property name="transport.vfs.ReplyFileName" expression="fn:substring-after(get-property('MessageID'), 'urn:uuid:')"/>
           <property name="OUT_ONLY" value="true"/>

        <send>
           <endpoint>
              <address uri="///home/youtility2/Desktop/Errorlog"/>
           </endpoint>
        </send>
     </inSequence> 
```

# ios - UITableViewCells 中的 UITextFields - 当单元格消失时，文本会消失

> ID：15741988
> 
> 赞同：0
> 
> 时间：2013-04-01T10:46:19.570
> 
> 标签：ios, objective-c, uitableview, uitextfield

我有`UITableView`一堆`UITableViewCell`s。这些`UITableViewCell`s 里面有多个`UITextField`s。

现在，每次我上下滚动，`UITableViewCell`s 离开视图，然后再回来，我在里面输入的任何文本都会`UITextField`消失。完成这项工作的最佳方法是什么？

```
static NSString *CellIdentifier = @"Cell";

ComplaintsCustomCell *cell=(ComplaintsCustomCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if(cell==nil){
    NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"ComplaintsCustomCell" owner:self options:nil];

    for(id currentObject in topLevelObjects){

        if([currentObject isKindOfClass:[UITableViewCell class]]){
            cell = (ComplaintsCustomCell *) currentObject;
            break;
        }
    }
}

cell.durationFld.text=[dict valueForKey:@"Duration"];
[cell.durationFld setTag:indexPath.row + 5000]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:11:45.340

您的代码似乎有两个问题：

1.  您将所有单元格的文本字段设置为完全相同的值`[dict valueForKey:@"Duration"]`
2.  看起来`[dict valueForKey:@"Duration"]`实际上没有任何价值，这就解释了为什么再次调用您的代码时文本字段为空的原因。

我认为您应该创建一个简单的类，该类具有重新规划 NSArray 的属性并使用文本字段的初始值对其进行初始化。每当文本字段发生更改时，只需将 indexPath.row 相同索引处的数组对象替换为新文本即可。在您原来的 cellForRowAtIndexPath 方法中，您应该像这样分配文本字段的文本：

```
cell.durationFld.text = [valuesArray objectAtIndex:indexPath.row]; 
```

如果您处理大量文本字段，我还强烈建议您查看免费的 Sensible TableView 框架。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:59:30.803

`NSMutableArray`在每个位置创建一个which ，保存一个`NSString`与每个单元格匹配的对象。

当您配置 + 显示中的每个单元格时`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`，将 UITextField 的文本设置为位置 indexPath.row 的数组中的字符串。

编辑 a 时，在数组的当前位置`UITextField`插入/更新对象`NSString``indexPath.row`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-01T10:55:19.000

**一般建议：**

`UITextField` 放入/创建`cellForRowAtIndexPath`方法并添加

```
 [cell.contentView addSubview:textFieldName] 
```

这段代码写在

```
if(cell == nil)
 { 
     // put UITextField here
 } 
```

在`cellForRowAtIndexPath`方法。

# windows - Windows 8 低功耗蓝牙 - 需要自定义驱动程序

> ID：15741994
> 
> 赞同：0
> 
> 时间：2013-04-01T10:47:15.510
> 
> 标签：windows, bluetooth

我正在尝试使用 Windows 8 连接葡萄糖和心率监测器 LE 设备。它被检测到很好，默认 LE 用于设备。我正在尝试使用示例 BLE [http://code.msdn.microsoft.com/windowsapps/Bluetooth-LE-Metro-sample-a2ba1b5b](http://code.msdn.microsoft.com/windowsapps/Bluetooth-LE-Metro-sample-a2ba1b5b)但收到 80070057 错误。

我已经阅读了一些需要自定义驱动程序的帖子。我使用 Mac 中的示例运行它，它工作得很好。示例应用程序能够毫无问题地使用该设备。有没有办法在不创建自定义驱动程序的情况下访问和使用设备？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:00:47.947

样本只是用户的一个门面。为了与硬件通信，始终需要驱动程序。对于某些标准设备，操作系统可能包括具有预定义功能集的默认驱动程序（例如，标准网络摄像头），但对于所有其他设备，则需要供应商提供的驱动程序。

# cloudbees - 在 Cloudbees Jenkins 上创建 MySQL 实例以运行测试

> ID：15741995
> 
> 赞同：2
> 
> 时间：2013-04-01T10:47:18.993
> 
> 标签：cloudbees

我们使用托管在 Cloudbees 上的 Jenkins 来构建我们的 Github 托管代码库。我们想为每个构建运行一个集成测试管道。为此，我们需要在 Jenkins 上运行集成测试之前创建一个 MySQL 数据库。有没有一种简单的方法可以在 Cloudbees 上创建 MySQL 数据库作为 Jenkins 工作的一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:30:58.887

请查看[CloudBees DEV@cloud MySQL 指南](https://developer.cloudbees.com/bin/view/DEV/MySQL)。

它涵盖了配置和启动在构建过程中运行的 MySQL 服务器。

持久的 MySQL 服务器通常更麻烦，因为您需要在每次测试运行之前清除表。