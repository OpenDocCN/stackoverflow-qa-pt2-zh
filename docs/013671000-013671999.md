# StackOverflow 问答 13671000-13671999

# c# - 友好的 URL 重定向

> ID：13671002
> 
> 赞同：0
> 
> 时间：2012-12-02T16:03:43.377
> 
> 标签：c#, asp.net-mvc, friendly-url

我有 asp.net MVC 4 网站，文章 url 是：www.site.com/article/623/friendly-url-here

我不希望如果有人在没有友好 url 的情况下访问文章， **它将在**不重定向和访问数据库两次的情况下完成（这会使页面加载速度变慢）。

**现在：**

进入 www.site.com/article/623 -> 进入 www.site.com/article/623

**正如我想要的那样：**

进入 www.site.com/article/623/the-article-nice-url

（注意添加的-article-nice-url）

**更新：**

我在 RouteConfig 中使用的路由：

```
// Articles
routes.MapRoute(
    name: "Articles",
    url: "articles/{articleId}/{friendlyUrl}",
    defaults: new { controller = "PageManagement", action = "ViewArticle", articleId = UrlParameter.Optional, friendlyUrl = UrlParameter.Optional }
);

routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

我使用 DbContext 存储数据时使用的页面元数据：

```
public class PageMetadata
{
    [Key]
    public int Id { get; set; }

    public string RepresentationString { get; set; }

    public DateTime CreationDate { get; set; }

    public DateTime LastUpdateDate { get; set; }

    public bool IsVisible { get; set; }

    public string Title { get; set; }

    public string Content { get; set; }

    public string Link { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:59:04.397

我最终使用了“RedirectToRoute”，同时将从数据库获取的数据存储在会话对象中。

**请求流程：**

1.  url 中只有 id 的请求。
2.  从数据库中获取页面内容。
3.  将获取的页面保存在以其 id 命名的会话对象中（例如“article-53”）并重定向到正确的路由。
4.  如果存在，则从会话对象中获取页面数据并清理会话对象。

    public ActionResult ViewArticle(int?articleId, string friendlyUrl) { if (articleId == null) { return RedirectToActionPermanent("Index", "Home"); }

    ```
     if (Session[string.Format("article-{0}", articleId)] != null)
            {
                PageMetadata desiredPage = (PageMetadata)Session[string.Format("article-{0}", articleId)];
                Session[string.Format("article-{0}", articleId)] = null;
                return View(desiredPage);
            }

            var page = context.PageMetadatas.FirstOrDefault(p => p.Id == articleId);

            if (page == null)
            {
                return RedirectToActionPermanent("Index", "Home");
            }

            if (friendlyUrl != null)
            {
                // Redirect to proper name
                if (friendlyUrl != page.RepresentationString)
                {
                    Session[string.Format("article-{0}", page.Id)] = page;
                    return RedirectToRoute("Articles", new { controller = "PageManagement", action = "ViewArticle", articleId = articleId, friendlyUrl = page.RepresentationString });
                }
                return View(page);
            }
            else
            {
                Session[string.Format("article-{0}", page.Id)] = page;
                return RedirectToRoute("Articles", new { controller = "PageManagement", action = "ViewArticle", articleId = articleId, friendlyUrl = page.RepresentationString });
            }
        } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T17:04:27.530

这个答案不是解决你的问题，而是从不同的角度来看：

您无法在没有重定向的情况下修改浏览器中的地址。

您应该确定，您只向用户公开一个版本的链接。第二个将重定向并且没有任何问题，特别是当只暴露一种类型时。

这个问题的地址就是很好的例子。如果你去`http://stackoverflow.com/questions/13671002`，你会被重定向到`http://stackoverflow.com/questions/13671002/friendly-url-redirection`。

为确保搜索引擎只使用一份副本，您还应该放置规范网址：

`<link rel="canonical" href="http://stackoverflow.com/questions/13671002/friendly-url-redirection">`

SEO 不友好的地址应该以任何形式更新。如果您不公开它，您将不会有双重数据库查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T17:05:44.057

您需要使用 Url 重写来实现这一点。您可以选择多种技术，具体取决于您希望处理将文章 ID 映射到友好 url 的方式。查看这篇文章以获取可用选项的摘要：[http ://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx](http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx)

# git - Git删除提交但不删除更改

> ID：13671007
> 
> 赞同：1
> 
> 时间：2012-12-02T16:04:27.073
> 
> 标签：git

我不小心做了很多，我添加了更改并想做，`git commit -m "foo"`但我输入错误并输入了`git commit -a -m "foo"`.

我怎样才能恢复它，而不会丢失我所做的更改？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T16:05:37.887

使用`git reset HEAD^`. 这将摆脱当前分支中的最新提交，但保持工作树完好无损。

请注意，这会重写历史。如果您已经发布了该提交并且人们拉了它，最好通过创建一个新提交来*撤消*`git revert HEAD`提交，从而撤消上次提交的更改。

# sql - 如何使用 Oracle 创建嵌套表

> ID：13671011
> 
> 赞同：1
> 
> 时间：2012-12-02T16:04:59.120
> 
> 标签：sql, oracle, user-defined-types

我在 Oracle PSL/SQL 中创建了以下内容：

我创建了一个类型`Animal`。
这具有以下属性：姓名、年龄

我已经创建了类型`Dog`。这继承自 type`Animal`
中唯一的额外字段`Dog`是一个嵌套的地方引用表。我想将所有实例存储`Dog`在 Animal 表中。

这是我感到困惑的一点：创建类型的 Animal 表时`Animal`，如何创建嵌套表`places lived`？这个没有字段`Animal`，只有`Dog`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T16:25:27.863

> “创建 Animal 类型的 Animal 表时，如何为“居住的地方”创建嵌套表？当 Animal 中没有此字段时，只有 Dog 中。

这就是传承的奥秘。从 ANIMAL 类型构建的表实际上具有支持其子类型属性的列。但是，它们只有在我们明确使用 DOG 子类型时才能访问。

这是您的数据结构。

```
create or replace type animal_t as object 
  ( name varchar2(10)
    , age number (3,0))
not final;
/

create or replace type places_nt as table of varchar2(20)
/

create or replace type dog_t under animal_t
 ( residence_history places_nt)
/

create table animals of animal_t; 
```

要为金鱼创建记录，我们这样做：

```
insert into animals
  values (animal_t('BOB', 7))
/ 
```

要为狗创建记录，我们需要这样做：

```
insert into animals
  values (dog_t('FIDO', 12, places_nt('Balham', 'Tooting')))
/ 
```

此查询将只选择通用列：

```
SQL> select * from animals
  2  /

NAME              AGE
---------- ----------
BOB                 7
FIDO               12

SQL> 
```

要查看与狗有关的详细信息，我们需要将记录转换为相关的子类型：

```
SQL> select treat(value(a) as dog_t)
  2  from animals a
  3  where value(a) is of (dog_t)
  4  /

TREAT(VALUE(A)ASDOG_T)(NAME, AGE, RESIDENCE_HISTORY)
--------------------------------------------------------------------------------
DOG_T('FIDO', 12, PLACES_NT('Balham', 'Tooting'))

SQL> 
```

Oracle 文档中有一整本书专门介绍其对象关系特性。 [了解更多](http://docs.oracle.com/cd/E11882_01/appdev.112/e11822/adobjbas.htm#i479093)。

* * *

注意：我在这里使用对象表只是因为它很容易说明嵌套表的工作原理。我不推荐使用类型来存储数据：OO 是一种编程范式，应该只用于编写程序。数据应始终保存在关系结构中。

# javascript - 在 ASP.NET 服务器上缩小 CSS 和 JavaScript 的最佳方法是什么？

> ID：13671012
> 
> 赞同：0
> 
> 时间：2012-12-02T16:05:00.647
> 
> 标签：javascript, c#-4.0, css, minify

我在使用 C# 运行 .NET 4 的 ASP.NET 服务器上安装了 CSS 和 JavaScript。如何向客户端发送缩小的 CSS 和 JavaScript 响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T16:21:23.697

您可以使用**Microsoft Ajax Minifier** [http://www.asp.net/ajaxlibrary/Download.ashx](http://www.asp.net/ajaxlibrary/Download.ashx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T17:33:35.660

您可以使用[Closure-tool](http://closure-compiler.appspot.com/home)。它还有一个可以轻松使用的[RESTful api 。](https://developers.google.com/closure/compiler/docs/gettingstarted_api)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T08:58:50.627

我们使用[http://www.codethinked.com/squishit-the-friendly-aspnet-javascript-and-css-squisher](http://www.codethinked.com/squishit-the-friendly-aspnet-javascript-and-css-squisher)，它非常简单易用。您可以在配置文件中简单地选择调试或生产模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T16:54:08.937

我认为您需要一个缩小器，有许多在线缩小网站可供您使用，例如[JSCompress](http://jscompress.com/)

# ios - UIRotationGestureRecognizer 用 CGAffineTransformMakeScale 改变

> ID：13671015
> 
> 赞同：0
> 
> 时间：2012-12-02T16:05:37.457
> 
> 标签：ios, uigesturerecognizer, cgaffinetransformscale

使用以下方法翻转视图：

```
self.transform = CGAffineTransformMakeScale(-1, 1);  // self is an UIView 
```

要旋转此视图：

```
-(void)handleRotate:(UIRotationGestureRecognizer *)recognizer
{
    recognizer.view.transform = CGAffineTransformRotate(recognizer.view.transform, recognizer.rotation);
    recognizer.rotation = 0;
} 
```

问题是视图被翻转后，旋转的方向也是如此。任何解决方案如何解决这个问题？

编辑：我当前的解决方案是使用布尔值并否定 handleRotate 方法中的识别器旋转值。但我仍在寻找技术解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:18:29.567

你试过`self.transform.a * recognizer.rotation`吗？
如果我正确理解 AffineTransform，X 缩放存储在`a`.

[CGAffineTransform 参考](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGAffineTransform/Reference/reference.html)查找`CGAffineTransformMakeScale`和`CGAffineTransformMake`

# javascript - 选中一组复选框时生成预定义的 HTML 链接

> ID：13671025
> 
> 赞同：0
> 
> 时间：2012-12-02T16:06:12.543
> 
> 标签：javascript, checkbox

我正在创建一个 HTML 文档，其中有近 50 个复选框。我的目标是生成预定义的链接，这些链接将在选中复选框时生成。单击提交按钮时，应在浏览器的单独选项卡中打开链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:19:45.623

```
var preDefinedLinkValues = ["www.google.com", "www.gmail.com",.....];
function openLinks(form) {
var link = document.createElement('a');
link.setAttribute('target', '_blank');//this will open the link in new tab.
for (var i = 0; i < form.elements.length; i++ ) {
if (form.elements[i].checked == true) {
link.setAttribute('href', preDefinedLinkValues[i]);
link.click();
}
}
} 
```

# c# - 从 Winforms 中的不同功能访问控制

> ID：13671027
> 
> 赞同：1
> 
> 时间：2012-12-02T16:06:43.660
> 
> 标签：c#, winforms

我有一个简单的问题，我无法通过谷歌搜索任何解决方案：我想在运行时添加标签按钮文本框，我可以在我的表单的构造函数中，但我无法在构造函数之外访问它们。

像这样的东西：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        Label changeMe = new Label();
        changeMe.AutoSize = true;
        changeMe.Left = 50; changeMe.Top = 50;
        changeMe.Text = "Change this text from other function";
        changeMe.IsAccessible = true;

        //changeMe.Name = "changeMe";

        this.Controls.Add(changeMe);
    }

    private void btn_changeLabelText_Click(object sender, EventArgs e)
    {
        //Would like to achieve this:
        //changeMe.Text = "You changed me !! ";

        //But I found only this solution:
        //Label l;   l = (Label)this.Controls.Find("changeMe", true)[0];   l.Text = "You changed Me";

    }
} 
```

我注释掉的解决方案是我找到的唯一一个，但我不敢相信没有比这更好的解决方案了。例如，有没有办法让我的控件公开？解决这个问题的好方法是什么？

（每次调用我要设计的对话框时，控件的数量都会有所不同）

谢谢

编辑 - - - - - - - - - - - - -

接受阿迪尔的回答后，我继续使用以下解决方案，我只发现它作为最初评价 this.Control.Find 的方式更好，因为我也想要“n”个文本框，这样我可以轻松地循环它们并读取输入。

```
 public partial class Form1 : Form
{
    public struct labels { public Label lbl; public int id; }
    List<labels> lbls = new List<labels>();

    public Form1()
    {
        InitializeComponent();
        Label changeMe = new Label();
        changeMe.AutoSize = true;
        changeMe.Left = 50; changeMe.Top = 50;
        changeMe.Text = "Change this text from other function";
        changeMe.IsAccessible = true;

        this.Controls.Add(changeMe);
        labels newlabel = new labels();
        newlabel.id = 137; newlabel.lbl = changeMe;
        lbls.Add(newlabel);

    }

    private void btn_changeLabelText_Click(object sender, EventArgs e)
    {
        lbls.Find(i => i.id == 137).lbl.Text = "You changed me";
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T16:08:05.663

您在构造函数中声明了标签，使其只能在构造函数中访问，将外部构造函数声明`label`为`class scope`类成员。

```
Label changeMe = new Label();

public Form1()
{
    InitializeComponent();
    Label changeMe = new Label();
    changeMe.AutoSize = true;
    changeMe.Left = 50; changeMe.Top = 50;
    changeMe.Text = "Change this text from other function";
    changeMe.IsAccessible = true;

    //changeMe.Name = "changeMe";

    this.Controls.Add(changeMe);
} 
```

# objective-c - 为什么 NSOperation 示例代码使用@try & @catch

> ID：13671028
> 
> 赞同：10
> 
> 时间：2012-12-02T16:06:47.183
> 
> 标签：objective-c, exception, nsoperation

在 Apple 的并发编程指南中，NSOperation 子类示例（非并发和并发品种）使用异常处理，我想知道为什么他们在操作中鼓励这种风格。

**清单 2-4 响应取消请求**

```
- (void)main {
   @try {
      BOOL isDone = NO;

      while (![self isCancelled] && !isDone) {
          // Do some work and set isDone to YES when finished
      }
   }
   @catch(...) {
      // Do not rethrow exceptions.
   }
} 
```

我的理解是，异常处理通常不是 Objective-C 代码中的常见做法——异常本质上是程序员错误，应该导致应用程序崩溃，而意外输入最好由 NSError 处理。（我可能误解的理解来自这样的[事情](http://www.cimgf.com/2008/04/04/cocoa-tutorial-using-nserror-to-great-effect/)和[这个](https://stackoverflow.com/questions/5009597/objective-c-assertion-vs-exception-vs-error)）

我想知道 NSOperations 是否存在异常处理很重要的特定情况，或者这是否是该指南特定作者的首选风格。

附带说明一下，一些 NSOperation 示例代码遵循这种风格，而其他示例则没有。大多数高可见性 OSS 不使用异常（例如 AFNetworking）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-02T17:45:46.230

您的理解是正确的 - 应该使用 NSError （或类似的）来传达错误信息，而不是异常。大多数 Objective-C 代码都不是异常安全的，至少会泄漏资源。作为一般规则，永远不要让您的代码将异常泄漏到其他任何人的代码中——无论是 Apple 的还是第三方的。一些第 3 方框架可能会明确表明它们是异常安全的，但这种情况很少见。

通过该原则，您可以了解为什么无论如何都应该在`main`方法中使用包罗万象的异常处理程序。但实际上还有另一个原因：您的操作将在专用线程上运行。从您的操作中抛出的异常将向上传播，但不会进一步传播。操作的逻辑调用者或所有者不会得到它们，因为它们在不同的线程上运行（或根本不运行）。所以泄露的异常要么会杀死你的整个程序，要么会被默默吞下而没有其他迹象。然后您的程序可能会卡在一个奇怪的状态 - 因为您没有意识到发生了错误，您可能会继续等待永远不会到达的操作结果。

此外，Apple 在[并发编程指南](http://developer.apple.com/library/ios/documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008091-CH1-SW1)中有一节讨论了[处理错误和异常](http://developer.apple.com/library/ios/documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationObjects/OperationObjects.html#//apple_ref/doc/uid/TP40008091-CH101-SW20)。他们关于“离散实体”的第一点是暗指我在上一段中所说的：

> ## 处理错误和异常
> 
> 因为操作本质上是应用程序中的离散实体，所以它们负责处理出现的任何错误或异常。[在 OS X v10.6 及更高版本中， NSOperation](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html#//apple_ref/occ/cl/NSOperation)类提供的默认启动方法不会捕获异常。（在 OS X v10.5 中，start 方法确实会捕获和抑制异常。）您自己的代码应该始终直接捕获和抑制异常。它还应该检查错误代码并根据需要通知应用程序的适当部分。如果你替换了 start 方法，你必须同样在你的自定义实现中捕获任何异常，以防止它们离开底层线程的范围。
> 
> 您应该准备处理的错误情况类型如下：
> 
> *   检查和处理 UNIX errno 样式的错误代码。
> *   检查方法和函数返回的显式错误代码。
> *   捕获您自己的代码或其他系统框架抛出的异常。
> *   捕获 NSOperation 类本身抛出的异常，在以下情况下会抛出异常：
>     *   当操作尚未准备好执行但调用了它的 start 方法时
>     *   当操作正在执行或完成时（可能是因为它被取消了）并且它的 start 方法被再次调用
>     *   当您尝试将完成块添加到已执行或已完成的操作时
>     *   当您尝试检索已取消的[NSInvocationOperation](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/NSInvocationOperation_Class/Reference/Reference.html#//apple_ref/occ/cl/NSInvocationOperation)对象的结果时
> 
> 如果您的自定义代码确实遇到异常或错误，您应该采取任何必要的步骤将该错误传播到应用程序的其余部分。NSOperation 类不提供将错误结果代码或异常传递给应用程序其他部分的显式方法。因此，如果此类信息对您的应用程序很重要，您必须提供必要的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T16:41:01.960

我认为[这篇文章](https://stackoverflow.com/questions/4648952/objective-c-exceptions)和随附的答案很好地阐述了一般异常与无异常处理主题！

> 在资源不是自动管理的情况下抛出异常是不安全的。Cocoa 框架（和相邻框架）就是这种情况，因为它们使用手动引用计数。
> 
> 如果抛出异常，通过展开堆栈跳过的任何释放调用都将导致泄漏。仅当您确定不会恢复时，这应该限制您投掷，因为当进程退出时所有资源都返回给操作系统。
> 
> 不幸的是，NSRunLoops 倾向于捕获传播给它们的所有异常，所以如果你在一个事件期间抛出，你将继续到下一个事件。这显然是非常糟糕的。因此，最好不要扔。
> 
> 如果您使用垃圾收集的 Objective-C，这个问题就会减少，因为任何由 Objective-C 对象表示的资源都将被正确释放。但是，未包装在 Objective-C 对象中的 C 资源（例如文件描述符或 malloc 分配的内存）仍然会泄漏。
> 
> 所以，总而言之，不要扔。
> 
> 正如您所提到的，Cocoa API 对此有几种解决方法。返回 nil 和 NSError** 模式是其中的两个。

# javascript - 使用 AngularJS 进行服务器轮询

> ID：13671031
> 
> 赞同：86
> 
> 时间：2012-12-02T16:07:03.273
> 
> 标签：javascript, angularjs

我正在尝试学习 AngularJS。我第一次尝试每秒获取新数据：

```
'use strict';

function dataCtrl($scope, $http, $timeout) {
    $scope.data = [];

    (function tick() {
        $http.get('api/changingData').success(function (data) {
            $scope.data = data;
            $timeout(tick, 1000);
        });
    })();
}; 
```

当我通过将线程休眠 5 秒来模拟慢速服务器时，它会在更新 UI 并设置另一个超时之前等待响应。问题是当我重写上面的代码以使用 Angular 模块和 DI 来创建模块时：

```
'use strict';

angular.module('datacat', ['dataServices']);

angular.module('dataServices', ['ngResource']).
    factory('Data', function ($resource) {
        return $resource('api/changingData', {}, {
            query: { method: 'GET', params: {}, isArray: true }
        });
    });

function dataCtrl($scope, $timeout, Data) {
    $scope.data = [];

    (function tick() {
        $scope.data = Data.query();
        $timeout(tick, 1000);
    })();
}; 
```

这仅适用于服务器响应速度快的情况。如果有任何延迟，它会在不等待响应的情况下每秒发送 1 个请求，并且似乎清除了 UI。我想我需要使用回调函数。我试过了：

```
var x = Data.get({}, function () { }); 
```

但出现错误：“错误：destination.push 不是函数”这是基于[$resource](http://docs.angularjs.org/api/ngResource.$resource)的文档，但我并不真正理解那里的示例。

如何使第二种方法起作用？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-12-02T17:04:41.377

您应该`tick`在回调中调用函数`query`。

```
function dataCtrl($scope, $timeout, Data) {
    $scope.data = [];

    (function tick() {
        $scope.data = Data.query(function(){
            $timeout(tick, 1000);
        });
    })();
}; 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-01-29T05:23:48.147

更新版本的 Angular 引入了[$interval](http://docs.angularjs.org/api/ng.%24interval)，它比[$timeout](http://docs.angularjs.org/api/ng.%24timeout)更好地用于服务器轮询。

```
var refreshData = function() {
    // Assign to scope within callback to avoid data flickering on screen
    Data.query({ someField: $scope.fieldValue }, function(dataElements){
        $scope.data = dataElements;
    });
};

var promise = $interval(refreshData, 1000);

// Cancel interval on page changes
$scope.$on('$destroy', function(){
    if (angular.isDefined(promise)) {
        $interval.cancel(promise);
        promise = undefined;
    }
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-08-10T02:02:48.557

这是我使用递归轮询的版本。这意味着它将在启动下一个超时之前等待服务器响应。此外，当发生错误时，它将继续轮询，但会根据错误的持续时间以更宽松的方式进行。

[演示在这里](http://plnkr.co/edit/Io7xt2?p=preview)

[在这里写了更多关于它的信息](https://blog.guya.net/2016/08/08/simple-server-polling-in-angularjs-done-right/)

```
var app = angular.module('plunker', ['ngAnimate']);

app.controller('MainCtrl', function($scope, $http, $timeout) {

    var loadTime = 1000, //Load the data every second
        errorCount = 0, //Counter for the server errors
        loadPromise; //Pointer to the promise created by the Angular $timout service

    var getData = function() {
        $http.get('http://httpbin.org/delay/1?now=' + Date.now())

        .then(function(res) {
             $scope.data = res.data.args;

              errorCount = 0;
              nextLoad();
        })

        .catch(function(res) {
             $scope.data = 'Server error';
             nextLoad(++errorCount * 2 * loadTime);
        });
    };

     var cancelNextLoad = function() {
         $timeout.cancel(loadPromise);
     };

    var nextLoad = function(mill) {
        mill = mill || loadTime;

        //Always make sure the last timeout is cleared before starting a new one
        cancelNextLoad();
        $timeout(getData, mill);
    };

    //Start polling the data from the server
    getData();

        //Always clear the timeout when the view is destroyed, otherwise it will   keep polling
        $scope.$on('$destroy', function() {
            cancelNextLoad();
        });

        $scope.data = 'Loading...';
   }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-02T05:00:41.580

我们可以使用 $interval 服务轻松进行轮询。这是关于$ **interval**
[https://docs.angularjs.org/api/ng/service/$interval](https://docs.angularjs.org/api/ng/service/$interval) 的详细文档 然后在您的一个请求完成之前，它会启动另一个请求。 **解决方案：** 1\. 轮询应该是从服务器获取的简单状态，例如单个位或轻量级 json，因此不应花费比您定义的间隔时间更长的时间。您还应该适当地定义时间间隔以避免此问题。
 ****2.由于某种原因它仍然在发生，您应该在发送任何其他请求之前检查先前请求是否完成的全局标志。它会错过那个时间间隔，但不会过早发送请求。
此外，如果您想设置阈值，无论如何都应该设置轮询值，那么您可以按照以下方式进行操作。
这是工作示例。[在这里](http://atulkumarpatelsblog.blogspot.com/2017/04/polling-from-angularjs-interval.html)详细解释**** 

 ****```
angular.module('myApp.view2', ['ngRoute'])
.controller('View2Ctrl', ['$scope', '$timeout', '$interval', '$http', function ($scope, $timeout, $interval, $http) {
    $scope.title = "Test Title";

    $scope.data = [];

    var hasvaluereturnd = true; // Flag to check 
    var thresholdvalue = 20; // interval threshold value

    function poll(interval, callback) {
        return $interval(function () {
            if (hasvaluereturnd) {  //check flag before start new call
                callback(hasvaluereturnd);
            }
            thresholdvalue = thresholdvalue - 1;  //Decrease threshold value 
            if (thresholdvalue == 0) {
                $scope.stopPoll(); // Stop $interval if it reaches to threshold
            }
        }, interval)
    }

    var pollpromise = poll(1000, function () {
        hasvaluereturnd = false;
        //$timeout(function () {  // You can test scenario where server takes more time then interval
        $http.get('http://httpbin.org/get?timeoutKey=timeoutValue').then(
            function (data) {
                hasvaluereturnd = true;  // set Flag to true to start new call
                $scope.data = data;

            },
            function (e) {
                hasvaluereturnd = true; // set Flag to true to start new call
                //You can set false also as per your requirement in case of error
            }
        );
        //}, 2000); 
    });

    // stop interval.
    $scope.stopPoll = function () {
        $interval.cancel(pollpromise);
        thresholdvalue = 0;     //reset all flags. 
        hasvaluereturnd = true;
    }
}]); 
```****

# mysql - 如何在特定值之后过滤结果

> ID：13671037
> 
> 赞同：0
> 
> 时间：2012-12-02T16:07:43.687
> 
> 标签：mysql

```
SELECT user_profile_data.*
FROM relation_table,user_profile_data
WHERE user_profile_data.ref_user_id=relation_table.user2
and relation_table.type = 1
AND relation_table.user1 = 184
ORDER BY user_profile_data.full_name ASC 
```

我有这个查询，它产生这里显示的结果表：- [http://sqlfiddle.com/#!2/340f0/1](http://sqlfiddle.com/#!2/340f0/1)

```
FULL_NAME   LOCATION    REF_USER_ID
Fake        IN          181
Fake gupta  IN          185
Fake kumar  IN          182
Fake sharma IN          183
Fakeme  IN              180
Manish Kumawat US       192 
```

现在我想修改我的查询，以便获得 id=182 的“Fake Kumar”之后的结果，如下所示：-

```
FULL_NAME   LOCATION    REF_USER_ID

Fake sharma IN          183
Fakeme  IN              180
Manish Kumawat US       192 
```

`user_profile_data.full_name>'Fake Kumar'`由于某些安全问题，我不能使用我可以使用的是 id 但如果我使用我`user_profile_data.ref_user_id>182`会得到如下结果：-

```
FULL_NAME   LOCATION    REF_USER_ID

Fake gupta  IN          185

Fake sharma IN          183

Manish Kumawat US       192 
```

我应该使用什么查询来获得所需的结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:14:53.827

```
SELECT   user_profile_data.*
FROM     relation_table
    JOIN user_profile_data
      ON user_profile_data.ref_user_id = relation_table.user2
WHERE    relation_table.type  = 1
     AND relation_table.user1 = 184
     AND user_profile_data.full_name > (
       SELECT full_name
       FROM   user_profile_data
       WHERE  REF_USER_ID = 182
     )
ORDER BY user_profile_data.full_name 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/340f0/3/0)上查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:11:17.873

使用`LIMIT`如下：

```
 SELECT user_profile_data.*
      FROM relation_table,user_profile_data
      WHERE user_profile_data.ref_user_id=relation_table.user2
            and relation_table.type = 1 
            AND relation_table.user1 = 184
      ORDER BY user_profile_data.full_name ASC
      LIMIT 3,3 
```

# android - 适用于 Android 的 Google Analytics：不显示跟踪信息

> ID：13671038
> 
> 赞同：4
> 
> 时间：2012-12-02T16:07:59.123
> 
> 标签：android, google-analytics

我很难在 Google Analytics（分析）控制台中显示任何信息。根据其他 StackOverflow 问题，这是我尝试过的所有内容。

1.  等待 48 小时后才显示统计信息
2.  开了另一个GA账户，等了48小时
3.  已使用“setDebug”验证信息正在发送给 Google（请参阅下面的打印输出）
4.  运行 GA 示例应用程序并等待 48 小时
5.  完成[了以下链接上的所有内容](http://blog.blundell-apps.com/google-analytics-common-problems-and-fixes/)
6.  切换到使用 EasyTracker 代码
7.  从三部不同的手机运行这些测试
8.  在本地互联网和移动数据上运行这些测试
9.  确保正确设置了 Google Analytics（分析）日期范围
10.  检查手机上的“hosts”文件是否不会静默阻止 GA http 请求

如果有用的话，我的tracking ID的格式是UA-xxxxxxxx-1，很多例子中间没有8个数字。

这里还有什么问题？我已经编译了尽可能多的东西，尽管有以下内容，但我似乎无法在 GA 中显示任何数据....

```
12-02 09:46:26.020: I/GoogleAnalyticsTracker(27347): Host: www.google-analytics.com
12-02 09:46:26.020: I/GoogleAnalyticsTracker(27347): User-Agent: GoogleAnalytics/1.4.2 (Linux; U; Android 4.2.1; en-us; Nexus 4 Build/JOP40D)
12-02 09:46:26.020: I/GoogleAnalyticsTracker(27347): GET /__utm.gif?utmwv=4.8.1ma&utmn=1427846719&utmt=event&utme=5(**)(0)&utmcs=UTF-8&utmsr=320x494&utmul=en-US&utmac=UA-36617299-1&utmcc=__utma%3D1.2145684843.1354301001.1354462815.1354463165.7%3B&utmht=1354463165997&utmqt=20025 HTTP/1.1
12-02 09:46:26.020: V/GoogleAnalyticsTracker(27347): Scheduled next dispatch
12-02 09:46:26.020: V/GoogleAnalyticsTracker(27347): Sending 1 hits to dispatcher
12-02 09:46:26.280: V/GoogleAnalyticsTracker(27347): HTTP Response Code: 200
12-02 09:46:46.041: V/GoogleAnalyticsTracker(27347): Called dispatch
12-02 09:46:46.041: V/GoogleAnalyticsTracker(27347): ...but there was nothing to dispatch 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T11:40:53.647

可能值得检查您是否在 Google Analytics 中使用正确的 SDK 和正确的属性设置。

如果您使用的是 SDK 2.0，则需要选择“app”。如果您不是但正在使用旧版本，那么您需要选择“网站”，然后输入一个虚拟网址。它不会使用虚拟地址，而是接​​受来自 SDK 的数据。

请让我知道这是否有帮助，或者您是否需要我更具体。

# javascript - H1中的随机颜色词

> ID：13671039
> 
> 赞同：3
> 
> 时间：2012-12-02T16:08:01.250
> 
> 标签：javascript, jquery, html, css

是否可以让 H1 中的每个单词都具有随机颜色，并且如果您刷新页面，这些单词将再次随机化？

我有 5 种颜色要使用。我将如何编码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T16:12:36.757

是的，这是可能的：

```
var colors = ['red', 'yellow', 'blue', 'green', 'black'];
$('h1').each(function(){
    $(this).html($(this).text().split(' ').map(function(v){
        return '<span style="color:'+colors[Math.floor(Math.random()*colors.length)]+'">'+v+'</span>';
    }).join(' '));
});​​​​​​ 
```

主要思想是将每个 h1 的内容拆分为单词并通过嵌入来替换单词，`<span>`因为您无法设置单词的样式，而只能设置元素的样式。

[示范](http://jsfiddle.net/xRbzH/)

# .net - 在可移植程序集中获取当前方法的 MethodInfo

> ID：13671043
> 
> 赞同：2
> 
> 时间：2012-12-02T16:08:15.980
> 
> 标签：.net, portable-class-library

我想在具有 Windows Phone 和 Windows Store 应用程序支持的便携式程序集中获取当前执行方法信息。但是，在这样的便携式组件`MethodInfo.GetCurrentMethod()`中`MethodBase.GetCurrentMethod()`是不可用的。如何获取当前方法的 MethodInfo？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:09:38.797

也许您必须使用[`Type.GetMethod`](http://msdn.microsoft.com/en-us/library/6hy0h0z1.aspx)（也有其他重载）？

# android - 线程以未捕获的异常退出（组 = 0x4001d800）致命异常：主要

> ID：13671044
> 
> 赞同：0
> 
> 时间：2012-12-02T16:08:19.677
> 
> 标签：android, exception

我对此仍然很陌生，因此解决方案可能很明显。无论如何，我试图让这个应用程序中的按钮打开新的活动，但是当我运行它时，强制关闭。有谁知道出了什么问题？我打算使用一种叫做列表视图的东西，但它没有使用我为类制作的 XML。

```
package com.example.musicbynumbers;

import android.os.Bundle;
import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.ListView;

public class MainMenu extends Activity implements View.OnClickListener  {
    Button majScales, minHarm, minMel;
    ImageButton mainMenu;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_menu);
        mainMenu = (ImageButton) findViewById(R.id.imagelogo);
        majScales = (Button) findViewById(R.id.majorscalesb);

    }

         @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                switch(arg0.getId()){
                case R.id.imagelogo:
                    Intent i =  new Intent(MainMenu.this, MainMenu.class);
                    startActivity(i);
                    break;
                case R.id.majorscalesb:
                    Intent j = new Intent(MainMenu.this, majorScales.class);
                    startActivity(j);
                    break;}

    }

} 
```

布局：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:weightSum="80"
    tools:context=".MainMenu"

     >

    <ImageButton
        android:id="@+id/imagelogo"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher"
        android:layout_weight="10"
        android:gravity="center" />

    <Button
        android:id="@+id/majorscalesb"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="10"
        android:text="Major Scales"
        android:gravity="center" />

    <Button
        android:id="@+id/minormelodicb"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="10"
        android:text="Minor Melodic Scales" 
        android:gravity="center"/>

    <Button
        android:id="@+id/minorharmonicb"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="10"
        android:text="Minor Harmonic Scales" 
        android:gravity="center"/>

    <Button
        android:id="@+id/arpeggiosb"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="10"
        android:text="Arpeggios"
        android:gravity="center" />

      <Button
          android:id="@+id/chromaticscalesb"
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:layout_weight="10"
          android:text="Chromatic Scales"
          android:gravity="center" />

    <Button
        android:id="@+id/contraryb"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="10"
        android:text="Contrary Motion"
        android:gravity="center" />

    <Button
        android:id="@+id/aboutb"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="10"
        android:text="About" 
        android:gravity="center"
        >
    </Button>

</LinearLayout> 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.musicbynumbers"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.musicbynumbers.MainMenu"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.musicbynumbers.majorScales"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.example.musicbynumbers.majorScales" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:16:45.720

通过这个修复你的代码

```
ImageButton mainMenu;

mainMenu = (ImageButton) findViewById(R.id.imagelogo); 
```

更新：

好的，我发现了错误。你忘了`OnClickListener`为每个`Button`或`ImageButton`

尝试这个

```
 majScales.setOnClickListener(this);
    mainMenu.setOnClickListener(this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:14:25.440

一方面，您错误地拼写了意图。

```
Intent j = new Intent("com.exapmle.muscibynumbers.majorScales"); 
```

应该

```
Intent j = new Intent("com.example.musicbynumbers.majorScales"); 
```

另一方面，您定义了两个应用程序。

如果没有堆栈跟踪，就很难知道还有什么问题。

# tomcat - WsOutbound 关闭函数导致 Tomcat 崩溃

> ID：13671046
> 
> 赞同：1
> 
> 时间：2012-12-02T16:08:45.897
> 
> 标签：tomcat, websocket

我已经在 Tomcat 7 中使用 javascript 客户端实现了 websocket 连接。它工作得很好，除了一种情况：当我一个接一个地打开几个连接（通过刷新客户端）然后关闭所有连接时，Tomcat 崩溃了。经过调试，发现导致Tomcat崩溃的函数是WsOutbound对象的close()函数。这是我的代码：

尝试 {
m_tickMesageInbound.getWsOutbound().close(0, null);
} catch (IOException e) {
logger.debug("关闭输出时出错");
（ m_tickMesageInbound

是一个扩展 MessageInbound 的对象）
我有一个理论，即我试图关闭的连接已经关闭，从而导致错误，但没有接口可以检查这一点。
我尝试在 messageInbound 类中覆盖 onClosed() 函数，并将代码设置为在发生关闭函数时跳过它，但这没有帮助。
需要注意的是，Tomcat 完全崩溃，即下线，没有留下任何日志来解释问题。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T14:05:28.530

> 不留下日志来解释问题

您可以在 tomcat/bin 文件夹中找到 hs_err.log。这将帮助您进一步调试问题。

# c# - .NET 的多线程与多处理：糟糕的 Parallel.ForEach 性能

> ID：13671053
> 
> 赞同：31
> 
> 时间：2012-12-02T16:09:21.423
> 
> 标签：c#, .net, multithreading, task-parallel-library, multiprocessing

我编写了一个非常简单的“字数统计”程序，它读取文件并计算文件中每个单词的出现次数。这是代码的一部分：

```
class Alaki
{
    private static List<string> input = new List<string>();

    private static void exec(int threadcount)
    {
        ParallelOptions options = new ParallelOptions();
        options.MaxDegreeOfParallelism = threadcount;
        Parallel.ForEach(Partitioner.Create(0, input.Count),options, (range) =>
        {
            var dic = new Dictionary<string, List<int>>();
            for (int i = range.Item1; i < range.Item2; i++)
            {
                //make some delay!
                //for (int x = 0; x < 400000; x++) ;                    

                var tokens = input[i].Split();
                foreach (var token in tokens)
                {
                    if (!dic.ContainsKey(token))
                        dic[token] = new List<int>();
                    dic[token].Add(1);
                }
            }
        });

    }

    public static void Main(String[] args)
    {            
        StreamReader reader=new StreamReader((@"c:\txt-set\agg.txt"));
        while(true)
        {
            var line=reader.ReadLine();
            if(line==null)
                break;
            input.Add(line);
        }

        DateTime t0 = DateTime.Now;
        exec(Environment.ProcessorCount);
        Console.WriteLine("Parallel:  " + (DateTime.Now - t0));
        t0 = DateTime.Now;
        exec(1);
        Console.WriteLine("Serial:  " + (DateTime.Now - t0));
    }
} 
```

它简单明了。我使用字典来计算每个单词的出现次数。风格大致基于[MapReduce](http://en.wikipedia.org/wiki/MapReduce)编程模型。如您所见，每个任务都使用自己的私有字典。所以，没有共享变量；只是一堆自己计算单词的任务。以下是代码在四核 i7 CPU 上运行时的输出：

并行：00:00:01.6220927
串行：00:00:02.0471171

加速比约为 1.25，这意味着悲剧！但是当我在处理每一行时添加一些延迟时，我可以达到大约 4 的加速值。

在没有延迟的原始并行执行中，CPU 的利用率几乎没有达到 30%，因此加速不乐观。但是，当我们增加一些延迟时，CPU 的利用率达到了 97%。

首先，我认为原因是程序的 IO 绑定性质（但我认为插入字典在某种程度上是 CPU 密集型的），这似乎是合乎逻辑的，因为所有线程都从共享内存总线读取数据。然而，令人惊讶的是，当我同时运行 4 个串行程序实例（没有延迟）时，CPU 的利用率达到了大约提高，所有四个实例都在大约 2.3 秒内完成！

这意味着当代码在多处理配置中运行时，它达到了大约 3.5 的加速值，但是当它在多线程配置中运行时，加速值约为 1.25。

你有什么想法？我的代码有什么问题吗？因为我认为根本没有共享数据，而且我认为代码不会遇到任何争用。.NET 的运行时是否存在缺陷？

提前致谢。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-02T17:11:10.460

`Parallel.For`不将输入分成*n*块（其中*n*是`MaxDegreeOfParallelism`）；相反，它会创建许多小批量，并确保最多*n*正在同时处理。（这样如果一个批次需要很长时间来处理，`Parallel.For`仍然可以在其他线程上运行工作。有关更多详细信息，请参阅[.NET 中的并行性 - 第 5 部分，工作分区](http://reedcopsey.com/2010/01/26/parallelism-in-net-part-5-partitioning-of-work/)。）

由于这种设计，您的代码会创建并丢弃数十个 Dictionary 对象、数百个 List 对象和数千个 String 对象。这给垃圾收集器带来了巨大的压力。

在我的计算机上运行[PerfMonitor](http://blogs.msdn.com/b/vancem/archive/2010/08/02/perfmonitor-runanalyze-a-quick-performance-checkup-for-your-managed-app.aspx)报告总运行时间的 43% 用于 GC。如果您重写代码以使用更少的临时对象，您应该会看到所需的 4 倍加速。PerfMonitor 报告的部分摘录如下：

> 超过 10% 的总 CPU 时间花在垃圾收集器上。大多数经过良好调整的应用都在 0-10% 范围内。这通常是由一种分配模式引起的，该模式允许对象的生存时间刚好足以需要昂贵的 Gen 2 集合。
> 
> 该程序的峰值 GC 堆分配率超过 10 MB/秒。这是相当高的。这只是一个性能错误并不少见。

**编辑：**根据您的评论，我将尝试解释您报告的时间。在我的计算机上，使用 PerfMonitor，我测量了 43% 到 52% 的时间花在 GC 上。为简单起见，我们假设 50% 的 CPU 时间用于工作，50% 用于 GC。因此，如果我们使工作速度提高 4 倍（通过多线程），但保持 GC 的数量相同（这会发生，因为在并行和串行配置中处理的批次数量恰好相同），最好的我们可以获得的改进是原始时间的 62.5%，即 1.6 倍。

然而，我们只看到了 1.25 倍的加速，因为默认情况下 GC 不是多线程的（在工作站 GC 中）。根据[垃圾回收基础](http://msdn.microsoft.com/en-us/library/ee787088.aspx)，所有托管线程在 Gen 0 或 Gen 1 回收期间暂停。（在 .NET 4 和 .NET 4.5 中，并发和后台 GC 可以在后台线程上收集第 2 代。）您的程序只经历了 1.25 倍的加速（并且您看到总体 CPU 使用率为 30%），因为线程花费了它们的大部分时间GC 暂停的时间（因为这个测试程序的内存分配模式很差）。

如果启用[服务器 GC](http://msdn.microsoft.com/en-us/library/ms229357.aspx)，它将在多个线程上执行垃圾收集。如果我这样做，程序运行速度会快 2 倍（几乎 100% 的 CPU 使用率）。

当您同时运行程序的四个实例时，每个实例都有自己的托管堆，并且四个进程的垃圾收集可以并行执行。这就是为什么您会看到 100% 的 CPU 使用率（每个进程都在使用 100% 的一个 CPU）。总时间稍长（全部为 2.3 秒，一个为 2.05 秒）可能是由于测量不准确、磁盘争用、加载文件所需的时间、必须初始化线程池、上下文切换的开销或其他原因环境因素。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-02T17:09:28.760

试图解释结果：

*   在 VS 分析器中快速运行表明它几乎没有达到 40% 的 CPU 利用率。
*   String.Split 是主要的热点。
*   所以共享的东西一定会阻塞CPU。
*   那很可能是内存分配。你的瓶颈是

```
var dic = new Dictionary<string, List<int>>();
...
   dic[token].Add(1); 
```

我将其替换为

```
var dic = new Dictionary<string, int>();
...
... else dic[token] += 1; 
```

结果更接近 2 倍的加速。

但我的反问是：这有关系吗？您的代码非常人为且不完整。并行版本最终创建多个字典而不合并它们。这甚至不接近真实情况。正如你所看到的，小细节很重要。

您的示例代码非常复杂，无法对`Parallel.ForEach()`.
解决/分析一个真正的问题太简单了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-11T17:03:12.353

只是为了好玩，这里有一个较短的 PLINQ 版本：

```
File.ReadAllText("big.txt").Split().AsParallel().GroupBy(t => t)
                                                .ToDictionary(g => g.Key, g => g.Count()); 
```

# php - 仅检索值大于 0 的列

> ID：13671056
> 
> 赞同：0
> 
> 时间：2012-12-02T16:09:34.933
> 
> 标签：php, mysql

我想创建一个只显示值大于 0 的列的显示。

我显示字段和值的代码：

```
echo "<table><tr>";
while ($property = mysql_fetch_field($result))
{
    if($property->name > '0')
    echo "<td>Field name: " . $property->name . "</td>";
}
echo "<tr/>";
while ($row = mysql_fetch_assoc($result)) 
{ 
    echo "<tr><td>".$row['a']."</td>";
    echo "<td>".$row['b']."</td>";
    echo "<td>".$row['c']."</td>";
    echo "<td>".$row['d']."</td></tr>";
}
echo "</table>"; 
```

输出是这样的：

```
Field name: a   Field name: b   Field name: c   Field name: d
1               2               3               0 
```

我想要一个如下所示的显示：

```
Field name: a   Field name: b   Field name: c   
1               2               3 
```

因为`field name: d`值为 0，所以不显示。

我怎样才能做到这一点？我可以从你那里得到一些例子吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:16:43.037

您的代码已修改为正确的预期结果。

```
echo "<table><tr>";
while ($property = mysql_fetch_field($result))
{
    if($property->name > '0')
    echo "<td>Field name: " . $property->name . "</td>";
}
echo "<tr/>";

while ($row = mysql_fetch_assoc($result)) 
{ 
    echo "<tr>";
    if($row['a'] > 0) echo "<td>".$row['a']."</td>";
    if($row['b'] > 0) echo "<td>".$row['b']."</td>";
    if($row['c'] > 0) echo "<td>".$row['c']."</td>";
    if($row['d'] > 0) echo "<td>".$row['d']."</td>";
    echo "</tr>";
}
echo "</table>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T22:09:21.083

```
$results = array();
$disp_col_a = false;
$disp_col_b = false;
$disp_col_c = false;
$disp_col_d = false;

while ($row = mysql_fetch_assoc($result)) 
{
    if ($row['a'] > 0){
        $disp_col_a = true;
    }
    if ($row['b'] > 0){
        $disp_col_b = true;
    }
    if ($row['c'] > 0){
        $disp_col_b = true;
    }
    if ($row['b'] > 0){
        $disp_col_b = true;
    }
    $results[] = $row;
}

echo "<table><tr>";
if ($disp_col_a){
    echo "<td>Field name: a</td>";
}
if ($disp_col_b){
    echo "<td>Field name: b</td>";
}
if ($disp_col_c){
    echo "<td>Field name: c</td>";
}
if ($disp_col_d){
    echo "<td>Field name: d</td>";
}
echo "<tr/>";
foreach ($results as $results_row) {
{ 
    echo "<tr>";
    if ($disp_col_a){
        echo "<td>";
        if ($results_row['a'] > 0){
            echo $results_row['a'];
        }
        echo "</td>";
    }
    if ($disp_col_b){
        echo "<td>";
        if ($results_row['b'] > 0){
            echo $results_row['b'];
        }
        echo "</td>";
    }
    if ($disp_col_c){
        echo "<td>";
        if ($results_row['c'] > 0){
            echo $results_row['c'];
        }
        echo "</td>";
    }
    if ($disp_col_d){
        echo "<td>";
        if ($results_row['d'] > 0){
            echo $results_row['d'];
        }
        echo "</td>";
    }
    echo "</tr>";
}
echo "</table>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T16:11:51.467

尝试

```
while ($row = mysql_fetch_assoc($result)) 
{ 
   echo "<tr>";
   if($row['a'] >0)    echo "<td>".$row['a']."</td>";  else echo"<td>-<td>";
   if($row['b'] >0)    echo "<td>".$row['b']."</td>";  else echo"<td>-<td>";
   if($row['c'] >0)    echo "<td>".$row['c']."</td>";  else echo"<td>-<td>";
   if($row['d'] >0)    echo "<td>".$row['d']."</td>";  else echo"<td>-<td>";
  echo "</tr>";
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-02T16:36:48.947

不要挑剔，撇开乍一看，让 mysql 在这里做繁重的工作肯定更有意义 - 为什么要在具有不同列数的 HTML 表中输出一些行数？除了永久维护的头痛之外，从视觉美学的角度来看，这会被一些人认为是糟糕的设计。:)

同时，我也理解“Good Enough Is”的概念，所以我不会过多抱怨。

# java - 图像透明度 - 重叠时丢失 alpha

> ID：13671061
> 
> 赞同：3
> 
> 时间：2012-12-02T16:10:03.373
> 
> 标签：java, image, jframe, transparency, alpha

我在图像透明度方面遇到问题。如下：

我有 image1，我需要在它上面重叠 image2。image2 是具有透明度的 png。我想创建一个带水印的图像，这将是 image1 之上的透明 image2。

当我打开具有透明度的 image2 并将其放入 JFrame 中只是为了预览它时，它会以透明度打开。但是当我使用 BufferImage 对象的方法 getRGB 来获取 image2 的像素并使用 setRGB 将其覆盖在 image1 上时，image2 会失去透明度并获得白色背景。这是代码：

```
public class Test {
    public static void main(String[] args) throws IOException {
        BufferedImage image = ImageIO.read(new File("c:/images.jpg"));
        BufferedImage image2 = ImageIO.read(new File("c:/images2.png"));
        int w = image2.getWidth();
        int h = image2.getHeight();
        int[] pixels = image2.getRGB(0, 0, w, h, null, 0, w);
        image2.setRGB(0, 0, w, h, pixels ,0 ,w);
        // here goes the code to show it on JFrame
    }
} 
```

请，有人可以告诉我我做错了什么吗？我注意到这段代码正在丢失 image2 的 alpha。我怎样才能让它不失去阿尔法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T16:21:13.640

问题在于 setPixel 将对直接接收像素的图像使用编码，而无需解释原始图像的图形上下文。*如果您使用图形*对象，则不会发生这种情况。

尝试：

```
public static void main(String[] args) throws IOException {
    BufferedImage image = ImageIO.read(new File("c:/images.jpg"));
    BufferedImage image2 = ImageIO.read(new File("c:/images2.png"));

    int w = image2.getWidth();
    int h = image2.getHeight();

    Graphics2D graphics = image.createGraphics();
    graphics.drawImage(image2, 0, 0, w, h, null);
    graphics.dispose();
    // here goes the code to show it on JFrame
} 
```

# codeigniter - Codeigniter - 获得倒数第二行

> ID：13671066
> 
> 赞同：0
> 
> 时间：2012-12-02T16:11:23.653
> 
> 标签：codeigniter, row

如何使用活动记录在 DB 中获得倒数第二行？我有以下声明：

```
$query = $this->db->get_where('sys_access', array('user' => $usid));
$ult_access = $query->last_row();
$this->data['ult_acsess'] = $ult_acsess->data; 
```

这会在视图中打印系统的最后一次访问。但最后一次访问是现在（登录系统后），我需要获得倒数第二次访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:18:15.913

我不是 100% 确定我理解你的问题，但如果我想要你登录前的最后一次访问？如果是这样，只需查询按您用于跟踪的任何内容、时间字段、id 等排序的数据库，然后选择第二条记录。IE：

```
$this->db->order_by('dateTime', DESC);//whatever field you're using to order this table by
$query = $this->db->get_where('sys_access', array('user' => $usid));
$data= $query->result_array();
$ult_access = $data[1];//your login will be $data[0] 
```

# scala - 使用 scala.xml.pull 提取节点及其所有子节点的最佳方法？

> ID：13671067
> 
> 赞同：4
> 
> 时间：2012-12-02T16:11:39.393
> 
> 标签：scala, xmlpullparser, scala-xml

我正在使用 scala.xml.pull 来解析一个不同的大型 xml 文件。这对事件处理很有用，但我想做的是让我的解析器为特定节点咳出一个迷你文档，我看不到这样做的简单方法，或者至少不是“scala”方式。

我在想我构建了一个像这样的 seek 函数，它可以使用迭代器来查找与我的标签匹配的 EvElemStart 事件：

```
def seek(tag: String) = {
  while (it.hasNext) {
    it.next match {
      case EvElemStart(_, `tag`, _, _) => 
```

之后我就不太清楚了。有没有一种简单的方法可以将此标记的所有子项抓取到文档中，而不必遍历 XMLEventReader 弹出的每个事件？

我最终要寻找的是一个扫描文件并为我可以使用正常的scala xml处理处理的特定标签或标签集的每个实例发出一个xml元素（一个Elem？）的过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T02:41:40.490

这就是我最终做的事情。slurp(tag) 寻找标签的下一个实例并返回该标签的完整节点树。

```
def slurp(tag: String): Option[Node] = {
  while (it.hasNext) {
    it.next match {
      case EvElemStart(pre, `tag`, attrs, _) => return Some(subTree(tag, attrs))
      case _ => 
    }
  }
  return None
}

def subTree(tag: String, attrs: MetaData): Node = {
  var children = List[Node]()

  while (it.hasNext) {
    it.next match {
      case EvElemStart(_, t, a, _) => {
        children = children :+ subTree(t, a)
      }
      case EvText(t) => {
        children = children :+ Text(t)
      }
      case EvElemEnd(_, t) => {
        return new Elem(null, tag, attrs, xml.TopScope, children: _*)
      }
      case _ =>
    }
  }
  return null   // this shouldn't happen with good XML
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-04T12:17:08.860

根据[Jim Baldwin](https://stackoverflow.com/users/1364723/jim-baldwin)的回答，我创建了一个迭代器，它获取特定级别的节点（而不是特定标签）：

```
import scala.io.Source
import scala.xml.parsing.FatalError
import scala.xml.{Elem, MetaData, Node, Text, TopScope}
import scala.xml.pull.{EvElemEnd, EvElemStart, EvText, XMLEventReader}

/**
  * Streaming XML parser which yields Scala XML Nodes.
  *
  * Usage:
  *
  * val it = new XMLNodeIterator(pathToXML, 1)
  *
  * Will give you all book-nodes of
  *
  * <?xml version="1.0" encoding="UTF-8"?>
  * <books>
  *     <book>
  *         <title>A book title</title>
  *     </book>
  *     <book>
  *         <title>Another book title</title>
  *     </book>
  * </books>
  *
  */
class StreamingXMLParser(filename: String, wantedNodeLevel: Int) extends Iterator[Node] {
    val file = Source.fromFile(filename)
    val it = new XMLEventReader(file)
    var currentLevel = 0
    var nextEvent = it.next // peek into next event

    def getNext() = {
        val currentEvent = nextEvent
        nextEvent = it.next
        currentEvent
    }

    def hasNext = {
        while (it.hasNext && !nextEvent.isInstanceOf[EvElemStart]) {
            getNext() match {
                case EvElemEnd(_, _) => {
                    currentLevel -= 1
                }
                case _ => // noop
            }
        }
        it.hasNext
    }

    def next: Node = {
        if (!hasNext) throw new NoSuchElementException

        getNext() match {
            case EvElemStart(pre, tag, attrs, _) => {
                if (currentLevel == wantedNodeLevel) {
                    currentLevel += 1
                    getElemWithChildren(tag, attrs)
                }
                else {
                    currentLevel += 1
                    next
                }
            }
            case EvElemEnd(_, _) => {
                currentLevel -= 1
                next
            }
            case _ => next
        }
    }

    def getElemWithChildren(tag: String, attrs: MetaData): Node = {
        var children = List[Node]()

        while (it.hasNext) {
            getNext() match {
                case EvElemStart(_, t, a, _) => {
                    currentLevel += 1
                    children = children :+ getElemWithChildren(t, a)
                }
                case EvText(t) => {
                    children = children :+ Text(t)
                }
                case EvElemEnd(_, _) => {
                    currentLevel -= 1
                    return new Elem(null, tag, attrs, TopScope, true, children: _*)
                }
                case _ =>
            }
        }
        throw new FatalError("Failed to parse XML.")
    }
} 
```

# javascript - jQuery 不会设置 SELECTED

> ID：13671069
> 
> 赞同：0
> 
> 时间：2012-12-02T16:11:46.243
> 
> 标签：javascript, jquery

我有一个烦人的问题，我有一个 jQuery 选择 SELECT 选项列表的各种选项。我想设置 SELECTED=SELECTED 属性以强制将第一项以外的其他内容设为默认值。

看起来很基本，如果我设置 OPTION 标签的其他特征，它就可以正常工作。例如：

```
$(this).addClass ('TEST'); 
```

通过将 TEST 类添加到应该是默认选项的内容，可以按预期工作。我还可以执行以下操作：

```
$(this).attr('annoying', "SELECTED"); 
```

这会添加属性“烦人”，其值为“SELECTED”。遗憾的是，如果我执行以下操作：

```
$(this).attr('SELECTED', "SELECTED"); 
```

它只是完全忽略它。如果我进入 Chrome 的调试器并手动输入它，它确实有效，但不是来自我的 JS 文件。:^(

有任何想法吗？

更新到目前为止很好的建议，但由于没有任何效果，我怀疑还有其他问题。为了提供进一步的上下文......这是一个 Wordpress 网站，我正在让 QuickEdit 功能在分类的自定义属性中显示正确的 OPTION。对于那些不了解 Wordpress 的人来说，它*可能*并不重要（谁知道在这个阶段）。

这是完整的代码：

```
jQuery(document).ready(
function ($) {
    $('.editinline').on ('click', 
    function () {
        var $data_ref = $(this).closest('tr');
        $('.bespoke-item.quick-edit').each (
            function () {
                var col_name = $(this).attr('name');
                var col_value = $data_ref.find ('.' + col_name).text();
                $(this).val(col_value); // this will work for non-enumerated widgets
                if ( $(this).is( "select" ) ) {
                    selected = false; // used as a flag on whether the SELECTED value has been found
                    options = $(this).find ('.select-option');
                    options.each( 
                        function () {
                            if ( $(this).attr('value') == col_value ) {
                                $(this).addClass ('TEST');
                                selected = true;
                                $(this).attr('SELECTED', "SELECTED");
                                this.selected = 'SELECTED';
                            } 
                        }
                    );
                    if ( !selected ) {
                        // The value of the did not match any of the selections (this likely means it wasn't set at all)
                        // In this case revert to the "static-default" setting
                        options.each( 
                            function () {
                                if ( $(this).attr('static-default') ) {
                                    $(this).attr ('SELECTED' , 'SELECTED');
                                    alert ("Found value in static default " + $(this).val());
                                    selected = true;
                                } else {
                                    $(this).removeAttr ( 'SELECTED' );
                                }
                            }
                        );
                    }
                }

            }
        );
    }
); 
```

});

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T16:16:48.690

为您提供三个选项（都假设这`this`是有`option`问题的元素，因为它似乎在您的问题中）：

1.  如果您使用的是最新的 jQuery 副本，它可能是[vs.`attr`的`prop`东西](https://stackoverflow.com/questions/5874652/prop-vs-attr/5884994#5884994)（另请注意，它`selected`应该是小写字母，而不是大写字母）：

    ```
    $(this).prop('selected', true); 
    ```

2.  有时直接使用 DOM 会更简单：

    ```
    this.selected = true; 
    ```

3.  或者，当然，`val`在`select`元素上使用，将其设置为您要选择的选项的值。

    ```
    $("selector for the select element").val($(this).val());
    // or better (as `value` is entirely reliable on option elements):
    $("selector for the select element").val(this.value); 
    ```

[三者的活生生的例子](http://jsbin.com/etagiq/1)| [资源](http://jsbin.com/etagiq/1/edit)

# asp.net - 在生产 IIS7.5 上配置 ASP.NET 应用程序 CPU 使用情况

> ID：13671074
> 
> 赞同：1
> 
> 时间：2012-12-02T16:12:07.100
> 
> 标签：asp.net, asp.net-mvc-3, performance, profiling, iis-7.5

我在 IIS7.5 Web 服务器上托管 ASP.NET MVC 3 Web 应用程序。几个小时后，应用程序池开始使用所有三个 CPU 内核，使用率达到 100%。我想知道性能瓶颈在哪里以及 CPU 在代码中花费的时间最多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:37:39.243

JetBrains 制作了一个很好的分析工具，称为[dotTrace](http://www.jetbrains.com/profiler/)。它支持性能和内存分析。我只用了一点点，但我读过一些关于它的好东西。

另一种选择是 RedGate 的[ANTS 性能分析器](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)。它也应该是非常好的。

我认为其中任何一个都是开始解决性能问题的好工具。

# sql-server - 尝试从存储过程加载第二个结果集

> ID：13671083
> 
> 赞同：4
> 
> 时间：2012-12-02T16:13:24.930
> 
> 标签：sql-server, stored-procedures, ado.net, sql-server-2008-r2, multiple-resultsets

我有一个客户设置，它使用存储过程从其 SQL Server 数据库返回数据。

这些存储过程都是以相同的方式构建的——它们接受一堆输入参数，然后返回：

*   第一个只是带有结果代码（类型）的单行单列`INT`- 0 表示成功，其他一些值；如果值为 0，则有第二个结果集包含实际数据

*   第二个结果集可以是任何东西 - 任意数量的列和行

我正在尝试创建一种与该系统交互的“通用”方式，我的尝试是这样的：

*   创建一个接受存储过程名称和输入参数的类
*   包含`ErrorCode INT`属性和属性`DataTable results`的返回类型

但是，我无法让它与 ADO.NET 和 SQL Server 2008 R2 一起使用。

我的代码归结为：

```
public MyResultType CallService(string procedureName, MyParameters parameters)
{
     MyResultType result = new MyResultType { ErrorCode = 0 };

     using (SqlConnection conn = new SqlConnection(_connectionString))
     using (SqlCommand cmd = new SqlCommand(procedureName, conn))
     {
         cmd.CommandType = CommandType.StoredProcedure;
         SetupParameters(cmd, parameters);

         // open connection, execute the stored procedure
         conn.Open();

         using (SqlDataReader rdr = cmd.ExecuteReader())
         {
             // get the first result set - the status code, one row, one column of type INT
             while (rdr.Read())
             {
                 result.ErrorCode = rdr.GetInt32(0);
             }

             // if we got a "0" (success) -> go to the next result set and load it into the table
             if(result.ErrorCode == 0 && rdr.NextResult())
             {
                 result.ResultTable = new DataTable();
                 result.ResultTable.Load(rdr);

                 int colCount = result.ResultTable.Columns.Count;
                 int rowCount = result.ResultTable.Rows.Count;
              }

              rdr.Close();
         }

         conn.Close();
   }

   return result;
} 
```

我的问题是：对存储过程的调用工作得很好，错误代码 = 0 被拾取得很好，创建了数据表并且列数是预期值 - 但是没有**加载**任何行......

我一直在尝试一切我能想到的将这些行放入 DataTable - 没有运气。当然 - 如果我在 SQL Server Management Studio 中执行这个相同的存储过程，一切正常，我得到我的 ErrorCode=0 和我的 18 列和 5 行的结果集 - 没问题....

我错过了什么？谁能在我的代码中发现问题？为什么没有加载第二个结果集的行（但似乎正在检测列）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T19:30:30.660

发布的代码运行良好 - 我从 C# 和 SQL Server Management Studio 中调用它的方式有所不同：NULL 处理。

我将一些输入参数设置为`int`并因此为存储过程提供了一个值，而如果未定义该值`0`，它确实希望得到一个......`NULL`

愚蠢的新手错误......对不起，伙计们！感谢您的投入！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T16:18:52.200

[DataTable.Load 方法](http://msdn.microsoft.com/en-us/library/system.data.datatable.load%28v=vs.90%29.aspx)隐式调用 NextResult 方法，因此将其与您的显式调用相结合，它正在推进到不存在的结果集。*如果您想使用 DataTable.Load或*循环并自己填充数据表，您应该删除自己对 NextResult 的调用。

# java - JAX-WS 端点到 Domino

> ID：13671084
> 
> 赞同：2
> 
> 时间：2012-12-02T16:13:36.123
> 
> 标签：java, jax-ws, xpages, lotus-domino

当我将 (Win64) 服务器从 8.5.3FP2 升级到 FP3 时，我的Domino *Web 服务提供程序坏了。*[我在XPage 论坛上](http://www-10.lotus.com/ldd/xpagesforum.nsf/topicThread.xsp?action=openDocument&documentId=B1FE)写了一些关于它的信息。

我不想使用基于 Axis 的遗留东西，而是使用 Java 1.6 附带的 JAX WS。我决定尝试[这个](http://www.mkyong.com/webservices/jax-ws/jax-ws-hello-world-example/)非常简单的例子。我将代码复制粘贴到我的 Designer Eclipse 上的 Java 项目中，运行它，Web 服务在我的本地机器上启动并运行：它响应并返回 WSDL。

接下来，我将代码作为代码/Java 元素复制粘贴到服务器上的 NSF 并更改：

```
public static void main(String[] args) 
```

至

```
public HelloWorldPublisher() 
```

并在 XPage 中从 SSJS 调用此构造函数。我收到了这个错误：

> 线程“主”com.sun.xml.internal.ws.model.RuntimeModelerException 中的异常：必须在没有包的类上指定 @WebService.targetNamespace。类：HelloWorldImpl

这些类在包中。我也在 Domino 服务器 JVM 上使用命令行运行它并得到了同样的错误。谷歌搜索后我添加了这个

```
@WebService(targetNamespace="http://mycompany.net/dev/ph") 
```

到*HelloWorld*和

```
@WebService(endpointInterface="com.mkyong.ws.HelloWorld", targetNamespace="http://mycompany.net/dev/ph", portName="HelloWorldPort", name="HelloWorld", serviceName="HelloWorldService") 
```

到NSF中的*HelloWorldImpl并运行它。*之后，Web 服务似乎已启动并正在运行！

接下来我启动了服务器，因为它很慢，之后我没有看到 WSDL！我已经多次运行代码，重新启动 HTTP 并尝试删除`@WebService`属性。我还尝试再次在服务器上使用命令行运行代码，但这总是给我上面的*@WebService.targetNamespace*错误，我不知道为什么。

现在我总是得到这个到 Domino 控制台：

> **java.lang.NoClassDefFoundError: com.sun.xml.internal.ws.api.streaming.XMLStreamWriterFactory（初始化失败）** 在 java.lang.J9VMInternals.initialize(J9VMInternals.java:140) 在 com.sun.xml.internal.ws.server.SDDocumentImpl.writeTo(SDDocumentImpl.java:266) 在 com.sun.xml.internal.ws.transport .http.HttpAdapter.publishWSDL(HttpAdapter.java:538) 在 com.sun.xml.internal.ws.transport.http.HttpAdapter.handle(HttpAdapter.java:230) 在 com.sun.xml.internal.ws.transport .http.server.WSHttpHandler.handleExchange(WSHttpHandler.java:107) 在 com.sun.xml.internal.ws.transport.http.server.WSHttpHandler.handle(WSHttpHandler.java:92) 在 com.sun.net.httpserver .Filter$Chain.doFilter(Filter.java:77) at sun.net.httpserver.AuthFilter.doFilter(AuthFilter.java:77) at com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:80 ) 在 sun.net.httpserver.ServerImpl$Exchange$LinkHandler.handle(ServerImpl.java:569) 在 com.sun.net.httpserver。Filter$Chain.doFilter(Filter.java:77) at sun.net.httpserver.ServerImpl$Exchange.run(ServerImpl.java:541) at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:897)在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:919) 在 java.lang.Thread.run(Thread.java:738)

在服务器上访问此 URL 时：

```
http://localhost:9999/ws/hello?wsdl 
```

我对 Domino 日志中的任何内容感到有些惊讶，因为我认为这使用了 JVM http 服务器。我不明白为什么它首先起作用，现在它找不到这个类。

如何将 JAX WS 端点发布到 Domino 服务器？

**编辑**

我从这里下载了 JAX WS jars：

[http://jax-ws.java.net/](http://jax-ws.java.net/)

并将它们放在*\jvm\lib\ext*文件夹中。WSDL URL 又开始工作了！端点 URL 现在也有一些信息。我不知道为什么我必须这样做，因为该功能应该包含在 JVM 1.6 中。接下来我将尝试在端点代码中使用 Domino 对象。

是否可以让 JAX WS 使用 Domino http 服务器？

谢谢，

*   帕努

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:38:59.387

JAX-WS 已经包含在 Notes/Domino 中。我怀疑当您在开发过程中往返时，您的服务器中可能引入了一些不稳定因素。

自 8.5.3 和 9.0 以来，我已经在 XPages 应用程序 c/w SSJS 和自定义 Java 访问中创建了自定义提供程序和消费者，没有问题。

你现在的问题过去了吗？（如果是这样，你能相应地结束这个问题吗:-)

# php - 评级系统 PHP MYSQL

> ID：13671091
> 
> 赞同：-2
> 
> 时间：2012-12-02T16:14:31.027
> 
> 标签：php, mysql

我遵循了本教程： http: [//php.about.com/od/finishedphp1/ss/rating_script.htm](http://php.about.com/od/finishedphp1/ss/rating_script.htm)

但是当我运行它时，我得到

```
Notice: Undefined variable: mode in C:\xampp\htdocs\xxxx\index.php on line 7. 
```

有谁知道可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:23:48.917

如果您要准确复制他们的脚本，则在第 3 步发现问题 - [http://php.about.com/od/finishedphp1/ss/rating_script_3.htm](http://php.about.com/od/finishedphp1/ss/rating_script_3.htm)

```
//We only run this code if the user has just clicked a voting link
if ( $mode=="vote") 
```

您正在检查一个未定义的变量 - `$mode`。您需要先定义它，例如 -

```
//We only run this code if the user has just clicked a voting link
$mode = isset($_GET['mode']) ? htmlentities($_GET['mode']) : '';
if ( $mode=="vote") 
```

注意：我同意`@azizpunjani`，此代码已过时，并且有很多问题。您应该寻找一个使用`mysqli_`or`PDO`而不是`mysql_`函数的脚本。

# android - Android GPS 位置只给出第一个数字

> ID：13671097
> 
> 赞同：0
> 
> 时间：2012-12-02T16:15:16.503
> 
> 标签：android, dictionary, gps, location

这是我的应用程序：

```
public class HlavnaAktivita extends MapActivity implements LocationListener {
...
    public void onLocationChanged(Location location) {
            Log.w("myApp", String.valueOf(location.getLatitude()));
    } 
```

当我给模拟器例如 48.590007 和 17.824579 时，它只写“17.0”。我试过[http://www.androidcompetencycenter.com/?s=GPS](http://www.androidcompetencycenter.com/?s=GPS)这个教程（来自 StackOverflow），当我运行那个应用程序时，它写得很好，但在地图上只是四舍五入的位置 (17, 48)（位置根据maps.google.com 很好，但地图上的 cca 100 公里是错误的）。

可能是什么问题呢？我尝试了很多教程，但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:04:54.647

要获得地图上的确切位置，您需要 2 个参数：
点的纬度和经度。
`GeoPoint`接受以微度为单位的纬度和经度，因此请尝试像这样创建您的点以获得更好的准确性：

```
double lati = location.getLatitude();
double longi = location.getLongitude();
GeoPoint geo_point= new GeoPoint((int)(lati * 1e6),(int)(longi * 1e6)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T18:54:52.390

它将您的数字转换为int。为避免它尝试类似：

```
Log.w("myApp", String.valueOf((float) location.getLatitude())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T10:11:00.390

This was just my mistake - I forget to add (). Sorry.

# java - JTable 垂直填充

> ID：13671100
> 
> 赞同：0
> 
> 时间：2012-12-02T16:15:27.517
> 
> 标签：java, swing, jtable, populate

有没有办法垂直填充 Jtable？我对向量的结构无能为力

假设我有一个看起来像 {1,2,3,4,5} 的整数数组，它要插入到 jtable 中的数据参数上

我希望我的输出看起来像 [col][col][col][col][col]/n 1/n 2/n 3/n 4/n 5/n

而不是 [col][col][col][col][col]/n 1 2 3 4 5

# c++ - 为什么 Qt 在处理小型 QGraphicsItems 时会出现问题

> ID：13671106
> 
> 赞同：0
> 
> 时间：2012-12-02T16:16:12.667
> 
> 标签：c++, qt, graphics, 2d

当我定义几个具有小尺寸的 QGraphicsitems 例如将公制线直接转换为具有相同长度（例如几米）的 QGraphicLineItems 时，整个重新绘制系统变得非常慢，甚至容易崩溃。另一方面，当项目“更大”（长度> 100）时，不会出现问题。

举一个更具体的例子：我使用以下代码将 QGraphicItems 转换为像素图。

```
QGraphicsPixmapItem* transformToPixmapItem(std::vector<QGraphicsItem>& items,int maxRes){
    QRectF boundingRect;
    boostForeach(QGraphicsItem* pItem,items) {
      boundingRect = boundingRect.united(pItem->boundingRect());
    }
    QSize size(boundingRect.size().toSize());
    double const scale = std::min(16.0,double(maxRes)/boundingRect.size().width());
    QPixmap pixmap(size*scale);
    pixmap.fill(Qt::transparent);
    QPainter p(&pixmap);
    //p.setCompositionMode( QPainter::CompositionMode_Source );
    p.translate(-boundingRect.topLeft()*scale);
    p.scale(scale,scale);
    QStyleOptionGraphicsItem opt;
    boostForeach(QGraphicsItem* item,items) {
      item->paint(&p, &opt, 0);
    }
    p.end();
    deleteVector(items);
    QGraphicsPixmapItem* item = new QGraphicsPixmapItem(pixmap);
    item->setScale(1.0/scale);
    item->setOffset(boundingRect.topLeft()*scale);
    qDebug() << "Pixmap done. 1/Scale " << 1.0/scale;
    return item;
} 
```

在“更大”的项目上，这在它崩溃的小项目上运行良好，条件似乎是 1/scale。如果用于缩小生成的像素图项的此值变得太小，则函数完成，但生成的项的呈现会崩溃。除此之外，如前所述，其物理尺寸已增加例如 100 倍的对象的渲染似乎比小对象快得多。关于推荐的图形尺寸是否有一些一般指导方针，这种效果来自哪里？

# android - Android - 使用 AlertDialog 时上下文为空

> ID：13671108
> 
> 赞同：1
> 
> 时间：2012-12-02T16:16:14.977
> 
> 标签：android, dialog, alert, fragment

**编辑**

不幸的是，提供的答案都没有奏效，但我确实找到了解决问题的方法。我没有使用 onCreateDialog 方法，而是创建了自己的方法，该方法将上下文作为参数并在其中创建了 alertDialog。这可能不是最理想的解决方案，但它足以满足我的需要。我会更多地修复它并在未来改变它。这就是我所做的。

对话类：

```
public class SaveDialog extends FragmentActivity {

PasswordGen pG = new PasswordGen();

public Dialog createDialog(Context mContext) {

AlertDialog.Builder builder = new AlertDialog.Builder(mContext);

builder.setTitle("ok");
builder.setMessage("ok")
        .setCancelable(false)
        .setPositiveButton("ok", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

            }
        })
        .setNegativeButton("no", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

            }
        });

AlertDialog dialog = builder.create();
dialog.show();
return dialog; 
```

MainActivity：这是我调用 alertDialog 的地方：

```
 private void savePassword() {

    SaveDialog sD = new SaveDialog();

    sD.createDialog(mContext);

    } 
```

我正在尝试设置一个在另一个类中设置的 AlertDialog。但是，当我将上下文从主要活动传递给 AlertDialog 类时，我得到一个**NullPointerException**

这是我的警报对话框类

```
public class SaveDialog extends DialogFragment {

Context mContext;

public SaveDialog() {

}

public  SaveDialog(Context mContext) {

    this.mContext = mContext;
}

public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(mContext);

    builder.setTitle("Save Password");
    builder.setView(getContentView());
    Dialog dialog = builder.create();
//  dialog.show();
    return dialog;
} 
```

这是启动 onClick 的地方：

```
private void savePassword() {

    mContext = PasswordGen.this;    

    SaveDialog savePasswordDialog = new SaveDialog(mContext);
    savePasswordDialog.show(savePasswordDialog.getFragmentManager(), "password");

    } 
```

我很想得到答案。我已经尝试了从 getApplicationContext() 到 getActivity() 再到 ActivityName.this 的所有方法，但我总是得到 NullPointerException。我什至设置了一个方法来检查 mContext 是否为 null 并且它返回为非 null，但应用程序仍然崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:38:33.080

您不是在创建`AlertDialog`，而是在创建`DialogFragment`. 这个生命周期是完全不同的。当 Android 系统创建您的片段时，它不会通过`SaveDialog(Context mContext)`构造函数，而是通过默认构造函数，因此`NullPointerException`. 删除那个构造函数，它对你没有任何作用。

您可以像这样获取上下文`DialogFragment`：

```
public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    builder.setTitle("Save Password");
    builder.setView(getContentView());
    Dialog dialog = builder.create();
    return dialog;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:23:09.013

我认为问题在于，当您`AlertDialog`使用它创建时`Builder`，您使用的`mContext`是初始化为 null 的变量。

Yo 必须重写该`DialogFragment onCreate`函数以获得正确的`Context`然后初始化您的`mContext`变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T16:25:10.840

你试过改变

```
AlertDialog.Builder builder = new AlertDialog.Builder(mContext); 
```

至

```
AlertDialog.Builder builder = new AlertDialog.Builder(getApplicationContext()); 
```

看看有没有效果？除非您出于任何原因必须通过 mContext 。但据我所知，mContext 没有被设置并且保持为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T16:33:41.170

尝试删除空的构造函数：

```
public SaveDialog() {
} 
```

并在初始化 mContext 时只保留第二个构造函数。

# android - postgis with ruby on rails 查询多面体

> ID：13671113
> 
> 赞同：0
> 
> 时间：2012-12-02T16:16:37.390
> 
> 标签：android, json, postgresql, postgis, arrays

如果我对我的 postgis 数据库进行查询以获取我的地区，我会为我的 LatLon 列返回以下内容：

```
SELECT id, ST_AsText(latlon) AS geom FROM district;

MULTIPOLYGON(((16.4747103091463 48.2753153528078,16.4744319731163 48.275314069121,16.4743511374383 48.2753128173411,16.4743147576862 48.2753108825757,16.474247514683 48.275304398381,16.474205201686 48.2753004022899))) 
```

但是我应该如何在我的 java android 应用程序中使用它呢？

结构似乎不正确..因为如果我想开始使用它..我首先必须删除括号，然后是“MULTIPOLYGON”。这对我来说似乎也不是很舒服......

它不应该更像以下吗？如果是，我怎样才能实现这种输出格式？

```
{ "type": "MultiPolygon",
  "coordinates": [
    [[[102.0, 2.0], [103.0, 2.0], [103.0, 3.0], [102.0, 3.0], [102.0, 2.0]]],
    [[[100.0, 0.0], [101.0, 0.0], [101.0, 1.0], [100.0, 1.0], [100.0, 0.0]],
     [[100.2, 0.2], [100.8, 0.2], [100.8, 0.8], [100.2, 0.8], [100.2, 0.2]]]
    ]
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T03:42:56.770

[ST_AsText](http://postgis.refractions.net/docs/ST_AsText.html)转换为[Well-known text](http://en.wikipedia.org/wiki/Well-known_text)，而[ST_AsGeoJSON](http://postgis.refractions.net/docs/ST_AsGeoJSON.html)转换为[GeoJSON](http://en.wikipedia.org/wiki/GeoJSON)。尝试：

```
SELECT id, ST_AsGeoJSON(latlon) AS geom FROM district; 
```

# python - 如何创建家谱？

> ID：13671119
> 
> 赞同：-1
> 
> 时间：2012-12-02T16:17:01.267
> 
> 标签：python, tree

有家庭成员的字典如何创建它的树？

字典的结构如下所示：

```
{'parent':'Smith', 'children':[
    {'parent':'Connor', 'children':[
        {'parent':'Alexis','children':[
            {'parent':'Joe', 'children':[
                {'parent':'Clark','children':[]}]}]},
        {'parent':'Sue','children':[]}]},
    {'parent':'Cooper', 'children':[
        {'parent':'Max','children':[
            {'parent':'Luis', 'children':[]},]},
        {'parent':'Elvis', 'children':[]},
        {'parent':'Steven', 'children':[]}]}]} 
```

创建家谱后，我如何检查一些日期，例如：如何检查有多少成员获得了整个家庭或单个家庭的树。

检查整个家谱根或家庭的某些部分有多大。

如何将新成员添加到现有位置或家谱中的新位置？

# 编辑

添加树的示例：

```
Smith
    Conor
        Alexis
            Joe
                Clark
        Sue
    Cooper
        Max
            Luis
        Elvis
        Steven 
```

与计算机系统目录的样式相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T18:01:14.887

这只是inspectorG4dget 的答案，几乎就在那里，但需要一些改动：

```
class Person:
    ID = itertools.count()
    def __init__(self, name, parent=None, level=0):
        self.id = self.__class__.ID.next() # next(self.__class__.ID) in python 2.6+
        self.parent = parent
        self.name = name
        self.level = level
        self.children = []

def createTree(d, parent=None, level=0):
    if d:
        member = Person(d['parent'], parent, level)
        level = level + 1
        member.children = [createTree(child, member, level) for child in d['children']]
        return member

t = createTree(my_tree)          # my_tree is the name of your dictionary
def printout(parent, indent=0):
    print '\t'*indent, parent.name
    for child in parent.children:
        printout(child, indent+1)        
printout(t) 
```

根据上面的评论，您需要`import itertools`在程序开始时。

编辑：展平树的功能应该用于您想做的所有其他事情：

```
def flatten(parent):
    L = [parent]
    for child in parent.children:
        L += flatten(child)
    return L
flattened_tree = flatten(t)
print "All members: ", [person.name for person in flattened_tree]
print "Number of members:", len(flattened_tree)
print "Number of levels:", max([person.level for person in flattened_tree]) + 1
cooper = flattened_tree[6]
cooper_fl = flatten(cooper)
print "Members below Cooper: ", [person.name for person in cooper_fl]
print "Number:", len(cooper_fl)
levels = [person.level for person in cooper_fl]
print "Number of levels:", max(levels) - min(levels) + 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T17:08:51.967

未经测试，但这应该可以

```
class Person:
    ID = itertools.count()
    def __init__(self):
        self.id = next(self.__class__.ID)
        self.parent = None
        self.children = []

def createTree(familyTreeDict, parent=None):
    if not familyTreeDict:
        return []
    else:
        members = []
        for name familyTreeDict:
            members.append(Person(name))
            members[-1].parent = parent
            for child in familyTreeDict[name]:
                members[-1].children.append(createTree(child, members[-1]))
        return members 
```

然后，如果你想打印一个树结构，给定输出`createTree`：

```
def printout(family, indent=0):
    for parent in family:
        print '\t'*indent, parent.name
        for child in parent.children:
            printout(child, indent+1) 
```

希望这可以帮助

# iphone - UIColor 自动变黑

> ID：13671122
> 
> 赞同：2
> 
> 时间：2012-12-02T16:17:26.360
> 
> 标签：iphone, xcode, ipad, uicolor

我在使用 UIColor 时遇到了一些麻烦。

所以，我有一个白色的背景颜色。

用户可以通过单击一些按钮在视图中选择背景颜色

还有另一个按钮可以进入拾色器视图。

当他回到视图时，如果他单击右键，他应该会看到他选择的颜色。

如果他点击这个按钮，他也应该看到这个颜色。

但他看不到。仍然显示黑色。

当用户单击拾取的颜色时，浮点值来自（例如红色） r: 1.0 g: 0.0 b: 0.0 到 r: 0.0 g: 0.0 b: 0.0

我不知道如何保持正确的浮点值。

我希望我足够清楚。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:21:57.020

您必须保留您的 rgb UIColor *color，否则稍后会自动发布。颜色分量 (r,g,b) 必须在 0.0 - 1.0 范围内指定。
确保全红色最终计算为 r=1.0, g= 0, b= 0;

将当前颜色存储在 float[4] 数组中。(r,g,b,alpha) 或 float[3] 仅用于 rgb。

# ruby-on-rails - 在 Rails 3.2 中使用 ajax 更新不同的 div

> ID：13671124
> 
> 赞同：1
> 
> 时间：2012-12-02T16:18:02.210
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我最近开始使用 Rails 3.2，但在尝试在我的应用程序中实现一些 ajax 功能时被卡住了。我完全遵循了这个 railscast (http://railscasts.com/episodes/240-search-sort-paginate-with-ajax)。除此之外，我想为每个产品实现一个候选列表按钮，让用户将产品列入候选列表并将它们存储在会话中。我还希望在同一页面上显示一小部分入围产品，这需要 ajax 更新。

我想知道最好的方法是什么。我目前实现了带有远程标记的 link_to 按钮和一个帮助函数来将链接更改为候选列表/取消候选列表。我还使用条件 div 根据候选名单的长度显示候选名单。但是，问题是每当我入围时，产品表的顺序也会被重置。

这是我的代码片段：-

**Application_helper.rb**

```
def shortlist_unshortlist_link(product_id )
  if (user_session.already_shortlisted? product_id )
    link_to 'Unshortlist', { action: 'unshortlist', id: product_id  }, remote => 'true'
  else
    link_to 'Shortlist', { action: 'shortlist', id: product_id  }, remote => 'true'
  end
end

def shortlist_div
  shortlist=user_session.shortlist
   if (user_session.shortlist.length > 0)
     render :partial => 'pages/shortlist_fields'
   end
end 
```

**产品/index.html.erb**

```
<div id="product">
 <% @products.each do |product| %>
<tr>....
<td><%= shortlist_unshortlist_link(product.id.to_s) %></td>
</table>
</div>
<div class="shortlist"><%= shortlist_div() %> </div> 
```

**products_controller.rb**

```
def shortlist
 user_session.add_to_shortlist(params[:id])
 redirect_to products_path
end

def unshortlist
 user_session.remove_from_shortlist(params[:id])
 redirect_to products_path
end 
```

我认为，问题是由于redirect_to，但我不知道如何在不损害功能的情况下避免这种情况。我在这里走错了路吗？这是实现这一点的好方法吗？有什么建议么。

谢谢，阿米特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:26:34.637

你应该在候选名单方法中使用，

```
respond_to do |format|
  format.html {redirect_to products_path }#shortlist.html.erb
  format.js #shortlist.js.erb
 end 
```

并将您的 java 脚本写入 #shortlist.js.erb 文件。

对未入围名单做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T17:19:26.277

我同意 Sush，您没有响应来自`link_to`.

**在您的控制器中，入围方法，响应 ajax 请求**

```
respond_to do |format|
  format.html {redirect_to products_path }
  format.js 
end 
```

按照 Rails 的约定，`format.js`将执行与您的方法同名的 js.erb 文件。

**在 shortlist.js.erb 中，您可以编写如下内容：**

```
$('#shortlist').html('<%= escape_javascript(render "pages/shortlist_fields")%>'); 
```

**此外，您还可以调用相同的 js.erb 文件。**

在 unshortlist 方法中，您可以这样做：

```
respond_to do |format|
  format.html {redirect_to products_path }
  format.js {render :action=>'shortlist'}
end 
```

# mysql - 对 JSON 编码的字段使用 MySQL LIKE 运算符

> ID：13671125
> 
> 赞同：5
> 
> 时间：2012-12-02T16:18:05.540
> 
> 标签：mysql, json

我一直在尝试使用此查询获取表行：

```
SELECT * FROM `table` WHERE `field` LIKE "%\u0435\u0442\u043e\u0442%" 
```

字段本身：

```
Field                                     
--------------------------------------------------------------------
\u0435\u0442\u043e\u0442 \u0442\u0435\u043a\u0441\u0442 \u043d\u0430 
```

虽然我似乎无法让它正常工作。我已经尝试过使用反斜杠字符：

```
LIKE "%\\u0435\\u0442\\u043e\\u0442%"
LIKE "%\\\\u0435\\\\u0442\\\\u043e\\\\u0442%" 
```

但它们似乎都不起作用。

如果有人能提示我做错了什么，我将不胜感激。提前致谢！

* * *

## 编辑

问题解决了。解决方案：即使更正了查询的语法，它也没有返回任何结果。使字段 BINARY 后，查询开始工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T16:25:08.857

如[字符串比较函数](http://dev.mysql.com/doc/en/string-comparison-functions.html#operator_like)中所述：

> ### 笔记
> 
> 因为 MySQL 在字符串中使用 C 转义语法（例如，“<code>\n”来表示换行符），所以您必须将在[`LIKE`](http://dev.mysql.com/doc/en/string-comparison-functions.html#operator_like)字符串中使用的任何“<code>\”加倍。例如，要搜索“<code>\n”，请将其指定为“<code>\\n”。要搜索“<code>\”，请将其指定为“<code>\\\\”；这是因为反斜杠被解析器剥离一次，并且在进行模式匹配时再次剥离，留下一个反斜杠进行匹配。

所以：

```
SELECT * FROM `table` WHERE `field` LIKE '%\\\\u0435\\\\u0442\\\\u043e\\\\u0442%' 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/58b00/1/0)上查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-20T11:47:52.233

它对那些使用 PHP 的人很有用，它对我有用

```
$where[] = 'organizer_info LIKE(CONCAT("%", :organizer, "%"))';
$bind['organizer'] = str_replace('"', '', quotemeta(json_encode($orgNameString))); 
```

# c - 在 c 中打印出变量会改变变量的值

> ID：13671128
> 
> 赞同：1
> 
> 时间：2012-12-02T16:18:15.650
> 
> 标签：c, matrix, printf

我在这里对一些 c 程序有一个奇怪的问题。我在矩阵中得到了一些错误的值，我找到了行列式，所以我开始打印变量 - 但发现通过打印值，代码中的实际值发生了变化。

我最终将其缩小到一个特定`printf`的语句 - 在下面的代码中突出显示。如果我注释掉这一行，那么我开始在我的确定计算中得到不正确的值，但是通过打印出来我得到了我期望的值

下面的代码：

```
#include <math.h>
#include <stdio.h>
#include <stdlib.h>
#define NUMBER 15

double determinant_calculation(int size, double array[NUMBER][NUMBER]);

int main() {
    double array[NUMBER][NUMBER], determinant_value;
    int size;

    array[0][0]=1;
    array[0][1]=2;
    array[0][2]=3;
    array[1][0]=4;
    array[1][1]=5;
    array[1][2]=6;
    array[2][0]=7;
    array[2][1]=8;
    array[2][2]=10;

    size=3;

    determinant_value=determinant_calculation(size, array);
    printf("\n\n\n\n\n\nDeterminant value is %lf \n\n\n\n\n\n", determinant_value);
    return 0;
}

double determinant_calculation(int size, double array[NUMBER][NUMBER])
{
    double determinant_matrix[NUMBER][NUMBER], determinant_value;
    int x, y, count=0, sign=1, i, j;

    /*initialises the array*/
    for (i=0; i<(NUMBER); i++)
    {
        for(j=0; j<(NUMBER); j++)
        {
            determinant_matrix[i][j]=0;
        }
    }

    /*does the re-cursion method*/
    for (count=0; count<size; count++)
    {
        x=0;
        y=0;
        for (i=0; i<size; i++)
        {
            for(j=0; j<size; j++)
            {
                if (i!=0&&j!=count)
                {
                    determinant_matrix[x][y]=array[i][j];
                    if (y<(size-2)) {
                        y++;
                    } else {
                        y=0;
                        x++;
                    }
                }
            }
        }

        //commenting this for loop out changes the values of the code determinent prints -7 when commented out and -3 (expected) when included!
        for (i=0; i<size; i++) {
            for(j=0; j<size; j++){
                printf("%lf ", determinant_matrix[i][j]);
            }
            printf("\n");
        }

        if(size>2) {
            determinant_value+=sign*(array[0][count]*determinant_calculation(size-1 ,determinant_matrix));
        } else {
            determinant_value+=sign*(array[0][count]*determinant_matrix[0][0]);
        }
        sign=-1*sign;
    }
    return (determinant_value);
} 
```

我知道这不是用这段代码做我正在做的事情的最漂亮（或最好的方式），但这是我得到的——所以不能做出巨大的改变。我想没有人可以解释为什么打印出变量实际上可以改变值？或如何解决它，因为理想情况下我不想！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:01:24.407

您的变量determinant_value 未初始化为0，因此会导致问题。这是带有测试用例的修订版。

```
#include <stdio.h>

#define NUMBER 3

double determinant_calculation(int size, double array[NUMBER][NUMBER])
{
    double determinant_matrix[NUMBER][NUMBER], determinant_value = 0;
    int x, y, count=0, sign=1, i, j;

    /*initialises the array*/
    for (i=0; i<(NUMBER); i++)
    {
        for(j=0; j<(NUMBER); j++)
        {
            determinant_matrix[i][j]=0;
        }
    }

    /*does the re-cursion method*/
    for (count=0; count<size; count++)
    {
        x=0;
        y=0;
        for (i=0; i<size; i++)
        {
            for(j=0; j<size; j++)
            {
                if (i!=0&&j!=count)
                {
                    determinant_matrix[x][y]=array[i][j];
                    if (y<(size-2)) {
                        y++;
                    } else {
                        y=0;
                        x++;
                    }
                }
            }
        }

        if(size>2) {
            determinant_value+=sign*(array[0][count]*determinant_calculation(size-1,determinant_matrix));
        } else {
            determinant_value+=sign*(array[0][count]*determinant_matrix[0][0]);
        }
        sign=-1*sign;
    }
    return (determinant_value);
}

int main()
{
    int i, j;
    double ans;
    double array[NUMBER][NUMBER] = {{1,2,3},{4,5,6},{7,8,10}};

    ans = determinant_calculation(3, array);

    printf("the matrix\n");
    for (i = 0; i < NUMBER; ++i) {
        for (j = 0; j < NUMBER; ++j) {
                printf("%lf ", array[i][j]);
        }
        printf("\n");
    }
    printf("determinant : %lf\n", ans);
    return 0;
} 
```

输出将是：

```
the matrix
1.000000 2.000000 3.000000 
4.000000 5.000000 6.000000 
7.000000 8.000000 10.000000 
determinant : -3.000000 
```

但我不知道你在评论中的第二个问题。

# php - CodeIgniter - 如何选择性地缓存输出？

> ID：13671134
> 
> 赞同：3
> 
> 时间：2012-12-02T16:19:19.977
> 
> 标签：php, codeigniter, caching, benchmarking

我的应用程序允许注册用户发布内容。在顶部栏，像许多社交应用程序一样，登录后可以看到他们的头像等。

我的问题是使用 CodeIgniter 的输出缓存时，标头中的用户特定内容会被缓存。

这是因为我首先通过 a 加载用户特定的逻辑`MY_Controller`，然后由所有其他控制器扩展。

当我放置

```
$this->output->cache(MINUTES); 
```

在加载我的主页的控制器中，它还最终缓存了生成该缓存页面的用户的头像和名称。

有没有人对有选择地仅缓存公共内容的最佳方法有什么建议？如果需要，很高兴发布更多代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T16:40:54.263

如果我错了，我相信有人会纠正我，但我相信 codeigniter 缓存只允许缓存整页。还有一些额外的库可以启用部分页面缓存，请在此处查看 phil sturgeons 的工作：http: [//getsparks.org/packages/cache/show](http://getsparks.org/packages/cache/show)

我个人的方法是不要打扰页面缓存，只使用更具选择性的数据库缓存 - 但如果你想要/需要页面缓存，那么我认为以上是唯一的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-11T15:44:30.440

Codeigniter 不会按访问者和经过身份验证的用户分开缓存。

否则，您可以通过覆盖输出类自己完成。在 CI/application/core 中创建 MY_Output.php

这是我最新项目的代码。

```
class MY_Output extends CI_Output 
```

{

```
/**
 * Write Cache
 *
 * @param   string  $output Output data to cache
 * @return  void
 */
public function _write_cache($output)
{
    $CI =& get_instance();

    //-XXX CUSTOM------------------------------------
    $cache_path = $this->cachePath();
    //-----------------------------------------------

    if ( ! is_dir($cache_path) OR ! is_really_writable($cache_path))
    {
        log_message('error', 'Unable to write cache file: '.$cache_path);
        return;
    }

    $uri = $CI->config->item('base_url')
        .$CI->config->item('index_page')
        .$CI->uri->uri_string();

    if (($cache_query_string = $CI->config->item('cache_query_string')) && ! empty($_SERVER['QUERY_STRING']))
    {
        if (is_array($cache_query_string))
        {
            $uri .= '?'.http_build_query(array_intersect_key($_GET, array_flip($cache_query_string)));
        }
        else
        {
            $uri .= '?'.$_SERVER['QUERY_STRING'];
        }
    }

    $cache_path .= md5($uri);

    if ( ! $fp = @fopen($cache_path, 'w+b'))
    {
        log_message('error', 'Unable to write cache file: '.$cache_path);
        return;
    }

    if ( ! flock($fp, LOCK_EX))
    {
        log_message('error', 'Unable to secure a file lock for file at: '.$cache_path);
        fclose($fp);
        return;
    }

    // If output compression is enabled, compress the cache
    // itself, so that we don't have to do that each time
    // we're serving it
    if ($this->_compress_output === TRUE)
    {
        $output = gzencode($output);

        if ($this->get_header('content-type') === NULL)
        {
            $this->set_content_type($this->mime_type);
        }
    }

    $expire = time() + ($this->cache_expiration * 60);

    // Put together our serialized info.
    $cache_info = serialize(array(
        'expire'    => $expire,
        'headers'   => $this->headers
    ));

    $output = $cache_info.'ENDCI--->'.$output;

    for ($written = 0, $length = self::strlen($output); $written < $length; $written += $result)
    {
        if (($result = fwrite($fp, self::substr($output, $written))) === FALSE)
        {
            break;
        }
    }

    flock($fp, LOCK_UN);
    fclose($fp);

    if ( ! is_int($result))
    {
        @unlink($cache_path);
        log_message('error', 'Unable to write the complete cache content at: '.$cache_path);
        return;
    }

    chmod($cache_path, 0640);
    log_message('debug', 'Cache file written: '.$cache_path);

    // Send HTTP cache-control headers to browser to match file cache settings.
    $this->set_cache_header($_SERVER['REQUEST_TIME'], $expire);
}

// --------------------------------------------------------------------

/**
 * Update/serve cached output
 *
 * @uses    CI_Config
 * @uses    CI_URI
 *
 * @param   object  &$CFG   CI_Config class instance
 * @param   object  &$URI   CI_URI class instance
 * @return  bool    TRUE on success or FALSE on failure
 */
public function _display_cache(&$CFG, &$URI)
{
    //-XXX CUSTOM------------------------------------
    $cache_path = $this->cachePath($CFG);
    //$cache_path = ($CFG->item('cache_path') === '') ? APPPATH.'cache/' : $CFG->item('cache_path');
    //-----------------------------------------------

    // Build the file path. The file name is an MD5 hash of the full URI
    $uri = $CFG->item('base_url').$CFG->item('index_page').$URI->uri_string;

    if (($cache_query_string = $CFG->item('cache_query_string')) && ! empty($_SERVER['QUERY_STRING']))
    {
        if (is_array($cache_query_string))
        {
            $uri .= '?'.http_build_query(array_intersect_key($_GET, array_flip($cache_query_string)));
        }
        else
        {
            $uri .= '?'.$_SERVER['QUERY_STRING'];
        }
    }

    $filepath = $cache_path.md5($uri);

    if ( ! file_exists($filepath) OR ! $fp = @fopen($filepath, 'rb'))
    {
        return FALSE;
    }

    flock($fp, LOCK_SH);

    $cache = (filesize($filepath) > 0) ? fread($fp, filesize($filepath)) : '';

    flock($fp, LOCK_UN);
    fclose($fp);

    // Look for embedded serialized file info.
    if ( ! preg_match('/^(.*)ENDCI--->/', $cache, $match))
    {
        return FALSE;
    }

    $cache_info = unserialize($match[1]);
    $expire = $cache_info['expire'];

    $last_modified = filemtime($filepath);

    // Has the file expired?
    if ($_SERVER['REQUEST_TIME'] >= $expire && is_really_writable($cache_path))
    {
        // If so we'll delete it.
        @unlink($filepath);
        log_message('debug', 'Cache file has expired. File deleted.');
        return FALSE;
    }

    // Send the HTTP cache control headers
    $this->set_cache_header($last_modified, $expire);

    // Add headers from cache file.
    foreach ($cache_info['headers'] as $header)
    {
        $this->set_header($header[0], $header[1]);
    }

    //-XXX CUSTOM------------------------------------
    $exTime = $this->executionTime();
    setcookie('exe_time', "$exTime", time()+120, '/');
    //-----------------------------------------------

    // Display the cache
    $this->_display(self::substr($cache, self::strlen($match[0])));
    log_message('debug', 'Cache file is current. Sending it to browser.');
    return TRUE;
}

// --------------------------------------------------------------------

/**
 * Delete cache
 *
 * @param   string  $uri    URI string
 * @return  bool
 */
public function delete_cache($uri = '')
{
    $CI =& get_instance();
    //-XXX CUSTOM------------------------------------
    $cache_path = $CI->config->item('cache_path');
    $cache_path = ($cache_path === '') ? APPPATH.'cache/' : $cache_path;
    //-----------------------------------------------

    if ( ! is_dir($cache_path))
    {
        log_message('error', 'Unable to find cache path: '.$cache_path);
        return FALSE;
    }

    if (empty($uri))
    {
        $uri = $CI->uri->uri_string();

        if (($cache_query_string = $CI->config->item('cache_query_string')) && ! empty($_SERVER['QUERY_STRING']))
        {
            if (is_array($cache_query_string))
            {
                $uri .= '?'.http_build_query(array_intersect_key($_GET, array_flip($cache_query_string)));
            }
            else
            {
                $uri .= '?'.$_SERVER['QUERY_STRING'];
            }
        }
    }

    //-XXX CUSTOM------------------------------------
    $passed = TRUE;
    $path1 = $cache_path.'xmember/'.md5($CI->config->item('base_url').$CI->config->item('index_page').ltrim($uri, '/'));
    if ( ! @unlink($path1))
    {
        log_message('error', 'Unable to delete cache file for '.$uri);
        $passed = FALSE;
    }

    $path2 = $cache_path.'xvisitor/'.md5($CI->config->item('base_url').$CI->config->item('index_page').ltrim($uri, '/'));
    if ( ! @unlink($path2))
    {
        log_message('error', 'Unable to delete cache file for '.$uri);
        $passed = FALSE;
    }
    //-----------------------------------------------

    return $passed;
}

private function cachePath(&$CFG=false)
{
    $hasSession = !empty($_COOKIE[COOKIE_CUSTOMER_SESSION_ID]);

    if(empty($CFG)) {
        $CI =& get_instance();
        $CFG = $CI->config;
    }
    $path = $CFG->item('cache_path');
    $path = empty($path) ? APPPATH.'cache/' : $path;
    $path .= $hasSession?'xmember/':'xvisitor/';

    return $path;
}

function executionTime()
{
    $time = microtime();
    $time = explode(' ', $time);
    $time = $time[1] + $time[0];
    $total_time = round(($time - LOAD_PAGE_START), 4); //second unit
    return $total_time;
} 
```

}

# java - GridBagLayout 中超过 1 个 JPanel

> ID：13671136
> 
> 赞同：1
> 
> 时间：2012-12-02T16:19:43.953
> 
> 标签：java, swing, layout, gridbaglayout

您好，请参阅附图，我正在使用具有三个 JPanel 的编码界面 `GridBagLayout` ，我已经阅读了一些很好的教程并获得了一些理解，但我需要您的指导，如给定的图片中并排放置 2 个 JPanel。

例如，如果我这样做了`frame.add(leftpanel);` ，然后 JFrame 上只有一个面板 .. 如何将其左对齐在 JFrame 的一半上，以便当我这样做时`frame.add(panelright);`将其添加到右侧 sid，

请指导我执行图片中显示的功能，![在此处输入图像描述](../Images/7c5a5f677db5e0fbfbf5652ddf4e547d.png)

我可以处理 1 个 JPanel 和所有组件，但不知道处理超过 1 个，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T16:29:21.127

我认为在你的情况下`BorderLayout`会更有用。[尝试在这里](http://docs.oracle.com/javase/tutorial/uiswing/layout/border.html)阅读。

您可以在东南西北或中心添加面板，在这种情况下它会比 GridBag 好得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T16:32:31.720

您需要使用[GridBagConstraints](http://docs.oracle.com/javase/6/docs/api/java/awt/GridBagConstraints.html)指定位置和其他设置。例如，您可以执行以下操作：

```
GridBagConstraints constraints = new GridBagConstraints();
constraints.gridx = 0;
constraints.gridy = 0;
constraints.fill = GridBagConstraints.BOTH;

frame.add(leftPanel, constraints);
constraints.gridx = 1;
frame.add(panelright, constraints);

constraints.gridx = 0;
constraints.gridy = 1;
constraints.gridwidth = 2;
frame.add(bottomPanel, constraints); 
```

GridBagConstraints.gridx 和 GridBagConstraints.gridy 确定此元素的行和列。fill 告诉布局水平和垂直使用所有可用空间。如果要设置一个单元格使用相对于其他单元格具有一定比例的空间，可以使用 weightx 和 weighty 字段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T17:37:47.237

还要考虑两个[`JSplitPane`](http://docs.oracle.com/javase/tutorial/uiswing/components/splitpane.html)例子。最外面的窗格将`VERTICAL_SPLIT`在顶部和底部之间。外部窗格的顶部将包含另一个介于左右之间`JSplitPane`的窗格。`HORIZONTAL_SPLIT`

# spring - @Configuration @ImportResource 和 FileSystemResource 从 Web-Inf 读取属性

> ID：13671141
> 
> 赞同：2
> 
> 时间：2012-12-02T16:20:06.613
> 
> 标签：spring, configuration

我正在尝试使用 Spring MVC 应用程序的基于 Java 的配置从 WEB-INF 读取属性文件。当我将属性目录放在 src 目录中并使用 class: (ClassPathResource) 时，我可以完成这项工作。

我想将 @ImportResource 与 file: (FileSystemResource) 一起使用，当它位于 WebContent 或 WEB-INF 中时，它将从 properties/ 或 resources/properties/ 或 /properties/ 或 /resources/properties/ 读取

当我使用文件时：我得到一个 FileNotFoundException。

我尝试移动属性目录并将@ImportResource 与“file:/properties/properties-config.xml”、“file:/WebContent/properties/properties-config.xml”和/WEB-INF/properties/properties 一起使用-config.xml”。

我映射到我的 app-servlet.xml 并尝试了“file:/resources/properties/properties-config.xml”

这应该是直截了当的并且并不少见。但是我找不到以这种方式获取属性文件的示例。

```
@ImportResource("file:/properties/properties-config.xml")
@Configuration
public class AppConfig {

protected final Log logger = LogFactory.getLog(getClass());

private @Value("#{v1Properties['v1.dataUrl']}") String dataUrl;
private @Value("#{v1Properties['v1.metaUrl']}") String metaUrl;
private @Value("#{v1Properties['v1.user']}") String v1User;
private @Value("#{v1Properties['v1.password']}") String v1Password;

@Bean
V1Config v1Config() {
    V1Config v1Config = new V1Config();
    v1Config.setDataUrl(dataUrl);
    v1Config.setMetaUrl(metaUrl);
    v1Config.setUserId(v1User);
    v1Config.setPassword(v1Password);
    return v1Config;
}

@Bean
ViewResolver viewResolver() {
    InternalResourceViewResolver resolver = new InternalResourceViewResolver();
    resolver.setPrefix("/WEB-INF/jsp/");
    resolver.setSuffix(".jsp");
    return resolver;
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-15T11:21:30.980

试试这个，

```
@ImportResource("classpath:properties-config.xml") 
```

# actionscript-3 - Action Script 3, Flash Cs6 如何创建时间延迟？

> ID：13671144
> 
> 赞同：1
> 
> 时间：2012-12-02T16:20:29.007
> 
> 标签：actionscript-3, time, delay, flash-cs6

我正在制作一个网站，我想在 16 页之间进行时间延迟，我已经这样做了：

```
var myDelay:Timer = new Timer(700,1);

myDelay.addEventListener(TimerEvent.TIMER, showMessage);
myDelay.start();

function showMessage(event:TimerEvent):void{
    gotoAndPlay("anim1");
}
stop(); 
```

然后在页面 anim1 我有：

```
stop();

b4.addEventListener(MouseEvent.ROLL_OVER, b4_over);
b4.addEventListener(MouseEvent.CLICK, b4_clicked);
ma.addEventListener(MouseEvent.ROLL_OVER, ma_over);
ma.addEventListener(MouseEvent.CLICK, ma_clicked);
pt1.addEventListener(MouseEvent.MOUSE_OVER, pt1_over);
en.addEventListener(MouseEvent.MOUSE_OVER, en_over);

var myDelay2:Timer = new Timer(700,1);
myDelay2.addEventListener(TimerEvent.TIMER, showMessage2);
myDelay2.start();

function showMessage2(event:TimerEvent):void{
   gotoAndPlay("anim2");
}
stop(); 
```

这一直持续到页面“anim19”。问题是我的点击按钮不能很好地工作（我点击，然后我转到另一个页面，然后突然回到主页）并且随着 ROLL_OVER 效果时间变得有点奇怪......你能告诉我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:52:16.357

我弄清楚出了什么问题，显然我正在开始时间而不是在这里完成它：

```
myDelay.start(); 
```

所以每次延迟都必须有停止事件，所以我添加了函数 b4_over、b4_clicked、ma_over、ma_clicked、pt1_over、en_over）

像这样：

```
function b4_over(event:MouseEvent):void
{
    this.gotoAndStop("page2");
    myDelay.stop();
    myDelay.stop(); 
    myDelay2.stop();
    myDelay3.stop();
    myDelay4.stop();
    myDelay5.stop();
    myDelay6.stop();
    myDelay7.stop();
    myDelay9.stop();
    myDelay10.stop();
    myDelay11.stop();
    myDelay12.stop();
    myDelay13.stop();
    myDelay14.stop();
    myDelay15.stop();
    myDelay16.stop();
    myDelay17.stop();
    myDelay18.stop();
    myDelay19.stop();   
} 
```

一切都开始很好地协同工作。

# html - youtube高清嵌入+全屏启用不起作用

> ID：13671150
> 
> 赞同：1
> 
> 时间：2012-12-02T16:21:10.490
> 
> 标签：html, iframe, youtube

感谢另一个答案，我设法“强制”将高清嵌入 YouTube 视频中作为默认设置。不幸的是，这似乎与启用全屏并不能很好地共存

两个都

```
<iframe width="640" height="360" src="http://www.youtube.com/embed/W33zQcIoxhQ?vq=hd720"
 frameborder="0" allowfullscreen="true">  </iframe> or just with <iframe width="640"   
height="360" src="http://www.youtube.com/embed/083l_FSheWE?vq=hd1080" frameborder="0"
 allowfullscreen></iframe> 
```

正在显示高清默认值，但不允许全屏模式（youtube 播放器中没有图标）。在此先感谢您的帮助！

# c# - 使用 Blender for XNA 创建地形

> ID：13671157
> 
> 赞同：0
> 
> 时间：2012-12-02T16:21:56.363
> 
> 标签：c#, model, xna, blender

我一直在网上讨论如何为地形创建高度图，但我真的无法掌握它，我的问题是，如果我在搅拌机中创建地形模型，我是否可以在 XNA 中使用它`(VS2010)`作为我的地形？

这样做有什么缺点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:36:11.620

`Xna`支持`.FBX`模型，因此您可以从搅拌机中导出模型并在`Xna`.

1.  [使用-blender-models-in-xna](http://karnbianco.co.uk/blog/2009/05/06/using-blender-models-in-xna/)
2.  [Blender-toXNA](http://wiki.blender.org/index.php/Extensions:2.6/Py/Scripts/Import-Export/Blender-toXNA)

但是使用用于地形的模型一点都不好，正如您所知，在每个帧游戏引擎中都会在您的相机视图中渲染每个对象，因此如果您有一个大地形，则必须渲染它，这并不好。

所以使用地形模型可能不是一个好主意，除非地形只是一个大的方形平面。无论您希望地形是什么样子，您都可能会在代码中构建地形的运气更好。您可以将地形分割成小部分，例如 512 单元。

**已编辑**

[xna 中的地形示例](http://xnaterrain.codeplex.com/)

[完整的指南](http://www.toymaker.info/Games/XNA/html/xna_terrain.html)

# ios6 - 横向 UIInterfaceOrientation 仅在一个控制器中，否则仅支持纵向

> ID：13671167
> 
> 赞同：2
> 
> 时间：2012-12-02T16:22:37.140
> 
> 标签：ios6, uiinterfaceorientation

我必须编写一个通用应用程序，iPhone 部分只能以纵向显示，因此它将是首选方向，并且不必支持其他方向，但我遇到了在模态呈现的控制器中添加 MPMoviePlayerController 的问题它的能力必须在横向旋转。

为此，如果我只在应用程序设置和该控制器中以纵向方式阻止支持的界面方向，我会这样做：

```
- (BOOL) shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscapeRight | UIInterfaceOrientationMaskLandscapeRight;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationLandscapeLeft;
} 
```

结果是“preferredInterfaceOrientationForPresentation 必须返回支持的界面方向！” 碰撞。

否则，如果我必须设置支持的方向纵向和横向，但到处都阻止首选方向，并且在每个控制器中将 shouldrotate 设置为 NO，我想应该可以工作，但在我看来这确实是一件坏事。

您将如何处理这种新的界面定向机制？

谢谢

# linux - 如何获取 debian 弱键黑名单

> ID：13671173
> 
> 赞同：-4
> 
> 时间：2012-12-02T16:23:10.907
> 
> 标签：linux, debian

是否有 RSA 黑名单 debian 弱密钥的列表？我试图搜索，但我能找到的只是一些检查工具。如果我想要列表本身怎么办？这是可用的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:34:41.280

它位于[openssl-blacklist](http://packages.debian.org/source/squeeze/openssl-blacklist)和 [openssh-blacklist](http://packages.debian.org/source/squeeze/openssh-blacklist)包中。

# java - Java参数，数组索引错误

> ID：13671176
> 
> 赞同：0
> 
> 时间：2012-12-02T16:23:12.900
> 
> 标签：java, multithreading

所以我正在用 Java 制作一个 MIDI 程序。我有一个缓冲区，这是我用来从缓冲区获取消息并将它们传递给将显示它们的窗口类的线程。

`ArrayIndexOutOfBounds`每当我发送只有两个参数的消息时，我都会收到错误消息。我尝试过使用单独的数组和 if 语句，但似乎都不起作用。该错误表明它与 if 语句/第三个参数变量有关。

我使用了 switch 语句和掩码来确定正在接收哪种类型的消息，但是带有两个参数而不是三个参数的消息会引发错误，并且它与数组和参数数量有关。

```
public class DisplayThread extends Thread {

    Buffer bufferObj;
    MidiMonitorWindow window = new MidiMonitorWindow("MIDI Devices");

    DisplayThread(Buffer bufferObj) {

        this.bufferObj = bufferObj;

    }

    public void run() {

        while (true) {

            byte[] getMessages = bufferObj.get();

            if (getMessages != null) {

                int statusValue = getMessages[0] & 0xF0;
                int [] paramArray = new int[3];

                paramArray[0] = getMessages [0] & 0xFF;
                paramArray[1] = getMessages [1] & 0xFF; 
                if (getMessages[2] != 0){
                    paramArray[2] = getMessages [2] & 0xFF;
                }

                switch (statusValue) {

                    case NOTE_OFF:
                        System.out.println("Note Off");
                        window.showNoteOff(paramArray[0], paramArray[1], paramArray[2]);
                        break;

                    case NOTE_ON:
                        System.out.println("Note On");
                        window.showNoteOn(paramArray[0], paramArray[1], paramArray[2]);
                        break;

                    case POLY_PRESSURE:
                        System.out.println("Poly Pressure");
                        window.showPolyKeyPressure(paramArray[0], paramArray[1], paramArray[2]);
                        break;

                    case CONTROL_CHANGE:
                        System.out.println("Control Change");
                        window.showControlChange(paramArray[0], paramArray[1], paramArray[2]);
                        break;

                    case PROGRAM_CHANGE:
                        System.out.println("Program Change");
                        window.showProgramChange(paramArray[0], paramArray[1]);
                        break;

                    case CHANNEL_PRESSURE:
                        System.out.println("Channel Pressure");
                        window.showChannelPressure(paramArray[0], paramArray[1]);
                        break;

                    case PITCH_BEND:
                        System.out.println("Pitch Bend");
                        window.showPitchBend(paramArray[0], paramArray[1], paramArray[2]);
                        break;

                    default:
                        System.out.println("System Message");
                        window.showSystemExclusive();
                        break;
                }
            }
        }
    }
} 
```

你能提供的任何建议都会很有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:28:06.390

如果你的目的`if (getMessages[2] != 0)`是检查你的数组中是否有 a `3rd element`，那么这是行不通的。

请参阅此数组创建代码：-

```
byte[] getMessages = bufferObj.get(); 
```

现在，如果只有 2 个元素，`bufferObj.get()`只会给你数组。`2 element`因此，数组的大小没有明确定义。这取决于`bufferObj.get()`返回的内容。因此，`2nd index`如果元素的数量只是`2`. 这就是为什么`ArrayIndexOutOfBounds`在`2 elements`.

您可以`3rd element`通过检查获得的数组的长度来检查是否存在：-

```
if (getMessages.length > 2) {
    paramArray[2] = getMessages [2] & 0xFF;
} 
```

# testing - ActivePivot 测试策略

> ID：13671177
> 
> 赞同：3
> 
> 时间：2012-12-02T16:23:22.870
> 
> 标签：testing, activepivot

我正在考虑为 ActivePivot 服务器的不同部分以及最重要的后处理器实现自动化测试。

由于我处于起步阶段，因此我想更多地了解该领域的最新技术，最佳实践是什么，以及是否有任何需要避免的警告。

如果您有任何经验，我将很高兴收到您的来信。

干杯，帕斯卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:36:56.810

这是一个非常广泛的问题。ActivePivot 解决方案是一个 Java 软件，它继承了有关软件项目测试和持续构建的所有最佳实践。

但这里有一些基本的 ActivePivot 入口点：

**如何，何时何地编写测试？** 编写 junit 测试，使用 maven 运行它们，使用 Jenkins 设置连续构建。

**如何在单元测试中嵌入（真实的，非平凡的）ActivePivot 实例？** 启动嵌入式 Jetty Web 应用程序服务器。ActivePivot Sandbox 应用程序就是一个例子（查看*com.quartetfs.pivot.jettyserver.JettyServer*）。如果您希望针对同一个 ActivePivot 实例运行一系列单元测试，您可以静态启动 Jetty 服务器（例如在使用 @BeforeClass 注释的静态方法中）。在任何情况下都不要忘记在测试结束时停止它。

**如何编写性能测试？** 在沙盒项目中，有一个名为*com.quartetfs.pivot.client.MDXBenchmark*的小型 MDX 基准测试。它很容易丰富，是一个很好的起点。还有*com.quartetfs.pivot.client.WebServiceClient*说明连接到 ActivePivot

**如何测试后处理器？** 从 ActivePivot 版本 4.3.5 开始，没有专门用于隔离后处理器测试的框架。后处理器通过查询（MDX 查询或 GetAggregates 查询）进行测试。当然，如果您的后处理器实现有一些实用方法，可以在标准单元测试中一一测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T21:17:07.180

要测试基于 ActivePivot 的项目，更简单的方法是重用您的 Spring 配置。这可以通过 ClassPathXmlApplicationContext 来完成：

```
ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml"); 
```

这个简单的测试将检查您的 Spring 是否真的正常。然后，如果要运行查询，可以执行以下操作：

```
IQueriesService queriesService = context.getBean(IQueriesService.class);
queriesService.execute(new MDXQuery(someMDX)); 
```

如果要检查加载层，可以执行以下操作：

```
IStoreUniverse storeUniverse = context.getBean(IStoreUniverse.class);
for (IRelationalStore store : storeUniverse.values) {
    assertEquals(hardcodedValue1, store.getSize())
    assertEquals(hardcodedValue2, store.search("someKey", "someValue").size())
} 
```

这样，您不需要启动 web-app 容器，这可能会失败，因为它需要一些可用的端口（例如，您不能同时运行多个测试）。

后处理器应该是 Basic 或 DynamicAggregation 后处理器，它们易于测试：关注 .init 和调用点 ILocations 的评估方法。高级后处理器无法进行合理的单元测试。然后，我建议尽可能简单地编写 MDX 查询，但考虑到后处理器是相关的。

可以使用任何单元测试框架和模拟框架。尽管如此，我还是建议使用 JUnit 和 Mockito。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T10:19:35.647

我建议使用 Spring4JUnit 来启动上下文。然后，您可以自动装配 bean 并直接访问查询服务和活动数据透视管理器等内容。

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"classpath:SPRING-INF/ActivePivot.xml", "classpath:cusomTestContext-test.xml"})

...

@Resource
private IActivePivotManager manager;

@Resource
private IQueriesService queriesService;

@Test
public void testManagerOk() {
    assertNotNull(manager);
    assertTrue(manager.getStatus().equals(State.STARTED));
}

 @Test
public void testManagerOk() {
   // run a query with the queries service
}
... 
```

您可以在单独的上下文文件中为测试定义自定义测试属性，例如加载一组测试数据。

# java - org.hibernate.LazyInitializationException：无法初始化代理 - 没有 Session，encore un fois

> ID：13671178
> 
> 赞同：12
> 
> 时间：2012-12-02T16:23:25.897
> 
> 标签：java, spring, hibernate

Foo 看起来有这个：

```
@ManyToMany
private Set<User> favouritedBy; 
```

而用户有这个：

```
@ManyToMany(mappedBy = "favouritedBy")
private Set<Foo> favourites  = new HashSet<Foo>();
public Set<Foo> getFavourites() {
  return favourite;
} 
```

并且 fooService 有这个，在会话打开时通过事务方法访问延迟加载的集合：

```
@Transactional(readOnly = true)
public Set<Foo> getFavourites(User user) {
user = dao.get(User.class, user.getId()); //the dao gets a session
Set<Foo> favourites = user.getFavourites();//but the session is not here and the exception is thrown?
return  favourties;
} 
```

**编辑** 这修复了它，而不使用标准：

```
Set<Foo> favourites = new HashSet<Foo>(user.getFavourites()); 
```

这用标准修复它

```
Session session = sessionFactory.getCurrentSession();
final Criteria crit = session.createCriteria(Foo.class);
crit.setFetchMode("favourites", FetchMode.JOIN);
crit.add(Property.forName("id").eq(id));
return (Foo) crit.uniqueResult(); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-02T16:27:51.773

[`FetchType`](http://docs.oracle.com/javaee/6/api/javax/persistence/ManyToMany.html#fetch%28%29)a中的默认值`ManyToMany`和[使用惰性关联](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/performance.html#performance-fetching-lazy)`LAZY`的休眠文档清楚地将这种访问称为错误。只有在会话仍处于打开状态时，您才能与延迟关联的对象进行交互。该部分文档还提供了访问对象的此类惰性关联成员的替代方法。我们更喜欢按照我们的应用程序中使用的标准指定获取模式`JOIN`

**编辑**：

```
Set<Foo> favourites = user.getFavourites(); 
```

上面的语句实际上并没有返回一个包含所有`Foo`对象的集合。它只是一个代理。`Foo`仅当访问集合中的元素时才会获取实际对象，例如`favorites.iterator()`等，此操作显然发生在您的`getFavorites()`方法之外。但是该方法上的`@Transactional`注解`getFavorites()`表明会话将在该方法结束时关闭。

因此，当在收藏夹集上调用方法时，会话已经关闭，因此出现异常。

为了解决这个问题，您应该使用 Criteria 对象来检索用户并指定获取类型，`JOIN`以便将 Foo 对象填充到返回的 User 对象中。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-04T04:14:52.233

有两种解决方案。

1.  不要使用延迟加载。

    `lazy=false`在 XML 中设置或在`@OneToMany(fetch = FetchType.EAGER)`注释中设置。

2.  使用延迟加载。

    `lazy=true`在 XML 中设置或在`@OneToMany(fetch = FetchType.LAZY)`注释中设置。

    并在您的添加过滤器`web.xml`

    ```
     <listener>
         ...
     </listener>
     <filter>
         <filter-name>hibernateFilter</filter-name>
         <filter-class>
             org.springframework.orm.hibernate4.support.OpenSessionInViewFilter
         </filter-class>
         <init-param>
             <param-name>sessionFactoryBeanName</param-name>
             <param-value>mySessionFactory</param-value> 
         </init-param>
     </filter>
     <filter-mapping>
         <filter-name>hibernateFilter</filter-name>
         <url-pattern>/*</url-pattern>
     </filter-mapping>
     <servlet>
         ...
     </servlet> 
    ```

并且`<param-value>mySessionFactory</param-value>`是您在中定义的 sessionFacory bean 名称`applicationContext.xml`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-21T17:01:46.473

是的，应该在事务上下文中访问该对象，否则该操作将抛出一个`LazyInitializationException`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-29T13:41:27.010

如果您使用任何 @...Many... 关系以及 Fetch 类型“Lazy”并且您得到 LazyInitializationException - 这意味着您关闭了 OpenInView，这很好。

为了避免LazyInitializationException**和**转向 OIV（这使得 Hibernate 会话打开的时间比大多数情况下需要的时间长） - **确保您在发布列上指定了 @Fetch(FetchMode.JOIN)。**

示例：之前：

```
@ManyToMany(fetch = FetchType.LAZY)
private Set<Kek> keks; 
```

后：

```
@Fetch(FetchMode.JOIN)
@ManyToMany(fetch = FetchType.LAZY)
private Set<Kek> keks; 
```

这样，您将强制使用 Join Fetch 类型，该类型将（非常简单地说）提供正确的查询以及所需的链接实体 Joined，而不是强迫您使用 Eager fetch。

# c# - 使用 Lambda 和 EF 选择 ALL

> ID：13671181
> 
> 赞同：1
> 
> 时间：2012-12-02T16:23:59.887
> 
> 标签：c#, entity-framework, lambda

我有这个选择所有城市：

```
ExecuteStoreCommand<MCT_DBEntities>("select * from cities", ConnectionResolver.DB_Connection); 
```

现在我正在尝试将 转换为 Lambda，但我该如何告诉它`SELECT *`呢？

```
GetWithExpression<city, MCT_DBEntities>(u => u.SelectMany, ConnectionResolver.DB_Connection); 
```

编辑：

```
 private static TValue RetryGetWithExpression<U,T, TValue>(Func<ObjectSet<T>, TValue> func, String connection, Int32 retryInfiniteLoopGuard = 0)
        where T : class
        where U : ObjectContext
    {
        Microsoft.Practices.TransientFaultHandling.RetryPolicy policy = RetryPolicyProvider.GetSqlAzureRetryPolicy();

        using (U entitiesContext = (U)Activator.CreateInstance(typeof(U), new[] { connection }))
        {...} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:28:44.113

如果您的第一个参数是`Expression<Func<T, bool>>`您可能想要：

```
RetryGetWithExpression<city, MCT_DBEntities>(_ => true, ConnectionResolver.DB_Connection); 
```

**编辑。** 这应该有效：

```
RetryGetWithExpression<MCT_DBEntities, city, IQueryable<city>>(x => x.Select(y => y), 
                                        ConnectionResolver.DB_Connection); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:27:52.033

你有没有尝试过

```
GetWithExpression<city, MCT_DBEntities>(u => u.Select(), ConnectionResolver.DB_Connection); 
```

# java - 让 spring-data-neo4j 使用 getter 和 setter

> ID：13671182
> 
> 赞同：0
> 
> 时间：2012-12-02T16:24:00.480
> 
> 标签：java, spring, javafx-2, neo4j, spring-data-neo4j

嘿，Stackoverflower 同胞，

我最近尝试将 Spring 的 Spring.Data.Neo4j 连接器与 Neo4J 数据库结合使用。正确配置后，我遇到了以下问题。存储基于 JavaFX 的实体时，JavaFX 属性设置为 null。这很可能是这种情况，因为 spring.data.neo4j 似乎没有使用 getter 和 setter，而是使用反射。由于它不知道如何保留 JavaFX 属性，因此它会保留空值并在从数据库中检索时覆盖它们。

这是我的实体

```
@NodeEntity
public class User implements UserIF {
    @GraphId    
    private Long id = null;

    private final StringProperty nameProperty = new SimpleStringProperty();

    public String getName() {
        return nameProperty.get();
    }

    public void setName(String name) {
        nameProperty.set(name);
    }
} 
```

是否可以让 Spring.data.neo4j 使用 getter 和 setter 进行访问，以便我可以保留我的 JavaFX bean？还是我做错了什么？

谢谢你的帮助，卡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:52:23.170

现在 SDN 只使用您实体的字段，这样的事情将是可配置的更改。[随时在JIRA](http://spring.neo4j.org/issues)上提出问题以实施它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:58:48.717

该问题可能取决于 Spring Data Neo4j 如何映射字段，这些字段是对非节点实体的类对象的引用，即未使用 @NodeEntity 注释。在这种情况下，引用的类必须可转换为 String（[请参阅文档](http://static.springsource.org/spring-data/data-neo4j/docs/2.0.0.RELEASE/reference/html/#d0e1694)）。我有一个类似的问题，我解决了它，声明了一个 Spring 转换工厂，该工厂管理从引用的类到 String 的映射并返回。这是一个将扩展嵌入式接口的每个类（它是无效的，只是为了将类标记为可嵌入）映射到 String 的示例，反之亦然：

```
final class EmbeddedToStringConverterFactory implements ConverterFactory<Embedded, String> {

        @Override
        public <T extends String> Converter<Embedded, T> getConverter(Class<T> type) {
            return new EmbeddedToStringConverter(type);
        }

        private final class EmbeddedToStringConverter<E extends Embedded, S extends String> implements Converter<E, S> {

            private Class<S> stringType;

            public EmbeddedToStringConverter(Class<S> stringType) {
                this.stringType = stringType;
            }

            @Override
            public S convert(E source) {
                if (source != null) {
                    return (S) new Gson().toJson(source);
                } else {
                    return null;
                }
            }
        }
    }

final class StringToEmbeddedConverterFactory implements ConverterFactory<String, Embedded> {

    @Override
    public <T extends Embedded> Converter<String, T> getConverter(Class<T> type) {
        return new StringToEmbeddedConverter(type);
    }

    private final class StringToEmbeddedConverter<S extends String, E extends Embedded> implements Converter<S, E> {

        private Class<E> embeddedType;

        public StringToEmbeddedConverter(Class<E> embeddedType) {
            this.embeddedType = embeddedType;
        }

        @Override
        public E convert(S source) {
            if (source != null) {
                return (E) new Gson().fromJson(source, embeddedType);
            } else {
                return null;
            }
        }
    }
} 
```

转换工厂应在 Neo4j 配置文件中声明如下：

```
<bean id="conversionService"
      class="org.springframework.context.support.ConversionServiceFactoryBean">
    <property name="converters">
        <list>
            <bean class="EmbeddedToStringConverterFactory"/>
            <bean class="StringToEmbeddedConverterFactory"/>
        </list>
    </property>
</bean> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-03T14:51:14.133

我的 bean 中的 StringProperty 也有同样的问题。@remigio 的回答帮助我找到了解决方案。

所以我添加了转换器工厂：

```
public class StringPropertyToStringConverterFactory
 implements ConverterFactory<StringProperty, String> {

    @Override
    public <T extends String> Converter<StringProperty, T> getConverter(final Class<T> type) {
        return new StringPropertyToStringConverter<>();
    }

    private final class StringPropertyToStringConverter<E extends   StringProperty, S extends String>
    implements Converter<E, S> {
        @Override
        public S convert(final E s) {
            if (s != null) {
                return (S) s.getValue();
            } else {
               return null;
         }
      }
   }
}
public class StringToStringPropertyConverterFactory
 implements ConverterFactory<String, StringProperty> {
    @Override
    public <T extends StringProperty> Converter<String, T> getConverter(final Class<T> type) {
        return new StringToStringPropertyConverter<>();
    }

  private final class StringToStringPropertyConverter<S extends String, E extends StringProperty>
    implements Converter<S, E> {
    @Override
    public E convert(final S s) {
        if (s != null) {
            return (E) new SimpleStringProperty(s);
        } else {
            return null;
        }
     }
  }
} 
```

然后我在我的 Neo4jConfiguration 中注册了这些转换器工厂：

```
public class AppConfig extends Neo4jConfiguration {
    public AppConfig() {
        setBasePackage("org.foo.bar");
        addConversionService();
    }

    private void addConversionService() {
         ConversionServiceFactoryBean conversionService = new ConversionServiceFactoryBean();
        conversionService.setConverters(
         newHashSet(new StringPropertyToStringConverterFactory(),
            new StringToStringPropertyConverterFactory()));
        conversionService.afterPropertiesSet();
        setConversionService(conversionService.getObject());
    }
} 
```

我不喜欢的是我不得不调用方法`afterPropertiesSet()`。也许有更优雅的方式。但毕竟它有效并且属性被保存。

# php - 将php日期时间存储在mysql数据库中

> ID：13671185
> 
> 赞同：28
> 
> 时间：2012-12-02T16:24:14.010
> 
> 标签：php, mysql

我不敢相信我不能这样做，但我希望能够将当前日期和时间从 php 存储到 mysql 表中。

表中的列是日期时间类型。我试过这个

```
$current_date = date("Y-m-d");
$my_date = strtotime($current_date);
INSERT INTO my_table (date_time) VALUES ('$my_date') 
```

但我的时间戳显示为 0000-00-00 00:00:00

这一定很容易做到，但我就是不能让它工作！我想使用 php 的时间戳，而不是使用 mysql now() 函数

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-02T16:29:54.733

试试这个：

```
$my_date = date("Y-m-d H:i:s");
INSERT INTO my_table (date_time) VALUES ('$my_date'); 
```

在 date 函数的 date-format 参数中，使用 :
'H' 表示 24 小时格式
'h' 表示 12 小时格式

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-12-02T16:27:52.973

不要将其保存为 Unix 时间戳（`strtotime()`输出），而是将其保存为 DATETIME 列中的“2012-12-02 13:00”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-22T07:26:45.843

创建列类型 TIMESTAMP 并将其设置为 NOT NULL。然后在 INSERT 期间传入 NULL，MySQL 将插入当前日期和时间。这对我有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-04T13:43:14.207

将名为 'date_time' 的列的 'type' 设置为 'DATETIME' 并运行以下查询：

```
INSERT INTO my_table (`date_time`) VALUES (CURRENT_TIMESTAMP) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-27T05:01:13.307

如果你在 PHP 中有日期作为时间戳，你可以使用 FROM_UNIXTIME 函数 [1]

```
mysql> insert into table_name values (FROM_UNIXTIME(your_timestamp_here)); 
```

希望它有所帮助

[1]。[https://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_from-unixtime](https://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_from-unixtime)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-29T12:51:52.460

删除 strtotime()

```
$current_date = date("Y-m-d");
INSERT INTO my_table (date_time) VALUES ('$current_date') 
```

如果要包括小时、分钟和秒， $current_date = date("Ymd H:i:s");

# html - Twitter Bootstrap 中的按钮样式

> ID：13671186
> 
> 赞同：1
> 
> 时间：2012-12-02T16:24:21.760
> 
> 标签：html, css, twitter-bootstrap

我刚开始使用 Bootstrap，我被困在最初的阶段。我正在尝试修改 marketing-narrow.html（来自 docs/examples 的默认示例）以使显示按钮更小。

我变了

```
 <a class="btn btn-large btn-success" href="#">Sign up today</a> 
```

到

```
 <a class="btn btn-small btn-success" href="#">Sign up today</a> 
```

而且视觉上没有任何变化！我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T16:41:40.417

他们用这个规则覆盖了一些属性：

```
.jumbotron .btn {
     font-size: 21px;
     padding: 14px 24px;
} 
```

下划线的影响是，`btn-small`并且`btn-large`在 .jumbotron 上下文中是相同的。

* * *

删除`jumbotron`类，以便 btn-small 可以按预期工作：

```
<div>
        <h1>Super awesome marketing speak!</h1>
        <p class="lead">Cras justo odio, dapibus ac facilisis in, egestas eget quam. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</p>
        <a class="btn btn-small btn-success" href="#">Sign up today</a>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-24T12:44:36.477

超小按钮 HTML：

```
<button class="btn btn-warning  btn-xs" type="button">Extra small button</button>
<button class="btn btn-success  btn-xs" type="button">Extra small button</button> 
```

![在此处输入图像描述](../Images/49b632d59df25559551cab00ffe9ef3c.png)

[http://twitterbootstrap.org/bootstrap-css-success-buttons/](http://twitterbootstrap.org/bootstrap-css-success-buttons/)

# jquery - 使用带有 jQ uery 的 KnockoutJs 模板

> ID：13671187
> 
> 赞同：1
> 
> 时间：2012-12-02T16:24:23.580
> 
> 标签：jquery, json, knockout.js

我想使用 jQuery 和 KnockoutJs 模板在 DOM 中得到以下 HTML：

```
<div class="messageToAndFromOtherMember" id="13">
    <span>the message</span> 
    <span>2012-12-02 14:05:45.0</span> 
</div> 
```

我已经开始编写我的 KO 模板，如下所示：

```
<div class="messageToAndFromOtherMember"  data-bind="attr:{ id: messageId}">
    <span data-bind="text: message"></span> 
    <span data-bind="text: sendDateFmted"></span> 
</div> 
```

ajax请求成功后，执行以下js：

```
var messageViewModel = {
         message: response.message, 
         sendDateFmted: response.sendDateFmted, 
         messageId: response.messageId
     };
ko.applyBindings(messageViewModel); 
```

现在我不确定如何以及在何处实际进行绑定：因为在 ajax 请求完成之前我的消息不存在，并且我可以拥有多条消息......

任何人都可以提出解决方案吗？

**编辑 1**：我已将此添加到 html 页面：

```
<div data-bind="template: { name: 'message-template', data: messageViewModel }"></div> 
```

我现在收到以下 js 错误：

> 未捕获的错误：无法解析绑定。消息：ReferenceError：$messageViewModel 未定义；绑定值：模板：{名称：'message-template'，数据：messageViewModel }

**编辑 2**：我已将代码更改如下：

```
var messageViewModel = {
    data: ko.observable({   
        message: response.message, 
        sendDateFmted: response.sendDateFmted, 
        messageId: response.messageId
    })
     };

$("<div>",{
    class:"messageToAndFromOtherMember"
}).data("bind", "template: { name: 'message-template', data: data }").appendTo("#messagesToAndFromOtherMember");

ko.applyBindings(messageViewModel); 
```

请注意，我需要能够**从 jQuery**添加元素，以便能够添加一条消息，然后添加另一条消息，依此类推。但是，上面的 jQuery 代码不起作用，我在 DOM中看不到任何**数据绑定之类的东西......**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:34:18.367

我没有看到你在哪里绑定你的模板，另外，请阅读文档模板如何工作[Knockout Tempate dinding](http://knockoutjs.com/documentation/template-binding.html)

我已经创建了一些淘汰模板如何工作的示例，所以这里是[演示](http://jsfiddle.net/pkysylevych/LqY6J/)

首先你应该像这样初始化你的模板：

```
<script id="myTmpl" type="text/html">
    <div class="messageToAndFromOtherMember"  data-bind="attr:{ id: messageId}">
      <span data-bind="text: message"></span> 
      <span data-bind="text: sendDateFmted"></span> 
    </div>
<script> 
```

模板的名称在哪里`id='myTmpl'`，要调用它，您应该执行以下操作：

```
<div data-bind="template: {name: 'myTmpl', foreach: $data}" ></div> 
```

这是更新的[DEMO](http://jsfiddle.net/pkysylevych/FwWDp/)

**编辑：**

另外，如果您有消息数组，我已经为您创建了如何使用 foreach + 模板的示例，[这里是链接](http://jsfiddle.net/pkysylevych/FwWDp/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T16:38:06.340

```
var messageViewModel = {
    message: ko.observable(), 
    sendDateFmted: ko.observable(), 
    messageId: ko.observable()
};
ko.applyBindings(messageViewModel); 
```

当数据从服务器到达时：

```
messageViewModel.message(response.message);
messageViewModel.sendDateFmted(response.sendDateFmted);
messageViewModel.messageId(response.messageId); 
```

使用映射插件，您可以执行以下操作：

```
ko.mapping.fromJS(response, messageViewModel); 
```

* * *

如果您不打算在多个地方使用它，您真的不需要模板。没有模板更简单。看看[http://jsfiddle.net/3BuHR/](http://jsfiddle.net/3BuHR/)

如果您确定需要模板，这里有一个示例：http: [//jsfiddle.net/Jxhm5/](http://jsfiddle.net/Jxhm5/)

* * *

您似乎只是因为它的模板功能而使用淘汰赛。KO可以做得更多。

相反，我会让 KO 处理基于`observableArray`'s 的 DOM 创建。当数组被修改时，DOM 会自动更新。

```
var viewModel = {
    messages: ko.observableArray(),
};

function Message(data) {
    data = data || {};
    this.message = ko.observable(data.message);
    this.sendDateFmted = ko.observable(data.sendDateFmted);
    this.messageId = ko.observable(data.messageId);
} 
```

```
<div class="message-list" data-bind="foreach: messages">
    <div class="messageToAndFromOtherMember"  data-bind="attr:{ id: messageId}">
        <span data-bind="text: message"></span> 
        <span data-bind="text: sendDateFmted"></span> 
    </div>
</div> 
```

然后当数据从服务器到达时：

```
viewModel.messages.push(new Message(response)); 
```

KO 将为您跟踪插入、删除、重新排序和更新 DOM。

[http://jsfiddle.net/v5sdf/](http://jsfiddle.net/v5sdf/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T20:40:52.730

这是我从 jQuery 动态生成 div 所需要的：

```
$("<div/>", {
  class: "messageToAndFromOtherMember",
  "data-bind": "template: { name: 'message-template', data: data }"
})
.appendTo("#messageToAndFromOtherMember"); 
```

非常感谢您的投入 Markus 和 Pavlo！我一定会使用你的提示 Markus。

# javascript - 在 HTML texbox 中隐藏插入符号

> ID：13671190
> 
> 赞同：0
> 
> 时间：2012-12-02T16:25:02.400
> 
> 标签：javascript, html, css, textbox, caret

所以，这是一个你们中的许多人可能会觉得奇怪的设计决定。我想隐藏插入符号，使其不会出现在网页的文本框中，但我希望文本框保持活动状态。

我惊讶地发现 CSS 实际上并没有为自定义插入符号提供任何功能，诚然，我过去从未需要过任何功能，但我认为我肯定不会是第一个想要这样做的人。

对我来说，解释我所做的最好方法是向你展示网站。www.hududandescape.com

如您所见，我创建了自己的自定义插入符号，它只是在文本框的末尾闪烁，该文本框的样式与背景融为一体。文本框始终保持焦点，因此不存在用户无法输入的风险。

我的问题是文本框附带的插入符号仍在闪烁。我在 Chrome 和 Safari 中修复了这个问题，方法是在盒子最末端的顶部放置一个小黑框，从而覆盖插入符号。但是，此解决方案并不理想，并且在 Firefox 或 IE 中不起作用。

您的解决方案，无论多么有创意，都非常受欢迎:)

安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:47:23.183

我不确定，但试试这样的。想法很简单，我想你会明白阅读代码

```
 <style>
      input#top {
       width:0px;
       border: none;
    }
    #show-input{
       border:1px solid #000;
       width: 100px;
       height: 25px;
    }
  </style>

    <input id='top' /> <!-- 'hidden' -->
    <div id='show-input' ></div> <!-- show input -->
    <script>$(function(){ 
          $("#show-input" ).click(function(){
              $("#top").focus();
          });
          $("#top").keyup(
             function(){ 
               $("#show-input").html($(this).val())
          }) 
    })
    </script> 
```

# mysql - 工作 perl ascript 现在说 .DBD::mysql::db do failed: You have an error in your SQL syntax;

> ID：13671195
> 
> 赞同：0
> 
> 时间：2012-12-02T16:26:04.853
> 
> 标签：mysql, perl

我得到了这个 perl 脚本，直到最近它都可以正常工作。我收到此错误消息。

DBD::mysql::db do failed: 你的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法，以便在 import_productfeatures.pl 第 71 行的第 2 行的 ''') ON DUPLICATE KEY UPDATE value=''' 附近使用。 DBD::mysql::db 失败：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获得正确的语法，以便在 import_productfeatures.pl 第 71 行的第 2 行的 ''') ON DUPLICATE KEY UPDATE value=''' 附近使用。

```
foreach my $feature (@features) {
    my $cat_featureid = $feature->{CategoryFeature_ID};
    my $value = $feature->{Presentation_Value};
    my $sql = "INSERT INTO products_features (product_id, feature_id, value) 
        VALUES (".$prodid.", ".$cat_featureid.", ".$dbh->quote($value).") 
        ON DUPLICATE KEY UPDATE value=".$dbh->quote($value);
    $dbh->do($sql);
  } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T17:55:25.420

You should use placeholders, instead of putting the values directly into the string:

```
my $sql = "INSERT INTO products_features (product_id, feature_id, value) 
   VALUES (?,?,?) 
   ON DUPLICATE KEY UPDATE value=?";
my $sth = $dbh->prepare($sql);

foreach my $feature (@features) {
    my $cat_featureid = $feature->{CategoryFeature_ID};
    my $value = $feature->{Presentation_Value};

    $sth->execute($prodid,$cat_featureid,$value,$value);
}

$sth->finish(); 
```

DBI will handle the correct escaping for you.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T16:30:24.343

打印出 的值，`$sql`以便您可以看到正在构建的 SQL 语句。然后您可以查看语法问题是什么，或者将其发布在这里以便我们进行诊断。

但是，更重要的是，您应该使用参数化查询，而不是使用不受信任的外部数据构建 SQL 语句。你让自己对 SQL 注入持开放态度。请参阅[http://bobby-tables.com/perl.html](http://bobby-tables.com/perl.html)以获取有关如何正确执行此操作的示例。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-02T16:36:58.027

我想你错过了单引号。

改变

```
my $sql = "INSERT INTO products_features (product_id, feature_id, value) 
        VALUES (".$prodid.", ".$cat_featureid.", ".$dbh->quote($value).") 
        ON DUPLICATE KEY UPDATE value=".$dbh->quote($value); 
```

至

```
my $sql = "INSERT INTO products_features (product_id, feature_id, value) 
        VALUES (".$prodid.", ".$cat_featureid.", '".$dbh->quote($value)."') 
        ON DUPLICATE KEY UPDATE value='".$dbh->quote($value."'"); 
```

# java - 按对象属性分组元素

> ID：13671200
> 
> 赞同：1
> 
> 时间：2012-12-02T16:26:46.400
> 
> 标签：java

我真的需要解决一个困扰了 3 天的问题。任何帮助，将不胜感激。

我有一个`Car`带有**品牌**、**模型**和**颜色**实例变量的类。
我有一个`Preferences`带有**name**、**brand**、**model**和**color**实例变量的类。
我有一个`preferences`(Key = name, value = Car) HashMap，其中包含人的姓名作为键和他们想要驾驶的汽车作为值。
最后，我有一个`names`包含系统中所有名称的 ArrayList。

我想以某种方式根据他们想要驾驶的汽车对人们的姓名进行分组。
例如，我希望输出类似于：

福特福克斯，2006，蓝色：尼克，比尔，吉姆
欧宝阿斯特拉，2008，黑色：乔，乔治
梅赛德斯 CLK，2009，黑色：史蒂夫，克里斯，约翰

我想到的第一件事是，我可以将所有重复项保存在一个列表中，然后获取该列表的名称，但我发现我无法根据他们喜欢的汽车组成人群。所以，我认为下面的代码根本没有帮助。

```
Preferences[] p = new Preferences[preferences.size()];  

for (int i = 0; i < preferences.size(); i++) {
    p[i] = (Preferences) preferences.get(names.get(i));
    Car car = new Car(p[i].getBrand(), p[i].getModel(), p[i].getColor());
    if (!set.add(car)) { //duplicate
        System.out.println("Duplicate!");
        listOfDuplicates.add(car);
    }
} 
```

有什么我可以做的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T16:32:38.840

```
Map<Car, List<String>> namesByCar = new HashMap<Car, List<String>>();
for (Map.Entry<String, Car> entry : preferences) {
    String name = entry.getKey();
    Car car = entry.getValue();
    List<String> names = namesByCar.get(car);
    if (names == null) {
        names = new ArrayList<String>();
        namesByCar.put(car, names);
    }
    names.add(name);
} 
```

干得好...

使用 Guava 的 Multimap 会更容易。

# c - 困惑：二维数组的动态分配，C

> ID：13671201
> 
> 赞同：0
> 
> 时间：2012-12-02T16:27:01.523
> 
> 标签：c, arrays, pointers, sizeof

我昨天遇到了一个关于 SO 的[问题](https://stackoverflow.com/questions/13659041/how-can-i-dynamic-allocate-a-two-dimensional-array/)，它想在 C 中动态分配一个二维数组。

答案之一是以这种方式分配它：

`int (*place)[columns] = malloc(rows * sizeof *place);`

这除了漂亮之外，还给我带来了一个问题。问题如下：

以下是我分配 4x4 的代码

```
 int (*arr)[4] = (int (*)[4]) malloc(4 * sizeof *arr);
    printf("%d\n", sizeof arr);                 //Dynamic 2-D array by above method

    int **arr1 = (int**) malloc(4 * sizeof(int*));
    for(int i = 0; i < 4; i++)
            arr1[i] = (int *) malloc(sizeof(double));
    printf("%d\n", sizeof arr1);                          //Usual dynamic 2-D array

    int *arr2 = (int*) malloc(4 * sizeof(int));
    printf("%d\n", sizeof arr2);                          //Dynamic 1-D array 
```

通常的输出是：

```
4
4
4 
```

但是，如果我尝试打印`sizeof *arr`,`sizeof *arr1`和`sizeof *arr2`，则输出为：

```
16
4
4 
```

我不明白为什么会这样。知道为什么输出`sizeof *arr`是`16`吗？在第一种情况下如何分配内存？

另外，当我尝试打印 and 的地址时`arr`，`*arr`两个打印的值都是相同的。`*arr`意思是“价值” `arr`。那么这是否意味着 arr 存储自己的地址，即它指向自己（我认为这是不可能的）？我有点困惑。知道我哪里错了吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T16:34:09.587

> 但是，如果我尝试打印`sizeof *arr`,`sizeof *arr1`和`sizeof *arr2`，我会得到`16`,`4`和`4`.

在哪里：

```
int (*arr)[4];
int **arr1;
int *arr2; 
```

您必须在 32 位机器上工作，而不是 64 位机器。

的类型`arr`是“指向 4 数组的指针`int`”。当你取消引用它时，你会得到一个'array of 4 `int`'。当传递给`sizeof`时，数组的大小为 16 ( `4 * sizeof(int)`)。大多数时候，当您引用一个数组时，类型会调整为“指向数组的第零个元素的指针”，但这`sizeof()`是该规则的主要例外；它将数组视为数组并返回整个数组的大小。

的类型`arr1`是'指向指针的指针`int`'。当你取消引用它时，你会得到一个“指向”的指针`int`。当传递给`sizeof`时，指针的大小为 4 ( `sizeof(int *)`)。

的类型`arr2`是“指向”的指针`int`。当你取消引用它时，你会得到一个`int`. 当传递给 时`sizeof`，`int`大小为 4。

* * *

> 好的！我得到了大部分。但是......为什么当我这样做时输出不是 16 `sizeof arr2`？

正如詹姆斯在评论中指出的那样：

> 因为在 32 位机器上`sizeof(arr2)`减少到4。`sizeof(int*)`

即，`arr2`是一个指针；在 32 位机器上，指针的大小为 4。

> 此外，arr 是“指向 4 个 int 数组的指针”，即单个指针。那么我如何得到一个 4×4 矩阵。

您可以使用以下任何一种：

```
int mat1[4][4];
int (*mat2)[4][4]; 
```

第一个是直接的 4×4 矩阵。的结果`sizeof(mat1)`在 32 位机器上是 64（和大多数 64 位机器一样）。

第二个是指向 4×4 矩阵的指针`int`。`sizeof(mat2)`在 32 位机器上的结果将为 4；`mat2`是一个指针（指向 的 4×4 矩阵`int`），因此它的大小为 4，与所有其他对象指针相同（实际上，与每个函数指针的大小相同，尽管 C 标准不保证函数指针和对象指针的大小相同；但 POSIX 确实保证了这一点）。

的结果是指向`sizeof(*mat2)`的对象的大小，是一个 的 4×4 矩阵，所以大小又是 64。`mat2``int`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T16:34:46.753

在 32 位系统中，它需要 4 个字节或 32 位来唯一标识每个内存地址。指针只是地址的持有者。所以它需要4个字节。在第一种情况下，arr 是一个长度为 4 的指针数组。所以它需要 4*4 =16 个字节。在其他两种情况下， arr1 和 arr2 只是一个指针。所以它们占用 4 个字节。

# java - Java线程和run方法

> ID：13671202
> 
> 赞同：1
> 
> 时间：2012-12-02T16:27:02.117
> 
> 标签：java, multithreading

我正在编写一个使用一些线程的 Java 应用程序。主要方法如下所示：

```
WorkerThread[] thread = new WorkerThread();
for (int i = 0 ; i<10 ; i++) {
    thread = new WorkerThread();
    thread.doStuff();
} 
```

我的 WorkerThread 看起来像这样：

```
class WorkerThread {
    public void run() {
        ...
    }

    public void doStuff() {
        ...
    }
} 
```

问题是，很明显，我从 run 方法调用 doStuff ，它与其他线程同时执行，但如果我直接从 main 调用 doStuff ，它不是同时执行的。

好的，现在的问题是：有没有一种方法可以同时执行 doStuff 方法，而不是从 run 方法调用它，而是从 main 方法调用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T16:49:44.783

您不能直接调用 Thread 对象上的方法。获得线程并发的唯一方法是调用它的 start() 方法，该方法又在单独的执行线程上调用 run()。直接从 main() 调用任何其他方法就像在常规非线程对象上调用方法一样；没有并发，没有什么特别的事情发生，方法立即执行。

听起来您正在尝试在主线程和工作线程之间进行通信。每个线程的 run() 方法负责在该线程上执行代码。如果您可以与该 run() 方法进行通信，那么您可以控制该线程上发生的事情。

一种方法是在构造线程时传入一个变量。保存 run() 方法可以检查以确定要执行的操作的值。例如，下面我们有一个枚举，其中包含三个可能的操作。run() 方法查看枚举并根据传递给 WorkerThread() 构造函数的值决定要做什么。

```
class WorkerThread {
    public enum Action { DO_STUFF, MAKE_WIDGETS, FROB_BARS }
    private Action action;

    public WorkerThread(Action action) {
        this.action = action;
    }

    public void run (){
        switch (action) {
            case DO_STUFF:     doStuff();     break;
            case MAKE_WIDGETS: makeWidgets(); break;
            case FROB_BARS:    frobBars();    break;
        }
    }

    public void doStuff()     { ... }
    public void makeWidgets() { ... }
    public void frobBars()    { ... }
} 
```

现在我们的 main() 方法看起来像这样。您创建 WorkerThreads 并传入要执行的操作，然后调用 start()。

```
WorkerThread[] threads = new WorkerThread[10];
for (int i = 0; i < threads.length; ++i) {
    threads[i] = new WorkerThread(WorkerThread.Action.DO_STUFF);
    threads[i].start();
} 
```

* * *

你可以用无数种不同的方式做同样的事情。除了拥有一个 WorkerThread 类，您还可以拥有几个具有不同 run() 方法的不同类，然后从 main() 实例化适当的子类。

```
class DoStuffWorkerThread     extends Thread { ... }
class MakeWidgetsWorkerThread extends Thread { ... }
class FrobBarsWorkerThread    extends Thread { ... } 
```

* * *

如果你愿意，你甚至可以在 main() 中创建匿名线程类。然后逻辑可以是任何 main() 想要的。

```
Thread[] threads = new Thread[10];
for (int i = 0; i < threads.length; ++i) {
    threads[i] = new Thread() {
        public void run() {
            doStuff();
        }
    };

    threads[i].start();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:32:31.183

当您使用时， `thread.doStuff();`您没有使用线程，至于使用线程，您将不得不调用`thread.start()`方法，该方法将在内部调用`run()`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T16:37:59.603

```
 Thread[] threads = new Thread()[10];
    for (int i = 0 ; i<10 ; i++) {
        if ( i<5) {
          threads[i] = new Thread(new WorkerA());
        } else {
          threads[i] = new Thread(new WorkerB());
        }
        threads[i].start();
    } 
```

起初，您正在创建一个数组，但没有正确使用它。您不能将对象分配给数组吗？然后你必须调用`start()`方法在后台执行线程并调用他的run方法。

你的工人应该是这样的：

```
class WorkerA implements Runnable {            

    public void run (){
        ...
        // put here your code from doStuff in one Version
        ...
    }

}

class WorkerB implements Runnable {

    public void run (){
        ...
        // put here your code from doStuff in an other Version
        ...
    }

} 
```

`thread[i].start()`现在，您可以在引用数组的任何地方调用它，而不是在循环中调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T16:40:43.053

你可以使用`Runnable`它。

```
// Dictate what work needs to be done
Runnable work = new Work(); // or new OtherWork();

Thread thread = new Thread(work);
thread.start();

class Work implements Runnable {
    public void run(){
        System.out.println("do stuff");
    }
}

class OtherWork implements Runnable {
    public void run() {
        System.out.println(" do other stuff");
    }
} 
```

**编辑**：
建议使用线程池而不是为每个任务创建（和丢弃）线程。这是因为在创建/丢弃线程时有一些开销，而且它也使得管理任务应该在什么并发下完成等变得更容易。

无论如何，您可以使用`Thread`类自己创建线程池，但这需要大量工作，而且很难做到正确。相反，最好使用 JDK 中可用的现成解决方案。您可以按如下方式使用它：

```
ExecutorService threadPool = Executors.newFixedThreadPool(4);
threadPool.execute(new Work());
threadPool.execute(new OtherWork());

// After submitting all your task (or when your application wants to terminate)
// You should call shutdown() on the thread pool so that the JVM can exit
threadPool.shutdown(); 
```

# browser - 定义相同的 GET 两次

> ID：13671203
> 
> 赞同：0
> 
> 时间：2012-12-02T16:27:10.183
> 
> 标签：browser, cross-browser

在这种情况下，是否有关于浏览器应该做什么的定义协议：

`http://example.com/?id=1&id=2`

我可以安全地假设所有浏览器都将使用相同的参数，还是这不是标准化的？从测试来看，浏览器似乎将采用最后定义的参数 (id=2)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:32:16.393

Web 服务器通常使用*最后一个*参数。在您的情况下，Web 服务器使用第二个`id`.

# javascript - Google Geomap API 更改区域选项 onClick()

> ID：13671204
> 
> 赞同：1
> 
> 时间：2012-12-02T16:27:18.117
> 
> 标签：javascript, google-api, geomap

[这段代码使用Google Geomap API](https://developers.google.com/chart/interactive/docs/gallery/geomap)绘制地图

```
<script type="text/javascript">
    google.setOnLoadCallback(drawMap);
    function drawMap() {
        var data = new google.visualization.DataTable();
        data.addColumn('string','iso'); //e.g.: mx
        data.addColumn('number','population'); //e.g.: 114
        data.addRows([["mx",114],["ec",14],["ve",28]]);
        var options = {
            region: '005',
            width: '511px',
            height: '280px',
            showLegend: true
        };
        var geomap = new google.visualization.GeoMap(document.getElementById('map'));
        geomap.draw(data,options);
    };
</script> 
```

默认选择的区域是 005（南美洲）。这些是其他可用区域：

*   013 - (中美洲)
*   150 - (欧洲)

如何动态更改已绘制地图的区域？像这样的东西：

```
<a href="javascript:void(null);" onclick="changeRegion(150);">Europe</a> 
```

我知道必须重新绘制地图，但我有点卡在区域属性修改步骤中。任何想法都会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:29:20.390

If you already have the data, I give you a snippet I use in my own app. Easier to understabd rather than long explanations I guess. Hope it helps. In my case, I wanted to display numbers by country in the same region.

```
geomap = new google.visualization.GeoMap(document.getElementById('geo_chart'));

        google.visualization.events.addListener( geomap, 'regionClick', 
            function(e) 
            { 
                var dataLocal = new google.visualization.DataTable();
                var grouped_cities;

                if (e['region'] == "0")
                    return;

                options['colors'] = [0xaacdf8, 0x164177]; //orange colors
                options['dataMode'] = 'markers';
                options['region'] = e['region'];
                options['showZoomOut'] = true;

                if ( previous_region !=  e['region'] )
                {
                    var indexes  = dataFull.getFilteredRows([{column: 0, value: e['region']}]);

                    dataLocal.addRows(indexes.length);
                    dataLocal.addColumn('string', 'City');
                    dataLocal.addColumn('number', 'Views');

                    for ( i=0; i<indexes.length; i++ )
                    {
                        dataLocal.setValue(i, 0, dataFull.getValue(indexes[i], 2));
                        dataLocal.setValue(i, 1, dataFull.getValue(indexes[i], 3));
                    }

                    grouped_cities = google.visualization.data.group( dataLocal, [0],[{'column': 1, 'aggregation': google.visualization.data.sum, 'type': 'number'}]);
                    previous_region =  e['region'];
                }

                geomap.draw(grouped_cities, options);
                delete grouped_cities;
                delete dataLocal;

            }
        ); 
```

# rest - 没有任何表单身份验证的用户和状态详细信息

> ID：13671212
> 
> 赞同：0
> 
> 时间：2012-12-02T16:27:54.850
> 
> 标签：rest, twitter

我有一个类，其中开发人员只输入一个 twitter 用户个人资料 url ( `http://twitter.com/shiplu`) 或一个状态 url ( `https://twitter.com/shiplu/status/273878249271066624`)。然后该类将不得不从中解析`status_id`or `screen_name`。它通过 url 上的正则表达式完成。

现在该工具应该返回一些关于它的元数据。例如，如果 url 是 twitter 个人资料，它还将返回最新的 5 个（公共）状态、关注者、简短的生物等。它可以通过 twitter REST api 轻松完成。但它需要身份验证。而且我不想使用身份验证。它可以很容易地从 twitter 提供的 html 中解析出来。但是 HTML 会随着时间而改变。

理想的解决方案是任何不使用任何身份验证的 Rest API。我不介意个人资料是非公开的还是受保护的。该工具不应读取此类配置文件。只会读取公开可用的资源。

知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:07:43.663

无论您将使用哪种 (REST) API，总有一天您必须向 Twitter 询问您想要的信息。此时，您将需要进行身份验证。因此，如果您想使用 Twitter API，您将无法转义到身份验证。因此，如果您不想进行身份验证，您唯一的解决方案就是解析 HTML。

# node.js - 带有 Passport.js 和 Express.js 的推文的 HTTP GET 请求

> ID：13671213
> 
> 赞同：1
> 
> 时间：2012-12-02T16:27:56.050
> 
> 标签：node.js, twitter, oauth, express, passport-twitter

我是 Express.js、Node.js 和 Passport.js 的新手。我正在尝试开发一个应用程序，用户使用他们的 Twitter 帐户登录，然后他们可以看到他们的提及（其他 Twitter 用户提到登录用户的 Twitter 用户名的推文）。我遇到了 Passport.js，我已经能够成功地使用它，允许用户使用他们的 Twitter 帐户登录。

但是，我不确定如何格式化 Twitter 提及的服务器端 HTTP GET 请求。[我已经在https://dev.twitter.com/docs/api/1/get/statuses/mentions](https://dev.twitter.com/docs/api/1/get/statuses/mentions)多次查看 Twitter API ，但由于我不熟悉 Node/Express/Passport 平台，所以我不确定如何在服务器端执行此请求以返回 JSON 格式的提及。该应用程序设置为只读，因为它只需要能够查看与关联用户相关的推文。

前端基于 EJS。以下是我拥有的可能相关的代码。非常感谢您的帮助。

-joshingmachine

/app.js

```
/**
 * Module dependencies.
 */

var express = require('express')
  , passport = require('passport')
  , http = require('http')
  , util = require('util')
  , path = require('path')
  , TwitterStrategy = require('passport-twitter').Strategy;

var TWITTER_CONSUMER_KEY = "theConsumerKeyForMyApp";
var TWITTER_CONSUMER_SECRET = "theConsumerSecretForMyApp";

var users = [];

// Passport session setup.
passport.serializeUser(function(user, done) {
  done(null, user.id);
});

passport.deserializeUser(function(id, done) {
  var user = users[id];
  done(null, user);
});

// Use the TwitterStrategy within Passport.
passport.use(new TwitterStrategy({
    consumerKey: TWITTER_CONSUMER_KEY,
    consumerSecret: TWITTER_CONSUMER_SECRET,
    callbackURL: "http://127.0.0.1:3000/auth/twitter/callback"
  },
  function(token, tokenSecret, profile, done) {
    //console.log(token);
    //console.log(tokenSecret);
    //console.log(profile);
    // asynchronous verification, for effect...
    process.nextTick(function () {
      var user = users[profile.id] || (users[profile.id] = profile);
      done(null, user);
    });
  }
));

var app = express();

// configure Express
app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'ejs');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser());
  app.use(express.session({ secret:'secret'}));
  app.use(passport.initialize());
  app.use(passport.session());
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
});

app.get('/', function(req, res){
  res.render('index', { user: req.user });
});

app.get('/account', ensureAuthenticated, function(req, res){
  res.render('account', { user: req.user });
});

app.get('/login', function(req, res){
  res.render('login', { user: req.user });
});

// GET /auth/twitter
app.get('/auth/twitter',
  passport.authenticate('twitter'),
  function(req, res){
    // The request will be redirected to Twitter for authentication, so this
    // function will not be called.
  });

// GET /auth/twitter/callback
app.get('/auth/twitter/callback', 
  passport.authenticate('twitter', { failureRedirect: '/login' }),
  function(req, res) {
    res.redirect('/');
  });

app.get('/logout', function(req, res){
  req.logout();
  res.redirect('/');
});

// Create server
http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
});

// Simple route middleware to ensure user is authenticated.
function ensureAuthenticated(req, res, next) {
  if (req.isAuthenticated()) { return next(); }
  res.redirect('/login');
}

app.use(function(req, res, next){
  res.send(404, '404 Not Found');
}); 
```

/routes/index.js

```
/*
 * GET home page.
 */

exports.index = function(req, res){
  res.render('index', { title: 'Express' });
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-29T18:58:40.257

安装模块：

```
npm install oauth 
```

然后使用此代码创建您的 GET 请求（根据需要替换变量）。

```
var oauth = new OAuth.OAuth(
  'https://api.twitter.com/oauth/request_token',
  'https://api.twitter.com/oauth/access_token',
  'your application consumer key',
  'your application secret',
  '1.0A',
  null,
  'HMAC-SHA1'
);
oauth.get(
  'https://api.twitter.com/1.1/trends/place.json?id=23424977',
  'your user toke for this app', //test user token
  'your user secret for this app', //test user secret            
  function (e, data, res){
    if (e) console.error(e);        
    console.log(require('util').inspect(data));
    done();      
  }); 
```

如果您需要更多信息，请在此处参考。祝你好运！ [https://github.com/ciaranj/node-oauth](https://github.com/ciaranj/node-oauth)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T22:37:58.727

我创建了类似于您正在尝试做的事情。由于您已成功登录，我假设您能够获取访问令牌和密码。[一旦你有了这些，就可以使用像mtwitter](https://github.com/passcod/mtwitter)这样的外部库。我这样打了电话（编辑了我从数据库中获取令牌的部分）：

```
app.get('/twitter/userMentions', function (req, res) {
    var twit = new mtwitter({
        consumer_key: consumerKey,
        consumer_secret: consumerSecret,
        access_token_key: token,
        access_token_secret: secret
    });

    twit.get("/statuses/mentions_timeline", { "include_entities": false },
        function (err, data) {
            if (err) {
                res.write(err.toString());
            }
            else res.write(JSON.stringify(data));

            res.end('\n');
        });
     } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-08T10:28:40.600

我认为您正在寻找**请求**节点模块！

[https://npmjs.org/package/request](https://npmjs.org/package/request)

# c# - 当我从 DTO 构建 EF 对象时，如何将 EF 对象层次结构保存到 db？

> ID：13671215
> 
> 赞同：0
> 
> 时间：2012-12-02T16:28:01.213
> 
> 标签：c#, asp.net, entity-framework, asp.net-mvc-4

我创建了一个使用实体框架进行数据库访问的编辑器。编辑器是一个通过 JavaScript 工作的客户端编辑器。当用户单击保存按钮时，JavaScript 调用我的 ASP.NET MVC 方法，并将数据作为 JSON 字符串。数据是一个包含节点列表的对象。我在 EF 中使用继承来允许节点具有不同的类型。从浏览器发送的 JSON 由 MVC 自动转换为 DTO 对象。然后我基于 DTO 对象创建 EF 对象。我的问题是如何保存对所有对象的修改？

现在我执行以下操作：

```
// Convert my DTO object to a EF db object
Document dbDoc = dtoDoc.ToEFDocument();

using (MyEntities db = new MyEntities())
{
    db.ApplyCurrentValues("Documents", doc);
    db.SaveChanges();
} 
```

这有效，但它只更新文档对象中的属性（而不是在节点集合中所做的更改）。

有一个简单的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:57:13.337

您的 DTO 还必须跟踪有关用户所做更改的信息。您必须跟踪：

*   更新了哪些实体
*   删除了哪些实体
*   添加了哪些实体
*   添加了哪些独立关联（多对多或一对多没有映射的 FK）
*   删除了哪些独立关联

在服务器上获得此信息后，您必须使用它来正确设置要保存到数据库的每个实体的状态。在 EF 中没有自动执行此操作的机制，并且`ApplyCurrentValues`仅适用于单个实体（不适用于整个实体图）。

在没有更改信息的情况下执行此操作通常需要从数据库加载所有已修改的数据并从 DTO 更新它们，而不是从 DTO 创建断开连接的实体。

# php - 重定向器或匿名克隆

> ID：13671222
> 
> 赞同：1
> 
> 时间：2012-12-02T16:29:00.327
> 
> 标签：php, redirect, referrer

我需要根据过去的任何内容进行动态重定向？在网址中。

举个例子。如果我发送如下链接：

[http://go.com?http://link1.com](http://go.com?http://link1.com)

go.com 加载一个页面，该页面有 15 秒的加载页面。这个页面上会有一些 html。如果此人什么都不做，它只会在 15 秒后重定向到 link1.com。

我在问号后添加的任何网址都应该执行此操作

[http://go.com?http://link2.com](http://go.com?http://link2.com) http://go.com?http://link5.com 等

这是我找到的代码，但它不起作用。

```
<?php
$delay = "15"; # how many seconds expire before automatic redirect
$site = $_GET['url']; ?>
<html>
<head>
<meta http-equiv="refresh" content="<?php echo $delay; ?>;url=http://<?php echo $site; ?>">
</head>
<body>
  redirecting you to <?php echo $site; ?> in <?php echo $delay; ?> seconds ...</p>
</body>
</html> 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:40:22.610

您应该使用 urlencode 和 urldecode 函数来避免目标 url 中特殊字符的任何问题。您可以参考这个问题：[如何在链接变量中使用超链接？](https://stackoverflow.com/questions/13663393/how-do-i-use-a-hyperlink-in-link-variable/13663446#13663446)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:32:35.033

将您的 URL 格式化为`http://go.com/?url=http://link1.com`或用于`$_SERVER['QUERY_STRING']`访问它。

考虑 URL 编码您要重定向到的 URL；否则，部分目标 URL 可能会被浏览器误解为 go.com URL 的一部分，最终会出现奇怪的错误和损坏的重定向。看看[`urlencode()`](http://php.net/manual/en/function.urlencode.php)和[`urldecode()`](http://php.net/manual/en/function.urldecode.php)：

**创建链接时，用户单击以进入重定向页面**

```
<a href="http://go.com?<?=urlencode("http://link1.com/?a=b&c=d#e")?>">Go to Link1!</a> 
```

这会将示例目标 URL`http://link1.com/?a=b&c=d#e`转换为`http%3A%2F%2Flink1.com%2F%3Fa%3Db%26c%3Dd%23e`，因此任何 : / ? URL中的 & # 字符`link1.com`不会影响`go.com`页面的行为。

**获取重定向页面上的链接时**

```
$site = urldecode($_SERVER['QUERY_STRING']); 
```

这使用我建议`$_SERVER['QUERY_STRING']`的获取目标 URL 而不是`$_GET['url']`, 包裹 in`urldecode()`以撤消我们在上一步中所做的操作，以便将生成的 garglemesh`urlencode()`转换回我们可以在`meta`标签中使用的正常外观 URL。

此外，根据此代码，您`http://`的重定向器页面 URL 和重定向`meta`标记中似乎都有 ，导致尝试重定向到`http://http://link1.com`. `http://`从元标记中删除。

此外，如果您确实坚持要重定向页面（这很烦人），请为我们这些没有 15 秒等待时间的人添加一个“单击此处立即重定向”链接到页面.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T16:48:06.767

**工作代码**

```
<?php
$delay = 5; # how many seconds expire before automatic redirect
$delayMili = $delay * 1000; //converting it to miliseconds
$site = $_GET['url'];
?>
<html>
    <head>
        <script type='text/JavaScript'>
            setTimeout('window.location="<?php echo $site; ?>"',<?php echo $delayMili;?>)
        </script>
    </head>
    <body>
        redirecting you to <?php echo $site; ?> in <?php echo $delay; ?> seconds ...</p>
</body>
</html> 
```

# javascript - 网页Ajax加载有一定矛盾的两个案例

> ID：13671223
> 
> 赞同：1
> 
> 时间：2012-12-02T16:29:07.120
> 
> 标签：javascript, jquery, ajax

我正在使用 jquery 中的 Ajax 加载函数来加载 DOM 中的另一个页面。通过使用这个

```
$('.upload').on('click',function(){

 $('.content').load('loo.php');

}); 
```

当我使用这个时，分部内容中的页面会在 3-4 秒间隔后加载。

我想使用该间隔显示进度条，所以我使用了这种方式

```
$('.upload').on('click',function(){

       $.ajax({
           url: 'loo.php',
         beforeSend:function(){

           res.container.append(res.loader); //Showing loader

         },
         success:function(){

            $('.content').load('loo.php');
             res.container.find(res.loader).remove(); //Hiding Loader 

               }

       });

}); 
```

所以现在发生的事情是，加载器出现并显示了几次，然后分页加载，但问题是我再次看到加载器隐藏后页面加载延迟。我创建了加载器来克服时间，但是加载器运行后仍然需要时间。

在 firebug 中，通过分析请求，页面在 loader 之后开始加载，这是我不想要的。任何想法，如何克服这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T16:34:14.937

您正在 AJAX 请求完成之前删除“加载程序”。在 load() 完成后，您应该在回调函数中删除加载程序。也不需要双 AJAX 请求。

```
$('.upload').on('click',function(){
   res.container.append(res.loader); //Showing loader
  $('.content').load('loo.php', function(){
             res.container.find(res.loader).remove(); //Hiding Loader 

    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T16:42:10.280

`load()`并且`ajax()`都执行 ajax 调用，这可能不是你想要做的。试试这个：

```
$('.upload').on('click',function() {
    $.ajax({
        url: 'loo.php',
        beforeSend: function() {
            res.container.append(res.loader); //Showing loader
        },
        success: function(data) {
            // add the content to the DOM instead of loading it again
            $('.content').html(data); 
            res.container.find(res.loader).remove(); //Hiding Loader 
        }
    });
}); 
```

# mysql - How to calculate percentage increase from previous row/day after complex Group By?

> ID：13671230
> 
> 赞同：3
> 
> 时间：2012-12-02T16:29:59.833
> 
> 标签：mysql, group-by

I have a table IntradayPrices1Minute where I store **1 minute** timeframe open, high, low and close prices for stocks:

```
 CREATE TABLE `IntradayPrices1Minute` (
  `ticker` varchar(10) NOT NULL DEFAULT '',
  `datetime` datetime NOT NULL,
  `volume` mediumint(11) unsigned NOT NULL,
  `open` decimal(8,4) unsigned NOT NULL,
  `high` decimal(8,4) unsigned NOT NULL,
  `low` decimal(8,4) unsigned NOT NULL,
  `close` decimal(8,4) unsigned NOT NULL,
  PRIMARY KEY (`datetime`,`ticker`),
  UNIQUE KEY `indxTickerDatetime` (`ticker`,`datetime`) USING BTREE
) 
```

I have successfully build a query where I can calculate the **daily** open, high, low and close prices for those stocks. This is the query:

```
SELECT 
    ticker,
    DATE(datetime) AS 'Date',
    SUBSTRING_INDEX( GROUP_CONCAT(CAST(open AS CHAR) ORDER BY datetime), ',', 1 ) as 'Daily Open',
    max(GREATEST(open, high, low, close)) AS 'Daily High',
    min(LEAST(open, high, low, close)) AS 'Daily Low',
    SUBSTRING_INDEX( GROUP_CONCAT(CAST(close AS CHAR) ORDER BY datetime DESC), ',', 1 ) as 'Daily Close'

FROM 
    IntradayPrices1Minute

GROUP BY
    ticker, date(datetime) 
```

and this is part of the results that this query successfully returns:

```
ticker  Date        Open    High    Low     Close
----    ----------  ------  ------  ------  ------ 
AAAE    2012-11-26  0.0100  0.0100  0.0100  0.0100
AAAE    2012-11-27  0.0130  0.0140  0.0083  0.0140
AAAE    2012-11-28  0.0140  0.0175  0.0140  0.0165
AAAE    2012-11-29  0.0175  0.0175  0.0137  0.0137
AAMRQ   2012-11-26  0.4411  0.5300  0.4411  0.5290
AAMRQ   2012-11-27  0.5100  0.5110  0.4610  0.4950
AAMRQ   2012-11-28  0.4820  0.4900  0.4300  0.4640
AAMRQ   2012-11-29  0.4505  0.4590  0.4411  0.4590
AAMRQ   2012-11-30  0.4500  0.4570  0.4455  0.4568 
```

Now the problem is: I want to return a seventh column in the query that calculates for each day the percentage increase/decrease between its close price and the previous day close price.

I have seen similar questions asked on StackOverflow but for situations in which the daily prices are already in a table. I think it is specially complex in my case because the daily prices are obtained at query time after several grouping calculations.

Any help on this would be greatly appreciated. Many Thanks. Boga

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T17:05:59.957

Please take a look at this reference: [SQLFIDDLE](http://www.sqlfiddle.com/#!2/ff809/9)

So your current table with OHLC is used to derive the px_change, px_pct :) Results have been `rounded` to show 4 decimal points in change as well as percentage. **Null is used to show no price change/pct as null is a better representation of no price change than having a zero price change ;)**

Query:

```
select ticker, date_format(date,'%m-%d-%Y') as date, open, high,low,close,
pxchange,concat(round(pxpct*100,4),'%') pxpct
from (select case when ticker <> @pxticker 
        then @pxclose := null end, p.*, (close-@pxclose) as pxchange,
    (close-@pxclose)/@pxclose as pxpct, (@pxclose := close),
    (@pxticker := ticker) from pricing p
cross join
    (select @pxclose := null, @pxticker := ticker
     from pricing 
     order by ticker, date limit 1)  as a
  order by ticker, date ) as b
order by ticker, date asc 
```

Resutls:

```
TICKER  DATE        OPEN    HIGH    LOW     CLOSE   PXCHANGE  PXPCT
AAAE    11-26-2012  0.01    0.01    0.01    0.01    (null)    (null)
AAAE    11-27-2012  0.013   0.014   0.0083  0.014   0.004     40.0000%
AAAE    11-28-2012  0.014   0.0175  0.014   0.0165  0.0025    17.8571%
AAAE    11-29-2012  0.0175  0.0175  0.0137  0.0137  -0.0028   -16.9697%
AAMRQ   11-26-2012  0.4411  0.53    0.4411  0.529   (null)    (null)
AAMRQ   11-27-2012  0.51    0.511   0.461   0.495   -0.034    -6.4272%
AAMRQ   11-28-2012  0.482   0.49    0.43    0.464   -0.031    -6.2626%
AAMRQ   11-29-2012  0.4505  0.459   0.4411  0.459   -0.005    -1.0776%
AAMRQ   11-30-2012  0.45    0.457   0.4455  0.4568  -0.0022   -0.4793% 
```

** UPDATED WITH A PICTURE TO SHOW THE PARENTHESIS AS PER OP'S REQUEST IN COMMENTS ** :)

![enter image description here](../Images/f90814a139eb39f5cde008be774fdb48.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T17:24:52.020

`high` should already contain the greatest and `low` should already contain the least value.

First, I'd rewrite your select and create it as a view as

```
create view daily_prices as
SELECT 
    ticker,
    DATE(datetime) AS 'Date',
    SUBSTRING_INDEX( GROUP_CONCAT(CAST(open AS CHAR) ORDER BY datetime), ',', 1 ) as 'Daily Open',
    max(high) AS 'Daily High',
    min(low) AS 'Daily Low',
    SUBSTRING_INDEX( GROUP_CONCAT(CAST(close AS CHAR) ORDER BY datetime DESC), ',', 1 ) as 'Daily Close'
FROM 
    IntradayPrices1Minute
GROUP BY
    ticker, date(datetime) 
```

then you can do a self join

```
select d1.*, d1.`daily close` / d2.`daily close` - 1 as `percent change`
from daily_prices d1
join daily_prices d2 on d1.ticker = d2.ticker and d1.`date` = adddate(d2.`date`, 1) 
```

[SQL Fiddle](http://www.sqlfiddle.com/#!2/f0086/3/0)

# vb.net - 包含来自与绑定数据源不同的数据库中的项目的组合框

> ID：13671233
> 
> 赞同：2
> 
> 时间：2012-12-02T16:30:13.437
> 
> 标签：vb.net, visual-studio-2008, combobox, sql-server-ce

我正在尝试为安装了 sql server compact 的 windows CE 移动设备使用 windows 窗体中的组合框。我正在使用 Visual Studio 2008。
我有两个 sdf 数据库 - MobileArticles.sdf 和 MobileOrders.sdf
MobileArticles.sdf 有一个表 Articles(name, weight,barcode,...) 和一个表 Clients(ClientID)
MobileOrders.sdf 只有一个表 Orders (OrderID, ClientID, name, weight, barcode, amount,...)
MyForm 具有 Orders 表的所有字段的文本框，但 ClienID 是一个组合框。

我无法绑定组合框，以便它显示来自 MobileArticles.sdf->Clients->ClientID 字段的值，同时在 MobileOrders.sdf ->Orders 中插入带有新记录的 ClientId。

我想答案很简单，但我找不到。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:55:25.683

我可能会在 MobileArticles.sdf 中创建 MobileOrders.sdf 中数据的视图

这意味着您只需要连接到单个数据库。

# .htaccess - 如何使 htaccess 规则不影响目录？

> ID：13671234
> 
> 赞同：1
> 
> 时间：2012-12-02T16:30:17.300
> 
> 标签：.htaccess

我有一个名为 min 的文件夹，其中有一个 htacces 用于处理不存在的路径，例如 /min/variable 以返回一些数据。

现在在主文件夹中，我放置了一个 htaccess，其内容如下：

```
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?emit/(.*)$ emit.php?nice=t&f=$1 
```

不幸的是，现在在我调用 domain.com/min/variable 后，我得到了空网站。

如何修复它以使新规则不会阻止旧规则？就像是：

```
if something from /min/ is called don't use the new rule 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-30T17:10:33.683

以你想要的方式做到这一点是不可能的。

只需在您的目录中创建 .htaccess 文件并在那里放置“RewriteEngine off”语句。

但它会关闭你所有的陈述

# jquery - 样式表表现得像 div

> ID：13671239
> 
> 赞同：1
> 
> 时间：2012-12-02T16:31:05.887
> 
> 标签：jquery, html, css, plugins

我有个问题。我已经完成了作业并在网上寻找替代解决方案，但我找不到真正解决我问题的解决方案。我知道人们会问为什么我想让表格表现得像 div，而我只能单独使用 div。

好吧，我的问题是我正在开发一个应用程序，该应用程序具有大量以表格格式格式化的数据。我遇到了一些使表格更加动态的插​​件（数据表，Tquery ...）。这些插件非常好，因为它们在表格中提供排序和搜索选项。但是，我仅限于表格的常见样式，其中一行下一行等等。这会在用户界面中造成不一致，因为 Web 应用程序主要是为触摸屏设计的，并且使用类似卡片（平铺）的界面。

我想要的是使用该插件，以便我仍然可以从它提供的所有功能中受益，但能够像 div 一样设置表格的样式，以便行可以相互浮动。我尝试了不同的风格，它在 Firefox 中可以工作，但在 chrome 和其他浏览器中却不行。提前致谢

任何帮助、建议、建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:50:34.117

我建议您使用另一个不使用表格但使用列表的 jQuery 过滤器/排序插件。最喜欢的是[流沙](http://razorjack.net/quicksand/demos/one-set-clone.html)。

# javascript - Knockoutjs SyntaxError 缺失：在属性 id 之后

> ID：13671241
> 
> 赞同：3
> 
> 时间：2012-12-02T16:31:18.807
> 
> 标签：javascript, knockout.js

我正在尝试使用`attr`绑定来设置属性 ( `data-rating`)，但我收到了错误消息：

> 错误：无法解析绑定。消息：SyntaxError: missing : after property id; 绑定值： attr: { data-rating: UserMovies[0].Rating }

attr 绑定不接受连字符的属性吗？

```
<ul class="content thumbnails" data-bind="foreach: movies, loader: $root.isLoading">
    <li class="movie">
        <div class="image">
            <img data-bind="image: { src: Poster.Detailed, alt: Title }" />
            <div class="actions">
                <!-- ko if: UserMovies.length > 0 -->
                <span class="raty" data-bind="attr: { data-rating: UserMovies[0].Rating }"></span>
                <!-- /ko -->
            </div>
        </div>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T17:07:17.817

你应该用 a 包裹属性名称`quote`，如果 UserMovies 是 observableArray 你应该使用`()`:

```
<span class="raty" data-bind="attr: { 'data-rating': UserMovies()[0].Rating }"></span> 
```

# opengl - 在opengl中的同一网格中索引非连续纹理坐标

> ID：13671242
> 
> 赞同：2
> 
> 时间：2012-12-02T16:31:28.087
> 
> 标签：opengl, graphics

> **可能重复：**
> [渲染具有多个索引的网格](https://stackoverflow.com/questions/11148567/rendering-meshes-with-multiple-indices)

在我的应用程序中，我有很多使用相同的顶点缓冲区渲染的四边形，我通过擦除重复的顶点和使用索引来优化它，就像正常的一样。问题是这些四边形的纹理坐标不是连续的，它们实际上都使用相同的纹理坐标，实际上只是（0.0,0.0，1.0,0.0，1.0,1.0，0.0,1.0）一遍又一遍（真是浪费）。渲染时，第一个四边形没问题，但后面的四边形使用了错误的纹理坐标，因为它们重用了重用顶点中的那些，而与第一个相邻的第二个四边形使用此坐标 (1.0,1.0, 0.0 ,1.0, 1.0,1.0, 0.0,1.0) 而不是前者，这显然不好。

我想要的是这样的：

（两个四边形和纹理坐标）
| 0,0 0,1 | 0,0 0,1 |
| 1,0 1,1 | 1,0 1,1 |

但相反，我得到了这个：

| 0,0 0,1 | 0,1 0,1 |
| 1,0 1,1 | 1,1 1,1 |

这很正常，只是我没有预料到它，因为我在顶点和索引之后做了纹理的东西，而且我更习惯于普通模型..

我想知道是否有一种方法可以有效地做到这一点，因为我开始认为唯一的方法是避免使用索引并重复所有这些顶点或使用实例化（我不想使用）。这些只是两个四边形，但我的应用程序在任何给定时间都有很多四边形，使用索引会在内存使用方面产生巨大差异。另外，我想知道是否有某种方法可以摆脱所有那些重复的纹理坐标并只使用它们一次，而不是 10000 次，因为这看起来很浪费内存。它只是使用相同的缓冲区使用相同的纹理坐标有效地渲染一堆单独的四边形，谢谢！

# django - 具有多个的 Django 表单

> ID：13671251
> 
> 赞同：0
> 
> 时间：2012-12-02T16:32:34.017
> 
> 标签：django, forms

我有一个 ModelForm 类，可以在一个页面上使用一次或多次。例如：

```
class ProductForm(forms.ModelForm):

    class Meta:
        model = Product
        exclude = ('prod_seq_number') 
```

现在，当我想在一个页面上多次使用表单时，例如：

```
prodforms = []
for i in (range(nrofproducts)):
    prodforms.append(ProductForm()) 
```

我现在可以将列表 prodforms 传递给模板，用户可以在页面上输入多个产品。变量 nrofproducts 为：1、2、4、8 或 16

这不起作用，因为我将获得具有相同名称的表单元素。我需要能够区分各种表单元素。因此，我需要一种修改表单属性的方法，例如通过将视图代码中的循环中的索引“i”附加到表单的“名称”属性中。任何帮助，将不胜感激。

制作这样的表单布局的原因是用户可以选择在单个页面上查看 1、2、4、8 或 16 个产品，我希望输入表单类似于他在完成后将看到的布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:36:08.510

你真的不想这样做。更简单的方法是使用 Django [Formset](https://docs.djangoproject.com/en/dev/topics/forms/formsets/)

# xml - 无法使用 Eclipse Juno 创建 XML 文件

> ID：13671254
> 
> 赞同：1
> 
> 时间：2012-12-02T16:32:44.593
> 
> 标签：xml, eclipse

我目前正在使用 Eclipse JUNO 。我找不到使用 Eclipse JUNO 创建 XML 文件的方法。

我已经导航到 File->New->Other >.. 但在它下面找不到 XML 向导。

我需要安装一个单独的插件来创建 XML 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:39:26.950

使用`File -> New File`or`File -> File`并给出整个文件名（指定 .xml 文件扩展名）。

# java - 如何通过runTime.exec()使用涉及“>”的linux命令

> ID：13671256
> 
> 赞同：0
> 
> 时间：2012-12-02T16:32:55.083
> 
> 标签：java, linux, inputstream, ubuntu-12.04

我是 Java 新手。我想使用命令

```
"ps -e > /home/root/workspace/MyProject/ProcessList.txt" 
```

与 runTime.exec();

在网上搜索时，我知道 runTime.exec() 不支持管道或重定向。请让我知道如何使用我的 Java 代码执行此命令。请给出准确答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:35:30.050

管道和重定向是 shell 提供的功能。简单（且肮脏）的解决方案是在 shell 中生成命令：`"/bin/sh -c 'ps -e > /home/root/workspace/MyProject/ProcessList.txt'"`.

编辑：我忘记了默认值`StringTokenizer`不适用于带引号的字符串。以字符串数组的形式提供参数。

```
String[] args = {
    "/bin/sh",
    "-c",
    "ps -e > /home/root/workspace/MyProject/ProcessList.txt"
};
java.lang.Runtime.getRuntime(args); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:36:55.097

你可以看看这个问题：[Java 中的输入和输出流管道](https://stackoverflow.com/questions/364936/input-and-output-stream-pipe-in-java)

否则，如果您知道自己在支持 bourne shell ( `sh`) 的平台上，则可以将其添加到命令中以在该 shell 中运行原始命令：

`"sh -c 'ps -e > /home/root/workspace/MyProject/ProcessList.txt'"`

# mime-types - C# (.cs) 文件是否有 MIME 类型？

> ID：13671257
> 
> 赞同：4
> 
> 时间：2012-12-02T16:33:08.773
> 
> 标签：mime-types

标准 UNIX 工具（文件命令）返回`text/x-c++`. 这不是可能的最大结果。

在 Windows 上， [urlmon.dll/FindMimeFromData](http://msdn.microsoft.com/en-us/library/ms775107%28v=vs.85%29.aspx)返回`text/plain`. 看起来 Windows 从来没有像样的文件类型识别库。

还有比 更精确的`text/plain`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-09-19T13:04:17.383

我在 Ubuntu 20.04 上寻找同样的东西——在代码中打开 .CS 文件，在默认编辑器中打开其他文本文件。

我从 /usr/share/applications/defaults.list 复制了该行

```
text/plain=org.gnome.gedit.desktop 
```

并像这样添加了 .cs 扩展名

```
text/plain.cs=code 
```

现在我的 CS 文件在 VS Code 中打开，所有其他纯文本文件在默认编辑器中打开

# jquery - 在asp.net中使用jQuery时如何防止页面刷新

> ID：13671258
> 
> 赞同：0
> 
> 时间：2012-12-02T16:33:24.647
> 
> 标签：jquery, asp.net

我正在尝试在我的 asp 项目中实现一些 jQuery，每次触发函数时都会导致页面刷新回其初始状态。我可以在一瞬间看到 jQuery 触发的结果，然后页面正在刷新，所以我知道 jQuery 没问题。

有没有办法可以阻止这种情况。我试过四处搜索，但注意到这确实解释了如何做到这一点，而且我对 asp .net 的世界非常陌生。

我在想我需要以某种方式使用 .preventDefault() 但没有设法将任何东西串在一起。

她的我的代码基本上是将选项的值放入文本框中并在单击选择时显示文本框

```
 <select id="ops">
   <option>Choose Property</option>
   <option value="one">one</option>
   <option value="two">two</option> 
  </select>
 <asp:Button ClientIDMode="Static" ID="select" runat="server" Text="Select"/>

<div id="mydiv">
<asp:TextBox ClientIDMode="Static" Enabled="false" ID="textbox" runat="server" CssClass="textEntry" />
</div>

<script type="text/javascript">
       $(document).ready(function () {
           $('#mydiv').hide();
           $('#ops').click(getOps);
       });

       function getOps() {
           var choice = $(this).val();
           $('#select').click(function () {
               $('#mydiv').show();
               $('#textbox').val(choice);
           });
       }

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T16:36:47.790

采用`event.prevenDefault();`

```
<script type="text/javascript">
       $(document).ready(function () {
           $('#mydiv').hide();
           $('#ops').click(getOps);
       });

       function getOps() {
           var choice = $(this).val();
           $('#select').click(function (event) {
                event.preventDefault(); // stops form sumission
               $('#mydiv').show();
               $('#textbox').val(choice);
           });
       }

</script> 
```

# c# - DefWindowProc 调用在 Windows 8 上不起作用

> ID：13671264
> 
> 赞同：0
> 
> 时间：2012-12-02T16:33:55.390
> 
> 标签：c#, .net, windows, winforms, windows-8

我在从 C# winform 调用 Windows 8 上的 DefWindowsProc 时遇到问题。我有这个表格，我需要它可以从表格内的任何地方拖动。

这是我的代码。

```
[DllImport("user32.dll")]
static extern IntPtr DefWindowProc(IntPtr hWnd, uint uMsg, UIntPtr wParam, IntPtr lParam);
[DllImport("user32.dll")]
static extern bool ReleaseCapture(IntPtr hwnd);

const uint WM_SYSCOMMAND = 0x112;
const uint MOUSE_MOVE = 0xF012;

public void Drag()
{
    DefWindowProc(this.Handle, WM_SYSCOMMAND, (UIntPtr)MOUSE_MOVE, IntPtr.Zero);
}

private void OnMainPanelMouseDown(object sender, MouseEventArgs e)
{
    Control ctrl = sender as Control;
    ReleaseCapture(ctrl.Handle);

    this.Drag(); // put the form into drag mode.
} 
```

DefWindowProc 总是返回 0 但我无法拖动我的窗口。此调用适用于 XP、Vista 和 7，但不适用于 8。我猜这与在 Windows 8 上无法正常运行的 DefWindowProc 的声明有关。

请注意，在 Windows 8 上，我使用 .NET 4.0 框架构建应用程序，而在其他平台上，我使用 2.0 版本构建软件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:57:38.630

我用稍微不同的方法实现了你的功能。

我正在运行 Windows 8 和 Visual Studio 2012。

我在框架的所有版本（版本 2、3、4、4.5）上测试了我的解决方案。

当然，您的主窗体需要捕获 mouse_down() 方法。

```
 private void InitializeComponent()
    {
        this.SuspendLayout();
        // 
        // Form1
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(8F, 16F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.ClientSize = new System.Drawing.Size(282, 253);
        this.Name = "Form1";
        this.Text = "Form1";
        this.Load += new System.EventHandler(this.Form1_Load);
        this.MouseDown += new System.Windows.Forms.MouseEventHandler(this.mouse_down);
        this.ResumeLayout(false);

    } 
```

首先，我定义了一个名为 UnsafeNativeMethods 的类：

```
[SuppressUnmanagedCodeSecurity]
internal static class UnsafeNativeMethods
{
    public const int WM_NCLBUTTONDOWN = 0xA1;
    public const int HT_CAPTION = 0x2;

    [DllImport("User32.dll", EntryPoint = "SendMessage")]
    public static extern int SendMessage(IntPtr hwnd, uint Msg, int wParam, int lParam);

    [DllImport("User32.dll", EntryPoint = "ReleaseCapture")]
    public static extern bool ReleaseCapture();

} 
```

在您希望用鼠标从任何地方移动的表单内：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }
    private void mouse_down(object sender, MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left)
        {
            UnsafeNativeMethods.ReleaseCapture();
            UnsafeNativeMethods.SendMessage(Handle, UnsafeNativeMethods.WM_NCLBUTTONDOWN, UnsafeNativeMethods.HT_CAPTION, 0);
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T19:01:45.017

我重新编写了示例以查看 DefWindowProc() 的行为是否不同。不是。拖动时，表单仍会停靠在边缘。

不过，这里是代码：

```
[SuppressUnmanagedCodeSecurity]
internal static class UnsafeNativeMethods2
{
    [DllImport("User32.dll")]
    public static extern int SendMessage(IntPtr hWnd, int msg, int wParam, ref int lParam);
    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    public static extern IntPtr DefWindowProc(IntPtr hWnd, int msg, IntPtr wParam, IntPtr lParam);

    [DllImport("user32")]
    public static extern int ReleaseCapture(IntPtr hwnd);

    public const int WM_SYSCOMMAND = 0x112;
    public const int MOUSE_MOVE = 0xF012;
} 
```

这是表单内的代码。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }
    private void mouse_down(object sender, MouseEventArgs e)
    {
        Control ctrl = sender as Control;
        UnsafeNativeMethods2.ReleaseCapture(ctrl.Handle);
        this.Drag(); // put the form into drag mode.

    }
    public void Drag()
    {
        UnsafeNativeMethods2.DefWindowProc(this.Handle, UnsafeNativeMethods2.WM_SYSCOMMAND, (IntPtr) UnsafeNativeMethods2.MOUSE_MOVE, IntPtr.Zero);
    }
} 
```

我的 DefWindowProc() 声明与您的稍有不同。

归根结底，这两种方法都实现了相同的结果 - 能够从表单中的任何位置拖动窗口。

# asp.net - 我可以使用 FormView 和 jQuery ajax 来绑定数据吗？

> ID：13671265
> 
> 赞同：-1
> 
> 时间：2012-12-02T16:34:02.437
> 
> 标签：asp.net, jquery, .net-4.5

我想要做的是：
我阻止 FormView 在页面加载时绑定数据，但是当单击按钮时，我将触发事件以使用 ajax 绑定 FormView。
这在 .NET 4.5 中可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:37:36.870

绑定发生在服务器上。FormView 是一个服务器控件。所以不行。

您可以使用 UpdatePanel 来避免整个页面刷新，但许多开发人员对 UpdatePanel 不屑一顾。

您可以使用众多 jQuery 库之一（[jsRender](http://weblogs.asp.net/stevewellens/archive/2011/12/01/goodby-jquery-templates-hello-jsrender.aspx)就是其中之一）来使用 jquery 填充 html 表。

# django - Django：两个网站具有相同的代码库和单独的域，Settings.py，WSGI 文件，但不能做单独的数据库

> ID：13671266
> 
> 赞同：1
> 
> 时间：2012-12-02T16:34:03.363
> 
> 标签：django, apache2, mod-wsgi, multiple-databases, multiple-domains

我认为这可能是 WSGI/Apache 配置问题。

我有一个通过 Apache 和 mod_wsgi 服务的 Django 网站。我正在尝试从相同的代码库但通过不同的域、数据库和 settings.py 运行第二个网站。

我的 WSGI 配置文件似乎正在加载正确的、单独的 settings.py 文件。但是，似乎第二个域正在从原始数据库而不是新数据库加载数据。这仅发生在我的生产环境中，该环境具有 Apache 设置。

我的 settings.py 文件通过一个名为 common.py 的文件加载公共信息，然后加载数据库名称。

IE

设置1.py

```
from common import *
DATABASES['default']['NAME'] = 'database1'
... 
```

设置2.py

```
from common import *
DATABASES['default']['NAME'] = 'database2'
... 
```

这些设置是从它们各自的 WSGI 文件中加载的：

www.domain1.com -> index1.wsgi：

```
import os, sys
sys.path.insert(0,'/location/to/code/')
sys.path.insert(0,'/location/to/code/application')
sys.path.insert(0,'/virtual/env/python2.7/site-packages/')
os.environ['DJANGO_SETTINGS_MODULE'] = 'application.settings1'
os.environ['PYTHON_EGG_CACHE'] = '/location/to/.python-eggs'  

import django.core.handlers.wsgi

application = django.core.handlers.wsgi.WSGIHandler() 
```

www.domain2.com -> index2.wsgi：

```
import os, sys
sys.path.insert(0,'/location/to/code/')
sys.path.insert(0,'/location/to/code/application')
sys.path.insert(0,'/virtual/env/python2.7/site-packages/')
os.environ['DJANGO_SETTINGS_MODULE'] = 'application.settings2'
os.environ['PYTHON_EGG_CACHE'] = '/location/to/.python-eggs'  

import django.core.handlers.wsgi

application = django.core.handlers.wsgi.WSGIHandler() 
```

如您所见，我所做的只是改变设置位置。代码的位置保持不变。我确信这部分工作是基于这样一个事实，即服务器上保存和加载静态文件的位置已根据 settings1.py 和 settings2.py 的属性而改变。但是，即使从 www.domain2.com 调用，调用应用程序的信息也来自 database1。我什至不确定这是怎么可能的，因为该数据库名称仅在 settings1.py 中可用，而在 common.py 中不可用。有人对这个问题有任何见解吗？

**编辑：**

我在 Apache 包含中添加了将域定向到它们各自的 WSGI 文件的内容。请注意，虚拟主机在 localhost 上侦听，因为我让 NGINX 在端口 80 上侦听并将相关请求转发到 Apache。

```
AddHandler wsgi-script .wsgi 

NameVirtualHost 127.0.0.1:80
Listen 127.0.0.1:80

<IfModule mod_wsgi.c>
<VirtualHost 127.0.0.1:80>
    ServerName domain1.com
    ServerAlias www.domain1.com

    ErrorDocument 500 "We are experiencing difficulties.  Please contact webmaster@domain1.com if you feel you are receiving this page in error."

    WSGIScriptAlias / /path/to/index1.wsgi
    Alias /static/ /path/to/static_files/static/
    WSGIDaemonProcess djangodomain1 python-path=/virtual/env/python2.7/site-packages processes=8 threads=4 display-name=%{GROUP}
    WSGIProcessGroup djangodomain1
    WSGIApplicationGroup %{GLOBAL}

    ExpiresActive On
    ExpiresDefault "access plus 10 days"
    ExpiresByType text/css "access plus 1 second"
    ExpiresByType text/js "access plus 1 second"

    ServerAdmin webmaster@domain1.com
    UseCanonicalName Off
    CustomLog /path/to/logs/access_log combined
    CustomLog /path/to/domlogs/domain1.com-bytes_log "%{%s}t %I .\n%{%s}t %O ."

    ErrorLog /path/to/logs/error_log

    ## User group1 # Needed for Cpanel::ApacheConf
    <IfModule mod_suphp.c>
        suPHP_UserGroup group1 group1
    </IfModule>
    <IfModule !mod_disable_suexec.c>
        SuexecUserGroup group1 group1
    </IfModule>

</VirtualHost>

<VirtualHost 127.0.0.1:80>
    ServerName domain2.com
    ServerAlias www.domain2.com

    ErrorDocument 500 "We are experiencing difficulties.  Please contact webmaster@domain1.com if you feel you are receiving this page in error."

    WSGIScriptAlias / /path/to/index2.wsgi
    Alias /static/ /path/to/static/
    WSGIDaemonProcess djangodomain2 python-path=/virtual/env/python2.7/site-packages processes=8 threads=4 display-name=%{GROUP}
    WSGIProcessGroup djangodomain2
    WSGIApplicationGroup %{GLOBAL}

    ExpiresActive On
    ExpiresDefault "access plus 10 days"
    ExpiresByType text/css "access plus 1 second"
    ExpiresByType text/js "access plus 1 second"

    ServerAdmin webmaster@domain1.com
    UseCanonicalName Off
    CustomLog /path/to/logs/domain2/access_log combined
    CustomLog /path/to/domlogs/domain2.com-bytes_log "%{%s}t %I .\n%{%s}t %O ."

    ErrorLog /path/to/logs/domain2/error_log

    ## User group1 # Needed for Cpanel::ApacheConf
    <IfModule mod_suphp.c>
        suPHP_UserGroup group1 group1
    </IfModule>
    <IfModule !mod_disable_suexec.c>
        SuexecUserGroup group1 group1
    </IfModule>

</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-05T09:05:07.910

好的，在研究了您的配置之后，我确信“最有可能”的 apache 与您的虚拟主机不匹配，并且正在路由到第一个。这可以解释为什么它只发生在第二个环境中。

阅读这篇博文的最后一节： [关于将 django](http://blog.dscpl.com.au/search/label/django) **Fallback 设置为默认 VirtualHost 定义的 Gram 的博客。**

--- 剪断 ---

作为发现此类问题并确保请求不会无意中转到错误站点的故障保险，一个好的做法可能是确保 Apache 在读取其配置时遇到的第一个 VirtualHost 实际上是一个不等同的虚拟定义到一个实际的站点。

```
<VirtualHost _default_:*>
   Deny from all
</VirtualHost> 
```

--- 结束剪辑 ---

Gram 列出了该文档中可能出错的其他几件事。但是在仔细研究了你的配置之后。我很确定你的问题是虚拟主机请求被路由到了不正确的配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:37:14.030

我认为[WSGIApplicationGroup](http://code.google.com/p/modwsgi/wiki/ConfigurationDirectives#WSGIApplicationGroup)设置把你搞砸了。我会从两个 VirtualHost 条目中删除它。

# sql - 展示总体维护成本最高的驾驶室

> ID：13671268
> 
> 赞同：0
> 
> 时间：2012-12-02T16:34:10.990
> 
> 标签：sql, oracle, top-n

我不确定如何获得总和的最大值。我以为我可以按降序显示它，然后使用“rownum = 1”，但这不起作用。有什么建议么？这是我的代码。

```
select ca_make,  sum(ma_cost)
from cab join maintain on ca_cabnum = ma_cabnum 
Where rownum =1
group by ca_make
order by sum(ma_cost) desc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:47:31.557

ROWNUM() 在 ORDER BY 之前应用。您需要使用子查询：

```
select * from (
    select ca_make,  sum(ma_cost)
    from cab join maintain on ca_cabnum = ma_cabnum 
    group by ca_make
    order by sum(ma_cost) desc
    )
where rownum = 1 
```

* * *

在 Oracle 中有几种不同的实现 [top-n] 查询的方法。 [通过搜索 [oracle] [top-n] 了解更多信息。](https://stackoverflow.com/questions/tagged/oracle+top-n?sort=votes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:52:32.970

首先，您可能想要使用`LEFT JOIN`. 通过使用`JOIN`，您将排除所有*根本没有*维护的出租车。*（显然，这对于找到最高*成本无关紧要，但在寻找最低成本时会有所不同；它会严重扭曲您尝试从该查询中编译的任何统计信息）。

现在，回答你的问题......试试这个：

```
select * from
  (select ca_make,  sum(ma_cost)
  from cab 
    left join maintain on ca_cabnum = ma_cabnum 
  group by ca_make
  order by sum(ma_cost) desc)
where rownum = 1 
```

[这](http://www.oracle.com/technetwork/issue-archive/2006/06-sep/o56asktom-086197.html)是一个很好的解释`ROWNUM`。您的案例是专门解决的，略低于页面的一半（但如果您要使用该功能，整个页面可能值得一读）。

# java - 静态块初始化

> ID：13671270
> 
> 赞同：4
> 
> 时间：2012-12-02T16:34:18.103
> 
> 标签：java, static, instance

这是一段 Java 代码：

```
static {        
    ture = 9;       
}
static int ture;
{ // instance block 
    System.out.println(":"+ture+":");           
} 
```

它是如何编译的？初始化后已执行变量“ture”的声明。据我所知，静态块和字段已按照它们出现的顺序执行。

现在为什么实例块中的值 9 被打印了 3 次？顺便说一句，该类的实例已经创建了 3 次。那不是家庭作业，我正在学习 Java 以获得认证。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-02T16:35:35.063

关于您的第一个问题，静态块确实按照它们出现的顺序进行处理，但是在静态块之前首先处理声明。声明作为类*准备*的一部分进行处理（[JLS §12.3.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.3.2)），这发生在*初始化*之前（[JLS §12.4.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.2)）。出于学习目的，整个[JLS §12](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html)以及[JLS §8](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html)可能有用，特别是[§8.6](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.6)和[JLS §8.7](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.7)。*（感谢[Ted Hopp](https://stackoverflow.com/users/535871/ted-hopp)并[声名狼藉](https://stackoverflow.com/users/218978/irreputable)地指出这些部分。）*

您引用的代码中没有足够的信息来回答您的第二个问题。（无论如何，在 SO 上最好每个问题问**一个**问题。）但例如：

```
public class Foo {
    static {     
        ture = 9;   
    }

    static int ture;

    {   // instance block   
        System.out.println(":"+ture+":");

    }

    public static final void main(String[] args) {
        new Foo();
    }
} 
```

...只输出`:9:` *一次*，因为只创建了一个实例。`new Foo();`如果您删除该行，它根本不会输出它。如果您看到`:9:`了 3 次，那么您似乎正在使用未显示的代码创建三个实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T16:54:37.597

静态初始化程序按照它们出现的顺序执行，而**声明根本不执行**，这就是它们的名字。这就是为什么您的代码可以毫无问题地编译的原因：类结构是在编译时从声明中组装而成的，而静态块是在运行时执行的，在处理完所有声明之后很久。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T18:43:45.173

正如其他人所说，申报地点通常无关紧要。

但有时它可能会引起混淆：

```
class Z {
    static int i = j + 2;  // what should be the value of j here?
    static int j = 4;
} 
```

所以Java确实对前向引用添加了一些限制：http: [//docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.2.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.2.3)

您的示例是允许的，因为该字段的使用位于作业的左侧。显然语言设计者并不认为这太令人困惑。尽管如此，如果可以的话，我们可能应该始终避免前向引用。

# android - 无法重新启动警报管理器

> ID：13671275
> 
> 赞同：1
> 
> 时间：2012-12-02T16:34:46.047
> 
> 标签：android, alarmmanager, android-alarms

我想制作一个 AlarmManager，它在屏幕被唤醒并解锁并停止时启动，当 . 每次解锁后，应重置计时器。此代码工作正常，但只有一次。我可以取消它然后重新启动它，但是一旦警报管理器倒计时，它就不会再次重新启动。

```
public class OnOffReceiver extends Service {

PendingIntent pendingIntent;
AlarmManager alarmManager;
Intent myIntent = null;
Calendar calendar;

@Override
public IBinder onBind(Intent arg0) {
    return null;
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Log.v("", "Receiver service starts now");

    StartAlarmManager();

    registerReceiver(new BroadcastReceiver() {
        public void onReceive(Context context, Intent intent) {
              Log.v("", intent.getAction());

              pendingIntent = PendingIntent.getService(OnOffReceiver.this, 0, myIntent, 0);
              alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);

              alarmManager.cancel(pendingIntent); 

          }
        }, new IntentFilter(Intent.ACTION_SCREEN_OFF));

    registerReceiver(new BroadcastReceiver() {
          public void onReceive(Context context, Intent intent) {
              Log.v("", intent.getAction());
              StartAlarmManager();
          }
        }, new IntentFilter(Intent.ACTION_USER_PRESENT));

    return START_STICKY;
}

final void StartAlarmManager() {
    try {
        myIntent = new Intent(OnOffReceiver.this, SoundService.class);
        Looper.prepare();
    } catch (Exception e) {
    }
    Log.v("", "Trying to start AlarmManager");
    pendingIntent = PendingIntent.getService(OnOffReceiver.this, 0, myIntent, 0);
    alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
    calendar = Calendar.getInstance();
    calendar.setTimeInMillis(System.currentTimeMillis());
    calendar.add(Calendar.SECOND, 10);
    alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), pendingIntent);               
}

@Override
public void onDestroy() {
    super.onDestroy();
    Log.v("", "Receiver service successfully ended");
}   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T18:07:37.960

You'll want to use the `setRepeating` function that's part of the `AlarmManager` class:

```
AlarmManager mgr=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
Intent i=new Intent(context, OnAlarmReceiver.class);
PendingIntent pi=PendingIntent.getBroadcast(context, 0, i, 0);

mgr.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, SystemClock.elapsedRealtime(),  PERIOD, pi); 
```

where `PERIOD` is the interval between alarm instances. For more information see [this](https://stackoverflow.com/questions/1082437/android-alarmmanager) question.

# qt - 在 qt 和 qml 中显示日语字符串

> ID：13671277
> 
> 赞同：0
> 
> 时间：2012-12-02T16:34:46.443
> 
> 标签：qt, qml, qstring

我有一个包含日语字符串的 QString。但是在调试时它只显示“？？？” 代替字符串。我需要它在 qml 中显示它。我用过 QtextCodec 但对我没用。请提供任何解决方案或建议来解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T01:44:25.383

你试过这个吗？

```
label->setText(QString::fromLocal8Bit("日本語")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:39:27.297

1.  将源文件保存为 UTF-8（或其他可以对您的字符进行编码）编码

2.  设置默认编解码器`QtextCodec`（我已经尝试过，它也可以在没有此设置的情况下工作）。

3.  利用`label->setText(QString::fromWCharArray(L"日本語"));`

# java - ubuntu 12.04中的eclipse默认字体

> ID：13671280
> 
> 赞同：1
> 
> 时间：2012-12-02T16:35:07.293
> 
> 标签：java, eclipse, ubuntu, fonts

我在[askubuntu](https://askubuntu.com/questions/224577/eclipse-default-font-in-ubuntu-12-04)上问过这个问题，认为它可能与*ubuntu*有关，但现在我想起来，它可能与*eclipse*有关，所以我也想在这里问。

我在我的 ubuntu 12.04 系统上使用 eclipse。目前，eclipse 中的默认字体设置为`monospace`（大部分），尽管我的系统等宽字体默认为`ubuntu mono`（从 gnome-tweak-tool 检查）。我在 Eclipse 文档中发现了[这一点](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Ftasks%2Ftasks-20.htm)

> 默认情况下，Workbench 使用操作系统提供的字体和颜色。但是，可以通过多种方式自定义此行为。

我想知道为什么 eclipse 不使用我的系统字体。我可以从首选项中更改字体，但是对于不同的地方有很多不同的字体设置，而且我在我的系统上使用了一些不同的 eclipse，所以很高兴找到可以在全球范围内使用的东西。

# csv - 输出从列表列表创建的 *.csv 文件

> ID：13671289
> 
> 赞同：0
> 
> 时间：2012-12-02T16:36:08.367
> 
> 标签：csv, python-3.x

首先，我只是在学习 Python（这是我的第一语言），所以，虽然我知道有许多网站可以解决这个问题，但我花了一个周末试图让我的头脑围绕实施一个解决方案，却一无所获。所以，我希望这里有人可以帮助我:)

问题很简单：我在 Python 程序中创建了一个列表列表，我需要将它们输出到 *.csv 文件，以便将其导入 Excel 等。

该列表如下所示：

```
[['title1','title2','title3'],['date1','info1','category1'],['date2','info2','category3'],...] 
```

我找到了每个列表中的元素都是整数的解决方案，我无法让它们与字符串一起使用。

对此的任何帮助将不胜感激！

谢谢，

亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:34:03.217

有一个 CSV 模块可以做到这一点：

```
import csv

data = [['title1','title2','title3'],['date1','info1','category1'],['date2','info2','category3']]

with open('stuff.csv', 'wb') as csvfile:
  writer = csv.writer(csvfile)
  for line in data:
    writer.writerow(line) 
```

# php - 将文件内容转换为 JavaScript 数组

> ID：13671290
> 
> 赞同：1
> 
> 时间：2012-12-02T16:36:09.807
> 
> 标签：php, javascript, arrays

所以我知道`file()`将每个新行都返回到一个数组中。

```
$plugins = file("plugins.txt");
foreach($plugins as $plugin) {
    echo $plugin;
 } 
```

哪个返回

```
item1 item2 item3 
```

在一条线上。不过，我知道 PHP 认为它是一个数组，而 JS 不会，如果我将上面的 PHP 脚本转换为一个函数然后执行以下操作：

```
var pluginsList = <?php echo filetoArray(); ?>; 
```

在控制台中返回

```
var pluginsList = item1 item2 item3 
```

虽然我希望：

```
var pluginsList = [item1,item2,item3]; 
```

我如何确保它 reutns 一个数组以便 JS 可以读取？

编辑：所以感谢答案，我终于得到了一个数组。但它返回如下：

```
["item1\r\n","item2\r\n","item3\r\n","item4"] 
```

不过，我希望删除 \r\n 。到目前为止我所拥有的： str_replace 没有做任何事情，它是一样的。

```
 $plugins = file("plugins.txt");
    $plugins = json_encode($plugins);
    $plugins = str_replace("\n\r", "", $plugins);
    echo $plugins; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T16:39:33.313

就这么简单：

```
$plugins = file("plugins.txt");
$plugins = str_replace(array("\r\n", "\r", "\n"), '', $plugins);
$output = json_encode($plugins);
print $output; 
```

# c# - 使用 C 和其他用于 OpenGL 加速的方法（如 geGenList）将 OpenGL 绘制列表转换为顶点数组或 VBO

> ID：13671291
> 
> 赞同：1
> 
> 时间：2012-12-02T16:36:13.800
> 
> 标签：c#, opengl

我正在尝试使用绘制列表转换程序，以使用顶点数组或 VBO。

```
dl = glGenLists(1)
glNewList(dl, GL_COMPILE)
glBindTexture(GL_TEXTURE_2D, texture)
glBegin(GL_QUADS)
glTexCoord2f(0, 0)
glVertex2f(0, 0)
glTexCoord2f(0, 1)
glVertex2f(0, height)
glTexCoord2f(1, 1)
glVertex2f(width, height)
glTexCoord2f(1, 0)
glVertex2f(width, 0)
glEnd()
glEndList() 
```

我发现[这个例子](https://stackoverflow.com/questions/5550114/converting-opengl-draw-lists-to-vertex-arrays-or-vbos) 我无法将它传递给 c#。我需要一个使用它的例子。有更简单的方法吗？我需要这个来增加我的应用程序的 fps，如果您告诉我其他 OpenGL 加速方法，例如 geGenList，我将不胜感激

# objective-c - 错误：地址不包含指向目标文件中某个部分的部分

> ID：13671293
> 
> 赞同：6
> 
> 时间：2012-12-02T16:36:38.403
> 
> 标签：objective-c

嗨，我在论坛上搜索过，但没有找到帮助，所以我发布了新的。这是场景，我在主 rootviewcontroller 中创建了一个 mfmailcomposeviewcontroller，我通过调用 presentviewcontroller 来显示它，但是当它被关闭时，我得到了这个错误：

```
error: address doesn't contain a section that points to a section in a object file 
```

我正在使用的代码如下：

```
-(void) mailButtonTapped
{

if ([MFMailComposeViewController canSendMail]) {

    mailViewController_ = [[MFMailComposeViewController alloc] init];
    mailViewController_.mailComposeDelegate = self;
    [mailViewController_ setSubject:@"Try ..."];
    [mailViewController_ setMessageBody:@"Hey I just tried ..." isHTML:NO];
    NSData *videoData = [NSData dataWithContentsOfURL:movieURL_];
    [mailViewController_ addAttachmentData:videoData mimeType:@"video/quicktime" fileName:@"Video.mov"];
    [self presentViewController:mailViewController_ animated:YES completion:nil];

}

else {

    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Sharing Not Possible" message:@"Configure your mail to send the mail" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
    [alertView show];
    [alertView release];

    }
}

-(void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
{

NSString *title = @"Email";
NSString *msg = nil;

if (result == MFMailComposeResultFailed)
    msg = @"Unable to send, check your email settings";
else if (result == MFMailComposeResultSent)
    msg = @"Email Sent Successfully!";
else if (result == MFMailComposeResultCancelled || result == MFMailComposeResultSaved)
    msg = @"Sending Cancelled";

UIAlertView* alertView = [[UIAlertView alloc] initWithTitle:title message:msg delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
[alertView show];
[alertView release];

[self dismissViewControllerAnimated:YES completion:nil]; 
```

}

解雇后我收到错误：

```
error: address doesn't contain a section that points to a section in a object file 
```

请帮我

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-18T17:35:34.467

我也有这个错误，但有另一种情况。我有一个用@property（赋值，非原子）定义的块属性。

为了解决这个问题，我用@property（复制，非原子）声明了我的块属性。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-21T01:33:15.707

当访问不再存在的对象/指针时会发生此错误。并且还可能导致其他错误访问、0x00000 值访问等错误。

因此，您正在删除/释放指针，然后稍后访问。

通过查看代码，这只是一个没有调试的猜测，您将第二个 AlertView 的委托设置为 self，然后立即关闭视图控制器。

在关闭警报视图或按下按钮后尝试关闭，或者只是将 AlertView 委托设置为 nil。

即使这不完全是错误，主要原因是您在某处释放对象然后尝试调用函数或访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T14:52:05.320

我也有这个问题，但由一个非常愚蠢的错误引起，我`frame`在一个继承自的类上编写了一个属性`UIView`（这是一个`UITableViewCell`但我认为每个继承自的类都会发生这种情况`UIView`）这覆盖了原始`frame`属性并导致了这个错误.

只需更改属性名称即可修复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-23T03:43:39.060

你可以像这样使用它：

```
MFMailComposeViewController *mailViewController_ = [[MFMailComposeViewController alloc] init];
    mailViewController_.mailComposeDelegate = self;
    [mailViewController_ setSubject:@"Try ..."];
    [mailViewController_ setMessageBody:@"Hey I just tried ..." isHTML:NO];
    NSData *videoData = [NSData dataWithContentsOfURL:movieURL_];
    [mailViewController_ addAttachmentData:videoData mimeType:@"video/quicktime" fileName:@"Video.mov"];
    [self presentViewController:mailViewController_ animated:YES completion:nil];
[mailViewController_ release]; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-05T15:48:31.630

完成期望在解雇动画完成时调用一个块。

只需删除“completion：nil”，它应该可以工作！

问候。

# c - C：扫描的双精度数组值为什么会改变？

> ID：13671294
> 
> 赞同：0
> 
> 时间：2012-12-02T16:36:41.330
> 
> 标签：c, arrays, file, double, scanf

我正在从一个文件中扫描一个双精度数组。我可以打印这个数组来检索文件中每一行的正确值。

当我在此过程中尝试将另一个文件扫描到另一个阵列中时，就会出现我的问题。

我有：

```
//
//

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>

int main (int argc, char **argv) {

  double c[13], d[13];
  char filename[20];
  double x1, x2, y1, y2, z1, z2, d1, d2, au, aux, auy;
  double dx, dy, dz, nnid, chk, nn;
  int n, b;
  char *in;
  in=argv[1];
  FILE* infile;
  FILE* inbfile;
  infile = fopen(in, "r");
  inbfile = fopen("copy.bt", "r");

  while (!feof(infile)) {

    fscanf(infile, "%f %f %e %e %e %e %e %e %e %e %e %e %e %f",c,c+1,c+2,c+3,c+4,c+5,c+6,c+7,c+8,c+9,c+10,c+11,c+12,c+13);
    printf("Selected Particle A: %f\n",c[0]);
    n=0;

    while (!feof(infile)) { 
      printf("%f\n",c[0]);
      fscanf(infile, "%f %f %e %e %e %e %e %e %e %e %e %e %e %f",d,d+1,d+2,d+3,d+4,d+5,d+6,d+7,d+8,d+9,d+10,d+11,d+12,d+13);
      printf("%f\n",c[0]);
      printf("Selected Particle B: %f\n",d[0]);

      /**/
      printf("%f = %f ?\n",c[0],d[0]);
      if (c[0]==d[0]) {
        printf("Same Particle SKIP...\n");
      }
      else {  

        dx = (d[4])-(c[4]);
        dy = (d[5])-(c[5]);
        dz = (d[6])-(c[6]);

        printf("dx dy dz %e %e %e\n",d[4],d[5],d[6]);

        /**/
        if (n == 0) {  
          au=pow(((dx*dx*dx)+(dy*dy*dy)+(dz*dz*dz)),(1.0/3.0));
          printf("%f is %e from %f\n",c[0],au,d[0]);
        }
        else { 
          aux=pow(((dx*dx)+(dy*dy)+(dz*dz)),(1.0/3.0));
          printf("%f is %e from %f\n",c[0],aux,d[0]);
          if (aux < au) {
            au = aux;
            nnid = d[0];
          }
        }
        /**/

      }
      n++;
      nn=d[1];
      /**/

    }

    printf("%f Is Particle %f At %e\n", c[1], nnid, au);

  }

  fclose(infile);
  fclose(inbfile);
  return 0;

} 
```

那么为什么值会改变呢？我所做的只是将另一个文件的第一行扫描到一个单独的数组中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T16:50:29.280

您试图将 14 个值读入具有 13 个元素的数组中，从而导致未定义的行为。将数组声明为`float c[14], d[14]`。

当您声明为时`d`，`float d[13]`指向`d+12`数组中的最后一个元素，并且`d+13`超过了数组的末尾，因此不允许读取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T16:53:58.430

添加到 Interjay 的答案：您正在另一个地方调用未定义的行为。您正在尝试`double`使用格式说明符扫描 s `%f`，而正确的格式说明符`double`是`%lf`.

编辑：看来你给我们的代码错误，所以上面的陈述不太正确。（但是，我会保留此作为未来访问者的参考。）

# linux - 我们是否应该在分叉进程终止之前分离共享内存

> ID：13671295
> 
> 赞同：0
> 
> 时间：2012-12-02T16:36:44.160
> 
> 标签：linux, fork, shared-memory, detach

假设我们已经请求共享内存并将其附加到我们程序的主进程。

这个程序创建了几个进程。正如 shmat 手册所说

> 在 fork(2) 之后，子进程继承了附加的共享内存段。

所以我们不必将共享内存附加到子进程。
但是拆下来怎么办？我们也应该在孩子的代码中这样做吗？
或者只是在主进程中分离共享内存并销毁它就足够了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:42:39.720

这真的取决于你在做什么。但是，如果您正在调用[`execve`](http://linux.die.net/man/2/execve "execve(2) - Linux 手册页")或其表亲之一，它将分离共享内存段。

# sql-server - SSAS 计算量度还是动态集？平均使用所有

> ID：13671297
> 
> 赞同：-1
> 
> 时间：2012-12-02T16:36:47.907
> 
> 标签：sql-server, ssas, average

我的事实表包含**稀疏数据**并有 3 列：（用户、电影、**规范化分数**）。例子：

```
  （'u1'，'m3'，0.3）
  （'u1'，'m4'，0.1）
  （'u1'，'m7'，0.6）
  ('u2', 'm1', 0.33)
  （'u2'，'m3'，0.33）
  ('u2', 'm7', 0.33)
  ('u3', 'm2', 0.6)
  （'u3'，'m6'，0.4）
  ...

```

如您所见，每个用户的 sum(normalized_score)=1。

我有两个维度：
- `User_info (user, Cat_Level1, Cat_Level2)`
-`Movie_info (movie, Genre_Level1, Genre_Level2)`

*我想要按平均*得分排名靠前的电影，其中平均值的计算考虑了所选维度中的所有相关用户。

例如，在最低级别，`average('m3')`上面将是`(0.3+0.3)/3`. 请注意，分母是**3**，而不是 2。

基本上，我们选择的任何维度，都有相应的用户数，这成为分母。

想不通怎么弄。请帮忙！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-04T03:23:00.383

[通过在此处](http://social.msdn.microsoft.com/Forums/en-US/sqlanalysisservices/thread/5b1a3d0f-a805-41a7-8d5a-ea3be720af75)的 MSDN 论坛上提问找到了答案。

> 这是 MDX 的棘手点之一。您确实希望分母是使用除当前所选电影之外的所有内容的当前上下文的用户数。您的 [Measures].[Number of Users] 指标是不同的用户数吗？我将假设如此，以使讨论更清晰。如果电影层次结构的当前上下文是 m3，您将得到分母值为 2，如您在初始帖子中所述。要获得所需的三值，您需要覆盖当前电影层次结构上下文，以便平均分数的定义为 [Measures].[Normalized_Score] / ( **[Movie].[Movie].[All]** , [措施].[用户数量])。更改 **[Movie].[Movie].[All]的定义**适合你的立方体，你应该得到正确的分母值

.

# java - java访问网络摄像头和数位板（独立应用程序与小程序）

> ID：13671299
> 
> 赞同：0
> 
> 时间：2012-12-02T16:36:53.143
> 
> 标签：java, applet, javafx-2

我需要用 Java 开发一个访问本地资源的应用程序，主要是一个网络摄像头，可能还有一个 wacom 竹笔数位板。它应该拍摄照片和笔记，然后将它们发布到网络服务器。

我能想到的方法是：

1.  使用小程序

2.  使用通过 JavaFx（或 swing 或类似）创建的某种独立应用程序

你会怎么做？小程序是否被认为是实现这一目标的可行/安全方式？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:40:00.187

我会走独立的应用程序路线。我总是在我的浏览器中关闭 Java，因为我永远不记得哪个特定版本有安全漏洞。

如果您将其构建为桌面应用程序，我认为您以后可以很容易地将其转换为小程序，如果您愿意的话。

# django - 将随机字符串添加到模板上下文的简单方法

> ID：13671301
> 
> 赞同：1
> 
> 时间：2012-12-02T16:36:54.083
> 
> 标签：django, django-templates

我有一个部分模板，每次包含它时都需要一个随机字符串。我需要访问相同的随机字符串而不是每次包含一次，我不确定将包含多少次部分。

我目前正在这样做以将其添加到上下文中

```
@register.tag
def randomgen(parser, token):
    return RandomgenNode()

class RandomgenNode(template.Node):
    def render(self, context):
        context['randomgen_str'] = os.urandom(16).encode('hex')
        return '' 
```

这让我可以`{% randomgen %}`在部分的开头和`{{ randomgen_str }}`我需要字符串的地方做。这不一定是坏事，我只是不知道是否有首选的方法来实现这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:12:50.710

多亏了 garromark，我才能找到最佳解决方案。分配标签正是我想要的。

```
@register.assignment_tag
def randomgen():
    return os.urandom(16).encode('hex') 
```

然后在我的模板中，我可以在我包含的模板中使用以下内容

```
{% randomgen as randomgen_string %} 
```

并在我需要随机字符串的地方使用以下内容

```
{{ randomgen_str }} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:52:03.493

如果您包含的模板被包装到包含标签中，那么您可以在呈现模板之前修改上下文。

例如，假设现在您只是为以下内容做一个简单的模板包含`template.html`：

```
{% include "templates/template.html" %} 
```

这可以包装成一个模板标签，如：

```
@register.inclusion_tag("templates/template.html", takes_context=True)
def render_my_template(context):
    context['randomgen_str'] = os.urandom(16).encode('hex')
    return context 
```

这将使您可以访问原始视图上下文`template.html`并将添加，`randomgen_str`以便您可以像以前一样访问。然后`{% include %}`，您将调用`{% render_my_template %}`.

# php - SoapClient 没有返回它应该返回的结果

> ID：13671304
> 
> 赞同：0
> 
> 时间：2012-12-02T16:37:14.483
> 
> 标签：php, soap, soapui, soap-client

当我用 SoapUI 测试这个 WSDL 时，我得到了真实的结果，它只是增加了数字：

```
$client = new SoapClient("http://localhost:8080/calculator?wsdl");

$result = $client->add(3,3);

print_r($result); 
```

这返回：

```
stdClass Object
(
    [return] => 0
) 
```

**但应该返回 6。**就像在 SoapUI 中一样。

一些调试：

```
print_r($client->__getFunctions());
print_r($client->__getTypes());

Array
(
    [0] => addResponse add(add $parameters)
)
Array
(
    [0] => struct add {
         int arg0;
         int arg1;
    }
    [1] => struct addResponse {
         int return;
    }
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:33:53.140

`addResponse`只需要一个参数，因此您需要将其传递到数组或对象中：

```
$params = array(
    'arg0' => 3,
    'arg1' => 3
);

//OR
//$params = new stdClass;
//$params->arg0 = 3;
//$params->arg1 = 3;

$result = $client->add($params); 
```

# html - 变换属性 CSS3 缩放但粘在底部

> ID：13671312
> 
> 赞同：7
> 
> 时间：2012-12-02T16:38:17.730
> 
> 标签：html, css, animation, transform, scale

有谁知道如何缩放图像但坚持底部？下面是我的代码，我的图像在中间缩放，但我需要它们贴在底部。

```
.animation_scale{
position:absolute;
top:150px;
left:55px;
display:block;
z-index:-10;
bottom : 0;}

.animation_scale img{
animation-name:animation_scale;
animation-duration:1s;
animation-timing-function:ease;
animation-delay:0s;
animation-iteration-count:1;
animation-direction:alternate;
animation-play-state:running;
animation-fill-mode: forwards;

    /* Firefox: */
-moz-animation-name:animation_scale;
-moz-animation-duration:1s;
-moz-animation-timing-function:ease;
-moz-animation-delay:0s;
-moz-animation-iteration-count:1;
-moz-animation-direction:alternate;
-moz-animation-play-state:running;
-moz-animation-fill-mode: forwards;

/* Safari and Chrome: */
-webkit-animation-name:animation_scale;
-webkit-animation-duration:1s;
-webkit-animation-timing-function:ease;
-webkit-animation-delay:0s;
-webkit-animation-iteration-count:1;
-webkit-animation-direction:alternate;
-webkit-animation-play-state:running;
-webkit-animation-fill-mode: forwards;}

@keyframes animation_scale {
0%   {
-webkit-transform:  scale(0.2) translate(0px);
-moz-transform:  scale(0.2) translate(0px);
-o-transform:  scale(0.2) translate(0px);}

100% {
-webkit-transform: scale(1.0) skew(0deg) translateY(-10px);
-moz-transform: scale(1.0) skew(0deg) translateY(-10px);
-o-transform: scale(1.0) skew(0deg) translateY(-10px);}}

@-moz-keyframes animation_scale /* Firefox */
{0%   {
-moz-transform:  scale(0.2) translate(0px);}

100% {
-moz-transform:  scale(1.0) translateY(-10px);}}

@-webkit-keyframes animation_scale{ /* Safari and Chrome */

0%   {
-webkit-transform:  scale(0.2) translate(0px);}

100% {
-webkit-transform:  scale(1.0) translateY(-10px);}} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-02T16:45:44.683

采用`transform-origin` `center bottom`

这是工作[**演示**](http://jsfiddle.net/7CytE/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-02T16:40:57.853

`transform-origin`在应用了 a 的元素上使用属性`transform`。

它定义了转换的“中心”点：

```
-webkit-transform-origin: 50% 100%;
-moz-transform-origin: 50% 100%;
-o-transform-origin: 50% 100%;
transform-origin: 50% 100%; 
```

或者

```
-webkit-transform-origin: center bottom;
-moz-transform-origin: center bottom;
-o-transform-origin: center bottom;
transform-origin: center bottom; 
```

查看更多： [https ://developer.mozilla.org/en-US/docs/Web/CSS/transform-origin](https://developer.mozilla.org/en-US/docs/Web/CSS/transform-origin)

# facebook - 使用 Graph API 和/或 FQL 获取未读页面对话

> ID：13671315
> 
> 赞同：0
> 
> 时间：2012-12-02T16:38:43.660
> 
> 标签：facebook, facebook-graph-api, facebook-fql

如何仅使用 Graph API 或 FQL 获取包含未读消息的页面对话？

我在 FQL 和 Graph API 中没有找到任何表参考 我不知道我是否只能过滤未读消息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-13T15:06:31.540

我是这样做的。

```
SELECT sender, body FROM unified_message 
WHERE thread_id IN 
     (SELECT thread_id FROM unified_thread WHERE folder = 'inbox' AND unread=1) 
 AND unread=1 
ORDER BY timestamp DESC 
```

更多信息：[如何使用 FQL 获取未读消息？](https://stackoverflow.com/questions/25016843/how-to-get-unread-messages-using-fql/25250051#25250051)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T17:44:49.880

从[文档](https://developers.facebook.com/docs/reference/fql/unified_message)中：

该`unread`参数未编入索引，因此无法搜索。您将必须获得所有消息，并自己过滤它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-04T02:28:22.897

这是查看未读对话的 fql：

```
SELECT message_id, author_id, body, created_time, viewer_id, thread_id FROM message WHERE thread_id IN (SELECT thread_id FROM thread WHERE folder_id = 0 and unread != 0) 
```

# git - 在 GIT 中，项目混合新旧版本子组件的最佳方式是什么？

> ID：13671317
> 
> 赞同：4
> 
> 时间：2012-12-02T16:39:05.360
> 
> 标签：git, git-submodules

假设一个项目要使用 Component1 的旧冻结版本（例如修订版 Rev1），但使用所有其他文件的当前（主）版本。Component1 是同一存储库中的目录。

在这种情况下，GIT 的“整个文件集视图”似乎很尴尬。在 CVS 中，可以简单地在 Component1 上放置一个粘性标签以将这些文件冻结在 Rev1 处，甚至在那里分支，而所有其他文件将保留在 master 分支上。

该存储库用于其他需要最新 Component1 的项目，因此我们不能简单地将更新回滚到 Component1。

一种可能性是在 Rev1 创建一个分支，但是必须不断地合并来自 master 的所有其他文件的更新。此外，我必须非常小心这些合并，以免意外地将任何更新合并到 Component1，这在 GIT 中很容易做到，因为默认情况下，合并后提交是自动的。

将 Component1 映射为子模块将提供更多控制，但在这种情况下，所有文件都共享一个公共存储库。

“git checkout <rev> -- Component1”让我选择一个组件的特定版本，但我不能将它提交给 master，或者将一个分支合并到 master 进行这样的修订选择，否则它将暴露给所有其他项目。

任何其他建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T05:28:06.900

您可以创建子树。解释在这里。[http://www.betaful.com/2011/01/i-love-git-subtree/](http://www.betaful.com/2011/01/i-love-git-subtree/)

# android - 如何关闭标签活动组android中的子活动？

> ID：13671323
> 
> 赞同：1
> 
> 时间：2012-12-02T16:39:37.327
> 
> 标签：android, activitygroup, android-tabactivity

我的父类正确打开了一个子活动，但是当我尝试使用 this.finish() 或 getCurrentActivity().finish() 关闭这个子活动时，我得到一个强制关闭错误。我知道使用 getParent().finish() 将关闭父活动，因此，这意味着关闭子活动是可行的。

我搜索并来到getLocalActivityManager()。我相信这是关闭标签组中的子活动的关键。但是如何应用呢？我正在尝试，但没有结果。

这是我关闭子活动的方法。

```
public void onClick(View v) {

    switch(v.getId()){
    case R.id.back:

        final LocalActivityManager manager = getLocalActivityManager();
        manager.getCurrentActivity().finish();

        break;

    }
} 
```

我的日志猫

```
12-02 21:08:15.494: E/AndroidRuntime(27064): FATAL EXCEPTION: main

12-02 21:08:15.494: E/AndroidRuntime(27064): java.lang.NullPointerException
12-02 21:08:15.494: E/AndroidRuntime(27064):    at package.name.tabgroup.TabGroupActivity.finishFromChild(TabGroupActivity.java:49)

12-02 21:08:15.494: E/AndroidRuntime(27064):    at android.app.Activity.finish(Activity.java:3259)

12-02 21:08:15.494: E/AndroidRuntime(27064):    at ..itemlist.OdiamListDetails.onClick(OdiamListDetails.java:78)

12-02 21:08:15.494: E/AndroidRuntime(27064):    at android.view.View.performClick(View.java:2538)

12-02 21:08:15.494: E/AndroidRuntime(27064):    at android.view.View$PerformClick.run(View.java:9152)

12-02 21:08:15.494: E/AndroidRuntime(27064):    at android.os.Handler.handleCallback(Handler.java:587)

12-02 21:08:15.494: E/AndroidRuntime(27064):    at 
android.os.Handler.dispatchMessage(Handler.java:92)

12-02 21:08:15.494: E/AndroidRuntime(27064):    at android.os.Looper.loop(Looper.java:130)

12-02 21:08:15.494: E/AndroidRuntime(27064):    at android.app.ActivityThread.main(ActivityThread.java:3687)

12-02 21:08:15.494: E/AndroidRuntime(27064):    at java.lang.reflect.Method.invokeNative(Native Method)

12-02 21:08:15.494: E/AndroidRuntime(27064):    at java.lang.reflect.Method.invoke(Method.java:507)

12-02 21:08:15.494: E/AndroidRuntime(27064):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)

12-02 21:08:15.494: E/AndroidRuntime(27064):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)

12-02 21:08:15.494: E/AndroidRuntime(27064):    at dalvik.system.NativeStart.main(Native Method) 
```

# java - 在不同的开关中使用单选按钮在android中添加变量

> ID：13671326
> 
> 赞同：1
> 
> 时间：2012-12-02T16:39:46.687
> 
> 标签：java, android, eclipse, radio-button, computation

我试图提出一个评级类型的问题，我想在单选按钮中设置值..但我无法计算选中按钮的总和..这是我的代码..

公共类 MainActivity 扩展 Activity {

```
public RadioButton r0,r1,r2,r3,r4,r5,r6,r7,r8,r9;
public RadioGroup rg1,rg2;
public TextView tv1;
public Button btn1;
public static int a,b,c,d,e,a1,b1,c1,d1,e1,total;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    r0 = (RadioButton)findViewById(R.id.radio0);
    r1 = (RadioButton)findViewById(R.id.radio1);
    r2 = (RadioButton)findViewById(R.id.radio2);
    r3 = (RadioButton)findViewById(R.id.radio3);
    r4 = (RadioButton)findViewById(R.id.radio4);
    r5 = (RadioButton)findViewById(R.id.radio5);
    r6 = (RadioButton)findViewById(R.id.radio6);
    r7 = (RadioButton)findViewById(R.id.radio7);
    r8 = (RadioButton)findViewById(R.id.radio8);
    r9 = (RadioButton)findViewById(R.id.radio9);

    btn1 = (Button)findViewById(R.id.button1);

    tv1 = (TextView)findViewById(R.id.textView7);

    rg1 = (RadioGroup)findViewById(R.id.radioGroup1);
    rg2 = (RadioGroup)findViewById(R.id.radioGroup2);

    btn1.setOnClickListener(new OnClickListener(){
        public void onClick(View v) {

    switch(rg1.getCheckedRadioButtonId()){

    case R.id.radio0:
        if (r0.isChecked()){
            a =1;

        }
            break;
    case R.id.radio1:
        if (r1.isChecked()){
            b = 2;

        }
            break;
    case R.id.radio2:
        if (r2.isChecked()){
            c = 3;

        }
            break;
    case R.id.radio3:
        if (r3.isChecked()){
            d = 4;

        }
            break;
    case R.id.radio4:
        if (r4.isChecked()){
            e = 5;

        }
            break;
    }

    //no. 2
    switch(rg2.getCheckedRadioButtonId()){

    case R.id.radio5:
        if (r5.isChecked()){
            a1=1;

        }
            break;
    case R.id.radio6:
        if (r6.isChecked()){
            b1 = 2;

        }
            break;
    case R.id.radio7:
        if (r7.isChecked()){
            c1 = 3;

        }
            break;
    case R.id.radio8:
        if (r8.isChecked()){
            d1 = 4;

        }
            break;
    case R.id.radio9:
        if (r9.isChecked()){
            e1 = 5;

        }
            break;
    } 
```

//我想得到两个选中的单选按钮并输出结果..请帮助我

```
 total = rg1.getCheckedRadioButtonId() + rg2.getCheckedRadioButtonId();

    tv1.setText("result: "+total);

}

    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:58:24.417

看这个：

```
total = rg1.getCheckedRadioButtonId() + rg2.getCheckedRadioButtonId(); 
```

您正在尝试添加 RadioButtonId，它们是 radio1、radio2 等。

可能有很多方法可以做到这一点，但我想我会创建一个 sum 变量，将所选数字添加到其中。

```
case R.id.radio5:
    if (r5.isChecked()){
        //a1=1;
        sum += 1;
    } 
```

最后

```
tv1.setText("result: "+ sum); 
```

您每次都需要重置总和，这样它就不会一直添加到以前的总和中。

# git - 将 gist 存储库转移到 github

> ID：13671328
> 
> 赞同：63
> 
> 时间：2012-12-02T16:40:19.650
> 
> 标签：git, github, gist

我正在做一个带有 gist 的小项目，由于它正在增长，我想把它放在 github 上。

让我们假设：

*   我的 gist repo 位于：[https ://gist.github.com/1234](https://gist.github.com/1234)
*   我的新（空）回购位于：[https ://github.com/ChrisJamesC/myNewProject](https://github.com/ChrisJamesC/myNewProject)

理想的解决方案是将我的更改推送到 gist 和 github 存储库。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-12-02T16:56:59.687

您可以将 github 存储库作为远程添加到已签出的 gist 存储库。

```
git clone git@gist.github.com:1234.git
git remote add github git@github.com:ChrisJamesC/myNewProject.git 
```

推它来初始化github上的git

```
git push -u github master 
```

> 如果您的 github 存储库不是*很*空（您使用 README、许可证等创建它，您不介意丢失），您将不得不在推送时强制覆盖
> 
> ```
> git push -f -u github master 
> ```
> 
> 如果您不想丢失现有的提交和文件，请参阅[https://stackoverflow.com/a/40408059/117471](https://stackoverflow.com/a/40408059/117471)

这也会改变分支的上游，所以 github 将是默认的。

您现在可以重命名 gist 的遥控器：

```
git remote rename origin gist 
```

每次进行更改（或从 github/gist 拉取更改）时，您可以执行以下操作：

```
git push                 # To github
git push gist master     # To gist 
```

这也会将您的更改推送到要点，而不仅仅是 github 存储库。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2016-05-10T17:14:46.070

Github 现在有一个新功能——从另一个存储库导入。所以步骤大大简化了：

1.  使用[导入功能](https://github.com/new/import)并指定存储库的 URL。
2.  利润！

### 更新：

您不必创建存储库。右上角的**+按钮现在可以选择“**[导入存储库](https://github.com/new/import)”。

[![来自github的截图](../Images/181bd41f8d6776bf537ee82f62fe610f.png)](https://i.stack.imgur.com/1AxBa.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-02T16:51:32.653

将要点（例如）克隆到本地硬盘，然后为（例如）`git clone git://gist.github.com/123.git`设置新的 URL 。推送到新的存储库 ( )。快乐的吉丁！`origin``git remote set-url origin https://github.com/ChrisJamesC/myNewProject``git push origin master`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-28T09:47:15.143

很抱歉提出一个老问题，我无法*发表评论*，但在 gzm0 给出的第二步中，您可能必须使用 --force，即

```
git push -f -u github master 
```

这可能是因为 Github 存储库中有一个 README，但我想其他人也可能遇到这个问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-08T10:13:02.623

您可以在本地克隆要点。

将 github 存储库添加为新的远程。

将本地存储库推送到新的 github 远程。

删除 gist 中的所有文件，但 README.md 文件除外。在此文件中，您可以写下 gist 已移至新存储库的提示

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-03T17:44:26.067

*我对已接受答案的编辑变得冗长，因此我创建了一个单独的答案来保存它。*

如果您的存储库不为空并且您不想丢失现有的提交和文件，**则[接受的答案](https://stackoverflow.com/a/13671484/117471)不适用于您。**您将不得不：

1.  如果你不关心要点的提交历史......
    *   将文件复制过来`git add`，，`git commit`
2.  如果你想保留要点的提交历史......
    *   使用 git`cherry-pick`或`format-patch`超出此答案的范围。请参阅[是否可以从另一个 git 存储库中挑选提交？](https://stackoverflow.com/q/5120038/117471)

# jms - 使用 setProperty 变量作为 XSL 的输入

> ID：13671331
> 
> 赞同：0
> 
> 时间：2012-12-02T16:40:34.410
> 
> 标签：jms, apache-camel

我目前在 Apache Camel 路由中使用 setHeader 变量作为 XSL 文件的输入参数。但是，这不适用于 setProperty 变量。骆驼不支持吗？

谢谢！

更新 -

这是我的路线...

```
<camel:route>
          <camel:from uri="file:/usr/local/jms_support/update"/>
          <camel:convertBodyTo type="String" />
          <camel:multicast>
            <camel:pipeline>
              <camel:bean ref="getPidsForUpdate"/>

                    <camel:setProperty propertyName="work_or_image"><camel:constant>image</camel:constant></camel:setProperty>

                    <camel:setProperty propertyName="pid"><camel:constant>1234</camel:constant></camel:setProperty>
                    <camel:setProperty propertyName="work_pid"><camel:constant>1234</camel:constant></camel:setProperty>
                    <camel:setProperty propertyName="bibid"><camel:constant>1234</camel:constant></camel:setProperty>
            </camel:pipeline>
            <camel:pipeline>
              <camel:to uri="xslt:xsl/test.xsl"/>
              <camel:to uri="file:/usr/local/jms_support/update_test"/>
            </camel:pipeline>
          </camel:multicast>
        </camel:route> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:01:26.340

你用什么骆驼版本？

Xstl 组件将标题和属性设置为参数。您可以在 org.apache.camel.builder.xml 上启用 TRACE 日志记录，并查看正在添加哪些参数。

见XsltBuilder的源代码和底部的configureTransformer方法：[https ://svn.apache.org/repos/asf/camel/trunk/camel-core/src/main/java/org/apache/camel/builder/ xml/XsltBuilder.java](https://svn.apache.org/repos/asf/camel/trunk/camel-core/src/main/java/org/apache/camel/builder/xml/XsltBuilder.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T01:05:35.590

我最终将消息的内容存储在一个变量中，并在更改后将消息设置回该内容，就像这样......

```
<!-- store original content in header variable -->
<camel:setHeader headerName="marc"><camel:simple>${body}</camel:simple></camel:setHeader>
<!-- run some logic, output gets saved as another header variable, message as this point is now that output -->
<camel:bean ref="getPidsForUpdate"/>
<camel:setHeader headerName="pids"><camel:simple>${body}</camel:simple></camel:setHeader> 
```

....根据该输出设置一堆变量，然后

```
<!-- get original message to run some more logic-->
<camel:setBody><camel:simple>${headers.marc}</camel:simple></camel:setBody> 
```

# aptana3 - 代码助理评论风格

> ID：13671332
> 
> 赞同：1
> 
> 时间：2012-12-02T16:40:42.207
> 
> 标签：aptana3

我尝试在 Aptana 中使用代码助手。似乎它不适用于js自写代码，或者我使用它的方式错误。

我正在使用 Aptana Studio 3，构建：3.2.2.201208201020

我像这样评论我的javascript：

```
/**
    Simple utilities like alert/info/error windows etc.
    @constructor
    @param object params - set of key:value properties
 */
function SomeClass(params) 
{   
    /**
    * @var some description
    */
    this.messages = [];

    /**
     * My function
     * 
     * @param string some_param - some description
     */
    this.somefunction = function(some_param)
    {
    //some code
    }
} 
```

现在当我输入**这个。**在**SomeClass**块中显示一个弹出窗口，我可以找到**消息**和**一些功能**，但它说两者都没有描述。

当我在**this.somefunction部分时，我会收到有关诸如****window.location**之类的全局变量的建议，但对此没有帮助**。**也不是**SomeClass**

我在 php 中使用这种评论风格，它就像一个魅力。我究竟做错了什么？这种 JS 评论风格在我之前的 eclipse - helios 中有效。

# objective-c - 使用 IBAction UIViewController 弹出 UIViewController

> ID：13671335
> 
> 赞同：1
> 
> 时间：2012-12-02T16:40:52.583
> 
> 标签：objective-c, uiviewcontroller, ios6, uipopovercontroller

是否可以像在 iPad 中那样弹出`UIViewController`（xib 文件） ？`UIPopOverControl`

我有一个单独的 NIB 文件，它链接到`UIViewController`. 我想弹出该NIB文件以及按下自定义大小（200,200）的按钮。

这可能吗？

我想在 iPhone 上得到这样的东西 - [http://www.freeimagehosting.net/c219p](http://www.freeimagehosting.net/c219p)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T20:57:59.577

您还可以使用这些自定义类之一来显示弹出窗口：

[https://github.com/sonsongithub/PopupView](https://github.com/sonsongithub/PopupView)

[https://github.com/werner77/WEPopover](https://github.com/werner77/WEPopover)

[https://github.com/50pixels/FPPopover](https://github.com/50pixels/FPPopover)

FPPopover 示例：

```
//the view controller you want to present as popover
YourViewController *controller = [[YourViewController alloc] init]; 

//our popover
FPPopoverController *popover = [[FPPopoverController alloc] initWithViewController:controller]; 

//the popover will be presented from the okButton view 
[popover presentPopoverFromView:okButton]; 

//release if you arent using ARC
[controller release]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T17:52:09.273

是的。在需要时延迟加载您的 pOpOver 控制器。将其视图添加为子视图（您可以为添加设置动画）。使其框架大小符合您的需要并添加您已显示为 pOpOver 控制器的背景子视图的图像以及您想要在弹出窗口中的其他控件。

祝你好运

更新：

[好的，我将在我的应用程序Lucid Reality Check](http://itunes.apple.com/app/id402876803)（部署目标 iOS4.3）中向您展示如何执行此操作。

可以使用 UIPopoverController 来呈现另一个控制器视图。ii 首先要做的是确保 ii 始终知道设备的当前方向，因此 ii 可以在旋转时重新定位弹出窗口（也许这在 iOS6 上本身可以工作？）。所以在我的基本控制器中（我想显示一个弹出窗口）我有一个这样的实例变量：

```
 UIInterfaceOrientation toOrientation; 
```

并且：

```
 UIPopoverController *popover;
  UIButton            *popover_from_button;
  BOOL                 representPopover; 
```

**popover**将被所有弹出窗口重用，并且**popover_from_button**将保存启动弹出窗口的按钮。

然后下一个代码进入基本控制器：

```
- (void)popoverWillRotate {
  if ([popover isPopoverVisible]) {
      [self dismissPopover];
      representPopover = YES;
  }
}

- (void)popoverDidRotate {
  if (popover && representPopover) {
      representPopover = NO;
      [self representPopover];
  }
} 
```

每次旋转设备时都必须调用这两个方法，如下所示：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
  //DLOG(@"willRotateTo %i", toInterfaceOrientation);
  toOrientation = toInterfaceOrientation;
      if ([Kriya isPad ]) {
          [self popoverWillRotate];
      }
} 
```

可以看到，首先捕获方向，然后**调用 popoverWillRotate**。这将在方向动画期间隐藏弹出框。旋转后，弹出框必须像这样重新显示：

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation {
        //DLOG(@"didRotateFrom %i", fromInterfaceOrientation);
    //[self layout:toOrientation]; //do some layout if You need 
    if ([Kriya isPad]) {
        [self popoverDidRotate];
    }
}

- (void)layout:(UIInterfaceOrientation)toInterfaceOrientation {
    //one can do view layout here, and call other controllers to do their layout too
} 
```

现在已经解决了方向更改，显示弹出框的代码到达这里：

```
#pragma mark Popovers
- (void)presentPopoverWith:(id)controller fromButton:(UIButton*)button {
    if (popover)
       [popover release];
    if (popover_from_button)
        [popover_from_button release];
    popover_from_button = [button retain];
    popover = [[UIPopoverController alloc] initWithContentViewController:controller];
    [popover setDelegate:self];
    [self representPopover];
}

- (void)representPopover{
    if (popover) {
        UIPopoverArrowDirection arrowDirection = UIPopoverArrowDirectionAny;
        UIViewController *vc = (UIViewController*)[popover contentViewController];
        CGSize contentSize = [vc contentSizeForViewInPopover];

        if (contentSize.width > 0 && contentSize.height > 0) {
            [popover setPopoverContentSize:contentSize animated:NO];
        }
        //DLOG(@"representPopover rect:%@", [Kriya printRect:popover_from_button.frame]);
        [popover presentPopoverFromRect:CGRectOffset(popover_from_button.frame, 0, popover_from_button.frame.size.height + 7.0)  inView:self.view permittedArrowDirections:arrowDirection animated:YES];   
    }
}

- (void)dismissPopover {
    if (popover) {
        [popover dismissPopoverAnimated:YES];
   }
} 
```

最后，如果想要在弹出框被关闭时得到通知，基本控制器必须实现一个委托方法：

```
#pragma mark UIPopoverControllerDelegate
- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController {
    //do something important here like drink some water
} 
```

并且不要忘记在其标头中使基本控制器成为 UIPopoverControllerDelegate 。

这种弹出窗口的用例将如下所示：

```
- (void)takeImage {    
    UIImagePickerController *picker = [[[UIImagePickerController alloc] init] autorelease];
    [picker setDelegate:self];
    [picker setAllowsEditing:NO];
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {
        [picker setSourceType:UIImagePickerControllerSourceTypeCamera];         
        if ([Kriya isPad]) {            
            [self presentPopoverWith:picker fromButton:backgroundImageButton];
        } else {
            //modals on iPhone/iPod
            //DLOG(@"takeImage addSubview picker");
            [self presentModalViewController:picker animated:YES];
        }
    } else {
        //DLOG(@"no camera");
    }
} 
```

这将使用图像选择器作为弹出窗口的内容，但可以使用任何具有有效视图的控制器。所以就这样做：

[self presentPopoverWith:popupsContentController fromButton:tappedButton];

一个不应该有任何缺失的信息，:)，方法`[Kriya isPad]`就是这样：

```
+ (BOOL)isPad {
  #if __IPHONE_OS_VERSION_MAX_ALLOWED >= 30200
    // iPad capable OS
        if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
            //this is an iPad
            return YES;
        }else {
            //this is an iPod/iPhone
            return NO;
        }
  #else
      //can not pissible be iPad
          return NO;
  #endif
  } 
```

请享用！

# c# - WPF 从 ViewModel 打开一个新视图

> ID：13671336
> 
> 赞同：9
> 
> 时间：2012-12-02T16:40:53.360
> 
> 标签：c#, wpf, xaml, mvvm

这是我的第一个`WPF-MVVM`应用程序，这是我的结构：

1.  与我`app.xaml`一起打开应用程序并覆盖`OnStartup`以解析 MainWindow 的一个项目。（由于参考资料，我这样做了）；
2.  我的观点的一个项目；
3.  我的 ViewModel 的一个项目；
4.  我的模型的一个项目。

我有以下问题：我在上面`MainWindowView`，我点击一个按钮来显示另一个视图。我应该怎么做才能从我的另一个视图中打开这个另一个视图，`MainWindowViewModel`而我的`View Project`有引用`ViewModel Project`，而我不能引用`ViewModel Project`的`View Project`？

顺便说一句，我正在`Unity`使用`dependency injection`.

那么，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-02T20:59:44.433

有几种方法。

您可以定义在 ViewModels 项目中定义的对话框/导航/窗口服务接口。您将需要决定 ViewModel 将如何表达他们想要打开的窗口。我通常使用我的一些 ViewModel 实现的 IDialogViewModel 接口，并将 ViewModel 的实例传递给服务，但您可以使用枚举、字符串，任何您想要的，因此您的实现可以映射到将是的真实窗口打开。

例如：

```
public interface IDialogService
{
    bool? ShowDialog(object dialogViewModel); 
} 
```

想要打开新窗口的 ViewModel 将接收该服务的实例并使用它来表达打开窗口的意图。在您的 Views 项目中，您将定义一个实现您的服务接口的类型，以及打开窗口背后的真实逻辑。

按照示例：

```
public class DialogService : IDialogService
{
    private Stack<Window> windowStack = new Stack<Window>();

    public DialogService(Window root)
    {
        this.windowStack.Push(root);
    }

    public bool? ShowDialog(object dialogViewModel)
    {
        Window dialog = MapWindow(dialogViewModel); 
        dialog.DataContext = dialogViewModel;
        dialog.Owner = this.windowStack.Peek();

        this.windowStack.Push(dialog);

        bool? result;

        try
        {
            result = dialog.ShowDialog();
        }
        finally
        {
            this.windowStack.Pop();
        }

        return result;
    }

} 
```

您的主项目将负责在需要它的 ViewModel 中创建和注入对话服务。在示例中，应用程序将创建一个新的对话服务实例，并将 MainWindow 传递给它。

一种类似的方法是使用某种形式的消息传递模式（[link1](http://joyfulwpf.blogspot.com.br/2009/05/mvvm-communication-among-viewmodels.html) [link2](http://www.codeproject.com/Articles/35277/MVVM-Mediator-Pattern)）。此外，如果您想要一些简单的东西，您还可以让您的 ViewModel 在他们想要打开 Windows 时引发事件并让 View 订阅它们。

**编辑**

我在我的应用程序中使用的完整解决方案通常有点复杂，但基本思路就是这样。我有一个基本的 DialogWindow，它需要一个将 IDialogViewModel 接口实现为 DataContext 的 ViewModel。该接口抽象了一些您期望在对话框中实现的功能，例如接受/取消命令以及关闭事件，因此您也可以从 ViewModel 关闭窗口。DialogWindow 基本上包含在 ContentPresenter 中，其中 Content 属性绑定到 DataContext 并在 DataContext 更改（以及其他一些事情）时挂钩 close 事件。

每个“对话框”都包含一个 IDialogViewModel 和一个关联的视图 (UserControl)。为了映射它们，我只需在 App 的资源中声明隐式 DataTemplates。在我展示的代码中，唯一的区别是不会有 MapWindow 方法，窗口实例始终是 DialogWindow。

我使用了一个额外的技巧来重用对话框之间的布局元素。方法是将它们包含在 DialogWindow 中（接受/取消按钮等）。我喜欢保持 DialogWindow 干净（所以我可以使用它来“非对话”对话框）。我使用通用界面元素为 ContentControl 声明了一个模板，当我声明一个 View-ViewModel 映射模板时，我用我的“对话框模板”应用了 ContentControl 来包装 View。然后，您可以根据需要为您的 DialogWindow 拥有尽可能多的“主模板”（例如，像“向导一样”的模板）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T20:59:49.410

## 直截了当的方法

如果我对您的理解正确，则 MainWindowView 在应用程序启动时通过 Unity 解决，这解决了它对 MainWindowViewModel 的依赖关系？

如果这是您正在使用的流程，我建议您继续使用相同的路径，并让 MainWindowView 通过按钮的简单单击处理程序来处理新视图的打开。然后，在这个处理程序中，您可以解析新视图，这将解析该视图的视图模型，然后您也将返回 MVVM 区域以获取新视图。

该解决方案直截了当，并且对于大多数较小的应用程序都可以正常工作。

## 更复杂的应用程序的更重方法

如果您不想要那种视图优先的流程，我建议您引入某种控制器/演示器来协调视图和视图模型。演示者负责决定是否/何时实际打开/关闭视图等。

不过，这是一个相当繁重的抽象，它更适合更复杂的应用程序，因此请确保您实际上从中获得了足够的好处，以证明增加的抽象/复杂性是合理的。

以下是此方法的代码示例：

```
public partial class App
{
    protected override void OnStartup(StartupEventArgs e)
    {
        var container = new UnityContainer();

        container.RegisterType<IMainView, MainWindow>();
        container.RegisterType<ISecondView, SecondWindow>();
        container.RegisterType<IMainPresenter, MainPresenter>();
        container.RegisterType<ISecondPresenter, SecondPresenter>();

        var presenter = container.Resolve<IMainPresenter>();

        presenter.ShowView();
    }
}

public interface IMainPresenter
{
    void ShowView();
    void OpenSecondView();
}

public interface ISecondPresenter
{
    void ShowView();
}

public interface ISecondView
{
    void Show();
    SecondViewModel ViewModel { get; set; }
}

public interface IMainView
{
    void Show();
    MainViewModel ViewModel { get; set; }
}

public class MainPresenter : IMainPresenter
{
    private readonly IMainView _mainView;
    private readonly ISecondPresenter _secondPresenter;

    public MainPresenter(IMainView mainView, ISecondPresenter secondPresenter)
    {
        _mainView = mainView;
        _secondPresenter = secondPresenter;
    }

    public void ShowView()
    {
        // Could be resolved through Unity just as well
        _mainView.ViewModel = new MainViewModel(this);

        _mainView.Show();
    }

    public void OpenSecondView()
    {
        _secondPresenter.ShowView();
    }
}

public class SecondPresenter : ISecondPresenter
{
    private readonly ISecondView _secondView;

    public SecondPresenter(ISecondView secondView)
    {
        _secondView = secondView;
    }

    public void ShowView()
    {
        // Could be resolved through Unity just as well
        _secondView.ViewModel = new SecondViewModel();
        _secondView.Show();
    }
}

public class MainViewModel
{
    public MainViewModel(MainPresenter mainPresenter)
    {
        OpenSecondViewCommand = new DelegateCommand(mainPresenter.OpenSecondView);
    }

    public DelegateCommand OpenSecondViewCommand { get; set; }
}

public class SecondViewModel
{
}

<!-- MainWindow.xaml -->
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Button Command="{Binding OpenSecondViewCommand}" Content="Open second view" />
    </Grid>
</Window>

<!-- SecondWindow.xaml -->
<Window x:Class="WpfApplication1.SecondWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="SecondWindow" Height="350" Width="525">
    <Grid>
        <TextBlock>Second view</TextBlock>
    </Grid>
</Window> 
```

[本文](http://www.wpfsharp.com/2012/07/12/an-actual-in-production-mvvm-architecture/)提供了一个与我之前在生产中使用过的解决方案类似的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T16:59:36.920

要从中打开新窗口`MainWindowView`，您需要将`Frame`组件或整个窗口的引用传递给`MainWindowViewModel`对象（您可以在将命令绑定到转换按钮或其他东西时执行此操作，将它们作为对象传递），您可以导航到新页面，但是，如果有转换时您不需要做任何特别的事情`ViewModel`，您可以使用经典`ButtonClick`事件或 w/e 来`MainWindowView.cs`为您导航，这对于基本转换来说是可以的。

PS 我不确定你为什么对 ViewModels/Views/Models 使用不同的项目。

# ruby-on-rails-3 - 从关联的模型导轨访问属性 3

> ID：13671341
> 
> 赞同：0
> 
> 时间：2012-12-02T16:40:59.723
> 
> 标签：ruby-on-rails-3, model

我想在食谱显示视图上显示每个食谱的成分，成分在一个名为成分的单独模型中，但与食谱模型具有belongs_to关系

因此，例如，当我调用用户名时，我使用

```
@recipe.user.name 
```

这是因为属性在配方模型中，我在配方助手中有一个方法，就像这样

```
 def ingredient_names(ingredients)
  if ingredients
  ingredient_array = ingredients.map {|ing| ing.ingredient_name}
  ingredient_array.join("\n")
  end
  end 
```

所以我想我可以打电话

```
@recipe.ingredient_names 
```

但我得到一个未定义的方法错误..

然后我想我必须传递参数成分名称（列的名称）

```
@recipe.ingredient_names(:ingredient_name) 
```

但仍然得到未定义的方法错误

当我这样做的时候

```
<%= @recipe.ingredients(:ingredient_name) %> 
```

我把它作为输出

```
[#<Ingredient id: 71, ingredient_name: "Ingredient 1", recipe_id: 56, created_at: "2012-11-29 19:29:25", updated_at: "2012-12-02 16:29:58">, #<Ingredient id: 76, ingredient_name: "ingredient 2", recipe_id: 56, created_at: "2012-12-02 16:29:59", updated_at: "2012-12-02 16:29:59">, #<Ingredient id: 77, ingredient_name: "ingredient 3", recipe_id: 56, created_at: "2012-12-02 16:29:59", updated_at: "2012-12-02 16:29:59">] 
```

那么当我拥有belongs_to 和has_many 的关系时，如何调用另一个模型的属性。我猜是一个简单的问题，但无法弄清楚

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:12:29.477

找出解决方案，我需要先访问该方法

```
<%= ingredient_names @recipe.ingredients(:ingredient_name) 
```

# python - Python - 具有不一致参数的数据库查询函数

> ID：13671344
> 
> 赞同：2
> 
> 时间：2012-12-02T16:41:03.953
> 
> 标签：python, sql

所以我有一个包含 10 个字段的数据库（称它们为 a、b、c....j），我需要创建一个函数“find_use()”，它可以根据字段的任意组合查找和修改数据库中的记录作为参数给它（即： find_use(a=="happy", g =="birthday") ）。此外，由于特权，我没有直接生成 SQL 查询，而是使用系统提供的名为“selector()”的 SQL 包装器，它将根据相同的参数定位记录，即：query = selector(a==" happy", g=="birthday")，然后返回匹配记录的列表

所以问题是，因为我不知道 find_use() 将接收哪些参数，所以我不知道如何构造对 selector() 的内部调用。理想情况下，应动态创建对选择器的调用；大意是：

```
def find_use(a='',b='',c='',.....j=''):
   vars = locals()
   for v in vars:
      if v.value() != '':
        q_string += '{0} == {1},'.format(v.key(),v.value())
   query = selector(q_string) 
   ...do something to query... 
```

但是，这不起作用，因为选择器不接受字符串，而是采用与 find_use() 函数相同格式的参数。那么，如何做到这一点。我觉得这实际上很容易，我只是错过了一些明显的东西。任何投入将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:06:09.007

我认为您正在寻找[关键字参数解包](http://www.saltycrane.com/blog/2008/01/how-to-use-args-and-kwargs-in-python/)：

```
def find_use(**kwargs):
   query = selector(**kwargs) 
   ...do something to query... 
```

当以这种方式定义时，`find_use`可以接收任意数量的关键字参数。关键字参数收集在 dict, 中`kwargs`。

例如，

```
def foo(**kwargs):
    print(kwargs)    
foo(a = 'happy', g = 'birthday') 
```

产量

```
{'a': 'happy', 'g': 'birthday'} 
```

而如果

```
def bar(a, g):
    print(a)
    print(g) 
```

然后

```
bar(**{'a': 'happy', 'g': 'birthday'})  # like selector(**kwargs) 
```

产量

```
happy
birthday 
```

# node.js - 无法使用 ExpressJS 与 oauth2orize 提供程序保持永久登录

> ID：13671346
> 
> 赞同：3
> 
> 时间：2012-12-02T16:41:12.570
> 
> 标签：node.js, express, oauth-2.0, passport.js

我正在创建一个应用程序，该应用程序将使用 OAuth2 协议提供身份验证，以使用应用程序的策略为已知客户端提供服务。

我已经尝试使用`oauth2orize`, 和`node-oauth2-provider`模块，并且我一直在同一点：

1.  用户通过客户端登录，*api key*和*api secret*验证通过，用户可以通过我的provider app 成功登录。
2.  在客户端应用程序和用户成功通过身份验证后，将向客户端应用程序发送回一个令牌（用户已登录客户端 - 耶！），但用户立即在应用程序上注销`Provider`。我不知道发生在哪里以及为什么会发生这种情况 - 这是 OAuth2 协议的一个功能吗？

这是正常的吗？如果我使用 Facebook 作为一种策略（想想`passport-facebook`），那么如果我使用 Facebook 登录任何应用程序，当我被重定向回该应用程序时，我仍然会登录到 Facebook -**这**是我希望为客户提供访问我的应用程序的行为.

这两个 Provider 模块都非常擅长完成我正在寻找的 90% 的工作，但在他们的示例[oauth2orize](https://github.com/jaredhanson/oauth2orize/tree/master/examples/express2)和[node-oauth2-provider](https://github.com/ammmir/node-oauth2-provider/tree/master/examples)中都没有提供“持久”登录。我错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T20:13:43.527

嗯，我想我明白了。

我在 上运行客户端和服务器`localhost`，使用不同的端口 - 并且 cookie/会话相互覆盖。

因此，如果客户端 express 应用程序正在运行`http://localhost:3000`并且 oauth 提供程序正在运行`http://localhost:3001`，则登录到 oauth 提供程序并在客户端上创建会话将覆盖提供程序上的会话。

解决方案（暂时）：

```
# /etc/hosts
127.0.0.1 dev.client.com
127.0.0.1 dev.oauth-provider.com 
```

登录到[http://dev.client.com:3000](http://dev.client.com:3000)会将我带到[http://dev.oauth-provider.com:3001](http://dev.oauth-provider.com:3001)并且当用户成功登录并在客户端上创建会话时，提供程序仍处于登录状态.

# python - 如何在不同的 Qt 线程中调用 GUI 元素？

> ID：13671347
> 
> 赞同：2
> 
> 时间：2012-12-02T16:41:26.453
> 
> 标签：python, multithreading, qt, user-interface

> **可能重复：**
> [如何在不同的 Qt 线程中调用 GUI 元素？](https://stackoverflow.com/questions/13664267/how-to-call-gui-elements-in-different-qt-threads)

我有一个应用程序，其中一个线程（不是主线程）需要访问 GUI 的元素（发送单击操作，显示消息框等）。我在 python 和 Qt 中工作，我也知道这是不可能的主线程。有没有办法做到这一点，我的意思是将我想要在线程中执行的操作发送到主线程？我试过了：de

```
f myfunc(q):

            self.emit(QtCore.SIGNAL('trie'))
            try: line = q.get_nowait()
         # or q.get(timeout=.1)
            except Empty: 
                pass #No hacer nada  si la linea de texto es null
            else: # got line
    # ... do something with line

                self.emit(QtCore.SIGNAL('trie')) 

        thread = threading.Thread(target=myfunc, args=(q,))
        thread.start() 
```

并连接：

```
self.connect(self.thread, QtCore.SIGNAL('tri'), self.prueba) 
```

但它不起作用，我认为发件人无法识别：`self.thread` 这是我的错误：

```
Exception AttributeError: "'NoneType' object has no attribute 'GApp'" in <bound method VBoxManager.__del__ of <GNS3.VBoxManager.VBoxManager object at 0xa13e14c> 
```

# hibernate - 无法配置 Jasypt + Hibernate

> ID：13671348
> 
> 赞同：3
> 
> 时间：2012-12-02T16:41:27.820
> 
> 标签：hibernate, exception, encryption, hibernate3, jasypt

我将 Hibernate3 与 MySql DB 一起使用，并尝试添加 Jasypt 库来处理用户密码的加密。

我在**hibernate.cfg.xml**中配置 Jasypt如下：

```
 <property name="connection.provider_class">org.jasypt.hibernate3.connectionprovider.EncryptedPasswordDriverManagerConnectionProvider</property>
    <property name="connection.encryptor_registered_name">strongHibernateStringEncryptor</property>

    <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/medpal?zeroDateTimeBehavior=convertToNull</property> 
    <property name="hibernate.connection.username">xxxx</property> 
    <property name="hibernate.connection.password">xxxx</property> 
```

**在系统加载时，我注册了加密器：**

```
 StandardPBEStringEncryptor strongEncryptor = new StandardPBEStringEncryptor();
    strongEncryptor.setPassword("xxxx");
    strongEncryptor.setAlgorithm("PBEWithMD5AndTripleDES");
    strongEncryptor.setKeyObtentionIterations(2000);
    HibernatePBEEncryptorRegistry registry = HibernatePBEEncryptorRegistry.getInstance();
    registry.registerPBEStringEncryptor("strongHibernateStringEncryptor", strongEncryptor); 
```

在我的**Hibernate User 模型**中，我定义了：

```
@TypeDef(
    name="encryptedString", 
    typeClass=EncryptedStringType.class, 
    parameters= {
        @Parameter(name="encryptorRegisteredName", value="strongHibernateStringEncryptor")
    }
) 
```

并注释了加密所需的**字段：**

```
@Column(nullable = false)
@Type(type="encryptedString")
public String getPassword() {
    return password;
} 
```

当我尝试将用户对象保存到表中时出现以下**异常：**

```
org.jasypt.exceptions.EncryptionOperationNotPossibleException: Encryption raised an exception. A possible cause is you are using strong encryption algorithms and you have not installed the Java Cryptography Extension (JCE) Unlimited Strength
    at org.jasypt.encryption.pbe.StandardPBEByteEncryptor.handleInvalidKeyException(StandardPBEByteEncryptor.java:999)
    at org.jasypt.encryption.pbe.StandardPBEByteEncryptor.encrypt(StandardPBEByteEncryptor.java:868)
    at org.jasypt.encryption.pbe.StandardPBEStringEncryptor.encrypt(StandardPBEStringEncryptor.java:642)
    at org.jasypt.hibernate3.type.AbstractEncryptedAsStringType.nullSafeSet(AbstractEncryptedAsStringType.java:152)
    at org.hibernate.type.CustomType.nullSafeSet(CustomType.java:140)
    at org.hibernate.persister.entity.AbstractEntityPersister.dehydrate(AbstractEntityPersister.java:2184)
    at org.hibernate.persister.entity.AbstractEntityPersister.dehydrate(AbstractEntityPersister.java:2161)
    at org.hibernate.persister.entity.AbstractEntityPersister$4.bindValues(AbstractEntityPersister.java:2339)
    at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:56)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2345)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2852)
    at org.hibernate.action.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:71)
    at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:273)
    at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:320)
    at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:203)
    at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:129)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:210)
    at org.hibernate.event.def.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:56)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:195)
    at org.hibernate.event.def.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:50)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:93)
    at org.hibernate.impl.SessionImpl.fireSave(SessionImpl.java:713)
    at org.hibernate.impl.SessionImpl.save(SessionImpl.java:701)
    at org.hibernate.impl.SessionImpl.save(SessionImpl.java:697)
    at com.medpal.action.Register1Action.execute(Register1Action.java:61)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:452)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:291)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:254)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:263)
    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:133)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:267)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:142)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:166)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:190)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:485)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:244)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:541)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:383)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:288)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

我已确保已安装 Java Cryptography Extension (JCE)（我运行 Java 6，因此它附带了它，但我也尝试将其放在 Oracle 网站上可供下载）

我还确保 DB 20000 字符中的密码列长，以确保有足够的空间来存储加密密码。

有什么我想念的吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:53:43.010

向加密器添加一个提供程序，如下所示，

```
strongEncryptor.setProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider()); 
```

# c++ - C++ 中的矩阵类：解释

> ID：13671349
> 
> 赞同：1
> 
> 时间：2012-12-02T16:41:29.660
> 
> 标签：c++, arrays, pointers, multidimensional-array, matrix

我目前正在浏览一些旧的大学 C++ 代码片段。那时，另一个类中的一个被分配使用双指针和二维数组来做一个矩阵类。幸运的是（或事后看来不幸）我从来没有机会学习这样的东西。我们毕业时我借用了他们的代码以备将来审查。如果有人可以向我解释这个片段中到底发生了什么：

```
 //This is a constructor of a 1x1 matrix
  signal::signal(){
     _nrows = 1;
     _ncols = 1;
     _coef = new double*[_nrows];
     _coef[0] = new double[_ncols];
     _coef[0][0] = 0.0;
  } 
```

只是一个旁注，_coef 是一个双精度类型的**。

据我了解， _nrows 和 _ncols 的值为 1（表示它们的大小）。然后，代码在堆中动态创建一个 double* out，其元素等于 _nrows；问题是，我不知道接下来会发生什么。为什么_ncols对应的数组不是指针？为什么分配_coef[0]？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T16:49:32.057

在内存中，一个二维数组 (n, m) 看起来或多或少像这样

```
_coef -> | _coef[0] -> {1, 2, 3, ..., m}
         | _coef[1] -> {1, 2, 3, ..., m}
         | _coef[2] -> {1, 2, 3, ..., m}
         | ...
         | _coef[n] -> {1, 2, 3, ..., m} 
```

`_coef`指向一个`n`指针数组。这些指针中的每一个都指向一个双精度数组`m`。

因此，在您的情况下`_coef`，它指向一个由 1 个指针组成的数组，而这个指针指向一个由一个 double 组成的数组。

现在回答你的问题

1.  它不是指针，因为在您的第二维中，您最终要存储双精度数，而不是指针。
2.  它被分配给`_coef[0]`，因为它是二维数组的第一行，也是唯一的一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T16:48:18.577

正如您所说，前两行将值分配`1`给`_nrows`和`_ncols`。

`double*`以下行动态分配（指向）的数组`double`。`double*`分配的对象数是`_nrows`（`1`在您的情况下）。将该语法视为类似于定义一个正常的自动数组 ，`double* array[1]`其中元素的数量为`1`。然后`_coef`是指向这些指针中的第一个的`double`指针。我将用图表表示内存表示：

```
_nrows = 1
_ncols = 1
_coef  ---> _coef[0] ---> Currently points nowhere in particular 
```

所以现在你已经在内存`_nrows`中`double*`排队了。`_coef[0]`指第一个`double*`。一个新的动态分配的数组，这次是`double`s，被创建为 size `_ncols`。指向这些`double`s 中的第一个的指针被分配给`_coef[0]`。也就是说，第`double*`一个动态分配数组中的第一个现在指向`double`第二个动态分配数组中的第一个。

```
_nrows = 1
_ncols = 1
_coef  ---> _coef[0] ---> _coef[0][0] 
```

然后`_coef[0][0] = 0.0`将`double`第二个动态分配数组中的第一个设置为`0`. 由于它是*唯一* `double`的，因为您的两个动态分配的数组的大小都是`1`，所以您已将所有 s 初始化`double`为 0。

```
_nrows = 1
_ncols = 1
_coef  ---> _coef[0] ---> _coef[0][0] = 0 
```

# php - 如果值不为空，PHP 验证电子邮件

> ID：13671355
> 
> 赞同：-4
> 
> 时间：2012-12-02T16:41:50.043
> 
> 标签：php, forms, email, if-statement

> **可能重复：**
> [在 php 中验证电子邮件](https://stackoverflow.com/questions/3499192/validate-email-in-php)

如果用户填写了表单字段，如何验证电子邮件（如果字段未修改，则不验证）？

例子：

```
if ($formemail ="" ) /* user DIDN'T enter email/not filled up email field  */   
{
/* do not validate and do not =mail($,$,$,$) */
} 
```

但是如果字段被修改，那么验证它是否正常然后 =mail($,$,$,$)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:46:06.427

您可以使用 HTML5 属性来完成这项工作。

```
<input type="text" class="email" email="email" required /> 
```

required 属性确保该字段具有某些值，并且 email 属性检查该值是否为电子邮件。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:48:42.183

只需这样做：

```
if($formemail != ""){
    //validate and send
} 
```

这里不需要 else 语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T16:49:41.277

试试这个（来自[http://www.linuxjournal.com/article/9585](http://www.linuxjournal.com/article/9585)）：

```
function checkEmail($email) {
  if(preg_match("/^([a-zA-Z0-9])+([a-zA-Z0-9\._-])*@([a-zA-Z0-9_-])+([a-zA-Z0-9\._-]+)+$/", $email)) {
    return true;
  }

  return false;
}

if (!empty($formemail) && checkEmail($formemail)) {
  //Mail it!
} 
```

# python - pygame - 按住按钮

> ID：13671357
> 
> 赞同：1
> 
> 时间：2012-12-02T16:42:22.950
> 
> 标签：python, keyboard, key, pygame

当你按住一个键时，我找到了一个让精灵移动的解决方案。问题是它强制编写丑陋的重复代码。我找到的当前解决方案是：

```
 for event in pygame.event.get():
            if event.type == KEYDOWN:
                keystate = pygame.key.get_pressed()
                while keystate[K_RIGHT]:
                    screen.fill((255,255,255))
                    pygame.event.get()

                    for sprite in sprites:
                        rimage = sprite[1].getimage()

                        if sprite[2] is None:
                            x+=3
                            sprite[1].update(time)
                            screen.blit(rimage, (x,y))
                            if sprite[1].isfinished() == True:
                                sprite[1].reset()
                            last_dir = "right"
                            if x >= screen_width - rimage.get_width():
                                x = screen_width - rimage.get_width()

                    #update player sprite movement
                    #update player sprite animation
                    #update rest of game map

                    keystate = pygame.key.get_pressed()
                    time = pygame.time.get_ticks()

                    pygame.display.update() 
```

问题是 while 键状态块。它必须针对每个方向重复，并且游戏世界需要在每个 while 块中更新。那是需要复制相同代码的五个地方......如果没有按下一个键，则需要四个方向。我可以将它包装在一个函数中，但我想知道是否有更好的方法来处理在 pygame.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T17:50:32.930

pygame中程序的常用方式是使用事件来更新方向，然后在事件之外编写更新位置代码，这样就不需要复制代码。

```
clock = pygame.time.Clock()

direction = (0,0)

while True:    # main loop

   for event in pygame.event.get():

        if event.type == KEYDOWN:
            if event.key == K_RIGHT:
                direction = (3, 0)
            elif event.key == K_LEFT:
                direction = (-3, 0)
            elif event.key == K_UP:
                direction = (0, 3)
            elif event.key == K_DOWN:
                direction = (0, -3)
            else:
                print "Unrecognized key"

        if event.type == KEYUP:
            direction = (0, 0)

    screen.fill((255,255,255))

    for sprite in sprites:
        rimage = sprite[1].getimage()

        if sprite[2] is None:

            # Check if new position is inside the screen
            new_pos = x + direction[0], y + direction[1]
            if new_pos[0] + rimage.get_width() < screen_width:
                x = new_pos[0]
            if new_pos[1] + rimage.get_height() < screen_height:
                y = new_pos[1]

            # Draw the sprite
            sprite[1].update(time)
            screen.blit(rimage, (x,y))
            if sprite[1].isfinished() == True:
                sprite[1].reset()
                last_dir = direction

    #update player sprite movement
    #update player sprite animation
    #update rest of game map

    time = pygame.time.get_ticks()

    pygame.display.update()

    clock.tick(40)  # Keep game running at 40 fps 
```

如果您愿意，您可以使用 keystate 实现相同的效果，在这种情况下，您不需要处理关键事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T18:25:19.163

Pygame 建议或暗示将程序分为 3 个部分：

事件处理、更新和绘制。正如 pmoleri 已经说过的，您只需改变运动的方向。在更新函数中，您应该传入一个 delta 时间参数，以根据传递的时间移动所有精灵。这非常重要，因为其他技术没有考虑处理器的可变速度。DOS 中的游戏就是这样制作的，所以现在我们需要模拟器来人为地减慢处理器的速度。绘制部分只是简单地绘制所有的精灵。

这样你就可以清楚地划分游戏中这三个不同的部分：玩家输入、游戏逻辑（移动、碰撞、动作等）和绘图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-24T18:30:14.787

另外，`pygame.key.get_pressed()`可以使用。

这将返回当前被按住的所有键的列表。

```
keys = pygame.key.get_pressed()

if keys[pygame.K_w]:
  # Move Up
if keys[pygame.K_a]:
  # Move Down
... etc ... 
```

这不需要在事件部分，但可能是玩家更新的地方。

这可以使代码不那么笨重并且（可能）更有效率

-希望我能帮上忙！

# eclipse - Eclipse 中的任何更改都不会更新 JSP 页面

> ID：13671361
> 
> 赞同：0
> 
> 时间：2012-12-02T16:43:36.130
> 
> 标签：eclipse, jakarta-ee, jboss7.x

我是 JBOSS 和 Eclipse 的新手。我安装了 jboss-as-7.1.0.Final 和 eclipse Indigo 版本。当我创建一个新`JSP`页面然后运行它时，当 JBoss 启动并运行时，可以在浏览器中看到该页面。但是当我在 JSP 页面中更改某些内容并将页面复制并粘贴到部署路径中时（对我来说：/home/aash/App/jboss/jboss-as-7.1.0.Final/standalone/deployments/TestingJBoss.war )，看不到更改。即使我从该位置删除 jsp 文件（并清理浏览器），浏览器仍会显示该页面。但是当 JBoss 停止并再次重新启动时，服务器会按预期给出 404 错误。当我再次将相关的 JSP 页面复制到上述位置时，可以看到该页面。
我从 Eclipse IDE 运行并停止 JBoss。任何人都可以让我知道问题所在或我可以找到解决方案的任何来源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-19T04:47:25.683

默认情况下，当您使用 Eclipse 为 JBoss 7 进行开发时，对 Java 类和 JSP 的更改不会自动发布。您必须右键单击“服务器”视图中的 Web 模块并选择“完全发布”才能使更改生效。一段时间后，这可能真的很痛苦。我找到了解决问题的这些步骤。

## 发布 Java 类更改

在 Eclipse 中，双击 Servers 视图中的 JBoss 服务器。在发布下选择资源更改时自动发布。在应用程序重新加载行为下，选择自定义应用程序重新加载行为。输入以下正则表达式模式。

```
\.jar$|\.class$      //this pattern is for trigger of redeployment. 
```

如果重新部署应用程序，您的会话将丢失。所以忽略放置 JSP 或类文件模式

保存更改并重新启动服务器。现在，当您保存 Java 文件时，系统将自动重新启动应用程序以使更改生效。

## 发布 JSP 更改

这需要更多的工作。从本质上讲，JBoss 7.1.1 有一个缺陷，即即使在开发模式下，服务器也不会接收到对 JSP 文件的更改。

首先，我们需要启用 JSP 调试模式。打开服务器的standalone.xml。找到该行：

```
<subsystem xmlns="urn:jboss:domain:web:1.1" ...> 
```

在下面添加这些行：

```
<configuration>
 <jsp-configuration development="true"/>
</configuration> 
```

保存并关闭文件。

`jboss-as-web-7.1.1.Final-RECOMPILE.jar`从[Datafilehost.com](http://www.datafilehost.com/download-2cb9ff04.html)下载固定文件。将文件保存在`jboss-as-7.1.1.Final/modules/org/jboss/as/web/main folder`.

在同一个文件夹中有一个 module.xml 文件。打开它。注释掉错误文件并使用新文件，如下所示。

```
<!--
<resource-root path="jboss-as-web-7.1.1.Final.jar"/>
-->

<resource-root path="jboss-as-web-7.1.1.Final-RECOMPILE.jar"/> 
```

保存并关闭文件。

信息取自[Mobiarch 博客文章](http://mobiarch.wordpress.com/2013/02/22/configure-automatic-publishing-from-eclipse-for-jboss-as-7/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T07:17:14.230

手动替换部署文件夹中的jsp有什么好的理由吗？

无论如何按照这些步骤，你应该很好

1.  将 jsp 替换为正确位置的新 jsp。（确保路径正确）。

您的项目结构是否像在构建期间将 jsps 从某些项目复制到战争网络内容？只要确保您的新 jsp 随处更新。

之后，在 Eclipse 中，右键单击服务器并选择发布。然后尝试访问jsp。

# android - 当用户翻转设备时有没有办法改变布局

> ID：13671363
> 
> 赞同：0
> 
> 时间：2012-12-02T16:43:49.423
> 
> 标签：android

我有代码为纵向和横向设置不同的布局。如果用户翻转设备，是否有办法在活动运行时更改布局？

设置布局的代码

```
void SetView()
{
   int w=getWindowManager().getDefaultDisplay().getWidth();
   int h=getWindowManager().getDefaultDisplay().getHeight();

   if (w>h)
      setContentView(R.layout.mainHor);
   else
      setContentView(R.layout.mainVer);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T16:47:38.277

在 res 中创建两个名为 layout-land 和 layout-port 的新文件夹。将横向布局放在 layout-land 中，将纵向放在 layout-port 中。确保 xml 文件具有**相同**的名称。

此外，正如评论中提到的那样，只要您在布局文件夹中还有一个 Activity 的默认 xml，只制作 layout-land 文件夹就足够了。如果出于任何原因，Android 无法在替代 layout-[orientation] 文件夹中找到所需的布局，它将采用在 layout.xml 中找到的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:48:10.510

`res`在名为`layout`和的文件夹下创建两个文件夹`layout-land`。为纵向和横向放置单独的布局。

然后覆盖`onConfigurationChanged`

```
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
            setContentView(R.layout.homepage_screen);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T16:49:35.057

```
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
                setContentView(R.layout.mainHor);
    } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){
                setContentView(R.layout.mainVer);
    }
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T17:03:23.643

做这个

```
@Override
public void onConfigurationChanged(Configuration configuration) {
    super.onConfigurationChanged(configuration);
    if (configuration.orientation == Configuration.ORIENTATION_LANDSCAPE) {
                setContentView(R.layout.landscape_layout);
    } else if (configuration.orientation == Configuration.ORIENTATION_PORTRAIT){
                setContentView(R.layout.portrait_layout);
    }
  } 
```

# java - MySQL查询“选择前5名”查询

> ID：13671367
> 
> 赞同：0
> 
> 时间：2012-12-02T16:44:34.087
> 
> 标签：java, mysql

我有一个查询，我正在尝试“转换”为 mysql。这是查询：

```
select top 5 * 
from
   (select id, firstName, lastName, sum(fileSize) as TotalBytes, sum(fileSize)/count(b.*)  as Average
    from roster_cs368 a
    join htmp_cs3868 b on b.id =  a.id
)
union
(
    select id, firstName, lastName, sum(fileSize) as TotalBytes, sum(fileSize)/count(b.*) as Average
    from roster_cs368 a
    join atmp_cs3868 b on b.id = a.id
)
order by TotalBytes desc 
```

我希望有人可以向我展示“mysql：这样做的方式。我真的很感激。这是我正在做的 Java 程序的一部分，到目前为止还不太熟悉 sql 查询。

更新：

```
mysql> select * from roster_cs368
-> ;
+--------+-----------+-----------+
| id     | firstName | lastName  |
+--------+-----------+-----------+
| apn7cf | Allen     | Newton    |
| atggg3 | andrew    | goebel    |
| aysfgd | Alfred    | Santos    |
| cdq6c  | chris     | declama   | 
```

其中“id”是主键

```
mysql> select * from htmp_cs368;
+------------+----------+------------+----------+----------+-------+------+-------+----------------------+
| filePerms  | numLinks | id         | idGroup  | fileSize | month | day  | time  | fileName             |
+------------+----------+------------+----------+----------+-------+------+-------+----------------------+
| drwx------ |        2 | schulte    | faculty  |      289 | Nov   |    7 | 2011  | Java                 |
| -rw-r--r-- |        1 | schulte    | faculty  |      136 | Apr   |   29 | 2012  | LD                   |
| drwxr-xr-x |        3 | schulte    | faculty  |      177 | Mar   |   20 | 2012  | Upgrade              | 
```

这里没有主键，最后一张表：

```
mysql> select * from atmp_cs368;
+------------+----------+--------------+----------+----------+-------+------+-------+-----------------------------+
| filePerms  | numLinks | id           | idGroup  | fileSize | month | day  | time  | fileName                    |
+------------+----------+--------------+----------+----------+-------+------+-------+-----------------------------+
| drwxr-xr-x |        2 | remierm      | 203      |      245 | Sep   |   17 | 14:40 | 148360_sun_studio_12        |
| drwx---rwx |       31 | antognolij   | sasl     |     2315 | Oct   |   24 | 12:28 | 275                         |
| -rwx------ |        1 | kyzvdb       | student  |       36 | Sep   |   19 | 13:05 | 275hh                       |
| drwx---rwx |       26 | antognolij   | sasl     |     1683 | Nov   |   12 | 14:00 | 401                         | 
```

这里也没有主键。

我要回答的问题是：

```
produce a list of the five members of roster_cs368
and their ids who use the most space (number of bytes)
in htmp_cs368 and atmp_cs368 in descending order--
greediest first. 
```

希望这些信息有所帮助。请注意，表格中提供了更多信息。这里的只是一个片段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T16:45:22.027

如[`SELECT`语法](http://dev.mysql.com/doc/en/select.html)中所述：

> 该`LIMIT`子句可用于限制`SELECT`语句返回的行数。

所以：

```
(
  SELECT id,
         firstName,
         lastName,
         SUM(fileSize) AS TotalBytes,
         SUM(fileSize)/COUNT(*) AS Average
  FROM   roster_cs368 AS a
    JOIN htmp_cs3868  AS b USING (id)
) UNION (
  SELECT id,
         firstName,
         lastName,
         SUM(fileSize) AS TotalBytes,
         SUM(fileSize)/COUNT(*) AS Average
  FROM   roster_cs368 AS a
    JOIN atmp_cs3868  AS b USING (id)
)
ORDER BY TotalBytes DESC
LIMIT 5 
```

请注意`id`，`firstName`和`lastName`是[隐藏列](http://dev.mysql.com/doc/en/group-by-extensions.html)，其值是不确定的，除非每条记录都相同。

# c# - 在 Foreach c# 中处理任务的结果

> ID：13671368
> 
> 赞同：0
> 
> 时间：2012-12-02T16:44:36.053
> 
> 标签：c#, .net, multithreading

我一直在寻找这个，但我不知道该怎么做。

我在应用程序中有一些威胁（任务）。

```
 foreach (string targetMachine in targetMachines)
    {
        Task<int> task = Task.Run(() => Magic(targetMachine));
    } 
```

我为数组中的每个对象创建了一个任务。任务返回一个值。我想处理这些价值观并根据它们采取行动。例如，如果任务返回 0，则不执行任何操作，如果返回 1，则写入日志，如果返回 2，则运行进程。

我怎样才能完成这个？如果我在 foreach 中处理返回值：

```
foreach (string targetMachine in targetMachines)
    {
        Task<int> task = Task.Run(() => Magic(targetMachine));
        Task.Waitforexit()
        if (task.result == 2)
        {
        do something
        }
    } 
```

我认为，任务不会有用，程序将等待每个任务完成才能继续。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T16:52:01.950

看看 Task.ContinueWith()

[http://msdn.microsoft.com/en-us/library/dd321405.aspx](http://msdn.microsoft.com/en-us/library/dd321405.aspx)

当每个任务完成时，它会将结果传递给 ContinueWith，然后它可以什么都不做，记录或调用你想要的方法。

此外，您可以运行 foreach .AsParallel() 并完全删除任务。

[http://msdn.microsoft.com/en-us/library/dd413602.aspx](http://msdn.microsoft.com/en-us/library/dd413602.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T17:10:00.770

它可以是这样的：

```
foreach (string targetMachine in targetMachines)
{
    Task.Run(() =>
    {
        var result = Magic(targetMachine);
        if (result == 2)
        {
            DoSomething();
        }
    });
} 
```

或（使用[async/await](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)）

```
foreach (string targetMachine in targetMachines)
{
    var result = await Task.Run(() => Magic(targetMachine));
    if (result == 2)
    {
        DoSomething();
    }
} 
```

或（使用[ContinueWith](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.continuewith.aspx)）

```
foreach (string targetMachine in targetMachines)
{
    Task<int>.Run(()=>Magic(targetMachine))
        .ContinueWith(t =>
        {
            if (t.Result == 2)
            {
                DoSomething();
            }
        });
} 
```

如果您想等待完成所有任务

```
Parallel.ForEach(targetMachines, targetMachine =>
{
    var result = Magic(targetMachine);
    if (result == 2)
    {
        DoSomething();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T18:00:37.750

除了 LB 答案中给出的变体之外，我还将添加一个新变体：

```
var tasks = targetMachines.Select(x => Magic(x));
Task.WaitAll(tasks); //fork-join 
```

如果你使用异步，你可以写：

```
var tasks = targetMachines.Select(x => Magic(x));
await Task.WhenAll(tasks); //fork-join 
```

而不是

```
var tasks = targetMachines.Select(x => Magic(x)); 
```

你总是可以写：

```
var tasks = targetMachines.Select(x =>
{
    var result = Magic(x);
    if (result == 2) DoSomething();
}); 
```

这使您不必使用`ContinueWith`.

# validation - 记录集更新成功时的消息框

> ID：13671377
> 
> 赞同：2
> 
> 时间：2012-12-02T16:45:10.237
> 
> 标签：validation, vba, ms-access, ms-access-2007, recordset

在 Access 2007 中，我有一个向表格添加新联系人的表单：

```
RecSet.AddNew
RecSet![Code_Personal] = Me.txtCodePersonal.Value
RecSet![FName] = Me.TxtFName.Value
RecSet![LName] = Me.txtLName.Value
RecSet![Tel Natel] = Me.txtNatTel.Value
RecSet![Tel Home] = Me.txtHomeTel.Value
RecSet![Email] = Me.txtEmail.Value
RecSet.Update 
```

到目前为止，这已经奏效，并且已成功添加联系人。但我有两个问题：

1.  我想显示一个消息框告诉用户联系人已成功添加
2.  如果没有成功添加联系人，因为
    1.  已存在同名联系人
    2.  不同的问题
        然后分别显示一个消息框“联系人已存在”或“发生错误”。

我这样做的想法是：

```
If recSet.Update = true Then
MsgBox "Paolo Bernasconi was successfully added"
Else if RecSet![FName] & RecSet![LName] 'already exist in table
MsgBox "Contact already exists"
Else 
MsgBox "An unknown error occured" 
```

我知道这段代码是错误的，并且显然不起作用，但这只是为了让您了解我想要实现的目标。感谢您提前提供的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:01:12.770

将错误处理程序添加到您的过程。

```
On Error GoTo ErrorHandler 
```

然后在更新记录集后立即向用户显示“成功”通知。

```
RecSet.Update
MsgBox RecSet![FName] & " " & RecSet![FName] & _
    " was successfully added" 
```

如果更新尝试失败，则流控制传递到该`ErrorHandler`部分。

```
ErrorHandler:
    MsgBox "Oops!" 
```

毫无疑问，您想要比“哎呀！”更精致的东西。信息。一种巧妙的方法是使用`Select Case`块根据错误号自定义响应。

在尝试添加之前确定联系人是否已经存在。

```
strCriteria = "Fname = '" & RecSet![FName] & "' AND LName = '" & _
    RecSet![LName] & "'"
Debug.Print strCriteria
If DCount("*", "YourTable", strCriteria) > 0 Then
    ' do not attempt to add it again
    MsgBox "Contact already exists"
Else
    RecSet.AddNew
    ' and so forth
End If 
```

检查`Debug.Print`输出以防我在构建时出错`strCriteria`。

此处的目的是避免重复错误情况……仅尝试添加不存在的联系人。所以这个错误不应该发生，任何*其他*错误都将由错误处理程序处理。

# java - 将出生日期转换为其农历年份

> ID：13671381
> 
> 赞同：0
> 
> 时间：2012-12-02T16:45:28.983
> 
> 标签：java, jodatime

鉴于您知道常规（公历）日，是否有可能找出某人的阴历生日？

joda time 网站上有一个示例显示：

```
// setup date object for midday on May Day 2004 (ISO year 2004)
DateTime dtISO = new DateTime(2004, 5, 1, 12, 0, 0, 0);

// find out what the same instant is using the Islamic Chronology
DateTime dtIslamic = dtISO.withChronology(IslamicChronology.getInstance()); 
```

这个 ISO 年份代表公历吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:11:18.133

[ISO 年表](http://joda-time.sourceforge.net/api-release/org/joda/time/chrono/ISOChronology.html)是一个扩展的（proleptic [）](http://en.wikipedia.org/wiki/Proleptic_calendar)公历，这意味着严格来说，在 1582 年公历被接受之前没有公历，但 ISO 年表在此之前对其进行了扩展。所以是的，对于所有现代（1582 年后）日期，ISO 年份与公历年份相同。

作为替代方案，有[`GJChronology`](http://joda-time.sourceforge.net/api-release/org/joda/time/chrono/GJChronology.html)，它会根据实际日期在儒略年表和公历年表之间自动切换，以及[`DateTime`接受所需年表作为参数的构造函数](http://joda-time.sourceforge.net/api-release/org/joda/time/DateTime.html#DateTime%28int,%20int,%20int,%20int,%20int,%20int,%20org.joda.time.Chronology%29)。

# mysql - SQL查询；4张表的内连接

> ID：13671382
> 
> 赞同：0
> 
> 时间：2012-12-02T16:45:39.213
> 
> 标签：mysql, sql, inner-join

这是加入这 4 个表的最有效方法吗？也可以只选择每个表的一些行吗？我尝试将 * 更改为列的名称，但只允许学生列表中的列。

```
SELECT c.classID, c.instrument, c.grade, u.ID, u.firstname, u.lastname, u.lastsongplayed, u.title
FROM studentlist s
INNER JOIN classlist c ON s.listID = c.classID
INNER JOIN (

SELECT * 
FROM users u
INNER JOIN library l ON u.lastsongplayed = l.fileID
)

u ON s.studentID = u.ID
    WHERE teacherID =3
    ORDER BY classID
    LIMIT 0 , 30 
```

数据库结构：

```
CREATE TABLE IF NOT EXISTS `classlist` (
  `classID` int(11) NOT NULL AUTO_INCREMENT,
  `teacherID` int(11) NOT NULL,
  `instrument` text,
  `grade` int(11) DEFAULT NULL,
  PRIMARY KEY (`classID`),
  KEY `teacherID_2` (`teacherID`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=27 ;

CREATE TABLE IF NOT EXISTS `studentlist` (
  `listID` int(11) NOT NULL,
  `studentID` int(11) NOT NULL,
  KEY `teacherID` (`studentID`),
  KEY `studentID` (`studentID`),
  KEY `listID` (`listID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS `users` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `email` varchar(60) NOT NULL,
  `password` varchar(60) NOT NULL,
  `firstname` text NOT NULL,
  `lastname` text NOT NULL,
  `sessionID` varchar(60) DEFAULT NULL,
  `lastlogin` time DEFAULT NULL,
  `registerdate` date NOT NULL,
  `isteacher` tinyint(1) DEFAULT NULL,
  `isstudent` tinyint(1) DEFAULT NULL,
  `iscomposer` tinyint(1) DEFAULT NULL,
  `lastsongplayed` int(11) NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY `ID` (`ID`),
  UNIQUE KEY `email` (`email`,`sessionID`),
  KEY `ID_2` (`ID`),
  KEY `ID_3` (`ID`),
  KEY `lastsongplayed` (`lastsongplayed`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=63 ;

CREATE TABLE IF NOT EXISTS `library` (
  `fileID` int(11) NOT NULL AUTO_INCREMENT,
  `userID` int(11) NOT NULL,
  `uploaddate` datetime NOT NULL,
  `title` varchar(60) NOT NULL,
  `OrigComposer` varchar(60) NOT NULL,
  `composer` varchar(60) NOT NULL,
  `genre` varchar(60) DEFAULT NULL,
  `year` year(4) DEFAULT NULL,
  `arrangement` varchar(60) DEFAULT NULL,
  PRIMARY KEY (`fileID`),
  KEY `userID` (`userID`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=77 ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:49:32.340

> 这是加入这 3 个表的最有效方法吗？

你`JOIN`看起来正确，你正在加入你的钥匙。所以这*应该*是有效的。但是，我鼓励您分析您的查询[`EXPLAIN`](http://dev.mysql.com/doc/refman/5.0/en/using-explain.html)以确定其他优化。

> 是否可以只选择每个表的某些行？

是的。更改`*`为您想要的每个表中的列。我鼓励您使用原始表明确地为它们添加前缀。根据您选择的列，这也可以使您的查询更高效。

```
SELECT studentlist.studentID, users.email FROM ... 
```

# jquery - jquery禁用在多个选项卡中显示网站

> ID：13671384
> 
> 赞同：-1
> 
> 时间：2012-12-02T16:45:51.600
> 
> 标签：jquery

如何禁用在多选项卡中显示网页并提醒用户您在其他选项卡中打开网页。对不起我的英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:56:04.040

我认为您需要在此处添加一些代码来解释您在说什么。您可以使用链接中的目标属性控制是否在新选项卡中打开链接，

例如

```
<a href="http://www.mysite.com/" target="_blank">Visit Link</a> 
```

将在新标签/窗口中打开

```
<a href="http://www.mysite.com/" target="_self">Visit Link</a> 
```

将在同一个窗口中打开

（显然 htm5 不再支持这种方法 - 可能是因为通常最好不要覆盖正常的浏览器行为）

如果使用 JavaScript：

```
 window.location = 'example.com'; 
```

在同一窗口中打开链接

```
window.open('example.com'); 
```

在新选项卡/窗口中打开一个链接；

如果您想在有人使用 jquery 在新窗口/选项卡中打开链接时发出警报，您可以执行以下操作：

```
$('a').click(function(event){
    event.preventDefault;
    var href = $(this).attr('href');
    alert('Window opened in new tab');
    window.open(href);
}); 
```

您可能需要在上面添加一些代码来检查目标属性以查看它是否设置为 self 或空白并相应地执行。例如。

```
if ($(this).attr('target')=='_blank'){ //do something } 
```

郑重声明：我个人讨厌网页上的这种行为——每个人都知道浏览器是如何工作的，他们不需要警报来解释发生了什么......它只会让使用你网站的人感到厌烦，所以尽量不要让这种事情发生最低限度

# node.js - node jitsu 找不到本地模块

> ID：13671387
> 
> 赞同：5
> 
> 时间：2012-12-02T16:46:34.033
> 
> 标签：node.js, nodejitsu

我有一个应用程序在本地成功运行，所以我知道代码有效。但是，当我部署到节点 jitsu 时，我收到一个错误，它找不到本地模块。这是我所拥有的：

**文件设置：**

```
/index.js
/config/config.js 
```

**index.js**

```
var cfg = require('./config/config.js'); 
```

尝试部署节点 jitsu 时出现错误：

```
Error: Cannot find module './config/config.js' 
```

由于所有这些代码都在本地工作，我不认为这是一个编码问题。我的印象是本地模块不需要包含在 package.json 中，但也许它们适用于节点 jitsu？我阅读了他们的文档，但找不到本地模块的任何特殊内容。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-02T19:04:14.347

像这样的本地模块应该可以正常工作..只要你没有它`.gitignore`或`.npmignore`.

目录中的模块`node_modules`要求您将其添加到文件中的`bundledDependencies`数组中`package.json`。

检查文件是否包含在部署中的一种简单方法是运行`tar -tf $(npm pack)`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-17T19:18:25.273

我在部署时遇到了完全相同的错误，但由不同的根本原因引起。万一有人遇到同样的问题：

**文件设置：**

```
/public/Data/TargetData.js 
```

**app.js 要求声明：**

```
var target = require('./public/data/TargetData.js'); 
```

我的本地 Mac OSX 环境允许`/data/`vs.的大小写差异`/Data/`- Nodejitsu 服务器没有。

# c - 如何通过串口将字符串输入从 Visual Basic 发送到 Arduino？

> ID：13671388
> 
> 赞同：1
> 
> 时间：2012-12-02T16:46:33.150
> 
> 标签：c, visual-studio-2010, arduino

我正在尝试获取在 Visual Basic 中接收到的字符串输入，以便在我的 Arduino 上的液晶显示器上打印出来。我知道我需要 VB 的 console.write 函数和 Arduino 的 lcd.writeline，但是如何通过串行端口将字符串从 Visual Baisc 发送到 Arduino？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:55:51.680

在 vb2010 expres 版本中，在您的项目上拖动一个 com 端口，在此处配置适当的 bautrate 一个方便的页面[http://tiktakx.wordpress.com/2010/11/21/serial-port-interfacing-with-vb-net-2010/](http://tiktakx.wordpress.com/2010/11/21/serial-port-interfacing-with-vb-net-2010/)

对于 arduino 方面，请在此处页面右侧使用此参考检查命令：http: [//arduino.cc/en/Reference/Serial](http://arduino.cc/en/Reference/Serial)

你也可以加入他们的论坛，在那里你也会得到很好的帮助。

# ruby - 如何使用 Ruby 1.9 检测字符串是否仅包含拉丁符号？

> ID：13671389
> 
> 赞同：10
> 
> 时间：2012-12-02T16:46:49.390
> 
> 标签：ruby, regex, ascii

我需要检测某些字符串是否包含来自非拉丁字母的符号。数字和特殊符号如`-`, `_`,`+`是好的。我需要知道是否有任何非拉丁符号。例如：

```
"123sdjjsf-4KSD".just_latin? 
```

应该返回`true`。

```
"12333ыц4--sdf".just_latin? 
```

应该返回`false`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T17:04:27.267

我认为这应该适合你：

```
 # encoding: UTF-8

 class String
   def just_latin?
     !!self.match(/^[a-zA-Z0-9_\-+ ]*$/)
   end
 end

 puts "123sdjjsf-4KSD".just_latin?
 puts "12333ыц4--sdf".just_latin? 
```

请注意， *#ascii_only?* 也非常接近您想要的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T16:52:25.743

以下正则表达式将匹配一个非拉丁字母字符：

```
[\p{L}&&[^a-zA-Z]] 
```

该`&&`语法与两个字符类相交。第一个 ( `\p{L}`) 匹配任何 Unicode 字母。第二个`^a-zA-Z`匹配任何**不是**( `^`) 拉丁字符 (`a-z`或`A-Z`) 的字符。即整个字符类匹配任何不是拉丁字母的字母。

[看到它在 Rubular 上工作。](http://www.rubular.com/r/IIzEVnUtbf)

因此，如果您在内部使用此正则表达式`just_latin?`并在未找到匹配项时返回`true`，它应该像您希望的那样工作。

我之前尝试过使用`\p{Latin}`第二个字符类的 Unicode 属性，但这并不完全可靠，因为`\p{Latin}`包括冰岛字符`þ`, `æ`, `ð`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T16:49:11.607

好了，只需匹配这些字符就完成了（`a-z`表示从`a`to 的字符`z`）：`^[a-zA-Z_\-+]+$`

# java - Java ArrayList 删除没有集合的欺骗

> ID：13671390
> 
> 赞同：3
> 
> 时间：2012-12-02T16:47:07.060
> 
> 标签：java, arraylist

我在从 ArrayList 中删除重复项时遇到问题。是为了大学作业。这是我已经拥有的代码：

```
public int numberOfDiffWords() {
    ArrayList<String> list = new ArrayList<>();
    for(int i=0; i<words.size()-1; i++) {
        for(int j=i+1; j<words.size(); j++) {
            if(words.get(i).equals(words.get(j))) {
                // do nothing
            }
            else  {
                list.add(words.get(i));
            }
        }
    }
    return list.size();
} 
```

问题出在`numberOfDiffWords()`方法上。填充列表方法工作正常，因为我的导师给了我一个示例字符串（包含 4465 个单词）来分析 - 打印`words.size()`给出了正确的结果。

我想返回删除所有重复项的新 ArrayList 的大小。

`words`是一个 ArrayList 类属性。

更新：我应该提到我只允许在这部分分配中使用基于动态索引的存储，这意味着没有基于哈希的存储。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T16:53:13.077

由于这是一项作业，我不打算编写代码。但是，我建议采用不同的方法。

*   在你做的时候遍历数组
*   使用该`subList()`方法构造数组从开始到但不包括当前元素的视图
*   用于`contains()`测试当前元素是否在上一步构建的子列表中
*   只计算找到了多少不包含在前缀中的元素

我推荐的方法应该会产生更简单和更容易理解的代码。请注意，所有这些都是 O(n ² ) 解决方案（如果您做对了，您的解决方案也是如此）。

如果赋值允许修改数组，另一种方法是对数组进行排序。然后相等的元素将是相邻的，很容易计算有多少是唯一的。这是一种 O(n log(n)) 方法。（您也可以只复制数组，这不会改变渐近复杂度，但会减慢求解速度。）

如果不使用某种散列函数（`HashSet`或`HashMap`），你不会比这更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T17:04:08.350

如果您打算使用该方法，那么这就是您的问题：修改 if-then-else 使其不会在第二个循环中添加单词。在内部循环中使用布尔变量验证是否存在重复项，如果没有重复项，则在第二个循环之后将单词添加到列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T17:01:30.893

如果使用嵌套的 for 循环结构进行迭代，删除每个元素的重复项，然后将剩余元素添加到新数组中，则可以返回一个较小的数组。我不确定这是否是最快的方法，但它确实有效。

```
// Delete all dupes
for ( i=0; i<words.length; i++ ) {
  String word = words[i];
  for ( j=(i+1); j<words.length; j++) {
     if (words[j] == words[i]) {
        words[j] = null;
     }
  }
}

// Count the array w/o nulls
int countEl = 0;
for (i=0; i<words.length; i++) {
  if (words[i] != null) {
     countEl++;
  }
}

// Make a new array
String[] newArray = new String[countEl];

for (i=0; i<words.length; i++) {
  if (words[i] != null) {
    countEl.push(words[i]);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T16:56:08.480

您应该通过调用arraylist 上的**contains()**方法来检查重复项，而不是运行整个长度的循环。

```
 word.subList(fromIndex, toIndex).contains(arg); 
```

这样你的代码会非常简洁。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T17:06:32.507

如果你想让它更简单，试试这个

```
final ArrayList duplicateWords = new ArrayList() ;
ArrayList<String> words = new ArrayList() {
    @Override
    public boolean add(Object e) {
        if( !contains(e) ) {
        return super.add(e);
        } else {
            duplicateWords.add(e);
            return false ;
        }
    }
};
System.out.println("Unique words : " + words.size());
System.out.println("Duplicate words : " + duplicateWords.size()); 
```

这是一个替代答案。

# ubuntu - 使用 vmware 的 GPU 直通

> ID：13671401
> 
> 赞同：3
> 
> 时间：2012-12-02T16:48:22.740
> 
> 标签：ubuntu, opencl, vmware, gpu

自从试图让我的显卡在 Vmware 主机中工作两天以来，我一直被困住。

规格：

*   在 Windows 上运行的 Vvmware ESXi 5.0.0
*   Ubuntu 10.04 在主机上运行
*   显卡：AMD Radeon 6900 系列

有用的输出：

```
#lspci -v
03:00.0 VGA compatible controller: ATI Technologies Inc Cayman PRO [AMD Radeon 6900 Series]
Subsystem: PC Partner Limited Device 186b
Flags: bus master, fast devsel, latency 64, IRQ 18
Memory at c0000000 (64-bit, prefetchable) [size=256M]
Memory at b2420000 (64-bit, non-prefetchable) [size=128K]
I/O ports at 4400 [size=256]
Capabilities: [50] Power Management version 3
Capabilities: [58] Express Endpoint, MSI 00
Capabilities: [a0] Message Signalled Interrupts: Mask- 64bit+ Queue=0/0 Enable-
Capabilities: [100] Vendor Specific Information <?>
Capabilities: [150] Advanced Error Reporting <?>
Kernel driver in use: fglrx_pci
Kernel modules: fglrx 
```

我正在以文本模式启动我的 ubuntu。我尝试让 OpenCL 在我的虚拟机中运行。我尝试了很多关于 ati-stream 等的各种教程，但没有任何效果。然后我跟着[这个](http://www.backtrack-linux.org/forums/showthread.php?t=40213&page=2)

完成后，我在启动时收到此消息：

```
 dmesg|grep radeon
    [    0.000000] Command line: BOOT_IMAGE=/boot/vmlinuz-3.2.6 root=UUID=1b5bd568-6b7f-41c0-be1c-d69ae4f7e438 ro text splash video=radeon:modeset=1

[    0.000000] Kernel command line: BOOT_IMAGE=/boot/vmlinuz-3.2.6 root=UUID=1b5bd568-6b7f-41c0-be1c-d69ae4f7e438 ro text splash video=radeon:modeset=1
[    2.670567] [drm] radeon kernel modesetting enabled.
[    2.671623] radeon 0000:03:00.0: enabling device (0000 -> 0003)
[    2.672877] radeon 0000:03:00.0: PCI INT A -> GSI 18 (level, low) -> IRQ 18
[    2.679567] radeon 0000:03:00.0: BAR 6: can't assign [??? 0x00000000 flags 0x0] (bogus alignment)
[    2.680456] radeon 0000:03:00.0: BAR 6: can't assign [??? 0x00000000 flags 0x0] (bogus alignment)
[    2.681299] [drm:radeon_get_bios] *ERROR* Unable to locate a BIOS ROM
[    2.682179] radeon 0000:03:00.0: Fatal error during GPU init
[    2.683291] [drm] radeon: finishing device.
[    2.693101] radeon 0000:03:00.0: PCI INT A disabled
[    2.696322] radeon: probe of 0000:03:00.0 failed with error -22 
```

所以，我知道直通正在工作，因为我可以在主机中看到我的显卡，但我无法让它正常工作。

谁能帮我？询问我是否需要更多信息！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:25:13.610

我认为 AMD OpenCL 驱动程序（和催化剂）以某种方式与 X11 软件包相关联。尝试在您的 VMWare 中启动 Xorg 服务器并在 OpenCL 中编写一个简单的设备查询，以查看您是否可以访问该卡。如果根本没有安装 xorg，那也可能是个问题。您还可以看到`aticonfig --lsa`以root身份使用的卡吗？

# python - 根据变量改变响应

> ID：13671403
> 
> 赞同：3
> 
> 时间：2012-12-02T16:48:30.627
> 
> 标签：python

我试图弄清楚如何在分配更改之前使用 if 语句。这个脚本的重点是在提示从桌子上拿刀的问题之前检查刀是否被拿走。这样做是为了让你可以走回桌子，如果你已经接受了它，你会得到另一个回应。我究竟做错了什么？

```
def table ():
    if knife_taken == False:
        print "it's an old, brown wooden table, and atop it you find a knife"
        print "Will you take the knife or go back?"
        knife = raw_input ("> ")
        if knife.strip().lower() in ["back", "b", "no"]:
            basement2()
        elif knife.strip().lower() in ["take knife", "knife", "yes", "k"]:
            knife_taken = True
            print "You now have the knife, good, you are going to need it"
            raw_input()
            basement2()
        else:
            print "I did not understand that."
            raw_input()
            table()
    else:
        print "There's nothing on the table"
    raw_input()
    basement2() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T16:53:08.473

基本上，当您在函数中更改变量knife_taken 时，您会在一定`local`程度上对其进行更改，这意味着当函数结束时，更改将丢失。有两种方法可以解决这个问题`global`（但那是不好的方法）

```
global knife_taken
knife_taken = True 
```

或者你可以从函数中返回刀的状态

```
return knife_taken

# later on
kitchen(knife_taken) 
```

并将其存储在一个变量中，稍后将其作为争论传回厨房

或者作为额外的小奖励，您可以将游戏状态存储在字典中。然后，您可以随着游戏状态的变化更新字典，例如

```
game_state = {}

game_state['knife_taken'] = False

def kitchen():
    if not game_state['knife_taken']:
        print "Take the knife!"
        game_state['knife_taken'] = True
    else:
        print "Nothing to see here."

kitchen()
kitchen() 
```

# linux-device-driver - 动态共享库——用于 linux

> ID：13671408
> 
> 赞同：2
> 
> 时间：2012-12-02T16:48:58.823
> 
> 标签：linux-device-driver, embedded-linux

我只有一个与 Linux 共享库文件相关的问题。

我看到很多与 Linux 操作系统的动态共享库相关的链接 [http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html](http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html)

在上面的链接中提到了---库的包含文件：ctest.h

现在在LINUX中使用libdl in build函数---dlopen、dlsym、dlclose。
**我们真的需要包含原型文件——ctest.h——用于动态库吗？**

请给出与上述帖子相关的一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:16:41.097

您实际上不需要包含动态库的头文件或原型文件，但是您至少需要为`dlsym`.

有关不包含动态库的包含文件的示例，请参见[此处](http://tldp.org/HOWTO/Program-Library-HOWTO/dl-libraries.html)和[此处。](http://tldp.org/HOWTO/Program-Library-HOWTO/more-examples.html#AEN300)

在您发布的示例中，他们从没有头文件/函数原型的库函数开始，同时提供了有关如何避免 C++ 名称修改的说明，这就是他们在这种情况下包含头文件的原因。

如果你在源文件或头文件中定义自己的库而没有函数原型，那么你需要在使用时包含头文件`dlsym`，否则动态库的头文件是不必要的，因为它的函数原型是已包含在生成的共享对象中。

头文件中包含的函数原型使得实现的函数可以由链接器按名称解析。作为共享对象文件，无论它是如何链接的，都包含链接器链接到的库的实现。

简短的解释是，包含的头文件`#include`由预处理器处理，这意味着传递给链接器的结果源文件/文件知道每个函数调用是谁，因为它查找函数调用原型包含文件并已包含在修改后的源中。包含文件告诉链接器函数调用是**谁。**

目标文件、共享目标文件和其他库文件告诉链接器函数调用原型的实现是**做什么的。**

要在评论中回答您的问题，您只需将`libdl.so`路径添加`LD_LIBRARY_PATH`到 /etc/ld.so.conf 并运行 ldconfig，如果该库或其相关符号链接层次结构不在标准位置，例如`/usr/lib/`or `/lib/`。

有关更多信息，请参阅以下相关[StackOverflow 答案](https://stackoverflow.com/questions/1176427/shared-libraries-and-h-files)。

更多信息可以在

*   [程序库操作方法](http://tldp.org/HOWTO/Program-Library-HOWTO/index.html)
*   [C 库指南](http://www.cs.swarthmore.edu/%7Enewhall/unixhelp/howto_C_libraries.html)
*   [编译器、汇编器、链接器、加载器：短期课程](http://www.cs.washington.edu/education/courses/cse378/97au/help/compilation.html)
*   [链接器和加载器](http://www.iecc.com/linker/)
*   [链接器初学者指南](http://www.lurklurk.org/linkers/linkers.html)

# c# - Application.Exit() - 关闭表单后应用程序仍在运行

> ID：13671410
> 
> 赞同：0
> 
> 时间：2012-12-02T16:49:10.173
> 
> 标签：c#, forms, exit-code, formclosing

我有一个游戏应用程序，当游戏窗体关闭时，主菜单总是弹出。因此，当用户关闭主菜单窗体时，所有应用程序都应该停止运行。我正在尝试处理主菜单的 Form_Closed 事件并执行 Application.Exit() 但这似乎不起作用，即使所有表单都已关闭，应用程序仍在运行，我必须手动停止它。

这是我在游戏表单和主菜单表单中关于关闭的代码：

游戏形式：

```
private void GameForm_FormClosing(object sender, FormClosingEventArgs e)
{
    DialogResult dialogResult = MessageBox.Show("Are you sure you want to close this game?", "Exit Game", MessageBoxButtons.YesNo);

    if (dialogResult == DialogResult.Yes)
    {
        this.Hide();   // hide the Game Form

    }
    else if (dialogResult == DialogResult.No)
    {
        e.Cancel = true;    // cancel form closure
    }

}

private void GameForm_FormClosed(object sender, FormClosedEventArgs e)
{
    MainMenu menu = new MainMenu();
    menu.Show();
} 
```

并在主菜单形式中：

```
private void MainMenu_FormClosed(object sender, FormClosedEventArgs e)
{
    Application.Exit();
} 
```

我做错了什么，还是我应该添加一些东西才能使它起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:08:35.327

你有任何线程在运行吗？

在所有线程完成之前，您的应用程序不会退出，除非您将它们设置为[“后台线程](http://msdn.microsoft.com/en-us/library/h339syd0.aspx)”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:53:11.097

考虑到您在谈论游戏应用程序，您会使用外部资源或某些游戏引擎。*在*退出应用程序之前，请确保您释放/处置/清理您在应用程序中使用的资源。

例如，要跟踪打开的句柄，可以使用[Handle](http://technet.microsoft.com/en-us/sysinternals/bb896655.aspx)

# google-app-engine - 具有无值的 Google App Engine 索引属性

> ID：13671413
> 
> 赞同：1
> 
> 时间：2012-12-02T16:49:31.417
> 
> 标签：google-app-engine, app-engine-ndb

令我惊讶的是，在 GAE 中具有 None 值的索引属性仍然计入写入成本，并且仍然被索引。显然，根据这篇文章，这在某些情况下可能是理想的行为：

[https://groups.google.com/forum/#!msg/google-appengine/pRHA85s3U-o/frdJeab8RVwJ](https://groups.google.com/forum/#!msg/google-appengine/pRHA85s3U-o/frdJeab8RVwJ)

根据那篇文章，还有一个叫做“部分索引”的东西，但那是针对 Java 的。我正在将 NDB 与 Python 一起使用。我希望索引属性 None 值不被索引，并且不计入写入成本。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:38:48.580

除非您使用 Expando，否则这是不可能的。您也可以使用重复的属性（0 或 1 个项目）来破解它，但这会改变您的应用程序看到它的方式。

# many-to-many - 与 VS2012 实体框架 5（EF5 - 最终版本）中的“代码优先”的多对多关系

> ID：13671420
> 
> 赞同：3
> 
> 时间：2012-12-02T16:49:59.000
> 
> 标签：many-to-many, entity-framework-5, fluent-interface, cascading-deletes

有一天，我现在进行了投资，以找到没有成功的解决方案。

我喜欢创建一个简单的多对多关系。

为此，我创建了两个模型：

一个 Player 类，我将拥有“Turnaments”导航属性来查看哪些 turnaments 访问了玩家。

```
public class Player
{
    [Key]
    public Int64 PlayerId { get; set; }

    public string FirstName { get; set; }

    [Required]
    public string Surename { get; set; }

    public virtual ICollection<Turnament> Turnaments { get; set; }
} 
```

和一个 Turnament 类，我将在其中拥有“Players”导航属性，以查看哪些玩家是 Turnament 的一部分。

```
public class Turnament
{
    [Key]
    public int TurnamentId { get; set; }

    [Required]
    public string Name { get; set; }

    public DateTime? StartDate { get; set; }

    public DateTime? EndDate { get; set; }

    public bool IsClosed { get; set; }

    public virtual ICollection<Player> Players { get; set; }
} 
```

如果在 VS2012 的“包管理器控制台”窗口中通过命令“upate-database”（自动迁移 = on）开始迁移 - 我得到以下异常：

在表“PlayerTurnaments”上引入 FOREIGN KEY 约束“FK_dbo.PlayerTurnaments_dbo.Turnaments_Turnament_TurnamentId”可能会导致循环或多个级联路径。指定 ON DELETE NO ACTION 或 ON UPDATE NO ACTION，或修改其他 FOREIGN KEY 约束。无法创建约束。请参阅以前的错误。

我也了解该异常的背景。

所以我会告诉实体框架，如果我被删除：

a) 玩家 EF 不应将级联删除推送到关联的 Turnament

b) Turnament EF 应该将级联删除推送到相关玩家

有了那个背景，循环路径就消失了。

所以我尝试通过Entity Framwork的fluent-API实现一个'Switch cascade delete off'：

```
public class DataContext : DbContext
{
    public DbSet<Turnament> Turnaments { get; set; }
    public DbSet<Player> Players { get; set; }

    protected override void OnModelCreating( DbModelBuilder modelBuilder )
    {

        //modelBuilder.Entity<Turnament>()
        //    .HasMany( b => b.Players )
        //    .WithMany( a => a.Turnaments )
        //    .Map( m => m.MapLeftKey( "PlayerPid" )
        //                  .MapRightKey( "TurnamentPid" )
        //                  .ToTable( "TurnamentsJoinPlayers" ) );

        //modelBuilder.Entity<Player>().HasRequired( t => t.Turnaments ).
        //    WithMany().WillCascadeOnDelete( false );

        //modelBuilder.Entity<Turnament>().HasRequired( t => t.Players ).
        //    WithMany().WillCascadeOnDelete( false );

        //modelBuilder.Entity<Player>().HasRequired( t => t.TurnamentsRelation ).
        //    WithMany().HasForeignKey( p => p.PlayerId ).WillCascadeOnDelete( false );

        //modelBuilder.Entity<Player>().HasMany(p => p.TurnamentsRelation).

        base.OnModelCreating( modelBuilder );

    }
} 
```

但是，正如您所见，一切都得到了赞扬，因为它没有帮助。

感谢所有有能力的帮助，因为只有一些只有破解才能理解的代码片段:) PS：我确信这种多对多关系的EF5（最终）有解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T14:20:56.403

**解决方案**

```
public class MyAppContext : DbContext
{

   public MyAppContext()
   {
    // Somtimes helps to uncommend that line, then the Database will recreated!
    // (For people that are not fit enough in EF CodeFirst - like me ;)
    // 1) Uncommend 
    // 2) Start Application go on a site that access your data wait for
    //    Exception (No Database!)
    // 3) Unkommend line 
    // 4) Execute 'update-database' at the 'Package Manager Console' of VS 2012
    // Database.SetInitializer(new DropCreateDatabaseAlways<LivescoreContext>());
   }

   protected override void OnModelCreating( DbModelBuilder modelBuilder )
   {
        /* Players <-> Turnaments */
        modelBuilder.Entity<Player>()
            .HasMany( p => p.Turnaments )
            .WithMany( p => p.Players )
            .Map( mc =>
                {
                    mc.MapLeftKey( "PlayerPid" );
                    mc.MapRightKey( "TurnamentPid" );
                    mc.ToTable( "PlayersJoinTurnaments" );
                } );

        base.OnModelCreating( modelBuilder );
   }
} 
```

# jquery - jquery延迟不起作用

> ID：13671422
> 
> 赞同：3
> 
> 时间：2012-12-02T16:50:07.563
> 
> 标签：jquery

我正在尝试延迟 jQuery 序列，但拒绝工作。

```
var old = $('.likes' + id).text();
$('.likes' + id).text("You've already voted").delay(3000).text(old); 
```

现在，旧文本会立即输入，而不会显示“您已经投票”。

有什么建议么？

编辑：

按照要求：

HTML：

```
<li>
                            <h2><a href="?page=dub&id=%%DUB_ID%%">%%DUB_TITLE%%</a></h2>
                            <div class="dub">
                                <iframe width="560" height="315" src="http://www.youtube.com/embed/%%YOUTUBE_ID%%?hd=1" frameborder="0" allowfullscreen></iframe>
                                <div id="conten_wrapper">

                                    <div id="conten_meta">
                                        <p> Posted by: <a href="?page=profile&id=%%USER_ID%%">%%USERNAME%%</a><br />
                                            Likes: <span class="likes%%DUB_ID%%">%%LIKES%%</span><br />
                                            Date posted: %%DATE%%
                                        </p>
                                    </div>

                                    <div id="conten_social">
                                        <a href="javascript:void(0);" onclick="javascript:makeRequest(\'like\', %%DUB_ID%%)" class="likebtn">Like</a><a href="javascript:void(0);" onclick="javascript:makeRequest(\'dislike\', %%DUB_ID%%)" class="likebtn2">Dislike</a>
                                    </div>

                                </div>
                            </div>
                        </li> 
```

js：

```
function makeRequest(name, id){
                $.ajax({
                   type: "GET",
                   url: "ajax.php",
                   data: "name=" + name + "&id=" + id,
                   success: function(msg){
                     var obj = jQuery.parseJSON(msg);
                     if(obj.status == "SUCCES"){
                        $('.likes' + id).html(parseInt($('.likes' + id).html(), 10)+1);
                     }else {
                        var old = $('.likes' + id).text();
                        $('.likes' + id).text("You've already voted").delay(3000).text(old);        
                     }
                   }
                 });
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T16:59:30.667

`delay`仅影响 jQuery 的“队列效果”，例如`slideUp`和`fadeIn`，对于其他事情，您应该使用 JavaScript 的 native `setTimeout`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T17:07:27.300

使用 setTimeout 执行此操作的示例：http: [//jsfiddle.net/ShYVR/](http://jsfiddle.net/ShYVR/)

```
var vote = $('.likes' + id)
var text = vote.text();
setTimeout(function() { vote.text(text); }, 3000);
vote.text("You've already voted");​ 
```

# python - Pygame：如何在没有 OpenGL 的情况下透视变形表面

> ID：13671424
> 
> 赞同：1
> 
> 时间：2012-12-02T16:50:18.437
> 
> 标签：python, 2d, pygame

我正在用 Pygame 制作 2D 游戏。有一个我想透视变形的表面（不使用OpenGL）有人知道如何实现吗？

这是一张显示原始图像的图片，以及我所说的透视变形的一个例子。

![在此处输入图像描述](../Images/6340b682f6ad4ff73518bccef30da95a.png)

# php - 从锂控制器获取的骨干模型未在 bb 模型中正确加载

> ID：13671426
> 
> 赞同：1
> 
> 时间：2012-12-02T16:50:24.757
> 
> 标签：php, jquery, backbone.js, mongodb-php, lithium

我正在使用backbone.js 和锂。我通过传入作为页面上隐藏参数接收的 _id 从服务器获取模型。

数据库MongoDB已正确存储数据，可以从控制台查看为：

```
{ "_id" : ObjectId("50bb82694fbe3de417000001"), "holiday_name" : "SHREE15", "description": "", "star_rating" : "3", "holiday_type" : "family", "rooms" : "1", "adults" : "2", "child" :"0", "emails" : "" } 
```

锂模型类是这样的：

```
class Holidays extends \lithium\data\Model {
public $validates = array(
        'holiday_name' => array(
                array(
                        'notEmpty',
                        'required' => true,
                        'message' => 'Please key-in a holiday name! (eg. Family trip for summer holidays)'
                ))); } 
```

骨干假日模型是这样的：

```
 window.app.IHoliday = Backbone.Model.extend({       
    urlRoot: HOLIDAY_URL,
    idAttribute: "_id",
    id: "_id",
    // Default attributes for the holiday.
    defaults: {
    },

    // Ensure that each todo created has `title`.
    initialize: function(props) {

    }, 
```

主干/获取的代码是：

```
var Holiday = new window.app.IHoliday({ _id: holiday_id });
        Holiday.fetch(
                {
                    success: function(){
                        alert('Holiday fetched:' + JSON.stringify(Holiday));
                        console.log('HOLIDAY Fetched: \n' + JSON.stringify(Holiday));
                        console.log('Holiday name:' + Holiday.get('holiday_name'));
                    }
                }               
           ); 
```

锂控制器代码是：

```
public function load($holiday_id)
{
    $Holiday = Holidays::find($holiday_id);
    return compact('Holiday');
} 
```

问题：从服务器获取的主干模型的输出如下，当数据返回到主干模型时，假日模型没有正确“形成”：

```
 HOLIDAY Fetched: 
{"_id":"50bb82694fbe3de417000001","Holiday":{"_id":"50bb82694fbe3de417000001","holiday_name":"SHREE15","description":"","star_rating":"3","holiday_type":"family","rooms":"1","adults":"2","child":"0","emails":""}}

iplann...view.js (line 68)

Holiday name:undefined 
```

显然，当数据从 Lithium 传递/转换并作为模型加载到主干假日模型中时，存在一些问题。我的代码中有什么非常明显的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:44:39.490

默认情况下，Backbone 期望模型数据位于响应的根目录。你把它放在“假期”键下。在您的控制器中，尝试`return $Holiday->to("array");`. 这应该像 Backbone 期望的那样返回它。或者，您可以覆盖 Backbone 模型的`parse()`方法。

# c - 这种类型转换正确吗？

> ID：13671429
> 
> 赞同：2
> 
> 时间：2012-12-02T16:50:31.513
> 
> 标签：c, haskell, shared-libraries

基本上，我的代码在 NucleoProf_init 中崩溃，从 gdb 的堆栈跟踪以及我调用的唯一函数这一事实来看。

```
#include <HsFFI.h>

static char *argv[] = {"NucleoProf", "", "", 0};
static int argc = 1;

HsBool NucleoProf_init(void){

   // Initialize Haskell runtime
   hs_init(&argc,  (char***)&argv );

   return HS_BOOL_TRUE;
} 
```

我怀疑这是我传递 argv 参数的方式，或者可能是 argv 的类型转换，因为堆栈跟踪包含以下内容：

```
#3  0x00007ffff5956282 in setFullProgArgv ()
    from /usr/lib/ghc/libHSrts-ghc7.4.1.so
#4  0x00007ffff5956d04 in hs_init_ghc () from /usr/lib/ghc/libHSrts-ghc7.4.1.so
#5  0x00007ffff5b9ed4f in NucleoProf_init () 
```

问题：这是“合成”一个简单命令行的正确方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T16:53:17.910

你可以试试这个：

```
char ** p = argv;
hs_init(&argc, &p); 
```

目前尚不清楚为什么需要按地址传递数组，但我不知道您使用的 API。仔细检查手册以查看函数是否可以更改这些值，以及是否需要在之后处理它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T20:51:04.270

这是错误的，因为首先，它是错误的类型。获取数组的地址会产生指向数组的指针。`&argv`具有 type `char *(*)[4]`，即“指向 4 个指向 char 的指针的数组的指针”。这不是`char ***`您想要的类型。您正在强制转换它以隐藏类型不兼容。

你想要一个`char ***`，它是一个指向实际`char **`变量的指针。但是您在任何地方都没有`char **`变量。你有`argv`一个`char *[4]`完全不同的变量。数组变量就是这样——它在内存中按顺序排列的元素的集合；内存中任何地方都没有存储任何东西的地址。

**您的基本困惑可能是数组不是指针**这一事实。数组有不同的大小（数组的大小是它的长度乘以它的组件类型的大小）、指针和数组类型（指向数组的指针与指向指针的指针非常不同；与数组数组和指针数组相同） ) 和语义（不能分配或传递数组）。在某些情况下，数组表达式可以隐式*降级*为指针右值；但在这种情况下，您正在获取需要左值的地址，因此它不适用。永远不要将数组与指针混淆。

# slidetoggle - Jquery将显示/隐藏与slideToggle脚本相结合

> ID：13671430
> 
> 赞同：2
> 
> 时间：2012-12-02T16:50:41.607
> 
> 标签：slidetoggle

我有 2 个正在使用的脚本，我想将它们组合成 1 个，但我没有成功，所以如果可能的话，我将不胜感激。第一个脚本是按下全部展开和全部折叠按钮时的显示/隐藏：

```
 $(".hide").click(function(){
$(".screentitle").hide();
});
$(".show").click(function(){
$(".screentitle").show();
}); 
```

我使用的第二个代码是 slideToggle 的图像交换：

```
 $(".chaptertitle").live("click", function(){
$(".screentitle", this).slideToggle("fast");
var $img = $(".img-swap", this);
    if ($img.attr('src').indexOf("plus.png") > -1) {
    $img.attr('src', $img.attr('src').replace('plus', 'minus'));
return false;
    } else {
    $img.attr('src', $img.attr('src').replace('minus', 'plus')); 
```

# c# - 在 C# 中将字符串项添加到 Person 类型的列表中

> ID：13671437
> 
> 赞同：1
> 
> 时间：2012-12-02T16:51:57.473
> 
> 标签：c#, object

我正在制作一个简单的注册申请，并且我有一项任务是要了解有关列表的更多信息。我有一个作业，说我要创建一个名为 Persons 的类，并在该类中设置变量中文本字段的值并将其添加到 Person 类型的列表中。

至今：

在`Person`课堂上：

```
string strSocialSecurityNumber = string.Empty;//---( This will not be used now.)
string strFirstName = string.Empty;
string strLastName = string.Empty;
string strFullName = string.Empty;
string strAge = string.Empty;
string strAll = string.Empty;
int intAge = 0;
List<Person> lstPerson = new List<Person>();

public void SetValues(string FirstName, string LastName, int Age)
{
    strFirstName = FirstName;
    strLastName = LastName;
    strFullName = strFirstName + " " + strLastName;
    intAge = Age;
    strAge = Convert.ToString(intAge);
    strAll = strAge + " " + strFullName;

}

public List<Person> Person()
{
    lstPerson.Add(strAll);
    return lstPerson;
} 
```

错误消息：“无法从字符串转换为人”

作业说列表是 Person 类型，所以我应该向它添加字符串。我已经看过如何做到这一点，但我不知道如何。我已经看到有像“ConvertAll”这样的选项，但我不确定我是否可以使用它，因为列表应该是 Person 类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T17:08:50.850

两者都有一个 Person 列表和 Person 类中的所有属性，这有点令人困惑。我认为老师的意思是你应该创建一个包含 Person 列表的 Persons 类。

```
public class Person
{
    public string strFirstName;
    ...
}

public class Persons
{
    List<Person> lstPersons = new List<Person>();

    public void AddPerson(string FirstName, ...)
    {
        Person person = new Person();
        person.strFirstName = FirstName;
        ...
        lstPersons.Add(person);
    }
} 
```

我相信这更像是任务所要求的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T17:01:00.203

您不能将字符串转换为人，您必须使用它

```
 public List<Person> Person()
    {
        lstPerson.Add(new Person(){strAge =yourvalue,...});
        return lstPerson;
    } 
```

# unity3d - 如何在 Unity 4 中使用 MeshTopology.Lines

> ID：13671439
> 
> 赞同：0
> 
> 时间：2012-12-02T16:52:01.547
> 
> 标签：unity3d

我想在 3d Unity 中绘制线条网格。我发现我可以在 Unity 4 中使用 MeshTopology.Lines 画线。

但我找不到如何使用 MeshTopology.Lines 的示例。如何在 Unity 3d 中绘制线条？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:28:04.393

```
Vector3[] verts = new Vector3[]{Vector3.up, Vector3.right, Vector3.down, Vector3.left};
int[] indicesForLineStrip = new int[]{0,1,2,3,0};
//int[] indicesForLines = new int[]{0,1,1,2,2,3,3,0};
Mesh mesh = new Mesh();
mesh.vertices = verts;
mesh.SetIndicies(indicesForLineStrip, MeshTopology.LineStrip, 0);
//mesh.SetIndicies(indicesForLines, MeshTopology.Lines, 0);
mesh.RecalculateNormals();
mesh.RecalculateBounds(); 
```

# javascript - jQuery 和 jQuery UI 代码未运行

> ID：13671441
> 
> 赞同：0
> 
> 时间：2012-12-02T16:52:19.877
> 
> 标签：javascript, jquery, jquery-ui

我的页面上链接了 jquery UI 和 jQuery，并且页面上当前有以下 jQuery UI 代码：

```
 $(function() {
    $( "#draggable" ).draggable({ containment: "parent"});
    }); 
```

我想让这个 jquery 代码在上面的代码下面运行：

```
function new() {  
    $("p").append("<strong>Hello</strong>");
} 
```

但是由于某种原因，当两者都在同一个地方并且作为 jQuery 的新手时，它不起作用，我不确定出了什么问题（这两个代码大部分都是从站点复制和粘贴的）。我怀疑这与函数语句有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T16:58:48.860

`new`是 javascript 中的[保留关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words)（用作创建新对象的语法），因此您不能将其用作函数名称。尝试为您的函数使用不同的名称，例如：

```
function mynew() {  
    $("p").append("<strong>Hello</strong>");
} 
```

# asp.net-mvc-4 - mvc 中 Global.asax 中的无效参数错误

> ID：13671445
> 
> 赞同：0
> 
> 时间：2012-12-02T16:52:26.833
> 
> 标签：asp.net-mvc-4, asp.net-session

我正在尝试遵循教程[Securing Asp.net](http://blogs.msdn.com/b/rickandy/archive/2012/03/23/securing-your-asp-net-mvc-4-app-and-the-new-allowanonymous-attribute.aspx)但是当我尝试输入这一行时

```
GlobalConfiguration.Configuration.Filters.Add(new System.Web.Http.AuthorizeAttribute()); 
```

它给了我一个以下错误

```
The best overloaded method match for 'System.Web.Http.Filters.HttpFilterCollection.Add(System.Web.Http.Filters.IFilters)' has some invalid agruments 
```

下面是我的 Global.asax 代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Http;
using System.Web.Mvc;
using System.Web.Optimization;
using System.Web.Routing;
using DatabaseService_WebAPI.App_Start;

namespace DatabaseService_WebAPI
{
    // Note: For instructions on enabling IIS6 or IIS7 classic mode, 
    // visit http://go.microsoft.com/?LinkId=9394801

    public class MvcApplication : System.Web.HttpApplication
    {
        protected void Application_Start()
        {
            System.Data.Entity.Database.SetInitializer(new DatabaseService_WebAPI.Models.ProductContextInitializer());
            System.Data.Entity.Database.SetInitializer(new DatabaseService_WebAPI.Models.LocalDBContextInitializer());
            System.Data.Entity.Database.SetInitializer(new DatabaseService_WebAPI.Models.GCMClassContextInitializer());
            System.Data.Entity.Database.SetInitializer(new DatabaseService_WebAPI.Models.ProductTypeContextInitializer());

            GlobalConfiguration.Configuration.Filters.Add(new System.Web.Mvc.AuthorizeAttribute());

            WebApiConfig.Configure(GlobalConfiguration.Configuration);

            AreaRegistration.RegisterAllAreas();

            FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
            RouteConfig.RegisterRoutes(RouteTable.Routes);
            BundleConfig.RegisterBundles(BundleTable.Bundles);
        }

        public static void RegisterGlobalFilters(GlobalFilterCollection filters)
        {
            filters.Add(new HandleErrorAttribute());
            filters.Add(new System.Web.Mvc.AuthorizeAttribute());
            filters.Add(new RequireHttpsAttribute());
        }
    }
} 
```

我不是 mvc 的专家开发人员。所以任何人都可以告诉如何添加过滤器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:42:16.950

在 global.asax.cs 中创建此方法：

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
   // add filters here
   filters.Add(new MyCustomFilter());
} 
```

然后从`Application_Start`方法中调用它：

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();
    RegisterGlobalFilters(GlobalFilters.Filters);
    RegisterRoutes(RouteTable.Routes);
} 
```

# c++ - 让 C++ 程序在不使用系统的情况下构建 Visual C++ 项目？

> ID：13671447
> 
> 赞同：0
> 
> 时间：2012-12-02T16:52:34.247
> 
> 标签：c++, visual-c++, build, visual-studio-2012, system-calls

基本上，我有一个程序可以生成几个`.cpp`文件，这些文件包含在 Visual Studio 项目中。我想要的是让我的程序告诉 Visual Studio 构建该项目，因为`.cpp`文件已经生成。

我可以`system()`用来打电话`MSBuild`或`devenv`做。目前这些都行为不端，但我可以让它们工作。但最终，我真正想要的是直接在我的 C++ 代码中与 Visual Studio/MSBuild 交互，所以我可以做一些事情，比如让它直接将输出的路径返回给我，或者你有什么。

有没有办法做到这一点？当然，每次我搜索“在 C++ 中构建 Visual Studio 项目”或类似内容时，我都会获得有关设置项目并通过 IDE（或者，充其量是通过命令行）构建项目的基本教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:20:01.327

使用 CreateProcess 并使用 stdout 的重定向将输出通过管道传输到文件。然后，您可以以编程方式读取和评估此文件。

MS 示例： http: [//support.microsoft.com/kb/190351](http://support.microsoft.com/kb/190351)
也许这有帮助：[如何使用 CreateProcess 将输出重定向到文件？](https://stackoverflow.com/q/7018228/1045800)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T17:21:01.740

您可以从工作室运行生成器作为预构建事件。这就是 MS 认为我们应该这样做的方式。此外，在解决方案中，您可以通过依赖项链接项目。又是 MS 风格。或者你可以做一个真正的制作系统，比如 CMake。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T17:05:00.820

您可以使用 System.Diagnostics.Process 从 .NET 中启动任何命令行。

[http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx?cs-save-lang=1&cs-lang=cpp#code-snippet-1](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx?cs-save-lang=1&cs-lang=cpp#code-snippet-1)

# r - 月平均工作日数据

> ID：13671450
> 
> 赞同：0
> 
> 时间：2012-12-02T16:52:51.457
> 
> 标签：r, time, average

我有每日时间序列（工作日），我想将其转换为每月平均值。

日期格式为`%d/%m/%Y`，此外还有一些缺失的观测值 ( `NA`)。

我怎样才能做到这一点？

* * *

```
# my data
timeseries <- structure(c(309L, 319L, 329L, 339L, 348L, 374L, 384L, 394L, 404L, 413L, 
  2317L, 2327L, 2337L, 2347L, 2356L, 2382L, 2392L, 2402L, 2412L, 2421L, 2447L, 2457L, 
  422L, 432L, 441L, 467L, 477L, 487L, 497L, 506L, 2467L, 2477L, 2487L, 2497L, 2506L,
   2532L, 2542L, 2552L, 2562L, 2571L, 2597L, 2607L, 2617L, 2627L, 2636L, 
  [...]), .Label = c("01/01/1992", "01/01/1993", "01/01/1996", "01/01/1997", "01/01/1998", "01/01/1999", "01/01/2001 [...] ), class = "factor") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:05:00.263

你可以通过很多很多方式做到这一点。使用基本 R 包：

```
d <- data.frame(Date=Sys.Date()+1:60, Data=1:60)
tapply(d$Data, format(d$Date,"%Y%m"), mean)
aggregate(d$Data, by=list(Date=format(d$Date,"%Y%m")), mean) 
```

# java - 裁剪不规则形状的图像

> ID：13671456
> 
> 赞同：4
> 
> 时间：2012-12-02T16:53:17.177
> 
> 标签：java, android, crop

我需要在我的应用程序中裁剪不规则形状的图像，即，我用手指选择一个部分，如果我单击裁剪按钮，图像中的选定部分将单独保存在 SDCard 中。

如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:04:38.833

您必须为要剪切的形状定义路径。
然后在它周围创建一个矩形，将形状和矩形之间的所有内容设置为透明（Alpha 通道）

这个来源应该给你一些提示：
[https](https://github.com/lvillani/android-cropimage/blob/develop/src/com/android/camera/CropImage.java)
://github.com/lvillani/android-cropimage/blob/develop/src/com/android/camera/CropImage.java看看onSaveClicked方法，第209行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-11T10:22:22.750

参考这个项目： [https ://github.com/coderush/FlexiCrop](https://github.com/coderush/FlexiCrop)

它具有裁剪不规则形状的代码。

# utf-8 - gdb7.5 print utf8 string 显示字符串地址而不是字符串内容

> ID：13671460
> 
> 赞同：2
> 
> 时间：2012-12-02T16:53:45.350
> 
> 标签：utf-8, gdb

我刚刚安装了最新发布的gdb--gdb7.5。当我用它来调试使用utf-8编码的c++程序时，我使用命令“set charset utf-8”将gdb charset设置为utf8。但是，当我想打印一个字符串 :`char *str = "明天是个好天气"`时，“p str”结果是字符串的地址而不是内容。那么 gdb 是否需要调试 utf8 字符串？

断点1，test() at test.cpp:6

6 char *str = "我们的世界多么美好";

(gdb) n

8 printf("%s\n", str);

(gdb) p str

$1 = 0x40067c "0\221们2\204265\214321016好"

(gdb) 设置字符集 UTF-8

(gdb) 显示字符集

主机字符集是“UTF-8”。目标字符集是“UTF-8”。目标宽字符集是“auto；目前是 UTF-32”。

(gdb) p str

$2 = 0x40067c

(gdb)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:12:36.810

告诉我们你做了什么，以及**GDB**打印**了什么。**

使用 gdb-7.5：

```
Temporary breakpoint 1, main () at t.c:5
5     char *str = "明天是个好天气";
(gdb) n

6     return 0;
(gdb) p str
$1 = 0x4005cc "明天是个好天气"

(gdb) show charset 
The host character set is "auto; currently UTF-8".
The target character set is "auto; currently UTF-8".
The target wide character set is "auto; currently UTF-32".

(gdb) set charset utf
Undefined item: "utf". 
```

这表明：

*   GDB 为我做了“开箱即用”的正确事情。
*   你可能没有做`set charset utf`，而是做了别的事情。

您`LANG`在环境中的设置是相关的。我的是：

```
$ echo $LANG
en_US.UTF-8 
```

如果我`unset LANG`，我得到：

```
(gdb) p str
$1 = 0x4005cc "\346\230\216\345\244\251\346\230\257\344\270\252\345\245\275\345\244\251\346\260\224" 
```

# javascript - 如何在 JavaScript 或 HTML 中调整动画 gif 的大小

> ID：13671468
> 
> 赞同：1
> 
> 时间：2012-12-02T16:54:34.553
> 
> 标签：javascript, android, html, animated-gif

我需要在 Android 的 SplashScreen 上显示动画。我想根据屏幕的高度宽度调整它的大小。我可以成功地使用 webView 和 javascript 来适应屏幕。但我无法调整它的大小:)

我写我的代码，也许有人会需要它..

这是 index.html 中的 html 代码（我可以用 Java 编写它，但我不能显示使用的动画 gif）

```
<html>
<head>
<title></title>
</head>
<body style="padding: 0; margin: 0">
<script type="text/javascript">

function resize(image)
{
    var differenceHeight = document.body.clientHeight - image.clientHeight;
    var differenceWidth  = document.body.clientWidth  - image.clientWidth;
    if (differenceHeight < 0) differenceHeight = differenceHeight * -1;
    if (differenceWidth  < 0) differenceWidth  = differenceWidth * -1;

    if (differenceHeight > differenceWidth)
    {
        image.style['height'] = document.body.clientHeight + 'px';
    }
    else
    {
        image.style['width'] = document.body.clientWidth + 'px';
    }

    // Optional: remove margins or compensate for offset.
    image.style['margin'] = 0;
    document.body.style['margin'] = 0;
}

</script>
<img src="file:///android_asset/html/screen1.gif"
     onload="resize(this);"/>
</body>
</html> 
```

这是我的 WebView：

```
 WebView webView = (WebView) findViewById(R.id.webView);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.setVerticalScrollBarEnabled(false);
    webView.loadUrl("file:///android_asset/html/index.html"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:09:53.060

您需要比较图像的高宽比与显示器的高宽比。

```
var imageRatio = image.clientHeight / image.clientWidth;
var clientRatio = document.body.clientHeight / document.body.clientWidth;

if (imageRatio > clientRatio)
{
    image.style['height'] = document.body.clientHeight + 'px';
}
else
{
    image.style['width'] = document.body.clientWidth + 'px';
} 
```

# wcf - 请求-响应与双工 WCF 消息交换模式

> ID：13671473
> 
> 赞同：14
> 
> 时间：2012-12-02T16:55:05.383
> 
> 标签：wcf, wcf-binding

WCF 消息交换模式中请求-响应和双工之间的主要区别是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-02T21:35:48.520

主要区别在于，客户端与服务建立通道后，服务可以随时独立调用客户端。在请求响应中，服务仅在收到来自客户端的请求后才进行通信。因此，通过使用双工，您可以从客户端的角度接收类似事件的行为。显然，这种增强需要维护一个会话（`PerSession`服务上的实例模式）。[您可以在msdn](http://msdn.microsoft.com/en-us/library/ms731064.aspx)上阅读更多内容。

# android - overlay、overlayitem 和 itemizedoverley 之间的混淆

> ID：13671475
> 
> 赞同：0
> 
> 时间：2012-12-02T16:55:08.400
> 
> 标签：android, google-maps, overlay, itemizedoverlay

我想创建一个显示地图的应用程序，在这张地图的顶部，道路和兴趣点将被绘制为线条和椭圆形。这些线条和椭圆将附有监听器，因此用户可以拖动它们或删除它们。

我正在使用带有 osmdroid 的 openstreetmaps，但它似乎与 Google Maps 完全相同。

我正在考虑扩展 OverlayItem 类来表示兴趣点或道路。Overlay 类将被扩展并包含这些扩展的 OverlayItems 的 ArrayList。

Overlay 类的 draw 方法将被覆盖，并将绘制 arraylist 中包含的所有 OverlayItem。

然后将此 Overlay 类添加到 MapView。

我不确定这是否可行，因为很多教程都使用 ItemizedOverlay。这到底是什么，我应该使用它吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:29:49.857

An`ItemizedOverlay`是一个扩展类`Overlay`（如您所愿）并且大部分已完成（您仍然需要扩展它并填充特定部分），以便`Drawables`在指定的地图中添加列表`Geopoints`（使用列表`OverlayItem`）。它还`onTap()`为添加的项目实现。

因此，底线`ItemizedOverlay`是一个预编码的课程，旨在实现您的目标。

**限制**

它可能不是所有叠加层的最佳解决方案......

最好使用您自己的 cals 扩展覆盖的示例：

*   如果您`POI`需要`Drawable`在运行时需要旋转的（即指向变化方向的箭头）
*   如果要绘制没有标记的路线
*   如果您想绘制一些无法从可绘制对象中轻松制作的东西

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:58:19.343

An`ItemizedOverlay`基本上可以满足您的要求：它包含`OverlayItem`要绘制的对象的逐项列表。

# javascript - 模板处理诺基亚地点数据时的回调

> ID：13671476
> 
> 赞同：0
> 
> 时间：2012-12-02T16:55:20.407
> 
> 标签：javascript, here-api

是否有回调函数或任何方法可以知道何时使用模板处理了地点数据并注入到页面中？

一旦显示地点数据，我想更新其他内容。

我正在使用以下方式显示我的地点信息：

```
var myPlace = new nokia.places.widgets.Place({
    placeId: "1234abcd",
    targetNode: "myPlaceContainer",
    template: "myPlaceContainer"
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T18:41:26.840

事实证明，`onData`and`onNoData`是应用于 Place 的用户定义函数，可用于此目的。

请参阅：http: [//developer.here.net/docs/maps_js/topics_api_pub/nokia.places.widgets.Place.html#topic-apiref__Place-0](http://developer.here.net/docs/maps_js/topics_api_pub/nokia.places.widgets.Place.html#topic-apiref__Place-0)

仍然在使用文档站点。

# mysql - mysql中的外键问题（错误1005）

> ID：13671480
> 
> 赞同：0
> 
> 时间：2012-12-02T16:56:20.200
> 
> 标签：mysql

我试图创建以下表格：

顾客：

```
CREATE TABLE Customer(customer_id INT UNSIGNED NOT NULL AUTO_INCREMENT,
                      surname VARCHAR(15) NOT NULL,
                      forename VARCHAR(15) NOT NULL,
                      DOB TIMESTAMP NOT NULL,
                      phone_no VARCHAR(20) NOT NULL,
                      email_address VARCHAR(30),
                      postcode VARCHAR(15) NOT NULL, 
                      PRIMARY KEY(customer_id)) ENGINE=INNODB; 
```

当我之后尝试创建“预订”表时，出现错误

> “错误 1005（HY000）：无法创建表 'Test.Booking'（错误号：150）”

我在线检查了错误，发现它与我试图在表之间建立的外键连接有关；我将在下面给出。

预订：

```
CREATE TABLE Booking (booking_id INT UNSIGNED NOT NULL AUTO_INCREMENT, 
                      customer_id INT NOT NULL,
                      staying_from TIMESTAMP,
                      staying_until TIMESTAMP,
                      cost INT,
                      PRIMARY KEY(booking_id),
                      FOREIGN KEY(customer_id) REFERENCES Customer(customer_id)
                      ON UPDATE CASCADE ON DELETE RESTRICT) ENGINE=INNODB; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T16:59:33.890

如[`FOREIGN KEY`约束](http://dev.mysql.com/doc/en/innodb-foreign-key-constraints.html)中所述：

> 外键定义受以下条件约束：
> 
> `[ deletia ]`
> 
> *   外键和被引用键中的对应列内部必须有相似的内部数据类型，`InnoDB`这样它们就可以在不进行类型转换的情况下进行比较。*整数类型的大小和符号必须相同。*字符串类型的长度不必相同。对于非二进制（字符）字符串列，字符集和排序规则必须相同。

在`Customer`你有`INT UNSIGNED`而在`Booking`你有`INT`。

# ios5 - 在后台关闭 GPS

> ID：13671485
> 
> 赞同：1
> 
> 时间：2012-12-02T16:57:01.857
> 
> 标签：ios5, gps, core-location, background-process

我正在使用 CoreLocation 来确定用户的位置以计算距离并在地图上显示路线。为了最大限度地减少电池使用量，我在获得位置后关闭 GPS，并在 1 分钟后再次打开它。当应用程序处于活动状态时，一切正常，但在将其发送到后台并关闭 GPS 后，应用程序似乎根本处于非活动状态，它不输出任何内容（使用`NSLog()`）。我在`info.plist`文件中添加了指令以允许应用程序在后台运行。当我不在后台关闭 GPS 时，该应用程序在前台工作以及在前台工作。

所以我的问题如下：是否总是需要在后台打开 GPS 以防止应用程序被挂起或有另一种解决方法（因为打开的 GPS 会耗尽电池电量）？

PS 我对 iOS 和移动开发完全陌生，所以也许有一些我必须知道的技巧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:43:16.040

请参阅[http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

苹果一般不支持长时间运行的后台任务。
这仅适用于特定任务：

音频、位置、voip、报亭内容、外部附件、蓝牙中央和蓝牙外设

如果您不使用任何这些，您的应用程序可能会被暂停。
在您的情况下，ypu 已指定位置，但禁用了位置更新。那么对于苹果来说，没有理由让你的应用程序处于后台模式。

# java - 在 JAVA 中生成 x509certificate 证书路径

> ID：13671487
> 
> 赞同：1
> 
> 时间：2012-12-02T16:57:43.390
> 
> 标签：java, cryptography

我成功地从证书请求中制作了 X.509 证书。

但是，我需要在 X.509 证书中插入 CERT 路径信息。

我知道我必须使用 CertPathBuilder 方法，但我不知道如何使用它。

你能给我一个适合以下代码的代码示例吗？

```
import java.io.FileInputStream;
import java.io.FileWriter;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.math.BigInteger;
import java.security.KeyPair;
import java.security.SecureRandom;
import java.security.cert.X509Certificate;
import java.util.Date;
import java.util.Enumeration;
import org.bouncycastle.asn1.ASN1Set;
import org.bouncycastle.asn1.DERObjectIdentifier;
import org.bouncycastle.asn1.pkcs.Attribute;
import org.bouncycastle.asn1.pkcs.PKCSObjectIdentifiers;
import org.bouncycastle.asn1.x509.BasicConstraints;
import org.bouncycastle.asn1.x509.ExtendedKeyUsage;
import org.bouncycastle.asn1.x509.KeyPurposeId;
import org.bouncycastle.asn1.x509.KeyUsage;
import org.bouncycastle.asn1.x509.X509Extension;
import org.bouncycastle.asn1.x509.X509Extensions;
import org.bouncycastle.jce.PKCS10CertificationRequest;
import org.bouncycastle.openssl.PEMReader;
import org.bouncycastle.openssl.PEMWriter;
import org.bouncycastle.x509.X509V3CertificateGenerator;
import org.bouncycastle.x509.extension.AuthorityKeyIdentifierStructure;
import org.bouncycastle.x509.extension.SubjectKeyIdentifierStructure;
import chapter6.X509V1CreateExample;

//example of a basic CA
public class PKCS10CertCreateExample
{
    public static X509Certificate[] buildChain() throws Exception
    {

        PEMReader pRd = new PEMReader(
                     new InputStreamReader(
                         new FileInputStream("pkcs10.req")));

        PKCS10CertificationRequest request = (PKCS10CertificationRequest)pRd.readObject();

        //create a root certificate
        KeyPair rootPair=chapter6.Utils.generateRSAKeyPair();
    X509Certificate rootCert = X509V1CreateExample.generateV1Certificate(rootPair);

    //validate the certification request
    if(!request.verify("BC"))
    {
        System.out.println("request failed to verify!");
        System.exit(1);
    }

    //create the certificate using the information in the request
    X509V3CertificateGenerator certGen = new X509V3CertificateGenerator();

    certGen.setSerialNumber(BigInteger.valueOf(System.currentTimeMillis()));
    certGen.setIssuerDN(rootCert.getSubjectX500Principal());
    certGen.setNotBefore(new Date(System.currentTimeMillis()));
    certGen.setNotAfter(new Date(System.currentTimeMillis()+50000));
    certGen.setSubjectDN(request.getCertificationRequestInfo().getSubject());
    certGen.setPublicKey(request.getPublicKey("BC"));
    certGen.setSignatureAlgorithm("SHA256WithRSAEncryption");

    certGen.addExtension(X509Extensions.AuthorityKeyIdentifier, false, new AuthorityKeyIdentifierStructure(rootCert));
    certGen.addExtension(X509Extensions.SubjectKeyIdentifier, false, new SubjectKeyIdentifierStructure(request.getPublicKey("BC")));
    certGen.addExtension(X509Extensions.BasicConstraints, true, new BasicConstraints(false));
    //certGen.addExtension(X509Extensions.KeyUsage, true, new BasicConstraints(false));
    certGen.addExtension(X509Extensions.KeyUsage, true, new KeyUsage(KeyUsage.digitalSignature | KeyUsage.keyEncipherment));
    certGen.addExtension(X509Extensions.ExtendedKeyUsage, true, new ExtendedKeyUsage(KeyPurposeId.id_kp_serverAuth));

    //extract the extension request attribute
    ASN1Set attributes = request.getCertificationRequestInfo().getAttributes();

    for(int i=0;i!=attributes.size();i++)
    {
       Attribute attr = Attribute.getInstance(attributes.getObjectAt(i));

       //process extension request
       if(attr.getAttrType().equals(PKCSObjectIdentifiers.pkcs_9_at_extensionRequest))
       {
               X509Extensions extensions = X509Extensions.getInstance(attr.getAttrValues().getObjectAt(0));

               Enumeration<?> e = extensions.oids();
               while(e.hasMoreElements())
               {
                   DERObjectIdentifier oid = (DERObjectIdentifier)e.nextElement();
                   X509Extension ext = extensions.getExtension(oid);

                   certGen.addExtension(oid, ext.isCritical(), ext.getValue().getOctets());
               }   
           }       
       }
    X509Certificate issuedCert = certGen.generateX509Certificate(rootPair.getPrivate());
    return new X509Certificate[]{issuedCert, rootCert};
    }

    public static void pemEncodeToFile(String filename, Object obj, char[] password) throws Exception{
    PEMWriter pw = new PEMWriter(new FileWriter(filename));
       if (password != null && password.length > 0) {
           pw.writeObject(obj, "DESEDE", password, new SecureRandom());
       } else {
           pw.writeObject(obj);
       }
       pw.flush();
       pw.close();
    }

    public static void main(String[] args) throws Exception
    {
        X509Certificate[] chain = buildChain();
        PEMWriter pemWrt = new PEMWriter(new OutputStreamWriter(System.out));
        pemWrt.writeObject(chain[0]);
        pemEncodeToFile("pkcs10.pem", chain[0], null);
        pemWrt.close();

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:06:24.283

下面的代码可以帮助你

```
CertPathBuilder cpb = CertPathBuilder.getInstance("PKIX");
X509CertSelector certSelector = new X509CertSelector();
certSelector.setCertificate((X509Certificate) myKeyStore.getCertificate("mykey"));
PKIXBuilderParameters cpp = new PKIXBuilderParameters(trustAnchors, certSelector);
cpp.addCertStore(cs);
cpp.setRevocationEnabled(true);
cpp.setMaxPathLength(6);
cpp.setDate(new Date());

CertPathBuilderResult a = cpb.build(cpp);
CertPath certPath = a.getCertPath(); 
```

# html - HTML 表格自动适合某些列，其他列固定宽度

> ID：13671488
> 
> 赞同：4
> 
> 时间：2012-12-02T16:57:57.843
> 
> 标签：html, css, html-table

我正在尝试创建一个符合以下要求的表：

1.  表格宽度必须定义为 0 - 浏览器应根据列宽计算宽度（这是为了适应列调整插件）。
2.  某些列可能会收到固定宽度（例如 50px）；
3.  不接收固定宽度的列必须自动适应内容。

我创建了一个[小示例](http://jsfiddle.net/sangil/HbARP/)来说明问题 - 正如您所见，第 3 列保持在宽度 0 处，因此不可见。

***编辑***：如果“表格布局：固定”被删除。第三列出现，但固定宽度被忽略，所有列都自动适应。

**HTML**

```
<table>
<tr>
    <td class="cell header" id="header1">Header 1</td>
    <td class="cell header" id="header2">Header 2</td>
    <td class="cell header" id="header3">Header 3</td>
</tr>
<tr>
    <td class="cell">Cell 1</td>
    <td class="cell">Cell 2</td>
    <td class="cell">Very looooong content</td>
</tr>
</table> 
```

**CSS**

```
table {
    table-layout: fixed;
    width: 100%;
    border: 1px solid #696969;
}

.cell {
    color: #898989;
    border: 1px solid #888;
    padding: 2px;
    overflow: hidden;
}

.header {
    background-color: lightsteelblue;
    color: black;
}

#header1, #header2 {
    width: 50px;
} 
```

这甚至可能吗？任何帮助，将不胜感激...

​</p>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-11T15:25:44.510

使用 table-layout: fixed 和宽度为 0 是不可能的。

形成[W3 规范第 17.5.2.1 节](http://www.w3.org/TR/CSS2/tables.html#propdef-table-layout)：

> 在固定表格布局算法中，每列的宽度确定如下：
> 
> 1.  'width' 属性的值不是 'auto' 的列元素设置该列的宽度。
> 2.  否则，第一行中 'width' 属性的值不是 'auto' 的单元格将确定该列的宽度。如果单元格跨越多列，则宽度将按列划分。
> 3.  任何剩余的列均分剩余的水平表空间（减去边框或单元格间距）。

但是，当您执行自动布局时（在第 17.5.2.2 节中描述），您的宽度将被推送以处理您的内容，并且仅在可能的情况下使用提供的宽度。例如，如果每列的最小宽度之和超过了表格的容器宽度，则所有内容都会移动以适应您设置的宽度。

还应该注意的是：

> 在 'table-layout' 为 'auto' 的情况下，UA 不需要实现该算法来确定表格布局；他们可以使用任何其他算法，即使它导致不同的行为。

因此，不幸的是，答案似乎是一个冗长的“不”:(

# .htaccess - 多个应用程序目录的fuelphp htaccess不起作用

> ID：13671489
> 
> 赞同：0
> 
> 时间：2012-12-02T16:58:07.237
> 
> 标签：.htaccess, mod-rewrite, fuelphp

我有一个如下的目录结构。

```
public_html/
       /abc/
       /xyz/
       /pqr/ 
```

在这些目录 abc、xyz、pqr 中的每个目录中都有一个 index.php。

现在每当有任何请求`domain.com/abc/def/ghi`都应该重写为`domain.com/abc/index.php/def/ghi`

```
domain.com/xyz/def/ghi => domain.com/xyz/index.php/def/ghi
domain.com/pqr/def/ghi => domain.com/pqr/index.php/def/ghi 
```

.htaccess 文件应该是什么以及它应该放在哪里？

我在每个目录（abc，xyz，pqr）中都有 .htaccess 文件，如下所示，但它不起作用。它显示 404 页面未找到。请指导我处理所有这些重写条件。

```
<IfModule mod_rewrite.c>
    RewriteEngine on

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

但这不起作用......如果这是正确的 .htaccess 那么请告诉我是否还有其他服务器端问题。我在 CentOs 服务器上设置这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T09:24:56.823

您可能需要`RewriteBase /abc`处理子文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:11:17.360

我的目录访问有问题，我需要在 apache 配置文件（httpd.conf）中更新对内容目录（domain.com）的访问

# batch-file - 如何将我的 ip 存储为 var？（不包括不需要的 IP）

> ID：13671492
> 
> 赞同：0
> 
> 时间：2012-12-02T16:58:29.577
> 
> 标签：batch-file

我得到了这个代码：

```
for /f "tokens=1,2* delims=:" %%i in (' ipconfig ^| find "IP" ') do set dirip=%%j
set dirip=%dirip:~1% 
```

但是，dirip var 存储我得到的最后一个 IP 地址 3，我想要一些允许我选择我想要存储的所有 IP 之一的东西。就像是：

```
Select the IP you want:
1\. 192.168.2.1
2\. 169.254.75.253
3\. 192.168.114.1 
```

如果我按 1 并按 Enter，例如存储在 dirip 192.168.2.1 谢谢。为我的英语道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:20:19.223

```
@echo off
setlocal EnableDelayedExpansion
set n=0
for /f "tokens=1,2* delims=:" %%i in (' ipconfig ^| find "IP" ') do (
   set dirip=%%j
   set dirip=!dirip:~1!
   set /A n+=1
   set dirip[!n!]=!dirip!
   echo !n!. !dirip!
)
set /A i=n+1
:getNumber
set /P "i=Select the IP you want: "
if %i% gtr %n% goto getNumber
set dirip=!dirip[%i%]!
echo Result: %dirip% 
```

# javascript - Node js：从客户端接收数据

> ID：13671494
> 
> 赞同：0
> 
> 时间：2012-12-02T16:58:40.247
> 
> 标签：javascript, ajax, node.js, send

我有个问题。将数据从客户端发送到服务器，再发送到数据库。但是服务器看不到来自客户端的数据，如果你这样做：

```
var http = require("http");
var url = require("url");
var Db = require ("mongodb").Db;
var Server = require("mongodb").Server;
function start () {
'use strict';
function onRequest (request, response) {
    'use strict';
    var db = new Db ("TestApp", new Server ("127.0.0.1", 27017, {}));
    response.writeHead(200, {"Content-Type": "application/json", "Access-Control-Allow-Origin": "*"});
    db.open (function (err, db) {
        db.collection ('ObjectCollection', function (err, collection) {
                var url_string = request.url;
                var params = url.parse(url_string, true).query;
                console.log(params["name"]);
            collection.find().toArray (function (err, docs) {
                console.log (docs);
                response.write(JSON.stringify(docs));

                response.end();
            });
        });
    });
}

http.createServer(onRequest).listen(8080);
console.log ('Server has started...')
}
exports.start = start; 
```

这就是他的看法，但是由于我无法将数据添加到数据库中

```
var http = require("http");
var url = require("url");
var Db = require ("mongodb").Db;
var Server = require("mongodb").Server;
function start () {
'use strict';
function onRequest (request, response) {
    'use strict';
    var db = new Db ("TestApp", new Server ("127.0.0.1", 27017, {}));
    response.writeHead(200, {"Content-Type": "application/json", "Access-Control-Allow-Origin": "*"});
    db.open (function (err, db) {
        db.collection ('ObjectCollection', function (err, collection) {
            collection.find().toArray (function (err, docs) {
                console.log (docs);
                response.write(JSON.stringify(docs));
                var url_string = request.url;
                var params = url.parse(url_string, true).query;
                console.log(params["name"]);
                response.end();
            });
        });
    });
}

http.createServer(onRequest).listen(8080);
console.log ('Server has started...')
}
exports.start = start; 
```

请帮帮我 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:45:43.877

不知道你想做什么，但我会尽我所能给你建议。

您用于解析查询参数的代码看起来不错。一个 GET 请求`http://localhost:8080/?name=foo` 将导致参数具有值，属性 'name' = 'foo'。

如果您尝试将具有属性“名称”的文档插入`{name: 'foo', property2: 'param2', etc...}`到您的 mongoDB 集合中，您将希望在您的集合中实现 mongoDB 插入，而不是查找。

如果您想进行查找，但通过 {name: 'foo'} 进行查询，则需要将其作为参数传递给 find()。

我建议您查看 mongoDB 驱动程序文档以了解有关查找和插入的更多信息：http: [//mongodb.github.com/node-mongodb-native/api-articles/nodekoarticle1.html](http://mongodb.github.com/node-mongodb-native/api-articles/nodekoarticle1.html)

* * *

如果您只需要返回模拟数据，您也可以在命令行 $ 中打开 mongo shell `mongo`，使用 TestApp 数据库`use TestApp`，然后`db.ObjectCollection.insert({...your document here...})`使用数据填充数据库，以便服务器的查询可以返回一些文档。MongoShell 命令也记录在 MongoDB 网站上。

希望能帮助到你。

# llvm - 在 Coq 中，为什么要使用 Atom 以及如何构建它？

> ID：13671498
> 
> 赞同：2
> 
> 时间：2012-12-02T16:58:58.330
> 
> 标签：llvm, coq

我目前正在与 velvm 合作，对其进行改造。我是一个coq新手。

这是原子实现： [http ://www.cis.upenn.edu/~plclub/popl08-tutorial/code/coqdoc/Atom.html](http://www.cis.upenn.edu/~plclub/popl08-tutorial/code/coqdoc/Atom.html)

例如，在 velvm 中，原子被用作 id 和标签。

我想在一个 llvm 转换中插入一段代码，为此我必须给出一个“原子”类型的标签。如何构建 Atom 标签？

把我的问题更笼统地说：1）为什么有人想使用Atom？2）我怎样才能建造一个？3）如果我以这种方式构造，考虑到原子在代码中的使用方式可能不同，我是否会遇到麻烦？

谢谢！

编辑： id 和标签的代码

```
Definition id := atom. (*r identities *) 
Definition l := atom. (*r labels *) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:29:58.903

查看您指向的文件（由 Chargueraud 和 Aydemir 提供），您了解 atom 类型用于表示您可以用来为事物命名的任何类型。

应该使用函数 atom_fresh_for_list 来创建一个新原子。这个函数的类型表明它不仅返回一个任意原子，而且还返回一些证明你得到的原子不存在于你作为参数提供的列表中。这就是你如何创建一个新的：你把所有旧的放在一个列表中，然后你调用函数 atom_fresh_for_list 并将它作为参数。结果，您获得了一个类型为 {x : atom | ...}。这不完全是一个原子：它是一个包含更多信息的原子。您可以通过以下方式获取原子：

让 (v, h) := atom_fresh_for_list ... 在 ...

然后，在第二个“...”中，变量 v 包含原子，您可以使用它。如果你需要证明这个原子是一个新原子，那么你可以使用另一个变量 h 来证明它。

伊夫

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T19:17:27.160

Yves 能够部分回答它，只是没有如何构造原子的示例。您需要使用 projT1。以下是此代码：

```
Definition an_atom : atom := (projT1 (atom_fresh_for_list nil)). 
```

nil 是任何列表。

# ruby-on-rails - 将我的 Rails 站点导出到 Phonegap

> ID：13671500
> 
> 赞同：2
> 
> 时间：2012-12-02T16:59:18.617
> 
> 标签：ruby-on-rails, cordova

我想使用 Phonegap 来创建我的网站的轻型蜂窝版本。

有什么方法可以保存我所有的 HTML 和资产（合并所有部分后，创建整个资产管道项目并将 haml 和咖啡转换为 html 和 javascript）？

我想使用 Rails 编写我的客户端代码并保存它。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T00:39:04.903

这取决于站点 - 如果它主要是静态内容，它应该可以工作，但是任何用户交互都需要在知道应用程序运行时服务器不存在的情况下构建。将 Rails 用作设计为 phonegap 应用程序的编译器比尝试打包现有网站要好得多。

实际上生成静态站点很容易：

```
wget -m -nH www.example.com 
```

# sql - Access SQL - 查询以根据特定年份是否订购来过滤特定记录

> ID：13671501
> 
> 赞同：2
> 
> 时间：2012-12-02T16:59:20.760
> 
> 标签：sql, ms-access

我有一个名为 Orders 的表，其中包含以下字段：CustomerID、OrderDate

例如

```
1, 01/01/2011
2, 02/02/2011
1, 01/07/2012 
```

我试图找出一种查询此表的方法，以了解客户是否在 2011 年订购并且在 2012 年没有订购任何东西并返回不同的客户 ID ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:44:45.030

比较这两种方法来确定哪些 OrderDates 来自 2012 年：

1.  `Year(OrderDate) = 2012`
2.  `OrderDate >= #2012-01-01# AND OrderDate < #2013-01-01#`

第一种方法写起来很简单，也很容易理解。但是，它需要数据库引擎访问`Orders`表中的每一行并使用该`Year()`函数来查看该行是否符合您的标准。当表很大时，如果它包含许多 OrderDates 超出目标范围的行，这可能会花费很多时间。最重要的是，由于该功能强制数据库引擎检查每一行，您的查询不能利用索引来加速数据检索。

第二种方法虽然更冗长，但允许 db 引擎仅检查满足您的标准的那些行。使用上的索引`OrderDate`，它很容易比第一种方法快一个数量级。

如果您的桌子足够小和/或您不关心性能，那对您来说不是问题。但是，我仍然建议您尝试此版本...

```
SELECT DISTINCT o2011.CustomerID
FROM
    Orders AS o2011
    LEFT JOIN
    (
        SELECT DISTINCT CustomerID
        FROM Orders
        WHERE 
                OrderDate >= #2012-01-01#
            AND OrderDate < #2013-01-01#
    ) AS sub2012
    ON o2011.CustomerID = sub2012.CustomerID
WHERE
        o2011.OrderDate >= #2011-01-01#
    AND o2011.OrderDate < #2012-01-01#
    AND sub2012.CustomerID Is Null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T17:10:25.453

你可以试试这个：

```
 select distinct CustomerID
 from Orders
 where year(OrderDate) = 2011
 and CustomerID not in (
    select distinct CustomerID
    from Orders
    where year(OrderDate) = 2012
    ) 
```

# java - Java：实现自己的消息队列（线程安全）

> ID：13671502
> 
> 赞同：3
> 
> 时间：2012-12-02T16:59:22.710
> 
> 标签：java, concurrency, message-queue

任务是实现我自己的线程安全的消息队列。

我的做法：

```
public class MessageQueue {
    /**
     * Number of strings (messages) that can be stored in the queue.
     */
    private int capacity;

    /**
     * The queue itself, all incoming messages are stored in here.
     */
    private Vector<String> queue = new Vector<String>(capacity);

    /**
     * Constructor, initializes the queue.
     * 
     * @param capacity The number of messages allowed in the queue.
     */
    public MessageQueue(int capacity) {
        this.capacity = capacity;
    }

    /**
     * Adds a new message to the queue. If the queue is full,
     * it waits until a message is released. 
     *
     * @param message
     */
    public synchronized void send(String message) {
        //TODO check
    }

    /**
     * Receives a new message and removes it from the queue. 
     *
     * @return
     */
    public synchronized String receive() {
        //TODO check
        return "0";
    }
} 
```

如果队列为空并且我调用 remove()，我想调用 wait() 以便另一个线程可以使用 send() 方法。分别地，我必须在每次迭代后调用 notifyAll() 。

问：这可能吗？我的意思是当我在一个对象的一个​​方法中说 wait() 时，我可以执行同一个对象的另一个方法吗？

还有一个问题：这看起来很聪明吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T17:03:19.677

> 问：这可能吗？我的意思是当我在一个对象的一个​​方法中说 wait() 时，我可以执行同一个对象的另一个方法吗？

是的！这正是 wait 和 notify/notifyAll 的设计方式。如果您在一个对象上调用 wait()，那么该线程会阻塞，直到另一个线程在同一对象上调用 notify/notifyAll。

> 还有一个问题：这看起来很聪明吗？

是的！这正是我将（并且已经）使用低级 Java 操作实现消息队列的方式。

* * *

如果您有兴趣，标准库中有一个[BlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)类可以做到这一点。如果您只想使用这样的类，请使用 BlockingQueue。但是，如果您的目标是学习如何实现消息队列，请继续您的方法，这是完全正确的。

> ```
> public interface BlockingQueue<E>
> extends Queue<E> 
> ```
> 
> 一个队列，它还支持在检索元素时等待队列变为非空，并在存储元素时等待队列中的空间变为可用的操作。

# nancy - Nancy.LightningCache - 调用 AsCachable() 时抛出异常

> ID：13671508
> 
> 赞同：0
> 
> 时间：2012-12-02T16:59:36.780
> 
> 标签：nancy

我正在尝试使用 Nancy 插件`Nancy.LightningCache`

根据[文档](https://github.com/creamdog/Nancy.LightningCache)，我应该能够轻松设置缓存，如下所示：

**引导程序**

```
protected override void ApplicationStartup(TinyIoCContainer container, IPipelines pipelines)
{
    base.ApplicationStartup(container, pipelines);
    this.EnableLightningCache(
            container.Resolve<IRouteResolver>(), 
            ApplicationPipelines, 
            new[] {"id", "claim", "query", "take", "skip"});
} 
```

**路线**

```
Get["/profile"] = _ => 
View["UserProfileView", Model].AsCacheable(DateTime.Now.AddSeconds(30)); 
```

当这条路线被调用时，我得到以下异常。

```
Microsoft.CSharp.RuntimeBinder.RuntimeBinderException:
'Nancy.Responses.Negotiation.Negotiator' does not contain a definition for 'AsCacheable' 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T21:20:04.440

我刚刚一起破解了这个[https://gist.github.com/4191120](https://gist.github.com/4191120)并且它起作用了。全部使用 0.13 nugets

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:28:39.667

好的，我知道了。

**工作路线**

```
return View["HomeView", (object)Model].AsCacheable(DateTime.Now.AddMinutes(1)); 
```

`object`您可以看到，为了满足`AsCachable`扩展方法的签名，我被迫将我的模型显式转换为 an 。

该问题仅在运行时出现，因为我的模型是一个`ExpandoObject`等`dynamic`类型。

# javascript - SELECT 标记的事件

> ID：13671509
> 
> 赞同：2
> 
> 时间：2012-12-02T16:59:42.963
> 
> 标签：javascript, html, javascript-events

我编写了以下代码来输入日期。

```
<body>
<form name="insert" action="history.php" method="POST">
    <h1>HISTORY<h1>
    <table align="center">
        <tr>
            <td>
            DAY:
            <select>

                <option value="-1">Day:<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option>
            </select> 
            </td>

            <td>
            MONTH:
            <select>
                <option value="-1">Month:</option><option value="1">Jan</option><option value="2">Feb</option><option value="3">Mar</option><option value="4">Apr</option><option value="5">May</option><option value="6">Jun</option><option value="7">Jul</option><option value="8">Aug</option><option value="9">Sep</option><option value="10">Oct</option><option value="11">Nov</option><option value="12">Dec</option></select>
            </select> 
            </td>
            <td>
            YEAR :
            <select>
            <option value="-1">Year:</option><option value="2012">2012</option><option value="2011">2011</option><option value="2010">2010</option><option value="2009">2009</option><option value="2008">2008</option><option value="2007">2007</option><option value="2006">2006</option><option value="2005">2005</option><option value="2004">2004</option><option value="2003">2003</option><option value="2002">2002</option><option value="2001">2001</option><option value="2000">2000</option><option value="1999">1999</option><option value="1998">1998</option><option value="1997">1997</option><option value="1996">1996</option><option value="1995">1995</option><option value="1994">1994</option><option value="1993">1993</option><option value="1992">1992</option><option value="1991">1991</option><option value="1990">1990</option><option value="1989">1989</option><option value="1988">1988</option><option value="1987">1987</option><option value="1986">1986</option><option value="1985">1985</option><option value="1984">1984</option><option value="1983">1983</option><option value="1982">1982</option><option value="1981">1981</option><option value="1980">1980</option><option value="1979">1979</option><option value="1978">1978</option><option value="1977">1977</option><option value="1976">1976</option><option value="1975">1975</option><option value="1974">1974</option><option value="1973">1973</option><option value="1972">1972</option><option value="1971">1971</option><option value="1970">1970</option><option value="1969">1969</option><option value="1968">1968</option><option value="1967">1967</option><option value="1966">1966</option><option value="1965">1965</option><option value="1964">1964</option><option value="1963">1963</option><option value="1962">1962</option><option value="1961">1961</option><option value="1960">1960</option><option value="1959">1959</option><option value="1958">1958</option><option value="1957">1957</option><option value="1956">1956</option><option value="1955">1955</option><option value="1954">1954</option><option value="1953">1953</option><option value="1952">1952</option><option value="1951">1951</option><option value="1950">1950</option><option value="1949">1949</option><option value="1948">1948</option><option value="1947">1947</option><option value="1946">1946</option><option value="1945">1945</option><option value="1944">1944</option><option value="1943">1943</option><option value="1942">1942</option><option value="1941">1941</option><option value="1940">1940</option><option value="1939">1939</option><option value="1938">1938</option><option value="1937">1937</option><option value="1936">1936</option><option value="1935">1935</option><option value="1934">1934</option><option value="1933">1933</option><option value="1932">1932</option><option value="1931">1931</option><option value="1930">1930</option><option value="1929">1929</option><option value="1928">1928</option><option value="1927">1927</option><option value="1926">1926</option><option value="1925">1925</option><option value="1924">1924</option><option value="1923">1923</option><option value="1922">1922</option><option value="1921">1921</option><option value="1920">1920</option><option value="1919">1919</option><option value="1918">1918</option><option value="1917">1917</option><option value="1916">1916</option><option value="1915">1915</option><option value="1914">1914</option><option value="1913">1913</option><option value="1912">1912</option><option value="1911">1911</option><option value="1910">1910</option><option value="1909">1909</option><option value="1908">1908</option><option value="1907">1907</option><option value="1906">1906</option><option value="1905">1905</option>
            </select>
            </td>

        </tr>
    </table>
        <input type="submit" class="abc" value="GO!!"><br>
</form>
</body> 
```

我怎么知道选择菜单中的值是否为 NULL？我应该打电话给什么活动，我该怎么做？请帮我！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:05:29.253

您可以编写 java 脚本的更改事件，例如，

```
$( function(){

   $("form > select").change(function(){
      //you can write code to check the value of select here

         if($(this).val() == "some value")
         {
           //some prcessing
         }
   });
}); 
```

# php - 我的脚本没有读取 *.txt 文件

> ID：13671514
> 
> 赞同：0
> 
> 时间：2012-12-02T17:00:17.610
> 
> 标签：php

我有一个表格，它有两个值。一个是 .txt 文件，其中一些链接被硬编码的文件和一个带有 url 的文本字段。当我按下提交时，它会使用该 url 并检查 *.txt 文件中的每个链接。希望你明白我在说什么，如果没有，请评论我会澄清它。现在我有问题。在链接所在的文件不在我的服务器上之前，我的代码不起作用。我不知道如何处理这个问题。我已经完成了搜索，我也尝试了 mysql，但这对我来说不行。我的脚本是这样的：

```
Enter your file :<input type="file" name="ufile" />
Enter your site name :<input type="text" name="utext" />
<input type="submit" value="Check" /> 
```

现在，我的 php 脚本是这样的：

```
$needle = $_POST['utext'];
$file = $_FILES['ufile'];
$new = file($file, FILE_IGNORE_EMPTY_LINES | FILE_SKIP_EMPTY_LINES);
$new = array_map('trim', $new);
echo 'Total entries are: '.count($new).'<br />';
$found = array();
$notfound = array();
foreach ($new as $check) {
    echo "<table border='1'><tr>";
    echo "<td>Processing</td> <td>", $check,"</td></tr>";
    $a = file_get_contents($check);
    if (strpos($a, $needle)) {
        echo "<td><font color='green'>Found:</font></td>";
        $found[] = $check;
    } else {
        echo "<td><font color='red'>Not Found</font></td>";
        $notfound[] = $check;
    }
    echo "</tr></table>";
}
echo "Matches ".count($found)."<br />";
echo "Not Matched ".count($notfound); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T18:20:04.587

您是否有任何理由从未[阅读过有关](http://php.net/manual/en/features.file-upload.post-method.php)PHP 如何处理上传的文档？这将清楚地表明这`$_FILES['ufile']`是**array**，因此您的代码无法工作。如果你真的想在不理解它的情况下继续编写代码，那么替换：

```
$file = $_FILES['ufile']; 
```

和

```
$file = $_FILES['ufile']['tmp_name']; 
```

# javascript - 有人认识这种 javascript 设计模式吗？

> ID：13671515
> 
> 赞同：3
> 
> 时间：2012-12-02T17:00:20.147
> 
> 标签：javascript

这是我发现自己多年来使用和调整的一种 js 模式。

问题是，经过一些实验，我陷入其中，我很想知道这种模式是否有名字。我浏览了很多设计模式，但没有发现任何类似的东西（或者很简单，特别是对于模块化类型模式）。

```
var FOO = (function ($) {
    var privateFuncA = function() {
        ...
    },        
    privateFuncB = function() {
        ...
    },
    self = {
        init: function() {
            privateFuncA(); // Call a private func
            self.publicFunc(); // Call a public func
        },
        publicFunc: function() {
            ...
        }
    };
    return self;
}(jQuery));

$(function () {
    // Initialise FOO
    FOO.init();
}); 
```

想法是将所有内容都保留在名称空间中，并允许伪公共/私有功能。

如果我需要模块化，我将扩展基本 FOO 对象：

```
// Extend FOO object
FOO.Bar = (function ($) {
    var privateFunc = function() {
        ...
    },
    self = {
        publicFunc: function() {
            ...
        }
    };
    return self;
}(jQuery)); 
```

如果您想从外部调用扩展对象中的 publicFunc，您可以：

```
FOO.Bar.publicFunc() 
```

有谁知道这种类型的模式是否有名称，或者这种设计是否存在任何已知问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T17:39:54.380

当然。它只是 Christian Hielmann 的“Revealing Module”模式的扩展，它本身就是 Douglas Crockford 的 Module 模式的扩展。

在我的很多关于 SO 的示例中，我将使用非常相似的东西，除了替换`self`为`public_interface`, 来尝试更明显地了解什么是***public***、***private***或***private-static***。

```
var built_module = (function () {

    var private_data = "",
        private_method = function () { /* ... */ },

        public_interface = {
            public_method : function () { /* ... */ },
            public_data
        };

    return public_interface;

}()); 
```

***并作为构造函数：***

```
var built_constructor = (function (env_params) {

    var static_data = "",
        static_method = function () { /* ... */ },

        public_constructor = function (params) {
            var private_data = "",
                private_method = function (params) { /* ... */ },

                public_interface = {
                    public_method : function () { /* ... */ },
                    public_data
                };

            return public_interface;
        };

    return public_constructor;
}(envArgs));

var myInstance = built_constructor(myArgs); 
```

“静态”数据/属性位于外部闭包中，因此内部闭包中的所有变量/函数都可以访问它们，而“静态”方法无法访问任何实例方法/数据，无需传递函数中的参数。

您可以从这里以任何方式扩展它——删除返回值，而是将 指定`public_interface`为对象的属性，或者`window`默认情况下（用于命名空间）。

# c++ - 使用 Juce 在 C++ 中开发 spotify 音频插件

> ID：13671516
> 
> 赞同：-1
> 
> 时间：2012-12-02T17:00:22.293
> 
> 标签：c++, spotify

这可能吗？

我想使用 Juce 创建 Spotify 免费和开源音频插件（EQ、限制器和类似的东西）。

如果我的理解是正确的，您可以使用 libspotify 开发自己的客户端，或者您可以使用 spotify API 与 spotify 自己的客户端进行交互，但只能使用 Javascript。

有什么方法（最好是跨平台）为官方的 spotify 客户端开发一个 c++ 插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:02:49.643

实际上，经过更多研究，有一种方法，但它有点像黑客，而且它不是跨平台的。您可以为 Direct Sound 创建一个代理库，它会进行声音处理，然后将音频转发到真正的 Direct Sound 库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T20:39:57.193

总之，不——Spotify 不提供这样的原生插件 API。但是，您可以在音频离开 Spotify 后正确地对音频应用过滤器 - 即在系统级别。

# php - PHP_CSV_Utilities 找不到 CSV_Reader 类

> ID：13671520
> 
> 赞同：2
> 
> 时间：2012-12-02T17:00:43.627
> 
> 标签：php, csv, utilities

有没有人使用 PHP CSV Utilities 库（[http://code.google.com/p/php-csv-utils/wiki/Documentation](http://code.google.com/p/php-csv-utils/wiki/Documentation)）？我尝试在我的 Mac 上安装它——我正在运行 XAMPP 并使用 Aptana 3 进行编辑。我按照说明将 CSV 文件夹复制到我的项目文件中，因此组织看起来像这样：

*   xampp文件
    *   文档
    *   MyFirstPHP
        *   CSV
        *   阅读器.php
        *   自动检测.php
        *   Exception.php（等等）
    *   索引.php

（xampp 文件包含文件夹 htdocs，其中包含文件夹 MyFirstPHP，其中包含 index.php 文件和带有 Reader.php、AutoDetect.php、Exception.php 等的 CSV 文件夹）当我去创建一个新的 CSV_Reader 类时，Aptana识别新类并帮助我创建它，但是当我在浏览器中运行它时出现致命错误。我也尝试过这样的 require_once ：

```
require_once 'Reader.php'; 
```

我还尝试要求所有包含的文件（AutoDetect.php、Exception.php 等）。我是否将库安装在错误的位置？我搜索了大量的 Google 文档和博客，但还没有找到成功完成这项工作的方法。

# c# - unity3d 中带有标签问题的光线投射

> ID：13671523
> 
> 赞同：1
> 
> 时间：2012-12-02T17:01:01.140
> 
> 标签：c#, unity3d, raycasting

我需要一些帮助。我有一部分代码可以用 raycast 搜索未阻塞的邻居。我需要获得与“WP”标签发生冲突的光线投射。两次迭代都显示了正确的结果，转储和光线投射也是如此，光线投射确实成功碰撞了一些东西，但是当我检查光线投射碰撞的东西时，没有显示结果....任何人都知道这有什么问题代码..？？

```
int flag = 0, flahNeigh = 0;
    for(flag = 0; flag< wayPoints.WPList.Length; flag++) // iteration to seek neighbour nodes
            { 
                for (flagNeigh = 0; flagNeigh < wayPoints.WPList.Length; flagNeigh++)
                {                
                    if (wayPoints.WPList[flag].loc != wayPoints.WPList[flagNeigh].loc) // dump its own node location
                    {                    
                        if (Physics.Raycast(wayPoints.WPList[flag].loc.position, wayPoints.WPList[flagNeigh].loc.position, out hitted)) // raycasting to each node else its self
                        {  
                            if (hitted.collider.gameObject.CompareTag("WP")) // check if the ray only collide the node
                            {
                               print(flag + "  :  " + flagNeigh + "  :  " + wayPoints.WPList[flagNeigh].loc.position); // debugging to see whether the code works or not (the error comes)
                            }
                        }
                    }                    
                }
            } 
```

感谢您的赞赏和回答...对不起，如果我的英语不好...^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T03:27:59.740

这是因为您正在使用邻居的位置。仅当原点来自 0,0,0 时才有效。

所以不要写：

```
if (Physics.Raycast(wayPoints.WPList[flag].loc.position, wayPoints.WPList[flagNeigh].loc.position, out hitted)) 
```

写 ：

```
 if (Physics.Raycast(wayPoints.WPList[flag].loc.position, wayPoints.WPList[flagNeigh].loc.position-wayPoints.WPList[flag].loc.position, out hitted)) 
```

# php - 将类应用于

> ID：13671526
> 
> 赞同：0
> 
> 时间：2012-12-02T17:01:17.810
> 
> 标签：php, regex

我是 PHP 新手，想根据查看者正在浏览的网站的哪个部分，将特定的类应用于我的页面标题。

例如，如果查看器位于 domain.com/blog 或 domain.com/blog/post-1 等等，我想将“blog”类应用到等等，但如果它们是，则应用“pics”类查看 domain.com/pics 或 domain.com/pics/gallery-1 等。

[我在这里](https://stackoverflow.com/questions/8373016/apply-css-class-to-element-based-on-a-keyword-in-the-url-with-jquery)找到了可以使用 javascript 进行修改以满足我的需求的东西， 但我认为看到我已经在使用 PHP，将这种东西保留在服务器端会更有意义。

正如我所说，我是 PHP 新手。我已经尝试了一些正则表达式，但无济于事。

编辑：抱歉在我的第一篇文章中没有更具体，我使用 wordpress 作为我的 CMS - 这是我的第一篇 stackoverflow 帖子，我相信你可以原谅我 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:09:09.757

```
<?php

if (substr($_SERVER['REQUEST_URI'], 0,5)=='/pics') {
    $h1class='someclass';
} 
```

这取决于你如何将类放在标签中，可能是这样的

```
?><h1 class="<?php echo $h1class; ?>">... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T17:14:28.367

我建议不要根据页面放置一个类，而是为 home.css、blog.css、whateverelse.css 设置单独的 CSS 文件。当然，这些将是对某种 default.css 或 site.css 或包含整个站点使用的样式的任何内容的补充。

然后，您可以构建一个函数/方法来在 HTML 标头中创建 CSS 调用。我通常有一个构建实际 HTML 页面的“Page”对象，以及一个输出 CSS 调用的“get_css”方法。

如果不知道您当前如何构建页面，很难获得更具体的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:47:33.213

这是我最终制定的解决方案。感谢@m.buettner 将我指向explode()。

```
<h1 id="title-text" class="
            <?php #returns the category as a class
                $url = array();
                $url = explode('/', get_permalink());
                echo $url[3];
            ?>
            mono in-case-404">
            <a href="<?php echo home_url( '/' ); ?>">SITE</a>
        </h1> 
```

# java - 在Java中获取返回类型的注释

> ID：13671531
> 
> 赞同：1
> 
> 时间：2012-12-02T17:01:29.287
> 
> 标签：java, methods, annotations, return

我正在使用 Spring MVC 并正在使用方面来为我的控制器提供建议。我遇到了一个问题：返回带有 @ResponseBody 类型注释的值的控制器。您如何找到应用于返回类型的注释？

```
@Around("myPointcut()")
private Object checkAnnotations(ProceedingJoinPoint pjp) throws Throwable {
    Object result = pjp.proceed();
    Method method = ((MethodSignature)pjp.getSignature()).getMethod();
    System.out.println("Checking return type annotations.");
    for(Annotation annotation : method.getReturnType().getAnnotations()){
        System.out.println(annotation.toString());
    }
    System.out.println("Checking annotations on returned object.");
    for(Annotation annotation : result.getClass().getAnnotations()){
        System.out.println(annotation.toString());      
    }
    return result;
} 
```

建议的方法：

```
@RequestMapping("/Test")
public @ResponseBody String doTest(){
    return "Test";
} 
```

不幸的是，这些方法似乎都没有达到预期的效果。我可以检索正在返回的对象类型的注释，但不能检索在返回时添加的注释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T17:05:19.487

`@ResponseBody`注释注释了一个方法*，*所以我想你会想要获取方法注释。

我不是弹簧专家，但我看到的例子看起来像：

```
@RequestMapping("/Test")
@ResponseBody
public String doTest(){
    return "Test";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-04T00:10:07.597

它是一种类型注释。它从 Java 8 开始可用。这为您提供了一个良好的开端：http: [//java.dzone.com/articles/java-8-type-annotations](http://java.dzone.com/articles/java-8-type-annotations)

# c++ - LNK 1104 错误到 lib 文件 - 尽管删除包含和链接仍继续

> ID：13671533
> 
> 赞同：1
> 
> 时间：2012-12-02T17:01:31.503
> 
> 标签：c++, linker-errors

在我的上一个会话中代码工作正常后，在我的 C++ 应用程序中突然弹出一个指向 lib 文件的链接错误。

> 错误 1 ​​错误 LNK1104: 无法打开文件 '.......\Program Files (x86)\FMOD SoundSystem\FMOD Programmers API Windows\api\lib\fmodex_vc.lib'

我三重检查了我的项目目录是否设置正确以链接到 lib 文件，该文件是否存在于所述目录中，并且它是 .lib 的工作版本。

我的下一步是删除文件的包含和链接以绕过错误并处理我的其余代码，直到问题解决。然而，错误仍然存​​在，尽管：

*   绝对注释掉与 lib 相关的所有内容。
*   绝对注释掉依赖于包含的每一行代码。
*   从项目属性中的 VC++ 目录中删除目录。
*   检查 Additional Library Directories 字段也没有引用。

据我了解，这应该使编译器几乎不存在库和相关代码。

我错过了什么？

库本身是 fmodex_vc.lib - FMOD API 的一部分，用于为交互式应用程序提供声音。

同样，该应用程序正在运行一个会话，但未能编译下一个会话。从那以后我没有接触过代码，所以这让我相信 VS 的某些方面有问题。如果可能的话，我想避免重新安装所涉及的时间，因为我明天晚上要进行审查，并且在那之前我还想解决一些问题。但是，如果有必要，我不会犹豫。

非常感谢帮助。

# r - Save result of for loop in a vector

> ID：13671535
> 
> 赞同：1
> 
> 时间：2012-12-02T17:01:40.900
> 
> 标签：r

I think I'm just too tired to see the mistake. I wrote a function to get the maximal value for two data sets from a 'for' loop:

```
plot_zu <- function(x) {for (i in 1:x){
    z=data_raw[grep(a[i], data_raw$Gene.names),]
    b=data_raw_ace[grep(a[i], data_raw_ace$Gene.names),]
    p<-vector("numeric", length(1:length(a)))
    p[i]<-max(z$t_test_diff)
    return(p)} 
} 
```

Imagine: a is a vector of names and the data set `(data_raw(_ace))` is filtered by it. In the end, I would like to have all maxima values of column `t_test_diff` in a vector. After that I want to add the `t_test_diff` column values from data_raw_ace also.

So the problem is, that I get this:

```
[1] 1.210213 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000
[8] 0.000000 0.000000 
```

So there is a problem with brackets or something but I cannot see it ( first value fits). Sorry for no good example but i think it is understandable and an easy to solve question.

If need be, I can add another example.

Thanks a lot!!

gratefully,

Hendrik

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:14:07.403

In the absence of data and even the call you make to this function, I'm going to offer an alternative based on what I think you are attempting. It appears you want to select only those rows of "data_raw" whose "Gene.names" column values are in the set defined by "a". If so, that is just:

```
 z <- data_raw[ data_raw$Gene.names %in% a , ]  # no loop needed

 b <- data_raw_ace[ data_raw_ace$Gene.names %in% a , ] # again no loop needed
 # Next step is unclear 
```

If you want to use grep or grepl inside "[" then use sapply:

```
 z <- data_raw[ sapply(a, grep, x= data_raw$Gene.names), ]  # (still) no loop needed
 b <- data_raw_ace[ sapply(a, grep, x= data_raw_ace$Gene.names),  ] 
```

When you do this, what is it that is desired?

```
p<-vector("numeric", length(1:length(a)))
p[i]<-max(z$t_test_diff) 
```

If you want the maximum value for an identically named column in the two subset of data, then do this:

```
p <- pmax( z$t_test_diff, b$t_test_diff ) 
```

Based on you further comments above I (now) think maybe:

```
p <- apply( cbind(z$t_test_diff), abs(b$t_test_diff), 1, function(x) x[which.max(abs(x))]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T17:17:42.013

`vapply` does this, eliminating the `for` loop. Not tested.

```
vapply(1:x, FUN.VALUE=numeric(1), FUN=function(x) {
    z=data_raw[grep(a[i], data_raw$Gene.names),]
    b=data_raw_ace[grep(a[i], data_raw_ace$Gene.names),]  # Is this needed?

    return(max(z$t_test_diff))
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T17:28:20.153

It appears you are overwriting p in each new iteration by defining it inside the loop.

# matlab - 如何在matlab中建立一个累加器数组

> ID：13671536
> 
> 赞同：0
> 
> 时间：2012-12-02T17:01:44.020
> 
> 标签：matlab, multidimensional-array

我对matlab很陌生，如果这是一个愚蠢的问题，我很抱歉。我必须遵循矩阵：

```
im = imread('image.jpg');  %<370x366 double>
[y,x] = find(im); %x & y both <1280x1 double>
theta;  %<370x366 double> computed from gradient of image 
```

我目前可以像这样一次绘制一个点：

```
plot(x(502) + 120*cos(theta(y(502),x(502))),y(502) + 120*sin(theta(y(502),x(502)))); 
```

但是我想做的是如何增加一个累加器数组，我想在每次找到该位置的值时将 acc 的位置增加 1。

所以如果 x(502) + 120*cos(theta(y(502),x(502))),y(502) + 120*sin(theta(y(502),x(502)) = (10, 10) 然后 acc(10,10) 应该增加 1。我正在处理一个非常大的数据集，所以我想避免 for-loops 并使用这样的东西：

```
acc = zeros(size(im));
%increment value when point lands in that location
acc(y,x) = acc(x + 120*cos(theta(y,x)),y + 120*sin(theta(y,x)),'*b')) + 1; 
```

如果 120 实际上也可以是另一个包含不同半径值的矩阵，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:53:14.933

做

```
i = find(im); 
```

代替

```
[y,x] = find(im) 
```

这将为您提供非零值的线性索引

另外，创建一个网格

```
[x,y] = meshgrid(1:366,1:370) 
```

现在您可以对坐标和值进行线性索引，例如

`x(520)`是第 520 个点 x 坐标

`im(520)`为第 520 点灰度值

`theta(520)`是第 520 个梯度值

所以，现在你可以绘制它：

```
plot(x(i) + 120*cos(theta(i)),y(i) + 120*sin(theta(i)),'b*'); 
```

`x(i)`表示一列第 i 个值

`x(i) + 120*cos(theta(i))`表示一列结果

**积累**

我认为在这种情况下循环累积是可以的：

```
acc=zeros(size(im));
for ii=1:length(i)
    xx=round(x(ii) + 120*cos(theta(ii)));
    yy=round(y(ii) + 120*sin(theta(ii)));
    acc(xx,yy)=acc(xx,yy)+1;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T18:58:57.393

（示例中的`factor`120）可以是大小为的矩阵`im`或标量。`.*`会做的。

```
im = imread('image.jpg');
[y, x] = meshgrid(1 : size(im, 1), 1 : size(im, 2));
factor = 120 * ones(size(im)); 
theta = gradient(double(image)); % just for example

acc = zeros(size(im));

increment = ((x + factor .* cos(theta)) == 10) &  ((y + factor .* sin(theta)) == 10);
acc = acc + increment; 
```

但是比较`10`很少是真的，所以你需要允许一些范围。例如`(9,11)`.

```
e = 1;
increment = abs((x + factor .* cos(theta)) - 10) < e &  abs((y + factor .* sin(theta)) - 10) < e; 
```

# php - 为未知命令回复选择 http 状态码

> ID：13671537
> 
> 赞同：0
> 
> 时间：2012-12-02T17:01:48.903
> 
> 标签：php, api, http, http-status-codes

所以，我正在编写一个我需要完成的小测试，我只想通过添加一些标题状态代码响应和其他一些东西来给它一些最后的润色。

现在，我的困境是在`$_GET['cmd']`与现有命令列表进行比较之后，为我的“未知命令”响应选择什么 HTTP 状态代码。

```
case 404: $text = 'Not Found'; break;
case 405: $text = 'Method Not Allowed'; break;
case 406: $text = 'Not Acceptable'; break; 
```

我应该选择以上哪一项？如果没有，还有哪个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:05:44.207

如果你有这样的网址：

```
http://example.com/resource?cmd=doesnotexist 
```

并且客户端为其发出 GET 请求，404 将是适当的 HTTP 状态代码，因为带有参数的 url 可以被视为唯一资源。该资源要么存在，要么不存在。

# javascript - Javascript 拖放代码适用于 div 但不适用于 img

> ID：13671542
> 
> 赞同：1
> 
> 时间：2012-12-02T17:02:56.033
> 
> 标签：javascript, image, drag

我对 JavaScript 相当陌生，所以任何帮助都会很棒！

我创建了一小段代码，让我可以抓取一个 div 并拖动它。我将“dragme”id 分配给 div，一切都很好。问题是，如果我从我的 html 中替换该 div 并放置一个 img 元素（显然将“dragme”id 分配给 img），事情就不会按预期工作。

当我单击拖动 img 时，它实际上移动了大约 3 或 4 个像素，然后它会冻结，直到我抬起鼠标按钮（mouseup）。

是否有一些属性或特征会阻止 img 元素以与 div 相同的方式运行？

```
var isClicked = false;
var startClientX = 0;
var startClientY = 0;
var startLeft = 0;
var startTop = 0;

window.addEventListener("load", addListeners, true);

function addListeners()
{
    document.getElementById("dragme").addEventListener("mousedown", mouseIsDown, false);
    document.getElementById("dragme").addEventListener("mouseup", mouseIsUp, false);
    window.addEventListener("mousemove", moveImage, false);

    function mouseIsDown(e)
    {   
        if (isClicked == false)
        {
            isClicked = true;
            startClientX = e.clientX;
            startClientY = e.clientY;
            startLeft = document.getElementById("dragme").offsetLeft;
            startTop = document.getElementById("dragme").offsetTop;
        }
    }

    function mouseIsUp()
    {
        if (isClicked == true)
        {
            isClicked = false;
        }
    }

    function moveImage(e)
    {               
        if (isClicked == true)
        {
            imageLeftDif = e.clientX - startClientX;
            imageTopDif = e.clientY - startClientY;
            var newLeftPos = (startLeft + imageLeftDif) + "px";
            var newTopPos = (startTop + imageTopDif) + "px";    

            document.getElementById("dragme").style.left = newLeftPos;
            document.getElementById("dragme").style.top = newTopPos;
        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:35:26.400

**这解决了问题（由syazdani**作为评论提供的答案）：

> 我敢说，内置的浏览器拖放图像正在启动。尝试 e.preventDefault 并在 mousedown 处理程序中返回 false。– syazdani 2012 年 12 月 2 日在 17:26

# php - 在 Xcode 中访问数据库

> ID：13671543
> 
> 赞同：0
> 
> 时间：2012-12-02T17:03:00.677
> 
> 标签：php, sql, ios6, xcode4.5

在 Xcode 中访问数据库的最佳方式是什么？我正在尝试构建一个应用程序，该应用程序要求人们使用正确的凭据登录并从服务器获取某些数据并将其显示在应用程序中。

有没有办法在 Xcode 中编写 SQL 而不用红色下划线？要登录，我会使用登录脚本访问 php 文件吗？我不是在问如何，我只是想要一些建议和一些有用的提示和正确方向的指示/任何有用的资源来做我想做的事情？

谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:01:12.177

是的，您可以将 php 文件与 xcode 一起添加，并在 php 文件中编写选择查询。在 xcode 中使用 post 创建服务器连接并提供 php 文件的路径

# python - Python while (bool):

> ID：13671546
> 
> 赞同：3
> 
> 时间：2012-12-02T17:03:27.077
> 
> 标签：python, logic

在这种情况下：

```
swag = True
i = 0

while swag:
    i=i+1
    print(swag)
    if i == 3:
        swag = False 
```

3圈后while循环会退出吗？

while swag - 检查 swag 是否存在或 swag 是否为 True

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-02T17:05:29.323

`while swag:`将运行 while `swag`is "truthy"，它将是 while `swag`is `True`，而不是当您设置`swag`为时`False`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T17:05:38.047

> while swag - 检查 swag 是否存在或 swag 是否为 True

它检查是否`swag`是`True`（或[*“真实”*](http://docs.python.org/2/library/stdtypes.html#truth-value-testing)，我应该说）。是的，循环将在 3 次迭代后退出，因为`i=i+1`必须执行*3 次*，直到`i == 3`并且（通过`if`-statement）`swag`设置为`False`，此时循环将退出。

但是为什么不自己检查呢？

```
swag = True
i = 0

while swag:
    i=i+1
    print(swag)
    if i == 3:
        swag = False 
```

```
真的
真的
真的

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T17:08:13.820

您还可以使用以下符号缩短表达式以将变量“i”增加 1：i+=1（与 i=i+1 相同）

# vb.net - VB.net 垃圾收集器不释放对象

> ID：13671551
> 
> 赞同：7
> 
> 时间：2012-12-02T17:04:12.187
> 
> 标签：vb.net, garbage-collection, odbc, dispose

首先，提前感谢您的帮助。

我决定在这样的论坛上寻求帮助，因为经过几个月的努力，我找不到解决问题的方法。

这可以描述为'*为什么在VB.net中创建的对象即使在强制启动GC时也没有被GC释放？*"

请考虑以下代码。显然我的项目要复杂得多，但我能够隔离问题：

```
Imports System.Data.Odbc
Imports System.Threading
Module Module1
    Sub Main()
        'Declarations-------------------------------------------------      
            Dim connex As OdbcConnection 'Connection to the DB
            Dim db_Str As String         'ODBC connection String      
        'Sentences----------------------------------------------------
            db_Str = "My ODBC connection String to my MySQL database"
            While True
                'Condition: Infinite loop.
                connex = New OdbcConnection(db_Str)
                connex.Open()
                connex.Close()

                'Release created objects
                connex.Dispose()

                'Force the GC to be launched
                GC.Collect()

                'Send the application to sleep half a second
                System.Threading.Thread.Sleep(500)
            End While
    End Sub
End Module 
```

这模拟了与 MySQL 数据库建立连接的多线程应用程序。如您所见，连接被创建为一个新对象，然后被释放。最后，GC被迫启动。我已经在几个论坛以及 MSDN 在线帮助中看到过这个算法，所以就我而言，我没有做错任何事情。

当应用程序启动时，问题就开始了。创建的对象在代码中处理，但一段时间后，可用内存耗尽，应用程序崩溃。

当然，这个问题在这个小版本中很难看到，但在实际项目中，应用程序很快就会耗尽内存（由于长时间建立的连接量），因此正常运行时间只有两天. 然后我需要再次重新启动应用程序。

我在我的机器上安装了一个内存分析器（Scitech .Net Memory profiler 4.5，可 [在此处](http://memprofiler.com/)下载试用版）。有一个名为“调查内存泄漏”的部分。当我在“实时”选项卡上看到这个时，我感到非常惊讶。如果我是正确的，这张图告诉我在代码上创建的所有对象都没有被实际释放：

![http://www.zuzsso.com/images/screenshot3.jpg](../Images/3c29a81000ba6745f2dfa164d521dfd3.png)

当我看到另一个屏幕时，惊喜就更大了。据此，所有未处理的对象都是**System.Transactions**类型，我假设它是在 .Net 库中内部管理的，因为我没有在我的代码上创建任何这种类型的对象。这是否意味着 VB.net 标准库存在错误？？？：

![http://www.zuzsso.com/images/screenshot4.jpg](../Images/6f2896dd39bbea1768ccf57f634f980c.png)

请注意，在我的代码中，我没有执行任何查询。如果这样做，即使我调用**.Close()**方法，也不会释放**ODBCDataReader对象（令人惊讶的是，这种类型的未释放对象的数量与****System.Transactions**类型的未释放对象的数量完全相同）

 ****另一个重要的事情是声明**GC.Collect()**。内存分析器使用它来刷新要显示的信息。如果您从代码中删除它，分析器将不会正确更新实时图表，从而给您一种一切都正确的错误印象。

最后，如果你省略**connex.Open()**语句，截图 #1 将呈现一条平线（这意味着所有创建的对象都已成功释放），但不幸的是，如果我们无法对数据库进行任何查询，如果连接尚未打开。

有人可以找到对此的合乎逻辑的解释，以及有效释放对象的解决方法吗？

谢谢大家。

尼科

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T02:34:43.050

Dispose与垃圾收集**无关。**垃圾收集仅与*托管*资源（内存）有关。Dispose 根本与内存无关，只与*非托管资源*相关（数据库连接、文件句柄、gdi 资源、套接字......任何*不是*内存的东西）。两者之间的*唯一*关系与对象的*最终确定*方式有关，因为许多对象通常是这样实现的，即释放它们会抑制最终确定，最终确定它们将调用 .Dispose()。显式地 Disposing() 一个对象**永远不会**导致它被收集¹。

显式调用垃圾收集器几乎总是一个坏主意。.Net 使用分代垃圾收集器，因此自己调用它的主要效果是您将保留*更长时间*的内存，因为通过更早地强制收集，您可能会在项目完全符合收集条件之前对其进行检查，这会将它们发送到不太频繁收集的高阶生成中。否则，这些项目将保留在较低的一代中，并在 GC 下一次自行运行时有资格收集。您现在可能需要为分析器使用 GC.Collect()，但您应该尝试为您的生产代码删除它。

您提到您的应用程序在崩溃前运行了两天，并且没有对您的实际生产代码进行分析（或显示结果），所以我也认为分析器在一定程度上误导了您。您已将代码缩减为导致内存泄漏的代码，但我不确定这是**您**在生产中看到的内存泄漏**。**这部分是因为重现错误的时间不同，但这也是“本能”。我提到这一点是因为根据您的分析器结果，我将建议的一些内容可能不会立即有意义。顺便说一句，我不确定你失去的记忆是怎么回事，但我可以做出一些猜测。

 **第一个猜测是你的真实代码有 try/catch 块。抛出异常......也许不是在每个连接上，但有时。发生这种情况时，catch 块允许您的程序继续运行，但您跳过了`connex.Dispose()`行，因此留下了悬空的连接。这些连接最终会为数据库创建拒绝服务的情况，这可以通过多种方式表现出来。这里的更正是确保您始终对您的任何 .Dispose() 使用 finally 块。无论您当前是否有一个 try/catch 块，这都是正确的，而且重要的是我会说您到目前为止发布的代码根本上是*错误*的：您需要一个 try/finally。有一个快捷方式，通过一个`using`块。

下一个猜测是，您的一些实际命令最终会相当大，可能涉及大字符串或图像 (byte[]) 数据。在这种情况下，项目最终会出现在称为大对象堆 (LOH) 的特殊垃圾收集器生成中。LOH 很少被收集，几乎从不压缩。将压缩视为类似于对硬盘进行碎片整理时发生的情况。如果您有项目进入 LOH，您最终可能会遇到物理内存本身被释放（收集）但*地址空间*在您的进程中（通常限制为 2GB）不会被释放（压缩）。您的内存地址空间中存在无法回收的漏洞。物理 RAM 可用于您的系统用于其他进程，但随着时间的推移，这仍然会导致您看到的相同类型的 OutOfMemory 异常。大多数时候这无关紧要：大多数 .Net 程序都是短命的面向用户的应用程序，或者是 ASP.Net 应用程序，在这些应用程序中，在提供页面后整个线程都可以被拆除。由于您正在构建一个应该运行数天的服务，因此您必须更加小心。该修复可能涉及对某些代码进行重大修改，以避免创建大对象。这可能意味着一遍又一遍地重复使用单个或一小组字节数组，或者使用流技术而不是字符串连接或字符串构建器来处理非常大的 sql 查询或 sql 查询数据。这也可能意味着您发现这更容易作为每天运行并在一天结束时自行关闭的计划任务或按需调用的程序来完成。

最后的猜测是，你正在做的事情会导致你的连接对象仍然以某种方式可以被你的程序*访问*。事件处理程序是此类错误的常见来源，尽管我会发现在您的连接上使用事件处理程序很奇怪，特别是因为这不是您的示例的一部分。

[¹我想我可以设计一个场景来实现这一点。一种简单的方法是构建一个对象，假定该类型的所有对象都有一个全局集合......对象在构建时将自己添加到集合中，并在处置时将自己移除。这样，在处理之前无法收集对象，因为在此之前它仍然可以访问......但这将是一个非常有缺陷的程序设计。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T14:15:59.910

谢谢大家非常有帮助的答案。

**乔尔**，你是对的。此代码产生“泄漏”，这与我在实际项目中遇到的“泄漏”问题不一定相同，尽管它们重现了相同的症状，即未释放对象的数量不断增加（最终会耗尽内存) 在上面提到的代码上。所以我想知道它有什么问题，因为一切似乎都已正确编码。我不明白为什么不处理/收集它们。但根据分析器，它们仍在内存中，最终将阻止创建新对象。

你对我的“真实”项目的一个猜测一针见血。我意识到我的“catch”块不需要处理对象，现在已经修复了。感谢您的宝贵建议。但是，我在上面示例的代码中实现了“使用”子句，并没有真正解决问题。

**汉斯**，你也是对的。发布问题后，我更改了上面代码中的库以连接到 MySQL。

*旧库（在示例中）：*

```
系统.数据.Odbc
```

*新图书馆：*

```
系统数据
Microsoft.Data.Odbc
```

有了新的，探查器呈现了一条平线，没有对代码进行任何进一步的更改，这是我一直在关注的。所以我的结论和你的一样，那就是旧的可能存在一些内部错误导致这种事情发生，这使他们成为真正的“麻烦制造者”。

现在我记得我最初在我的项目中使用了新的（**System.Data**和**Microsoft.Data.Odbc**），但我很快就改变了旧的（**System.Data.Odbc**) 因为新的不允许打开多个活动记录集 (MARS)。我的应用程序对 MySQL 数据库进行了大量查询，但不幸的是，连接数是有限的。所以我最初以这样一种方式实现了我的真实代码，它只建立了几个连接，但它们在整个代码中共享（将函数之间的连接作为参数传递）。这很棒，因为（例如）我需要检索记录集（假设是客户），并同时进行大量检查（例如，客户至少有一张发票，客户有重复的电子邮件地址等，这涉及到很多边查询）。使用“旧”库，相同的连接允许创建多个命令并执行不同的查询。

“新”库不允许 MARS。每个会话/连接我只能创建一个命令（即执行查询）。如果我需要执行另一个，我需要关闭前一个记录集（这实际上是不可能的，因为我正在迭代它），然后进行新的查询。

我必须在这两个问题之间找到平衡。因此，由于内存问题，我最终使用了“新库”，并且我重新编码了我的应用程序以不共享连接（因此每个过程将在需要时创建一个新的），以及减少应用程序可以连接的数量同时不要耗尽连接池。

该解决方案远非理想，因为它在应用程序中引入了虚假逻辑（理想的情况是迁移到 SQL 服务器），但它给了我更好的结果并且应用程序更加稳定，至少在早期阶段新版本。

再次感谢您的建议，我希望您也会发现地雷也很有用。

干杯。

尼科******

# jquery - 更改 jquery 数据表 aoColumns

> ID：13671552
> 
> 赞同：4
> 
> 时间：2012-12-02T17:04:18.810
> 
> 标签：jquery, datatables

我在 jquery-ui 选项卡中使用 uptil now 3 个数据表。我更喜欢把它们都放在后台，真正使用 3 张桌子。数据来自对象数组中的 ajax（其他演示者也以该格式使用）。

但是，由于表格的数量和类型可能会发生变化，因此应该保持易于维护。

现在的问题是优雅地使用相同的构造函数。我可以将 aoColumns 设置为仅作为参数而不在运行时重新设置它吗？

现在，代码如下所示：

```
tables=$(".dat").dataTable({
    "bJQueryUI": true,
    "bDeferRender": true,
    "bPaginate": false,
    "bProcessing": true,
    "sAjaxSource": "ajaxdataA.json",
    "ssAjaxDataProp" : "data",
     "aoColumns": [{"mData": "col1"}, {"mData": "col2"},{"mData": "col3"}]

}); 
```

我想将其设置为一个数组，然后为各个表使用 sAjaxSource 和 aoDataColumns 的细节。当然，也可以通过存储参数对象并对其进行扩展或使用工厂闭包来实现。我还考虑过使用 AngularJS。

有人有更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T03:33:56.957

我认为你可以使用`aoColumnDef`而不是使用`aoColumns`.

**aoColumnDef**甚至可以读取列中的一些 css 类，以更动态的方式配置 DataTables。

看看它的文档：[http ://www.datatables.net/usage/columns](http://www.datatables.net/usage/columns)

# c++ - “STL”这个词还在使用吗？

> ID：13671570
> 
> 赞同：2
> 
> 时间：2012-12-02T17:05:40.910
> 
> 标签：c++, stl

> **可能重复：**
> [这场 STL 与“C++ 标准库”之争是为了什么？](https://stackoverflow.com/questions/5205491/whats-this-stl-vs-c-standard-library-fight-all-about)

STL 术语仍然有效吗？换句话说，当我谈到 时`std::vector`，它是否被正确地称为标准模板库、C++ 标准库或两者中的东西？

# android - 将 longpress 从一个 android 视图转移到另一个，而不释放手指

> ID：13671572
> 
> 赞同：1
> 
> 时间：2012-12-02T17:05:48.443
> 
> 标签：android, view, gesture

我们在一个按钮上有一个长按检测。检测到时，应关闭视图（返回游戏视图）并且使用按钮选择的对象应位于长按的坐标处。那是容易的部分，困难的部分是然后用手指改变坐标，而不释放它。

好的，所以我正在尝试重新表述这一点：我们有两个视图显示在彼此之上。我们想要的是在顶视图中检测到长按，然后关闭顶视图，并且在不释放手指的情况下，在底视图中获取触摸事件。

这是我们的gameView类：（这段代码包含很多代码unneccesay的问题）

```
@Override
public boolean onTouchEvent(MotionEvent event) {

    gestureDetector.onTouchEvent(event);

    switch (event.getAction() & MotionEvent.ACTION_MASK) {

        case MotionEvent.ACTION_DOWN:
            mode = DRAG;
            //We assign the current X and Y coordinate of the finger to startX and startY minus the previously translated
            //amount for each coordinates This works even when we are translating the first time because the initial
            //values for these two variables is zero.               
            startX = event.getX() - previousTranslateX;
            startY = event.getY() - previousTranslateY;
            break;

        case MotionEvent.ACTION_MOVE:               
            translateX = event.getX() - startX;
            translateY = event.getY() - startY;

            gestureHandler.setTranslation(translateX, translateY);

            //We cannot use startX and startY directly because we have adjusted their values using the previous translation values. 
            //This is why we need to add those values to startX and startY so that we can get the actual coordinates of the finger.
            double distance = Math.sqrt(Math.pow(event.getX() - (startX + previousTranslateX), 2) + 
                                        Math.pow(event.getY() - (startY + previousTranslateY), 2)
                                       );

            if(distance > 0) {
               dragged = true;
            }               

            break;

        case MotionEvent.ACTION_POINTER_DOWN:
            mode = ZOOM;

            scaleToX = event.getX();
            scaleToY = event.getY();
            break;

        case MotionEvent.ACTION_UP:
            mode = NONE;
            dragged = false;

            //All fingers went up, so let's save the value of translateX and translateY into previousTranslateX and 
            //previousTranslate           
            previousTranslateX = translateX;
            previousTranslateY = translateY;

            int x = (int)((-translateX/scaleFactorX)+(event.getX()/this.scaleFactorX));
            int y = (int)((-translateY/scaleFactorY)+(event.getY()/this.scaleFactorY));

            map.click(getContext(), x, y);

            for(CastleTile castleTile : map.getCastleTiles()) {

                if(castleTile.getRect().contains((int)((-translateX/scaleFactorX)+(event.getX()/this.scaleFactorX)), (int)((-translateY/scaleFactorY)+(event.getY()/this.scaleFactorY)))){
                    Log.d("Castle to your service", "Boes");

                    castleSettings.show();
                }
            }
            break;

        case MotionEvent.ACTION_POINTER_UP:
            mode = DRAG;

            //This is not strictly necessary; we save the value of translateX and translateY into previousTranslateX
            //and previousTranslateY when the second finger goes up
            previousTranslateX = translateX;
            previousTranslateY = translateY;
            break;       
    }

    detector.onTouchEvent(event);

    //We redraw the canvas only in the following cases:
    //
    // o The mode is ZOOM 
    //        OR
    // o The mode is DRAG and the scale factor is not equal to 1 (meaning we have zoomed) and dragged is
    //   set to true (meaning the finger has actually moved)
    if ((mode == DRAG && scaleFactorX != 1f && scaleFactorY != 1f && dragged) || mode == ZOOM) {
        invalidate();
    }

    return true;
}

@Override
public boolean onLongClick(View v) {
    castleSettings.dismiss();
    return true;
} 
```

这是手势处理程序：

```
public void onLongPress(MotionEvent event) {
    map.longClick(context, (int)((-translateX/scaleFactorX)+(event.getX()/this.scaleFactorX)), (int)((-translateY/scaleFactorY)+(event.getY()/this.scaleFactorY)));
} 
```

很抱歉最终缺乏信息或解释不好:)

# html - 仅在 div 旁边时上边距

> ID：13671575
> 
> 赞同：1
> 
> 时间：2012-12-02T17:05:53.183
> 
> 标签：html, css, responsive-design

我经常遇到这种情况，但我的自制方法并没有成为一个好的解决方案。

我想做的是在徽标旁边有一个菜单，同时具有响应性。

看起来像这样

```
=======
 logo =
      ==============Menu=======================
=============================================== 
```

我的 html 看起来是这样的

```
<div id="logo">
  <a href="#"><img src=""... /></a>
</div>
<div id="menu">
  <ul>...
  </ul>
</div> 
```

现在我想将菜单放在徽标的底部，但我不知道该怎么做。我可以使用边距，但是，一旦响应性在移动浏览器上启动，然后菜单进入徽标下方，那里也会有很大的边距。

我将如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:15:59.470

尝试使用[响应式设计](/questions/tagged/responsive-design "显示标记为“响应式设计”的问题")框架，例如[zurb-foundation](/questions/tagged/zurb-foundation "显示标记为“zurb-foundation”的问题")，它会很容易地为您提供这个要求。[在其关于Top Bar](http://foundation.zurb.com/docs/navigation.php#topbarEx)的官方文档中查看此示例

# spring - 将 Spring 复选框转换为 Spring 提交按钮

> ID：13671580
> 
> 赞同：0
> 
> 时间：2012-12-02T17:06:16.137
> 
> 标签：spring

下面的 Spring 表单将数据提交到 Spring 控制器并按预期工作。如何将复选框转换为按钮？因此，而不是三个复选框：'isTest1，isTest3，isTest3' 显示三个按钮。这意味着我没有一个提交按钮，而是每个按钮都有三个提交按钮。

这是我目前的表格：

```
<form:form method="post" modelAttribute="searchobj" action="redirect">

    <table>

     <tr>
        <td><form:input path="param" /></td>  
        <td><input type="submit" value="Search"/></td>
    </tr>
    </table>

<table>
    <td>isTest1</td>
    <td><form:checkbox path="isTest1" /></td>

    <td>isTest2</td>
    <td><form:checkbox path="isTest2" /></td>

    <td>isTest3</td>
    <td><form:checkbox path="isTest3" /></td>
    </tr>

</table>  

 </center>

</form:form> 
```

我尝试将表单直接链接到提交按钮，而不是

```
<td><form:checkbox path="isTest1" /></td> 
```

采用

```
<td><input type="submit" value="isTest1"/></td> 
```

但我不知道如何访问控制器中的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:17:28.687

我用了 ：

```
 <form:input type="submit" path="myPath" value="Tester"/> 
```

# java - 显示索引数组

> ID：13671586
> 
> 赞同：0
> 
> 时间：2012-12-02T17:06:31.607
> 
> 标签：java, arrays

我有个问题。我正在尝试在数组中显示最大值的索引。我能够获得最大值；但是，我不知道要显示该最大值的索引。

例如，如果 index [3] 的值为 5 并且是数组中的最大元素，它将打印：

value[3] = 5 是最大的元素

我怎么做？

```
 import java.util.Scanner;

    public class ArrayExample 
    {
            public static void main(String[] args) 
        {
            //Question 1
            int values[] = new int[5] ;
            System.out.println("Please enter 5 values for this array: ");
            Scanner keyboard = new Scanner(System.in);

              System.out.println("Maximum Value = " + getMaxIndex(values) + getMaxValue(values));  
        }

        public static int getMaxValue(int[] values){  
            int maxValue = values[0];  
            for(int i=0;i<values.length;i++){  
                if(values[i] > maxValue){  
                    maxValue = values[i];  
            }  
            }  
        return maxValue;  
    } 
    public static int getHighestMonth(int[] values) {
            int highest = 0;
            for (int i = 0; i < 5; i++) {
                if (values[i] > values[highest]) {
                    highest = i;
                }
            }
            return highest;
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:09:23.783

希望下面的代码可以帮助你

```
public static int getMaxIndex(int[] values) {
    int maxValue = values[0];
    int maxIndex = 0;
    for (int i = 0; i < values.length; i++) {
        if (values[i] > maxValue) {
            maxValue = values[i];
            maxIndex = i;
        }
    }
    return maxIndex;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T17:10:28.293

您创建一个名为 position 的实例变量：

```
public class ArrayExample 
    {
    private static int position = 0;
     ...

    } 
```

在您的 getMaxValue 中，您还可以将位置与 maxValue 一起保存：

```
 public static int getMaxValue(int[] values){  
        int maxValue = values[0];  
        for(int i=0;i<values.length;i++){  
            if(values[i] > maxValue){  
                maxValue = values[i]; 
                position = i;
        }  
        }  
    return maxValue;  
} 
```

然后你在外面打印它：

```
System.out.println("Maximum Value = " + getMaxIndex(values) + "in position" + position); 
```

或者另一种方法是返回位置而不是 maxValue：

```
public static int getMaxValue(int[] values){  
            int maxValue = values[0];  
            int position = 0;
            for(int i=0;i<values.length;i++){  
                if(values[i] > maxValue){  
                    maxValue = values[i]; 
                    position = i;
            }  
            }  
        return position;  
    } 
```

在你之外：

```
int position = getMaxIndex(values);
System.out.println("Maximum Value = " + values[position] + "in position" + position); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T17:12:23.957

你可以使用`AbstractMap.SimpleEntry`：

```
public static SimpleEntry<Integer, Integer> getMaxValue(int[] values){  
    int maxValue = Integer.MIN_VALUE;
    int maxIndex = -1;
    for(int i=0;i<values.length;i++){  
        if(values[i] >= maxValue){  
            maxValue = values[i];
            maxIndex = i;
        }  
    }
    return new SimpleEntry<Integer, Integer>( maxIndex, maxValue);
}

public static void main(String[] args) {
    SimpleEntry<Integer, Integer> maxEntry = getMaxValue( new int[]{1,2,3});

    System.out.println( "value["+ maxEntry.getKey() + "] = " + maxEntry.getValue() + " is the largest element");
    //value[2] = 3 is the largest element

} 
```

# eclipse - google app engine eclipse 安装失败

> ID：13671593
> 
> 赞同：0
> 
> 时间：2012-12-02T17:07:07.097
> 
> 标签：eclipse, google-app-engine, google-plugin-eclipse

我的电脑上有 Eclipse Juno 和 Helios。我已经尝试在他们两个上安装适用于 Eclipse 的 Google AppEngine 插件，但总是失败。我在网上看到帖子说谷歌已经确认最新一期有问题，v3.2 将被更正。有什么方法可以安装一个可以与我的任何一个 Eclipse 安装一起运行的版本，并且有人听说过 v3.2 何时发布吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:53:32.113

可以在juno上安装gpe，我已经用了一段时间了，昨晚刚刚更新到3.1.2

]$ uname -a Linux Device-7DB829 3.6.7-1-ARCH #1 SMP PREEMPT Sun Nov 18 10:11:22 CET 2012 x86_64 GNU/Linux

]$ ./java -version java version "1.6.0_25" Java(TM) SE Runtime Environment (build 1.6.0_25-b06) Java HotSpot(TM) 64-Bit Server VM (build 20.0-b11,混合模式)

适用于 Java EE 开发人员的 Eclipse IDE 1.5.1.20121004-1506 Eclipse 平台 4.2.1.M20120914-1800 Java EE IDE 功能 1.5.1.20121004-1506 Google App Engine Java SDK 1.7.3 1.7.3
Google Plugin for Eclipse 4.2 3.1.2.v201211121240 -rel-r42

祝你好运

# android - 当没有输入数据时，程序会因数据而崩溃，这很好（android）

> ID：13671598
> 
> 赞同：1
> 
> 时间：2012-12-02T17:07:34.467
> 
> 标签：android, android-edittext

我遇到的问题是，当我根本没有输入任何数据，或者如果其中一个输入框中只有数据时程序崩溃，但是如果两个框中都有任何数据，程序工作正常，那么我该如何阻止它如果没有输入，则发送数据。错误说它可以解析双值“”

```
 calculate.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            distanceTraveled = Double.parseDouble(distance.getText().toString());
            fuelUsed = Double.parseDouble(fuel.getText().toString());
            part1 = fuelUsed / 4.55;
            mpg = distanceTraveled / part1;
            total.setText(String.format("%.2f", mpg));
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:12:21.697

在进行计算之前将 EditView 更改为空或 null：

```
alculate.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
          if(distance.getText().toString().length() > 0){

            distanceTraveled = Double.parseDouble(distance.getText().toString());
        }
        else{
              distanceTraveled=0; // put default value here
          }
        if(fuel.getText().toString().length() > 0){  
               fuelUsed = Double.parseDouble(fuel.getText().toString());
          }
          else{
               fuelUsed=0;// put default value here

           }
            part1 = fuelUsed / 4.55;
            mpg = distanceTraveled / part1;
            total.setText(String.format("%.2f", mpg));
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T17:12:02.457

在尝试从输入字段中检索值之前，请检查它们是否为空：

```
if (distance.getText() != null && fuel.getText() != null ) {
    distanceTraveled = Double.parseDouble(distance.getText().toString());
    fuelUsed = Double.parseDouble(fuel.getText().toString());
    part1 = fuelUsed / 4.55;
    mpg = distanceTraveled / part1;
    total.setText(String.format("%.2f", mpg));
} else {
    // You can display a message here for example Toast message that fields cannnot be empty
{ 
```

# c - 如何从 HTTP GET 请求中获取文件名

> ID：13671599
> 
> 赞同：1
> 
> 时间：2012-12-02T17:07:41.350
> 
> 标签：c, http, get

我正在尝试向[Axel](http://axel.alioth.debian.org/)添加修改以获得正确的文件名，这应该用 C 语言完成。

目前，诸如[https://put.io/v2/files/49667352/download?token=851a95c6230211e2a896003048fa303a](https://put.io/v2/files/49667352/download?token=851a95c6230211e2a896003048fa303a)之类的链接将保存在文件名 49667352 下

但是，当从网络浏览器或 IDM 等下载管理器下载时，它会在第一个 Get 请求后捕获从服务器发送的文件名，例如 movie.mp4。如何使用 C 语言添加该实现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T17:14:15.050

在来自服务器的响应中，有一个名为[`Content-Disposition`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Disposition). 此标头的值包含有关正在下载的文件的一些信息。因此，您可以在此标头中找到文件名。

此标头的示例：

```
Content-Disposition : attachment; filename="movie.mp4" 
```

# java - 播放框架 inputDate 表单

> ID：13671602
> 
> 赞同：2
> 
> 时间：2012-12-02T17:07:55.520
> 
> 标签：java, playframework-2.0

我在模型类中指定了一个日期变量：

```
@Required
public Date date; 
```

我在我的表单中使用它填充`@inputDate(journeyForm("date"), '_label -> "Date*")`它，它就像一个下拉日历一样显示。当我显示数据条目时，日期显示如下`Thu Jan 03 00:00:00 GMT 2013`。我的问题是如何修改此表格中记录的时间？我查看了 html 助手的播放框架 api 文档，但没有 inputTime。任何建议表示赞赏。

理想情况下，我会有一个单独的时间变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:42:30.563

当您使用 时`inputDate helper`，您将构建一个`input type="date"`字段。在某些浏览器中，您有一个下拉帮助程序（例如在 Chrome 中）。下拉日历给你一个`date`不是`datetime`对象。

但是您的对象`Date date`也包含时间信息。由于您只给它日期信息，因此将使用空时间信息构造该对象。你将不得不找到另一种方法来做到这一点。您可以使用具有 timepicker 功能的 jQuery 插件。这是[在 Google 上](http://www.jquery4u.com/plugins/10-jquery-time-picker-plugins/)搜索 jQuery Timepicker 时的第一个结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T11:37:50.240

对于日期/时间：

```
@inputText(
    yourForm(fieldNAme),
    '_label -> "label",
    'type -> "datetime-local"
) 
```

仅限时间：

```
@inputText(
    yourForm(fieldNAme),
    '_label -> "label",
    'type -> "time"
) 
```

# git - 当 git fetch 命令被中断时，提取的文件会发生什么

> ID：13671606
> 
> 赞同：2
> 
> 时间：2012-12-02T17:08:25.683
> 
> 标签：git

我正在学习如何使用 git，我想知道在 git fetch 命令因电源故障或连接问题而中断之前获取的文件会变成什么。在中断之前获取的文件会被复制到我的计算机吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T17:11:53.407

A`git fetch`将从远程存储库传输对象。为了维护 Git 的完整性，只有完整的对象才会写入本地存储库。因此，如果提取中断，您将得到部分对象，这意味着提取未完成，但没有单个对象会损坏。在随后的提取中，Git 将再次计算丢失的对象并获取这些对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T19:12:06.023

当 git fetch 开始接收对象时，它会在存储库的目录中创建一个临时文件 `objects/pack`来保存新对象。只有在获取完成后，该临时文件才会被重命名为其他 git 进程将遵循的名称。如果提取被中断，该临时文件将大部分被忽略，包括另一个提取；因此，在中断之前传输的任何内容都将再次传输。

及时（默认为 2 周）临时包文件将有资格被垃圾收集过程删除。您可以通过运行来强制执行此操作`git gc --prune=now`。

# javascript - 窗口卸载事件的本地存储

> ID：13671613
> 
> 赞同：7
> 
> 时间：2012-12-02T17:09:10.190
> 
> 标签：javascript, local-storage

我正在使用本地存储来存储一些数据：用户发出 ajax 请求以获取信息，我将结果存储在存储中，以便下次他请求相同的信息时，我首先查看存储是否存在。

现在我意识到将数据保存在内存中的对象中实际上更有效，并在需要时循环，而不是循环本地存储。因此，当我将一些数据从本地存储移动到内存对象时，我想知道是否可以**可靠地**使用 window.unload 事件将该缓存对象的内容写入磁盘上的本地存储，然后检索它使用 onload 事件返回？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:12:09.990

`window.unload`在许多情况下可能不会被调用，例如，如果用户关闭选项卡或浏览器崩溃。为什么不定期将数据保存到 localStorage 以防万一？

# c - C中的二项式系数

> ID：13671614
> 
> 赞同：-1
> 
> 时间：2012-12-02T17:09:10.850
> 
> 标签：c

**在这里您可以找到我要解决的问题：**

对于整数 n 和 k (0<=k<=n<1001) 确定 (二项式系数)。

输入

标准输入的第一行包含一个整数 t (t<1001)，它是测试用例的数量。

在接下来的 t 行中的每一行中都有数字 n 和 k。

输出

对于每个测试打印（二项式系数）。

例子：

```
Input
3
0 0
7 3
1000 2
Output:
1
35
499500 
```

我似乎在我的解决方案中找不到任何问题（除了写得非常糟糕 - 我最近才开始编程）：

```
#include <stdio.h>

int main()
{
    unsigned long int t,n,k,binomial=1;
    unsigned long int number=1;

    for(scanf("%lu",&t);t>0;t--)
    {
        scanf("%lu%lu",&n,&k);
        if(k<(n/2)) k=n-k;
        for(binomial=1,number=1;n>k;k++)
        {
            binomial=binomial*(k+1)/number;
            number++;
        }
        printf("%lu\n",binomial);
    }

    return 0;
} 
```

它适用于示例输入，但解决方案是通过问题站点判断的

(http://www.spoj.pl/SHORTEN/problems/BINOMIAL/english/)

并且该解决方案不被接受。我也尝试了其他输入，所有输入都返回了正确的输出。我的问题是：这个解决方案无效是否有原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:24:14.280

由于 1000C500 大约为 300 位，因此不能以无符号长整数形式存储。简而言之，您需要重新开始并想出更好的技术。

# c - c中的阻塞进程

> ID：13671628
> 
> 赞同：1
> 
> 时间：2012-12-02T17:11:07.820
> 
> 标签：c, linux, operating-system

我正在编写一些代码来创建一个被阻塞然后结束的进程，我必须能够用 ps 查看阻塞状态。

我试过这个，但我的 C 知识不好。该代码不打印任何内容。

这里是：

```
#include <stdio.h>
#include <stdlib.h> //exit();
#include <unistd.h> //sleep();

int main(int argc, char *argv[]) {
    createblocked();
}

int pid;
int i;
int estado;

void createblocked() {
   pid = fork();

   switch( pid ) {
      case -1: // pid -1 error ocurred
         perror("error\n");
      break;
      case 0: // pid 0 means its the child process
         sleep(); // we put the child to sleep so the parent will be blocked.
         printf("child sleeping...");
      break;
      default: // !=0 parent process
         // wait function puts parent to wait for the child
         // the child is sleeping so the parent will be blocked 
         wait( estado );
         printf("parent waiting...\n");
         printf("Child terminated.\n");
         break;
   }
   exit(0);
} 
```

这应该很容易，因为它只是一个被阻止的小程序，但我认为我是在绕圈子走。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T17:27:31.683

[sleep()](http://linux.die.net/man/3/sleep)有一个参数：睡眠的秒数。当你省略它时，它往往会立即返回。

[wait()](http://linux.die.net/man/3/wait)也需要一个`int *`，而不是一个`int`。

试试这个：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

int main(int argc, char *argv[]) {
    createblocked();
}

int pid;
int i;
int estado;

void createblocked() {
    pid = fork();

    switch(pid)
    {
        case -1: // pid -1 error ocurred
            perror("error\n");
            break;
        case 0: // pid 0 means its the child process
            printf("child sleeping...\n");
            sleep(500); // we put the child to sleep so the parent will be blocked.
            break;
        default: // !=0 parent process
            // wait function puts parent to wait for the child
            // thechild is sleeping so the parent will be blocked 
            printf("parent waiting...\n");
            wait(&estado);
            printf("Child terminated.\n");
            break;

    }
    exit(0);
} 
```

注意：我还将`printf("parent waiting...\n")` *上述*调用移至`wait()`，因此您应该在父阻塞等待子之前看到它。

编辑：另外，包括`<unistd.h>`. 虽然不是严格要求程序工作（在大多数系统上），但这样做可以为您提供更好的编译时错误报告，例如丢失和/或错误类型的函数参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T17:24:11.223

男人[睡觉](http://www.manpagez.com/man/3/Sleep/)

男人[等等](http://linux.die.net/man/2/wait)

您应该将秒数作为`sleep()`.

对于`wait`并`sleep`包括`<unistd.h>`

# javascript - jsSHA、CryptoJS 和 OpenSSL 库给出不同的结果

> ID：13671632
> 
> 赞同：5
> 
> 时间：2012-12-02T17:11:50.910
> 
> 标签：javascript, cryptography, sha1, hmac

JS 新手，我也在学习使用加密库。我不明白为什么用相同的秘密对相同的消息进行签名/编码会产生不同的结果。

我正在使用[在这里找到的 jsSHA 1.3.1，这里](http://caligatio.github.com/jsSHA/)描述的[CryptoJS 3.0.2](http://code.google.com/p/crypto-js/)试图创建一个 base64 sha-1 编码的 hmac 签名。这是代码：

在 html...

```
<script src="lib/jsSHA/src/sha1.js"></script>
<script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/rollups/hmac-sha1.js"></script> 
```

在js中...

```
var message = "shah me";
var secret = "hide me";
var crypto = CryptoJS.HmacSHA1(message, secret).toString(CryptoJS.enc.Base64) + '=';

var shaObj = new jsSHA(message, "ASCII");
var jssha = shaObj.getHMAC(secret, "ASCII", "B64") + '=';

return  "crypto answer is " + crypto + " jssha answer is " + jssha; 
```

你能帮我解释为什么这些结果不同吗？

> 加密答案是 3e929e69920fb7d423f816bfcd6654484f1f6d56= jssha 答案是 PpKeaZIPt9Qj+Ba/zWZUSE8fbVY=

更重要的是，这两者都与我在rails中生成的签名不同，就像这样......

```
digest  = OpenSSL::Digest::Digest.new('sha1')
raw_signature = OpenSSL::HMAC.digest(digest, "hide me","shah me")
b64_signature = Base64.encode64(raw_signature).strip 
```

（本来想提供一个小提琴，这似乎是一种非常好的常见做法，但这对我来说也是新的，我无法让一个人为这个问题工作）。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T17:59:42.793

您的代码中有 3 个错误:)

你错过了`enc-base64-min.js`for `crypto-js`。没有它，`CryptoJS.enc.Base64`将是`undefined`
您在调用时缺少参数`.getHMAC()`。It's `.getHMAC(secret, secret_type, hash_type, output_encoding)`
With 1+2 添加 a`=`是没有必要的（也不是正确的）

```
<script src="lib/jsSHA/src/sha1.js"></script>  
<script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/rollups/hmac-sha1.js"></script>  
<script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/components/enc-base64-min.js"></script>  

var message = "shah me";
var secret = "hide me";
var crypto = CryptoJS.HmacSHA1(message, secret).toString(CryptoJS.enc.Base64);
var shaObj = new jsSHA(message, "ASCII");
var jssha = shaObj.getHMAC(secret, "ASCII", "SHA-1", "B64");

return  "crypto answer is " + crypto + " jssha answer is " + jssha; 
```

[例子](http://jsfiddle.net/29b6q/)

# python - 用于在文件夹中查找文件的 Bash 脚本

> ID：13671634
> 
> 赞同：1
> 
> 时间：2012-12-02T17:11:56.277
> 
> 标签：python, bash, shell

我有几个文件夹

```
Main/  
   /a  
   /b  
   /c    
 .. 
```

我必须将输入文件`abc1.txt`，`abc2.txt`从这些文件夹中的每一个分别作为输入文件传递给我的 python 程序。现在的剧本是，

```
for i in `cat file.list`
do
echo $i
cd $i
#works on the assumption that there is only one .txt file
inputfile=`ls | grep .txt`
echo $inputfile
python2.7 ../getDOC.py $inputfile
sleep 10
cd ..
done
echo "Script executed successfully" 
```

因此，无论 .txt 文件的数量如何，我都希望脚本能够正常工作。

任何人都可以让我知道 shell 中是否有任何内置命令来获取正确的 .txt 文件，以防多个 .txt 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T17:18:55.383

该`find`命令非常适合`-exec`：

```
find /path/to/Main -type f -name "*.txt" -exec python2.7 ../getDOC.py {} \; -exec sleep 10 \; 
```

**解释：**

*   `find`- 调用`find`
*   `/path/to/Main`- 开始搜索的目录。默认情况下`find`递归搜索。
*   `-type f`- 只考虑文件（而不是目录等）
*   `-name "*.txt"`- 只找到带有`.txt`扩展名的文件。这是引用的，因此 bash 不会`*`通过通配符自动扩展通配符。
*   `-exec ... \;`- 对于找到的每个此类结果，对其运行以下命令：
*   `python2.7 ../getDOC.py {};`- 该`{}`部分是`find`每次替换搜索结果的位置。
*   `sleep 10`- 每次在文件上运行 python 脚本后休眠 10 秒。如果您不想让它睡觉，请将其删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T17:18:12.140

更好地使用[glob](http://mywiki.wooledge.org/glob)：

```
shopt -s globstar nullglob
for i in Main/**/*txt; do
    python2.7 ../getDOC.py "$i"
    sleep 10
done 
```

这个例子是递归的，需要[bash4](/questions/tagged/bash4 "显示标记为“bash4”的问题")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T17:15:39.847

```
find . -name *.txt | xargs python2.7 ../getDOC.py 
```

# filesystems - 如何遍历FAT目录，文件

> ID：13671635
> 
> 赞同：2
> 
> 时间：2012-12-02T17:11:58.400
> 
> 标签：filesystems, fat, fat16

我试图了解 FAT 文件系统是如何工作的。从附加的 FAT 16 分区的第一个扇区我可以理解，

1.  每个扇区的字节数 = 512。
2.  每个集群的扇区 = 4。
3.  FAT 16 文件系统。
4.  保留扇区 = 4。
5.  FAT 表计数 = 2。
6.  根目录中的条目数 = 512。
7.  总扇区 = 204800。
8.  根目录扇区 = 32。
9.  FAT 表的大小 = 200。
10.  第一个数据扇区 = 436 (4 + 2 * 200 + 32)。
11.  集群计数 = 51091。

![FAT分区的第一个扇区](../Images/89d677777bb935ebac5133ef96bced9c.png)

根目录位于第 404 个扇区（第 0x32800 个字节）

![根目录](../Images/cd8e1a0458eaf97e4f004ebd503975c1.png)

附加地址 0x32800 的根目录。根目录有两个文件夹a、b 和一个文件file.txt。在上面的给定图像中，如何区分文件和文件夹。

下面列出的疑问： 1\. 文件夹条目应该以 0x2E 开头，但没有这样的值。那么如何判断给定条目是文件还是文件夹呢？2\. 如您所见，根目录中的每个条目占用 64 个字节（而不是 32 个字节）。每个文件和文件夹似乎有 2 个 32 字节的条目。例如，文件夹“a”的条目位于 0x32800 和 0x32820（共 64 字节）。3\. 在这种情况下，值 0x41 表示什么？值 0x41 出现在 0x32800、0x32820、0x32840、0x32880。0x32860 和 0x328A0 处的值与 0x41 不同。4\. 从地址 0x32800 (0x32800 + 0x1a = 0x3281a) 的偏移量 0x1A 的值为 0，从地址 0x32820 (0x32820 + 0x1a = 0x3283a) 的偏移量 0x1A 的值为 3\. 对应于文件夹 'a' 的正确簇号是哪个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T21:53:41.103

不，文件夹条目不以“。”开头。(0x2E) 除非它们用于 . 和 .. 子目录的条目（这些不在根目录中）。如果dirent 是目录，则dirent 的属性字节设置为0x10 位。

您还在查看具有长文件名的目录。最初的 FAT 文件系统规范只允许 11 个字符的名称全部为大写并且在 OEM 代码页中。Windows 95 对此进行了扩展。在 stackoverflow 上解释它是如何工作的非常复杂。我建议查看 LFN 或长文件名的 MSDN 文档。

[http://technet.microsoft.com/en-us/library/cc938438.aspx](http://technet.microsoft.com/en-us/library/cc938438.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T16:22:16.507

FAT** 文件系统将所有文件保存为一个基本大小，除非文件大于该大小，然后它会重新调整大小以容纳整个文件

但这里的要点是，如果您有分配的磁盘空间，FAT 文件系统主要是好的，否则如果可能的话，我会推荐使用 NTFS 文件系统。您显示的图像也看起来像软盘驱动器的注册表代码

# python - 如何使列表成为列表中的列表

> ID：13671641
> 
> 赞同：0
> 
> 时间：2012-12-02T17:12:18.477
> 
> 标签：python, list, python-3.x

我有一个从函数输出的列表。

```
a = ['NO YES NO NO', 'YES YES NO YES', 'NO NO YES NO', ] 
```

我希望它为另一个函数更改为这样的输入。

```
a = [['YES', 'YES', 'NO', 'YES'],
['YES', 'NO', 'NO', 'YES'],
['NO', 'YES', 'NO', 'YES']] 
```

忽略它们是不同的元素。我将如何在 Python 3.2 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T17:53:42.017

```
>>> a = ['NO YES NO NO', 'YES YES NO YES', 'NO NO YES NO', ]
>>> [s.split() for s in a]
[['NO', 'YES', 'NO', 'NO'], ['YES', 'YES', 'NO', 'YES'], ['NO', 'NO', 'YES', 'NO']] 
```

# ios - IOS静态调试符号含义

> ID：13671647
> 
> 赞同：3
> 
> 时间：2012-12-02T17:12:48.760
> 
> 标签：ios, multithreading, debugging, core-data, debug-symbols

我收到了这个错误，我无法弄清楚它到底发生在哪里。

这是堆栈跟踪：

```
0 CoreFoundation 0x382952a3 __exceptionPreprocess + 163
1 libobjc.A.dylib 0x3358d97f objc_exception_throw + 31
2 CoreData 0x398fe0cf -[NSComparisonPredicate(_NSCoreDataSQLPredicateCategories) minimalFormInContext:] + 371
3 CoreData 0x399097af -[NSCompoundPredicateOperator(_NSCoreDataSQLPredicateCategories) minimalFormInContext:ofPredicates:] + 727
4 CoreData 0x398fd917 -[NSSQLGenerator initializeContextForFetchRequest:ignoreInheritance:nestingLevel:] + 539
5 CoreData 0x398fd3b3 -[NSSQLGenerator newSQLStatementForFetchRequest:ignoreInheritance:countOnly:nestingLevel:] + 39
6 CoreData 0x398fd2bd -[NSSQLAdapter _newSelectStatementWithFetchRequest:ignoreInheritance:] + 509
7 CoreData 0x398fced5 -[NSSQLCore newRowsForFetchPlan:] + 117
8 CoreData 0x398fc64f -[NSSQLCore objectsForFetchRequest:inContext:] + 683
9 CoreData 0x398fc119 -[NSSQLCore executeRequest:withContext:error:] + 469
10 CoreData 0x398fb531 -[NSPersistentStoreCoordinator executeRequest:withContext:error:] + 1645
11 CoreData 0x398f9e2b -[NSManagedObjectContext executeFetchRequest:error:] + 647
12 CoreData 0x3996293f -[NSManagedObjectContext(_NestedContextSupport) _parentObjectsForFetchRequest:inContext:error:] + 399
13 CoreData 0x399630c9 __82-[NSManagedObjectContext(_NestedContextSupport) executeRequest:withContext:error:]_block_invoke_0 + 565
14 libdispatch.dylib 0x36eb2621 _dispatch_barrier_sync_f_slow_invoke + 81
15 libdispatch.dylib 0x36ea34b7 _dispatch_client_callout + 23
16 libdispatch.dylib 0x36ea4dcb _dispatch_main_queue_callback_4CF$VARIANT$up + 227
17 CoreFoundation 0x38268f3b __CFRunLoopRun + 1291
18 CoreFoundation 0x381dbebd CFRunLoopRunSpecific + 357
19 CoreFoundation 0x381dbd49 CFRunLoopRunInMode + 105
20 GraphicsServices 0x36f532eb GSEventRunModal + 75
21 UIKit 0x3a3882f9 UIApplicationMain + 1121
22 Sticky Free 0x000ac67b _mh_execute_header + 13947
23 Sticky Free 0x000ab1e0 _mh_execute_header + 8672

And here is the main error.
Invalid predicate: nil RHS 
```

我在进行提取时从 NSPredicate 知道它。但是，我不确定是哪条线导致了它。我正在使用多线程 coredata 环境。

这个问题是非常间歇性的，大约在 10 个会话中出现一次。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T19:29:16.090

正如其他人所说：一定要设置一个符号断点`objc_exception_throw`，看看你的哪一个`executeFetchRequest`会触发错误。从`executeFetchRequest`滚动到您定义谓词的行。

`RHS`倾向于代表右手边。假设您正在设置谓词：

`[NSPredicate predicateWithFormat:@"%K = %@", attribute, value];`

然后`RHS`会`value`。确保`value`不是`nil`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T02:51:36.300

我发现，我在退出时立即保存了主要上下文。所以，如果我不保存退出时的主上下文，我不会得到这个看起来很奇怪的崩溃。

# d3.js - mySQL 和 D3.js

> ID：13671648
> 
> 赞同：-3
> 
> 时间：2012-12-02T17:13:09.260
> 
> 标签：d3.js

我对 D3 很陌生，我不确定如何从 mySQL 数据库中读取数据以获取基本折线图[http://bl.ocks.org/5fc4cd5f41a6ddf2df23](http://bl.ocks.org/5fc4cd5f41a6ddf2df23) 目前只是从数组中读取数据以便设置最初的图表。

我已阅读此[http://www.jeromecukier.net/blog/2012/01/02/using-d3-with-a-mysql-database/](http://www.jeromecukier.net/blog/2012/01/02/using-d3-with-a-mysql-database/) 但不清楚如何为我的图表调整它，如果这样做是最好的方法吗？

理想情况下，希望尽可能简单地完成这项工作，以便在我尝试更复杂的事情之前了解它 - 任何帮助将不胜感激？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:27:29.300

我建议使用[json_decode()](http://php.net/manual/en/function.json-decode.php)将数组（从 mysql 请求中获得）从 PHP 转换为 JSON，并在 jQuery 的帮助下使用[$.ajax](http://api.jquery.com/jQuery.ajax/)请求提取实际数据。

```
var json_data;
var req = $.ajax({
  url: "getDataWithMysql.php", 
  success: function(data){
    json_data = JSON.parse(data);
  }
  error: function(err, f){
    console.log(err);
  }
});

$.when(req).done(function(){
  /*do the drawing with the json_data*/
}); 
```

然后您可以使用 JSON 数据绘制 D3 可视化。

**PS：如果你不熟悉 D3，你应该看到这个[http://alignedleft.com/tutorials/d3/](http://alignedleft.com/tutorials/d3/)。**

**PPS： JSON.parse() 仅适用于[JSON2.js](https://github.com/douglascrockford/JSON-js)库。**

# php - PHP爆炸，从搜索引擎中获取URL

> ID：13671650
> 
> 赞同：0
> 
> 时间：2012-12-02T17:13:20.053
> 
> 标签：php, url, explode, web-crawler

我目前有一个脚本可以抓取 yahoo 等以提取链接。它正在工作但是我试图爆炸并摆脱链接和/最后的http：//（任何东西之后/以及）。

```
if ($href->getAttribute('class') == 'yschttl spt') {
                $link = explode('?', urldecode(array_pop(explode('**', $href->getAttribute('href')))));
                $urls[] = $link[0];
            } 
```

我以前没有真正使用过explode，所以我只是以某种方式删除了整条线。上面的示例返回所有 url：

[http://finance.yahoo.com/q](http://finance.yahoo.com/q)

例如。但是我需要它返回：

财务.yahoo.com

我正在使用来自[http://aroussi.com/freebies/scraper/dl/fus1.zip的代码](http://aroussi.com/freebies/scraper/dl/fus1.zip)

# android - 动态变化的图片导致 Chromium 错误

> ID：13671651
> 
> 赞同：0
> 
> 时间：2012-12-02T17:13:26.277
> 
> 标签：android, jquery, cordova, jquery-mobile, webkit

我正在为手机应用程序使用jQuery+jQuery Mobile+Cordova，需要动态更改图片。当然这不是挑战，我只是使用

```
$('myElement').attr('src', 'img/myImage' + someIndex + '.png'); 
```

但是每当执行此操作时，我都会`Unknown Chromium Error: -6`在我的 LogCat 中得到一个。图像仍然显示得很好，但我想知道这是从哪里来的？注释掉这一行会使错误消失，所以它必须是这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T18:39:35.260

该`Unknown Chromium Error: -6`错误很可能是由于 URL 格式错误而发生的。

您可以尝试将代码更改为：

```
$('#myElement').attr('src', 'file:///android_asset/img/myImage' + someIndex + '.png'); 
```

前缀`file:///android_asset/`可用于从当前应用程序的资产文件夹加载内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:02:46.210

我只是碰巧意识到问题所在。例如，我正在展示`n`图像，但我只展示`k < n`了它们（即总共 5 个中的 3 个）。未意外显示的图像被设置为不存在的图像，从而导致错误。由于它们没有被显示，因此没有明显的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T22:28:59.443

有同样的问题。但无法在任何一个给定的答案上找到解决方案。

对我来说，每次我需要替换图像时，我都需要替换 html。粗略地说，我的代码如下所示：

```
function updateImage(src) {
    $('#src_parent_div').html("<img src='" + src + "' />");
} 
```

# .net - 检索 Blob 存储帐户时出现空值异常

> ID：13671654
> 
> 赞同：0
> 
> 时间：2012-12-02T17:14:15.907
> 
> 标签：.net, azure, blob

在我的程序中，我有多个点连接到 Blob 存储以读取/写入文件。他们都工作正常。但是，在另一个函数但与另一个 Blob 存储引用所在的类相同的函数中，我从以下代码行中收到一个 ArgumentNullException 声明“值不能为空”：

```
CloudStorageAccount account = CloudStorageAccount.Parse(CloudConfigurationManager.GetSetting("StorageConnectionString")); 
```

我知道 StorageConnectionString 配置正确，因为当我使用此函数删除代码行时，同一行代码可以在其他函数中使用。谁能提供一些关于为什么这个功能会导致问题的见解，而不是其他功能？

不确定这是否有用，但这是我正在使用的 4 行代码。这是相当标准的。

```
CloudStorageAccount account = CloudStorageAccount.Parse(CloudConfigurationManager.GetSetting("StorageConnectionString"));
CloudBlobClient client = account.CreateCloudBlobClient();
CloudBlobContainer container = client.GetContainerReference(CONTAINER);
CloudBlockBlob blob = container.GetBlockBlobReference(FilePath(null, imageId)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:00:16.760

根据您的评论，这可能与您将连接字符串存储在 web.config 中的事实有关。在某些情况下，您的代码可能看起来在同一个进程中运行，但实际上并非如此。以**WebRole.cs/WorkerRole.cs**类为例。简而言之，这些类中的代码将在不同的进程中运行，这意味着它们无法访问您的 web.config。例如，WebRole.cs 将从**WaIISHost.exe.config**文件中读取其设置。

您能否从 web.config 中删除连接字符串并将其添加到服务配置中？您不需要修改代码，因为它`CloudConfigurationManager`会首先查看服务配置，如果在此处找不到设置，它将回退到 web/app.config

![在此处输入图像描述](../Images/95eb591a15e7a9a74f5e8ac989b4270b.png)

**注意：**在这个答案中，我假设您使用的是 Web 角色而不是网站。

# dojo - 如何在 dojo 1.8 中以编程方式为 InlineEditBox 添加工具提示

> ID：13671655
> 
> 赞同：0
> 
> 时间：2012-12-02T17:14:18.767
> 
> 标签：dojo, tooltip, inlineeditbox

我正在使用 dojo 1.8.1 并有两个内联编辑器，一个用于 Textarea，一个用于编辑器。我想提供天桥技巧来帮助解释应该如何使用它们。理想情况下，如果没有内容，我想为内联编辑器的 textarea / 编辑器提供一个提示，并在他们单击以编辑丢失的内容时消失（带有作家图标的下划线对我没有帮助 - - 如果我可以替换那个跨度也可以）。但是，作为开始，在将鼠标悬停在入口区域上时显示工具提示会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:35:31.573

InlineEditBox 的构造函数中有一个名为 noValueIndicator 的参数，当没有提供内容时，您可以在其中放置内容提示，并在编辑器具有输入焦点时消失。太简单了——马，不是斑马……

# unit-testing - 在 node.js 中的单元测试中存根依赖项

> ID：13671657
> 
> 赞同：1
> 
> 时间：2012-12-02T17:14:28.027
> 
> 标签：unit-testing, node.js, mocking, mocha.js, stub

我从 node.js 单元测试开始，我一直在研究 node.js 中最常用的单元测试框架。我想从最常用的框架开始，只是为了让事情变得更容易，因为可能有更多关于它的信息。根据许多可能是摩卡的网站。

虽然我了解这个模块用于进行集成测试，但我真的不知道如何通过使用诸如存根依赖项之类的功能来使用它。我见过 mocha 不提供模拟/存根功能，所以我真的不知道人们通常如何处理这些问题。

所以我想知道现在哪些模块最流行用于进行单元测试，存根依赖项......一个简短的例子会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:32:06.690

The current suite of modules combined together in many node.js projects seems to be:

*   [Mocha](http://visionmedia.github.com/mocha/) for the actual test harness itself
*   [Chai](http://chaijs.com/) for assertions
*   [Sinon](http://sinonjs.org/) for mocking/stubbing

All of these work both in node.js as well as the browser, which is important to many people including myself. There are many choices available as you might expect, although when it comes to mocking and stubbing I believe Sinon is clearly the current popular choice.

Here's a small example in coffeescript that uses all of these libraries. It tests that when you fill in the sign in form and submit it, your info is passed to the API properly.

```
describe "UserSignInView.signIn", ->
  it "should submit the user credentials", ->
    sinon.spy _OT.api, "sendJSON"
    testUser =
      email: "test.user@othenticate.com"
      password: "password"
    $("#OT_signInForm .OT_email").val(testUser.email).change()
    $("#OT_signInForm .OT_password").val(testUser.password).change()
    $("#OT_signInForm .OT_signInButton").click()
    assert.ok _OT.api.sendJSON.called
    credentials = _OT.api.sendJSON.lastCall.args[0]
    assert.equal credentials.email, testUser.email
    assert.equal credentials.password, testUser.password
    options = _OT.api.sendJSON.lastCall.args[1]
    assert.equal options.url, "/othen/users/authenticate"
    assert.isDefined options.error
    assert.isDefined options.success 
```

# database - 物业预订日历的最佳实践数据库架构

> ID：13671665
> 
> 赞同：1
> 
> 时间：2012-12-02T17:15:06.020
> 
> 标签：database, database-design, schema

我正在开发一个多属性预订系统，让我对最佳实践模式设计感到头疼。假设站点托管例如 5000 个属性，其中每个属性都由一个用户维护。每家酒店都有一个预订日历。我当前的实现是一个两表系统，一个表用于可用日期，另一个用于不可用日期，每个表的粒度为 1 天。

> property_dates_available (property_id, 日期);
> 
> property_dates_booked (property_id, 日期);

但是，我不确定这是否是一个好的解决方案。在另一个问题中，我读到了一个代表两种状态的单表解决方案。但我想知道将它们混合在一起是否是个好主意。此外，是否应该将全年 365 天的预订日历映射到数据库表中，还是只映射房产可供预订的日期？我想到了每年急剧增加的行数。我还想最近在数据库中搜索可用属性，但不确定与仅 5000 * av 相比，查看 5000 * 365 行是否是个坏主意。100 行。

你一般会推荐什么？这方面可以忽略吗？如何最佳实践实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:10:38.443

我不明白为什么您需要一个单独的表格来显示可用日期。如果您有一个预订日期表（property_id，date），那么您可以轻松查询此表以找出给定日期哪些属性可用

```
select properties.property_name
from properties where not exists
(select 1 from property_dates_booked
 where properties.property_id = property_dates_booked
 and property_dates_booked.date = :date) 
```

:date 是查询的参数

仅在 property_dates_booked 表中输入实际预订（将表重命名为“bookings”会更容易）。如果某处房产由于维护而在某些日期不可用，则在客户“特殊”的日期输入预订（可能“客户”的 ID 为负数）。

# java - 永久更改 JComboBox 所选项目的颜色

> ID：13671666
> 
> 赞同：2
> 
> 时间：2012-12-02T17:15:06.727
> 
> 标签：java, swing, user-interface, jcombobox

请看下面的代码

```
import java.awt.event.*;
import javax.swing.*;
import java.awt.*;

public class JCombo extends JFrame
{
    JComboBox com1;

    public JCombo()
    {

        com1 = new JComboBox();

        com1.addItem("Select");
        com1.addItem("One");
        com1.addItem("two");
        com1.addItem("Three");

        com1.addItemListener(new Com1Action());

        this.setLayout(new FlowLayout());
        this.add(com1);

        this.pack();
        this.validate();
        this.setVisible(true);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    private class Com1Action implements ItemListener
    {
        public void itemStateChanged(ItemEvent ae)
        {
            if(ae.getStateChange() == ItemEvent.SELECTED)
            {
                com1.getSelectedItem();
            }
        }
    }

    public static void main(String[]args)
    {
        try
        {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
            new JCombo();
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }

    }
} 
```

在这里，我想在选择项目时为所选项目应用颜色。我怎样才能做到这一点？

前任：

```
User selects "One" - Now "One" changes to blue
  User selects "Two" - Now "Two" changes to blue. "One" is also blue as well, because we changed the colour at the first place
    User selected "Three" - Now "Three" changes to blue. "One" and "Two" remains blue as well 
```

**更新**

我用自定义渲染器重新编码。现在它是突出显示选定的项目，但是一旦鼠标移动，颜色就会恢复到原始状态。换句话说，这里唯一发生的事情是更改突出显示颜色，而不是**永久地将颜色应用于所选项目**

```
import java.awt.event.*;
import javax.swing.*;
import java.awt.*;

public class JCombo extends JFrame
{
    JComboBox com1;

    public JCombo()
    {

        com1 = new JComboBox();
        com1.setLightWeightPopupEnabled(true);

        com1.addItem("One");
        com1.addItem("two");
        com1.addItem("Three");

        com1.setRenderer(new MyCellRenderer());

        com1.addItemListener(new Com1Action());

        this.setLayout(new FlowLayout());
        this.add(com1);

        this.pack();
        this.validate();
        this.setVisible(true);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    private class Com1Action implements ItemListener
    {
        public void itemStateChanged(ItemEvent ae)
        {
            if(ae.getStateChange() == ItemEvent.SELECTED)
            {
                com1.getSelectedItem();

            }
        }
    }

   class MyCellRenderer extends JLabel implements ListCellRenderer<Object> 
   {
     public MyCellRenderer() 
     {
         setOpaque(true);
     }

     public Component getListCellRendererComponent(JList<?> list,
                                                   Object value,
                                                   int index,
                                                   boolean isSelected,
                                                   boolean cellHasFocus) {

         setText(value.toString());

         Color background = Color.white;
         Color foreground = Color.black;

         // check if this cell represents the current DnD drop location
         JList.DropLocation dropLocation = list.getDropLocation();

         if (dropLocation != null
                 && !dropLocation.isInsert()
                 && dropLocation.getIndex() == index) {

         // check if this cell is selected
         } else if (isSelected) {
             background = Color.RED;
             foreground = Color.WHITE;

         // unselected, and not the DnD drop location
         } else {
         };

         setBackground(background);
         setForeground(foreground);

         return this;
     }
 }

    public static void main(String[]args)
    {
        try
        {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
            new JCombo();
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T17:31:50.383

这需要[*提供自定义渲染器*](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html#renderer)；API 包含一个[示例](http://docs.oracle.com/javase/7/docs/api/javax/swing/ListCellRenderer.html)。

附录：*唯一发生的事情是更改突出显示颜色，而不是**永久地**将颜色应用于所选项目。*

永久更改某些内容意味着有一个地方来存储该信息。我看到两个选择：

*   `state`向您选择的字段添加一个字段，`ComboBoxModel`并使用它来调节渲染器中的背景颜色。您可以使用`list.getModel()`.

*   正如@mKorbel[在此处](https://stackoverflow.com/a/7620693/714968)所建议的那样，切换到`JList`或`JTable`使用`ListSelectionModel`允许多项选择的 a。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-13T06:46:07.803

如果您只想更改所选项目的前景色，请使用以下代码

combobox.getEditor().getEditorComponent().setForeground(Color.GREEN);

如果你想改变所有项目的前景色，包括选中的项目，那么也可以使用上面的代码以及下面的代码。

```
 combobox.setRenderer(new DefaultListCellRenderer() {
@Override
public void paint(Graphics g) {
    setBackground(Color.WHITE);
    setForeground(Color.GREEN);
    super.paint(g);
} 
```

});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T17:21:25.763

你试过这个`.setBackground(Color c)`方法吗？

Java 的好处在于它的文档非常详尽。

在此处查看 JComponent 的文档：[JComponent Docs](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JComponent.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-30T06:40:41.533

主要有两种方式

*   1）在 UIManager 表单 JCombobox 中更改键值或
*   2) 覆盖 DefaultListCellRenderer，如果 isSelected

    ```
    UIManager.put("ComboBox.background", new ColorUIResource(Color.yellow));
    UIManager.put("ComboBox.selectionBackground", new ColorUIResource(Color.magenta));
    UIManager.put("ComboBox.selectionForeground", new ColorUIResource(Color.blue)); 
    ```

# tfs - 拒绝阅读和浏览 TFS 2012 上的源代码

> ID：13671667
> 
> 赞同：1
> 
> 时间：2012-12-02T17:15:12.427
> 
> 标签：tfs

我正在尝试在**TFS 2012**上设置权限，以**拒绝**某些用户/团队读取和浏览源代码。到目前为止，我已经成功拒绝阅读，但我不能拒绝用户浏览它。这意味着，用户可以轻松查看文件和文件夹的完整树。我希望用户甚至无法浏览它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T19:24:38.003

找到了解决方案！

我终于设法通过在**"DefaultCollection Groups"的****"Project Collection Valid Users"**上设置**"Edit collection-level information=>Not Set"**来完全隐藏特定用户组的源代码（尽管我允许他们查看工作项）。当然，我必须手动拒绝对源的根 ($) 的所有权限，但我想这适用于您喜欢的任何路径。之后，我创建了区域并允许该组的特定区域，一切都很完美！

 ****亚历克斯，感谢您对此的支持！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T00:37:51.800

我会尝试在项目设置上删除对项目级别信息的访问权限，如果不这样做，您可能必须删除对整个项目的访问权限。

我要提醒的一件事是使用拒绝，尤其是在用户组上。在拥有用户组时，删除允许比明确拒绝要好。

例如：用户 A 可能是管理员的成员，但也是贡献者的成员。作为管理员的成员，他应该能够执行相关安全设置的操作，但我们不希望贡献者这样做。如果我们从贡献者中删除允许，则管理员中的允许仍然有效。但是，如果我们拒绝参与者，则拒绝会覆盖用户 A 的管理员组中的允许，并且用户 A 无法执行相关安全设置的操作。****

# python-2.7 - 可以在 Python 脚本 setup.py 中编写，它将检查是否已安装所有必需的包 - 否则安装它们

> ID：13671668
> 
> 赞同：0
> 
> 时间：2012-12-02T17:15:18.777
> 
> 标签：python-2.7, distutils, setup.py

我正在制作 Tornado 应用程序（Python 和 Tornado 的新手，所以问题可能很愚蠢），并且我正在使用其他 Python 包，如 lepl、sqlalchemy 等。是否可以编写 Python 脚本 setup.py 来检查所有这些软件包是否已经安装 - 否则安装它们？或者我需要在 bash 中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:31:56.500

Use [`setuptools`](http://pypi.python.org/pypi/setuptools), and *only specify* these requirements:

```
from setuptools import setup

setup(
    # ...
    setup_requires=['lepl', 'sqlalchemy', ...],
) 
```

Then use a proper installing tool such as [`pip`](http://pypi.python.org/pypi/pip), [`easy_install`](https://pythonhosted.org/setuptools/easy_install.html) (comes with `setuptools`) or [`buildout`](http://www.buildout.org/) to manage installation of those dependencies.

By separating dependency management and installation, you have much better control over what gets installed when.

I can recommend you read the [Python Packaging User Guide](https://packaging.python.org/en/latest/) to learn more about packaging of python code and dependency management.

# php - 将类添加到动态 wordpress 菜单中的下拉菜单

> ID：13671669
> 
> 赞同：0
> 
> 时间：2012-12-02T17:15:33.167
> 
> 标签：php, wordpress, dynamic

我对 wordpress 很陌生，在为网站创建主导航时遇到了麻烦。

我正在使用 wp-nav-menu 输出我的动态菜单。

我想输出的代码如下...

```
<ul class="mainNav">
    <li><a href="">Home</a></li>
    <li class="dropdown">
        <a href="">Treatments<span>&#59232;</span></a>
        <ul>
            <li><a href="">Body Treatments</a></li>
            <li><a href="">Make Up</a></li>
            <li><a href="">Skincare</a></li>
        </ul>
    </li>
    <li><a href="">Latest News</a></li>
    <li><a href="">Aftercare</a></li>
    <li><a href="">Contact</a></li>
</ul> 
```

我用来获取上面菜单的代码是这个......

```
<?php wp_nav_menu( 
    array( 
       'menu'       =>  'Primary Navigation',
       'items_wrap' =>  '<ul class="mainNav">%3$s</ul>'
    ) 
); ?> 
```

这让我获得了主菜单，但我不知道如何获得`<li>`下拉类。`<span>`正如您在我的 HTML 代码中看到的那样，我还想在其中一个链接中放置一个。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T19:23:16.210

我已经想通了，会写在这里，以防万一有人遇到同样的问题。

在 wordpress 管理员中，有一个称为屏幕选项的链接。打开它，并勾选 CSS 类，然后您可以将单个类添加到菜单项。

[![启用 css 类到 nav_menu](../Images/488e1c3a52bcd4e34adcb976699a3122.png)](https://i.stack.imgur.com/3sHGJ.png)

# sql - SQL 将文本作为参数发送到过程

> ID：13671671
> 
> 赞同：0
> 
> 时间：2012-12-02T17:15:49.233
> 
> 标签：sql, procedure

在 Oracle 中，这应该是一件非常简单的事情，但我一天前才开始使用程序，我遇到了一些麻烦。我创建了一个程序，它应该接收一种设施作为参数，例如“医疗保健”。

```
create or replace 
PROCEDURE Adminfacility(
  v_facility_type IN VARCHAR2)
IS
BEGIN
  ...(SELECT goes here)...
END Adminfacility 
```

这是正确的吗？如何使过程接收参数然后返回包含两列的表？（例如设施 ID 和相应的管理员）。我遇到的一个问题是它要求我在 SELECT 语句之后有一个 INTO。我以前用输入数字 ID 并接收数字输出的函数做过类似的事情，但我以前从未做过这种事情。

我做了一个与视图类似的事情（它有一个默认的设施类型）并且它可以工作，但我不能让它作为一个过程工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:35:08.543

```
CREATE PROC Adminfacility
@text NVARCHAR(MAX)
AS
BEGIN
   SELECT id,adminname
   FROM TABLE 
   WHERE TEXT =@text    
END 
```

这是接受文本作为参数，在 where 条件下使用它，然后返回一个表。

如果你想改变已经存在的过程，那么而不是**CREATE**写**ALTER**

# php - 从 PHP 生成 XML 输出

> ID：13671672
> 
> 赞同：0
> 
> 时间：2012-12-02T17:15:54.923
> 
> 标签：php, mysql, xml

我检查了许多示例代码，但仍在努力使我的工作正常。我正在尝试从我的 PHP 脚本生成 XML 输出。

登录.php

```
<?php

    mysql_connect("localhost", "root", "") or die("cannot connect"); 
    mysql_select_db("ConquestOfLancaster") or die("cannot select DB");

    $username = $_REQUEST['username'];
    $password = sha1($_REQUEST['password']);

    $username = mysql_real_escape_string($username);

    $domDoc = new DOMDocument;
    $rootElt = $domDoc->createElement('root');
    $rootNode = $domDoc->appendChild($rootElt);

    $sql = "SELECT user_id, user_name FROM tbl_user WHERE user_name='$username' and user_pass='$password'";
    $result = mysql_query($sql);

    $count=mysql_num_rows($result);

    if($count > 0){

        //echo("welcome");
        $rootAtr = $domDoc->createAttribute('success');
        $rootAtrVal = $domDoc->createTextNode('TRUE');
        $rootAtr->AppendChild($rootAtrVal);
        $rootElt->AppendChild($rootAtr);

        $subElt = $domDoc->createElement('username');
        $subNode = $rootNode->appendChild($subElt);

        $textNode = $domDoc->createTextNode($username);
        $subNode->appendChild($textNode);

        echo htmlentities($domDoc->saveXML());
    } else{

        //echo("not exist");
        $rootAtr = $domDoc->createAttribute('success');
        $rootAtrVal = $domDoc->createTextNode('FALSE');
        $rootAtr->AppendChild($rootAtrVal);
        $rootElt->AppendChild($rootAtr);

        echo htmlentities($domDoc->saveXML());
    }

?> 
```

浏览器上的输出是

```
<?xml version="1.0"?> <root success="TRUE"><username>user1</username></root> 
```

我的主要问题是与此 PHP 交互的 iOS 应用程序无法解析此结果。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:22:17.593

你试过拿出来`htmlentities`吗？

正如你发送的是：

```
&lt;xml version ... 
```

不是

```
<?xml version="1.0"?> <root success="TRUE"><username>user1</username></root> 
```

如你想象的

# javascript - 表单验证未在提交时运行

> ID：13671674
> 
> 赞同：3
> 
> 时间：2012-12-02T17:15:59.103
> 
> 标签：javascript, forms, function, onsubmit

我正在尝试在 HTML 表单上运行表单验证，以确保此人已填写这两个字段。我在这里整理了一个 JSFiddle：

[http://jsfiddle.net/yCqqj/](http://jsfiddle.net/yCqqj/)

它以前对我有用，我不知道现在发生了什么。我制作了一个 JSFiddle 以将其从我的网站中拉出，以确保没有其他内容与它发生冲突，但我现在意识到它在代码中。这两个字段分别是名称“电子邮件地址”和“名称”，看起来我正在正确检查它们的值。基本上，如果他们将任一字段留空，我正在寻找警报（而不是表单的提交）。感谢您帮助我找出问题所在。我很感激。

```
function ValidateForm(){
    var emailID=document.MailingList.emailaddress
    var nameID=document.MailingList.Name

        if ((nameID.value==null)||(nameID.value=="")){
        alert("Please Enter your Name");
        nameID.focus();
        return false;
    }

    if ((emailID.value==null)||(emailID.value=="")){
        alert("Please Enter your Email ID");
        emailID.focus();
        return false;
    }
 } 
```

​ 即使没有返回true，表单仍然提交。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T17:22:16.907

问题是您尚未在该`Head`部分中定义 ValidateForm 。我已经编辑了 jsfiddle.check[演示](http://jsfiddle.net/yCqqj/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T17:37:14.240

我可以看到两个问题：

首先，什么是echeck？如果我拿走该代码，它将起作用。其次，您不应该在控制 nameID.value 后返回。如果您这样做，您对 emailID.value 的控制将无法完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-13T17:36:19.210

搭载 Behnam 的回答，这是因为 ValidateForm 没有像他所说的那样在头部定义。但这里是如何解决它：

在 jsfiddle 中，在 Frameworks & Extensions 的左上角区域中，将其设置为 no-wrap 。然后更新并设置为基础以保存您的更改。

[![在此处输入图像描述](../Images/04bb53e095258c51cb6289f59f4365fc.png)](https://i.stack.imgur.com/MEjoC.png)

# java - (Java) JTable行的用户选择

> ID：13671677
> 
> 赞同：0
> 
> 时间：2012-12-02T17:16:26.240
> 
> 标签：java, swing, jdbc, jtable

我有一个列出从 SQL 查询返回的客户信息的 JTable。如何设置表格，以便用户可以通过双击或勾选复选框来选择一行，然后用所选客户名称填写 JTextField？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T17:51:15.897

这里有一个示例代码去 fwd

```
public class PersonTable {

    JTable table;

    public PersonTable() {
        final MyTableModel myTableModel = new MyTableModel();
        myTableModel.fill();

        table = new JTable(myTableModel);
        JFrame frame = new JFrame("Persons");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        JPanel panel = new JPanel();
        JPanel panel1 = new JPanel();
        final JTextField t1 = new JTextField(10);

        table.getSelectionModel().addListSelectionListener(new ListSelectionListener() {
            @Override
            public void valueChanged(ListSelectionEvent e) {
                int selectedRow = table.getSelectedRow();
                Object valueAt = myTableModel.getValueAt(selectedRow, 0);
                t1.setText((String) valueAt);
            }
        });

        panel1.add(new JLabel("Name"), BorderLayout.EAST);
        panel1.add(t1, BorderLayout.WEST);
        panel.add(new JScrollPane(table), BorderLayout.NORTH);
        panel.add(panel1, BorderLayout.SOUTH);
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
    }

    public class MyTableModel extends AbstractTableModel {

        String[] columnName = new String[]{"Customer Name", "Phone Number", "Area"};
        String[][] valueA = null;

        public void fill() {

            valueA = new String[3][columnName.length];
            for (int i = 0; i < 3; i++) {
                valueA[i][0] = "Name" + i;
                valueA[i][1] = "989481125" + i;
                valueA[i][2] = "Area No" + i;
            }
        }

        @Override
        public int getRowCount() {
            return valueA.length;
        }

        @Override
        public String getColumnName(int column) {
            return columnName[column];
        }

        @Override
        public int getColumnCount() {
            return columnName.length;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            return valueA[rowIndex][columnIndex];
        }
    }

    public static void main(String[] args) {
        new PersonTable();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T17:25:26.010

尝试阅读有关如何使用 JTables 的 Java Swing 教程。基本上，您为行选择编写了一个侦听器：

[如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#selection)

# apache - ASF（Apache 软件基金会）2.0 许可证

> ID：13671678
> 
> 赞同：1
> 
> 时间：2012-12-02T17:16:34.150
> 
> 标签：apache, foundation, complex-event-processing

我必须选择以下工具之一来开发项目的事件处理部分，但该工具应在 ASF 2.0 许可下。

*   [SIDDHI](http://siddhi.sourceforge.net/) >> 在 ASF 许可下
*   [ETALIS](http://code.google.com/p/etalis/) >> 在 GNU Lesser GPL 许可下
*   [JBoss – Drools Fusion](http://www.jboss.org/drools/drools-fusion.html) >> ASL 许可证
*   [ActiveInsight](http://java-source.net/open-source/j2ee-frameworks/activeinsight) >> 通用公共署名许可 1.0 (CPAL)
*   [智能事件处理器 – IEP](http://docs.oracle.com/cd/E21454_01/html/821-2611/index.html)
*   [SQL流](http://www.sqlstream.com/)
*   [Oracle 事件处理](http://www.oracle.com/technetwork/middleware/complex-event-processing/overview/index.html)

我知道四个冷杉，我如何检查其他冷杉？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:31:22.643

Oracle 事件处理是专有产品，不附带 ASF/开源许可。同样适用于 IEP。

SQLstream 似乎也是一个拥有 60 天试用许可证的专有产品。请参阅 [http://www.sqlstream.com/docs/pdf/3.0.0/SQLstream_Getting_Started_Guide_V3.0.0.pdf](http://www.sqlstream.com/docs/pdf/3.0.0/SQLstream_Getting_Started_Guide_V3.0.0.pdf)

# jquery - 跳到第二页 (jQuery Mobile)

> ID：13671680
> 
> 赞同：0
> 
> 时间：2012-12-02T17:17:21.187
> 
> 标签：jquery, html, css, jquery-mobile

我的 jquery 移动网站中有三个页面，我希望它跳过左侧页面，以便首先加载第二个页面。

我的小提琴在这里：http: [//jsfiddle.net/iamthestig/MMwWC/](http://jsfiddle.net/iamthestig/MMwWC/) （您可以用鼠标滑动/滑动它以浏览页面）

我在这里有我的代码：

HTML

```
<div data-role="page" id="left" data-url="left" data-theme="a">LEFT PAGE</div>
<div data-role="page" id="home" data-url="home" data-theme="a">HOME</div>
<div data-role="page" id="right" data-url="right" data-theme="a">RIGHT PAGE</div> 
```

JS

```
$('div.ui-page').live("swipeleft", function(){
    var nextpage = $(this).next('div[data-role="page"]');
            if (nextpage.length > 0) {
                $.mobile.changePage(nextpage, {transition: "slide", reverse: true, changeHash: false}, true, true);
            }
        });
        $('div.ui-page').live("swiperight", function(){
        var prevpage = $(this).prev('div[data-role="page"]');
        if (prevpage.length > 0) {
        $.mobile.changePage(prevpage, {transition: "slide", reverse: true, changeHash: false}, true, true);
    }
}); 
```

CSS

```
* {
    margin: 0;
    padding: 0;
}

html, body {
    width: 100%;
    height: 100%;
    background: dimgray;
}

#home {
    background: dodgerblue;
}

#left {
    background: red;
}

#right {
    background: silver;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:08:05.277

默认情况下，jQuery mobile 显示 html 文件中的第一页。您可以直接将主页移至顶部。或者它基本上取决于你从哪里加载这个页面，当通过 href 属性更改到这个页面意味着你可以做

```
<a href="foo.html#home">link</a> 
```

这将使主页首先加载，其余的可以通过您的代码或

```
$.mobile.changePage("foo.html#home"); 
```

这也会做同样的事情。

# google-visualization - Google Charts - 类似于 Google Adsense 中的折线图

> ID：13671681
> 
> 赞同：0
> 
> 时间：2012-12-02T17:17:33.270
> 
> 标签：google-visualization

有人有来自 Google adnsese 的 2 vAxis line Chart 的酷示例，您可以在其中添加和删除要在图表中显示的值吗？

我已经完成了 2 vAxis 图表并显示了许多值，但现在我想添加和删除其中一些并重建图表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T04:21:42.693

我还没有看到 AdSense 图表，但我会尽力回答。

要从图表中添加或删除数据点或线，您可以操作[DataTable](https://developers.google.com/chart/interactive/docs/reference#DataTable) （或创建一个新的），然后在图表上再次调用“绘制”。

这是一个动画示例：

```
var data = google.visualization.arrayToDataTable([
    ['x','Domain', 'Line 1', 'Line 2'],
    ['A', 1, 1, 0.5],
    ['B', 2, 0.5, 1]
]);

// Use transition animation 
var opts = {animation: { duration: 1000, easing: 'out' }}
var chart = new google.visualization.LineChart(document.getElementById('visualization'));
chart.draw(data, opts);

// remove a data line (column)
data.removeColumn(3);
chart.draw(data, opts);

// add a new data point (row)
data.addRow(['C',4,1,0.5]);
chart.draw(data, opts); 
```

# java - 如何让 TTS（文本到语音）在 java netbeans 中工作？

> ID：13671682
> 
> 赞同：1
> 
> 时间：2012-12-02T17:17:32.407
> 
> 标签：java, text-to-speech, jsapi, freetts

我正在尝试让 TTS 在 netbeans for java 中工作。我已解压缩 JSAPI 文件并将以下 jars 添加到库中

*   cmu_us_kal.jar
*   cmulex.jar
*   en_us.jar
*   freetts.jar
*   cmulex.jar
*   jsapi.jar

当我运行以下代码时：

```
package demofreetts2;

import javax.speech.*;
import java.util.*;
import javax.speech.synthesis.*; 

public class Demofreetts2 {

String speaktext ="";
public void doSpeak(String speak, String voicename)
 {
   speaktext = speak;
   String voiceName = voicename;
   try
    {
    SynthesizerModeDesc desc = new SynthesizerModeDesc(null, "general", Locale.US, null, null);
     Synthesizer synthesizer = Central.createSynthesizer(desc);
     synthesizer.allocate();
     synthesizer.resume();
     desc = (SynthesizerModeDesc)synthesizer.getEngineModeDesc();
     Voice[] voices = desc.getVoices();
     Voice voice = null;
     for(int i = 0; i< voices. length; i++)
      {
       if(voices[i].getName().equals(voiceName))
        {
         voice = voices[i];
         break;
        }
      }
     synthesizer.getSynthesizerProperties().setVoice(voice);
     synthesizer.speakPlainText(speaktext, null);
     synthesizer.waitEngineState(Synthesizer.QUEUE_EMPTY);
     synthesizer.deallocate();
    }
   catch (Exception e)
    {
    String message = "missing speech properties in " + System.getProperty("user.home") + "\n";
        System.out.println (""+e);
    }
 }
public static void main (String[]args)
{
 Demofreetts2 obj = new Demofreetts2();
  obj.doSpeak(args[0],"kevin16");
 }
} 
```

我收到以下消息：

```
**run:
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 0
at demofreetts2.Demofreetts2.main(Demofreetts2.java:46)
Java Result: 1
BUILD SUCCESSFUL (total time: 1 second)** 
```

当我像这样更改主要方法时：

```
public static void main (String[]args)
{
 Demofreetts2 obj = new Demofreetts2();
 obj.doSpeak("hello","kevin16");
} 
```

我收到这条消息：

```
**run:
java.lang.NullPointerException
BUILD SUCCESSFUL (total time: 1 second)** 
```

有谁知道我怎样才能让它工作？

我只是一个将字符串转换为语音的程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:25:56.397

错误 #1：您必须将一些参数传递给您的 main 方法才能使用`args[0]`. 请参阅[什么是“字符串 args[]”？主要方法 Java 中的参数以](https://stackoverflow.com/questions/890966/what-is-string-args-in-java)获取更多信息。

错误 #2 ：您`NullPointerException`在代码中打了 a ，这意味着您尝试在等于`null`. 要么使用调试器，要么使用`e.printStackTrace();`而不是扩展调试信息`System.out.println (""+e);`，以便知道哪个实例是罪魁祸首。

# amazon-web-services - AWS php SDK 中的分页

> ID：13671685
> 
> 赞同：0
> 
> 时间：2012-12-02T17:17:44.463
> 
> 标签：amazon-web-services, amazon-ec2

我正在尝试在项目中实现 ec2 API。我们如何在 ec2-descibe-instances 上实现分页。我将选项发送为空

```
$ec2 = new AmazonEC2($key, $secret);
$ec2->set_region('us-east-1');
$allInstances = $ec2->describe_instances(null); 
```

如果我有数百个实例，渲染所有实例可能是个问题。所以想一次延迟加载 10 个实例。我看到 python boto 有一些限制，但适用于 aws 的 php SDK。

任何人都可以让我知道我们如何完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-10T06:29:34.933

你应该参考这个 q[如何使用 Amazon PHP SDK 2 获取 EC2 实例列表？](https://stackoverflow.com/questions/15233913/how-to-get-list-of-ec2-instances-with-amazon-php-sdk-2)

将 Page 参数添加到过滤器中，如 Page=1、page=2 等等。

```
$result = $ec2Client->DescribeInstances(array(
        'Filters' => array(
                array('Name' => 'instance-type', 'Values' => array('m1.small'),'Page' => 2),
        )
)); 
```

# css - 使用css制作没有滚动条但底部有页脚的页面

> ID：13671691
> 
> 赞同：1
> 
> 时间：2012-12-02T17:18:37.337
> 
> 标签：css, html, scrollbar, positioning

如何隐藏滚动条？即使内容为空，滚动条也会出现，但我不希望这样。

这是我的 HTML 代码：

```
 <html>
    <head>
{# ... #}
{% block stylesheets %}
            <link href="{{ asset('bundles/gestionconferenceapplication/css/style.css') }}" type="text/css" rel="stylesheet" />
{% endblock %}
        </head>
        <body>

            <div id="body_wrapper">
                <div id="container">

                    <!-- Start of Page Header -->

                    <div id="page_header">
                        <h1><span>Photos Site</span></h1>
                    </div>

                    <!-- End of Page Header -->

                    <!-- Start of Navigational Menu -->

                    <div id="nav_menu">

                        <ul>
                            <li id="menu1"><a href="{{ path('_acceuil', {'name': 'khalil comme toujours'}) }}" ><span>Acceuil</span></a></li>
                            <li id="menu2"><a href="#"><span>About Me</span></a></li>
                            <li id="menu3"><a href="{{ path('_creerConference') }}" ><span>Nouvelle Conference</span></a></li>
                            <li id="menu4"><a href="#"><span>Portfolio</span></a></li>
                            <li id="menu5"><a href="#"><span>Contacts</span></a></li>
                            <li id="menu6"><a href="#"><span>Links</span></a></li>
                        </ul>

                        <div class="clearthis">&nbsp;</div>
                    </div>

                    <!-- End of Mavigational Menu -->

                    <div class="clearthis">&nbsp;</div>

                    <!-- Start of Welcome to my Site -->

                    <div id="welcome">

                        <div class="content_header">
                            <h2><span>Welcome to my Site</span></h2>
                        </div>

                        <div class="content">
            {% block content %}

                        {% endblock %}  

                            </div>

                            <div class="clearthis">&nbsp;</div>
                        </div>

                        <!-- End of Welcome to my Site -->

                    </div>
                </div>

                <!-- Start of Page Footer -->

                <div id="page_footer">
                    Web design by <a href="#">Free Website Templates</a>
                </div>

                <!-- End of Page Footer -->

            </body>
        </html> 
```

这是CSS文件：

```
 * {
    margin: 0px;
    padding: 0px;
}

body {
    padding: 80px 0px 0px;
    background: url('../images/background_top.gif') #c4b8a1 repeat-x;
    color: #695d47;
    font-family: verdana, arial, sans-serif;
    font-size: 12px;
    text-align: center;
}

a {
    color: #695d47;
    background-color: inherit;
    text-decoration: underline;
}

a:hover {
    color: #ab9c7e;
    background-color: inherit;
}
span {
    display: none;
}

img {
    border: none;
}

ul {
    list-style-type: none;
}

li {
    list-style-type: none;
}

p {
    margin: 0px 0px 15px;
    text-align: justify;
    line-height: 15px;
}

.clearthis {
    margin : 0px;
    height : 1px;
    clear : both;
    float : none;
    font-size : 1px;
    line-height : 0px;
    overflow : hidden;
    visibility: hidden;
}

#body_wrapper {
    padding: 5px 0px 10px;
    width: 100%;
    background-color: #fff;
    color: inherit;
    position : relative;
    min-height: 100%;
}

#container {
    margin: 0px auto;
    width: 758px;
    text-align: right;
    padding-bottom: 20px;
    position : relative;
    min-height: 100%;
}

#container .content_header {
    margin: 20px 0px 0px auto;
    width: 730px;
    height: 40px;
    background: url('../images/content_header_bg.gif') repeat-x 0% 0%;
}

#container .content {
    margin: 3px 150px 0px 28px;
    width: 580px;
    text-align: left;

}

/* Page Header */

#page_header {
    background: url('../images/header_leftborder.gif') #fff repeat-y 0% 0%;
    color: #6a604e;
    float: left;
}

#page_header h1 {
    width: 280px;
    height: 125px;
    overflow: hidden;
    background: url('../images/website_title.gif') no-repeat 50% 50%;
}

/* Navigational Menu */

#nav_menu {
    margin-left: 9px;
    padding-left: 19px;
    float: right;
    background: url('../images/header_leftborder.gif') #fff repeat-y 0% 0%;
    color: #b3a386;
    text-align: center;
    font-family: tahoma, arial, sans-serif;
}

#nav_menu a {
    color: #b3a386;
    background: inherit;
}

#mav_menu a:hover {
    color: #857860;
    background: inherit;
}

#nav_menu ul {
    width: 450px;
    height: 125px;
    overflow: hidden;
}

#nav_menu li {
    float: left;
    border-width: 0px 1px 1px 0px;
    border-color: #c1b7a5;
    border-style: solid;
    font-size: 20px;
}

#nav_menu li#menu3, #nav_menu li#menu6 {
    border-right: none;
}

#nav_menu li a {
    display: block;
    width: 149px;
    height: 62px;
    text-decoration: none;
}

#nav_menu li a:hover {
    color: #857860;
    background-color: #f4eee2
}

#nav_menu li a span {
    padding-top: 17px;
    display: block;
}

/* Welcome to my Site */

#welcome .content_header h2 {
    height: 28px;
    background: url('../images/welcome_header.gif') no-repeat 0% 0%;
}

#welcome p {
    width: 420px;
    float: right;
}

/* Page Footer */

#page_footer {
    padding: 9px 10px 6px;
    font-weight: bold;
    float: none;
    clear: both;
    height:40px;

}

#page_footer a:hover {
    background-color: inherit;
    color: #4f4635;
} 
```

我想要实现的是，当我没有足够的内容时，滚动条应该隐藏并且页面的页脚保持可见（在页面底部（即浏览器底部））而不移动滚动条。我测试了几种样式，例如 :`position absolute`和`position:relative`in `#page_footer`，`#body_wrapper`但它不起作用。

* * *

我添加了一个 DOCTYPE 并解决了问题，但出现了另一个问题：页脚填充了一个很大的地方： ![在此处输入图像描述](../Images/b4b4099f9a568542c1739b7f15b21c99.png)

即使我固定了宽度，（宽度：40px）

你有什么主意吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T07:14:10.127

**自动隐藏滚动条**

***概念：-***

您可以使用 CSS`overflow property`隐藏滚动条。如果您`overflow:hidden`在网页的任何组件或整个页面上应用，滚动条将永久隐藏。

检查此示例，其中滚动条在文本区域中可见。[http://jsfiddle.net/qtAqq/1/](http://jsfiddle.net/qtAqq/1/)

现在要隐藏这些滚动条，我们将应用 `overflow:hidden`这个文本区域。如您所见，文本不仅仅是文本区域，但滚动条被隐藏了。[http://jsfiddle.net/hnyVc/1/](http://jsfiddle.net/hnyVc/1/)。

但是我们不想这样做，因为当站点的内容超过屏幕大小时，滚动条很有用。所以我们将使用`overflow:auto`. 请参阅此示例[http://jsfiddle.net/EZr89/](http://jsfiddle.net/EZr89/)

**您的问题的解决方案：-**

正如您所看到`overflow:auto`的，当页面内容较少时使用隐藏滚动条，并在页面内容多于显示大小时使滚动条可见。因此，只需将以下代码添加到您的页面 css 样式中，您就可以在页面内容较少时自动隐藏滚动条：

```
 html
{
overflow:auto;
} 
```

* * *

**将页脚固定在浏览器底部** 您可以使用`postion:fixed;`和`bottom:0px;`在您的页脚上将其固定在浏览器底部。将此代码添加到您的页面 css 样式中：-

```
#page_footer {
padding: 9px 10px 6px;
font-weight: bold;
float: none;
clear: both;
width:100%;
height:40px;
background: url('../images/background_top.gif') #c4b8a1 repeat-x;
    /*Add this Code to fix the footer at browser bottom*/
position:fixed;
bottom:0px;

    } 
```

**代码中的其他问题/问题** 1) 在所有代码的顶部添加到您的页面 html。2）你用较深的颜色为整个身体着色，使页脚看起来很大。可以通过将body颜色设置为白色，在容器div后面添加一个颜色较深的header div来解决。3）您为容器 div 设置了有限的宽度，这使得页眉在页面中心看起来更小。可以通过为容器 div 提供 100% 的宽度并放置一个宽度有限的内部容器 div 与页面中心对齐来解决此问题。检查此处修复了这些问题的代码：-

在此处的 zip 文件中找到主要的 html 和 css 样式：[http ://www.keepandshare.com/doc/5182191/yoursite-zip-2k?da=y](http://www.keepandshare.com/doc/5182191/yoursite-zip-2k?da=y)

让我知道它是否有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-15T08:42:22.600

将此样式添加到您的身体

```
body{
    margin:0px;
    padding:0px;
    overflow:hidden;
} 
```

# java - RestFB：使用 facebook 应用程序获取用户访问令牌

> ID：13671694
> 
> 赞同：11
> 
> 时间：2012-12-02T17:18:59.200
> 
> 标签：java, facebook, restfb

这就是我所拥有的：

```
static AccessToken accessToken = new DefaultFacebookClient().obtainExtendedAccessToken("<my app id>", "<my app secret>");
static FacebookClient client = new DefaultFacebookClient();
public static void main(String args[]) {
    System.out.print("Enter Your Status: ");
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));

    String status= null;

      try {
         userName = br.readLine();
         System.out.println("..........");
      } catch (IOException ioe) {
         System.out.println("!");
         System.exit(1);
      }

    FacebookType publishMessageResponse =
                client.publish("me/feed", FacebookType.class,
                Parameter.with("message", status)); 
```

因此，第一行获取令牌并将其存储为 AccessToken 类型，但这对我有什么好处，因为下一行我需要将访问令牌作为字符串提供，而我无法转换它。有什么帮助吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-09T02:21:29.397

首先不要将应用令牌与用户令牌混淆（[更多信息](https://developers.facebook.com/docs/facebook-login/access-tokens/)）

要获取用户令牌，您必须

1.  为用户提供一种针对 Facebook 进行身份验证的方式（[更多信息](https://developers.facebook.com/docs/facebook-login/login-flow-for-web-no-jssdk/#login)）并接收“代码”——每个登录请求唯一的加密字符串。
2.  使用此代码获取用户令牌。

您可以通过以下方式使用纯 RestFB 获取用户令牌：

```
private FacebookClient.AccessToken getFacebookUserToken(String code, String redirectUrl) throws IOException {
    String appId = "YOUR_APP_ID";
    String secretKey = "YOUR_SECRET_KEY";

    WebRequestor wr = new DefaultWebRequestor();
    WebRequestor.Response accessTokenResponse = wr.executeGet(
            "https://graph.facebook.com/oauth/access_token?client_id=" + appId + "&redirect_uri=" + redirectUrl
            + "&client_secret=" + secretKey + "&code=" + code);

    return DefaultFacebookClient.AccessToken.fromQueryString(accessTokenResponse.getBody());
} 
```

调用很简单：

```
FacebookClient.AccessToken token = getFacebookUserToken(code, redirectUrl);
String accessToken = token.getAccessToken();
Date expires = token.getExpires(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-21T07:21:22.383

除了 Jack 所说的 AccessToken.getAccessToken() 返回 accessToken 的字符串值之外，您还可以`DefaultFacebookClient`通过如下扩展来避免实例化两次`DefaultFacebookClient`：

```
import com.restfb.DefaultFacebookClient;

public class LoggedInFacebookClient extends DefaultFacebookClient {

    public LoggedInFacebookClient(String appId, String appSecret) {
        AccessToken accessToken = this.obtainAppAccessToken(appId, appSecret);
        this.accessToken = accessToken.getAccessToken();
    }

} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-17T07:33:26.147

试试下面的代码：

```
AccessToken accessToken = new DefaultFacebookClient().obtainAppAccessToken(appid,appsecret);
String token=accessToken.getAccessToken(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T15:14:24.397

根据[restfb.FacebookClient.AccessToken](http://restfb.com/javadoc/com/restfb/FacebookClient.AccessToken.html)，您应该能够调用 accessToken.getAccessToken() - 这应该返回您正在寻找的字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-28T07:15:33.167

这将起作用

```
AccessToken accessToken = new DefaultFacebookClient().obtainAppAccessToken("XXXX", "XXXX");
String token=accessToken.getAccessToken();
DefaultFacebookClient facebookClient = new DefaultFacebookClient(token); 
```

# google-app-engine - 如何使用 objectify-appengine 在数据库中找到最近的点

> ID：13671699
> 
> 赞同：2
> 
> 时间：2012-12-02T17:19:44.160
> 
> 标签：google-app-engine, persistence, objectify

我在我的应用程序中使用 objectify-appengine。在数据库中，我存储地方的纬度和经度。在某些时候，我想找到离特定点最近的地方（从数据库）。
据我了解，我无法执行常规的类似 SQL 的查询。所以我的问题是如何以最好的方式完成？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T17:38:09.763

您应该看看[GeoModel](https://developers.google.com/maps/articles/geospatial)，它使用 Google App Engine 启用地理空间查询。

**更新：**

假设您在 Objectify 带注释的模型类中有一个名为 的 GeoPt 属性`coordinates`。

您需要在项目中有两个库：

1.  [地理位置.java](http://janmatuschek.de/LatitudeLongitudeBoundingCoordinates#Java)
2.  [Java 地理模型](http://code.google.com/p/javageomodel/)

在要执行地理查询的代码中，您具有以下内容：

```
import com.beoui.geocell.GeocellManager;
import com.beoui.geocell.model.BoundingBox;
import you.package.path.GeoLocation;
// other imports

// in your method
GeoLocation specificPointLocation = GeoLocation.fromDegrees(specificPoint.latitude, specificPoint.longitude);
GeoLocation[] bc = specificPointLocation.boundingCoordinates(radius);

// Transform this to a bounding box
BoundingBox bb = new BoundingBox((float) bc[0].getLatitudeInDegrees(),
                 (float) bc[1].getLongitudeInDegrees(),
                 (float) bc[1].getLatitudeInDegrees(),
                 (float) bc[0].getLongitudeInDegrees());

// Calculate the geocells list to be used in the queries (optimize
// list of cells that complete the given bounding box)
List<String> cells = GeocellManager.bestBboxSearchCells(bb, null);

// calculate geocells of your model class instance
List <String> modelCells = GeocellManager.generateGeoCell(myInstance.getCoordinate);

// matching
for (String c : cells) {
    if (modelCells.contains(c)) {
        // success, do sth with it
        break;
    }
} 
```

# angularjs - AngularJS-Twig 与双花括号冲突

> ID：13671701
> 
> 赞同：197
> 
> 时间：2012-12-02T17:20:07.220
> 
> 标签：angularjs, twig

如你所知，angular 和 twig 都有共同的控制结构——双花括号。如何更改 Angular 的默认值？

我知道我可以在 Twig 中做到这一点，但在某些项目中我不能，只有 JS。

* * *

## 回答 #1

> 赞同：288
> 
> 时间：2012-12-02T17:34:13.537

您可以使用服务更改开始和结束插值标记`interpolateProvider`。一个方便的地方是在模块初始化时。

```
angular.module('myApp', []).config(function($interpolateProvider){
    $interpolateProvider.startSymbol('{[{').endSymbol('}]}');
}); 
```

[https://docs.angularjs.org/api/ng/provider/$interpolateProvider](https://docs.angularjs.org/api/ng/provider/$interpolateProvider)

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2014-01-19T01:40:05.337

这个问题似乎得到了回答，但是一个更优雅的没有提到的解决方案是简单地将花括号括在树枝花括号之间的引号中，如下所示：

```
{{ '{{myModelName}}' }} 
```

如果您对内容使用变量，请改为执行以下操作：

```
{{ '{{' ~ yourvariable ~ '}}' }} 
```

您应该使用**单引号**，而不是双引号。双引号通过 Twig 启用字符串插值，因此您必须更加小心内容，尤其是在使用表达式时。

* * *

如果您仍然讨厌看到所有这些花括号，您还可以创建一个简单的宏来自动化该过程：

```
{% macro curly(contents) %}
   {{ '{{' ~ contents ~ '}}' }}
{% endmacro %} 
```

将其另存为文件并将其导入模板。我使用`ng`这个名字是因为它又短又甜。

```
{% import "forms.html" as ng %} 
```

或者您可以将宏放在模板的顶部并将其导入为 _self [（请参见此处）](http://twig.sensiolabs.org/doc/templates.html#macros)：

```
{% import _self as ng %} 
```

然后按如下方式使用它：

```
{{ ng.curly('myModelName') }} 
```

这输出：

```
{{myModelName}} 
```

* * *

...以及对那些使用[MtHaml](https://github.com/arnaud-lb/MtHaml)和 Twig 的人的跟进。MtHaml 允许以正常方式使用 AngularJS curlies，因为通过 - 和 = 而不是 {{ }} 访问任何 Twig 代码。例如：

纯 HTML + AngularJS：

```
<tr ng-repeat="product in products">
   <td> {{ product.name }} </td>
</tr> 
```

MtHaml + AngularJS：

```
%tr(ng-repeat="product in products")
   %td {{ product.name }} 
```

MtHaml + AngularJS 和 MtHaml 风格的 Twig：

```
- set twigVariable = "somevalue"
= twigVariable
%tr(ng-repeat="product in products")
   %td {{ product.name }} 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2013-02-06T00:43:14.903

正如关于 Django 和 AngularJS 的类似问题中所述，更改默认符号的技巧（在 Twig 或 AngularJS 中）可能会导致与将使用这些符号的第三方软件不兼容。所以我在谷歌找到的最好的建议：[https ://groups.google.com/d/msg/symfony2/kyebufz4M00/8VhF1KWsSAEJ](https://groups.google.com/d/msg/symfony2/kyebufz4M00/8VhF1KWsSAEJ)

> TwigBundle 不为词法分析器分隔符提供配置，因为更改它们会禁止您使用共享包提供的任何模板（包括 TwigBundle 本身提供的异常模板）。
> 
> 但是，您可以在角度模板周围使用原始标签来避免转义所有花括号的痛苦：http: [//twig.sensiolabs.org/doc/tags/raw.html](http://twig.sensiolabs.org/doc/tags/raw.html) -- Christophe | 斯托夫

标记已重命名为[逐字](http://twig.sensiolabs.org/doc/tags/verbatim.html)

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2013-09-05T20:56:55.107

您也可以使用基于属性的指令`<p ng-bind="yourText"></p>`，与`<p>{{yourText}}</p>`

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2014-03-18T20:37:51.353

您可以使用`\{{product.name}}`来获取被 Handlebars 忽略并由 Angular 使用的表达式。

* * *

## 回答 #6

> 赞同：23
> 
> 时间：2015-02-23T00:04:43.053

这是最佳答案的编译版本和逐字块的示例：

对于单次插入，请使用：

```
{{ '{{model}}' }} 
```

或者如果您使用 twig 变量

```
{{ '{{' ~ twigVariableWitModelName ~ '}}' }} 
```

[Verbatim](http://twig.sensiolabs.org/doc/tags/verbatim.html)，对于几个角度变量来说非常优雅和可读：

```
<table ng-table>
    {% verbatim %}
        <tr ng-repeat="user in $data">
        <td data-title="'Name'">{{user.name}}</td>
        <td data-title="'Age'">{{user.age}}</td>
        </tr>
    {% endverbatim %}
</table> 
```

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2013-11-15T20:11:58.187

如果您对更改现有 Angular 语法的模板标签不感兴趣，这将需要对现有 Angular 模板进行一些令人困惑的重写。

可以只使用带有角标签的树枝模板标签，如下所示：

```
{% verbatim %}{{yourName}}{% endverbatim %} 
```

在另一个类似的线程[答案](https://stackoverflow.com/a/11478993/171217)中找到了这个：[Angularjs on a symfony2 application](https://stackoverflow.com/questions/10834390/angularjs-on-a-symfony2-application)

* * *

## 回答 #8

> 赞同：18
> 
> 时间：2014-04-16T13:08:16.540

或者，您可以更改 Twig 使用的字符。这由[Twig_Lexer](https://github.com/fabpot/Twig/blob/master/lib/Twig/Lexer.php)控制。

```
$twig = new Twig_Environment();

$lexer = new Twig_Lexer($twig, array(
    'tag_comment'   => array('[#', '#]'),
    'tag_block'     => array('[%', '%]'),
    'tag_variable'  => array('[[', ']]'),
    'interpolation' => array('#[', ']'),
));
$twig->setLexer($lexer); 
```

* * *

## 回答 #9

> 赞同：17
> 
> 时间：2012-12-02T17:30:49.183

根据[这篇文章](http://comments.gmane.org/gmane.comp.php.symfony.symfony2/7858)，您应该可以这样做：

```
angular.module('app', [])
  .config(['$interpolateProvider', function ($interpolateProvider) {
    $interpolateProvider.startSymbol('[[');
    $interpolateProvider.endSymbol(']]');
  }]); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-11-28T13:14:30.567

我喜欢@pabloRN，但我更喜欢使用 span 而不是 p，因为对我来说 p 会在结果中添加行。

我会用这个：

```
<span ng-bind="yourName"></span> 
```

我还在双引号内使用带有光标的 aText，这样我就不必一遍又一遍地重写整个内容。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-04-02T18:58:52.073

您可以在 twig 中创建一个函数来围绕您的角度指令，所以喜欢而不是去...

`{{"angular"}}`

你去 ...

`{{angular_parser("angular stuff here output curlies around it")}}`

# jquery - 让音频在移动 Safari 中播放？

> ID：13671703
> 
> 赞同：0
> 
> 时间：2012-12-02T17:20:19.293
> 
> 标签：jquery, html, audio

在我的 iPad 上的移动 Safari 中播放音频似乎非常困难。显然我在某个地方搞砸了。我读到你必须有一个播放动作，我已经完成了，但它不播放音频。我只想单击图像按钮并播放 mp3。我构建的东西在我的桌面上运行良好，只是不能在移动 Safari 中播放。

```
$(".playback").click(function() {
    var selectedAudio = $(this).attr("id");
    var myAudio = document.getElementById(selectedAudio + "-audio");
    myAudio.play();
});​ 
```

这是我用来测试的小提琴。非常感谢！

[http://jsfiddle.net/Pzsax/2/](http://jsfiddle.net/Pzsax/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:48:24.403

我刚刚将音频类型更改为“音频/ogg”，它声明可以在 Firefox 中工作。在 Safari 中尝试相同的操作。您也可以尝试添加不同格式的“音频/mpeg”.mpeg 文件的辅助音频源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T17:33:29.537

作为一个快速信息，您的小提琴在 Firefox 17 中不起作用。

萤火虫抛出：

> 不支持“audio/mpeg”的指定“type”属性。加载媒体资源失败。

# javascript - 是否可以更改 h:outputStylesheet 和 h:outputScript 使用的 /resources 文件夹名称

> ID：13671704
> 
> 赞同：2
> 
> 时间：2012-12-02T17:20:19.560
> 
> 标签：javascript, css, jsf-2, resources, location

`h:outputStylesheet`在and中引用css文件和js文件时是否需要给文件夹名称“resources” `h:outputScript`？

因为当我给文件夹名称“assets”而不是“resources”时，这些文件没有加载。

这就是我使用这些标签的方式：

```
<h:head>
    <h:outputStylesheet name="css/styles.css"/>
    <h:outputScript name="js/site.js"/>
</h:head> 
```

这是我的项目结构：

![在此处输入图像描述](../Images/a23b81990ab17bd28a423855da21d307.png)

在屏幕截图中，您可以看到文件夹名称是资源。然后它正在工作。如何指定不同的名称？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T19:15:31.623

[根据JSF 规范](http://jcp.org/aboutJava/communityprocess/final/jsr314/index.html)的第 2.6.1.1 和 2.6.1.2 章，文件夹名称是固定的。

> ### 2.6.1.1 将资源打包到 Web 应用程序根目录中
> 
> 默认实现必须支持在web应用根路径下打包资源
> 
> ```
> resources/<resourceIdentifier> 
> ```
> 
> 相对于 Web 应用根目录。必须使用`getResource*()`ExternalContext 上的方法访问打包到 Web 应用根目录中的资源。
> 
> ### 2.6.1.2 将资源打包到类路径中
> 
> 对于默认实现，打包在类路径中的资源必须位于 JAR 条目名称下：
> 
> ```
> META-INF/resources/<resourceIdentifier> 
> ```
> 
> 打包到类路径中的资源必须使用调用当前方法获得的`getResource*()`方法来访问。`ClassLoader``getContextClassLoader()``Thread`

它在这两种情况下都提到了“必须”。它没有提及任何有关更改这些路径的可能配置选项的内容。这适用于 JSF 2.0 和 JSF 2.1。

然而，在即将到来的 JSF 2.2 中，根据[JSF 规范 issue 996](http://java.net/jira/browse/JAVASERVERFACES_SPEC_PUBLIC-996)，可以通过新的`javax.faces.WEBAPP_RESOURCES_DIRECTORY`上下文参数更改路径，该参数将相对于 webcontent 根的路径作为参数值：

```
<context-param>
    <param-name>javax.faces.WEBAPP_RESOURCES_DIRECTORY</param-name>
    <param-value>WEB-INF/resources</param-value> 
</context-param> 
```

此示例将`/resources`文件夹移动到`/WEB-INF`，从而确保更高的安全性（即现在不再可能独立于 访问这些资源`FacesServlet`）。

因此，在*您的特定情况下*，您希望在升级到 JSF 2.2 时使用以下设置：

```
<context-param>
    <param-name>javax.faces.WEBAPP_RESOURCES_DIRECTORY</param-name>
    <param-value>assets</param-value> 
</context-param> 
```

请注意，这仅涵盖第 2.6.1.1 章中指定的 webapp 自己的资源，而不是第 2.6.1.2 章中指定的 JAR 资源。JAR 资源的路径应该仍然`META-INF/resources`是由 Servlet API 规范而不是 JSF 规范控制的。它是通过[`ServletContext#getResource()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getResource%28java.lang.String%29)不受 JSF 控制的方法获得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T21:33:49.490

除非 yiu 正在使用，否则您不能指定其他目录而不是*资源*

```
<style></style> 
```

或者

[OmniFaces CombinedResourceHandler](http://showcase.omnifaces.org/resourcehandlers/CombinedResourceHandler)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T15:38:50.433

这是资源处理程序在 JSF 2.0 中实现的方式，默认情况下它会查看以下两个路径：

1) /resources 在 Web 应用程序的根目录下。

2) /META-INF/resources 打包在类路径上的外部 JAR 中时。

如果您想使用不同的名称，正如 Alexandre 所提到的，请使用`<script>`and`<style>`标签或编写您自己的资源处理程序。

更多信息：

*   [Ryan Lubke 关于 JSF 2.0 资源 API 的博客文章](https://blogs.oracle.com/rlubke/entry/jsf_2_0_new_feature5)

*   [JSF 2.0 规范](http://download.oracle.com/otndocs/jcp/jsf-2.0-fr-eval-oth-JSpec/)

# iphone - 对于某些设备，从 iCloud 读取密钥是零

> ID：13671705
> 
> 赞同：0
> 
> 时间：2012-12-02T17:20:26.273
> 
> 标签：iphone, ios, ipad, icloud

我已经在 iCloud 上存储了一个密钥，我正在使用设备（不是模拟器）阅读

```
NSString *IDicloud;

NSUbiquitousKeyValueStore *store = [NSUbiquitousKeyValueStore defaultStore];
if (store) {
    IDicloud = [store objectForKey:@"UUID"];
} 
```

当我在用于在 iCloud 上创建和存储它的同一设备上读取密钥时，该值读取正确，但是当我尝试在另一台设备上读取相同的密钥时，我得到了 nil。所有设备都使用相同的 AppStore ID，都运行 iOS 6，并且都配置了 iCloud 并正常工作。想象这可能是传播延迟，我等了 24 小时并再次尝试。问题仍然存在。

权利是这样设置的

```
use entitlements file = myAppName
key-value store = use store with identifier com.myCompany.myAppName
ubiquity containers = com.myCompany.myAppName
keychain groups = com.myCompany.myAppName 
```

为什么会这样？

注意：我怀疑这些值被存储在本地但没有更新到 iCloud。我该如何检查？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:08:35.387

最后！我找到[了这个解决方案](http://www.cocos2d-iphone.org/forum/topic/68488#post-224423)，它有效！！！！此问题的解决方案是从您正在测试应用程序的所有设备中删除所有 iCloud 帐户并重新创建它们！

# jquery - 按钮单击时的 jQuery 表单验证

> ID：13671710
> 
> 赞同：52
> 
> 时间：2012-12-02T17:20:33.780
> 
> 标签：jquery, jquery-validate

我有一个带有表单和表单外按钮的简单页面。我正在尝试验证按钮单击时的表单。我在 document.onready 函数中添加了表单验证规则。但是，该表格未得到验证。

HTML:-

```
<html>
<head>
   <script src="lib/jquery1.5.2.js"></script>
   <script src="lib/jquery.validate.js"></script>
   <script src="lib/myjs.js"></script>
</head>
<body>

<form id="form1" name="form1"> 
     Field 1: <input id="field1" type="text" class="required">
</form>

<div>
    <input id="btn" type="button" value="Validate">
</div>

</body>
</html> 
```

JS：-

```
$(document).ready(function(){

$("#form1").validate({
   rules: {
     field1: "required"
   },
   messages: {
     field1: "Please specify your name"

   }
})

$('#btn').click(function() {
 $("#form1").validate();  // This is not working and is not validating the form
});

}); 
```

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-12-02T17:34:37.800

在您的`click`处理程序中，错误在于`.validate()`方法；它只初始化插件，它不验证`form`.

要消除在 中使用`submit`按钮的需要`form`，请使用`.valid()`触发验证检查...

```
$('#btn').on('click', function() {
    $("#form1").valid();
}); 
```

[**jsFiddle 演示**](http://jsfiddle.net/aog1tgz1/)

`.validate()`-在 DOM 就绪*后*初始化插件（带有选项） 。

`.valid()`- 检查验证状态（布尔值）或随时触发验证测试`form`。

否则，如果容器中有一个`type="submit"`按钮，则`form`不需要特殊的`click`处理程序和`.valid()`方法，因为插件会自动捕获它。

[**`click`没有处理程序的演示**](http://jsfiddle.net/6he8a15n/)

* * *

**编辑**：

您的 HTML 中还有两个问题...

```
<input id="field1" type="text" class="required"> 
```

*   `class="required"`在`.validate()`. _ 这是多余的和多余的。

*   缺少该`name`属性。规则`.validate()`由它们的`name`. 该插件依赖于独特的`name`属性来跟踪输入。

应该...

```
<input name="field1" id="field1" type="text" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T17:45:11.907

```
$(document).ready(function() {
    $("#form1").validate({
        rules: {
            field1: "required"
        },
        messages: {
            field1: "Please specify your name"
        }
    })
});

<form id="form1" name="form1">
     Field 1: <input id="field1" type="text" class="required">
    <input id="btn" type="submit" value="Validate">
</form> 
```

您也在使用 type="button"。而且我不确定您为什么应该将提交按钮分开，将其放在表单中。这样做更合适。这应该有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-31T15:20:44.347

您还可以使用**按钮**标签实现其他方式

根据新的 html5 属性，您还可以添加一个表单属性，例如

```
<form id="formId">
    <input type="text" name="fname">
</form>

<button id="myButton" form='#formId'>My Awesome Button</button> 
```

所以按钮将附加到表单上。

这应该与 jQuery 的 validate() 插件一起使用，例如：

```
var validator = $( "#formId" ).validate();
validator.element( "#myButton" ); 
```

它也适用于**输入**标签

## 来源 ：

[https://developer.mozilla.org/docs/Web/HTML/Element/Button](https://developer.mozilla.org/docs/Web/HTML/Element/Button)

# php - PHP中的音译应用程序

> ID：13671713
> 
> 赞同：1
> 
> 时间：2012-12-02T17:21:05.983
> 
> 标签：php, replace, translation

我是 php 新手，感染这是我在 php 中的第二个脚本，它是一个逐字转写的音译工具，它从 txt 文件中读取数据，然后用新的单词替换每个单词。它对小文本非常有效，但如果文本很大，它就会失败。请提供任何帮助。

```
<?php
$Urdu = array();
$Roman = array();
$str2replace = $_POST["S1"];
$Chr1 = array( "'", '"', "!", " ( ", " ) ", "@", "#", "$", "%", "^", "&", "*", ",", ".", "/", "?", "<", ">", ";", "[", "]", "{", "}", "،", "۔" , "؟", "+", "-",  "=", "_");
$Chr2 = array( " ' ", ' " ', " ! ", " ( ", " ) ", " @ ", " # ", " $ ", " % ", " ^ ", " & ", " * ", " , ", " . ", " / ", " ? ", " < ", " > ", " ; ", " [ ", " ] ", " { ", " } ", " ، ", " ۔ " , " ؟ ", " + ", " - ",  " = ", " _ ");
$str2replace = " " . $str2replace . " ";
$str2replace = str_replace(array("\n", "\r"), '', $str2replace);
$str2replace = str_replace($Chr1 , $Chr2, $str2replace);
$file = fopen("Dict.txt", "r");
while (!feof($file)) {
$String = fgets($file);
$String = str_replace(array("\n", "\r"), '', $String);
$pos = strrpos($String, "/");
if ($pos === false) { 
// Not Found
} else {
$Urdu[] = " " . substr($String, 0,$pos) . " "  ; 
$Roman[] = " " . substr($String, $pos+1) . " " ; 
  }
}
fclose($file);
$str2replace = str_replace($Urdu, $Roman, $str2replace);
$str2replace = str_replace($Chr2 , $Chr1, $str2replace);
$str2replace = substr($str2replace, 1);
echo $str2replace;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:40:58.243

1.  对于初学者来说，为什么你需要做 str_replace 5 次？这是要优化的第一件事。
2.  为什么不将字典存储为数组并仅包含它，而不是每次都读取它。

# html - 在透明度上显示文本的问题 (HTML/CSS)

> ID：13671714
> 
> 赞同：0
> 
> 时间：2012-12-02T17:21:22.753
> 
> 标签：html, css, transparency

我正在一个带有引导程序的网站上工作，该引导程序基本上由橙色背景和一些透明的黑色容器组成。 [http://i.stack.imgur.com/n9G5O.png](http://i.stack.imgur.com/n9G5O.png)

如您所见，透明框中显示的字体看起来很糟糕。我正在使用 Tahoma，但我尝试的每种字体都会发生这种情况。

有什么办法可以改进这样的文字吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:41:39.400

Tahoma 是一种 Windows 字体，因此它可能会在其他浏览器上使用 Arial。

您提供的屏幕截图似乎也来自 Internet Explorer，它的文本渲染引擎非常糟糕。（尝试 chrome/firefox/safari）

我还在某处读到您可以尝试在 Windows 设置中启用 ClearType，但无法从浏览器级别强制执行此操作。

您还可以让 javascript [cufon](http://github.com/sorccu/cufon)将每个字符更改为图像/画布并以这种方式强制执行，但这会降低性能并且可能也不是最佳解决方案。

如果您想支持 IE，通常您最终会使用图像 (png) 作为菜单按钮。

# javascript - jquery/Raphaël 停止和启动

> ID：13671717
> 
> 赞同：1
> 
> 时间：2012-12-02T17:22:01.077
> 
> 标签：javascript, jquery, raphael

我有很多代码，想在我的动画中添加一个停止和开始按钮。因此，当用户按下开始时，它将启动一切，当他按下停止时，它会停止。然而，我起诉了不止一个图书馆。J查询和拉斐尔。是否有可能做到这一点？或不？谢谢

# c++ - 具有友好方法名称的 c 静态方法调用

> ID：13671726
> 
> 赞同：0
> 
> 时间：2012-12-02T17:23:14.187
> 
> 标签：c++, methods, header

我有一个头文件`helper.h`

```
class helper
{

public:
    static int someVal();   
};

int helper::someVal()
{
   return 999;
} 
```

在我的 c 类中，我`someVal`按如下方式调用该方法

```
#include "helper.h"
.
.
int answer = helper::someVal(); 
```

有没有办法代替这样的电话？

```
int answer = someVal(); 
```

下面的解决方案是 helper.h --

```
static int someVal();   

 int someVal()
    {
        return 999;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T17:26:55.817

不完全是，但你可以创建`helper`一个命名空间而不是一个类：

```
namespace helper
{
    static int someVal();   
}

using namespace helper;
int answer = someVal(); 
```

您可以像在问题中那样定义函数。实际上，最好不要将`using namespace`其用于您自己的函数，因为这样更容易理解调用了哪个函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T17:27:19.343

如果您只有一个带有`static`函数的类，则可以使用`namespace`带有函数的类。您可以稍后使用`using namespace`来访问没有命名空间名称的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T17:48:38.020

你为什么要这样做？阅读代码的人（甚至在不久的将来你自己）很高兴不要将函数误解为全局。当您对类和成员函数进行良好命名时，您会错过没有类名的重要信息。`Factory::get_instance()`比 . 携带更多信息`get_instance()`。

# matlab - 带有单元格数组的 Matlab 中的 For 循环不起作用

> ID：13671728
> 
> 赞同：0
> 
> 时间：2012-12-02T17:23:34.350
> 
> 标签：matlab, for-loop

我正在使用 Matlab 使用 Rocchio 分类方法。我有 160 个 txt 文件。我已经计算了每个文档中每个单词的词频，所以现在有一个 1x160 单元格数组“Set”，它由 160 个单元格组成，每个单元格中有多个整数（文档中每个词的词频）。我试图取每个整数 i，并应用下一个公式 1+log10(i) 来计算词频加权。我想出了下一个代码：

```
function [tfw]=TFWeighting(Set)
size(Set);
TFW=cell(0);
for i=1:size(Set)
    for j=1:size(Set{1,i})
       TFW{1,i}(j,1) = 1+log10(Set{1,i}(j,1));
    end
end
tfw=TFW;
end 
```

好吧，它有效，但仅适用于第一个单元格。所有其他 159 个单元格均未触及。可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T17:27:43.417

这一行：

```
for i=1:size(Set) 
```

是你的罪魁祸首。

size(Set) 是 [1 160]，所以 MATLAB 说 for i = 1:1;

你要：

```
for i=1:length(Set) 
```

同样的潜在错误在几行之后发生：

```
for j=1:size(Set{1,i})
   TFW{1,i}(j,1) = 1+log10(Set{1,i}(j,1));
end 
```

在不知道你的 Set 中有什么的情况下，很难说，但我敢打赌，你可以通过移除内部循环并使用 MATLAB 一次处理整个向量或矩阵的能力来加快整个过程：

```
for i = 1:length(Set)
    TFW{i} =  1 + log10(Set{1,i}(:));
end 
```

如果你想变得超级花哨，这里有一个单行解决方案

```
TFW = cellfun(@(c) 1 + log10(c),Set,'UniformOutput',false); 
```

# html - 创建投影时，我的锚标记不可点击

> ID：13671729
> 
> 赞同：0
> 
> 时间：2012-12-02T17:23:37.020
> 
> 标签：html, css

我有以下 HTML 和 CSS，创建了一个带有阴影的大面板，应该可以点击。但事实并非如此。我认为这是 Z 索引和相对定位的问题，但我想不出一种方法可以让它在不丢失阴影的情况下工作。

[http://jsfiddle.net/ddfAL/](http://jsfiddle.net/ddfAL/)

HTML：

```
<div id="container">
<div class="drop-shadow"><a href="#">Click</a></div>
</div>​ 
```

CSS：

```
#container {
    width: 500px;
    height: 500px;
    padding: 50px;
    z-index: -10;
    position: relative;
    background-color: #bbb;
}

a {
    display: block;
    padding: 50px;
}

.drop-shadow {
  position: relative;
  color: #888;
  background: #fdfdfd;
  border: 1px solid #ccc;
  -moz-box-shadow: inset 0 0 0 5px #f3f0e9, inset 0 0 13px rgba(0, 0, 0, 0.9);
  -webkit-box-shadow: inset 0 0 0 5px #f3f0e9, inset 0 0 13px rgba(0, 0, 0, 0.9);
  -o-box-shadow: inset 0 0 0 5px #f3f0e9, inset 0 0 13px rgba(0, 0, 0, 0.9);
  box-shadow: inset 0 0 0 5px #f3f0e9, inset 0 0 13px rgba(0, 0, 0, 0.9);
}

.drop-shadow:before, .drop-shadow:after {
  content: "";
  position: absolute;
  z-index: -1;
  bottom: 15px;
  left: 5px;
  width: 50%;
  height: 20%;
  -moz-box-shadow: 0 15px 8px rgba(0, 0, 0, 0.5);
  -webkit-box-shadow: 0 15px 8px rgba(0, 0, 0, 0.5);
  -o-box-shadow: 0 15px 8px rgba(0, 0, 0, 0.5);
  box-shadow: 0 15px 8px rgba(0, 0, 0, 0.5);
  -moz-transform: rotate(-3deg);
  -webkit-transform: rotate(-3deg);
  -o-transform: rotate(-3deg);
  -ms-transform: rotate(-3deg);
  transform: rotate(-3deg);
}

.drop-shadow:after {
  right: 5px;
  left: auto;
  -moz-transform: rotate(3deg);
  -webkit-transform: rotate(3deg);
  -o-transform: rotate(3deg);
  -ms-transform: rotate(3deg);
  transform: rotate(3deg);
} 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:57:15.510

Simplest fix is to add this CSS rule:

```
body {
   position:relative;
   z-index:-11;
} 
```

You might consider restructuring your markup to avoid using negative `z-index` because you'll risk micromanaging them (as we've already begun to do by adding a `z-index` to the `<body>`).

# c# - 3 路快速排序算法

> ID：13671731
> 
> 赞同：2
> 
> 时间：2012-12-02T17:23:45.793
> 
> 标签：c#, algorithm, quicksort

这是3路快速排序...

```
private void quicksort3(int[] input, int low, int high)
{
    int i = low - 1, j = high, left = low - 1, right = high, pivot = input[high], k;

    if (high <= low) return;
    while (true)
    {
        while (input[++i] < pivot) ;
        while (pivot < input[--j])
            if (j == low) break;
        if (i >= j) break;
        swap(input, i, j);
        if (input[i] == pivot) 
        {
            left++; 
            swap(input, left, i); 
        }
        if (pivot == input[j]) {
            right--;
            swap(input, j, right);
        }
    }
    swap(input, i, high); j = i - 1; i++;
    for (k = low; k < left; k++, j--) 
        swap(input, k, j);
    for (k = high - 1; k > right; k--, i++) 
        swap(input, i, k);
    quicksort3(input, low, j);
    quicksort3(input, i, high);
} 
```

对于输入`9 5 3`，我得到异常错误`Index was outside the bounds of the array.`，此处发生异常，`pivot = input[high]`其中 high 的值为 -1（所以我明白为什么我有错误）但是我该如何解决呢？

我这样调用函数`quicksort3(arr,0,arr.Length-1);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T17:47:56.310

> 但我该如何解决呢？

通过在达到此边缘条件时提前退出。

```
 //int i = low - 1, j = high, left = low - 1, right = high, pivot = input[high], k;
 //if (high <= low) return;

 if (high <= low) return;
 int i = low - 1, j = high, left = low - 1, right = high, pivot = input[high], k; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T17:50:02.743

在检查边界条件之前执行您的赋值。所以你应该放在`pivot = input[high]`line 之后`if (high <= low) return;`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-02T17:59:12.823

可能有点离题，但在[Robert Sedgewick 和 Kevin Wayne 的“算法”一书中](http://algs4.cs.princeton.edu)有很棒的 3 路快速排序，我只是喜欢这段代码，它非常简单，而且它确实符合它的意图。
你可以在这里看到它 - [Quick3way.java](http://algs4.cs.princeton.edu/23quicksort/Quick3way.java.html)

```
private static void sort(Comparable[] a, int lo, int hi) { 
    if (hi <= lo) return;
    int lt = lo, gt = hi;
    Comparable v = a[lo];
    int i = lo;
    while (i <= gt) {
        int cmp = a[i].compareTo(v);
        if      (cmp < 0) exch(a, lt++, i++);
        else if (cmp > 0) exch(a, i, gt--);
        else              i++;
    }

    sort(a, lo, lt-1);
    sort(a, gt+1, hi);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-04T13:07:55.743

这应该有效：

```
 while(a[i++]<v); 
 while(a[j]>v) 
   j--; 
```

其余的还可以。

# hibernate - DDD +hibernate+与soa集成

> ID：13671732
> 
> 赞同：1
> 
> 时间：2012-12-02T17:23:48.267
> 
> 标签：hibernate, domain-driven-design, soa

起初我们有一个模型

```
class Person extends EntityBase<Person, PersonNumber>{
 private PersonNumber personNumber;
 private String name;
 private Contact contact;
 private String educationLevel;
}
class Contact extends ValueObjectBase<Contact> {
  private String phone;
  private String address;
  private String contactPerson;
} 
```

但是现在我们必须与另一个系统名称“System DC”整合，原来的人表被拆开，personNumber，name，phone，address列现在移动到“System DC”。并且“SystemDC”提供了一个数据库视图“DC_PersonView”给我们查询。如果我们需要创建一个人，我们必须从“SystemDC”调用webservice。

所以我们定义一个 personDTO 像

```
 class PersonDTO{
 private PersonNumber personNumber;
 private String name;
 private String phone;
 private String address;
 } 
```

计划一：

1.  将 person 重构为 IPerson 接口
2.  定义一个 PersonWrape 类

    ```
    class PersonWrape implements IPerson {
     private Person person;
     private PersonDTO personDTO;
    } 
    ```

3.  在 PersonWrape 存储库中

    ```
    void SavePerson(IPerson person) {
      systemDC.saveWebservice(person.getPersonDTO);
      personRepository.save(person);// map the column not in systemDC like  educationLevel to our person table.
      } 
    ```

方案2：只修改personRepository：

```
 void SavePerson(IPerson person) {
      PersonDTO personDTO = PersonDTO.fromEntiry(person);
      systemDC.saveWebservice(personDTO);
      personRepository.save(person);// map the column not in systemDC like  educationLevel
      } 
```

但是查询人会很麻烦..

在这种情况下我们如何建模？请给我们一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:29:40.297

使用 DTO 并且在使用 SOA 时不暴露域模式非常好。其他任何事情最终都会变得一团糟（尝试在客户端应用程序中使用域模型）。

然而，问题在于您尝试将域模型公开为 CRUD SOA 服务。您不能让 SOA 服务更改任意实体的任何字段。它必须遵循域模型以及您在其中定义的方法和服务。

例如。如果您在`User`类中有一个被调用的方法，`CalculateAge`那么创建一个被调用的 SOA 方法`CalculateUserAge`，而不是一个被调用的方法`UpdateUser`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T17:31:11.997

似乎您在两个有界上下文（BC）之间有一个集成场景。在这些场景中，通常可以识别可以确定实体更改如何传播的关系 BC。

在您的用例中，您似乎有一个人的单一概念（每个人在 BC 之间共享一个身份），但是您有 2 个不同的 BC，其中一个人是清单的，每个 BC 包含和管理不同的人数据。那么你讨论的save操作其实就是两个save操作，每个BC一个。每个 BC 保存它感兴趣的信息。如果您有一个用例，例如接受两个 BC 的人员信息的 UI 表单，则该用例应该将保存命令显式发送到两个 BC。您的计划 2 最接近这种方法，但是我不会将该代码放在存储库中。相反，我会直接从表示层或应用层调用两个不同的服务。

**您还可以考虑的是您的原始 BC （我们称之为A**）和 System **DC**之间是否存在某种下游关系。例如，如果**DC**位于 A 的下游以获取人员数据，那么您可以实现事件驱动的方法，而不是在保存期间显式调用这两个服务。通过这种方法，**A**将发布有关人员数据更改的事件，并且**A**和**DC**之间的集成点将订阅这些事件并在**DC**中进行适当的修改。请注意，这种方法通常是[最终一致的](http://en.wikipedia.org/wiki/Eventual_consistency). 总体而言，事件驱动的方法更复杂，但也更灵活。

# c# - 使用 C# 的 Python 脚本输出重定向

> ID：13671733
> 
> 赞同：1
> 
> 时间：2012-12-02T17:23:56.470
> 
> 标签：c#, python, .net, windows, outputstream

这个问题似乎是重复的，我已经尝试了所有建议的解决方案，但徒劳无功，我想使用以下代码重定向 python 脚本输出：

```
 System.Diagnostics.Process proc = new System.Diagnostics.Process();
    proc.StartInfo.FileName = "python.exe";
    proc.StartInfo.Arguments = Application.StartupPath.Replace("\\bin\\Debug", "") + "\\scripts\\test.py";
    proc.OutputDataReceived += OutputDataReceived;
    proc.ErrorDataReceived += ErrorDataReceived;

    proc.StartInfo.RedirectStandardOutput = true;
    proc.StartInfo.UseShellExecute = false;
    proc.StartInfo.CreateNoWindow = true;
    proc.StartInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden; 

    proc.Start();
    //proc.WaitForExit();

    StringBuilder q = new StringBuilder();
    while (!proc.HasExited)
    {
        q.Append(proc.StandardOutput.ReadToEnd());
    }
    string r = q.ToString();
    r = proc.StandardOutput.ReadToEnd();
    MessageBox.Show(r);
}
private void OutputDataReceived(object sender, DataReceivedEventArgs args)
{
    //textOutput.Text += args.Data;
    MessageBox.Show(args.Data);
} 
```

python脚本包含`print "hello test"`我尝试取消缓冲输出但徒劳无功。

请提供任何帮助。

我正在使用 VS 2010 .NET 4.0、Python 2.7、winXP sp3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T17:38:22.527

尝试创建一个 StreamReader 实例而不是 StringBuilder。这段代码对我来说很好：

```
 System.Diagnostics.Process proc = new System.Diagnostics.Process();
        proc.StartInfo.FileName = "ping.exe";
        proc.StartInfo.Arguments = "8.8.8.8";

        proc.StartInfo.RedirectStandardOutput = true;
        proc.StartInfo.UseShellExecute = false;
        proc.StartInfo.CreateNoWindow = true;
        proc.StartInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;

        proc.Start();
       StreamReader q = proc.StandardOutput;
       while (!proc.HasExited)
         Console.WriteLine(q.ReadLine());

        Console.ReadKey(); 
```

# scala - 迭代Scala中的密封特征？

> ID：13671734
> 
> 赞同：41
> 
> 时间：2012-12-02T17:24:06.450
> 
> 标签：scala, enumeration, scala-macros, sealed

我只是想知道是否可以在 Scala 中迭代一个密封的特征？如果不是，为什么不可能？既然特征是密封的，应该是可能的吧？

我想做的是这样的：

```
sealed trait ResizedImageKey {

  /**
   * Get the dimensions to use on the resized image associated with this key
   */
  def getDimension(originalDimension: Dimension): Dimension

}

case class Dimension(width: Int,  height: Int)

case object Large extends ResizedImageKey {
  def getDimension(originalDimension: Dimension) = Dimension(1000,1000)
}

case object Medium extends ResizedImageKey{
  def getDimension(originalDimension: Dimension) = Dimension(500,500)
}

case object Small extends ResizedImageKey{
  def getDimension(originalDimension: Dimension) = Dimension(100,100)
} 
```

我想要的可以通过给枚举值提供一个实现在 Java 中完成。Scala中是否有等价物？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-12-02T18:48:12.563

在我看来，这实际上是 2.10 宏的合适用例：您希望访问您知道编译器具有但未公开的信息，并且宏为您提供了一种（相当）简单的方法来窥视内部。[请在此处](https://stackoverflow.com/a/12135229/334519)查看我的答案以获取相关（但现在稍微过时）的示例，或者仅使用以下内容：

```
import language.experimental.macros
import scala.reflect.macros.Context

object SealedExample {
  def values[A]: Set[A] = macro values_impl[A]

  def values_impl[A: c.WeakTypeTag](c: Context) = {
    import c.universe._

    val symbol = weakTypeOf[A].typeSymbol

    if (!symbol.isClass) c.abort(
      c.enclosingPosition,
      "Can only enumerate values of a sealed trait or class."
    ) else if (!symbol.asClass.isSealed) c.abort(
      c.enclosingPosition,
      "Can only enumerate values of a sealed trait or class."
    ) else {
      val children = symbol.asClass.knownDirectSubclasses.toList

      if (!children.forall(_.isModuleClass)) c.abort(
        c.enclosingPosition,
        "All children must be objects."
      ) else c.Expr[Set[A]] {
        def sourceModuleRef(sym: Symbol) = Ident(
          sym.asInstanceOf[
            scala.reflect.internal.Symbols#Symbol
          ].sourceModule.asInstanceOf[Symbol]
        )

        Apply(
          Select(
            reify(Set).tree,
            newTermName("apply")
          ),
          children.map(sourceModuleRef(_))
        )
      }
    }
  }
} 
```

现在我们可以编写以下内容：

```
scala> val keys: Set[ResizedImageKey] = SealedExample.values[ResizedImageKey]
keys: Set[ResizedImageKey] = Set(Large, Medium, Small) 
```

这一切都是非常安全的——如果你请求一个不是密封的类型的值，你会得到一个编译时错误，有非对象的孩子，等等。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-11T19:27:39.773

上面提到的基于 Scala 宏的解决方案效果很好。但是，情况并非如此：

```
sealed trait ImageSize                            
object ImageSize {                                
    case object Small extends ImageSize             
    case object Medium extends ImageSize            
    case object Large extends ImageSize             
    val values = SealedTraitValues.values[ImageSize]
} 
```

为此，可以使用以下代码：

```
import language.experimental.macros
import scala.reflect.macros.Context

object SealedExample {
    def values[A]: Set[A] = macro values_impl[A]

    def values_impl[A: c.WeakTypeTag](c: Context) = {
        import c.universe._

        val symbol = weakTypeOf[A].typeSymbol

        if (!symbol.isClass) c.abort(
            c.enclosingPosition,
            "Can only enumerate values of a sealed trait or class."
        ) else if (!symbol.asClass.isSealed) c.abort(
            c.enclosingPosition,
            "Can only enumerate values of a sealed trait or class."
        ) else {
            val siblingSubclasses: List[Symbol] = scala.util.Try {
                val enclosingModule = c.enclosingClass.asInstanceOf[ModuleDef]
                enclosingModule.impl.body.filter { x =>
                    scala.util.Try(x.symbol.asModule.moduleClass.asClass.baseClasses.contains(symbol))
                        .getOrElse(false)
                }.map(_.symbol)
            } getOrElse {
                Nil
            }

            val children = symbol.asClass.knownDirectSubclasses.toList ::: siblingSubclasses
            if (!children.forall(x => x.isModuleClass || x.isModule)) c.abort(
                c.enclosingPosition,
                "All children must be objects."
            ) else c.Expr[Set[A]] {
                def sourceModuleRef(sym: Symbol) = Ident(
                    if (sym.isModule) sym else
                        sym.asInstanceOf[
                            scala.reflect.internal.Symbols#Symbol
                            ].sourceModule.asInstanceOf[Symbol]
                )

                Apply(
                    Select(
                        reify(Set).tree,
                        newTermName("apply")
                    ),
                    children.map(sourceModuleRef(_))
                )
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-04-27T13:03:35.343

看看@TravisBrown 的[问题](https://stackoverflow.com/questions/25838411/cant-prove-that-singleton-types-are-singleton-types-while-generating-type-class)截至无形 2.1.0-SNAPSHOT 中发布的代码在他的问题中起作用并产生一个`Set`枚举的 ADT 元素，然后可以遍历这些元素。为了便于参考，我将在这里回顾他的解决方案（`fetchAll`是[我的](https://stackoverflow.com/questions/43650265/implicit-arguments-how-to-encode-in-function-signature):-)）

```
import shapeless._

  trait AllSingletons[A, C <: Coproduct] {
    def values: List[A]
  }

  object AllSingletons {
    implicit def cnilSingletons[A]: AllSingletons[A, CNil] =
      new AllSingletons[A, CNil] {
        def values = Nil
      }

    implicit def coproductSingletons[A, H <: A, T <: Coproduct](implicit
                                                                tsc: AllSingletons[A, T],
                                                                witness: Witness.Aux[H]
                                                               ): AllSingletons[A, H :+: T] =
      new AllSingletons[A, H :+: T] {
        def values: List[A] = witness.value :: tsc.values
      }
  }

  trait EnumerableAdt[A] {
    def values: Set[A]
  }

  object EnumerableAdt {
    implicit def fromAllSingletons[A, C <: Coproduct](implicit
                                                      gen: Generic.Aux[A, C],
                                                      singletons: AllSingletons[A, C]
                                                     ): EnumerableAdt[A] =
      new EnumerableAdt[A] {
        def values: Set[A] = singletons.values.toSet
      }
  }

  def fetchAll[T](implicit ev: EnumerableAdt[T]):Set[T] = ev.values 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-02T17:51:56.180

本机没有此功能。在更常见的情况下没有意义，在这种情况下，您将实际类作为密封特征的子类，而不是 case 对象。看起来您的案例可能会更好地通过枚举处理

```
object ResizedImageKey extends Enumeration {
  type ResizedImageKey = Value
  val Small, Medium, Large = Value
  def getDimension(value:ResizedImageKey):Dimension = 
      value match{
         case Small => Dimension(100, 100)
         case Medium => Dimension(500, 500)
         case Large => Dimension(1000, 1000)

}

println(ResizedImageKey.values.mkString(",") //prints Small,Medium,Large 
```

或者，您可以自己创建一个枚举，为方便起见，可能将其放在伴随对象中

```
object ResizedImageKey{
  val values = Vector(Small, Medium, Large)
}

println(ResizedImageKey.values.mkString(",") //prints Small,Medium,Large 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-17T19:51:06.887

在另一个线程中查看此[答案](https://stackoverflow.com/a/27441788/1148030)。Lloydmetas [Enumeratum 库在](https://github.com/lloydmeta/enumeratum)[一个易于使用的包](http://search.maven.org/#search%7Cga%7C1%7Ccom.beachape%2Fenumeratum)中提供了类似 java Enum 的功能，并且样板文件相对较少。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-22T08:21:38.287

也可以解决这个问题的方法是添加隐式转换以向枚举添加方法，而不是迭代密封特征。

```
object SharingPermission extends Enumeration {
  val READ = Value("READ")
  val WRITE = Value("WRITE")
  val MANAGE = Value("MANAGE")
}

/**
 * Permits to extend the enum definition and provide a mapping betweet SharingPermission and ActionType
 * @param permission
 */
class SharingPermissionExtended(permission: SharingPermission.Value) {

  val allowRead: Boolean = permission match {
    case SharingPermission.READ => true
    case SharingPermission.WRITE => true
    case SharingPermission.MANAGE => true
  }
  val allowWrite: Boolean = permission match {
    case SharingPermission.READ => false
    case SharingPermission.WRITE => true
    case SharingPermission.MANAGE => true
  }
  val allowManage: Boolean = permission match {
    case SharingPermission.READ => false
    case SharingPermission.WRITE => false
    case SharingPermission.MANAGE => true
  }

  def allowAction(actionType: ActionType.Value): Boolean = actionType match {
    case ActionType.READ => allowRead
    case ActionType.WRITE => allowWrite
    case ActionType.MANAGE => allowManage
  }

}

object SharingPermissionExtended {
  implicit def conversion(perm: SharingPermission.Value): SharingPermissionExtended = new SharingPermissionExtended(perm)
} 
```

# java - 有没有办法取消和重用 ExecutorService？

> ID：13671739
> 
> 赞同：2
> 
> 时间：2012-12-02T17:25:01.783
> 
> 标签：java, multithreading, threadpool, executorservice, executor

我正在编写一个 Java Fractal Explorer，分形计算是多线程完成的。以前，我只是创建了一堆线程（与系统有处理器内核一样多）并将它们保存在一个数组中，但这会导致几个问题并且不是很优雅，现在我想切换到 Executors。

我需要的功能是：

*   用户可以随时选择分形图像的新区域进行放大，因此应该可以随时取消计算，并立即重新插入新任务
*   为了获得更好的性能，线程应该被重用（并且在取消后仍然存在）

我的问题是，当我在调用 shutdownNow()（取消）后提交新任务时，Java ExecutorService（我使用 Executors.newFixedThreadPool()）会引发异常。我当然可以只创建一个新的 ExecutorService，但是必须再次创建所有线程，据我了解，这非常昂贵（这是使用线程池的全部意义）。

所以基本上我需要的是一个使用线程池的 ExecutorService 实现，可以在不关闭它的情况下取消它，所以它可以被重用。

已经有这样的东西还是我必须自己写？（不能太难，对吧？；））

我当前的代码可以在[https://github.com/lucaswerkmeister/JFractalizer](https://github.com/lucaswerkmeister/JFractalizer)找到。

提前致谢，

卢卡斯

PS：当使用执行器时，我会将图像分割成比线程更多的部分，因此如果一个部分完成得更快，则线程不会空闲，而是可以继续处理图像的另一部分。尽管如此，如果所有部分都可以并行计算，而不是某些部分比其他部分开始晚，那将是很酷的，但这只是一个奖励。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:33:16.500

You should use [`ExecutorService.html#shutdownNow()`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#shutdownNow%28%29) when you're done with the `ExecutorService` and you don't intend to submit new tasks to it.

If you want to keep using the same `ExecutorService`, you should cancel the individual tasks.

Method `ExecutorService.html#submit` returns a [`Future`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html) that can be used to cancel execution and/or wait for completion.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T17:34:21.733

您的任务应该能够处理中断。因此，您可以通过中断任务来取消任务。

```
 boolean flag = Thread.interrupted();
  if(flag == true )
      throw new InterruptedException(); 
```

# android - 在android中更新edittext

> ID：13671740
> 
> 赞同：1
> 
> 时间：2012-12-02T17:25:06.387
> 
> 标签：android, android-edittext

是否可以在已设置的 edittext 中更新文本？我已经用我的列表视图中的一个人的姓名和电话号码填写了我的编辑文本，我希望用户编辑这些详细信息。当我尝试输入例如姓氏并单击更新按钮时，它无法保存我的输入，但仍然保存了我从列表视图中传递的那个。

```
EditText sqlName = (EditText)findViewById(R.id.editName);
    EditText sqlNumber = (EditText)findViewById(R.id.editNumber);
    name = CustomListView.name;
    num = CustomListView.number;
    Button bUpdate = (Button)findViewById(R.id.editUpdate);
    Button bView = (Button)findViewById(R.id.editView);
    sqlName.setText(name);
    sqlNumber.setText(num);
    nameChanged = sqlName.getText().toString();
    numChanged = sqlNumber.getText().toString();
    bUpdate.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            GroupDb info = new GroupDb(EditDetails.this);
            info.open();
            long rowid = info.getRowId(name, num);
            Toast.makeText(getApplicationContext(), nameChanged+" "+numChanged+" ", Toast.LENGTH_LONG).show();
            info.updateNameNumber(rowid, nameChanged, numChanged);
            Toast.makeText(getApplicationContext(), "Update Successful!", Toast.LENGTH_LONG).show();
            info.close();
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:29:13.773

The problem with your code is that you are fetching the values from the EditTexts even before they were updated. You need to wait for the user to press the update button and then get the text from the EditTexts and pass them to the database to save.

Try the following code.

```
 EditText sqlName = (EditText)findViewById(R.id.editName);
    EditText sqlNumber = (EditText)findViewById(R.id.editNumber);
    name = CustomListView.name;
    num = CustomListView.number;
    Button bUpdate = (Button)findViewById(R.id.editUpdate);
    Button bView = (Button)findViewById(R.id.editView);
    sqlName.setText(name);
    sqlNumber.setText(num);
    bUpdate.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            nameChanged = sqlName.getText().toString();
            numChanged = sqlNumber.getText().toString();
            GroupDb info = new GroupDb(EditDetails.this);
            info.open();
            long rowid = info.getRowId(name, num);
            Toast.makeText(getApplicationContext(), nameChanged+" "+numChanged+" ", Toast.LENGTH_LONG).show();
            info.updateNameNumber(rowid, nameChanged, numChanged);
            Toast.makeText(getApplicationContext(), "Update Successful!", Toast.LENGTH_LONG).show();
            info.close();
            }
        }); 
```

# java - gson反序列化android问题

> ID：13671747
> 
> 赞同：2
> 
> 时间：2012-12-02T17:25:47.620
> 
> 标签：java, android, gson

我使用 gson 反序列化来自远程服务的 json 提要，我有一个提要 json 具有结构：

```
{
"getListContentGroupOfAppIDResult":{
"error":1,
"listContentGroup":[
{
"contentgroupID":"30",
"contentgroupImage":null,
"contentgroupName":"Series 1",
"contentgroupappID":"14"
},
{
"contentgroupID":"31",
"contentgroupImage":null,
"contentgroupName":"Series 2",
"contentgroupappID":"14"
}
],
"msg":"SUCCESS"
} 
```

}

这是我的系列对象：

```
public class Series implements Parcelable {
        private String contentgroupID;
        private String contentgroupName;
        private String contentgroupImage;
        private String contentgroupappID;

        public String getcontentgroupappID() {
            return contentgroupappID;
        }

        public void setcontentgroupappID(String contentgroupappID) {
            this.contentgroupappID = contentgroupappID;
        }

        public String getcontentgroupID() {
            return contentgroupID;
        }

        public void setcontentgroupID(String contentgroupID) {
            this.contentgroupID = contentgroupID;
        }

        public String getcontentgroupName() {
            return contentgroupName;
        }

        public void setcontentgroupName(String contentgroupName) {
            this.contentgroupName = contentgroupName;
        }

        public String getcontentgroupImage() {
            return contentgroupImage;
        }

        public void setcontentgroupImage(String contentgroupImage) {
            this.contentgroupImage = contentgroupImage;
        }

        public Series() {
            super();
            // TODO Auto-generated constructor stub
        }

        public Series(String contentgroupID, String contentgroupName,
                String contentgroupImage, String contentgroupappID) {
            super();
            this.contentgroupID = contentgroupID;
            this.contentgroupName = contentgroupName;
            this.contentgroupImage = contentgroupImage;
            this.contentgroupappID = contentgroupappID;
        }

        public Series(Parcel in) {
            contentgroupID = in.readString();
            contentgroupImage = in.readString();
            contentgroupName = in.readString();
            contentgroupappID = in.readString();
        }

        public int describeContents() {
            // TODO Auto-generated method stub
            return 0;
        }

        public void writeToParcel(Parcel dest, int flags) {
            // TODO Auto-generated method stub
            dest.writeString(contentgroupID);
            dest.writeString(contentgroupImage);
            dest.writeString(contentgroupName);
            dest.writeString(contentgroupappID);
        }

    public static final Parcelable.Creator<Series> CREATOR = new Parcelable.Creator<Series>() {

        public Series createFromParcel(Parcel in) {
            // TODO Auto-generated method stub
            return new Series(in);
        }

        public Series[] newArray(int size) {
            // TODO Auto-generated method stub
            return new Series[size];
        }
    };
} 
```

这是我的 ListSeries 对象：

```
public class ListSeries implements Serializable {
        private ArrayList<Series> listContentGroup;// listContentGroup
        private String error;
        private String msg;

        public ArrayList<Series> getlistContentGroup() {
            return listContentGroup;
        }

        public void setlistContentGroup(ArrayList<Series> listContentGroup) {
            this.listContentGroup = listContentGroup;
        }

        public String getError() {
            return error;
        }

        public void setError(String error) {
            this.error = error;
        }

        public String getMsg() {
            return msg;
        }

        public void setMsg(String msg) {
            this.msg = msg;
        }

        public ListSeries() {
            // TODO Auto-generated constructor stub
        }

        public ListSeries(ArrayList<Series> listContentGroup, String error,
                String msg) {
            super();
            this.listContentGroup = listContentGroup;

            this.error = error;
            this.msg = msg;
        }
    } 
```

现在正在使用 gson 将 json 反序列化为对象

```
 // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(url);
            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            static InputStream is = httpEntity.getContent();

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

    Gson gson = new Gson();
            try {
                   ListSeries list = gson.fromJson(new InputStreamReader(is),
                        ListSeries.class);
                Log.e("MSG", list.getMsg()); 
```

但不能反序列化到对象。请帮我！

# c# - 如何在实体 3.5 的明细表中插入行？

> ID：13671749
> 
> 赞同：0
> 
> 时间：2012-12-02T17:25:56.617
> 
> 标签：c#, entity-framework

我在 Visual Studio 2008 和 Entity 3.5 中开发了一个简单的应用程序。在我的数据库中，我有一个主表和一个详细信息表。

在实体 4 或更高版本中，我们可以访问详细信息表中的主密钥，如下所示：

```
tabl2.masterkey=..... 
```

但在实体 3.5 中，这不可用。如何在详细信息表中插入行？

```
Table2  t2 = new Table2();
T2.TableId1 // this property is unavailable 
```

此语法适用于实体 4 或更高版本，但不适用于实体 3.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T18:43:40.620

关于什么

```
Table1 t1 = new Table1();
Table2 t2 = new Table2();
t1.add(t2); 
```

说到T2.TableId1，我想你必须知道引用的关系名或字段名。检查t2的属性，我想你会在那里找到一些t1引用。

# bash - $$ 或 $ 是什么意思！在重击中？

> ID：13671750
> 
> 赞同：15
> 
> 时间：2012-12-02T17:26:14.557
> 
> 标签：bash, shell

这是一个简单的问题，但我没有找到任何信息。是什么意思`$!`或`$$`在bash？

例如：`ps -p $!` 或`pstree $$`？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-02T17:28:16.707

实际上，这些变量是 bash 从 Bourne shell 继承的。

`$$`表示当前 PID。

`$!`是您的 shell 在后台运行的最后一个程序的 PID（例如`myprog &`）

这是一个shell变量列表：

*   [http://unixhelp.ed.ac.uk/scrpt/scrpt2.2.2.html](http://unixhelp.ed.ac.uk/scrpt/scrpt2.2.2.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T17:30:12.477

[`$!`](http://tldp.org/LDP/abs/html/internalvariables.html#PIDVARREF) is the process ID of the last job run in the background.

[`$$`](http://tldp.org/LDP/abs/html/special-chars.html#PROCESSIDREF) is the process ID of the script itself.

(Both of the above are links to the [Advanced Bash Scripting Guide](http://tldp.org/LDP/abs/html/) on TDLP.)

# c# - 将我的 UserControl 添加到 HtmlGenericControl 的问题

> ID：13671753
> 
> 赞同：0
> 
> 时间：2012-12-02T17:26:44.643
> 
> 标签：c#, .net, exception, user-controls, htmlgenericcontrol

更新：关闭，发现即使我在调试时遇到该错误，它实际上已添加到 Controls 集合中，但仍然很烦人，因为我无法像往常一样看到它。

这段代码过去可以正常工作，但由于某种原因它开始失败。只有当我尝试将 UserControl 添加到“flightResult”时它才会失败。如果我使用 .NET 控件，它就可以正常工作。

我尝试过的事情。

1.  添加另一个带有静态文本的简单 UserControl，但它给了我同样的错误。
2.  清理和重建我的解决方案。
3.  将 flightResult 更改为“new Panel()”，但同样的问题。
4.  在网上搜索遇到此问题的人，我找到了一个线程，但没有解决方案。

最近真正的唯一变化是我安装了 IIS 7.0 - 这与此有什么关系吗？

我的代码：

```
 var flightResult = new HtmlGenericControl("div");

 var flightProduct = (FlightProduct) LoadControl("~/UserControls/FlightProduct.ascx");

 //finalResult.InnerText = ""

finalResult.Controls.Add(flightProduct);

//finalResult.InnerText = {InnerText = '((System.Web.UI.HtmlControls.HtmlContainerControl)(finalResult)).InnerText' threw an exception of type 'System.Web.HttpException'} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:39:00.493

它对我有用，试试这个。

**用户控制标记**

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="Control1.ascx.cs" Inherits="Control" %>
<asp:Label ID="lblTest" runat="server" Text="This is a test"></asp:Label> 
```

**Default.aspx 页面代码后面**

```
const string path = "~/Control1.ascx";
HtmlGenericControl div;
 protected void Page_Load(object sender, EventArgs e){

   div = new HtmlGenericControl("div");
    div.Attributes.Add("runat", "server");
    var userControl = LoadControl(path);
  if (userControl != null)
      div.Controls.Add(userControl);
  this.form1.Controls.Add(div);

} 
```

# android - 如何自定义共享意图中显示的图标和标签？

> ID：13671757
> 
> 赞同：1
> 
> 时间：2012-12-02T17:27:23.633
> 
> 标签：android, android-intent

我有一个名为“TwiOld”的应用程序。它是 twitter for Android 应用程序的扩展。

我是这样开始的：打开推特应用程序，选择一条推文并点击分享按钮。

我如何在启动器中使用相同的应用程序名称并在共享菜单中使用不同的标签（在图片下方圈出）？

![在此处输入图像描述](../Images/f5361ee9564c31249b086c74281a655c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:05:37.670

它与您的应用程序图标相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T09:34:20.520

尝试使用 LabeledIntent，请参阅此处的用法示例： [如何过滤特定应用的 ACTION_SEND 意图（并为每个应用设置不同的文本）](https://stackoverflow.com/questions/9730243/how-to-filter-specific-apps-for-action-send-intent-and-set-a-different-text-for)

*您可以使用此构造函数*设置文本

 *> LabeledIntent(Intent origIntent, String sourcePackage, CharSequence nonLocalizedLabel, int icon)
> 
> 从给定的意图创建一个带标签的意图，为其提供文本标签和图标资源。

摘自：

[https://developer.android.com/reference/android/content/pm/LabeledIntent.html](https://developer.android.com/reference/android/content/pm/LabeledIntent.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-26T05:29:25.883

在您的清单中，只需将标签和图标属性添加到您的意图活动中。

```
<activity
        android:name=".IntentActivity"
        android:enabled="true"
        android:exported="true"

        android:icon="@drawable/custom_icon"
        android:label="@string/custom_label">
        <intent-filter>
        ...
        </intent-filter>
</activity> 
```*

# java - Java 原始数据类型 byte 和类 Byte

> ID：13671765
> 
> 赞同：2
> 
> 时间：2012-12-02T17:28:12.790
> 
> 标签：java, byte, primitive-types, datainputstream, dataoutputstream

背景：我有一个任务，我将在非常有限的范围内通过套接字传递信息。每条消息最多可以有 10 个字节，我想我只发送一个字节（因为一个字节足以在协议中发出 256 个不同状态的信号）。现在我开始四处寻找有关此的信息，并且遇到了很多问题。如果可以的话，请纠正我的假设错误并回答我的字面问题。

所以有原始数据类型字节（基本上是介于 -128 和 127 之间的数字，对吗？）。如果我使用

```
byte b = 125;
System.out.println(b); 
```

...我将正确的数字打印到控制台，如果我尝试分配超出限制的值，编译器会抱怨。

然后我们有 Byte 类，它显然是从 byte 数据类型（或 API 中所说的 int ）创建一个 Byte 对象：

```
Byte b = new Byte(20);
System.out.println(b); 
```

这也会产生预期的结果，并且 20 会打印到控制台，如果我尝试使用高于 127 的数字，编译器会抱怨。

**1.数据类型byte和类Byte有什么区别？是否主要是因为该类提供了很多方法，例如 Integer 类为 int 类型提供的方法？**

下一个片段会产生奇怪的结果（对我来说）：

```
import java.io.*;

public class ByteTest {

    public static void main(String[] args) {

        DataInputStream in = new DataInputStream(System.in);

        try {
            byte d;
            while((d = in.readByte()) != 0) {
                System.out.println(d);
            }
        }
        catch (IOException e) {
            e.printStackTrace();
        }
        System.exit(0);
        }
    } 
```

**2\. 读取输入，然后输出将输入解释为十进制形式的 ASCII 字符（例如，1 返回 49），然后是数字 13 和 10 的另外两行。这是为什么？**

（如果我将 d 声明为 Byte 或 byte 都没有关系，结果是相同的，我已经混合使用从 Byte b 获取值等等，但是这三行（或更多）始终是结果我想要的只是输入马上回到我身上）

基本上我对此有点困惑，但最后，我想要的只是发送这些单个字节的合理方式，当我发送 34 时，我希望对方接收 34，仅此而已。

**3\. 假设我不使用 Byte 类，只想通过流发送类型字节。所有常规流和阅读器似乎都只读取一个 int （我假设这意味着它们将阻塞，直到它们具有至少两个字节的输入，而我只会发送一个字节）。我是否被迫使用`DataInputStream`以及 `DataOutputStream`必须将类型字节包装在对象字节中的位置，还是有其他方法？**

所有这一切都让我怀疑我是否可以相信一个对象 Byte 真的只是相当于一个数据字节，仅此而已......我很困惑 :(

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T17:36:12.053

1.  是的。例如，字节包装器还允许表示一个可为空的字节，或将字节值存储到集合和映射中。

2.  您将文本发送到 DataInputStream，然后使用您的平台默认编码将此文本编码为字节。假设它是 ASCII，那么第一个字符将因此被编码为一个字节，然后`\r`被`\n`发送，这也是使用 ASCII 编码的。因此，您读取的 3 个字节是 char + 的 ASCII 编码值`\r\n`。

3.  [The javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#read%28%29) explains what `InputStream.read()` does. It reads **one** byte, and converts it to an int between 0 and 255, in order to distinguish between the byte -1 and the -1 which means "end of stream". To get a byte from the returned int, check it isn't -1 (which means end of stream), and cast it to a byte: `byte b = (byte) readValue;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T17:37:10.310

There is no need to wrap to object Byte in your case, you mainly need Byte when working with collections.

DataOutPutStream is fine, use method `write(int b)`

```
byte b = (byte) 0x03;
DataOutPutStream dos;
// ....
dos.write(b); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-02T17:35:23.787

正如您所说，不同之处在于 Byte 是字节的包装类。作为`byte`原语，您不能`null`对任何`byte`变量进行赋值。相反，`Byte`是一个对象，所以你可以赋值`null`。

所以：

```
byte primitiveByte = null; // Compiler error
Byte objectByte = null; // works 
```

正如 Vulcan 所说，Byte 被自动装箱为 byte，这意味着如果 JVM 看到它可以使用 byte 而不是 Byte 对象，它会用 byte 原语替换出现。

# speech-recognition - Google Speech Voice API and database specifications?

> ID：13671771
> 
> 赞同：4
> 
> 时间：2012-12-02T17:28:31.533
> 
> 标签：speech-recognition, google-voice

I'm using Google Speech Voice API for a big project ; as you understand i need to use voice recognition in an input, I built it this way :

```
<input type="text" id="search_text" name="search_text" value="" autocomplete="off" maxlength="200" x-webkit-speech lang="fr" onwebkitspeechchange="this.form.submit();"> 
```

It works. It recognize your voice and try to put something. My problem is it doesn't understand anything because it certainly takes Google database as reference to understand what you're saying.

I want to set my database as reference instead and get good recognition, but after a few hours searching a solution on Internet I didn't find it.

I tried to understand how GRXML works (because you can add it to set some specifications on inputs) - i gave up as well, i didn't even get the point about this thing.

Is someone has experience in voice recognition and could help me about this ? There's almost no documentation on Internet about voice recognition and database link (or even XML file, i could generate it).

# java - Spring MVC 为什么这个 Hello World 在没有注释驱动标签的情况下运行良好（与 Spring 的任何其他项目不同）

> ID：13671776
> 
> 赞同：6
> 
> 时间：2012-12-02T17:29:05.943
> 
> 标签：java, spring, spring-mvc, annotations

我已经开始学习 Spring MVC 阅读本教程：http: [//viralpatel.net/blogs/spring-3-mvc-create-hello-world-application-spring-3-mvc/](http://viralpatel.net/blogs/spring-3-mvc-create-hello-world-application-spring-3-mvc/)

好的，这对我来说很清楚。

在此示例中，我有**web.xml**文件来配置我的 Web 应用程序：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee    /web-app_2_5.xsd"
id="WebApp_ID" version="2.5">

<display-name>Spring3MVC</display-name>
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>

<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>*.html</url-pattern>
</servlet-mapping> 
```

而用于配置mu DispatcherServlet的**spring-servlet.xml文件：**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans

http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<context:component-scan
    base-package="net.viralpatel.spring3.controller" />

<bean id="viewResolver"
    class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
</bean> 
```

而且，正如您在上一个链接中看到的那样，我只有一个控制器类来处理对“/hello” URL 的 HTTP 请求......好吧......这对我来说很清楚......

在此示例旁边，我通过 STS\Eclipse 中的相关模板项目创建了一个新的 Spring MVC 项目。

这个例子与前一个例子非常相似：我总是有 web.xml 文件来配置我的 web 应用程序，一个文件来配置 DispatcherServlet 和一个处理 HTTP 请求的控制器类。

但是有一些我无法理解的区别。

这是我的**web.xml**配置文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<!-- The definition of the Root Spring Container shared by all Servlets and Filters -->

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
</context-param>

<!-- Creates the Spring Container shared by all Servlets and Filters -->

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<!-- Processes application requests -->
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

这是**servlet-context.xml**文件（配置我的 DispatcherServlet 的配置文件）：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

<!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->
<context:component-scan base-package="com.mycompany.maventestwebapp" />
<!-- Enables the Spring MVC @Controller programming model -->
<annotation-driven />

<!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
<resources mapping="/resources/**" location="/resources/" />

<!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean> 
```

好的，如您所见，两个示例的配置文件存在一些差异：

在 STS\Eclipse 创建的项目中，在**servlet-context.xml**文件中，我有这些配置在我发布的第一个示例中不存在：

```
<!-- Enables the Spring MVC @Controller programming model -->
<annotation-driven /> 
```

好的......我已经阅读了很多关于这个配置标签的文档：意味着你可以定义 spring beans 依赖项，而不必实际在 xml 中指定一堆元素或实现一个接口或扩展一个基类。当 spring 启动时，它会读取其 xml 配置文件并查找 Foo 被标记为 @Controller 它知道该类是一个控制器并将其视为控制器。默认情况下，spring 假定它应该管理的所有类都在 beans.xml 文件中明确定义。然后是**组件扫描**告诉 Spring 它应该在类路径中搜索 com.mycompany.maventestweapp 下所有类的标记，并查看每个类以查看它是否具有 @Controller、@Repository、@Service 或 @Component 以及是否然后 Spring 将向 bean 工厂注册该类，就像您输入了 xml 配置文件一样。BLABLABLA ETCETCETC BLABLA

好的，这对我来说绝对清楚！我认为我没有问题可以理解为什么我的第二个示例的 DispatcherServler 配置文件中有**注释驱动标签，这一点很清楚。**

问题是要了解**为什么我的第一个示例的 DispatcherServlet 配置文件中没有此标记以及为什么它运行良好**如果我尝试从 servlet-context.xml 文件中删除此标记（在我的第二个示例中），这不会运行并进入错误说我：**HTTP 状态 404 -**在堆栈跟踪中我有：**WARN：org.springframework.web.servlet.PageNotFound - 在 DispatcherServlet 中找不到带有 URI [/maventestwebapp/] 的 HTTP 请求的映射，名称为 ' appServlet'**

我认为这是合理的行为，因为 Spring 没有启用注释支持，所以没有注册我的控制器类（使用注释驱动并用 @Controller 注释我的控制器类是如果我在 bean.xml 中明确定义了这个类文件），所以不能使用这个 bean 的方法来处理 HTTP 请求......好吧......这听起来不错......

**但是为什么在第一个示例中没有注释驱动的标签？** 我没有注释驱动的标签（所以我没有启用注释来声明什么类是 Spring bean，例如控制器）并且我没有在 beans.xml 文件中明确声明这个类......所以不应该当我删除注释驱动标签时，第二个示例不起作用......但它工作：-/

我要疯了才能理解为什么...

拜托，你能帮帮我吗？

非常感谢

安德烈亚

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T21:08:25.220

`<mvc:annotation-driven>`是一个提供附加服务的辅助标签：

*   注册默认处理程序映射
*   消息转换（例如将控制器中返回的对象转换为JSON）
*   JSR 303 验证（@Valid 注解）
*   转换服务（如果指定了转换器，那么控制器将能够将实体作为参数，即来自请求的文本 id 将通过 MVC 层转换为实际的业务对象。其他对象如日期、枚举等也是如此.)
*   也许在新版本的 Spring 中会添加更多的特性。

它是用org.springframework.web.servlet.config 包中的[AnnotationDrivenBeanDefinitionParser实现的](http://www.jarvana.com/jarvana/view/org/springframework/spring-webmvc/3.0.1.RELEASE/spring-webmvc-3.0.1.RELEASE-sources.jar!/org/springframework/web/servlet/config/AnnotationDrivenBeanDefinitionParser.java?format=ok)

如果您有适当的映射（[如果需要，可以显式添加所需的 bean ），您的简单控制器](https://stackoverflow.com/questions/3693397/howto-get-rid-of-mvcannotation-driven)*不需要*工作。但是，如果您想做一些或多或少的高级工作，例如 JSR 303 验证、使用 JSON 实现 REST 服务、为 MVC 注册转换服务，则此标签非常有用，因为它将这些服务的配置保存在一个地方.

这就是为什么它被包含在 Spring 模板项目中的原因（模板项目是开发 Spring 应用程序的起点（因此您可以直接输入控制器方法[返回`@Responsebody`的值](http://blog.springsource.org/2010/01/25/ajax-simplifications-in-spring-3-0/)或将转换器添加到 MVC）而不仅仅是一个示例对于春季学习者）。

另请注意，[处理程序映射配置在 Spring 3.1 中发生了更改](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-requestmapping-31-vs-30)：

> 在 Spring 3.1 之前，类型和方法级别的请求映射在两个单独的阶段进行检查——首先由 DefaultAnnotationHandlerMapping 选择控制器，然后由 AnnotationMethodHandlerAdapter 缩小实际调用的方法。

# objective-c - iPhone - 流式传输音频

> ID：13671781
> 
> 赞同：2
> 
> 时间：2012-12-02T17:29:58.160
> 
> 标签：objective-c, avaudioplayer, audio-streaming

我是 Mac Dev 的新手，我正在努力处理音频流。[我在Get an audio stream from URI and play it on iPhone](https://stackoverflow.com/questions/6856445/get-an-audio-stream-from-uri-and-play-it-on-iphone)找到了一个很好的参考

作者似乎很高兴，我试图重现该解决方案。流来自 Dogglounge 电台。URL 是[http://dl3.mixcache.com:8000](http://dl3.mixcache.com:8000)（这是当我单击获取信息时 iTunes 返回的内容）。

我所做的是创建一个 iPhone 应用程序，其中包含一个实际上没有控制的单一视图。我在 viewDidLoad 中添加了代码以尽快启动流。似乎 NSData *_objectData 无休止地运行。我使用iOS6模拟器。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    NSString* resourcePath = @"http://dl3.mixcache.com:8000"; //your url
    NSURL *url = [NSURL URLWithString:resourcePath];

    NSError *e = nil;
    NSData *_objectData = [NSData dataWithContentsOfURL:url options:NSDataReadingMappedIfSafe error:&e];

    NSLog(@"%@", [e localizedDescription]);

    NSError *error;

    AVAudioPlayer *audioPlayer = [[AVAudioPlayer alloc] initWithData:_objectData error:&error];
    audioPlayer.numberOfLoops = 0;
    audioPlayer.volume = 1.0f;
    [audioPlayer prepareToPlay];

    if (audioPlayer == nil)
        NSLog(@"%@", [error description]);
    else
        [audioPlayer play];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:26:27.430

这是 的预期行为`NSData dataWithContentsOfURL:`：它会阻塞直到下载数据。对于异步下载，请参阅此答案：[Does -dataWithContentsOfURL: of NSData 在后台线程中工作吗？](https://stackoverflow.com/questions/3078765/does-datawithcontentsofurl-of-nsdata-work-in-a-background-thread)

# logstash - logstash 和弹性日志

> ID：13671782
> 
> 赞同：2
> 
> 时间：2012-12-02T17:30:04.923
> 
> 标签：logstash

我想用 logstash 和 elasticsearch 索引我的日志。

这是我的问题：
我有两个环境：

1.  生产（产品）
2.  用户接受度 (uat)

我想使用一个弹性搜索集群来存储我的日志。如何将这两组日志分开？

例如，如果我在端口 9092（例如）上打开 logstash web ui，我希望能够从我的 prod 环境中查找日志，如果我在端口 9093（例如）上打开 logstash web ui，我希望能够从我的 uat 环境中查找日志。

请您给我一些建议，我该如何实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-02T05:14:04.143

集群日志最简单的方法是为每个日志附加一个标签，无论它属于生产单元还是用户接受单元。

您可以通过以下方式在logstash中执行此操作：

add_tag=>["production/useracceptance"] 基于它满足的正则表达式的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T21:28:30.600

将自定义标签应用于日志，因为它们通过 grok 放入 elasticsearch。然后从您的 web ui 中，您可以简单地过滤这些标签以仅显示带有这些标签的日志。

# string - 算法 - 在一个变量中求解线性方程

> ID：13671783
> 
> 赞同：10
> 
> 时间：2012-12-02T17:30:11.587
> 
> 标签：string, algorithm, equation-solving

给定一个字符串形式的表达式，求解 x。表达式中 x 的最高幂等于 1。允许的运算符是 +、* 和 -。这些都是二元运算符。因此，2x 将被写为 2*x。每个运算符后面都会跟一个术语或一个常数。

例如，考虑以下等式：

2*x+5-(4*x-7+(4-2))=10*x-9

这是一个完全有效的等式。1*2*3 形式的表达式无效，但 1*(2*3) 有效。

给定这样一个方程，我们需要找到 x 的解。如果等式无效，程序应显示错误消息。

有人可以提供有关如何解决此问题的任何想法吗？我现在唯一想到的是使用上下文无关语法进行词法分析和解析。但我觉得有一个比这更简单的解决方案。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T00:59:11.853

(1)转换`e1 = e2`为`e = 0`。`e = e1 - e2`

(2) 转换`e`为`ax + b`, 对于一些`a`和`b`。

(3) 求解，`x = -b/a`。

步骤（2）可以递归处理，如下所示：

```
F(k)     = 0x + k    // For any constant k.
F(x)     = 1x + 0
F(p + q) = let a_1x + b_1 = F(p)
           and a_2x + b_2 = F(q) 
           in  (a_1 + a_2)x + (b_1 + b_2)
    // Similarly for subtraction.
F(p * q) = let a_1x + b_1 = F(p)
           and a_2x + b_2 = F(q) // At least one of a_1 and a_2 must be zero.
           in  (a_1*b_2 + a_2*b_1)x + (b_1*b_2) 
```

# objective-c - Parse application/x-www-form-urlencoded NSData into NSDictionary

> ID：13671789
> 
> 赞同：2
> 
> 时间：2012-12-02T17:31:03.160
> 
> 标签：objective-c, http, urldecode

are there some commonly used utils or standard way to parse http-forms into key-value pairs e.g. into NSDictionary?

thanks for any help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-29T16:19:24.193

我找不到任何轻量级的解决方案，但是名为 GCDWebServer 的好 Objective-C 库在哪里

这就是我使用它的方式：

在 Podfile 中

```
pod "GCDWebServer" 
```

在我的应用程序中

```
#import "GCDWebServerFunctions.h"

NSDictionary *dict = GCDWebServerParseURLEncodedForm(bodyString); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-04-13T19:26:05.650

是的。[NSJSON序列化](https://developer.apple.com/library/ios/documentation/foundation/reference/nsjsonserialization_class/Reference/Reference.html)。这正是您正在寻找的。

更新：

如果您需要解析 application/x-www-form-urlencoded 数据，[这个答案](https://stackoverflow.com/questions/8756683/best-way-to-parse-url-string-to-get-values-for-keys)是最好的。您可能需要先将[NSData 转换为字符串。](https://stackoverflow.com/questions/2467844/convert-utf-8-encoded-nsdata-to-nsstring)

# java - 使用 AsyncTask 从 Internet 更新 Textview

> ID：13671790
> 
> 赞同：0
> 
> 时间：2012-12-02T17:31:10.603
> 
> 标签：java, android, android-asynctask, textview

我使用 AsynTask 从网络获取数据并在 Textview 中显示，这是我的代码

```
public class PatientAssistant extends Activity {

    private TextView txtTemp,txtHuminity;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.patient_assistant);
        AppPreferences pref=new AppPreferences(this);

        TextView textCity=(TextView)findViewById(R.id.txtCity);

        txtTemp=(TextView)findViewById(R.id.txtTemp);
        txtHuminity=(TextView)findViewById(R.id.txtHumidity);

        textCity.setText(pref.getCity());

        String city=(String) textCity.getText();

        CallWeatherAsync cwa=new CallWeatherAsync(this,txtTemp,txtHuminity);

        cwa.execute(city);

        Button btnSend=(Button)findViewById(R.id.btnSend);
        btnSend.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                //TODO send report

            }
        });
    }

    private class CallWeatherAsync extends AsyncTask<String, Void, WeatherInfo> {

        private PatientAssistant _activity;
        private TextView txtT,txtH;
        public CallWeatherAsync(PatientAssistant activity,TextView txtTmp,TextView txthum)
        {
            _activity=activity;
            txtT=txtTmp;
            txthum=txtH;
        }
        @Override
        protected WeatherInfo doInBackground(String... params) {

            YahooWeatherUtils yahooWeatherUtils = YahooWeatherUtils.getInstance();

            WeatherInfo weatherInfo = yahooWeatherUtils.queryYahooWeather(_activity.getApplicationContext(), params[0]);
            return weatherInfo;
        }
        @Override
        protected void onPostExecute(WeatherInfo result) {

            txtT.setText(result.getCurrentTempC());
            txtH.setText(result.getAtmosphereHumidity());
        }

    }

} 
```

但这会抛出**Resources$NotFoundException**！！！

```
12-02 00:39:06.383: E/AndroidRuntime(4035): android.content.res.Resources$NotFoundException: String resource ID #0xc
12-02 00:39:06.383: E/AndroidRuntime(4035):     at android.content.res.Resources.getText(Resources.java:247)
12-02 00:39:06.383: E/AndroidRuntime(4035):     at android.widget.TextView.setText(TextView.java:3473)
12-02 00:39:06.383: E/AndroidRuntime(4035):     at com.assitant.patient.PatientAssistant$CallWeatherAsync.onPostExecute(PatientAssistant.java:116)
12-02 00:39:06.383: E/AndroidRuntime(4035):     at com.assitant.patient.PatientAssistant$CallWeatherAsync.onPostExecute 
```

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:36:44.630

盲目猜测是：

```
txtT.setText(result.getCurrentTempC());
txtH.setText(result.getAtmosphereHumidity()); 
```

返回`int`不`string`。如果是，`int`则将其视为资源 ID。这应该有效：

```
txtT.setText( "" + result.getCurrentTempC());
txtH.setText( "" + result.getAtmosphereHumidity()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T18:07:41.727

干杯！，你的问题应该出在 **txthum=txtH;** 它应该是 **txtH =txthum;**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T17:39:17.130

您不要在私有类中设置 TextView。由于您将 2 个 TextView 设置为 PatientAssistant 类的全局变量，因此您应该直接在私有 AsyncClass 中使用它们。

# javascript - jQuery unresolved conflicts

> ID：13671791
> 
> 赞同：0
> 
> 时间：2012-12-02T17:31:13.723
> 
> 标签：javascript, jquery, jquery-ui

I'm working on a page with so many libraries includes, obviously many different developer made their own touches to it, here are the includes

js/jquery-1.4.2.js
js/script.js
js/jquery.nivo.slider.pack.js
js/cufon-yui.js
js/cufon-replace.js
Myriad_Pro_400.font.js
js/Myriad_Pro_Cond_700.font.js
js/Myriad_Pro_700.font.js
js/jquery.prettyPhoto.js
js/imagepreloader.js
js/SpryAccordion.js
jQuerytimefield/src/jquery.ptTimeSelect.js

fancybox/jquery.mousewheel-3.0.4.pack.js
fancybox/jquery.fancybox-1.3.4.pack.js
js/jquery-ui-1.8.9.custom.min.js

I need to add selectable functionality to rows on the table, when I just add those 2 lines:

```
<script src="js/selectable/jquery-1.8.3.js"></script>
<script src="js/selectable/jquery-ui.js"></script> 
```

the page doesnt show anything onload, when I check the javascript console here is what I get

![enter image description here](../Images/f73fce56087ea06f06947d9e7018670c.png)

I had no clue what to do, I just thought to use jquery.noConflict() but it didnt work.

Any ideas ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:44:29.233

您的脚本列表已经包括 jQuery 和 jQuery UI（尽管 jQuery 是一个非常旧的版本）。您可能只更新这两个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T18:27:12.863

如果你在旧库下面添加了这两个新库，那么这就解释了第二个错误：所有 jQuery 插件必须在加载 jQuery**之后**加载；但是您通过在创建/执行后添加 jQuery 1.8.2 来覆盖 jQuery 1.4.2（以及所有添加的插件）。

您可以用新的 jQuery ( *js/jquery-1.4.2.js )**替换*第一个 jQuery (在开始时，在任何 jQuery 插件之前)，但是您必须进行一些测试，因为您页面上的旧 js 可能会损坏 (我认为这是您在控制台中出现第一个错误的原因）。

 *您还覆盖了 jQuery UI，在这种情况下，您不能只替换它：旧的 jQueryUI ( *js/jquery-ui-1.8.9.custom.min.js* ) 是自定义的，所以如果您要“更新它”您必须添加至少相同的组件（即下载自定义脚本与它们）。*

# ruby-on-rails - HTMLEntities vs. URI.escape for decoding a string in Ruby

> ID：13671792
> 
> 赞同：0
> 
> 时间：2012-12-02T17:31:19.947
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, html-entities, html-encode

**BACKGROUND:** I am looking to decode strings that include HTML entities - i.e. "c#" should be converted to "c%23".

I have found the [HTMLEntities](http://htmlentities.rubyforge.org/) project to be generally recommended, but have also found what I think is a simpler solution: Using `CGI.escape(*string*)` or `ERB::Util.url_encode(*string*)`.

**QUESTION:** Is there any reason why using CGI.escape or ERB::Util.url_encode for this task is a bad idea? If so, how exactly does one implement HTMLEntities in a Rails 3 project - I can't seem to figure it out from the documentation!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:05:42.243

我不确定每种方法的确切优点。但是，如果您想让 htmlentities 正常工作，您需要将以下内容添加到您的 Gemfile 中：

```
gem 'htmlentities', :git => "https://github.com/threedaymonk/htmlentities.git" 
```

并运行：

```
bundle install 
```

然后，在您的控制器中：

```
class TestController < ApplicationController

  def index 
    coder = HTMLEntities.new
    string = "<élan>" # or whatever string you want to manipulate
    @test = coder.encode(string) # => "&lt;élan&gt;"
  end 
end 
```

然后用@test 变量做任何你想做的事情——把它写在你的视图页面等上。

# javascript - One off introduction page using JavaScript for iphone app

> ID：13671794
> 
> 赞同：0
> 
> 时间：2012-12-02T17:31:50.293
> 
> 标签：javascript, html, cordova

I'm trying to include a one-off introductory page using JavaScript before index.html to introduce the purpose of the app and addressing the issues that we face.

The page will be in front of index.page something like a full page pop up of introductory page. It'll only appear once every 20 visits? If there such a thing that can be done on JS. It is for iPhone app as Hybrid (HTML5, CSS3 and JS using Cordova 2.1 formerly Phonegap). I think there is?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:43:12.157

尝试使用 JavaScript 本地存储。

```
window.onload = function(){
     if( localStorage.seenIntro ){
         // Display Normal Page (user has seen intro)
     }else{
         localStorage.seenIntro = true;
         // Display Intro Screen
     }
} 
```

这将检查是否定义了 localStorage 值，如果它是用户之前看过的页面，它将加载正常的网页。否则它将创建 localStorage 值并显示介绍屏幕。

# php - Passing multiple rows of inputs in a form and iterating over them in PHP?

> ID：13671796
> 
> 赞同：2
> 
> 时间：2012-12-02T17:31:59.853
> 
> 标签：php, forms

I'm guessing this has been asked before, but I did some searching and haven't been able to find an answer (probably because of my lack of terminology).

I'm working on an application that displays a bunch of rows of inputs in a table and when the form is submitted I need to iterate over every input updating the database with the input's value. What I've been doing is naming inputs like this:

```
<input type="text" name="name1"><input type="text" name="gender1"> ...
<input type="text" name="name2"><input type="text" name="gender2"> ...
<input type="text" name="name3"><input type="text" name="gender3"> ...
.
.
. 
```

Then in PHP doing this:

```
for($i = 1; isset($_POST['name' . $i]); $i++)
{
    $name = $_POST['name' . $i];
    $gender = $_POST['gender' . $i];
    // update DB with input values
} 
```

In my application rows can be added and deleted, there are about 6 inputs in each row, and often dozens of rows. This just seems kind of messy to me and I'm wondering if there is a better/cleaner way of doing it?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-02T17:36:43.570

最好通过以下方式使用`HTML input array`

```
<input type="text" name="name[]">
<input type="text" name="gender[]"> 
```

在 PHP 中，您必须执行以下操作

```
$cnt = count($_POST['name']);
for($i=0;$i<$cnt;$i++){
   echo $_POST['name'][$i];
   echo $_POST['gender'][$i];
   ....
   // do any update with database
} 
```

# jquery - Is $.get of jquery asynchronous?

> ID：13671798
> 
> 赞同：23
> 
> 时间：2012-12-02T17:32:06.930
> 
> 标签：jquery, ajax, asynchronous, get

I was wondering whether I should use asynchronous calls on my website or not. I know to specify this explicitly I need to use

```
$.ajax 
```

however initially I tried using `$.get` and although the server had to return lots of information, my browser didn't stuck and I could navigate without any problems.

I searched a little bit online about it, however I'm still not 100% certain about the difference between the two.

If `$.get` is asynchronous then what's the point of `$.ajax`? And if it's not, then again seeing how I had no navigation problems with `$.get`, what's the point of using `$.ajax`?

thanks in advance

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-02T17:35:04.533

是的，[`$.get`](http://api.jquery.com/jQuery.get)是异步的。从文档中：

> 这是一个简写的 Ajax 函数，相当于：
> 
> ```
> $.ajax({
>   url: url,
>   data: data,
>   success: success,
>   dataType: dataType
> }); 
> ```

...并且由于没有`async`选项，因此`async`默认为`true`. （请注意，这`async`将在 jQuery 的未来版本中完全消失；它将**永远**是真的。）

> 如果`$.get`是异步的，那有什么意义`$.ajax`呢？

`$.ajax`让您控制更多选项。`$.get`只是一个捷径。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T17:35:24.490

[`$.get`](http://api.jquery.com/jQuery.get/)只是以下的简写：

```
$.ajax({
  url: url,
  data: data,
  success: success,
  dataType: dataType
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T17:36:41.680

如`jQuery` [文档](http://api.jquery.com/jQuery.ajax/)所述，`$.get`它是更底层的便捷包装器`$.ajax`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-11T02:32:52.843

$.ajax 带有 GET 方法，这个带有 Promise 对象怎么样？

```
function showResults(name) { 
        var deferred = $.Deferred, requests = [];

        requests.push($.ajax({url:"/path/to/uri/?name=" + name, type: "GET", async: false}).done(function(d) { 
         //alert or process the results as you wish 
        }));
        $.when.apply(undefined, requests).then(function(d) { console.log(d); /*var d is a promised late return */ deferred.resolve(); }); 
        return deferred.promise();

    } 
```

他返回的承诺对象也可以用于`$.when(showResults('benjamin')).done(function() { });`后期修改（如图表/图形设置等）。完全可重复使用。您也可以将此函数放在 $.deferred 请求的循环中，例如，

```
function updateResults() { 
             var deferred = $.Deferred, requests = [];
             requests.push($.ajax(url:"/path/to/names/?nameArr=" + jsonArrOfNames, type: "GET", async: false}).done(function(res) {  requests.push(showResults(res[0]));}) );
             $.when.apply($, requests).then(function(d) { console.log(d); /*var d is a promised late return */  deferred.resolve(); }); 
             return deferred.promise();
            } 
```

# c - C Programming : gets() and Char String Array Issue - strcpy() copying into other strings in the Array

> ID：13671799
> 
> 赞同：0
> 
> 时间：2012-12-02T17:32:07.250
> 
> 标签：c, arrays, string, gets

I am using the function gets() to retrieve string input from the user. I then store that string into a char array, char transdestmp[DESMAX], where DESMAX is 31\. If the variable_name is greater than 30 chars, then ask the user to renter another string. Else, copy the string using strcpy(), into a 2 dimensional array char - acctdes[31][20].

accttitle recieves transdestmp[DESMAX]

```
void accttitle(char descr[DESMAX])
{
    printf("\nEnter title for new account %d: ", transinpt);
    gets(descr);
    while(strlen(descr)>DESMAX){
        printf(" **Title entered is longer than 30 characters\n");
        printf(" Please reenter : ");
        gets(descr);
    }
    strcpy(acctdes[transcntr],descr);
    printf("---->vacctdes[transcntr]: %s\n", acctdes[transcntr]);
    printf("---->vacctdes[transcntr-1]: %s\n", acctdes[transcntr-1]);
} 
```

For some reason when I input a long string, and then enter another string, apart of the second string acctdes[1] overwrites the other string stored in acctdes[0].

for example,

First input: acctdes[0] = "This is a long string"

It works...

Second input acctdes[1] = "monkey"

It works...

but then, it seems that when I output acctdes[0], acctdes[0] has some of the value from acctdes[1]... like output - This is a long monk...

Please let me know if you would like more information. Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:35:42.320

你的数组声明应该是相反的。

目前你有 : `acctdes[31][20]`，这意味着每个字符长度`31`的占位符；`20`而您需要 20 个占位符，每个占位符长度为 31 个字符。

应该改为`acctdes[20][31]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T20:48:49.203

*“我正在使用函数 gets() 来检索用户输入的字符串。”*

那是你的问题，或者至少是部分问题。

*永远不要*使用该`gets()`功能。除非您完全控制将出现的输入内容，否则它本质上是不安全的`stdin`。它没有指定将接受多少个输入字符的机制。如果用户输入的数据多于目标数组的容量，则程序的行为是未定义的。

改为使用`fgets()`；它需要一个参数来指定目标缓冲区的大小。您仍然必须处理输入行太长的可能性（在这种情况下，`fgets()`只存储部分行）。如果输入行不太长，`fgets()`则将`'\n'`留在缓冲区中，与`gets()`.

太糟糕了，它已从最新的（2011）ISO C 标准中删除。

（另见其他答案。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T17:40:30.937

您的阵列上的尺寸颠倒了。试试`acctdes[20][31]`。

字符串相互渗透的原因是因为 C 将二维数组布局为一个长内存块。当您`acctdes[2]`真正在引擎盖下进行指针运算时，就像`*(acctdes + (31 * 2))`跳过内存块的第一部分以获取第三个元素。因此，如果一个字符串超出其界限，它将在下一个字符串中结束。

# c++ - How to debug trashed heap / no .dmp / user's machine

> ID：13671807
> 
> 赞同：3
> 
> 时间：2012-12-02T17:33:02.117
> 
> 标签：c++, windows, debugging, winapi

I've got a two-year-old C++/Win32 program with hundreds of users. A couple of days ago, one user reported the following crash. It's happening on startup before the program receives any user input. Nobody else is having this problem.

> Problem signature:
> Problem Event Name: APPCRASH
> Application Name: xyz.exe
> Application Version: 0.0.2.94
> Application Timestamp: 50b92e99
> Fault Module Name: StackHash_dec5
> Fault Module Version: 6.0.6002.18541
> Fault Module Timestamp: 4ec3e39f
> Exception Code: c0000374
> Exception Offset: 000abc4f
> OS Version: 6.0.6002.2.2.0.768.3
> Locale ID: 1033
> Additional Information 1: dec5
> Additional Information 2: cef9e6e9412cee8472af82d5cdb064b7
> Additional Information 3: 5d30
> Additional Information 4: 7ad67f8281216f819f54c76815aefb56

The program uses a SetUnhandledExceptionFilter handler to write a minidump but the user tells me there's no minidump. I guess that's normal since it's code c0000374 (heap corruption).

After the user reported the problem, I gave him a special build with a bazillion trace statements, including logging every message that goes through the message pump, but all I learned from it is that the last message received by GetMessage was a new message that I put in that special build as part of the debugging stuff. That message and the code it invokes can't be the source of the crash because I added them after his crashes started. Maybe this implies that the crash is happening in some other thread, not the thread that handles messages. The program creates a bunch of threads when it starts.

Can anybody suggest a strategy for debugging this? I'm lost without a .dmp file.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T21:36:30.800

只要您的应用程序崩溃并且没有立即退出，即进程仍然存在，您就可以使用 sysinternals ( [http://technet.microsoft.com/en-us/sysinternals/dd996900.aspx](http://technet.microsoft.com/en-us/sysinternals/dd996900.aspx) ) 的procdump`procdump -ma xxxx.exe`来编写一个完整的内存转储，然后您可以使用 WinDbg 对其进行分析。

# java - 在技 术上是否可以创建 Java 虚拟机的映像文件并将其用于更快的 Java 应用程序启动？

> ID：13671813
> 
> 赞同：2
> 
> 时间：2012-12-02T17:33:38.200
> 
> 标签：java, c++, java-native-interface, virtual-machine

我想让我的应用程序启动时间大大加快。

我相信，如果我可以将应用程序的整个状态存储在运行 java 虚拟机的进程的内存空间中，那么我也应该能够创建一个新的 java 进程并将其内存内容替换为保存的状态在图像文件中。

我的理论是，如果我这样做，我可以快几秒钟启动我的应用程序，它会尽可能快地读取文件并将其放入 jvm 的正确内存区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:56:29.360

You can use serialization to write the state of the application (beware of cycles in the object graph, though), and then deserialize it on startup, but that's not quite the same as creating an image of the JVM process. You'll still need to load the classes and instanciate some basic infrastructure to bootstrap the application, and you won't be in the same state memory- and JIT-wise. The JVM abstracts a lot of things from you, so you don't have access to "the right memory zone(s)".

Whether it will have a positive impact on the application's startup time really depends on where the state is initially loaded from and how much it costs to build, anyway.

# model-view-controller - MVC：为什么我们需要“控制器”，或者我们什么时候应该使用这种模式？

> ID：13671814
> 
> 赞同：14
> 
> 时间：2012-12-02T17:33:48.793
> 
> 标签：model-view-controller, client-server, application-design

我已经阅读了很多关于 MVC 的出版物，但我仍然无法清楚地理解为什么我们需要“控制器”。

*我通常在客户端-服务器*模型中编写应用程序：

*服务器*包含所有业务逻辑，它对 gui 一无所知。它完成主要工作，并且尽可能便携。

*客户端*是一个 GUI，它绑定到服务器，与用户交互，将命令从用户发送到*服务器*。

我喜欢这种架构，但我不明白为什么人们真的需要在*客户端*和*服务器*之间再增加一个媒介，这似乎是*控制器*？

**UPD：**简单示例：假设我们需要编写一些数据记录器。数据来自 COM 端口，通过某种协议进行编码。需要在一个简单的日志窗口中显示收到的消息。

我将如何做到：

*服务器*包含以下项目：

*   `Data_receiver`: 实际上是从 COM 端口接收原始数据，但它是接口，所以我们可以创建另一个类来接收来自任何其他来源的数据；
*   `Data_decoder`：获取原始数据并返回解码后的消息，它也是接口，因此我们可以轻松更改编码协议；
*   `Data_core``Data_receiver`: 使用and的实例，`Data_decoder`向客户端发出信号。

*客户端*包含以下项目：

*   Appl核心：创建`Data_receiver`（连接到COM端口的）实例，`Data_decoder`和`Data_core`（引用`Data_receiver`和`Data_decoder`实例），还创建GUI简单日志窗口（引用`Data_core`）；
*   GUI简单日志窗口：绑定到`Data_core`，即监听它发出的信号，并显示接收到的数据。

正如我所了解的有关 MVC 的内容，GUI 实际上不*应该*`Data_core`从. *但是如果 GUI 直接从模型*中获取这些数据会发生什么坏事呢？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-15T10:31:56.427

过去，我多次问过自己同样的问题，最近我一直在阅读有关 JSP 模型 2 架构的信息，维基百科条目说明了以下内容。

> J2EE 平台中有关 Web 层技术的文献经常使用术语“模型 1”和“模型 2”而没有解释。这个术语源于 JSP 规范的早期草案，它描述了 JSP 页面的两种基本使用模式。虽然这些术语已从规范文档中消失，但它们仍然被普遍使用。模型 1 和模型 2 分别指的是控制器 servlet 的缺席或存在，该控制器 servlet 分派来自客户端层的请求并选择视图。

这基本上意味着 MVC 模式本身存在变化，因此您始终可以根据您的项目应用 MVC 或 MV 模式。然而，一个合适的 MVC 架构确实应该有一个控制器，因为模型和视图不应该直接相互通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T19:58:05.820

在阅读您的客户端-服务器模式的细节时，我想到了[MVVM](http://www.codeproject.com/Articles/81484/A-Practical-Quick-start-Tutorial-on-MVVM-in-WPF)模式。当您希望执行单元测试时，最好将 VM（ViewModel）视为控制器。

按照您的模式，经典的客户端/服务器模式、控制器、模型和视图存在于您称为 Data_receiver、Data_decoder 和 Data_core 的服务器代码中。在您的“客户”中，您再次拥有一个控制器和视图。

从服务器代码中分离出一个控制器是很有用的从模型。

在遵循不要重复自己 (DRY) 原则时，您可能会注意到代码的服务器和客户端部分中都有控制器代码，您重复代码或职责。

当您以测试驱动开发方式推动您的开发以分离成不同的部分时，它很有用，这样您就可以附加各种测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T18:02:20.167

“客户端-服务器”与 MVC 无关，afaik。

我是这样理解的：

*   这`Model`是您构建数据的方式。
*   `View`是可见的表示。（图形用户界面）
*   使用`Controller`逻辑来控制视图和/或其他逻辑。

它背后的想法是将视觉表示从逻辑中分离出来。因此，当您获取视图时，您不会复制逻辑。...因此，在您的情况下，您可能仅在客户端使用 MVC，并且您需要一个控制器，因为这就是所有魔术发生的地方。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-03T09:21:44.683

迟到总比不到好 我想纠正您对“为什么需要在客户端和服务器之间增加一层”的误解。

如果您通过以下几行，答案就很清楚了，MVC 是架构的三角形模型。

View 向 Model 提出请求，Model 向 Controller 提出请求，Controller 处理它并发回给 View。

```
The Model is the way you structure your data.
The View is the visible representation. (GUI)
The Controller uses the logic to control the view and/or other logic. 
```

问候， Pavan.G**

# ruby - 水豚连接被拒绝

> ID：13671823
> 
> 赞同：5
> 
> 时间：2012-12-02T17:34:42.717
> 
> 标签：ruby, selenium, capybara

我在 Ruby 中使用 Capybara 和 Selenium（不在测试框架内。）

如果我打开一个 ruby​​ 控制台并运行该方法，它可以工作，但如果我再次运行相同的方法，我会收到此错误。

```
 Errno::ECONNREFUSED: Connection refused - connect(2)
from /home/ross/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/net/http.rb:762:in `initialize'
from /home/ross/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/net/http.rb:762:in `open'
from /home/ross/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/net/http.rb:762:in `block in connect'
from /home/ross/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
from /home/ross/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
from /home/ross/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/net/http.rb:762:in `connect'
from /home/ross/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
from /home/ross/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/net/http.rb:744:in `start'
from /home/ross/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/net/http.rb:1284:in `request'
from /home/ross/.rvm/gems/ruby-1.9.3-p327/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/remote/http/default.rb:83:in `response_for'
from /home/ross/.rvm/gems/ruby-1.9.3-p327/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/remote/http/default.rb:39:in `request'
from /home/ross/.rvm/gems/ruby-1.9.3-p327/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/remote/http/common.rb:40:in `call'
from /home/ross/.rvm/gems/ruby-1.9.3-p327/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/remote/bridge.rb:598:in `raw_execute'
from /home/ross/.rvm/gems/ruby-1.9.3-p327/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/remote/bridge.rb:576:in `execute'
from /home/ross/.rvm/gems/ruby-1.9.3-p327/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/remote/bridge.rb:99:in `get'
from /home/ross/.rvm/gems/ruby-1.9.3-p327/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/common/navigation.rb:14:in `to'
from /home/ross/.rvm/gems/ruby-1.9.3-p327/gems/capybara-2.0.1/lib/capybara/selenium/driver.rb:34:in `visit'
from /home/ross/.rvm/gems/ruby-1.9.3-p327/gems/capybara-2.0.1/lib/capybara/session.rb:180:in `visit'
from /home/ross/.rvm/gems/ruby-1.9.3-p327/gems/capybara-2.0.1/lib/capybara/dsl.rb:51:in `block (2 levels) in <module:DSL>' 
```

代码如下：

```
class ExampleClass
  include Capybara::DSL

  def do_capybara

    Capybara.app_host =  "http://example.com"
    Capybara.run_server = false
    Capybara.current_driver = :selenium

    visit '/'

    page.driver.browser.close

    Capybara.reset_sessions!
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-16T12:49:12.277

您可以在设置一些默认时间后尝试吗？

```
Capybara.default_wait_time = 10 
```

只需在设置当前驱动程序后给出此评论。它可以帮助你克服这个问题。

# c++ - STL 迭代器：断言错误

> ID：13671824
> 
> 赞同：0
> 
> 时间：2012-12-02T17:34:45.293
> 
> 标签：c++, stl, iterator, erase

为什么以下代码会产生断言错误：`Expression: list iterators incompatible`？

```
#include <list>
using namespace std;

int main()
{
    list<int> a;
    a.push_back(1);
    list<int>::iterator iter=a.begin();
    a.erase(iter);

    iter==a.end();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:37:45.187

你想要做的是：

```
#include <list>
using namespace std;

int main()
{
    list<int> a;
    a.push_back(1);
    list<int>::iterator iter=a.begin();
    iter = a.erase(iter);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T17:36:22.537

给定集合上的迭代器在更改`a`时变为无效`a`，例如通过删除元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T17:40:26.007

擦除`iter`时它无效。我认为无效的迭代器不能用于除了分配给它们之外的任何东西，甚至不能将它们与任何东西进行比较。您可能想使用

```
iter = a.end(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T17:41:40.137

擦除后迭代器无效。在您的情况下，擦除本身会在您删除最后一个元素时返回（您将其删除）结束迭代器

# arrays - 基于变量的循环数组

> ID：13671825
> 
> 赞同：0
> 
> 时间：2012-12-02T17:34:45.887
> 
> 标签：arrays, vbscript

我需要基于变量 Y 创建一个特定的数组（我在一个系列中使用）。这是我正在使用的格式 - 尝试在 VBScript 中进行。

```
If Y=2 then

    S1 = [0,x]
    S2 = [x,0]

If Y=3 then

    S1 = [0,0,x]
    S2 = [0,x,0]
    S3 = [x,0,0]

If Y=4 then

    S1 = [0,0,0,x]<br/>
    S2 = [0,0,x,0]<br/>
    S3 = [0,x,0,0]<br/>
    S4 = [x,0,0,0]<br/>

If Y=5 then

    S1 = [0,0,0,0,x]
    S2 = [0,0,0,x,0]
    S3 = [0,0,x,0,0]
    S4 = [0,x,0,0,0]
    S5 = [x,0,0,0,0] 
```

等等等等。我知道这将是一个 for 循环 -------------

```
for i = 1 to Y
    S[i] = "[.... this is where am drawing a brain freeze
next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:59:34.847

您可以使用 arraylists 动态创建您的数组并将它们传输回 vbscript 数组以使其可用于其他函数。（或者您可以继续使用在我看来优于普通数组的数组列表。）

```
Option Explicit

' Initialize
Dim x : x = "X"
Dim Y : Y = 5
Dim AL : Set AL = CreateObject("System.Collections.ArrayList")
Dim i, j, innerAL, S

' Make a loop to iterate over the amount of array entries we have to create
for i = 1 to Y

    ' This arraylist is used to set the inner array
    Set innerAL = CreateObject("System.Collections.ArrayList") 

    ' Fill the inner array
    for j = 0 to Y-1

        ' See if it has to be filled with X or 0
        If j = (Y-i) then
            innerAL.Add x
        else
            innerAL.Add 0
        end if
    next

    ' Convert the inner arraylist to a standard array and add it to the outer arraylist
    AL.Add innerAL.ToArray()

next

' We are done. Convert the arraylist to a standard array
S = AL.ToArray()

' Display the results
for i = 0 to Y-1
    wscript.echo "S(" & i & ") = [" & join(S(i), ",") & "]"
Next 
```

# java - Java将字符串转换为整数进行比较

> ID：13671832
> 
> 赞同：2
> 
> 时间：2012-12-02T17:35:28.113
> 
> 标签：java, string, methods, interface, integer

我正在`compareTo`为特定类的 Comparable Interface 编写方法。我需要取两个不同的字符串并比较它们，看看一个是否比另一个具有更大的价值。我通常会使用`.compareTo()`，但在这种情况下，它会给我一个错误并且无法正常工作。这就是我所拥有的：

```
public int compareTo(Object o) {
    if (name < ((AccountOwnerComparable) o).name)
        return -1;
    else if (name > ((AccountOwnerComparable) o).name)
        return 1;
    else
        return 0;

} 
```

我知道我不能使用，`< or >`但这只是为了展示场景是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:49:28.983

你只需要做：

```
name.compareTo(String_to_be_compare); 
```

[相比于](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#compareTo%28java.lang.Object%29)

**公共 int compareTo（对象 o）**

> 将此字符串与另一个对象进行比较。如果 Object 是 String，则此函数的行为类似于 compareTo(String)。

注意：

**返回**：

> 如果参数是按**字典顺序等于**该字符串的字符串，则**值为 0**；如果参数是按 **字典顺序大**于此字符串的字符串，则值**小于 0 ；** 如果参数是按**字典顺序小**于此字符串的字符串，则值**大于 0 。**（[来源](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#compareTo%28java.lang.Object%29)）

 ******所以对于你的情况：

```
public int compareTo(Object o)
{
    AccountOwnerComparable obj = (AccountOwnerComparable) o;
    return obj.name.compareTo(this.name);
} 
```

tw：实现可比较的接口，指定要比较的对象（通常是相同的类型），因为您没有指定接口与任何奇怪的对象进行比较的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T18:14:54.357

[`Comparable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)接口是*通用*的。你的类声明应该看起来像这样：

```
class AccountOwnerComparable implements Comparable<AccountOwnerComparable> {... 
```

注意`AccountOwnerComparable`类型参数。有了这个，你会有

```
public int compareTo(AccountOwnerComparable other) {
    return name.compareTo(other.name);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T18:16:12.167

您可能在投射时错过了括号或其他东西。试试下面的一段代码。

```
public int compareTo(Object o) {
    if (name.compareTo(((AccountOwnerComparable) o).name) > 0) {
        System.out.println("Greater");
        return -1;
    } else if (name.compareTo(((AccountOwnerComparable) o).name) < 0) {
        System.out.println("Lesser");
        return 1;
    } else {
        System.out.println("Equal");
        return 0;
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T17:41:32.973

使用`Integer.parseInt()`方法。通过这种方式，您可以使用`>`or`<`并且它更冗长。我假设您想比较两个`String`包含数字的对象。虽然你没有写在问题中，但标题是这样写的。******

# emacs - 无法在 Emacs 中启动“lein”REPL

> ID：13671839
> 
> 赞同：17
> 
> 时间：2012-12-02T17:35:49.373
> 
> 标签：emacs, clojure, leiningen

在 Emacs 中，当使用. 时`clojure-mode`，我应该能够使用`C-c C-z`. 但是，每当我尝试时，我都会收到错误消息：

```
Searching for program: no such file or directory: lein 
```

我已经`lein`安装在`/usr/local/bin`(via `brew`) 中并且`/usr/local/bin`在我的`PATH`（甚至 Emacs 也这么说，via `eval-expression (getenv "PATH")`）中。

我错过了什么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-02T17:35:49.373

啊! `PATH`环境变量不是 emacs 搜索路径的全部和全部。还有“执行路径”。它显然做[大部分相同的事情，但不完全一样](http://emacswiki.org/emacs/ExecPath)。

无论如何，添加：

```
(add-to-list 'exec-path "/usr/local/bin") 
```

对我的`.emacs.d/init.el`（或者`.emacs`如果你是这样滚动的）为我清理了一切。上面链接的文档提出了一些更全面的建议，例如：

```
(setenv "PATH" (concat (getenv "PATH") ":/usr/local/bin"))
(setq exec-path (append exec-path '("/usr/local/bin"))) 
```

首先，我会尝试 (simple) `add-to-list`。但是YMMV。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-03T18:22:57.027

我遇到了同样的问题，并开始调查出了什么问题。我很快发现我的 exec-path 看起来像这样（简化示例）：

```
("/usr/local/bin /bin /sbin"). 
```

这是一个只有一个长字符串的列表，而不是一个单独的路径列表。我的 env PATH 变量看起来完全一样。显然问题来自我的外壳。

我用鱼壳。它的 PATH 变量分隔符只是一个空格。我使用的 exec-path-from-shell 包无法解析它。我通过将其附加到我的 .emacs.d/init.el 来修复它：

```
(setq exec-path (split-string (car exec-path))) 
```

更新：最后它是一个过时的 exec-path-from-shell 包。使用版本 1.8。它适用于鱼（和 tcsh）。

# php - 创建在线购物车

> ID：13671844
> 
> 赞同：0
> 
> 时间：2012-12-02T17:36:24.460
> 
> 标签：php

我试图总结所有选择的产品的价格。例如，如果我选择 2 个产品，其价格为 13 和 15，那么输出将是：“13 15”

我的问题是，如何输出这两项的结果？（对于这个例子，28）

```
for ($pos=0; $pos<=$level2; $pos++) { 
    $level3 = $level1[$pos];
    echo " ";
    $result2 = mysql_query("SELECT * FROM products WHERE id='$level3'");
    $results2 = array();
    while($row2 = mysql_fetch_array($result2))
    {
        $results2[] = $row2['price'];
        $level4 = array_sum($results2);
        echo "Price is".$level4;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:45:54.170

我会这样做：

```
$sum = 0;
for ($pos=0; $pos<=$level2; $pos++) { 
    $level3 = $level1[$pos];
    $result2 = mysql_query("SELECT * FROM products WHERE id='$level3'");
    while($row2 = mysql_fetch_array($result2))
    {
        $sum += $row2['price'];
    }
}
echo 'Price is '.$sum; 
```

# algorithm - KornShell (ksh) 调度算法 (SRT)

> ID：13671845
> 
> 赞同：8
> 
> 时间：2012-12-02T17:36:27.727
> 
> 标签：algorithm, shell, unix, scheduling, ksh

我被分配了从一个看起来像这样的 txt 文件中读取模拟进程的任务。

```
ID: 35; Arrival_Time: 0; Total_Exec_Time: 4;
ID: 65; Arrival_Time: 2; Total_Exec_Time: 6;
ID: 10; Arrival_Time: 3; Total_Exec_Time: 3;
ID: 124; Arrival_Time: 5; Total_Exec_Time: 5;
ID: 182; Arrival_Time: 6; Total_Exec_Time: 2; 
```

我必须从（先到先得，最短过程接下来，最短剩余时间，循环 q=2）的选择中完成两个算法。我需要根据我选择的两种算法打印出当前时间和当时正在运行的进程。我已经成功完成了 FCFS。我的下一个方法是在 SRT 上，除了算法背后的逻辑存在一些严重问题。

我目前正在尝试一种迭代方法（在下面发布），它在一定程度上有效（直到当前时间 9），但我觉得这可能只是一个幸运的巧合。

有没有人对此算法或其他两个算法之一有任何建议。我已经从事这项任务好几天了，并决定收起我的骄傲并在堆栈上发帖。

注意：这是我第一次使用 shell 脚本，所以我的代码可能有点乱。我仍在尝试了解 KornShell (ksh)。

```
file="/path/to/file.txt"
  IFS=': \;'
  i=0
  while read -r f1 f2 f3 f4 f5 f6  
    do 
      integer id[i]="$f2" #id array
      integer at[i]="$f4" #arrival time array
      integer et[i]="$f6" #exec time array
      integer rt[i]=0 #run time so far
      integer current[i]=i

      ((i++))
    done <"$file"

  integer curr_index=0
  integer currTime=0
  let totalProcesses=${#at[@]}
  let totalProcesses=totalProcesses-1
  let totalRunTime=0
  for x in ${et[@]}; do
    let totalRunTime+=$x
  done 

  scheduleTask () { 
    currTime=$1
    for y in ${current[@]}; do
      if (( rt[$y] < et[$y] )); then
        #if the program is not finished, keep going
        if (( at[$y] < $currTime )); then
          #if the program is in que, keep going
          let diff=et[$y]-rt[$y]#not currently using
          let currDiff=et[$curr_index]-rt[$curr_index] #not currently using         
          if (( et[$y] <= et[$curr_index] )); then #is this broken?
            curr_index=$y
          fi
        fi
      else
        echo "${id[$y]} RAN ${rt[$y]} out of ${et[$y]} seconds"

        unset current[$y]
      fi
    done
  }

  for (( i = 0; i < $totalRunTime; i++ )); do
    echo "================================="
    scheduleTask $i 
    ((rt[$curr_index]++))
    print "\t\tcurrent time: $i"
    print "\t\t\tcurrent process: ${id[$curr_index]}"
    echo "================================="
  done 
```

SRT 的正确输出应该是这样的。

```
=================================
        current time: 0
            current process: 35
=================================
=================================
        current time: 1
            current process: 35
=================================
=================================
        current time: 2
            current process: 35
=================================
=================================
        current time: 3
            current process: 35
=================================
=================================
        current time: 4
            current process: 10
=================================
=================================
        current time: 5
            current process: 10
=================================
=================================
        current time: 6
            current process: 10
=================================
=================================
        current time: 7
            current process: 182
=================================
=================================
        current time: 8
            current process: 182
=================================
=================================
        current time: 9
            current process: 124
=================================
=================================
        current time: 10
            current process: 124
=================================
=================================
        current time: 11
            current process: 124
=================================
=================================
        current time: 12
            current process: 124
=================================
=================================
        current time: 13
            current process: 124
=================================
=================================
        current time: 14
            current process: 65
=================================
=================================
        current time: 15
            current process: 65
=================================
=================================
        current time: 16
            current process: 65
=================================
=================================
        current time: 17
            current process: 65
=================================
=================================
        current time: 18
            current process: 65
=================================
=================================
        current time: 19
            current process: 65
================================= 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T22:40:36.460

我对堆栈溢出还比较陌生，对家庭作业的想法和意见还很幼稚。我正在讨论删除这个问题，但在阅读了这篇文章（[https://meta.stackexchange.com/questions/10811/how-to-ask-and-answer-homework-questions](https://meta.stackexchange.com/questions/10811/how-to-ask-and-answer-homework-questions)）后，我决定我的问题符合指导方针因此值得跟上。

我想出了最短剩余时间算法。我很庆幸没有人回答这个问题，我自己弄清楚算法（在我的助教的帮助下）是值得的。因此，我提供的答案将具有基本的伪逻辑，没有实际代码。

```
shortest = the first process read from the input(assuming it has already arrived)
while there are still processes to be run
     process = next process (out of processes that have not completed yet)
     if (process arrival time <= currentTime) #process arrived 
           if (process execution time < shortest execution time)
                 shortest = process 
```

注意：这与我从我的助教（写作业的人）那里得到的帮助几乎相同，这就是为什么我觉得发布这个答案很舒服。

# linq - 实体框架 - 基于表中唯一非聚集键的延迟加载

> ID：13671846
> 
> 赞同：0
> 
> 时间：2012-12-02T17:36:36.283
> 
> 标签：linq, entity-framework, entity-framework-4.1, lazy-loading

如果键是唯一且非集群的，实体框架似乎不会延迟加载相关记录。只是想知道我是否做错了什么。

假设我有两个表 - Employee 和 EmployeeTransactions。

EmployeeID 是 UNIQUE NONCLUSTERED 但不是表的主键。

假设为了这个问题，它是由另一个数据库生成并插入到雇员表中的。

但是，大多数其他表都有一个 EmployeeID，它是表Employees 的外键

```
 --Table Employee 
  DBGEneratedPK
  EmployeeID (Unique NonClustered, Indexed)

  -- Table EmployeeTransactions 
  TransactionID (PK Clustered)
  EMployeeID (FK into Table A)
  Other columns 
```

现在，当我使用实体框架检索员工时，它没有显示延迟加载员工事务的选项？

```
 employee.employeetransactions 
```

这是EF的限制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:02:25.200

是的，这是 EF 的限制。仅当主体表中的键是主键时，EF 才支持关系。[目前不支持](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1050579-unique-constraint-i-e-candidate-key-support)仅唯一键。

# mysql - 科纳卡丁车。数据库中的错误字符

> ID：13671847
> 
> 赞同：0
> 
> 时间：2012-12-02T17:36:40.697
> 
> 标签：mysql, database, utf-8, konakart

我成功安装了康纳卡特。我正在使用 MySQL 数据库并设置 utf-8 编码。另外我添加了俄语，但是当我创建新用户并在仅显示的数据库中使用俄语字符指定名称时？？？迹象。如果我手动指向数据库，一切都会正确显示。

更新

数据库中的字符显示正确，但文件属性 Messages.properties 出现编码问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:46:19.450

我有过类似的问题。首先要做的是找出确切写入数据库的内容。使用 MySQL 非常简单，只需登录并运行

```
SELECT HEX( column ) FROM table; 
```

尽管从您所说的内容来看，正确的字节已经在数据库中。接下来是检查您与 Konakart 的连接设置为什么字符集。连接后，运行“SHOW VARIABLES LIKE 'character_set_%'”并打印出结果。如果没有别的，检查您指定的字符集选项是否已采用很有用。

这个[其他问题](https://stackoverflow.com/questions/12869778/fetching-utf-8-text-from-mysql-in-r-returns/12872139#12872139)可能有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T15:44:29.333

属性文件应保存为 ISO-8859-1 文件

您可以使用 \uXXXX 格式添加特殊字符或创建属性文件的 UTF-8 版本并使用 native2ascii 进行转换。

例如：

native2ascii -encoding utf8 myProps.utf8 myProps.properties

# java - 由于创建的不同，String 的行为会有所不同吗？

> ID：13671854
> 
> 赞同：-1
> 
> 时间：2012-12-02T17:36:59.750
> 
> 标签：java, string, comparison, equals

*首先，我在 SO 和 Google 中都搜索了这个。如果你说这是某处某物的复制品，那确实很难达到。*

嗯...我们知道字符串是对象，必须使用等号进行比较，对吧？

那么，请解释一下：

```
String s1 = new String("string");
String s2 = new String("string");
String s3 = "string";

System.out.println(s1.equals(s2));  // true
System.out.println(s1 == s2);       // false

System.out.println(s1 == "string"); // false
System.out.println(s2 == "string"); // false
System.out.println(s3 == "string"); // true 
```

关于`== "string"`输出，为什么只有最后一个打印“真”？

当它们被创建时，它们不都是字符串吗？现在我的第三根弦是丑小鸭吗？...更糟糕的是：如果我正在使用外国字符串...它可能不是我认为的字符串？！（注意 s3`String`之前有，而不是一些原始的。）

...我很确定 s3 里面有一个对象。

换句话说，像这样声明 String 有什么区别：

```
String s1 = new String("string"); 
```

还有一个是这样的：

```
String s3 = "string"; 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T17:43:44.353

当你这样做时`String s1 = new String("string");`，它会在内存中创建一个新`String`对象并通过它来保存引用`s1`。类似`String s2 = new String("string");`地，您通过 获得另一个 String 对象引用`s2`。

`==`运算符比较对象引用因此`s1 == s2`是错误的，因为它们是差异字​​符串对象。

当您说`String s3 = "string";`时，它会在内部池中创建一个**String 常量文字** 对象（**String 类维护内部池**）并将引用分配给`s3`.

以下规格中的更多详细信息：

> > **所有文字字符串和字符串值的常量表达式都是实习的。**[字符串文字在Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5)的 §3.10.5 中定义

现在，当您说 ,`s3=="string"`引用`"string"`相同的 String 对象引用时`s3`（Java 在创建匿名常量文字时进行了优化，因此不会再次创建相同的值文字）。因此，这种比较导致`true`.

情况并非如此，`s1`因为`s2`每个都引用内存中的显式 String 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T18:01:27.627

我希望你知道 Java 中的 SCP（字符串常量池）。当您使用 new 创建字符串时，它会像普通 java 对象一样创建新的引用...但是当您声明像 s3 = "string" 时，它只会在 SCP 中为相同的值字符串创建一次引用。这意味着如果您创建任何其他类似 s5 = "string" 它将指向相同的引用它不会创建新的引用。== 将仅检查参考，但 .equals() 方法检查值。在您的程序中，“string”字符串值已经存储在 scp 区域中，因此当您检查 s3 == “string” 时，它会返回 true。它没有创建新的参考。如果您想要更清晰的评论...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T17:41:43.220

编译器将搜索像“string”这样的硬编码文字，并将它们替换为相同的引用对象。

您的其他两个对象应该返回 true on `equals()`，但它们根本是不同的对象，因为您使用的是 new 运算符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T17:42:14.457

type的一些值`String`可以是*interned*，也就是说，`String`具有相同值的多个实例可以指向同一个对象。对于此类实例`==`将正常工作，尽管您不能依赖此行为，除非您`intern()`明确调用。

您可以尝试以下将始终打印的代码段`true`：

```
 String s1 = new String("a").intern();
    String s2 = "a".intern();

    System.out.println(s1 == s2); 
```

# regex - 更改正则表达式以接受 $、% 和 & VB.NET 2010

> ID：13671858
> 
> 赞同：0
> 
> 时间：2012-12-02T17:37:18.790
> 
> 标签：regex, vb.net-2010

我有一个接受字符串的功能

```
VECJ`880326`AB1
ROPL`951201`HD9
ABC`680504`XXX 
```

但我也想接受

```
V&CJ`880326`AB1
RO%L`951201`HD9
ABC$`680504`XXX 
```

我将如何更改功能：

```
Function IsValid(ByVal strIn As String) As Boolean
  Return Regex.IsMatch(strIn, ("^[a-zA-Z]{3,4}(\d{6})((\D|\d){3})?$")) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:38:38.073

好吧，你已经有了一个[字符类](http://www.regular-expressions.info/charclass.html)。只需添加所需的字符：

```
"^[a-zA-Z$%&]{3,4}(\d{6})((\D|\d){3})?$" 
```

另外，您是否知道最后接受**任何**3 个字符？`\d`是任何数字字符，并且`\D`是任何其他字符。如果您打算只接受字母和数字，则可以使用`[a-zA-Z0-9]{3}`代替`(\D|\d){3}`.

# c# - 使用分页选择/取消选择列表视图中的所有复选框

> ID：13671860
> 
> 赞同：0
> 
> 时间：2012-12-02T17:37:28.190
> 
> 标签：c#, asp.net, vb.net

我有带有复选框和复选框的列表视图控件，用于在更新面板中选择所有带有分页的选择 - 取消选择所有工作正常，除了在第 1 页中选择所有元素时选择所有元素但其他页面未选择任何想法

```
<asp:ListView ID="lstvw_all" runat="server" DataKeyNames="para"  >
                                        <LayoutTemplate>
                                            <table cellpadding="3" cellspacing="0" id="tbl_pers">
                                                <tr class="rsgridh">
                                                    <th>
                                                        رقم الإداري
                                                    </th>
                                                    <th>
                                                        الاسم
                                                    </th>
                                                    <th>
                                                        مهمة العمل
                                                    </th>
                                                    <th>
                                                        الفرع
                                                    </th>
                                                    <th>
                                                        الدورة
                                                    </th>
                                                    <th>
                                                        عدد المتدربين
                                                    </th>
                                                    <th>
                                                        المبلغ المستحق
                                                    </th>
                                                    <th>
                                                       <asp:CheckBox ID="cbSelectAll" runat="server" onclick="SelectAll(this);" />
                                                    </th>
                                                </tr>
                                                <tr id="itemPlaceHolder" runat="server">
                                                </tr>

                                            </table>
                                        </LayoutTemplate>
                                        <ItemTemplate>
                                            <tr class="rsgridi">
                                                <td>
                                                    <%# Eval("per_no") %>
                                                </td>
                                                <td>
                                                    <%# Eval("per_name") %>
                                                </td>
                                                <td>
                                                    <%# Eval("job_desc") %>
                                                </td>
                                                <td>
                                                    <%# Eval("org_label") %>
                                                </td>
                                                <td>
                                                    <%# Eval("course_desc") %>
                                                </td>
                                                <td>
                                                    <%# Eval("cnt_all") %>
                                                </td>
                                                <td>
                                                    <%# Eval("intial_cost") %>
                                                </td>
                                                <td>

                                                    <asp:CheckBox runat="server" ID="cbSelected"   Checked='<%# Selected(DataBinder.Eval(Container.DataItem,"para")) %>'  ToolTip='<%# DataBinder.Eval(Container.DataItem,"para") %>' >
                                                    </asp:CheckBox>
                                                </td>
                                            </tr>
                                        </ItemTemplate>
                                        <AlternatingItemTemplate>

                                         <tr class="rsgridai">
                                                <td>
                                                    <%# Eval("per_no") %>
                                                </td>
                                                <td>
                                                    <%# Eval("per_name") %>
                                                </td>
                                                <td>
                                                    <%# Eval("job_desc") %>
                                                </td>
                                                <td>
                                                    <%# Eval("org_label") %>
                                                </td>
                                                <td>
                                                    <%# Eval("course_desc") %>
                                                </td>
                                                <td>
                                                    <%# Eval("cnt_all") %>
                                                </td>
                                                <td>
                                                    <%# Eval("intial_cost") %>
                                                </td>
                                                <td>

                                                    <asp:CheckBox runat="server"   ID="cbSelected"  Checked='<%# Selected(DataBinder.Eval(Container.DataItem,"para")) %>' ToolTip='<%# DataBinder.Eval(Container.DataItem,"para") %>' s>
                                                    </asp:CheckBox>
                                                </td>
                                            </tr>
                                        </AlternatingItemTemplate>
                                    </asp:ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:53:02.703

这是无法做到的 - 当您在第一页时，其余页面并不实际存在。

当您要求选择所有复选框时，就是您所看到的。更改页面后，其他复选框设置为默认值（可能未选中）

因此，重新设计您的用户界面以实现您的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T17:57:14.520

This can be done with a tweak ,this is for gridview ,convert this for listview or any other repeater control

Gridview HTML

```
<asp:GridView ID="GridView1" runat="server" 
AutoGenerateColumns="False" AllowPaging="True"  
PageSize="5" Width="324px" DataKeyNames="CategoryID" 
OnPageIndexChanging="GridView1_PageIndexChanging">
<Columns>
<asp:BoundField DataField="CategoryID" HeaderText="CategoryID" />
<asp:BoundField DataField="CategoryName" HeaderText="CategoryName" />
<asp:TemplateField HeaderText="Select">
<ItemTemplate>
<asp:CheckBox ID="CheckBox1" runat="server" />
</ItemTemplate>
</asp:TemplateField>
</Columns>
</asp:GridView> 
```

CS Codes

```
protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
  RememberOldValues();
  GridView1.PageIndex = e.NewPageIndex;
  BindData();
  RePopulateValues();
} 
```

And

```
private void RememberOldValues()
{
  ArrayList categoryIDList = new ArrayList();
  int index = -1;
  foreach (GridViewRow row in GridView1.Rows)
  {
   index = (int) GridView1.DataKeys[row.RowIndex].Value;
   bool result = ((CheckBox)row.FindControl("CheckBox1")).Checked;

  // Check in the Session
  if (Session[CHECKED_ITEMS] != null)
   categoryIDList = (ArrayList)Session[CHECKED_ITEMS];
  if (result)
  {
  if (!categoryIDList.Contains(index))
   categoryIDList.Add(index);
  }
  else
   categoryIDList.Remove(index);
  }
  if (categoryIDList != null && categoryIDList.Count > 0)
   Session[CHECKED_ITEMS] = categoryIDList;
} 
```

And

```
private void RePopulateValues()
{
  ArrayList categoryIDList = (ArrayList)Session[CHECKED_ITEMS];
  if (categoryIDList != null && categoryIDList.Count > 0)
  {
  foreach (GridViewRow row in GridView1.Rows)
  {
   int index = (int)GridView1.DataKeys[row.RowIndex].Value;
  if (categoryIDList.Contains(index))
  {
   CheckBox myCheckBox = (CheckBox) row.FindControl("CheckBox1");
   myCheckBox.Checked = true;
  }
  }
  }
} 
```

Bind Data Code

```
/* QUERY */
private const string QUERY_SELECT_ALL_CATEGORIES = "SELECT * FROM Categories";

private void BindData()
{
  SqlConnection myConnection = new SqlConnection(ConnectionString);
  SqlDataAdapter ad = new SqlDataAdapter(QUERY_SELECT_ALL_CATEGORIES,
  myConnection);
  DataSet ds = new DataSet();
  ad.Fill(ds, "Categories");
  GridView1.DataSource = ds;
  GridView1.DataBind();
} 
```

For more details chk this [Maintaining_State_of_CheckBoxes](http://aspalliance.com/774_Maintaining_State_of_CheckBoxes_While_Paging_in_a_GridView_Control.all)

# php - Wordpress init_curl() 函数错误

> ID：13671861
> 
> 赞同：1
> 
> 时间：2012-12-02T17:37:28.280
> 
> 标签：php, curl

我正在尝试制作一个 wordpress 插件，该插件通过 API 获取 twitter 推文，并在页面上插入短代码 [twitter] 时在页面上回显它们。

我收到一个错误：

> “致命错误：在 C:\WAMP\WWW\WP\WP-CONTENT\PLUGINS\PLOG\PLUGIN.PHP 第 45 行调用未定义的函数 CURL_INIT()”

代码中没有语法错误，也没有任何逻辑错误。

这是代码：

```
<?php
/* Plugin Name: Testing a Plugin
 * Plugin URI: http://www.wordpress.com
 * Description: Just Testing out a plugin.
 * Author: Knooww
 * Author URI: http://www.wordpress.com
 */
?>
<?php
//limit calls to API..
// Save data in cache, refresh content after an hour

add_shortcode('twitter',  function ($atts,$content){

          $atts = shortcode_atts(array('username'=>'Default-Username',
                                 'content' =>!empty($content) ? $content:'Follow me on twitter',
                                 'show_tweets'=>'false',
                                 'tweet_reset_time'=>10, //time to refresh fetch of tweets
                                 'num_tweets'=>5

            ),$atts);

    extract($atts);
    if($show_tweets){

        $tweets = fetch_tweets($num_tweets,$username,$tweet_reset_time);
    }

//return '<a href="http://www.twitter.com/'.$username.'">'.$content.'</a>';

});// end add_shortcode

function fetch_tweets($num_tweets,$username,$tweet_reset_time){

    $tweets = curl("https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name='$username'&count=2");
  print_r($tweets);  

}

function curl($url){

$c = curl_init($url);
curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($c, CURLOPT_CONNECTTIMEOUT, 3);
curl_setopt($c, CURLOPT_TIMEOUT, 5);
return json_decode(curl_exec($c));

}

?> 
```

请让我知道我错过了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T18:41:08.580

在 Windows 上激活 PHP/CURL 会启动记事本（或类似工具）并从 php.ini 中的以下行中删除分号：

```
;extension=php_curl.dll 
```

请阅读[http://in1.php.net/manual/en/install.windows.extensions.php](http://in1.php.net/manual/en/install.windows.extensions.php)

# linux - 从编译文件（linux）中获取所有全局变量。如何将静态与常量分开？

> ID：13671864
> 
> 赞同：2
> 
> 时间：2012-12-02T17:37:48.187
> 
> 标签：linux, global-variables, nm

所以，我这里有一些很奇怪的东西。

例如，我有 2 个 .cpp 文件，其中一个包含

```
const std::string DICTIONARY_DEFAULT = "blah";
const std::string ADDTODICTIONARY_DEFAULT = "blah";
const std::string BUTTONS = "blah"; 
```

第二个是

```
static int  x1;
static int  NewY1, NewY2, NewX1, NewX2; 
```

两个片段都在全局变量部分。我需要打印全局静态变量（例如），但忽略常量。在`nm`输出中，它们看起来完全相同（每种情况下的 b 类型，这意味着未初始化的本地范围符号）。有没有办法仅使用 linux 实用程序（grep、regexps 等完全可以）来自动分离这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:39:52.997

***简短的回答***：实际上没有办法在每种情况下都这样做

***长答案***：使用“objdump -x file.o”查看符号表。您可以看到所有全局变量，包括静态和常量，都分配到一个名为 .bss 的部分中。还存在一个称为 .rodata 的部分，一般来说，它用于存储 const 数据。不幸的是，在您的情况下，您声明了两个 const std::string 对象。这些对象通过在“main”函数运行之前调用它们的构造函数来初始化。尽管如此，它们的字段的初始化发生在运行时，因此它们只是“逻辑上”的 const，而不是真正的 const。

编译器别无选择，只能将它们与所有其他全局变量一起分配到 .bss 部分。如果添加以下行

```
const int willBeInRoData = 42; 
```

您会发现它的符号将在 .rodata 部分中，因此它将与其他全局整数区分开来。

注意：受骗[尝试从编译文件中查找全局变量。程序无法区分常量和全局变量。](https://stackoverflow.com/questions/13684683/try-to-find-global-variables-from-compiled-files-the-program-cant-distinguish/13687338#13687338)因为问题完全一样。

# solr - 在 Tomcat 中配置 Solr 请求处理程序

> ID：13671865
> 
> 赞同：0
> 
> 时间：2012-12-02T17:37:49.997
> 
> 标签：solr

我是 solr/java 的菜鸟。我在 Tomcat(Windows) 上运行了 solr 3.6.1。我能够获得 solr 管理页面。我想继续进行 DIH 配置。然而，solarconfig.xml 特别混淆了请求处理程序类的路径。请求处理程序类被指定为

“solr.SearchHandler”或“org.apache.solr.handler.dataimport.DataImportHandler”

我在我的 solr 主目录或 solr webapp（在 tomcat webapps 文件夹下）中找不到这些文件中的任何一个。我确实在我的 solr 下载中找到了这些的 HTML 文件（因为我刚刚复制了 solr_home 的 example/solr 目录和 webapp 的 solr.war 文件，所以它是单独放置的）。我是否需要手动复制这些文件，如果需要，我的目录结构应该在哪里以及如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T07:41:26.190

`solr.SearchHandler`类由 Solr 战争文件解决。对于`org.apache.solr.handler.dataimport.DataImportHandler`类，您应该将所需的 jar 文件添加到 lib 目录中。最终的 solr 目录应如下所示：

```
-solr
  +conf
  +data
  -lib
    +apache-solr-dataimporthandler-x.y.z.jar
    +apache-solr-dataimporthandler-extras-x.y.z.jar
  +apache-solr-x.y.z.war
  +solr.xml 
```

此外，您应该在 lib 文件夹中添加其他需要的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T19:43:04.280

对于 DIH，您需要将相应的 jar (apache-solr-dataimporthandler-x.jar) 添加到 webapps (Tomcat) 中的 lib 目录中。还将 contrib/dataimporthandler/lib 中的文件复制到此目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T04:48:15.810

DIH 所需的每个类文件都包含在 web 应用程序文件夹附带的 war 文件中。您可以将这些用于您的开箱即用功能。如果您真的想解决任何自定义的代码，那么您可以在存储库中下载带有源代码的版本。

# python - Flask 蓝图和 werkzeug.contrib.cache

> ID：13671868
> 
> 赞同：1
> 
> 时间：2012-12-02T17:38:15.423
> 
> 标签：python, flask, werkzeug

我正在使用 werkzeug 缓存在请求之间将常用对象缓存在内存中。我一直在进行大量重构并开始使用蓝图，但现在应用程序在尝试写入缓存时会严重崩溃。我无法获得任何调试信息，因为它只是死了。任何人都知道在哪里看，或者更好的方法来解决这个问题？我从数据库中读取的数据很少发生变化，所以我想跨请求将其缓存在网络服务器中，并让它超时并每 10 或 20 分钟刷新一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:36:43.647

我为这么少的信息道歉，我没有什么可继续的，我想我会把它扔在那里。所以事实证明这是一个大红鲱鱼。

真正的答案是……我是个白痴。

我正在缓存一个覆盖了**getattr**函数的对象，该函数有一个非常糟糕的错字。

```
return self.__getatribute__(name) 
```

请注意，getattribute 中缺少 t。这导致了无限循环，并使应用程序无声无息地死掉。感谢您的帮助，下次我会提供更多信息。

# node.js - 通过 mongoose 流导出到 node-csv

> ID：13671875
> 
> 赞同：3
> 
> 时间：2012-12-02T17:38:52.543
> 
> 标签：node.js, mongoose

试图在 mongodb 中获取一些数据（~500Mb）的 CSV 转储。思想流将是要走的路，以避免在内存中构建一个数组，然后立即构建 csv。

但是，mongoose 创建的流和 csv 期望的流似乎不是一回事。

```
 var stream = Subscriber.find().stream()                                                                                                   
 stream.setEncoding = function() { }                                                                                                       

 csv().from.stream(stream).on('record', function(record, index) {                                                                          
     console.log(record)                                                                                                                   
     console.log(index)                                                                                                                    
 }) 
```

如果没有`setEncoding()`上面的存根，当 csv 在流上调用 setEncoding 时，我会收到一个错误。有了它，结果

```
TypeError: Object #<Object> has no method 'indexOf'
    at [object Object].stringify   (/home/project/node_modules/csv/lib/stringifier.js:98:35) 
```

那么，这甚至是正确的方法吗？如果是这样，流有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:53:24.480

正如 zeMirco 所说：要获取集合的 CSV 转储，我会使用`mongoexport`MongoDB 附带的工具。以下是将数据库“mydatabase”中名为“users”的集合导出为 CSV 格式的示例：

```
$ mongoexport --csv --host localhost:27017 --db mydatabase --collection users --fields name,email,age -o output.csv 
```

你会得到如下所示的东西：

```
$ cat output.csv
name,email,age
renold,renold.ronaldson@gmail.com,21
jacob,xXxjacobxXx@hotmail.com,16 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-08T14:09:31.780

如果您想通过访问 URL 并使用 express 从网络服务器下载 csv，您可以这样做：

```
var through = require('through');
var csv = require('csv')
var MyModel = require('./my_model');

app.get('/download_csv/', function(req, res) {

    res.setHeader('Content-disposition', 'attachment; filename=attendances.csv');
    res.contentType('csv');
    res.write('property 1,property 2\n');

    var modelStream = MyModel.find().stream();

    modelStream.
        pipe(through(write, end)).
        pipe(csv.stringify()).
        pipe(res);

    function end() {
        res.end();
        console.log('done outputting file');
    }

    function write(doc) {
        var myObject = doc.toObject({getters:true, virtuals:false});
        this.queue([
            myObject.property_1,
            myObject.property_2
        ]);
    }
}); 
```

注意：这是使用最新版本的 csv 模块（v0.4），而之前的答案使用的是旧版本的模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-06T19:04:53.257

像这样的东西应该工作。替换`process.stdout`为文件流以将其写入文件。

```
var csv = require('csv')
var through = require('through')
var Model = require('...')
_ = require('underscore')

var modelStream = Model.find().stream();

modelStream.pipe(through(write, end)).pipe(csv()).pipe(process.stdout);

function end(){ console.log('done'); }
function write(doc) {
    this.queue(_.values(doc.toObject({getters:true, virtuals:false})));
} 
```

# php - Photoshop 效果与 GD 库或 ImageMagick 之间的等效性

> ID：13671880
> 
> 赞同：0
> 
> 时间：2012-12-02T17:39:21.820
> 
> 标签：php, imagemagick, gd, photoshop

我在 Photoshop 中创建了杂志布局，我想使用 GD 或 ImageMagick 根据用户输入动态生成自定义杂志封面，为此我在 Photoshop 上使用了一些效果，基本上带有特定的“投影”效果文本图层。

我在 GD/ImageMagick 教程上发现了一些阴影，但没有一个关于哪个设置与 Photoshop 相似的完整，例如，我有一个具有此设置的阴影：

```
Blend Mode: Multiply 
Opacity: 75%
Angle: 120º
Distance: 1px
Spread: 3%
Size: 5px 
```

有没有办法在代码上重新创建它？

谢谢

# java - How to call native functions from a VM?

> ID：13671882
> 
> 赞同：1
> 
> 时间：2012-12-02T17:39:47.553
> 
> 标签：java, c++, java-native-interface, shared-libraries

*By native I mean written in C++ or C*

I'm making a programming language based off Java, in that it has a VM and a language to bytecode compiler.

Implementing the language's features, such as `for` loops, variables, arithmetic and so on, isn't a problem for me; however, executing native functions like Java can is.

I need the native functions in order to make it possible for programs written in my language to create windows, interface with hardware and the OS, and do just about anything that isn't simple mathematics.

I've heard about the [JNI](http://en.wikipedia.org/wiki/Java_Native_Interface#How_the_JNI_works), and it definitely seems like something I'd want, however, I am not sure how to implement something like that.

As my VM is implemented in C++, I know that I could have it `#include` hpp files of my native functions at compile-time, and then it could dynamically load `dll`'s or `so`'s, however, this doesn't really seem like a good solution because you'd have to recompile the VM every time you'd want it to be able to execute another native function.

The problem comes down to this: how can a C++ program (the VM), dynamically (at runtime, as instructed by bytecode, to be more precise) load libraries with C++ functions, and then execute those functions without them being predeclared in some header file?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:08:04.927

Look at [libffi](http://sourceware.org/libffi/). It provides methods to call any function given a function address and a calling signature.

How you figure out what that signature should be depends on your context. You can infer a wide range of calls based on argument types. [JNA](http://github.com/twall/jna) infers native call signatures from explicit Java interfaces, method declarations, or dynamic call arguments.

Going beyond simple function invocations to handle constructors, memory management, and object method dispatching is more complex, but is still based the same basic principles.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T01:01:29.470

One topic I have not seen discussed is how to pass arguments from your new language VM function calls to the C++ stack, and how to pass the return value from the C++ function back into your VM.

Lets say you want to make the pow(3) function available in your new language. As a reminder, the pow() signature is

```
double pow ( double base, double power ) 
```

The simplest way is something like this

```
void
language::pow( VM * pVM )
{
    double arg2 = pVM->PopDouble();
    double arg1 = pVM->PopDouble();
    double result = pow( arg1, arg2 );
    pVM->PushDouble( result );
} 
```

But that does not sound like what you are after. Incorporating dlopen() & dlsym() gets your something like

```
void
language::pow( VM * pVM )
{
    double arg2 = pVM->PopDouble();
    double arg1 = pVM->PopDouble();
    void *handle = dlopen("libm", RTLD_LAZY);
    if (!handle) { /*...return; ...*/ }
    typedef double (* pfPow ) ( double, double );
    pfPow pPow = (pfPow) dlsym(handle, "pow");
    if (!pPow) { /*...return; ...*/ }
    double result = (* pPow )( arg1, arg2 );
    pVM->PushDouble( result );
} 
```

But that is even worse. You still need a stub function per C++ function you want your language to be able to access.

It sounds like you want your language to have something like

```
double result = eval_double( "libm", "pow", arg1, arg2 ); 
```

I do not know how to implement that in C++. Varags supports fetching C++ arguments of any type. But there is no API for pushing C++ arguments of arbitrary type.

# javascript - 如何更改代码以使其可以执行？

> ID：13671883
> 
> 赞同：0
> 
> 时间：2012-12-02T17:39:47.997
> 
> 标签：javascript, jquery

我使用 jQuery 开发移动应用程序。问题是，当我在页面中添加 5 或 6 行时，一切顺利，但如果我添加 120 行，它会显示错误消息：`Javascript execution exceeded timeout`.

```
function succes_recu_list_rubrique(tx, results) { //après avoir rempli sqlite
  console.log('ENTRééééééééééééééé---');
  $('#lbtn').prepend("<legend>Sélectionner une rubrique</legend><br>");
  for(var i=0; i<results.rows.length; i++) {
    //Remplir tableau liste des identifiants étapes
    $('#lbtn').append("<input name='opt1' checked type='radio' value="+results.rows.item(i).IdRubrique+" id="+results.rows.item(i).IdRubrique+" />");
    $('#lbtn').append('<label for='+results.rows.item(i).IdRubrique+'>'+results.rows.item(i).LibelleRubrique+'</label>');   
  }
  $('#lbtn').append('<a href="#page_dialog2" class="offer2" data-rel="dialog" data-role="button" >Consulter</a>').trigger('create');
  $('#lbtn').append('<a href="#'+id_grp_rub+'" data-role="button" data-rel="back" data-theme="c">Cancel</a>').trigger('create');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:43:03.113

您可以使用一个字符串中的所有 html 调用一次，而不是`.append`单独调用四次，然后在两个新创建的锚点上调用一个触发器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T18:00:55.910

为您的选择创建一个局部变量：

```
var temp = $('#lbtn') 
```

将所有行添加到该变量

```
temp += "code here"; 
```

等等

然后附加到元素一次。

# actionscript-3 - Flex 中奇怪的滚动器行为

> ID：13671897
> 
> 赞同：0
> 
> 时间：2012-12-02T17:40:53.053
> 
> 标签：actionscript-3, apache-flex

当我执行以下应用程序时，我的范围`Scroller`会一直延伸到内部组的高度。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:s="library://ns.adobe.com/flex/spark" xmlns:fx="http://ns.adobe.com/mxml/2009"> 
    <s:Scroller width="100%" height="100%" verticalScrollPolicy="on">
        <s:Group height="1400"/>
    </s:Scroller>
</s:Application> 
```

这是我得到的：

![在此处输入图像描述](../Images/7bf88fd44fc2ee0023905c024b363ed9.png)

我希望它与我的窗口大小相同。你能解释一下，我做错了什么吗？为什么不用`Scroller`作视口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:53:12.137

通常，您希望将滚动条的高度/宽度设为显式值，并将子项的高度/宽度设为百分比。你已经反过来了。所以，像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:s="library://ns.adobe.com/flex/spark" xmlns:fx="http://ns.adobe.com/mxml/2009"> 
    <s:Scroller width="100%" height="1400" verticalScrollPolicy="on">
        <s:Group height="100%"/>
    </s:Scroller>
</s:Application> 
```

但是，这并不能解决使滚动条/组成为可用窗口宽度的问题。我会通过调整 updateDisplayList() 方法中的元素大小来做到这一点。

```
 <?xml version="1.0" encoding="utf-8"?>
    <s:Application xmlns:s="library://ns.adobe.com/flex/spark" xmlns:fx="http://ns.adobe.com/mxml/2009"> 
<fx:Script>
  protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number:void{
    super.updateDisplayList(unscaledWidth, unscaledHeight);
    myScroller.width = unscaledWidth;
    myScroller.height - unscaledHeight;
    mySCrollingGroup.width = unscaledWidth 
    mySCrollingGroup.height - unscaledHeight;
  }
</fx:Script>

        <s:Scroller verticalScrollPolicy="on" id="myScoller">
            <s:Group id="mySCrollingGroup" />
        </s:Scroller>
    </s:Application> 
```

您可能需要调整 myScrollingGroup 的大小以适应滚动条的高度/宽度。或者，您可以使用 myScrollingGroup 上的 precentHeight/percentWidth 属性并将它们设置为 100%。

# c++ - 在结构 C++ 中使用 std::swap 和 std::vector

> ID：13671899
> 
> 赞同：0
> 
> 时间：2012-12-02T17:41:09.183
> 
> 标签：c++, c++11

如何使用 std::swap 将向量复制到结构中的向量？这是我要做的一个例子

```
#include<vector>

using namespace std;

struct test{
    vector<int> a;
    vector<int> b;
};

int main(){

    int data[] = { 1, 2, 3 };
    int data2[] = {3,4,5 };
std::vector<int> c( &data[0], &data[0]+sizeof(data)/sizeof(data[0]));
std::vector<int> d( &data2[0], &data2[0]+sizeof(data2)/sizeof(data2[0]));

    test A = test(swap(c) , swap(d) );

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T17:46:04.960

您不能换成构造函数或函数参数。您只能交换为左值。这就是 C++11 一开始就引入移动语义的原因之一：允许用户显式地将对象移动到参数中等等。

因此，您需要提供`test`适当的构造函数并调用它，`std::move`用于将左值`vector`对象转换为右值引用。

```
struct test{
    test(vector<int> _a, vector<int> _b) : a(std::move(_a)), b(std::move(_b)) {}
    vector<int> a;
    vector<int> b;
};

...

test A{std::move(c), std::move(d)}; 
```

如果你真的想*复制*向量，你可以这样做：

```
test A{c, d}; 
```

# c++ - 用简单的程序实现慢速多线程

> ID：13671901
> 
> 赞同：0
> 
> 时间：2012-12-02T17:41:24.367
> 
> 标签：c++, multithreading, performance

我正在玩多线程（没有先前的经验），并且有一个简单的函数从 int main 通过两个单独的线程调用，这些线程只是从 2 个 for 循环中更改（并创建）一个变量。据我所知，两个线程之间没有依赖关系，但是一个线程运行我的时间是 2.29 秒，两个时间是 7.11 秒（我本来预计会是 3-4 秒）。

我在具有两个 Intel atom CPU（Ubuntu 10.04）的上网本上运行 - 我知道这两个线程都不会获得单个 CPU 的完全“所有权”，因为 int main() 进程本身涉及一个线程（以及任何操作系统需要）但我对性能下降感到震惊（大概是线程切换！？）

有什么办法可以在这里改进吗？（可能会减少 CPU 在线程之间跳转所需的工作）。我希望很快能做一些更丰富的事情（使用轮分解进行初筛，其中不同的线程拥有不同的辐条），但我对我现在得到的性能印象并不深刻

我现在的简单代码如下：

```
#include <iostream>"
#include <ctime>
#include <pthread.h>

void* foo(void* dummyVar)
{
    for(int i=1; i < 10; i++)
    {
        for(int j=1; j < 50000000; j++)
        {
            int test = j;
        }
            std::cout << i << "\n";
    }
    pthread_exit(NULL);
}

int main(int argc, const char *argv[])
{
    clock_t start = clock();
    pthread_t thread1;
    pthread_t thread2;
    pthread_attr_t attribute;
    void* status;
    pthread_attr_init(&attribute);
    pthread_attr_setdetachstate(&attribute, PTHREAD_CREATE_JOINABLE);
    int i = 0;
    int b = pthread_create(&thread1, NULL, foo, (void*)i);
    int c = pthread_create(&thread2, NULL, foo, (void*)i);
    pthread_join(thread1, &status);
    pthread_join(thread2, &status);

    std::cout << ((double)clock() - start) / CLOCKS_PER_SEC << "\n";
    return 0;
} 
```

更新：我通过让与 main() 关联的线程在另一个线程也调用 foo 之后（而不是两个线程）调用 foo 来获得更好的性能（显然！），尽管这台机器上的多线程仍然较慢（已经对foo - 现在只有一个 for 循环 - 时间是 5.17 vs 6.01）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T22:06:12.650

```
 for(int j=1; j < 50000000; j++)
    {
        int test = j;
    } 
```

适当的基准测试可能是一门艺术，但这个很快就会失败。此代码生存的唯一方法是忘记打开优化器。这在任何体面的编译器上都会完全消除循环，因为它没有有用的副作用。

假设您确实打开了优化器，您实际上测量了 10 次

```
 std::cout << i << "\n"; 
```

一个永远不能同时运行的语句，线程将争夺序列化对终端/控制台的访问的锁。有了预期的结果，这确实会变慢。

但是很有可能您忘记了优化器，在没有打开它的情况下永远不会分析代码，您不会以这种方式发布它。

# grails - 用于 grails 的石英调度程序

> ID：13671909
> 
> 赞同：-1
> 
> 时间：2012-12-02T17:41:49.010
> 
> 标签：grails, quartz-scheduler

我是使用此调度程序的新手。我想知道我是否需要在页面上有一个网络浏览器，以便调度程序的时间总是更新？或者调度程序将运行这么长时间它已经部署到tomcat？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:34:49.767

不，这就是重点。作业在服务器运行时在后台运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T23:53:36.237

调度程序不需要与正在运行的服务器的活动连接（没有打开的浏览器）。实际上，如果您使用石英，主要是因为您想按时间执行一些不需要用户交互的任务。

# java - 以某种方式在 Java 中处理无符号字节

> ID：13671915
> 
> 赞同：3
> 
> 时间：2012-12-02T17:42:29.103
> 
> 标签：java, arduino, low-level

我正在尝试创建一个 Java 程序来编写文件供我的 Adruino 读取。Arduino 是一个简单的 8 位微控制器板，并带有一些额外的硬件，可以逐字节读取 SD 卡中的文本文件。

事实证明，这比我想象的要难得多。首先，Java 中没有无符号值。由于某种原因，甚至没有字节！即使尝试将一个字节设置为 0xFF 也可能会导致精度错误！这对于这个低级代码不是很有用..

我会使用整数并且只使用正值，但我喜欢在我的很多代码中使用字节溢出来发挥我的优势（尽管我可能会在数学运算或其他东西之后立即使用模数来做到这一点），最大的问题是我不知道如何将 int 作为 8 位字符添加到稍后写入文件的 String 中。输出是我目前最大的问题。

那么，根据一些用户输入进行无符号位数学运算然后将这些位写入文件的最佳方法是什么，就好像每个位都是 ASCII 字符一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T17:56:12.850

所以，这就是它的工作原理。

您*可以*将 Java 字节视为无符号。标志产生影响的唯一地方是

*   常量：只需将它们转换为字节
*   toString 和 parseInt
*   分配
*   <, >, >=, <=

签名*无关紧要*的操作：

*   添加
*   减法
*   乘法
*   位算术（除了`>>`，只用`>>>`代替）

要将字节转换为整数形式的无符号值，只需使用`& 0xFF`，并将这些转换为字节使用`(byte)`.

或者，如果可以接受第三方库，您可能会对 Guava 的[`UnsignedBytes`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/primitives/UnsignedBytes.html)实用程序类感兴趣。（披露：我为 Guava 做出了贡献。）

# android - Eclipse 的基础设施控制

> ID：13671916
> 
> 赞同：0
> 
> 时间：2012-12-02T17:42:38.417
> 
> 标签：android, eclipse, wpf-controls, infragistics, netadvantage

我想在我在 Eclipse IDE 中创建的 android 应用程序中使用 Infragistics 控件。但我找不到将这些控件与 Eclipse 集成的方法。我已经下载了名为 NetAdvantage 的文件，来自

[http://www.infragistics.com/products/android/](http://www.infragistics.com/products/android/)

但我找不到在我的项目中使用它的方法。当我尝试安装它时，它会为 Visual Studio 安装它。谁能告诉我一些方法，因为我的应用程序是在 java 中而不是在 C# 或 VB.NET 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:03:39.767

我假设您指的是 IGUANA UI 工具集？在这种情况下，我建议选择IG 网站上的**“Iguana UI 2012 Complete Bundle”下载选项。**

IGUANA UI 实际上不需要安装 - 工具集以及文档和产品示例（包括示例源代码）都可以在下载的 zip 中找到。

请让我知道这可不可以帮你。

# javascript - 为什么我的 index == "string" 在 JS 中不起作用？

> ID：13671917
> 
> 赞同：1
> 
> 时间：2012-12-02T17:42:40.380
> 
> 标签：javascript

我对 Javascript 中的 equal 语句有疑问。看这个截图：

![在此处输入图像描述](../Images/109fcd2f812ba97c3fba17aa40a74722.png)

我正在尝试检查索引是否与“删除”相同，但这绝不是真的。如果我尝试`index === "Delete"`or也不是真的`index == "Delete"`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T17:44:33.763

`index`是一个对象，它似乎没有`toString()`方法。因此，调用`toString()`它很可能会导致`[object Object]`，这显然不是你想要的。

试试`if( index.return === "Delete")`吧。

# c# - Topshelf vs sc.exe vs Windows 服务项目类型

> ID：13671924
> 
> 赞同：9
> 
> 时间：2012-12-02T17:43:45.820
> 
> 标签：c#, windows-services, topshelf

如标题所示，我想问一下使用这些将我的代码托管在 Windows 服务上的可能性有什么区别。据我所知，这三个都允许我创建将作为服务安装的 exe。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-02T17:48:33.870

Topshelf 是我的首选，因为它可以让您获得两全其美的服务和控制台应用程序。使用 sc.exe 允许您将任何控制台应用程序作为服务执行，但 exe 本身并不作为服务进行交互。直接开发 Windows 服务让您拥有一项服务并与 Windows 进行交互，但调试或作为普通控制台应用程序运行并不容易。Topshelf 允许您充分利用作为服务运行和作为普通控制台应用程序运行的优势。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T17:48:57.867

Windows 服务是响应服务控制消息（如开始、停止、暂停、继续等）的特殊应用程序类型。

虽然确实可以使用 sc.exe 之类的东西将任何类型的进程转变为服务，但这些进程不会处理前面提到的控制消息。您通常会发现您将能够启动一个进程但不能停止它等。

我倾向于做的是将我的服务抽象出来（我认为 Topshelf 会这样做），拥有一个可以由本机 Windows 服务应用程序或控制台应用程序加载的服务库，这样我就可以两全其美（通常在安慰）。

# android - 将长值从一个意图传递到另一个意图

> ID：13671926
> 
> 赞同：0
> 
> 时间：2012-12-02T17:43:57.103
> 
> 标签：android, android-intent

我试图将一个长值从一个类的意图传递给另一个类。但不知何故，我似乎没有得到这样做的语法或方法。这将解决我 90% 的问题。将它从 MainActivity.java 中名为 intentfunction(setid) 的方法传递到 SelectOptions.java 中接收到的意图。

/---MainActivity.java---/

```
private void intentfunction(long setid)
{
     Intent intent = new Intent(this, SelectOptions.class);
     //editText = (EditText) findViewById(R.id.editText1);
     //editText = new EditText(this);
     etGWid.setText("");   //set the edit text to blank
    //String message = "TestHello";

    intent.putExtra(EXTRA_MESSAGE, setid);
    startActivity(intent);

} 
```

像上面我希望实现的东西。这是 Selectoptions.java 的接收部分

```
final Intent intent = getIntent();
    //String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);
    long getid = intent.getLongExtra(MainActivity.EXTRA_MESSAGE, defaultValue) 
```

像这样的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T18:06:23.873

您已经正确传递了您的意图，现在在接收活动中获取您可以使用捆绑包的意图，

```
Bundle extras = getIntent().getExtras(); 
if (extras != null) {
    long getid = extras.getString('KEY',default_value);
} 
```

# payment-gateway - Google Sandbox Checkout 信用卡失败测试用例

> ID：13671928
> 
> 赞同：0
> 
> 时间：2012-12-02T17:44:05.530
> 
> 标签：payment-gateway, sandbox, google-checkout

我已将 Google Checkout 集成到我的门户并使用 Server 2 Server Checkout 使用 2.0 版对沙盒进行测试。所有成功的信用卡测试案例都通过了，但是[https://developers.google.com/checkout/developer/Google_Checkout_HTML_API_Credit_Card_Test_Cases#test_case_failed_authorization](https://developers.google.com/checkout/developer/Google_Checkout_HTML_API_Credit_Card_Test_Cases#test_case_failed_authorization)中记录的信用卡测试失败案例都失败了。

例如：如果使用 AVS No Match MasterCard: 5106447623213738 如 URL 中所述，我希望 Google 服务器回复 PAYMENT_DECLINED 或授权失败，但回调成功并且卡显示为已收费。我也在盒子里试过其他信用卡，所有这些卡都显示收费。

注意：此测试在 google checkout 沙盒 (http://sandbox.google.com/checkout) 中完成，尚未上线，但想测试信用卡失败测试用例。我做了很多搜索以测试失败案例，但无法解决。有人可以告诉我该怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:17:15.260

您的示例`AVS NO MATCH`正是在做测试应该做的事情。

![AVS 不匹配](../Images/707ecfdc0a494ce4d317223eaf6f697d.png)

它向您表明 Google 将允许某些交易并**让商家为交易做出决定**（承担风险）。您还会注意到，此交易**不在**Google 的付款保证范围内（这就是商家承担风险的原因）。

Google 付款保证涵盖的交易将显示：

![由付款保证覆盖](../Images/d87de4db65d161f54b73e97a9b389a0e.png)

[您提供`AUTH DECLINE`](https://developers.google.com/checkout/developer/Google_Checkout_HTML_API_Credit_Card_Test_Cases#test_case_failed_authorization)的链接[(Failed auth)](https://developers.google.com/checkout/developer/Google_Checkout_HTML_API_Credit_Card_Test_Cases#test_case_failed_authorization)就是您要查找的内容 - 回复：Google 不会让交易通过（例如 VISA 4209、AUTH+DECLINE）：

![在此处输入图像描述](../Images/57f6b810003a7e4734363cb488122cbe.png)

# sql - 创建“存档”数据库以卸载应用程序“主”数据库

> ID：13671929
> 
> 赞同：0
> 
> 时间：2012-12-02T17:44:18.570
> 
> 标签：sql, database, database-design, web-applications

我想创建一个应该包含大量数据的 Web 应用程序。我想问一下你们中是否有人遇到过包含两个数据库的系统——主数据库和存档数据库。我想创建一种机制，将旧数据从主数据库移动到存档数据库以便卸载它。例如，当我有一个用户帐户表时，我想将超过三个月未使用的帐户移动到存档数据库中。完成此操作后，主数据库可能会显着卸载，因此我希望它能够更快地工作。然而，这种机制必须在两个方向上起作用——不仅从主数据库迁移到存档，而且从存档迁移到主数据库，以允许用户“刷新”他们的帐户。当然，在这种情况下，我将使用 GUID 而不是 BIGINT 作为主键。你怎么看待这件事？这样的概念是否正确，或者我不应该为此烦恼并假设应该只有一个数据库？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:58:21.513

Having archive database never hurts, but usually it's used for restoring or reporting. I think in most cases partitioning will serve your purpose better. Also, many RDMS systems propose different solutions out of the box, like database clustering, mirroring, etc.

# c# - C# .NET 3.5 获取通用定义

> ID：13671930
> 
> 赞同：0
> 
> 时间：2012-12-02T17:44:26.997
> 
> 标签：c#, generics, reflection

我有以下课程

```
public class AbstractJobDao<T> where T : IJob {
  protected T buildJob() {
    // create an IJob implementation instance based on the generic parameter        
  }      
}

public class FullTimeJobDao : AbstractJobDao<FullTimeJob> {      
}

public class InternshipDao : AbstractJobDao<Internship> {      
} 
```

**FullTimeJob**和**Internship**都实现了**IJob**接口。我希望 buildJob() 方法能够使用反射推断 Dao 实现类中的泛型，然后创建该类型的实例。有没有办法在 .NET 3.5 中使用反射来做到这一点？

 ****如果是这样，那么 buildJob() 方法中的代码行应该是什么样的？

编辑——我想我不清楚我的问题。我想要的是在 FullTimeJobDao 内部调用 buildJob() 来创建 FullTimeJob 的实例。当从 InternshipDao 内部调用 buildJob() 时，它应该根据类顶部定义的泛型类型创建一个 Internship 实例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T18:00:04.303

你所拥有的应该几乎可以工作，除了你不需要你的通用参数是可实例化的。如果将其添加为约束，则应该能够使用`new`：

```
public class AbstractJobDao<T> where T : IJob, new() {
  protected T buildJob() {
    return new T();
  }      
} 
```

或者，如果您有某种原因说明该约束不适用于您的情况，您可以使用[`Activator.CreateInstance`](http://msdn.microsoft.com/en-us/library/0hcyx2kd%28v=vs.90%29.aspx)：

```
public class AbstractJobDao<T> where T : IJob {
  protected T buildJob() {
    return Activator.CreateInstance<T>();
  }      
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T18:00:25.470

您必须以`AbstractJobDao`这种方式声明您的班级：

```
public class AbstractJobDao<T> where T : IJob, new() {
  protected T buildJob() {
    return new T();
  }      
} 
```

请注意`new()`after `IJob`：这样，您将指示该参数`T`：

1.  实现`IJob`的方法
2.  提供不带参数的构造函数。

因此编译器将允许您使用`new T()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T17:52:20.583

您可以创建 IJob 工厂来实现它

```
interface IJobFactory
{
  IJob Create();
}

class FullTimeJobFactory
  : IJobFactory
{
  IJob Create()
  {
    return new FullTimeJob();
  }
}

class InternshipJobFactory
  : IJobFactory
{
  IJob Create()
  {
    return new InternshipJob();
  }
} 
```

现在您可以使用抽象工厂 IJobFactory 创建抽象 IJob 的实例

```
public class AbstractJobDao<T> where T : IJob {
  public AbstractJobDao(IJobFactory<T> factory)
  {
  }

  protected IJobFactory<T> Factory{get;set;}

  protected T buildJob() {
    return Factory.Create();
  }      
}

public class FullTimeJobDao : AbstractJobDao<FullTimeJob> {

  public FullTimeJobDao()
    : base(new FullTimeJobFactory())
  {}     
}

public class InternshipDao : AbstractJobDao<Internship> {
  public InternshipDao ()
    : base(new InternshipJobFactory())
  {}

} 
```****

# c# - 如何将方法传递给 Thread 构造函数？

> ID：13671933
> 
> 赞同：0
> 
> 时间：2012-12-02T17:44:27.897
> 
> 标签：c#, multithreading

如果我编写如下所示的代码，如何将 Method2 传递给线程，如下所示，它显示错误 Error

> 'System.Threading.Thread.Thread(System.Threading.ThreadStart)' 的最佳重载方法匹配有一些无效参数

```
 class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Main Thread : ");           
            Thread obj = new Thread(Method2);
            obj.Start();                   
            Console.ReadLine();
        }       
        private static int Method2(int a)
        {
            return a;
        }
    } 
```

当我使用以下代码时，它可以工作

```
Thread obj = new Thread(() => Method2(1)); 
```

但是为什么当我传递委托对象时它不起作用

```
delegate int del(int i);

del d = Method2;

Thread obj = new Thread(d); 
```

上面 2 有什么区别，在第一种情况下，我在第二种情况下使用 Lambda 表达式直接传递委托对象还有什么别的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:50:13.927

试试这个：

```
Thread obj = new Thread(() => Method2(some_int_value)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T18:39:39.897

构造`Thread`函数接受两种类型的委托，`ThreadStart`和`ParameterizedThreadStart`. 要查看这些委托接受什么类型的方法，您可以创建它，构造函数会显示给您，例如，

```
var parameterMethod = new ParameterizedThreadStart(... 
```

如果您键入上述内容，您将看到委托接受一个以一个对象作为参数的函数并返回 void。

```
void (object) target 
```

这就是为什么采用 int 的方法将不起作用的原因，因为签名与委托目标签名不匹配。**当你把它包装在一个lambad中时，你实际上是在传递一个不带参数并返回void的方法，所以甚至没有看Method2签名**。使用像这样的 lambda 包装方法调用对于使签名匹配非常有用。

```
delegate void del(object obj);
del d = () => Method2(1);
Thread obj = new Thread(d); 
```

有无数种可能的方法签名，所以线程和任务保持简单，如果你想传递一些东西，传递一个对象。由于所有类型都派生自对象，因此您可以传入任何您想要的内容，然后再进行转换。

# visual-c++ - 将 AfxGetMainWnd 上的 C 风格系列转换从 VC6/MFC6 转换为在现代 MFC 版本（VC++2008 及更高版本）中运行

> ID：13671940
> 
> 赞同：2
> 
> 时间：2012-12-02T17:44:50.653
> 
> 标签：visual-c++, mfc, visual-c++-6

我从 Visual C++ 6.0 移植到 VC++2008 中的 MFC 版本的应用程序，对它进行了很多 get --and `AfxGetMainWnd()`-do-C-Style-casts，如下所示：

```
 CUserInterfaceDoc *m_pDoc = (CUserInterfaceDoc*)((CFrameWnd *)AfxGetMainWnd())
                            ->GetActiveDocument(); 
```

当我尝试上述步骤时，只需转换为，我发现在我的程序中`dynamic_cast<>`不再可以通过 cast-to-a- 访问主窗口。`CUserInterfaceDoc`我认为也许 MFC 在 VC++ 6 中滥用了强制转换，或者编译器做了一些魔术。

重写上面的代码以使用动态转换会像这样，它以一个 nil 指针结束，它会触发我在这里写的 assert() 条件，正如我想要的那样：

```
CUserInterfaceDoc *m_pDoc;
CWnd * mainWnd = AfxGetMainWnd();
assert(mainWnd);
CFrameWnd *frmWnd = dynamic_cast<CFrameWnd *> (mainWnd);
assert(frmWnd);
m_pDoc = dynamic_cast<CUserInterfaceDoc *> (frmWnd);
assert(m_pDoc); 
```

我假设以前做过这件事的每个人都可以说“是的，当然，他们改变了铸造行为......”但我找不到它的文档。

在可能的情况下，我将我的 C++ 类更改为具有一个成员变量（字段），我在其中存储
指向以前通过从 "或多或少 global" 走下来找到的东西的链接`AfxMainWnd()`。

它会帮助我知道发生了什么变化，所以我可以理解上面发生了什么。

`CUserInterfaceDoc`是我的应用程序的 MFC C++ 文档类，它是一个 COleServerDoc，它曾经在运行时“可找到”，顶部是粗略的 C 风格。

上面的转换仍然可以在现代 C++ 中编译，但它被破坏了，可能是因为旧的 VC++ 6 编译器使用 C 样式转换执行了某种内部“魔术”，这违反了 ISO C++ 标准。（这纯粹是我的猜测）。

我的问题分为两部分：

1.  从另一个当前没有引用主 CFrameWnd 并且一直在使用我在这个问题顶部显示的 hack 的类中获取 CurrentDocument (CFrameWnd::CurrentDocument) 的常用方法是什么？

2.  不符合 ISO 标准的 VC++ 6 和或多或少符合 ISO 标准的 C++ 版本之间发生了哪些变化，这些变化会改变上述强制转换表达式的行为，或者是否由于 MFC 内部架构更改而发生破坏？

我的代码更改：

```
CUserInterfaceDoc * CMyBrowser::GetUserInterfaceDoc()
{
    CUserInterfaceDoc *m_pDoc;
    // formerly did this, which works in VC++6 and doesn't work anymore:
    //m_pDoc = (CUserInterfaceDoc*)((CFrameWnd *)AfxGetMainWnd())->GetActiveDocument();
    assert(m_pMainFrm);
    m_pDoc = dynamic_cast<CUserInterfaceDoc *> ( m_pMainFrm->GetActiveDocument() );
    assert(m_pDoc);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T20:21:40.817

如果您使用的是 MFC，您还不如硬着头皮使用 DYNAMIC_DOWNCAST，这是一个 MFC 定义的用于投射的宏，基本上等同于 dynamic_cast。

```
CFrameWnd* pFrm = DYNAMIC_DOWNCAST(CFrameWnd, AfxGetApp()->m_pMainWnd);

m_pDoc = DYNAMIC_CAST(CUserInterfaceDoc, m_pMainFrm->GetActiveDocument()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-17T02:03:06.610

在您的第一次重写中：

```
CUserInterfaceDoc *m_pDoc;
CWnd * mainWnd = AfxGetMainWnd();
assert(mainWnd);
CFrameWnd *frmWnd = dynamic_cast<CFrameWnd *> (mainWnd);
assert(frmWnd);
m_pDoc = dynamic_cast<CUserInterfaceDoc *> (frmWnd);
assert(m_pDoc); 
```

...您只是错过了 C-Style 演员表中的 GetActiveDocument() 调用。所以它应该像这样工作：

```
CUserInterfaceDoc *m_pDoc;
CWnd * mainWnd = AfxGetMainWnd();
assert(mainWnd);
CFrameWnd *frmWnd = dynamic_cast<CFrameWnd *> (mainWnd);
assert(frmWnd);    
m_pDoc = dynamic_cast<CUserInterfaceDoc *> (frmWnd->GetActiveDocument());
assert(m_pDoc); 
```

DYNAMIC_DOWNCAST 非常老派，如果启用 RTTI（默认情况下启用），实际上不再需要。另请参阅：[MFC DYNAMIC_DOWNCAST 与 dynamic_cast](https://stackoverflow.com/questions/29030525/mfc-dynamic-downcast-vs-dynamic-cast/34549647)

# php - 在 wordpress 中创建按字母顺序分页

> ID：13671943
> 
> 赞同：0
> 
> 时间：2012-12-02T17:45:18.337
> 
> 标签：php, wordpress, pagination, alphabetical, letters

我需要在 wordpress 中显示按字母分页的名称列表。

示例....选择b时..

A **B** C D...XYZ

罗勒 | 巴斯蒂安 | 贝尔塔 | 比利 | 拜努

当我单击 A 时，我只需要以 A 开头的名称...

我[在 PasteBin 上](http://pastebin.com/78PTRea5)找到了这段代码……但它创建了完整的列表，

我需要所有字母都显示为 ABCD ..... XYZ ...... 并且只显示选择了起始字母的名称...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T04:14:04.073

也许不是最好的方法，尽管我就是这样做的。

```
<?php
/**
 * Template Name: Shop 
**/

$posts_per_row = -1;
$posts_per_page = -1;
$curr_letter = $_GET["character"];
?>

<div>

  <div class="alphanav">
     <a href="<?php bloginfo('url'); ?>/shops/?character=A">A</a>
     <a href="<?php bloginfo('url'); ?>/shops/?character=B">B</a>
     <a href="<?php bloginfo('url'); ?>/shops/?character=C">C</a>
  </div>

  <div>
     <h1><?php the_title(); ?></h1>

     <div id="a-z">

       <?php

       $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
       $args = array (
         'posts_per_page' => $posts_per_page,
         'post_type' => 'shop',
         'orderby' => 'title',
         'order' => 'ASC',
         'paged' => $paged
       );

       query_posts($args);

       if ( have_posts() ) {
         while ( have_posts() ) {
           the_post();
           $first_letter = strtoupper(substr(apply_filters('the_title',$post->post_title),0,1));
           if ($first_letter == $curr_letter) {  ?>
              <div class="title-cell"><a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title_attribute(); ?>"><?php the_title(); ?></a></div>
           <?php } ?>
         <?php } ?>
       <?php } else {
        echo "<h2>Sorry, no posts were found!</h2>";
       }
       ?>

     </div><!-- End id='a-z' -->

   </div>

 </div> 
```

# linux - 如何使用 bash 查找某个文件中的哪些行不是由另一个文件中的行开始的？

> ID：13671945
> 
> 赞同：1
> 
> 时间：2012-12-02T17:45:27.447
> 
> 标签：linux, bash, shell

我有两个文本文件，A 和 B：

A：

```
a start
b stop
c start
e start 
```

乙：

```
b
c 
```

如何使用 shell(bash...) 命令找到 A 中的哪些行不是由 B 中的行开始的。在这种情况下，我想得到这个答案：

```
a start
e start 
```

我可以使用单行命令来实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T17:58:00.667

This should do:

```
sed '/^$/d;s/^/^/' B | grep -vf - A 
```

The `sed` command will take all non-empty lines (observe the `/^$/d` command) from the file `B` and prepend a caret `^` in front of each line (so as to obtain an anchor for `grep`'s regexp), and spits all this to `stdout`. Then grep, with the `-f` option (which means take all patterns from a file, which happens to be `stdin` here, thanks to the `-` symbol) and does an invert matching (thanks to the `-v` option) on file `A`. Done.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T17:52:44.053

我认为应该这样做：

```
sed 's/^/\^/g' B > C.tmp
grep -vEf C.tmp A
rm C.tmp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T17:57:09.173

You can try using a combination of `xargs`, `cat`, and `grep`

Save the first letters of each line into FIRSTLETTERLIST. You can do this with some `cat` and `sed` work.

The idea is to take the blacklist and then match it against the interesting file.

```
cat file1.txt | xargs grep ^[^[$FIRSTLETTERLIST]] 
```

This is untested, so I won't guarantee it will work, but it should point you in the right direction.

# scala - 如何能够在Scala中以递归方式应用隐式转换

> ID：13671946
> 
> 赞同：3
> 
> 时间：2012-12-02T17:45:35.257
> 
> 标签：scala, recursion, implicits

我正在尝试编写一个转换库，用于将一些 scala 类型转换为 HTML 表示。`List(1,2).toHtml`比如说，我想`<ul><li>1</li><li>2</li></ul>`以`String`.
到目前为止，我已经编写了一组隐式转换，它们在检测结果类型和应用正确的`toHtml`.

让我展示一个示例：

```
object Conversions {

  implicit def fromIterable[A](l : Iterable[A]) = new Object {
       def toHtml = <ul> { l.map{ e => <li>{ e }</li> } } </ul> toString
  }
}
import Conversions._ 
```

使用此代码，每当我询问编译器时，`List(1,2).toHtml`我都会得到正确的转换。就像任何其他`Iterable`val 一样。

我的问题和问题是我如何递归地使用这个 toHtml 转换？因为如果我键入`List( List(1,2), List(3,4) ).toHtml`我想要得到`<ul> <li><ul><li>1</li><li>2</li></ul></li> <li><ul><li>3</li><li>4</li></ul></li> </ul>`的，`toHtml`转换会递归地应用于输入的每个元素`Iterable`。

我试图将`toHtml`定义更改为`def toHtml = <ul> { l.map{ e => <li>{ e.toHtml }</li> } } </ul> toString`不起作用，因为编译器告诉我`value toHtml is not a member of type parameter A`这是完全合理的。
我知道我的问题可能在于`new Object { ... }`我从`fromIterable[A]`隐式定义返回，这可能应该返回一个具有特征或其他东西的类。
我已经尝试阅读很多关于隐式的内容，但我还没有弄清楚能够递归地应用这种`toHtml`转换，而无需取消参数化 fromIterable 签名并定义几个特定情况，例如`fromIterable(l : List[List[Any]])`或类似的东西......

你们能否请我给我一些关于如何实现它的建议以及我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T19:58:15.753

[您可以使用类型类](http://en.wikipedia.org/wiki/Type_class)以优雅且类型安全的方式解决此类问题：

```
// Evidence that we can turn an A into some XML:
trait Markup[-A] { def toHtml(a: A): xml.Node }

def baseMarkup[A] = new Markup[A] { def toHtml(a: A) = xml.Text(a.toString) }

implicit def markup[A](implicit m: Markup[A] = baseMarkup[A]) =
  new Markup[Iterable[A]] {
    def toHtml(c: Iterable[A]) = <ul>
      { c.map(child => <li>{ m.toHtml(child) }</li>) }
    </ul>
  }

implicit def fromMarkup[A](a: A)(implicit m: Markup[A]) = new {
  def toHtml = m toHtml a
} 
```

这适用于任意深度的嵌套列表：

```
val messy = List(List(List("a")), List(List("b", "c"), List("c")))

val printer = new xml.PrettyPrinter(80, 2) 
```

接着：

```
scala> printer format messy.toHtml
res1: String = 
<ul>
  <li>
    <ul>
      <li>
        <ul>
          <li>a</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <ul>
      <li>
        <ul>
          <li>b</li>
          <li>c</li>
        </ul>
      </li>
      <li>
        <ul>
          <li>c</li>
        </ul>
      </li>
    </ul>
  </li>
</ul> 
```

有关上述方法的更详细说明，[请](https://stackoverflow.com/a/12648663/334519)参见我的答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T18:58:15.403

让我们首先看看我们如何在没有整个隐式/对象和转换的情况下做到这一点。我也删除了，`toString`但随时可以随叫随到。

```
def toHtml[A](l:Iterable[A]):scala.xml.Elem  = 
  <ul> {l.map( _ match{ 
    case e:Iterable[_] => <li>{toHtml(e)}</li> 
    case e => <li>{e}</li>
  })}</ul>

// Exiting paste mode, now interpreting.

toHtml: [A](l: Iterable[A])scala.xml.Elem
scala> toHtml(List(List(1,2), List(3,4)))
res17: scala.xml.Elem = <ul> <li><ul> <li>1</li><li>2</li></ul></li><li><ul> <li>3</li><li>4</li></ul></li></ul> 
```

现在让我们重新包装所有内容以回答您的问题：

```
object Conversions {
  implicit def fromIterable[A](l : Iterable[A]):Object{def toHtml:xml.Elem} = new Object {
    def toHtml:xml.Elem  = 
      <ul>{l.map( _ match{ 
        case e:Iterable[_] => <li>{e.toHtml}</li> 
        case e => <li>{e}</li>
      })}</ul>
  }
}
import Conversions._ 
```

这给出了预期的结果：

```
scala> List(List(1,2), List(3,4)).toHtml
res3: scala.xml.Elem = <ul><li><ul><li>1</li><li>2</li></ul></li><li><ul><li>3</li><li>4</li></ul></li></ul> 
```

几点说明：

*   其次，我必须给出“fromIterable”方法的返回类型。我确信存在更好的解决方案，但我对隐式转换没有经验。
*   最后，如果有人有建议，我很乐意编辑我的答案。（或随意编辑）

# ruby - 无法在 Ubuntu 12.10 (AMD64) 上安装 gem "pg"

> ID：13671947
> 
> 赞同：3
> 
> 时间：2012-12-02T17:45:43.010
> 
> 标签：ruby, postgresql, ubuntu, 64-bit

我一直（未成功）尝试在我的 ruby​​ 1.9.3-p286 上安装“pg”gem，但似乎没有任何效果。

我已经安装了 postgresql (9.1)、libpq-dev 和一些其他的，比如 postgresql-server-dev-9.1。我试图将“with-pg-config”标志传递给 gem 安装，但似乎没有任何效果。

每次我尝试安装 gem 时，它都会输出如下内容：

```
Building native extensions.  This could take a while...
ERROR:  Error installing pg:
    ERROR: Failed to build gem native extension.

        /home/lynux/.rvm/rubies/ruby-1.9.3-p286/bin/ruby extconf.rb
checking for pg_config... yes
Using config values from /usr/bin/pg_config
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for pg_config_manual.h... yes
checking for PQconnectdb() in -lpq... no
checking for PQconnectdb() in -llibpq... no
checking for PQconnectdb() in -lms/libpq... no
Can't find the PostgreSQL client library (libpq)
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/home/lynux/.rvm/rubies/ruby-1.9.3-p286/bin/ruby
    --with-pg
    --without-pg
    --with-pg-dir
    --without-pg-dir
    --with-pg-include
    --without-pg-include=${pg-dir}/include
    --with-pg-lib
    --without-pg-lib=${pg-dir}/lib
    --with-pg-config
    --without-pg-config
    --with-pg_config
    --without-pg_config
    --with-pqlib
    --without-pqlib
    --with-libpqlib
    --without-libpqlib
    --with-ms/libpqlib
    --without-ms/libpqlib

Gem files will remain installed in /home/lynux/.rvm/gems/ruby-1.9.3-p286@phisiodata/gems/pg-0.14.1 for inspection.
Results logged to /home/lynux/.rvm/gems/ruby-1.9.3-p286@phisiodata/gems/pg-0.14.1/ext/gem_make.out 
```

我究竟做错了什么？在尝试安装 gem 之前我还应该做些什么吗？

先感谢您。

[编辑]

好的，所以 joelparkerhenderson 的回答让我认为路径和库可能有问题，然后继续深入挖掘......

我找到[了这个](https://stackoverflow.com/questions/8814924/gem-install-pg-can-not-bind-to-libpq/8874260#8874260)很棒的帖子，它解决了！基本上问题在于RVM。所以，我的问题已经解决了，对于任何可能遭受同样问题的人，请点击链接！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:09:52.953

您的错误看起来像您丢失了`libpq-dev`

您要先在系统上安装 Postgres 吗？

尝试这个：

```
sudo apt-get install postgresql postgresql-client postgresql-server-dev-all libpq-dev 
```

接下来，你能以 root 身份安装 pg gem 吗？

```
sudo su - root
gem install pg 
```

# java - 编译失败

> ID：13671951
> 
> 赞同：2
> 
> 时间：2012-12-02T17:46:06.730
> 
> 标签：java, interface, compiler-errors

这是一段 Java 代码：

```
interface Rideable {
    String getGait();
}

public class Camel implements Rideable {
    int x = 2;
    public static void main(String[] args) {
        new Camel().go(8);
    }

    void go(int speed) {
        System.out.println((++speed * x++) + this.getGait());
    }

    String getGait() {
        return " mph, lope";
    }
} 
```

事实证明，编译失败（根据 Oracle），但在我看来，它应该可以正常运行并产生输出。那么，编译失败的罪魁祸首在哪里呢？干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T17:49:20.033

You can't reduce the visibility of methods you override (interface methods are `public` by default), try this instead:

```
public String getGait() {
    return " mph, lope";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T17:49:24.273

You have defined `getGait` with default access but interface definitions are require their implementations to be `public`.

```
public String getGait() { 
```

# c++ - 需要比较字符串的某些元素

> ID：13671952
> 
> 赞同：1
> 
> 时间：2012-12-02T17:46:09.040
> 
> 标签：c++, string, inheritance

一直在研究这个程序，该程序需要使用一个函数来比较用户输入的字符串，并让用户有机会将他/她不知道的字符留在输入之外，用 * 替换它们。输入表示具有 6 个字符（例如 ABC123）的汽车牌照，并且允许用户省略这些字符中的任何一个（例如 AB** 23 或 ** C12* 等）。因此，该函数需要返回与正确位置的字符匹配的所有对象，但如果 A 在正确的位置但任何其他字符都不在，则它不能返回。但是，例如，只允许用户输入 A* * * * *，并且该函数应返回所有在第一个位置有 A 的对象。我所做的是使用一个函数从输入字符串中删除所有星号，

```
 string removeAsterisk(string &rStr)// Function to remove asterisks from the string, if any.
    {
        stringstream strStream;
        string delimiters = "*";
        size_t current;
        size_t next = -1;
        do
    {
         current = next + 1;
         next = rStr.find_first_of( delimiters, current );
         strStream << rStr.substr( current, next - current ) << " ";
}
while (next != string::npos);

return strStream.str(); 
```

}

```
 int main()
    {
            string newLicensePlateIn;
            newLicensePlateIn = removeAsterisk(licensePlateIn);
            string buf; // Have a buffer string
            stringstream ss(newLicensePlateIn); // Insert the string into a stream

            vector<string> tokens; // Create vector to hold our words

            while (ss >> buf)
                tokens.push_back(buf);
            myRegister.showAllLicense(tokens); 
    } 
```

接收向量的类函数目前看起来像这样：

```
 void VehicleRegister::showAllLicense(vector<string>& tokens)//NOT FUNCTIONAL
    {
        cout << "\nShowing all matching vehicles: " << endl;
        for (int i = 0; i < nrOfVehicles; i++)
        {

            if(tokens[i].compare(vehicles[i]->getLicensePlate()) == 0)
            {
                cout << vehicles[i]->toString() << endl;
            }
        }
    } 
```

如果有人了解我正在尝试做什么并且可能有一些想法，请随时回复，我将不胜感激。感谢您阅读本文/A。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:53:04.730

只需遍历字符，一次比较一个。如果任一字符是星号，则认为匹配，否则比较它们是否相等。例如：

```
bool LicensePlateMatch(std::string const & lhs, std::string const & rhs)
{
    assert(lhs.size() == 6);
    assert(rhs.size() == 6);
    for (int i=0; i<6; ++i)
    {
        if (lhs[i] == '*' || rhs[i] == '*')
            continue;
        if (lhs[i] != rhs[i])
            return false;
    }
    return true;
} 
```

实际上，您不必将其限制为 6 个字符。您可能需要考虑梳妆台。在这种情况下，只需确保两个字符串具有相同的长度，然后遍历所有字符位置，而不是在那里硬编码 6。

# ruby-on-rails-3.2 - 在康康检查能力

> ID：13671954
> 
> 赞同：0
> 
> 时间：2012-12-02T17:46:19.707
> 
> 标签：ruby-on-rails-3.2, authorization, cancan

我是一个相对新手，我正试图让 cancan 在一个简单的项目中工作。我已经关注 Railscast 并阅读了文档，但我遗漏了一些东西。

我有两个问题。

1.  我为普通用户正确隐藏了编辑/创建链接。但是，它们也对管理员用户隐藏。
2.  如果我注释掉隐藏上述链接的代码，当管理员用户单击它们时，他们会收到一条访问被拒绝消息，该消息应该显示给非管理员用户

所以我认为我的问题是应用程序没有正确检查能力。我已经检查了数据库，并且角色列正确地填充了该用户的“管理员”。

这是我的用户模型：

```
class User < ActiveRecord::Base
  has_secure_password

  #this is for authentication
  attr_accessible :email, :password, :password_confirmation, :role
  validates_uniqueness_of :email
  #end of authentication

 end 
```

在我的 Instructors 控制器中，我在顶部添加了“load_and_authorize_resource”。

我的 Ability.rb 文件看起来像这样

```
class Ability
  include CanCan::Ability

  def initialize(user)
    # Define abilities for the passed in user here. For example:
    #
      user ||= User.new # guest user (not logged in)
      if user.admin?
        can :manage, :all
      else
        can :read, :all
      end
  end
end 
```

我根据角色隐藏控件的视图我有以下代码：

```
 <% if can? :manage, Instructor %>
<td><%= link_to 'Edit', edit_instructor_path(instructor) %></td>
<td><%= link_to 'Destroy', instructor, method: :delete, data: { confirm: 'Are you sure?' } %></td>
    <% end %> 
```

非常感谢所有帮助。

谢谢

斯科特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:00:39.640

我变了：

```
if user.admin? 
```

至

```
if user.id 
```

而且效果很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T23:51:58.513

而不是这个

```
<% if can? :manage, Instructor %> 
```

尝试这个

```
<% if user.has_role? :admin %> 
```

（假设在您的应用程序中，管理员管理/拥有比教师更多的权限。）

# php - 使用 PHP 获取值的简单 mod 重写

> ID：13671955
> 
> 赞同：0
> 
> 时间：2012-12-02T17:46:45.683
> 
> 标签：php, apache, mod-rewrite

有人可以告诉我我做错了什么吗？

试图采取：

```
search.php?key=23&category=testing 
```

和做：

```
/23/testing.html 
```

有了这个：

```
RewriteRule ^([^/]*)/([^/]*)\.html$ /?key=$1&category=$2 [L] 
```

对于我的生活，我无法弄清楚......或者如果有更好的方法，请指出我正确的方向。

** 更新

好的，在放弃这个之后，我终于联系了托管公司，看看我的域是否有问题导致它无法正常工作。这是他们告诉我的：

> 1.  你没有重写条件，你只有一个简单的重写。为了使代码始终正常工作，您通常应该使用有效模式设置“RewriteCond”。
>     
>     
> 2.  你用过“？” 您的代码中的问号字符虽然这是一个转义 > 字符，但这样做只会导致基于您的代码重写 index.php 作为 >everything 在问号被转义后。
>     
>     
> 
> 请考虑在您的代码中使用“RewriteCond”，并使用正则表达式正确转义>“？” 性格和避免意外的行为。

谁能给我一些帮助？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:23:03.503

```
RewriteRule ^/([^/]*)/([^/]*)\.html$ /?key=$1&category=$2 [L,R] 
```

# html - CSS固定页脚宽图像中心调整大小

> ID：13671957
> 
> 赞同：1
> 
> 时间：2012-12-02T17:46:54.140
> 
> 标签：html, css, image, center, footer

我有一个想要用作固定页脚的宽幅图像。主页为 960px 并居中，页脚为 1620px。如果浏览器窗口的宽度大于 960 像素，则它会显示越来越多的页脚图像而不显示滚动条。

我怎样才能做到这一点？到目前为止，我有这个，但它是错误的：

CSS

```
* {
  margin: 0;
}

html, body {
  height: 100%;
}

div#wrapper {
  position: relative;
  width: 100%;
  min-height: 100%;
  height: auto !important;
  height: 100%;
  margin: 0 auto -340px;
  text-align: center;
}

div#body-container {
  width: 960px;
  margin-left: auto;
  margin-right: auto;
}

.footer, .push {
  width: 1620px;
  height: 340px;
} 
```

HTML

```
<div id="wrapper">
  <div id="body-container"> <!-- width: 960px -->
    <!-- content -->
  </div>

  <!-- fixed footer -->
  <div class="push"></div>
  <div class="footer"><img src="img/footer.png"></div> <!-- width: 1620px -->
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:41:49.760

```
.footer {
width:100%;
height:345px;
display: block;
background:url(/img/footer.png) no-repeat center top;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T18:09:56.863

You can solve this by updating the width of your `footer` to `100%` and adding the property `overflow: hidden` which will remove the scrollbars if the content inside (the image) is larger than the width of the footer.

It gets a little more complicated however if what you're trying to do is also center the image. For this you'll need to add `relative` positioning to the `.footer` and `absolute` positioning to the `img`. You'll also need to add `left: 50%` and `margin-left: -810px` (half of your image width) to the img.

Here is the final updated portions of the code:

```
.footer, .push {
    width: 100%; /* changed from 1620px;*/
    height: 340px;
    overflow: hidden;
    position: relative;
}

.footer img {
    width: 1620px;
    height: 340px;
    left: 50%;
    margin-left: -810px;
    position: absolute;
} 
```

And here is a jsfiddle to demonstrate: [http://jsfiddle.net/uf8Lh/](http://jsfiddle.net/uf8Lh/)

# c - 以深度优先顺序递归遍历一般树

> ID：13671959
> 
> 赞同：1
> 
> 时间：2012-12-02T17:47:14.237
> 
> 标签：c, recursion, tree, binary-tree, depth-first-search

我被要求实现一个递归函数来遍历一般树（第一个孩子，下一个兄弟符号）和深度优先顺序的二叉树。

该函数应在上次访问该节点时打印该节点。例如，对于下面的树，节点应按以下顺序打印。我想我已经完成了二叉树的功能，但我不能做一般的功能：

这是我的二叉树代码：

```
void PostOrder(node* root) {
    if (root == NULL)
        return;
    else { 
          PostOrder(root->left); 
          PostOrder(root->right);
          printf(‘%c’, root->key); 
    } 
} 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:14:51.483

这听起来像是一个典型的“用二叉树表示的通用树”，有两个指针：第一个孩子和下一个兄弟。我们可以把这棵树画成一棵标准的二叉树，每个孩子都有一个向下的箭头和一个向右的箭头。

我认为您评论中描述的树如下所示：

```
a
|
V
b ------------> c
|               |
V               V
d --> e --> f   g
                |
                V
                h --> i 
```

您希望在树的每个节点处：

1.  通过处理第一个孩子（按照向下箭头）首先打印所有后代。
2.  然后打印节点的值
3.  然后处理兄弟姐妹（按照右箭头）。

将其应用于上面的树，我们得到：

```
GeneralTreePostOrder(a) ->
    GeneralTreePostOrder(b) ->   # Follow child pointer
        GeneralTreePostOrder(d) ->   # Follow child pointer
            # No children
            print d
            GeneralTreePostOrder(e) ->   # Follow sibling pointer
                 # No children
                 print e
                 GeneralTreePostOrder(f) ->   # Follow sibling pointer
                     # No children
                     print f
                     # No more siblings
        print b
        GeneralTreePostOrder(c) ->   # Follow sibling pointer 
```

等等，打印`d e f h i g c a`.

为通用树编写一个新函数（注意`printf`应该使用双引号格式字符串）：

```
void GeneralTreePostOrder (node* root) {
    if (root == NULL)
        return;
    else {
         GeneralTreePostOrder (root->left); // Process children
         printf ("%c", root->key); 
         GeneralTreePostOrder (root->right); // Process siblings
    } 
} 
```

# jquery - jQuery选择到指定字符串的范围

> ID：13671962
> 
> 赞同：2
> 
> 时间：2012-12-02T17:47:27.917
> 
> 标签：jquery

我正在尝试计算 yes 的数量，直到由 :contains(certain sring) 指定的特定跨度。我基本上只是想搜索这组问题的前半部分，看看有多少是的。这是我尝试过的代码：

```
<div class="ce-modal-container">
    <div class="ce-cf-container">
      <span class="ce-cf-html-label">Have you chosen your exit path and/or successor?:</span>
      <span class="ce-cf-html-field"> Yes</span>
    </div>
    <div class="ce-cf-container">
      <span class="ce-cf-html-label">Have you chosen your exit path and/or successor?:</span>
      <span class="ce-cf-html-field"> No</span>
    </div>
    <div class="ce-cf-container">
      <span class="ce-cf-html-label">Have you done well this quarter?:</span>
      <span class="ce-cf-html-field"> No</span>
    </div>
    <div class="ce-cf-container">
      <span class="ce-cf-html-label">Have you chosen your exit path and/or successor?:</span>
      <span class="ce-cf-html-field"> Yes</span>
    </div>
    <div class="ce-cf-container">
      <span class="ce-cf-html-label">Have you chosen your exit path and/or successor?:</span>
      <span class="ce-cf-html-field"> Yes</span>
    </div>
</div>

<script>
var spanYes = $("span.ce-cf-html-field:contains('Yes')"),
    secondHalf = $("span.ce-cf-html-label:contains('done well')"),
    searchtxtall = spanYes.length;
    searchFirstHalf = $(".ce-cf-container").nextUntil(secondHalf).spanYes.length;
console.log(searchtxtall); //should return 3
console.log(searchFirstHalf); //should return 1
</script> 
```

在此先感谢我知道这是很多代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:56:21.700

一些东西：

*   你拼错了“容器”
*   为什么`.nextUntil().spanYes`呢？没有意义/`.spanYes`什么都不做
*   `.nextUntil`与兄弟姐妹一起工作，但`.ce-cf-container`它是容器。尝试：

    `$(".ce-cf-container span").nextUntil(secondHalf).is(spanYes);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T18:58:13.093

感谢您的帮助，但这是我找到的解决方案。

```
var $secondHalf = $(".ce-modal-container .ce-cf-container:lt(2)"),
    $searchFirstHalf = $secondHalf.find($spanYes).length; 
```

如果你想知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T19:00:37.640

另一个不太花哨的解决方案：

```
var count = 0;
$(".ce-cf-container").each(function () {
   if ($(".ce-cf-html-label:contains(done well)", this).length) {
      //break out of loop
      return false;
   }
   if ($(".ce-cf-html-field:contains(Yes)", this)).length) {
      count++;
   }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T19:06:31.693

我可能会放弃更多，而不是依赖 jQuery 选择器。例如：http: [//jsfiddle.net/hRVQK/](http://jsfiddle.net/hRVQK/)

```
$(document).ready(function() {
    var answers = [];
    $('.ce-cf-html-field').each(function () {
        answers.push($(this).text().indexOf('Yes') != -1);
    });
    var half = Math.round(answers.length/2);
    var answersFirstHalf = answers.slice(0, half);

    var countFirstHalf = 0;
    $(answers.slice(0, half)).each(function () {
        if (this == true)
            countFirstHalf++;
    });

    var count = 0;
    $(answers).each(function() {
        if (this == true)
            count++;
    });

    console.log('count', count, 'count first half', countFirstHalf);
}); 
```

​</p>

# c# - 为 xml 转换图形 api

> ID：13671964
> 
> 赞同：2
> 
> 时间：2012-12-02T17:48:06.163
> 
> 标签：c#, xml, facebook, facebook-graph-api, json.net

我在转换一串 json facebook graph api 时遇到问题，我使用了 facebook C# 和 json.Net。

但是在转换时它返回此错误：**名称不能以'0'字符开头，十六进制值0x30。**

这是代码：

```
dynamic result = await _fb.GetTaskAsync ("me / feed");
FBxml JsonConvert.DeserializeXNode string = (result.ToString ()). ToString (); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:12:03.583

如下所述，部分 json 字符串似乎存在问题（取自您的链接[http://jsfiddle.net/btripoloni/PaLC2/](http://jsfiddle.net/btripoloni/PaLC2/)）

```
"story_tags": {
            "0": [{
                "id": "100000866891334",
                "name": "Bruno Tripoloni",
                "offset": 0,
                "length": 15,
                "type": "user"}]
        }, 
```

Json 无法创建以“0”等数值开头的类。尝试使用链接[http://json2csharp.com/](http://json2csharp.com/)创建类，你会明白的。

要解决此问题，您可以创建一个动态对象并遍历每个属性，或者创建一个`JsonConverter`并在其中编写代码`ReadJson`以将“0”转换为有意义的名称。可能这可以帮助你[http://blog.maskalik.com/asp-net/json-net-implement-custom-serialization](http://blog.maskalik.com/asp-net/json-net-implement-custom-serialization)

如果这不是您的问题，则使用更多信息更新问题，例如 FBxml 的类结构、异常的调用堆栈（从哪一行 json 代码引发异常）、Json 版本等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T20:14:31.630

正如 keyr 所说，问题在于那些具有数字名称的 JSON 属性。在 XML 中，名称可以包含数字字符，但不能以一个开头：[XML](http://en.wikipedia.org/wiki/XML)（请参阅*格式正确和错误处理*部分）。

我的想法是用 JSON.Net 递归解析 JSON，替换具有数字名称的属性：

```
var jsonObject = JObject.Parse(json);

foreach (var obj in jsonObject)
{
    Process(obj.Value);
}

XDocument document = JsonConvert.DeserializeXNode(jsonObject.ToString());

....

private static void Process(JToken jToken)
{
    if (jToken.Type == JTokenType.Property)
    {
        JProperty property = jToken as JProperty;
        int value;

        if (int.TryParse(property.Name, out value))
        {
            JToken token = new JProperty("_" + property.Name, property.Value);
            jToken.Replace(token);
        }
    }

    if (jToken.HasValues)
    {
        //foreach won't work here as the call to jToken.Replace(token) above
        //results in the collection modifed error.
        for(int i = 0; i < jToken.Values().Count(); i++)
        {
            JToken obj = jToken.Values().ElementAt(i);
            Process(obj);
        }
    }
} 
```

这似乎运作良好，在数字名称前加上`_`. 在这一行：

```
XDocument document = JsonConvert.DeserializeXNode(jsonObject.ToString()); 
```

它因错误而崩溃，指出已创建无效/格式不正确的 XML。我没有实际的错误，但您可以运行上面的代码来复制它。

我认为从这里开始，您可能需要重新考虑将 JSON 转换为 XML。这是一个特定的要求吗？

# symfony - Symfony2 路由重复模式

> ID：13671965
> 
> 赞同：0
> 
> 时间：2012-12-02T17:48:14.003
> 
> 标签：symfony, routing

我有一个可以接受任意数量参数但顺序不完全相同的 URL。例如

```
example.com/myapp/service1/username1/service2/username2 
```

或者

```
example.com/myapp/service2/username2/service1/username1 
```

或者

```
example.com/myapp/service7/username7 
```

我如何编写一个 rounting yml 条目来捕获任何这些路由，以便我可以将它们拆分为服务/用户名，`array("service" => "Instagram", "username" => "JoBloggs")`或者有多少个被传递到 URL。

我可以访问大约 30 项服务的预制列表，但用户名几乎可以是任何值。

我什至不确定如何问这个问题，所以我会提供任何有用的额外信息。

理想情况下，我想避免类似`example.com/myapp/?service1=username1&...`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:01:35.310

[似乎我可以在参数中的 URL Slash](http://symfony.com/doc/2.0/cookbook/routing/slash_in_parameter.html)末尾添加模拟捕获全部

```
route_name:
    pattern: /myapp/{services}
    defaults: { _controller: bundle.controller.homepage:index }
    requirements:
        services: ".+" 
```

# css - 如何在服务器上自动将LESS编译成CSS？

> ID：13671969
> 
> 赞同：10
> 
> 时间：2012-11-28T16:45:01.717
> 
> 标签：css, linux, events, less, iowait

我的朋友设计师正在手动编译他的 LESS 文件并使用 Coda（远程站点）上传它，花费了大量宝贵的时间。他问我：

是否可以自动检测 Linux 服务器上的文件更改并毫不延迟地进行编译？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-28T16:45:01.717

我制作了一个脚本并发布了详细信息：

*   易于设计师使用
*   文件保存后立即执行 LESS 编译器，不消耗服务器资源
*   任何能够远程编辑的编辑器都可以使用此解决方案 - Code、Sublime Text、Textmate

* * *

首先，您需要通过在控制台中输入以下内容在服务器上安装“npm”：

```
sudo apt-get install npm inotify-tools
sudo npm install -g less
sudo nano /usr/local/bin/lesscwatch 
```

将以下内容粘贴到文件中：

```
#!/bin/bash
# Detect changes in .less file and automatically compile into .css
[ "$2" ] || { echo "Specify both .less and .css files"; exit 1; }
inotifywait . -m -e close_write | while read x op f; do.
    if [ "$f" == "$1" ]; then.
        lessc $f > $2 && echo "`date`: COMPILED";.
    fi
done 
```

保存，退出，然后执行：

```
sudo chmod +x /usr/local/bin/lesscwatch 
```

你们都完成了。下次您需要使用 LESS 文件时，您需要打开终端（Coda 内置），转到文件的文件夹（使用 cd）并执行以下命令：

```
lesscwatch main.less main.css 
```

它将输出有关成功编译或错误的信息。享受。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T18:11:10.923

我已经修改了@romaninsh 的解决方案，以便在更改目录中的任何 Less 文件时重新编译。我还在编译 Less 文件之前添加了一个 echo 语句，以提供一些验证，以在编译需要几秒钟的情况下检测到更改。

/usr/local/bin/lesscwatch：

```
#!/bin/bash                                                                     
# Detect changes in .less file and automatically compile into .css                 
[ "$2" ] || { echo "Specify both .less and .css files"; exit 1; }                  
inotifywait . -m -e close_write | while read x op f; do                            
    if [[ "$f" == *".less" ]]; then                                                
        echo "Change detected. Recompiling...";                                    
        lessc $1 > $2 && echo "`date`: COMPILED";                                                                                                                           
    fi                                                                             
done 
```

这更接近地模仿了我习惯的 Mac 版 Less.app 的行为。

使用 Less 进行开发时，我通常在项目的 /style 目录中有一堆文件，并使用覆盖将所有内容编译成单个 .css 文件。

使用示例：

base.less：

```
@import "overrides.less";
@import "variables.less";

body {
   ...
} 
```

用法同上

```
lesscwatch base.less base.css 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-28T20:03:31.413

我想要 bash 脚本，但我在使用 sublime 和 ubuntu 12.10 时遇到了一些麻烦。好吧，这些脚本和[Ian_Marcinkowski](https://stackoverflow.com/users/862708/ian-marcinkowski)做的一样，但我确信它在第一次事件后继续工作，并监视所有文件（以某种方式崇高文本，使用 tmp 文件，并且不要更改原始文件 - ！？！）。

```
#!/bin/bash
# Detect changes in .less file and automatically compile into .css
[ "$2" ] || { echo "Specify both .less and .css files"; exit 1; }
inotifywait -m -e close_write . | while read x op f; do
    echo $f
    echo "Change detected. Recompiling...";
    lessc $2 > $3 && echo "`date`: COMPILED";
done 
```

像这样调用脚本：

```
./monitor.sh  </path/to/dir>  <main.less> <main.css> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-02T23:24:33.290

这对我有用：

1.  安装：
    `sudo apt install node-lessenter`

2.这是如何使用它。
`lessc style.less style.css`

# javascript - 文件 API、网络工作者和 Chrome/Chromium

> ID：13671972
> 
> 赞同：3
> 
> 时间：2012-12-02T17:48:49.923
> 
> 标签：javascript, html, google-chrome, web-worker, fileapi

以下最小的 HTML 文件会导致浏览器控制台出错。`File`从 Chrome 中的网络工作者访问时未定义。

我对此感到有些困惑：它在 Firefox 上运行得非常好，我希望 Chrome 在开发版本中已经解决了这个问题（问题似乎出现在 Chrome 22、23 和 24 中）。

我是否遗漏了什么，或者是否有一种解决方法可以让它与 Chrome（甚至可能是其他浏览器）一起使用？

```
<html>
<body>
<script type="text/javascript">
// File seems to be defined
var slice = File.prototype.webkitSlice;

window.URL = window.URL || window.webkitURL;
// File is not defined when creating the worker below
var blob = new Blob(["var slice = File.prototype.webkitSlice;"]);
var blobURL = window.URL.createObjectURL(blob);

// Getting:
// Uncaught TypeError: Cannot read property 'prototype' of undefined 
var worker = new Worker(blobURL);
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T06:13:02.620

如果您更改`File`为`Blob`，则您的脚本有效。`File`继承自`Blob`。

```
var blob = new Blob(["var slice = Blob.prototype.webkitSlice;"]); 
```

对于以下任何人：[crbug.com/147503](http://crbug.com/147503)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:50:22.153

`WebkitSlice`在 chrome 最新版本中已弃用，因此请使用`slice`它来代替。并使用它

正如埃比德尔所说

```
var blob = new Blob(["var slice = Blob.prototype.slice;"]); 
```

# php - 按 MySQL 日期字段分组

> ID：13671976
> 
> 赞同：0
> 
> 时间：2012-12-02T17:49:06.577
> 
> 标签：php, mysql, datetime, group-by, grouping

> **可能重复：**
> [在 PHP/MySQL 中按天分组列出日记事件](https://stackoverflow.com/questions/13040695/listing-diary-events-grouped-by-days-in-php-mysql)

我有一个数据库，其中包含我所在城镇的现场乐队演出，每场演出都作为记录存储在我的 MySQL 数据库中。

我想按天分组以查看我网站上的演出。但是 GROUP BY 函数只会显示 1 条记录。如何显示一个日期内的所有演出？

我的 MySQL 结构..

```
ID  date                    content
1   2012-12-02 00:00:00     Gig 1
2   2012-12-02 00:00:00     Gig 2
1   2012-12-03 00:00:00     Gig 1
2   2012-12-03 00:00:00     Gig 2 
```

我想这样表现出来..

```
-- Sun 02 December 2012 --
Gig 1
Gig 2

-- Mon 03 December 2012 --
Gig 1
Gig 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:57:17.343

试试这个

```
 SELECT  * 
   FROM    your_table
   WHERE  date = '".$your_variable_of_selectedDate."'
   GROUP BY date
   ORDER BY date 
```

编辑：如果你没有日期变量，那么只需给出一个具体的日期

```
 SELECT  date , content 
   FROM    your_table

   GROUP BY date
   ORDER BY date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T18:18:06.870

不要在数据库层中对结果进行分组，而是在表示层中进行。例如，使用 PDO：

```
$dbh = new PDO("mysql:dbname=$dbname", $username, $password);

$qry = $dbh->query('
  SELECT   UNIX_TIMESTAMP(date), content
  FROM     gigs
  WHERE    date > NOW()
  ORDER BY date
');

if ($qry->execute()) {

  // output headers
  echo '<h1>Upcoming gigs</h1>';

  $row = $qry->fetch();
  while ($row) {
    $current_date = $row['date'];

    // output $current_date initialisation
    echo '<h2>', date('D d F Y', $current_date), '</h2><ul>';

    do {
      // output $row details
      echo '<li>', htmlentities($row['content']), '</li>';
    } while ($row = $qry->fetch() and $row['date'] == $current_date);

    // output $current_date termination
    echo '</ul>';
  }

  // output footers

} 
```

# mysql - 当某些应该有一个空字段时，在 MySQL 中查找具有空字段的重复项

> ID：13671977
> 
> 赞同：0
> 
> 时间：2012-12-02T17:49:06.360
> 
> 标签：mysql

在这里需要 MySQL 专家的帮助。我有一个糟糕的数据库可以使用，我正在尝试稍微修复一下结构，但这让我感到困惑。该表最初有一个 id、name 和 4 个卖列。我将其转换为 id、name 和单个销售列，基本上是一个数据透视表。很好，下一个问题是消除重复项，因为并非每个条目都有 4 个出售条目。

所以在第一次手术之后，我得到了这样的结果：

```
id     name     sellid
1      bob      111
1      bob      
1      bob      
2      mary     112
2      mary     113
2      mary     114
2      mary     115
3      fred
3      fred
3      fred
3      fred 
```

所以通过 group by 我设法让它看起来像这样：

```
id     name     sellid
1      bob      111
1      bob      
2      mary     112
2      mary     113
2      mary     114
2      mary     115
3      fred 
```

现在这是我碰壁的地方。Fred 很好，他应该有一个 entry 但没有 sellid，Mary 也很好，她的 4 个 sellid 都满了。鲍勃是个问题。如何在不影响 Fred 的情况下为他移除空的 sellid？

我会说我尝试过的，但我在这里完全不知所措，所以我真的还没有尝试过任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:59:44.817

您正在寻找您的姓名和其他数据之间的[外部连接：](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

```
SELECT * FROM
  (SELECT DISTINCT id, name FROM my_table) t1 NATURAL LEFT JOIN
  (SELECT * FROM my_table WHERE sellid IS NOT NULL) t2 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/f0496/1/0)上查看。

但实际上，您应该进一步[规范化](http://en.wikipedia.org/wiki/Database_normalization)您的模式，以便您拥有一个表`(personid, name)`和一个`(personid, sellid)`对表（当需要获取包括`NULL`s 在内的必要记录时，您基本上可以从中执行上述外部联接作为 & ）。

# java - Is Passing Intent Extras Between Activities Bad Style?

> ID：13671978
> 
> 赞同：1
> 
> 时间：2012-12-02T17:49:11.413
> 
> 标签：java, android, android-intent, encapsulation

It seems to me that passing extras via Intent calls is a violation of encapsulation, since classes are directly communicating with one another. That being said, the only viable alternative to this that I have found is setting a variable in some shared class and just having each activity pull data from it - part of me, however, can't help feeling that this isn't a great design choice either. Can someone shed some light on this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:52:58.367

不是，你最终会需要它。通常我在活动之间传递最少的信息，然后在启动的活动的 onCreate() 中检查大数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T18:11:33.097

封装，作为面向对象范式的鲸鱼之一，假设您让将来会使用您的类的程序员从了解组件内部如何构建以及它包含哪些复杂方面的必要性中解放出来，执行这些信息舒适和清晰的编程界面（在最好的情况下）。

`Intent`模型是这样开发的，它假设操作系统的主要组件之间的交互，尤其是`Activity`s，并且它还假设您需要将一些具体信息伴随您的意图，例如`ACTION`您想要执行的 s 的种类、`CATEGORY`您的意图的 a 和一些一组`DATA`实现您的意图的需要。因此，这是此类交互中的便捷模型。

同时，当有现成的解决方案时，在活动之间使用一些共享类是相当不相关的方法，IMO。

# c# - font does not support any style like 'regular' 'bold' 'Italic'

> ID：13671981
> 
> 赞同：0
> 
> 时间：2012-12-02T17:49:23.327
> 
> 标签：c#, winforms, fonts, styles

how can i work with font that dose not support any kind of FontStyle. by the way, I can not create a font Object from it. help??

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T22:09:45.833

Windows 上的字体代码（我猜在任何平台上）都不会从头开始创建新字体。它宁愿解释您的系统上安装/可用的字体，并为您提供使用这些字体的方法。

每个字体都是通过创建一个 FontFamily 对象来实现的；这样的 FontFamily 然后包含每种可用样式的 Font 对象。如果您的系统上没有某种样式（例如“粗体”或“斜体”），您将无法创建它。

您可以使用 FontFamily.IsStyleAvailable 来测试是否是这种情况。[这里](http://msdn.microsoft.com/en-us/library/system.drawing.fontfamily.isstyleavailable.aspx)定义为：

```
public bool IsStyleAvailable(
    FontStyle style
) 
```

如果要创建字体，则必须首先确保它在系统上可用（这意味着如果您想要不常见的字体，则必须使用通用字体或将字体与您的解决方案打包在一起）。

# php - 在我想要的页面之前和之后找到页面的快速方法

> ID：13671988
> 
> 赞同：0
> 
> 时间：2012-12-02T17:49:57.860
> 
> 标签：php, mysql, performance

我是 mysql 的初学者，我想知道是否有更快的方法来执行以下操作：

我有一张这样的桌子：

```
------------------------------
| Pages |      Creation      |
------------------------------
| bar   | 2012-10-10 10:11:10|
| blah  | 0000-00-00 00:00:00|
| foo   | 2012-10-10 10:10:10|
------------------------------ 
```

没有主键。

我想知道特定页面之前的页面和之后的页面（按创建日期排序）。

目前我做：

数据：`SELECT * FROM table ORDER BY creation`

php：

```
foreach($r as $c=>$t)
{
    if($t['pages']==$thepageiwant)
    {
        $before=$c-1;
        $after=$c+1;
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T18:08:57.267

上一页：

```
SELECT table.Pages
FROM table, (SELECT Creation FROM table WHERE Pages = "'.$page.'") AS t2
WHERE table.Creation < t2.Creation
ORDER BY  table.Creation DESC
LIMIT 1 
```

下一页：

```
SELECT table.Pages
FROM table, (SELECT Creation FROM table WHERE Pages = "'.$page.'") AS t2
WHERE table.Creation > t2.Creation
ORDER BY  table.Creation ASC
LIMIT 1 
```

# c# - 如何使用 C# Complex 从矩形转换为极坐标

> ID：13671993
> 
> 赞同：2
> 
> 时间：2012-12-02T17:50:23.450
> 
> 标签：c#

试图将一个数字从矩形转换为极坐标形式，即从 20+j25 到 32<38.66

这是我到目前为止所拥有的：

```
 static void Main(string[] args)
    {
        Complex A = new Complex (0.4, 0.3);
        Complex B = new Complex (0.6, 0.7);
        Complex C = new Complex (24, 19);
        Complex D = A + B + C;

        Console.WriteLine (D);

        Console.ReadLine();
    } 
```

这给了我答案 20, 25\. 是矩形的。我将如何制作这个极地？

谢谢

编辑：好的，我做了一些更改，但仍然无法得到正确的答案。使用代码：

```
 static void Main(string[] args)
    {
        Complex RA = new Complex(25, 20);
        Console.WriteLine("{0} + i{1}", RA.Real, RA.Imaginary);

        double r, q;
        r = Math.Sqrt((RA.Real * RA.Real) + (RA.Imaginary * RA.Imaginary));
        q = Math.Atan(RA.Imaginary/RA.Real);
        Console.WriteLine("{0} < {1}", r, q);
        Console.ReadLine();
    } 
```

我得到 32 < 0.647... 答案应该是 32<38.66。谁能解释为什么我的角度不对？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T18:55:58.147

知道了。必须将弧度转换为度数。感谢大家的帮助！

```
 static void Main(string[] args)
    {
        Complex RA = new Complex(25, 20);
        Console.WriteLine("{0} + i{1}", RA.Real, RA.Imaginary);

        double r, q, z;
        r = Math.Sqrt((RA.Real * RA.Real) + (RA.Imaginary * RA.Imaginary));
        q = Math.Atan(RA.Imaginary/RA.Real);
        z = (q * (180/Math.PI));
        Console.WriteLine("{0} < {1}", r, z);
        Console.ReadLine();
    } 
```

# database - 使用 Cloud App 从本地转储中恢复 Heroku 上的数据库

> ID：13671997
> 
> 赞同：8
> 
> 时间：2012-12-02T17:50:39.223
> 
> 标签：database, postgresql, heroku, database-restore

我正在尝试将数据库从我的开发环境恢复到生产环境。

我已按照 [https://devcenter.heroku.com/articles/heroku-postgres-import-export中的步骤进行操作](https://devcenter.heroku.com/articles/heroku-postgres-import-export)

我在本地创建了一个转储并使用 CloudApp 上传了它。然后我运行了这个命令：

```
heroku pgbackups:restore HEROKU_POSTGRESQL_PURPLE_URL 'http://cl.ly/<some_id>/myapp.dump' 
```

我得到的错误是：

```
HEROKU_POSTGRESQL_PURPLE_URL (DATABASE_URL) <---restore--- myapp.dump

! WARNING: Destructive Action
! This command will affect the app: myapp
! To proceed, type "myapp" or re-run this command with --confirm myapp

> myapp

Retrieving... done

! An error occurred and your restore did not finish. 
```

如果我看一下日志，它会以这样的方式结束：

```
2012-12-02T17:30:42+00:00 app[pgbackups]: download_progress: start
2012-12-02T17:30:42+00:00 app[pgbackups]: download_progress: 0B 
2012-12-02T17:30:42+00:00 app[pgbackups]: 
2012-12-02T17:30:42+00:00 app[pgbackups]: download_progress: 0.0bytes
2012-12-02T17:30:42+00:00 app[pgbackups]: download_progress: done
2012-12-02T17:30:42+00:00 app[pgbackups]: Invalid path 
```

我已经测试了网址，它看起来不错，我在网上搜索了类似的问题，但没有找到答案。

我也尝试过运行`heroku update`，但它已经是最新的

我做错了什么，还是这是一个错误？

我也向他们发送了支持票，但在他们回答之前，我也想听听你们中是否有人偶然发现了类似的东西。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T20:40:19.320

我也无法让它与 Cloud App 一起使用，但使用 Dropbox 成功了。

# ios - iOS 推送通知服务器

> ID：13671998
> 
> 赞同：0
> 
> 时间：2012-12-02T17:50:45.083
> 
> 标签：ios, push-notification, server-push

我试图弄清楚如何为 twitter 应用程序创建推送通知服务器。我希望能够为提及、明星、关注等设置推送通知。这一切都可以通过 API 实现，就像 Tweetbot 一样。如果有人能指出我创建实际服务器部分的方向，即处理用户名的存储并将消息推送出去，那就太好了。如果有关于如何做到这一点的教程，那就太好了！我希望能够通过 ruby​​ 做到这一点，但任何方法都可以。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:07:23.683

The way I built my push server was like this:

1) Symfony 2 web framework to build an admin portal to manage my entities (Symfony2 is similar to Ruby)

2) A Node.js server that allows me to maintain a persistent connection to Apple's push notification server. (This Node.js beast is epic I tell ya)

3) Node.js will make a HTTP Post request to my Symfony server asking it for new notifications

4) My Symfony server will receive the response from my Node.js server, finds all the new notifications that needs to be sent and returns JSON formatted list of notifications that needs to be sent, the notification contains the message to be sent and an array of unique push tokens (also selectively of the token environment - development vs production) that is to receive the push notification

5) Finally, my Node.js server receives the JSON data, parses the JSON and sends the notification binary stream to Apple's PNS server through TLS socket stream, asynchronously for high performance throughput :D

This method has allowed me to separate PHP Symfony server to manage my data without interfering with my Node.js push server that is abstracted from any data-related logic. The Node.js push server just needs to know the message that needs to be sent and the array of tokens to send it to. At the same time, I can extend and enhance my notification entities such as token groups (allows me to quickly fetch a bunch of token just by choosing a group e.g. members, friends and if you like, enemies :D), notification date (so the notification can be sent at a future date rather than immediately) and more.

Hope that helps.